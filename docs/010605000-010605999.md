# StackOverflow 问答 10605000-10605999

# c# - 在 WinForms 中格式化 MAC 地址

> ID：10605000
> 
> 赞同：-1
> 
> 时间：2012-05-15T16:25:25.660
> 
> 标签：c#, formatting, mac-address

使用我的 WinForms 应用程序之一，我需要在文本框中显示计算机的各种网络适配器的 MAC 地址。

此代码在获取字符串方面效果很好：

```
public string AdapterAddress(string criteria)
{
    adapteraddress = (from nic in NetworkInterface.GetAllNetworkInterfaces()
                        where nic.Name == criteria
                        select nic.GetPhysicalAddress().ToString()
                        ).First();
    return adapteraddress;
} 
```

但它输出为

```
003E4B880D01 
```

与

```
00:3E:4B:88:0D:01 
```

如果我可以直接将它用于命令行“ipconfig /all”，我会喜欢它

我知道我需要做一些事情来获取单个字节，然后用 String.Join(":", blah blah) 加入它们，但我不太明白。

这是我的混乱方式，但我觉得我以后可能会遇到一些意想不到的问题：

```
public string AdapterAddress(string criteria)
{
    adapteraddress = (from nic in NetworkInterface.GetAllNetworkInterfaces()
                        where nic.Name == criteria
                        select nic.GetPhysicalAddress().ToString()
                        ).First();

    var tempaddress = SplitMacAddress(adapteraddress);
    adapteraddress = tempaddress;
    return adapteraddress;
}

public string SplitMacAddress(string macadress)
{
    for (int Idx = 2; Idx <= 15; Idx += 3)
    {
        macadress = macadress.Insert(Idx, ":");
    }
    return macadress;
} 
```

有没有我想念的更清洁的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:37:13.673

您可以根据需要格式化[`PhysicalAddress`](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.physicaladdress.aspx)实例，方法是获取单个字节并将它们连接到一个字符串中：

```
string formattedAddress = String.Join(":", 
    adapteraddress.GetAddressBytes()
       .Select(b => b.ToString("X2"))
       .ToArray()
    ); 
```

请注意，您应该`.ToString()`在原始查询中忽略此方法才能正常工作。此外，如果您使用的是 .NET 4，则可以省略最终的`.ToArray()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:37:52.210

最简单的方法：使用 BitConverter

var mac = BitConverter.ToString(nic.GetPhysicalAddress().GetAddressBytes()).Replace("-", ":");

# android - 在画布内拖动图像以更改其位置

> ID：10605001
> 
> 赞同：1
> 
> 时间：2012-05-15T16:25:26.633
> 
> 标签：android, bitmap, drag-and-drop, android-canvas

我有一个包含多个位图图像的画布，我希望用户能够通过触摸任何图像并移动它来移动画布内的图像。

目前，我的应用程序有一个画布和一个图像视图，每当画布更新时，图像视图也会更新。

我该怎么做，我应该使用 SurfaceView 还是类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:22:21.937

您将需要实现一个自定义 View 子类，它维护图像及其位置（和图层顺序）的列表，并适当地显示它们。这样做非常容易：您的子类只需从覆盖[View.onDraw](http://developer.android.com/reference/android/view/View.html#onDraw%28android.graphics.Canvas%29)开始，即可实现其自定义绘图行为。

下一部分是实现[View.onTouchEvent](http://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)。根据[MotionEvent](http://developer.android.com/reference/android/view/MotionEvent.html)动作，您将需要通过找出哪个图像位于给定坐标下来响应 ACTION_DOWN，并通过 ACTION_MOVE 相应地更改该图像的位置。要触发显示更新，只需在更改图像位置后调用[View.invalidate](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)，最终将流向您的`onDraw`方法。

# android - 在android上隐藏/覆盖通知

> ID：10605010
> 
> 赞同：0
> 
> 时间：2012-05-15T16:25:56.597
> 
> 标签：android, notifications, broadcastreceiver

我想知道我是否可以通过广播接收器拦截来电的通知 ID，然后取消呼叫通知或清除通知栏上的所有通知。

我尝试使用 cancelAll() 但我认为它仅适用于我创建的通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:56:26.780

我只是找到解决这个问题的解决方案。我立即截取并显示它。感谢 Radu Motisan 的教程。该解决方案使用 JNI 而不是使用外部库的其他方式。

这是链接：[http ://www.pocketmagic.net/?p=1473](http://www.pocketmagic.net/?p=1473)

# c# - 获取枚举值（来自 .dll）以列出

> ID：10605011
> 
> 赞同：0
> 
> 时间：2012-05-15T16:25:56.940
> 
> 标签：c#, .net

我已经创建了一些`enums`动态`.dll`使用数据库中的数据。

我正在寻找一种方法来获取 a 的`enum`值`list`。

当我将每个值的引用添加`.dll`到项目时，我可以分别访问每个值

```
eg. MyEnum.value1 
```

我尝试使用[Type.GetMembers](http://msdn.microsoft.com/en-us/library/424c79hc.aspx)来获取值，但没有运气。

有什么办法可以将所有值放入`enum`列表中？

**更新**

我也尝试 Enum.GetValues() 但出现错误

***“EnumeratedTypes.MyEnum”是一个“类型”，但用作“变量”***

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:33:19.303

采用`Enum.GetValues(typeof(EnumeratedTypes.MyEnum))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:33:14.987

```
public enum Tree
{
    Trunk
};

Tree.Trunk.EnumToList(); 
```

使用这个扩展：

```
public static List<T> EnumToList<T>(this T source)
{
    Type enumType = typeof(T);

    // Can't use type constraints on value types, so have to do check like this
    if (enumType.BaseType != typeof(Enum))
        throw new ArgumentException("T must be of type System.Enum");

    return new List<T>(Enum.GetValues(enumType) as IEnumerable<T>);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:37:45.010

转换为 int 和 sum，例如：

```
public enum myNums
{
    Alpha = 1,
    Beta = 10,
    Gamma = 100
}

void Main()
{

    var value  = System.Enum.GetValues( typeof( myNums ) )
                           .OfType<myNums>()
                           .Sum (n => (int)n);

    Console.WriteLine ( value ); // 111

}

// Define other methods and classes here 
```

# javascript - HTML/CSS 项目在滚动时消失。

> ID：10605012
> 
> 赞同：1
> 
> 时间：2012-05-15T16:26:04.027
> 
> 标签：javascript, html, css

如果有人能告诉我一旦用户开始滚动，这个网站是如何实现徽标消失的，那将不胜感激！如果您查看左上角的徽标，一旦您开始滚动，它就会消失。这叫什么技术？这是用javascript完成的吗？

[http://www.studioudge.com/](http://www.studionudge.com/)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:27:30.790

不。标志被放置在一个**“普通”**容器内，与页面的其余部分一起滚动；菜单改为**“固定”**菜单，不会滚动。此外，还使用了一个技巧来在菜单顶部显示徽标，并在其后面显示网站内容。很不错的效果，没见过。

基本 HTML/CSS 代码和工作示例：http: **[//jsfiddle.net/cs7Nk/](http://jsfiddle.net/cs7Nk/)** :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:40:20.380

您可以通过固定的 css 属性进行简单的操作。

示例：

```
<div id="main">
  Test Content
</div>

<div id="content">
  Add some more content here for result.
</div>

<style type="text/css">
  #main {
    width: 100%;
    height: 60px;
    background: green;
    position: fixed;
    z-index: 1000; /* Z-Index for making this div always on top */
  }

  #content {
    width: 960px; margin:0 auto; position: relative; background: blue;
  }

</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:30:35.090

我相信正在发生的事情是标题的属性`background-attachment`设置为`scroll`.

徽标不是标题的一部分（它只是位于顶部`z-index`），因此它不会获得滚动效果。

# mysql - 无法连接到 Windows XP 上 localhost (10061) 上的 MySQL 服务器。连接mysql时出错

> ID：10605013
> 
> 赞同：2
> 
> 时间：2012-05-15T16:26:11.230
> 
> 标签：mysql

我正在使用 mysql 5.0 和 easyphp。在连接到 sql server 时，我收到了上述错误。当我试图检查与

```
telnet localhost 3306 
```

它说

> 无法打开与主机的连接。连接失败。

我现在该怎么办？我已经关闭了防火墙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:29:01.790

你确定mysql正在运行吗？您的配置文件中是否可能有skip_networking？看：

[http://dev.mysql.com/doc/mysql/en/can-not-connect-to-server.html](http://dev.mysql.com/doc/mysql/en/can-not-connect-to-server.html)

[来源：http://lists.mysql.com/mysql/186288]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T14:45:45.680

打开`my.ini`文件从`mysql/bin/`

并从行中删除哈希 ( `#`)`#bind-address="127.0.0.1"`

如果该行不存在，请部分粘贴`bind-address="127.0.0.1"`。`[mysqld]`

重新启动mysql，一切都应该再次正常工作。

[来源：easyphp常见问题解答]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-05T09:10:56.100

确保你的机器上安装了 MySql Server 或从[http://dev.mysql.com/downloads/file/?id=460602](http://dev.mysql.com/downloads/file/?id=460602)获取它。 这就是我解决同样问题的方法。

请记得配置到您用于数据库应用程序的端口号对应的端口号（3306 是常用的）

您在配置 MySQL 服务器时输入的密码应该是您用来连接数据库的密码（并且不应为 NULL）

# android - Android - 作为 Activity 一部分的选项卡

> ID：10605018
> 
> 赞同：3
> 
> 时间：2012-05-15T16:26:26.883
> 
> 标签：android, android-layout, android-tabhost

我正在尝试编写一个在顶部有一个带有选项的 RelativeLayout 的活动，然后在该布局下方包含一个包含 2 个选项卡的选项卡主机。

不幸的是，当我在我的布局中添加一个 tabhost 时，它会被放在它所在的 Activity 之上，无论它是在布局中的哪个位置定义的。根据文档**“TabHost 必须是布局的根节点”**，这是否意味着我不能让它成为布局的一部分而不是最顶层的元素？

我为 TabHost 尝试了不同的高度，从 fill_parent 到 wrap_content 到 50dip，但没有影响放置，它只是绘制在所有其他元素的顶部。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:08:37.623

不要将`TabHost`视图与`TabActivity`. 你可以有一个`Activity`which is not a `TabActivity`，并且在它的布局中，任意数量的`TabHost`视图，按照你喜欢的方式排列和分组。

例如，请参阅 [此示例代码](https://github.com/ldo/android-custom-tabs)，它一次显示两组不同的选项卡，以便您可以比较自定义样式与默认样式的外观。

# php - 正则表达式 - 无法在 100% 之间解析 ）

> ID：10605019
> 
> 赞同：0
> 
> 时间：2012-05-15T16:26:29.803
> 
> 标签：php, regex

我正在尝试使用正则表达式将 ColdFusion 网站转换为 PHP。我还没有找到可以做的事情，所以我自己做。

幸运的是，coldfusion 网站在编程方面是基本的，正则表达式可以完成这项工作。

但是，我被困在某个地方。我怎样才能提取这样的东西？

1.  <cfset mailfrom="嘿">
2.  <cfset mailfrom='嘿'>
3.  <cfset mailfrom=hey>
4.  <cfset mailfrom = 嘿>
5.  <cfset mailfrom="<hey>">

我确实尝试了以下模式：

```
preg_match_all('/<cfset (.*)( )=(| |\'|")(.*)(|\'|")>/iU', $this->Content, $customTags, PREG_SET_ORDER); 
```

它有时有效，有时无效。我的 ColdFusion 代码可能在 1 行或 1000 行。所以有时你会看到这样的东西`<cfset mailfrom="hey"><cfset fdsfsd="3333">`

一旦我知道完整的字符串 ( `<cfset mailfrom="hey">`) 以及用 ( `$mailfrom = "hey";`) 替换的内容，我就可以毫无问题地解析它，所以这意味着正则表达式必须至少给我变量名称和值。

谢谢。

编辑 ：

我用这个：

```
preg_match_all('/<cfparam\s*([^>]*)\s*\/?>/i', $this->Content, $customTags, PREG_SET_ORDER); 
```

匹配 <cfparam name="" default="">。我想我可以用同样的方式做，但是 parse(. *) = (.* ) (Var = value)

但这里的问题是这个正则表达式不能匹配值区域中的 < 和 >。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:55:51.557

像这样的东西？`/cfset\s*(?<key>[^=]+)\s*=\s*["'](?<value>[^"']+)["']/i`

例如，字符串`<cfset mailfrom="hey">` `$match["key"]`is`mailfrom`和`$match["value"]`is `key`。[但不要忘记：您不应该使用正则表达式解析 [X]HTML。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:34:01.063

正则表达式在层次结构方面表现不佳，这正是您出现问题的原因。考虑使用 DOM，它的实现在 PHP 中很笨拙，但这正是它的任务。

# django - Django ModelForm，自定义验证

> ID：10605028
> 
> 赞同：1
> 
> 时间：2012-05-15T16:27:29.057
> 
> 标签：django, forms, validation

我有一个很大的表格，有两种可能性。它是事件的一种形式，事件位置可以从组合框（ModelChoice 查询）中选取。但是，用户可以选中“新位置”复选框，然后表单也会显示插入新位置所需的字段，并且“现有位置”组合框会被重置。现在，这一切都适用于 javascript (jQuery)，但我的问题是如何验证表单中未使用的字段。

简单地说>我有 7 个表单文件，其中 3 个始终是强制性的（事件类型、日期时间等），而另一个取决于复选框“新位置”的状态：如果选中 new_location> 验证位置等字段，并忽略其余部分（允许它们为空），否则忽略位置字段并验证其余部分。

```
class EventForm(ModelForm):

    area = forms.ModelChoiceField(
        queryset=Area.objects.order_by('name').all(),
        empty_label=u"Please pick an area",
        label=u'Area',
        error_messages={'required':u'The area is mandatory!'})

    type = forms.ModelChoiceField(
        queryset=SportType.objects.all(),
        empty_label=None,
        error_messages={'required':'Please pick a sport type!'},
        label=u"Sport")

    #shown only if new_location is unchecked - jQuery
    location = forms.ModelChoiceField(
        queryset=Location.objects.order_by('area').all(),
        empty_label=u"Pick a location",
        error_messages={'required':'Please pick a location'},
        label=u'Location')

    #trigger jQuery - hide/show new location field
    new_location = forms.BooleanField(
        required=False,
        label = u'Insert new location?'
            )

    address = forms.CharField(
        label=u'Locatio address',
        widget=forms.TextInput(attrs={'size':'30'}),
        error_messages={'required': 'The address is required'})

    location_description = forms.CharField(
        label=u'Brief location description',
        widget=forms.Textarea(attrs={'size':'10'}),
        error_messages={'required': 'Location description is mandatory'})

    class Meta:
        model = Event
        fields = (
            'type',
            'new_location',
            'area',
            'location',
            'address',
            'location_description',
            'description',
        ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:50:39.120

您可以检查方法中是否存在表单字段`clean`。如果存在，请在其上运行您的自定义验证规则。

```
def clean(self):
    cleaned_data = self.cleaned_data
    field_name = cleaned_data.get('FIELD_NAME', None)

    if field_name:
    ... # do stuff
    return cleaned_data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:37:37.897

我最终只使用了普通表单（不是 ModelForm）和自定义验证，`clean(self)`具体取决于复选框的状态，我认为这是正确的方法。然后，`self._errors["address"]=ErrorList([u'Some custom error'])`我能够完全自定义验证过程中可能出现的各种错误。

# ios - iOS 动画块：忽略动画命令

> ID：10605030
> 
> 赞同：0
> 
> 时间：2012-05-15T16:27:30.713
> 
> 标签：ios, ios5

我会尽量简化问题。

我有一个动画块来为两个 UIViewImages 设置动画。

在开始之前，我采用 UIImageViews 的矩形：

我改变： origin.x+=40 两者

在动画块中，我将这两个 UIImage 视图的框架设置为修改后的矩形。

**有用。**

现在有一件事。对于*其中一个*矩形，我还将更改 size.width-= 20 使其宽度缩小一点。

**结果：**发生了收缩和移动，但第二个 UIImage 视图将不再移动。就好像对元素的宽度/高度进行动画处理，取消了动画块中的所有其他动画。

我不知道为什么。我已经在这两天了，但无济于事。有没有人遇到过这样的事情？我在 iOS 5.1 Xcode 4.3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:41:29.010

即使 frame 属性可以设置动画，但它不是为视图设置动画的推荐方式。

相反，我建议您应用 CGAffineTransform 来转换 UIImageView 的属性。

这是文档链接：[https ://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGAffineTransform/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGAffineTransform/Reference/reference.html)

在您的情况下，您将对图像视图应用缩放和平移变换。请记住，如果要应用两个变换，则必须先将它们组合成一个。

# grails - 来自 Grails 插件的应用程序上下文？

> ID：10605036
> 
> 赞同：0
> 
> 时间：2012-05-15T16:27:52.533
> 
> 标签：grails, grails-plugin

我正在开发一个插件并尝试尽可能地正确解耦。如何获取包含我的插件的 grails-app 的应用程序上下文？我有一个 doWithWebDescriptor ，其中包含一个 servlet，该 servlet 包含在主 grails-app 上下文中：

```
/MainApp/servlet-url-pattern 
```

我想在插件的 GSP 中引用它。什么是合适的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:22:41.913

将此行添加到您的`bootstrap.groovy`in`init`

```
ApplicationContext appContext = (ApplicationContext)
servletContext.getAttribute(GrailsApplicationAttributes.APPLICATION_CONTEXT); 
```

您还可以在使用应用程序上下文的类中从引导程序设置上下文。

```
YourClassName.setContext(appContext); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:08:03.617

我在这里可能错了，但我认为 doWithWebDescriptor 用于生成 web.xml 文件。该文件是启动应用程序所必需的。如果您的应用程序未启动，则您还不能拥有 spring 上下文。

# javascript - 访问对象标签内/外的对象

> ID：10605037
> 
> 赞同：0
> 
> 时间：2012-05-15T16:27:54.720
> 
> 标签：javascript, html, css, object

是否可以在 <object> 中的 HTML 对象上使用 CSS/JavaScript？有一个代码：

索引.html：

```
<object type="text/html" data="1.html"></object>
<div id="bbb"> some content </div> 
```

1.html：

```
<div id="aaa">some content</div> 
```

我的问题是：在“1.html”中，我可以通过 JavaScript #bbb 对象进行修改吗？在“index.html”中，我可以使用 CSS 或 JavaScript 修改#aaa 对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:02:02.880

如果 1.html 由 index.html 打开，那么在 1.html 中，您可以调用 'window.opener' 来获取对 index.html 的引用，从而访问/修改其中的属性。同样，从 index.html 中，您将能够引用 1.html 并修改其中的任何内容。

唯一的要求是 index.html 和 1.html 必须在同一个域中。否则，浏览器将限制您跨域访问来自其他域的帧。所以，只要它们都在同一个域上（例如 localhost:8080），你就可以了。

# objective-c - '索引 17 超出空数组的范围' TableView

> ID：10605038
> 
> 赞同：1
> 
> 时间：2012-05-15T16:27:55.373
> 
> 标签：objective-c, xcode, uitableview, ios5

我试图在我的 RSS 提要中实现下拉刷新。但是现在我遇到了一个问题，刚触发它，它就崩溃了！我很确定我在这里遇到了和这个人一样的问题：

[超出空数组崩溃范围的索引“5”](https://stackoverflow.com/questions/8962280/index-5-beyond-bounds-of-empty-array-crash)

我试图解决这个问题，但不知何故我无法这样做。这是我的代码：

```
#pragma mark -
#pragma mark View lifecycle

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Artikel", @"Artikel");
        self.clearsSelectionOnViewWillAppear = NO;
        self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];

    if (_refreshHeaderView == nil) {

        EGORefreshTableHeaderView *view = [[EGORefreshTableHeaderView alloc] initWithFrame:CGRectMake(0.0f, 0.0f - self.tableView.bounds.size.height, self.view.frame.size.width, self.tableView.bounds.size.height)];
        view.delegate = self;
        [self.tableView addSubview:view];
        _refreshHeaderView = view;
        [view release];

    }
    [_refreshHeaderView refreshLastUpdatedDate];
    [self.navigationController.navigationBar setTintColor:[UIColor blackColor]];

    if ([[[UIDevice currentDevice] systemVersion] floatValue] > 4.9) {
        UIImage *navBarImage = [UIImage imageNamed:@"navbar_ipad.png"];
        [self.navigationController.navigationBar setBackgroundImage:navBarImage forBarMetrics:UIBarMetricsDefault];
    } else {

    }

    UIImage *image = [[UIImage imageNamed:@"refresh.png"]retain];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setBackgroundImage: image forState:UIControlStateNormal];

    button.frame= CGRectMake(0.0, 0.0, image.size.width, image.size.height);
    button.showsTouchWhenHighlighted = YES;

    [button addTarget:self action:@selector(refresh)    forControlEvents:UIControlEventTouchUpInside];

    UIView *v=[[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 28, image.size.height) ];

    [v addSubview:button];

    UIBarButtonItem *forward = [[UIBarButtonItem alloc] initWithCustomView:v];

    self.navigationItem.rightBarButtonItem = forward;

    [forward release];
    [v release];
    [image release];

    [self.navigationController.navigationBar setTintColor:[UIColor blackColor]];

    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
    [nc addObserver:self selector:@selector(handleXMLDownloadComplete:) name:EMRXMLDownloadCompleteNotification object:nil];

    self.clearsSelectionOnViewWillAppear = NO;
    self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
}

-(void)refresh {
    [self.articles awakeFromNib];

    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
    [nc addObserver:self selector:@selector(handleXMLDownloadComplete:) name:EMRXMLDownloadCompleteNotification object:nil];
}

- (void)handleXMLDownloadComplete: (NSNotification *)note {
    [self.tableView reloadData];
    [_refreshHeaderView egoRefreshScrollViewDataSourceDidFinishedLoading:self.tableView];
    self.thirdViewController.detailItem = [self.articles articleAtIndex:0];

}

// Ensure that the view controller supports rotation and that the split view can therefore show in both portrait and landscape.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
}

#pragma mark -
#pragma mark Data Source Loading / Reloading Methods

- (void)reloadTableViewDataSource{
    //  should be calling your tableviews data source model to reload
    //  put here just for demo
    _reloading = YES;

}

- (void)doneLoadingTableViewData{
    //  model should call this when its done loading
    _reloading = NO;
    [_refreshHeaderView egoRefreshScrollViewDataSourceDidFinishedLoading:self.tableView];
    //NSIndexPath *indexPath=[NSIndexPath indexPathForRow:0 inSection:0];
    //[[tableView delegate] tableView:tableView didSelectRowAtIndexPath:indexPath];
}

#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)aTableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)aTableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return [articles count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"CellIdentifier";

    // Dequeue or create a cell of the appropriate type.
    UITableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    // Configure the cell.
    NSMutableDictionary *article = [self.articles articleAtIndex:indexPath.row];
    NSString *title = [article objectForKey:@"title"];
    cell.textLabel.text = title;

    return cell;
}

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    self.thirdViewController.detailItem = [self.articles articleAtIndex:indexPath.row];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    [[self thirdViewController]checkHistory];
}

#pragma mark -
#pragma mark UIScrollViewDelegate Methods

- (void)scrollViewDidScroll:(UIScrollView *)scrollView{ 

    [_refreshHeaderView egoRefreshScrollViewDidScroll:scrollView];

}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate{

    [_refreshHeaderView egoRefreshScrollViewDidEndDragging:scrollView];

}

#pragma mark -
#pragma mark EGORefreshTableHeaderDelegate Methods

- (void)egoRefreshTableHeaderDidTriggerRefresh:(EGORefreshTableHeaderView*)view{

    [self refresh];
    [self performSelector:@selector(doneLoadingTableViewData) withObject:nil afterDelay:3.0];

}

- (BOOL)egoRefreshTableHeaderDataSourceIsLoading:(EGORefreshTableHeaderView*)view{

    return _reloading; // should return if data source model is reloading

}

- (NSDate*)egoRefreshTableHeaderDataSourceLastUpdated:(EGORefreshTableHeaderView*)view{

    return [NSDate date]; // should return date data source was last changed

}

#pragma mark -
#pragma mark Memory management

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

- (void)viewDidUnload {
    self.thirdViewController = nil;

    [super viewDidUnload];
}

- (void)dealloc {
    [articles release], articles = nil;
    [thirdViewController release];

    [super dealloc];
}

@end 
```

错误代码：

```
Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 17 beyond bounds for empty array'
*** First throw call stack:
(0x1748022 0x196ecd6 0x1734d88 0x20944 0x1d29b 0x712c54 0x7133ce 0x6fecbd 0x6fd6c6 0x70d92b 0x70decf 0x6bd956 0x70e74e 0x6d701e 0x6bdad7 0x70e7c5 0xf390 0x1d4bb 0x6c6ca3 0x6c830e 0x93fe29 0x93f133 0x9403bf 0x942a21 0x94297c 0x93b3d7 0x6a01a2 0x6a0532 0x686dc4 0x67a634 0x22eeef5 0x171c195 0x1680ff2 0x167f8da 0x167ed84 0x167ec9b 0x22ed7d8 0x22ed88a 0x678626 0x1e3d 0x1db5)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T22:25:50.970

当调用函数**egoRefreshScrollViewDataSourceDidFinishedLoading** -> **scrollView** * *setContentInset * 时调用***cellForRowAtIndexPath**函数：所以在我的**cellForRowAtIndexPath**内部我测试了**indexPath.row 是否 >= [myArray count]**然后我直接返回了单元格

# javascript - 使用 data-downloadurl 下载多个文件

> ID：10605043
> 
> 赞同：1
> 
> 时间：2012-05-15T16:28:06.203
> 
> 标签：javascript, html, file, drag-and-drop

我正在查看有关使用 data-downloadurl 下载 HTML5 拖放文件的案例研究。我有一个这种方法的工作模型，可以下载从服务器检索到的文件，但我想知道是否有办法设置 data-downloadurl 一次下载多个文件。

我在想的是一个逗号分隔的网址列表，例如：

`data-downloadurl="{$item.mime}:{$item.name}:{$item.url}, {$item2.mime}:{item2.name"}:{item2.url}`

但我知道这不起作用..有什么办法吗？

# rest - 从 Jersey 移除默认的 REST 服务

> ID：10605044
> 
> 赞同：0
> 
> 时间：2012-05-15T16:28:07.637
> 
> 标签：rest, netbeans, service, jersey

我使用带有 Jersey 1.8 的 netbeans 7.1 创建了一个 REST 服务，并在“RESTful Web Services”文件夹中添加了 2 个服务：

*   访问令牌请求 [/accessToken]
*   RequestTokenRequest [/requestToken]

我尝试用右键单击删除或按键盘上的删除，但它们不会消失......关于如何删除它们的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:52:01.770

在右键单击服务名称后出现的菜单中，应该有一个“*打开*”选项。单击它将带您进入定义资源的类。从其方法中删除球衣注释将使其从“ *RESTful Web Services* ”文件夹中消失（以及使它们对客户端不可用）。如果您不需要该类，则可以简单地将其全部删除。请务必在执行此操作时检查依赖项。

# forms - 在 Symfony2 中将参数传递给控制器

> ID：10605045
> 
> 赞同：-1
> 
> 时间：2012-05-15T16:28:08.903
> 
> 标签：forms, symfony, twig

我正在开发一个使用 Symfony 2 和 Twig 进行模板化的应用程序。我想知道如何将参数从表单动作传递给动作。我是这样写的：

```
 <form action="{{ path('AnotatzaileaAnotatzaileaBundle_Interpretatu') with {{Argument}}  }}" method="post" {{ form_enctype(form) }} class="erreg"> 
```

但这是不正确的。为什么 with 不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:58:51.197

将参数传递给路径的第二个参数：

```
path('AnotatzaileaAnotatzaileaBundle_Interpretatu', 
    { "key": "value", "another key": "another value" }) 
```

（为清楚起见添加了换行符）。

# java - GWT - 图像上传和 GAE

> ID：10605046
> 
> 赞同：0
> 
> 时间：2012-05-15T16:28:11.470
> 
> 标签：java, google-app-engine, gwt, servlets

我看过服务器端上传[代码示例](http://code.google.com/p/gwtupload/wiki/GwtUpload_GettingStarted)......它说接下来......

```
...
 /**
   * Get the content of an uploaded file.
   */
  @Override
  public void getUploadedFile(HttpServletRequest request, HttpServletResponse response) throws IOException {
    String fieldName = request.getParameter(UConsts.PARAM_SHOW);
    File f = receivedFiles.get(fieldName);
    if (f != null) {
      response.setContentType(receivedContentTypes.get(fieldName));
      FileInputStream is = new FileInputStream(f);
      copyFromInputStreamToOutputStream(is, response.getOutputStream());
    } else {
      renderXmlResponse(request, response, XML_ERROR_ITEM_NOT_FOUND);
   }
  }
... 
```

...好吧，正如我所见，要获取文件片段使用**File**对象。但是，我记得，GAE 不支持 File io 对象。所以我的问题是这个库可以用于 GAE 文件上传，还是有一些更适合 GWT 的库？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:49:04.697

在 GAE 中不需要使用 Java IO 来处理 Image Upload，您可以只依赖[Blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview)和[ImageService](https://developers.google.com/appengine/docs/java/images/overview) API。[本教程](http://ikaisays.com/2010/09/08/gwt-blobstore-the-new-high-performance-image-serving-api-and-cute-dogs-on-office-chairs/)有一个很好的解释和一个例子，我跟着它，我的上传功能运行顺利。

# python - Django - 使用 F() 表达式但获得非原子更新

> ID：10605047
> 
> 赞同：4
> 
> 时间：2012-05-15T16:28:12.930
> 
> 标签：python, django, django-models, race-condition

我有一个如下所示的管理操作：

```
def process(modeladmin, request, queryset):
    for reservation in queryset:
        if not reservation.processed:
            reservation.processed = True
            reservation.save()
            item = reservation.item
            item.available = F('available') - reservation.quantity
            item.save() 
```

因此，管理员可以处理`reservation`一个`item`. 每当他这样做时，都会将`reservation`其标记为已处理，并且可用`items`数量会减少 中指定的数量`reservation`。

正如所有管理员操作都会发生的那样，管理员可以`reservations`一次处理多个操作。`reservations`如果一切都不同，一切都会顺利`items`。但是如果两个`reservations`共享一个`item`，可用的数量`items`只会减少最后`reservation`处理中指定的数量。

我认为`F()`表达式仅适用于这种情况：我想进行许多更改`item`并让它们增加或减少属性，`item`而不会遇到竞争条件。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T14:16:47.263

这并不是你真正使用 F 对象的方式。一旦你将获取和保存的步骤分开，你本质上就是让它明确地成为非原子的。

你应该使用`update`它，所以*item*部分应该是：

```
Item.objects.filter(id=reservation.item.id).update(available=F('available')-reservation.quantity) 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-24T04:05:24.397

F() 表达式用于查询中，例如，当您想在 SQL 中执行此操作时：

```
SELECT * FROM foo WHERE foo_col = bar_col 
```

你会这样做：

```
Foo.objects.filter(foo_col=F('bar_col')) 
```

无论如何，您要求仅根据最后一次预订减少项目意味着您必须对如何循环预订有一点创意。一种选择是按项目 id 对查询集进行排序，并且每次 id “更改”时，根据该项目的最后预订调整可用数量。

# javascript - 为什么其中一个侦听器适用于 Media API 事件，而另一个却不适用？

> ID：10605048
> 
> 赞同：0
> 
> 时间：2012-05-15T16:28:18.233
> 
> 标签：javascript, html, html5-video

我正在为 Media API 事件添加一个侦听器，如下所示：

```
function addPlayListener() {
    var video = document.getElementById("theVideo");
    video.addEventListener('play',  function() {alert('play');}, false); // method a
video.addEventListener('play',  alert('play'), false); // method b
}
window.addEventListener('load', addPlayListener, false);

<video id="theVideo" controls width="180" height="160" src="sample_mpeg4.mp4"> </video> 
```

使用方法 a 一切都按预期工作，但是使用方法 b 会在页面加载后立即显示警报（并且在事件触发时不显示）。

为什么会这样，方法 b 的语法有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:05:55.557

[addEventListener](https://developer.mozilla.org/en/DOM/element.addEventListener)的第二个参数必须是“当指定类型的事件发生时接收通知的对象。这必须是实现 EventListener 接口的对象，或者只是一个 JavaScript 函数。” 在您的“方法 b”中，警报会立即触发，因为它不在函数内，也不是实现 EventListener 接口的对象。方法 A 是普遍接受的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:07:04.653

在`method b`中，对话框立即显示，因为您首先调用它 -- `alert('play')`。`addEventListener`不能延迟其参数的执行，而是传递`alert`'`return`值——它不能做太多事情：

```
// what's being passed after `alert('play')` is called
video.addEventListener('play', true, false); 
```

`function () { ... }`in`method a`正是您需要延迟调用`alert('play')`直到事件被触发。a 函数本身被传递给`addEventListener`，并且可以在以后多次调用（即，每次触发事件时）。并且，每次调用时，它都会依次执行其内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:07:07.497

根据[addEvenListener](https://developer.mozilla.org/en/DOM/element.addEventListener)文档：

```
 target.addEventListener(type, listener[, useCapture]); 
```

`listener`一定是：

*   对象，实现`EventListener`接口，
*   JavaScript 函数

`alert()`函数不返回任何实现`EventListener`接口的对象，也不返回 Javascript `function`。简单地说，`alert`不返回任何东西。所以，你得到的是：

```
 video.addEventListener('play',  undefined , false);   //method b 
```

# delphi - 如何防止“结束进程树”终止我已经启动的程序？

> ID：10605049
> 
> 赞同：13
> 
> 时间：2012-05-15T16:28:25.670
> 
> 标签：delphi, delphi-xe2

我正在尝试使用 ShellExecute 从 Delphi XE2 中的另一个应用程序“one.exe”执行 EXE“two.exe”。

```
ShellExecute(0, 'open', 'two.exe', nil, nil, SW_NORMAL); 
```

它工作得很好，但是每当我从任务管理器的进程选项卡中终止应用程序“one.exe”（父应用程序）时，使用“结束进程树”选项，应用程序“two.exe”也会被终止。

如何防止我的 ShellExecuted 应用程序像这样被终止？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T17:41:19.487

好的，不是很好的解决方案......但测试成功;o）

```
ShellExecute(0, 'open', 'cmd', 
  PChar('/C  start "" "' + Application.ExeName + '"'), nil, SW_HIDE); 
```

![在此处输入图像描述](../Images/e848db467a50ba21d3402a68e41beaff.png)

第一个是手动启动...他的孩子定期调用 shellexecute... 最后一个，使用 shellexecute **+** cmd 技巧...

[/C 解释](https://stackoverflow.com/questions/3515867/send-parameter-to-cmd)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-15T17:19:14.833

我认为您需要创建一个中间过程，然后生成`two.exe`. 然后您需要立即终止中间进程，此时与原始进程之间的关系`two.exe`被打破。

# c# - 如何保护 SyndicationFeeds 以在 MVC 视图中显示

> ID：10605052
> 
> 赞同：0
> 
> 时间：2012-05-15T16:28:34.263
> 
> 标签：c#, rss, atom-feed, syndication-feed

我正在使用 SyndicationFeed 阅读来自外部站点的 Rss / Atom 提要

```
 XmlReader reader = XmlReader.Create(RssFeed);
 SyndicationFeed feed = SyndicationFeed.Load(reader); 
```

在阅读 Rss 和 atom 提要时避免常见安全风险的最佳方法是什么

这里有一些说明：[http ://www.cgisecurity.com/rss.html](http://www.cgisecurity.com/rss.html)

同时仍然允许在我的网站上显示 Html 格式的文本和视频内容？

**编辑**

安全风险：

提要可能包含恶意标记，如下所示

```
<?xml version="1.0" encoding="ISO-8859-1"?> <rss version="2.0"> <channel> 
<title> <script>alert('Channel Title')</script> 
</title>  
<link>http://www.mycoolsite.com/ 
</link> 
<description> <script>alert('Channel Description')</script> </description> 
<language>en-us 
</language>  
<copyright>Mr Cool 2006</copyright> 
<pubDate>Thu, 22 Jun 2006 11:09:23 EDT</pubDate> <ttl>10</ttl> <image>  
<title> <script>alert('Channel Image Title')</script> 
</title>  
<link>http://www.mycoolsite.com/</link> 
<url>http://www.mycoolsite.com/logo.gif</url> 
<width>144</width> 
```

呈现时，Javascript 代码将运行并显示警报框。此内容可能是恶意的，

跨站请求伪造

攻击者可以利用跨站点请求伪造（CSRF 或 XSRF）攻击例如：

```
<img 
src="http://www.mystocktradersite.com/transaction.asp?sell=google&buy=Microsoft&nums
hares=1000"> 
```

在网站上发布提要的用户必须登录，但任何人都可以注册一个帐户。我想知道允许合法用户让他们的 Rss / atom 提要读取和显示图像的最佳方法，但不允许恶意内容。

我目前正在查看 microsoft antiXss 库来帮助解决这个[http://wpl.codeplex.com/](http://wpl.codeplex.com/)

**编辑 2**

我正在 mvc Web 应用程序中将其读入我的控制器，并希望在视图中呈现 rss 提要。

这是完整的操作结果

```
public PartialViewResult Blog(int id, string blogId)
        {
             var project = _projectRepository.GetById(id);

             XmlReader reader = XmlReader.Create(project.RssFeed);
             SyndicationFeed feed = SyndicationFeed.Load(reader);

             //select out a collection of anonymous types from RSS feed
                 var blog = (from rss in feed.Items
                             where rss.Id == blogId
                             select new VmProjectBlog
                             {
                                 Id = rss.Id,
                                 Title = rss.Title.Text,
                                 PublishedDate = rss.PublishDate.DateTime,
                                 Description = rss.Summary.Text
                             }).FirstOrDefault();

                 return PartialView("_Blog", blog);

} 
```

这是视图

```
<div id="summary">           
     <div class="full blog">                        
        <div class="article large">
            <div class="title">
                <h2>@Model.Title</h2>
            </div>
            <div class="post">
                @Html.Raw(Model.Description)                
           </div>                        
        </div>
        <a class="button-lrg-blue" href="@Model.Link"><span>Read full blog ...</span></a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:24:29.780

`SyndicationFeed`不直接对内容执行任何操作，例如执行 javascript 或显示标记（包括获取图像，例如跨站点请求）；因此，您无需采取任何措施`SyndicationFeed`来避免这些安全风险。

您必须提供更多关于您计划如何显示标记的详细信息，然后才能有人提供详细的建议。例如，它是 WPF 应用程序、WinForms 应用程序、网站等...

# ruby-on-rails - 在 gem 中测试 ActiveRecord 模型？

> ID：10605053
> 
> 赞同：15
> 
> 时间：2012-05-15T16:28:45.300
> 
> 标签：ruby-on-rails, activerecord, rspec, gem

我正在尝试从 Rails 3.2.3 应用程序中提取一组模型到 gem 中，以便它们可以用作应用程序之间的共享接口。

我将模型移动到一个模块中并将其放入 lib/invite_interface/invite.rb

```
module InviteInterface
  class Invite < ActiveRecord::Base
    belongs_to :user
  end

  def to_json; end;
  def from_json; end;
end 
```

我将 rspec 放入 gemfile 中，让它成功运行，创建了以下规范：

```
require 'spec_helper'

describe InviteInterface::EncounterSurvey do
  it 'should belong to user' do
    subject.should respond_to(:user)
  end

end 
```

不幸的是，我无法在模型上执行 rspec，因为活动记录/rspec 需要一个活动连接。

```
1) InviteInterface::Invite should belong to encounter survey set
   Failure/Error: subject.should respond_to(:user)
   ActiveRecord::ConnectionNotEstablished:
     ActiveRecord::ConnectionNotEstablished
   # /Users/justin/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:398:in `retrieve_connection'
   # /Users/justin/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
   # /Users/justin/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
   # /Users/justin/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/model_schema.rb:228:in `columns'
   # /Users/justin/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/model_schema.rb:243:in `column_defaults' 
```

如何防止 ActiveRecord 寻找数据库连接？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T16:46:40.220

无论如何，您都需要使用数据库测试您的库，因此您不妨使用内存中的 SQLite 数据库进行测试。只需将其添加到`spec_helper.rb`：

```
ActiveRecord::Base.establish_connection(:adapter => "sqlite3", 
                                       :database => ":memory:") 
```

并按如下方式创建您的架构：

```
ActiveRecord::Schema.define do
  self.verbose = false

  create_table :invites, :force => true do |t|
    t.string :text
  end
  ...
end 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-20T22:27:58.393

我发现，如果您正在测试孤立的模型，您不妨在定义连接时尝试利用 SQLite3 的内存功能`ActiveRecord`以获得非常快的规格：

```
ActiveRecord::Base.establish_connection(
  :adapter => 'sqlite3',
  :database => ':memory:'
) 
```

试试看，它对我来说就像一个魅力，让我的模型测试得更快。

# php - 在php中找不到类

> ID：10605056
> 
> 赞同：-2
> 
> 时间：2012-05-15T16:28:50.633
> 
> 标签：php

我编写了以下代码，

```
<?php 
require_once "products.php";
    $test = new Products;

    $array = array(1,2,3,4,5,6,6,7,8,9,10);     
    $start = 4;
    $limit = 9;
    $value =  $test -> limit($array, $start, $limit);
    echo $value;
?> 
```

当我运行它时，它给了我一个错误：

> 致命错误：第 10 行的 C:\xampp\htdocs\pro\application\modules\products\controllers\products.php 中找不到类 'MX_Controller'

现在它没有理由不在那里找到类。

```
<?php
/**
 * Created by JetBrains PhpStorm.
 * User: Ahmed
 * Date: 4/2/12
 * Time: 9:55 PM
 * To change this template use File | Settings | File Templates.
 */
class Products extends MX_Controller
{
    public function __construct()
    {
        parent::__construct();
        $this->load->library('pagination');
        $this->load->model('products_model');
        $this->load->helper(array('form', 'url', 'html'));
        $this->load->library(array('session', 'upload', 'parser'));

    }

    public function home()
    {
        $this->load->view('products/home');
    }

    public function pre_search()
    {
        redirect('products/search/' . $this->input->post('keyword'));
    }

    public function limit($array, $start, $limit)
    {
        $result = array();
        for($i = 0, $j = $start; ($j < $start + $limit) && ($j < count($array)); $j++, $i++)
            $result[$i] = $array[$j];
        return $result;
    }

    public function search($keyword)
    {
        $products = $this->products_model->search($keyword);
        $data['zerorows'] = empty($products);
        if(!empty($products)){
            $config['cur_tag_open'] = '<span class="current">';
            $config['cur_tag_close'] = '</span>';
            $config['num_tag_open'] = '<span class="page larger">';
            $config['num_tag_close'] = '</span>';
            $config['base_url'] = base_url() . "products/search/" . $keyword;
            $config['total_rows'] = count($products);
            $config['per_page'] = PRODUCT_PERPAGE;
            $config['uri_segment'] = 4;
            $this->pagination->initialize($config);
            $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;
            $products = $this->limit($products, $page, PRODUCT_PERPAGE);
            $data['links'] = $this->pagination->create_links();
        }
        $data['products'] = $products;
        $this->load->view('products/index', $data);
    }

    public function makeslist()
    {
        $makes = $this->products_model->getmakes();
        $data['makes'] = $makes;
        $this->load->view('products/makes', $data);
    }
    public function pricelist()
    {
        $this->load->view('products/prices');
    }

    public function make($make)
    {
        $products = $this->products_model->getlistby_make($make);
        $data['zerorows'] = empty($products);
        if(!empty($products)){
        $config['cur_tag_open'] = '<span class="current">';
        $config['cur_tag_close'] = '</span>';
        $config['num_tag_open'] = '<span class="page larger">';
        $config['num_tag_close'] = '</span>';
        $config['base_url'] = base_url() . "products/make/" . $make;
        $config['total_rows'] = count($products);
        $config['per_page'] = PRODUCT_PERPAGE;
        $config['uri_segment'] = 4;
        $this->pagination->initialize($config);
        $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;
        $products = $this->limit($products, $page, PRODUCT_PERPAGE);
            $data['links'] = $this->pagination->create_links();
        }
        $data['products'] = $products;

        $this->load->view('products/index', $data);
    }

    public function price($lower, $upper)
    {
        $products = $this->products_model->getlistby_price($lower, $upper);
        $data['zerorows'] = empty($products);
        if(!empty($products)){
        $config['cur_tag_open'] = '<span class="current">';
        $config['cur_tag_close'] = '</span>';
        $config['num_tag_open'] = '<span class="page larger">';
        $config['num_tag_close'] = '</span>';
        $config['base_url'] = base_url() . "products/price/" . $lower . "/" . $upper;
        $config['total_rows'] = count($products);
        $config['per_page'] = PRODUCT_PERPAGE;
        $config['uri_segment'] = 5;
        $this->pagination->initialize($config);
        $page = ($this->uri->segment(5)) ? $this->uri->segment(5) : 0;
        $products = $this->limit($products, $page, PRODUCT_PERPAGE);
            $data['links'] = $this->pagination->create_links();
        }
        $data['products'] = $products;

        $this->load->view('products/index', $data);
    }

    public function index()
    {
        $products = $this->products_model->getlist(PRODUCT_HOMEPAGE, FALSE);
        $data['zerorows'] = empty($products);
        if(!empty($products)){
        $config['cur_tag_open'] = '<span class="current">';
        $config['cur_tag_close'] = '</span>';
        $config['num_tag_open'] = '<span class="page larger">';
        $config['num_tag_close'] = '</span>';
        $config['base_url'] = base_url() . "products/index";
        $config['total_rows'] = count($products);
        $config['per_page'] = PRODUCT_HOMEPAGE;
        $config['uri_segment'] = 3;
        $this->pagination->initialize($config);
        $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;
        $products = $this->limit($products, $page, PRODUCT_HOMEPAGE);
        $data['links'] = $this->pagination->create_links();
        }
        $data['products'] = $products;
        $this->load->view('products/index', $data);

    }

    public function show($id)
    {
        $product = $this->products_model->getproduct_by_id($id);
        if(!empty($product))
        {
            $product[0]->reviews = modules::run('reviews/index', $id);
            $product[0]->reviewform = modules::run('reviews/addnew', $id);
            $this->load->view('products/show', $product[0]);
        }
        else
            show_error("Product with ID: " . $id . " not found in database.");
    }

    public function create()
    {
        $this->load->helper('form');
        $this->load->library('form_validation');
        $this->form_validation->set_rules('make', 'Make', 'required');
        $this->form_validation->set_rules('model_no', 'Model Number', 'required');
        $this->form_validation->set_rules('description', 'Description', 'required');
        $this->form_validation->set_rules('price', 'Price', 'required');
        $this->form_validation->set_rules('image_url', 'Image', 'callback__do_upload');
        if($this->form_validation->run($this) === FALSE)
        {
            $this->session->set_flashdata("message", validation_errors());
            $this->load->view('products/new');
        }
        else
        {
            $post = array();
            $post['seller_id'] = $this->input->post('seller_id');
            $post['make'] = $this->input->post('make');
            $post['model_no'] = $this->input->post('model_no');
            $post['description'] = $this->input->post('description');
            $post['price'] = $this->input->post('price');
            $post['image_url'] = $this->input->post('image_url');
            $post['thumb_url'] = $this->input->post('thumb_url');
            $this->products_model->save($post);
            $this->load->view('products/done');
        }
    }

    public function _do_upload()
    {
        $field_name = 'image_url';
        if ( ! $this->upload->do_upload($field_name))
        {
            $this->form_validation->set_message('_do_upload', $this->upload->display_errors());
            return FALSE;
        }
        else
        {
            $filedata = $this->upload->data();
            $this->load->library('image_moo');
            if($filedata['image_height'] > IMAGE_HEIGHT || $filedata['image_width'] > IMAGE_WIDTH)
            {
                $this->image_moo->load($filedata['full_path']);
                $this->image_moo->resize(IMAGE_WIDTH, IMAGE_HEIGHT);
                $this->image_moo->save($filedata['full_path']);
            }
            $this->image_moo->load($filedata['full_path']);
            $this->image_moo->resize(THUMB_WIDTH, THUMB_HEIGHT, FALSE);
            $this->image_moo->save_pa("", "_thumb", TRUE);
            $_POST['image_url'] =  UPLOAD_PATH . $filedata['file_name'];
            $_POST['thumb_url'] =  UPLOAD_PATH . $filedata['raw_name'] . "_thumb" . $filedata['file_ext'];
            return TRUE;
        }
    }

    public function addnew()
    {
        $isloggedin = $this->session->userdata('isloggedin');
        if($isloggedin)
        {
            $data['seller_id'] = $this->session->userdata('userid');
            $this->load->view('products/new', $data);
        }
        else
        {
            $this->session->set_flashdata("message", "You must be logged in, to list a product for selling.");
            redirect("/products");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:34:46.463

在我看来，您似乎没有将文件包含在 MX_Controller 类中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T16:33:22.193

```
class Products extends MX_Controller 
```

意味着，您的（新）类“产品”扩展了（已经）现有的类“MX_Controller”。所以这是 Products 类的定义行，**而不是**MX_Controller。您是否包括 MX/Controller.php 文件？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T16:32:07.790

错误`'MX_Controller' not found`是因为您的类 ( `Products`) 仅*扩展* `MX_Controller`- 检查代码中存在的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T16:31:48.693

要处理这些`extends`陷阱，最好使用[autoloading](http://www.php.net/manual/en/function.spl-autoload-register.php)。

# python - IPython 魔术函数 %paste 问题

> ID：10605058
> 
> 赞同：1
> 
> 时间：2012-05-15T16:29:05.840
> 
> 标签：python, ipython

我目前正在使用 ipython。当我尝试使用著名的魔术函数 %paste 时，我收到一条错误消息：

**tkinter_clipboard_get() 不带参数（给定 1 个）**

整个堆栈如下所示：

> 在 [131] 中：%paste ------------------------------------------- -------------------------------- TypeError Traceback (最近一次调用最后一次) ----> 1 get_ipython()。魔术（你'粘贴'）
> 
> C:\Python27\lib\site-packages\IPython\core\interactiveshell.pyc in magic(self, a rg_s, next_input) 1983
> self._magic_locals = sys._getframe(1).f_locals 1984
> with self.builtin_trap: -> 1985 result = fn(magic_args) 1986 # 确保我们没有保留对象引用：
> 
> 1987 自我._magic_locals = {}
> 
> C:\Python27\lib\site-packages\IPython\frontend\terminal\interactiveshell.pyc in magic_paste(self, parameter_s) 633 return 634 try: --> 635 text = self.shell.hooks.clipboard_get() 636 block = strip_email_quotes(text.splitlines()) 637 除了 TryNext 作为 clipboard_exc：
> 
> C:\Python27\lib\site-packages\IPython\core\hooks.pyc in **call** (self, *args, ** kw) 133 #print "prio",prio,"cmd",cmd #dbg
> 
> ```
> 134             try: 
> ```
> 
> --> 135 return cmd(*args, **kw) 136 except TryNext, exc: 137 if exc.args or exc.kwargs:
> 
> C:\Python27\lib\site-packages\IPython\core\hooks.pyc in clipboard_get(self) 225 for func in chain: 226 dispatcher.add(func) --> 227 text = dispatcher() 228 return text
> 
> C:\Python27\lib\site-packages\IPython\core\hooks.pyc in **call** (self, *args, ** kw) 133 #print "prio",prio,"cmd",cmd #dbg
> 
> ```
> 134             try: 
> ```
> 
> --> 135 return cmd(*args, **kw) 136 except TryNext, exc: 137 if exc.args or exc.kwargs:

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:29:23.627

这是最近[在开发版本中修复](https://github.com/ipython/ipython/pull/1703)的错误。

作为一种解决方法，您可以安装 pywin32，这应该会给它一种访问剪贴板的不同方式。

# java - Java JSSE SSLEngine 无法恢复 SSL 会话

> ID：10605062
> 
> 赞同：3
> 
> 时间：2012-05-15T16:29:30.473
> 
> 标签：java, ssl, jsse, sslengine

我正在编写一个使用 SSLEngine 和 NIO 的应用程序，我同时编写客户端和服务器。客户端能够连接到服务器，连接后我希望他能够执行会话恢复/重新协商，但目前没有运气..

由于使用 SSLEngine 的代码非常大（SSLEngine 的使用非常复杂！）我将编写一个简单的伪代码来演示这种情况：

```
Server:
    global sslcontext initialized once
    await new client
    client.sslEngine = create new server ssl engine using the global sslcontext
    client.handleHandshake and wait for it to be done
    handle client.

Client:
    global sslcontext initialized once
    sslEngine = create new client ssl engine using the global sslcontext
    performHandshake and wait for it to be done
    disconnect (close gracefully the connection)
    sslEngine = create new client ssl engine using the global sslcontext
    configure engine to not allow session creation
    performHandshake and wait for it to be done 
```

** 我更愿意发布可以提供帮助的代码的任何部分（即使是完整的代码，尽管我说它很大..）

当我执行我的程序时，第一个连接成功，但第二个导致异常：

```
javax.net.ssl.SSLHandshakeException: No existing session to resume 
```

我是否错过了恢复 ssl 会话所需的一些成分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T23:26:29.930

[仅当您使用SSLContext.createEngine(host, port)](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLContext.html#createSSLEngine%28java.lang.String,%20int%29)创建 SSLEngine 时，它​​才会恢复会话。否则它无法知道它正在与谁交谈，因此无法知道`SSLSession`加入什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T16:06:52.273

SSLContext 应该是单例的。您可以使用[netty 4.0.44.Final](http://netty.io/downloads.html) SslContextBuilder。通过 sessionId 恢复会话。

```
private  SslContext sslContext;
...

if (serverSSLContext == null) {
    serverSSLContext = SslContextBuilder.forServer(new File("cert.crt"), new File("cert.key")).build();
}
channelPipeLine.addLast(serverSSLContext.newHandler(channelPipeLine.channel().alloc())); 
```

# java - 如何使用 APACHE POI 或 Else 将 MS PowerPoint 2003/2007 转换为 HTML？

> ID：10605064
> 
> 赞同：2
> 
> 时间：2012-05-15T16:29:37.797
> 
> 标签：java, spring-mvc, apache-poi

我需要将 PowerPoint 2003/2007(ppt/pptx) 转换为 HTML。但我还没有找到任何代码如何做到这一点。那么，如何使用 APACHE POI 或 Else 将 MS PowerPoint 2003/2007(ppt/pptx) 转换为 HTML？我找到了 Apache POI。但不知道什么代码可以解决问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:44:13.307

我会说“否则”，但这取决于您到底需要什么。如果您的 ppt 具有非常严格且已知的布局，并且您需要 html 可点击、有链接等，您可以尝试这样做。我们选择了不同的方法。我们使用 COM 库连接到正在运行的 powerpoint 实例，我们只是直接执行 powerpoint 命令。但是我没有看到任何“另存为 html”，所以似乎选择这种方式你必须将 ppt 保存为图片，然后用它创建 html。开发它是一件很痛苦的事，但是一旦完成，您就可以进行非常复杂的演示，而无需任何额外的工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:50:52.840

Apache POI 可用于读取 powerpoint (ppt/pptx) 和提取数据。你可能会发现[这篇](http://www.coderanch.com/how-to/java/ReadPowerPoint)文章对这样做很重要。如果你想要 .pptx 使用 org.apache.poi.xslf.XSLFSlideShow 而不是 HSLSFSlideShow，然后使用 org.apache.poi.xslf.* 中的类而不是 org.apache.poi.hssf.* 中的类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:37:08.693

我认为您不会找到完整的示例，但是如果您按照教程阅读文件以及如何从每张幻灯片中提取数据（http://poi.apache.org/slideshow/quick-guide.html），您将能够执行您想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T17:05:38.007

我假设这需要是一个程序化的解决方案。

您可以通过编写自己的 Servlet 来做到这一点，该 Servlet 查看文件内容并使用 POI Powerpoint 库必须提供的各种类来重现它们。

您可以将每张幻灯片更改为[图像](http://poi.apache.org/slideshow/xslf-cookbook.html#PPTX2PNG)，然后将其显示在 html img 标记中。

您也可以尝试使用原始 xml 转储。您可以得到它，然后使用 xslt 文件将其转换为 html 文档。我认为这只适用于使用 xslf 的较新文件（.pptx）。

注意：您需要的功能可能会受到限制，具体取决于您要转换的文件[http://poi.apache.org/slideshow/index.html](http://poi.apache.org/slideshow/index.html)。较旧的文件必须使用 hslf，而较新的基于 OOXML 的文件可以使用 xlsf。“目前没有通用接口”。

# php - 用户通知的 Ajax 轮询

> ID：10605066
> 
> 赞同：0
> 
> 时间：2012-05-15T16:29:59.840
> 
> 标签：php, mysql, ajax, node.js

我想要一种服务器端语言，当添加新的 MySQL 行时，只通知与帖子相关的用户。我有一个基于订阅的系统，所以我在想：当在帖子表中添加一个新的 MySQL 行时，服务器端语言获取该新帖子的所有者 ID，并在保存订阅者数据的表中查找它。如果在 subscribee 列中找到具有帖子所有者 ID 的行，它会向该行中具有订阅者 ID 的用户发送新通知...我需要所有帮助，服务器端和客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:55:13.643

仅按时间间隔执行各种查询以查看更改，这不是最佳方法。

我推荐了其他解决方案，例如 redis。您可以创建一个事件频道，并从 ajax 服务订阅，并从其他脚本将 eventto 发送到频道。

```
$redis->subscribe(array('channel1','channel2','channel3'), function ($redis, $chanelname , $msg) {

    echo json_encode(array($chanelname => $msg));
    exit(0);

}); 
```

和：

```
mysql_query('INSERT ....');

$redis->push('chanel1', $data); 
```

了解更多信息：[https ://github.com/nicolasff/phpredis](https://github.com/nicolasff/phpredis)

# git - 如何停止推送到 git 中的多个远程分支？（又名，我如何取消跟踪远程 git 分支？）

> ID：10605068
> 
> 赞同：6
> 
> 时间：2012-05-15T16:30:11.270
> 
> 标签：git, git-branch, remote-branch

试图使用[这里](https://stackoverflow.com/q/3046436/1028230)的东西，但这并不能解决我的问题。

我在 git 中有一个本地仓库，从远程仓库克隆，`development`. 我在本地分支以使用名为的分支中的新功能`newBranchName`并调用`git push origin newBranchName`以在远程存储库上设置新分支。

现在，当我尝试推送时，git 似乎正在将我的`newBranchName`本地分支推送到旧分支跟踪的所有内容中。我希望它停止。

这是我的意思的扩展示例。我将创建一个本地分支，添加一个文件，在本地提交，然后推送到远程服务器上的一个新分支。到现在为止还挺好。

```
Administrator@BOXEN /path/to/working/dir (oldBranch)
$ git branch testingStuff

Administrator@BOXEN /path/to/working/dir (oldBranch)
$ git checkout testingStuff
Switched to branch 'testingStuff'

Administrator@BOXEN /path/to/working/dir (testingStuff)
$ vim test.txt

Administrator@BOXEN /path/to/working/dir (testingStuff)
$ git add test.txt

Administrator@BOXEN /path/to/working/dir (testingStuff)
$ git commit -a
[testingStuff 11468d8] Testing git; can trash this branch.
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 test.txt

Administrator@BOXEN /path/to/working/dir (testingStuff)
$ git push origin testingStuff
Counting objects: 4, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 299 bytes, done.
Total 3 (delta 1), reused 0 (delta 0)
To http://url/to/remote/repo.git
 * [new branch]      testingStuff -> testingStuff 
```

现在，我将编辑该 test.txt 文件，提交更改并推送。这让我感到困惑。

```
Administrator@BOXEN /path/to/working/dir (testingStuff)
$ vim test.txt

Administrator@BOXEN /path/to/working/dir (testingStuff)
$ git commit -a
[testingStuff 2be7063] more testing git
 1 files changed, 1 insertions(+), 0 deletions(-)

Administrator@BOXEN /path/to/working/dir (testingStuff)
$ git push
Counting objects: 5, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 276 bytes, done.
Total 3 (delta 1), reused 0 (delta 0)
To http://url/to/remote/repo.git
   11468d8..2be7063  testingStuff -> testingStuff
 ! [rejected]        oldBranch -> remoteTrackedByOldBranch (non-fast-forward)
error: failed to push some refs to 'http://url/to/remote/repo.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

我想继续`testingStuff`远程推送，但想`remoteTrackedByOldBranch`在我输入时停止推送`git push`。我不想删除任何分支——似乎许多类似问题的答案都建议删除而不是取消跟踪。我也不想知道如何仅通过在 git push 命令中明确命名来推送到特定分支。那样的肌肉记忆错误太多了。我只想`git push`推到`origin/testingStuff`。

我已经不聪明（一个证明自己的词）屠杀了我的 .git/config 试图实现这一点，它仍在推动`remoteTrackedByOldBranch`.

**编辑：**执行上述操作后，我的 .git/config 文件如下所示：

```
[core]
        repositoryformatversion = 0
        filemode = false
        bare = false
        logallrefupdates = true
        symlinks = false
        ignorecase = true
        hideDotFiles = dotGitOnly
[remote "origin"]
        fetch = +refs/heads/*:refs/remotes/origin/*
        url = http://url/to/remote/repo.git
[branch "master"]
        remote = origin
        merge = refs/heads/master
[branch "oldBranch"]
        remote = origin
        merge = refs/heads/oldBranch 
```

没有关于`testingStuff`那里的分支。

**编辑：** `git branch -avv`输出：

```
Administrator@BOXEN /path/to/working/dir (testingStuff)
$ git branch -avv
  master                                 721aa61 initial setup
  projectFork1                           e132f5f Fixed Construction grid labels getting sliced.
  projectFork2                           1d20317 initial load
  oldBranch                              1d20317 initial load
* testingStuff                           192f622 Still testing
  remotes/origin/HEAD                    -> origin/master
  remotes/origin/empty                   ec1c694 initial setup
  remotes/origin/joeUserFork1            771f43e Initial Load
  remotes/origin/master                  721aa61 initial setup
  remotes/origin/projectFork1            e132f5f Fixed Construction grid labels getting sliced.
  remotes/origin/oldBranch               1d20317 initial load
  remotes/origin/joeUserFork2            dc605e8 What was sent initially.
  remotes/origin/testingStuff            192f622 Still testing
  remotes/origin/upload_master           0d8c440 Initial Load 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T16:50:30.240

**只推你所在的分支**

默认情况下，每当您发出不带参数的 git push 时，git 都会推送您的所有跟踪分支。让它*只*推你所在的分支

```
git config push.default upstream # git 1.7.10
git config push.default tracking # older vesions use "tracking" instead of "upstream" 
```

如果您希望 git 始终像这样工作 - 您可以使用 --global 开关或简单地编辑您的[~/.gitconfig](https://github.com/AD7six/dotfiles/blob/master/.gitconfig#L30)文件以适应。

**停止跟踪远程分支**

git 的配置只是一个文件。调查和/或修复 git 配置的最简单方法通常是打开 .git/config 文件并进行编辑

例如，如果您的 .git/config 文件中有这样的部分：

```
[branch "develop"]
    remote = origin
    merge = refs/heads/develop
    rebase = true 
```

你做到了：

```
[branch "develop"]
    rebase = true 
```

您的分支不再跟踪任何内容。您也可以只删除整个部分，git 会执行相同的操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T16:43:23.137

与远程分支的跟踪关系在与特定分支关联的`branch.<BRANCHNAME>.remote`配置`branch.<BRANCHNAME>.merge`项中维护。您可以像这样查看当前配置：

```
git config --get-regexp 'branch.remoteTRackedByOldBranch.*' 
```

您可以像这样删除配置：

```
git config --remove-section branch.remoteTrackedByOldBranch 
```

[请注意，这将删除与此分支关联的*所有*配置，但除了`remote`and`merge`设置之外不太可能有任何其他配置。您显然可以通过手动编辑`.git/config`文件来完成同样的事情。]

在此更改之后，`git push`不应再尝试将该分支推送到远程。

# sql-server - 特定时间间隔内两列之间的差异

> ID：10605069
> 
> 赞同：0
> 
> 时间：2012-05-15T16:30:17.883
> 
> 标签：sql-server, sql-server-2008, tsql, c#-4.0

我在 SQL Server 中有一个包含 3 列的数据表。第一个是日期时间，第二个和第三个都是浮动的。我试图计算特定时间间隔（即每 15 分钟）之间第 2 列和第 3 列之间差异的平均值。

我设法找到以下示例

```
SELECT * FROM dbo.data
WHERE CAST(DateTime AS TIME) BETWEEN '14:00' and '14:30' 
```

但我不确定现在如何根据上述查询的结果计算第二列和第三列之间的差异。我更喜欢在 t-sql 中执行此操作，除非有人认为在 c# 中执行此操作更合适。

谢谢

编辑

```
2010-01-04 14:30:00.0000000 1.44377 1.44386
2010-01-04 14:30:00.0000000 1.4438  1.44389
2010-01-04 14:30:00.0000000 1.44377 1.44386
2010-01-05 14:00:01.0000000 1.44258 1.44267 
```

结果ID如下

```
0.00009  ie 1.44386 - 1.44377
0.00009     1.44389 - 1.4438
0.00009     1.44386 - 1.44377
0.00009     1.44267 - 1.44258 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:40:31.920

如果您只是转换日期列，因为`TIME`您最终会得到多个日期，我认为这不是您的意图（请参阅下面第一个查询的结果以说明我的意思）

```
DECLARE @Date DATETIME
SELECT @Date = '05/15/2012 14:15'
SELECT CAST(@Date AS TIME)
SELECT @Date = '04/15/2012 14:15'
SELECT CAST(@Date AS TIME) 
```

我认为您想要的查询如下：

```
SELECT
    DATEADD(MINUTE, 15 * (DATEDIFF(MINUTE, 0, [Date]) / 15), 0), -- Assuming [Date] is the DATETIME column, this will give you 15 minute intervals
    AVG([Col2] - [Col3])
FROM
    dbo.data
GROUP BY
    DATEADD(MINUTE, 15 * (DATEDIFF(MINUTE, 0, [Date]) / 15), 0) 
```

如果你想搜索一个特定的时间范围，只需在你的`WHERE`子句中强制它：

```
SELECT
    AVG([Col2] - [Col3])
FROM
    dbo.data
WHERE
    [Date] BETWEEN '05/15/2012 14:00' AND '05/15/2012 14:30' 
```

# php - 如何动态添加 在 html 上并在 html 中编写 php

> ID：10605070
> 
> 赞同：-2
> 
> 时间：2012-05-15T16:30:20.727
> 
> 标签：php, javascript, html

我想使用php获取文件夹中的图像文件信息，并在div中动态添加图像然后添加到网页中，下面是我的代码，但它不起作用，请帮助我。

**索引.html**

```
<div class="scrollContainer">   
  <?php
    var $i = 1;
    var $panel_id = "panel_";
    var $imgUrl = "./Img/";
    var $file=NULL;

    var $dir = opendir("Img");
    while( ($file = readdir($dir)) !== false ){
      $panel_id = $panel_id.$i;
      $imgUrl = $imgUrl.$file;
      echo "$('.scrollContainer').html("
          ."$('<div/>')"
          .".addClass('panel')"
          .".id(".$panel_id.")"
          .".append("
          ."$('<div/>')"
          .".addClass('inside')"
          .".append("
          ."$('<img/>')"
          .".attr('src',".$imgUrl.")"
          .")"
          .".append("
          ."$('<p/>')"
          .".text(".$file.")"
          .")"
          .")"
          .");";

      $panel_id = "panel_";
      $imgUrl = "./Img/";
      $i = $i + 1;
    } // while

    closedir( $dir );
  ?> 
<div> 
```

我是新手，请帮助我，我很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:43:05.647

您正在将 PHP 与 jquery 创建对象方法结合使用？？？

来自 PHP 的你可以直接编写 html 代码（我推荐一个模板 sistaxis）：

```
 <?php
    var $i = 1;
    var $panel_id = "panel_";
    var $imgUrl = "./Img/";
    var $file=NULL;

    var $dir = opendir("Img");

    ?>

    <div class="scrollContainer">

    <?php while( ($file = readdir($dir)) !== false ) : ?>

         <div src="panel" id="<?= $panel_id.$i ?>">
              <div class="inside">
                  <img src="img/<?= $imgUrl.$file ?>" />
                  <p><?= htmlentities($file) ?></p>
              </div>
         </div>  
      <?php $i++; ?>
    <?php endwhile; ?>

  <?php
  closedir( $dir );
  ?> 
  </div> 
```

# excel - 有什么 {worksheet}.Cells.Clear 不会删除吗？

> ID：10605074
> 
> 赞同：0
> 
> 时间：2012-05-15T16:30:39.433
> 
> 标签：excel, vba

我正在编辑一个旧的 excel 宏，我想知道是否可以替换

```
 ws.Range("A:M").ClearContents
       ws.Range("F:F").FormatConditions.Delete

       ws.Range("F:F").Interior.Pattern = xlNone
       ws.Range("F:F").Interior.TintAndShade = 0
       ws.Range("F:F").Interior.PatternTintAndShade = 0 
```

和

```
 ws.Cells.Clear 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:36:18.053

您可以使用此方法执行此操作，但它会清除整个工作表，而不仅仅是指定的列。

# oracle - Oracle XE 中未启用位图索引

> ID：10605075
> 
> 赞同：5
> 
> 时间：2012-05-15T16:30:41.307
> 
> 标签：oracle, oracle10g, indexing, bitmap-index

我正在使用 Oracle 10g XE（速成版）。如果我尝试创建位图索引，则会出现错误

**ORA-00439 功能未启用：位映射索引**

如何解决此问题并创建位图索引？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T22:11:34.783

在线文档包括许可指南。这说：

```
Feature                                |  Availability
---------------------------------------+--------------
Bitmapped index, bitmapped join index  |  No 
```

[了解更多](http://docs.oracle.com/cd/B25329_01/doc/license.102/b25456/toc.htm#BABJBGGA)。

关键是，Express Edition 是免费的，因此不具备 Oracle 付费数据库的所有功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-25T13:55:02.710

可以使用以下查询查看位图功能的状态：

```
select * from V$OPTION WHERE PARAMETER = 'Bit-mapped indexes';

PARAMETER                                   VALUE                    CON_ID
------------------------------------------- ------------------------ ----------
Bit-mapped indexes                          TRUE                      0 
```

我刚刚检查了文档，因为我遇到了同样的错误。根据版本，此功能是否启用：

*   速成版：假
*   标准版：假
*   企业版：真

# javascript - 为什么没有设置 document.cookie？

> ID：10605078
> 
> 赞同：1
> 
> 时间：2012-05-15T16:30:57.873
> 
> 标签：javascript, html, cookies, session-cookies

我有这个设置**document.cookie**的 JavaScript 代码，但是在运行它时我可以看到**document.cookie**实际上并没有设置。请参阅下面的屏幕截图。

```
 (function() { 
      var offset = (new Date()).getTimezoneOffset()
      console.log("WAR");
      var date = new Date();console.log(offset);
      date.setTime(date.getTime()+3600000);
      var variable = "utc_offset="+offset+"; expires="+date.toGMTString();+"; path=/";
      console.log(variable); 
      document.cookie=variable;
})() 
```

![在此处输入图像描述](../Images/1aaa7ea7c203df40b62d9c38d6c6c1cf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:37:22.407

那是因为您不在实际网页上，而是在新的 Chrome 选项卡上。

# c - 从文件中读取并存储到结构数组中

> ID：10605081
> 
> 赞同：0
> 
> 时间：2012-05-15T16:31:16.277
> 
> 标签：c, struct

我有一个这样格式化的简单文件

```
NAME|VALUE
NAME|VALUE
NAME|VALUE 
```

我正在尝试将它们读入，并将它们存储在结构数组中，结构是这样的

```
struct data
{
    char* name;
    char* value;
}; 
```

现在，我知道数组的大小为 3，所以我这样做了：

```
struct data pairs[3]; 
```

这是我的代码，因为我试图从文件中读取它：

```
char *tempVal;
int i =0;
    if(file != NULL)
        {
            char curLine [128];
            while(fgets(curLine, sizeof curLine, stockFile) != NULL)
            {   

                tempVal = strtok(curLine,"|");
                printf("i:%i\n",i);
                pairs[i].name= tempVal;
                printf("name at pos %i is %s\n",i, pairs[i].name);
                tempVal = strtok(NULL,"|");
                pairs[i].value= tempVal;
                printf("value at pos %i is %s\n",i, pairs[i].value);
                ++i;
            }
            fclose(file);
        } 
```

并且每个 printf 语句都会打印正确的东西，然后我尝试用这个打印数组

```
int j
for(j = 0; j < 3; j++)
    {   

        printf("ENTRY# %i\NAME:%s\VALUE:%s\n\n",j,pairs[j].name, pairs[j].value);
    } 
```

抱歉，缩进有点奇怪，尝试弄乱代码块但不能让它变得非常完美。但是，我想知道为什么它在while循环中显示正确的东西，但是在它完成后，for循环显示所有三个具有相同名称的数组条目（第三个条目的值是正确的，但是对于第一个和第二个条目，值字段包含第三个条目正确值的一半）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:34:09.773

from 返回的值`strtok()`将指向 中的一个元素`curLine`，因此 s 数组中的所有条目`struct`都将指向一个元素`curLine`，每次调用都会覆盖该元素`fgets()`（并且仅对当前迭代有效）。

您应该复制从`strtok()`期间返回的值`while`，可能使用`strdup()`：

```
while(fgets(curLine, sizeof curLine, stockFile) != NULL)
{   
    tempVal = strtok(curLine,"|");
    printf("i:%i\n",i);
    pairs[i].name = strdup(tempVal);
    printf("name at pos %i is %s\n",i, pairs[i].name);
    tempVal = strtok(NULL,"|");
    pairs[i].value = strdup(tempVal);
    printf("value at pos %i is %s\n",i, pairs[i].value);
    ++i;
} 
```

`free()`以后不再需要时：

```
for (j = 0; j < 3; j++)
{
    free(pairs[j].name);
    free(pairs[j].value);
} 
```

# python - python asyncore 跟踪客户端

> ID：10605083
> 
> 赞同：2
> 
> 时间：2012-05-15T16:31:33.797
> 
> 标签：python, sockets, asyncore

我正在编写一个简单的套接字服务器，我想跟踪客户端状态（身份验证和其他东西）。每次调用 handle_read() 时，我对那个特定的客户端一无所知。如果我知道客户的 ID 或其他信息，这会有所帮助。这是我到目前为止所拥有的：

```
import asyncore
import socket

class EchoHandler(asyncore.dispatcher_with_send):

    def handle_read(self):
        data = self.recv(8192)
        self.send(data)

class EchoServer(asyncore.dispatcher):

    def __init__(self, host, port):
        asyncore.dispatcher.__init__(self)
        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
        self.set_reuse_addr()
        self.bind((host, port))
        self.listen(5)

    def handle_accept(self):
        pair = self.accept()
        if pair is None:
            pass
        else:
            sock, addr = pair
            print 'Incoming connection from %s' % repr(addr)
            handler = EchoHandler(sock)

server = EchoServer('localhost', 8080)
asyncore.loop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:45:55.530

当您收到来自`repr(addr)`. 返回的元组是一个 IP 和该客户端的唯一编号，当您想要将数据发送回该客户端时可以使用该编号。如果你想保留一个客户端列表，你应该考虑一个字典，当接收到一个传入的连接时，它会存储该客户端的信息。

如果您希望将该信息传递给 handle_read 函数，您的代码将如下所示：

```
class EchoHandler(asyncore.dispatcher_with_send):
    def setAddr(self, addr):
        self.addr = addr

    def handle_read(self):
        data = self.recv(8192)
        print '%s from %s' % (data, self.addr)
        self.send(data)

class EchoServer(asyncore.dispatcher):

    def __init__(self, host, port):
        asyncore.dispatcher.__init__(self)
        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
        self.set_reuse_addr()
        self.bind((host, port))
        self.listen(5)

    def handle_accept(self):
        pair = self.accept()
        if pair is None:
            pass
        else:
            sock, addr = pair
            print 'Incoming connection from %s' % repr(addr)
            handler = EchoHandler(sock)
            handler.setAddr(addr) #Set the address of the sender in the EchoHandler 
```

只需将客户端的地址发送给 EchoHandler，现在您就知道它来自哪里了。希望这会有所帮助/有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:45:31.267

您可以直接从套接字获取的唯一“id”是对套接字的引用和发送者的地址。其他一切都基于您收到的数据——例如，您的客户端可以将其 id 作为前 16 个字节发送，之后的任何内容都是数据。这意味着有效地实施满足您要求的协议。

身份验证等的更简单和更好的解决方案是使用一些库，例如`ssl`python 标准库。该`ssl`库以易于与 python 套接字一起使用的形式提供加密和身份验证机制。如果您需要安全身份验证，我强烈建议您使用现有的解决方案。

# c# - 在非静态环境中复制目录？

> ID：10605084
> 
> 赞同：0
> 
> 时间：2012-05-15T16:31:38.277
> 
> 标签：c#, .net-3.5, directory, copying

有人可以给我一个在非静态环境中复制目录的提示/示例吗？我试图查找它，但没有这样的运气。

```
 private void copybutton_Click(object sender, EventArgs e)
    {
        string selectedPath = comboBox1.SelectedItem.ToString();
        copydirectories(@"C:\Mavro\MavBridge\" + selectedPath, @"C:\Mavro\MavBridge\" + selectedPath + " - Copy");
    }

    public void copydirectories()
    {
        try
        {
            string selectedPath = comboBox1.SelectedItem.ToString();
            DirectoryInfo source = new DirectoryInfo(@"C:\Mavro\MavBridge\" + selectedPath);
            DirectoryInfo target = new DirectoryInfo(@"C:\Mavro\MavBridge\" + selectedPath);

            if (!source.Exists)
                return;
            if (!target.Exists)
                target.Create();

            DirectoryInfo[] sourceDirectories = source.GetDirectories();    
            for(int j = 0; j < sourceDirectories.Length; ++j)
            {
                copydirectories(sourceDirectories[j].FullName,target.FullName +"\\" + sourceDirectories[j].Name);
            }
            datemodified.Refresh();

   } 
```

这需要 2 个参数错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:47:51.587

使用[http://xneuron.wordpress.com/2007/04/12/copy-directory-and-its-content-to-another-directory-in-c/上的代码](http://xneuron.wordpress.com/2007/04/12/copy-directory-and-its-content-to-another-directory-in-c/)

```
public static void CopyAll(DirectoryInfo source, DirectoryInfo target) {
    // Check if the target directory exists, if not, create it.
    if (!Directory.Exists(target.FullName)) {
        Directory.CreateDirectory(target.FullName);
    }

    // Copy each file into its new directory.
    foreach (FileInfo fi in source.GetFiles()) {
        Console.WriteLine(@”Copying {0}\{1}”, target.FullName, fi.Name);
        fi.CopyTo(Path.Combine(target.ToString(), fi.Name), true);
    }

    // Copy each subdirectory using recursion.
    foreach (DirectoryInfo diSourceSubDir in source.GetDirectories()) {
        DirectoryInfo nextTargetSubDir = 
            target.CreateSubdirectory(diSourceSubDir.Name);
        CopyAll(diSourceSubDir, nextTargetSubDir);
    }
} 
```

让它变得简单，只需调用它

```
CopyAll(new DirectoryInfo(@"C:\Mavro\MavBridge\" + selectedPath),
        new DirectoryInfo(@"C:\Mavro\MavBridge\" + selectedPath + " - Copy")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:53:26.967

您是否要创建具有 2 个参数的函数？

```
public void copydirectories(string sourcePath, string destinationPath)
    {
        try
        {
            DirectoryInfo source = new DirectoryInfo(sourcePath);
            DirectoryInfo target = new DirectoryInfo(destinationPath); 
```

# xslt - XSLT 将日期格式转换为 ISO

> ID：10605088
> 
> 赞同：1
> 
> 时间：2012-05-15T16:31:44.967
> 
> 标签：xslt

来自*（Twitter 格式示例）*

```
Tue, 15 May 2012 15:40:34 +0000 
```

至*（ISO 格式示例）*

```
2005-12-01T13:45:00 
```

使用 XSLT

* * *

这是一个 XML 片段

```
<item>
     <title>It's called "Kangaroo Care" - what parents can do to create a special bond and improve the health of their newborns: http://t.co/8MV8FpM4</title>
        <link>http://twitter.com/ProvHealth/statuses/202423233104973826</link>
        <description>It's called "Kangaroo Care" - what parents can do to create a special bond and improve the health of their newborns: &lt;a href="http://t.co/8MV8FpM4"&gt;http://t.co/8MV8FpM4&lt;/a&gt;</description>
     <pubDate>Tue, 15 May 2012 15:40:34 +0000</pubDate>
        <guid>http://twitter.com/ProvHealth/statuses/202423233104973826</guid>
        <author>ProvHealth@twitter.com (Providence Oregon)</author>
     <media:content type="image/jpg" height="48" width="48" url="http://a0.twimg.com/profile_images/748948431/cross_normal.png"/>
     <google:image_link>http://a0.twimg.com/profile_images/748948431/cross_normal.png</google:image_link>
        <twitter:metadata>
         <twitter:result_type>recent</twitter:result_type>
     </twitter:metadata>
 </item> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:15:18.880

这里有一些关于如何解决这个问题的想法。

1.  您可以像本例中那样 进行**子字符串整理：**[通过 XSLT 格式化 XML 中的日期](https://stackoverflow.com/questions/500915/format-a-date-in-xml-via-xslt)。您可能必须在一周中的几天和几个月中为自己创建一些“可枚举”。

2.  XPath 2.0 为您提供了[**XSD 类型的构造函数**](http://www.w3.org/TR/xpath-functions/#constructor-functions-for-xsd-types)，您可以从这些函数中获得一些关于子字符串处理的帮助。

3.  如果您的转换器支持**EXSLT**，您可以使用 [日期/时间扩展功能](http://www.exslt.org/date/index.html)。

4.  EXSLT 还具有[**正则表达式**支持](http://www.exslt.org/regexp/index.html)，您可以使用它来将 twitter 日期解析为块，以便进一步转换为 ISO 日期。

5.  您可以使用任何技术编写[自**定义扩展函数**](http://www.w3.org/TR/xslt#section-Extension-Functions)来驱动 XSLT 为您运行转换。

话虽如此，没有一种单一功能的“简单”方法可以完成您在 XSLT 中需要的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T20:06:45.350

这会将 d/m/yyyy hh:mm:ss AM 转换为 ISO 日期。还没有时间，但这将是这个的延续。日期和月份可能是一两个字符，这一事实使情况复杂化。

```
 <!--Convert from 'd/m/yyyy hh:mm:ss AM' to YYYY-MM-DD-->
  <xsl:template name="ISODate">
    <xsl:param name="Date" />
    <xsl:param name="Year" />
    <xsl:param name="Month" />
    <xsl:param name="Day" />

    <xsl:choose>
      <xsl:when test="not($Month)">
        <xsl:call-template name="ISODate">
          <xsl:with-param name="Month" select="substring(concat('0',substring-before($Date,'/')), string-length(concat('0',substring-before($Date,'/'))) - 1, 2)" />
          <xsl:with-param name="Date" select="substring-after($Date,'/')" />
        </xsl:call-template>
      </xsl:when>
      <xsl:when test="not($Day)">
        <xsl:call-template name="ISODate">
          <xsl:with-param name="Month" select="$Month" />
          <xsl:with-param name="Day" select="substring(concat('0',substring-before($Date,'/')), string-length(concat('0',substring-before($Date,'/'))) - 1, 2)" />
          <xsl:with-param name="Date" select="substring-after($Date,'/')" />
        </xsl:call-template>
      </xsl:when>
      <xsl:when test="not($Year)">
        <xsl:call-template name="ISODate">
          <xsl:with-param name="Month" select="$Month" />
          <xsl:with-param name="Day" select="$Day" />
          <xsl:with-param name="Year" select="substring-before($Date,' ')" />
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="concat($Year,'-',$Month,'-',$Day)"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template> 
```

# c# - C#如何将文本框信息保存在excel特定行中？

> ID：10605095
> 
> 赞同：0
> 
> 时间：2012-05-15T16:32:00.020
> 
> 标签：c#

我在程序调试文件夹中放置了一个 excel 文档，例如 C# project/bin/debug。

我有带 2 个文本框的 WinForm 和保存按钮。例如，用户必须在 textbox1 中输入他的姓名，在 texbox2 中输入他的姓氏，然后通过单击保存来保存。

我的问题是，当用户单击保存时，如何使 textbox1 输入保存在 Excel 的 A2 行中，以及如何使 textbox2 输入保存在 B2 行中？

excel 文档不应该是可见的，它应该在用户点击保存后自动保存文档。

谁能帮我？代码示例或指南链接将非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:00:51.433

您可以使用 OleDb 对象处理 Excel 文件。

```
using System;
using System.Data;
using System.Data.OleDb;

public static class Program
{
    ///This is a very basic example of how to use OleDb objects to edit spreadsheets.
    /// For more advanced operations, look into using OleDb with DataSets/DataTables.
    public static void Main(string[] args)
    {
        string Filename = "C:\\test.xls";
        //If you are using xls format, use this connection string.
        string ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Filename + ";Extended Properties=\"Excel 8.0;HDR=NO;\"";
        //If you are using xlsx format, use this connection string.
        //string ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + Filename + ";Extended Properties=\"Excel 12.0 Xml;HDR=NO\"";

        string Name_Value = "First Name";
        string Surname_Value = "Surname";

        string SQL1 = "UPDATE [Sheet1$A2:A2] SET F1='" + Name_Value + "'";
        string SQL2 = "UPDATE [Sheet1$B2:B2] SET F1='" + Surname_Value + "'";

        using(OleDbConnection Connection = new OleDbConnection(ConnectionString))
        {
            Connection.Open();
            using(OleDbCommand cmd1 = new OleDbCommand(SQL1,Connection))
            {
                cmd1.ExecuteNonQuery();
            }
            using(OleDbCommand cmd2 = new OleDbCommand(SQL2,Connection))
            {
                cmd2.ExecuteNonQuery();
            }
        }
    }
} 
```

# c++ - C++ / Qt 编码风格 - #define 应该去哪里

> ID：10605097
> 
> 赞同：4
> 
> 时间：2012-05-15T16:32:06.247
> 
> 标签：c++, qt, constants, qgraphicsitem

我正在尝试在`Qt`. 我需要弄清楚`QGraphicsItem`我的球与哪种类型的球相撞。例如，如果我的球撞到墙上，球就会弹开，如果它撞到砖块，它必须弹开并破坏砖块。为了找出`QGraphicsItem`它是什么类型，我认为最好的方法可能是覆盖`QGraphicsItem::type()`（如果这不是正确的方法，请告诉我！）。

在下面的代码中，`brick.h`我将“Brick”的类型设置为 3。现在，值 3 看起来很难跟踪。我宁愿用“#define”声明一些东西

```
#include <QGraphicsItem>

//should this #define be here?
//#define BRICK_SPRITE 3

class Brick : public QGraphicsItem
{
public:
    Brick(const QPixmap& p, QGraphicsScene *scene = 0);
    virtual QRectF boundingRect() const;
    virtual void paint( QPainter *painter,
                        const QStyleOptionGraphicsItem *option,
                        QWidget *widget );

    QPainterPath shape() const;

    enum { Type = 3 }; //enum {Type = BRICK_SPRITE}

    int type() const { return Type; }

private:
    QPixmap pixmap;
}; 
```

在哪里放置语句 '#define BRICK_SPRITE 3' 的好位置？我在项目中有几个其他文件。我应该将所有定义放在单独的头文件中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:36:06.183

为什么不直接使用`Type`而不是 3？ `enum`c++ 中的 s 可以隐式转换为`int`

如果您*真的*想要一个新名称，我建议您使用`const int`变量而不是`#define`- 它是类型和命名空间安全的，而预处理器宏则不是。

就像是：

```
class Brick : public QGraphicsItem
{
  static const int BRICK_SPRITE = 3;
  // rest of the class definition
}; 
```

根据我能找到的文档，您使用枚举和覆盖`type()`的方法确实是首选方法

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T17:01:14.860

如果你想遵循 Qt 的约定，你可以从不将常量命名为全部大写开始......他们不这样做。此外，正如@Atilla 指出的那样，对常量使用预处理器宏不是惯用的 C++。有很多很好的理由，比如能够在调试器中看到值：

[C++ - enum vs. const vs. #define](https://stackoverflow.com/questions/4767667/c-enum-vs-const-vs-define)

通常情况下，您可以找到一个“拥有”常量有意义的类。当 Qt 真的没有地方放它时，它只是把东西放在命名空间中`Qt::`

[http://doc.qt.io/archives/qt-4.7/qt.html](http://doc.qt.io/archives/qt-4.7/qt.html)

所以如果你发现拥有这个值没有意义`Brick`，你可以在你的程序中有一个命名空间来放置这些东西。

我实际上不知道这`QGraphicsItem::type()`是一个标准的东西......没有遇到过它。您已经[在文档](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#type)中注意到它说自定义用户类型应该从`UserType + 1`...开始，所以我肯定会遵循该规则。它说只有在您打算使用 时才需要这样做`qgraphicsitem_cast()`，所以也许我看过的示例并不需要它。

就声明常量的约定而言，Qt 带来的唯一不寻常的事情（我能想到的）是称为 Q_DECLARE_FLAGS 的东西，它在您将标志或标志放在一起的情况下带来了类型安全性：

[http://doc.qt.io/archives/qt-4.7/qflags.html](http://doc.qt.io/archives/qt-4.7/qflags.html)

因此，如果您正在执行以下操作：

```
class Brick : public QGraphicsItem {
public:
    static const int Type = UserType + 1;
    enum BrickFlag {
        DamagesBall = 0x1,
        ContainsCoins = 0x2,
        MultipleHits = 0x4
    };
    Q_DECLARE_FLAGS(BrickFlags, BrickFlag)
}

Q_DECLARE_OPERATORS_FOR_FLAGS(Brick::BrickFlags) 
```

现在您有一个称为 的特殊安全类型`Brick::BrickFlags`，它不能（例如）与`Brick::Type`.

# c++ - 如何使用 c/c++ 在现代 linux 核心转储中搜索？

> ID：10605101
> 
> 赞同：2
> 
> 时间：2012-05-15T16:32:14.780
> 
> 标签：c++, c, coredump

我有程序，其结构定义如下：

```
struct foo {
    int magic;
    int bar;
}; 
```

当我创建这个结构的对象时，我总是做以下事情：

```
object.magic = 654321; 
```

这个程序最终会随着核心转储的生成而死掉。

是否有可能使 C++ 程序自动计算所有值并找到所有条形值，例如求和？

PS。到目前为止，我已经调查过，我不能简单地将核心作为二进制打开并搜索 654321 转换为十六进制（在十六进制编辑器中找不到）。Wikipedia 说现代 unix 系统使用 ELF，但不幸的是我不了解所有标头系统，因为我是一个非常缺乏经验的程序员。

有没有办法在不学习整个标题结构的情况下获得这个栏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:34:42.053

> 到目前为止，我已经调查过，我不能简单地将核心作为二进制打开并搜索 654321 转换为十六进制（在十六进制编辑器中找不到）。

我希望这会产生一些匹配。确保您在进行搜索时得到了正确的[字节顺序](http://en.wikipedia.org/wiki/Endianness)。

注意无论您使用哪种方法来执行此操作，它都必然是一个近似值。您不能指望这样的搜索总是能找到所有实例`foo`而不是其他任何实例（尤其是在导致进程崩溃的事件之后）。

# php - 在正则表达式 (PHP) 上获取返回的匹配项

> ID：10605103
> 
> 赞同：1
> 
> 时间：2012-05-15T16:32:41.133
> 
> 标签：php, regex

我最近一直在学习正则表达式，想知道这是否可能：

我正在提取推特供稿并且可以访问推文，但是当我想在我的网站上显示这些推文时 - 链接、@回复和哈希标签都未链接。所以我开始了将它们联系起来的过程。我正在回复@回复并有一个问题：

这是我的正则表达式：

```
$content = '@jason is awesome.';
$reply = '/@(\w+)/';

if(preg_match($reply, $content, $matches)){
  var_dump($matches[0]);
} 
```

所以这将返回'@jason'，但我想知道是否有办法用@搜索它，但只返回它后面的内容 - 只是'jason'。如何使用正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:39:00.190

正如 Double 提到的， $matches[1] 会给你想要的。$matches[0] 很特殊，它包含整个匹配字符串。列表中的后续项目是捕获的组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:41:24.010

从[文档](http://php.net/manual/en/function.preg-match.php)来看，`$matches[1]`它将具有第一个反向引用，在您的情况下应该是 jason。你可以在这里测试：http: [//www.solmetra.com/scripts/regex/index.php](http://www.solmetra.com/scripts/regex/index.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:42:17.170

[阅读#$^&***手册**](http://php.net/manual/en/function.preg-match.php)，我的意思是……它就在*那儿*……

> 如果提供了匹配项，则将其填充为搜索结果。$matches[0] 将包含与完整模式匹配的文本， **$matches[1] 将包含与第一个捕获的带括号的子模式匹配的文本，依此类推。**

![图片值一千字](../Images/931ce268ac4af9de1b09f3a4421f41ae.png)

# expression-blend - 如何在 SketchFlow 中启用“发布到 SharePoint...”选项？

> ID：10605105
> 
> 赞同：1
> 
> 时间：2012-05-15T16:32:52.110
> 
> 标签：expression-blend, expression-sketchflow

我的 MSDN 订阅提供 Expression Blend 4，但不提供 Ultimate。我收到了用于评估的 SketchFlow 60 天试用版。但是，“发布到 SharePoint...”选项被禁用。谁能告诉我如何启用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:07:59.433

以供日后参考。

[http://social.expression.microsoft.com/Forums/en-US/blend/thread/20deaec5-4762-411b-b111-84d5c8b5fae2](http://social.expression.microsoft.com/Forums/en-US/blend/thread/20deaec5-4762-411b-b111-84d5c8b5fae2)

# forms - Symfony 1.4：嵌入 i18n 表单后更新表单不起作用

> ID：10605106
> 
> 赞同：0
> 
> 时间：2012-05-15T16:33:01.533
> 
> 标签：forms, symfony1, internationalization, symfony-1.4

我对管理中教义对象形式的内化有疑问。表单工作得非常好，但后来我添加了对多种语言的支持。

架构如下所示：

```
content:
  actAs: 
    Timestampable: ~ 
    I18n:
      fields: [title, content]
  columns:
    parent: { type: integer }
    title: { type: string(255), notnull: true, unique: true }
    slug: { type: string(255), notnull: true, unique: true }
    content: { type: string }
    link: { type: string(255) }
    ord: { type: integer }
    type: { type: integer, default: 0 }
  relations:
    content: { onDelete: CASCADE, local: parent, foreign: id }
  indexes:
    parent: { fields: [parent] }    
    slug: { fields: [slug] } 
    type: { fields: [type] } 
```

管理员生成器：

```
generator:
  class: sfDoctrineGenerator
  param:
    model_class:           content
    theme:                 admin
    non_verbose_templates: true
    with_show:             false
    singular:              ~
    plural:                ~
    route_prefix:          content
    with_doctrine_route:   true
    actions_base_class:    sfActions

    config:
      actions: ~
      fields:  
        title: { is_real: false }
        typeFull: { label: Type }
      list:    
        display: [=title, typeFull]        
        sort: ord 
        max_per_page: 100 
      filter:  
        class: false
      form:    
        class: adminContentForm
      edit:    ~
      new:     ~ 
```

最后是一个表格：

```
class adminContentForm extends BasecontentForm
{
  public function configure()
  {        
    unset($this['slug'], $this['ord'], $this['created_at'], $this['updated_at']);

    $this->embedI18n(array('de', 'fr'));
    $this->widgetSchema->setLabel('de', 'Deutsch');
    $this->widgetSchema->setLabel('fr', 'French');
  }
} 
```

我没有改变动作类。

当我想创建一个新条目时，一切正常。但是当我想更新现有条目时会出现一个奇怪的问题：**它只保存嵌入式 i18n 表单中的字段（标题、内容）**，而主表单中的字段保持不变（父级、链接、类型）。

如果我从表单中删除嵌入，它会正确保存父级、链接和类型。如果我添加嵌入，它只保存标题和内容。

你有没有遇到过类似的问题？我正在使用 Symfony 1.4.17。

* * *

编辑：

如果我将它添加到 actions.class.php 中的 processForm() 方法进行调试：

```
var_dump($form->getValue('link'));
$content = $form->save();        
var_dump($content->getLink());
exit(); 
```

...我看到字段链接中的值已正确发送，但在保存表单后未保存该值。$form->getValue('link') 返回一个正确的值，但 $content->getLink() 返回一个空字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:22:40.840

两天后我终于搞定了！奇怪的行为是由列“内容”引起的，尤其是它的名称与表的名称相同。如果我不使用 i18n 行为就没有问题。但是在添加 i18n 之后，一切都开始出现意外，但没有错误消息，所以我花了很长时间才弄清楚。

**所以列名不能与表名相同。**

# actionscript-3 - 在 FlxG.collide() 回调函数中：从组中杀死一个项目会杀死该组的其余部分

> ID：10605119
> 
> 赞同：0
> 
> 时间：2012-05-15T16:33:48.167
> 
> 标签：actionscript-3, flash, debugging, flixel

我有英雄投掷的剑（考虑它们是子弹），当它击中瓷砖地图时，剑（子弹）被使用`kill()`方法杀死。但是意想不到的事情发生了。使用时`kill()`，exists = false 或 visible = false ALL OF THE GROUP IS GONE (killed or invisible)。
这些是一些片段：

```
Sword.as(base class for all swords) shoot function :
public function shoot(playerPosition:FlxPoint, direction:uint):void{
  if(!alive || !exists){
    revive();
  }
  x = playerPosition.x;
  y = playerPosition.y;
  if(direction == FlxObject.RIGHT) {                
    angularVelocity = 900;
    velocity.x = 400;
  } else {
    angularVelocity = 900;
    velocity.x = -400;
  }
} 
```

的子类`Sword(BasicSword)`只有剑图形，所以不值得一提。

```
PlayState.as   
create (only part of it):       

for(var i:int = 0; i < 15;i++) {
  sword = new BasicSword(-200, -200);
  swords.add(sword);
}
add(swords); 
```

更新：

```
override public function update():void{
  if(FlxG.keys.justPressed("X")) {
    (swords.recycle(BasicSword) as BasicSword).shoot(new FlxPoint(player.x,
      player.y),player.facing);
  }

  super.update();
  FlxG.collide(level, player);//make the player stand on the level.
  FlxG.collide(level, swords, swordsHitLevel);
}

swordsHitLevel(callback function):
public function swordsHitLevel(level:FlxTilemap, sword:FlxSprite):void {
  sword.kill();         
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:46:50.620

~~发生这种情况是因为您正在检查 tilemap 和 'swords' 组之间的碰撞，而不是剑的 insance。这样，如果任何剑与瓷砖地图发生碰撞，则为组调用swordsHitLevel，而不是单个剑~~

~~你可能想遍历剑精灵~~

```
for(var sword:BasicSword in swords.children() ){
    FlxG.collide(level, sword, swordsHitLevel);
} 
```

~~（代码未经测试，如果您需要，我可以稍后给您一个工作片段）~~

编辑：我今天自己陷入了这个问题。虽然我确定回调是按成员而不是 FlxGroup 调用的，但在某些情况下碰撞函数会返回误报，但我不知道原因或时间。可能是一个错误。我用谷歌搜索并找到了这篇文章。具有讽刺意味的是，我已经回答了这个问题。所以我解决了这个问题。这次代码已经过测试并且可以正常工作

```
 for ( var i:int = 0; i < swords.members.length; i++ ) { 
            try{
                var sword:BasicSword= (BasicSword)(swords.members[i]);
                FlxG.collide(this.map, sword, swordsHitLevel);

            }catch (err:Error){}
        } 
```

# php - apache wsgi 将 url 路由到 wordpress

> ID：10605127
> 
> 赞同：1
> 
> 时间：2012-05-15T16:34:14.310
> 
> 标签：php, apache, mod-wsgi

目前我的域 foo.com 由 wsgi 脚本处理，但我需要 foo.com/articles* 下的 url 映射到`public_html`文件夹中存储的一些 WordPress php 页面。这是我微弱的尝试-

```
WSGIScriptAlias / /home/foo/property_buyer/buyer.wsgi
WSGIDaemonProcess foo processes=7 threads=1 display-name=%{GROUP}
WSGIProcessGroup foo
WSGIApplicationGroup %{GLOBAL}

Alias /articles /home/foo/public_html/articles/
Alias /media/ /home/foo/static/

<Directory /home/foo/static>
Order deny,allow
Allow from all
</Directory> 
```

我有以下错误虽然 -

```
[Wed May 16 00:22:03 2012] [error] [client 121.6.147.148] SoftException in Application.cpp:422: Mismatch between target UID (506) and UID (503) of file "/home/property/public_html/articles/index.php"
    [Wed May 16 00:22:03 2012] [error] [client 121.6.147.148] Premature end of script headers: index.php 
```

我的方法是否正确，或者有人知道错误是什么意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T23:18:04.233

从技术上讲，它应该是：

```
Alias /articles/ /home/foo/public_html/articles/ 
```

但在此之前，您的系统似乎已设置为使用 suexec 或用于 PHP 的东西，并且文件的文件系统权限与预期不匹配。因此，请查看将目录/文件的文件系统权限更正为预期的内容。

# drupal-6 - Drupal 可编辑页面部分

> ID：10605130
> 
> 赞同：-1
> 
> 时间：2012-05-15T16:34:30.863
> 
> 标签：drupal-6

我需要在主页上创建一个区域，公司总裁可以在其中显示会经常更改的消息。我不确定是否应该为此使用块或某种内容类型。秘书将被分配更新消息的任务，所以我不确定我是否希望她弄乱一个块。创建新的内容类型需要一个需要嵌入主页的内容实例。主页使用模板文件，因此我什至可能需要添加一些 PHP 代码来控制内容的显示位置。

或者我应该创建一个自定义视图来完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:58:09.480

我最近遇到了类似的挑战。客户需要一种方法来设置将出现在主页上的警报。与您的示例类似：

1) 我不想给编辑者编辑区块的权限

2) 仅为警报创建内容类型似乎有点矫枉过正

解决方案是创建一个执行以下操作的简单模块：

1) 创建一个表单来输入警报内容并将该内容存储在 Drupal 的“变量”表中 (hook_admin())

2) 创建一个管理页面来保存表单 (hook_menu())

3) 定义分配给可以编辑警报的角色的新权限 (hook_perm())

4) 将存储在变量表中的值发送到 page.tpl (hook_preprocess_page())

完整的模块文件：

```
/**
 * Build the administration form which collects the following and store the values in the vars table:
 *
 * @toggle - whether or not an alert is active
 * @severity - Severity of the alert (low or high)
 * @title - The title of the Alert (usualy "Alert")
 * @content - Content to display on the homepage
 * @node - The associated Alert Node. The Read More link on the homepage will link to this node
 *
 */
function alerts_admin() {
  $form = array();

  $form['alerts_description'] = array (
    '#value' => '<p>Use this page to set an Alert. If the "Turn On Alert" checkbox is checked, a blue or red banner (depending on the Alert Severity) will be displayed on the homepage containing the copy defined here.',
  );

  $form['alerts_toggle'] = array (
    '#type' => 'checkbox',
    '#title' => 'Turn Alert On.',
    '#default_value' => variable_get('alerts_toggle', 0),
    '#size' => 2,
    '#maxlength' => 2,
    '#description' => t("Select this checkbox to turn on the Homepage Alert."),
    '#required' => TRUE,
  );

  $form['alerts_severity'] = array (
    '#type' => 'select',
    '#title' => 'Severity',
    '#options' => array (
      'low' => 'Low Severity - Blue',
      'high' => 'High Severity - Red',
      ),
    '#default_value' => variable_get('alerts_severity', 'low'),
    '#required' => TRUE,
  );

  $form['alerts_title'] = array (
    '#type' => 'textfield',
    '#title' => 'Title',
    '#description' => 'Enter the title of the Alert (e.g. "Alert").',
    '#default_value' => variable_get('alerts_title', 'Alert'),
    '#required' => TRUE,
  );

  $form['alerts_content'] = array (
    '#type' => 'textarea',
    '#title' => 'Content',
    '#default_value' => variable_get('alerts_content', 'Example alert content'),
    '#required' => TRUE,
  );

  //Build the options list for the associated node select list. We're just pulling a list of all the template6 content of the site.
  $result = db_query("SELECT nid, title FROM {node} WHERE type = 'template6'");
  $i=0;
  while ($row = db_fetch_array($result)) {
    $key = $row['nid'];
    $value = $row['title'];
    $options[$key] = $value;
  }

  $form['alerts_node'] = array (
    '#type' => 'select',
    '#title' => 'Associated Article',
    '#options' => $options,
    '#description' => 'The "Read More" link at the end of the alert will link to this Article.<p><strong>You must create the node first before you can select it here.</strong> ' . l('Click here', 'node/add/template6') . ' to create an article.',
    '#default_value' => variable_get('alerts_node', ''),
    '#required' => TRUE,
  );

  return system_settings_form($form);
}

/**
 * Create the page for and link to the form
 */
function alerts_menu() {

  $items = array();

  $items['admin/settings/alerts'] = array(
    'title' => 'Site Alert Settings',
    'description' => 'Toggle alerts on/off and configure the title and contents',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('alerts_admin'),
    'access arguments' => array('administer alerts settings'),
    'type' => MENU_NORMAL_ITEM,
   );

  return $items;
}

/**
 * Create a new perm to administer Site Alerts
 *
 * This permission can be given to any role
 */
function alerts_perm() {
  return array('administer alerts settings');
}

function alerts_preprocess_page(&$vars) {
  $alert = 0;
  $banner_classes = array();
  $banner_classes[] = 'banner';
  if (variable_get('alerts_toggle', '0') == '1') {
    $banner_classes[] = 'alert';
    $alert = 1;
    $alert_content = array(
      'title' => variable_get('alerts_title', 'Alert'),
      'content' =>variable_get('alerts_content', 'Example alert content'),
      'node' => variable_get('alerts_node', ''),
    );
    if (variable_get('alerts_severity', 'low') == 'high') {
      $banner_classes[] = 'high';
    }
    else $banner_classes[] = 'low';
  }
  $banner_classes = implode(' ', $banner_classes);

  $vars['banner_classes'] = $banner_classes;
  $vars['alert'] = $alert;
  $vars['alert_content'] = $alert_content;
} 
```

# java - 我真的需要定义java最小堆大小吗

> ID：10605133
> 
> 赞同：6
> 
> 时间：2012-05-15T16:34:38.927
> 
> 标签：java, jvm, heap-memory

我即将将应用程序部署到实时服务器，现在我必须为 jvm 设置堆和 permgen 大小。我看过很多文章，他们都说“将最小堆大小设置为（某个数字）”，以及“将最大堆大小设置为（某个数字）”，但是这些文章都没有真正说明为什么需要设置最小堆大小。我理解设置最大堆大小的原因，但不是关于最小值。如果您对此有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T16:42:33.460

Java中的堆是一般的内存分配区域。让我们假设我们将最小堆大小设置为 1000 字节（这是一个荒谬的低数字）。现在假设我在我的程序中实例化了一个对象，其中包含一些两千个字符长的文本。如果不先扩展我的堆大小，我将无法保存此对象。现在，大概我的最大堆参数足够大以允许这样做 - 但这就是设置最大堆大小的原因。

但是，假设我的服务器有 4G 内存，我将最小堆大小设置为该值。（一个大得离谱的数字。）如果没有其他程序占用任何内存，这将起作用。但是，如果我用我的 java 程序启动第二个进程，它将无法分配足够的内存并退出。

最小尺寸为您做两件事；首先，它使内存快速可用以允许快速启动。其次，它可以让你调整你的 jvm，让你有一些不变量，让你可以预测你可以运行多少个进程。如果您的最小堆大小太大，您可能会在一个从不需要那么多的进程上浪费内存，从而限制系统的容量。如果将其设置得太小，程序将需要很长时间才能启动，从而对进程的性能产生不利影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:38:47.853

设置最小堆大小允许 Java 预先分配一些内存，从而缩短启动时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:39:02.363

显式设置最小大小（高于默认值）有助于在操作系统级别分配碎片和启动时间性能。

Java 堆由操作系统分配的内存支持，初始块越大，发生的重新分配和碎片就越少。

将最小值设置为等于或几乎等于最大值，将完全消除这些情况。

# sharepoint - ListItem 值未在 ItemUpdated 上更新，仅在点击 Refresh 后

> ID：10605144
> 
> 赞同：2
> 
> 时间：2012-05-15T16:35:21.177
> 
> 标签：sharepoint, listitem, event-receiver

我是 Sharepoint 的新手。我有一个连接到 ItemUpdated 事件的 EventReceiver，我想在一个字段中写一个文本。当我上传文件时，事件触发正常，它通过调试代码，似乎更新但我的属性没有收到它应该接收的文本。但是，在页面上点击刷新后，我可以看到更新的值。

这是我的代码

```
 public override void ItemUpdated(SPItemEventProperties properties)
    {
        base.ItemUpdated(properties);

        string folderPath = string.Empty;
        SPListItem item = properties.ListItem;
        if (item.File.ParentFolder != null)
        {
            folderPath = item.File.ParentFolder.ServerRelativeUrl;
        }

        AssignPropertyToField("Folder Name", item, folderPath);
    }        

    private void AssignPropertyToField(string fieldName, SPListItem item, string folderPath)
    {
        item[fieldName] = folderPath;

        this.EventFiringEnabled = false;
        item.SystemUpdate();
        this.EventFiringEnabled = true;
    } 
```

提前感谢您的建议，

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:06:29.603

如果可能，请尝试[使用 ItemUpdating](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.itemupdating.aspx)而不是[ItemUpdated](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.itemupdated.aspx)。

由于 ItemUpdated 是异步的，因此您不应指望在刷新页面之前调用它。使用 ItemUpdating，请注意列表项尚未保存，因此您无需调用[SystemUpdate](http://msdn.microsoft.com/en-us/library/ms461526.aspx)。

```
public override void ItemUpdating(SPItemEventProperties properties)
{
    string folderPath = string.Empty;
    SPListItem item = properties.ListItem;
    if (item.File.ParentFolder != null)
    {
        folderPath = item.File.ParentFolder.ServerRelativeUrl;
    }
    properties.AfterProperties["FolderNameInternalName"] = folderPath;
} 
```

在您的情况下，问题将是您是否能够在 ItemUpdating 事件中检索更新的父文件夹信息。我上面的示例代码将采用以前存在的文件夹信息。如果将文件移动到其他文件夹，此代码将为您提供错误的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T18:02:44.360

您可以调用 item.Update() 而不是 item.SystemUpdate()

请注意，这种方式 ItemUpdated 事件处理程序将被调用两次，因此您需要确保仅当 item[fieldName] 与 AssignPropertyToField 中的 folderPath 不同时才进行更新，以避免无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:24:54.763

您可以做的是在 ItemUpdated 接收器的定义中的 elements.xml 中定义它应该同步运行。请参阅此[http://msdn.microsoft.com/en-us/library/ff512765.aspx](http://msdn.microsoft.com/en-us/library/ff512765.aspx)

# eclipse - Syntax check does not work for modules (*.pm) in Perl Eclipse Plugin (EPIC)

> ID：10605154
> 
> 赞同：3
> 
> 时间：2012-05-15T16:36:02.003
> 
> 标签：eclipse, perl, syntax, epic

I'm using [Eclipse Perl Integration Plugin (EPIC)](http://www.epic-ide.org/) for developing with Perl. All its functions work great with Perl files (*.pl), but there are problems with Perl modules (*.pm) (I add them to the same project, so project settings are the same): on-the-fly syntax check does not work for them, so that I can't see any errors while coding.
Is it a bug or do I need to recheck any settings?
Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:30:41.763

It works for me without any problem with each .pl and .pm, so as stated in the comment you should try setting Epic Perl Editor as default editor for pm files too, you can do this right clicking on the pm file on package explorer or navigator and then selecting `open With ---> EPIC Perl Editor`, as below :

![PerlEditor](../Images/7855585326870f57c08653348b01e2fa.png)

Once opened with EPIC perl editor the next time will be the default for the file, because in eclipse the default editor for a file is the editor that last opened the file ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T17:57:16.560

It turned out that Perl couldn't locate current module name in `@INC`, which I included to use another modules in my current module - that's why `perl -c` was interrupted by error inside of the `BEGIN` block.

```
BEGIN {
  push @INC, catdir( dirname( $INC{'ThisModule.pm'} ), qw( .. ModulesFolder1 ) );
  push @INC, catdir( dirname( $INC{'ThisModule.pm'} ), qw( .. ModulesFolder2 ) );
} 
```

It caused the compiler to abort prematurely, which stopped the syntax check.
One of the possible solutions is to just use `__FILE__` instead of `$INC{'ThisModule.pm'}`.

More info about my concrete situation can be found in [this SO answer](https://stackoverflow.com/questions/11687018/a-proper-way-of-using-perl-custom-modules-inside-of-other-perl-modules).
And the cause of the problem was found out thanks to the [following EPIC support forum topic](http://sourceforge.net/projects/e-p-i-c/forums/forum/258688/topic/5474748).

# python - Data lost on receiver side in python socket programming

> ID：10605161
> 
> 赞同：0
> 
> 时间：2012-05-15T16:36:26.917
> 
> 标签：python, image, sockets, tcp

I have made a simple server -client code in python socket programming. Client side takes the screenshot(image) of its side and send it to server. It works fine when i am transferring image using 'localhost' i.e from one folder to other.....but the main problem comes when image is transferred to another computer...the received image on server side is corrupted...further more i have observed that the difference between client(sender side image i.e non corrupted one) and server(receivers side image i.e corrupted one ) is almost 1Kb every time.........

my code for client (sender) side is--

```
os.system('scrot screen.bmp') #command to take screen shot

FILE = "screen.bmp"
f = open(FILE, "rb")
data = f.read()
f.close()
del f

imagesize = int(os.path.getsize('screen.bmp'))

sendsize =  '%1024s' %imagesize
s.sendall(str(sendsize))
print 'length of data = ',len(data)
s.sendall(str(len(data)))
s.sendall(str(data)) 
```

and server side(receiver side) ---

```
filename='screen.bmp'
print '[Media] Starting media transfer for ',filename   
os.system('rm -f screen.bmp')
f = open(filename,"wb")
expsizeimage = int(conn.recv(1024))
data1 = conn.recv(1024)

data2=''
for i in range(0,len(data1)):
    if(not(data1[i]=='0' or data1[i]=='1' or data1[i]=='2' or data1[i]=='3' or data1[i]=='4' or data1[i]=='5' or data1[i]=='6' or data1[i]=='7' or data1[i]=='8' or data1[i]=='9')):
        break
    data2=data2+data1[i]
print '------------'+data2+'-------------'+str(m)+'----------------'
print 'size of data:' ,int(data2)
print 'the expected size of image is: ', expsizeimage
data=9
del data
sized=0;
while 1:

    data = conn.recv(expsizeimage)
    print 'received length of image = ',len(data)               
    f.write(data)

    sized=sized+len(data)
    print "sized------"+str(sized)
    del data
    if(sized>=int(data2)):

        break

print "saved the screentshot data recieved" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:34:38.387

These two programs are untested, were written for the latest version of Python, and switch your client/server relationship for security purposes.

* * *

**Source.py**

```
import os, struct, socket

def main():
    # Take screenshot and load the data.
    os.system('scrot image.bmp')
    with open('image.bmp', 'rb') as file:
        data = file.read()
    # Construct message with data size.
    size = struct.pack('!I', len(data))
    message = size + data
    # Open up a server socket.
    server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    server.bind(('', 65000))
    server.listen(5)
    # Constantly server incoming clients.
    while True:
        client, address = server.accept()
        print('Sending data to:', address)
        # Send the data and shutdown properly.
        client.sendall(message)
        client.shutdown(socket.SHUT_RDWR)
        client.close()

if __name__ == '__main__':
    main() 
```

* * *

**Destination.py**

```
import socket, struct

def main(host):
    # Connect to server and get image size.
    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client.connect((host, 65000))
    packed = recvall(client, struct.calcsize('!I'))
    # Decode the size and get the image data.
    size = struct.unpack('!I', packed)[0]
    print('Receiving data from:', host)
    data = recvall(client, size)
    # Shutdown the socket and create the image file.
    client.shutdown(socket.SHUT_RDWR)
    client.close()
    with open('image.bmp', 'wb') as file:
        file.write(data)

def recvall(sock, size):
    message = bytearray()
    # Loop until all expected data is received.
    while len(message) < size:
        buffer = sock.recv(size - len(message))
        if not buffer:
            # End of stream was found when unexpected.
            raise EOFError('Could not receive all expected data!')
        message.extend(buffer)
    return bytes(message)

if __name__ == '__main__':
    main('localhost') 
```

# android - 将简单的大视图保存到位图

> ID：10605162
> 
> 赞同：2
> 
> 时间：2012-05-15T16:36:30.767
> 
> 标签：android, bitmap

我动态构建了一个大小为 4022（宽度）x 3779（宽度）的图表的相对布局。然而，该图表仅包含 50-100 个文本视图，因此结果 .png 很小。这是我用来捕获图表的短代码。

```
 // chart_container was built dynamically before calling this function:
   public void saveBitmap(RelativeLayout chart_container) {
        int scale_ratio = 2;
        int chartWidth = chart_container.getWidth();
        int chartHeight = chart_container.getHeight();
        Log.i(TAG, "orignal width:" + chartWidth + ", original height: " + chartHeight);
        Bitmap mBitmap = Bitmap.createBitmap(chartWidth / scale_ratio, chartHeight / scale_ratio, Bitmap.Config.ARGB_8888); // crashes when scale_ratio is 1
        Canvas mCanvas = new Canvas(mBitmap);
        chart_container.draw(mCanvas);
        out = new FileOutputStream("/data/data/package/chart.jpeg");
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
        out.flush();
        out.close();
    } 
```

LogCat 输出：

> 原始宽度：4022，原始高度：3779

当“scale_ratio”为 2 时，成功保存图表的左上角四分之一。文件大小只有 22k。当“scale_ratio”为 1 时，应用程序由于“createBitmap”行的内存不足而崩溃：

> java.lang.OutOfMemoryError：位图大小超出 VM 预算

有什么好方法可以保存整个图表吗？非常感谢您的帮助！！！

更新：我通过将 Emulator VM 堆大小增加 10 倍来解决了这个问题。现在我有一个完整的图表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:17:32.420

我通过将 Emulator VM 堆大小增加 10 倍解决了这个问题。现在我有一个完整的图表。

# python - OSX下的opencv VideoWriter不产生输出

> ID：10605163
> 
> 赞同：24
> 
> 时间：2012-05-15T16:36:44.563
> 
> 标签：python, opencv

我正在尝试从 OSX 下的 OpenCV 的 python 包装器创建一个视频。我正在使用 python 2.7.1、opencv 2.3.1a 和来自 willowgarage 的 python 包装器，这些包装器随该版本的 opencv 一起提供。我有：

```
import cv,cv2
w = cv2.VideoWriter('foo.avi', cv.FOURCC('M','J','P','G'), 25, (100,100))
for i in range(100):
    w.write(np.ones((100,100,3), np.uint8)) 
```

OpenCV 说

```
WARNING: Could not create empty movie file container.
Didn't successfully update movie file.
... [ 100 repetitions] 
```

我不确定接下来要尝试什么

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-10-06T18:27:29.060

关于这个主题有很多过时和不正确的在线指南——我想我几乎每一个都试过了。在查看了 Mac OSX 上基于 QTKit 的 VideoWriter 源代码实现之后，我终于能够使用以下代码让 VideoWriter 输出有效的视频文件：

```
fps = 15
capSize = (1028,720) # this is the size of my source video
fourcc = cv2.cv.CV_FOURCC('m', 'p', '4', 'v') # note the lower case
self.vout = cv2.VideoWriter()
success = self.vout.open('output.mov',fourcc,fps,capSize,True) 
```

要写入一个图像帧（注意 imgFrame 必须与上面的 capSize 大小相同，否则更新将失败）：

```
self.vout.write(imgFrame) 
```

完成后请务必：

```
vout.release() 
self.vout = None 
```

这适用于 Mac OS X 10.8.5 (Mountain Lion)：不保证其他平台。我希望这个片段可以节省其他人几个小时的实验时间！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-06-23T02:40:22.540

我使用的是 macOS High Sierra 10.13.4、Python 3.6.5、OpenCV 3.4.1。

下面的代码（来源：[https](https://www.learnopencv.com/read-write-and-display-a-video-using-opencv-cpp-python/) ://www.learnopencv.com/read-write-and-display-a-video-using-opencv-cpp-python/ ）打开相机，按“q”成功关闭窗口, 并将视频保存为 .avi 格式。

请注意，您需要将其作为 .py 文件运行。如果在 Jupyter Notebook 中运行，窗口在关闭时会挂起，需要强制退出 Python 才能关闭窗口。

```
import cv2
import numpy as np

# Create a VideoCapture object
cap = cv2.VideoCapture(0)

# Check if camera opened successfully
if not cap.isOpened(): 
  print("Unable to read camera feed")

# Default resolutions of the frame are obtained.The default resolutions are system dependent.
# We convert the resolutions from float to integer.
frame_width = int(cap.get(3))
frame_height = int(cap.get(4))

# Define the codec and create VideoWriter object.The output is stored in 'outpy.avi' file.
out = cv2.VideoWriter('outpy.avi',cv2.VideoWriter_fourcc('M','J','P','G'), 10, (frame_width,frame_height))

while True:
  ret, frame = cap.read()

  if ret: 

    # Write the frame into the file 'output.avi'
    out.write(frame)

    # Display the resulting frame    
    cv2.imshow('frame',frame)

    # Press Q on keyboard to stop recording
    if cv2.waitKey(1) & 0xFF == ord('q'):
      break

  # Break the loop
  else:
    break 

# When everything done, release the video capture and video write objects
cap.release()
out.release()

# Closes all the frames
cv2.destroyAllWindows() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-10T11:20:22.220

在尝试了各种选项后，我发现我使用的 frame.size 不适合 VideoWriter 中指定的大小：所以将其设置为 iMac 1280x720 的默认值就可以了！

```
import numpy as np
import cv2

cap = cv2.VideoCapture(0)

# Define the codec and create VideoWriter object
fourcc = cv2.VideoWriter_fourcc('m', 'p', '4', 'v')
out = cv2.VideoWriter()
succes = out.open('output.mp4v',fourcc, 15.0, (1280,720),True)
while(cap.isOpened()):
    ret, frame = cap.read()
    if ret==True:
        frame = cv2.flip(frame,0)
        # write the flipped frame
        out.write(frame)
        cv2.imshow('frame',frame)
        if cv2.waitKey(1) & 0xFF == ord('q'):
            break
    else:
        break

# Release everything if job is finished
cap.release()
out.release()
cv2.destroyAllWindows() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-02T06:12:36.567

这是“大小”问题。

```
import cv2
import time

filename = time.strftime("%m-%d-%H-%M-%S") + '.avi'
fps = 16

cap = cv2.VideoCapture(0)

#in this way it always works, because your get the right "size"
size = (int(cap.get(cv2.cv.CV_CAP_PROP_FRAME_WIDTH)),
        int(cap.get(cv2.cv.CV_CAP_PROP_FRAME_HEIGHT)))
fourcc = cv2.cv.FOURCC('8', 'B', 'P', 'S')     #works, large
out = cv2.VideoWriter(filename, fourcc, fps, size, True)

#in this way, you must set the "size" to your size, 
#because you don't know the default "size" is right or not
#cap.set(3, 640)
#cap.set(4, 480)
#out = cv2.VideoWriter(filename, fourcc, fps, (640, 480), True)

while(cap.isOpened()):
    ret, frame = cap.read()
    if ret == True:
        out.write(frame)
        cv2.imshow('frame', frame)

    if cv2.waitKey(1) & 0xFF == ord('q'):
        break;

else:
    print 'Error...'
    break;

cap.release()
out.release()
cv2.destroyAllWindows() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-03T06:06:03.343

这是一个适用的版本：

*   Python 3.6.3
*   OpenCV 3.3.1
*   macOS 10.13.1

安装了`brew install opencv`.

```
#!/usr/bin/env python3

import cv2

def main():
    vc = cv2.VideoCapture()
    if not vc.open('input.mp4'):
        print('failed to open video capture')
        return

    fourcc = cv2.VideoWriter_fourcc(*'mp4v')
    # Match source video features.
    fps = vc.get(cv2.CAP_PROP_FPS)
    size = (
        int(vc.get(cv2.CAP_PROP_FRAME_WIDTH)),
        int(vc.get(cv2.CAP_PROP_FRAME_HEIGHT)),
    )

    vw = cv2.VideoWriter()
    if not vw.open('output.mp4', fourcc, fps, size):
        print('failed to open video writer')
        return

    while True:
        ok, frame = vc.read()
        if not ok:
            break

        # Flip upside down.
        frame = cv2.flip(frame, 0)

        # Write processed frame.
        vw.write(frame)

        cv2.imshow('frame', frame)
        if cv2.waitKey(1) & 0xFF == ord('q'):
            break

    vc.release()
    vw.release()
    cv2.destroyAllWindows()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-14T17:24:26.093

这是对我有用的@ToddStellanova 答案的变体：

```
def write_video(image_dir):
  '''
  Writes a video from a set of images in `image_dir`
  '''
  target = join('data/labelled-videos',
                basename(image_dir) + '.mp4v')
  codec = cv2.cv.CV_FOURCC('m', 'p', '4', 'v')
  size = (256, 256)
  v = cv2.VideoWriter(target, codec, 16, size)
  for image_name in listdir(image_dir):
    image_filename = join(image_dir, image_name)
    arr = np.asarray(Image.open(image_filename))
    assert arr.shape[:2] == size
    v.write(arr) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-23T22:36:24.787

您的 ffmpeg 版本可能已过时。我在使用 ffmpeg 0.8 时遇到了类似的问题，升级到 ffmpeg 0.11 后它运行良好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-02-08T22:46:14.020

我的问题在于**frame_width**和**frame_height**。尝试以下操作：

```
import cv2

cap = cv2.VideoCapture(0)

# Define the codec and create VideoWriter object
fourcc = cv2.VideoWriter_fourcc(*'MJPG')
frame_width = int(cap.get(3))
frame_height = int(cap.get(4))
size = (frame_width, frame_height)
fps = 10
out = cv2.VideoWriter("output.avi", fourcc, fps, size)

while(cap.isOpened()):
    ret, frame = cap.read()

    if ret:
        out.write(frame)  # write the frame
        cv2.imshow('frame', frame)
    else:
        break
    if cv2.waitKey(1) == 27:  # Esc
        break

# Release everything if job is finished
cap.release()
out.release()
cv2.destroyAllWindows() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-28T09:30:35.807

这不是个好主意

您必须创建一个`VideoWriter`结构并使用方法`WriteFrame`：

```
import cv
cv.NamedWindow('cap', 1)
w = cv.CreateVideoWriter('test.avi',cv.CV_FOURCC('X','V','I','D'),25,(640,480))
cap = cv.CaptureFromCAM(0)
while(1):
    img = cv.QueryFrame(cap)
    cv.ShowImage('cap', img)
    cv.WriteFrame(w, img)
    if cv.WaitKey(1) == 27:
        break
cv.DestroyWindow('cap') 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-08T08:25:32.640

感谢@TeddStellanova

这里是 XCode C++ 版本：

```
int fWidth = capture.get(CV_CAP_PROP_FRAME_WIDTH);
int fHeight = capture.get(CV_CAP_PROP_FRAME_HEIGHT);
string vid_path = path + "frames.mov";
VideoWriter vid(vid_path,CV_FOURCC('m','p','4','v'),30,Size(fWidth,fHeight),true); 
```

# redirect - 不同国家访问者的不同下载链接

> ID：10605166
> 
> 赞同：0
> 
> 时间：2012-05-15T16:36:57.730
> 
> 标签：redirect, hyperlink

我是 php 新手，想做以下事情：

如果用户来自德国，他应该会在我的页面上看到链接 download.zip。如果用户来自其他任何地方，他应该会在我的页面上看到链接 download2.zip。

我正在使用 WP，当前的插件只允许重定向整个页面。我只希望 1 个链接因国家/地区而异。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:46:47.200

用户位置基于浏览器配置（语言）、SO 配置还是地理位置？如果您根据前两个中的一个做出决定，则可以使用 javascript 获取国家代码并决定要显示的链接。看看这里：[http ://www.javascriptkit.com/javatutors/navigator.shtml](http://www.javascriptkit.com/javatutors/navigator.shtml)

# c - 使用指向 const 数据的 const 指针进行 C 封装

> ID：10605167
> 
> 赞同：4
> 
> 时间：2012-05-15T16:37:00.627
> 
> 标签：c, pointers

我有一个关于在 C 中封装我的模块（一个 .c/.h 文件对）的问题。

人们通常使用 getTime(char * time) 之类的访问函数来访问模块的内部变量，而不会提供干扰它们的能力。

现在，我正在使用指向常量数据的常量指针，指向内部结构来做同样的事情。我认为这很有效，因为其他模块可以查看结构中的数据而无法更改它，并且它节省了函数调用的开销。（这是用于嵌入的东西，所以函数调用是“昂贵的”）。

我只是想对这是否是有效的封装等提出一些意见。我想他们可以设置一个指向它的指针，它不是常量，然后他们可能会弄乱数据？一个例子：blah.h

```
typedef struct {
    unsigned char data;
    unsigned int intdata;
} myStruct;

extern const myStruct * const ptrConstMyStruct; 
```

废话.c

```
static myStruct thisIsMyModulesData;
const myStruct * const ptrConstMyStruct = &thisIsMyModulesData; 
```

另一个文件.c

```
variable = ptrConstMyStruct->data;
ptrConstMyStruct->data = variable; //compile error! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:55:21.340

使用不完整类型并在头文件中前向声明结构是首选方式。

就封装而言，常量更多是一种声明特定函数不会改变给定对象的方式。在您的解决方案中，您将不得不抛弃似乎违反直觉的 constness。或者你永远不会使用 const 指针作为变异函数的参数？

*此外，封装是关于隐藏实现和细节，如果您公开作为实现*的结构，则无法做到这一点。

编辑以解释前向声明：

我的代码.h：

```
struct my_struct; 
```

我的代码.c：

```
struct my_struct { .... }; 
```

以上意味着 MyCode 的用户将能够使用指向 my_struct 的指针，但不能检查其成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:28:50.087

封装允许您更改内部机制，并防止用户更改您的内部数据。一种方法是使用 getter 和 setter 函数，它们既封装又允许你做你的 const 事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T19:49:54.887

您的问题中有一些陈述可能表明问题的真正根源。

> 我认为这很有效，因为其他模块可以查看数据......

如果其他模块可以查看数据，则不进行封装。如果其他模块*需要*查看（原始）数据，那么您为什么要尝试将其设为私有？这暗示了程序设计中的一些基本缺陷。

> 外部

您永远不需要在 C 语言中使用全局变量（也许 MCU 硬件外围寄存器除外）。在过去的 10 年里，我没有使用过全局变量，而且我几乎只使用嵌入式实时系统。同样，这表明程序设计中有问题。

> ...它节省了函数调用的开销。（这是用于嵌入的东西，所以函数调用是“昂贵的”）。

不，不是。C 语言支持函数内联已经 13 年了，即使你有一个旧的 C90 编译器，我敢打赌它也有一个内联选项，`#pragma inline`或者类似的。我还没有看到缺少内联的嵌入式编译器。最重要的是，如果您只启用优化，即使是旧的编译器也可以在没有程序员任何明确提示的情况下执行内联。

此外，函数调用开销是否是程序中的瓶颈，这是您通过使用示波器进行基准测试/测量发现的？如果不是，那你为什么要用全局变量和暴露私有数据的奇怪指针来混淆你的代码？那是过早的优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T17:08:29.347

除非您能够在结构的“用户”读取它的位置和数据所在的位置之间注入代码，否则它不是封装。这样的垫片允许您在不改变结构的外部使用的情况下更改结构的内部结构。

虽然您的解决方案是对通常在 C 中完成的方式的改进，但为了封装它，您需要能够将字段从单个值更改为构造值，而无需更改任何“外部”代码来证明它是真的封装了。

在 C 中，这通常是通过将数据隐藏在 void 指针后面，或者在封装代码的外部使用声明的（但未定义的）结构来执行的。

废话

```
struct myStruct_t;
typedef struct myStruct_t myStruct;

extern myStruct * const ptrConstMyStruct;

// if you want a constructor, you need to declare the
// method here, because only blah.c will know the struct
// size with this solution.
myStruct * new_myStruct();

// methods
myStruct_setData(myStruct* obj, char c);
char myStruct_getData(myStruct* obj); 
```

废话.c

```
#include "blah.h"

struct myStruct_t {
    unsigned char data;
    unsigned int intdata;
};

static myStruct thisIsMyModulesData;

// no need to make the struct const, just the pointer
// otherwise, we would have to break the const just to change
// data, which now will only be done within this file.
myStruct * const ptrConstMyStruct = &thisIsMyModulesData; 
```

另一个文件.c

```
#include "blah.h"
// anotherFile "knows" of a struct called myStruct, but
// it doesn't know what it contains, or even it's size.

// this is no longer possible
// now "data" is encapsulated, and can be changed
// by reimplementing `myStruct_getData(...)`
// (as long as we don't change the method signature).
variable = ptrConstMyStruct->data;

// this is the "new" way
variable = myStruct_getData(ptrConstmyStruct);

// with the old, compiler error because of 
// assigning a value to a const value.
ptrConstMyStruct->data = variable; //compile error!
                       ^
              (error occurs here)

// with the new, compiler error because of
// dereferencing a pointer to a unknown / incomplete type.
ptrConstMyStruct->data = variable; // compile error!
                ^
        (error occurs here) 
```

如您所见，错误的位置决定了封装与否。`ptrConstMyStruct->data`如果您在分配而不是取消引用时检查错误，则无法更改指针和数据之间的关系。

# javascript - Fullcalendar 的 remoteEventSource 正在删除所有源

> ID：10605171
> 
> 赞同：3
> 
> 时间：2012-05-15T16:37:22.420
> 
> 标签：javascript, jquery, fullcalendar

我有一个完整的日历，其中包含一些添加和删除 json 源的按钮。脚本完美地添加了源，但是当我尝试删除一个源时，它会删除所有源。我在某个地方错过了一些东西，也许有人可以帮助我。

```
$('.mycheckboxes').click(function() {

    // retrieve calendar ID from clicked checkbox
    var cal = $(this).attr('id');

    // define a json event source
    var src = {
        url: 'calendarJSON.php', 
        type: 'GET', 
        data: { calendar_id: cal }
    }

    if( $(this).is(':checked')) {
        $('#calendar').fullCalendar( 'addEventSource', src );
    } else {
        $('#calendar').fullCalendar('removeEventSource', src );

    }
}); 
```

为什么要删除所有事件源？我应该如何指定要删除的那个？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:52:35.073

如[（非常好）文档](http://arshaw.com/fullcalendar/docs/event_data/removeEventSource/)中所述，传递事件源的 url 就足够了。

所以试试这个代码：

```
$('#calendar').fullCalendar('removeEventSource', 'calendarJSON.php' ); 
```

在这里您可以找到一个工作示例[http://jsfiddle.net/domi27/bQXYp/1/](http://jsfiddle.net/domi27/bQXYp/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T11:28:46.733

就像已经说明的[domi27](https://stackoverflow.com/users/892318/domi27)一样 ，fullcalendar 允许将 URL 作为事件源传递。但它也允许像你一样传递一个数组。你是对的。在您的情况下，所有来源都被删除。

我会用一个小技巧来解决这个问题：在你的 URL 中添加一些东西，让 fullcalendar 区分事件源！

例如

```
// define a json event source
var src = {
    url: 'calendarJSON.php?dummy=' + cal, 
    type: 'GET', 
    data: { calendar_id: cal }
} 
```

# asp.net - 我可以在 32 位模式下运行 Asp.Net Cassini Web Server 吗？

> ID：10605182
> 
> 赞同：0
> 
> 时间：2012-05-15T16:37:59.737
> 
> 标签：asp.net, x86, webserver, cassini

我有一个项目依赖于我无法升级的 SigPlusNet 32​​ 位 dll。有人向我建议，如果我让 IIS 在 32 位模式下运行，但我一直在运行 Visual Studio Cassini 网络服务器并且此时无法安装 IIS，它会起作用。

我只需要在我的机器上运行，这样我就可以修复一些错误。我可以在 32 位模式下运行 cassini 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:40:26.913

我的印象是[Cassini 是 32bit](http://www.controlsystemworks.com/articles/UsingCassiniWebServer.html)。

您是否尝试过使用[IIS Express](http://www.microsoft.com/en-us/download/details.aspx?id=1038)？

# javascript - 如何使用 xpcom 更改 firefox 代理设置

> ID：10605183
> 
> 赞同：2
> 
> 时间：2012-05-15T16:38:07.163
> 
> 标签：javascript, firefox-addon, xpcom

我有一个在 localhost (127.0.0.1) 上运行的代理服务器，我已经**厌倦**了必须培训用户如何在 Firefox 中切换代理以绕过被阻止的网站。
我决定写一个插件。我想知道如何使用**xpcom**告诉 firefox 使用某个代理，例如
对于 http，使用 127.0.0.1 端口 8080。
互联网上的示例很少。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T17:13:06.240

代理设置存储在[首选项](https://developer.mozilla.org/en/Code_snippets/Preferences)中。您可能想要更改`network.proxy.type`,`network.proxy.http`和`network.proxy.http_port`([文档](https://developer.mozilla.org/en/Mozilla_Networking_Preferences#Proxy))。像这样：

```
Components.utils.import("resource://gre/modules/Services.jsm");
Services.prefs.setIntPref("network.proxy.type", 1);
Services.prefs.setCharPref("network.proxy.http", "127.0.0.1");
Services.prefs.setIntPref("network.proxy.http_port", 8080); 
```

如果您需要为每个 URL 动态确定代理，您可以通过[`nsIProtocolProxyService`接口](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIProtocolProxyService)使用功能提供程序- 它允许您定义“代理过滤器”。像这样的东西应该工作：

```
var pps = Components.classes["@mozilla.org/network/protocol-proxy-service;1"]
          .getService(Components.interfaces.nsIProtocolProxyService);

// Create the proxy info object in advance to avoid creating one every time
var myProxyInfo = pps.newProxyInfo("http", "127.0.0.1", 8080, 0, -1, 0);

var filter = {
  applyFilter: function(pps, uri, proxy)
  {
    if (uri.spec == ...)
      return myProxyInfo;
    else
      return proxy;
  }
};
pps.registerFilter(filter, 1000); 
```

# android - Android 通过 ContextMenu 项将数据传递给 Activity

> ID：10605186
> 
> 赞同：1
> 
> 时间：2012-05-15T16:38:12.223
> 
> 标签：android, android-menu

> **可能重复：**
> [如何在 Android 中的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

我正在为 Android 实现一个 PoC 应用程序，其中我有一个长按打开的上下文菜单。它有两个选项：“更新”和“删除”。如果用户选择“更新”选项，我想用小部件中`Activity`可用的数据打开一个新的`EditText`，并准备好进行更改。通过检查ID，我已经能够在方法中处理导航到新`Activity`的方法，但是我找不到任何方法来传递数据。`onContextItemSelected``MenuItem`

谢谢，
德博吉特

# jquery - 特定 id 内特定类的 jQuery 选择器

> ID：10605189
> 
> 赞同：8
> 
> 时间：2012-05-15T16:38:22.643
> 
> 标签：jquery

我想将 HTML 附加到特定 ID 的 div 中。如何选择它？

```
<div id="1">
 <div class="c"></div>
  <div class="c"></div>
  <div class="c"></div>
</div>  

<div id="2">
 <div class="c"></div>
  <div class="c"> TO APPEND INSIDE THIS DIV </div>
  <div class="c"></div>
</div>  

<div id="3">
 <div class="c"></div>
  <div class="c"></div>
  <div class="c"></div>
</div> 
```

我正在使用

```
 $(data).appendTo("#"+id).find(".c"); 
```

但它给我带来了问题，因为附加不是在 div 内部而是在 div 外部

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T16:39:47.880

你可以试试，

```
$('div#3 div.c').eq(1).append('<div class="new">NEW</div>'); 
```

或者

```
$('<div class="new">NEW</div>').appendTo($('div#4 .c:eq(1)')); 
```

你可以试试：

```
$(data).appendTo($('#'+ id +' .c')); 
```

如需更具体，可以使用任何具体的索引`div.c`；

```
$(data).appendTo($('#'+ id +' .c:eq(2)')); // append to third `div.c` 
```

**更新：**因为`appendTo()`刚刚包装了目标选择器，`$()`它对我有用。

**注意**不要只使用数字 ID。禁止使用它的 ID。更多[阅读](https://stackoverflow.com/questions/7987636/why-cant-i-have-a-numeric-value-as-the-id-of-an-element)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:40:06.537

ID 属性不能以数字开头。如果您将 id 属性更改为类似`item-2`的内容，则可以使用以下内容：

```
var html = '<div></div>';
$('#item-2 .c:eq(1)').append(html); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:42:15.240

这项工作。

```
$('#2 .c:eq(1)').html("<p>Hello</p>"); 
```

* * *

编辑：

```
​$('<p>Hello!</p>').appendTo($('#2 .c:eq(1)'));​ 
```

**[小提琴](http://jsfiddle.net/toroncino/yfxXj/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T16:39:39.147

```
$('#2 .c').html('<p>Stuff, junk, crud</p>'); 
```

# vb.net - 当组合框值在vb中更改时标签不更改值

> ID：10605193
> 
> 赞同：1
> 
> 时间：2012-05-15T16:38:50.033
> 
> 标签：vb.net, ms-access

我的 Visual Basic 程序从 Access 数据库中获取值并将它们放在标签中。从数据库返回的数据取决于在组合框中选择的值，并且应该随着组合框值的变化而变化，但令我惊讶的是，即使它们必须更改，标签仍然只显示最先显示的第一个值。我试图在每次访问数据库之前将标签文本分配给任何内容，但它仍然显示以前的值。我无法让这些标签更改文本可能是什么问题？请帮忙。这是我用来访问数据库并放入标签的代码：

```
 Me.p.Text = Nothing
    Me.tq.Text = Nothing
    Me.pd.Text = Nothing
    Me.ba.Text = Nothing
    Me.o.Text = Nothing
    Me.pm.Text = Nothing
    Me.tv.Text = Nothing
    Me.tqr.Text = Nothing
    Me.dff.Text = Nothing
    Try
        cmd.Connection = cnn
        cmd2.Connection = cnn
        cmd3.Connection = cnn
        cmd.CommandText = "SELECT distinct(brought_price), sum(brought_qtty), sum(brought_paid), sum(brought_bal),recieved_qtty,sum(brought_qtty)-recieved_qtty, sum(brought_qtty)*brought_price from brought_coffee, farmer, centre_weigh " & _
                                "where brought_date=? and farmer_centre=? and" & _
                                " brought_coffee.farmer_num=farmer.farmer_num and weigh_date=? and weigh_centre=? and brought_coffee.brought_date=centre_weigh.weigh_date and farmer_centre=weigh_centre group by brought_price,recieved_qtty"
            MessageBox.Show(Me.dtc.Text)
            cmd.Parameters.Add("@dt", OleDb.OleDbType.Date).Value = Me.dtc.Text
            cmd.Parameters.Add("@dt2", OleDb.OleDbType.VarChar).Value = Me.cc.Text.Trim.Substring(0, 2)
            cmd.Parameters.Add("@dt3", OleDb.OleDbType.Date).Value = Me.dtc.Text
            cmd.Parameters.Add("@dt4", OleDb.OleDbType.VarChar).Value = Me.cc.Text.Trim.Substring(0, 2)

            cmd2.CommandText = "SELECT sum(brought_qtty) from brought_coffee,farmer where coffee_grade='O' and brought_date=? and farmer_centre=? and" & _
                                " brought_coffee.farmer_num=farmer.farmer_num"
            cmd2.Parameters.Add("@dt5", OleDb.OleDbType.Date).Value = Me.dtc.Text
            cmd2.Parameters.Add("@dt6", OleDb.OleDbType.VarChar).Value =     Me.cc.Text.Trim.Substring(0, 2)

            cmd3.CommandText = "SELECT sum(brought_qtty) from brought_coffee,farmer where coffee_grade='P' and brought_date=? and farmer_centre=? and" & _
                                " brought_coffee.farmer_num=farmer.farmer_num"
            cmd3.Parameters.Add("@dt7", OleDb.OleDbType.Date).Value = Me.dtc.Text
            cmd3.Parameters.Add("@dt8", OleDb.OleDbType.VarChar).Value = Me.cc.Text.Trim.Substring(0, 2)

            myData = cmd.ExecuteReader
            myData2 = cmd2.ExecuteReader
            myData3 = cmd3.ExecuteReader
            'MessageBox.Show("check 1")

            While myData.Read()
                'MessageBox.Show("check 1")
                Dim pr As String = myData(0).ToString
                Dim qtty As String = myData(1).ToString
                Dim pd As String = myData(2).ToString
                Dim bl As String = myData(3).ToString
                Dim rq As String = myData(4).ToString
                Dim dq As String = myData(5).ToString
                Dim tvp As String = myData(6).ToString
                'MessageBox.Show("quantity" & pr)
                Me.p.Text = pr
                Me.tq.Text = qtty
                Me.pd.Text = pd
                Me.ba.Text = bl
                Me.tqr.Text = rq
                Me.dff.Text = dq
                Me.tv.Text = tvp

            End While
            myData.Close()

            While myData2.Read()
                Dim od As String = myData2(0).ToString
                'MessageBox.Show(od)
                Me.o.Text = od
            End While

            myData2.Close()

            While myData3.Read()
                Dim pmm As String = myData3(0).ToString
                Me.pm.Text = pmm
            End While
            myData3.Close()
            cnn.Close() 
```

`dtc`并且`cc`是与选定的数据库值进行比较的文本框

# ios - iOS SDK 录制视频而不保存到相册

> ID：10605195
> 
> 赞同：2
> 
> 时间：2012-05-15T16:38:58.307
> 
> 标签：ios, video, photo-gallery

我需要将视频保存到我的应用程序的 Documents 目录中，但是当我使用 UIIMagePickerController 时，它会自动将视频放入相册中。有什么解决方法吗？

编辑：我需要在我的应用程序中录制视频以进行特征处理，但我不想将原始视频保存在相册中。这是我的应用程序的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:06:42.037

[检查此链接](http://red-glasses.com/index.php/tutorials/ios4-take-photos-with-live-video-preview-using-avfoundation/)，该链接描述了捕获照片并将其保存到 Documents 目录。之后查看[Apple 的 AVFoundation 编程指南](https://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW2)，该指南描述了捕获媒体的所有选项。我从第一个链接实现了照片功能。您可能只需要更改一些媒体类型，就可以将视频保存到您的 Documents 目录中。

# javascript - 检测用户是否在滚动

> ID：10605197
> 
> 赞同：96
> 
> 时间：2012-05-15T16:39:00.023
> 
> 标签：javascript

如果用户正在滚动，我如何在 javascript 中检测？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-05-15T16:40:29.313

这有效：

```
window.onscroll = function (e) {  
// called when the window is scrolled.  
} 
```

*编辑：*

你说这是 TimeInterval 中的一个函数。
尝试这样做：

```
userHasScrolled = false;
window.onscroll = function (e)
{
    userHasScrolled = true;
} 
```

然后在您的间隔内插入：

```
if(userHasScrolled)
{
//do your code here
userHasScrolled = false;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-15T16:58:43.090

您刚刚在标签中使用了 javascript，因此 @Wampie Driessen 的帖子可以帮助您。

我也想贡献，所以如果你需要，你可以在使用 jQuery 时使用以下内容。

```
 //Firefox
 $('#elem').bind('DOMMouseScroll', function(e){
     if(e.detail > 0) {
         //scroll down
         console.log('Down');
     }else {
         //scroll up
         console.log('Up');
     }

     //prevent page fom scrolling
     return false;
 });

 //IE, Opera, Safari
 $('#elem').bind('mousewheel', function(e){
     if(e.wheelDelta< 0) {
         //scroll down
         console.log('Down');
     }else {
         //scroll up
         console.log('Up');
     }

     //prevent page fom scrolling
     return false;
 }); 
```

另一个例子：

```
$(function(){
    var _top = $(window).scrollTop();
    var _direction;
    $(window).scroll(function(){
        var _cur_top = $(window).scrollTop();
        if(_top < _cur_top)
        {
            _direction = 'down';
        }
        else
        {
            _direction = 'up';
        }
        _top = _cur_top;
        console.log(_direction);
    });
});​ 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-09-19T21:36:18.053

```
window.addEventListener("scroll",function(){
    window.lastScrollTime = new Date().getTime()
});
function is_scrolling() {
    return window.lastScrollTime && new Date().getTime() < window.lastScrollTime + 500
} 
```

将 500 更改为您认为用户“不再滚动”的最后一个滚动事件之后的毫秒数。

（比前者`addEventListener`更好，`onScroll`因为前者可以与任何其他使用 . 的代码很好地共存`onScroll`。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-02-23T02:27:44.327

如果您想检测用户何时滚动到某个**div**，您可以执行以下操作：

```
window.onscroll = function() {
    var distanceScrolled = document.documentElement.scrollTop;
    console.log('Scrolled: ' + distanceScrolled);
} 
```

例如，如果您的**div**在滚动到位置 112 后出现：

```
window.onscroll = function() {
    var distanceScrolled = document.documentElement.scrollTop;
    if (distanceScrolled > 112) {
      do something...
    }
} 
```

但是正如您所看到的，您不需要**div**，只需要您想要发生的事情的偏移距离。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-28T10:21:32.220

# 使用间隔检查

您可以设置一个时间间隔来继续检查用户是否已经滚动然后做相应的事情。

在[他的文章](https://johnresig.com/blog/learning-from-twitter/)中借用了伟大的[John Resig](https://en.wikipedia.org/wiki/John_Resig)。

例子：

```
 let didScroll = false;

    window.onscroll = () => didScroll = true;

    setInterval(() => {
        if ( didScroll ) {
            didScroll = false;
            console.log('Someone scrolled me!')
        }
    }, 250); 
```

[查看实时示例](https://jsbin.com/qohamuguru/edit?console,output)

# jquery - .load() 和相对路径

> ID：10605200
> 
> 赞同：9
> 
> 时间：2012-05-15T16:39:03.667
> 
> 标签：jquery, path, jquery-load

`.load()`给我带来了麻烦。我正在处理一个部分加载器项目，但我似乎无法获取我需要的文件。

**我要实现的目标**： `#sectionContainer`在文件加载时为空，但在文件准备好时它被“填充” `Pages1.html`。这是由一个 JavaScript 文件完成的`sections.js`。JS 文件和 index.html 不在同一个文件夹中。这是网站结构（我在我的网站上运行了很多项目）

*   **主文件夹**
*   *项目一*
*   *项目 2* (sectionLoaderTest/)
    *   索引.html
    *   Pages1.html
    *   Pages2.html
    *   css/
    *   js/
        *   section.js
*   *项目 3*
*   ...

我用来加载 Pages1.html 的代码准备好了：

```
$(document).ready(function () {
    $("#sectionContainer").load("../Pages1.html", function (response, status, xhr) {
        if (status == "error") {
            var msg = "An error occurred. Status code: ";
            $("#error").html(msg + xhr.status + ". Status text: " + xhr.statusText);
        }
    });
}); 
```

我已经尝试了我所知道的所有可能的方法（/、./、.、../、..），但似乎没有任何效果。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T16:45:56.500

`./Pages1.html`应该管用。在地址栏中为他们测试了所有帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:44:47.430

您的 AJAX URL 应该与您所在的页面相关，因此您需要`"Pages1.html"`. 您在测试用例 (..Pages1.html) 中拥有的内容永远不会起作用，因为这不是有效的参考。（您的意思是 ../Pages1.html 吗？）

# excel - Excel VBA 用户窗体选择要从中复制的 Outlook 文件夹

> ID：10605206
> 
> 赞同：4
> 
> 时间：2012-05-15T16:39:31.997
> 
> 标签：excel, vba, outlook

我正在尝试创建一个用户表单，该表单将允许用户选择文件夹以将一组电子邮件复制到 Excel 电子表格。我已经完成了所有其余的工作（即创建了复制过程），但目前我必须为这个宏的每个新安装手动输入名称空间和文件夹层次结构。以下是我的手动过程

```
Set ol_App = New Outlook.Application
Set ol_Namespace = ol_App.GetNamespace("MAPI")
' Set ol_Folder = olNamespace.GetDefaultFolder(olFolderInbox)

' reference the folder that the emails are stored in
Set ol_Folder = ol_Namespace.Folders("Their own namespace")
Set ol_Folder = ol_Folder.Folders("Inbox")
Set ol_Folder = ol_Folder.Folders("Required_Folder") 
```

现在这个 vba 将在少数人之间共享，每个人都有不同的设置。有没有办法我可以使用说列表框在用户表单中进行设置，他们所做的只是选择正确的文件夹并单击继续，文件夹选择存储在变量或某种类型中？

先感谢您，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T16:48:46.107

这是你正在尝试的吗？这也将消除使用列表框的需要。:)

```
Option Explicit

'~~> Set a reference to Outlook Object x.x Library
Sub Sample()
    Dim oOlApp As Outlook.Application
    Dim objNmSpc As Namespace
    Dim ofldr As Object

    Set oOlApp = Outlook.Application
    Set objNmSpc = oOlApp.GetNamespace("MAPI")
    Set ofldr = objNmSpc.PickFolder

    If Not ofldr Is Nothing Then MsgBox ofldr
End Sub 
```

这里是通过后期绑定，即，如果您不想添加对 Outlook 对象 xx 库的引用

```
Option Explicit

Sub Sample()
    Dim oOlApp As Object, objNmSpc As Object, ofldr As Object

    '~~> Establish an Outlook application object
    On Error Resume Next
    Set oOlApp = GetObject(, "Outlook.Application")

    If Err.Number <> 0 Then
        Set oOlApp = CreateObject("Outlook.Application")
    End If
    Err.Clear
    On Error GoTo 0

    Set objNmSpc = oOlApp.GetNamespace("MAPI")
    Set ofldr = objNmSpc.PickFolder

    If Not ofldr Is Nothing Then MsgBox ofldr
End Sub 
```

**编辑**：

**快照**

![在此处输入图像描述](../Images/37f1ca3abe9460684a07dc532913521c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:49:14.427

您要做的是遍历 Outlook 文件夹，并让每个文件夹名称填充表单的激活事件中的列表框/组合框。通过这样做，当每个人运行它时，将使用他们自己的 Outlook 配置。

这个链接应该是一个好的开始[Outlook 文件夹循环](http://www.ozgrid.com/forum/showthread.php?t=76159)

# java - 以文件形式访问 Java 资源

> ID：10605207
> 
> 赞同：6
> 
> 时间：2012-05-15T16:39:32.933
> 
> 标签：java, file, resources, inputstream

我正在尝试从类路径/JAR 文件作为 File 对象访问资源。我知道这是使用 InputStream 对象的首选方法，但我使用的是需要 File 对象的外部库（WorldEdit）。

这是我的代码：

```
InputStream templStream = "".getClass().getResourceAsStream("/res/template.prom");
System.out.println("templateStream: " + templStream.toString());
File templFile = new File("".getClass().getResource("/res/template.prom").toURI());
System.out.println("templateFile: " + templFile.canRead()); 
```

现在，当我还在 eclipse 中时，两种访问资源的方式都可以完美运行并产生以下输出：

```
templStream: java.io.BufferedInputStream@746d1683
templFile: true 
```

但是将代码导出到 JAR 存档后，代码失败：

```
templStream: sun.net.www.protocol.jar.JarURLConnection$JarURLInputStream@47aa261b
Exception in thread "main" java.lang.IllegalArgumentException: URI is not hierarchical
    at java.io.File.<init>(File.java:392)
    at SMCToPROM.main(SMCToPROM.java:101) 
```

因此，我一直在寻找一种方法，要么直接将资源作为文件访问，要么采用使用 InputStream 并将 InputStream 转换为文件的方法，但没有成功。

最坏的后备解决方案是将 InputStream 复制到文件系统上的文件中，然后打开该文件，但我希望这不是必需的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:46:56.717

简短的回答是你不能，因为资源*不是*文件。

如果第三方库想要做的只是从源读取数据（因此它应该采用 ），那么第三方库编写得不好`InputStream`，或者库实际上想要执行特定于文件的操作。

假设这不是可以修复的库中的疏忽，您需要自己实际创建一个文件。尝试调用`File.createTempFile()`，自己用资源的内容填充此文件，然后将此`File`对象传递给库。（当然，完成后删除它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:44:29.697

您不能以`File`s 的身份直接访问 jarred 资源。相反，您需要将资源的内容复制到实际文件并将其传递给 3rd 方库（您可以使用`InputStream`从中获得`getResourceAsInputStream()`的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T17:03:03.290

您可以编写一个由 ,`File`支持的包装器对象`InputStream`，`Byte Array`或者`ByteBuffer`然后将其传递到编写不佳的库代码中。

这并不简单，如果您不知道库在`File`对象上调用了哪些方法，则需要您编写每个方法的正确实现。

我在类似的情况下做过一次，但我知道调用的子集，并且不必正确实现每个方法。您可能会很幸运，图书馆所做的唯一事情就是调用`.getInputStream()`并轻松完成它。

# java - Android：遍历字符串数组 - 意图方法的逻辑需要帮助

> ID：10605222
> 
> 赞同：8
> 
> 时间：2012-05-15T16:40:40.267
> 
> 标签：java, android, arrays, android-intent, logic

我是一个 java 新手，我使用下面的代码来显示一个可点击的 TextViews 列表，当它们被点击时，它们会调用一个特定的类。

这是一个足球队名称的列表。

例如。

阿森纳 曼联 切尔西

点击 TextView Arsenal (TextView id = ars) 将调用 ars.class 点击 TextView Chelsea (TextView id = che) 将调用 che.class

我有超过 20 个足球队的名字。

我有一组 textview id，我循环遍历它们并为它们分配一个可点击的操作。这工作正常。

我有一个团队名称的字符串数组，代码循环遍历字符串数组并将每个团队名称分配给一个 Class 对象，该对象在 Intent() 方法中使用。

当我运行此代码时，会生成列表，但是当我单击团队名称时，它总是会打开 Wol.java，这是字符串数组中的最后一个位置。

我需要一些逻辑帮助，这样当我点击阿森纳时，它会打开 ars.class

这是代码。

```
public final int[] teams = { R.id.ars, R.id.ast, R.id.bir, R.id.bla,
        R.id.blp, R.id.bol, R.id.che, R.id.eve, R.id.ful, R.id.hul,
        R.id.lee, R.id.liv, R.id.mid, R.id.mnc, R.id.mnu, R.id.nor,
        R.id.nwu, R.id.por, R.id.qpr, R.id.sto, R.id.sun, R.id.swa,
        R.id.tot, R.id.wes, R.id.wig, R.id.wol };

     //String array of teamnames, named to correspond their class name.
public final String[] teamnames = { "ars", "ast", "bir", "bla", "blp",
        "bol", "che", "eve", "ful", "hul", "lee", "liv", "mid", "mnc",
        "mnu", "nor", "nwu", "por", "qpr", "sto", "sun", "swa", "tot",
        "wes", "wig", "wol" };

TextView tv;
Class classname;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.m_transfers);

    setTeamNames(); //Method sets up team names to a Class name.

    for (int i = 0; i < teams.length; i++) {
        tv = (TextView) findViewById(teams[i]);
        tv.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent open = new Intent(Transfers.this, classname);
                startActivity(open);
            }
        });
    }
    ;
}

public void setTeamNames() {
    for (String s : teamnames) {
        String name = "ttj.android.ft.teams." + s;

        try {
            classname = Class.forName(name);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
    ;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:44:51.513

`classname`每次在里面的 foreach 循环中迭代时都会被覆盖`setTeamNames()`。因此，最后只剩下最后一个类名。

如果`teams`和`teamnames`具有相同数量的条目（它们应该），您可以使用以下代码并完全摆脱`setTeamNames()`。

```
final String prefix = "ttj.android.ft.teams.";
for (int i = 0; i < teams.length; i++) {
    tv = (TextView) findViewById(teams[i]);
    tv.setOnClickListener(new View.OnClickListener() {
       public void onClick(View v) {
       try {
          Class class = Class.forName(prefix + teamnames[i]);               
          Intent open = new Intent(Transfers.this, class);
          startActivity(open);
        } catch (ClassNotFoundException e) {
          e.printStackTrace();
        }
    });
}
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:30:48.100

假设您尝试启动的活动具有相似（或相同）的布局和功能，但显示每个团队的特定数据不同，请尝试以下操作。

改变你的`onClick(View v)`方法如下...

```
tv.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Intent open = new Intent(Transfers.this, TeamActivity.class);
        open.putExtra("team", ((TextView)v).getText());
        startActivity(open);
    }
}); 
```

然后创建一个“通用” `Activity`...

```
public class TeamActivity extends Activity {

    String teamName = "";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Set the layout here

        // Get the Intent and team name with the following...
        teamName = getIntent().getStringExtra("team");

        // Do something with teamName

    }
} 
```

只需`TeamActivity`在您的清单中注册，您就可以开始使用了。

# visual-studio - 安装失败：Visual Studio 2010 Pro 安装

> ID：10605224
> 
> 赞同：10
> 
> 时间：2012-05-15T16:40:56.023
> 
> 标签：visual-studio, visual-studio-2010, installation

尝试在 Windows 7（64 位）上安装 VS2010Pro，我还检查了所有系统要求。

**错误：**

![在此处输入图像描述](../Images/4655174bd017d93d54e2dd1981545589.png)

**查看错误日志：**

```
[05/15/12,10:48:22] Microsoft Visual Studio 2010 64bit Prerequisites (x64): [2] Error: Installation failed for component Microsoft Visual Studio 2010 64bit Prerequisites (x64). MSI returned error code 1603
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 64bit Prerequisites (x64) is not installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft Visual F# 2.0 Runtime was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates TFS Object Model (x64) was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates .NET Framework 4 Multi-Targeting Pack was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 Professional - ENU was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft Web Deployment Tool (x64) was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft ASP.NET MVC 2 - Visual Studio 2010 Tools was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft ASP.NET MVC 2 was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft Silverlight 3 SDK was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 Tools for Office Runtime (x64) was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft Office Developer Tools (x64) was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Dotfuscator Software Services - Community Edition was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Crystal Reports templates for Visual Studio 2010 was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft SQL Server Compact 3.5 SP2 (x64) ENU was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Visual Studio 2010 Tools for SQL Server Compact 3.5 SP2 ENU was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft Sync Framework Runtime v1.0 (x64) ENU was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft Sync Services for ADO.NET v2.0 (x64) ENU was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft Sync Framework Services v1.0 (x64) ENU was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft Sync Framework SDK v1.0 (x64) ENU was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates VC 10.0 Designtime (x64) was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft SQL Publishing Wizard 1.4 was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft SQL Server System CLR Types was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Management Objects was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Management Objects (x64) was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 Express Service Pack 1 (x64) was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Data-Tier Application Framework was not attempted to be installed.
[05/15/12,10:48:22] VS70pgui: [2] DepCheck indicates Microsoft SQL Server 2008 R2 Data-Tier Application Project was not attempted to be installed. 
```

**参考链接** 1\. [MSDN](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/c1f520fd-1966-4927-a7b3-7100747b19aa/) 2\. [BLOG](http://ishaalan.wordpress.com/2010/04/19/error-installation-failed-for-component-microsoft-visual-studio-2010-64bit-prerequisites/)（已尝试）

[在MSDN](http://social.msdn.microsoft.com/Forums/en/vssetup/thread/b3bbf748-acd6-40c7-93e1-1455bf13aaba)论坛上也问过问题。

除了重新安装操作系统之外，我还有什么更好的解决方案来解决**这个问题吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T16:25:25.110

经过2天的工作，解决方案终于来了.....呸！！！！！！

开始了，

如错误所示 VS2010 在安装 Microsoft Visual Studio 2010 64bit Prerequisites (x64) 时卡住

```
Error: Installation failed for component Microsoft Visual Studio 2010 64bit Prerequisites (x64). MSI returned error code 1603 
```

所以我搜索了相应的目录并手动运行了.exe

```
VS2010Pro\adminpoint\WCU\64bitPrereq\x64 
```

跑了**VS_Prerequisites_x64_enu 又**得到了一个**错误**

```
error 25541 failed to open xml file C:\Windows\Microsoft.NET\Framework64\v2.0.50727\CONFIG\machine.config, system error -2147024786 
```

在指示的路径中查找 machine.config ，但我找不到**machine.config**

```
C:\Windows\Microsoft.NET\Framework64\v2.0.50727\CONFIG 
```

所以我将 machine.config.default 复制**到桌面并将其重命名为 machine.config**并将其添加到 C:\Windows\Microsoft.NET\Framework64\v2.0.50727\CONFIG 然后运行 ​​VS_Prerequisites_x64_enu 和 VS2010 安装程序。

```
VS_Prerequisites_x64_enu ---> (finally) VS2010 installer 
```

**注意：**通过这样做，我欺骗了安装程序，安装顺利。

更多细节在[这里](http://social.msdn.microsoft.com/Forums/en/vssetup/thread/b3bbf748-acd6-40c7-93e1-1455bf13aaba)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:46:34.610

错误代码 1603：可以在此 msdn 链接[http://social.msdn.microsoft.com/Forums/eu/vssetup/thread/3f07772c-4187-4be7-a390-d775f8eb5a50找到解决方案](http://social.msdn.microsoft.com/Forums/eu/vssetup/thread/3f07772c-4187-4be7-a390-d775f8eb5a50)

如果它没有解决，请尝试在[VisualStudio 设置和安装](http://social.msdn.microsoft.com/Forums/en/vssetup/threads)论坛中发布它。希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-31T18:50:17.680

今天有同样的问题，并通过重新安装 .NET 框架 4.5 和 4.0 来修复它

[http://www.microsoft.com/en-us/download/details.aspx?id=30653](http://www.microsoft.com/en-us/download/details.aspx?id=30653)

[http://www.microsoft.com/en-us/download/details.aspx?id=17851](http://www.microsoft.com/en-us/download/details.aspx?id=17851)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T05:23:22.237

问题是你下载的软件，它没有完全下载，这就是为什么这个错误，我也遇到过同样的问题，但我通过重新下载软件解决了，

下载后检查下载的大小和网站上提到的大小是否相同，如果不是没有完全下载，请重新下载并安装

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-19T12:41:57.593

您可能缺少 machine.config 文件。

位置：C:\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-17T23:42:10.340

我在 Windows 8.1 机器上安装 Visual Studio 2010 Professional 时遇到了类似的问题。我尝试从本地目录安装 Visual Studio，但失败了。尽管 DVD 中的所有文件看起来都与本地目录中的完全相同，但我再次重新复制了所有文件，这次安装成功。

[我还按照此处](http://blogs.msdn.com/b/heaths/archive/2011/12/13/10141564.aspx)找到的这些步骤进行安装，而无需输入产品密钥和您的自定义设置。并在安装过程中添加 SP1。它没有解决问题，但我安装了无人值守的软件。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-06T00:35:24.290

我下载了一个损坏的图像并得到了相同的结果。我的建议是单独运行组件的安装程序；损坏的设置应立即失败。

# javascript - 测试对历史 API 的支持在 IE 中返回 true

> ID：10605231
> 
> 赞同：0
> 
> 时间：2012-05-15T16:41:26.947
> 
> 标签：javascript

我正在为我的网络应用程序实现历史 API，当然 IE 不支持它。没关系，我有一个解决方法，但是当我测试是否支持 API 时，我没有得到预期的结果。

这是违规行：

```
if (window.history) { 
```

问题是在 IE 中，它显示为 true。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:43:48.907

简单的。IE 确实支持一些历史记录，例如`window.history.back()`. 您需要测试历史 API 的更具体的方法或属性。试试这个：

```
if (window.history.pushState) { //Whatever code you want 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:45:12.677

据我了解，IE 确实支持历史记录，因此它可能是您尝试在历史记录 API 中调用的方法。

# git - Git - 确定何时在此站点上提取/获取/合并修订

> ID：10605236
> 
> 赞同：0
> 
> 时间：2012-05-15T16:41:49.757
> 
> 标签：git, revision

我知道何时根据日志消息创建某些提交（例如在远程*A处）。*我不知道远程*B*何时获取并合并所述修订。我需要它来确定错误何时潜入。

这可以通过 Git 实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:45:12.703

如果是这样`fetch`，请尝试`git reflog --date=local`，请参阅[https://stackoverflow.com/a/3748722/88442](https://stackoverflow.com/a/3748722/88442)。如果它有一个本地合并，一个 git log 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:47:23.927

假设您已获取远程，您可以通过执行以下操作简单地检查远程上的哪些分支包含提交：

```
 git branch -r --contains <commit-SHA> | grep origin 
```

您将看到`origin`包含提交的远程分支（更改为适当的名称），如果没有则没有输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:51:50.313

日志保存在“.git/logs”中。您可能对您感兴趣的结帐时的“.git/logs/HEAD”感兴趣。这些日志包含拉取、结帐、提交等，以及它们发生的时间。

# tsql - TSQL - 是否有单独的查询并排显示数据？

> ID：10605238
> 
> 赞同：0
> 
> 时间：2012-05-15T16:41:59.767
> 
> 标签：tsql

有点奇怪的请求，但是是否可以在不使用外连接的情况下让单独的 TSQL 查询并排显示数据？我想知道我是否完全复杂化了这个......

这是我想要做的：

我有 12 个查询可以计算记录数，我希望它们不是堆叠在一起，而是从右到左显示记录，就好像它们在表中一样。

所以从这些查询中：

```
SELECT COUNT(*) AS 'INTERNET JAN 12'
  FROM dbo.CONTACT AS AA
  JOIN dbo.Document AS BB
  ON AA.ACCOUNTNO = BB.ACCOUNTNO
 WHERE SOURCE IN ('INTERNET', 'EBAY', 'MSN', 'BING', 'GOOGLE', 'YAHOO')
   AND KEY1 = 'EA'
   AND MONTH(BB.Date) = 1
   AND  YEAR(BB.Date) = 2012

SELECT COUNT(*) AS 'INTERNET FEB 12'
  FROM dbo.CONTACT AS AA
  JOIN dbo.Document AS BB
  ON AA.ACCOUNTNO = BB.ACCOUNTNO
 WHERE SOURCE IN ('INTERNET', 'EBAY', 'MSN', 'BING', 'GOOGLE', 'YAHOO')
   AND KEY1 = 'EA'
   AND MONTH(BB.Date) = 2
   AND  YEAR(BB.Date) = 2012

 ...

SELECT COUNT(*) AS 'INTERNET DEC 12'
  FROM dbo.CONTACT AS AA
  JOIN dbo.Document AS BB
  ON AA.ACCOUNTNO = BB.ACCOUNTNO
 WHERE SOURCE IN ('INTERNET', 'EBAY', 'MSN', 'BING', 'GOOGLE', 'YAHOO')
   AND KEY1 = 'EA'
   AND MONTH(BB.Date) = 12
   AND  YEAR(BB.Date) = 2012 
```

我希望结果集如下所示：

```
 INTERNET JAN 12     INTERNET FEB 12     ...     INTERNET DEC 12
 12                  25                          31 
```

而不是这样：

```
 INTERNET JAN 12
 12

 INTERNET FEB 12
 25

 ...

 INTERNET DEC 12
 31 
```

如果不添加另一个字段并进行外部连接，这是否可能？最终结果是在 Excel 电子表格中将其作为最终用户自动更新的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:50:19.063

使用临时表作为中间结果集来创建可以求和的数据怎么样？如果您的 TSQL 风格是最新的并且来自 Microsoft，那么 CTE 会这样做：

```
;
WITH temp (Jan12, Feb12, /* ... */ ) AS (
SELECT 
    -- Jan 12
    CASE MONTH(BB.Date)
        WHEN 1 THEN 1 
        ELSE 0 
    END,
    -- Feb 12
    CASE MONTH(BB.Date)
        WHEN 2 THEN 1 
        ELSE 0 
    END
  FROM dbo.CONTACT AS AA
  JOIN dbo.Document AS BB
  ON AA.ACCOUNTNO = BB.ACCOUNTNO
 WHERE SOURCE IN ('INTERNET', 'EBAY', 'MSN', 'BING', 'GOOGLE', 'YAHOO')
   AND KEY1 = 'EA'
   AND  YEAR(BB.Date) = 2012 
)
SELECT SUM(Jan12) AS [Internet Jan 12], SUM(Feb12) AS [Internet Feb 12] -- ... and so on 
```

话虽这么说，您的案例可能更适合`PIVOT`- 如果没有您的数据库进行查询，我无法制作合理的样本；[但应该很容易从文档](http://msdn.microsoft.com/en-US/library/ms177410%28v=SQL.90%29.aspx)中弄清楚。

# networking - 为什么静态路由在这里不起作用？

> ID：10605240
> 
> 赞同：-1
> 
> 时间：2012-05-15T16:42:07.067
> 
> 标签：networking, routing

我正在一个人学习CCNA的课程，我一直在尝试在Cisco Packet Tracer上建立一个只有两台主机和两台路由器的非常简单的网络。这里的问题是，如果不使用动态路由协议，我无法从笔记本电脑 ping router0（我尝试了 RIP，证明是成功的，所以 ip 配置没有问题......）。

![在此处输入图像描述](../Images/770806aa55437e47780d297c9f189b16.png)

我尝试使用以下命令在 router1 上配置静态路由： router(config)#ip route 192.168.10.0 255.255.255.0 192.168.10.2

我还尝试了默认路由命令：router(config)#ip route 0.0.0.0 0.0.0.0 192.168.10.2

这两个命令都被证明是无用的。

请告诉我这里有什么问题......

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:46:15.473

您需要在两台设备上配置静态路由。试试这个配置：

在 192.168.10.1 ip 路由 192.168.30.0 255.255.255.0 192.168.10.2

在 192.168.10.2 ip 路由 192.168.20.0 255.255.255.0 192.168.10.1

另请注意，您不需要配置直连网络的路由。当您在其上配置 IP 地址和子网时，它应该添加一个连接的路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-21T21:04:30.927

首先，我同意 David Mokon Bond 的回答。您也可以将这种方式用于默认路由：在路由器 1 上：ip route 0.0.0.0 0.0.0.0 192.168.10.2 在路由器 0 上：ip route 0.0.0.0 0.0.0.0 192.168.10.1

# php - php 联系表单中的 UTF8 问题

> ID：10605241
> 
> 赞同：-1
> 
> 时间：2012-05-15T16:42:07.830
> 
> 标签：php, syntax-error

这是我的联系功能：

```
public static function contact_anon()
{
    $form = new Form('contact_anon');

    $form->field('email', 'text', array
    (
        'max_length'    =>  45,
        'valid_email'   =>  true
    ));

    $form->field('message', 'textarea', array
    (
        'max_length'    =>  400,
        'min_length'    =>  25
    ));

    if($data = $form->validate())
    {
        $envoi = array
        (
            'message'   =>  $data['message'],
            'email' =>  $data['email']
        );

        mail('mymail@gmail.com', lang('contact_anon'), lang('contact_anon_text', $envoi), 'From: noreply@'.$_SERVER['HTTP_HOST']);
    }

    return $form;
} 
```

然后我有另一个 php 文件，其中包含将要发送的内容文本 + 来自表单的消息：

```
<?php
fw::$lang = array_merge(fw::$lang, array
(   
'contact_anon_text'     =>  "You have been contacted :

    Message : {message}

    Mail : {email}"
)); 
```

表单运行良好，但`{message}`无法正确显示，例如：

```
j\'Ã©cris avec des accents pour voir si Ã§a marche. 
```

该网站有一个 UTF8 字符集，但我不了解 php，我尝试了以下内容：

```
'message'   =>  htmlentities((utf8_decode($data['message']), ENT_QUOTES), 
```

但它返回：

```
syntax error, unexpected T_CONSTANT_ENCAPSED_STRING, expecting '(' 
```

我知道有数百篇关于 UTF8 的帖子，我检查了它们，阅读了 php mnual 和 sql 手册，但由于我是初学者而不是说英语的人，所以无法理解。

即使数据库使用的是utf8_general_ci，我在向数据库发送文本字段时也遇到了同样的问题。所以我想这绝对是我的 php 代码的问题。我正在使用带有控制器的 MVC 脚本。为了部分解决 SQL 问题，我使用：

```
return mysql_real_escape_string($string);
    ....
db::escape($username) 
```

所以输出是正确的，但我更喜欢将 php 配置为使用 UT8 并允许使用法语口音等特殊字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:56:43.727

尝试使用编码 UTF-8 保存文件。如果您使用的是 Visual Studio，请转到 File、Save As、Save With Encoding 并选择 Unicode(UTF-8 without signature)。

# wcf - 为什么我的自托管 WCF 服务会使 IIS 脱机？

> ID：10605242
> 
> 赞同：0
> 
> 时间：2012-05-15T16:42:13.353
> 
> 标签：wcf, iis, port, tcpportsharing

您可能知道， IIS 6+ 可以与运行在不同进程中的其他 HTTP 应用程序[共享端口 80 。](https://stackoverflow.com/q/2067830/138757)

但是，我的自托管 WCF 服务似乎使 IIS 脱机。当 WCF 服务运行时，所有 HTTP 请求都会转到该服务。当我停止服务时，所有 HTTP 请求都转到 IIS。尽管这两个应用程序使用了非常独特的 URI 路径。这是怎么回事？我怎样才能让他们很好地一起玩？

编辑：我的 WCF 服务使用带有 HttpTransportBindingElement 的自定义绑定

对不起，如果这属于服务器故障。我不确定这是配置问题还是代码问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:30:24.610

经过更多的实验，我得出了一个结论。

看起来问题是当 WCF 服务的端点基地址与 IIS 的基地址相同时引起的。换句话说，如果端点存在于`http://localhost/`，它将接管并处理所有传入的 HTTP 请求。

因此，即使您的 WCF 子路径与 IIS 不同，基端点地址也必须不是`http://localhost/`.

# ios - 设置 UITableView 框架高度 - 显示的行数不正确

> ID：10605251
> 
> 赞同：0
> 
> 时间：2012-05-15T16:42:35.713
> 
> 标签：ios, uitableview

这是我用来设置表格视图高度的一些（简化的）测试代码：

```
tableView.frame = CGRectMake(tableView.frame.origin.x, 
                             tableView.frame.origin.y, 
                             tableView.frame.size.width, 
                             88); 
```

我的默认行高为 44 点。但是，该框架仅显示 1 行。如果将高度更改为 132，则会显示 2 行。

如果我使用 88 的高度，我希望看到 2 行。我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:30:23.183

因此，在摆弄了 tableView.frame 和 tableView contentSize 之后，它们都不起作用，解决方案只是丢弃 XIB 中的 tableview 并从代码中完成。

例如

```
 tView = [[UITableView alloc] initWithFrame:CGRectMake(10, 20, 200, 200) style:UITableViewStylePlain];
 tView.rowHeight = 40.0;
 tView.delegate = self;
 tView.dataSource = self;
 [self.view addSubview:tView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:08:43.923

使用喜欢-

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return 44.0;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 2;
} 
```

PS-假设您只需要两行高度为 44 的行，我已经对此进行了硬编码。如果您有分段表视图或任何其他自定义实现，您可以自定义它。

# php - 使用 Twig 模板时，有什么方法可以从数组中获取平均值？

> ID：10605253
> 
> 赞同：2
> 
> 时间：2012-05-15T16:42:39.020
> 
> 标签：php, arrays, symfony, twig, average

使用 Symfony2 时，有什么方法可以在 Twig 模板内获取值数组的平均值？我尝试了类似以下代码的方法，但它不起作用

```
{% set sumratings = 0 %}
{% set count = 0 %}
{% for rating in article.ratings %}
  {% set sumratings = sumratings + rating.value %}
{% endfor %}
AVG: {{  sumratings / article.ratings.count  }} 
```

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T18:55:56.710

我认为这应该这样做

```
{% set sumratings = 0 %}
{% for rating in article.ratings %}
  {% set sumratings = sumratings + rating.value %}
{% endfor %}
AVG: {{  sumratings / article.ratings|length }} 
```

假设`rating.value`是一个整数

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T18:56:37.787

没有内置的方法可以做到这一点。创建自己的树枝扩展可以做到这一点很简单！您需要创建一个过滤器，这在食谱中有很好的记载：[如何编写自定义 Twig 扩展](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-20T04:50:28.957

答案是正确的，但使用起来很糟糕，对吧？

这很简单：

```
 function arrayAverage($array)
    {
        if (!is_array($array)) return false;
        if (!count($array)) return 0;
        $avg=0;
        foreach ($array as $num) $avg+=$num;
        $avg/=count($array);
        return $avg;
    }

$twig->addFilter('arrayAverage', new Twig_Filter_Function('arrayAverage')); 
```

现在你可以在你的树枝模板中这样做：

```
{{ somearray | arrayAverage }}
{{ somearray | arrayAverage | number_format }} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-03T04:44:34.757

在现代 Twig 版本中，有一个[`reduce()`过滤器](https://twig.symfony.com/doc/2.x/filters/reduce.html)可以稍微简化这项工作：

```
{% set myValues = [1, 2, 3, 4, 5] %}
{% set average = (myValues | reduce((sum, val) => sum + val, 0)) / (myValues | length) %}

{{ average }} {# 3 #} 
```

看[这个小提琴](https://twigfiddle.com/yce4ri)！

# c# - 发现模棱两可的匹配，只需将 Infragistics XamMonthCalendar 放到 WPF 对话框中

> ID：10605255
> 
> 赞同：0
> 
> 时间：2012-05-15T16:42:44.553
> 
> 标签：c#, wpf, wpf-controls, infragistics

当我将控件放到表单上时，我得到了一个 AmbiguousMatchException。我怀疑这是因为它同时找到了控件的 WPF3 和 WPF4 版本，但我无法弄清楚它从哪里获得 WPF4 版本。

我的开发机器上确实安装了 WPF4 套件，但检查了 GAC 和所有引用的目录，但没有找到对 WPF4 版本的引用。

其他原因会导致此错误吗？关于如何深入研究这个问题的任何想法？提前致谢。

编辑 - 我从工具箱中删除了所有内容，它似乎可以工作，但是当我重新启动 Visual Studio 时，错误又回来了。我现在在项目、工具箱或 GAC 中没有对 WPF4 内容的引用，而且它仍在发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:31:08.167

当您有两个版本的程序集或依赖程序集时会发生错误。通过同时使用 WPF3 和 WPF4 程序集会发生这种情况，如果您有来自两个不同卷的 NetAdvantage 的引用，也会发生这种情况。

检查您的引用并验证您是否引用了 NetAdvantage 工具集中的所有 WPF3 或所有 WPF4 程序集，并验证版本也都是一致的。

您还可以检查工具箱中引用的版本，以确保它与项目中的引用相匹配。

# gwt - 使用 GWT-Maven 时如何为 GWT 编译器提供更多内存？

> ID：10605256
> 
> 赞同：6
> 
> 时间：2012-05-15T16:43:02.297
> 
> 标签：gwt, maven, gwt-compiler, gwt-maven-plugin

我们有一个运行 GWT 插件 (gwt-maven) 的 Maven 构建。不幸的是，它的内存不足。

我需要给 Maven 本身更多的堆还是需要给 GWT 更多的堆？知道如何为 pom.xml 文件指定这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:45:55.533

我认为[`extraJvmArgs`](http://mojo.codehaus.org/gwt-maven-plugin/compile-mojo.html#extraJvmArgs)应该配置选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T08:29:22.887

在 gwt-maven-plugin 的配置标签下添加 extraJvmArgs 标签。

例子 -

```
 <!-- GWT Maven Plugin -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <dependencies>
                <dependency>
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-user</artifactId>
                    <version>${gwtVersion}</version>
                </dependency>
                <dependency>
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-dev</artifactId>
                    <version>${gwtVersion}</version>
                </dependency>
                <dependency>
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-servlet</artifactId>
                    <version>${gwtVersion}</version>
                </dependency>
            </dependencies>
            <!-- JS is only needed in the package phase, this speeds up testing -->
            <executions>
                <execution>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
            <!-- Plugin configuration. There are many available options, see gwt-maven-plugin 
                documentation at codehaus.org -->
            <configuration>
                <runTarget>app.html</runTarget>
                <!-- Turning This on after understanding soyc and when deferredjs count is 48.cache.js -->
                <!-- https://developers.google.com/web-toolkit/articles/fragment_merging -->
                <fragmentCount>25</fragmentCount>
                -->
                <!-- Ask GWT to create the Story of Your Compile (SOYC) (gwt:compile) -->
                <!-- Turn This on for generating soyc. This does not work if closure compiler is turned on.-->
                <!-- Start Generating SOYC -->
                <compileReport>true</compileReport>
                <compilerMetrics>true</compilerMetrics>
                <soycDetailed>true</soycDetailed>
                <!-- End Generating SOYC -->
                <disableCastChecking>true</disableCastChecking>
                <disableClassMetadata>true</disableClassMetadata>
                <enableClosureCompiler>true</enableClosureCompiler>
                <optimizationLevel>9</optimizationLevel>
                <style>${gwt.style}</style>
                <module>${gwtModule}</module>
                <encoding>${project.build.sourceEncoding}</encoding>
                <strict>true</strict>
                <logLevel>INFO</logLevel>
                <copyWebapp>true</copyWebapp>
                <hostedWebapp>
                    ${project.build.directory}/${project.artifactId}
                </hostedWebapp>
                <extraJvmArgs>-Xmx896M -Xms896m -XX:PermSize=64m -XX:MaxPermSize=128m</extraJvmArgs>
                <!-- <extraJvmArgs>-Xmx896M -Xms896m -XX:PermSize=64m -XX:MaxPermSize=128m -XX:+UseConcMarkSweepGC -server</extraJvmArgs> -->
            </configuration>
        </plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T02:51:53.097

我在一个大型 GWT 项目中遇到了这个错误。内存不足时您可能会看到的错误是：

```
[ERROR] OutOfMemoryError: Increase heap size of lower gwt.jjs.maxThreads
java.lang.OutOfMemoryError: Java heap space 
```

该`extraJvmArgs`选项需要与`MAVEN_OPTS`环境变量一起设置（[这是一种可能的解释](https://groups.google.com/d/msg/gwt-maven/sPEzPuYVpb4/By29tdV-l5cJ)）。我还设置了 Java`-Dgwt.compiler.localWorkers=x`选项以减少并发编译线程的数量（我将 x 设置为 1，但您可以使用它来寻找可行的方法）。

有关您应该与 extraJvmArgs 选项一起使用的设置示例，请参阅这篇[文章](https://docs.jboss.org/author/display/RHQ/Advanced+Build+Notes#AdvancedBuildNotes-GWTCompilationMemoryRequirements)。

请注意，您可能需要直接将 extraJvmArgs 选项添加到插件元素配置中 - 请参阅[https://stackoverflow.com/a/5822929/157605](https://stackoverflow.com/a/5822929/157605)。

# sql - 如何显示每个部门的参与百分比？

> ID：10605262
> 
> 赞同：1
> 
> 时间：2012-05-15T16:43:24.100
> 
> 标签：sql, sql-server-2008-r2

我有以下数据库设计：

```
Employees Table: EmployeeID, Name, OrgCode
Departments Table: OrgCode, DepatName
CompleteSurvey Table: ID, ParticipantID 
```

我需要开发一个表格，显示每个部门的员工总数，以及每个部门完成调查的参与者总数。然后，我想显示每个部门的参与百分比，主要等于参与者总数/员工总数。

我提出了以下两个查询，但我必须提出一个显示上述要求的查询，**那么该怎么做呢？**

* * *

各部门员工总数：

```
SELECT COUNT(DISTINCT dbo.Employees.EmployeeID) AS [Total Number of Employees], 
       dbo.Departments.DepartmentName
FROM dbo.Departments 
INNER JOIN dbo.Employees ON dbo.Departments.OrgCode = dbo.Employees.OrgCode
GROUP BY dbo.Departments.DepartmentName 
```

* * *

各部门总人数：

```
 SELECT COUNT(DISTINCT dbo.Employees.EmployeeID) AS [Total Number of Employees], 
 dbo.Departments.DepartmentName
 FROM dbo.Departments 
 INNER JOIN dbo.Employees ON dbo.Departments.OrgCode = dbo.Employees.OrgCode 
 INNER JOIN dbo.CompleteSurvey ON dbo.Employees.EmployeeID = dbo.CompleteSurvey.RespondantID
 GROUP BY dbo.Departments.DepartmentName 
```

显示参与者的第二个查询的问题，即使没有参与者，它也不会显示所有部门，它应该显示零。

**更新：**

基本上，我想要的是有一个查询，显示每个部门的员工总数和每个部门完成调查的参与者总数，并显示参与百分比。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:10:05.633

你看起来像这样吗（使用表变量）

```
DECLARE @Employees Table(EmployeeID INT, Name VARCHAR(50), OrgCode VARCHAR(50) )  
DECLARE @Departments Table( OrgCode INT, DepartmentName  VARCHAR(50)     )
DECLARE @CompleteSurvey Table( ID INT, RespondantID INT) 

INSERT INTO  @Employees VALUES(12,'Emp 12', 1000),(13,'Emp 13', 1000),(112,'Emp 112', 2000),    (113,'Emp 114', 2000)
INSERT INTO @Departments VALUES(1000, 'dept 1000'),(2000, 'dept 2000')
,(3000, 'no employee dept 3000')
INSERT INTO @CompleteSurvey VALUES (901,12), (901,112),(902,13), (902,112)

SELECT COUNT(DISTINCT  EmployeeID) AS [Total Number of Employees],  D.DepartmentName FROM     @Departments D 
LEFT OUTER JOIN @Employees E
ON  D.OrgCode =  E.OrgCode GROUP BY  D.DepartmentName

SELECT D.DepartmentName,COUNT(DISTINCT E.EmployeeID) AS [Total Number of Employees], 
COUNT(DISTINCT S.RespondantID )AS completed_survey ,
CASE WHEN COUNT(DISTINCT E.EmployeeID)>0 THEN COUNT(DISTINCT S.RespondantID )/
CAST(COUNT(DISTINCT E.EmployeeID)AS FLOAT)*100 ELSE 0 END AS particPerc
FROM @Departments D LEFT OUTER JOIN @Employees E ON D.OrgCode = E.OrgCode 
LEFT OUTER JOIN @CompleteSurvey S ON E.EmployeeID =S.RespondantID GROUP BY D.DepartmentName 
```

输出：

```
 Total Number of Employees  DepartmentName
  2                       dept 1000
  2                       dept 2000
  0                       no employee dept 3000 
```

最后我认为你要的是什么

```
DepartmentName  Total Number of Employees   completed_survey   particPerc
dept 1000                  2                             2          100
dept 2000                  2                             1           50
no employee dept 3000        0                           0            0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T17:13:55.277

如果我正确理解 CompleteSurvey 在员工提交调查时填写了 EmployeeID，则此查询将检索您需要的信息。您可以查看[现场测试@Sql Fiddle](http://sqlfiddle.com/#!3/6aa97/4)。

```
select Departments.DepatName, 
       count (Employees.EmployeeID) Employees, 
       count (CompleteSurvey.ID) Finished,
       cast (count (CompleteSurvey.ID) as float) / count (Employees.EmployeeID)
            PercentageFinished
  from Departments
 inner join Employees 
    on Departments.OrgCode = Employees.OrgCode
  left join CompleteSurvey 
    on Employees.EmployeeID = CompleteSurvey.ParticipantID
 group by Departments.DepatName 
```

如果您需要所有部门，请使用以下查询：

```
select Departments.DepatName, 
       count (Employees.EmployeeID) Employees, 
       count (CompleteSurvey.ID) Finished,
       case when count (Employees.EmployeeID) <> 0
            then cast (count (CompleteSurvey.ID) as float) 
                     / count (Employees.EmployeeID)
            else 0
        end PercentageFinished
  from Departments
  left join Employees 
    on Departments.OrgCode = Employees.OrgCode
  left join CompleteSurvey 
    on Employees.EmployeeID = CompleteSurvey.ParticipantID
 group by Departments.DepatName 
```

新[测试@Sql Fiddle](http://sqlfiddle.com/#!3/f60af/2)。

# c# - 使用 CreateUserWizard 添加正则表达式验证器，它们不起作用

> ID：10605266
> 
> 赞同：1
> 
> 时间：2012-05-15T16:43:44.260
> 
> 标签：c#, asp.net, regex, createuserwizard

我在注册用户步骤中添加了一些正则表达式，它们正在工作，因为`*`正在显示“”，但向导仍然会让我创建一个带有正则表达式错误的帐户。

1.  我试图重做向导
2.  更改一些功能但没有

.

## 页面来源

```
<asp:CreateUserWizard ID="RegisterUser" runat="server" CssClass="gridviewUsers" 
        oncreateduser="RegisterUser_CreatedUser1">
        <WizardSteps>
            <asp:CreateUserWizardStep runat="server">
                <ContentTemplate>
                    <table>
                        <tr>
                            <td align="center" colspan="2">
                                Sign Up for Your New Account</td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">User Name:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="UserName" runat="server" 
                                    ToolTip="The Username that you will need to login later  eg &quot;john123&quot;"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="rv1_1" runat="server" 
                                    ControlToValidate="UserName" ErrorMessage="User Name is required." 
                                    ForeColor="Red" ToolTip="User Name is required." 
                                    ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                                <asp:RegularExpressionValidator ID="rv1_2" runat="server" 
                                    ControlToValidate="UserName" ErrorMessage="Not a valid Username" 
                                    ForeColor="Red" ValidationExpression="^[a-z0-9_-]{3,15}$" 
                                    ValidationGroup="CreateUserWizard1">*</asp:RegularExpressionValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="Password" runat="server" TextMode="Password" 
                                    ToolTip="The password for the selected username eg&quot;123456&quot;"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="rv2_1" runat="server" 
                                    ControlToValidate="Password" ErrorMessage="Password is required." 
                                    ForeColor="Red" ToolTip="Password is required." 
                                    ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                                <asp:RegularExpressionValidator ID="rv2_2" runat="server" 
                                    ControlToValidate="Password" 
                                    ErrorMessage="Invalid Password Please enter a valid password rg&quot;pass12&quot;" 
                                    ForeColor="Red" ValidationExpression="^[A-Za-z0-9]+$" 
                                    ValidationGroup="CreateUserWizard1">*</asp:RegularExpressionValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:Label ID="ConfirmPasswordLabel" runat="server" 
                                    AssociatedControlID="ConfirmPassword">Confirm Password:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="ConfirmPassword" runat="server" TextMode="Password" 
                                    ToolTip="Must enter the same password as above  to confirm password"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="rv3_1" runat="server" 
                                    ControlToValidate="ConfirmPassword" 
                                    ErrorMessage="Confirm Password is required." ForeColor="Red" 
                                    ToolTip="Confirm Password is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                                <asp:RegularExpressionValidator ID="rv3_2" runat="server" 
                                    ControlToValidate="ConfirmPassword" 
                                    ErrorMessage="Invalid Password Please enter a valid password rg&quot;pass12&quot;" 
                                    ForeColor="Red" ValidationExpression="^[A-Za-z0-9]+$" 
                                    ValidationGroup="CreateUserWizard1">*</asp:RegularExpressionValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:Label ID="EmailLabel" runat="server" AssociatedControlID="Email">E-mail:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="Email" runat="server" 
                                    ToolTip="The email on which we will use to contact you!"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="rv4_1" runat="server" ControlToValidate="Email" 
                                    ErrorMessage="E-mail is required." ForeColor="Red" 
                                    ToolTip="E-mail is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                                <asp:RegularExpressionValidator ID="rv4_2" runat="server" 
                                    ControlToValidate="Email" ErrorMessage="Email invalid format" ForeColor="Red" 
                                    ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" 
                                    ValidationGroup="CreateUserWizard1">*</asp:RegularExpressionValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                &nbsp;</td>
                            <td>
                                &nbsp;</td>
                        </tr>
                        <tr>
                            <td align="right">
                                &nbsp;</td>
                            <td>
                                &nbsp;</td>
                        </tr>
                        <tr>
                            <td align="center" colspan="2">
                                <asp:CompareValidator ID="PasswordCompare" runat="server" 
                                    ControlToCompare="Password" ControlToValidate="ConfirmPassword" 
                                    Display="Dynamic" 
                                    ErrorMessage="The Password and Confirmation Password must match." 
                                    ForeColor="Red" ValidationGroup="CreateUserWizard1"></asp:CompareValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="center" colspan="2" style="color:Red;">
                                <asp:Literal ID="ErrorMessage" runat="server" EnableViewState="False"></asp:Literal>
                                <asp:ValidationSummary ID="ValidationSummary1" runat="server" />
                            </td>
                        </tr>
                    </table>
                </ContentTemplate>
            </asp:CreateUserWizardStep>
            <asp:CompleteWizardStep runat="server" />
        </WizardSteps>
    </asp:CreateUserWizard> 
```

## .aspx 文件

```
 protected void RegisterUser_CreatedUser(object sender, EventArgs e)
        {
            if (CheckUsername() != true)
            {
                Roles.AddUserToRole(RegisterUser.UserName, "Pre-Member");
                FormsAuthentication.SetAuthCookie(RegisterUser.UserName, false /* createPersistentCookie */);

                string continueUrl = RegisterUser.ContinueDestinationPageUrl;

                if (String.IsNullOrEmpty(continueUrl))
                {
                    continueUrl = "~/Account/InsertingUserDetails.aspx";
                }
                Response.Redirect(continueUrl);
            }
            else
            {
                RegisterUser.UserNameRequiredErrorMessage = "User already taken";
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:51:58.703

假设您的 Create Use 向导如下所示

```
<asp:CreateUserWizard ID="CreateUserWizard1" runat="server" OnCreatedUser="CreateUserWizard1_CreatedUser"
    DisableCreatedUser="true" EmailRegularExpression="^((?:(?:(?:\w[\.\-\+]?)*)\w)+)\@((?:(?:(?:\w[\.\-\+]?){0,62})\w)+)\.(\w{2,4})$"
    Font-Size="Small">
    <CreateUserButtonStyle CssClass="button" />
    <ErrorMessageStyle Font-Size="Small" />
    <TextBoxStyle CssClass="textbox txtsingleline" />
    <ValidatorTextStyle Font-Size="Small" />
    <WizardSteps>
        <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server">
        </asp:CreateUserWizardStep>
        <asp:CompleteWizardStep ID="CompleteWizardStep1" runat="server">
        </asp:CompleteWizardStep>
    </WizardSteps>
</asp:CreateUserWizard> 
```

您可以按如下方式访问验证器：

```
(RequiredFieldValidator)((CreateUserWizardStep)CreateUserWizard1.FindControl("CreateUserWizardStep1")).ContentTemplateContainer.FindControl("UserNameRequired")
(RequiredFieldValidator)((CreateUserWizardStep)CreateUserWizard1.FindControl("CreateUserWizardStep1")).ContentTemplateContainer.FindControl("PasswordRequired")
(RequiredFieldValidator)((CreateUserWizardStep)CreateUserWizard1.FindControl("CreateUserWizardStep1")).ContentTemplateContainer.FindControl("ConfirmPasswordRequired")
(RequiredFieldValidator)((CreateUserWizardStep)CreateUserWizard1.FindControl("CreateUserWizardStep1")).ContentTemplateContainer.FindControl("EmailRequired")
(CompareValidator)((CreateUserWizardStep)CreateUserWizard1.FindControl("CreateUserWizardStep1")).ContentTemplateContainer.FindControl("PasswordCompare")
(RegularExpressionValidator)((CreateUserWizardStep)CreateUserWizard1.FindControl("CreateUserWizardStep1")).ContentTemplateContainer.FindControl("EmailRegExp") 
```

希望这有助于谢谢你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T09:47:32.443

为 ValidationGroup 使用正确的 ID。应该是“RegisterUser”而不是“CreateUserWizard1”

# symfony - 相关实体 id 的 symfony2 设置器

> ID：10605279
> 
> 赞同：1
> 
> 时间：2012-05-15T16:44:48.923
> 
> 标签：symfony, doctrine, doctrine-orm

我在实体中的关系：

```
 /**
 * @ORM\ManyToOne(targetEntity="Group")
 */
protected $group; 
```

现在我有一个`setGroup()`设置相关实体​​的setter方法，但是没有实体对象似乎没有方法`setGroupId()`可以设置。`group_id`怎么`group_id`直接设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-05T13:23:24.607

我建议你看看 Doctrine EntityManager ->getReference() 方法。

```
$user->setGroup($em->getReference('Group', 10)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:25:02.937

使用自定义[存储库](http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes)创建将获取组的特定方法，然后使用`setGroup`.

编辑：您甚至可以通过 SQL 查询直接添加/更新 id：[https](https://stackoverflow.com/a/10215061)
://stackoverflow.com/a/10215061 但这很脏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:51:55.527

尝试定义另一个字段（groupId）并将其直接映射到数据库中的字段。

# java - Activity 处于活动状态时的 Android 后台操作

> ID：10605281
> 
> 赞同：0
> 
> 时间：2012-05-15T16:45:04.597
> 
> 标签：java, android

所以这就是我的理论 - 在创建活动时创建后台线程时，使用活动引用的回调，如果活动关闭，由于回调的硬引用，它会留在内存中，对吗？那么如何确保后台操作在活动关闭时停止执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:51:07.223

那时有你的`Activity`工具`onStop()`并谋杀你的后台任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:20:46.400

当 Activity 完成时，android 将其所有视图引用设置为 null，然后将 Activity 引用设置为 null。此外，Android 假定 Activity 启动的线程可以毫无问题地被杀死。所以，线程**会**被杀死，但时间*没有*定义。在您的情况下，回调无关紧要，因为所有引用都将设置为 null。将没有人听回调。

自己杀死线程的最简单方法是将线程的代码执行保持在一个循环中。您可以在线程的每个循环上检查一个 volatile 布尔参数：

```
while (!threadStop) {
    // Do stuff
} 
```

在 onDestroy() 中，将此变量设为 true

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:11:47.990

你要`onStop()`还是`onDestroy()`？

离开 Activity，例如单击列表项或启动子活动将触发`onPause()`，然后`onStop()`当 Activity 完全不可见时。如果您关心内存，您应该考虑`onDestroy()`在后台操作中实现它和/或使用 Wea​​k/SoftReference 以防止泄漏。

# image - 使用 MATLAB 创建 GLCM 纹理图像

> ID：10605283
> 
> 赞同：1
> 
> 时间：2012-05-15T16:45:12.000
> 
> 标签：image, matlab, filter, feature-extraction, glcm

我对图像处理很陌生，我对使用过滤器（`graycoprops`）等 MATLAB 函数有疑问。

发生的问题是我想使用此功能（`graycoprops`）处理图像。为了能够做到这一点，我首先需要创建 GLCM ( `graycomatrix`)。

对整个图像执行此操作很容易，但我如何才能对像过滤器这样的小区域（例如 3x3）执行此操作。

我在想类似的东西`colfilt`可以工作，但我不知道如何每次获取块值并将它们提供给`graycomatrix`and `graycoprops`。

任何帮助将不胜感激，因为我有很多小时的堆栈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-24T09:32:20.170

## GLCM 代码

您可能对我在 GitHub 上为[带有滑动窗口的 GLCM 提供](https://github.com/palmerc/GLCM)的代码感兴趣。它将允许进行大量自定义，并且您可以操纵窗口大小。

# javascript - 什么可能导致 IE 7 中出现这个 javascript NaN？

> ID：10605286
> 
> 赞同：0
> 
> 时间：2012-05-15T16:45:12.963
> 
> 标签：javascript, jquery

我有一个函数可以检查用户是否在输入框中写了一个数字：

```
var letters = 'ABCÇDEFGHIJKLMNÑOPQRSTUVWXYZabcçdefghijklmnñopqrstuvwxyzàáÀÁéèÈÉíìÍÌïÏóòÓÒúùÚÙüÜ';
var numbers = '1234567890';
var signs = ',.:;@-\'';
var mathsigns = '+-=()*/';
var custom = '<>#$%&?¿';

function alpha(event) {
    var k;
    k = document.all ? parseInt(event.keyCode) : parseInt(event.which);
    return (numbers.indexOf(String.fromCharCode(k)) != -1);
} 
```

此函数与以下函数一起使用，该函数获取数字并将其发送到控制器，控制器将数字保存在数据库中。但只有当数字与原始数字不同时，那是首先在输入框中。它还会更新另一个输入框，其中包含与触发事件的输入框具有相同 row_id 属性的所有特定输入的总和：

```
function initializeUpdateNumberProcentMatrix() {

    $(".numberfield").live('keypress', alpha);

    //$(".numberfield").live('keypress', alpha(numbers));

        $('.numberfield').live('focus', function () {
            $(this).attr('oldvalue', $(this).val());
        });

        $('.numberfield').live('blur', function () {

            // Dette er den nuværende værdi i tekstboksen
            var value = $(this).val();
            var oldvalue = $(this).attr('oldvalue');

            // Reference til tekstboksen
            var obj = $(this);

            // Hvis værdien ikke har ændret sig, skal der ikke foretages noget (hvis man tabulerer)
            if (value == $(this).attr('oldvalue')) {
                return;
            }

            else {

                var dif = value - $(this).attr('oldvalue');
                var newval;

                $('.procentsumfield').each(function (index) {
                    if ($(this).attr('row-id') == obj.attr('row-id')) {

                        newval = (parseInt($(this).val()) + parseInt(dif));

                        // Hvis summen overstige 100, skal der ikke foretages nogle ændringer - Textboksens værdi skal tilbagestilles, og sumfeltet skal ikke odateres                
                        if (newval > 100) {
                            obj.val(oldvalue);
                            alert("Summen for det pågældende år må ikke overstige 100%");
                            return;
                        }
                        else {
                            $(this).val(newval);
                            return false;
                        }
                    }
                });

                var number = { Column_ID: $(this).attr('column-id'),
                    Row_ID: $(this).attr('row-id'),
                    Question_ID: $(this).attr('question-id'),
                    Value: $(this).val(),
                    Type: "Procent"
                };

                // Hvis den nye værdi overstiger 100, skal det ikke gemmes
                if (newval <= 100) {
                    saveNumberMatrix($(this), number, "/SaveSurveyAnswers/SaveProcentMatrix");
                }
            }
        });
    } 
```

问题是，有时 IE 7 在“procentsumfield”输入框中给了我一个 NaN，它不会保存新值，因为它不是数字。

什么可能导致这种情况发生？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:49:59.067

`NaN`是病毒/毒药。如果一个值`NaN`（几乎）是计算中的任何其他值，则可能是原因。在这种情况下：

*   `parseInt($(this).val())`可能会回来`NaN`
*   `parseInt(dif)`可能会返回`NaN`，可能是由
    *   `value`存在`NaN`，或
    *   `$(this).attr('oldvalue')`返回不能被强制转换为数字的东西
*   等等

* * *

（旁注：你为什么`parseInt()`ing `dif`？它已经是一个数字，或者`NaN`。此外，即使它是一个字符串，它`parseInt()`在循环内部也是愚蠢的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:59:07.610

```
var dif = value - $(this).attr('oldvalue'); 
```

`value`和都是`$(this).attr('oldvalue')`字符串。 ~~`-`仅适用于整数`string-string`，`NaN`~~ .

你需要`parseInt`在这些上使用。

```
var value = parseInt($(this).val(), 10);
var oldvalue = parseInt($(this).attr('oldvalue'), 10); 
```

请注意`,10`，这确保值是“base 10”。

编辑：如评论中所述，`NaN`来自`$(this).val()`空（`''`）。您可以像这样检查：

```
if($.trim($(this).val()) === '') 
```

或者：

```
var value = parseInt($(this).val(), 10);
if(isNaN(value)) 
```

您设置`oldvalue`但从不使用它，您应该使用它而不是每次都获取属性。

```
var dif = value - oldvalue; 
```

还要将此行更改`newval = (parseInt($(this).val()) + parseInt(dif));`为：

```
newval = parseInt($(this).val(), 10) + dif; 
```

`dif`已经是 int，不需要`parseInt`.

另一个注意事项：在 jQuery [event.which](http://api.jquery.com/category/events/event-object/)被规范化（并且应该是一个 int），所以你不需要“检查”它。

```
function alpha(event) {
    return (numbers.indexOf(String.fromCharCode(event.which)) != -1);
} 
```

# clojure - 匿名函数消耗另一个匿名函数 - clojure koan

> ID：10605291
> 
> 赞同：3
> 
> 时间：2012-05-15T16:45:33.590
> 
> 标签：clojure

我正在研究 clojure koans，函数中的一个问题需要进一步解释才能让我“明白”并有一个 aha 时刻。我能够编写满足问题的函数。但我不完全理解为什么所有的位都有效。

```
Clojure> (= 25 ((fn [a b] (b a)) 5 (fn [n] (* n n))))
true 
```

**问题 1.** 我不明白为什么这会引发错误：

```
Clojure> (= 25 ((fn [b a] (b a)) 5 (fn [n] (* n n))))
java.lang.ClassCastException: java.lang.Long cannot be cast to clojure.lang.IFn 
```

所以上面唯一的变化就是切换b和a的顺序。在我的大脑中，我读到“一个接受 a 和 b 的函数”或“b 和 a”，但如何使用它们取决于括号中的后续语句。为什么此时顺序很重要？

**问题2。**

```
Clojure> (= 25 ((fn [a] (5 a)) (fn [n] (* n n))))
java.lang.ClassCastException: java.lang.Long cannot be cast to clojure.lang.IFn 
```

为什么当我用 b 的值代替它所代表的 int 时会出现错误？

**问题 3。**

```
((fn [a b] (b a)) 5 (fn [n] (* n n)))) 
```

为什么这不会引发错误 (ba) 在这种情况下 b 是 5，它是一个符号。除非是列表，否则括号中的第一项应该是函数或特殊形式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T16:51:38.513

1.  在第一个函数中查看您的表达式：

    ```
    (b a) 
    ```

    因为`b`是第一个，`b`必须是一个函数。在第二个示例中，您尝试将 5 传递给`b`，但 5 不是函数。使用描述性名称，您可以看到您正在尝试使用 5 作为函数：

    ```
    ((fn [argument function] (argument function)) ;; problem!!
     5 
     (fn [n] (* n n))) 
    ```

    记住 lisps 的求值规则：给定这个 s 表达式：

    ```
    (f x y z) 
    ```

    计算 f、x、y 和 z，并将 f 作为函数应用于 x、y 和 z。

2.  请参阅对 1 的回答——“5”不是函数。使用描述性名称，轻松发现问题：

    ```
    ((fn [function] (5 function)) ;; problem!!
     (fn [n] (* n n))) 
    ```

    改成：

    ```
     ((fn [a] (a 5))  ;; 'a' and '5' flipped
        (fn [n] (* n n))) 
    ```

    让它运行。

3.  这不是问题： `a`是 5，`b`是`(b a)`. 使用描述性名称更有意义：

    ```
    ((fn [argument function] (function argument)) 
     5
     (fn [n] (* n n))) 
    ```

# url - 如何将 Stripes 中 Web 应用的根映射到 ActionBean

> ID：10605294
> 
> 赞同：1
> 
> 时间：2012-05-15T16:45:38.973
> 
> 标签：url, map, root, stripes, urlbinding

我正在为我的所有操作使用 DynamicMappingFilter 和带注释的 URL。

我正在尝试将“/”映射到现有的 actionBean。我想要“/”去的actionbean，当前绑定到“/categories”。

我找到了两种方法，但我想知道在性能方面是否有更好的方法。

我在顶部创建了一个带有 @UrlBinding("/") 的新 IndexActionBean。

在其中，我可以将 ForwardResolution 返回到 Categories 类，或者我可以复制粘贴类别类代码，因为我的非常简单。

```
@UrlBinding("/")
public class IndexActionBean  extends AbstractActionBean {
  @DefaultHandler
  public ForwardResolution view() {
    return new ForwardResolution(ShowCategoryActionBean.class);
  }
} 
```

它可以工作，但我不喜欢 ForwardResolution 的开销，特别是因为这是域的根页面，并且会获得大量的综合浏览量。

我尝试使用欢迎文件，但它不适用于 DynamicMappingFilter。它与 DispatcherServlet 一起工作，例如 category.action，但即便如此，我还是遇到了问题，只有 / 正在工作，并且 /category 和所有其他 url 停止工作并且找不到 404。

```
 <welcome-file-list>
    <welcome-file>category.action</welcome-file>
  </welcome-file-list> 
```

还有更好的方法吗？我不能只将/categories 的@UrlBinding 重命名为/，因为我仍然需要/categories，但我也希望/ 转发给它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:59:18.793

在您的`IndexActionBean`扩展中，`CategoriesBean`而不是`AbstractActionBean`：

```
@UrlBinding("/")
public class IndexActionBean  extends CategoriesBean {
} 
```

这样您就可以将两个 url 映射到同一个操作 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:13:00.057

用于`/index.jsp`转发您的操作。

# google-apps-script - 使用 Apps 脚本 GUI 构建器的问题

> ID：10605295
> 
> 赞同：0
> 
> 时间：2012-05-15T16:45:50.457
> 
> 标签：google-apps-script

所以我目前正在研究在电子表格中运行的项目结帐系统的 gui。它做了它应该做的一切，并且没有返回任何空值，通常我会对它的结果感到非常满意。

但是，每当我按下提交按钮时，我都会不断收到“遇到错误，发生意外错误”，之后其余代码按预期运行。每隔一段时间我就不会出错，但绝大多数时候它会抛出错误。

```
function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var menuEntries = [{name: "Equipment Checkout", functionName: "testing"}];
  ss.addMenu("Equipment Checkout", menuEntries);
}

function testing(){
  var app = UiApp.createApplication();
  app.add(app.loadComponent("ImprovedCheckout"));
  var doc = SpreadsheetApp.getActiveSpreadsheet();
  doc.show(app);
}

function submitted(e){
  Browser.msgBox(e.parameter.requestor);
} 
```

这是我的代码的最简单版本。我正在使用 gui 构建器来创建 gui，并且还使用它来制作事件处理程序。在过去的一个小时里，我一直把头撞在墙上，因为似乎错误发生在提交（e）的第一行之前，但直到我实际单击提交按钮才发生。它不会每次都发生，但在大多数情况下都会发生。

我想我正在错误地处理来自构建器的事件，但是关于该功能的信息还很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:01:33.180

当人们为同一个按钮设置两个处理程序时，我已经看到了这个错误。通常一个通过 GUI 编辑器，另一个通过代码。一个有效，另一个失败。这给人一种疯狂的印象，即它会引发错误但仍然有效。

但是既然你说这是你正在使用的确切代码。您是否在 GUI 构建器上设置了多个处理程序？我不知道是否可能，我从不使用 GUI 构建器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T17:37:55.667

弄清楚了！我没有使用提交按钮，而是将其更改为普通的旧按钮。看起来提交按钮正试图同时运行其他东西。

看起来提交按钮有一些额外的规则和要求，但目前，我只是使用普通按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T19:32:04.597

我运行您提供的代码没有问题。有两件事要提，这是关键：

1.  确保在代码中使用 HTML 名称为“requestor”的 ServerHandler 添加回调元素。
2.  添加回调元素时，请使用 GUI 编辑器中的 ID。名称！= ID

在本例中，Name 和 ID 都需要设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T11:16:16.697

使用 getElementbyId('id") 并且 ID 值错误时，我收到了同样的错误消息。脚本本身并没有真正停止，除了这个特定调用应该执行的操作之外，一切看起来都很正常（但这并不总是“显而易见的”）

# string - 根据perl中的输出屏幕调整行大小

> ID：10605296
> 
> 赞同：1
> 
> 时间：2012-05-15T16:45:52.157
> 
> 标签：string, perl, line

我在 perl 的屏幕上输出一些文本

但是，我想确保只有 1 行适合每个屏幕行，因此如果我更改屏幕，程序会自动调整其输出行大小。

有没有办法在没有用户交互的情况下自动完成？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:45:18.643

```
perl -MTerm::ReadKey -E '($cols,$rows) = GetTerminalSize(); say "This screen has $rows rows and $cols columns."' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:06:57.910

在 Unix/Linux 上，您应该能够使用 Term 系列模块来获取当前屏幕尺寸。您甚至可以将 SIGWINCH 与它挂钩，并通过调整输出来响应终端窗口调整大小事件。

[http://search.cpan.org/modlist/User_Interfaces/Term](http://search.cpan.org/modlist/User_Interfaces/Term)

# drupal - 如何使用 cron 作业创建一些特定内容

> ID：10605300
> 
> 赞同：-1
> 
> 时间：2012-05-15T16:46:08.007
> 
> 标签：drupal, cron, drupal-7

我需要每 15 天创建一个特定内容，例如一个页面。

当然，这涉及到一些 cron 工作。

但我该怎么做呢？我需要在我的地方实施[hook_cron](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_cron/7)`.module`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T17:31:06.103

是的，hook_cron。您必须使用某些条件来防止在每次 cron 运行时发生这种情况。日期验证或类似的东西。

前任：

```
function mymodule_cron() {
// Remember to add conditions.
 $node = new stdClass();
 $node->type = 'article';
 node_object_prepare($node); //important!
 $node->title    = 'Auto-node ' . date('c');
 node_save($node);
// You can optionally save some variable in the database to check the last execution time/date using variable_set()
} 
```

hook_cron()、node_save()、variable_set()/get 都记录在 api.drupal.org 中，所以我不会过多地解释它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T05:33:34.940

或者你可以让[调度](http://dgo.to/scheduler)器模块处理，嗯，调度发布的工作，所以你的模块所要做的就是创建这个内容。

# cordova - 拍照时应用程序崩溃

> ID：10605302
> 
> 赞同：1
> 
> 时间：2012-05-15T16:46:15.447
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

1.) 我的应用程序因以下错误消息而崩溃；

```
Multi-tasking -> Device: YES, App: YES
2012-05-15 22:14:04.401 ProOne[1720:607] Received memory warning. Level=1
2012-05-15 22:14:08.556 ProOne[1720:607] -[__NSArrayM pickerController]: unrecognized selector sent to instance 0x1e7e90
2012-05-15 22:14:08.758 ProOne[1720:607] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM pickerController]: unrecognized selector sent to instance 0x1e7e90' 
```

这是代码

```
onImageClick: function () {
           navigator.camera.getPicture(onSuccess, onFail, { quality: 50,
                                       destinationType: Camera.DestinationType.DATA_URL,
                                       sourceType : Camera.PictureSourceType.CAMERA, 
                                       allowEdit : false, 
                                       encodingType: Camera.EncodingType.JPEG, 
                                       targetWidth: 500, 
                                       targetHeight: 500 
                                       }); 

           function onSuccess(imageData) {
           var image = Ext.getCmp('myImageId');
           image.setSrc("data:image/jpeg;base64," + imageData);
           }

           function onFail(message) {
           alert('Failed because: ' + message);

           }
           } 
```

2.) 我如何显示在 a 中拍摄的图像`View`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:08:48.900

My first idea would be to lower the quality parameters to 25, event though I think and iPhone 4 has enough memory to handle 50.

Also, could you try to use FILE_URI instead of DATA_URL and see if it works.

Hope this helps

# bash - Bash - 如何获取当前文件夹中的文件夹名称？

> ID：10605304
> 
> 赞同：4
> 
> 时间：2012-05-15T16:46:19.010
> 
> 标签：bash, shell, directory

假设我的脚本在一个文件夹中运行，并且在这个文件夹中是另一个文件夹，其名称可以在我每次运行脚本时更改。如何找到该文件夹​​的名称？

**编辑**：

例如，假设我的脚本在文件夹中运行，该文件夹`/testfolder`是已知的并且不会更改。

还有`/testfolder`另一个文件夹 : `/testfolder/randomfolder`，它是未知的并且可以更改。

我如何找到 的名称`/randomfolder`？

我希望它更清楚，抱歉造成混乱。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T17:41:50.367

```
dirs=(/testfolder/*/) 
```

`dirs`将是一个数组，其中包含作为 . 的直接子目录的每个目录的名称`/testfolder`。

如果只有一个，您可以像这样访问它：

```
echo "$dirs" 
```

或者

```
echo "${dirs[0]}" 
```

如果有多个并且您想遍历它们：

```
for dir in "${dirs[@]}"
do
    echo "$dir"
done 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T17:21:52.103

假设只有一个子目录：

```
dir=$(find . -mindepth 1 -maxdepth 1 -type d) 
```

如果你没有 GNU find，那么

```
for f in *; do [[ -d "$f" ]] && { dir=$f; break; }; done 
```

# wcf - 在 LAN 中部署/发布 Silverlight 应用程序

> ID：10605306
> 
> 赞同：1
> 
> 时间：2012-05-15T16:46:29.183
> 
> 标签：wcf, silverlight, entity-framework, deployment, publish

我使用**SilverLight5.0 + Entity Framework + WCF + VisualStudio 2010**和**.NET 4.0开发了一个****简单的数据库应用程序**构建。

 ****数据库和应用程序位于我的**个人 PC 中（连接在 LAN 中）。**

现在我要求这个应用程序应该可以通过局域网中的任何计算机访问。

局域网中的任何计算机都可以通过我开发的应用程序**插入、更新或删除**位于我**个人 PC中的****数据库**中的数据，我必须遵循的简单步骤......请帮助我......

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T18:34:42.977

好吧，您只是在问如何托管您的 WCF 服务，网上有大量材料或任何像样的 WCF 书籍。您有多种选择，从简单的自托管、Windows 服务或 IIS。以上述任何一种方式托管 WCF 服务一点也不复杂。值得一提的是，由于您在 LAN 上，因此您应该认真考虑，`netTcpBinding`因为它比其他绑定具有可观的性能提升，并且您无需担心打开特定端口，因为您在 LAN 上。

例如，您可以在 IIS 的 8085 端口上在 LAN 中托管服务，主机具有本地 IP，例如`192.68.1.51`，现在网络中的计算机（在 LAN 上，例如 192.168.6/.7.9/等）可以通过在本地引用服务来使用服务，例如：

`http://192.168.1.51:8085/MyService/TheService.svc`

现在，在 IIS 中托管并拥有静态 IP（公共 IP）的好处是您还可以通过 Internet 使用该服务，因此 LAN 外部的计算机可以使用这样的地址使用该服务（如果您的公共 IP 是 22.175.例如 194.56）：

`http://22.175.194.56:8085/MyService/TheService.svc`

为此，您只需在 LAN 路由器上创建一条规则，将通过端口 8085 的流量转发到服务主机的本地 IP (192.168.1.51)，这可以在 NAT 下的路由器虚拟服务器上的某处进行配置.

显然，如果主机的 IP 发生变化，您需要将新的 IP 地址引用到本地和外部客户端，但静态 IP 的意义在于它永远不会改变，这正是目的。******

# c++ - 防止在子弹物理中应用脉冲的碰撞

> ID：10605313
> 
> 赞同：3
> 
> 时间：2012-05-15T16:46:41.340
> 
> 标签：c++, bulletphysics

我正在使用 Bullet 和 Ogre 开发第三人称射击游戏。当角色模型与世界上的一个对象（例如一个加电装置）发生碰撞时，碰撞会对角色施加一个力并导致它们旋转。如何防止碰撞对角色施加力？

我为 btDynamicsWorld::setInternalTickCallback 设置了一个方法，所以我知道哪些物体正在碰撞以及 btManifoldPoint。

请注意，我将扭矩应用到身体上以便顺利旋转它们，所以我不能简单地阻止旋转。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:20:31.883

我不熟悉你提到的物理引擎，但我对真正的物理知道一两件事......

基本上，如果您绘制代表力的自由体图和箭头，您可以确定净效应。或者，如果您知道所需的净效果，您可以确定需要在哪里增加或移除力。

您可以在撞击时添加相等且相反的力/扭矩。这将使您的对象上的净力为零。

或者，您可以采用导致力的元素并使它们无质量。力=质量*加速度。如果质量为零并且您的物理引擎基于现实世界的物理，那么它不应该在碰撞时产生任何净力。

希望有帮助。

# ios - ios UITableView -> UITableViewCellSeparatorStyleNone 将一行一像素高度留空

> ID：10605315
> 
> 赞同：7
> 
> 时间：2012-05-15T16:46:48.107
> 
> 标签：ios, uitableview, separator

我想省略两个表格视图单元格之间的分隔线。但是，我得到的不是没有分隔符，而是一条高度为 1 像素的分隔线，它只是留空，或者说完全透明。

如何告诉 uitableview 如何将下一个单元格直接附加到上面的单元格（没有任何间隙）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T17:24:03.990

好的，找到我的答案并分享它，以防它帮助他人。

我按程序设置了所有单元格，因此我通过以下方式关闭了分隔符

`m_tableView setSeparatorColor:[UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.0f]]`

接下来我通过设置分隔符样式

```
m_tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

虽然我不得不承认这似乎没有做任何事情，这可能是一个红人。

对我来说，我发现调用了 cellForRowAtIndexPath 来配置单元格，我必须将背景图像的高度扩展 1 个像素以消除线条（我也为此使用了可拉伸的图像，这也可能使自己变得奇怪+1 要求）。我不是任意 +1 的粉丝，但这似乎可以解决问题......

```
frameBackground.size.height += 1; 
```

因此，虽然不支持 +1，但上述步骤对我的列表视图有效，现在不再有分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T23:57:32.303

我无法摆脱分隔符，所以我最终决定在 UIScrollView 之上编写自己的 tableview。而“分隔符”还在！事实证明，UILabel 中存在一个错误，如果您设置背景颜色，有时会导致它沿顶部边缘绘制一条细线。修复方法是在图层上设置背景： label.layer.backgroundColor = color.CGColor;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T10:38:32.110

我发现我的标题设置为 1，删除了这个解决了我的问题（我在奇数单元格分隔符中有额外的 1 个像素）我更改为 0，生活似乎更好

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    return 0;
} 
```

# javascript - Card Board 的 filterBoard() 函数是什么？

> ID：10605321
> 
> 赞同：1
> 
> 时间：2012-05-15T16:47:15.563
> 
> 标签：javascript, rally

似乎卡片板有一个未记录的 filterBoard() 函数。我不知道它到底做了什么，除了命名法，或者它需要什么参数。有没有人遇到过这个/使用过这个功能，并且可以提供一些启示？

这是我简单地运行“cardBoard.filterBoard”时返回的 javascript：

```
function (_c11) {
    _b85.filterBy = _c11;
    if (_c11 && _c11.field !== undefined && _c11.value !== undefined) {
        rally.forEach(_b7f, function (_c12) {
            rally.forEach(_c12.getDndSource().getItems(), function (item) {
                var node = _c12.getDndSource().getNode(item.ObjectID);
                if (node) {
                    var _c13 = that.getCardRenderer(_c12, item);
                    if (dojo.isFunction(_c13.updateCard)) {
                        _c13.updateCard(node);
                    } else {
                        _c12.getDndSource().refreshItem(item, item);
                    }
                }
            });
        });
    }
    if (dojo.query(".filterByShow").length === 0 && _c11 && _c11.value) {
        _b9f("The selected value, " + _c11.value + ", is not assigned to " + _c11.field + " for any of the displayed cards.");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:58:18.423

如果您在 sdk.js 脚本中包含 ?debug=true ，您可以获得未压缩版本的代码，以使其更易于阅读...

添加该方法是为了支持过滤板（根据某些标准导致某些卡淡出，而其他卡则更加突出）。看板将它与标签下拉列表结合使用。

如果您希望实际更改板上的数据（重新查询服务器），您应该在传递的配置中使用更新的查询调用 refresh() 方法。

# php - varchar 和 int mysql 数据类型的默认值

> ID：10605327
> 
> 赞同：9
> 
> 时间：2012-05-15T16:47:42.370
> 
> 标签：php, mysql, phpmyadmin, default, sqldatatypes

屏幕截图显示了 3 个典型的数据类型定义：id（自动增量）、标题和数字。

`none`1.-和之间有哪些区别`NULL`？
2.-`as defined: ''`当我想要一个空字符串时，我必须选择 varchar 类型吗？
3.- 我必须`as defined: 0`为自动增量 int 类型设置一个默认值吗？

![在此处输入图像描述](../Images/9888d440100fc919442e57418c960126.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T16:57:33.367

默认无表示没有默认值。如果插入时未提供值，则查询将失败并出现“无默认值错误”。

NULL 是实际的 NULL 值，这意味着如果在插入时未提供任何值，则该列将默认为 NULL（空）。对于 varchar，您可以将默认值设置为 ''，但 NULL 更好。

Autoincrement int 类型不应该有默认值（默认值：None），因为它总是有一个值。

# asp.net - 我是否必须手动将 asp.net 4 电子邮件中的信息输入 MS 数据库？

> ID：10605331
> 
> 赞同：2
> 
> 时间：2012-05-15T16:47:48.463
> 
> 标签：asp.net, database, ms-access

我有一个表单电子邮件，asp.net 4.0 / VB / Visual Studio，我希望它自动进入 Microsoft Access DB，而不需要我做任何努力。这可能吗？我不是程序员，但这是电子邮件的形式：

> ```
> <script runat="server">
>     Protected Sub SubmitForm_Click(ByVal sender As Object, ByVal e As System.EventArgs)
>         If Not Page.IsValid Then Exit Sub
> 
>         Dim SendResultsTo As String = "me@domain.com"
>         Dim smtpMailServer As String = "smtp.domain.com"
>         Dim smtpUsername As String = "me@domain.com"
>         Dim smtpPassword As String = "******"
>         Dim MailSubject As String = "Form Results"
> 
>         Try
>             Dim txtQ As TextBox = Me.FormContent.FindControl("TextBoxQ")
>             If txtQ IsNot Nothing Then
>                 Dim ans As String = ViewState("hf1")
>                 If ans.ToLower <> txtQ.Text.ToLower Or ans.ToUpper <> txtQ.Text.ToUpper Then
>                     Me.YourForm.ActiveViewIndex = 3
>                     Exit Sub
>                 End If
>             End If
> 
>             Dim FromEmail As String = SendResultsTo
>             Dim msgBody As StringBuilder = New StringBuilder()
>             Dim sendCC As Boolean = False
> 
>             For Each c As Control In Me.FormContent.Controls
>                 Select Case c.GetType.ToString
>                     Case "System.Web.UI.WebControls.TextBox"
>                         Dim txt As TextBox = CType(c, TextBox)
>                         If txt.ID.ToLower <> "textboxq" Then
>                             msgBody.Append(txt.ID & ": " & txt.Text & vbCrLf & vbCrLf)
>                         End If
>                         If txt.ID.ToLower = "email" Then
>                             FromEmail = txt.Text
>                         End If
>                         If txt.ID.ToLower = "subject" Then
>                             MailSubject = txt.Text
>                         End If
>                     Case "System.Web.UI.WebControls.CheckBox"
>                         Dim chk As CheckBox = CType(c, CheckBox)
>                         If chk.ID.ToLower = "checkboxcc" Then
>                             If chk.Checked Then sendCC = True
>                         Else
>                             msgBody.Append(chk.ID & ": " & chk.Checked & vbCrLf & vbCrLf)
>                         End If
> 
>                     Case "System.Web.UI.WebControls.RadioButton"
>                         Dim rad As RadioButton = CType(c, RadioButton)
>                         msgBody.Append(rad.ID & ": " & rad.Checked & vbCrLf & vbCrLf)
>                     Case "System.Web.UI.WebControls.DropDownList"
>                         Dim ddl As DropDownList = CType(c, DropDownList)
>                         msgBody.Append(ddl.ID & ": " & ddl.SelectedValue & vbCrLf & vbCrLf)
>                 End Select
>             Next
>             msgBody.AppendLine()
> 
>             msgBody.Append("Browser: " & Request.UserAgent & vbCrLf & vbCrLf)
>             msgBody.Append("IP Address: " & Request.UserHostAddress & vbCrLf & vbCrLf)
>             msgBody.Append("Server Date & Time: " & DateTime.Now & vbCrLf & vbCrLf)
> 
>             Dim myMessage As System.Net.Mail.MailMessage = New System.Net.Mail.MailMessage()
>             myMessage.To.Add(SendResultsTo)
>             myMessage.From = New System.Net.Mail.MailAddress(FromEmail)
>             myMessage.Subject = MailSubject
>             myMessage.Body = msgBody.ToString
>             myMessage.IsBodyHtml = False
>             If sendCC Then myMessage.CC.Add(FromEmail)
> 
>             Dim basicAuthenticationInfo As New System.Net.NetworkCredential(smtpUsername, smtpPassword)
>             Dim MailObj As New System.Net.Mail.SmtpClient(smtpMailServer)
>             MailObj.Credentials = basicAuthenticationInfo
>             MailObj.Send(myMessage)
> 
>             Me.YourForm.ActiveViewIndex = 1
>         Catch
>             Me.YourForm.ActiveViewIndex = 2
>         End Try
>     End Sub
> 
>     Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)
>         If Not Page.IsPostBack Then
>             Dim lbl As Label = Me.FormContent.FindControl("labelq")
>             If lbl IsNot Nothing Then
>                 Dim rq(3) As String
>                 rq(0) = "Is fire hot or cold?"
>                 rq(1) = "Is ice hot or cold?"
>                 rq(2) = "Is water wet or dry?"
> 
>                 Dim ra(3) As String
>                 ra(0) = "hot"
>                 ra(1) = "cold"
>                 ra(2) = "wet"
> 
>                 Dim rnd As New Random
>                 Dim rn As Integer = rnd.Next(0, 3)
>                 lbl.Text = rq(rn)
>                 ViewState("hf1") = ra(rn)
>             End If
>         End If
>     End Sub
> </script> </asp:Content> <asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server"> <h1>CONTACT HEALTH 
> ```
> 
> 在自己舒适的家中疯狂工作！
> 
> 输入您的电子邮件地址：
> * 必填 * 请输入有效的电子邮件地址。
> 
> 主题：
> * 必填
> 
> 请在下面输入您的信息： * 必填
> 
> 名字：
> * 必填
> 
> 姓氏：
> * 必填
> 
> 电话号码：
> * 必填 * 请输入有效的美国电话号码（包括破折号）。
> 
> 城市：
> * 要求的
> 
> 州/省：
> * 必填
> 
> 您的信息已发送。感谢您与我们联系。
> 由于技术困难，您的消息可能尚未发送。您没有正确回答反垃圾邮件问题。请返回重试。

当有人填写表格时，我会收到这样一封电子邮件：

> 电子邮件：rmajeski@yahoo.com
> 
> 主题：我需要一份工作
> 
> 消息：我今天想要工作，好吗？谢谢你的工作
> 
> 名字：富
> 
> 姓氏： Majeski
> 
> 电话：xxx-xxx-xxxx
> 
> 城市： 曲棍球镇
> 
> 州：密歇根
> 
> 浏览器：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0
> 
> IP地址：108.224.49.14
> 
> 服务器日期和时间：5/15/2012 6:03:33 AM

我怎样才能让它自动进入 Microsoft Access DB，而无需我手动完成？任何指导将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:42:59.910

您可以阅读有关 Office 插件编程的教程。一种方法是让此加载项查看 Outlook 中的每封传入电子邮件并将字段解析为相应的变量。之后，您可以创建与 MS Access 数据库文件的数据库连接，以使用 SQL-Insert DML 语句插入数据。我认为这对你来说是最简单的方法，因为编程不需要太多的代码行。但是 MS Outlook 必须运行！

最好的方法当然是在 ASP.NET 中异步创建数据库连接（使用 ODBC）。网上应该有很多教程。

# javascript - 在 Firefox 扩展的后台处理繁重的操作

> ID：10605332
> 
> 赞同：0
> 
> 时间：2012-05-15T16:47:48.873
> 
> 标签：javascript, firefox-addon, xul

我正在开发一个 Firefox 扩展程序，该扩展程序从浏览器的当前选项卡中获取 html 内容。大部分处理发生在 popup.js 文件中，该文件嵌入在单击扩展的工具栏图标时显示的弹出 UI 中。因此，扩展的性能会受到影响，有时我会在捕获时看到一个旋转的轮子。有没有办法可以将此处理移至后台？单击捕获按钮时，我正在使用 loadFrameScript api 加载脚本。

Firefox 扩展中是否有诸如 chrome 和 Safari 之类的背景页面之类的东西？如果没有，请提出一种优化方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:37:32.920

使用[Web Worker](https://developer.mozilla.org/En/Using_web_workers)，如果有某种原因你不能那么你能解释一下吗？

# wcf - Azure / WCF 诊断似乎不起作用，现在我已经研究它太久了。怎么了？

> ID：10605335
> 
> 赞同：0
> 
> 时间：2012-05-15T16:48:04.637
> 
> 标签：wcf, azure, system.diagnostics

我有一个非常简单的 WCF 服务设置为在 Azure Web 角色中运行。它工作不正常（预期），但我需要收集跟踪诊断以成功调试。有人可以确定我哪里出错了吗？

这是我的 web 角色的 web.config：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
  </configSections>
  <!--  To collect diagnostic traces, uncomment the section below or merge with existing system.diagnostics section.
        To persist the traces to storage, update the DiagnosticsConnectionString setting with your storage credentials.
        To avoid performance degradation, remember to disable tracing on production deployments. -->
  <system.diagnostics>
    <sources>
      <source propagateActivity="true" name="System.ServiceModel" switchValue="Verbose,ActivityTracing">
        <listeners>
          <add name="AzureLocalStorage">
            <filter type="" />
          </add>
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging" switchValue="Verbose">
        <listeners>
          <add name="AzureLocalStorage">
            <filter type="" />
          </add>
        </listeners>
      </source>
    </sources>
    <trace>
        <listeners>
            <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        name="AzureDiagnostics">
                <filter type="" />
            </add>
        </listeners>
    </trace>
    <sharedListeners>
        <add name="AzureLocalStorage" type="MyApp.Svc.AzureLocalStorageTraceListener, MyApp.Svc" />
    </sharedListeners>
  </system.diagnostics>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <customErrors mode="Off" />
  </system.web>
  <system.serviceModel>
    <diagnostics>
      <messageLogging logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" />
      <endToEndTracing activityTracing="true" messageFlowTracing="true" />
    </diagnostics>
    <services>
      <service name="MyApp.Svc.Tracker">
        <endpoint address="" behaviorConfiguration="restJsonBehavior"
          binding="webHttpBinding" bindingConfiguration="" name="restEndpoint"
          contract="Cogent.TimeTracker.Azure.Svc.ITracker" />
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="restJsonBehavior">
          <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Json" />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <rewrite>
        <rules>
            <rule name="TrackerService" stopProcessing="true">
                <match url="^tracker/(.*)$"/>
                <action type="Rewrite" url="Tracker.svc/{R:1}"/>
            </rule>
        </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

我只是一直盯着这个，心想：“我找不到任何问题！”。这是我的 ServiceDefinition.csdef：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="MyApp" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition">
  <WebRole name="MyApp.Svc" vmsize="Small">
    <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="http" port="80" />
    </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
      <Import moduleName="Connect" />
    </Imports>
    <LocalResources>
      <LocalStorage name="MyApp.Svc.svclog" sizeInMB="1000" cleanOnRoleRecycle="true" />
    </LocalResources>
    <Startup>
      <Task commandLine="installStuff.cmd" executionContext="elevated">
        <Environment>
          <Variable name="EMULATED">
            <RoleInstanceValue xpath="/RoleEnvironment/Deployment/@emulated" />
          </Variable>
        </Environment>
      </Task>
    </Startup>
  </WebRole>
</ServiceDefinition> 
```

最后，我的 ServiceConfiguration.Cloud.cscfg：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceConfiguration serviceName="MyApp" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceConfiguration" osFamily="1" osVersion="*">
  <Role name="MyApp.Svc">
    <Instances count="1" />
    <ConfigurationSettings>
      <Setting name="Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString" value="DefaultEndpointsProtocol=https;AccountName=myaccountname;AccountKey=myaccountkey" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Connect.ActivationToken" value="myactivationtoken" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Connect.Refresh" value="" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Connect.WaitForConnectivity" value="" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Connect.Upgrade" value="" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Connect.EnableDomainJoin" value="" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Connect.DomainFQDN" value="" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Connect.DomainControllerFQDN" value="" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Connect.DomainAccountName" value="" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Connect.DomainPassword" value="" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Connect.DomainOU" value="" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Connect.Administrators" value="" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Connect.DomainSiteName" value="" />
    </ConfigurationSettings>
  </Role>
</ServiceConfiguration> 
```

**更新**：还有我的 WebRole.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.WindowsAzure;
using Microsoft.WindowsAzure.Diagnostics;
using Microsoft.WindowsAzure.ServiceRuntime;
using System.Diagnostics;

namespace MyApp.Svc
{
    public class WebRole : RoleEntryPoint
    {
        public override bool OnStart()
        {
            // To enable the AzureLocalStorageTraceListner, uncomment relevent section in the web.config  
            DiagnosticMonitorConfiguration diagnosticConfig = DiagnosticMonitor.GetDefaultInitialConfiguration();
            diagnosticConfig.Directories.ScheduledTransferPeriod = TimeSpan.FromMinutes(1);
            diagnosticConfig.Directories.DataSources.Add(AzureLocalStorageTraceListener.GetLogDirectory());
            DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", diagnosticConfig);
            // For information on handling configuration changes
            // see the MSDN topic at http://go.microsoft.com/fwlink/?LinkId=166357.

            Trace.WriteLine("MyApp.Svc started", "Information");
            return base.OnStart();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:20:03.327

似乎我们无法在配置中发现任何重大问题。但请确保您使用的是正确的类型：

type="MyApp.Svc.AzureLocalStorageTraceListener, MyApp.Svc"

检查是否正确。实际上你也可以删除类型。我建议您查看[http://blogs.msdn.com/b/myazureworld/archive/2011/07/20/wcf-tracing-in-windows-azure-sdk-1-3-or-higher。 aspx](http://blogs.msdn.com/b/myazureworld/archive/2011/07/20/wcf-tracing-in-windows-azure-sdk-1-3-or-higher.aspx)为示例。

如果还是不行，请尝试使用远程桌面连接服务器，查看本地存储是否有痕迹。

最好的祝福，

明旭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T02:36:05.797

实际上，我认为这个配置工作正常，我只是没有足够的耐心让 DiagnosticMonitor 写入 blob。

# c - 将长十六进制字符串转换为十进制字符串

> ID：10605342
> 
> 赞同：1
> 
> 时间：2012-05-15T16:48:28.090
> 
> 标签：c, string, numbers

我需要想办法在标准 C 中执行以下操作。假设我们得到一个字符串，表示一个十六进制数字，比如 n 位。我们希望将其转换为以十进制表示相同数字的字符串。字符串可以有任意位数。至少很容易推断出十进制字符串需要 <= 2n 个字母。

一旦我们达到机器可以处理的数字的大小限制，那么字符串的长度就变得无关紧要了，所以一个 100 位的十六进制数字应该和一个 1000 位的数字一样容易/难以转换，即相同的算法应该两者都工作，因为它必须分块工作。

这里有人想过这个吗？真正令人讨厌的是 2 的大幂次的非零数字一直到一阶，所以十六进制序列中的任何元素都会影响十进制的最后一位数字......

我只能找到有人希望将字符串转换为数字或将数字转换为某个基数的字符串的问题。如果有人想知道我为什么需要这个。我在玩任意精度的数字，存储数字的最经济的格式是以 256 为基数，所以我需要打印以这种形式（或等效的任何十六进制）给出的数字。

编辑：所以我实现了一个转换功能，如果其他人可能需要它，我会在这里分享。这是非常快速的一个肮脏的，更好的实现当然会从用动态分配的东西替换结构中的数字缓冲区开始。由于所有算术都发生在“add”函数中，因此如果加法溢出，则很容易将此缓冲区重新分配到更大的位置。输出缓冲区大小总是很容易分配，因为任何十六进制数都转换为小于或等于两倍数字的十进制数。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAXLEN 1000

struct number {
    unsigned char digits[MAXLEN];
    unsigned int num_digits;
};

int add(struct number *, struct number *, struct number *);
int mult(struct number *, struct number *, struct number *);
int power(struct number *, unsigned int, struct number *);
void print_number(struct number *, char *);
void dec(struct number *);

void hex2dec(char *hex, char *outbuf)
{
    int n;
    char *s;
    struct number decrep;
    struct number twopow;
    struct number digit;

    decrep.num_digits = 0;

    n = strlen(hex);
    s = hex;

    while(--n > -1) {
        /* weight of digit */
        twopow.num_digits = 2;
        twopow.digits[0] = 6;
        twopow.digits[1] = 1;
        power(&twopow, n, &twopow);

        /* Extract digit */
        if(*s <= '9' && *s >= '0') {
            digit.digits[0] = *s - '0';
            digit.num_digits = 1;
        } else if(*s <= 'f' && *s >= 'a') {
            digit.digits[0] = *s - 'a';
            digit.digits[1] = 1;
            digit.num_digits = 2;
        } else if(*s <= 'F' && *s >= 'A') {
            digit.digits[0] = *s - 'A';
            digit.digits[1] = 1;
            digit.num_digits = 2;
        }

        s++;

        mult(&digit, &twopow, &digit);
        add(&decrep, &digit, &decrep);
    }

    /* Convert decimal number to a string */
    if(decrep.num_digits == 0) {
        *outbuf = '0';
        *(++outbuf) = '\0';
        return;
    }

    for(n = decrep.num_digits-1; n >= 0; n--) {
        *(outbuf++) = '0' + decrep.digits[n];
    }

    *outbuf = '\0';
}

int main(void)
{
    char buf[1000];

    hex2dec("FFEa4334234FABCD", buf);

    printf("%s", buf);
    return 0;
}

void copy_number(struct number *dst, struct number *src)
{
    int i;

    for(i = 0; i < src->num_digits; i++) dst->digits[i] = src->digits[i];

    dst->num_digits = src->num_digits;
}

int power(struct number *a, unsigned int n, struct number *b)
{
    struct number atmp;

    /* Are we exponentiating by 0? */
    if(n == 0) {
        b->num_digits = 1;
        b->digits[0] = 1;
        return 0;
    }

    copy_number(&atmp, a);

    while(--n > 0) {
        mult(&atmp, a, &atmp);
    }

    copy_number(b, &atmp);
    return 0;
}

int mult(struct number *a, struct number *b, struct number *c)
{
    struct number btmp;
    struct number ctmp;
    struct number *t;

    /* Are we multiplying by 0? */
    if(a->num_digits == 0 || b->num_digits == 0) {
        c->num_digits = 0;
        return 0;
    }

    if(a->num_digits < b->num_digits) {
        t = a;
        a = b;
        b = t;
    }

    copy_number(&btmp, b);
    copy_number(&ctmp, a);

    while(1) {
        /* Are we multiplying by 1? */
        if(btmp.num_digits == 1 && btmp.digits[0] == 1) {
            break;
        }

        add(&ctmp, a, &ctmp);
        dec(&btmp);
    }

    copy_number(c, &ctmp);

    return 0;
}

int add(struct number *a, struct number *b, struct number *c)
{
    int i, j;
    int carry;

    struct number *t;

    if(a->num_digits < b->num_digits) {
        t = a;
        a = b;
        b = t;
    }

    for(i = 0, carry = 0; i < a->num_digits; i++) {

        if(i >= b->num_digits) j = a->digits[i]+carry;
        else j = a->digits[i]+b->digits[i]+carry;

        if(j > 9) {
            j -= 10;
            carry = 1;
        } else {
            carry = 0;
        }

        c->digits[i]=j;
    }

    /* Did we overflow? */
    if(carry > 0 && i == MAXLEN) return -1;

    /* Carry over from last addition? */
    if(carry > 0) {
        c->digits[i] = carry;
        c->num_digits = a->num_digits+1;
    } else {
        c->num_digits = a->num_digits;
    }

    return 0;
}

void print_number(struct number *a, char *buf)
{
    int i;

    if(a->num_digits == 0) {
        printf("0");
        return;
    }

    for(i = a->num_digits-1; i >= 0; i--) {
        *(buf++) = '0' + a->digits[i];
    }

    *buf = '\0';
}

void dec(struct number *a)
{
    int i;

    for(i = 0; i < a->num_digits; i++) {
        if(a->digits[i] > 0) {
            a->digits[i]--;
            break;
        }

        a->digits[i] = 9;
    }

    /* Did number of digits get lower */
    if(i == a->num_digits -1 && a->digits[i] == 0) {
        for(i = a->num_digits - 1; i >= 0; i--) {
            if(a->digits[i] != 0) {
                a->num_digits = i + 1;
                break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-08T13:05:33.967

请注意此代码中存在错误。只要十六进制字符串包含 0 ！这个片段：

```
/* Extract digit */
if(*s <= '9' && *s >= '0') {
    digit.digits[0] = *s - '0';
    digit.num_digits = 1;
} else if(*s <= 'f' && *s >= 'a') { 
```

给出数字[0] = 0；num_digites = 1; 但稍后在 mult() 函数中有 snipet ：

```
if(a->num_digits == 0 || b->num_digits == 0) {
    c->num_digits = 0;
    return 0;
} 
```

通过 num_digits == 0 测试 0。所以我建议在第一个函数中将代码段替换为：

```
if(*s == '0') {
    digit.digits[0] = *s - '0';
    digit.num_digits = 0;
}else if(*s <= '9' && *s > '0') {
    digit.digits[0] = *s - '0';
    digit.num_digits = 1;
} else if(*s <= 'f' && *s >= 'a') { 
```

看起来对我来说很好。您可以在此站点上比较结果：http: [//www.statman.info/conversions/hexadecimal.php](http://www.statman.info/conversions/hexadecimal.php)

# java - 我如何判断 Joda DateTime 是否在下午 4 点到 8 点之间？

> ID：10605343
> 
> 赞同：6
> 
> 时间：2012-05-15T16:48:30.487
> 
> 标签：java, jodatime

我想检查给定的 DateTime 是在凌晨 4 点到早上 8 点之间还是在凌晨 12 点到凌晨 3 点之间。这样做的正确方法是什么？

这似乎可以解决问题：

```
 DateTime start  = new DateTime().withHourOfDay(4);
        DateTime end  = new DateTime().withHourOfDay(8);
        Interval interval = new Interval(start, end);
        if(interval.contains(now)) return true; 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T17:38:48.433

只需使用`getHourOfDay()`

```
int hour = new DateTime().getHourOfDay();
return ((hour >= 16) && (hour < 20))    //4-8pm
        || ((hour >= 0) && (hour < 3)); //12-3am 
```

# prolog - Prolog列表问题

> ID：10605344
> 
> 赞同：0
> 
> 时间：2012-05-15T16:48:34.197
> 
> 标签：prolog

我有以下规则：

```
/*The structure of a subject teaching team takes the form: 
  team(Subject, Leader, Non_management_staff, Deputy). 
 Non_management_staff is a (possibly empty) list of teacher 
structures and excludes the teacher structures for Leader and 
Deputy. 
teacher structures take the form:  
 teacher(Surname, Initial,  
       profile(Years_teaching,Second_subject,Club_supervision)). 
   Assume that each teacher has his or her team's Subject as their  
 main subject.*/  

team(computer_science,teacher(may,j,profile(20,ict,model_railways)), 
 [teacher(clarke,j,profile(32,ict,car_maintenance))], 
 teacher(hamm,p,profile(11,ict,science_club))).

team(maths,teacher(vorderly,c,profile(25,computer_science,chess)), 
 [teacher(o_connell,d,profile(10,music,orchestra)), 
  teacher(brankin,p,profile(20,home_economics,cookery_club))], 
 teacher(lynas,d,profile(10,pe,football))). 

team(english,teacher(brewster,f,profile(30,french,french_society)), 
 [ ], 
 teacher(flaxman,j,profile(35,drama,debating_society))). 

 team(art,teacher(lawless,m,profile(20,english,film_club)), 
 [teacher(walker,k,profile(25,english,debating_society)), 
  teacher(brankin,i,profile(20,home_economics,writing)), 
  teacher(boyson,r,profile(30,english,writing))],
  teacher(carthy,m,profile(20,music,orchestra))). 
```

我应该带回一个团队中任何领导者的首字母和姓氏，该团队总共包含 2 位或更多位以 ICT 作为第二学科的教师。

我是 prolog 的新手，所以对此不确定。另外，我已经正确地返回了结果，但它被返回了 3 次。

对此的任何帮助将不胜感激。

另外，如果这非常容易，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:27:07.247

您没有提供用于查找这些教师的代码，所以我不能肯定地说，但如果有一个团队有 3 名成员，他们的第二个科目是 ICT（例如，computer_science），那么会有找到 2 的 3 种方法（AB、AC 和 BC），这将解释您的多个结果。但是说如何修改你的代码来解决这个问题需要看到要修复的代码。

# jquery - 如何在 Backbone.js 中使用 Jquery UI 插件？

> ID：10605346
> 
> 赞同：0
> 
> 时间：2012-05-15T16:48:41.750
> 
> 标签：jquery, jquery-ui, backbone.js

我有一个使用 Backbone.js 控制的元素列表，其中包含列表视图以及每个元素的视图，每个`li`元素都控制一个模型。我想从 jQuery UI [http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)实现可排序插件，并能够根据模型的位置更新模型中的值。有没有办法从视图中做到这一点，还是我需要在这里采取不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:00:58.837

假设您使用集合来存储这些模型，只要您的`comparator`函数代表您需要的排序顺序，您就拥有在集合中获取模型“顺序”所需的所有信息。

您可以像这样在集合中获取特定模型的索引：

```
var idx = collectionInstance.indexOf(collectionInstance.get('itemId')) 
```

我还不能说我已经将 jQuery Sortable 与 Backbone 结合使用，因为我一直认为更改比较器和应用排序可以满足我的要求。

我特别喜欢以下实现：[Proper way to sort abone.js collection on the fly](https://stackoverflow.com/questions/9865804/proper-way-to-sort-a-backbone-js-collection-on-the-fly)。

从 Backbone 文档中，我们知道在集合上手动触发排序：

> 强制集合重新排序。在正常情况下，您不需要调用它，因为具有比较器函数的集合将始终以正确的排序顺序保持自身。调用 sort 会触发集合的“reset”事件，除非通过传递 {silent: true}

# c# - 使用 .NET 客户端的 RavenDB 并发更新

> ID：10605347
> 
> 赞同：3
> 
> 时间：2012-05-15T16:48:42.663
> 
> 标签：c#, ravendb

我想知道在使用 .net 客户端的以下场景中会发生什么。

```
using (IDocumentSession session = documentStore.OpenSession())
{
    thingToUpdate = session.Load<TUpdateThing>(id);

    // Modify thingToUpdate here

    // ** Someplace else the object is updated and saved. **

    session.SaveChanges();  // What happens here?
} 
```

这会根据 etag 的更改自动抛出错误，还是会自动覆盖其他人所做的更改？

我已经看到了一些与 http api 相关的东西：http: [//ravendb.net/docs/http-api/http-api-comcurrency](http://ravendb.net/docs/http-api/http-api-comcurrency)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T17:24:28.847

你说的是乐观并发。如果你想使用它，你设置

```
session.Advanced.UseOptimisticConcurrency = true; 
```

默认情况下，未设置。

这是一个通过测试来证明这一点：

```
public class ConcurrentUpdates : LocalClientTest
{
    [Fact]
    public void ConcurrentUpdatesWillThrowAConcurrencyException()
    {
        using (var store = NewDocumentStore())
        {
            var originalPost = new Post { Text = "Nothing yet" };
            using (var s = store.OpenSession())
            {
                s.Store(originalPost);
                s.SaveChanges();
            }

            using (var session1 = store.OpenSession())
            using (var session2 = store.OpenSession())
            {
                session1.Advanced.UseOptimisticConcurrency = true;
                session2.Advanced.UseOptimisticConcurrency = true;

                var post1 = session1.Load<Post>(originalPost.Id);
                var post2 = session2.Load<Post>(originalPost.Id);

                post1.Text = "First change";
                post2.Text = "Second change";

                session1.SaveChanges();

                // Saving the second text will throw a concurrency exception
                Assert.Throws<ConcurrencyException>(() => session2.SaveChanges());
            }

            using (var s = store.OpenSession())
            {
                Assert.Equal("First change", s.Load<Post>(originalPost.Id).Text);
            }
        }
    }

    public class Post
    {
        public string Id { get; set; }
        public string Text { get; set; }
    }
} 
```

# android - Android Countdown Timer 崩溃和错误值

> ID：10605352
> 
> 赞同：1
> 
> 时间：2012-05-15T16:49:01.557
> 
> 标签：android, eclipse

我有一个应用程序可以告诉我要上学多少小时（：P）。我有一个带有文本时间的文本视图：（还有几个小时）。这应该是 6.2 但现在是 6，然后当我点击开始时，它说学校立即完成然后崩溃。哦，我想以小时为单位显示时间，像这样（6.2 = 6 小时 20 分钟）。可能是什么问题呢？

代码启动活动：

```
package com.nieeli.timer;

import android.app.Activity;

import android.os.Bundle;
import android.os.CountDownTimer;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class startActivity extends Activity implements OnClickListener {
    private static final String tag = "Main";
    private MalibuCountDownTimer countDownTimer;
    private long timeElapsed;
    private boolean timerHasStarted = false;
    private Button startB;
    private TextView text;
    private TextView timeElapsedView;

    private final long startTime = 22500000/3600000;
    private final long interval = 1/100;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        startB = (Button) this.findViewById(R.id.button);
        startB.setOnClickListener(this);

        text = (TextView) this.findViewById(R.id.timer);
        timeElapsedView = (TextView) this.findViewById(R.id.timeElapsed);
        countDownTimer = new MalibuCountDownTimer(startTime, interval);
        text.setText(text.getText() + String.valueOf(startTime));
    }

    public void onClick(View v) {
        if (!timerHasStarted) {
            countDownTimer.start();
            timerHasStarted = true;
            startB.setText("Start");
        } else {

            countDownTimer.cancel();
            timerHasStarted = false;
            startB.setText("Stop and Reset");
        }
    }

    // CountDownTimer class
    public class MalibuCountDownTimer extends CountDownTimer {

        public MalibuCountDownTimer(long startTime, long interval) {
            super(startTime, interval);
        }

        @Override
        public void onFinish() {
            text.setText("School Finished!");
            timeElapsedView.setText("Time Passed: "
                    + String.valueOf(startTime));
        }

        @Override
        public void onTick(long millisUntilFinished) {
            text.setText("Time remain:" + millisUntilFinished);
            timeElapsed = startTime - millisUntilFinished;
            timeElapsedView.setText("Time Left: "
                    + String.valueOf(timeElapsed));
        }
    }
} 
```

没有对清单或布局进行任何更改。

感谢：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:09:58.977

首先，记住 long 是一个整数类型。私人最终长间隔 = 1/100；不等于 0.01；我相信它会归零。此外，这是您希望调用 onTick 的频率；我相信你想说你想每 0.01 毫秒被调用一次，这似乎太过分了。也许您的意思是每 100 毫秒（每秒十次）？

您可能还想交换 startB.setText 行，以便在停止时显示“开始”，在启动时显示“停止”

您想将毫秒转换为小时和分钟吗？你可以尝试这样的事情：long totalMinutes = millis / 1000 / 60; 长时间 = 毫秒 / 60；long minutes = totalMinutes - (hours * 60);

编辑：如果您希望倒计时数（6.2 代表 6 小时 20 分钟）每十分钟减少 0.1，有两种主要方法。

第一个选项是将“间隔”设置为 10 * 60 * 1000（十分钟内的毫秒数）。然后在 onTick 中，取一个浮点数（10.0 或其他）并减少 0.1。这可能是一种快速而肮脏的方法，即使它有效，但它并不理想。

第二个是做我上面描述的事情。然后当你有小时数和分钟数时：float timeRemaining = (float) hours + (float) minutes / 100 使用 String.format 在文本视图中显示它。类似 String.format("%.1f%n", timeRemaining) 的东西只用一位小数显示。

我实际上并没有尝试过代码——但在我脑海中，这应该会给你一些提示，引导你朝着正确的方向前进。

# zooming - Java3D Zoon-对象开始消失，我放大它

> ID：10605356
> 
> 赞同：0
> 
> 时间：2012-05-15T16:49:13.293
> 
> 标签：zooming, java-3d

首先，我想说我是Java3D 的新手。请容忍我的无知。我已经使用 Java3D 制作了一个应用程序，但在缩放时遇到了以下问题。

1.  Java3D 的 MouseWheelZoom 行为似乎沿 Z 轴移动对象。在场景中，我的 Z 轴没有超出平面，因此通过使用 MouseWheelZoom ，对象不会靠近，但会超出屏幕。有没有办法将缩放方向设置为任意方向？

2.  通过使用 MouseWheelListener 并根据缩放步骤更改查看平台，我解决了这个问题。但现在还有另一个问题。当物体接近一定距离时，物体的某些部分（通常是角落）开始消失，因此我无法按自己的意愿缩放。

能否请你帮忙 ？

问候，

哈桑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:59:18.360

1.  问题：我猜您对 MouseControl 使用了 OrbitBehavior，例如：

    ```
    orbit = new OrbitBehavior(canvas3d, OrbitBehavior.REVERSE_ALL); 
    ```

如果是这种情况，请尝试

```
 orbit.setZoomFactor(-1d); 
```

反转缩放方向（默认缩放系数为 +1d）。

对您的 2\. 问题：您必须在 PlatformGeometry 上设置一个 BoundingLeaf 来封装您的“查看区域”。尝试这样的事情

```
defaultBounds = new BoundingSphere(new Point3d(radiusGameMap, 0.0, radiusGameMap),
            radiusGameMap * 6.0d);
BoundingLeaf boundingLeaf = new BoundingLeaf(defaultBounds);
PlatformGeometry platformGeom = new PlatformGeometry();
platformGeom.addChild(boundingLeaf); 
```

其中 radiusGameMap 是定义整个地图半径的双精度值。

# vb.net - 如何使用“打开方式”VB.net 打开多个文件？（命令行参数）

> ID：10605359
> 
> 赞同：1
> 
> 时间：2012-05-15T16:49:27.380
> 
> 标签：vb.net, file-io, command-line, arguments, open-with

我有一个可以读取某些类型文件的应用程序，并且它可以正常工作，因此如果您从 Windows 中“打开”，它会自动启动应用程序并打开所选文件。

不幸的是，我不能让它为多个文件工作。

System.Environment.GetCommandLineArgs() 包含以下内容： System.Environment.GetCommandLineArgs(0) = .exe 的名称和路径 System.Environment.GetCommandLineArgs(1) = 选择要打开的第一个文件的名称和路径

System.Environment.GetCommandLineArgs().Length 在用户尝试打开 1 个文件时为 2，这是有道理的，因为第一个参数是 .exe 本身，第二个是文件的路径，但如果它不会增加到 3用户尝试打开 2 个文件......这意味着 System.Environment.GetCommandLineArgs(2) 永远不会被填充

这是一些显示问题的示例代码：它将识别没有文件或打开一个文件，但如果您尝试打开多个它只会显示第一个。

```
 Private Sub Form_Main_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Me.Show()

    ' Check if the user is opening a file upon startup
    If System.Environment.GetCommandLineArgs().Length > 1 Then
        Dim i As Integer

        'this outputs the exe path and the the first file, if it exists, but never the 2nd file...
        'For i = 0 To System.Environment.GetCommandLineArgs().Length - 1
        '    MsgBox(System.Environment.GetCommandLineArgs(i))
        'Next

        'this outputs the first file, if it exists, but never the 2nd file...
        For i = 1 To System.Environment.GetCommandLineArgs().Length - 1
            MsgBox(System.Environment.GetCommandLineArgs(i))
        Next

    End If

End Sub 
```

有什么我想念的吗？是否有使用 System.Environment.GetCommandLineArgs() 的替代方法

另外，我注意到如果我在 .exe 的快捷方式中指定它们，我确实可以有多个命令参数，例如，设置目标：

```
"C:\Program Files\Reader\Reader.exe" -today -tommorow 
```

当我以这种方式运行它时，我得到：

```
System.Environment.GetCommandLineArgs().Length = 3
System.Environment.GetCommandLineArgs(0) = "C:\Program Files\Reader\Reader.exe"
System.Environment.GetCommandLineArgs(1) = "-today"
System.Environment.GetCommandLineArgs(2) = "-tomorrow" 
```

这是我所期望的......

如果有帮助，我正在使用 Windows XP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:12:26.203

据我所知，当您在资源管理器中选择多个文件时，Windows 不会在同一命令行上发送多个文件名。对于某些应用程序，它将作为程序的单独实例启动，并将每个实例传递一个文件。

# grails - 手动向 Spring Security 提供引用 URL

> ID：10605361
> 
> 赞同：2
> 
> 时间：2012-05-15T16:49:45.033
> 
> 标签：grails, spring-security

我们有一些购物车页面可以同时使用访客路径和用户路径。我们希望允许用户在此过程中随时登录，但不想创建另一个登录页面。我希望我们可以简单地将用户重定向到现有登录名并告诉 Spring Security 要返回的 URL。

我知道当会话超时和/或在没有会话的情况下请求受保护的页面时，这会自动发生，但是有没有办法我可以自己将 URL 提供给 Spring Security？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:28:42.927

如果您只需要一个简单的返回 URL 来检索购物车，那么您最好自己在[AuthenticationSuccessHandler](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#form-login-flow-handling)中实现它。您可以查看来源`SimpleUrlAuthenticationSuccessHandler`及其父级以获取灵感。

默认登录机制使用`RequestCache`和 a `SavedRequest`，但这实际上是为了重放一个未经授权的请求。在你的情况下，这可能是矫枉过正。

# opencv - OpenCV 二进制部署 (Linux)

> ID：10605363
> 
> 赞同：1
> 
> 时间：2012-05-15T16:49:57.520
> 
> 标签：opencv, ffmpeg, x264

在研究所，我们在集群上使用 Scientific Linux 5，我需要部署一个使用现代 OpenCV 发行版（2.3.1 或 2.4.0）的应用程序。我在集群上没有 root 权限。

本质上，我如何打包 ffmpeg（希望是 x264）、opencv 的所有动态二进制依赖项，以便我可以 xcopy-deploy 我的应用程序？

我在 Ubuntu 上安装了 OpenCV 2.3.1。如果有一种方法可以可控地加载可执行文件并复制所有动态依赖项，我可以使用它。

谢谢， 瓦迪姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:59:41.927

如果您没有权限，则无需在计算机**中安装 OpenCV 。**

将 OpenCV 库及其依赖项放在系统中的某个位置，在执行应用程序**之前**，请确保**调整`LD_LIBRARY_PATH`**以添加这些路径。

要检索某个二进制应用程序/库的依赖项列表，请使用`ldd`. 您可能有兴趣阅读这篇文章：[复制共享库依赖项](http://www.h3manth.com/content/copying-shared-library-dependencies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T22:49:08.457

1)**安装 GCC 4.7.3**

sudo apt-get 更新

sudo apt-get install build-essential

* * *

2)**安装 CMake 2.8.10.1**

sudo apt-get install cmake cmake-curses-gui

* * *

3)**[下载](http://downloads.sourceforge.net/project/opencvlibrary/opencv-unix/2.4.5/opencv-2.4.5.tar.gz)OpenCV 2.4.5**

cd ~/下载

tar -xf opencv-2.4.5.tar.gz

cd opencv-2.4.5

mkdir 构建

光盘构建

cmake -DCMAKE_BUILD_TYPE=发布..

使-j4

须藤使安装

光盘../..

rm -rf opencv-2.4.5*

* * *

OpenBR 使用 OpenCV 进行人脸识别。有一个清晰的文档可用于安装 OpenBR，这是[链接](http://openbiometrics.org/doxygen/latest/linux_gcc.html)！

# python - 线程脚本在没有关闭的情况下结束后停止

> ID：10605368
> 
> 赞同：3
> 
> 时间：2012-05-15T16:50:11.323
> 
> 标签：python, multithreading, queue

希望这只是我做错的小事，因为这些是我第一个使用队列的线程脚本。基本上在穿过它之后会停下来坐在那里但不会退出。

```
import threading
import Queue
class Words(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
        self.queue = Queue.Queue()     

    def word(self):
        read = open('words.txt')
        for word in read:
            word = word.replace("\n","")
            self.queue.put(word)       
        read.close() 
        for i in range(5):
            t = self.run()
            t.setDaemon(True)
            t.start()  
        self.queue.join()

    def run(self): 
        while True:
            word = self.queue.get()
            print word 
            self.queue.task_done()

    if __name__ == '__main__':
        Word =  Words()
        Word.word() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:44:46.820

您在代码中以多种方式错误地使用了线程：

首先，代码似乎建立在错误的假设之上，即您拥有的一个`Thread`子类对象可以产生完成工作所需的所有线程。相反，[`Thread`文档](http://docs.python.org/library/threading.html#thread-objects)说“每个对象`start`最多只能调用一次”。`Thread`在`word`方法的情况下，这是`self`参考。

但是，调用没有用，`self.start()`因为这会产生一个线程来消耗队列，并且您不会从线程中获得任何收益。由于`word`无论如何都必须构造新的实例`Words`来启动多个线程，并且队列对象需要被多个`Words`实例访问，因此将这两个实例与对象分开会很有用`Words`。例如，`word`可以是`Words`对象外部的函数，开头如下：

```
def word():
    queue = Queue.Queue()
    read = open('words.txt')
    for word in read:
        word = word.replace("\n","")
        self.put(word)       
    read.close()
    #... 
```

这也意味着必须`Words`将队列对象作为参数，以便多个实例共享同一个队列：

```
class Words(threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue 
```

其次，您的线程函数 ( `run`) 是一个无限循环，因此线程永远不会终止。由于您仅在将所有项目添加到队列后才运行队列使用者线程，因此一旦队列为空，您应该不会遇到终止线程的问题，如下所示：

```
def run(self): 
    while True:
        try:
            word = self.queue.get(False)
        except Queue.Empty:
            break
        print word 
        self.queue.task_done() 
```

在这里使用异常很有用，因为否则队列可能会清空，然后线程可能会尝试从中获取，并且最终会永远等待添加项目。

第三，在您的 for 循环中调用`self.run()`，它将控制权传递给`run`方法，然后该方法处理整个队列并`None`在方法更改为终止后返回。以下行将引发异常，因为`t`将被分配 value `None`。既然你想产生其他线程来完成这项工作，你应该做`t = Word(queue)`一个新的词线程然后`t.start()`开始。所以，放在一起的代码应该是

```
class Words(threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def run(self): 
        while True:
            try:
                word = self.queue.get(False)
            except Queue.Empty:
                break
            print word 
            self.queue.task_done()

def word():
    queue = Queue.Queue()
    read = open('words.txt')
    for word in read:
        word = word.replace("\n","")
        self.put(word)       
    read.close()
    for i in range(5):
        t = Word()
        t.setDaemon(True)
        t.start()
    queue.join()

if __name__=='__main__':
    word() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:39:33.677

It looks to me like you're mixing up a number of different aspects of threads, when you really just need a simple solution. As far as I can tell, the `for i in range(5):` loop never gets past the first iteration because you run the thread and it gets caught in an infinite loop.

Here's how I would do it:

```
import threading
import Queue

class Worker(threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def run(self):
        while True:
            # try to dequeue a word from the queue
            try:
                word = self.queue.get_nowait()
            # if there's nothing in the queue, break because we're done
            except Queue.Empty:
                break

            # if the 'try' was successful at getting a word, print it
            print word

def fill_queue(queue):
    read = open('words.txt')
    for word in read:
        word = word.replace("\n", "")
        queue.put(word)
    read.close()

if __name__ == "__main__":
    # create empty queue
    queue = Queue.Queue()

    # fill the queue with work
    fill_queue(queue)

    # create 5 worker threads
    threads = []
    for i in range(5):
        threads.append(Worker(queue))

    # start threads
    for thread in threads:
        thread.start()

    # join threads once they finish
    for thread in threads:
        thread.join() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:55:15.053

如果您想阅读一些 Python 中的线程代码示例，以下食谱可能会教您一些有关该主题的基础知识。其中一些是演示，另一些是程序：

*   [mthread.py (2)](http://code.activestate.com/recipes/473781)
*   [mthread.py (1)](http://code.activestate.com/recipes/466427)
*   [线程同步器](http://code.activestate.com/recipes/475152)
*   [有界缓冲区示例 (1)](http://code.activestate.com/recipes/475216)
*   [有界缓冲区示例 (2)](http://code.activestate.com/recipes/475217)
*   [转发端口](http://code.activestate.com/recipes/483730)
*   [用于运行简单代理的模块](http://code.activestate.com/recipes/502204)
*   [代理示例](http://code.activestate.com/recipes/502205)
*   [油漆 2.0](http://code.activestate.com/recipes/511436)
*   [斑点 (2)](http://code.activestate.com/recipes/511435)
*   [目录修剪器 2](http://code.activestate.com/recipes/577633)

# iphone - iOS 应用程序在启动时崩溃

> ID：10605369
> 
> 赞同：2
> 
> 时间：2012-05-15T16:50:14.353
> 
> 标签：iphone, ios, ipad, crash, stack-trace

对于某些用户，我的应用程序的最新版本在启动时开始崩溃。iTunes 中只有 1 个崩溃报告，如下所示。我一直无法在任何设备上重现。

两个版本之间的变化是

1.  集成两个第三方库（iNotify、openUDID）
2.  从 GCC 编译器切换到 Apple LLVM 3.1 编译器（新库需要 arc 支持）
3.  在启用 arc 的情况下编译新库的代码，在项目的其余部分禁用 arc。

我在 iNotify 的 appdelegate 中的 didFinishLaunchingWithOptions 中添加了 1 行。从堆栈跟踪到我认为它不会在那里崩溃。

有点不知所措。任何帮助，将不胜感激。谢谢！

```
Hardware Model:      iPhone4,1
Process:         MyAPP [3251]
Path:            /var/mobile/Applications/228BBF42-A374-4773-8C18-EFA47CE98C02/MyAPP.app/MyAPP
Identifier:      MyAPP
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-05-03 19:50:07.917 -0500
OS Version:      iPhone OS 5.1 (9B179)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                    0x3729e88f __exceptionPreprocess + 163
1   libobjc.A.dylib                   0x357a4259 objc_exception_throw + 33
2   CoreFoundation                    0x372a1a9b -[NSObject doesNotRecognizeSelector:] + 175
3   CoreFoundation                    0x372a0915 ___forwarding___ + 301
4   CoreFoundation                    0x371fb650 _CF_forwarding_prep_0 + 48
5   UIKit                             0x33aa9f93 -[UIAlertView(Private) _popoutAnimationDidStop:finished:] + 855
6   UIKit                             0x3395fc53 -[UIViewAnimationState sendDelegateAnimationDidStop:finished:] + 471
7   UIKit                             0x3396557d -[UIViewAnimationState animationDidStop:finished:] + 53
8   QuartzCore                        0x341fbc2f CA::Layer::run_animation_callbacks(void*) + 203
9   libdispatch.dylib                 0x344f6ee7 _dispatch_main_queue_callback_4CF$VARIANT$mp + 195
10  CoreFoundation                    0x372712ad __CFRunLoopRun + 1269
11  CoreFoundation                    0x371f44a5 CFRunLoopRunSpecific + 301
12  CoreFoundation                    0x371f436d CFRunLoopRunInMode + 105
13  GraphicsServices                  0x32101439 GSEventRunModal + 137
14  UIKit                             0x33978e7d UIApplicationMain + 1081
15  MyAPP                          0x00002bfb main (main.m:14)
16  MyAPP                          0x00002bb4 0x00002bb4

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib            0x3571d32c __pthread_kill + 8
1   libsystem_c.dylib                 0x3186b208 pthread_kill + 48
2   libsystem_c.dylib                 0x31864298 abort + 88
3   libc++abi.dylib                   0x34e70f64 abort_message + 40
4   libc++abi.dylib                   0x34e6e346 _ZL17default_terminatev + 18
5   libobjc.A.dylib                   0x357a4350 _objc_terminate + 140
6   libc++abi.dylib                   0x34e6e3be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                   0x34e6e44a std::terminate() + 14
8   libc++abi.dylib                   0x34e6f81e __cxa_rethrow + 82
9   libobjc.A.dylib                   0x357a42a2 objc_exception_rethrow + 6
10  CoreFoundation                    0x371f4506 CFRunLoopRunSpecific + 398
11  CoreFoundation                    0x371f4366 CFRunLoopRunInMode + 98
12  GraphicsServices                  0x32101432 GSEventRunModal + 130
13  UIKit                             0x33978e76 UIApplicationMain + 1074
14  MyAPP                          0x00002bf4 main (main.m:14)
15  MyAPP                          0x00002bac 0x00002bac

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib            0x3570d3a8 kevent + 24
1   libdispatch.dylib                 0x344f7f04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib                 0x344f7c22 _dispatch_mgr_thread + 30

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib            0x3570d004 mach_msg_trap + 20
1   libsystem_kernel.dylib            0x3570d1fa mach_msg + 50
2   CoreFoundation                    0x372723ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                    0x37271124 __CFRunLoopRun + 876
4   CoreFoundation                    0x371f449e CFRunLoopRunSpecific + 294
5   CoreFoundation                    0x371f4366 CFRunLoopRunInMode + 98
6   WebCore                           0x32eb40f0 _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib                 0x3182c72e _pthread_start + 314
8   libsystem_c.dylib                 0x3182c5e8 thread_start + 0

Thread 3:
0   libsystem_kernel.dylib            0x3571dcd4 __workq_kernreturn + 8
1   libsystem_c.dylib                 0x31826f36 _pthread_wqthread + 610
2   libsystem_c.dylib                 0x31826cc8 start_wqthread + 0

Thread 4 name:  com.apple.CFSocket.private
Thread 4:
0   libsystem_kernel.dylib            0x3571d570 __select + 20
1   CoreFoundation                    0x3727663a __CFSocketManager + 726
2   libsystem_c.dylib                 0x3182c72e _pthread_start + 314
3   libsystem_c.dylib                 0x3182c5e8 thread_start + 0

Thread 5:
0   libsystem_kernel.dylib            0x3571dcd4 __workq_kernreturn + 8
1   libsystem_c.dylib                 0x31826f36 _pthread_wqthread + 610
2   libsystem_c.dylib                 0x31826cc8 start_wqthread + 0 
```

一些额外的代码。

在appdelegate中有一个alertview定义如下：

```
#import <UIKit/UIKit.h>

@class MyAPPViewController;

@interface MyAPPAppDelegate : NSObject <UIApplicationDelegate> {
    UIViewController *rvc;
    UIAlertView *m_cAlertControl;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;

-(BOOL)shouldNag;
-(void)shouldEnableUI:(BOOL)pIsEnable;
-(void)updateRunCount;

@end 
```

以及在应用程序委托中实现的方法如下：

```
-(void)shouldEnableUI:(BOOL)pIsEnable
{ 
    if(NO == pIsEnable)
    {
        if (nil == m_cAlertControl) {
        m_cAlertControl = [[UIAlertView alloc] init];
    }
    m_cAlertControl.backgroundColor = [UIColor clearColor];
    m_cAlertControl.opaque = NO;
    [m_cAlertControl setHidden:YES];
    [m_cAlertControl show];
}
else {
    if (nil != m_cAlertControl) {
        [m_cAlertControl dismissWithClickedButtonIndex:0 animated:YES];
    }
} 
```

}

视图控制器对方法的调用如下：

[appDelegate shouldEnableUI:NO];

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:59:12.460

在看到崩溃日志问题时，似乎`UIAlertViewDelegate`在它发布后已经调用了它。

您需要在使用警报的控制器中释放它 -

```
-(void)dealloc {
    self.alertView.delegate = nil; //setting delegate to nil
    self.alertView = nil; //if you have defined alert as property
    //other release statements of your controller
    [super dealloc];
} 
```

如果您想要一些其他信息，您可以添加您的应用程序的一些代码，或者您的应用程序不是这种情况。

编辑 1 -

```
-(void)dealloc {
    m_cAlertControl.delegate = nil; //setting delegate to nil
    [m_cAlertControl release];

    //other release statements of your controller
    [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:03:28.280

我会说这是你最大的指针

```
[NSObject doesNotRecognizeSelector:] + 175 
```

看起来您在某处缺少选择器方法。

# windows-phone-7 - 无法让网络浏览器显示在我的手机页面上

> ID：10605375
> 
> 赞同：0
> 
> 时间：2012-05-15T16:50:34.753
> 
> 标签：windows-phone-7, windows-phone-7.1

我在 windows phone 编码方面很新，我有一个我认为是新手的问题:)，我的网络浏览器没有显示。我首先认为这是因为我说过它要在我的类的构造函数中导航，但改变它并没有解决任何问题。

谁能向我解释怎么了？

这是我背后的代码：

```
 public partial class MainPage : PhoneApplicationPage
    {
        string site = "http://google.com/";

        // Constructor
        public MainPage()
        {
            InitializeComponent();

            this.Loaded += new RoutedEventHandler(MainPage_Loaded);

        }

        private void MainPage_Loaded(object sender, RoutedEventArgs e)
        {
            wB.Navigate(new Uri(site, UriKind.Absolute));
            wB.Navigating += new EventHandler<NavigatingEventArgs>(wB_Navigating);
        }

        void wB_Navigating(object sender, NavigatingEventArgs e)
        {
            System.Diagnostics.Debug.WriteLine(e.Uri);
            if (e.Uri.ToString() != (site))
            {
                System.Diagnostics.Debug.WriteLine("lalala");
               // NavigationService.Navigate(new Uri("/Panorama.xaml", UriKind.Relative));
            }
        }
    }
} 
```

这是我的 Xaml：

```
<phone:PhoneApplicationPage 
    x:Class="LaBanquePostale.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
            <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
        </StackPanel>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <phone:WebBrowser Name="wB"  VerticalAlignment="Top" d:LayoutOverrides="Width"/>
            <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"/></Grid>
    </Grid>

</phone:PhoneApplicationPage> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:02:34.020

您的 WebBrowser 和 TextBlock 位于同一网格行中。TextBlock 可能隐藏了 WebBrowser，并且 WebBrowser 的高度为 ，`0`因为它的 verticalAlignment 设置为 Top。

尝试删除 TextBlock 并将 VerticalAlignment 设置为 Stretch，看看是否可行。

最终，您的 Grid 应该有两个 RowDefinition，看起来像这样：

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Grid.RowDefinitions>
             <RowDefinition Height="*" />
             <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <phone:WebBrowser Name="wB"  VerticalAlignment="Stretch" Grid.Row="0" d:LayoutOverrides="Width"/>
        <TextBlock HorizontalAlignment="Left" Grid.Row="1" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"/></Grid>
    </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:58:17.440

这似乎是因为您正在针对 WebBrowser 控件设置 VerticalAlignment="Top"，删除此属性设置，在我的示例项目中显示 WebBrowser 控件。

# ruby - 忽略 Twitter Gem 异常

> ID：10605378
> 
> 赞同：0
> 
> 时间：2012-05-15T16:50:41.993
> 
> 标签：ruby, ruby-on-rails-3, twitter, gem, rescue

如何拯救和忽略 twitter gem 抛出的异常？我想要的是这个

```
begin
Twitter.update(@tweet)
rescue Twitter::Error
 // continue action 1 
else 
 // continue action 1
end 
```

有没有更好的方法来做到这一点，所以我不重复代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:28:15.933

如果您不关心处理错误，请尝试以下操作：

```
Twitter.update(@tweet) rescue Twitter::Error
# continue action 1 
```

# mysql - MySQL：创建具有自动增量的表并将生成的值与同一表的不同列的值连接起来

> ID：10605383
> 
> 赞同：0
> 
> 时间：2012-05-15T16:51:04.737
> 
> 标签：mysql

我想创建一个具有 id、name、dept、username 属性的表员工。

id 列值是 auto_increment。我想将 id 的值与 dept 连接以生成用户名。

以下是我写的查询： create table employee emp_id MEDIUMINT NOT NULL AUTO_INCREMENT, name char(30) NOT NULL, dept char(6)NOT NULL, username varchar NOT NULL PRIMARY KEY(emp_id);

如何正确地将值插入此表？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:55:56.600

如果您的用户名将始终是 and 的连接`id`，`dept`您不需要为其创建单独的列，您可以使用 MySQL [CONCAT](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)函数选择它，如下所示：

```
SELECT id, name, dept, CONCAT(id, '-', dept) AS username FROM employee 
```

这将返回`username`like的结果`13-sales`。

如果您想实际存储用户名（可能是因为您希望以后能够自定义它），您必须首先插入行以获取 id，然后将设置用户名的行更新为连接的 id 和部门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:00:42.910

您可以在 MySQL 上使用 null 作为最后一个 id 进行自动翻译：

```
INSER INTO employee (name, dept) VALUES (?,?);
UPDATE employee SET username = concant(emp_id,dept) WHERE emp_id = NULL; 
```

# c# - 单元测试应该在本地机器上运行吗？

> ID：10605390
> 
> 赞同：1
> 
> 时间：2012-05-15T16:51:39.897
> 
> 标签：c#, unit-testing, testing

最近，我的任务是用 C# 为桌面应用程序编写和运行单元测试。过去，我主要编写自动化功能/GUI 测试。这些在专用的 QA 机器上运行，因为这些测试可能导致崩溃、数据丢失、蓝屏死机等。是否应该为运行单元测试进行类似的设置？在我的本地机器上运行单元测试有任何风险吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T16:55:19.170

单元测试应该在您的本地机器**和**构建服务器上运行。它们是作为开发人员反馈的宝贵资源。**DEV**应该*编写*单元测试。在签入之前，他应该*运行*单元测试以确保他没有破坏任何东西。然后构建服务器将再次运行单元测试，以确保它实际上没有损坏，并且与其他代码的集成（如果有的话）成功。

当单元测试运行时，构建服务器最好运行集成测试和自动化 UI 测试。当这些过程完成后，一个没有已知缺陷的构建就被生成了——至少没有一个被测试覆盖。换句话说，绿色构建意味着软件集成进展顺利，开发人员可以继续检查——或者在某个时候开始进行手动测试，然后再实际发布一个软件。

当足够多的测试被自动化时，软件测试必杀技就会出现，这样开发人员和企业就可以放心地发布仅基于此自动化测试流的成功的产品。实际上，只有少数产品会如此成熟——并且需要进行一些手动测试。

单元测试不涉及外部系统或接口。因此，在本地运行它们没有风险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T16:55:01.990

单元测试应该是独立的，以至于它们可以在每台机器上运行而无需任何进一步的设置。根据定义，单元测试只测试非常细粒度的功能单元，而不涉及外部系统（即数据库、文件系统等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:54:58.110

单元测试通常由开发人员在开发时完成。所以在你的开发环境中运行它。可能是您的本地机器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T16:55:18.610

好吧，如果您的本地机器是开发机器，我认为没有风险，因为该机器不是生产最终用户机器。您还可以考虑 TFS 实验室管理（如果您将 Microsoft TFS 作为 ALM/源控制系统）。在这种情况下，您可以创建虚拟或物理测试环境，并在这些定义的环境中部署和测试应用程序。

不确定非 TFS 场景的类似测试产品的名称是什么。

# gwt - GWT CellTable 自定义选择模型

> ID：10605393
> 
> 赞同：3
> 
> 时间：2012-05-15T16:51:43.993
> 
> 标签：gwt, gwt-2.2-celltable, datagridviewcheckboxcell, selectionmodel

我需要 GWT CellTable 的“自定义选择模型”。CellTable 中的一列是 Checkbox 列。

基本要求（都在下面的解决方案中工作）：
- 行单击（不在复选框上），选择该行并取消选择所有其他行。
- 复选框选择应该只选择/取消选择该行。

以下是我正在使用的代码，但它非常非常慢。任何指导将不胜感激。

```
final SelectionModel<T> selectionModel = new MultiSelectionModel<T>();
dataTable.setSelectionModel(selectionModel, 
            DefaultSelectionEventManager.createCustomManager(
                new DefaultSelectionEventManager.CheckboxEventTranslator<T>() {
                    @Override
                    public SelectAction translateSelectionEvent(CellPreviewEvent<T> event) {
                        SelectAction action = super.translateSelectionEvent(event);
                        if (action.equals(SelectAction.IGNORE)) {
                            selectionModel.clear();
                            return SelectAction.TOGGLE;
                        }
                        return action;
                    }
                }
            )
        ); 
```

以下是为 CheckColumn 回调截取的代码。

```
Column<T, Boolean> checkColumn = new Column<T, Boolean>(
    new CheckboxCell(true, false))
        {
            @Override
            public Boolean getValue(T t)
            {
                // Get the value from the selection model.
                return selectionModel.isSelected(t);
            }
        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:00:24.390

我已经为 CellTable 添加了一个 KeyProvider，它不再慢了。:)

```
ProvidesKey<T> keyProvider = new ProvidesKey<T>() {
    public Object getKey(T t) {
        return tip == null? null : tip.getId();
    }
};
dataTable = new CellTable<T>(PAGE_SIZE, keyProvider); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:23:37.513

您可以将您的复选框列入白名单

```
int checkboxColumn = 0;
DefaultSelectionEventManager.createCustomManager(new DefaultSelectionEventManager
                                      .WhitelistEventTranslator(checkboxColumn)); 
```

# javascript - 在backbone.js中引导数据？

> ID：10605397
> 
> 赞同：0
> 
> 时间：2012-05-15T16:51:58.543
> 
> 标签：javascript, backbone.js, underscore.js

我已经设法通过各种示例将以下代码放在一起，这似乎工作正常，但它似乎没有预加载我的数据，谁能告诉我我错过了什么？

```
App = (function(Backbone, _){
    var Note = Backbone.Model.extend(
    {
        defaults:
        {
            part1: 'hello',
            part2: 'world'
        }
    });

    var TableList = Backbone.Collection.extend({
        model: Note
    });

    var ListRow = Backbone.View.extend(
    {
        tagName: 'li',

        initialize: function()
        {
            _.bindAll(this, 'render');
        },

        render: function()
        {
            $(this.el).html('<span>'+this.model.get('part1')+' '+this.model.get('part2')+'</span>');

            return this;
        }
    });

    var ListView = Backbone.View.extend(
    {
        el: $('#layout_content'),

        events:
        {
            'click button#add': 'addItem'
        },

        initialize: function()
        {
            _.bindAll(this, 'render', 'addItem', 'appendItem');

            this.collection = new TableList();
            this.collection.bind('add', this.appendItem);

            this.counter = 0;
            this.render();
        },

        render: function()
        {
            var self = this;
            $(this.el).append("<button id='add'>Add list item</button>");

            $(this.el).append("<ul></ul>");

            _(this.collection.models).each(function(item){ // in case collection is not empty
                self.appendItem(item);
            }, this);
        },

        addItem: function()
        {
            this.counter++;

            var note = new Note();

            note.set({part2: note.get('part2') + this.counter});

            this.collection.add(note);
        },

        appendItem: function(item)
        {
            var listRow = new ListRow({
                model: item
            });

            $('ul', this.el).append(listRow.render().el);
        }
    });

    var app = function(initialModels)
    {
        this.start = function()
        {
            this.tableList = new TableList();
            this.listView = new ListView({collection: this.tableList});
            this.tableList.reset(initialModels);
        };
    };

  return app;
})(Backbone, _); 
```

然后使用以下命令初始化应用程序：

```
<script language="javascript">
    var app = new App([{"id":"95","note_title":"can we find the title"},{"id":"93","note_title":"some title"}]);
    app.start();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:11:07.130

好的，您的代码有一些问题，

您的启动方法有两个问题，

a) 你扔掉你的收藏

```
this.start = function()
{
    this.tableList = new TableList();
    this.listView = new ListView({collection: this.tableList});
    this.tableList.reset(initialModels);
}; 
```

然后在 intialize 中覆盖您传递的集合

```
initialize: function()
{
    _.bindAll(this, 'render', 'addItem', 'appendItem');
    this.collection = new TableList(); // this one gets overwritten, remove this line
} 
```

b）您使用要填充的模型触发集合重置，但不监听事件，或者添加这样的监听器：

```
this.collection.bind('reset', this.appendAllItems, this); 
```

或像这样创建您的收藏：

```
this.start = function()
{
    this.tableList = new TableList(initialModels);
    this.listView = new ListView({collection: this.tableList});
}; 
```

# postgresql - OpenErp 服务器错误

> ID：10605400
> 
> 赞同：2
> 
> 时间：2012-05-15T16:52:23.697
> 
> 标签：postgresql, openerp

我是openerp的新手。我能够登录。我试过gunicorp，现在我无法登录。

即使我不使用 gunicorp 我仍然会收到以下错误：

请建议可能出了什么问题。

```
Client Traceback (most recent call last):
File "/usr/lib/pymodules/python2.7/openerp/addons/web/common/http.py", line 180, in dispatch
response["result"] = method(controller, self, **self.params)
File "/usr/lib/pymodules/python2.7/openerp/addons/web/controllers/main.py", line 353, in   
get_list
dbs = proxy.list()
File "/usr/lib/pymodules/python2.7/openerp/addons/web/common/openerplib/main.py", line 117,  
in proxy
result = self.connector.send(self.service_name, method, *args)
File "/usr/lib/pymodules/python2.7/openerp/addons/web/common/http.py", line 611, in send
raise fault

Server Traceback (most recent call last):
File "/usr/lib/pymodules/python2.7/openerp/addons/web/common/http.py", line 592, in send
result = openerp.netsvc.dispatch_rpc(service_name, method, args)
File "/usr/lib/pymodules/python2.7/openerp/netsvc.py", line 360, in dispatch_rpc
result = ExportService.getService(service_name).dispatch(method, params)
File "/usr/lib/pymodules/python2.7/openerp/service/web_services.py", line 117, in dispatch
return fn(*params)
File "/usr/lib/pymodules/python2.7/openerp/service/web_services.py", line 310, in exp_list
cr = db.cursor()
File "/usr/lib/pymodules/python2.7/openerp/sql_db.py", line 465, in cursor
return Cursor(self._pool, self.dbname, serialized=serialized)
File "/usr/lib/pymodules/python2.7/openerp/sql_db.py", line 173, in __init__
self._cnx = pool.borrow(dsn(dbname))
File "/usr/lib/pymodules/python2.7/openerp/sql_db.py", line 366, in _locked
return fun(self, *args, **kwargs)
File "/usr/lib/pymodules/python2.7/openerp/sql_db.py", line 421, in borrow
result = psycopg2.connect(dsn=dsn, connection_factory=PsycoConnection)
File "/usr/lib/python2.7/dist-packages/psycopg2/__init__.py", line 179, in connect
connection_factory=connection_factory, async=async)
OperationalError: FATAL:  role "vishal" does not exist 
```

谢谢你，维沙尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T08:42:26.430

基本上看起来你应该仔细检查你的数据库配置。

数据库级错误提到您用于连接 PostgreSQL 的“vishal”用户不存在。也许您在测试 gunicorn 部署时更改了 db_user 配置，或者您尝试以“vishal”系统用户身份运行 OpenERP，而您之前正在使用另一个系统用户。

# android - 安卓上的 XACML

> ID：10605403
> 
> 赞同：3
> 
> 时间：2012-05-15T16:52:30.363
> 
> 标签：android, xacml

我必须在 Android 设备上阅读一些 XACML 文件。我在谷歌上搜索过，我发现只有[Sun 的 XACML](http://sunxacml.sourceforge.net/)，它不应该在 Android 中工作

有没有我可以使用的图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-16T21:07:04.897

截至 2014 年，没有任何适用于 Android 的 XACML 引擎。

如果您的用例只是解析 XACML 策略而不是评估它们，那么您采用的方法（使用 XML 解析器）是最好的方法。

XACML TC 正在考虑为 XACML 策略定义 JSON 表示法。请继续关注更新。

# git - 每个 [y,n,q,a,d,/,K,j,J,g,e,?] 在 git -p 的上下文中代表什么

> ID：10605405
> 
> 赞同：335
> 
> 时间：2012-05-15T16:52:31.540
> 
> 标签：git

使用 -p 模式时，`git add -p`每个`git stash -p`字母代表什么？

我猜`y`是和`n`不是。剩下的是什么？

> [y,n,q,a,d,/,K,j,J,g,e,?]

* * *

## 回答 #1

> 赞同：391
> 
> 时间：2012-05-15T16:57:34.243

`-p`模式意味着补丁，很难找到它的帮助，但如果你检查你`git add --help`会发现以下内容

```
 patch
       This lets you choose one path out of a status like selection. After choosing the path, it presents the diff between the index and the working tree file and asks you if you want to stage the change of each hunk. You can select one of the following options and type return:

           y - stage this hunk
           n - do not stage this hunk
           q - quit; do not stage this hunk nor any of the remaining ones
           a - stage this hunk and all later hunks in the file
           d - do not stage this hunk nor any of the later hunks in the file
           g - select a hunk to go to
           / - search for a hunk matching the given regex
           j - leave this hunk undecided, see next undecided hunk
           J - leave this hunk undecided, see next hunk
           k - leave this hunk undecided, see previous undecided hunk
           K - leave this hunk undecided, see previous hunk
           s - split the current hunk into smaller hunks
           e - manually edit the current hunk
           ? - print help 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-06-11T10:51:08.740

这些字母的含义可以通过键入找到**？**并按**Enter**键。对我来说，这些在运行时没有出现`git add --help`。我得到了这些选项的含义如下： -

```
Arup-iMac:$ git add -p
diff --git a/app/interactors/reporting_groups/list_colleagues.rb b/app/interactors/reporting_groups/list_colleagues.rb
index adc28af..f46f5e3 100644
--- a/app/interactors/reporting_groups/list_colleagues.rb
+++ b/app/interactors/reporting_groups/list_colleagues.rb
@@ -14,7 +14,4 @@ module ReportingGroups
         reporting_group.employees_from_team_sub_reporting_groups
       else
         reporting_group.users
-      end
-    end
-  end
-end
+      
Stage this hunk [y,n,q,a,d,/,e,?]? ? <-- Look here, what I typed to get these.
y - stage this hunk
n - do not stage this hunk
q - quit; do not stage this hunk nor any of the remaining ones
a - stage this hunk and all later hunks in the file
d - do not stage this hunk nor any of the later hunks in the file
g - select a hunk to go to
/ - search for a hunk matching the given regex
j - leave this hunk undecided, see next undecided hunk
J - leave this hunk undecided, see next hunk
k - leave this hunk undecided, see previous undecided hunk
K - leave this hunk undecided, see previous hunk
s - split the current hunk into smaller hunks
e - manually edit the current hunk
? - print help
@@ -14,7 +14,4 @@ module ReportingGroups
         reporting_group.employees_from_team_sub_reporting_groups
       else
         reporting_group.users
-      end
-    end
-  end
-end
+      
Stage this hunk [y,n,q,a,d,/,e,?]? 
```

# java - Java - 薪水问题

> ID：10605406
> 
> 赞同：-1
> 
> 时间：2012-05-15T16:52:38.080
> 
> 标签：java

```
import javax.swing.JOptionPane;

public class PayCheckStatic
{
    public static void main(String[] args)
    {

        while (name!=null)
    {
            String name = JOptionPane.showInputDialog("Please enter the next employees name" );
            String wage = JOptionPane.showInputDialog("Please enter their hourly wage?");
            String hoursWorked = JOptionPane.showInputDialog ("How many hours did they work this last work?");

            double wages = Double.parseDouble(wage);
            double hours = Double.parseDouble(hoursWorked);

            calculatePay(name,wages,hours);
    }
}

private static void calculatePay(String name,double wages,double hours)
{
if (hours > 40)
        {
         double pay = ((wages * 40)+((hours - 40)*(1.5 * wages)));
        JOptionPane.ShowMessageDialog (null,name + "'s pay is £" + pay);
        }
    else
        {
        double pay = (wages * hours);
        JOptionPane.ShowMessageDialog (null,name + "'s pay is £" + pay);
        }
}

} 
```

由于某种原因，我的代码无法编译，并且出现了找不到符号错误，我不知道为什么。该错误显示 3 次，其中 2 次出现在消息对话框中。关于如何修复它的任何提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T16:54:09.073

您的主要方法以：

```
while(name != null) 
```

但是您还没有声明名称。您需要`String name`在 while 循环开始之前移动该行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T17:01:22.053

正如其他人指出的那样，由于未定义名称，您需要在 main 中修复您的 while 循环。

但是，还有另一个错误：您的调用 `JOptionPane.ShowMessageDialog()`不正确。

您应该调用的正确方法是`JOptionPane.showMessageDialog()`（注意骆驼案例方法名称而不是帕斯卡案例）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:54:46.533

如果您发布的代码确实是您的完整程序，那么您的函数中有一个未定义`name`的。`main()`

您要么必须`name`在类中添加静态变量名称，以便静态`main()`可以访问它或在本地​​声明它`main()`。再看一眼，您确实有一个`String name`声明，但在您尝试使用它之后。移动in`name`之前的声明`if()``main()`

# ruby-on-rails - 在 Rails 3.1 中为特定路由强制 SSL

> ID：10605407
> 
> 赞同：11
> 
> 时间：2012-05-15T16:52:40.170
> 
> 标签：ruby-on-rails, ruby, ssl, ruby-on-rails-3.1

我需要在我的应用程序中的**所有路由**上强制 SSL，除了`landing#index`.

在`config/application.rb`中，我有：

```
config.force_ssl = true 
```

然后在 中`landing_controller.rb`，我有：

```
force_ssl :except => :index 
```

但是，所有路由仍被重定向到`https`.

有谁知道如何在 Rails 3.1+ 应用程序中有条件地强制 SSL？

**解决方案：**

将以下内容添加到您的`Gemfile`:

```
gem 'rack-ssl-enforcer' 
```

将以下内容添加到您的`config/application.rb`:

```
config.middleware.use Rack::SslEnforcer, :except => [ /\/$/ ], :strict => true 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T04:42:37.653

[我在这里](https://stackoverflow.com/questions/10877976/rails-3-2-force-ssl-except-on-landing-page/10899219#10899219)问了一个关于 stackoverflow 的类似问题，并被告知使用[https://github.com/tobmatth/rack-ssl-enforcer](https://github.com/tobmatth/rack-ssl-enforcer)。我还没有尝试过，但是根据自述文件，它似乎可以解决您在某些路由上有条件地强制执行 ssl 的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-02T16:50:51.703

Rails 4 和 ActiveAdmin 1.0b，我修改了 config/initializers/active_admin.rb：

```
config.before_filter :force_ssl_redirect, if: :https_enabled? 
```

`force_ssl_redirect`在 actionpack/lib/action_controller/metal/force_ssl.rb 中定义并且是 Rails 的`force_ssl`类方法调用的。

`https_enabled?`在我的 application_controller.rb 中定义：

```
def https_enabled?
  ENV['HTTPS_ENABLED'] == 'true'
end 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-27T11:33:16.347

你可以这样做：

**控制器**

```
force_ssl :except => :index 
```

**看法**

假设您的索引路径名称是**index_landing_path**

```
<%= link_to 'Landing', index_landing_path, :protocol => 'http' %> 
```

# java - 将浏览器中的 dateString 转换为 java.util.Date？

> ID：10605412
> 
> 赞同：3
> 
> 时间：2012-05-15T16:53:11.493
> 
> 标签：java, date, browser, java.util.date

我在将浏览器中的 dateString 解析/转换为 Java 中的 Date 格式时遇到问题。以下是我从浏览器中获得的一些值。

```
dateStr = "01-01-2010 05:06:22";
dateStr = "Mon Oct 11 07:00:00 EDT 2010";
dateStr = "Fri May 25 2012 08:00:00 GMT-0400 (Eastern Daylight Time)"; 
```

每个 dateStr 都采用不同的格式，在后端我使用具有特定格式的 SimpleDateFormat 来转换 dateStr。由于输入的 dateStr 格式不一致，有什么想法可以在后端处理吗？

几乎无法访问前端代码/人。

PS：我对此进行了谷歌搜索，并在 StackOverflow 上阅读了相关主题。

非常感谢任何形式的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:57:04.037

你有你需要的所有东西。首先为您可以从客户端获得的每种可能的日期格式定义模式。然后简单地遍历这些格式并尝试使用它们中的每一个和`SimpleDateFormat`.

`SimpleDateFormat`如果返回（解析错误）继续循环，`null`直到你得到 valid `Date`。您可能会问：如果输入匹配多个模式（`02-01-2012`1 月 2 日或 2 月 1 日？）该怎么办？好吧，那么您有更大的问题...

# django - 用块标签内的变量做某事

> ID：10605415
> 
> 赞同：0
> 
> 时间：2012-05-15T16:53:44.803
> 
> 标签：django, django-templates

假设我正在使用..在模板内传递一个变量“小计”

在我看来.py

```
subtotal = 0
page_vars = Context({
    'players': players,
    'subtotal': subtotal,
}) 
```

在我的 html 中。

```
{% for player in players %}
{% subtotal += player.score %}

{{ player.name }} <td />
{{ player.score }} <td />

{% endfor %}
{{ subtotal }} 
```

它给了我

无效的块标签：'subtotal'，预期为'empty'或'endfor'

我们不能在 django 模板系统中嵌套块标签吗？

如果是，如何？

必须有，至于我计算小计，我必须计算我的小计，我必须在两个地方运行相同的 for 循环，这使得它非常低效！

//老鼠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:02:55.393

您可以有嵌套标签：

```
{% for foo in bar %}
   {% for zoo in foo %}
   {% endfor %}
{% endfor %} 
```

要添加一些东西，您需要[`add`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#add)模板过滤器。

```
{{ player.score|add:subtotal }} 
```

但是，您的问题需要在视图中解决。因为即使使用[自定义标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)，您也无法可靠地跟踪模板中单个变量的运行总数。

请参阅[此答案](https://stackoverflow.com/questions/5275639/sum-in-html-template-using-template-tag)以获取帮助您入门的实现，但请注意，他们正在谈论对列表求和。

这种逻辑应该在视图中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T19:11:13.240

我真的建议您保持逻辑和信息显示的分离。Django 模板系统是专门设计的，目的是通过使用逻辑和计算来混淆模板，从而最大限度地减少你在脚下开枪的能力。

在视图中执行您的计算和逻辑操作，并将成品传递给模板。模板语言通过尝试强制执行这种责任分离来帮助您维护代码的可重用性和“可调试性”。

# perl - 如何从 perl 中的 IO::Async::Loop 事件中删除 IO::Async::Listener （或其通知程序）对象

> ID：10605417
> 
> 赞同：2
> 
> 时间：2012-05-15T16:53:54.290
> 
> 标签：perl, asyncsocket, unix-socket, io-socket

我有一段代码使用 IO::Socket::UNIX 创建一个 UNIX 域套接字，并将其提供给 IO::Async::Listener 的一个实例，以处理监听套接字并通知接收数据。然后，将 IO::Async::Listener 添加到 IO::Async::Loop 事件循环实例中。当然，套接字是在受控管理器中动态创建的。

在某种情况下，我想从事件循环中删除套接字（完全删除它，或者如果可能的话在其他情况下暂时禁用它）但我不知道如何。

IO::Async::Loop 提供通过 $loop->remove( $notifier ) 从事件循环中删除 IO::Async::Notifier 对象，但创建通知器由 IO::Async::Listener 内部处理（通过 IO ::Async::Stream，我猜？）。即使在我的脚本的 Ctrl-C 上，套接字文件也没有被删除，我只需要手动`close $socket and unlink( $path )`处理套接字文件吗？

这是所需行为的抽象代码：

```
#!/usr/bin/perl

use IO::Async::Loop;
use IO::Async::Listener;
use IO::Socket::UNIX;

my $loop = IO::Async::Loop->new;
my $listener = IO::Async::Listener->new(
                    on_stream => sub {
                            my ( undef, $stream ) = @_;

                            $stream->configure(
                                    on_read => sub {
                                            my ( $self, $buffref, $eof ) = @_;
                                            $self->write( $buffref );
                                            $buffref = "";
                                            return 0;
                                    },
                            );

                            $loop->add( $stream );
                    },
            );
$loop->add( $listener );

my $socket = IO::Socket::UNIX->new(
            Local => "echo.sock",
            Listen => 1,
            ) || die "Cannot make UNIX socket - $!\n";

$listener->listen(
            handle => $socket,
            );

my $condition = true;

while($condition) {
            // this is probably wrong
            $loop->remove( $listener );
            $condition = false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:25:00.083

您似乎在这里有两个相关的问题。

您可以使用循环的`remove`方法从循环中删除侦听器对象：

```
$loop->remove( $listener ) 
```

但是，从循环中删除侦听器不会取消套接字节点与文件系统的链接。为此，您将需要`unlink`您建议的代码。

就个人而言，在像这样创建套接字的代码中，我使用了一个`END`块：

```
my $path = "echo.sock";
my $socket = IO::Socket::UNIX->new(
            Local => $path,
            Listen => 1,
            ) || die "Cannot make UNIX socket - $!\n";
END { $socket and unlink $path }
$SIG{INT} = $SIG{TERM} = sub { exit 1 }; 
```

该`$SIG`行需要确保`SIGINT`并且`SIGTERM`仍然运行该`END`块，而不是仅仅导致`perl`进程立即终止。

最后，您应该注意，您可以使用更简洁的`listen`方法形式，而不是在您的情况下显式创建`UNIX`套接字，您可以

```
my $listener = ...
$loop->add( $listener );

$listener->listen(
  addr => {
    family   => "unix",
    socktype => "stream",
    path     => "echo.sock",
  },
); 
```

尽管在这种情况下您仍然需要该`END`块。

# ios - 对于 iOS，是否有人为常用的日期相关操作创建了 NSDate 扩展？

> ID：10605422
> 
> 赞同：2
> 
> 时间：2012-05-15T16:54:28.440
> 
> 标签：ios, nsdate

对于 iOS，是否有人为常用的日期相关操作创建了 NSDate 扩展？到目前为止我所做的如下所示。我可以在这里想象更多。

```
#import <Foundation/Foundation.h>

@interface NSDate (Utilities)

// daysOffsetBy -- denotes how many days to offset the current date
// before calculating midnight.  Here are some examples of how this
// parameter works:
//
//   - if 0, then get the next immediate midnight.
//   - if -1, then get yesterday's midnight (ie, early morning today).
//   - if +1, then get tomorrow's mignight.

- (NSDate *)midnight:(NSInteger)daysOffsetBy;

// Use this method to transpose a time-of-day, specified in self,
// to an arbitrary reference date, specified in refDate.  For example,
// suppose the time-of-day in self is 10:30 AM, and the calendar date
// is 1995-07-21\.  Suppose further that the calendar date for refDate
// is 2012-05-22, and that the time-of-day for refDate is 17:00 PM.
// This method creates a new date:  2012-05-22 10:30 AM.

- (NSDate *)transposeToDate:(NSDate *)refDate;

// Return YES if the 

- (BOOL) occursInside:(NSDate *)fromTime throughTime:(NSDate *)toTime;

@end 
```

与相应的实现：

```
#import "NSDate+Utilities.h"

static double SECONDS_IN_DAY = 24*60*60;

@implementation NSDate (Utilities)

- (NSDate *)midnight:(NSInteger)daysOffsetBy {
    NSCalendar *gregorian = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
    NSDate *refDate = [NSDate dateWithTimeInterval:(SECONDS_IN_DAY * daysOffsetBy) sinceDate:self];
    NSDateComponents *components = [gregorian components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit |
                                                          NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:refDate];
    [components setHour:0];
    [components setMinute:0];
    [components setSecond:0];

    NSDate *retval = [gregorian dateFromComponents:components];
    return retval;
}

- (NSDate *)transposeToDate:(NSDate *)refDate {
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *components = [calendar components:(NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:self];
    double secondsTranspiredInDay = [components second] + [components minute] * 60 + [components hour] * 60 * 60;

    NSDate *retDate = [NSDate dateWithTimeInterval:secondsTranspiredInDay sinceDate:[refDate midnight:0]];
    return retDate;
}

- (BOOL) occursInside:(NSDate *)fromTime throughTime:(NSDate *)toTime {
    BOOL retval = NO;
    NSComparisonResult c0 = [self compare:fromTime];
    NSComparisonResult c1 = [self compare:toTime];
    if ((c0 == NSOrderedSame || c0 == NSOrderedDescending) && (c1 == NSOrderedSame || c1 == NSOrderedAscending)) {
        retval = YES;
    }
    return retval;
}

@end 
```

想到的一些附加功能是显而易见的：addDays、addMinutes、addSeconds 等。将 NSDate 格式化程序集成到此类别中也很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:29:40.730

是的，不少人在 NSDate 上建立了类别。

您可以通过搜索 github 找到其中的一些：[https ://github.com/search?langOverride=&q=nsdate&repo=&start_value=1&type=Repositories](https://github.com/search?langOverride=&q=nsdate&repo=&start_value=1&type=Repositories)

# jquery-ui - 如何在 DotNetNuke 6.2+ 上使用 jQuery UI 选项卡

> ID：10605423
> 
> 赞同：1
> 
> 时间：2012-05-15T16:54:29.953
> 
> 标签：jquery-ui, dotnetnuke-6

我正在使用最新版本的 DNN 和 Chris Hammond 的 VS 2010 模板进行模块开发。我只是试图在我的页面上放置一个 jQueryUI Tab 控件。我查看了文档，似乎这应该可行。当我查看源代码时，我可以看到 jQueryUI 包含在标题中。我也尝试用 dnnTabs() 替换 tabs() 调用，但没有区别。那么，我在这里缺少什么？提前致谢！

module.js 中的代码：

```
(function ($) {
    $("#tabz").tabs();
})(jQuery); 
```

* * *

MyModule.ascx.cs 中的代码：

```
protected void Page_Init(object sender, EventArgs e)
{
    Framework.jQuery.RequestRegistration();

    if (Framework.AJAX.IsInstalled()) {
        Framework.AJAX.RegisterScriptManager();
    }
} 
```

* * *

MyModule.ascx 中的代码

```
 <dnn:DnnJsInclude ID="DnnJsInclude" runat="server" FilePath="~/DesktopModules/MyModule/module.js" />

<div id="tabz">
<ul>
    <li><a href="#tabs-1">Page 1</a></li>
    <li><a href="#tabs-2">Page 2</a></li>
</ul>
<div id="tabs-1">
        This is tab 1.
    </div>
    <div id="tabs-2">
        This is tab 2.
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:54:43.130

你做多了，它比这简单得多。

在您的 .ascx 页面中，您应该包括：

```
<script type="text/javascript">
$(function() {
    $( "#tabz" ).tabs();
});
</script> 
```

而且您的代码中不需要任何内容​​。

来源：http: [//jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

# oracle - Oracle 客户端设置 oracle 主页

> ID：10605425
> 
> 赞同：0
> 
> 时间：2012-05-15T16:54:33.077
> 
> 标签：oracle, toad

在 Windows 中，我的 Oracle 客户端驱动程序有问题，因此 Toad 和 Sql 开发人员无法登录。如何创建一个预言家？我应该指向哪个 bin 路径？怎么设置toad home，应该指向哪个oracle bin？

这是我的甲骨文结构。

```
--oracle
    ---- client
        --- 11.2.0.1
    ---- product
        ---- 10.2.0
        ---- 11.1.0.6 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:41:18.883

SQL 开发人员是自包含的，并带有自己的 Oracle 驱动程序。建立连接不需要 Oracle 客户端。

*   打开程序
*   单击左侧的绿色加号以创建新连接
*   输入连接名称，可以是您想要的任何名称
*   输入用户名和密码
*   选择基本连接类型以使用内置驱动程序
*   根据您的数据库的配置方式，在 SID 或服务名称中输入机器名称、端口和数据库名称
*   单击测试以确认，您一切顺利

您是否尝试过如上所述从 SQL Developer 建立新的基本连接？Visual Studio 不应该影响 SQL 开发人员，我怀疑它会影响数据库名称或端口。

# ios - 在 iOS 的主线程中的 tableview 中的多个用户点击

> ID：10605435
> 
> 赞同：0
> 
> 时间：2012-05-15T16:55:20.273
> 
> 标签：ios, multithreading, ios5, uitableview

我已经实现了一个具有多个线程的表视图。当前，当用户点击一个单元格时，一个不同的线程开始在后台下载内容，并且用户可以在加载内容之前自由选择不同的单元格。

目前，应用程序将显示第一个点击单元格的内容，然后立即切换到第二个单元格的内容。

我的问题是，如果用户选择了一个单元格，然后在应用程序切换到详细视图之前他们选择了另一个单元格，我如何只显示第二个单元格的内容而忘记第一个单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:45:51.707

你有不同的方法来做到这一点；一般来说，你会回调你的异步计算。在该回调中，只需查看最后选择的 indexPath 并匹配触发该计算的 indexPath 是否相同。

# spring - openSessionInView 实现和 LOCK

> ID：10605438
> 
> 赞同：-1
> 
> 时间：2012-05-15T16:55:25.157
> 
> 标签：spring, hibernate, locking

我正在尝试使用 Spring 2.5.5 Flex/J2EE 和 Hibernate 3.1.3 开发应用程序。我的问题是，当用户打开“客户信息”屏幕，然后以更改模式显示客户信息时，我希望适当地锁定记录（悲观或乐观锁定锁定）。并且注册保持锁定，直到用户验证更改（提交（））或关闭屏幕。

他们在网上谈论长对话（Hibernate）和 openSessionInView 模式。但是我还没有找到一个明确的例子。

解决方案是保持 Hibernate 会话打开，直到进入结束。然后进行提交或回滚。

我尝试使用类：“org.springframework.orm.hibernate3.support.OpenSe ssionInViewInterceptor”但我没有成功。我不知道如何用 Spring 配置它。

我花了太多时间，它变得紧急......谁能帮助我？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:03:59.657

必须在 web.xml 中配置 OpenSessionInViewInterceptor

下面的示例：

```
 <filter>
        <filter-name>openSessionInViewFilter</filter-name>
        <filter-class>
           org.springframework.orm.hibernate3.support.OpenSessionInViewFilter
        </filter-class>
        <init-param>
             <param-name>sessionFactoryBeanName</param-name>
             <param-value>sessionFactory</param-value> <!-- This is the default value, in case you have given different name please specify the same. -->
        </init-param>            
    </filter> 
```

还要检查[文档](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html)中的细微问题。

# caching - 更新元素的 Doctrine2 缓存

> ID：10605439
> 
> 赞同：5
> 
> 时间：2012-05-15T16:55:33.107
> 
> 标签：caching, doctrine-orm

我的教义有问题。我喜欢缓存，但是如果我更新一个实体并刷新，不应该学说2能够清除它的缓存吗？否则缓存对我来说用处不大，因为这个项目有很多交互，我总是不得不为每个查询禁用缓存。如果缓存总是向他们显示旧的缓存版本，用户将看不到他们的交互。

有办法绕过它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:25:42.207

您是在谈论在同一运行时（请求）中保存和获取新实体吗？如果是这样，那么您需要刷新实体。

```
$entity = new Entity();
$em->persist($entity);
$em->flush();
$em->refresh($entity); 
```

如果实体是托管的并且您进行了更改，这些将应用于实体对象，但仅在调用 $em->flush() 时保留到您的数据库。

如果您的缓存正在为新请求返回旧数据集（尽管它已在数据库中成功更新），那么听起来您已经发现了一个错误。你可以在这里归档>> [http://www.doctrine-project.org/jira/secure/Dashboard.jspa](http://www.doctrine-project.org/jira/secure/Dashboard.jspa)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T15:09:03.523

Doctrine2 从来没有像 deleteByPrefix 这样的删除方法，它在某个时间点（3 年前）在 Doctrine1 中，并被删除，因为它造成了更多的麻烦。

页面[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/caching.html#deleting](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/caching.html#deleting)已过时（下一个版本的doctrine2 文档将删除这些方法）。您现在唯一能做的就是手动管理缓存：找到 id 并在每次更新后手动删除它。

更高级的学说缓存是 WIP：[https](https://github.com/doctrine/doctrine2/pull/580) ://github.com/doctrine/doctrine2/pull/580 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T12:31:00.713

这是根据关于如何清除缓存的 Doctrine2 文档。我什至不确定这是你想要的，但我想这是可以尝试的。

Doctrine2 的缓存驱动程序有不同级别的删除缓存条目。

您可以通过直接 id、使用正则表达式、后缀、前缀和普通删除缓存中的所有值来删除

所以要删除你要做的一切：

```
$deleted = $cacheDriver->deleteAll(); 
```

并按前缀删除，你会这样做：

```
$deleted = $cacheDriver->deleteByPrefix('users_'); 
```

我不确定 Doctrine2 是如何命名他们的缓存 id 的，所以你必须为此挖掘。

在这里可以找到有关删除缓存的信息：http: [//docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/caching.html#deleting](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/caching.html#deleting)

要获取缓存驱动程序，您可以执行以下操作。它没有在文档中描述，所以我只是稍微跟踪了一下代码。

我假设您在此示例中有一个实体管理器实例：

```
$config = $em->getConfiguration(); //Get an instance of the configuration
$queryCacheDriver = $config->getQueryCacheImpl(); //Gets Query Cache Driver
$metadataCacheDriver = $config->getMetadataCacheImpl(); //You probably don't need this one unless the schema changed 
```

或者，我想您可以将 cacheDriver 实例保存在某种注册表类中并以这种方式检索它。但取决于你的喜好。就我个人而言，我尽量不要过多地依赖注册表。

您可以做的另一件事是告诉您正在执行的查询不要使用结果缓存。再说一次，我认为这不是你想要的，只是把它扔在那里。主要是您似乎还不如完全关闭查询缓存。那是除非它只是一些您不想使用缓存的特定查询。

这个例子来自文档：[http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/caching.html#result-cache](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/caching.html#result-cache)

```
$query = $em->createQuery('select u from \Entities\User u');
$query->useResultCache(false); //Don't use query cache on this query
$results = $query->getResult(); 
```

# javascript - 需要上传 HTML5 画布的内容

> ID：10605448
> 
> 赞同：1
> 
> 时间：2012-05-15T16:56:03.590
> 
> 标签：javascript, html

我有 HTML5 画布，用户在其中创建了图像。这是一个图像绘制程序。我现在需要抓取画布并将其发布到我的服务器。我还需要与图像一起发布一组键/值对。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:02:02.563

请参阅[将 HTML 画布捕获为 gif/jpg/png/pdf？](https://stackoverflow.com/questions/923885/capture-html-canvas-as-gif-jpg-png-pdf)了解如何使用`toDataURL`将您的画布变成图像（编码为[数据 URL](http://en.wikipedia.org/wiki/Data_URI_scheme)）。

请参阅[MDN Ajax 教程](https://developer.mozilla.org/en/AJAX/Getting_Started)以了解如何将数据异步发送到您的服务器。

# c# - 有没有办法使用 NSubstitute 对类返回值进行递归模拟

> ID：10605450
> 
> 赞同：0
> 
> 时间：2012-05-15T16:56:17.360
> 
> 标签：c#, mocking, nsubstitute

NSubstitute 在其[文档](http://nsubstitute.github.com/help/auto-and-recursive-mocks/)中这样说：

> 返回接口的方法 [...] 将自动返回自己的替代品。

通常这就足够了。但是，当我这样做时：

测试方法：

```
IUnityContainer unity = Substitute.For<IUnityContainer>();
MyMethod(unity); 
```

实际方法：

```
 public void MyMethod(IUnityContainer container)
    {
        this.container = container;

        myObject = container.Resolve<ISomeObject>();

        myObject.CallSomeMethod();
    } 
```

Resolve 方法返回一个类。所以它没有被嘲笑。这意味着当我调用时我在 myObject 中得到 null 和 null 引用异常`CallSomeMethod`；

如果我可以只返回一个模拟类（除非我专门覆盖了该接口），那就太好了。

有没有办法使用**NSubstitute**来获得这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T02:00:25.990

如果`ISomeObject`是一个接口，这应该可以正常工作。如果您想获得自动替换类，则该类需要有一个默认构造函数，并将其所有公共成员声明为虚拟。

以下测试通过了我：

```
public interface IFactory { T Resolve<T>(); }
public interface ISomeObject { void CallSomeMethod(); }

public class Tests
{
    [Test]
    public void Example()
    {
        var factory = Substitute.For<IFactory>();
        MyMethod(factory);
    }
    public void MyMethod(IFactory container)
    {
        var myObject = container.Resolve<ISomeObject>();
        myObject.CallSomeMethod();
    }
} 
```

# caching - 如何计算数据和指令缓存的未命中率

> ID：10605451
> 
> 赞同：4
> 
> 时间：2012-05-15T16:56:17.357
> 
> 标签：caching, architecture, hardware, computer-architecture

## 情况

我正在尝试回答我在过去的试卷中找到的关于指令和数据缓存的架构问题（**不是家庭作业！**）。

这个问题似乎提供了很多我没有在我的解决方案中使用的信息。这让我觉得我错过了一些东西，如果有人能帮助我，我将不胜感激！

## （完整）问题

这是论文中提出的完整问题。有关关键点的摘要，请参见下文。

> 计算具有单独指令缓存和数据缓存的机器 S 的未命中率，每个 N 字节。`I`对于指令高速缓存，每条指令有未命中`K` ，对于数据高速缓存，每 k 条指令有 d 未命中。
> 
> 一小部分`X`指令涉及数据传输，而一小部分 `Y`指令包含指令引用，其余的包含数据引用。命中需要`H`循环，未命中惩罚是`M` 循环。

## 关键问题点

**给定**：

*   数据和指令缓存是分开的
*   每个缓存都有**`N`**字节
*   **`I`**指令缓存的每条**`K`**指令未命中
*   **`D`****`K`**数据缓存的每条指令未命中
*   一小部分**`X`**指令涉及**数据传输**
*   一小部分**`Y`**指令涉及**指令引用**
*   其余指令包含**指令参考**
*   命中需要**`H`**循环
*   未命中惩罚是**`M`**循环

**计算**：机器未命中率

## 迄今为止的尝试

我最初认为未命中率会是`(I/K)*Y + (D/K)*(1 - X - Y)`，但由于这并没有使用提供的所有数据，所以我认为它不正确:(。

任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:15:39.187

我认为您可能对问题的解释有误，或者问题的框架不正确。缓存的错过率是很明显的`no. of misses/total no. of accesses`。我能想到的唯一使用问题的所有信息的是计算缓存未命中的未命中惩罚

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-29T17:24:28.827

命中时间 L1 + 未命中率 L1 * (命中时间 L2 + 未命中率 L2 * 未命中率 L2)

# gcc - 分段错误 GCC

> ID：10605453
> 
> 赞同：1
> 
> 时间：2012-05-15T16:56:41.030
> 
> 标签：gcc, compiler-construction, segmentation-fault, internal

我正在修改 gcc，特别是在 OpenMP 中添加了一个新子句。

编译我的测试程序后，它给了我这个错误：

```
"test.c: In function 'main':
test.c:10:1: internal compiler error: Segmentation fault" 
```

我该如何调试？

我已经搜索了一段时间，但没有找到有用的信息......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:50:38.550

这是关于 gdb 的一个很好的教程： [http ://www.cs.cmu.edu/~gilpin/tutorial/](http://www.cs.cmu.edu/~gilpin/tutorial/)

# php - 使用 mysql_* API 从 MySQL 中选择一行

> ID：10605456
> 
> 赞同：13
> 
> 时间：2012-05-15T16:56:46.487
> 
> 标签：php, mysql

我有以下查询：

```
$result = mysql_query("SELECT option_value FROM wp_10_options WHERE option_name='homepage'");
$row = mysql_fetch_array($result);
print_r ($row); 
```

我得到的输出是：

> 资源 ID #2

最终，我希望能够像这样回显一个字段：

```
$row['option_value'] 
```

无需使用 while 循环，因为我只是想获得一个字段，所以我看不到重点。

我试过使用 mysql_result 也没有运气。

我哪里错了？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-15T17:38:22.237

尝试使用**mysql_fetch_assoc 。**它将返回与获取的行相对应的字符串关联数组，如果没有更多行，则返回 FALSE。此外，如果您真的期望单行，则必须添加**LIMIT 1 。**

```
$result = mysql_query("SELECT option_value FROM wp_10_options WHERE option_name='homepage' LIMIT 1");
$row = mysql_fetch_assoc($result);
echo $row['option_value']; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T17:02:15.863

```
$result = mysql_query("SELECT option_value FROM wp_10_options WHERE option_name='homepage'");
$row = mysql_fetch_assoc($result);
echo $row['option_value']; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-30T09:31:31.430

功能`mysql_`不再受支持，已在`PHP 7`. 您必须[`mysqli_`](https://www.php.net/manual/en/mysqli.query.php)改用。但是现在不推荐使用这种方法。您应该考虑[`PDO`](https://www.php.net/manual/en/book.pdo.php)使用更好的安全解决方案。

```
$result = mysqli_query($con, "SELECT option_value FROM wp_10_options WHERE option_name='homepage' LIMIT 1");
$row = mysqli_fetch_assoc($result);
echo $row['option_value']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T17:07:48.083

用于`mysql_fetch_assoc`在关联数组中获取结果，而不是`mysql_fetch_array`返回数字索引数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-09T15:29:22.330

虽然`mysql_fetch_array`会输出数字，但它用于处理大块。要回显行的内容，请使用

```
echo $row['option_value']; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-08T19:58:53.710

如果您只想选择一个选项值，请尝试此选项。

```
$result = mysql_query("SELECT option_value FROM wp_10_options WHERE option_name='homepage'");
$row = mysql_fetch_array($result);
echo $row['option_value']; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T17:00:48.713

使用此代码您应该得到的输出是：

```
Array () 
```

...这正是您获得一行的方式，您不需要while循环。您确定要打印正确的变量吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-15T17:09:57.473

> 最终，我希望能够像这样回显一个信号字段：
> 
> ```
>  $row['option_value'] 
> ```

那你为什么不呢？它应该工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-03T11:04:20.617

它对我有用..

```
$show = mysql_query("SELECT data FROM wp_10_options WHERE
 option_name='homepage' limit 1"); $row = mysql_fetch_assoc($show);
 echo $row['data']; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-01-22T12:53:56.353

这是 WordPress 吗？你不应该像以前那样做！要从数据库中获取选项，请使用[`get_option`](https://codex.wordpress.org/Function_Reference/get_option)！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-15T15:58:33.220

这应该工作

```
 <?php

require_once('connection.php');

 //fetch table rows from mysql db
$sql = "select  id,fname,lname,sms,phone from data";

    $result = mysqli_query($conn, $sql) or die("Error in Selecting " . mysqli_error($conn));

    //create an array
    $emparray = array();

for ($i = 0; $i < 1; $i++) {
   $row =mysqli_fetch_assoc($result);

} $emparray[] = $row;
         echo $emparray ;
    mysqli_close($connection);
?> 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2017-04-30T21:43:58.853

确保您的 ftp 传输处于二进制模式。

# regex - 样式化 WordPress 的 wp_link_pages()

> ID：10605457
> 
> 赞同：2
> 
> 时间：2012-05-15T16:56:46.643
> 
> 标签：regex, wordpress

我`wp_link_pages()`用来显示分页，它看起来像：

```
1
<a href="/2">2</a>
<a href="/3">3</a>
<a href="/4">4</a> 
```

由于这只是返回一个像上面这样格式化的 html 字符串，我发现很难将当前页码包装在一个跨度中，看起来像：

```
<span class="current">1</span>
<a href="/2">2</a>
<a href="/3">3</a>
<a href="/4">4</a> 
```

如何在跨度标签中包装一个用空格（有时没有甚至`<a>`标签）包围的数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T22:31:07.647

将此代码放在functions.php中

```
function custom_wp_link_pages( $args = '' ) {
    $defaults = array(
        'before' => '<p id="post-pagination">' . __( 'Pages:' ), 
        'after' => '</p>',`enter code here`
        'text_before' => '',
        'text_after' => '',
        'next_or_number' => 'number', 
        'nextpagelink' => __( 'Next page' ),
        'previouspagelink' => __( 'Previous page' ),
        'pagelink' => '%',
        'echo' => 1
    );

    $r = wp_parse_args( $args, $defaults );
    $r = apply_filters( 'wp_link_pages_args', $r );
    extract( $r, EXTR_SKIP );

    global $page, $numpages, $multipage, $more, $pagenow;

    $output = '';
    if ( $multipage ) {
        if ( 'number' == $next_or_number ) {
            $output .= $before;
            for ( $i = 1; $i < ( $numpages + 1 ); $i = $i + 1 ) {
                $j = str_replace( '%', $i, $pagelink );
                $output .= ' ';
                if ( $i != $page || ( ( ! $more ) && ( $page == 1 ) ) )
                    $output .= _wp_link_page( $i );
                else
                    $output .= '<span class="current-post-page">';

                $output .= $text_before . $j . $text_after;
                if ( $i != $page || ( ( ! $more ) && ( $page == 1 ) ) )
                    $output .= '</a>';
                else
                    $output .= '</span>';
            }
            $output .= $after;
        } else {
            if ( $more ) {
                $output .= $before;
                $i = $page - 1;
                if ( $i && $more ) {
                    $output .= _wp_link_page( $i );
                    $output .= $text_before . $previouspagelink . $text_after . '</a>';
                }
                $i = $page + 1;
                if ( $i <= $numpages && $more ) {
                    $output .= _wp_link_page( $i );
                    $output .= $text_before . $nextpagelink . $text_after . '</a>';
                }
                $output .= $after;
            }
        }
    }

    if ( $echo )
        echo $output;

    return $output;
} 
```

并打电话给`custom_wp_link_pages()`

资料来源：[http ://bavotasan.com/2012/a-better-wp_link_pages-for-wordpress/](http://bavotasan.com/2012/a-better-wp_link_pages-for-wordpress/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:54:26.463

**为什么正则表达式作为标签？**

你需要使用类似的东西：

**段落标签中的页面链接**

```
<?php wp_link_pages('before=<p>&after=</p>&next_or_number=number&pagelink=page %'); ?> 
```

显示包裹在段落标签中的页面链接。

**DIV 中的页面链接**

```
<?php wp_link_pages('before=<div id="page-links">&after=</div>'); ?> 
```

在 DIV 中显示页面链接以供 CSS 参考为`<div id="page-links">`.

文档参考：[http ://codex.wordpress.org/Function_Reference/wp_link_pages](http://codex.wordpress.org/Function_Reference/wp_link_pages)

# fullcalendar - 调整包含事件而不是事件“调整大小”的 DIV 事件段

> ID：10605462
> 
> 赞同：0
> 
> 时间：2012-05-15T16:57:18.920
> 
> 标签：fullcalendar

## 快速背景：

*   我正在为美国的几个地区制作带薪休假 (PTO) 日历。
*   我正在使用 Zend 框架、jquery、fullcalendar、www.adipalaz.com 的 Expand/All 以及自定义的“更多...”链接
*   我有 3 个不同的 jquery 选项卡，每个选项卡上都有一个新的日历实例（1 级）
*   每个选项卡都有与 PTO 相关的不同主题，有 3 个手风琴部分
*   每个选项卡一个手风琴部分有一个过滤器来过滤日历上的结果
*   每个选项卡的一个手风琴部分上有一个日历（第 2 级）
*   第一个日历通过 JSON 调用/提要从两个不同的事件源中提取
*   此日历根据地区拉取 PTO
*   区域显示为全天事件
*   每个“事件”都是使用 www.adipalaz.com 的展开/折叠（3 级）
*   当使用 www.adipalaz.com 展开或折叠每个“事件”时，AJAX 调用会拉取与该区域相关的所有 PTO
*   每个扩展的 AJAX 调用都会隐藏有关额外信息的详细信息，除非单击自定义“更多...”链接（级别 4）
*   每个自定义更多链接也有一些动作（5级）

现在，上述所有工作。

我有一个处理“3 级”及以上的 .click 函数。这个 .click 函数的一部分是 AJAX 调用，另一部分获取并设置 z-index，以便我的“4 级”数据弹出所有其他未扩展的“3 级”数据。
到目前为止，该功能还不错。问题是我的所有基础数​​据仍然需要可见。

## 我的多层问题

1.  重新渲染日历上的所有事件，以便无论单击“级别 3”如何，一周和事件都可见

2.  一旦重新渲染不会丢失“级别 3” .click 动作，如果我使用 $('#calendar1').fullCalendar('rerenderEvents'); 并且不会丢失在尝试重新呈现事件之前显示的“级别 3”数据。

我有图像可以直观地解释我的问题，但由于这是我的第一篇文章，因此无法上传。如果您知道如何帮助我并且需要查看图片，请告诉我。

目前，这就是我对这个问题的全部了解：

```
//POPS THE OPEN ITEM UP IN Z-INDEX
$(uniqueID).parent().parent().css('z-index',9);

//THIS FINDS OUT WHAT TO ADD
changeSizeOfDiv = $(uniqueID).next('.fc-event-names').html(data).outerHeight()
     + $('.fc-week' + level + ' .fc-sun').outerHeight();

//THIS ALTERS THE ROW SIZE
$('tr.fc-week' + level).css('height',changeSizeOfDiv); 
```

我还没有弄清楚如何动态更新以下行“top：#px;” 单击一个区域后。我认为通过使用 changeSizeOfDiv 函数将自上而下推倒应该可以工作，但到目前为止我不知道如何做到这一点，更不用说优雅地做到这一点了。

任何想法都会受到欢迎。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:34:43.763

所以在很多帮助下，这就是我想出的，它就像一个魅力。我将此添加到日历初始化中

```
eventClick: function(event, element) {
    if (typeof event.originalTitle == 'undefined') {
        event.originalTitle = event.title;        
    }

    if (event.loaded) {
        event.title = event.originalTitle;
        event.loaded = false;
        $('#calendar1').fullCalendar('updateEvent',event);
    } else {
        $.ajax({
            url: regionNamesUrl + getFilterUrlPart(event.segmentDate,event.region),
            dataType: 'html',
            cache: false,
            success: function(data){                                
                event.title = event.originalTitle + '<br/><br/>' +data;
                event.loaded = true;

                $('#calendar1').fullCalendar('updateEvent',event);

                clicker(event,'approved');
                clicker(event,'cancelled');
            },
            error: function(data){
                alert('An error has occurred retrieving data from the server.  Try reloading the page.');
            }
      });
    }                
} 
```

# jsf - 在 h:selectOneMenu 中使用 JSF 转换器导致验证错误：值无效

> ID：10605468
> 
> 赞同：3
> 
> 时间：2012-05-15T16:57:46.550
> 
> 标签：jsf, converter

我有这个 SelectOneMenu：

```
<h:selectOneMenu value="#{orderController.requestVO.requestSituation}">
    <f:converter converterId="ComboConverter"/>
    <f:selectItems value="#{orderController.requestSituation}" var="requestSituation"
                                                   itemLabel="#{requestSituation.description}" itemValue="#{requestSituation}" />
</h:selectOneMenu> 
```

这`requestSituation`是一个`ArrayList`填充`RequestSituationVO` 它正确填充，生成这个HTML：

```
<select name="j_idt14:j_idt20" size="1">
        <option value="13">Pedido Recusado</option>
    <option value="11">Pedido Validado</option>
    <option value="12" selected="selected">Pedido Confirmado</option>
    <option value="12" selected="selected">Pedido Faturado</option>
</select> 
```

我有这个`Converter`，这就是我感到困惑的地方，我读了很多书，我知道它必须做什么，但不知道它是如何工作的。

这里是：

```
@FacesConverter(value = "ComboConverter", forClass = RequestSituationVO.class)
public class ComboConverter implements Converter
{

    private static RequestSituationVO requestSituationVO = new RequestSituationVO();

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value)
    {
        requestSituationVO.setId(Integer.valueOf(value));
        requestSituationVO = (RequestSituationVO) new RequestSituationBO().getRequestSituation(requestSituationVO).toArray()[0];
        return (RequestSituationVO) requestSituationVO;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value)
    {
        requestSituationVO = (RequestSituationVO) value;
        String teste = String.valueOf(requestSituationVO.getId());
        return teste;
    }
} 
```

当我提交我的页面时，我认为`SelectOneMenu`会自动设置`requestSituation`方法的值 from `requestVO`。但是当我提交时，我收到一条`Value not valid`引用我的`SelectOneMenu`.

我需要在 my 上设置选定的值，`RequestSituationVO`以便将其发送到 Business 方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T17:26:47.300

你的转换器没问题。否则你会得到一个转换错误，比如

> 'null Converter' 的转换错误设置值'com.example.RequestSituationVO@hashcode'

你有一个验证错误。当对列表中任何可用项目[`Object#equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)的所选项目的测试未返回时，将抛出此特定项目。`true`JSF 正在检查以防止被篡改请求的攻击。在您的特定情况下，这可能有以下原因：

*   类的`equals()`方法`RequestSituationVO`丢失或损坏。
*   在`#{orderController.requestSituation}`显示表单的请求和处理表单提交的请求之间发生了不兼容的变化。

我认为是前者。鉴于您`RequestSituationVO`具有`Integer id`唯一标识对象的属性，这应该这样做：

```
@Override
public boolean equals(Object other) {
    return (other instanceof RequestSituationVO) && (id != null)
        ? id.equals(((RequestSituationVO) other).id)
        : (other == this);
}

@Override
public int hashCode() {
    return (id != null)
        ? (this.getClass().hashCode() + id.hashCode())
        : super.hashCode();
} 
```

如果`equals()`方法不是问题，那么是后者的原因。这可以通过确保`#{orderController.requestSituation}`在显示表单和处理表单提交期间返回完全相同的列表来解决。这可以通过将 bean 放在视图范围内而不在 getter 中执行业务逻辑来实现。或者，如果它实际上表示应用程序范围的数据，您可以将其重构为单独的应用程序范围 bean。

### 也可以看看

*   [我们的`selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T17:25:09.943

看起来你忘了实现`equals`and `hashCode`in `RequestSituation`。
这**非常重要**，因为 JSF 会将提交的值与所有给定的项目进行比较。

如果你不实现`equals`，它认为提交的项目不在列表中，
所以它会拒绝它。( `The value is not valid.`)

# c++ - 检查值是否存在于 16 个容器中

> ID：10605469
> 
> 赞同：3
> 
> 时间：2012-05-15T16:57:48.623
> 
> 标签：c++, multithreading, hash, map, pthreads

我有 16 个线程来计算密钥的哈希值。我试图在线程之间分配工作，因为计算哈希并检查它是否以线性方式存在只使用了我 cpu 功率的一小部分。目前，我正在使用一个所有线程都可以使用互斥锁访问的地图容器。然而，由于实际的散列几乎不需要任何时间，线程大多处于空闲状态，等待另一个线程完成其业务，使用 map::count 检查键是否存在于映射中。

该程序的主要目标是蛮力检查碰撞，因为在我将它添加到我的项目之前，我需要确保没有碰撞。

有没有办法使用单独的映射或其他容器，并确定所述键是否存在，而不是在所有线程完成后使用每个键线性搜索每个映射？某种排队系统呢？

编辑：这是我试图线程的功能：

```
int coll = 0;
map<long, bool> mymap;
string temp;
long myhash;
for (int i = 0; i < 256; i++)
  for (int j = 0; j < 256; j++)
    for (int k = 0; k < 256; k++)
    {
      temp = i;
      temp += j;
      temp += k;
      temp += temp;
      myhash = hash(temp.c_str());

      if (mymap.count(myhash))
      {
        coll++;
        cout << "Collision at " << i << " " << j << " " << k << endl;
      }
      else
      {
        mymap[myhash] = true;
      }
  }

cout << "Number of collisions: " << coll << endl;
cout << "Map size: " << mymap.size() << endl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:01:28.013

这个算法似乎很容易与 OpenMP 并行化：

```
int coll = 0;
map<long, bool> mymap;

#pragma omp parallel for
for (int i = 0; i < 256; i++)
  for (int j = 0; j < 256; j++)
    for (int k = 0; k < 256; k++)
    {
      string temp = i;
      temp += j;
      temp += k;
      temp += temp;
      long myhash = hash(temp.c_str());

      if (mymap.count(myhash))
      {
        #pragma omp atomic
        coll++;
        cout << "Collision at " << i << " " << j << " " << k << endl;
      }
      else
      {
        #pragma omp critical
        mymap[myhash] = true;
      }
  } 
```

一些解释：首先我们假设冲突非常罕见（如果冲突频繁，这将是一个非常糟糕的哈希表实现）。鉴于此，当一个线程插入某个键时，另一个线程同时插入完全相同的键是不太可能的，因为它碰巧偶然发现了一个散列到完全相同的键的不同值。此外，即使是这种情况，也只需其中一个将值设置为 true，因为它不能返回 false，并且后续的“插入”只会用 true 覆盖 true。因此，在我看来，除了增量之外`coll`不需要进一步的同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:05:39.737

尽管上面已经回答了这个问题，但您可以通过替换 std::map::count() 来提高性能，并通过数组运算符插入更有效的东西

其中一个 std::map::insert() 方法返回一对，如果元素已经存在于地图中，则 bool 成员将为 false。像这样的东西：

```
 int coll = 0;
typedef map<long, bool> MY_MAP_TYPE;
MY_MAP_TYPE mymap;
string temp;
long myhash;
for (int i = 0; i < 256; i++)
    for (int j = 0; j < 256; j++)
        for (int k = 0; k < 256; k++)
        {
            temp = i;
            temp += j;
            temp += k;
            temp += temp;
            myhash = hash(temp.c_str());
            if( mymap.insert( MY_MAP_TYPE::value_type( myhash, true ) ).second == false)
            {
                coll++;
                cout << "Collision at " << i << " " << j << " " << k << endl;
            }
        } 
```

# c# - C#父表单不从子更新

> ID：10605471
> 
> 赞同：1
> 
> 时间：2012-05-15T16:57:54.983
> 
> 标签：c#, winforms

我有两个表格 **父表格：**属性：总值。加载子窗体的按钮。 **子窗体：**属性：插入值。

当我运行应用程序时，首先加载父表单。我可以通过单击按钮加载第二个（子）表单。问题是当我在子表单中插入值时，即使我通过委托和其他方法传递值，父表单也没有显示任何更改。

我不想重新加载父窗口。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:03:40.727

您应该做的是为子级创建事件（或使用现有事件，如果他们会完成这项工作）并让父表单订阅这些事件。

一个常见的例子是让父级隐藏自己，显示子级，然后在子级关闭时再次显示自己。这是一些执行此操作的代码：

```
//in parent form
private void someButtonClickHander(object sender, EventArgs args)
{
  ChildForm child = new ChildForm();
  this.Hide();

  child.Closing += (sender2, args2) => 
  {
    var someResultFromChildForm = child.SomePropertyOnChildForm;
    this.Show();
  }

  child.Show();
} 
```

如果关闭事件对您不起作用（也许您想在子窗体按下按钮时做某事），您可能需要让子窗体创建它自己的事件。MSDN 或其他网站上有很多关于如何做到这一点的教程。如果您对此（或此设计的任何其他方面）有疑问，请在评论中要求澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:04:54.517

如果您想在多个表单之间保持数据一致，我建议将数据放入您可以从两个表单访问的对象中。

最直接的方法是为对象实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms229614.aspx)，这样您就可以在两种形式中绑定到该对象，并且所做的任何更改都会触发属性更改事件。

对于更复杂的场景，我创建了一个具有可以订阅的自定义事件的对象，因为 INotifyPropertyChanged 可能缺乏复杂场景中所需的微妙之处。例如，我的主导航表单有一个“Helm”对象，所有 UI 元素都订阅该对象。如果发生导航事件，则 helm 会完成所有导航和数据加载，然后触发 UI 侦听的一系列事件。

对于一个简单的父子来说，这似乎有点过头了，但是这个模型（对于 UI 简单订阅的当前状态有一个事实）允许您的 UI 发展并且 UI 的每个元素只担心自己的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:05:08.963

在您的子表单中有一个名为**Parent的属性。**当您创建 Child 的实例时，将当前对象（父表单对象）传递给构造函数，您将在其中将其设置为 child 的 Parent 属性值。在父表单中在您的父表单中有一个公共方法。磷

父窗体

```
Form1 : Form
{    
    decimal _totalPrice;

    public void UpdateTotal(decimal val)
    {
      _totalPrice=_totalPrice+val;
      lblTotal.Text=_totalPrice.ToString();
    }    
} 
```

子表

```
Form2:Form
{
  public Form1 Parent { set;get;}
  public Form2(Parent parent) 
  { 
    this.Parent =parent;
  }    
} 
```

创建子窗体的对象时

```
Form2 objChjild=new Child(this);
//do whatever 
```

现在从子窗体中，如果您想更新总数，

像这样打电话

```
this.Parent.UpdateTotal(200); 
```

# macos - 错误 ['\+' 是在创建 R 包时以“\+”开头的字符串中无法识别的转义

> ID：10605485
> 
> 赞同：19
> 
> 时间：2012-05-15T16:58:57.433
> 
> 标签：macos, r, package, x11

我尝试使用我创建的一些函数和脚本（在 Mac 上使用 X11）创建一个包。在 R CMD check 进行工作时，遇到了如下问题：

```
temp = trim(unlist(strsplit(lp.add(ranefterms[[i]]), 
+                     "\+")))
Error: '\+' is an unrecognized escape in character string starting "\+" 
```

然而，最奇怪的是我的函数实际上没有“\ +”。相反，它有“\ \ +”（见下文）。所以不知道为什么“\ \ +”被识别为“\ +”。

```
for(i in 1:n)
   temp = trim(unlist(strsplit(lp.add(ranefterms[[i]]), '\\+'))) 
```

为了进一步挖掘，我查看了 Rcheck 文件夹中的 packageName-Ex.R 文件。事实证明，在检查过程中，所有“\ \”都已更改为“\”（例如，strsplit() 和 grepl() 等函数需要的双斜杠）

我想知道可能是什么原因造成的。抱歉，我无法想出一个可重现的例子......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-15T17:27:16.873

有问题的代码来自您的一个帮助文件的示例部分（这就是它最终出现在 中的原因`packageName-Ex.R`）。`*.Rd`要修复它，只需使用第二个反斜杠转义文档文件的示例部分中的每个反斜杠。（因此，键入`\\`get`\`进入已处理的帮助文件，然后键入`\\\\`get `\\`。）

除非它被转义，否则将`\`被解释为标识分段和标记宏的特殊字符（即命令，如`\author`、`\description`、`\bold`和`\ldots`）。引用 Duncan Murdoch 的[**Parsing Rd 文件**](http://developer.r-project.org/parseRd.pdf)（本主题的官方手册）：

> 反斜杠 \ 用作转义字符：\、\%、{ 和} 删除第二个字符的特殊含义。

作为实际情况的示例，这里是 的一部分，它被处理以创建您在键入或`$R_SOURCE_HOME/src/library/base/man/grep.Rd`时看到的帮助文件。`?grep``?gsub`

```
## capitalizing
txt <- "a test of capitalizing"
gsub("(\\\\w)(\\\\w*)", "\\\\U\\\\1\\\\L\\\\2", txt, perl=TRUE)
gsub("\\\\b(\\\\w)",    "\\\\U\\\\1",       txt, perl=TRUE) 
```

在处理后的帮助文件中，它看起来像这样：

```
 ## capitalizing
 txt <- "a test of capitalizing"
 gsub("(\\w)(\\w*)", "\\U\\1\\L\\2", txt, perl=TRUE)
 gsub("\\b(\\w)",    "\\U\\1",       txt, perl=TRUE) 
```

# asp.net - 计划任务或定时器类

> ID：10605493
> 
> 赞同：0
> 
> 时间：2012-05-15T16:59:32.393
> 
> 标签：asp.net, iis, timer, scheduled-tasks

说到服务器资源（通常）和后台进程。使用单独的可执行文件和 Windows 计划任务或使用计时器类并使用与您的应用程序相同的资源会更好吗？

这两种方法都有一些优点和缺点，但我想知道的是：使用共享资源（线程池等）会比单独的资源更好吗？当然，这个过程会从应用程序中获取资源，但它在技术上不是已经这样做了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:04:35.440

您提供的上下文太少，无法真正理解整体。如果应用程序关闭或没有人连接（登录），计时器如何在特定时间触发活动？对于 ASP.NET 和 Windows 客户端，这种情况保持不变，因为 IIS 在一段时间内没有人连接时会关闭应用程序。

在我看来，Windows 的计划任务要好得多，因为您可以从 IIS 应用程序池/应用程序生命周期中分离出来，并且您还可以更好地分离，并确保届时将执行调用并开始活动。

# javascript - XMLHttpRequest 和调用 Javascript

> ID：10605494
> 
> 赞同：0
> 
> 时间：2012-05-15T16:59:40.740
> 
> 标签：javascript, asp.net, html, xmlhttprequest

在页面加载时，我调用函数 LinkPages() 并将其 HTML 添加到 aa DIV。

母版页.aspx

```
 function LinkPages()
    var xmlhttp;
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
    }
    else {// code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
    alert(xmlhttp.responseText);
    }
    }
    xmlhttp.open("GET", "Page1.aspx", true);
    xmlhttp.send();
    } 
```

我遇到的问题是 Page1.aspx 在函数 GetMessage 中也有一个 XMLHttpRequest，它永远不会被调用。GetMessage() 假设在 Page1.aspx 上设置 span 的 innerHTML 并且它没有被调用。

第1页.aspx

```
 function GetMessage()
    var xmlhttp;
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
    }
    else {// code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        document.getElementById("lblMessage").innerHTML = xmlhttp.responseText;
    }
    }
    xmlhttp.open("GET", "wfrmHelper.aspx?action=message", true); --returns string
    xmlhttp.send();
    } 
```

是否可以在 XMLHttpRequest 的页面上调用 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:08:57.403

在 MasterPage.apsx 上的第一个 XHR 中，您正在调用服务器并取回一些 HTML（我猜这个 Javascript GetMessage 混合在该页面的某个地方）。除非您将 XHR 的 responseText 附加到文档中，否则 JavaScript 将永远不会被评估。所以...在 LinkPages() 中，您需要将 XKR 调用的响应添加到文档中，然后浏览器将评估 GetMessage 函数。在它被添加之前，它只是内存中的一个字符串。在您将它放在 DOM 上之前，它实际上不会变成脚本。我希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:18:03.867

在您的情况下，iframe 可能会更好：

```
<iframe src="Page1.aspx" onload="LinkPages()"></iframe> 
```

如果您更喜欢 xmlHttpRequest，那么您需要找到一种在收到响应后运行脚本的方法，正如 @aaronfrost 所解释的那样。像 jQuery 这样的库会为你做这件事（如果你使用 jQuery.load，jQuery 有一个可以运行脚本的 globalEval 函数）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T17:09:02.670

Re: 是否可以在 XMLHttpRequest 的响应页面中调用 javascript？

是的，但是当您将响应添加到页面时，它不会自动发生。

相反，您需要在响应中找到脚本，然后调用每个脚本。

更好的是响应包含两个部分：一个用于 html，另一个用于要执行的脚本。例如，响应在 JSON 结构中有两个属性：

```
 {'html': '<div>blah blah....',  // the html part of the response
  'js':  'the javascript....'} // the javascript that you want to execute 
```

**还**

*   您还需要考虑传入的 JS 是否依赖于您需要加载的任何库。可以在运行时添加新的库脚本。
*   直接调用 xmlhttprequest 是一个非常糟糕的主意。使用 jQuery 或其他库作为中间体。

**添加**

为什么直接调用 xmlhttprequest 是个坏主意：

1.  **错误。**您必须编写更多软件（而不是使用库）。更多 sw == 更多错误、更多维护等。一个坏主意。
2.  **测试。**您的软件必须变得依赖于功能或依赖于浏览器。无论哪种方式，您的代码都比依赖于许多人/应用程序使用的经过良好测试和支持的库更脆弱。该库的广泛使用使您可以确保它随着浏览器的变化而继续正常运行。
3.  **可维护性。**与使用标准库的软件相比，您的附加软件（用于处理不同的浏览器案例）需要维护人员更长的时间来理解和更新。
4.  **费用。**更多的错误、更少的测试和更多的维护难度意味着随着时间的推移，您的软件将比使用标准库的 sw 成本更高。
5.  **虚假经济。**JS 库有很多选择。如果下载大小有问题，您可以使用更完整的（更大）或更小、更轻的库。（请注意，我说应该使用 lib，我当然没有说需要使用 jQuery。）
6.  **重复的代码。**现在库非常普遍，一个库已经被页面加载或者可以从浏览器缓存中加载的可能性非常大。在任何一种情况下，使用非库代码都会比使用库占用更多的空间/时间。

总之，不使用标准库的唯一原因是如果您是学生并且作业禁止使用库。

我看不出一个熟练的开发人员有什么理由不使用库来覆盖 Ajax 调用的浏览器不兼容性。如果您不同意，请提供评论。

# android - 如何使图像在定义区域之外透明？

> ID：10605496
> 
> 赞同：0
> 
> 时间：2012-05-15T16:59:46.173
> 
> 标签：android, image, android-layout, surfaceview

我正在尝试创建在指定区域后图像不可见的效果。示例：就像兔子在洞里..当它进入洞下时，它的身体不应该慢慢可见..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T18:04:36.887

如果您将多个图像与透明区域分层，则可以隐藏图像区域

![Uberbunnydrawing](../Images/991c7e9e3363c1c373183bd89178c064.png)

图片左侧是兔子，右侧是侧面视图。您需要三张图像（棕色、红色和灰色一张），不是棕色/红色/灰色的部分将是透明的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T01:58:24.227

有两种不同的方法可以合成具有选择性透明度的图像：您可以使用 zapl 的答案中描述的 alpha 通道，或者您可以使用[路径](http://developer.android.com/reference/android/graphics/Path.html)或[区域](http://developer.android.com/reference/android/graphics/Region.html)剪辑每一层的绘图- 请参阅`clipxxx`绘图时可以使用的调用[帆布](http://developer.android.com/reference/android/graphics/Canvas.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T17:40:44.850

无论如何感谢@zapl和lawrence的提示..我使用了画布的剪辑矩形，它工作得很好..示例代码如下..

```
 c.clipRect(0, 0, 150, 150);
      c.clipRect(0, 70, 100, 150, Region.Op.DIFFERENCE);
      c.drawBitmap(bm, 20, y, null); 
```

# android - Android 2.3.3 模拟器启动时显示“Android_”

> ID：10605499
> 
> 赞同：0
> 
> 时间：2012-05-15T17:00:30.527
> 
> 标签：android, android-emulator, avd

我正在设置 Android 2.3.3 模拟器以开始进行 Android 编程。我！

[以下是我为 AVD http://i.stack.imgur.com/ZXPag.jpg](http://i.stack.imgur.com/ZXPag.jpg)设置的参数

我已经在 Eclipse Indigo 中安装了 Android SDK、ADT 插件。当我试图在我的 Eclipse 中执行一个 hello world 程序时，模拟器启动了，然后显示了一个带有“Android_”的黑屏。模拟器上的按钮都不起作用，我的程序也没有运行。

[http://i.stack.imgur.com/0uaFr.jpg](http://i.stack.imgur.com/0uaFr.jpg)

我是 Android 编程新手，并按照“开始 Android™ 应用程序开发”一书编写我的 Hello World 程序。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:04:37.450

给它时间。打开 Logcat（窗口 -> 显示视图 -> 其他 -> Logcat），您会看到“电话”正在启动。通常需要大约一分钟左右，具体取决于您的机器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:15:39.897

尝试通过**AVD Manager**启动模拟器并等待几分钟。**您可以在DDMS**的设备视图中检查进度，这将使您了解模拟器是否会启动。如果问题仍然存在，请尝试在**擦除用户数据**的情况下启动模拟器。

# java - 如何检查文件夹中是否存在具有特定扩展名的文件

> ID：10605511
> 
> 赞同：1
> 
> 时间：2012-05-15T17:01:19.857
> 
> 标签：java, filefilter

> **可能重复：**
> [如何检查文件是否存在与 Java 中的通配符？](https://stackoverflow.com/questions/8752034/how-to-check-a-file-if-exists-with-wildcard-in-java)

我对Java非常陌生。我正在做一些作业，其中我必须检查文件夹中是否存在扩展名为.css的文件。如何使用java准确检查文件夹中存在的.css扩展文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:05:49.433

下面的代码可能会对您有所帮助。

```
public class FindCertainExtension {

    private static final String FILE_DIR = "c:\\folder";
    private static final String FILE_TEXT_EXT = ".jpg";

    public static void main(String args[]) {
        new FindCertainExtension().listFile(FILE_DIR, FILE_TEXT_EXT);
    }

    public void listFile(String folder, String ext) {

        GenericExtFilter filter = new GenericExtFilter(ext);

        File dir = new File(folder);

        if(dir.isDirectory()==false){
            System.out.println("Directory does not exists : " + FILE_DIR);
            return;
        }

        // list out all the file name and filter by the extension
        String[] list = dir.list(filter);

        if (list.length == 0) {
            System.out.println("no files end with : " + ext);
            return;
        }

        for (String file : list) {
            String temp = new StringBuffer(FILE_DIR).append(File.separator)
                    .append(file).toString();
            System.out.println("file : " + temp);
        }
    }

    // inner class, generic extension filter
    public class GenericExtFilter implements FilenameFilter {

        private String ext;

        public GenericExtFilter(String ext) {
            this.ext = ext;
        }

        public boolean accept(File dir, String name) {
            return (name.endsWith(ext));
        }
    }
} 
```

享受 ！！！

# ruby-on-rails - 如何从其他网站获取元数据并在我的 ruby on rails 中显示？

> ID：10605513
> 
> 赞同：1
> 
> 时间：2012-05-15T17:01:22.917
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

使用 FB 或 Google + 时，我可以将任何网站的链接粘贴到状态更新框中，它会立即加载有关该网站的信息，并可选择浏览缩略图。

我怎样才能在 ruby​​ on rails 中实现这一点？我所有的搜索似乎都提出了如何做到这一点的 php 方法。

为了获取视频数据信息，我使用了 Ruby Open Graph Protocol gem。有什么东西可以像 FB 和 G+ 那样抓取数据吗？如果没有，是否有标准方法在 rails/ruby 中完成，如果有的话..这是怎么做的？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:05:58.163

我认为您正在寻找类似 oembed 的东西。我已经找到了一个宝石，所以我建议你看看它：[https](https://github.com/judofyr/ruby-oembed) ://github.com/judofyr/ruby-oembed或[https://github.com/embedly/embedly-ruby](https://github.com/embedly/embedly-ruby)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:54:07.157

您可能应该使用像[http://nokogiri.org/这样的 gem](http://nokogiri.org/)

它允许您像使用 jQuery 一样使用 html 页面。非常便利。

# sql - 我的查询给了我错误的 ID

> ID：10605515
> 
> 赞同：0
> 
> 时间：2012-05-15T17:01:34.600
> 
> 标签：sql, sqlite

我有四个表：A、B、C、D。D 对 C 有一个 FK，C 对 B 有一个 FK，B 对 A 有一个 FK。每个表都有一个 ID 列。除了 ID 和 CID，表 D 还具有 Value 和 Timestamp（整数）。给定某个时间，我需要时间戳之前的 D 行，但每个 CID 最接近它的行——除非时间戳之前没有行，在这种情况下，我需要时间戳之后的第一个值。我正在使用 Sqlite。

忽略最后一个要求，我尝试使用此查询获取时间戳之前的值，但返回的 ID 是错误的：

```
SELECT  * 
FROM    D d 
INNER JOIN C c ON d.CID = c.ID 
INNER JOIN B b ON C.BID = b.ID
WHERE   b.AID = @AID AND d.Timestamp = 
        (
        SELECT  MAX(d2.Timestamp) 
        FROM    D d2 
        WHERE   d2.Timestamp < @StartTime 
                AND d2.CID = D.CID
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T23:12:38.857

此查询应在查询的第一部分（在 UNION ALL 之前）获取 @StartTime 之前的最后一个条目，然后将其与 @StartTime 之后的第一个条目结合起来。剩下的就是为每个 CID 选择最小的条目。

```
SELECT d2.*
FROM (
  SELECT D.ID, MAX(D.Timestamp)
  FROM D d
    INNER JOIN C c ON c.ID = d.CID
      INNER JOIN B b on b.ID = c.BID
  WHERE b.AID = @AID AND d.Timestamp <= @StartTime 
  GROUP BY d.CID) AS results
INNER JOIN D d2 ON d2.ID = results.ID

UNION ALL 

SELECT d2.*
FROM (
  SELECT D.ID, MIN(D.Timestamp)
  FROM D d
    INNER JOIN C c ON c.ID = d.CID
      INNER JOIN B b on b.ID = c.BID
  WHERE b.AID = @AID AND d.Timestamp > @StartTime 
  GROUP BY d.CID) AS results
INNER JOIN D d2 ON d2.ID = results.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:15:33.930

这可能有效，但仍然对您想要的内容感到有些困惑。

```
SELECT  *,
(CASE WHEN d.Timestamp < @StartTime THEN 1 ELSE 0) AS timeCheck
FROM    D d 
INNER JOIN C c ON d.CID = c.ID 
INNER JOIN B b ON C.BID = b.ID
WHERE   b.AID = @AID
ORDER BY timeCheck DESC, d.Timestamp DESC
LIMIT 0,1 
```

更新

# boost - 使用 BoostTest 多次运行单元测试而不退出测试运行器

> ID：10605517
> 
> 赞同：0
> 
> 时间：2012-05-15T17:01:42.943
> 
> 标签：boost, boost-test

我想使用 Boost Test 多次运行单元测试而不退出测试运行器。这是演示我想要做什么的伪代码：

```
void main() {
    for(int i = 0; i < 10; ++i) 
    {
            char *arguments[] ={ "MyApplication.exe", 
                                 "--detect_memory_leak=0" };
            boost::unit_test::unit_test_main( &init_function, 2, arguments);
     } 
} 
```

第一次`unit_test_main`调用时，所有的 boost 测试运行良好，但在第二次迭代中，boost 测试抛出异常。

我查看了内部代码，发现每次`unit_test_main`调用框架都会初始化，如果框架已经初始化，boost测试不喜欢再次初始化框架。

请让我知道是否有任何方法可以在不退出测试运行器的情况下多次运行单元测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:53:28.210

您需要实现自己的测试运行程序来替换库存的 unit_test_main。您可以查看库存版本正在做什么并在那里添加循环。

# algorithm - 深度优先搜索优于广度优先搜索，反之亦然

> ID：10605519
> 
> 赞同：19
> 
> 时间：2012-05-15T17:01:47.407
> 
> 标签：algorithm, graph, graph-algorithm

我研究了两种图遍历算法，深度优先搜索和广度优先搜索。由于这两种算法都用于解决图遍历的相同问题，所以我想知道如何在两者之间进行选择。我的意思是比其他或任何原因为什么我会在特定情况下选择一个而不是另一个？

谢谢你

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T17:50:37.320

对我来说主要的区别是理论上的。如果你有一个无限大的图，那么如果元素存在于它选择的第一条路径之外，DFS 将永远找不到它。它基本上会继续沿着第一条路径前进并且永远找不到元素。BFS 最终会找到该元素。

如果图的大小是有限的，DFS 可能会更快地找到离群值（根和目标之间的距离更大）元素，而 BFS 会更快地找到更近的元素。除非 DFS 选择浅元素的路径。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-15T18:14:33.393

一般来说，BFS 更适合与寻找最短路径相关的问题或有些相关的问题。因为在这里您从一个节点转到与其相邻的所有节点，因此您有效地从路径长度一移动到路径长度二，依此类推。

而另一端的 DFS 有助于解决连接问题以及在图中找到循环（尽管我认为您也可以通过对 BFS 进行一些修改来找到循环）。确定与 DFS 的连接性很简单，如果您从 DFS 过程中调用两次 explore 过程，那么图将断开连接（这是针对无向图）。你可以在这里看到有向图的强连通分量算法，它是对 DFS 的修改。DFS 的另一个应用是拓扑排序。

以下是这两种算法的一些应用：

文件系统：

连通
性 强连通分量
拓扑排序

BFS：

最短路径（Dijkstra 是 BFS 的一些修改）。
测试图是否为 Bipartitie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-01T00:28:41.030

对于一棵完整/完美的树，DFS 占用相对于树深度的线性空间量，而 BFS 占用相对于树深度的指数空间量。这是因为对于 BFS，队列中的最大节点数与树的一层中的节点数成正比。在 DFS 中，堆栈中的最大节点数与树的深度成正比。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T17:01:20.403

在遍历多连通图时，遍历节点的顺序可能会极大地影响（通过多个数量级）遍历方法要跟踪的节点数。使用广度优先时，某些类型的算法会更好；使用深度搜索时，其他人会更好。

在一个极端情况下，对具有 N 个叶节点的二叉树进行深度优先搜索需要遍历方法跟踪 lgN 个节点，而广度优先搜索需要跟踪至少 N/2 个节点（因为它可能会扫描在它扫描任何叶节点之前的所有其他节点；在扫描第一个叶节点之前，它会遇到 N/2 个叶的父节点，因为它们都没有相互引用，所以必须单独跟踪）。

在另一个极端，使用一种方法在 NxN 网格上进行泛洪填充，如果其像素尚未着色，则对该像素着色然后泛洪填充其邻居将需要排队 O(N) 像素坐标，如果使用广度优先搜索，但如果使用深度优先，则为 O(N^2) 像素坐标。使用广度优先搜索时，无论要绘制的形状如何，绘制似乎都会“散开”；当使用深度优先算法绘制一个矩形螺旋时，每条线的一侧是直的，另一侧是锯齿状的（哪些边应该是直的和锯齿状的取决于所使用的确切算法），所有的直线部分都将被绘制在任何锯齿之前，这意味着系统必须单独跟踪每个锯齿的位置。

# c# - 代码隐藏文件的上下文中不存在 ASP 文本框

> ID：10605520
> 
> 赞同：1
> 
> 时间：2012-05-15T17:01:48.720
> 
> 标签：c#, asp.net, code-behind

我正在尝试编写一个基本的 ASP.NET 表单（使用 Visual Studio 2010）将数字提交到数据库。因为这是我使用 ASP.NET 的早期尝试，所以我一开始写得很简单，现在我正在尝试添加剩余的功能。最初，一切都是内联代码。现在我正在尝试将其切换为使用代码隐藏页面，但我无法让它从我的代码隐藏文件中解析我的文本框的名称。我在遵循一些教程的同时构建了这些页面，并查看了其他几个资源以尝试解决此问题，但到目前为止我所看到的一切似乎表明我已经为代码隐藏设置了所有内容，但它不起作用。VS 在编译期间给出错误，说明文本框名称在当前上下文中不存在。当我删除对文本框的所有引用时，页面工作并且我的按钮事件触发。`protected TextBox XcoordTextbox;`（就像我相信你会在 ASP.NET 1.0 中一样）但是我得到一个运行时错误`CS0102: The type 'ManualEntry.default_aspx' already contains a definition for 'XcoordTextbox'` 下面是我的代码的重要部分。你能帮忙解释为什么这不起作用吗？

**ASPX 文件**

```
<%@ Page    Language="C#" CodeFile="default.aspx.cs" Inherits="ManualEntry.default_aspx" AutoEventWireup="true" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server"></head>
<body>
    <form id="HtmlForm" runat="server">
        <div>
            X Coord&nbsp;
            <asp:TextBox ID="XcoordTextbox" runat="server"></asp:TextBox>
            <br />
            Y Coord&nbsp;
            <asp:TextBox ID="YcoordTextbox" runat="server"></asp:TextBox>
            <asp:Button ID="SubmitButton" runat="server" onclick="SubmitButton_Click" Text="Submit" />
        </div>
    </form>
</body>
</html> 
```

**代码隐藏文件**

```
using System;
using System.Web.UI;

namespace ManualEntry
{
    public partial class default_aspx : Page
    {
        protected void SubmitButton_Click(object sender, EventArgs e)
        {
            var Xcoord = XcoordTextbox.Text;
            var Ycoord = YcoordTextbox.Text;
            //More Code Here
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:53:53.417

转到`Microsfot.NET[.NET version]\Temporary ASP.NET Files.`并删除您网站的临时文件。

例如.net 4.0

```
C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files 
```

如果您使用 CodeFile 指令，则编译后的文件将转到 Temporary ASP.NET Files

并从您的解决方案中删除 bin 和 object 文件夹并重建 Web 应用程序。

# 编辑

您的 default.aspx.designer.cs 应如下所示，请勿手动向此页面添加控件。

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated. 
// </auto-generated>
//------------------------------------------------------------------------------

namespace ManualEntry {

    public partial class default_aspx {

        /// <summary>
        /// Head1 control.
        /// </summary>
        /// <remarks>
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// </remarks>
        protected global::System.Web.UI.HtmlControls.HtmlHead Head1;

        /// <summary>
        /// HtmlForm control.
        /// </summary>
        /// <remarks>
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// </remarks>
        protected global::System.Web.UI.HtmlControls.HtmlForm HtmlForm;

        /// <summary>
        /// XcoordTextbox control.
        /// </summary>
        /// <remarks>
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// </remarks>
        protected global::System.Web.UI.WebControls.TextBox XcoordTextbox;

        /// <summary>
        /// YcoordTextbox control.
        /// </summary>
        /// <remarks>
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// </remarks>
        protected global::System.Web.UI.WebControls.TextBox YcoordTextbox;

        /// <summary>
        /// SubmitButton control.
        /// </summary>
        /// <remarks>
        /// Auto-generated field.
        /// To modify move field declaration from designer file to code-behind file.
        /// </remarks>
        protected global::System.Web.UI.WebControls.Button SubmitButton;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T18:23:39.583

我不时有这个问题。我通常会执行以下操作：

1.  转到 default.aspx.designer.cs。
2.  确保命名空间和类名正确。
3.  删除`default_aspx`类内的所有内容。
4.  保存并关闭 default.aspx.designer.cs。
5.  对 default.aspx 进行更改（添加空格或其他内容）。
6.  重新编译项目。

这也可能是您的命名约定，尝试更改`default_aspx`为`default_aspx1`. 我见过`default_aspx`.NET使用过。
此外，在我的 .NET 4.0 中，默认是使用`CodeBehind`而不是`CodeFile`. 这似乎是除[.NET 1.1](http://www.ashchuan.com/blog/2011/03/31/codefile-and-codebehind-in-net-what-the-heck-is-the-difference/)之外的所有预期用例。另请参阅[CodeFile 与 CodeBehind](https://stackoverflow.com/questions/73022/codefile-vs-codebehind)

如果一切都失败了，请尝试从头开始重新创建页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:06:41.440

你的`CodeFile="default.aspx.cs"`说法是错误的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T17:10:35.383

它应该是这样的

```
CodeFile="default_aspx.aspx.cs" Inherits="default_aspx" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T17:14:27.087

采用

```
CodeBehind="default.aspx.cs" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T18:10:13.690

您的 asp 中的代码文件标记必须与类名相同。尝试类似真实的类名。`HelloWord.aspx`或者其他的东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T18:14:27.397

尝试将您的继承更改`Inherits="ManualEntry.default"`为`Inherits="ManualEntry.default_aspx"`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-19T21:52:15.063

转到您的 .aspx 文件并重新检查您的标题，如 <%@............%> 应该有一个链接到您的代码后面的文件名，即 .cs 文件，如... ...

签出这个 1....:)

```
{<%@ Page Language="C#" AutoEventWireup="true" **CodeBehind="Home.aspx.cs"** Inherits="MyCompany.Home" MasterPageFile="~/Site1.Master"%>} 
```

# multithreading - Visual Studio 2010 在调试期间完全锁定，出现 0xC0000005 访问冲突错误

> ID：10605521
> 
> 赞同：0
> 
> 时间：2012-05-15T17:01:51.180
> 
> 标签：multithreading, visual-studio-2010, debugging, linked-list, access-violation

在 VS2010 的 C# .NET v4 项目中，环境在调试时锁定。单步执行在单独线程上运行的程序时 [ myThread = new Thread(() => { result = myClass.myMethod(thirdPartyImageTool.CreateGraphics(), myOtherClass); ] VS 锁定。我收到消息说 VS 是“等待内部流程完成”，但它永远不会。

如果我使用任务管理器结束我正在调试的表单并且它成功，我会收到错误“myForm.exe 中 0x7766652e 处的未处理异常：0xC0000005：访问冲突读取位置 0xfffffffffffffff8”。它还说明了有关断开连接或无法连接的信息。

值得注意的三件事（尽管我不知道它们是否完全相关）是我将许多 List<> 更改为 LinkedList<>，并且我将所有项目的目标平台更改为“Any CPU”派生自x64 设置。最后，即使在重新启动 VS 之后，问题似乎会在至少发生一次后更快更频繁地发生。

# python - 从 Python 中的 CSV 文件中获取随机行并找到相应的单词，如测验

> ID：10605532
> 
> 赞同：2
> 
> 时间：2012-05-15T17:02:35.577
> 
> 标签：python, csv

抱歉标题模棱两可。想不出更好的表达方式。

我有一个德语/英语单词的 CSV 文件，如下所示：

```
Ja,Yes
Nein,No
Katze,Cat 
```

我希望我的 python 脚本从 CSV 文件中打印一个随机的德语单词，并要求他们输入英语单词。当这样做并点击返回时，它应该打印正确或错误。

我对代码有一些大纲：

```
loop = 1
choice = 0

while loop == 1:
    randWord = choice(de)

    correctAnswer = ? 

    answer = raw_input("Answer: ")

    if answer == correctAnswer:
        print ("Correct")
        print ("")
    elif answer == "exit":
        loop = 0
    elif answer != correctAnswer:
        print ("False")
        print ("The correct answer was ") + correctAnswer
        print ("Let's try another.")
        print ("") 
```

我的问题有两个：

1) 从 CSV 文件中选择随机行和单词。2) 将 CSV 文件中随机选择的单词与其德语对应词进行匹配。

关于我如何处理这两个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:09:53.300

尝试这样的事情：

```
import csv
import random

words = dict(csv.reader(open("file.csv")))
randWord = random.choice(words.keys())
correctAnswer = words[randWord]

if answer == correctAnswer:
    ... 
```

**编辑：**我应该注意，`words.keys()`如果您使用 Python 3，则应首先转换为列表，因为`dict.keys()`在 Python 2.x 中返回列表，但在 Python 3 中返回生成器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T17:09:59.830

```
with open(filename, 'r') as f:
    lines = [line for line in f]
    ger, correctAnswer = random.choice(lines).split(',') 
```

我想你可以从这里拿走它:-)

# php - 如何将应用程序用户名放在图片上以张贴在墙上？

> ID：10605534
> 
> 赞同：0
> 
> 时间：2012-05-15T17:02:51.773
> 
> 标签：php, facebook

我想制作一个允许用户在他们的墙上分享图片的 facebook 应用程序。图片将有一个空白的地方放置用户名。

我已经知道如何显示图片，但我无法让他们的用户名自动进入图片内部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:39:07.203

使用[GD](http://php.net/manual/en/book.image.php)或[Imagemagick](http://www.imagemagick.org)之类的图像处理库来执行此操作。打开图像，在其上写入文本（示例都包含在两个库中），然后保存图像，您可以将其上传到 Facebook 或您打算用它做的任何其他事情

# python - Pythonic 和简洁的方式来构建这个列表？

> ID：10605536
> 
> 赞同：5
> 
> 时间：2012-05-15T17:02:55.630
> 
> 标签：python, list-comprehension

如何更简洁地编写以下代码？

```
 scores = []
    for f in glob.glob(path):
        score = read_score(f, Normalize = True)
        scores.append(score) 
```

我知道这可以在不使用的情况下用一两行编写`append`，但我是 Python 新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T17:04:48.203

哦，我在浏览[相关问题](https://stackoverflow.com/questions/3830727/is-there-a-more-elegant-pythonic-way-to-express-this-construct)时得到了它：

```
scores = [read_score(f, normalize=True) for f in glob.glob(path)] 
```

# python - 从 Python 中的守护线程触发主线程中的异常

> ID：10605538
> 
> 赞同：0
> 
> 时间：2012-05-15T17:02:57.447
> 
> 标签：python, multithreading, python-multithreading

如何从 Python 中的守护线程触发主线程中的异常，运行阻塞代码？

我有一个守护线程，它定期检查数据库中是否有记录表明其当前进程应该终止（即用户按下了“取消”按钮）。在我的主要非守护程序线程中，我正在对无法轻松修改以正常终止的外部进程运行阻塞调用。但是，当我手动触发一个键盘中断时，主线程可以优雅地处理一个正常的键盘中断。

因此，如果我的守护线程收到终止命令，我如何在主线程中引发异常来终止我的进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T00:54:57.357

在挖掘了线程文档之后，我终于找到了解决方案是[interrupt_main()](http://docs.python.org/library/thread.html#thread.interrupt_main)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:10:38.520

您可以使用[returncode](http://docs.python.org/library/subprocess.html#subprocess.Popen.returncode)属性获取子流程返回码。如果它与零不同，则提出一些东西。

编辑：我混合了 subprocess 和 multiprocessing 模块。然而，在 multiprocessing 模块中有一个[exitcode](http://docs.python.org/library/multiprocessing.html?highlight=daemon#multiprocessing.Process.exitcode)属性，看起来类似于 subprocess returncode 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:20:13.887

它通常使用消息队列来完成。请参阅[在 Python 中的调用者线程中捕获线程的异常](https://stackoverflow.com/questions/2829329/catch-a-threads-exception-in-the-caller-thread-in-python)

但是它不会抢占你的主线程，你必须主动轮询它。也许有了信号，你就能得到你需要的东西。

# python - 一个简单的带有python的wsgi网站，但是.css文件没有加载。为什么？

> ID：10605545
> 
> 赞同：1
> 
> 时间：2012-05-15T17:03:29.647
> 
> 标签：python, css, styles, wsgi

为什么我`localhost:8080`在浏览器中进入时背景不是蓝色的？以下3个文件都位于同一目录中：

wsgiwebsite.py

```
#!/usr/bin/env python
from wsgiref.simple_server import make_server

cont = (open('wsgiwebsite_content.html').read())

def application(environ, start_response):
    start_response('200 OK', [('Content-Type', 'text/html')])
    return [cont]

server = make_server('0.0.0.0', 8080, application)
server.serve_forever() 
```

wsgiwebsite_content.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
  <head>
    <link rel="stylesheet" type="text/css" href="wsgiwebsite_style.css">
  </head>

  <body>
    This is my first web page
  </body>
</html> 
```

wsgiwebsite_style.css

```
body{background-color:blue;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:05:17.200

您尝试通过 wsgi 服务器加载 css，但您的服务器始终只返回 html 文件。使用 firebug/web inspector/... 查看服务器对 css 文件的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:10:20.690

WSGI 只为您的 Python 代码提供服务，并且可能甚至不知道该 CSS 文件的存在。

您可以配置您的网络服务器来为您处理静态资产，或者使用类似[静态](http://lukearno.com/projects/static/)的东西来提供静态媒体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-24T03:17:53.107

下面的代码片段仅用于学习目的。我创建了一个静态目录并将我的 index.html 和 css 文件保存在那里，因此我自己的源代码文件无法访问。

```
from wsgiref.simple_server import make_server                                    
import os                                                                        

def content_type(path):                                                          
if path.endswith(".css"):                                                    
    return "text/css"                                                        
else:                                                                        
    return "text/html"                                                       

def app(environ, start_response):                                                
    path_info = environ["PATH_INFO"]                                             
    resource = path_info.split("/")[1]                                           

    headers = []                                                                 
    headers.append(("Content-Type", content_type(resource)))                     

    if not resource:                                                             
        resource = "index.html"                                                  

    resp_file = os.path.join("static", resource)                                 

    try:                                                                         
        with open(resp_file, "r") as f:                                          
            resp_file = f.read()                                                 
    except Exception:                                                            
        start_response("404 Not Found", headers)                                 
        return ["404 Not Found"]                                                 

    start_response("200 OK", headers)                                            
    return [resp_file]                                                           

s = make_server("0.0.0.0", 8080, app)                                            
s.serve_forever() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-09T21:03:07.700

丹尼斯代码几乎为我解决了这个问题，但我需要进行一些更改/修复，这就是我的工作：

```
from wsgiref.simple_server import make_server
from cgi import parse_qs, escape

import codecs                                                                       

def tipoDeConteudo(path):
    if path.endswith(".css"):
        return "text/css"
    else:
        return "text/html"                                                       

def web_app(environment, response):                                                
    caminho = environment["PATH_INFO"]
    resource = caminho.split("/")[1]

    headers = []
    headers.append(("Content-Type", tipoDeConteudo(resource)))                   

    try:
        resp_file = codecs.open("indexResposta.html", 'r').read()
    except Exception:
        response("404 Not Found", headers)
        return ["404 Not Found"]                                                 

    response('200 OK', headers)
    return [resp_file.encode()]                                                        

s = make_server("0.0.0.0", 8080, app)                                            
s.serve_forever() 
```

# php - Sonata Admin Bundle：可以添加一个可以有不同父级的子管理对象吗？

> ID：10605548
> 
> 赞同：4
> 
> 时间：2012-05-15T17:03:42.993
> 
> 标签：php, symfony, admin, symfony-sonata, sonata-admin

我正在使用原则继承映射来使各种对象链接到评论实体。这是通过各种具体的“线程”来实现的，这些线程与评论具有一对多的关系。所以以“Story”元素为例，会有一个相关的“StoryThread”实体，它可以有很多评论。

这一切都很好，但是我在尝试为 SonataAdminBundle 定义一个可以用作父实体的子实体的 CommentAdmin 类时遇到了麻烦。例如，我希望能够使用以下路线：

`/admin/bundle/story/story/1/comment/list` `/admin/bundle/media/gallery/1/comment/list`

有人对我如何实现这一目标有任何指示吗？我很想发布一些代码摘录，但我还没有找到任何相关的文档，所以我真的不知道最好的起点。

我一直在尝试使用[SonataNewsBundle](https://github.com/sonata-project/SonataNewsBundle)作为参考，因为他们在帖子和评论之间实现了类似的父/子管理关系，但看起来这依赖于硬编码的“评论”（子）管理类知道它属于帖子，而且它似乎也需要与父对象建立直接的多对一关系，而我的是通过一个单独的“线程”实体。

我希望这是有道理的！谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T12:04:06.507

好的，我最终设法让这个工作。我无法从使用`$parentAssociationMapping`CommentAdmin 类的属性中受益，因为评论的父实体是 Thread 实体的具体实例，而在这种情况下，父“管理员”类是一个故事（通过故事线）。另外，当我对其他类型的实体实施评论时，这将需要保持动态。

首先，我必须配置我的 StoryAdmin（以及任何其他将 CommentAdmin 作为子级的管理类）来调用 addChild 方法：

```
acme_story.admin.story:
      class: Acme\Bundle\StoryBundle\Admin\StoryAdmin
      tags:
        - { name: sonata.admin, manager_type: orm, group: content, label: Stories }
      arguments: [null, Acme\Bundle\StoryBundle\Entity\Story, AcmeStoryBundle:StoryAdmin]
      calls:
          - [ addChild, [ @acme_comment.admin.comment ] ]
          - [ setSecurityContext, [ @security.context ] ] 
```

这允许我从故事管理员链接到子管理员部分，在我的情况下是从侧面菜单，如下所示：

```
protected function configureSideMenu(MenuItemInterface $menu, $action, Admin $childAdmin = null)
{
    // ...other side menu stuff

    $menu->addChild(
        'comments',
        array('uri' => $admin->generateUrl('acme_comment.admin.comment.list', array('id' => $id)))
    );
} 
```

然后，在我的 CommentAdmin 类中，我必须根据父对象（例如本例中的 StoryThread）访问相关的 Thread 实体并将其设置为过滤器参数。如果父实体与父管理员相同，这基本上是使用`$parentAssociationMapping`属性自动完成的，如果您不使用继承映射，很可能会发生这种情况。这是来自 CommentAdmin 的所需代码：

```
/**
 * @param \Sonata\AdminBundle\Datagrid\DatagridMapper $filter
 */
protected function configureDatagridFilters(DatagridMapper $filter)
{
    $filter->add('thread');
}

/**
 * @return array
 */
public function getFilterParameters()
{
    $parameters = parent::getFilterParameters();

    return array_merge($parameters, array(
        'thread' => array('value' => $this->getThread()->getId())
    ));
}

public function getNewInstance()
{
    $comment = parent::getNewInstance();

    $comment->setThread($this->getThread());
    $comment->setAuthor($this->securityContext->getToken()->getUser());

    return $comment;
}

/**
 * @return CommentableInterface
 */
protected function getParentObject()
{
    return $this->getParent()->getObject($this->getParent()->getRequest()->get('id'));
}

/**
 * @return object Thread
 */
protected function getThread()
{
    /** @var $threadRepository ThreadRepository */
    $threadRepository = $this->em->getRepository($this->getParentObject()->getThreadEntityName());

    return $threadRepository->findOneBy(array(
        $threadRepository->getObjectColumn() => $this->getParentObject()->getId()
    ));
}

/**
 * @param \Doctrine\ORM\EntityManager $em
 */
public function setEntityManager($em)
{
    $this->em = $em;
}

/**
 * @param \Symfony\Component\Security\Core\SecurityContextInterface $securityContext
 */
public function setSecurityContext(SecurityContextInterface $securityContext)
{
    $this->securityContext = $securityContext;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-19T15:12:55.403

直接相关实体代码的替代方法：

```
 public function getParentAssociationMapping()
 {
    // we grab our entity manager
    $em = $this->modelManager->getEntityManager('acme\Bundle\Entity\acme'); 

    // we get our parent object table name
    $className = $em->getClassMetadata(get_class($this->getParent()->getObject($this->getParent()->getRequest()->get('id'))))->getTableName();

    // we return our class name ( i lower it because my tables first characted uppercased )
    return strtolower( $className );
 } 
```

确保您的 inversedBy 变量与 $className 匹配才能正常工作

# ruby-on-rails - RoR 生成的 sql 有 where

> ID：10605549
> 
> 赞同：0
> 
> 时间：2012-05-15T17:03:52.337
> 
> 标签：ruby-on-rails

我有 3 张桌子 stauscode、wearquest 和员工。Worequest 属于员工和员工 has_many wearquests。Worequest属于statuscode，statuscode有很多wearquest。

我也有磨损任务的范围：

```
 scope :notcompl, where(:statuscode_id != Statuscode.last, true) 
```

我正在尝试显示未完成的员工的磨损任务：

```
 <% @employee.worequests.notcompl.each do |worequest| %> 
```

我得到的错误： G::Error: 错误：AND 的参数必须是布尔类型，而不是整数类型 LINE 1: ...uests" WHERE "worequests"."employee_id" = 2 AND (1) ORDER B...

我正在尝试查看 2 号员工。我不知道为什么将“and (1)”放入 SQL 中。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:23:50.247

你的范围

```
scope :notcompl, where(:statuscode_id != Statuscode.last, true) 
```

被打破。与某些 ruby​​ orms 不同，activerecord 不会覆盖符号上的方法，因此最终会出现在哪里

```
where(true,true) 
```

（因为很明显，该符号永远不会等于整数）并且 true 被强制转换为整数 1。如果您想找到某些不等于其他内容的行，您需要做

```
where("status_code_id != ?", StatusCode.last.id) 
```

另请注意，这将使用加载具有此范围的文件时的最后状态代码 - 如果您的应用在运行时创建状态代码，您需要将范围包装在 lambda 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:11:18.770

您是否错过了指定`compelted`( `status`?) 列名？如果是这样，您应该重写您的范围：

```
scope :notcompl, where("statuscode_id != #{Statuscode.last.id}").where(completed: true) 
```

# c# - 绘制没有平滑的放大图像

> ID：10605552
> 
> 赞同：0
> 
> 时间：2012-05-15T17:04:29.900
> 
> 标签：c#, image, xna

我想绘制一个比原来大 5 倍的纹理 2d，没有平滑。

画线：

```
spriteBatch.Draw(texture, new Vector2(0, 0), null, Color.White, 0, Vector2.Zero,
5f, SpriteEffects.None, 0); 
```

结果是一个缩放的平滑图像。添加`this.GraphicsDevice.SamplerStates[0] = SamplerState.PointClamp;`没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:26:48.963

你想要的是点纹理过滤。看[这里](http://forums.create.msdn.com/forums/p/68599/418734.aspx)。

# windows - Sed 不会通过管道传输到文件

> ID：10605555
> 
> 赞同：3
> 
> 时间：2012-05-15T17:04:36.297
> 
> 标签：windows, sed

我尝试：

```
C:\Users\me\Documents\worknotes\performance\tomcatlogs\livesite\learn>sed
 -e 's/"//g' local07.csv > local07nq.csv 
```

但不是输出到文件 local07nq.csv，而是输出到控制台。怎么了？

我正在使用 sed/cygwin/windows。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:52:39.907

Windows 命令提示符中的引号（至少我使用过的风格）通常是有问题的。将脚本 ( `s/"//g`) 放在一个文件中并以这种方式运行它可能会更好：

```
sed -f myscript.sed local07.csv > local07nq.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T19:12:07.740

在 cygwin / mintty 或 cygwin shell 上，这很好：

```
sed -e 's/"//g' 
```

而不是使用 cmd shell，而是尝试 cygwin shell，并获得合理的引用行为。

# php - 更新标签列表 - 或更新 has_many 关系

> ID：10605557
> 
> 赞同：2
> 
> 时间：2012-05-15T17:04:45.617
> 
> 标签：php, mysql, has-many, has-many-through

我经常遇到的更新问题*有很多*关系。例如，让我们以以下三个表为例：

*   帖子
*   标签
*   帖子标签

当用户创建新帖子时，他可以为帖子添加标签。帖子被保存，选定的标签通过_posts_tags_附加到它。

当用户编辑帖子（并且可能也可能不编辑标签列表）并提交表单时，我必须更新帖子的标签列表。

解决方案如下：更新帖子时，我从_posts_tags_中删除该帖子的所有标签，并插入提交的标签。

另一种解决方案是从数据库中获取帖子的所有标签，将列表与提交的列表进行比较，然后决定我们必须删除什么以及我们必须插入什么。

这两种解决方案都可能很耗时。
**对于这个问题有什么更聪明的解决方案？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:38:22.790

When a post is edited and the tags are not edited (optional), then simply save the post and do nothing. Why? Cause, in the posts, tags and posts_tags table you have an autoincrement column that is your primary key. This numeric column is then the foreign key in the respective tables i.e. the tables will look like the following:

posts: id_post(PK), post_title, post_content

Tags: id_tag(PK), tag_name

posts_tags: id_post_tag(PK), id_post(FK), id_tag(FK)

PK: Primary Key FK: Foreign Key

Once you save the data in this format, you will find no need to update any dependent table as the textual data is no more used to maintain database schema and relationships. This also hastens transaction times as the database is not busy in any cascade job as Bono implied.

Then run a simple loop for all the tags in the post to check their existence against the id_post in the post_tags table and if not found then insert it. While doing this loop build a string that you will use below:

Next, run the following query:

```
delete from post_tags where id_post = {$id_post} and id_tag not in {$list_id_tags} 
```

This operation minimizes database server overload by minimizing IO operations which are caused by rows being added and deleted. Your case of deleting all post_tags and then inserting all tags again would have generated large IO while this method minimizes that.

# python - python中的随机选择，意外工作

> ID：10605559
> 
> 赞同：3
> 
> 时间：2012-05-15T17:04:51.470
> 
> 标签：python, algorithm

我正在尝试实现我刚刚在课堂上学到的 rselect 算法。但是，似乎无法弄清楚我在实施中哪里出错了。这是我的代码。**编辑 ** ：我尝试使用大卫回答中提供的信息，但我的代码仍然很奇怪。这是修改后的代码：

```
def rselect(seq,length,i):# i is the i'th order statistic.
    if len(seq)<=1:return seq
    lo,pi,hi,loc_pi= random_partition(seq
    if loc_pi==i:return pi 
    if loc_pi>i:return rselect(lo,loc_pi-1,i) 
    elif loc_pi<i:return rselect(hi,length-loc_pi,i-loc_pi)#
from random import choice  
def random_partition(seq):
    pi =choice(seq)
    #print 'pi',pi
    loc_pi=seq.index(pi)
    print 'Location',loc_pi
    lo=[x for x in seq if x<=pi]
    hi=[x for x in seq if x>pi]
    return lo,pi,hi,len(lo)+1   #--A

def test_rselect(seq,i):
    print 'Sequence',seq
    l=len(seq)
    print 'Statistic', rselect(seq,l,i) 
```

然而，输出在不同的时间是不同的，有时甚至是正确的！我是算法和 python 的菜鸟，任何关于我哪里出错的帮助将不胜感激。**编辑：每次运行代码时，我都会为第 i 个顺序统计数据**获取不同的值，这是我的问题 例如，每次运行代码如下所示

```
Revised Output:
/py-scripts$ python quicksort.py
Sequence [54, -1, 1000, 565, 64, 2, 5]
Statistic Location 1
-1
@ubuntu:~/py-scripts$ python quicksort.py
Sequence [54, -1, 1000, 565, 64, 2, 5]
Statistic Location 5
Location 1
Location 0
-1 
```

预期输出：我期待在这里找到第 i 个顺序统计。

因此

`test_rselect([54,-1,1000,565,64,2,5],2)`应该一直`5`作为**统计**返回。

任何帮助我在这个实现中出错的地方都会有帮助..谢谢！
**编辑 2**：通过尝试分析算法，我相信错误在于我如何在标记为 A 的行中**返回枢轴位置（loc_pi）**。考虑到上述程序的以下事件序列。

```
test_rselect( [ 55, 900, -1,10, 545, 250], 3) // call to input array 

calls rselect ([ 55, 900, -1,10, 545, 250],6,3)

    1st  call to random_partition:
        pi=545 and loc_pi=4
        lo=[55,-1,10,250,545]
        hi=[900]
    return to rselect function (lo,545,hi,6)
    here loc_pi>i: so rselect(lo,5,3)// and discard the hi part

    2nd recursive call to rselect:
    2nd recursive call to random_partition:
        call random_partition on (lo) // as 'hi' is discarded
        pi=55 loc_pi=0
        lo=[-1,10,55]
        hi=[250,545]
        return to rselect(lo,55,hi,4)
        here loc_pi>i: rselect(lo,3,3)// The pivot element is lost already as it is in 'hi' here!! 
```

关于如何处理返回枢轴元素的位置以获得正确的 o/p 的任何帮助都会有所帮助。设置赏金，**以获得清楚地解释我做错了什么以及如何纠正它的答案（欢迎伟大的提示，因为我期待学习:)）**。期待伟大的答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T18:43:06.810

您的算法的问题在于您对`loc_pi`. 例如，考虑第一个`pi`选择1000 的情况`loc_pi=seq.index(pi)`。在这种情况下，`loc_pi`将等于 2，因为 1000 在序列的索引 2 处，并且该函数将返回 1000，我们知道这绝对不是顺序统计 2。

因此，我们知道我们无法`loc_pi`根据随机选择的索引来确定`pi`。毕竟，该列表的顺序是任意的——它的位置没有任何意义。您实际上试图获得的`loc_pi`值是*该子列表中低于您选择的 pi 的元素数量*。幸运的是，这很容易获得！只需更改行：

```
 return lo,pi,hi,loc_pi 
```

到

```
 return lo,pi,hi,len(lo) + 1 
```

您会发现它的性能正确且始终如一！

```
dynamic-oit-vapornet-c-913:test dgrtwo$ python test21.py
Sequence [54, -1, 1000, 565, 64, 2, 5]
Statistic pi 565
Location 3
pi 5
Location 5
pi -1
Location 0
pi 2
Location 0
2
dynamic-oit-vapornet-c-913:test dgrtwo$ python test21.py
Sequence [54, -1, 1000, 565, 64, 2, 5]
Statistic pi -1
Location 1
pi 54
Location 0
pi 5
Location 2
pi 2
Location 0
2 
```

ETA：还请注意，如果输入序列中有联系，您所写的算法将*不会总是有效。*尝试几个例子，你就会明白我的意思。有一些简单的方法可以解决它，我相信你可以弄清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:22:25.137

如果你改变：

```
return lo,pi,hi,len(lo)+1 
```

到：

```
return lo,pi,hi,len(lo) 
```

并添加一个右括号`)`，以便更正语法错误，如下所示：

```
lo,pi,hi,loc_pi= random_partition(seq) 
```

对于没有重复条目的序列，它将可靠地工作：

```
for i in xrange(1,8):
    print rselect([54,-1,1000,565,64,2,5],7,i),
#Output:
-1 2 5 54 64 565 [1000] 
```

这是预期的输出。

我想我的主要建议是尝试按照[样式指南编写代码！](http://www.python.org/dev/peps/pep-0008/)您的代码一目了然很难阅读！

该参数`length`是多余的，因此可以完全删除。有时最后一个条目会作为单个值列表返回，所以我改变了它（尽管如果你传递一个空列表它会知道跌倒，可能没什么大不了的）。以下是更易读格式的代码，并进行了更正以允许重复输入：

```
from random import choice, shuffle

def rselect(seq, i):
    lo, hi, pi, loc_pi = random_partition(seq)
    if loc_pi == i or (min(lo) == max(lo) and not hi):
        return pi
    elif loc_pi > i:
        return rselect(lo, i)
    elif loc_pi < i:
        return rselect(hi, i - loc_pi)

def random_partition(seq):
    pi = choice(seq)
    lo = [x for x in seq if x <= pi]
    hi = [x for x in seq if x > pi]
    return lo, hi, pi, len(lo)

#this is a nice way to test it:
cat = range(1,21)
for i in xrange(1,21):
    shuffle(cat)
    print rselect(cat,i),

#Output:
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T08:37:35.003

我不认为有任何主要错误（在你如何返回枢轴或其他方面），这只是很多一个（甚至两个）的混淆，另外我认为你的意思是与 i 比较rselect 的第一行，而不是 1。

这是我的看法，尽可能少的改变：

```
def rselect(seq,length,i):# i is the i'th order statistic.
    if len(seq)<=i:return seq
    lo,pi,hi,loc_pi= random_partition(seq)
    if loc_pi==i:return pi 
    if loc_pi>i:return rselect(lo,loc_pi,i) 
    elif loc_pi<i:return rselect(hi,length-(loc_pi+1),i-(loc_pi+1))
from random import choice  
def random_partition(seq):
    pi =choice(seq)
    lo=[x for x in seq if x<=pi]
    hi=[x for x in seq if x>pi]
    return lo,pi,hi,len(lo)-1 
```

**编辑**：如果有重复的元素，这是一个应该工作的版本。现在，我不得不再做一些改变，所以我拿出了一些我觉得很困惑的东西，以便让自己更容易。

```
def rselect(seq,i):# i is the i'th order statistic.
    if len(seq)<=i:return seq
    lo,pi,hi= random_partition(seq)
    if i < len(lo):return rselect(lo,i) 
    if i < len(seq)-len(hi): return pi 
    return rselect(hi,i-(len(seq)-len(hi)))
from random import choice
def random_partition(seq):
    pi =choice(seq)
    lo=[x for x in seq if x<pi]
    hi=[x for x in seq if x>pi]
    return lo,pi,hi

def test_rselect(seq,i):
    print 'Sequence',seq
    stat=rselect(seq,i)
    print 'Statistic', stat 
```

# android - 如何使用 Camera.takePicture() 拍摄高分辨率图像？

> ID：10605560
> 
> 赞同：21
> 
> 时间：2012-05-15T17:04:53.443
> 
> 标签：android, android-camera

我正在实现一个应用内摄像头，每次拍照时，我的图像都是 320x240，尽管我手机的摄像头能够提供更高的分辨率（Galaxy Nexus）。我找不到用于设置分辨率的参数，那么如何提高我正在拍摄的图像的分辨率？以下是相关代码：

```
@Override
public void surfaceCreated( SurfaceHolder holder ) {

    setSurfaceHolder( holder );
}

@Override
public void surfaceDestroyed( SurfaceHolder holder ) {

    setSurfaceHolder( null );
}

private void attachCameraToSurface( Camera camera, SurfaceHolder holder ) {

    try {
        camera.setPreviewDisplay( holder );
        setInPreview( true );
    }
    catch (IOException e) {
        Log.e( "CameraFragment", "Exception in attachCameraToSurface()", e );
    }
}

@Override
public void surfaceChanged( SurfaceHolder holder, int format, int width, int height ) {

    Camera camera = getCamera();
    if ( camera == null ) {
        return;
    }

    Camera.Size size = getCameraPreviewSize( camera );
    Camera.Parameters params = camera.getParameters();
    params.setPreviewSize( size.width, size.height );
    camera.setParameters( params );

    attachCameraToSurface( camera, holder );

    startPreview();
}

private Camera.Size getCameraPreviewSize( Camera camera ) {

    Camera.Parameters params = camera.getParameters();
    List<Camera.Size> supportedSizes = params.getSupportedPreviewSizes();

    Rect frame = getSurfaceHolder().getSurfaceFrame();
    int width = frame.width();
    int height = frame.height();

    for (Camera.Size size : supportedSizes) {
        if ( size.width >= width || size.height >= height ) {
            return size;
        }
    }

    return supportedSizes.get( 0 );
}

@Override
public void onClick( View v ) {

    switch (v.getId()) {
        case R.id.camera_action_ImageView:
            getCamera().takePicture( getShutterCallback(), null, new JpegPictureCallback() );
        break;
    }
}

private class JpegPictureCallback implements PictureCallback {

    @Override
    public void onPictureTaken( byte[] data, Camera camera ) {

        Bitmap bitmap = null;
        try {
            bitmap = BitmapFactory.decodeByteArray( data, 0, data.length );
        }
        catch (OutOfMemoryError e) {
            Log.e( "CameraFragment", "Out of memory decoding image from camera.", e );
            return;
        }
        data = null;

        if ( bitmap != null ) {
            new SavePictureWorker( getActivity() ).execute( bitmap );
        }

        startPreview();
    }
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-15T17:23:34.207

使用`params.setPictureSize()`. 有关详细信息，请参阅**Camera.Parameters**。

确保您`params.getSupportedPictureSizes()`首先调用以获取支持的图片大小数组。然后从列表中选择一个尺寸并使用该`setPictureSize()`方法设置所需的尺寸。

```
Camera.Parameters params = camera.getParameters();
List<Camera.Size> supportedSizes = params.getSupportedPictureSizes();
.
.
Camera.Size sizePicture = (one of the sizes from supportedSizes list);
.
params.setPictureSize(sizePicture.width, sizePicture.height); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-01T05:06:26.250

```
Camera.Parameters param;
param = camera.getParameters();

Camera.Size bestSize = null;
List<Camera.Size> sizeList = camera.getParameters().getSupportedPreviewSizes();
bestSize = sizeList.get(0);
for(int i = 1; i < sizeList.size(); i++){
    if((sizeList.get(i).width * sizeList.get(i).height) > (bestSize.width * bestSize.height)){
        bestSize = sizeList.get(i);
    }
}

List<Integer> supportedPreviewFormats = param.getSupportedPreviewFormats();
Iterator<Integer> supportedPreviewFormatsIterator = supportedPreviewFormats.iterator();
while(supportedPreviewFormatsIterator.hasNext()){
    Integer previewFormat =supportedPreviewFormatsIterator.next();
    if (previewFormat == ImageFormat.YV12) {
        param.setPreviewFormat(previewFormat);
    }
}

param.setPreviewSize(bestSize.width, bestSize.height);

param.setPictureSize(bestSize.width, bestSize.height);

camera.setParameters(param);
camera.takePicture(shutterCallback, rawCallback, jpegCallback); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-22T08:11:25.790

> 确保首先调用 camera.getSupportedPictureSizes() 以获取支持的图片尺寸数组。

其实是`params.getSupportedPictureSizes();`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T17:27:02.080

我认为，您可以使用[`setPictureSize (int width, int height)`](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setPictureSize%28int,%20int%29). 它用于以像素为单位设置图像尺寸。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-03T10:01:19.280

```
Camera.Parameters parameters = camera.getParameters();
            List<Camera.Size> sizes = parameters.getSupportedPictureSizes();
            int w = 0, h = 0;
            for (Camera.Size size : sizes) {
                if (size.width > w || size.height > h) {
                    w = size.width;
                    h = size.height;
                }

            }
            parameters.setPictureSize(w, h); 
```

# asp.net - ipad 中的 Web 应用程序的离线支持

> ID：10605561
> 
> 赞同：0
> 
> 时间：2012-05-15T17:04:53.893
> 
> 标签：asp.net, sql-server, ipad, offline-browsing

我为餐厅开发了网络应用程序。它的前台是为 iPad 开发的，后台维护 .net web 应用程序。SQL Server 2008 用作数据库。

我想为前台制作离线应用程序，当无法使用 iPad 连接网络/数据库服务器时可以使用它。

主表的数据不能修改，但其他页面应该有主表的最新数据进行事务处理。每当系统连接到互联网时，所有离线交易都应与在线数据同步

如果可以在客户端不安装 sql 的情况下建议我的解决方案会更好我认为根据表结构使用保存数据 xml/json 文件，但对于大量表和客户端，它并不可取，而且存在安全问题

请指导我。任何帮助，将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:07:33.893

只是为了确定：您的前端是使用 HTML 技术开发的？

您可以将 HTML5 本地存储和/或脱机缓存与清单一起使用。我认为您必须手动将数据放在那里，但是您可以为此编写一个函数...

# objective-c - Tableview 第一行未对齐

> ID：10605564
> 
> 赞同：0
> 
> 时间：2012-05-15T17:04:58.700
> 
> 标签：objective-c, uitableview, xml-parsing

我正在处理`xmlparser`和显示来自`[this xml]`mytableview 的数据。如您所见，第一行未与其他行对齐。

这是填充行的方式：

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell.
    cell.textLabel.text = [((AlbumObject *)[listFeed objectAtIndex:indexPath.row]) title];

    return cell;
} 
```

我错过了一些明显的东西吗？

![在此处输入图像描述](../Images/5a12e5fd64c1aac7414e29e435d6beac.png)

**已解决**正如您所建议的，问题是我从 xml 中看不到一些空格。这解决了：

```
[currentStringValue appendString:[string
                             stringByTrimmingCharactersInSet:[NSCharacterSet
                                                              whitespaceAndNewlineCharacterSet]]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:10:24.757

正如您所建议的，问题是我从 xml 中看不到一些空格。这解决了：

```
[currentStringValue appendString:[string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]]; 
```

# linux - 如何在命令后附加字符串？

> ID：10605565
> 
> 赞同：0
> 
> 时间：2012-05-15T17:05:00.213
> 
> 标签：linux, bash, terminal

每次我运行这样的命令

```
ssh user@myhost.com 
```

我必须输入 ssh 密码。

每次我运行这样的命令

```
git push origin master 
```

（将代码推送到 github）

我必须输入github密码。

有没有什么 bash 东西可以将这些密码与命令内联？

我的意思是

```
git push origin master < 'mypass' 
```

或者

```
git push origin master | 'mypass' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:33:12.783

使用 git hub 的公钥认证。

对于主机的 ssh-ing，请将您的密钥添加到主机的 authorized_keys 文件（默认位置是`<user>`您登录的用户的 /home/ /.ssh 目录）。

如果守护程序配置正确，它会在提示输入密码之前简单地使用您的密钥进行身份验证。

# javascript - jsf ajax调用：最后执行javascript函数

> ID：10605566
> 
> 赞同：4
> 
> 时间：2012-05-15T17:05:02.980
> 
> 标签：javascript, ajax, jsf-2

我正在使用 JSF 2.0，这是我的表单：

```
<h:form id="fff" onsubmit="reloadMap();">
    <h:selectOneMenu value="#{rentCarPoolBean.state}">
        <f:selectItems value="#{rentCarPoolBean.stateList}" id="stateList" />
        <f:ajax event="change" render="cities stateSelected" onevent="showAlert"/>
    </h:selectOneMenu>
    <h:selectOneMenu  id="cities" value="#{rentCarPoolBean.city}">
        <f:selectItems value="#{rentCarPoolBean.cityList}"/>
        </h:selectOneMenu>
    <h:outputText value="#{rentCarPoolBean.state}" id="stateSelected" />
</h:form> 
```

和javascript函数：

```
<script type="text/javascript">
    function showAlert(data){
         if (data.status == "complete")
             alert(document.getElementById("stateSelected"));   
    }
</script> 
```

上面的代码所做的是从第一个下拉列表中选择一个状态，它进行 ajax 调用并呈现“城市”下拉列表和“stateSelected”输出文本。

此外，它调用 showAlert() javascript 函数。

我想要做的是在返回所有数据并且下拉和 outputText 都已呈现后调用 javascript 函数。

但目前在呈现元素并显示警报之前调用 javascript 函数`null`。我们如何让javascript函数最终执行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T17:16:46.633

您需要挂钩的状态`success`。这将在 HTML DOM 树更新后运行。`complete`ajax 响应返回后直接运行的状态。这无疑是一个误导性的状态名称，但您应该尝试在“HTTP 请求”的上下文中将其解释为`begin`状态。

另一个问题是`document.getElementById()`通过 HTML 元素 ID 选择项目，而不是通过 JSF 组件 ID。您需要准确地给它提供 JSF 为 HTML 生成的 ID。您可以通过在 webbrowser 中查看页面源来确定正确的 HTML 元素 ID。

总而言之，您的新函数应如下所示：

```
function showAlert(data){
     if (data.status == "success")
         alert(document.getElementById("fff:stateSelected"));  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:27:58.277

这里：

```
alert(document.getElementById("stateSelected")); 
```

您仅指定 JSF 组件 ID，但需要提供完整的 clientId。这是一个解释这一点的[链接。](http://illegalargumentexception.blogspot.com/2009/10/jsf-working-with-component-identifiers.html)

# javascript - 即使未设置也获取宽度

> ID：10605571
> 
> 赞同：0
> 
> 时间：2012-05-15T17:05:30.477
> 
> 标签：javascript, html

我知道即使我们不设置它（通过使用偏移量），我们也可以拥有 div 的绝对位置：[http ://www.quirksmode.org/js/findpos.html](http://www.quirksmode.org/js/findpos.html)

即使我们没有指定它，我们可以得到一个 div 的宽度（或高度）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:13:27.833

您可以使用 clientWidth 和 offsetWidth 来获取宽度。

```
var foo = document.getElementById('foo').clientWidth;
var foo = document.getElementById('foo').offsetWidth; 
```

clientWidth 返回元素的可视宽度，但不包括边框、边距或滚动条。offsetWidth 返回元素的宽度（包括边框和填充），但不返回边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:08:35.420

您可以使用`offsetHeight`or `offsetWidth`，如下所示：

```
var elem_height = document.getElementById('elem').offsetHeight;
var elem_width = document.getElementById('elem').offsetWidth; 
```

这将返回*包括*边框和填充（但不包括边距）的尺寸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:07:39.313

如果你可以使用 jQuery，那么很容易：$("#id").width() 或 .height()。这也适用于大多数浏览器（甚至是非常旧的浏览器）。

# javascript - 如何使数据在外部可用

> ID：10605573
> 
> 赞同：0
> 
> 时间：2012-05-15T17:05:39.383
> 
> 标签：javascript, angularjs, dom-events

请在此处查看：http: [//jsfiddle.net/9VaW2/1/](http://jsfiddle.net/9VaW2/1/)

我想`jData`在外面有空

```
$http({method: 'POST', url: '/someurl'}).
  success(function(data, status, headers, config) {
    var jData = data;
  }).
    error(function(data, status, headers, config) {
  }); 
```

但是当我这样做时：

```
$view.availableData = {
                cols:{ID:'ID', Date:'Date'},
                rows:{data:jData},
                options:{}
            }; 
```

它给了我这个错误

> ReferenceError：未定义 jData

**编辑** 更新小提琴

```
http://jsfiddle.net/9VaW2/3/ 
```

** 我想我找到了进行同步调用的解决方案`..async : false`。这样可行。我认为页面的加载速度比数据返回的速度要快....想知道是否有人有更好的解决方案**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:11:19.517

只需定义为全局变量。

```
var jData;

$http({method: 'POST', url: '/someurl'}).
    success(function(data, status, headers, config) {
      jData = data;
    }).
    error(function(data, status, headers, config) {
    });

$view.availableData = {
    cols:{ID:'ID', Date:'Date'},
    rows:{data:jData},
    options:{}
}; 
```

# fortran - 如何反转一个字符链？

> ID：10605574
> 
> 赞同：3
> 
> 时间：2012-05-15T17:05:45.397
> 
> 标签：fortran

我必须创建一个**反转短语**的程序。

例如：当我写的时候`hello guys`，我想要`syug olleh`

这是我目前所拥有的，但我不知道如何反转板上的字符`phraseT`：

```
program reversing    
implicit none    
character(len=20),dimension(1:20)::phraseT    
character(len=20)::phrase,reverse    
integer::i,x

write(*,*)"write a phrase  :"    
read(*,'(a)')phrase    
x=len(trim(phrase))    
nomT(1:20)=" " 

do i=1,x    
nomT(i:i)=trim(phrase(i:i))    
end do

write(*,*)nomT    
end program reversing 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:42:24.310

这是一个更短的方法：

```
forall (i=1:len(string)) string(i:i) = string(len(string)-i+1:len(string)-i+1) 
```

它甚至可以节省一些字节！我不确定我是否会建议这更聪明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T17:29:59.493

一种简单的方法来做到这一点......

```
character(80) :: string = "Whatttt's up doc?"
character     :: temp
integer       :: i, length

write (*,*) string    ! Writes it out proper.
  length = len_trim(string) ! ignores trailing blanks. 
                            ! use len(string) to reverse those as well
  do i = 1, length/2
     temp = string(i:i)
     string(i:i) = string(length+1-i:length+1-i)
     string(length+1-i:length+1-i) = temp
  end do
write(*,*) string     ! Writes it out backwards.
end 
```

其他人肯定会想出更聪明（更短）的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-20T10:04:40.857

与数组不同，字符没有选择“元素”的高级方法：子字符串必须是连续的（尤其不包括“逆序”）。此处其他答案的方法如下：使用单独选择长度为1的子字符串的表达式来构建新字符串。一个例子是[一个简单的循环](https://stackoverflow.com/a/54382113/3157076)选择匹配的子字符串。

如果我们从单个子字符串构造一个数组，我们可以使用[`transfer`](https://stackoverflow.com/a/54385194/3157076)将重新排序的元素作为字符串放回。

与数组构造函数隐含循环类似，我们可以使用带有内部写入的 I/O 隐含循环：

```
implicit none

character(*), parameter :: string = 'abcde'
character(len(string))  :: reverse
integer i

write(reverse,'(*(A))') (string(i:i),i=len(string),1,-1)

write(*,'(A)') string, reverse

end 
```

但是，这种方法不能“就地”使用（与该方法不同`transfer`），因为内部文件不能出现在 I/O 输出项列表中。可以使用中间变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-26T19:47:06.967

@Rook 的答案也适用于奇数长度的字符串？无论如何，这是我的尝试，灵感来自他的回答，其中也考虑了尾随空格：

```
 ! Reverse the string
    function reverse_string(string) result(gnirts)

        character(len=*) :: string
        character(len(string)) :: gnirts
        character(1) :: temp
        integer :: i, length

        length = len(string) 

        do i = 1,length
            gnirts(length-i+1:length-i+1) = string(i:i)
        end do

end function reverse_string 
```

# coldfusion - Coldfusion cffile 删除问题

> ID：10605578
> 
> 赞同：1
> 
> 时间：2012-05-15T17:05:53.393
> 
> 标签：coldfusion, upload, delete-file, cffile

我有一个页面，用户可以在其中更新包含 4 个图像和其他一些字段的页面。已经为每个文件输入上传了一张图片，当他们上传新图片时，我想拍摄新图片，然后上传它，如果上传成功，请删除旧图片。但是我收到了这个错误。

```
File /var/www/mywebsite.com/Pics/Sunset3.jpg specified in action delete does not exist. 
```

根据我的 ftp，这些文件确实存在于该目录中。这些文件甚至作为表单的一部分显示在页面上，以供用户参考已经存在的图像。我听说无法在同一页面上处理文件上传，您必须使用辅助文件，但这些图像是在上次访问该页面时上传的，因此它们不会在同一页面上上传和处理页。

这是我的代码。变量 tableName 是正确的，它是在代码前面定义的，加上数据库在上传尝试后反映了正确的值，它只是在删除时中断。

```
<cfquery name="getPreviousImage" datasource="#Application.datasourceName#">
        SELECT 
            image1, image2, image3, image4
        FROM 
            #tableName#
        WHERE 
            RecordID = '#form.ID#'
</cfquery> 

<cfset oldImage1 = getPreviousImage.image1>
<cfset oldImage2 = getPreviousImage.image2>
<cfset oldImage3 = getPreviousImage.image3>
<cfset oldImage4 = getPreviousImage.image4>

<cfset image1 = getPreviousImage.image1>
<cfset image2 = getPreviousImage.image2>
<cfset image3 = getPreviousImage.image3>
<cfset image4 = getPreviousImage.image4>

<cfif #form.image1# NEQ ""> 

    <cffile action="upload" destination="#Application.filePath#Pics/" filefield="image1" nameconflict="makeunique">
    <cfif isDefined ("cffile.serverFile")>
        <cfset image1Place = #cffile.serverFile#> 
    </cfif>

    <cfif #getPreviousImage.image1# NEQ "" AND #image1Place# NEQ "">
        <cffile action="delete" file="#Application.filePath#Pics/#oldImage1#">
    </cfif>
</cfif>

<cfif #form.image2# NEQ ""> 

    <cffile action="upload" destination="#Application.filePath#Pics/" filefield="image2" nameconflict="makeunique">
    <cfif isDefined ("cffile.serverFile")>
        <cfset image2Place = #cffile.serverFile#> 
    </cfif>

    <cfif #getPreviousImage.image2# NEQ "" AND #image2Place# NEQ "">
        <cffile action="delete" file="#Application.filePath#Pics/#oldImage2#">
    </cfif>
</cfif>

<cfif #form.image3# NEQ ""> 

    <cffile action="upload" destination="#Application.filePath#Pics/" filefield="image3" nameconflict="makeunique">
    <cfif isDefined ("cffile.serverFile")>
        <cfset image3Place = #cffile.serverFile#> 
    </cfif>

    <cfif #getPreviousImage.image3# NEQ "" AND #image3Place# NEQ "">
        <cffile action="delete" file="#Application.filePath#Pics/#oldImage3#">
    </cfif>
</cfif>

<cfif #form.image4# NEQ ""> 

    <cffile action="upload" destination="#Application.filePath#Pics/" filefield="image4" nameconflict="makeunique">
    <cfif isDefined ("cffile.serverFile")>
        <cfset image4Place = #cffile.serverFile#> 
    </cfif>

    <cfif #getPreviousImage.image4# NEQ "" AND #image4Place# NEQ "">
        <cffile action="delete" file="#Application.filePath#Pics/#oldImage4#">
    </cfif>
</cfif>

<cfquery name="UpdateInfo" datasource="#Application.datasourceName#">
    UPDATE 
        #tableName#
    SET                  
        title = <cfqueryparam value="#form.title#" cfsqltype="CF_SQL_VARCHAR" maxlength="250">,
        <cfif #image1Place# NEQ ""> 
            image1 =    <cfqueryparam value="#image1Place#" cfsqltype="CF_SQL_VARCHAR" maxlength="250">,
        </cfif>
        <cfif #image2Place# NEQ ""> 
            image2 =    <cfqueryparam value="#image2Place#" cfsqltype="CF_SQL_VARCHAR" maxlength="250">,
        </cfif>
        <cfif #image3Place# NEQ ""> 
            image3 =    <cfqueryparam value="#image3Place#" cfsqltype="CF_SQL_VARCHAR" maxlength="250">,
        </cfif>
        <cfif #image4Place# NEQ ""> 
            image4 =    <cfqueryparam value="#image4Place#" cfsqltype="CF_SQL_VARCHAR" maxlength="250">,
        </cfif>
        body = <cfqueryparam value="#form.body#" cfsqltype="CF_SQL_VARCHAR">
    WHERE RecordID = <cfqueryparam value="#form.ID#" cfsqltype="CF_SQL_INTEGER" maxlength="50">
</cfquery> 
```

编辑：这是我实现 fileExist() 后的新错误。此外，我看到所有这些图像都建立在我的服务器上。在其他照片中，我最多可以看到 sunset10.jpg。如果我让这个 fileExist 工作，它所做的不仅仅是防止显示错误并且永远不会执行删除。因为这些文件确实存在，除非我指向错误的位置。

```
Invalid CFML construct found on line 107 at column 138.
ColdFusion was looking at the following text:

>

The CFML compiler was processing:

An expression beginning with #, on line 107, column 23.This message is usually caused     by a problem in the expressions structure.
A cfif tag beginning on line 107, column 18.
A cfif tag beginning on line 107, column 18.
A cfif tag beginning on line 107, column 18. 
```

不幸的是，我无法打开强大的异常报告。此外，当我第一次导航到该页面时会显示此错误。在我有机会提交表格之前。同时，此代码位于 if 中，该 if 仅应在填写表格后执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:32:22.570

您可以在尝试删除之前将 fileExists() 子句添加到 IF 语句中。从您的代码看来，您假设文件的存在是基于从数据库返回的内容，而不是基于文件系统中的实际查找。

我还会确保您没有遇到文件权限或大小写问题（看起来您在 *nix 环境中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:46:37.323

不幸的是，我可能无法为您提供明确的答案。听起来您的服务器可能配置错误，但我无法确定。您的文件属性（好的，linux/unix 上的“模式”）也可能设置错误，因此 CF 可能无法查看或删除它。检查 cffile 命令的 mode="" 属性。

下面介绍如何解决抛出异常的问题。只需添加对 fileExists() 的检查。

```
<cfif getPreviousImage.image1 NEQ "" AND image1Place NEQ "" AND fileExists(application.filePath & "Pics/" & oldImage1>
    <cffile action="delete" file="#Application.filePath#Pics/#oldImage1#">
</cfif> 
```

当您在上传后复制文件时（我假设代码紧跟在您给定的代码段之后），它将覆盖那里的任何文件。如果文件具有相同的名称，它只会覆盖任何现有文件，因此您甚至不需要删除。

还有一点 -**非常重要**的一点- 您的查询：

```
 SELECT 
        image1, image2, image3, image4
    FROM 
        #tableName#
    WHERE 
        RecordID = '#form.ID#' 
```

你真的，*真的*需要把#form.ID# 放在cfqueryparam 中。你的数据库很容易被黑客入侵。这是您需要的：

```
 WHERE 
        RecordID = <cfqueryparam value="#form.ID#" cfsqltype="cf_sql_integer" /> 
```

另外，我希望`#tableName#`不是来自用户输入的东西。它没有作用域，因此如果有人添加`&tablename=foo`到 URL，它可能会被拾取，而不是您现有的 tableName 变量。我建议您指定范围，可能像`#variables.tableName#`. 或者更好的是，不要让 SQL 表名动态化（除非你真的必须这样做）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T23:04:29.637

我不认为文件权限是一些人建议的问题。权限错误会提到一些关于权限的内容。所以我会假设错误说的是实话——文件确实“不”存在。仔细检查是否区分大小写（例如 /Pics 与 /pics）。按照建议使用 Fileexists （您的第二个错误可能是语法错误。

在您的测试站点上打开完整的健壮调试，您将获得更多信息。你可能已经这样做了，并为这个小组削减了它。

你也有一些使用不当的英镑符号

```
<cfif #form.something# EQ ""> 
```

英镑符号实际上与输出而不是评估密切相关。所以这个更好

```
<cfif form.something EQ ""> 
```

最后 - 为了确保代码可以获取它试图删除的文件的句柄，您可能会考虑这样的命名锁：

```
<cfif trim(form.image4) IS NOT ""> 

    <cflock name="piclock_img4" timeout="25">
    <cffile action="upload" destination="#Application.filePath#Pics/" filefield="image4" nameconflict="makeunique">
    <cfif structkeyexists(cffile,"serverfile")>
        <cfset image4Place = cffile.serverFile> 
    </cfif>
    </cflock>

    <cflock name="piclock_img4" timeout="10">
    <cfif trim(getPreviousImage.image4) IS NOT "" AND trim(image4Place) IS NOT "">
        <cffile action="delete" file="#Application.filePath#Pics/#oldImage4#">
    </cfif>
    </cflock>
</cfif> 
```

如果这不起作用，您可以尝试在它们之间添加一个 sleep(2000) - 让操作系统有时间释放文件句柄。现在有这么多不同类型的存储，很难知道底层的 I/O 机制以及它是如何回溯到操作系统和您的代码的。

希望这可以帮助。

# java - 将 long [] 数据转换为 ArrayList

> ID：10605584
> 
> 赞同：0
> 
> 时间：2012-05-15T17:06:13.970
> 
> 标签：java

我有

`long [] data`我需要将其转换为`ArrayList<BigInteger>`

是否有捷径可寻？或者我必须编写一个 foreach 循环并获取 long 的 BigInteger 值并添加到列表中？

有什么捷径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:11:59.257

不，标准 Java 库中没有任何东西可以执行这个确切的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:40:51.663

正如@jb-nizet (JB Nizet) 所说，这项任务没有捷径可走。这是在 List 中“转换” long[] 的 3 行代码

```
long[] data = { 1l, 3l, 5l, 7l, 13l, 17l};
// 3 lines to convert long[] in a List<BigInteger>
List<BigInteger> list = new ArrayList<BigInteger>(data.length); // optmized as suggested
for(long num : data)
    list.add(BigInteger.valueOf(num)); 
```

# ios - 模态下的弹出/推送视图

> ID：10605586
> 
> 赞同：0
> 
> 时间：2012-05-15T17:06:25.517
> 
> 标签：ios, uiview, uinavigationcontroller, modalviewcontroller

我有一个模态视图，它向上滑动覆盖可见视图。基于模式上的按钮按下，我想弹出它覆盖的视图并推送不同的视图，以便当模式再次向下滑动时，新视图可见。

有什么策略可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:17:38.757

从导航控制器堆栈中，您可以访问以前的视图控制器，并且在操作时您可以更改该控制器的视图，使用类似 -

```
NSMutableArray *activeControllerArray =  [self.navigationController.viewControllers mutableCopy];
// Replace your earlier view controller/view with new view controller/view , and then assign again the navigation controller's viewControllers

self.navigationController.viewControllers = activeControllerArray; 
```

# visual-studio-2010 - VS 是否有扩展或加载项来扩展部分类？

> ID：10605587
> 
> 赞同：1
> 
> 时间：2012-05-15T17:06:29.927
> 
> 标签：visual-studio-2010

这似乎是某处某处的某个扩展中可能存在的东西。我只想知道在哪里可以找到它或类似的功能。

**代替：**

1.  创建与部分类同名的新类（最有可能生成）
2.  在名称前输入“public partial”
3.  添加方法

**更像是：**

1.  在对象浏览器中右键单击类
2.  选择“扩展这个部分类...”
3.  添加方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:19:59.770

### 解决方案 1：项目模板

虽然不如对象浏览器插件好，但您可能会从部分类的项目模板中获得一些好处。使用项模板，您可以从“添加新项”对话框添加部分类定义，就像添加标准类定义一样。

该模板创建一个文件，相当于

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Project1
{
    partial class PartialClass1
    {
    }
} 
```

我创建的模板可[在此处](https://skydrive.live.com/embed?cid=4E3C5B7D5630665F&resid=4E3C5B7D5630665F!146&authkey=ACF7I4phK2GQkyI)获得。

为了让它出现在 Visual Studio 2010 Add New Items 对话框中，需要将 zip 文件[1](https://skydrive.live.com/embed?cid=4E3C5B7D5630665F&resid=4E3C5B7D5630665F!146&authkey=ACF7I4phK2GQkyI)放在`%userprofile%\My Documents\Visual Studio 2010\Templates\ItemTemplates`子目录中，然后重新启动 Visual Studio。

如果您已正确完成此操作，您应该会在“添加新项目”对话框中看到一个附加项目：

![模板安装成功后，Partial Class 模板将出现在 Add New Item 对话框中](../Images/53e76f257fae280e94a778a3a63f682b.png)

笔记：

1.  您必须将 zip 文件本身放在此位置，而不是在此处提取 zip 文件的内容。
2.  当我从 Visual Studio 导出模板时，它也出现在 ``%userprofile%\My Documents\Visual Studio 2010\My Exported Templates` 文件夹中。我怀疑这纯粹是因为我创建了它，但我想我会为了完整性而包含它，以防它实际上是一个要求。
3.  我创建的模板默认不包含 public 修饰符，但如果需要，可以简单地编辑 zip 文件中的 PartialClass.cs 以添加它。

### 解决方案 2：代码片段

创建模板后，我对仍然必须手动输入类名感到恼火。代码片段允许您在 Visual Studio 编辑器的帮助下替换类名，从而解决了这个问题。

我创建了一个代码片段来插入部分类。它在[这里](https://skydrive.live.com/embed?cid=4E3C5B7D5630665F&resid=4E3C5B7D5630665F!148&authkey=AAgrozjMt4eW9NY)可用。

下载后，必须通过从 Visual Studio 的“工具”菜单中打开“代码片段管理器”来安装它，选择“导入”，然后浏览到“partialclass.snippet”文件。

一旦安装了代码片段，就可以通过键入`pcl`并按两次 TAB 键来插入部分类。Visual Studio 将展开代码片段并提供帮助来编辑访问修饰符和类名。

笔记：

1.  SkyDrive 似乎已截断`partialclass.snippet`文件的扩展名。您可能需要`.snippet`在下载后添加扩展程序。

# rsync - 如何根据参数杀死进程

> ID：10605597
> 
> 赞同：0
> 
> 时间：2012-05-15T17:07:27.087
> 
> 标签：rsync, kill

如果我有这两个进程，但不知道它们的 PID，有没有办法（不编写长脚本）仅使用它的参数来终止进程（比如要终止 456 的那个）。

```
rsync -av /123 /backup/123
rsync -av /456 /backup/456 
```

使用脚本，这不是问题：使用参数搜索 PID，然后使用该 PID 终止。有没有更简单的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:14:06.900

如果您使用的是 linux，请将 pkill 与带有您要杀死的进程的 args 的字符串一起使用。-f 标志指定将完整的字符串和参数匹配到正在运行的进程。

```
pkill -f "rsync -av /456" 
```

*nix 的任何其他风格，使用带有标志的 ps，管道到 grep，管道到 awk 以提取进程 ID，然后通过管道终止。

# asp.net - 在同一视图中使用两个不同的表

> ID：10605598
> 
> 赞同：0
> 
> 时间：2012-05-15T17:07:32.360
> 
> 标签：asp.net, .net, asp.net-mvc-2

我正在尝试做一个简单的应用程序，但我无法正确编写视图，因此我可以在同一个视图中使用不同的表。

我有两个表，Sales 和 SalesLine。每个销售有许多销售线。我要做的是添加一个销售，并在同一页面中添加不同的销售行。在 C# 代码中，每个 Sale 对象都有一个 SalesLines EntitySet。

添加新销售的 HTML 代码如下：

```
<% using (Html.BeginForm()) {%>
    <%: Html.ValidationSummary(true) %>

    <fieldset>
        <legend>Fields</legend>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.N_Factura) %>
        </div>
        <div class="editor-field">
            <%: Html.TextBoxFor(model => model.N_Factura) %>
            <%: Html.ValidationMessageFor(model => model.N_Factura) %>
        </div>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.Fecha) %>
        </div>
        <div class="editor-field">
            <%: Html.TextBoxFor(model => model.Fecha) %>
            <%: Html.ValidationMessageFor(model => model.Fecha) %>
        </div>
        <div class="editor-field">
        <%:Html.DropDownListFor(model =>model.Proveedor,(ViewData["SelectList"] as SelectList)) %>
          </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>

<% } %> 
```

我想以某种方式在同一页面中添加新的销售线，这样我就可以通过单击创建链接来填充它们并添加销售和销售线。我试图在这里放置一个自动出现的默认销售线，然后是一个链接，如果需要，可以使用 AJAX 添加其他销售线（我知道它在 Java 中更容易，至少对我而言）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:13:56.900

要在同一个视图中从 2 个表中获取数据，请使用 ViewModel。这是一个专门用于此视图的简单类。

```
public class SalesViewModel
{
  public Sales Sale { set;get;}
  public IEnumerable<SalesLine> Detail{ set;get;}

  public SalesViewModel()
  {
    if(this.Sale==null)
       this.Sale=new Sales();
    if(this.Details==null)
       this.Details=new List<Sales>();
  }    
} 
```

将其返回到您的视图

```
public ActionResult GetSales(int id)
{
  SalesViewModel vm=new SalesViewModel();
  vm.Sale=dbContext.Sales.Where(x=x.Id=id);
  vm.Details=dbContext.SalesLine.Where(x=x.SaleId=id);

  return View(vm);

} 
```

您的视图将严格输入到此视图模型；

```
@model SalesViewModel 

@Model.Sale.Id
/// remaining form elements 
```

# sql - 如何使用 * 或 WHERE 子句定义字符串从 DB2 导出

> ID：10605603
> 
> 赞同：1
> 
> 时间：2012-05-15T17:08:10.717
> 
> 标签：sql, db2, export, export-to-csv

我正在使用 db2 export 将数据保存到 CSV 文件。

最终，我需要一个构建一个脚本，该脚本将接收一个 SQL，运行它并将其导出。我已经准备好了所有这些，但是某些查询会导致错误。

目前有两种情况会导致错误：

1 - 使用通配符。壳牌扩展杀死了这一点。

将整个 SQL 包含在 ' 中似乎可以解决这个问题，但最佳实践是什么？似乎有一些边缘情况我还没有解决。

2 - 我不能在 where 子句中使用字符串：

```
bash-3.00$ db2 export to /tmp/text of DEL 'select * from SCHEMA.TABLE where COL='STRING''
SQL3022N  An SQL error "-206" occurred while processing the SELECT string in
the Action String parameter.

SQL0206N  "STRING" is not valid in the context where it is used. 
```

即使更改为特定列以从整个 SQL 中选择和删除 '' 也不会改变它。

有任何想法吗？

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:21:45.877

@mru 走在正确的轨道上，但我认为一个工作示例会更有帮助：

```
 db2 "export to /tmp/text of DEL select * from SCHEMA.TABLE where COL='STRING' " 
```

这里的重要因素是 SQL select 没有被引用，只是字符串文字的内容。

这是另一种转义不能很好地使用命令行 shell 的字符的方法：

```
db2 export to /tmp/text of DEL select \* from SCHEMA.TABLE where COL=\'STRING\' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:12:36.913

当它们关闭引号时，您必须转义查询字符串中的单引号。看看 [如何在单引号字符串中转义单引号？](https://stackoverflow.com/questions/1250079/bash-escaping-single-quotes-inside-of-single-quoted-for)一个解法。但在你的情况下，我认为使用双引号而不是单引号就足够了。

# visual-studio-2010 - 使用 ClickOnce 部署 COM 组件时出现问题

> ID：10605604
> 
> 赞同：1
> 
> 时间：2012-05-15T17:08:10.817
> 
> 标签：visual-studio-2010, com, build, clickonce, publish

我想发布一个在 Visual Basic.Net 2010 中开发的应用程序，它依赖于使用 ClickOnce 的 Com 组件。我已将 Com 对象（dll 类型的文件）的独立属性设置为 True，并且应用程序成功构建。但是，在构建的 Visual Studio 输出窗口中会弹出数十个令人讨厌的警告：

“C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(2580,9)：警告 MSB3179：隔离 COM 引用 'AXmsCtrl' 时出现问题：注册表项 'HKEY_CLASSES_ROOT\CLSID{30f256c0-ee6e-4c57 -a475-e3e81236119f}\Implemented Categories{7DD95801-9882-11CF-9FA9-00AA006C42C4}' 未导入”。

一旦应用程序安装在未注册 Com 组件的目标计算机上，它就会崩溃而死。但是，如果您使用 Regsvr32 命令手动注册所需的 Com 对象，它将像魅力一样工作。

为了解决这个问题，我尝试将高级编译器设置中的目标 CPU 从 AnyCPU 更改为 x86，但没有成功。此外，将目标框架更改为 .Net4，但也没有任何效果。

我已经走出去在网上搜索答案，但都无济于事。我想知道是否有人可以给我一个洞察力来解决这个问题。我会提前感谢这一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:23:11.130

我在 MSDN 上发布了同样的问题，我发现一个非常有用的答案如下：

> MSB3179：隔离 COM 引用“程序集”时出现问题：“错误”。这是一条通用错误消息，指示在应用程序清单中生成 RegFree COM >条目时出现问题（由 IsolatedComReferences 任务参数指定）。错误消息的后半部分包含有关问题性质的更多信息。此错误的一个可能原因是 RegFree COM 组件未在构建计算机上正确注册。

要进一步关注此问题并查看 MSDN 社区中给出的答案，请[单击此处](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/30b1a8d1-51a9-486a-b6bf-43fc7cf2c469/#291b2865-5f56-40e4-b2b6-d8f3303f12e2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:26:36.667

我过去曾使用无注册 COM 来使用 ClickOnce 交付 COM 组件。请参阅[此 msdn 文章](http://msdn.microsoft.com/en-us/magazine/cc188708.aspx)

# c# - c# 数值多项式回归

> ID：10605607
> 
> 赞同：3
> 
> 时间：2012-05-15T17:08:21.787
> 
> 标签：c#, numerical-methods, polynomial-math

我正在开始我的第一个 C# 项目——需要找到适合多个 xy 数据点的曲线。

例如：

x: 1,2,3,4,5,6 y: 0.5,5,0.5,2.5,5,0.5

碰巧的是，根据 excel，我需要对这些点进行适当的曲线拟合是六阶多项式。

如何获得该曲线的系数和指数以在 C# 中编写正确的表达式？我想远离图书馆，因为这很可能最终会被转换为 C 用于微处理器。

***我是 C# 新手，对硬件/软件集成知之甚少。***

也就是说，我现在正在阅读数值方法……这个项目的第二步将是采用曲线并在连续最小值之间进行数值积分……

非常感谢任何建议/指针。

输入将由六个 xy 坐标给出...

**问题#1：** 给定六个坐标，我如何写一个多项式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:31:01.367

给定在某个*x* *[i]**处评估的n*个点，找到多项式的系数的问题称为多项式插值问题。[您可以在此处](http://en.wikipedia.org/wiki/Polynomial_interpolation)阅读问题的详细信息及其解决方案(wikipedia.org)。

您应该密切关注*Constructing the interpolation polynomial*部分，他们提到如果您使用高斯消元法，您需要反转的矩阵会引入很大的错误，并查看[牛顿插值](http://en.wikipedia.org/wiki/Newton_polynomial)(wikipedia.org) 以获得更好的方法。仅仅六分可能无关紧要，但值得了解。

至于实现，您有两个选择：使用支持线性代数的第三方库 - 例如[Science Code .Net](http://www.sciencecode.com/) (sciencecode.com)，或者开始为向量和矩阵编写一些基本抽象，并实现基本操作，例如如乘法、加法和求逆。过去，我们使用了一个名为“C 中的数值食谱”的库，它们很可能有一个 C# 端口。可能值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:34:20.670

如果您认为六阶多项式最适合六个数据点，那么您似乎严重[过度拟合](http://en.wikipedia.org/wiki/Overfitting)，我很好奇您是否真的意味着实际数据中只有六个点（在这种情况下拟合不会有意义）或者您只有六个样本点，并且预计可以预测数据的实际形状。

[https://www.coursera.org/course/ml](https://www.coursera.org/course/ml)有一个关于机器学习的优秀课程，更具体相关，因为它教授自动选择多项式的正确阶数、划分数据和更基本的方面，例如底层的矩阵数学整个东西。

这不是那种你可以指出“算法 X”并希望它正确出现的东西...... ML 课程涵盖了人们犯的很多错误（过度拟合、拟合不足、数据采样不佳等）。 ..) 在对数据进行拟合时。它还讨论了如何避免它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-14T12:16:45.310

为此，我成功地使用[了 MathNET.Numerics](https://numerics.mathdotnet.com/)库。它可以作为 Nuget 包安装，并且似乎得到了积极的维护。曲线拟合在[此处](https://numerics.mathdotnet.com/Regression.html)的文档中进行了描述。

# wpf - wpf 数据网格背景颜色

> ID：10605612
> 
> 赞同：0
> 
> 时间：2012-05-15T17:08:41.390
> 
> 标签：wpf, datagrid, background

如何更改数据网格左上角的背景颜色。我试图为整个数据网格赋予颜色，但仍然相同。

![在此处输入图像描述](../Images/b48acf09aa8d6ae22a5eea89228c3cee.png)

谢谢

迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:30:37.423

当数据网格失去焦点时，该颜色与 selectedrow 背景中使用的颜色相同，因此：

```
<Style x:Key="DGStyle" TargetType="{x:Type DataGrid}">
    <Style.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="{StaticResource SelectedItemBackgroundNotFocused}"/>
    </Style.Resources>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:44:17.357

您喜欢设置样式的部分是 DataGrid 模板中的“全选”按钮。如果您使用 Blend 提取模板并找到按钮，剩下的就是小菜一碟！

*   提取模板-打开Blend，把DataGrid放到MAinWindow上，右键，选择Edit Template，Edit Copy，点击OK。

*   完成提取后，转到后面的代码并在 Extracted datagrid 样式中找到：

    ```
    <Button Command="{x:Static DataGrid.SelectAllCommand}" ... 
    ```

那是你的按钮！任何你喜欢的风格:) 我知道你可以（通过查看你的其他帖子）

*   完成样式后，只需将其复制粘贴到 Visual Studio 解决方案中，然后将样式应用于数据网格

# ios - 将 NSString 转换为不同的字符集

> ID：10605618
> 
> 赞同：0
> 
> 时间：2012-05-15T17:09:03.480
> 
> 标签：ios, cocoa, character-encoding, nsstring

我们正在为实现 NNTP 协议的 iOS5 开发一个简单的 usenet 阅读器。

不幸的是，我们在编码方面遇到了一些问题：标头可能如下所示：

```
Subject: Re: [GA] =?ISO-8859-15?Q?Pr=FCfungsmodus?= 
Date: 22 Apr 2012 22:50:38 +0200 
```

Objective-C 中是否有一些简单的方法可以将包含的 NSString 转换`=?ISO-8859-15?Q?Pr=FCfungsmodus?=` 为“ `Prüfungsmodus`”？

谢谢

**编辑：**

嗯。我不确定我是否正确：您的意思是：

```
NSRange range = [input rangeOfString:@"=?"];
NSRange range2 = [input rangeOfString:@"?="];

NSString *string_to_decode = [input substringWithRange:NSMakeRange(range.location, range2.location-(range.location-2))];

NSData *data = [string_to_decode dataUsingEncoding:NSISOLatin1StringEncoding allowLossyConversion:YES];

NSString *converted = [[NSString alloc] initWithData:data encoding:(NSISOLatin1StringEncoding)]; 
```

因为那行不通。。

**EDIT2** 尝试转换原始字节：

```
uint8_t buffer[1024];
iStream read:buffer maxLength:sizeof(buffer)
NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSISOLatin1StringEncoding]; 
```

无论我在这里选择哪种编码，`Subject:`字段看起来总是一样的（除了日语等编码......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T19:26:50.057

如果您是从第一原则自己做的，那么在大纲中：

*   从网络读取字节
*   确定特定编码中每次运行的范围 - 在您的示例中，您正在寻找 =?...?= 部分 [这看起来像 MIME 字编码] - 对于每个范围，您需要字节指针、长度、编码 [这可能既是字符集又是单独的编码样式，这里看起来像带有 Q 编码的 ISO-8859-15]
*   `NSString`为每个使用创建一个`- (id)initWithBytes:(const void *)bytes length:(NSUInteger)length encoding:(NSStringEncoding)encoding`

*   连接

*   您还需要处理输入中的其他转义序列，例如当输入包含文字时`=?`

有关 MIME 的详细信息，请查看 Wikipedia。

*[编辑：在 MIME 上添加注释。]*

# ios - 在 cllocationdistance 中转换数据的问题

> ID：10605620
> 
> 赞同：0
> 
> 时间：2012-05-15T17:09:15.183
> 
> 标签：ios, ipad, nsmutablearray, mkmapview, cllocationdistance

我试图添加到一个可变数组中，但无法弄清楚。将不兼容的数据类型加倍到 id 时引发错误。问题是我如何转换距离并将其存储在我的数组中。

```
for (int i = 0; i < _getAllLocations.count; i++) {

uscInfo *entity = [_getAllLocations objectAtIndex:i];
NSNumber *numlat=[[NSNumber alloc] initWithDouble:[entity.Latitude doubleValue]];
NSNumber *numlon=[[NSNumber alloc] initWithDouble:[entity.Longitude doubleValue]];
NSLog(@"%d",[_getAllLocations count]);
la=[numlat doubleValue];
lo=[numlon doubleValue];
CLLocation *currentLocation =  [[CLLocationalloc]initWithLatitude:lalongitude:lo];////here put your destination point

//NSLog(@"New Location:%@", newLocation);
CLLocationDistance distance = [newLocation distanceFromLocation:currentLocation];
NSLog(@"%@ (%@) %4.0f km from current location",entity.EntityNo, entity.EntityName, distance);
NSLog(@"%@",currentLocation); 
```

我正在尝试将“距离”存储在我的数组“locationDistance”中

感谢您的帮助，我对 iOS 以及一般编程仍然很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:29:24.533

（您确实应该包含不起作用的代码 - 在这种情况下是实际`addObject:`代码。）

但我可以告诉你，问题是你可能试图将一个裸 CLLocationDistance 添加到数组中，因为它不是一个对象，所以它不起作用。它是`typedef`'d as a`double`所以你需要使用例如`[NSNumber numberWithDouble:distance]`.

# sql - Postgres 9.x - 有没有办法避免将数据库连接信息硬编码到视图中？

> ID：10605622
> 
> 赞同：3
> 
> 时间：2012-05-15T17:09:20.267
> 
> 标签：sql, database, postgresql, postgresql-9.1

我经常手动将生产数据拉入我的测试数据库，这样我就可以在真实数据上测试新代码，以及测试升级场景或重现数据特定的错误。为此，我`VIEW`为我的测试数据库中的每个生产表设置了一个。这些视图看起来像这样：

```
CREATE VIEW ProdLink.Users AS
   select * from dblink(
      'hostaddr=123.123.123.123 dbname=ProductionDB user=ROUser password=secret',
      'select * from users') as t1(userid uuid, email varchar(50), alias varchar(50), fullname varchar(50), password varchar(100)); 
```

现在，在我的生产数据库上，我可以运行：

```
SELECT * FROM ProdLink.Users; 
```

并查看我的生产数据库上的所有用户。然后我可以执行以下操作：

```
INSERT INTO Users SELECT * FROM ProdLink.Users L WHERE NOT EXISTS (select 1 from Users where Users.UserId = L.UserId); 
```

允许我从测试中不存在的生产中提取每个用户。

我有大约 30 个这样的视图来*代理*生产数据，但是我发现必须将生产数据库连接信息硬编码到每个视图中有点麻烦。

**我的问题：**是否有避免硬编码或至少在每个视图上复制此连接信息的好方法？我可以使用数据库级变量、环境变量或其他任何东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:41:08.070

为避免重复，您可以将连接字符串存储在表中：

```
CREATE VIEW ProdLink.Users AS
    select * from dblink(
        (select conn_string from conn_string where conn = 'that_one'),
        'select * from users'
    ) as t1 (
        userid uuid, 
        email varchar(50), 
        alias varchar(50), 
        fullname varchar(50), 
        password varchar(100)
    ); 
```

# c# - `Timer` 组件不够准确，有替代方案吗？

> ID：10605639
> 
> 赞同：2
> 
> 时间：2012-05-15T17:10:30.080
> 
> 标签：c#, winforms, visual-studio-2008

我需要每 0.03125 秒发生一次事件`Timer`控制只能到 0.031 秒

如何从`Stopwatch`更准确的组件创建事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T01:20:05.127

我发现了这个，它比标准计时器更准确可靠！我不敢相信。

[http://www.codeproject.com/Articles/5501/The-Multimedia-Timer-for-the-NET-Framework](http://www.codeproject.com/Articles/5501/The-Multimedia-Timer-for-the-NET-Framework)

引用： Win32 多媒体计时器服务提供最大程度的计时准确性。它们允许您以比其他计时器服务更高的分辨率安排计时事件。这在计时精度至关重要的多媒体应用中非常有用。例如，MIDI 应用程序需要尽可能细粒度的时序事件。

不幸的是，Win32 多媒体计时器不是 .NET Framework 的一部分。但是，通过使用 .NET 互操作性服务，可以将多媒体计时器纳入 .NET 范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T17:15:11.953

一般来说，定时器的精度只能在 15 毫秒左右，即使那样，也往往会出现精度问题，因为它们通常会被抢占。

拥有一个精度在四分之一毫秒范围内的计时器将需要一个实时操作系统，并且无论使用哪个计时器，都可能无法正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T17:13:50.157

Windows 不是实时操作系统 - 因此您无法保证在特定时间后执行方法。

您能做的最好的事情就是经常忙着等待检查时间（可能使用秒表）。

您还可以使用分辨率更高的多媒体计时器...（搜索查询 - [c# 多媒体计时器](http://www.bing.com/search?q=c%23+multimedia+timers)，即[从 C# 中的计时器获取准确的滴答声](https://stackoverflow.com/questions/8742/getting-accurate-ticks-from-a-timer-in-c-sharp)）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T17:18:44.013

“我需要每 0.03125 秒发生一次事件”——要可靠地达到这样的精度，请使用专用的微控制器。

您无法在桌面操作系统上实现您似乎需要的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T17:13:19.610

使用 chek 秒表时间或更准确的计数器的高优先级线程和循环怎么样？

# memory - 安装 Moodle 2.2.2+ 时出现内存不足错误

> ID：10605641
> 
> 赞同：0
> 
> 时间：2012-05-15T17:10:37.020
> 
> 标签：memory, installation, moodle

我正在尝试使用 Web 安装 (http://www.xxecotest3.ingles100.com) 在使用 PHP 5.4 的共享 1and1 linux 主机中安装 Moodle 2.2.2+。

当我第一次执行安装时，我可以到达它询问moodledata文件夹位置路径的步骤，以及之后的步骤（我不记得确切的要求是什么，我相信数据库信息）。点击进入下一步后，我得到了这个错误：

**致命错误：第 626 行 /homepages/44/d######/htdocs/tests/moodle/lib/outputlib.php 中的内存不足（分配 8912896）（试图分配 73713 字节）**

所以我无法继续安装。此外，即使我尝试从头开始重新安装，我也不能，我会收到相同的错误消息。

我也试过安装 Moodle 1.9。我可以完成安装，在单击最后一个“下一步”（或“继续”）后，我得到了一个空白屏幕。我在 config.php 中打开了调试，现在它显示相同的“内存不足”错误...

我刚刚还用 phpinfo() 检查了 memory_limit 值，它设置为 90M，我认为这应该足够了......

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:40:02.310

显然你需要在 PHP 配置中提高你的 PHP 内存限制。

这是设置在名为 php.ini 的 PHP 配置文件中提高参数“memory_limit”的值

# html - 我应该使用@font-face 还是图像来显示复杂的花哨标题

> ID：10605642
> 
> 赞同：0
> 
> 时间：2012-05-15T17:10:37.600
> 
> 标签：html, css, font-face

我有一个网页，有一个花哨的标题。我可以选择使用@font-face 来渲染它或使其成为图像。该字体仅用于这一标题

我发现 @font-face 选项在浏览器中实现起来有点棘手，因为标题在大小和对齐方面非常复杂。字体本身在浏览器之间也不完全相同。

所以我想只使用带有 alt 标签的图像选项。这样做有什么真正的问题吗？SEO注意事项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:23:24.520

使用图像作为标题没有任何**问题**，只要你做对了（将它们放在适当的标题标签等中）。使用`alt`标签有时是不够的。我建议研究一些图像替换技术。这是一个广泛（而且相当不错）的列表：

[http://css-tricks.com/examples/ImageReplacement/](http://css-tricks.com/examples/ImageReplacement/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:21:47.857

简而言之，由您决定。对于像这样的化妆品，我会同时使用字体和背景图像。让它在现代浏览器（FF、Chrome、Safari、IE9(?)）中工作，然后为 IE6 和其他不合格的浏览器添加带有图像的后备。

使用图像（即`<img />`标签）可能是您最糟糕的选择。当涉及到 SEO 垃圾时，标题标签在水中占有一席之地，因此您拥有的标记越有意义越好。

> 字体本身在浏览器之间也不完全相同。

[在这里阅读...](http://dowebsitesneedtolookexactlythesameineverybrowser.com/)

# javascript - history.state 在 Chrome 中不起作用

> ID：10605645
> 
> 赞同：0
> 
> 时间：2012-05-15T17:10:51.470
> 
> 标签：javascript

### [以下代码在 FF 中有效，但在 Chrome 中无效：](http://jsfiddle.net/kqPBx/)

```
history.replaceState({ obj: 'pushed on' }, 'unused', '');

alert(history.state.obj); 
```

有什么方法可以`history.state`在 Chrome 中工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:14:40.533

希望这会对您有所帮助：[History.js](https://github.com/balupton/history.js)。

# android - Android：选择孩子时触发父选择器

> ID：10605647
> 
> 赞同：18
> 
> 时间：2012-05-15T17:10:55.840
> 
> 标签：android

我有一个 LinearLayout，里面有一些其他的 LinearLayout。子布局有一个背景选择器集。当按下孩子时，我还需要更改父布局的颜色。我也为父级设置了一个背景选择器，但它仅在单击任何子级之外时触发。

我怎样才能避免这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-15T17:55:13.477

尝试将此添加到父 LinearLayout 的布局属性中：

```
android:addStatesFromChildren="true" 
```

或者，在代码调用中：

```
parentLayout.setAddStatesFromChildren(true); 
```

在任何一种情况下，请确保子布局*没有*设置`android:duplicateParentState`属性（并且不要调用`setDuplicateParentState(true)`），否则当系统检测到循环依赖时，您将在运行时遇到异常。

# wordpress - 不满足条件时不返回任何内容

> ID：10605649
> 
> 赞同：0
> 
> 时间：2012-05-15T17:11:01.673
> 
> 标签：wordpress, function, return

例如，我在 Wordpress 中注意到，在执行操作之前有多个带有空白返回的 if 语句：

```
function save_book_meta($post_id) {
    $slug = 'book';
    if($slug != $_POST['post_type']) {
        return;
    }
    if(!current_user_can('edit_post', $post_id)) {
        return;
    }
    // perform actions here
} 
```

像这样编写它和像下面的示例那样编写它有什么区别，它不返回任何内容，而是执行检查，然后执行操作：

```
function save_book_meta($post_id) {
    $slug = 'book';
    if($slug == $_POST['post_type'] && current_user_can('edit_post', $post_id)) {
        // perform actions here
    }
} 
```

我的问题是：

1.  空白退货的目的是什么？
2.  拥有多个 return 语句（即使只执行一个）是一种好习惯，还是理想情况下 return 应该在函数的末尾？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:15:44.460

1）它只是让代码更干净一些。想象一下，如果您有 10 个而不是示例中的两个。
2) 是的，返回通常比稍后使用 if 语句更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:16:44.400

1.  停止该功能继续。
2.  在这种情况下分离这两个条件的一个好处`if`是防止不必要的处理（访问数据库并执行业务逻辑以确定用户的权限级别）。如果您可以`FALSE`从一开始就以尽可能少的努力确定结果，那么继续执行更复杂的测试是没有意义的。

一般来说，虽然*我*可能会加入 2 个简单的条件。但在这种情况下，我认为这是合适的。

# c - 将 char* 转换为 float 或 double

> ID：10605653
> 
> 赞同：14
> 
> 时间：2012-05-15T17:11:17.037
> 
> 标签：c, strtod, atof

我有一个从文件中读取的值并存储为 char*。该值是货币数字、#.##、##.## 或###.##。我想将 char* 转换为可以在计算中使用的数字，我尝试了 atof 和 strtod，它们只是给了我垃圾数字。这样做的正确方法是什么，为什么我做错了？

这本质上就是我正在做的，只是从文件中读取 char* 值。当我打印出 temp 和 ftemp 变量时，它们只是垃圾，巨大的负数。

另一个编辑：

我正在 gcc 中运行这个

```
#include <stdio.h>
int main()
{
 char *test = "12.11";
 double temp = strtod(test,NULL);
 float ftemp = atof(test);
 printf("price: %f, %f",temp,ftemp);
 return 0; 
```

}

我的输出是价格：3344336.000000, 3344336.000000

编辑：这是我的代码

```
if(file != NULL)
    {
        char curLine [128];
        while(fgets(curLine, sizeof curLine, file) != NULL)
        {               
            tempVal = strtok(curLine,"|");          
            pairs[i].name= strdup(tempVal);
            tempVal = strtok(NULL,"|");
            pairs[i].value= strdup(tempVal);
            ++i;
        }
        fclose(file);
    }

    double temp = strtod(pairs[0].value,NULL);
    float ftemp = atof(pairs[0].value);
    printf("price: %d, %f",temp,ftemp); 
```

我的输入文件是非常简单的名称，值对是这样的：

```
NAME|VALUE
NAME|VALUE
NAME|VALUE 
```

价值为美元金额

已解决：谢谢大家，我使用的是 %d 而不是 %f 并且没有包含正确的标题。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-15T17:40:52.333

You are missing an include : `#include <stdlib.h>`, so GCC creates an implicit declaration of `atof` and `atod`, leading to garbage values.

And the format specifier for double is `%f`, not `%d` (that is for integers).

```
#include <stdlib.h>
#include <stdio.h>

int main()
{
  char *test = "12.11";
  double temp = strtod(test,NULL);
  float ftemp = atof(test);
  printf("price: %f, %f",temp,ftemp);
  return 0;
}
/* Output */
price: 12.110000, 12.110000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:26:54.913

您发布的代码是正确的，应该可以工作。但请检查您在`char*`. 如果正确的值太大而无法表示，函数将返回正值或负值`HUGE_VAL`。检查您在计算机上的`char*`最大值`float`和`double`可以表示的最大值。

检查[此页面以供`strtod`参考](http://www.cplusplus.com/reference/clibrary/cstdlib/strtod/)，并检查此页面以[供`atof`参考](http://www.cplusplus.com/reference/clibrary/cstdlib/atof/)。

我已经尝试过您在 Windows 和 Linux 中提供的示例，并且效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:51:59.763

```
printf("price: %d, %f",temp,ftemp); 
              ^^^ 
```

这是你的问题。由于参数是 type`double`和`float`，因此您应该同时使用`%f`两者（因为`printf`是可变参数函数，`ftemp`将被提升为`double`）。

`%d`期望相应的参数是 type `int`，而不是`double`。

像`printf`这样的可变参数函数并不真正知道变量参数列表中参数的类型；你必须用转换说明符告诉它。由于您告诉`printf`第一个参数应该是一个`int`， printf 将从`sizeof (int)`参数列表中获取下一个字节并将其解释为整数值；因此是第一个垃圾号。

现在，几乎可以保证`sizeof (int)`< `sizeof (double)`，所以当从参数列表中`printf`获取下一个`sizeof (double)`字节时，它可能从 的中间字节开始`temp`，而不是 ; 的第一个字节`ftemp`。因此是第二个垃圾号码。

两者都用`%f`。

# c# - 如何在完成之前访问 DirectoryInfo.EnumerateFiles

> ID：10605659
> 
> 赞同：3
> 
> 时间：2012-05-15T17:11:41.640
> 
> 标签：c#, winforms, io, .net

在我问的问题[中，快速检索文件夹和所有子文件夹中的文件名列表以及](https://stackoverflow.com/questions/10604830/retrieve-a-list-of-filenames-in-folder-and-all-subfolders-quickly)我发现的其他一些文件，似乎搜索许多文件的方法是使用 EnumerateFiles 方法。

> EnumerateFiles 和 GetFiles 方法的区别如下： 使用 EnumerateFiles 时，可以在返回整个集合之前开始枚举名称集合；当您使用 GetFiles 时，您必须等待返回整个名称数组，然后才能访问该数组。因此，当您处理许多文件和目录时，EnumerateFiles 会更有效。

这对我来说听起来很棒，我的搜索大约需要 10 秒，所以我可以在信息进入时开始制作我的列表。但我无法弄清楚。当我运行 EnumerateFiles 方法时，应用程序会冻结，直到它完成。我可以在后台工作人员中运行它，但同样的事情也会发生在那个线程上。有什么帮助吗？

```
 DirectoryInfo dir = new DirectoryInfo(MainFolder);
 List<FileInfo> matches = new List<FileInfo>(dir.EnumerateFiles("*.docx",SearchOption.AllDirectories));

//This wont fire until after the entire collection is complete
DoSoemthingWhileWaiting(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T17:23:48.767

您可以通过将其推送到后台任务来执行此操作。

例如，您可以这样做：

```
var fileTask = Task.Factory.StartNew( () =>
{
    DirectoryInfo dir = new DirectoryInfo(MainFolder);
    return new List<FileInfo>(
           dir.EnumerateFiles("*.docx",SearchOption.AllDirectories)
           .Take(200) // In previous question, you mentioned only wanting 200 items
       );
};

// To process items:
fileTask.ContinueWith( t =>
{
     List<FileInfo> files = t.Result;

     // Use the results...
     foreach(var file in files)
     {
         this.listBox.Add(file); // Whatever you want here...
     }
}, TaskScheduler.FromCurrentSynchronizationContext()); // Make sure this runs on the UI thread

DoSomethingWhileWaiting(); 
```

* * *

您在评论中提到：

> 我想在列表中显示它们。并在它们进入时完美地将它们发送到主用户界面

在这种情况下，您必须在后台处理它们，并在它们进入时将它们添加到列表中。例如：

```
Task.Factory.StartNew( () =>
{
    DirectoryInfo dir = new DirectoryInfo(MainFolder);
    foreach(var tmp in dir.EnumerateFiles("*.docx",SearchOption.AllDirectories).Take(200))
    {
        string file = tmp; // Handle closure issue

        // You may want to do this in batches of >1 item...
        this.BeginInvoke( new Action(() =>
        {
             this.listBox.Add(file);
        }));
    }
});
DoSomethingWhileWaiting(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T17:15:43.140

应用程序*冻结*是因为您通过将其放入`List<FileInfo>`. 就好像您急切地调用旧方法一样。因此，正确的方法是在后台线程中运行它，然后不要立即将结果传递给将消耗可枚举直到结束的东西，而是在它们到达循环时开始迭代并添加项目。

> 我可以在后台工作人员中运行它，但同样的事情也会发生在那个线程上。

是的，在循环期间，您显然会冻结后台线程，但这就是后台线程的含义：避免冻结主 UI 线程。只需确保当您将项目传递给主线程以显示它们时，您正在使用与 UI 的正确同步。在 WinForms 中，这发生在[Control.Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)方法中。当然要小心，因为后台线程和 UI 线程之间经常编组也会产生负面影响，让您感觉应用程序*冻结*。要解决此问题，您可以在文件以块的形式到达时传递它们。

这是一个例子：

```
Task.Factory.StartNew(() =>
{
    var dir = new DirectoryInfo(MainFolder);
    var files = dir.EnumerateFiles("*.docx", SearchOption.AllDirectories);
    foreach (var file in files)
    {
        Action<string> del = f => listBox1.Items.Add((string)f);
        BeginInvoke(del, file);
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T17:16:50.110

你可以做

```
 forach(var f in dir.EnumerateFiles("*.docx",SearchOption.AllDirectories))
    {
//.. process file
    } 
```

在线程中，并在进程完成后触发一个事件

# django - 在 m2m_changed 上使用信号

> ID：10605662
> 
> 赞同：1
> 
> 时间：2012-05-15T17:11:59.803
> 
> 标签：django

想要`follow()`在 UserProfile 中调用函数时使用信号。我已经编写了可与其他模型一起使用的信号（保存时）。

```
class UserProfile(UserenaBaseProfile):
  user = models.OneToOneField(User,unique=True,verbose_name=_('user'))
  location = models.CharField(_('Location'), max_length=255, blank=True, default='')
  following = models.ManyToManyField(User, verbose_name=_('following'), related_name='followers', blank=True, null=True)

  def follow(self, user):
    self.following.add(user)

  def unfollow(self, user):
    self.following.remove(user) 
```

信号

```
def follow_action(sender, instance, created, action_object=None, **kwargs):
  action.send(instance.user, verb='follows', target=instance.content_object)
post_save.connect(follow_action, sender=UserProfile) 
```

此信号在`UserProfile`模型保存时有效。我想在`follow()`函数执行时调用信号。你能帮忙吗？任何的想法？多谢

更新：

```
def follows_action(sender, instance, created, action_object=None, **kwargs):
  action.send(instance.user, verb='follows', target=instance.content_object)
m2m_changed.connect(follows_action, sender=UserProfile.following.through) 
```

这没用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:23:45.047

要将回调连接到多对多关系的更改，请使用[m2m_changed 信号](https://docs.djangoproject.com/en/dev/ref/signals/#m2m-changed)。

# ios - 为 CoreText 创建 CGContext

> ID：10605664
> 
> 赞同：1
> 
> 时间：2012-05-15T17:12:11.457
> 
> 标签：ios, calayer, cgcontext, core-text

我试图在 CALayer 中渲染一些 CoreText，以便我可以显式地调整该层的 alpha。我尝试覆盖 drawRect: 方法，但据我所知，它只在视图的根层上绘制，并且我有两个子层，一个 bg 图像和 CoreText。这是尝试绘制 CoreText 层的方法：（如果我删除 createContext 代码，它在 drawRect 中有效）

```
-(void) drawTextLayer
{
    //get context
UIGraphicsBeginImageContextWithOptions(CGSizeMake(250.0, 137.0), YES, 1.0);
CGContextRef context = UIGraphicsGetCurrentContext();

//draw text
//attribute string
NSMutableAttributedString *attrStr = [[NSMutableAttributedString alloc] initWithString:displayTxt];

//get font    
NSString *fontPath = [[NSBundle mainBundle] pathForResource:@"idolwild"
                                                     ofType:@"ttf"];

CFURLRef url = CFURLCreateWithFileSystemPath(kCFAllocatorDefault, (CFStringRef)fontPath, kCFURLPOSIXPathStyle, false);
CGDataProviderRef dataProvider = CGDataProviderCreateWithURL(url);
CGFontRef theCGFont = CGFontCreateWithDataProvider(dataProvider);
CTFontRef idolwild = CTFontCreateWithGraphicsFont(theCGFont, 16.0, &CGAffineTransformIdentity, nil);

CFRelease(theCGFont);
CFRelease(dataProvider);
CFRelease(url);

[attrStr addAttribute:(id)kCTFontAttributeName
                value:(id)idolwild
                range:NSMakeRange(0, [attrStr length])];

//create paragraph style and assign text alignment to it
CTTextAlignment alignment = kCTCenterTextAlignment;
CTParagraphStyleSetting _settings[] = {    {kCTParagraphStyleSpecifierAlignment, sizeof(alignment), &alignment} };
CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(_settings, sizeof(_settings) / sizeof(_settings[0]));

//set paragraph style attribute
[attrStr addAttribute:(id)kCTParagraphStyleAttributeName
                value:(id)paragraphStyle
                range:NSMakeRange(0, [attrStr length])];

[attrStr addAttribute:(id)kCTForegroundColorAttributeName
                value:(id)[UIColor clearColor].CGColor
                range:NSMakeRange(0, [attrStr length])];

[attrStr addAttribute:(id)kCTForegroundColorAttributeName
                value:(id)[UIColor blackColor].CGColor
                range:NSMakeRange(0, [[wordRanges objectAtIndex:currentTextindex] intValue])];

//layout master
CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)attrStr);

//bounding eclipse
CGMutablePathRef boundingEclipse = CGPathCreateMutable();
CGPathAddEllipseInRect(boundingEclipse, NULL, boundingEclipseRect);

//ctframe
CTFrameRef bubbleFrame = CTFramesetterCreateFrame(framesetter, 
                                                  CFRangeMake(0, 0),
                                                  boundingEclipse, NULL);

// flip the coordinate system
CGContextSetTextMatrix(context, CGAffineTransformIdentity);
CGContextTranslateCTM(context, 0, self.bounds.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

    //fill bg to visual
    CGContextAddPath(context, boundingEclipse);
    [[UIColor greenColor] setFill];
    CGContextFillPath(context);

//draw
CTFrameDraw(bubbleFrame, context);

//add to layer
UIImage *tempImage = UIGraphicsGetImageFromCurrentImageContext();
textLayer.contents = tempImage;

//cleanup
CGPathRelease(boundingEclipse);
CFRelease(framesetter);
CFRelease(bubbleFrame);
CFRelease(idolwild);
CGContextRelease(context);

[attrStr release];
} 
```

-- 任何关于 CALayers 和 CGContexts 的理论都非常受欢迎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:17:19.753

我可以建议三种不同的方法：

1.  子类化`CALayer`并实现它的`drawInContext:`.

2.  设置一个不是 a 的对象`UIView`作为子层的`delegate`，然后实现`drawLayer:inContext:`。

3.  创建一个`CGImage`并将其设置为图层的内容：

    ```
    UIGraphicsBeginImageContext(size);
    CGContextRef context = UIGraphicsGetCurrentContext();

    /// draw

    UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    sublayer.contents = (id)image.CGImage; 
    ```

# c++ - 视觉c ++ 2010 mysql连接

> ID：10605672
> 
> 赞同：1
> 
> 时间：2012-05-15T17:13:01.547
> 
> 标签：c++, mysql, visual-studio-2010, connection

我想使用 Visual c++ 和 Visual Studio 2010 建立一个 mysql 连接。

我已经看到这个问题被问了几次，但我似乎无法弄清楚。

为什么没有任何真正有用且简单的分步教程呢？然后我的意思是：正确的下载链接，保存文件的位置。要添加到项目中的文件和要编写的正确代码。

我尝试使用许多不同的 c++ 连接器，甚至是完整的包。但没有成功。我在属性中将“include”文件夹添加到“C++ Additional Include Directories”中，将包含“libmysql.lib”的“lib”文件夹添加到“Linker Additional Library Directories”中，并将“libmysql.lib”添加到“链接器输入附加依赖项”。

我尝试使用如下代码：

```
#include <iostream>
#include <fstream>
#include <vector>
#include "rapidxml.hpp"
#include "rapidxml_print.hpp"
#include "my_global.h" // Include this file first to avoid problems
#include "mysql.h" // MySQL Include File
#include "XMLFile.h"
using namespace std;
using namespace rapidxml;

int main () {

    MYSQL *mysql;
    MYSQL_RES *result;
    MYSQL_ROW row;

    string server = "localhost";
    string username = "root";
    string password = "";
    string database = "test";
    int port = 3306;

    mysql = mysql_init(0);
    if ( !mysql_real_connect( mysql, server.c_str(), username.c_str(), password.c_str(), database.c_str(), port, NULL, 0 ) ) {
        fprintf( stderr, "%s\n", mysql_error( mysql ) );
        return 0;
    }

    //further code should follow but i already get errors

    cin.get();
    return(0);
} 
```

但我已经收到如下错误：

> 错误 4 错误 LNK2019: 函数 _main 中引用的未解析的外部符号 _mysql_error@4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T19:21:14.820

我不得不在 VS 2008 和 VS 2010 之间进行更改。
很多名称更改。以下是一些变化：

```
 #if (_MSC_VER == 1600)
    #include "driver/mysql_public_iface.h"
    #else
    #include "mysql_driver.h"
    #endif

namespace sql
{
    class Connection;
#if (_MSC_VER == 1600)
    class Driver;
#endif
    namespace mysql
    {
#if (_MSC_VER != 1600)
        class MySQL_Driver;
#endif      
    }
}

#if (_MSC_VER == 1600)
    mutable sql::Driver *                       m_p_sql_driver;
#else   
    mutable sql::mysql::MySQL_Driver *            m_p_sql_driver;
#endif

    void
    initialize_db_driver() const
    {
        static bool     driver_initialized = false;
        if (!driver_initialized)
        {
            wxMutexLocker   lock(sql_driver_mutex);
            if (!driver_initialized)
            {
                // There is something weird on the Windows 7 -64 bit platform
                //  with Visual Studio 2010 that causes the error message:
                //  "The application was unable to start correctly (0xc000007b)
                //  This is an experiment to see if the MySQL connector is the culprit.
    //          m_p_sql_driver = 0;

                //  When the MySQL Connector C++ is not used, the application starts up
                //      without the error.
    #if (_MSC_VER == 1600)
                m_p_sql_driver = 0;
                sql::Driver * p_driver = sql::mysql::get_driver_instance();
                m_p_sql_driver = p_driver;
    //          m_p_sql_driver = sql::mysql::get_driver_instance();
    #else
                m_p_sql_driver = sql::mysql::get_mysql_driver_instance();
    #endif
                if (m_p_sql_driver)
                {
                    driver_initialized = true;
                }
            }
        }
        return;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:06:20.457

您的 VC++ 似乎没有包含`libmysql.lib`在链接过程中，请确保其中`Linker -> Command Line`有类似`/LIBPATH:"C:\mysql\path\to\mysql\lib" "libmysql.lib"`. 此外，您可以进行一些解决方法，例如
1\. in `Linker Input Additional Dependancies`: 重命名`libmysql.lib`为其他不存在的名称，重建，验证是否存在链接错误`LINK : fatal error LNK1104: cannot open file 'libmysql.lib'`。这确保`link`确实找到了一个库`libmysql.lib`
2\. 撤消步骤 1 中的更改，尝试在 .libmysql.lib 中添加路径`VC++ Directories -> Library Directories`。

希望有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:11:15.043

这是正确的

您必须将'libmysql.lib'添加到链接器输入附加依赖项中：项目属性>链接器>输入>附加依赖项。然后将 libmysql.dll 复制到 exe 文件夹（PATH 中定义的文件夹）中，例如 'c:\windows'

你的问题将得到解决。

您可以在安装 mysql 的文件夹中找到 libmysql.dll 。

上面提到的使用“mysql.h”标头的问题。如果您想使用连接器++ 标头，那将有所不同。

# javascript - jQuery在一个元素中加载多个html文件

> ID：10605673
> 
> 赞同：7
> 
> 时间：2012-05-15T17:13:05.137
> 
> 标签：javascript, jquery, html, load

如何加载多个 html 文件并将它们放入指定的 html 元素中？

我试过没有改变：

```
$('#asd').load('file.html,pippo.html'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T17:16:49.770

您可以获得多个项目并将它们添加到元素中。

```
jQuery.ajaxSetup({ async: false }); //if order matters
$.get("file.htm", '', function (data) { $("#result").append(data); });
$.get("pippo.htm", '', function (data) { $("#result").append(data); });
jQuery.ajaxSetup({ async: true });  //if order matters 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T17:47:37.197

试试这个，使用延迟对象。

```
var defArr = [];
defArr.push($.get('file.html'));
defArr.push($.get('pippo.html'));
$.when.apply($,defArr).done(function(response1,response2){
    $('.result').html(response1[2].responseText + response2[2].responseText);
}); 
```

# curl - 使用带有 Curl 的 Awk 或 Sed 进行优化

> ID：10605675
> 
> 赞同：2
> 
> 时间：2012-05-15T17:13:07.740
> 
> 标签：curl, sed, awk

我有一个文件网址，输出如下：

```
//
data = {
    'ip': '',
    'server_ip': '',
    'router_name': 'Banana Hammock',
    'wan_domain': '',
    'wan_gateway': '74.125.224.32',
    'wan_gateway_get': '74.125.224.32',
    'wan_get_domain': 'isp.example.com',
    'wan_hostname': 'MumbaVille',
    'wan_hwaddr': '00:00:00:00:00:00', 
```

我正在使用这个命令来获取 wan_gateway_get：

```
curl -k http://mumbarouter.com/get.asp?statits | awk '/wan_gateway_get/ {print $2}' 
```

输出：

```
'74.125.224.32',
= 
```

我怎样才能让它输出：

```
74.125.224.32 
```

谢谢你，祝妈妈快乐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:25:33.530

[让自己轻松一点](http://www.youtube.com/watch?feature=player_detailpage&v=FLlBzu2LRPA#t=51s)……因为分手很*容易*做到：

```
curl -k http://mumbarouter.com/get.asp\?statits |
  awk -F\' '/wan_gateway_get/ {print $4}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:25:55.940

以下

```
awk '/wan_gateway_get/ {match($2, "[0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+"); print substr($2,RSTART,RLENGTH)}' 
```

是可能的方式之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T20:57:44.963

[TXR](http://www.nongnu.org/txr/)解决方案：对实际语法进行自由格式解析。（强制右括号添加到示例数据。）

```
@(define comment)//@nil@\n@(end)
@(define ws)@(cases)@(comment)@(or)@/\s*/@(end)@(end)
@(define id (id))@(ws)@{id /\w[\w\d_]+/}@(ws)@(end)
@(define item (it))@(ws)'@{it /[^']+/}'@(ws)@(end)
@(define braced_key_values (ithash))@\
  {@(coll)@(item key):@(item value)@(until)}@(end)}@\
  @(bind ithash @(progn '#H((:equal-based) ,*[mapcar list key value])))@\
@(end)
@(freeform)
@(id config)@(ws)=@(ws)@(braced_key_values config-hash)
@(output)
wan_gateway in configuration "@config" is @[config-hash "wan_gateway"]
@(end) 
```

跑：

```
$ txr data.txr data.txt
wan_gateway in configuration "data" is 74.125.224.32 
```

# ios - 以编程方式创建的视图崩溃

> ID：10605676
> 
> 赞同：0
> 
> 时间：2012-05-15T17:13:18.243
> 
> 标签：ios, ios5

患者：两个控制器——ViewController 和（模态呈现的）RecorderViewController 症状：RecorderViewController 模态呈现后，它做了一些工作。被解雇后，程序因 EXC_BAD_ACCESS 而崩溃

在 AppDelegate.m 中：

```
@synthesize window = _window;
@synthesize controller = _controller;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    self.controller = [ViewController alloc];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = self.controller;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

在 ViewController.m 中

```
#import "ViewController.h"
#import "RecorderViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize presentModalButton;

- (void)loadView 
{
    self.view = [[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];

    self.presentModalButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    self.presentModalButton.frame = CGRectMake(0, self.view.frame.size.height/2, 100, 50);
    [self.presentModalButton addTarget:self action:@selector(goToRecorderButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:self.presentModalButton];

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (IBAction)goToRecorderButtonPressed:(id)sender {
    RecorderViewController *recorderVC = [RecorderViewController alloc];
    [self presentModalViewController:recorderVC animated:YES];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    self.presentModalButton = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

返回 UIApplicationMain 时 main.m 中的崩溃：#import

```
#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:21:46.800

我相信方法有问题`goToRecorderButtonPressed`。

看，您正在为 a 分配内存，`recorderVC`但没有初始化它。您应该使用可用的方法初始化您的对象，例如`init`：

```
- (IBAction)goToRecorderButtonPressed:(id)sender {
    RecorderViewController *recorderVC = [[RecorderViewController alloc] init];
    [self presentModalViewController:recorderVC animated:YES];
} 
```

# xcode - xcode tabbar 应用程序 - 设备旋转问题

> ID：10605679
> 
> 赞同：1
> 
> 时间：2012-05-15T17:13:22.173
> 
> 标签：xcode, orientation, device, tabbar

我正在编写一个设置为自动旋转的简单标签栏应用程序。我需要根据设备方向在屏幕上重新绘制一些对象。为此已打开通知并尝试获取屏幕的当前宽度。一切正常，但在横向模式下我得到纵向宽度，反之亦然！@？

`AppDelegate` `didFinishLaunchingWithOptions:`

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

界面`viewWillAppear:`

```
NSNotificationCenter* nc = [NSNotificationCenter defaultCenter];
[nc addObserver:self
       selector:@selector(orientationChanged:)
           name:UIDeviceOrientationDidChangeNotification
         object:nil]; 
```

界面`orientationChanged:`

```
UIInterfaceOrientation orientation = [UIDevice currentDevice].orientation;

if (orientation == UIDeviceOrientationPortrait || orientation == UIDeviceOrientationPortraitUpsideDown)
{
    NSLog(@"Portrait Width: %f", self.view.frame.size.width);
}
else if (orientation == UIDeviceOrientationLandscapeLeft || orientation == UIDeviceOrientationLandscapeRight)
{
    NSLog(@"Landscape Width: %f", self.view.frame.size.width);
} 
```

在 iPad 上我得到：纵向宽度：1024 横向宽度：768

为什么我没有得到横向宽度：1024 和纵向宽度：768

这仅在应用程序启动时发生。一旦我点击另一个 tabitem，报告是正确的。

我应该在没有问题之前添加我用 stroyboard 编写的这个应用程序，但是由于 IOS 限制（部署目标），我将它重写为包含 4.0。这就是这个问题开始的地方。

上下搜索解决方案，但无法弄清楚。有什么想法吗？

# c# - Visual studio2010 CrystalReports 认证？

> ID：10605684
> 
> 赞同：0
> 
> 时间：2012-05-15T17:13:29.190
> 
> 标签：c#, winforms, crystal-reports

我有两张表客户和合同表

```
CustomerTable
    CustID(pk)
    CustName
    CompanyName
ContractTable
    ContractID(pk)
    CustID(fk)
    ContractDate
    ContractDuration
    TotalPayment
    TotalInstallment
    TotalCommission 
```

我正在尝试创建一个水晶报告来显示本月的客户

```
 |CustID||CustName||ContractDuration||TotalPayment||TotalCommission|
    |      ||        ||                ||            ||               |
Total |200 ||                          ||  $20,000   ||  $200         | 
```

从 SAP 为 Visual Studio2010 安装水晶报告后，我使用图形界面制作水晶报告并将此代码放入 form_load 事件

```
ReportDocument cryRpt = new ReportDocument();
        cryRpt.Load("C:\\Documents and Settings\\Administrator\\my documents\\visual studio 2010\\Projects\\democrystal1\\democrystal1\\CrystalReport1.rpt");
        crystalReportViewer1.ReportSource = cryRpt;
        crystalReportViewer1.Refresh(); 
```

当我运行项目时，它提示我输入用户名和密码，但我使用的是来自 SSMS 的 Windows 身份验证，现在我输入了什么用户名和密码？如果我使用视图从中生成水晶报告，该视图的外观如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T22:53:37.857

您可能需要在加载报告时具体告知报告以使用所需的集成安全性。这是我不久前发表的一篇博文，向下滚动到“ApplyNewServer”方法所在的位置，这应该可以帮助您入门。

[http://www.blakepell.com/Blog/?p=15](http://www.blakepell.com/Blog/?p=15)

该方法是从一个更大的类中取出的。您会看到我正在引用用户名/密码等属性。使用这样的方法将遍历您的报告和所有子报告并应用您指定的连接信息。我真的应该在某个时候把它变成一个扩展。

希望这能让您朝着正确的方向前进，如果没有，请告诉我您还有什么其他问题。

# flash - Flash CS4 ActionScript 2.0 - 使用 as2 更改影片剪辑颜色

> ID：10605687
> 
> 赞同：0
> 
> 时间：2012-05-15T17:13:48.487
> 
> 标签：flash, actionscript-2, movieclip

我是Flash的新手-有点。我不久前开始使用 Flash，但两年内没有接触过它。也就是说，我习惯使用 AS2.0 并开始在 2.0 中制作游戏。我正在尝试实现一个屏幕，用户可以在其中从典型的颜色渐变中选择角色的皮肤和头发颜色。我已经设置好了，皮肤颜色实际上会根据他们点击的内容改变颜色。

但是，它不会保持这种状态。要进入这个屏幕，有一个带有角色实例的主菜单。在角色内，每个肢体都被分成自己的影片剪辑。每个肢体都由一些阴影、轮廓和仅皮肤的电影剪辑组成。在颜色更改屏幕上，我将每个肢体分开并指定了一个实例名称。然后，在每个肢体中，我为皮肤部分指定了一个实例名称。然后我更改了皮肤的颜色，但在返回主菜单后，皮肤又恢复了原来的颜色。如果我使用按钮返回角色外观屏幕，皮肤将恢复其原始颜色，而不是用户选择的颜色。我想我怎样才能实现这一点，以便颜色选择保持不变？

这是我当前的代码：

```
import flash.display.BitmapData;
        function changeColor(clip, theColor) {
            var myColor = new Color(clip);
            myColor.setRGB(theColor);
        }
        mc_colorPicker._visible = true;
        mc_colorPicker.colors.onPress = function() {
    srcMC = mc_colorPicker.colors;
    var colorBitmap:BitmapData = new BitmapData(srcMC._width, srcMC._height, true, 
        0x00000000);
    colorBitmap.draw(srcMC);
    colorValue = "0x"+colorBitmap.getPixel(srcMC._xmouse, srcMC._ymouse).toString(16);
    changeColor(RULeg.skin, colorValue);
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:45:40.220

我想通过阅读您所写的内容，您在主菜单和角色外观屏幕中使用了不同的 MovieClips 实例。

如果是这种情况，每次您在两个屏幕之间切换时，您对角色所做的所有更改都会恢复：在 Flash 中，每次实例化或从新关键帧读取 MovieClip 时，就像使用新的 MovieClip . 因此，在其中所做的所有更改（颜色、内部动画剪辑的位置等）都会恢复到其原始状态（它在 Flash pro 库项目的第一帧中的状态）。

因此，为了使更改持久化，您应该将 colorValue 变量（每次更改时）保存在您 swf 中任何地方都可以访问的某个位置（类似于类中的静态变量？甚至是全局 / _root 变量，即使它真的很难看^^)，并在每次切换不同屏幕时将该颜色重新应用到您的角色。

# c++ - 使用“空格”从用户获取输入的字符串类型

> ID：10605691
> 
> 赞同：1
> 
> 时间：2012-05-15T17:13:56.927
> 
> 标签：c++, string, whitespace

我正在尝试获取一个字符串处理程序，该处理程序在字符串类型变量中从用户那里获取输入......但它正在崩溃，我想知道为什么？或者我做错了什么......

```
 string UIconsole::getString(){
    string input;
    getline(cin,input);
    if(input.empty() == false){
        return input;
    }
    else{getString();}
    return 0;
} 
```

编辑：错误：

```
This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information.
terminate called after throwing an instance of 'std::logic_error'
  what():  basic_string::_S_construct null not valid 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T17:22:33.847

您有几个错误，但消息所指的具体错误是：

```
return 0; 
```

您不能`std::string`从空指针构造 a 。如果您想要一个空字符串，请尝试以下构造之一：

```
return "";
return std::string(); 
```

* * *

您的另一个错误是对`getString()`. 目前还不清楚您要在那里做什么。也许这可以满足您的要求：

```
// untested
std::string UIconsole::getString(){
    std::string input;
    while(std::getline(std::cin, input) && input.empty()) {
        // nothing
    }
    return input;
} 
```

# javascript - 在函数之间传递变量

> ID：10605693
> 
> 赞同：0
> 
> 时间：2012-05-15T17:14:08.940
> 
> 标签：javascript, jquery

我有以下在内部执行的代码行`$(document).ready`：

```
$('#sliding_menu_area').toggle(effect, reAlign); 
```

`reAlign`是在我的文件的`$(document).ready`主函数之外声明的函数。`.js`

我有一个名为的变量`tag`，它也在内部声明`$(document).ready`，我需要将变量传递给`reAlign`函数。我试过了

```
$('#sliding_menu_area').toggle(effect, reAlign(tag)); 
```

但它没有用。我可以将`tag`变量声明为全局变量，以便在外部声明的函数`$(document).ready`能够访问它吗？到目前为止，在内部声明的函数`$(document).ready`可以正常访问它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:16:39.740

```
$('#sliding_menu_area').toggle(effect, reAlign(tag)); 
```

您的代码`reAlign`使用`tag`参数执行，然后将返回值传递给`toggle`（作为第二个参数）。

```
$('#sliding_menu_area').toggle(effect, function() { reAlign(tag); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T17:19:05.880

我通常会避免使任何东西成为全球性的......或者至少尽可能地保留你的全球命名空间。例如，我有一个 Page 类，用于各种功能，例如 Page.notify("some message")。当我需要让整个页面都可以访问某些内容时，我会创建一个变量，例如 Page.Tag。如果您只需要 reAlign 方法的标签，那么请遵循 Karoly 的建议，并避免制作一些并不真正需要全局的全局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T17:20:24.667

Karoly 的回答有效，另一种选择是执行以下操作：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

```
$('#sliding_menu_area').toggle(effect, reAlign.bind(window, tag)); 
```

这将绑定您的函数，以便在调用它时将其`window`作为`this`变量调用，并将标记作为函数的第一个参数调用。基本上与 Karoly 建议的相同，但用语不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T17:20:23.240

如果`reAlign`函数需要知道 DOM 元素（作为 传递`this`），最好使用：

```
$('#sliding_menu_area').toggle(effect, function () {
  reAlign.call(this, tag);
}); 
```

# c# - .Net Web 服务客户端 SoapExtension 搞砸了来自 Java Web 服务的响应消息

> ID：10605696
> 
> 赞同：1
> 
> 时间：2012-05-15T17:14:30.223
> 
> 标签：c#, webservice-client, soap-extension

我尝试将 SoapExtension 添加到我的项目中，该项目使用 Web 引用来调用 Java Web 服务。我所有的代码都在 .Net 4.0 中

我刚刚添加了一个空的 SoapExtension

```
public class MyServiceSoapExtension : SoapExtension
{
    private Stream inwardStream;
    private Stream outwardStream;

    public override object GetInitializer(Type serviceType)
    {
        return serviceType;
    }

    public override object GetInitializer(LogicalMethodInfo methodInfo, SoapExtensionAttribute attribute)
    {
        return null;
    }

    public override void Initialize(object initializer)
    {
    }

    public override Stream ChainStream(Stream stream)
    {
        outwardStream = stream;
        inwardStream = new MemoryStream();
        return inwardStream;
    }

    public override void ProcessMessage(SoapMessage message)
    {
    }
} 
```

我在客户的 app.config 中添加了：

```
<system.web>
    <webServices>
        <soapExtensionTypes>
            <add type="MyServiceClient.MyServiceSoapExtension, MyServiceClient" priority="1" />
        </soapExtensionTypes>
    </webServices>
</system.web> 
```

我相信上面的代码没有任何改变，当我运行它时，我在方法中抛出了`Response is not well-formed XML.`一个`Root element is missing.`异常`System.Web.Services.Protocols.SoapClientType.Invoke`（我已经打开了 CLR 调试）。如果我删除 app.config 中的配置以绕过 SoapExtension，我可以接收来自服务器的任何返回。

我使用 Fiddler 来跟踪传出和响应消息，我从服务器返回的 SOAP 是

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <soap:Fault>
            <faultcode>soap:Client</faultcode>
            <faultstring>Unmarshalling Error: javax.xml.transform.stax.StAXResult </faultstring>
        </soap:Fault>
    </soap:Body>
</soap:Envelope> 
```

我相信这是一个有效的 SOAP 响应。

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T03:59:21.637

我认为它是因为处理消息方法是空的。我遇到了完全相同的问题，我的进程消息方法只处理序列化后的情况，一旦我在反序列化之前处理了进程，一切正常：

```
case SoapMessageStage.BeforeDeserialize:
{
    Copy(wireStream, appStream);
    appStream.Position = 0;
    break;
} 
```

# iphone - UIWebView 显示本地图像和 facebook 评论

> ID：10605698
> 
> 赞同：4
> 
> 时间：2012-05-15T17:14:35.557
> 
> 标签：iphone, ios, facebook, uiwebview

我在 UIWebView 上遇到问题。我有一个显示 html 字符串的 WebView。此 html 字符串包含：

*   html文本
*   本地图像
*   FB：评论

起初我只有 Html + 本地图像，所以我使用的是众所周知的方法：

```
NSString *path = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:path];
[webview loadHTMLString:htmlString baseURL:baseURL]; 
```

一切都很完美。但后来我不得不实施 facebook 评论[http://developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

由于我的旧 BaseURL 不再适用于 facebook 我尝试加载

```
NSURL *baseURL = [NSURL URLWithString:@"http://www.facebook.com/"]; 
```

这使我的 facebook 工作，但本地图像不会显示在 web 视图中，即使使用绝对路径。

任何帮助将不胜感激。谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T04:03:31.193

有一种解决方案可以将`img`标签与 base64 编码的图像数据一起使用，而不是使用 url。这应该不是问题，因为您在本地拥有图像，请参阅 html[示例](http://www.sourcepod.com/ezqkig43-7534)。

要快速测试它，您可以使用在线编码[服务](http://www.abluestar.com/utilities/encode_base64/index.php)（50kb 限制）

原来的答案在[这里](https://stackoverflow.com/questions/4568431/without-using-baseurl-can-we-add-local-images-in-the-uiwebview)

* * *

以及截断的 base64-sample 以供将来参考：

```
<html>
<body>
<div id="fb-root"></div>
FB1
    <script>
        window.fbAsyncInit = function() {
            FB.init({
                    appId      : null,
                    channelUrl : null,
                    status     : true,
                    cookie     : true,
                    xfbml      : true 
                    });

        };

        (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
         }(document));
        </script>

    FB2
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUh......lAmeQ/IAAAAASUVORK5CYII=" alt="Screen Shot 2012-05-23 at 6.53.28 AM.png" />

    <div class="fb-comments" data-href="http://facebook.com" data-num-posts="2" data-width="470"></div>

</body>
</html> 
```

# iphone - 简单的 UITapGestureRecognizer。IBAction 未触发

> ID：10605711
> 
> 赞同：2
> 
> 时间：2012-05-15T17:15:43.963
> 
> 标签：iphone, objective-c, ios, storyboard, uigesturerecognizer

我有一个`UITapGestureRecognizer`链接到一个`IBAction`. 我只是想确认 IBAction 方法调用。对于`UITapGestureRecognizer`，在情节提要中，我有一个指向我的视图中的手势识别器的参考出口集合，并发送`tapGesture:`了链接到我的视图控制器的动作。

.h 代码：

```
- (IBAction)tapGesture:(UITapGestureRecognizer *)sender; 
```

.m 代码：

```
- (IBAction)tapGesture:(UITapGestureRecognizer *)sender {
     NSLog(@"Tapped");
} 
```

我错过了什么？为什么`tapGesture:`不开火？

![在此处输入图像描述](../Images/ac8238515fc28f3df19ab18d4b721e2a.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T18:03:38.707

从您的屏幕截图看来，手势识别器已添加到视图控制器，而不是视图。您只需要将手势识别器拖到视图上，它就应该正确添加它。

# c++ - Pointer to QMainWindow Changing

> ID：10605714
> 
> 赞同：0
> 
> 时间：2012-05-15T17:15:51.610
> 
> 标签：c++, qt, multiple-inheritance

I am using Qt to create a window and I have the following code (this is somewhat in pseudo-code):

```
class MyInterface {
    virtual void doupdate() = 0;
}

class InterfaceHandler {
    InterfaceHandler(MyInterface *i) {
      the_int = i;

      start_thread(&mainloop);
    }

    void mainloop() {
        while(1) the_int->doupdate();
    }

    MyInterface *the_int;
}

class console : public QMainWindow, public MyInterface {
    console() {
            InterfaceHandler x(this);
    }

    void doupdate() {
        //code to modify the gui
    }
} 

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    console w(argc, argv);
    w.show();
    return a.exec();
} 
```

My issue is that when `the_int->doupdate()` is called in `mainloop()`, the reference to `the_int` is wrong. I think this has to do with the fact that `console` inherits `QMainWindow`, but I am not sure what the solution is.

`MyInterface` doesn't always get inherited by a `QObject`. I've tried to split the `doupdate()` from `console` into another class which gets passed the reference to `console` in the constructor, but get the same result.

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:56:41.310

Assuming your "pseudo-code" is close enough to your real code, the following is the problem:

```
console() {
  InterfaceHandler x(this);
} 
```

Once the constructor is done, `x`, being a local (automatic) variable, gets destroyed. The `InterfaceHandler` instance you created no longer exists once the constructor returns.

You need to keep `x` as a member variable of that class, or create and store it from somewhere else. (But keeping it as a member makes sense since the lifetimes of the objects are tied.) You also need to be very careful with that thread, it needs to be stopped before `console` is destroyed.

# oauth - 带有 access_token 的 SSO GMail 或 GDocs

> ID：10605715
> 
> 赞同：0
> 
> 时间：2012-05-15T17:16:07.833
> 
> 标签：oauth, gmail, saml

当用户已经通过谷歌应用程序授权并且我们拥有 access_token 时，是否可以通过浏览器对用户 gmail 收件箱或 gdocs 执行 SSO？

这个想法是用户第一次访问我们的网站，我们在用户授权我们访问它的数据后从 googleapps 获取用户配置文件，在我们已经定义了对 gmail 和 gdocs 的访问权限的范围内。第一步已经解决，我们的数据库中已经有了 access_token 和 refresh_token（我们根本不存储任何密码），因此我们可以使用这些令牌离线连接到用户帐户。

我们的想法是也提供一个 sso 机制，因此当用户在我们的系统中时，我们希望将他/她重定向到他/她的 gmail 收件箱，而无需再次输入他的密码，而是以任何方式使用我们最初获得的 access_token。

那可能吗？我读了一些关于 saml 或混合 openid/oauth 解决方案的内容，但没有从中得到任何明确的信息。所以有人可以帮助我吗？最好是使用 access_token 作为参数向某个谷歌登录服务 url 发出发布请求，然后用户被自动重定向到它的 gmail 收件箱......

有可能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:49:00.380

1.  大多数用户已经登录了他们的 Google 帐户，因为他们每天都在使用这些帐户来收发电子邮件、日历、文档和 mnore。您应该能够将用户重定向到[https://mail.google.com/](https://mail.google.com/)。这适用于消费者 gmail 帐户的任何用户，也适用于使用[“新型”Google Apps 帐户](http://googleenterprise.blogspot.com/2010/11/ten-times-more-applications-for-google.html)的用户。

2.  如果您的目标是为尚未登录其 Google 帐户的用户启用此功能，那么他们使用的 Google Apps 域需要将您的服务设置为他们的 SAML 提供程序，以便您对其域中的用户进行身份验证。这是通过 Google Apps 控制面板或使用[Admin Settings API](https://developers.google.com/google-apps/admin-settings/#managing_single_sign-on_settings)完成的。然后，您的应用程序将用户的身份“断言”给 Google，然后 Google 将用户登录。这确实使用了您提到的[SAML 服务。](https://developers.google.com/google-apps/sso/saml_reference_implementation)

# python - 异步方法内部的外部异步方法

> ID：10605718
> 
> 赞同：0
> 
> 时间：2012-05-15T17:16:26.787
> 
> 标签：python, asynchronous, tornado

我的处理程序中有一些异步代码，我需要将此部分作为外部方法并从不同的处理程序运行，但每个方法都有异步代码。你能帮助我吗？

简单的例子：

```
#!/usr/bin/python

import asyncmongo
import tornado.web    

class Handler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self):
        self.db = asyncmongo.Client(pool_id='mypool', host='localhost', 
                                          port=27107, dbname='mydb')

        self.db.first_names.find_one({'user_id': 1 }, 
                                     callback=self._on_response)

    def _on_response(self, response, error):
        first_name = response['first_name']
        data = {
              'first_name': first_name
        }

        # use processor
        first_name_html = self.generate_html("firstname.html").generate(**data)
        last_name_html = foo()
        self.write(first_name_html + last_name_html)
        self.finish()

    # this part of code is wrong!
    # I have question about it
    @tornado.web.asynchronous
    def foo(self):
        self.db.last_names.find_one({'user_id': 1 }, 
                                 callback=self._on_response_two)

    def _on_response_two(self, response, error):
        last_name = response['last_name']
        data = {
              'last_name': last_name
        }

        # use processor
        last_name_html = self.generate_html("lastname.html").generate(**data)
        return last_name_html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:51:32.977

我会建议

```
#!/usr/bin/python

import asyncmongo
import tornado.web    

class Handler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self):
        self.db = asyncmongo.Client(pool_id='mypool', host='localhost', 
                                          port=27107, dbname='mydb')

        self.db.first_names.find_one({'user_id': 1 }, 
                                     callback=self._on_response)

    def _on_response(self, response, error):
        first_name = response['first_name']
        data = {
              'first_name': first_name
        }

        # use processor
        self.first_name_html = self.generate_html("firstname.html").generate(**data)
        foo()

    def foo(self):
        self.db.last_names.find_one({'user_id': 1 }, 
                                 callback=self._on_response_two)

    def _on_response_two(self, response, error):
        last_name = response['last_name']
        data = {
              'last_name': last_name
        }

        # use processor
        last_name_html = self.generate_html("lastname.html").generate(**data)
        self.write(self.first_name_html + last_name_html)
        self.finish() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T19:43:51.117

为了清楚起见，我会选择 gen.engine 版本。

```
#!/usr/bin/python

import asyncmongo
import tornado.web
from tornado import gen

class Handler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    @gen.engine
    def get(self):
        self.db = asyncmongo.Client(pool_id='mypool', host='localhost',
                                          port=27107, dbname='mydb')

        response, error = yield gen.Task(self.db.first_names.find_one, {'user_id': 1 })

        first_name = response['first_name']
        data = {
              'first_name': first_name
        }

        # use processor
        self.first_name_html = self.generate_html("firstname.html").generate(**data)

        self.foo()

    @gen.engine
    def foo(self):
        response, error = yield gen.Task(self.db.last_names.find_one, {'user_id': 1 })

        last_name = response['last_name']
        data = {
              'last_name': last_name
        }

        # use processor
        last_name_html = self.generate_html("lastname.html").generate(**data)
        self.write(self.first_name_html + last_name_html)
        self.finish() 
```

# ruby-on-rails - 在一行上使用 link_to 阻止

> ID：10605719
> 
> 赞同：1
> 
> 时间：2012-05-15T17:16:33.700
> 
> 标签：ruby-on-rails, ruby, erb

如何在一行中执行以下操作？

```
<% song.albums.each do |album| %>
  <%= link_to album.title, album %><br />
<% end %> 
```

我尝试了两种无效的方法。

这给了我整个数组：

```
<%= song.albums.each {|album| link_to album.title, album } %> 
```

这个输出是空白的：

```
<% song.albums.each {|album| link_to album.title, album } %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:17:35.880

```
<%= song.albums.map{ |a| link_to(a.title,a) }.join("<br/>").html_safe %> 
```

如果你真的需要/想要`<br/>`最后一项之后的额外内容，那么要么把它放在这个块之后，要么使用：

```
<%= song.albums.map{ |a| "#{link_to(a.title,a)}<br/>" }.join.html_safe %> 
```

*请注意，在 HTML 中使用显式`<br/>`通常是“代码异味”；您可能应该`display:block`在锚点或包装元素上使用 CSS`<li>`代替。*

# javascript - 将图像动态添加到 photoswipe

> ID：10605720
> 
> 赞同：6
> 
> 时间：2012-05-15T17:16:34.680
> 
> 标签：javascript, photoswipe

有没有办法在创建后将图像动态添加到 photoswipe 画廊。

情况是这样的。

我正在从服务器获取图像 url 并将它们显示在画廊中。随着项目的下载，锚点和 img 元素被添加到页面中。我希望能够同时将每个附加到照片滑动库。

当前在元素回调中（在加载图像并附加元素之后）我有

```
 $elements.photoSwipe({ enableMouseWheel: false , enableKeyboard: false }); 
```

除了它在自己的画廊中创建每个元素之外，这很有效。有没有办法获取现有画廊的句柄并附加到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:35:03.837

```
if(this.photoSwipe == undefined){
   this.photoSwipe = $elements.photoSwipe(photoSwipeOptions);
}else{
    this.photoSwipe.append($elements);  //use jQuery append
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-08T06:38:09.673

我已经提交了 PhotoSwipe 的拉取请求

[拉取请求](https://github.com/dimsemenov/PhotoSwipe/pull/1460)

如果您确实需要动态添加/追加/删除项目而不更改当前项目的状态，则可以使用此版本。

# sql - Report Viewer 10.0.0.0 问题呈现报告

> ID：10605722
> 
> 赞同：2
> 
> 时间：2012-05-15T17:16:42.047
> 
> 标签：sql, reporting-services, report, viewer

执行此行时出现异常：

`reportViewerControl.ServerReport.ReportServerCredentials = new ReportServerCredentials();`

例外是

`Entry point was not found.; Function = Void Process(); Exception = Exception Messages: Entry point was not found. | Stack: at Microsoft.Reporting.WebForms.IReportServerCredentials.get_ImpersonationUser() at Microsoft.Reporting.WebForms.ServerReport.OnCredentialsChanged(IReportServerCredentials credentials) at Microsoft.Reporting.WebForms.ServerReport.set_ReportServerCredentials(IReportServerCredentials value)`

SSRS 与 IIS 位于不同的服务器上。

我在 SSRS 服务器上有一个帐户，该帐户是 SQL Reporting Services 用户组的成员。

我能够直接浏览到我的报表服务器 Web 服务 URL（从 Web 服务器），提供上述帐户的凭据，并成功运行报表。

我最近从 9.0.0.0 升级到了 10.0.0.0。这不是 9 的问题。

我注意到，当我在托管 SSRS 的服务器上安装 Microsoft Report Viewer 2010 Redistributable Package 时，GAC 不包含 Microsoft.ReportViewer.WebDesign 或 Microsoft.ReportViewer.Design 的条目。

有关如何纠正此异常的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T22:20:52.347

这个决议有点延迟，但希望它仍然可以节省一些时间。

我们的报告查看器（用于呈现报告的工具）从 9.0.0.0 -> 10.0.0.0 升级。调用 Report Viewer 时，将尝试 9.0.0.0 程序集，从而导致异常：

> 异常消息：未找到入口点

这是一个“由于缺少入口方法而导致尝试加载类失败时引发的异常”（http://msdn.microsoft.com/en-us/library/system.entrypointnotfoundexception.aspx）。

我的快速解决方案是在 web.config 中添加一个条目，该条目将 9.0.0.0 的程序集请求绑定和重定向到 10.0.0.0。下面的代码块就是一个例子。它需要在dependentAssembly 部分中：

```
 <dependentAssembly>
        <assemblyIdentity name="Microsoft.ReportViewer.Common" publicKeyToken="B03F5F7F11D50A3A"/>
        <bindingRedirect oldVersion="9.0.0.0" newVersion="10.0.0.0"/>
    </dependentAssembly>
    <dependentAssembly>
        <assemblyIdentity name="Microsoft.ReportViewer.Webforms" publicKeyToken="B03F5F7F11D50A3A"/>
        <bindingRedirect oldVersion="9.0.0.0" newVersion="10.0.0.0"/>
    </dependentAssembly> 
```

# javascript - 从 Backbone.js 模型中删除属性

> ID：10605730
> 
> 赞同：40
> 
> 时间：2012-05-15T17:17:09.500
> 
> 标签：javascript, backbone.js

有没有办法从[Backbone](http://documentcloud.github.com/backbone/)模型中删除属性？

原因是我在保存时传递了额外的数据以执行某些操作，但随后这些数据会自动添加到我的模型中

文档说不要直接编辑 model.attributes，所以我看到的唯一其他方法是使用[set](http://documentcloud.github.com/backbone/#Model-set)方法并将属性设置为 null，但这并不理想

```
var myModel = new Model()
myModel.save({name:'Holla', specialAttr:'Please Remove me'})
myModel.set({tempAttr:null})

if(myModel.attributes['specialAttr'] == null){
    alert("Model does not have a specialAttr")
} 
```

我也尝试过从属性属性中删除它，但它并没有真正删除它。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-05-15T17:26:49.400

你在找`model.unset`吗？

> 通过从内部属性哈希中删除属性来删除它。除非将静音作为选项传递，否则触发“更改”事件。

[您可以在此处](http://backbonejs.org/#Model-unset)找到文档。

# html - 垂直居中 div 元素

> ID：10605737
> 
> 赞同：0
> 
> 时间：2012-05-15T17:18:02.030
> 
> 标签：html, css, vertical-alignment

我正在开发一个非常基本的网站模板，左上角有一个固定的标题，左下角和右下角有一个固定的底线。

中间的内容应该是居中的，我只是无法弄清楚我做错了什么。

`height: 100%`问题 1.) 如果我删除css 属性，为什么垂直居中不起作用？

问题 2.) 当`height: 100%`在 html 标签上声明时，为什么站点大于 100% 并超出浏览器窗口？

问题 3.) 为什么`bottom-left`显示正确，但不正确`bottom-right`？

问题 4.) 如果 with 设置为 100% 并且文本向右对齐，文本不应该从右浏览器框架开始并延伸到左侧吗？为什么要扩展浏览器窗口？

非常感谢您的帮助。代码在下面可见

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">

html {
    height:100%;
}

body {
    height: 100%;
    margin-left: 20px;‚
}

.title {
    position: absolute;
    top: 20px;
    font-family: serif;
    font-size: 20px;
    text-align: left;
}

/* Center Text Section */

.area {
  width: 100%;
  height: 100%;
  position: relative;
}

.middlespace {
  position: absolute;
  left: 50%;
  top: 50%;
  display: table;
}

.middlespace p {
  display: table-cell;
  vertical-align: middle;
  text-align: center;
}

.exhibitionindex {
    text-align: center;
    width: 500px;
    margin-right: auto;
    margin-left: auto;
}

.bottom-left {

    position: absolute;
    bottom: 15px;
    text-align: left;
}

.bottom-right {
    position: absolute;
    bottom: 15px;
    text-align: right;
}

.exhibitiontitle {
    color: #d4d4d4;
    font-style: italic;
    font-family: sans-serif;
    font-size: 10px;
    text-align: center;
}

.bold {
    font-family: serif;
}

.about {
    font-size: 11px;
}

.contact {
    font-size: 11px;
}

.openinghours {
    font-style: italic;
    color: #8e8e8e;
    font-size: 11px;
}

</style>

<title>Website Title</title>

</head>
<body>
    <div class="title">Logo / Title Text</div>

    <div class="area">
        <div class="middlespace">
            <p>27\. April 2012</p>
        </div>
    </div>
    <div class="bottom-left">
        <span class="about"><span class="bold">XYZ</span> is a project by Person One, Person Two, Person Three&nbsp;&nbsp;&#124;&nbsp;</span>
        <span class="contact">Website Information &mdash; <a href="mailto:info@info.com">info@info.com</a></span>
    </div>
    <div class="bottom-right"><span class="openinghours">Opening Hours Information</span></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:47:43.157

> 问题 1.) 如果我删除 height: 100% css 属性，为什么垂直居中不起作用？

默认情况下，`html`and`body`元素会扩展高度以适应其内容。因此，在不设置高度的情况下，您的高度`html`仅与包含样式所需的内容一样高。此外，绝对定位元素不会影响其父元素的大小。如果不将高度设置为 100%，`area`也不会是窗口的完整高度，因此您将在页面顶部的一个小条中垂直居中。

> 问题 2.) 当在 html 标签上声明 height: 100% 时，为什么站点大于 100% 并超出浏览器窗口？

仅此一项不会超出页面边界。但是，如果您为 100% 元素添加边距、边框或类似属性，则这些属性会添加*到*100% 之外，从而使您的元素延伸到窗口边缘之外。

> 问题 3.) 为什么左下角显示正确，但右下角显示不正确？

你绝对定位这些元素。Div 元素通常是父元素宽度的 100%。但是，当您绝对定位它们时，它们的宽度会缩小以适应内容。在您的情况下，您尝试`text-align`在`div`默认情况下左对齐的范围内。因为`div`只有文本那么大，所以左对齐、右对齐和居中对齐看起来都一样。因为您已经在绝对定位`div`s，所以只需使用绝对定位来对齐它们：

```
.bottom-left {
    position: absolute;
    bottom: 15px;
    left: 15px;
}
.bottom-right {
    position: absolute;
    bottom: 15px;
    right: 15px;
} 
```

# ios - 可以拦截触摸事件的自定义 QLPreviewController 或 UIDocumentInteractionController

> ID：10605745
> 
> 赞同：6
> 
> 时间：2012-05-15T17:19:03.730
> 
> 标签：ios, cocoa-touch, uidocumentinteraction, qlpreviewcontroller

好的，所以我要做的是创建一个类似于这张图片的文档查看器： ![在此处输入图像描述](../Images/16aa03448078f7b607a17bed89643af8.png)

基本上应该发生的是，当在任何地方点击屏幕时，都会出现顶部和底部栏。再次点击，它们就会消失。

我已经进行了子类`QLPreviewController`化，并设法利用了已经附带的（顶部）导航栏`QLPreviewController`。这工作正常。现在我需要在显示顶部栏时显示底部栏。我可以`UIToolbar`在页面底部添加一个，但我需要拦截触摸事件，以便隐藏/取消隐藏底部栏。我似乎无法弄清楚如何让它工作。我尝试将 a 添加到子类本身`UITapGestureRecognizer`的视图中，但没有成功。`QLPreviewController`我还尝试创建一个覆盖`UIView`，`UITapGestureRecognizer`但它阻止了用户表单与下面的文档交互。

有人对如何做到这一点有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T01:39:11.060

好的，我弄清楚了`UITapGestureRecognizer`. 您需要将委托设置为自我，然后覆盖

`- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer`

函数并返回是。所以在我的 QLPreviewController 子类中，我实现了 UIGestureRecognizerDelegate，并在 viewWillAppear 中：

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(documentTapped:)];
tapGesture.cancelsTouchesInView = NO;
tapGesture.delegate = self;
[self.view addGestureRecognizer:[tapGesture autorelease]]; 
```

然后简单地说：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return YES;
} 
```

这样，QLPreviewController 仍将接收所有其他非点击触摸事件，以便用户仍然可以与文档交互

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T16:32:55.827

子类化`QLPreviewController`然后覆盖

```
-(void)contentWasTappedInPreviewContentController:(id)item {} 
```

就是这样！

# javascript - 带有类的jquery附加事件多次执行

> ID：10605750
> 
> 赞同：1
> 
> 时间：2012-05-15T17:19:37.907
> 
> 标签：javascript, jquery

我有一些具有相同班级的 div 说：

```
<div id="1" class="same">..</div>
<div id="2" class="same">..</div>
<div id="3" class="same">..</div> 
```

我附加事件处理程序所有 div ：

```
$(".same").live({mouseenter : function{ /*code*/ },mouseout: function{ /*code*/ }}) 
```

现在我的问题是当 mouseenters 到 div 时`(id="1")`，mouseenter 函数的代码将执行 3 次可能是因为有 3 个 div，`class="same"`但我希望它只执行一次并且不附加带有 id 的事件。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:55:04.507

该事件不绑定三次。但是当你移动到下一个 div 时，你可能会得到一个 div 的鼠标进入，你会从这个潜水中得到鼠标，而另一个 div 的鼠标进入。

移动到第一个 div 然后到第二个会触发三个事件

1.  第一个 div 的 mouseenter
2.  第一个 div 鼠标移出
3.  第二个div的鼠标输入

    [JsFiddle 上的演示](http://jsfiddle.net/ccHjQ/3/)

我通过在关键字函数后添加括号进行了一些更改，因为脚本没有为我执行。

前

```
$(".same").live({mouseenter : function{ /*code*/ },mouseout: function{ /*code*/ }}) 
```

后

```
$(".same").live({mouseenter : function(){ /*code*/ },mouseout: function(){ /*code*/ }}) 
```

您可以执行此代码以查看发生了什么

```
 $(".same").live(
    {
     mouseenter : 
     function()
     { 
         alert(" mouseenter >>Current Div ID = "+ this.id);
     },
     mouseout: 
     function()
     { 
         alert("mouseout >>Current Div ID = "+ this.id);
     }
    }
);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:59:21.257

我不确定，但这应该会有所帮助：

```
busy = false;
$(".same").live(
{mouseenter : function ()
    {
        if(busy==false){busy = true; /*code*/}
    },
 mouseout: function ()
    {
        if(busy==true){/*code*/ busy = false;}
    }
}); 
```

# xsd - 0..* 具有“任何”子元素的任何顺序的子元素

> ID：10605752
> 
> 赞同：0
> 
> 时间：2012-05-15T17:19:39.170
> 
> 标签：xsd

我试图以任何顺序拥有这些子元素中的任何一个。但我也想允许任何其他元素。当我添加一个未在选项列表中定义的新元素时，我收到一个验证错误“元素下不允许元素”。

```
<?xml version="1.0" encoding="utf-8" ?>
<xsd:schema targetNamespace="http://www.w3.org/2005/Atom" elementFormDefault="qualified" 
    attributeFormDefault="unqualified"
    xmlns:atom="http://www.w3.org/2005/Atom" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:annotation>
        <xsd:documentation>
                This version of the Atom schema is based on version 1.0 of the format specifications,
                found here http://www.atomenabled.org/developers/syndication/atom-format-spec.php.
            </xsd:documentation>
    </xsd:annotation>
    <xsd:import namespace="http://www.w3.org/XML/1998/namespace" schemaLocation="http://www.w3.org/2001/03/xml.xsd" />
    <xsd:annotation>
        <xsd:documentation>
            An Atom document may have two root elements, feed and entry, as defined in section 2.
        </xsd:documentation>
    </xsd:annotation>
    <xsd:element name="feed" type="atom:feedType"/>
    <xsd:element name="entry" type="atom:entryType"/> 
```

...

```
<xsd:complexType name="feedType">
        <xsd:annotation>
            <xsd:documentation>
                The Atom feed construct is defined in section 4.1.1 of the format spec.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:choice minOccurs="3" maxOccurs="unbounded">
            <xsd:element name="author" type="atom:personType" minOccurs="0" maxOccurs="unbounded" />
            <xsd:element name="category" type="atom:categoryType" minOccurs="0" maxOccurs="unbounded" />
            <xsd:element name="contributor" type="atom:personType" minOccurs="0" maxOccurs="unbounded" />
            <xsd:element name="generator" type="atom:generatorType" minOccurs="0" maxOccurs="1" />
            <xsd:element name="icon" type="atom:iconType" minOccurs="0" maxOccurs="1" />
            <xsd:element name="id" type="atom:idType" minOccurs="1" maxOccurs="1" />
            <xsd:element name="link" type="atom:linkType" minOccurs="0" maxOccurs="unbounded" />
            <xsd:element name="logo" type="atom:logoType" minOccurs="0" maxOccurs="1" />
            <xsd:element name="rights" type="atom:textType" minOccurs="0" maxOccurs="1" />
            <xsd:element name="subtitle" type="atom:textType" minOccurs="0" maxOccurs="1" />
            <xsd:element name="title" type="atom:textType" minOccurs="1" maxOccurs="1" />
            <xsd:element name="updated" type="atom:dateTimeType" minOccurs="1" maxOccurs="1" />
            <xsd:element name="entry" type="atom:entryType" minOccurs="0" maxOccurs="unbounded" />
            <xsd:any namespace="##other" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:choice>
        <xsd:attributeGroup ref="atom:commonAttributes"/>
    </xsd:complexType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:33:20.477

`<xsd:any>`默认情况下，不允许您在文档中添加任何旧的废话。它仍然需要解析器具有该元素的模式，并且必须根据该模式进行验证。

如果要禁用该元素的验证，请使用`processContents="skip"`，即

```
<xsd:any namespace="##other" minOccurs="0" maxOccurs="unbounded" processContents="skip"/> 
```

`processContents`在[MSDN](http://msdn.microsoft.com/en-us/library/ms256043.aspx)上有很好的描述，它比难以理解的 XML Schema 规范清晰得多。

# javascript - 如何通过客户端上的 JSProperties 访问 DevExpress ASPx 控件

> ID：10605754
> 
> 赞同：3
> 
> 时间：2012-05-15T17:19:47.210
> 
> 标签：javascript, asp.net, devexpress

假设我有几个 DevExpress 控件，其中一个是按钮。在该按钮上，我想添加每个其他控件的 ClientInstanceNames，以便我可以在按钮客户端单击事件中访问它们。

C＃：

```
String strID = "MyButton";
ASPxButton btn =  new ASPxButton() { ClientInstanceName = strID , Text = "Click Here", Width = new Unit("100%"), AutoPostBack = false, CssFilePath = strCssFilePath, CssPostfix = strCssPostFix };
btn.ClientSideEvents.Click = "btnClick";
btn.JSProperties.Add("cp_MyTxtBx", strID ); 
```

我想做类似的事情......

js：

```
<script type="text/javascript">
        function btnClick(s, e) {
            var theTxtBx = document.getElementById(s.cp_MyTxtBx);
            theTxtBx.SetText('some text');
        }
</script> 
```

但这不起作用。我知道我可以这样做：

```
<script type="text/javascript">
        function btnClick(s, e) {
            MyTxtBx.SetText('some text');
        }
</script> 
```

但是这些控件是动态创建的，直到运行时我才会知道它们的 ClientInstanceNames。

那么，**如何根据其ClientInstanceName 的String JSProperty 来获取控件呢？**

提前致谢。

相关帖子，但不是我需要的：

[如何从 JavaScript 访问 ASPxTextBox 的值](https://stackoverflow.com/questions/2200808/how-to-access-the-value-of-an-aspxtextbox-from-javascript)

[DevExpress：如何获取控制客户端的实例并访问其客户端成员？](https://stackoverflow.com/questions/7808230/devexpress-how-do-get-an-instance-of-a-control-client-side-and-access-its-clien)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T18:35:09.903

如果我理解正确，这就是您所需要的：

```
var theTxtBx = window[s.cp_MyTxtBx]; 
```

每个设置了 ClientInstanceName 的 devex 控件都注册为全局变量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T17:44:16.170

你可以破解一些东西...

基本上，当您动态创建文本框时，会给它们一个唯一的客户端实例名称。

在页面加载结束时，您可以发出一些声明和数组并将元素设置为等于文本框对象的 javascript。

```
var ServerSideList = new List<string>();

while(CreatingTextBoxes)
{
    ...
    ServerSideList.Add(uniqueTextboxName);
}
....

var sb = new System.Text.StringBuilder();

sb.AppendLine("var clientSideList = [];");

foreach(var s in ServerSideList)
{
        sb.Append("clientSideList.push(");
        sb.Append(s);
        sb.AppendLine(");");
}

AspLiteralObject.Text = sb.ToString(); 
```

在客户端按钮单击事件中，您可以遍历 clientSideList 数组。

```
<script type="text/javascript">
    function btnClick(s, e) {
        var i;
        var theTxtBx;

        for(i = 0; i < clientSideList.length; i++)
        {
            theTxtBx = clientSideList[i];
            theTxtBx.SetText('some text');
        }
    }
</script> 
```

# objective-c - iOS 5 XCODE 4.3.2 动态原型表视图可以使用组吗？

> ID：10605756
> 
> 赞同：3
> 
> 时间：2012-05-15T17:20:09.237
> 
> 标签：objective-c, uitableview, dynamic, ios5

我正在使用情节提要并有一个`UITableView`动态原型单元格。现在我试图将其分组，但是我能找到的每个教程都只对静态单元格进行分组。当我选择静态时，我确实看到了“部分”，但没有看到动态。有没有一种简单的方法可以使我的动态单元格分组？

谢谢，

抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:26:29.213

您需要`Grouped`在表格视图上设置样式。

在情节提要中，通过单击显示原型的图像部分或在左侧菜单中选择表格视图。您需要在其中选择样式下拉框`Grouped`。

假设您正确设置了视图，设置了多个部分并将单元格添加到正确的选择中，您将开始看到单元格与静态单元格一样分组。

您通过覆盖下面的方法将委托中的部分的标题设置为您的 UITableView （如果您使用的是 UITableViewController，则将其设置在那里）

```
- (NSString*)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    // set title of section here  
} 
```

页脚也有类似的方法

[iOS 5 XCODE 4.3.2 动态原型表视图可以使用组吗？](https://stackoverflow.com/questions/10605756/ios-5-xcode-4-3-2-can-a-dynamic-prototyped-tableview-use-groups/10747378#10747378)

# sql - sql - 在范围内分组以包括没有值的范围

> ID：10605762
> 
> 赞同：14
> 
> 时间：2012-05-15T17:20:46.400
> 
> 标签：sql, postgresql

假设一个类似于这个[问题](https://stackoverflow.com/questions/232387/in-sql-how-can-you-group-by-in-ranges)的场景。我想得到以下结果：

```
score range  | number of occurrences
-------------------------------------
   0-9       |        11
  10-19      |        14
  20-29      |         3
   ...       |       ... 
```

我可以使用选定的答案作为解决方案：

```
select t.range as [score range], count(*) as [number of occurences]
from (
  select case  
    when score between 0 and 9 then ' 0- 9'
    when score between 10 and 19 then '10-19'
    else '20-99' end as range
  from scores) t
group by t.range 
```

我如何确保即使在该范围内没有结果时也会显示 30-39 的分数范围？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-15T18:58:06.383

试试这个查询（也在[SQL Fiddle](http://www.sqlfiddle.com/#!1/cff90/1)上）：

```
WITH ranges AS (
    SELECT (ten*10)::text||'-'||(ten*10+9)::text AS range,
           ten*10 AS r_min, ten*10+9 AS r_max
      FROM generate_series(0,9) AS t(ten))
SELECT r.range, count(s.*)
  FROM ranges r
  LEFT JOIN scores s ON s.score BETWEEN r.r_min AND r.r_max
 GROUP BY r.range
 ORDER BY r.range; 
```

* * *

**编辑：**

您可以通过将参数更改为 轻松调整范围`generate_series()`。可以使用以下结构来确保`ranges`始终覆盖您的分数：

```
SELECT (ten*10)::text||'-'||(ten*10+9)::text AS range,
       ten*10 AS r_min, ten*10+9 AS r_max
  FROM generate_series(0,(SELECT max(score)/10 FROM scores)) AS t(ten)) 
```

对于`ranges`CTE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:30:11.963

你不能喜欢这样，但如果你添加带有范围的派生表，事情变得可能：

```
select ranges.range, count(scores.score) as [number of occurences]
  from
  (
     select 0 minRange, 9 maxRange, '0-9' range
     union all
     select 10, 19, '10-19'
     union all
     select 20, 29, '20-29'
  ) ranges
  left join scores
    on scores.score between ranges.minRange and ranges.maxRange  
 group by ranges.range 
```

虽然不确定 postgresql 的语法。

**编辑：**语法正确：

```
select ranges."range", count(scores.score) as "number of occurences"
  from
  (
     select 0 minRange, 9 maxRange, '0-9' "range"
     union all
     select 10, 19, '10-19'
     union all
     select 20, 29, '20-29'
  ) as ranges
  left join scores
    on scores.score between ranges.minRange and ranges.maxRange  
 group by ranges.range 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T17:44:20.380

```
select r.range as [score range], count(*) as [number of occurences]
from 
    (
    select ' 0- 9' as range, 9 as endrange
    union all select '10-19',19
    union all select '20-29',29
    union all select '30-39',39
    union all select '40-49',49
    union all select '50-59',59
    union all select '60-69',69
    union all select '70-79',79
    union all select '80-89',89
    union all select '90-99',99
    ) as r
left join scores s on 
    r.endrange = case 
    when s.score > 90 then 99
    when s.score > 80 then 89
    when s.score > 70 then 79
    when s.score > 60 then 69
    when s.score > 50 then 59
    when s.score > 40 then 49
    when s.score > 30 then 39
    when s.score > 20 then 29
    when s.score > 10 then 19
    when s.score > 0 then 9
    end
group by r.range 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T21:57:44.897

实际上，最简单的解决方案是这样的（对于 2 位数字）：

```
select substr(rssi::text, 0, 2) || '0-' || substr(rssi::text, 0, 2) || '9' as range, count(*)
from sensor_stations
group by substr(rssi::text, 0, 2)
order by count(*) desc; 
```

输出将是这样的：

```
 range | count 
-------+-------
 10-19 |  3414
 30-39 |  1363
 20-29 |  1269
 40-49 |   769
 50-59 |   294
 60-69 |   106
 70-79 |     5
(7 rows) 
```

# objective-c - UIButton 在从 IBOutlet 引用时不会禁用，但在从 IBAction 引用时会禁用

> ID：10605765
> 
> 赞同：0
> 
> 时间：2012-05-15T17:21:17.493
> 
> 标签：objective-c, xcode, uibutton

我已经检查了好几次以确保我在 IB 中的连接是正确的。

```
// This does not work
UIButton *additionButton = [self.gameShopCoinButtonCollection objectAtIndex:0];
additionButton.enabled = NO;

// This does work
-(IBAction)gameShopBuyButtonPressed:(UIButton *)sender {
    sender.enabled = NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:30:27.867

您不能保证 IBOutletCollection 中项目的顺序。您需要直接引用该按钮并以这种方式禁用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:23:52.263

要禁用 -

```
additionButton.userInteractionEnabled = NO; 
```

# multithreading - 在特定的 NUMA 内存上分配线程的堆栈

> ID：10605766
> 
> 赞同：1
> 
> 时间：2012-05-15T17:21:24.380
> 
> 标签：multithreading, pthreads, parallel-processing, numa

我想知道是否有办法在特定的 NUMA 节点上创建线程堆栈。我已经编写了这段代码，但我不确定它是否有效。

```
pthread_t thread1;

int main(int argc, char**argv) {        
  pthread_attr_t attr;
  pthread_attr_init(&attr);

  char** stackarray;
  int numanode = 1;

  stackarray = (char**) numa_alloc_onnode(sizeof(char*), numanode);
  // considering that the newly 
  // created thread will be running on a core on node1

  pthread_attr_setstack(&attr, stackarray[0], 1000000);
  pthread_create(&thread1, &attr, function, (void*)0);

  ...
  ...
} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-29T18:09:06.183

这是我用于此的代码（稍作调整以删除其他地方定义的一些常量）。请注意，我首先正常创建线程，然后`SetAffinityAndRelocateStack()`从线程内调用以下内容。我认为这比尝试创建自己的堆栈要好得多，因为堆栈对增长有特殊的支持，以防达到底部。

该代码也可以适应从外部对新创建的线程进行操作，但这可能会导致竞争条件（例如，如果线程在其堆栈中执行 I/O），所以我不推荐它。

```
void* PreFaultStack()
{
    const size_t NUM_PAGES_TO_PRE_FAULT = 50;
    const size_t size = NUM_PAGES_TO_PRE_FAULT * numa_pagesize();
    void *allocaBase = alloca(size);
    memset(allocaBase, 0, size);
    return allocaBase;
}

void SetAffinityAndRelocateStack(int cpuNum)
{
    assert(-1 != cpuNum);
    cpu_set_t cpuset;
    CPU_ZERO(&cpuset);
    CPU_SET(cpuNum, &cpuset);
    const int rc = pthread_setaffinity_np(pthread_self(), sizeof(cpu_set_t), &cpuset);
    assert(0 == rc);

    pthread_attr_t attr;
    void *stackAddr = nullptr;
    size_t stackSize = 0;
    if ((0 != pthread_getattr_np(pthread_self(), &attr)) || (0 != pthread_attr_getstack(&attr, &stackAddr, &stackSize))) {
        assert(false);
    }

    const unsigned long nodeMask = 1UL << numa_node_of_cpu(cpuNum);
    const auto bindRc = mbind(stackAddr, stackSize, MPOL_BIND, &nodeMask, sizeof(nodeMask), MPOL_MF_MOVE | MPOL_MF_STRICT);
    assert(0 == bindRc);

    PreFaultStack();
    // TODO: Also lock the stack with mlock() to guarantee it stays resident in RAM
    return;
} 
```

# ruby-on-rails - Rails 2.3.4 上的编码错误

> ID：10605769
> 
> 赞同：0
> 
> 时间：2012-05-15T17:21:36.197
> 
> 标签：ruby-on-rails, encoding

我们的设置包括以下内容：

*   红宝石 1.9.1
*   导轨 2.3.4
*   Postgres 9
*   Linux

当尝试将一些 UTF-8 数据从 DB 输出为 CSV 时，Rails 会抛出以下错误：

```
ArgumentError (invalid byte sequence in US-ASCII):
  haml (2.2.5) lib/sass/plugin/rails.rb:19:in `process'
  <internal:prelude>:8:in `synchronize'
  /usr/local/rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /usr/local/rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /usr/local/rvm/rubies/ruby-1.9.1-p431/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread' 
```

在使用 Webrick`script/server`和通过 Passenger 运行时都会发生相同的错误。

有趣的是，在我的本地机器上几乎相同的设置上，使用相同的数据库和相同的请求（因此在结果集中使用相同的数据），它不会崩溃。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:27:42.220

迁移到 Ruby 1.9.2 和 Rails 2.3.14 确实解决了这个问题。感谢弗雷德里克！

# java - 使用 Java、Gmail 和 Bouncy Castle Provider 发送电子邮件

> ID：10605776
> 
> 赞同：1
> 
> 时间：2012-05-15T17:21:54.790
> 
> 标签：java, security, gmail, provider, jakarta-mail

我尝试使用下一个代码发送电子邮件：

```
...
Security.addProvider(new BouncyCastleProvider());
...
Properties props = new Properties();
props.put("mail.smtp.auth", "true");        
props.put("mail.smtp.host", "smtp.gmail.com");
props.put("mail.smtp.starttls.enable", "true");
props.put("mail.smtp.port", "587");
Session session = Session.getInstance(props,
      new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(username, password);
        }
      });
...
Transport t = session.getTransport("smtp");
try {
     t.connect();
     t.sendMessage(message, message.getAllRecipients());
     System.out.println("Done");
 } finally {
     t.close();
 }  
 ... 
```

但它引发了下一个异常：

```
Exception in thread "main" java.lang.RuntimeException: javax.mail.MessagingException: Could not convert socket to TLS;
nested exception is:
java.net.SocketException: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: com.sun.net.ssl.internal.ssl.DefaultSSLContextImpl) 
```

如果我不添加提供程序，它可以正常工作，但我需要在我的代码中解决其他问题。

```
//Security.addProvider(new BouncyCastleProvider()); 
```

# javascript - Firefox 4 中的 JQuery 未定义和 $ 未定义错误

> ID：10605780
> 
> 赞同：-3
> 
> 时间：2012-05-15T17:22:11.967
> 
> 标签：javascript, jquery, firefox, browser

我正在为客户做一些工作，他们的 Firefox 4 版本出现 JQuery 未定义错误，而我的 Firefox 4 版本很好。这是查看完全相同的页面（在线托管）时！我的机器和客户端上的所有其他浏览器都很好。

有人对为什么会发生这种情况有任何想法吗？会不会是缓存问题？浏览器肯定启用了 Javascript。

编辑：这是尝试加载 jquery 文件的控制台的日志：

GET [https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js) [HTTP/1.0 200 连接建立 234ms]

“建立连接”是否意味着文件已加载？还是我应该期待“OK”的回应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:33:15.910

您是否正在加载 jQuery 的本地副本（而不是 CDN）并且此本地副本不在客户端的计算机中？

# javascript - javascript document.getElementById 将 .value 更改为 .href 不起作用

> ID：10605781
> 
> 赞同：1
> 
> 时间：2012-05-15T17:22:21.173
> 
> 标签：javascript, getelementbyid

我正在使用以前的脚本来替换 Quicktime 视频。

原始脚本使用按钮来加载其他视频的 URL，但我想使用简单的链接。这就是我极其有限的 javascript 知识让我陷入困境的地方。

我想我可以在这段代码中将“ **.value** ”更改为“ **.href ”：**

```
function loadVideo() {
                movie.loadURL( document.getElementById('movie-url').value );
                readyInitialized = false;
            } 
```

但视频会在单独的窗口中打开。

我的链接如下：

```
<a id="movie-url" href="http://www.fixxed.com/test/test/media/Kodak_FashionShow.mov" onclick="loadVideo(); return false;" rel="nofollow">Second Video</a><br />
<a id="movie-url" href="http://www.fixxed.com/test/test/media/doritos-day.mov" onclick="loadVideo(); return false;" rel="nofollow">Frist Video</a> 
```

单击上面的任何链接都会触发此操作：

```
<input type="text" id="movie-url" value="http://mirrors.creativecommons.org/movingimages/Building_On_The_Past.mov" /> 
```

HTML 文档和 javascript 文件都包含类似的 javascript 代码，如果没有另一个（我不知道为什么，我只想使用一次）HTML 将无法工作：

```
function loadVideo() {
                movie.loadURL( document.getElementById('movie-url').value );
                readyInitialized = false;
            } 
```

javascript文件：

```
pfQuicktime.prototype.loadURL = function() {
    if (this.movie) {
        var url = document.getElementById('movie-url').value;
        this.movie.SetURL(url);
        this.movie.SetControllerVisible(false);
    }
} 
```

可以在[这里找到一个工作示例](http://www.fixxed.com/test/test/test.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:26:55.163

如果你想要元素的href，那么你会想要使用`getAttribute('href')`这样的：

```
function loadVideo() {
           movie.loadURL( document.getElementById('movie-url').getAttribute('href'));
           readyInitialized = false;
         } 
```

同样正如 Alnitak 所指出的，您不能在页面上多次使用 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:27:10.653

您正在遭受具有相同 ID 的元素过多（即不止一个）的困扰。

为每个元素提供自己的 ID，并在事件处理程序中使用`this`来引用当前元素，因此您可以提取其`href`：

```
<a id="movie1" href="http://..../"  
 onclick="loadVideo(this);" rel="nofollow"">First</a><br />

<a id="movie2" href="http://..../"
 onclick="loadVideo(this);" rel="nofollow">Second</a>

<script>
function loadVideo() {
    movie.loadURL(this.href);
    readyInitialized = false;
    return false;
}

// this _may_ allow you to supply your own URL
pfQuicktime.prototype.loadURL = function(url) {
    if (this.movie) {
        this.movie.SetURL(url);
        this.movie.SetControllerVisible(false);
    }
}

</script> 
```

（FWIW，我通常不建议使用 DOM0 内联事件处理程序，但在这种情况下似乎很方便）。

# jquery - 使用 Jquery 将元素居中到可视区域

> ID：10605786
> 
> 赞同：0
> 
> 时间：2012-05-15T17:22:44.260
> 
> 标签：jquery

我有一个巨大的可滚动区域。在一个部分中，我有一个缩略图网格。单击时，拇指被克隆并动画到屏幕中心，但它动画到整个区域的中心，而不是您正在查看的区域，即滚动到的区域。我怎样才能让它动画到可视区域的中心？jQuery代码如下：

```
var $article = $('#news-articles .news-article').eq(index);
var $articleClone = $article.clone(true);  // clone the article for the corresponding link

// Create the expanded item container
var $expandedItem = $('<div>', {
id: 'item-expanded',
css: {
      width: 188,
  height: 188,
  background: '#fff',
  position: 'absolute',
  zIndex: 999
  },    
}); 

$expandedItem.append($img);  //Add the cloned image to the expanded item container              

$('body').append($expandedItem);  //Add the shaded overlay and the expanded item to the body

//Animate the size of the expanded item
    $expandedItem.animate({
        width: 400,
        height: 400,
        left: $(window).width()/2,
        top: $(window).height()/2,
        marginTop: -400/2,
        marginLeft: -400/2,
        }, {
            duration: DDBR.constant.ITEM_ANIMATION_SPEED,
            easing: DDBR.constant.ITEM_ANIMATION_EASING,
            queue: false,
            complete: function() {
                animFinished = true;
                if (animFinished) {
                    imageFade();                            
                    }
                }
            }); 
```

请注意，我已尝试将 $expanded 项目的位置更改为“固定”。但是，这会产生一个问题，因为它需要从我使用拇指的“偏移”获得的单击缩略图的位置进行动画处理。更改 $expandedItem 的位置会导致它在第一次加载时从拇指的位置开始动画，而不是在页面滚动后的当前位置。

希望这一切都有意义。对此的任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:29:23.440

您是否尝试过将展开项目的定位更改为相对，增加 z-index 属性，然后将其插入您希望居中的区域内的 div 中？现在，您只是将它插入到 body 标签内，这会将它放在屏幕的中心。

或者，您可以尝试更改宽度和高度属性的选择：

```
left: $(window).width()/2,
    top: $(window).height()/2, 
```

到：

```
left: $('#centerArea').width()/2,
top: $('#centerArea').height()/2, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:22:57.927

知道了。必须使用 scrollLeft 和滚动来调整左侧和顶部位置。代码：

```
//Animate the size of the expanded item
    $expandedItem.animate({
        width: DDBR.constant.ITEM_EXPANDED_WIDTH,
        height: DDBR.constant.ITEM_EXPANDED_HEIGHT,
        left: $(window).scrollLeft() + $(window).width()/2,
        top: $(window).scrollTop() + $(window).height()/2,
        marginTop: -DDBR.constant.ITEM_EXPANDED_HEIGHT/2,
        marginLeft: -DDBR.constant.ITEM_EXPANDED_WIDTH/2,
        }, {
            duration: DDBR.constant.ITEM_ANIMATION_SPEED,
            easing: DDBR.constant.ITEM_ANIMATION_EASING,
            queue: false,
            complete: function() {
                animFinished = true;
                if (animFinished) {
                    imageFade();                            
                    }
                }
            }); 
```

# c++ - 在 C++ 中存储 ztable 的最佳方法？

> ID：10605787
> 
> 赞同：1
> 
> 时间：2012-05-15T17:23:16.323
> 
> 标签：c++

我正在尝试为空矩阵上的一堆指标计算 p 值。我编写了函数来获取标准偏差和 z 值。为了获得 p 值，我需要在 ztable 中查找[zscore](https://en.wikipedia.org/wiki/Standard_normal_table)。

我的问题是，在 C++ 中存储该表的最佳方式是什么？在 python 中，我可能会将表格保存在字典之类的东西中，这样我就可以像这样访问它：ztable["0.1"]["0.03"] 的 zscore 为 0.13。甚至更好的是 ztable["0.13"]。谢谢！

旁注：自从我上统计课以来已经有一段时间了，如果有更好的方法来计算 p 值，我愿意接受建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:30:10.740

我会使用二维数组来存储数据，因为查看 Wikipedia 我可以看到 ztable 中的数据是二维的。如果我没记错的话，这将是一个指向指针的指针，对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:07:39.177

我可能会使用`map<pair<double,double>, double>`所有键并将所有键四舍五入为 3 个有效数字，例如您的示例：

```
map<pair<double,double>, double> ztable;
ztable[make_pair(0.1,0.03)] = 0.13; 
```

# mysql - 流星与mysql

> ID：10605796
> 
> 赞同：11
> 
> 时间：2012-05-15T17:23:43.273
> 
> 标签：mysql, meteor

我很想知道meteor是否可以连接或显示RDBMS的内容，比如mysql。我有一个不断变化的数据库，如果我可以使用流星作为前端的网络服务器，那就太好了。

谢谢，

凉介

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T04:43:16.797

来自[http://docs.meteor.com](http://docs.meteor.com)

> 您可以通过提供服务器端数据库驱动程序和/或实现替代 API 的客户端缓存来替代 MongoDB 的另一个数据库。mongo-livedata 是这样一个项目的一个很好的起点。

所以，这是可能的。目前，meteor 项目中没有提到任何 RDBMS，可能有人已经启动了这样的项目/插件。或者你可以基于 mongo-livedata 实现来实现它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T07:59:41.300

[https://github.com/drorm/meteor-sql](https://github.com/drorm/meteor-sql)是`livedata`mysql 的一个实现。它只是刚刚发布，所以它可能仍然包含一些错误，但我认为你会发现它是一个可行的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-19T04:53:36.103

基本上，有3种方法可以实现这一点：

1.- 在客户端使用 SQL Sintax：摆脱 minimongo 对分组和联合的限制。在客户端使用 Alasql 并规范化 mongo 集合。

2.- 使用 SQL 连接器：试试 numltel 的 MySql 连接器。缺点是它破坏了流星的部署。

3.- 使用 mongo 作为关系数据库的从属，使它们保持同步。MySql Shadow 使用这个。此外，您可能想查看 symmetric.ds 以使用大量 Sql 引擎设置 mongo 双向复制。

我在这个 repo 中收集了我的研究：

[https://github.com/vchigne/sqlAndMeteor](https://github.com/vchigne/sqlAndMeteor)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-15T05:54:07.190

我看到这个问题有点老了。流星现在是 1.0.1。自从提出这个问题以来，显着的变化之一是 Meteor 如何能够跟踪 Mongodb OpLog。这使得订阅真正即时实时。之前的实现使用 10 秒轮询和差异。所以，是的，有一些项目可以为替代数据库开发驱动程序，但如果它们没有 OpLog 的等价物，那么它将不是实时的。

SQL 支持在路线图上，但还很遥远，直到 1.1+ [https://twitter.com/meteorjs/status/399904048683290625](https://twitter.com/meteorjs/status/399904048683290625)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-14T07:05:51.157

绝对可以使用 mysql 代替 mongoDB，但是让应用程序与 mysql 后端反应可能会很棘手。

我确实找到了关于这个主题的演讲： [https ://www.youtube.com/watch?v=EJzulpXZn6g](https://www.youtube.com/watch?v=EJzulpXZn6g)

这可能会使您的解决方案更容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-19T10:00:43.170

嗨，目前有一个[Numtel MySQL](https://atmospherejs.com/numtel/mysql)包，它不仅支持 MySQL 查询，而且支持发布和订阅响应模式，非常适合运行流星应用程序，我们在生产应用程序中使用了这个包。

[Numtel MySQL](https://atmospherejs.com/numtel/mysql)包的示例代码放在[GitHub 上](https://github.com/numtel/meteor-mysql-leaderboard)。

由于流星支持的是 Nodejs，您可以使用受支持的包，如[mysqljs ，并且](https://github.com/mysqljs/mysql)[Robfallows](https://blog.meteor.com/@robfallows) 还在[Meteor 博客](https://blog.meteor.com)上发布了一篇有关 Meteor 应用程序的示例文章。

希望这能回答你的问题。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-05-27T06:30:51.313

我已经使用[Meteor-mysql](https://github.com/numtel/meteor-mysql)包来实现与 mysql 数据库的实时应用程序。将mysql更改为输出二进制日志需要进行少量配置，但其余部分完全完美无缺且流畅。希望这可以帮助

# javascript - 横向和替换类

> ID：10605797
> 
> 赞同：1
> 
> 时间：2012-05-15T17:23:43.787
> 
> 标签：javascript, jquery

我希望替换`ul`父 ( `li.filetabs`) 元素的子元素 ( ) 的类名。我所做的似乎很正确，但显然不是因为班级没有被替换。

**[用JSFIDDLE 更新 Jsfiddle](http://jsfiddle.net/ADesN/)** 的注意事项：当您单击一次时，一切正常，再次单击相同的导航选项卡，您会看到下拉菜单消失并重新出现...

```
var aFileTabs = $('.filetabs');
var curTab = $(this);
// this seems to give correct output 
var prevCurTab = $('.cTabActive').parent(); //(i.e. *jQuery(li.filetabs)*  )
// the following line is the problem line; Ive tried replacing the children with
// $('ul',prevCurTab)... but that doesnt work either... I must be doing something
// very basic wrong
$(prevCurTab).children().removeClass('cTabActive').addClass('cPrevTabActive');
$('ul', curTab).addClass ('cTabActive'); 
```

编辑：抱歉，我忘记了 HTML，还有更多内容，所以只有前两个导航按钮 html 被显示以了解含义。

```
 <div id="filemenu">                     <!-- right tabs menu -->
        <ul id="fm_ul">
            <li class="filetabs">File
                <ul>
                    <li class="m_items"><a href="#"><span class="aHeading">New</span><span class="shortcutK">Ctrl-U</span></a></li>
                    <li class="m_items"><a href="#"><span class="aHeading">Open</span><span class="shortcutK">Ctrl-Z</span></a></li>
                    <li class="m_items"><a href="#"><span class="aHeading">Save</span><span class="shortcutK">Ctrl-T</span></a></li>
                    <li class="m_items"><a href="#"><span class="aHeading">Exit</span><span class="shortcutK">Ctrl-Q</span></a></li>
                </ul></li><li class="filetabs">Edit
<ul>
                    <li class="m_items"><a href="#"><span class="aHeading">Undo</span><span class="shortcutK">Ctrl-M</span></a></li>
                    <li class="m_items"><a href="#"><span class="aHeading">Redo</span><span class="shortcutK">Ctrl-S</span></a></li>
                    <li class="m_items"><a href="#"><span class="aHeading">Zoom In</span><span class="shortcutK">Ctrl-R</span></a></li>
                    <li class="m_items"><a href="#"><span class="aHeading">Zoom Out</span><span class="shortcutK">Ctrl-Q</span></a></li>

                </ul></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:52:29.530

我不确定我是否明白这一点，但请尝试：

```
$('.filetabs').on('click', function() {
    var aFileTabs = $('.filetabs'),
        curTab = $(this),
        prevCurTab = $('.cTabActive').parent();

    $('.cTabActive').removeClass('cTabActive').addClass('cPrevTabActive');
    $('ul', curTab).removeClass('cPrevTabActive').addClass ('cTabActive');
});
​ 
```

[小提琴](http://jsfiddle.net/adeneo/F2NwL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:51:17.813

在这个单独的帖子中回答。谢谢丹尼尔。

[Jquery - 在一个简单的下拉菜单中操作类](https://stackoverflow.com/questions/10630511/jquery-manipulating-classes-in-a-simple-dropdown-menu)

# c# - PHP 等价于 C# `: base`

> ID：10605798
> 
> 赞同：4
> 
> 时间：2012-05-15T17:23:44.970
> 
> 标签：c#, php

以下代码段的 PHP 代码等效项是什么：

C#代码：

```
class Composite : Component
  {
    private List<Component> _children = new List<Component>();

    // Constructor
    public Composite(string name) : base(name)
    {
    }
  } 
```

PHP代码？

我正在寻找`: base(name)`部分。C# 中的完整代码参考可以在这里找到[http://www.dofactory.com/Patterns/PatternComposite.aspx](http://www.dofactory.com/Patterns/PatternComposite.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T17:25:23.927

PHP 等价物是

```
class Foo extends Bar {
    public function __construct($param) {
        parent::__construct($param);
    }
} 
```

[这在构造函数的 PHP 文档中](http://www.php.net/manual/en/language.oop5.decon.php)明确提到。

您应该记住 C# 和 PHP 之间的一个**重要区别**：在 PHP 中，如果您不显式调用基本构造函数，则根本不会调用它！这与 C# 中的不同，后者*始终*调用基本构造函数（尽管如果存在公共无参数构造函数，则可以省略显*式调用）。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T17:25:47.433

您正在寻找`parent`- 父类的访问器。

通过`parent`您可以调用基类构造函数：`parent::__construct($param, $param2)`

见： http: [//php.net/manual/en/keyword.parent.php](http://php.net/manual/en/keyword.parent.php)

请注意，这直接进入构造函数，如下所示：

```
public function __construct($x) {
    parent::__construct($x);
} 
```

# javascript - 在 D3.js 地图上添加路径

> ID：10605800
> 
> 赞同：2
> 
> 时间：2012-05-15T17:23:45.340
> 
> 标签：javascript, map, svg, social-networking, d3.js

我是 D3.js 的新手。我正在尝试在美国地图上可视化社交网络。它基本上包括 20 个塔和它们之间的连接。现在我可以在每个塔上画圆圈，但由于某种原因看不到路径（直线很好）。

我将代码附加到此消息中。您的帮助将不胜感激！

path 的数据是 csv 格式的，每行包括起点塔和目的地塔的 id、经度和纬度。

```
<!DOCTYPE html> 
<html> 
  <head> 
    <link type="text/css" rel="stylesheet" href="style.css"/> 
    <style type="text/css"> 
#states path { 
    fill: #ccc; 
    stroke: #fff; 
} 

path.arc { 
  pointer-events: none; 
  fill: none; 
  stroke: #fff; 
} 

path.cell { 
  fill: none; 
  pointer-events: all; 
} 

circle { 
  fill: steelblue; 
  fill-opacity: .8; 
  stroke: #fff; 
} 

 </style> 
  </head> 
  <body> 
    <script type="text/javascript" src="../../d3.v2.js"></script> 
    <script type="text/javascript" src="../../d3.csv.js"></script> 
    <script type="text/javascript" src="../../d3.geo.js"></script> 
    <script type="text/javascript" src="../../d3.geom.js"></script> 
    <script type="text/javascript"> 
var w = 1280, 
    h = 800; 
var projection = d3.geo.azimuthal() 
    .mode("equidistant") 
    .origin([-98, 38]) 
    .scale(1400) 
    .translate([640, 360]); 
var path = d3.geo.path() 
    .projection(projection); 
var svg = d3.select("body").insert("svg:svg", "h2") 
    .attr("width", w) 
    .attr("height", h); 
var states = svg.append("svg:g") 
    .attr("id", "states"); 
var circles = svg.append("svg:g") 
    .attr("id", "circles"); 
d3.json("../data/us-states.json", function(collection) { 
  states.selectAll("path") 
      .data(collection.features) 
      .enter().append("svg:path") 
      .attr("d", path); 
}); 

d3.csv("K_cdr.csv", function(callls) { 
var countByTower = {}, 
    locationByTower = {}, 
    positions = []; 
callls.forEach(function(calll) { 
var origin = calll.tower_orig, 
destination = calll.tower_dest; 
countByTower[origin] = (countByTower[origin] || 0) + 1; 
countByTower[destination] = (countByTower[destination] || 0) + 1; 
 }); 
d3.csv("K_Towers.csv", function(towers) { 
    var location = []; 
    towers.map(function(tower) { 
    location = [+tower.lat, +tower.lon]; 
    locationByTower[tower.ID] = location; 
    positions.push(projection(location)); 
    }); 
    circles.selectAll("circle") 
           .data(towers) 
           .enter().append("svg:circle") 
           .attr("cx", function(d, i) { return positions[i][0]; }) 
           .attr("cy", function(d, i) { return positions[i][1]; }) 
           .attr("r", function(d, i) { return 
    Math.sqrt(countByTower[d.ID])/2; }); 
    svg.selectAll("circle.node") 
       .data(towers) 
       .enter().append("svg:text") 
       .attr("class", "node") 
       .attr("x", function(d,i) { return positions[i][0]; }) 
       .attr("y", function(d,i) { return positions[i][1]; }) 
       .text(function(d,i) {return d.ID;}); 
    }); 

svg.selectAll("path") 
   .data(callls) 
   .enter().append("path") 
   .attr("d", function(d,i) { 
    var orig = projection([d.tower_orig_lat[i], 
    d.tower_orig_lon[i]]); 
    var dest = projection([d.tower_dest_lat[i], d.tower_dest_lon[i]]); 
    return ("M"+ orig[0]+" "+orig[1]+" L "+ dest[0] +" "+ dest[1] + " 
    z;"); }); 
}); 

    </script> 
  </body> 
</html> 
```

# java - 在 Jaspersoft iReport Designer 4.0.2 中创建与 SQL Server 2008 的连接？

> ID：10605806
> 
> 赞同：1
> 
> 时间：2012-05-15T17:24:07.260
> 
> 标签：java, sql-server-2008, ireport

我无法使用 Jaspersoft iReport 设计器 4.0.2 创建与 SQL Server 2008 的连接。

当我测试我的连接时出现错误

> SQL 问题：与主机的 TCP/IP 连接失败。java.net.ConnectException：连接被拒绝：连接
> jdbc:sqlserver://localhost:1433;databaseName=qlks

`qlks`是我的数据库名称。

我使用 JDBC 驱动程序：MS SQLServer (2005) ( `com.microsoft.sqlserver.jdbc.SQLServerDriver`)
JDBC URL：jdbc:sqlserver://localhost:1433;databaseName=qlks

我输入了我的用户名和密码。

请帮我！

我在学校的 Java 项目需要它！

谢谢！

# php - 获取其中一个列值小于集合中感兴趣的行的最后一行

> ID：10605809
> 
> 赞同：4
> 
> 时间：2012-05-15T17:24:46.733
> 
> 标签：php, mysql, sql

这有点难以解释，所以我会分解它......这是目标

假设你有一张桌子

```
ID | Weight

1     2
2     4
3     8
4     66
5     11 
6     44
7     33 
```

假设我有一组感兴趣的 ID，比如 (3,4)

我的目标是获取另外两行（两个感兴趣的 ID 各一个），以便与感兴趣的 ID 匹配的行的权重比感兴趣的 ID 的权重低一级

所以在这种情况下

对于 id 3，我们希望返回 ID 2 和权重 4 的行，因为行 id 2 是第一行，其权重 (4) 小于行 id 3 (8) 的权重

对于 id 4，我们希望返回 id 6 和权重 44 的行，因为行 id 6 是第一行，其权重 (44) 小于行 id 4 (66) 的权重

您将如何在一个查询中使用 mysql 完成此操作，我们使用 IN() 表示法表示感兴趣的 ID .....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:39:50.943

您可以解决这个问题，选择按权重 desc 排序的行中的第一行，其中权重低于给定的权重，在这种情况下，对于 mysql 类似：

```
select * from t where weight < (select weight from t where id = :id) order by weight desc limit 1 
```

在遵循上述想法的 in 语句中，您可能会有类似的内容：

```
select * from (select id, (select weight from t where weight < (select weight from t where id = tp.id) order by weight desc limit 1) from t tp) a where id in (3,4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:09:25.793

另一个没有子查询的解决方案：

```
select w1.id,w1.weight,
left(group_concat(w2.id order by w2.id desc ),LOCATE(',', group_concat(w2.id order by w2.id desc ))-1) as w2_id,
left(group_concat(w2.weight order by w2.weight desc ),LOCATE(',', group_concat(w2.weight order by w2.weight desc ))-1) as w2_weight

from weight as w1, weight as w2 
where w2.weight < w1.weight
and w1.id in (3,4)
group by w1.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T00:16:35.390

我想提出以下建议（显然使用 ourtable 作为表名）

```
SELECT id,weight FROM ourtable WHERE weight IN (SELECT MAX(t.weight) FROM ourtable t,ourtable t2 WHERE t.weight < t2.weight && t2.id IN (3,4) GROUP BY t2.id); 
```

它给出了以下结果

```
+----+--------+
| id | weight |
+----+--------+
|  2 |      4 |
|  6 |     44 |
+----+--------+ 
```

按照要求。

# wordpress - 在 wordpress 中创建元框不显示在自定义字段中

> ID：10605821
> 
> 赞同：0
> 
> 时间：2012-05-15T17:26:10.870
> 
> 标签：wordpress, wordpress-theming

我使用下面的代码为 wordpress 中的帖子创建了一个元框。但问题是这些元框也出现在自定义字段中。我不希望这些元框显示在自定义字段中。有什么方法可以避免在自定义字段中不显示元框，因为在自定义字段中显示它是没有用的

```
$meta_boxes_video = 
array(
"hotel name1" => array(
"name" => "hotel_name1",
"type" => "input",
"title" => "<strong>Hotel Name</strong> (Required)",
"description" => ""),
"price1" => array(
"name" => "price1",
"type" => "input",
"title" => "<strong>Price</strong>",
"description" => ""),
"hotel name2" => array(
"name" => "hotel_name2",
"type" => "input",
"title" => "<strong>Hotel Name</strong> (Required)",
"description" => ""),
"price2" => array(
"name" => "price2",
"type" => "input",
"title" => "<strong>Price</strong>",
"description" => ""),
"hotel name3" => array(
"name" => "hotel_name3",
"type" => "input",
"title" => "<strong>Hotel Name</strong> (Required)",
"description" => ""),
"price3" => array(
"name" => "price3",
"type" => "input",
"title" => "<strong>Price</strong>",
"description" => ""),
"hotel name4" => array(
"name" => "hotel_name4",
"type" => "input",
"title" => "<strong>Hotel Name</strong> (Required)",
"description" => ""),
"price4" => array(
"name" => "price4",
"type" => "input",
"title" => "<strong>Price</strong>",
"description" => ""),
"hotel name5" => array(
"name" => "hotel_name5",
"type" => "input",
"title" => "<strong>Hotel Name</strong> (Required)",
"description" => ""),
"price5" => array(
"name" => "price5",
"type" => "input",
"title" => "<strong>Price</strong>",
"description" => ""),
"hotel name6" => array(
"name" => "hotel_name6",
"type" => "input",
"title" => "<strong>Hotel Name</strong> (Required)",
"description" => ""),
"price6" => array(
"name" => "price6",
"type" => "input",
"title" => "<strong>Price</strong>",
"description" => ""),
"img_name1" => array(
"name" => "img_name1",
"type" => "input",
"title" => "<strong>Img1</strong> (Required)",
"description" => ""),
"img_name2" => array(
"name" => "img_name2",
"type" => "input",
"title" => "<strong>img2</strong> (Required)",
"description" => ""),
);

function display_video_meta_boxes() {
global $post, $meta_boxes_video;
    foreach($meta_boxes_video as $meta_box) {

        echo'<input type="hidden" name="'.$meta_box['name'].'_noncename" id="'.$meta_box['name'].'_noncename" value="'.wp_create_nonce( plugin_basename(__FILE__) ).'" />';

        echo'<h2>'.$meta_box['title'].'</h2>';

        if( $meta_box['type'] == "input" ) { 

            $meta_box_value = get_post_meta($post->ID, $meta_box['name'].'_value', true);

            if($meta_box_value == "")
                $meta_box_value = $meta_box['std'];
            $meta_box_value = str_replace("\"","'",$meta_box_value);

            echo'<input type="text" name="'.$meta_box['name'].'_value" value="'.$meta_box_value.'" size="55" /><br />';

        } elseif( $meta_box['type'] == "textarea" ) { 

            $meta_box_value = get_post_meta($post->ID, $meta_box['name'].'_value', true);

            if($meta_box_value == "")
                $meta_box_value = $meta_box['std'];
            $meta_box_value = str_replace("\"","'",$meta_box_value);

            echo'<textarea name="'.$meta_box['name'].'_value" value="'.$meta_box_value.'" style="width:100%" cols="20" rows="1">'.$meta_box_value.'</textarea><br />';

        } elseif( $meta_box['type'] == "button" ) { 

            $meta_box_value = "Add New Source";

            if($meta_box_value == "")
                $meta_box_value = $meta_box['std'];
            $meta_box_value = str_replace("\"","'",$meta_box_value);
            echo '<script type="text/javascript">
            function test()
            {
            alert("fgfg");
            var element = document.createElement("textarea");
            element.setAttribute("value", "Dfdsf");
            element.setAttribute("name", "sdfdf");
            var foo = document.getElementById("foo");
            foo.appendChild(element);
            }
            </script>';
            echo '<div id="foo">';
            echo'<input type="button" name="'.$meta_box['name'].'" value="'.$meta_box_value.'" onclick="test();"  /><br /></div>';

        }
        elseif ( $meta_box['type'] == "select" ) {

            echo'<select name="'.$meta_box['name'].'_value">';

            foreach ($meta_box['options'] as $option) {

                echo'<option';
                if ( get_post_meta($post->ID, $meta_box['name'].'_value', true) == $option ) { 
                    echo ' selected="selected"'; 
                } elseif ( $option == $meta_box['std'] ) { 
                    echo ' selected="selected"'; 
                } 
                echo'>'. $option .'</option>';

            }

            echo'</select>';

        } elseif ($meta_box['type'] == "info") {

            echo '<p><strong>Add your property images using the "Upload/Insert" button above the content textbox..</p>';
        }

        echo'<p><label for="'.$meta_box['name'].'_value">'.$meta_box['description'].'</label></p>';
    }

}

function create_video_meta_box() 
{
    if (function_exists('add_meta_box')) 
    {
        add_meta_box( 'ameta_boxes', 'Extra Information', 'display_video_meta_boxes', 'post', 'normal', 'high' );
    }
}

function save_video_postdata( $post_id ) {
    global $post, $meta_boxes_video;  

    if( get_post_type() == 'post' ) {
    foreach($meta_boxes_video as $meta_box) {  

        // Verify  
        if ( !wp_verify_nonce( $_POST[$meta_box['name'].'_noncename'], plugin_basename(__FILE__) )) {  
        return $post_id;  
        }  

        if ( 'page' == $_POST['post_type'] ) {  
        if ( !current_user_can( 'edit_page', $post_id ))  
        return $post_id;  
        } else {  
        if ( !current_user_can( 'edit_post', $post_id ))  
        return $post_id;  
        }  

        $data = stripslashes($_POST[$meta_box['name'].'_value']);  

        if(get_post_meta($post_id, $meta_box['name'].'_value') == "")  
        add_post_meta($post_id, $meta_box['name'].'_value', $data, true);  
        elseif($data != get_post_meta($post_id, $meta_box['name'].'_value', true))  
        update_post_meta($post_id, $meta_box['name'].'_value', $data);  
        elseif($data == "")  
        delete_post_meta($post_id, $meta_box['name'].'_value', get_post_meta($post_id, $meta_box['name'].'_value', true));  
        }
    }

}

add_action('admin_menu', 'create_video_meta_box');
add_action('save_post', 'save_video_postdata'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:52:06.177

在字段名称前加上下划线将隐藏它。所以：

```
if(get_post_meta($post_id, '_'.$meta_box['name'].'_value') == "")  
    add_post_meta($post_id, '_'.$meta_box['name'].'_value', $data, true);  
elseif($data != get_post_meta($post_id, '_'.$meta_box['name'].'_value', true))  
    update_post_meta($post_id, '_'.$meta_box['name'].'_value', $data);  
elseif($data == "")  
    delete_post_meta($post_id, '_'.$meta_box['name'].'_value', get_post_meta($post_id, $meta_box['name'].'_value', true)); 
```

您可能还想稍微清理一些代码。当调用 update_post_meta 时，如果该字段不存在，它将自动添加，因此您的 add_post_meta 调用在这种情况下是多余的。考虑将其视为以下任一：

```
if($data && $data != get_post_meta($post_id, '_'.$meta_box['name'].'_value', true))  
    update_post_meta($post_id, '_'.$meta_box['name'].'_value', $data); //Runs if $data exists and is different
else
    delete_post_meta($post_id, '_'.$meta_box['name'].'_value', get_post_meta($post_id, $meta_box['name'].'_value', true)); 
```

或这个：

```
if($data)  
    update_post_meta($post_id, '_'.$meta_box['name'].'_value', $data); //Runs if $data exists
else
    delete_post_meta($post_id, '_'.$meta_box['name'].'_value', get_post_meta($post_id, $meta_box['name'].'_value', true)); 
```

# c++ - 用于 Ubuntu 12.04 的 C++ 编译器/SDK - Netbeans

> ID：10605823
> 
> 赞同：1
> 
> 时间：2012-05-15T17:26:15.233
> 
> 标签：c++, linux, ubuntu, netbeans, sdk

我已经在 Ubuntu 上安装了 Netbeans 7.1。当我在 netbeans 中激活 C++ 时，它并没有像在 Windows 中那样将我引导到存在 C++ 编译器/SDK 的页面。我在 Windows 中使用 Cygwin，但似乎它不适用于 Linux。

请引导我到正确的位置，在那里我可以找到正确的适用于 Linux 的 C++ 编译器/SDK，我可以在 Netbeans 中使用它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T17:34:33.930

你需要安装 gcc

gcc 是 gnu c 和 c++ 编译器

只需打开控制台并输入：

```
sudo apt-get install build-essential 
```

netbeans 的 CPP 设置说明：http: [//netbeans.org/community/releases/60/cpp-setup-instructions.html](http://netbeans.org/community/releases/60/cpp-setup-instructions.html)

# c# - 通过 SQL 更新数据库

> ID：10605827
> 
> 赞同：0
> 
> 时间：2012-05-15T17:26:29.437
> 
> 标签：c#, sql, textbox, oledb

我正在尝试使用已存在的值（在同一行中）更新我的代码，但出现以下错误。

这是代码：

```
string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Projects_2012\\Project_Noam\\Access\\myProject.accdb";
OleDbConnection myConnection = new OleDbConnection(connectionString);

string myInsertQuery = (String.Format("UPDATE tblUsers SET usersID='{0}', usersFirstName='{1}', " +
" usersLastName='{2}',usersPassword='{3}', usersAdress='{4}', usersMail  ='{5}' " +
" WHERE usersID='{6}'", idn, firstName.Text, lastName.Text, password.Text, adress.Text
, mail.Text,  idn));

OleDbCommand myCommand = new OleDbCommand(myInsertQuery);
myCommand.Connection = myConnection;
myConnection.Open();
myCommand.ExecuteNonQuery();
myCommand.Connection.Close(); 
```

这是错误：

```
System.Data.OleDb.OleDbException crossed a native / managed boundary
Message = mismatch in criteria expression
Source = Microsoft Office Access Database Engine
ErrorCode = -2147217913 
```

我数据库中的参数定义如下：“usersID=number”，其余为文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:38:37.930

首先开始使用参数化查询。请参阅[OleDbParameter](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter.aspx)。另请阅读有关[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的信息。当数据库期望一种类型的值而您提供其他类型的值时，通常会发生您遇到的错误。在您的情况下，您的用户 ID 看起来像是整数类型，并且由于您将其括在单引号中，因此您会收到此错误。尝试以下查询（更改的部分是`userID={0}`）。编辑：同样应该在 where 子句中进行更改。

```
string myInsertQuery = (String.Format("UPDATE tblUsers SET usersID={0}, usersFirstName='{1}', " +
                " usersLastName='{2}',usersPassword='{3}', usersAdress='{4}', usersMail  ='{5}' " +
                " WHERE usersID={6}", idn, firstName.Text, lastName.Text, password.Text, adress.Text
                , mail.Text,  idn)); 
```

# php - 管理未来访问的用户偏好

> ID：10605829
> 
> 赞同：1
> 
> 时间：2012-05-15T17:26:36.833
> 
> 标签：php, jquery, ajax, cookies

我正在向我的网站添加关于已实施的新功能的通知。该通知位于网站顶部附近，位于醒目的位置以引起人们的注意。使用 jQuery，我编写了一个小函数，可以在用户选择时隐藏通知。如果用户选择隐藏通知，我希望它在访问的剩余时间和将来访问该网站时永久隐藏。

确保当他们稍后返回网站时隐藏通知的最佳方法是什么？我考虑过在用户最初隐藏它时发送一个创建 cookie 的 AJAX 请求，然后在页面加载时检查 cookie，但我不确定这是否是最好的方法。我不想根据IP地址隐藏它，因为我担心同一网络但不同计算机上的两个用户可能会访问该网站，而一个人会错过它，但也许我太偏执了。关于最好的方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T19:22:28.430

我建议也使用 javascript 来设置/读取 cookie。由于您已经在使用 jQuery，我建议您使用[jquery.cookie 插件](https://github.com/carhartl/jquery-cookie)。执行 AJAX 请求以保存用户首选项的唯一原因是，如果您的用户已登录到站点，并且您希望将他们的首选项存储在数据库或其他一些持久性存储中，这样每当他们登录时，他们就看不到关于您的新功能的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T19:25:00.243

如果服务器不需要知道 cookie 的值，我建议您改用 localStorage。

localStorage 存在于客户端上，不会与 $_COOKIES 标头一起发送到服务器。

可以在[此处阅读有关 localStorage 的更多信息](https://developer.mozilla.org/en/DOM/Storage#localStorage)

甚至可以根据您为什么希望在 cookie 上使用 localStorage 来获取客户端数据的更多内容。[Local Storage vs Cookies](https://stackoverflow.com/questions/3220660/local-storage-vs-cookies)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:06:52.720

为什么不直接使用[javascript](http://www.quirksmode.org/js/cookies.html)创建/读取 cookie ？

# vbscript - 当 WScript 不可用时获取 VBScript 脚本文件的完整路径

> ID：10605838
> 
> 赞同：0
> 
> 时间：2012-05-15T17:27:03.000
> 
> 标签：vbscript

我想获得我正在执行的脚本文件的完整路径。一个快速的谷歌搜索告诉我，这`WScript.ScriptFullName`会成功。问题是我在 Windows Script Host 之外执行这个脚本（我正在使用[ScriptUnit](http://www.xt1.org/scriptunit)），所以如果我尝试使用该代码，我会收到错误：

> 变量未定义：'wscript'

如果我不能使用 WScript，如何获得当前脚本文件的完整路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:34:57.120

你不能用 cscript 启动一个小脚本并通过环境变量将值传递给父脚本吗？无法对此进行测试，因为我没有或使用 ScriptUnit。显然，以下内容不起作用，因为您没有 Wscript 随身携带，但 ScriptUnit 具有类似的功能来读取 environmentvars ？

```
Set WshShell = WScript.CreateObject("WScript.Shell")
WshShell.Run "CScript.exe " & """" & ScriptName & """"  'this would set your environmentvar scriptpath
Set objProcessEnv = WshShell.Environment("Process") 
path = objProcessEnv("scriptpath") 
```

或者从批处理或其他脚本启动脚本，在文本文件中记录路径并在主脚本中读取该文件的内容。

# c# - Windows 窗体 C# 中的打印面板

> ID：10605840
> 
> 赞同：4
> 
> 时间：2012-05-15T17:27:13.563
> 
> 标签：c#, winforms, visual-studio-2010

我这里有个情况。我需要在 Visual Studio 2010 中使用 C# 以 Windows 形式创建员工卡结构。该结构可能包含白色背景的标签和图片框。我创建它没有问题，但我还在此表单上提供了一个名为“打印”的按钮，以便用户可以打印该卡。我用谷歌搜索了它，但没有找到具体的东西。请帮帮我。

```
namespace Employee_Card_Manager
{
public partial class Card : Form
{
    public Card(String a, String b, String c, String d, String e, String f, String g, String h, String i)
    {
        InitializeComponent();
        this.label2.Text = a;
        this.label9.Text = b;
        this.label10.Text = c;
        this.label11.Text = d;
        this.label12.Text = e;
        this.label13.Text = f;
        this.label14.Text = g;
        this.label16.Text = h;
        this.pictureBox1.Image = Image.FromFile(i);
        Image myimg = Code128Rendering.MakeBarcodeImage(h, 2, true);
        this.pictureBox2.Image = myimg;
    }
    private void button1_Click(object sender, EventArgs e)
    {
          //Print Card Code
    }
  }
} 
```

卡片模板如下：

![员工卡结构](../Images/1b0735fba49c2180c36b00a13893f25f.png)

我已将所有卡片结构放在面板控件上，并将面板背景设置为白色。你能填写打印这张卡的代码吗？谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T17:43:50.503

我发现以下代码运行良好！

```
 //declare event handler for printing in constructor
        printdoc1.PrintPage += new PrintPageEventHandler(printdoc1_PrintPage);

    //Rest of the code
    Bitmap MemoryImage;
    public void GetPrintArea(Panel pnl)
    {
        MemoryImage = new Bitmap(pnl.Width, pnl.Height);
        pnl.DrawToBitmap(MemoryImage, new Rectangle(0, 0, pnl.Width, pnl.Height));
    }
    protected override void OnPaint(PaintEventArgs e)
    {
        if (MemoryImage != null)
        {
            e.Graphics.DrawImage(MemoryImage, 0, 0);
            base.OnPaint(e);
        }
    }
    void printdoc1_PrintPage(object sender, PrintPageEventArgs e)
    {
        Rectangle pagearea = e.PageBounds;
        e.Graphics.DrawImage(MemoryImage, (pagearea.Width / 2) - (this.panel1.Width / 2), this.panel1.Location.Y);
    }
    public void Print(Panel pnl)
    {
        pannel = pnl;
        GetPrintArea(pnl);
        previewdlg.Document = printdoc1;
        previewdlg.ShowDialog();
    }
    private void button1_Click(object sender, EventArgs e)
    {
        Print(this.panel1);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:31:08.017

这个 MSDN 页面不适合您吗？ [http://msdn.microsoft.com/en-us/library/aa287529(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa287529(v=vs.71).aspx)

编辑：我修改了上述链接中的示例并创建了一个 PrintablePanel 类，您可以以各种形式重用它：

```
public partial class PrintablePanel : Panel
{
    public PrintablePanel()
    {
        InitializeComponent();
    }

    protected override void OnPaint(PaintEventArgs e)
    {

        base.OnPaint(e);
    }

    [System.Runtime.InteropServices.DllImport("gdi32.dll")]
    public static extern long BitBlt(IntPtr hdcDest, int nXDest, int nYDest, int nWidth, int nHeight, IntPtr hdcSrc, int nXSrc, int nYSrc, int dwRop);

    public Bitmap GetImage()
    {
        Bitmap memoryImage = null;
        Graphics mygraphics = CreateGraphics();

        Size s = this.Size;
        memoryImage = new Bitmap(s.Width, s.Height, mygraphics);
        Graphics memoryGraphics = Graphics.FromImage(memoryImage);
        IntPtr dc1 = mygraphics.GetHdc();
        IntPtr dc2 = memoryGraphics.GetHdc();
        BitBlt(dc2, 0, 0, this.ClientRectangle.Width, this.ClientRectangle.Height, dc1, 0, 0, 13369376);
        mygraphics.ReleaseHdc(dc1);
        memoryGraphics.ReleaseHdc(dc2);

        return memoryImage;
    } 
```

# php - 注意：连接时未定义的变量

> ID：10605842
> 
> 赞同：0
> 
> 时间：2012-05-15T17:27:29.650
> 
> 标签：php, concatenation, notice

我一直在制作一个脚本来显示用户并更改他们的管理员权限。

这是代码：

```
 while ($row= mysql_fetch_assoc($query)) {
    $uname= $row['username'];
    $fname= $row['first_name'];
    $lname= $row['last_name'];
    $email= $row['email'];
    $admin= $row['admin'];

    $insert .= '<tr>
    <td>' .$uname. '</td>
    <td>' .$fname. '</td>
    <td>' .$lname. '</td>
    <td>' .((isset($email)) ? $email:'No email set.'). '</td>
    <td>'.(($admin == 'y') ? 'Admin':'User').'</td>
    <td><input type="checkbox" name="' .$uname. '" value="'.(($admin == 'y')?'n':'y').'"/>'.(($admin == 'y')?'Make a user':'Make an admin user').'</tr>';
    } 
```

然后在 html 中使用 $insert 变量来生成包含用户数据的所有表行。

问题是当我运行脚本时会出现此消息

```
 Notice: Undefined variable: insert in C:\wamp\www\...\user_edit.php on line 33 
```

该脚本仍然可以正常工作，但只有此消息显示在页面中间。

当我采取 . 从 $insert .= ' 部分开始，消息消失，但脚本仅在表中显示一个用户。

有什么理由会发生这种情况吗？是否有解决我的问题的方法，以便我可以让脚本正常工作并且消息不显示？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T17:28:55.553

只需在使用之前将变量设置为空字符串。您不能`.=`在尚不存在的变量上使用：

```
$insert = "";
while($row= mysql_fetch_assoc($query)) {
    // ...
    $insert .= '<tr>';
    // ... 
```

# ruby-on-rails - 如何在 NewRelic 中“启用文本链接”

> ID：10605846
> 
> 赞同：1
> 
> 时间：2012-05-15T17:27:59.427
> 
> 标签：ruby-on-rails, performance, textmate, newrelic

我使用服务 NewRelic 来监控 Rails 应用程序。在`newrelic.yml`文件中，有以下选项（默认情况下已注释掉）：

```
# Enable textmate links
# textmate: true 
```

如何启用此功能以及它为我提供了哪些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:26:37.833

`http://localhost:3000/newrelic`这将为您提供在开发人员模式 ( )中出现的堆栈跟踪中的链接。这些链接将在 TextMate 中打开相关的源文件。

# .net - Mono.cecil 中的 Instruction.Offset 代表什么？

> ID：10605847
> 
> 赞同：1
> 
> 时间：2012-05-15T17:28:07.940
> 
> 标签：.net, debug-symbols, il, mono.cecil

我可以将其解释为源文件中的行号吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T19:27:43.077

不，`Offset`是指令在方法 IL 中的位置。它用于实现分支。

要获取行号，您必须使用**Mono.Cecil.[Pdb|Mdb].dll**（MS 或 Mono 调试符号）和`SequencePoint`. 如果这就是您所追求的，那么请查看 Gendarme[源代码](https://github.com/mono/mono-tools/blob/master/gendarme/framework/Gendarme.Framework/Symbols.cs)中的符号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T19:02:02.513

这是方法的 IL 体中的字节数。

# c# - WPF Gridview 绑定到列

> ID：10605852
> 
> 赞同：0
> 
> 时间：2012-05-15T17:28:27.207
> 
> 标签：c#, wpf, gridview

是否可以将对象绑定到 gridview 列而不是行？我想要以下内容：

```
 Tom     Jan     Wim
LastName    Last1   Last2   Last3
Age         18      20      23      
Number      1       2       3 
```

对象列表（Tom、Jan 和 Wim）必须绑定到第 1-3 列。必须冻结第一列才能滚动和拖动。可以拖动三个数据列重新排序。

有人可以帮我开始开发这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:27:31.630

[http://blogs.microsoft.co.il/blogs/tomershamam/archive/2008/09/22/lt-howto-gt-replace-listview-columns-with-rows-lt-howto-gt.aspx](http://blogs.microsoft.co.il/blogs/tomershamam/archive/2008/09/22/lt-howto-gt-replace-listview-columns-with-rows-lt-howto-gt.aspx)

不过，该链接可能正是您正在寻找的，而不是使用 GridView 而是使用 ListView。

# cordova - Phonegap 构建通用cordova.js？使用构建服务的 Windows iOS

> ID：10605856
> 
> 赞同：1
> 
> 时间：2012-05-15T17:28:52.253
> 
> 标签：cordova

主要问题是我正在开发适用于 Android 和 iOS 的应用程序，但似乎找不到适用于 iOS 的正确 .js 文件。我也没有 Xcode 或任何东西：\

我认为这可能正在开发中，但在过去（一年前）当我开始使用 phonegap 时，我会包含一个`phonegap.js`文件，并且 build 会为多个不同的平台编译它。现在看来我必须拥有正确的`cordova.js`文件，但我在这样做时遇到了麻烦。

是否有某种我可以使用的“通用” .js 文件？

Windows 用户如何使用 Build 来生成 iOS 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:15:17.483

我发现如果你使用 phonegap 构建服务，你可以简单地包含 phonegap.js（你不需要下载任何东西），云会为你处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T23:22:26.407

从来没有一个通用的phonegap.js，每个平台都有自己的phonegap.js版本。由于迁移到 Apache，该文件现在是 cordova.js。

# java - 创建无状态组件

> ID：10605858
> 
> 赞同：0
> 
> 时间：2012-05-15T17:29:00.947
> 
> 标签：java, wicket

我在 Wicket 1.5 中创建了一个无状态组件，通过扩展组件并提供 @StatelessComponent 注释，

我试图用 StatelessChecker 检查组件是否有状态/无状态。

但我无法检查，这是我正在尝试的代码。

@StatelessComponent

**公共类 StatelessText 扩展了 TextField**

//客户端类
StatelessText test = new StatelessText("test");

StatelessChecker sc = new StatelessChecker();

```
 sc.onBeforeRender(test); 
```

我在控制台上看不到任何东西或任何异常/错误。

也许我没有使用正确的方法，任何人都可以在这里指导我。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:37:50.553

您必须在 WicketApplication 初始化期间注册 StatelessChecker。

```
/**
 * @see org.apache.wicket.Application#init()
 */
@Override
public void init() {
    super.init();

    // might want to check if you're in dev mode or not...
    getComponentPreOnBeforeRenderListeners().add(new StatelessChecker());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:24:26.147

你不需要在你的类中显式调用 Statelesschecker。正如 Throsten 所说，您需要在您的 WebApplications 初始化中添加它并将您的 - 要检查的类 - 注释为无状态组件。如果您的应用程序在 web.xml 中被配置为处于开发模式，如果它是有状态的，则在调用此页面时会出现运行时错误。

我不确定我是否理解您在那里尝试做的事情。为什么你自己持有你的类的一个实例？你想建立一个单身人士吗？StatelessText 到底有什么目的？只要没有明确添加 Ajax 行为，通常形式的文本字段将是无状态的。

# linqpad - LinqPad 添加到实体框架的连接时遇到问题

> ID：10605859
> 
> 赞同：9
> 
> 时间：2012-05-15T17:29:03.770
> 
> 标签：linqpad

我是 Entity Framework 和 Linq to Entities 的新手，我想尝试 LinqPad，但我不知道如何连接到我创建的 edmx 模型。我有一个 MVC 项目，我针对 SQL Sever 数据库（一个开发服务器，而不是我的本地机器上的一个）添加了一个 ADO.Net 实体数据模型。在我的设计器界面中单击 Build.Right 并添加代码生成项。这给了我两个 .tt 文件夹，一个用于我的 dbContext 类，一个用于我的所有类。

打开 LinqPad 单击添加连接。指向我的解决方案 bin 文件夹中的 .dll 文件，然后在 dbContext 的完整类型名称中选择我创建的实体。现在我在做这项工作时遇到了麻烦。我指向解决方案 web.config 文件，当我单击“测试”按钮时，我收到一条错误消息“无法加载文件或程序集 'Entity Framework version=...”和“系统找不到指定的文件。（C： \users..\web.config 第 9 行“有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T12:45:58.057

我将**configSections**从配置文件中取出，连接工作正常。

```
 <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlCeConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="System.Data.SqlServerCe.4.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T19:48:59.970

我在 LinqPad 4.42.01 中遇到了这个确切的问题。我的项目是一个使用 EF5 数据程序集的 Web 项目。我最终在 web projectMy 中创建了一个 linqPad.config 文件（如下），它运行良好。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
   <connectionStrings>
      <remove name="MySqlServer"/>
      <add name="MySqlServer" connectionString="Data Source=mydb;Initial Catalog=mycat;User ID=iamuser;Password=soopersekret;Trusted_Connection=False" providerName="System.Data.SqlClient" />
   </connectionStrings>
</configuration> 
```

# string - $VARIABLE 周围的报价？

> ID：10605861
> 
> 赞同：0
> 
> 时间：2012-05-15T17:29:04.890
> 
> 标签：string, variables, csh

像这样的一行代码有什么作用？

```
if ("$MY_VARIABLE" == "some_string") ... 
```

这就是 csh 将变量解释为字符串以进行比较和赋值的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:42:37.310

引号意味着变量将被扩展为具有完整空格的单个参数，而不是在空格处分成多个部分。

# ios - 是否可以通过内置应用程序将文件保存在沙箱之外？

> ID：10605869
> 
> 赞同：2
> 
> 时间：2012-05-15T17:29:54.397
> 
> 标签：ios

如果我有一个`UIWebView`包含文件链接的文件，那么是否可以将这些文件保存到应用程序沙箱之外的磁盘上？

是的，我知道应用程序无法访问其沙箱之外的文件系统，但保存过程可以由任何可以处理文件类型的应用程序完成吗？- 例如，如果它是一个音频文件，我的应用程序是否可以启动 QuickTime，将文件（或文件 url）传递给它，然后用户可以通过 QuickTime 应用程序保存文件，并将其保存在音频文件的适当位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T22:32:06.207

应用程序仅限于将数据保存在自己的沙箱中。你似乎已经承认了。

您可以让一个应用程序启动另一个应用程序，这在理论上可以允许第二个应用程序保存数据，但在它自己的沙箱中。你也提到了这一点。

实际上，您已经回答了自己的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:18:46.210

可以将图像写入沙盒外的相册。

```
UIImage* image = [UIImage imageNamed:@"picture_of_my_cat.png"];
UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil); 
```

为了从 UIWebView（javascript 到目标 C）中获取数据，您可以子类化`NSURLProtocol`并使用`jQuery.ajax`.

# google-maps-api-3 - Google Map 在 Jquery Tool Overlays 模式对话框中不起作用

> ID：10605874
> 
> 赞同：0
> 
> 时间：2012-05-15T17:30:05.217
> 
> 标签：google-maps-api-3, overlay, jquery-tools

我在我的站点中使用 jquerytools(http://jquerytools.org/) 作为覆盖模式对话框。现在我必须在模态窗口（jquery toollayover）中显示谷歌地图，但不幸的是谷歌地图没有加载到叠加层中。

我正在做的只是在 Overlay 中显示一个完整的表单（使用 ajax 请求，我得到了“包括谷歌地图”的表单的完整 html 并在中途呈现它）。在我的情况下，它没有加载谷歌地图，但其他表单元素已成功呈现。我已经在单独的选项卡中打开了该页面（我通过 ajax 请求获取以显示在叠加层中），然后它也显示了带有谷歌地图的正确元素。

在我看来，谷歌地图与 jquery 工具停留冲突。

其他任何人都陷入同样的​​问题或任何解决方案的想法。提前致谢。

注意：我不是在谈论谷歌地图覆盖。我的问题是在覆盖模式对话框中显示谷歌地图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:37:52.470

浏览互联网后，我发现使用 ajax 请求在覆盖模式对话中显示谷歌地图不是一种方法。我使用 iframe，它解决了我的问题。现在我使用 iframe，谷歌地图在页面加载时加载，它对我来说非常好。如果有人可以通过ajax请求提出一种方法，那么我可能会考虑这种方式。据我在互联网上搜索 iframe 将是这种情况下的最佳选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:43:48.203

我按照您在上面提供的链接（event-in-town.com/place/index/addlocationlayover），您说它可以很好地加载地图，但是当我加载该页面时我没有看到地图。我看到的一件事 - 加载地图的 URL 存在问题：

```
<script type="text/javascript"
src="http://maps.google.com/maps/api/js?sensor=false&amp;language=&amp;region=DE">
</script> 
```

为您的地图定义语言的正确参数是：`&amp;language=DE`，因此首先将您的地图加载 URL 更改为：

```
<script type="text/javascript"
src="http://maps.google.com/maps/api/js?sensor=false&amp;language=DE">
</script> 
```

这应该让你朝着正确的方向前进——

# android - 如何从 Android SD 卡和内部存储访问图像和视频

> ID：10605883
> 
> 赞同：1
> 
> 时间：2012-05-15T17:30:41.043
> 
> 标签：android

我正在使用以下意图启动仅访问要在我的 Android 应用程序中使用的图像和视频的意图，如下所示。

```
 public static final int IMAGE_PICK = 1;
    Intent intent = new Intent();
    intent.setType("*/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent,"Select Any"), IMAGE_PICK); 
```

使用上面的内容，我可以在 IO 文件管理器和图库中看到图像，除此之外，我还看到了联系人 API。但在这里我不想显示联系人 API。有什么建议么。

谢谢&问候，文卡特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:41:48.263

```
 public static final int IMAGE_PICK = 1;
    Intent intent = new Intent();
    intent.setType("image/*");
    intent.setType("video/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent,"Select Any"), IMAGE_PICK); 
```

尝试使用此代码打开仅包含图像和视频的图库。

参考这个[链接](https://stackoverflow.com/questions/1863313/accessing-videos-and-photos-on-android-1-5)

# c# - 从 SuperClass 访问扩展类的属性

> ID：10605884
> 
> 赞同：0
> 
> 时间：2012-05-15T17:30:45.863
> 
> 标签：c#, .net, class, attributes

我有以下类，我需要知道 DocPage 类是否在方法 Render() 中具有属性 SessionRequired：

```
public class DocPageBase
{
   void Render()
   {
      // Have extended class SessionRequired?
   }
}

[SessionRequired]
public class DocPage : DocPageBase
{
   // Some properties and methods
} 
```

谢谢你的帮助！

问候，

杰拉德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:32:38.807

您将`GetType()`用于获取实际类型，然后[`Type.IsDefined`](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.isdefined.aspx)检查属性是否存在。

```
void Render()
{
    if (GetType().IsDefined(typeof(SessionRequiredAttribute), false)
    {
        ...
    }
} 
```

# directory - 如何从映射内存中读取 ext2 根目录？

> ID：10605887
> 
> 赞同：1
> 
> 时间：2012-05-15T17:30:55.220
> 
> 标签：directory, root, ext2

我正在为我的大学制作一个远程文件系统服务器，但在读取根目录时遇到了一些问题……事情是这样的：我已经读取了根 inode（inode 2）并且它具有一致的数据，我的意思是，例如，所有者用户 ID 字段设置为“1000”。然后我继续读取 inode 数据块的内容，但是当我尝试访问有问题的数据块（inode i_block 数组中唯一寻址的数据块，调试时为 240）时，所有字节都设置为 '0 '。谁能帮我这个？这真的很重要。注意：除了使用映射内存之外，我无法以其他方式进行操作，而且我不是打开真实磁盘，而是打开 .disk linux 文件。它是用命令行创建的

mkfs.ext2 -F -r 0 -b 1024 ext2.disk 30000

这是我的代码：

```
#include <linux/ext2_fs.h>

typedef struct s_inode *pinode;         /* Pointer to inode struct  */
typedef struct s_direct *pdir;          /* Pointer to direct struct */

int main(int argv, char *argc[]){
   int *data;
   pdir root = malloc(sizeof(struct s_direct));

   /* Code for mpping .disk file, fetching supernode, and other ext2 data */
   /* fsys is a global variable that holds general ext2 system data       */
   fsys->root           = get_inode(2);
   data                 = get_cont(fsys->root);
   root                 = (pdir)getblock(data[0]);

}

pinode get_inode(int idx){
    pinode inod;
    int grp, offs;

    grp =  (idx-1)/fsys->superblock->s_inodes_per_group;
    offs = (idx-1)%fsys->superblock->s_inodes_per_group;
    inod = (pinode)&fsys->diskmap[(fsys->group[grp]->itab)+offs*sizeof(struct s_inode)];

    return inod;
}

int *get_cont(pinode inod){
    int *cont; 
    int *idx;
    int i=0;
    int *block;

    idx  = malloc(sizeof(int)); 
    cont = malloc(sizeof(int));

    while(i < inod->i_blocks && i<13) {
            realloc(cont, i*sizeof(int));
            cont[i]=inod->i_block[i];
            i++;
    }

    if(i < inod->i_blocks){
        *idx=13;
        block=(int*)getblock(inod->i_block[*idx]);
        fetchcont(block, idx, cont, inod->i_blocks, 0);
    }
    if(i < inod->i_blocks){
        block=(int*)getblock(inod->i_block[*idx]);
        fetchcont(block, idx, cont, inod->i_blocks, 1);
    }
    if(i < inod->i_blocks){
        block=(int*)getblock(inod->i_block[*idx]);
        fetchcont(block, idx, cont, inod->i_blocks, 2);
    }

    return cont;

}

int fetchcont(int *block, int *idx, int *cont, int lim, int lvl){
    int i=0;

    if(lvl == 0){
        while((*idx) < lim && i<fsys->bsize){
            realloc(cont, (*idx)*sizeof(int));
            cont[*idx]=block[i];
            (*idx)++;
            i++;
        }
        if(i>=fsys->bsize){
            return 1;
        }else{
            return 0;
        }
    }else{
        lvl--;
        while(i<fsys->bsize){
            if(!fetchcont((int*)getblock(block[i]), idx, cont, lim, lvl)){
                return 0;
            }
            i++;
        }

    }
}

void *getblock(int idx){
    char *block;
    int grp, offs;

    grp   = (idx-1)/fsys->superblock->s_blocks_per_group;
    offs  = (idx-1)%fsys->superblock->s_blocks_per_group;
    block =  &fsys->diskmap[fsys->group[grp]->blocks+offs*fsys->bsize];

    return block; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:42:47.727

解决了这个问题。我假设块 n 是 n 数据块，但偏移量包括所有块。我已将我的 getblock 函数更改为

```
void *getblock(int idx){

    return &fsys->diskmap[fsys->bsize*idx];
} 
```

并工作！

# ruby-on-rails - RubyTest 错误 - 安装到 sublime text 2

> ID：10605888
> 
> 赞同：1
> 
> 时间：2012-05-15T17:30:57.507
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-test

我正在尝试按照 rails 教程指南安装 ruby​​test

我已将其引导至我的 rspec 文件：

```
 {
"erb_exec": "erb",
"ruby_unit_exec": "ruby",
"ruby_cucumber_exec": "cucumber -f pretty",
"ruby_rspec_exec": "/Users/snook3/.rvm/gems/ruby-1.9.3-p194/bin/rspec",

"ruby_unit_folder": "test",
"ruby_cucumber_folder": "features",
"ruby_rspec_folder": "/Users/snook3/.rvm/gems/ruby-1.9.3-p194/bin/"  
} 
```

但现在它给了我这些错误： `/bin/sh: line 0: cd: /Users/snook3/rails_projects/sample_app/spec/requests/static_pages_spec.rb: Not a directory`

我该如何解决？

教程的这一部分[http://ruby.railstutorial.org/chapters/static-pages#sec:tests_inside_sublime_text](http://ruby.railstutorial.org/chapters/static-pages#sec:tests_inside_sublime_text)点击 Command-Shift-R 。我已经走了这么远，我现在不想放弃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:02:42.143

从命令行运行 Sublime，看看是否能解决问题。

# asp.net-mvc-3 - 如果用户使用后退按钮然后单击链接，有时会出现登录屏幕

> ID：10605891
> 
> 赞同：0
> 
> 时间：2012-05-15T17:31:02.313
> 
> 标签：asp.net-mvc-3, forms-authentication

有时，如果用户单击后退按钮然后选择另一个链接，而不是应显示的内容，则会出现登录屏幕。就像应用程序突然认为用户未通过身份验证一样。然后用户必须重新认证才能继续浏览。这发生在用户主动浏览时，因此不应发生超时，并且在身份验证后会显示内容（因此这不是授权问题）。

不幸的是，这个问题很难重现。最常遇到此问题的用户是使用带有 IE 7 的 Windows XP，但 Windows XP 和 IE 8 也出现了该问题。我似乎无法在带有 IE 9 或 Chrome 18 的 Windows 7 上重现该问题，但是因为这个问题很难重现，我不能自信地说这个问题是浏览器或浏览器版本相关的。

我们的 ASP.NET MVC 3 应用程序使用表单身份验证，角色信息存储在 SQL Server 数据库中，成员信息存储在 Active Directory 中。托管环境是 Windows 2008 R2 上的 IIS 7.5。

有没有其他人看到这个问题，并且知道解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:24:31.440

在服务器上，我猜您正在使用自定义 IPrincipal ，您需要为每个请求重新附加到请求线程？您是在 HTTPModule 中还是在 global.asax 中执行此操作？您要连接哪个页面事件来授权线程？

我注意到在不同的运行时上下文中可用的身份验证存在差异，具体取决于我使用的事件。我现在总是使用 OnAuthorizeRequest 并检查 application.Context.User != null。

但是您描述的症状听起来更像是请求中间歇性地缺少授权 cookie。

为每个请求添加一些调试日志并监控 cookie 和授权，看看您是否可以检测到导致它的条件。

# git - 如何快速转发远程分支

> ID：10605895
> 
> 赞同：8
> 
> 时间：2012-05-15T17:31:21.100
> 
> 标签：git, version-control

我有一个本地`master branch`和远程`master`和`production`分支机构

我`master`对应于远程`master`（就像主干一样，但没有完全测试部署，所以我创建了一个名为的分支`production`，它总是在后面`master`）

例如`git branch -a`

```
* master
remotes/origin/master
remotes/origin/production 
```

当我推送时，我总是会推送到`master`，但有时我觉得质量足够好，我希望`production`分支赶上 的变化`master`，我应该使用什么命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T22:10:14.843

正如其他[人所说](https://stackoverflow.com/questions/10605895/how-to-fast-forward-a-remote-branch#comment13740411_10605895)：

```
git push origin master:production 
```

# php - 在上传的文件中用下划线替换空格

> ID：10605896
> 
> 赞同：5
> 
> 时间：2012-05-15T17:31:22.070
> 
> 标签：php

我有一个基本脚本，允许我的网站成员上传他们作品的简短样本供客户收听。

一些文件名有空格，这在尝试播放样本时显然会导致问题。有没有办法在上传到临时目录和将文件移动到“样本”目录之间用下划线替换这些空格？

```
<?
            $url = "http://domain.com/uploads/samples/";
            //define the upload path
            $uploadpath = "/home/public_html/uploads/samples";
            //check if a file is uploaded
             if($_FILES['userfile']['name']) {
              $filename = trim(addslashes($_FILES['userfile']['name']));
            //move the file to final destination
              if(move_uploaded_file($_FILES['userfile']['tmp_name'],
            $uploadpath."/". $filename)) {

              echo "

    bla bla bla, the final html output

            ";

              } else{
                if ($_FILES['userfile']['error'] > 0)
              {
                   switch ($_FILES['userfile']['error'])
                {
                  case 1:  echo 'File exceeded upload_max_filesize';  break;
                  case 2:  echo 'File exceeded max_file_size';  break;
                  case 3:  echo 'File only partially uploaded';  break;
                  case 4:  echo 'No file uploaded';  break;
                }
                exit;
              }
              }
            }
?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T17:34:06.107

在这一行之后：

```
$filename = trim(addslashes($_FILES['userfile']['name'])); 
```

写：

```
$filename = str_replace(' ', '_', $filename); 
```

像**hello world.mp3**（两个空格）这样的文件名会显示为`hello__world.mp3`（两个下划线），为了避免这种情况，您可以这样做：

```
$filename = preg_replace('/\s+/', '_', $filename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:34:32.003

```
$filename = str_replace(' ', '-', trim(addslashes($_FILES['userfile']['name']))); 
```

为什么`addslashes`呢？这似乎也有点太简单了——我错过了什么吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:39:50.930

尝试;

```
$filename = trim(str_replace(" ","_", $_FILES['userfile']['name'])); 
```

# html - 如何将flash设为页眉背景

> ID：10605897
> 
> 赞同：0
> 
> 时间：2012-05-15T17:31:32.947
> 
> 标签：html, flash

我已经阅读了很多关于将 flash 作为标题背景的教程，但是其中涉及到一些代码。你能解释一下如何使闪光灯作为背景吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:04:57.297

The single most important element involved in making flash media a background (i.e. being able to place stuff ontop of it) is to ensure that when embedding, you're setting the `wmode` to `opaque` or `transparent`. Failing to do so will mean that no matter what, the media will render ontop of the other elements on the page.

Other than that, you just need to use CSS to place content over the media via `position: absolute;` and possibly allocating a higher value for `z-index`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T18:52:23.733

您必须创建两个完全相同的 div。然后你把你的 Flash 内容放在 div 1 中，你想要的内容放在 div 2 中。

```
<div id="holder">
    <div id="flash_header_background">FLASH HERE</div>
    <div id="header_foreground">CONTENT HERE</div>
</div> 
```

然后你用 CSS 为你的 div 设置样式，使它们彼此重叠。

```
#holder {
    height: 250px; /* Flash height */
    width: 800px; /* Flash width */
    position: relative;
}

#flash_header_background {
    z-index: 1;
    position: absolute;
    height: 100%;
    width: 100%;
}

#header_foreground {
    z-index: 2; /* Puts this div above the background DIV */
    position: relative;
    height: 100%;
    width: 100%;
} 
```

**重要提示：**请记住将`wmode`Flash 内容的 设置为`opaque`或`transparent`。- 谢谢strah提醒

# javascript - 滚动时鼠标悬停

> ID：10605901
> 
> 赞同：2
> 
> 时间：2012-05-15T17:31:58.170
> 
> 标签：javascript

如果在滚动过程中鼠标经过跨度，这个小提琴不会检测到鼠标悬停：http: [//jsfiddle.net/S7tnB/](http://jsfiddle.net/S7tnB/)
我怎样才能检测到它？
我在 Firefox 12 上测试，在 OSX 狮子上。

**编辑：**我想到了一些可行的方法：`onscroll`，我们测试光标的位置是否在跨度区域内！但是我有另一个问题，`e.pageX`我写的时候不要工作`onscroll=theFunction(event)`。如果你解决了这个问题，就像你解决了主要问题一样。

# magento - 在管理网格中的 VirtualColumn 上使用渲染器

> ID：10605902
> 
> 赞同：1
> 
> 时间：2012-05-15T17:31:58.690
> 
> 标签：magento

在以前的作品中，我覆盖了 Magento Admin 中的 Order 网格，以显示其他数据。所以我创建了一个模块来做到这一点。我编写了新块并在 config.xml 中报告了覆盖：

```
<blocks>
    <adminhtml>
        <rewrite>
            <sales_order_grid>
                 Company_Module_Block_Sales_Order_Grid
            </sales_order_grid>
       </rewrite>
   </adminhtml>
</block> 
```

之后，我创建了一个新模块来获取和保存新数据。我现在想在网格上显示它们。这些数据来自自定义表，尚未在网格中使用。我还必须使用渲染器来显示它们。

我不想让这两个模块相互依赖，新数据必须像默认的一样显示在覆盖的网格上。所以我想（如果可能的话）避免第二个模块对第一个模块的其他覆盖。

通过在互联网上搜索，我发现了这篇有趣的文章： http: [//www.ecomdev.org/2010/07/27/adding-order-attribute-to-orders-grid-in-magento-1-4-1。 html](http://www.ecomdev.org/2010/07/27/adding-order-attribute-to-orders-grid-in-magento-1-4-1.html)

```
$resource->addVirtualGridColumn(
    'customer_telephone',
    'sales/order_address',
    array('billing_address_id' => 'entity_id'),
    'telephone'
); 
```

这种方法对我来说是完美的：如果第一个模块被禁用，第二个模块的数据仍然显示在默认网格上，如果第二个模块被禁用，网格仍然被覆盖。

它可能是完美的，但似乎您不能通过使用 addVirtualGridColumn 方法来使用渲染器。

所以我的问题是：有没有办法在虚拟列上使用渲染器？如果没有，是否还有一种方法可以优雅地添加“渲染”列而不覆盖网格？

希望我已经清楚地解释了我的问题，并希望有一个解决方案。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:01:24.123

您可以使用 XML：

```
<add_order_grid_column_handle>
    <reference name="sales_order.grid">
       <action method="addColumnAfter">
         <columnId>customer_telephone</columnId>
         <arguments module="" translate="header">
            <header>Customer telephone</header>
            <index>custom_telephone</index>
            <type>tex</type>
            <sortable>true</sortable>
            <renderer>YOUR_CUSTOM_RENDERER_CLASS</renderer>
          </arguments>
          <after>....</after>
        </action>
    </reference>
</add_order_grid_column_handle> 
```

# objective-c - 多表视图问题

> ID：10605906
> 
> 赞同：0
> 
> 时间：2012-05-15T17:32:29.993
> 
> 标签：objective-c, ios5

我已经实现了一个视图控制器，它带有一个名为 ligatable 的表视图控件。这个表视图在一个名为 ligaViewController.h 的表视图控制器中有它的委托。表格视图控件已经实现了一个原型单元，它设置了 ligaCell.h 控制器。以下是详细信息：

```
competicionViewController.h

#import "ligaViewController.h"

@interface CompeticionViewController : UIViewController 
{

    IBOutlet UITableView *ligaTable;
    ligaViewController *ligaController;

}

@property (strong, nonatomic) IBOutlet UITableView *ligaTable;
@property (strong, nonatomic) ligaViewController *ligaController;

competicionViewController.h

- (void)viewDidLoad
{
...

 ligaController = [[ligaViewController alloc] init];

    [ligaTable setDelegate:ligaController];
    [ligaTable setDataSource:ligaController];

.... 
```

以及 ligaViewController 中的委托方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

        ligaCell *cell = [self.tableView
                          dequeueReusableCellWithIdentifier:@"posicion"];

        NSDictionary *posicion = [[NSDictionary alloc] initWithDictionary: [ligaArray objectAtIndex:indexPath.row]];

        cell.posicion.text = [posicion valueForKey:@"posicion"];

        cell.PJ.text = [posicion valueForKey:@"pj"];

        cell.PG.text = [posicion valueForKey:@"pg"];

        cell.PP.text = [posicion valueForKey:@"pp"];

        cell.PF.text = [posicion valueForKey:@"favor"];

        cell.PC.text = [posicion valueForKey:@"contra"];

        return cell;

} 
```

它目前给我这个错误：

```
terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:' 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:35:57.343

利用 -

```
ligaCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"posicion"];
if (cell == nil)
{ 
    cell = [[[ligaCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CustomCellIdentifier] autorelease];
} 
```

# c# - 是否可以在使用 CollectionView 定义和绑定时隐藏 WPF DataGrid 中的列？

> ID：10605910
> 
> 赞同：1
> 
> 时间：2012-05-15T17:32:53.657
> 
> 标签：c#, wpf, wpfdatagrid

我正在尝试这里的示例

[http://msdn.microsoft.com/en-us/library/ff407126](http://msdn.microsoft.com/en-us/library/ff407126)

我想添加一个控件，用户可以定义哪些列是可见的。这可以轻松完成吗？

我发现[http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)但它不同，因为它没有使用 CollectionView和 CollectionViewSource。

谢谢和BR-马蒂

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:40:02.437

它可以通过多种方式完成。一种方法是编辑 DataGrid 列标题的样式。可以在以下位置找到列标题样式的示例：

[更改 WPF DataGrid 列标题样式，代码隐藏中的菜单可见性？](https://stackoverflow.com/questions/5303470/change-wpf-datagrid-column-header-style-menu-visibility-in-code-behind)

而不是像上面文章中那样在 ControlTemplate 中有菜单，可以有一个像这里这样的按钮用于列标题：

```
<Button Grid.Column="2" Name="MultiButton" MouseRightButtonDown="MultiButton_MouseRightButtonDown" Click="MultiButton_Click" Visibility="Hidden">X</Button> 
```

按钮使用第二个鼠标按钮打开弹出菜单，单击应该删除该列。该按钮默认是隐藏的，因此当鼠标移动到列标题时，必须触发才能使按钮可见：

```
<Trigger Property="IsMouseOver" Value="True" >
    <Setter Property="Visibility" TargetName="DeleteColumn" Value="Visible" />                            
</Trigger> 
```

因为所有列都有按钮，所以点击事件必须整理出要隐藏的列：

```
private void MultiButton_Click(object sender, RoutedEventArgs e)
{
   object dataContext = ((FrameworkElement)sender).DataContext;
   foreach (DataGridColumn col in dataGrid1.Columns)
   {
       if (col.Header.ToString() == dataContext.ToString())
       {
           col.Visibility = Visibility.Hidden;
       }
   }
} 
```

这可能不是最好的方法，但它确实有效。

# ios - 在一个选项卡中加载数据，在另一个选项卡中查看它，但表格不会重新加载

> ID：10605911
> 
> 赞同：0
> 
> 时间：2012-05-15T17:33:00.100
> 
> 标签：ios, cocoa-touch, reload

我有一个标签控制器，里面有 4 个标签。在第二个选项卡中，我正在输入数据并将该数据保存到 plist。在第 4 个选项卡中，我正在阅读 plist，将其中一个字典项（公司名称）制作成一个数组并将它们显示在表格中。我在 viewDidLoad 方法中这样做。

这适用于现有数据。但是，当我在第二个选项卡中添加数据然后转到第四个选项卡时，我无法弄清楚如何让表重新加载数据......我在 viewDidAppear 方法中尝试过 [table reloadData]，没有运气. 还试图有一个按钮来重新加载数据，但没有。

有人可以指出我正确的方向吗？

这是一些代码：

应用委托：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

//We need to implement the view controllers within the tab controller and make the tab controller the root controller of our app - note we are only using view 1-4 at first.

FirstViewController *fistView = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
SecondViewController *secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
ThirdViewController *thirdView = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];
FourthViewController *fourthView = [[FourthViewController alloc] initWithNibName:@"FourthViewController" bundle:nil];

NSArray *viewControllersArray = [[NSArray alloc] initWithObjects:fistView, secondView, thirdView, fourthView, nil];

self.tabController = [[UITabBarController alloc] init];
[self.tabController setViewControllers:viewControllersArray animated:YES];

self.window.rootViewController = self.tabController;

//end custom code

self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES;
} 
```

在我的 FourthViewController.h 中：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {

    //add our own image to the tab bar
    self.title = @"Results";
    self.tabBarItem.image = [UIImage imageNamed:@"btnResults.png"];
}
return self;

}

- (void)viewDidLoad {
    [super viewDidLoad];

    newFileManager = [FileManager new];

    NSMutableDictionary* surveyResults = [newFileManager readPlist];

    NSMutableArray* tempArray = [[NSMutableArray alloc] init];

    for(NSString* thisCompanyName in surveyResults) { 

    [tempArray addObject:thisCompanyName];
}

companyNames = [[NSArray alloc] initWithArray:tempArray];
NSArray* sortedCompanyNames = [companyNames sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];

self.companyNamesTable = sortedCompanyNames;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:40:14.440

Need to post more code to be sure but I would say you are not initializing the 4th tab everytime. Meaning you code is something like this.

init{ [tab4 init] }

callview{ [pushView tab4] }

where as if you did

init{ }

callview{ [tab4 init] [pushView tab4] }

(meaning dont init the 4tab till your going to use it)

it should query the plist fresh, without any prior query results in the way

# cakephp - 模拟蛋糕请求以存根数据功能

> ID：10605915
> 
> 赞同：1
> 
> 时间：2012-05-15T17:33:18.353
> 
> 标签：cakephp, mocking, phpunit

我一直在互联网上搜索如何模拟蛋糕请求。我想删除数据函数以使 $this->request->data('whatever') 在控制器中可用。但是我的测试用例出了点问题

```
$Jobs = $this->generate('Tasks' , array(
  'components' => array(        
    'RequestHandler' => array('isMobile','prefers','renderAs'))
));
// Mock CakeRequest
$request = $this->getMock('CakeRequest', array('_readInput'));      
$Jobs->RequestHandler->request = $request;

$Jobs->RequestHandler->request->expects($this->any())
  ->method('data')->with('anything')->will($this->returnValue('test'));

$result = $this->testAction('/tasks/test/',
            array('method' => 'get', 'return' => 'vars')); 
```

每当我调用`$this->request->data('anything')`控制器时，它都会返回 null！

请尝试帮助我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:08:06.250

从 PhpUnit 文档中：

> 默认情况下，给定类的所有方法都替换为仅返回 NULL 的测试替身，除非使用 will($this->returnValue()) 配置返回值，例如。
> 
> 当提供第二个（可选）参数时，只有名称在数组中的方法才会替换为可配置的测试替身。其他方法的行为没有改变。

所以你需要这样做：

```
$Jobs = $this->generate('Tasks' , array(
    'components' => array(        
    'RequestHandler' => array('isMobile','prefers','renderAs'))
));
// Mock CakeRequest
$request = $this->getMock('CakeRequest', array('_readInput'));      
$Jobs->RequestHandler->request = $request;

$Jobs->RequestHandler->request->expects($this->any())
    ->method('_readInput')->with('anything')->will($this->returnValue('test'));

$result = $this->testAction('/tasks/test/',
        array('method' => 'get', 'return' => 'vars')); 
```

或这个 ：

```
$Jobs = $this->generate('Tasks' , array(
    'components' => array(        
    'RequestHandler' => array('isMobile','prefers','renderAs'))
));
// Mock CakeRequest
$request = $this->getMock('CakeRequest', array('data'));      
$Jobs->RequestHandler->request = $request;

$Jobs->RequestHandler->request->expects($this->any())
    ->method('data')->with('anything')->will($this->returnValue('test'));

$result = $this->testAction('/tasks/test/',
        array('method' => 'get', 'return' => 'vars')); 
```

因为我不知道 cakePHP，所以我不能告诉你哪个是正确的答案。但是根据这个：[http](http://api20.cakephp.org/view_source/controller-test-dispatcher) ://api20.cakephp.org/view_source/controller-test-dispatcher （第232行），你应该尝试前一个。

# php - PHP 文件上传文件夹

> ID：10605918
> 
> 赞同：0
> 
> 时间：2012-05-15T17:33:25.420
> 
> 标签：php, file-upload, upload

我想用 php（文本文件）上传文件，并且总是将此文件保存为 names.txt（如果文件存在于以前的上传中，我想用新的文件替换）到脚本所在的同一目录。我从教程中在线找到了以下代码，但我无法使其工作。我没有文件存在。我已经发布了上传的 html 文件和 php 文件来帮助我。谢谢uploadfile.html

```
<html>
<head>
<title>File Uploading Form</title>
</head>
<body>
<h3>File Upload:</h3>
Select a file to upload: <br />
<form action="file_uploader.php" method="post"
                        enctype="multipart/form-data">
<input type="file" name="file" size="50" />
<br />
<input type="submit" value="Upload File" />
</form>
</body>
</html> 
```

文件上传器.php

```
<?php
if( $_FILES['file']['name'] != "" )
{
   copy( $_FILES['file']['name'], "/uploads" ) or 
           die( "Could not copy file!");
}
else
{
    die("No file specified!");
}
?>
<html>
<head>
<title>Uploading Complete</title>
</head>
<body>
<h2>Uploaded File Info:</h2>
<ul>
<li>Sent file: <?php echo $_FILES['file']['name'];  ?>
<li>File size: <?php echo $_FILES['file']['size'];  ?> bytes
<li>File type: <?php echo $_FILES['file']['type'];  ?>
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:37:22.333

使用`move_uploaded_file()`而不是`copy()`. 如果目标文件已经存在，它将被覆盖。

您的目的地无效。您正在将目录传递给目标文件。

```
copy( $_FILES['file']['tmp_name'], "/uploads/".$_FILES['file']['name'] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:44:26.667

对于上传文件，我使用如下代码

```
<?php
if ($_FILES["file"]["error"] > 0)
  {
  echo "Error: " . $_FILES["file"]["error"] . "<br />";
  }
else
  {
  echo "Upload: " . $_FILES["file"]["name"] . "<br />";
  echo "Type: " . $_FILES["file"]["type"] . "<br />";
  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
  echo "Stored in: " . $_FILES["file"]["tmp_name"];
  } 
  ?> 
```

# iphone - 呈现一个没有 nib 文件的视图控制器

> ID：10605919
> 
> 赞同：0
> 
> 时间：2012-05-15T17:33:28.217
> 
> 标签：iphone, objective-c, ios, uiviewcontroller

我将如何呈现一个没有 nib 文件的视图控制器？

我有一个没有笔尖的 viewController，并且希望在用户触摸按钮时显示此视图。是否还需要一个 nib 文件来执行此操作？

谢谢你的帮助。

我最终使用：

```
CameraViewController *cvc = [[CameraViewController alloc] init];
        [self.navigationController pushViewController:cvc animated:YES];
        [cvc release]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:36:47.517

视图控制器不需要笔尖。一般来说，由于维护和其他原因，有一个笔尖会很有用。但如果你不想要笔尖，你会想要`-loadView`覆盖`UIViewController`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:35:15.720

您可以通过编程而不是在笔尖内部创建视图。那么就不需要笔尖了。

```
- (IBAction)buttonPressed:(id)sender {
CameraViewController *cameraViewController = [[CameraViewController alloc] init];
[self presentModalViewController:cameraViewController animated:YES];
} 
```

# iphone - 将模态视图控制器添加到父子视图控制器层次结构

> ID：10605920
> 
> 赞同：0
> 
> 时间：2012-05-15T17:33:28.580
> 
> 标签：iphone, ios, uiviewcontroller

我发布了一个没有回应的相关问题，但在这里我会不那么狭窄。基本上，我正在使用一段开源代码来实现一个 facebook 风格的幻灯片来显示类型视图。其实现依赖于一种模式，其中初始滑动视图控制器是应用程序窗口启动时的根视​​图控制器。然后它允许每个视图控制器通过这个方便的方法获得对该滑动视图控制器的引用：

```
- (ECSlidingViewController *)slidingViewController
{
  UIViewController *viewController = self.parentViewController;
  while (!(viewController == nil || [viewController isKindOfClass:[ECSlidingViewController class]])) {
    viewController = viewController.parentViewController;
  }

  return (ECSlidingViewController *)viewController;
} 
```

我想这就是我的问题所在。我想为我以模态方式呈现的视图控制器提供这种侧滑式菜单。但是模态呈现的视图控制器为它的父视图控制器返回 null。因此，当我尝试获取对该根视图控制器（初始滑动视图控制器）的引用时，我做不到。如果我推动视图控制器，它可以工作，但这不是我想要的应用程序的流程。我认为如果我可以将此模态视图控制器添加为呈现视图控制器的子级，它将起作用。但是当我尝试这样做时，我遇到了一个异常，我正在模态地呈现一个已经处于活动状态的视图控制器。谁能建议如何解决这个问题？

编辑：[这是](http://www.google.com/imgres?um=1&hl=en&biw=1353&bih=823&tbm=isch&tbnid=yn6nlxRe46ibHM%3a&imgrefurl=http://iphoneappcafe.com/facebook-updates-its-iphone-app/&docid=nfSRX7iaXgXrNM&imgurl=http://iphoneappcafe.com/wp-content/uploads/2011/10/Facebook-iPhone-App-Review1.jpg&w=320&h=480&ei=cJiyT-T_IMaRiQKJ8eisBA&zoom=1&iact=rc&dur=309&sig=105296724904754695008&page=1&tbnh=149&tbnw=99&start=0&ndsp=24&ved=1t:429,r:6,s:0,i:85&tx=61&ty=36)我正在尝试做的事情的一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:08:51.380

从我们的讨论中，可以推断它是一个基于视图的应用程序。因此，您必须根据要求从父视图中添加和删除子视图，为此您将创建一个跟踪视图的类。此外，您可以将其添加为子视图，而不是模态显示视图，例如：-

```
[self.view addSubView:viewController.view]; 
```

你可以用`bringSubViewToFront`它来把它带到顶部。看这个[链接来管理它](http://mobiledevelopertips.com/open-source/ios-open-source-uiview-category-to-manage-z-order-of-views.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:37:23.510

我最终使用这个工具来达到同样的效果，并且发现实现起来要简单得多。[http://cocoacontrols.com/controls/iiviewdeckcontroller](http://cocoacontrols.com/controls/iiviewdeckcontroller)

# jquery - 当网页嵌入到 Div 中时如何防止 Css 继承

> ID：10605922
> 
> 赞同：0
> 
> 时间：2012-05-15T17:33:49.460
> 
> 标签：jquery, html, css, dom

我正在使用 jquery 和 Visual Studio 2010。

我在里面使用了 div 和 PlaceHolder。

我能够在我的 Div 中呈现网页。

但是当我使用像 www.google.com 这样的网站时，页面顶部的菜单栏不会在我的 div 中呈现，它会在我的 aspx 页面中继承。

我不想使用 iframe。是否有任何替代方案可以实现这一目标。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:38:04.220

尝试用 iframe 替换您的 DIV - 它旨在包含外部内容，这听起来像是您正在尝试做的事情。

# java - SEAM 实体查询子对象的字段

> ID：10605925
> 
> 赞同：0
> 
> 时间：2012-05-15T17:33:58.773
> 
> 标签：java, jsf, jboss, seam

使用基于 seam-gen 的代码。我有一个对象“教室”，其中包含一个“位置”实例。我想查询教室但在 Location 对象上指定一个值。

类似于“从 Location.State = "NY" 的课堂中选择”。当我尝试将带有状态列表的 selectOneMenu 绑定到 #{ClassroomList.classroom.location.state} 时，我遇到了错误。

在 Location 上收到空指针异常。我假设我需要在 Classroom 对象上实例化一个新的“位置”，但不知道在哪里做。在教室实体的构造函数上？在 ClassroomList 支持 bean 上（示例对象绑定到 ClassroomList JSP 搜索字段的位置）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:44:45.063

Not sure if this is the best way, but I got it working.

I have a String exposed on my ClassroomList backing bean as "String locationState". My dropdown list of states binds to that

Then that's referenced in my restrictions as: ... lower(classroom.location.state) like lower(concat(#{classroomList.locationState}, '%'))", ...

--

When I tried to instantiate ClassroomList.instance.Location, I would get: javax.servlet.ServletException with message: "Id and clazz must not be null" Not sure what's causing that?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:58:54.597

是的，您需要实例化 ClassroomList.instance.Location。因为 ClassroomList.instance 没有绑定到数据库，所以这不是自动完成的

# javascript - Jquery 使用 append 用 div 包装我的内容

> ID：10605928
> 
> 赞同：0
> 
> 时间：2012-05-15T17:34:15.297
> 
> 标签：javascript, jquery, function

```
 for(var i=0; i<num_cols; i++)
  {

    //Wrapper for column
    $('#cupcake-list').append('<div>');
    //end wrapper

    col_count++;
    num_in_col = rowsInCol(total,num_perCol,col_count);
    start = i*num_perCol;
    end = start + num_in_col;
    for(var d=start; d<end; d++)
    {
      $('#cupcake-list').append('<p>'+cupcakeData[d].name+'</p>');
    }

      //Wrapper for column
    $('#cupcake-list').append('</div>');
    //end wrapper

  } 
```

我只想将我的 p 标签封装在 div 标签中以充当行，但是我得到的只是`<div></div><p>ssdfsdf</p><p>sdfsdfdsf</p><div></div>etc....`

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:38:05.797

从一个片段开始，这样您就不会多次访问 DOM，并将其全部附加到最后。您可以从空片段开始跳过包装，如下所示：

```
var $fragment;
for(var i=0; i<num_cols; i++)
  {
    $fragment = $('<div />');
    col_count++;
    num_in_col = rowsInCol(total,num_perCol,col_count);
    start = i*num_perCol;
    end = start + num_in_col;
    for(var d=start; d<end; d++)
    {
      $fragment.append('<p>'+cupcakeData[d].name+'</p>');
    }

      //Wrapper for column
    $('#cupcake-list').append($fragment);
    //end wrapper

  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T17:38:53.097

这是一种更快的方法！将字符串的一部分附加到数组中，然后您只需更新 DOM 一次。

```
var a = [];
for(var i=0; i<num_cols; i++)
{
    a.push('<div>');
    col_count++;
    num_in_col = rowsInCol(total,num_perCol,col_count);
    start = i*num_perCol;
    end = start + num_in_col;
    for(var d=start; d<end; d++)
    {
        a.push('<p>'+cupcakeData[d].name+'</p>');
    }

    a.push('</div>');
}
$('#cupcake-list').append(a.join('')); 
```

编辑：我会解释为什么你的不起作用。当您打电话时，`$('#cupcake-list').append('<div>');`您认为它只会添加开始`div`标签，但事实并非如此。jQuery 不会让你这样做是因为他们想确保每次函数调用后 html 都是有效的。如果你只是添加开始的 div 然后做一些其他的事情，`</div>`文档中的下一个关闭 div ( ) 将关闭你刚刚打开的 div，从而完全改变文档的结构。

总而言之： `$('#cupcake-list').append('<div>');`并且`$('#cupcake-list').append('</div>');`都将附加`<div></div>`到文档中。此外，访问和更新 DOM 就像花费一百万美元一样，因为它是您在 javascript 中可以做的最慢的事情之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:36:05.123

jQuery 有一个名为 的方法[`.wrap`](http://api.jquery.com/wrap/)，还有一些类似的方法 ( `.wrapAll`)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T17:38:22.603

如果你有你展示的输出，你的代码没有到达内部，所以你有一个逻辑问题。我认为你这样做的方式是正确的。当我需要即时构建一些结构时，我通常会做同样的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T17:38:54.410

JQuery append 添加 DOM 节点，而不是 HTML。所以你可以像这样完成你的任务：

```
for(var i=0; i<num_cols; i++)
{
  col_count++;
  num_in_col = rowsInCol(total,num_perCol,col_count);
  start = i*num_perCol;
  end = start + num_in_col;
  for(var d=start; d<end; d++)
  {
    $('#cupcake-list').append($('<div></div>').append('<p>'+cupcakeData[d].name+'</p>'));
  }
} 
```

首先，`$('<div></div>')`创建一个`div`尚未附加到页面的新空元素（`$('<div>')`如果需要，您也可以作为简写）。然后在 div 中`.append('<p>...</p>')`添加一个元素。`p`最后，`$('#cupcake-list').append(...)`将整体添加`div`到`#cupcake-list`.

# mysql - MySQL搜索具有所有标签的项目

> ID：10605929
> 
> 赞同：1
> 
> 时间：2012-05-15T17:34:15.550
> 
> 标签：mysql, tagging

我正在开发一个在线图书馆的搜索引擎，但我有点卡在这里。搜索标签时，OR 搜索（即带有“tag1”或“tag2”的书籍）工作正常，但 AND 搜索给我带来了一些麻烦。

我用于此的表（及其列）是：

```
books  | book_id, other_info
tagmap | map_id, book_id, tag_id
tags   | tag_id, tag_text 
```

由于用户可以启用/禁用许多其他搜索选项，因此查询由 PHP 生成。当搜索带有标签“tag1”和“tag2”的书籍时，会生成以下查询：

```
SELECT DISTINCT b.book_id, b.other_info
FROM books b, tagmap tm, tags t
WHERE b.book_id = "NA"
OR ( (t.tag_text IN ("tag1", "tag2"))
      AND tm.tag_id = t.tag_id
      AND b.book_id = tm.book_id )
HAVING COUNT(tm.book_id)=2 
```

WHERE 行（不给出任何结果）在那里，以便可以更轻松地将附加参数串到查询中。我知道这可以更好地处理，但现在这并不重要。

当进行 OR 搜索（相同的查询但没有 HAVING COUNT 行）时，它返回数据库中具有这些标签中的任何一个的两本书，但是当在数据库中搜索具有 BOTH 标签的一本书时，它什么也不返回。

查询有什么问题？这不是/一种方法吗？我在看什么？

谢谢！

编辑：根据要求，与应返回的书相关的每个表中的数据：

```
books table:
book_id     110

tagmap table:
book_id     110    110
tag_id      15     16

tags table:
tag_id      15     16
tag_text    tag1   tag2 
```

**解决方案**：我所要做的就是包括

```
GROUP BY b.book_id 
```

在 HAVING COUNT 行之前。就那么简单。taz 提供的答案也值得研究，特别是如果您的目标是优化搜索查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T18:00:42.647

FROM 子句中以逗号分隔的表列表的功能类似于内部连接，因此您的查询将选择 tagmaps 表和 tags 表中具有相同标签 ID 的所有行，以及这些行中的所有行具有相同图书 ID 的 books 表和 tagmaps 表。然后，HAVING 子句要求从该结果集中返回具有相同书籍 ID 的两行。任何给定的书 ID 在书表中只能有一行（假设书 ID 是书表的主键），因此永远不会满足此条件。

你想要的是一个没有书桌的连接。您正在寻找在 OR 子句的结果中出现两次的相同图书 ID（我相信），因此您不想将这些结果加入 books 表，因为这将确保您永远不会在结果不止一次。

编辑：从概念上讲，你本质上是在结合两种不同的东西。您正在寻找同一本书的标签和标签映射，并且您还从每本书中获取书籍信息。因此，您实际上是在为 tagmaps 表中相同书籍 ID 的每个实例提取重复的 other_info 数据，然后使用 distinct 子句将重复数据减少到一行，因为您只需要书籍 ID 和 other_info。我会考虑使用两个查询或一个子查询来做到这一点。可能还有其他[更好的]方法。我必须玩弄它才能弄清楚。

对于初学者，尝试

```
SELECT DISTINCT tm.book_id, b.other_info
FROM tagmap tm inner join tags t
    on tm.tag_id = t.tag_id
  left join books b
    on tm.book_id = b.book_id
HAVING count(tm.book_id) = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T18:07:02.350

```
SELECT book_id FROM tagmap JOIN tags ON (tag_id) WHERE tag_text = "tag1"
INTERSECT
SELECT book_id FROM tagmap JOIN tags ON (tag_id) WHERE tag_text = "tag2" 
```

将整个事情包装为子查询以选择您需要的其他书籍信息：

```
SELECT book_id, other_info FROM books WHERE book_id IN
(
   ...
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-30T13:47:39.170

好的，看起来我为 mysql 数据库做了复杂的解决方案（对于任何其他的都应该没问题）。所以，数据库结构是这样的：

```
source (id)
tag(id)
tags(source, tag) 
```

涵盖此要求：

*   使用任何选定标签或所有选定标签获取源
*   获取不包含排除标签的来源

在这里查询：

```
 SELECT source.id 
 FROM source
 -- optional join, if you need to include sources with tags:
 LEFT JOIN tags tags_include ON source.id = tags_include.source
 -- optional join, if you need to exclude sources with tags
 LEFT JOIN tags tags_exclude ON source.id = tags_exclude.source
      -- here list of excluded tags
      and tags_exclude.tag in(1)
 WHERE
    -- optional condition, tags which you need to include
    tags_include.tag IN (2, 3)
    -- optional condition, which will exlcude sources with excluded tags
    and tags_exclude.source is null
 GROUP BY source.id
 -- optional having, in case when you include tags with "AND" strategy
 -- count should be equal to count of selected tags
 -- if you fetch sources with "OR" strategy, ignore this having
 HAVING count(1) >= 2
 ORDER BY source.id DESC
 LIMIT 0, 50; 
```

因此，此查询将获取 50 个最新的源，它们的标签为 2 和 3，并且没有标签为 1。

# java - SQL 确定高尔夫应用程序中的发球顺序

> ID：10605936
> 
> 赞同：6
> 
> 时间：2012-05-15T17:34:50.757
> 
> 标签：java, sql, database, sqlite

我正在开发一个包含记分卡系统的高尔夫应用程序。我将每个玩家的每个分数存储在数据库中，我需要提出一个查询来确定发球顺序。因此，例如，如果球员打了 3 个洞并且比分看起来像这样......

```
Player    1  2  3
--------- -  -  -
Player 1: 3, 4, 3
Player 2: 2, 3, 3
Player 3: 2, 4, 3 
```

......那么订单需要看起来像这样......

```
1.) Player 2
2.) Player 3
3.) Player 1 
```

...因此，球员将按照他们的分数与对手的分数进行比较。那有意义吗？这甚至可以通过查询实现，还是我应该编写一个函数来解析代码中的二维数组？在这种情况下，我使用的是 Java。

我的表结构如下所示：

*   玩家（玩家 ID 和玩家姓名）
*   回合（回合ID，课程ID）
*   分数（回合编号、球员编号、洞数和分数）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:58:11.897

我可以看到一个解决方案，它使用 Windows 函数 row_number() 和数据库中的一个附加列来进行每个级别的排序（或 SQL Server 中的递归 CTE）。但是，SQLite 不支持这一点。

这是我在不进行大量向后查询的情况下实施解决方案的建议：

(1) 分配第一个发球台的发球台顺序。

(2) 对于每个下一个发球台，查看上一个得分和上一个发球台顺序：

(3) 通过按最高分数 DESC 和先前的开球顺序 ASC 排序，循环通过先前的分数来分配新的开球顺序。

因为你每轮只有几个玩家，所以在应用层这样做是合理的。但是，如果您有一个支持窗口函数的数据库，那么您可以更轻松地做一个仅数据库的解决方案。

我无法抗拒。这里有一些代码将使用一个表来存储订单。您需要循环通过，每个孔一次：

```
create table ThisOrder (
    ThisOrderId int primary key autoincrement,
    RoundId int,
    Hole int,
    PlayerId int
) 
```

以某种顺序用每个玩家初始化它。

然后，为每个孔在表中插入新行：

```
insert into ThisOrder(RoundId, HoleId, PlayerId)
    select s.RoundId, s.Hole+1, s.PlayerId
    from Scores s join
         ThisOrder to
         on s.PlayerId = to.PlayerId and
            s.RoundId = to.RoundId and
            s.Hole = to.Hole
    order by s.Score DESC, to.Order ASC 
```

你需要为每个洞调用一次，减去一个。

然后让您的订购为：

```
 select *
 from ThisOrder
 where roundid = <roundid> and hole = <thehole>
 order by ThisOrderId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:02:23.727

因此，您需要将每个球员在当前洞之前的每个洞的得分相加，然后按总得分对球员 ID 列表进行排序。

像这样的东西应该工作：

```
SELECT SUM(score) AS score, player_id FROM Scores WHERE round_id=$current_round AND hole_number<$current_hole GROUP BY player_id ORDER BY score; 
```

这会生成一个包含两列（player_id 和 score）的结果表，其中包含与玩家数量一样多的行，将得分最高的玩家放在第一位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:32:09.017

此查询返回玩家得分最低的最高洞，并按以下顺序排列：

```
SELECT * FROM Players p
ORDER BY
  (SELECT MAX(s1.hole_number) FROM Scores s1
   LEFT JOIN Scores s2
     ON s2.round_id = s1.round_id AND
        s1.hole_number = s2.hole_number AND
        s2.score < s1.score
   WHERE s1.player_id = p.player_id AND
     s1.round_id = 1 AND s2.round_id IS NULL) DESC 
```

# facebook - 使用 FQL 或 Graph API 从旧版 fb:comments 小部件中检索评论

> ID：10605937
> 
> 赞同：1
> 
> 时间：2012-05-15T17:34:53.147
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在与一个客户合作，该客户一直在使用带有 xid 参数的 FBML fb:comments 小部件来在他们的博客上托管评论已有一段时间了。在某些时候，他们添加了 migrated=1 参数。

我试图通过 Graph API 或 FQL 检索这些评论线程，但没有成功。我能够使用现代 JS 评论小部件设置新页面并通过任一方法检索这些评论，但我不清楚旧评论有何不同。

[http://graph.facebook.com/comments/?ids=(page_url](http://graph.facebook.com/comments/?ids=(page_url) )

返回一个空集。我可以在 link_stat 表中找到该页面，该表准确显示了页面上的评论数量，但尝试使用 comment_fbid 字段值获取评论也返回空集，两者都有

[http://graph.facebook.com/(comment_fbid)/comments/](http://graph.facebook.com/(comment_fbid)/comments/)

[http://graph.facebook.com/comments/?ids=(comment_fbid](http://graph.facebook.com/comments/?ids=(comment_fbid) )

就像使用 object_id = comment_fbid 对评论表进行 FQL 查询一样。

我还尝试使用 xid = (page_url) 进行 FQL 查询，但无济于事。

任何关于遗留评论系统如何与 Graph API 或 FQL 交互的指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:16:31.433

可能你现在已经想通了 - 但是我花了很多时间来找出解决方案，所以其他人可能会觉得这很有用：

*   获取访问令牌：`https://graph.facebook.com/oauth/access_token?type=client_cred&client_id=<app_id>&client_secret=<app_secret>`
*   现在有了正确的 FQL 查询，剩下的就很简单了：( `https://graph.facebook.com/fql?q=select%20post_id,%20time,%20text%20from%20comment%20where%20xid=<xid>&access_token=<access_token>`) `select time, text from comment where xid=<xid>`。

显然，您可以自定义 FQL 查询以返回[评论表中](http://developers.facebook.com/docs/reference/fql/comment/)的任何参数。

`app_id`一个（实际上不是那么次要的）细节：即使没有显式参数，Facebook 也只会返回属于您的应用程序的评论。因此，以防万一您的 xid 是 1、2、3，您无需担心。事实上，在我的测试中**，如果指定了 app_id，Facebook 将不会返回任何条目！**（即使它与我用来检索访问令牌的相同）

正如其他人也提到的那样，似乎不可能获得应用程序的所有评论（无论 xid 或 url）。有时在帖子中引用的[comments_info](https://developers.facebook.com/docs/reference/fql/comments_info/)表现在似乎完全是空的。

# php - 在 PHP 中使用 XPath 打印 XML 节点

> ID：10605939
> 
> 赞同：0
> 
> 时间：2012-05-15T17:35:03.813
> 
> 标签：php, xml, xpath

我正在尝试使用 XPath 打印复杂的 XML 节点值，我附上了一张图片以帮助查看我需要到达的路径（红色下划线）。 ![XML 图像](../Images/5a30a5d9dd65365ed7cce6142bb8069c.png) 原始 XML 文件可以在[这里找到](http://mobitech.us.lt/document.xml)

我正在尝试这样的事情：

```
<?php
$xml = simplexml_load_file('document.xml');

    echo "<strong>Using direct method...</strong><br />";
    $names = $xml->xpath('/w:document/w:body/w:tbl[0]/w:tr[1]/w:tc[0]/w:p/w:r/w:t');
    foreach($names as $name) {
        echo "Found $name<br />";
    }

?> 
```

我用来替换这个节点的这个方法：

```
 $file = "document.xml";                                        
    $fp = fopen($file, "rb") or die("error");
    $str = fread($fp, filesize($file));
    $xml = new DOMDocument();                                
    $xml->formatOutput = true;
    $xml->preserveWhiteSpace = false;
    $xml->loadXML($str) or die("Error");

    $root   = $xml->documentElement;
    $fnode  = $root->childNodes->item(0);

    $ori    = $fnode->childNodes->item(1);                      
    $ori1    = $ori->childNodes->item(3);
    $ori2   = $ori1->childNodes->item(1);
    $ori3   = $ori2->childNodes->item(1);
    $ori4   = $ori3->childNodes->item(1);
    $ori5   = $ori4->childNodes->item(1);
        $wt     = $xml->createElement("w:t");
    $wtText = $xml->createTextNode("".$name." ".$item."");
    $wt->appendChild($wtText);
        $ori4->replaceChild($wt,$ori5);
        $xml->save("document.xml"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:43:14.517

```
<?php

// Load XML
$doc = new DOMDocument();
$doc->load("document.xml");

// Use xpath to grab the node in question. I copied your xpath
// query as-is, assuming it was capable of targetting exactly
// the node you are trying to replace. If it returns more than
// one node, then only the first will be replaced.
// If this isn't what you want, I suggest modifying your xpath
// query to match exactly the single node you want to replace.
$xpath = new DOMXPath($doc);
$oldElement = $xpath->query("/w:document/w:body/w:tbl[0]/w:tr[1]/w:tc[0]/w:p/w:r/w:t")->item(0);
$newElement = $doc->createElementNS("http://schemas.openxmlformats.org/wordprocessingml/2006/main", "w:t", $name . " " . $item);

// Replace old element with new element
$oldElement->parentNode->replaceChild($newElement, $oldElement);

?> 
```

# django - 删除所有表的django命令是什么？

> ID：10605940
> 
> 赞同：34
> 
> 时间：2012-05-15T17:35:03.953
> 
> 标签：django

有没有 django 命令

> A. 删除所有表
> 
> B.删除所有表中的所有数据
> 
> C. 创建模型中定义的所有表？

我现在找不到这些！

我所说的命令是指那些像

```
runserver 
```

ETC

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-15T18:11:57.653

A. 删除所有表

`manage.py sqlclear`将打印 sql 语句以删除所有表

B.删除所有表中的所有数据

`manage.py flush`将数据库返回到它在 syncdb 执行后立即所处的状态

C. 创建模型中定义的所有表？

`manage.py syncdb`为 INSTALLED_APPS 中尚未创建表的所有应用程序创建数据库表。

请参阅此页面以获取所有命令的参考：[https ://docs.djangoproject.com/en/dev/ref/django-admin/](https://docs.djangoproject.com/en/dev/ref/django-admin/)

但是您绝对应该像已经提到的那样考虑使用[南。](http://south.aeracode.org/docs/about.html)这是管理数据库的最佳方式。

**注意：`syncdb`从 Django 1.7 开始，不推荐使用 migrate。**

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-15T19:41:48.060

如果您为数据库安装了客户端库，则可以运行以下命令：

`python manage.py sqlflush | python manage.py dbshell`

这不会删除表，但会截断它们。

没有一个命令可以一次性完成所有操作，但是这个“一个班轮”将删除所有表，然后重新创建它们。仅当您在一个在 shell 中提供这些实用程序的系统上运行时，它才会起作用。

`echo 'from django.conf import settings; print settings.INSTALLED_APPS; quit();' | python manage.py shell --plain 2>&1 | tail -n1 | sed -r "s|^.*\((.*)\).*$|\1|; s|[',]| |g; s|django\.contrib\.||g" | xargs python manage.py sqlclear | python manage.py dbshell && python manage.py syncdb`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-15T11:58:50.550

既不`manage.py sqlclear`也不能`manage.py reset`一次删除所有表，两者都需要一个`appname`参数。

你应该看看[Django Extensions](https://github.com/django-extensions/django-extensions)，它可以让你访问`manage.py reset_db`以及[许多其他](http://packages.python.org/django-extensions/command_extensions.html)有用的管理命令。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-15T17:43:39.597

我建议使用 django-south。它不仅允许您在*添加*字段时将模型同步到数据库，还允许您在删除字段/模型时同步您的模型。我真的发现它是构建 Django 站点的重要组成部分。安装后，您可以运行如下命令：

./manage.py 迁移应用程序零

您可以在这里了解更多信息：http: [//south.aeracode.org/docs/about.html](http://south.aeracode.org/docs/about.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-12-31T20:30:52.793

还有一个更简单的 oneliner 来删除 django 1.5+ 的所有表：

```
python2 manage.py sqlflush | sed 's/TRUNCATE/DROP TABLE/g'| python2 manage.py dbshell 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-06T08:27:35.633

我能够放下我的桌子。跑

```
python manage.py sqlclear appname 
```

记下给出的命令。然后运行

```
python manage.py dbshell 
```

添加第一步中给出的命令。逐行。完成后，输入“.exit”（对于 SQlite3）。重新同步您的数据库，您应该一切顺利。可以肯定的是，请检查以下表格：

```
python manage.py shell
>>> from yourapp import yourclasses
>>> yourviews.objects.all() 
```

它应该返回一个 []。我希望这有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T17:45:50.930

A暗示B，对吧？

对于 A，请参阅[如何在 Django 中使用 manage.py CLI 从数据库中删除所有表？](https://stackoverflow.com/questions/3414247/django-drop-all-tables-from-database)

对于 C，

```
python manage.py syncdb 
```

当然，对于智能数据迁移，我使用@bento 提到的内容：django-south

# ios - AVAudioRecorder 和 AVAudioPlayer

> ID：10605944
> 
> 赞同：0
> 
> 时间：2012-05-15T17:35:27.217
> 
> 标签：ios, ios5, avaudioplayer, avaudiorecorder

现在是第三天，我仍然无法播放。我一直在关注一些关于 AVAudioPlayer/AVAudioRecorder 的教程。使用 NSFileManager 看起来像是创建了一个文件，但在播放时仍然没有骰子。

记录器视图控制器.m

```
//  RecorderViewController.m
//  AudioTest
//

#import "RecorderViewController.h"
#import <Foundation/Foundation.h>

@interface RecorderViewController ()

@end

@implementation RecorderViewController

@synthesize userIsRecording, filePath, activityView, recordButton, playButton, recorder;

/*
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}
*/

+ (CGRect)makeCGRectWithCenter:(CGPoint)center width:(float)width height:(float)height 
{
    return CGRectMake(center.x-width/2, center.y-height/2, width, height);
}

#pragma mark - Preparation
- (void)loadView 
{
    // RECORD BUTTON
    self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];

    self.recordButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    self.recordButton.frame = [[self class] makeCGRectWithCenter:CGPointMake(self.view.frame.size.width/2, 100) width:150 height:50];
    [self.recordButton setTitle:@"Record" forState:UIControlStateNormal];
    [self.recordButton addTarget:self action:@selector(recordPressed) forControlEvents:UIControlEventTouchUpInside];

    // PLAY BUTTON
    self.playButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    self.playButton.frame = [[self class] makeCGRectWithCenter:CGPointMake(self.view.frame.size.width/2, 200) width:150 height:50];
    [self.playButton setTitle:@"Play" forState:UIControlStateNormal];
    [self.playButton addTarget:self action:@selector(playPressed) forControlEvents:UIControlEventTouchUpInside];

    // RETURN BUTTON
    UIButton *returnButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    returnButton.frame = [[self class] makeCGRectWithCenter:CGPointMake(self.view.frame.size.width/2, 300) width:150 height:50];
    [returnButton setTitle:@"Return" forState:UIControlStateNormal];
    [returnButton addTarget:self action:@selector(dismissPressed:) forControlEvents:UIControlEventTouchUpInside];

    // ACTIVITY
    self.activityView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    self.activityView.frame = [[self class] makeCGRectWithCenter:CGPointMake(self.view.frame.size.width/2, 50) width:100 height:100];

    [self.view addSubview:self.recordButton];
    [self.view addSubview:self.playButton];
    [self.view addSubview:returnButton];
    [self.view addSubview:self.activityView];

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    NSLog(@"View did load");
    filePath = [NSURL fileURLWithPath:[NSTemporaryDirectory() stringByAppendingPathComponent:@"temp2.caf"]];

    // Setup AudioSession
    AVAudioSession *avSession = [AVAudioSession sharedInstance];
    [avSession setCategory:AVAudioSessionCategoryPlayAndRecord error:NULL];
    [avSession setActive:YES error: NULL];
    self.playButton.hidden = YES;
}

#pragma mark - Button Actions

- (void)dismissPressed:(id)sender
{
    if ([sender isKindOfClass:[UIButton class]]) {
        NSLog(@"Button class dismissed self");
    }
    else {
        NSLog(@"Sender is:%@", [sender class]);
    }
    [self dismissModalViewControllerAnimated:YES];
}

- (void)stopPressed {
    NSLog(@"Stop Pressed");
    [self.recordButton setTitle:@"Record" forState:UIControlStateNormal];
    self.userIsRecording = NO;
    self.playButton.hidden = NO;
    self.playButton.enabled = YES;
    [self.activityView stopAnimating];

    //
}

- (void)recordPressed
{
    if (self.userIsRecording) {
        [self stopPressed];
    }
    else {
        self.userIsRecording = YES;
        self.playButton.enabled = NO;
        self.playButton.hidden = YES;
        [self.recordButton setTitle:@"Stop" forState:UIControlStateNormal];
        [self.activityView startAnimating];

        NSDictionary *recorderSettings = 
        [NSDictionary dictionaryWithObjectsAndKeys: 
            [NSNumber numberWithInt:kAudioFormatLinearPCM], AVFormatIDKey, 
            [NSNumber numberWithInt:AVAudioQualityMin], AVEncoderAudioQualityKey,
            [NSNumber numberWithInt:16], AVEncoderBitRateKey,
            [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
            [NSNumber numberWithFloat:8000.0], AVSampleRateKey,
            [NSNumber numberWithInt:8], AVLinearPCMBitDepthKey, nil];

        // Clean temp file
        NSFileManager * fm = [NSFileManager defaultManager];
        [fm removeItemAtPath:[self.filePath path] error:NULL];

        // Record
        NSError *error = [NSError alloc];
        self.recorder = [[AVAudioRecorder alloc] initWithURL:self.filePath settings:recorderSettings error:&error];

        [recorder setDelegate:self];
        [recorder prepareToRecord];
        if (![recorder record]) {
            NSLog(@"Recorder FAIL %@", error );
        }
        else {
            NSLog(@"Recording at %@", [self.filePath absoluteString]);
        }
    }
}

- (void)playPressed
{
    NSFileManager * fm = [NSFileManager defaultManager];
    if ([fm fileExistsAtPath:[self.filePath path]]) {
        NSLog(@"File exists at:%@", [self.filePath path]);
        NSDictionary *attr = [fm attributesOfItemAtPath:[self.filePath path] error:NULL];
        NSLog(@"File attrs:%@", [attr description]);
    }

    else {
        NSLog(@"ERROR: No file exists at:%@", [self.filePath path]);
    }

    NSError *error = [[NSError alloc] init];

    AVAudioPlayer *player = [[AVAudioPlayer alloc] initWithData:[[NSData alloc] initWithContentsOfURL:self.filePath] error: &error];

    [player setDelegate:self];

    if (error) {
        NSLog(@"Player initialization Error: %@", error);
    }

    if (!player) {
        NSLog(@"Player is null!");
    }
    [player prepareToPlay];
    if (![player play]) {
        NSLog(@"Play Error: %@", error);
    }
}

#pragma mark - Lifecycle

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    NSLog(@"View did unload");
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:29:37.830

```
[player prepareToPlay];
if (![player play]) {
    NSLog(@"Play Error: %@", error);
} 
```

您在“准备播放”后立即播放文件。缓冲区可能在那一刻还没有准备好。做这个测试。声明`AVAudioPlayer *player`为全局。`if (![player play])...`从 中删除`- (void)playPressed`。现在创建一个将在其他按钮按下时调用的新方法。按下播放按钮，等待几秒钟，然后按下另一个按钮。

# c# - 如何将 cookie 从 System.Net.HttpWebResponse 传送到下一个 System.Net.HttpWebRequest？

> ID：10605945
> 
> 赞同：1
> 
> 时间：2012-05-15T17:35:32.440
> 
> 标签：c#, cookies, system.net.httpwebrequest

我正在尝试做一些自动化的网络请求，并且需要从一个到另一个维护一个 cookie。我可以看到我正在从初始响应中取回我想要的 cookie，但我无法将它附加到下一个请求。

c# 代码

```
// response part

using (var wresp = (System.Net.HttpWebResponse)wrequest.GetResponse())
{

    // respblob gets returned and is accessible to the next request
    respblob.CookieList = new List<System.Net.Cookie>(); 

    foreach (System.Net.Cookie cook in wresp.Cookies)
    {
        respblob.CookieList.Add(cook);
    }

    // ... more stuff not related to cookies
}

// next request part
   var wrequest = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(url);

    wrequest.Method = "POST";
    wrequest.ContentType = "application/x-www-form-urlencoded";

    wrequest.CookieContainer = new System.Net.CookieContainer();

    // request.CookieList contains one cookie as expected 
    // from the previous response
    for (int j = 0; j < request.CookieList.Count; j++)
    {
        wrequest.CookieContainer.Add(request.CookieList[j]);
    }

// .... write data to request body

// ... complete the request, etc 
```

这是两个请求/响应操作的记录交换。

要求：

```
GET http://domain.com/Login.aspx?ReturnUrl=%2fDefault.aspx HTTP/1.1
Host: domain.com
Connection: Keep-Alive 
```

回复：

```
HTTP/1.1 200 OK
Date: Tue, 15 May 2012 17:17:52 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 2.0.50727
Set-Cookie: ASP.NET_SessionId=zzz4fpb4alwi1du2yavx5tah; path=/; HttpOnly
Cache-Control: private
Content-Type: text/html; charset=utf-8
Content-Length: 24408

...html content... 
```

下一个请求：

```
POST http://domain.com/Login.aspx?ReturnUrl=%2fDefault.aspx HTTP/1.1
Host: domain.com
Content-Type: application/x-www-form-urlencoded
Content-Length: 979
Expect: 100-continue

__LASTFOCUS=&__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=viewstateclipped&__EVENTVALIDATION=validationclipped&ctl00%2524ContentPlaceHolder1%2524Login1%2524LoginButton=&ctl00%2524ContentPlaceHolder1%2524Login1%2524UserName=my.email%40example.com&ctl00%2524ContentPlaceHolder1%2524Login1%2524Password=myPassword 
```

因此，即使 cookie 存在于 HttpWebRequest CookieContainer 中，它也不会随请求一起发送。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T17:37:19.713

您应该对正在使用的两个对象使用相同的`CookieContainer`实例。`HttpWebRequest`只需创建一次 CookieContainer 实例：

```
var cookieContainer = new CookieContainer(); 
```

然后让你的两个请求对象都使用这个实例：

```
var request1 = (HttpWebRequest)WebRequest.Create("http://example.com/url1");
// assign the cookie container for the first request
request1.CookieContainer = cookieContainer;
... go ahead and send the request and process the response

var request2 = (HttpWebRequest)WebRequest.Create("http://example.com/url2");
// reuse the same cookie container instance as the first request
request2.CookieContainer = cookieContainer;
... go ahead and send the request and process the response 
```

由于您对两个请求使用相同的 CookieContainer，因此当第一个请求将 cookie 存储在此容器中时，cookie 将与第二个请求一起自动发出。这当然假设第二个请求与第一个请求是相同的域。

此外，由于 cookie 是会话 cookie（`HttpOnly`标志），因此您无法从客户端读取其值。

# c# - C# 从类中获取项目

> ID：10605949
> 
> 赞同：-8
> 
> 时间：2012-05-15T17:35:59.397
> 
> 标签：c#, list, class

我有一堂课叫`rateTime`

```
class rateTime
{
   private List<string> t = new List<string>();
   private List<string> s = new List<string>();

   public rateTime(string[] time, string[] sender)
   {
       for (int i = 0; i < time.Length; i++)
       {
           t.Add(time[i]);
           s.Add(sender[i]);
       }
    }

    ~rateTime() { }

    public List<string> Time
    {
       get { return t;}
       set { t = value; }
    }

    public List<string> Sender
    {
       get { return s; }
       set { s = value; }
    }
} 
```

我的组合框的 DataSource 设置如下：

```
rateTime rt = new rateTime(time, rateSender);
cb_rateTime.DataSource = rt.Time;
cb_rateTime.DisplayMember = "time"; 
```

在这两个列表中，我都有 28 个字符串。我将 List t 中的项目设置为组合框项目。如果我从具有索引的组合框中选择一个项目，例如 10，我想知道如何从索引为 10 的列表中获取字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:39:35.313

try elementAt(index) - [http://msdn.microsoft.com/en-us/library/bb299233.aspx](http://msdn.microsoft.com/en-us/library/bb299233.aspx)
or indexer - yourList[index]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:41:42.973

我不知道我是否理解得很好，但是：

```
var index = cb_rateTime.SelectedIndex;
var itemS = rt.Sender.elementAt(index); 
```

或者

```
var selected = cb_rateTime.SelectedText;
var itemS = rt.Sender[selected]; 
```

那应该解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:42:43.270

按索引访问它，如

```
MyRateTime.Sender[10] 
```

# cloud - 使用保管箱（或类似的）而不是简单的服务器是一个有效的解决方案吗？

> ID：10605951
> 
> 赞同：-1
> 
> 时间：2012-05-15T17:36:07.123
> 
> 标签：cloud, sync, dropbox

我正在编写一个小型企业应用程序，我需要编写一个简单的服务器来接收和发送少量（每个请求 < 1kb）的数据（文本数据）。

***基本上我必须从服务器端同步一些文件和从客户端同步一些文件。我可以将所有同步都留给基于云的服务（保管箱，...）吗？***

服务器端每天将修改其文件约 5 次。客户每小时将修改他们的文件 20 次。最多有200个客户。所有文件都是小于 100kb 的文本文件。

（如果这是一个可能的解决方案，我想知道这种解决方案允许的最大客户端数量）

感谢您的时间和回答。

***编辑：*** 我想知道这个解决方案的性能是否会比专用异步服务器更差。如果此解决方案还有其他可能的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:39:32.157

听起来可能。

您尚未发现任何具体问题，因此无法发表进一步评论。为什么不试试看呢？

**编辑：**

关于性能与您假设的专用服务器 - 您假设的服务器的性能是什么？您需要解决的问题是 Dropbox 是否*足够快*。

至于其他缺点 - 您的客户需要为保管箱付费，并且您的客户需要注意保管箱服务更新，以了解该设施何时无法使用。您还需要确保 Dropbox 满足您客户的安全和隐私需求，并且他们需要监控可能会损害这一点的服务条款的更新。

# c# - Asp.Net + JQuery - 在 function.Ready 中设置 CSS

> ID：10605952
> 
> 赞同：0
> 
> 时间：2012-05-15T17:36:15.810
> 
> 标签：c#, jquery, asp.net

我需要在下面的 ready 函数中设置 CSS 值。

```
 $(document).ready(function ()
   {
      $("<div id='" + 1 + "' class='box'></div>").css("left", 105).css("top",  54).appendTo("#center").draggable();
      $("<input type='text'></input>").appendTo("#" + 1);
    } 
```

它工作正常，然后在可拖动的 div 中创建一个文本框并将它们放在顶部：54 和左侧 105。现在我需要从服务器查询中获取 X，Y，我已经尝试过：

```
 $(document).ready(function ()
    {
        $.ajax({
            type: "POST",
            url: "Default.aspx/Get",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg)
            {
                var singleControls = msg.d.split('.');

                $.each(singleControls, function (key, value)
                {
                    var singleParameters = value.split(',');

                    if (singleParameters[0] != "")
                    {
                        var ids = singleParameters[0];
                        var type = singleParameters[1];
                        var cordX = singleParameters[2];
                        var cordY = singleParameters[3];

                        var container = $("#center").position();
                        var x_Coord = cordX - container.left;
                        var y_Coord = cordY - container.top;
                        $("<div id='" + ids + "' class='box'></div>").css("left", cordX).css("top", cordY).appendTo("#center").draggable();
                        $("<input type='text'></input>").appendTo("#" + ids);
                    }
                });
            }
        }); 
```

Get() 返回 X,Y 的地方，它创建了 div，但它把它放在 0,0 处。有人可以解释为什么这不起作用吗？

示例：[https ://skydrive.live.com/redir.aspx?cid=d7fc3da7fdbc700d&resid=D7FC3DA7FDBC700D!302&parid=D7FC3DA7FDBC700D!301](https://skydrive.live.com/redir.aspx?cid=d7fc3da7fdbc700d&resid=D7FC3DA7FDBC700D!302&parid=D7FC3DA7FDBC700D!301)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:46:30.380

如果您对左侧和顶部样式进行硬编码，那么为什么不将它们添加到样式表中的 .box 样式中，就像这样

```
.box{
position:absolute;
left:105px;
top:54px;
} 
```

否则 css 函数应如下所示：

```
.css({
    position:'absolute',
     left:'105px',
    top:'54px',
    });​ 
```

[这是一个 jsfiddle.net 示例](http://jsfiddle.net/athensholloway/WBf2S/)

# python - 局部变量变成 NoneType 我不知道为什么

> ID：10605960
> 
> 赞同：0
> 
> 时间：2012-05-15T17:36:52.963
> 
> 标签：python

我正在编写以下函数来格式化文件对象“项目”中的一些文本：

```
def clean(item):
    lines = open(str(item)).readlines()
    outp = []
    switch = 1

    for line in lines:
        line = line.strip()
        if line:
            line = re.sub(' +', ' ', line)
            if '%' in line:
                line = line.replace('%', ' per cent')
            if line.startswith('Note'):
                switch = 2

            if line.startswith('l\t'):
                line = line.split('\t')
                line[0] = '<@01_bullet_point>l<@$p>'
                line = '\t'.join(line)
                outp.append(get_prefix(switch,1) + line)
            else:
                outp.append(get_prefix(switch,2) + line)
            outp.append('\n')
    return ''.join(outp) 
```

我得到一个 TypeError: unsupported operand types for +: 'NoneType' and 'str'

我四处搜索解决方案，但找到了[http://www.skymind.com/~ocrow/python_string/](http://www.skymind.com/~ocrow/python_string/)，其解决方案 4 似乎证实我在正确的轨道上。

这是引用的其他函数已确认工作，所以我知道问题必须在这里，但是，试图找到相关的 SO 问题并检查我的 Python 副本简而言之，我不知道为什么我得到错误。我最好的猜测是与变量范围有关，但我看不到它，而且，再次搜索，我无法理解为同样的问题。我希望我遗漏了一些明显的东西，但任何帮助将不胜感激。

编辑 get_prefix 是：

```
def get_prefix(section, type):
    if section == 1:
        if type == 1:
            prefix = '@01_bullets:'
        elif type == 2:
            prefix = '@04_section_sub_subhead:'
        else:
            prefix = '@06_body_text:'

    else:
        if type == 2:
            prefix = '@14_notes_sub_sub_heading:'
        else:
            prefix = '@16_notes_text:'

    return prefix 
```

我看不出它如何返回无。

完整的追溯是：

```
File "rep_builder.py", line 65, in <module>
`rep.write(clean(item))`
File "rep_builder.py", line 36, in clean
`outp.append(get_prefix(switch,2) + line)`
TypeError: unsupported operand types for +: 'NoneType' and 'str' 
```

抱歉更新缓慢，我在两台无法连接的机器上工作（长篇大论）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T17:38:55.293

The only `+` operation is `outp.append(get_prefix(switch,1) + line)` and similar `outp.append(get_prefix(switch,2) + line)` - that means that `get_prefix()` is the culprit, returning `None` here.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:39:38.333

I believe your call to `get_prefix` is resulting in `None` being returned.

Given the error message and the available source code, this would be the most likely cause as it's the only place you are trying to concatenate something unknown and a string using the `+` operator. I.e.,

```
outp.append(get_prefix(switch,1) + line) 
```

or

```
outp.append(get_prefix(switch,2) + line) 
```

EDIT: one approach to check your `get_prefix` function is to give your `prefix` variable a default string value at the start of the function, and see if that eliminates the problem. That would point to that function, though I have to agree, I don't see how that code could return `None` as shown now.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:29:58.420

检查你的缩进。你确定`get_prefix`看起来不像这样吗？（我问是因为缩进`clean`是错误的）：

```
def get_prefix(section, type):
    if section == 1:
        if type == 1:
            prefix = '@01_bullets:'
        elif type == 2:
            prefix = '@04_section_sub_subhead:'
        else:
            prefix = '@06_body_text:'

    else:
        if type == 2:
            prefix = '@14_notes_sub_sub_heading:'
        else:
            prefix = '@16_notes_text:'

        return prefix 
```

如上缩进，如果等于`get_prefix`则返回。`None``section``1`

# css - 当存在继承的类时，您可以使用 CSS 定位元素吗？

> ID：10605966
> 
> 赞同：0
> 
> 时间：2012-05-15T17:37:23.567
> 
> 标签：css, css-selectors

一个元素上可能有多个类，由空格分隔：

```
<div class="header contaminated">...</div> 
```

你可以[使用](https://stackoverflow.com/questions/640996/can-you-target-an-element-with-css-only-if-2-classes-are-present)[selector来](https://stackoverflow.com/questions/640996/can-you-target-an-element-with-css-only-if-2-classes-are-present)[定位它`div``.header.contaminated`](https://stackoverflow.com/questions/640996/can-you-target-an-element-with-css-only-if-2-classes-are-present)。

当两个类都直接应用于一个元素时，这很好。我想使用具有两种样式的 CSS 来定位一个元素，但一种样式来自***父级***：

**例子**

```
<div class="contaminated">
  <div class="header">...</div>
</div> 
```

通常我想将 a 设置`header`为蓝色：

```
.header { background-color:  #99FFFF; } 
```

但如果 a`div`是`contaminated`那么我将整个背景涂成红色：

```
.contaminated { background-color: Pink; }
.contaminated.header { background-color: HotPink; } 
```

除了我不认为 css 选择器语法`.contaminated.header`对“继承”样式有效。

> **注意**：我认为它无效的原因是因为它不起作用

如果一个元素只包含两个类，并且其中一些类是“继承的”，是否可以使用 CSS 来定位它？

[**jsFiddle 沙箱**](http://jsfiddle.net/r8Lfa/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T17:38:59.807

这是基本的 CSS - 用空格分隔类名，这意味着/应用级联：

```
.contaminated .header { ... } 
```

这有什么问题吗？

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T17:40:09.743

我对你的问题感到困惑，这不会吗？

```
.contaminated .header { background-color: HotPink; } 
```

注意空格，上面写着“在具有 .contaminated 类的元素中查找具有 .header 类的元素”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T17:39:57.107

```
.contaminated>.header{} 
```

只会针对 .contaminated 的直接子元素标头

# ruby-on-rails - 创建初始化器

> ID：10605967
> 
> 赞同：15
> 
> 时间：2012-05-15T17:37:35.797
> 
> 标签：ruby-on-rails, initializer

在 Rails 中，创建初始化程序时，是否像将文件添加到 config/initializer 目录一样简单，还是我需要在其他地方进行更改？

我之所以问，是因为每次为 gems 创建初始化程序时我都会遇到错误……并且不确定是否是因为我错过了创建初始化程序的步骤。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-15T17:46:35.693

初始化程序只是文件，`config/initializers`没有其他魔法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T21:03:43.357

但是，如果您使用的是插件或 gem，您可能还需要在控制器中明确“请求”或“要求”插件......在这种情况下，您只需要查看文档即可。

# jquery-mobile - jquery-mobile：带有小文本框的字段

> ID：10605972
> 
> 赞同：0
> 
> 时间：2012-05-15T17:37:44.143
> 
> 标签：jquery-mobile

我正在使用 a`<div data-role='fieldcontain'>`制作一个“框”，其中有两个字段“min”和“max”问题是我想在同一行中有两个部分，但是如果显示宽度较小，jquery mobile 会分成两行比 jquery 想要的大小。我尝试放置两个组件的宽度，但它仍然分成两行，并且标签和文本框小于显示的一半......

这是我的代码：

```
<div data-role='fieldcontain' id='TempLimits'>
<label for='Tmin' style='display-inline;width:100;'>Min
<input type='text' name='Tmin' id='Tmin' value='50' disabled='disabled' style='display:inline;width:50px;'/></div> 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:55:28.730

这是我找到的解决方案：

```
<div data-role='fieldcontain' id='TempLimits'>
<label for='Tmin' style='display-inline;width:100;'>Min
<input type='text' name='Tmin' id='Tmin' value='50' disabled='disabled' style='display:inline-block;width:50px;'/></div> 
```

# javascript - dojo 中的 MultiSelectCombobox 问题

> ID：10605973
> 
> 赞同：2
> 
> 时间：2012-05-15T17:38:03.690
> 
> 标签：javascript, dojo

我需要在每个选项前面带有复选框的组合框来选择多个选项。我尝试使用 CheckedMultiSelect 使用“dropdown：true”，

当我选择项目时，它会显示组合框中的值，例如选择 2 个项目、选择 1 个项目等。

如何显示在以分隔符分隔的组合框的文本区域中选择的值？

是否应该为checkedMultiSelect更改css或H​​TML或其他东西？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T07:31:28.720

至于你的第二个问题，你必须扩展`dojox.form.CheckedMultiSelect`类和覆盖`_updateSelection`和`startup`方法：

```
var MyCheckedMultiSelect = declare(CheckedMultiSelect, {

    startup: function() {
        this.inherited(arguments);  
        setTimeout(lang.hitch(this, function() {
            this.dropDownButton.set("label", this.label);            
        }));
    },

    _updateSelection: function() {
        this.inherited(arguments);                
        if(this.dropDown && this.dropDownButton) {
            var label = "";
            array.forEach(this.options, function(option) {
                if(option.selected) {
                    label += (label.length ? ", " : "") + option.label;
                }
            });

            this.dropDownButton.set("label", label.length ? label : this.label);
        }
    }

}); 
```

使用`MyCheckedMultiSelect`代替`dojox.form.CheckedMultiSelect`：

```
var checkedMultiSelect = new MyCheckedMultiSelect ({
    dropDown: true,
    multiple: true,
    label: "Select something...",
    store: dataStore
}, "placeholder");

checkedMultiSelect.startup(); 
```

同样，我将此添加到 jsFiddle：http: [//jsfiddle.net/phusick/894af/](http://jsfiddle.net/phusick/894af/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T06:52:34.073

除了@Craig 的解决方案之外，还有一种方法可以通过 CSS 仅添加复选框的外观。如果您检查生成的 HTML，您可以看到每一行都表示为一个`<tr>`包含多个表格单元格的表格行`<td>`。所选项目的表格行获取 CSS 类`.dojoxCheckedMultiSelectMenuItemChecked`，因此我建议更改始终具有类的第一个单元格的样式`.dijitMenuItemIconCell`：

```
td.dijitMenuItemIconCell {
    width: 16px;
    background-position: center center;
    background-repeat: no-repeat;
    background-image: url('some-unchecked-image-here.png');
}

tr.dojoxCheckedMultiSelectMenuItemChecked td.dijitMenuItemIconCell {
    background-image: url('some-checked-image-here.png');
} 
```

所以你会得到：

![在此处输入图像描述](../Images/976dbc35b183b72369650da4d34d4364.png)

我将此添加到我之前帮助您的 jsFiddle 中：http: [//jsfiddle.net/phusick/894af/](http://jsfiddle.net/phusick/894af/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:14:36.763

设置为 true`CheckedMultiSelect`时不提供复选框。`dropDown`它只是允许用户单击以单击多个项目进行选择。

要实现您想要的，请在此处查看我的答案：

[通过继承 _HasDropdown 和 _AutoCompleterMixin 自定义 dojo Dropdown 小部件](https://stackoverflow.com/questions/10534076/custom-dojo-dropdown-widget-by-inheriting-hasdropdown-and-autocompletermixin/10535138#10535138)

在`MyCustomDropDown`中，您需要将复选框和项目列表构建为自定义小部件。我建议查看`dojox.form._CheckedMultiSelectMenu`并`dojox.form._CheckedMultiSelectMenuItem`模仿那里的功能，并提供不同的用户界面（带有复选框）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T15:00:31.093

dojox.form.CheckedMultiSelect 应该已经显示了复选框，这张票解决了这个问题。[https://bugs.dojotoolkit.org/ticket/17103](https://bugs.dojotoolkit.org/ticket/17103)

# javascript - 在 2 个不同的 div id 上固定位置

> ID：10605978
> 
> 赞同：0
> 
> 时间：2012-05-15T17:38:18.933
> 
> 标签：javascript, jquery, position

一旦发生某些滚动，我有一个页面需要 2 个 div 才能获得固定位置。问题是我需要为每个代码使用 2 个不同的代码，因为我不能将它们放在同一个 div 上。

这是我使用的 jquery 代码。

```
<script>
$(document).ready(function() {
    if (window.XMLHttpRequest) {
    window.onscroll = function() {
        if ($('body').scrollTop() > 534 || $('html').scrollTop() > 534) {
            if ($(window).height() > 20) {
                $('#wrappernav').addClass('wrappernavstatic');
            }
        }
        else {
            $('#wrappernav').removeClass('wrappernavstatic');
        }
    };
    }
}); 
```

我需要为另一个 div 添加另一个，但为 250px。但是当我将两者放在同一页面上时，它会发生冲突，并且只有第二个正在处理第一个的详细信息。

```
<script>
$(document).ready(function() {
    if (window.XMLHttpRequest) {
    window.onscroll = function() {
        if ($('body').scrollTop() > 300 || $('html').scrollTop() > 300) {
            if ($(window).height() > 20) {
                $('#wrappernavfilter').addClass('wrappernavfilterstatic');
            }
        }
        else {
            $('#wrappernavfilter').removeClass('wrappernavfilterstatic');
        }
    };
    }
}); 
```

我怎样才能将它们混合起来以保持活跃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:44:57.350

您可以使用[`.scroll()`](http://api.jquery.com/scroll/)绑定两个处理程序：

```
$(window).scroll(function () {
    // ...
}); 
```

而不是仅限于 1 `window.onscroll`：

```
window.onscroll = function () {
    // ...
}; 
```

因此，对于您问题中的第一个片段：

```
<script>
$(document).ready(function() {
    if (window.XMLHttpRequest) {
        $(window).scroll(function() {
            if ($('body').scrollTop() > 534 || $('html').scrollTop() > 534) {
                if ($(window).height() > 20) {
                    $('#wrappernav').addClass('wrappernavstatic');
                }
            }
            else {
                $('#wrappernav').removeClass('wrappernavstatic');
            }
        });
    }
}); 
```

# javascript - JavaScript - 如何检查一个字符串是否是另一个字符串的一部分或等于另一个字符串

> ID：10605980
> 
> 赞同：0
> 
> 时间：2012-05-15T17:38:20.367
> 
> 标签：javascript

只是为了说明我想要做什么，我将粘贴这个示例代码，例如：

```
<html>
<head>
</head>
<body>
<script type="text/javascript">
function oc(a)
{
  var o = {};
  for(var i=0;i<a.length;i++)
  {
    o[a[i]]='';
  }
  return o;
}
if ( "Island" in oc(["Hello","Hello World","Have","Island"]) )
{
document.write("Yes");
}
</script>
</body>
</html> 
```

在这种情况下，我会`Yes`进入我的页面，但是如果我更改条件，例如：

> if ( "Isl" in oc(["Hello","Hello World","Have","Island"]) )

该函数找不到匹配项。即使只有部分字符串匹配，执行这种检查也会返回 true 的最佳方法是什么？

谢谢

勒隆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T17:39:57.560

使用[`.indexOf()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
var str = 'hello world'
if (str.indexOf('lo') >= 0) {
    alert('jippy');
} 
```

* * *

`indexOf()`返回找到值的位置。如果没有匹配则返回`-1`，所以我们需要检查结果是否大于或等于`0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:41:47.557

您可以使用正则表达式中的 .test 方法。

```
var pattern = /Isl/;
pattern.test("Island"); // true
pattern.test("asdf"); //false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:41:23.847

```
var s = "helloo";
alert(s.indexOf("oo") != -1); 
```

indexOf 返回字符串在另一个字符串中的位置。如果没有找到，它将返回 -1。

[https://developer.mozilla.org/en/Core%5FJavaScript%5F1.5%5FReference/Objects/String/indexOf](https://developer.mozilla.org/en/Core%5FJavaScript%5F1.5%5FReference/Objects/String/indexOf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T17:48:29.403

```
<html> 
<head> 
</head> 
<body> 
<script type="text/javascript"> 
function inArray(str, array) 
{ 
  for(var i=0; i<array.length; i++) 
  { 
    if (array[i].indexOf(str) >= 0)
        return true;
  } 
  return false;
} 
if ( inArray("Island", ["Hello","Hello World","Have","Island"] ) 
{ 
document.write("Yes"); 
} 
</script> 
</body> 
</html> 
```

# java - 类路径、编译和使用 Ant 运行？

> ID：10605990
> 
> 赞同：3
> 
> 时间：2012-05-15T17:38:55.890
> 
> 标签：java, ant, junit, classpath

我对 Ant 完全陌生，需要在我的类路径中添加几个 jar，编译几个 .java 文件，并运行一个 junit 测试，所有这些都在 Ant 中。我一直在看一些在线教程和手册，但似乎无法理解整个 xml 编写过程。

所有之前编写的代码都驻留在一个名为`XXX`.

在`XXX`有两个 jars 我需要添加到我的类路径中`export CLASSPATH=$CLASSPATH:jar1:jar2`，两个我编译的 java 文件`javac *.java`，其中一个包含我运行的几个 junit 测试`java org.junit.runner.JUnitCore Tests`。`build.xml`也会住在里面（`XXX`我相信）。

到目前为止，我有以下内容用于编译，尽管我认为还有很多缺失。

```
<?xml version="1.0"?>
<project name="EtlAutomation" default="compile" basedir=".">

    <property name="src" value="${basedir}"/>

    <target name="compile">
        <!-- Compile .java files -->
        <javac srcdir="${src}" destdir="${src}"/>
    </target>

</project> 
```

我还需要添加什么才能`*.java`在当前目录中编译？我怎样才能运行`export CLASSPATH`命令，最后是`junit`表扬？

我不是要求任何人编写我的代码，但我将不胜感激。如果有人知道适用于 unix 环境的良好初学者教程，那就太棒了。我是蚂蚁的初学者，所以我会尽我所能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:47:40.510

[这](https://stackoverflow.com/questions/722774/getting-ant-javac-to-recognise-a-classpath)是解决此问题的先前问题。这可能对你有用：

```
<project name="EtlAutomation" default="compile" basedir=".">
    <property name="src" value="${basedir}"/>
    <path id="compile.classpath">
        <fileset dir="./">
            <include name="*.jar"/>
        </fileset>
    </path>
    <target name="compile" >
        <javac destdir="${src}" srcdir="${src}">
            <classpath refid="compile.classpath"/>
        </javac>
    </target>
    <target name="run" depends="compile">
        <junit>
           <classpath refid="compile.classpath" />
               <test name="TestExample" />
        </junit>
    </target>
</project> 
```

# jquery - Best way to pass a jQuery array to a C# page

> ID：10605995
> 
> 赞同：0
> 
> 时间：2012-05-15T17:39:06.110
> 
> 标签：jquery, asp.net, json

I have a page where a user submits multiple keywords before finding resources based on those keywords. I have a jQuery array that loads all the keywords and I want to pass that jQuery array to the next results page. I'm trying to figure out the best method to do this. I've tried putting the array into the string and passing it through the URL, but was unable to properly URLEncode it. I've also tried using window.location but this has been not working well either. This seems simple but I'm going in circles. It is a one dimensional array that I want to hold in memory then pass it to the next aspx page. What's the best method? Below is my code as it stands now which is not correct.

```
//When get resources button clicked show current array values
$("#nihSearch_btnResults").click(function () {
    //get number of tabs in the holder
    gettabs = $("div#keys > div.tab").size();
    output = "";
    //loop through the tabs        
    $("div.tab span").each(function () {
        //get the text of the tab
        var kw = $(this).text();
        //add it to the array
        keywords.push(kw);
    });

    var jsonstring = JSON.stringify(keywords);
    alert(jsonstring);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:03:12.573

You can post the client side data to server using `$.ajax` method and asp.net server side `web-method`

Here's the code which I had implemented
[http://blog.nitinsawant.com/2011/09/draft-sending-client-side-variables-to.html](http://blog.nitinsawant.com/2011/09/draft-sending-client-side-variables-to.html)

```
 //js code to post data to server
         var jsonData = "{'jsonData':'" + JSON.stringify(keywords) + "'}";//create string representation of the js object
         $.ajax({
            type: "POST",
            url: 'Test.aspx/AcceptData',
            data: jsonData,
            contentType: "application/json; charset=utf-8",
            dataType: ($.browser.msie) ? "text" : "json",
            success: function(msg) {
                //call successfull
                var obj = msg.parseJSON();
                alert(obj.d); //d is data returned from web services

                //The result is wrapped inside .d object as its prevents direct execution of string as a script
            },
            error: function(xhr, status, error) {
                //error occurred
                alert(xhr.responseText);
            }
        }); 
```

web method:

```
//C# code
[System.Web.Services.WebMethod]
 public static string AcceptData(object jsonData)
 {
     Customer newCust =(Customer)JsonConvert.DeserializeObject(jsonData.ToString(),typeof(YourCustomClass));
     return "Server response: Hello "+newCust.FirstName;
 } 
```

Regards
Nitin

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:59:02.530

我能够通过 URL 做到这一点。我将数组转换为字符串，用下划线替换所有空格，然后使用 window.location 移动到下一页。在那里，我使用 C# 页面中的 Page_Load 将下划线替换回空格，并使用“split”重新创建数组。

jQuery

```
//convert array into a string
    var keystring = keywords.join(",");
    //make keystring all lower case and replace spaces with hyphens
    keystring = keystring.toLowerCase().replace(/ /g, '_');
    //Send it to the next page.
    window.location = "Results.aspx?kws=" + keystring; 
```

C＃

```
protected void Page_Load(object sender, EventArgs e)
    {
        //get keywords from URL
        string urlkeys = Request.QueryString["kws"];
        //replace dashes with spaces
        urlkeys = urlkeys.Replace("_", " ");
        //split back into an array
        string[] arr = urlkeys.Split(',');            
    } 
```

# maven - Permission error in maven 3

> ID：10605996
> 
> 赞同：1
> 
> 时间：2012-05-15T17:39:23.223
> 
> 标签：maven, maven-3, permission-denied, maven-surefire-plugin

I created a sample project with just a simple testng dependency. When i tried to compile it through terminal (via mvn compile), i got this error.

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.axatrikx.Test.AppTest
Exception in thread "ThreadedStreamConsumer" org.apache.maven.surefire.util.NestedRuntimeException: null; nested exception is org.apache.maven.surefire.report.ReporterException: Unable to create file for report: /home/amalbose/Workspace/Test/target/surefire-reports/com.axatrikx.Test.AppTest.txt (Permission denied); nested exception is java.io.FileNotFoundException: /home/amalbose/Workspace/Test/target/surefire-reports/com.axatrikx.Test.AppTest.txt (Permission denied)
org.apache.maven.surefire.report.ReporterException: Unable to create file for report: /home/amalbose/Workspace/Test/target/surefire-reports/com.axatrikx.Test.AppTest.txt (Permission denied); nested exception is java.io.FileNotFoundException: /home/amalbose/Workspace/Test/target/surefire-reports/com.axatrikx.Test.AppTest.txt (Permission denied)
java.io.FileNotFoundException: /home/amalbose/Workspace/Test/target/surefire-reports/com.axatrikx.Test.AppTest.txt (Permission denied)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:209)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:160)
    at java.io.FileWriter.<init>(FileWriter.java:90)
    at org.apache.maven.surefire.report.AbstractFileReporter.testSetStarting(AbstractFileReporter.java:74)
    at org.apache.maven.surefire.report.MulticastingReporter.testSetStarting(MulticastingReporter.java:44)
    at org.apache.maven.surefire.report.TestSetRunListener.testSetStarting(TestSetRunListener.java:104)
    at org.apache.maven.plugin.surefire.booterclient.output.ForkClient.consumeLine(ForkClient.java:94)
    at org.apache.maven.plugin.surefire.booterclient.output.ThreadedStreamConsumer$Pumper.run(ThreadedStreamConsumer.java:67)
    at java.lang.Thread.run(Thread.java:679)

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-jar-plugin:2.3.2:jar (default-jar) @ Test ---
[INFO] 
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ Test ---
[INFO] Installing /home/amalbose/Workspace/Test/target/Test-0.0.1-SNAPSHOT.jar to /home/amalbose/.m2/repository/com/axatrikx/Test/0.0.1-SNAPSHOT/Test-0.0.1-SNAPSHOT.jar
[INFO] Installing /home/amalbose/Workspace/Test/pom.xml to /home/amalbose/.m2/repository/com/axatrikx/Test/0.0.1-SNAPSHOT/Test-0.0.1-SNAPSHOT.pom
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.328s
[INFO] Finished at: Tue May 15 23:03:42 IST 2012
[INFO] Final Memory: 5M/245M
[INFO] ------------------------------------------------------------------------ 
```

I am not using any surefire plugin. Here is my pom file.

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.axatrikx</groupId>
    <artifactId>Test</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>Test</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.testng</groupId>
            <artifactId>testng</artifactId>
            <version>6.5.2</version>
        </dependency>
    </dependencies>
</project> 
```

Please help me resolve this issue.

EDIT: I have given 777 permission on the entire workspace

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:17:40.060

First make sure you are using [maven-surefire-plugin](http://maven.apache.org/pom.html#Plugin_Management) in the correct version which doesn't look like:

Put into your pom:

```
 <build>
    ..
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.12</version>
        </plugin>
        ..
      </plugins>
    </pluginManagement>
   ..
 </build> 
```