# StackOverflow 问答 11593000-11593999

# android - 从 android 客户端调用 php web 服务？

> ID：11593001
> 
> 赞同：1
> 
> 时间：2012-07-21T14:29:23.427
> 
> 标签：android, web-services

我对 android 编程非常陌生，我尝试使用 HttpClient 从 android 调用 php web 服务。但是，当应用程序运行时，它会停止说“不幸的是 ServiceTest 已停止”并终止。以下是我的代码。

```
public class ServiceTestActivity extends Activity {
private Button btn;
private TextView txt;
String result = ""; 
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btn = (Button) findViewById(R.id.button1);
    txt = (TextView) findViewById(R.id.txt_name);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            callWebErvice("http://localhost/mvc/login/test");

        }
    });

}

public void callWebErvice(String serviceURL) {

        HttpClient httpclient = new DefaultHttpClient();  
        HttpGet request = new HttpGet(serviceURL);  

        ResponseHandler<String> handler = new BasicResponseHandler();  
        try {  
            result = httpclient.execute(request, handler); 
            txt.setText(result);
        } catch (ClientProtocolException e) {  
            e.printStackTrace();  

        } catch (IOException e) {  
            e.printStackTrace();  

        }  
        httpclient.getConnectionManager().shutdown();  

        Log.i("my result", result);  
    } // end callWebServe
} 
```

任何人都可以找出原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:51:32.917

在没有任何 logcat 的情况下很难找出代码中的错误，我宁愿建议您使用这个答案，这肯定会对您有所帮助。

```
 InputStream retrieveStream(String url) {

        DefaultHttpClient client = new DefaultHttpClient();

        HttpGet getRequest = new HttpGet(url);

        try {

            HttpResponse getResponse = client.execute(getRequest);
            final int statusCode = getResponse.getStatusLine().getStatusCode();

            if (statusCode != HttpStatus.SC_OK) {
                Log.w(getClass().getSimpleName(), "Error " + statusCode
                        + " for URL " + url);
                return null;
            }

            HttpEntity getResponseEntity = getResponse.getEntity();
            return getResponseEntity.getContent();

        } catch (IOException e) {
            getRequest.abort();
            Log.w(getClass().getSimpleName(), "Error for URL " + url, e);
        }

        return null;

    } 
```

并使用此代码将输入流转换为字符串可读数据格式。

```
BufferedReader r = new BufferedReader(new InputStreamReader(retrieveStream("YOU URL")));
StringBuilder total = new StringBuilder();
String line;
while ((line = r.readLine()) != null) {
    total.append(line);
} 
```

谢谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:12:47.450

我们不应该在 UI 线程上执行三种类型的操作。

1.  网络运营。
2.  数据库操作
3.  文件操作。

从您的代码中，我可以看到您正在 UI 线程上执行网络操作，它肯定会导致您进入 ANR（应用程序无响应）。

每当应用程序发生 ANR 时，android 就会终止应用程序。

您将不得不使用工作线程来执行网络操作。

# php - 我怎么能去实现像谷歌阅读器中使用的文件夹树之类的东西？

> ID：11593004
> 
> 赞同：0
> 
> 时间：2012-07-21T14:29:57.030
> 
> 标签：php, mysql, ajax, rss

我正在建立一个网站，用户可以在其中创建一个帐户并将 RSS 提要添加到他们的个性化用户页面。用户可以使用网络表单重新安排他们的提要顺序。但如果他们可以使用某种 ajax 文件夹树（如 Google Reader）来组织他们的提要，我会更喜欢它。

*（如果你不熟悉谷歌阅读器界面，这里是截图——http: [//goo.gl/TkG6m](http://goo.gl/TkG6m)）

目前我的桌子是这样设置的......

用户

用户 ID | 用户名 | 电子邮件地址 | 密码

饲料

feed_id | 饲料名称 | feed_url | 饲料订单 | feed_owner

我不会讲太多细节。但是，基本上，“feed_owner”的值对应于特定的“user_id”。“feed_order”决定了提要在用户页面上显示的顺序——默认情况下，在用户指定之前它们没有任何价值（因此它们只是按字母顺序显示）。

我不知道从这里去哪里。

我不是在寻找一些魔法教程（虽然，如果有的话我会很高兴）。我只需要一些帮助来确定实施这种类似于 Google Reader 的文件夹树用户提要的攻击计划。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:04:06.013

听起来您想要带有 dnd 插件的 jstree。看看[http://www.jstree.com/documentation/dnd](http://www.jstree.com/documentation/dnd)，尤其是底部的仅重新排序演示。

第一步是让您的提要显示在 jstree 中。只需按照文档进行操作，就可以了。

为了让生活更轻松，请考虑将每个元素的 id 设置为 feed_id。这使得保存更改更容易，因为您可以使用`$(elem).attr("id")`

要管理订单，您可以绑定一个函数`drag_finish`，从 dom 中获取订单并使用 AJAX 更新数据库。

# ruby-on-rails - 在 Webrick 服务器上运行的 Rails 应用程序中的调试错误

> ID：11593008
> 
> 赞同：1
> 
> 时间：2012-07-21T14:30:27.997
> 
> 标签：ruby-on-rails, debugging, gem, webrick, ruby-debug

我正在 webrick 服务器上运行 Rails 应用程序，并希望在控制台中向我显示错误消息。我安装了调试器`'gem install debugger'`，安装过程没有出现故障，但是当我通过输入重新启动服务器时`rails s --debugger`，我得到了：

```
You need to install ruby-debug to run the server in debugging mode. With gems, use 'gem install ruby-debug' 
```

因此，我尝试安装 ruby​​-debug gem，但出现以下错误：

错误：安装 ruby​​-debug 时出错：错误：无法构建 gem 原生扩展。

```
 /Users/Me/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
```

还不能处理 1.9.x *** extconf.rb 失败 ***

我的问题是：安装出了什么问题？其次，让我向我显示错误消息的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T16:48:10.237

当然我迟到了，但对于任何坚持这一点的人来说，我遇到了同样的问题并通过将“gem'debugger'”添加到gemfile并运行捆绑更新来解决它

# php - 从表格中抓取表单数据以格式化电子邮件

> ID：11593015
> 
> 赞同：0
> 
> 时间：2012-07-21T14:31:51.717
> 
> 标签：php, html

我有一个表格表单，我需要从中获取数据并对其进行格式化，以便我可以通过 html 电子邮件将其发送并使其可读。我有多个像这样的表格以及单独的文本和复选框字段的混合。我需要一个脚本，它可以读取表格中的数据以及单独的文本字段和复选框，并将其格式化为 html 电子邮件。

所以 1）我需要一种方法来读取输入到表格中的数据，并在读取后将其格式化为电子邮件

2）我怎样才能设置脚本来判断它何时被击中表格以及何时它只是在一个字段上。

```
 <!----------------Lone feilds--------------------->

            <label for="name_insured">Named Insured(s):
        <input type="text" name="name_insured" size="74" />
        </label>

        <label for="mailing_address">Mailing Address:
        <input type="text" name="mailing_address" size="74"/>
        </label>

            <!------------Check boxes-------------------------->
            <input type="checkbox" name="NATA_NBAA_HAI_AOPA_OTHER_member" value="yes"/>Yes

        <input type="checkbox" name="NATA_NBAA_HAI_AOPA_OTHER_member" value="no"/>No

    <input type="checkbox" name="NATA_NBAA_HAI_AOPA_OTHER_member" value="other"/>Other

    <!------------Table------------------------>
    <table>
        <tr>
            <th>Pilots Names</th>
            <th>Birth Date</th>
            <th>CML</th>
            <th>ATP</th>
            <th>ME</th>
            <th>Total Time</th>
            <th>Multi-Eng</th>
            <th>Complex</th>
            <th>Turbine</th>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
        <tr>
            <td><input type="text" name="pilot_name" /></td>
            <td><input type="text" name="birth_date" size="10"/></td>
            <td><input type="checkbox" name="CML" value="yes"/></td>
            <td><input type="checkbox" name="ATP" value="yes"/></td>
            <td><input type="checkbox" name="ME" value="yes"/></td>
            <td><input type="text" name="total_time" size="5"/></td>
            <td><input type="text" name="multi_eng" size="5"/></td>
            <td><input type="text" name="complex" size="5"/></td>
            <td><input type="text" name="turbine" size="5"/></td>
        </tr>
    </table> 
```

这是我现在拥有的脚本，但它只在很长的一行中打印数据，并且对于表中的数据，它们具有相同的名称，因此它会覆盖具有相同名称的最后一个条目。我曾想过在每个具有相同名称的字段后加上数字，但仍然很难阅读。

```
foreach( $_POST as $name=>$value){  
         $emailMsg .=  "<b>" .  htmlspecialchars(var2Readable($name)) . ': ' . "</b>" . htmlspecialchars(clean4Email($value)) . "<br />
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:43:39.113

不确定这是否是您要查找的内容，但如果您想获取所有复选框和文本字段的值，您必须给它们一个以 [] 结尾的名称。例如。name="pilot_name[]" name="turbine[]"

这将为您提供一个包含所有已发布的飞行员姓名、涡轮机等的数组。现在可以在 for 循环中使用增量变量进行迭代。

# gwt - ScrollPanel 中的 GWT Grid 丢失最后几行

> ID：11593016
> 
> 赞同：-1
> 
> 时间：2012-07-21T14:31:55.770
> 
> 标签：gwt

我有一个 DockLayoutPanel，我有一个 FlowPanel，其中有一个 HTML（只是一个标题）和一个包含 FlexGrid 的 ScrollPanel。

这一切都按预期工作，但 ScrollPanel 太大而无法在窗口中看到。它在那里，但你看不到底部箭头（它在浏览器的底部）。我知道所有数据都在那里：我可以执行 Ctrl-A，将其粘贴到记事本中并查看所有内容，但我无法让 GWT 显示整个滚动条。

我已经尝试过 Firefow 13.0.1 和 IE 9。

作为一个实验，我将 HTML 从 FlowPanel 中取出（只留下 ScrollPanel），一切都按预期工作。不知道这实际上告诉我什么......

任何想法如何让我的可滚动 FlexGrid 带有非滚动标题？

## 更新

我找到了一个解决方案，我很感激评论它可能有多好/坏/其他。

我已经用第二个 DockLayoutPanel 替换了 FlowPanel。我的标题 HTML 进入内部 DockLayoutPanel 的北部和中心的 ScrollPanel。工作正常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:09:23.417

如果您想要一个带有固定标题的表，您应该考虑使用 DataGrid 类。

# javascript - 加载选项卡内容时如何显示加载图像？

> ID：11593019
> 
> 赞同：0
> 
> 时间：2012-07-21T14:32:11.840
> 
> 标签：javascript, jquery

我有一个带有三个面板的 tabcontainer，里面有 gridview。当我用户点击选项卡时，gridview 被加载。我想在加载gridview之前，应该显示一个img gif，并且应该在网格完全加载后隐藏。为此，我将代码编写为：

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeBehind="example.aspx.cs"
    Inherits="example" %>

<%@ Register Assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    Namespace="System.Web.UI" TagPrefix="asp" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">

    <script type="text/javascript">

        $(function() {

        $("#mytab").mytab({
                ajaxOptions: {
                    type: 'POST',
                    data: postData,
                    beforeSend: function() {
                        $('#loader').show();
                    },
                    complete: function() {
                        $("#loader").hide();
                    }
                }
            });
        });

</script>

</head>
<body>
    <form id="form2" runat="server">
    <iframe id="iFrame2" runat="server" height="2px" width="2px"></iframe>
        <asp:UpdatePanel ID="UpdatePanel2" runat="server">
    <ContentTemplate>
    <div>
        <asp:ScriptManager ID="ScriptManager2" runat="server" EnablePartialRendering="true">
        </asp:ScriptManager>

    </div>
  <asp:Panel ID="loader" runat="server" Wrap="true" CssClass="body"  >
                    <table cellpadding="5" cellspacing="5" style="width:322px; height:245px; border:1">
                        <tr>
                            <td style="width:322px; height:245px; border:1">
                                <asp:Image ID="Image1" Width="322px" Height="245px" BorderWidth="0" runat="server" ImageUrl="Images/loading.gif" />
                            </td>
                        </tr>
                    </table>
                </asp:Panel>

       <cc1:TabContainer ID="mytab" runat="server"  Width="100%"
                                Visible="true" AutoPostBack="true" >
                                <cc1:TabPanel runat="server"   HeaderText="application" ID="TabPanel1" 
                                    >
                                    <ContentTemplate>
                                    <asp:Panel ID="Panel1" runat="server">
                                        <table class="outline-tabs">
                                            <tr class="pagination-row">

                                            </tr>
                                            <tr>
                                                <td>
                                                    <asp:UpdatePanel ID="UpdatePanel3" runat="server">
                                                        <ContentTemplate>
                                                            <asp:GridView ID="GridView1" runat="server" CssClass="tblGrid" AllowSorting="True">

                                                    </asp:GridView>
                                                        </ContentTemplate>
                                                    </asp:UpdatePanel>
                                                </td>
                                            </tr>

                                        </table>
                                    </asp:Panel>

                                    </ContentTemplate>
                                </cc1:TabPanel>

            </ContentTemplate>
    </asp:UpdatePanel>
    </form>
</body>
</html> 
```

但是当我运行应用程序时，我得到一个错误：

`Microsoft JScript runtime error: Object expected`

上面的代码有什么问题，任何文件都丢失了，因为我使用的是 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:25:46.807

啊，我明白了。示例代码使用`tabs`而不是`mytab`. 这意味着示例代码使用 jquery-ui（您可以在此处找到它：http: [//jqueryui.com/](http://jqueryui.com/)）。

对于**选项卡**，您可以在此处找到文档（[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)单击链接“查看源代码”）。

因此，使用 firebug 或 webinspector 查看*您*编译的源代码，并查找 jquery、jquery-ui 和所有源文件，如 jquery-ui 的图像和 css。如果没有实现 -> 获取源代码。

在此之后，您应该能够运行您的代码。

如需更多帮助，请发布您的已*编译（！）*源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:24:25.637

试试这个，而不是你的...

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
$(document).ready(function() {
$("#mytab").mytab({
                ajaxOptions: {
                    type: 'POST',
                    data: postData,
                    beforeSend: function() {
                        $('#loader').show();
                    },
                    success: function(data) {
                      console.dir(data)
                    },
                    error: function(error) {
                      console.dir('ERROR: ' + error)
                    }
                    complete: function() {
                        $("#loader").hide();
                    }
                }
            });
})
    </script> 
```

使用 console.dir(); 您在 chrome 或 firebug 中跟踪传入的数据对象。即不是一个好的开发浏览器。

希望这可以帮助。

# python - Python 中用于剖析 IP 的正则表达式

> ID：11593022
> 
> 赞同：0
> 
> 时间：2012-07-21T14:32:17.060
> 
> 标签：python, regex

我目前正在尝试为我的 Bind9 服务器编写任务脚本。目标是让用户按以下格式输入 IP 地址：

```
192.168.90.150 
```

然后，我希望 Python 获取该 IP 地址并将其分解为 4 个不同变量中的 4 个不同分组

```
192.168.90.150 would become...

first  = 192 
second = 168
third  = 90
fourth = 150 
```

我假设这样做的“行业标准”方式是使用正则表达式。我尝试使用以下搜索字符串来识别由句点分隔的 1-3 个数字字符的分组。以下没有奏效。

```
ipaddy = raw_input('Enter IP address: ')

failsearch1 = re.search(r'\d+\.')
failsearch2 = re.search(r'\d\.')
failsearch3 = re.search(r'(\d)+\.')

for x in ipaddy:
    a = search.failsearch1(x)
    b = search.failsearch2(x)
    c = search.failsearch3(x)
    if a or b or c:
        print('Search found') 
```

上面代码的输出什么都没有。

我还尝试了这些搜索字符串的其他几种变体。有谁知道如何根据时段之间的分隔将典型的 IP 地址（192.168.10.10）转换为 4 个不同的分组？

任何意见，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T14:36:10.257

验证： [如何在 Python 中验证 IP 地址？](https://stackoverflow.com/questions/319279/how-to-validate-ip-address-in-python)

+加号

> 第一，第二，第三，第四 = str(ipaddy).split('.')

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T14:36:19.500

如果您有理由确定输入将是点形式的 IPv4，您甚至不需要正则表达式：

```
assert possible_ip.count(".") == 3
ip_parts = possible_ip.split(".")
ip_parts = [int(part) for part in ip_parts]
first, second, third, fourth = ip_parts 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T14:39:35.593

您可以只使用内置的 str 函数。

```
try:
    first, second, third, fourth = [int(s) for s in some_text.split('.')]
except ValueError as e:
    print 'Not 4 integers delimited by .'
if not all (0 <= i <= 254 for i in (first, second, third, fourth)):
    print 'Syntax valid, but out of range value: {} in "{}"'.format(i, some_text) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T14:48:02.733

```
def validate_and_split_ip(ip):
    parts = ip.split('.')
    if len(parts) != 4:
        return None

    for part in parts:
        if not part.isdigit() or not 0<=int(part)<=255:
            return None
    return [int(part) for part in parts] 
```

测试：

```
>>> validate_and_split_ip('123.123.0.255')
[123, 123, 0, 255]
>>> validate_and_split_ip('123.123.0.256') # Returns None
>>> validate_and_split_ip('123.123.123.a') # Returns None 
```

然后你有一个列表而不是 4 个变量，这更 Pythonic 和更清洁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T14:56:29.183

制作一个字节列表：

```
>>> [ byte for byte in '192.168.90.150'.split('.') ]
['192', '168', '90', '150'] 
```

# javascript - 用 javascript 更改 jquery masonry css

> ID：11593028
> 
> 赞同：0
> 
> 时间：2012-07-21T14:33:24.957
> 
> 标签：javascript, jquery, html, css, jquery-masonry

我正在尝试动态更改 jquery masonry 插件框的 css 属性。

本质上，我要让盒子展开，我有这段代码，但它没有产生任何结果。

```
$container.click(function(){
    var elem = document.getElementById($container);
    elem.style.width="500px";
}); 
```

当我单击它时，我希望块的宽度会更改为 500px，但事实并非如此。

任何有关通过 javascript 动态更改 css 的见解都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:38:17.917

所有你需要的是：

```
$(this).css('width', '500px'); 
```

在“点击”处理程序中。（假设“容器”是您要更改其大小的盒子。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:39:07.633

将处理程序内部更改为

```
 $container.css({width:"500px"}); 
```

# magento - Magento CMS 主页 404 页面未找到 1

> ID：11593029
> 
> 赞同：0
> 
> 时间：2012-07-21T14:33:46.623
> 
> 标签：magento, content-management-system, http-status-code-404

我在这个上扯掉我的头发！我正在尝试为我的 Magento 商店首页使用 CMS 页面，但我不断收到“404 Not Found 1”页面（“哎呀，我们的坏...”），但是，我可以通过 url 直接访问 CMS 页面-> *domain-2.com/d2-home*

我在 Magento 的 CMS -> Pages 部分设置了一个自定义主页

Magento 1.7

```
Title = "d2-Homepage"
URL Key = "d2-home"
Store view = "English -> Store 2 -> Domain 2 
```

在我的系统 -> 配置 -> Web

```
Default Web URL = "d2-home"
CMS Home Page = "d2-Homepage" 
```

因为我对 2 个商店使用相同的 Magento 环境，所以我的 .htaccess 文件是

```
SetEnvIf Host www\.domain-1\.com MAGE_RUN_CODE=domain_1
SetEnvIf Host www\.domain-1\.com MAGE_RUN_TYPE=website
SetEnvIf Host ^domain-1\.com MAGE_RUN_CODE=domain_1
SetEnvIf Host ^domain-1\.com MAGE_RUN_TYPE=website

SetEnvIf Host www\.domain-2\.com MAGE_RUN_CODE=domain_2
SetEnvIf Host www\.domain-2\.com MAGE_RUN_TYPE=website
SetEnvIf Host ^domain-2\.com MAGE_RUN_CODE=domain_2
SetEnvIf Host ^domain-2\.com MAGE_RUN_TYPE=website 
```

笔记：

我已经尝试清除 chache、索引等。似乎没有任何效果

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:56:57.010

`Default Web URL`必须设置为`cms`. 然后`CMS Home Page`选择您的 CMS 页面。还要确保您在正确的配置范围内进行这些更改。

# delphi - “每个文件一个类”规则是否存在一些特定于 Delphi 的问题？

> ID：11593034
> 
> 赞同：6
> 
> 时间：2012-07-21T14:34:49.197
> 
> 标签：delphi, delphi-7

旧标题：每个单元有多少个班级是可取的？

我的问题是针对德尔福的。我认为在 Java 和 C# 世界中，每个类通常有一个文件是一种相当普遍的做法。我认为这也是在 Delphi 中遵循的一个很好的规则，因为在 Delphi 中，如果一个单元中有多个类，则私有成员并不是真正私有的。

所以我很惊讶地听到两个不同的高级（可能比我更有经验）程序员告诉我我的代码划分太多了。其中一位告诉我不要羞于在一个单元中安排 5-6 个班级。

我不知道的“每个模块一个类”规则是否存在一些问题，可以保证和解释这些程序员的反应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:04:40.320

这取决于。没有确切的规则可以遵循。通常，您需要按**逻辑、公共依赖**或更好地理解**业务**功能来将类分组。

例如，如果你有很多小的*helper*、*adiacent*、*互补*类，那么有理由将它们全部放在一个单元中。就像 Borland 在 DB.pas 单元中所做的那样。那里的所有通用数据库内容：TDataSet、TDataSource、TField 等...

表单，即 TForm 后代 Borland 推荐每个单元一个，因为 dfm 资源加载等...

通常当你写“使用 FOO;”时 意味着编译器包含来自 FOO 的所有内容。您可以访问类、常量、类型等......所以，*划分但保持理性是好的*。

在最新版本的 Delphi 中，单元被视为[命名空间](https://stackoverflow.com/questions/2100160/namespaces-in-delphi)。您可以更好地组织代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T14:39:58.733

不知道你说的模块是什么意思。

Java 要求每个文件有一个公共类，并且类名必须与文件名匹配。没有如果，ands，或buts。您可以在该文件中包含其他包私有或私有方法，但只有一个公共类。

如果“模块”对您来说意味着“包”，那么我会说一个包中有多个类是很常见的。没有规范；看看JDK本身就知道了。`java.util`、`java.lang`、`java.sql`和中有许多类`javax.swing`。

除了这两个，我不知道你或所谓的“高级程序员”指的是什么。我同意任何事情都可以做得过分，不应该盲目遵循教条规则。

但是分解是一门计算机科学——不，是解决问题的——基础。忽视它比过度使用它更常见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:06:38.603

一个单元一个班太严格了。有时类是相关的，因此它们可以合并为一个单元。

受保护变量和私有变量的后门问题可以通过使用 strict 指令来解决：

```
type
  TClass1 = class 
  private
    FField1 : Integer;
  strict private
    FField2 : Integer;
  end;

  TClass2 = class 
  public
    procedure MessWithClass1;
  end;

implementation
  procedure TClass2.MessWithClass1;
  var
    c1 : TClass1;
  begin
    c1.FField1 := 1;
    c1.FField2 := 2;   // Fails!
  end; 
```

# search - ElasticSearch 初学者指南

> ID：11593035
> 
> 赞同：221
> 
> 时间：2012-07-21T14:34:52.993
> 
> 标签：search, full-text-search, elasticsearch

没有任何关于 ElasticSearch 的书籍（据我所知），而且[http://www.elasticsearch.org/guide/](http://www.elasticsearch.org/guide/)似乎只包含参考资料。

任何好的初学者指南或教程，也许是通过例子来推荐，特别是在不同的映射和索引策略方面？

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-08-01T21:08:00.877

**编辑（2015 年 4 月）：**

As many have noticed, my old blog is now defunct. Most of my articles were transferred over to the Elastic blog, and can be found by filtering on my name: [https://www.elastic.co/blog/author/zachary-tong](https://www.elastic.co/blog/author/zachary-tong)

To be perfectly honest, the best source of beginner knowledge is now [Elasticsearch - The Definitive Guide](https://www.elastic.co/guide/en/elasticsearch/guide/master/index.html) written by myself and Clinton Gormley.

It assumes zero search engine knowledge and explains information retrieval first principals in context of Elasticsearch. While the reference docs are all about finding the precise parameter you need, the Guide is a narrative that discusses problems in search and how to solve them.

Best of all, the book is OSS and free (unless you want to buy a paper copy, in which case O'Reilly will happily sell you one :) )

**Edit (August 2013):**

Many of my articles have been migrated over to the [official Elasticsearch blog](http://elasticsearch.org/blog/), as well as new articles that have not been published on my personal site.

**Original post:**

I've also been frustrated with learning ElasticSearch, having no Lucene/Solr experience. I've been slowly documenting things I've learned at my blog, and have four tutorials written so far:

So I don't have to keep editing, [all future tutorials on my blog can be found under this category link.](http://euphonious-intuition.com/category/elasticsearch/)

And these are some links that I have bookmarked, because they have been incredibly helpful in one way or another:

*   [Thinking through and debugging problems with your query](http://elasticsearch-users.115913.n3.nabble.com/I-am-tired-of-continuously-trying-to-override-the-default-analyzer-and-tokanizer-settings-tp3350150p3354293.html)
*   [Another example of complicated mapping (ngram, synonyms, phonemes)](http://elasticsearch-users.115913.n3.nabble.com/help-needed-with-the-query-tp3177477p3178856.html)
*   [Searching parts of a word](http://blog.avisi.nl/2012/02/22/searching-parts-of-words-with-elasticsearch/)
*   [Fun with ElasticSearch's children and nested documents](http://www.spacevatican.org/2012/6/3/fun-with-elasticsearch-s-children-and-nested-documents/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-26T09:14:41.673

您可以使用此链接了解概述

[http://spinscale.github.com/elasticsearch/2012-03-jugm.html#/1](http://spinscale.github.com/elasticsearch/2012-03-jugm.html#/1)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-26T09:30:21.917

我发现 Elastic Search 是我必须学习的最困难的事情之一，我之前没有使用过 Lucene，而且我发现文档很难理解。

这些是我希望在开始学习之前就知道的事情：

**配置和设置**

我使用 Centos、Mint 和 Ubuntu 将 ELS 配置为在 3 个 VM 上运行。Centos 是迄今为止三者中的最佳选择。

[我按照本指南](http://xenforo.com/community/threads/how-to-basic-elasticsearch-installation-debian-ubuntu.26163/)帮助我进行了设置（它在所有三个发行版上都运行良好）

**索引和类型**

一个索引可以包含多种类型，通过使用类型可以很好地分离属于同一索引内的数据。

**PHP**

我使用 PHP 作为前端，并[使用这个包装器](https://github.com/nervetattoo/elasticsearch)将我的 ELS 安装集成到我的脚本中。

**其他资源**

您问题的另一个答案中的演示非常好，通过它并学习 DSL 查询语法，一旦设置，这就是 ELS 真正强大的地方。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-08-07T08:44:02.367

If you're new to elasticsearch and the “information retrieval” / “fulltext search” in general, my advice would be to check these resources first, before trying out tutorials on specific features:

*   The [*Your Data, Your Search, ElasticSearch*](http://www.slideshare.net/karmi/your-data-your-search-elasticsearch-euruko-2011) presentation from EURUKO 2011
*   The [*ElasticSearch - A Distributed Search Engine*](http://www.infoq.com/presentations/ElasticSearch) talk by Shay Bannon together with [accompanying scripts](https://github.com/kimchy/talks/tree/master/2011/wsnparis)
*   The [*Lucene in Action*](http://www.manning.com/hatcher2/) book (at least the general chapters on the indexing, analysis, tokenization, and constructing queries)

# android - 用 toCharArray 转换字符串会产生不同的字符

> ID：11593040
> 
> 赞同：2
> 
> 时间：2012-07-21T14:35:20.373
> 
> 标签：android, string, arrays

这让我很困惑。我正在抓取 a`String`并将其转换为 a`Char array`但生成的字符与原始字符不同`String`。是什么赋予了？我一次尝试过一个角色，也尝试过`toCharArray()`。结果相同。

输出：

```
07-21 09:58:27.700: V/meh(22907): Loaded String = [C@42126d88

07-21 09:58:27.700: V/meh(22907): Convert to Char = [C@41693070 
```

```
String temp = prefManager_.getString("PrevGameState", "");
Log.v("meh", "Loaded String = " + temp);

pieceStates_ = temp.toCharArray();
Log.v("meh", "Convert to Char = " + pieceStates_.toString()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T14:38:42.650

它输出的值确实不是字符串，而是内存中的指针。可能您没有覆盖该`toString()`方法或有问题。

两个指针不相同的事实并不意味着两个字符串不相等（应该比较`.equals(..)`而不是以任何不同的方式）。

更准确地说，如果`pieceStates_.toString()`打印`[C@41693070`，则`toString`不会被覆盖，Java 不知道如何打印它。同样的事情适用于其他变量。那么Java中的数组类型默认是不可打印的，你应该使用`Arrays.toString(..)`它来实际查看它的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T14:42:26.310

采用 ：

System.out.println("转换为字符 = " + **String.valueOf(pieceStates_)** );

```
String.valueOf(Character_Array) 
```

上面的方法将其转换回 String 对象。

# java - 基于项目有条件地在Android（Eclipse）中包含资源

> ID：11593043
> 
> 赞同：1
> 
> 时间：2012-07-21T14:35:46.700
> 
> 标签：java, android, eclipse, resources

我正在 Eclipse 中构建一个 Android 应用程序，并且有两个基于相同代码库的类似应用程序，一个是“伦敦”，一个是“英国”。要构建每个应用程序，我只需重命名主包并更改 Application 类中的静态 int。应用程序使用此 int 的值来显示正确的 UI、限制用户行为等。

我有两个图标文件，每个应用程序一个：

*   res/drawable-hdpi/icon_london.png
*   res/drawable-hdpi/icon_uk.png

有没有办法根据某种项目配置设置有条件地为应用程序和活动使用正确的图标文件？否则，项目维护会增加，因为每次代码库更改时我都必须更改清单，例如

```
<application
    android:icon="@drawable/icon_london"
    ...
    >

    <activity
        android:name="com.company.MainActivity" 
        android:logo="@drawable/icon_london"
        >
    </activity> 
```

...等等，对于所有的活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:38:50.273

我遇到了类似的问题，最终构建了我的自定义 Ant 脚本来构建应用程序。您可以运行宏或正则表达式来分配一种或另一种资源。

**编辑：**

首先，将 build.xml 添加到项目中：

打开命令提示符并导航到项目目录：

```
android update project --path 
```

然后，您可以覆盖现有的 build.xml，如下所示。

注意：这个 Ant 脚本只是一个例子，我没有测试过：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Example" default="help">
    <property file="local.properties" />
    <property file="ant.properties" />

    <loadproperties srcFile="project.properties" />

    <!-- quick check on sdk.dir -->
    <fail
            message="sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through an env var"
            unless="sdk.dir"/>

    <!-- IMPORT ANT?S BUILD.XML -->
    <import file="${sdk.dir}/tools/ant/build.xml" />

    <property name="app.icon"       value="${icon}" />
    <property name="icon.file"      location="res/drawable/icon.png" />

    <target name="test-release">
      <antcall target="test-pre-release" />
      <antcall target="release" />
    </target>

    <target name="test-pre-release">
      <copy file="${app.icon}" tofile="${icon.file}" overwrite="true"/>
    </target>

</project> 
```

然后，要使用自定义图标构建此项目，请打开命令提示符并转到项目目录：

```
CALL ant -f build.xml test-release -Dicon=path/to/your/icon.png 
```

如前所述，这是一个非常基本的示例。要构建一个好的脚本，您必须学习一点 Ant 语法，但这并不难。

# python - OpenCV DestroyWindow 在 Ubuntu 上不起作用。如何正确关闭窗户？

> ID：11593046
> 
> 赞同：7
> 
> 时间：2012-07-21T14:35:58.903
> 
> 标签：python, ubuntu, opencv, python-idle

在以下代码中，DestroyWindow 或 DestroyAllWindows 无法关闭 ShowImage 打开的窗口。当我试图通过单击关闭按钮关闭它时，窗口暂停。杀掉窗口后，整个IDLE就关闭了。

```
import cv
image = cv.LoadImage("../lena.bmp", 0)
cv.NamedWindow("test")
cv.ShowImage("test", image)
cv.WaitKey()
cv.DestroyWindow("test")  #or cv.DestroyAllWindows() 
```

我在 Ubuntu 12.04 LTS 上使用 OpenCV 2.4.2 和 Python 2.7。

我做错了什么，如何关闭 ShowImage 创建的窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:36:53.820

我相信 cv.WaitKey 应该用一个数字作为参数调用，0 或 n > 0，其中 n>0 指定等待的毫秒数。

cv.WaitKey(0) 将无限期地等待键盘按下，然后返回字符输入。如果您还没有尝试过，按下键盘按钮应该会关闭窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T22:49:55.143

试试这个：

```
c = cv.WaitKey(27)
if c == 27:
   cv.DestroyAllWindows("Test")
   break 
```

# apache - 连接已在 wamp 上重置

> ID：11593047
> 
> 赞同：6
> 
> 时间：2012-07-21T14:36:08.410
> 
> 标签：apache, localhost, wamp

我已经在我的电脑上安装了`wamp`服务器。然后我安装了一个zend应用程序。我把它放在*medaffiliate.com*目录中的`www`目录中。当我通过它访问该目录时，`localhost/medaffiliate.com`它只会显示

```
 The connection was reset 
```

我经历了很多答案，例如 [https://serverfault.com/questions/74313/what-c ​​ould-cause-an-101-error-in-wamp-under-windows-7](https://serverfault.com/questions/74313/what-could-cause-an-101-error-in-wamp-under-windows-7)

他们都在说关门`mysql_close($connect);`。我的`Apache`错误日志显示

```
 [Sat Jul 21 18:35:45 2012] [notice] Parent: child process exited with status 255 -- Restarting.
[Sat Jul 21 18:35:45 2012] [notice] Apache/2.2.17 (Win32) PHP/5.3.4 configured -- resuming normal operations
[Sat Jul 21 18:35:45 2012] [notice] Server built: Oct 24 2010 13:33:15
[Sat Jul 21 18:35:45 2012] [notice] Parent: Created child process 6768
[Sat Jul 21 18:35:45 2012] [notice] Child 6768: Child process is running
[Sat Jul 21 18:35:45 2012] [notice] Child 6768: Acquired the start mutex.
[Sat Jul 21 18:35:45 2012] [notice] Child 6768: Starting 64 worker threads.
[Sat Jul 21 18:35:45 2012] [notice] Child 6768: Starting thread to listen on port 80.
[Sat Jul 21 18:36:21 2012] [notice] Parent: child process exited with status 255 -- Restarting.
[Sat Jul 21 18:36:21 2012] [notice] Apache/2.2.17 (Win32) PHP/5.3.4 configured -- resuming normal operations
[Sat Jul 21 18:36:21 2012] [notice] Server built: Oct 24 2010 13:33:15
[Sat Jul 21 18:36:21 2012] [notice] Parent: Created child process 1140
[Sat Jul 21 18:36:21 2012] [notice] Child 1140: Child process is running
[Sat Jul 21 18:36:21 2012] [notice] Child 1140: Acquired the start mutex.
[Sat Jul 21 18:36:21 2012] [notice] Child 1140: Starting 64 worker threads.
[Sat Jul 21 18:36:21 2012] [notice] Child 1140: Starting thread to listen on port 80.
[Sat Jul 21 18:40:39 2012] [notice] Parent: child process exited with status 255 -- Restarting.
[Sat Jul 21 18:40:39 2012] [notice] Apache/2.2.17 (Win32) PHP/5.3.4 configured -- resuming normal operations
[Sat Jul 21 18:40:39 2012] [notice] Server built: Oct 24 2010 13:33:15
[Sat Jul 21 18:40:39 2012] [notice] Parent: Created child process 7892
[Sat Jul 21 18:40:39 2012] [notice] Child 7892: Child process is running
[Sat Jul 21 18:40:39 2012] [notice] Child 7892: Acquired the start mutex.
[Sat Jul 21 18:40:39 2012] [notice] Child 7892: Starting 64 worker threads.
[Sat Jul 21 18:40:39 2012] [notice] Child 7892: Starting thread to listen on port 80. 
```

我发现其他人在创建与数据库的连接时面临此类问题。我在我的 www 目录上创建了另一个项目并与数据库建立连接。这是工作。但不是我的项目。

我在用`os:window 7\. Apache : 2.2.17, PHP:5.3.4, Mysql : 5.1.53`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-06-06T22:38:46.650

我有一个类似的问题，我无法通过增加超时和内存限制来解决。

经过数小时的反复试验，我终于偶然发现了另一个帖子：[https](https://drupal.org/node/1597820) ://drupal.org/node/1597820 ，它为我解决了这个问题。

将以下内容添加到 httpd.conf 的末尾以将 Apache 堆栈大小增加到 8MB。

```
<IfModule mpm_winnt_module>
   ThreadStackSize 8388608
</IfModule> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T16:22:15.030

我多次遇到此错误，我的解决方案是增加 apache 二进制文件（apache.exe 或 httpd.exe）堆栈大小。您将需要 Visual Studio 来执行此操作，但您可以像我一样使用试用版。你甚至不需要打开它。命令是：

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\amd64>editbin /STACK:8000000 "c:\Program Files (x86)\WAMP\apache\bin\apache.exe" 
```

当然，根据您的环境更改上述路径。

在 Visual Studio 目录 VC/binary/ 中有几个名为 editbin.exe 的实用程序。使用适合您平台的一个或一个一个尝试，直到它起作用（就像我一样）。

# javascript - jQuery - 从数组中删除对象

> ID：11593049
> 
> 赞同：0
> 
> 时间：2012-07-21T14:36:16.483
> 
> 标签：javascript, jquery

我正在尝试从数组中删除一个对象

删除数组[索引]

这是从数组中删除对象但是数组的 .length 属性仍然是 == 1

有任何想法吗？

PS 我正在尝试删除一个问题，例如 topic->questions[question_id]

![在此处输入图像描述](../Images/0a3ad8104068dd031d838812cfb9266e.png)

```
if(topic_array[topic_id] !== 'undefined'){
            if(topic_array[topic_id].questions.length > 0){
                for(var i = 0; i < topic_array[topic_id].questions.length; i++){
                    if(topic_array[topic_id].questions[i].question_id == question_id){
                        delete topic_array[topic_id].questions[i];
                        console.log(topic_array);
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:37:54.787

你不想要`delete`，你想要[`splice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)：

```
topic_array[topic_id].questions.splice(i, 1); 
```

# c# - 从数据库中获取所有表并使用 C#、Linq 查询和实体框架遍历每个表

> ID：11593051
> 
> 赞同：1
> 
> 时间：2012-07-21T14:36:24.470
> 
> 标签：c#, winforms, linq, entity-framework

我有一个带有 12 个表（不包括查找表）的 SQL Server 2012 数据库。我正在使用实体框架并尝试查询。我可以查询表格

```
ClientEntities dc = new ClientEntities();
var query = from client1 in dc.CLIENTTable
            where client1.CLIENT_ID == txtId.Text
            select client1; 
```

以上适用于 1 张桌子，但我需要对所有 12 张桌子都这样做。有没有办法在循环中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:44:09.410

[您可以使用 SqlConnection.GetSchema http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/a2953687-ff78-47a6-9071-ceac64728d9a/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/a2953687-ff78-47a6-9071-ceac64728d9a/)获取表列表

之后用您的查询（成为子查询）迭代此列表

# c++ - OpenGL：在两个元素之间画线

> ID：11593053
> 
> 赞同：4
> 
> 时间：2012-07-21T14:36:34.837
> 
> 标签：c++, qt, opengl, graphics, line

我需要在我创建的两个网格之间画一条线。每个网格都与不同的模型矩阵相关联。我一直在考虑如何做到这一点，我想到了这个：

```
glMatrixMode(GL_MODELVIEW);
glLoadMatrixf(first_object_model_matrix);
glBegin(GL_LINES);
glVertex3f(0, 0, 0); // object coord
glMatrixMode(GL_MODELVIEW);
glLoadMatrixf(first_object_model_matrix);
glVertex3f(0, 0, 0); // ending point of the line
glEnd( ); 
```

但问题是我不能在`glMatrixMode`and`glLoadMatrixf`之间调用`glBegin`and `glEnd`。我还使用着色器和可编程管道，因此在渲染场景时返回到固定管道的想法并不令人兴奋。

你可以吗：

*   准确地建议我如何使用着色器在两个网格（我有它们的模型矩阵）之间画一条线。

或者

*   建议我如何编写类似于上面的代码来绘制一条具有两个网格模型矩阵的线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:56:17.977

通过将每个点与您的模型矩阵之一相乘来计算线的两个点。以下是伪代码。由于您使用的是 Qt，因此您可以使用其内置的数学库来实现此效果。

```
vec3 line_point_1 = model_matrix_object1 * vec4(0, 0, 0, 1);
vec3 line_point_2 = model_matrix_object2 * vec4(0, 0, 0, 1);
// Draw Lines 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:01:48.530

第二个点的位置可以简单地取自model_matrix_object2的w向量。无需乘以 (0,0,0,1)。

这是因为 OpenGL 中的 4x4 矩阵通常是由 3x3 旋转部分和平移向量组成的正交矩阵。然后用 0,0,0,1 填充最后一行。如果您想知道 4x4 矩阵的转换位置，只需在最右边的列中获取向量。

请参阅[给定 4x4 齐次矩阵，我如何获得 3D 世界坐标？](https://stackoverflow.com/questions/4791710/given-a-4x4-homogeneous-matrix-how-can-i-get-3d-world-coords)了解更多信息。

# ios - 终于让我的排行榜上升了，但分数没有出现

> ID：11593054
> 
> 赞同：0
> 
> 时间：2012-07-21T14:36:39.700
> 
> 标签：ios, objective-c, cocos2d-iphone

我终于让我的排行榜出现了。现在我只需要实现我的分数就会弹出。
我的分数保存`NSString`在`NSUserDefaults`名称下`score`。

这是一些代码：

**Game_CenterViewController.h**

```
#import <UIKit/UIKit.h>
#import <GameKit/GameKit.h>
#import "GameCenterManager.h"

@class GameCenterManager;

@interface Game_CenterViewController : UIViewController <UIActionSheetDelegate, GKLeaderboardViewControllerDelegate, GKAchievementViewControllerDelegate, GameCenterManagerDelegate> {
    GameCenterManager *gameCenterManager;
    int64_t  currentScore;
    NSString *currentLeaderBoard;
}

@property (nonatomic, retain) GameCenterManager *gameCenterManager;
@property (nonatomic, assign) int64_t currentScore;
@property (nonatomic, retain) NSString* currentLeaderBoard;
@end 
```

**Game_CenterViewController.m**

```
#import "Game_CenterViewController.h"
#import "AppSpecificValues.h"
#import "GameCenterManager.h"

@implementation Game_CenterViewController
@synthesize gameCenterManager;
@synthesize currentScore;
@synthesize currentLeaderBoard;

- (void)dealloc {
    [gameCenterManager release];
    [currentLeaderBoard release];
    [currentScoreLabel release];
    [super dealloc];
}

#pragma mark - View lifecycle

- (void)viewDidLoad {
    [super viewDidLoad];
    self.currentLeaderBoard = thescore101;
    self.currentScore = score    
    if ([GameCenterManager isGameCenterAvailable]) {
        self.gameCenterManager = [[[GameCenterManager alloc] init] autorelease];
        [self.gameCenterManager setDelegate:self];
        [self.gameCenterManager authenticateLocalUser];
    } else {
        // The current device does not support Game Center.
    }
}

- (void)leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController {
    [self dismissModalViewControllerAnimated: YES];
    [viewController release];
}

- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.gameCenterManager = nil;
    self.currentLeaderBoard = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

目前的分数是我试图输入的地方`NSString`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:10:26.013

*已编辑：我认为将 int 用于 currentScore 会更好。*

这是你想要的？

```
- (void)submitMyScore:(int64_t)score
{

    GKScore *myScoreValue = [[[GKScore alloc] initWithCategory:@"yourCat"] autorelease];
    myScoreValue.value = (int)score;

    [myScoreValue reportScoreWithCompletionHandler:^(NSError *error){
        if(error != nil){
            NSLog(@"Score Submission Failed");
        } else {
            NSLog(@"Score Submitted: %d",(int)score);
        }

    }];
} 
```

所以你应该添加一个`IBAction`

```
- (IBAction)buttonPressed
{
    [self submitMyScore:currentScore];
} 
```

有了这个并将发送我的分数按钮连接到这个 IBAction，您将提交您的分数。

我希望这对你有用。

# php - 创建 EDT（东部夏令时间） - 时间戳

> ID：11593056
> 
> 赞同：0
> 
> 时间：2012-07-21T14:36:52.660
> 
> 标签：php

我尝试使用下面的 php 函数来完成此操作，但是，它返回一个 mounain 时间，时间戳。我想知道是否有人可以帮助我了解我如何更改时区，或者是否有人可以帮助我将其更正为 EDT？

```
date("F j, Y, g:i a"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:42:28.773

您可以使用 date_default_timezone_set() 函数在脚本本身中本地设置它：

[http://php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

或者您可以在 php.ini 文件中更改它，如果您查找以下行：

```
date.timezone 
```

编辑：这里是支持的时区列表，如果你不确定你的应该叫什么：http: [//php.net/manual/en/timezones.php](http://php.net/manual/en/timezones.php)

# javascript - Javascript 中的切换大小写在 IE8 中不起作用

> ID：11593069
> 
> 赞同：0
> 
> 时间：2012-07-21T14:38:37.060
> 
> 标签：javascript, dojo, internet-explorer-8, dom-events, dojox.grid.datagrid

# 代码片段：

```
var role=s[0].Role;// role contains string value 
dijit.byId("editRole").attr("Value",getRoleByName(role));

function getRoleByName(role)
{
    var roleVal;
    alert(role);
    switch(role)
    {
        case 'Basic User' :roleVal='1';break;
        case 'Network Operator' :roleVal='3';break;
        case 'System Administrator' :roleVal='5';break;
        case 'Custom Level 1' :roleVal='11';break;
        case 'Custom Level 2' : roleVal='12';break;
        default: roleVal='1';break;
    }
    return roleVal;
} 
```

当我尝试调用其中包含 switch 语句的 Javascript 方法时，我在 IE8 中遇到错误，但在 Firefox 中工作正常。

开发人员工具中的错误：

```
method Error executing: function(/*Event*/ e){
    // summary:
    // Handler when the user activates the button portion.
    if(this._onClick(e) === false){ // returning nothing is same as true
        e.preventDefault(); // needed for checkbox
    } else if (this.type == "submit" && !this.focusNode.form){ // see if a nonform widget needs to be signalled
        for(var node=this.domNode; node.parentNode/*#5935*/; node=node.parentNode){
            var widget=dijit.byNode(node);
            if(widget && typeof widget._onSubmit == "function"){
                widget._onSubmit(e);
                break;
            }
        }
    }
}TypeError: Object doesn't support this property or method 
```

谁能帮我这个？...如何克服这个问题？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:56:31.167

您显示的错误与以下代码无关。正如 dojotoolkit-src 评论亲切地向您展示的那样，它与*“用户激活按钮部分时的处理程序”功能有关。*

应该解决这个问题

```
 // << Value is all lower case
 dijit.byId("editRole").attr("Value",getRoleByName(role)); 
```

还有一个带有'WTF'的更简洁的编码开关 - 我认为这可能是突出显示你正在尝试的语法 - 或者这些波浪线真的在你的代码中吗？

```
 // What are these back-tilds doing here?
 switch(role)``  
 {
      case 'Basic User'           : return 1
      case 'Network Operator'     : return 3
      case 'System Administrator' : return 5
      case 'Custom Level 1'       : return 11
      case 'Custom Level 2'       : return 12
      default:
           return 1
     // return works as your break does, it stops the switch
} 
```

在修剪过程中说出您的击球问题？试试这个，不是所有的javascript引擎都实现了trim

```
if(typeof String.prototype.trim !== 'function') {
        String.prototype.trim = function() {
                return this.replace(/^\s+|\s+$/g, ''); 
        }
} 
```

# c# - 通过jQuery和Repeater管理Tab Click事件

> ID：11593071
> 
> 赞同：1
> 
> 时间：2012-07-21T14:38:46.437
> 
> 标签：c#, asp.net, c#-4.0, repeater

我有一个中继器，它显示和数据绑定选项卡链接的来源。这是代码：

```
protected void rptTab_ItemBound(Object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Item i = e.Item.DataItem as Item;
        Link hlTabLink = e.Item.FindControl("hlTabLink") as Link;
        hlTabLink.Target = Sitecore.Links.LinkManager.GetItemUrl(i);
        hlTabLink.DataSource = i.Paths.FullPath;
        hlTabLink.Field = "Title";
    }
} 
```

现在这是我的标记：

```
<asp:Repeater ID="rptTab" runat="server" OnItemDataBound="rptTab_ItemBound">
            <ItemTemplate>
                <li id= "liTabTest" runat = "server">
                    <a>
                        <sc:Link ID = "hlTabLink" Field = "scTabLink" onclick = "TabClick()" runat ="server"></sc:Link>
                    </a>
                </li>
            </ItemTemplate>
       </asp:Repeater> 
```

这是 jQuery，它根据选择的项目动态添加 CSS 类：

```
$(document).ready(function () {
    init();
});

function init() {
    $("ul#Tab-labels li").removeClass("tab-label TabbedPanelsTabSelected");
    $("ul#Tab-labels li:first").addClass("tab-label TabbedPanelsTabSelected");
};

function TabClick() {
    alert('test');
}; 
```

现在您可以看到我正在根据选项卡的索引显示 CSS 文件。我还必须在该 jQuery 中添加点击事件。所以基本上有两件事我很困惑：

*   我在 jQuery 中的点击事件没有被调用:(
*   从 jQuery 我必须在点击事件中知道它必须通过哪个页面？所以我必须从代​​码隐藏或什么？就像一个隐藏字段并在其中存储标签页，然后从 jQuery 中取出。

我应该如何解决这个问题？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:33:13.407

对于`sc:Link`，将绑定方法更改为`onClientClick`for `onclick = "TabClick()"`。`OnClick`用于回发服务器方法。

顺便说一句，`sc`前缀是什么？是否有您要添加到页面的用户控件？

# jquery - 指定要在 jquery 中调用的函数

> ID：11593075
> 
> 赞同：2
> 
> 时间：2012-07-21T14:39:03.907
> 
> 标签：jquery

我在 jquery post 文档中遇到了这个片段，但我不确定它的作用

```
$.post("test.php", { "func": "getNameAndTime" },
 function(data){
   console.log(data.name); // John
   console.log(data.time); //  2pm
 }, "json"); 
```

我的想法是 test.php 有一个函数 getNameAndTime()，这是它的含义吗？如果是这样，这是某种 javascript 模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:45:54.133

这意味着，此脚本正在`POST`对 page 进行异步调用`test.php`并传递一个名为`func`value的参数`getNameAndTime`。然后它在一个名为`data`. 我想响应是`JSON`格式的。因此，在`callback`函数中，它访问 JSON 响应中的`name`and`time`部分并调用 console.debug 函数，以便将其打印在 firebug 控制台中。

JSON 可能看起来像这样

```
{
    "name": "Jon",
    "time": "5.30"
} 
```

JSON 中可能还有其他项目。但可以肯定的是，我们的代码正在扩展 a`name`和`time`元素

您可以参考以下资源以更好地了解每个项目的作用

**$.post ：** [使用 HTTP POST 请求从服务器加载数据。](http://api.jquery.com/jQuery.post/)

**JSON** : [Javascript Object Notation](http://en.wikipedia.org/wiki/JSON) - 一种轻量级[的数据交换格式](http://www.json.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:43:46.557

`{ "func": "getNameAndTime" }`是一个JS对象，解析成字符串然后发送到服务器。`test.php`处理 POST 请求，传递给该 servlet 的数据来自`data`. 再看看[`jQuery.post()`](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T14:44:51.830

来自[jQuery 文档](http://api.jquery.com/jQuery.post/)：

> **数据**随请求发送到服务器的映射或字符串。

所以它只是一个到 test.php 的参数映射，test.php 可以通过这个请求提供远程过程调用，使用那个 func 参数。

# php - 如何获得锚点 DOMElement 的值/文本？

> ID：11593082
> 
> 赞同：1
> 
> 时间：2012-07-21T14:39:35.193
> 
> 标签：php

> **可能重复：**
> [如何使用 DomDocument 获取锚文本？](https://stackoverflow.com/questions/4629071/how-to-get-anchor-text-using-domdocument)
> [在 PHP DOM 中获取节点的文本](https://stackoverflow.com/questions/6399924/getting-nodes-text-in-php-dom)

我有一个脚本可以在 DOMDocument 中找到某个类的所有锚标记。我正在寻找回显`<a>"....."</a>`标签中包含的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:01:42.297

您可以使用 XPath 直接访问 DOMText 节点：

```
$xpath = new DOMXPath($dom_document);
$node = $xpath->query('//a/text()')->item(0);
echo $node->textContent; // text 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-21T14:56:33.700

您可以使用 preg_match()。这是一个例子：

```
$link = '<a href="http://www.coursesweb.net" title="www.CoursesWeb.net">www.CoursesWeb.net</a>';
if(preg_match('/\<a([^\>]*)\>(.*?)\<\/a\>/i', $link, $mc)) {
  echo $mc[2];         // www.CoursesWeb.net
} 
```

# entity-framework - Entity Framework 4.1 Poco 类避免多个数据库往返

> ID：11593086
> 
> 赞同：2
> 
> 时间：2012-07-21T14:40:08.743
> 
> 标签：entity-framework, entity-framework-4.1

我有一个使用 EF 4.1 和 Poco 类的 ASP.NET MVC 应用程序。

当我得到多个实体时：

```
var users = db.Users.Where(u=>u.IsActive).ToList();
var transactions = db.Transactions.Where(t=>t.IsActive).ToList();
var customers = db.Customers.Where(c=>c.IsActive).ToList(); 
```

在这种情况下，数据库被击中 3 次？如果是这样，是否有任何方法可以强制 EF 4.1 在 1 次往返中进行这些调用？

我问这个是因为我有一个函数必须得到 14 个实体并更新其他 17 个。所以很高兴知道它在幕后是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T00:02:20.830

在这种情况下，由于没有关系并且涉及多个表，因此在使用 EF 4.1 时必须进行多次行程。这是因为没有办法在这些表之间提供某种 JOIN 来合并多个 SQL 语句。尽管必须进行多次行程，但通过在 DbSet 之间切换同时保留相同上下文（如果可能）在一个连接下进行每次行程仍然相对轻松。

# javascript - 18岁以上加个注意

> ID：11593090
> 
> 赞同：0
> 
> 时间：2012-07-21T14:40:55.887
> 
> 标签：javascript, html, blogs

我有一个成人博客，我想知道是否有一个代码可以放在我的博客上做一些类似警告，询问你是否超过 18 岁或现在离开博客，比如你去[这里看到什么](http://www.reddit.com/r/hottestnsfwpics)

我希望我能管理警告的透明度......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:46:32.687

您可以使用几种不同的语言来实现此效果，例如 jquery、javascript 和 php。下面的链接可以帮助您开始阅读如何通过一些好的信息提示来完成它： [年龄验证](http://www.techerator.com/2010/09/how-to-perform-age-verification-with-jquery-and-cookies-mmm-cookies/)

希望这可以帮助您入门

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:05:07.170

这足以在您的 Tumblr 博客设置中设置**NSFW**（工作不安全）标签：
![在此处输入图像描述](../Images/181fb8fe3a5854197e47fef062a01d9d.png)

# ruby-on-rails - 如何检查准备更新的宝石？

> ID：11593091
> 
> 赞同：13
> 
> 时间：2012-07-21T14:41:00.893
> 
> 标签：ruby-on-rails, ruby, gem

何检查准备更新的宝石，而不更新它们？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-21T14:48:05.803

如果你没有使用 bundler，只需运行`gem outdated`它，它就会给你一个过时的 gem 列表。

输出示例：

```
$ gem outdated                                                                                                                                                                                   
acts_as_tree (2.7.1 < 2.9.1)                                                                                                                                                                     
addressable (2.4.0 < 2.7.0)                                                                                                                                                                      
bcrypt (3.1.12 < 3.1.13)                                                                                                                                                                         
bootsnap (1.4.5 < 1.4.6)                                                                                                                                                                         
bootstrap (4.3.1 < 4.4.1)                                                                                                                                                                        
brakeman (4.7.2 < 4.8.0)                                                                                                                                                                         
cancancan (1.17.0 < 3.0.2)                                                                                                                                                                       
chart_js (1.1.0 < 1.1.1)                                                                                                                                                                         
coffee-rails (4.2.2 < 5.0.0)
combustion (0.6.0 < 1.1.2)
database_cleaner (1.8.2 < 1.8.3)
... 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-21T14:44:20.790

Bundler 有一个[过时](http://gembundler.com/v1.1/bundle_outdated.html)的命令。当然，我假设您正在使用 Bundler。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-02T12:06:41.973

`gem outdated`会给你一个过时的 gem 列表，包括你当前拥有的版本号和最新的版本号。

然后更新：

*   `gem update GEMNAME`更新特定的宝石或只是
*   `gem update`将所有 gem 更新到最新的稳定版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T14:50:39.550

这很简单，只需输入以下代码：

```
$ gem update GEMNAME 
```

# wordpress - 当 ID 在 Wordpress 自定义 ID 中时显示 YouTube 视频

> ID：11593093
> 
> 赞同：0
> 
> 时间：2012-07-21T14:41:31.497
> 
> 标签：wordpress, youtube

我有一个自托管的 Wordpress 博客，里面有很多视频。除了将完整的 YouTube 嵌入代码粘贴到帖子中，我想将视频 ID 输入到自定义字段中。然后它应该自动获取播放器信息（大小等）。

对于具有帖子格式标准的文章，我想要与帖子格式视频不同的视频大小，因为帖子格式的宽度不同。（我假设这将是另一个自定义 id 字段？）

当我需要更改嵌入代码时，我也不想更改每一篇 wordpress 文章。

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:53:46.330

在主题的文章页面模板中使用以下代码

这将输出 vedio id 的结果元值

```
<?php $key="videoid"; echo get_post_meta($post->ID, $key, true); ?> 
```

这将输出视频大小的结果元值

```
<?php $key="videosize"; echo get_post_meta($post->ID, $key, true); ?> 
```

希望这可以帮助。

# c++ - CWA(dll,api) - C++ 宏？

> ID：11593096
> 
> 赞同：0
> 
> 时间：2012-07-21T14:41:56.557
> 
> 标签：c++, windows, visual-studio-2010, api, macros

我最近在网上浏览随机资源时发现了一些有趣的宏：

```
#define CWA(dll, api)                 ::api 
```

有人可以向我解释那个宏是什么以及使它工作还需要什么？这是使用它的示例：

```
CWA(user32, MessageBoxW)(NULL, L"Hello world!", NULL, MB_OK); 
```

我认为它曾经告诉编译器/链接器为 API 或其他东西使用某些特定的导入类型....

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T14:47:26.483

预处理器语言很容易阅读。你有宏：

```
#define CWA(dll, api) ::api 
```

它被代码使用：

```
CWA(user32, MessageBoxW)(NULL, L"Hello world!", NULL, MB_OK); 
```

所以预处理的结果是：

```
::MessageBoxW(NULL, L"Hello world!", NULL, MB_OK); 
```

请注意，“api”只是宏的第二个参数，所以基本上宏有两个参数：第一个被忽略，第二个是全局函数的名称（:: 是调用全局函数的前缀，例如 ::MyGlobalFunc）。

第一个参数“dll”被忽略，所以它只是作为注释，函数是什么 dll。

Edit: possible reason behind it - somebody wants to clearly document calls to global functions to other DLLs. It nicely reads: "I am calling function MessageBoxW from user32.dll".

# php - 从函数返回 MySQLi 对象

> ID：11593097
> 
> 赞同：0
> 
> 时间：2012-07-21T14:42:05.713
> 
> 标签：php, mysqli

我在 global.php 文件中声明了以下函数：

```
function dbconnect(){
   $mysqli = new mysqli($dbserver,$dbuser,$dbpasswd,$dbdatabase);
   if ($mysqli->connect_error){
      echo ($mysqli->connect_error);
      return null;
   } else {
      return $mysqli;
   }
} 
```

我已经 100% 确定 $dbdatabase 是一个有效的数据库。我调用该函数，我得到了一个有效的对象，没有错误；但是，当我尝试执行查询时，该对象报告未选择任何数据库。如果我删除代码并直接在我需要的地方执行它 - 没问题。我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:45:40.647

值`$dbserver` `$dbuser` `$dbpasswd`和`$dbdatabase`未在函数范围内定义。

您应该将它们作为参数传递，例如：

```
function dbconnect($dbserver, $dbuser, $dbpasswd, $dbdatabase){ 
```

或者您可以使用糟糕的编码方法方式并通过这样做来全球化变量：

```
function dbconnect(){
    global $dbserver, $dbuser, $dbpasswd, $dbdatabase; 
```

我建议使用第一种方法，或者只是在函数中定义变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T18:31:00.140

实际上还有另一种方法。您只是不需要将它们全部设为全局。取而代之的是，您可以在本地制作它们。

喜欢...

函数 dbConnect(){

```
$server = "localhost";
$username = "root";
$password = "";
$dbname = "test";

 $con = new mysqli($server,$username,$password,$dbname);
 return $con ; 
```

}

# c++ - 处理 C++/C 结构内存释放

> ID：11593105
> 
> 赞同：2
> 
> 时间：2012-07-21T14:43:23.417
> 
> 标签：c++, c

使用后必须释放结构内存吗？我有示例代码：

```
struct aa 
{
int a;
char * b ;
    aa()
    {
    a=0;
    b= new char[255];
    }
} ;

aa *ss = new aa[3];

void fill()
{
    aa * ssss = new aa;
    aa * sss = new aa;

    sss->a=10;
    ss[0] = *sss;
    cout<<ss[0].a<<"\n";
    ss[1] = *sss;

    cout<<ss[1].a<<"\n";
    cout<<ssss[1].a<<"\n";
}

int _tmain(int argc, _TCHAR* argv[])
{

    fill();
    delete(ss);
} 
```

我必须`delete(ssss)`在最后做`fill`吗？

`ss`我必须在末尾删除结构数组`main`吗？

我必须创建 destruct 还是构造 ss 以释放 *b 内存？

那么类是相同的逻辑吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T14:54:59.017

> 我必须在填充结束时删除（ssss）吗？

是的，您必须删除使用`new`. 但是，这里不需要使用`new`，只需使其自动：

```
void fill() {
    aa ssss; // automatically destroyed on exit from the function
} 
```

> 我必须在 main 的末尾删除结构的 ss 数组吗？

是的，但它是一个数组，所以必须作为数组删除：

```
delete [] ss;
       ^^ 
```

但同样，没有理由动态分配：

```
aa ss[3]; // automatically destroyed on exit from the program 
```

> 我必须创建 destruct 还是构造 ss 以释放 *b 内存？

如果您真的想使用原始指针来管理动态数组，那么可以。您还需要考虑复制构造函数和复制赋值运算符（根据[三规则](https://stackoverflow.com/q/4172722/204847)），以使该类可以安全使用。或者，使用智能指针或容器为您管理内存：

```
struct aa 
{
    int a;
    std::vector<char> b ;

    aa() : a(0), b(255) {}
} ; 
```

> 那么类是相同的逻辑吗？

是的，规则总是一样的：用 . 创建的任何东西都`new`必须用 . 销毁`delete`。如果您尽可能避免动态分配，并在您确实需要时使用智能指针、容器和其他[RAII类，则管理对象会容易得多。](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-21T14:47:11.717

如果使用`new`，则必须使用`delete`以避免内存泄漏。如果你在栈上声明一个变量，它会在你退出作用域时被自动释放。

```
void something();
{
    aa b = new aa();
    // Do something
    delete b; // You must use delete
}

void something();
{
    aa b();
    // Do something
    // You don't have to use delete
} 
```

在您的**特定情况下**，不一定要使用`delete`，因为程序无论如何都会终止，并且操作系统将释放所有分配的内存。

这样做仍然是一个好习惯，以便保持一致（尽管在某些特定情况下您不想这样做，因为释放大量复杂对象可能需要一些时间，从而减慢程序终止速度）。

无论如何，在 C++ 中使用裸指针并不是一个好主意，因为有许多所谓的智能指针（例如`shared_ptr`and `unique_ptr`）负责调用析构函数并在它们超出范围后释放内存。

**PS：**在您的代码中，您将有内存泄漏，因为该`aa`结构`new`在构造函数内部使用并且没有`delete`在析构函数中调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:31:46.610

# **是的**

请，请，请释放你的记忆。我不会在这里详细介绍，但看一下这个答案： [Can a memory block allocation by using operator new/malloc 在程序执行结束后仍然存在？](https://stackoverflow.com/questions/11383401/can-a-memory-block-allocated-by-using-operator-new-malloc-persist-beyond-end-of/11383451#11383451)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T17:08:09.343

经验法则`C/C++`：

*   分配给`new`? 释放内存`delete`
*   分配给`malloc`, `calloc`, `realloc`? 释放内存`free(void*)`

# jquery - 代码工作一次并停止

> ID：11593108
> 
> 赞同：0
> 
> 时间：2012-07-21T14:43:32.613
> 
> 标签：jquery

```
<script>
    $('.alert_success').hide();
    $('.alert_error').hide();
    $('.trash').click(function(){
        var r=confirm("wil delete")
        if (r==true)
        {
            var id = $(this).attr('id');
            $.post('ajax/del_art.php',{id:id},function(data){
                $("#concon").fadeOut(1000);
                $('.alert_success').fadeIn(1000);
                $('.alert_success').html(data);
                $('.alert_success').delay(5000);
                $('.alert_success').fadeOut(1000);
            });
        }
    }); 
```

当我单击删除时，代码会工作一次（id #concon）并停止。怎么能`#concon` 代替`$(this)`？

我希望在按删除时删除和隐藏该项目。

[http://behiramp.com/admin/article.php](http://behiramp.com/admin/article.php)

尝试删除任何帖子，它会正常工作。尝试删除下一个帖子，它会正常工作。

现在我麦克

```
<script>
$('.alert_success').hide();
$('.alert_error').hide();
$('.trash').click(function(){
 var r=confirm("سوف يتم حذف الموضوع الى الابد!")
  if (r==true)
    {
      id = $(this).attr('id');
        $.post('ajax/del_art.php',{id:id},function(data){
         if($(".concon").hasClass(data))
           {
              $(".concon").fadeOut(1000);
              $('.alert_success').fadeIn(1000).html(data).delay(3000).fadeOut(1000);
           }

         });
  } 
```

});

在 hasclass 中，它用“日期”而不是内容数据返回，.hasClass() 如何用变量返回

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:11:58.307

我看到你多次使用相同的 id，这是一个很大的不不

尝试改变这个

```
$("#concon").fadeOut(1000); 
```

对此

```
$(".concon", this).fadeOut(1000); 
```

然后在你的 DOM 上改变这个

```
<tr id="concon"></tr> 
```

对此

```
<tr class="concon"></tr> 
```

# linux - 来自远程主机的 2 个 tcpdump

> ID：11593109
> 
> 赞同：0
> 
> 时间：2012-07-21T14:43:34.673
> 
> 标签：linux, shell, tcpdump

我需要从远程主机的不同接口收集 tcpdump。
目前我通过以下方式进行操作：

> ```
> ssh remotehost "tcpdump -i iface1 -w - " > iface1_dump.pcap &
> ssh remotehost "tcpdump -i iface2 -w - " > iface2_dump.pcap 
> ```

我想知道是否有办法在单个 ssh 连接中实现它（也许一些复杂的 shell 重定向是一种治疗方法）以最大程度地减少数据包丢失，而第二个 ssh 命令正在进行
2 个条件：
远程主机的磁盘空间确实有限，所以我可以t tcpdump 在该主机上本地
**tcpdump -i any**会影响以太网标头，因此我无法使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:56:48.843

您在目标机器上创建一个文件“SEND_DATA”，在其中放置以下 2 行：

```
tcpdump -i iface1 -w - | nc <IP> <PORT1>
tcpdump -i iface2 -w - | nc <IP> <PORT2> 
```

每台机器都有netcat，所以它可以工作。您将 SEND_DATA 标记为可执行

接下来，在 PC 上打开一个监听端口，然后在远程机器上运行脚本：

```
> OUT1 nc -l -p PORT1
> OUT2 nc -l -p PORT1
ssh remotehost SEND_DATA 
```

此时，文件 OUT1 和 OUT2 将开始接收数据。

您还需要查阅 nc 的 2 个版本的手册，因为我看到参数有时会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T03:59:04.517

两个 ssh 可能是最好的方法，但您也可以在第一个在后台使用 sed 's/^/one /'，在第二个使用 sed 's/&/two /'，然后将它们分开例如，在本地主机上使用“egrep '^one ' | sed 's/one //'”。

您还可以将输出保存在一对文件中，并在“完成”时将它们返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T10:48:09.297

```
ssh remotehost "tcpdump -iiface1 -w- &
                tcpdump -iiface2 -w- >&2 2>/dev/null" >iface1_dump.pcap 2>iface2_dump.pcap 
```

# java - 使用 PdfBox，如何将 PDDocument 的内容检索为字节数组？

> ID：11593116
> 
> 赞同：25
> 
> 时间：2012-07-21T14:44:04.090
> 
> 标签：java, pdfbox

我目前正在使用 PdfBox 作为 pdf 文件编辑器应用程序的驱动程序。我需要将 pdf 文件 (PDDocument) 的 PdfBox 表示的内容作为字节数组。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-07-15T14:18:30.630

我希望现在还不算晚...

```
ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
document.save(byteArrayOutputStream);
document.close();
InputStream inputStream = new ByteArrayInputStream(byteArrayOutputStream.toByteArray()); 
```

瞧！你有两个输入流！

# android-handler - 用于数据传输的广 播与处理程序

> ID：11593117
> 
> 赞同：3
> 
> 时间：2012-07-21T14:44:07.053
> 
> 标签：android-handler

首先，我是 Android 和 Java 新手，但正在稳步前进。

我有一个关于使用 BroadCast 接收器与处理程序进行 Andriod 3.0 数据传输的问题 + 我目前在运行线程中嵌入了处理程序，该线程通过 USB 串行链接将数据接收到我的 Acer A200 平板电脑中。
这些处理程序（此时为 7 个）明确地将接收到的数据传输到几个活动，这些活动使用片段来显示多个视图的数据。

由于某些数据在多个显示/视图上使用，我的问题是简单地“广播”来自运行线程的数据并让每个活动的广播接收器处理数据的捕获和显示是否会更好？使用 Handler 将数据显式发送到每个活动的首选？

任何一种方法的任何优点/缺点都将不胜感激。

谢谢

埃德

# php - 将库添加到 silex

> ID：11593120
> 
> 赞同：6
> 
> 时间：2012-07-21T14:44:21.287
> 
> 标签：php, silex

我知道这个问题已经被问过了，但似乎自动加载过程随着作曲家而改变了一点。

我只想在我的 silex 项目中添加一个类库。

所以我制作了这个文件：vendor\lib\picture.php

```
<?php
namespace MyNamespace;

class Picture
{
    function testage()
    {
        echo 'hihaaa ça marche'; exit;
    }
} 
```

在 vendor/composer/autoload_namespaces.php 中，我将此行添加到大数组中：

```
'MyNamespace' => $vendorDir . '/lib/', 
```

在主文件中我添加了：

```
use MyNamespace\Picture as Picture; 
```

并这样称呼它：

```
$app->register(new Picture()); 
```

这给了我这个错误：

```
Fatal error: Class 'MyNamespace\Picture' not found... 
```

我只是不知道如何添加一个可以从任何控制器轻松使用的类，无需命令行（我不使用作曲家，我下载了预配置的 silex），知道吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T19:17:15.180

如果您使用的是作曲家，则不应更改供应商目录。您不应向其中添加文件，也不应修改作曲家生成的文件。

我建议您将这些类放入`src`目录中。@gunnx 展示了如何在 中配置自动加载`composer.json`，以便在每次运行时重新生成它`composer install`。

该文件将位于`src/MyNamespace/Picture.php`. 自动加载配置`composer.json`将是：

```
{
    "autoload": {
        "psr-0": { "MyNamespace": "src/" }
    }
} 
```

实际的解决方案是前面两个答案的组合。但我认为正确获取细节很重要;-)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:07:04.377

您的图片类应该在这个文件中：`vendor/lib/MyNamespace/Picture.php`. 注意完整的命名空间和大小写。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T18:01:42.740

您可以通过将以下内容添加到您的 composer.json 来将您自己的代码添加到自动加载器，例如

```
{
"autoload": {
    "psr-0": {"Acme": "src/"}
} 
```

# c# - 只读字段可以公开吗？

> ID：11593122
> 
> 赞同：5
> 
> 时间：2012-07-21T14:44:27.013
> 
> 标签：c#, properties

我有一个带有指示对象状态的只读字段的类。这些字段应该从外部可见。

起初我用`properties`这样的方式展示了这些字段：

```
public class MyClass
{
    private readonly MyState mystate = new MyState();
    public MyState MyState { get { return this.mystate; } }
} 
```

但是因为这样`readonly`，我的班级的用户不能改变状态的实例。因此，我删除了我的`property`，将`readonly`字段设置为`public`并在 Pascal Case 中重命名它。

到目前为止，我看到的唯一问题是重构，但由于我`public property`的情况像 my 一样`public readonly`，我可以将它`property`无缝地移动到一个中。

[吉米](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)可以弄乱我的对象（不修改代码）还是无论如何使用 a 更安全`property`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T14:50:00.127

没有理由不让它成为财产；CLI 通常会在这样一个简单的属性上内联“get”。当然，这是一行额外的代码。

严格来说，字段和属性之间的变化是一个突破性的变化。除了是不同的 IL 操作之外，它也是不同的语义，尤其是在涉及结构的情况下。

将其设为属性可为您在以后的更改方面提供最佳的灵活性；延迟加载，间接等。

重新安全：确实，只读字段与仅获取属性大致相似。如果有人足够关心想要这样做，那么两者都可以同样被反思滥用。我的投票仍然是在公共财产上:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:52:07.090

实际上，这就是 C# 的美妙之处：您可以使用公共字段而不是属性，然后在不重写整个项目的情况下改变主意：

```
public readonly MyState mystate = new MyState(); 
```

稍后您可以：

```
private readonly MyState mystate = new MyState();
public MyState MyState { get { someCheck(); return this.mystate; } } 
```

# random - 随机森林查询

> ID：11593124
> 
> 赞同：0
> 
> 时间：2012-07-21T14:44:39.040
> 
> 标签：random, random-forest

我正在研究一个基于随机森林的项目。我看到一个关于随机森林创建的 ppt (Rec08_Oct21.ppt)(www.cs.cmu.edu/~ggordon/10601/.../rec08/Rec08_Oct21.ppt)。我想问一个问题。在扫描随机选择的特征及其信息增益值后，我们选择特征 j 的 IG 最大值的特征。那么，我们如何使用这些信息进行拆分呢？在这之后我们如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T07:14:15.420

```
LearnTree(X, Y) 
```

令 X 为 R x M 矩阵、R-datapoints 和 M-attributes 以及带有 R 个元素的 Y，其中包含每个数据点的输出类。

```
j* = *argmaxj* **IG** j // (This is the splitting attribute we'll use) 
```

IG 的最大值可以来自分类（基于文本）或实数（基于数字）属性。

---> 如果它来自**分类属性**(j)：对于第 j 个属性中的每个值 v，我们将定义一个新矩阵，现在将*X* v 和*Y* v 作为输入导出一个子树。

```
Xv = subset of all the rows of X in which Xij = v;
Yv = corresponding subset of Y values;
Child v = LearnTree(Xv, Yv); 
```

*PS：子树的数量将与第 j 个属性中唯一值 v 的数量相同*

---> 如果它来自**实值属性**(j)：我们需要找出最佳分割阈值

*PS：阈值**t**与为该属性提供最大**IG值的值相同***

```
define IG(Y|X:t) as H(Y) - H(Y|X:t)
define H(Y|X:t) = H(Y|X<t) P(X<t) + H(Y|X>=t) P(X>=t)
define IG*(Y|X) = maxt IG(Y|X:t) 
```

我们将拆分这个**t**值，然后通过定义两个新的**X** t 和**Y** t 对来定义两个 ChildTree。

```
X_lo = subset of all the rows whose Xij < t
Y_lo = corresponding subset Y values
Child_lo = LearnTree(X_lo, Y_lo)

X_hi = subset of all the rows whose Xij >t
Y_hi = corresponding subset Y values
Child_hi = LearnTree(X_hi, Y_hi) 
```

拆分完成后，然后对数据进行分类。

欲了解更多信息，[请访问此处](https://cwiki.apache.org/confluence/display/MAHOUT/Random+Forests)！

我希望我回答了你的问题。

# jquery - 使用 Jquery Mobile 时如何从滑块中获取值

> ID：11593125
> 
> 赞同：0
> 
> 时间：2012-07-21T14:44:39.520
> 
> 标签：jquery, jquery-mobile, slider

我真的在 js 和 Jquery mobile 上苦苦挣扎:(

-jquery-1.7.2.js

-jquery.mobile-1.1.1.js

*   Chrome 版本 20.0.1132.57

我的JavaScript：

```
<script type="text/javascript" charset="utf-8">
$('#temperature').change(function() {
    alert('.change() called.');
});
</script>
</head> 
```

我的带有 jqm 滑块的 html：

```
<div data-role="page" data-theme="a">
    <div>

        <div data-role="header">
            <h1>Conditions</h1>
        </div>

        <div data-role="fieldcontain">
            <label for="temperature">Temperature: </label> <input type="range"
                name="temperature" id="temperature" value="15" min="-15" max="60"
                data-highlight="true" />
        </div>
    </div>
</div> 
```

[-----> 我的小提琴](http://jsfiddle.net/samsam/6rT6P/)

问题 1：如果使用 jquery Mobile 但没有它，为什么这不起作用？

问题2：从滑块获取值的正确方法是什么？我尝试了很多，没有成功。

问题3：为什么即使我更改了一次值，Fiddle 也会多次发出警报？

问题 4：当您在一页上有 6 个滑块时，获取值的最佳方法是什么？

```
 **EDIT** 
```

我现在就这样改了，但结果一样：

```
<script type="text/javascript" charset="utf-8">
function valueChanged(){
    var SliderValue = $('#temperature').attr('value');
    alert("Slider value = " + SliderValue);
    console.log("SliderValue--->" +SliderValue);
} 
```

```
<div data-role="fieldcontain">
            <label for="temperature">Temperature22: </label> <input type="range"
                name="temperature" id="temperature" value="15" min="-15" max="60" onchange="valueChanged()"
                data-highlight="true" />
        </div> 
```

在日志中我得到：

> SliderValue--->16 conditions.html:22 SliderValue--->41 conditions.html:22 SliderValue--->41 conditions.html:22 SliderValue--->41 conditions.html:22 SliderValue--->41 conditions.html:22 SliderValue--->41 conditions.html:22 SliderValue--->41 conditions.html:22 SliderValue--->41 conditions.html:22 SliderValue--->41 conditions.html:22 SliderValue --->41 条件.html:22 SliderValue--->41 条件.html:22

所以它只是无休止地打开警报。诡异的。

谢谢！萨米人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:00:25.467

A1: 用`$('#temperature').attr('value')`
A2 得到它： -> `$('#temperature').attr('value')`
A3: 我没有得到它不止一次！？
A4：获取函数中的每个值：

```
function getTemps(){                                             
      var temps = new Array[6];     
      temps[0]=$('#temperature1').attr('value');
      temps[1]=$('#temperature2').attr('value');   
      and so on...
} 
```

也许这有帮助:)

# c# - 数学表达式解析器

> ID：11593128
> 
> 赞同：0
> 
> 时间：2012-07-21T14:45:00.877
> 
> 标签：c#, math

> **可能重复：**
> [.NET 中是否有字符串数学评估器？](https://stackoverflow.com/questions/355062/is-there-a-string-math-evaluator-in-net)

我需要实现数学表达式解析器。它必须评估以下表达式：

*   基本运算符(+,-,*,/,%[模运算符])
*   优先级操作，例如 2*(4-1)
*   sin,cos,tan,cotan, log(base,number) 函数
*   允许诸如 sin(cos(log(2,32))) 之类的组合
*   2^5等幂运算

首先，我想使用`JScript`eval 函数。但这并不是不安全的，也没有电力运营商。中学我在互联网上搜索了一些图书馆。但事实证明，我不能使用它们。所以问题如下：JScript eval 函数调用有多安全，是否有任何标准的 .net 工具可用于我的任务？如果不是，哪种算法最好？截至目前，我正在尝试构建表达式树，然后对其进行编译以获得结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:29:29.063

你可以试试[NCalc](http://ncalc.codeplex.com/releases/view/73656)

```
Dictionary<string, int> dict = new Dictionary<string, int>() {
    {"a",1} ,
    {"b",4}
};

NCalc.Expression exp = new NCalc.Expression("a + b / 2 * myfunc(3.14)");

exp.EvaluateFunction += (s, e) =>
    {
        var d = (double)e.Parameters[0].Evaluate();
        e.Result = Math.Cos(d);
    };

exp.EvaluateParameter += (s, e) =>
    {
        e.Result = dict[s];
    };

var result = exp.Evaluate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:35:08.403

或 jep.net - 免责声明：我是作者。

# python - 使用框覆盖算法找到现实世界网络的分形维数

> ID：11593134
> 
> 赞同：6
> 
> 时间：2012-07-21T14:46:11.427
> 
> 标签：python, shortest-path, dijkstra, fractals

在这里，在下面的代码中，我得到了分配给顶点的颜色，但是对于框 'l' 的长度没有意义

我希望根据盒子的长度分配颜色，并且函数应该输出网络中不同颜色的数量，这样我就可以根据法律使用它来确定现实世界网络的分形维数，

N [B] ~ l [B] ^(-d [B])

请帮助我实现这一目标。

文件 dolphin 包含两列，每列代表一条边的两端。

```
import networkx as nx
import matplotlib.pyplot as plt
G=nx.Graph()

colors = ['c1', 'c2', 'c3', 'c4',  'c5', 'c6', 'c7', 'c8', 'c9', 'c10', 'c11', 'c12']

f = open("real_network/dolphin")
a = [int(n) for n in f.read().split()]
G.add_nodes_from(a)

i = 0
b = []
while i<len(a):
    b.append((a[i],a[i+1]))
    i = i+2

#print b

G.add_edges_from(b)
colors_of_nodes={}

def coloring(node, color):
    for neighbor in G.neighbors(node):
        color_of_neighbor = colors_of_nodes.get(neighbor, None)
        if color_of_neighbor == color:
            return False

    return True

def get_color_for_node(node):
    for color in colors:
        if coloring(node, color):
            return color

def main():
    for node in G.nodes():
        colors_of_nodes[node] = get_color_for_node(node)

    print colors_of_nodes

main() 
```

# php - PHP会话以某种方式重置

> ID：11593139
> 
> 赞同：0
> 
> 时间：2012-07-21T14:46:33.500
> 
> 标签：php, session

我正在开发一个网站，当前用户可以在该网站上选择不同的城市进行查看。我不想将城市保留在 URL 中，也不想依赖 cookie，如果客户端不会接受cookies ..我在会话中这样做，但不知何故会话很早就停止了，我不明白出了什么问题..

```
if (isset($_GET['c'])) {
unset($_SESSION['city']); 
$_SESSION['city'] = $_GET['c'];
}
if (empty($_SESSION['city'])) {
$_SESSION['city']='07400';
}
$city = $_SESSION['city']; 
```

在我点击三个页面后，城市又回到了 07400 .. 在某种程度上.. 会话变空了.. 但我不知道怎么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:32:11.623

如果无法测试/调试您的项目，很难找出问题所在。不过，这可以帮助您走上正确的轨道：

我会在您请求的每个页面上**给出会话 ID**`print(session_id());`：.

如果**session-id 改变**了，你已经失去了你的 session，应该检查 id 是如何传递的，以及 session 是如何重新创建的（cookie、id in url、session_start）。我还会`error_reporting(E_ALL);`在页面开头编写代码，以查看您是否收到标头已发送警告。

如果**session-id 保持不变**，则正确地重新创建会话。然后我会在项目中搜索代码，写入会话并可能重置变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:48:48.297

在编写脚本足够长的时间后，我发现 city 脚本没有任何问题...... Sessions 没有任何问题.. 但是由于脚本后面的脚本错误，它破坏了 $_SESSION['city '].. 感谢所有回复.. 并感谢您提供查找错误的提示，以及可能更改的会话 ID...

# c# - 有效地从视频中抓取像素

> ID：11593140
> 
> 赞同：1
> 
> 时间：2012-07-21T14:46:48.800
> 
> 标签：c#, video, directshow

我正在寻找一种从视频文件中获取图像数据的有效方法。我目前正在图书馆进行测试`FilgraphManagerClass.GetCurrentImage()`。`Interop.QuartzTypeLib`这可以满足我的需要，但速度非常慢。我需要处理每个视频的所有帧。我有什么更好的选择？

要求

*   必须是帧准确的。<-- 很重要！
*   让我可以访问解码的像素缓冲区（`int`或的数组`byte[]`），最好是 RGB24 或 RGB32。
*   可以实时或更快地抓取缓冲区。我不需要显示视频，我只需要分析像素。
*   处理 mp4 文件 (h264/aac)。如果需要，我可以通过 AviSynth 重新包装或帧服务，但不涉及重新转码。

欢迎大家提出意见。

根据要求的一些代码：

```
FilgraphManagerClass graphClass = new FilgraphManagerClass();
graphClass.RenderFile(@"C:\tmp\tmp.avs");

int sz = (graphClass.Width * graphClass.Height + 10) * 4;    
int[] buffer = new int[sz - 1]; 
```

然后我逐步浏览每一帧。我在循环中有这样的东西：

```
graphClass.GetCurrentImage(ref sz, out buffer[0]);
//DoStuff(buffer);
graphClass.CurrentPosition += graphClass.AvgTimePerFrame; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T18:04:10.610

[`IBasicVideo::GetCurrentImage`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd389570%28v=vs.85%29.aspx)您使用的方法基本上适用于快照，并且仅适用于传统模式下的传统视频渲染。也就是说，（a）它不是时间准确的，它可以让你重复帧，或者相反，丢失帧；(b) 它假设您显示视频。

相反，您想要构建以下类型的过滤器图：文件源 -> ... -> 示例抓取过滤器 -> 空渲染器。Sample Grabber 是一个标准组件，可以提供回调，以便它使用通过它的任何帧数据调用您。

然后通过调用过滤器图从图中删除时钟，`SetReferenceClock(null)`以便它尽可能快地运行（而不是实时）。然后您`Run`将图表和所有视频帧提供给您的回调。

要在 C# 中完成任务，您需要使用[DirectShow.NET 库](http://directshownet.sourceforge.net/)。它的`Capture\DxSnap`示例提供了如何使用 Sample Grabber 的简要示例。他们通过`BufferCB`而不是做到这一点，`SampleCB`而且效果也很好。那里的其他样本也使用这种方法。

您会发现非常接近此任务的其他代码片段：

*   [使用 DirectShowNet 寻找关键帧](https://stackoverflow.com/questions/4733186/seeking-keyframes-using-directshownet)- 使用 Sample Grabber
*   [SampleGrabber 未调用 BufferCB](https://stackoverflow.com/questions/10829575/buffercb-not-being-called-by-samplegrabber) - 音频部分的相同任务
*   [如何使用 DirectShow.NET C# 访问音频流](https://stackoverflow.com/questions/857546/how-to-access-an-audio-stream-using-directshow-net-c-sharp)

关于`MP4`文件，您应该考虑以下几点：

1.  Windows 中对 MPEG-4 的支持有限，您可能需要安装第三方组件才能使文件可播放。如果 GraphEdit 可以读取它们，那么您也可以。
2.  Windows Media Player 可能正在使用并且很可能会使用更新的 API，您应该查看 GraphEdit
3.  请务必在您的应用程序上使用`Win32`/ `x86`platform 以避免遇到您的应用程序在 64 位域中运行的情况，而对 MP4 的支持仅存在于安装的 32 位组件/库中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:04:08.703

[您还可以查看使用Windows Media Foundation](http://mfnet.sourceforge.net/)创建分配器演示器。这将为您提供解码后的视频帧作为 GPU 纹理，您还可以使用 CUDA 或 OpenCL 执行所需的处理（如果可能），这将极大地提高您的处理速度。

# c# - 可以从 SQL Server 代理步骤执行 ashx 脚本吗？

> ID：11593142
> 
> 赞同：1
> 
> 时间：2012-07-21T14:47:20.063
> 
> 标签：c#, sql-server, jobs, ashx, agent

我目前有一个 .vbs 文件在 SQL Server 2005 服务器代理作业中安排的每日时间运行。

“作业步骤属性”对话框包含：

**类型**：“操作系统（CmdExec）”

命令**值**如下：

“cscript d:\sites\mysite\myscheduled\script_to_run.vbs”

这工作正常，但我不得不升级脚本，现在希望使用 .ashx 处理程序文件代替它。有谁知道如何配置作业以执行 ashx 处理程序文件？“类型”是什么？ActiveX 脚本？路径引用之前的“命令”是什么？我不想使用任务计划程序等，但只想知道是否可以在服务器代理作业中执行 ashx 文件，如果可以，将“类型”和“命令”值设置为什么。许多TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:14:56.817

ashx 处理程序文件是一个 aspnet 文件，因此它可以在网站中使用。因此，SQL Server 代理无法执行此类文件。如果您想做一些计划任务，最好使用控制台应用程序（写在 csharp 上；-）。最良好的问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:26:35.910

您仍然可以为此使用 CmdExec 步骤。

```
"C:\Program Files\Internet Explorer\iexplore.exe" "http://wherever/your_handler.ashx" 
```

您不会看到浏览器窗口打开，它可能需要 SQL Server 或代理帐户的提升权限，但它应该可以工作。

您也可以通过使用 PowerShell 步骤类型调用 PowerShell 脚本来执行类似的操作。

或者你可以改变你的 VBScript 来做这样的事情：

```
set wsh = CreateObject("WScript.Shell")
cmd     = """C:\Program Files\Internet Explorer\iexplore.exe"" " & _
          "http://wherever/your_handler.ashx"
wsh.Run cmd
set wsh = Nothing 
```

# objective-c - 根据内容动态为 UIScrollView 赋予高度的正确方法是什么？

> ID：11593148
> 
> 赞同：1
> 
> 时间：2012-07-21T14:48:08.317
> 
> 标签：objective-c, ios, xcode, uiscrollview

这是我的困境。我在 UIScrollView 中有 4 个元素。1\. 最上面的元素是一个 UILabel，我根据其中的内容量动态给出高度。2\. 第二个是固定高度的 UILabel，我根据给定上部 UILabel 3 的高度动态给出位置。第三个元素是 UIImageView，我必须再次根据给定最高 UILabel 4 的高度动态给出位置。第四个是一个 UIWebView，我动态地给出了高度和位置。（高度取决于其中的内容.. 并再次根据最上面的 UILabel 的高度定位）

最后，我动态地为我的 UIScrollView 赋予高度以容纳上述所有元素。

这是我在 - (void)webViewDidFinishLoad:(UIWebView *)webView 中使用的代码来完成上述所有操作。

```
//Adjust height of top-most UILabel
CGSize maximumLabelSize = CGSizeMake(300,9999);
CGSize expectedLabelSize = [item.label1 sizeWithFont:label1.font constrainedToSize:maximumLabelSize lineBreakMode:label1.lineBreakMode];
CGRect newFrame = label1.frame;
newFrame.size.height = 0;
newFrame.size.height = expectedLabelSize.height;
label1.frame = newFrame;

//Adjust position of second UILlabel
CGRect labelPosition = label2.frame;
labelPosition.size.height = 20;
labelPosition.origin.y = expectedLabelSize.height +14;
label2.frame = labelPosition;

//Add UIImageView and adjust it's position
UIImageView *image;
image = [[UIImageView alloc] initWithFrame:CGRectMake(0, expectedLabelSize.height +41, 320, 2)];
image.image = [UIImage imageNamed:@"image.png"];
[scrollView addSubview:image];
[image release];

//Adjust UIWebView height and position
CGRect frame = webView.frame;
frame.size.height = 0;
frame.origin.y = expectedLabelSize.height +48;
webView.frame = frame;
CGSize fittingSize = [webView sizeThatFits:CGSizeZero];
frame.size = fittingSize;
webView.frame = frame;

//Adjust Scrollview height
scrollView.contentSize = CGSizeMake(320, fittingSize.height +expectedLabelSize.height +48); 
```

最后，我的问题是当我第一次加载这个视图时，除了滚动视图之外的所有东西都得到了正确的高度和位置。但是，如果我返回一个视图并再次打开此视图，则滚动视图具有所需的高度。

有什么想法我可能在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:20:31.183

我的猜测是第一次运行时 scrollView 变量尚未初始化。尝试在此代码中的某处设置断点并检查 scrollView 是否有值或者它是否只是 0x00000000。

# udp - 为什么当输入数据大小增加一点时 udp sendto 会变得如此缓慢？

> ID：11593154
> 
> 赞同：0
> 
> 时间：2012-07-21T14:49:39.733
> 
> 标签：udp, packet, processing-efficiency, sendto

我有一个奇怪的问题。我在android上做了以下测试：

*我=0；
而（我< PACKET_NUMBER）
{* 

*//UDP发送数据包
if( sendto(sockfd,buffer,strlen(buffer),0, (struct sockaddr *)&serv_addr, sizeof(serv_addr)) <= 0)
{
error("通过udp向远程主机发送数据包失败\ n");
}
我++；
}* 

我用不同的缓冲区大小做了这个测试。当缓冲区大小小于一个数字（应该在 500 字节左右）时，无论我选择哪种大小，例如 20 40 80 160 320 ，while 语句都可以在几乎相同的时间内执行，例如 3 分 10 秒。但是，当数据包大小大于 500 时，例如 510 520 600 1280，while 语句的执行时间要长得多，例如超过 10 分钟。谁能给我一些关于原因的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:42:00.953

事实上，这个问题很可能是由**strlen()**引起的，它试图在循环`/0`的每次迭代中查找缓冲区中的字符`while()`！

将其替换为变量，执行速度会提高。

另一个可能的原因是数据包碎片。

# jquery - JQuery下拉位置绝对底部

> ID：11593155
> 
> 赞同：0
> 
> 时间：2012-07-21T14:49:42.687
> 
> 标签：jquery, css

我正在尝试`slideToggle`在 JQuery 中创建效果。我有一个 div 定位为：

```
someDiv {
   position : absolute;
   bottom : 100px; 
} 
```

`$("#someDiv").slideToggle();`现在，当点击触发函数 ( ) 时，`div`从底部向上滑动而不是显示或向下滑动。

我希望它在如上定位时从 TOP 正常下降。我怎么做？我已经读过从底部定位可以产生这种效果，但在任何地方都找不到解决方案。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:15:55.407

您可以将函数与窗口`resize`事件结合使用，使用 CSS 属性从底部动态定位 div 100px，`top`以便`slideToggle()`按照您想要的方式进行操作：

**CSS**

```
#theDiv {
  position : absolute;
}​ 
```

**HTML**

```
<button>Toggle</button>
<div id="theDiv">...<div>​ 
```

**JS**

```
// Positions Div From Bottom //
function positionDiv($target, fromBottom){
    $target.css({
        top: $(window).height() - fromBottom
    });
}

// Bind positionDiv() to Window Resize and Trigger at Start //
$(window).resize(function(){
    positionDiv($('#theDiv'), 100);
}).trigger('resize');

// Bind Toggle to Button //
$('button').on('click', function(){
    $('#theDiv').slideToggle();
});​ 
```

**[在这里演示](http://jsfiddle.net/B5dGq/2/)**

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:17:07.740

那这个呢？ [http://jsfiddle.net/fZGGG/6/](http://jsfiddle.net/fZGGG/6/)

# python - 为什么“raise IOError("cannot identify image file")”只显示一部分时间？

> ID：11593158
> 
> 赞同：2
> 
> 时间：2012-07-21T14:49:53.857
> 
> 标签：python, debugging, io

我写了一个小程序，它从[NOAA](http://tidesandcurrents.noaa.gov/)下载最新的每日潮汐图，在包含潮汐信息的图像中添加一个文本表，然后将此图像设置为我的桌面壁纸。

```
from bs4 import BeautifulSoup
import Image, ImageDraw, ImageFont
from urllib import urlretrieve
import urllib2
import time
import ctypes
import sys
import os
import datetime
import traceback

def Fetch_tideGraph():
    # Fetch the Tides Graph .gif
    #
    # Fetch the Station Home Page
    try:
        url = 'http://tidesandcurrents.noaa.gov/noaatidepredictions/viewDailyPredictions.jsp?Stationid=8637689'
        page = urllib2.urlopen(url)
        soup = BeautifulSoup(page.read())

        # Find the Url to the tides graph
        ImgElement = str(soup.find_all('input', { "alt" : "Daily Tide Prediction graphical plot" }))
        soup = BeautifulSoup(ImgElement)
        tag = soup.input
        src = str(tag['src'])
        imgUrl = 'http://tidesandcurrents.noaa.gov/noaatidepredictions' + src.lstrip('.')
        print imgUrl
    except Exception, e:
        print "Failed to Load Webpage"
        traceback.print_exc()
        raw_input('Press Enter to exit...')
        sys.exit()

    # Download the tide graph
    try:
        print "Downloading gif....."
        urlretrieve(imgUrl, "C:\\Users\\Jack\\Documents\\Py Projects\\tides.gif")
        # Allow time for image to save:
        time.sleep(5)
        print "Gif Downloaded."
    except:
        print "Failed to Download new GIF"
        raw_input('Press Enter to exit...')
        sys.exit()

    # Convert gif to jpg
    try:
        print "Converting GIF to JPG...."
        Image.open("C:\\Users\\Jack\\Documents\\Py Projects\\tides.gif").convert('RGB').save("C:\\Users\\Jack\\Documents\\Py Projects\\tides.jpg")
        print "Image Converted"
    except Exception, e:
        print "Conversion FAIL:", sys.exc_info()[0]
        traceback.print_exc()
        pass

def update_wallpaper():
    # Change the Wallpaper
    imgPath = 'C:\\Users\\Jack\\Documents\\Py Projects\\tides.jpg'
    SPI_SETDESKWALLPAPER = 20
    try:
        print "Updating WallPaper..."
        ctypes.windll.user32.SystemParametersInfoA(SPI_SETDESKWALLPAPER, 0, imgPath, 0)
        print "Wallpaper Updated"
    except:
        print "Wallpaper update FAIL"
        raw_input('Press Enter to exit...')

def todays_tide():
    # Print Table of Todays Tides
    # Open Tide Tables and Image File:
    try:
        info = open('C:\\Users\\Jack\\Documents\\Py Projects\\AnnualTides.txt', 'r')
        img = Image.open('C:\\Users\\Jack\\Documents\\Py Projects\\tides.jpg')
    except IOError:
        print "Tide table look-up failed."
        traceback.print_exc()
    # Load Font:
    f = ImageFont.load_default()
    draw = ImageDraw.Draw(img)
    # Lookup todays tides by matching date to table:
    now = datetime.datetime.now()
    date = now.strftime("%Y/%m/%d")
    tomorrow = now.strftime("%Y/%m/") + str(now.day+1)
    # Draw on image:
    y = 30
    head = '   Date    Day Time      Ft cm High/Low'
    draw.text((150, 20), head, (0,0,0), font=f)
    for line in info.readlines():
        if date in line or tomorrow in line:
            line = line.replace('\t', ' ')
            draw.text((150, y), line, (0,0,0), font=f)
            y += 10
    info.close()
    img.save("C:\\Users\\Jack\\Documents\\Py Projects\\tides.jpg")

##########################################

def main():
    try:
        Fetch_tideGraph()
        todays_tide()
        update_wallpaper()
        raw_input('Press Enter to exit...')
    except:
        print "Error in main()", sys.exc_info()[0]
        raw_input('Press Enter to exit...')

###########################################

if __name__ == "__main__":
    main() 
```

尽管代码相当难看，但似乎运行良好，除了一个我似乎无法解决的小错误。大多数时候，当我运行程序时，一切都很顺利，但每运行几次，我都会得到以下输出：

```
>>> 
http://tidesandcurrents.noaa.gov/noaatidepredictions/serveimage?filename=images/8637689/21072012/855/8637689_2012-07-22.gif
Downloading gif.....
Gif Downloaded.
Converting GIF to JPG....
Conversion FAIL: <type 'exceptions.IOError'>
Traceback (most recent call last):
  File "C:\Users\Jack\Documents\Py Projects\Tides.py", line 54, in Fetch_tideGraph
    Image.open("C:\\Users\\Jack\\Documents\\Py Projects\\tides.gif").convert('RGB').save("C:\\Users\\Jack\\Documents\\Py Projects\\tides.jpg")
  File "C:\Python27\lib\site-packages\PIL\Image.py", line 1980, in open
    raise IOError("cannot identify image file")
IOError: cannot identify image file
Updating WallPaper...
Wallpaper Updated
Press Enter to exit...
>>> 
```

帮助我理解和纠正这个错误。为什么它只在部分时间发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T15:40:13.387

IOError 表明您的 gif 文件不完整，因此无法识别为 PIL 的图像。最有可能的问题是您的下载完成所需的时间超过了您在`try:`块中允许下载 gif 文件的 5 秒。

您可以尝试其他几种获取 url 的方法，以确保在继续之前获得完整的文件。[这个](https://stackoverflow.com/a/22776/961943)有进度条，也可以[在这里](https://stackoverflow.com/q/862173/961943)和[这里](https://stackoverflow.com/q/862173/961943)试试。

# qt - QTCreator 使用 INSTALLS 将文件复制到输出目录

> ID：11593165
> 
> 赞同：12
> 
> 时间：2012-07-21T14:50:37.927
> 
> 标签：qt, build, qt-creator, qmake

我有两个子目录`docroot`，`config`在我的 Qt 项目中。每当我构建/调试项目时，应将这些目录中的文件复制到构建目录。

从[https://stackoverflow.com/a/3991210/356726](https://stackoverflow.com/a/3991210/356726)开始，这可以通过使用`INSTALLS`（[QtDoc ）来实现，这似乎比运行复制命令（例如](https://doc.qt.io/qt-5/qmake-variable-reference.html#installs)[这里](https://stackoverflow.com/a/3984180/356726)）容易得多。[此处](https://stackoverflow.com/a/6776872/356726)描述了一种类似的方法。

```
config.path    = $${DESTDIR}/config
config.files   = config/*
docroot.path   = $${DESTDIR}/docroot
docroot.files  = docroot/*
INSTALLS       += config docroot 
```

但是，当我在 Qt Creator 中运行构建时，什么也没有发生。这里[说](https://stackoverflow.com/a/6292967/356726)我需要运行`make install`。每当我构建时，我能否以某种方式从 Qt Creator 中自动触发/执行此操作。我总是需要最新版本的文件。

编辑：最终我用`$$OUT_PWD`而不是`$$DESTDIR`

来自 Logan 的原始评论[：](https://stackoverflow.com/a/10058744/356726) “请注意：我使用它`$$OUT_PWD`而不是`$$DESTDIR`让它工作。供参考`$$OUT_PWD`的是程序构建到`$$PWD`的文件夹，并且是构建程序的文件夹 - 换句话说，它是.pro 文件是。”

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-22T09:08:18.650

您需要的是自定义构建步骤。

1.  切换到**项目**模式：按 Ctrl+5。
2.  在**Build Steps下的****Build Settings**选项卡上，单击**Add Build Step**。
*****   从菜单中选择**制作。***   将**install**写入**Make 参数：**文本输入框。****

 ****（我检查这些的版本是 Qt Creator 2.4.1。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T22:15:41.333

我在 Window 7 上使用 Shadow Build，遇到了和你一样的问题。

此外，在设置我`INSTALLS`并运行 make install 后，我收到以下消息：

> `install' 不需要做任何事情。

原因是您必须自己设置 $$DESTDIR。

就我而言，我想复制 *.qml 文件，这就是我实现它的方式：

```
# if you are using Shadow build, you need to get the output folder
CONFIG(release, debug|release): DESTDIR = $$OUT_PWD/release
CONFIG(debug, debug|release): DESTDIR = $$OUT_PWD/debug

# if you are using normal build (non-shadow) that would have worked as well.
CONFIG(release, debug|release): DESTDIR = release
CONFIG(debug, debug|release): DESTDIR = debug    

QmlFiles.path = $$DESTDIR/Qml
QmlFiles.files += $$files(Qml/*.qml)

INSTALLS += QmlFiles 
```

**编辑 ：**

我发现它`$$OUT_PWD`可以用来查找 Shadow Build Output 路径。因此，我修复了最终接近您使用的代码。****

# css - twitter bootstrap缩略图对齐问题

> ID：11593167
> 
> 赞同：3
> 
> 时间：2012-07-21T14:50:51.863
> 
> 标签：css, twitter-bootstrap, thumbnails

我在 Twitter Bootstrap 中对齐缩略图时遇到问题：

1.  我正在使用流体布局
2.  我的缩略图是 183 x 154 像素
3.  我想使用固定的图像尺寸，但边距可变，并且缩略图在它们所在的区域内完全对齐。

**这是我到目前为止的结果：**

[http://i.stack.imgur.com/1qUA6.png](http://i.stack.imgur.com/1qUA6.png)

如您所见；图像向左对齐。缩略图是这样包装的：

```
 <div class="row-fluid">
     <div class="span6"> 
```

我的html：

```
 <ul id="nwthumbs">
     <li><a href="#" ><img src="Fernando-Alonso-Ferrari-3_2799133.jpg"><h2><span>Fernando Alonso has credited Ferrari's decision to stop for a new set of we...</span></h2></a>
      <button class="btn btn-mini" type="button" >Read More</button></li>
      <li><a href="#" ><img src="Sir-Alex-Ferguson_2794602.jpg">
          <h2><span data-bind="html: titleShortened">Sir Alex Ferguson says there is 'no chance' of Manchester United repeating ...</span></h2></a><button class="btn btn-mini" type="button" >Read More</button></li><li><a href="#" ><img src="Paul-Bohan-2012_2799199.jpg">
 <h2><span>Local Hero claimed a first victory of the year with a determined effort in ...</span>
      </h2> </a><button class="btn btn-mini" type="button" >
                                        Read More</button>
                                </li>
              <li><a href="#" ><img src="Douglas_2675905.jpg">
      <h2><span>FC Twente chairman Joop Munsterman admits he is unsure whether Newcastle Un...</span></h2> </a><button class="btn btn-mini" type="button" >
                                        Read More</button>
                                </li>
                                <li><a href="#" >
                  <img src="Darryl-Westlake-Walsall_2465450.jpg">
                                    <h2>
      <span>Sheffield United have confirmed the signing of promising defender Darryl We...</span>
                                    </h2>
                                </a>
                                    <button class="btn btn-mini" type="button" >
                                        Read More</button>
                                </li>
   </ul> 
```

我正在使用 Twitter 引导程序。

到目前为止，我尝试的是使图片大小可变；宽度 100% 和高度 100%，可以，但是当调整到较小的 ViewPort 时，它将调整图像的大小而不是包装图像，以便它们出现在两列中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T03:39:27.957

Try with this CSS :

```
#nwthumbs {
  text-align:center;
}

#nwthumbs > li {
    display: inline-block;
    *display:inline; /* ie7 fix */
    float: none; /* this is the part that makes it work */
} 
```

# ruby-on-rails - 如何在 Rails 中使用 Paperclip 将文件系统中的图像添加到模型中？

> ID：11593172
> 
> 赞同：4
> 
> 时间：2012-07-21T14:51:39.093
> 
> 标签：ruby-on-rails, ruby, api, gem, paperclip

我正在构建一个用于评论电影的应用程序。我已经从 API 缓存了很多电影数据。本质上，我有一个具有`:image`回形针属性的电影模型。我所做的是使用 rake 任务将 API 中每部电影的远程图像缓存到我的文件系统中。我想做的是以下几点：

*   对于我从 API 中检索到的带有图像的每一部电影，将其`:image`属性设置为刚刚存储在我的文件系统中为该特定电影存储的相同图像。

回形针可以做到这样的事情吗？还是我需要研究其他东西？

使用我当前的代码，我可以获得对每个图像对象的引用，但 Paperclip 是否允许我将模型的 :image 属性的值设置为原始图像对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:43:57.017

是的，应该问题不大。

```
movie = Movie.first
movie.image = File.open("...")
movie.save! 
```

# java - 如何理解JVM中的符号方法名？

> ID：11593176
> 
> 赞同：1
> 
> 时间：2012-07-21T14:52:26.840
> 
> 标签：java, methods, jvm, method-names

我试图转储方法的符号名称。例如

```
<SystemAppCL,Ldacapo/parser/Config$OutputFile;>.hasLines()Z 
```

奇怪的是，我也有一些相似的名字。例如

```
<SystemAppCL,Ldacapo/parser/Config$OutputFile;,<init>,(Ldacapo/parser/Config;Ljava/lang/String;)V>
<SystemAppCL,Ldacapo/parser/Config$OutputFile;>.<init>(Ldacapo/parser/Config;Ljava/lang/String;)V 
```

这两个代表相同的方法吗？他们俩都合法吗？为什么它们不同？

谢谢！

# javascript - Javascript：获取图像大小

> ID：11593179
> 
> 赞同：-1
> 
> 时间：2012-07-21T14:52:49.253
> 
> 标签：javascript, jquery, image

我无法获得正确的图像尺寸

这是HTML：

```
<img id="image" src="http://javascript.ru/forum/images/ca_serenity/misc/logo.gif"
    height="20">

<div id="result"></div>
correct result: 76 
```

和javascript：

```
var v1 = $('#image').height();
var v2 = $('#image').removeAttr('height').height();
var i =  $('<img>').attr('src',  $('#image').attr('src'));
var v3 = i.height()

i.one('load', function() {
    var v4 = $(this).height();
    $('#result').text(v1 + " " + v2 + " " + v3 + " " + v4);
}).each(function() {
    if(this.complete) {
        $(this).load();
    }
}); 
```

我用了4种方法，都失败了。
**更新：**方法 2 有效，但我想使用方法 4，因为在脚本执行时可能未加载图像。

测试链接：http: [//jsfiddle.net/cMZK7/7/](http://jsfiddle.net/cMZK7/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:56:19.157

您正在引用图像所在的 DIV，而不是图像本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:56:19.687

问题可能是您在事件`src`之前设置属性。`load`在许多浏览器上，这将阻止事件处理程序触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T14:57:47.937

看起来您使用图像 id 抓取 div 的高度，而不是抓取该 div 内图像的高度。试试这个：

```
var v1 = $('#image img').height(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T15:00:01.893

您必须删除该`height`属性，并等到图像已加载（使用`load`事件）。

或者，创建一个新的图像对象，将相同的图像加载到其中，然后等待图像加载完毕。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-21T15:00:57.233

前两个是周围的高度`div`，而不是`img`。

`console.log($('img').height(), $('img').width())`给我 20px 和 88px，这是图像的正确尺寸

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-21T15:08:42.470

不知道我明白了，但如果重点是在 height 属性中找到值，这将起作用：

```
var height = $("#image img").prop('height'); 
```

要获得图像的实际高度，以及实际高度，我的意思是图像实际的高度，而不是您在 CSS 等中设置的高度，这样的事情应该可以工作：

```
var img = new Image();
    img.src = ​$('img', '#image')[0]​.src;
    img.onload = function() {
        $("#result").html(img.height);
    } 
```

[小提琴](http://jsfiddle.net/cMZK7/8/)

缓存图像时，旧版本的 IE 会出现 onload 事件问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-21T15:10:25.150

试试这个，

```
<img id="image" src="http://javascript.ru/forum/images/ca_serenity/misc/logo.gif" />

<script>
$("#image").load(function() {

    alert($("#image").height()); // Alerts 76
    });  

</script>    
​ 
```

在这里[摆弄 http://jsfiddle.net/FgrQW/1/](http://jsfiddle.net/FgrQW/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-21T14:57:59.083

尝试

```
$('<img>').get()[0].height; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-04T10:54:01.713

完整正确答案：[https ://stackoverflow.com/a/1944298/966972](https://stackoverflow.com/a/1944298/966972)

（它在这个问题的评论中，但不在答案中）

# cmake - CMake：如何在 ADD_CUSTOM_TARGET 中将分号 (;) 作为命令选项输出

> ID：11593180
> 
> 赞同：13
> 
> 时间：2012-07-21T14:52:54.103
> 
> 标签：cmake

假设我有以下 CMake 片段：

```
MACRO(ADD_CUSTOM_TARGET_COMMAND tag OUTPUT file)
     ADD_CUSTOM_TARGET(tag
        ${ARGN}
     )

     ADD_CUSTOM_TARGET(OUTPUT file
        ${ARGN}
     )
ENDMACRO()

ADD_CUSTOM_TARGET_COMMAND(tag
    OUTPUT file
    COMMAND git tag -a -m "${msg}" 1.0.0 HEAD
    VERBATIM
) 
```

如果`msg`包含分号如`"msg1;msg2"`，则实际命令扩展为

```
git -a -m "msg1" "msg2" 1.0.0\. HEAD 
```

这会导致语法错误。

我曾试图用`\`逃避`;`但无济于事。

我应该怎么办？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-14T18:36:48.133

从 2.8.11 版本开始有一个特殊的令牌： $<SEMICOLON> ( [http://www.cmake.org/cmake/help/v2.8.11/cmake.html#command:add_custom_command](http://www.cmake.org/cmake/help/v2.8.11/cmake.html#command:add_custom_command) )。

例如，我将它用于这样的 find 命令：

```
find /path/to/search -name some\*name \! -path excluded\*Pattern -exec ln -sf "{}" \; 
```

以下方式：

```
set(
    FIND_ARGUMENTS
    "${SEARCH_PATH} -name some\\*name \\! -path exclued\\*Pattern -exec ln -sf {} \\$<SEMICOLON>"
)

separate_arguments(FIND_ARGUMENTS)

add_custom_command(TARGET ${PROJECT}
    POST_BUILD
    COMMAND "find" ${FIND_ARGUMENTS}
    WORKING_DIRECTORY ${WORKING_PATH}
) 
```

请注意，对于 add_custom_command，不需要使用单独的参数 VERBATIM 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:22:48.847

CMake 使用分号管理列表，所以我认为没有比仅将消息写入文件和`git tag -F file`

# c# - 具有复杂类型的 EF4.1 模型，主键作为字符串不能正常工作

> ID：11593181
> 
> 赞同：1
> 
> 时间：2012-07-21T14:52:59.203
> 
> 标签：c#, asp.net, entity-framework

我有以下两种型号

```
[DataContract]
public class Event
{       
    [Key]
    public int ID { get; set; }
    public string Name { get; set; }
    public Place Place { get; set; }
}

[DataContract]
public class Place
{
    [Key]
    public string ID { get; set; }
    public string Name { get; set; }
} 
```

和数据上下文类：

```
public class myDB: DbContext
{
    public DbSet<Event> Events { get; set; }
    public DbSet<Place> Places { get; set; }
} 
```

例如，我运行以下代码

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        Foo();
    }

    private void Foo()
    {
        var db = new myDB();

        var place = new Place
                        {
                            ID = "{59E0F90C-03DB-453C-8C9E-4747957ED37E}",
                            Name = "Home",
                        };

        db.Places.Add(place);
        db.SaveChanges();

        var @event = new Event
        {
            Name = "Test",
            Place = place,
            TimeFrame = new TimeFrame() {StartTime = DateTime.Now, EndTime = DateTime.Now }
        };
        db.Events.Add(@event);
        db.SaveChanges();
        var eventIndex = @event.ID;

        var ev = db.Events.Find(@eventIndex);
        var evPlace = ev.Place;

        var pl = db.Places.Find("{59E0F90C-03DB-453C-8C9E-4747957ED37E}");
    } 
```

一切正常，evPlace 是我刚刚添加到数据库的对象，pl 也不为空。

但是当我尝试从控制器运行以下代码时，其中 5 是新事件对象的 ID

```
var ev = _db.Events.Find(5);
var evPlace = ev.Place;

var pl = _db.Places.Find("{59E0F90C-03DB-453C-8C9E-4747957ED37E}"); 
```

pl 和 ev 不为空，但 ev.Place 为空 (evPlace)

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:59:37.293

该问题与主键是否为 a`string`无关。通常实体框架不会自动加载导航属性。您需要明确指定：

```
var ev = db.Events.Include(e => e.Place).SingleOrDefault(e => e.ID == 5); 
```

或者：如果您将该`Place`属性声明为`virtual`...

```
public virtual Place Place { get; set; } 
```

...EF 将为此属性启用*延迟加载*`Place`，并在您在代码中访问它时立即从数据库加载。您的代码示例将起作用。请注意，延迟加载会导致对数据库的第二次查询/往返，而急切加载 ( `Include`) 在单个查询中同时加载事件和地点。

更多关于加载相关实体的[信息在这里](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)。

# eclipse - 删除 Galileo 中的每个 Eclipse 插件

> ID：11593183
> 
> 赞同：0
> 
> 时间：2012-07-21T14:53:19.983
> 
> 标签：eclipse, eclipse-plugin, eclipse-3.5

我的 Eclipse 运行速度非常慢，因为我安装了数千个插件。我和另一个使用 eclipse 但他没有的朋友交谈过。我觉得这些都不是必需的，我什至没有安装这么多。我有数千个插件，我尝试重新安装 eclipse，但我需要找到一种方法来删除每个 eclipse 插件。

尝试手动删除插件每个插件最多需要 5 分钟，因此我可能需要几个月或几年的时间才能真正手动删除所有这些。

eclipse中是否有删除所有插件的功能？我也在使用 WINDOWS XP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:42:12.663

首先，您需要了解 Eclipse 中的几乎*所有内容*都是插件。Eclipse 有一个非常小的核心运行时 (Equinox)，它可以从插件加载所有功能。你不能只是“删除每个插件”，因为这样做会让你一无所有。

此外，仅仅因为安装了插件*并不*意味着它总是被加载或占用资源。Eclipse 使用“延迟加载”架构，仅在实际调用它提供的某些功能时才加载插件。有些插件可能写得很糟糕，以至于它们加载得太猛了，但这将是罕见的例外。所以，一般来说，有很多插件对性能来说*不是*问题。

如果您确实有要删除的插件，**则不能**只从`plugins`文件夹中删除它 - 正如您所看到的那样，这会搞砸您的 Eclipse 安装。***不要那样做。***

管理已安装的功能（包括安装可卸载的功能）的一种方法是打开“*关于*”对话框，然后单击“*安装详细信息*”按钮。在那里，您将看到已安装的功能列表；您可以选择一个功能，如果可以卸载它，*卸载...*按钮将被启用。

通常是一个糟糕的第三方插件/功能（不是来自 eclipse.org 的东西）导致 Eclipse 安装出现问题；尝试通过消除过程找到它可能是什么（卸载自 Eclipse 新版本以来您可能已安装的*所有*第三方插件）。

最后，作为最后的手段，完全删除 Eclipse（只需从文件系统中删除它）并重新安装它是微不足道的。

说了这么多，性能问题通常是由于机器动力不足。你有什么样的处理器？Windows 启动后，您的系统有多少可用 RAM？您是否指定了内存设置[`eclipse.ini`](http://wiki.eclipse.org/Eclipse.ini)？

# html - 如何从 dart 请求持久存储配额？

> ID：11593187
> 
> 赞同：2
> 
> 时间：2012-07-21T14:54:44.537
> 
> 标签：html, dart, html5-filesystem

我正在从 dart 创建像这样的持久性 html5 文件系统存储：

```
window.webkitRequestFileSystem(Window.PERSISTENT, 
       5 * 1024 * 1024, onFSOpened, onFSError); 
```

文件系统上的任何操作都会失败，并出现错误 QUOTA_EXCEEDED_ERR。但是，它适用于 TEMPORARY。

此[线程](http://code.google.com/p/chromium/issues/detail?id=85000)中的回复表明，对于持久存储，我应该使用此 JavaScript API 手动请求配额

```
window.webkitStorageInfo.requestQuota 
```

我在 dart 中找不到 window.webkitStorageInfo （检查了最新版本）。任何指针？

谢谢！

编辑：澄清一下，`window.webkitRequestFileSystem`成功返回。但是，文件系统上的任何写入操作都会引发 Quota Exceeded 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:10:45.463

我刚刚使用 Dartium 在 build 9797 上尝试了这条线，它对我有用：

```
window.webkitRequestFileSystem(Window.PERSISTENT, 
    5 * 1024 * 1024, (f) => print('got it')); 
```

# android - 哪些数据库操作必须在后台执行？

> ID：11593192
> 
> 赞同：1
> 
> 时间：2012-07-21T14:55:36.033
> 
> 标签：android, database, cursor, background-thread

我对必须在后台线程中执行哪些操作有点困惑：

```
Cursor curserU = myDataBase.rawQuery("some query");
startManagingCursor(curserU);
curserU.moveToFirst();
curserU.someFuctionWhichWillReturnData(); 
```

如果只有这条线在后台运行就足够了吗：

```
 Cursor curserU = myDataBase.rawQuery("some query"); 
```

还是一切都必须在后台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:18:22.930

放入`rawQuery()`后台线程就足够了。例如，当您传递`Cursor`到时，它在 on上运行。但考虑使用[CursorLoader](http://developer.android.com/reference/android/content/CursorLoader.html)，因为[startManagingCursor()](http://developer.android.com/reference/android/app/Activity.html#startManagingCursor%28android.database.Cursor%29)被标记为已弃用。`SimpleCursorAdapter``Cursor``UI thread`

# fancybox - Fancybox 显示错误

> ID：11593193
> 
> 赞同：0
> 
> 时间：2012-07-21T14:55:48.433
> 
> 标签：fancybox

我最近设计了一个弹出式 html 文件，通过我的 magento 模板中的 fancybox 调用。

它适用于所有页面，除了[主页](http://www.tapet-online.ro)，它在页面末尾出现错位而不是出现在窗口中心。

Firebug 对我来说没有任何错误，我是新手，不知道去哪里找。

一些指点，有人吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:13:02.197

您正在加载 3 个 Fancybox 实例：

[http://www.tapet-online.ro/skin/frontend/default/acumen/js/jquery.fancybox-1.2.5.pack.js](http://www.tapet-online.ro/skin/frontend/default/acumen/js/jquery.fancybox-1.2.5.pack.js)

[http://www.tapet-online.ro/skin/frontend/default/acumen/fancybox/jquery.fancybox-1.3.4.pack.js](http://www.tapet-online.ro/skin/frontend/default/acumen/fancybox/jquery.fancybox-1.3.4.pack.js)

[http://www.tapet-online.ro/skin/frontend/default/acumen/fancybox/jquery.fancybox-1.3.4.js](http://www.tapet-online.ro/skin/frontend/default/acumen/fancybox/jquery.fancybox-1.3.4.js)

你只需要一个，可能是这样的：

[http://www.tapet-online.ro/skin/frontend/default/acumen/fancybox/jquery.fancybox-1.3.4.pack.js](http://www.tapet-online.ro/skin/frontend/default/acumen/fancybox/jquery.fancybox-1.3.4.pack.js)

# emacs - 格式时间字符串中的 %X 和 %x 有什么区别？

> ID：11593196
> 
> 赞同：0
> 
> 时间：2012-07-21T14:56:11.310
> 
> 标签：emacs, elisp

“%X”和“%x”在跟随函数上有什么区别？！

```
(defvar insert-time-format "%X" 
"*Format for \\[insert-time] (c.f. 'format-time-string').")

-----------

(defvar insert-date-format "%x"
"*Format for \\[insert-date] (c.f. 'format-time-string').") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:10:31.893

显然，如果您看到 insert-time-format 的描述，您将看到：

%x 是区域设置的“首选”日期格式。

%X 是区域设置的“首选”时间格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:12:14.733

```
%x inserts the time.
%X inserts the date. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T16:04:06.987

您可能会根据变量名称`insert-time-format`和对差异做出很好的猜测`insert-date-format`，但是之后您的第一个调用端口应该是`format-time-string`对这两个变量的帮助中提到的函数的帮助：

`C-h``f` `format-time-string` `RET`

```
format-time-string is a built-in function in `C source code'.

(format-time-string FORMAT-STRING &optional TIME UNIVERSAL)

Use FORMAT-STRING to format the time TIME, or now if omitted.
TIME is specified as (HIGH LOW . IGNORED), as returned by
`current-time' or `file-attributes'.  The obsolete form (HIGH . LOW)
is also still accepted.
The third, optional, argument UNIVERSAL, if non-nil, means describe TIME
as Universal Time; nil means describe TIME in the local time zone.
The value is a copy of FORMAT-STRING, but with certain constructs replaced
by text that describes the specified date and time in TIME:

%Y is the year, %y within the century, %C the century.
%G is the year corresponding to the ISO week, %g within the century.
%m is the numeric month.
%b and %h are the locale's abbreviated month name, %B the full name.
%d is the day of the month, zero-padded, %e is blank-padded.
%u is the numeric day of week from 1 (Monday) to 7, %w from 0 (Sunday) to 6.
%a is the locale's abbreviated name of the day of week, %A the full name.
%U is the week number starting on Sunday, %W starting on Monday,
 %V according to ISO 8601.
%j is the day of the year.

%H is the hour on a 24-hour clock, %I is on a 12-hour clock, %k is like %H
 only blank-padded, %l is like %I blank-padded.
%p is the locale's equivalent of either AM or PM.
%M is the minute.
%S is the second.
%N is the nanosecond, %6N the microsecond, %3N the millisecond, etc.
%Z is the time zone name, %z is the numeric form.
%s is the number of seconds since 1970-01-01 00:00:00 +0000.

%c is the locale's date and time format.
%x is the locale's "preferred" date format.
%D is like "%m/%d/%y".

%R is like "%H:%M", %T is like "%H:%M:%S", %r is like "%I:%M:%S %p".
%X is the locale's "preferred" time format.

Finally, %n is a newline, %t is a tab, %% is a literal %.

Certain flags and modifiers are available with some format controls.
The flags are `_', `-', `^' and `#'.  For certain characters X,
%_X is like %X, but padded with blanks; %-X is like %X,
but without padding.  %^X is like %X, but with all textual
characters up-cased; %#X is like %X, but with letter-case of
all textual characters reversed.
%NX (where N stands for an integer) is like %X,
but takes up at least N (a number) positions.
The modifiers are `E' and `O'.  For certain characters X,
%EX is a locale's alternative version of %X;
%OX is like %X, but uses the locale's number symbols.

For example, to produce full ISO 8601 format, use "%Y-%m-%dT%T%z". 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-21T15:01:42.367

%x 将输入格式化为十六进制。%x 和 %X 的区别在于字母是大写的。

例如

> %x, 15 将是 f
> 
> %X, 15 将是 F

# android - android:background 不适用于 WebView？

> ID：11593197
> 
> 赞同：3
> 
> 时间：2012-07-21T14:56:11.657
> 
> 标签：android, android-webview

由于某种原因，我无法使用 .xml 更改 xml 中空 webView 的背景颜色`android:background`。虽然我可以使用这样的东西在java代码中改变它：

```
myWebView.setBackgroundColor(Color.parseColor("#D4CAB4")); 
```

但我更喜欢在 xml 中执行此操作，但我找不到`android:background`无法正常工作的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:19:59.257

如果可以在 xml 布局中设置 WebView 背景颜色，答案是**“否”**，原因是：

1.  设置 WebView 的背景颜色。（XML 布局）
2.  您在活动类的 webView 上加载数据。
3.  您在步骤 1 中设置的背景将被忽略并设置默认颜色。
4.  剩下的唯一方法就是在加载数据后设置WebView的背景。

我希望这可以帮助您理解这里的案例。

# compiler-construction - 为什么较新的语言能够显示更好、更精确的错误消息？

> ID：11593208
> 
> 赞同：2
> 
> 时间：2012-07-21T14:57:10.477
> 
> 标签：compiler-construction, programming-languages, compiler-errors

为什么以及如何像 Python 或 Java 这样的语言能够显示精确且易于理解的错误消息，而真实且经过测试的长期 C/C++ 编译器显示神秘且通常不相关的错误消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T20:51:09.303

**这不是语言；这是编译器的时代。**自 1970 年代后期 Unix 开始进入大学以来，C 一直是*事实上的*标准。Microsoft Windows 的市场渗透只是加强了这一标准。因为 C 是标准，所以没有人必须编写一个好的编译器来让人们使用它。在 1970 年代和 1980 年代的机器上，生成漂亮的错误消息需要时间和空间，而这些时间和空间被认为是宝贵的资源。即使错误消息很糟糕，人们也非常高兴获得免费的 C 编译器。

来自旧 C 编译器的错误消息非常糟糕，以至于有人拿它们开玩笑；这是来自*Unix Haters 手册*的第 2 章：

> 肯汤普森有一辆他帮助设计的汽车。与大多数汽车不同，它既没有速度表，也没有油量表，也没有其他困扰现代驾驶员的众多白痴灯。相反，如果司机犯了错误，一个巨大的“？” 在仪表板中央亮起。“经验丰富的司机，”汤普森说，“通常会知道问题所在。”</p>

到 1990 年代，当更新的语言传播时，机器速度更快，内存更多，提供良好的错误消息是提高思维共享的一种方法。

如果您尝试使用相对较新的 C 编译器，例如[clang](http://clang.llvm.org)，您会发现它会产生极好的错误消息 — 有时甚至包括突出显示和颜色。（我敢打赌来自 Visual Studio 的错误消息也很好，但我不确定。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:03:43.830

**编译时错误**

由于条件编译（预处理器、宏）以及非常强大的模板（比例如 C# 或 Java 更通用），编译时错误通常很神秘。

然而，这一切都取决于编译器，例如较新的 CLang 声称更多可读的错误消息。

在我看来，开发是顺序的，错误的行号通常就足够了（我真的不需要阅读错误信息）。

**运行时错误**

**性能：** C/C++ 具有“零开销”目标，因此例如函数名称被剥离，函数被内联。许多错误是“未定义的行为”，以允许更快的实施。它还允许您进行几乎任何事情 - 甚至是危险的操作 - 不受限制。

**并非如此：**许多 C++ 编译器可以在异常时产生堆栈跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:33:33.483

我认为这可能是因为对编程风格/可能性/语法等施加了额外的限制（这对于 C/C++ 等旧语言来说非常困难，因为需要向后兼容）。例如，更严格的约束最大限度地减少潜在错误类型的数量，从而简化精确的错误检测。

# c++ - Eclipse中的C ++字符串拆分函数错误但可以编译

> ID：11593210
> 
> 赞同：-1
> 
> 时间：2012-07-21T14:57:50.397
> 
> 标签：c++, string, boost, split

Eclipse 在 push_back 行上显示以下错误：

无效参数的候选者是： `void push_back(const std::basic_string<char,std::char_traits<char>,std::allocator<char>> &)`

**我的问题是，如何确保向量包含字符串而不是 basic_strings？**

我在另一段代码中发现我想访问这个向量，但我在编译它时遇到了麻烦，它似乎后来知道它是一个 basic_string 而不是“std::string”，在当前上下文中我知道我只会使用 char 但我想将超类保留在那里，以便将来如果我换成 w-char 等，我不必调整任何东西。

我已经尝试将其转换为字符串，但这似乎不起作用

```
 std::string test = (std::string)tokens[1]; 
```

最终目标是用该向量构造一些对象

```
if(tokens->size() == 3){
TestObject test = new TestObject(tokens[1],)tokens[2])
} 
```

这是我在 Stackoverflow 上找到的函数，由 stackoverflow 用户 [Function Origin提出](https://stackoverflow.com/questions/2727749/c-split-string)

感谢您的帮助。

```
void TestClass::splitString(const std::string &str, std::vector<std::string>* tokens){
    boost::char_separator<char> sep(",");

    std::string separator;
    boost::tokenizer< boost::char_separator<char> > tok(str,sep);
    for(boost::tokenizer< boost::char_separator<char> >::iterator it=tok.begin(); it != tok.end(); ++it)
    {    
      tokens->push_back(*it);
    }    
} 
```

没有匹配函数调用'TestObject::defineX(std::basic_string*)'</p>

```
accessing with defineX(vector[1].data()); 
```

没有匹配函数调用'TestObject::defineX(std::vector >&)'</p>

```
accessing with defineX(vector[1]); 
```

该函数的定义声明如下（也许这是问题所在？）：

```
typedef std::string td_MAP_KEY;
td_MAP_VALUE * TestObject::defineX(td_MAP_KEY key); 
```

我这样调用该方法，如果您热衷于编译它，它应该可以工作，不幸的是我无法在此处粘贴完整的代码，但下面的代码应该这样做：

```
std::string x = "one,two,three,four"
std::vector<std::string> * splittedString = new std::vector<std::string>;
splitString(x,splittedString);
TestObject * object = new TestObject();
object->defineX(splittedString[1]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:43:30.090

这段代码的问题：

```
std::vector<std::string> * splittedString = new std::vector<std::string>;
    :
object->defineX(splittedString[1]); 
```

是您定义`splittedString`为向量指针，并将其指向单个向量（而不是向量数组），然后尝试访问（不存在的）向量数组的第二个元素。你可能想要

```
object->defineX((*splittedString)[1]); 
```

它取消引用向量指针，然后获取向量的第二个元素。

# actionscript-3 - AS3 将 ARGB 值的 ByteArray 转换为 RGB uint

> ID：11593212
> 
> 赞同：3
> 
> 时间：2012-07-21T14:58:42.603
> 
> 标签：actionscript-3, flash, bytearray, bitmapdata, argb

我有一个 C++ QT 应用程序，它通过 TCP 套接字发送 ARGB 值的 ByteArray。图像为 100 x 100。问题是当我读取 ByteArray 时，我似乎无法正确显示图像。我尝试了很多不同的方法，这里是最接近我的 AS3 代码。

```
bitmapData.lock();
for(var x = 0;x<100; x++){
  for(var y = 0;y<100; y++){
    alphaValue = byteArray.readUnsignedByte();
    redValue = byteArray.readUnsignedByte();
    greenValue = byteArray.readUnsignedByte();
    blueValue = byteArray.readUnsignedByte();
    color = redValue << 16 | greenValue << 8 | blueValue;
    bitmapData.setPixel(y,x,color);
  }
}
bitmapData.unlock(); 
```

我现在只是不使用 alpha 值，因为我不确定如何处理它。Qt 说“图像使用 32 位 RGB 格式 (0xffRRGGBB) 存储。” 我也尝试过使用`readUnsignedInt()`，但这也不起作用。

这是我要发送的内容以及我在屏幕上看到的内容。

发送 : ![在此处输入图像描述](../Images/b7838ae83dbf8b4d4f82fa066a303b2f.png)Flash 收到![在此处输入图像描述](../Images/f8580400c9ff6c65d5352ed74edb1a13.png)

它很接近，但不完全正确。有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:10:40.350

更容易使用`readUnsignedInt`而不是多次调用`readByte`. 然后使用`bitmap.setPixel32`而不是`setPixel`. 这样您就不必解构和重建这些值。

`byteArray.endian = Endian.LITTLE_ENDIAN`您可能还必须根据编码方式切换字节顺序（例如）。我只是不记得它是哪种方式，所以如果它第一次不起作用，你可以尝试一下。

# javascript - Javascript数组是否对多个键进行排序会破坏以前的排序？

> ID：11593217
> 
> 赞同：0
> 
> 时间：2012-07-21T14:59:46.190
> 
> 标签：javascript

在这种环境下，我只能访问内部 Javascript 函数，因此无法加载外部库。

当尝试按内部、中间和外部 3 个键进行排序时，似乎只保留了我最后的排序。

```
function Claim(claimNumber, lastName, claimStatus, record)
{
    this.claimNumber = claimNumber;
    this.lastName = lastName;
    this.claimStatus = claimStatus;
    this.record = record;
}
function sortLastName(a, b) { 
    var o1 = a["lastName"].toUpperCase(); 
    var o2 = b["lastName"].toUpperCase(); 
    if (o1 < o2) return -1; 
    if (o1 > o2) return 1; 
    return 0; 
} 
function sortClaimNumber(a, b) { 
    var o1 = a["claimNumber"].toUpperCase(); 
    var o2 = b["claimNumber"].toUpperCase(); 
    if (o1 < o2) return -1; 
    if (o1 > o2) return 1; 
    return 0; 
} 
function sortClaimStatus(a, b) { 
    var o1 = ("00" + a["claimStatus"].toUpperCase()).substr(-2); 
    var o2 = ("00" + b["claimStatus"].toUpperCase()).substr(-2); 
    if (o1 < o2) return 1; 
    if (o1 > o2) return -1; 
    return 0; 
} 
var claimListArray = buildClaimList(record);
claimListArray.sort(sortClaimStatus);
claimListArray.sort(sortClaimNumber);
claimListArray.sort(sortLastName); 
```

输出应如下所示（lastname asc、claimnumber asc、claimstatus desc）：

```
AARDVARK   111222A    15
AARDVARK   111222A    6
AARDVARK   111222A    1
AARDVARK   222555C    8
AARDVARK   222555C    4
BANKS      123132Z    78 
```

但看起来像：

```
AARDVARK   111222A    15
AARDVARK   222555C    4
AARDVARK   111222A    1
AARDVARK   222555C    8
AARDVARK   111222A    6
BANKS      123132Z    78 
```

也就是说，只保留了lastName排序，就好像前两种排序没有发生一样。是否有一些关于数组和排序的东西我错过了忽略以前的排序？

有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:11:08.710

试试这样

```
function comp(a, b){
    var ret = sortLastName(a, b);
    if(ret != 0){
        return ret;
    }           
    ret = sortClaimNumber(a, b);
    if(ret != 0){
        return ret;
    }

    return sortClaimStatus(a, b);
}
claimListArray.sort(comp); 
```

**编辑**（马伏里奥）：

很抱歉编辑您的帖子，但这个解决方案虽然在技术上是正确的，但 Javascript 却很糟糕。像这样写：

```
claimListArray.sort(function(a, b) {
    return sortLastName(a, b)
        || sortClaimNumber(a, b)
        || sortClaimStatus(a, b);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:09:29.337

您需要一种排序方法，否则您将重新排序整个数组：

```
function sortAll(a, b) { 
    var o1 = ("00" + a["claimStatus"].toUpperCase()).substr(-2); 
    var o2 = ("00" + b["claimStatus"].toUpperCase()).substr(-2); 
    if (o1 < o2) return -1; 
    if (o1 > o2) return 1; 
    //If they are equal, compare with claimNumber
    o1 = a["claimNumber"].toUpperCase(); 
    o2 = b["claimNumber"].toUpperCase(); 
    if (o1 < o2) return -1; 
    if (o1 > o2) return 1; 
    //If they are equal, compare with lastName
    o1 = a["lastName"].toUpperCase(); 
    o2 = b["lastName"].toUpperCase(); 
    if (o1 < o2) return 1; 
    if (o1 > o2) return -1; 
    return 0; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:08:07.090

当然会发生这种情况，因为您要更改列表中的 Claims 元素位置 3 次。每个删除先前设置的位置。要实现您想要的顺序，您不能只对这个数组进行排序，而是从 Claims 键（可以在 Claims 元素之间更改位置）创建一个视图（可能是多维数组，每个 Claim 的键为一行）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T15:14:10.240

尊重输入中等效项的现有顺序的排序称为`stable`。正如您所注意到的，稳定性是排序中的一个重要特征。 [这个问题](https://stackoverflow.com/questions/3026281/array-sort-sorting-stability-in-different-browsers)讨论了内置排序在不同浏览器中的稳定性。

# ruby-on-rails - 如何修剪输入数组的 xpath 查询的输出

> ID：11593218
> 
> 赞同：0
> 
> 时间：2012-07-21T14:59:53.913
> 
> 标签：ruby-on-rails, xpath, nokogiri

我正在抓取网页[http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1](http://h10010.www1.hp.com/wwpc/ie/en/ho/WF06b/321957-321957-3329742-89318-89318-5186820-5231694.html?dnr=1)

完整代码位于[https://gist.github.com/3156035](https://gist.github.com/3156035)

该网页使用没有 CSS 的老式 html 表格，因此我使用 xpath 查找某些关键字（线索），然后定位下一个元素。然后将关键字输入以下循环

```
clues.each do |clue|
  #putting the output into quotes, incase the content contains a comma!
  csv_text << "\"#{doc.at_xpath("//td[text()='#{clue}']/following-sibling::td").text.strip}\""
  csv_text << ", " unless clues.last == clue
end 
```

由于数组使用 a 分隔值，因此`,`我可以将每个值添加到 csv 中自己的单元格中，这可以正常工作，但单元格保修显示为“1 年，取件和退货，零件和人工”

代码将其切碎并将其放入 3 个单元格中：“1 年”，然后是“取货和退货”，然后是“零件和人工”

我想要的是让它保持一个单元格：“1 年，取件和退货，零件和人工”

如何更改代码以*不*匹配单元格中的逗号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:26:15.313

令人困惑的部分是，当您真正询问如何创建正确的 CSV 时，您将其视为 Nokogiri 问题。

我建议使用 CSV 库：

```
CSV.open("path/to/output.csv", "wb") do |csv|
  #loop here over all your pages to scrape
    csv << clues.map{|clue| doc.at("//td[text()='#{clue}']/following-sibling::td").text.strip}
  #end loop
end 
```

这将自动创建有效的 CSV，其中包含正确引用的任何包含逗号的条目。

# cross-browser - angularjs ng-view 不适用于外部 templateUrl

> ID：11593221
> 
> 赞同：4
> 
> 时间：2012-07-21T15:00:17.853
> 
> 标签：cross-browser, angularjs

我想采用一个在我自己的域上运行良好的 Angular 应用程序并将其“嵌入”到其他几个站点中。

该应用程序使用带有 ng_view 指令的部分，因此我唯一需要做的就是将我的应用程序“注入”到我的一个页面中......

```
<div ng-app="myapp" ng-view></div> 
```

我的应用程序看起来像这样......

```
angular.module('myapp', ['myapp.filters', 'myapp.services', 'myapp.directives', 'ui']).
config(['$routeProvider', function($routeProvider) {
    $routeProvider.otherwise({templateUrl: 'partials/mainTemplate.html', controller: myController});
}]); 
```

这很好用，但是当我尝试将应用程序“注入”到另一个站点时，除了外部化脚本引用之外，我还将应用程序更改为如下所示......

```
angular.module('myapp', ['myapp.filters', 'myapp.services', 'myapp.directives', 'ui']).
config(['$routeProvider', function($routeProvider) {
    $routeProvider.otherwise({templateUrl: ''http://mydomain.com/partials/mainTemplate.html', controller: myController});
}]); 
```

但它不起作用......没有错误，没有任何东西，它只是不呈现我的应用程序。

有任何想法吗？是否允许外部部分引用？...浏览器是否过度保护？我应该采取完全不同的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-23T15:33:45.363

我认为您应该在 mydomain.com 上[启用 CORS](http://enable-cors.org/)以获得视图。而且，正如 bUKaneer 所说，您必须在 $sceDelegateProvider.resourceUrlWhitelist 中添加 mydomain.com

# objective-c - iOS - 如何使用无序 CGPoints 绘制特定的 CGPath

> ID：11593222
> 
> 赞同：7
> 
> 时间：2012-07-21T15:00:22.080
> 
> 标签：objective-c, ios, algorithm, quartz-2d

考虑这个 ASCII 绘图：

```
A _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ D
 |                               |
 |                               |
 |                               |
 |                               |
 |                               |
 |                               |
 |                               |
 |                               |
 |                               |
 |                               |
 |                               |
 |                               |
 |_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _|
B                                 C 
```

点 A、B、C 和 D`CGPoints`在 an中是已知的`NSMutableArray`，并已用于创建填充的`CGPath`. 现在考虑这张图：

```
A _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ D
 |                               |
 |                               |
 |                               |
 |                               |
 |            H _ _ _ I          |
 |             |     |           |
 |             |     |           |
 |      F _ _ _|     |           |
 |       |      G    |           |
 |       |           |_ _ _ K    |
 |       |          J      |     |
 |       |                 |     |
 |_ _ _ _| _ _ _ _ _ _ _ _ |_ _ _|
B         E               L       C 
```

`CGPoints`E、F、G、H、I、J、K 和 L 是已知的，并已附加到`NSMutableArray`.

**问题**

如何重新排列数组中的所有点以创建`CGPath`如下图所示的图形？

```
A _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ D
 |                               |
 |                               |
 |                               |
 |                               |
 |            H _ _ _ I          |
 |             |     |           |
 |             |     |           |
 |      F _ _ _|     |           |
 |       |      G    |           |
 |       |           |_ _ _ K    |
 |       |          J      |     |
 |       |                 |     |
 |_ _ _ _|                 |_ _ _|
B         E               L       C 
```

目前，我可以通过循环创建一个`CGPath`- 如果我知道 - 的顺序：`CGpoints`

```
CGPoint firstPoint = [[points objectAtIndex:0] CGPointValue];
CGMutablePathRef path = CGPathCreateMutable();
CGPathMoveToPoint(path, NULL, firstPoint.x, firstPoint.y);
for (int i = 0; i < [points count]; i++)
{
    CGPathAddLineToPoint(path, NULL, [[points objectAtIndex:i] CGPointValue].x, [[points objectAtIndex:i] CGPointValue].y);
}
CGPathCloseSubpath(path); 
```

...但这假设应该从数组`i`中的每个点到下一个点绘制一条线`i + 1`。在上图中，必须从`A → B`, `B → E`, `E → F`... `K → L`, `L → C`,绘制线条`C → D`。如果数组中 E 不在 B 之后且 C 不在 L 之后（它们不会），那么这显然不会正确绘制。

**更多信息**

1.  所有的线都是相互垂直的，所以所有的线都应该与它们之前和之后`CGPoints`共享一个`x`或`y`坐标。`CGPoint`
2.  （#1 的扩展）一个点总是与它之前和之后的点成直角。
3.  无法预测点将出现在正方形内的哪个位置，并且新的点集在附加到数组末尾时可能会或可能不会按顺序排列。
4.  ...

***其他可能的布局***

```
A _ _ _ _ _ _ _ K         P _ _ _ D
 |             |           |     | 
 |             |           |     |
 |             |    N _ _ _|     |
 |             |     |      O    |
 |             |_ _ _|           |
 |            L       M          |
 |                               |
 |            F _ _ _ G          |
 |             |     |           |
 |             |     |_ _ _ I    |
 |             |    H      |     |
 |             |           |     |
 |_ _ _ _ _ _ _|           |_ _ _|
B               E         J       C

A _ _ _ _ _ _ _ _ _ _ M
 |                   |           
 |                   |           
 |                   |_ _ _ _ _ _ O
 |                  N            |
 |            H _ _ _ I          |
 |             |     |           |
 |             |     |           |
 |      F _ _ _|     |           |
 |       |      G    |           |
 |       |           |_ _ _ K    |
 |       |          J      |     |
 |       |                 |     |
 |_ _ _ _|                 |_ _ _|
B         E               L       C 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:44:33.147

如果您只对填充而不是笔画感兴趣，这是一种方法（在伪代码中）：

1.  使用创建一个空的可变路径`CGPathCreateMutable()`。

2.  将原始矩形图形作为闭环添加到可变路径。

3.  一个一个地，将每个额外的不规则图形分别添加到可变路径中，作为一个闭环。

4.  使用该函数使用**奇偶填充规则**`CGContextEOFillPath()`填充侵蚀图形。

 **奇偶填充[规则](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/drawingwithquartz2d/dq_paths/dq_paths.html#//apple_ref/doc/uid/TP30001066-CH211-TPXREF106)在`Quartz 2D Programming Guide`.

[您可能对此](http://cocoawithlove.com/2010/05/5-ways-to-draw-2d-shape-with-hole-in.html)也感兴趣

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T23:31:58.513

我认为这可能会做到这一点。我用几组数字对其进行了测试，它似乎有效。基本上，我从索引 0 处的点开始（任何起点都应该有效），将其添加到排列点数组中，然后查找具有相同 y 值的最近点——该点被添加到排列点并从原始随机点中删除大批。然后我在 x 方向上做同样的事情并重复，直到 randomPoints 数组中只剩下一个点，并将其添加到排列点的末尾。

```
-(void)arrangePoints:(NSMutableArray *) randomPoints {
    NSMutableArray *arrangedPoints = [NSMutableArray array];
    [arrangedPoints addObject:[randomPoints objectAtIndex:0]];
    [randomPoints removeObjectAtIndex:0];

    while (randomPoints.count > 1) {
        //Look for the closest point that has the same y value
        int yValueOfknownPoint = [[arrangedPoints lastObject] CGPointValue].y;
        int xValueOfknownPoint = [[arrangedPoints lastObject] CGPointValue].x;
        NSIndexSet *indSet = [randomPoints indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop){
            return yValueOfknownPoint == [obj CGPointValue].y;
        }];
        NSLog(@"%d",indSet.count);

        if (indSet.count == 1) {
            [arrangedPoints addObject:[randomPoints objectAtIndex:indSet.firstIndex]];
            [randomPoints removeObjectAtIndex:indSet.firstIndex];
        }else{
            __block int min = 10000000;
            __block int foundIndex;
            [indSet enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL *stop) {
                int posibleMin = fabs(xValueOfknownPoint - [[randomPoints objectAtIndex:idx]CGPointValue].x);
                if (posibleMin < min) {
                    min = posibleMin;
                    foundIndex = idx;
                }
            }];
            [arrangedPoints addObject:[randomPoints objectAtIndex:foundIndex]];
            [randomPoints removeObjectAtIndex:foundIndex];
        }

        //Look for the closest point that has the same x value
        xValueOfknownPoint = [[arrangedPoints lastObject] CGPointValue].x;
        yValueOfknownPoint = [[arrangedPoints lastObject] CGPointValue].y;
        indSet = [randomPoints indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop){
            return xValueOfknownPoint == [obj CGPointValue].x;
        }];

        if (indSet.count == 1) {
            [arrangedPoints addObject:[randomPoints objectAtIndex:indSet.firstIndex]];
            [randomPoints removeObjectAtIndex:indSet.firstIndex];
        }else{
            __block int min = 10000000;
            __block int foundIndex;
            [indSet enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL *stop) {
                int posibleMin = fabs(yValueOfknownPoint - [[randomPoints objectAtIndex:idx]CGPointValue].y);
                if (posibleMin < min) {
                    min = posibleMin;
                    foundIndex = idx;
                }
            }];
            [arrangedPoints addObject:[randomPoints objectAtIndex:foundIndex]];
            [randomPoints removeObjectAtIndex:foundIndex];
        }
    }
    [arrangedPoints addObject:randomPoints.lastObject];
    NSLog(@"%@",arrangedPoints);

} 
```

解决已知问题的一些补充点：

为了处理来自 N 的 G 和 M 等等距点，我认为我会将点集分开 - 而不是将所有东西放入一个数组中，我会保留原始矩形和每个新的点集分开. 然后，当我构建路径时，我只会在我自己的点集或原始矩形中寻找点，而不是在任何其他点集中。

为了解决 inwit 提出的问题，即加倍自身，我认为您必须确定一组点是否与边或角相交——我认为只有角点才会出现这个问题。您可以通过查看其中 2 个点落在原始矩形的 2 条不同线上（而不是在同一条线上）来检查角点。然后，您必须计算缺失点（上面最后一个示例中的假定点 p ）并查看原始矩形的哪个点也是相同的，然后从路径中删除该点。我认为我的算法会正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T19:30:34.647

好吧，这似乎是一个非常复杂的算法（而且远非最佳），但我会这样处理它。

```
1\. Find the point(s) with lowest X-value

2\. Of those points find point P (using a loop) such that:
    - P has a nabour N with the same X-value
    - There exists no other point that vertically lies between P and its nabour N with the same Y value
    (if no P exists with a nabour, the algorithm has ended, after joining P with its horizontally aligned point)

3\. If there exists a point with the same X value as P (horizontally aligned), join that point and P with a line.

4\. Now join point P with its nabour N

5\. Find all points with the same X-value as N (horizontally aligned)

6\. Goto 2 
```

我希望它有效（尚未测试过）。**

# php - 如果未找到结果，则不显示 Div -

> ID：11593225
> 
> 赞同：-1
> 
> 时间：2012-07-21T15:00:34.593
> 
> 标签：php

我的页面上有一个彩色色板区域（以及 AVAIALBLE COLOURS 瓷砖），我只想在数据库中有结果时才显示。

这是我的代码：

```
private function getWTVariationHighlights($productId, $variationId)
{
    $output_str = "";
    $output_str .="<div class=\"mainProductSwatchesTitle\"><b>AVAILABLE COLOURS</b>\n";
    $output_str .= "<div class=\"mainProductSwatches\">\n";
    $sql = "select voptionid, vovalue from [|PREFIX|]product_variation_options where vovariationid=$variationId and (voname='Colour' or voname='Color')";
    $result = $this->db->Query($sql);
    while ($row = $this->db->fetch($result)) {
        $sql = "select * from [|PREFIX|]variation_option_highlight where variation_option_id=" . $row['voptionid'] . " and product_id=" . $productId;
        $result2 = $this->db->Query($sql);
        if($row2 = $this->db->fetch($result2)){
            if($row2['thumb_location']){
                $output_str .= "<a href=\"#\" onmouseover=\"changeMain('" . $row2['location'] . "')\"><img src=\"" 
                    . $GLOBALS['ShopPath'] . "/product_images/hfh_highlight_images/" . $row2['thumb_location'] . "\" /></a>\n";
            }
        }
    }
    $output_str .= "</div>\n";
    $output_str .= "<script type=\"text/javascript\">\n";
    $output_str .= "function changeMain(src)\n";
    $output_str .= "{\n";
        $output_str .= "document.getElementById('phthumb').src = '" . $GLOBALS['ShopPath'] . "/product_images/hfh_highlight_images/' + src;\n";
    $output_str .= "}\n";
    $output_str .= "</script>\n";

    return $output_str;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:03:03.893

简单使用css

```
div:empty
{display:none;} 
```

# javascript - Chrome扩展全局变量怪异

> ID：11593226
> 
> 赞同：1
> 
> 时间：2012-07-21T15:00:42.453
> 
> 标签：javascript, google-chrome, google-chrome-extension

我在 chrome 扩展的 popup.js 中有以下代码。

```
var tt;
chrome.tabs.query({ active: true, currentWindow: true, windowType: 'normal' },
  function (tabs) {
      tt = 5;      
});
 document.getElementById('elm').textContent = tt; 
```

但奇怪的是，在函数外部访问时 tt 的值是未定义的，但如果将 `document.getElementById('elm').textContent = tt;` 其放在函数内部，它会显示“5”。那么为什么当控件退出函数时变量值没有被保留呢？

我在这里做错了什么？

此代码在显示弹出窗口时运行。即，当单击浏览器操作的按钮时，我简化了代码可读性。实际上，我正在尝试将当前选项卡的 id 放入变量中。但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:06:35.937

刚刚找到答案，如果有人再次遇到这种情况，就是这样。

这`chrome.tabs.query`是一个异步操作，所以稍后调用回调函数。但是该 `document.getElementById('elm').textContent = tt;` 行是在调用回调之前执行的，它导致了问题。调试时没有发生这种情况，因为单步执行代码会延迟该行的执行。

# javascript - 如何保护 Backbone.js

> ID：11593227
> 
> 赞同：2
> 
> 时间：2012-07-21T15:00:55.440
> 
> 标签：javascript, security, backbone.js, frontend

我有一个处理公共和私有内容的主干应用程序。

**公共 =>**登录、注册、新闻等。

**私人 =>**聊天，其他用户特定信息。

为了保护整个应用程序，我在 node.js 中有一个基于会话的身份验证机制。此机制保护后端 API。现在的问题是如何保护前端。

1.  如何保护 Backbone 中的路由
2.  我如何保护 Backbone 中的模块（requireJs）

我的一个想法是将前端分为公共和私有，服务器决定是否授予对私有资产的访问权限。

还有哪些其他前端安全概念？

**使其更具体：** 如果用户已通过身份验证，我想检查客户端，并且我想将加载 require-js 模块限制为未经身份验证的人（以节省 bandtwitch）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:52:02.723

您的服务器应该提供一个 API 来检查当前用户（可能通过他们的 cookie）是否经过身份验证。

在骨干网中，在您的路由/导航中，您可以检查您的用户是否经过身份验证，然后执行代码（可能在身份验证检查后调用 requireJS 模块）。

据我所知，没有任何骨干事物具有用户状态的概念。您可以实现一个 setTimeout 循环以从您的服务器请求身份验证状态，然后在此基础上实现 Backbone.Events 以在用户未经过身份验证时发出一个事件，您的主干应用程序可以侦听该事件，然后触发渲染登录视图，或将用户路由到登录页面。

我的后端主要使用 couchdb，它有一个 $.couch.session 函数，可以让我知道当前用户的身份验证状态。您很可能需要实现自己的会话功能，该功能与您的后端框架挂钩。

# ios - 从弹出框 VC 中返回第一个视图控制器

> ID：11593234
> 
> 赞同：1
> 
> 时间：2012-07-21T15:01:55.437
> 
> 标签：ios, ipad, location

更新：尝试了您建议的链接，但无法正常工作。

只是为了确认我理解正确，这些是我采取的步骤。

第一个视图控制器称为 FirstViewController，第二个称为 SearchViewController。

1.  将 SearchViewController 导入 FirstViewController，并添加
2.  在 FirstViewController.m 中，添加以下内容： SearchViewController *svc =[[SearchViewController alloc] init]; svc.delegate =自我；

3.  在 SearchViewController.h 我添加了：

    @protocol SearchViewControllerDelegate

    *   (void)setLat:(CLLocationDegrees)lat setLon:(CLLocationDegrees) lon;

以及委托属性：

```
@property (assign) id <SearchViewControllerDelegate> delegate; 
```

1.  在 SearchViewController.m 我合成了委托，并添加了 [self.delegate setLat:51.0000 setLon:-0.10000];

从一些 NSLog 测试看来，方法 setLatSetLon 方法本身从未被调用过。

我目前正在尝试完成我的大学 iPad 应用程序。它的目的是提供校园的实时谷歌/苹果地图视图，并带有注释和 MKPolygons 的叠加层。这一切都很好。

我现在添加了一个按钮，该按钮加载一个弹出框（第二个视图控制器），其中包含一个校园建筑表（它们本身是 CampusBuilding 的对象，存储坐标）以及一个搜索框，这一切都很好. 我要做的是当用户选择一行时，地图视图以该特定建筑物为中心。我在下面编写了一个方法，当我从地图视图控制器本身引用它时，它可以正常工作。

但是我将如何从第二个视图控制器执行此操作？

这是第一个视图控制器中存在的方法：

```
- (void)setLat:(CLLocationDegrees)lat setLon:(CLLocationDegrees) lon{

MKCoordinateSpan span;
span.latitudeDelta = (double) .003;
span.longitudeDelta = (double).003;
//Define the default region to focus on
MKCoordinateRegion region;
region.span=span;
region.center=CLLocationCoordinate2DMake
(lat,lon);
//set the default region to 'region'
[_mapView setRegion: region animated:YES];
[_mapView regionThatFits:region];

} 
```

现在在第二个视图控制器中，它可以作为表格视图控制器正常工作。我已经设置好了，所以当用户选择一行时，它会加载一个新视图。我还尝试初始化第一个视图控制器的对象，然后写了这个：FirstViewController* firstVC;

```
 [firstVC setLat:building.latValue setLon:building.lonValue]; 
```

我假设这一切都编译了，但没有发生任何运动，因为我正在启动一个新对象，而不是引用当前处于活动状态的对象。

有没有办法做到这一点？欢迎评论我如何改进代码，我对此比较陌生。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:22:59.023

你是对的，firstVC 将是 FirstViewController 的一个新实例。不是上一个。

您需要的是使用 Objective-C 的委托模式。在这种情况下通常使用它。这是我之前的 SO 答案中的两个示例，其中包含有关如何实现的示例代码。

[弹出到view2时如何恢复计时器](https://stackoverflow.com/questions/11377133/how-to-resume-timer-when-poping-to-view2/11377276#11377276)

[在 Objective C 中调用另一个类的方法](https://stackoverflow.com/questions/9629417/calling-a-method-from-another-class-in-objective-c/10898471#10898471)

# javascript - javascript jquery响应HTML进入一个div不检索所有HTML

> ID：11593239
> 
> 赞同：0
> 
> 时间：2012-07-21T15:02:14.187
> 
> 标签：javascript, jquery

我正在使用 jquery 进行 Ajax 调用，并将内容放入 div 中，如下所示：

```
$('#replace').html(response); 
```

但它并没有取代我从“响应”中获得的所有内容。

当我做 ：

```
alert(response) 
```

我看到所有的 HTML 代码都没有问题。

但是当我这样做时：

```
$('#replace').html(response); 
```

它不会从响应中放入所有 HTML 代码。

当我发出警报时

```
alert(response); 
```

我得到了这个（这是正确的）：

#

```
 <div id='replace'>      
            <tr onclick='javascripot:gravaJOBparaView(5746);' ondblclick='fnOpen(5746);' >
                      <td class='preview' title='8746' >8746</td>
                      <td>XXXX</td>
                      <td>xxxxx</td>
                      <td>xxxx</td>
                      <td>xxx</td>
                  <td>xxxxx</td>
                  <td title='xpto'>XXXXXX</td>
                  <td></td>
                  <td> <br/>18:00</td>
                  <td>22/07/2012</td>
                  <td title='Check XXXXX' class='popups' ><a href='#popup_5746'><img src='xpto.png'  alt='Check XXXXXX' width='40px'></a></td>

        </tr>   
  </td> 
```

#

但是当我这样做时：

```
$('#replace').html(response); 
```

它将这段代码放在 div 'replace' 中：

#

```
 <div id="replace">       

                  8746
                  XXX
                  XXXX
                  XXXX
                  XXXXX
                  XXXXX
                  RXXXXXX

                   <br>18:00
                  22/07/2012
                  <a href="#popup_5746"><img width="40px" alt="Check XXXXX" src="xxxxxx.png.png"></a>
  </div> 
```

#

正如您所看到的，由于某种原因，它不会将所有标签都放在响应中。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:16:48.350

您的 HTML 无效。`<tr>`必须在表格标签中。代替

```
<div id='replace'> 
```

经过

```
<table id='replace'> 
```

将最后`</td>`一个替换为`</table>`

[http://jsfiddle.net/wk4eD/1/](http://jsfiddle.net/wk4eD/1/)

页面中的两个元素不能具有相同的 id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:13:21.223

您需要注意 html 嵌套规则。 `<td>`must be inside a `<tr>`which must be inside a `<table>`(从技术上讲，你需要一个 tbody 或 thead，但浏览器可以容忍这个)。

您应该使用此服务：http: [//validator.w3.org/#validate_by_input](http://validator.w3.org/#validate_by_input)

在更多选项下，选择验证 HTML 片段并匹配您的文档类型。您可以使用它来确保 HTML 在尝试将其填充到该 div 之前是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:05:23.347

你必须关闭你可能想要使用的 div

```
 </tr> 
  </div>  
  </td> 
```

在最后。JQuery 可能会替换之前的文本，
因为它找不到正确的 div end 语句。

# c++ - 带有多个 MySQL 源代码文件的 GDB

> ID：11593242
> 
> 赞同：1
> 
> 时间：2012-07-21T15:02:47.040
> 
> 标签：c++, mysql, gdb

我正在尝试将 gdb 与用 C/C++ 编写的 MySQL 源代码一起使用。在`mysql-test/t`中，我创建了一个自定义测试用例文件，`example.test`然后使用以下代码行对其进行调试

```
/mysql-test-run --gdb example 
```

现在我想查看执行流程，因为它从文件中的一个函数更改为某个不同文件中的另一个函数。我不确定执行是如何变化的，所以我无法预先定义断点。关于如何查看包含多个源代码文件的流程的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:09:16.293

您可以使用该`next`指令在源代码中逐行执行步骤。在适当的时候，您可以使用该`step`指令采取步骤“进入”当前行上正在调用的函数。

一个合理的方法是`next`直到你认为你只是传递你正在寻找的外部可见行为。然后重新开始，在你上次看到行为之前停在线路上。那么`step`这次。根据需要重复，直到找到您要查找的代码。如果你认为它遇到了某种死锁，那它就容易多了——只需`Ctrl-C`在你认为它被卡住并且它应该在有趣的地方停止时中断 () 程序。

一般来说，浏览源代码你会建立一些你认为有趣的地方。您可以酌情记下源文件和行号和/或函数名称，并在以后直接设置这些断点，以避免繁琐的//`next`业务。`next``next`

# javascript - 使用 $.get() 或 this.model.save() (Backbone.js)

> ID：11593248
> 
> 赞同：0
> 
> 时间：2012-07-21T15:03:43.530
> 
> 标签：javascript, jquery, ajax, backbone.js, underscore.js

我有一个图像列表，每个图像都有一个“喜欢”按钮。单击“Like”按钮时，将向服务器端发送一个 AJAX 请求（包含`item_id`and ）以记录 Like（通过在表中添加一个带有and值的新行）。`user_id``likes``item_id``user_id`

该模型`Photo`用于页面上显示的图像。如果我理解正确，`this.model.save()`如果我想更新/添加一个新的，则使用`Photo`它，因此它不适合记录“喜欢”。因此，我必须使用类似`$.get()`or的东西`$.post()`。这是传统的方式吗？

或者我是否创建一个名为`Like`如下所示的新模型，这似乎使仅针对 Like 按钮的 View 和模板变得更加混乱。

```
Like = Backbone.Model.extend({
    url: 'likes'
});

LikeView = Backbone.View.extend({

    template: _.template( $('#tpl-like').html() ),

    events: {
        'click .btn_like': 'like'
    },

    like: function() {
        this.model.save({
            user_id: 1234,
            post_id: 10000
        })
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:19:50.240

在与此类似的情况下，我使用了该`$.get`方法而不是创建新模型，显然这将取决于您的应用程序，但这是我的原因。

本案似乎具有以下特点：

1.  `Like`是人与照片之间的关系，
2.  您似乎已经有一个服务器端资源接受照片和用户 ID 来创建这种关系，
3.  您可能没有与该关系相关的其他信息，并且
4.  您可能没有重要的视图逻辑可以与 like 本身一起使用

通过向您的 Photo 对象添加另一个属性（包含喜欢的数量）可以更好地处理此问题。然后使用`$.get`创建`like`, 和 200 响应将简单地更新照片对象以增加它的计数（以及视图）。然后服务器端只需要在返回时将点赞数作为其中的一部分。

我在这里假设一旦`like`制作了 a ，您将不会更新它。如果您确实需要更新或删除它，我可能仍会继续使用`$.get`. 您可以向您的照片对象添加一个`likes`数组，其中每个元素都是`like`资源的 id。视图会将数组的长度显示为计数，如果您需要删除类似的，您可以访问 id 并且可以使用`$.post`. 只要确保您不使用`.push`向数组添加值，因为这将绕过主干的 set 方法并且您不会获得事件回调。您需要克隆阵列，然后推送，然后在进行更改时设置它。

# c# - C# 对于现代 web-socket 服务器真的可行吗？

> ID：11593249
> 
> 赞同：1
> 
> 时间：2012-07-21T15:03:47.587
> 
> 标签：c#, websocket

我需要为基于 HTML5 / Mobile 的回合制游戏开发一个相当可扩展的套接字服务器。

时间是其中的一个真正因素，因为我需要在 3 个月内制作出一些原型。我在 C# 方面拥有丰富的（多年）经验，而在 Node 或 Erlang 方面的经验为零，我将其选为该项目的完美语言。不幸的是，这两种语言都会有很多与之相关的学习曲线，比如代码质量、单元测试、可维护性等我没有经验，所以我想代码质量会很差。

为这个项目选择 C# 以节省开发时间是多么糟糕的决定，因为我将在可扩展性和未来的事情上更加头疼。

C# 是否被认真考虑用于现代 Web 应用程序套接字服务器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T15:50:08.943

一个人可以在任何平台上编写糟糕的代码。或者好的代码。是的，您可以在 C# 中编写一个非常好的低影响、高度可扩展的服务器。但如果这是你写的第一个这样的东西（不管平台如何），你很可能无法有效地编写它，然后得出结论是平台的错。

例如，在 SO/SE 上驱动即时更新的 web-socket 服务器是用 c# 编写的，处理 60k+ 连接，几乎没有注册为任何 CPU。但它是为此而*设计*的，具有完全异步的网络访问、缓冲区回收、专用工作线程等。

实际上，如果您专门寻找 web-socket 代码，那么 Windows 8 上的 .NET 4.5 将包括通过 HTTP.SYS 的内置 web-socket 支持（显然，使用托管包装器），但可以手动完成。我什至可以*分享*我们为此编写的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T15:13:44.607

短：**是**的。

Long：c# 是静态类型的，它实际上被编译为本机代码（在 Windows 上），根据我的经验，速度简直太棒了。将其视为带有垃圾收集器的 C++ :-) 值类型 + 真正的泛型使事情比 Java 快得多，我也认为它足够好。

请注意，您不应该被[基准游戏](http://benchmarksgame.alioth.debian.org/)吓到，它使用 Mono。

如果你真的遇到麻烦，如果你真的需要它们，**你可以**做**不安全的操作。**所以不用担心未来。

# php - php链调用静态非对象

> ID：11593254
> 
> 赞同：1
> 
> 时间：2012-07-21T15:04:43.550
> 
> 标签：php, reflection, static

`$this`我可以通过在创建为对象后返回类体函数来进行无限调用。是否可以在不创建对象的情况下进行相同的操作？就像`myclass::func1()::func2()::func3()` 我尝试使用反射并将新类存储在父变量中一样，但它也返回对象，它不能被调用`::`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:08:01.053

不，不可能链接静态方法。

# delphi - 如何重新开始计数

> ID：11593256
> 
> 赞同：2
> 
> 时间：2012-07-21T15:05:15.563
> 
> 标签：delphi, delphi-xe2

我试图保持 1-10 的计数，如果计数超过 10，它会从 1 开始

```
Tick := 5;
currentTick := 8; 
```

现在`FinalTick`将是 CurrentTick + Tick 但一旦值为 10 它应该统计为 1 因此在这种情况下

5 + 8 = 3

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T15:08:23.207

如果您希望计数为 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4 等，您可以：

```
procedure IncCount(var ACount: Integer);
begin
  ACount := (ACount + 1) mod 10;
end; 
```

如果您想计数为 1,2,3,4,5,6,7,8,9,10,1,2,3,4 等，您可以：

```
procedure IncCount(var ACount: Integer);
begin
  ACount := ACount mod 10 + 1;
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-21T15:09:54.853

我会使用所谓的模运算符（[http://en.wikipedia.org/wiki/Modulo_operation](http://en.wikipedia.org/wiki/Modulo_operation)）。

> FinalTick := ( CurrentTick + Tick ) mod 10;

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-21T15:09:59.303

您应该使用模运算符，例如

```
Val:=(5+8) mod 10 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-21T15:16:36.027

MOD 运算符是这里大多数答案的解决方案。

有时这可能会有所帮助：

```
procedure Foo;
var I: Integer;
begin
  I := 0;
  repeat
    I := I + 1;
    // Do your stuff here
    ShowMessage(IntToStr(I));
    // Add some exit conition, like:
    // if (..) then break;
    if I = 10 then I := 0;
  until False;
end; 
```

# c# - 适用于 VB.NET 但不适用于 C# - 字节转换

> ID：11593258
> 
> 赞同：-1
> 
> 时间：2012-07-21T15:05:23.813
> 
> 标签：c#, vb.net, vb6-migration

所以我正在将一些代码从 VB.NET 迁移到 C#，但是当它在 C# 中进行字节解析时它失败了。

这里是 VB.NET 代码可以工作：

```
Dim sModifiedAccountNumber_AsciiHex
Dim iByte As Byte = 0
Dim iIdx As Integer = 0
Dim strByte As String = String.Empty

sModifiedAccountNumber_AsciiHex = "FC13"
For iIdx = 1 To 3 Step 2

    iByte = CByte("&H" & Mid$(sModifiedAccountNumber_AsciiHex, iIdx, 2))
    If iByte >= 120 And iByte <= 127 Then
        iByte = iByte Or &H80
        strByte = Hex$(iByte)
        Do While Len(strByte) < 2
            strByte = "0" & strByte
        Loop
        Mid$(sModifiedAccountNumber_AsciiHex, iIdx, 2) = strByte
    End If

Next 
```

C# 版本：

```
string modAccountNumberAsciiHex = "FC13";
byte iByte;
string strByte = string.Empty;

for (int iIdx = 1; iIdx <= 3; iIdx += 2)
{
    iByte = byte.Parse(("&H" + modAccountNumberAsciiHex.Substring((iIdx - 1), 2)));
    if (iByte >= 120 && iByte <= 127)
    {
        iByte = iByte |= 0x80;
        strByte = BitConverter.ToString(new byte[] { iByte });
        while (strByte.Length < 2)
        {
            strByte = "0" + strByte;
        }

        // TODO: convert the line below to C#   
        // Mid$(sModifiedAccountNumber_AsciiHex, iIdx, 2) = strByte

    }
} 
```

所以在 C# 中我总是`FormatException`在执行`byte.Parse`(for 语句之后的行)时得到一个

关于这在 C# 中应该是什么的任何想法？

此外 - TODO 注释中的 C# 版本也将不胜感激:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T15:10:34.037

错误是在字符串的开头包含“&H”，*并且*`byte.Parse`在未指定的情况下使用`NumberStyles.AllowHexSpecifier`. 不过使用起来会更简单`Convert.ToByte`：

```
 byte x = Convert.ToByte(modAccountNumberAsciiHex.Substring(iIdx - 1, 2), 16) 
```

另请注意，您的代码目前非常“基于 1”。*感觉*就像移植了VB 。更惯用的 C# 将是：

```
for (int index = 0; index < 3; index += 2)
{
    byte x = Convert.ToByte(text.Substring(index, 2), 16);
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:12:01.253

您不需要在 C# 中包含“&H”：

```
byte.Parse((modAccountNumberAsciiHex.Substring((iIdx - 1), 2))); 
```

# c++ - 如何在 Linux 的 GDB/Nemiver 中显示 C++ STL 容器

> ID：11593259
> 
> 赞同：4
> 
> 时间：2012-07-21T15:05:34.703
> 
> 标签：c++, linux, stl, gdb

我正在使用 Linux (Ubuntu 11.10) 和 gdb 7.3 / Nemiver 0.8.2。
我想显示 STL 容器的内容，但到目前为止我还没有*真正*成功。

是否有任何其他可视化调试器（基于 gdb 更好）我应该用来显示 STL 容器变量？
我正在寻找一种支持容器组合（即`std::map<int, std::vector< std::pair< ... > > >`）的解决方案。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T17:27:23.693

足够新的 GDB 版本支持来自 Python 的漂亮打印 API。这允许应用程序提供 Python 代码来自定义对象显示的某些方面。此代码旨在与 CLI（gdb 提示符下的“打印”）和 MI（GUI 使用或至少应该使用的界面）一起使用。

足够新的 GCC 版本为 libstdc++ 中的所有重要数据结构提供 Python 漂亮打印机。

最后一步是获得足够新的 nemiver 版本。我认为 0.9.2 有这个功能。

许多发行版提供 gdb 和 gcc 设置，以便在您的程序使用 libstdc++ 时自动激活漂亮的打印机。所以，也许仅仅升级 nemiver 对你来说就足够了。否则，网上有很多关于如何设置的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T07:23:46.113

下载以下文件 -

[https://github.com/jgarvin/joe-etc/blob/master/gdb/stl-views-1.0.3.gdb](https://github.com/jgarvin/joe-etc/blob/master/gdb/stl-views-1.0.3.gdb)

来自 GDB -

```
# source <PATH>/stl-views-1.0.3.gdb

# pmap <map-object> <key-type> <value-type> 
```

...

# android - ORMLite 显示重音符号和其他 unicode 符号

> ID：11593268
> 
> 赞同：0
> 
> 时间：2012-07-21T15:07:18.200
> 
> 标签：android, sqlite, ormlite

我在[ORMLite 文档](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_2.html#IDX106) 中看到了存储带有 unicode 符号的字符串，你必须使用`String (DataType.STRING_BYTES)`. 但是我是否也要更改 ArrayBytes 的 String 属性？

到目前为止，我在我的 String 属性上方使用了 @DatabaseField(dataType = DataType.STRING_BYTES) ，但这不起作用。

**模型**

```
@DatabaseTable(tableName="Messages")
public class Message {

    @DatabaseField(dataType = DataType.STRING_BYTES)
    private String message;

    //get and set methods...

...
} 
```

**活动**

```
...
    TextView message = new TextView(this);
    message.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
    message.setText(m.getMessage());
    linearLayout.addView(message);
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:15:23.687

这是 Eclipse 的问题。这段代码运行完美。有时出于某种原因，Eclipse 已将一些符号（如重音符号和其他特殊字母）替换为奇数符号。它在保存我的源代码时正在这样做。

# android - 让 ListView 选中的复选框从数据库中删除

> ID：11593269
> 
> 赞同：0
> 
> 时间：2012-07-21T15:07:37.557
> 
> 标签：android, sqlite, listview, checkbox

我正在为我的 ListView 使用自定义列表适配器。如何从选中的复选框中获取数据库 rowid/_id，以便可以从数据库中多次删除数据？

这是我的活动：

```
import android.app.ListActivity;
import java.text.DecimalFormat;
import org.yhw.PlanWithMe.R;
import android.content.*;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.database.Cursor;

public class Finance_delete extends ListActivity {
    Cursor cursor;
    private TextView dateText;
    private Button btnCancel;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.finance_delete);

        registerForContextMenu(this.getListView());
        DBAdapter dbHelper = new DBAdapter(this);
        dbHelper.open();

        // Get a Cursor for the list items
        Intent intent = getIntent();
        String date = intent.getStringExtra("date");
        Cursor listCursor = dbHelper.getAllFinance(date);
        startManagingCursor(listCursor);

        // set the custom list adapter
        setListAdapter(new MyListAdapter(this, listCursor));

        dateText = (TextView) findViewById(R.id.lblDate);
        dateText.setText("Delete Spending: " + date);

        btnCancel = (Button) findViewById(R.id.btnCancel);
        btnCancel.setOnClickListener(click_listener);
    }

    private class MyListAdapter extends ResourceCursorAdapter {

        public MyListAdapter(Context context, Cursor cursor) {
            super(context, R.layout.list_item_with_description_delete, cursor);
        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {

            CheckBox cbListCheck = (CheckBox) view
                    .findViewById(R.id.list_checkbox);
            cbListCheck.setChecked(false);

            cbListCheck
                    .setOnCheckedChangeListener(new OnCheckedChangeListener() {
                        public void onCheckedChanged(CompoundButton cb,
                                boolean isChecked) {
                            if (cb.isChecked()) {
                                // action

                            } else if (isChecked == false) {
                                // action

                            }
                        }
                    });

            TextView title = (TextView) view.findViewById(R.id.list_category);
            title.setText(cursor.getString(cursor
                    .getColumnIndex(DBAdapter.KEY_Category)));

            TextView details = (TextView) view.findViewById(R.id.list_desc);
            StringBuffer detailsText = new StringBuffer();

            String description = cursor.getString(cursor
                    .getColumnIndex(DBAdapter.KEY_Desc));

            TextView spendings = (TextView) view
                    .findViewById(R.id.list_spending);

            String spending = cursor.getString(cursor
                    .getColumnIndex(DBAdapter.KEY_Spending));

            double tgtspend = Double.parseDouble(spending);
            DecimalFormat dFormat = new DecimalFormat("0.00");
            String formatSpend = dFormat.format(tgtspend);
            spendings.setText("$" + formatSpend);

            if (description != null && description.length() > 0) {
                detailsText.append(description);
            } else {
                detailsText.append("-");
            }
            details.setText(detailsText.toString());

        }
    }

    private OnClickListener click_listener = new OnClickListener() {
        public void onClick(View view) {
            // Intent intent = null;
            switch (view.getId()) {
            case R.id.btnCancel:
                finish();
                break;
            }
        }
    };
} 
```

我的活动布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/finance_top" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="45dp"
        android:src="@drawable/navbar" />

    <TextView
        android:id="@+id/lblDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="57dp"
        android:layout_alignParentLeft="true"
        android:textColor="#ffffff"
        android:textSize="16dp" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="240dp"
        android:layout_marginTop="48dp"
        android:src="@drawable/divider" />

    <Button
        android:id="@+id/btnTick"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="45dp"
        android:layout_marginTop="56dp"
        android:background="@drawable/btn_tick" />

    <Button
        android:id="@+id/btnCancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="6dp"
        android:layout_marginTop="56dp"
        android:background="@drawable/btn_cancel" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="282dp"
        android:layout_marginTop="48dp"
        android:src="@drawable/divider" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginTop="92dp"
        android:orientation="vertical" >

        <ListView
            android:id="@android:id/list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <TextView
            android:id="@android:id/empty"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="106dp"
            android:layout_marginTop="180dp"
            android:text="@string/finance_note"
            android:textColor="#ffffff"
            android:textSize="18dp" />
    </LinearLayout>

</RelativeLayout> 
```

我的 ListView 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="1"
        android:duplicateParentState="true" >

        <TextView
            android:id="@+id/list_category"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:gravity="center_vertical"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/list_desc"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@id/list_category"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <TextView
            android:id="@+id/list_spending"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:gravity="center"
            android:paddingBottom="10dip"
            android:paddingTop="10dip"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <CheckBox
            android:id="@+id/list_checkbox"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="false"
            android:text="" >
        </CheckBox>
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:04:23.873

1）使用 checkbox.setTag 属性将您的复选框与 ID 链接起来。

2）在您的删除按钮单击事件中执行以下逻辑。

*   循环遍历所有复选框
*   收集使用 checkbox.getTag 属性检查的人的 ID，并将其收集为逗号分隔。
*   对删除操作使用逗号分隔值。

希望您明白这一点，请检查此[链接以了解概念](http://www.vogella.com/articles/AndroidListView/article.html)实现。

# coq - Coq - 从命题中提取见证

> ID：11593270
> 
> 赞同：1
> 
> 时间：2012-07-21T15:07:52.073
> 
> 标签：coq

我正在尝试从 coq 命题（或类似的东西......）中提取证人。

我有类似的东西

```
Parameter atom_fresh_for_list :
    forall (xs : list atom), {x : atom | ~ List.In x xs}. 
```

（后来证明，有一个明确的类型`atom`：

```
Lemma atom_fresh_for_list :
    forall (xs : list nat), { n : nat | ~ List.In n xs }. 
```

我如何提取这样的`x`？ [文档](http://coq.inria.fr/refman/Reference-Manual005.html#@default211 "教育")说

> 从这样的（exist xp）中，我们可以反过来提取它的见证 x:A（使用消除构造，例如 match）

但我不明白这是如何工作的......

它还说

> 给定 A:Type 和 P:A->Prop，构造 {x:A | P x} 是一个类型

但是如果我尝试类似的东西`Parameter C : {x : atom | x \notin xs}`，它会给

```
Error: The term "C" has type "{x : atom | x \notin xs}" which should be Set, Prop or Type. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T08:12:21.910

这在以下内容中得到了很好的解释： [http ://coq.inria.fr/stdlib/Coq.Init.Specif.html](http://coq.inria.fr/stdlib/Coq.Init.Specif.html)

在“sig 的预测”段落下。（请注意，该段中有一个错字：[https](https://coq.inria.fr/bugs/show_bug.cgi?id=2767) ://coq.inria.fr/bugs/show_bug.cgi?id=2767 ）

你想要的就叫`proj1_sig`我相信。您可以在文档中查看它是如何定义的。

# database - 需要有关 MVC 的建议

> ID：11593274
> 
> 赞同：0
> 
> 时间：2012-07-21T15:08:07.013
> 
> 标签：database, hibernate, excel, model-view-controller, struts

我仍然是 MVC 的初学者，所以我在设计上遇到了问题。

我有很多类别 C1、C2、C3。每个类别都有她的特殊结构。因此，**每个类别**都应该在**Model Class**中呈现。我还在数据库中为**每个类别**都有自己的**表，**通过**Hibernate**相互映射。

我需要在我的应用程序中从 Excel 文件中获取数据（我成功上传并从 excel 文件中获取数据）。但是excel文件应该尊重表格中选择的类别的结构。所以这意味着，如果我在 C1 表单的选择中选择，然后我上传一个具有不同结构的 excel 文件，该文件应该被拒绝......

**那么如何设计我的应用程序以根据指定的类别处理 Excel 文件**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:14:24.270

定义一个`ExcelStructureValidator`接口，并让所有类别类（C1、C2 和 C3）实现一个

```
ExcelStructureValidator createExcelStructureValidator() 
```

方法，它为所选类别返回适当的验证器。

其他设计是可能的，甚至更好，但是如果没有关于什么是类别以及如何将 excel 文件结构链接到类别的更多信息，就很难提供理想的解决方案。但是，需要某种基于类别的验证器工厂。该类别是否应该是工厂是有争议的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:24:53.223

如果在表单中选择了一种类别，则这是一项验证任务。对于 Swing GUI，这类事情通常由像 InputVerifier 这样的独立类来完成。这可以集成到您的等效控制器中或转发给服务。

如果您不确定输入的类别类型，您可以使用通用方法来验证数据。如果您期望某个类别类型，您可以使用工厂风格的方法来获取适合预期类别的特定验证器实例。对于这些验证器，您可以拥有一个带有`isDataValid`返回真/假的方法的通用接口，或者使用一些自定义异常来实现更细粒度和面向对象的方法。

# sms - 在部署之前设置 USSD 开发环境以测试和开发基于 USSD 的服务

> ID：11593275
> 
> 赞同：3
> 
> 时间：2012-07-21T15:08:15.373
> 
> 标签：sms, jboss7.x, sms-gateway, ussd

我在互联网上浏览了很长时间，但未能找到有关在我的 PC 上设置用于开发和测试 USSD 服务的环境的信息。

我需要一个基于 Web 的应用程序，该应用程序使用 RESP API 发送请求，并将其发送到 USSD 服务器，该服务器将它们转发到 GSM 手机。我怎样才能开始开发这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-27T23:12:41.583

这并不像乍一看那么容易。

前段时间我在中东开展了一个项目，我们有这个确切的要求，我们实际上不得不寻求当地电信公司的帮助来支持我们的工作。

从本质上讲，这完全取决于 SMS 的一般工作方式。

大多数人认为 SMS 是通过 8 位通道以面向字节的方式发送的，就像 MMS 和 GPRS 数据一样，但实际上并非如此。

SMS 实际上是在大多数基于 GSM 的设备的信令通道上发送的（这就是为什么当手机响铃时您的 SMS 不起作用的原因）

更重要的是，仅使用了该信令通道的一小部分，并且通常是带外串行数据。

鉴于该信息，您至少需要一个本地 GSM 连接，该连接可以使用标准 msisdn（这是电话号码的真实名称）进行寻址，然后该连接必须提供可以响应的标准 C7 信令环境和解码的串行数据，然后在连接端推送到基于 SMPP 的服务器（或类似服务器）。

一旦您在服务器中获得了解码的消息，并且您已经分析了 PDU 中的各种标志以知道它是一条 USSD 消息，那么您需要从队列中删除该消息，对其进行处理，找出命令的含义，然后将其发送到应用程序服务器，该服务器将决定调用哪个 URL，或者将其传递给哪个肥皂端点以及许多其他因素，以及获取任何响应，将其转换回 SMPP，然后重新序列化并将其沿信令通道发送回原始设备。

现在，有了正确的专业知识和设备，当然可以自行设置。如今，许多移动电话提供商会在覆盖范围较差的区域为他们的客户提供微微蜂窝，也可以购买可以连接到本地 PC 的短截天线，但您需要绝对确定您所在地区允许这样做。

许多当局严格控制在任何特定区域允许和不允许的无线电发射，违反这些法律的人将面临巨额罚款或监禁。

一旦你有了天线，你就可以在连接天线的机器上运行“Open BTS”之类的东西。开放式 BTS 可以做标准 GSM 网络 BTS 软件所做的一切，包括将数据从 aBis 接口向上游传递到诸如用于 SMS 流量的 SMPP 服务器之类的东西。

但是它不提供 SMS 软件，因为您需要另一台机器上安装标准 Linux 发行版，然后在其上设置和运行 Kannel 等软件，一旦您拥有了 kannel，您就可以处理消息。

使所有这些工作在一起，您将能够进行本地 USSD 测试。

然而，还有一个更简单的选择，但它可能会花费你一些钱，那就是与全球 USSD（[链接在这里](http://globalussd.com/service-development-account/)）或类似的服务提供商签约，他们会以固定费用为你完成所有艰苦的工作，让您专注于响应您的应用调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-27T14:15:12.420

只需要一个服务提供商（来自电信提供商的 API，如 MTN、Orange 等），其次，您只需创建可以进行回调的端点。python、Php、Nodejs等语言目前支持ussd应用开发。

请记住，Ussd 是一个基于会话的应用程序，它的工作方式是一种方式。这意味着您必须构建业务逻辑以满足您的用户需求，并让他们感觉他们像使用 Web 应用程序或移动应用程序一样使用它

最后，回调可以托管在任何云托管服务上，例如 Heroku、Google 云平台或 AW，并且该 URL 是回调，但如果您想从本地机器尝试，您可以安装 ngrok 之类的工具（[https:// ngrok.com/](https://ngrok.com/) ) 或 vagrant( [https://www.vagrantup.com/](https://www.vagrantup.com/) ) 使 localhost 有一个公共地址并将该公共地址用作您的回调

# android - 在 Android 中保留不需要的文件或函数会消耗内存

> ID：11593278
> 
> 赞同：0
> 
> 时间：2012-07-21T15:08:56.483
> 
> 标签：android

在代码中保留废物文件或函数会增加内存消耗？它会影响应用程序或其性能吗？

例如：我将在我的代码中保留一些函数，但我不会调用它或使用它。如果是这样，它会影响应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:30:38.733

这取决于你所说的“记忆”到底是什么意思

保留这些额外功能不会导致您的应用在运行时使用更多设备 RAM。所以不，它根本不应该影响你的表现。

保留这些函数会导致 APK 的最终大小更大（我认为，但尚未测试。编译器可能足够聪明，如果不调用它们，可能会忽略它们。）。但是除非我们谈论一些非常庞大的函数，否则大小的增加应该可以忽略不计。现在手机拥有相当大的内部存储空间，并且用户可以选择将应用程序移至 SD 卡，我想说这在您的关注点列表中应该不是很高。如果您执意优化应用程序中的每一盎司，尽管删除它们会减少您的*大小*。

但是，未使用的可绘制资源（即 png 文件）在关注点列表中会更高，一个额外的 png 文件将与已编译类文件中的大量文本占用相同**的空间。**

# regex - 惰性匹配 {x,y} ？你没意义？

> ID：11593281
> 
> 赞同：1
> 
> 时间：2012-07-21T15:09:26.273
> 
> 标签：regex

{2,5} 中 5 的意义是什么？它匹配前一个令牌的 2 到 5 个。这是一个惰性匹配，在满足下一个标记之前将匹配尽可能少的字符。

我举了个例子`abcccccabccc`，在 {2,5} 中没有看到 5 的任何用途？它只匹配 2 个连续的 a。

有人可以举一个第二个参数起任何作用的例子吗？（在这种情况下为 5 {2,5}？）

```
abc{2,5} is greedy match 

First match: abccccc
Second match: abccc

abc{2,5}? is lazy match
First match: abcc
Second match: abcc 
```

[参考](http://gskinner.com/RegExr/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:15:55.750

看这个例子>>

细绳：`123abcccccabc`

正则表达式：`/123(abc{2,5}?)abc/`

将`abccccc`在第 1 组中匹配，因为`abc`后面的匹配也需要匹配。

知道了？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T15:17:34.170

说你的正则表达式是`"(.{0,10}?)"`. 这将匹配最多 10 个字符的引用字符串。例如

```
""
"foo"
"1234567890" 
```

懒惰将确保引号不能出现在字符串中。例如，如果您匹配一个包含两个引号部分的字符串，则正则表达式将只匹配第一个：

```
// "(.{0,10}?)"
"foo" "bar"
 ^^^ 
```

省略惰性修饰符，它将匹配两者，错误地捕获`foo" "bar`为字符串内容。

```
// "(.{0,10})"
"foo" "bar"
 ^^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:16:20.200

是和不是。它的含义取决于它后面的内容。例如`abc{2,5}?c`不同于`abc{2,5}?a`.

# c# - 当我的计时器值达到 0 时启动事件处理程序

> ID：11593287
> 
> 赞同：0
> 
> 时间：2012-07-21T15:09:48.227
> 
> 标签：c#, silverlight, windows-phone-7, event-handling, navigation

这是我的计时器代码，我想在计时器达到 0 时加载我的 gameover.xaml。如何连接事件。

```
 public void StartTimer(object o, RoutedEventArgs sender)
    {
        myDispatcherTimer = new DispatcherTimer();
        myDispatcherTimer.Interval = new TimeSpan(0, 0, 0, 0, 1000); // 1000 Milliseconds 
        myDispatcherTimer.Tick += new EventHandler(Each_Tick);
        myDispatcherTimer.Start();
    }

    // counter
    int i = 60;

    public void Each_Tick(object o, EventArgs sender)
    {
       timerBlock.Text = "Time: " + i--.ToString() + "s";
    } 
```

这是我的事件方法

```
 private void gameOverEvent(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/gameOver.xaml", UriKind.Relative));
    } 
```

我怎样才能做到这一点 -

```
if (i <= 0)
    something += new EventHandler(gameOverEvent); 
```

我该放什么东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:31:53.503

您根本不需要 gameOverEvent，您可以在 Each_Tick 事件处理程序中检查 i = 0，如果是则导航到游戏结束页面

```
public void Each_Tick(object o, EventArgs sender) 
{ 
   timerBlock.Text = "Time: " + i--.ToString() + "s";

   if(i = 0)
   {
         NavigationService.Navigate(new Uri("/gameOver.xaml", UriKind.Relative));
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:41:16.127

你必须在你的类中实现一个事件处理程序，比如

```
public event EventHandler GameLost; 
```

从这个类你可以提出事件

```
if ((this.GameLost != null) && (i <= 0))
    this.GameLost(this, new EventArgs()); 
```

有关更详细的指南，请参阅本[教程。](http://www.switchonthecode.com/tutorials/csharp-snippet-tutorial-custom-event-handlers)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T15:33:00.153

```
if (i <= 0)
    gameOverEvent(null, null); 
```

# nhibernate - 现有查询上的 nHibernate 计数（*）

> ID：11593289
> 
> 赞同：0
> 
> 时间：2012-07-21T15:09:57.963
> 
> 标签：nhibernate, count, queryover

我正在使用 nHibernate 3.3。我想像这样执行 SQL：

```
select COUNT(*) from (
SELECT YEAR(MeasureDateLocal) As [Year], MONTH(MeasureDateLocal) As [MONTH], DAY(MeasureDateLocal) As [DAY], sum(this_.RainCounterValue) as y3_
FROM DriverPeriphMeasure this_
WHERE this_.IdDriver = @p1
GROUP BY YEAR(MeasureDateLocal), MONTH(MeasureDateLocal), DAY(MeasureDateLocal) ) s 
```

但使用 QueryOver 或 LINQ。目前我有这个丑陋的代码：

```
var countQuery = Context.Session.CreateSQLQuery(
    @"select COUNT(*) from 
    (SELECT YEAR(MeasureDateLocal) As [Year], MONTH(MeasureDateLocal) As [MONTH], DAY(MeasureDateLocal) As [DAY], sum(this_.RainCounterValue) as y3_ 
    FROM DriverPeriphMeasure this_ 
    WHERE this_.IdDriver = :driverID
    GROUP BY YEAR(MeasureDateLocal), MONTH(MeasureDateLocal), DAY(MeasureDateLocal) ) s" )
.SetParameter<Guid>( "driverID", driver );
int total = countQuery.UniqueResult<int>(); 
```

但我很想看看如何使用 QueryOver 来做到这一点。我设法编写了以下 QueryOver：

```
var q3 = Context.Session.QueryOver<DriverPeriphMeasure>().Where( x => x.Driver.Id == driver )
                    .SelectList( list => list
                        .Select( Projections.SqlGroupProjection( "YEAR(MeasureDateLocal) As [Year]", "YEAR(MeasureDateLocal)", new[] { "YEAR" }, new IType[] { NHibernateUtil.Int32 } ) )
                        .Select( Projections.SqlGroupProjection( "MONTH(MeasureDateLocal) As [MONTH]", "MONTH(MeasureDateLocal)", new[] { "MONTH" }, new IType[] { NHibernateUtil.Int32 } ) )
                        .Select( Projections.SqlGroupProjection( "DAY(MeasureDateLocal) As [DAY]", "DAY(MeasureDateLocal)", new[] { "DAY" }, new IType[] { NHibernateUtil.Int32 } ) )
                        ); 
```

但我找不到将其设置为子查询的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:33:47.733

目前只能使用 HQL。正如 Andrew Whitaker 提到的，NH 不支持选择子句中的子选择。但是，可以使用 in 表达式将 select 子句中的 subselect 转换为 from 子句中的 subselect。因此，对于分组，您必须从 subselect 中选择 max(id)，但由于`in`子句中 SQL 的限制，您可以使用 subselect 仅返回一列。

但在 Criteria 和 QueryOver API 中，无法从 select 子句中排除分组字段（[https://nhibernate.jira.com/browse/NH-1426](https://nhibernate.jira.com/browse/NH-1426)）

由于这两个问题，linq 无法做到这一点：[https](https://nhibernate.jira.com/browse/NH-3154) ://nhibernate.jira.com/browse/NH-3154和[https://nhibernate.jira.com/browse/NH-3155](https://nhibernate.jira.com/browse/NH-3155)

所以你有最后机会用 HQL 做到这一点：

```
var count = session.CreateQuery(
    @"select count(dm.Id) 
      from DriverPeriphMeasure dm 
      where dm.Id in (
          select max(dm1.Id) 
          from DriverPeriphMeasure dm1 
          where dm1.IdDriver = :? 
          group by date(dm1.MeasureDateLocal)
      )").UniqueResult(); 
```

# android - 从我的应用程序向 Facebook 发布文本和图像

> ID：11593292
> 
> 赞同：1
> 
> 时间：2012-07-21T15:10:12.223
> 
> 标签：android, facebook

我需要让我的应用程序将带有一些文本的图像发布到 facebook。

这是我的代码

```
 Intent shareIntent = new Intent(Intent.ACTION_SEND);

                shareIntent.setType("image/jpg");
                shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(file));
                shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "text1");
                shareIntent.putExtra(Intent.EXTRA_TEXT, "text2");

                startActivity(Intent.createChooser(shareIntent, "Share via...")); 
```

它确实可以很好地发布图像，但我找不到如何将文本附加到它的方法。

![在此处输入图像描述](../Images/66b538d3dcd0ff63c0097835a11968e5.png)

例如，在 instagram 中，它确实可以同时发布文字和照片。还要注意发布窗口是不同的。

![在此处输入图像描述](../Images/0daa095c579bd40db7949d534173fa48.png)

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:58:18.660

被许多安卓开发者归类为 facebook 应用程序中的错误实际上从他们的角度来看是一个有效的设计决策。

关于 facebook [Android Intent Sharing 的讨论被打破](https://developers.facebook.com/bugs/332619626816423)

...我们的 FB 应用程序处理意图，因为它是用户在其 Facebook 上共享链接（例如您的应用程序 URL）等内容的有效方式。但是，就像我之前提到的，为我们的用户预先填写消息是违反我们的政策的，因为它会破坏用户声音的真实性，因此我们的应用程序不接受 EXTRA_* 字段。...

# css - 当我添加到我的页面时，CSS 似乎不起作用，页面看起来更糟

> ID：11593294
> 
> 赞同：0
> 
> 时间：2012-07-21T15:10:14.137
> 
> 标签：css, internet-explorer, doctype, quirks-mode

我的问题是，在 Firefox 和 chrome 上，我的网站在 quirks 模式下看起来不错，但在 IE 中却不行。我意识到我应该添加到页面的开头并从那里开始 - 但是当我这样做时，网站在所有浏览器中看起来都一样，但不是我想要的那样。

这是我的带有[DOCTYPE](http://www.biolonline.co.uk/doctype.php)的网站，这是我的网站在 quirks[模式下](http://www.biolonline.co.uk)，这是我希望它的外观（在 chrome/firefox 中）

这是我的 CSS 的问题吗？我已经验证过了，没有发现错误！

这是我的 CSS： http: [//www.biolonline.co.uk/mystyle.css](http://www.biolonline.co.uk/mystyle.css)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T22:53:52.560

问题是（正如您在标签中正确猜到的）一种叫做 Quirks Mode 的东西。

如果您编写的网站没有 doctype，浏览器将以 Quirks 模式呈现它。这基本上是一种模拟模式，让浏览器伪装成旧版浏览器以兼容旧版网站。

解决这个问题没有简单的方法：如果您将网站设计为在 quirks 模式下看起来不错，那么您做错了，您将不得不修复它。

将其保留在怪癖模式不是一种选择，因为 IE 在此模式下的呈现方式与其他所有人不同；您的网站在其他浏览器中无论有无 doctype 都会看起来很糟糕。

很抱歉承受坏消息。

quirks 模式和standards 模式的主要区别在于“盒子模型”。这定义了如何根据框的宽度和高度来处理边距和边框。在 quirks 模式下，边距和边框在盒子内部，所以`width`是盒子占据的整个空间，而在标准模式下，边距和边框被添加到盒子外面，所以盒子总共占用的空间是`width`加上两边的`margin`and 。`border`这显然对页面布局有很大的影响。还有其他差异，但那是会给您带来最多问题的差异。

有一个名为[“box-sizing”](https://developer.mozilla.org/En/CSS/Box-sizing)的 CSS 功能。这允许您在上述两种模式之间切换盒子模型，同时保持标准模式。

这实际上是您的完美解决方案：您需要做的只是将`box-sizing:border-box;`每个元素的 CSS 放入（使用`*`选择器），然后问题就解决了。

不幸的是，`box-sizing`仅在较新版本的 IE 中受支持。如果你需要支持 IE6 或 IE7，那你就倒霉了。如果您的最低浏览器是 IE8，那么您可以使用它，这将解决您的大部分怪癖模式布局问题。不是全部，而是大多数。

希望有帮助。

# css - CSS - 图片加载

> ID：11593296
> 
> 赞同：4
> 
> 时间：2012-07-21T15:10:23.960
> 
> 标签：css, image

我有一个小问题，我有一个非常大的标题图像，并且在糟糕的互联网连接上加载需要时间。我已经看到一些网站从“低质量”->“正常质量（原始）”加载更大的图像文件，而不是“无图像”->“加载的图像”.. 我的标题似乎有什么.

```
background-image:url("images/header"); 
```

有没有办法让图像从低质量加载到高质量，而不是在 CSS 中没有图像到图像？

如果我把我的问题表达得很糟糕，我真的很抱歉。英语不是我的母语 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:14:31.210

使用`lowsrc`属性：

```
<img alt="Image Name" src="highquality.jpg" lowsrc="lowquality.jpg"> 
```

# javascript - 在没有 jquery 的情况下获取 iframe 中的特定内容

> ID：11593301
> 
> 赞同：1
> 
> 时间：2012-07-21T15:10:35.103
> 
> 标签：javascript, jquery, iframe

我想在没有 jQuery 的 iframe 中获取特定内容（.y6 中的所有跨度），
我怎样才能只写 javascript？

“ **#canvas_frame** ”是一个 iframe

```
spans = $("#canvas_frame").contents().find(".y6>span"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:58:52.047

**如果 iframe 与父页面位于同一域中，则**可以使用 iframe 的 contentWindow 属性。

像下面这样的东西应该可以帮助你：

```
var canvasFrame = document.getElementById('canvas_frame').contentWindow,
    allSpans = canvasFrame.document.getElementsByTagName('span'),
    spans = [],
    i;

i = allSpans.length;
while(i--){
    if(/y6/.test(allSpans[i].parentNode.className)){
        spans.push(allSpans[i]);
    }
} 
```

# php - 媒体查询在 MediaWiki 中有效吗？

> ID：11593312
> 
> 赞同：5
> 
> 时间：2012-07-21T15:12:25.907
> 
> 标签：php, css, mediawiki, media-queries

我正在尝试通过媒体查询在 MediaWiki 中使用响应式皮肤，并且正在解决一些奇怪的行为。

如果我将测试 div 添加到 wiki 页面：

```
<div id="testing">TESTING</div> 
```

然后添加一个媒体查询：

```
@media screen {
  #testing {background-color: green;}
} 
```

...到各个地方，该样式仅适用于某些浏览器。例如：

如果我将它添加到活动皮肤的“screen.css”文件中，所有其他工作风格都在其中：

*   iPad：没有
*   iPhone4：没有
*   Chrome 20.0 XP+Mac：否
*   Firefox 14.0.1 XP+Mac：是

如果我将它添加到通用皮肤的“shared.css”文件中，该文件适用于每个皮肤：

*   iPad：没有
*   iPhone4：没有
*   Chrome 20.0 XP+Mac：否
*   Firefox 14.0.1 XP+Mac：是

如果我将它添加到 wiki 的“MediaWiki:Common.css”页面：

*   iPad：是的
*   iPhone4：是的
*   Chrome 20.0 XP+Mac：是
*   Firefox 14.0.1 XP+Mac：是

**注意**：常规样式声明在所有这些位置都*按预期工作。*只有在包含在外部文件中的媒体查询中时，才会出现奇怪的现象。这显然是一个浏览器问题，再加上 MediaWiki 样式处理问题。Firefox 有何不同之处？

在使用 Chrome 的开发人员控制台检查页面时，我还注意到样式似乎是由“load.php”作为一大连贯的样式声明导入的，包括我的媒体查询；但似乎它只是没有被应用，即使在支持它的浏览器中也是如此。

任何人都可以阐明这种行为吗？我更喜欢在独立的样式表中工作，而不是在 wiki 编辑器中工作。

**更新：**

我还注意到，在 Firefox Web 控制台中检查元素时，样式列在活动样式中，如下所示：

```
load.php:1 @media screen
#testing {
  background-color: green;
} 
```

在 Chrome 的开发工具元素浏览器中以相同的方式检查元素时，样式不会在任何地方列出。

**更新 2：**

如果我在我的主题中替换这一行：

```
<link rel="stylesheet" href="/wiki/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.customskin&amp;only=styles&amp;skin=customskin&amp;*" /> 
```

直接链接到主题：

```
<link rel="stylesheet" href="wiki/skins/customskin/screen.css" /> 
```

样式适用于任何地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:31:28.573

除了将查询添加到 Common.css 之外，还有几种方法可以做到这一点。这两种方法都涉及绕过 MediaWiki 资源加载器的样式预处理，这是 1.17 版的新功能。

**方法一：**

根据[这个线程](http://www.mediawiki.org/wiki/Thread%3aTalk%3aResourceLoader/Conditional_script_inclusion_%28e.g._if_lt_IE_9_%29/reply)：

> 加载单个 css 文件（原始，没有缩小和其他 ResourceLoader 处理）：使用 OutputPage::addStyle( url, media, condition ) ，其中 url 直接指向文件。例如：
> 
> `$out->addStyle( 'modules/IE70Fixes.css', 'screen', 'IE 7' );`

所以将这一行添加到 /skins/customskin.php 文件中，在`initPage()`函数中：

> `$out->addStyle( 'customskin/customstyle.css', 'screen');`

**方法二：**

根据 MediaWiki 开发人员对[我提交的这个错误](https://bugzilla.wikimedia.org/show_bug.cgi?id=38586)的回复：

> 如果您在皮肤中并且希望将某些内容应用于特定的媒体类型，请将其放在单独的文件中并在资源定义中声明媒体类型。要么在资源定义中省略媒体类型，你就可以使用@media 块。

因此，在 resources/resources.php 中，在皮肤的数组构造函数中，替换以下行：

```
'styles' => array( 'customskin/customstyle.css' => array( 'media' => 'screen' ) ), 
```

有了这条线：

```
'styles' => array( 'customskin/customstyle.css' ), 
```

# delphi - 如果选择的是文件、文件夹或空白，则测试 shelllist

> ID：11593314
> 
> 赞同：0
> 
> 时间：2012-07-21T15:12:36.933
> 
> 标签：delphi

我再次提出另一个问题。

我正在使用来自 raize 的 shelllist，并希望在单击事件中添加一些代码以测试所选项目是否有效（文件、文件夹或空白），但我不确定如何正确执行此操作。

这就是我所拥有的。

```
procedure ZipCheck;
var
  Path : string;
  i : integer;
  s : string;
  DecompStream : TMemoryStream;
  LExtention : string;
begin

  Path := form2.FileList.SelectedItem.PathName;
  form2.FNameEdit.Text := Path;

  if form2.FileList.SelectedItem.IsValid = true then
  begin
    LExtention :=  TPath.GetExtension(form2.filelist.SelectedItem.PathName);
    if tpath.GetExtension(LExtention) = '.zip' then
    begin
      Showmessage(LExtention);
    end;
  end;
end; 
```

当我单击 shelllist 的空白区域时会发生什么情况，我得到一个异常错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:44:52.377

`SelectedItem`在尝试访问其任何成员之前，请确保它不是 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:22:31.297

如果我理解您的问题是正确的，您希望 ZipCheck 充当 on click 的事件处理程序。这将不起作用，因为事件处理程序必须是具有正确参数的方法（类中的过程）。

另一个优点是您不需要访问表单 var (form2)。

所以你得到：

```
 procedure TForm2.ZipCheck(Sender: TObject);
    var
      Path : string;
      i : integer;
      s : string;
      DecompStream : TMemoryStream;
      LExtention : string;
    begin

      Path := FileList.SelectedItem.PathName;
      FNameEdit.Text := Path;

      if FileList.SelectedItem.IsValid = true then
      begin
        LExtention :=  TPath.GetExtension(filelist.SelectedItem.PathName);
        if tpath.GetExtension(LExtention) = '.zip' then
        begin
          Showmessage(LExtention);
        end;
      end;
    end; 
```

# mysql - 如何使用 .sql 文件对 mysql 数据库进行增量备份？

> ID：11593319
> 
> 赞同：2
> 
> 时间：2012-07-21T15:12:51.293
> 
> 标签：mysql, sql-update

情况：我们的生产 mysql 数据库每天将转储到 .sql 文件中。我想保持一个相对最新的影子数据库。
我知道要从 .sql 文件创建一个 mysql 数据库，可以使用：

```
mysql -u USERNAME -p DATABASENAME < FILE.SQL 
```

对于我们的数据库，这需要 4-5 个小时。不用说，我想减少它，我想知道是否有办法用新/更改的内容更新数据库。在第 2 天，有没有办法用从生产数据库中转储的新 .sql 文件*更新*我的影子数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:19:04.263

这个问题可以使用 `mysql`同步来解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:22:03.193

一些指导您的链接：

*   [http://www.howtoforge.com/mysql_database_replication](http://www.howtoforge.com/mysql_database_replication)
*   [免费的 MySQL 同步工具](https://stackoverflow.com/questions/364291/free-mysql-synchronization-tool)
*   [https://launchpad.net/mysql-proxy](https://launchpad.net/mysql-proxy)
*   [https://www.google.com.br/search?q=mysql+同步](https://www.google.com.br/search?q=mysql+synchronization)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T15:33:02.527

MySQL复制是要走的路。

**但是，如果这是不可能的，请使用以下程序**：

在所有表中都有一个修改过的时间戳列，并在插入/更改行时更新此值。

使用以下 mysqldump 选项获取**增量 SQL 文件**（这使用 REPLACE 命令而不是 insert 命令，因为现有记录将在备份数据库中更新）。

将时间戳值保存在文件系统中的某个位置。并在 where 条件下使用它。MDFD_DATE 是您需要过滤的列名。成功备份后，更新文件中存储的值。

skip-tz-utc 防止 MSQL 根据您的时区自动调整时间戳值。

> mysqldump --databases db1,db2 --user=user --password=password --no-create-info --no-tablespaces --replace --skip-tz-utc --lock-tables --add-locks - -compact --where=MDFD_DATE>='2012-06-13 23:09:42' --log-error=dump_error.txt --result-file=result.sql

使用新的 sql 文件并在您的服务器中运行它。

**限制：**

如果在您的数据库中删除了某些记录，此方法将不起作用。您需要从备份数据库中手动删除它们。否则，保留一个 DEL_FLAG 列并在生产中将其更新为“Y”以用于已删除的记录，并使用此条件删除备份数据库中的记录。

# algorithm - 了解Cormen邮局定位解决方案

> ID：11593323
> 
> 赞同：4
> 
> 时间：2012-07-21T15:13:14.827
> 
> 标签：algorithm, median

Cormen 的《算法简介》一书在第 9 章中有一个问题**邮局位置问题**。

> 我们有 n 个点 p1,p2,...pn，权重为 w1,w2,....wn。找到使总和 wi*d(pi,p) 最小化的点 p（不一定是输入点之一），其中 d(a,b) = 点 a,b 之间的距离。

查看相同的解决方案，我知道***加权中位数***将是解决此问题的最佳解决方案。

但是我对实际的编码部分和用法有一些基本的怀疑。

*   如果所有元素的权重相等，那么要找到加权中位数，我们会找到所有权重的总和 < 1/2 的点。如何在这里扩展它？

*   给定一个真实场景，将要在各个房屋中递送的信件数量作为权重，并且我们希望通过找到邮局的位置来最小化要行驶的距离，给定 x 坐标（假设所有房屋都在 1 个单一维度中），我们将如何实际去做呢？

有人可以帮助我消除疑虑并理解问题。

编辑 ：

我也在考虑一个非常相似的问题：有一个矩形网格（2d）和不同数量的人在不同的地方都想在1点见面（肯定有整数坐标），那么与上述问题，我们将如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T19:26:45.313

您仍然想要权重总和为 1/2 的点。选择任何一点，并考虑是否会更好地从那里向左移动一点或向右移动一点。如果向左移动一个点，则与左侧所有点的距离减一，与右侧所有点的距离增加一。输赢取决于左侧权重之和和右侧权重之和。如果权重总和不等于 1/2，您可以通过向权重 > 1/2 的方向移动来做得更好，所以唯一不能通过选择另一个来做得更好的点是权重为 1/2 的点- 或者，更准确地说，两侧的权重都 <= 1/2。

要使 1/2 成为正确答案，权重的总和必须为 1，因此，如果您从作为字母数量的权重开始，则必须将它们除以字母总数才能使它们总和为 1。当然，除非您必须为要交付的每封信进行单独的旅行，否则此惩罚功能实际上没有意义，但我假设我们应该忽略这一点。

编辑

对于不止一个维度，您几乎最终会直接解决最小化距离加权和的问题。[维基百科在http://en.wikipedia.org/wiki/Geometric_median](http://en.wikipedia.org/wiki/Geometric_median)中对此进行了描述。您想考虑权重，但这不会使问题复杂化。一种方法是[http://en.wikipedia.org/wiki/Iteratively_reweighted_least_squares](http://en.wikipedia.org/wiki/Iteratively_reweighted_least_squares)。不幸的是，这并不能保证它找到的解决方案将在一个网格点上，或者离解决方案最近的网格点将是最佳网格点。它可能不会太糟糕，但在所有可能的情况下找到最好的网格点可能会更棘手。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-21T15:19:38.550

编辑：这个答案是错误的，见评论

您正在寻找的东西称为[质心](http://en.wikipedia.org/wiki/Center_of_mass)（TMHO 加权中位数是一维的质心）。

我没有得到你的第一个问题，你能详细说明一下吗？

对于您的示例，我们将计算与该职位相关的每个办公室的信件数量加权的平均职位。这将给我们：x_center = sum(x_i * w_i) / sum(w_i) 和 y_center = sum(y_i * w_i) / sum(w_i)。

它是否正确回答了您的问题？

# php - AJAX 请求后返回不需要的新行

> ID：11593326
> 
> 赞同：5
> 
> 时间：2012-07-21T15:13:32.080
> 
> 标签：php, ajax, byte-order-mark

我正在使用 ajax 请求将评论发送到数据库。成功的响应标记为

```
1\. OK 
```

问题实际上是来自 php 脚本的响应是

```
1\. 
2\. OK 
```

所以我调试了脚本并注意到在脚本执行以下行时添加了换行符 si：

```
require_once($ABS_APPS."/quotes/classQuote.php"); 
```

经过一些搜索，我读到它可能是 BOM（字节顺序标记）问题。所以我刚刚下载并`classQuote.php`使用十六进制编辑器打开了文件，发现没有 BOM ......有人可以帮我吗？

PS 我项目中的所有文件都以 UTF-8 编码，我目前使用的是不向文件添加 BOM 的 NetBeans。

这是有罪的脚本：

```
// Send new comment to DB
case "send":
    $notification = new Notification();
    if($comment->insert($_POST["username"], $_POST["comment"], $_POST["app"], $_POST["entryId"])){
        switch ($_POST["app"]) {
            case "quotes":
                require_once($ABS_APPS."/quotes/classQuote.php");
                $quote = new Quote();
                $quoteData = $quote->get($_POST["entryId"]);
                // If user comments his own entry we don't have to send the notification
                if($quoteData["UserAuthor"] != $_SESSION["User"]){
                    $notification->newComment($_POST["username"], $quoteData["UserAuthor"], $_POST["entryId"], $_POST["app"]);
                }
                break;
            default:
                break;
        }
        echo "OK";
    } else {
        echo "ERROR";
    }
    break; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T15:21:10.440

1.  确保`<?php`在您的 classQuote.php开头之前没有任何内容
2.  确保关闭后没有尾随字符/行`?>`
3.  `?>`检查代码行中的某处是否存在标记（遵循 __construct 的流程以及调用内容的位置）

事实上，省略结束标签可能会有所帮助。另一种可能性是：

```
 // capture output
            ob_start(); 
            require_once($ABS_APPS."/quotes/classQuote.php");
            $quote = new Quote();
            $quoteData = $quote->get($_POST["entryId"]);
            // If user comments his own entry we don't have to send the notification
            if($quoteData["UserAuthor"] != $_SESSION["User"]){
                $notification->newComment($_POST["username"], $quoteData["UserAuthor"], $_POST["entryId"], $_POST["app"]);
  // trim whitespace
            echo trim(ob_get_clean()); 
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T09:00:49.403

如果你使用 jQuery

您可以在 AJAX 成功回调中使用 jQuery.trim(responseData) 来消除空格

参见这里 [http://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)

希望能帮助到你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-31T13:34:34.747

我也面临同样的问题。我想出的最终解决方案如下

1.  检查加载到您发送 AJAX 请求的文件中的所有文件

2.  从第一行和 PHP 起始标记中删除多余的空格`<?`如果您的文件从第 1 行开始，则第一个字符应该是 this `<?`。

3.  如果它们是 PHP 文件，则不要 `?>` 在末尾添加。

4.  尝试将最后一个行标记保留到编写的最后一行代码。表示不要在文件末尾添加额外的空格。如果代码在第 32 行结束，请不要通过编辑器转到第 33 行。事实上，按下后退按钮并清除下面直到第 32 行的所有内容。

5.  如果您使用任何 PHP 框架，请确保加载的所有文件的层次结构不应该有相同的问题。例如，如果您使用的是 codeigniter 框架，请确保调用函数的控制器和加载到该控制器中的所有模型不应该有相同的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-17T08:12:10.253

我通过这些修复

1.  确保没有任何东西，在开口之前
2.  确保结束后没有尾随字符/行？>
3.  检查代码行中的某处是否存在 ?> 标记（遵循 __construct 的流程以及调用内容的位置）

# c++ - 如何从不同的线程调用主 v8 循环中的函数

> ID：11593327
> 
> 赞同：2
> 
> 时间：2012-07-21T15:13:42.583
> 
> 标签：c++, node.js, native, libuv

我正在尝试为涉及神经网络的 nodejs 实现音频模块。

该神经网络有 2 种类型的节点

1.  纯 C++
2.  基于 JAVASCRIPT 的 C++（涉及调用 javascript 函数）

据我所知，不可能从不同的线程调用任何涉及 v8 的函数。如果我回到主线程，我将失去我在神经网络中的遍历。

如何实现从不同线程调用主线程中的函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:25:30.250

我在

#libuv 频道中的@indutny。

我现在要做的是通过

```
uv_async_send 
```

中定义`libuv.h`的函数，因为该函数是非阻塞的。我还使用信号量等到 javascript 函数的执行完成，以避免损坏的解析。

# boolean - 为什么产品称为 minterms 而 sum 称为 maxterms？

> ID：11593335
> 
> 赞同：16
> 
> 时间：2012-07-21T15:14:42.270
> 
> 标签：boolean, logic, boolean-logic, boolean-expression, boolean-operations

他们这样做有理由吗？我的意思是，在最小项的总和中，您查找输出为 1 的项；我不明白他们为什么称它为“minterms”。为什么不是 maxterms，因为 1 远大于 0？

这背后有我不知道的原因吗？还是我应该接受它而不问为什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-21T15:41:12.093

将这些术语称为“minterms”和“maxterms”的约定并不对应于 1 大于 0。我认为最好的回答方法是举个例子：

假设您有一个电路，它由 描述`X̄YZ̄ + XȲZ`。

“这种形式由两组三人组成。每组三人是一个'minterm'。表达式minterm旨在暗示表达式中的每个三人组仅对其中一个取值1 X、Y 和 Z 的八种可能组合及其倒数。” [http://www.facstaff.bucknell.edu/mastascu/elessonshtml/Logic/Logic2.html](http://www.facstaff.bucknell.edu/mastascu/elessonshtml/Logic/Logic2.html)

所以“min”指的是这些术语是构建某个功能所需的“最小”术语。如果您想了解更多信息，上面的示例在提供的链接中的更多上下文中进行了解释。

编辑：“他们将 MIN 用于 AND，将 MAX 用于 OR”的原因是：

在**产品总和**（您称之为 AND）中，只有一个最小术语必须为真，表达式才能为真。在**和的乘积**（你称之为 OR）中，所有的 maxterms 必须为真，表达式才能为真。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-21T15:28:13.507

```
min(0,0) = 0
min(0,1) = 0
min(1,0) = 0
min(1,1) = 1 
```

所以最小值很像逻辑与。

```
max(0,0) = 0
max(0,1) = 1
max(1,0) = 1
max(1,1) = 1 
```

所以最大值很像逻辑或。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-09T04:40:20.370

我相信 AB 被称为最小项是因为它在维恩图上占据了最小的区域；而 A+B 被称为 MAXTERM，因为它在维恩图中占据了最大面积。画出两张图，意思就很明显了 Ed Brumgnach

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-30T07:43:18.663

在**产品总和**( **SOP** ) 中，SOP 表达式的每个项都称为**“最小项”**，因为，

比如说，一个**SOP**表达式如下： *F(X,Y,Z) = X'.Y'.Z + XY'.Z' + XY'.Z + XYZ*

对于此**SOP**表达式为**“1”**或为*真*（作为**正逻辑**）， 表达式的***任何****项都应为 1。因此是“minterm”一词*。

即，**任何**项 (X'Y'Z) 、 (XY'Z') 、 (XY'Z) 或 (XYZ) 为**1**，结果**F(X,Y,Z) 为 1**！因此它们被称为“minterms”。

* * *

另一方面，在**Product Of Sum** ( **POS** ) 中，POS 表达式的每个项都称为“maxterm”，因为，

假设**POS**表达式为： F(X,Y,Z) = (X+Y+Z).(X+Y'+Z).(X+Y'+Z').(X'+Y' +Z)

对于这个**POS**表达式为“ **0** ”（因为**POS**被认为是**负逻辑**，我们认为是**0**个术语），表达式的***所有****术语都应该是 0。因此“最大术语”这个词！*

即对于**F(X,Y,Z) 为 0**， **每个**项 (X+Y+Z), (X+Y'+Z), (X+Y'+Z') 和 (X'+Y '+Z) ​​应该等于“ **0** ”，否则 F 不会为零！！

* * *

> *因此，POS 表达式中的每个项都称为**MAXTERM（所有项的最大值！）**，因为所有项都应为零，F 为零，而 POS 中的任何项为 1 都会导致 F 为 1。因此它被称为**MINTERM（至少一个任期！）***

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-23T06:32:30.737

这是另一种思考方式。

> 一个乘积被称为*最小项*，因为它具有*最小可满足性*，而总和被称为*最大项*，因为它在所有实际有趣的布尔函数中具有*最大可满足性。*
> 
> 它们被称为*术语*，因为它们被用作任意布尔函数的各种规范表示的构建块。

* * *

**细节：**

请注意，“0”和“1”是普通的布尔函数。假设一组布尔变量`x1,x2,...,xk`和一个非平凡的布尔函数`f(x1,x2,...,xk)`。

按照惯例，只要输入的值为 ，就称输入*满足*布尔函数。`f``f``1`

请注意，确实存在`2^k`可能的输入，并且任何非平凡的布尔函数都*可以满足*最小 1 个输入到最大`2^k -1`输入。

现在考虑两个感兴趣的简单布尔函数：所有变量**S**的总和，以及所有变量**P**的乘积（变量可能/可能不作为补码出现）。**S**是一个具有*最大可满足性的*布尔函数，因此称为*maxterm*，其中**P**是具有*最小可满足性*的函数，因此称为*minterm*。

# cocoa - 如何在 NSAlert 中将文本斜体？

> ID：11593337
> 
> 赞同：1
> 
> 时间：2012-07-21T15:15:09.363
> 
> 标签：cocoa

如何在 NSAlert 中添加斜体文本的某些部分？

```
 NSAlert *alert = [NSAlert alertWithMessageText:NSLocalizedString(@"Warning", nil)
                                  defaultButton:NSLocalizedString(@"OK", nil)
                                alternateButton:nil
                                    otherButton:nil
                      informativeTextWithFormat:NSLocalizedString(@"I want to italicize the word awesome in this text", nil)]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T16:05:41.687

您可以在附件视图中放置您想要的任何内容，该视图位于信息文本或抑制复选框（如果存在）和响应按钮之间。[NSAlert 文档中](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAlert_Class/Reference/Reference.html)的示例`setAccessoryView:`说明了如何执行此操作。不幸的是，所有其他文本方法`NSAlert`都只取`NSString`而不取`NSAttributedString`。这个关于[在 NSAlert 中使用 NSAttributedString 的](http://www.cocoabuilder.com/archive/cocoa/155037-nsattributedstring-alert-panels.html)讨论表明明显的 hack 不起作用。你最好只制作自己的警报窗口类。

# magento - Magento 通过系统变量动态更改布局

> ID：11593340
> 
> 赞同：5
> 
> 时间：2012-07-21T15:15:29.163
> 
> 标签：magento, layout, magento-1.4, magento-1.5, magento-1.6

有没有一种方法可以通过使用在我们自己的模块上设置的系统变量来动态更改 Magento 页面（比如说产品类别页面）的布局？我希望能够通过我自己的模块管理配置面板设置我的类别页面的默认布局。这样每次我想更改某个 magento 页面的默认布局时，我就不必处理那些令人困惑的 XML 布局文件。

我知道，在 phtml 文件中，我们可以通过调用`Mage::getStoreConfig('module/scope/...')`使用该系统变量来简单地调用我们自己的模块的系统变量。但是，如果我们想使用该系统变量来更改默认情况下在 XML 布局文件中设置的整个布局，该怎么办。

我看不到任何方法可以在 XML 布局文件中提取该系统变量值。

但我很确定必须有正确的方法来做到这一点。到目前为止，这是我得到的最接近的线索

[Magento - xml布局，为ifconfig指定值？](https://stackoverflow.com/questions/5596193/magento-xml-layouts-specify-value-for-ifconfig)

但是，对于我真正想要实现的目标，我仍然找不到任何直接的答案

这是我的 config.xml 的内容

```
<config>
    <modules>
        <Prem_Spectra>
            <version>0.1.0</version>
        </Prem_Spectra>
    </modules>

    <global>
        <models>
            <spectra>
                 <class>Prem_Spectra_Model</class>
            </spectra>
        </models>

        <helpers>
            <prem_spectra>
                <class>Prem_Spectra_Helper</class>
            </prem_spectra>
        </helpers>

    </global>
</config> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T17:25:14.140

这可以很容易地使用布局 xml 和助手中的简单方法来实现。我没有看到这里对观察员有任何要求，也没有任何其他过于详尽的要求。

因此，根据您从自己的模块存储配置值更改所有类别页面布局的要求，您将在布局 xml 中需要以下内容：

```
<catalog_category_view>
    <reference name="root">
        <action method="setTemplate">
            <template helper="yourmodule/switchTemplate" />                  
        </action>
    </reference>
</catalog_category_view> 
```

以及您的模块默认助手中的以下内容：

```
public function switchTemplate()
{
    $template = Mage::getStoreConfig('path_to/yourmodule/config');
    return $template;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-21T16:26:32.210

我们在谈论根元素的模板，所以 3columns、2columns 等等？正确的？

实现一个观察者，监听事件`controller_action_layout_generate_blocks_before`然后在观察者中获取block并设置模板

`Mage::app()->getLayout()->getBlock('root')->setTemplate($myFancyTemplatePath);`

这应该这样做。

其他想法，试试这个事件`controller_action_layout_load_before`，但我认为这还为时过早。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-21T17:24:44.670

除了Fabian的回答：

您也许可以扩展“显示模式”类别的功能。使用`controller_action_layout_load_before`事件然后检索类别的显示模式并为其创建 XML 更新句柄。

```
 $category = Mage::registry('current_category');
    $handle = 'category_displaymode_' . strtolower($category->getDisplayMode());

    $layout = $observer->getEvent()->getLayout();
    $layout->getUpdate()->addHandle($handle); 
```

这样，您可以在 local.xml 中预先定义各种布局，并通过调整管理中类别编辑页面上的“显示模式”下拉菜单轻松地在它们之间切换。

通过在管理员中进行一些调整，您可以将其他显示模式添加到下拉列表中，以使更多类型的自定义显示模式 xml 更新句柄可用。

# java - 从文件中读取字符

> ID：11593353
> 
> 赞同：0
> 
> 时间：2012-07-21T15:16:47.853
> 
> 标签：java, arrays

我无法理解为什么我的代码不能正常工作。只是为了测试它，我的 txt 文件中只有五个字符。我知道字符被放入我创建的数组中，但我不确定它为什么不打印它们。谢谢！

```
 catch (IOException exception) {
            System.err.println(exception);
        }// catch

        finally {
            try {
                if (fileInput != null)
                    fileInput.close();
            }// try

            catch (IOException exception) {
                System.err.println("error!" + exception);
            }// catch

        }// finally

    }// main
}// TestCode 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:30:08.177

您的 while 阅读器循环中有一个 for 循环。更好地使用：

```
 int index = 0;
    while ((character = fileInput.read()) != -1) {
        inputArray[index] = (char) character;
        index++;
    } 
```

还要确保您不超过 inputArray 的大小。如果需要增长此数据，您可能需要考虑使用 List 类型。

# binary - 指数二进制数

> ID：11593358
> 
> 赞同：1
> 
> 时间：2012-07-21T15:17:52.273
> 
> 标签：binary, exponent

有人能告诉我指数化二进制数背后的逻辑吗？比如我想取110^10，但是不知道背后的逻辑。如果有人能提供给我，那将是一个很大的帮助..（而且我希望它以纯二进制完成，没有转换，也没有循环乘法。只是逻辑......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-24T15:15:35.423

二进制指数非常容易。它们只是简单的添加和转换。

数字 110 是您开始的地方。从数字 10 （即 0）向后计算，它是零，所以这意味着“不要添加它”。

现在你左移 - 所以 110 变成 1100

现在你处理 10 的下一位（即 1）——它是一个，所以这意味着“将它添加到结果中”——到目前为止它是 0，因为我们还没有添加它，所以结果现在是 1100

没有更多的事情要做 - 所以答案是 1100

如果你在做 110^110 - 你还有一个要做 - 所以 - 你再次转移并现在得到 11000。

最后一位又是一个，所以现在添加：1100 + 11000 = 100100

110^10=1100 即 6^2=12

110^110=100100 即 6^6=36

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:24:16.667

[求幂](http://en.wikipedia.org/wiki/Exponentiation)是独立于数字的实际文本表示的运算（例如，以 2 为底 - 二进制，以 10 为底 - 十进制）。

也许你想问一下二进制[异或](http://en.wikipedia.org/wiki/XOR)（异或）操作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T00:06:48.380

peenut 是正确的，因为求幂并不关心你用什么基数来表示你的数字，而且我不知道你所说的“只是逻辑”是什么意思，但这里有一个尝试。

在 Wikipedia 上快速搜索一下就会发现[这个算法](https://en.wikipedia.org/wiki/Exponentiation#Efficient_computation_with_integer_exponents)。基本思想是平方你的基础，存储结果，然后平方结果并重复。这将为您提供答案的因素，然后您可以将它们相乘。我认为它是一种“二进制搜索”风格的求幂算法，因为您可以通过平方和存储跳过许多中间步骤。

# real-time - 刷新弹性搜索索引/实时搜索

> ID：11593359
> 
> 赞同：2
> 
> 时间：2012-07-21T15:17:54.910
> 
> 标签：real-time, elasticsearch

我正在为 ElasticSearch 数据源编写单元测试，但是，我得到的结果好坏参半。问题是 match_all 查询没有找到我提交的记录，但是，当我使用 CURL 以相同的顺序手动运行命令时，单元测试是否能够找到记录。

我相信也许索引没有刷新，所以，我在提交记录后开始运行“刷新”api命令，然而，这也不起作用。这是我的命令列表 - 如果有人对如何确保这些命令有效，即使它们是立即连续运行有任何建议，这将很有帮助。

单元测试运行的命令：

```
curl -XGET 'http://localhost:9200/test_index/_mapping'

curl -XDELETE 'http://localhost:9200/test_index/test_models'

curl -XPOST 'http://localhost:9200/test_index/test_models/_refresh' -d '{}'

curl -XPUT 'http://localhost:9200/test_index/test_models/_mapping' -d '{"test_models":{"properties":{"TestModel":{"properties":{"id":{"type":"string","index":"not_analyzed"},"string":{"type":"string"},"created":{"type":"date","format":"yyyy-MM-dd HH:mm:ss"},"modified":{"type":"date","format":"yyyy-MM-dd HH:mm:ss"}},"type":"object"}}}}'

curl -XPOST 'http://localhost:9200/test_index/test_models/_bulk' -d '{"index":{"_index":"test_index","_type":"test_models","_id":"test-model"}}
{"TestModel":{"id":"test-model","string":"Analyzed for terms","created":"2012-01-01 00:00:00","modified":"2012-02-01 00:00:00"}}
'

curl -XPOST 'http://localhost:9200/test_index/test_models/_refresh' -d '{}'

curl -XGET 'http://localhost:9200/test_index/_mapping'

curl -XGET 'http://localhost:9200/test_index/test_models/_search' -d '{"query":{"match_all":{}},"size":10}' 
```

这个问题也已发布到（超级棒的）ElasticSearch 邮件列表：

[https://groups.google.com/forum/?fromgroups#!topic/elasticsearch/Nxv0XpLDY4k](https://groups.google.com/forum/?fromgroups#!topic/elasticsearch/Nxv0XpLDY4k)

-DK

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T15:23:48.233

问题出在 _refresh 命令上。

您不能刷新类型，只能刷新索引。我将刷新命令更改为：

```
curl -XPOST 'http://localhost:9200/test_index/_refresh' 
```

现在已经修复了！

# python - Python - 如何创建一个 8 字节长的随机字符串？

> ID：11593360
> 
> 赞同：5
> 
> 时间：2012-07-21T15:17:57.230
> 
> 标签：python

> **可能重复：**
> [python 随机字符串生成与大写字母和数字](https://stackoverflow.com/questions/2257441/python-random-string-generation-with-upper-case-letters-and-digits)

我需要在 python 中创建一个 8 字节长的随机字符串。

```
rand_string = ? 
```

我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-21T15:21:47.760

```
import os
rand_string = os.urandom(8) 
```

将创建一个 8 个字符长的随机字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-21T15:26:16.073

[**`os.urandom`**](http://docs.python.org/library/os.html#os.urandom)正是提供了这个接口。

如果你想使用`random`模块（为了确定性随机性，或者因为平台碰巧没有实现`os.urandom`），你必须自己构造函数：

```
import random
def randomBytes(n):
    return bytearray(random.getrandbits(8) for i in range(n)) 
```

在 Python 3.x 中，您可以替换`bytearray`为 just `bytes`，但在大多数情况下， a`bytearray`应该表现得像一个`bytes`对象。

# php - php preg_match_all 括号中的数字

> ID：11593361
> 
> 赞同：1
> 
> 时间：2012-07-21T15:17:59.027
> 
> 标签：php, regex, preg-match-all, numeric

我正在尝试加载一个远程网站并获取括号内的所有数字。但最终发生的是它只匹配最后一个值。

我的正则表达式错了吗？我使用了正确的标志吗？

我在第二个 $html 变量中添加了它应该匹配的示例。

```
 //$html = file_get_contents("http://example.com/test.html");

    $html = "(1234) (12) (1)  \r\n  (1346326)";
    preg_match_all("^[(\d)]+$^", $html, $matches, PREG_PATTERN_ORDER);
    print_r($matches);
    echo "<br>";
    foreach ($matches as $val) {
        echo "matched: " . $val[0] . "\n";

    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T15:22:21.820

怎么样：

```
preg_match_all("/\((\d+)\)/", $html, $matches, PREG_PATTERN_ORDER); 
print_r($matches[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:22:35.597

我看到两个可能的问题。

首先，您从 start(^) 到 end($) 进行匹配，它只会匹配行首和行尾之间完全匹配的内容。

其次，您很可能希望使用 /gs 正则表达式参数将其全部输入。

```
preg_match_all("/\b(\d+)\b/gs" ... 
```

# linux - Adobe iOS 打包程序可以在 linux 上运行吗？

> ID：11593362
> 
> 赞同：1
> 
> 时间：2012-07-21T15:18:11.803
> 
> 标签：linux, ant, air, package, flex4.6

我们使用 ant 命令行脚本通过 adt (flex 4.6 air 3.3) 构建 ios flex 应用程序。样本：

```
<java jar="${FLEX_HOME}/lib/adt.jar" fork="true">
            <arg value="-package"/>
            <arg value="-target"/>
            <arg value="ipa-ad-hoc"/>
            ... 
```

脚本在 Windows 上运行良好。但是在linux上我得到：

```
 [java] unexpected failure: Functionality not supported on : Linux
 [java] java.lang.UnsupportedOperationException: Functionality not supported on : Linux
 [java]     at com.adobe.air.ipa.AOTCompiler.<init>(AOTCompiler.java:218)
 [java]     at com.adobe.air.ipa.IPAOutputStream.createIosBinary(IPAOutputStream.java 
```

它应该在linux上工作还是我在脚本中犯了错误？

斯坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:16:44.690

它不适用于 linux，因为 Adob​​e 从 2.7 起就不再支持 Air for linux。

它可以与葡萄酒一起使用，因为它很棘手。

# jquery - jquery语法意义——$(x)和x的区别

> ID：11593370
> 
> 赞同：0
> 
> 时间：2012-07-21T15:19:18.653
> 
> 标签：jquery

我知道当我们有一个 id='someId' 的元素时，我们可以像这样使用 Jquery 访问它：

```
$('#someId') 
```

但有时当我们有一个变量时：

```
var x; 
```

我们只使用`x`or `$(x)`。

我们什么时候使用`$(x)`而不是`x`？我们什么时候使用`$($(x))`而不是`x`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:20:53.013

`$(x)`创建一个 jQuery 对象，其中包含`x`（应该是一个 DOM 节点）或其中包含的元素`x`（如果它是一个数组或 jQuery 对象）。

`x`如果您只想要普通的 DOM 对象（假设是一个），则可以使用`x`，例如`x.id`获取元素的 ID，因为不需要为此创建 jQuery 对象 - 它会更写：`$(x).prop('id')`.

你**从来**不用`$($(x))`！没有**理由这样做**。虽然它可以工作，但它就像`$(x)`您首先创建一个 jQuery 对象，然后将该 jQuery 对象的内容放入一个新的 jQuery 对象。

* * *

如果您需要其他方式（jQuery 对象 => DOM 对象），有很多方法。`y[0]`是获取第一个元素的最简单方法；`y.get()`如果您想要一个包含 jQuery 对象中所有元素的数组，请使用`y`。

# php - 使用 PHP 的数据库会话获取存储的 user_id

> ID：11593372
> 
> 赞同：0
> 
> 时间：2012-07-21T15:19:22.673
> 
> 标签：php, javascript, jquery, backbone.js, laravel

我正在使用backbone.js 创建一个带有按钮的视图。单击该按钮时，包含登录用户的数据`user_id`将通过 AJAX 发送回服务器。

**问题：**我正在使用一个 PHP 后端（Laravel），它使用数据库会话（使用 Session 类将用户存储`user_id`在数据库中）。如何`user_id`使用 Javascript/jQuery/backbone.js 检索它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:33:53.773

非常正确，存储为“span id="usersessionid""，您可以使用 $("usersessionid").html() 等获取它。不确定这是您想要实现的目标。

给 span 一个 id=usersessionid 并把 $_SESSION['user_id'] 放在里面。您可以隐藏该跨度。

对不起，有点努力让代码显示在这里....

# windows-phone-7 - 是否可以在 Windows Phone 中以编程方式控制网络状态？

> ID：11593373
> 
> 赞同：0
> 
> 时间：2012-07-21T15:19:35.783
> 
> 标签：windows-phone-7

我检查了[`DeviceNetworkInformation`Class](http://msdn.microsoft.com/en-us/library/microsoft.phone.net.networkinformation.devicenetworkinformation%28v=vs.92%29.aspx)并且有一些属性将网络的当前状态返回为`TRUE`or `FALSE`：

*   [`IsCellularDataEnabled`](http://msdn.microsoft.com/en-us/library/microsoft.phone.net.networkinformation.devicenetworkinformation.iscellulardataenabled%28v=vs.92%29.aspx)
*   [`IsWiFiEnabled`](http://msdn.microsoft.com/en-us/library/microsoft.phone.net.networkinformation.devicenetworkinformation.iswifienabled%28v=vs.92%29.aspx)

我想知道是否有允许操作/设置网络状态的 API，比如说打开/关闭无线或打开/关闭数据连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:52:26.057

您不能直接更改设置，但可以启动[ConnectionSettingsTask](http://msdn.microsoft.com/en-us/library/hh394011%28v=vs.92%29)，这将打开相关的操作系统设置页面。

# shell - hdfs 权限被拒绝

> ID：11593374
> 
> 赞同：52
> 
> 时间：2012-07-21T15:19:36.313
> 
> 标签：shell, security, hadoop, permissions, hdfs

我是 hadoop 分布式文件系统的新手，我已经在我的机器上完成了 hadoop 单节点的完整安装。但是之后当我将数据上传到 hdfs 时，它会给出一条错误消息`Permission Denied`。

带有命令的终端消息：

```
hduser@ubuntu:/usr/local/hadoop$ hadoop fs -put /usr/local/input-data/ /input
put: /usr/local/input-data (Permission denied)

hduser@ubuntu:/usr/local/hadoop$ 
```

使用 sudo 并将 hduser 添加到 sudouser 后：

```
hduser@ubuntu:/usr/local/hadoop$ sudo bin/hadoop fs -put /usr/local/input-data/ /inwe
put: org.apache.hadoop.security.AccessControlException: Permission denied: user=root, access=WRITE, inode="":hduser:supergroup:rwxr-xr-x

hduser@ubuntu:/usr/local/hadoop$ 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-22T19:02:32.057

我通过禁用 dfs 权限暂时解决了这个问题。通过将以下属性代码添加到 conf/hdfs-site.xml

```
<property>
  <name>dfs.permissions</name>
  <value>false</value>
</property> 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-11-15T13:32:10.487

我有类似的情况，这是我的方法有些不同：

```
 HADOOP_USER_NAME=hdfs hdfs dfs -put /root/MyHadoop/file1.txt / 
```

您实际上所做的是根据您的本地权限读取本地文件，但是在将文件放在 HDFS 上时，您会像 user 一样进行身份验证`hdfs`。您可以使用其他 ID 执行此操作（请注意真正的身份验证方案配置，但通常不是这种情况）。

好处：

1.  权限保存在 HDFS 上。
2.  你不需要`sudo`。
3.  您根本不需要真正合适的本地用户“hdfs”。
4.  由于前面的几点，您不需要复制任何内容或更改权限。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-21T18:58:38.667

您在这里遇到两个不同的问题：

* * *

```
hduser@ubuntu:/usr/local/hadoop$ hadoop fs -put /usr/local/input-data/ /input put: /usr/local/input-data (Permission denied) 
```

在这里，用户`hduser`无权访问本地目录`/usr/local/input-data`。也就是说，您的本地权限过于严格。你应该改变它。

* * *

```
hduser@ubuntu:/usr/local/hadoop$ sudo bin/hadoop fs -put /usr/local/input-data/ /inwe put: org.apache.hadoop.security.AccessControlException: Permission denied: user=root, access=WRITE, inode="":hduser:supergroup:rwxr-xr-x 
```

在这里，用户`root`（因为您使用的是 sudo）无权访问 HDFS 目录`/input`。如您所见：`hduser:supergroup:rwxr-xr-x`说只有`hduser`写权限。Hadoop 并不真正尊重`root`作为特殊用户。

* * *

要解决此问题，我建议您更改本地数据的权限：

```
sudo chmod -R og+rx /usr/local/input-data/ 
```

然后，**以 hduser 身份**`put`再次尝试该命令。

 *** * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-10T06:24:30.520

我已经使用以下步骤解决了这个问题

```
su hdfs
hadoop fs -put /usr/local/input-data/ /input
exit 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-05-06T15:30:22.247

以 hduser 身份（从 root）启动 shell 并运行您的命令

```
sudo -u hduser bash
hadoop fs -put /usr/local/input-data/ /input 
```

[更新] 另请注意，该`hdfs`用户是超级用户并且具有所有 r/w 权限。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-12-01T23:12:21.807

**对于 Hadoop 3.x**，如果您尝试在未经身份验证的情况下（例如`user=dr.who`）在 HDFS 上创建文件，您将收到此错误。

不建议用于需要安全的系统，但是如果您想在 Hadoop 3 中完全禁用文件权限，则`hdfs-site.xml`设置已更改为：

```
<property>
  <name>dfs.permissions.enabled</name>
  <value>false</value>
</property> 
```

[https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml](https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml)**

# mysql - 选择 id 值最大的表行

> ID：11593379
> 
> 赞同：0
> 
> 时间：2012-07-21T15:20:40.440
> 
> 标签：mysql, database, select

我正在尝试编写从表中选择最后一个附加值的 mysql 语句。由于我表中的 id 列是一个自动递增值，我发现最简单的方法是选择具有最高 ID 值的行。

我想知道是否有人可以帮助我完成此任务？

像这样的东西：

mysql_query("SELECT * FROM table WHERE id=max(id)"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:23:40.650

MAX 是一个聚合/分组函数，你不能像这样使用

尝试这个

```
SELECT * 
FROM blog 
ORDER BY id DESC LIMIT 1; 
```

或者

```
SELECT * 
FROM blog 
where id=LAST_INSERT_ID(); 
```

或者

```
SELECT *
FROM blog 
WHERE (id = (SELECT MAX(id) FROM blog LIMIT 1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:24:41.993

您可以使用 `LAST_INSERT_ID()`查找最后插入的 id。因此，您的查询可以是这样的：

```
SELECT * 
FROM blog 
where id=LAST_INSERT_ID(); 
```

要处理您的查询，您必须这样做：

```
SELECT *
FROM blog
WHERE id=(
    SELECT max(id) FROM blog
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:32:08.043

查询执行后写入：

```
$id = mysql_insert_id(); 
```

获取最后插入记录的 id。

# mysql - MySQL：生产者/消费者模型，在访问多个表的命令中需要原子性

> ID：11593380
> 
> 赞同：0
> 
> 时间：2012-07-21T15:20:40.443
> 
> 标签：mysql, stored-procedures, stored-functions, atomic

我有以下 2 个表，其中包含示例值：

```
producer_tbl:
id (auto-inc, PK)  producer_id   item_id   item_added
       2               5            3          20

products_available_tbl:
item_id (PK)   avail_cnt   blocked_cnt
  3               9             2 
```

这是我访问它们的方法：

当制造商向我提供商品时，我会在 producer_tbl 中插入适当的数据。我同时为 products_available_tbl 中的各个项目增加avail_cnt。

当消费者想要给定的商品时，我首先使用 (avail_cnt - blocked_cnt) 检查所要求的数量是否可用。如果是这样，我用数量增加blocked_cnt，但不更新avail_cnt。当消费者提交他的请求时，我减少了blocked_cnt和avail_cnt，两者的数量相同。

现在，当有多个生产者和消费者同时接触同一个项目时，我需要上述操作的原子性。

我想知道我是否可以用触发器解决这个问题？（我不想使用外部互斥锁）任何人都可以指出我如何做到这一点的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:19:58.600

`uuid VARCHAR(32)`您始终可以通过向任何表添加列来确保更新刚刚读取的记录。您阅读了要更新的记录，然后通过检查`uuid`字段未更改来更新记录。

例如，您可以`blocked_cnt`通过以下方式递增：

```
UPDATE products_available_tbl
   SET blocked_cnt = blocked_cnt + 1,
       uuid = UUID()
 WHERE blocked_cnt = 2
   AND uuid = '21EC2020-3AEA-1069-A2DD-08002B30309D';

SELECT ROW_COUNT(); -- a 1 indicates the UPDATE was successful, 0 or -1 failure 
```

要减少`blocked_cnt`和`avail_cnt`字段：

```
UPDATE products_available_tbl
   SET blocked_cnt = blocked_cnt - 1,
       avail_cnt = avail_cnt - 1,
       uuid = UUID()
 WHERE blocked_cnt = 3
   AND uuid = '3F2504E0-4F89-11D3-9A0C-0305E82C3301';

SELECT ROW_COUNT(); 
```

要为每条记录节省 24 个字节，您可以改用一个`uuid_short BIGINT`字段，并将`UUID()`上面的s 替换为`UUID_SHORT()`s。

如果您想确保在您阅读和更新记录之间没有人可以更改记录，您必须使用`SELECT ... FOR UPDATE`或`SELECT ... LOCK IN SHARE MODE`在`START TRANSACTION`...内`COMMIT`，这需要`ENGINE`支持事务，例如 InnoDB，或`LOCK TABLES READ [LOCAL]`/`UNLOCK TABLES`可以在所有数据库引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:17:40.920

根据您的[要求](https://stackoverflow.com/questions/11593380/mysql-producer-consumer-model-need-atomicity-in-commands-accessing-multiple-ta/11697700#comment15447921_11612924)，以下是关注代码中性能问题的评论：

## 优化 add_item()

假设`products_available_tbl`有一个唯一索引`item_id`，那么

```
CREATE PROCEDURE add_item(IN in_producer_id INT, IN in_item_id INT,
                                                IN in_item_cnt INT)
BEGIN
    DECLARE item INT DEFAULT NULL;
    START TRANSACTION;

    INSERT INTO producer_tbl (producer_id, item_id, item_cnt)
        VALUES (in_producer_id, in_item_id, in_item_cnt);

    SELECT item_id FROM products_available_tbl 
        WHERE item_id=in_item_id INTO item FOR UPDATE;

    IF item IS NOT NULL THEN
        UPDATE products_available_tbl 
            SET avail_cnt=avail_cnt + in_item_cnt
            WHERE item_id=in_item_id;
    ELSE
        INSERT INTO products_available_tbl 
            (item_id, avail_cnt, blocked_cnt)
            VALUES (in_item_id, in_item_cnt, 0);
    END IF;

    COMMIT;
END // 
```

可以改写为：

```
CREATE PROCEDURE add_item(IN in_producer_id INT, IN in_item_id INT,
                                                IN in_item_cnt INT)
BEGIN
    START TRANSACTION;

    INSERT INTO producer_tbl (producer_id, item_id, item_cnt)
        VALUES (in_producer_id, in_item_id, in_item_cnt);

    INSERT INTO products_available_tbl SET
        item_id = in_item_id,
        avail_cnt = in_item_cnt,
        blocked_cnt = 0
    ON DUPLICATE KEY UPDATE
        avail_cnt = avail_cnt + in_item_cnt;

    COMMIT;
END // 
```

## 优化 block_item()

优化很重要，所以让我们分阶段进行：

首先，让我们重写

```
SET out_cnt = var_avail_cnt - var_blocked_cnt;
IF out_cnt >= cnt THEN
    SET out_cnt = cnt;
END IF; 
```

作为

```
SET out_cnt = LEAST(var_avail_cnt - var_blocked_cnt, cnt); 
```

接下来我们重写

```
SELECT avail_cnt, blocked_cnt FROM products_available_tbl
    WHERE item_id=in_item_id INTO var_avail_cnt, var_blocked_cnt
    FOR UPDATE;

SET out_cnt = LEAST(var_avail_cnt - var_blocked_cnt, cnt); 
```

作为

```
SELECT LEAST(avail_cnt - blocked_cnt, cnt) FROM products_available_tbl
    WHERE item_id=in_item_id INTO out_cnt
    FOR UPDATE; 
```

最后，让我们重写

```
SELECT LEAST(avail_cnt - blocked_cnt, cnt) FROM products_available_tbl
    WHERE item_id=in_item_id INTO out_cnt
    FOR UPDATE;

UPDATE products_available_tbl
    SET blocked_cnt = var_blocked_cnt + out_cnt
    WHERE item_id = in_item_id; 
```

作为

```
UPDATE products_available_tbl
    SET 
    blocked_cnt = blocked_cnt + (@out_cnt := LEAST(avail_cnt - blocked_cnt, cnt))
    WHERE item_id = in_item_id; 
```

所以

```
CREATE PROCEDURE block_item(IN in_item_id INT, INOUT cnt INT)
BEGIN
    DECLARE out_cnt INT DEFAULT cnt;
    DECLARE var_avail_cnt, var_blocked_cnt INT DEFAULT 0;
    START TRANSACTION;

    SELECT avail_cnt, blocked_cnt FROM products_available_tbl
        WHERE item_id=in_item_id INTO var_avail_cnt, var_blocked_cnt
        FOR UPDATE;

    SET out_cnt = var_avail_cnt - var_blocked_cnt;
    IF out_cnt >= cnt THEN
        SET out_cnt = cnt;
    END IF;

    UPDATE products_available_tbl
        SET blocked_cnt = var_blocked_cnt + out_cnt
        WHERE item_id = in_item_id;

    SET cnt = out_cnt;
    COMMIT;
END // 
```

变成

```
CREATE PROCEDURE block_item(IN in_item_id INT, INOUT cnt INT)
BEGIN
    UPDATE products_available_tbl
        SET 
        blocked_cnt = blocked_cnt + (@out_cnt := LEAST(avail_cnt - blocked_cnt, cnt))
        WHERE item_id = in_item_id;

    SET cnt = @out_cnt;
END // 
```

## 优化 commit_item()：

让我们重写

```
CREATE PROCEDURE commit_item(IN in_item_id INT, INOUT cnt INT)
BEGIN
    DECLARE out_cnt INT DEFAULT cnt;
    DECLARE var_avail_cnt, var_blocked_cnt INT DEFAULT 0;
    START TRANSACTION;

    SELECT avail_cnt, blocked_cnt FROM products_available_tbl
        WHERE item_id=in_item_id INTO var_avail_cnt, var_blocked_cnt
        FOR UPDATE;

    IF cnt > var_blocked_cnt THEN
        SET out_cnt = -1;  /* Error case: Caller supplied wrong value. */
    ELSEIF var_blocked_cnt > var_avail_cnt THEN
        SET out_cnt = -2;  /* Error case: Bug in block_item proc. */
    ELSE
        SET out_cnt = cnt;

        UPDATE products_available_tbl
            SET blocked_cnt = var_blocked_cnt - out_cnt,
                avail_cnt = var_avail_cnt - out_cnt
            WHERE item_id = in_item_id;
    END IF;

    SET cnt = out_cnt;
    COMMIT;
END // 
```

作为

```
CREATE PROCEDURE commit_item(IN in_item_id INT, INOUT cnt INT)
proc: BEGIN
    DECLARE var_avail_cnt, var_blocked_cnt INT DEFAULT 0;

    UPDATE products_available_tbl
        SET blocked_cnt   = blocked_cnt - cnt,
            avail_cnt     = avail_cnt - cnt
        WHERE item_id     = in_item_id
        AND   cnt         <= blocked_cnt
        AND   blocked_cnt <= avail_cnt;

    IF ROW_COUNT() > 0 THEN
        LEAVE proc;
    END IF;

    SELECT avail_cnt, blocked_cnt FROM products_available_tbl
        WHERE item_id=in_item_id INTO var_avail_cnt, var_blocked_cnt;

    IF cnt > var_blocked_cnt THEN
        SET cnt = -1;  /* Error case: Caller supplied wrong value. */
    ELSEIF var_blocked_cnt > var_avail_cnt THEN
        SET cnt = -2;  /* Error case: Bug in block_item proc. */
    ELSE
        SET cnt = -3; /* UPDATE failed, reasons unknown. */
    END IF;
END // 
```

我希望这些帮助。让我知道你的想法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:53:11.947

我发现使用存储过程是解决这种情况下的问题的好方法，这里有多个人访问/修改多个表，这也需要原子性。以下是添加项目、阻止项目和提交项目的 3 个过程。add_item 操作并不真正需要原子性，因为它总是添加到 products_available_tbl 中的 item 的avail_cnt，因此 add_item 过程并不是真正必要的。

```
DELIMITER //
DROP PROCEDURE IF EXISTS `add_item` //
CREATE PROCEDURE add_item(IN in_producer_id INT, IN in_item_id INT,
                                                IN in_item_cnt INT)
BEGIN
    DECLARE item INT DEFAULT NULL;
    START TRANSACTION;

    INSERT INTO producer_tbl (producer_id, item_id, item_cnt)
        VALUES (in_producer_id, in_item_id, in_item_cnt);

    SELECT item_id FROM products_available_tbl 
        WHERE item_id=in_item_id INTO item FOR UPDATE;

    IF item IS NOT NULL THEN
        UPDATE products_available_tbl 
            SET avail_cnt=avail_cnt + in_item_cnt
            WHERE item_id=in_item_id;
    ELSE
        INSERT INTO products_available_tbl 
            (item_id, avail_cnt, blocked_cnt)
            VALUES (in_item_id, in_item_cnt, 0);
    END IF;

    COMMIT;
END //
DELIMITER ; 
```

当消费者提出对商品的请求但尚未承诺购买时，会调用此“block_item”。

```
DELIMITER //
DROP PROCEDURE IF EXISTS `block_item` //
CREATE PROCEDURE block_item(IN in_item_id INT, INOUT cnt INT)
BEGIN
    DECLARE out_cnt INT DEFAULT cnt;
    DECLARE var_avail_cnt, var_blocked_cnt INT DEFAULT 0;
    START TRANSACTION;

    SELECT avail_cnt, blocked_cnt FROM products_available_tbl
        WHERE item_id=in_item_id INTO var_avail_cnt, var_blocked_cnt
        FOR UPDATE;

    SET out_cnt = var_avail_cnt - var_blocked_cnt;
    IF out_cnt >= cnt THEN
        SET out_cnt = cnt;
    END IF;

    UPDATE products_available_tbl
        SET blocked_cnt = var_blocked_cnt + out_cnt
        WHERE item_id = in_item_id;

    SET cnt = out_cnt;
    COMMIT;
END //
DELIMITER ; 
```

当客户确认订单时，会调用此“commit_item”。

```
DELIMITER //
DROP PROCEDURE IF EXISTS `commit_item` //
CREATE PROCEDURE commit_item(IN in_item_id INT, INOUT cnt INT)
BEGIN
    DECLARE out_cnt INT DEFAULT cnt;
    DECLARE var_avail_cnt, var_blocked_cnt INT DEFAULT 0;
    START TRANSACTION;

    SELECT avail_cnt, blocked_cnt FROM products_available_tbl
        WHERE item_id=in_item_id INTO var_avail_cnt, var_blocked_cnt
        FOR UPDATE;

    IF cnt > var_blocked_cnt THEN
        SET out_cnt = -1;  /* Error case: Caller supplied wrong value. */
    ELSEIF var_blocked_cnt > var_avail_cnt THEN
        SET out_cnt = -2;  /* Error case: Bug in block_item proc. */
    ELSE
        SET out_cnt = cnt;

        UPDATE products_available_tbl
            SET blocked_cnt = var_blocked_cnt - out_cnt,
                avail_cnt = var_avail_cnt - out_cnt
            WHERE item_id = in_item_id;
    END IF;

    SET cnt = out_cnt;
    COMMIT;
END //
DELIMITER ; 
```

这些已经过测试可以正常工作。

旁注：由于我使用python，因此在调用这些程序后我需要使用 cursor.fetchone() 。

# iphone - 当数组为空时阻止 Tableview 崩溃？

> ID：11593381
> 
> 赞同：0
> 
> 时间：2012-07-21T15:20:42.550
> 
> 标签：iphone, objective-c, ios, uitableview

起初我的表格视图是空的，然后您可以向其中添加自己的单元格。当您删除这些单元格时，一切正常。但是，如果您删除最后一个单元格，则我的 NSMutableArray 中没有对象，并且我在控制台中收到此错误（另外，我正在使用 Core Data 保存单元格）：

```
 *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[_PFBatchFaultingArray objectAtIndex:]: index (123150308) beyond bounds (1)' 
```

我也尝试输入这行代码，但我仍然得到相同的结果：

```
//arr is my mutable array
        if ([arr count] == 0) {
        NSLog(@"No Cells");
    } 
```

这就是我从表视图中删除对象的方式：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [arr removeObjectAtIndex:0];
        [context deleteObject:[arr objectAtIndex:0]];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
} 
```

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T15:28:59.637

好的。

我在您的代码中发现了两个问题。

1-为什么要删除索引 0 处的每个时间对象？

2-从数组中删除对象而`[arr removeObjectAtIndex:0];`不是从同一索引数组中删除对象后，您将对象传递给核心数据以删除它

```
[context deleteObject:[arr objectAtIndex:0]]; 
```

这可能是问题所在。

这肯定会帮助你。

用这个：

```
[context deleteObject:[arr objectAtIndex:indexPath.row]];

[arr removeObjectAtIndex:indexPath.row]; 
```

谢谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:30:25.643

如果您查看错误消息，您的代码失败的原因是因为您的某些代码正在寻找一个不存在的索引 123150308。如果没有看到您的完整代码，就不可能知道究竟是什么错误，但有一个简单的修复方法。

在异常是“预期行为”的代码中解决异常问题的一个好方法是使用`@try`块。这是您`tableView`使用`@try`块的方法：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        @try {
            [arr removeObjectAtIndex:0];
            [context deleteObject:[arr objectAtIndex:0]];
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        }
        @catch (NSRangeException *exception) {
            // Something was out of range; put your code to handle this case here
        }
    }
} 
```

但是，如果没有应用程序其余部分的上下文，则无法判断这是否是错误。如果您尝试此操作但它不起作用，则错误在您的应用程序中更深

# python - 为什么时间增量不能在 NumPy 中相乘/除法？

> ID：11593382
> 
> 赞同：4
> 
> 时间：2012-07-21T15:20:43.370
> 
> 标签：python, datetime, numpy

我是新手`NumPy`，我正在尝试计算一些简单的统计数据，例如`median`或`stddev`.

我想探索的“列”之一是时间差（作为类型的`timedelta64` `NumPy`类型），但我不能`ufuncs`直接应用这些统计数据：

```
----> 1 age_request.std()

TypeError: ufunc 'divide' not supported for the input types, and the inputs could not be 
safely coerced to any supported types according to the casting rule 'safe' 
```

**为什么会这样？**

我知道我应该调查一下`Pandas`，但首先我想熟悉一下`NumPy`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:33:59.813

[查看datetime](http://docs.python.org/library/datetime.html#timedelta-objects)的文档。它列出了您可以对`timedelta`对象执行的操作。除法是这样完成的：

```
t1 = t2 // i 
```

请注意，这会计算地板并丢弃任何余数。

据我所知，您只能对`timedelta`对象执行这些操作。虽然也许我错了，你可以使用`numpy`操作。

我建议将`timedelta`对象转换为微秒，然后进行除法、标准差、中位数等：

```
tdMicrosecs = td.microseconds + 1000.0 * td.seconds + 86400000000.0 * td.days
tdQuotient = tdMicrosecs / i 
```

（不过，我应该补充一点，我不完全确定 python 可以存储的最大整数值是多少，是否`tdMicrosecs`可以超过它。）

# asp.net-mvc-3 - 方法 'OrderBy' 必须在方法 'Skip' 之前调用 异常

> ID：11593386
> 
> 赞同：11
> 
> 时间：2012-07-21T15:21:13.923
> 
> 标签：asp.net-mvc-3, entity-framework, linq-to-entities, mvcjqgrid

我试图实现`jQgrid`使用`MvcjQgrid`，我得到了这个异常。

```
System.NotSupportedException was unhandled by user code
  Message=The method 'Skip' is only supported for sorted input in LINQ to Entities. The method 'OrderBy' must be called before the method 'Skip'. 
```

尽管在 Skip 方法之前使用了 OrdeyBy，但为什么它会生成异常？如何解决？

我在控制器中遇到了异常：

```
public ActionResult GridDataBasic(GridSettings gridSettings)
        {          
            var jobdescription = sm.GetJobDescription(gridSettings);
            var totalJobDescription = sm.CountJobDescription(gridSettings);

            var jsonData = new
            {
                total = totalJobDescription / gridSettings.PageSize + 1,
                page = gridSettings.PageIndex,
                records = totalJobDescription,
                rows = (
                    from j in jobdescription
                    select new
                    {
                        id = j.JobDescriptionID,
                        cell = new[] 
                    { 
                        j.JobDescriptionID.ToString(), 
                        j.JobTitle,
                        j.JobType.JobTypeName,
                        j.JobPriority.JobPriorityName,
                        j.JobType.Rate.ToString(),
                        j.CreationDate.ToShortDateString(),
                         j.JobDeadline.ToShortDateString(),

                    }
                    }).ToArray()
            };
            return Json(jsonData, JsonRequestBehavior.AllowGet);
        } 
```

**GetJobDescription 方法**和**CountJobDescription 方法**

```
public int CountJobDescription(GridSettings gridSettings)
        {
            var jobdescription = _dataContext.JobDescriptions.AsQueryable();

            if (gridSettings.IsSearch)
            {
                jobdescription = gridSettings.Where.rules.Aggregate(jobdescription, FilterJobDescription);
            }
            return jobdescription.Count();
        }

        public IQueryable<JobDescription> GetJobDescription(GridSettings gridSettings)
        {
            var jobdescription = orderJobDescription(_dataContext.JobDescriptions.AsQueryable(), gridSettings.SortColumn, gridSettings.SortOrder);

            if (gridSettings.IsSearch)
            {
                jobdescription = gridSettings.Where.rules.Aggregate(jobdescription, FilterJobDescription);
            }

            return jobdescription.Skip((gridSettings.PageIndex - 1) * gridSettings.PageSize).Take(gridSettings.PageSize);
        } 
```

最后**是 FilterJobDescription 和 OrderJobDescription**

```
private static IQueryable<JobDescription> FilterJobDescription(IQueryable<JobDescription> jobdescriptions, Rule rule)
        {
            if (rule.field == "JobDescriptionID")
            {
                int result;
                if (!int.TryParse(rule.data, out result))
                    return jobdescriptions;
                return jobdescriptions.Where(j => j.JobDescriptionID == Convert.ToInt32(rule.data));

            }

// Similar Statements

            return jobdescriptions;
        }

private IQueryable<JobDescription> orderJobDescription(IQueryable<JobDescription> jobdescriptions, string sortColumn, string sortOrder)
        {
            if (sortColumn == "JobDescriptionID")
                return (sortOrder == "desc") ? jobdescriptions.OrderByDescending(j => j.JobDescriptionID) : jobdescriptions.OrderBy(j => j.JobDescriptionID);

            return jobdescriptions;
        } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-21T16:06:53.303

例外情况意味着，如果您应用，您*总是*需要一个排序的输入，即使`Skip`在用户没有单击要排序的列的情况下也是如此。我可以想象，当您第一次打开网格视图时，用户甚至可以单击列标题之前没有指定排序列。为了抓住这种情况，我建议在没有给出其他排序标准时定义一些你想要的默认排序，例如：

```
switch (sortColumn)
{
    case "JobDescriptionID":
        return (sortOrder == "desc")
            ? jobdescriptions.OrderByDescending(j => j.JobDescriptionID)
            : jobdescriptions.OrderBy(j => j.JobDescriptionID);

    case "JobDescriptionTitle":
        return (sortOrder == "desc")
            ? jobdescriptions.OrderByDescending(j => j.JobDescriptionTitle)
            : jobdescriptions.OrderBy(j => j.JobDescriptionTitle);

    // etc.

    default:
        return jobdescriptions.OrderBy(j => j.JobDescriptionID);
} 
```

**编辑**

根据您的评论，关于您的后续问题：您不能`ToString()`在 LINQ to Entities 查询中使用。下一个问题是您不能`string`在查询中创建数组。我建议使用它们的本机类型从数据库加载数据，然后在内存中转换为字符串（和字符串数组）：

```
rows = (from j in jobdescription
        select new
        {
            JobDescriptionID = j.JobDescriptionID,
            JobTitle = j.JobTitle,
            JobTypeName = j.JobType.JobTypeName,
            JobPriorityName = j.JobPriority.JobPriorityName,
            Rate = j.JobType.Rate,
            CreationDate = j.CreationDate,
            JobDeadline = j.JobDeadline
        })
        .AsEnumerable() // DB query runs here, the rest is in memory
        .Select(a => new
        {
            id = a.JobDescriptionID,
            cell = new[] 
            { 
                a.JobDescriptionID.ToString(), 
                a.JobTitle,
                a.JobTypeName,
                a.JobPriorityName,
                a.Rate.ToString(),
                a.CreationDate.ToShortDateString(),
                a.JobDeadline.ToShortDateString()
            }
        })
        .ToArray() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-21T01:57:01.150

**在使用Adam Anderson**的一些代码进行排序后，我遇到了相同类型的问题，该代码接受了 OrderBy 中的通用排序字符串。

得到这个例外后，我做了很多研究，发现非常聪明的解决方法：

```
var query = SelectOrders(companyNo, sortExpression);

return Queryable.Skip(query, iStartRow).Take(iPageSize).ToList(); 
```

希望有帮助！

SP

# php - simple_html_dom 获取具有部分 id 值的输入

> ID：11593393
> 
> 赞同：0
> 
> 时间：2012-07-21T15:21:53.183
> 
> 标签：php, html, parsing, dom

我试图从具有 id 的表中获取 td 字段`sid-120390923`或`sid-38737122`忽略表中的任何其他 id 值，但问题是我无法获取这些 td 字段，因为它们的 id 略有不同但具有相同的开始（'sid '）。

我想要的是能够获取所有带有起始 id 的 td 字段`sid-`，有没有办法合并正则表达式？

这是一个例子

**html**

```
<table>
   <tr>
      <td id='9sd'></td>
      <td id='10sd'></td>
      <td id='sid-1239812983'></td>
      <td id='sid-1454345345'></td>
      <td id='sid-2342345234'></td>
      <td id='sid-5656433455'></td>
      <td id='sid-1231235664'></td>
      <td id='sid-8986757575'></td>
      <td id='sid-1232134551'></td>
   </tr>
</table> 
```

**simple_html_dom**

```
$table = $con->find('table');

foreach($table->find('td#sid-1232134551') as $field){
   echo $field."<br>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:27:29.613

您可以使用[属性过滤器](http://simplehtmldom.sourceforge.net/manual.htm#section_find)（5\. 选项卡），

```
$table->find('td[id^=sid-]'); 
```

# c# - CLR 在运行时使用的 dll

> ID：11593394
> 
> 赞同：1
> 
> 时间：2012-07-21T15:21:55.440
> 
> 标签：c#, .net, dll, clr

我有一个引用 .NET DLL 的 C# 应用程序。
如果这个 DLL 在我的应用程序`bin`目录和 GAC 中都存在，那么 CLR 在运行时会选择哪一个？如果 GAC 有最新版本，是否会使用该版本而不是 中的版本`bin`？

以及如何强制 CLR 始终使用我的`bin`而不是 GAC 中的那个？

[根据 MSDN](http://msdn.microsoft.com/en-us/library/51ket42z%28VS.71%29.aspx)：

> CLR 检查全局程序集缓存、配置文件中指定的代码库，然后检查应用程序的目录和子目录。

那么，这是否意味着它首先会调查 GAC？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:46:48.383

您可以强制 CLR*不*使用 GAC 中的程序集副本，因为它不在 GAC 中。通过重命名 DLL 或在项目中引用它之前更改其 [AssemblyVersion] 即可轻松实现。跳过它会调用讨厌的运行时异常，也就是所谓的 DLL Hell。

# ruby-on-rails - 如何正确地将参数传递给控制器 ？

> ID：11593395
> 
> 赞同：0
> 
> 时间：2012-07-21T15:21:56.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, controller, action

1.  从显示视图：我想传递显示的消息的 id 以丢弃操作并丢弃消息。

2.  从索引视图：我想传递已检查消息的 ID 以丢弃操作并一次性将它们全部丢弃。

但是即使我检查多个并从索引视图提交，我也只能一次删除一条记录。
如何使用相同的操作归档 1 和 2？？？？

路线

```
 match 'messages/discard(/:id)' => 'messages#discard', :via => :post , :as => :discard_messages 
```

索引视图

```
 <%= form_tag(:action => discard, :via => 'post') do %>   
   <% @messages.each do |m| %>
      <tr>
       <td><%= check_box_tag "id",m.id %></td>
       <td><%= m.last_message.id %></td>
       <td><%= 'unread' if m.is_unread?(current_user) %></td>
       <td><%= m.last_message.created_at.to_s(:jp) %></td>
       <td><%= m.last_sender.username %></td>
       <td><%= link_to m.subject, show_messages_path(:id => m, :breadcrumb => @box) %></td>
      </tr>
   <% end %>
   <%= submit_tag "discard", :class => 'btn' %>
  <% end %> 
```

显示视图

```
<%= link_to 'Discard', discard_messages_path(@messages), :class => 'btn', :method => 'post'  %> 
```

控制器

```
 def discard  
      conversation = Conversation.find_all_by_id(params[:id])
    if conversation
      current_user.trash(conversation)
      flash[:notice] = "Message sent to trash."
    else
      conversations = Conversation.find(params[:conversations])
      conversations.each { |c| current_user.trash(c) }
      flash[:notice] = "Messages sent to trash."
    end
       redirect_to :back 
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:32:35.393

在您的 html 中使用 [] 命名，然后 rails 将在 params 中将其作为数组提供

*index.html.erb*

```
<td><%= check_box_tag "message_id[]", m.id %></td> 
```

*控制器*

```
# ...
else
  conversations = Conversation.where("id IN (?)", params[:message_id][])
  # ... 
```

为了进一步简化事情，我将删除您操作中的条件并创建两个单独的操作

*路线*

```
resource :messages do 
  member do
    post 'discard' # /messages/:id/discard
  end
  collection do
    post 'discard_all' # /messages/discard_all?message_id[]=1&message_id[]=22
  end
end 
```

# java - 在服务中发送 java 对象

> ID：11593398
> 
> 赞同：0
> 
> 时间：2012-07-21T15:22:16.807
> 
> 标签：java, rest

我有简单的 POJO 说用户对象；

```
public class User{
 private String userid;
 private String emailid;
 private String name;
 ....setters and getters...
} 
```

现在，我想使用 User 类的 setter 方法设置一些值。

所以，如果我想通过服务发送这个对象。

```
 URL url = new URL("http://<servername>/example/someservice");
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    conn.setDoOutput(true);
    conn.setRequestMethod("POST"); 
```

什么是最好的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:30:36.387

您需要将数据（类实例）转换为字节（称为**序列化**），发送字节，然后从字节转换为数据（称为**反序列**化）。

请尝试看看[谷歌](http://www.google.com/?q=Java%20serialization)

一些流行的序列化选项：内置 java 序列化 - 二进制、XML（文本）、JSON（文本）。

# c# - 停止将我的应用程序检测为病毒

> ID：11593404
> 
> 赞同：3
> 
> 时间：2012-07-21T15:22:59.310
> 
> 标签：c#, virus

我制作了一个应用程序，当您运行它时，会将 .exe 放入启动中。我有这个代码：

```
RegistryKey rkApp = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);

rkApp.SetValue("smartAppointment", Application.ExecutablePath.ToString()); 
```

将为应用程序创建一个注册表以从 Windows 启动，但有一个问题，一些防病毒软件会将我的应用程序检测为病毒。

如何阻止防病毒软件将我的应用程序检测为病毒？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T15:26:09.350

我认为任何让应用程序在启动时自动尝试运行的方式都会被任何防病毒系统标记为类似病毒的行为。只需在安装解决方案时告诉您的用户批准更改即可。

除非（当然）您正在尝试编写病毒。

在这种情况下停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:52:48.037

通常，您的安装程序（MSI）会设置“启动时启动应用程序”注册表设置，但是我认为如果您的应用程序使用验证码签名进行数字签名，那么这个问题就会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:03:08.427

您的应用程序是否经过数字签名？如果不是，您应该尝试签署您的应用程序（您需要公共证书，但这需要花钱）

[应用程序签名/验证](https://stackoverflow.com/questions/5280435/application-signing-verification)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T15:40:49.660

如果您需要在启动时运行，通常首选的方式是将其作为 Windows 服务运行。

如果您还需要一个 gui，那么您应该有一个与托管您的应用程序的 Windows 服务对话的 gui。

# javascript - 如何在 body 标签后动态添加 div 到我的页面？

> ID：11593405
> 
> 赞同：0
> 
> 时间：2012-07-21T15:23:10.267
> 
> 标签：javascript

我编写了以下代码，唯一的问题是将 div 放在结束标记之前，我希望它位于开头。

```
<script type="text/javascript" language="javascript">

        window.onload = function createDiv1() {
            var divTag1 = document.createElement("div");

            divTag1.id = "mid section";

            divTag1.setAttribute("align", "center");

            divTag1.className = "dynamicDivmid";

            divTag1.innerHTML = "pp";
            document.body.appendChild(divTag1);

        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T15:25:43.150

试试这样：

```
document.body.insertBefore(divTag1, document.body.firstChild) 
```

# eclipse - 在 Eclipse 3.8 中获取“找不到类：org.eclipse.ajdt.core.ant.AJDT_AjcCompilerAdapter”

> ID：11593410
> 
> 赞同：0
> 
> 时间：2012-07-21T15:23:40.583
> 
> 标签：eclipse, pde, ajdt

我已经在 Eclipse 3.6 中成功地将 ajdt 与 pde headless build 结合使用。**我在项目的build.properties**中有以下条目：

> compilerAdapter=org.eclipse.ajdt.core.ant.AJDT_AjcCompilerAdapter
> sourceFileExtensions=*.java, *.aj

然而，一旦我切换到 Eclipse 3.8，我在基于 ant 的 pde 无头构建期间得到了以下堆栈：

> [java] c:\eclipse3.8\plugins\org.eclipse.pde.build_3.8.0.v20120523-1555\scripts\productBuild\productBuild.xml:43：执行此行时出现以下错误：
> 
> [java] c:\eclipse3.8\plugins\org.eclipse.pde.build_3.8.0.v20120523-1555\scripts\build.xml:105：执行此行时出现以下错误：
> 
> [java] c:\eclipse3.8\plugins\org.eclipse.pde.build_3.8.0.v20120523-1555\templates\headless-build\customTargets.xml:12：执行他的行时出现以下错误：
> 
> [java] c:\eclipse3.8\plugins\org.eclipse.pde.build_3.8.0.v20120523-1555\scripts\productBuild\allElements.xml:20：执行此行时出现以下错误：
> 
> [java] c:\eclipse3.8\plugins\org.eclipse.pde.build_3.8.0.v20120523-1555\scripts\genericTargets.xml:119：执行此行时出现以下错误：
> 
> [java] c:\eclipse3.8\plugins\org.eclipse.pde.build_3.8.0.v20120523-1555\scripts\genericTargets.xml:129：执行此行时出现以下错误：
> 
> [java] c:\MyApp\temp\compile.org.eclipse.pde.build.container.feature.xml:4：执行此行时出现以下错误：
> 
> [java] c:\MyApp\temp\plugins\com.foo.myplugin\build.xml:176：执行此行时出现以下错误：
> 
> [java] c:\MyApp\temp\plugins\com.foo.myplugin\build.xml:122：**找不到类：org.eclipse.ajdt.core.ant.AJDT_AjcCompilerAdapter**

请帮我。感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:29:41.507

您的构建 Eclipse 中可能未安装 AJDT。它需要存在才能找到 AJDT_AjcCompilerAdapter 类。

# c# - 在 64 位机器上读取 Windows 密钥的问题

> ID：11593413
> 
> 赞同：1
> 
> 时间：2012-07-21T15:23:59.160
> 
> 标签：c#, windows

我想用一个简单的 c# 应用程序从注册表中读取 windows 键。但是在 x64 机器上，我只收到 BBBBB-BBBBB-BBBBB-BBBBB-BBBBB 作为密钥，这是错误的......我该如何解决这个问题？

```
RegistryKey key = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry64);
RegistryKey subkey = key.OpenSubKey("SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T05:24:09.720

根据这个制作 CD 密钥恢复软件的[网站](http://davehope.co.uk/Blog/network-cd-key-recovery/)和这个[Windows7Forums 线程](http://windows7forums.com/windows-7-software/52182-i-have-problen-find-product-key-windows-7-i-need-help-2.html)，产品 ID 的所有 B 的存在都表示 MAK（多激活密钥）密钥。

从第一个链接：

> B 表示 cd 密钥未存储在您的计算机中，因此无法恢复。这可能是由于以下几个原因：
> 
> MAK 用于激活；
> SLMGR 用于从 Windows 注册表中删除密钥，
> 或者您正在运行盗版 Windows。

从第二个链接

> 当管理员使用批量许可证密钥设置多台 PC 时，这是一个大问题。因为每个人都可以提取 VLC 密钥并将其用于其他安装。因为这个原因 VLC 键在激活后会自动从注册表中删除。在此之后，所有关键查找器仅显示“不可用”或 BBBBB-BBBBB-BBBBB-BBBBB-BBBBB。使用命令行：slmgr –dli 您可以获得“部分产品密钥”——产品密钥的最后 5 个字符。此“部分产品密钥”以加密形式保存在证书文件“tokens.dat”（C:\Windows\ServiceProfiles\NetworkService\AppData\Roaming\Microsoft\SoftwareProtectionPlatform\tokens.dat）中。每个担心他的密钥被盗的人也可以使用以下命令行从注册表中手动删除产品密钥：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:36:34.923

快速的网络搜索显示许多人有同样的问题。如果 DigitalProductID 都是 B，则一种解决方案似乎是获取 DigitalProductID4 值。

# macos - 每次构建时向 MonoDevelop 添加终端命令

> ID：11593415
> 
> 赞同：1
> 
> 时间：2012-01-15T05:31:02.250
> 
> 标签：macos, terminal, automation, monodevelop

是否可以让 MonoDevelop 每次点击构建时也运行某个终端命令？

例如，我希望每次在 MonoDevelop 中构建项目时自动生成文档生成。我通常通过运行终端命令来做到这一点`NaturalDocs -i inputFolder -O OutputFolder -p ProjDirectory`

# php - 从仅 https 的服务器获取文件

> ID：11593418
> 
> 赞同：1
> 
> 时间：2012-07-21T15:24:27.333
> 
> 标签：php, https

我有一个小脚本，它使用 curl 并从定义的 url 中检索特定内容。我在本地主机上对此进行了测试，并且有效。

现在我必须从我的免费主机中检索仅 HTTPS 的网站（另外，证书无效，但我知道所有者）中的数据，但 myserver 既不支持`CURL`也不 `file_get_contents("https://other-server.com")`运行。顺便说一句，`http://other-server.com`是无法访问的。

是否有任何方法可以使用 HTTPS 端口从该服务器获取文件，但使用 HTTP 协议？还是有一些方法可以使用 HTTPS，尽管我的服务器不支持它？（这不是我的服务器，我无权访问它的配置）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:42:39.307

尝试这个：

```
<?php
$fp = fsockopen("ssl://other-server.com", 443, $errno, $errstr);
if(!$fp) die($errno. " : " . $errstr);
$send = 
 "GET / HTTP/1.0\r\n".
 "Host:other-server.com\r\n".
 "Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n".
 "\r\n";

fwrite($fp, $send);
while(!feof($fp)) {
  echo fread($fp, 512);
}

?> 
```

如果您遇到“ssl 传输不可用错误消息”，请参阅[PHP 中的 Socket transport "ssl" not enabled](https://stackoverflow.com/questions/1705856/socket-transport-ssl-in-php-not-enabled)

如果您的主机是外部主机并且可能是免费的虚拟主机服务，那么您的运气就很差了。最好的选择是找出哪些虚拟主机启用了 SSL 传输 - 否则使用 HTTPS 协议根本不符合要求。

您最后的“出局”是尝试将扩展动态加载到 PHP 语言中。您将需要匹配的精确扩展名 (dll/so)

1.  主机上的 PHP 版本（参见 phpinfo）。
2.  主机的 CPU 架构（unix，见`passthru("cat /proc/cpuinfo");`），例如 amd64,i386..
3.  操作系统“布局”，.dll 用于 Windows 主机（IIS 等），.so 用于 UNIX。

使用的功能是`dl`加载库的又名动态链接。对于 Windows 主机，您将需要`php_openssl.dll`-`php_sockets.dll`反过来对于 UNIX，OOops - 您需要重新编译 php 核心。

快乐的黑客:)

[php 手册页](http://php.net/manual/en/function.dl.php)

# android - 当屏幕空白并锁定时保持应用程序运行

> ID：11593421
> 
> 赞同：0
> 
> 时间：2012-07-21T15:25:03.137
> 
> 标签：android

我希望我的应用程序在屏幕空白并锁定时继续运行。

这是一个在手机放在口袋里时运行的仪表应用程序，因此我们可以黑屏以节省电量。

目前：

如果手机自动锁定，则屏幕变为空白并且应用程序终止。手机解锁后，需要重新启动应用程序。

如果手机被手动锁定（通过点击电源按钮）屏幕变为空白，应用程序保持运行，但语音输出的数据停止“工作”。当手机解锁时，应用程序仍在运行，语音数据再次开始“工作”。

我认为 WakeLock 不会为我做到这一点。这是一个更像是一个粘性位的函数，就像在加载中一样，除非有特定的命令来终止，否则它不会终止。

任何指向我应该做什么的指针将不胜感激 - 谢谢 - Rob

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:41:18.133

你为什么不启动一个你的活动可以绑定的“服务”。即使您的应用程序不是，它也可以运行。

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

> 服务是一个应用程序组件，它代表应用程序希望在不与用户交互的情况下执行更长时间运行的操作，或提供功能供其他应用程序使用。

想象一下 mp3 播放应用程序是如何工作的，同样的场景。

# django - 模型属性中的 Django 用户注入

> ID：11593423
> 
> 赞同：0
> 
> 时间：2012-07-21T15:25:18.827
> 
> 标签：django, request, models, django-custom-tags

我在 Django 中有这个模型：

```
News
Comments
Reactions 
```

关系是：

```
a News has various Comments
a Comment has various Reactions 
```

问题是**用户**（在请求/会话中）：用户可能订阅了一个反应，或者一个评论；他可能已登录或未登录。*（这是一个 foo 的例子，它没有多大意义）*

我不能在模板中做：

```
{% for reaction in this_news.comments.reactions %}
 {{ reaction.name }}
 {% if reaction.user_subscribed %} #reaction.user_subscribed(request.user)...
 You have subscribed this reaction!
 {% endif %}
{% endfor %} 
```

问题是：

*   我不能用参数调用模板中的方法（见上面的评论）
*   模型无权访问请求

现在我`init_user`在模型中调用一个方法`News`，传递请求。然后我在`Comment`和`Reaction`模型中有相同的方法，我必须设置`user_subscribed`属性循环每个模型的孩子。

难道没有更聪明的方法来做到这一点吗？

**编辑**：感谢 Ignacio 关于使用自定义标签的提示，我正在尝试使用通用模式来传递用户（避免使用闭包，因为我不知道如何在 atm 使用它们）：

```
def inject_user(parser, token):
    try:
        # split_contents() knows not to split quoted strings.
        tag_name, method_injected, user = token.split_contents()
    except ValueError:
        raise template.TemplateSyntaxError("%r tag requires exactly three arguments" % token.contents.split()[0])
    return InjectUserNode(method_injected, user)

class InjectUserNode(template.Node):
    def __init__(self, method_injected, user):
        self.method_injected = template.Variable(method_injected)
        self.user = template.Variable(user)

    def render(self, context):
        try:
            method_injected = self.method_injected.resolve(context)
            user = self.user.resolve(context)
            return method_injected(user)
        except template.VariableDoesNotExist:
            return '' 
```

当我使用它时，我`{% inject_user object.method_that_receives_a_user request.user %}`遇到了这个错误`'str' object is not callable`；`method_injected(user)`我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:33:13.997

编写[自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)以获取用户并设置上下文变量以指示标准的存在或不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:33:30.077

我以一种不太优雅的方式解决了它，但它对我有用。

我在我`User`定义的类中创建了一种单例，并在我需要的每个视图中设置了一个属性。

该物业是`User.current`。

然后，在模型内部，我需要让当前用户查看`User.current`。

# android - 安卓通知高度

> ID：11593427
> 
> 赞同：0
> 
> 时间：2012-07-21T15:25:52.407
> 
> 标签：android, android-layout, notifications

我使用使用布局创建了自定义通知（我的通知 UI 在 xml 文件中创建）。我可以更改通知高度吗？（为 android 2.1 创建的通知）

如果我可以怎么办？如果不能，如何创建带有垂直滚动的 TextView？什么版本的android我可以改变通知的高度？谢谢。

![在此处输入图像描述](../Images/6b564fae0eb4a3716bea089c95ef304c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:05:27.033

从 Jellybean 开始，有可扩展的通知。见[http://developer.android.com/about/versions/jelly-bean.html](http://developer.android.com/about/versions/jelly-bean.html)

# list - 一切都是计划中的清单吗？

> ID：11593429
> 
> 赞同：4
> 
> 时间：2012-07-21T15:26:06.847
> 
> 标签：list, lisp, scheme, chicken-scheme

除了“Simply Scheme”（第二版）这本书，我还在 youtube 上观看“Computer Science 61A - Lectures”。在讲座中，导师使用 Stk 解释器，但我使用的是鸡计划解释器。

在第一堂课中，他使用了“第一个”程序，如果它被称为：

```
(first 'hello) 
```

它返回“h”。

在“简单方案”一书中，它有一个如何实现 first 的示例：

```
(define (first sent)
  (car sent)) 
```

如果发送，我的测试和理解是一个列表。我试图了解在方案中说“一切都是列表”是否合适。更具体地说，*'hello*中的列表在哪里，如果有，为什么它在第一个过程中不起作用，因为它是在书中写的？

此外，如果每个实现都是用“一切都是列表”来编写的，那么为什么相同的代码在所有方案实现中都不起作用**？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:35:07.160

不，这是一个常见的误解，因为列表在 Scheme 编程中如此普遍（通常通常是函数式编程）。大多数 Scheme 实现都带有许多数据类型，如字符串、符号、向量、映射/表、记录、集合、字节向量等。

此代码段`(first 'hello)`不太可能在大多数方案中工作，因为根据标准它是无效的。该表达式`'hello`表示一个*symbol*，它是一个不能被解构为列表的不透明值（您对符号所做的主要事情是将它们与 进行比较`eq?`）。这可能是 Stk 的一个怪癖，不幸的是你的书教导了它。

有关该语言的更规范描述，请参阅[*The Scheme Programming Language*](http://www.scheme.com/tspl4/)。如果你只是想学习编程，我推荐[*HtDP*](http://www.ccs.neu.edu/home/matthias/HtDP2e/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T16:25:49.860

并非*所有内容*都是 Scheme 中的列表。我有点惊讶您展示的示例实际上*有效*，但在其他 Scheme 解释器中它会失败，因为`first`它通常是 , 的别名`car`，并且`car`仅定义为[**`cons`pairs**](http://en.wikipedia.org/wiki/Cons)。例如，在球拍中：

```
(first 'hello)
> first: expected argument of type <non-empty list>; given 'hello

(car 'hello)
> car: expects argument of type <pair>; given 'hello 
```

Scheme 的基本数据结构是 cons 对，它可以构建任意链接的数据结构——特别是单链表。还支持其他数据结构，例如向量和哈希表。当然还有原始类型——布尔值、符号、数字、字符串、字符等。所以在 Scheme 中说*“一切都是列表”是错误的。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T17:33:58.433

关于 Simply Scheme：函数*first*和*rest*不是 Scheme 标准中的标准函数，也不是 DrRacket 内置的函数。Simple Scheme API 被设计为 Simply Scheme 课程的一部分，以便于统一处理各种数据。仅凭使用简单方案教学语言的经验，我们不能对底层的低级实现如何工作做出太多假设！使事情变得简单会产生运行时成本：它不是免费的。

# ruby-on-rails - 我如何在rails中从facebook、twitter和linkden登录用户

> ID：11593431
> 
> 赞同：0
> 
> 时间：2012-07-21T15:26:08.477
> 
> 标签：ruby-on-rails, devise

嗨，我想像我的 rails 中的许多其他网站一样从 facebook、twitter 和 linkden 登录用户

应用程序。哪个 gem 适合这个或设计 amniouth 可以做到这一切。任何指南

、博客或您将参考的书籍。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:35:27.153

你是对的，omniauth 是最好的方法。这个[Railscast](http://railscasts.com/episodes/241-simple-omniauth?view=asciicast)非常清楚地解释了一切，

# ios - Mac 蓝牙 MAP 配置文件

> ID：11593433
> 
> 赞同：1
> 
> 时间：2012-07-21T15:26:18.017
> 
> 标签：ios, macos, bluetooth, sms

听说 Apple 在 iOS 6 中包含了蓝牙 MAP 配置文件，我想知道如何在 Mac 上实现它的客户端。

我花了一段时间 Goggling，但我还没有找到任何关于如何使用它的文档。它是内置在操作系统中还是我必须使用外部库。（我知道 Mac OS 中有蓝牙 API，但我不知道它是否支持 MAP 配置文件）

我可以使用任何代码示例或文档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:08:24.373

Apple 在 OSX 中本机不支持蓝牙 MAP。有关 Mountain Lion 支持的配置文件列表，请参阅[http://support.apple.com/kb/PH10549](http://support.apple.com/kb/PH10549)。不过，您可以在某些范围内为 OSX 创建新的配置文件。有关详细信息，请参阅[https://developer.apple.com/library/mac/#documentation/devicedrivers/conceptual/bluetooth/BT_Develop_BT_Apps/BT_Develop_BT_Apps.html](https://developer.apple.com/library/mac/#documentation/devicedrivers/conceptual/bluetooth/BT_Develop_BT_Apps/BT_Develop_BT_Apps.html)。

由于 MAP 位于 SPP/RFCOMM 之上（请参阅[http://developer.bluetooth.org/KnowledgeCenter/TechnologyOverview/Pages/MAP.aspx](http://developer.bluetooth.org/KnowledgeCenter/TechnologyOverview/Pages/MAP.aspx)），您应该能够在 OSX 上实现此配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T15:09:24.183

我已经在 Phone Amego 的 Mac OS X 上实现了蓝牙 MAP（允许用户获取屏幕短信）。MAP 建立在 Mac OS X 支持的 OBEX 之上。蓝牙 MAP 规范相当不错，但需要一段时间才能理解。

您基本上创建了两个 OBEX 会话：一个消息访问服务 (MAS)，然后向设备注册以使用消息通知服务 (MNS) 接收通知。注册后，设备将与您打开一个 MNS 会话并通知您收到的消息。您还需要使用蓝牙 SDP 宣传您的 MNS 服务。

享受！ [http://www.sustworks.com/pa_guide/sms.html](http://www.sustworks.com/pa_guide/sms.html)

# sql - Hibernate 3.4.0：如何查询标量值

> ID：11593435
> 
> 赞同：0
> 
> 时间：2012-07-21T15:26:25.053
> 
> 标签：sql, hibernate, jpa, scalar

我有：（MySQL 5.1）

```
CREATE TABLE `poh_faktury` (
  `cislo` int(10) unsigned NOT NULL PRIMARY KEY,
... 
) ENGINE=MyISAM DEFAULT CHARSET=utf8$$

@Entity
@Table(name="poh_faktury")
@NamedQueries({
  @NamedQuery(name="dalsiCisloFaktury", query="SELECT MAX(fakt.cislo) + 1 FROM Faktura AS fakt")
}) 
```

生成的查询（是的，两个）是：

```
select MAX(faktura0_.cislo)+1 as col_0_0_ from poh_faktury faktura0_
select MAX(faktura0_.cislo)+1 as col_0_0_ from poh_faktury faktura0_ limit 2 
```

但是这个

```
 Integer res = ((Integer) this.getJpaTemplate().execute( new JpaCallback() {
        public Object doInJpa( EntityManager em ) throws PersistenceException {
            Query q = em.createNamedQuery( "dalsiCisloFaktury" );
            return q.getSingleResult();
        }
    })); 
```

放入. `null`_`res`

当我调用 SQL 时，它应该返回 1000：

```
SELECT MAX(fakt.cislo) + 1 FROM poh_faktury AS fakt; 
```

我应该如何让 Hibernate 返回正确的标量值？

# c# - 获取 exe 的所有可能的命令行参数列表

> ID：11593437
> 
> 赞同：3
> 
> 时间：2012-07-21T15:26:46.113
> 
> 标签：c#, .net, oracle, powershell

无论如何，我是否可以获取 exe 的可用命令行参数列表？我需要创建一个 Powershell 脚本来启动 Relius Agent Manager 程序，但该程序需要数据库登录名和密码信息才能加载。

我可以获得登录/传递信息，但我需要知道传递它们所需的参数的名称。

我使用 Powershell 还是 C# 来检索参数列表并不重要，我只需要知道它们的名字即可。

我阅读了 C# 中的 Process 类，但我没有看到任何实际列出可用参数的内容，只有如何列出进程启动时传递的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T15:30:45.823

无法查询支持的命令行参数。尝试在不带参数、带无效参数、带 /h、/?、-h、--help 和类似参数的命令提示符下运行程序，以查看其中一个参数是否会提示程序输出允许的参数列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:36:24.097

搜索通用静音开关查找器。实际上可以以编程方式进行，但需要深入研究二进制可执行文件。如果有兴趣检查[http://code.google.com/p/pefile/wiki/PEiDSignatures](http://code.google.com/p/pefile/wiki/PEiDSignatures)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T11:54:22.873

感谢您所有的帮助。我可以通过让某人手动启动它然后登录来解决它，然后我使用以下命令检查了所有正在运行的进程的列表：

“WMIC /OUTPUT:C:\ProcessList.txt 处理获取标题、命令行、进程 ID”

然后，我能够准确地找到从命令生成的文件运行时传递的内容，并使用以下命令在 PowerShell 中执行该命令：

$exp = "&'C:\path\to\the\exe.exe' /param1 /param2 /param3" 调用表达式 $exp

# clojure - 如何将集合分成按百分比给出的两部分

> ID：11593438
> 
> 赞同：3
> 
> 时间：2012-07-21T15:26:45.893
> 
> 标签：clojure

我有一个我想按任意百分比拆分的集合。我要解决的实际问题是将数据集拆分为训练和交叉验证集。

每个元素的目的地应随机选择，但每个源元素应仅在结果中出现一次，并且分区的大小是固定的。如果源集合具有重复项，则重复项可能出现在不同的输出分区或相同的输出分区中。

我有这个实现：

```
(defn split-shuffled
  "Returns a 2 element vector partitioned by the percentage 
   specified by p. Elements are selected at random. Each 
   element of the source collection will appear only once in 
   the result."
  [c p]
  (let [m (count c)
        idxs (into #{} (take (* m p) (shuffle (range m))))
        afn (fn [i x] (if (idxs i) x))
        bfn (fn [i x] (if-not (idxs i) x))]
    [(keep-indexed afn c) (keep-indexed bfn c)]))

repl> (split-shuffled (range 10) 0.2)
[(4 6) (0 1 2 3 5 7 8 9)]

repl> (split-shuffled (range 10) 0.4)
[(1 4 6 7) [0 2 3 5 8 9)] 
```

但我不高兴`keep-indexed`被调用两次。

如何改进？

编辑：我原本想保持分区中的顺序，但我没有重新考虑就放弃了这个要求，所以@mikera 的解决方案是正确的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T16:52:18.917

为什么你需要索引？

只需直接洗牌：

```
(defn split-shuffled
     [c p]
     (let [c (shuffle c)
           m (count c)
           t (* m p)]
       [(take t c) (drop t c)])) 
```

# css - IE8 不加载 CSS

> ID：11593439
> 
> 赞同：0
> 
> 时间：2012-07-21T15:26:47.930
> 
> 标签：css, html, internet-explorer, internet-explorer-8, sass

我写了一个新的网站模板。一切正常，但有一个问题：

IE8 及更低版本不加载我的样式表。我不知道为什么。我已经在多台计算机上尝试过它以消除缓存问题或类似问题的可能性。

样式表是用 SASS (http://sass-lang.com/) 编写的。但我认为，这不是问题，因为我已经使用 SASS 制作了一些其他网站，并且一切正常。

//编辑：

```
<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="utf-8" />
        <title>***</title>
        <link rel="stylesheet" type="text/css" href="/styles/screen.css" />
    </head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T15:54:26.533

您使用`<section>`的是新的元素，而 IE8 默认情况下不知道。而且因为它不知道它们，所以它们被视为一种跨度，除非你不能使用 CSS 来设置它们的样式。

诀窍是在页面加载之前创建元素并且浏览器可以设置它们的样式。最简单的方法是使用[html5shim 之](http://code.google.com/p/html5shim/)类的东西。只需确保将以下代码添加到您的 head 部分，因为它需要在 HTML 开始呈现之前运行：

```
<!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:35:57.737

我猜你的路径中有一些问题..

可能性 1：

```
<link rel="stylesheet" type="text/css" href="styles/screen.css" media="screen" /> 
```

可能性 2：

```
<link rel="stylesheet" type="text/css" href="../styles/screen.css" media="screen" /> 
```

# post - 在 Greasemonkey 脚本中获取 POST 响应数据

> ID：11593440
> 
> 赞同：0
> 
> 时间：2012-07-21T15:26:57.330
> 
> 标签：post, greasemonkey, response

我想在 Greasemonkey 脚本中通过 POST 获取 Jetty 服务器发送的响应数据。

每隔几秒钟发送一次新数据。

如何直接访问作为响应数据显示在 Firebug“网络”选项卡中的数据？（我尝试使用此处提供的使用 jQuery 和 ajaxSuccess 的解决方案获取数据，但这不起作用。而且我不确定 POST 数据是否是从 jQuery ajax 请求返回的。所以有没有办法直接访问POST“流”）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T04:47:12.997

最好的方法很大程度上取决于您（尚未）提供的详细信息：

1.  ***页面究竟***如何发送和接收信息。是真的形成帖子，还是 AJAX？如果是 AJAX，是否涉及 jQuery？页面可以在没有 AJAX 的情况下发布；是否涉及 iframe？
    **链接到目标页面。**

2.  页面如何处理这些信息？它会更新显示吗？

3.  你想要这些信息的最终原因是什么？大多数时候，**不**尝试拦截和解析 AJAX 会更容易。通常，监视 DOM 树是获得所需内容的更容易和更健壮的方式。

* * *

**如果页面向用户显示您想要的数据，获取数据**的最佳方式显示在[“如何检测 AJAX 节点插入...”](https://stackoverflow.com/a/10664942/331508)中。

* * *

如果你真的想截取数据：

*   [从 Greasemonkey拦截**jQuery**](https://stackoverflow.com/a/8252726/331508) AJAX 。
*   [从 Greasemonkey 拦截任何目标页面 AJAX](https://stackoverflow.com/a/6805461/331508)。
*   [拦截 AJAX，裸露的骨头](https://stackoverflow.com/a/629782/331508)。
*   如果页面正在提交表单、创建 iframe 等，请**POST DETAILS**。但一般来说，您将替换正在接收（和/或发送）数据的 javascript 函数。

# jquery - jquery id 标识符

> ID：11593446
> 
> 赞同：0
> 
> 时间：2012-07-21T15:28:37.130
> 
> 标签：jquery

> **可能重复：**
> [jQuery 选择器中的通配符](https://stackoverflow.com/questions/5376431/wildcards-in-jquery-selectors)

假设我的页面上有几个按钮，ID 标记为`id_1`、`id_2`等`id_3`

我想要一个函数来覆盖所有被按下的字符，因此可以检查前 3 个字符是否为`id_`.

```
 $("?????").click(function(event) { 
```

什么取代了`??????`

在这种情况下，我不能使用类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:38:20.040

这也可以：

```
$('[id^=id_]').click(function() {
  //Do stuff here
}); 
```

`id`这会选择属性以 , 开头的所有元素`id_`，因此`id_1`, `id_2`, `id_3`, 等等...都将被选中。

`class`但是，将属性用作选择器可能更合适。与`id`属性不同，`class`属性不必是唯一的。因此，例如，您的页面上可以有 5 个按钮，每个按钮的类名称为`clickMe`，并使用以下代码来监听对任何按钮的点击：

```
$('.clickMe').click(function() {
  //Do stuff here
}); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T15:35:15.597

这个怎么样（我对 JavaScript 很陌生，可能行不通）：

```
for(var i = 0; i < maxId; i++) {
  $("#id_"+i).click(function(e) {
    //Blah blah blah
  });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T15:39:37.460

尝试这个

```
$(function(){
    $('button[id^="id_"]').on('click', function(e){
        alert($(this).attr('id'));
    });
});​ 
```

[**这是**](http://jsfiddle.net/heera/6VRYv/)一个例子。

# android - Android：在文件中保存一个条目而不是更多数据

> ID：11593447
> 
> 赞同：1
> 
> 时间：2012-07-21T15:28:44.833
> 
> 标签：android, file-io, android-intent

我需要保存带有时间戳的条形码并将其保存在 .csv 文件中，然后通过蓝牙将其发送到另一台设备。我通过 SerialMagic Gear Keyboard 选项获取条形码，该选项将条形码作为输入

**问题：**当应用程序运行并且我输入数据时，当另一个设备接收到该文件时，该文件只包含最后一个条目。

我确信我在程序结构上犯了一些错误。如果是这样，请指出在哪里。

抱歉，代码很长。

```
package com.android.app;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Timestamp for file name e.g. Data_7-19-2012
    SimpleDateFormat s1 = new SimpleDateFormat("MM-dd-yyyy_hh:mm:ss");
    final String format1 = s1.format(new Date()); 

    //Creating file name
    final String FileName = "Data_"+format1+".csv";

    final EditText addbarcode = (EditText) findViewById(R.id.editText1); 

    //getting file directory
    final File dir = getFilesDir();

    final File shareFile = new File(dir, FileName);

    addbarcode.setOnKeyListener(new OnKeyListener()
    {
        public boolean onKey(View v, int keyCode, KeyEvent event)
        {
            if (event.getAction() == KeyEvent.ACTION_DOWN)
            {
                switch (keyCode)
                {
                    //case KeyEvent.KEYCODE_DPAD_CENTER:
                    case KeyEvent.KEYCODE_ENTER:

                        //to get Timestamp
                        SimpleDateFormat s = new SimpleDateFormat("MM-dd-yyyy hh:mm:ss");
                        String format = s.format(new Date());

                        //get barcode in a variable
                        Editable barcode = addbarcode.getText();

                        final String DATASTRING = new String(""+barcode+","+format+"\n");

                        FileOutputStream fOut = null;
                        try {
                             fOut = openFileOutput(FileName , MODE_WORLD_READABLE);
                        } catch (FileNotFoundException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                        OutputStreamWriter osw = new OutputStreamWriter(fOut); 

                        // Write the string to the file
                        try {
                            osw.write(DATASTRING);
                        } catch (IOException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }

                        try {
                            osw.flush();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        try {
                            osw.close();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        /* ensure that everything is
                         * really written out and close */

                        //For showing data recived on screen

                    FileInputStream fIn = null;
                        try {
                            fIn = openFileInput(FileName);
                        } catch (FileNotFoundException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }

                        InputStreamReader isr = new InputStreamReader(fIn);

                         //Prepare a char-Array that will
                         //* hold the chars we read back in. 
                        char[] inputBuffer = new char[DATASTRING.length()];

                        // Fill the Buffer with data from the file
                        try {
                            isr.read(inputBuffer);
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                        // Transform the chars to a String
                        String readString = new String(inputBuffer);
                        TextView etData= (TextView)findViewById(R.id.textView3);

                        etData.setText(readString);

                        //Clear the editview for new entries
                        addbarcode.setText("");                     

                        return true;
                    default:
                        break;
                }
            }
            return false;
        }
    });

    final Button button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Uri u1  =   null;
            u1  =   Uri.fromFile(shareFile);

            Intent sendIntent = new Intent(Intent.ACTION_SEND);
            sendIntent.putExtra(Intent.EXTRA_SUBJECT, "Person Details");
            sendIntent.putExtra(Intent.EXTRA_STREAM, u1);
            sendIntent.setType("text/csv");
            startActivity(sendIntent);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:01:19.310

您需要在 openFileOutput 中使用[MODE_APPEND](http://developer.android.com/reference/android/content/Context.html#MODE_APPEND)标志，否则默认情况下旧文件内容会被覆盖。

# iphone - 在线分配的对象的潜在泄漏......

> ID：11593448
> 
> 赞同：1
> 
> 时间：2012-07-21T15:28:46.273
> 
> 标签：iphone, xcode, memory

我正在获取联系方式，并且在我的 shouldContinueAfterSelectingPerson 方法中存在内存问题。我在几周前遵循了一个教程，但是现在当我单击产品-> 分析时，我在这 3 行中得到“在线分配的对象的潜在泄漏”：

```
[lastName setText:(__bridge NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty)];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

[dateOfBirth setText:birthday]; 
```

单击这些错误时，我得到（尽管第三行只有 2 号）：

1.  调用函数“ABRecordCopyValue”返回一个具有 + 1 保留计数的 Core Foundation 对象

2.  对象泄漏：在此执行路径中稍后未引用分配的对象，并且保留计数为 + 1

完整代码如下所示：

```
- (BOOL)peoplePickerNavigationController: (ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {

[firstName setText:(__bridge NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty)];

[lastName setText:(__bridge NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty)];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MMMM d, yyyy"];
birthday = [dateFormatter stringFromDate:(__bridge NSDate *)ABRecordCopyValue(person, kABPersonBirthdayProperty)];
[dateOfBirth setText:birthday]; 
```

有没有解决这个问题，我修复它有多重要？我的代码中还有另一个潜在的对象泄漏。

最后一点：我正在使用 ARC。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T17:13:12.477

你要这个：

```
[lastName setText:(__bridge_transfer NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty)]; 
```

您看到来自分析器的警告的原因是`ABRecordCopyValue`返回一个`CFStringRef`+1 保留计数。然后，您将投射到一个`NSString*`但对 ARC 说不要拥有该对象的所有权。这意味着它不会自动为您添加版本。因此，您需要告诉 ARC 在使用`__bridge_transfer`.

你也可以这样做：

```
CFStringRef string = ABRecordCopyValue(person, kABPersonLastNameProperty);
[lastName setText:(__bridge NSString *)string];
CFRelease(string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:14:55.080

由于函数正在返回新对象（它们的名称中有副本），因此您需要以某种方式释放这些对象。

这可以通过调用适当的方法来释放它，或者通过使用`__bridge_transfer`instead of 来完成`__bridge`，它指示 ARC 接管内存管理并在需要时释放它。

# javascript - 将 html var 加载到另一个 html 元素中

> ID：11593451
> 
> 赞同：0
> 
> 时间：2012-07-21T15:29:25.910
> 
> 标签：javascript, jquery, html, iframe

我有一个带有完整 html 代码（html、head、body）的 javascript 变量，而不仅仅是正文内容。现在我需要将该代码呈现到另一个 html 页面中。

没有 src 的 iframe 可以很好地通过 jquery 加载代码：

```
$("#myIframe").contents().find('html').html(myJsVar); 
```

但我无法在该 iframe 中捕捉到 keyup 事件，这是强制性的。

我想要的解决方案是使用可以呈现页面的 div，但我认为这是不可能的:(

你还有别的想法吗？

十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:54:20.473

这看起来很简单：[jsFiddle example](http://jsfiddle.net/DLgLQ/1/)

```
$('#myIframe').contents().find('#myInput').keyup(function() {$(this).val('new value');});​ 
```

# c# - 如何获取会话的 ListView 项的信息

> ID：11593453
> 
> 赞同：1
> 
> 时间：2012-07-21T15:29:31.090
> 
> 标签：c#, asp.net, session, listview, webforms

我的情况：

我有一个 ListView，它从 Active Directory 中获取数据。用户在文本框中输入一个字符串（姓氏或其中的一部分）。比 ListView 列出 TextBox 中具有相同字符串的所有 AD 用户。每条线路都有一个按钮“Anzeigen”以获取有关用户的更多信息。第二个 WebForm“Benutzer.aspx”显示有关此用户的信息。我想我需要第二个 WebForm 的选定用户的值（ID 或电子邮件）。所以我需要一个会话。因此，如果我单击“Anzeigen”按钮，我需要电子邮件的值等。这实际上是在 ListView 中的 Line。

我的问题：

我不知道如何获取此 ListView 行的其他信息。我想我需要一种索引或者我必须控制一个单元格。

我的代码：

ASPX

```
<asp:ListView runat="server" ID="myListView">

        <LayoutTemplate>
            <table id="UserTable" runat="server" border="0" cellspacing="10" cellpadding="5">
                <tr id="Tr1" runat="server">
                    <th id="Th1" runat="server">Benutzer</th>
                    <th id="Th2" runat="server">eMail</th>
                    <th id="Th3" runat="server">Vorname</th>
                    <th id="Th4" runat="server">Nachname</th>
                    <th id="Th5" runat="server">Telefon</th>
                </tr>
                <tr runat="server" id="ItemPlaceholder">
                </tr>
            </table>
        </LayoutTemplate>

        <ItemTemplate>

            <tr runat="server"> 

                <td align="left" ><asp:Label ID="Label1" Text='<%# Eval("Benutzer") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label5" Text='<%# Eval("Telefon") %>' runat="server" /></td>
                <td align="left"><asp:Button ID="Button1" Text="Anzeigen" OnCommand="Button1_Command" CommandName="Anzeigen" CommandArgument="myArgument" runat="server" /></td>

            </tr>

        </ItemTemplate>

        </asp:ListView> 
```

CS

```
protected void Button1_Command(object sender, CommandEventArgs e)
        {
            if (e.CommandName == "Anzeigen")
            {
              //Here I need a Session and the Informations about the Selected User in the Line

                Response.Redirect("Benutzer.aspx");

            }
    } 
```

塔拉索夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:49:44.947

如果我理解正确，您需要参考在列表视图中显示电子邮件的标签。为此首先获取参考，请参见以下代码：

```
protected void Button1_Command(object sender, CommandEventArgs e)
    {
        if (e.CommandName == "Anzeigen")
        {
          //Here I need a Session and the Informations about the Selected User in the Line
            Label lb = (Label) myListView.Items(1).FindControl("Label2"); // give the right index, Label2 contains the email so give its ID but index should be correct
            string email = lb.Text;
            Response.Redirect("Benutzer.aspx");

        }
} 
```

# php - 在 PHP CMS 的页脚中加载脚本的问题

> ID：11593454
> 
> 赞同：0
> 
> 时间：2012-07-21T15:29:32.463
> 
> 标签：php, javascript, html

我目前正在开发一个自定义 CMS（只是一个基本布局，分为模板、header.php、footer.php 等）。我试图避免在标题中加载我的脚本，但其中一些脚本，比如用照片和视频填充画廊的 jQuery 插件，需要先加载。现在，我在页脚中加载脚本之后编写我的函数。它可以工作，但远非最佳，因为并非每个模板都需要所有脚本块和 JS 文件，但我似乎无法找到一种方法来拆分模板之间的脚本块而不在标头中加载 JS。这种情况是否有最佳实践，或者我是否坚持在标题中加载脚本？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:46:28.303

对于最佳实践，据我所知，javascript 最好放在页面底部，因为大多数只有在页面的所有元素都加载后才能运行。

jQuery 插件，到目前为止我一直使用的工作，即使放在 HTML 的主要内容下方。由于这些插件中的大多数都包含在其中，`$(document).ready()`因此在页面完全加载之前它们不会真正做任何事情，即使它们是在标题中加载的。唯一需要注意的是放置`jQuery.js`在 jQuery 插件脚本之上以使插件工作。

# class - 为什么要在句法层面区分接口和抽象类？

> ID：11593455
> 
> 赞同：3
> 
> 时间：2012-07-21T15:29:34.320
> 
> 标签：class, syntax, interface, language-design, abstract

（**免责声明**：这不是关于理解`abstract class`es 和`interface`s 之间区别的问题。如果你没有明白，请再读一遍标题。我精通合约和半实现子系统之间的区别。）

让我们以 Java 为例。似乎几乎不需要一个独特的关键字`interface`，从我作为开发人员的角度来看，编译器吐出完全相同的东西，用人类的话说，“你不能利用它，直到你派生（通过`implements`或`extends`）一个实现其方法的新类”。简单的。

但是有一种情况可能会阻止这两者的混淆：当我们需要`implement`多个时`interface`，因为 Java 不允许多重继承（对于`class`es）。当然，以编译器在有任何方法体或声明的变量时识别并随后在适当的情况下禁止多`implements`/的方式构建语言是微不足道的`extends`？那么优先顺序是否存在问题？

这是我们有这种句法差异的唯一原因吗？

PS 我问这个问题的一个原因是，这种情况可能会给新的 OO 程序员在理解方面带来相当大的挑战，我认为在语言级别以更简化的方式处理这个问题，将大大有助于更快地掌握概念上的差异.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:28:32.447

> 当然，以编译器在有任何方法体或声明的变量时识别并随后在适当的情况下禁止多实现/扩展的方式构建语言是微不足道的吗？

假设你确实这样做了。所以你的语言可以让你这样做：

```
class Foo extends A, B, C {
} 
```

只要`B`and中的每个方法`C`都是抽象的，它就不会抱怨。很好，花花公子。

现在假设您没有创建`B`. 它在其他人写的其他包中。他们对你的班级一无所知`Foo`。当他们制作的时候`B`，里面的一切都是抽象的，但这只是一个巧合：他们还没有碰巧有任何具体的东西可以放在里面。

后来，他们决定在 中添加另一种方法`B`，这*是*具体的。现在，不知不觉，他们破坏了你的课堂`Foo`。

具有显式`interface`构造的一个论点是，它使作者的意图对`B`使用它的人来说清楚。

总的来说，我认为你的问题是一个很好的问题。我使用的语言 Dart 实际上与您所说的很接近：它现在具有显式`interface`语法，但它正在被删除以支持纯抽象类。

# javascript - 客户端和服务器端事件未同时触发

> ID：11593456
> 
> 赞同：3
> 
> 时间：2012-07-21T15:29:50.153
> 
> 标签：javascript

我有一个 asp.net 按钮控件。我的要求是，在单击按钮时，它应该被禁用并同时触发服务器端事件。我正在禁用按钮

```
onclientclick = "this.disabled = true;" 
```

并通过调用服务器端方法

```
onclick = "someserversidemethod" 
```

但问题是该按钮被禁用并且没有触发服务器端事件。我希望客户端和服务器端事件同时触发。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:36:10.510

保留您所拥有的并设置属性`UseSubmitBehavior="false"`。这将强制按钮使用 asp.net 回发机制，而不是内置的浏览器机制。

[请参阅此处了解更多详细信息](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.usesubmitbehavior.aspx)

**编辑**

当您单击`<input type="submit">`控件时，作为标准的浏览器将始终提交一个表单（这是您使用 a 时呈现给 HTML 的内容`<asp:Button>`）。ASP.NET 使用此功能来启动对服务器的回发。

您遇到的问题是，如果按钮被禁用（就像您在 javascript 中所做的那样），那么浏览器将**不会**提交表单（即不会发生回发）。

通过使用该属性`UseSubmitBehavior="false"`，您告诉 ASP.NET 忽略浏览器可以自己提交的事实，而按钮应该使用 ASP.NET 提供的 JavaScript 回发方法（与用于`AutoPostback="true"`类似`<asp:Checkbox>`等的方法相同） .

javascript 回发忽略了您刚刚将控件设置为禁用的事实，这意味着该控件将在屏幕上被禁用，但回发仍然会发生。

我希望这是有道理的

# linux - 父进程中的 execl()-ing： SIGCHLD 被 ps 捕获

> ID：11593459
> 
> 赞同：1
> 
> 时间：2012-07-21T15:30:09.887
> 
> 标签：linux, unix, exec, fork, sigchld

我正在对 fork()、exec() 和相关的 UNIX 调用进行分配，我需要在其中显示（子）进程的僵尸状态。这是相关的代码：

```
pid = vfork();  //used vfork() for showing z state
if(pid>0)
  {
    (some sorting code)
    execl("/bin/ps","/bin/ps","a",(char*)0);             
  } 
```

我期望的是：

```
(child's output)
(parent's output)
(Output of the ps command where I then would be able to show a 'defunct' entry) 
```

我得到的是：

```
(child's output)
(parent's output) 
No ps command output. Instead I get: Signal 17 (CHLD) caught by ps (procps version 3.2.8) 
```

但是，当`sleep(int time)`在调用之前插入（以秒为单位的整数时间）时`execl`，我得到了所需的输出并且没有报告任何信号错误。

这里发生了什么事？是否`ps`成为（尚未成为僵尸的）孩子的新父母？为什么`ps`命令不执行？这会`sleep()`根据`ps`需要执行什么操作？

我是 POSIX/Linux 编程的新手，因此`SIGCHLD`我将不胜感激此信号与我的特定情况的任何相关性。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:12:13.300

我可能错了，但我认为正在发生的事情是这样的：

*   当父母阻止时，您的孩子开始并执行排序代码。
*   孩子退出。
*   父母做它的一半，正在`if`执行`ps`。
*   `ps`启动后，`SIGCHLD`由于子进程终止而发送到父进程（信号可能很慢且不可预测）
*   如果添加睡眠，则将其`SIGCHLD`传递给忽略它的父级，然后将控制权传递给`ps`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-17T09:35:53.887

**标题**

ps -ef 失败，在 Redhat 6.6 上出现“信号 17 (CHLD) 被 ps (procps 版本 3.2.8)”捕获

**描述**

在 Redhat 6.6 上运行 ps -ef 命令失败并出现以下错误：“信号 17 (CHLD) 被 ps 捕获（procps 版本 3.2.8）”

**原因**

这是第 3 方的问题。Redhat 创建了以下文章来跟踪问题：

[https://access.redhat.com/solutions/1235753](https://access.redhat.com/solutions/1235753)

**解析度**

有关最新的解决方法，请参阅 Redhat 文章。 [https://access.redhat.com/solutions/1235753](https://access.redhat.com/solutions/1235753) 其中包括 libfreebl3.chk 文件的重命名，如下所示：

```
# mv /lib/libfreebl3.chk /lib/libfreebl3.chk-bz1153759
# mv /lib64/libfreebl3.chk /lib64/libfreebl3.chk-bz1153759 
```

**附加信息**

RedHat 现在似乎已修复此问题。参见 RHBA-2014:1867

# c++ - 使用 QT 和 QOGL 的多线程崩溃

> ID：11593461
> 
> 赞同：2
> 
> 时间：2012-07-21T15:30:13.990
> 
> 标签：c++, multithreading, qt, debugging, opencv

我有一个 QOGLWidget 小部件，它构建在另一个窗口中，由 QMainwindow 中的按钮激活。我正在尝试将图像的表面从小部件发送到主窗口的 QOGLWidget，它崩溃并给出第一次机会异常访问冲突的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:49:54.830

在这种情况下，我认为可能会发生三件事：

## Qt::自动连接

您的帧生成器和 GUI（SimulatorWindow + GLSimulatorWidget）之间的连接由[Qt::AutoConnection](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)连接，当它们驻留在单独的线程上时最终变成[Qt::DirectConnection 。](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)指定[Qt::QueuedConnection](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)的连接来解决这个问题（如果它们确实在不同的线程上）。

## QPixmap 诉 QImage

您可以在 GUI 线程之外处理[QPixmap](http://qt-project.org/doc/qt-5.0/qpixmap.html)。这通常会打印出警告，但可能仍然有效。通常，如果您不在 GUI 线程中处理图像，然后将其发送到 GUI 线程，则需要使用[QPixmap](http://qt-project.org/doc/qt-5.0/qpixmap.html)以外的东西，例如[QImage](http://qt-project.org/doc/qt-5.0/qimage.html)。

## 堆栈上的初始化

您的框架对象在到达您的 GUI 时可能已经超出范围。例如，如果您构建一个框架，并将其存储在堆栈的本地范围中，然后将其传递给处理程序或容器......

...然后，当您离开本地范围以在 GUI 中表示对象时，您的框架对象将消失，并且您的处理程序/容器将保留一个错误的指针。

为了解决这个问题，初始化到堆上并坚持使用[Qt Object Model](http://qt-project.org/doc/qt-5.0/object.html)。我也喜欢将我的容器放在堆上，作为它们所属类的成员变量。

总而言之：检查您的连接类型，如果您的帧生成器是否在 GUI 线程上，如果您在不是 GUI 的线程中，请使用 QImage 而不是 QPixmap，并确保您的指针没有超出范围。

# excel - 如何在不使用数组的情况下访问范围变量的非连续内容

> ID：11593469
> 
> 赞同：0
> 
> 时间：2012-07-21T15:30:50.950
> 
> 标签：excel, vba, variables, range

重新声明：我是一个 excel vba 新手，所以请耐心等待...

我需要访问非连续范围变量中的单个单元格并更改其值。

有没有顺序的方法来循环一个不连续的范围变量？

例如：

```
rng = Range("d1:d6, d12") 
```

此范围内有 7 个单元格，但我无法遍历此范围内的单元格，因为“单元格”函数将第 7 个单元格视为 d7。或者我可以用其他方式吗？

我不能使用 FOR EACH，因为我需要使用范围本身以外的另一个变量来跳过范围并更改其中的值。

所以这是我想要做的一个不起作用的例子：

```
' If I could access a range like an array

    rng(1) = Application.InputBox(prompt:="Enter customer's name: ", Title:="CUSTOMER NAME", Type:=2)
    rng(2) = Application.InputBox(prompt:="Enter travel out date: ", Title:="TRAVEL OUT DATE", Type:=1)
    rng(3) = Application.InputBox(prompt:="Enter travel back date: ", Title:="TRAVEL BACK DATE", Type:=1)
    rng(4) = Application.InputBox(prompt:="Enter number of technicians: ", Title:="TECHNICIANS", Type:=1)
    rng(5) = Application.InputBox(prompt:="Enter number of engineers: ", Title:="ENGINEERS", Type:=1)
    rng(6) = Application.InputBox(prompt:="Enter location: ", Title:="LOCATION", Type:=2)
    rng(7) = Application.InputBox(prompt:="Enter todays date: ", Title:="TODAY'S DATE", Type:=1) 
```

我不想使用数组，因为我不想单独操作单元格的值，我想更改单元格中的值并将其反映在该单元格中，而不必经历重新加载的过程数组内容进入范围，无论如何这再次给我带来了同样的问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:48:12.420

如果您在电子表格本身上突出显示要访问的单元格，您可以这样做：

```
Sub accessAll()
    Dim cell As Range
    For Each cell In Selection
        (do something here)
    Next cell
End Sub 
```

这将获取您突出显示的每个单元格并对其执行某些操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:40:14.600

嗯，这个怎么样？

```
Sub test()

  Dim Arr() As String         ' dynamic array,
  ReDim Arr(Selection.Count)  ' ... properly sized
  i = 0
  For Each c In Selection
    i = i + 1
    Arr(i) = c.Address        ' save each cell address
  Next c

  ' now we can reference the cells sequentially
  Range(Arr(1)) = Application.InputBox(prompt:="Enter customer's name: ", Title:="CUSTOMER NAME", Type:=2)
  Range(Arr(2)) = Application.InputBox(prompt:="Enter travel out date: ", Title:="TRAVEL OUT DATE", Type:=1)
' ...

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:12:12.270

非规则或非连续范围具有`Areas`代表规则的矩形子范围。编辑：请注意，两个区域可能重叠，所以如果使用下面的代码，请注意这一点......

```
Dim a as range, c as range

For each a in yourRange.Areas
    For each c in a
      'something with c
    Next c
Next a 
```

编辑：您可以使用函数从您的范围中获取第 n 个单元格。

请注意，如果您请求超出范围大小的索引，这将返回 Nothing。

```
'get the n'th cell from a non-contiguous range
'probably not efficient for large ranges...
Function NthCell(rng as Range, n as integer) as Range
    Dim i as integer, c as Range
    Dim rv as Range

    i=1
    for each c in rng.Cells
        if i=n then
            Set rv=c
            Exit For
        end if
    Next c

    Set NthCell=rv
End Function

'Sample usage:
Set rng = Range("D1:D6,D12")
NthCell(rng, 1).Value = ....
NthCell(rng, 7).Value = .... 
```

# python - 例如 Numpy、SciPy 或 Matplotlib 的代码完成在 Eclipse PyDev 中不起作用

> ID：11593472
> 
> 赞同：3
> 
> 时间：2012-07-21T15:31:09.627
> 
> 标签：python, autocomplete, numpy, pydev, code-completion

在 Ubuntu 12.4 或 11.4 下的 Eclipse/PyDev 中，无法完成代码完成工作，例如 SciPy、Numpy 或 Matplotlib。在最新版本（2.6）中尝试使用 Eclipse Helios 和 Juno，PyDev。

代码完成确实适用于例如内部项目引用或内置。

添加了“Preferences->Pydev->Interpreter - Python->Libraries”的路径，并将 scipy、numpy 和 matplotlib 添加到“Forced Builtins”。在“Preferences->PyDev->Editor->Code Completion”“Minimum Number of chars...”设置为1，“Preferences->PyDev->Editor->Code Completion (ctx insensitive and tokens)”“Number of chars chars for..." 都设置为 2。

导入和代码完成在 ipython shell 中工作，所以我认为它一定是 PyDev 中的东西......

示例代码：

```
import numpy as np
myArr = np.array([1,2,3])
myArr.set#<hit CTRL-SPACE for completion> 
```

代码完成在这里不建议任何数组方法（setasflat、setfield、setflags）。

感谢您的任何建议... :)

问候， 卡斯滕

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T22:32:19.863

I think this happens because pydev couldn't figure out what type is returned by the `np.array` method. If your code is long and you want code completion many times, perhaps you could "tell" pydev what is myArr's type. Try using `assert`:

```
import numpy as np
myArr = np.array([1,2,3])
assert isinstance(myArr, np.ndarray)
myArr.set#<hit CTRL-SPACE for completion> 
```

After that code completion will always work for the `myArr` variable. Later you can delete or comment the assert line or use the "-O" flag with the python interpreter. Look at [this](https://www.davidandrzejewski.com/2012/05/03/python-enhance-pydevs-auto-complete/) page.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T17:24:40.173

请注意，在最新的 PyDev 版本中，您现在可以通过文档让 PyDev 知道类型（无需断言 isinstance）。

有关详细信息，请参见：[http](http://pydev.org/manual_adv_type_hints.html) ://pydev.org/manual_adv_type_hints.html 。

# android - 加载 SharedPreference 高效

> ID：11593473
> 
> 赞同：0
> 
> 时间：2012-07-21T15:31:15.410
> 
> 标签：android, sharedpreferences, if-statement

在我的应用程序中，我遇到了一个错误，导致我无法加载 SharedPreferences。发生这种情况的原因是，当应用程序被永久终止时（任务杀手或手机重启），手机无法再次加载所有内容。现在我正在使用这种技术：

```
if ((sharedPreferences.getString("EXA1", "")) == "Example1"){

//do something
 }
else if ((sharedPreferences.getString("EXA1", "")) == "Example2"){

 //do something
 }
 else if ((sharedPreferences.getString("EXA1", "")) == "Example3"){

 //do something
}
else{
//do nothing
} 
```

因为我得到了大约 75 个 else if 语句，所以我的手机在应用程序被杀死后拒绝加载它们。有没有更有效的加载方式然后做点什么？（注意：我得到了不止一个 SharedPreference）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:35:51.627

使用**strObject.equals("MatchString")**方法

看：

```
if ((sharedPreferences.getString("EXA1", "")).equals("Example1")){
                                            ^^^^^^^^^^^^^^^^^^^^

//do something
 }
else if ((sharedPreferences.getString("EXA1", "")).equals("Example2")){

 //do something
 }
 else if ((sharedPreferences.getString("EXA1", "")).equals("Example3")){

 //do something
}
else{
//do nothing
} 
```

您不能使用**==**运算符比较两个字符串对象，因为它不是原始数据类型。

# php - cakephp在整个网站上登录

> ID：11593476
> 
> 赞同：0
> 
> 时间：2012-07-21T15:31:40.847
> 
> 标签：php, session, cakephp, authentication, oauth

我正在使用地址 = /cake/hybridauth/auth/google 的 HybridAuth 插件登录，然后我使用这些详细信息在数据库中查找用户并将他们登录到默认的 CakePHP Auth，如下所示：

```
 $hybridauth = new Hybrid_Auth($hybridauth_config);
   $adapter = $hybridauth->authenticate($provider);
   $userprofile = $adapter->getUserProfile();
    //look up user + register if not found

        $this->loadModel('User');

        $isUser = $this->User->find('first', array(
                    'conditions' => array(
                        'User.provider' => strtolower($provider),
                        'User.identifier' => $userprofile->identifier
                    ),
                    'callbacks' => true
                ));

        if(!$isUser){
            //register the user
        } else {
            //update user with new credentials
            $this->Auth->login($isUser["User"]);

            //this doesn't work across the whole site, 
            //only this controller's "action" page
        } 
```

这一切都很好，直到我回到我在 /cake/ 的主页，那里似乎无法识别我已经登录 - 尽管在控制器的操作页面 (cake/hybridauth/auth/google) 我有用户登录进入 Auth 组件，上面的代码似乎工作......

请问有什么我想念的吗？

非常感谢。

# iphone - 如何从 iTunes 中更改现有捆绑包 ID 与项目中的新捆绑包标识符连接

> ID：11593480
> 
> 赞同：1
> 
> 时间：2012-07-21T15:32:33.873
> 
> 标签：iphone, app-store-connect

在提交到 AppStore 之前更改了项目名称。所以在项目中也改变了包标识符。在 iTunes 连接中，它显示旧的捆绑 ID，我如何用新的捆绑 ID 更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:45:51.687

如何在不删除现有 AppID 的情况下创建新 AppID？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:14:52.520

只需创建另一个 AppId（它将反映您的新捆绑包 ID）并将其设置为您的配置文件（开发和发行版）。然后刷新 xcode 中的配置文件并尝试使用新配置文件对您的应用程序进行签名。

# c# - 如何保存 wpf 事件行中的更改

> ID：11593481
> 
> 赞同：0
> 
> 时间：2012-07-21T15:32:34.763
> 
> 标签：c#, wpf, events, savechanges

问题是 wpf 不保存更改仅在事件结束后

```
//code
private void button1_Click(object sender, RoutedEventArgs e)
{
    for (int ii = 0; ii <= 5; ii++)
    {
        Rectangle rectr = (Rectangle)FindName("rect" + ii);
        rectr.Fill = Brushes.Black;
        // need some thing to save changes here 
        Thread.Sleep(100);
    }

} 
```

问题是如何保存更改

**我只需要更改每个矩形的背景颜色并休眠一段时间然后更改下一个矩形**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:16:29.997

尝试这样的事情：

XAML 文件：

```
<Window x:Class="RectangleNS.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Button Content="Change Color" Click="Button_Click" />

        <StackPanel Grid.Row="1" >
            <Rectangle Name="rect1" Fill="Red" Height="50" />
            <Rectangle Name="rect2" Fill="Yellow" Height="50" />
            <Rectangle Name="rect3" Fill="Green" Height="50" />
            <Rectangle Name="rect4" Fill="AliceBlue" Height="50" />
            <Rectangle Name="rect5" Fill="DarkTurquoise" Height="50" />
        </StackPanel>        
    </Grid>
</Window> 
```

代码隐藏文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.ComponentModel;
using System.Threading;

namespace RectangleNS
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            BackgroundWorker bw = new BackgroundWorker();

            Grid grid = (Grid)(sender as Button).Parent;

            bw.DoWork += (o, ee) => 
            {
                for (int i = 1; i <= 5; i++)
                {
                    Rectangle rectr = null;
                    Application.Current.Dispatcher.Invoke((Action)(() => { rectr = VTHelper.FindVisualChildByName<Rectangle>(grid, "rect" + i); }));
                    Application.Current.Dispatcher.Invoke((Action)(() => { rectr.Fill = Brushes.Black; }));                 
                    Thread.Sleep(100);
                } 
            };

            bw.RunWorkerAsync();
        }
    }

    public static class VTHelper
    {
        public static T FindVisualChildByName<T>(DependencyObject parent, string name) where T : DependencyObject
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
            {
                var child = VisualTreeHelper.GetChild(parent, i);
                string controlName = child.GetValue(Control.NameProperty) as string;
                if (controlName == name)
                {
                    return child as T;
                }
                else
                {
                    T result = FindVisualChildByName<T>(child, name);
                    if (result != null)
                        return result;
                }
            }
            return null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:15:46.993

`Button_Click`由 UI 线程调用，你不应该做任何需要超过几毫秒的事情，让它休眠 100 毫秒。在那段时间内没有处理消息，您的界面没有响应，并且您的应用程序被系统视为“挂起”。

所以，那个`long processing task should be handled by another thread`。用这个替换你的代码，它应该适合你 -

```
for (int ii = 0; ii <= 5; ii++)
            {
                BackgroundWorker backgroundWorker = new BackgroundWorker();
                backgroundWorker.DoWork += (s, args) =>
                    {
                        args.Result = (int)args.Argument;
                        Thread.Sleep(100);
                    };
                backgroundWorker.RunWorkerCompleted += (s, args) =>
                {
                    int value = (int)args.Result;
                    Rectangle rectr = (Rectangle)FindName("rect" + value);
                    rectr.Fill = Brushes.Black;
                };
                backgroundWorker.RunWorkerAsync(ii);
            } 
```

# zend-framework - 如何将我的 zend 脚本图片文件名放入隐藏字段

> ID：11593482
> 
> 赞同：1
> 
> 时间：2012-07-21T15:32:55.440
> 
> 标签：zend-framework, upload, image, hiddenfield

好吧，我被难住了。我正在使用帮助我上传图片的 Zend 脚本。它工作得很好，但我试图将图片名称捕获到表单的隐藏字段中。我想指出名称发生了变化，所以我需要得到最终被放入隐藏字段的任何一个。这是 Zend 脚本：

```
<?php
if (isset($_POST['upload'])) {
require_once('scripts/library.php');

    try {

        $destination = 'xxxxxxxx';
        $uploader = new Zend_File_Transfer_Adapter_Http();
        $uploader->setDestination($destination);

        $filename = $uploader->getFileName(NULL, FALSE);
        $uploader->addValidator('Size', FALSE, '90kB');
        $uploader->addValidator('ImageSize', FALSE, array('minheight' => 100, 'minwidth' => 100));

        if (!$uploader->isValid()) {
            $messages = $uploader->getMessages();
        } else {

            $no_spaces = str_replace(' ', '_', $filename, $renamed);
            $uploader->addValidator('Extension', FALSE, 'gif, png, jpg');
            $recognized = FALSE;

            if ($uploader->isValid()) {
                $recognized = TRUE;
            } else {

                $mime = $uploader->getMimeType();
                $acceptable = array('jpg' => 'image/jpeg',
                                    'png' => 'image/png',
                                    'gif' => 'image/gif');
                $key = array_search($mime, $acceptable);
                if (!$key) {
                    $messages[] = 'Unrecognized image type';
                } else {

                    $no_spaces = "$no_spaces.$key";
                    $recognized = TRUE;
                    $renamed = TRUE;
                }
            }

            $uploader->clearValidators();
            if ($recognized) {

                $existing = scandir($destination);
                if (in_array($no_spaces, $existing)) {

                    $dot = strrpos($no_spaces, '.');
                    $base = substr($no_spaces, 0, $dot);
                    $extension = substr($no_spaces, $dot);

                    $i = 1;
                    do {
                        $no_spaces = $base . '_' . $i++ . $extension;
                    } while (in_array($no_spaces, $existing));
                    $renamed = TRUE;
                }

                $uploader->addFilter('Rename', array('target' => $no_spaces));
                $success = $uploader->receive();
                if (!$success) {
                    $messages = $uploader->getMessages();
                } else {

                    $uploaded = "$filename uploaded successfully";
                    $pic = $filename;
                    if ($renamed) {
                        $uploaded .= " and renamed $no_spaces";
                    }
                    $messages[] = "$uploaded";
                }
            }
        }
    } catch (Exception $e) {
        echo $e->getMessage();
    }
} 
```

在这里，我试图使`$pic`变量暂时不抛出错误（在表单页面上）

```
if (isset($_POST['upload'])) {  } else { $pic = "unknown";} 
```

该`$pic`变量是我试图将 zend 脚本中的文件名复制到其中的变量。任何反馈都非常感谢:)

# regex - 正则表达式查找所有不以“=”或“=”结尾的单词

> ID：11593487
> 
> 赞同：-2
> 
> 时间：2012-07-21T15:33:24.480
> 
> 标签：regex, c#-4.0

我想找到所有以 @ 开头且不以相等 (​​=) 结尾的单词

```
"@parameter" ---> result = "@parameter"
"@parameter = @first" ---> result = "@first"
"@parameter = @first, @parameter = @second" ---> result = "@first" and "@second" 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:42:42.437

使用 regex `@\w+\b(?!\s*=)`，这意味着寻找`@`后跟一些不跟的单词`=`（带有可选的前导空格字符）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:51:17.897

使用贪婪量词直到行尾并回溯搜索可选的`=`，其中：

```
 ^.*=?\s*(@\w+)\s*$ 
```

# html - 您可以使用带有 ruby nokogiri 的通配符搜索 html 属性吗

> ID：11593489
> 
> 赞同：1
> 
> 时间：2012-07-21T15:33:33.427
> 
> 标签：html, ruby, nokogiri

我知道您可以使用通配符在 html 中搜索文本。您可以使用带有 nokogiri 的通配符在 html 中搜索属性值吗

例如，假设我想搜索具有值的类`*session*`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T16:11:55.717

您可以使用 xpath contains() 函数来搜索文档。就像是：

```
doc.xpath("//*[@*[contains(., 'session')]]").each do |ele|
  # something
end 
```

此搜索返回具有任何属性的所有元素，其值包含字符串“会话”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T22:22:37.907

Had a similar problem few days ago - notice spaces around class values.

```
find(:xpath, "//*[contains(concat(' ', normalize-space(@class), ' '), ' icon-edit ')]") 
```

# scala - 为什么可以在没有应用方法的情况下创建 Map 对象？

> ID：11593494
> 
> 赞同：3
> 
> 时间：2012-07-21T15:34:24.833
> 
> 标签：scala, map

```
C:\Users\John>scala
Welcome to Scala version 2.9.2 (Java HotSpot(TM) Client VM, Java 1.6.0_32).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import scala.collection.mutable.Map
import scala.collection.mutable.Map

scala> Map()
res4: scala.collection.mutable.Map[Nothing,Nothing] = Map() 
```

当`Map()`不使用关键字时，将调用来自相应伴随对象`new`的方法。`apply`但是 Scala 文档没有列出`apply`可变映射的方法（只提供`apply`了从映射中检索值的方法）。

为什么上面的代码仍然有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T16:29:45.803

它看起来像 scaladoc 中的错误。**对象中**有一个`apply`方法`collection.mutable.Map`（继承自`GenMapFactory`），但它没有出现在 Map 的文档中。此问题似乎已在[升级 2.10 的文档中得到修复](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.collection.mutable.Map$)。

注意：您必须查看对象文档，而不是第一类。当然，该方法适用`apply`于`class`现有的地图实例，并从中检索数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T16:30:38.470

的伴随对象上有一个 apply() 方法`scala.collection.immutable.Map()`。它继承自`scala.collection.MapFactory` . 该方法采用可变数量的对参数，通常用作

```
Map("foo"->3, "bar"->4, "barangus"->5) 
```

不带参数调用它显然也可以，但是比我聪明的人必须解释为什么类型推理引擎会`scala.collection.mutable.Map[Nothing,Nothing]` 为此提出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T16:31:56.507

正如`sepp2k`他在评论中已经提到的，该符号`Map`指的是 的伴随对象`Map`，它使您可以访问其单个实例。在模式匹配中，这通常用于识别消息：

```
scala> case object Foo
defined module Foo

scala> def send[A](a: A) = a match { case Foo => "got a Foo" case Map => "got a Map" }
send: [A](a: A)String

scala> send(Map)
res8: String = got a Map

scala> send(Foo)
res9: String = got a Foo 
```

如果您编写`Map()`，您将调用`apply`object 的方法`Map`。因为你没有给任何值插入到`Map`编译器不能推断任何类型，因此它必须使用[底部类型](http://en.wikipedia.org/wiki/Bottom_type)-`Nothing`这是每个类型的子类型。尽管存在差异，但它是唯一一种不会破坏类型系统的推断类型。不`Nothing`存在以下代码将无法编译：

```
scala> Map(1 -> 1) ++ Map()
res10: scala.collection.mutable.Map[Int,Int] = Map(1 -> 1) 
```

如果您查看其类型签名`++`如下（[来源](https://github.com/scala/scala/blob/v2.10.0-M5/src/library/scala/collection/MapLike.scala#L301)）

```
def ++[B1 >: B](xs: GenTraversableOnce[(A, B1)]): Map[A, B1] 
```

您会注意到下限类型参数`B1 >: B`。因为`Nothing`是所有事物的子类型（`B`在我们的例子中），编译器可以找到一个`B1`（`Int`在我们的例子中）并成功地推断出我们的 Map 的类型签名。这个下界是必需的，因为`B`它是协变的（[source](https://github.com/scala/scala/blob/v2.10.0-M5/src/library/scala/collection/MapLike.scala#L57)），

```
trait MapLike[A, +B, ...] ... 
```

这意味着我们不允许将其作为方法参数传递（因为方法参数处于逆变位置）。如果方法参数不在逆变位置，则类型系统将不再保留[Liskov 的替换原则。](http://en.wikipedia.org/wiki/Liskov_substitution_principle)因此，必须找到编译新类型（这里称为`B1`）的代码。

正如`Didier Dupont`已经指出的那样，Scaladoc 2.9 中存在一些错误，这些错误在 2.10 中得到解决。不仅会显示一些遗漏的方法，还可以显示隐式转换添加的方法（例如[Array](http://www.scala-lang.org/api/milestone/index.html#scala.Array)确实显示了 2.10 中的很多方法，而 2.9 中没有显示）。

# c++ - 为什么程序无法编译？

> ID：11593496
> 
> 赞同：-6
> 
> 时间：2012-07-21T15:34:51.290
> 
> 标签：c++

请帮我找出为什么我的 devcpp 没有编译我的程序的问题

```
#include <windows.h>
#include <iostream.h>

int main()
{
  using namespace std;
  cout << "Hello There please input A number" << endl;
int number;
  cin >> number;
  if( number >= 2 && number <= 2 )
   {
     cout << "You have input the wrong number haha" << endl;
  } 
  else
  {
    cout << "Wow how'd you guessed it?" << endl;
 }

 system("PAUSE>NUL");
 return 23;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T15:47:28.040

接受并编译它会给我一个简单的错误：

```
致命错误：iostream.h：没有这样的文件或目录

```

这是不言自明的。原因是它`<iostream>`没有扩展名或 `.h`等效项。将行更改为：

```
#include <iostream> 
```

它编译的证明（不包括以下几点，但删除与ideone无关的东西）：http: [//ideone.com/WIDjR](http://ideone.com/WIDjR)

除此之外：

*   你不需要`windows.h`。`system`是的一部分`cstdlib`。

*   `using namespace std;`往往弊大于利。建议坚持`std::cout`等。里面`main`不是最糟糕的地方，但尽管如此，这不是一个好习惯。

*   `if( number >= 2 && number <= 2 )`是一个逻辑错误，无论是在写入还是执行上。更简单的形式是`if (number == 2)`，但根据您的输出，正确的形式是`if (number != 2)`，以免 2 以外的每个数字都是正确的猜测。

*   `system ("PAUSE")`不好。你不知道是否`pause.exe`会这样做，或者它是否会存在。有人可能会`pause.exe`格式化他们的硬盘驱动器，而您应该为执行它负责。使用 , 的形式`cin.get()`，或者，如果您的编译器实现它来清除输入缓冲区，`cin.sync(); cin.get();`以保持一致的行为。请注意，`cin.sync()`不能保证 的行为。

*   您的程序应该从正常退出返回 0。其他任何内容都表示发生了错误。`return 0;`如果您不指定返回值， in main 是隐式的。

# ios - 在情节提要 IB 中设置时，静态单元格属性无效

> ID：11593501
> 
> 赞同：0
> 
> 时间：2012-07-21T15:35:31.003
> 
> 标签：ios, xcode, uitableview, static

我已经将一个表格视图拖到我的视图中，将其设置为静态，设置单元格和部分的数量，更改颜色，添加控件并修改大小。但是，当我运行它时，更改不会显示出来。我在这里错过了什么吗？

# asp.net - 共享变量生命周期

> ID：11593502
> 
> 赞同：0
> 
> 时间：2012-07-21T15:35:32.780
> 
> 标签：asp.net, vb.net

何时创建和销毁共享（静态）变量。例如看看下面的代码：

```
 Imports System.Data.SqlClient
 Public Class Form1

        Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
            Person.testCon = New SqlConnection
            Person.Age = 30
            Dim p1 As Person
        End Sub
    End Class

Imports System.Data.SqlClient
    Public Class Person
        Public Shared testCon As SQLConnection
    End Class 
```

在创建 Person 的第一个实例之前，可以从 Form_Load 访问 testCon 变量。我意识到将连接作为共享变量可能不是一个好习惯，但我想表达我的观点。我还想知道如果变量是原始变量（例如示例中的 Person.Age），何时创建和销毁变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:05:01.407

根据[Microsoft](http://msdn.microsoft.com/en-us/library/35styb3a.aspx)的说法，共享变量在您的应用程序的长度内有效。

但是，对象类型变量只有在您告诉它们时才会被实例化。

您可以通过创建一个新的测试类来验证此行为：

```
Public Class Class1
    Sub New()
        System.Diagnostics.Debug.Fail("Class Created")
    End Sub
End Class 
```

然后为这个类创建一个共享变量作为另一个类的成员变量：

```
Private Shared m_TestClass As Class1 
```

如果不访问共享变量，则不会执行 Debug.Fail 语句。然而，一旦你实例化这个类并分配它，它就会被触发（就像任何其他对象一样）：

```
 m_TestClass = New Class1 
```

共享变量一直存在，直到它们所在的 AppDomain 被卸载。

您还可以通过使用类似的 Debug.Fail 语句向测试类添加 Finalize 语句来测试这一点。

生命周期是在为对象类型共享变量分配新值时应该使用[SyncLock的原因之一。](http://msdn.microsoft.com/en-us/library/3a86s51t%28v=vs.71%29.aspx)

# inno-setup - Inno-Setup 在安装之前检查文件位置，然后在安装期间使用它

> ID：11593503
> 
> 赞同：2
> 
> 时间：2012-07-21T15:35:50.603
> 
> 标签：inno-setup

我需要在程序安装期间使用 inno setup 检查文件的位置。然后我需要 inno setup 使用该文件在“文件名”行中的位置来创建用于程序初始化的桌面 ICON。除了如何执行上述操作外，我的“图标”选项的代码工作正常。

这是我目前正在使用的代码行；

```
Name: "{commondesktop}\SA - NH Bricscad V12"; Filename:"**c:\program files\septic assistant\new hampshire\support\**SA - NH Bricscad V12.exe"; IconFilename: "C:\Program Files\Septic Assistant\New Hampshire\Support\Bricscadlogo.ico"; Comment: "Septic Assistant the only Septic Design Program" 
```

Hi-Lited 部分将是我需要 inno 设置来搜索的 exe 文件的路径。

对此的任何帮助将不胜感激。

布鲁斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:56:33.847

只需使用一个`{code:...}`常量和相应`[Code]`的函数，它会为您的`[Icons]`条目返回适当的路径。您可能还想使用一个`Check`功能来避免在找不到正确位置的情况下安装图标。

另一种选择是使用`{reg:...}`常量，假设您尝试定位的路径是在注册表中的某处指定的（通常是这种情况）。

如果在安装其他应用程序时尚未在注册表中明确指定路径，并且您没有其他方法可以快速识别其他应用程序的位置（请注意，对用户的 HD 进行全局搜索不是一个**有效**的选项），那么您应该添加一个页面，提示用户自己输入位置（然后您可以验证他们是否选择了正确的位置）。`CodeDlg.iss`您可以在Inno 附带的示例和 ISXKB wiki 中看到提示用户输入信息然后使用该信息执行某些操作的示例。

# c# - 将仅由接口表示的对象添加到 ORM 生成的实体集合

> ID：11593508
> 
> 赞同：0
> 
> 时间：2012-07-21T15:36:12.333
> 
> 标签：c#, .net, inversion-of-control

我正在尝试在我使用一个商业 ORM 的小项目上使用 IoC。

我的实体“项目”上有“用户”实体的集合。当我将接口传递给方法时，我无法将 eobject 添加到“用户”实体的集合中，因为它由一些 ORM EntityCollection 类表示。

例子：

```
//'this' is a partial class to the modeled Entity<int>
public void AddToCollection(IUser user)
{
    this.Users.Add(user); //this.Users is type of EntityCollection.
} 
```

我在这里看到了两种可能性，但我不知道哪一种是最佳实践。

1.  将 EntityCollection 更改为 IEnumerable（这是不可能的）
2.  将 IUser 转换为用户

或者我可能在 IoC 上走错了路，这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:58:24.237

至于我，对实体使用接口并不是一件好事。更喜欢基类。最良好的问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:00:48.000

投掷。例如：

```
//'this' is a partial class to the modeled Entity<int> 
public void AddToCollection(IUser user) 
{   
     if ( user is User )  
         this.Users.Add( (User)user ); 
     else
         throw new ArgumentException();
} 
```

# delphi - 将多种数据类型读入列表

> ID：11593509
> 
> 赞同：0
> 
> 时间：2012-07-21T15:36:15.377
> 
> 标签：delphi, delphi-xe2, ini

发布问题后，标题可能会更新，但我从一个 .ini 文件开始，我想将 Integers 、 Strings 、 Bool 保存到这个 .ini 文件中。我能做的

```
WriteString
WriteInteger
WriteBool 
```

然后我想把它读入一个列表，当我从列表中提取数据时，它会知道它已经准备好一个整数、字符串或布尔值了吗？

目前我必须把所有东西都写成一个字符串，然后我读入一个字符串列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:50:42.610

如前所述，您可以将所有数据读取为字符串。您可以使用以下函数来确定数据类型：

```
type
  TDataType = (dtString, dtBoolean, dtInteger);

function GetDatatype(const AValue: string): TDataType;
var
  temp : Integer;
begin
  if TryStrToInt(AValue, temp) then
    Result := dtInteger   
  else if (Uppercase(AValue) = 'TRUE') or (Uppercase(AValue) = 'FALSE') then
    Result := dtBoolean
  else
    Result := dtString;
end;

You can (ab)use the object property of the stringlist to store the datatype:

procedure TMyObject.AddInteger(const AValue: Integer);
begin
  List.AddObject(IntToStr(AValue), TObject(dtInteger));
end;

procedure TMyObject.AddBoolean(const AValue: Boolean);
begin
  List.AddObject(BoolToStr(AValue), TObject(dtBoolean));
end;

procedure TMyObject.AddString(const AValue: String);
begin
  List.AddObject(AValue, TObject(dtString));

end; 

function TMyObject.GetDataType(const AIndex: Integer): TDataType;
begin
  Result := TDataType(List.Objects[AIndex]);
end; 
```

# wordpress - 如何在不创建管理页面菜单的情况下获取页面的 slug 名称

> ID：11593510
> 
> 赞同：3
> 
> 时间：2012-07-21T15:36:16.760
> 
> 标签：wordpress, hook, admin, slug

我现在使用 add_submenu_page() 函数，但我不希望编辑页面出现在管理菜单中。

我想直接从列表（另一个页面）访问编辑页面。但我需要 slug 作为 hook_suffix。

我在 my-edit.php

```
/* Set up the administration functionality. */
add_action( 'admin_menu', 'my_edit_setup' );

function my_edit_setup() {
...
/* Add Edit Actionlist page. */
$myplugin->my_edit = add_submenu_page( 'myplugin', esc_attr__( 'Edit', 'myplugin' ), esc_attr__( 'Edit', 'myplugin' ), 7, 'my-edit', 'my_edit' );
... 
```

在 admin.php 我有：

```
function my_admin_enqueue_style( $hook_suffix ) {

  $pages = array(
    'admin_page_projects',
        '...my-edit'
  );

  if ( in_array( $hook_suffix, $pages ) ) {
    wp_enqueue_style( 'myplugin-admin', trailingslashit( MYPLUGIN_URI ) . 'css/admin.css', false, '20110525', 'screen' ); 
```

你看我需要 $hook_suffix，但我不知道如何获得它，而无需创建管理菜单项。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-18T22:53:29.867

如何创建不可见子菜单（它附加到仪表板，`index.php`）和对应的示例`$hook_suffix`。

该页面可以通过 访问`http://example.com/wp-admin/index.php?page=sample_page_hidden`。

```
add_action(  'admin_menu', 'admin_menu_so_11593510' );
add_action( 'admin_enqueue_scripts', 'admin_enqueue_scripts_so_11593510' );

function admin_menu_so_11593510() 
{
    add_submenu_page(
        null, // doesn't shows up in the menu, submenu is attached to "index.php"
        'Test', 
        'Test', 
        'edit_pages', 
        'sample_page_hidden', 
        'menu_options_so_11593510'
    );
}

function menu_options_so_11593510() { echo 'Hello!'; }

function admin_enqueue_scripts_so_11593510( $hook_suffix )
{
    if ( 'dashboard_page_sample_page_hidden' == $hook_suffix ) {
        wp_enqueue_script( 'swfobject' );
    }
} 
```

# jquery - 如何将单击事件放在同一类的多个输入上

> ID：11593511
> 
> 赞同：0
> 
> 时间：2012-07-21T15:36:18.817
> 
> 标签：jquery, html, click

```
 <script type="application/javascript">

    $(document).ready(function() {  
        $('input#newcommentinput').click(function() {
            $(this).hide();
            $(this).parent('.commentplaceofnewmodernpost').children('.newcommenttableinnewmodernpost').show();
            $('.textreaofnewcommentinnewmodernpost').focus(); 
        });
        $("input.postnewcomment").click(function() {
                var message=$(this).parent('.newcommenttableinnewmodernpost').children('.textreaofnewcommentinnewmodernpost').val();
                var post_id=$('.textreaofnewcommentinnewmodernpost').attr('id');
                alert(message);
                    if(message.length > 0){
                        $.post("PAGE_TO_POST", {comment:""+message+"",post_id:""+post_id+""}, function(data){
                            if(data.length >0) {
                                $('#newcommenthere').append(data);
                                $('table.newcommenttableinnewmodernpost').hide();
                                $('input.inputofnewcommentinnewmodernpost').show();
                                $('textarea.textreaofnewcommentinnewmodernpost').val('');
                                $('input.inputofnewcommentinnewmodernpost').val('Click to post comment...');
                            }
                        });}
        });

    });
</script>   

        <div class="commentplaceofnewmodernpost">
            <input class="inputofnewcommentinnewmodernpost watermarkpostcomment" id="newcommentinput">
            <table class="newcommenttableinnewmodernpost">
                <tr>
                    <td class="imgtdofnewcommenttable">
                        <img src=" IMG_ SRC" class="imgofdisplaycomment">
                    </td>
                    <td style="vertical-align:top;">
                        <textarea class="textreaofnewcommentinnewmodernpost watermarkpostcomment newcommenttextareaexpand" autocomplete="off" title="Click to post comment" id="POST_ID"></textarea>
                        <input type="button" class="greenbutton postsubmitbutton postnewcomment" value="Comment" title="Post comment" alt="Post comment" style="padding:5px 10px;margin-top:5px;" id="postnewcomment">
                        <input type="button" class="normalbutton postsubmitbutton" value="Cancel" title="Close to post comment" alt="Close to post comment" style="padding:5px 10px;margin:5px 0 0 15px;" id="cencalnewcomment">
                    </td>
                </tr>
           </table>
        </div> 
```

这是我的 HTML 代码。当某些主体单击输入 id="newcommentinput" 然后隐藏此输入并在其后显示表格并在其后聚焦。并且当单击按钮 id="postnewcomment" 时，它将消息发布到另一个页面显示结果并隐藏表格并显示 previuos 输入。

如何用 jquery 做到这一点？

现在我正在使用上面的 jquery 代码来实现上面的语句......

> 请记住：页面中有多个 div，因此请写下您的答案以进行多选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:48:17.323

这是将事件绑定到类的小代码...

也许你应该开始阅读 jquery 文档

```
 $(document).ready(function() {
            $(".inputofnewcommentinnewmodernpost").focusin(function() {
                    $(this).hide();
                    $(this).parent().find('.newcommenttableinnewmodernpost').show();
            });

            $('.postnewcomment').bind('click', function() {
                    $(this).parents('table').hide();
                    $(this).parents('.commentplaceofnewmodernpost').find('.inputofnewcommentinnewmodernpost').show();
            });
    }); 
```

# c - PGO 比静态优化慢（intel 编译器）

> ID：11593513
> 
> 赞同：1
> 
> 时间：2012-07-21T15:36:33.923
> 
> 标签：c, optimization, icc

我正在为 I-32A 架构使用英特尔 C 编译器。当我使用以下选项编译我的 C 程序时：

```
icl mytest.c /openmp /QxHost /fp:fast /fast 
```

测试运行需要 3.3 秒。现在我尝试使用 PGO，所以我编译了：

```
icl mytest.c /openmp /QxHost /fp:fast /fast /Qprof-gen 
```

然后，我使用示例输入运行可执行文件 2-3 次，然后再次编译：

```
icl mytest.c /openmp /QxHost /fp:fast /fast /Qprof-use 
```

希望它将考虑到收集的信息。事实上，它告诉我它正在使用 .dyn 文件，但生成的可执行文件比没有使用 Qpr​​of 时要慢（3.85 秒），而且这与执行运行的数据完全相同（对于 PGO 来说应该是完美的）。我尝试将 openmp 线程设置为一个，认为它可能会与 .dyn 输出混淆，但结果是相同的 - 它比简单编译慢。

**我的问题是**：这在理论上是否可行，或者我用编译器选项以某种方式搞砸了 PGO 进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:04:28.377

3.3 秒的浮点应用程序不会从配置文件引导的优化中受益。根据我的猜测，您正在进行某种原始数据处理，如果您需要原始 FLOP，则它更适合手动编码汇编，而不是 PGO。

PGO 不会告诉编译器如何优化您的内部循环以消除分支延迟并保持管道满。它*可能会*告诉它您的循环是否可能仅运行 5,000 次，或者您的浮点数是否满足某些条件。

它与在统计上代表您希望它运行的其他数据的数据一起使用。换句话说，您将它与您希望能够以良好剪辑运行其他数据的程序上的数据一起使用。它不一定针对手头的程序进行优化，正如您所说，甚至可能会减慢它的速度以获得可能的净收益。

这确实取决于您的程序，但 OpenMP FP 应用程序不是 PGO 的用途。像其他一切一样，它不是“灵丹妙药”。

# linux - 在 Ubuntu 服务器中编辑 limit.conf

> ID：11593517
> 
> 赞同：0
> 
> 时间：2012-07-21T15:37:04.997
> 
> 标签：linux, ubuntu-12.04

我正在尝试运行此命令，以便可以在 Ubuntu 中安装 Websphere Portal：

```
sudo echo "@users soft nofile 10240" >> /etc/security/limits.conf 
```

但每次我尝试我都会收到`"Permission Denied"`消息。我正在运行一个 Ubuntu Server 12.04 Virtual Box（没有图形界面），我在网上找到的每个解决方案都需要使用 Gedit。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:32:46.363

以`echo`root身份发生。重定向以当前用户身份发生。显然这不是你想要的。

```
sudo bash -c 'echo "@users soft nofile 10240" >> /etc/security/limits.conf' 
```

# java - 在 Enterpr 中调用 EJB 方法的 J2SE 客户端的部分工作。项目和 JPA

> ID：11593519
> 
> 赞同：0
> 
> 时间：2012-07-21T15:37:29.943
> 
> 标签：java, jakarta-ee, jpa, netbeans, ejb

目前我有一个 Java J2SE 客户端，它在会话 EJB 中调用两个方法。一种方法 (EJB.test()) 有效，而另一种 EJB.create() 无效。

看起来像这样的代码

```
Properties props = new Properties();
props.load(new FileInputStream("jndi.properties"));
InitialContext ctx = new InitialContext(props);

BeanRemote EJB = (BeanRemote) ctx.lookup("stateless.pack.BeanRemote");
System.out.println(EJB.test()); //Method works

Testobj t = new Testobj();
t.setName("User");  
EJB.create(t);   //Doesnt Work . This is the remote version. When tried through the local version using servlet of the Enterprise App it works. 
```

**EJB 实现是**

```
@Stateless
public class Bean implements BeanLocal,BeanRemote
{
    public @PersistenceContext(unitName="emp")   EntityManager manager;

    @Override
    public String test() 
    { return "test123";}

    @Override
    public Testobj create(Testobj cust) 
    {        manager.persist(cust);
             return cust;
    }
   .....
   .....
} 
```

我得到错误

```
Jul 21, 2012 9:16:23 AM com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator handleFullLogging
WARNING: IOP00810011: Exception from readValue on ValueHandler in CDRInputStream
org.omg.CORBA.MARSHAL: WARNING: IOP00810011: Exception from readValue on ValueHandler in CDRInputStream  vmcid: OMG  minor code: 11 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy24.valuehandlerReadException(Unknown Source)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1022)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1123)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:531)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObjectField(IIOPInputStream.java:2162)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputClassFields(IIOPInputStream.java:2404)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObject(IIOPInputStream.java:1224)
    at com.sun.corba.ee.impl.io.IIOPInputStream.simpleReadObject(IIOPInputStream.java:425) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:05:26.213

您必须定义一个接口并使用@Remote 对其进行注释并让EJB 实现这样的接口。

# list - iOS 和 Android 链接到四方列表

> ID：11593520
> 
> 赞同：0
> 
> 时间：2012-07-21T15:37:32.390
> 
> 标签：list, foursquare

有一种方法可以创建直接指向本机foursquare应用程序的链接：[https ://developer.foursquare.com/resources/client](https://developer.foursquare.com/resources/client)

但似乎没有这样的列表链接。是否可以创建一个在应用程序中而不是在浏览器中打开一些方形列表的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:30:02.807

目前没有用于foursquare 列表的本地深层链接。

# regex - .htaccess 正则表达式 HEX 匹配

> ID：11593523
> 
> 赞同：0
> 
> 时间：2012-07-21T15:38:12.460
> 
> 标签：regex, .htaccess

我正在构建一个系统，用户可以在其中选择自定义颜色，点击提交，并使用他们的配色方案查看模板的外观。

一个例子是：我允许用户选择 3 种自定义颜色。一旦他们点击提交，我会将他们重定向到[http://www.my-site.com/scheme/#000000:#FFFFFF:#666666](http://www.my-site.com/scheme/#000000:#FFFFFF:#666666)在幕后，将他们带到[http://www.my- site.com/index.php?scheme=#000000:#FFFFFF:#666666](http://www.my-site.com/index.php?scheme=#000000:#FFFFFF:#666666)

我正在寻找在 .htaccess 中使用的模式，以便在 PHP 中使用 $_GET['scheme'] 时，它将返回 #000000:#FFFFFF:#666666

注意：我不反对必须从每种颜色中删除“#”字符，也不反对使用不同的分隔符“：”。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:48:13.000

试试这个：

```
RewriteRule ^scheme/(#.*)$ index.php?scheme=$1 [NC,L] 
```

# entity-framework - EF Migrations migrate.exe 生成脚本

> ID：11593525
> 
> 赞同：8
> 
> 时间：2012-07-21T15:38:18.973
> 
> 标签：entity-framework, migration

我正在玩实体框架和持续构建。到目前为止，通过使用 migrate.exe 和适当的参数，我可以毫无问题地运行迁移或一系列迁移。

但是，当我尝试让 migrate.exe 踢出脚本而不是执行迁移时，我遇到了麻烦，就像我可以通过运行得到的一样

```
update-database -TargetMigration TestMigration -script 
```

从 Visual Studio 的包管理器控制台中。

目前有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-03-07T15:03:48.353

自 2017 年 10 月 22 日以来，您可以通过此 PR 做到这一点： [https ://github.com/aspnet/EntityFramework6/commit/02ec6b8c9279f93f80eeed1234e5ce0acfce5f31](https://github.com/aspnet/EntityFramework6/commit/02ec6b8c9279f93f80eeed1234e5ce0acfce5f31)

这里是实现此功能的实体框架 6.2 发行说明（请参阅“Migrate.exe 应支持 -script 选项”部分）： [https ://blogs.msdn.microsoft.com/dotnet/2017/10/26/entity-framework- 6-2-运行时发布/](https://blogs.msdn.microsoft.com/dotnet/2017/10/26/entity-framework-6-2-runtime-released/)

请按照以下步骤操作：

1.  在部署包含新迁移的新程序集之后，将文件 migrate.exe 从“\packages\EntityFramework.6.2.0\tools”复制到目标“bin”文件夹（例如在生产服务器上）
2.  在文件夹中打开命令行并启动以下命令：

> migrate.exe yourMigrationAssembly.dll /startupConfigurationFile=”..\web.config” /scriptFile="migrationOutput.sql"

它将根据尚未应用的迁移生成文件“migrationOutput.sql”，其中包含您必须在目标环境数据库上执行的 SQL。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T17:54:19.147

目前不支持。请为该问题投票：[迁移：-Script for Migrate.exe](http://entityframework.codeplex.com/workitem/251)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-23T18:44:13.463

我遇到了同样的问题，并且确实在**Visual Studio的****包管理器控制台**中提供了该选项。因此，我打开了 powershell 脚本和实体框架 dll 并构建了一个小型可执行文件，以便您**可以从命令行生成脚本**。源代码按原样提供，此处不提供任何保证；

 *****   [**EF6**](http://bloglory.blogspot.com/2014/06/entity-framework-6-script-for.html)
*   [**EF5**](http://bloglory.blogspot.be/2013/10/entity-framework-5-script-for-migrateexe.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-01T18:36:07.100

您可以编写一个简单的 c# 控制台应用程序或使用 Linqpad 之类的东西来使用 Entity Framework Infrastructure 对象生成脚本。您只需要使用 DbMigrationsConfiguration 类加载 DLL 并实例化它。这是类似于对我有用的代码：

```
using System.Data.Entity.Infrastructure;
using System.Data.Entity.Migrations;
using System.Data.Entity.Migrations.Infrastructure;

const string ScriptFile = "Migration.sql";
const string ConnectionString = @"Server=.\SqlExpress;Database=...;Trusted_Connection=True;";
const bool AutomaticMigrationDataLossAllowed = false;

var targetDb = new DbConnectionInfo(ConnectionString, "System.Data.SqlClient");
var config = new MyDbMigrationsConfiguration
{
    AutomaticMigrationDataLossAllowed = AutomaticMigrationDataLossAllowed,
    TargetDatabase = targetDb,
};

var migrator = new DbMigrator(config);
var scripter = new MigratorScriptingDecorator(migrator);
var script = scripter.ScriptUpdate(null, null);

File.WriteAllText(ScriptFile, script);
Console.WriteLine("Migration Script Generated: " + ScriptFile); 
```****

# facebook - facebook 连接重定向 url 突然坏了

> ID：11593529
> 
> 赞同：1
> 
> 时间：2012-07-21T15:38:36.077
> 
> 标签：facebook

在一分钟前成功登录后它重定向到`site.com/home`，但现在链接是`site.com/home?state={long-code}6&code={long_code}`

这很丑陋。有任何想法吗？

**更新**

这是我使用的代码：

```
session_start();

require 'facebook-php-sdk/src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => '***',
  'secret' => '***',
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

$loginUrl   = $facebook->getLoginUrl(
            array(
                'scope'         => 'email,offline_access,publish_stream,user_birthday,user_location,user_work_history,user_about_me,user_hometown',
                'redirect_uri'  => 'site.con/home'
            )
    );

    $logoutUrl  = $facebook->getLogoutUrl();

//session_destroy();

// Show user data
print_r($user_profile); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:57:55.980

更新您正在使用的 sdk 文件。此错误来自此文件`base_facebook.php`，现在已在新文件中纠正。

使用此链接获取最新的 SDK[链接](https://github.com/facebook/php-sdk/tree/master/src)

# c++ - 是否有 C++ CalDav 协议库可以连接到 iCloud//Yahoo

> ID：11593531
> 
> 赞同：4
> 
> 时间：2012-07-21T15:38:47.723
> 
> 标签：c++, icloud, caldav

我已经开始研究需要通过连接到 CalDav 服务器来获取 Icloud 和 Yahoo 日历的 C++ Windows 应用程序。

是否有实现此协议的 C++ 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T20:42:09.383

*是否有实现此协议的 C++ 库？*
总是有一些很好的开源库可以实现像 CalDav 这样的标准化协议。
最好在 FOSS 项目主机上搜索它们（在 Google 的帮助下）。
这里有一些： -

*   [http://libcaldav.sourceforge.net/](http://libcaldav.sourceforge.net/)
*   [http://trac.mulberrymail.com/repos/wiki/icalendar](http://trac.mulberrymail.com/repos/wiki/icalendar)
*   [https://code.google.com/p/kcaldav/](https://code.google.com/p/kcaldav/) <- 未维护但可能有用
*   [http://www.zarafa.com/](http://www.zarafa.com/) <- 您可能想从中提取 CalDav 唯一代码
*   [https://code.google.com/p/openconnector/](https://code.google.com/p/openconnector/) <- 同上

# c++ - 如何存储所有成员都需要访问的数据？

> ID：11593534
> 
> 赞同：0
> 
> 时间：2012-07-21T15:39:28.963
> 
> 标签：c++, visual-studio-2010, oop

我有以下问题（只是学习 OOP 风格的 C++）：我有 3 个类：

1.  应用程序
2.  对象管理器
3.  目的

app 类设置启动变量并创建 objectManager 的实例。它告诉 objectManager 从不同的文件加载值，并预先计算向量中的一些数据，每个对象需要什么。

我的问题如下：**我想为每个对象使用可访问的预先计算的向量**。我不明白我怎么可能从对象中访问这个变量，因为他们对经理的实例一无所知。

我读过关于**单例**的文章，但我不知道应该如何实现它。

我已经阅读了有关**静态数据成员**的信息，但 AFAIK 似乎我仍然必须以某种方式连接到 objectManager 实例，所以它对我没有帮助。

我已经尝试过**全局变量**（我知道......），但最终出现编译错误。

我试图将**静态变量放在 objectManager.h 中的类定义**之外（这是一个全局案例吗？），但结果很奇怪：我可以从包括 objectManager.h 在内的程序的所有部分访问变量，但它的值在不同的类中是不同的/未初始化的。

对象管理器.h

```
#pragma once
#include "Object.h"

static int xxxtest;

class objectManager
{ 
```

对象管理器.cpp

```
xxxtest = 123456;
cout << xxxtest << endl;
-> 123456 
```

在 object.cpp 或 app.cpp 中（之后）

```
cout << xxxtest << endl;
-> 0 
```

你能向我解释这里发生了什么吗？

**您能否向我推荐一种组织此类程序的简单而干净的方法**，同时使程序的其他部分可以访问预先计算的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:49:07.447

静态类变量实际上是解决方案。

类中的静态变量需要在 CPP 文件中声明，紧跟在 include 之后。

标题：

```
class Class {
  static int staticVariable;
  static void staticFunction();
  //...
}; 
```

共产党：

```
int Class::staticVariable = 5; 
```

这样做，所有 Object 实例都可以访问静态变量（如果它是私有的），并且整个 Program 的所有成员都可以通过声明来访问它（如果它是公共的）：

```
int Value = Class::staticVariable; 
```

我希望这有助于阐明一些观点。啊，是的，我使用来自[http://de.wikibooks.org/wiki/C++-Programmierung:_Statische_Elemente_in_Klassen](http://de.wikibooks.org/wiki/C++-Programmierung:_Statische_Elemente_in_Klassen)的代码（页面是德语）作为参考。

回到你的问题，这意味着：

标题：

```
class objectManager {
    static std::vector<double> Precompiled;
}; 
```

共产党：

```
std::vector<double> Precompiled;    //Initialized automatically. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:18:26.033

由于您只打算创建一个`objectManager`，因此它是单例或常规全局的候选对象。作为一个全局的，你可以像这样定义一个头文件：

```
// in object_manager.hpp
class App;
class ObjectManager;
class ObjectManagerImpl;
ObjectManager & objectManager ();
class ObjectManager {
    friend ObjectManager & objectManager ();
    friend class App;
    std::unique_ptr<ObjectManagerImpl> impl_;
    ObjectManager ();
    void read_files (std::string file1, std::string file2);
public:
    std::vector<int> & precomputed ();
    //...
}; 
```

在你的源文件中，你可以有类似的东西：

```
// in object_manager.cpp

class ObjectManagerImpl {
    friend class ObjectManager;
    std::vector<int> precomputed_;
    //...
};

ObjectManager::ObjectManager () : impl_(new ObjectManagerImpl) {}

void ObjectManager::read_files (std::string file1, std::string file2) {
    //...
}

std::vector<int> & ObjectManager::precomputed () {
    return impl_->precomputed_;
}

//...

ObjectManager & objectManager () {
    static ObjectManager instance;
    return instance;
} 
```

现在，在您的源文件中`object`，您将包含 的头文件`objectManager`，并`vector`通过访问器访问 。

```
// in object.cpp

//...
    std::vector<int> &precomputed = objectManager().precomputed(); 
```

# asp.net - ASP.NET 成员部分 - 无法创建和连接到数据库

> ID：11593539
> 
> 赞同：0
> 
> 时间：2012-07-21T15:40:34.183
> 
> 标签：asp.net, webforms, web, connection-string, website-admin-tool

视觉工作室 2010 MSSQL 2005 Windows Vista

我正在使用 webforms 创建一个 ASP.NET 网站，我想使用网站管理工具创建一个成员部分。我正在关注这个 youtube 教程（http://www.youtube.com/watch?v=vxxFhGF-Z7E），但我在 2 分 58 秒进入 vid。

在我创建了用户和角色之后，视频说 ASP.NET 应该在 ASP.NET 的解决方案资源管理器的 APP_Data 部分中自动创建一个包含表的数据库。但是....我的没有创建这个数据库。当我进入网站管理工具中的“提供者”选项卡并测试连接时，我得到一个错误：

无法建立与数据库的连接。如果尚未创建 SQL Server 数据库，请退出网站管理工具，使用 aspnet_regsql 命令行实用程序创建和配置数据库，然后返回此工具设置提供程序。

为此，我在网上查看了很多解决方案，但找不到解决方案。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:18:02.000

你需要做的是运行 aspnet_regsql 你可以在 C:\Windows\Microsoft.NET\Framework\v4.0.30319 下找到

如果您使用的是 .net4

运行向导后，您应该会看到一些表已添加到您的数据库中，这些是您的成员表

运行此之后，您可能需要检查您的连接字符串并确保它是正确的

如果这些都是正确的

运行会员资格时，您应该能够添加用户

谢谢英基

# cocoa - 如何将按钮添加到 NSSplitter 句柄？

> ID：11593541
> 
> 赞同：0
> 
> 时间：2012-07-21T15:40:41.460
> 
> 标签：cocoa

是否可以添加按钮，或者在 NSSplitter 的句柄内绘制？

我不仅想像在 XCode 中那样绘制控件（有关错误处理，请参见第二张图片）；我还想向拆分视图添加功能。例如，在这种情况下，我希望双箭头交换两个视图。

![我的想法的模型](../Images/b08756557ffc351bd2cf5d5eabe6a5ed.png)

![在滚动条中画一条线](../Images/c10b4f3aea9a71c81432a409bc112e68.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:48:51.950

子类化`NSSplitView`和覆盖`drawDividerInRect:`并`dividerThickness`创建您想要的错觉，并`adjustSubviews`重新定位您放置在同一位置的任何自定义可点击视图。

# c++ - 在 Win 7 中从远程进程获取 PEB

> ID：11593549
> 
> 赞同：5
> 
> 时间：2012-07-21T15:41:20.533
> 
> 标签：c++, visual-c++, dll, windows-7, dll-injection

**规格**：Windows 7 x64，Visual C++

**目标**：我正在尝试从示例程序（例如 calc.exe）中获取远程[PEB 。](http://en.wikipedia.org/wiki/Process_Environment_Block)我找到了 proc ID，并且我已经打开了具有所有良好权限的进程句柄。我现在开始编写一个类来使用 PROCESS_BASIC_INFORMATION 从进程中检索 PEB 的位置。

**问题**：我在其他地方发现了几篇帖子，似乎表明*NtQueryInformationProcess*在 MS 变成了垃圾。一篇文章提出了一种从 ntdll.dll 中动态链接 NtQueryInformationProcess 的方法。但是，我认为从长远来看这将是不稳定的（MS 明天可能会删除 NtQueryInformationProcess），而无需进行广泛的错误处理。

这个想法后来在[这个线程](http://www.gamedev.net/topic/582261-problem-using-ntqueryinformationprocess/)中实现，然后 Mike2343 建议应该“使用其他方法”。

**问题**：定位不涉及 NtQueryInformationProcess 的远程进程的 PEB 的另一种方法是什么？

感谢任何花时间看这个的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T23:40:56.473

Method I ended up using:

I stole pretty much [all of this code](http://cboard.cprogramming.com/windows-programming/82906-problem-while-reading-inport-table.html) and fixed it up for 64-bit. I spent a ton of time wrapping my head around [various](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680339(v=vs.85).aspx) documents related to all of the different [headers](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680313(v=vs.85).aspx) and [structs](http://www.csn.ul.ie/~caolan/publink/winresdump/winresdump/doc/pefile2.html). I also ran into an issue regarding the [PE32+ format](https://stackoverflow.com/questions/11712120/reading-explorer-exes-thunk-data), where jcopenha was kind enough to enlighten me on a few problems I might be facing. After accounting for these problems I had a functioning program that is capable of obtaining a list of all the DLL's and their respective functions loaded in by an executable along with their relative addresses.

In retrospect, I don't think I had a good handle on what I was attempting to do. I think that I thought I was going to read in a process out of memory and find the PEB related structs or something (Later I found out that image headers and the like account for the information in the PEB). Albeit that may be possible, but what I have now is an offline example that reads in exe files and works for me.

# oauth - OAuthSerivce 与 James Ferreira 融合表示例

> ID：11593553
> 
> 赞同：1
> 
> 时间：2012-07-21T15:41:52.637
> 
> 标签：oauth, google-apps-script

我正忙于实施 James Ferreira 的 Fusion Table 示例，该示例来自他的优秀著作《Google Script》。但是，从那时起，Google Apps 脚本已更新为包含可共享库，并且 James 还在 googlescriptexamples.com 上创建了一个可共享的融合表库。

我能够轻松地将库添加到我的项目中，并且自动完成功能可以识别“searchFusion”调用，但是当我尝试部署和运行时，我得到“您无权访问脚本使用的库 OAuthService，或者它已被删除。”

关于如何获得授权的任何想法？我已经创建了所需的 Fusion Table，并根据需要将 FUSION_ID 作为项目属性包含在内...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:18:59.420

您是否安装了[OAuthApp 库](https://sites.google.com/site/scriptsexamples/custom-methods/google-oauth)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:29:26.747

如果您将脚本中的 OAuthService（自动完成部分）更改为 +james ferreira 在他的库中使用的内容，那么它可能会正常工作。我有一个类似的案例，将 Objapp 更改为 ObjApp。

# python - django createsuperuser 不工作

> ID：11593556
> 
> 赞同：8
> 
> 时间：2012-07-21T15:42:18.507
> 
> 标签：python, django, eclipse

# .bash_profile

```
export PATH="/Applications/MAMP/bin:/usr/local/bin:/usr/local/sbin:usr/local/$
export DYLD_LIBRARY_PATH="/usr/local/mysql/lib:$DYLD_LIBRARY_PATH"

export LANG="en_US.UTF-8" 
```

# 。轮廓

```
export PATH="/Applications/MAMP/bin:/usr/local/bin:/usr/local/sbin:usr/local/my$
export DYLD_LIBRARY_PATH="/usr/local/mysql/lib:$DYLD_LIBRARY_PATH"
export LANG="en_US.UTF-8" 
```

# 错误

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Library/Python/2.6/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Library/Python/2.6/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Python/2.6/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Library/Python/2.6/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Library/Python/2.6/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 70, in handle
    default_username = get_default_username()
  File "/Library/Python/2.6/site-packages/django/contrib/auth/management/__init__.py", line 105, in get_default_username
    default_username = get_system_username()
  File "/Library/Python/2.6/site-packages/django/contrib/auth/management/__init__.py", line 85, in get_system_username
    return getpass.getuser().decode(locale.getdefaultlocale()[1])
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/locale.py", line 459, in getdefaultlocale
    return _parse_localename(localename)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/locale.py", line 391, in _parse_localename
    raise ValueError, 'unknown locale: %s' % localename
ValueError: unknown locale: UTF-8 
```

# 怀疑

我也将我的 LANG 更改为 UTF-8，但我仍然无法解决问题，请帮忙

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-21T16:22:15.833

您看到这个是因为您的系统上没有设置语言环境。您需要设置它才能创建超级用户，它已经为人所知并报告了“错误”。

见： [https ://code.djangoproject.com/ticket/17649](https://code.djangoproject.com/ticket/17649)

假设您使用的是 linux，您可以使用以下方法修复该错误

```
export LANG="en_US.UTF-8" 
```

您在终端中使用它，但您可以轻松检查并查看如何更改系统上的语言环境，只需使用谷歌搜索即可。

如果您正在使用：

Ubuntu - [https://help.ubuntu.com/community/Locale/](https://help.ubuntu.com/community/Locale/)

Archlinux - [https://wiki.archlinux.org/index.php/Locale](https://wiki.archlinux.org/index.php/Locale)

...

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-11T13:26:57.883

The accepted answer didn't work for me, so I keep searching around and found [this](https://stackoverflow.com/a/10894385/359248). It works for me. For sake of time saving I copy paste the two lines here. Enter this in terminal:

```
$ LC_CTYPE=en_US.UTF-8
$ LC_ALL=en_US.UTF-8 
```

Note: I use Mac OS 10.7 if that's relevant. Setting locale in system preference didn't work for me either.

# css - 我的页脚出现 CSS 底部对齐问题

> ID：11593560
> 
> 赞同：0
> 
> 时间：2012-07-21T15:43:10.380
> 
> 标签：css, html, alignment

我的[网站页脚出现一些问题](http://goo.gl/Pluy2)

我希望 facebook like 按钮、twitter 按钮和语言选择器都对齐在同一级别（即，距页面底部几 px）。目前，正如您在图片中看到的，所有这 3 个元素都有不同的垂直对齐方式。你能帮我识别和解决这个问题吗？

![底部对齐问题](../Images/811436b007e0a2417740b08773f25b48.png)

HTML 代码：

```
<div id="footer">
<div id="social"><div class="fb-like" data-href="http://www.gregsitedfds.com" data-send="false" data-layout="button_count" data-width="106" data-show-faces="false" data-font="verdana"></div><a href="https://twitter.com/share" class="twitter-share-button" data-lang="msa">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
    <span class="languageselector"><a href="fr/" title="Version Française">FR</a> | <a href="en/" title="English Version">EN</a> | <a href="index.htm" title="Norway Version">NO</a></span></div> 
```

CSS代码：

```
#footer
{
    position:fixed;
    bottom:0;
    color:#333;
    left:0;
    z-index:999;
    width:96%;
    text-align:right;
    padding:30px 2%;
}

#social
{
    position:absolute;
    vertical-align:middle;
    left:2%;
    color:#333;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:46:12.560

你需要有：

```
.fb_iframe_widget, 
iframe.twitter-share-button {
    display: inline-block;
    vertical-align: middle;
} 
```

通过开发人员工具添加`vertical-align: middle;`解决了我的问题（`display: inline-block;`已经存在）。

为了也对齐语言菜单，您需要

```
span.languageselector {
    display: inline-block;
    height: 20px; /* same height as #social div */
    line-height: 20px; /* same as height */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:18:07.177

使用 Safari 或 Chrome，您可以按 Cmd + Opt + I 调出 Web Inspector（又名开发者工具）。在元素选项卡下，您会找到放大镜图标，它是元素选择器。

使用元素选择器将鼠标悬停在元素上并单击以检查它们。

有了这个，您将看到每个按钮的最顶层或父元素具有以下类（以及其他类）：

`.fb-like`

和

`.twitter-share-button`

您现在可以为这些类编写 CSS 代码，并使用边距、填充或位置属性来调整按钮之一的位置，以使它们对齐。

会有很多方法来做到这一点。我能够通过选择`.fb-like`和使用来对齐它们`top: -7px`，但这可能不是最有说服力的解决方案。

您可以在检查器的右侧面板中对选定元素进行 CSS 更改，并查看这些更改实时反映在页面上。然后，您可以将相同的 CSS 代码复制到您网站的 CSS 中。

# database - Riak 上的读取操作成本高吗？

> ID：11593563
> 
> 赞同：1
> 
> 时间：2012-07-21T15:43:33.840
> 
> 标签：database, nosql, riak

看着 Basho Vimeo 谈论 Voxer，Matt 说“读取操作真的很昂贵”。

当发生读取时，Riak 使用某种 Quorum 来选择哪个节点将提供数据？

Riak 是无主的，所以每个节点都应该包含相同的数据，不是吗？（显然在来自最终一致性的不一致窗口之后）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T20:40:08.600

你有点不明白他在说什么；他说的是旋转磁盘和读取磁盘的费用。这不是 Riak 特定的问题。

他们有大量无法放入内存的数据。它甚至太大而无法轻松使用 SSD，因为它们无法在当前大小限制下将足够多的 SSD 塞入服务器（这就是为什么他们*从*SSD 转移到旋转磁盘上，正如他在演讲中所说的那样）。

如果你没有使用内存数据库（Riak 不是，除非你使用的是内存后端），正如 Matt 在他演讲的那部分所述，你只是受限于你的 iops 数量如果您必须从磁盘读取，磁盘可以给您。没有办法解决这个问题。你正在从磁盘读取。他接着说，你想缓存所有你能提供帮助的东西。

无论您在访问磁盘时使用的是什么数据库平台，它几乎都是这样工作的；没有免费午餐:)

如果您使用 Riak 并且您的数据集超过了可用内存量，那么当出现“缓存未命中”时，您将不得不从磁盘读取。如果您使用默认的 Bitcask 后端，Riak 依赖于底层操作系统的磁盘缓存 - 其他后端可能会也可能不会这样做，而是执行自己的内存缓存。

至于您关于节点数据的问题...... Riak 是无主的，最初基于 Amazon Dynamo 论文。我们使用一致的散列在环周围分布数据，然后将副本写入相邻节点，由您配置的“N 值”控制（这可以基于每个存储桶甚至每个请求进行配置）。当您阅读时，使用相同的散列方法来查找数据“存在”在哪个节点上。

默认情况下，读取将从 (n_val/2) + 1 个节点读取，但您可以根据每个请求对其进行调整以满足您的需求。在最终一致性的情况下，无法保证这些节点上的数据在您读取的时间点上是相同的，您可能需要根据您的业务逻辑执行冲突解决。话虽如此，请理解在正常操作下，不一致的时间以毫秒为单位（例如，您没有网络分区或从停机中恢复的节点）。

我们的网站上有*大量*关于这些东西的信息，并且非常努力地整理这些信息，以便于查找。特别是，您可能希望查看[Riak - 集群](http://wiki.basho.com/Concepts.html#Clustering)以了解数据的分布方式。

# ruby - 在 gem --version 之后运行时获取“不是 Gem::Specification（而不是 NilClass）”

> ID：11593567
> 
> 赞同：8
> 
> 时间：2012-07-21T15:44:10.660
> 
> 标签：ruby, rubygems

```
$ gem --version

[/home/rohit/.rvm/gems/ruby-1.9.3-p125@qnrDashboard/specifications/net-ssh-2.5.2.gemspec] isn't a Gem::Specification (NilClass instead).
[/home/rohit/.rvm/gems/ruby-1.9.3-p125@qnrDashboard/specifications/net-sftp-2.0.5.gemspec] isn't a Gem::Specification (NilClass instead).
[/home/rohit/.rvm/gems/ruby-1.9.3-p125@qnrDashboard/specifications/net-ssh-gateway-1.1.0.gemspec] isn't a Gem::Specification (NilClass instead).
[/home/rohit/.rvm/gems/ruby-1.9.3-p125@qnrDashboard/specifications/net-scp-1.0.4.gemspec] isn't a Gem::Specification (NilClass instead). 
```

使用 RVM 1.12.3、RubyGems 1.8.22 和 Ruby 1.9.3。

为什么我收到此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T05:33:10.783

I had the same problem. the problem i think is with cache of the gems. try the steps in this [link](https://stackoverflow.com/questions/3999683/error-installing-gems) might solve the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T11:06:55.640

在窗户上，

```
cd C:\Ruby193\lib\ruby\gems\1.9.1\gems
rm -rf ./*
cd ..\specifications
rm -rf /* 
```

那么最后，

```
gem install rails 
```

在 Windows 确定存在错误并以漂亮的蓝屏重新启动后，此问题开始发生。

# firefox - Firefox 中的 UTF-8 问题 - 响应标头覆盖元标记？

> ID：11593568
> 
> 赞同：3
> 
> 时间：2012-07-21T15:44:13.560
> 
> 标签：firefox, utf-8, character-encoding, http-headers, meta-tags

我有一个带有以下元标记的页面：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

我认为这会将默认字符集设置为 UTF-8，实际上它出现在 Chrome 和 Safari 中，但在 Firefox 中却没有。

我在页面上有一个 PHP 脚本，它为 jPlayer 生成音频文件的播放列表，并且带有重音符号的文件名在 Firefox 中不起作用/播放。

这是我在 Firebug 控制台中看到的错误消息：

![在此处输入图像描述](../Images/16400e24d0daff2f531dfeeb0ca7ad8f.png)

如您所见，文件名中的字符没有被正确读取。文件名应为“Guessi-Guéré-Guessi (Pop Bariba)”

然后，当我查找有关错误的更多详细信息时，在“标题”选项卡下，我看到了：

![在此处输入图像描述](../Images/51ba5c57f26807eebb65173716953eb1.png)

这表明字符集是 iso-8859-1。然后在“响应”选项卡中，我看到：

![在此处输入图像描述](../Images/d8f8772a3cdf0adfb7598923e6c296a3.png)

这确认了错误，但这次显示了正确的编码。该文件肯定存在，正如我所说，它在其他浏览器中播放/工作。

所以我假设问题与在 Firefox 中设置不同的响应标头有关，并覆盖元标记。我检查了 Chrome 中的响应标头，它们确实设置为 UTF-8。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:33:21.303

URL 别名[http://monthlymixup.com/mixups/july_2012/media/nick/Guessi-Gu%C3%A9r%C3%A9-Guessi%20%28Pop%20Bariba%29.mp3](http://monthlymixup.com/mixups/july_2012/media/nick/Guessi-Gu%C3%A9r%C3%A9-Guessi%20%28Pop%20Bariba%29.mp3)在 Firefox 上也可以正常工作。所以问题出现在链接页面上。可以使用以下测试页面重现该问题：

```
<!doctype html>
<title></title>
<meta charset=iso-8859-1>
<a href=
"http://monthlymixup.com/mixups/july_2012/media/nick/Guessi-Gu%e9r%e9-Guessi%20%28Pop%20Bariba%29.mp3"
>link</a> 
```

因此，问题出在生成链接页面的 PHP 代码中。`%e9`它似乎使用基于 ISO-8859-1 的编码而不是正确的基于 UTF-8 的编码自行对字母“é”进行编码。

确保正确生成链接页面，使用字母“é”而不是任何 % 编码形式*或*基于 UTF-8 的编码`%C3%A9`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:52:05.340

事实证明，jPlayer 中的 Flash 后备存在问题。Firefox 使用 Flash 播放 mp3。

这是 jPlayer 开发人员的修复：

在将 url 传递给 setMedia 之前，使用 encodeURI(url) JavaScript 命令在 JavaScript 中对 URL 进行编码。例如：

```
$ ("#id").jPlayer("setMedia", {
   mp3: encodeURI("http://domain.com/audio/大地書房.mp3")
}); 
```

# bash - 如何使用 grep 或 awk 从文件中提取特定块

> ID：11593569
> 
> 赞同：1
> 
> 时间：2012-07-21T15:44:22.623
> 
> 标签：bash, sed, awk, grep

我在日志文件中有一个示例数据

> 节点 ID> command1
> 
> Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat。Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat。
> 
> 节点 ID> 命令 2
> 
> Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat。Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat。
> 
> 节点 ID> command3
> 
> Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat。Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat。

我有一个由顺序命令生成的文件。我不确定如何从日志文件中提取数据

假设我是否需要从文件中提取数据

> 节点 ID> command1
> 
> Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat。Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat。

最好的方法是什么？我的大部分脚本都是用 shell 脚本编写的，我可以使用 awk 或 sed。请建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:51:15.907

```
perl -ne 'sub BEGIN { $/="NODE-ID> "; } { if (/^command1/) { s:$/$::; print "$/$_"; }}' 
```

不是 sed/awk，但是……它有效。

这*是*awk：

```
awk 'BEGIN { RS="NODE-ID> "; } /^command1/ { print RS $0; }' 
```

受 CodeGnome 的启发，我添加了一个 sed 选项：

```
sed -n '/^NODE-ID> command1/,/^NODE-ID> / { /^NODE-ID> command1/ { p; d; }; /^NODE-ID> /q; p }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:15:11.647

### Sed 解决方案

当然可以用 sed 做到这一点。例如，此命令返回后续输出：

```
$ sed -n '/command1/,/command2/ { /command2/q; p }' /tmp/foo 
```

> 节点 ID> command1
> 
> Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat。Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:07:45.150

如果您的记录的最后一行有一些独特的东西，例如示例数据中的字符串“consequat”，这个*简单的* `awk`命令将起作用：

```
awk '/command2/,/consequat/ {print $0}' data.txt 
```

或者，如果记录的长度相同，那么这将起作用：

```
awk '/command2/{st=NR;for(i=st;i<=st+6;i++){print $0;getline}}' data.txt 
```

在此示例中，它将提取以开头的块`command2`并抓取接下来的 6 行（与提供的示例数据集/格式一起使用）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T07:03:34.987

这可能对您有用（GNU sed）：

```
sed '/NODE-ID> command1/!d;n;n;:a;/./!Q;n;ba' file 
```

或者：

```
sed '/NODE-ID> command1/!d;n;n;q' file 
```

如果该命令仅包含一行文本（根据您的示例）。

# c# - c# 在窗口模式下启动新进程

> ID：11593572
> 
> 赞同：3
> 
> 时间：2012-07-21T15:44:43.733
> 
> 标签：c#, process, console

我的 C# 应用程序使用控制台应用程序启动进程。

该进程正在正确启动，并且在任务管理器中可见，但该进程在没有窗口的情况下运行。

如何使用自己的窗口运行控制台应用程序？

我的代码：

```
 p_info.UseShellExecute = true;
 p_info.CreateNoWindow = false;
 p_info.WindowStyle = ProcessWindowStyle.Normal;
 Process.Start(p_info); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T16:15:51.177

这里是从另一个应用程序启动可见控制台应用程序的示例

```
 ProcessStartInfo p_info = new ProcessStartInfo();
        p_info.UseShellExecute = true;
        p_info.CreateNoWindow = false;
        p_info.WindowStyle = ProcessWindowStyle.Normal;
        p_info.FileName = @"archi\ConsoleApplicationtest\ConsoleApplicationtest\bin\Debug\ConsoleApplicationtest.exe";
        Process.Start(p_info); 
```

最良好的问候

# android - 将自定义对象添加到 ArrayAdapter。如何抓取数据？

> ID：11593574
> 
> 赞同：2
> 
> 时间：2012-07-21T15:45:51.593
> 
> 标签：android, list, object, android-arrayadapter

这是我到目前为止所拥有的：

自定义对象：

```
class ItemObject {
    List<String> name;
    List<String> total;
    List<String> rating;

public ItemObject(List<ItemObject> io) {
    this.total = total;
    this.name = name;
    this.rating = rating;
 }
} 
```

对适配器的调用：

```
List<String> names, ratings, totals;

ItemObject[] io= new ItemObject[3];
io[0] = new ItemObject(names);
io[1] = new ItemObject(rating);
io[2] = new ItemObject(totals);

adapter = new ItemAdapter(Items.this, io);
setListAdapter(adapter); 
```

假设上面看起来没问题，我的问题是我将如何设置 ItemAdapter，它是构造函数，并从对象中解开三个 List。然后，在 getView 中，分配这些东西：

每个匹配的位置：

```
 TextView t1 = (TextView) rowView.findViewById(R.id.itemName);
    TextView t2 = (TextView) rowView.findViewById(R.id.itemTotal);
    RatingBar r1 = (RatingBar) rowView.findViewById(R.id.ratingBarSmall); 
```

例如，数组“names”中的位置 0 到 t1。将数组“totals”中的 0 定位到 t1。将数组“评级”中的 0 定位到 r1。

编辑：我不希望有人写整个适配器。我只需要知道如何从自定义对象中解开列表，以便我可以使用数据。（*在另一个问题中甚至没有提出或询问的东西*）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-21T16:09:58.707

您的代码不会以其实际形式工作。你真的需要数据列表`ItemObject`吗？我的猜测是否定的，您只需要一个`ItemObject`包含与行布局中的 3 个视图相对应的 3 个字符串。如果是这种情况：

```
class ItemObject {
    String name;
    String total;
    String rating;// are you sure this isn't a float

public ItemObject(String total, String name, String rating) {
    this.total = total;
    this.name = name;
    this.rating = rating;
 }
} 
```

然后您的列表将合并到以下列表中`ItemObject`：

```
List<String> names, ratings, totals;
ItemObject[] io= new ItemObject[3];
// use a for loop
io[0] = new ItemObject(totals.get(0), names.get(0), ratings(0));
io[1] = new ItemObject(totals.get(1), names.get(1), ratings(1));
io[2] = new ItemObject(totals.get(2), names.get(2), ratings(2));
adapter = new ItemAdapter(Items.this, io);
setListAdapter(adapter); 
```

和适配器类：

```
public class ItemAdapter extends ArrayAdapter<ItemObject> {

        public ItemAdapter(Context context,
                ItemObject[] objects) {
            super(context, 0, objects);         
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // do the normal stuff
            ItemObject obj = getItem(position);
            // set the text obtained from obj
                    String name = obj.name; //etc       
                    // ...

        }       

} 
```

# ruby-on-rails - 如何包含捆绑在 gem 文件中的资源（js/css）？

> ID：11593576
> 
> 赞同：2
> 
> 时间：2012-07-21T15:45:58.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我很困惑...

我安装了一个新的 gem 文件，它打包了一堆 js ( [rails-fullcalendar](https://github.com/bokmann/fullcalendar-rails) )。

我现在想使用这个宝石。所以我加了一些

```
<div id='calendar'></div> 
```

我在我的应用程序中使用了一些 js

```
$('#calendar').fullCalendar(); 
```

问题是，它不起作用，因为我没有正确的 js 文件。我在我的布局中添加了 js 包含，如下所示：

```
<%= javascript_include_tag "fullcalendar.js" %> 
```

但这没什么意义。我的资产中没有 fullcalendar.js，因此浏览器抱怨缺少 js 文件。gem文件中的这些js在哪里？如何从这个 gem 文件中包含 js？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:42:12.870

对于初学者来说，这并不明显。甚至不确定这是最好的答案。

首先，在您的***application.js***中添加来自 gem 的 js：

```
= require fullcalendar 
```

然后，在***aplication.css***中添加来自 gem 的 css，如下所示：

```
*= require fullcalendar
*= require fullcalendar.print 
```

当您启动服务器时，此文件会自动生成 CSS。所以不要忘记***重新启动服务器***（我不知道我必须这样做，所以我多次诅咒我的电脑）。

生活再一次精彩！

# c# - 正则表达式 - 订购多行 SQL 字符串

> ID：11593577
> 
> 赞同：2
> 
> 时间：2012-07-21T15:46:10.440
> 
> 标签：c#, regex

给定一个字符串，例如：

```
CREATE TABLE [dbo].[Table1] (
    [Id] [int] NOT NULL,
    [Title] [nvarchar](255) NULL
)

ALTER TABLE [dbo].[Table1] ADD
    CONSTRAINT [PK_Table1] PRIMARY KEY CLUSTERED ([Id])

INSERT INTO [dbo].[Table1] ([Id], [Title]) VALUES ('Home', NULL)

CREATE TABLE [dbo].[Table2] (
    [Id] [int] NOT NULL,
    [Title] [nvarchar](255) NULL
)

... 
```

我将如何对语句进行排序，以便 CREATE TABLE 位位于顶部。我猜我必须使用正则表达式，但我不确定我从那里去哪里。

我会很感激帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:08:26.673

享受 LINQ 的乐趣。

```
var sql = @"CREATE TABLE [dbo].[Table1] (
            [Id] [int] NOT NULL,
            [Title] [nvarchar](255) NULL
        )

        ALTER TABLE [dbo].[Table1] ADD
            CONSTRAINT [PK_Table1] PRIMARY KEY CLUSTERED ([Id])

        INSERT INTO [dbo].[Table1] ([Id], [Title]) VALUES ('Home', NULL)

        CREATE TABLE [dbo].[Table2] (
            [Id] [int] NOT NULL,
            [Title] [nvarchar](255) NULL
        )
        ";
var statementOrder = new[] { "CREATE", "ALTER", "INSERT" };
var statements = from statement in Regex.Split(sql, "\n\r")
              let trimStatement = statement.Trim()
              let statementType = trimStatement.Substring(0, trimStatement.IndexOf(' '))
              orderby Array.IndexOf(statementOrder, statementType)
              select trimStatement;
var newSql = String.Join("\n\r", statements.ToArray()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:18:53.243

创建一个`StringBuilder`

使用`REGEX`

*   提取`TABLE`查询并附加到`StringBuilder`
*   提取`INSERT`查询并附加到`StringBuilder`
*   提取`ALTER`查询并附加到`StringBuilder`

例如，您可以`Create`使用以下正则表达式提取查询：

```
Regex r = new Regex(@"CREATE .*?(?=(ALTER|INSERT|\z))", RegexOptions.Singleline|RegexOptions.IgnoreCase);
r.Match("CREATE TABLE [dbo]............"); 
```

同样，您只需替换上述正则表达式中的, ,词即可提取`ALTER`,查询。`INSERT``ALTER``INSERT``CREATE`

# asp.net-mvc - Autofac 可以将依赖项注入到布局视图文件中吗？

> ID：11593580
> 
> 赞同：17
> 
> 时间：2012-07-21T15:46:22.750
> 
> 标签：asp.net-mvc, dependency-injection, asp.net-mvc-4, autofac

我正在尝试将依赖项注入到共享布局视图页面中，以避免在使用该布局的每个视图中都必须这样做。

我已按照 wiki 中的[指导](http://code.google.com/p/autofac/wiki/Mvc3Integration#View_Page_Injection)将依赖项注入视图，但该属性始终为空。

Autofac 可以将属性注入到作为布局文件的自定义视图页面中吗？

这是我的设置。自定义视图页面

```
namespace MyApp
{
    using System.Web.Mvc;

    public abstract class CustomViewPage : WebViewPage
    {
        public IHelper Helper { get; set; }
    }
} 
```

~/Views/Shared/_Layout.cshtml

```
@inherits MyApp.CustomViewPage
<!DOCTYPE html>
<html>
...
@if(this.Helper.HasFoo()){@Html.ActionLink("Bar")} 
```

全球注册...

```
builder.RegisterType<Helper>().AsImplementedInterfaces();
builder.RegisterModelBinderProvider();
builder.RegisterFilterProvider();
builder.RegisterModule(new AutofacWebTypesModule());
builder.RegisterSource(new ViewRegistrationSource());
var container = builder.Build();
DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

使用布局的“子”视图不是从 CustomViewPage 派生的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-10-06T19:59:15.467

大多数解决方案将只是 DependencyResolver.Current.GetService 调用的包装器，因此直接从布局调用它可能更容易：

```
@{
    var helper = DependencyResolver.Current.GetService<IHelper>();
}
...
@if (helper.HasFoo()) { @Html.ActionLink("Bar") }
... 
```

这种方式也有助于使页面模型更加 SRP，因为可以避免混合服务例程/模型和业务例程/模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T01:20:47.520

这是一个适用于大多数 DI 框架的小工作。

首先稍微调整一下CustomPageView：

```
public abstract class CustomViewPage : WebViewPage
{
    public IHelper Helper { 
        get { return ViewData[Helper.ViewDataKey] as IHelper; }    
    }

} 
```

现在需要将依赖关系引入您的 ViewData，引入一个属性来执行此操作：

```
public sealed class HelperAttribute : ActionFilterAttribute
{
    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        var viewResult = filterContext.Result as ViewResult;
        if (viewResult != null)
            viewResult.ViewData.Add(Helper.ViewDataKey, GetHelperFromIoC());

        base.OnResultExecuting(filterContext);
    }
} 
```

在您的操作方法或控制器上：

```
[Helper]
public ActionResult Index()
{
    return View();
} 
```

在您看来，您现在应该能够按预期使用您的 Helper：

```
 @Helper.HelloWorld() 
```

有关原始帖子，请参阅[此博客](http://blog.greatrexpectations.com/2012/12/11/keeping-mvc-views-tidy-with-a-base-class/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-12T13:46:24.897

只需创建部分页面并将其插入布局页面：

```
@Html.Partial("_MyPartialPage"); 
```

依赖项被注入到部分页面中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T14:33:36.947

不仅使用 AutoFac，基本上您无法在布局中实现 DI。您可能需要对 IOC 容器的引用`CustomViewPage`来解决依赖关系。

除非**真的需要**，否则在视图中避免 DI（只是我的观点）。

从我的角度来看，我没有看到太多好处。我认为您不会为基本视图页面类编写单元测试吗？除非有任何特殊原因，否则请避免。与其依赖于容器，不如依赖于具体的实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-25T13:35:28.590

对于没有参数的结果，您不需要扩展您的 WebViewPage 以将数据传递到。我会这样解决它： 1\. 声明一个派生自 ActionFilter 的类 HelperActionFilter，通过属性[http://docs.autofac.org/en/latest/integration/mvc.html](http://docs.autofac.org/en/latest/integration/mvc.html)向它注入您的服务 2\. 在 HelperActionFilter.OnActionExecuting 设置中ViewBag.HasFoo 在布局中检查它。

# asp.net - 图像单选按钮 - NFL 周刊

> ID：11593582
> 
> 赞同：0
> 
> 时间：2012-07-21T15:46:31.737
> 
> 标签：asp.net, css, image, radio-button

我选择使用此代码来构建每周 NFL 选秀的应用程序。任何人都可以帮助我隐藏通用单选按钮吗？我想收集每个人的所有选秀权。

HTML

```
 <div class="buttons" runat="server">
    <input type="radio" name="gp1" id="gpBAL" value="working" />
        <label for="gpBAL" class="working"><span>BAL</span></label>

    <input type="radio" name="gp1" id="gpNC" value="not checked" checked/>
        <label for="gpNC" class="not_checked"><span>&nbsp;||</span></label>

    <input type="radio" name="gp1" id="gpWAS" value="faulty" />
        <label for="gpWAS" class="faulty"><span>WAS</span></label>
</div> 
```

CSS

```
 body{font-family: helvetica;}
  input[type="radio"]{ -webkit-appearance:none;}
  input[type="radio"]+label
  { 
   background: url('../images/switch.png') repeat-x; 
   float: left;
   display:Block;
  } 
  input[type="radio"] + label span
  {
   display: block;
   background: url('../images/switch.png') no-repeat;
   display: block;
   line-height: 30px;
  }
  input[type="radio"]+label.working span
  {
   background-position: left -90px; padding: 0 10px; 
  }
  input[type="radio"]+label.not_checked span
  {
   padding: 0 10px; 
  }
  input[type="radio"]+label.faulty span
  {
  background-position: right -180px; padding: 0 10px; 
  }
  input[type="radio"]:checked+label
  {
  background-position: left -60px;
  }  
  input[type="radio"]:checked+label.working span
  {
  background-position: left -150px;
  color: white;
  }
  input[type="radio"]:checked+label.faulty span
  {
    background-position: right -240px;
    color: white;
  }

  input[type="radio"]:checked+label.not_checked
  {
    background-position: left -30px;
    color: white;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:57:13.390

```
input[type="radio"] {display: none;} 
```

隐藏单选按钮。

# svn - 检查用户的颠覆可写访问权限

> ID：11593587
> 
> 赞同：0
> 
> 时间：2012-07-21T15:47:36.027
> 
> 标签：svn, version-control, permissions, repository

有什么方法可以检查用户是否对某些存储库路径具有可写访问权限？我现在要做的是尝试创建目录，然后将其删除以检查用户是否具有可写访问权限：

```
svn mkdir --username username --password password --message "check whether user username has repository writable access" "svn://localhost:3129/test"
svn delete --username username --password password --message "check whether user username has repository writable access" "svn://localhost:3129/test" 
```

问题是这些操作作为应用程序源代码的一部分执行得太频繁了。因此，如果用户具有可写访问权限，存储库会获得太多不必要的提交。

是否有任何类似于`svn checkaccess --username username --password password svn://localhost:3129/test`或任何其他解决方法的命令，以便我不需要一直创建临时目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:20:05.347

我可以提出一种 hacky 方式，但我不确定它是否适用于所有协议（我用 DAV 测试过——它有效，使用 file:/// 所有路径都是可写的）。

Subversion 有几个 API。某些语言（至少 C (libsvn_ra)、Java ( [SVNKit](http://svnkit.com) )、Perl ( [AlienSVN](http://search.cpan.org/~mlanier/Alien-SVN-1.6.12.0/) )）提供远程 API，允许使用编辑器调用创建提交（我不知道 PHP 是否这样做）。如果您对要检查可写性的 URL 执行以下调用：

```
openRoot -1
changeDirProperty customPropertyName custromPropertyValue
closeDir
abortEdit 
```

如果目录可写，则此序列不会因为 abortEdit() 调用而执行任何更改。但对于 DAV，如果不可写，此操作将失败并显示错误代码 RA_NOT_AUTHORIZED (E170001)。

有[一篇文章](http://vcs.atspace.co.uk/2012/07/20/subversion-remote-api-committing-without-working-copy/)展示了如何在 Java 中将提交与 SVN 远程 API 一起使用。我认为 PHP 代码看起来很相似。

希望它有所帮助（如果不是你，那么至少是 Java/C/Perl 开发人员）。

# c# - 使用 AsyncFileUpload 控件裁剪图像的代码

> ID：11593590
> 
> 赞同：2
> 
> 时间：2012-07-21T15:48:09.800
> 
> 标签：c#, asp.net, sql-server-2008

我正在使用 AsyncFileUpload 工具在注册表单中上传图像。但是，我有一个问题，如果有人尝试上传大于 30kb 的照片，数据库的大小可能会增加。所以我想为用户提供使用 AsyncFileUpload 控件上传他们的大照片并提供裁剪机制的规定。如果有人知道这个想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:01:49.217

1.  您可以将图像调整为可以存储的大小。
2.  将文件名更改为`Guid.NewGuid().ToString()`.
3.  将该 guid 存储在用户图像的数据库中。

您将通过这种方式节省数据库空间，并且调整图像大小可以让您控制可接受的范围。如果他们“裁剪”到最大尺寸，那么您可能会拥有巨大的文件。

# regex - 将 Android 正则表达式移植到 BlackBerry 正则表达式不起作用

> ID：11593594
> 
> 赞同：2
> 
> 时间：2012-07-21T15:48:29.547
> 
> 标签：regex, blackberry, java-me

我在 Android 中使用此代码来验证密码。但是现在想在BB中使用这个表达式。但它不起作用并给出异常

**这是安卓代码**

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public static boolean isUserPassValid(String userPass) {

        boolean isValid = false;
        try {
            String expression = "^.*(?=.{5,30})(?=.*\\d)(?=.*[a-zA-z]).*";
            CharSequence inputStr = userPass;

            Pattern pattern = Pattern.compile(expression,
                    Pattern.CASE_INSENSITIVE);
            Matcher matcher = pattern.matcher(inputStr);
            if (matcher.matches()) {
                isValid = true;
            }
        } catch (Exception e) {
            Log.e(TAG, "isUserPassValid Message = " + e.toString());
            e.printStackTrace();
        }
        return isValid;
    } 
```

**这是我现在尝试在 Java 中验证的 BB 代码**

```
import com.sun.org.apache.regexp.internal.RE;

public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        isValidPassword("Arsla");

    }

    public static boolean isValidPassword(String text) {
        System.out.println(" password for varefication is : " + text);
        boolean isValid = false;
        String expression = "^.*(?=.{5,30})(?=.*\\d)(?=.*[a-zA-z]).*$";
        String username = text;
        RE regx = new RE(expression);
        try {
            isValid = regx.match(username);
            System.out.println("password msps to the re " + isValid);

        } catch (Exception e) {

        }
        return isValid;
    }

} 
```

**这是例外**

```
Exception in thread "main" com.sun.org.apache.regexp.internal.RESyntaxException: Syntax error: Missing operand to closure
    at com.sun.org.apache.regexp.internal.RECompiler.syntaxError(Unknown Source)
    at com.sun.org.apache.regexp.internal.RECompiler.terminal(Unknown Source)
    at com.sun.org.apache.regexp.internal.RECompiler.closure(Unknown Source)
    at com.sun.org.apache.regexp.internal.RECompiler.branch(Unknown Source)
    at com.sun.org.apache.regexp.internal.RECompiler.expr(Unknown Source)
    at com.sun.org.apache.regexp.internal.RECompiler.terminal(Unknown Source)
    at com.sun.org.apache.regexp.internal.RECompiler.closure(Unknown Source)
    at com.sun.org.apache.regexp.internal.RECompiler.branch(Unknown Source)
    at com.sun.org.apache.regexp.internal.RECompiler.expr(Unknown Source)
    at com.sun.org.apache.regexp.internal.RECompiler.compile(Unknown Source)
    at com.sun.org.apache.regexp.internal.RE.<init>(Unknown Source)
    at com.sun.org.apache.regexp.internal.RE.<init>(Unknown Source)
    at Test.isValidPassword(Test.java:19)
    at Test.main(Test.java:10) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T16:25:34.023

也许 BB 正则表达式实现不支持环顾四周。

尝试在 android 和 blackberry 上执行一个简单的环视示例，看看它是否有效。例如

```
String expression = "A(?=B)"; // only matches B if it follows an A 
```

# asp.net - 有没有办法在 Web Api 控制器中处理表单发布数据？

> ID：11593595
> 
> 赞同：27
> 
> 时间：2012-07-21T15:48:44.590
> 
> 标签：asp.net, asp.net-web-api

在`ASP.NET MVC`中，可以访问表单发布数据：

```
var thisData = Request.Form["this.data"]; 
```

`Web API` [是否可以在ApiController](http://msdn.microsoft.com/en-us/library/system.web.http.apicontroller%28v=vs.108%29.aspx)中实现相同的功能？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-21T18:16:18.377

ASP.NET Web API 在处理不同的 HTTP 场景（尤其是流式传输）方面变得更加健壮。因此，只有媒体类型格式化程序通常会接触内容并且必须使内容保持一致。

在 ASP.NET MVC 中，`application/x-www-form-urlencoded`内容类型是一等公民（并且特别对待，因为这是 95% 的 POST 请求的内容类型）并且我们必须在`FormsCollection`访问中提供字典访问，只要它被定义为输入参数.

在 ASP.NET Web API 中，`application/x-www-form-urlencoded`是另一种内容类型，应该由其 MediaTypeFormatter 读取。因此 ASP.NET Web API 不能对`Forms`.

ASP.NET Web API 中的常规方法是将表单表示为模型，以便媒体类型格式化程序对其进行反序列化。另一种方法是将动作的参数定义为`NameValueCollection`：

```
public void Post(NameValueCollection formData)
{
   var value = formData["key"];
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-21T18:16:31.883

好吧，这是不可能的，因为`HttpRequestMessage`不提供开箱即用的那种集合。

但是，如果您的应用程序托管在 ASP.NET 下，您可以访问当前`HttpContext`对象并从那里获取表单值：

```
public class CarsController : ApiController {

    public string[] Get() {

        var httpContext = (HttpContextWrapper)Request.Properties["MS_HttpContext"];
        var foo = httpContext.Request.Form["Foo"];

        return new string[] { 
            "Car 1",
            "Car 2",
            "Car 3"
        };
    }
} 
```

但我不确定这是否是做这类事情的最佳方式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-16T11:16:18.817

作为 Aliostad 方法的替代方案，可以执行以下操作：

```
public void Post(HttpRequestMessage request)
{
    NameValueCollection formData = await request.Content.ReadAsFormDataAsync();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-26T16:15:01.510

如果你只有一个`HttpRequestMessage`，你有几个选择：

通过引用[`System.Net.Http.Formatting`](https://www.nuget.org/packages/Microsoft.AspNet.WebApi.Client/)，您可以使用[`ReadAsFormDataAsync()`](https://msdn.microsoft.com/en-us/library/jj125353(v=vs.118).aspx)扩展方法。

```
var formData = await message.Content.ReadAsFormDataAsync(); 
```

如果您不想包含该库，则可以`HttpUtility`使用`System.Web`.

```
public async Task<NameValueCollection> ParseFormDataAsync(HttpRequestMessage message)
{
    string formString = await message.Content.ReadAsStringAsync();
    var formData = HttpUtility.ParseQueryString(formString);
    return formData;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-08-04T13:54:05.687

尝试这个：

```
HttpContext.Current.Request.Form["key"]; 
```

# jquery - 使用 css、css3 或 jquery 在悬停时使背景不透明

> ID：11593600
> 
> 赞同：0
> 
> 时间：2012-07-21T15:49:29.657
> 
> 标签：jquery, html, css

当我将鼠标悬停在 href 上时，我想要实现的是使整个页面的背景不透明。悬停时会触发 body 类具有不透明的彩色背景的东西。像下面这样的东西，但是这不起作用。我只能让它在其包含的 div 中工作。

是否有使用 css 或 css3 的更简单方法。它必须是一种轻量级的方法来实现这一点。我还想在页面中心放置一张图片。然而，这个功能目前更重要。

```
 $(function(){
$('a body').hover(function() { 
$('a', this).stop().animate({"opacity": 1}); 
 },function() { 
$('a', this).stop().animate({"opacity": 0.4}); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:00:52.473

但是你想用身体背景来做这个吗？我不认为它会起作用，因为身体背景没有背景（它下面的另一层）。正如您所说，使用 div 它可以正常工作。那么，为什么不创建一个 div 并将其用作整个 body 内容的容器并在其中制作动画呢？

就像是：

```
<body>
    <div id="divToAnimate">
        <!-- your content here... -->
    </div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:39:28.880

我为你创造了一个很好的起点。我用一个透明的 div 来覆盖你的背景。当您悬停特定的东西时，叠加层的不透明度会发生变化。

*我使用 .stop() 方法来防止队列多次悬停。

[http://jsfiddle.net/WarrenBee/88ry6/1/](http://jsfiddle.net/WarrenBee/88ry6/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:38:40.493

也许是这样的：

```
$("a").hover{
$("#div-that-covers-the-area-you-wish-to-change").css({"background":"#fff"});
}); 
```

这要求您包含并适当地引用 jQuery 库，除非它是可访问的，否则不会发生任何事情。没有它甚至可能看起来很有趣。

如果您要操作的 div 有一个 id 使用 '#'，如果它有一个类使用 '.'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T17:44:59.683

经过多次实验和通过互联网搜索，我发现了一个基于 css 和 jQuery 的[不错的解决方案。](https://stackoverflow.com/a/3241421/1422309)如果您将一个额外的 div 附加到正文，那么它的行为就像您的页面的不透明背景一样。div 使用以下样式：

CSS：

```
.background {
   position: absolute;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   z-index: -1;
   background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAA0SURBVBhXY/wPBA6eZxnQwYHtxgyM9h5n/oMkQBwYgClmQpdA5oMlcQHCkugOgvEZ8bkWAHInGVYp48cTAAAAAElFTkSuQmCC);
   /* These three lines are for transparency in all browsers. */
   -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
   filter: alpha(opacity=50);
   opacity:.5;
} 
```

JavaScript：

```
$(document).ready(function () {
  $('a').hover(function(){
    $('.background').css('opacity',0.2);
  }, function(){
    $('.background').css('opacity','');
  });
}); 
```

HTML 中的示例集成：

```
<body>
<div class="content">Content<a href="">Link</a></div>
<div class="background"></div>
</body> 
```

[完整的测试脚本在这里](http://pastebin.com/DwatJrvm)。

# jquery - 无限滚动插件什么都不做

> ID：11593601
> 
> 赞同：0
> 
> 时间：2012-07-21T15:49:30.463
> 
> 标签：jquery, jquery-plugins, infinite-scroll

我目前的 Zend 分页工作得很好，我正在尝试集成 Paul Irish 的无限滚动插件，但据我所知，该插件完全没有任何区别。页面控件仍然显示在页面底部，当我向下滚动时没有任何反应。这是我的javascript：

```
$('#grid').infinitescroll({
    navSelector  : "div#paginationControl",
    nextSelector : "#next",
    itemSelector : "#grid div.entry",
    debug : true,
    bufferPx : 200
}); 
```

还有我的分页控件，几乎直接取自 zend 的文档

```
<?php if ($this->pageCount): ?>
<div class="paginationControl" id="paginationControl">
<!-- Previous page link -->
<?php if (isset($this->previous)): ?>
    <a href="<?php echo $this->url(array('page' => $this->previous)); ?>" id="previous">
        &lt; Previous
    </a> |
<?php else: ?>
    <span class="disabled">&lt; Previous</span> |
<?php endif; ?>

<!-- Numbered page links -->
<?php foreach ($this->pagesInRange as $page): ?>
    <?php if ($page != $this->current): ?>
        <a href="<?php echo $this->url(array('page' => $page)); ?>">
        <?php echo $page; ?>
        </a> |
    <?php else: ?>
        <?php echo $page; ?> |
    <?php endif; ?>
<?php endforeach; ?>

<!-- Next page link -->
<?php if (isset($this->next)): ?>
    <a href="<?php echo $this->url(array('page' => $this->next)); ?>" id="next">
    Next &gt;
    </a>
<?php else: ?>
    <span class="disabled">Next &gt;</span>
<?php endif; ?>
</div>
<?php endif; ?> 
```

据我所知，一切都应该正确设置；grid 是包含项目列表的容器，entry 是每个项目的类，我在脚本之前包含了插件。我在控制台中没有收到任何 javascript 错误，但插件没有任何效果。我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:51:22.687

这是我错了的itemSelector。我从示例页面复制了它，只是将帖子更改为条目，但条目类实际上包含在列表元素中，所以正确的代码是`itemSelector : "#grid li.entry"`. 如果任何选择器无效，无限滚动脚本什么都不做，并恢复到底层的分页系统。

# php - PHP 开发人员的 PostgreSQL 和 MySQL 之间的差异

> ID：11593602
> 
> 赞同：8
> 
> 时间：2012-07-21T15:49:31.360
> 
> 标签：php, mysql, sql, postgresql, postgis

对于数据库上的大多数查询将包括诸如“在多边形内”之类的要求的项目，我开始考虑选择带有 PostGIS 的 PostgreSQL 而不是我以前主要使用的 MySQL。主要是因为PostgreSQL有更多的GIS功能。但是，我不确定如何评估这一点，也无法从 PHP 开发人员的角度真正看到差异。

1.  PostgreSQL 支持与 PHP 的集成是否与 MySQL 一样好？
2.  编写 PostgreSQL 查询 (SQL) 是否与 MySQL 非常相似？
3.  选择 PostgreSQL 而不是 MySQL 时有什么需要考虑的注意事项吗？
4.  使用 GIS 数据时，每个定义的 PostgreSQL 是否是更好的解决方案？

希望你们能帮我澄清一些。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-21T16:00:04.607

> PostgreSQL 支持与 PHP 的集成是否与 MySQL 一样好？

是的。也许更好，更多的[PHP 函数](http://us3.php.net/manual/en/ref.pgsql.php)可以让事情变得非常简单。

> 编写 PostgreSQL 查询 (SQL) 是否与 MySQL 非常相似？

是的，它是 SQL。但是您确实有更高级的功能可用，例如 Oracle 和 SQL Server。

> 选择 PostgreSQL 而不是 MySQL 时有什么需要考虑的注意事项吗？

PostgreSQL 尚未在廉价托管服务提供商上广泛使用。但它是可用的。

> 使用 GIS 数据时，每个定义的 PostgreSQL 是否是更好的解决方案？

当您需要 GIS 查询时，MySQL 是个笑话，而 PostGIS（PostgreSQL 中的函数和数据类型）是市场上最好的 GIS 数据库之一。

* * *

编辑：检查这两个比较：

*   [SQL Server 2008/Oracle 11G/PostGIS](http://www.bostongis.com/PrinterFriendly.aspx?content_name=sqlserver2008r2_oracle11gr2_postgis15_compare)
*   [SQL Server 2008/MySQL/PostGIS](http://www.bostongis.com/PrinterFriendly.aspx?content_name=sqlserver2008_postgis_mysql_compare)

PostGIS 已经升级到 2.0 版，PostgreSQL 升级到 9.1 版，9.2 即将推出。

MySQL 只有几个 GIS 功能并且缺乏性能，对于 GIS 来说它不是一个严肃的选择。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-21T18:08:41.187

从纯粹的 PHP 角度来看，如果您使用[PDO](http://php.net/pdo) ，那么 - 除了构造函数 - 您的代码几乎可以与数据库无关。

# webmatrix - 如何从命令行在 iisexpress/iisnode 下启动 nodejs 网站？

> ID：11593605
> 
> 赞同：0
> 
> 时间：2012-07-21T15:50:23.227
> 
> 标签：webmatrix, iis-express, iisnode

我在试图弄清楚如何在**不使用 Web-Matrix 的情况**下在 issexpress/issnode 下启动 nodejs 网站时遇到问题。基本上，我需要通过单击 Web-Matrix 中的开始/停止但在它之外完成相同的操作。

**更新**

如果一个网站可以由

```
node.exe sever.js 
```

为什么我需要 iisexpress 或 iisnode 或 web-matrix 或其他任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:50:53.407

您不需要 IISNode 或 WebMatrix 在 windows 上进行节点开发。

IISNode 提供了从节点到 IIS 的桥梁——如果您在 Windows 上运行节点，这可能是您在生产中要做的事情。在开发时，我们包含在 WebMatrix 中，以便您在开发时和生产中获得一致的体验。如果您不想使用 IISNode，则可以使用命令行启动该过程（如您所想）。

WebMatrix 只是一个代码编辑器。它使 Node 项目的工作变得更容易，并为您提供了大量用于节点开发的花里胡哨。出于上述原因，我们使用节点模板关闭 IISNode - 但您当然不必使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T23:19:38.767

一旦您在 IISExpress 中配置了您的站点（可能通过 WebMatrix 或 VisualStudio），它将被记录在 IIS 中，默认情况下使用您的 Web 项目的名称。现在可以对其进行初始化：

`start C:/Program Files/IIS Express/iisexpress /site:YourProjectName`

因此，您可以在 server.js 中调用 iisexpress 工具：

```
/* in your server.js */

var fs = require("fs");
var exec = require("child_process").exec;

var IIS_PATH = "C:/Program Files/IIS Express/";
var IIS_PATH_64 = "C:/Program Files (x86)/IIS Express/";
var IIS_COMMAND = "iisexpress";
var SITE_NAME = process.argv.slice(2)[0] || "MyDefaultWebProject";
var IIS_PARAM = " /site:" + SITE_NAME;

if(!fs.existsSync(IIS_PATH))
    IIS_PATH = IIS_PATH_64;

exec("start " + IIS_COMMAND + IIS_PARAM, {cwd: IIS_PATH }); 
```

并像这样运行：

`node server.js MyWebProject`

;)

# c# - 在 SICP 中，它说在 C 中，即使递归调用实际上是迭代的，内存消耗也会增加。为什么？

> ID：11593607
> 
> 赞同：1
> 
> 时间：2012-07-21T15:50:47.943
> 
> 标签：c#, java, c, recursion, sicp

原话是

> 进程和过程之间的区别可能令人困惑的一个原因是，大多数公共语言（包括 Ada、Pascal 和 C）的实现都设计为这样一种方式，即任何递归过程的解释都会消耗大量内存，而内存量会随着过程调用的数量，即使所描述的过程原则上是迭代的。因此，这些语言只能通过使用特殊用途的“循环结构”来描述迭代过程，例如 do、repeat、until、for 和 while。

我不熟悉C语言，Java或C#呢？他们也是这样吗？为什么？

***注意：我以为作者在谈论不同语言的能力。但实际上它只是编译器的不同实现。***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T15:52:29.123

C（和类似语言）通常使用[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)来存储每个函数的本地变量。每次调用函数时，都会占用更多的堆栈；每次函数返回时，堆栈使用量都会减少。

但是，智能编译器没有理由不能在适当的情况下进行[尾调用优化](http://en.wikipedia.org/wiki/Tail-call_optimisation)等事情，从而消除堆栈的使用。在像 Lisp 这样的语言中，我认为解释器*需要*执行这样的优化，所以这可能是作者试图做出的区分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T15:52:42.560

他基本上是想说这些语言的编译器不能进行尾递归消除。长话短说，他错了（或者无论如何都过度概括了——我想“大多数实现”已经足够狡猾的措辞了，它在技术上可能是正确的，尽管充其量是误导）。虽然我当然不能保证所有其他语言的每个编译器都会消除尾递归，但毫无疑问，至少有一些 C 和 C++ 编译器（例如，英特尔 C++、gcc/g++）可以并且将会。我没有检查过，但考虑到 GNAT（Gnu Ada 编译器）使用相同的优化器以及它们的 C 和 C++ 编译器，我的直接猜测是它也可以进行尾递归消除。

自从我使用 Pascal 以来已经有足够长的时间了，我无法对它做出明智的评论——我的直接猜测是“不”，但这与语言本身几乎没有关系，主要归结为事实目前对 Pascal 的大多数使用都可以追溯到 Borland，而且他们似乎从未在优化代码生成方面投入太多精力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T17:12:19.217

你问：C#呢？

C# 与 Java 类似，但与大多数 C/C++ 或 ADA 实现不同，它编译为中间语言，然后进一步编译，通常在运行时由“即时编译器”进行编译。

在撰写本文时，C# 编译器不会执行尾递归消除，但 JIT 可以。

有关详细信息，请参阅[http://blogs.msdn.com/b/clrcodegeneration/archive/2009/05/11/tail-call-improvements-in-net-framework-4.aspx](http://blogs.msdn.com/b/clrcodegeneration/archive/2009/05/11/tail-call-improvements-in-net-framework-4.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T02:15:10.533

它与编译器的实现无关。

你错过了他试图提出的重点，即流程和程序之间的区别。一个*过程*可能是递归的，即使它正在实现的底层*过程原则上是迭代的；*和递归过程消耗堆栈。

# android - Android StrictMode：误报或此示例有什么问题？

> ID：11593609
> 
> 赞同：0
> 
> 时间：2012-07-21T15:50:50.737
> 
> 标签：android, android-strictmode, strict-mode

当某个条件（网站内容）为真时，我启用了这个 ToggleButton。

getSystemOnState(..) 连接到网络服务器，由于严格模式，这会导致异常。我使用 Handler 类的方式有什么问题？

```
public class ReceiverToggleButton extends ToggleButton {
 private Runnable mTicker;
 private Handler mHandler;
 private boolean mTickerStopped = false;
 private String rxhost = null;
 private Context context = null;

 public ReceiverToggleButton(Context context) {
    super(context);
    this.context = context;
    updateOnOffState(context);
 }

 private void updateOnOffState(final Context cxt) {
    Runnable r = new Runnable() {
        public void run() {
            rxhost = cxt.getResources().getString(R.string.host_receiver);
            mHandler = new Handler();
            mTicker = new Runnable() {
                public void run() {
                    if (mTickerStopped) {
                        return;
                    }

                    boolean isSystemOn = getSystemOnState(rxhost); // connects to webserver
                    setChecked(isSystemOn);
                    invalidate();
                    long now = SystemClock.uptimeMillis();
                    long next = now + 1000 * 10; // check every 10s
                    mHandler.postAtTime(this, next);
                }

            };
            mHandler.post(mTicker);
        }
    };
    new Thread(r).start();
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:03:10.623

严格模式正在抱怨，因为您仍在尝试在 UI 线程上执行该网络操作。或者这个类被广播接收器（它们是短暂的）调用。处理程序也可以传递消息，在这个例子中你并没有真正正确地使用它们。或者至少您可以看到所有线程、可运行文件和发布如何使所有内容都难以阅读。

您在这里需要的是 AsyncTask。

[这是来自http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)的 Google 示例

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
 }

new DownloadFilesTask().execute(url1, url2, url3); 
```

在您的情况下，您将希望第一个参数是您的主机字符串，您在后台执行的操作将执行您的检查和您的网络调用，以及 onPostExecute（在 UI 线程上运行）来更新您的视图。

# android - SurfaceView 动画

> ID：11593612
> 
> 赞同：1
> 
> 时间：2012-07-21T15:51:12.333
> 
> 标签：android, surfaceview

从我读过的内容来看，我不相信 SurfaceView 可以动画，但我会问这个问题：

我在 ViewFlipper 中有一个 surfaceView 对象。当 ViewFlipper 向左或向右移动到新的“页面”时，前一页的 SurfaceView 将保留在 LCD 上。有点期待。

这是问题。有没有办法解决这个问题，即使是粗略的方式？例如，当 ViewFlipper 开始移动时，是否可以将 surfaceView 设置为不可见之类的？

SurfaceView 绝对适合我的需求，并且已经解决了除了这个剩下的问题之外的所有问题。任何想法，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:02:08.547

要使 SurfaveView 透明（不可见），您可以在将其渲染到屏幕之前在画布对象上调用它：

```
canvas.eraseColor(Color.TRANSPARENT); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T04:55:21.850

如果您使用 ViewFlipper，我想您可能需要设置自己的 Gesture。因此，您可以在 Gesture 中清理和停止所有 SurfaceView 动画作业。（我的意思是您需要通过手势停止并重新启动绘图线程。）

但是 ViewPager 和 V4.Fragment 是更好的解决方案。因为 Fragment 可以回收 SurfaceView。我不知道Fragment是否可以在ViewFlipper中工作，但我只是在ViewPager + V4.Fragment + SurfaceView中完成了我的工作。所以我确信它有效。

# .net - 为什么查找类型的初始化程序会引发 NullReferenceException？

> ID：11593615
> 
> 赞同：197
> 
> 时间：2012-07-21T15:51:34.110
> 
> 标签：.net, reflection, nullreferenceexception, .net-4.5, typeinitializer

这让我很难过。我试图优化 Noda Time 的一些测试，我们有一些类型初始化程序检查。我想在*将*所有内容加载到新的`AppDomain`. *令我惊讶的是，尽管我的*代码`NullReferenceException`中没有空值，但对此进行了一个小测试。它*仅*在没有调试信息的情况下编译时抛出异常。

 **这是一个简短但完整的程序来演示该问题：

```
using System;

class Test
{
    static Test() {}

    static void Main()
    {
        var cctor = typeof(Test).TypeInitializer;
        Console.WriteLine("Got initializer? {0}", cctor != null);
    }    
} 
```

以及编译和输出的成绩单：

```
c:\Users\Jon\Test>csc Test.cs
Microsoft (R) Visual C# Compiler version 4.0.30319.17626
for Microsoft (R) .NET Framework 4.5
Copyright (C) Microsoft Corporation. All rights reserved.

c:\Users\Jon\Test>test

Unhandled Exception: System.NullReferenceException: Object reference not set to
an instance of an object.
   at System.RuntimeType.GetConstructorImpl(BindingFlags bindingAttr, Binder bin
der, CallingConventions callConvention, Type[] types, ParameterModifier[] modifi
ers)
   at Test.Main()

c:\Users\Jon\Test>csc /debug+ Test.cs
Microsoft (R) Visual C# Compiler version 4.0.30319.17626
for Microsoft (R) .NET Framework 4.5
Copyright (C) Microsoft Corporation. All rights reserved.

c:\Users\Jon\Test>test
Got initializer? True 
```

现在您会注意到我正在使用 .NET 4.5（候选发布版）——这*可能*与此处相关。用其他各种原始框架（特别是“vanilla”.NET 4）测试它对我来说有点棘手，但如果其他人可以轻松访问具有其他框架的机器，我会对结果感兴趣。

其他详情：

*   我在 x64 机器上，但 x86 和 x64 程序集都会出现此问题
*   *调用*代码的“调试性”会有所不同——尽管在上面的测试用例中它是在自己的程序集中对其进行测试，但当我针对 Noda Time 进行尝试时，我不必重新编译`NodaTime.dll`即可看到差异——只是`Test.cs`其中提到了它。
*   在 Mono 2.10.8 上运行“损坏”程序集*不会*抛出

有任何想法吗？框架错误？

编辑：好奇和好奇。如果您`Console.WriteLine`拨打电话：

```
using System;

class Test
{
    static Test() {}

    static void Main()
    {
        var cctor = typeof(Test).TypeInitializer;
    }    
} 
```

它现在*仅*在使用`csc /o- /debug-`. 如果您打开优化， ( `/o+`) 它会起作用。但是，如果您`Console.WriteLine`按照原始版本包含调用，则两个版本都将失败。

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2012-07-21T21:04:41.920

与`csc test.cs`：

```
(196c.1874): Access violation - code c0000005 (first chance)
mscorlib_ni!System.RuntimeType.GetConstructorImpl(System.Reflection.BindingFlags, System.Reflection.Binder, System.Reflection.CallingConventions, System.Type[], System.Reflection.ParameterModifier[])+0xa3:
000007fe`e5735403 488b4608        mov     rax,qword ptr [rsi+8] ds:00000000`00000008=???????????????? 
```

尝试从`[rsi+8]`何时加载`@rsi`为 NULL。让我们检查一下函数：

```
0:000> ln 000007fe`e5735403
(000007fe`e5735360)   mscorlib_ni!System.RuntimeType.GetConstructorImpl(System.Reflection.BindingFlags, System.Reflection.Binder, System.Reflection.CallingConventions, System.Type[], System.Reflection.ParameterModifier[])+0xa3
0:000> uf 000007fe`e5735360
Flow analysis was incomplete, some code may be missing
mscorlib_ni!System.RuntimeType.GetConstructorImpl(System.Reflection.BindingFlags, System.Reflection.Binder, System.Reflection.CallingConventions, System.Type[], System.Reflection.ParameterModifier[]):
000007fe`e5735360 53              push    rbx
000007fe`e5735361 55              push    rbp
000007fe`e5735362 56              push    rsi
000007fe`e5735363 57              push    rdi
000007fe`e5735364 4154            push    r12
000007fe`e5735366 4883ec30        sub     rsp,30h
000007fe`e573536a 498bf8          mov     rdi,r8
000007fe`e573536d 8bea            mov     ebp,edx
000007fe`e573536f 48c744242800000000 mov   qword ptr [rsp+28h],0
000007fe`e5735378 488bb42480000000 mov     rsi,qword ptr [rsp+80h]
000007fe`e5735380 4889742420      mov     qword ptr [rsp+20h],rsi
000007fe`e5735385 41b903000000    mov     r9d,3
...    
mscorlib_ni!System.RuntimeType.GetConstructorImpl(System.Reflection.BindingFlags, System.Reflection.Binder, System.Reflection.CallingConventions, System.Type[], System.Reflection.ParameterModifier[])+0x97:
000007fe`e57353f7 488b4b08        mov     rcx,qword ptr [rbx+8]
000007fe`e57353fb 85c9            test    ecx,ecx
000007fe`e57353fd 0f848e000000    je      mscorlib_ni!System.RuntimeType.GetConstructorImpl(System.Reflection.BindingFlags, System.Reflection.Binder, System.Reflection.CallingConventions, System.Type[], System.Reflection.ParameterModifier[])+0x131 (000007fe`e5735491)

mscorlib_ni!System.RuntimeType.GetConstructorImpl(System.Reflection.BindingFlags, System.Reflection.Binder, System.Reflection.CallingConventions, System.Type[], System.Reflection.ParameterModifier[])+0xa3:
000007fe`e5735403 488b4608        mov     rax,qword ptr [rsi+8]
000007fe`e5735407 85c0            test    eax,eax
000007fe`e5735409 7545            jne     mscorlib_ni!System.RuntimeType.GetConstructorImpl(System.Reflection.BindingFlags, System.Reflection.Binder, System.Reflection.CallingConventions, System.Type[], System.Reflection.ParameterModifier[])+0xf0 (000007fe`e5735450)
... 
```

`@rsi`从开头加载，`[rsp+20h]`因此它必须由调用者传递。让我们看看调用者：

```
0:000> k3
Child-SP          RetAddr           Call Site
00000000`001fec70 000007fe`8d450110 mscorlib_ni!System.RuntimeType.GetConstructorImpl(System.Reflection.BindingFlags, System.Reflection.Binder, System.Reflection.CallingConventions, System.Type[], System.Reflection.ParameterModifier[])+0xa3
00000000`001fecd0 000007fe`ecb6e073 image00000000_01120000!Test.Main()+0x60
00000000`001fed20 000007fe`ecb6dcb2 clr!CoUninitializeEE+0x7ae1f
0:000> ln 000007fe`8d450110
(000007fe`8d4500b0)   image00000000_01120000!Test.Main()+0x60
0:000> uf 000007fe`8d4500b0
image00000000_01120000!Test.Main():
000007fe`8d4500b0 53              push    rbx
000007fe`8d4500b1 4883ec40        sub     rsp,40h
000007fe`8d4500b5 e8a69ba658      call    mscorlib_ni!System.Console.get_In() (000007fe`e5eb9c60)
000007fe`8d4500ba 4c8bd8          mov     r11,rax
000007fe`8d4500bd 498b03          mov     rax,qword ptr [r11]
000007fe`8d4500c0 488b5048        mov     rdx,qword ptr [rax+48h]
000007fe`8d4500c4 498bcb          mov     rcx,r11
000007fe`8d4500c7 ff5238          call    qword ptr [rdx+38h]
000007fe`8d4500ca 488d0d7737eeff  lea     rcx,[000007fe`8d333848]
000007fe`8d4500d1 e88acb715f      call    clr!CoUninitializeEE+0x79a0c (000007fe`ecb6cc60)
000007fe`8d4500d6 4c8bd8          mov     r11,rax
000007fe`8d4500d9 48b92012531200000000 mov rcx,12531220h
000007fe`8d4500e3 488b09          mov     rcx,qword ptr [rcx]
000007fe`8d4500e6 498b03          mov     rax,qword ptr [r11]
000007fe`8d4500e9 4c8b5068        mov     r10,qword ptr [rax+68h]
000007fe`8d4500ed 48c744242800000000 mov   qword ptr [rsp+28h],0
000007fe`8d4500f6 48894c2420      mov     qword ptr [rsp+20h],rcx
000007fe`8d4500fb 41b903000000    mov     r9d,3
000007fe`8d450101 4533c0          xor     r8d,r8d
000007fe`8d450104 ba38000000      mov     edx,38h
000007fe`8d450109 498bcb          mov     rcx,r11
000007fe`8d45010c 41ff5228        call    qword ptr [r10+28h]
000007fe`8d450110 48bb1032531200000000 mov rbx,12533210h
000007fe`8d45011a 488b1b          mov     rbx,qword ptr [rbx]
000007fe`8d45011d 33d2            xor     edx,edx
000007fe`8d45011f 488bc8          mov     rcx,rax
000007fe`8d450122 e829452e58      call    mscorlib_ni!System.Reflection.ConstructorInfo.op_Equality(System.Reflection.ConstructorInfo, System.Reflection.ConstructorInfo) (000007fe`e5734650)
000007fe`8d450127 0fb6c8          movzx   ecx,al
000007fe`8d45012a 33c0            xor     eax,eax
000007fe`8d45012c 85c9            test    ecx,ecx
000007fe`8d45012e 0f94c0          sete    al
000007fe`8d450131 0fb6c8          movzx   ecx,al
000007fe`8d450134 894c2430        mov     dword ptr [rsp+30h],ecx
000007fe`8d450138 488d542430      lea     rdx,[rsp+30h]
000007fe`8d45013d 488d0d24224958  lea     rcx,[mscorlib_ni+0x682368 (000007fe`e58e2368)]
000007fe`8d450144 e807246a5f      call    clr+0x2550 (000007fe`ecaf2550)
000007fe`8d450149 488bd0          mov     rdx,rax
000007fe`8d45014c 488bcb          mov     rcx,rbx
000007fe`8d45014f e81cab2758      call    mscorlib_ni!System.Console.WriteLine(System.String, System.Object) (000007fe`e56cac70)
000007fe`8d450154 90              nop
000007fe`8d450155 4883c440        add     rsp,40h
000007fe`8d450159 5b              pop     rbx
000007fe`8d45015a c3              ret 
```

（我的反汇编显示是`System.Console.get_In`因为我`Console.GetLine()`在 test.cs 中添加了一个有机会中断调试器。我验证它不会改变行为）。

我们在这个调用中：（`000007fe8d45010c 41ff5228 call qword ptr [r10+28h]`我们的 AV 帧 ret 地址是紧随其后的指令`call`）。

让我们将其与编译时发生的情况进行比较`csc /debug test.cs`。我们可以设置一个`bp 000007fee5735360`，幸运的是模块加载到相同的地址。在加载的指令上`@rsi`：

```
0:000> r
rax=000007fee58e2f30 rbx=00000000027c6258 rcx=00000000027c6258
rdx=0000000000000038 rsi=00000000002debd8 rdi=0000000000000000
rip=000007fee5735378 rsp=00000000002de990 rbp=0000000000000038
 r8=0000000000000000  r9=0000000000000003 r10=000007fee58831c8
r11=00000000002de9c0 r12=0000000000000000 r13=00000000002dedc0
r14=00000000002dec58 r15=0000000000000004
iopl=0         nv up ei pl nz na po nc
cs=0033  ss=002b  ds=002b  es=002b  fs=0053  gs=002b             efl=00000206
mscorlib_ni!System.RuntimeType.GetConstructorImpl(System.Reflection.BindingFlags, System.Reflection.Binder, System.Reflection.CallingConventions, System.Type[], System.Reflection.ParameterModifier[])+0x18:
000007fe`e5735378 488bb42480000000 mov     rsi,qword ptr [rsp+80h] ss:00000000`002dea10=a0627c0200000000 
```

请注意，它`@rsi`是 00000000002debd8。单步执行该函数表明，该地址稍后将在坏的 exe 炸弹发生时被取消引用（即`@rsi`不会更改）。堆栈非常有趣*，因为它显示了一个额外的帧*：

```
0:000> k3
Child-SP          RetAddr           Call Site
00000000`002de990 000007fe`e5eddf68 mscorlib_ni!System.RuntimeType.GetConstructorImpl(System.Reflection.BindingFlags, System.Reflection.Binder, System.Reflection.CallingConventions, System.Type[], System.Reflection.ParameterModifier[])+0x18
00000000`002de9f0 000007fe`8d460119 mscorlib_ni!System.Type.get_TypeInitializer()+0x48
00000000`002dea30 000007fe`ecb6e073 good!Test.Main()+0x49*** WARNING: Unable to verify checksum for good.exe

0:000> ln 000007fe`e5eddf68
(000007fe`e5eddf20)   mscorlib_ni!System.Type.get_TypeInitializer()+0x48
0:000> uf 000007fe`e5eddf20
mscorlib_ni!System.Type.get_TypeInitializer():
000007fe`e5eddf20 53              push    rbx
000007fe`e5eddf21 4883ec30        sub     rsp,30h
000007fe`e5eddf25 488bd9          mov     rbx,rcx
000007fe`e5eddf28 ba22010000      mov     edx,122h
000007fe`e5eddf2d b901000000      mov     ecx,1
000007fe`e5eddf32 e8d1a075ff      call    CORINFO_HELP_GETSHARED_GCSTATIC_BASE (000007fe`e5638008)
000007fe`e5eddf37 488b88f0010000  mov     rcx,qword ptr [rax+1F0h]
000007fe`e5eddf3e 488b03          mov     rax,qword ptr [rbx]
000007fe`e5eddf41 4c8b5068        mov     r10,qword ptr [rax+68h]
000007fe`e5eddf45 48c744242800000000 mov   qword ptr [rsp+28h],0
000007fe`e5eddf4e 48894c2420      mov     qword ptr [rsp+20h],rcx
000007fe`e5eddf53 41b903000000    mov     r9d,3
000007fe`e5eddf59 4533c0          xor     r8d,r8d
000007fe`e5eddf5c ba38000000      mov     edx,38h
000007fe`e5eddf61 488bcb          mov     rcx,rbx
000007fe`e5eddf64 41ff5228        call    qword ptr [r10+28h]
000007fe`e5eddf68 90              nop
000007fe`e5eddf69 4883c430        add     rsp,30h
000007fe`e5eddf6d 5b              pop     rbx
000007fe`e5eddf6e c3              ret
0:000> ln 000007fe`8d460119 
```

这个调用和`call qword ptr [r10+28h]`我们之前看到的一样，所以在不好的情况下，这个函数可能被内联在 中`Main()`，所以有一个额外的框架是一个红鲱鱼。如果我们看一下这个的准备，`call qword ptr [r10+28h]`我们会注意到这个指令：`mov qword ptr [rsp+20h],rcx`。这就是加载最终被取消引用为的地址`@rsi`。在好的情况下，`@rcx`加载方式如下：

```
000007fe`e5eddf32 e8d1a075ff      call    CORINFO_HELP_GETSHARED_GCSTATIC_BASE (000007fe`e5638008)
000007fe`e5eddf37 488b88f0010000  mov     rcx,qword ptr [rax+1F0h] 
```

在糟糕的情况下，它看起来非常不同：

```
000007fe`8d4600d9 48b92012721200000000 mov rcx,12721220h
000007fe`8d4600e3 488b09          mov     rcx,qword ptr [rcx] 
```

这是非常不同的。与调用 CORINFO_HELP_GETSHARED_GCSTATIC_BASE 并读取最终作为导致 AV 从`1F0`返回结构中的某个成员偏移的关键指针的好案例不同，优化的代码从静态地址加载它。当然 12721220h 包含 NULL：

```
0:000> dp 12721220h L8
00000000`12721220  00000000`00000000 00000000`00000000
00000000`12721230  00000000`00000000 00000000`02722198
00000000`12721240  00000000`027221c8 00000000`027221f8
00000000`12721250  00000000`02722228 00000000`02722258 
```

不幸的是，我现在深入挖掘为时已晚，分解`CORINFO_HELP_GETSHARED_GCSTATIC_BASE`远非微不足道。我发布这篇文章是希望对 CLR 内部知识更了解的人能说得通（如您所见，我真的只从本机指令 POV 考虑了这个问题，完全忽略了 IL）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-16T13:14:36.277

因为我相信我已经找到了一些关于这个问题的有趣的新发现，所以我决定将它们添加为答案，同时承认它们没有解决原始问题中的**“为什么会发生”**。也许对所涉及类型的内部运作有更多了解的人可能会根据我发布的观察结果发布一个有启发性的答案。

我还设法在我的机器上重现了该问题，并且我跟踪了与[System.Runtime.InteropServices._Type Interface](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices._type.aspx)的连接，该接口由`System.Type`该类实现。

最初，我找到了至少 3 种解决问题的解决方法：

1.  只需在方法内部强制`Type`转换：`_Type``Main`

    ```
    var cctor = ((_Type)typeof(Test)).TypeInitializer; 
    ```

2.  或者确保之前在方法中使用了方法 1：

    ```
    var warmUp = ((_Type)typeof(Test)).TypeInitializer; 
    var cctor = ((Type)typeof(Test)).TypeInitializer; 
    ```

3.  或者通过向`Test`类添加一个静态字段并对其进行初始化（将其强制转换为`_Type`）：

    ```
    static ConstructorInfo _dummy1 = (typeof(object) as _Type).TypeInitializer; 
    ```

后来，我发现如果我们不想`System.Runtime.InteropServices._Type`在变通方法中涉及接口，问题也不会通过以下方式发生：

1.  向`Test`类添加一个静态字段并对其进行初始化（不将其强制转换为`_Type`）：

    ```
    static ConstructorInfo _dummy2 = typeof(object).TypeInitializer; 
    ```

2.  `cctor`或者通过将变量本身初始化为类的静态字段：

    ```
    static ConstructorInfo cctor = typeof(Test).TypeInitializer; 
    ```

我期待着您的反馈。**

# ipad - 从弹出框调用委托方法

> ID：11593620
> 
> 赞同：2
> 
> 时间：2012-07-21T15:52:12.390
> 
> 标签：ipad, ios5, popover

我使用 ios5、Xcode 4、iPad 进行项目。

我的主视图中的标准按钮触发了一个弹出框。我已经在情节提要中设置了弹出框，并带有锚定到标准按钮的 segue。

UIPopoverControllerDelegate 是我的主视图控制器

```
 @interface ViewController : UIViewController <UIPopoverControllerDelegate> 
```

当我在弹出窗口中选择一行时，我想

*   关闭弹出框并
*   调用 UIPopoverControllerDelegate 方法 popoverControllerDidDismissPopover。

这是我的弹出框的表视图委托中的代码：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath      *)indexPath {
     myKey = [myArray objectAtIndex:indexPath.row];
     [popoverController dismissPopoverAnimated:YES];
     // [popoverController.delegate popoverControllerDidDismissPopover]; 
```

没有最后一行，所有工作正常，包括行选择和解雇。

但我对最后一行代码感到困惑

```
 [popoverController.delegate popoverControllerDidDismissPopover]; 
```

如果未注释此行，我会收到编译器错误：“选择器 popoverControllerDidDismissPopover 没有已知的实例方法”。使用以下代码在主视图控制器中设置弹出框委托：

```
- (void) prepareForSegue:(UIStoryboardPopoverSegue *) segue sender:(id) sender {
     if ([[segue destinationViewController] isKindOfClass:[RGBViewController class]]) {
        RGBViewController* viewController = (RGBViewController*)[segue destinationViewController];
        UIStoryboardPopoverSegue* popoverSegue  = (UIStoryboardPopoverSegue*)segue;
        [viewController setPopoverController:[popoverSegue popoverController]];
        [[popoverSegue popoverController] setDelegate:self];
     }
 } 
```

有什么帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:27:46.640

您缺少该属性。您正在寻找的行是：

```
[popoverController.delegate popoverControllerDidDismissPopover:popoverController]; 
```

你有什么特别的理由要这样称呼吗？我相信当您关闭弹出框时应该为您调用它。

# php - 如何使用 SoapClient 类进行 PHP SOAP 调用

> ID：11593623
> 
> 赞同：143
> 
> 时间：2012-07-21T15:52:27.573
> 
> 标签：php, soap

我习惯编写 PHP 代码，但不经常使用面向对象的编码。我现在需要与 SOAP（作为客户端）进行交互，并且无法正确使用语法。我有一个 WSDL 文件，它允许我使用 SoapClient 类正确设置新连接。但是，我实际上无法做出正确的调用并返回数据。我需要发送以下（简化的）数据：

*   联络号码
*   联系人姓名
*   一般说明
*   数量

WSDL 文档中定义了两个函数，但我只需要一个（下面的“FirstFunction”）。这是我运行以获取有关可用函数和类型的信息的脚本：

```
$client = new SoapClient("http://example.com/webservices?wsdl");
var_dump($client->__getFunctions()); 
var_dump($client->__getTypes()); 
```

这是它生成的输出：

```
array(
  [0] => "FirstFunction Function1(FirstFunction $parameters)",
  [1] => "SecondFunction Function2(SecondFunction $parameters)",
);

array(
  [0] => struct Contact {
    id id;
    name name;
  }
  [1] => string "string description"
  [2] => string "int amount"
} 
```

假设我想用数据调用 FirstFunction：

*   联络号码：100
*   联系人姓名：约翰
*   概述：油桶
*   金额：500

什么是正确的语法？我一直在尝试各种选择，但似乎肥皂结构非常灵活，所以有很多方法可以做到这一点。说明书上也看不出来。。。

* * *

更新 1：来自 MMK 的尝试样本：

```
$client = new SoapClient("http://example.com/webservices?wsdl");

$params = array(
  "id" => 100,
  "name" => "John",
  "description" => "Barrel of Oil",
  "amount" => 500,
);
$response = $client->__soapCall("Function1", array($params)); 
```

但我得到了这样的回应：`Object has no 'Contact' property`。正如您在 的输出中看到的`getTypes()`，有一个`struct`被调用的`Contact`，所以我想我需要以某种方式明确我的参数包括联系人数据，但问题是：如何？

更新2：我也尝试过这些结构，同样的错误。

```
$params = array(
  array(
    "id" => 100,
    "name" => "John",
  ),
  "Barrel of Oil",
  500,
); 
```

也：

```
$params = array(
  "Contact" => array(
    "id" => 100,
    "name" => "John",
  ),
  "description" => "Barrel of Oil",
  "amount" => 500,
); 
```

两种情况下的错误：对象没有“联系人”属性`

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-07-30T01:37:29.247

## 这是你需要做的。

我试图重现这种情况......

* * *

*   对于此示例，我创建了一个 .NET 示例 WebService (WS)，其中`WebMethod`调用了`Function1`期望以下参数：

> Function1(Contact Contact, 字符串描述, int amount)

*   Where `Contact`is just a model that has getter and setter for `id`and `name`like in your case.

*   您可以在以下位置下载 .NET 示例 WS：

[https://www.dropbox.com/s/6pz1w94a52o5xah/11593623.zip](https://www.dropbox.com/s/6pz1w94a52o5xah/11593623.zip)

* * *

## 编码。

这是您需要在 PHP 端执行的操作：

*（测试和工作）*

```
<?php
// Create Contact class
class Contact {
    public function __construct($id, $name) 
    {
        $this->id = $id;
        $this->name = $name;
    }
}

// Initialize WS with the WSDL
$client = new SoapClient("http://localhost:10139/Service1.asmx?wsdl");

// Create Contact obj
$contact = new Contact(100, "John");

// Set request params
$params = array(
  "Contact" => $contact,
  "description" => "Barrel of Oil",
  "amount" => 500,
);

// Invoke WS method (Function1) with the request params 
$response = $client->__soapCall("Function1", array($params));

// Print WS response
var_dump($response);

?> 
```

* * *

## 测试整个事情。

*   如果您这样做`print_r($params)`，您将看到以下输出，正如您的 WS 所期望的那样：

> 数组 ( [Contact] => 接触对象 ( [id] => 100 [name] => John ) [description] => 每桶油 [amount] => 500 )

*   当我调试 .NET 示例 WS 时，我得到以下信息：

![在此处输入图像描述](../Images/d8fa9a72274eb55a551e9192aa36a67b.png)

*（如您所见，`Contact`对象`null`既不是其他参数也不是。这意味着您的请求已从 PHP 端成功完成）*

*   .NET 示例 WS 的响应是预期的，这就是我在 PHP 方面得到的：

> object(stdClass)[3] public 'Function1Result' => string '您的请求的详细信息！id：100，姓名：John，描述：油桶，数量：500'（长度=98）

* * *

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-06-12T14:00:43.420

You can use SOAP services this way too:

```
<?php 
//Create the client object
$soapclient = new SoapClient('http://www.webservicex.net/globalweather.asmx?WSDL');

//Use the functions of the client, the params of the function are in 
//the associative array
$params = array('CountryName' => 'Spain', 'CityName' => 'Alicante');
$response = $soapclient->getWeather($params);

var_dump($response);

// Get the Cities By Country
$param = array('CountryName' => 'Spain');
$response = $soapclient->getCitiesByCountry($param);

var_dump($response); 
```

This is an example with a real service, and it works when the url is up.

**Just in case the [http://www.webservicex.net](http://www.webservicex.net) is down.**

Here is another example **using the example web service** from [W3C XML Web Services](https://www.w3schools.com/xml/xml_services.asp) example, you can find more information on the link.

```
<?php
//Create the client object
$soapclient = new SoapClient('https://www.w3schools.com/xml/tempconvert.asmx?WSDL');

//Use the functions of the client, the params of the function are in
//the associative array
$params = array('Celsius' => '25');
$response = $soapclient->CelsiusToFahrenheit($params);

var_dump($response);

// Get the Celsius degrees from the Farenheit
$param = array('Fahrenheit' => '25');
$response = $soapclient->FahrenheitToCelsius($param);

var_dump($response); 
```

This is working and returning the converted temperature values.

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-07-21T16:18:25.030

首先初始化webservices：

```
$client = new SoapClient("http://example.com/webservices?wsdl"); 
```

然后设置并传递参数：

```
$params = array (
    "arg0" => $contactid,
    "arg1" => $desc,
    "arg2" => $contactname
);

$response = $client->__soapCall('methodname', array($params)); 
```

请注意，方法名称在 WSDL 中可用作操作名称，例如：

```
<operation name="methodname"> 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-07-17T03:17:42.133

我不知道为什么我的 web 服务和你有相同的结构，但它不需要 Class 作为参数，只是数组。

例如： - 我的 WSDL：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
                  xmlns:ns="http://www.kiala.com/schemas/psws/1.0">
    <soapenv:Header/>
    <soapenv:Body>
        <ns:createOrder reference="260778">
            <identification>
                <sender>5390a7006cee11e0ae3e0800200c9a66</sender>
                <hash>831f8c1ad25e1dc89cf2d8f23d2af...fa85155f5c67627</hash>
                <originator>VITS-STAELENS</originator>
            </identification>
            <delivery>
                <from country="ES" node=””/>
                <to country="ES" node="0299"/>
            </delivery>
            <parcel>
                <description>Zoethout thee</description>
                <weight>0.100</weight>
                <orderNumber>10K24</orderNumber>
                <orderDate>2012-12-31</orderDate>
            </parcel>
            <receiver>
                <firstName>Gladys</firstName>
                <surname>Roldan de Moras</surname>
                <address>
                    <line1>Calle General Oraá 26</line1>
                    <line2>(4º izda)</line2>
                    <postalCode>28006</postalCode>
                    <city>Madrid</city>
                    <country>ES</country>
                </address>
                <email>gverbruggen@kiala.com</email>
                <language>es</language>
            </receiver>
        </ns:createOrder>
    </soapenv:Body>
</soapenv:Envelope> 
```

我 var_dump：

```
var_dump($client->getFunctions());
var_dump($client->getTypes()); 
```

这是结果：

```
array
  0 => string 'OrderConfirmation createOrder(OrderRequest $createOrder)' (length=56)

array
  0 => string 'struct OrderRequest {
 Identification identification;
 Delivery delivery;
 Parcel parcel;
 Receiver receiver;
 string reference;
}' (length=130)
  1 => string 'struct Identification {
 string sender;
 string hash;
 string originator;
}' (length=75)
  2 => string 'struct Delivery {
 Node from;
 Node to;
}' (length=41)
  3 => string 'struct Node {
 string country;
 string node;
}' (length=46)
  4 => string 'struct Parcel {
 string description;
 decimal weight;
 string orderNumber;
 date orderDate;
}' (length=93)
  5 => string 'struct Receiver {
 string firstName;
 string surname;
 Address address;
 string email;
 string language;
}' (length=106)
  6 => string 'struct Address {
 string line1;
 string line2;
 string postalCode;
 string city;
 string country;
}' (length=99)
  7 => string 'struct OrderConfirmation {
 string trackingNumber;
 string reference;
}' (length=71)
  8 => string 'struct OrderServiceException {
 string code;
 OrderServiceException faultInfo;
 string message;
}' (length=97) 
```

所以在我的代码中：

```
 $client  = new SoapClient('http://packandship-ws.kiala.com/psws/order?wsdl');

    $params = array(
        'reference' => $orderId,
        'identification' => array(
            'sender' => param('kiala', 'sender_id'),
            'hash' => hash('sha512', $orderId . param('kiala', 'sender_id') . param('kiala', 'password')),
            'originator' => null,
        ),
        'delivery' => array(
            'from' => array(
                'country' => 'es',
                'node' => '',
            ),
            'to' => array(
                'country' => 'es',
                'node' => '0299'
            ),
        ),
        'parcel' => array(
            'description' => 'Description',
            'weight' => 0.200,
            'orderNumber' => $orderId,
            'orderDate' => date('Y-m-d')
        ),
        'receiver' => array(
            'firstName' => 'Customer First Name',
            'surname' => 'Customer Sur Name',
            'address' => array(
                'line1' => 'Line 1 Adress',
                'line2' => 'Line 2 Adress',
                'postalCode' => 28006,
                'city' => 'Madrid',
                'country' => 'es',
                ),
            'email' => 'test.ceres@yahoo.com',
            'language' => 'es'
        )
    );
    $result = $client->createOrder($params);
    var_dump($result); 
```

但它成功了！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-29T19:52:32.160

read this;-

[http://php.net/manual/en/soapclient.call.php](http://php.net/manual/en/soapclient.call.php)

Or

This is a good example, for the SOAP function "__call". However it is deprecated.

```
<?php
    $wsdl = "http://webservices.tekever.eu/ctt/?wsdl";
    $int_zona = 5;
    $int_peso = 1001;
    $cliente = new SoapClient($wsdl);
    print "<p>Envio Internacional: ";
    $vem = $cliente->__call('CustoEMSInternacional',array($int_zona, $int_peso));
    print $vem;
    print "</p>";
?> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-25T14:19:15.953

如果您创建 SoapParam 的对象，这将解决您的问题。创建一个类并将其映射到 WebService 给定的对象类型，初始化值并发送请求。请参阅下面的示例。

```
struct Contact {

    function Contact ($pid, $pname)
    {
      id = $pid;
      name = $pname;
  }
}

$struct = new Contact(100,"John");

$soapstruct = new SoapVar($struct, SOAP_ENC_OBJECT, "Contact","http://soapinterop.org/xsd");

$ContactParam = new SoapParam($soapstruct, "Contact")

$response = $client->Function1($ContactParam); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-26T04:25:03.873

首先，使用[SoapUI](https://www.soapui.org/)从 wsdl 创建您的肥皂项目。尝试发送请求以使用 wsdl 的操作。观察 xml 请求如何构成您的数据字段。

然后，如果您在让 SoapClient 按您的意愿行事时遇到问题，这就是我调试它的方法。设置选项*跟踪*，以便函数*__getLastRequest()*可供使用。

```
$soapClient = new SoapClient('http://yourwdsdlurl.com?wsdl', ['trace' => true]);
$params = ['user' => 'Hey', 'account' => '12345'];
$response = $soapClient->__soapCall('<operation>', $params);
$xml = $soapClient->__getLastRequest(); 
```

然后*$xml*变量包含 SoapClient 为您的请求编写的 xml。将此 xml 与 SoapUI 中生成的进行比较。

对我来说，SoapClient 似乎忽略了关联数组*$params*的键并将其解释为索引数组，从而导致 xml 中的参数数据错误。也就是说，如果我重新排序*$params*中的数据，则*$response*完全不同：

```
$params = ['account' => '12345', 'user' => 'Hey'];
$response = $soapClient->__soapCall('<operation>', $params); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-21T14:54:51.307

我遇到了同样的问题，但我只是像这样包装了参数，现在它可以工作了。

```
 $args = array();
    $args['Header'] = array(
        'CustomerCode' => 'dsadsad',
        'Language' => 'fdsfasdf'
    );
    $args['RequestObject'] = $whatever;

    // this was the catch, double array with "Request"
    $response = $this->client->__soapCall($name, array(array( 'Request' => $args ))); 
```

使用此功能：

```
 print_r($this->client->__getLastRequest()); 
```

您可以根据您的参数查看请求 XML 是否正在更改。

在 SoapClient 选项中使用 [trace = 1, exceptions = 0]。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-29T23:17:39.807

您需要声明类**合同**

```
class Contract {
  public $id;
  public $name;
}

$contract = new Contract();
$contract->id = 100;
$contract->name = "John";

$params = array(
  "Contact" => $contract,
  "description" => "Barrel of Oil",
  "amount" => 500,
); 
```

或者

```
$params = array(
  $contract,
  "description" => "Barrel of Oil",
  "amount" => 500,
); 
```

然后

```
$response = $client->__soapCall("Function1", array("FirstFunction" => $params)); 
```

或者

```
$response = $client->__soapCall("Function1", $params); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-23T19:29:24.210

您需要一个多维数组，您可以尝试以下方法：

```
$params = array(
   array(
      "id" => 100,
      "name" => "John",
   ),
   "Barrel of Oil",
   500
); 
```

在 PHP 中，数组是一种结构，非常灵活。通常在进行肥皂调用时，我使用 XML 包装器，因此不确定它是否会起作用。

## 编辑：

您可能想要尝试的是创建一个 json 查询来发送或使用它来创建一个 xml 购买排序，如下所示：http: [//onwebdev.blogspot.com/2011/08/php-converting-rss- to-json.html](http://onwebdev.blogspot.com/2011/08/php-converting-rss-to-json.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-11T09:34:09.120

**下面的代码可能会有所帮助**

```
 $wsdl ='My_WSDL_Service.wsdl";
    $options = array(
        'login' => 'user-name',
        'password' => 'Password',
    );
    try {
        $client = new SoapClient($wsdl, $options);
        $params = array(
            'para1' => $para1,
            'para2' => $para2
        );
        $res = $client->My_WSDL_Service($params); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-04-23T14:41:37.627

有一个选项可以使用 WsdlInterpreter 类生成 php5 对象。在此处查看更多信息：[https ://github.com/gkwelding/WSDLInterpreter](https://github.com/gkwelding/WSDLInterpreter)

例如：

```
require_once 'WSDLInterpreter-v1.0.0/WSDLInterpreter.php';
$wsdlLocation = '<your wsdl url>?wsdl';
$wsdlInterpreter = new WSDLInterpreter($wsdlLocation);
$wsdlInterpreter->savePHP('.'); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-16T06:41:55.583

**获取最后请求（）：**

仅当在跟踪选项设置为 TRUE 的情况下创建 SoapClient 对象时，此方法才有效。

在这种情况下 TRUE 用 1 表示

```
$wsdl = storage_path('app/mywsdl.wsdl');
try{

  $options = array(
               // 'soap_version'=>SOAP_1_1,
               'trace'=>1,
               'exceptions'=>1,

                'cache_wsdl'=>WSDL_CACHE_NONE,
             //   'stream_context' => stream_context_create($arrContextOptions)
        );
           // $client = new \SoapClient($wsdl, array('cache_wsdl' => WSDL_CACHE_NONE) );
        $client = new \SoapClient($wsdl, array('cache_wsdl' => WSDL_CACHE_NONE));
        $client     = new \SoapClient($wsdl,$options); 
```

# ajax - Htaccess setenvif 头定义

> ID：11593625
> 
> 赞同：0
> 
> 时间：2012-07-21T15:52:37.117
> 
> 标签：ajax, .htaccess, redirect

我试图通过 apache 进行正确的 ajax 重定向。所有请求都将发送到它们路由的 index.php，但我想通过定义的标头过滤 ajax 请求，并在 php 之前检查它 - 通过 htaccess，然后重定向到 ajax.php。几天前我正在阅读手册并进行测试，但是这个简单的语言。不是那么简单:( Htaccess 看起来像这样：

```
Options +FollowSymlinks
DirectoryIndex index.php
RewriteEngine On
RewriteBase /
Options +FollowSymlinks
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ test/over/index.php?do=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:31:36.720

假设您有这个 HTTP 标头：

```
AjaxLoader:  Death 
```

现在，基于此标头重定向请求：

```
RewriteCond  %{HTTP:AjaxLoader}   ^Death$
rewriteRule  (?<!index\.php)(.*)  index.php    [L,QSA] 
```

# c# - 从 Excel 电子表格中读取数据 - 无法对空引用执行运行时绑定

> ID：11593628
> 
> 赞同：2
> 
> 时间：2012-07-21T15:52:53.577
> 
> 标签：c#, excel, ms-office, excel-interop

我有下面的代码来从 excel 文件中读取数据，我遇到的问题是，当我尝试读取范围数据时，在这一行出现异常“无法对空引用执行运行时绑定”

```
if (Int32.TryParse(xlRange.Cells[1, 4].Value2.ToString(), out value)) 
```

我想知道的是如何正确访问该范围内的信息。提前致谢

```
void ReadFromExcelToGrid2(String fileNameString)
        {
            try
            {
                Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
                Microsoft.Office.Interop.Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(fileNameString);
                //get list of worksheets associated with the current workbook
                Microsoft.Office.Interop.Excel.Sheets worksheets = xlWorkbook.Worksheets;
                //list the work books in a dropdownlist 
                IDictionary<int, String> sheets = new Dictionary<int, String>();
                foreach (Microsoft.Office.Interop.Excel.Worksheet displayWorksheet in xlWorkbook.Worksheets)
                {
                    sheets.Add(displayWorksheet.Index, displayWorksheet.Name);
                }
                cmbWorksheets.DataSource = new BindingSource(sheets, null);;
                cmbWorksheets.DisplayMember = "Value";
                cmbWorksheets.ValueMember = "Key";

                Microsoft.Office.Interop.Excel.Worksheet xlWorksheet = xlWorkbook.Sheets[4]; // assume it is the first sheet
                Microsoft.Office.Interop.Excel.Range xlRange = xlWorksheet.UsedRange; // get the entire used range
                int value = 0;
                if (Int32.TryParse(xlRange.Cells[1, 4].Value2.ToString(), out value)) // get the F cell from the first row
                {
                    int numberOfColumnsToRead = value * 4;
                    for (int col = 7; col < (numberOfColumnsToRead + 7); col++)
                    {
                        Console.WriteLine(xlRange.Cells[1, col].Value2.ToString()); // do whatever with value
                    }
                }
            }
            catch (Exception ex)
            {

                throw ex;
            }
            } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T17:05:03.107

```
if (xlRange.Cells[row, 1].Text == "")
{
    xlRange.Cells[row, 1].value = "Blank";
} 
```

上面的代码将解决这个问题。但是`Blank`不会在牢房里。但它会让你更进一步。基本上 C#/Excel 不喜欢`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:38:43.557

如果您使用“ **Convert.ToString()** ”而不是“ **.ToString()** ”怎么办？如果“xlRange.Cells[1, 4].Value2”为空，那么它将没有 .ToString() 函数，如果我的想法正确，应该抛出异常。Convert.ToString() 和 .ToString() 之间的[区别在于 Convert.ToString](https://stackoverflow.com/questions/2828154/difference-between-convert-tostring-and-tostring) () 将返回一个空值，而 .ToString() 将爆炸。

您能否在该代码执行之前设置一个断点以确保 xlRange 实际上包含其中的信息？

# php - PHP MySQL 错误

> ID：11593629
> 
> 赞同：-1
> 
> 时间：2012-07-21T15:52:57.757
> 
> 标签：php, mysql

我知道有数百个这样的问题，但我找不到解决方案，我正在尝试使用以下代码将 IP 地址插入我的表中：

```
<?php
$connect = mysql_connect('localhost','root','');
if (!$connect)
  {
   echo 'Failed to connect to database'."</br>";
   die(mysql_error());
  }
 else
  {
    echo 'Connected to database'."</br>";
    mysql_select_db('users', $connect);
    if (mysql_query("INSERT INTO user_info (IP) VALUES (`127.0.0.1`)",$connect))
     {
      echo 'query success';
     }
    else
    {
     echo 'query failed'."</br>".mysql_error();
    }

    mysql_close($connect);
  }
?> 
```

但它不断返回以下错误：

> “字段列表”中的未知列“127.0.0.1”

我的查询有什么问题？类型设置为 Varchar(15)，是的，我知道我现在很容易受到 SQL 注入的攻击。

小块蛋糕

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:55:49.553

```
if (mysql_query("INSERT INTO user_info (IP) VALUES (`127.0.0.1`)",$connect)) 
```

应该

```
if (mysql_query("INSERT INTO user_info (IP) VALUES ('127.0.0.1')",$connect)) 
```

请注意单`'`引号，反引号```用于列和表名。

# objective-c - Objective-C：“MKMapView（代表）didUpdateUserLocation”的问题

> ID：11593630
> 
> 赞同：1
> 
> 时间：2012-07-21T15:53:22.533
> 
> 标签：objective-c, ios, automatic-ref-counting

我是 Objective-c 的新手，我正在尝试理解 Xcode。

现在，我在下面的代码中遇到了很大的麻烦：

AppDelegate.h

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate, CLLocationManagerDelegate, MKMapViewDelegate> {

    IBOutlet UIActivityIndicatorView *activityIndicator;
    IBOutlet UITextField *locationTitleField;
    IBOutlet MKMapView *worldView;
    IBOutlet CLLocationManager *locationManager;

}

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UIViewController *viewController;

@end 
```

AppDelegate.m

```
 #import "AppDelegate.h"

    #import "ViewController.h"

    @implementation AppDelegate

    @synthesize window = window;
    @synthesize viewController = viewController;

    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        locationManager = [[CLLocationManager alloc]init];
        [locationManager setDelegate:self];
        [locationManager setDistanceFilter:kCLDistanceFilterNone];
        [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
        [worldView setShowsUserLocation:YES];

        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
        self.window.rootViewController = self.viewController;
        [self.window makeKeyAndVisible];
        return YES;
   }

    - (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation {
     // Yes, no code here, but here's the point, where I'm getting crashes, no matter if
     // there is some code in here, or not
    }
    @end 
```

问题是，当我尝试启动应用程序时，一切都很好。但是“didUpdateUserLocation”真的让我发疯了。我已经打开了 Zombie Objects，现在 Xcode 告诉我：

```
[AppDelegate mapView:didUpdateUserLocation:]: message sent to deallocated instance 0xde1b700
(lldb) 
```

我已经（！）打开了新的 ARC 东西，但是我把它关掉了，仍然得到同样的错误。如您所见，我的代码中什至没有至少一个版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:35:35.140

您误解了错误消息。您在消息被解除分配或委托集无效`AppDelegate`后被发送。此方法中的内容无关紧要，重要的是应用程序委托不是有效对象。您没有说何时收到此错误并且您没有显示足够的代码来告诉您，但是您的设置不正确或退出时正确拆除。`mapView:didUpdateUserLocation:``MKMapView``worldView`

为什么你被`locationManager`声明为一个`IBOutlet`然后由你分配/初始化？您在 nib 文件中为此对象所做的任何设置都将通过替换它而丢失，并且如果没有 ARC，原始文件将会泄漏。

# c# - 调用在字符串中定义的 ac# 函数

> ID：11593633
> 
> 赞同：0
> 
> 时间：2012-07-21T15:54:19.690
> 
> 标签：c#, string

> **可能重复：**
> [如何动态评估 C# 表达式？](https://stackoverflow.com/questions/53844/how-can-i-evaluate-a-c-sharp-expression-dynamically)

让我用一个例子来描述我的问题。我的程序中有一个字符串变量：

```
string func = @"
void printHello()
{
    Console.WriteLine(""Hello world!"");
}
"; 
```

有什么方法可以让我调用这个 printHello 函数吗？

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:14:54.650

看看 CS-Script，它是一个开源的 C# 脚本执行引擎

[http://www.csscript.net/](http://www.csscript.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:17:35.217

[您可以使用CodeDomProvider](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.aspx)动态创建和执行代码。

看这里的例子：http: [//blogs.msdn.com/b/digitalnetbizz/archive/2004/01/31/create-assembly-in-memory-and-run-it.aspx](http://blogs.msdn.com/b/digitalnetbizz/archive/2004/01/31/create-assembly-in-memory-and-run-it.aspx)

# android - Changing the colors in progressbar

> ID：11593637
> 
> 赞同：0
> 
> 时间：2012-07-21T15:54:33.703
> 
> 标签：android, android-layout

I am using a progressbar, yet it appears to be all in white. When I used the same code on a previous project, I got a black background and it looked perfect. How can I change it so that the background is black again. I use this code to launch the progressbar

```
 ProgressDialog.show(this, "", "Searching...", true); 
```

Do I need to set something in my xml file for this screen?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:50:59.553

I'm guessing that your current app is using the Holo Light theme, and that your previous app used Holo Dark. You can see examples of progress bars in both [here](http://developer.android.com/design/building-blocks/progress.html).

You can change your app's theme to Holo Dark by adding the following to your manifest's `<application>` tag: `android:theme="@android:style/Theme.Holo.Dark"`. The Android Developer pages contain more information on themes [here](http://developer.android.com/guide/topics/ui/themes.html).

# ios - glReadPixels 返回全零

> ID：11593639
> 
> 赞同：1
> 
> 时间：2012-07-21T15:54:50.443
> 
> 标签：ios, opengl-es

我正在使用以下代码来访问 iOS 屏幕像素：

```
int width = 1536;
int height = 2048;
GLubyte *buffer = (GLubyte *) malloc(width * height * 4);
glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, buffer); 
```

问题是缓冲区只返回零。画面看起来不错。知道为什么它会返回 0 而不是屏幕数据吗？

glGetError() 返回 0，所以我假设没有错误。

这是在 iPad 3 上运行的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-21T16:00:42.917

试试这个解决方案：[Reading data using glReadPixel() with multisampling](https://stackoverflow.com/questions/6869577/reading-data-using-glreadpixel-with-multisampling)

# php - 如何使用 ajax 返回成功/失败消息？

> ID：11593642
> 
> 赞同：0
> 
> 时间：2012-07-21T15:55:25.730
> 
> 标签：php, jquery, html, ajax

我正在使用 MailChimp 的 API，我可以通过将电子邮件地址传递到特定 URL 来成功订阅电子邮件地址。提交电子邮件后，MailChimp 会回显成功或失败代码。

示例：myurl.com/subscribe.php?email=example@gmail.com

**我需要什么帮助**

我的表单没有显示基于 MailChimps 返回代码的成功/失败消息。我究竟做错了什么？

[http://jsfiddle.net/WarrenBee/c4MWX/](http://jsfiddle.net/WarrenBee/c4MWX/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:09:52.210

只要我猜测评论，我就会猜测答案。我去`http://yoursite.com/subscribe/mcapi_listSubscribe.php?email=joe@joe.com`了我的浏览器。我懂了：

`Unable to load listSubscribe()! Code=220 Msg="joe@joe.com" has been banned`

所以，你的服务器端代码有问题。它无法加载名为 listSubscribe() 的函数。此外，无论如何，您不会返回[JSON 格式](http://json.org)的内容，但您的 ajax 调用期望这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:04:17.330

它不起作用，因为 ajax 操作失败。您正在尝试发布到不同域中的 URL，并且该特定服务器未设置为允许这样做。

# c++ - 前向声明要在基类中使用的派生类会导致缺少默认构造函数错误

> ID：11593649
> 
> 赞同：0
> 
> 时间：2012-07-21T15:56:21.677
> 
> 标签：c++

有一个复杂的程序不断抛出缺少的默认构造函数错误，经过多次修补，我发现完全相同的场景给出了相同的错误。这有什么问题？

```
class B;

class A
{
public:
    A() {instance = new B;}
    virtual ~A() {delete instance;}
private:
    A*instance;
};

class B : public A
{
public:
    B(){}
} 
```

不能转发声明要在基类中使用的派生类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:59:27.460

`new B`如果编译器对类一无所知，怎么能成功`B`呢？如果将成员函数实现移出类`A`定义下方的类`B`，它应该可以工作：

```
class A
{
public:
    A();
    virtual ~A();
private:
    A * instance;
};

class B : public A
{
public:
    B(){}
};

A::A()
{
    instance = new B;
}

A::~A()
{
    delete instance;
} 
```

A 和 B 到底是什么？让基类实例化派生类确实有点不寻常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:59:53.180

您需要将 A 的构造函数的定义（但不是声明）放在 A 之外，在 B 的定义之后。在 A 中使用 B 是可以的，只要您不需要它是完整的（完全定义的） -`new B`肯定会.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:09:16.237

关于编译器如何向前看的 c++ 规则并不明显（例如，`instance`即使成员在类中稍后定义，但可以在方法中使用，但不能使用稍后在同一源文件中定义的类） .

在这种情况下，问题（正如其他报告的那样）是编译时编译`new B`器必须了解`B`的不仅仅是它是一个类，它不会继续阅读该类`A`以查看 a 到底是什么`B`。

一种可能的解决方案是将构造函数和析构函数的定义**放在**`A`后面（仍然将它们内联）：

```
class B;

class A
{
public:
    A();
    virtual ~A();
private:
    A *instance;
};

class B : public A
{
public:
    B() {}
};

inline A::A() { instance = new B; }
inline A::~A() { delete instance; } 
```

这会编译但不会正确运行，因为您在这里尝试做的确实很困惑。

要创建 的实例，`A`您需要创建 的实例`B`，但`B`它是 的特化`A`，因此当您创建实例时，`B`您还将创建`A`（的`A` **基础子对象**）的实例`B`。

这意味着要创建一个实例，`A`您需要间接创建一个`A`.

听起来很绕圈，不是吗？

使用此代码实例化`A`（或`B`）的实例将导致无限递归（即在大多数实现中出现奇怪的崩溃）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-21T16:00:39.010

不，因为派生类可能包含其他元素。所以你不能用它来用派生类对象初始化基类对象。

# google-app-engine - BadRequestError：事务中只允许祖先查询

> ID：11593655
> 
> 赞同：1
> 
> 时间：2012-07-21T15:57:20.610
> 
> 标签：google-app-engine, transactions, google-cloud-datastore

```
from google.appengine.ext import db

class Parent(db.Model):
    app_id = db.StringProperty()

class Child(db.Model):
    app_id = db.ReferenceProperty(Parent,collection_name='children')
    type = db.StringProperty()
    count = db.IntegerProperty()

@db.transactional
def increment_counter(app,childName):
    childA = Child.all().ancestor(app).filter('type =',childName).get()
    if  childA is not None:
        obj = db.get(childA.key())
        obj.count += 1
        obj.put()
    else:
        childA = Child(app_id=app.key(),type=childName,count=0)
        childA.put()

increment_counter(Parent.all().filter('app_id =',app_id).get().key(),childKey) 
```

如果 childA 为空，则 put() 上的标题错误将失败。

在我的脑海中，如果它尚不存在，我想将一个新的子实体附加到我在事务中使用的单个父实体，否则进行增量。为什么这不被视为祖先查询，我应该做什么来获得我想要的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:54:02.300

好的，似乎在离开 App Engine 一段时间后，我混淆了实体父级和 ReferenceProperty 的独立概念。

正确的代码：

```
class Parent(db.Model):
    app_id = db.StringProperty()

class Child(db.Model):
    type = db.StringProperty()
    count = db.IntegerProperty()

@db.transactional
def increment_counter(app,childName):
    childA = Child.all().ancestor(app).filter('type =',childName).get()
    if  childA is not None:
        obj = db.get(childA.key())
        obj.count += 1
        obj.put()
    else:
        childA = Child(parent=app,type=childName,count=0)
        childA.put()

increment_counter(Parent.all().filter('app_id =',app_id).get().key(),childKey) 
```

# tsql - SQL 2000 TSQL - 创建数据透视表

> ID：11593662
> 
> 赞同：0
> 
> 时间：2012-07-21T15:58:15.227
> 
> 标签：tsql, linq-to-sql, ms-access, sql-server-2000, crosstab

我真的很想弄清楚如何将 MS Access CrossTab 查询转换为 T-SQL 以在 SQL2000 上运行或转换为 Linq-to-SQL。我有一个在 Access 中看起来像这样的查询：

![访问跨表查询](../Images/94e6ade26aafc5b9c560cefb990d27d1.png) 并产生这个： ![访问跨表查询结果](../Images/209cae1ca72a9caddbeb1c08258eeb54.png)

该查询基本上按 ItemID 和 StoreID 分组，并对销售的数量求和，但使用 Access 中的 CrossTab 查询，我可以为每一行拥有一个唯一的 ItemID，为每个 StoreID 提供一个列，以及每个 StoreID/ItemID 组合的总数量作为价值。

您如何在 T-SQL 2000 中构造它？我可以使用分组构建一个简单的选择查询，但它为我提供了三列中的数据，StoreID、ItemID 和 Qty。但我需要的是 ItemID 的列和结果集中每个 StoreID 的列

```
SELECT     Trans.TranSID as StoreID, TransDetail.TranItemID as ItemID, SUM(TransDetail.Qty) AS TotalQtyForStore
    FROM         Trans INNER JOIN
                          TransDetail ON Trans.TranID = TransDetail.TranID INNER JOIN
                          Item ON TransDetail.TranItemID = Item.ItemID
    WHERE     (Trans.TranDate > CONVERT(DATETIME, '2005-01-01 00:00:00', 102)) AND (Trans.TranTypeID = 'so' OR
                          Trans.TranTypeID = 'ca') AND (Trans.TranStatus <> 'v') AND (Item.ItemClassID = 'RHM')
    GROUP BY Trans.TranSID, TransDetail.TranItemID 
```

产生这个：

![在此处输入图像描述](../Images/674167257c69f55d15749b88b5971dd3.png)

但我真正需要做的是转换这些数据，使 StoreID 值变成列，就像上面的 Access CrossTab 查询一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:23:53.260

我会使用动态 SQL 来执行此操作，因为您可能事先不知道所有存储 (TranSID) 值。此存储过程将开始/结束日期作为参数，并生成一个交叉表。您可能还可以参数化其他一些东西，例如 TranStatus 和 ItemClassID，但不清楚这些是查询中的固定元素还是可变元素。

```
CREATE PROCEDURE dbo.CrossTabByItem
  @StartDate DATETIME,
  @EndDate   DATETIME = NULL
AS
BEGIN
  SET NOCOUNT ON;

  SET @EndDate = COALESCE(DATEADD(DAY, 1, @EndDate), GETDATE());

  DECLARE @sql NVARCHAR(4000); SET @sql = N'';

  SELECT @sql = @sql + ',
    [' + TranSID + '] = SUM(CASE WHEN t.TranSID = ''' 
    + TranSID + ''' THEN td.Qty ELSE 0 END)' FROM 
    (
      SELECT DISTINCT TranSID FROM dbo.Trans
      WHERE TranDate >= @StartDate AND TranDate < @EndDate
    ) AS x ORDER BY TranSID;

    SET @sql = N'SELECT ItemID = td.TranItemID' + @sql + '
      FROM dbo.Trans AS t
      INNER JOIN dbo.TransDetail AS td
       ON t.TranID = td.TranID
      INNER JOIN dbo.Item AS i
       ON td.TranItemID = i.ItemID
      WHERE t.TranDate >= @StartDate
      AND t.TranDate < @EndDate
      AND t.TranTypeID IN (''so'',''ca'')
      AND t.TranStatus <> ''v''
      AND i.ItemClassID = ''RHM''
      GROUP BY td.TranItemID;';

    EXEC sp_executesql @sql, 
      N'@StartDate DATETIME, @EndDate DATETIME', 
      @StartDate, @EndDate;
END
GO 
```

所以你可以这样称呼它，以获取从 2005 年 1 月 1 日到现在的所有内容：

```
EXEC dbo.CrossTabByItem @StartDate = '20050101'; 
```

或者像这样，得到 2005 年 1 月：

```
EXEC dbo.CrossTabByItem @StartDate = '20050101', @EndDate = '20050131'; 
```

# file - 读取大小超过 1.5gb 的文件

> ID：11593663
> 
> 赞同：0
> 
> 时间：2012-07-21T15:58:15.167
> 
> 标签：file

我需要查看大小为 1.8gb 的 json 文件的内容。每当我试图在任何文本编辑器中打开它时，它都无法打开它。有没有办法通过将文件分成更小的块或任何其他强大的编辑器来查看内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:06:41.710

也许这个问题应该迁移到[SuperUser](https://superuser.com/)或类似的。
但是，如果您在 Linux 环境下，您可以在命令行上执行以下操作：

```
cat myfile.json | less 
```

从更少的手册页：

> 此外，less 不必在开始之前读取整个输入文件 (...)

# php - 在 PHP 中比较路径字符串与通配符

> ID：11593664
> 
> 赞同：4
> 
> 时间：2012-07-21T15:58:20.747
> 
> 标签：php, string, compare

如何比较这个字符串：

```
commodity/search/oil/branch/index 
```

有了这个 ：

```
commodity/search/*/branch/index 
```

尽管“油”被替换为其他词，但它应该返回 true。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T16:00:16.473

```
$match = preg_match("/commodity\/search\/(.*)\/branch\/index/", "commodity/search/someotherword/branch/index"); 
```

`$match`如果找到匹配项，将为真（或某个值评估为真，如 1）。

注意：以上将匹配任何额外的路径，例如`commodity/search/some/other/word/branch/index`

如果你只想匹配一个单词，而不是类似于路径结构的东西，那么你可以尝试这样的事情：

```
$match = preg_match("/commodity\/search\/[A-Za-z0-9_-]+\/branch\/index/", "commodity/search/some-OTHER_word/branch/index"); 
```

这只会匹配大小写的 az 字符、数字、连字符和下划线。根据需要进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-27T09:20:25.327

PHP 有一个内置函数，称为[fnmatch()](http://php.net/fnmatch)。

它提供了基本通配符的用法。

```
<?php

if (fnmatch('commodity/search/*/branch/index', 'commodity/search/oil/branch/index')) {
    echo "It matches!";
} 
```

但是，非 POSIX 兼容系统不支持它（请参阅 PHP 手册）。

# java - 如何访问本地 .properties 变量？Java Swing 正确的变量使用

> ID：11593670
> 
> 赞同：2
> 
> 时间：2012-07-21T15:59:05.370
> 
> 标签：java, swing, variables, try-catch

是什么导致我无法在此代码中使用“strAppName”变量？我有评论现在显示`/*strAppName*/`在这里；`JFrame frame = new JFrame(/*strAppName*/);`

当我运行`System.out.println(strAppName);`它时，它会以应用程序名称显示在 Eclipse 控制台中。谢谢！

```
package base;

import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.io.*;
import java.util.*;

import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class StickyNotes extends JFrame {

    private static final long serialVersionUID = 1L;

    public final static String SAVE_CHANGES = "Save changes?";
    public final static String TITLE_AYS = "Are You Sure?";

    private void createStickyNotesGUI() {

        Properties configProperties = new Properties();
        try {

            FileInputStream fileInputStream = new FileInputStream("resources/config.properties");
            configProperties.load(fileInputStream);        
            String strAppName = configProperties.getProperty("appName");
            //System.out.println(strAppName);
            fileInputStream.close(); // better in finally block ?? /* http://en.wikipedia.org/wiki/.properties */
        } catch (Exception ex){
            //TODO
            System.out.println("Exception: " + ex);
        }

/*      LoadPropertiesExample config = new LoadPropertiesExample();
        config.loadProps2();
        config.sayHello();*/

        // Create and set up the window.
        JFrame frame = new JFrame(/*strAppName*/);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout(FlowLayout.LEFT));

        // Add Main Menu
        MainMenuBar mainMenu = new MainMenuBar();
        frame.setJMenuBar(mainMenu.createMainMenuBar(frame));

        // Add Content Pane // can I pass a layout object?
        frame.setContentPane(ContentPaneCreator.createContentPane());
        // contentPane.add(scrollPane, BorderLayout.CENTER);

        // Add Tool Bar
        ToolBarCreator toolBar = new ToolBarCreator();
        frame.getContentPane().add(toolBar.createToolBar(), BorderLayout.NORTH);

        // Add Label
        frame.getContentPane().add(
                LabelCreator.createLabel(frame,
                        "use Swing and JavaFX together."), BorderLayout.NORTH);

        // Display the window.
        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
        // TODO 
        /*set configuration to remember frame size*/

        frame.setVisible(true);
    }

    public void doExit(JFrame frame) {
        boolean fDirty = true;
        if (fDirty)
            switch (JOptionPane.showConfirmDialog(StickyNotes.this, SAVE_CHANGES,
                    TITLE_AYS, JOptionPane.YES_NO_OPTION)) {
            case JOptionPane.YES_OPTION:
                // if (doSave())
                frame.dispose();
                break;
            case JOptionPane.NO_OPTION:
                frame.dispose();
            }
        else
            frame.dispose();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new StickyNotes().createStickyNotesGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T16:03:48.503

您不能`strAppName`在`JFrame`构造函数中使用，因为它超出了范围。您在 try/catch 块中声明它。

试试这个：

```
 String strAppName = null;
    try {

        FileInputStream fileInputStream = new FileInputStream("resources/config.properties");
        configProperties.load(fileInputStream);        
        strAppName = configProperties.getProperty("appName");
        //System.out.println(strAppName);
        fileInputStream.close(); // better in finally block ?? /* http://en.wikipedia.org/wiki/.properties */
    } catch (Exception ex){
        //TODO
        System.out.println("Exception: " + ex);
    } 
```

# entity-framework - 实体框架二级包含在预测中

> ID：11593672
> 
> 赞同：3
> 
> 时间：2012-07-21T15:59:32.830
> 
> 标签：entity-framework, linq-to-sql

我想在单个查询中检索一组对象 ( `A`) 和一些相关对象 ( )。`B`没有导航属性`A`，`B`所以我相信我需要使用以下语法：

```
select a from db.As where a.Id = x select new AndBHolder
{
   A = a,
   Bs = select b from db.Bs where b.ASomeId == A.SomeId select b
} 
```

我不确定这是否是最好的方法，但它确实有效。但是，我现在需要包含`B`（列表`Cs`）的属性。我没想到它会起作用，但我尝试了：

```
select a from db.As where a.Id = x select new AndBHolder
{
   A = a,
   Bs = select b from db.Bs.Include("Cs") where b.ASomeId == A.SomeId select b
} 
```

失败并显示“方法...包含在类型上声明的...不能用类型的实例调用...”。接下来我想我会在投影中尝试投影：

```
select a from db.As where a.Id = x select new AndBHolder
{
   A = a,
   Bs = select b from db.Bs where b.ASomeId == A.SomeId select new B
        {
           Id = b.Id,
           // ...
           Cs = select c from db.Cs where c.BId == b.Id select c
        }
} 
```

失败并显示“`B`无法在 LINQ to Entities 查询中构造实体或复杂类型''”，因为您不允许投影到映射对象中。那么我如何检索`Bs`他们`Cs`填充的内容，或者不支持二级包含？我是否只需要对数据库进行两次调用，一次是检索 As ，一次是`Bs`使用他们的检索`Cs`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T16:45:10.570

如果您使用`select new`不能`Include`再使用的投影，它将被忽略。相反，您必须将相关实体添加到投影数据中，例如：

```
var query = from a in db.As
            join b in db.Bs on a.SomeId equals b.ASomeId into bGroup
            where a.Id = x
            select new AndBHolder
            {
                A = a,
                Bs = bGroup, // Bs must be of type IEnumerable<B>
                Cs = bGroup.SelectMany(bg => bg.Cs) // Cs is IEnumerable<C>
            }; 
```

`B`如果和之间的关系`C`是一对多（不是多对多），则 EF 应该`Cs`在每次加载时`B`自动填充集合（这称为“关系修复”），这意味着您可以`Cs`在数据之后从投影中丢弃已从数据库加载。要将这些放在一起，您可以尝试像这样编写查询：

```
var query = (from a in db.As
             join b in db.Bs on a.SomeId equals b.ASomeId into bGroup
             where a.Id = x
             select new
             {
                 A = a,
                 Bs = bGroup,
                 Cs = bGroup.SelectMany(bg => bg.Cs)
             })
             .AsEnumerable() // DB query gets executed here
             .Select(y => new AndBHolder
             {
                 A = y.A,
                 Bs = y.Bs // the Cs in every B should be populated here
             }); 
```

# c++ - 轻量级 SQL 数据库

> ID：11593673
> 
> 赞同：1
> 
> 时间：2012-07-21T15:59:37.633
> 
> 标签：c++, .net, sql, database, sqlite

我正在开发一个 .Net 客户端应用程序（用 C++ 编写），我想与一个轻型 sql 数据库集成。我考虑过使用 SqlLite 或 SqlExpress。

还有哪些其他选项可用？哪个是更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:03:48.267

一些选项：

1.  [Sqllite](http://www.sqlite.org/)：无需安装 - 只需 dll。非常轻巧、强大且经过验证（他们声称是世界上安装最多的数据库）。
2.  [Sql Compact](http://blogs.msdn.com/b/sqlservercompact/archive/2011/01/12/microsoft-sql-server-compact-4-0-is-available-for-download.aspx)：无需安装 - 只是一个 dll，不支持所有 sql 语法，如 sql express 或 sql server。
3.  [SQL Express](http://msdn.microsoft.com/en-us/evalcenter/hh230763.aspx)：比 SQL 服务器更轻巧，并且兼容 SQL 语法。
4.  [SQL LocalDB](http://msdn.microsoft.com/en-us/library/hh510202.aspx)：仍然有安装程序，但不需要运行 Windows 服务。sqlserver.exe 按需启动。支持 SQL server 和 express 的 SQL 语法。

这也可能有所帮助：http: [//blogs.msdn.com/b/jerrynixon/archive/2012/02/26/sql-express-v-localdb-v-sql-compact-edition.aspx](http://blogs.msdn.com/b/jerrynixon/archive/2012/02/26/sql-express-v-localdb-v-sql-compact-edition.aspx)

如果这是一个桌面轻应用程序 - 如果您需要更完整的 t-sql 功能，我会推荐 sqlite 或 sqlcompact 以及可能的 localdb。只需要复制一个二进制文件来访问进程内数据库的简单性对于客户端应用程序来说非常有用。请注意，LocalDB/SQLExpress 仍然有一个安装程序，并且 SQLExpress 将 Windows 服务添加到客户端框，这可能是矫枉过正并增加了复杂性。

# c++ - 在加载 MSVisual c++ 时重命名表单

> ID：11593676
> 
> 赞同：0
> 
> 时间：2012-07-21T16:00:00.220
> 
> 标签：c++, visual-studio-2010, forms, c++-cli, rename

有人知道如何重命名表单 onLoad？我试过了：

```
private: System::Void General_Load(System::Object^  sender, System::EventArgs^  e) {
         String^ test = "test";
         String^ x= "General: " + test;
         this->Name = x;
         } 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:23:16.997

我应该使用 this->Text = x; 不是这个->名称= x；

# linux - 如何在 gdb 中搜索进程的所有内存？

> ID：11593678
> 
> 赞同：8
> 
> 时间：2012-07-21T16:00:04.607
> 
> 标签：linux, debugging, gdb

我试图在我目前使用 GDB 附加到的正在运行的进程中找到某个值（整数幻数（654321））。我找到了一个`find [/sn] start_addr, +len, val1 [, val2, ...]`命令，但它需要开始和结束地址，但我不知道我的进程内存从哪里开始以及在哪里结束。

这似乎是一个很常见的问题，但我记得一年前在谷歌上搜索过，现在我重复了一遍，但没有成功，所以..我怎么知道进程内存从哪里开始和在哪里结束？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T16:45:48.623

“所有记忆”的概念在现代过程中是复杂的。您真正拥有的是来自不同来源的许多映射。通过在运行时读取[`/proc/$pid/maps`](http://kernel.org/doc/man-pages/online/pages/man5/proc.5.html)，然后编写一些脚本来为 gdb 提供适当的命令。老实说，我认为在二进制文件本身中编写一个例程来执行此操作并从 gdb 调用它可能是最简单的。

# ruby - 无法点击 td 元素

> ID：11593679
> 
> 赞同：1
> 
> 时间：2012-07-21T16:00:08.520
> 
> 标签：ruby, mechanize

我正在尝试使用 Ruby 和 Mechanize从网站[http://www.radiojavan.com/mp3s/mp3/Aamin-Sarbaz下载歌曲。](http://www.radiojavan.com/mp3s/mp3/Aamin-Sarbaz)有一个“下载 MP3”，但当我检查它时，它不是链接而是 td。

```
agent = Mechanize.new
agent.pluggable_parser.default = Mechanize::FileSaver
download_page = agent.get('http://www.radiojavan.com/mp3s/mp3/Aamin-Sarbaz') 
```

当我在浏览器中导航时，我可以点击它的链接。但在代码中这是元素。如何点击这个 td 元素？

如果我尝试：

```
download_page.search('div#download_mp3 table tr td')[1].click.save_as 'proba.mp3' 
```

它引发错误： `<top (required)>': undefined method`从 -e:1:in 中单击“for # (NoMethodError) `load' from -e:1:in`”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:05:36.803

我给出的一个建议是下载 firerbug，然后使用 html 部分检查 td 元素以右键单击副本 Xpath，它将为您提供如下内容：

```
/html/body/div[4]/div[2]/div/div[2]/div/table/tbody/tr/td/div/a[2] 
```

希望这将是您所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T03:38:59.957

您不能“点击”一个 td，部分原因是没有 href 属性。由于下载是使用 javascript 处理的，因此您将无法使用 mechanize 轻松获得它。

# javascript - 如何将 RSS 提要推送到 HTML5 通知？

> ID：11593680
> 
> 赞同：0
> 
> 时间：2012-07-21T16:00:08.337
> 
> 标签：javascript, html, api, rss, websocket

我想将 RSS 提要更新推送到 HTML5 桌面通知，如果用户在 Chrome 中打开我的网站，他们会收到这些通知。

我收集到我需要做以下事情（比我聪明得多的人在概述中解释了这一点） - 创建一个服务器端组件，它将轮询提要以获取更新；然后也许将它们存储在数据库中（？）。然后客户端组件将检查更新并使用 HTML5 通知 API 显示它们。

有没有人证实这一点，如果可能的话，请帮助我提供更多细节，以便我可以找到完成这项工作所需的各个方面？非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T01:37:12.447

我将假设您使用的是 jQuery，并且您不介意使用插件。在本例中，我们将使用[jFeed](https://github.com/jfhovinne/jFeed)插件来解析 RSS 代码。

```
// Desktop notifications are only available on WebKit browsers, for now, so only carry out
// notifications if the API is available.
if (window.webkitNotifications) {

    // Just a piece of data to determine whether 1) the page just loaded, and 2) there are any
    // new elements in the feed.
    var lastTime = null;

    // This is to check if you have permissions to display notifications. Usually, the
    // checkPermissions method only returns a number. 0 being that you don't have permission
    // to display notifications, yet.
    if (window.webkitNotifications.checkPermissions() <= 0) {
        // If you don't have permission, then get the permission from the user.
        window.webkitNotifications.requestPermission(callback);
    }

    // The code below will run every thirty seconds.
    setInterval(function () {
        // What we want to do here is carry out an AJAX request to check for changes in the RSS
        // feed only if we have permission to display notifications. Otherwise, what's the point
        // of checking for changes if the user doesn't want to know?
        if (window.webkitNotifications.checkPermissions() > 0) {
            $.jFeed({
                url: 'urltofeeds',
                success: function (feed) {
                    // Looks at the latest item's time, and checks to see if it's any different
                    // than what we have in memory.
                    if (lastTime !== feed.items[0].updated) {

                        // If so, determine whether we recorded the time, or not.
                        if (lastTime !== null) {
                            // If we did record the time, that means there are new content from
                            // the last time we checked.
                            window.webkitNotifications()
                        }

                        // Update the last time.
                        lastTime = feed.items[0].updated;
                    }
                }
            });
        }
    }, 30000);
} 
```

> 我收集到我需要做以下事情（比我聪明得多的人在概述中解释了这一点） - 创建一个服务器端组件，它将轮询提要以获取更新；然后也许将它们存储在数据库中（？）。

听起来你的朋友描述了[long-polling](http://en.wikipedia.org/wiki/Push_technology#Long_polling)。对于像博客这样简单的事情，这是完美主义者的做法。

简单的轮询将是同样的事情。不同之处在于，通知只会在每个轮询间隔显示，而不是立即显示。

# apache - 在 Ubuntu Apache 服务器上强制使用小写 URL 进行反向代理

> ID：11593691
> 
> 赞同：0
> 
> 时间：2012-07-21T16:00:52.627
> 
> 标签：apache, ubuntu, apache2, reverse-proxy

如何重写进来的请求，使其全部为小写？我环顾四周，一些答案是使用重写模块，但这些不是针对使用反向代理的特定情况。

我想要的是这样的请求：

`http://mywebsite/SomeApPlIcAtIon`

转换为：

`http://mywebsite/someapplication/`

有什么建议么？

**更新：**

我已经用我认为应该是正确的设置了它，我的 httpd.conf 看起来像这样：

```
servername localhost
RewriteEngine on
RewriteLog "/var/log/apache2/rewrite.log"
RewriteLogLevel 9
RewriteMap lc int:tolower
RewriteCond %{REQUEST_URI} [A-Z]
RewriteRule (.*) ${lc:$1} [R=301,L] 
```

我的反向代理设置在 conf.d 中名为 sabnzbd.conf 的文件中，如下所示：

```
ProxyRequests Off
ProxyPreserveHost On
<Proxy *>
    Order allow,deny
    Allow from all
</Proxy>
ProxyPass /sabnzbd/ http://192.168.21.21:9999/sabnzbd/
ProxyPassReverse /sabnzbd http://192.168.21.21:9999/sabnzbd/ 
```

在我启用的站点中，我的 000 默认`AllowOverride`设置为`All`

当我去 192.168.21.21/sabnzbd/ 它工作得很好。

当我转到 192.168.21.21/SABNZBD/ 时，我得到一个 404。重写规则不起作用。

当我去我的重写日志文件检查它时，没有数据。

出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:04:12.337

假设您在 Ubuntu 上使用 Apache 服务器 - 您可以使用 mod_rewrite 模块。

您可以关注此博客（网址： http: [//www.chrisabernethy.com/force-lower-case-urls-with-mod_rewrite/](http://www.chrisabernethy.com/force-lower-case-urls-with-mod_rewrite/)），它描述了配置模块的步骤。

# windows - Sass 和 Compass 的 Netbeans 插件

> ID：11593693
> 
> 赞同：1
> 
> 时间：2012-07-21T16:01:23.783
> 
> 标签：windows, netbeans, sass, compass-sass, netbeans-plugins

Windows 中是否有同时支持 Sass 和 Compass 的 Netbeans 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:03:59.373

[最近](https://blogs.oracle.com/netbeanswebclient/entry/editing_css_preprocessors_sources)在 Netbeans 代码库中添加了对 SASS 的本机支持- 在下一个主要版本发布之前，您可以使用当前的“[开发版本](http://bits.netbeans.org/download/trunk/nightly/latest/)”获得它。

对于编译支持，你仍然需要分别安装 ruby​​、sass 和 compass，并将 netbeans 指向它的路径（Options -> Miscellaneous -> CSS Preprocessors）。

# jquery - FancyBox + Windows IE/FF = 失败

> ID：11593695
> 
> 赞同：0
> 
> 时间：2012-07-21T16:01:37.040
> 
> 标签：jquery, internet-explorer, firefox, fancybox, fancybox-2

我有一个 FancyBox (2.0.5) 页面，它可以在除 IE 和 FF for Windows 之外的所有浏览器上精美显示。我可能只是需要一些新的眼光。

这是我的代码：

```
$('.fancybox').fancybox({
 'type': 'iframe', 
 'width': 800, 
 'height': 580
}); 
```

如您所见，它非常基本。我没有使用任何帮助程序，也没有修改默认 CSS。

在每个 Mac 浏览器和 PC 版 Chrome 上，我得到这个：

![在此处输入图像描述](../Images/99b040036a54e43661e0af09bb314ce5.png)

这正是我应该得到的（尽管我可以不使用滚动条）。

在 IE 7 & 8（尚未尝试过 9）和 FF for Windows 上，我得到了这个：

![在此处输入图像描述](../Images/22aaca1849f889aa7d34b1a4925aea2b.png)

没有框架，没有背景，也没有关闭按钮。此外，您无法关闭它；你必须刷新。

我在这里缺少什么吗？

这是一个链接： http: [//www.downtownmuncie.org/business/search2/arts/](http://www.downtownmuncie.org/business/search2/arts/)您需要单击小地图下的“缩放地图”链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T06:45:01.737

如果您想让fancybox 可用，您需要在您的网站中修复很多事情（而且很可能还有其他事情。）

**首先**，第 153 和 154 行：当您实际需要一个时，您正在加载 2 个 fancybox 实例

```
<script src="http://www.downtownmuncie.org/s/fancybox/jquery.fancybox.js" type="text/javascript"></script>
<script src="http://www.downtownmuncie.org/s/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script> 
```

选择其中任何一个，但不能同时选择两者。

**其次**，您的问题的真正问题是第 155 行

```
<link href="http://www.downtownmuncie.org/s/fancybox/jquery.fancybox.css" type="text/javascript" type="text/css" rel="stylesheet" > 
```

请注意，您拥有`type="text/javascript"`并且`type="text/css"`这就是为什么无法加载 fancybox css 文件，因此它显示奇怪（复制和粘贴可能非常危险。）`type="text/javascript"`从该行中删除，并且建议将其移动到`<head>`文档的部分。

**第三**，你有第 4 行和额外的双引号 " 所以你的文档没有字符编码信息；这部分：

```
content="text/html; charset="utf-8" 
```

应该

```
content="text/html; charset=utf-8" 
```

如果你能找到差异（提示：一切都是`content`价值）

**第四也是最后**，第158行

```
<script type="text/javascript">
$('a.fancybox').fancybox({
 'type': 'iframe', 
 'width': 800, 
 'height': 580
});
</script> 
```

将您的脚本包装在`.ready()`方法中，例如

```
<script type="text/javascript">
$(document).ready(function(){
 $('a.fancybox').fancybox({
  'type': 'iframe', 
  'width': 800,
  'height': 580
 });
});
</script> 
```

这是通过[http://fancyapps.com/fancybox/#instructions的方式记录的](http://fancyapps.com/fancybox/#instructions)

还建议使用[验证器](http://validator.w3.org/)来检查和修复所有小的 html 编码错误。

# c# - c# 在类方法中添加“this”可选

> ID：11593697
> 
> 赞同：1
> 
> 时间：2012-07-21T16:01:55.520
> 
> 标签：c#

我有一个看起来像这样的对象的类：

```
public class SomeObject
{
   int SomeInt { get; set; }

   public void SomeMethod()
   {
       var SomeVar = this.SomeInt;
       var SomeVar2 = SomeInt;
   }
} 
```

当我在类方法中引用类属性时，如果我编写`this.SomeInt`而不是`SomeInt`像我分配时那样，它是否会使代码更好/更快/更安全`SomeVar2`？

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T16:04:15.413

它不会影响输出，因为 MSIL 是相同的。

如果您没有任何将类变量与局部变量不同的变量命名约定，我“可能”会更安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:04:16.393

使用“这个”。不会改变代码的生成方式。因此，性能和安全性不受影响。无论您是否包括“这个”。当你不需要时，这是一个风格问题。一些风格指南建议使用“this”。总是在会员上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T16:11:36.453

您可能需要添加“this”的一些示例是当您在同一范围内有一个局部范围变量（Resharper 或 VS，我忘记了，应该通知您）时，例如：

```
string name;
void SetName(string name)
{
     this.name = name;
} 
```

或者，如果您出于某种原因从另一个派生构造函数：

```
public void Person(string Name, int age) : this(age)
{
}
public void Person(int age)
{
} 
```

否则，它不会对编译产生任何影响，但我仍然偶尔会使用它来明确区分字段和参数，因为它们可能会令人困惑等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T04:05:28.713

在编译时没有区别。正如上面很少有人建议的那样，它使您的代码更具可读性，但我认为这只是访问类变量的另一种方式。

# ruby-on-rails - 如何在 Rails 控制台/服务器中显示 MongoDB 查询

> ID：11593698
> 
> 赞同：2
> 
> 时间：2012-07-21T16:02:01.433
> 
> 标签：ruby-on-rails, mongodb, mongomapper, rails-console

我尝试将 MongoDB 与 Rails 一起使用（我以前从未尝试过 MongoDB）。我想在rails控制台或rails服务器中显示mongomapper所做的查询（就像ActiveRecord一样）

有办法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:59:02.863

在创建连接时，您可以通过将日志实例传递给 ruby​​ 驱动程序来打开日志记录，如下所示：

MongoMapper.connection = Mongo::Connection.new('localhost', 27017, :logger => Rails.logger)

使用记录器的文档在这里： [http ://railstips.org/blog/archives/2009/10/09/more-mongomapper-awesomeness/](http://railstips.org/blog/archives/2009/10/09/more-mongomapper-awesomeness/)

虽然 Mongoid 绝对值得一看。它也支持日志记录：http: [//mongoid.org/en/mongoid/docs/installation.html#logging](http://mongoid.org/en/mongoid/docs/installation.html#logging)

# facebook - Facebook like 带有用于移动/平板电脑的响应式确认框

> ID：11593699
> 
> 赞同：2
> 
> 时间：2012-07-21T16:02:33.597
> 
> 标签：facebook, facebook-like, responsive-design

我的第一个响应式网站和 facebook like 按钮有点困难。我已将按钮设置为使用 xfbml 代码推荐，当单击它时，会正常显示确认/添加个人消息框。除了它不适合我的平板电脑或移动宽度。随着 sharer.php 被撤回，我必须使用这种方法来点赞，但我正在努力让事情以我需要的大小工作。

我很惊讶 Facebook 没有考虑将 Responsive=true 作为 Like 按钮的参数。

我读到在 Facebook 信任该站点之前无法绕过这部分，所以我研究了使用 firebug 查找框的样式，所以看看我的响应式站点是否可以编辑它，但是加载了一整套代码，所以我想知道是否有人知道要编辑的主要样式列表，以便我可以将一些本地响应样式应用于弹出窗口？

谢谢

坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:04:31.067

您需要记住，类似 FB 的按钮对话框会加载到 iFrame 中（即使您使用 XFBML），以便对其进行样式设置。

或者，您可以轻松地将 width 属性更改为 320px，这对于大多数手机来说应该没问题。

# windows - 软件版本

> ID：11593701
> 
> 赞同：-2
> 
> 时间：2012-07-21T16:02:41.313
> 
> 标签：windows, versioning, software-distribution

想象一个软件随版本一起发布`1.8`

是否可以像这样发布新版本：

```
1.9
1.10
1.11 
```

还是无序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:07:33.303

这取决于你在说什么。在文件系统中，文件夹 /MyApp1.9 将位于 /MyApp1.10 之后，但必须自动更新软件知道差异并正确排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:08:36.787

我会说这是一个品味问题，所以简短的回答是肯定的，如果你愿意，你可以。以 windows 为例，3.1 之后是 95、98、2000、Vista、7 和现在的 8。一些主要玩家都这样做，如果你愿意，你也可以这样做。

# drupal - 如何避免 Drupal7 视图在启动时显示结果？

> ID：11593703
> 
> 赞同：2
> 
> 时间：2012-07-21T16:02:58.023
> 
> 标签：drupal, drupal-7, drupal-views

我有一个带有 4 个暴露过滤器的 Drupal7 视图。它运行良好，但我希望仅在用户单击提交按钮时而不是在加载视图时显示结果？我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-21T14:09:42.480

此行为最近包含在视图 3 中。您可以选择：公开表单样式：需要输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T23:16:21.097

使用所需的过滤器，不要设置默认值。在用户在该字段中选择某些内容之前，视图不会返回任何结果。

# php - 使用 domDocument 获取 src 元素

> ID：11593704
> 
> 赞同：1
> 
> 时间：2012-07-21T16:03:06.517
> 
> 标签：php, domdocument

我正在使用 domDocument。我很亲密，但最后一点需要帮助

我有这个 html 只是下面的一个片段。有许多行。我正在尝试获取href。

到目前为止，我正在做以下事情：我可以得到 table、tr 和 td ok，但不知道从那里做什么。

谢谢你的帮助

```
foreach ($dom->getElementsByTagName('table') as $tableitem) {
    if ( $tableitem->getAttribute('class') == 'tableStyle02'){
        $rows = $tableitem->getElementsByTagName('tr');
        foreach ($rows as $row){ 
            $cols = $row->getElementsByTagName('td'); 

            $hrefs = $cols->item(0)->getElementsByTagName('a'); 
        }     
    }
} 
```

html片段：

```
<table width="100%" border="0" cellspacing="0" cellpadding="2" class="tableStyle02"> 
    <tr> 
        <td><span class="Name"><a href="bin.php?cid=703&size=0">
               <strong>Conference Facility</strong></a></span></td>
        <td align="center" nowrap>0.00</td>
        <td align="center">&nbsp;0&nbsp;</td>
        <td align="center">&nbsp;&nbsp;</td>
        <td align="center">&nbsp;0&nbsp;</td>
        <td align="center">&nbsp;0&nbsp;</td>
        <td align="center">&nbsp;0 - 0 &nbsp;</td>
        <td align="center">&nbsp;Wired Internet,&nbsp;&nbsp;&nbsp;</td>
        <td align="center">&nbsp;&nbsp;</td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T16:12:03.097

让我向您介绍 xpath 的概念，一种用于 DomDocuments 的查询语言：

```
//table[@class="tableStyle02"]//a/@href 
```

读作：获取具有类属性 tableStyle02 的 table 标记，然后是子标记中的 href 属性。

或者你也有 foreach`tr`和`td`元素：

```
//table[@class="tableStyle02"]/tr/td/a/@href 
```

现在在该路径中，a 标签是 td 标签的直接子标签，它是 tr 标签的直接子标签，它是 table 标签的直接子标签。如您所见，使用 xpath 制定元素的路径比用 PHP 代码编写所有内容要容易得多。

Apropos PHP 代码，在 PHP 中，这*看起来*像：

```
$doc = new DOMDocument();
$doc->loadHTML($html);
$xp = new DOMXPath($doc);
$href = $xp->evaluate('string(//table[@class="tableStyle02"]//a/@href)'); 
```

然后变量`$href`包含字符串：`bin.php?cid=703&size=0`。

* * *

此示例使用字符串 ( `string(...)`)，因此`->evaluate`返回一个字符串，该字符串是从第一个找到的属性节点创建的。相反，您也可以返回一个节点列表：

```
$hrefs = $xp->query('//table[@class="tableStyle02"]/tr/td/span/a/@href');
#             ^^^^^                                       ^^^^ 
```

现在`$hrefs`包含通常的`DOMNodeList`，这里它包含所有 href 属性节点：

```
echo $hrefs->item(0)->nodeValue; # bin.php?cid=703&size=0 
```

请注意，如果您只使用一个斜杠`/`来分隔标签，则它们必须是直接子代。使用两个斜杠`//`，它可以是后代（child or child of child (of child (of ...))）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:10:33.040

您应该能够在单个 DOMElement 实例上使用[getAttribute()](http://php.net/manual/en/domelement.getattribute.php)（就像您在示例的第二行使用它一样）：

```
foreach ($hrefs as $a_node) {
    if ($a_node->hasAttribute('href')) {
        print $a_node->getAttribute('href');
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T16:11:34.800

您不必在 DOM 层次结构中向下导航即可使用`getElementsByTagName`：

```
foreach ($dom->getElementsByTagName('table') as $tableitem) {
    if ($tableitem->getAttribute('class') == 'tableStyle02'){
        $links = $tableitem->getElementsByTagName("a");
    }
} 
```

`$links`此时现在是 a [`DOMNodeList`](http://us2.php.net/manual/en/class.domnodelist.php)，因此您可以遍历它：

```
foreach ($dom->getElementsByTagName('table') as $tableitem) {
    if ($tableitem->getAttribute('class') == 'tableStyle02'){
        $links = $tableitem->getElementsByTagName("a");
        $hrefs = array();
        foreach ($links as $link) {
            $hrefs[] = $link->getAttribute("href");
        }
    }
}
// Do things with $hrefs 
```

# java - Java和AS3之间的GZip压缩？

> ID：11593713
> 
> 赞同：1
> 
> 时间：2012-07-21T16:04:02.443
> 
> 标签：java, json, actionscript-3, gzip

如何在 java 中压缩字节数组 byte[]，然后在 as3 中解压缩，反之亦然？有人可以提供示例代码吗？我正在尝试在 2 个平台之间传输 JSON 字符串，但 JSON 有很大的偷听，我看到它可以被压缩。

到目前为止，我遇到了以下要使用的内容：Java 中的 GZipOutputStream 和 AS3 中的 ByteArray.uncompress

也许有更好的压缩算法。我查看了 AS3 的 ByteArray 类，但我不认为 gzip 是受支持的算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:40:03.553

您应该在两端使用 zlib 格式（而不是 gzip），因为如前所述，[AS3 ByteArray 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html#uncompress%28%29)直接支持它。

在 Java 端，使用 java.util.zip 中的[Deflater](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/Deflater.html)类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:20:04.040

AS3 ByteArray 内置了对[ZLIB](http://www.ietf.org/rfc/rfc1950.txt)和[DEFLATE的支持](http://www.ietf.org/rfc/rfc1951.txt)

一个简单的[谷歌](http://www.google.com)搜索产生了这个用于 gzip 编码/解码： http: [//probertson.com/projects/gzipencoder/](http://probertson.com/projects/gzipencoder/)

[你可以在这里](http://code.google.com/p/ascompress/)找到源代码

但是，java似乎在`java.util.zip`包中内置了zlib和deflate en/decode。我建议您使用 AS3 和 java 中通常内置的东西

# c# - 是否可以通过单击链接然后下载正确的片段来导航站点？

> ID：11593723
> 
> 赞同：0
> 
> 时间：2012-07-21T16:04:44.790
> 
> 标签：c#, .net, html-agility-pack

我将尝试解释我的意思。[我正在开发一个程序，我正在尝试从该](http://leagueoflegends.wikia.com/wiki/List_of_champions)站点自动下载一堆图像。

也就是说，我想从你点击英雄名字时得到的页面下载大方形图标，例如在[Darius](http://leagueoflegends.wikia.com/wiki/Darius)页面左上角的带有名字的图像`DariusSquare.png`并将其保存到文件夹中。

这是可能的还是我对 C# 的要求太多了？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:17:00.623

是的，有可能，执行 C# Web 请求并使用 C# HTML Agility Pack 来查找图像 url。

您可以使用另一个 Web 请求来下载图像：

从 url 下载图像的示例：

```
public static Image LoadImage(string url)
{
    var backgroundUrl = url;
    var request = WebRequest.Create(backgroundUrl);
    var response = request.GetResponse();
    var stream = response.GetResponseStream();
    return Image.FromStream(stream);
} 
```

使用 html 敏捷包并获取其他数据的示例：

```
var request = (HttpWebRequest)WebRequest.Create(profileurl);
request.Method = "GET";
using (var response = request.GetResponse())
{
    using (var stream = response.GetResponseStream())
    {
        using (var reader = new StreamReader(stream, Encoding.UTF8))
        {
            result = reader.ReadToEnd();
        }
        var doc = new HtmlDocument();
        doc.Load(new StringReader(result));
        var root = doc.DocumentNode;
        HtmlNode profileHeader = root.SelectSingleNode("//*[@id='profile-header']");
        HtmlNode profileRight = root.SelectSingleNode("//*[@id='profile-right']");
        string rankHtml = profileHeader.SelectSingleNode("//*[@id='best-team-1']").OuterHtml.Trim();

        #region GetPlayerAvatar
        var avatarMatch = Regex.Match(profileHeader.SelectSingleNode("/html/body/div/div[2]/div/div/div/div/div/span").OuterHtml, @"(portraits[^(h3)]+).*no-repeat;", RegexOptions.IgnoreCase);
        if (avatarMatch.Success)
        {
            battleNetPlayerFromDB.PlayerAvatarCss = avatarMatch.Value;
        }
        #endregion
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:21:11.420

一般来说，只要有足够的时间和金钱，一切皆有可能。在你的情况下，你需要很少的前者和后者:)

您需要做的事情可以在以下高级步骤中描述：

*   `<a>`使用英雄获取表中的所有标签。
*   使用类导航到这些标签指向的`WebClient`URL （即属性值）并下载 HTML`<a>``href`
*   您将需要找到一些包装元素，该元素存在于每个带有 hero 的页面上，并且包含他的图像。然后，您应该能够访问图像`src`属性并下载它。或者，也许每个图像都有一个您可以使用的通用 ID？

我认为没有人会为您提供可以为您执行这些步骤的确切代码。相反，您需要自己进行一些研究。

# java - 通过 ObjectOutputStream 发送文件，然后将其保存在 Java 中？

> ID：11593725
> 
> 赞同：4
> 
> 时间：2012-07-21T16:05:08.817
> 
> 标签：java, file, object, inputstream, outputstream

我有这个简单的服务器/客户端应用程序。我试图让服务器通过 OutputStream（FileOutputStream、OutputStream、ObjectOutputStream 等）发送文件并在客户端接收它，然后再将其保存到实际文件中。问题是，我试过这样做，但总是失败。每当我创建文件并将从服务器收到的对象写入其中时，我都会得到一个损坏的图像（我只是将它保存为 jpg，但这不重要）。以下是最有可能出现故障的代码部分（您在此处看到的所有看似未声明的对象都已事先声明）：

服务器：

```
 ObjectOutputStream outToClient = new ObjectOutputStream(
                        connSocket.getOutputStream());
                File imgFile = new File(dir + children[0]);
                outToClient.writeObject(imgFile);
                outToClient.flush(); 
```

客户：

```
ObjectInputStream inFromServer = new ObjectInputStream(
                clientSocket.getInputStream());
        ObjectOutputStream saveImage = new ObjectOutputStream(
                new FileOutputStream("D:/ServerMapCopy/gday.jpg"));
        saveImage.writeObject(inFromServer.readObject()); 
```

所以，我的问题是如果没有损坏的文件，我就无法正确地通过流获取对象。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-21T16:08:30.367

`File`对象表示该文件的*路径*，而不是其实际内容。您应该做的是`byte`从该文件中读取 s 并将它们发送到您的`ObjectOutputStream`.

```
File f = ...
ObjectOutputStream oos = ...

byte[] content = Files.readAllBytes(f.toPath);
oos.writeObject(content); 
```

```
File f=...
ObjectInputStream ois = ...

byte[] content = (byte[]) ois.readObject();
Files.write(f.toPath(), content); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:11:50.080

您实际上不是在传输文件，而是从 Java 传输 File 实例。将您的 File 对象视为文件的（服务器）本地句柄，而不是其内容。要传输图像，您实际上必须先在服务器上读取它。

但是，如果您只是要在客户端上保存字节，则可以忘记 ObjectOutputStream 一开始。您可以只传输存储在文件中的字节。首先看一下 FileChannel 类及其 transferTo 和 transferFrom 方法。

# r - 如何将 .Rmd 文件转换为 Rstudio 的 .Rnw 文件？

> ID：11593734
> 
> 赞同：22
> 
> 时间：2012-07-21T16:05:48.233
> 
> 标签：r, knitr, rstudio

我真的很喜欢`knitr`在 Rstudio 中使用，并且一直在使用它来编写 Markdown 演示文稿和数据分析。我想在论文中使用相同的代码和结果，并希望将 Rmd 文件中的代码块转换为 Rnw 文件````{r}`的块`<< >>= @`。

这也允许使用为主要论文的演示而编写的相同文档和代码。

有没有办法在 markdown 和 Rnw 文件的代码块之间进行转换？

或整个文件本身，除了代码块的语法差异之外，它们在标记中非常相似（使用 pandoc 将文本转换为乳胶很容易）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T01:39:33.170

无需转换整个文档，您只需将 R 代码外部化，以便在不同文档之间共享它；见[http://yihui.name/knitr/demo/externalization/](http://yihui.name/knitr/demo/externalization/)

一旦你有了`read_chunk('Rcode.r')`，你就可以````{r label}`在你的 Rmd 和`<<label>>=`你的 Rnw 文档中使用，其中`label`来自`## @knitr label`R 脚本中的行。

# ios - Objective-c 为 iPhone 游戏制作关卡

> ID：11593736
> 
> 赞同：0
> 
> 时间：2012-07-21T16:06:01.513
> 
> 标签：ios, objective-c, xcode, uiprogressview

我有一个问题游戏，我在其中问用户一些问题，并根据用户正确回答的速度以及用户所处的级别，我希望用户为我拥有的进度视图获得不同数量的 xp/进度。

所以我有一个名为“levelInt”的全局变量，它保存用户所在级别的值（最大级别为 20）。我还有一个打印“levelInt”变量的标签和一个进度视图，显示您进入更高级别的进度/显示您当前级别的进度。我还有一个计时器，它从 2 分钟开始倒计时，根据你回答这个问题的速度，你会在进度视图中获得更多的经验值/更多的进度。我是这样设置的：

*   totalSeconds 是计时器

*   levelInt 是保存用户所在级别值的全局变量

*   progressView 是进度条，显示剩余的 xp 直到下一个级别

和代码：

```
if ( levelInt == 0 && totalSeconds > 100){
    progressView.progress = .60;
}else if ( levelInt == 0 && totalSeconds <= 100 ){
    progressView.progress = .40;
}else if ( levelInt == 0 && totalSeconds > 80 ){
    progressView.progress = .20;
}else if ( levelInt == 0 && totalSeconds <= 80 ) {
    progressView.progress = .10;
}else {
    progressView.progress = .05;
}

if ( levelInt == 1 && totalSeconds > 100){
    progressView.progress = .55;
}else if ( levelInt == 1 && totalSeconds <= 100 ){
    progressView.progress = .35;
}else if ( levelInt == 1 && totalSeconds > 80 ){
    progressView.progress = .15;
}else if ( levelInt == 1 && totalSeconds <= 80 ) {
    progressView.progress = .05;
}else {
    progressView.progress = .02;
}

if ( levelInt == 2 && totalSeconds > 100){
    progressView.progress = .50;
}else if ( levelInt == 2 && totalSeconds <= 100 ){
    progressView.progress = .30;
}else if ( levelInt == 2 && totalSeconds > 80 ){
    progressView.progress = .10;
}else if ( levelInt == 2 && totalSeconds <= 80 ) {
    progressView.progress = .05;
}else {
    progressView.progress = .02;
}

if ( levelInt == 3 && totalSeconds > 100){
    progressView.progress = .45;
}else if ( levelInt == 3 && totalSeconds <= 100 ){
    progressView.progress = .25;
}else if ( levelInt == 3 && totalSeconds > 80 ){
    progressView.progress = .05;
}else if ( levelInt == 3 && totalSeconds <= 80 ) {
    progressView.progress = .03;
}else {
    progressView.progress = .02;
}

if ( levelInt == 4 && totalSeconds > 100){
    progressView.progress = .40;
}else if ( levelInt == 4 && totalSeconds <= 100 ){
    progressView.progress = .20;
}else if ( levelInt == 4 && totalSeconds > 80 ){
    progressView.progress = .05;
}else if ( levelInt == 4 && totalSeconds <= 80 ) {
    progressView.progress = .03;
}else {
    progressView.progress = .02;
}

if ( levelInt == 5 && totalSeconds > 100){
    progressView.progress = .35;
}else if ( levelInt == 5 && totalSeconds <= 100 ){
    progressView.progress = .15;
}else if ( levelInt == 5 && totalSeconds > 80 ){
    progressView.progress = .05;
}else if ( levelInt == 5 && totalSeconds <= 80 ) {
    progressView.progress = .03;
}else {
    progressView.progress = .02;
}

if ( levelInt == 6 && totalSeconds > 100){
    progressView.progress = .30;
}else if ( levelInt == 6 && totalSeconds <= 100 ){
    progressView.progress = .10;
}else if ( levelInt == 6 && totalSeconds > 80 ){
    progressView.progress = .05;
}else if ( levelInt == 6 && totalSeconds <= 80 ) {
    progressView.progress = .03;
}else {
    progressView.progress = .02;
}

if ( levelInt == 7 && totalSeconds > 100){
    progressView.progress = .28;
}else if ( levelInt == 7 && totalSeconds <= 100 ){
    progressView.progress = .08;
}else if ( levelInt == 7 && totalSeconds > 80 ){
    progressView.progress = .04;
}else if ( levelInt == 7 && totalSeconds <= 80 ) {
    progressView.progress = .03;
}else {
    progressView.progress = .02;
}

if ( levelInt == 8 && totalSeconds > 100){
    progressView.progress = .26;
}else if ( levelInt == 8 && totalSeconds <= 100 ){
    progressView.progress = .07;
}else if ( levelInt == 8 && totalSeconds > 80 ){
    progressView.progress = .05;
}else if ( levelInt == 8 && totalSeconds <= 80 ) {
    progressView.progress = .03;
}else {
    progressView.progress = .02;
}

if ( levelInt == 9 && totalSeconds > 100){
    progressView.progress = .24;
}else if ( levelInt == 9 && totalSeconds <= 100 ){
    progressView.progress = .05;
}else if ( levelInt == 9 && totalSeconds > 80 ){
    progressView.progress = .03;
}else if ( levelInt == 9 && totalSeconds <= 80 ) {
    progressView.progress = .02;
}else {
    progressView.progress = .02;
}

if ( levelInt == 10 && totalSeconds > 100){
    progressView.progress = .22;
}else if ( levelInt == 10 && totalSeconds <= 100 ){
    progressView.progress = .04;
}else if ( levelInt == 10 && totalSeconds > 80 ){
    progressView.progress = .03;
}else if ( levelInt == 10 && totalSeconds <= 80 ) {
    progressView.progress = .02;
}else {
    progressView.progress = .02;
}

if ( levelInt == 11 && totalSeconds > 100){
    progressView.progress = .20;
}else if ( levelInt == 11 && totalSeconds <= 100 ){
    progressView.progress = .04;
}else if ( levelInt == 11 && totalSeconds > 80 ){
    progressView.progress = .03;
}else if ( levelInt == 11 && totalSeconds <= 80 ) {
    progressView.progress = .03;
}else {
    progressView.progress = .02;
}

if ( levelInt == 12 && totalSeconds > 100){
    progressView.progress = .18;
}else if ( levelInt == 12 && totalSeconds <= 100 ){
    progressView.progress = .04;
}else if ( levelInt == 12 && totalSeconds > 80 ){
    progressView.progress = .03;
}else if ( levelInt == 12 && totalSeconds <= 80 ) {
    progressView.progress = .03;
}else {
    progressView.progress = .02;
}

if ( levelInt == 13 && totalSeconds > 100){
    progressView.progress = .16;
}else if ( levelInt == 13 && totalSeconds <= 100 ){
    progressView.progress = .04;
}else if ( levelInt == 13 && totalSeconds > 80 ){
    progressView.progress = .03;
}else if ( levelInt == 13 && totalSeconds <= 80 ) {
    progressView.progress = .03;
}else {
    progressView.progress = .02;
}

if ( levelInt == 14 && totalSeconds > 100){
    progressView.progress = .14;
}else if ( levelInt == 14 && totalSeconds <= 100 ){
    progressView.progress = .04;
}else if ( levelInt == 14 && totalSeconds > 80 ){
    progressView.progress = .03;
}else if ( levelInt == 14 && totalSeconds <= 80 ) {
    progressView.progress = .03;
}else {
    progressView.progress = .02;
}

if ( levelInt == 15 && totalSeconds > 100){
    progressView.progress = .12;
}else if ( levelInt == 15 && totalSeconds <= 100 ){
    progressView.progress = .03;
}else if ( levelInt == 15 && totalSeconds > 80 ){
    progressView.progress = .03;
}else if ( levelInt == 15 && totalSeconds <= 80 ) {
    progressView.progress = .03;
}else {
    progressView.progress = .02;
}

if ( levelInt == 16 && totalSeconds > 100){
    progressView.progress = .10;
}else if ( levelInt == 16 && totalSeconds <= 100 ){
    progressView.progress = .03;
}else if ( levelInt == 16 && totalSeconds > 80 ){
    progressView.progress = .03;
}else if ( levelInt == 16 && totalSeconds <= 80 ) {
    progressView.progress = .03;
}else {
    progressView.progress = .02;
}

if ( levelInt == 17 && totalSeconds > 100){
    progressView.progress = .08;
}else if ( levelInt == 17 && totalSeconds <= 100 ){
    progressView.progress = .02;
}else if ( levelInt == 17 && totalSeconds > 80 ){
    progressView.progress = .02;
}else if ( levelInt == 17 && totalSeconds <= 80 ) {
    progressView.progress = .02;
}else {
    progressView.progress = .02;
}

if ( levelInt == 18 && totalSeconds > 100){
    progressView.progress = .06;
}else if ( levelInt == 18 && totalSeconds <= 100 ){
    progressView.progress = .02;
}else if ( levelInt == 18 && totalSeconds > 80 ){
    progressView.progress = .02;
}else if ( levelInt == 18 && totalSeconds <= 80 ) {
    progressView.progress = .02;
}else {
    progressView.progress = .02;
}

if ( levelInt == 19 && totalSeconds > 100){
    progressView.progress = .04;
}else if ( levelInt == 19 && totalSeconds <= 100 ){
    progressView.progress = .02;
}else if ( levelInt == 19 && totalSeconds > 80 ){
    progressView.progress = .02;
}else if ( levelInt == 19 && totalSeconds <= 80 ) {
    progressView.progress = .02;
}else {
    progressView.progress = .02;
}

if ( levelInt ==20 && totalSeconds > 100){
    progressView.progress = .04;
}else if ( levelInt == 20 && totalSeconds <= 100 ){
    progressView.progress = .02;
}else if ( levelInt == 20 && totalSeconds > 80 ){
    progressView.progress = .02;
}else if ( levelInt == 20 && totalSeconds <= 80 ) {
    progressView.progress = .02;
}else {
    progressView.progress = .02;
} 
```

问题是，每当我在 20 秒内快速正确回答时，进度视图只会增加大约 0.10。我应该做 progressView.progress = progressView.progress + (amount) 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:55:22.590

第一个或第二个语句将始终 validates `true`，
因此最后三个`if`语句将永远不会被验证。
数字不能同时`false`验证`<= 100`和`> 100`。
验证`false`为`> 100`的数字始终为`<= 100`。

```
if ( i > 100 ) 
{
    // All numbers above 100 
} 
else if ( i <= 100 ) 
{
    // All numbers lower than or equal to 100
} 
else if ( i > 80 ) 
{
    // Never reached
} 
else if ( i <= 80 ) 
{
    // Never reached
} 
else 
{
    // Never reached
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:05:11.010

2 种更好的方法来完成这项工作：

1：创建一个函数（线性？）来计算你的进度。

```
float progress (int level , int seconds); 
```

2：使用数组（您从文件中读取以便更好地使用）

```
//float values [levels][cases];

//float values [21][3]; 

static init
float values[0] = {.10,.20,.60};
float values[1] = ....

int acase ;
if (totalSeconds <= 80){
acase=0;

    }else{
    // your are > 80 here
    if (totalSeconds <= 100){
        acase=1;
    }else{
        // your are > 100 here
         acase=2;
    }
}

progressView.progress = values[levelInt,acase]; 
```

它完成了（我认为更短）

您当然可以添加案例（此处为 3）

# .net - 如何从每个应用程序的 VB.NET 访问和修改 IE 打印机设置

> ID：11593737
> 
> 赞同：0
> 
> 时间：2012-07-21T16:06:04.317
> 
> 标签：.net, vb.net, printing

我[`WebBrowser`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)在我的应用程序中使用了一个控件。我在其中填充了一些内容并调用了它的`Print`方法。此方法使用 IE 中的默认边距设置并打印文档。我想在打印之前以编程方式更改边距值？（IE中的默认值不要修改）

我检查了 WebBrowser 类中的所有属性，但找不到任何允许我更改它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:03:08.807

看看这些：

[http://support.microsoft.com/kb/313723](http://support.microsoft.com/kb/313723)

[http://support.microsoft.com/kb/236777](http://support.microsoft.com/kb/236777)

# java - WheelView 不在 ScrollView 内滚动

> ID：11593740
> 
> 赞同：2
> 
> 时间：2012-07-21T16:06:22.973
> 
> 标签：java, android, scrollview

我正在使用[android-wheel](http://code.google.com/p/android-wheel/)

一切正常。

但是当我在 ScrollView 中添加 WheelView 时。我无法移动 WheelView。

[你可以在这里](http://code.google.com/p/android-wheel/issues/detail?id=5&can=1)看到这个问题。但在 Android 4.0 中，这仍然是一个错误

如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:32:23.900

经过研究，我找到了解决方案

这就像一个冠军

```
if (getParent() != null) {
        getParent().requestDisallowInterceptTouchEvent(true);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:08:00.400

不要在android上使用它看看这个：http: [//developer.android.com/design/patterns/pure-android.html](http://developer.android.com/design/patterns/pure-android.html)

# android - 切换按钮事件在各种设备上不起作用

> ID：11593752
> 
> 赞同：4
> 
> 时间：2012-07-21T16:07:55.097
> 
> 标签：android, events, togglebutton, android-event

我正在各种型号上测试我的应用程序，我意识到切换按钮 ON 和 OFF 事件不起作用。这是设备列表：

三星 YS5360 三星 Galaxy Note 三星 S Plus HTC Sensation XE HTC Wildfire S 摩托罗拉 RAZR
LG 擎天柱 黑色 索尼爱立信 Xperia neo V

我不确定自己做错了什么，因为我遵循了所有 Android 规范。这些事件适用于其他设备。我可以帮忙吗，有人吗？

[重新编辑]

这就是我实现监听器的方式：

```
 @Override
    public void onCheckedChanged(CompoundButton arg0, boolean change) {

        if(change){
            if(text.containsKey("on")){
                // do something
            }
        }else{
            if(text.containsKey("off")){
                // do something
            }
        }
        if(text.containsKey("clicked")){
            // do something
        }
     // }
   }
}; 
```

我检查了 ON 和 OFF 状态，但这似乎不适用于其他设备。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T13:22:24.873

使用文本来了解状态`ToggleButton`是一个坏主意。请改用该`isChecked`参数。请参阅其[文档。](http://developer.android.com/reference/android/widget/CompoundButton.OnCheckedChangeListener.html)

```
@Override
public void onCheckedChanged (CompoundButton buttonView, boolean isChecked) {
    if (isChecked) {
        /* checked. ON */
    } else {
        /* unchecked. OFF */
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:31:22.943

**Try This Code**

```
 toggle=(ToggleButton)findViewById(R.id.tglbtn);
    toggle.setOnClickListener(new OnClickListener() {
          public void onClick(View v) {
           // TODO Auto-generated method stub
          if(toggle.isChecked())
          {
           Toast.makeText(getApplicationContext(), "The state is changed to on", Toast.LENGTH_LONG).show();
           }
            else
            {
              Toast.makeText(getApplicationContext(), "The state is changed to off", Toast.LENGTH_LONG).show();
             }
             }
             }); 
```

# java - Java中的字符串连接

> ID：11593759
> 
> 赞同：1
> 
> 时间：2012-07-21T16:08:51.057
> 
> 标签：java, string, operator-overloading, string-concatenation

> **可能重复：**
> [为什么 + 在 Java 中与字符串一起使用？](https://stackoverflow.com/questions/5464330/why-does-work-with-strings-in-java)

以下语句在 Java 中有效。

```
int a=50;
String tmp="a = ";
String b=tmp+a; 
```

`b`String 类型的现在包含`a = 50`（作为字符串）。

虽然`tmp`是 String 类型并且`a`是 type `int`，但是进行了连接（即使 Java 不支持运算符重载）。

Java 不支持运算符重载的原因之一（与其他语言一样。事实上，我对任何语言都没有深入的了解）。

> Java 不支持运算符重载。运算符重载有时是 C++ 程序中歧义的来源，Java 设计团队认为它带来的麻烦多于好处。

[更多](http://linuxostutorial.blogspot.in/2011/08/why-java-does-not-support-operator.html)关于它。

如何`String b=tmp+a;`评估此声明？内部必须有一些等效的*运算符重载*概念。

* * *

**只有一个问题：**我们能否**从字面上**看到它是如何实现的，或者我们应该相信“*这只是语言的一个特性*”？

我听说 Java 编译器使用`StringBuilder/StringBuffer`（使用`append()`方法）来实现这一点，但我不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T16:10:50.527

从技术上讲，这只是碰巧具有相同符号的不同运算符。它是“*字符串连接运算符*”；请参阅[Java 语言规范的第 15.18.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1)。

关于实施，JLS 有这样的说法：

> 实现可以选择在一个步骤中执行转换和连接，以避免创建然后丢弃中间 `String`对象。为了提高重复字符串连接的性能，Java 编译器可以使用`StringBuffer`类或类似技术来减少`String`通过评估表达式创建的中间对象的数量。
> 
> 对于原始类型，实现还可以通过直接从原始类型转换为字符串来优化包装对象的创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:12:06.420

Java 不允许*用户定义的*运算符重载。语言规范可以定义它想要的任何运算符:)

是的，您可以看到它是如何在内部完成的 - 用于`javap -c`反汇编类。例如，在我的机器上，您的代码编译为：

```
 0: bipush        50
   2: istore_1
   3: ldc           #2    // String a =
   5: astore_2
   6: new           #3    // class java/lang/StringBuilder
   9: dup
  10: invokespecial #4    // Method java/lang/StringBuilder."<init>":()V
  13: aload_2
  14: invokevirtual #5    // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
  17: iload_1
  18: invokevirtual #6    // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
  21: invokevirtual #7    // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
  24: astore_3
  25: return 
```

有些细节是特定于实现的；特别是 Sun/Oracle 编译器*曾经*使用`StringBuffer`，但现在`StringBuilder`在可用的地方使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-21T16:11:43.257

**编辑：即使是编译器做这个改变（我不知道），使用字符串连接比使用 StringBuilder 更慢。**（错误 =>*不，编译器不使用 StringBuilder/StringBuffer*）。您只需创建一个简单的基准就可以对其进行测试。+ 运算符在 Java 中为字符串“重载”，但该语言不支持运算符重载。

尝试这样的事情来测试 StringBuilder/StringBuffer 的东西：

```
String str = "";
StringBuffer sbf = new StringBuffer();
StringBuilder sb = new StringBuilder();

int nTests = 100;
int nConcats = 1000;

long initialTime = 0L;
long afterStrTime = 0L;
long afterSbfTime = 0L;
long afterSbTime = 0L;

for ( int i = 0; i < nTests; i++ ) {

    initialTime = System.currentTimeMillis();
    str = "";
    sbf = new StringBuffer();
    sb = new StringBuilder();

    for ( int j = 0; j < nConcats; j++ ) {
        str += "foo"; // or str = str + "foo"
    }
    afterStrTime = System.currentTimeMillis();

    for ( int j = 0; j < nConcats; j++ ) {
        sbf.append( "foo" );
    }
    afterSbfTime = System.currentTimeMillis();

    for ( int j = 0; j < nConcats; j++ ) {
        sb.append( "foo" );
    }
    afterSbTime = System.currentTimeMillis();

}

System.out.printf( "%d milliseconds to perform %d concatenations on String\n", afterStrTime - initialTime, nConcats );
System.out.printf( "%d milliseconds to perform %d concatenations on StringBuilder\n", afterSbfTime - afterStrTime, nConcats );
System.out.printf( "%d milliseconds to perform %d concatenations on StringBuffer\n",  afterSbTime - afterSbfTime, nConcats ); 
```

你会看到 StringBuilder 可以比 StringBuffer 快，因为它不是同步的（StringBuffer 是），而且两者都比 String 快。

# android - GCM：MulticastResult - 哪个结果来自哪个设备？

> ID：11593767
> 
> 赞同：31
> 
> 时间：2012-07-21T16:10:16.023
> 
> 标签：android, google-cloud-messaging

在[GCM 的最后一部分：入门指南](http://developer.android.com/guide/google/gcm/gs.html#server-app)之后，在收到结果后需要做一些簿记。

引用指南：

> 现在有必要在以下情况下解析结果并采取适当的措施：
> 
> *   如果消息已创建，但结果返回了规范注册 ID，则需要将当前注册
>     ID 替换为规范注册 ID。
> *   如果返回的错误是 NotRegistered，则需要删除该注册 ID，因为该应用程序已从设备上卸载。
> 
> 这是处理这两个条件的代码片段：
> 
> ```
> if (result.getMessageId() != null) {
>  String canonicalRegId = result.getCanonicalRegistrationId();
>  if (canonicalRegId != null) {
>    // same device has more than on registration ID: update database
>  }
> } else {
>  String error = result.getErrorCodeName();
>  if (error.equals(Constants.ERROR_NOT_REGISTERED)) {
>    // application has been removed from device - unregister database
>  }
> } 
> ```

上面的指南指的是**单个**结果，而不是多播案例。我不确定如何处理多播情况：

```
 ArrayList<String> devices = new ArrayList<String>();

    for (String d : relevantDevices) {
        devices.add(d);
    }

    Sender sender = new Sender(myApiKey);
    Message message = new Message.Builder().addData("hello", "world").build();
    try {
        MulticastResult result = sender.send(message, devices, 5);

        for (Result r : result.getResults()) {
            if (r.getMessageId() != null) {
                String canonicalRegId = r.getCanonicalRegistrationId();
                if (canonicalRegId != null) {
                    // same device has more than on registration ID: update database
                    // BUT WHICH DEVICE IS IT?
                }
            } else {
                String error = r.getErrorCodeName();
                if (error.equals(Constants.ERROR_NOT_REGISTERED)) {
                    // application has been removed from device - unregister database
                    // BUT WHICH DEVICE IS IT?
                }
            }
        }
    } catch (IOException ex) {
        Log.err(TAG, "sending message failed", ex);
    } 
```

我提交了一份设备列表，并收到了一份结果列表。Result 对象不包含注册 id，但如果第一个已过时，则仅包含规范 id。如果这两个列表是相互关联的（即保留顺序和大小），则没有记录。

我如何确定哪个结果是指哪个设备？

**- 更新**

**我在下面的单独答案中粘贴了解决方案的片段**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-21T17:49:04.983

结果按照您发送到 GCM 服务器的 registration_id 数组的顺序排列。例如，如果您的 registration_ids 是：

```
[id1, id4, id7, id8] 
```

然后你得到的结果数组对于 id1、id4、id7 和 id8 将具有相同的顺序。

您只需要相应地解析每个结果，例如，如果第二个结果有 'message_id' 和 'registration_id' 的 'id9'，你知道 'id4' 现在已经过时了，应该用 id9 代替。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T13:41:38.830

为方便读者，这里是一个处理多个设备响应的片段

```
public void sendMessageToMultipleDevices(String key, String value, ArrayList<String> devices) {

        Sender sender = new Sender(myApiKey);
        Message message = new Message.Builder().addData(key, value).build();
        try {
            MulticastResult result = sender.send(message, devices, 5);
            MTLog.info(TAG, "result " + result.toString());

            for (int i = 0; i < result.getTotal(); i++) {
                Result r = result.getResults().get(i);

                if (r.getMessageId() != null) {
                    String canonicalRegId = r.getCanonicalRegistrationId();
                    if (canonicalRegId != null) {
                        // devices.get(i) has more than on registration ID: update database

                    }
                } else {
                    String error = r.getErrorCodeName();
                    if (error.equals(Constants.ERROR_NOT_REGISTERED)) {
                        // application has been removed from devices.get(i) - unregister database
                    }
                }
            }
        } catch (IOException ex) {
            MTLog.err(TAG, "sending message failed", ex);
        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-06T17:41:45.760

此解决方案由谷歌开发人员示例[GCM Demo 应用程序](http://developer.android.com/guide/google/gcm/demo.html) 注释**asyncSend**用于多播句柄完成

```
List<GcmUsers> devices=SearchRegisterdDevicesByCourseCommand.execute(instructorId, courseId);
    String status;
    if ( devices.equals(Collections.<GcmUsers>emptyList())) {    
      status = "Message ignored as there is no device registered!";
    } else {
      // NOTE: check below is for demonstration purposes; a real application
      // could always send a multicast, even for just one recipient
      if (devices.size() == 1) {
        // send a single message using plain post
        GcmUsers gcmUsers = devices.get(0);
        Message message = new Message.Builder().build();
        Result result = sender.send(message, gcmUsers.getGcmRegid(), 5);
        status = "Sent message to one device: " + result;
      } else {
        // send a multicast message using JSON
        // must split in chunks of 1000 devices (GCM limit)
        int total = devices.size();
        List<String> partialDevices = new ArrayList<String>(total);
        int counter = 0;
        int tasks = 0;
        for (GcmUsers device : devices) {
          counter++;
          partialDevices.add(device.getGcmRegid());
          int partialSize = partialDevices.size();
          if (partialSize == MULTICAST_SIZE || counter == total) {
            asyncSend(partialDevices);
            partialDevices.clear();
            tasks++;
          }
        }
        status = "Asynchronously sending " + tasks + " multicast messages to " +
            total + " devices";
      }
    }
    req.setAttribute(HomeServlet.ATTRIBUTE_STATUS, status.toString());

private void asyncSend(List<String> partialDevices) {
    // make a copy
    final List<String> devices = new ArrayList<String>(partialDevices);
    threadPool.execute(new Runnable() {

      public void run() {
        Message message = new Message.Builder().build();
        MulticastResult multicastResult;
        try {
          multicastResult = sender.send(message, devices, 5);
        } catch (IOException e) {
          logger.log(Level.SEVERE, "Error posting messages", e);
          return;
        }
        List<Result> results = multicastResult.getResults();
        // analyze the results
        for (int i = 0; i < devices.size(); i++) {
          String regId = devices.get(i);
          Result result = results.get(i);
          String messageId = result.getMessageId();
          if (messageId != null) {
            logger.fine("Succesfully sent message to device: " + regId +
                "; messageId = " + messageId);
            String canonicalRegId = result.getCanonicalRegistrationId();
            if (canonicalRegId != null) {
              // same device has more than on registration id: update it
              logger.info("canonicalRegId " + canonicalRegId);
              Datastore.updateRegistration(regId, canonicalRegId);
            }
          } else {
            String error = result.getErrorCodeName();
            if (error.equals(Constants.ERROR_NOT_REGISTERED)) {
              // application has been removed from device - unregister it
              logger.info("Unregistered device: " + regId);
              Datastore.unregister(regId);
            } else {
              logger.severe("Error sending message to " + regId + ": " + error);
            }
          }
        }
      }});
  } 
```

# php - 通过 AJAX 从 PHP 发回多个结果

> ID：11593772
> 
> 赞同：5
> 
> 时间：2012-07-21T16:11:29.260
> 
> 标签：php, javascript, jquery, ajax, json

我已经设置了一些 ajax，我现在正在测试，它背后的想法几乎是将一些数据从下拉框中发送到 php 脚本，进行一些计算然后返回结果，它做得很好并返回结果，但现在，不仅仅是发回一个结果并输出，我想发回多个结果并输出它们，我能够将多个数据发送到 php 脚本，所以我确信我可以发送多个返回。

无论如何，它只发回第一个结果，而不是其余的。

这是AJAX

```
 <script>
$("document").ready(function (){ 

    $(".add_extension").change(function(){

        var m = document.getElementById('meter_square');
        var meter_square = m.options[m.selectedIndex].value;

        var s = document.getElementById('story_height');
        var story_height = s.options[s.selectedIndex].value;

     $.ajax({
            type: "GET",
            url: "script.php",
            data: { meter_square: meter_square, story_height: story_height },
            dataType: "json",
            statusCode: {
                200: function (result, result2)
                {
                    $("#expected_gain").html(result.value);
                $("#house_price").html(result2.value2);
                }

            }
        });
})
});
</script> 
```

这是php脚本

```
 <?php 

$meter_square = $_GET["meter_square"];
$story_height = $_GET["story_height"];

$result = $meter_square + $story_height;
$result2 = $meter_square * $story_height;

echo json_encode(array("value" => $result, "value2" => $result2));

 ?> 
```

你可以看到我已经尝试过我认为可行的方法，如果你需要任何其他代码或希望我删除我添加的不起作用的代码，请告诉我。

感谢所有和任何帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T16:15:04.127

您只会收到一个响应对象：

```
function (response) {
    $("#expected_gain").html(response.value);
    $("#house_price").html(response.value2);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T16:21:17.113

尝试这个。认为它会有所帮助。如果您只使用成功案例，则无需使用状态码

```
 $.ajax({
        type: "GET",
        url: "script.php",
        data: { meter_square: meter_square, story_height: story_height },
        dataType: "json",
        success: function(data){
            $("#expected_gain").html(data.value);
            $("#house_price").html(data.value2);
        }
    }); 
```

# grails - 在 Grails 中输入字符串数据

> ID：11593773
> 
> 赞同：0
> 
> 时间：2012-07-21T16:11:30.480
> 
> 标签：grails, grails-plugin

我是 Grails 应用程序开发（Springsource eclipse）的新手。我使用脚手架进行 CRUD 操作并得到一个奇怪的错误。尽管我填写了所有字段以创建表，但我收到“类 [class racetrack.Race] 的属性 [名称] 不能为空”的消息。每当我将约束更改为可为空时，它都会起作用，但将该字段留空。它似乎不接受我的输入。

谢谢你的帮助，礼萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:07:59.307

检查您的表单字段（在您的 .gsp 中）是否具有与您的对象属性匹配的输入名称。我知道你使用了脚手架，但是，也许你改了名字之后？如果不是这样，请使用您的视图和模型中的一些代码编辑这篇文章。

# c++ - 当基类不是多态而是派生时，“this”地址不匹配是

> ID：11593783
> 
> 赞同：9
> 
> 时间：2012-07-21T16:12:10.973
> 
> 标签：c++, inheritance, polymorphism, memory-layout

有这个代码：

```
#include <iostream>

class Base
{
public:
    Base() {
        std::cout << "Base: " << this << std::endl;
    }
    int x;
    int y;
    int z;
};

class Derived : Base
{
public:
    Derived() {
        std::cout << "Derived: " << this << std::endl;
    }

    void fun(){}
};

int main() {
   Derived d;
   return 0;
} 
```

输出：

```
Base: 0xbfdb81d4
Derived: 0xbfdb81d4 
```

但是，当 Derived 类中的函数 'fun' 更改为 virtual 时：

```
virtual void fun(){} // changed in Derived 
```

那么'this'的地址在两个构造函数中都不相同：

```
Base: 0xbf93d6a4
Derived: 0xbf93d6a0 
```

另一件事是如果类 Base 是多态的，例如我添加了一些其他虚函数：

```
virtual void funOther(){} // added to Base 
```

然后两个“this”的地址再次匹配：

```
Base: 0xbfcceda0
Derived: 0xbfcceda0 
```

问题是 - 当基类不是多态而派生类是多态时，为什么基类和派生类中的“这个”地址不同？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-21T16:25:21.950

当您有一个多态的单继承类层次结构时，大多数（如果不是全部）编译器遵循的典型约定是该层次结构中的每个对象都必须以 VMT 指针（指向虚拟方法表的指针）开头。在这种情况下，VMT 指针很早就被引入到对象内存布局中：通过多态层次结构的根类，而所有较低的类都简单地继承它并将其设置为指向它们正确的 VMT。在这种情况下，任何派生对象中的所有嵌套子对象都具有相同的`this`值。这样，通过在`*this`编译器读取内存位置，无论实际子对象类型如何，都可以立即访问 VMT 指针。这正是您上次实验中发生的情况。当您使根类多态时，所有`this`值都匹配。

但是，当层次结构中的基类不是多态的时，它不会引入 VMT 指针。VMT 指针将由层次结构中较低位置的第一个多态类引入。在这种情况下，一种流行的实现方法是在层次结构的非多态（上）部分引入的数据*之前插入 VMT 指针。*这是你在第二个实验中看到的。看起来的内存布局`Derived`如下

```
+------------------------------------+ <---- `this` value for `Derived` and below
| VMT pointer introduced by Derived  |
+------------------------------------+ <---- `this` value for `Base` and above
| Base data                          |
+------------------------------------+
| Derived data                       |
+------------------------------------+ 
```

同时，层次结构的非多态（上层）部分中的所有类都应该对任何 VMT 指针一无所知。类型的对象`Base`必须以数据字段开头`Base::x`。同时，层次结构的多态（较低）部分中的所有类都必须以 VMT 指针开头。为了满足这两个要求，编译器被迫调整对象指针值，因为它在层次结构中从一个嵌套的基本子对象向上和向下转换到另一个。这立即意味着跨多态/非多态边界的指针转换不再是概念性的：编译器必须添加或减去一些偏移量。

来自层次结构的非多态部分的子对象将共享它们的`this`值，而来自层次结构的多态部分的子对象将共享它们自己的不同`this`值。

沿着层次结构转换指针值时必须添加或减去一些偏移量并不罕见：编译器在处理多继承层次结构时必须一直这样做。但是，您的示例也显示了如何在单继承层次结构中实现它。

加法/减法效果也将在指针转换中显现

```
Derived *pd = new Derived;
Base *pb = pd; 
// Numerical values of `pb` and `pd` are different if `Base` is non-polymorphic
// and `Derived` is polymorphic

Derived *pd2 = static_cast<Derived *>(pb);
// Numerical values of `pd` and `pd2` are the same 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-21T16:35:51.510

这看起来像一个典型的多态实现的行为，对象中有一个 v-table 指针。Base 类不需要这样的指针，因为它没有任何虚拟方法。这在 32 位机器上的对象大小中节省了 4 个字节。一个典型的布局是：

```
+------+------+------+
|   x  |   y  |   z  |
+------+------+------+

    ^
    | this 
```

然而，Derived 类*确实*需要 v-table 指针。通常存储在对象布局中的偏移量 0 处。

```
+------+------+------+------+
| vptr |   x  |   y  |   z  |
+------+------+------+------+

    ^
    | this 
```

因此，为了使基类方法看到对象的相同布局，代码生成器在调用基类的方法之前将 4 添加到*this指针。*构造函数看到：

```
+------+------+------+------+
| vptr |   x  |   y  |   z  |
+------+------+------+------+
           ^
           | this 
```

这就解释了为什么您会在 Base 构造函数中看到将 4 添加到 this 指针值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T17:24:59.367

从技术上讲，[这](https://stackoverflow.com/a/11593876/924727)正是发生的事情。

但是必须注意，根据语言规范，多态性的实现不一定与 vtables 相关：这是规范的内容。定义为“实现细节”，超出了规范范围。

我们所能说的就是它`this`有一个类型，并指向可以通过它的类型访问的内容。再次，对成员的解除引用是如何发生的，这是一个实现细节。

必须将 a通过隐式、静态或动态转换`pointer to something`转换为 a以适应周围环境的事实必须被视为*规则*，而不是*例外*。`pointer to something else`

 **通过定义 C++ 的方式，这个问题和答案一样毫无意义，因为它们隐含地假设实现是基于假定的布局。

事实上，在给定的情况下，两个对象子组件共享相同的来源，这只是一个（非常常见的）特殊情况。

例外是“重新解释”：当您“蒙蔽”类型系统时，只说“看看这堆字节，因为它们是这种类型的实例”：这是唯一你必须期望没有地址更改（并且没有责任）的情况来自编译器关于这种转换的意义）。**

# windows - Windows XP / fiber.node 上的 Meteor 失败

> ID：11593785
> 
> 赞同：4
> 
> 时间：2012-07-21T16:12:11.747
> 
> 标签：windows, meteor

海..

我已经在 Windows XP 上成功安装了 Meteor。创建一个新项目有效，但运行该项目不起作用。应用程序崩溃并出现以下错误：

```
module.js:485
process.dlopen(filename, module.exports);
      ^
Error: no errorC:\Programme\Meteor\lib\node_modules\fibers\bin\win32-ia32\fibers.node
at Object.Module._extensions..node (module.js:485:11)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.require (module.js:362:17)
at require (module.js:378:17)
at Object.<anonymous> (C:\Programme\Meteor\lib\node_modules\fibers\fibers.js:13:1)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
Exited with code: 1
Your application is crashing. Waiting for file change. 
```

**环境：**

*   视窗 XP (SP3)
*   node.js v0.8.3
*   流星 v0.3.7
*   npm v1.1.43

我非常感谢每一个提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T21:29:01.277

我遇到了完全相同的问题，但在 Windows 8 Release Preview 上。Meteor 0.3.7 附带的光纤包似乎无法正常工作。这对我有用：

首先，我打开了一个具有管理员权限的命令提示符并导航到：

```
C:\Program Files\Meteor\lib 
```

或者在你的情况下：

```
C:\Programme\Meteor\lib 
```

然后重新安装光纤：

```
npm remove fibers
npm install fibers 
```

让我知道这是否适合你。

# javascript - 带有嵌入标签的 SVG：Safari 无法正确缩放

> ID：11593789
> 
> 赞同：0
> 
> 时间：2012-07-21T16:12:35.050
> 
> 标签：javascript, css, html, svg

我正在尝试使用嵌入的 html-tag 将 svg 添加到我的“表格阅读器”中。它在 FF、Chrome 甚至 IE9 中都可以正常工作，但是当我在 Safari 中打开页面时，它没有缩放，而且我得到了滚动条。

这是我的测试环境：[http](http://www.nie-wieder.net/br/BookReaderDemo/noten.html#page/1/mode/1up) ://www.nie-wieder.net/br/BookReaderDemo/noten.html#page/1/mode/1up 只需在 safari 中打开它（版本 5.1.7，也许只在 mac 上？！只是在这里有一个mac），你就会明白我的意思。

所以，我的问题是：有没有办法让演示中的 svg 文件在 Safari 中正确缩放？

我在这里搜索并没有发现这个特定问题，所以我希望你能帮助我:)

编辑：我不能使用 img 因为通过 img-tag 的 svg 不可编写脚本:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:36:56.177

您覆盖了浏览器默认的 svg 标签 CSS 规则。从文件中的 svg 标记中删除`width=""`和或将 svg 嵌入为 img 而不是 embed 标记：`height=""``.svg`

```
<img type='image/svg+xml' src="file.svg" style="width: 100%; height: 100%;" /> 
```

# css - 2个段落之间的CSS空格不起作用

> ID：11593791
> 
> 赞同：0
> 
> 时间：2012-07-21T16:13:31.320
> 
> 标签：css, textbox

在[我](http://purewords.com/site11/)的网站“Equipe”页面上，我希望在“创始人和董事总经理”文本和下面的文本之间有更多的空间。我试过`margin bottom`但似乎没有用。有什么建议吗？

注意：a`br`会占用太多空间。

HTML 代码：

```
<div class="equipe-bio">
    <img src="images/avatar-man.png" width="80" height="80" alt="Picture" />
    <p><span class="bioname">Gregory Yrogerg</span></p>
    <p><span class="biotitle">Founder and managing director</span></p>
    <p>Originaire de Belgique, Gregory vit depuis plus de 20 années en Norvège. Lorem ipsum dolor sit amet,...</p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:17:47.977

一个简单的解决方法是将 添加`margin-bottom`到`<p>`标签中，这应该可以达到您想要的效果：

```
<p style="margin-bottom: 5px;">
    <span class="biotitle">Founder and managing director</span>
</p> 
```

默认情况下`span`是一个内联元素。因此，如果您想为跨度添加边距，则必须更改`display`属性：

```
.biotitle {
    display: block;
    margin-bottom: 5px;
} 
```

# python - 谷歌应用引擎（python27）获取请求网址

> ID：11593793
> 
> 赞同：-1
> 
> 时间：2012-07-21T16:13:45.653
> 
> 标签：python, google-app-engine, webapp2

我一直在尝试获取请求网址，如下所示

```
import webapp2

class MainPage(webapp2.RequestHandler):
    def get(self):
        print self.request.get('url')

app = webapp2.WSGIApplication([('/.*', MainPage)], debug=True) 
```

当请求是

```
http://localhost:8080/index.html 
```

它给了我类似的东西

```
Status: 200 Content-Type: text/html; charset=utf-8 Cache-Control: no-cache Content-Length: 70 
```

我需要得到的是

```
index.html 
```

**编辑：**以便我可以检查字符串并相应地显示正确的 html/模板文件。

我已经检查了[请求文档](https://developers.google.com/appengine/docs/python/tools/webapp/requestclass)并尝试了许多替代方法，但我似乎找不到解决方案。我对网络开发很陌生。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T16:32:32.263

你应该从这里开始：[https ://developers.google.com/appengine/docs/python/gettingstartedpython27/helloworld](https://developers.google.com/appengine/docs/python/gettingstartedpython27/helloworld)

您没有使用模板或模板模块/引擎，因此它与您访问的路径无关，因为您正在映射所有内容`/.*`

`self.response.write()`不使用`print`。
如果您在检查请求类之前从头开始阅读文档，这对您来说会更好。

**编辑：**

如果您想在 requesthandler 中获取 urlpath 并根据 urlpath 提供不同的模板，请执行以下操作：

```
def get(self):
    if self.request.path == '/foo':
        # here i write something out
        # but you would serve a template
        self.response.write('urlpath is /foo')
    elif self.request.path == '/bar':
        self.response.write('urlpath is /bar')
    else:
        self.response.write('urlpath is %s' %self.request.path) 
```

更好的方法是拥有多个 ReqeustHandlers 并将它们映射到`WSGIApplication`：

```
app = webapp2.WSGIApplication([('/', MainPage),
                               ('/foo', FooHandler),
                               ('/bar', BarHandler),
                               ('/.*', CatchEverythingElseHandler)], debug=True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T10:49:15.457

代替：

```
self.request.get('url') 
```

利用：

```
self.request.url 
```

您可能会发现有用的其他选项包括：

```
self.request.path
self.request.referer 
```

尝试这些更改以获得您正在寻找的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-08T07:03:54.233

你也可以使用这个：

```
def get(self):
     self.request.GET['name']
     self.request.GET['sender'] 
```

# c# - 在 OSX 上使用 MONO 播放 SOUND 的最简单方法

> ID：11593794
> 
> 赞同：4
> 
> 时间：2012-07-21T16:13:46.873
> 
> 标签：c#, macos, audio, mono

我正在使用 Mono 为 OSX10.6 编写一个简单的计时器应用程序。如何播放警报声音（可能是 wav/mp3 文件或其他文件）？

我尝试了几种方法，不幸的是没有奏效：

1.  Mono似乎还不支持[NSSound 。](http://docs.go-mono.com/?link=C%3aMonoMac.AppKit.NSSound%28System.String,System.Boolean%29)

    ```
    MonoMac.AppKit.NSSound alarm = new MonoMac.AppKit.NSSound("alarm.wav");
    alarm.Play(); 
    ```

2.  使用 a`SoundPlayer`也不起作用：

    ```
    System.Media.SoundPlayer player = new System.Media.SoundPlayer("alarm.wav");
    player.PlaySync(); 
    ```

3.  `System.Diagnostics.Process`我可以通过打开 a然后使用 OSX 命令行命令来播放声音`afplay`。不幸的是，这个命令会在一个新的终端窗口中打开，这在 GUI 应用程序中非常烦人。

我意识到 Mono 中有 CoreAudio 绑定。但是我还没有弄清楚如何使用它们来播放声音。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:16:20.127

您使用了错误的 NSSound 构造函数。

[`new MonoMac.AppKit.NSSound("alarm.wav")`](http://api.xamarin.com/?link=C%3aMonoMac.AppKit.NSSound%28MonoMac.Foundation.NSData%29)期望一个`NSData`（从 隐式`string`转换），您想使用[`new NSSound(string, bool)`](http://api.xamarin.com/?link=C%3aMonoMac.AppKit.NSSound%28System.String,System.Boolean%29). 可能要传递`false`第二个参数。

我拼凑了一个快速测试项目（基于默认的 MonoMac 项目）来确认它是否有效：

```
public override void FinishedLaunching (NSObject notification)
{
  mainWindowController = new MainWindowController ();
  mainWindowController.Window.MakeKeyAndOrderFront (this);

  // Only lines added
  var sound = new NSSound("/Users/kevinmontrose/Desktop/bear_growl_y.wav", byRef: false);

  sound.Play();
} 
```

# html - 怪癖模式和标准模式

> ID：11593796
> 
> 赞同：0
> 
> 时间：2012-07-21T16:14:11.130
> 
> 标签：html, css, quirks-mode

当使用 HTML 5 和 CSS 3 创建网站时，当然`<!DOCTYPE html>`，这是否意味着我的代码应该符合 html 5 和 css 3 标准。但是如何处理 Quirks 模式呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:20:51.030

当您给予时`<!DOCTYPE html>`，我认为该网站不会陷入怪癖模式。

# php - 数组中的文本搜索

> ID：11593798
> 
> 赞同：0
> 
> 时间：2012-07-21T16:14:34.523
> 
> 标签：php, arrays

```
<<
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [0] => soccer player
                    [1] => soccer player athlete who play soccer
                    [2] => sport
                    [3] => soccer
                    [4] => soccer football game in which two team of 11 player try to kick or head ball into opponent goal
                )

            [1] => Array
                (
                    [0] => soccer player
                    [1] => soccer player athlete who play soccer
                    [2] => play
                    [3] => activity
                    [4] => actor
                )

            [2] => Array
                (
                    [0] => soccer player
                    [1] => soccer player athlete who play soccer
                    [2] => player
                    [3] => commercial enterprise activity of provide good and service involve financial and commercial and industrial aspect
                    [4] => player person who participate in or be skilled at some game
                )

            [3] => Array
                (
                    [0] => soccer player
                    [1] => soccer player athlete who play soccer
                    [2] => athlete person train to compete in sport
                    [3] => athlete person train to compete in sport
                    [4] => athlete person train to compete in sport
                )

        )

    [1] => Array
        (
            [0] => Array
                (
                    [0] => athlete
                    [1] => athlete person train to compete in sport
                    [2] => sport
                    [3] => sport
                    [4] => sport
                )

            [1] => Array
                (
                    [0] => athlete
                    [1] => athlete person train to compete in sport
                    [2] => compete compete for something
                    [3] => compete compete for something
                    [4] => compete compete for something
                )

            [2] => Array
                (
                    [0] => athlete
                    [1] => athlete person train to compete in sport
                    [2] => train
                    [3] => train create by train and teach
                    [4] => train public transport provide by line of railway car couple together and draw by locomotive
                )

            [3] => Array
                (
                    [0] => athlete
                    [1] => athlete person train to compete in sport
                    [2] => person
                    [3] => person
                    [4] => person
                )

            [4] => Array
                (
                    [0] => athlete
                    [1] => athlete person train to compete in sport
                    [2] => athlete person train to compete in sport
                    [3] => athlete person train to compete in sport
                    [4] => athlete person train to compete in sport
                )

        )

>> 
```

你好

我需要上面显示的数组的 php 搜索代码。但是搜索不应该是一个精确的字符串匹配，例如我正在搜索`"11 player"`它应该给我结果`Array[0]`，正如它在`Array[0][0][4]`...中提到的那样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:44:27.543

你需要一个像这样的简单递归搜索函数。

```
<?php
    function recursive_search($array,$text,$path = "")
    {
        $result = array();
        foreach($array as $index => $value)
        {
            if(is_array($value))
                $result = array_merge($result,recursive_search($value,$text,$path . '/' . $index));
            else if(strpos($value,$text) !== false)
                $result[] = array('path' => $path . '/' . $index,'value' => $value); 
                //$result[] = $value; // use this line and delete above if you dont want path.

        }

        return $result;

    } 
```

用法

```
 $my_array =
    array(
        array(
            array(
                "soccer player",
                "soccer player athlete who play soccer",
                "player",
                "commercial enterprise activity of provide good and service involve financial and commercial and industrial aspect",
                "player person who participate in or be skilled at some game",
                "soccer football game in which two team of 11 player try to kick or head ball into opponent goal"
            )
        ) ,
        array(
            "soccer player",
            "soccer player athlete who play soccer",
            "player",
            "commercial enterprise activity of provide good and service involve financial and commercial and industrial aspect",
            "player person who participate in or be skilled at some game",
            "soccer football game in which two team of 11 player try to kick or head ball into opponent goal"
        )
    );

    $elements = recursive_search($my_array,"11 player");

    var_dump($elements); 
```

结果：

```
Array
(
    [0] => Array
        (
            [path] => /0/0/5
            [value] => soccer football game in which two team of 11 player try to kick or head ball into opponent goal
        )

    [1] => Array
        (
            [path] => /1/5
            [value] => soccer football game in which two team of 11 player try to kick or head ball into opponent goal
        )

) 
```

如果你想要没有路径输出的元素将是这样的

```
Array
(
    [0] => soccer football game in which two team of 11 player try to kick or head ball into opponent goal
    [1] => soccer football game in which two team of 11 player try to kick or head ball into opponent goal
) 
```

# jquery - 调用ContextMenu后，绑定到数据表TD的点击事件不起作用

> ID：11593799
> 
> 赞同：1
> 
> 时间：2012-07-21T16:14:43.580
> 
> 标签：jquery, contextmenu, jquery-datatables

我正在使用[DataTables](http://datatables.net)列出行。最近，我在数据表上实现了[ContextMenu](http://www.abeautifulsite.net/blog/2008/09/jquery-context-menu-plugin)插件，使用户能够右键单击任何行并选择上下文选项，例如编辑行、删除行等等。

以下是用于在 DataTable 上实现 ContextMenu 的代码：

```
$('#dtPOL').dataTable({
  "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
    $(nRow).contextMenu({
        menu: 'cntxtmnuDataTable'
    },
    function (action, el, pos) {
        if (action != '') {
            alert('You selected: ' + action);
        }
        return true;
    });
  }
}); 
```

除此之外，我还在 DataTable 上实现了向下钻取功能，如向下[钻取行](http://datatables.net/blog/Drill-down_rows)中给出和解释的那样，它运行良好，没有任何故障。以下是代码：

```
$('#dtPOL tbody td').live('click', function () {
    var nTr = this.parentNode;
    var i = $.inArray(nTr, anOpen);

    if (i === -1) {
        $('img', this).attr('src', gImageURL + "b-qv-hide.png");
        var nDetailsRow = oTable.fnOpen(nTr, fnQuickView(oTable, nTr), 'quickView');
        $('div.innerDetails', nDetailsRow).slideDown();
        anOpen.push(nTr);
    }
    else {
        $('img', this).attr('src', gImageURL + "b-qv-show.png");
        $('div.innerDetails', $(nTr).next()[0]).slideUp(function () {
            oTable.fnClose(nTr);
            anOpen.splice(i, 1);
        });
    }
}); 
```

上述代码段中调用的函数如下：

```
function fnQuickView(oTable, nTr) {
    var aData = oTable.fnGetData(nTr);
    var sOut = '<div class="innerDetails">';
    sOut += '<table cellpadding="5" cellspacing="0" border="0">';
    sOut += '<tr><td>Detailed Description:</td><td>:</td><td>' + aData[2] + '</td></tr>';
    sOut += '</table>';
    sOut += '</div>';

    return sOut;
} 
```

现在，一旦我调用 ContextMenu，问题就开始了。正如我所做的那样，向下钻取功能停止工作。在调试时，我发现 TD.control 上的 click 事件在调用 ContextMenu 后根本没有触发。

曾尝试在 DataTable 论坛和 Google 上进行搜索，但没有任何帮助。我敢肯定，我错过了一些东西。请您帮助我，因为我已经花了 4 多天了，但仍然没有成功。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:59:29.847

问题确实出在 contextMenu 插件上……它取消了网页所有元素上的所有 .click 事件……所以只需注释掉 .js 文件的所有语句，这些语句会取消绑定文档上的 .click 事件……这个技巧适用于我...

# android - 在不更改数据的情况下更新 ListView

> ID：11593803
> 
> 赞同：1
> 
> 时间：2012-07-21T16:14:58.040
> 
> 标签：android, listview, listadapter

在我的应用程序中，我有一个`ListView`包含不同时区的时间。使用 a `seekbar`，用户可以更改时区的当前时间，并且其他时区也应该更新它们的时间。

在我的`onCreate()`方法中，我`ListView`启动了 Time 变量并将其设置为我之前选择的位置的当前时间。另外我设置了`OnSeekBarChangeListener`我的`seekbar`.

```
private ArrayList<Welt> welts;
private SimpleArrayAdapter arrayAdapter;

public void onCreate(Bundle savedInstanceState) {

    ...

    arrayAdapter = new SimpleArrayAdapter(this, R.layout.listwelt, welts);
    showwelt();

    ...

    now.setToNow();
    now.set(now.toMillis(false));
    pos = extras.getInt("weltcompare");
    now.switchTimezone(welts.get(pos).zone);

    ...

    seek.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
            offset = seekBar.getProgress()*5 - start;
            arrayAdapter.notifyDataSetChanged();
            //showwelt();
        }

        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        public void onStopTrackingTouch(SeekBar seekBar) {
            offset = seekBar.getProgress()*5 - start;
            arrayAdapter.notifyDataSetChanged();
            //showwelt();
        }

    });

    ...

}

public void showwelt() {
    ListView listTest = (ListView)findViewById(R.id.mylistwelt);
    listTest.setAdapter(arrayAdapter);
    listTest.setDivider(null);
    listTest.setDividerHeight(0);
} 
```

最后我的 ArrayAdapter 类：

```
public class SimpleArrayAdapter extends ArrayAdapter<Welt> {
    private final int resource;

    public SimpleArrayAdapter(Context context, int resource, ArrayList<Welt> arrays) {
        super(context, resource, arrays);
        this.resource = resource;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        Welt cobject = getItem(position);
        RelativeLayout listView;

        if(convertView==null) {
            listView = new RelativeLayout(getContext());
            String inflater = Context.LAYOUT_INFLATER_SERVICE;
            LayoutInflater vi;
            vi = (LayoutInflater)getContext().getSystemService(inflater);
            vi.inflate(resource, listView, true);
        }else{
            listView = (RelativeLayout) convertView;
        }

        TextView tv1 = (TextView)listView.findViewById(R.id.listwelt1);
        tv1.setText(cobject.ort);
        TextView tv2 = (TextView)listView.findViewById(R.id.listwelt2);
        tv2.setText(cobject.land);
        TextView tv3 = (TextView)listView.findViewById(R.id.listwelt3);
        now.set(base);
        now.minute = now.minute + offset;
        now.normalize(false);
        now.set(now.toMillis(false));
        now.switchTimezone(cobject.zone);
        tv3.setText(TimeMateActivity.formatDateTime(0, 0, 0, now.hour, now.minute));
        TextView tv4 = (TextView)listView.findViewById(R.id.listwelt4);
        tv4.setText(TimeMateActivity.formatDateTime(now.monthDay, now.month, now.year, 24, 0));

        if(position == pos) {
            tv1.setTypeface(null, Typeface.BOLD);
            tv2.setTypeface(null, Typeface.BOLD);
            tv3.setTypeface(null, Typeface.BOLD);
        }

        return listView;
    }
} 
```

因此，活动运行时唯一更改的数据是变量偏移量。我认为这就是为什么`arrayAdapter.notifyDataSetChanged()`不工作的原因，虽然在工作中调用 showwelt() `OnSeekBarChangeListener`，但将其重置`ListView`为顶部。

我读了几篇文章，但没有一个有帮助。我试图在调用之前清除适配器并再次添加所有项目`notifyDataSetChanged()`。我尝试保存列表的当前滚动位置并恢复它。

我应该如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:28:51.973

在我看来，您在适配器中使用“现在”，因此您永远无法更改它。您需要找到一种方法将搜索栏值放入适配器并使用它而不是“现在”。然后使用`.invalidate()`强制重绘列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:46:25.897

我找到了一个解决方案：

我的`OnSeekBarChangeListener`方法现在看起来像这样。

`OnProgressChanged`：在这里我计算我的偏移变量的值并调用`showwelt()`函数

`OnStartTrackingTouch`：这里我保存了listview的当前滚动位置

`OnStopTrackingTouch`： 空的

我的`showwelt`功能如下所示：

```
public void showwelt() {
    ListView listTest = (ListView)findViewById(R.id.mylistwelt);
    SimpleArrayAdapter arrayAdapter = new SimpleArrayAdapter(this, R.layout.listwelt, welts);
    listTest.setAdapter(arrayAdapter);
    listTest.setDivider(null);
    listTest.setDividerHeight(0);
    listTest.setSelectionFromTop(index, top);
} 
```

# objective-c - 有关性能优化的最佳 wwdc 视频是什么？

> ID：11593805
> 
> 赞同：4
> 
> 时间：2012-07-21T16:15:10.427
> 
> 标签：objective-c, ios, memory-management, wwdc

Apple WWDC 页面上有很多视频，涉及有关 iOS、Mac OSX、Safari 等各种主题。

我看过一些 Apple WWDC 视频，但我希望它们分类；像特定部分中的所有应用内购买视频等。

有什么方法可以找到 iOS 中性能优化的视频列表，因为现在这是我认为 iOS 开发中最重要的部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T17:06:57.393

没有特定的方法可以**仅**查找性能优化视频。您不妨从 2011 年和 2012 年 WWDC 视频中挑选您想要的视频。

对于 iOS 上的性能优化，我会推荐 2012 WWDC (https://developer.apple.com/videos/wwdc/2012/) 中的以下视频：

*   会议 225 - 启动并运行：每次发布都给人留下深刻印象
*   会话 235 - iOS 应用程序性能：响应性
*   会议 238 - iOS 应用程序性能：图形和动画
*   会话 242 - iOS 应用程序性能：内存

还有两个属于优化用户体验的相当具体的视频：

*   会话 240 - 抛光您的界面旋转
*   会话 208 - 在 iOS 上保存和恢复应用程序状态

# ruby-on-rails - Rails：如何输出漂亮的 html？

> ID：11593808
> 
> 赞同：3
> 
> 时间：2012-07-21T16:15:34.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, template-engine

我使用 SASS 作为视图引擎，其中包含内置的漂亮选项`config/application.rb`：

```
Slim::Engine.set_default_options :pretty => true 
```

然而，不仅使用`rdiscount`for post rendering 破坏了所有这些美感，而且典型的命令也会这样做，例如：

```
title
  = "#{t "title.main"} - #{(yield :title) || "#{t "title.default"}"}"

== stylesheet_link_tag "application", :media => "all" 
```

变成

```
<title>Some title</title><link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
```

另外，一些标签缩进的例子：

```
 <body>
    <header>
      <h1>...
    </header>
    <div class="content"><div class="posts"><article>
  <div class="title">
    <h3>...</h3>
    <h2>...</h2>
  </div>
  <div class="entry"><p>...</p>
    <p>...</p>
  </div>
</article><article>
  <div class="title">
    <h3>...</h3>
    <h2>...</h2>
  </div>
  <div class="entry"><p>...</p>

    <p>...</p>

  </div>
</article><article> 
```

也许毕竟有一些`after_filter`或任何东西可以美化？`responce.body`

那`:pretty => true`将被禁用，因为它只完成了一半的工作。

# regex - 如何调整此 RegEx 以允许破折号？

> ID：11593812
> 
> 赞同：0
> 
> 时间：2012-07-21T16:16:02.363
> 
> 标签：regex, url-rewriting

我目前有这个：

`^(\w+)[/]*$`作为我在 IIS 中重写 URL 的 RegEx。

哪个不允许...

```
/1st-source-capital-corporation 
```

如何调整它以允许包含字母数字、下划线和破折号的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:44:00.200

我认为，要包含“-”，因为它是字符类的范围分隔符，您需要首先将它包含在方括号之间，因此您需要类似“^([-_[:alnum:]/] +)$"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:28:52.347

假设您的示例输入数据是正确的，您真的不想要这样的东西吗？

```
^(\w+)/(.*)$ 
```

请注意，该示例*不是*URL。

通过修改后的示例，我有一个修改后的正则表达式：

```
^/(.*)$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T09:39:23.007

这是 POSIX：

```
^([[:alnum:]]\|[_-/])*$ 
```

# php - 使用 php 正则表达式从电子邮件中读取链接的问题

> ID：11593813
> 
> 赞同：0
> 
> 时间：2012-07-21T16:16:04.873
> 
> 标签：php, regex, email, imap

我遇到了这个非常奇怪的问题，我似乎无法弄清楚。

我有一个脚本可以读取电子邮件并从电子邮件中获取用户名和链接（或多个链接）并将其放入数组中。由于某种原因，链接不断被切断，因为“=”由于某种原因不断被添加。当我在电子邮件上进行字符串替换时，在我执行正则表达式之前，它不会替换“=”。知道这个问题可能是什么吗？

这是示例电子邮件：

```
 @bill
 http://techcrunch.com/2012/07/20/kickstarter-flashr-wants-to-make-the-iphones-bezel-a-massive-notification-light/?grcc=88888Z0ZwdgtZ0Z0Z0Z0Z0&grcc2=835637c33f965e6cdd34c87219233711~1342828462249~fca4fa8af1286d8a77f26033fdeed202~510f37324b14c50a5e9121f955fac3fa~1342747216490~0~0~0~0~0~0~0~0~7~3~ 
```

当我回显消息的正文时，我得到：

```
 --00248c6a671acfdb9c04c558d753 Content-Type: text/plain; charset=ISO-8859-1 Content-Transfer-Encoding: quoted-printable @bill http://techcrunch.com/2012/07/20/kickstarter-flashr-wants-to-make-the-iphon= es-bezel-a-massive-notification-light/?grcc=3D88888Z0ZwdgtZ0Z0Z0Z0Z0&grcc2= =3D835637c33f965e6cdd34c87219233711~1342828462249~fca4fa8af1286d8a77f26033f= deed202~510f37324b14c50a5e9121f955fac3fa~1342747216490~0~0~0~0~0~0~0~0~7~3~ --00248c6a671acfdb9c04c558d753 Content-Type: text/html; charset=ISO-8859-1 Content-Transfer-Encoding: quoted-printable @bill 
```

注意断开链接的“=”。我的正则表达式产生：

```
 Array ( [0] => http://techcrunch.com/2012/07/20/kickstarter-flashr-wants-to-make-the-iphon= [1] => http://techcrunch.com/2012/07/2= [2] => http://techcrunch.com/2012= ) 
```

当我复制并粘贴字符串并通过字符串替换运行它时，它会替换“=”

知道发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:29:24.743

文本采用称为“Quoted Printable”的编码。首先将其解码为普通文本：

[http://php.net/manual/en/function.quoted-printable-decode.php](http://php.net/manual/en/function.quoted-printable-decode.php)

# php - zend 框架文本字段具有相同名称但具有不同的财产

> ID：11593814
> 
> 赞同：0
> 
> 时间：2012-07-21T16:16:12.983
> 
> 标签：php, zend-framework

我对 zend 表单有疑问，我需要在其中构建一个字段名称相同但内容不同的表单。这是我在表单中想要的输入字段。

目前我正在使用直接 html，但正因为如此，我缺少验证。

```
<input type="text" name="travel_guide_tab[4][title]">
<input type="text" name="travel_guide_tab[4][description]">
<input type="text" name="travel_guide_tab[6][title]">
<input type="text" name="travel_guide_tab[6][description]"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:01:44.827

在 Zend Form 中，元素名称必须是唯一的（以某种方式），否则它们将被覆盖。[但是，您可以继续使用您的 html 表单并使用Zend_Filter_Input](http://framework.zend.com/manual/en/zend.filter.input.html)在控制器中简单地过滤和验证。[过滤器](http://framework.zend.com/manual/en/zend.filter.set.html)和[验证](http://framework.zend.com/manual/en/zend.validate.set.html)类与 Zend_Form 使用的相同，只是以不同的方式传递数据。
简单的例子，部分：

```
public function someAction() {
        //set filters and validators for Zend_Filter_Input
        $filters = array(
            'nameOfInput' => array('HtmlEntities', 'StripTags')
        );
        $validators = array(
            'nameOfInput' => array('NotEmpty', 'Int')
        );
        //assign Input
        $input = new Zend_Filter_Input($filters, $validators);//can also pass the data in constructor (optional)
        $input->setData($this->getRequest()->getParams());
            //check input is valid and is specifically posted as 'Delete Selected'
            if ($input->isValid()) {
            //do some stuff
            } 
```

祝你好运。

# c# - 家庭作业所需的解决方案 - C#

> ID：11593816
> 
> 赞同：1
> 
> 时间：2012-07-21T16:16:33.003
> 
> 标签：c#

我正在学习 C# atm 并试图解决我书中描述的问题之一。编写一个程序，计算并打印（精度为 0.001）序列 1 + 1/2 - 1/3 + 1/4 - 1/5 + ...。我知道这是一个常见问题，但我几乎输了一整天来解决它，但我不能一个人做（也许我不够努力）。

```
static void Main()
{
    double sum = 0D;
    double sum1 = 0d;
    int i = 1;
    while ( i <100)
    {
        i++;
        if (i % 2 == 0)
        {
            sum1 = sum1 +(1 / i);
        }
        else
        {
            sum1 = sum1 -(1 / i);
        }

        sum = sum1 + sum;
        Console.WriteLine(Math.Round(sum, 3));
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T16:21:56.633

由于“i”是整数，除法 1/i 将始终得到 0（i=1 时除外），因为“/”是整数除法运算符，它从不给出分数。因此，您应该将双精度值 1.0/i 相除以获得分数。

此外，循环条件 i<100 不是您需要的。最好设置在那里 (1.0/i > 0.001) 或转换 (i<1000)。对于您拥有的序列，它将保证所需的准确性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:20:04.477

您没有将其计算到 0.001 的精度，而是在每一步四舍五入。你需要让你的循环运行只要`abs(current_sum - previous_sum) >= 0.001`. `current_sum`是当前迭代和上一次迭代的总和`previous_sum`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-21T16:46:11.423

你已经知道这是谐波级数了吗？

[关于谐波系列的维基百科](http://en.wikipedia.org/wiki/Harmonic_series_%28mathematics%29)

这很容易计算，但我不确定你对精密部分的意思。

```
 double harmonic = 0;
        int partialSumsUpTo = 10000;

        for (double i = 1; i <= partialSumsUpTo; ++i)
        {
            double part = 1 / i;
            harmonic += Math.Round(part, 5);
        } 
```

**请注意**，这不是剧透，因为您需要**交替谐波系列** 作为您的作业。但你肯定会自己得到那部分。

# html - 将一行中的第一个表格单元格移动到第 N 列

> ID：11593819
> 
> 赞同：1
> 
> 时间：2012-07-21T16:17:02.760
> 
> 标签：html, css

我想创建一个`<table>`这样的：

```
||Mo  ||Tu  ||We  ||Th  ||Fr  ||Sa  ||Su  ||
                  | 1   | 2   | 3   | 4   |
| 5   | 6   | 7   | 8   | 9   | 10  | 11  |
| 12  | 13  | 14  | 15  | 16  | 17  | 18  |
| 19  | 20  | 21  | 22  | 23  | 24  | 25  |
| 26  | 27  | 28  | 29  | 30  | 31  | 
```

如您所见，这是一个月的几天。让我烦恼的是，我必须`<td colspan="N-1">`在第一天之前粘贴一个空的缓冲单元。否则，表格最终看起来像这样：

```
||Mo  ||Tu  ||We  ||Th  ||Fr  ||Sa  ||Su  ||
| 1   | 2   | 3   | 4   |
| 5   | 6   | 7   | 8   | 9   | 10  | 11  |
| 12  | 13  | 14  | 15  | 16  | 17  | 18  |
| 19  | 20  | 21  | 22  | 23  | 24  | 25  |
| 26  | 27  | 28  | 29  | 30  | 31  | 
```

这显然是错误的。那么，有什么方法可以使该行的第一个表格单元格从第 N 列开始，而不是从 1 列开始，而不需要缓冲单元格？

***注意：****我知道添加缓冲单元并不是什么大问题，但我很好奇是否可以不添加。如果没有它，造型也会更容易一些......*

* * *

我之所以好奇，只是为了提供一些背景信息，是我不想显示那些空的缓冲单元。我希望他们真的*消失了*。这是我要做什么的图像：

![桌子](../Images/d4be334337be677880e005102513d33a.png)

在这里，我有那个空的缓冲区单元格，我必须将边框设置为无，并将背景设置为与表格后面的容器相同，以使其看起来像那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:20:15.070

无论如何，最简单的布局肯定是 7x5 表吗？- 只是根据你是否有内容来设计你的边框？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:20:23.963

那是不可能的。你需要一个空单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:22:04.290

仅使用 html 表是不可能的。顺便说一句，我会使用几个空单元格而不是一个跨单元格 - 它不会影响您的结果，但更容易生成和处理

# hibernate - JPQL SELECT Distinct Query with Lob Column 在 MySQL 上运行良好，但 SQLServer 2005 不行

> ID：11593823
> 
> 赞同：0
> 
> 时间：2012-07-21T16:17:51.207
> 
> 标签：hibernate, sql-server-2005, jpa-2.0

我正在使用基于 Hibernate 3.6.10 的 JPA2.0 ，我创建了两个多对多关系的对象。

```
@Entity
@Table(name="Project")
public class Project implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer id;

    private String topic;
    @Lob
    @Basic(fetch=FetchType.LAZY)
    private String content;
    @ManyToMany(fetch=FetchType.EAGER)
    @JoinTable(name="TrProj_Area",joinColumns=@JoinColumn(name="TrProj_ID"), inverseJoinColumns=@JoinColumn(name="Area_ID"))
    private Set<Area> areas = new HashSet<Area>();
    //getters and setters
}

@Entity
@Table(name="Area")
public class Area implements Serializable{
     @Id
     @GeneratedValue(strategy = GenerationType.AUTO)
     private Integer id;
     private String name;
     @ManyToMany(mappedBy="areas")
     private Set<Project> projects;
     //getters and setters
} 
```

**Project**实体有一个**content**属性，它是**Lob**和**Lazy Fetch**，当我创建这样的查询时：

```
select distinct o from Project o join o.areas a where a.id in(?,?) 
```

**它在 MySQL 5.5 上运行良好，但 SQLServer 2005 没有**。SQLServer 错误日志如下：

```
Error code 306, SQL state S0001: The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator 
```

我知道这个问题是由**内容**属性引起的，似乎**延迟获取**配置不起作用，文本列不能包含在**select distinct**语句中，但我无法从我的实体中删除它，我该如何解决这个问题？

* * *

添加于 20120722

我已经在休眠中跟踪 MySQL（mysql-connector-java-5.1.10-bin.jar 作为驱动程序）生成的 SQL，如下所示：

```
Hibernate: 
select
    distinct proj0_.id as id1_,
    proj0_.content as content1_,
    proj0_.topic as topic1_,
  from
    Project proj0_ 
inner join
    Proj_Area areas1_ 
        on proj0_.id=areas1_.Proj_ID 
inner join
    Area area2_ 
        on areas1_.Area_ID=area2_.id 
where
    area2_.id in (
            ? , ?
        )
order by
    proj0_.id desc limit ? 
```

这是由SQLServer2005（sqljdbc4.jar作为驱动程序）生成的，我担心错误是由**group by**语句引起的

```
Hibernate: 
    WITH query AS (select
        ROW_NUMBER() OVER (
    order by
       proj0_.id desc) as __hibernate_row_nr__,
       proj0_.id as id1_,
       proj0_.content as content1_,
       proj0_.topic as topic1_,
    from
       project proj0_ 
    inner join
       proj_area areas1_ 
           on proj0_.id=areas1_.proj_id 
    inner join
       area area2_ 
           on areas1_.area_id=area2_.id 
    where
       area2_.id in (? , ?)) 
    group by
        proj0_.id,
        proj0_.content,
        proj0_.topic) SELECT
        * 
    FROM
        query 
    WHERE
        __hibernate_row_nr__ BETWEEN ? AND ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:42:24.003

解决方法是使用子查询来选择不同的 id 值集并使用它来限制返回的值。它之所以有效，是因为将 distinct 应用于除 id 之外的任何东西都是多余的。

```
SELECT b 
FROM Project b 
WHERE b.id IN(SELECT distinct o.id 
              FROM Project o join o.areas a 
              WHERE a.id IN(?,?)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:47:06.463

正如[JB Nizet](https://stackoverflow.com/users/571407/jb-nizet)所说，并参考[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#performance-fetching-lazyproperties](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#performance-fetching-lazyproperties)。那是因为**fetch lazyproperties**功能不起作用。根据该文件，有两种解决方案。最后，我选择了文档所写的首选解决方案。

> 至少对于只读事务而言，避免不必要的列读取的另一种方法是使用 HQL 或 Criteria 查询的投影功能。这避免了构建时字节码处理的需要，当然是首选的解决方案。

还有一些解释。[@Basic(fetch = FetchType.LAZY) 不起作用？](https://stackoverflow.com/questions/2112508/basicfetch-fetchtype-lazy-does-not-work)

# ios - 来自 Core Data 的 NSPredicate 按对象 ID 选择（并可能求和）

> ID：11593829
> 
> 赞同：4
> 
> 时间：2012-07-21T16:18:28.950
> 
> 标签：ios, core-data, nspredicate, nsfetchrequest

我正在寻找通往核心数据高级部分的方法。我知道它不是 SQL，并且有一些限制，但是，我如何将下面的代码转换为 NSPredicate 以应用于获取请求？

```
Product* p = self.product; //this is a managed object
double vol=0;
for (PlanningItem* pi in self.planitems) {
 if (pi.product==p)
    vol+=pi.volume; 
```

1.  我想获取所有以 p 作为产品的计划项目。
2.  接下来，我想总结该集合的所有卷。

如何使用 NSPredicate 在获取请求中执行 1？我可以同时做2个吗？

我要的是 NSPredicate 的字符串。我有能力自己构建 Fetchrequest。

发送！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-21T17:08:19.480

```
// Create the predicate
NSPredicate *productPredicate = 
    [NSPredicate predicateWithFormat:@"(product == %@)", product];

// Apply the predicate to your FetchRequest
[fetchRequest setPredicate:productPredicate]; 
```

# authentication - 使用 actionscript 进行 Facebook 身份验证

> ID：11593833
> 
> 赞同：0
> 
> 时间：2012-07-21T16:19:11.090
> 
> 标签：authentication, permissions, facebook-actionscript-api, facebook-checkins

我正在尝试使用 actionscript 3.0 API 进行 Facebook 身份验证。我能够成功进行身份验证，但我需要用户电子邮件 ID。有人可以为我提供如何在获得额外许可的情况下获取详细信息的示例。我认为您可以使用附加权限而不是基本身份验证权限来获取用户电子邮件信息。

问候。迪利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:57:12.647

此代码段将询问 Facebook 的用户主电子邮件。

```
Facebook.login(yourLoginCallbackFunction, {scope: "email"}); 
```

此 URI 解释了此特定权限：[https ://developers.facebook.com/docs/reference/login/email-permissions/](https://developers.facebook.com/docs/reference/login/email-permissions/)

还有许多其他类型的权限，请在此处查看更多信息：[https ://developers.facebook.com/docs/concepts/login/permissions-login-dialog/](https://developers.facebook.com/docs/concepts/login/permissions-login-dialog/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:15:05.827

当您进行登录时，您必须像这样询问权限：

```
var permissions:String = "youFirstPermission,yourSecondPermission,yourThirdPermission...";
Facebook.login(callBackFuncion, {scope:permissions}); 
```

# google-app-engine - GWT 中的入口点类和模块

> ID：11593835
> 
> 赞同：0
> 
> 时间：2012-07-21T16:19:19.420
> 
> 标签：google-app-engine, gwt

GWT 代码结构对我来说真的很难理解:(。根据我的理解，

1.  模块引用入口点类。
2.  当一个模块被加载时，其上引用的入口点类被启动，并且相应类的 onModuleLoad() 将被执行
3.  HTML 主机页面需要包含一个 nocache.js 文件（仅当它需要与入口点类一起使用时）

如果我的理解是正确的，

1.  在像 asp .net 这样的标准 Web 开发平台中，aspx 页面指的是 servlet。**这里多个 html 页面可以引用单个入口点类。为什么？**（这很复杂？）
2.  **我什么时候可以加载一个模块？**如果存在多个模块和 html 页面，我们如何将模块分配给 html 页面，以便在用户请求 html 页面时加载特定模块？
3.  我在 onModuleLoad() 实现了一个异步服务调用。并且只想为 index.html 页面调用它。**但是如何在 onModuleLoad() 中识别 html 页面？**
4.  **为什么 Google 建议 GWT 用于 GAE 应用程序开发？**

我是 GWT 的新手。我想为 GAE 应用程序开发遵循一个良好的程序结构。期待更正和建议...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:11:26.673

请参阅此内容以了解 GWT 项目的组织方式：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects)

（那里也描述了引导程序，如何从 html 页面加载应用程序）

我认为最主要的是所有内容都编译为一个 javascript 文件。该应用程序在单个页面中运行。在 .gwt.xml 中，您定义应用程序的入口点。您还可以指定您继承的其他模块。这与您指定所需的其他包的 java 或 .net 应用程序非常相似。模块就像库。例如，如果您需要使用 JSON，您将继承 json 模块。另外我不认为你有义务在前面使用 GWT

# objective-c - 我应该在哪里定义我的枚举？

> ID：11593837
> 
> 赞同：0
> 
> 时间：2012-07-21T16:19:36.540
> 
> 标签：objective-c

我有这个枚举：

```
enum battleType {localEnemy,multiplayerEnemy}; 
```

这是在我的游戏战斗场景的 .h 文件中声明的。但是，我还想在我的派对屏幕（这是另一个 .h 文件）中使用这两个关键字。我是否必须两次声明相同的枚举（在两个 .h 文件中），或者有没有办法只声明一次并在我的项目中的任何地方使用它？

作为旁注，这些关键字与整数完全相同，对吗？所以我不能真正将它们作为对象存储在我的数组中，而是必须为此创建一个 NSNumber 实例，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:22:08.733

在它所属的头文件中声明它。在您的情况下，这可能是 BattleScene.h 或类似的东西。

在另一个文件中你也必须使用它`#import BattleScene.h`。

如果你使用 typedef，你就不必一直写`enum`。此外，在枚举中使用统一前缀是一个好习惯。这使您的代码更具可读性，并且自动完成可以在使用枚举时为您提供帮助。

```
typedef enum {BattleTypeLocalEnemy, BattleTypeMultiplayerEnemy} BattleType; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:22:30.457

有一种方法。创建一个新`.h`文件（New File -> C and C++ -> Header）并放入您的枚举。然后就`#import`进入战斗场景标题和派对场景标题。

您的另一个问题：是的，它们确实是`int`s、`short`s 或其他 C 整数类型。

# android - 如何与其他活动共享对象？

> ID：11593839
> 
> 赞同：1
> 
> 时间：2012-07-21T16:19:50.513
> 
> 标签：android

我的程序有一系列不同的课堂活动（基本上不同的屏幕）。在一项活动中，我正在创建多个对象，然后我想在其他活动中访问这些对象。

我如何着手使程序中的其他活动可以访问这些对象，换句话说，我如何与其他活动共享对象？

TIA

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:25:55.190

你需要让那个类实现[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html) 它基本上有点类似于 Java 的可序列化。你必须告诉你的班级如何打包和解包。然后你可以通过 intent.putExtra(); 把它放在一个意图中。

这是取自该链接的代码示例

```
public class MyParcelable implements Parcelable {
     private int mData;

     public int describeContents() {
         return 0;
     }

     public void writeToParcel(Parcel out, int flags) {
         out.writeInt(mData);
     }

     public static final Parcelable.Creator<MyParcelable> CREATOR
             = new Parcelable.Creator<MyParcelable>() {
         public MyParcelable createFromParcel(Parcel in) {
             return new MyParcelable(in);
         }

         public MyParcelable[] newArray(int size) {
             return new MyParcelable[size];
         }
     };

     private MyParcelable(Parcel in) {
         mData = in.readInt();
     }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:33:26.677

您需要解决的第一件事是操作顺序。如果活动 A 是具有共享对象的活动，那么如果活动 B 在没有初始化活动 A 的情况下运行，你会怎么做？请记住，启动活动的意图可能来自任何地方，但说实话，使用 NULL 指针取消引用退出是可以接受的响应。

当需要这样的事情时，我所做的就是不让共享对象成为活动的一部分，而是创建一个特定的对象来包含它们。然后，您可以在对象内存储对该对象的静态引用，并通过静态方法返回它：

```
public class GlobalParams {
    private static reference;

    public static GlobalParams getReference()
    {
        if( reference==NULL )
            reference=new GlobalParams();
        return reference;
    }
} 
```

我认为 parcelable 不会对您有所帮助，因为这会为不同的活动创建不同的副本以供使用。

沙查尔

# udp - 通过 udp 发送数据包

> ID：11593847
> 
> 赞同：0
> 
> 时间：2012-07-21T16:20:16.963
> 
> 标签：udp

我正在创建一个用作照明控制台遥控器的应用程序，我需要通过 UDP 向控制台发送命令。我使用的协议有自己的自定义标头。如何创建带有标头和消息的数据包以通过 UDP 发送？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:22:53.493

如果您尝试在不编写任何代码的情况下测试协议，我建议您使用[WireShark](http://www.wireshark.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:42:59.793

您可以使用的最强大的解决方案可能是[scapy](http://www.secdev.org/projects/scapy/)，它是一个允许非常高级的数据包制作和操作的 python 模块。请参阅其文档或在互联网上搜索示例以了解如何生成任意数据包并传输它们。

如果由于某种原因您不能使用 python，则有多个用于数据包生成的命令行工具，另一个示例是 nping（[文档](http://nmap.org/book/nping-man.html)），它是流行的网络扫描仪 nmap 的兄弟。nping 具有生成具有任意有效负载的 UDP 数据包的选项，例如，可以将其指定为十六进制字符串。

可能还有其他选择。最好了解更多详细信息，例如您所在的操作系统或您从何处获取输入数据以及采用哪种格式。

# java - Java在Linux上执行进程

> ID：11593849
> 
> 赞同：3
> 
> 时间：2012-07-21T16:20:25.100
> 
> 标签：java, process, processbuilder

我已经为这个问题苦苦挣扎了一段时间，但我似乎无法解决它。我已经尝试过不同的方法（Runtime.exec()、ProcessBuiler），但似乎都没有。

这是我的问题。我有一台一直开着的笔记本电脑。这台笔记本电脑运行一个通过 USB 连接到 arduino 的 java 工具来打开和关闭房子里的灯。我自己创建了这个程序，因此我也在做一些定期维护工作。最近我添加了一个按钮来从我的 html 界面重新启动程序（以防我有更新，或者由于某些其他原因我可能需要重新启动程序，或者我决定在不久的将来实现自动更新）。

这背后的想法是从第一个实例启动应用程序的第二个实例，然后 System.exit(0) 第一个实例。

由于某种原因，我无法启动该应用程序的第二个实例。这是一些代码。

```
public void shutdown(boolean restart) {
        if (this.serial != null) {
            this.serial.disconnect();
        }

        if (restart) {
            System.out.println(this.getClass().getProtectionDomain().getCodeSource().getLocation().getPath());
            String startupCommand = "java -jar \"" + this.getClass().getProtectionDomain().getCodeSource().getLocation().getPath().replace("%20", " ") + "\"";
            ProcessBuilder builder = new ProcessBuilder();

//            String[] command = new String[1];
//            command[0] = "-jar \"" + (System.getProperty("user.dir") + "/Home_Automation_Executor.jar") + "\"";
            try {
//                //System.out.println("Restarting Home Automation with command: " + command[0]);
//                System.out.println("Restarting Home Automation with command: " + startupCommand);
//                Runtime.getRuntime().exec("bash");
//                Process proc = Runtime.getRuntime().exec(startupCommand);
                Process proc = builder.command(startupCommand).start();
                InputStream stderr = proc.getErrorStream();
                InputStreamReader isr = new InputStreamReader(stderr);
                BufferedReader br = new BufferedReader(isr);
                String line = null;
                System.out.println("<ERROR>");
                while ((line = br.readLine()) != null) {
                    System.out.println(line);
                }
                System.out.println("</ERROR>");
                int exitVal = 0;
                try {
                    exitVal = proc.waitFor();
                } catch (InterruptedException ex) {
                    Logger.getLogger(Engine.class.getName()).log(Level.SEVERE, null, ex);
                }
                System.out.println("Process exitValue: " + exitVal);
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
        System.out.println("Terminating Home Automation");
        System.exit(0);
    } 
```

> java.io.IOException：无法运行程序“java -jar”/Users/NightWalker/Dropbox/Development/Source Code/Java/NightWare Tools/Home Automation/Home Automation Executor/dist/Home_Automation_Executor.jar“”：错误=2，在 home.automation.executor.Engine.shutdown(Engine.java:186) 在 home.automation.executor.webserver.HTTPGenerator._handleActionCommand( HTTPGenerator.java:190) 在 home.automation.executor.webserver.HTTPGenerator._generateHTTPPage(HTTPGenerator.java:165) 在 home.automation.executor.webserver.HTTPGenerator.getHTTPPage(HTTPGenerator.java:58) 在 home.automation.executor .webserver.HTTPRequestHandler.run(HTTPRequestHandler.java:160) 原因：java.io.IOException: error=2, java.lang 中没有这样的文件或目录。UNIXProcess.forkAndExec(Native Method) at java.lang.UNIXProcess.(UNIXProcess.java:53) at java.lang.ProcessImpl.start(ProcessImpl.java:91) at java.lang.ProcessBuilder.start(ProcessBuilder.java:453 ) ... 5 更多

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T16:36:12.540

问题是这样的：

```
String startupCommand = "java -jar \"" + this.getClass().getProtectionDomain().getCodeSource().getLocation().getPath().replace("%20", " ") + "\"";

/* more stuff */ builder.command(startupCommand); 
```

这意味着 Jav 将查找**名为** `java -jar ...stuff with spaces...`. 但是您想要的是，Java 会查找名为的命令`java`并为该命令提供几个参数。

你应该使用

```
/*...*/ builder.command("java", "-jar", jarLocation) /*...*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:31:41.560

由于它是另一个 Java 程序，您可能需要考虑在同一个进程中运行它，因为如果两个程序位于同一个进程中，则它们之间的通信会容易得多。您是否尝试过在程序之外运行命令？它有效吗？jar 中的 meta-inf.mf 文件包含什么？可能是 meta-inf.mf 文件中的类路径不是相对的，因此无法找到任何依赖的 jar。

# javascript - 拦截来自 chrome 扩展的 HTTP 请求正文

> ID：11593853
> 
> 赞同：23
> 
> 时间：2012-07-21T16:21:04.107
> 
> 标签：javascript, google-chrome, google-chrome-extension

我知道`chrome.webRequest.onBeforeRequest`允许拦截、分析和阻止请求，但它只允许访问请求标头，而不是请求正文（据我所知）。

示例用例：考虑拦截表单值。

似乎这里有一个 API 更改提案[正好](http://www.chromium.org/developers/design-documents/extensions/proposed-changes/apis-under-development/notifications-of-web-request-and-navigation#TOC-Accessing-request-and-response-bodi)表明了这一点。

还有其他方法可以实现吗？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-01-22T19:04:37.877

此功能现已添加到 API，请参阅[文档](https://developer.chrome.com/docs/extensions/reference/webRequest/#event-onBeforeRequest)。

为了访问正文，您需要执行以下操作：

```
chrome.webRequest.onBeforeRequest.addListener(
    function(details)
    {
        console.log(details.requestBody);
    },
    {urls: ["https://myurlhere.com/*"]},
    ['requestBody']
); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-06-10T06:47:07.787

这是我所做的

1.  我用`requestBody`来获取帖子请求正文
2.  我使用了`decoder`将正文解析为字符串

这是一个例子

```
chrome.webRequest.onBeforeRequest.addListener(
    function(details) {
        if(details.method == "POST")
        // Use this to decode the body of your post
            var postedString = decodeURIComponent(String.fromCharCode.apply(null,
                                      new Uint8Array(details.requestBody.raw[0].bytes)));
           console.log(postedString)

    },
    {urls: ["<all_urls>"]},
    ["blocking", "requestBody"]
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T22:46:18.603

虽然您可能无法拦截，但您可以使用标准的 AJAX 方法对其进行胶带处理。与其发出 href 请求，不如看看您是否可以进行异步调用并将其保存到未显示的 HTML 对象中。然后抓取/读取/解析/无论您的主体标准是什么，如果它通过，则将该主体对象推回当前窗口/页面。

将内容存储在被抑制的元素中，然后将相同的元素用于内容将允许您避免重复调用。不利的一面是，您将获得最终不会使用的内容的完整内容。这可能是也可能不是带宽/速度性能问题。

# php - 用正斜杠重写 .htaccess

> ID：11593856
> 
> 赞同：1
> 
> 时间：2012-07-21T16:21:38.923
> 
> 标签：php, .htaccess

这就是我需要的。我有网址pearlsquirrel.com/profilecomments.php?u=eggo。eggo 是我的用户名和动态 url 中发生变化的部分。我想使用 .htaccess 将 URL 改写为 Pearlsquirrel.com/eggo/comments。

这是我到目前为止所拥有的：

```
RewriteRule ^(.*)$ $1.php
RewriteRule ^([a-zA-Z0-9_-]+)$ profilecomments.php?u=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ profilecomments.php?u=$1
RewriteCond %{HTTP_HOST} ^www\.pearlsquirrel\.com$ [NC]
RewriteRule ^(.*)$ http://pearlsquirrel.com/$1/comments [L,R=301] 
```

但我就是无法让它工作。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:27:12.310

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/\.]+)/comments$ profilecomments.php?u=$1 [L] 
```

**笔记**

如果您为图像、样式表等使用了相对路径，则需要将它们更改为绝对路径或使用服务器根文件夹作为基础的相对路径，以使您的站点正确显示。

例如，它会认为`images/image.png`是`/eggo/comments/images/image.png`

但是，如果您改为添加前面的斜杠，`/images/image.png` 您的文件路径将始终从服务器根文件夹开始，并且当您重写 URL 时，您的站点不会混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:35:21.287

您的第一条规则覆盖了所有其他规则。您所描述的内容（如果我理解正确的话），您需要通过 profilecomments.php?u=user 处理 /user/comments

```
RewriteRule ^([a-zA-Z0-9_-]+)/comments profilecomments.php?u=$1 [L] 
```

这应该这样做。

# javascript - if 语句中的 jQuery UI 对话框按钮

> ID：11593860
> 
> 赞同：1
> 
> 时间：2012-07-21T16:22:12.540
> 
> 标签：javascript, jquery, jquery-ui, if-statement, jquery-ui-dialog

我有以下功能，它会弹出一个可以在其中购买的鱼的菜单

```
.dialog({
    title: "Fish Store",
    resizable: true,
    draggable: true,
    modal: true,
    buttons: {
        "Beard Fish($30)": function() {
            if (cash >= 30)
            {
                fish1 =1;
                fish1Swim1();
                cash -= 30;
                setNav();
                $( this ).dialog( "close" );
            }
            else
            {
                notEnoughCash();
            }
        },
        "Clown Fish($50)": function() {
            if (cash >= 50) 
            {
                fish2 = 1;
                fish2Swim1();
                cash -= 50;
                setNav();
                $( this ).dialog( "close" );
            }
            else 
            {
                notEnoughCash(); 
            }
        },
        "Neon Fish($75)": function() {
            if (cash >= 75) 
            {
                fish3 = 1;
                fish3Swim1();
                cash -= 75;
                setNav();
                $( this ).dialog( "close" );
            }
            else
            { 
                notEnoughCash(); 
            }
        }
    }
}); 
```

我想编辑该函数，以便可以根据 if 变量（fish1、fish2 和 fish3）打开和关闭按钮。

所以我尝试进行以下更改...

```
buttons: { 
    if(fish1=0)
    {
        "Beard Fish($30)": function() {
            if (cash >= 30) 
            {
                fish1 =1;
                fish1Swim1();
                cash -= 30;
                setNav();
                $( this ).dialog( "close" );
            }
            else 
            { 
                notEnoughCash(); 
            }
        },
   } 
```

但我的文本编辑说语法无效，我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:27:52.257

我认为好的方法是：

1.  创建没有按钮的对话框
2.  添加您想要的按钮。使用[JQueryUI 设置器满足您的条件](http://jqueryui.com/demos/dialog/#option-buttons)

`$( ".selector" ).dialog( "option", "buttons", { "Ok": function() { $(this).dialog("close"); } } );`

第 3 步：显示您的对话框

# ruby-on-rails - 带有简单正则表达式的rails中的路由不匹配

> ID：11593869
> 
> 赞同：0
> 
> 时间：2012-07-21T16:23:44.960
> 
> 标签：ruby-on-rails, regex, routes

我在网上看了一会儿，但我无法让它工作。我们的应用程序必须使用像 ourapp.com/meandyou 这样的 url，其中的共同元素是参数中的“and”。我看到可以使用正则表达式来约束 urls 参数，所以我将规则添加到 routes.rb，但没有成功。如果我尝试使用终端匹配相同的表达式，它会起作用。这是完整的路由文件：

```
Railroot::Application.routes.draw do
  resources :couples

  get "home/index"

  root :to => 'home#index'

  match ':url' => 'couples#show_url', :url => /and/
end 
```

我读到 Rails 在匹配路由时将表达式嵌套在一个更大的表达式中，所以即使是这样一个简单的表达式，我也可能做错了什么。

我在 Ubuntu 10.04、Ruby 1.9.3、Rails 3.2.3、Passenger 3.0.13、Nginx 1.2.1 上运行。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:55:58.390

这可能是您的答案，来自[rails routing docs](http://guides.rubyonrails.org/routing.html#http-verb-constraints)：

> :constraints 采用正则表达式，但不能使用正则表达式锚。[...] 但是，请注意，您不需要使用锚点，因为所有路线都在开始时锚定。

所以我认为你实际上匹配的是 not `/and/`but `/^and/`，这可以解释为什么它不起作用。

尝试更明确，如下所示：

```
match ':url' => 'couples#show_url', :url => /.*and/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:29:24.700

*这应该是您的起点：*

```
Railroot::Application.routes.draw do
  root :to => 'home#index'
  resources :couples
  match ':url' => 'couples#show_url', :constraints => { :url => /and/ }
end 
```

# xml - 执行失败：java.io.IOException：无法运行程序“jarsigner.exe”：CreateProcess

> ID：11593875
> 
> 赞同：6
> 
> 时间：2012-07-21T16:25:03.557
> 
> 标签：xml, eclipse, ant

我正在尝试使用 ANT 运行 buildXXX.xml 文件，但出现此错误：

```
Buildfile: C:\Users\Amira\Desktop\SaloméTMF\Salome TMF      
V3.1SourceCode\buildSOAPClient.xml
init:
prepare:
compile:
makesoapjar:
makeihmjar:
makecorejar:
makedatajar:
makeapijar:
makeloginjar:
maketoolsjar:
makeplugintoolsjar:
makeUpdatejar:
makebootjar:
makecodexjar:
makejar:
signjar:
   [signjar] Signing JAR: C:\Users\Amira\Desktop\SaloméTMF\Salome TMF    
   V3.1SourceCode\distrib\salome_tmf-soap-client\activation.jar to  
   C:\Users\Amira\Desktop\SaloméTMF\Salome TMF V3.1SourceCode\distrib\salome_tmf-soap- 
   client\activation.jar as salome_tmf

BUILD FAILED

C:\Users\Amira\Desktop\SaloméTMF\Salome TMF V3.1SourceCode\buildSOAPClient.xml:251:   
Execute failed: java.io.IOException: Cannot run program "jarsigner.exe": CreateProcess 
error=2, Le fichier spécifié est introuvable

Total time: 5 seconds 
```

我进行了搜索，所以我发现我应该使用 JDK 而不是 JRE，所以我对其进行了更改，但同样的错误仍然存​​在。

任何想法将不胜感激欢呼

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T16:56:48.743

解决方案是使用 JDK 作为 eclipse 中安装的 JRE，并将 JAVA-HOME 变量设置为 JDK 路径。希望这对其他人有帮助:))

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-23T19:41:12.470

我的解决方案是从“在与工作区相同的 JRE 中运行”更改为“单独的 JRE” **，这很奇怪，因为它们是相同的 JRE**。

奇怪的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-19T23:12:54.070

我还选择了“单独的 JRE”，这允许我选择 JDK 而不是 JRE，这可能使 ANT 能够在 JDK bin 目录中找到 jarsigner

# php - PHP搜索字符串中的大写+小写混合词？

> ID：11593880
> 
> 赞同：2
> 
> 时间：2012-07-21T16:25:38.313
> 
> 标签：php, regex, search, preg-match, str-replace

假设有一个字符串，如：

```
A quick brOwn FOX called F. 4lviN 
```

我要**搜索**的词必须满足以下条件：

*   包含混合大小写的单词
*   仅包含字母 A 到 Z (AZ az)
    （例如：无数字、无逗号、无句号、无破折号 .. 等）

所以假设，当我搜索（例如在这个字符串中）时，搜索结果将是：

```
brOwn 
```

**因为它是唯一一个同时包含大写和小写字母的单词（也只包含字母）。** 那么我怎样才能让它在php中工作呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T16:28:59.017

你应该擅长：

```
preg_match_all("/\b([a-z]+[A-Z]+[a-zA-Z]*|[A-Z]+[a-z]+[a-zA-Z]*)\b/", $input, $matches);
print_r($matches[1]); 
```

* * *

**编辑：**由于不需要捕获，它也可以>>

```
preg_match_all("/\b(?:[a-z]+[A-Z]+[a-zA-Z]*|[A-Z]+[a-z]+[a-zA-Z]*)\b/", $input, $matches);
print_r($matches[0]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T20:36:12.827

Ωmega 的回答很好用。只是为了好玩，这里有一个备用（注释）正则表达式，它使用前瞻来解决问题：

```
<?php // test.php Rev:20120721_1400
$re = '/# Match word having both upper and lowercase letters.
    \b               # Assert word begins on word boundary.
    (?=[A-Z]*[a-z])  # Assert word has at least one lowercase.
    (?=[a-z]*[A-Z])  # Assert word has at least one uppercase.
    [A-Za-z]+        # Match word with both upper and lowercase.
    \b               # Assert word ends on word boundary.
    /x';

$text ='A quick brOwn FOX called F. 4lviN';

preg_match_all($re, $text, $matches);
$results = $matches[0];
print_r($results);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:30:39.687

您可以使用简单的正则表达式，例如：

```
/\s[A-Z][a-z]+\s/ 
```

可以这样使用：

```
preg_match_all('/\s[A-Z][a-z]+\s/', 'A quick Brown FOX called F. 4lvin', $arr); 
```

然后，您的 $arr 变量已添加了所有匹配项，将包含这些单词的数组：

```
Array
(
    [0] => Array
    (
        [0] => Brown
    )

) 
```

编辑：改变了模式。

# c# - XNA 矩形和包含，要疯了

> ID：11593883
> 
> 赞同：0
> 
> 时间：2012-07-21T16:25:55.430
> 
> 标签：c#, xna, contain

我要疯了。事实上，我使用 Rectangle 来知道一个点是否在一个矩形内。

我的矩形是这样定义的：{X:0 Y:480 Width:480 Height:480} 点（Vector2）是这样定义的：{X:283,3333 Y:141,1111}

通常，该点在矩形内部？但不是...

```
if (rectangle.Contains(new Point((int)point.X, (int)point.Y)))
{
   return true;
}
return false; 
```

通过另一个测试，它使用相同的代码： {X:-480 Y:0 Width:480 Height:480} contains {X:-12,22222 Y:12,22223}

LZ，我真的需要一些建议。

说真的，我不明白为什么它不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:30:56.220

如果您的矩形从 Y = 480 开始，则点 (283, 141) 不在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:32:57.590

抱歉，矩形内的点如何？

一个简单的测试来判断一个点是否在一个矩形内：

```
if ( p.X >= rectangle.X && p.X <= Rectangle.X + Rectangle.Width && p.X >= rectangle.X && p.Y <= Rectangle.Y + Rectangle.Height) 
```

Point (283, 141) 显然不符合第三个条件，因此不在矩形中。

然而它在这个矩形 {X:0 Y:0 Width:480 Height:480}

# .net - SharpSVN 提交多个文件这么慢

> ID：11593888
> 
> 赞同：0
> 
> 时间：2012-07-21T16:26:32.073
> 
> 标签：.net, svn, sharpsvn

我正在使用 SharpSVN 将 Zend 框架源提交到我的 GoogleCode 主机

但是commit的进度太长了，大约1个小时，而source包含近2400个文件。

我用 TortoiseSVN 客户端进行了测试，但似乎完全没有区别

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:46:44.327

如果您只进行了一些更改，则应该不会花费很长时间。现代源代码控制系统只会提交更改的文件，而不是整个解决方案。

如果您实际上更改了 2400 个文件，则需要在第一次提交时硬着头皮，然后连续提交会更快。

# elf - 在共享库代码中查找 ELF aux 标头（或 envp）的编程方式？

> ID：11593890
> 
> 赞同：2
> 
> 时间：2012-07-21T16:26:55.867
> 
> 标签：elf

我正在寻找一种在 Linux 上查找[powerpc cpu 类型的编程方式。](https://stackoverflow.com/questions/11250464/how-to-do-a-runtime-check-for-power7-or-greater-on-linuxppc)执行一些与建议 mfpvr 指令的答案相关的谷歌搜索，我发现这在[ELF AUX 标头](http://www.win.tue.nl/~aeb/linux/hh/hh-14.html)中可用，果然我可以获得我正在运行的机器的 POWER5 字符串，如下所示：

```
#include <stdio.h>
#include <elf.h>

int main( int argc, char **argv, char **envp )
{
   /* walk past all env pointers */
   while ( *envp++ != NULL )
      ;

   /* and find ELF auxiliary vectors (if this was an ELF binary) */
#if 0
   Elf32_auxv_t * auxv = (Elf32_auxv_t *) envp ;
#else
   Elf64_auxv_t * auxv = (Elf64_auxv_t *) envp ;
#endif

   char * platform = NULL ;

   for ( ; auxv->a_type != AT_NULL ; auxv++ )
   {
      if ( auxv->a_type == AT_PLATFORM )
      {
         platform = (char *)auxv->a_un.a_val ;
         break;
      }
   }

   if ( platform )
   {
      printf( "%s\n", platform ) ;
   }

   return 0 ;
} 
```

在我想使用此信息的共享库上下文中，我无权访问 envp。是否有另一种编程方法来查找 ELF AUX 标头的开头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:47:30.160

您可以从`/proc/self/auxv`文件中获取 if

根据[man proc](http://man.he.net/man5/proc) `/proc/self/auxv`从内核级别 2.6.0-test7 开始可用。

另一种选择 - 获取一些（现有的）环境变量 - 比如说`HOME`, 或`PATH`, 或其他什么。请注意，你会得到它的地址。从这里你可以返回并找到之前的环境变量，然后是它之前的一个，等等。之后你同样可以跳过所有的 argv 参数。然后你会看到最后一个 AUXV 条目。退后一步 - 你应该能够找到你的`AT_PLATFORM`.

编辑：看起来 glibc 现在提供了一种编程方法来获取此信息：

glibc-headers-2.17-106：/usr/include/sys/auxv.h：getauxinfo()

例子：

```
#include <sys/auxv.h>
#include <stdio.h>

int main()
{
   unsigned long v = getauxval( AT_PLATFORM ) ;
   printf( "%s\n", (char *)v ) ;

   return 0 ;
} 
```

# asp.net - 从虚拟 URL 播放视频文件

> ID：11593893
> 
> 赞同：2
> 
> 时间：2012-07-21T16:27:06.397
> 
> 标签：asp.net, video, iis-7, http-headers, ashx

我很难尝试从网站上的虚拟 URL 播放视频。我无法直接链接到视频，因为实际文件不在网络可访问根目录下的任何位置。而且，虚拟路径实际上是一个 HTTP 处理程序（ASP.Net “ASHX”），用于额外的权限检查等。

我试图设置视频访问（使用 JWPlayer，但没有达到那一点），我一开始的 ASHX 处理程序只是使用 HTTP Header 将文件作为下载传输：`content-disposition: attachment; filename=example.mp4`

当我比较浏览器（Chrome 20.0.1132.57）在浏览直接链接 .mp4 文件和虚拟链接之间的行为时 - 我注意到直接链接会在一个小型嵌入式视频播放器中打开，而只有虚拟链接下载文件。

我已经尝试（但失败了）捕获 HTTP 标头的差异（使用 Fiddler）并为视频编写了一个特殊的 ASHX - 这将发送与 IIS 完全相同的响应（没有任何特定的 mp4 配置，甚至没有 mime 类型）。我似乎无法像从直接链接那样从虚拟 url 打开视频，即使我模拟所有标题（至少，据我所知）。

我尝试`Content-Type & Content-Length`使用`Accept-Ranges & Content-Range`标头发送正确的，甚至尝试在第一个没有`video/mp4`或`*/*`在`Accept`标头中模拟两阶段请求（我还尝试在第一个响应中仅发送 1 个字节/发送整个视频两个回答）。（当我说所有这些值都是“正确的”时，我的意思是它们与我在 Fiddler 中捕获的工作响应相同......）

请，有人可以解释是什么触发浏览器将文件视为视频？我需要指定/省略哪些标题？（当然除了省略`content-disposition: attachment`...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:07:51.943

原来主要问题与 JWPlayer 的嵌入代码有关。

当指向视频的 URL 不包含可识别的视频扩展名时 - 播放器不知道该做什么 - 所以它需要一个明确的定义。

这是 JWPlayer 的功能嵌入代码：（请注意 的显式规范`'provider':'video'`）

```
<video id="jwplayer_placeholder"
       src="http://localhost/mysite/SecuredFile.ashx?File=1234"
       height="270"
       width="480">
</video>
<script type="text/javascript">

  jwplayer("jwplayer_placeholder").setup(                                                       
  {
     modes:
     [
         { type: "flash", src: http://localhost/mysite/jwplayer/player.swf" },
         { type: 'html5' },
         { type: 'download' }
     ],
     'provider':'video'
   });
</script> 
```

希望这可以帮助某人...

# java - 在 google play 中以 apk 文件上传应用程序 exeed 50 MB？

> ID：11593897
> 
> 赞同：0
> 
> 时间：2012-07-21T16:28:00.080
> 
> 标签：java, android

我在 android 市场上传我的应用程序。我的 apk 文件超过 50 MB 时遇到问题。在开发人员控制台中下载扩展文件。这是什么？如何下载？否则如何将我的 apk 压缩为 50 MB。帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:36:11.937

您是否阅读过 Android 开发者的[APK 扩展文件](http://developer.android.com/guide/google/play/expansion-files.html)页面？它包含有关如何使用扩展文件的详细说明。

在不了解您的应用程序的情况下，很难就如何最好地利用扩展文件或如何减小 APK 大小给出提示。一般来说，我会说减小 APK 大小的最简单方法是将资源（尤其是您可能拥有的任何大型资源，例如视频）移动到扩展文件中。

您还应该检查以确保您的 APK 中没有任何未使用或不需要的资源，例如您的应用的 Play 商店宣传图片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:37:03.757

有一种方法可以覆盖它。您现在可以上传两个额外的资源文件，*每个*文件的大小限制为 2gb 。因此，您最多可以添加/移动 4gb 的额外资源（在您的情况下移动）。[您可以在此处](http://android-developers.blogspot.se/2012/03/android-apps-break-50mb-barrier.html)阅读更多相关信息（android-developers blogspot）。

编辑：Tanis.7x 有一个更有用的链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-25T17:05:56.467

我知道这是一个迟到的答案，但它可能会帮助遇到类似问题的其他人：

**截至最近**（2015 年 9 月）**，如果您的目标是 Android 2.3 及更高版本，您可以上传最大 100 MB 的 APK** - 您可以[在此帮助页面上](https://support.google.com/googleplay/android-developer/answer/2481797?hl=en-GB)阅读更多相关信息。这个限制以前是 50 MB。还有一篇 Android 开发者博客文章解释了[这里](http://android-developers.blogspot.co.uk/2015/09/support-for-100mb-apks-on-google-play.html)的变化。

或者，如果您的应用超过 100 MB APK 限制，您可以使用**扩展文件**。这些是在您的应用安装后下载的附加文件，最大可达 4 GB（具体而言，您可以拥有两个最大为 2 GB 的扩展文件）。[您可以在 Android 开发者网站上的此页面上](http://developer.android.com/google/play/expansion-files.html)了解有关扩展文件的更多信息。

# php - PHP：glob（realpath（））读取目录但路径不正确

> ID：11593898
> 
> 赞同：0
> 
> 时间：2012-07-21T16:28:24.087
> 
> 标签：php, glob, realpath

我不知道我在这里没有得到什么，但我正在尝试使用 php 读取目录并创建一个包含所有图像路径的 JS 数组。

所以现在我的本地服务器上有以下结构。

*   项目
    *   一
        *   索引.php
        *   图片
            *   image1.png
            *   图像2.png

所以我现在正在和我一起工作`index.php`。我只是想读取`imgs`与`index.php`相同目录中的文件夹

```
$images = glob( realpath('img')."/*.png" );

print_r($images);

// just for testing purposes / creating a JS array later
foreach( $images as $image ):
    echo "<img src='" . $image . "' />";
endforeach; 
```

`print_r`函数输出了这个……</p >

```
Array ( 
    [0] => /Users/my/htdocs/test.com/project/one/img/image1.png 
    [1] => /Users/my/htdocs/test.com/project/one/img/image2.png 
) 
```

对我来说，这似乎还不错，但似乎路径不正确，因为它们并没有真正链接到图像。是否可以为此使用相对路径？我的意思是我只需要得到`imgs/image1.png`不是绝对路径。

关于我在这里做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:34:35.723

如果您在 glob 参数中包含完整路径，请摆脱`realpath('img')`它，您将在结果中得到它。只需使用`glob( 'img/*.png" );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:34:16.653

很简单..不要使用真实路径..

# ios - 使用 GCD 调用 UIWebView stringByEvaluatingJavaScriptFromString 在 iOS5.0/5.1 上挂起

> ID：11593900
> 
> 赞同：10
> 
> 时间：2012-07-21T16:28:34.183
> 
> 标签：ios, objective-c, uiwebview, grand-central-dispatch

我有以下代码`viewDidLoad`，它在 iOS 4.3 上正常工作，但在 iOS 5/5.1 上挂起。在 iOS 5/5.1 上，警告对话框显示但无法关闭，UI 线程冻结，无法单击 OK 按钮。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    dispatch_sync(dispatch_get_main_queue(), ^{
        [self.webview stringByEvaluatingJavaScriptFromString:@"alert('HELLO WORLD!')"];
    });
}); 
```

这是一个错误吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-04T04:38:26.960

经过测试，我认为它是一个 Bug，并更改代码以使用

```
[webView performSelectorOnMainThread:@selector(stringByEvaluatingJavaScriptFromString:) withObject:js waitUntilDone:NO] 
```

将解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:38:32.953

`- (void)viewDidAppear:(BOOL)animated`改为尝试

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-21T17:41:30.310

尝试

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self.webview stringByEvaluatingJavaScriptFromString:@"alert('HELLO WORLD!')"];
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-21T17:30:33.450

你为什么在这里使用 GCD？

请记住，在 GCD 中，无论队列如何，都无法保证您的代码将调用哪个线程。我的猜测是您的`DISPATCH_QUEUE_PRIORITY_DEFAULT`代码恰好在主线程上运行，然后在您的`dispatch_sync()`调用中触发了死锁。这可以通过检查调试器或仪器中的线程状态来验证。

这又回到了我最初的问题：通过进行这些卷积而不是直接在主线程上调用该方法，您会得到什么？你会阻止任何一种方式。

您也可以将您的更改`dispatch_sync()`为`dispatch_async()`- 这也应该抑制死锁，但只有在您有其他并发需求并且不需要后台线程阻塞时才应该这样做。

# c++ - 将委托设置为我的类的实例？

> ID：11593901
> 
> 赞同：0
> 
> 时间：2012-07-21T16:28:35.803
> 
> 标签：c++, objective-c, growl

我有一组 c++/obj c 文件来为 Growl（即 Obj C）创建一种 C++ 包装器，但是我被困在一个部分。我需要在我的 Obj C 类中设置一个 Growl Delegate 以便调用注册。

这是我的.mm

```
#import "growlwrapper.h"

@implementation GrowlWrapper
- (NSDictionary *) registrationDictionaryForGrowl {
    return [NSDictionary dictionaryWithObjectsAndKeys:
            [NSArray arrayWithObject:@"Upload"], GROWL_NOTIFICATIONS_ALL,
            [NSArray arrayWithObject:@"Upload"], GROWL_NOTIFICATIONS_DEFAULT
            , nil];
}
@end

void showGrowlMessage(std::string title, std::string desc) {
    std::cout << "[Growl] showGrowlMessage() called." << std::endl;
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    [GrowlApplicationBridge setGrowlDelegate: @""];
    [GrowlApplicationBridge
        notifyWithTitle: [NSString stringWithUTF8String:title.c_str()]
        description: [NSString stringWithUTF8String:desc.c_str()]
        notificationName: @"Upload"
        iconData: nil
        priority: 0
        isSticky: YES
        clickContext: nil
    ];
    [pool drain];
}

int main() {
    showGrowlMessage("Hello World!", "This is a test of the growl system");
    return 0;
} 
```

和我的.h

```
#ifndef growlwrapper_h
#define growlwrapper_h

#include <string>
#include <iostream>
#include <Cocoa/Cocoa.h>
#include <Growl/Growl.h>

using namespace std;

void showGrowlMessage(std::string title, std::string desc);
int main();

#endif

@interface GrowlWrapper : NSObject <GrowlApplicationBridgeDelegate>

@end 
```

现在你可以看到我`[GrowlApplicationBridge setGrowlDelegate: @""];`被设置为一个空字符串，我需要将它设置为一些东西，以便`registrationDictionaryForGrowl`被调用，目前没有被调用。

但我不知道该怎么做。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:53:29.740

您需要创建一个实例`GrowlWrapper`并将其作为委托传递给该`setGrowlDelegate:`方法。您只想在应用程序中执行此操作一次，因此每次调用时都设置它`showGrowlMessage`并不理想。您还需要保留对此的强烈引用，`GrowlWrapper`以便在完成后释放它，或者在使用 ARC 时它保​​持有效。因此，从概念上讲，您在启动时需要以下内容：

```
growlWrapper = [[GrowlWrapper alloc] init];
[GrowlApplicationBridge setGrowlDelegate:growlWrapper]; 
```

在关机时：

```
[GrowlApplicationBridge setGrowlDelegate:nil];
[growlWrapper release];    // If not using ARC 
```

# android - onItemClick 获取错误的项目

> ID：11593902
> 
> 赞同：1
> 
> 时间：2012-07-21T16:28:49.017
> 
> 标签：android, listview

我`OnClickListener`似乎从`ListView`. 侦听器总是选择列表中的第一项。这是我`Activity`的地方`OnClickListener`

```
public class ShowCharts extends ListActivity{
ProgressDialog pDialog;
static String url_read = "PHP DATA LINK";
static String TAG_ID="id", 
        TAG_CHARTS="charts",
        TAG_SUCCESS = "success",
        TAG_INTERPRET="interpret", 
        TAG_TITEL="titel", 
        TAG_ALBUM="album", 
        TAG_ALBUMCOVER="albumcover",
        TAG_LIKES="likes";

ArrayList<HashMap<String, String>> songslist;

JSONParser jParser = new JSONParser();
JSONArray charts = null;

String content;
ListView list;

@Override
     public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.charts);            

        songslist = new ArrayList<HashMap<String, String>>();           

        new LoadCharts().execute();
        list = getListView();
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                // getting values from selected ListItem
                String cid = ((TextView)findViewById(R.id._id)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),EditSong.class);
                // sending id to next activity
                in.putExtra(TAG_ID, cid);

                // starting new activity and expecting some response back
                startActivityForResult(in, 100);
            }
        }); 
```

那是下一个活动，我之前通过 Acitvity 获取数据：

```
public class EditSong extends Activity {

EditText txtInterpret;
EditText txtTitel;
EditText txtAlbum;
EditText txtAlbumcover;
Button btnSpeichern;
Button btnLoeschen;

String cid;
// Progress Dialog
private ProgressDialog pDialog;

// JSON parser class
JSONParser jsonParser = new JSONParser();

// single product url
private static final String url_details = "PHP DETAILS LINK";

// url to update product
private static final String url_update = "PHP UPDATE LINK";

// url to delete product
private static final String url_delete = "PHP DELTE LINK";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_CHARTS = "charts";
private static final String TAG_ID = "id";
private static final String TAG_INTERPRET = "interpret";
private static final String TAG_TITEL = "titel";
private static final String TAG_ALBUMCOVER = "albumcover";
private static final String TAG_ALBUM = "album";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.editsong);

    // save button
    btnSpeichern = (Button) findViewById(R.id._speichernButton);
    btnLoeschen = (Button) findViewById(R.id._loeschen);

    // getting product details from intent
    Intent i = getIntent();

    // getting product id (id) from intent
    cid = i.getStringExtra(TAG_ID); 
```

这是我的适配器

```
import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader;

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader = new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView id = (TextView)vi.findViewById(R.id._id);      //id
    TextView title = (TextView)vi.findViewById(R.id.title); // title
    TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
    TextView likes = (TextView)vi.findViewById(R.id.likes); // likes
    ImageView thumb_image = (ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    // Setting all values in listview
    id.setText(song.get(ShowCharts.TAG_ID));
    title.setText(song.get(ShowCharts.TAG_TITEL));
    artist.setText(song.get(ShowCharts.TAG_INTERPRET));
    likes.setText(song.get(ShowCharts.TAG_LIKES));
    imageLoader.DisplayImage(song.get(ShowCharts.TAG_ALBUMCOVER), thumb_image);
    return vi;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:33:18.557

您需要将 findViewById() 范围限定为当前行，否则它将始终获取第一次出现的`R.id._id`（应该始终是第一行）：

```
String cid = ((TextView) v.findViewById(R.id._id)).getText().toString();
//               add this ^ 
```

此外，由于您正在扩展 ListActivity，您应该使用已经提供的[onListItemClick 侦听器](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)：

```
@Override
protected void onListItemClick(ListView parent, View view, int position, long id) {
    // getting values from selected ListItem
    String cid = ((TextView) view.findViewById(R.id._id)).getText().toString();

    // Starting new intent
    Intent in = new Intent(getApplicationContext(),EditSong.class);
    // sending id to next activity
    in.putExtra(TAG_ID, cid);

    // starting new activity and expecting some response back
    startActivityForResult(in, 100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:33:08.100

是的，这是因为您没有完全正确地实现 BaseAdapter。

```
public Object getItem(int position) {
    return position;
} 
```

基本上 onItemClick 调用 getItem 函数。您没有在此处引用您的数据。你应该做这样的事情

```
public Object getItem(int position) {
    return data.get(position);
} 
```

# .net - .NET 4 中的本机代码和托管代码

> ID：11593906
> 
> 赞同：2
> 
> 时间：2012-07-21T16:28:52.963
> 
> 标签：.net

.NET 4 全局程序集缓存分为 2 个文件夹：

C:\Windows\Microsoft.NET\程序集\GAC_32

C:\Windows\Microsoft.NET\程序集\GAC_MSIL

我对 GAC_32 文件夹很感兴趣。我是否应该假设此文件夹中的程序集（如 System.Data）是本机代码而不是托管代码？它是特定于 x86 的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:31:44.820

如果你用 AnyCPU 平台编译一个程序集，它会转到 MSIL 文件夹，如果你用 x86 平台编译它，它会转到 GAC_32。[更多细节在这里](http://blogs.msdn.com/b/junfeng/archive/2004/09/12/228635.aspx)

您可以使用[CorFlags](http://msdn.microsoft.com/en-us/library/ms164699%28v=vs.80%29.aspx)来确定程序集是 x86、x64 还是 AnyCPU

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:21:02.533

GAC_32 和 GAC_64 包含混合模式程序集。包含托管代码和本机代码的程序集。它们由 C++/CLI 编译器生成的代码生成，该编译器知道如何轻松地从托管代码调用本机代码，而无需使用 pinvoke。汇编格式足够灵活，可以支持这两种代码。一个致命的赠品是`<Module>`使用反汇编程序在全局命名空间中查看该类。

鉴于它们包含本机代码，它们对机器架构有很强的依赖性。因此，您需要在 64 位机器上单独复制程序集。GAC_32 和 GAC_64 文件夹存储这些单独的副本，CLR 会根据进程的位数自动选择正确的副本。

混合模式的框架程序集并不多。Mscorlib.dll 就是其中之一，它接近于操作系统。System.Data.dll 对数据库提供程序有很强的依赖性，这些数据库提供程序都只能在本机代码中使用。WPF 的 PresentationCore.dll 对 Milcore 有很强的依赖性，Milcore 是一个与 DirectX 接口的本机层。等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:35:54.757

体面的解释[在这里](http://discuss.joelonsoftware.com/default.asp?dotnet.12.383883.5)。

> GAC_MSIL 缓存包含可以在 32 位或 64 位模式下运行的程序集，并根据需要被 JIT 编译为所需的字长。
> 
> 32/64 目录包含特定于 32 位或 64 位模式的程序集，因为它们包含本机代码，或者因为它们对字长做出特定假设。
> 
> 32 位系统将只有 GAC_32 目录。64 位系统将两者兼有，因为通过仿真 (WOW32) 支持 32 位代码。

我知道关于 NGen 版程序集是否真的比 MSIL 快存在一些争论，因为可以根据当前运行时条件（内核数、架构等）优化 JIT 版程序集。

# python - 在 pyparsing 中获取与 asXML() 等效的数据结构？

> ID：11593908
> 
> 赞同：3
> 
> 时间：2012-07-21T16:29:02.117
> 
> 标签：python, pyparsing

我了解到，在 pyparsing 中，您可以通过以下方式命名元素/组/节点：

```
token = pyparsing.Literal("Foobar")("element_name_here") 
```

所以，我做了一个示例程序来测试它：

```
import pyparsing as pp

Prefix = pp.Word(pp.nums)("Prefix")
Name = pp.Literal("FOOBAR")("Name")
Modifier = pp.Word(pp.alphas)("Modifier")
Modifier_Group = pp.Group(pp.OneOrMore(Modifier))("Modifier_Group")
Sentence = pp.Group(pp.Optional(Prefix) + Name + Modifier_Group)("Sentence")

out = Sentence.parseString("123 FOOBAR testA testB") 
```

然后，我尝试使用这些命名标记获取输出。

我试过这个：

```
>>> print out
[['123', 'FOOBAR', ['testA', 'testB']]] 
```

...但这并没有让我得到令牌名称。

然后我尝试执行以下操作：

```
>>> print out.items()
[('Sentence', (['123', 'FOOBAR', (['testA', 'testB'], {'Modifier': [('testA', 0), 
('testB', 1)]})], {'Modifier_Group': [((['testA', 'testB'], {'Modifier': [('testA', 0),
('testB', 1)]}), 2)], 'Prefix': [('123', 0)], 'Name': [('FOOBAR', 1)]}))]

>>> print dict(out)

{'Sentence': (['123', 'FOOBAR', (['testA', 'testB'], {'Modifier': [('testA', 0), 
('testB', 1)]})], {'Modifier_Group': [((['testA', 'testB'], {'Modifier': [('testA', 0),
('testB', 1)]}), 2)], 'Prefix': [('123', 0)], 'Name': [('FOOBAR', 1)]})}

>>> import collections
>>> print collections.OrderedDict(out)
OrderedDict([('Sentence', (['123', 'FOOBAR', (['testA', 'testB'], {'Modifier': [
('testA', 0), ('testB', 1)]})], {'Modifier_Group': [((['testA', 'testB'], 
{'Modifier': [('testA', 0), ('testB', 1)]}), 2)], 'Prefix': [('123', 0)], 
'Name': [('FOOBAR', 1)]}))]) 
```

...但是它们包含字典、列表和元组的特殊混合，我不知道如何解析它们。然后，我尝试这样做：

```
>>> print out.asXML()
<Sentence>
  <Sentence>
    <Prefix>123</Prefix>
    <Name>FOOBAR</Name>
    <Modifier_Group>
      <Modifier>testA</Modifier>
      <Modifier>testB</Modifier>
    </Modifier_Group>
  </Sentence>
</Sentence> 
```

...这正是我想要的，除了它是 XML 格式，而不是我可以轻松操作的 python 数据结构。有没有办法获得这样的数据结构（无需解析 XML）？

我确实找到了一个返回[嵌套 dict](https://stackoverflow.com/questions/9995627/cant-get-pyparsing-dict-to-return-nested-dictionary)的解决方案，但是 python 中的 dicts 是无序的，（我希望令牌按顺序排列），所以它不是我的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T20:13:30.470

Pyparsing 返回一个已经为您提供该结构的 ParseResults 对象。您可以通过打印来可视化您的句子结构`out.dump()`：

```
>>> print out.dump()
[['123', 'FOOBAR', ['testA', 'testB']]]
- Sentence: ['123', 'FOOBAR', ['testA', 'testB']]
  - Modifier_Group: ['testA', 'testB']
    - Modifier: testB
  - Name: FOOBAR
  - Prefix: 123 
```

您可以像访问字典中的键一样访问这些元素：

```
>>> print out.Sentence.keys()
['Modifier_Group', 'Prefix', 'Name']
>>> print out.Sentence['Prefix']
123 
```

或作为对象的属性：

```
>>> print out.Sentence.Name
FOOBAR
>>> print out.Sentence.Prefix
123 
```

# c - 冒泡排序中的用户输入

> ID：11593912
> 
> 赞同：1
> 
> 时间：2012-07-21T16:29:43.387
> 
> 标签：c, sorting, bubble-sort

我正在尝试编写一个代码让用户编写自己的数字并决定他是否希望它们按升序或降序排序，并用冒泡排序对它们进行排序。这是我目前能写的（也就是明显的入口）；

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  int n, a, number;
  printf("Enter your numbers. Write -1 to stop. \n");
  do {
    scanf("%d", &a);
  } while(a != -1);
  printf("Enter 1 if you want them to be in ascending order. Enter 2 if you want  descending order\n");
  scanf("%d", &a);
  if(a = 1)
    do {
      system("PAUSE");
      return 0;
    } 
```

我的问题是，我真的不知道如何合并冒泡排序。在所有示例中，我都可以找到事先设置好的数组。我想我应该从一个 for 结构开始，但我不知道。

编辑：

多亏了帮助，我才走到了这一步，它有点“有效”，直到我写 1 或 2 然后它崩溃了。有什么建议么？

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
int myarray[100],index,a,b,swap,turn;
index=0;
printf("Enter your numbers. Write -1 to stop. \n");
do{
            scanf("%d", &myarray[index]);
            index++;
            }while(myarray[index-1] != -1);
printf("Enter 1 if you want them to be in ascending order. Enter 2 if you want   descending order\n");
scanf("%d",&b);
if(b == 1) {
   for(turn=1; turn <= myarray[100] -1; turn++)

   for(index = 0; index <=  myarray[100]; index++)
   {
   if (myarray[index] > myarray[index+1]){ 
    swap  = myarray[index];
    myarray[index]   = myarray[index+1];
    myarray[index+1] = swap; }
    }
}
else {
   for(turn=1; turn <= myarray[100] -1; turn++)

   for(index = 0; index <=  myarray[100]; index++)
   {
   if (myarray[index] < myarray[index+1]){ 
    swap  = myarray[index];
    myarray[index]   = myarray[index+1];
    myarray[index+1] = swap; }
    }
}   
system("PAUSE");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:40:58.333

您将输入存储到单个变量`a`中，每次读取更多输入时都会覆盖该变量。您应该存储每个输入，以便您的程序知道提供的所有输入，而不仅仅是提供的最后一个输入。

数组是一组连续排列的相同类型的变量，并使用单个名称和索引进行访问。

```
int arr[10]; 
```

在这个例子`arr`中，组成了 10 个连续`int`的 s。您使用 访问`int`数组中的第一个，使用 访问`arr[0]`最后一个`arr[9]`。要将您的输入输入到数组中，您可以将其存储`a`到`arr`. 您可以通过计算用户到目前为止输入的数字来维护正确的索引。该计数将用作输入数组的索引。不允许用户超出声明中定义的数组边界，否则当您尝试存储超出与数组关联的最后一个位置的数据时，您将调用未定义的行为（发生这种情况时，称为缓冲区溢出）。

将输入读入数组后，可以将数组传递给冒泡排序函数。

假设您有一个这样的输入例程：

```
#define MAX_ARR 10
int a;
int entered = 0;
int arr[MAX_ARR];
while (entered < MAX_ARR) {
    if (scanf("%d", &a) != 1) break;
    if (a == -1) break;
    arr[entered] = a;
    ++entered;
}
if (entered == MAX_ARR) {
    printf("No more room in the array (max is %d)\n", MAX_ARR);
} 
```

我们检查了`scanf`是否返回了预期的返回值。我们已经根据停止值检查了输入，并确保用户输入的数据不能超过数组可以容纳的数据。

输入数组的元素个数是`entered`。因此，要遍历数组，循环看起来像这样：

```
int i;
for (i = 0; i < entered; ++i) {
    printf("arr[%d] = %d\n", i, arr[i]);
} 
```

冒泡排序的一个非常简单的版本就是不断循环遍历数组，直到您不必再进行任何交换。每当两个连续的元素未按所需顺序时，您就可以交换。对于上升的情况：

```
int j, swaps, unsorted = entered;
do {
    swaps = 0;
    for (j = 1; j < unsorted; ++j) {
        /* ... if arr[j-1] and arr[j] need to swap then:
                   swap them, and
                   increment swaps ... */
    }
} while (swaps > 0); 
```

您知道数组最后一个位置的元素将在一次完整的冒泡循环结束时处于其排序位置，因此`unsorted`在每次完整通过后可以减少数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:41:36.080

您是正确的，因为您需要将这些数字存储在某种数据结构中，例如数组或向量。向量是一个不错的选择，因为您不知道用户将输入多少个数字。这是您可以应用于代码的草图：

```
#include <vector>

int main()
{
  // ...
  std::vector<int> userInts;
  // ... get input 
  userInts.push_back(a); // add int to the end of the list

  bubbleSort(userInts);
  // ...
} 
```

**编辑：**我没有意识到这被标记为 C 而不是 C++。只需`std::vector`用一些代码替换调用即可在 C（或您自己的向量实现）中动态分配数组。或者，如果您知道只有*N*个整数将被输入，然后声明`int userInts[N]`，循环输入，将其插入到数组中，然后排序。

**EDITx2：**请参阅下面的@user315052 的答案，以使用如上所述的固定长度数组执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T16:45:43.283

对于第一个版本，有一个固定大小的数组说

```
int myarray[100];
//Accept the integers 

index=0;
do {
    scanf("%d", &myarray[index]);
    index++;
}    while(myarray[index-1]!= -1); 
```

现在你有了数组和元素总数的计数 - (index-1)

您可以将排序算法应用于数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T02:02:30.530

```
#include <stdio.h>
#include <stdlib.h>

typedef enum _order {
    Ascending=1, Descending
} order;

void swap(int *x, int *y){
    int wk;
    wk=*x;*x=*y;*y=wk;
}

int needSwap(int x, int y, order dir){
    if(dir == Ascending)
        return x > y;
    if(dir == Descending)
        return x < y;
    return 0;
}

void bubbleSort(int *array, int top, int end, order dir){
    int i, j, swaped;
    for(i = top; i < end; ++i){
        swaped = 0;
        for(j = top + 1; j <= end - i; ++j)
            if(needSwap(array[j-1], array[j], dir)){
                swap(&array[j-1], &array[j]);
                swaped = 1;
            }
        if(swaped == 0)break;
    }
}

int main(){
    int myarray[100], index, order;
    index=0;
    printf("Enter your numbers. Write -1 to stop. \n");
    do{
        scanf("%d", &myarray[index++]);
    }while(myarray[index-1] != -1 && index < 100);
    --index;//Correction to point to the final value
    printf("Enter 1 if you want them to be in ascending order.\n"
           "Enter 2 if you want descending order\n");
    scanf("%d",&order);
    bubbleSort(myarray, 0, index-1, order);
    {//result print
        int i;
        for(i=0;i<index;++i)
            printf("%d ", myarray[i]);
        printf("\n");
    }
    system("PAUSE");
    return 0;
} 
```

# perl - Perl 读取文件错误

> ID：11593914
> 
> 赞同：2
> 
> 时间：2012-07-21T16:29:49.173
> 
> 标签：perl, file-io

我必须使用 perl 逐行读取内存中的一个大（BIG）文件。如果出现错误，函数 open() 会返回 false 和 $! 设置为系统错误。但是，如果我在*读取*文件时遇到一些错误？我使用这段代码：

```
open(STATISTICS, "<" . $statisticsFile) or die "Can't open statistics file $statisticsFile ($!)";
while (<STATISTICS>) {
  my $line = $_;
  ...
}
close($STATISTICS); 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T17:05:03.663

您可以更改代码以使其工作，如下所示。

您似乎同时使用`STATISTICS`和`$STATISTICS`作为文件句柄。由于我在这里使用了词法句柄`$stat`。

```
open my $stat, "<" . $statisticsFile
    or die "Can't open statistics file $statisticsFile: $!";

until (eof $stat) {
  my $line = <$stat>;
  defined $line or die "Read failure on statistics file $statisticsFile: $!";
  ...
}

close($stat); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:38:32.603

您可能想`eof`在 while 循环之后进行测试。如果你不在 eof 你有一个错误。或者，可能更安全，检查 $！因为 eof*可能会*重置 $!。无论哪种方式都可以测试。

我还要补充一点，在 read(2) 上出现错误是非常罕见的。也许您的内存不足。

如果你确实用完了内存，perl 不会告诉你它，操作系统会（通过杀死 perl！）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T16:40:31.057

如果出现错误，循环会因为返回而`while`中断。应该设置，所以你可以检查循环后的值，看看是否一切正常。`<STATISTICS>``undef``$!``$!`

# java - Integer.parseInt() 问题

> ID：11593917
> 
> 赞同：2
> 
> 时间：2012-07-21T16:30:11.310
> 
> 标签：java

我的代码没有给我正确的输出。它从文本文件中读取数字，将它们转换为整数值并对它们执行一些乘法运算。但是方法`findProduct()`给我的产品是错误的，所以我认为我使用的`Integer.parseInt()`方法不正确。

我想让我失望的是它试图告诉我 96086x67017=2144428166 的乘积，当检查我的计算器时，它大约是 643939395462。

```
/*
 * 
 * Find the greatest product of five consecutive digits in the 1000-digit number.

73167176531330624919225119674426574742355349194934
96983520312774506326239578318016984801869478851843
85861560789112949495459501737958331952853208805511
12540698747158523863050715693290963295227443043557
66896648950445244523161731856403098711121722383113
62229893423380308135336276614282806444486645238749
30358907296290491560440772390713810515859307960866
70172427121883998797908792274921901699720888093776
65727333001053367881220235421809751254540594752243
52584907711670556013604839586446706324415722155397
53697817977846174064955149290862569321978468622482
83972241375657056057490261407972968652414535100474
82166370484403199890008895243450658541227588666881
16427171479924442928230863465674813919123162824586
17866458359124566529476545682848912883142607690042
24219022671055626321111109370544217506941658960408
07198403850962455444362981230987879927244284909188
84580156166097919133875499200524063689912560717606
05886116467109405077541002256983155200055935729725
71636269561882670428252483600823257530420752963450

this text file is in Project_8.txt
*/

import java.io.*;
// Import the scanner class that is used for reading the text file
import java.util.*;

public class Project_8 {

// Data members================================
// Object used to read the text file
private Scanner scanner;

// Public Methods==============================
// Points the scaaner object in the direction of the text file. Outputs an error if file is not found
public void openFile(){

    try{
        // Note the whole file's path is required
        scanner = new Scanner(new File("/Users/nicolematthews/Desktop/Tim/Java WORKSPACE/Project_Euler/src/Project_8.txt"));

    }catch(Exception e){

        System.out.println("Could not find the File. Check file's address");

    }
}

public String readFile(){

    // Instantiating the scanner for user input ruins its application for reading files
    //scanner = new Scanner(System.in);

    // Method looks the text file and adds each line of the text to the String sequence.
    // the Method returns sequence

        String sequence = "";

        // While the scanner has more data to read
        while(scanner.hasNext()){

            sequence = sequence + scanner.next();

        }

    return sequence;
}

// This method simply closes the scanner object
public void closeFile(){

    scanner.close();
}

public int findProduct(String sequence){

    int highestProduct = 0;

    for(int i = 0; i < ( sequence.length() - 10 ); i++){

        // Extract adjacent 5 digit strings which will be converted to integers
        String num1 = sequence.substring(i, i + 5);

        String num2 = sequence.substring(i + 5, i + 10);

        if( Integer.parseInt(num1)*Integer.parseInt(num2) > highestProduct ){

            highestProduct = Integer.parseInt(num1)*Integer.parseInt(num2);

            System.out.println(num1);
            System.out.println(num2);
            System.out.println(highestProduct);
            System.out.println("\n");

        }

    }

    return highestProduct;

}

// Main Method =========================================
public static void main(String args[] ) throws IOException{

    Project_8 object = new Project_8();

    object.openFile();

    String Sequence = object.readFile();

    System.out.println(Sequence);

    System.out.printf("%d Is the highest product of five consecutive \n" +
            "digits in the 1000-digit number.", object.findProduct(Sequence));

    // Finally, close the file when we are done with it.
            object.closeFile();
    /* Find the greatest product of five consecutive digits in the 1000-digit number

    System.out.println(Sequence);

*/      

}
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T16:35:12.393

您的序列索引`i`每次迭代仅增加 1 `i++`，但每次迭代消耗**10 个**字符。你已经表明这是你的意图。

您将`int`使用数据中的*许多*5 位子序列溢出 java。例如，您的第二个产品将是`31671 * 76531 = 2423813301`. 这大于`Integer.MAX_INT`：*2^31 - 1*。

更改`findProduct`要使用的方法`long`并将`Long.parseLong()`解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:33:25.917

我认为问题是由代码的数字提取器部分引起的，所有数字都是 5 个字符长吗？如果不是这种情况，您的代码将无法正常工作，因为您的代码预计它的长度为 5 个字符。如果里面有空格，`Integer.parseInt()`除非你调用它，否则会抱怨，`trim`你没有这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:35:10.153

您的 if 语句一次做太多事情：

```
if( Integer.parseInt(num1)*Integer.parseInt(num2) > highestProduct ){ 
```

您应该将其分解以将每个 int 值分配给单独的变量。这样您就可以打印这些值以查看它们是否正确。此外，它还允许您在下一行中删除对 Integer.parseInt() 的重复调用。

# javascript - 动画一个已经被动画的元素

> ID：11593922
> 
> 赞同：0
> 
> 时间：2012-07-21T16:30:43.637
> 
> 标签：javascript, jquery, animation, jquery-animate

我有一个 jQuery 动画，气泡从屏幕底部升起，同时从 0 不透明度变为 100 不透明度。

我想制作另一个功能，如果单击它会导致气泡消失。

这会导致问题吗？我应该在第二个函数中引用第一个函数并命令它停止吗？如果是这样，您可以发布停止正在发生的动画功能的代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:32:38.637

```
$("elements").stop();
$("elements").animate( ... ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:36:04.273

一点伪代码：

```
$("#bubble").animate({
    top: 0,
    opacity: 1
}, 2000);

$("#bubble").on('click', function() {
     $(this).stop(true, true).hide();
}); 
```

要停止动画元素，只需使用[stop()](http://api.jquery.com/stop/)，并隐藏它，您可以使用[hide()](http://api.jquery.com/hide/)。

# cakephp - 使用 CakePHP 分页器助手显示排序方向

> ID：11593924
> 
> 赞同：1
> 
> 时间：2012-07-21T16:31:12.043
> 
> 标签：cakephp, sorting, pagination

我在我的视图中使用 CakePHP 分页助手来显示排序链接，如下所示：

```
<div class="top-bar">
    <div class="sorts">
        <?php
            echo $this->Paginator->sort('uploaded');
        ?>
        &bull;
        <?php
            echo $this->Paginator->sort('views');
        ?>
        &bull;
        <?php
            echo $this->Paginator->sort('orig_name', 'Name');
        ?>
    </div>
    <div class="clear"></div>
</div> 
```

它工作正常，但我想以不同的方式显示它们。我希望排序方向（asc 或 desc）显示在排序链接中。

例如，如果我按时间上传 ASC 排序，我希望链接显示`Uploaded desc`，如果我单击该链接并按 DESC 对上传进行排序，我希望它显示`Uploaded asc`。基本上与它目前的排序方式相反。

这可能吗？我查看了分页助手的文档，但它看起来不像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:50:37.423

您可以使用 CSS 来执行此操作，就像默认的 cake.generic.css 一样：

```
th a.asc:after {
    content: ' desc';
}

th a.desc:after {
    content: ' asc';
} 
```

核心 css 的样子是：

```
th a.asc:after {
    content: ' ⇣';
}

th a.desc:after {
    content: ' ⇡';
} 
```

链接会根据当前排序的方向向它们添加一个类，因此您可以根据需要使用它来添加其他样式。

# wordpress - 如何将 /category 更改为特定 Wordpress 类别的其他内容？

> ID：11593925
> 
> 赞同：0
> 
> 时间：2012-07-21T16:31:34.290
> 
> 标签：wordpress, categories

我为客户创建了一个名为 Products 的帖子类别，他们可以在其中列出带有指向其场外购物车链接的产品以进行购买。

现在，URL 如下所示：

[http://www.domain.com/category/products/](http://www.domain.com/category/products/)

我怎样才能将其更改为：

[http://www.domain.com/store/products/](http://www.domain.com/store/products/)

我计划添加 2 个额外的类别，它们也需要 /store 而不是 /category。我知道我想做的事情的逻辑，只是不知道语法。

IF 类别 = a、b 或 c THEN /store ELSE /category

所以我的第一个问题是a）这可能吗，b）实现它的正确方法是什么？

非常感谢，

辛西娅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:16:39.353

如果您要选择哪些类别，那么您可能必须考虑一些 htaccess 重写。不幸的是，我认为您还必须使用永久链接默认设置才能让 WP 与 htaccess 一起玩得很好。

我意识到这可能不是最佳答案，但我路过并认为它至少值得一提。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:48:25.280

要获得简单的解决方案，请查看 WP No Category Base 插件。

[http://wordpress.org/extend/plugins/no-category-base-wpml/](http://wordpress.org/extend/plugins/no-category-base-wpml/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:49:14.327

类别永久链接结构是全局设置的。您可以通过导航到 Settings->Permalinks 并将 Category Base 设置为：/store/%category% 来更改类别永久链接的设置方式

请记住我最初的观点：由于类别永久链接是全局设置的，这将影响所有类别，而不仅仅是某些类别。因此，仅当您使用帖子类别来组织您的商店时才使用上述内容，而不是用于其他任何事情。

否则，我建议使用插件来注册自定义帖子类型和自定义分类法（[类型](http://wordpress.org/extend/plugins/types/)是一个很好的）并以这种方式组织您的商店。

或者，如果您更喜欢使用代码做您想做的事情，您可以[注册一个自定义帖子类型](http://codex.wordpress.org/Function_Reference/register_post_type)，然后为您的新帖子类型[注册一个自定义分类](http://codex.wordpress.org/Function_Reference/register_taxonomy)，并将 rewrite 参数设置为您需要的任何内容。

# c++ - 在 C++11 std::atomic 中，用于 ++、- 和 += 等运算符的 memory_order 是什么？

> ID：11593927
> 
> 赞同：2
> 
> 时间：2012-07-21T16:31:38.777
> 
> 标签：c++, c++11, std, atomic

似乎与成员函数不同，您无法指定要使用的 memory_order，因此最终可能会使用一些“默认值”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T16:34:10.313

默认为“顺序一致”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T02:26:00.397

根据 C++ 标准（§29.7/35），调用具有非原子基类型的原子类型的**效果**，即以下之一：`operator++``A``C`

```
C A::operator++() volatile noexcept;
C A::operator++() noexcept; 
```

**与调用成员函数相同`fetch_add(1)`**，根据§29.5（初始声明），后者使用默认参数声明：

```
C fetch_add(C, memory_order = memory_order_seq_cst) volatile noexcept;
C fetch_add(C, memory_order = memory_order_seq_cst) noexcept; 
```

对于整数类型`C`，并且：

```
C* fetch_add(ptrdiff_t, memory_order = memory_order_seq_cst) volatile noexcept;
C* fetch_add(ptrdiff_t, memory_order = memory_order_seq_cst) noexcept; 
```

对于地址类型。**换句话说，使用的默认内存顺序`operator++`是`memory_order_seq_cst`.**

标准没有对 做出任何这样的陈述`operator+=`，尽管在这种情况下假设什么是正确的`operator++`也是正确的似乎很自然`operator+=`。

还要注意标准定义的原子类型函数的一般规则：

> （§29.6.5/2）[...] 不以结尾的自由函数`_explicit`的语义与它们对应`_explicit`的 memory_order 参数的`memory_order_seq_cst`.

# javascript - 我需要一个将两个坐标映射到 0 到 1 之间的伪随机值的 javascript 函数

> ID：11593932
> 
> 赞同：3
> 
> 时间：2012-07-21T16:32:20.980
> 
> 标签：javascript, random, hash, procedural-generation

其他要求：

*   函数的输入是两个数字，不一定是整数

*   速度是主要问题；它应该尽可能快

*   不必是安全的，只要它的输出看起来足够随机。

例子：

```
getValue(0,0) -> 0.326458921
getValue(100,30) -> 0.598713621
getValue(5.12687, 600.471536) -> 0.21458796 
```

**编辑** 澄清：输出值应该是确定性的，但看起来是随机的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:51:10.923

不知道这是否符合您的需求，这只是我自发的一个想法（使用 Java 的 String.hashCode() 的 JavaScript 实现，取自该网站：[http ://werxltd.com/wp/2010/05/ 13/javascript-implementation-of-javas-string-hashcode-method/](http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/) )

```
<script>
    String.prototype.hashCode = function(){
        var hash = 0;
        if (this.length == 0) return hash;
        for (i = 0; i < this.length; i++) {
            char = this.charCodeAt(i);
            hash = ((hash<<5)-hash)+char;
            hash = hash & hash; // Convert to 32bit integer
        }
        return hash;
    }

    function hash(x, y) {
        var hash = Math.abs((x + "" + y).hashCode())
        return hash / Math.pow(10, (hash + "").length);
    }

    alert(hash(5.12687, 600.471536));
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:17:23.150

```
unsigned int hash(int key) {
    key +=~(key << 15);
    key ^=(key >> 10);
    key +=(key << 3);
    key ^=(key >> 6);
    key +=~(key << 11);
    key ^=(key >> 16);
    return key;
}

unsigned int localseed = hash(x^hash(y^baseSeed)); 
```

这使用 baseSeed 值，但这是可选的。基本上从 x/y 坐标创建散列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:05:28.210

你可以写一个哈希函数：

```
function hash(x, y) {
    // You cast the int parts and decimal parts of your entries as 16-bits signed integers.
    var xi = x & 0xFFFF;
    var xf = (((x-xi) * (1 << 16)) & 0xFFFF);
    var yi = y & 0xFFFF;
    var yf = (((y-yi) * (1 << 16)) & 0xFFFF);

    // You hash theses numbers
    var r1 = ((39769 * xi) & 0xFFFF);
    r1 = ((r1 + xf) * 23747) & 0xFFFF;
    r1 = ((r1 + yi) * 19073) & 0xFFFF;
    r1 = ((r1 + yf) * 25609) & 0xFFFF;

    var r2 = ((25609 * xf) & 0xFFFF);
    r2 = ((r2 + yf) * 39769) & 0xFFFF;
    r2 = ((r2 + xi) * 23747) & 0xFFFF;
    r2 = ((r2 + yi) * 19073) & 0xFFFF;

    // And returns a floating number between 0 and 1.
    return ((r1&0xFF)/(1<<24)) + ((r2&0xFFFF)/(1<<16));
} 
```

这个函数对每个 65536 进行包装，因为我只保留了 int 部分的前 16 位，但想法就在这里，你可以修改散列函数。更好的方法是：

```
var arrayBuffer = new ArrayBuffer(8);
var dataView = new DataView(arrayBuffer);

function hash(x, y) {
    dataView.setFloat32(0, x);
    dataView.setFloat32(4, y);

    var xi = dataView.getUint16(0);
    var xf = dataView.getUint16(2);
    var yi = dataView.getUint16(4);
    var yf = dataView.getUint16(6);

    // You hash theses numbers
    var r1 = ((39769 * xi) & 0xFFFF);
    r1 = ((r1 + xf) * 23747) & 0xFFFF;
    r1 = ((r1 + yi) * 19073) & 0xFFFF;
    r1 = ((r1 + yf) * 25609) & 0xFFFF;

    var r2 = ((25609 * xf) & 0xFFFF);
    r2 = ((r2 + yf) * 39769) & 0xFFFF;
    r2 = ((r2 + xi) * 23747) & 0xFFFF;
    r2 = ((r2 + yi) * 19073) & 0xFFFF;

    // And returns a floating number between 0 and 1.
    dataView.setUint16(0, r1);
    dataView.setUint16(2, r2);
    return Math.abs(dataView.getFloat32(0) % 1);
} 
```

最后一种方法使用 WebGL `TypedArray`，它可以让您访问您的条目的位，并有更好的散列方式。但是，根据我的经验，这真的很慢（我的计算机上的第一种方法每秒 8 亿次调用，第二种方法只有 200 万次 - 作为参考，经典的随机函数是 2 亿次调用/秒），而 WebGL 可能并非在所有浏览器上都可用。

# java - java android HttpURLConnection如何获得响应401

> ID：11593940
> 
> 赞同：1
> 
> 时间：2012-07-21T16:33:01.263
> 
> 标签：java, android, httpurlconnection

我正在制作一个 android 应用程序，它将使用 xauth 身份验证连接到 Web 服务器。我的问题是如果服务器返回 401 导致 java 异常，我无法得到响应。

我需要那个回应才能知道我做错了什么。

首先， HttpURLConnection 对这种东西有好处其次，我怎么能得到响应？

```
URL u_rl = new URL(url);
    final HttpURLConnection connection =
        (HttpURLConnection) u_rl.openConnection();

    connection.setRequestMethod(method);

    if (authorization != null) {
        connection.setRequestProperty("Authorization", authorization);
    }
    final byte[] body = parameters.getBytes();

        connection.setRequestProperty(
            "Content-Length", Integer.toString(body.length));
        connection.setDoOutput(true);
        connection.connect();
        final OutputStream output = connection.getOutputStream();
        output.write(body);
        output.flush();
        System.out.println(connection.getResponseCode());
        if (connection.getResponseCode() != 200) {
            result.put("error", connection.getResponseCode()+"");
            return null;
        }

        String out = IOUtils.toString(connection.getInputStream()); 
```

我知道为什么我得到 400 或其他响应代码，问题是用户不知道为什么。服务器向我返回 JSON 错误，即使响应代码不是 200，我也想获取该 JSON 代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:49:32.647

除非你提供它，否则很难说出你的代码中的错误我宁愿建议你使用这个肯定会帮助你的答案。

```
 InputStream retrieveStream(String url) {

        DefaultHttpClient client = new DefaultHttpClient();

        HttpGet getRequest = new HttpGet(url);

        try {

            HttpResponse getResponse = client.execute(getRequest);
            final int statusCode = getResponse.getStatusLine().getStatusCode();

            if (statusCode != HttpStatus.SC_OK) {
                Log.w(getClass().getSimpleName(), "Error " + statusCode
                        + " for URL " + url);
                return null;
            }

            HttpEntity getResponseEntity = getResponse.getEntity();
            return getResponseEntity.getContent();

        } catch (IOException e) {
            getRequest.abort();
            Log.w(getClass().getSimpleName(), "Error for URL " + url, e);
        }

        return null;

    } 
```

并使用此代码将输入流转换为字符串可读数据格式。

```
BufferedReader r = new BufferedReader(new InputStreamReader(retrieveStream("YOU URL")));
StringBuilder total = new StringBuilder();
String line;
while ((line = r.readLine()) != null) {
    total.append(line);
} 
```

谢谢 ：）

# iphone - 使情节提要中的场景更长或在其中滚动

> ID：11593948
> 
> 赞同：5
> 
> 时间：2012-07-21T16:33:25.843
> 
> 标签：iphone, xcode, interface, uiscrollview, storyboard

我在故事板中工作，我的一个滚动视图比 iPhone 屏幕长得多（显示一些长文本）。在模拟器中滚动没问题，但是有没有办法在故事板中向下滚动滚动视图？

我对看到一个教程有一点记忆，其中故事板中的屏幕被“拉伸”得更长，因此它显示了整个滚动视图。但这可能是在做梦。有人知道如何做这样的事情吗？

编辑：

下面的答案说你可以用两根手指拖动滚动视图，但我不能。难道是因为scrollview直接放在了ViewController中，后面没有UIView？无论如何我应该有一个 UIView 吗？除了我无法在情节提要中滚动之外，它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:39:54.797

您可以通过两指拖动在情节提要的滚动视图中滚动。我不知道有一种方法可以使滚动视图的可见部分大于故事板中的设备屏幕。

也不知道你会用“普通”鼠标做什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T17:40:36.540

在情节提要中有一个默认视图，我不知道如何展开。但是您可以通过单击顶部或底部的黑色部分在其中滚动，这会导致整个窗口突出显示。与使用滚动鼠标滚轮相比，您可以向上或向下滚动。

# c# - Windows 移动应用程序中的密码学

> ID：11593953
> 
> 赞同：3
> 
> 时间：2012-07-21T16:33:49.447
> 
> 标签：c#, windows-mobile, cryptography, public-key-encryption

我正在使用visual studio .net(c#) 做windows mobile 无线应用程序。所以我想为通过 TCP 连接的远程登录添加加密（使用 c#）。那么有没有办法在我们的移动应用程序中添加加密功能呢？或者是否有任何适用于 Windows 移动应用程序的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T23:58:14.043

因此，您希望对 TCP 连接进行端到端加密。听起来您想使用[TLS](http://en.wikipedia.org/wiki/Transport_Layer_Security)。只需确保验证您正在与谁打开连接（使用来自 CA 的证书或使用自签名证书，并确保您只与该证书交谈）。[这](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150597.aspx#Y1492)应该让你指向正确的方向。

# iphone - 如何使用 UIPickerView 在一个视图中填充不同的文本字段？

> ID：11593958
> 
> 赞同：2
> 
> 时间：2012-07-21T16:34:31.260
> 
> 标签：iphone, ios, xcode, uitextfield, uipickerview

我有 8 个文本字段的视图。我希望每个文本字段都与具有不同项目的选择器视图相关联。此pickerview 应填充每个文本字段。

当我单击文本字段时，它应该显示pickerview 和与之关联的项目，当我为该文本字段选择项目时，它应该关闭pickerview。然后，当我再次单击下一个文本字段时，它应该显示带有该文本字段项目的选择器视图，依此类推......

有可能这样做吗？我是 xcode 的新手。任何帮助深表感谢。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:47:07.277

绝对有可能。这是我最好的建议：

1.  创建 8 个数组——每个选择器视图一个。在这些数组中，包含用户应该能够从中选择的选项。这可以通过`NSArray`.
2.  在 Interface Builder 中设置您的文本字段（即在您的 Storyboard 文件中），并将`IBAction`每个文本字段的一个连接到视图控制器代码中的一个函数。
3.  在这些函数中的每一个中，`UIPickerView`使用与当前选择器相对应的数组内容实例化一个新的。
4.  用户选择项目后，将文本字段的内容设置为包含在选择器选择的索引中的数组值。
5.  从当前视图中移除选取器。

因为我在这里你是 Xcode 的新手，如果你需要任何额外的解释，请告诉我。

顺便说一句，这里是类参考：http `UIPickerView`: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html%5C)

更新：在点击文本字段时触发的函数中，分配并实例化选择器。*然后*，将其添加到您的视图中。之后，当用户完成选择时，只需将其从视图中删除。

# javascript - 将使用 javascript 的 html5 页面加载到原生 iOS 应用程序的 web 视图中

> ID：11593960
> 
> 赞同：0
> 
> 时间：2012-07-21T16:34:39.237
> 
> 标签：javascript, ios, xcode, uiwebview, webview

想知道是否有人知道如何将使用 javascript 的 html5 页面加载到 XCode 中的 webview 中。我不断收到错误，主要是`warning: no rule to process file '$(PROJECT_DIR)/donk/javascript/highlight.pack.js' of type sourcecode.javascript for architecture i386`我已经看到可以做到这一点的应用程序。有人可以让我知道该怎么做吗？将永远伟大。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:05:58.657

您收到的警告可能是由于构建设置。

看到这个类似的答案：

[编译警告：没有规则来处理架构 i386 的文件](https://stackoverflow.com/questions/6509600/compilation-warning-no-rule-to-process-file-for-architecture-i386)

# python - Python setuptools 找不到库的子模块

> ID：11593964
> 
> 赞同：2
> 
> 时间：2012-07-21T16:35:13.977
> 
> 标签：python, wxpython, setuptools

我第一次尝试使用 python setuptools。我在项目中使用 wxPython。我正在使用以下导入行

```
import wx, random
from wx.lib import buttons 
```

在我的`setup.py`我有

```
 setup(
      name='name',
      version='0.2p',
      description='...',
      author='...',
      author_email='...',
      packages=['name'],
        long_description=open(
          path.join(
              path.dirname(__file__),
              'README'
          )
      ).read(),
        install_requires=[
          'setuptools',
          'MySQL-python',
          'wx',
          'ObjectListView'
        ],) 
```

当我`easy_install`在 .egg 上使用时，一切似乎都很好。但是，当我从安装项目的位置运行 main 方法时，我收到了失败的导入消息：

```
from wx.lib import buttons
ImportError: No module named lib 
```

我是否需要`wx.lib`在 setup.py 文件中明确要求该模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:30:42.970

该问题与您的文件无关`setup.py`，而是您在导入语句中缺少一个步骤。您需要`lib`从`wx`. 它应该看起来像这样：

```
import wx
import wx.lib
from wx.lib import buttons 
```

**编辑**：实际上，`setup.py` `install_requires`. 你想要求`wxPython`而**不是** `wx`。`wx`在 Python 的包索引中是一个完全不同的包。

`import wx.lib`但是，您在导入语句中仍然需要额外的内容。

# php - 如何在 SQL 查询中使用 SQL 值作为参数函数？

> ID：11593968
> 
> 赞同：2
> 
> 时间：2012-07-21T16:35:52.150
> 
> 标签：php, sql, function, parameters, pdo

如果我在 SQL 查询中有一个函数，例如如果我有评论并且我想在 SQL 中验证该评论是否有一个最小字符显示在列表中：

```
$bdd->query('SELECT id, comment FROM comments WHERE count > '. count_chars("id").' ORDER BY time'); 
```

所以问题是：我怎样才能使用 id 作为这个函数的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:43:39.817

您正在尝试在 SQL 查询中使用 PHP 函数来设置查询结果。*但是，查询过程不*涉及PHP 。它只将查询发送到实际处理它的数据库。因此，在查询中使用 PHP 函数将始终产生一个静态值，该值不会随着数据库对行的迭代而改变。因此，您需要使用**SQL 函数**，即 LENGTH()。

例如只选择超过 50 个字符的评论：

```
 $bdd->query('SELECT id, comment FROM comments WHERE LENGTH(comment)>50 ORDER BY time') // 
```

注意：该函数可能称为 LEN，具体取决于您的 MYSQL 版本

# sql-server-2008 - 无法使用以下数据创建表。出现语法错误

> ID：11593972
> 
> 赞同：0
> 
> 时间：2012-07-21T16:36:04.677
> 
> 标签：sql-server-2008

```
Create      Table       employees (
emp_id          char(5)         not null,
hourly_pay      integer         not null,
emp_name        varchar(30)     not null,
emp_address     varchar(50)     not null,
gender          char(1)         not null,
email           varchar(30)     null,
contact_info    integer         not null,
outlet_id       char(5)         null,
supervisor_id   char(5)         null,
job             varchar(15)     not null,
PRIMARY     KEY (emp_id)
FOREIGN     KEY (supervisor_id) 
REFERENCES  employees(emp_id)
) 
```

数据如上图。SQL Server 2008 不断抛出“关键字'FOREIGN'附近的语法不正确”的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:37:45.463

你少了一个逗号。

```
Create      Table       employees (
emp_id          char(5)         not null,
hourly_pay      integer         not null,
emp_name        varchar(30)     not null,
emp_address     varchar(50)     not null,
gender          char(1)         not null,
email           varchar(30)     null,
contact_info    integer         not null,
outlet_id       char(5)         null,
supervisor_id   char(5)         null,
job             varchar(15)     not null,

PRIMARY     KEY (emp_id),
------------------------^

FOREIGN     KEY (supervisor_id) REFERENCES  employees(emp_id)
) 
```

# c - 如何使用 lockf() 解锁？

> ID：11593976
> 
> 赞同：6
> 
> 时间：2012-07-21T16:36:14.850
> 
> 标签：c, linux, file, unix, flock

我想从 txt 文件中读取并在其中附加下一个数字，我也想使用 fork 作为第二个进程。在以下代码中，我需要帮助来解锁文件。我无法解锁文件。

```
int main() {
  int x;
  pid_t child = fork();
  FILE *file;
  //flock(fileno(file),LOCK_EX);
  file = fopen ("list.txt", "r");
  //printf("file is locked");
  int fdSource = (int)file;
  if (fdSource > 0){
    if (lockf(fdSource, F_LOCK, 0) == -1)
       x = readValue(file);
       return 0; /* FAILURE */
    }
    else {
      return 1;
    }
    if (lockf(fdSource, F_ULOCK, 0) == -1){
       printf("file is not lock");
       appendValue(x);
    }
    else {
       return 1;
    }
    appendValue(x);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T17:00:25.570

替换`int fdSource = (int)file;`为：

```
int fd = fileno(file); 
```

此外，如果您在 UNIX 上，您需要`flock`. 而不是`lockf`. 要锁定，请执行以下操作：

```
flock(fd, LOCK_EX); 
```

并解锁：

```
flock(fd, LOCK_UN); 
```

# windows-8 - 在 WinRT api 中，如何在对话框中接受用户输入，就像在天气和财务应用程序中一样

> ID：11593978
> 
> 赞同：10
> 
> 时间：2012-07-21T16:36:40.237
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我正在尝试显示一个允许用户键入位置的对话框，就像在 Windows 8 上的天气应用程序的“添加位置”功能中一样。

Windows.UI.Popups 命名空间没有适当的控件。它有 MessageDialog，但我认为它不能被定制为在其中包含一个文本框。

我是否需要使用 Windows.UI.XAML.Controls.Primitives.Popup 控件？

![Windows 8 上 Weather App 中的输入对话框](../Images/1e3654a36cfc7f83f3d475180aef2ef3.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T04:50:23.253

除了 Popup 之外，没有开箱即用的控件来处理这种风格的 UI，[Callisto](https://github.com/timheuer/callisto)库大量使用了这种控件，因此它有很多很好的使用示例。

**编辑：**事实上，现在 Callisto 库有 CustomDialog 控件来帮助你做到这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T12:19:40.010

是的，您可以使用 Popup 控件，但您需要将 Child 属性设置为覆盖整个 App 窗口的内容控件，并在窗口大小更改时调整大小。创建自己的并不难。

基于 ContentControl 创建模板化控件：

```
public sealed class PopoverView : ContentControl
{
    public PopoverView()
    {
        this.DefaultStyleKey = typeof(PopoverView);
        Loaded += OnLoaded;
        Unloaded += OnUnloaded;
    }

    /// <summary>
    /// Measure the size of this control: make it cover the full App window
    /// </summary>
    protected override Size MeasureOverride(Size availableSize)
    {
        Rect bounds = Window.Current.Bounds;
        availableSize = new Size(bounds.Width, bounds.Height);
        base.MeasureOverride(availableSize);
        return availableSize;
    }

    private void OnLoaded(object sender, RoutedEventArgs e)
    {
        Window.Current.SizeChanged += OnSizeChanged;
    }

    private void OnSizeChanged(object sender, WindowSizeChangedEventArgs e)
    {
        InvalidateMeasure();
    }

    private void OnUnloaded(object sender, RoutedEventArgs e)
    {
        Window.Current.SizeChanged -= OnSizeChanged;
    }
} 
```

将此代码添加到 Generic.xaml：

```
<SolidColorBrush x:Key="PopoverViewBackgroundThemeBrush">White</SolidColorBrush>
<!-- Semi-transparant black brush to cover the background: -->
<SolidColorBrush x:Key="PopoverViewOverlayThemeBrush">#80000000</SolidColorBrush>

<Style TargetType="local:PopoverView">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:PopoverView">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Border Grid.Row="0" Background="{StaticResource PopoverViewOverlayThemeBrush}" />
                    <Border Grid.Row="1" Child="{TemplateBinding Content}" Background="{StaticResource PopoverViewBackgroundThemeBrush}" />
                    <Border Grid.Row="2" Background="{StaticResource PopoverViewOverlayThemeBrush}" />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

现在您可以创建一个以 PopoverView 作为内容的 UserControl。例子：

```
<UserControl
    x:Class="PopoverCustomControlTest.MyUserControl1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:PopoverCustomControlTest"
    xmlns:custom="using:MyCustomControls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <custom:PopoverView>
        <!-- Create your own dialog here instead of this simple button -->
        <Button Content="Close PopoverView"
                Click="Button_Click_1"
                Background="Black"
                HorizontalAlignment="Center"
                Margin="40" />
    </custom:PopoverView>

</UserControl> 
```

```
public sealed partial class MyUserControl1 : UserControl
{
    private Popup popup;

    public MyUserControl1(Popup popup)
    {
        if (popup == null) throw new ArgumentNullException("popup");
        this.popup = popup;
        this.InitializeComponent();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        this.popup.IsOpen = false;
    }
} 
```

并在需要时显示：

```
Popup popup = new Popup();
popup.Child = new MyUserControl1(popup);
popup.IsOpen = true; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T17:01:34.190

您不能将 XAML 控件与 html 应用程序体验混合搭配。

您可以使用它所需要的所有内容构建自己的对话框控件（很难集中注意力！），或者我建议使用 WinJS.UI.Flyout 和相关控件。以下是一些指南：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465341.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465341.aspx)

你应该能够按照你认为合适的方式来设计它。

# c++ - 由 n 个点定义的超平面

> ID：11593979
> 
> 赞同：5
> 
> 时间：2012-07-21T16:36:53.777
> 
> 标签：c++, math, linear-algebra

我有以下问题：

给定空间中的 n 个点，我正在搜索一个穿过它们的超平面。

此类问题的最简单示例是两点 (x_1=0,x_2=0) 和 (1,-1)，我希望返回 1*x_1+1*x_2=0。

我的观点将是 32 位整数的 n 元组。所需超平面 a_1 x_1 + a_2 x_2 + ... = c 的系数 a_i 也必须是 32 位整数。如果无法以这种方式定义超平面，我想报告这个。

我的项目是用 C++ 编码的。

我可能可以自己编写代码，但我预计这将是相当多的工作。另外，我的预感是，这是一个足够普遍的问题，可能会有一个开源库来解决我的问题。有人知道可以解决我的问题的图书馆吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T16:58:47.023

实际上这并不难，因为给定的点是线性无关的。

让 Z^n 中的 u^i 成为您的节点，然后将 v^i 定义为 (u^i_0, ..., u^i_{n-1},-1)。

现在创建一个矩阵 A

```
( v^0_0     v^0_1 ...     v^0_n     )
( v^1_0     v^1_1 ...     v^1_n     )
    .         .             .
    .         .             .
    .         .             .
( v^{n-2}_0 v^{n-2}_1 ... v^{n-2}_n ) 
```

你要解决的是A * x == 0。

现在继续执行高斯消除。确保您仍然让系数为整数。因此，您不必执行 r_k -= r_ki * r_i / r_ii，而必须执行 r_k = r_ki * r_i - r_ii * r_k。在每一步之后，将处理后的行除以其最大公约数。这通常可以避免溢出。如果您遇到溢出，只需为矩阵运算本身使用更大的类型。

最后，您将拥有一个矩阵，其中最多有两列包含多个条目。您的解决方案将仅取决于这两行的值的选择，例如，它看起来像

```
1 1 1 0 0 0
2 0 0 1 0 0
0 1 0 0 1 0
1 1 0 0 0 1 
```

将任何值分配给 x_0 和 x_1（在此示例中），您就完成了。x 的最后一个值将是超平面等式的右手边。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T16:59:12.840

我自己没有用过，但[LinBox](http://www.linalg.org/overview.html)看起来像你想要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-22T19:30:33.880

您需要做的就是求解一个线性方程组：

```
X*A = C 
```

其中 A = (a_1, ..., a_n)^T, C= (c, ..., c)^T。它们都是`n`1 个向量。并且`X`是一个`m`矩阵`n`

```
x^1_1  ...  x^1_n
x^2_1  ...  x^2_n
  .     .     .
  .     .     .
  .     .     .
x^m_1  ...  x^m_n 
```

其中每一行是一个点的坐标。假设`m`有点（无论它们是否线性相关），并且`m<=n`。

要求解线性方程组，请尝试 2​​ 种情况：C = (1, ..., 1)^T 和 C = (0, ..., 0)^T。

然后你可以使用任何算法，比如高斯或高斯-乔丹消除，来寻求 A = (a_1, ..., a_n)^T。如果`m<n`和/或点是线性相关的，您将在 中拥有自由变量`A`，否则`A`是唯一确定的。从确定的`A`中，您可以判断 的所有元素是否可能`A`是整数。

# java - Android ADB：拉到内存

> ID：11593982
> 
> 赞同：0
> 
> 时间：2012-07-21T16:37:16.127
> 
> 标签：java, android, adb

是否有可能以某种方式将 adb pull 的输出重定向到文件而不是内存中的某个位置？

具体来说，我正在编写一个执行的 java 程序

```
adb pull /dev/graphics/fb0 
```

在同一个程序中，我想处理结果而不必`fb0`再次从磁盘读取文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:18:36.100

你总是可以做类似的事情

```
adb shell cat /dev/graphics/fb0 | myprogramthatprocessestheresult 
```

只要`myprogramthatprocessestheresult`从标准输入读取，您就不必保存文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:46:26.013

您可以确保将文件写入共享内存。假设您使用的是 linux 系统，只需将文件拉入

/dev/shm/ 目录。

有关更多详细信息，请参阅此帖子。

[http://www.howtoforge.com/storing-files-directories-in-memory-with-tmpfs](http://www.howtoforge.com/storing-files-directories-in-memory-with-tmpfs)

# iphone - 将应用程序二进制文件上传到 iTunes

> ID：11593988
> 
> 赞同：0
> 
> 时间：2012-07-21T16:38:07.993
> 
> 标签：iphone, ios, itunes, app-store-connect

我已经完成了我的应用程序并成功地将应用程序提交到应用程序商店，当我在我的 iTunes 连接中查看它时，它显示等待审核。所以在 iTunes 中有一个名为 view 的按钮。我单击该按钮以在 iTunes 中查看我的应用程序，但出现了问题。弹出一条消息，它将在我的 iTunes 中可用，目前仅在我们的商店中可用。我来自印度。它表明它不会在印度市场上销售。但我没有对我的位置做任何事情，我上传的应用程序适用于全球，而不仅仅是美国。

这有什么问题。这是我的第一个应用程序提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:45:51.943

在您的应用程序获得批准之前，情况就是这样。它不会在 iTunes 中显示您的应用程序，因为它还不能下载。该消息具有误导性，但这实际上意味着您的应用程序根本不可用。没有什么可担心的。我也不是来自美国，我提交的每个应用程序都有这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:45:32.120

应用程序是否已完成审核流程？这通常需要 7 天。在审核过程完成之前，该应用不会出现在任何全国性商店中。

如果您在发布前尝试在 iTunes 中查看应用程序，您会收到一个弹出窗口，通知您该应用程序在美国商店中不可用。我怀疑您错误地阅读了此弹出窗口。

如果您想仔细检查，请在 iTunes Connect 上打开应用程序，然后转到右上角的“权利和定价”。您将能够在此处查看所有相关信息，包括审核过程完成后将发布到的商店。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:57:15.817

其他两个答案是正确的，但我能想到的唯一另一件事是由于当地法律，您的应用评级存在问题：

前任

![在此处输入图像描述](../Images/d88be2e85a59625510bcc0a7fbc290f1.png)

如果这与您无关，我很抱歉，但我不熟悉阿拉伯联合酋长国是什么。

# go - 权限拒绝使用 API 密钥从 GAE 访问 Bigquery

> ID：11593989
> 
> 赞同：1
> 
> 时间：2012-07-21T16:38:19.317
> 
> 标签：go, google-api, google-bigquery, google-api-go-client

我正在尝试通过我在 Google App Engine 上开发的应用程序访问存储在 Bigquery 中的数据。但是，每次我提出请求时，我都会收到错误“权限被拒绝”。

我已将该应用程序添加为该项目的 API 团队成员（我添加了地址 @appspot.gserviceaccount.com），并且我正在通过包 code.google.com/p/google-api-go-client 访问 bigquery /bigquery/v2

以下代码是我如何将 API 密钥附加到每个查询：

```
transport := KeyedTransport{Key: <api key>, Transport: http.DefaultTransport}
client := &http.Client{Transport: transport}
err := errors.New("reached")
b, err := bigquery.New(client)

...
query := &bigquery.QueryRequest{
            DefaultDataset: <perviously defined daset> 
            Query: <query that looks in a single table for a single result by a unique id>,
            Kind: "json",
            MaxResults: 1,

...

b.Jobs.Query(ProjectID, query).Do() 
```

并且为 KeyedTransport 定义了以下内容

```
func (t KeyedTransport)  RoundTrip(req *http.Request) (*http.Response, error){
        u := *req.URL
        args := u.Query()
        args.Set("key", t.Key)
        u.RawQuery = args.Encode()

        r, err := http.NewRequest(req.Method, u.String(), newBody)

        resp, err := t.Transport.RoundTrip(r)
        if err != nil{
                return nil, errors.New("error: "+err.Error())
        }
        return nil, errors.New("resp: "+toJson(resp))

} 
```

我还确保 API 密钥与 Google API 控制台中生成的密钥相匹配。它是由团队的另一名成员生成的，如果有帮助，它会被标记为“浏览器应用程序的密钥（带有引用者）”。

鉴于这给我带来了很多麻烦，我会转向 Oauth2，因为这似乎对 Go 有更好的记录，但我正在考虑与一些不希望要求用户登录 Google 的组织合作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T01:55:06.380

我不是 Go 专家，但您似乎还需要授权您的应用程序通过使用服务帐户的 OAuth 2.0 流访问 BigQuery API。[App Engine 的 Python 和 Java 运行时使用AppAssertionCredentials](https://code.google.com/p/google-api-python-client/source/search?q=AppAssertionCredentials&origq=AppAssertionCredentials&btnG=Search%20Trunk)类支持“App Engine 服务帐户” 。

但是，也可以[使用通过 Google 开发人员控制台生成的 JWT 文件](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)启用服务器到服务器。

可以*通过*可以处理 JWT 文件的 go-lang 库使用服务器到服务器 OAuth 授权从 GAE Go 运行时访问 BigQuery（可能[像这样](https://github.com/dgrijalva/jwt-go/)）。

# boost-program-options - Boost Program Options 可选参数优先级

> ID：11593993
> 
> 赞同：1
> 
> 时间：2012-07-21T16:39:12.517
> 
> 标签：boost-program-options

该应用程序有两个选项：`a`和`file`。`file`是一个位置选项。两者`a`都有`file`一个字符串类型的参数，可以省略。（我为两者都设置了一个隐式空字符串）。

所需的行为如下：

1.  `$ program`->`file: ""`

2.  `$ program file.txt`->`file: "file.txt"`

3.  `$ program --a`->`a: "", file: ""`

4.  `$ program --a file.txt`->`a: "", file: "file.txt"`

5.  `$ program --a x file.txt`->`a: "x", file: "file.txt"`

但是，选项 4 被解释为`a: "file.txt", file: ""`. 有什么方法可以告知 program_options 如何解决这种模棱两可的情况？（`$ program --a -- file.txt`确实可以按预期工作，但我也希望在没有额外内容的情况下也能正常工作。）我目前使用空字符串表示“未指定”，但这不是必需的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:18:47.823

我想说即使是用户也会对这种行为感到困惑，而不仅仅是 PO。我不明白为什么我不能指定`--a`without `file`，特别是如果 file 具有隐含值？非强制位置选项的隐式空文件名的目的是什么？我想不出一个。

您可以通过将解析器提供给 PO 来实现您的逻辑，文档中对此进行了描述。此外，也是最简单的，您可以在解析后手动更改参数 if`file`未传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:56:59.183

我通过手动将参数从移动`a`到`file`if来解决问题，`a`如下所示：

```
// Fix argument precedence
if (!vm.count("file") && vm.count("a"))
{
    vm.insert(std::make_pair("file", vm.at("a")));
    vm.at("a").as<std::string>() = std::string();
} 
```

# css - 加载自定义字体失败

> ID：11593994
> 
> 赞同：0
> 
> 时间：2012-07-21T16:39:22.320
> 
> 标签：css, fonts, font-face

所以我试图用 CSS3's 加载新字体`@font-face`，但它不起作用。这是我的代码：

```
@font-face{
    font-family: myFirstFont;
    src: url('styles/LucidaGrande.ttf');
}

/* [...] */

@media screen and (max-width: 5500px) {
    #title{
        font-size:50px;
        font-family: myFirstFont;
    }
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:43:29.540

您需要使用多种格式，并非每个浏览器都支持该`truetype font`格式。将您的文件放入[字体生成器](http://www.fontsquirrel.com/fontface/generator)中，您将获得在每个浏览器中完成这项工作所需的所有信息：Firefox 3.5+；歌剧 10+；Safari 3.1+；铬 4.0.249.4+；互联网浏览器 4+；平板电脑；苹果手机。

如果不能解决问题，请提供更多关于浏览器等的信息。并给我们一个活生生的例子。

# python - 将应用程序添加到 Django

> ID：11593995
> 
> 赞同：-2
> 
> 时间：2012-07-21T16:39:32.243
> 
> 标签：python, django

我尝试将应用程序添加到 Django 并将应用程序命名为 main。我输入了 django-admin.py startapp main。

当我运行 python manage.py runserver 时，我遇到了这个错误：

```
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    execute_manager(settings)
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/core/management/__init__.py", line 459, in execute_manager
    utility.execute()
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 8, in <module>
    from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/core/management/sql.py", line 6, in <module>
    from django.db import models
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/db/__init__.py", line 11, in <module>
    if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/conf/__init__.py", line 95, in __init__
    raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'main.settings' (Is it on sys.path?): No module named settings 
```

不知道如何解决错误...需要一些指导...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T16:44:46.237

不要给应用程序与项目同名；Django 很难区分它们。

# javascript - Javascript GIS - 循环通过 feature.attributes

> ID：11593998
> 
> 赞同：1
> 
> 时间：2012-07-21T16:39:53.980
> 
> 标签：javascript, loops, attributes, gis

我正在尝试从此对象返回所有属性名称和值

- 执行查询后调用此函数，特征包含结果。
-feature.attributes 返回一个包含所有属性名称的“对象”。
-featureLayer[counter].fields[i].name 工作正常

我假设 feature.attributes 是一个数组。有没有人有关于如何从这个特征对象返回所有属性值的建议？

（counter、map、featureLayer 和 queryContent 全局声明）

```
function showFeature(feature,evt) {
    //set symbol
    feature.setSymbol(symbol);

    //construct infowindow title and content
    var attr = feature.attributes;
    var title = "Query";
    queryContent = queryContent + "<div>" + "Layer: " + featureLayer[counter].name + "<br />";

    for(i=0;i<featureLayer[counter].fields.length;i++){
        queryContent = queryContent + featureLayer[counter].fields[i].name + ": " + attr[i] + "<br />" + "<br />" + "</div>";
    }

    counter++;
    map.infoWindow.setTitle(title);
    map.infoWindow.setContent(queryContent);

    (evt) ? map.infoWindow.show(evt.screenPoint,map.getInfoWindowAnchor(evt.screenPoint)) : null;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:19:33.647

我找到了一个与 arcgis 包配合得很好的替代方案。

您可以使用 [attr] 而不是 .attr

将 for 循环替换为：

```
for(i=0;i<featureLayer[counter].fields.length;i++){
   queryContent = queryContent + featureLayer[counter].fields[i].name + ": " + feature.attributes[featureLayer[counter].fields[i].name] + "<br />" + "</div>";
} 
```