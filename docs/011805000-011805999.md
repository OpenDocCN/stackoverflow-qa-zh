# StackOverflow 问答 11805000-11805999

# iphone - 这是管理我的视图控制器堆栈的好方法吗？

> ID：11805000
> 
> 赞同：0
> 
> 时间：2012-08-04T00:45:14.123
> 
> 标签：iphone, ios, uiviewcontroller, segue

我的游戏有很多模态视图控制器。所以**我需要一种方法将我的视图控制器从堆栈中弹出，这样我的堆栈上就不会有太多的视图控制器。**

所以说我有 vc 1 连接到 vc 2，连接到 vc3，而 vc3 连接到 vc1。

**当它回到 vc 1 时，我应该打电话吗？**

`[self.navigationController popToRootViewControllerAnimated:YES];` ?

此外，为了重播我的游戏，我所做的只是有一个重播按钮，该按钮与它自己的 vc 相连接。有人告诉我这是个坏主意，所以如果我每次点击重播按钮时都可以打电话`[self.navigationController popViewControllerAnimated:YES];` 吗？

**我希望它与自己的 vc 连接的原因是因为我想要在模态连接时发生的很酷的交叉溶解动画。**

如果我做了这一切，它会毫无问题地工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:05:48.090

除了 self -> self 转换之外，您所做的一切都是正确的。

你应该有一个动画。

例如：

```
 - (void)reset
{
    [self resetInternalModelState];

    [self animateWithDuration:duration animations:^{
        // Logic to dissolve your view.
    }];

    [self reloadModelData];
} 
```

如果你想象你有一个重置状态的方法，以及一个根据你的内部模型数据重新加载视图的方法，这将完全符合你的要求，而不会滥用你从视图控制器转换中获得的动画免费赠品。

# java - 优化代码以获取给定范围内可被整数整除的整数个数

> ID：11805004
> 
> 赞同：5
> 
> 时间：2012-08-04T00:45:55.713
> 
> 标签：java, c++, math, division

给定范围 x, y。我需要计算两者之间的所有数字并且可以被n整除。

我知道做到这一点的简单方法是在整个范围内循环

```
for(int i=x;i<=y;i++) if(i%n ==0) counter++; 
```

柜台持有答案。

但这对于大范围来说非常缓慢。例如 x=0 和 y=3,000,000,000。

我确信有一些关系可以用来减少迭代次数并优化此代码以提高速度。我搜索了但我找不到它。任何人都可以帮助我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T01:13:17.657

这有效：`(e+1 - s) / d + (e%d < (s+d-1)%d)`. （它使用 C 语义和整数算术并假设开始是非负的。s 是开始值，e 是结束值 [包括]，d 是除数。）

更新：更好的解决方案是`e/d - (s-1)/d`. 这是受 User448810 启发的。这要求 s 是积极的；处理零或负 s（或 e）需要将截断调整到零（对于这个问题，我们希望向负无穷大）。

负值更新：以下适用于 s 和 e 在其类型范围内的任何值，前提是 s <= e 和 0 < d：

```
e = e <  0 ? (e+1)/d - 1 : e/d;
s = s <= 0 ? s/d - 1 : (s-1)/d;
return e-s; 
```

本质上，前两个语句等价于除法，`e = e/d`并且`s = (s-1)/d`除法被修改为朝 -infinity 舍入而不是朝零舍入（因此 -1/10 产生 -1 而不是 0）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-20T14:28:32.740

```
(floor)(high/d) - (floor)(low/d) - (high%d==0) 
```

**解释：**

从 0 到 a 有可被 d 整除的 a/d 数。(d!=0)

因此 (floor)(high/d) - (floor)(low/d) 将给出在 (low,high] 范围内可整除的数字（注意，不包括低，高包括在此范围内）

现在要从范围中删除高点，只需减去 (high%d==0)

对浮点数使用 fmodf。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T13:12:19.653

只有这个实现对我有用（[0..2kkk] 中的 A、B；[1..2kkk] 中的 K）：

```
function solution(A, B, K) {
    if(B < K) return A === 0 ? 1 : 0;
    if(A === B) return A % K === 0 ? 1 : 0;

    var pre = A === 0 ? 2 : 1;
    var min = A < K ? K : A + A % K;
    var max = B - B % K;

    return (max - min) / K + pre;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-04T00:55:05.383

我很确定你可以这样做：

```
public static int numDivisible(int low, int high, int test) {
    return (high-low)/test;
} 
```

你去吧。一个恒定时间的解决方案。由于您不需要确切知道*哪些*数字是可整除的，因此您无需费心遍历所有数字。

**编辑**：根据@Chaser324 将其更改为以下内容。

```
public static float numDivisible(float low, float high, float test) {
    return Math.ceil((high-low)/test);
} 
```

**编辑**：一个小错字，即，`text`改为`test`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-04T00:58:15.823

而不是迭代每个数字，您可以尝试

```
public int test(int floor, int ceil, int n) {
    int a = (floor / n) + 1;
    int counter = 0;
    while (a * n <= ceil) {
        counter++;
        a++;
    }
    return counter;
} 
```

并且只使用除数的倍数。现在您不是在重复除法（慢），而是在重复乘法（更快）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-04T01:58:10.710

```
public static int solution(int low,int high, int n) {
    boolean h0=high%n==0;
    boolean l0=low%n==0;

    int k1=l0?low/n:(low+n-low%n)/n;
    int k2=h0?high/n:(high+n-high%n)/n;

    //                 |-----------|
    // ---------------k1----------k2---------------

    if(k2*n>high) k2--;

    return k2-k1+1;

} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-04T01:58:50.217

您要求计算 x 和 y（x 和 y 都包含在范围内）之间可被 n 整除的整数个数。不需要任何循环，只需要两次除法即可计算答案。让我们考虑一个简单的例子：对于 100 到 200 的范围，有多少个整数可以被 7 整除？

从范围的低端开始：100 / 7 = 14，余数为 2。现在除数 7 减去余数 2 为 5，因此可被 7 整除的最小数为 100 + 5 = 105。

现在转到范围的高端：200 / 7 = 28，余数为 4，因此范围上可被 7 整除的最大数是 200 - 4 = 196。

因此，范围内能被 7 整除的数字是 105、112、119、126、133、140、147、154、161、168、175、182、189 和 196。其中有 14 个，你可以通过几种方式计算。取两端的商并减去它们：28 - 14 = 14。或者取两个端点的差，除以除数，然后加1：196 - 105 = 91, 91 / 7 = 13, 13 + 1 = 14\. 但是当端点之一可以被除数整除时要小心；我将把它留给你来制定细节，并编写程序。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-04T02:03:27.120

请提供以下算法评论：假设范围是[R1，R2]，要划分的数字是n。

找到从 R1 开始可被 n 整除的最小数。称其为小数。

找到从 R2 开始可被 n 整除的最大数。称其为大。

可整除的总数=（大-小）/n + 1。

最坏的情况仍然是 O(n)，但对于 R1 和 R2 之间的巨大差异可能是有效的。希望我已经涵盖了所有情况。请建议。

```
int numofDivisible(int R1, int R2, int n) {

int small = R1, large= R2;

if ((R1 > R2) || (n==0)) return 0;

if (R1 == R2) {
    if (R1 % n == 0) 
        return 1;
    else 
        return 0;
}

while(small <= R2){

     if(small % n == 0)
         break;

      ++small;
}

if (small > R2)
    return 0;

while (large > small) {

    if (large % n == 0)
       break;

    --large;
}

if (large == small)
   return 1;

return ((large-small)/n + 1);

} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-01-18T10:44:48.093

```
 public int myfunc(int low, int high, int test) {   
    int count = 0;
    if(low % test == 0)
       count++;
    count +=(high-low)/test;
    return count;
 } 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-08-04T00:51:35.277

好吧，我不是大学教授，所以我没有给你一些惊人的公式，但据我所知，检查这样的数字列表的唯一方法是迭代它们，最后你会必须评估变量以检查它是否可整，现在有一种方法可以优化您的算法，首先对数字进行排序！这最初会很昂贵，但是任何后续检查数字的需要都会快得多，

我建议查看排序算法，我会使用冒泡排序，它会在谷歌上出现很多。

至于你可以用排序做什么，你可以将数字排序到倍数列表中，例如 2 4 6 8 都是 2 的倍数，所以你基本上可以检查列表中的第一个，其余的会立即知道也是可分的

请记住，这样做可能有更有效的方法，只需提供我的 2 美分

# sql-server - 包含 1.5 亿页的 100,000 个 PDF 的文本索引

> ID：11805005
> 
> 赞同：4
> 
> 时间：2012-08-04T00:46:05.387
> 
> 标签：sql-server, database, pdf, indexing

有一个有趣的问题，正在寻找正确的解决方案。我们有大约 100,000 个不同大小的 PDF 文档，平均大小为 150 页。它当前位于 RAID6 服务器上，并且也在异地备份。我们需要索引总共 6.5TB 的 PDF。

我们目前正在将 PDF 转换为文本文件，并将它们存储在服务器上类似的文件夹结构中。然后需要对这些内容进行索引并使其可搜索，包括指向原始文件夹的反向链接。文本文件使用与 PDF 相同的名称，并添加了额外的命名约定。如果我的估计是正确的，这意味着需要索引的词接近 40 亿个。

索引这些文件的合适解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:01:24.657

我会看看[SOLR](http://lucene.apache.org/solr/)。我们目前正在研究将其用作文档的全文搜索引擎。它被广泛使用并得到很好的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T14:02:40.770

如果我的数学计算正确，那么每页就有 400K。那是一个很大的页面大小。

您需要使用索引做什么？

如果您需要接近度和短语，则需要将它们全部索引以及 SOLR 之类的产品。通过 TIKI，我认为您可以索引 PDF。

另一种选择是使用 SQL 全文。但是您需要构建一个前端应用程序。SOLR 和应用程序和引擎在哪里。

您需要索引每个单词还是只索引唯一的单词？如果只需要基本搜索，那么英语中只有大约 200,000 个唯一词。如果你像搬运工一样对它们进行词干，这个数字会下降。然后扔掉像“the”这样的停用词。然后你需要和正确的名称电子邮件和字典中没有的其他单词。我手动索引文档，甚至一个非常大的集合也达到 300,000 个（如果它是真实的单词 - ocr 会杀死这个数字）。如果一个文档有 2,000 个唯一词，则交叉索引只有 20,0000,000。您可以使用 REGEX 解析出单词。我知道这看起来很难看，但我在 SQL 和 .NET 中手动执行此操作。没有邻近或短语搜索，但它占用空间小且速度快。（SQL Azure 没有全文）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T01:00:27.810

查看[Google Search Appliance](http://www.google.com/enterprise/search/index.html)。为什么要重新发明轮子？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T15:19:45.617

如果没有令人信服的理由为此使用 SQL 数据库，我会考虑使用专门的搜索引擎。

大多数全文搜索软件都可以读取 PDF 文件，而无需您将它们转换为文本文件。我过去曾成功使用过[dtSearch](http://www.dtsearch.com)。

# java - Eclipse 在评论下方添加导入

> ID：11805008
> 
> 赞同：2
> 
> 时间：2012-08-04T00:46:24.690
> 
> 标签：java, eclipse

在创建 Java 文件时，我喜欢在所有文件之间保持类似的布局，如下所示：

```
/*
 * ThisFile.java
 * Jamie Davies (2012)
 */

imports

package name

class 
```

但是，当 Eclipse 自动为我添加适当的导入语句（这是一个非常方便的功能）时，它总是将它们添加到文件的最顶部 - 导致我的文件注释被下推。

有没有办法让 Eclipse 在文件中的某个位置自动添加导入 - 即在我的评论之后？

我试过查看“新 Java 文件”模板，但似乎没有用于重要语句的 $variable。我在 OS X Mountain Lion (10.8) 上运行 Eclipse Juno (4.2.0)。

*编辑：*实际上，在我手动放置一个导入语句之后，Eclipse 会自动将其他语句添加到与第一个相同的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:37:14.503

在`new java files`模板中，将当前的编辑为以下

```
${filecomment}
${package_declaration}

${typecomment}
${type_declaration} 
```

希望有帮助。您甚至可以通过单击`Insert Variable`按钮来尝试新变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T03:08:47.633

[这个](http://eclipseone.wordpress.com/2009/11/29/how-to-tweak-eclipse-templates-to-suit-you/)和[这个](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/dialogs_wizards_newWizards.htm)参考可以帮助您自定义 eclipse 模板的编码风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T00:51:32.193

自己添加第一个导入，eclipse 会自动生成跟随你的其他导入。

# d - 为什么这个 wc 示例中的字符串设置为 null？

> ID：11805010
> 
> 赞同：1
> 
> 时间：2012-08-04T00:46:44.467
> 
> 标签：d, word-count

今天对D语言有点好奇，于是翻了一下官网，在官网上看到了如下的wc实现：

```
import std.stdio;
import std.stream;

int main (string[] args)
{
    int w_total;
    int l_total;
    ulong c_total;
    int[string] dictionary;

    writefln("   lines   words   bytes file");
    foreach (arg; args[1 .. args.length])
    {
        int w_cnt, l_cnt;
        bool inword;

        auto c_cnt = std.file.getSize(arg);
        if (c_cnt < 10_000_000)
        {
            size_t wstart;
            auto input = cast(string)std.file.read(arg);

            foreach (j, c; input)
            {
                if (c == '\n')
                ++l_cnt;
                if (c >= '0' && c <= '9')
                {
                }
                else if (c >= 'a' && c <= 'z' ||
                    c >= 'A' && c <= 'Z')
                {
                    if (!inword)
                    {
                        wstart = j;
                        inword = true;
                        ++w_cnt;
                    }
                }
                else if (inword)
                {   
                    auto word = input[wstart .. j];

                    dictionary[word]++;
                    inword = false;
                }
            }
            if (inword)
            {   
                auto w = input[wstart .. input.length];
                dictionary[w]++;
            }
        }
        else
        {
            auto f = new BufferedFile(arg);
            string buf;

            while (!f.eof())
            {   
                char c;

                f.read(c);
                if (c == '\n')
                ++l_cnt;
                if (c >= '0' && c <= '9')
                {
                    if (inword)
                    buf ~= c;
                }
                else if (c >= 'a' && c <= 'z' ||
                    c >= 'A' && c <= 'Z')
                {
                    if (!inword)
                    {
                        buf.length = 0;
                        buf ~= c;
                        inword = 1;
                        ++w_cnt;
                    }
                    else
                        buf ~= c;
                }
                else if (inword)
                {
                    if (++dictionary[buf] == 1)
                        buf = null;
                    inword = 0;
                }
            }
            if (inword)
            {
                dictionary[buf]++;
            }
        }
        writefln("%8s%8s%8s %s\n", l_cnt, w_cnt, c_cnt, arg);
        l_total += l_cnt;
        w_total += w_cnt;
        c_total += c_cnt;
    }

    if (args.length > 2)
    {
        writefln("--------------------------------------\n%8s%8s%8s total",
        l_total, w_total, c_total);
    }

    writefln("--------------------------------------");

    foreach (word1; dictionary.keys.sort)
    {
        writefln("%3s %s", dictionary[word1], word1);
    }
    return 0;
} 
```

无论如何，在第 86 行，代码在字典中第一次出现该单词时将 buf 设置为 null。

```
 if (++dictionary[buf] == 1)
                buf = null;
             inword = 0;
            } 
```

这样做有什么好处？我测试了省略那部分的方法，得到了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:06:55.793

I'm just guessing here. But, that's pretty old code so the reason probably has to do with immutable. In older versions of D, there was no immutable in the type system, so a string was just an alias for plain char[].

In an associative array, if you change a key it can break it since the hashes don't match up - you could get two entries in the tree where there should be only one and other tough to find bugs (hence in newer D versions, if you try int[char[]], it will complain that the key must be immutable).

Changing length to zero, which the code does for a new word, might reuse the existing buffer. I'm pretty sure it wouldn't now, but maybe it did at the time. This could overwrite an existing entry in the hash table. Setting it to null ensures that there's actually a new buffer allocated.

Bottom line: it probably would randomly not work without that line at the time it was written.

# html - 如何正确使用 div 中的填充？

> ID：11805011
> 
> 赞同：5
> 
> 时间：2012-08-04T00:47:18.280
> 
> 标签：html, css

我正在尝试在 div 中使用填充，并且它被另一个 div（'容器'）包裹，为这个简单的问题道歉，但我找不到答案。

只要我不使用`padding:10px;`页面的结构是稳定的。即右侧的 div 向左浮动（“内容”在“侧边栏”旁边）。

```
<html>
<head>
<style type="text/css">
.container {
max-width: 960px;
background-color: RED;
height: 200px;}

.sidebar {
background-color: GREEN;
width: 30%;
float: left;}

.content {
background-color: YELLOW;
float: left;
width: 70%;
padding: 10px;}
</style>
</head>

<body>
    <div class="container">
    <div class="sidebar">
    <p>text in sidebar</p>
    </div>
    <div class="content">
    <p>text in content</p>
    </div>
    </div>

</body>
</html> 
```

当使用`padding:10px;`正确的 div ('content') 时，会在'sidebar' 下下降，而不是浮动到'sidebar' 的一侧。

我已经尝试过`clear: left;`（对，两者都是），但它对我没有帮助。

上述任何解决方案且不是特定风格的`<p>`，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T00:57:51.630

为了避免超过 100% 的页面宽度并向`.content`下颠簸，您可能必须做出一些妥协。我能想到几个解决方案：

## 1）填充所有直接子级`.content`

```
.content > * {
    padding-left:10px;
} 
```

​</p>

## 2)`.content`使用百分比填充

```
.content {
    padding-left:2%;
    width:68%;
} 
```

## 3）改变盒子模型的行为

```
.content {
     box-sizing:border-box;
     -moz-box-sizing:border-box;
     -webkit-box-sizing:border-box;         
} 
```

所有这三种解决方案都会招致一些*不好的*事情。

1.  `.content`当你想给一个元素填充不是 10px 时，填充 的所有直接子级可能会导致问题。
2.  使用百分比填充`.content`在不同大小的窗口上看起来会略有不同。
3.  如果您不知道自己在做什么，那么更改盒子模型的行为可能会很糟糕，因为它会将默认的标准 CSS 模型更改为未广泛使用的模型（在此示例中，我们基本上是在告诉现代浏览器使用IEs quirksmode box model），但它似乎是您案例的最佳解决方案。它基本上没有问题，除了缺乏对 IE7 的支持，IE7 仅占浏览器市场份额的 2% 左右。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T00:53:31.480

这种行为是完全正确的。请记住所谓的盒子模型（简称）：

> 边距、边框和填充都将添加到宽度值

在这种情况下，您必须计算

```
30% + 10px + 70% + 10px = 100% + 20px 
```

* * *

浏览器开始支持 css 属性`box-sizing`（有关更多信息，请参阅[https://developer.mozilla.org/en-US/docs/CSS/box-sizing](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)）。您可以将其设置为`border-box`以更改默认盒子模型。

但请记住也要使用这些浏览器后缀：

```
box-sizing: border-box;
-moz-box-sizing: border-box; 
-webkit-box-sizing: border-box; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T00:57:23.150

这是一个常见的问题，典型的网页设计不符合我们常见的逻辑所期望的方式。

正在发生的事情是填充实际上使`.content`div 变得比其分配的插槽更宽，从而迫使它向下。

有几种方法可以解决这个问题。

这条规则：`box-sizing:border-box;`如果你设置`width:100px`和`padding:10px;`，浏览器会自动将整个 DIV 设置为 100px，无论如何。

实际上正在发生的事情是 DIV 变成了 80px 宽，两边都有 10px 的填充。

我创建了一个[jsfiddle](http://jsfiddle.net/wigster/Rtwv6/2/)

浏览器对这条规则的支持通常很好，尽管确保包含我在 js 中添加的所有规则（即带有 -webkit-、-moz- 的规则，以及上面的规则`box-sizing:border-box;`）

作为参考，这里的所有规则：

```
 box-sizing:border-box;
 -moz-box-sizing:border-box; 
 -webkit-box-sizing:border-box; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-10T14:46:59.113

所有其他答案（截至 2020 年 10 月）都集中在将填充添加到 .content **DIV**使其大于所需的 70% 导致它被推到 .sidebar **DIV**下然后尝试使**DIV**大小为70% 包括填充物。最简单的答案是不填充 .content **DIV**（因此它保持在 .container **DIV**的 70% ），而是填充其中的**P**。如果没有宽度规范，内部**P**是**DIV**的 100%，包括填充，因此**P**的文本将相应地压缩（到 .content **DIV**的 100% - 每边 10px）。所以改变

```
.content {
background-color: YELLOW;
float: left;
width: 70%;
padding: 10px;} 
```

到

```
.content {
background-color: YELLOW;
float: left;
width: 70%;}

.content p {
padding: 10px;} 
```

或者，添加`box-sizing: border-box`到 .content 样式会更改大小计算以包括填充，但这是 CSS3，而在早期版本中将填充移动到**P作品中。**（有人还在用吗？）

经过测试，我只有一个（修辞）问题。为什么浮动两个**DIV**？如果您只浮动 .sidebar **DIV**，则 .content **DIV**中的额外文本将在其下方流动（宽度现在从 .container **DIV**的左边缘开始）。通过浮动两者， .content **DIV**中的额外文本保持在右侧，在 .sidebar **DIV**下留下一个空白区域（如果它比 .content **DIV**少）。我认为这是意图，但这与使用 2 列表所产生的效果完全相同，

```
<html>
<head>
<style>
.table_container {
width: 100%;
max-width: 960px;
background-color: RED;}

.table_sidebar {
background-color: GREEN;
width: 30%;}

.table_content {
background-color: YELLOW;
width: 70%; /* unnecessary */
padding : 10px;}
</style>
</head>
<body>
<table class="table_container">
<tr>
<td class="table_sidebar">text in sidebar</td>
<td class="table_content">text in content</td>
</tr>
</table>
</body>
</html> 
```

这确实与原始（浮动**DIV**）解决方案略有不同。

1.  每个单元格周围都有一个微小的间隙。
2.  侧边栏与内容高度相同。
3.  该表格仅与其内容一样高（可能小于指定的 200 像素）。
4.  **TD**的内容没有上边距或下边距（**DIV中****P**的默认 CSS ）。

**这些可以固定如下：

1.  添加`border-spacing:0`到`.table_container`and （对于旧版浏览器）`cellspacing="0"`作为**TABLE**的属性。
2.  添加`rowspan="2"`到内容**TD ，在侧边栏****TD**下方添加一个空的**TD**并通过添加到强制侧边栏**TD**尽可能低。`height:1px``.table_sidebar`
3.  将表格包含在所需高度的**DIV中。**
4.  **在TD**中添加具有明确定义的上下边距的**P元素（** **TD中****P**的默认 CSS显然没有边距）。

 **```
<html>
<head>
<style>
.container {
max-width: 960px;
background-color: RED;
height: 200px;}

.table_container {
width: 100%;
background-color: RED;
border-spacing: 0;}

.table_sidebar {
background-color: GREEN;
width: 30%;
height: 1px;}

.table_content {
background-color: YELLOW;
/* width: 70%; still unnecessary */ 
padding : 10px;}

td p {
margin: 1em 0;}
</style>
</head>
<body>
<div class="container">
<table class="table_container" cellspacing="0">
<tr>
<td class="table_sidebar"><p>text in sidebar</p></td>
<td rowspan="2" class="table_content"><p>text in content</p></td>
</tr>
<tr><td></td></tr>
</table>
</div>
</body>
</html> 
```

虽然这两种方法产生相同的输出，但**TABLE**方法不太依赖于获得*恰到好处*的大小。****

# jquery - 调用 Html.RenderAction 时出现 Asp.net MVC 3 错误

> ID：11805021
> 
> 赞同：0
> 
> 时间：2012-08-04T00:49:50.893
> 
> 标签：jquery, asp.net-mvc-3

我是 asp.net mvc 3 的新手。如何通过调用操作在 div 中呈现视图：

html:

```
<div id="dialog-modal" title="Basic modal dialog">
 @Html.RenderAction("Popup","Home");
</div> 
```

C＃：

```
public  ActionResult Popup()
    {
       return PartialView();
    } 
```

我收到一个错误：

```
The best overloaded method match for 'System.Web.WebPages.WebPageExecutingBase.Write(System.Web.WebPages.HelperResult)' has some invalid arguments 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T01:11:18.717

尝试将您的 HtmlHelper 包装在代码块中：

```
@{ Html.RenderAction("Popup", "Home"); } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-04T03:41:23.747

来自 Wrox.Professional.ASP.NET.MVC.3.Aug.2011 第 115 页

> Html.Action 和 Html.RenderAction Action 和 RenderAction 类似于 Partial 和 RenderPartial 助手。Partial 帮助器通常使用单独文件中的视图标记帮助视图渲染视图模型的一部分。另一方面，Action 执行单独的控制器操作并显示结果。动作提供了更大的灵活性和重用性，因为控制器动作可以构建不同的模型并使用单独的控制器上下文。再一次，Action 和 RenderAction 之间的唯一区别是 RenderAction 直接写入响应（这可以带来轻微的效率增益）。

# ruby-on-rails - 如何重组这种形式以反过来创建关联？

> ID：11805030
> 
> 赞同：0
> 
> 时间：2012-08-04T00:52:45.083
> 
> 标签：ruby-on-rails, forms, associations

最初我创建了练习来浏览。然后我添加了针对它们记录“log_entries”的能力。

这适用于

```
 = semantic_form_for @exercise do |exercise|
    = exercise.semantic_fields_for :log_entries do |log_entry|
      = render 'log_entries/log_entry_fields', :f => log_entry
    .links
      = link_to_add_association 'Add Set', exercise, :log_entries, :partial => "log_entries/log_entry_fields", :data => {:role => "button", :icon => "plus"}
    = exercise.buttons do
      = exercise.commit_button "Apply", :button_html => {:data => {:icon => "check", :theme => "b"}}
      = link_to "Cancel", "", :data => {:rel => "back", :icon => "delete", :role => "button", :theme => "a"} 
```

我现在添加了需要将其与用户关联的要求。我不确定如何以最好的方式做到这一点。这现在正在发布到锻炼控制器，锻炼并没有真正与用户相关联。所以在练习控制器中，我可以合并参数，但这似乎很骇人。

正确的方法是通过用户创建日志条目关联，对吗？但是我将如何重组表格以使其发挥作用？

我可能不应该再使用运动控制器了，因为它正在创建 log_entries，然后在 LogEntryController 中可以通过那里设置用户......但是最好的方法是什么？出于某种原因，我无法弄清楚如何将锻炼传递给 log_entries 控制器，然后以如图所示的形式呈现集合。

也许我整天都因为编码而大脑大便。谢谢！

我正在使用[Cocoon](https://github.com/nathanvda/cocoon)库来添加关联功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:15:27.793

您不需要宝石来完成此操作。考虑以下关联：

```
class User < ActiveRecord::Base
  has_many :log_entries
end

class Exercise < ActiveRecord::Base
  has_many :log_entries
end

class LogEntry < ActiveRecord::Base
  belongs_to :user
  belongs_to :exercise
end 
```

以及以下深度嵌套的路线：

```
YourApp::Application.routes.draw do
  resources :users do
    resources :exercises do
      resources :log_entries
    end
  end
end 
```

这将导致一个看起来像这样的新链接（很长，我知道）：

```
<%= link_to new_user_exercise_log_entry_path(user, exercise) %> 
```

遗嘱所属的用户和锻炼对象在哪里`user`和是什么。URI 的资源部分看起来像这样，例如：`exercise``log_entry`

```
/users/1/exercises/1/log_entries/new 
```

请注意，您应该提交的是 log_entry 表单，而不是练习表单。

而且您不必对 log_entry 表单做任何特别的事情。由于模型之间存在关系并且路由是嵌套的，因此您可以简单地访问控制器操作中的 and 并将它们分配给那里的新`params[:user_id]`对象。`params[:exercise_id]``log_entry``log_entry`

# jquery - 是否有允许 IE 使用清单文件的 javascript 或 IE 插件？

> ID：11805033
> 
> 赞同：0
> 
> 时间：2012-08-04T00:53:01.490
> 
> 标签：jquery, internet-explorer, cache-manifest

我很确定我可以编写一个利用 IE 自然存储的内容（css、js、图像）并将页面模板写入 localStorage。也许用户必须设置一两个设置。

那里已经有东西了吗？

# mysql - MYSQL 将两张表整合在一张表中，不会遗漏任何一行

> ID：11805039
> 
> 赞同：1
> 
> 时间：2012-08-04T00:54:12.847
> 
> 标签：mysql, sql, join, phpmyadmin

我有两个表，表示按日期排序的两个活动中的用户数：

表 A：在活动 1 中有日期和用户数量
表 B：在活动 2 中有数据和用户数量

问题：如何在 MYSQL 中将它们连接在一起（特别是我使用 PHPMYADMIN 进行数据操作）？我对这段代码的问题是会丢失一些条目（其中没有关于某一列中特定日期的信息）：

```
SELECT a1.day, a1.count, b1.count
FROM table_A a1 
JOIN table_B b1 on a1.day = b1.day
ORDER BY a1.day 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T00:56:36.173

```
SELECT *
FROM table_A

UNION ALL

SELECT *
FROM table_B 
```

会做你想做的事，但如果这是一个常规的事情，你最好简单地将两个表组合成一个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T01:19:03.323

```
SELECT 
    u.day, SUM(count_A) AS count_A, SUM(count_B) AS count_B
FROM
(SELECT day, count AS count_A, 0 AS count_B
FROM table_A
UNION ALL
SELECT day, 0, count 
FROM table_B) AS u
GROUP BY u.day
ORDER BY u.day 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T01:22:50.950

我认为您正在寻找的是`FULL OUTER JOIN`您的两个表中的一个，可以像这样在 MySQL 中模拟：

```
SELECT   *
FROM     (
         SELECT     a.day, a.count, b.count
         FROM       table_A a
         LEFT JOIN  table_B b ON a.day = b.day

         UNION ALL

         SELECT     a.day, a.count, b.count
         FROM       table_A a
         RIGHT JOIN table_B b ON a.day = b.day
         WHERE      a.day IS NULL
         ) a
ORDER BY a.day 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T21:56:32.157

如果我理解正确，您正在尝试合并两个表并添加按“天”分组的“计数”字段的值（可能是“用户”）。

有几种方法可以完成我认为您正在尝试做的事情。在此方法中，我们将创建一个表并使用 UNION ALL、SUM 和 GROUP BY 插入 Table_A 和 Table_B 的值。

```
create table `Table_C` (
   `id` int unsigned primary key auto_increment,
   `day` varchar(16),
   `count` integer
);

INSERT INTO `Table_C`
SELECT * FROM ( 
    SELECT
         0 AS `id`,
        `day`,
        SUM(`count`)
    FROM ( 
       SELECT `a`.`day` AS `day`, `a`.`count` AS `count` FROM `Table_A` `a` 
         UNION ALL
       SELECT `b`.`day` AS `day`, `b`.`count` AS `count` FROM `Table_B` `b`
         ) AS `u` 
    GROUP BY `u`.`day`
    ORDER BY `u`.`day`
) AS `t1`; 
```

但是，这里不考虑活动的“用户”。

# java - GPS应用程序消耗多少功率？

> ID：11805041
> 
> 赞同：3
> 
> 时间：2012-08-04T00:55:11.330
> 
> 标签：java, android, mobile, gps

嘿，我想知道三星 Galaxy II 中 Android 的 gps 定位应用程序每分钟的功耗。应用程序何时运行以及应用程序在后台运行时？如果我的应用程序经常提供位置更新并将其发送到服务器，是否有任何方法可以测试它。另外我想知道在上述情况下，我为 LocationManager 的 requestLocationUpdates 设置的 MINIMUM_TIME_BETWEEN_UPDATES 的最佳时间间隔是多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T02:42:15.097

也许这个应用程序会有所帮助。它似乎专门测量了 GPS 使用的功率。如果您使用 GPS 关闭其他应用程序，您可能能够很好地控制电池消耗。

[http://gigaom.com/mobile/android-power-consumption-app/](http://gigaom.com/mobile/android-power-consumption-app/)

# ruby - 如何使这个 ruby 代码更干燥

> ID：11805042
> 
> 赞同：1
> 
> 时间：2012-08-04T00:55:29.617
> 
> 标签：ruby, refactoring, metaprogramming, dry

我刚刚做了以下代码。我在语法和模式上看到了很多重复（比如一次又一次地使用临时变量 r，并在它不是 nil 时附加字符串）。我怎样才能使这个更干燥？我来自 C 背景，只是想学习 Ruby 的抽象和简化方法以获取优雅的代码......

```
# Traverse a matrix spirally

def subm(m)
  result=[]
  if m.length>1
    m[1..-2].each {|a| result << a[1..-2]}
  end
  result
end

def trav_sp(m)
  result=[]
  if not m.empty?
    result += m[0] if m[0]

    r=[]
    m[1..-1].each {|a| r << a[-1]} if m[1..-1]
    result += r

    r=[]
    if m[-1]
      m[-1].each_with_index{|a,i| (r<< m[-1][-2-i] if m[-1][-2-i])}
      result += r
    end

    r=[]
    m.each_with_index {|a,i| (r<< m[0][-2-i] if m[0][-2-i])}
    result += r

    return result = result + trav_sp(subm(m))
  else
    return result
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:19:06.870

您可以使用`map`而不是重复向临时数组添加元素，以及其他一些更改：

```
# Traverse a matrix spirally

def subm(m)
    m[1..-2].map {|a| a[1..-2]}
end

def trav_sp(m)
    result = []

    if not m.empty?
        result += m[0] if m[0]
        result += m[1..-1].map {|a| a[-1]} if m[1..-1]

        r = []
        if m[-1]
            m[-1].each_with_index{|a,i| (r<< m[-1][-2-i] if m[-1][-2-i])}
            result += r
        end

        r = []
        m.each_with_index {|a,i| (r << m[0][-2-i] if m[0][-2-i])}
        result += r

        result += trav_sp(subm(m))
    end

    result
end 
```

# hadoop - 我们如何获得 Mahout 随机森林中的预测百分比

> ID：11805045
> 
> 赞同：2
> 
> 时间：2012-08-04T00:56:15.940
> 
> 标签：hadoop, machine-learning, weka, mahout

我是 Mahout 的新手。

我正在尝试运行随机森林算法。

我试图找出 TestForest 是否会输出输入给它的单个输入的预测百分比。我知道它会输出仅包含预测的 .out 文件。但是我会得到正确（或错误）预测的百分比作为输出。

我知道我们确实在 Weka 中获得了这些信息。

喜欢：
1.0 0.96
0.0 0.514
等

所以，如果有人能帮助我在 Mahout 中理解这一点。

# c++ - 比较日期c ++（使用boost）

> ID：11805050
> 
> 赞同：4
> 
> 时间：2012-08-04T00:57:16.770
> 
> 标签：c++, boost

我需要能够在 C++ 中转换和比较日期。我发现 boost 库非常适合我的需要，但我无法让它正常工作：

```
 // include headers... 

using namespace boost::posix_time; 
using namespace boost::gregorian;

ptime p1(second_clock::universal_time());

p1 -= weeks(5); // Subtract 5 weeks from p1 using boost...

std::string old_date("2011-11-19"); // format:YYYY-MM-DD

std:stringstream ss(old_date);

ptime p2;

p2 << ss;

if(p1 <= p2){
    // this should not happen in this case (yet it does!) p1 > p2!!
} 
```

基本上我希望能够减去本地日期的几周（或几个月），然后将结果与以 YYYY-MM-DD 格式作为字符串给出的日期进行比较......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:52:03.093

您的语言环境可能未设置为识别 YYYY-MM-DD 格式的日期。尝试按照[格式字符串](http://www.boost.org/doc/libs/release/doc/html/date_time/date_time_io.html#format_strings)示例设置输入构面格式。

这是一个示例，展示了如何将字符串流的输入和输出格式设置为“ISO 扩展”：

```
#include <iostream>
#include <boost/date_time/posix_time/posix_time.hpp>

int main()
{
    using namespace boost::gregorian;
    using namespace boost::posix_time;
    using namespace std;

    stringstream ss;

    /****** format strings ******/
    time_facet* output_facet = new time_facet();
    time_input_facet* input_facet = new time_input_facet();
    ss.imbue(locale(ss.getloc(), output_facet));
    ss.imbue(locale(ss.getloc(), input_facet));
    output_facet->format(time_facet::iso_time_format_extended_specifier);
    input_facet->format(time_input_facet::iso_time_format_extended_specifier);
    ptime t(second_clock::local_time());
    ss << t;
    cout << ss.str() << endl; // 2012-08-03 23:46:38
    ss.str("2000-01-31 12:34:56");
    ss >> t;
    assert(t.date().year() == 2000);
    assert(t.date().month() == 1);
    assert(t.date().day() == 31);
    assert(t.time_of_day().hours() == 12);
    assert(t.time_of_day().minutes() == 34);
    assert(t.time_of_day().seconds() == 56);
} 
```

# jquery - rails 和 jquery - 在自动保存后将表单从创建更新为更新

> ID：11805052
> 
> 赞同：0
> 
> 时间：2012-08-04T00:57:35.603
> 
> 标签：jquery, ruby-on-rails

在我的 rails 应用程序中，我有一个很长的 Inventory 表单，我想自动保存。我使用了[这篇文章](https://stackoverflow.com/questions/5804528/periodically-autosave-form)中的代码。这会创建条目，但会继续创建更多条目，因为我没有更改要更新的操作。我要向函数添加什么，以便 Rails 将下一个自动保存识别为更新而不是创建？这是链接帖子中的javascript：

```
setInterval(function(){
  var form = $('#my-form-id');
  var method = form.attr('method').toLowerCase();      // "get" or "post"
  var action = form.attr('action');                    // url to submit to
  $[method](action, form.serialize(), function(data){
  // Do something with the server response data      
  // Or at least let the user know it saved
  });
},10000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T04:24:57.333

这就是我要做的：

1.  让创建返回一个包含最新条目 ID 的 json
2.  如果自动保存在 json 返回中检测到一个 ID，请将 form.attr('action') 更改为更新

希望这可以帮助

# javascript - jqMath 高亮框，如 MathJax/MathJs 中的 bbox

> ID：11805054
> 
> 赞同：3
> 
> 时间：2012-08-04T00:58:15.090
> 
> 标签：javascript, mathjax, jqmath

jqmath 是否支持在最终渲染中添加自定义容器？

基本上在 MathJax/MathJs [http://www.mathjax.org/docs/2.0/tex.html#bbox](http://www.mathjax.org/docs/2.0/tex.html#bbox)中是否有任何等同于 bbox 的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:25:15.503

`\id`and宏将为子表达式提供`\cl`一个 id 或类，然后您可以使用 CSS 设置它的样式。例如，`\id "some-id" {x+y}`或`x + \cl "some-class" y`。

# objective-c - 使用objective-c编写二进制文件

> ID：11805056
> 
> 赞同：0
> 
> 时间：2012-08-04T00:58:54.893
> 
> 标签：objective-c

我希望读/写一个二进制文件的字节。是否可以使用objective-c访问二进制文件并写入/读取文件的一个字节？就像C可以做的那样？

欢迎任何评论

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T01:04:01.573

COCOA 中有一个类叫做 NSData。您可以调用“dataWithContentsOfFile”类方法将文件中的字节加载到 NSData 对象中。使用“writeToFile:options:error:”将字节写回文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T01:01:00.607

Objective-C 是 C 的适当超集。它不仅有自己的文件 I/O 方法，而且您可以完全按照标准 C 中的方式访问文件。

# mongodb - 读取 mongoDB Binlog

> ID：11805057
> 
> 赞同：5
> 
> 时间：2012-08-04T00:59:11.893
> 
> 标签：mongodb, binlog

在mysql中，我通过做来调试记录是如何改变的

mysqlbinlog bin-88.log | grep "记录 ID" --before=2 --after=2

我如何用 mongo 做类似的事情？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T02:48:41.263

您可以在 MongoDB 中使用类似的方法。binlog 的等价物是[oplog](http://docs.mongodb.org/manual/core/replication-internals/)，它（如 MySQL binlog）通常用于复制。在 MongoDB 中，这`oplog`是一个名为的[上限集合](http://www.kchodorow.com/blog/2010/10/12/replication-internals/)`oplog.rs`，它存在于`local`数据库中。作为一个有上限的集合，oplog 保留了固定数量的历史记录。您可以[更改 oplog 的大小](http://docs.mongodb.org/manual/tutorial/change-oplog-size/)。

为了让 MongoDB 创建一个 oplog，你需要配置你`mongod`使用复制。如果你*只*想要 oplog，你可以创建一个只有一个节点的虚拟副本集。

**注意：**推荐的生产配置是使用至少三个节点的复制，因为这提供了故障转移和数据冗余。

一系列有用的博客文章解释了 oplog 格式，开头是：[Replication Internals](http://www.kchodorow.com/blog/2010/10/12/replication-internals/)。您可以像查询普通 MongoDB 集合一样查询它，因此您可以尝试一些更新并查看生成的命令是什么。

`o2._id`在给定名称空间（`mydb`数据库， ）中查找给定对象 ID（）的所有更新的示例`mycollection`：

```
> use local
> db.oplog.rs.find({'ns':'mydb.mycollection', 'o2._id' : ObjectId("501c87fa9d2b5b2b54437125")})
{
    "ts" : Timestamp(1344047454000, 1),
    "h" : NumberLong("226994175309144171"),
    "op" : "u",
    "ns" : "mydb.mycollection",
    "o2" : {
        "_id" : ObjectId("501c87fa9d2b5b2b54437125")
    },
    "o" : {
        "name" : "Bobby Tables",
        "iq" : 180
    }
} 
```

在上面的示例中，我找到了带有 ObjectID 的文档的更新条目 ( `op`:) 。应用了两列更新：名称、智商。`u``501c87fa9d2b5b2b54437125`

与 MySQL binlogs 的一个区别是 MongoDB oplog 是要应用的[幂等](http://docs.mongodb.org/manual/reference/glossary/#term-idempotent)更改列表。MySQL binlog 是修改数据的语句列表。该`oplog`格式允许 MongoDB 安全地多次应用条目而不会产生不必要的副作用。这也意味着您会发现影响多个文档的更新命令的结果作为 oplog 中每个文档的单独条目，而不是出现在 binlog 中的单个“UPDATE ..”语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:38:27.743

mongodb 中有一个 oplog，但只有当您有副本集时才会填充它。这是一个[封顶集合](http://www.mongodb.org/display/DOCS/Capped+Collections)。

您可以像这样从 shell 查询它：

```
use local;
db.oplog.rs.find(); // specify "ns" and "_id" here, if desired 
```

# silverlight - Ria Services：使用两个数据模型

> ID：11805059
> 
> 赞同：1
> 
> 时间：2012-08-04T00:59:28.780
> 
> 标签：silverlight, ria

我有两个数据库，我想在同一个 DataGrid 上加入来自它们的数据：

1.  来自第一个数据库的表事件，带有字段 Entry_Id 和描述
2.  来自第二个数据库的表详细信息，带有文件 Entry_Id，分辨率

我正在向我的项目中添加两个数据模型和两个 DomainService 类。如何在一个 Datagrid 中显示相关数据并能够编辑分辨率字段？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:57:44.600

如果它们位于不同的服务器上，或许可以考虑使用链接的 SQL 服务器表。请参见 sp_addlinkedserver。

否则，您可以在另一个数据库上创建视图。请参阅[TSQL：创建访问多个数据库的视图](https://stackoverflow.com/questions/2143199/tsql-create-a-view-that-accesses-multiple-databases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:52:16.247

DomainServices 都是关于为您的应用程序提供*特定于域*的数据（“域”是指业务领域，而不是 TLD，这可能会导致一些混乱）。

如果您的数据来自两个外部服务，您将创建一个新的数据结构来保存组合数据并将其提供给您的应用程序。这与您的两个数据库的情况没有什么不同，所以......

您的域服务应该提供*您的应用程序想要/需要的数据，而不是更多*。创建一个包含您想要/需要的所有字段的类，并使用 LINQ 从两个数据库中填充它们。

RIA 旨在提供一种将 CRUD 调用映射到方法的简单方法。你在这些方法中做什么取决于你自己，但重点应该放在应用程序的需求上，而不是表中发生的事情。

# javascript - Backbone.js 路由器混淆（pushState：true，斜杠）

> ID：11805068
> 
> 赞同：4
> 
> 时间：2012-08-04T01:01:31.157
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我正在使用 Backbone 的路由器`pushState:true`来处理我的网站的网址。URL 的示例包括：

*   [http://domain.com/约翰](http://domain.com/John)
*   [http://domain.com/John/](http://domain.com/John/)
*   [http://domain.com/John/photos](http://domain.com/John/photos)
*   [http://domain.com/John/my-latest-photos-2012](http://domain.com/John/my-latest-photos-2012)

**问题**：当用户访问[http://domain.com/John/](http://domain.com/John/)时，执行了预期的功能`photos`。但是，当用户访问[http://domain.com/John](http://domain.com/John)时没有斜杠，什么也没有发生；我的猜测是定义的尾部反斜杠`root`阻止了这种情况。

**路由器**

```
var AppRouter = Backbone.Router.extend({

    routes: {
        '': 'photos',
        'photos': 'photos'
    },

    viewing_username: $('#viewing_username').val(),  // eg: 'John'

    photos: function() {
        console.log('photos');
    }
});

var app = new AppRouter();
Backbone.history.start({
    pushState: true,
    root: '/' + app.viewing_username + '/'
}); 
```

**jQuery**

```
$('a[data-toggle="tab"]').on('click', function(e) {
    app.navigate(e.target.getAttribute('href'), true);
}); 
```

* * *

## 第二次尝试

**问题::**这次我删除了结尾的反斜杠`root`，[http://domain.com/John](http://domain.com/John)现在触发了路由。这次的问题是当用户在[http://domain.com/John](http://domain.com/John)时（我相信浏览器将其视为名为 的页面`John`），因此当单击链接（带有属性`data-toggle="tab"`）时，url 更改为[http://domain.com/Johnphotos](http://domain.com/Johnphotos)不带分隔符`/`。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T03:25:56.570

我认为如果您将主干更新到最新版本，您的第二次尝试应该会奏效。请参阅此讨论：

[https://github.com/documentcloud/backbone/pull/1505](https://github.com/documentcloud/backbone/pull/1505)

上述更改已于 8 天前合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:34:41.723

虽然@shioyama 的回答是正确的，但我经常尽可能使用通配符路由来绕过这种陌生感。

例如：

```
routes:
  'dashboard(/*subroute)': 'index' 
```

当然，这对于许多应用程序来说是不可能的，但是，它在过去为我节省了时间。

# iphone - 如何使用 xcode 记录 HTTP 请求

> ID：11805069
> 
> 赞同：1
> 
> 时间：2012-08-04T01:02:08.307
> 
> 标签：iphone, ios, xcode

尝试调试 API 调用，但我不确定如何记录我发出的所有 http 请求。

我想看到所有标题和参数传出和传入的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T01:10:51.473

如果您将 NSURLResponse 对象转换为 NSHTTPURLResponses，那么您可以执行以下操作：

```
NSHTTPURLResponse *response;
// ...
NSLog(@"My response headers: %@", [response allHeaderFields]);
NSLog(@"My response code: %d (%@), response.statusCode, [NSHTTPURLResponse localizedDescriptionForStatusCode:response.statusCode]); 
```

NSURLRequests 已经相当透明了……

# email - 对跟踪的 crm 电子邮件的电子邮件响应未正确跟踪

> ID：11805070
> 
> 赞同：6
> 
> 时间：2012-08-04T01:02:09.540
> 
> 标签：email, dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-online

我们对传出的 crm 电子邮件的电子邮件响应存在一个普遍问题，该问题已被跟踪，Outlook + crm 插件没有自动跟踪。我们的 crm 是 2011 年在线。我们的用户中有各种 Outlook 插件版本。在 MS 支持的帮助下，我们已经尝试诊断此问题数周了，但我们没有取得任何进展。我已经了解了很多关于电子邮件应该如何跟踪的细节，但我仍然感到困惑。如果有人可以帮助我们了解传入电子邮件的跟踪流程以响应跟踪的 crm 传出电子邮件，我将不胜感激。抱歉这个长问题。以下是我们所知道的：

*   插件的RU5上的用户似乎没有问题
*   >= RU6 上的用户有问题
*   100% 的电子邮件回复不会发生这种情况
*   我们不使用智能匹配
*   我们使用跟踪令牌
*   我们的用户在非缓存模式下运行 Outlook
*   所有电子邮件服务器都是交换的
*   我们确实有与联系人具有相同电子邮件地址的 crm 用户

*   我们确实有 >1 个联系人拥有相同的电子邮件地址

*   注意：在 3 月份问题开始之前，这些具有相同电子邮件地址的记录已经存在了很长时间。

在诊断应用程序/同步故障排除选项卡中，我们启用

*   展望同步
*   自动电子邮件标记

在插件/设置个人选项/电子邮件选项卡中，我们启用

*   检查 Outlook 中的传入电子邮件并确定是否应链接电子邮件并将其保存为 MS Dynamics CRM 记录
*   跟踪 = 响应 CRM 电子邮件的电子邮件消息
*   显示图标 = MS Dynamics CRM 图标

据称，Outlook 插件处理电子邮件跟踪的方式发生了变化。显然，变化是从电子邮件的同步推广到异步推广，但我无法在网络上或远离 MS 本身找到任何细节！我已经阅读了有关更改发生在哪个 RU 的不同说明（5/6/7）。同样，我无法验证是哪一个，但如果 R​​U5 上的用户没有问题并且 >5 有问题，则它指向 RU6。

对以下问题的回答将有很大帮助：

## 插件如何决定是否应该跟踪传入的电子邮件

上面所选选项中的“响应”是什么意思？即电子邮件的哪些字段是相关的？如果原始跟踪电子邮件由用户 A 发送给用户 B，用户 B 将其转发给用户 C，用户 C 将其转发回用户 A，这是否符合条件？或者用户 A 跟踪/发送给用户 B/CC 用户 C 并且用户 C 回复用户 A，这是否符合条件？在我看来，了解应该跟踪什么的唯一方法是了解“规则”，而且这些规则似乎比可乐的配方更受保护……

诊断应用程序/同步故障排除选项卡有一个名为“自动电子邮件标记”的选项。这起什么作用？什么是“线程”？

“后台跟踪电子邮件”选项的相同问题。

这些选项如何一起发挥作用？

## 如果插件决定应该跟踪传入的电子邮件，那么会发生什么？

来自插件的跟踪日志显示与插入它使用的本地 SQL CE 文件有关的错误，但我们不确定它们的含义以及它们发生的原因

如果现在处理是异步的，那会导致时序异常吗？例如，如果响应在原始电子邮件被“提升”之前出现，插件是否会尝试在原始电子邮件之前“提升”响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:03:33.697

我们已经在这种情况下取​​得了一些进展。这是我们目前正在测试的看起来很有希望的东西。

1.  取消选中插件诊断中的“自动电子邮件标记”选项
2.  删除办公室 SP1
3.  删除 Outlook 修补程序（当我拥有它们时会发布更多详细信息）

MS 仍然不愿意/无法明确说明各种电子邮件跟踪设置如何交互（诊断/插件 crm 电子邮件选项卡/服务器端）。如果有人有这方面的信息，我们会很欢迎。当我发现更多时，我会重新发布。

## 更多信息 2012 年 9 月 29 日

一个重要的区别是标记和跟踪

我们的问题似乎是由于打开了标记（上面的 1）引起的，因为我们为每个人都关闭了它，所以我们的跟踪似乎更加可靠。

我仍然不完全理解标记的含义，但据我所知，它指的是 2 个 crm 用户拥有相同跟踪电子邮件的副本并且其中一个更改电子邮件的某些方面的情况。例如，如果用户 1 向用户 2 发送了跟踪/相关电子邮件，然后用户 1 更改了已发送电子邮件的相关记录，如果标记打开，那么用户 2 的电子邮件副本也将更改。换句话说，“标记”似乎是指 crm 尝试使用户之间跟踪的电子邮件保持同步的过程。

请注意，标记是诊断中的设置，当为组织重新配置插件时，诊断设置将恢复为一组默认值，其中包括标记为 ON。因此，每次为组织重新配置添加时，如果您需要关闭标记，则必须手动完成，发布组织重新配置。据我所知，目前没有办法覆盖这种行为。

标记的另一个副作用似乎是它会定期检查 Outlook 收件箱和收件箱的所有子文件夹中的所有电子邮件。相信发送的项目（即它和任何子文件夹）也是如此。它似乎在每封电子邮件的交换服务器上执行读取操作，这可能导致大量读取请求。当我们关闭标记时，每个插件对交换服务器的读取请求显着减少。

在跟踪方面，我们已经验证的是，当仅使用跟踪令牌时（我们的情况），当且仅当主题中存在有效的跟踪令牌时，插件才会将传入的电子邮件视为“跟踪的电子邮件”。有关电子邮件的其他所有内容都可以更改，但只要原始跟踪令牌在主题中，它就被认为是“响应”原始跟踪电子邮件。

我们注意到的另一个异常情况是可能出现以下情况（仅使用跟踪令牌时）：

1.  user1 向 user2 或外部电子邮件地址发送电子邮件，但在发送前不跟踪
2.  post email send, user1 手动跟踪发送的邮件
3.  即使电子邮件本身没有跟踪令牌，也会在 crm 中创建相应的电子邮件活动。

关于时间问题：我们不能 100% 确定这一点，但用户似乎确实有可能在收件箱中收到一封与记录有关的跟踪电子邮件。在插件能够注意到电子邮件被跟踪（即，将图标更改为 2 个头）之前，如果用户尝试单击相关记录，则可能会失败。

由于我们数据的性质，我们确实有多个记录具有相同的电子邮件地址。似乎发生的事情是为每个在跟踪电子邮件的 form/to/cc/bcc 字段中具有电子邮件地址的记录实例创建一个活动方记录。这可能会导致大量不必要的活动派对记录，但跟踪似乎工作正常。我们曾考虑尝试拦截创建的活动方，但插件似乎将每个跟踪的电子邮件的数据存储在本地，因此这似乎是一种危险的方法！

## 概括

我们发现为我们提高了跟踪可靠性的是：

1.  不要使用标记
2.  如果为组织重新配置插件，请记住取消选中标记
3.  尽量减少收件箱及下方的电子邮件数量
4.  不要修改跟踪的已发送电子邮件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:54:31.857

Outlook 中的跟踪与保存邮件的存储 (PST) 有关，插件要求将邮件存储在默认的 PST 中以便跟踪工作。SMTP 帐户对传入邮件的跟踪有限制。

# objective-c - 使用什么 Objective-C IPC 机制？

> ID：11805072
> 
> 赞同：2
> 
> 时间：2012-08-04T01:02:29.600
> 
> 标签：objective-c, ipc, nsnotifications, distributed-objects

我有一个维护一组嵌套对象、自定义类的应用程序。此应用程序需要能够在其更改时与具有非常相似的自定义提供程序补丁的多个 Quartz Composer 组合共享其数据。QC 组合在此应用程序内运行。

QC 补丁只能处理其输入的有限对象类型，因此我的自定义类似乎无法在那里工作。我也犹豫是否将组合硬连接到我的应用程序，这种方式需要我在添加新组合时添加新的 Objective-C 代码。

我已经尝试过分布式对象，即使我被警告​​过不要使用它们。我发现他们太不可靠了。由于我的 QC 补丁以 60fps 的速度运行，它们试图访问售卖对象的频率非常高，以至于我无法在连接崩溃之前优雅地关闭连接。

现在，我正在使用分布式通知将更新字典发送到我的 QC 补丁每次发生变化时，大约是每秒一次。我将我的自定义类序列化为字典，以便我可以执行此操作，然后在最多 5 个接收此数据的补丁实例中对字典进行反序列化。这可行，但似乎效率低下，我担心潜在的延迟和丢失消息的警告。我的补丁需要非常及时地接收更新（少于 0.1 秒，越快越好），并且不掉线。

什么是我用来将数据从我的应用程序获取到我的自定义 QC 补丁的最佳机制？

谢谢！亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T01:12:17.737

如果你希望它是高水平的，XPC 是要走的路（它甚至有一个很好的更新，可以直接在 Mountain Lion 中与 Objective-C 一起使用（查看`NSXPC`前缀类和协议））。如果这太慢了（这不应该是因为 XPC 非常轻量级），你可以尝试回退到 mach 消息，几乎每种 IPC 在 OS X 上使用的东西。但是！通过 MIG 生成 mach 消息很麻烦，所以你应该先尝试 XPC，只有当它太慢时，才尝试 mach 消息。

关于如何创建 XPC 服务的概述可以在[这里找到](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingXPCServices.html)

# git - 在远程：致命：路径不存在 Git 错误

> ID：11805077
> 
> 赞同：3
> 
> 时间：2012-08-04T01:03:39.177
> 
> 标签：git

当新文件添加到我的本地仓库时，似乎每次我推送到远程时，我都会得到

```
remote: fatal: Path 'src/main/java/com/a/b/File.java' does not exist in 'branch' 
```

然后，从我可以观察到的新文件被添加到远程，一切都很好。

然而，这对我来说似乎是一个致命的警告，还有什么`fatal`。

我读错了吗？这是可以安全忽略的错误还是警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:47:23.940

如果您使用“git add File.java”添加新文件，一切都应该没问题。我用 'git commit -m "message"' 跟随它。

专业提示（我还不是真正的专业人士）：只要您知道所有必要的定义都在您的.gitignore 文件。您不想意外添加和提交临时文件等。

# iphone - 使用 FBGraph 登录 Facebook

> ID：11805078
> 
> 赞同：1
> 
> 时间：2012-08-04T01:03:56.790
> 
> 标签：iphone, ios, xcode, facebook-graph-api

我是 iOS 开发的新手。我想从我的 iPhone 应用程序连接到 Facebook。我按照[FBGraph API](https://github.com/reallylongaddress/iPhone-Facebook-Graph-API/tree/59e639922c4bf6953162ea81998f2ff951cd1769)来了解我们如何在我们的应用程序中使用 Facebook，例如：

打印登录用户的信息：

```
FbGraphResponse *fb_graph_response = [fbGraph doGraphGet:@"me" withGetVars:nil];
NSLog(@"getMeButtonPressed:  %@", fb_graph_response.htmlResponse); 
```

或好友列表：

```
FbGraphResponse *fb_graph_response = [fbGraph doGraphGet:@"me/friends" withGetVars:nil];
NSLog(@"getMeFriendsButtonPressed:  %@", fb_graph_response.htmlResponse); 
```

这是`doGraphGet`方法`FbGraph.m`：

```
- (FbGraphResponse *)doGraphGet:(NSString *)action withGetVars:(NSDictionary *)get_vars {

    NSString *url_string = [NSString stringWithFormat:@"https://graph.facebook.com/%@?", action];

    //tack on any get vars we have...
    if ( (get_vars != nil) && ([get_vars count] > 0) ) {

        NSEnumerator *enumerator = [get_vars keyEnumerator];
        NSString *key;
        NSString *value;
        while ((key = (NSString *)[enumerator nextObject])) {

            value = (NSString *)[get_vars objectForKey:key];
            url_string = [NSString stringWithFormat:@"%@%@=%@&", url_string, key, value];

        }//end while    
    }//end if

    if (accessToken != nil) {
        //now that any variables have been appended, let's attach the access token....
        url_string = [NSString stringWithFormat:@"%@access_token=%@", url_string, self.accessToken];
    } 
```

首先我们需要登录到 Facebook，如下所示：

![在此处输入图像描述](../Images/be020b1b1c25e6cbf6da412708ca9ee7.png)

我猜它在 FbGraph.m 中使用了这段代码（使用`UIWebView`）：

```
self.redirectUri = @"http://www.facebook.com/connect/login_success.html";

- (void)authenticateUserWithCallbackObject:(id)anObject andSelector:(SEL)selector andExtendedPermissions:(NSString *)extended_permissions andSuperView:(UIView *)super_view {

    self.callbackObject = anObject;
    self.callbackSelector = selector;

    NSString *url_string = [NSString stringWithFormat:@"https://graph.facebook.com/oauth/authorize?client_id=%@&redirect_uri=%@&scope=%@&type=user_agent&display=touch", facebookClientID, redirectUri, extended_permissions];
    NSURL *url = [NSURL URLWithString:url_string];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    CGRect webFrame = [super_view frame];

    webFrame.origin.y = 0;
    UIWebView *aWebView = [[UIWebView alloc] initWithFrame:webFrame];
    [aWebView setDelegate:self];    
    self.webView = aWebView;

    [aWebView release];

    [webView loadRequest:request];  
    [super_view addSubview:webView];
} 
```

我的问题是关于一种可能性。我可以自己有一个机制从用户那里获取电子邮件和密码然后登录（就像其他方法一样，例如在控制台中打印身份验证失败或成功登录）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:11:15.163

On click of button and its event is say fbLogin then add this code for login

```
-(void)fbLogin
{
   if(!self.fbGraph.accesstoken) // doesnot have access token. So needed to login
   {
    NSString *client_id = @"130902823636657"; //get your own client id from facebook

    //alloc and initalize our FbGraph instance
    self.fbGraph = [[FbGraph alloc] initWithFbClientID:client_id];

    //begin the authentication process.....
    [self.fbGraph authenticateUserWithCallbackObject:self andSelector:@selector(fbGraphCallback:) andExtendedPermissions:@"user_photos,user_videos,publish_stream,offline_access,user_checkins,friends_checkins"];
   }
   else
   {
      // Add UIAlert as user is logged in already
      //pop a message letting them know most of the info will be dumped in the log
      UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Note" message:@"user is logged in already" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
      [alert show];
      [alert release];
   }
} 
```

Now when user is authebticated this method below is called. So add this method in your .h file.

```
#pragma mark -
#pragma mark FbGraph Callback Function
/**
* This function is called by FbGraph after it's finished the authentication process
**/
- (void)fbGraphCallback:(id)sender 
{

 if ( (self.fbGraph.accessToken == nil) || ([self.fbGraph.accessToken length] == 0) ) 
 {

  UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Note" message:@"Try Again" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
  [alert show];
  [alert release];

  //restart the authentication process.....
  //[self.fbGraph authenticateUserWithCallbackObject:self andSelector:@selector(fbGraphCallback:) andExtendedPermissions:@"user_photos,user_videos,publish_stream,offline_access,user_checkins,friends_checkins"];

 } 
 else 
 {
  //pop a message letting them know most of the info will be dumped in the log
  UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Note" message:@"Logged In Successfully" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
  [alert show];
  [alert release];
  NSLog(@"------------>CONGRATULATIONS<------------, You're logged into Facebook... Your oAuth token is: %@", self.fbGraph.accessToken);
 }
} 
```

# css - 为所有浏览器定位表单输入字段

> ID：11805082
> 
> 赞同：1
> 
> 时间：2012-08-04T01:04:50.320
> 
> 标签：css, forms, browser, input, position

这是我第三次尝试解决这个问题——在 stackoverflow 社区的帮助下，我认为我离解决这个问题更近了。我创建的联系表单上的输入字段在 Chrome 和 Safari（与 FF 相关）中较低，在 IE 中较高。我已经实现了我在这里给出的许多建议，但在为所有浏览器定位它们时仍然没有运气。我能够通过使用 normalize.css 取得一些进展

我已经设置了一个测试页面：[http ://tinyurl.com/d3pxoe2](http://tinyurl.com/d3pxoe2)

这是我的联系表格：

```
 <div id="contactcontainer" class="contactform">

 <form method="post" name="validation" action="index.php" onsubmit="return validateForm();">

 <div class="containerleftside">

 <input type="text" class="shared" name="firstname" autofocus placeholder="Your first name" value="<?php echo $firstname;?>" style="margin-left:142px; margin-top: 108px;"/>
 <input type="text" class="shared" name="lastname" placeholder="Your last name" value="<?php echo $lastname;?>" style="margin-left:140px; margin-top:2px;"/>
 <input type="text" class="shared" name="email" placeholder="Your email name" value="<?php echo $email;?>" style="margin-left:84px; margin-top:1px;" />
 <input type="text" class="shared" name="location" placeholder="Your location" value="<?php echo $location;?>" style="margin-left: 116px; margin-top:0px;"/>

 </div><!--close of container left-->

 <div align="right" class="containerrightside">

 <textarea name="message" placeholder="What say you?"></textarea>
 <img style="margin-top:-10px; float:right; margin-right:3px;" src="CaptchaSecurityImages.php" />

 <p style="float:left; margin-top:-10px; text-align:left; font-family:'form', 'formIE';  font-size:24px; color:#000;">Security Code:</p>
 <input id="security_code" name="security_code" type="text" style="width:125px; float:left; margin-right:80px; height:1.4em; line-height:1.4em; font-size:1.4em; margin-top:-28px;"/>
 <input class="contact" type="submit" name="submitted" value="contactus" />

 </div><!-- end of containerrightside-->
 </div><!-- end of contactcontainer-->
 </form> 
```

这是CSS：

```
 #contactcontainer {
background-image:url(../images/contactform.png);
background-repeat:no-repeat;
width:618px; 
height:318px; 
    margin:-10px auto;

 }

 .contactform{width:100%; height: 318px; margin:0 auto; padding:0;}
 .contactform input, textarea { background: none; font-size:1.4em; border:none; font-family:'form', 'formIE'; font-color:#999;}
 .contactform .contact{font-size:0px; width:91px; display:block; height:34px; float:right; margin-top:-25px;}
 .contactform .shared{height:1.4em; width: 150px; line-height:1.4em;}

 textarea {
height:120px;
color: #666;
width:260px;
margin-top:20px;

 }

 input:focus, textarea:focus {

 border:1px solid #99cc66;
 }

 .contact:hover {cursor:pointer;}

 .containerleftside {
width: 50%;
float: left;
margin-top:5px; 
text-align:left;
 }

 .containerrightside {
width: 48%;
float: right;
margin-top:110px;   
text-align:left;
height:208px;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T01:10:16.670

可能使用[重置 CSS](http://meyerweb.com/eric/tools/css/reset/)会有所帮助

> 重置样式表的目标是减少浏览器在默认行高、页边距和标题字体大小等方面的不一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T01:18:07.517

我会尝试将 .contactform css 中的 em 值更改为 px 值，看看它是否在 ff、chrome 和 safari 中变得一致。只要这三者一致，IE 修复起来就非常简单。

# .net - 如何在文件上显示来自另一个库的操作的进度？

> ID：11805089
> 
> 赞同：3
> 
> 时间：2012-08-04T01:06:19.107
> 
> 标签：.net, vb.net, stream, hash

我正在使用 计算一个非常大的文件的 SHA-512 哈希`System.Security.Cryptography.SHA512Cng.ComputeHash`，我想为其显示一个进度条。如何在不重新实现算法的情况下检查方法的完成情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:06:19.107

你可以子类`Stream`！这是`ProgressStream`从文件中读取的：

```
Public Class ProgressStream
    Inherits FileStream

    Public Event ProgressChanged(sender As ProgressStream, progress As Integer)

    Public Sub New(fileName As String)
        MyBase.New(fileName, FileMode.Open, FileAccess.Read)
    End Sub

    Public ReadOnly Property Progress() As Integer
        Get
            Return CInt(Me.Position / Me.Length * 100)
        End Get
    End Property

    Public Overrides Function Read(array() As Byte, offset As Integer, count As Integer) As Integer
        Read = MyBase.Read(array, offset, count)
        RaiseEvent ProgressChanged(Me, Me.Progress)
    End Function
End Class 
```

只是处理`ProgressChanged`事件。

相同的方法适用于所有其他类型的流，您还可以将它用于某些其他长时间运行的任务，这些任务根据需要而不是一次性读取文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T02:04:54.680

一种常见的方法是使用`TransformBlock`and`TransformFinalBlock`并以块的形式计算散列。这使您不必关心正在使用的流的类型，或者您可能想要散列多个流（例如目录中的所有文件）。

这是一个小例子：

```
Using stream As New FileStream("C:\somefile.dat", FileMode.Open),
      hash As New SHA512Cng()
    Const BUFFER_SIZE As Integer = 2048
    Dim buffer(BufferSize - 1) As Byte
    Dim bytesRead As Integer

    Do
        bytesRead = stream.Read(buffer, 0, BUFFER_SIZE)
        hash.TransformBlock(buffer, 0, bytesRead, buffer, 0)

        Dim percentComplete = stream.Position / stream.Length * 100
        'Handle percentComplete here somehow, perhaps with an event
    Loop While stream.Length - stream.Position > BUFFER_SIZE

    bytesRead = stream.Read(buffer, 0, BUFFER_SIZE) ' read the final block
    hash.TransformFinalBlock(buffer, 0, bytesRead)

    'We're now 100% complete, raise an event with 100% completion
    Dim theHash = hash.Hash 'The final hash values
End Using 
```

缓冲区大小越小，结果越细粒度，但可能会以性能为代价。

# php - 使用 jquery 在同一页面中与 php 进行通信（如果设置了 cookie）

> ID：11805093
> 
> 赞同：1
> 
> 时间：2012-08-04T01:06:41.837
> 
> 标签：php, jquery, session, cookies, session-cookies

我有一个**frame.php**页面

```
if(isset($_COOKIE['user'])){
// do some stuff
}else{
// login script
} 
```

在**jquery.frame.php**页面中

```
$("#infm_login_button").live("click",function(){
    $.ajax({
        url: "urltologinformacceptance",
        type:"POST",
        data: $("#login").serialize()
    }).done(function(data){
        //do stuff
    });
    return false;

}); 
```

现在在同一个**frame.php**中，我如何让 jquery 告诉，哦，用户已登录，是的，继续前进并进入该`// do some stuff`部分。但是，我不希望用户刷新页面。我希望它只在用户登录时将内容从更改`// login script`为`// do some stuff`不刷新页面。有没有办法让 jquery 与那个**frame.php**和`cookie`？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T01:24:24.890

首先：live 自 jQuery 1.4 或其他版本以来已被弃用。使用 .on() 代替。

其次，当 ajax 调用完成时，您不想“做”某事，而是当它成功时。如果有超时怎么办？试试这个：

```
 $.ajax({
            type : 'POST',
            url : 'url.php',
            data: $("#login").serialize(),

            success : function(data){
                $(document).html(data);
            }

                }); 
```

这会将 url.php 的输出打印到整个文档，有点像 php 中的 include()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:31:12.423

除了 Djerro Neth 的回答。回显登录用户的输出（菜单、链接等）

```
 if(isset($_COOKIE['user'])){
 // do some stuff
      echo "Welcome back ".$_COOKIE['user']."!";
 }else{
 // login script
 } 
```

并使用 jQuery 从 frame.php 返回的新内容覆盖登录表单中的 div。

```
 success : function(data)
           {
              $("#loginspace").html(data);
           } 
```

# c# - XmlReader 认为所有元素都是 EndElements

> ID：11805096
> 
> 赞同：0
> 
> 时间：2012-08-04T01:07:15.377
> 
> 标签：c#, xml, stream

```
 StringBuilder returnXml = new StringBuilder();
        returnXml.Append("DATE TIME,FUNCTION,TOTAL\n");
        String Date = "", Function = "", Total = "";
        StreamReader xmlStream = getBlobData(logType, serial, blobStorageCredentials);

        //string adf = xmlStream.ReadToEnd();

        XmlReader xmlReader = XmlReader.Create(xmlStream);
        while (xmlReader.Read())
        {

                switch (xmlReader.Name)
                {
                    case "OperationType":
                        if (xmlReader.NodeType == XmlNodeType.Element)
                        Function = xmlReader.ReadElementContentAsString();
                        break;

                    case "TotalCounter":
                        if (xmlReader.NodeType == XmlNodeType.Element)
                        Total = xmlReader.ReadElementContentAsString();
                        break;

                    case "LogDateTime":
                        if (xmlReader.NodeType == XmlNodeType.Element)
                        Date = xmlReader.ReadElementContentAsString();
                        break;

                    case "Entries":
                        if (xmlReader.NodeType == XmlNodeType.EndElement)
                        {
                            returnXml.Append(Date);
                            returnXml.Append(",");
                            returnXml.Append(Function);
                            returnXml.Append(",");
                            returnXml.Append(Total);
                            returnXml.Append("\n");
                        }
                        break;

                    default:
                        break;
                }

        }
        return returnXml.ToString(); 
```

所以所有这些案件都没有被输入。如果我评论：

```
 //string xmlString = xmlStream.ReadToEnd(); 
```

然后 xmlString 在调试器中是这样的（看起来是正确的）：

[http://pastebin.com/8Uj2GwSB](http://pastebin.com/8Uj2GwSB)

为什么 XmlReader 认为所有的节点都是 EndElements？我很挣扎，因为这不是我的代码。交给我了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T04:54:55.667

当您取消注释时，您的 StreamReader 会将文件指针移动到 xml 文件的末尾。

```
//string xmlString = xmlStream.ReadToEnd(); 
```

因此，即使您从 xmlStream 创建 XmlReader，您也没有任何字节要读取。如果您想将流读入上述字符串并将其重新用于 XmlReader，则需要“倒回”流。这可以通过设置 Position 属性并清除缓冲区来实现，例如：

```
xmlStream.Position = 0;
xmlStream.DiscardBufferedData(); 
```

希望这可以帮助。

# java - Jersey POST 方法参数为 ClassObject

> ID：11805100
> 
> 赞同：0
> 
> 时间：2012-08-04T01:08:58.417
> 
> 标签：java, json, jersey

我已经使用 jersey 有一段时间了，我刚刚实现了一个 POST 方法，它获取一个 Json 作为参数。但是我希望它像这样运行：

```
 // The json class to be used and returned
    @XmlRootElement
    public class Container 
    {
        private boolean isOk;
        private String message;

        public Container() {}

        public boolean getOk()
        {
            return this.isOk;
        }   

        public void setOk(boolean isOk)
        {
            this.isOk = isOk;
        }
    }

    // A service
    @Path("json/test")
    public class TestService 
    {
        @POST
        @Consumes(MediaType.APPLICATION_JSON)
        @Produces(MediaType.APPLICATION_JSON)
        public Container readAndReturnMessage(Container receivedJson)
        {
            doSomething(receivedJson.getMessage());
            return receivedJson;
        }   
    } 
```

不幸的是，这不起作用。所有的 Container 变量都是空的，即使传递给服务的原始 json 没有任何问题。这里的方法是什么，我是否需要将 String 作为参数并使用 Jackson/Gson 反序列化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-25T10:18:47.727

如果您没有添加任何标头，则需要在您的**POST**请求中添加**Content-Type标头。**由于您的应用程序正在使用**application/json**您需要 在 POST 请求中添加**Content-Type: application/json 。**

 ******如果您的请求正文是以下形式： { "Container": { "isOk": "true", "message": "New message" } } 您将获得空值。

请求正文应采用以下形式： { "isOk": "true", "message": "New message" } 这很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:17:06.857

`Container`为您的班级添加 getter 和 setter 。

更新。[以下](http://docstore.mik.ua/orelly/java-ent/jnut/ch06_02.htm)是创建 Java Bean 的惯例。请参阅命名部分。顺便说一句，我在布尔字段上失败了。最好的方法：

```
boolean ok;

public boolean isOk(){
   return this.ok;
}

/* if setter is required */
public setOk(boolean ok){
   this.ok = ok;
} 
```******

# xmpp - XMPP MUC 最大用户数

> ID：11805102
> 
> 赞同：0
> 
> 时间：2012-08-04T01:09:18.807
> 
> 标签：xmpp

我有一个列出所有公共聊天室的页面，我想拥有：总占用者/最大用户

IE。(05/10 房间里的人)

扩展迪斯科信息结果（[查询房间信息](http://xmpp.org/extensions/xep-0045.html/#disco-roominfo)）返回房间中的当前占用者，但不显示最大占用点数。

我将如何检索房间的最大用户数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T00:12:24.507

在[XEP-0045中，](http://xmpp.org/extensions/xep-0045.html)[示例 10](http://xmpp.org/extensions/xep-0045.html#example-10)正下方是指定扩展发现结果中允许的字段的文本，其中包括：

> ...为 muc#roomconfig FORM_TYPE 定义的任何字段都可以包含在扩展服务发现字段中（如上所示的“muc#roomconfig_changesubject”字段）。

因此，支持此功能的服务器将在发现结果中返回如下字段：

```
<field var='muc#roomconfig_maxusers' 
         label='Maximum Number of Occupants'>
    <value>10</value>
</field> 
```

如果您的服务器没有返回此信息，则可能会提交功能请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-17T11:30:35.940

```
One can set the number of occupants in MUC's Configuration. Example 157 in XEP-0045 
```

使用节：

```
 <field var='muc#roomconfig_maxusers' 
         label='Maximum Number of Occupants'>
    <value>50</value>
</field> 
```

* * *

Objective-C 代码：

NSArray *fields = [newConfig elementsForName:@"field"];
for (NSXMLElement *field in fields) { NSString *var = [field attributeStringValueForName:@"var"];

```
if ([var isEqualToString:@"muc#roomconfig_maxusers"])
{
    [field removeChildAtIndex:0];
    [field addChild:[NSXMLElement elementWithName:@"value" stringValue:@"50"]];
} 
```

[XMPPRoom 配置房间使用选项：新配置]；}

# javascript - 如何设置 webstorm 以自动将分号添加到 javascript 函数、方法等

> ID：11805103
> 
> 赞同：66
> 
> 时间：2012-08-04T01:09:24.120
> 
> 标签：javascript, phpstorm, webstorm

当我编写 Javascript 时，我使用分号。但是，当我在 webstorm/phpstorm 中编写时，它会自动完成大括号和方括号，但不会自动添加分号。我知道这不是标准等要求的，但这就是我编码的方式——而且我并不孤单，很多人都这样编码。

例子：

```
var data = $.ajax({}); 
```

通常，webstorm/phpstorm 会这样做，并将光标留在花括号内：

```
var data = $.ajax({}) 
```

正如我在第一个示例中所指出的那样，我想要的就是不必手动添加分号并让它自动完成。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-08-04T02:17:18.750

没有办法自动插入，需要使用**Complete Statement**动作（`Ctrl`++ `Shift`）`Enter`。

您还需要检查设置（macOS 上的首选项）| 编辑 | 代码风格 | JavaScript | 标点 | **使用**分号终止语句选项已启用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-10-29T07:15:02.357

您可以制作宏和键盘快捷键：

```
Record Auto semicolon macro and bind shortcut to it:
1\. Edit -> Macros -> Start Macro Recording
2\. In the editor go to the end of line by pressing End
3\. put semicolon ';'
4\. Edit -> Macros -> Stop Macro Recording
5\. Give a name, for example 'Auto semicolon'
6\. Open settings (Ctrl + Alt + s), select Keymap
7\. Expand Macros node
8\. Select 'Auto semicolon', in the context menu choose Add Keyboard Shortcut
9\. Set Ctrl + ; as First keystroke
10\. Save/Apply settings
11\. Enjoy!
12\. Try it out, in the middle of code line, hit Ctrl + ;

// some useful combinations:
Ctrl + ,    put colon at the end of line
Ctrl + ;    put semicolon at the end of line
Ctrl + .    put => at the end of line 
```

来自[https://gist.github.com/umidjons/9383758](https://gist.github.com/umidjons/9383758)

如果有一个选项可以自动执行它会更酷......

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-04-30T10:32:12.103

对于 IntelliJ Idea 2018，请按照以下步骤操作：

*   打开设置：`Ctrl`+ `Alt`+`S`
*   编辑器>代码样式>JavaScript
*   选择选项卡 > 标点符号
*   在下拉列表中，选择“使用/始终使用”分号来终止语句
*   申请并确定

这将在 JS 中添加额外的分号。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-10-24T10:47:28.567

您可以自动让 webstorm 或 phpstorm 为您添加分号。

这是 webstorm 的方法：

首选项 --> 编辑器 --> 代码样式 --> Javascript --> 标点符号

在分号中终止语句，选择 always。

然后，无论何时格式化代码，使用快捷键 OPTION+CMD+L 都会添加分号

您还可以将重新格式化配置为在保存时自动进行。这样分号总是会被添加。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-07-01T20:47:18.843

**我想做的事**

我的目标是在当前行的末尾添加一个分号，*同时将光标位置保持在行的中间。*

例如

```
func([{''}])
//     /\
//     ||
//     ||
//     current cursor position
//
// Now I want to add a semi-colon to the end-of-the-line
// but then continue typing my string contents at the same
// cursor location. i.e. I now want this, with as few
// keystrokes as possible:
//
//          Add this semi-colon...
//          |
//          |
//          V
func([{''}]);
//     /\
//     ||
//     ||
//     ...while maintaining this cursor position 
```

**为什么我想这样做**

WebStorm 在我输入时很好地“完成”了标点符号，即在我输入之后`({['`，它会自动完成到`({[' <<cursor here>> ']})`. 我想确保在输入更多内容之前在行尾包含分号，因为我*以后*可能会忘记。但是，添加分号后，我想在当前光标位置继续输入。我知道我可以使用自动完成在行尾添加一个分号，但这会将光标留在行尾，迫使我多次点击后退箭头。此外，有时我的半完成行还不是正确的 JavaScript 语法，所以自动完成甚至可能不起作用。

**为什么很难**

解决方案似乎很简单：编写一个简单的宏来跳转到行尾，输入一个分号，然后返回到我原来的位置。问题是，很难弄清楚如何哄 WebStorm 回到我原来的位置！我尝试设置书签，转到行尾，输入分号，然后返回我的书签，但这不起作用，因为据我所知，书签只记住行，而不是列。我尝试首先在当前位置（例如`xcursorx`）输入垃圾标记文本，转到行尾，输入分号，然后做一个简单`find`的垃圾标记文本，但这也不起作用，因为 WebStorm 的宏似乎没有很好地在`find`例程中输入文本。我尝试先输入垃圾标记文本，然后转到行尾，`Navigate/Last Edit Location`并删除垃圾，但这也不起作用。

**最终奏效的方法**

我制作了一个宏，如下所示（各个步骤中显示的键盘快捷键是“Mac OS X 10.5+”键盘映射中的快捷键...使用适合您设置的快捷键或菜单选项）：

*   从所需位置的光标/插入符号开始，开始录制宏（即`Edit > Macros > Start Macro Recording`）
*   键入单个非空格/非单词字符，例如句点
*   紧接着，输入一个你不会在其他地方使用的垃圾标记文本“单词”，例如“xcursorx”
*   紧接着，输入另一个非空格/非单词字符，例如另一个句点（即您现在输入了“.xcursorx”）
*   跳到行尾（例如命令右箭头）
*   输入分号
*   在分号之后（即没有空格），再次键入垃圾标记文本的相同单个“单词”，但没有侧面的非空格/非单词字符，例如键入“;xcursorx”
*   将光标向后移动一个“单词”（例如选项左箭头）
*   找到光标处的单词（即`Edit > Find > Find Word at Caret`）（手动输入“xcursorx”时*不要*使用正常）`find`
*   删除选定的文本（即按删除或退格键删除行尾的第二个“xcursorx”）
*   查找上次选择的文本的上一次出现（即`Edit > Find > Find Previous/Move to Previous Occurrence`或 shift-command-G）；这将选择“.xcursorx”中的“xcursorx”。
*   删除选定的文本（即按删除或退格键）
*   前进一个字符（即右箭头，到第二个句号*之后*）
*   删除两个字符（即按两次删除或退格键，删除两个句点）
*   停止宏录制（即`Edit > Macros > Stop Macro Recording`）
*   给你的宏起个名字（例如'place-semicolon-at-end-of-line'）
*   给你的宏一个键盘快捷键（例如`Preferences > (scroll down to) Macros > place-semicolon-at-end-of-line > (right click) > Add Keyboard Shortcut`......并输入你想要的快捷键，例如选项分号）

**一些晦涩步骤的解释**

对于某些用例，并非所有上述步骤都是必需的。例如，不需要添加额外的句点来在顶部的示例中使用`func([{''}])`. 但是，某些边缘情况需要额外的步骤，例如，如果您的光标已经位于行尾。

**如何使用它**

要使用宏，请从正常输入开始（在顶部的示例中，输入`func([{'`导致`func([{''}])`出现），输入快捷方式（例如选项分号），分号将出现在行尾，但您的光标将保持在原来的位置。

**警告**

这个解决方案有点小技巧，因为在插入然后删除垃圾文本时，显示确实会跳动一点。但是，至少它有效。如果有人能弄清楚如何在不需要垃圾标记文本的情况下实现相同的最终目标，那就太好了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-18T12:46:03.353

在我看来，每次都必须按 Ctrl+Shift+Enter 然后回到括号中并不是一个解决方案。

这是一个真正的解决方案：

当您按下“Shift+9”时，您通常希望在语句末尾使用分号，对吗？无需每次都在键盘上敲击其他疯狂的组合。

1.  在编辑器中输入一个函数；
2.  就在您输入“（”之前，转到编辑 > 宏 > 开始宏录制；
3.  输入“();”并按“左”键 2 次，这样你就回到了里面；
4.  转到编辑 > 宏 > 开始宏录制并将其命名（例如自动分号；5 转到首选项 > 外观和行为 > 键盘映射 > 宏并右键单击“自动分号”，选择添加键盘快捷键并按“Shift+9” ;
5.  退出首选项并返回编辑器进行测试！

您可以根据自己的需要制作许多品种。例如，在 '({})' 之间添加大括号，或者如果您更频繁地使用 '()' 而无需在末尾使用分号，则可以将快捷方式更改为 'Ctrl+Shift+9'，通常组合只是添加常规。你的喜好！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-20T10:46:55.083

你可以使用这个[https://github.com/yyx990803/semi](https://github.com/yyx990803/semi)。提供 cli 和 api 以满足您的需求。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-26T19:16:36.230

[您可以使用`eslint`](https://eslint.org/docs/rules/semi)：

将`"semi"`规则设置为`"error"`或`2`

在要添加分号的文件中右键单击，然后`Fix ESLint Problems`在菜单底部附近选择

[![右键菜单](../Images/4cf477eb94133bb84953c0de2d452bed.png)](https://i.stack.imgur.com/NkM2b.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-11T16:49:27.640

是的，如果你离开它没有分号，Webstorm 会将它标记为`unterminated statement`并突出显示它。当您在线（使用光标）作为右括号时，只需键入：

```
Alt + Enter 
```

这将调出灯泡菜单（自动更正或更改内容，我没有更好的名称）。

希望如果您的代码是正确的，或者大括号是该行中唯一的符号，那么您唯一的选择就是`Terminate statement`它会自动聚焦，因此只需按 Webstorm 的 Enter 键添加分号。

这种方式使您免于手动定位光标并自己键入分号，但只需以某种方式在该行上，然后执行 alt+enter+ enter 即可。

是的，它不会自动出现，但它更快更容易。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-12T14:57:24.063

> 通常，webstorm/phpstorm 会这样做，并将光标留在花括号内：

`End`仍然需要手动操作，但我`;`每次都会打。但是`Ctrl`+`Right`也应该起作用，这些键触手可及。

我在每一行之后不断点击`CTRL+S`以保存文档，所以这对我来说只是一个小麻烦..

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-03-21T21:09:41.687

创建一个宏以移动到行尾并插入分号。然后将宏分配给分号按键。因此，在您键入的任何时候，您都可以终止代码行。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-27T07:30:09.193

在最新的`2020.3`你可以在这里找到这个：

[![在此处输入图像描述](../Images/cc835bfd9fef6a99dfa5a96ae0a5a1d1.png)](https://i.stack.imgur.com/IWbOf.png)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-12-21T02:48:07.823

对于 Webstorm 2019.1

1 选择文件/设置...菜单。
2 在设置对话框的左侧栏中选择编辑器/代码样式/JavaScript。

[![在此处输入图像描述](../Images/f144d1fc26adb2d7b4e6e037852458f1.png)](https://i.stack.imgur.com/WLKrv.png)

3 选择标点符号选项卡并确保“分号终止语句”选项为“始终”。

[![在此处输入图像描述](../Images/1a6ca8bc4c5842da851a762f3a93fae4.png)](https://i.stack.imgur.com/NMaiE.png)

4 从菜单中选择代码/重新格式化。

# javascript - 通过 javascript 打开一个弹出窗口

> ID：11805104
> 
> 赞同：0
> 
> 时间：2012-08-04T01:09:56.723
> 
> 标签：javascript, popup

我正在尝试在弹出窗口中打开一个新链接，但它不起作用。

这是我用来打开弹出窗口的片段

```
function load() {
window.open('../../fbConnect.php','','scrollbars=no,menubar=no,height=600,width=800,resizable=yes,toolbar=no,location=no,status=no');
} 
```

然后我调用该函数`load`。

谁能预测我的方法有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T01:14:39.693

您的浏览器会阻止弹出窗口吗？我尝试运行此代码，并且在启用弹出窗口后它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T01:14:32.040

打开谷歌浏览器。按 Control-Shift-I 打开开发者工具。单击控制台选项卡。加载页面。检查控制台中报告的 JavaScript 错误。如果你发现你的错误，你就完成了。

还是一无所获？将 load() 函数的内部替换为

`alert('Hello!');`

如果可行，请检查“window.open”的语法。如果失败，请检查您的调用方式`load()`。

# html - 为什么这个链接在 IE 中不起作用？

> ID：11805110
> 
> 赞同：1
> 
> 时间：2012-08-04T01:11:15.233
> 
> 标签：html, internet-explorer, cross-browser, web-standards

感谢您查看我的问题。

我是网络开发的新手，希望有人能澄清为什么下面的 HTML 在 IE 中无法正确显示，但在 Chrome、Firefox 和 Safari 中有效。目标是创建`divs`带有图像和标题的可点击内容。

在 IE 中的背景和`h2`在`div`是可点击的。我已经将它包裹`<img>`在一个`<a>`标签中，该标签似乎可以正常工作，但感觉就像一个黑客。

HTML：

```
<a href="locations.html">
  <div class="boxSmall">
  <h2>Location</h2>
    <div class ="boxImage">
      <img src="images/ex.jpg" alt="Registered Massage Therapist" height="175px" width="195px"/>
    </div>  
  </div>
</a> 
```

我很感激对此的任何澄清。您可以在此处查看示例[。](http://downtownrmt.com/locations.html)

我环顾四周，发现块项目应该能够包含在 HTML 5 中的链接中。IE 知道吗？我想编写符合标准的代码，但我*真的想*编写有效的代码。

[http://downtownrmt.com/locations.html](http://downtownrmt.com/locations.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:18:57.120

通常将以下内容添加到您的 a 标签中即可：

```
a {
display: block;
position: relative;
} 
```

这告诉 IE 将整体`a`视为一个盒子级别，而不是仅仅将链接应用到其中的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T02:34:28.237

您将您的内容类型声明为 application:xhtml/xml 但这是针对 XML 的，并且您没有将其作为 XML 提供。删除该行。此外，Google 会忽略您的关键字元标记。永远记住，IE 是迄今为止地球上最糟糕的浏览器。

验证您的 html 是否存在其余错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-04T01:19:54.490

我在您的示例中看到以下内容，而不是发布的代码：

```
<a href="services.html">
    <div class="boxSmall">
        <h2>Services</h2>
        <div class="boxImage">
            <a href="services.html"><img src="images/ex.jpg" alt="Registered Massage Therapist" height="175px" width="195px"/></a>
        </div>
    </div>
</a> 
```

正如您已经写的那样，这不是符合 HTMl4 的标准，但（如评论中所述）是有效的 HTML5。即使至少 Firefox 从中创建了非常疯狂的代码。因此，只需使用 FireBug 或检查器查看 DOM。

所以让我们使用：

```
<a href="services.html">
    <span class="boxSmall">
        <span class="h2">Services</span>
        <span class="boxImage">
            <img src="images/ex.jpg" alt="Registered Massage Therapist" height="175px" width="195px"/>
        </span>
    </span>
</a> 
```

您可以使用 CSS 的`display`属性再次获取块：

```
boxImage, boxSmall, h2 {
    display: block;
} 
```

虽然您可能需要设置更多样式，因为我需要删除 h2 ...

PS：这最终甚至应该在 IE 中工作；）

# r - 我怎么不能读取文件中的最后一行？

> ID：11805112
> 
> 赞同：3
> 
> 时间：2012-08-04T01:12:13.227
> 
> 标签：r

这是一个名为 test 的简单文件

```
Symbol|Security Name|Market Category|Test Issue|Financial Status|Round Lot Size
AAC|Australia Acquisition Corp. - Ordinary Shares|S|N|D|100
AACC|Asset Acceptance Capital Corp. - Common Stock|Q|N|N|100
AACOU|Australia Acquisition Corp. - Unit|S|N|N|100
File Creation Time: 0803201218:04||||| 
```

如果我不需要文件中的最后一行，我可以这样做：

```
data = read.table('test',sep='|')
data = data[1:(nrow(data)-1),1:ncol(data)] 
```

在读取文件时，是否有另一种方法可以直接执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T01:21:19.200

`?read.table`显示：

```
nrows   
integer: the maximum number of rows to read in. Negative and other invalid values are ignored. 
```

因此，如果您在读入之前知道行数，则可以使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T01:20:14.803

更紧凑的是：

```
data=data[ -nrow(data), ] 
```

您可能希望将输入命令更改为：

```
data = read.table('test', header = TRUE, sep = '|') 
```

...因为标头的默认值为 FALSE。

# java - 为什么不保留一个新实体？

> ID：11805116
> 
> 赞同：1
> 
> 时间：2012-08-04T01:12:19.920
> 
> 标签：java, jpa, persistence, jpql, toplink

如果发生`NoResultException`我如何实例化和持久化`Newsgroup`实体？

```
package net.bounceme.dur.usenet.driver;

import java.util.logging.Logger;
import javax.mail.Folder;
import javax.mail.Message;
import javax.persistence.*;
import net.bounceme.dur.usenet.model.Article;
import net.bounceme.dur.usenet.model.Newsgroup;

class DatabaseUtils {

    private static final Logger LOG = Logger.getLogger(DatabaseUtils.class.getName());
    private EntityManagerFactory emf = Persistence.createEntityManagerFactory("USENETPU");
    private EntityManager em = emf.createEntityManager();

    public void persistArticle(Message message, Folder folder) {
        //do all the persistence here?
        String fullNewsgroupName = folder.getFullName();
        Newsgroup newsgroup = null;
        TypedQuery<Newsgroup> query = em.createQuery("SELECT n FROM Newsgroup n WHERE n.newsgroup = :newsGroupParam", Newsgroup.class);
        query.setParameter("newsGroupParam", fullNewsgroupName);
        try {
            newsgroup = query.getSingleResult();
            LOG.info("found " + query.getSingleResult()); //ok
        } catch (javax.persistence.NoResultException e) {
            LOG.info(e + "\ncould not find " + fullNewsgroupName); //ok
            newsgroup = new Newsgroup(folder);
            //it seems like the persist statement never executes...
            em.persist(newsgroup);
        } catch (NonUniqueResultException e) {
            LOG.info("\nshould never happen\t" + fullNewsgroupName); //not ok, should never execute
        }
        //need some mechanism to ensure that newsgroup is never a null reference
        Article article = new Article(message, newsgroup);
        em.persist(article); //never seems to execute..
    }

    public void close() {
        em.close();
        emf.close();//necessary?
    }
} 
```

现在，似乎一遍又一遍地找不到查询的结果：

```
run:
DEBUG: nntp: newsrc loading /home/thufir/.newsrc
DEBUG: nntp: newsrc load: 5 groups in 30ms
Aug 03, 2012 6:04:47 PM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: [gwene.com.androidcentral, gwene.com.blogspot.emacsworld, gwene.com.blogspot.googlecode, gwene.com.blogspot.googlereader, gwene.com.economist]
[EL Info]: 2012-08-03 18:04:51.277--ServerSession(28034142)--EclipseLink, version: Eclipse Persistence Services - 2.3.0.v20110604-r9504
[EL Info]: 2012-08-03 18:04:52.417--ServerSession(28034142)--file:/home/thufir/NetBeansProjects/USENET/build/classes/_USENETPU login successful
[EL Warning]: 2012-08-03 18:04:52.557--ServerSession(28034142)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'usenet.ARTICLE' doesn't exist
Error Code: 1146
Call: ALTER TABLE ARTICLE DROP FOREIGN KEY FK_ARTICLE_NEWSGROUP_ID
Query: DataModifyQuery(sql="ALTER TABLE ARTICLE DROP FOREIGN KEY FK_ARTICLE_NEWSGROUP_ID")
[EL Warning]: 2012-08-03 18:04:52.572--ServerSession(28034142)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown table 'ARTICLE'
Error Code: 1051
Call: DROP TABLE ARTICLE
Query: DataModifyQuery(sql="DROP TABLE ARTICLE")
[EL Warning]: 2012-08-03 18:04:52.65--ServerSession(28034142)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown table 'NEWSGROUP'
Error Code: 1051
Call: DROP TABLE NEWSGROUP
Query: DataModifyQuery(sql="DROP TABLE NEWSGROUP")
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.androidcentral
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.androidcentral
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.androidcentral
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.androidcentral
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.androidcentral
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.androidcentral
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.androidcentral
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.androidcentral
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.blogspot.emacsworld
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.blogspot.googlecode
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.blogspot.googlecode
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.blogspot.googlecode
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.blogspot.googlecode
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.blogspot.googlecode
Aug 03, 2012 6:04:54 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.blogspot.googlecode
Aug 03, 2012 6:04:55 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
[EL Info]: 2012-08-03 18:04:55.344--ServerSession(28034142)--file:/home/thufir/NetBeansProjects/USENET/build/classes/_USENETPU logout successful
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.blogspot.googlecode
Aug 03, 2012 6:04:55 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.blogspot.googlecode
Aug 03, 2012 6:04:55 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.economist
Aug 03, 2012 6:04:55 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.economist
Aug 03, 2012 6:04:55 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.economist
Aug 03, 2012 6:04:55 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.economist
Aug 03, 2012 6:04:55 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.economist
Aug 03, 2012 6:04:55 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.economist
Aug 03, 2012 6:04:55 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.economist
Aug 03, 2012 6:04:55 PM net.bounceme.dur.usenet.driver.DatabaseUtils persistArticle
INFO: javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
could not find gwene.com.economist
Aug 03, 2012 6:04:55 PM net.bounceme.dur.usenet.driver.FetchBean <init>
INFO: **************************done
BUILD SUCCESSFUL (total time: 11 seconds) 
```

当不存在唯一性时，如何确保将`Newsgroup`新实体持久化到数据库中？如果不是结果，那至少是代码的意图。

新闻组：

```
package net.bounceme.dur.usenet.model;

import java.io.Serializable;
import java.util.HashSet;
import java.util.Set;
import java.util.logging.Logger;
import javax.mail.Folder;
import javax.persistence.*;

@Entity
public class Newsgroup implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final Logger LOG = Logger.getLogger(Newsgroup.class.getName());
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    @Column //@Unique @UniqueConstraint interface..?
    private String newsgroup;
    @OneToMany(mappedBy = "newsgroup", cascade = CascadeType.PERSIST)
    private Set<Article> articles = new HashSet<>();

    public Newsgroup() {
        //should not create a newsgroup without a Folder
    }

    public Newsgroup(Folder folder) {
        newsgroup = folder.getFullName();//if row already exists, then what?
        LOG.fine(newsgroup);    
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Newsgroup)) {
            return false;
        }
        Newsgroup other = (Newsgroup) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return newsgroup;
    }
} 
```

和文章：

```
package net.bounceme.dur.usenet.model;

import java.io.Serializable;
import java.util.logging.Logger;
import javax.mail.Message;
import javax.persistence.*;

@Entity
public class Article implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final Logger LOG = Logger.getLogger(Article.class.getName());
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    @Column
    private int messageNumber;
    @ManyToOne(cascade = CascadeType.PERSIST)
    private Newsgroup newsgroup;

    public Article() {
    }

    public Article(Message message, Newsgroup newsgroup) {
        messageNumber = message.getMessageNumber();
        this.newsgroup = newsgroup;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Article)) {
            return false;
        }
        Article other = (Article) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "\nmessageNumber\t" + messageNumber;
    }

    public int getMessageNumber() {
        return messageNumber;
    }

    public void setMessageNumber(int messageNumber) {
        this.messageNumber = messageNumber;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T03:35:46.653

引用“Pro JPA 2”中的 Keith & Schincariol 的话：

> 如果事务不存在，那么修改操作将引发异常，或者更改将永远不会持久保存到数据存储中。

确保您希望与 的交互保持`EntityManager em`在事务的上下文中：

```
public void persistArticle(Message message, Folder folder) {
    em.getTransaction().begin();
    try {
        // your code goes here; possibly current body of persistArticle(..)

        em.getTransaction().commit();
    } catch (final RuntimeException e) {
        if (em.getTransaction().isActive()) {
            em.getTransaction().rollback();
        }

        throw e;
    }
} 
```

* * *

您会很快发现这是常见的样板代码。考虑使用[装饰器](http://en.wikipedia.org/wiki/Decorator_pattern)：

*   创建一个接口，定义由`DatabaseUtils`.
*   让我们`DatabaseUtils`实现那个接口。
*   创建一个`DataUtilsServices`（装饰器）实现接口。它的实现将包含管理事务的代码，其中工作代码（“您的代码在此处”）成为对`DatabaseUtils`.

现在，使用装饰器将“worker”与“事务服务”分开将使您能够轻松地进入 Java EE、Spring 或其他为您管理事务的容器框架，将来。例如，`DatabaseUtilsServices`包含所有样板的内容很可能成为 EJB 装饰器的一部分：

```
@Override
@TransactionAttribute(TransactionAttributeType.REQUIRED)
public void persistArticle(Message message, Folder folder) {
    return databaseUtils.persistArticle(message, folder);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T07:17:23.817

因为 JPA 没有“自动提交”模式（即没有事务）。事务之外的操作应该延迟到下一个事务发生（而你的没有）。

显然，一些 JPA 实现（例如[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_1)）提供了完整的自动提交功能，因为他们认为这是一种非常有用的工具，可以简化用户的工作......所以也许你只是在使用其中一个没有'不允许这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T01:57:50.997

也许在实例化新文章的行之前插入以下行就足够了：

```
if (newsgroup==null) {
    newsgroup = new NewsGroup();
} 
```

此外，如果从文章到新闻组的关系没有将其 Cascade 属性设置为 PERSIST，您可能必须手动持久化（）该新新闻组。

# c# - 为什么在 timer2 滴答事件中调用这两个函数时应用程序运行如此缓慢？

> ID：11805118
> 
> 赞同：2
> 
> 时间：2012-08-04T01:13:01.063
> 
> 标签：c#

我想问题是有太多的 foreach 循环。但我需要他们来获取sensor.Value

这是两个函数：

```
private void cpuView()
        {

                Computer myComputer = new Computer();
                myComputer = new Computer(settings) { CPUEnabled = true };

                myComputer.Open();
                Trace.WriteLine("");
                foreach (var hardwareItem in myComputer.Hardware)
                {
                    if (hardwareItem.HardwareType == HardwareType.CPU)
                    {
                        hardwareItem.Update();
                        foreach (IHardware subHardware in hardwareItem.SubHardware)
                            subHardware.Update();

                        foreach (var sensor in hardwareItem.Sensors)
                        {
                            settings.SetValue("sensor", sensor.Value.ToString());
                            if (sensor.SensorType == SensorType.Temperature)
                            {
                                sensor.Hardware.Update();
                                settings.GetValue("sensor", sensor.Value.ToString());
                                temperature_label.Text = sensor.Value.ToString() + "c";//String.Format("{0} Temperature = {1}c", sensor.Name, sensor.Value.HasValue ? sensor.Value.Value.ToString() : "no value");
                            }
                        }
                    }
                }
        } 
```

第二个功能：

```
private void gpuView()
        {

                Computer computer = new Computer();
                computer.Open();
                computer.GPUEnabled = true;

                foreach (var hardwareItem in computer.Hardware)
                {
                    if (videoCardType("ati", "nvidia") == true)
                    {
                        HardwareType htype = HardwareType.GpuNvidia;

                        if (hardwareItem.HardwareType == htype)
                        {

                            foreach (var sensor in hardwareItem.Sensors)
                            {

                                if (sensor.SensorType == SensorType.Temperature)
                                {

                                    sensor.Hardware.Update();
                                    if (sensor.Value.ToString().Length > 0)
                                    {
                                        if (newGPULabel.Text.Length < 1)
                                        {
                                            if (UpdatingLabel(sensor.Value.ToString(), string.Empty))
                                            {
                                                label8.Text = newGPULabel.Text;
                                            }
                                        }
                                        else if (UpdatingLabel(sensor.Value.ToString(), newGPULabel.Text.Substring(0, newGPULabel.Text.Length - 1)))
                                        {
                                            label8.Text = newGPULabel.Text;
                                        }
                                        newGPULabel.Text = sensor.Value.ToString() + "c";
                                        label8.Visible = true;
                                    }

                                    int t = newGPULabel.Text.Length;
                                    if (t >= 4)
                                    {
                                        newGPULabel.Location = new Point(210, 100);

                                    }
                                    else
                                    {
                                        newGPULabel.Location = new Point(250, 100);
                                    }
                                    timer2.Interval = 1000;
                                    if (sensor.Value > 90)
                                    {
                                        Logger.Write("The current temperature is ===> " + sensor.Value);
                                        button1.Enabled = true;
                                    }
                                    this.Select();
                                }
                            }
                        }
                    }
                    else
                    {
                        HardwareType htype = HardwareType.GpuAti;

                        if (hardwareItem.HardwareType == htype)
                        {

                            foreach (var sensor in hardwareItem.Sensors)
                            {

                                if (sensor.SensorType == SensorType.Temperature)
                                {

                                    sensor.Hardware.Update();
                                    if (sensor.Value.ToString().Length > 0)
                                    {
                                        if (newGPULabel.Text.Length < 1)
                                        {
                                            if (UpdatingLabel(sensor.Value.ToString(), string.Empty))
                                            {
                                                label8.Text = newGPULabel.Text;
                                            }
                                        }
                                        else if (UpdatingLabel(sensor.Value.ToString(), newGPULabel.Text.Substring(0, newGPULabel.Text.Length - 1)))
                                        {
                                            label8.Text = newGPULabel.Text;
                                        }
                                        newGPULabel.Text = sensor.Value.ToString() + "c";
                                        label8.Visible = true;
                                    }

                                    int t = newGPULabel.Text.Length;
                                    if (t >= 4)
                                    {
                                        newGPULabel.Location = new Point(210, 100);

                                    }
                                    else
                                    {
                                        newGPULabel.Location = new Point(250, 100);
                                    }
                                    timer2.Interval = 1000;
                                    if (sensor.Value > 90)
                                    {
                                        Logger.Write("The current temperature is ===> " + sensor.Value);
                                        button1.Enabled = true;
                                    }
                                    this.Select();
                                }
                            }
                        }
                    } 
            }
        } 
```

在 timer2 滴答事件中：

```
private void timer2_Tick(object sender, EventArgs e)
        {

            gpuView();
            cpuView();

        } 
```

如果我不在滴答事件中调用此函数，则程序运行平稳，但即使我只调用其中一个函数，它也会每 n 秒卡住一次。

timer2 设置为间隔 100，因为我更新了 cpu 和 gpu 温度，我想快速更新它们。我不确定问题是函数中的 foreach 循环过多还是间隔为 100，因此它试图从传感器中获取值的速度太快，因此硬件无法快速获取信息。

也许有一种方法可以删除一些 foreach 循环？我不想将我所有的 Form1 代码上传到这里。但是所有的snesor和硬件都连接到OpenHardwareMonitorApplication的OpenHardwareMonitor.dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T01:18:18.130

如果您希望应用程序再次顺利运行，可以使用 Application.DoEvents(); void，ehich 使应用程序为高要求的代码做好准备。

示例，在您的滴答事件中：

```
private void timer2_Tick(object sender, EventArgs e)
        {
            Application.DoEvents();
            gpuView();
            cpuView();

        } 
```

或者你可以调用 GpuView 和 CpuViews 作为线程，使用 System.threading 命名空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T01:27:35.923

您可以使用后台工作程序，它允许您以简单的方式进行多线程处理。它将对您的情况很有用，并以异步方式调用 doWork 方法。在此方法中，循环调用您的两个函数。这里 msdn 解释[http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx) 它比你设置一个随机间隔值的计时器更好，因为你必须让你的功能完成因此，如果必须发生事件，则不会....

# angularjs - 我可以将 angular.js 与对象而不是函数一起使用吗？

> ID：11805120
> 
> 赞同：1
> 
> 时间：2012-08-04T01:13:24.423
> 
> 标签：angularjs

这是我的情况：我已经创建的应用程序中有一个 Javascript 对象，看起来有点像这样......

```
var foo = foo || {};
foo.name = "";
foo.gender = "";

foo.loadUser = function() {
    // Some other stuff here
    foo.name = "Joe";
    foo.gender = "Fella";

    $("#welcome).text("Hello " + foo.name + " you sure are a swell " + foo.gender + "!");    
} 
```

现在，我决定我不喜欢逻辑和表示的混合，所以我想删除 jquery 的那一行，并让 angular.js 用一些简单的数据绑定为我更新文本。所以我已经加载了 angular.js 并添加了这条小线..

```
<div ng-app>
<div id="welcome" ng-controller="foo">Hello {{foo.name}}! 
     You sure are a swell {{foo.gender}}!</div> 
```

问题是，在执行此操作时，我得到一个错误...

> 错误：参数 'foo' 不是函数，得到了对象

查看 angular.js Getting Started 示例，看起来我可能需要返回并以如下格式重写我的整个 foo 对象（以及我的所有其他代码）...

```
function foo($scope) {
  $scope.name = '';
  $scope.gender = '';

  $scope.loadUser = function() {
    //Other stuff here
    $scope.name = "Joe";
    $scope.gender = "Fella"            
  }

} 
```

...这可能有效（我还没有尝试过），但我不确定我是否要重写我的所有代码以适应这种新格式。我有比 foo 更多的对象，而在现实生活中 foo 有更多的东西。（见鬼，我什至不叫它“foo”！）

有什么方法可以让数据绑定工作而无需将所有对象都重写为函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T06:26:17.363

不确定这是否是您要查找的内容，但您仍然应该能够使用 foo 对象，因为它们位于 Angular 控制器中，如下所示：

```
function Controller($scope){
    $scope.foo = foo;
    foo.loadUser();
} 
```

有关示例，请参[见此小提琴。](http://jsfiddle.net/aRXM5/)您可能还想将您的对象移动到[本文第 2 课中所述的](http://onehungrymind.com/angularjs-sticky-notes-pt-1-architecture/)[服务](http://docs.angularjs.org/guide/dev_guide.services.creating_services)或工厂中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:56:23.037

这可能看起来很明显，但你有没有尝试过`ng-controller="foo.loadUser"`

标记

```
<div id="welcome" ng-controller="foo.loadUser">Hello {{foo.name}}! 
     You sure are a swell {{foo.gender}}!</div> 
```

有角度的

```
foo.loadUser = function($scope) {
    // Some other stuff here
    foo.name = "Joe";
    foo.gender = "Fella";

    $scope.foo = foo;
} 
```

只要该函数作为 $scope 接收并对该值执行所有 angularjs 魔术，您就不必更改现有对象。

# eclipse - eclipse中main()的返回值

> ID：11805121
> 
> 赞同：5
> 
> 时间：2012-08-04T01:13:31.293
> 
> 标签：eclipse, eclipse-cdt

如何在 Eclipse 中检查 main 函数的返回值？我搜索了 SO，用谷歌搜索它，还搜索了[CDT 常见问题解答](http://wiki.eclipse.org/CDT/User/FAQ)，但我找不到任何关于此的内容。我现在正在使用 CDT。

# android - 模拟器在操作栏中不显示工具提示提示

> ID：11805124
> 
> 赞同：0
> 
> 时间：2012-08-04T01:14:04.460
> 
> 标签：android

模拟器 Google Android 版本 3.0 级别 11 不会在操作栏中显示工具提示。它应该根据 Android 开发人员的网站：“如果操作项仅显示图标，则用户可以长按该项目以显示显示操作项标题的工具提示。” 相同的代码，相同的 xml 确实适用于 Android 版本 4.03 API 级别 15。我可能在我的 Android 3.0 模拟器中按下了一些设置来关闭工具提示吗？提前致谢。这是我正在使用的代码。

```
 @Override
    public void onCreateOptionsMenu (Menu menu, MenuInflater menuInflater) {
        menuInflater.inflate(R.menu.flashcard_q_menu, menu);
        optionsMenu = menu;         
    } 
```

下面是 flashcard_q_menu.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<group android:id="@+id/q_menu_group">
    <item android:id="@+id/fl_edit_card"
        android:title="Edit Card"
        android:titleCondensed="Edit"
        android:icon="@drawable/ic_menu_edit_card"
        android:showAsAction="ifRoom" />

    <item android:id="@+id/fl_delete_card"
        android:title="Delete Card"
        android:icon="@drawable/ic_menu_delete_card"
        android:showAsAction="ifRoom" />

    <item android:id="@+id/fl_add_card"
        android:title="Add Card"
        android:titleCondensed="Add"
        android:icon="@drawable/ic_menu_add_card"
        android:showAsAction="ifRoom" />

    <item android:id="@+id/flq_prev_question"
        android:title="Previous Question"
        android:titleCondensed="Prev Q"
        android:icon="@drawable/ic_menu_previous_question"/>  

    <item android:id="@+id/fl_next_question"
        android:title="Next Question"
        android:titleCondensed="Next Q"
        android:icon="@drawable/ic_menu_next_question"
        android:showAsAction="always" 
        android:orderInCategory="1"/>

    <item android:id="@+id/flq_answer"
        android:title="Answer"
        android:titleCondensed="Ans"
        android:icon="@drawable/star_big_on"
        android:showAsAction="always" 
        android:orderInCategory="2"/>

    <item android:id="@+id/fl_up_difficulty"
        android:title="Decrease Difficulty"
        android:titleCondensed="Decr Diff"
        android:icon="@drawable/sym_action_add"
        android:showAsAction="always" 
        android:orderInCategory="3"/>

    <item android:id="@+id/fl_down_difficulty"
        android:title="Increase Difficulty"
        android:titleCondensed="Incr Diff"
        android:icon="@drawable/ic_menu_minus"
        android:showAsAction="always"
        android:orderInCategory="4" />

    <item android:id="@+id/fl_shuffle"
        android:title="Shuffle"
        android:icon="@drawable/ic_menu_shuffle"
        android:showAsAction="ifRoom" />

    <item android:id="@+id/fl_preferences"
        android:title="Preferences"
        android:titleCondensed="Pref"
        android:icon="@drawable/ic_preferences"
        android:showAsAction="ifRoom" />
</group>
</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:33:47.390

*根据对 OP 的评论*：

最好检查这是否适用于 API 12；绝大多数运行 Honeycomb 的单元都在 3.1 或 3.2 上（分别是 API 12 和 13）。此信息来自[Android 仪表板](http://developer.android.com/about/dashboards/index.html)。（*还要注意，只有 2.3% 的设备在 Honeycomb 上，所以开发 API 7、8、10 和 15+ 应该是优先事项。*）

此外，正如作者所指出的，工具提示仅适用于 API 14+；这可以解释为什么 Honeycomb 没有显示它们。

# java - 为什么 listFiles() 不保证顺序？

> ID：11805128
> 
> 赞同：4
> 
> 时间：2012-08-04T01:14:52.113
> 
> 标签：java, file

[这](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#listFiles%28%29)似乎是一件奇怪的事情。

> 无法保证结果数组中的名称字符串会以任何特定顺序出现；特别是，它们不能保证按字母顺序出现。

为什么不能保证订单？例如，当一个人`ls`可能是一个合理的默认值时，一个人会得到什么。

这是出于（性能？）原因而决定的，还是那里有更深层次的真相？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T01:25:39.747

据我所知，文件没有自然的顺序。如果您说字母，那么使用哪个区域设置/整理顺序？java运行的所有操作系统是否都支持该命令？如果不是，那么 API 将需要使用从操作系统接收到的任何内容。由于您很可能 API 客户端 1) 可能不关心或 2) 会想要不同的东西，所以只交付没有保证顺序的文件而不是进行浪费的排序更有意义。如果你在乎，你可以做排序。

# javascript - Socket.io 如何发送 JavaScript 对象

> ID：11805130
> 
> 赞同：39
> 
> 时间：2012-08-04T01:14:53.833
> 
> 标签：javascript, json, node.js, socket.io

如何将 JavaScript 对象`Socket.io`从服务器发送到客户端？我使用 Socket.io 作为 WebSocket（发送`.send()`和监听`message`事件）。当我试图在服务器端做类似的事情时：

```
var myObject = {
    message: 'Hello World!'
}

socket.send(myObject); 
```

在客户端我只得到这个字符串：`[object Object]`

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-08-04T01:20:14.037

您实际上需要发出一个事件：

```
 socket.emit('yourEvent', myObject); 
```

如果您使用`.send()`，您只是发送对象的字符串表示，这就是问题发生的地方。请注意，您可以使用`.send()`，但您必须先对对象进行 JSON 编码，然后在接收时对其进行解码。

除非您有特定的原因，否则最好使用标准的 Socket.IO`.emit()`方法，因为它会为您完成所有这些工作。这就是它的用途。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-18T10:16:49.167

我刚刚使用一些较旧的示例遇到了这个问题。这是我找到的答案：[Migrating 0.6 to 0.7+](https://github.com/LearnBoost/Socket.IO/wiki/Migrating-0.6-to-0.7+#sending-data-to-client)，我在下面重现。

* * *

在 v0.6 中，`socket.send`会自动将对象转换`{a: 'b'}`为 JSON。您可以通过以下方式向客户端发送数据：

```
socket.send({a: 'b'}); 
```

虽然这很酷，但它提出了一个基本问题。JSON 不仅编码对象，还编码字符串、数字等！因此，如果您明确声明要传递 JSON，API 会更加清晰（因为编码/解码 JSON 会降低性能）。

在 v0.7 中，使用`json`标志：

```
socket.json.send({a: 'b'}); 
```

现在您还可以在浏览器和服务器之间发出和接收自定义事件：

```
socket.emit('my_event', {a: 'b'}); 
```

事件的参数会自动为您编码为 JSON。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-16T03:32:39.223

`socket.send()`不理解对象，但它喜欢 JSON。你可以这样使用：

```
socket.send(JSON.stringify(myObject)); 
```

并用于`JSON.parse(json)`将 JSON 解析为 Object。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-25T17:17:47.727

尝试在您的服务器端使用它

`socket.json.send({ your : 'data' });`

以及`JSON.parse()`您客户端的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-06T03:13:43.227

在 socket.io V4.x 中，不需要使用`JSON.stringify()`：

> 无需在对象上运行 JSON.stringify()，因为它会为您完成。

例如

```
// BAD
socket.emit("hello", JSON.stringify({ name: "John" }));

// GOOD
socket.emit("hello", { name: "John" }); 
```

有关此[链接](https://socket.io/docs/v4/emitting-events/#Basic-emit)的更多信息。

# android - 从多个布局 xml 中提取图像时，使用 imageView 作为 onClick 应用程序崩溃

> ID：11805131
> 
> 赞同：-1
> 
> 时间：2012-08-04T01:15:58.570
> 
> 标签：android, android-imageview, android-orientation

我是 android 开发的新手（我是 ac#asp.net 家伙）正在尝试编写一个与 api10 及更高版本兼容的应用程序，并且我在 if then else 语句中使用不同的 xml 处理屏幕方向。我在每个 xml 中有 6 个 imageView 控件（名为 imageView1 - imageView6），它们是 onClick 事件（我不喜欢 imagebutton 在图像上放置填充的方式）。这样做的原因是我必须根据方向更改图像大小，因此总共有 12 张图像（如果包括高亮图像，则为 24 张）。

如果我将两个 xmls imageViews 作为 imageView1 留给 imageView6，应用程序不会崩溃，*但是*，我无法独立处理 12 个图像中的每一个。我只和他们中的 6 个一起工作。当我将 xml 的 imageView 更改为 imageView7 到 imageView12 时，应用程序完全崩溃，我不知道为什么？这似乎是我忽略了一些非常简单的东西，但我不知道它是什么。这是我的代码：

```
package com.firstmelissa.FirstBaptistMelissa;

import android.app.Activity;
import android.content.res.Configuration;
import android.os.Bundle;
import android.view.Display;
import android.view.Menu;
import android.view.View;
import android.widget.ImageView;
import android.widget.Toast;

public class MainActivity extends Activity implements View.OnClickListener {

ImageView display1
ImageView display2;
ImageView display3;
ImageView display4;
ImageView display5;
ImageView display6;
ImageView display7;
ImageView display8;
ImageView display9;
ImageView display10;
ImageView display11;
ImageView display12;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main_layout, menu);
        return true;
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
      super.onConfigurationChanged(newConfig);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Display getOrient = getWindowManager().getDefaultDisplay();
        if (getOrient != null)
        {
            int orientation = getResources().getConfiguration().orientation;   
            if (orientation == 1) {
                // Portrait
                setContentView(R.layout.main_layout);

            display1 = (ImageView) findViewById(R.id.imageView1);
            ImageView image1 = (ImageView) findViewById(R.id.imageView1);
            display2 = (ImageView) findViewById(R.id.imageView2);
            ImageView image2 = (ImageView) findViewById(R.id.imageView2);
            display3 = (ImageView) findViewById(R.id.imageView3);
            ImageView image3 = (ImageView) findViewById(R.id.imageView3);
            display4 = (ImageView) findViewById(R.id.imageView4);
            ImageView image4 = (ImageView) findViewById(R.id.imageView4);
            display5 = (ImageView) findViewById(R.id.imageView5);
            ImageView image5 = (ImageView) findViewById(R.id.imageView5);
            display6 = (ImageView) findViewById(R.id.imageView6);
            ImageView image6 = (ImageView) findViewById(R.id.imageView6);

            image1.setOnClickListener(this);
            image2.setOnClickListener(this);
            image3.setOnClickListener(this);
            image4.setOnClickListener(this);
            image5.setOnClickListener(this);
            image6.setOnClickListener(this);

        }
        else if (orientation == 2) {
            // Landscape
            setContentView(R.layout.main_landscape);
            //Intent intent = new Intent(this, MainActivityland.class);
            //this.startActivity(intent);

            display7 = (ImageView) findViewById(R.id.imageView7);
            ImageView image7 = (ImageView) findViewById(R.id.imageView7);
            display8 = (ImageView) findViewById(R.id.imageView8);
            ImageView image8 = (ImageView) findViewById(R.id.imageView8);
            display9 = (ImageView) findViewById(R.id.imageView9);
            ImageView image9 = (ImageView) findViewById(R.id.imageView9);
            display10 = (ImageView) findViewById(R.id.imageView10);
            ImageView image10 = (ImageView) findViewById(R.id.imageView10);
            display11 = (ImageView) findViewById(R.id.imageView11);
            ImageView image11 = (ImageView) findViewById(R.id.imageView11);
            display12 = (ImageView) findViewById(R.id.imageView12);
            ImageView image12 = (ImageView) findViewById(R.id.imageView12);

            image7.setOnClickListener(this);
            image8.setOnClickListener(this);
            image9.setOnClickListener(this);
            image10.setOnClickListener(this);
            image11.setOnClickListener(this);
            image12.setOnClickListener(this);
            }
}  
    }

public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()){
        case R.id.imageView1:
        Toast.makeText(MainActivity.this, "This is Short Notification",
        Toast.LENGTH_SHORT).show();
        display1.setImageResource(R.drawable.ignitebuttonh);
        display2.setImageResource(R.drawable.strivebutton);
        display3.setImageResource(R.drawable.adultsbutton);
        display4.setImageResource(R.drawable.marriedsbutton);
        display5.setImageResource(R.drawable.womansbutton);
        display6.setImageResource(R.drawable.sermonbutton);
        break;
    case R.id.imageView2:
        display2.setImageResource(R.drawable.strivebuttonh);
        display1.setImageResource(R.drawable.ignitebutton);
        display3.setImageResource(R.drawable.adultsbutton);
        display4.setImageResource(R.drawable.marriedsbutton);
        display5.setImageResource(R.drawable.womansbutton);
        display6.setImageResource(R.drawable.sermonbutton);
        break;
    case R.id.imageView3:
        display3.setImageResource(R.drawable.adultsbuttonh);
        display2.setImageResource(R.drawable.strivebutton);
        display1.setImageResource(R.drawable.ignitebutton);
        display4.setImageResource(R.drawable.marriedsbutton);
        display5.setImageResource(R.drawable.womansbutton);
        display6.setImageResource(R.drawable.sermonbutton);
        break;
    case R.id.imageView4:
        display4.setImageResource(R.drawable.marriedsbuttonh);
        display3.setImageResource(R.drawable.adultsbutton);
        display2.setImageResource(R.drawable.strivebutton);
        display1.setImageResource(R.drawable.ignitebutton);
        display5.setImageResource(R.drawable.womansbutton);
        display6.setImageResource(R.drawable.sermonbutton);
        break;
    case R.id.imageView5:
        display5.setImageResource(R.drawable.womansbuttonh);
        display4.setImageResource(R.drawable.marriedsbutton);
        display3.setImageResource(R.drawable.adultsbutton);
        display2.setImageResource(R.drawable.strivebutton);
        display1.setImageResource(R.drawable.ignitebutton);
        display6.setImageResource(R.drawable.sermonbutton);
        break;
    case R.id.imageView6:
        display6.setImageResource(R.drawable.sermonbuttonh);
        display5.setImageResource(R.drawable.womansbutton);
        display4.setImageResource(R.drawable.marriedsbutton);
        display3.setImageResource(R.drawable.adultsbutton);
        display2.setImageResource(R.drawable.strivebutton);
        display1.setImageResource(R.drawable.ignitebutton);
    case R.id.imageView7:
        Toast.makeText(MainActivity.this, "This is Short Notification",
        Toast.LENGTH_SHORT).show();
        display7.setImageResource(R.drawable.ignitebuttonh);
        display8.setImageResource(R.drawable.strivebutton);
        display9.setImageResource(R.drawable.adultsbutton);
        display10.setImageResource(R.drawable.marriedsbutton);
        display11.setImageResource(R.drawable.womansbutton);
        display12.setImageResource(R.drawable.sermonbutton);
        break;
    case R.id.imageView8:
        display8.setImageResource(R.drawable.strivebuttonh);
        display7.setImageResource(R.drawable.ignitebutton);
        display9.setImageResource(R.drawable.adultsbutton);
        display10.setImageResource(R.drawable.marriedsbutton);
        display11.setImageResource(R.drawable.womansbutton);
        display12.setImageResource(R.drawable.sermonbutton);
        break;
    case R.id.imageView9:
        display9.setImageResource(R.drawable.adultsbuttonh);
        display8.setImageResource(R.drawable.strivebutton);
        display7.setImageResource(R.drawable.ignitebutton);
        display10.setImageResource(R.drawable.marriedsbutton);
        display11.setImageResource(R.drawable.womansbutton);
        display12.setImageResource(R.drawable.sermonbutton);
        break;
    case R.id.imageView10:
        display10.setImageResource(R.drawable.marriedsbuttonh);
        display9.setImageResource(R.drawable.adultsbutton);
        display8.setImageResource(R.drawable.strivebutton);
        display7.setImageResource(R.drawable.ignitebutton);
        display11.setImageResource(R.drawable.womansbutton);
        display12.setImageResource(R.drawable.sermonbutton);
        break;
    case R.id.imageView11:
        display11.setImageResource(R.drawable.womansbuttonh);
        display10.setImageResource(R.drawable.marriedsbutton);
        display9.setImageResource(R.drawable.adultsbutton);
        display8.setImageResource(R.drawable.strivebutton);
        display7.setImageResource(R.drawable.ignitebutton);
        display12.setImageResource(R.drawable.sermonbutton);
        break;
    case R.id.imageView12:
        display12.setImageResource(R.drawable.sermonbuttonh);
        display11.setImageResource(R.drawable.womansbutton);
        display10.setImageResource(R.drawable.marriedsbutton);
        display9.setImageResource(R.drawable.adultsbutton);
        display8.setImageResource(R.drawable.strivebutton);
        display7.setImageResource(R.drawable.ignitebutton);
        break;
    }       
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:49:22.923

我*知道*这很简单！`case R.id.imageView6:`这是and之间缺少的 break 语句`case R.id.imageView7:`！这完全解决了我的问题，感谢您帮助定位它！

# php - 如何使用 PHP4 解析 HTML

> ID：11805132
> 
> 赞同：1
> 
> 时间：2012-08-04T01:16:09.563
> 
> 标签：php, parsing

我在只有 PHP4 的服务器上写一个站点。我正在尝试解析我学校的网站以获取课程会议时间和地点（[本网站](http://www.brandeis.edu/registrar/schedule/classes/2012/Fall/100/UGRD)）。不，我无法让管理员安装 PHP5。这是我返回错误的代码：

```
// Create DOM from URL or file
$html = file_get_html('http://www.google.com/');

// Find all images 
foreach($html->find('img') as $element) 
   echo $element->src . '<br>'; 
```

javascript 是此类任务的一个选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:20:44.543

可以用 jQuery 来完成：

1.用PHP获取页面内容 2.打印出来`div`

```
<?php
echo "<div id='imgSrc'><ul></ul></div>";
echo "<div id='scrapperContent' style='display:none'>";
echo file_get_contents($url);
echo "</div>";
?> 
```

现在在 php 代码上方添加下一个代码：

```
<script>
$(document).ready(function() {
   $("img").each(function (i) {
        $('#imgSrc ul').append("<li>" + $(this).attr("src") + "</li>");
      });
});
</script> 
```

如您所见，它有效：http: [//jsfiddle.net/Sv33T/](http://jsfiddle.net/Sv33T/)

但是，我刚刚注意到`<img>`在你们学校的网站上根本没有使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:30:02.247

看起来您正在使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)中的语法，该语法仅支持 PHP 5+。

据该网站称，该软件包的灵感来自 Jose Solorzano 的[HTML Parser for PHP 4](http://php-html.sourceforge.net/)。因此，检查一下可能会对您有所帮助。

# objective-c - 修改复制的 NSMutableDictionary 也会修改原始的

> ID：11805133
> 
> 赞同：1
> 
> 时间：2012-08-04T01:16:14.817
> 
> 标签：objective-c, ios

我有一个`NSMutableDictionary`被调用`source`的，然后我以这种方式创建另一个：

```
NSMutableDictionary *new = [source copy]; 
```

但是当我修改`new`'s 值之一时， 's 的值`source`也会被修改。这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T01:29:35.830

问题是 iOS（和 OSX）使用浅拷贝。这意味着新集合中的对象与原始集合中的对象相同。正如@danDedo 在他的回答中所说，您的副本是不可变的 - 它是一个字典而不是可变字典（因此您无法添加或删除对象）。但是对象是一样的。因此，如果这些对象本身是可变的，那么一处的更改将影响所有引用（即副本中的所有对象）。

解决这个问题的方法是编写自己的“深拷贝”（如果需要的话）——您肯定可以在此处找到搜索“深拷贝”的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T01:31:47.947

您创建了集合的副本，但集合包含指向对象的指针。因此，新副本也只保存指向对象的指针（称为浅拷贝）。

打印出两个字典，你可以看到它们都持有相同的指针。

此外，您的“副本”不是 MutableArray ...您需要为此使用 mutableCopy。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T01:18:39.093

您正在将消息副本发送给接收者，您不应该发送 mutableCopy 来创建可变字典吗？我很惊讶当你试图改变这个对象时没有抛出异常。

# javascript - 我可以滚动浏览带有“height = auto;”的元素吗？

> ID：11805134
> 
> 赞同：0
> 
> 时间：2012-08-04T01:16:21.783
> 
> 标签：javascript, jquery, html, css

我知道这个问题令人困惑，但让我解释一下我想要实现的目标。

假设我有以下 css 和 html。

```
<style>  
   body{ height: 10000px;}  
   #revolve{ border: 1px solid red; width: auto; height: auto;}  
</style>

<body>  
  <div id="revolve">  
    <ul>  
      <li> one </li>  
      <li> two </li>  
      <li> three </li>  
    </ul>
  </div>
</body> 
```

因为正文设置为一万像素，所以在正常使用滚轮时，整个页面将正常向下滚动。

我希望能够更改 <ul> 元素的位置，以便当鼠标光标位于“revolve”div 元素上时，使用滚轮交换元素的位置，而不是滚动 10000px 页面。我还需要我的所有 <li> 元素始终可见，并且 div 能够在需要时容纳任何其他 <li> 元素。

（最终我想要的结果将是 < li> 元素的以下顺序）

```
<li>  two </li>  
<li>  three </li>  
<li>  one  </li> 
```

现在将 div 元素设置为某个高度和“溢出：滚动；” 不会给我想要的结果。我想到了一个漫长而复杂的方法来做到这一点，但也许有经验丰富的人可以向我展示一种很好而优雅的方式来实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:22:23.457

您可以尝试`position: fixed; top: 20px; left: 20px;`在#revolve 中，以始终保持在页面上让我向您展示如下示例，

```
<style>  
   body{ height: 10000px;}  
   #revolve{ position: fixed; top: 20px; left: 20px; border: 1px solid red; width: auto; height: auto;}  
</style>

<body>  
  <div id="revolve">  
    <ul>  
      <li> one </li>  
      <li> two </li>  
      <li> three </li>  
    </ul>
  </div>
</body> 
```

你可以使用jQuery函数来改变位置`<li>`如下

您可以使用 jQuery 的 .after() 来移动元素。我克隆了其中一个，因此原件可以保留为占位符。这就像如果你想切换变量 a 和 b，你需要第三个临时变量。

```
$.fn.exchangePositionWith = function(selector) {
    var other = $(selector);
    this.after(other.clone());
    other.after(this).remove();
}; 
```

你的代码是：`$("#revolve ul li:eq(1)").exchangePositionWith("#revolve ul li:eq(3)");`

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T01:29:43.927

实现这一目标的唯一方法是使用 javascript。更改 DOM 元素的顺序需要编写脚本，如果您希望它在滚轮上做出反应，则需要编写脚本。请注意，这将是一种意想不到的行为，可能会使您的用户感到困惑，并可能使他们感到困惑。在实际实施之前，我会三思而后行。

始终保持 div 可见并不复杂。只需查看使用 css 的固定定位（位置：固定；顶部：#px；左侧：#px；）。

# c# - 无法访问基类中的公共方法

> ID：11805136
> 
> 赞同：0
> 
> 时间：2012-08-04T01:16:46.137
> 
> 标签：c#, oop

所以我为我正在编写的控制台应用程序整理了一些简单的单元测试。当我对测试进行最后的润色时，我遇到了一个奇怪的访问问题。

```
Assert.Equals(testRegex.Evaluate(testString),true); 
```

这引发了一个错误，指出 Evaluate 方法由于其保护级别而无法访问。它在基类中是公共的。这是基类和子类。

```
abstract class RegexEvaluator
{
    //Fields
    protected string Regex { get; set; }

    public bool Evaluate(string text)
    {
        if (System.Text.RegularExpressions.Regex.IsMatch(text, Regex))
            return true;
        else
            return false;
    }
}

public class SSNRegex : RegexEvaluator
{
    public SSNRegex()
    {
        //Stubbed for now, don't worry about the regex
        this.Regex = "\\d{3}-\\d{2}-\\d{4}";
    }
} 
```

我能够通过添加到 SSNRegex 来解决这个问题

```
public bool Evaluate(string text)
{
    return base.Evaluate(text);
} 
```

我的问题是我对为什么无法访问基类方法感到困惑。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:25:14.537

您必须签名`RegexEvaluator`为`public`。默认情况下，这`internal`就是您无法从另一个程序集（例如单元测试）访问它的原因。

# asp.net - 使用 RestSharp（或任何 JSON 帖子）到 Asp.Net Membership JsonResult 返回（MVC）

> ID：11805137
> 
> 赞同：2
> 
> 时间：2012-08-04T01:16:47.667
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, xamarin.ios, forms-authentication

从浏览器中，我可以使用发布参数用户名和密码调用像 ../Account/Login 这样的 MVC 控制器，并且浏览器会植入一个 cookie，这样在随后的调用中，我不需要为我的 [授权] 调用传递凭据，比如 /帐户/GetUser 工作。

我正在尝试从 MonoTouch 应用程序中执行相同的操作（我认为这与 Windows 窗体应用程序中的问题相同），即使我的 /Account/Login 调用有效，但后续调用的行为就好像它们没有经过身份验证一样。我认为这是因为我不是浏览器，而且我没有所有的管道。真的？

所以，我的问题是，使用简单的 ASP.NET 和表单身份验证，有没有办法让我的 Monotouch 应用程序以类似于存储 cookie 的浏览器应用程序的方式运行？

感谢所有建议（包括......愚蠢的问题）。

谢谢

# javascript - 这两种继承策略有什么区别？

> ID：11805138
> 
> 赞同：1
> 
> 时间：2012-08-04T01:17:47.077
> 
> 标签：javascript, inheritance, prototype

我认为它们是等效的，但我不确定：

```
var __extends = function(child, parent) { 
    for (var key in parent) { 
        if (__hasProp.call(parent, key)) child[key] = parent[key]; 
    }
    function ctor() { 
        this.constructor = child; 
    } 
    ctor.prototype = parent.prototype; 
    child.prototype = new ctor; 
    child.__super__ = parent.prototype;
    return child; 
}; 
```

和

```
var __extends = function(child, parent) { 
    for (var key in parent) { 
        if (__hasProp.call(parent, key)) child[key] = parent[key]; 
    }
    child.prototype = parent.prototype;
    child.prototype.constructor = child;
    child.__super__ = parent.prototype;
    return child; 
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:42:49.480

这两个函数都使用对象的所有属性扩展`child`（函数）对象`parent`，并且它们设置`__super__`属性。然后差异开始：

```
function ctor() { 
    this.constructor = child; 
} 
ctor.prototype = parent.prototype; 
child.prototype = new ctor; 
```

此代码创建一个原型对象，`child`该对象继承自`parent.prototype`. 这是[旧版本](https://stackoverflow.com/q/2709612/1048572)的[`Object.create()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)功能。这是经典的 JavaScript 继承模式。

```
child.prototype = parent.prototype;
child.prototype.constructor = child;
child.__super__ = parent.prototype; 
```

这段代码很垃圾。它将`child`的原型对象设置为`parent.prototype`，但在下一行中忘记了现在两个属性都指向同一个对象 ( `child.prototype === parent.prototype`)。因此，`parent.prototype.constructor === child`和`child.__super__ === child.protoype`- 呃。

# sql-server - 当复制的表可能具有不同的架构时，如何保留 sql server 2000 表的实时副本？使用触发器？

> ID：11805145
> 
> 赞同：0
> 
> 时间：2012-08-04T01:18:40.500
> 
> 标签：sql-server, sql-server-2000

我在两个不同的数据库（在同一台服务器上）中有两个表，可能具有不同的模式。`Table 1`是`master table`，所有的更新都会直接去那里。`Table 2`将是`mirrored`：我需要以某种方式实时保持表 2 与表 1 相同。

问题是表 2 可能有额外的列、不同的列数据类型、添加的主键、添加的外键等。尽管如此，表 2 需要支持某些遗留前端正在生成的所有查询。

我今天计划通过尝试在触发器内针对第二个数据库中的表 2 重新执行更新、插入和删除语句来反映这些可能“不同”的情况。如果触发器失败，整个操作就会失败，所以理论上这应该保持表相同。

不过，我一直坚持获取触发触发器的实际 sql 语句。

```
fn_get_sql

DECLARE @Handle varbinary(64)
select @Handle = sql_handle FROM master..sysprocesses WHERE spid = @@SPID
select text FROM ::fn_get_sql(@Handle) 
```

这将返回触发器的 sql，而不是语句。

```
DBCC INPUTBUFFER(@@SPID) 
```

这将返回 sql 语句的前 256 个字符.. 不够好。

我的第一个问题是：如何获取触发 sql 2000 中触发器的 sql 语句？

我的第二个问题是：有没有更好的方法来做到这一点？我可以使用复制来复制一个表与另一个表具有不同架构的表（额外的列，列的不同数据类型等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:41:29.613

我认为您可能误解了触发器的工作原理；无需查找导致触发器触发的查询文本。

SQL Server 触发器对名为`inserted`and的临时表进行操作，其中包含受语句`deleted`影响的行的新旧版本。`UPDATE`对于`INSERT`and`DELETE`操作，仅分别填充`inserted`or表。`deleted`有关更多详细信息，请参阅[SQL 2000 触发器文档](http://msdn.microsoft.com/en-us/library/aa258254%28v=sql.80%29.aspx)。

应该可以使用触发器来维护`table 2`，假设其中的行与 之间存在一对一的关系`table 1`。

您可能考虑的另一种选择是替换`table 2`为基于 的视图`table 1`，只要转换很简单。只要视图与原始对象相同并且授予了必要的权限，更改对客户端应用程序应该是透明的。
这需要进行测试，因为如果您需要将其他表连接到`table 2`数据类型已更改的列上，它可能会对性能产生负面影响。

`table 1`复制并不真正适合此任务，如果并且`table 2`在同一个数据库中，则根本无法工作；复制发布者和订阅者必须位于不同的数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T06:58:41.447

我建议使用从主表返回数据的视图，该数据格式化为旧应用程序期望的结构。没有延迟问题，没有重复数据存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T02:43:23.907

我有不同的方法来回答这两个问题。我通常避免使用触发器，直到它是最后的选择，因为它会在数据库上增加不必要的开销。

触发器和存储过程的比较

*   在数据库中查看表关系、约束、索引、存储过程很容易，但很难查看触发器。
*   触发器执行对客户端应用程序不可见。它们不可见或可以在调试代码中跟踪。
*   很容易忘记触发器，如果​​没有文档，新开发人员将很难弄清楚它们的存在。
*   每次更新数据库字段时都会运行触发器，这会增加系统开销。它使系统运行更慢。

说得够多了，这就是为什么我更喜欢存储过程。您可以通过代理创建一个作业文件（例如 ex ：它每 30 分钟或任何其他时间执行一次）。您可以使用该逻辑插入该作业文件。通过这种方式，您的数据`table2`将接近实时。

现在参考创建代理： http:
[//msdn.microsoft.com/en-us/library/ms191128 (v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms191128(v=sql.90).aspx)
[http://msdn.microsoft.com/en-us/library/ms181153 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms181153(v=sql.105).aspx)

# javascript - 使用画布将图像切片成 div 元素？

> ID：11805153
> 
> 赞同：1
> 
> 时间：2012-08-04T01:19:28.190
> 
> 标签：javascript, html, animation, css

我加载图像，然后使用画布将其裁剪为单独的正方形。如何将裁剪的选择（在画布上绘制）分配给单独的 div 元素？我知道我可以创建多个画布并将它们插入多个 div 中，但这会损害性能。有什么方法可以将画布转换为图像对象或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:33:43.700

您是否尝试过`canvas.toDataURL()`将画布的图像设置为`background-image`s的图像`<div>`？

如果可行，您应该能够将画布的图像用作 CSS 精灵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T01:35:29.437

你甚至不需要画布。只需将图像用作`div`元素的背景，并使用背景位置来显示图像的不同部分。

例子：

```
<div id="nw"></div>
<div id="ne"></div>
<div id="sw"></div>
<div id="se"></div> 
```

CSS：

```
div {
  width: 100px;
  height: 100px;
  background-image: url(someimage.jpg);
  overflow: hidden;
}
#nw { background-position: 0 0; }
#ne { background-position: -100px 0; }
#sw { background-position: 0 -100px; }
#se { background-position: -100px -100px; } 
```

# python - 如果字符串等于Python中的正则表达式？

> ID：11805159
> 
> 赞同：4
> 
> 时间：2012-08-04T01:20:52.677
> 
> 标签：python, regex

有什么方法可以检查字符串是否完全等于 Python 中的正则表达式？例如，如果正则表达式是`\d\s\d`，它应该允许字符串`1 5`,`8 2`等，但不允许`lorem 9 4 ipsum`or `a7 3`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T01:23:48.637

字符串和正则表达式是不同的类型。我认为您不是要检查字符串是否“完全等于”正则表达式，而是要检查正则表达式是否匹配整个字符串。为此，只需在正则表达式中使用[开始和结束锚点（分别为`^`和`$`](http://docs.python.org/library/re.html#regular-expression-syntax)） 。例如：

```
^\d\s\d$ 
```

代替

```
\d\s\d 
```

# git - bitbucket 是否通过 git push 对太多失败的登录尝试实施临时锁定？

> ID：11805163
> 
> 赞同：0
> 
> 时间：2012-08-04T01:21:24.503
> 
> 标签：git, bitbucket

而且，如果他们这样做了，停工会持续多久？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:24:35.147

不，我可以看到。

“锁定”主题出现在 FishEye 和 Crucible 中（请参阅“[用户被锁定在 FishEye 和 Crucible REST API 之外](https://confluence.atlassian.com/display/AOD/Users+are+locked+out+of+FishEye+and+Crucible+REST+APIs)”），
但不是在管理 bitbucket 存储库时（请参阅“[授予用户对存储库的访问权限](https://confluence.atlassian.com/display/BITBUCKET/Granting+Users+Access+to+a+Repository)”）

通过 bitbucket API 报告的所有登录错误似乎都没有锁定任何用户（请参阅“ [sourcetree 托管项目 - Bitbucket API 调用失败](https://answers.atlassian.com/questions/25681/sourcetree-hosted-projects-bitbucket-api-call-failed)”）。

# mysql - 如何从 MySQL 中的电子邮件地址值返回不同的域名？

> ID：11805166
> 
> 赞同：7
> 
> 时间：2012-08-04T01:21:37.343
> 
> 标签：mysql, select

我有一个 MySQL 表，其值如下：

```
+--------------+
| user_email   |
+--------------+
| ab@gmail.com |
| cd@gmail.com |
| ef@yahoo.com |
| gh@yahoo.com |
| ij@gmail.com |
| kl@other.net |
+--------------+ 
```

我需要从这个电子邮件地址列表中返回一个唯一域名列表，例如：

**gmail.com、yahoo.com、other.net**

到目前为止，我正在使用以下 SQL 语句来选择它：

```
SELECT SUBSTRING_INDEX(user_email,'@',-1) 
```

然而，这只解决了我的一半问题——它正在返回域名。使用 DISTINCT 并没有成功。我错过了什么？

仅供参考：这是在 LAMP 堆栈上运行的。谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-04T01:25:47.600

只需使用 group by

```
SELECT SUBSTRING_INDEX(user_email,'@',-1) as domain_name FROM user_email group by domain_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-28T17:51:45.050

SELECT split_part (email,'@',2) as domain_name FROM pytest.emps group by domain_name;

# android - 如何为 android SOAP 操作创建 wsdl 文件？

> ID：11805171
> 
> 赞同：-1
> 
> 时间：2012-08-04T01:22:00.877
> 
> 标签：android, web-services

在实现 SOAP Web 服务访问时，我发现一些教程中有一个 wsdl 文件。当没有添加第三方库时，我必须在哪个文件夹中创建 wsdl 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:49:25.347

您可以通过请求 URL 查看已部署服务的 WSDL 文件

例如，

```
http://localhost:8080/helloservice/hello?wsdl 
```

所以基本上

```
http://<your-web-service-url>?wsdl 
```

应该管用

# iphone - 从文档目录中提取数据库

> ID：11805172
> 
> 赞同：0
> 
> 时间：2012-08-04T01:22:20.410
> 
> 标签：iphone, xcode

我一直在使用以下代码从我的应用程序的支持文件中提取一个 sqlite 数据库。这工作得很好，没有任何问题。

```
NSFileManager *fileMgr = [NSFileManager defaultManager];
NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"TulsaListBars.sqlite"];
BOOL success = [fileMgr fileExistsAtPath:dbPath];
if(!success)
{
    NSLog(@"Cannot locate database file '%@'.", dbPath);
}else{
    NSLog(@"File Exists: %@", dbPath);
}
if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
{
    NSLog(@"An error has occured: %s", sqlite3_errmsg(db));
}       
const char *sql = "SELECT * FROM Locations WHERE bar = 'yes'";
sqlite3_stmt *sqlStatement;
if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
{
    NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(db));
} 
```

我没有从支持文件中删除数据库并放入服务器。我正在使用以下代码将数据库从服务器拉到我的文档目录中。我已经验证该文件正在进入文档目录并且所有表格都是准确的。但是，我现在收到错误“准备语句问题：没有这样的表：位置”

```
NSURL *url = [NSURL URLWithString:@"my web site/TulsaListBars.sqlite"];
NSData *data = [NSData dataWithContentsOfURL:url];
NSString *appDocDir = [NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES) lastObject];
NSString *storePath = [appDocDir stringByAppendingPathComponent:@"TulsaListBars.sqlite"];
[data writeToFile:storePath atomically:TRUE]; 
```

这是数据库现在在我的文档目录而不是支持文件中的问题吗？

更新：我已经重新启动并重置了模拟器，现在看来数据库没有被加载到文档目录中。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:03:24.633

dataWithContentsOfURL 正在同步下载数据库文件，可能无法获取整个文件。

使用 NSURLConnection 将方法更改为异步，并使用委托方法*didReceiveData*附加到 NSMutableData 对象和*connectionDidFinishLoading*以使用该对象。

# .net - 如何正确编程

> ID：11805174
> 
> 赞同：0
> 
> 时间：2012-08-04T01:22:27.767
> 
> 标签：.net, vb.net, .net-4.0, private-members

我有 2 个不同的小部件，它们共享 10 个相同的成员。但是它们也有 2 个阶段。每个阶段都有其他阶段没有的特定成员。

```
public class widget

   private _id as integer
   private _engravedId as string
   private _stage as WidgetStage
   private _wig as IWidget
end class

public interface IWidget
   Calculate()
end interface

public class Twidget
   implemets IWidget

   private t as integer
   private b as double
   private d as double

end class

public class Rwidget
   implemenents IWidget

   private y as integer
   private x as double
   private b as double

end class 
```

如果我在我的类中声明一个 Iwidget，那么我将不得不对其进行强制转换以访问派生类变量。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T02:25:29.397

如果所有私有变量在 IWidget 的上下文中具有相同的含义，那么您可以将属性添加到 IWidget 以检索它们。

否则，您可以实现反射来检索值，但除非您正在执行诸如将属性映射到数据库列或用户界面元素值之类的操作，否则这很可能不是正确的方法。

这意味着投射很可能是您的场景的最佳方式。

# ruby-on-rails - 为什么将 rails 从 3.1.0 升级到 3.2.0 后我的测试变慢了？

> ID：11805175
> 
> 赞同：11
> 
> 时间：2012-08-04T01:22:36.207
> 
> 标签：ruby-on-rails, performance, ruby-on-rails-3.1, upgrade, ruby-on-rails-3.2

我遵循了这些升级说明：[http ://railscasts.com/episodes/318-upgrading-to-rails-3-2](http://railscasts.com/episodes/318-upgrading-to-rails-3-2)

这是我的三个小的升级更改：

**(1) 宝石文件**

```
-gem 'rails', '3.1.0'
+gem 'rails', '3.2.0'

-gem 'rack', '1.3.3'
+#gem 'rack', '1.3.3'

 group :assets do
-  gem 'sass-rails', '  ~> 3.1.0'
-  gem 'coffee-rails', '~> 3.1.0'
-  gem 'uglifier'
+  gem 'sass-rails', '  ~> 3.2.3'
+  gem 'coffee-rails', '~> 3.2.1'
+  gem 'uglifier', '     >=1.0.3'
   gem 'asset_sync'
 end 
```

**(2) config/environments/development.rb**

```
+  config.active_record.mass_assignment_sanitizer = :strict
+  config.active_record.auto_explain_threshold_in_seconds = 0.5 
```

**(3) 配置/环境/test.rb**

```
-  config.assets.allow_debugging = true
+  config.active_record.mass_assignment_sanitizer = :strict 
```

在升级之前，我的测试如下所示（每个测试不到一秒）：

```
...
StockroomTest:
     PASS stockroom must have a name (0.03s) 
     PASS stockroom name must be unique (0.01s) 
     PASS stockroom with name is valid (0.00s) 
...
Finished in 1.604118 seconds.
29 tests, 90 assertions, 0 failures, 0 errors, 0 skips
...
StockroomsControllerTest:
     PASS should create stockroom (0.04s)
     PASS should destroy stockroom (0.02s)
     PASS should get edit (0.14s)
     PASS should get index (0.11s)
     PASS should get new (0.03s)
     PASS should not destroy stockroom (0.04s)
     PASS should show stockroom (0.13s)
     PASS should update stockroom (0.02s)
...
Finished in 12.572911 seconds.
115 tests, 166 assertions, 0 failures, 0 errors, 0 skips
...
MiscellaneousTest:
     PASS get campaigns#index should redirect to newsletters#index (1.83s)
     PASS get /campaigns should redirect to / when logged out (0.06s)
Finished in 1.793070 seconds.
2 tests, 3 assertions, 0 failures, 0 errors, 0 skips 
```

之后（每次测试需要超过 1 秒）：

```
StockroomTest:
     PASS stockroom must have a name (1.29s)
     PASS stockroom name must be unique (1.30s)
     PASS stockroom with name is valid (1.27s)
...
Finished in 41.135808 seconds.
29 tests, 90 assertions, 0 failures, 0 errors, 0 skips
...
StockroomsControllerTest:
     PASS should create stockroom (1.30s)
     PASS should destroy stockroom (1.29s)
     PASS should get edit (1.33s)
     PASS should get index (1.43s)
     PASS should get new (1.41s)
     PASS should not destroy stockroom (1.31s)
     PASS should show stockroom (1.36s)
     PASS should update stockroom (1.31s)
...
Finished in 161.803235 seconds.
115 tests, 166 assertions, 0 failures, 0 errors, 0 skips
...
MiscellaneousTest:
     PASS get /campaigns should redirect to /newsletters when logged in (5.27s)
     PASS get /campaigns should redirect to / when logged out (1.67s)
Finished in 7.034593 seconds.
2 tests, 3 assertions, 0 failures, 0 errors, 0 skips 
```

以下是上述单元测试之一的示例。现在（升级后）运行大约需要 1.3s，而之前不到 0.01s。

**测试/单元/stockroom_test.rb**

```
require 'test_helper'

class StockroomTest < ActiveSupport::TestCase
  fixtures :stockrooms

  test "stockroom with name is valid" do
    assert stockrooms(:wine_cellar).valid?, 'tried new wine_cellar'
  end 
```

我知道固定装置不受欢迎，我确实打算认真研究工厂，但目前这是我的困境。这是相关的夹具：

**测试/夹具/stockrooms.yml**

```
wine_cellar:
  id: 1
  name: wine cellar 
```

仅有的两个验证`Stockroom`是`presence`和`uniqueness`。

注意：我在同一台机器上运行另一个 rails 应用程序，尽管它正在运行 rails `3.2.5`，并且几乎相同的单元测试（相同的两个验证上的相同断言）在 0.465489 秒（不到半秒）内完成。

以下是上述“具有名称的库房有效”测试的测试日志的相关部分：

```
 (0.9ms)  SET FOREIGN_KEY_CHECKS = 1
 (0.2ms)  BEGIN
 (84.8ms)  BEGIN
 (82.3ms)  BEGIN
 (83.4ms)  BEGIN
 (79.2ms)  BEGIN
 (82.1ms)  BEGIN
Stockroom Load (0.4ms)  SELECT `stockrooms`.* FROM `stockrooms` WHERE `stockrooms`.`id` = 1 LIMIT 1
Stockroom Exists (0.6ms)  SELECT 1 AS one FROM `stockrooms` WHERE (`stockrooms`.`name` = BINARY 'wine cellar' AND `stockrooms`.`id` != 1) LIMIT 1
 (0.1ms)  ROLLBACK
 (90.9ms)  ROLLBACK
 (85.7ms)  ROLLBACK
 (90.7ms)  ROLLBACK
 (81.4ms)  ROLLBACK
 (85.4ms)  ROLLBACK 
```

为了比较，这是我的 rails`3.2.5`应用程序中的“等效”测试：

```
 (0.2ms)  SET FOREIGN_KEY_CHECKS = 1
 (0.1ms)  BEGIN
Email Load (0.4ms)  SELECT `emails`.* FROM `emails` WHERE `emails`.`id` = 980190962 LIMIT 1
Email Exists (2.8ms)  SELECT 1 FROM `emails` WHERE (`emails`.`email` = BINARY 'MyString' AND `emails`.`id` != 980190962) LIMIT 1
 (0.2ms)  ROLLBACK 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T17:05:34.440

我能想象的唯一答案是您的测试在*处理事务的方式上*有所不同。

如果一切正常，rails 应该将每个测试包装在事务中并回滚事务。所以你基本上只是“模拟”了写动作，而不必在每次测试后回滚数据库，从而节省了大量时间。

如果是这样，您可能会在这里找到答案： [ActiveRecord Rollback does not work in Rails test](https://stackoverflow.com/questions/3774742/activerecord-rollback-does-not-work-in-rails-test)

只有您可能会尝试显式打开该功能。

编辑：当您的输出显示您正在使用事务时，rails 环境的加载方式可能有所不同。请检查 spec_helper.rb 以了解奇怪的差异。

您可以查看这篇文章并检查在您的测试套件启动时是否发生了一些奇怪的事情： [Rails 3 - Speed up Console Loading Time](https://stackoverflow.com/questions/4736546/rails-3-osx-speed-up-console-loading-time/5071198#5071198)

# android - 在Android中与Listview对话？

> ID：11805185
> 
> 赞同：0
> 
> 时间：2012-08-04T01:24:47.717
> 
> 标签：android, android-layout, android-listview, android-dialog, android-adapter

我正在尝试在一个对话框中创建一个 Listview，该对话框每行填充一个图像和两个 TextView。

我不知道要使用什么样的Dialog，如何填充它，以及设置适配器。我之前在其他活动上设置了一些没有对话框的 Listview，我尝试为我的对话框（在非 Listview 活动中）做同样的事情，但它就是行不通。它给了我一个 NullPointerException。

任何想法或至少是我如何做到这一点的例子？

（我有一个对象数组，我希望从中填充它。我需要能够将 array[#].getIcon 用于图像，array[#].getName 用于一个文本视图，而 array[#].getDescription 用于另一个.)

# objective-c - CHDataStructures 符合 ARC 标准吗？

> ID：11805186
> 
> 赞同：0
> 
> 时间：2012-08-04T01:25:14.300
> 
> 标签：objective-c, ios, cocoa-touch, automatic-ref-counting, chdatastructures

文档可能会说，但我是一个新手，还不能理解这一切。我在尝试使用它时遇到了各种 ARC 错误，但我希望这只是我自己的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:53:44.067

正如 borrrden 指出的那样，很容易看出它不符合 ARC。

**但是：**它不必是 ARC 兼容的，您可以通过
`-fno-objc-arc`为这些文件添加编译器标志来激活/停用单个文件的 ARC。

添加编译器标志`Targets -> Build Phases -> Compile Sources`

[![在此处输入图像描述](../Images/39a5ce17c265638067773063f119734e.png)](https://i.stack.imgur.com/KdnDn.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T01:47:30.573

看看 1) 上次更新的时间（主要是 2 年前）和 2) 保留和发布声明无处不在。不，这个项目不符合 ARC...

# c# - .NET 应用程序中的性能监控/指标

> ID：11805188
> 
> 赞同：17
> 
> 时间：2012-08-04T01:25:16.620
> 
> 标签：c#, performance

我们希望收集有关我们（例如 80% WinApp）应用程序的性能数据，包括在开发人员内部以及在客户站点外部。我们的目标如下：

*   它应该**非常**快
*   它应该是轻量级的
*   它应该允许在我们的应用程序中跟踪/计时和计算许多不同类型的事件。
*   它应该能够（有效地）收集大量数据，例如域、计算机名、用户、操作系统、内存等。
*   收集到的所有数据都应该是可分析的（一旦它被传输到我们内部的 BI 数据库），可以跨越上述所有维度。

理想情况下，它还可以在站点范围内或逐个用户的基础上进行相对配置，以控制：

*   如果甚至收集到这些性能指标
*   收集它们的详细程度
*   是否将结果报告给我们

我们一直在计划编写我们自己的系统来完成大部分工作。然后，我们将研究许多不同的“持久性”模型，包括“性能数据包”的二进制格式、XmlSerialization 和已经是 .NET 框架一部分的跟踪日志功能，仅举几例。

不过，在参与此之前，我想仔细检查一下“人群”提出的建议。我已经描述了我们正在尝试做的事情，以及我们目前的行动计划——但我正在寻找关于如何最好地解决手头问题的**任何和所有建议。**

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-05T19:48:09.320

看看[Metrics.NET](https://github.com/Recognos/Metrics.NET)，这是一个相对较新的项目，应该可以满足大部分这些需求。它是 Java 的“度量”项目的一个端口。

（2016 年 3 月添加：） Metrics.NET 项目在长时间没有更新后已转移给新人。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-06T04:27:11.527

你可以看看在 StatsD 之上构建一些东西：

[https://github.com/etsy/statsd/](https://github.com/etsy/statsd/)

有一个 .NET 包可以在这里找到：

[https://github.com/robbihun/NStatsD.Client](https://github.com/robbihun/NStatsD.Client)

它是轻量级的，因为它基本上只是将 UDP 数据包发送到远程服务器。然后，该远程服务器将其聚合并将其存储在 Graphite 中，Graphite 擅长获取这些数据并将其转换为图表，并为您管理诸如数据保留之类的事情。为了进行分析，Graphite 还允许您将数据输出为 JSON（这基本上将您的指标转换为双精度数组），并具有许多功能和过滤器，您可以将其应用于记录的指标，然后您可以将其输入其他系统。

有关 Graphite 可能实现的一些示例，请参见此处：

[http://matt.aimonetti.net/posts/2013/06/26/practical-guide-to-graphite-monitoring](http://matt.aimonetti.net/posts/2013/06/26/practical-guide-to-graphite-monitoring)

但是，它并不能满足您的所有要求，例如能够记录有关客户端的数据，例如计算机名称。但是您可能可以通过在度量名称中使用命名空间来实现该目标；因此，您可以使用“client567.orders.loadtime”之类的键记录您的指标，“client567”将是其他一些数据库中的一个条目，该数据库存储 client567 在 Windows 7 上使用 IE11，例如。

所以它不是一个完整的开箱即用的解决方案，但我认为它形成了一个很好的基础。

另一种选择是使用商业平台，例如 NewRelic：

[http://newrelic.com/](http://newrelic.com/)

它带有许多技术的性能监控（从 ASP.NET 到 SQL Server 到 Solr）。但是，它确实需要在后台运行的代理进程（Windows 上的服务）为您处理监控，这可能是您的选择，也可能不是。它或多或少适用于网络服务器，可能不太适合监视客户端 WPF 应用程序。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-04T05:12:38.487

按照你的计划，我会采取这种方法：

1.  您要将所有性能数据写入日志文件。使用快速 C# 日志库之一，如 log4net 或 nlog。如有必要，这些框架支持二进制附加程序。
2.  当应用程序开始写入可用的 RAM、CPU 等。
3.  使用 PostSharp 之类的方面注入器自动为应用程序中的每个（非内联）方法添加一个计时器。秒表类不会对性能产生重大影响。为了使其可配置，方面注入器根据方法的估计优先级更改日志级别（或使用您自己的属性来指定）。
4.  在退出（或启动）时提示用户将记录的性能数据发送到您的网络服务器。
5.  在数据输出时压缩数据。

您可能还想考虑编写自己的锁类。而不是使用`lock(blah)`or `Monitor.Enter(blah)`，将 Monitor.Enter/Exit 包装在您自己的一次性类中，该类记录您必须等待多长时间才能进入锁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T08:30:15.600

我将从测试[使用 EventLog](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.aspx)是否可以解决我的问题开始。EventLog 消息包含大量信息，您可以添加自己的信息。

对于一些诊断，我会看看[（自定义）性能计数器](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter)。我敢打赌，很难创造出超越 Windows 性能计数器性能的东西。

重新写一遍可能不值得。

可能需要在事件查看器中创建特殊过滤器以获取您正在寻找的输出或跨计算机收集事件（您甚至可以编写自己的查看器）

# ruby-on-rails-3 - Rails Conditional Get 在 Heroku 上的行为不正常

> ID：11805192
> 
> 赞同：0
> 
> 时间：2012-08-04T01:26:08.073
> 
> 标签：ruby-on-rails-3, http, heroku, etag

我有一个 Rails 3.2 应用程序，其中客户端轮询服务器中的资源以获取更新。此资源不是资产，而是动态内容。

我选择的实施策略是通过fresh_when指令的[条件获取：](http://guides.rubyonrails.org/caching_with_rails.html#conditional-get-support)

```
fresh_when(:etag => @etag, :public => false ) #it's a private resource, requires auth etc 
```

因此，当资源仍然是新鲜的（请求 'If-Not-Modified' 标头等于资源当前 ETag）时，服务器仅返回 304 标头。

```
Started GET "/news/4fe13e74aa5e7d3d70000001"
Processing by NewsController#show as JSON
Parameters: {"id"=>"4fe13e74aa5e7d3d70000001"}
Completed 304 Not Modified 
```

当资源不再新鲜时，我们在响应正文中有状态 200 和资源的最新版本：

```
Started GET "/news/4fe13e74aa5e7d3d70000001"
Processing by NewsController#show as JSON
Parameters: {"id"=>"4fe13e74aa5e7d3d70000001"}
Rendered news/show.json.rabl (8.1ms)
Completed 200 OK in 14ms 
```

在开发环境中，这完美地工作。问题在于生产环境（Heroku Cedar Stack）。在这种情况下，响应**始终**为200，正文中包含完整的对象表示：

```
2012-08-03T21:44:33+00:00 heroku[router]: GET blah.com/news/4fa43b428b91cd0001000002 dyno=web.1 queue=0 wait=0ms service=22ms status=200 bytes=2105

2012-08-03T21:44:33+00:00 app[web.1]: Started GET "/news/4fa43b428b91cd0001000002"
2012-08-03T21:44:33+00:00 app[web.1]: cache: [GET /news/4fa43b428b91cd0001000002] miss

2012-08-03T21:44:33+00:00 heroku[nginx]: 187.38.19.138 - - [03/Aug/2012:21:44:33 +0000] "GET /news/4fa43b428b91cd0001000002 HTTP/1.1" 200 665 "http://www.bla.com/news/4fa43b428b91cd0001000002" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.57 Safari/537.1" 
```

从外观上看，这个请求没有到达 Rails 控制器（实际评估新鲜度的地方），而是通过 heroku 的路由器和缓存层。

到目前为止我已经尝试过：

*   在两种环境中仔细检查 Rails (3.2.1) 和 Thin (1.3.1) 版本。
*   设置'config.action_controller.perform_caching = false'
*   删除 Rack::Cache 中间件 (config.middleware.delete Rack::Cache)

我不想要那些多余的响应的原因是因为它用不需要的对象刷新来轰炸客户端应用程序，从而对最终用户造成严重的性能影响。当服务器只返回一个 302 标头时，客户端 JavaScript 在再次轮询之前只是休眠一段时间。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:23:34.933

问题的根源在于 API 滥用。这一行：

```
fresh_when(etag: @etag, public: false) 
```

在开发中表现如预期，但在生产中不正常。我认为交换 Etag/If-Not-Modified 标头对于这种有条件的获取过程就足够了，所以我不在乎添加“Last-Modified”。

在阅读了[HTTP 1.1 RFC](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19)之后说：“HTTP/1.1 服务器应该在可行的情况下发送 Last-Modified。” 我决定试一试：

```
fresh_when(etag: @etag, public: false, last_modified: @news.updated_at) 
```

它在 Heroku 工作！我 99% 确定缺少此标头在他们的堆栈中以某种方式弄乱了请求/响应路径（假设他们在你的 dyno 前面有其他服务器，如 Varnish 和 Nginx）

# knockout.js - Knockout JS if else 根据值显示不同的 html

> ID：11805196
> 
> 赞同：0
> 
> 时间：2012-08-04T01:28:03.270
> 
> 标签：knockout.js, knockout-2.0

我正在尝试学习淘汰赛并且遇到了问题。

我正在尝试使用 ko if 子句，但我自己似乎无法解决

到目前为止，我的脚本看起来像

```
 <script>
    var SimpleListModel = function (items) {
        this.questionType = ko.observable("");
        this.items = ko.observableArray(items);
        this.itemToAdd = ko.observable("");
        this.addItem = function () {
            if (this.itemToAdd() != "") {
                var qt = $("#question-type").data("kendoDropDownList");
                this.questionType(qt.value());
                console.log(qt.value());
                this.items.push(this.itemToAdd()); // Adds the item. Writing to the "items" observableArray causes any associated UI to update.
                this.itemToAdd(""); // Clears the text box, because it's bound to the "itemToAdd" observable
            }
        }.bind(this);  // Ensure that "this" is always this view model
    };
    $(document).ready(function () {
        ko.applyBindings(new SimpleListModel([]));
    });
</script> 
```

我的 html 看起来像

```
 <button type="submit" class="btn pull-right" data-bind="enable: itemToAdd().length > 0"><i class="icon-plus"></i>Add Question</button>
                        <div id="questions" data-bind="foreach: items">
                            <div class="question-item">
                                <label data-bind="text: $data" class="q-label"></label>
                                <textarea placeholder="Answer" class="q-answer"></textarea>
                                 <!-- ko if: questionType()==="ABC" -->
                                           Display ABC
                                <!-- /ko -->
                                <!-- ko if: questionType()==="DEF" -->
                                           Display DEF
                                <!-- /ko -->
                            </div>
                            <div class="clear"></div>
                        </div> 
```

我需要做什么才能让 ko if: questionType 正常工作？

我已按照建议更新了 questionType 的设置，但是出现错误`Uncaught Error: Unable to parse bindings. Message: ReferenceError: questionType is not defined; Bindings value: if:questionType()==="Comment"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T03:07:59.793

因为`questionType`它是一个 observable，你需要将它作为一个没有参数的函数来调用来检索它的值。

因此，您的`if`陈述需要如下所示：

```
<!-- ko if: $parent.questionType() === "ABC" -->
    Display ABC
<!-- /ko --> 
```

# .net - Tiff 注释

> ID：11805197
> 
> 赞同：6
> 
> 时间：2012-08-04T01:28:06.550
> 
> 标签：.net, image, image-processing, tiff

1.  我在哪里可以找到 Tiff 注释 (Wang/Kodak) 格式规范？需要解析其中的一些并放入文本文件。浪费了很多时间谷歌搜索没有结果。
2.  哪些适用于 .NET 的 SDK 可以使用该标签进行操作？免费的sdk是首选。Libtiff 对任何 tiff 标记的限制为 32K，但某些注释标记（例如位图）可以更长。
    谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T18:12:39.523

该规范是公开的，但内容持有者 (eistream) 几年前关闭了他们的网站。它目前保存在此处的网络存档中：

[http://web.archive.org/web/20030124024322/http://www5.eistream.com/support_pro/faqs/annospec.htm](http://web.archive.org/web/20030124024322/http://www5.eistream.com/support_pro/faqs/annospec.htm)

# jquery - 如何暂时禁用模糊？

> ID：11805198
> 
> 赞同：1
> 
> 时间：2012-08-04T01:28:19.493
> 
> 标签：jquery, triggers, blur

我有一个搜索栏，当`blur`它`div`被隐藏时。但是，当我单击特定时，`div`我不想执行 on`blur`功能。我的意思是仅针对用户单击此处的特定点，我不想`blur`继续执行，但对于其他情况，我希望它起作用。我应该怎么办？

* * *

我正在为 jfriend00 编辑此消息：

我想我没有表达清楚。我想即时处理这种情况。我的意思是当用户单击 location_event 类时，我不想执行模糊处理。困难的是onblur在onclick之前执行，所以我必须在onblur函数中做一些事情但我不知道该怎么做？

我想，我应该在模糊函数中获取事件目标（这个点击的 div 类），但我不知道怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T01:31:59.787

在您的模糊处理程序中放置一个全局标志，然后您可以设置或取消设置该标志以确定您的模糊处理程序是否应该执行任何操作。

工作示例：http: [//jsfiddle.net/jfriend00/BqmZr/](http://jsfiddle.net/jfriend00/BqmZr/)

# nservicebus - NServiceBus - 两个发布者，一个订阅者，相同的消息接口

> ID：11805201
> 
> 赞同：2
> 
> 时间：2012-08-04T01:29:15.707
> 
> 标签：nservicebus

通常，我对 UnicastBusConfig、MsmqTransportConfig 和 MSMQ 队列之间的关系感到困惑。文档状态：

“订阅者的总线订阅发布者的方式是向已在其部分中配置的队列发送消息”

我是否正确地相信每个订阅者必须包含一个 MessageEndpointMapping 返回到每个发布者的端点（或队列），这些发布者可能会发布订阅者处理的消息？

如果是这样，那么如何为同一种消息类型配置多个 MessageEndpointMapping 呢？您不能有重复的值。

例如，给定 MyAssembly.IDoStuff，假设我有两个发布 IDoStuff 的发布者和一个订阅者：

```
<UnicastBusConfig>
   <MessageEndpointMappings>
      <add Messages="MyAssembly" Endpoint="Publisher1" />
      <add Messages="MyAssembly" Endpoint="Publisher2" /> <-- runtime exception
   </MessageEndpointMappings>
</UnicastBusConfig> 
```

这方面的商业案例很简单。假设订阅者是一个 FTP 进程，它获取一个文件并通过 FTP 将其输出。显然，您希望在整个企业的许多地方使用该功能。因此，有一个处理 ISendFile 的 FTP 订阅者，然后让每个需要 FTP 功能的发布者进程简单地发布 ISendFile 消息是有意义的。这是我遇到的确切情况-我看不到解决方法。

请指教-谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T20:41:32.327

正如 Kijana 在 nsb 列表中提到的，pub sub 的核心假设之一是发布者不应该了解其订阅者。甚至可能有 0 个订阅者，在您的示例中，从那时起就不会执行任何 ftp 传输。这表明您应该改为执行 bus.Send(SendStuffUsingFtpCommand)。NServiceBus 试图通过只允许给定消息类型的一个逻辑发布者来引导您走这条路。从技术上讲，这意味着每个消息类型只有一个消息映射条目，正如您所注意到的那样。

# android - 通常，Android VideoView 不显示视频，正在播放音频。如何让视频显示 100% 的时间

> ID：11805205
> 
> 赞同：2
> 
> 时间：2012-08-04T01:29:54.843
> 
> 标签：android, video, touch, android-videoview

我正在为 Android 使用 Mono。

我翻遍了所有我能找到的关于 VideoView 使用的帖子，但找不到答案。我已经切换到使用带有 MediaPlayer 的 SurfaceView 并再次返回，但没有运气。

我希望在用户有一段时间没有触摸屏幕后开始播放视频，所以我有一个保存 VideoView 的 FrameLayout，当我希望视频显示时，我让它可见。

当我开始播放视频时，它通常不显示（大约 80% 的时间），但音频开始播放。如果您触摸屏幕，则会显示视频。我尝试了不同的视频（.mp4 和 .3gp），但由于视频实际上是在您触摸屏幕后显示的，我怀疑它是别的东西。

我已经在几台设备上尝试过，结果相同，尽管它们来自同一制造商。它们都是 Coby 设备（一个 7 英寸，另一个 9.7 英寸），运行 Android 4.0。我的目标是 Android 2.3 API。

这是我的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

    ... A bunch of controls ...

<FrameLayout
        android:id="@+id/videoViewBack"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#FF000000"
        android:visibility="gone">
    <VideoView android:id="@+id/videoView"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:layout_gravity="center"
              android:visibility="visible"/>
</FrameLayout>
</LinearLayout> 
```

我开始播放视频的功能如下所示：

```
 private void StartVideo()
    {

        RequestedOrientation = ScreenOrientation.SensorLandscape; // Force into landscape so the video looks good

        FrameLayout vidBack = FindViewById<FrameLayout>(Resource.Id.videoViewBack);
        vidBack.Visibility = ViewStates.Visible;

        VideoView vid = FindViewById<VideoView>(Resource.Id.videoView);
        vid.SetOnTouchListener(this);
        vid.SetOnCompletionListener(this);
        vid.SetVideoPath(_attractFile);
        vid.SetMediaController(new MediaController(this));
        vid.RequestFocus();
        vid.Start();
    } 
```

我也尝试将 Start() 调用放在 OnPreparedListener 中，但这没有帮助。

我正在拔头发，希望有人知道我忘了做什么愚蠢的事情。

**编辑：**

根据问题与布局通道中视频大小不正确有关的理论，我做了以下似乎已经纠正了这个问题。但我不是 100% 确定为什么，或者它只是在戳果冻

在 OnPrepared 处理程序中，我添加了：

```
View mainScreen = FindViewById<View>(Resource.Id.MainScreen);
mainScreen.requestLayout();
mainScreen.postInvalidateDelayed(1000);
mainScreen.postInvalidate(); 
```

其中 mainScreen 是我的 xml 中的主要 FrameLayout。大部分时间做 PostInvalidate 修复它，添加 PostInvalidateDelayed 修复它 100% 的时间（我认为 :) ）。

关于为什么这有效的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T03:53:44.167

```
 @Override
public void surfaceCreated(final SurfaceHolder holder) {
    mPlayer.setDisplay(holder); // 指定SurfaceHolder

    gameActivity.handler.post(new Runnable() {
        @Override
        public void run() {
            try {
                mPlayer.prepare();
            } catch (IllegalStateException e1) {
            } catch (IOException e1) {
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-09T14:44:15.577

尝试这个：

```
videoView.setZOrderOnTop(true); 
```

# php - 如何在 PHP 中解析 ffmpeg 信息？

> ID：11805207
> 
> 赞同：6
> 
> 时间：2012-08-04T01:31:17.283
> 
> 标签：php, ffmpeg

如何从输出中获取特定信息，例如“持续时间” `ffmpeg -i /var/thismovie.avi`？

我需要帧高、帧宽、电影持续时间和帧速率。所有这些都在上述命令的输出中，但是我如何单独获取我需要的位并将它们放入 PHP 中的变量中？

我已经放弃了尝试安装`ffmpeg-php`在此之前我用来做同样工作的东西。

谢谢

`ffmpeg -i /var/thismovie.avi`产生这样的输出

```
ffmpeg version N-43171-ga763caf Copyright (c) 2000-2012 the FFmpeg developers built on Aug 3 2012 07:56:19 with gcc 4.1.2 (GCC) 20080704 (Red Hat 4.1.2-52) configuration: --enable-version3 --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libvpx --enable-libfaac --enable-libmp3lame --enable-libtheora --enable-libvorbis --enable-pic --enable-libx264 --enable-libxvid --disable-ffplay --enable-shared --enable-gpl --enable-postproc --enable-nonfree --enable-avfilter --enable-pthreads --extra-cflags=-fPIC libavutil 51\. 66.100 / 51\. 66.100 libavcodec 54\. 48.100 / 54\. 48.100 libavformat 54\. 22.100 / 54\. 22.100 libavdevice 54\. 2.100 / 54\. 2.100 libavfilter 3\. 5.102 / 3\. 5.102 libswscale 2\. 1.100 / 2\. 1.100 libswresample 0\. 15.100 / 0\. 15.100 libpostproc 52\. 0.100 / 52\. 0.100 [avi @ 0x18e8e240] non-interleaved AVI [avi @ 0x18e8e240] max_analyze_duration 5000000 reached at 5000000 Input #0, avi, from '/var/www/vhosts/mysite.com/httpdocs/movie.avi': Duration: 00:00:10.76, start: 0.000000, bitrate: 5180 kb/s Stream #0:0: Video: h264 (High) (H264 / 0x34363248), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 25 fps, 25 tbr, 25 tbn, 50 tbc Stream #0:1: Audio: ac3 ([0] [0][0] / 0x2000), 48000 Hz, stereo, s16, 128 kb/s At least one output file must be specified` 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-04T08:55:13.647

基于`ffprobe`@blahdiblah 建议的解决方案并受到[另一个问题](https://stackoverflow.com/questions/7708373/get-ffmpeg-information-in-friendly-way)答案的启发：[https ://github.com/paulofreitas/php-ffprobe](https://github.com/paulofreitas/php-ffprobe)

**注意：**需要 ffmpeg 0.9+，支持所有 ffmpeg 支持的文件类型

## 使用类

```
// Example 1
$info = new ffprobe($filename);
var_dump($info->format->format_long_name); // e.g. string(10) "AVI format"
var_dump($info->streams[0]->duration);     // e.g. string(11) "5674.674675"

// Example 2 (prettified)
$info = new ffprobe($filename, true);
var_dump($info->format->format_long_name); // e.g. string(10) "AVI format"
var_dump($info->streams[0]->duration);     // e.g. string(14) "1:34:34.674675" 
```

## 扩展类

```
class ffprobe_ext extends ffprobe
{
    public function __construct($filename)
    {
        parent::__construct($filename);
    }

    public function getVideoStream()
    {
        foreach ($this->streams as $stream) {
            if ($stream->codec_type == 'video') {
                return $stream;
            }
        }
    }

    public function getVideoInfo()
    {
        $stream = $this->getVideoStream();
        $info   = new ArrayObject(array(), ArrayObject::ARRAY_AS_PROPS);
        $info->duration     = (float) $stream->duration;
        $info->frame_height = (int) $stream->height;
        $info->frame_width  = (int) $stream->width;
        eval("\$frame_rate = {$stream->r_frame_rate};");
        $info->frame_rate   = (float) $frame_rate;

        return $info;
    }
}

$ffprobe = new ffprobe_ext($filename);
$info = $ffprobe->getVideoInfo();
var_dump($info->duration); // e.g. float(5674.674675) 
```

欢迎进一步改进！:-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-04T02:24:48.960

**改为使用`ffprobe`。**

[`ffprobe`](http://ffmpeg.org/ffprobe.html)是与 FFmpeg 一起打包的工具，完全符合您所追求的目的：提取视频信息。它输出各种容易解析的格式，并且会比解析FFmpeg输出的附带信息容易得多。

例如：

```
$ ffprobe -show_format -loglevel quiet mptestsrc.mp4 
[FORMAT]
filename=mptestsrc.mp4
nb_streams=1
format_name=mov,mp4,m4a,3gp,3g2,mj2
format_long_name=QuickTime/MPEG-4/Motion JPEG 2000 format
start_time=0.000000
duration=12.040000
size=237687
bit_rate=157931
TAG:major_brand=isom
TAG:minor_version=512
TAG:compatible_brands=isomiso2avc1mp41
TAG:encoder=Lavf54.20.100
[/FORMAT] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-28T22:40:34.000

您可以使用具有输出 JSON 格式选项的 ffprobe。

看看这个例子：

> ffprobe -v quiet -print_format json -show_format Ramp\ -\ Apathy.mp3

产生以下输出：

```
{
    "format": {
        "filename": "Ramp - Apathy.mp3",
        "nb_streams": 2,
        "format_name": "mp3",
        "format_long_name": "MP2/3 (MPEG audio layer 2/3)",
        "start_time": "0.000000",
        "duration": "203.638856",
        "size": "4072777",
        "bit_rate": "159999",
        "tags": {
            "title": "Apathy",
            "artist": "Ramp",
            "album": "Evolution Devolution Revolution",
            "date": "1999",
            "genre": "Metal"
        }
    }
} 
```

我正在使用 ffprobe 版本 1.0.7。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-04T02:58:41.460

```
$output = `ffmpeg -i /var/thismovie.avi`; //note that back quote is like exec
preg_match('/Duration: (.*?),.*?Video:.*?0x.*?([0-9]+)x([[0-9]+).*?([0-9]+) fps/i'
    ,$output , $result); 
```

$result 数组的输出应该是这样的：

```
Array
(
    [0] => Duration: 00:00:10.76, start: 0.000000, bitrate: 5180 kb/s Stream #0:0: Video: h264 (High) (H264 / 0x34363248), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 25 fps
    [1] => 00:00:10.76
    [2] => 1280
    [3] => 720
    [4] => 25
) 
```

更新

实际输出是多行，所以请将模式更新为

`/Duration: (.*?),.*?([0-9]+)x([0-9]+) \[.*?([0-9]+) fps/is`

# macos - 在不断开网络连接的情况下以编程方式退出“Captive Network Assistant”

> ID：11805208
> 
> 赞同：1
> 
> 时间：2012-08-04T01:31:18.430
> 
> 标签：macos, osx-lion, osx-mountain-lion, captivenetwork

有没有办法在不断开网络的情况下退出或杀死 (Mountain) Lion 中的 Captive Network Assistant？

我试图做一个简单的`killall`命令和一个`killall -9`，但它仍然与网络断开连接。

另一种方法是告诉 Captive Network Assistant，我已经登录了网页，它应该重新检查它吗？

# ruby-on-rails - 如何切换轨道布局？

> ID：11805214
> 
> 赞同：0
> 
> 时间：2012-08-04T01:33:10.940
> 
> 标签：ruby-on-rails

我对 Rails 相当陌生，并且被困在布局的概念上。

我的应用程序正在使用 Bootstrap 网格。在我的 application.html.erb 我有以下内容：

```
<div class="row">
 <div class="span8">
    <%= yield %>
 </div>

 <div class="span4">
    <%= render 'layouts/right_col'%>
 </div>
</div> 
```

这是一个基本的主列，右侧窄列布局。大多数应用程序都将具有这种布局。

但是在一些特定的视图操作中 - 我想要一个全宽列：

```
<div class="row">
<div class="span12">
   <%= yield %>
</div>
</div> 
```

我应该如何组织我的布局来支持这一点？覆盖会发生在哪里？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:46:17.680

我有两个选择：

1）您创建两个不同的布局。如果唯一的区别是菜单，那么我不会那样做。

2）对于不应该显示菜单的相关操作，在控制器中声明一个变量：

```
def some_action_with_no_side_menu

  @no_side_menu = 1
  #...
end 
```

然后在布局中：

```
<% if defined? @no_side_menu %>
<div class="row">
  <div class="span12">
    <%= yield %>
  </div>
</div>
<% else %>
  <div class="row">
    <div class="span8">
     <%= yield %>
    </div>

    <div class="span4">
      <%= render 'layouts/right_col'%>
    </div>
  </div>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T02:40:47.773

有几种方法可以做到这一点。最简单的方法是您只需创建另一个布局文件。例如创建`app/views/layouts/wide.html.erb`具有您的：

```
<div class="row">
<div class="span12">
   <%= yield %>
</div>
</div> 
```

里面的代码。然后，您可以从控制器方法中选择性地使用该布局进行渲染，如下所示：

```
def show
  ...
  render :layout => :wide
end 
```

Rails 3 还提供了一种机制来设置模板层次结构。这设置起来有点复杂，但它可能会导致代码更加干燥。[您可以在此 railscast](http://railscasts.com/episodes/269-template-inheritance)中了解有关它的更多信息。

# python - Python uTorrent 通知脚本不会终止

> ID：11805219
> 
> 赞同：1
> 
> 时间：2012-08-04T01:33:46.073
> 
> 标签：python, network-programming, python-2.7, ubuntu-12.04, utorrent

我创建了一个小型 python 脚本，用于在 ubuntu 12.04 机器上使用 uTorrent 下载 torrent 时发送通知。当我运行 pgrep -l torrent 时，我可以看到大量的 scipt 并且无法杀死它们。utorrent 调用传递种子名称的脚本。该脚本工作正常并在从终端运行时退出，但在 utorrent 调用它时不会关闭。我尝试将 sys.exit() 添加到脚本的底部，但它没有停止进程并停止发送通知。

我能做些什么来让 scipt 关闭？以及我如何杀死这些进程的任何想法？我试过杀死 pkill 和 htop。

谢谢。

```
#!/usr/bin/python

import sys
import os
import socket

def network_notify(message):
    host = ['192.168.0.4', '192.168.0.6']  #server IP
    port = 50000 
    size = 1024
    title = 'Torrent Downloaded'

    for i in host:
        try:
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
            s.connect((i,port))
        except:
            None
        else:
            s.send('\"' + title + '\" \"' +message+'"')
            data = s.recv(size) 
            s.close()

if len(sys.argv) > 1:
    name = ' '.join(sys.argv[1:])
    network_notify(name) 
```

这是 pgrep

```
james@Netb$ pgrep -l torrent
27516 torrentNotify.p
27518 torrentNotify.p
27520 torrentNotify.p
27521 torrentNotify.p
27522 torrentNotify.p
27529 torrentNotify.p
27531 torrentNotify.p
27540 torrentNotify.p
27541 torrentNotify.p
27545 torrentNotify.p
27546 torrentNotify.p
27550 torrentNotify.p
27551 torrentNotify.p
27552 torrentNotify.p
27553 torrentNotify.p
27555 torrentNotify.p
27558 torrentNotify.p
27567 torrentNotify.p
27570 torrentNotify.p
27571 torrentNotify.p
27573 torrentNotify.p
27574 torrentNotify.p
28959 torrentNotify.p
28965 torrentNotify.p
28970 torrentNotify.p 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:25:19.707

试试这个，当你运行脚本时，确保在调用它时你会`/path/to/script.py >> debug.txt`保存 utorrent 调试。这应该为您提供更好的错误处理，并在完成后显式关闭套接字。我还添加了一个小的超时。

我猜套接字是脚本的一部分。调用 shutdown 会停止所有流量，然后 close 将关闭套接字。

```
#!/usr/bin/python

import logging
import os
import socket
import sys

def network_notify(name):
    hosts = ['192.168.0.4', '192.168.0.6']  #server IP
    port = 50000 
    size = 1024
    title = 'Torrent Downloaded'

    for host in hosts:
        try:
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            # Set the socket to timeout after 10 seconds
            s.settimeout(10.0) 
            s.connect((host, port))
        except socket.error, socket.timeout:
            logging.error('Something is wrong with host: %s' % host)
            continue

        # Send the data
        s.sendall('"%s" "%s"' % (title, name))
        data = s.recv(size)

        # Shutdown and close the socket 
        s.shutdown(socket.SHUT_RDWR)
        s.close()

    if len(sys.argv) > 1:
        name = ' '.join(sys.argv[1:])
        network_notify(name)
    sys.exit() 
```

# javascript - while循环切片

> ID：11805221
> 
> 赞同：0
> 
> 时间：2012-08-04T01:34:22.900
> 
> 标签：javascript, while-loop

我正在尝试使用 while 循环来分割一大块文本，这样每段的长度都在 995 个字符以下，并以句点结尾。我几乎让它工作了，除了最后一个块永远不会被推入数组。这是为什么？

```
function divideByPunctuation() {
    var chunkArray = [];
    var textHunk = prompt();
    var textLength = textHunk.length;
    var currentLoc = 0;
    var i = 995;
    while (currentLoc <= textLength) {
        if (textHunk[i] === ".") {
            if (i > textLength) {
                chunkArray.push(textHunk.slice(currentLoc, textLength));
                break;
            } else {
                chunkArray.push(textHunk.slice(currentLoc, i));
                currentLoc += i;
                i = currentLoc + 995;
            }

        } else {
            i--
        }
    }
    console.log(chunkArray[0]);
    console.log(chunkArray[1]);
    console.log(chunkArray[2]);
    console.log(chunkArray[3]);
};
divideByPunctuation();​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T02:01:17.403

Javascript 有一个很好的内置函数来处理这类事情。

```
a = "Hi there. Here's a test sentence. Here's another one";
a.split(". ");
["Hi there", "Here's a test sentence", "Here's another one"] 
```

# java - 是否为线程更新了公共静态变量？（它是线程安全的吗？）

> ID：11805224
> 
> 赞同：1
> 
> 时间：2012-08-04T01:36:17.910
> 
> 标签：java, thread-safety

我尝试了以下方法，但没有奏效：

“开始”类：

```
public class Start implements Runnable {

    Start start;
    LoadExample loadExample;
    Thread mainThread;
    Thread loadExampleThread;

    private boolean running = false;
    public static boolean isExampleLoaded = false;

    public static void main(String[] args) {
        begin = new Start();
        loadExample = new LoadExample();
        begin.start();
    }

    public synchronized void start() {
        mainThread = new Thread(this, "Main");
        mainThread.start();
        loadExampleThread = new Thread(loadExample, "Load Example");
        loadExampleThread.start();
    }

    public void run() {
        running = true;
        while (running) {
            if(isExampleLoaded){
                System.out.println("Loaded!");
            }
        }
    }
} 
```

“LoadExample”类：

```
public class LoadExample implements Runnable {

    public void run(){
        //blabla, loading if you will...
        Start.isExampleLoaded = true;
    }
} 
```

您可能会在上面的代码中发现语法错误，但这仅仅是因为我没有在 Eclipse 中检查就输入了这个。我的原始代码非常相似，Eclipse 没有显示错误或警告。

我的问题是代码不会打印“加载！”。我认为这是因为（1）线程不能更改静态变量或其他类的变量，或者（2）更改仅针对当前线程而不是其他线程更新，但我可能错了。

任何澄清表示赞赏。

**编辑：**

如果您发现上述任何错误，请告诉我，我会尽快更新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T01:37:42.153

您需要标记变量`volatile`才能使此示例正常工作。如果没有`volatile`，读取线程将读取`isExampleLoaded`一次，而不会再次读取，因为编译器知道该变量尚未写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T01:42:31.790

任何时候你想从多个线程访问一个变量，*所有*对该变量的访问都应该在一个`synchronized`块或方法中，都使用同一个监视器。在目前的程序中，如果你制作静态同步`isExampleLoaded()`和`setExampleLoaded()`方法，并在任何地方使用它们，程序就可以工作。

正如@dasblinkenlight 指出的那样，也可以将变量标记为`volatile`，这也可以。`volatile`不能很好地扩展到许多变量或许多线程。在一般情况下，`synchronized`访问是更好的解决方案。

# jsf - java.lang.String 不能转换为 javax.faces.component.UIComponent

> ID：11805227
> 
> 赞同：0
> 
> 时间：2012-08-04T01:37:07.723
> 
> 标签：jsf, richfaces

我在 tomcat7 中部署我的项目，并且在启动我的 jsf 时，我遇到了投射问题。当我删除 binding="#{courseBean.courseTable}" 我得到了我的表，但它是空的。我一步一步按照教程进行操作，但我不知道问题出在哪里。

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /courselist.jsp at line 20

17:     <h:form id="mainForm">
18: 
19:         <h:panelGrid columns="1">
20:             <rich:scrollableDataTable id="courseTable"
21:                 binding="#{courseBean.courseTable}" value="#{courseBean.courseList}"
22:                 var="course" width="300px" height="200px">
23:                 <%-- <a4j:support event="onRowDblClick" <%-- action="#{courseBean.viewDetail}" --%> /> --%>

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:568)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:537)
    com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:275)
    com.sun.faces.application.view.JspViewHandlingStrategy.renderView(JspViewHandlingStrategy.java:118)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:152)
    org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:108)
    org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:189)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:97)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:102)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:311)
    org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:147)
    org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:276)
    org.ajax4jsf.Filter.doFilter(Filter.java:175)

cause mère 

javax.faces.FacesException: java.lang.ClassCastException: java.lang.String cannot be cast to javax.faces.component.UIComponent
    com.sun.faces.application.ApplicationImpl.createComponentApplyAnnotations(ApplicationImpl.java:1694)
    com.sun.faces.application.ApplicationImpl.createComponent(ApplicationImpl.java:429)
    javax.faces.webapp.UIComponentELTag.createComponent(UIComponentELTag.java:222)
    javax.faces.webapp.UIComponentClassicTagBase.createChild(UIComponentClassicTagBase.java:486)
    javax.faces.webapp.UIComponentClassicTagBase.findComponent(UIComponentClassicTagBase.java:670)
    javax.faces.webapp.UIComponentClassicTagBase.doStartTag(UIComponentClassicTagBase.java:1142)
    org.apache.jsp.courselist_jsp._jspx_meth_rich_005fscrollableDataTable_005f0(courselist_jsp.java:271)
    org.apache.jsp.courselist_jsp._jspx_meth_h_005fpanelGrid_005f0(courselist_jsp.java:225)
    org.apache.jsp.courselist_jsp._jspx_meth_h_005fform_005f0(courselist_jsp.java:181)
    org.apache.jsp.courselist_jsp._jspx_meth_f_005fview_005f0(courselist_jsp.java:136)
    org.apache.jsp.courselist_jsp._jspService(courselist_jsp.java:98)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:537)
    com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:275)
    com.sun.faces.application.view.JspViewHandlingStrategy.renderView(JspViewHandlingStrategy.java:118)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:152)
    org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:108)
    org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:189)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:97)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:102)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:311)
    org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:147)
    org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:276)
    org.ajax4jsf.Filter.doFilter(Filter.java:175)

cause mère 

java.lang.ClassCastException: java.lang.String cannot be cast to javax.faces.component.UIComponent
    com.sun.faces.application.ApplicationImpl.createComponentApplyAnnotations(ApplicationImpl.java:1683)
    com.sun.faces.application.ApplicationImpl.createComponent(ApplicationImpl.java:429)
    javax.faces.webapp.UIComponentELTag.createComponent(UIComponentELTag.java:222)
    javax.faces.webapp.UIComponentClassicTagBase.createChild(UIComponentClassicTagBase.java:486)
    javax.faces.webapp.UIComponentClassicTagBase.findComponent(UIComponentClassicTagBase.java:670)
    javax.faces.webapp.UIComponentClassicTagBase.doStartTag(UIComponentClassicTagBase.java:1142)
    org.apache.jsp.courselist_jsp._jspx_meth_rich_005fscrollableDataTable_005f0(courselist_jsp.java:271)
    org.apache.jsp.courselist_jsp._jspx_meth_h_005fpanelGrid_005f0(courselist_jsp.java:225)
    org.apache.jsp.courselist_jsp._jspx_meth_h_005fform_005f0(courselist_jsp.java:181)
    org.apache.jsp.courselist_jsp._jspx_meth_f_005fview_005f0(courselist_jsp.java:136)
    org.apache.jsp.courselist_jsp._jspService(courselist_jsp.java:98)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:537)
    com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:275)
    com.sun.faces.application.view.JspViewHandlingStrategy.renderView(JspViewHandlingStrategy.java:118)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:152)
    org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:108)
    org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:189)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:97)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:102)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:311)
    org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:147)
    org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:276)
    org.ajax4jsf.Filter.doFilter(Filter.java:175) 
```

**courselist.jsf：**

```
<rich:scrollableDataTable id="courseTable"
                binding="#{courseBean.courseTable}" value="#{courseBean.courseList}"
                var="course" width="300px" height="200px">
                <%-- <a4j:support event="onRowDblClick" <%-- action="#{courseBean.viewDetail}" --%> /> --%>
                <rich:column id="code" width="60px">
                    <f:facet name="header">
                        <h:outputText value="Code" />
                    </f:facet>
                    <h:outputText value="#{course.code}" />
                </rich:column>
                <rich:column id="name" width="200px">
                    <f:facet name="header">
                        <h:outputText value="Nom" />
                    </f:facet>
                    <h:outputText value="#{course.name}" />
                </rich:column>
                <rich:column id="length" width="60px">
                    <f:facet name="header">
                        <h:outputText value="Longueur" />
                    </f:facet>
                    <h:outputText value="#{course.length}" />
                </rich:column>

            </rich:scrollableDataTable> 
```

**coursebean.java**

```
public class CourseBean implements Serializable {

    @Autowired
    private transient courseService courseService;
    private transient HtmlScrollableDataTable courseTable;

    private List<Course> courseList;
    private Course currentCourse;

    @PostConstruct
    public void init() {
        courseList = courseService.findAll();
    }

    public String update() {
        courseService.save(currentCourse);
        init();
        return null;
    }

    public HtmlScrollableDataTable getCourseTable() {
        return courseTable;
    }

    public void setCourseTable(HtmlScrollableDataTable courseTable) {
        this.courseTable = courseTable;
    }

    public List<Course> getCourseList() {
        return courseList;
    }

    public void setCourseList(List<Course> courseList) {
        this.courseList = courseList;
    }

    public Course getCurrentCourse() {
        return currentCourse;
    }

    public void setCurrentCourse(Course currentCourse) {
        this.currentCourse = currentCourse;
    }

} 
```

# c++ - 多线程 C++ 消息传递

> ID：11805232
> 
> 赞同：6
> 
> 时间：2012-08-04T01:37:43.870
> 
> 标签：c++, multithreading, boost, boost-thread

我的任务是修改一个同步 C 程序，以便它可以并行运行。目标是让它尽可能便携，因为它是许多人使用的开源程序。因此，我认为最好将程序包装在 C++ 层中，这样我就可以利用可移植的 boost 库。我已经这样做了，一切似乎都按预期工作。

我遇到的问题是决定在线程之间传递消息的最佳方法是什么。幸运的是，该程序的架构是多生产者和单一消费者的架构。更好的是，消息的顺序并不重要。我已经读过单生产者/单消费者 (SPSC) 队列将从这种架构中受益。有多线程编程经验的有什么建议吗？我对这些东西很陌生。此外，任何使用 boost 来实现 SPSC 的代码示例都将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T02:14:27.233

下面是我用于协作多任务/多线程库 (MACE) [http://bytemaster.github.com/mace/](http://bytemaster.github.com/mace/)的技术。它具有无锁的好处，除非队列为空。

```
struct task {
   boost::function<void()> func;
   task* next;
};

boost::mutex                     task_ready_mutex;
boost::condition_variable        task_ready;
boost::atomic<task*>             task_in_queue;

// this can be called from any thread
void thread::post_task( task* t ) {
     // atomically post the task to the queue.
     task* stale_head = task_in_queue.load(boost::memory_order_relaxed);
     do { t->next = stale_head;
     } while( !task_in_queue.compare_exchange_weak( stale_head, t, boost::memory_order_release ) );

   // Because only one thread can post the 'first task', only that thread will attempt
   // to aquire the lock and therefore there should be no contention on this lock except
   // when *this thread is about to block on a wait condition.  
    if( !stale_head ) { 
        boost::unique_lock<boost::mutex> lock(task_ready_mutex);
        task_ready.notify_one();
    }
}

// this is the consumer thread.
void process_tasks() {
  while( !done ) {
   // this will atomically pop everything that has been posted so far.
   pending = task_in_queue.exchange(0,boost::memory_order_consume);
   // pending is a linked list in 'reverse post order', so process them
   // from tail to head if you want to maintain order.

   if( !pending ) { // lock scope
      boost::unique_lock<boost::mutex> lock(task_ready_mutex);                
      // check one last time while holding the lock before blocking.
      if( !task_in_queue ) task_ready.wait( lock );
   }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T07:51:49.413

网上有很多生产者-消费者队列的例子，对多个生产者/消费者来说是安全的。@bytemaster 发布了一个在每条消息中使用链接来消除队列类本身的存储的方法——这是一种很好的方法，我自己在嵌入式作业中使用它。

在队列类必须提供存储的地方，我通常使用大小为 N 的“池队列”，在启动时加载 N 个 *message 类实例。需要通信的线程必须从池中弹出一个*消息，加载它并将其排队。当最终“用完”时，*消息被推回池中。这限制了消息的数量，因此所有队列只需要长度为 N - 无需调整大小，无需 new()，无需 delete()，易于泄漏检测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T02:09:10.003

如果只有一个消费者但有多个生产者，那么我将使用一个数组或一些类似数组的数据结构，访问时间为 O(1)，其中每个数组槽代表一个生产者消费者队列。单生产者-消费者队列的最大优势在于，您可以在没有任何显式同步机制的情况下使其无锁，从而使其成为多线程环境中非常快速的数据结构。有关单生产者-消费者队列的基本实现，请参见[我的答案。](https://stackoverflow.com/questions/6839425/what-will-be-the-critical-section-code-for-a-shared-queue-accessed-by-two-thread)

# sql - SQL Inner Join 与数据修改以填充空列

> ID：11805240
> 
> 赞同：0
> 
> 时间：2012-08-04T01:38:51.493
> 
> 标签：sql

我正在考虑两个表中的以下列，其中 clicks_ 列是空的，应该填充从 mwhen 和 mwho 列中学习的数据。加入应该在 mwho 和 user_id 上。

**学生**

user_id、clicks_jan、clicks_feb、clicks_mar、clicks_apr

**用法**

mwho, mwhen

我的问题：

1.  我是否需要一个 select 语句，或者我可以立即从“更新学生”移动到设置 (...) 以更新列？
2.  当我要求它同时从两个表中提取信息以执行计算时，SQL 会抱怨 - 至少，当我声明“来自学生，使用情况”时它会抱怨。是否有明确的解决方法来使用另一个表的修改信息更新一个表？

到目前为止我所拥有的内容的精简版。（由于栏目更新都是相似的，我这里只展示一个。）

```
update students

set clicks_jan = 

    sum(
        case 
        when cast(strftime('%j', mwhen) as integer) < 32 then 1
        else 0 end)
from students, usage 
inner join students.user_id = usage.mwho; 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:22:57.527

我不完全是你正在尝试的，但这是我的尝试：

```
UPDATE students set
  Clicks_jan = (SELECT case when cast(strftime('%j',mwhen) AS integer) < 32
                            then 1 else 0 end
                FROM usage
                WHERE mwho=student.user_id); 
```

# html - 使用 CSS，当我将鼠标悬停在父元素上时，我可以更改子元素的属性吗？

> ID：11805243
> 
> 赞同：2
> 
> 时间：2012-08-04T01:39:00.930
> 
> 标签：html, css

我有一个 div 和一个跨度（带有一些文本和边框）。

```
<div id='div1'>
    <span id='span1' style='border-right: 1px black solid'>Some text</span>
</div> 
```

我想要做的是：当我将鼠标悬停在该 div 上时，我想从跨度中删除边框。当我移出 div 时，我希望边框恢复原样。

我可以用 CSS 做到这一点还是应该求助于 JS/jQuery？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T01:42:07.253

你不需要 JavaScript，你可以使用 css：

```
#div1:hover #span1 {
    border-width: 0;
} 
```

很简单:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T01:44:29.687

您不能将 :hover 用于内联样式，因此您必须将它们移动到样式标签或样式表中。

```
#div1:hover span{
    border:0;
}
#div1 span{
    border-right: 1px black solid;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T01:46:00.443

是的，在 :hover 状态选择器之后定位选择器相当容易。jsfiddle 在这里创建：http: [//jsfiddle.net/wigster/a4V8Q/](http://jsfiddle.net/wigster/a4V8Q/)

# macos - OpenGL 和改变 NSWindow 大小

> ID：11805248
> 
> 赞同：1
> 
> 时间：2012-08-04T01:40:11.027
> 
> 标签：macos, opengl, osx-lion

我正在修改一个使用 OpenGL 的 Cocoa 程序（我是 OpenGL 的初学者）。我试图让它进入 Lion 的全屏模式，并从当前屏幕中当前必须尽可能大的任何尺寸缩放窗口。当我进入全屏时，窗口被放大，但程序只使用左上角，窗口的其余部分是 VRAM 垃圾。我增加了窗口框架和内容矩形的大小，并调用 glScalef （使用正确的值）来增加比例，但它似乎永远不会改变屏幕上的比例。似乎我被最初传递给 -NSWindow:initWithContentRect:styleMask:backing:defer: 的任何宽度/高度所困扰。关于我需要在哪里看的任何建议？

# javascript - 在具有特定 ID 的 DIV 中使用 JavaScript 动态添加 HTML 元素

> ID：11805251
> 
> 赞同：22
> 
> 时间：2012-08-04T01:41:11.727
> 
> 标签：javascript

好的，人们，我需要你的帮助。我在 Stackoverflow 上找到了一些代码（找不到该链接），它们通过 JS 动态生成 HTML 代码。这是代码：

```
function create(htmlStr) {
    var frag = document.createDocumentFragment(),
        temp = document.createElement('div');
    temp.innerHTML = htmlStr;
    while (temp.firstChild) {
        frag.appendChild(temp.firstChild);
      }
        return frag;
    }

    var fragment = create('<div class="someclass"><a href="www.example.com"><p>some text</p></a></div>'); 

    document.body.insertBefore(fragment, document.body.childNodes[0]); 
```

这段代码工作得很好！但是生成的代码出现在页面顶部，就在`body`标签下方。我想`div`用特定`id="generate-here"`的 .

所以输出将是：

```
<div id="generate-here">
    <!-- Here is generated content -->
</div> 
```

我知道我看不到“查看源代码”生成的内容。我只需要在这个特定的地方用`#generate-here`. 我是 Javascript 菜鸟，所以如果有人可以重新排列这段代码，那将是完美的。非常感谢！

PS 我知道如何用 Jquery 做到这一点，但在这种情况下我需要原生和纯 JavaScript。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-04T01:51:01.613

您需要做的就是更改最后一行。这会将创建的元素添加为 div 的**最后一个**子元素：

```
document.getElementById("generate-here").appendChild(fragment); 
```

这会将创建的元素添加为 div 的**第一**个子元素：

```
var generateHere = document.getElementById("generate-here");
generateHere.insertBefore(fragment, generateHere.firstChild); 
```

您还可以使用 innerHTML 将所有内容替换为新文本（就像您在`create`函数中所做的那样）。显然，这不需要您保留该`create`功能，因为您需要一个 html 字符串而不是 DOM 对象。

```
var generateHere = document.getElementById("generate-here");
generateHere.innerHTML = '<div class="someclass"><a href="www.example.com"><p>some text</p></a></div>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T05:41:17.203

第 1 步。让我们创建一个函数来返回一个有序的 HTML 列表视图。请注意，我们正在传递一个数据数组：

```
function createListView(spacecrafts){
    var listView=document.createElement('ol');
    for(var i=0;i<spacecrafts.length;i++)
    {
        var listViewItem=document.createElement('li');
        listViewItem.appendChild(document.createTextNode(spacecrafts[i]));
        listView.appendChild(listViewItem);
    }
    return listView;
} 
```

第 2 步。然后让我们在您的 div 中显示我们的列表视图：

```
document.getElementById("displaySectionID").appendChild(createListView(myArr)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-05T19:52:39.193

这是我的解决方案示例

```
function divHTML(img, d1, r1, r2){
    const newDiv = document.createElement("div");
    const newContent = `
    <img src="`+img+`" width=50%>
    <h1 style="color:white">`+d1+`</h1>
    <button onclick="dom1.value='A'">A</button><i>`+r1+`</i><br>
    <button onclick="dom1.value='B'">B</button><i>`+r2+`</i><br>
    <input id="dom1" type="text"><hr>
    `;
    newDiv.innerHTML = newContent;
    const currentDiv = document.getElementById("div1");
    document.body.insertBefore(newDiv, currentDiv);
}

divHTML("https://images-cdn.kahoot.it/decf7162-f24b-464b-b2e7-2cca47ae0b42?auto=webp", "qual è la scrittura giusta?", "opzione 1", "opzione 2"
    ); 
```

# java - 如何查看线程在代码java中的位置

> ID：11805253
> 
> 赞同：4
> 
> 时间：2012-08-04T01:41:54.973
> 
> 标签：java, debugging

您能否在程序中打印出代码中的哪一行以及正在运行的线程使用什么方法——而不使用诸如 visualvm 之类的监控软件？你必须扩展线程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T01:45:17.717

如果这只是为了快速调试或错误报告，你可以这样做

```
new Exception().printStackTrace() 
```

如果你想比这更花哨一点，你可以使用`Thread.currentThread().getStackTrace()`来获取对象数组`StackTraceElement`；您可以通过检查这些来确定当前的行号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T03:52:12.350

只需使用[`Thread.dumpStack()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#dumpStack%28%29)，它会打印出堆栈（类似于未捕获异常时）。无需创建新异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T04:26:06.673

使用几乎任何日志框架，大多数都支持线程组/名称、类、方法、文件名和行号功能

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T01:44:43.253

您可以通过调用 来做到这一点[`Thread.getStackTrace()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#getStackTrace%28%29)。`StackTraceElement`它返回一个表示当前 StackTrace的数组。记住前几个元素将是 in 中的方法会很有帮助`Thread`，因此您可能感兴趣的那些将在数组的下方。

当然，您需要掌握`Thread`当前正在运行的...

```
Thread.getCurrentThread().getStackTrace() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T06:04:39.347

您可以查看[JDB](http://docs.oracle.com/javase/1.3/docs/tooldocs/solaris/jdb.html)。[此链接](http://rejeev.blogspot.com/2011/05/jdb-debugging-concurrency-issues-in.html)显示了使用它来调试并发问题的示例。[这](http://rejeev.blogspot.com/2011/04/jdb-command-line-debugger-for-java.html)也只是展示了它的一些基本功能。它相当不错，我相信它应该已经在你的 JAVA_HOME/bin 中了。

另一种选择是查看[JUCProfiler](http://www.infoq.com/articles/jucprofiler)，我没有尝试过这个，但它看起来相当不错。

# javascript - javascript 无法读取 null 的属性“样式”

> ID：11805259
> 
> 赞同：0
> 
> 时间：2012-08-04T01:43:11.590
> 
> 标签：javascript

此功能应该隐藏患者笔记并显示下一个笔记（如果他们有另一个笔记）

```
function nextNote(idno){
    document.getElementById(idno).style.display = 'none';
    var idno2 = parseInt(idno)+1;
    document.getElementById(idno2.toString()).style.display = 'inline';
    document.getElementById('prevNote').label = parseInt(document.getElementById('prevNote').label) + 1;
    document.getElementById('nextNote').label = parseInt(document.getElementById('nextNote').label) + 1; 
```

未捕获的类型错误：无法读取 null 的属性“样式”`"document.getElementById(idno).style.display = 'none';`

有问题的元素 `<li class="notes" label="1052" style="display: inline;" id="1">On: 5/17/2004 A real good Patient test</li>`

nextNote 被调用：`<input type="button" id="nextNote" class="notesbottombutton" value=">" label="1" onclick="nextNote(this.label);" />`

如果我使用 Chrome javascript 控制台 `document.getElementById(1).style.display;`，我会得到：`"inline"`

注意我将在函数工作后添加检查，例如 if(document.getElementById(idno2.toString()) 以便在没有更多注释要显示时它不会做任何事情，我只是想得到先说基本功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:56:03.340

也许问题是您的点击处理程序：

```
nextNote(this.label); 
```

`label`不是 HTML 输入的属性。它甚至不是一个有效的属性。`input`要设置with的标题`type="button"`，您应该使用其`value`属性并使用`this.value`来访问它。

如果您只是使用此属性将数据附加到元素并想要访问该属性，您应该这样做：

```
nextNote(this.getAttribute('label')); 
```

但我建议您改用`data-`前缀属性，这是在 HTML 5 中附加数据的标准方式（它也向后兼容）：

```
<input data-label="foo" />

nextNote(this.getAttribute('data-label')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T01:54:12.443

`this.label`指的是元素上的标签属性，但您正在设置一个名为标签的属性。将您的 onclick 更改为：

```
onclick="nextNote(this.getAttribute('label'));" 
```

# c++ - 包含双指针的单链表的正确名称是什么？

> ID：11805261
> 
> 赞同：3
> 
> 时间：2012-08-04T01:44:17.637
> 
> 标签：c++, c, data-structures, linked-list, doubly-linked-list

最近，我看到了这个：

```
struct node {
    node*  pNext;
    node** pPrevNext;
};

void insert_before(node** pNext, node* toInsert) {
    toInsert->pNext = *pNext;
    toInsert->pPrevNext = pNext;
    if (*pNext) (*pNext)->pPrevNext = &toInsert->pNext;
    *pNext = toInsert;
};

// node *a, *b;
// insert_before(a->pPrevNext, b); 
```

它看起来像一个单链表，但包含指向前一个节点的下一个指针的指针。我的问题很简单：*这叫*什么？没有它的“真名”，在 StackOverflow 和整个互联网上搜索有关此数据结构的信息都是空的。

请注意，它不是一个双向链表，如下所示：

```
struct node {
    node* pNext;
    node* pPrev;
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T02:32:36.973

它被称为双向链表，因为它有两个指针。您可以从宏中获取前一个节点，`container_of(*node.pPrevNext, node, pNext)`因此它在逻辑上也等同于标准的双向链表。

注意：有趣的问题是异或列表被认为是单链接还是双链接？见[XOR 双链表](https://stackoverflow.com/q/54092722/1216776)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T01:47:24.613

我认为没有任何标准名称*。*它是双向链表的一种受限版本，因为您可以在完整的双向链表中遍历指针以获取此处可用的所有信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T04:41:06.733

它是一个单链表，允许在 O(1) 时间内删除一个节点，或者在其前面插入一个节点。它没有名字，因为没有理由使用它……双向链表更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T02:35:54.040

它是一个单链表，旨在表现得像一个双链表。您可以通过以下方式删除元素

*pPrevNext = pNext;

唯一阻止它成为双向链表的是作者对这个概念的理解不足。

# datetime - BizTalk 业务规则引擎 比较日期范围内的 DateTimeNow？

> ID：11805262
> 
> 赞同：1
> 
> 时间：2012-08-04T01:44:24.673
> 
> 标签：datetime, biztalk, business-rules, biztalk-rule-engine

我尝试使用`Between`谓词将当前日期时间与日期时间范围进行比较。

我引用`mscorlib`程序集并在程序集中的类中使用`get_Now()`以`DateTime`获取 DateTimeNow。我无法将此当前日期时间与范围进行比较。

我的情况是这样的：

*   DateTimeNow 介于 2012-08-03 07:00:00 和 2012-08-04 07:00:00 之间

*   我所在地区的 DateTimeNow 应该是`2012-08-03 16:33:20`这一刻。它应该在我指定的范围内。但它似乎不起作用。如果我用 替换`DateTimeNow`，`2012-08-03 16:33:20`它可以工作。

似乎由于某种原因我的`DateTimeNow`不起作用。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:47:22.400

我发现在 .net mscorlib 程序集中使用 Get_Date() 函数，你必须修改你的机器注册表

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\BusinessRules\3.0\StaticSupport (DWORD)，赋值 1

详情在：

[http://blogs.msdn.com/b/richardbpi/archive/2005/11/14/492489.aspx](http://blogs.msdn.com/b/richardbpi/archive/2005/11/14/492489.aspx)

[http://kinnaribhute.blogspot.co.nz/2008/04/some-interesting-stuff-about-biztalk.html](http://kinnaribhute.blogspot.co.nz/2008/04/some-interesting-stuff-about-biztalk.html)

我不确定这将如何影响生产服务器，如果生产服务器环境没有与多个节点集群，则重新启动服务器会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:19:20.307

在引擎中对事实进行逻辑建模的方式与在 .NET 代码中对对象进行建模的方式之间存在阻抗不匹配，其影响之一是调用静态方法的问题。如果按照肖寒的描述设置 StaticSupport 标志，引擎会改变其行为，将静态方法视为内置函数或谓词。然而，默认情况下，引擎将静态方法视为事实的行为。从物理上讲，事实是引擎工作内存中的一个对象，每个事实都必须在引擎使用它的方法之前被断言。因此，要在 DateTime 上调用静态 Now 属性 getter，您首先必须向引擎断言 DateTime 对象。当然，DateTime 是一个值类型（结构），但这没关系，因为当您执行规则集时，您将单个事实断言为 Object 或将一组事实断言为 Object 数组。.NET 将自动装箱以这种方式传递的 DateTime（在内部将其包装为对象）。

我意识到，为了调用该对象的类型的静态方法（或者，在这种情况下，属性 getter，当然它实际上是一种方法），必须向引擎声明一个对象，这似乎很疯狂。如果引擎被构建为默认将静态方法视为内置方法，那可能会更好。然而，事实并非如此。此外，如果微软在单个规则集甚至单个规则的级别实现了 StaticSupport 标志会更好。在注册表中实现它（机器级别），或者以这种方式在 .config 文件（应用程序级别；使用）中配置它可能会带来真正的问题，因为它可能会破坏为使用相反值而编写的规则集旗帜。

要记住的另一点是静态支撑也可以设置为“2”。在这种情况下，如果您调用不带参数的静态方法，或者仅使用常量值调用它，并且如果您将其作为条件中的谓词或作为另一个函数的参数调用，那么引擎将评估静态成员一次并缓存结果。

# node.js - 传递nodejs异步块数据

> ID：11805266
> 
> 赞同：0
> 
> 时间：2012-08-04T01:44:51.880
> 
> 标签：node.js, synchronize

这是我的代码。

```
exports.connect = function(){
    var that = null;
    var client = new mongo.Db(ih.cfg.db.name, new mongo.Server(ih.cfg.db.host, ih.cfg.db.port, {auto_reconnect: true}));

    asyncblock(function(flow){
        client.open(flow.add('db'));
        var db = flow.wait('db');
        that = db;
    });

    return that
} 
```

我正在使用 asynblock 来同步我的代码，问题是我无法让 db 进入“那个”。有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:50:13.980

问题是您的 connect 函数在传递给 asyncblock 的函数运行之前立即返回 - 因为您传递给 asyncblock 的回调是异步调用的。它只能在传递给 asyncblock 的这些回调函数中同步您的代码。

解决方案可以是在外部调用 asyncblock，并将流对象传递给该模块。

例如：主文件：

```
var connect = require("./connect.js") // the file with your code in your question
, asyncblock = require("asyncblock");

asyncblock(function(flow)) {
  db = connect(flow);
  // rest of your code using db connection
} 
```

连接.js：

```
exports.connect = function(flow){
    var client = new mongo.Db(ih.cfg.db.name, new mongo.Server(ih.cfg.db.host, ih.cfg.db.port, {auto_reconnect: true}));
    client.open(flow.add('db'));
    var db = flow.wait('db');
    return db
} 
```

# php - 这个 jQuery UI 自动完成远程 JSON 请求 Google Suggest (Codeigniter) 有什么问题？

> ID：11805267
> 
> 赞同：2
> 
> 时间：2012-08-04T01:44:52.250
> 
> 标签：php, jquery-ui, codeigniter

我正在尝试模仿 Google Suggest。我得到了谷歌的回复，所以所有人都在那里工作，但由于某种原因，我无法显示自动完成选项。

这是我的 Codeigniter 控制器功能：

```
public function google_suggest($query)
{
    //$query = implode(" ", $query);

    $url = 'http://suggestqueries.google.com/complete/search?output=firefox&client=firefox&hl=en&q=' . urlencode($query);

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.0; rv:2.0.1) Gecko/20100101 Firefox/4.0.1");
    $data = curl_exec($ch);
    curl_close($ch);

    if ($data)
    {
        $data = json_decode($data, true);
        $data = $data[1];

        foreach ($data as $word)
        {
            $row['id'] = $word;
            $row['value'] = $word;
            $row_set[] = $row;
        }
        var_dump($row_set); //this works and responds so I know there is data
        echo json_encode($row_set);
    }
    else
    {
        return NULL;
    }
} 
```

样本输出：

```
[{"id":"testosterone","value":"testosterone"},{"id":"test","value":"test"},{"id":"test my speed","value":"test my speed"},{"id":"testicular cancer","value":"testicular cancer"},{"id":"testament","value":"testament"},{"id":"testosterone pills","value":"testosterone pills"},{"id":"testicular pain","value":"testicular pain"},{"id":"testudo","value":"testudo"},{"id":"testicular torsion","value":"testicular torsion"},{"id":"testosterone cypionate","value":"testosterone cypionate"}] 
```

这是我的客户端视图：

```
<style>
.ui-autocomplete-loading { background: white url('images/ui-anim_basic_16x16.gif') right center no-repeat; }
</style>
<script>
$(function() {
    function log( message ) {
        $( "<div/>" ).text( message ).prependTo( "#log" );
        $( "#log" ).scrollTop( 0 );
    }

    $( "#birds" ).autocomplete({
        source: "<?=base_url()?>/index.php/search/google_suggest/", // this link definitely works as I've tried it in isolation in another AJAX function
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.value + " aka " + ui.item.id :
                "Nothing selected, input was " + this.value );
        }
    });
    });
    </script>

<div class="ui-widget">
    <label for="birds">Birds: </label>
    <input id="birds" />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:13:15.170

尝试提醒（“/index.php/search/google_suggest/”）；我相信 base_url 以斜杠结尾，在您的示例中可能如下所示：www.site.com//index.php/search/google_suggest/。

更糟糕的情况是，使用 Firebug 或 Chrome 开发者工具来查看问题出在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:40:34.323

您是否尝试过将此签名用于“源”选项以自动完成？

```
 source: function( request, response ) {} 
```

它使您可以完全控制 ajax 请求，以及更多的调试机会。请参阅 jquery ui 的文档并查看 jsonp 示例的源代码

[http://jqueryui.com/demos/autocomplete/#remote-jsonp](http://jqueryui.com/demos/autocomplete/#remote-jsonp)

# javascript - 当我不知道键值时，如何从 JSON 响应中检索键？

> ID：11805268
> 
> 赞同：2
> 
> 时间：2012-08-04T01:44:54.160
> 
> 标签：javascript, json

这可能真的很简单，但我已经把头撞在墙上试图弄清楚。

我需要从 JSON 响应中获取一个值，但是响应中返回的键是随机的，所以我不能直接引用它来钻取它。

这是我收到的回复：

```
var c = {
         "success": { 
                    "7d40ab5352b0471cae5bdefc2e032840": { 
                          "__type__" : "user",
                          "__id__" : "7d40ab5352b0471cae5bdefc2e032840"
                    }

         },
         "errors": {}
         } 
```

我需要的是你在那里看到的随机字符串——ID。我已经尝试了各种各样的事情，但我一生都无法弄清楚如何将 ID 作为字符串取回。我试过用数组表示法`c.success[0][0]`来解决它，但无济于事。显然，我不能使用点符号，因为我不知道在 .success 后面放什么。

任何人都知道在事先不知道数组键的情况下该怎么做？我想确保我以一种被认为是最佳实践的方式执行此操作，而不是 hack。

谢谢...如果我以某种方式错过了以其他方式发布的答案，请以这种方式发送给我。我已经搜索了几天，找不到这个答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:46:58.243

```
for (var prop in c.success) {
  alert(c.success[prop].__id__); // Replace the alert with whatever you want to do with the ID
  // break; // Uncomment if there can be more than one ID returned and you only want one
} 
```

如果键与`__id__`值相同，您可以简单地执行以下操作：

```
for (var prop in c.success) {
  alert(prop); // Replace the alert with whatever you want to do with the ID
  // break; // Uncomment if there can be more than one ID returned and you only want one
} 
```

尽管 Šime Vidas 对 Object.keys 的使用更优雅，但您需要上述代码才能在旧浏览器中工作，除非您使用所谓的他（即，您添加一些额外的代码，让您现在可以使用新标准——即， Object.keys 的实现，它与我在上面所做的事情相同，除非内置版本已经存在，在这种情况下，shim 将优先考虑内置版本）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T01:47:14.890

这个：

```
var obj = c.success[ Object.keys( c.success )[0] ];

obj.__type__ // "user"
obj.__id__ // "7d40ab5352b0471cae5bdefc2e032840" 
```

**现场演示：http:** [//jsfiddle.net/AJaBS/](http://jsfiddle.net/AJaBS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T01:49:52.797

您可以使用一个简单的循环：

```
for (var id in c.success) {
    var obj = c.success[id];
    // do something
} 
```

如果要确保只处理对象中的第一个属性，可以`break;`在最后添加一条语句。

# javascript - 可以设置 cookie 只能通过 javascript 访问吗？

> ID：11805275
> 
> 赞同：1
> 
> 时间：2012-08-04T01:46:02.817
> 
> 标签：javascript, html, internet-explorer, cookies, local-storage

嗨，我在 facebook 下有一个扩展作品。我在需要时使用 localStorage 来存储一些密钥。现在我想将我的扩展移植到 Internet Explorer（又名 Js hell）。我认为大多数 IE 版本都没有 localStorage 支持，所以我发现了要点

[https://raw.github.com/gist/350433/c9d3834ace63e5f5d7c8e1f6e3e2874d477cb9c1/gistfile1.js](https://raw.github.com/gist/350433/c9d3834ace63e5f5d7c8e1f6e3e2874d477cb9c1/gistfile1.js)

它适用于 cookie。但是 facebook 会通过 Set-Cookie 标头删除未使用的 cookie 吗？

有什么建议么？谢谢。

# c# - 如何根据 TabStripPlacement 属性 WPF 影响 TabPanel 模板的位置

> ID：11805286
> 
> 赞同：0
> 
> 时间：2012-08-04T01:47:38.663
> 
> 标签：c#, .net, wpf, tabcontrol

我为我的应用程序中的所有 TabControl 创建了一个控件模板。该模板将 TabPanel 放置在选项卡项的主要内容的左侧。

```
 <Style TargetType="{x:Type TabControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabControl}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <TabPanel Grid.Column="0"
                              Panel.ZIndex="1"
                              Margin="0,0,0,0"
                              IsItemsHost="True"
                              Background="Transparent" />
                    <Border Grid.Column="1"
                            BorderBrush="Black"
                            BorderThickness="1"
                            CornerRadius="0,12,12,12">
                        <Border.Background>
                            <SolidColorBrush Color="Green" />
                        </Border.Background>
                        <ContentPresenter ContentSource="SelectedContent" />
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这最初是我希望我的选项卡控件看起来的样子。但是当我将 TabStripPlacement 属性设置为 Top 时，它仍然停留在左侧。有没有办法在控件模板中定义根据 TabStrip 属性调整 TabPanel 的位置？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:59:05.830

你需要在你的风格中使用触发器来响应`TabStripPlacement`属性的变化。

[这个](https://stackoverflow.com/a/2518960/577417)stackoverflow帖子提供了一个例子。

# wso2 - 如何在 outSequence 中获取 URL？

> ID：11805290
> 
> 赞同：2
> 
> 时间：2012-08-04T01:48:39.757
> 
> 标签：wso2, clone, response, wso2carbon

我使用 clone 向不同的服务器发送请求，并在`outSequence`. 它可以接收所有响应。有些可能会成功，有些可能会响应错误。但我不知道哪个服务器响应错误。我想我需要得到`URL`任何响应消息。

任何人都可以帮助我吗？

**我的服务配置代码在这里：**

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="CloneTest" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <clone id="12345">
            <target>
               <endpoint>
                  <address uri="http://172.21.11.21:28888/usm/services/receiveMsg" format="pox" />
               </endpoint>
            </target>
            <target>
               <endpoint>
                  <address uri="http://172.21.11.22:28888/usm/services/receiveMsg" format="pox" />
               </endpoint>
            </target>
         </clone>
      </inSequence>
      <outSequence>
            <aggregate>
                <completeCondition>
                    <messageCount min="10" max="10"/>
                </completeCondition>
                <send/>
      </outSequence>
   </target>
</proxy> 
```

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:55:44.203

您可以使用以下属性检索远程地址/主机。用于根据这些值进行过滤。

```
 <property name="Remote address --> " expression="get-property('axis2','REMOTE_ADDR')"/>
   <property name=" Remote host ---->" expression="get-property('axis2','REMOTE_HOST')" 
```

# performance - 缩小会影响 Node.js 的性能吗？

> ID：11805291
> 
> 赞同：18
> 
> 时间：2012-08-04T01:48:46.140
> 
> 标签：performance, node.js, minify

在浏览器中，缩小、连接或加载异步 JavaScript 会对性能产生积极影响。这对于在 Node.js 中运行的代码也是如此吗？

作为示例，对实例化的类的属性进行过多的注释和使用长名称通常会显着影响性能和内存使用吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-04T18:12:20.237

**是**的，它提高了编译时的性能，但是编译时对你的进程的整个生命周期来说是如此微不足道，以至于它应该无关紧要。唯一的区别是，如果您出于某种奇怪的原因不断地启动和停止节点程序，如果您这样做，可能是错误的。

但是，您不会想丑化您的服务器端代码，因为如果您收到错误返回，您将想知道在您的人类可读代码中的哪个位置可以找到并修复它。

我敢打赌，真正的问题是：*您认为几乎微不足道的编译时性能会抵消它节省的调试代码的时间吗？*

答案是**否定**的，只是坚持使用普通的人类可读的 Javascript。

# mysql - MySQL：为什么在 varchar 列上放置部分索引会使查询变慢？

> ID：11805293
> 
> 赞同：-1
> 
> 时间：2012-08-04T01:49:02.587
> 
> 标签：mysql, sql, performance, indexing, varchar

我有一个要存储文件路径的表 - 所以我有一个 varchar 字段，大小为 4096（linux 中的默认 MAX_PATH 大小）。但是，我需要能够对某个目录中的所有文件路径进行查询，所以我正在考虑进行如下查询：

```
SELECT * 
FROM files_table 
WHERE files_table.path LIKE "/my/awesome/dir/%" 
```

当我在我的数据库上使用路径字段 UNINDEXED 运行它时，大约需要 10 秒。好的，考虑到我的表大小约为 400 万，并且它是一个未索引的字段，我可以看到它需要一段时间。但是，当我索引它时，索引大小为 500，查询时间会跳跃......最多大约 30 秒！

这对我来说似乎很困惑。有人对可能导致这种情况的原因有任何想法吗？

* * *

对于那些渴望更多数据的人：

作为一些额外的数据 - 我尝试在查询上运行“解释”，发现它确实是使用我的索引，但它报告 key_len 仅为 5！这似乎也很奇怪。

另外 - 虽然我想听到我的问题的一个好的答案（因为我想了解这里发生了什么！），但我也愿意接受这样的想法，“我不知道它为什么这样做，但它没有重要，因为你真的应该像这样设计你的数据库......”排序。对于那些倾向于这种方式的人，我真正想做的是构建一个数据库结构来查询来自大型网络文件系统的各种（缓存）数据。我知道仅存储文件路径可能是解决此问题的最天真的方法，但我想我会尝试将其作为首次通过的实现，然后看看它把我带到了哪里。

* * *

编辑：

所以，更多的挖掘/信息：实际索引是一个多列索引 - 第一个索引是一个 int，保存一个 batch_id（即，表保存有关文件系统的缓存信息，所以每个快照都有自己的 batch_id），第二个是我对路径 varchar 的部分索引。因此，当 EXPLAIN 说索引 key_len 时，前 4 个字节实际上是用于 batch_id - 这意味着它只有一个字节的路径索引！

哦，“实际”查询也确实限制了 batch_id，所以它看起来更像这样：

```
SELECT * 
FROM files_table 
WHERE batch_id=5 
  AND files_table.path LIKE "_globalSoft/my/awesome/dir/%" 
```

其次 - 我的数据库中很大一部分文件的路径以“_”开头 - 上面查询中的“_globalSoft”就是一个例子。（是的，路径都是相对的。）因此，如果 key_len 仅为 5，则键中唯一使用的字符可能是前导“_” - 这可以解释为什么它这么慢。

当然，这仍然引出了为什么它只使用前导“_”的问题。在阅读 MySQL 索引的文档（[http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)）时，我注意到了这一行：

字符串会自动进行前缀和结束空间压缩。请参见第 13.1.8 节，“CREATE INDEX 语法”。

不幸的是，给定的链接没有说明字符串前缀压缩，我很难找到有关它的大量信息。我找到的信息都是关于 MyISAM 的，我现在正在使用 InnoDB。（虽然切换到 MyISAM 可能是有意义的，因为它应该使用字符串更好。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:23:38.773

*面盘*

好吧，我是个白痴......问题是我匹配的目录像“ *globalSoft” - 即以下划线开头的目录 - 并且没有意识到“* ”是一个特殊字符（如％），并且没有逃脱它。

原谅我的愚蠢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:16:57.050

查询速度较慢，因为 MySQL 将不得不做更多的整体 IO。该索引仅涵盖前 500 个字符，前 500 个字符不是很独特。对于前缀索引，MySQL 必须匹配前缀，然后获取行以检查完整值是否与前缀值匹配。对于常见的前缀，这可能会产生大量额外的随机 IO。随机 IO 的成本明显高于顺序 IO。在没有索引的情况下，使用顺序 IO 完成表的单次传递，并且查询速度更快。

您可能不想将 MySQL 用于此类搜索。查看 Sphinx、Solr 或其他文本索引技术，并使用“/”作为单词分隔符来索引路径。

您还可以将表拆分为 N 个较小的表，并对 N 个表进行并行全表扫描。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T18:38:15.727

有多少记录返回？看来您可能返回了相当大比例的记录；显然，一次扫描数据比从索引中一个一个地挑选出来更有效。

过度简化一点，使用索引通常涉及三个（实际缓存的）读取任务。一种在排序键列表中查找值，它提供了主索引中记录的键；一是在主索引中查找表中的记录位置；一是查找表中的记录。

另外，谷歌搜索“基数”，看看你的数据和索引有多好。

# objective-c - Objective C 两个错误 pngcrush

> ID：11805295
> 
> 赞同：1
> 
> 时间：2012-08-04T01:49:10.427
> 
> 标签：objective-c

我的代码没有任何问题，但我认为有些设置有误。在模拟器上，我的应用程序运行良好，但是当我想把它放在我的设备上时，我收到以下错误：

```
**pngcrush caught libpng error**

Could not find file: /Users/USER/Library/Developer/Xcode/DerivedData/PROJ-afhreiqghfsdvwbrdbfrawtkuser/Build/Products/Debug-iphoneos/PROJ.app/Email.png 
```

这是我得到的第一个错误，它只发生在 Mail.png 和 Emailp.png 上。其他照片都还好。

我得到的第二个错误并不是真正的错误。但是当我查看我设备上的 .app 文件夹时，我有很多不应该在其中的文件：

```
AppDelegate.d
Appdelegate.dia
AppDelegate.h
AppDelegate.o
Proj-Prefix.pch 
```

每个标题我都有这些。我该如何更改它，使其不会全部落在我的捆绑包中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T09:23:18.157

我猜想在您导入图像时，Email.png 没有链接到您的目标，因此它没有被移动到您的设备。您可以检查是否在导航器窗口中选择了带有项目名称的蓝色区域，然后转到 Build Phases -> Copy Boundle Resources，如果它不在列表中，则在底部使用小加号添加它。

我的另一个猜测是实际文件名是 email.png ，而模拟器不区分大小写，而设备不区分大小写。这可能是它找不到它的原因。

**编辑：**
**2，**我很确定 XCode 会在构建时生成这些文件，并且不知何故它们被放入了 .app 包中。你能告诉我们这些文件里面有什么吗？

# java - RXTX java, inputStream 不返回所有缓冲区

> ID：11805300
> 
> 赞同：0
> 
> 时间：2012-08-04T01:50:22.663
> 
> 标签：java, serial-port, rxtx

这是我的代码，我正在使用[rxtx](http://rxtx.qbang.org/wiki/index.php/Main_Page)。

```
public void Send(byte[] bytDatos) throws IOException {
        this.out.write(bytDatos);
    }

    public byte[] Read() throws IOException {

        byte[] buffer = new byte[1024];

        int len = 20;

        while(in.available()!=0){
            in.read(buffer);
        }

        System.out.print(new String(buffer, 0, len) + "\n");

        return buffer;
    } 
```

其余代码与[此](http://rxtx.qbang.org/wiki/index.php/Two_way_communcation_with_the_serial_port)相同，我只更改了两件事。

```
InputStream in = serialPort.getInputStream();
OutputStream out = serialPort.getOutputStream(); 
```

它们现在是全局变量，并且...

```
(new Thread(new SerialReader(in))).start();
(new Thread(new SerialWriter(out))).start(); 
```

现在不存在了……

我正在发送这个（每秒）

```
Send(("123456789").getBytes()); 
```

这就是我得到的：

```
123456789123
456789
123456789
1234567891
23456789 
```

有谁能够帮助我？

**编辑**

后来，我找到了更好的方法来解决它。谢谢，这是阅读代码

```
public byte[] Read(int intEspera) throws IOException {

        try {
            Thread.sleep(intEspera);
        } catch (InterruptedException ex) {
            Logger.getLogger(COM_ClComunica.class.getName()).log(Level.SEVERE, null, ex);
        }//*/

        byte[] buffer = new byte[528];

        int len = 0;

        while (in.available() > 0) {
            len = in.available();
            in.read(buffer,0,528);
        }

        return buffer;
    } 
```

对我来说，消除睡眠是不可能的，但这不是问题，谢谢[veer](https://stackoverflow.com/users/591495/veer)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T04:05:01.200

您确实应该注意到[InputStream.available](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#available%28%29)定义如下......

> 返回可以从此输入流中读取（或跳过）的字节数的估计值，而不会被下一次调用此输入流的方法阻塞。下一次调用可能是同一个线程或另一个线程。单次读取或跳过这么多字节不会阻塞，但可能会读取或跳过更少的字节。

如您所见，这不是您所期望的。相反，您想检查流的结束，这由[InputStream.read()](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28%29)返回指示`-1`。

此外，由于您不记得在读取循环的先前迭代中已经读取了多少数据，因此您可能会覆盖缓冲区中的先前数据，这又不是您想要的。

您似乎想要的是以下内容：

```
private static final int MESSAGE_SIZE = 20;

public byte[] read() throws IOException {
  final byte[] buffer = new byte[MESSAGE_SIZE];
  int total = 0;
  int read = 0;
  while (total < MESSAGE_SIZE
            && (read = in.read(buffer, total, MESSAGE_SIZE - total)) >= 0) {
    total += read;
  }
  return buffer;
} 
```

这应该强制它读取**最多**20 个字节，在到达流末尾的情况下更少。

特别感谢 EJP 提醒我保持帖子的质量并确保它们是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T04:06:55.130

摆脱`available()`测试。它所做的只是告诉你是否有数据可以在*没有阻塞的情况下读取。*这与告诉您整个消息的结束位置不同。很少有正确的用途`available(),`，这不是其中之一。

并在您阅读时推进缓冲区指针。您需要跟踪到目前为止已读取的字节数，并将其用作 read() 的第二个参数，将 buffer.length 作为第三个参数。

# jquery - 使手风琴处于活动状态：如果它包含一个面板，则为真

> ID：11805301
> 
> 赞同：0
> 
> 时间：2012-08-04T01:50:40.677
> 
> 标签：jquery, jquery-ui, accordion, jquery-ui-accordion

我正在使用 jquery ui 手风琴来显示一些数据，`active:false`如果有多个面板，我希望所有面板默认关闭，但`active:true`如果它只包含一个面板则打开。

```
$(function() {
                $("#accordion").accordion({autoHeight:false, collapsible: true, navigation: true,
                    clearStyle: true, active: false,
                    change: function(event, ui) {
                        resize_iframe();
                    },
                    create: function(event, ui) {
                    if($("#accordion div").length == 1) {
                       $(this).accordion({active:true});
                    }
                }
                });
            }); 
```

**我试过了，但它不起作用，即使只有一个面板，面板也总是关闭，所以有人知道问题出在哪里吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T02:13:17.600

我刚刚找到了一个解决问题的方法，即创建两种不同的配置，然后根据条件创建手风琴。

```
 $(function() {
            var more = {autoHeight:false, collapsible: true, navigation: true,
                    clearStyle: true, active: false,
                    change: function(event, ui) {
                        resize_iframe();
                    }
                };
                var one = {autoHeight:false, collapsible: true, navigation: true,
                    clearStyle: true, active: true
                    change: function(event, ui) {
                        resize_iframe();
                    }
                }
                if($("#accordion div").length == 1) {
                $("#accordion").accordion(one);
                } else {
                    $("#accordion").accordion(more);
                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:22:26.517

您也可以在 jquery 内的手风琴控件结束后尝试：

```
$(function() {
    if($("#accordion div").length == 1) {
            $("#accordion").accordion();
            $("#accordion div").css("display", "block");
    }else
    {
            $("#accordion").accordion({autoHeight:false, collapsible: true, navigation: true,
                clearStyle: true, active: false,
                change: function(event, ui) {
                    resize_iframe();
                });
    }

}); 
```

我希望这会奏效，

# android - 退出儿童活动并返回家庭活动 - 这是什么生活圈？

> ID：11805303
> 
> 赞同：0
> 
> 时间：2012-08-04T01:50:46.090
> 
> 标签：android, android-activity, push-notification, lifecycle

[**警告：**此问题不包含代码，因此可能看起来并不有趣。]

一个应用程序具有以下结构（基本上 3 级活动：home->category->item）：

```
--- Home Activity (TabHost)
------- Tab1: category 1 activity, contains item list, 
              onclick item will start "viewItemActivity" to view an item
------- Tab2: category 2 (as above)
------- Tab3: category 3 (as above) 
```

收到推送通知后，单击通知消息将单独启动 viewItem Activity。默认情况下，如果用户在手机上点击“返回”键，这个 viewItem Activity 将退出，用户将返回手机主屏幕。

有没有办法将用户转发到具有相应类别选项卡的家庭活动，而不是返回手机主屏幕？

**一般的方法/想法将不胜感激。**

我不确定 viewItem 活动中 lifecircle/method 的哪一部分需要被覆盖。以及如何编写它以避免对应用程序的启动过程/堆栈产生随机影响。

对于这个被覆盖的方法（onStop！？），我正在考虑检查主页选项卡活动是否正在运行，如果没有则启动，然后传递一些意图来显示相应的选项卡，这是正确的方法吗？）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:17:25.480

`onBackPressed()`在每个活动中覆盖，然后开始您的 Home 活动。要使您的 Tab1 活动不保留在堆栈中，请通过 MANIFEST 文件将其定义为没有历史记录：

```
 <activity android:name=".activity...." android:noHistory="true"></activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T02:01:26.163

当通知到达时，您可以启动 Home Activity，并在其 onCreate 中启动 itemActivity。这样，在堆栈中，您将在项目活动下方有 HomeActivity，并且按下后退按钮将转到 Home 活动。

# python - 文件打开/阅读语言的速度是否取决于？

> ID：11805309
> 
> 赞同：4
> 
> 时间：2012-08-04T01:52:25.580
> 
> 标签：python, file, file-io, io, filesystems

我有非常多的文件集合，我的任务是从这个集合中打开几个随机文件，将它们的内容视为一组整数并将其相交。

由于长时间将文件从磁盘读取到内存，这个过程非常慢，所以我想知道这个从文件读取的过程是否可以通过用一些“快速”语言重写我的程序来加速。目前我正在使用python，这对于这种工作可能效率低下。（如果我知道除了 python 和 javascript 之外的其他语言，我可以自己实现测试......）

将所有日期放入数据库是否有帮助？无论如何，文件都不适合 RAM，因此它将再次从磁盘读取，只有与数据库相关的开销。

文件的内容是长整数列表。90% 的文件非常小，不到 10-20MB，但剩下的 10% 大约是 100-200MB。作为输入 a 有文件名，我需要读取每个给定文件中存在的每个文件和输出整数。我试图将这些数据放在 mongodb 中，但这与基于普通文件的方法一样慢，因为我尝试使用 mongo 索引功能并且 mongo 不会将索引存储在 RAM 中。现在我只是剪切了 10% 的最大文件并将其余部分存储在 redis 中，有时会访问那些大文件。这显然是临时解决方案，因为我的数据会增长而可用的 RAM 量不会。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T02:22:24.123

您可以尝试的一件事是逐块计算文件的交集（即，从每个块将 x 字节读入内存，计算它们的交集，然后继续，最后计算所有交集的交集）。

或者，您可以考虑使用一些“重型”库来帮助您。考虑查看 PyTables（带有 HDF 存储）/使用 numpy 计算交叉点。这样做的好处是 HDF 层应该有助于处理不一次将整个数组结构保存在内存中的问题——尽管我之前没有尝试过这些工具中的任何一个，但它们似乎提供了你需要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T08:39:24.520

如果没有文件包含重复的数字，我会试试这个：

```
sort file1 file2 | uniq -d 
```

如果它们可能包含重复项，那么您需要先消除重复项：

```
sort -u file1 > /tmp/file1
sort -u file2 > /tmp/file2
cat /tmp/file1 /tmp/file2 | sort | uniq -d 
```

或者，如果您更喜欢不（明确）使用临时文件的版本。

```
(sort -u file1; sort -u file2) | sort | uniq -d 
```

你没有说文件的格式（上面假设文本，每行一个整数）。如果它们是某种二进制格式，在应用上述命令之前，您还需要一个命令来翻译它们。通过使用管道，您可以像这样组成此步骤：

```
(decode file1 | sort -u ; decode file2 | sort -u) | sort | uniq -d 
```

这`decode`是您必须编写的解析文件格式的程序的名称。

除了非常简短和简单之外，这个 shell 解决方案的好处是它可以处理任何大小的文件，即使它们不适合 RAM。

从您的问题中不清楚您是否有 2 个或任意数量的文件要相交（问题的开头是“一对”，结尾是“文件名列表”）。例如，要处理 5 个文件而不是 2 个文件，请使用`uniq -c | awk '{ if ($1=="5") print $2; }'`而不是`uniq -d`

# java - 使用 JAX-RS/Jersey 以多种方法进行身份验证 - 如何保持清洁？

> ID：11805312
> 
> 赞同：2
> 
> 时间：2012-08-04T01:53:35.760
> 
> 标签：java, authentication, jersey, jax-ws

我正在开发一个使用 JAX-RS/Jersey 和 Spring 用 Ja​​va 编写的 Web 服务。

WS 在用户登录时对其进行身份验证，并返回一个具有有限生命周期的访问密钥。大多数可用方法都需要有效的“访问密钥 + 用户 ID”组合。

对于所有可用的方法，我使用 @FormParam 来检索 POST 参数，并且响应是 JSON 格式。我想弄清楚的是如何避免打字

```
@FormParam("userId") final Integer userId,
@FormParam("accessKey") final String accessKey 
```

并为我将拥有的可能需要身份验证的 20 种方法中的每一种手动调用我的身份验证方法。这特别麻烦，因为我还必须添加代码来处理过期的访问密钥。

是否有另一种方法可以检索上述两个参数并执行身份验证，以便我可以保持方法干净？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T01:57:40.930

由于您使用的是 Jersey，因此您可以使用类似 servlet-filter 的 API 来干燥您的代码。查看：

*   [Jersey / JAX-RS / REST 资源的 Servlet 过滤器的等价物？](https://stackoverflow.com/questions/8738366/equivalent-of-servlet-filter-for-jersey-jax-rs-rest-resources)
*   [在 Jersey 生命周期中如何拦截请求？](https://stackoverflow.com/questions/4358213/how-does-one-intercept-a-request-during-the-jersey-lifecycle)
*   [`ContainerRequestFilter`](http://jersey.java.net/nonav/apidocs/latest/jersey/com/sun/jersey/spi/container/ContainerRequestFilter.html)

# javascript - 当我单击画布并拖动鼠标时，光标变为文本选择光标。我怎样才能防止这种情况？

> ID：11805318
> 
> 赞同：8
> 
> 时间：2012-08-04T01:54:51.280
> 
> 标签：javascript, css, google-chrome, mouse-cursor

这是一个小提琴：http: [//jsfiddle.net/MZ9Xm/](http://jsfiddle.net/MZ9Xm/)

注意：以下情况发生在 Chrome 22.0.1221.1 中，但不在 Firefox 14.0.1 中。[Ubuntu Linux]

将鼠标移动到顶部画布并按住鼠标按钮。拖动鼠标，光标将变为文本选择鼠标光标（I-bar）。如果页面上没有其他元素，则不会发生这种情况。

我已经将用户选择设置为无，但没有任何运气。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-04T02:26:52.890

您可以在画布中绑定 mousedown 事件以防止默认行为。

就像是：

```
// with jQuery
$( "#canvasId" ).mousedown(function(event){
    event.preventDefault();
});

// without jQuery
document.getElementById( "canvasId" ).onmousedown = function(event){
    event.preventDefault();
}; 
```

这是更新的小提琴：http: [//jsfiddle.net/MZ9Xm/1/](http://jsfiddle.net/MZ9Xm/1/)

您需要对此进行测试，看看您所做的事情是否有副作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T02:07:59.807

您是否尝试过使用[CSS`cursor`属性](https://developer.mozilla.org/en-US/docs/CSS/cursor)？

```
canvas {
    cursor: pointer;
} 
```

它应该显示默认光标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T02:31:28.300

试试这个：

```
var canvasEls = document.getElementsByTagName('canvas'),
    preventHl = function () { return false; },
    i = 0;

while (i < canvasEls.length) {
    canvasEls[i].onmousedown = preventHl;
    i += 1;
} 
```

返回 false 将阻止发生突出显示等默认操作。

# asp.net - 带有 EF Dbfirst 的 MVC3，如何生成“具有读写操作和视图的控制器”

> ID：11805320
> 
> 赞同：0
> 
> 时间：2012-08-04T01:55:18.257
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-3

我正在使用 DB first 方法学习 MVC3 和 EF。

在使用 Scafolding Options 的代码优先方法的 MVC3 的一些视频中，他们选择**了“具有读写操作和视图的控制器”**，并且在选择了模型和数据上下文类之后，一些代码会自动生成。

在我的工作中，我有一个单独的类库，其中包含 EF 模型**（请参见图表中的蓝色选定区域）**。请指导我如何访问该 EF 及其生成的类以与具有读写操作和视图的控制器一起使用？

**编辑** 我正在添加新的控制器。我没有收到您在图片中提到的评论。我在模型类下拉列表中得到了一些类，但列表中没有我的 EF 类。我没有在我的 MVC 项目中对类库进行任何引用。请告诉我如何以及在哪里做什么？

![在此处输入图像描述](../Images/6ec7aeb6f16a233434ebce4ebe2bf6f7.png) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:00:49.777

我相信你指的是[MVC 脚手架](https://nuget.org/packages/MVCScaffolding)

```
Install-Package MvcScaffolding 
```

如果它显示 No Model Classes available，当您将鼠标悬停时，它将为您提供更详细的描述：

![在此处输入图像描述](../Images/f95bf6b4502838f7d24bdf7a31cd0f2e.png)

如果您收到此消息，清理和重建应该可以解决您的问题。

您的主项目是否引用了您的数据库项目？在您的主项目中单击引用，添加新引用 - 然后在项目选项卡中使用您的 edmx 选择项目名称：

![在此处输入图像描述](../Images/dbead87a8075a4a0f4801f7e6d5dcef1.png)

之后，清理并构建！

# php - 来自数据库的动态样条高图

> ID：11805321
> 
> 赞同：1
> 
> 时间：2012-08-04T01:55:41.113
> 
> 标签：php, javascript, ajax, highcharts

我尝试制作样条高图并实施[如何将数据从 JSON 加载到高图？](https://stackoverflow.com/questions/9941188/how-to-load-data-from-json-to-highchart)，这是米娜加布里埃尔的回答。代码看起来像这样。

在`test.php`

```
}
// Set the JSON header
header("Content-type: text/json");

// The x value is the current JavaScript time, which is the Unix time multiplied     by       1000.
$x = time() * 1000;
$y = rand(0,100) ; 

// Create a PHP array and echo it as JSON
$ret = array($x, $y);
echo json_encode($ret);
?> 
```

在 highchart 脚本中：

```
<script>
/**
 * Request data from the server, add it to the graph and set a timeout to request again
 */
var chart; // global
function requestData() {
$.ajax({
    url: 'http://localhost:8080/test.php',
    success: function(point) {
        var series = chart.series[0],
            shift = series.data.length > 20; // shift if the series is longer than 20

        // add the point
        chart.series[0].addPoint(point, true, shift);

        // call it again after one second
        setTimeout(requestData, 1000);    
    },
    cache: false
   });
 }
 $(document).ready(function() {
   chart = new Highcharts.Chart({
      chart: {
        renderTo: 'container',
        defaultSeriesType: 'spline',
        events: {
            load: requestData
        }
    },
    title: {
        text: 'Live random data'
    },
    xAxis: {
        type: 'datetime',
        tickPixelInterval: 100,
        maxZoom: 20 * 1000
    },

    yAxis: {
        minPadding: 0.2,
        maxPadding: 0.2,
        title: {
            text: 'Value',
            margin: 80
        }
    },
    series: [{
        name: 'Random data',
        data: []
     }]
   });        
});
  </script>
  <  /head>
<body> 
```

而那些工作得很好。但是当我尝试更改代码`test.php`以将 y 值设置为数据库中的数字时，如下所示：

```
<?php
header("Content-type: text/json");
$db = mysql_connect("localhost","myusername","mypassword");
mysql_select_db("mydatabase");

$day=date('Y-m-d'); //UTC standar time

$result = mysql_query("SELECT COUNT(*) FROM table WHERE time='{$day}';");
$count = mysql_fetch_array($result);

// The x value is the current JavaScript time, which is the Unix time multiplied by       1000.
$x = time() * 1000;
$y = $count[0]; 

// Create a PHP array and echo it as JSON
$ret = array($x, $y);
echo json_encode($ret);
?> 
```

折线图不起作用。我检查了 sql 代码，它工作正常。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:54:01.540

根据给定的信息和[这篇文章](https://stackoverflow.com/questions/8852814/mysql-query-returns-only-string-type-for-int-fload-db-type)，我最好的选择是 $count[0] 是一个字符串，highcharts 需要它是严格的数字。你能帮我试试以下

```
 $y = intval($count[0]); // OR floatval($count[0]); 
```

# c++ - 为什么我应该使用 const T& 而不是 const T 或 T&

> ID：11805322
> 
> 赞同：4
> 
> 时间：2012-08-04T01:56:01.593
> 
> 标签：c++

我总是`const T&`用来将一个类传递给一个函数。像这样：

```
void foo(const MyType& p)
{
  //...
} 
```

但是现在我很困惑，为什么不将 a`const T`或 a`T&`传递给函数呢？

顺便说一句，对于内置类型，例如`int`, `long long`, `double`, 为什么`const T`比`const T&` ~~（我记得我读过*Effective C++*）~~

谢谢回答我的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T02:16:02.340

您可以通过这三个中的任何一个（*const T、T&*或*const T&*）。它们都有不同的含义。是否要传递无法修改的对象副本、对对象的非常量引用或对对象的 const 引用，由您决定。您选择的内容取决于代码的语义。总体而言，您需要选择`const T&`over`const T`以避免将值从调用者复制到此函数（节省时间和内存）。此外（根据[这个有用的链接](http://www.cprogramming.com/tutorial/const_correctness.html)），只要你想避免改变*值*和*状态*，你就会想使用`const T&`over`T&`**传递的参考。这可以防止愚蠢和被忽视的编码错误，例如为了测试目的而更改字段。**

 **关于将 const 原始类型的引用作为参数传递的问题，请参见：[C++ and QT4.5 - is passing a const int& overkill? 通过引用传递是否有助于信号/插槽？](https://stackoverflow.com/questions/1333176/c-and-qt4-5-is-passing-a-const-int-overkill-does-pass-by-reference-helps-i)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T02:11:14.487

const T 是按值传递的（需要复制），这对于一个类来说可能太多了，而对于内置类型来说应该没问题。

T& 是通过引用传递的，可以在函数中修改，而 const T& 不能，所以这取决于你需要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T02:08:57.110

> （我记得我读过 Effective C++）

不，你不会，因为斯科特迈耶斯不会犯这样的错误。

`const T&`是最好的选择，因为它从不涉及副本，但仍然可以采用右值。考虑

```
void foo(int& p);
void foo(const std::string s);
int main() { 
    foo(1); // illegal!
    foo("A reaaaaaaaallllllllllllllllllllllllllllllllllllllllllly long string");
    // Nasty copy
} 
```

如果您需要一个项目的副本，请在参数列表中创建一个（按值取值），但这个值几乎没有理由是`const`. 否则，使用`const T&`. 对于一些便宜的类型，不按价值考虑没有什么意义，因为您事先知道复制很便宜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T02:10:57.077

您始终通过 const 引用传递的规则过于笼统。

通过 const 引用传递通常表明

*   该方法不会修改参数
*   该方法可能不会声明对参数的所有权
*   调用者保证参数的生命周期将比调用长

如果您需要不同的东西，那么您应该选择其他东西而不是通过 const 引用传递。**

# c# - 检查是否在Thread OnStart c#中插入了记录

> ID：11805325
> 
> 赞同：0
> 
> 时间：2012-08-04T01:56:16.240
> 
> 标签：c#, sql-server

我有一个类库，用于在 Ms. Access 中选择记录，然后将所选记录插入 SQL Server。

```
public class SyncDatabase
{
  private static SyncDatabase objs = null;
  public static SyncDatabase GetInstance
  {
    get
    {
      if (objs == null)
           objs = new SyncDatabase();

           return objs;
      }   
    }

    OleDbConnection con = new OleDbConnection("Provider=Microsoft.jet.oledb.4.0; data source=C:/Users/cheata/Desktop/TimeSheet.mdb");
   public void GetData()
   {
      con.Open();
      OleDbCommand cmd = new OleDbCommand("select * from tblEmployee_TimeSheet", con);
      DataTable dt = new DataTable();
      dt.Load(cmd.ExecuteReader());

      var _data = dt.AsEnumerable().Select(row => new tblEmployee_TimeSheet
                                           {
                                              ID = row.Field<int>(0),
                                              EID = row.Field<int>(1),
                                              CheckIn = row.Field<DateTime>(2),
                                              CheckOut = row.Field<DateTime>(3),
                                              DateCheck = row.Field<DateTime>(4)
                                           }).ToList();

     con.Close();
     var context =  TimeSheetDataContext.GetInstance;

     foreach (tblEmployee_TimeSheet obj in _data)
     {
       context.Insert<tblEmployee_TimeSheet>(obj);
     }
   } 
```

}

我有一个用线程编写的窗口服务，当窗口启动时，MyWindowService 也会启动。然后它会调用线程`OnStart`。

我想要的是`SyncDatabase`在我的线程中调用类库`OnStart`，然后在`OnStart`方法中检查我要插入的值是否已经存在于 SQL Server 的记录中。

这是我的线程：

```
public partial class Thread : ServiceBase
{
  public Thread()
  {
    InitializeComponent();
  }

  protected override void OnStart(string[] args)
  {

  }

  protected override void OnStop()
  {
  }
} 
```

谁能告诉我该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:16:09.657

您可以创建一个存储过程来检查对象插入是否存在如果不存在则返回 -1 返回 0

你只需要在你的循环中调用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T02:41:43.933

[OnStart](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstart.aspx)方法在启动命令发送到服务时调用，它应该足够轻以快速完成。最好在 OnStart 中启动线程或计时器并尽快从方法返回。服务中的编码类似于 .net 中任何其他类型的应用程序中的编码。添加包含 SynDataBase 类的程序集的引用，然后像在控制台或 win 应用程序中一样使用它。您还可以在服务中提供配置文件，如果您的代码从配置中获取连接字符串，您可以在服务项目的配置文件中提供该配置元素。只是一个粗略的代码来向您展示如何做到这一点。在您的 OnStart 方法中编写此代码

```
System.Threading.Thread thread = new System.Threading.Thread(() =>
                {
                    SyncDatabase.GetInstance.DoWhatYouWant();

                });
thread.Start(); 
```

# z3 - 检查 Z3 模型是否满足约束的最快方法？BitVectors，Z3 3.2，C# API，x64，多线程

> ID：11805326
> 
> 赞同：1
> 
> 时间：2012-08-04T01:56:28.153
> 
> 标签：z3

给定 Z3 中的一组约束（断言），我想知道检查我已经拥有的模型是否满足这些断言的最有效方法是什么。该模型是从类似的一组约束中获得的。我需要一个是/否的答案，而不是像[为 Z3 指定初始模型值](https://stackoverflow.com/questions/9879369/specifying-initial-model-values-for-z3)那样的软约束。

我正在使用 Z3 3.2 的 x64 版本在 Windows 7 x64 上使用 C# API 对位向量进行操作。我通过实例化多个 Z3`Context`对象来实现多线程，每个线程一个。由于缺乏对多线程的支持，我没有使用 Z3 4.0。

我目前的方法只是将模型断言为一组额外的约束`Context.AssertCnstr(Term)`，然后简单地调用`Context.Check()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:01:42.600

Z3 公开了一个名为“Z3_model_eval”或“Model.Eval”（来自 C#）的方法，它接受一个模型和一个表达式。如果表达式包含量词并且评估者无法确定量化公式模模型的真值，则评估可能会失败。如果模型评估成功，您可以检查返回值以确定模型是否强制断言为真。Z3_model_eval 的文档更详细地详细说明了合同：

```
http://research.microsoft.com/en-us/um/redmond/projects/z3/group__capi.html#ga86670c291a16640b932e7892176a9d1b 
```

模型评估不会检测重言式，因此将模型序列化为公式并让 Z3 检查模型和断言之间的含义可能更适合某些用途。

# php - 致命错误：不在对象上下文中使用 $this

> ID：11805327
> 
> 赞同：0
> 
> 时间：2012-08-04T01:56:54.907
> 
> 标签：php, object, this

任何人都知道为什么这段代码会出错？“致命错误：不在对象上下文中使用 $this” 这是我试图开始工作的脚本的一部分。

谢谢

```
 function add($is_general_media, $title, $description, $allowed_extensions, $display) {
    $db = new db;

    if (User::isAdmin()) { 
        $parentID = $db->sanitize_to_db($parentID);
        $is_general_media = $db->sanitize_to_db($is_general_media);
        $title = $db->sanitize_to_db($title);
        $description = $db->sanitize_to_db($description);
        $allowed_extensions = $db->sanitize_to_db($allowed_extensions);
        $display = ($display == 'grid') ? 'grid' : 'list';
        if (strtolower(get_class($this)) == "mediaarea"); {
             function parentID();{
            $parentID = $this->getID();
            }
        } else {
            $parentID = 0;
        }
        if (!$title) {
            $title = '(Untitled Area)';
        }
        $q = "insert into DarkRoom_Areas (title, description, image_max_width, image_max_height, image_max_thumbnail_width, image_max_thumbnail_height, is_general_media, parent_id, allowed_extensions, display) values ('$title','$description'," . MEDIA_DEFAULT_MAX_WIDTH . "," . MEDIA_DEFAULT_MAX_HEIGHT . "," . MEDIA_DEFAULT_MAX_THUMBNAIL_WIDTH . "," . MEDIA_DEFAULT_MAX_THUMBNAIL_HEIGHT . ",  $is_general_media, $parentID, '$allowed_extensions', '$display')";
        $r = mysql_query($q);
        if ($r) {
            $ma = MediaArea::get(mysql_insert_id());
            return $ma;
        } else {
            $e = new Error();
            $e->add(mysql_error());
            return $e;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T02:02:50.647

除非您遗漏了类声明，否则这似乎是一个普通函数。您只能`$this`在类中使用。尝试查看[有关类的 PHP 文档以](http://www.php.net/manual/en/language.oop5.basic.php)获取更多信息。

另外，这个功能：

```
function parentID();{
    $parentID = $this->getID();
} 
```

无论如何都会引起问题。由于`$this`不在 的范围内`parentID()`，您需要将其作为参数传入，并更改变量名称。

# javascript - 使用 require.js 后如何通过简单的脚本引用访问 jquery 全局命名空间？

> ID：11805328
> 
> 赞同：0
> 
> 时间：2012-08-04T01:56:55.010
> 
> 标签：javascript, jquery

我想编写一个在每个 apge 上运行的脚本——它使用我刚刚加载的 jquery 插件——并在加载所有插件后首先运行它。根据迄今为止的评论，这需要在 Require.js 中定义和运行模块......

我在包含我的 Require.js 代码的 CMS 中有页脚部分，因此：

```
<!-- special version of jQuery with RequireJS built-in -->
script data-main="/addons/shared_addons/themes/base/js/main" src="/addons/shared_addons/themesbase/js/require-jquery.js" type="text/javascript"> /script 
```

...而且我的 main.js 是相当标准的：

```
// urlArgs: "bust=v1"  // for release
require.config({
    urlArgs: "bust=" + (new Date()).getTime(),
    paths: {
        Corner: "/addons/shared_addons/themes/base/js/jquery.corner",
        JQForm: "/addons/shared_addons/themes/base/js/jquery.form",
        Gritter: "/addons/shared_addons/themes/base/js/jquery.gritter.min",
        JQUI: "/addons/shared_addons/themes/base/js/jquery-ui-1.8.21.custom.min",
        TimePicker: "/addons/shared_addons/themes/base/js/jquery.ui.timepicker",
        DateFormat: "/addons/shared_addons/themes/base/js/date.format",
        countdown: "/addons/shared_addons/themes/base/js/jquery.countdown.min",
        JQMustache: "/addons/shared_addons/themes/base/js/jquery-Mustache",
        Mustache: "/addons/shared_addons/themes/base/js/mustache",
        Kendo: "/addons/shared_addons/themes/base/js/kendo.web.min",
        Chosen: "/addons/shared_addons/themes/base/js/chosen.jquery.min",
        EveryPage: "/addons/shared_addons/themes/base/js/another_doc_ready_script"
    }       
});

require([
'jquery', 
'Corner',
'JQForm',
'Gritter',
'JQUI',
'TimePicker',
'DateFormat',
'countdown',
'JQMustache',
'Mustache',
'Kendo',
'Chosen'
],
[ "EveryPage" ],
function($) {
    //run
    $(function() {
        console.log('get everything we could possibly need');
    });
}); 
```

“another_doc_ready_script.js”包含“everypage”模块定义：

```
console.log('here');
define("EveryPage",
        [
        'jquery', 
        'Corner',
        'JQForm',
        'Gritter',
        'JQUI',
        'TimePicker',
        'DateFormat',
        'countdown',
        'JQMustache',
        'Mustache',
        'Kendo',
        'Chosen'
        ],
    function($) {
console.log('in everypage');
$(document).ready(function() { 
    console.log('in everypage doc ready');
        $( "body").removeClass('nodisplay');
    }); // document ready
console.log('leaving everypage');
   }  // function-define-require
); // define-require 
```

编辑：Bergi 的评论使[这](https://stackoverflow.com/questions/4535926/requirejs-and-jquery)更有意义。我已经修改了上面的代码，但它仍然无法正常工作。压缩。纳达。没有控制台日志语句或错误。这必须是一个常见的用法，但我没有找到一个简单的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:08:30.027

从[文档](http://requirejs.org/docs/api.html#define)：

> 模块不同于传统的脚本文件 […]。它可以显式列出其依赖项 […]。
> 
> [那] 允许它们尽可能快地加载，即使是乱序的，但以正确的依赖顺序进行评估。

[§ 1.2.3 节](http://requirejs.org/docs/api.html#defdep)描述了如何定义这样一个具有依赖关系的模块。

# javascript - 如何修改函数内部的全局变量？

> ID：11805331
> 
> 赞同：0
> 
> 时间：2012-08-04T01:58:08.300
> 
> 标签：javascript, variables, global, local

```
x = 10
function lol(){
    x = 5
}
function rofl(){
    alert(x)
} 
```

在`rofl()`功能中，我怎样才能使警报弹出号码`5`？请帮帮我，我太菜鸟了，现在花了 4 个小时来解决这个问题：S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T02:00:30.787

你很近。真的，真的很近。

唯一的问题是您实际上并没有*调用*任何一个函数。这就是你所缺少的：¹

```
lol();
rofl(); 
```

工作演示：http: [//jsfiddle.net/mattball/VsGWe](http://jsfiddle.net/mattball/VsGWe)

* * *

[¹嗯，还有一些分号。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:00:38.233

除了调用函数之外，您无需执行任何操作。您已正确设置它们，但如果您不调用它们，则不会发生任何事情。

```
x = 10
lol();
rofl();

function lol(){
    x = 5
}
function rofl(){
    alert(x)
} 
```

[​现场演示](http://jsfiddle.net/s543q/)

# javascript - Facebook Web 应用程序开发错误

> ID：11805340
> 
> 赞同：10
> 
> 时间：2012-08-04T02:00:38.963
> 
> 标签：javascript, jquery, facebook, google-chrome

我在 chrome 的调试控制台上不断收到以下错误

```
[blocked] The page at https://myURL/canvas ran insecure content from http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css.
[blocked] The page at https://URL/canvas ran insecure content from http://connect.facebook.net/en_US/all.js.
[blocked] The page at https://URL/canvas ran insecure content from http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js. 
```

这些是附加到头部的js脚本

这是一个 facebook 应用程序，它向我自己的服务器发出 GET 请求，这正在工作，只是停止工作，我的代码没有任何变化！我不确定 Facebook 是否阻止了我的请求。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-04T02:23:05.567

当通过 HTTPS 加载主页（在您的情况下是您的 Facebook 应用程序）时，通过 HTTP 在其他域上加载脚本和其他外部资源（例如图像）时会发生这些错误。

查看应用程序的代码，调用外部脚本时使用协议相对 URL。例如，而不是这个：

```
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css"> 
```

做这个：

```
<script src="//connect.facebook.net/en_US/all.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css"> 
```

编辑：请注意，如果在样式表上使用协议相对 URL，IE7 和 IE8 将下载两次： http: [//paulirish.com/2010/the-protocol-relative-url/](http://paulirish.com/2010/the-protocol-relative-url/)

# python - 为什么我没有在 python 中收到日志信息消息？

> ID：11805349
> 
> 赞同：4
> 
> 时间：2012-08-04T02:02:58.637
> 
> 标签：python, logging, command-line

所以我从命令行 python 运行以下代码：

```
import logging

rootLog = logging.getLogger(__name__)
rootLog.setLevel(logging.INFO)
rootLog.warning("This is a root warning")
rootLog.info("This is root info")
def info():
    log = rootLog.getChild("info")
    log.info("This is info")
    log.warning("This is a warning")
info() 
```

我希望在控制台上看到所有四个日志消息，但我只看到警告。到底是怎么回事？我是不是误会了什么？

编辑：

我通过在脚本开头添加 logging.basicConfig() 发现我会得到我期望的输出。这很奇怪，因为有关日志记录的 python 文档指出：

> 如果没有为根记录器定义处理程序，函数`debug()`、`info()`、和将自动调用。`warning()``error()``critical()``basicConfig()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T03:46:21.637

好的，我仔细研究了日志记录模块中的代码，我想我想通了，至少部分想通了。您所看到的正在发生，因为您所调用`rootLogger`的实际上不是根记录器。确实，当您直接调用其中一个日志方法时，如果没有将处理程序添加到根记录器（真正的根记录器）`logging`，它会调用实际上根本没有打电话。无论如何，这在这种情况下实际上是无关紧要的。:) 我不确定在这里调用的处理程序是在哪里创建的，但我几乎可以保证它已附加到真正的根记录器。真正的根记录器默认初始化为. 尝试做`basicConfig``Logger``basicConfig``WARNING``logging.root.setLevel(logging.INFO)`看看你是否得到你所期望的。如果您手动将记录器附加到您的`rootLogger`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T04:10:25.850

您从手册中引用的位在[模块级功能](http://docs.python.org/library/logging.html#module-level-functions)下，仅适用于模块功能

```
 logging.debug() 
```

字面意思是这样称呼的。由于您正在调用带有`rootLog.info()`basicConfig 的实例方法，因此不会为您调用，并且您可能正在与空记录器交谈。那里的文档有点混乱。

使用`loggging.basicConfig()`和事情应该工作。

# html - 向左飘浮; 与显示：内联；与显示：内联块；与显示：表格单元格；

> ID：11805352
> 
> 赞同：282
> 
> 时间：2012-08-04T02:04:07.557
> 
> 标签：html, css, css-float

## 我的问题

1.  专业网页设计师是否喜欢这些方法中的任何一种？

2.  绘制网站时，Web 浏览器是否首选这些方法？

3.  这一切都只是个人喜好吗？

4.  我还缺少其他技术吗？

*注意：以上问题与设计多列布局有关*

* * *

## 向左飘浮;

[http://jsfiddle.net/CDe6a/](http://jsfiddle.net/CDe6a/)

![浮动：左图](../Images/eabc3792cc8752a064710ba168e154c5.png)

这是我在创建列布局时经常使用的方法，它似乎工作得很好。父母确实会自行崩溃，因此您只需要`clear:both;`事后记住即可。*我刚刚*发现的另一个问题是无法垂直对齐文本。

## 显示：内联；

这似乎纠正了折叠父项的问题，但增加了空格。

[http://jsfiddle.net/CDe6a/1/](http://jsfiddle.net/CDe6a/1/)

![显示：内嵌图像](../Images/900792a91f41ca39a7a77dd0c8e1bc62.png)

从 html 中删除空格似乎是解决此问题的最简单方法，但如果您对 html 真的很挑剔，则不需要。

[http://jsfiddle.net/CDe6a/2/](http://jsfiddle.net/CDe6a/2/)

![没有 html 空白图像](../Images/0c5dcf93650d26adb450d5f3b6a8cda3.png)

## 显示：内联块；

似乎表现得一模一样`display:inline;`。

[http://jsfiddle.net/CDe6a/3/](http://jsfiddle.net/CDe6a/3/)

![显示：内联块图像](../Images/900792a91f41ca39a7a77dd0c8e1bc62.png)

## 显示：表格单元格；

[http://jsfiddle.net/CDe6a/4/](http://jsfiddle.net/CDe6a/4/)

![显示：表格单元格图像](../Images/a7ec53b3915ccd28168fe9bec7af56cf.png)

完美运行。

## 我的想法：

我确定我错过了很多东西，比如某些会破坏布局的异常，但`display:table-cell;`似乎效果最好，我想我会开始替换`float:left;`，因为我似乎总是把`clear:both;`. 我在网上阅读了很多关于这方面的文章和博客，但没有一个给出明确的答案，告诉我在布局我的网站时应该使用什么。

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2012-08-06T06:46:23.547

**在您询问的选项中：**

*   `float:left;`
    我不喜欢浮动，因为需要有额外的标记来清除浮动。就我而言，整个`float`概念在 CSS 规范中设计得很糟糕。不过，我们现在对此无能为力。但重要的是它确实有效，并且适用于所有浏览器（甚至 IE6/7），所以如果你喜欢它就使用它。

如果您使用选择器清除浮动，则可能不需要额外的清除标记`:after`，但如果您想支持 IE6 或 IE7，则这不是一个选项。

*   `display:inline;`
    这不应该用于布局，除了 IE6/7，它`display:inline; zoom:1`是对`inline-block`.

*   `display:inline-block;`
    这是我最喜欢的选择。它在所有浏览器中都运行良好且始终如一，但需要注意的是 IE6/7，它支持某些元素。但是请参阅上面的hacky解决方案来解决这个问题。

另一个重要的警告`inline-block`是，由于内联方面，元素之间的空白被视为与文本单词之间的空白相同，因此您可以在元素之间出现间隙。有解决方法，但没有一个是理想的。（最好的就是元素之间没有任何空格）

*   `display:table-cell;`
    另一个您会遇到浏览器兼容性问题的问题。较旧的 IE 根本无法使用它。但即使对于其他浏览器，值得注意的是，它`table-cell`被设计用于在样式为`table`和的元素内部的上下文中使用`table-row`；单独使用`table-cell`不是这样做的预期方式，因此您可能会遇到不同的浏览器以不同的方式对待它。

**您可能错过的其他技术？是的。**

*   由于您说这是用于多列布局，因此您可能想了解[CSS Columns 功能。](http://www.quirksmode.org/css/multicolumn.html)然而，它不是最受支持的功能（即使在 IE9 中，IE 也不支持，并且所有其他浏览器都需要供应商前缀），因此您可能不想使用它。但这是另一种选择，你确实问过。

*   还有 CSS FlexBox 功能，旨在让您的文本在框之间流动。这是一个令人兴奋的功能，它允许一些复杂的布局，但这仍处于开发阶段——请参阅[http://html5please.com/#flexbox](http://html5please.com/#flexbox)

希望有帮助。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-08-06T06:13:43.647

我通常使用`float: left;`and add`overflow: auto;`来[解决折叠父级问题](http://jsfiddle.net/CDe6a/8/)（至于为什么这样做，`overflow: auto`如果你不给它明确的高度，它将扩展父级而不是添加滚动条，`overflow: hidden`也可以）。我的大部分垂直对齐需求都是针对[菜单栏中的一行文本](http://jsfiddle.net/CDe6a/9/)，可以使用`line-height`属性来解决。如果我真的需要垂直对齐一个块元素，我会在父元素和垂直对齐的项目上设置一个明确的高度、绝对位置、前 50% 和负边距。

我不使用的原因`display: table-cell`是当您拥有超过网站宽度可以处理的项目时它会溢出的方式。table-cell 将强制用户水平滚动，而浮动将包裹溢出菜单，使其无需水平滚动仍可使用。

float: left 和 overflow: auto 最好的一点是它可以在没有 hack 的情况下一直运行到 IE6，甚至可能更远。

![在此处输入图像描述](../Images/629561f9ec7835424cde9eaf7ee1e0ef.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-06T05:16:40.347

我会说这取决于您需要它的用途：

1.  如果您只需要它来获得 3 列布局，我建议您使用`float`.

2.  如果您需要它作为菜单，您可以使用`inline-block`. [对于空格问题，您可以使用 Chris Coyier 在此处http://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)描述的一些技巧。

3.  如果您需要进行多项选择，并且宽度需要在指定的框中均匀分布，那么我更喜欢`display: table`. 这在某些浏览器中无法正常工作，因此取决于您的浏览器支持。

最后，最好的方法是使用`flexbox`. 这个规范已经改变了几次，所以它还不稳定。但是一旦完成，这将是我认为最好的方法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-04T02:39:18.233

我更喜欢 inline-block，虽然 float 也很有用。旧 IE 无法正确呈现表格单元格（内联块也不正确，但`zoom: 1; *display: inline`我经常使用这种 hack）。如果你的孩子的身高比他们的父母小，浮动会把他们带到顶部，而内联块有时会搞砸。

大多数时候，浏览器会正确解释所有内容，当然，除非是 IE。您总是必须检查以确保 IE 不糟糕——例如，表格单元的概念。

实际上，是的，这归结为个人喜好。

您可以用来消除空白的一种技术是将 a 设置`font-size`为 0 给父级，然后将其`font-size`返回给子级，尽管这很麻烦，而且很恶心。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-10-07T09:25:02.913

仅作记录，添加到 Spudley 的答案中，`position: absolute`如果您知道列宽，还可以使用和边距。

对我来说，选择方法时的主要问题是您是否需要列来填充整个高度（等高），其中 table-cell 是最简单的方法（如果您不太关心旧浏览器）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-13T10:43:01.187

我更喜欢`inline-block`，但`float`仍然是组合 HTML 元素的有用方法，特别是当我们有一个应该粘在左边和一个应该粘在右边的元素时，浮动在写更少的行时工作得更好，而 inline-block 在许多其他情况下工作得很好.

[![在此处输入图像描述](../Images/9357865470a3031fa578d6f235e3edb3.png)](https://i.stack.imgur.com/D9ULC.jpg)

# ruby-on-rails - rails 响应本地开发的跨域请求，spotify 应用程序开发

> ID：11805353
> 
> 赞同：1
> 
> 时间：2012-08-04T02:04:22.693
> 
> 标签：ruby-on-rails, ruby, api, cross-domain, spotify

所以我在开发一个 spotify 应用程序，试图让它与我的本地 Rails 应用程序 API 对话。当我尝试时，除了 req.status 0 之外，我什么也得不到。

我认为这可能是 spotify manifest.json 文件的问题，不允许 port:3000 继续您在所需权限中设置的 url，但它还在他们的文档中说明了以下内容。

[https://developer.spotify.com/technologies/apps/tutorial/](https://developer.spotify.com/technologies/apps/tutorial/)

> 如果您需要与外部 Web API 交谈，我们欢迎您，只要您遵守集成指南中设置的规则。请注意，当与 Web API 交谈时，请求将来自源 sp://$APPNAME（我们的示例中是 sp://tutorial）——确保您正在与之交谈的服务接受来自此类源的请求。

所以，我不确定 rails 是否设置为不允许这种事情，或者是否将端口放入所需的权限有问题，但我的请求

```
 var req = new XMLHttpRequest();
  req.open("GET", "http://127.0.0.1:3000/api/spotify/track/1.json", true);
  console.log(req);
  req.onreadystatechange = function() {

  console.log(req.status);
  console.log(req.readyState);
  if (req.readyState == 4) {
    if (req.status == 200) {
       console.log("Search complete!");
       console.log(req.responseText);
    }
    }
};

req.send(); 
```

总是返回状态 0 作为他们的例子：

```
var req = new XMLHttpRequest();
req.open("GET", "http://ws.audioscrobbler.com/2.0/?method=geo.getevents&location=" + city + "&api_key=YOUR_KEY_HERE", true);

req.onreadystatechange = function() {

    console.log(req.status);

    if (req.readyState == 4) {
      console.log(req);           
        if (req.status == 200) {
            console.log("Search complete!");
            console.log(req.responseText);
        }
    }
};

req.send(); 
```

至少会返回 403 响应。好像没有提出请求或其他什么？

有人知道会发生什么吗？

非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T09:40:35.523

When talking to external services from a Spotify App, even if they're running on your local machine, you need to make sure that two things are in place correctly:

*   The URL (or at least the host) is in the `RequiredPermissions` section of your manifest. Port doesn't matter. `http://127.0.0.1` should be fine for your case.

*   The server is allowing the `sp://your-app-id` origin for requests, as noted in the documentation you pasted in your question. This is done by setting the `Access-Control-Allow-Origin` header in your service's HTTP response. People often set it to `Access-Control-Allow-Origin: *` to allow anything to make requests to their service.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:10:59.417

Thanks for help, I got it figured out, I think it was multiple things, with one main Im an idiot moment for not trying that earlier

First off, I had to run rails on port 80, as obviously if Im accessing my site from 127.0.0.1:3000, thats not going to work if spotify app is requesting 127.0.0.1 unless I can load that directly in the browser, which you cannot unless you run on 80\. That is done via

```
rvmsudo rails server -p 80 
```

Need to use rvmsudo because changing port requires permissions.

Next I had to set access controll allow origin as noted above, that can be done in rails 3 by adding before filter to your app controller as follows.

```
class ApplicationController < ActionController::Base

  logger.info "I SEE REQUEST"

  before_filter :cor

  def cor
    headers["Access-Control-Allow-Origin"] = "*"
    headers["Access-Control-Allow-Methods"] = %w{GET POST PUT DELETE}.join(",")
    headers["Access-Control-Allow-Headers"] = %w{Origin Accept Content-Type X-Requested-With X-CSRF-Token}.join(",")
    head(:ok) if request.request_method == "OPTIONS"
  end
end 
```

Finally, and most importantly (sigh), you cant just righclick and reload your spotify app when you make changes to your manifest file, exit spotify completely and restart it!

# r - geom_point：将具有最高值的重叠点放在其他点之上

> ID：11805354
> 
> 赞同：5
> 
> 时间：2012-08-04T02:04:41.923
> 
> 标签：r, ggplot2, visualization

我正在使用`geom_point`where `y = var1`、`x = year`和可视化面板数据集`color = var2`。问题是有很多重叠点，即使有水平抖动。

减小点大小或设置较低的 alpha 值是不可取的，因为两者都会减少第二个变量的视觉影响，该变量具有非常长的右偏斜。我希望 ggplot 将具有最高值的点`var2`放在所有其他重叠点之上。

可重现的例子：

```
df <- data.frame(diamonds)

ggplot(data = df,aes(x=factor(cut),y=carat,colour=price)) + 
  geom_point(position=position_jitter(width=.4))+
  scale_colour_gradientn(colours=c("grey20","orange","orange3")) 
```

如何将具有最高值的点`df$price`放在重叠的一堆点的顶部？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T02:36:49.543

看起来好像按照数据的顺序绘制了网格图，

```
library(grid)

d <- data.frame(x=c(0.5,0.52),y=c(0.6,0.6), fill=c("blue","red"),
                stringsAsFactors=FALSE)

grid.newpage()
with(d,grid.points(x,y,def='npc', pch=21,gp=gpar(cex=5, fill=fill)))
with(d[c(2,1),], grid.points(x,y-0.2,def='npc', pch=21,
                             gp=gpar(cex=5, fill=fill))) 
```

所以我建议你先重新排序你的data.frame，并祈祷ggplot2不会弄乱它:)

```
library(ggplot2)
library(plyr)
df <- diamonds[order(diamonds$price, decreasing=TRUE), ]
# alternative with plyr
df <- arrange(diamonds, desc(price))
last_plot() %+% df 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-29T03:20:52.333

在 ggplot2 中，您可以使用[order 美学](http://docs.ggplot2.org/current/aes_group_order.html)来指定绘制点的顺序。最后绘制的将出现在顶部。要应用这一点，请创建一个变量来保存您希望绘制点的顺序；在您的情况下，您可能可以指定`rank(var2)`.

对于可重现的示例，将最高的点`df$price`放在顶部：

```
df <- data.frame(diamonds)
df$orderrank <- rank(df$price,ties.method="first")

ggplot(data = df,aes(x=factor(cut),y=carat,colour=price, order=orderrank)) + 
  geom_point(position=position_jitter(width=.4))+
  scale_colour_gradientn(colours=c("grey20","orange","orange3")) 
```

以下是问题中的示例与按价格指定绘图顺序的图表之间的输出差异：

![无序和有序图的比较](../Images/baa13bb01c688c7f6065e509fc2238aa.png)

（抖动使比较不太清楚，但仍然存在差异。）

# android - 适用于 Android/iPhone 的图形

> ID：11805355
> 
> 赞同：0
> 
> 时间：2012-08-04T02:04:46.360
> 
> 标签：android, iphone, smartphone

我正在制作一个图解说明，说明如何使用 Android/iPhone 所需的应用程序

我对 Android 编码不太感兴趣，虽然客户只需要插图，但他问：

“我们需要将插图保存到可以在移动设备（iPhone/Android）上运行的文件以及源代码中。”

jpg还不够吗？你的android程序员知道一些额外的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T02:16:36.363

不，在 Android 中，您可以只使用[Drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html)。这可以是多种不同的文件格式，包括您的 jpeg。看看[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)可能会很好。使用此工具，您可以获得适用于所有不同屏幕密度的精美 zip 文件。如果您保留资产工作室输出的文件结构，那么 Android 将为您完成所有繁重的工作。

它还可以帮助您了解有关[9-patches 的](http://developer.android.com/tools/help/draw9patch.html)一些信息。这就是 Android 知道如何调整和拉伸图像的方式。Asset Studio 也有一个选项来设置它。

# go - 文本/模板问题 Parse() 与 ParseFiles()

> ID：11805356
> 
> 赞同：6
> 
> 时间：2012-08-04T02:04:46.417
> 
> 标签：go, go-templates

我正在尝试使用 text/template 包做一些简单的工作。[模板](http://golang.org/pkg/text/template/)顶部给出的示例是我正在使用的。

如何编写“解析”文件以便`template.ParseFiles()`正确读取和执行它？

```
package main

import (
    "text/template"
    "os"
)

type Inventory struct {
    Material string
    Count    uint
}

func main() {
    sweaters := Inventory{"wool", 17}
    tmpl, err := template.New("test").Parse("{{.Count}} items are made of {{.Material}}")
    // tmpl, err := template.New("test").ParseFiles("file.txt")

    if err != nil { panic(err) }
    err = tmpl.Execute(os.Stdout, sweaters)
    if err != nil { panic(err) }
}

/*
Contents of file.txt:
{{.Count}} items are made of {{.Material}}

Error thrown:
panic: template: test:1: "test" is an incomplete or empty template

goroutine 1 [running]:
main.main()
    /tmp/templates/t.go:19 +0x21a

goroutine 2 [syscall]:
created by runtime.main
    /var/tmp/portage/dev-lang/go-1.0.1/work/go/src/pkg/runtime/proc.c:221
*/ 
```

我在[此处的 golang 操场上发布了此代码的副本](http://play.golang.org/p/C3oTaFFRmp)

编辑＃1：我一直在对这个问题进行一些研究......因为它`Execute()`是实际引发异常的方法，而不是`ParseFiles()`部分，我检查了方法定义：

```
// Execute applies a parsed template to the specified data object,
// and writes the output to wr.
func (t *Template) Execute(wr io.Writer, data interface{}) (err error) {
    defer errRecover(&err)
    value := reflect.ValueOf(data)
    state := &state{
        tmpl: t,
        wr:   wr,
        line: 1,
        vars: []variable{{"$", value}},
    }
    if t.Tree == nil || t.Root == nil {
        state.errorf("%q is an incomplete or empty template", t.name)
    }
    state.walk(value, t.Root)
    return
} 
```

因此，凭直觉，我将 t.Tree 的值转储为内联“非文件”样式， tmpl is: `&parse.Tree{Name:"test", Root:(*parse.ListNode)(0xf840030700), funcs:[]map[string]interface {}(nil), lex:(*parse.lexer)(nil), token:[2]parse.item{parse.item{typ:6, val:""}, parse.item{typ:9, val:"{{"}}, peekCount:1, vars:[]string(nil)}`，当使用 tmpl 运行时`ParseFiles()`， tmpl is: `(*parse.Tree)(nil)`。我觉得奇怪的是一个是取消引用，一个值是一个指针。这可能有助于解开谜题

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-04T10:03:24.530

```
sweaters := Inventory{"wool", 17}
tmpl, err := template.ParseFiles("file.txt")
if err != nil {
    panic(err)
}
err = tmpl.ExecuteTemplate(os.Stdout, "file.txt", sweaters)
if err != nil {
    panic(err)
} 
```

如果你有很多文件，你可以使用 ParseGlob：

```
tmpl, err := template.ParseGlob("*.txt")
if err != nil {
    panic(err)
}
err = tmpl.ExecuteTemplate(os.Stdout, "file.txt", sweaters)
if err != nil {
    panic(err)
}
err = tmpl.ExecuteTemplate(os.Stdout, "file2.txt", sweaters)
if err != nil {
    panic(err)
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-01-03T08:39:38.990

Go 模板 parseFiles 中有一个小技巧。

```
func parseFiles(t *Template, filenames ...string) (*Template, error) {
    if len(filenames) == 0 {
        // Not really a problem, but be consistent.
        return nil, fmt.Errorf("template: no files named in call to ParseFiles")
    }
    for _, filename := range filenames {
        b, err := ioutil.ReadFile(filename)
        if err != nil {
            return nil, err
        }
        s := string(b)
        name := filepath.Base(filename)
        // First template becomes return value if not already defined,
        // and we use that one for subsequent New calls to associate
        // all the templates together. Also, if this file has the same name
        // as t, this file becomes the contents of t, so
        //  t, err := New(name).Funcs(xxx).ParseFiles(name)
        // works. Otherwise we create a new template associated with t.
        var tmpl *Template
        if t == nil {
            t = New(name)
        }
        if name == t.Name() {
            tmpl = t
        } else {
            tmpl = t.New(name)
        }
        _, err = tmpl.Parse(s)
        if err != nil {
            return nil, err
        }
    }
    return t, nil
} 
```

只有同名的模板会被重用，否则创建一个新的。作为您的样本：

```
tmpl, err := template.New("test").ParseFiles("file.txt") 
```

tmpl 是名为“test”的模板，并关联了另一个名为“file.txt”的模板，您在“test”模板上调用 Execute，该模板是一个空模板，因此会引发错误“测试是一个不完整或空的模板”。

当您将模板名称更改为 file.txt 时，它起作用了

```
tmpl, err := template.New("file.txt").ParseFiles("file.txt") 
```

# android - 选择选项卡后刷新片段

> ID：11805360
> 
> 赞同：0
> 
> 时间：2012-08-04T02:06:40.723
> 
> 标签：android, android-fragments

构建片段后，我会根据本地数据库中的信息构建视图。其他选项卡可以修改此信息，当用户选择选项卡时，我希望新信息能够反映。

```
public class RunningTotal extends SherlockFragment {
    public static final String TAG = "Running Total";
    private LinearLayout lv;

    public View onCreateView(LayoutInflater li, ViewGroup vg,
            Bundle savedInstanceState) {
        SalesDataSource sds = BarcodeSaleTracker.SDS;

        ArrayList<Item> items = sds.getAllItems();
        String[] totals = sds.getPersonValues();
        int totalsPosition = 0;
        Log.v(TAG, "Items Length: " + items.size());

        lv = new LinearLayout(this.getActivity());

        String lastPerson = "";

        if (items.size() > 0) {
            for (Item i : items) {
                if (lastPerson.equalsIgnoreCase(i.getPerson()) == false) {
                    lastPerson = i.getPerson();
                    TextView tv = (TextView) li.inflate(R.layout.list_title,
                            lv, false);
                    tv.setText(totals[totalsPosition]);
                    totalsPosition++;
                    lv.addView(tv);
                }

                TextView listItem = (TextView) li.inflate(R.layout.list_item,
                        lv, false);
                listItem.setText(i.toString());
                lv.addView(listItem);
            }
        } else {
            TextView noItems = (TextView) li.inflate(R.layout.list_title, lv,
                    false);
            noItems.setText(R.string.no_items);
            lv.addView(noItems);
        }

        return lv;
    }
} 
```

它是一种选项卡式格式，几乎与 Sherlock 示例相同：

```
public class BarcodeSaleTracker extends SherlockFragmentActivity {
    TabHost mTabHost;
    ViewPager mViewPager;
    TabsAdapter mTabsAdapter;

    public static SalesDataSource SDS;

    public BarcodeSaleTracker() {

    }

    protected void onCreate(Bundle savedInstanceState) {
        setTheme(R.style.Sherlock___Theme);
        super.onCreate(savedInstanceState);

        SDS = new SalesDataSource(this);
        SDS.open();

        if (savedInstanceState == null) {
            setContentView(R.layout.fragment_tabs_pager);

            mTabHost = (TabHost) findViewById(android.R.id.tabhost);
            mTabHost.setup();

            mViewPager = (ViewPager) findViewById(R.id.pager);

            mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);

            mTabsAdapter.addTab(mTabHost.newTabSpec("current_sale")
                    .setIndicator("Current Sale"), Current_Sale.class, null);
            mTabsAdapter.addTab(mTabHost.newTabSpec("running_total")
                    .setIndicator("Running Total"), RunningTotal.class, null);
            mTabsAdapter.addTab(
                    mTabHost.newTabSpec("stats").setIndicator("Stats"),
                    CountingFragment.class, null);
        } else {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
        }
    } 
```

我只是不知道*如何*与 RunningTotal 沟通它需要自我更新。

**编辑**添加了我从数据库中询问的所有数据的来源

```
public class SalesDataSource {
    private SQLiteDatabase database;
    private DatabaseHelper dbHelper;
    private String[] allColumns = { DatabaseHelper.COLUMN_ID,
            DatabaseHelper.COLUMN_PERSON, DatabaseHelper.COLUMN_COST,
            DatabaseHelper.COLUMN_ITEM };

    public SalesDataSource(Context context) {
        dbHelper = new DatabaseHelper(context);
    }

    public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
    }

    public void close() {
        dbHelper.close();
    }

    /**
     * Creates an entry in the Database. Both a person and a cost are required.
     * Item is not required. If one is not needed, simply pass null.
     * 
     * @param person
     *            Who this sale belongs to.
     * @param cost
     *            The amount (in pennies) that the sale was.
     * @param item
     *            An optional description of the sold item
     * @return The newly created Item.
     */
    public Item addItem(String person, int cost, String item) {
        ContentValues values = new ContentValues();

        values.put(DatabaseHelper.COLUMN_PERSON, person);
        values.put(DatabaseHelper.COLUMN_COST, cost);
        values.put(DatabaseHelper.COLUMN_ITEM, item);

        long insertId = database.insert(DatabaseHelper.TABLE_SALES, null,
                values);

        Cursor cursor = database.query(DatabaseHelper.TABLE_SALES, allColumns,
                DatabaseHelper.COLUMN_ID + " = " + insertId, null, null, null,
                null);

        cursor.moveToFirst();
        Item rv = cursorToItem(cursor);
        cursor.close();

        return rv;
    }

    public void addItems(List<Item> items) {
        for (Item i : items) {
            ContentValues values = new ContentValues();

            values.put(DatabaseHelper.COLUMN_PERSON, i.getPerson());
            values.put(DatabaseHelper.COLUMN_COST, i.getAmount());
            values.put(DatabaseHelper.COLUMN_ITEM, i.getItem());

            database.insert(DatabaseHelper.TABLE_SALES, null, values);
        }
    }

    public ArrayList<Item> getAllItems() {
        ArrayList<Item> items = new ArrayList<Item>();

        Cursor cursor = database.query(DatabaseHelper.TABLE_SALES, allColumns,
                null, null, null, null, DatabaseHelper.COLUMN_PERSON);

        cursor.moveToFirst();

        while (!cursor.isAfterLast()) {
            Item item = cursorToItem(cursor);
            items.add(item);
            cursor.moveToNext();
        }

        cursor.close();

        return items;
    }

    public String[] getPersonValues() {
        Cursor cursor = database.query(DatabaseHelper.TABLE_SALES,
                new String[] { "SUM(" + DatabaseHelper.COLUMN_COST + ") AS " + DatabaseHelper.PERSON_SUM,
                        DatabaseHelper.COLUMN_PERSON }, null, null,
                DatabaseHelper.COLUMN_PERSON, null, null);
        String[] rv = new String[cursor.getCount()];

        cursor.moveToFirst();
        int pos = 0;
        while (!cursor.isAfterLast()) {
            String person = cursor.getString(1);
            String money = Item.format(cursor.getInt(0));
            rv[pos++] = person + ": " + money;
            cursor.moveToNext();
        }

        cursor.close();

        return rv;
    }

    public Item getMaxSale() {
        Cursor cursor = database.query(DatabaseHelper.TABLE_SALES,
                new String[] { "MAX(" + DatabaseHelper.COLUMN_COST + ") AS " + DatabaseHelper.MAX_SALE,
                        DatabaseHelper.COLUMN_PERSON }, null, null, null, null,
                null);

        cursor.moveToFirst();

        Item rv = cursorToItem(cursor);
        cursor.close();
        return rv;

    }

    public Item getMinSale() {
        Cursor cursor = database.query(DatabaseHelper.TABLE_SALES,
                new String[] { "MIN(" + DatabaseHelper.COLUMN_COST + ") AS " + DatabaseHelper.MIN_SALE,
                        DatabaseHelper.COLUMN_PERSON }, null, null, null, null,
                null);

        cursor.moveToFirst();

        Item rv = cursorToItem(cursor);
        cursor.close();
        return rv;

    }

    private Item cursorToItem(Cursor cursor) {
        Item item = new Item();

        item.setId(cursor.getLong(0));
        item.setPerson(cursor.getString(1));
        item.setAmount(cursor.getInt(2));
        item.setItem(cursor.getString(3));

        return item;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:18:47.260

为什么不使用 listfragment 和 loadermanager 来管理游标对象，以便在底层数据更改时自动更新列表？

# google-app-engine - 回滚失败情况的变化

> ID：11805362
> 
> 赞同：0
> 
> 时间：2012-08-04T02:07:16.340
> 
> 标签：google-app-engine

我有一种情况，我们更新实体数据，然后根据某些类型的更新，我们也可能更新另一个实体。

在某些情况下，第二个条目中的更新可能由于某些原因而失败并引发异常。

问题是如何处理这种情况，因为我们想回滚在第一个实体中所做的更改。

我们不能将更新推迟到第一个条目，直到第二个条目更新。

在目前的情况下，如果发生这种情况

一旦代码到达下面的块，即使第二次实体更新失败，它也会提交第一个条目更改。那么如何回滚呢？如果第二个实体更新失败，我认为不关闭persistentManager 不是正确的选择。

```
finally {
            try {
                if (pm != null && pm.isClosed() == false )
                    pm.close();
            } catch (Exception e) {
                log.severe("Exception in finally of execute of updateDonor");
                log.severe("Exception class is :" + e.getClass().getName());
                log.severe("Exception is :" + e.getMessage());
                throw new Exception(e.getMessage()
                        + "Unable to close persistence manager");
            }
            log.info("end of updateDonor");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:19:21.953

我不确定我是否完全了解您的情况，但[跨组](https://developers.google.com/appengine/docs/java/datastore/overview#Cross_Group_Transactions)(XG) 交易（允许将交易应用于多个实体组中的实体）会是您正在寻找的吗？[在此页面](https://developers.google.com/appengine/docs/java/datastore/transactions#Using_Transactions)上也搜索“跨组交易” 。对于 XG 事务，事务包含的实体的所有更改都会通过，或者不通过。

# node.js - expressjs app.VERB 调用中的 next() 和 next('route') 有什么区别？

> ID：11805371
> 
> 赞同：56
> 
> 时间：2012-08-04T02:08:57.850
> 
> 标签：node.js, express

文档内容如下：

> app.VERB() 方法在 Express 中提供路由功能，其中 VERB 是 HTTP 动词之一，例如 app.post()。可以给出多个回调，所有回调都被平等对待，并且表现得就像中间件一样，除了一个例外，这些回调可能会调用 next('route') 来绕过剩余的路由回调。此机制可用于在路由上执行先决条件，然后在没有理由继续匹配路由时将控制权传递给后续路由。

“绕过剩余的路由回调”是什么意思？我知道这`next()`会将控制权传递给下一个匹配的路线。但是......什么功能会得到控制`next('route')`......？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-08-04T02:16:08.313

当我在 5 分钟后回答我自己的问题时，我讨厌它。 `next('route')`是在使用路由中间件的时候。因此，如果您有：

```
app.get('/forum/:fid', middleware1, middleware2, function(){
  // ...
}) 
```

函数 middleware1() 有机会调用`next()`以将控制权传递给 middleware2，或者`next('route')`将控制权完全传递给下一个匹配的路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-27T11:18:00.707

给定的答案解释了它的主要要点。可悲的是，它远没有你想象的那么直观，当它与参数结合使用时有很多特殊情况。只需查看[app.param 测试文件中的一些测试用例](https://github.com/expressjs/express/blob/master/test/app.param.js)。举两个例子：

1.  [app .param(name, fn) 应该推迟所有参数路由](https://github.com/expressjs/express/blob/master/test/app.param.js#L281)，这意味着如果`next("route")`从处理程序调用`param`，它将跳过引用该`param`处理程序自己的参数名称的所有后续路由。在该测试用例中，它会跳过所有引用该`id`参数的路由。
2.  [app .param(name, fn) 应该在使用“next”时值不同时调用，](https://github.com/expressjs/express/blob/master/test/app.param.js#L337)这表明前面的规则还有另一个例外：如果参数的值在路由之间发生变化，则不要跳过。

……还有更多……

我确信这种`next('route')`杠杆有一个用例，但是，我同意之前的评论，因为它确实使事情变得复杂且不直观。

# cocoa - 如何编写在沙盒应用程序中使用 NSWorkSpace 的 showSearchResultsForQueryString 的权利？

> ID：11805374
> 
> 赞同：0
> 
> 时间：2012-08-04T02:09:30.947
> 
> 标签：cocoa, sandbox

我制作了一个调用`NSWorkspace`'s 的沙盒应用程序，`showSearchResultsForQueryString`但这种方法不起作用。我猜这个错误可能与授权密钥有关，但我找不到答案。如何为此实施权利密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:16:57.530

该方法不适用于沙盒应用程序。它向 Finder 发送一个 Apple 事件。

查看沙盒设计指南中的此链接：

[确定您的应用程序是否适合沙盒](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/DesigningYourSandbox/DesigningYourSandbox.html)

您将看到以下文本：

> *使用 App Sandbox，您可以接收 Apple 事件并响应 Apple 事件，但您不能将 Apple 事件发送到任意应用程序。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:03:29.000

此方法不能用于沙盒应用程序。因为这个方法应该固定在未来的沙盒应用程序中运行。

# javascript - 将评论中的 URL 解析为链接

> ID：11805375
> 
> 赞同：0
> 
> 时间：2012-08-04T02:10:28.927
> 
> 标签：javascript, ruby-on-rails, security

我正在 Rails 中建立自己的博客。我想做的一件事是将评论中的网址转换为实际链接。

我不确定如何在不打开页面进行注入的情况下执行此操作。

是否有一个库/插件（或我没有想到的技术）可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T02:13:43.523

显然在 Rails 3.1+ 中有一个宝石可以做到这一点`rails_autolink`

此线程中的更多信息： [替换 Ruby on Rails 3.1 中的“auto_link”方法](https://stackoverflow.com/questions/6418710/replacing-the-auto-link-method-in-ruby-on-rails-3-1) [https://github.com/tenderlove/rails_autolink](https://github.com/tenderlove/rails_autolink)

如果是 Rails 3.0 及以下版本，请使用`auto_link`此处解释的帮助程序： [Convert plain text URLs to HTML hyperlinks in Ruby on Rails?](https://stackoverflow.com/questions/3095230/convert-plain-text-urls-to-html-hyperlinks-in-ruby-on-rails)

# c# - 在他的计算机上出现 SQL 语法错误，但在我的计算机上却没有？

> ID：11805379
> 
> 赞同：0
> 
> 时间：2012-08-04T02:11:10.213
> 
> 标签：c#, mysql, sql, syntax

我正在开发一个应用程序，它不时执行查询以从我的 MySQL 数据库中检索数据。我最近请一个朋友试一试，以检查它是否正常工作……显然不能。它始于他的应用程序在启动后立即停止响应。我想我们必须以某种方式对其进行调试，所以我将 Program.cs 中的 Main() 方法包装在 try..catch 语句中。返回错误“”您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在第 1 行“”附近使用的正确语法。现在我已将此错误缩小到两个可能的查询。他们来了：

查询一：

```
"SELECT COUNT(*) FROM " + newsTable + " ;" 
```

newsTable 包含：新闻

查询 2：

```
"SELECT " + newsTitle + ", " + newsAuth + " FROM " + newsTable + " ORDER BY " + newsID + " DESC LIMIT " + countnews + ", " + countnews + 1 + ";" 
```

它们都包含字符串，除了 countnews 变量包含一个整数。

这一切的奇怪之处在于，当我在我的计算机上启动应用程序时，这个错误从未发生过，但工作得很好。他刚刚更新了 MySQL，我们在同一个 .NET 框架上，4。

我没主意了！

提前致谢，

弗雷德里克

PS：值得注意的是，这两个查询都位于我的表单应用程序的 Main() 方法中。当然它是在 InitializeComponent(); 之后放置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T02:22:09.463

如果您想了解：-为您的 2 个查询而不是 sql 注入创建两个存储过程，为什么？因为： - 存储过程很容易在 MySql 数据库上测试，如果它有效，它可以在任何地方工作 - 尝试使用 c# sql 调试是一个糟糕的 id，就像你的帖子显示它一样挑剔;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:13:45.913

对，所以我又经历了一遍，发现人为因素的缺失又来了。我忘了用 .sql 导出实际的数据，这对我来说真的很迟钝，现在是凌晨 03:00 .. 感谢您尝试帮助我解决这个愚蠢的问题，非常感谢。

弗雷德里克

# php - 使用php绘制流程图

> ID：11805381
> 
> 赞同：0
> 
> 时间：2012-08-04T02:11:48.343
> 
> 标签：php, imagick, flowchart

我想在 web 上使用 php 动态创建可视化流程图。

我尝试使用 iMagick 扩展来绘制矩形、线条等。

但是，我遇到了一个问题，即所有绘图都必须在图像上，这使得我的 html 代码不会出现在屏幕上。

所以我搜索了是否有我可以使用的流程图扩展或功能，但我失败了。

是否有任何流程图制作库/应用程序可以与 php 一起使用以在 web 上动态绘制流程图？

如果没有，有没有办法在我使用 iMagick 扩展创建的图像上方添加纯 html 文本，以便我可以看到我的 html 文本与我使用 iMagick 制作的矩形位于同一位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T02:34:23.390

通常要做的是你有两个文件，一个是页面内容，另一个是图像，然后像普通图像（`<img>`标签）一样嵌入图像。

假设您有 index.php 是您的主页，并且您有 image.php 有您的流程图代码。在 index.php 中，您可以像这样嵌入图像：

```
<img src="image.php" alt="flowchart" /> 
```

# perl - Perl 与 Parallel::ForkManager 和 WWW::Mechanize 一起崩溃

> ID：11805385
> 
> 赞同：1
> 
> 时间：2012-08-04T02:13:00.303
> 
> 标签：perl, parallel-processing, fork, www-mechanize

我编写了一个 Perl 脚本，使用[`WWW::Mechanize`](https://metacpan.org/module/WWW%3a%3aMechanize)它从文本文件中读取 URL 并一一连接到它们。在每个操作中，它都会解析网页的内容，寻找一些特定的关键字，如果找到，则会将其写入输出文件。

为了加快这个过程，我使用[`Parallel::ForkManager`](https://metacpan.org/module/Parallel%3a%3aForkManager)了`MAX_CHILDREN`set to `3`。虽然我观察到速度有所提高，但问题是，一段时间后脚本崩溃了。`Perl.exe`进程被杀死并且它不显示任何特定的错误消息。

我已经多次运行该脚本以查看它是否总是在同一点失败，但是失败点似乎是间歇性的。

请注意，我已经处理了任何内存泄漏，[`WWW::Mechanize`](https://metacpan.org/module/WWW%3a%3aMechanize)如下[`HTML::TreeBuilder::XPath`](https://metacpan.org/module/HTML%3a%3aTreeBuilder%3a%3aXPath)所示：

1.  对于[`WWW::Mechanize`](https://metacpan.org/module/WWW%3a%3aMechanize)，我设置`stack_depth(0)`它不缓存访问页面的历史记录。
2.  [`HTML::TreeBuilder::XPath`](https://metacpan.org/module/HTML%3a%3aTreeBuilder%3a%3aXPath)，完成后我删除根节点。这种方法帮助我解决了另一个类似脚本中的内存泄漏问题，该脚本不使用`fork`.

这是脚本的结构，我这里只提到了相关部分，如果需要更多细节来解决问题，请告诉我：

```
#! /usr/bin/perl

use HTML::TreeBuilder::XPath;
use WWW::Mechanize;
use warnings;
use diagnostics;
use constant MAX_CHILDREN => 3;

open(INPUT,"<",$input) || die("Couldn't read from the file, $input with error: $!\n");
open(OUTPUT, ">>", $output) || die("Couldn't open the file, $output with error: $!\n");

$pm = Parallel::ForkManager->new(MAX_CHILDREN);

$mech=WWW::Mechanize->new();
$mech->stack_depth(0);

while(<INPUT>)
{
chomp $_;
$url=$_;

$pm->start() and next;

$mech->get($url);

if($mech->success)
{
    $tree=HTML::TreeBuilder::XPath->new();
    $tree->parse($mech->content);

    # do some processing here on the content and print the results to OUTPUT file

    # once done then delete the root node

    $tree->delete();
}

$pm->finish();

print "Child Processing finished\n"; # it never reaches this point!

}

$pm->wait_all_children; 
```

我想知道，为什么这个 Perl 脚本在一段时间后总是失败？为了便于理解，我在 fork manager 的完成方法之后添加了一个 print 语句，但是它没有打印出来。我也使用`wait_all_children`了方法，因为根据 CPAN 上模块的文档，它将等待父进程的所有子进程的处理结束。

我不明白为什么`wait_all_children`方法放在循环之外`while`（`for`如文档中所观察到的那样），因为所有处理都发生在循环内。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T02:56:08.947

至于为什么这段代码是用一个带有`start`and`finish`调用的主作业循环编写的，然后是一个`wait_all_children`外部循环。它是这样工作的：

1.  `<INPUT>`父进程在每个循环开始时获取下一个作业。
2.  父进程运行`start`，这导致子进程分叉。此时，您有 2 个进程，每个进程都在完全相同的时间点运行完全相同的代码。3a。父进程点击它`or next`并跳回顶部以读取下一个`<INPUT>`并重新开始该进程。3b。子进程不会命中`or next`并继续运行您提供的代码，直到它命中子进程`finish`退出的位置。
3.  同时，父进程正忙于遍历循环并每次创建一个子进程。在分叉 3 个孩子（或任何你设置的限制）之后，它会阻塞，直到其中一个孩子退出。此时，它会立即产生一个新的孩子（每次都会为每个孩子执行步骤 3b）。
4.  当父级的作业用完时，它会跳出 while 循环（它本身从未运行过任何东西），然后等待所有剩余的子级退出。

正如您所看到的，`finish`调用 after 循环中的任何代码都不会在父级（因为它在循环内之后不做任何事情`or next`）或子级（因为它们在 退出`finish`）中运行。

我从来没有使用过[Parallel::ForkManager](https://metacpan.org/module/Parallel%3a%3aForkManager)，但是`run_on_finished`如果你想在最后放置一个 print 语句，你可以在最后放置一个钩子来运行一些代码。

不过，为了找到问题所在，我建议将所有代码包装在一个或使用[Try::Tiny](https://metacpan.org/module/Try%3a%3aTiny)`start`之间，然后找出错误，看看是否有异常发生在其中。不过，我希望孩子死后会出现这种情况，所以我不确定这是否会有所帮助。`finish``eval``warn``STDERR`

不过，值得一试。这是我在代码中的建议，仅显示我将从中捕获异常的部分：

```
# At the top add
use Try::Tiny;

# Later in your main loop

$pm->start() and next;

try {

    $mech->get($url);

    if($mech->success)
    {
        $tree=HTML::TreeBuilder::XPath->new();
        $tree->parse($mech->content);

        # do some processing here on the content and print the results to OUTPUT file

        # once done then delete the root node

        $tree->delete();
    }
}

catch {
    warn "Bad Stuff: ", $_;
};

$pm->finish(); 
```

这可能有助于向您展示出了什么问题。

如果它没有帮助，您可以尝试移动该`try`块以包含更多程序（就像该行之后的几乎所有程序`use Try::Tiny`），看看这是否说明了任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T03:32:54.970

`$pm->wait_all_children;`函数调用等待“ALL”子进程结束并放置阻塞锁。我不确定你`$mech`在`if()`语句中做了什么样的错误处理，但你可能想重新访问它。

# html - 从 VBA 中的 HTML 源获取数据（excel）

> ID：11805389
> 
> 赞同：0
> 
> 时间：2012-08-04T02:14:08.160
> 
> 标签：html, string, vba, excel

我正在尝试从网站收集数据，一旦源为字符串形式，这些数据应该是可管理的。环顾四周，我收集了一些可能的解决方案，但都遇到了问题：

1.  使用 InternetExplorer.Application 打开 url 然后访问内部 HTML
2.  网内
3.  使用 Shell 命令运行 wget

以下是我遇到的问题：

1.  当我将 innerHTML 存储到一个字符串中时，它不是整个源，只是一小部分
2.  ActiveX 不允许创建 Inet 对象（错误 429）
3.  我已将 htm 放入计算机上的文件夹中，如何将其放入 VBA 中的字符串中？

代码 1：

Sub getData() Dim url As String, ie As Object, state As Integer Dim text As Variant, startS As Integer, endS As Integer

```
Set ie = CreateObject("InternetExplorer.Application")
ie.Visible = 0

url = "http://www.eoddata.com/stockquote/NASDAQ/AAPL.htm"
ie.Navigate url

state = 0
Do Until state = 4
    DoEvents
    state = ie.readyState
Loop

text = ie.Document.Body.innerHTML
startS = InStr(ie.Document.Body.innerHTML, "7/26/2012")
endS = InStr(ie.Document.Body.innerHTML, "7/25/2012")

text = Mid(ie.Document.Body.innerHTML, startS, endS - startS)

MsgBox text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:34:30.830

如果我试图从该页面的 08/10/12 拉低开盘价，这与我假设你正在做的类似，我会做这样的事情：

```
 Set ie = New InternetExplorer
    With ie
        .navigate "http://eoddata.com/stockquote/NASDAQ/AAPL.htm"
        .Visible = False
        While .Busy Or .readyState <> READYSTATE_COMPLETE
           DoEvents
        Wend
        Set objHTML = .document
        DoEvents
    End With
    Set elementONE = objHTML.getElementsByTagName("TD")
    For i = 1 To elementONE.Length
        elementTWO = elementONE.Item(i).innerText           
        If elementTWO = "08/10/12" Then
            MsgBox (elementONE.Item(i + 1).innerText)
            Exit For
        End If
    Next i
    DoEvents
    ie.Quit
    DoEvents
    Set ie = Nothing 
```

您可以修改它以通过 HTML 运行并提取您想要的任何数据。迭代 +2 将返回高价等。

由于该页面上有很多日期，您可能还希望检查它是否在最近的日终价格和公司简介之间。

# logging - 基于设备 MAC/IP 的 log4j 日志记录

> ID：11805392
> 
> 赞同：1
> 
> 时间：2012-08-04T02:15:00.413
> 
> 标签：logging, log4j, mdc

我有一个 Java API 库。该库旨在测试设备的功能。后来这些库被公开为 web 服务，以便非 java 程序也可以访问它。我有一个包含 bean 和依赖库的 EAR，这个 EAR 部署到 weblogic 服务器中。

同时，我们正在为来自多个代理机器的多个设备以及来自库并在 weblogic 控制台日志文件中捕获的所有日志测试这些 web 服务。我已经在 weblogic 服务器中配置了 log4j。现在我面临的问题是，我无法区分这些日志来自哪些设备/IP。

根据设备 MAC/IP 识别日志的更好方法是什么？我用谷歌搜索并得到了 log4j MDC 之类的输入，可以用于这个应用程序。由于我没有编写任何 servlet，我不确定是否可以继续使用 MDC。

请指导我选择配置每个 MAC/IP 日志的最佳方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:23:20.773

MDC/NDC 不依赖于 servlet；在 javadoc 中提到它们的事实只是为了展示一个示例。您可以在任何 Java 应用程序中使用它。

MAC/IP 对 Web 服务不可见，因此您必须将其作为 Web 服务消息的一部分显式发送。完成后，在处理程序方法中，调用

```
NDC.push("127.0.0.1"); // example IP obtained from the web service
MDC.put("IP", "127.0.0.1"); 
```

并在各自`%x`的.`%X{IP}``PatternLayout`

# c++ - 如何在其值可用于常量表达式的类中初始化数组？

> ID：11805393
> 
> 赞同：1
> 
> 时间：2012-08-04T02:15:21.663
> 
> 标签：c++, arrays, c++11, initializer-list, constexpr

我想知道如何在一个类中初始化一个数组，其值可以在常量表达式中使用。这是我的问题的解释：

```
// The goal : initializing an array for a class
// whose values can be used as normal static const
// (as template parameters for example)

class MyClass
{
    public:
        static const unsigned int value = 42; // <- No problem here
        static const unsigned int array[3] = {100, 101, 102}; // <- How to initialize this static const array (with constexpr or metaprogrammation maybe ?)
        template<unsigned int T> inline void f() {std::cout<<"Hello, my value is "<<T<<std::endl;} // <- Simple function for demonstration purposes
        inline void fvalue() {f<value>();} // <- No problem here
        inline void farray() {f<array[1]>();} // <- Big problem here
};
//const unsigned int Class1::array[3] = {100, 101, 102}; // <- If I do this, I will initialize the array but farray() will not compile 
```

在 C++ 2011 中有什么方法可以做到这一点吗？（可能使用 constexpr 或元编程？）

非常感谢 ！

编辑：正如标题指定的那样，我需要`array`成为该类的成员（不是全局数组）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T03:34:18.137

是的，你可以做到`constexpr`..

当它在类中初始化时，使其`constexpr`允许静态成员具有比整数或枚举类型更多的类型。特别是，该成员只需要是文字类型，并且初始化程序中的所有表达式都必须是常量表达式。所以这很好

```
class MyClass
{
    public:
        static constexpr unsigned int array[3] = {100, 101, 102};
        template<unsigned int T> inline void f() {
            std::cout<<"Hello, my value is "<<T<<std::endl;
        } // <- Simple function for demonstration purposes
        inline void farray() {f<array[1]>();}
};

// needs a definition out-of-class too. put it into a .cc file
constexpr unsigned int MyClass::array[3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:15:10.333

万一您想知道元编程示例可能是什么样子，这里有一个示例：

```
#include <iostream>

template<size_t... values>
struct number_list;

template<size_t value, size_t... values>
struct number_list<value, values...>
{
    static const size_t val = value;
    typedef number_list<values...> next;
};

template<size_t index, typename NumList>
struct indexer
{
    static const size_t val = indexer<index - 1, typename NumList::next>::val;
};

template<typename NumList>
struct indexer<0, NumList>
{
    static const size_t val = NumList::val;
};

template<typename NumList>
class MyClass
{
    public:
        template<size_t T> inline void f() 
        {
            std::cout << "Hello, my value is " << T << std::endl;
        }

        inline void farray() {f<indexer<1, NumList>::val>();}
};

int main()
{
        MyClass<number_list<3, 5, 6>> a;
        a.farray();
        return 0;
} 
```

# ruby-on-rails - 如何从另一个控制器捕获 mongoid 验证错误？

> ID：11805396
> 
> 赞同：1
> 
> 时间：2012-08-04T02:16:03.260
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有 2 个控制器： 用户登录成功后，他被重定向到`DocumentsController`，它有一个表单来创建一个像这样的“快速文档”`DashboardController`
`dashboard_path`

```
<%= form_for @document, :html => {:class => 'well'} do |f| %>
      <% if @document.errors.any? %>
        <div id="alert alert-block">
          <div class="alert alert-error">
          <h2>Couldn't create your doc. :(</h2>

          <ul>
          <% @document.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
          </ul>
          </div>
        </div>
      <% end %>
      <label>A lot of fields</label>
      <%= f.text_field :fields %>

      <div class="form-actions">
        <%= f.submit 'Create document', :class => 'btn btn-large' %>
      </div>
    <% end %> 
```

但是当发生异常时（比如用户忘记填写字段），我想显示这些异常，而不仅仅是一个警告说“错误”......实际上，我没有找到一种方法来做到这一点

这是我的仪表板控制器

```
class DashboardController < ApplicationController
  before_filter :authenticate
  def index
    @document = Document.new
  end
end 
```

和我的 DocumentsController

```
class DocumentsController < ApplicationController
  respond_to :json, :html
  def show

  end

  def create
    @document = Document.new(params[:document])
    @document.user = current_user

    if @document.save
      redirect_to dashboard_path, notice: 'Created!'
    else
      flash[:error] = 'Error!'
      redirect_to dashboard_path
    end
  end

end 
```

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:32:51.450

您正确地重定向成功；但是，失败时不应重定向；您需要呈现填写表单的模板。

```
if @document.save
  redirect_to dashboard_path, notice: 'Created!'
else
  render 'dashboard/index'
end 
```

您必须确保索引模板所需的任何变量在documents_controller 的创建操作中可用（您只是呈现索引模板；您没有从仪表板控制器的索引操作运行代码）。以下是相关 Rails 指南的摘录，以澄清：

> 将 render 与 :action 一起使用是 Rails 新手经常感到困惑的原因。指定的操作用于确定要呈现哪个视图，但 Rails 不会在控制器中运行该操作的任何代码。您在视图中需要的任何实例变量都必须在调用渲染之前在当前操作中设置。

更多信息请访问[http://guides.rubyonrails.org/layouts_and_rendering.html#using-render](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)

# vb.net - 使用 VB.Net 将记录添加到 MS Access 数据库

> ID：11805399
> 
> 赞同：1
> 
> 时间：2012-08-04T02:16:25.617
> 
> 标签：vb.net, visual-studio, exception, ms-access

我正在编写一个简单的应用程序来将记录添加到由 MS Access 提供支持的数据库中。以下是我的代码示例。我不确定为什么它不起作用。有什么建议么？

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSave.Click
        Dim dsTable As DataTable
        Dim dsNewRow As DataRow

        dsTable = New DataTable("Customers")
        dsNewRow = dsTable.NewRow()
        CustomersDataSet.Customers.Rows.Add(NameTextBox.Text, AddrTextBox.Text, ZipTextBox.Text, "", "", BalanceTextBox.Text, CreditLimitTextBox.Text, StatusTextBox.Text)

    End Sub 
```

这是我得到的异常的副本：

```
System.Data.ConstraintException was unhandled
  Message=Column 'Name' is constrained to be unique.  Value 'd' is already present.
  Source=System.Data
  StackTrace:
       at System.Data.UniqueConstraint.CheckConstraint(DataRow row, DataRowAction action)
       at System.Data.DataTable.RaiseRowChanging(DataRowChangeEventArgs args, DataRow eRow, DataRowAction eAction, Boolean fireEvent)
       at System.Data.DataTable.SetNewRecordWorker(DataRow row, Int32 proposedRecord, DataRowAction action, Boolean isInMerge, Int32 position, Boolean fireEvent, Exception& deferredException)
       at System.Data.DataTable.InsertRow(DataRow row, Int64 proposedID, Int32 pos, Boolean fireEvent)
       at System.Data.DataRowCollection.Add(Object[] values)
       at IS349_FP_Hill.addCustomer.Button1_Click(Object sender, EventArgs e) in C:\Users\Monty\Documents\IS349-FP-Hill\IS349-FP-Hill\IS349-FP-Hill\addCustomer.vb:line 19
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(ApplicationContext context)
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.OnRun()
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.DoApplicationModel()
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.Run(String[] commandLine)
       at IS349_FP_Hill.My.MyApplication.Main(String[] Args) in 17d14f5c-a337-4978-8281-53493378c1071.vb:line 81
       at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:19:50.313

错误告诉你出了什么问题：

```
Message=Column 'Name' is constrained to be unique.  Value 'd' is already present. 
```

这意味着两件事：

1.  该列设置为只有唯一值（因此您不能有 2 行在每个`Name`字段中具有相同的数据）
2.  该值`d`已经存储在`Name`某处的列中，并且唯一约束不允许您再次添加它。

您必须弄清楚如何删除列上的唯一约束。我不使用 MS Access，所以我帮不上什么忙，但这应该可以帮助您入门：

[http://msdn.microsoft.com/en-us/library/office/bb177883(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb177883%28v=office.12%29.aspx)

我建议您首先处理列出约束或获取完整表模式（[检查此处](https://stackoverflow.com/questions/2013028/how-to-get-table-schema)）...

希望这可以帮助！

祝你好运

# php - 如何订购这个棘手的 PHP 关联数组？

> ID：11805401
> 
> 赞同：1
> 
> 时间：2012-08-04T02:16:39.357
> 
> 标签：php, arrays, associative-array, sorting

如何订购这个棘手的 PHP 关联数组？

我有这个关联数组：

```
Array (
    [4] => 3
    [2] => 4
    [3] => 1
    [6] => 1
    [1] => 1
) 
```

我需要通过具有最高值的键对其进行排序，但我还需要将具有相同值的键保持在其原始顺序中，因此它需要出现：

```
Array (
    [2] => 4
    [4] => 3
    [3] => 1
    [6] => 1
    [1] => 1
    ) 
```

我不能使用 arsort() 因为它会根据键的数字顺序重新排列具有相同值的键，我真的很茫然！有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T02:28:29.973

[natsort](http://www.php.net/manual/en/function.natsort.php)来拯救：

```
$blub = array(4 => 3, 2 => 4, 3 => 1, 6 => 1, 1 => 1);
natsort($blub);
$blub = array_reverse($blub, true);

var_dump($blub); 
```

这将始终输出：

```
array(5) { [2]=> int(4) [4]=> int(3) [3]=> int(1) [6]=> int(1) [1]=> int(1) } 
```

natsort 似乎使用了一种不同的排序算法，幸运的是，当值与 asort 相同时，它保留了顺序。但是请注意，因此 natsort*可能*比其他传统排序功能稍慢。

# html - 两个问题；我的网站无缘无故地增加了它的大小/我的图片链接没有出现

> ID：11805403
> 
> 赞同：-4
> 
> 时间：2012-08-04T02:17:14.990
> 
> 标签：html, css, image, size, hyperlink

我的网站比它应该的大，滚动条不应该出现，就像它们在那里的一个对象，但没有。并且页脚的链接不起作用。只有其中一个，似乎每个都重叠或什么。 [http://justxp.x10.mx/test/](http://justxp.x10.mx/test/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T02:27:11.293

删除`left:111px`in`#footerhighscores` 和 in`#footerstore`删除 `left: 333px;`

`margin: 0 auto;`并 添加 `#footerstore`

你已经根据屏幕的宽度设置了位置**不要这样做**尝试使中心浮动布局

在您的网站中存在重大设计问题 您没有正确设置位置 您`footer`和`front`div 上存在很多问题 尝试使用[firebug](https://getfirebug.com/)和 [Mozilla Web 开发人员工具](https://addons.mozilla.org/en-us/firefox/addon/web-developer/)

# perl - “Learning Perl”第 6 版中的某些程序。不使用“使用 5.014” - 为什么？

> ID：11805407
> 
> 赞同：5
> 
> 时间：2012-08-04T02:18:09.543
> 
> 标签：perl

我正在使用 Llama，第 6 版学习 Perl，第一章中的一些程序不适用于“使用 5.014”，我不知道为什么。例如：

```
#!/usr/bin/perl

#use 5.014;

$n = 1;
while ($n < 10) {
        $sum += $n;
        $n += 2;
}
print "The total was $sum.\n"; 
```

这适用于注释掉的“使用 5.014”，但包含它，我收到以下错误：

```
Global symbol "$n" requires explicit package name at ch3loop.pl line 5.
Global symbol "$n" requires explicit package name at ch3loop.pl line 6.
Global symbol "$sum" requires explicit package name at ch3loop.pl line 7.
Global symbol "$n" requires explicit package name at ch3loop.pl line 7.
Global symbol "$n" requires explicit package name at ch3loop.pl line 8.
Global symbol "$sum" requires explicit package name at ch3loop.pl line 10.
Execution of ch3loop.pl aborted due to compilation errors. 
```

但是，如果我将“我的”放在变量的第一个实例之前，它仍然不会运行，但出于不同的原因：

```
Global symbol "$sum" requires explicit package name at ch3loop.pl line 10.
Execution of ch3loop.pl aborted due to compilation errors. 
```

有人可以解释发生了什么吗？我知道我可以在没有“使用 5.014”的情况下运行它，但它确实在书的封面上说第 6 版。“涵盖 Perl 5.14”，所以我很困惑。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-04T07:53:59.440

从 v5.12 开始，当你`use VERSION`什么都不说时，它会自动打开[strict](http://perldoc.perl.org/strict.html)。由于在“子程序”一章之前我们不会介绍解决您的特定问题的方法，因此在前面的章节中我们不会做任何需要您这样做的事情。

*学习 Perl*是作为教程设计的，所以我们希望在我们明确向您展示之前，您不会在程序中做任何事情。这样，我们就不必在第一章中解释所有的 Perl。

在我使用需要它的功能之前，我倾向于不使用任何版本声明，而且我们在开始的章节中不会这样做。

祝本书其余部分好运。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T02:27:02.960

我猜在那个版本之后它会自动启用`use strict`模式，这会强制你声明每个变量的范围。（这通常是一件好事，它使您不太可能犯难以发现的错误）。

您可能会收到`$sum`错误，因为我猜您将`my $sum`其放入`while`循环中，因此它超出了最终打印语句的范围。

您想`my $sum = 0;`在 while 循环之前和之外进行设置，以便它保持 while 循环之外的范围。如果你`sum`在while循环里面声明，这个值会在每次循环迭代后过期并被重置，当你尝试打印它时它不会存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T03:02:20.847

`use <version>;`默认启用`strict`。所以像下面这样声明变量 -

```
#!/usr/bin/perl
use 5.014;
my $sum;
my $n=1;

while ($n < 10) {
        $sum += $n;
        $n += 2;
}
print "The total was $sum.\n"; 
```

# mysql - 从 MySQL 查询结果集中检索多个随机行 - 不使用 rand() 的顺序

> ID：11805409
> 
> 赞同：2
> 
> 时间：2012-08-04T02:18:36.537
> 
> 标签：mysql, sql

我有一个查询，旨在从结果集中检索随机行。我不想使用`ORDER BY Rand()`，因为它似乎效率很低。

我的方法如下：

*   生成 [0,1) 之间的单个随机数
*   给结果查询的每一行一个唯一的“排名”数字。即给第一行一个值1，第二行一个值2，依此类推
*   使用随机数获得一个介于 1 和结果中的行数之间的数字
*   返回 rank == 从随机数生成的数字所在的行

示例查询：

```
SELECT * FROM(

    (SELECT @rand := RAND(), @rank := 0) r1
    CROSS JOIN
    (SELECT (@rank:=@rank+1) as num, A.id FROM
    A JOIN B
    ON A.id = B.id
    WHERE B.number = 42
)
WHERE num = FLOOR(1 + @rand * @rank) LIMIT 1 
```

这适用于检索一行，但我想要 10 个随机行。更改`LIMIT 1`为`LIMIT 10`不起作用，因为如果`num + 10 > number of rows`查询不返回 10 行。

我能想到的唯一解决方案是在 sql 查询中生成 10 个随机数，检查它们彼此不同并且有几`WHERE num = random_number_1`行。或者，我可以调用该查询 10 次，检查所选行是否唯一。我不知道如何做前者，而后者似乎效率很低。除非可能有一些很棒的缓存可以使相同的查询运行得非常快？

有没有人有任何想法？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:32:09.247

您可以尝试以下方法：

```
select sq2.c1 
  from  ( select * 
            from (select @count :=  0) sq0
           cross join  
                 (select t1.c1, @count := @count+1        
                    from t t1       
                    join t t2      
                   using(c1)      
                   where t2.c2 = 42    
                 ) sq1  
         ) sq2   
 --use a probability to pick random rows
 where if(@count <= 5, 1, floor(1 + rand() * (@count-1))) <= ceiling(log(pow(@count,2)))+1
 limit 5; 
```

结果将是随机的，除非结果集小于限制（或大小相同）。如果这是一个问题，您可以包装整个事情：

```
select sq3.* from ( select ... limit 5 ) sq3 
order by rand(). 
```

这只会随机化少量有效的输出行（最多 5 个）。

当然，您始终可以使用临时表：

```
create temporary table rset (row_key int auto_increment, key(row_key))
as ( select .... where c2 = 42 ) engine=myisam;

set @count := select count(*) from rset;

select rset.c1 
  from rset 
 where row_key in (    (floor(1 + rand() * (@count-1))),
(floor(1 + rand() * (@count-1))),
(floor(1 + rand() * (@count-1))),
(floor(1 + rand() * (@count-1))),
(floor(1 + rand() * (@count-1))) );

drop table rset; 
```

如果要保证获得五个唯一行，则可以使用第二个临时表：

```
create temporary table row_keys ( row_key int not null primary key );
-- do this successful five times.  if you get a unique key error try again
insert into row_keys values (floor(1 + rand() * (@count-1));

select rset.c1
  from rset
  join row_keys
  using(row_key); 
```

# jquery - jQuery - 如何为这种特殊情况替换 $(element).nextAll().remove()

> ID：11805413
> 
> 赞同：0
> 
> 时间：2012-08-04T02:19:49.077
> 
> 标签：jquery, css

我编写了这个简单的脚本来验证非空输入字段。

例如，当表单被发送并且带有 id 'name' 的输入为空时，将在该元素旁边显示一条短消息。问题是，如果再次发送表单并且该输入不再为空，那么这样做 `$(element).nextAll().remove()`会导致 id 为“phone”的元素消失。

我只需要删除消息错误而不是所有其他元素。

请提出一个简单易行的方法来解决这个问题。

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript"
        src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">
        </script>
        <script type="text/javascript">
            $(document).ready(function(){
                $("#formu").submit(function(){
                     validateInputText($("#name"),"Enter you name");
                     validateInputText($("#phone"),"Enter your phone number");    
                     return false;                
                });
                function validateInputText(inputText, errorMessage){
                    if($(inputText).val()==''){
                        setFieldAsNotValid(inputText, errorMessage)
                    }else{
                        removeErrorMessage(inputText)
                    }
                }

                function setFieldAsNotValid(element, errorMessage){
                    $(element).nextAll().remove();
                    $(element).after('<b>'+errorMessage+'</b>')
                    $(element).addClass('selected');
                }

                function removeErrorMessage(element){
                    $(element).nextAll().remove();
                    $(element).removeClass('selected');
                }       
            });

        </script>
    </head> 
    <body>
       <form id="formu">
           name: <input type="text" id="name" />
           phone: <input type="text" id="phone" />
           <input type="hidden">
           <input type="submit">
        </form>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T02:26:32.130

你为什么不给你的错误信息一个类？例如：

```
<b class="error">Message here</b>
<p class="error">Message here</p> 
```

然后删除您调用的任何错误消息

```
$('.error').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T03:55:22.113

我为你创建了一些代码。这不是您问题的直接答案，但我认为这是做您想做的更好的方法。

HTML：

```
<form id="myForm">
    Name: <input id="name" type="text" allowblank="false" max="10"/><span for="name" class="errorMessage"></span>
    <br/>
    Age: <input id="age" type="text" allowblank="false"/><span for="age" class="errorMessage"></span>
    <br/>
    <input type="submit" value="Save"/>
</form> 
```

CSS：

```
.error {
    border-color: #ff0000;
}

.errorMessage {
    color: #ff0000;
} 
```

JavaScript：

```
$( "#myForm" ).submit(function(){
    return validate( $(this) );
});

function validate( $form ) {

    var isValid = true;

    $textInputs = $form.find( "input[type=text]" );
    $textInputs.each(function( index, item ){

        var isThisValid = true;
        var $item = $(item);
        var $errorSpan = $( "span[for=" + $item.attr("id") + "]" );

        var max = parseInt( $item.attr( "max" ) );

        if ( $item.attr( "allowblank" ) == "false" ) {
            if ( $item.val().trim() == "" ) {
                $item.addClass( "error" );
                $errorSpan.html( "this field cannot be empty" );
                isThisValid = false;
            }
        }

        if ( max && isThisValid ) {
            if ( $item.val().trim().length > max ) {
                $item.addClass( "error" );
                $errorSpan.html( "the maximum length of this field is " + max );
                isThisValid = false;
            }
        }

        if ( isThisValid ) {
            $item.removeClass( "error" );
            $errorSpan.html( "" );
        }

        if ( isValid && !isThisValid ) {
            isValid = false;
        }

    });

    return isValid;

} 
```

使用此代码，您可以改进验证，创建新规则。有一些 jQuery 插件可以完成这项工作，但是由于 jQuery 的插件站点正在维护中，我认为您可以使用这种方法。请注意，我使用了一些自定义属性来设置验证类型，但您可以使用另一种方法，例如创建一个包含验证约束的对象。我使用“max”而不是 maxlength，因为后者是有效的输入标签属性。无论如何，jsFiddle 在这里：http: [//jsfiddle.net/davidbuzatto/2N4yY/](http://jsfiddle.net/davidbuzatto/2N4yY/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T03:19:14.383

也许不是最好的解决方案，但它现在正在工作......因为我在错误消息的输入元素旁边添加了一个 div 元素，所以我问下一个元素是否是一个 div 来删除它......

```
function setFieldAsNotValid(element, errorMessage){
    if ($(element).next('div').length){
        $(element).next().remove();
    }
    $(element).after('<div style="margin-left:0px;"><b>'+errorMessage+'</b></div>')
    $(element).addClass('selected');
}

function removeErrorMessage(element){
    $(element).next().remove();
    $(element).removeClass('selected');
} 
```

# c - 为什么scanf一次失败后不等待用户输入？

> ID：11805414
> 
> 赞同：2
> 
> 时间：2012-08-04T02:20:04.437
> 
> 标签：c, scanf

我在下面的代码中遇到问题。当我输入任何整数时，即`(0-9)`，就可以了。但是当我输入一些其他字符时`A`，`B`或者任何其他字母`scanf()`都会失败。然后它不会等待任何进一步的输入。

我为此附上了一个代码片段。我非常需要仅使用 C 标准库进行错误处理。

```
#include <stdio.h>

int main()
{
    int choice;
    while(1)
    {
        printf("Enter your choice: ");
        if(0 == scanf("%d", &choice))
          {
              printf("Some error occured\n");
              //break;/*I did not want to break this loop as I use this to show menu*/
          }

        switch(choice)
         {
                      case 0:printf("Case 0\n");break;
                      case 1:printf("Case 1\n");break;
                      case 2:printf("Case 2\n");break;
                      case 3:printf("Case 3\n");break;
                      case 4:printf("Case 4\n");break;
                      case 5:printf("Case 5\n");break;
                      case 6:printf("Case 6\n");break;
                      case 7:printf("Case 7\n");break;
                      case 8:printf("Case 8\n");break;
                      case 9:printf("Case 9\n");break;
                      default:printf("Default case\n");break;

         }
    }
} 
```

更清楚的问题是：为什么失败后不等待？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T02:25:28.320

使用`scanf`，如果给定的输入与格式规范不匹配，则输入不会被消耗并保留在输入缓冲区中。换句话说，不匹配的字符永远不会被读取。

因此，当您键入例如一个`a`字符时，您的代码将无限循环，因为`scanf`在同一字符上继续失败。

当`scanf`返回错误时，您需要删除有问题的字符。

您无法知道将输入多少个字符，但使用任何违规字符的一种简单方法是在 scanf 失败时尝试读取字符串：

```
char junkChars[256];

printf("Enter your choice: ");
if (scanf("%d", &choice) == 0)
{
    printf("Some error occured\n");
    scanf("%s", junkChars);
} 
```

这将清除输入缓冲区，但依赖于上限。如果用户键入的字符*超过*256 个，`scanf`则将在下一次迭代中继续使用它们。

显然这是一个丑陋的解决方案，但`scanf`由于这个原因，它并不是一个很好的输入机制。最好使用`fgets`将输入行作为字符串获取，然后自己控制对该字符串的解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T02:23:51.477

这是设计使然。

不要使用**break**，使用**continue**。

# xml - ibatis中的参数语法

> ID：11805419
> 
> 赞同：1
> 
> 时间：2012-08-04T02:21:25.083
> 
> 标签：xml, orm, jdbc, dao, ibatis

ibatis中以下内容有什么区别：

当我使用第二种格式时，我得到以下异常 java.sql.SQLException: Missing IN or OUT parameter at index:: 1

1)

```
 UPDATE TRAN_ITEM 
            SET BOOK_HNDL_MARK_T=#marksAndNumbers#,
                MDSE_CRGO_DESC_T=#cargoDesc#, 
                UPDT_PGM_I = 'OTM-RTS' 
                WHERE 
            TRAN_ITEM_I=#instanceId# 
```

2)

```
UPDATE TRAN_ITEM SET 
BOOK_HNDL_MARK_T='$marksAndNumbers$',
MDSE_CRGO_DESC_T='$cargoDesc$', 
UPDT_PGM_I = 'OTM-RTS' 
WHERE TRAN_ITEM_I='$instanceId$' 
```

我的DAO如下：

```
paramMap.put("marksAndNumbers", poItemDetailVO
                        .getMarksAndNumbers());
paramMap.put("cargoDesc", poItemDetailVO.getCargoDescription());
paramMap.put("instanceId", Integer.valueOf(Long                         .toString(poItemDetailVO.getInstanceID()))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:29:41.120

在第二个查询中，您将 (') 放在输入变量之前/之后。

# javascript - 如何在 Fusion Tables 中切换不同的图层

> ID：11805420
> 
> 赞同：0
> 
> 时间：2012-08-04T02:21:55.200
> 
> 标签：javascript, google-fusion-tables

我正在尝试在 Fusion Tables Map 中切换两个图层。为此，我创建了两个函数 - 我从 FT 团队的 Kathrin 那里获取了一个示例：

[https://fusion-tables-users-group.googlegroups.com/attach/1d0b036133024eef/toggle_layers.html?pli=1&view=1&part=4](https://fusion-tables-users-group.googlegroups.com/attach/1d0b036133024eef/toggle_layers.html?pli=1&view=1&part=4)

但不知何故，这不起作用。请看一下：

```
<!DOCTYPE html>
<html>
<head>
   <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
   <meta charset="UTF-8">
   <title>PDDUA Porto Alegre</title> 
<style>
#map-canvas { width:400px; height:450px; }
</style>
<script type="text/javascript"
src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">

var map;

var layer1;
var layer2;

function initialize() {
   map = new google.maps.Map(document.getElementById('map-canvas'), {
      center: new google.maps.LatLng(-30.07080000, -51.1900000),
      zoom: 10,
      mapTypeId: google.maps.MapTypeId.ROADMAP
});
layer1 = new google.maps.FusionTablesLayer({
  query: {
     select: "'geometry'",
     from: '4756019',
  },
  map: map
});
layer2 = new google.maps.FusionTablesLayer({
  query: {
 select: "'geometry'",
 from: '4755921',
  },
  map: map
   });    
}
google.maps.event.addDomListener(window, 'load', initialize);

//FUNCTION TO CHANGE LAYERS
function changeMap(layerNum) {
   if (layerNum === 1) {
      update(layer1);
   }
   if (layerNum === 2) {
      update(layer2);
   }
} 

//FUNCTION TO UPDATE LAYERS
function updateMap(layer) {
   var layerMap = layer.getMap();
   if (layerMap) {
      layer.setMap(null);
   } else {
      layer.setMap(map);
   }
}   

//FUNCTION TO FILTER DATA BY COLUMNS AND ROWS
function filterData() {
   var searchString = document.getElementById('search-string').value.replace(/'/g, "\\'");
   var filter = document.getElementById('filter').value.replace(/'/g, "\\'");
   if (filter === "UEU") {
    layer1.setOptions({
        query: {
            select: "'geometry'",
            from: '4756019',
            where: "'UEU' = '" + searchString + "'"
        }
    });
}
else if (filter === "SUBUEU") {
    layer1.setOptions({
        query: {
            select: "'geometry'",
            from: '4756019',
            where: "'SUBUEU' = '" + searchString + "'"
        }
     });
}
else if (filter === "CODIGO") {
    layer1.setOptions({
        query: {
            select: "'geometry'",
            from: '4756019',
            where: "'CODIGO' = '" + searchString + "'"
        }
    });
}
}
//FUNCTION TO RESET DATA
function resetData() {
document.getElementById('search-string').value = "";
  layer1.setOptions({
      query: {
         select: "'geometry'",
         from: '4756019'
      }
   });
}

</script>
</head>
<div id="map-canvas"></div><br/>
<div style="margin-top: 10px;">
   <label>Tipo</label>
   <select id="filter">
      <option value="">--selecionar--</option>
  <option value="UEU">UEU</option>
  <option value="SUBUEU">SUBUEU</option>
  <option value="CODIGO">CODIGO</option>
   </select><br/><br/>
 <input type="text" id="search-string" />
 <input type="button" onclick="filterData();" value="Find!"/>
 <input type="button" onclick="resetData();" value="Reset Layer" /><br/><br/>
 <label>Layers:</label><br/>
 <label>RAREFEITA</label><input type="checkbox" value="1" onclick="changeMap(this.value);" checked="checked" /><br/>
 <label>INTENSIVA</label><input type="checkbox" value="2" onclick="changeMap(this.value);" checked="checked" /><br/>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T02:49:02.967

这里有几个问题，这两个问题都在这个函数中。

```
function changeMap(layerNum) {

   if (layerNum == 1) {
      updateMap(layer1);
   }
   if (layerNum == 2) {
      updateMap(layer2);
   }
} 
```

第一个问题是您使用`===`which 断言参数的类型以及值，但是由于您传递了`value`复选框，因此您传递了字符串“1”，这意味着更新不会叫...另外，你打电话`update`而不是`updateMap`.

这是一个包含此更改的工作小提琴：http: [//jsfiddle.net/tholman/Xg8sr/](http://jsfiddle.net/tholman/Xg8sr/)

# c# - C# 4.0 允许项目不关心参考版本

> ID：11805427
> 
> 赞同：3
> 
> 时间：2012-08-04T02:23:16.393
> 
> 标签：c#, .net, visual-studio-2010, reference, dll

我有一个包含大约 10-15 个项目的 C# 解决方案。除一个项目外，所有项目都是大小约为 100-200 KB 的 DLL。我希望能够通过替换更改的 DLL 来推出热修复，而不是需要为热修复下载所有 DLL 和 EXE。问题是我所有的引用都是项目引用而不是 DLL。

如何告诉我的项目引用是非版本特定的？

如果您认为我不应该这样做，我理解双方，但请仅发布有关如何执行此操作的答案，而不是我为什么不应该或应该这样做的答案。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T02:41:46.357

直接编辑csproj文件，添加

```
<SpecificVersion>false</SpecificVersion> 
```

到项目参考。

# ios - 如何预加载音频文件xcode

> ID：11805428
> 
> 赞同：1
> 
> 时间：2012-08-04T02:23:28.010
> 
> 标签：ios, audio, wav, audiotoolbox

我想在我的应用程序中预加载一个 *.wav 文件，因为它相当大。我想开始加载它，`viewcontroller1`然后在`viewcontroller15`. 我需要代码来预加载它；播放它的代码是：

```
CFBundleRef mainbundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef =CFBundleCopyResourceURL(mainbundle, (CFStringRef) @"america", CFSTR ("wav"), NULL);
UInt32 soundID;
AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
AudioServicesPlaySystemSound(soundID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:03:01.397

预加载 wav 文件的标题需要读取非常少量的数据。这足以初始化您的音频播放流。然后，您还需要填充播放缓冲区（要读取的数据量相当少）才能开始播放。

要预加载音频文件的样本数据，您可以使用`AudioFile*`API 和自定义 I/O 回调。

**但是**，您描述的场景是*不*预加载音频文件的样本数据的一个很好的例子。

可以从磁盘实时流式传输 wav 文件。它不需要在播放前读取整个文件的样本数据。实时播放不需要将大型音频文件加载到内存中。当然，iOS 设备的内存上限也很低。

如果您想要预加载和初始化流，您可以使用`ExtAudioFile*`API 并仍然使用 API 进行流式传输，例如`AudioQueue*`.

有关您面临的问题的更多详细信息可能会有所帮助。在这种情况下，我认为没有任何充分的理由预加载音频文件的样本数据；只有负面的副作用。

# javascript - Javascript 路由正则表达式

> ID：11805441
> 
> 赞同：8
> 
> 时间：2012-08-04T02:27:09.960
> 
> 标签：javascript, regex

我需要构建一个路由器，将 REST 请求路由到正确的控制器和操作。这里有一些例子：

```
POST /users
GET /users/:uid
GET /users/search&q=lol
GET /users
GET /users/:uid/pictures
GET /users/:uid/pictures/:pid 
```

拥有一个尽可能好的正则表达式很重要，因为路由是必不可少的，并且在每次请求时都会完成。

我们首先必须用正则表达式替换 url 中的 : (直到结束或直到下一个正斜杠 /)，然后我们可以用它来验证带有请求 url 的 url。

我们如何用正则表达式替换这些动态路由？就像搜索以“：”开头并以“/”结尾的字符串、字符串结尾或“&”一样。

这是我尝试过的：

```
var fixedUrl = new RegExp(url.replace(/\\\:[a-zA-Z0-9\_\-]+/g, '([a-zA-Z0-0\-\_]+)')); 
```

由于某种原因，它不起作用。我如何实现一个用正则表达式替换 :id 的正则表达式，或者在与真实请求 url 进行比较时忽略它们。

感谢帮助

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-04T15:03:59.697

我将`:[^\s/]+`用于匹配以冒号开头的参数（匹配`:`，然后是尽可能多的字符，除了`/`空格）。

作为替换，我`([\\w-]+)`用来匹配任何字母数字字符，`-`并且`_`在捕获组中，假设您也对使用匹配的参数感兴趣。

```
var route = "/users/:uid/pictures";
var routeMatcher = new RegExp(route.replace(/:[^\s/]+/g, '([\\w-]+)'));
var url = "/users/1024/pictures";

console.log(url.match(routeMatcher)) 
```

# regex - 用于验证和解析的正则表达式

> ID：11805443
> 
> 赞同：0
> 
> 时间：2012-08-04T02:27:18.960
> 
> 标签：regex, validation, parsing

我想做一个正则表达式来验证和解析下面的字符串：

```
TESTE_CASE.PESSOAS;CO_CNPJ_CEI BETWEEN (0000000000370000000000, 0000000000370000009999);* 
```

使用以下正则表达式，我可以验证字符串：

```
\s*\w+.\w+\s*;\s*\w+\s+(?i)BETWEEN\s+\(\s*\w+\s*,\s*\w+\s*\)\s*;\s*\*\s* 
```

解析此字符串的最佳方法是什么？我需要如下输出：

```
String1 = TESTE_CASE.PESSOAS
String2 = CO_CNPJ_CEI
String3 = 0000000000370000000000
String4 = 0000000000370000009999
String5 = * 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:05:52.193

我会这样做

```
\s*([^;]+);([^\s]+).*?\(\s*(\d+)\s*,\s*(\d+).*?;(\*)? 
```

$1 = TESTE_CASE.PESSOAS
$2 = CO_CNPJ_CEI
$3 = 0000000000370000000000
$4 = 0000000000370000009999
$5 = *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T08:36:30.107

您可以通过以下方式附上您需要的表达式`()`：

```
( subexpression )
Captures the matched subexpression and assigns it a zero-based ordinal number. 
```

**并通过索引**获取捕获的表达式

 **或使用命名组：

```
(?< name > subexpression)
Captures the matched subexpression into a named group. 
```

**并按名称**获取捕获的表达式

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T06:04:09.863

试试这个：`(\b(?!BETWEEN\b)[\w.]+\b|\*)`****

# iphone - 使用 Haxe 在 iPhone 上保存数据

> ID：11805445
> 
> 赞同：2
> 
> 时间：2012-08-04T02:27:29.213
> 
> 标签：iphone, database, haxe, nme

我对 Haxe/NME 有点陌生，对访问传统上存储在数据库中的数据的最佳方法是什么感到有些困惑。我有一些代码需要根据给定的输入获取可能值的列表，并且我的目标是 iPhone / Android。Sqlite 是“*最好*的”方法吗？

基本上，使用 SQL，我想执行一个简单的语句，例如：

```
SELECT x FROM some_table WHERE name = 'y' 
```

我想我可以完全在我的 Haxe 应用程序中建立一些矩阵或数据数组（但是有数千条记录，我觉得这可能有点笨拙），但我想知道是否有更普遍接受的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:00:25.133

只需使用 SQLite 存储库并将其保存在应用程序的文档文件夹中？一种更常见的方法是使用 Core Data，但两者都是一种非常好的方法

# javascript - html - 一个链接打开两个窗口

> ID：11805446
> 
> 赞同：0
> 
> 时间：2012-08-04T02:28:16.023
> 
> 标签：javascript, html

所以每次我去pornhub.com，我点击一个视频，都会打开两个窗口。1) 我要观看的视频，以及 2) 另一个带有直播的视频。我只是想弄清楚这是通过 html 还是 javascript 完成的...是否可以仅使用 html 指定两个链接，还是需要 js？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:36:12.843

您可以使用 JavaScript 同时打开多个窗口。`window.open()`可以使用方法。例如，参见：http: [//jsfiddle.net/NJXPD/](http://jsfiddle.net/NJXPD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:24:42.890

您只能用 JS 打开第二个窗口，他们没有这样做 `<a><a>The Porn</a></a>`，并让它打开两个链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T04:47:57.527

您将需要 JavaScript，仅使用 HTML 是不可能的。如果您尝试将一个链接设置为有两个不同的位置被重定向到，您将只会被带到第一个地址。

示例：http: [//jsfiddle.net/CYwqk/](http://jsfiddle.net/CYwqk/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T02:30:40.330

需要 Javascript 才能同时打开两个窗口

# python - 如何在 python 中将流信息从标准输出传输到 mySQLdb？

> ID：11805448
> 
> 赞同：2
> 
> 时间：2012-08-04T02:28:40.643
> 
> 标签：python, database, twitter, tweepy

我有一个文件，它从 python 中的 twitter 中提取信息并将状态消息运行到我的 shell 中。我想将它们从外壳中取出并放入数据库中。我不知道该怎么做。我也没有为它制作的数据库，我将在数据库堆栈上对此提出质疑。我的代码如下：

```
import time
import MySQLdb
import tweepy
from tweepy.streaming import StreamListener
from tweepy import OAuthHandler
from tweepy import Stream

# Go to http://dev.twitter.com and create an app.
# The consumer key and secret will be generated for you after
consumer_key=" # Omitted "
consumer_secret=" # Omitted "

# After the step above, you will be redirected to your app's page.
# Create an access token under the the "Your access token" section
access_token=" # Omitted"
access_token_secret=" #Omitted "

auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)

api = tweepy.API(auth)

# If the authentication was successful, you should
# see the name of the account print out
print api.me().name

class StdOutListener(StreamListener):
        """ A listener handles tweets are the received from the stream.
        This is a basic listener that just prints received tweets to stdout.
        """
        def on_data(self, data):
            print data
            return True

        def on_error(self, status):
            print status

if __name__ == '__main__':
        l = StdOutListener()

        stream = Stream(auth, l)    
        stream.filter(track=['search term']) 
```

如何从流中获取信息到数据库中？我还想过滤流以只允许某些信息进入。我想进入数据库的唯一信息如下：

1.  留言作者
2.  信息
3.  日期/时间戳
4.  GEO（如果有）
5.  来源 ie Tweetdeck, web, mobile yaddda yadda
6.  消息是 RT'd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:01:26.527

这个问题需要很多信息，所以我只想给你一个概述，你需要什么......

首先，在 SO 和互联网上都有这种确切方法的例子。这是[本教程中的粘贴示例](http://andrewbrobinson.com/2011/07/15/using-tweepy-to-access-the-twitter-stream/)

```
class StreamListener(tweepy.StreamListener):

    status_wrapper = TextWrapper(width=60, initial_indent='    ', 
                                    subsequent_indent='    ')
    conn = mdb.connect('localhost', 'dbUser','dbPass','dbBase')

    def on_status(self, status):
        try:
            cursor = self.conn.cursor()
            cursor.execute('INSERT INTO tweets (text, date) VALUES (%s, NOW())' ,(status.text))
            print self.status_wrapper.fill(status.text)
            print '\n %s  %s  via %s\n' % (status.author.screen_name, status.created_at, status.source)
        except Exception, e:
            # Catch any unicode errors while printing to console
            # and just ignore them to avoid breaking application.
            pass 
```

此示例使用不同的数据库驱动程序。但是您将使用`on_status`处理程序来接收新数据，并将其拆分为值。然后你创建一个 sql INSERT 把它放到你的数据库中。

这是这个[SO question](https://stackoverflow.com/questions/9470308/tweepy-stream-to-sqlite-database-syntax-error)中的一个 sqlite3 示例：

```
cur.execute("INSERT INTO TWEETS(?, ?, ?, ?)", (status.text, 
                                               status.author.screen_name, 
                                               status.created_at, 
                                               status.source)) 
```

这两个示例都要求您使用数据库客户端进行连接，然后获取一个游标（这是一个进行查询并让您查看结果的对象）。您可以[查看有关 MySQLdb 的教程，以](http://zetcode.com/databases/mysqlpythontutorial/)获得有关如何设置所有内容和进行查询的很好的概述。

如果您最终遇到了更集中的问题，那么可以单独解决。

# html - 使用不同文本和字体样式的多个 H3 标签

> ID：11805449
> 
> 赞同：1
> 
> 时间：2012-08-04T02:28:47.467
> 
> 标签：html, css, tags

如何在帖子正文中使用不同的文本样式和字体大小制作多个 H3 标签？

我的 H3 CSS 看起来像这样

```
.post h3{
         border-top:1px dotted #84ce31;
         border-bottom:1px dotted #84ce31;
         font-size: 10pt;padding:3px;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T02:33:03.543

给他们每个人上课：

```
.post h3.class1 { color: white; }
.post h3.class2 { color: black; }
.post h3.class3 { color: red; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:37:11.357

我会给他们所有的身份证。ID 用于特殊标识只存在一次的元素，并使用类来实现更常见的重复样式，默认情况下只有 h3 样式，该样式最常出现。所有说的答案也没有错，我只是在考虑设计风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T02:43:46.293

可以通过添加 id 或类来完成

```
.post h3.#hea1{ color: white; }
.post h3.#hea2{ color: black; }
.post h3.#hea3{ color: red; } 
```

或如上所述的类

不是重点是应该使用什么..要知道你必须知道

id和class的区别

**ID 是唯一的**

```
Each element can have only one ID
Each page can have only one element with that ID 
```

**类不是唯一的**

```
You can use the same class on multiple elements.
You can use multiple classes on the same element. 
```

**注意：任何 ID 或类都没有浏览器默认值**

默认情况下，向元素添加类名或 ID 对该元素没有任何作用。

这是一个让我成为初学者的东西。您正在一个站点上工作，并发现应用特定的类名可以解决您遇到的问题。然后你跳到另一个有同样问题的站点并尝试用相同的类名修复它，认为类名本身有一些神奇的属性，结果发现它不起作用。

# c++ - 如何使用 QSettings 将 QString 添加到注册表

> ID：11805456
> 
> 赞同：1
> 
> 时间：2012-08-04T02:31:05.400
> 
> 标签：c++, qt4, qsettings

我一直在开发我的第一个 gui 应用程序。我需要为所有功能存储一些值，所以我决定使用 QSettings 并学习如何使用 Windows 注册表。我找到了一个大小和位置的例子，所以我对这里发生的事情有一点了解，但由于某种原因，当我自己尝试时，我无法让它工作。我已经为此苦苦挣扎了几个星期，只是找不到任何关于如何将我自己的字符串添加到注册表的好的参考资料。下面是发生这种情况所需的所有相关代码。任何帮助或指向正确方向将不胜感激。我也有 Qt 4 或类似的基础知识，但在这种情况下对我没有太大帮助，

主窗口.cpp

```
MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent)
{
createActions();
createMenus();
createMainWidget();
createIcons();
createDocks();
createStatusBar();

setMinimumSize(950,600);
setWindowTitle(tr("Black Ops Toolbox: Vrs. 0.0.0.12.01"));

QString defaultDirPath = "";

readSettings();
}

void MainWindow::readSettings()
{
QSettings settings;
QPoint pos = settings.value("pos", QPoint(25,25)).toPoint();
move(pos);
QSize size = settings.value("size",QSize(1200,900)).toSize();
resize(size);
QString defaultDirPath = settings.value("defaultDirPath", QString("c:/programfiles/")).toString();

}

void MainWindow::writeSettings()
{
QSettings settings;
settings.setValue("pos",pos());
settings.setValue("size",size());
settings.setValue("defaultDirPath", QVariant(QString *defaultDirPath).toString());
}

void MainWindow::closeEvent(QCloseEvent *event)
{
writeSettings();
} 
```

主窗口.h

```
class MainWindow : public QMainWindow
{
Q_OBJECT

public:
explicit MainWindow(QWidget *parent = 0);

protected:
void closeEvent(QCloseEvent *event);

private:
void createActions();
void createActionEvents();
void createMenus();
void createMainWidget();
void createIcons();
void createDocks();
void createStatusBar();
void readSettings();
void writeSettings();

QString *defaultDirPath;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T04:01:57.873

我真的还没有使用 QSettings，但是从[文档](http://doc.qt.nokia.com/4.7-snapshot/qsettings.html#value)看来，您的代码中缺少一些信息。

特别是，您必须使用 QSettings 构造函数（来自基本用法部分）提供组织名称和应用程序名称，例如

```
 QSettings settings("MySoft", "Star Runner"); 
```

或使用 QCoreApplication 设置，然后使用默认的 QSettings 构造函数

```
 QCoreApplication::setOrganizationName("MySoft");
 QCoreApplication::setOrganizationDomain("mysoft.com");
 QCoreApplication::setApplicationName("Star Runner");
 ...
 QSettings settings; 
```

您是否尝试过其中一种方法来创建 QSettings？

# ruby - 使用 FasterCSV 解析远程文件

> ID：11805459
> 
> 赞同：0
> 
> 时间：2012-08-04T02:32:09.117
> 
> 标签：ruby, parsing, csv, import, fastercsv

我正在尝试解析远程 CSV 文件的前 5 行。但是，当我这样做时，它会引发`Errno::ENOENT`异常，并说：

`No such file or directory - [file contents]`（其中 [file contents] 是 CSV 内容的转储

这是我的代码：

```
 def preview
    @csv = []
    open('http://example.com/spreadsheet.csv') do |file|
      CSV.foreach(file.read, :headers => true) do |row|
        n += 1
        @csv << row
        if n == 5
          return @csv
        end
      end
    end
  end 
```

上面的代码是根据我在 Stack Overflow 上看到的其他人使用的代码构建的，但我无法让它工作。

如果我`read`从文件中删除该方法，它会引发一个`TypeError`异常，说：

```
can't convert StringIO into String 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:01:57.057

您可以手动将每一行传递给 CSV 进行解析：

```
require 'open-uri'
require 'csv'

def preview(file_url)
    @csv = []
    open(file_url).each_with_index do |line, i|
        next if i == 0 #Ignore headers
        @csv << CSV.parse(line)
        if i == 5
            return @csv
        end
    end
end

puts preview('http://www.ferc.gov/docs-filing/eqr/soft-tools/sample-csv/contract.txt') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T03:52:51.350

Foreach 需要一个文件名。尝试 parse.each

# task - 在 Orchard CMS 中使用 IScheduledTaskManager 时无法访问已处置的对象异常

> ID：11805463
> 
> 赞同：1
> 
> 时间：2012-08-04T02:33:07.557
> 
> 标签：task, orchardcms

我已经按照这个帖子在每个月底构建了一个计划任务

[使用 Orchard CMS 的计划任务](https://stackoverflow.com/questions/8916146/scheduled-tasks-using-orchard-cms)

```
private void ScheduleNextTask(DateTime date)
    {
        if (date > DateTime.UtcNow)
        {
            var tasks = _taskManager.GetTasks(TaskType);
            if (tasks == null || tasks.Count() == 0)
                _taskManager.CreateTask(TaskType, date, null);
        }
    } 
```

这在 orchard 1.4 中运行良好，但是当我升级到 1.5.1 时，每次启用/禁用模块、更改主题或在调试时编辑源代码时都会出错。这是错误

```
Cannot access a disposed object.Object name: 'TransactionScope' 
```

如果我在方法 ScheduleNextTask 中注释所有访问 _taskManager 的行，则不会再出现错误。我不知道为什么，但我需要运行任务，所以任何人都可以给我一个建议？

# android - 从另一个工作活动复制的 onClickListener 不起作用

> ID：11805464
> 
> 赞同：0
> 
> 时间：2012-08-04T02:33:33.533
> 
> 标签：android, eclipse, button, onclicklistener

我创建了一个新活动，将其添加到我的清单文件中，并从另一个功能齐全的活动中复制和粘贴代码，但是当我单击它们时，我的按钮不起作用。这是我的活动：

```
import java.util.Calendar;

import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.TextView;    

public class test extends Activity {

private Button btnChangeDate;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.salesticketoilui);
    mainProgram();
    }

public void mainProgram() {
    btnChangeDate = (Button) findViewById(R.id.btnChangeDate);
    btnChangeDate.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            showDialog(DATE_DIALOG_ID);
        } // end onClick
    }); // end setOnClickListener

    Button buttonExit = (Button)findViewById(R.id.buttonExit);
    buttonExit.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
             exitActivity();          
        } // end onClick
    }); // end OnClickListener

    // setup button listener for saving data and exit to main
    Button buttonSaveExit = (Button) findViewById(R.id.buttonSaveExit);
    buttonSaveExit.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            saveExit();
        } // end onClick
    }); // end OnClickListener

} // end MainProgram ()

    public void saveExit() {
        // does stuff
    }

    public void exitActivity () {
        // does stuff
    }

} // end class 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T02:38:50.543

根据您显示的代码，您似乎从未调用过该方法`mainProgram`，因此您的点击侦听器永远不会真正得到设置。`mainProgram`从调用`onCreate`或直接将该代码放入`onCreate`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:38:53.047

我相信有`onClickListeners`必要深入你的`onCreate`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T02:45:33.987

听斯科特

看起来你错过了@Override

```
new View.OnClickListener() {
    @Override
    public void onClick(View view) {
         exitActivity();          
    } // end onClick
} 
```

确保您的 java 设置为 1.6，以避免代码完成丢失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-03T07:07:59.153

我在将带有 ImageButtons 的 OnClickListener 从一个类复制到另一个类，然后使用批量复制/粘贴重命名时遇到了同样的问题。为了使它工作，我必须在我的布局中创建新按钮并手动声明事件。奇怪的！

# c++ - 如何在 Linux 上同时等待两个条件？

> ID：11805465
> 
> 赞同：1
> 
> 时间：2012-08-04T02:33:43.727
> 
> 标签：c++, c, linux, pthreads, posix

考虑一个系统，其中一堆线程等待某些事务完成（请注意，多个线程可以等待单个事务）。为了使事务完成，其中一个线程必须运行一个分派循环。一旦当前运行调度循环的线程正在等待的事务完成，其他线程之一必须接管该工作。

在 Windows 上，这很容易实现：对于每个事务，事务完成时都会设置一个手动重置事件。此外，当调度循环退出时，会设置一个自动重置事件。每个线程同时等待两个事件。事务事件首先发出信号——在这种情况下线程退出——或者循环事件——在这种情况下线程运行调度循环。

我如何在 Linux（或者更好的 Posix）上实现这个？目前，我已经用`bool`变量替换了上面的事件，并且我有一个条件变量来表示其中一个发生了变化。但是，在这种安排中，线程会虚假地唤醒（每当一个事务完成时，所有线程都会唤醒）。有没有办法更好地实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T05:09:28.227

我可能没有完全清楚您的情况，但我认为您可以在每个事务中使用一个条件变量（但仍然是一个互斥锁）。

当事务完成时，其相应的条件变量会发出信号；当调度循环退出时，所有条件变量都会发出信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T03:28:46.913

我可能误解了你的要求。我会为一个事件创建一个抽象，并有一个事件队列。派生事件将被排队，并且线程正在等待队列非空的条件。入队会在条件变量上产生信号。

```
struct AnEvent {
    int type_;
    union {
        //...
    };
};

struct EventQ {
    std::mutex m_;
    std::condition_variable c_;
    std::list<AnEvent> q_;

    void enq (const AnEvent &e) {
        std::lock_guard<std::mutex> g(m_);
        bool was_empty = q_.empty();
        q_.push_back(e);
        if (was_empty) c_.notify_one();
    };

    void deq (AnEvent &e) {
        std::lock_guard<std::mutex> g(m_);
        while (q_.empty()) c_.wait(m_);
        e = q_.top();
        q_.pop_front();
        if (!q_.empty()) c_.notify_one();
    } 
```

# java - 对用于强制转换的 java 原始类型的引用

> ID：11805467
> 
> 赞同：3
> 
> 时间：2012-08-04T02:34:00.247
> 
> 标签：java, casting, primitive-types, refer

我想根据用户偏好将数组中的一系列对象转换为不同的类型。

是否可以从数组中引用原始类型进行转换？

```
public void MakeByteBuffer(float x, float y, float z) {
    xyz[0] = x;
    xyz[1] = y;
    xyz[2] = z;
    byteBufferSend.rewind();
    for (int i = 0; i < whatToSendVarArray.length; i++) {
        switch (whatToSendTypeArray[whatToSendVarArray[i]]) {
        case 0:// byte
            byteBufferSend.put((byte) xyz[whatToSendVarArray[i]]);
            break;
        case 1:// short
            byteBufferSend
                    .putShort((short) xyz[whatToSendVarArray[i]]);
            break;
        case 2:// int
            byteBufferSend
                    .putInt((int) xyz[whatToSendVarArray[i]]);
            break;
        // Plus more types...
        }
        byteArrayDataToSend = byteBufferSend.array();
    }
} 
```

理想情况下，我想：

```
typeArray={byte,short,int,long,float,double};
byteBufferSend.put???((typeArray[i]) xyz[whatToSendVarArray[i]]); 
```

最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T02:42:08.193

> 是否可以从数组中引用原始类型进行转换？

不。

在 Java 中，您不能将一个原始类型的数组视为不同原始类型的数组。因此，无论数组的基本类型`xyz`是什么，这是查看元素的唯一方法。

您能做的最好的事情就是提取一个元素，然后显式地转换它。

（我认为反射无济于事，因为反射 API 不进行原始类型的转换。）

* * *

> 最佳做法是什么？

最好避免这种低级的东西。但是，如果您必须这样做，请接受这样一个事实，即代码不可避免地会有点笨拙。

因此，最佳实践是将笨拙隐藏在方法中，这样您就不需要在整个代码中执行此类操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:36:52.533

您可以通过反射来做到这一点，但它在 Java 中非常冗长且效率低下。

实现这一点的最好方法是放弃原始数据并使用对象包装类。然后你可以多态地序列化它们。

# sql - Visual Studio 中的 LINQ to SQL，没有调用堆栈的 InvalidCastException

> ID：11805471
> 
> 赞同：2
> 
> 时间：2012-08-04T02:35:19.360
> 
> 标签：sql, visual-studio-2010, linq, debugging, callstack

我很难调试一些 LINQ to SQL 代码，因为没有调用堆栈，而且我不知道错误发生在哪里。这似乎不是 SQL 错误 - 它在 C# 中，但通过搜索和其他所有内容，我找不到任何方法来确定哪个计算给出了错误。

源代码如下，您可以看到当我尝试插入一些新行时抛出的错误。调用堆栈为空，并且异常不包含有关问题所在的信息。

```
var groups =
    from record in startTimes
    group record by record.startTime
    into g
    select new
               {                                   
                   startTime = g.Key.GetValueOrDefault(),
                   totalTasks = g.Count(),
                   totalTime = g.Max(o => o.record.timeInSession).GetValueOrDefault(),
                   minDwell = g.Min(o => o.record.dwellTime).GetValueOrDefault(),
                   maxDwell = g.Max(o => o.record.dwellTime).GetValueOrDefault(),
                   avgDwell = g.Average(o => o.record.dwellTime).GetValueOrDefault(),
                   stdevDwell = g.Select(o => Convert.ToDouble(o.record.dwellTime)).StdDev(),
                   correct80 = g.Sum( o => o.record.correct80.GetValueOrDefault() ? 1 : 0),
                   wrong80 = g.Sum(o => o.record.wrong80.GetValueOrDefault() ? 1 : 0)
               };

var statistics = groups.AsEnumerable().Select(
    g => new e_activeSession()
             {
                 workerId = wcopy,
                 startTime = g.startTime,
                 totalTasks = g.totalTasks,
                 totalTime = g.totalTime,
                 minDwell = g.minDwell,
                 maxDwell = g.maxDwell,
                 avgDwell = g.avgDwell,
                 stdevDwell = g.stdevDwell,
                 total80 = g.correct80 + g.wrong80,
                 correct80 = g.correct80,
                 percent80 = g.correct80 / (g.correct80 + g.wrong80)                                 
             }
    );                                       

// Put these rows into the table                
_gzClasses.e_activeSessions.InsertAllOnSubmit(statistics);                
_gzClasses.SubmitChanges(); 
```

![调用堆栈和通常无用的异常](../Images/edfacb89430b5fd2d4a3c525644952c3.png)

这是异常的堆栈跟踪。如果有人能破译它，请告诉我，因为我不知道如何阅读这些匿名类型......

```
at System.Data.SqlClient.SqlBuffer.get_Double()
at System.Data.SqlClient.SqlDataReader.GetDouble(Int32 i)
at Read_<>f__AnonymousType2`9(ObjectMaterializer`1 )
at System.Data.Linq.SqlClient.ObjectReaderCompiler.ObjectReader`2.MoveNext()
at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
at System.Data.Linq.Table`1.InsertAllOnSubmit[TSubEntity](IEnumerable`1 entities) 
```

另外，我在 LINQPad 中运行了这个查询并得到了相同的错误和堆栈跟踪。最后，这是 LINQ to SQL 生成的数据库查询，该查询在错误发生前执行。我根本看不到任何双重转换。

```
SELECT COALESCE([t5].[value22],'1/1/0001 12:00:00 AM') AS [startTime], [t5].[value] AS [totalTasks], COALESCE([t5].[value2],0) AS [totalTime], COALESCE([t5].[value3],0) AS [minDwell], COALESCE([t5].[value4],0) AS [maxDwell], COALESCE([t5].[value5],0) AS [avgDwell], [t5].[value6] AS [correct80], [t5].[value7] AS [wrong80], [t5].[value22]
FROM (
    SELECT COUNT(*) AS [value], MAX([t4].[timeInSession]) AS [value2], MIN([t4].[dwellTime]) AS [value3], MAX([t4].[dwellTime]) AS [value4], AVG([t4].[dwellTime]) AS [value5], SUM([t4].[value3]) AS [value6], SUM([t4].[value]) AS [value7], [t4].[value2] AS [value22]
    FROM (
        SELECT 
            (CASE 
                WHEN (COALESCE([t3].[wrong80],0)) = 1 THEN @p4
                ELSE @p5
            END) AS [value], [t3].[workerID], [t3].[value2], [t3].[timeInSession], [t3].[dwellTime], [t3].[value] AS [value3]
        FROM (
            SELECT 
                (CASE 
                    WHEN (COALESCE([t2].[correct80],0)) = 1 THEN @p2
                    ELSE @p3
                END) AS [value], [t2].[wrong80], [t2].[workerID], [t2].[value] AS [value2], [t2].[timeInSession], [t2].[dwellTime]
            FROM (
                SELECT (
                    SELECT MAX([t1].[timeStamp])
                    FROM [dbo].[workerLog] AS [t1]
                    WHERE ([t1].[dwellTime] IS NULL) AND ([t1].[timeInSession] = @p0) AND ([t1].[workerID] = @p1) AND ([t1].[timeStamp] <= [t0].[timeStamp])
                    ) AS [value], [t0].[workerID], [t0].[dwellTime], [t0].[timeInSession], [t0].[correct80], [t0].[wrong80]
                FROM [dbo].[workerLog] AS [t0]
                ) AS [t2]
            ) AS [t3]
        ) AS [t4]
    WHERE [t4].[workerID] = @p6
    GROUP BY [t4].[value2]
    ) AS [t5] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T05:01:50.477

让我们阅读该调用堆栈：

```
at System.Data.SqlClient.SqlBuffer.get_Double() 
at System.Data.SqlClient.SqlDataReader.GetDouble(Int32 i) 
at Read_<>f__AnonymousType2`9(ObjectMaterializer`1 ) 
at System.Data.Linq.SqlClient.ObjectReaderCompiler.ObjectReader`2.MoveNext() 
at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext() 
at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) 
at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source) 
at System.Data.Linq.Table`1.InsertAllOnSubmit[TSubEntity](IEnumerable`1 entities) 
```

`InsertAllOnSubmit`是栈顶。它称为`ToList`，它称为 List 的“ctor”，即构造函数。

该 List 构造函数枚举其参数（**延迟**查询），从而导致查询被解析。

在 List 构造函数中的枚举期间，我们尝试移动到查询中的下一个元素 ( `WhereSelectEnumerableIterator.MoveNext`) - 这是一个枚举数，由您在 AsEnumerable 之后调用 Select 创建。为了移动到新元素，我们实际上需要做的是更深入地研究查询 ( `ObjectReader.MoveNext`)，它将根据数据库结果创建一些对象。

* * *

在这一点上，我想指出你没有说`startTimes`. 我猜`startTimes`是一个 LinqToSql 查询

* * *

因此，该数据库查询被转换为 DataReader（未在堆栈中捕获），我们从 DataReader ( `Read_<>f__AnonymousType2`9(ObjectMaterializer `1 )`) 中提取一行，以便我们可以将该行转换为查询结果的 .net 实例.

在从行中提取值的过程中，涉及到一个 double 值，所以我们尝试提取那个 ( `.GetDouble(Int32 i)`and `.get_Double()`), 。现在，我们知道 DataReader 可以将其值视为`object[]` （参考[SqlDataReader.GetValues](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getvalues)）。GetDouble 可以这样实现似乎是合理的：

```
//rubbish implementation, the point is - a cast from object to double is made
public double GetDouble(Int32 i)     {
  double result = (double) this.GetValues()[i];
  return result;
} 
```

因此，数据读取器数组中的对象不会强制转换为双精度。 **最可能的可能性是对象为空！**

也有可能存在一些其他类型（字符串或字节 [] 或其他类型），但如果您使用 LinqToSql 的设计器制作 dbml 文件，并且数据库中的表仍然与该 dbml 一致，这不太可能。

* * *

我看到 Convert.ToDouble 不在调用堆栈中。这必须在数据库中完成。Convert.ToDouble 是 -never 实际上称为 -... 相反，它被翻译成 sql 并在那里运行。数据库中类型转换的规则不同。

*   如果您尝试在 .net 中将 null 转换为 double，则会出现异常。
*   如果您尝试在 sql 中将 null 转换为 double，则会得到 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T03:24:54.493

好的，这就是我所看到的，异常中的第二行说

```
at System.Data.SqlClient.SqlDataReader.GetDouble(Int32 i)... 
```

在您的代码中，您只转换为 double 一次：

```
 stdevDwell = g.Select(o => Convert.ToDouble(o.record.dwellTime)).StdDev(), 
```

尝试在该行注释掉`g.Select(...)`，看看你是否仍然得到异常。

# delphi - 带功能区的 IntraWeb 页面

> ID：11805472
> 
> 赞同：3
> 
> 时间：2012-08-04T02:35:44.883
> 
> 标签：delphi, delphi-xe2, ribbon, intraweb

我们有使用 DevExpress TdxRibbon 或 XE2 TRibbon 组件的 VCL 应用程序，其中一个是使用 MVP 设计模式编写的。

我们现在想要创建该应用程序的 Web 版本，因此我正在寻找可以重现类似功能区栏的 IntraWeb 组件。

TMS Software IntraWeb 组件包中没有合适的组件，并且 DevExpress 不制作其控件的 Web 版本。在我查看的前 10 页结果中，Google 搜索没有找到任何合适的内容。

有谁知道可以产生我想要的效果的 Intraweb 组件，还是我需要将它直接编写到页面中？

# ios - 如何在 iOS 上设置两个按钮来打开/关闭振动？

> ID：11805476
> 
> 赞同：1
> 
> 时间：2012-08-04T02:36:47.320
> 
> 标签：ios, vibration

如何在 iOS 上设置两个按钮来打开/关闭振动？

这就是我想要做的：

```
@property (nonatomic) BOOL vibeIsOn;

- (IBAction)startVibrating:(id)sender {
dispatch_queue_t vibeQueue = dispatch_queue_create("vibe", NULL);
dispatch_sync(vibeQueue, ^{

    for (;!self.vibeIsOn;)
    {
        AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);

    }
});
dispatch_release(vibeQueue);}

- (IBAction)stopVibrating:(id)sender {
self.vibeIsOn = YES;
AudioServicesRemoveSystemSoundCompletion(kSystemSoundID_Vibrate);} 
```

不幸的是，当我按下“**凝视振动**”按钮时，它无法跳出for循环，但我确实将for循环放在了一个线程中，对吧？

帮助！！！这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T06:31:15.017

您同步调度队列，因此调用线程一直等到执行完成（这永远不会发生，因为您的 for 循环永远不会停止）。改为使用`dispatch_async`。

# testing - 缺陷与 CR - 如何区分

> ID：11805480
> 
> 赞同：0
> 
> 时间：2012-08-04T02:38:09.760
> 
> 标签：testing

设想：

目前我们正在进行系统和集成测试。每天我们都会收到很多测试人员提出的缺陷。大多数这些缺陷与我们给出的要求不符。许多场景对开发人员来说都是新的。我们的要求已由企业签署。

有人可以澄清如何区分缺陷与 CR 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:40:59.753

**不是要求的一切都是变更请求。**

*但不幸的是，直播并不那么容易，所以请继续阅读。*

关于什么是缺陷和什么是变更请求的争论在项目中很常见。管理这种情况很困难，因为您经常不得不做出妥协。

我见过项目经理被项目经理撤职，因为他们坚持认为所有的缺陷都是真正的变更请求。他们通常是对的，但仍然存在行为对项目的整体进展没有帮助。我还看到项目经理通过接受每一个缺陷并建造城堡而自杀，尽管最初从未需要和估计过的努力。

我个人始终绝对确保我的经理知道我正在构建最初不需要的功能，这些功能是以缺陷为幌子出现的。我还确保客户/测试人员知道这是我的观点。但我也非常宽容地考虑缺陷是什么。

示例：我最近参与了一个项目，我们开发了一个金融支付系统，另一位程序员对我说：“他们想要的东西不是缺陷，这是 CR！”。我看了看，由于我在这个业务领域的背景，我认为这实际上是非常基本的要求，为此要求 CR 真的很可笑。所以我决定我们修复它而不大惊小怪。

此外，以下问题值得考虑：

*   你在一个固定价格项目吗？您是否仍然拥有资源并通过添加功能而不抱怨为您带来良好的声誉和未来的合同来展示真正的伟大？
*   如果您接受 CR 作为缺陷，您会受到处罚吗？缺陷数量少是否是 KPI（关键绩效指标）并影响您的职业生涯？
*   一开始的需求定义很差，你接受了吗？缺陷中提到的要求是否真的很明显并且可以被认为是隐含的？例如，从未指定金额字段应该只允许数值，但它仍然有意义。
*   您是否接受了要求而不询问整体情况并承担部分责任？
*   客户是否在欺骗你并利用你无法拒绝和拒绝缺陷？

**在项目中，我总是努力为客户争取到最好的结果，但要确保我没有受到不应有的惩罚。**

# jquery - 在元素内放置滚动条

> ID：11805487
> 
> 赞同：0
> 
> 时间：2012-08-04T02:39:36.290
> 
> 标签：jquery, css

我有一个带有滚动条的 div，但是，当滚动出现时，它位于元素之外（见下图）。我想把卷轴放在红色区域内。是否可以？如何？

我什么都没试过，因为我不知道如何开始或找不到类似的问题。

![在此处输入图像描述](../Images/8cfa74fe52ce8a0ffdd8c00ebdbef4ad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:00:48.977

我认为没有任何 html 或 CSS 方法可以移动滚动条以显示在 div 内，因为滚动条是由浏览器而不是代码本身创建的。最好的选择可能是使用一些 javascript 来制作您自己的可滚动区域，然后按您喜欢的方式定位它。了解如何使用 jQuery 创建滚动条和可滚动的 div。祝你好运！

# datetime - 使用 Play Framework 中的 YAML 文件将初始数据保存为日期格式（如 2012-02）

> ID：11805490
> 
> 赞同：1
> 
> 时间：2012-08-04T02:40:34.543
> 
> 标签：datetime, playframework, yaml

在 Play 框架中，我的模型代码如下所示；

```
@Entity
public class Student extends Model {
    private static final long serialVersionUID = 1L;
    private static Finder<Long, Student> find = new Finder<Long, Student>(
            Long.class, Student.class);
...
    @Formats.DateTime(pattern = "YYYY-MM")
    public Date career_begin; 
```

如您所见，career_begin 被定义为 dateTime 格式，如 'yyyy-mm'。

然后，我尝试通过 YAML 文件保存我的初始数据。看起来像;

```
students:
            - !!models.Student
                     ...
                     career_begin: 2010-02 
```

但是，Play 框架无法读取此数据。它一直说这是一个无效的输入。如何将日期格式数据放入 YAML 文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T06:43:55.850

您需要使用有效的 YAML 日期格式，`@Formats.DateTime`YAML 解析器不使用该格式。有效格式列表在这里 - [http://yaml.org/type/timestamp.html](http://yaml.org/type/timestamp.html)

对于您的示例，您应该能够使用以下内容

```
2012-02-01 
```

# ruby-on-rails - 为什么我的 Rails 回调被调用了两次？

> ID：11805499
> 
> 赞同：6
> 
> 时间：2012-08-04T02:42:28.743
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, callback

我的模型中有一个 after_commit on: :create 回调，它被调用了两次。这个回调中有六个方法，其中一些是插入到我的数据库中的。我担心事情会变慢，我的数据库会增长得太快。

奇怪的是我的 before_create after_create 回调只执行一次。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T02:46:37.787

简短回答：使用 after_save 而不是 after_commit

长答案：[如何在 Rails 中组织复杂的回调？](https://stackoverflow.com/questions/11532911/how-to-organize-complex-callbacks-in-rails/11544635#11544635)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T00:17:49.923

我发现使用 before_create 解决了这个问题。

当您使用：

```
user = User.new
user.save 
```

您每次都在触发 before_save 钩子。

```
before_create 
```

应该管用

# python - 带有 Google App Engine Python 2.7 的 Django 1.2 中的自定义标签

> ID：11805500
> 
> 赞同：3
> 
> 时间：2012-08-04T02:42:34.810
> 
> 标签：python, django, google-app-engine, filter, tags

在 Google App Engine Python2.5 中使用 Webapp 创建自定义标签曾经是一种愉快的体验。这里：[Django 模板和变量属性](https://stackoverflow.com/questions/35948/django-templates-and-variable-attributes)

但是现在，在带有 Webapp2 和 Django 1.2 的 Python 2.7 中，这简直是一件令人头疼的事情。我只能在这里和那里找到一些信息，有些方法相互矛盾。

[http://www.john-smith.me/Tag/webapp2](http://www.john-smith.me/Tag/webapp2)中描述的方法在 Google 中排名很高，但有人声称这是“浪费时间”的[Webapp2 自定义标签](https://stackoverflow.com/questions/10618551/webapp2-custom-tags)

这种方法似乎有效

```
from django.template.loader import add_to_builtins
add_to_builtins('xxxxx') 
```

但我不知道细节。谁能提供一步一步的例子？

我不知道为什么没有关于这些东西的官方文件。我的意思是，这不是我们探索未知的科学实验。应该有一些文档，以便开发人员可以节省时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:27:23.693

我有同样的问题。

修复：

1.  创建模板标签文件夹。添加带有自定义标签的模块，如 Django 文档[自定义模板标签和过滤器](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/)中所述。示例文件夹结构：

    ```
    app.yaml  
        myapp/
            __init__.py
            templatetags/
               __init__.py
               my_tags.py 
    ```

2.  在 settings.py 中将 INSTALLED_APPS 设置为 myapp（包含 templatetags 子文件夹的文件夹名称）：

    ```
    INSTALLED_APPS = ( 'myapp' ) 
    ```

3.  现在，当您调用模板时，Django 还应该在文件夹`{% load my_tags %}`中查找 mytags 模块。`myapp/*/templatetags/`

# php - 我的主键 mysql 中的 0 值

> ID：11805507
> 
> 赞同：2
> 
> 时间：2012-08-04T02:44:17.040
> 
> 标签：php, mysql

只是一个想法，如果我在 db 表中的主键值为 0，会有什么问题吗？比如性能问题、安全性、冲突等。

```
+-------+---------+
|  key  |  value  |
+-------+---------+
|   0   |   a     |
|   1   |   a     |
|   2   |   ab    |
+-------+---------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:10:38.343

除非有使用 0 的实际原因，否则我会省略它，以便您可以对值进行简单的真实性测试。你不是在做一个自动递增的主键（通常从 1 开始）吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:46:24.773

这应该不会造成任何问题...

# linux - 在 bash 中获取随机站点名称

> ID：11805508
> 
> 赞同：0
> 
> 时间：2012-08-04T02:44:53.267
> 
> 标签：linux, bash, dns

我正在制作一个脚本来计算网络中单词的分布。我要做的就是尽可能多地检查随机网站，并计算这些网站中的单词数量，列出它们并对其进行排序，以便大多数时间出现的单词位于列表的顶部。我正在做的是生成随机 ip 号：

```
a=`expr $RANDOM % 255`
let "a+=1"
b=`expr $RANDOM % 256`
c=`expr $RANDOM % 256`
d=`expr $RANDOM % 256`
ip=$a.$b.$c.$d 
```

之后使用 nmap 检查端口 80 或 8080 是否在这些站点上打开，以便有可能它是一个网站。

如果我确定该 IP 不属于某个网站，我会将地址添加到黑名单文件中，这样就不会再次对其进行检查。

如果端口 80 或端口 8080 是打开的，那么我必须通过反向查找来解析 ip 并获取属于该 ip 的所有域名。

问题是，如果我执行这些命令之一，输出只是单个 PTR 记录，而可能有多个：

```
dig -x ipaddres +short
nslookup ipaddress
host ipaddress 
```

我更喜欢在 bash 中解决这个问题，但如果 C 中有解决方案，它也会有所帮助

之后，我使用 w3m 将网站页面复制到一个文件中，并计算单词的出现次数。

另外在这里我还有另一个问题，有没有办法检查属于该网站的所有可用公共页面，而不仅仅是索引一个？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T02:52:11.787

由于虚拟主机等原因，许多网站无法仅通过 IP 地址访问。我不确定您是否会通过这样做在网络上获得统一的单词分布。此外，托管网站的 IP 地址并不是通过随机生成 32 位数字来均匀分布的。拥有大多数真实网站的托管公司将集中在小范围内，许多其他 IP 将成为可能没有托管的 ISP 的端点。

鉴于上述情况以及您要解决的问题，我实际上建议获取要抓取的 URL 分布并计算这些 URL 的词频。一个很好的工具是 WWW:Mechanize in Python, Perl, Ruby 等。由于您的限制因素将是您的互联网连接而不是您的处理速度，因此在低级别执行此操作没有任何优势语。这样，您将更有可能在同一个 IP 上访问多个站点。

# database - 替代 Visual FoxPro

> ID：11805510
> 
> 赞同：1
> 
> 时间：2012-08-04T02:45:32.313
> 
> 标签：database, visual-foxpro, procedural-programming

我想知道是否有 Visual FoxPro 的替代品。最后一个版本是 9.0。使用 FoxPro 3.0 语言，我想知道有人知道类似于 FoxPro 的语言，开发环境类似于 Visual FoxPro 9.0。我知道有 dBase，但我不知道它是否像 FoxPro 一样强大，我也知道 xHarbour，但我还没有尝试过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T21:30:23.480

我听说 Servoy 是 VFP 开发人员正在走向的平台之一。它要么免费，要么便宜。查看[http://www.servoy.com/](http://www.servoy.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T14:17:03.137

Lianja App Builder 与 Visual FoxPro 高度兼容。www.lianja.com

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-04T23:31:52.553

不幸的是，没有与 Visual FoxPro 类似的编程语言。FoxPro 是其中之一，现在仍然是最好的编程语言之一。您仍然可以将版本 9 与 SP2 一起使用，但在最后一个版本中将不支持 64 位。它可以在 32 位的所有 Windows 平台上运行。如果您正在寻找转换您当前版本的 Visual FoxPro，我找到了 Servoy。

您可以查看有关 FoxPro 转换为 Servoy 的这些链接。 [http://www.servoy.com/content.jsp?t=1283&pageid=dlfoxpro](http://www.servoy.com/content.jsp?t=1283&pageid=dlfoxpro)

[http://www.youtube.com/watch?v=8rUsMMLbcqY](http://www.youtube.com/watch?v=8rUsMMLbcqY)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T22:50:21.407

首先，“替代 VFP”是什么意思？您只是在寻找快速的应用程序开发工具吗？

我不了解 VFP 世界中的其他人，但我仍然使用 VFP 9 进行开发，并且我的产品可以在所有版本的 Windows 下运行；但是，我正在使用 C# 和 .NET 将我的大部分内容迁移到 Visual Studio。

你不会找到任何模仿 VFP 的东西（至少我不知道）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-09T15:12:07.303

Alpha5 V11 与 VFP 有一些相似之处。我也在寻找类似 VFP 的替代品，到目前为止，我只看到 lianja 和 embarcadero 作为可能性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-29T19:50:56.847

我不认为这与 VFP 相当，但我确实看到了一款名为 Suneido 的产品，它似乎与 MS Access 和/或 VFP 类似。我没有尝试使用它，但如果有人有它可能会很好听。 [http://www.suneido.com/](http://www.suneido.com/)

# java - 不一致的 keyPressed 事件：有时会触发，有时不会，在不更改任何内容的情况下重新启动程序，它可能会或现在可以工作

> ID：11805514
> 
> 赞同：4
> 
> 时间：2012-08-04T02:46:32.303
> 
> 标签：java, swing, focus, keypress, keylistener

好的，所以我在这里很沮丧。这里的这段代码只是一个非常简单的移动JComponent。

奇怪的是，当我完全没有改变任何东西时，keyPressed 事件会非常不一致。我启动程序，有时它会工作，我的球会在屏幕上移动。另一方面，我将关闭它并打开它而不更改任何内容，它将无法正常工作。我不认为焦点在这里是一个问题，尽管我真的不太了解它。我不知道是怎么回事。

任何帮助，将不胜感激。我只是不明白这个程序怎么会如此不一致地失败和成功。

这是我在角色类中的代码，因为我不认为只给你一个片段会有帮助。不知道是不是只有我一个人，还是什么的，如果你想编译看看，就去吧。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Character extends JComponent implements KeyListener
{    
Timer timer = new Timer(5, new TimeListener());
private int x = 250;
private int y = 300;
char whichTimer;

public Character()
{
    addKeyListener(this);
    setFocusable(true);
    requestFocusInWindow();
    repaint();
}

public void keyReleased(KeyEvent e)
{
    if(e.getKeyCode() == KeyEvent.VK_W)
    {
        timer.stop();
    }
    if(e.getKeyCode() == KeyEvent.VK_A)
    {
        timer.stop();
    }
    if(e.getKeyCode() == KeyEvent.VK_S)
    {
        timer.stop();
    }
    if(e.getKeyCode() == KeyEvent.VK_D)
    {
        timer.stop();
    }
}
public void keyPressed(KeyEvent e)
{

    if(e.getKeyCode() == KeyEvent.VK_W)
    {
        timer.stop();
        whichTimer = 'W';
        timer.start();
    }

    if(e.getKeyCode() == KeyEvent.VK_A)
    {
        timer.stop();
        whichTimer = 'A';
        timer.start();
    }
    if(e.getKeyCode() == KeyEvent.VK_S)
    {
        timer.stop();
        whichTimer = 'S';
        timer.start();
    }
    if(e.getKeyCode() == KeyEvent.VK_D)
    {
        timer.stop();
        whichTimer = 'D';
        timer.start();
    }
}
public void keyTyped(KeyEvent e)
{

}
protected void paintComponent(Graphics g)
{
    super.paintComponent(g);
     Graphics2D g2d = (Graphics2D) g;

       // g2d.drawImage(fatsprite, x-10, y-10, null);
    g.setColor(Color.BLACK);
    g.fillOval(x-10, y-10, 20, 20);

}

class TimeListener implements ActionListener
{
    public void actionPerformed(ActionEvent e) 
    {
        if(whichTimer == 'W')
        {
            y-=1;
            repaint();
        }
        if(whichTimer == 'A')
        {
            x-=1;
            repaint();
        }
        if(whichTimer == 'S')
        {
            y+=1;
            repaint();
        }
        if(whichTimer == 'D')
        {
            x+=1;
            repaint();
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T03:01:44.060

确保组件是可聚焦的并且具有焦点。此外，最好使用键绑定，有关更多详细信息，请参阅[如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T04:22:31.013

@Max 是正确的，`KeyBindings`是解决问题的更好方法。关键问题（对不起，没有双关语）是一旦焦点移动到任何其他组件，您将不再收到关键事件。现在，你可能在想，“但我没有改变焦点”——你只需要点击另一个可聚焦的组件来失去关键焦点，或者按 Tab，这`KeyListener`通常不会被通知。

通常，正如您所发现的那样，`KeyListeners`它们是不可靠的，它们不仅只会在相关组件具有焦点时收到通知，而且可以在它们到达您之前使用密钥

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T04:44:03.943

**1.**问题是你`loosing focus`在这里超过了你的组件。

**2.**检查您的组件是否`focusable`，尝试使用`KeyBinding`

**3.**此外，请记住这一点...在`Swings`焦点**从左到右和从上到下**移动，其中如`AWT`，它根据将**组件添加到容器中的顺序。**

# css - CSS 粘性页脚位于内容下方

> ID：11805516
> 
> 赞同：1
> 
> 时间：2012-08-04T02:46:38.943
> 
> 标签：css, sticky-footer

我正在处理一个带有静态页眉、两个内容列和一个粘性页脚的新页面。一切正常，除了我的页脚一直在我的内容下滚动。我将不胜感激任何可以帮助它停止进入我的内容的帮助。

我尝试了发现的建议无济于事：

[内容在谷歌浏览器的页脚下而不是 FF](https://stackoverflow.com/questions/8309677/content-going-under-footer-in-google-chrome-and-not-ff)

[带有固定页眉/页脚的移动页面上的内容滚动](https://stackoverflow.com/questions/10893404/content-scrolling-on-mobile-page-with-fixed-header-footer)

[在内容下放置页脚似乎不起作用](https://stackoverflow.com/questions/11079749/placing-footer-under-content-doesnt-seem-to-work)

[为什么我的页脚没有到页面底部？](https://stackoverflow.com/questions/3168182/why-is-my-footer-not-going-to-the-bottom-of-the-page)

CSS：

```
body, html {
    height: 99%;
}

#page {
    position: relative;
    margin-bottom: -100px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 0;
    height: 100%;
    min-height: 100%;
}

#header {
    clear: both;
    float: none;
    min-width: 0px;
    margin-right: 0px;
    margin-left: -9px;
    margin-bottom: 0px;
    margin-top: -9px;
    z-index: 1;
    position: fixed;
    height: 150px;
    width: 100%;
    background-color: #fff517;
}

#wrapper {
    margin-bottom: 100px;
    float: none;
    clear: both;
    position: absolute;
    margin-top: 170px;
    left: 50%;
    width: 854px;
    margin-left: -422px;
}

#left-sidebar {
    clear: none;
    margin-left: auto;
    margin-bottom: auto;
    margin-right: 50px;
    margin-top: auto;
    min-height: 300px;
    width: 200px;
    float: left;
    background-color: #39ff32;
    position: relative;
}

#content {
    clear: none;
    float: left;
    min-height: 300px;                
width: 600px;
    background-color: #ff1c23;
    position: relative;
}

.push {
    clear: both;
    height: 200px;
}

#footer {
    clear: both;
    padding-top: 50px;
    background-color: #9f49ff;
    text-align: center;
    width: 100%;
    height: 50px;
    z-index: 0;
} 
```

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" 

"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<html>
<head>
<base href="http://www.footballpickpool.com/new_fpp/"/>
<link type="text/css" href="./resources/css/style.css"  rel="stylesheet"/>
</head>

<body>

<div id="page">
    <div id="header">
    </div>

    <div id="wrapper">
        <div id="left-sidebar">
        </div>

        <div id="content">
        </div>
    </div>
    <div class="push"></div>
</div>
<div id="footer">

</div>

</body>
</html> 
```

小提琴：http: [//jsfiddle.net/aUTqf/](http://jsfiddle.net/aUTqf/)

提前感谢任何可以提供一些见解的人。

编辑：我现在可以在除 IE 之外的所有浏览器中按预期工作。问题是由于几个元素的固定定位。现在要弄清楚IE，代码包括在下面：

```
body, html {
    background-position: 50% 80%;
    background-repeat: no-repeat;
    background-image: url(../images/background.jpg);
    background-color: #d9d9d9;
    height: 99%;
    margin: 0px;
    padding: 0px;
}

#header {
    padding-top: 15px;
    margin-left: auto;
    margin-bottom: 45px;
    margin-right: auto;
    margin-top: 0px;
    color: white;
    position: fixed;
    z-index: 99998;
    left: 0;
    top: 0;
    height: 150px;
    width: 100%;
    background-color: #fff517;
    }

#wrapper {
    float: left;
    clear: both;
    position: relative;
    left: 50%;
    width: 854px;
    margin-left: -422px;
    padding-top: 200px;
    padding-bottom: 150px;
}

#left-sidebar {
    clear: none;
    margin-left: auto;
    margin-bottom: auto;
    margin-right: 50px;
    margin-top: auto;
    min-height: 300px;
    width: 200px;
    float: left;
    background-color: #39ff32;
    position: relative;
}

#content {
    min-height: 300px;
    clear: none;
    float: left;
    width: 600px;
    background-color: #ff1c23;
}

.push {
    clear: both;
    height: 100px;
    background-color: #9f49ff;
}

#page {
    margin-top: 0px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: auto;
    height: 100%;
    min-height: 100%;
    width: 100%;
    z-index: 1; 
}

#footer {
    clear: both;
    margin-top: auto;
    margin-left: auto;
    margin-bottom: auto;
    margin-right: auto;
    background-color: #9f49ff;
    text-align: center;
    width: 100%;
    height: 50px;
    z-index: 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T05:33:38.607

我相信这是您想要的真正的 Sticky Footer。

[http://jsfiddle.net/PU8U3/](http://jsfiddle.net/PU8U3/)

我不得不从你的 CSS 中删除很多东西。我试图只留下使它工作所需的东西。您应该尝试在此基础上添加您需要的内容。

注意 HTML 中的样式表链接标记，当 HTML 加载另一个时，使用 JSFiddle 编辑 CSS 真的很困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T03:57:04.080

您可以使用页脚的大小为内容添加填充底部，一切顺利。

# database - 从标题生成独特的 slug

> ID：11805519
> 
> 赞同：3
> 
> 时间：2012-08-04T02:47:51.077
> 
> 标签：database, web, slug

当涉及到重复时，处理蛞蝓的最佳方法是什么。例如，假设 slug 用于博客文章。似乎标准的 slug 转换似乎删除了所有非字母数字字符，然后降低大小写，最后用下划线或连字符分隔空格。但是有一些问题，例如：

标题 => 蛞蝓

1.  前 500 名体育活动 => 前 500 名体育活动
2.  前 500 美元的体育活动 => 前 500 名体育活动

有两个独特的标题重复。有没有办法解决这个问题？也许是简单的安全符号转换？

但是，我希望它能够从每个标题中获得相同的 slug，以防止重复发布项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T10:37:39.970

[由于鸽巢原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)，您通常无法获得独特的蛞蝓。您正在从一个较大的集合映射到一个较小的集合，这意味着重复。

当然，您可以使用符号进行技巧，并尝试插入破折号的下划线。不过，这不是一个通用的解决方案，因为并非所有符号都可以使用（不需要 slug）。您可能需要向 URL 添加另一个标记，例如日期或序列号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:00:28.203

考虑将年/月/日添加到您的 URL 以支持非唯一的 slug。还要记住将日期字段添加到您的唯一约束。

# php - 如何编写 if else 语句 AJAX POST JQuery

> ID：11805521
> 
> 赞同：0
> 
> 时间：2012-08-04T02:48:42.410
> 
> 标签：php, jquery, ajax, forms, post

我试图在成功的 ajax 函数中使用 if else 语句，但值始终为 false 并且插入的数据
我使用 jQuery v1.7.1，这里是我的代码

```
// Contact Submiting form
function Contact_form(form, options){       
    $.ajax({
        url: 'contact.php',
        data: $('#contactform').serialize(),
        success: function(data){    
              if(data.check == '1'){ // if Ajax respone data.check =1 or Complete
                 $('.notifications').slideDown(function(){
                            setTimeout("$('.notifications').slideUp();",7000);                              
                        }); // Show  notifications box
                 $('#contactform').get(0).reset();  //  reset form

              }
              else if(data.check == '0'){ 
                  $('#preloader').fadeOut(400,function(){ $(this).remove(); });     
                  alert("No complete");
                  return false;
              }

        },
        cache: false,type: 'POST',dataType: 'json'
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:16:38.610

您可以尝试在逻辑语句中使用 data.result

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T03:32:40.970

如果 else 在成功功能使用中不好

```
function Contact_form(form, options){       
    $.ajax({
        url: 'contact.php',
        data: $('#contactform').serialize(),
        success: function(data){
                 $('.notifications').slideDown(function(){
                        setTimeout("$('.notifications').slideUp();",7000);                              
                    }); // Show  notifications box
                 $('#contactform').get(0).reset();  //  reset form
                    unloading();     //  remove loading
        },
        error: function(data){  
              $('#preloader').fadeOut(400,function(){ $(this).remove(); });     
                            alert("No complete");
                return false;
        },
        cache: false,type: 'POST',dataType: 'json'
    });
} 
```

# google-app-engine - 在 AppEngine 上添加 API 的自定义身份验证

> ID：11805524
> 
> 赞同：0
> 
> 时间：2012-08-04T02:49:19.313
> 
> 标签：google-app-engine, spring-security, jersey

我在 Google AppEngine (java) 上使用用户 API。

我有一个核心 servlet - /api - (JAXB Jersey 已实现)，它公开了 CRUD 操作。目前，允许我定义只有登录用户才能访问它。因此，使用 OpenID 或 Google Federated Login 登录网站的用户可以通过该应用登录并访问该网站。

现在，我想向开发人员发布 API - /dev/api。我们为他们生成一个唯一的 API 密钥来访问应用程序。

如何在不损害现有功能的情况下在 HTTP 基本身份验证下公开相同的 /api 功能？App Engine 不支持自定义安全角色 ()。如何实现 HTTP 基本身份验证？我应该在 /dev/api 上使用过滤器并限制该过滤器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T04:35:20.550

这很简单。

我为指向同一个 Jersey 资源的新 URL 创建了一个不同的过滤器 (BasicAuthFilter)。

它修复了它。

# android - Android：主要活动中的 onResume()

> ID：11805527
> 
> 赞同：1
> 
> 时间：2012-08-04T02:50:05.887
> 
> 标签：android

这个问题是基于[这个较旧的](https://stackoverflow.com/questions/3262157/how-to-check-if-my-activity-is-the-current-activity-running-in-the-screen)问题（不是我）。

我需要在我的主要活动（当我打开我的应用程序时首先启动的活动）上运行以下代码：

```
public static boolean isInFront;

    @Override   
    protected void onResume() {
        //isInFront = true;
    }

    @Override
    protected void onPause() {
        //isInFront = false;
    } 
```

问题是，onResume() 会导致我的应用在打开时崩溃。据我了解，这是应该发生的，因为应该为应用程序运行的第一个活动调用 onCreate()（我的代码稍后也有该函数）。

但我真的需要这段代码来告诉我主要活动何时是当前活动/在前台。

有没有办法解决这个问题，以便我可以在我的主要活动中保留 onResume() 而不是在应用程序启动时运行它而不是 onCreate() ？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T03:26:30.833

您可以同时使用这两种方法，是您的代码导致它崩溃。您应该检查活动生命周期。

那是你唯一的代码吗？你在他们的方法中调用 super.onResume() 和 super.onPause() 吗？

```
public static boolean isInFront;

    @Override   
    protected void onResume() {
        super.onResume();
        isInFront = true;
    }

    @Override
    protected void onPause() {
        super.onPause();
        isInFront = false;
    } 
```

对不起，如果我误解了你的问题

# ajax - MVC3 Ajax ChildAction

> ID：11805528
> 
> 赞同：2
> 
> 时间：2012-08-04T02:50:24.397
> 
> 标签：ajax, asp.net-mvc-3, jquery, partial-views

我很难弄清楚如何让 AJAX 在 MVC3 中处理子操作。我有一个视图，其中包含由子操作呈现的部分。该子操作呈现一个局部视图，其中包含一个分页列表。我需要这样做，以便当用户单击页面列表寻呼机上的另一个页码时，只会更新包含视频列表的视图的底部部分。我已经包含了我的代码，并且非常感谢一些帮助，因为我仍然对 MVC3 与 AJAX 一起使用的某些方式感到困惑。提前致谢。

我的观点：

```
 @model UltimateGameDB.Domain.Entities.Video
    @{
        ViewBag.Title = "Video Home";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
    @using PagedList
    @using PagedList.Mvc

    @section MainBanner {
        <section id="videos-featured">
            @Html.Partial("_Video", Model)

            <div id="videos-featured-detail">
                @Html.Partial("_VideoDetail", Model)

                @Html.Action("MiniFeaturedVideo", "Video") 
            </div>
        </section>
    }

    @Html.Action("RecentVideos", "Video", new { page = ViewBag.page }) 
```

我的控制器方法：

```
 public ActionResult VideoHome(Guid? selectedVideoId, int? page)
  {
     var pageIndex = page ?? 1;
     ViewBag.page = pageIndex;

     if (selectedVideoId == null)
     {
        selectedVideoId = ugdb.Videos.Where(v => v.IsFeatured == true).OrderBy(v => v.Timestamp).FirstOrDefault().VideoID;
        ViewBag.Autoplay = 0;
     }
     else
     {
        ViewBag.Autoplay = 1;
     }

     return View(ugdb.Videos.Find(selectedVideoId));
  }

  [ChildActionOnly]
  public ActionResult RecentVideos(int? page)
  {
     IQueryable<Video> videoList = ugdb.Videos.OrderBy(v => v.Timestamp);

     var pageIndex = page ?? 1;
     var onePageOfVideos = videoList.ToPagedList(pageIndex, 8);
     ViewBag.OnePageOfVideos = onePageOfVideos;

     return PartialView("_RecentVideos");
  } 
```

我的部分观点：

```
 @using PagedList
    @using PagedList.Mvc

    <div id="main-content" class="videos">
        <section>
            <a class="body-title"><span>RECENT VIDEOS</span><span class="title-arrow"></span></a>
            <div class="main-hr"></div>
            @foreach (var video in ViewBag.OnePageOfVideos)
            {
                <a class="video-entry" href="@Url.Action("VideoHome", "Video", new { selectedVideoId = video.VideoID })">
                    <img src="http://img.youtube.com/vi/@video.YouTubeID/default.jpg" alt="@video.VideoName" />
                    <div class="video-details">
                        <h2>@video.VideoName</h2>
                        <p>@video.VideoType</p>
                    </div>
                </a>
            }        
        </section>
        <div class="pagination">
            @Html.PagedListPager((IPagedList)ViewBag.OnePageOfVideos, page => Url.Action("VideoHome", "Video", new { page = page }), PagedListRenderOptions.OnlyShowFivePagesAtATime)
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:46:31.303

您可能想要做的是在 div 之后插入一个 AjaxForm`main-content`并在 div 关闭之前结束它`main-content`。

然后`PagedListPager`可以提交到控制器中的 Json 方法，该方法将返回内容（例如视频列表）以供 Ajax 表单更新。

# android - Android上的Phonegap支持本地存储？

> ID：11805531
> 
> 赞同：1
> 
> 时间：2012-08-04T02:51:11.410
> 
> 标签：android, html, cordova, android-webview

我的问题是双重的：

1) Droidgap（或 Android 的 Phonegap）是否支持浏览器中的本地存储。phonegap 是否简单地使用了 android 的本机浏览器（如果是，这是否意味着它支持 html 5 本地存储？）

2）有没有办法在Eclipse中调试在phonegap平台上运行的html5 webapp？我正在运行我的应用程序，每次向我的服务器发送请求时它都会失败，但是我在 logcat 中没有看到任何错误...

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:12:03.943

Yes Phonegap supports localstorage, as you can check here [http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#localStorage)

Your javascript output should all appear in logcat.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:51:25.657

PhoneGap 确实支持本地存储。

通过在 HTML/Javascript 本身中插入日志语句并查看服务器端的配置文件，我能够从我的应用程序接收日志。谢谢

# python - 将逗号分隔的字符串转换为列表，但忽略引号中的逗号

> ID：11805535
> 
> 赞同：5
> 
> 时间：2012-08-04T02:52:04.267
> 
> 标签：python, regex, split, delimiter

如何转换`"1,,2'3,4'"`成列表？逗号分隔各个项目，除非它们在引号内。在这种情况下，逗号将包含在项目中。

这是期望的结果：`['1', '', '2', '3,4']`。我在另一个线程上发现忽略引号的一个正则表达式如下：

```
re.compile(r'''((?:[^,"']|"[^"]*"|'[^']*')+)''') 
```

但这给了我这个输出：

```
['', '1', ',,', "2'3,4'", ''] 
```

我不明白，这些额外的空字符串是从哪里来的，为什么这两个逗号甚至都被打印出来了，更不用说一起打印了。

我尝试自己制作这个正则表达式：

```
re.compile(r'''(, | "[^"]*" | '[^']*')''') 
```

最终没有检测到任何东西，只是返回了我的原始列表。

我不明白为什么，它至少不应该检测到逗号吗？`?`如果我在逗号后添加 a，也会出现同样的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T02:59:52.973

而不是正则表达式，您最好使用该[`csv`](http://docs.python.org/library/csv.html)模块，因为您正在处理的是一个 CSV 字符串：

```
from cStringIO import StringIO
from csv import reader

file_like_object = StringIO("1,,2,'3,4'")
csv_reader = reader(file_like_object, quotechar="'")
for row in csv_reader:
    print row 
```

这将产生以下输出：

```
['1', '', '2', '3,4'] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-04T03:02:54.707

pyparsing 包括逗号分隔列表的预定义表达式：

```
>>> from pyparsing import commaSeparatedList
>>> s = "1,,2'3,4'"
>>> print commaSeparatedList.parseString(s).asList()
['1', '', "2'3", "4'"] 
```

嗯，看起来您的数据中有错字，在 2 之后缺少逗号：

```
>>> s = "1,,2,'3,4'"
>>> print commaSeparatedList.parseString(s).asList()
['1', '', '2', "'3,4'"] 
```

# apache - mod_rewrite：使用环境变量防止多次重写

> ID：11805538
> 
> 赞同：1
> 
> 时间：2012-08-04T02:52:58.010
> 
> 标签：apache, .htaccess, mod-rewrite

我目前正在为 *.php 返回 404 错误，并在内部将所有请求重定向到 PHP 文件（如果存在），使用以下命令：

```
RewriteCond %{REQUEST_URI} /(?!index$)
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.+)$ /$1.php [QSA,L,E=norewrite:1]

RewriteCond %{ENV:norewrite} !1
RewriteCond %{REQUEST_URI} \.php$
RewriteRule ^(.+)$ - [R=404] 
```

这工作正常。但是，我希望能够从文件（例如 index.php.src）提供 PHP（或其他）源（具有适当的扩展名），同时让 index.php.src 如果直接访问也返回 404。

```
RewriteCond %{REQUEST_URI} /(?!index$)
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.+)$ /$1.php [QSA,L,E=norewrite:1]

RewriteCond %{ENV:norewrite} !1
RewriteCond %{REQUEST_FILENAME}\.src -f
RewriteRule ^(.+)$ /$1.src [L,E=norewrite:1]

RewriteCond %{ENV:norewrite} !1
RewriteCond %{REQUEST_URI} \.php$ [OR]
RewriteCond %{REQUEST_URI} \.src$
RewriteRule ^(.+)$ - [R=404] 
```

这似乎不起作用。它在内部重定向到 index.php，然后到 index.php.src，然后是 404s。

有趣的是，在第一个示例中，环境变量确实阻止了第二个规则集的执行，并且页面按预期加载。当我添加您在第二个示例中看到的中间规则集时，环境变量似乎不再有任何效果。如果我从第二个示例中删除第二个规则集，将附加行保留在最后一个规则集中，它的行为就像第一个示例一样（除了请求例如 index.php.src 返回一个 404，这是我想要的） .

由于各种原因，为此目的使用查询字符串是不可接受的，它必须是环境变量。

我怎样才能使这项工作？我究竟做错了什么？

**编辑：** 如果我解释得不好（我很确定我做到了）......

*   存在以下两个文件：“index.php”和“index.php.src”
*   如果我使用第一组规则请求 http://domain.com/，我会得到我的主页（如预期的那样）。使用第二组规则，我得到一个 404。使用第二组规则，减去第二节，我得到我的主页（如预期的那样）。
*   如果我使用任一组规则请求 http://domain.com/index，我会得到 404，正如预期的那样。
*   如果我使用任一组规则请求 http://domain.com/index.php，我会得到 404。这是预期的第一组，但我希望得到“index.php.src”的内容。
*   如果我使用第一组规则请求 http://domain.com/index.php.src，我会得到“index.php.src”的内容，正如预期的那样，因为 *.src 上的 404 规则不是在那个集合中。无论有没有第二节，我在第二组中都得到了预期的 404。

问题似乎在第二节中，但我无法弄清楚出了什么问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:18:08.793

这是我所做的工作：

```
RewriteCond %{IS_SUBREQ} false
RewriteCond %{REQUEST_URI} /(?!index$)
RewriteCond %{ENV:REDIRECT_STOP} !1
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.+)$ /$1.php [QSA,L,E=STOP:1]

RewriteCond %{IS_SUBREQ} false
RewriteCond %{ENV:REDIRECT_STOP} !1
RewriteCond %{REQUEST_FILENAME}\.src -f
RewriteRule ^(.+)$ /$1.src [L,E=STOP:1]

RewriteCond %{IS_SUBREQ} false
RewriteCond %{ENV:REDIRECT_STOP} !1
RewriteCond %{REQUEST_URI} \.php$ [OR]
RewriteCond %{REQUEST_URI} \.src$
RewriteRule ^(.+)$ - [R=404] 
```

您会注意到我添加了 %{IS_SUBREQ} 位，这有助于解决导致其变为 404 的主页重定向问题。此时，查询字符串方法变得可以接受，并且我确实可以使用该方法，但我'不是那种只管让它那样的人，我知道这是可以做到的，我会做到的（我做到了！）

除了将变量名称从“norewrite”更改为“STOP”（为了清楚起见）之外，我了解到当发生内部重定向时，mod_rewrite 设置的环境变量以“REDIRECT_”为前缀。这就是为什么设置“norewrite”（“STOP”）的值，然后检查同一个变量，不起作用的原因。当我在检查行中将“REDIRECT_”附加到它时，它现在按预期运行。

*   请求“/awesome”将处理“awesome.php”并返回其输出
*   请求 '/awesome.php' 将返回 'awesome.php.src' 的内容（这是 'awesome.php' 的符号链接）
*   请求 'awesome.php.src' 将返回 404

这正是我想要的！希望这也会对其他人有所帮助。

# php - cakephp 正在查询额外的列，我不知道为什么

> ID：11805539
> 
> 赞同：0
> 
> 时间：2012-08-04T02:53:05.370
> 
> 标签：php, mysql, cakephp

我在让 cakephp 正确查询时遇到了一些麻烦。Cake 试图在我的一张桌子上找到一个不存在的列，但我不知道为什么。我有两个表与此有关；投票和帖子。用户可以对帖子进行投票。

这是表格

```
Table votes
post_id |  user_id | vote

table posts
post_id | tite | body | created | modified  | user_id | vote_total 
```

当用户对帖子进行投票时，他们的投票将被放置在投票表中，并且 vote_total 会根据他们的投票而增加/减少。

在帖子索引中，用户可以通过这两个链接对帖子进行投票。现在我都发送到同一个函数只是为了让一个工作，然后我会完成另一个

```
<td><?php echo $this->Html->link('Upvote', array('action' => 'vote', $post['Post']['id']))?>
    <?php echo $this->Html->link('Downvote', array('action' => 'Downvote', $post['Post']['id']));?></td> 
```

当我查看显示帖子的 index.ctp 时，出现以下错误

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Post.id' in 'field list' 
```

这是它正在执行的查询

```
SQL Query: SELECT `Post`.`post_id`, `Post`.`title`, `Post`.`body`, `Post`.`created`, `Post`.`modified`, `Post`.`user_id`, `Post`.`vote_total`, `Post`.`id` FROM `blog`.`posts` AS `Post` WHERE 1 = 1 
```

**所以，我的问题是我不知道从哪里查询**Post.id。我一直在搜索我的功能和模型，但我无法弄清楚发生了什么。

这是我的帖子控制器的功能

```
public function vote($id=null){ 
$this->layout = 'votes_layout';
$this->Post->Votes->recursive = 0;

$this->Post->id = $id;
$user = $this->Auth->User();
$userid = $user['id'];
$conditions = array('votes.id' => $id, 'votes.user_id' => $userid);

$data = $this->Post->Votes->find('all', array('conditions' => $conditions));

if (isset($data) && !empty($data)) {
    echo '<p>User have already give a vote!</p>';
} else {

    if($this->Post->Votes->validates()){

        if ($this->Post->Votes->save($this->request->data)) {
                $this->Session->setFlash(__('The vote has been saved'));
                $this->redirect(array('action' => 'vote'));
        } else {
                $this->Session->setFlash(__('The vote could not be saved. Please, try again.'));
        }
    }   
}
} 
```

这是在我的帖子模型中

```
 public $hasMany = array(
    'Votes' => array(
        'className'  => 'Vote',
        )
    ); 
```

所以，我的问题是我在做什么导致蛋糕查询 post.id？它甚至不是我表中的一列，我无法弄清楚查询的来源。

**编辑**

当我在我的 Posts 模型中删除投票的 hasMany 关系时，查询错误消失了，但是我有以下错误，它引用了表中的每个帖子字段。

```
Undefined index: id 
```

这不是hasmany关系吗？每个帖子都有很多投票，但每个用户每个帖子只有一票。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:32:23.333

您需要`id`在两个表`posts`中都有字段。`votes`

在你的`posts`表中你有`post_id`字段，但你的情况没有必要。

因此，`post_id`从`posts`表中删除并检查结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:17:50.440

假设您遵循 CakePHP 约定并且`id`在您的所有表中都有。

由于您正在调用`$this->Post->Vote->recursive = 0`，CakePHP 将选择所有`Post`与您的`Vote`. 由于您有`Post hasMany Vote`关系，当它通过 选择投票时`$this->Post->Vote->find()`，它将`Vote.post_id`首先检查外键。

然后，为了选择`Post`，它必须在`Posts`表上运行类似的查询`Post.id = Vote.post_id`。这可能就是它的`Post.id`来源。

不过看起来很奇怪的是它的调用`Post.post_id`（它自然不存在，因为我假设你不会将模型与自身关联）。可能正在调用的函数可能仍然是`recursive`调用，但是它正在尝试获取*所有*帖子。我不知道您的应用程序是如何编码的，但是提示您进一步跟踪的提示将转向`recursive`并`-1`查看是否调用了它（不要担心丢失数据）。如果它在 recursive=-1 后没有运行该查询，那么尝试使用更具体的东西，如`Containable`组件（参见 CakePHP 的书）来获取您的数据 - 这可能会有所帮助。

我不确定这是否会有所帮助，当我看到`Post.id`失踪时，我突然想到了。请让我知道它是否有效（或无效）:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T05:40:02.660

试试这个东西：

您的帖子数据格式不正确：

```
$data = array('post_id'=>$id,'user_id'=>$userid);

if ($this->Post->Votes->save($data)) {
            $this->Session->setFlash(__('The vote has been saved'));
            $this->redirect(array('action' => 'vote'));
    } else {
            $this->Session->setFlash(__('The vote could not be saved. Please, try again.'));
    } 
```

# image-processing - 将图像放置在另一个图像的特定区域

> ID：11805540
> 
> 赞同：1
> 
> 时间：2012-08-04T02:53:08.517
> 
> 标签：image-processing

这是一个椭圆形和一个盒子

![图像1](../Images/36d38f59e81aed1543e02eb6f03b3517.png)

![图2](../Images/03d6948266753db9227f9ed840c48933.png)

目标是将椭圆放置在绿色框内。

如果您将底部的绿色框想象为您的边界，则顶部图像可以放置在绿色框内的任何位置。椭圆不能流出绿框。

输入只是两个图像，我被告知“将红色椭圆放入绿色框中”。如果不可能（例如：椭圆形太大），则什么也不会发生。

在图像编辑器中手动完成是微不足道的：只需将顶部图像拖到绿色框上并确保它不会从侧面流出。

这个问题应该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:58:12.827

有多种方法可以做到这一点，选择一种取决于问题限制。在最简单的情况下，如果您知道红色、蓝色和绿色的确切颜色，并且知道没有任何形状被旋转，则解决方案很简单。首先对图像进行二值化，以便仅分离一个对象（椭圆形或矩形），然后找到该对象的最高、最低、最左边和最右边的点。对另一个对象重复。该信息将告诉您椭圆是否适合矩形。

如果这些约束过于严格，那么您可能需要使用[blob](http://en.wikipedia.org/wiki/Blob_detection)检测。也许是[cvblob](http://code.google.com/p/cvblob/)或[cvbloblib](http://opencv.willowgarage.com/wiki/cvBlobsLib/)。他们可以处理更一般的不同颜色和方向的情况。

# ios - 在导航控制器中“返回”时，ARC 没有释放内存 - 它正在减慢我的 uipageviewcontroller

> ID：11805543
> 
> 赞同：3
> 
> 时间：2012-08-04T02:54:32.283
> 
> 标签：ios, uinavigationcontroller, automatic-ref-counting

我正在开发的应用程序的一部分涉及 UIPageViewController，其中每个页面都显示一个存储在 Core Data 中的“条目”。除其他外，条目包括一些正在压缩和存储为 NSData 的图像。因此，要加载这些图像并将它们显示在页面上，我使用 imageWithData，即

```
photo.image = [UIImage imageWithData:entry.photo]; 
```

问题是 imageWithData 不是特别快，因此翻阅页面没有我想要的响应速度。我补救这种情况的最佳尝试是将我的 UIPageViewController 显示的一些视图控制器预加载到一个数组中。（不确定这是否是最好的做法，但你有它）

所以，澄清一下，我有一个导航控制器，它包含 viewControllerA，然后链接到 viewControllerB - 它显示 UIPageView 和 entryControllers（每个页面上一个 entryController）。问题是当我使用导航栏从viewControllerB 回到viewControllerA 时，我希望viewControllerB 的entryControllers 数组从内存中释放。但是，ARC似乎没有这样做。因此，在 viewControllerA 和 viewControllerB 之间来回切换了几次，每次翻几页后，我开始收到内存警告——这最终会清除当前的 entryControllers 数组，并破坏了拥有该数组的目的，因为然后每次我收到内存警告时都必须重新加载条目。

简而言之，当我通过导航控制器返回 viewControllerA 时，ARC 并没有清除我为 viewControllerB 分配的任何内存。我不喜欢那样。如果有人可以提出发生这种情况的原因，或者让我知道我是否以错误的方式处理这整件事，我们将不胜感激。我只是想加快从一页到下一页的转换！

谢谢一堆。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T03:03:27.357

ARC 不释放您的内存的唯一原因是您仍将其保留在某个地方。只有你知道那是哪里。

通常，这是由保留周期引起的，这很容易发生在块中。

但是，您很可能将指向对象的指针保存在某个地方，在控制器、iVar 或某个集合中。

您是否在代码上运行过静态分析器？它非常擅长找到其中一些东西。

仪器告诉你什么？它有一些用于查找泄漏和保留周期的简洁工具。

**编辑**

您可以对所需的任何对象进行尽可能多的引用。一旦计数变为零，它将被释放。

问题是您持有一个强指针数组，将视图控制器作为缓存。如果您希望它们被释放，您必须手动将这些指针归零。您以某种方式将控制器预加载到数组中。他们会一直活着，直到你卸载它们。

所以，只要你有一个指向某个东西的强指针，它就会一直存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T03:05:30.947

Jody 的编辑，特别提到了将指针设置为 nil，这让我在理解方面大有可为，最后，当我的“viewControllerB”消失时，我能够通过将某些指针设置为 nil 来找出我的问题。然而，一路走来，我还意识到另一个重要的一点——核心数据中的大图像是一个巨大的内存负担，在 iOS 5 中，可以通过设置允许外部存储的选项来解决这个问题。因此，对于像我这样的相对初学者并且可能遇到类似内存问题的任何其他人，这是限制存储大量数据的托管对象占用内存量的关键方法 - 您的图像（或任何大量数据） ) 会自动保存到文件中，而无需您在代码中做任何不同的事情。

# javascript - 在jQuery中，如何测试一个元素是否是同一类的许多元素中的第一个？

> ID：11805550
> 
> 赞同：1
> 
> 时间：2012-08-04T02:56:04.640
> 
> 标签：javascript, jquery

我有3个div：

```
<div class='squares' id='div1'></div>
<div class='squares' id='div2'></div>
<div class='squares' id='div3'></div> 
```

使用 jQuery，我想将一个 css 属性（一个边框右）应用于所有 div，除了第一个。

我应该使用什么 if 语句？我想在 if 语句中使用该类（而不是 id）。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T02:59:13.437

您可以使用`:not()`和`:first`选择器：

```
$('.squares:not(:first)').addClass('border') 
```

或者：

```
$('.squares:not(:first)').css('border-right', 'value') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T03:03:59.333

你用[`:first`](http://api.jquery.com/first-selector/)和[`:not()`](http://api.jquery.com/not-selector/)选择器绑定了吗？

我没有测试过，但下面的代码应该做你想要的：

```
$(".squares:not(:first)").css("border-right", "thin solid red"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T03:08:58.000

`.is()`在您的`if`声明中使用：

```
if (!$(this).is(".squares:first()")) {
    // not the first square 
} 
```

# ant - 蚂蚁嵌套循环

> ID：11805554
> 
> 赞同：4
> 
> 时间：2012-08-04T02:56:47.573
> 
> 标签：ant, copy, ant-contrib

我有两个 txt 文件： File1.txt - 包含 src 目录列表；和 File2.txt - 包含 dest 目录列表。我需要使用从 src 目录到 dest 目录的循环来进行复制。

File1.txt（SVN可怕的结构）

```
abcBIN
abcBIN/fdPro
...so on 
```

File2.txt（LINUX结构）

```
apps/xxx/yyy/bin/abc
apps/xxx/yyy/bin/abc/fdpro
...so on 
```

我需要将 abcBIN 文件目录复制到 apps/xxx/yyy/bin/abc 等等。一对一映射。

```
<project xmlns:ac="antlib:net.sf.antcontrib">

<taskdef resource="net/sf/antcontrib/antcontrib.properties"> 
   <classpath>
      <pathelement location="path-to-ant-contrib.jar"/>
   </classpath>
</taskdef>

<loadfile property="file1" srcfile="File1.txt"/> 
<loadfile property="file2" srcfile="File2.txt"/>

<ac:for param="i" list="${file1}">
    <ac:for param="j" list="${file2}"> 
        <sequential>
           <echo>@{i}@{j}</echo>
           <echo>copying....</echo>

           <property name="src.dir" value="/home/name/svn_repo/dir" />
           <property name="dest.dir" value="/home/name/mapp" /> 
           <copy todir="${dest.dir}/@{j}">
              <fileset dir="${src.dir}/@{i}"> 
              </fileset>
           </copy>     
        </sequential>
     </ac:for>
</ac:for>

</project> 
```

但它不起作用。

我收到一个错误：

```
ac:for doesn't support the nested "for" element 
```

我不能使用 UNIX shell 或 Perl。它必须在 Ant 中完成。

如果您对 Ant 中的嵌套循环有更好的了解，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:51:55.480

@PulakAgrawal：我使用冒号作为行分隔符将两个文本文件合并为一个，然后魔术开始了 :)

例如 src 路径：目标路径

```
 <loadfile property="allfiles" srcFile="mapping"/>

      <ac:for list="${allfiles}" param="line" delimiter="${line.separator}">

     <ac:sequential>

            <ac:propertyregex property="from" input="@{line}" regexp="(.*):(.*)" select="\1" override="true"/>

            <ac:propertyregex property="to" input="@{line}" regexp="(.*):(.*)" select="\2" override="true"/>

            <echo>Copying dir ${from} to ${to} ...</echo>

            <property name="src.dir" value="." /> <property name="dest.dir" value="." />

            <copy todir="${dest.dir}/${to}">     <fileset dir="${src.dir}/${from}">  </fileset> </copy>

     </ac:sequential>

     </ac:for> 
```

# php - preg_match_all() 如何显示结果？数组到字符串转换错误

> ID：11805559
> 
> 赞同：0
> 
> 时间：2012-08-04T02:58:33.130
> 
> 标签：php

我试过学习这个，但无论出于何种原因，它都不起作用。

我有以下内容：

*   **此处的文字：** 5.3 x 6.0 x 40 米

在代码中是：

```
<li><b>
text here:
</b>
5.3 x 6.0 x 40 metres 
</li> 
```

这个 HTML 在一个变量中，我们称之为 $dimensions 我正在尝试`5.3 x 6.0 x 40 metres`使用 preg_match_all 提取，理想情况下提取尺寸和测量值，但我无法回显结果。尽管匹配的大小为 5，但它每次都说数组转换为字符串错误。有什么想法吗？

```
preg_match_all('/\<li\>([0-9]*\.*[0-9]*)x([0-9]*\.*[0-9]*)x([0-9]*\.*[0-9]*)
             \s*([a-zA-Z]*)\<\/li\>/',$dimensions,$matches,PREG_PATTERN_ORDER);
         echo sizeof($matches);
         echo($matches[0]); 
```

编辑：

正如下面的答案所建议的那样：有人说使用 var_dump($matches) 来查看数组包含的内容...原来我有 4 个空数组，这就引出了下一个问题。我的 preg_match_all 有什么问题？

```
array (size=5)
    0 => 
       array (size=0)
           empty
    1 => 
       array (size=0)
           empty
    2 => 
       array (size=0)
           empty
    3 => 
       array (size=0)
           empty
    4 => 
       array (size=0)
           empty 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:31:34.810

```
$dimensions = '<li><b>
text here:
</b>
5.3 x 6.0 x 40 metres 
</li>';
$t = simplexml_load_string($dimensions);
echo $t; 
```

它将提取**5.3 x 6.0 x 40 米**，而不是您的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T03:21:44.790

我建议不要首先使用 pregmatch 用于此类目的，而是使用 html`DOMdocument`并使用 XPath 查询节点，将结果限制为文本本身，然后使用 preg_match_all

```
 $content = "<li>
                   <b>
                      text here:
                  </b>
                   5.3 x 6.0 x 40 metres 
             </li>";
  $doc = new DOMDocument();
  $doc->loadHTML($content);
  $xp = new DOMXPath($doc);
  foreach($xp->query('/html/body/li/text()') as $child){
         $dimensionText = $child->textContent;
         preg_match_all('!\d+!', $dimensionText, $matches);
         print_r($matches);
  } 
```

以上将为您提供每个维度的数值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T03:07:34.930

尝试使用 var_dump 检查数组包含的内容：

```
<?php
$a = array(1, 2, array("a", "b", "c"));
var_dump($a);
?> 
```

# windows-8 - 删除输入中的 X 按钮 - Metro

> ID：11805562
> 
> 赞同：1
> 
> 时间：2012-08-04T02:58:55.393
> 
> 标签：windows-8, windows-runtime, windows-store-apps, winjs

我用 Javascript 编写了一个 Metro 程序。问题是 Windows8 自动为其添加了一个 X 按钮。现在如何编辑或删除该按钮？下面是我的布局，X 按钮与电子邮件输入重叠。

![在此处输入图像描述](../Images/2d6bd62660a164c3c3b45279921f8d6f.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T15:04:24.153

详细信息在这里：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465498.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465498.aspx)

您需要使用 -ms-clear 伪元素，并根据需要设置它的样式，或者不显示它：

```
input::-ms-clear {
    display: none;
} 
```

请注意，您可能不想显示任何内容，因为这会删除删除当前输入的易于触摸的 X。

# android - 如何在代码中设置 TextView 的 layout_weight？

> ID：11805566
> 
> 赞同：1
> 
> 时间：2012-08-04T03:00:27.107
> 
> 标签：android, textview, layoutparams

我环顾四周，但大多数都没有任何意义。有些有第三个参数，至少不再存在于 Android 文档中。有人知道如何做到这一点吗？到目前为止我有这个：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if(convertView == null) {
            LayoutInflater inflater = LayoutInflater.from(parent.getContext());
            convertView = inflater.inflate(R.layout.day_view_item, parent, false);
        }

        ((TextView)convertView.findViewById(R.id.day_hour_side)).setText(array[position]);
        if(count == 1) {
            LinearLayout layout = (LinearLayout)convertView.findViewById(R.id.day_event_layout);
            TextView create = new TextView(parent.getContext());
            create.setLayoutParams(new LayoutParams(0, 30));
            create.setBackgroundColor(Color.BLUE);
            create.setText("Test");

            layout.addView(create);
            count = count -1;
        }

        return convertView;
    } 
```

我正在尝试将它添加到 a`LinearLayout`中`ListView`，因此您在代码中看到的方法。一个问题是`TextView`我运行它时没有出现。所以我在想我需要layout_weight。虽然，我对一件事感到困惑。构造函数的宽度和高度参数是什么值`LayoutParams`（dp 或 px）？我还将添加我尝试添加的 xml，以防万一这很有帮助：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

<TextView 
    android:id="@+id/day_hour_side"
    android:layout_width="wrap_content"
    android:layout_height="62dp"
    android:text="12AM"
    android:background="#bebebe"
    android:layout_weight="0"
    android:textSize="10dp"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"/>
<LinearLayout 
    android:id="@+id/day_event_layout"
    android:layout_width="0dp"
    android:layout_height="62dp"
    android:layout_weight="1"
    android:paddingTop="1dp"
    android:paddingBottom="1dp"
    android:orientation="horizontal" ></LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T03:08:04.383

首先，`LayoutParams`构造函数使用像素（根据文档）。

要以`layout_weight`编程方式设置，您需要使用`LinearLayout.LayoutParams`. `ViewGroup.LayoutParams`正如您指出的那样，没有第三个参数，但前者有。

试试这个：

```
create.setLayoutParams(new LinearLayout.LayoutParams(0, 30, 1.0f)); 
```

[`ViewGroup.LayoutParams`](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)是`View`任何类型布局中的任何布局参数的集合（因为这些布局都是`ViewGroup`s）。当您有特定布局时，例如 a `LinearLayout`，您可以使用[`LinearLayout.LayoutParams`](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)来访问特定于该布局类型的内容。在这种情况下， s`layout_weight`是特定`LinearLayout`的，因此您必须使用`LinearLayout.LayoutParams`来访问此权重参数。

您还应该`layout_weight="0"`从`TextView`XML 中删除 。如果这仍然不能解决它，给你`LinearLayout`一个背景颜色，看看它是否完全可见，然后用你的发现和任何更改/新代码编辑你的 OP。

# emacs - 为什么 Emacs 中的“goto-line”仅用于交互使用？

> ID：11805572
> 
> 赞同：21
> 
> 时间：2012-08-04T03:01:14.253
> 
> 标签：emacs, elisp

`goto-line`如果在非交互式 elisp 程序中使用该函数会出现什么问题？它的文档字符串给出了一个警告说：

> 在 Lisp 程序中使用这个函数通常是错误的。您可能想要的是：
> 
> ```
> (goto-char (point-min)) (forward-line (1- N)) 
> ```

此外，当我尝试`byte-compile-file`包含 的初始化文件时`goto-line`，我再次收到这样一个令人不快的警告：

```
.emacs:170:19:Warning: `goto-line' used from Lisp code
That command is designed for interactive use only 
```

`goto-line`在非交互式程序中使用真的那么危险吗？相关地，为什么建议的`forward-line`解决方案更可取？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-04T04:25:13.333

首先，这可以防止 Elisp 程序员陷入坏习惯——以行号为中心的方式编写低效的代码。即，而不是使用 `(forward-line 1)`计算当前行号，递增和使用 `goto-line`.

从此邮件列表文章中[：](http://lists.gnu.org/archive/html/help-gnu-emacs/2004-02/msg00642.html)

> 简而言之，goto-line 不应该成为常用命令的原因是，通常没有理由想要到达第 N 行，除非您有一个程序告诉您该行有一些有趣的东西。

其次，goto-line 除了移动点（即`push-mark`）之外还操纵用户的环境。对于非交互式使用，这可能不是您想要的。另一方面，如果考虑了所有这些，您认为 goto-line 正是您所需要的，那么就这样称呼它：

```
(defun foo ()
  (interactive)
  (with-no-warnings
    (goto-line N))) 
```

而且您不会收到任何编译器警告。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-04T06:31:57.683

除了所说的：

“goto-line”最终递归到“(forward-line (1-line)”，这实际上完成了工作。“goto-line”命令主体的 43 行中的所有其他行都处理交互使用。例如，考虑一个可能是普遍的论点。

在编写程序时。运行它时，您的计算机处于另一种状态，而不是跟随交互式呼叫。因此，您应该直接使用“前向线”来解决这种状态。

# objective-c - UI滚动视图。如何使用侧面的滚动条？

> ID：11805573
> 
> 赞同：2
> 
> 时间：2012-08-04T03:01:20.927
> 
> 标签：objective-c, ios5, xcode4, ios-simulator

我正在使用 Xcode 为 iOS 开发使用`UIScrollView`. 我让滚动视图工作得很好。

但我的问题/问题是处理如何使用滚动视图一侧的滚动条：

例如，我在模拟器中的滚动视图内动态创建了 2000 个按钮。按钮是垂直排列的，所以我必须向下滚动才能看到所有按钮。我不想模拟滚动 30 到 40 次以到达第 1500 个按钮。

我有代码可以转到最后一个按钮并滚动到顶部。但是我想知道是否有人可以就我是否可以使用该滚动视图侧面的滚动条提供见解，以帮助我更好地导航滚动。

![在此处输入图像描述](../Images/2529729b8550bff1d4eb4d0d06012026.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:11:26.707

That bad boy isn't a scroll bar. It's simply a visual indicator of the current location. There are ways to [scroll programmatically](https://stackoverflow.com/questions/2234875/programmatically-scroll-a-uiscrollview), but I'm not sure that's really what you want to do.

# jquery - 如何使用 .jsonp jquery 从 url 检索数据？

> ID：11805581
> 
> 赞同：1
> 
> 时间：2012-08-04T03:03:19.330
> 
> 标签：jquery

有谁知道如何使用`.jsonp`jquery 从 URL 检索数据？我已经编写了以下代码，但它似乎对我不起作用：

```
$.JSONP({
    url: 'http://test.com',
    callbackKey: 'jsoncallback',
    onComplete: function (data) {
        alert(data)
        // the request was completed.
    }
}); 
```

注意：网址工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:36:32.270

是什么`$.JSONP`？最简单的方法如下

```
var url="http://scoreboardwcf.sportal.com.au/scoreboard.svc/GetCalendarData?BaseURL=http://www.sportal.com.au/&Sport=All&CompetitionID=0&callback=?";
$.getJSON(url, function(data) {
  alert(data);  
}); 
```

[这是一个例子](http://jsfiddle.net/heera/fk8jD/3/)。

**更新：**既然你在评论中问过 - 我怎样才能将它应用到 f​​or 循环中？

```
var url="http://scoreboardwcf.sportal.com.au/scoreboard.svc/GetCalendarData?BaseURL=http://www.sportal.com.au/&Sport=All&CompetitionID=0&callback=?";

$.getJSON(url,  function(data) {
    document.write('DefaultFixtureNo : '+data.Calendar.DefaultFixtureNo+'<br /><br />');
    var items=data.Calendar.FixtureData;
    for(i=0;i<items.length;i++){
        var item=items[i];
        for(x in item) document.write(x+' : '+item[x]+'<br />');
        document.write('<br /><br />');
    }
}); 
```

[示例这里使用 for 循环](http://jsfiddle.net/heera/fk8jD/4/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T03:37:33.983

这会帮助你，

```
 $.ajax({
            dataType: 'jsonp',
            url: "http://scoreboardwcf.sportal.com.au/scoreboard.svc/GetCalendarData?BaseURL=http://www.sportal.com.au/&Sport=All&CompetitionID=0&callback=?";,
            success: function () {alert('Success');},
            error: function (jqXHR, textStatus, errorThrown) {
                alert(textStatus);
                alert(errorThrown);
            },
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T05:35:36.790

如何使用 $.jsonp 执行 http GET 请求

示例来自关于除 GET 之外执行 http-method 的 stackoverflow 问题

[“jquery.jsonp.js” GET 工作。POST PUT DELETE 选项呢？](https://stackoverflow.com/questions/16684090/jquery-jsonp-js-get-works-what-about-post-put-delete-options)

```
$.jsonp({
    cache: false,
    url: 'http://www.mydomain.com/logicalurl/2/',
    callbackParameter: 'callback',
    timeout: 10000,
    success: function(json, textStatus, xOptions) {
        myglob = json;
        MyModulePatternObject.initNew(json);
    },
    error: function (xOptions, textStatus) {
        console.log("fail");
    }
}); 
```

`myglob`用于在 Tools->Web Developer->Web Console 中调试时查看和操作 json 响应。也使用萤火虫

`MyModulePatternObject.initNew(json)`只是在成功的 jsonp 请求后调用的重命名方法。

`cache: false,`推荐`PageCache: true,`在生产代码上使用。在开发应用程序时，请关闭缓存。

# emacs - 在差异模式下自动启用空白模式

> ID：11805584
> 
> 赞同：3
> 
> 时间：2012-08-04T03:04:19.987
> 
> 标签：emacs, elisp

我已经对此进行了谷歌搜索，但找不到任何 elisp 脚本。有时我会做一个空白清理然后 diff-buffer-with-file 看看空白清理做了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T15:34:43.867

如果您希望为所有差异模式缓冲区启用空白模式：

```
(add-hook 'diff-mode-hook 
          '(lambda () 
            (whitespace-mode 1))) 
```

# java - Java括号表示法？

> ID：11805586
> 
> 赞同：9
> 
> 时间：2012-08-04T03:04:39.147
> 
> 标签：java

在 javascript 中，您可以使用点表示法或括号表示法来引用对象的属性。这可以通过使用字符串变量来实现，例如：

```
var myObject = { hello: "world" };
var prop = "hello";

// both will output "world".
console.log( myObject[ prop ] );
console.log( myObject.hello ); 
```

java中是否有类似的语法来使用字符串变量访问对象属性，类似于javascript的括号表示法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T03:09:00.157

No, there's not. About the closest thing there is would be using reflection, but that's clunky to say the least. You have to look up the `Field` and then get the instance's value for it.

```
Field property = myInstance.getClass().getDeclaredField("prop");
Object value = property.get(myInstance); 
```

Not what you're looking for, I know, but it's the closest there is unfortunately.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T03:08:28.033

No, there is no such syntax in Java, but there is an API ([reflection](http://docs.oracle.com/javase/tutorial/reflect/index.html)) that lets you do that, albeit in a less direct way.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T03:08:42.637

There is no similar syntax in java, or any direct way to do this.

java *does* provide a reflection API that allows you to query an object's properties/interface at runtime using `Strings` that represent e.g. an object's properties and methods.

You can also store (key, value) properties in a data structure such as a `HashMap`, mapping `Strings` to objects.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T04:38:16.833

**1.**我认为java中没有类似的语法。

**2.**但我更喜欢使用这`Key-Value`对，就是这样`Map`。

**3.** `Reflection API`在这种情况下也可以使用。

# javascript - 使用 jQuery 解析 JSON 对象数组

> ID：11805593
> 
> 赞同：1
> 
> 时间：2012-08-04T03:07:15.827
> 
> 标签：javascript, jquery, arrays, json, parsing

我想做的是解析这个 JSON：[http ://www.theunjust.com/test/container.php](http://www.theunjust.com/test/container.php)

让它在这一点上显示......

这是我当前的代码（全部被顶起）

```
$(document).ready(function(){
    var jsonurl = "container.php";
  $.getJSON(jsonurl, function(data) {         
    $.each(data.encompass,function(i,valu){
    var content,
    cont = '',
    tainers = valu.containers;

  $.each(tainers, function (i) {
    var tid = tainers[i].TID,
    top = tainers[i].Top,
    cat = tainers[i].Category,
    date = tainers[i].Date,
    icon = tainers[i].Icon,
    clink = tainers[i].ContainerLink,
    uid = tainers[i].UniqueID;

        cont += '<a href="' + clink + '">' + uid + '</a> ';
        $('ul').append('<li>' + tid + ' - ' + top + ' - ' + cat + ' - ' + date + ' - ' + icon + ' - ' + clink + ' - ' + uid + ' (' + cont + ')</li>');
    }); 
  }); 
}); 
}); 
```

我知道代码没有意义，这对我来说更像是一种学习体验，而不是一个功能性工具。问题可能出在 JSON 数据本身，如果是这种情况，您会推荐什么 stackoverflow Web 服务帖子？

我最终的目标是运行多个 Web 服务并将它们组合起来......这样 container.php 加载并拥有包装 div 所需的所有信息，然后 entry.php 加载并填充由生成的 div容器..

我目前正在学习 jQuery，老实说，我还没有达到这个水平，但我很快就会到达那里。

我非常感谢您的帮助，并希望您能指出我成为 JSON 解析专家的方向！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:50:35.860

`containers`包含单个节点。所以简单地使用

```
$.each(tainers, function (i, v) {
    var tid = v.TID,
    top = v.Top,
    cat = v.Category,
    date = v.Date,
    icon = v.Icon,
    clink = v.ContainerLink,
    uid = v.UniqueID;

    cont += '<a href="' + clink + '">' + uid + '</a> ';
    $('ul').append('<li>' + tid + ' - ' + top + ' - ' + cat + ' - ' + date + ' - ' + icon + ' - ' + clink + ' - ' + uid + ' (' + cont + ')</li>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T07:49:22.440

该程序展示了如何读取 json 并将数据存储到文本框中：

```
$(document).ready(function(){
  $.getJSON("Test.json",function(data){
       $.each(data,function(key,value){
           alert(data[key].attrib1name);
           alert(data[key].attrib2name); 
           $('input').val(data[key].enterpriseName);
           activities=data[key].activities;
           console.log(value);
       });
   });    
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T03:17:08.310

Don't use jQuery as a hammer for every nail for starters. This is a core JavaScript problem.

There are only two structures to parse in JavaScript. Arrays and objects.

For objects, use:

```
for(var x in obj){ alert(x + ':' + obj[x]) } //would alert <property name>:<property value> 
```

For arrays use a loop like you would in PHP. In JS while loops are nice for arrays:

```
var i = someArray.length;
//if you don't want to loop backwards just do someArray.reverse()

while(i--){
   //do stuff to someArray[i] here
} 
```

JSON is just an object literal in JavaScript. The simplest type of object. Just a place to stick properties. A property can be an array, a value, or another object. The only thing to watch out for is objects that reference other properties in an object (results in infinite loops when attempting to parse) which is a really dumb thing to do with JSON (not even sure that would pass validation).

# c# - 如何在动态绑定中将对象传递给转换器参数？

> ID：11805596
> 
> 赞同：-1
> 
> 时间：2012-08-04T03:07:28.280
> 
> 标签：c#, wpf, data-binding, ivalueconverter

```
var b=new Binding();
b.Source=myobj;
b.Path=new PropertyPath("Text",myParameter);//<-- myParemter is int value
b.Converter=new FollConverter();
control.SetBinding(UserControl.VisibilityProperty,b); 
```

在我的转换器中

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
if(parameter!=null)  //<-- PROBLEM IS HERE, ALWAYS NULL
} 
```

如何在动态绑定中传输对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T03:12:48.360

这不是你使用转换器参数的方式，这个构造[`PropertyPath`函数](http://msdn.microsoft.com/en-us/library/ms587924.aspx)与.`paramter``Convert`

```
b.Path = new PropertyPath("Text");
b.ConverterParameter = myParamter; 
```

# jsf - Hide pagination buttons in table header of p:dataTable

> ID：11805603
> 
> 赞同：33
> 
> 时间：2012-08-04T03:08:35.970
> 
> 标签：jsf, primefaces

I'm using `<p:dataTable>` of PrimeFaces 3.3.1 with pagination. The pagination buttons appear in both the table header and footer. I would like to hide the pagination buttons in the table header and keep the ones in the table footer. How can I achieve this?

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-04T11:52:32.777

根据[PrimeFaces 用户指南](http://primefaces.org/documentation.html)和[`<p:dataTable>`VDL 文档](http://www.primefaces.org/docs/vdl/3.2/p/dataTable.html)，有一个`paginatorPosition`属性可以采用`both`（默认值）`top`或`bottom`.

所以只需将`paginatorPosition`属性设置为`bottom`.

```
<p:dataTable ... paginatorPosition="bottom"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-02T22:54:12.497

在标题上隐藏所有数据表分页符的替代方法：

```
.ui-paginator-top{
    display:none;
} 
```

# meteor - Integrating Expressjs or towerjs with meteor

> ID：11805604
> 
> 赞同：1
> 
> 时间：2012-08-04T03:08:41.000
> 
> 标签：meteor, express, towerjs

We are building a web app, and were evaluating to use meteor. At this point meteor does not do much at the server side. ex there is no routing layer, controllers, ORM etc.

So my first question is are these features expected in future?. Is it going to provide a full stack web framework like Rails.

At this point if we need to use meteor we need more features on the server side. So is it possible to integrate server side mvc web frameworks in meteor like Express , towerjs, railways etc with meteor? Or the other way, can meteor be integrated into such frameworks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:20:49.363

如果原生允许构建 npm 项目和模块，Meteor 将是一个很好的替代方案。忽略 Node.JS 中的所有社区和迄今为止制作的所有支持的资源是一样的，并且在短期和中期做出了一些非常限制性和可能不完整的事情。

正如 Rahul 和 Lance 所说，您还必须考虑 Meteor 非常新且不完整。您还需要考虑 Meteor 试图达到的方法是构建一种不同类型的网站，可能更像是 Web 应用程序而不是传统的网站。

无论如何，我们必须观看 Meteor 项目，继续关注它并查看即将到来的新更新。

* * *

我猜你不能将 Express 与 Tower.JS 结合起来——如果我错了，Lance 纠正我——但我知道你也可以将 Express 和 DerbyJS 结合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:02:31.903

路由和一种形式的 ORM 在[路线图](https://trello.com/board/meteor-roadmap/508721606e02bb9d570016ae)上。您已经可以编写“控制器”，因为您可以通过 Meteor.methods 公开方法，客户端可以调用这些方法并处理数据库中的对象。

正如 Lance 所说，Meteor 是一个全栈框架，但仍在开发中。如果您想使用 Meteor 但发现它不完整，我建议您等待并在此期间使用其他东西（如 Tower 或 Express）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T17:45:02.373

有一个[Meteorite 包](https://github.com/glittershark/meteor-express)，它提供与 Meteor 一起用于开发 REST API 等的 express（免责声明：我是作者）

# matlab - matlab: Indexing and output allocation

> ID：11805610
> 
> 赞同：1
> 
> 时间：2012-08-04T03:09:07.457
> 
> 标签：matlab, memory-management, indexing

I need help with the following code:

```
N = size(data1,1)/2;
c=NaN((size(data1,1)/2),size(data1,2));
kk=0;
for ii=1:2:((size(data1,1)/2)-1)
c(kk+(1:N-ii),:)=bsxfun(@minus,data1(ii,1:end),data1(ii+1,1:end))
kk=kk+N-ii;
end 
```

The code is attempting to take the difference between all column values between two rows, then get the difference between the next two different rows and so on. Example:

```
matrix a
1  2  3  4
4  5  6  7
8  9  10 11
12 13 14 15
16 17 18 19
20 21 22 23

matrix b
3 3 3 3
4 4 4 4
4 4 4 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:40:15.120

怎么样：

```
a(2:2:end,:) - a(1:2:end-1,:) 
```

编辑：根据您的 for 版本：

```
data1 = [1  2  3  4; 4  5  6  7; 8  9  10 11; 12 13 14 15; 16 17 18 19; 20 21 22 23];
[row,col] = size(data1);
row = row/2;
c = nan(row,col);
for ii = 1:row
    c(ii,:) = bsxfun(@minus,data1(2*ii,:),data1(2*ii-1,:));
end 
```

# javascript - Javascript getUTCDate return the previous day

> ID：11805614
> 
> 赞同：4
> 
> 时间：2012-08-04T03:10:50.963
> 
> 标签：javascript, datetime, date

code like this

```
var date = new Date("2012/09/04");
console.log(date.getUTCDate());
//returns 3 
```

can someone tell me how to get the correct date based on a time string like yyyy/mm/dd?

thx~

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T03:14:32.023

You shouldn't use `getUTCxxx` if you're dealing only with dates (i.e. you're not concerned about time). If you create a `Date` object like you did (specifying only the date) it will set the time to `0:00:00`. When converting to UTC, if your timezone is positive it will subtract some time from your date, so your date will represent the previous day.

Instead, I'd suggest just using `getDate` for that.

**Note:** in my machine (I'm at UTC-3) the snippet above runs just fine (i.e. it returns `4`), but that's because `new Date("2012/09/04")` here evaluates at:

```
alert(new Date("2012/09/04"));
// Tue Sep 04 2012 00:00:00 GMT-0300 (Hora oficial do Brasil)
alert(new Date("2012/09/04").toUTCString());
// Tue, 04 Sep 2012 03:00:00 GMT 
```

If I were at, say, UTC+3 instead, I'd probably get results like:

```
alert(new Date("2012/09/04"));
// Tue Sep 04 2012 00:00:00 GMT+0300
alert(new Date("2012/09/04").toUTCString());
// Mon, 03 Sep 2012 21:00:00 GMT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T04:43:00.710

`"UTC"`将字符串传递给构造函数时，只需添加到字符串的末尾即可：

```
function UTCDate(s) {
    return new Date(s + " UTC");
} 
```

# c# - 可修改的 IComparable 实现？

> ID：11805617
> 
> 赞同：1
> 
> 时间：2012-08-04T03:11:33.990
> 
> 标签：c#, overriding, compareto, icomparable

如果我理解正确，`IComparable`并且`IComparable<T>`旨在允许在一组类型上定义自然或总排序。在任何一种情况下，由`CompareTo(Object)`or定义的关系`CompareTo(T)`必须是**Reflexive**、**Symmetric**和**Transitive**。

当应用于单个类型甚至整个类型层次结构时，这一切都非常好并且非常适用（假设那些更多派生的类型不需要影响关系的定义）。然而，一旦一个子类型引入了一个状态元素，该元素应该影响它与它派生的那些类型的关系，可比较的接口几乎似乎崩溃了。

提供的代码示例演示了我当前对该问题的解决方案。由于`RelationalObject`无法了解实际需要比较的那些类型，其预期目的主要是提供和密封可修改的实现，`CompareTo`同时要求派生类型实际实现基于上下文的比较算法。

我想知道，有没有更好的方法来处理这种情况？我意识到我可能只实现一些`IComparer`或`IComparer<T>`哪些知道并可以处理已知对象的比较；然而，这似乎违背了`IComparable`and的目的`IComparable<T>`。

```
using System;

public abstract class RelationalObject : IComparable<RelationalObject>
{
    public sealed int CompareTo(RelationalObject that)
    {
        int relation = 0;

        if (that == null)
            relation = 1;

        if (relation == 0 && !this.Equals(that))
        {
            Type thisType = this.GetType();
            Type thatType = that.GetType();

            if (thatType.IsInstanceOfType(this))
            {
                if (thisType.Equals(thatType))
                    relation = this.CompareToExactType(that);
                else
                    relation = -1 * that.CompareToSuperType(this);
            }
            else
            {
                if (thisType.IsInstanceOfType(that))
                    relation = this.CompareToSuperType(that);
                else
                    relation = this.CompareToForeignType(that);
            }
        }

        return relation;
    }

    protected abstract int CompareToExactType(RelationalObject that);

    protected abstract int CompareToForeignType(RelationalObject that);

    protected abstract int CompareToSuperType(RelationalObject that);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:38:35.730

`IComparable<T>`主要用于比较*一种*类型的对象，而不是类型及其后代。这就是为什么您在处理未知类型的比较时遇到问题的原因。所以我会坚持实施`IComparer`.

# android - ActionBarSherlock Action Buttons Don't Do Anything When Pressed

> ID：11805618
> 
> 赞同：0
> 
> 时间：2012-08-04T03:11:34.927
> 
> 标签：android, preferences, actionbarsherlock

I've come across a problem that I have searched and searched for a solution for, and cannot find one. I am trying to set up a Preference screen which is opened by an action button on an ActionBarSherlock action bar. The buttons appear on the action bar, but they don't do anything when pressed. They are supposed to start a new intent, but it doesn't. Here's some code:

Main.java:

```
package com.myname.minteract;

import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;

import android.content.Intent;
import android.os.Bundle;

public class Main extends SherlockFragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getSupportMenuInflater().inflate(R.menu.activity_main, menu);
        menu.add("Add Server")
        .setIcon(R.drawable.ic_action_add_server)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        menu.add("Refresh Servers")
        .setIcon(R.drawable.ic_action_refresh)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        menu.add("Settings")
        .setIcon(R.drawable.ic_action_options)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        return(super.onCreateOptionsMenu(menu));
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.addServer:
            startActivity(new Intent(this, AddServer.class));
            return(true);
        case R.id.settings:
            startActivity(new Intent(this, Settings.class));
            return(true);
        }
        return(super.onOptionsItemSelected(item));
    }
} 
```

My other class files and xml files are identical to the ones found [here](https://github.com/commonsguy/cw-omnibus/tree/master/Prefs/FragmentsBC), with minor name changes (posting all of my code would take up an awful lot of space).

Hopefully this is enough information. I am fairly new to Android and very new to ActionBarSherlock, so I may be missing something fairly easy. I've tried using logcat and such, but the button literally does nothing, it doesn't even show up on the logcat with an error.

Thanks!

Extra note: I am testing my app using a HTC Sensation 4G running ICS and a MyTouch 3G running Froyo (to make sure it is compatible with pre-honeycomb devices).

**EDIT:**

Here's my /res/menu/activity_main.xml:

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_settings"
        android:title="@string/menu_settings"
        android:orderInCategory="100"
        android:showAsAction="never" />
    <item android:id="@+id/addServer"
        android:icon="@drawable/ic_action_add_server"
        android:title="Add Server" />
    <item android:id="@+id/refreshServers"
        android:icon="@drawable/ic_action_refresh"
        android:title= "Refresh Servers" />
    <item android:id="@+id/settings"
        android:icon="@drawable/ic_action_options"
        android:title="Settings" />
</menu> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T03:35:54.947

您已经在 XML 文件中设置了所有内容的 ID，并在那里设置了其他所有内容，因此无需`menu.add(...)`在主代码中使用。只需充气`Menu`，一切都会好起来的。

此外，由于您已经处理了该事件，请`true`改为返回。尝试这个：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);
    return(true);
} 
```

~~我个人建议将这些添加为`<item ...>`s`res/menu/activity_main.xml`而不是以编程方式添加，但如果这对您有用，那么这很重要，对吧？~~

# python - Adding additonal validation requirements to a web2py form?

> ID：11805620
> 
> 赞同：1
> 
> 时间：2012-08-04T03:12:24.480
> 
> 标签：python, web2py

I know how to add validation to SQLFORM fields at the level of the database. However, I can't find anything about doing this at the level of individual forms. Ideally I would be able to have an existing SQLFORM and say something like:

```
form.field.requires = # some extra validator 
```

Is there anything like this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T05:12:33.793

首先，请注意 web2py 验证器从不在数据库级别，即使指定为表定义的一部分 - 它们始终在表单级别强制执行。

SQLFORM 用于构建表单字段的`INPUT()`、`SELECT()`和`TEXTAREA()`helper 都采用“requires”属性，该属性可以是单个验证器或验证器列表。SQLFORM 在创建表单时自动将数据库表字段的验证器复制到关联的表单小部件。因此，最简单的方法是在创建 SQLFORM 之前为数据库表字段指定一个验证器：

```
def myform():
    db.mytable.myfield.requires = IS_IN_SET(['a', 'b', 'c'])
    form = SQLFORM(db.mytable).process()
    return dict(form=form) 
```

在这种情况下，SQLFORM 会将验证器从 db.mytable.myfield 复制到表单中关联的“myfield”小部件。

您还可以在创建表单之后（但在处理之前）直接将验证器添加到小部件：

```
form = SQLFORM(db.mytable)
form.custom.widget.myfield['requires'] = IS_IN_SET(['a', 'b', 'c'])
form.process() 
```

访问字段小部件的另一种方法：

```
form.element('input[name=myfield]')['requires'] = IS_IN_SET(['a', 'b', 'c']) 
```

# c# - MonoTouch：在 Retina 显示屏上调整色调时使外观图像尺寸加倍

> ID：11805628
> 
> 赞同：2
> 
> 时间：2012-08-04T03:14:35.033
> 
> 标签：c#, ios, mono, xamarin.ios, retina-display

我正在使用此代码设置导航栏的背景，该代码在 Retina 和非 Retina 显示器中效果很好。有一个@2x 和正常图像。所以，一切都很好：

```
UINavigationBar.Appearance.SetBackgroundImage(
     GetImage(ImageTheme.menubar), UIBarMetrics.Default); 
```

现在，当我将此`ChangeHue()`变换应用于图像以调整其色调时，在 Retina 上显示图像的大小是原来的两倍。非 Retina 显示器很好：

```
 UINavigationBar.Appearance.SetBackgroundImage(
       ChangeHue(GetImage(ImageTheme.menubar)), UIBarMetrics.Default);
    ...

    UIImage ChangeHue(UIImage originalImage){
        var hueAdjust = new CIHueAdjust() {
            Image = CIImage.FromCGImage(originalImage.CGImage),
            Angle = hue * (float)Math.PI / 180f // angles to radians
        };

        var output = hueAdjust.OutputImage;
        var context = CIContext.FromOptions(null);
        var cgimage = context.CreateCGImage(output, output.Extent);
        var i = UIImage.FromImage(cgimage);
        return i;
} 
```

以下是应用 Hue 后在非 Retina 和 Retina 显示中的结果：

![非视网膜](../Images/4f62fa9cf287b0bf993b9411a150ba7b.png)

![视网膜](../Images/0410bc8573653f869587651b7dd0df57.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T11:22:07.430

忽略这些 HACK，并在您的`ChangeHue`方法中编辑此行：

```
var i = UIImage.FromImage(cgimage); 
```

改为：

```
float scale = 1f;
if (UIScreen.MainScreen.RespondsToSelector (new MonoTouch.ObjCRuntime.Selector ("scale"))) {
    scale = UIScreen.MainScreen.Scale; // will be 2.0 for Retina 
}
var i = new UIImage(cgimage, scale, UIImageOrientation.Up); 
```

这应该返回一个`UIImage`对象，该对象具有正确的“比例”信息，可以正确显示在`UINavigationBar`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T13:02:44.963

我从未尝试过 CoreImage，但对于 CoreGraphics，您需要使用`UIGraphics.BeginImageContextWithOptions`并指定`0`缩放（因此它将自动为 Retina 和非 Retina 显示器完成）。

所以我会尝试的第一件事是替换你的：

```
var context = CIContext.FromOptions(null); 
```

使用以下块：

```
UIGraphics.BeginImageContextWithOptions (new SizeF (size, size), false, 0);
using (var c = UIGraphics.GetCurrentContext ()) {
   var context = CIContext.FromContext (c);
   ...
}
UIGraphics.EndImageContext (); 
```

**更新**：`FromContext`在 iOS 中不可用（它是 OSX 特定的），所以上面的代码不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:09:54.967

向 MonoTouch 团队提交了一个错误。将很快发布解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T10:06:10.040

我现在有三个“黑客”建议：

## 黑客 #1

通过替换此行来强制修剪图像的范围：

```
var cgimage = context.CreateCGImage(output, output.Extent); 
```

有了这个：

```
var extent = output.Extent;
if (UIScreen.MainScreen.RespondsToSelector (new MonoTouch.ObjCRuntime.Selector("scale"))) {
    if (UIScreen.MainScreen.Scale == 2f) {
        extent = new System.Drawing.RectangleF(extent.X, extent.Y, extent.Width / 2f, extent.Height / 2f);
    }
}
var cgimage = context.CreateCGImage(output, extent); 
```

但是，您在调整后的图像上“丢失”了 Retina 分辨率（它使用 @2x 图像作为源，但在应用过滤器后仅显示其左下象限，这要归功于图像原点从左下角开始） .

## 黑客 #2

同样，您可以缩放从该`ChangeHue`方法返回的图像，使其不会超出导航栏：

```
var hued = ChangeHue (navBarImage);
if (hued.RespondsToSelector(new MonoTouch.ObjCRuntime.Selector("scale")))
    hued = hued.Scale (new System.Drawing.SizeF(320, 47));
UINavigationBar.Appearance.SetBackgroundImage (hued, UIBarMetrics.Default); 
```

不幸的是，您再次“丢失”了 Retina 分辨率，但至少图像显示正确（只是下采样到 320 宽）。

## 技巧 #3

您可以将过滤后的图像保存到磁盘，然后设置`UIAppearance`使用“磁盘”上的图像文件。代码如下所示：

```
bool retina = false;
if (UIScreen.MainScreen.RespondsToSelector (new MonoTouch.ObjCRuntime.Selector ("scale"))) {
    if (UIScreen.MainScreen.Scale == 2f) {
        retina = true;
    }
}
if (retina) {
    NSError err; // unitialized
    UIImage img = ChangeHue (navBarImage);
    img.AsPNG ().Save ("tempNavBar@2x.png", true, out err);
    if (err != null && err.Code != 0) {
        // error handling
    }
    UINavigationBar.Appearance.SetBackgroundImage (UIImage.FromFile ("tempNavBar.png"), UIBarMetrics.Default);
} else {
    UINavigationBar.Appearance.SetBackgroundImage (ChangeHue (navBarImage), UIBarMetrics.Default);
} 
```

最终破解的好处是图像看起来正确（即保留了 Retina 分辨率）。

我仍在寻找“完美”的解决方案，但至少这些想法以一种或另一种方式“解决”你的问题......

# c# - 了解枚举

> ID：11805630
> 
> 赞同：2
> 
> 时间：2012-08-04T03:15:15.130
> 
> 标签：c#, enums

我试图弄清楚枚举是如何工作的，我试图创建一个函数来写入注册表，使用枚举作为注册表的根目录，但有点困惑

```
public enum RegistryLocation
        {
            ClassesRoot = Registry.ClassesRoot,
            CurrentUser = Registry.CurrentUser,
            LocalMachine = Registry.LocalMachine,
            Users = Registry.Users,
            CurrentConfig = Registry.CurrentConfig
        }

public void RegistryWrite(RegistryLocation location, string path, string keyname, string value)
{
     // Here I want to do something like this, so it uses the value from the enum
     RegistryKey key;
     key = location.CreateSubKey(path);
     // so that it basically sets Registry.CurrentConfig for example, or am i doing it wrong
     ..
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T03:21:14.980

问题是您正在尝试使用类初始化枚举值并将枚举值用作类，这是您无法做到的。来自[MSDN](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.100%29.aspx)：

> 已批准的枚举类型为 byte、sbyte、short、ushort、int、uint、long 或 ulong。

您可以做的是将枚举作为标准枚举，然后让方法根据枚举返回正确的 RegistryKey。

例如：

```
 public enum RegistryLocation
    {
        ClassesRoot,
        CurrentUser,
        LocalMachine,
        Users,
        CurrentConfig
    }

    public RegistryKey GetRegistryLocation(RegistryLocation location)
    {
        switch (location)
        {
            case RegistryLocation.ClassesRoot:
                return Registry.ClassesRoot;

            case RegistryLocation.CurrentUser:
                return Registry.CurrentUser;

            case RegistryLocation.LocalMachine:
                return Registry.LocalMachine;

            case RegistryLocation.Users:
                return Registry.Users;

            case RegistryLocation.CurrentConfig:
                return Registry.CurrentConfig;

            default:
                return null;

        }
    }

    public void RegistryWrite(RegistryLocation location, string path, string keyname, string value) {
         RegistryKey key;
         key = GetRegistryLocation(location).CreateSubKey(path);
    } 
```

# php - php scripts that suddently stops working - where to start looking?

> ID：11805634
> 
> 赞同：0
> 
> 时间：2012-08-04T03:16:20.920
> 
> 标签：php, xml, cakephp, load, external

**If someone doesn't feel like reading the whole explanation, you can skip to the last 2 paragraphs where I have the actual question**

So I have this bunch of websites made with CakePHP. In one of the pages (this is the same for all the websites), I load an XML file and process its contents (using the XML helper). This has been working for quite some time. Now, suddenly, it doesn't work anymore in any of the websites (and the code hasn't changed a bit), it gives an "error opening file".

At the same time, another script of those websites (which has nothing to do with the previous one, it's plain PHP, outside the cakephp "area") has stopped working too. In this case, it's a scripts that creates a connection with a video hosting provider (Fliqz) and retrieves the URL of a video given a video id. Suddently, it throws an error something like "session was not created" (the script creates some sort of session with Fliqz' server to get the URL).

All this sounds very weird, I know. The first thing I've done, after checking that the code is correct, is call 1&1 (the hosting provider) and ask if they have made any change in the server. They said that they changed to PHP5 a few months ago (which I was aware of, and everything was working fine after that change), but that they haven't changed anything else.

My question would be, is there anything I can do to figure out what is causing these problems? For example, I found some post of someone saying that his hosting had restricted some functionality that allowed external connections. Or in another post I saw a suggestion about doing this: **echo file_get_contents("http://google.com/")** and I got an error, meaning that some setting wasn't right. I even tried to use **simplexml_load_file** (instead of the XMl helper) in the page where I load the XML file and didn't work, giving another error...

I would like to know, if a PHP setting is causing this, which one could it be, so I can look at it and call again 1&1 to tell them what they need to change (if there's anything to change). Otherwise, how in the world can something just stop working?

Thank you for any advice! It is much appreciated!

**EDIT: detailed explanation of errors**

**1\. Error related to the XML not loading using CakePHP's XML helper**

This is the code I use (which used to worked perfectly):

```
$completeurl = '/full/path/to/file/myfile.xml';

App::import('Xml'); 

$xml =& new XML($completeurl);
$this->list = Set::reverse($xml); 
```

I don't get any error or warning. If I debug **$xml**, I get this:

```
Xml Object
(
[__parser] => 
[__file] => 
[__rawData] => 
[__header] => 
[__tags] => Array
    (
    )

[version] => 1.0
[encoding] => UTF-8
[name] => #document
[namespace] => 
[namespaces] => Array
    (
    )

[value] => 
[attributes] => Array
    (
    )

[children] => Array
    (
    )

[__parent] => 
) 
```

If I debug **$this->list** I get an empty array. Before this problem, I would get an associative array with all the information of the XML file, perfectly structured. Oh, and the XML file is the same it used to be, and I've revalidated it just in case giving no errors.

**2\. Error related to XML file not loading using simplexml_load_file()**

This is the code I've tried with "regular" php (without using any CakePHP helper):

```
$file = '/full/path/to/file/myfile.xml';

if(!$xml = simplexml_load_file($file))
exit('Failed to open '.$file); 
```

And this are the errors (warnings):

```
Warning (2): simplexml_load_file() [function.simplexml-load-file]: URL file-access is disabled in the server configuration [APP/plugins/icd_discovery/webroot/videos.php, line 29]

Warning (2): simplexml_load_file(http://discovery.ingles100.com/icd_discovery/xml/videos_unidades.xml) [function.simplexml-load-file]: failed to open stream: no suitable wrapper could be found [APP/plugins/icd_discovery/webroot/videos.php, line 29]

Warning (2): simplexml_load_file() [function.simplexml-load-file]: I/O warning : failed to load external entity "http://discovery.ingles100.com/icd_discovery/xml/videos_unidades.xml" [APP/plugins/icd_discovery/webroot/videos.php, line 29] 
```

If I put a relative path for the file, I just get the last warning, but still not loading it.

** 3\. Error related to script to load URL of hosted videos in Fliqz**

The page that contains this script is totally unrelated to the previous ones (meaning that the code there doesn't affect the code here). We use the following script (provided by Fliqz) to request the URL of our videos hosted there:

```
include_once '../fliqz/dlMetrics.php';

// initializing new session

$videoID = '123123123';
$applicationID = '456456456';
$uniqueID = null;

// create a new fliqzDownload Object
$metricsObj  = new dlMetrics();

// get new session, using Application ID from Account:
$sessionID = $metricsObj->newSession($applicationID,NULL,NULL,NULL,$uniqueID);

// show server time when new session was created:
$start = $metricsObj->getSessionStart();

// Get asset location (note: must use dashes in asset ID example: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)
$video_URL = $metricsObj->initLoad($videoID); 
```

By doing this, we would get the URL of the video in the **$video_URL** variable. Again, this used to work perfectly. Suddenly, it doesn't.

So is it a coincidence that all this things stop working? I think that something has changed somewhere. Not the code, I'm the only one who touches that. The PHP version changed a while ago, and everything was working fine. Something in the server? 1&1 says that they didn't, or at least the person I talked to. If I have to call back, I would like to be able to point a little better where do I think the problem might be coming from, that's why I need you help guys!

Again, thanks for any advice!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:38:56.230

创建一个名为的文件`php.ini`，其内容如下：

`allow_url_fopen = ON`

并将其放置在与这些脚本相同的文件夹（或多个文件夹）中。

# c - 如何使用 __STDC_VERSION__ 检查 -std=c1x 是否正在使用？

> ID：11805636
> 
> 赞同：2
> 
> 时间：2012-08-04T03:16:48.463
> 
> 标签：c, gcc4, c11

我知道对于 C11，我可以测试`#if(__STDC_VERSION >= 20112L)`. 但对于`-std=c1x`

我应该测试什么宏和/或值？

这个标准的命名是什么？或者可能是一个非正式的名字，如果有的话。我希望这很清楚。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T04:13:53.730

gcc 的`-std=c1x`选项是 的同义词`-std=c11`，它设置`__STDC_VERSION__`为相同的值，`201112L`（注意：*not* `20112L`）。

在发布之前，新的 C 标准被称为“C1X”（因为不知道它何时发布），并且 gcc 添加了一个`-std=c1x`选项来启用对即将发布的标准的*部分*支持。当标准作为 C11 发布时，添加了 gcc`-std=c11`以启用（仍然是部分）支持，但保留了`-std=c1x`兼容性选项。

（由于编辑错误，发布的 2011 ISO C 标准没有指定 的值`__STDC_VERSION__`，但编辑表示`201112L`是正确的；见[这个问题](https://stackoverflow.com/q/9294207/827263)。）

Jens Gustedt 的评论提出了一个很好的观点。`gcc -std=c11`设置`__STDC_VERSION__`为`201112LL`，这应该意味着符合 C11，但实际上它仍然缺少 C11 功能的日志。我们可以期待这在未来的版本中得到改善。

同样，`-std=c99`设置`__STDC_VERSION__`为`199901L`，但它*不太*符合 C99 标准（当前状态[在此处](http://gcc.gnu.org/c99status.html)记录。gcc 的 C90 一致性（带有`-ansi`或`-std=c90`）非常符合 C90 标准。

# asp.net-mvc - 如何在asp.net MVC3中使用window.open读取参数

> ID：11805641
> 
> 赞同：0
> 
> 时间：2012-08-04T03:18:28.077
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, popupwindow

我需要通过下面的 JavaScript 代码从 MVC 视图调用 ASPX 页面，还需要传递一些参数作为查询字符串，

```
function OpenTest() {
    var width = (screen.availWidth - 700).toString();
    var height = (screen.availHeight - 100).toString();
    var param1 = "Test";
    var baseUrl = '@Url.Content("~/Test/Test.aspx?")';
    window.open(baseUrl + "param1=" + param1);
} 
```

在 ASPX 页面中，

```
if(!string.IsNullOrWhiteSpace(Request.QueryString["param1"]))
        {
            string s1 = Request.QueryString["param1"];
        } 
```

我可以通过上面的代码调用 ASPX 页面并读取参数值，但是当我添加“window.open”的其他属性时，我无法读取查询字符串，问题是我应该将上面代码中的属性放在哪里以便我还可以在 ASPX 页面中读取查询字符串值，

```
"mywindow", "width=" + width + ",height=" + height + ",toolbar=no,location=no,directories=yes,status=no," +
            "menubar=no,scrollbars=yes,copyhistory=yes,resizable=yes" + ",screenX=0,screenY=0,left=0,top=0" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T04:10:47.083

的语法`window.open()`是：

```
window.open('url/for/page/here.aspx', 'targetName', 'options'); 
```

可以是“ `targetName`_self”、“_blank”、“_parent”，就像链接的任何目标属性一样，或者有一个标识符来命名窗口，因此您可以在打开同名窗口时重复使用该窗口。

当您`window.open()`使用任何选项来限制窗口时，就像`width=100`它假定必须禁用所有其他选项一样，因此您不必放置要禁用的属性。

修复您的选项将是：

```
window.open(baseUrl + "param1=" + param1,
    "mywindow",
    "width=" + width + ",height=" + height + ",directories=yes,scrollbars=yes,copyhistory=yes,resizable=yes,screenX=0,screenY=0,left=0,top=0"); 
```

另一件需要注意的是，所有选项都必须用逗号分隔，不能有空格。一些浏览器会忽略/错误解释带有空格的选项。

另外，不要忘记转义要与 url 一起传递的变量。

# javascript - 在 node_redis 上实现 findBy 方法，但是它不起作用

> ID：11805643
> 
> 赞同：0
> 
> 时间：2012-08-04T03:18:52.873
> 
> 标签：javascript, node.js, node-redis

全部。我在 node_redis 模块中实现 findBy("name","password") ，遵循此。

### 用户.js

```
 // return user find by name and password.
 User.findBy = function(name,password){
  console.log("calllelelelelll");
  var res;
  db.lrange("users",0,-1,function(err,users){

    users.forEach(function(item){
      var u = JSON.parse(item);
      if ((u.name == name) && (u.password == password)){
        res =  u;
      }
    });
    console.log(res);
    return res;
  });

};

###app.js

User.findBy(user.name,user.password); 
```

但是，User.findBy(user.name,user.password) 函数返回 undefined ，console.log(res) 被记录

喜欢{名称：“nobinobiru”，密码：“harashin0219”}

我想知道为什么 findBy 函数返回 res 未定义，但`console.log(res)`工作正常。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:26:00.250

您正在`db.lrange`从不执行任何操作的回调中返回 res。如果 lrange 函数不是异步的，那么您需要将 return 语句向下移动到回调之后，因此它实际上是 from 的返回值`findBy()`。

但是，如果`db.lrange`函数是异步的（我猜它可能是异步的），那么您就无法从中获取值并进入调用函数。相反，任何想要在成功处理程序回调中使用它返回的值的东西都需要在回调函数中或从回调函数中调用。

# javascript - 如何修改 Stumbleupon URL 并提供指向内容页面的直接链接？

> ID：11805652
> 
> 赞同：1
> 
> 时间：2012-08-04T03:22:31.950
> 
> 标签：javascript, url, google-chrome, userscripts, stumbleupon

这个问题是针对所有狂热的绊脚石的，在那里......当绊脚石时，URL 被修改为如下所列。如您所见，所有原始内容都在前面 `http://www.stumbleupon.com/su/...`，然后是直接 URL。

如果我遇到有趣的事情，我喜欢通过复制 URL 并将其粘贴到任何需要的地方来分享它。问题是，当任何人点击它时，它会为他们拉起绊脚石并将他们带到内容中。我宁愿只有直接链接。

```
http://www.stumbleupon.com/su/1NKFju/:10yM7NnNO:GEYExz6R/toti.jjsoft.hu/public8/nyar1779/a28.jpg
http://www.stumbleupon.com/su/1uGF9s/:11Sd-1n0R:GEYExz6R/www.popularmechanics.com/technology/how-to/home-theater/4342672/
http://www.stumbleupon.com/su/237YPB/:GdOWpKe.:GEYExz6R/nerdsguidetoreading.com/Nerds_Guide_to_Reading/Science_Fiction.html/
http://www.stumbleupon.com/su/2pkYws/:1f+I-KON5:GEYExz6R/www.wizards.com/dnd/images/wd_maps/FRposterLarge_150.jpg/
http://www.stumbleupon.com/su/1ceVWt/:1fdJgD$uT:GEYExz6R/www.psych.upenn.edu/~andrewbg/images/Bluebell-carpet-480.jpg/
http://www.stumbleupon.com/su/2DdDRI/:GvgBVfdV:M-wRpADk/www.nature.com/news/higgs-triumph-opens-up-field-of-dreams-1.10970/ 
```

如您所见，前面的大部分stumble 术语的长度几乎相同。然而，第三个和最后一个短 1 个字符。

我想知道是否可以编写一个用户脚本来去除绊倒的东西并留下直接链接，每次我偶然发现一个新页面。

我想保留绊倒栏，但是当我到达我新绊倒的页面时，编辑 URL 并删除它，而不是真正重新加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:16:08.447

由于 Stumbleupon URL 字段由固定数量的斜杠 ( `/`) 分隔，因此您可以使用正则表达式来获取 URL，如下所示：

```
var targURL = location.href.replace (
    /^.+stumbleupon\.com\/su\/\w+\/[^\/]+\/(.+?)\/?$/i
    , "http://$1"
); 
```

* * *

**Stack Overflow 不是**（通常）**脚本编写服务**，但我毫不费力地修改了我现有的脚本之一，它似乎工作......

**更新：**以下是**Greasemonkey**脚本，因为这是最初指定的问题。要在 Chrome 中使用它，请安装 Tampermonkey 扩展。

```
// ==UserScript==
// @name     _Stumbleupon, add direct link to content page
// @include  http://www.stumbleupon.com/su/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==

$("#tb-like").before ( '                                                    \
    <li id      = "gmDirectLinkDisp"                                        \
        class   = "tb-btn tb-hide-visitor"                                  \
        title   = "Click for the direct link to the target page, below."    \
    >                                                                       \
        <button>Direct link</button>                                        \
    </li>                                                                   \
' );

$("#gmDirectLinkDisp button").click ( function () {
    var targURL = location.href.replace (
        /^.+stumbleupon\.com\/su\/\w+\/[^\/]+\/(.+?)\/?$/i
        , "http://$1"
    );
    window.prompt (
        "Press 'Ctrl+C' to copy to the clipboard; "
        + "then press `Enter` to close this dialog."
        , targURL
    );
} );

GM_addStyle ( "                             \
    #gmDirectLinkDisp {                     \
        float:              left;           \
    }                                       \
    #gmDirectLinkDisp button {              \
        padding:            0;              \
        margin-top:         10px;           \
    }                                       \
" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:16:12.323

使用 StumbleUpon Firefox 扩展程序，您将直接进入 URL，而不是它的框架版本。地址栏中显示的 URL 前面不会有 stumbleupon.com/su/xxxx。

# php - PHP 无限重复第一个 MySQL 结果

> ID：11805658
> 
> 赞同：0
> 
> 时间：2012-08-04T03:24:59.377
> 
> 标签：php, mysql

我有这段代码，我一直在处理它，当我运行它时，我得到了第一个结果 10 次（它曾经无限重复，直到我添加了 if 语句）。它应该返回前 10 个结果。我查看了其他几个类似的问题，但没有一个解决方案在这里有效。谁能看到我错过了什么？

```
<?php
$link = mysql_connect('XXXXXXXXX.com', 'XXXXXX', 'XXXXX');
$db = mysql_select_db('a1007515_troop1', $link);
$i = 1;
while($row = mysql_fetch_array(mysql_query('SELECT * FROM `posts` ORDER BY `pid` DESC LIMIT 10;')))
{
$authinfo = mysql_fetch_array(mysql_query('SELECT * FROM `users` WHERE `id` = '.$row['aid'].' LIMIT 1'));
echo '
<div class="content">
<a href="post.007?pid='.$row['pid'].'"><h1 class="title">'.$row['title'].'</h1></a>
<span class="authinfo">This post was made by '.$authinfo['name'].'<i>('.$authinfo['username'].')</i> on '.$row['date'].'.</span>
<p class="txt">'.$row['content'].'</p>
</div>';
if ($i == 10) { break; }
++ $i;
}
mysql_close($link);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T03:39:37.417

也许尝试简化事情，尝试坚持每行做一件事，而不是试图压缩它。

每次运行 while 循环时，调用`mysql_query`将重复该查询，而不是获取下一个结果。`while`在迭代另一个 mysql 查询的结果时运行另一个 mysql 查询也会导致问题。

```
$link = mysql_connect('mysqlwebhost', 'user', 'pass');
$db = mysql_select_db('dbname', $link);

$result = mysql_query('SELECT * FROM `posts` p, `users` u WHERE u.id = p.aid  ORDER BY `pid` DESC LIMIT 0,10;');

while ($row = mysql_fetch_assoc($result)) {
    echo '
    <div class="content">
    <a href="post.007?pid='.$row['pid'].'"><h1 class="title">'.$row['title'].'</h1></a>
    <span class="authinfo">This post was made by '.$row['name'].'<i>('.$row['username'].')</i> on '.$row['date'].'.</span>
    <p class="txt">'.$row['content'].'</p>
    </div>';
}

mysql_close($link); 
```

您可能还希望避免使用 mysql_* 函数，因为它们已被弃用。看看[mysqli 或 PDO](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T03:47:30.870

问题是每次测试 while() 条件时都要再次执行 SQL 语句：

```
while($row = mysql_fetch_array(mysql_query('SELECT * FROM `posts` ORDER BY `pid` DESC LIMIT     10;')))
{
...
} 
```

每次评估 while() 时，上面的代码都会执行此函数：

```
mysql_query('SELECT * FROM `posts` ORDER BY `pid` DESC LIMIT     10;') 
```

而是使用：

```
$stmt = mysql_query(...) or die(mysql_error());
while($row = mysql_fetch_array($stmt)) {
...
} 
```

接下来，您应该使用连接。您正在遵循一种“过度查询”数据库的模式。

您只需要以下 SQL 和一个循环：

```
SELECT u.* 
  FROM `posts` p 
  JOIN `users` u 
    ON u.id = p.aid  
 ORDER BY `pid` DESC 
 LIMIT 0,10; 
```

# php - 我需要帮助使用下拉菜单从 MySQL 表中使用 LIKE 从一组标签中获取 $_GET

> ID：11805661
> 
> 赞同：0
> 
> 时间：2012-08-04T03:25:34.883
> 
> 标签：php, mysql, drop-down-menu, get

所以我有一个附有多个类别的项目表。我一直遇到问题。这是我的代码片段：

```
 <form class="forms" action="form.php" method="get">
    <fieldset>
    <legend>Sort by Category</legend>
    <select name="tags">
    <option value="business" title="Business">Business</option>
    <option value="environmental" title="Environmental">Environmental</option>
    <option value="hospitality" title="Hospitality">Hospitality</option>
    </select><input type="submit" class="inputButton" value="Select Category" />
    </fieldset>
    </form>

    <?php
    $tags = $_GET['tags'];

    $connection = mysql_connect($local,$user,$pass) or die (mysql_errno().' : '.mysql_error().'<br />');
    mysql_select_db($db);
    $query = 'SELECT * FROM awards WHERE active=1 ORDER BY name';
    $result = mysql_query($query);
    $num = mysql_num_rows($result);

    while ($row = mysql_fetch_array($result)) 
    {
        if ($tags == 'business')
        {
            $where = "SELECT * FROM awards WHERE active=1 AND
tags LIKE '%business%' ORDER BY name";
}
    else if ($tags == 'environmental')
    {
        $where = "SELECT * FROM awards WHERE active=1 AND 
tags LIKE '%environmental%' ORDER BY name";
}
    else if ($tags == 'hospitality')
    {
        $where = "SELECT * FROM awards WHERE active=1 AND 
tags LIKE '%hospitality%' ORDER BY name";
    }
        else
        {
            $where = 'SELECT * FROM awards WHERE active=1 ORDER BY name';
            $title = 'Awards in Alphabetical Order';
        }
    }
    include 'conn.php';
    $connection = mysql_connect($local,$user,$pass) or die (mysql_errno().' : '.mysql_error().'<br />');
    mysql_select_db($db);
    $query = 'SELECT * FROM awards $where';
    $result = mysql_query($query);
    $num = mysql_num_rows($result);
?> 
```

之后，回声等，我没有问题。我似乎无法让它只提取我想要的记录。我会以错误的方式解决这个问题吗？我表中的行“标签”有多个以逗号分隔的值。因此，如果有人选择“业务”，则不应提取任何没有“业务”作为标签之一的记录。我应该将我的“标签”作为单独的行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:38:25.530

```
<?php
    $tags = $_GET['tags'];

if ($tags == 'business' || $tags == 'environmental' || $tags == 'hospitality')
{
            $where = "SELECT * FROM awards WHERE active=1 AND
tags LIKE '%$tags%' ORDER BY name";
}
else
{
     $where = 'SELECT * FROM awards WHERE active=1 ORDER BY name';
            $title = 'Awards in Alphabetical Order';
}

include 'conn.php';
$connection = mysql_connect($local,$user,$pass) or die (mysql_errno().' : '.mysql_error().'<br />');
mysql_select_db($db);
$result = mysql_query($where);
$num = mysql_num_rows($result);
while ($row = mysql_fetch_array($result)){
    //echo here whatever u want from the rows fetched with matching tags
} 
```

并且您应该开始使用 PHP PDO 进行数据库访问，因为这里使用的方法很快就会被贬值..

[PDO 手册链接](http://php.net/manual/en/book.pdo.php)

# javascript - 从javascript中的字符串路径获取文件名？

> ID：11805662
> 
> 赞同：34
> 
> 时间：2012-08-04T03:25:36.710
> 
> 标签：javascript, regex, string

如何从javascript中的字符串路径获取文件名？

这是我的代码

```
var nameString = "/app/base/controllers/filename.js"; //this is the input path string 
```

在这里做一些事情只得到文件名

```
var name = ???   //this value should equal to filename.js 
```

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-08-04T03:28:13.713

试试这个：

```
 var nameString = "/app/base/controllers/filename.js";
   var filename = nameString.split("/").pop(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-04T03:31:00.620

我不知道您为什么要我们使用正则表达式来执行此操作。当然，以下内容就足够了：

```
var nameString = "/app/base/controllers/filename.js";
var nameArray = nameString.split('/');
var name = nameArray[nameArray.length - 1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-28T12:51:44.483

*这是使用正则表达式*的更详细的解决方案。

**备选方案 1（通用）：**从字符串路径获取文件名（*随便）。*

```
const FILE_NAME_REGEX = /(.+)\/(.+)$/

console.log("/home/username/my-package/my-file1.ts".replace(FILE_NAME_REGEX, '$2'))

console.log("/home/username/my-package/my-file2.js".replace(FILE_NAME_REGEX, '$2'))
```

**备选方案 2（高级）：***仅从*`.ts`字符串路径获取文件名。

```
const JS_PATH = "/home/username/my-package/my-file.spec.js"
const TS_PATH = "/home/username/my-package/my-file.spec.ts"

// RegExp accepts only `.ts` file names in lower case with optional dashes and dots
const TS_REGEX = /(.+)\/([a-z.-]+\.(ts))$/

// a. Get only the file name of a `.ts` path
console.log(TS_PATH.replace(TS_REGEX, '$2'))

// b. Otherwise it will return the complete path
console.log(JS_PATH.replace(TS_REGEX, '$2'))
```

**注意：**此外，您可以先测试上面的正则表达式，以便在获得预期值之前验证它们。

```
TS_REGEX.test(TS_PATH)
// > true

TS_REGEX.test(JS_PATH)
// > false 
```

MDN上的更多信息[- 正则表达式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T06:14:31.727

纯正则表达式解决方案：`\/([^\\\/:*?\"<>|]+)$`
您将从第 1 组获取文件名

# c - 需要IDA Pro中的C代码解释

> ID：11805665
> 
> 赞同：1
> 
> 时间：2012-08-04T03:26:22.120
> 
> 标签：c, visual-c++, assembly, x86, ida

我正在使用 IDA Pro 反汇编以下 C 代码： 但是，在我看来，下面的反汇编似乎是不完整的。数据从未被初始化（根据 C 代码），即使它似乎已加载到堆栈中，但是位于 00401040 的过程（nullsub_1）没有使用数据？我是在做出正确的评估还是我错过了什么？？？我使用 Visual C++ 6/2005 来编译 C 代码。

```
#include <stdio.h>
#include <windows.h>

struct a
{
    char s[10];
    BYTE b;
    int i;
};

a al;
void init(a);
void main()
{
    init(al);
};

void init(a c)
{
    for(int j = 0; j < 10; j++) c.s[j] = 'A';
    c.b = 10;
    c.i = 10000;
};

.text:00401000 ; int __cdecl main(int argc,const char **argv,const char *envp)
.text:00401000 _main           proc near               ; CODE XREF: start+AFp
.text:00401000
.text:00401000     argc            = dword ptr  4
.text:00401000     argv            = dword ptr  8
.text:00401000     envp            = dword ptr  0Ch
.text:00401000
.text:00401000                 mov     ecx, dword_4084C0
.text:00401006                 mov     edx, dword_4084C4
.text:0040100C                 sub     esp, 10h
.text:0040100F                 mov     eax, esp
.text:00401011                 mov     [eax], ecx
.text:00401013                 mov     ecx, dword_4084C8
.text:00401019                 mov     [eax+4], edx
.text:0040101C                 mov     edx, dword_4084CC
.text:00401022                 mov     [eax+8], ecx
.text:00401025                 mov     [eax+0Ch], edx
.text:00401028                 call    nullsub_1
.text:0040102D                 add     esp, 10h
.text:00401030                 retn
.text:00401030 _main           endp
.text:00401030
.text:00401030 ;     
.text:00401031                 align 10h
.text:00401040
.text:00401040
.text:00401040
.text:00401040 nullsub_1       proc near               ; CODE XREF: _main+28p
.text:00401040                 retn
.text:00401040 nullsub_1       endp 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T05:46:05.417

除了写入内存之外，您的源代码没有任何副作用。编译器将这些写入视为无用的。

如果您在 Debug 模式（而不是 Release）下编译它或关闭一些编译器优化，您可能会有更好的运气。

或者，对定义为的变量的访问`volatile`将被保留，因此您可以`volatile`在代码中添加。

# c# - C++/CX 组件“公共枚举类”在 C# Metro App 中未正确链接

> ID：11805669
> 
> 赞同：1
> 
> 时间：2012-08-04T03:27:03.257
> 
> 标签：c#, enums, microsoft-metro, windows-runtime, c++-cx

我正在尝试将 D3D11 调用包装在我正在开发的 API 中。

我制作了一个 C++/CX 组件库，我试图在 C# 中使用它。如果 C++/CX 组件和 C# 项目在同一个解决方案中，这很简单明了，一切都会正常工作......

...但是如果我在其 OWN 解决方案中创建我的 C++/CX API 组件，然后创建第二个 C# Metro App 解决方案并将我的 C++/CX 组件“项目”添加到它，然后让我的 C# Metro App 引用 C++/CX 组件项目尝试使用在 C++ 中声明的公共枚举时出现运行时错误。

这是我的 C# 应用程序似乎无法链接到的公共枚举类错误。

> “找不到 Windows 运行时类型‘Reign.Video.D3D11.FeatureLevels’。”

这非常令人沮丧，因为我似乎无法让我的 C++/CX“API”东西在 C# 应用程序中正确链接以进行测试。您打算如何在 Metro 上高效地测试用 C++ 制作的 API？除非在同一个解决方案中，否则不能将 C++/CX 组件链接到 C# 项目，并且如果您尝试将 C++/CX 项目链接到 C# 解决方案并从那里链接它，则会出现运行时错误...

**编辑：这是演示我的问题的下载链接：** [下载](http://www.reign-studios.com/Share/MetroDemo.zip)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:25:53.010

Windows 运行时要求必须在与包含的 .winmd 文件的名称匹配的命名空间中找到所有类型。在您链接的演示中，您生成的 winmd 已命名`ExternalWindowsRuntimeComponentProject.winmd`，但您的非工作类位于`Reign.Video.D3D11`命名空间中。WinRT 不允许这样做，并且 .NET 类型加载器将无法找到不在关联命名空间中的类型。

此处的解决方案是确保`FeatureLevels`枚举位于名为 、 或 的`Reign.winmd`winmd`Reign.Video.winmd`中`Reign.Video.D3D11.winmd`。

# c# - 有没有办法从字符串中运行函数？

> ID：11805673
> 
> 赞同：2
> 
> 时间：2012-08-04T03:29:02.050
> 
> 标签：c#, function, delegates

所以说我有一个叫做 fun 的字符串。它的文本是“myFun”。我想运行一个名为 myFun 的函数：

```
private void myFun()
{
  //stuff
} 
```

有没有办法做到这一点，以便我可以根据字符串的文本运行它？也许是这样的：

```
myFun + (); 
```

显然这行不通，但是有什么可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T03:37:43.703

鉴于我有这堂课：

```
public class Foo
{
    private void myFun()
    {
        Console.WriteLine("Hello, World!");
    }
} 
```

我可以调用这段代码：

```
var fun = "myFun";
var foo = new Foo();
foo
    .GetType()
    .GetMethod(
        fun,
        BindingFlags.NonPublic
            | BindingFlags.Instance
            | BindingFlags.InvokeMethod)
    .Invoke(foo, new object[] { }); 
```

我想，这就是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T03:39:12.593

全球成员

```
delegate void aFunction(); 
```

构造函数或初始化函数

```
Dictionary<string, aFunction> myfunctions = new Dictionary<string, aFunction>();
myfunctions.Add("myFun", myFun); 
```

从字符串调用你的函数

```
myfunctions["myFun"].Invoke(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T03:34:59.707

你可以通过反射来做到这一点。假设`myFun`是您调用它的同一类的成员：

```
var t = typeof( this );
t.InvokeMember(myFun,
               BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.NonPublic,
               null, this, null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T03:37:38.430

正如亚历克斯建议的那样，您可以使用反射；或者如果你不需要能够运行任何给定的函数，你可以定义一个`Dictionary`在名称和函数之间映射的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T04:44:59.097

这可能不是您正在寻找的，但您可以使用扩展方法完成*几乎*您想要的。

定义一个公共静态类并添加方法如下...

```
public static string ny(this string str)
{
    //.. do something
} 
```

然后导入您的扩展类，您可以直接在您的字符串对象上调用该函数。

```
myFun.ny(); 
```

扩展方法的关键是添加到参数的*this关键字。*同样，可能不完全是您正在寻找的东西，但它应该可以工作。

# linux - 在apache中将虚拟目录设置为root

> ID：11805674
> 
> 赞同：0
> 
> 时间：2012-08-04T03:29:22.540
> 
> 标签：linux, wordpress, apache

在我的 linux 服务器中，我的 apache 服务器的 www 根目录是 /var/www/html，我在上述路径中有一个名为 blog 的文件夹。我必须通过指定来访问博客文件夹中的网站`http://myDomain/blog/`。我的问题是我希望能够通过`http://myDomain`在浏览器中指定来访问该网站（无需将博客文件夹的内容移动到 www 根目录）。是否可以在配置文件中设置任何参数以实现上述目标。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:40:49.477

在您的 Apache httpd.conf 文件中，只需将 DocumentRoot 设置为 /var/www/html/blog。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:40:11.507

编辑 /etc/httpd/conf/httpd.conf 文件并搜索 DocumentRoot 并从

```
/var/www/html 
```

到

```
/var/www/html/blog 
```

# compiler-construction - 库源中 Eiffel/循环定义中原始类型的实现

> ID：11805675
> 
> 赞同：1
> 
> 时间：2012-08-04T03:29:55.880
> 
> 标签：compiler-construction, implementation, circular-dependency, primitive-types, eiffel

我是 Eiffel 的新手，我试图了解“原始”类型（例如，INTEGER_32、REAL_64 等）是如何实现的。我对 EIFFEL 库类源文件中看似循环的依赖感到困惑。

原始类型被实现为非扩展父类的“扩展”版本。例如，INTEGER_32 是 INTEGER_REF_32 的扩展子代。（请注意，“扩展”并不意味着“实例”。扩展类是一个类，而不是一个对象。）

INTEGER_REF_32*包含*一个扩展 INTEGER_32 的实例。在 INTEGER_REF_32 对象中的某处必须有一个扩展整数是有道理的，但这意味着父级包含其子级的实例。

当您查看功能的定义时，它会变得更加混乱：

在 INTEGER_32 中，名为“as_integer_64”的特征/方法被简单地重新定义为“Result := Precurser”，其中 Precurser 意味着使用父级的特征。在父代 INTEGER_REF_32 中，“as_integer_64”被定义为“Result := item.as_integer_64”，其中“item”是展开后的 INTEGER_32！换句话说，孩子调用其父母的特征，父母调用孩子的特征。我也很困惑为什么扩展版本用看似等效的定义来明确重新定义“as_integer_64”。

我希望看到原始类型的实现细节终止，并表明某些特性是内部定义的。相反，我发现了这些循环定义。显然，编译器对原始类型的了解比源文本文件中出现的更多。当编译器看到它知道的原始类型时，编译器是否会忽略源文本，或者 Precurser 在这种情况下具有不同的含义？重新定义是对编译器的某种暗示，还是让解析器满意的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:47:14.213

对基本类型的特征进行递归定义的原因之一是可重用性。详细的讨论可以在这篇论文中找到（不确定它是否在线可用）：

> *亚历山大诉科格滕科夫*。原始类型和可重用性的实现。– WOON'98 国际会议论文集，圣彼得堡，1998 年。

简而言之，如果一个基本类被用作某个其他类的祖先，那么这个类会继承所有的特性，如*item*、*+*等。功能声明也取自基本类型。因为它们是使用基本类型的功能调用定义的，所以编译器知道如何生成代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:19:27.830

实际上，如果你查看 INTEGER_32 的源代码，你会发现所有的例程都被实现为“内置”，这意味着 Eiffel 编译器正在为这些特性提供一个实现。

由于 EiffelBase（现称为 FreeELKS）设计中的历史原因，我们为每个基本类型设置了两个类：X 和 X_REF。如果我们必须重做核心库而不必担心向后兼容性，我们只会保留 X。不需要 X_REF 类。将 X_REF 类视为 CELL [X] 数据类型，即 X 的包装器。

现在，这些内置函数的 Eiffel Software 实现非常具体。使用 Precursor 看起来很奇怪，但这样做是为了允许旧代码模式工作，即使规范不再允许这些模式。同样，如果我们不得不放弃向后兼容性，我们将保持实现真正内置，而不显示编译器实际上会做什么。

本身，没有真正的递归定义。在 INTEGER_32_REF 中，“item”被视为 INTEGER_32 类型的属性，而在后代中，它被视为返回自身的查询。这就是为什么人们应该忽略 INTEGER_32_REF 类甚至存在的原因，它只是一个 CELL [INTGER_32_REF]。

# c++ - 谓词和函子有什么区别？

> ID：11805677
> 
> 赞同：10
> 
> 时间：2012-08-04T03:30:28.217
> 
> 标签：c++, terminology, predicate, functor

我刚刚[读到有人用构造函数和](https://stackoverflow.com/q/11805558/430766)*谓词*调用一个`operator()`类：

 *```
// Example
class Foo {
  public:
    Foo(Bar);
    bool operator()(Baz);
  private:
    Bar bar;
}; 
```

但是，我以前没有听说过在这种情况下使用*谓词*这个词。我会称这样的东西为*functor*。对我来说，*谓词*是形式逻辑领域的东西。

这提出了以下问题：

*   这是一个常见的词`Foo`吗？
*   这两个术语是否可以互换使用，或者它们的含义略有不同？
*   或者
    *   返回类型（`bool`相对于其他东西）是否与它有关？
    *   `operator()`存在呢`const`？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-04T03:48:05.233

*函子*是一个术语，指的是`()`在表达式中支持运算符（具有零个或多个参数）的实体，即在语法上表现为函数的东西。Functor 不一定是某个具有重载的类的对象`operator ()`。普通函数名也是函子。尽管在某些情况下，您可以看到“函子”一词在更狭义和排他的意义上使用：只是类对象，而不是普通函数。

*谓词*是一种特定*类型*的函子：计算为布尔值的函子。它不一定是`bool`类型的值，而是具有“布尔”语义的任何类型的值。该类型应该可以隐式转换为`bool`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T03:34:27.747

显示的类是一个实现谓词的函子。

[谓词](http://en.wikipedia.org/wiki/Predicate_%28mathematical_logic%29)是一个布尔函数。

关于`operator()`不在`const`这里：理想情况下应该是`const`，是的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T07:55:05.560

谓词是一种特殊的函数对象。请参阅 Nicolai Josuttis 的这篇出色的[专栏](http://adtmag.com/articles/2000/05/30/predicates-vs-function-objects.aspx)。去引用：

> **返回布尔值的函数对象是谓词。**这就是几乎所有关于 STL 谓词的教程、书籍和手册所写的内容。然而，这还不是全部。
> 
> 然而，不幸的是，在任何手册或 C++ 标准中都没有提到一个额外的要求：**谓词应该总是为相同的值返回相同的结果。**
> 
> 或者，在 C++ 语言中：**您应该将 operator() 声明为常量成员函数**（而不是玩可变或强制类型转换的游戏）。出于同样的原因，谓词的副本应该与原始的状态相同。

原因是 STL 算法会复制函数对象，复制不应该影响应用函数对象的结果。

```
template<typename Arg0>
struct UnaryPredicate
:
    public std::function<bool(Arg0 const&)>
{
    bool operator()(Arg0 const& a0) const
    {
        return // your code here
    }
};

template<typename Arg0, typename Arg1>
struct BinaryPredicate
:
    public std::function<bool(Arg0 const&, Arg1 const&)>
{
    bool operator()(Arg const& a0, Arg const& a1) const
    {
        return // your code here
    }
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-26T19:30:24.443

如前所述，谓词只是用户提供的指令，用于将某些内容分析为布尔状态。所以你可以让同样的两件事做同样的事情......

```
struct is_odd
{
    is_odd() : count(0);
    bool operartor () (int i) const { ++count; return (i % 2) == 1; }

private
    int count;
} 
```

和...

```
bool isOdd(int i) { return (i % 2) == 1; } 
```

那么，函子有什么特别之处呢？如果您愿意，它会保持状态！这意味着虽然这两行代码做同样的事情（假设 v 是一个向量，值为 0 - 9）......

```
for_each(v.begin(), v.end(), isOdd); //using C-style function pointer 
```

和...

```
is_odd fn = for_each(v.begin(), v.end(), is_odd); //using functor 
```

只有使用第二个用例，您才能调用...

```
int calls = fn.count; 
```

那是因为 for_each（以及其他 STL 算法函数）最后返回了它使用的函子，所以现在可以查询最终状态。

要注意的另一件很酷的事情是，在第二种情况下，我们使用的是所谓的“匿名”对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-04T06:46:13.103

来自 MSDN：

> 表示定义一组条件并确定指定对象是否满足这些条件的方法。

[http://msdn.microsoft.com/en-us/library/bfcke1bz.aspx](http://msdn.microsoft.com/en-us/library/bfcke1bz.aspx)*

# ruby - bcrypt-ruby 密码生成和检查

> ID：11805678
> 
> 赞同：3
> 
> 时间：2012-08-04T03:30:34.690
> 
> 标签：ruby, bcrypt

我正在尝试 bcrypt-ruby gem，我编写了以下代码来生成随机密码并验证它

```
require 'bcrypt'
require 'securerandom'

def encrypt_token(tok)
    BCrypt::Password.create(tok)
end

def check_token(enc,tok)

    g = BCrypt::Password.new(enc)

    if tok==g
       puts 'equal'
    else
       puts 'not equal'
    end 
end

s = SecureRandom.hex(12)

puts s

e = encrypt_token(s)

puts e

check_token(e,s) 
```

代码不断打印“不等于”而不是“等于”。我哪里错了？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T03:38:28.383

bcrypt 具有自动加盐功能。您不能比较同一字符串的两个 bcrypt，它们会有所不同。

尝试像这样比较：

```
def check_token(enc,tok)

  if enc == tok #We compare it with the unencrypted string.
    puts 'equal'
  else
    puts 'not equal'
  end 

end 
```

诀窍是当创建一个新的 bcrypt 时，你最终会得到一个覆盖`==`操作符的 Password 对象。它将针对未加密的字符串检查密码是否正确。

也正因为如此，要小心：在上面的例子中，比较`enc == tok`有效。比较`tok == enc`不会，因为您将使用`==`来自`class String`

看看这里的文档和源代码：http: [//bcrypt-ruby.rubyforge.org/](http://bcrypt-ruby.rubyforge.org/)

# parsing - 如何将网络摄像头图像/视频与特定图像/视频进行比较？

> ID：11805685
> 
> 赞同：-1
> 
> 时间：2012-08-04T03:31:10.933
> 
> 标签：parsing, webcam, language-translation

我基本上只是从计算机编程开始；基本精通Java。我有一个将 ASL（美国手语）创建为英语的想法，我最初的问题是如何识别来自网络摄像头的手部运动，然后将它们与已经存储为图像或其他视频的标志进行比较。如果问题对我来说有点太高级，那么请列出我可以学习的任何主要概念。谢谢，麻烦您了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:36:39.330

看看 OpenCV。他们有很多你可能会觉得很方便的库。

[http://opencv.willowgarage.com/wiki/](http://opencv.willowgarage.com/wiki/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:02:09.647

你显然有一个具有挑战性的问题^^。尝试解释解决问题所需的一切将非常困难，主要是因为有很多方法可以做到这一点。我建议您阅读一本关于图像处理的好书（Gonzalez 的书是一个不错的选择）和 OpenCV 文档（但它是用 C、C++ 实现并具有 Python 绑定；尽管它是一个实现了许多图像处理技术的库）。也许你应该把你的研究重点放在特征检测、运动分析和对象跟踪上。由于手语不仅使用手势（静态）而且还使用手部动作（动态）来表达某些东西，因此对象跟踪可能是描述符号的好方法。

我希望这些信息对你有所帮助，至少有点 -^.^- 再见。

# android - 如何在不使用 onSignalStrengthsChanged() 的情况下访问 SignalSteength？

> ID：11805689
> 
> 赞同：1
> 
> 时间：2012-08-04T03:32:11.700
> 
> 标签：android, signals, phone-state-listener

我希望我的应用程序能够与网络连接以及当前 GSM 连接的信号强度是否可行。我想大约每分钟重复一次这个过程。

此时我的班级看起来像：

```
public class UmtsActivity extends Activity {
[...]
TelephonyManager Tel;
MyPhoneStateListener MyListener;    
int currentSignalStrength;

[...]

 private class MyPhoneStateListener extends PhoneStateListener
    {
  @Override
  public void onSignalStrengthsChanged(SignalStrength signalStrength)
  {
     super.onSignalStrengthsChanged(signalStrength);
  currentSignalStrength = signalStrength.getGsmSignalStrength();
  } 
```

到目前为止，我只使用 phonestateListener 的 onSignalStrengthsChanged() 函数读取 SignalStrength。还有其他方法可以节省CPU时间吗？

真诚的沃尔芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:55:36.900

如果您将 PhoneStateListener 作为服务的一部分，那么您的应用程序组件就会始终知道当前的信号强度。然后，应用程序的 UI 部分可以按需查询服务的状态，或者在强度变化超过某个限制时发布更新。例如，信号强度变化很快 - 所以只有在变化超过 10% 时才发布更新或按时间限制更新。

例如（这里更新只发送感兴趣的对象被更改（mSms 或 mMins）并且只有每 5 次信号强度更改。应用程序的 Activity 将接收此 Intent。这由服务的 PhoneStateListener 覆盖方法调用。

```
/* called from the phone state listener to check for any changes in the number of sms/calls since last time
 * and to raise a suitable intent if required. Check the time to avoid calling too fast.
 */
private void update()
{
    final String key = getString(R.string.pref_periodstart_key);
    final String defVal = getString(R.string.periodstart_defaultValue);
    Thread thread = new Thread(null, new Runnable() {
        public void run() {
            Context context = getApplicationContext();
            int start = Integer.valueOf(mPrefs.getString(key, defVal));
            Date date = PhoneUsageInfo.getLastContractDate(start);
            int mins = PhoneUsageInfo.getMinutesUsedSince(context, date);
            int sms = PhoneUsageInfo.getSMSCountSince(context, date);
            boolean changed = (mins != mMins || sms != mSms);
            if (changed || mCount % 5 == 0) {
                mMins = mins;
                mSms = sms;
                Intent intent = new Intent(Constants.INTENT_USAGE_UPDATE);
                intent.putExtra(Constants.EXTRA_SMS_COUNT, sms);
                intent.putExtra(Constants.EXTRA_MIN_COUNT, mins);
                intent.putExtra(Constants.EXTRA_START_DATE, date);
                Log.d(TAG, String.format("service sending broadcast intent sms %d, mins %d (%s)", sms, mins, changed?"changed":"unchanged"));
                sendBroadcast(intent);
            }
            mCount += 1;
        }
    }, "PhoneUsageServiceUpdate");
    thread.start();
} 
```

# php - 从段落中删除换行符

> ID：11805690
> 
> 赞同：0
> 
> 时间：2012-08-04T03:32:11.310
> 
> 标签：php, string

```
$lesujet = "testing ...";
$letexts = "a bunch of text   

there is a return break here

another return break as you see";

mail("myemail@gmail.com",$lesujet,$letexts,$headers); 
```

我希望能够删除返回中断并仅保留 1，我尝试过：

```
 $letexts = str_replace("\r","",$letexts);
 $letexts = str_replace("\n","",$letexts); 
```

它不起作用。我期望它输出格式如您在上面看到的文本，而不是它返回的内容（每个返回中断加倍，这很烦人）：

```
 a bunch of text   

    there is a return break here

    another return break as you see 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:35:27.857

像这样使用修剪功能 [修剪](http://php.net/manual/en/function.trim.php) ：

```
$letexts = trim($letexts); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T03:35:53.480

尝试这个：

```
$letexts = preg_replace("/\r\n\s*\r\n/", "\r\n", $letexts); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T03:52:13.160

`$letexts = preg_replace('~[\r\n]~','',$letexts)`

# asp.net-mvc-3 - 如何防止 ASP.NET MVC 应用程序中的 DoS 攻击？

> ID：11805694
> 
> 赞同：21
> 
> 时间：2012-08-04T03:33:44.080
> 
> 标签：asp.net-mvc-3, security, ddos

我不希望有人将 F5 保留在我的网站上或使用某些工具频繁地请求该页面。

也就是说，防止一个Action或Controller被一个客户端频繁调用。

我该如何实施？有什么我可以使用的包吗？就像 AntiXSS 库一样。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-04T08:29:24.623

大多数这些功能都可以在 IIS 管理器中找到。[动态 IP 限制](http://www.iis.net/download/DynamicIPRestrictions)之类的东西应该会有所帮助。通读[Microsoft 的防止 DoS/拒绝服务攻击的最佳实践](http://technet.microsoft.com/en-us/library/cc750213.aspx)，这提供了一个很好的待办事项列表。

同样根据[该视频](http://www.youtube.com/watch?v=U7UsShSGRn4)，[Cloud Flare](https://www.cloudflare.com)能够通过免费服务阻止这些攻击。

# node.js - 要求和 readFile 异步

> ID：11805695
> 
> 赞同：0
> 
> 时间：2012-08-04T03:33:51.540
> 
> 标签：node.js

我正在使用 express，我想将一些配置放在一个文件中（如数据库配置、api 凭据和其他基本内容）。

现在我将此配置放入 JSON 中，并使用 readAsync 读取此文件。

阅读一些代码，我注意到很多人使用不使用 JSON。相反，他们使用通用 JS 文件并在模块中导出。

这些方法之间有什么区别吗，比如性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T04:16:59.393

后一种方式可能会简化版本控制、测试和构建，并且更容易为生产和开发进行单独的配置。它还允许您进行一些“预处理”，例如为常见设置定义“常量”。

在设计良好的应用程序中，配置读取的性能将完全无关紧要。

如果你使用后者，你需要练习一些规则：一个配置模块应该几乎完全由文字组成，只有足够的可执行代码来处理诸如区分开发和生产之类的事情。谨防让应用程序逻辑潜入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T04:18:06.617

在 node.js 中 require 是同步工作的，但如果你在应用程序启动时加载配置，这并不是很重要。仅当您多次加载配置时才需要异步方式（例如，对于每个请求）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T10:50:07.057

在 node.js 中，您可以简单地要求您的 json 文件：

配置.json：

```
{
  "db": "127.0.0.1/database"
} 
```

应用程序.js：

```
var config = require('./config');

console.log(config); 
```

如果您需要更全功能的东西，我会使用[flatiron/nconf](https://github.com/flatiron/nconf)。

# java - 如何让 Google 地图“Places API”返回邮政编码信息？

> ID：11805704
> 
> 赞同：15
> 
> 时间：2012-08-04T03:35:54.980
> 
> 标签：java, google-maps-api-3

如何让 Google 地图“Places API”返回邮政编码信息？在我在互联网上找到的所有示例中，没有一个显示返回包含邮政编码的结果。这有什么诀窍还是不可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T04:00:37.163

这似乎在该`address_component`部分中返回了“邮政编码”（出于某种原因，为 4 位）：

[https://developers.google.com/places/documentation/#PlaceDetailsRequests](https://developers.google.com/places/documentation/#PlaceDetailsRequests)

但是，我认为您正在寻找的是 Google Geocoding API：

> 地理编码是将地址（如“1600 Amphitheatre Parkway, Mountain View, CA”）转换为地理坐标（如纬度 37.423021 和经度 -122.083739）的过程，您可以使用它来放置标记或定位地图。Google Geocoding API 提供了一种通过 HTTP 请求访问地理编码器的直接方式。此外，该服务允许您执行相反的操作（将坐标转换为地址）；这个过程被称为“反向地理编码”。

您可以在 JSON 和 XML 响应中看到 5 位邮政编码：

[https://developers.google.com/maps/documentation/geocoding/#JSON](https://developers.google.com/maps/documentation/geocoding/#JSON)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-05-06T17:37:54.170

检查：place.AddressDetails.Country.AdministrativeArea.SubAdministrativeArea.Locality.PostalCode.PostalCodeNumber

# database - 服务器因流量高峰而崩溃，现在出现数据库连接错误

> ID：11805708
> 
> 赞同：0
> 
> 时间：2012-08-04T03:36:38.393
> 
> 标签：database, wordpress, crash, connection

所以我在我的网站上发布了一个新博客并在我的 Facebook 上推广它，其中流量峰值远远大于预期，服务器因流量而下降，重新启动后我现在遇到数据库连接错误。

我联系了我的服务器主机，他们告诉我：

* * *

“我能够从您网站的主目录中的 wp-config.php 文件中获取相关数据库详细信息，并且使用这些凭据，我能够毫无问题地连接到相关数据库。确保我能够连接并查询数据库我还创建了一个简单的测试脚本，可以在[http://yoursite.com/mysqltest.php查看](http://yoursite.com/mysqltest.php)

这确认服务器正确响应并且数据库本身能够接受连接和查询。

这给我们留下了问题出在 wordpress 安装的脚本/配置的可能性，这不是我将能够为您提供帮助的事情。

我怀疑问题出在 wp-config.php 文件上，但不能确定。”

* * *

我看不出 wp-config 会如何改变，我已经有一个多月没有碰过它了，否则它工作得很好。在我发布该博客后，该网站也运行良好，只是在服务器重新启动后它才没有。服务器上的所有其他站点都保持完美的工作状态。我不明白流量高峰是如何做到这一点的。我不知道下一步该怎么做？请帮忙！:(

D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:52:09.520

试试这个数据库连接测试脚本[https://gist.github.com/162913](https://gist.github.com/162913)

# python - 如何使用 python 在不同数据库之间选择和插入 BLOB？

> ID：11805709
> 
> 赞同：0
> 
> 时间：2012-08-04T03:36:59.570
> 
> 标签：python, sql-server, postgresql, blob

我有一些包含图像数据类型的 SQL Server 表。我想让它以某种方式在 PostgreSQL 中可用。我是一名 python 程序员，所以我对这个主题有很多了解。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:12:31.453

您首先需要了解的是，db级别的接口可能会有所不同。您最好的选择是为 blob 编写一个抽象层（并可能为您想要支持的数据库发布它的开源代码）。

在 PostgreSQL 方面，您需要确定是否要使用 bytea 或 lob。这些是非常不同的，并且具有不同的功能和限制。如果你有进取心，你至少可以在规范中建立支持来选择它们。一般来说，bytea 更适合较小的文件，而 lob 具有更多的管理开销，但它既可以支持更大的文件，也可以支持分块、查找等。

# css - 绝对页脚在移动浏览器中浮动

> ID：11805713
> 
> 赞同：2
> 
> 时间：2012-08-04T03:37:45.437
> 
> 标签：css, mobile, footer, css-position

帮助！对不起，如果这个问题在某个地方得到了回答，我试图找到它，我真的做到了。阅读大量关于移动浏览器中固定定位的内容，但这不是我想要的。

我想要的只是一个按钮（阅读：页脚 div），它位于页面的最底部（不是视口），无论页面是否足够长以保证滚动。我完全可以理解为什么移动浏览器在“固定”定位方面存在问题，但我并没有试图将我的按钮与视口对齐。我希望它绝对定位在文档中。尽管如此，div 正在做某种形式的半固定定位。随视口移动，但甚至没有到达页面底部（卡住了）。为什么我不能定义我的 div 在文档中的位置？如果没有 Javascript，这是不可能的吗？应该这样做是没有意义的。

这就是我正在做的

```
<!doctype HTML>
<html><head>...
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
...
<body><div class='container'>

...

<div class='footer'></div>
</div></body></html> 
```

CSS

```
html{
    height:100%;
}

body{
    height:100%;
}

.container{
    height:100%;
    width:100%;
    position:absolute;
    top:0px;
    left:0px;
}

.footer{
    position:absolute;
    bottom:0px;
    left:0px;
} 
```

本能告诉我这应该有效......显然我错了。在移动浏览器中甚至无法进行这种定位，还是我搞砸了？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:21:43.627

没关系......认为我解决了它！“最小高度：100%；” 似乎可以解决问题。不过谢谢。

# php - TemplateException：无法编写已编译的模板 - 在 git clone 之后

> ID：11805714
> 
> 赞同：1
> 
> 时间：2012-08-04T03:38:05.350
> 
> 标签：php, lithium

任何人都知道为什么我在获得最新版本的锂后会收到此异常？

```
( ! ) Fatal error:
  Uncaught exception 'lithium\template\TemplateException' with message
  'Could not write compiled template
  C:\Users\Master\Documents\Visual Studio 2010\Projects\PSER\PSER/resources/tmp/cache/templates/template_views_pages_index.html_0_1344056913_326.php
  to cache.' in
  C:\Users\Master\Documents\Visual Studio 2010\Projects\libraries\lithium\template\view\Compiler.php
  on line 81

( ! ) lithium\template\TemplateException:
  Could not write compiled template
  C:\Users\Master\Documents\Visual Studio 2010\Projects\PSER\PSER/resources/tmp/cache/templates/template_views_pages_index.html_0_1344056913_326.php
  to cache. in
  C:\Users\Master\Documents\Visual Studio 2010\Projects\libraries\lithium\template\view\Compiler.php
  on line 81

Call Stack

Time Memory Function Location

1 0.1070 331944 {main}( ) ..\index.php:0
2 0.2013 4387040 lithium\action\Dispatcher::run( ???, ??? ) ..\index.php:41
3 0.2013 4388248 lithium\core\StaticObject::filter( ???, ???, ???, ??? ) ..\Dispatcher.php:155
4 0.2013 4389784 lithium\util\collection\Filters::run( ???, ???, ??? ) ..\StaticObject.php:126
5 0.2014 4391752 {closure}( ???, ???, ??? ) ..\Filters.php:183
6 0.2015 4391752 lithium\util\collection\Filters->next( ???, ???, ??? ) ..\cache.php:46
7 0.2015 4391784 {closure}( ???, ???, ??? ) ..\Filters.php:202
8 0.2075 4427760 lithium\util\collection\Filters->next( ???, ???, ??? ) ..\action.php:51
9 0.2075 4427792 lithium\action{closure}( ???, ???, ??? ) ..\Filters.php:202
10 0.2198 4534776 lithium\core\StaticObject::invokeMethod( ???, ??? ) ..\Dispatcher.php:154
11 0.2198 4534808 lithium\action\Dispatcher::_call( ???, ???, ??? ) ..\StaticObject.php:75
12 0.2198 4535896 lithium\core\StaticObject::_filter( ???, ???, ???, ??? ) ..\Dispatcher.php:265
13 0.2198 4536152 lithium\action{closure}( ???, ???, ??? ) ..\StaticObject.php:119
14 0.2198 4536152 lithium\action\Controller->_invoke( ???, ???, ??? ) ..\Dispatcher.php:262
15 0.2199 4537752 lithium\core\Object->_filter( ???, ???, ???, ??? ) ..\Controller.php:198
16 0.2199 4538032 lithium\action{closure}( ???, ???, ??? ) ..\Object.php:238
17 0.2199 4538280 lithium\core\Object->invokeMethod( ???, ??? ) ..\Controller.php:184
18 0.2200 4538312 app\controllers\PagesController->view( ) ..\Object.php:165
19 0.2200 4538824 lithium\action\Controller->render( ??? ) ..\PagesController.php:32
20 0.2204 4541320 lithium\net\http\Media::render( ???, ???, ??? ) ..\Controller.php:266
21 0.2205 4550368 lithium\core\StaticObject::_filter( ???, ???, ???, ??? ) ..\Media.php:593
22 0.2206 4550616 lithium\net\http{closure}( ???, ???, ??? ) ..\StaticObject.php:119
23 0.2208 4553656 lithium\core\StaticObject::invokeMethod( ???, ??? ) ..\Media.php:590
24 0.2208 4553984 lithium\net\http\Media::_handle( ???, ???, ??? ) ..\StaticObject.php:75
25 0.2208 4555936 lithium\core\StaticObject::_filter( ???, ???, ???, ??? ) ..\Media.php:750
26 0.2209 4556184 lithium\net\http{closure}( ???, ???, ??? ) ..\StaticObject.php:119
27 0.2257 4579800 lithium\template\View->render( ???, ???, ??? ) ..\Media.php:746
28 0.2259 4583520 lithium\template\View->_step( ???, ???, ???, ??? ) ..\View.php:328
29 0.2259 4587040 lithium\core\Object->_filter( ???, ???, ???, ??? ) ..\View.php:389
30 0.2260 4587304 lithium\template{closure}( ???, ???, ??? ) ..\Object.php:238
31 0.2260 4587336 lithium\template\view\adapter\File->template( ???, ??? ) ..\View.php:386
32 0.2272 4588624 lithium\template\view\Compiler::template( ???, ??? ) ..\File.php:133 
```

我很确定路径中的斜线（向前或向后）不是问题。我创建了一个快速的小测试脚本，证明正斜杠和反斜杠可以在 Windows 的路径中共存。结果路径是：

```
C:/Users/Master/Documents/Visual Studio 2010/Projects/PHP Prototyping/PHP Prototyping\ABC\testFile.txt 
```

代码示例如下：

```
<?php
    $myFile = $_SERVER['DOCUMENT_ROOT'] . '\\ABC\\testFile.txt';
    $fh = fopen($myFile, 'w') or die('can\'t open file');
    $stringData = 'Bobby Bopper\n';
    fwrite($fh, $stringData);
    $stringData = 'Tracy Tanner\n';
    fwrite($fh, $stringData);
    fclose($fh);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T17:38:59.047

您的`resources`目录不可写，因此 Lithium 无法将编译后的模板写入`resources/tmp/cache/templates`.

编辑：还要仔细检查`resources`目录是否存在，因为它不应该在 git repo 中进行版本控制。

您可以使用此代码段动态创建它，并具有正确的权限：[https](https://gist.github.com/1009460) ://gist.github.com/1009460 ( `config/bootstrap/libraries.php`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:20:19.467

问题是缓存下的模板文件夹不存在。

该目录不存在，因为我没有将它添加到源代码管理中，因为 tmp 下的东西无论如何都不应该从 dev 转到 prd。写入模板缓存的问题一直存在，但最近对框架的更改导致 php 抛出错误而不是黑洞错误。

我在 template/view/Compiler.php 中添加了一些代码来处理丢失目录的创建。代码块的第一行是 68，没有改变。同样，结束行没有更改，因此您可以将添加的内容与之前的内容进行比较。

```
 $compiled = static::compile(file_get_contents($file));

    $pathIsWritable = is_writable($cachePath);      
    if(!$pathIsWritable){
        $exMessage = ' File not writable. ';
        if(!file_exists($cachePath)) {
            $exMessage .= 'Path to file invalid. ';
            $dirCreated = mkdir($cachePath, 0777, true);

            if($dirCreated) {
                $pathIsWritable = true;
            }
            else {
                $exMessage .= 'Attempt to create the directory path failed.';   
            }
        }           
    }

    if ($pathIsWritable && file_put_contents($template, $compiled) !== false) {
        foreach (glob("{$options['path']}/template_{$oname}_*.php") as $expired) { 
```

# jquery - JQuery 选择器快捷方式

> ID：11805715
> 
> 赞同：2
> 
> 时间：2012-08-04T03:38:09.353
> 
> 标签：jquery, css-selectors

给定以下代码：

```
$(div.now span).text('now');
$(div.30days span).text('30days');
$(div.60days span).text('60days'); 
```

如果我想缩短时间，这似乎是合乎逻辑的事情，如下所示：

```
$('span', 'div.now, div.30days, div.60days').text(some text); 
```

现在，在缩短的版本中，我想将文本设置为类名的文本，但似乎不知道该怎么做。有任何想法吗？我意识到这不是一件理想的事情，如果你愿意的话，它只是一个 JQuery 实验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T03:44:10.747

尝试以下操作：

```
$("div span").each(function(){
  $(this).text($(this).closest('div').attr('class'))
})​ 
```

[演示](http://jsfiddle.net/mmDQV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T03:43:20.763

在参数中使用函数而不是字符串`text`：

```
$('span', 'div.now, div.30days, div.60days').text(function() {
    return $(this).closest('div.now, div.30days, div.60days').attr("class");
}); 
```

以这种方式调用它，`this`绑定到当前元素 (a `span`)，因此您只需要检索~~其父~~级最近的祖先 div 的类并返回它。

[jsFiddle](http://jsfiddle.net/ypAyA/)的工作示例。请注意，即使有嵌套的 div，它也可以工作（因为它使用与`closest`原始上下文相同的选择器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T03:44:13.183

这就是你想要的？

```
$('div.now', 'div.30days', 'div.60days').each(function(){
  $(this).text(this.className); 
}); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T04:34:14.613

不需要循环使用`each`.

最好的方法如下。

```
$('div span').text(function() {
    return this.parentNode.className;
}); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/By8NA/1/)

# postgresql - 在终端显示 Postgres 服务器日志输出并同时记录到日志中

> ID：11805720
> 
> 赞同：11
> 
> 时间：2012-08-04T03:38:59.897
> 
> 标签：postgresql

我正在运行 Postgres 9.1（Mac OSX 上的 Homebrew 安装），我想更密切地监控我的 postgres 服务器。

我的问题与日志有关。我想让日志显示在终端窗格中。这是 Postgres[文档](http://www.postgresql.org/docs/9.1/interactive/app-pg-ctl.html)关于日志的内容：

“在类 Unix 系统上，默认情况下，服务器的标准输出和标准错误被发送到 pg_ctl 的标准输出（不是标准错误）。然后 pg_ctl 的标准输出应该被重定向到一个文件或通过管道传输到另一个进程，例如日志旋转程序，如 rotatelogs；否则 postgres 会将其输出写入控制终端（从后台），并且不会离开 shell 的进程组。在 Windows 上，默认情况下，服务器的标准输出和标准错误会发送到终端。这些默认行为可以通过使用 -l 将服务器的输出附加到日志文件来更改。建议使用 -l 或输出重定向。

所以，当我让我的 postgres 服务器运行以下命令时：

```
pg_ctl start -D /usr/local/var/postgres 
```

日志显示在终端窗口中。当我运行时：

```
pg_ctl start -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log 
```

日志转到我的日志文件并且不在终端中显示。

简而言之，如果有人能告诉我在将日志定向到文件（使用第二个命令）以使日志也出现在命令行后使用什么命令，那就太好了。当我开发（在 Django 中）以观察 SQL 语句实时执行时，它会有所帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-04T05:02:13.123

您可以使用以下命令查看日志：

```
tail -f /usr/local/var/postgres/server.log 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-07-22T09:23:58.793

我能够在以下位置找到日志：

```
less /var/log/postgresql/postgresql-10-main.log 
```

`ubuntu 18.04`与_`postgresql version: 10`

# java - Java：从特定点读取文件直到行尾

> ID：11805723
> 
> 赞同：0
> 
> 时间：2012-08-04T03:40:04.497
> 
> 标签：java, file, readline, filereader, fromcharcode

如何从指定位置读取文件到该行的末尾。

例子：

文件内容：

```
01234567
f1=value
f2=value
f3=value 
```

01234567 = 字符位置。我希望它从值中的“v”开始读取该行，并且我希望它读取到该行的末尾。所以位置是3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:46:44.960

首先运行您的文本文件`colrm`。或者，在务实地阅读每一行时，使用`String.substring`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:14:06.167

看看[FileInputStream.skip](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html#skip%28long%29)

如果这不起作用，您可以尝试从流中读取*n*个字节以放在开始读取位置（最好通过块而不是一次字节）

# java - 从 Android 手机上未完成的应用程序中恢复源代码

> ID：11805726
> 
> 赞同：1
> 
> 时间：2012-08-04T03:40:16.993
> 
> 标签：java, android, eclipse, intellij-idea

在过去的一个半月里，我一直在做一个项目，一个 Android 应用程序。今天我的电脑坏了。显然，备份并没有备份我的任何项目的源文件；它只是出于某种原因备份了可绘制文件夹？

无论如何，我想知道是否有办法以某种方式从手机上的应用程序中恢复源代码。我从来没有完全完成这个应用程序并创建了一个 .apk 或任何东西，但我在手机上运行了几次以进行调试，所以它在我的手机上处于相当新的状态。有没有办法以某种方式恢复源代码？我不想重做任何事情，但似乎我最终可能不得不这样做。

我在 Eclipse Indigo 中开始了这个项目，但后来将 IDE 切换到了 IntelliJ IDEA。我目前在我的计算机上的文件是：

*   项目的 EML 文件。它似乎是空白的。

*   可绘制文件夹

就是这样。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T06:42:57.207

您可以使用 dex2Jar 获取一个 jar，然后使用 JD-GUI 来检查代码。由于它正在反编译，因此它不会是精确的，而是接近的。

dex2jar：[http ://code.google.com/p/dex2jar/](http://code.google.com/p/dex2jar/)

JD-GUI：http: [//java.decompiler.free.fr/](http://java.decompiler.free.fr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T03:49:12.757

您可以将其视为一种选择：

> 它是一个用于逆向工程第三方、封闭、二进制 Android 应用程序的工具。它可以将资源解码为几乎原始的形式，并在进行一些修改后重建它们；它使逐步调试 smali 代码成为可能。由于类似项目的文件结构和一些重复性任务（如构建 apk 等）的自动化，它也使使用应用程序更容易。

[http://code.google.com/p/android-apktool/](http://code.google.com/p/android-apktool/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T04:42:15.267

您可以尝试使用文件恢复软件从硬盘中恢复已删除的文件（如果它正在工作）。这些软件对我从格式化的 SDCARD 中恢复图片很有帮助。所以你可以试一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T13:29:54.120

您也许可以使用 IntelliJ IDEA 的“本地历史”功能。IntelliJ 会跟踪您`.IntelliJIdea10`在使用主页文件夹中的所有编辑。如果该文件夹在崩溃中没有损坏，您应该能够恢复所有代码。

只需右键单击**Project**选项卡中的模块目录，然后选择**Local History** > **Show History**。等待历史项目列表加载，可能需要几秒钟。右键单击左侧面板中的项目并选择**Revert**。

# c# - 有什么方法可以使用应用程序图标作为通知图标？

> ID：11805727
> 
> 赞同：4
> 
> 时间：2012-08-04T03:40:18.587
> 
> 标签：c#, icons

我使用相同的图标为我的应用程序设置图标和通知图标，但是在编译时，我的 exe 文件里面有两个图标。

有什么方法可以将应用程序图标设置为通知图标（或反向）？我正在构建小型应用程序并减少 exe 文件大小（甚至是几千字节）对我来说很重要。

你能帮我解决这个问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-02T01:00:33.873

如果您希望您`NotifyIcon`的应用程序具有相同的图标，请在您的表单中执行以下操作：

```
 trayIcon.Icon = new Icon(this.Icon, 40, 40); //trayIcon is your NotifyIcon 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-25T18:00:50.060

如果要获取 .exe 本身的主图标，可以这样做：

```
NotifyIcon.Icon = System.Drawing.Icon.ExtractAssociatedIcon(Application.ExecutablePath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T03:52:49.433

使您的主窗体图标与您的应用程序图标相同，并在 Form_Load 中将 NotifyIcon 控件的图标属性设置为 this.Icon。

希望能帮助到你

# php - 定义中的变量

> ID：11805728
> 
> 赞同：0
> 
> 时间：2012-08-04T03:40:32.517
> 
> 标签：php

我正在将一个 XML 文件加载到页面中，并希望从 URL 参数中获取信息，并将其放入 simplexml 正在加载的 XML 文件的 url 中。这可能吗？这是当前代码：

```
$gid = $_GET['gid']; 
$gach = simplexml_load_file('http://xml.com/GIDHERE/page.html?xml=1'); 
```

我怎样才能把 $gid 放在它说 GIDHERE 的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:42:41.267

```
$gach = simplexml_load_file('http://xml.com/' . rawurlencode($gid) . '/page.html?xml=1'); 
```

您可能还想在使用之前验证输入，例如：

```
if (!preg_match('{^[1-9][0-9]*$}', $gid)) die; 
```

如果`$gid`始终是整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T03:43:25.820

```
$gach = simplexml_load_file("http://xml.com/$gid/page.html?xml=1"); 
```

您必须使用双引号，单引号禁用变量解析，并注意将未经检查的变量放入 url，您可能会以漏洞告终！如果 gid 是整数，只需执行此操作即可

```
$gid = (int) $_GET['gid']; 
```

# datetime - Mono 中的 DateTime.ToString 返回无效日期（“00/734718/0001 01:41:38”）

> ID：11805729
> 
> 赞同：12
> 
> 时间：2012-08-04T03:40:34.513
> 
> 标签：datetime, mono, raspberry-pi

我正在尝试使用 raspbian 发行版（“Debian GNU/Linux wheezy/sid”）让 mono（Debian 2.10.8.1-5）在我的树莓派上正常运行。我已经使用 apt-get install mono-complete 安装了单声道。

但是，我遇到了一个我无法弄清楚的有趣问题。DateTime.ToString() 方法返回无效字符串。

您可以在下面找到我的带有控制台输出的示例程序：

```
using System;

namespace MonoTest
{
    class Program
    {
        static void Main(string[] args)
        {
            DateTime now = DateTime.Now;
            Console.WriteLine("Year: " + now.Year);
            Console.WriteLine("Month: " + now.Month);
            Console.WriteLine("Day: " + now.Day);
            Console.WriteLine("DayOfWeek: " + now.DayOfWeek);
            Console.WriteLine("DateTime.Now: " + DateTime.Now);
            Console.WriteLine(DateTime.Now.ToString("yyyy-MM-dd"));
        }
    }
} 
```

输出：

```
pi@raspberrypi ~/bin $ mono MonoTest.exe
Year: 2012
Month: 8
Day: 3
DayOfWeek: Friday
DateTime.Now: 00/734718/0001 01:41:38
0001-00-734718 
```

有趣的是，734718 似乎是自 01/01/0001 到今天为止的天数。我已经在第二块板上进行了全新安装，但遇到了同样的问题。

有谁知道这里的问题是什么以及如何说服 DateTime.ToString() 返回正确的值？

**更新（2012 年 8 月 4 日）：**在对单声道源代码进行长时间挖掘之后，我能够将问题追溯到 System.Math.Floor。显然，它总是返回 0。我将测试程序更改为简单的：

```
static void Main(string[] args)
{
    Console.WriteLine("Floor(1.5): " + System.Math.Floor(1.5));
} 
```

在 Windows 上，结果是“Floor(1.5): 1”，而我在树莓派上的单声道设置是“Floor(1.5):0”。我已经看到 System.Math.Floor 被实现为

```
[MethodImplAttribute (MethodImplOptions.InternalCall)]
public extern static double Floor (double d); 
```

明天，我将进一步研究这个问题。有谁知道为什么会存在这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T15:11:15.967

这是 Mono 错误[#7938](https://bugzilla.xamarin.com/show_bug.cgi?id=7938)，它不仅影响 DateTime.ToString，还影响任何直接或间接将浮点数传递给库调用的函数，当在 ARM 上运行时，使用为硬浮点构建的 Linux 发行版ABI。更多详细信息可在[C# on Raspberry Pi](http://elinux.org/CSharp_on_RPi) wiki 页面上找到。目前没有很好的解决方案，除了运行软浮动发行版。我仍然希望我们能尽快获得一个固定的单声道运行时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T04:11:24.140

我无法在 Windows 上重现您的问题（没有覆盆子，但您的主题说`Mono`）。

我将您的确切源代码复制并粘贴`Main()`到一个新的 Mono 控制台应用程序 (Mono 2.6.1) 中，添加了一行 ( `Console.ReadLine();`)，然后运行它：

```
using System;

namespace TestDateTimeNow
{

  class MainClass
  {
    public static void Main (string[] args)
    {
        DateTime now = DateTime.Now;
        Console.WriteLine("Year: " + now.Year);
        Console.WriteLine("Month: " + now.Month);
        Console.WriteLine("Day: " + now.Day);
        Console.WriteLine("DayOfWeek: " + now.DayOfWeek);
        Console.WriteLine("DateTime.Now: " + DateTime.Now);
        Console.WriteLine(DateTime.Now.ToString("yyyy-MM-dd"));
        Console.ReadLine();
    }
  }
} 
```

我得到下面的输出：

![Mono 应用程序控制台应用程序输出](../Images/6c2890c2958483d3a5f8a446c80a447d.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T10:06:03.053

这很可能是 ARM Mono 二进制层错误。特别是因为您运行的是在 Raspberry Pi 之前发布的版本。[在mono-devel mailing list](http://lists.ximian.com/mailman/listinfo/mono-devel-list)上，你会有更好的运气。这可能已经在 git 中修复了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T19:42:31.817

为此，您需要使用软浮点操作系统。例如 2013-05-29-wheezy-armel.zip。

硬浮点不适用于 JITers。我有同样的问题，通过在我的 RP 上安装操作系统的软浮点版本来解决它。我不建议在树莓派平台下使用带有硬浮点操作系统的 .net。希望这可以帮助。

# php - PHP动态获取将包含在其他文件中的特定文件的完整绝对URL路径

> ID：11805731
> 
> 赞同：4
> 
> 时间：2012-08-04T03:40:48.350
> 
> 标签：php, url, absolute-path

我有一个配置文件。这不是一个独立的文件。我将使用 require() 将这个文件包含在我想要使用的页面的顶部。我想**动态获取此配置文件的完整绝对 url 路径**，无论它的位置如何，并将其作为常量存储在其自身中。例如：

**物理位置：（**根目录）/my_folder/configuration.php

**需要网址为：** www.mydomain.com/my_folder/configuration.php

**物理位置：（**根目录）/demos/my_folder/configuration.php

**需要网址为：** www.mydomain.com/demos/my_folder/configuration.php

**物理位置：（**根目录）/demos/site1/my_folder/configuration.php

**需要网址为：** www.mydomain.com/demos/site1/my_folder/configuration.php

**物理位置：（**根目录）/demos/site2/my_folder/configuration.php

**需要网址为：** www.mydomain.com/demos/site2/my_folder/configuration.php

到目前为止简单吗？这是真正需要的并使其变得复杂（IMO）。考虑一下：

**配置文件位于：** www.mydomain.com/demos/site2/my_folder/configuration.php

**有嵌套文件夹：** www.mydomain.com/demos/site2/1/2/3/index.php

当我按照上面的 URL 访问“3”子文件夹中的 index.php 文件时，**我需要配置文件的路径为 www.mydomain.com/demos/site2/my_folder/configuration.php**而不是 www。 mydomain.com/demos/site2/1/2/3/my_folder/configuration.php

我怎样才能实现上述目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T04:04:31.330

如果你可以依赖 的值`$_SERVER[ 'DOCUMENT_ROOT' ]`，那么在里面`configuration.php`：

```
$path = substr( __FILE__, strlen( $_SERVER[ 'DOCUMENT_ROOT' ] ) );

$url = "www.mydomain.com{$path}"; 
```

`$_SERVER[ 'HTTP_HOST' ]`如果它适合您的用例，您可以使用;使其更具动态性

# DOCUMENT_ROOT

我`DOCUMENT_ROOT`在开发中大量使用了它，因为它通常是唯一可用于构建某些自引用路径的动态变量。有一个长期运行的 Apache 错误票 ( [#26052](https://issues.apache.org/bugzilla/show_bug.cgi?id=26052) ) 关于如何`DOCUMENT_ROOT`处理不当，特别是 Apache 不允许您设置值，`RewriteRule`并且在使用 mod_vhost_alias 时没有将其设置为合理的值。讨论持续了 7 到 8 年，大概来自 Apache 项目的人们抵制改变行为，直到他们终于在今年 2.4.1 中出现并做出改变。（我之前研究过这个，但我现在忘记了确切的变化是什么，以及它们有多令人满意。）

如果您查看票证上的评论，您会看到人们抵制改变行为的评论，例如：

> 不要相信 DOCUMENT_ROOT 变量。
> 
> DOCUMENT_ROOT 不是，从来不是，也永远不会是找到 Web 内容的文件系统路径的可靠方法。

所以我建议阅读那张票上的评论，看看人们在说什么使用它的注意事项。我已经使用它取得了很大的成功，但不知道有更好的方法在相同的情况下实现相同的事情`DOCUMENT_ROOT`并提供必要的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T11:17:00.587

我使用的，非常适合我想要的，是这样的：

```
define('URL', dirname(substr($_SERVER['SCRIPT_FILENAME'], strlen( $_SERVER[ 'DOCUMENT_ROOT' ] ) )).'/'); 
```

# google-app-engine - GAE：队列、配额和后端实例

> ID：11805737
> 
> 赞同：1
> 
> 时间：2012-08-04T03:42:34.670
> 
> 标签：google-app-engine, gae-quotas

我有一个队列，里面有很多任务。我想使用一个后端实例来处理这个队列。我的配额信息告诉我，我在数百个前端实例小时数上超出了预算，并且没有使用任何后端实例小时数。由于我只配置了一个后端实例，我预计每小时收费不超过 1 个（后端）实例小时。这是我的配置：

后端.yaml

```
backends:
- name: worker
  class: B8
  instances: 1
  options:dynamic 
```

队列.yaml

```
- name: import
  rate: 20/s
  bucket_size: 40 
```

在我的脚本中将任务添加到队列中

```
deferred.defer(importFunction, _target='worker', _queue="import") 
```

账单状态

```
Resource                     Usage   
Frontend Instance Hours      198.70 Instance Hours      
Backend Instance Hours       0.00 Instance Hours 
```

任务标题

```
X-AppEngine-Current-Namespace   
Content-Type    application/octet-stream
Referer http://worker.appname.appspot.com/_ah/queue/deferred
Content-Length  1619
Host    worker.appname.appspot.com
User-Agent  AppEngine-Google; (+http://code.google.com/appengine) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:08:33.520

我需要部署我的后端代码：

```
appcfg.py backends update dir instance_name 
```

# java - OutOfMemoryError：Java 堆空间，同时将一些批量数据转换为 toString()

> ID：11805740
> 
> 赞同：1
> 
> 时间：2012-08-04T03:43:01.327
> 
> 标签：java, out-of-memory

我面对 `java.lang.OutOfMemoryError: Java heap space`。一些大容量的数据转换成`toString()`. 我有自己的`toString`代码实现。你可以看到下面的代码：

```
String dataStr = (new LargeData(objData)).toString();

public String toString() 
{ 
    try 
    { 
       if (localBase64Binary != null) 
       { 
           ByteArrayOutputStream out = new ByteArrayOutputStream(); 
           localBase64Binary.writeTo(out); return out.toString("utf-8"); 
       } 
     } 
    catch (IOException ex) 
    { 
       ex.printStackTrace(); 
    } 
    return null; 
} 
```

我正在使用最大堆空间`-Xms128m -Xmx256m`。如果我增加堆空间，我只能推迟几天内存不足。在这种情况下有什么方法可以优化代码吗？

任何人都可以指导我或帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T03:55:01.943

一个问题是动态调整数组大小以添加更多元素。这需要分配一个比现有数组更大的新数组，然后复制元素。如果新数组大于堆空间的一半，则保证失败。

您的问题的解决方案是不使用`.toString()`. 与其尝试将所有数据保存在 RAM 中，不如将文件流传递给方法并将数据写入磁盘（或将其流式传输到套接字或管道）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T08:05:22.543

您需要在生成数据时处理生成的数据，而不是生成一个大字符串并传递给其他东西来做某事。

例如，而不是

```
String dataStr = (new LargeData(objData)).toString();
out.println(dataStr); 
```

做

```
new LargeData(objData).writeTo(out); 
```

因为这将一次使用更少的内存。

# warnings - “绘制图像没有意义” - 升级到 MountainLion 后的警告

> ID：11805741
> 
> 赞同：5
> 
> 时间：2012-08-04T03:43:07.257
> 
> 标签：warnings, osx-mountain-lion

在我将我的编程机器升级到 MountainLion 并将 XCode 升级到新版本后，每次运行我的应用程序时，我都会在控制台中打印此警告：

> 当 [NSGraphicsContext currentContext] 为 nil 时，绘制图像没有意义。这是一个编程错误。中断 void _NSWarnForDrawingImageWithNoCurrentContext() 进行调试。这将只记录一次。这可能会在未来打破。

我没有在我的应用程序中的任何地方使用图像，我在整个项目中搜索图像但找不到图像。有人知道是什么原因造成的吗？

顺便说一句，我正在使用 2 个 nib 文件：一个 Popover 和主窗口。它们都不包含图像。

编辑：当这出现时，我找到了这条线：

```
 [self.popover showRelativeToRect:[appDelegate.menulet frame] 
                              ofView:appDelegate.menulet 
                       preferredEdge:NSMinYEdge]; 
```

但是这些对象都不是零。有什么建议么？

编辑 2：Menulet 是一个 NSView 子类顺便说一句。所以我正在传递一个观点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:07:08.680

我尝试设置断点，但在 nib 加载时会调用它。所以它非常不具体。我创建了一个 nib 的副本，然后一个一个地从中删除对象，直到警告消失。在我的例子中，它是一个 NSOutlineView。但是一旦我添加了一个新的 NSOutlineView，错误就回来了。

我终于能够通过手动重建整个 NIB 来消除警告。辛苦，但它摆脱了警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T13:17:11.797

如果您有一个在笔尖中初始化但没有设置图像的 NSImageView（并且您自己在代码中绘制图像），只需设置它，警告就会消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:13:47.830

就我而言，这是因为图像大小为 {0,0}，“没有意义”。实际上，图像是 NSButton 的，我以编程方式更改按钮的图像。在一种情况下，按钮应该是空的，所以我只是设置了一个空图像`[NSImage new]`。但是错误发生了，那么无论我如何更改按钮的图像，按钮总是为空的。为空图像设置大小后，问题解决，我可以成功更改按钮的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:02:15.937

在我的情况下，警告导致用矩形重写我的 menuIcon（在 menuBar 应用程序上工作）。还没有解决这个问题，但我知道它来自我的情况。如果您有菜单栏应用程序，请检查生成图标的代码。

# python - 使用 gevent-socketio 和 Socket.IO.js 的 Python 瓶子微框架的最小示例

> ID：11805756
> 
> 赞同：10
> 
> 时间：2012-08-04T03:46:49.697
> 
> 标签：python, websocket, socket.io, gevent, bottle

**问题：**除了使用[gevent-socketio](http://pypi.python.org/pypi/gevent-socketio/)和[Socket.io.js](http://socket.io/)和[bottle实现之外，与](http://bottlepy.org/docs/dev/)[此链接](http://bottlepy.org/docs/dev/async.html#finally-websockets) 中的示例类似的解决方案是什么？我正在寻找最小的解决方案，它可以简单地将一些流量从客户端传递到服务器，然后使用 gevent-socketio、Socket.io.js 和瓶子返回到客户端。

**背景：**我开发了一个简单的 web 应用程序，它为服务器上的远程自定义 shell (cli) 提供了一个基于 web 的终端。浏览器（客户端）从表单输入字段收集 shell 命令，通过 web-socket 将命令传递给通过处理程序`gevent.pywsgi.WSGIServer`处理请求的`geventwebsocket.WebSocketHandler`处理程序，该处理程序将命令提供给 shell，同时通过套接字将输出异步返回到 textarea 字段在客户端浏览器中的表单中。这是基于瓶子团队提供的一个很好的小例子：

[http://bottlepy.org/docs/dev/async.html#finally-websockets](http://bottlepy.org/docs/dev/async.html#finally-websockets)

此处提供冗余：

**example_server.py**：

```
from bottle import request, Bottle, abort
app = Bottle()

@app.route('/websocket')
def handle_websocket():
    wsock = request.environ.get('wsgi.websocket')
    if not wsock:
        abort(400, 'Expected WebSocket request.')

    while True:
        try:
            message = wsock.receive()
            wsock.send("Your message was: %r" % message)
        except WebSocketError:
            break

from gevent.pywsgi import WSGIServer
from geventwebsocket import WebSocketHandler, WebSocketError
server = WSGIServer(("0.0.0.0", 8080), app,
                    handler_class=WebSocketHandler)
server.serve_forever() 
```

**客户端.html**：

```
<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript">
    var ws = new WebSocket("ws://example.com:8080/websocket");
    ws.onopen = function() {
        ws.send("Hello, world");
    };
    ws.onmessage = function (evt) {
        alert(evt.data);
    };
  </script>
</head>
</html> 
```

**动机：** 我现有的应用程序在最新版本的 Firefox 和 Chrome 中运行良好。不存在 IE 支持，Safari 兼容性中等。我最终正在寻找一种跨浏览器解决方案来在客户端和服务器之间通信 shell 命令和输出。如果我有一个简单的瓶子例子，我想我可以更快地前进。

顺便说一句，我查看了[gevent-socketio 示例](https://github.com/abourget/gevent-socketio/tree/master/examples)，甚至[还有一个 bottle 示例](https://github.com/defnull/bottle/pull/245)，但所有这些示例都与上面的简单示例相差太大，无法在应用程序上实现飞跃。（gevent-socketio 示例看起来与我熟悉的瓶子应用程序完全不同。而且，瓶子示例实际上并没有展示如何与客户端通信。）

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:40:43.970

[马戏团](https://github.com/mozilla-services/circus)！建立在 zmq 之上的进程运行器和观察器，使用 Bottle 和 socketio 作为 Web 界面：

[https://github.com/mozilla-services/circus/blob/master/circus/web/circushttpd.py](https://github.com/mozilla-services/circus/blob/master/circus/web/circushttpd.py) [https://github.com/mozilla-services/circus/blob/master/circus/web/server.py](https://github.com/mozilla-services/circus/blob/master/circus/web/server.py)

源代码非常简单，可以帮助您开始使用 Bottle 和 socketio 构建更大的应用程序。

否则，我建议你转向[sockjs](https://github.com/sockjs/sockjs-client)！这是一个更通用的实现，可以更好地支持不同的后端。

这个其他线程可以帮助你： [SockJS 或 Socket.IO？值得重新编码基于 ajax 的页面吗？](https://stackoverflow.com/questions/10341593/sockjs-or-socket-io-worth-to-recode-ajax-based-page)

# c - fclose() 总是返回 EOF

> ID：11805758
> 
> 赞同：2
> 
> 时间：2012-08-04T03:47:03.773
> 
> 标签：c, eof, fclose

我有一个函数可以从文件中读取特定格式的整数。它可以按需要正常工作，但是每当我尝试使用 fclose() 关闭文件时，fclose() 总是返回 EOF。

任何建议为什么？我是学生，还在学习。我把代码放在下面。如果您需要“处理”代码，请告诉我。谢谢 ：）

```
// Open the file
FILE *myFile = fopen(fileName, "r");
if(myFile == NULL){
    //Handle error
    fprintf(stderr, "Error opening file for read \n");
    exit(1);
}

while(myFile != EOF)
{
     // read and process the file
     // this part works.
}

// always returns EOF here. WHY?
if (fclose(myFile) == EOF) {
    // Handle the error!
    fprintf(stderr, "Error closing input file.\n");
    exit(1);
}
printf("Done reading the file."); 
```

编辑：感谢您的所有回复。抱歉，我无法发布代码，因为这是我作业的一部分。我试图获得一些帮助，我并不是要你们为我编写代码。根据我的教授的说法，发布代码是非法的（因为其他学生可以看到并*可能*复制，这就是他告诉我的）。我只能在周日之后发布代码。现在，我将尝试修改我的代码并避免使用 fscanf。谢谢和我的道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T04:57:11.120

这个：

```
while(myFile != EOF) 
```

实际上是非法的（违反约束）。任何符合标准的 C 编译器都需要发出诊断；默认情况下，gcc 仅发出警告（确实有资格作为“诊断”）。

如果 gcc 给了你一个警告，你应该注意它；gcc 经常发出警告，恕我直言，应该将其视为致命错误。如果它没有给您警告，您可能会使用禁用警告的选项来调用它（这很奇怪，因为它默认会产生该警告）。一组可以使用的好选项是`-Wall -Wextra -std=c99 -pedantic`（或者如果您愿意，可以调整`-std=...`选项以强制执行不同版本的标准）。

`myFile`是指针类型，特别是`FILE*`. `EOF`是 类型`int`，通常扩展为`(-1)`。您不能合法地将指针值与整数值进行比较（空指针常量的特殊情况除外，但这不适用于此处。）

假设程序没有被拒绝，我希望这会导致无限循环，因为`myFile`几乎可以肯定永远不会等于`EOF`.

你*可以*把它改成

```
while (!feof(myFile)) 
```

但这可能会导致其他问题。从文件读取时检测文件结尾的正确方法是使用您正在使用的任何函数返回的值来读取数据。请查阅您正在使用的函数的文档，以查看它在遇到文件结尾或错误条件时返回的内容。该`feof()`函数可用于在您完成阅读*后*确定您是否遇到文件结尾或错误情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T03:57:26.730

由于您无法对以只读模式打开的常规文件执行任何操作，这会导致`fclose`错误输出，因此您很可能在未显示的代码中存在错误，该错误会影响`myFile`结构。

此外，测试`myFile != EOF`永远不会是真的，因为你将它设置为 fopen 的返回，它永远不会给你`EOF`，你已经检查了它`NULL`你的意思是不是像：

```
while((c = fgetc(myFile)) != EOF) {
    // do stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T03:54:41.333

errno 说了什么？将此添加到您的代码中：

```
#include <errno.h>
#include <string.h>

if (fclose(myFile) == EOF) {
    // Handle the error!
    fprintf(stderr, "Error closing input file. and errno = %d, and error = %s\n", errno, strerror(errno));
    exit(1);
} 
```

希望这有帮助。

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T04:36:03.560

```
while(myFile != EOF)
 {
 // read and process the file
 // this part works.
 } 
```

如果这部分没问题，那么

```
fclose(myFile); 
```

绝对返回EOF。因为while循环仅终止myFile == EOF（这是一个错误的比较，不要忽略警告）。指针和int之间的比较。因为EOF是在stdio.h文件中定义的宏并且根据glibc它-1.您的循环终止，这意味着您的 myFile 指针更改为 EOF some whire。这是您的错误。

只需浏览您的代码，您必须更改不应被您覆盖的 FILE 指针 myFile 因为它指向用于所有文件操作的文件结构。

**注意** myFile 是指向文件的指针，不应在任何赋值语句中用作左值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T04:48:57.403

Change `while(myFile != EOF){...}`by`while(!feof(myFile)){...}`
`myFile`是指向 FILE 结构（内存地址）的指针。不是“文件结束”指示器。

# ios - 在 Instruments 中保留计数以 2 递增

> ID：11805762
> 
> 赞同：0
> 
> 时间：2012-08-04T03:47:54.350
> 
> 标签：ios, automatic-ref-counting

对象的保留计数如何在 Instruments 中增加 2 倍？

请看下面的仪器截图。

在#10 中，保留计数为 3。在#11 中发生了自动释放，这不会影响保留计数。在 # 12 中，发生了保留，这应该将保留计数设置为 4，但它显示为 5。

这怎么可能？有任何想法吗？

![仪器截图](../Images/3b1f625486a1383347cb417787d4ff2b.png)

# sql-server - 使用c#获取非服务器机器（SQL）的连接字符串

> ID：11805769
> 
> 赞同：0
> 
> 时间：2012-08-04T03:51:29.527
> 
> 标签：sql-server, c#-4.0, connection-string, sqlconnection

我正在使用 c#.net 开发 Windows 窗体应用程序。我开发了一个使用 sql 数据库作为后端的应用程序。使用本地服务器我正在工作。现在我需要在网络上有服务器的客户端机器上工作（非服务器机器）。我如何使用非服务器机器）。

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:55:03.020

修改您的连接字符串。而不是本地主机或“。” 或您的机器名称，使用服务器机器名称和 sqlinstance 名称。有关连接字符串的更多信息，请查看[http://www.connectionstrings.com](http://www.connectionstrings.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:51:17.827

假设当你执行你的应用程序时，它的地址是

```
 http://localhost/pagename.aspx/formname 
```

因此，您可以通过将 localhost 替换为机器的 ip 地址来访问它

```
http://10.123.4.56/pagename.aspx/formname 
```

# node.js - npm 不适用于节点 v0.8.5？

> ID：11805770
> 
> 赞同：5
> 
> 时间：2012-08-04T03:51:35.737
> 
> 标签：node.js, heroku, npm

我正在将 Node 应用程序部署到 Heroku 并收到以下错误。如果 npm 不能与最新版本的 Node 一起使用，我们应该将什么用于包管理器？我真的很喜欢 node_modules 和 package.json。这似乎很合乎逻辑。

```
-----> Heroku receiving push
-----> Node.js app detected
-----> Resolving engine versions
       Using Node.js version: 0.8.5
       Using npm version: 1.0.106
-----> Fetching Node.js binaries
-----> Vendoring node into slug
-----> Installing dependencies with npm
       Error: npm doesn't work with node v0.8.5
       Required: node@0.4 || 0.5 || 0.6 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T07:17:11.797

如果您`0.8.x`通过`"engines"`在您的 中指定 Node.js `package.json`，您可能还需要为 设置一个版本`"npm"`：

```
{
  ...
  "engines": {
    "node": "0.8.x",
    "npm":  "1.1.x"
  }
} 
```

来自[Node.js 的 Heroku 开发中心](https://devcenter.heroku.com/articles/nodejs-versions)：

> 如果您不指定版本，您将获得以下默认值：
> 
> *   节点.js：`0.4.7`
> *   npm：`1.0.106`

该页面还包含指向两者支持的版本清单的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:08:37.020

您只是得到了一个过时的 npm 版本：当前版本是 1.1.45，并且可以与 0.8.x 版本的 node 一起使用。

# python - 通过代理隧道 httplib

> ID：11805773
> 
> 赞同：19
> 
> 时间：2012-08-04T03:52:35.173
> 
> 标签：python, sockets, proxy, tunnel, httplib

我试图弄清楚如何通过代理将数据发送到服务器。我希望这可以通过 tor 实现，但是由于 tor 使用 SOCKS，所以使用 httplib 显然是不可能的（如果我错了，请纠正我）

这就是我现在所拥有的

```
import httplib
con = httplib.HTTPConnection("google.com")
con.set_tunnel(proxy, port)
con.send("Sent Stuff") 
```

问题是，设置隧道时它似乎冻结了。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-04T06:24:44.197

如果要使用http代理，应该是这样的：

```
import httplib
conn = httplib.HTTPConnection(proxyHost, proxyPort)
conn.request("POST", "http://www.google.com", params) 
```

如果你想使用 SOCKS 代理，你可以在这个问题中使用 SocksiPy：[How can I use a SOCKS 4/5 proxy with urllib2?](https://stackoverflow.com/questions/2317849/how-can-i-use-a-socks-4-5-proxy-with-urllib2)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-26T01:26:36.237

看起来正确的答案是：

[http://bugs.python.org/issue11448#msg130413](http://bugs.python.org/issue11448#msg130413)

```
import httplib
con = httplib.HTTPConnection(proxyHost, proxyPort)
con.set_tunnel("www.google.com", 80)
con.send("Sent Stuff") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-03T21:30:56.833

作为 Khue Vu 回答的后续，这里有一个完整的示例，使用 SOCKS 代理进行此操作的细节比预期的要复杂。

首先安装 PySocks：

```
pip install PySocks 
```

然后，您需要在实例化 HTTPConnection 并通知它将使用代理后手动设置您的 SOCKS 代理：

```
from http.client import HTTPConnection
from urllib.parse import urlparse, urlencode

import socks

url = urlparse("http://final.destination.example.com:8888/")

conn = HTTPConnection('127.0.0.1', 9000) # use socks proxy address
conn.set_tunnel(url.netloc, url.port) # remote host and port that you actually want to talk to
conn.sock = socks.socksocket() # manually set socket
conn.sock.set_proxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", 9000) # use socks proxy address
conn.sock.connect((url.netloc, url.port)) # remote host and port that you actually want to talk to

request_path = "%s?%s" % (url.path, url.query)
conn.request("POST", request_path, post_data) 
```

注意上面的导入是python3.x

# asp.net-mvc - 在 Rhino Mock 中部分模拟 ASP.Net MVC 操作方法？

> ID：11805778
> 
> 赞同：0
> 
> 时间：2012-08-04T03:54:52.433
> 
> 标签：asp.net-mvc, controller, mocking, rhino-mocks

我是 Rhino 的新手，想知道如何在我也会模拟的类的方法中模拟局部变量/对象。在这种情况下，我将使用 ASP.Net MVC 控制器和操作方法来执行此操作。

这是控制器的外观，简化后：

```
public class HomeController : Controller  {

   public myObjectType myMockedObject; //I want to mock this
   public myNonMockedObject;           //don't want to mock this
   public ViewResult Index() {
     //call various methods on the mocked and nonmocked members
     return View();
   }
} 
```

换句话说，我想创建一个模拟主控制器并模拟其中的一些局部变量及其方法——但不是全部。这可以使用犀牛吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-30T07:15:15.493

您可以通过构造函数参数注入这些。只需编写以 myObjectType 作为参数的构造函数。在此构造函数中，只需初始化您的字段。

**注意1：**如果要运行MVC，您还需要无参数ctro，或修改ConstructorFactory（例如这里[https://www.codeproject.com/Articles/560798/ASP-NET-MVC-Controller-Dependency-Injection-for-Be](https://www.codeproject.com/Articles/560798/ASP-NET-MVC-Controller-Dependency-Injection-for-Be)）。或者只是考虑使用一些 IoC 容器（例如[https://www.nuget.org/packages/Unity/](https://www.nuget.org/packages/Unity/)），它可以在控制器（模拟或普通类）中注入任何你想要的东西。

**注意2：**您应该从 myObjectType 类中提取一个接口并模拟该接口而不是具体类（Rhino 处理得更好）。

**注意3：**我通常试图将所有逻辑（并单独测试）放在控制器之外，因为测试控制器非常困难（你需要在那里初始化很多涉及另一个模拟的东西）。

# c++ - C++ Qt QPixmap 分段错误

> ID：11805781
> 
> 赞同：-1
> 
> 时间：2012-08-04T03:55:09.887
> 
> 标签：c++, qt, segmentation-fault, qpixmap

我正在使用 Qt 在 C++ 中实现一个带有 GUI 的纸牌游戏。

我有一个main.cpp，它通过调用window.cpp 中的Window 类来创建一个窗口。在 window.cpp 中，我们有一堆框架和其他小部件，它们稍后将形成 GUI。

然后是 card.cpp 中的 Card 类，其中包含有关卡片的信息。Deck.cpp 中的 Deck 类具有特定类型的卡片数量。最后，gui_cards_kingdom.cpp 从卡片的图像（卡片中的路径）和卡片中的信息（也在卡片中）构造一个小部件。gui_cards_kingdom 定义了一个继承自 Widget 的类，并包含一个 Deck 实例（以便能够提取所需的信息）。

到现在为止还挺好。在window.cpp 中，我创建了一个Card 实例，并将其放入Deck 的一个实例中，我将其发送到Cards_kingdom（gui_cards_kingdom.cpp 中的类）。

在 gui_cards_kingdom.cpp 中的 img->setPixmap(image) 行中使用 QPixmap 时出现分段错误

调试器告诉我信息在那里，一切都准备就绪，除了我使用 QPixmap 将卡的图像加载到标签上时。

这不是路径，因为我在 main.cpp 中测试了一些简单的代码（请参阅 main.cpp 中注释掉的代码）。我只使用了 img->setPixmap(image); 只是要确定。

我在我的知识的极限。我搜索了很多，没有找到任何东西，因此，我问你们，你们在这里看到了什么，我错过了？

提前感谢您的时间和帮助，

-比阿特丽斯

主.cpp：

```
#include <QtGui>
#include <window.h>

int main(int argc, char *argv[]){
QApplication app(argc, argv);

//QWidget fenetre;
//QLabel *label = new QLabel(&fenetre);
//label->setPixmap(QPixmap("Images/Cards/Base/village.jpg"));
//label->move(30, 20);
//    fenetre.show();

Window window;
window.show();
return app.exec();

} 
```

卡.h：

```
#ifndef CARD_H
#define CARD_H

#include <string>

class Card {
public:
    Card(int price, std::string info, std::string path, std::string id);
    int get_price();
    std::string get_info();
    std::string get_path();
    std::string get_id();
private:
    int price;
    std::string info;   /* Text on card     */
    std::string path;   /* Path to image    */
    std::string id;     /* Name/ID of card  */
};
#endif // CARD_H 
```

卡.cpp：

```
#include <card.h>

Card::Card(int a, std::string b, std::string c, std::string d){
    price = a;
    info  = b;
    path  = c;
    id    = d;
}

int Card::get_price(){
    return price;
}

std::string Card::get_info(){
    return info;
}

std::string Card::get_path(){
    return path;
}

std::string Card::get_id(){
    return id;
} 
```

甲板王国.h：

```
#ifndef DECK_KINGDOM_H
#define DECK_KINGDOM_H

#include <card.h>

class Deck_kingdom {
public:
    Deck_kingdom(int size_deck, Card* card_type);
    int get_count();
    Card* get_card();
private:
    Card* card;
    int count;
};
#endif // DECK_KINGDOM_H 
```

甲板王国.cpp：

```
#include <deck_kingdom.h>

Deck_kingdom::Deck_kingdom(int size_deck, Card *new_card){
    count = size_deck;
    card = new_card;
}

int Deck_kingdom::get_count(){
    return count;
}

Card* Deck_kingdom::get_card(){
    return card;
} 
```

gui_cards_kingdom.h：

```
#ifndef GUI_CARDS_KINGDOM_H
#define GUI_CARDS_KINGDOM_H

#include <QtGui>
#include <QApplication>
#include <QFrame>
#include <QWidget>
#include <QLabel>
#include <QVBoxLayout>
#include <QString>
#include <sstream>
#include <string>
#include <QPixmap>

#include <deck_kingdom.h>

#define CARD_HEIGHT 135
#define CARD_WIDTH  85

class Cards_kingdom : public QWidget {

public:
    Cards_kingdom(Deck_kingdom * input_deck);    /* Constructor  */

/*
 * Price and Counter are display in the same label, then are wrapped with Icon in a vertical layout, inside a frame.
 */
private:
    QLabel       *img;       /* Icon         */
    QLabel       *info;     /* Nb Cards left*/
    QVBoxLayout  *layout;    /* Layout       */
    QFrame       *pack;      /* Frame        */
    Deck_kingdom *deck;      /* Deck         */
};

#endif // GUI_CARDS_KINGDOM_H 
```

gui_cards_kingdom.cpp：

```
#include <gui_cards_kingdom.h>
#include <iostream>

Cards_kingdom :: Cards_kingdom(Deck_kingdom * input_deck) : QWidget(){

    deck = input_deck;

    //DEBUG
    std:: cout << deck->get_card()->get_price() << std::endl;

    /* Convert "price" and "count" into string */
    std::ostringstream price, count;
    price << deck->get_card()->get_price();
    count << deck->get_count();
    std::string text_label ("$"+price.str()+" ("+count.str()+")");

    //QString test = QString::fromStdString(deck->get_card()->get_path());

    //img->setPixmap(QPixmap(test).scaled(CARD_WIDTH,CARD_HEIGHT,Qt::IgnoreAspectRatio, Qt::FastTransformation ));
    QPixmap image  = QPixmap("Images/Cards/Base/village.png");
    img->setPixmap(image); // THE PROBLEM IS HERE

    img->setToolTip(QString::fromStdString(deck->get_card()->get_info()));
    info->setText(QString::fromStdString(text_label));
    layout = new QVBoxLayout();
    layout->addWidget(img);
    layout->addWidget(info);
    pack->setLayout(layout);
    pack->setParent(this);

} 
```

窗口.h：

```
#ifndef WINDOW_H
#define WINDOW_H

#include <QApplication>
#include <QWidget>
#include <QVBoxLayout>
#include <QHBoxLayout>
#include <QGridLayout>
#include <QFrame>
#include <gui_cards_kingdom.h>

class Window : public QWidget {
    public:
    Window();

    protected:
    QVBoxLayout *layout_1;
    QHBoxLayout *layout_2;
    QGridLayout *layout_3;
    QFrame *box_1;
    QFrame *box_2;
    QFrame *box_layout_2;
    QFrame *box_3;
    QFrame *box_4;
};
#endif // WINDOW_H 
```

窗口.cpp：

```
#include <window.h>
#include <iostream>

Window::Window(){
    /* Window       */

    setFixedSize(900,700);
    move(10,10);

    layout_1 = new QVBoxLayout(this);       /* Global Vertical Column      */
    layout_2 = new QHBoxLayout;                /* Include Kingdom and Log     */
    layout_3 = new QGridLayout;                /* Matrix display Kingdom cards*/

    /* Kingdom cards box       */
    box_1 = new QFrame(this);
    box_1->setFrameShape(QFrame::StyledPanel);
    box_1->setGeometry(30, 20, 300, 300);
    box_1->setToolTip("box_1");
    box_1->setLayout(layout_3);

    Card * test_card = new Card(2,"Village: +2 Action, +1 Buy", "Images/Cards/Base/village.jpg", "Village");
    Deck_kingdom * test_deck = new Deck_kingdom(10, test_card);

    std::cout << "Here 2a" << std::endl;
    Cards_kingdom * test_gui = new Cards_kingdom(test_deck);
    std::cout << "Here 2b" << std::endl;

    layout_3->addWidget(test_gui,0,0);

    std::cout << "Here 2" << std::endl;
    /* Log */
    box_2 = new QFrame(this);
    box_2->setFrameShape(QFrame::StyledPanel);
    box_2->setGeometry(340, 20, 300, 300);
    box_2->setToolTip("box 2");

    std::cout << "Here 2" << std::endl;

    layout_2->addWidget(box_1);
    layout_2->addWidget(box_2);

    box_layout_2 = new QFrame(this);
    box_layout_2->setLayout(layout_2);

    std::cout << "Here 2" << std::endl;
    /* Player Board*/
    box_3 = new QFrame(this);
    box_3->setFrameShape(QFrame::StyledPanel);
    box_3->setGeometry(30, 350, 650, 100);

    /* Chat room*/
    box_4 = new QFrame(this);
    box_4->setFrameShape(QFrame::StyledPanel);
    box_4->setGeometry(30, 460, 650, 50);

    layout_1->addWidget(box_layout_2);
    layout_1->addWidget(box_3);
    layout_1->addWidget(box_4);

    setLayout(layout_1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T05:36:14.800

我的 C++ 很烂，但我知道 PyQt4，所以我们开始...

您确定要在构造函数中初始化 QLabel 指针吗？

```
Cards_kingdom :: Cards_kingdom(Deck_kingdom * input_deck) : QWidget(){
    ...
    img = new QLabel;
    QPixmap image  = QPixmap("Images/Cards/Base/village.png");
    img->setPixmap(image); 
```

# eclipse - Ubuntu 上 Eclipse 窗格中的非常大的选项卡

> ID：11805784
> 
> 赞同：69
> 
> 时间：2012-08-04T03:56:01.590
> 
> 标签：eclipse, ubuntu, user-interface, gtk

*[我的问题与Ubuntu 上的 Eclipse 中的 Stack Overflow 问题 Gigantic Tabs](https://stackoverflow.com/questions/2743647)*非常相似。

我已经尝试过提出的解决方案，但它们似乎已经过时了。我找到[了一个](http://blog.sarathonline.com/2008/10/solved-eclipse-looks-good-in-ubuntu-now.html)可以很好地处理工具栏和菜单的解决方案，但不是一个可以减小窗格中不成比例的大选项卡（和标签）的大小和填充的解决方案（请参阅下面屏幕中的选项卡“包资源管理器”）。

我对自定义操作系统范围的 GTK 主题的方式感到满意，并且不想改变它。是否有快速修复来减少 Eclipse 中窗格的选项卡大小？

我在 Ubuntu 12.04 上使用 Eclipse for Mobile Developers (Juno)。我还要提一下，我真的很喜欢 Eclipse 在 Windows 7 中开箱即用的方式，因此类似的方式将是理想的。

以下是我正在使用的 Eclipse 特定 GTK 样式：

```
style "eclin" {
    GtkButton::default_border={1,1,1,1}
    GtkButton::default_outside_border={1,1,1,1}
    GtkButtonBox::child_min_width=0
    GtkButtonBox::child_min_heigth=0
    GtkButtonBox::child_internal_pad_x=0
    GtkButtonBox::child_internal_pad_y=0
    GtkMenu::vertical-padding=1
    GtkMenuBar::internal_padding=1
    GtkMenuItem::horizontal_padding=4
    GtkToolbar::internal-padding=1
    GtkToolbar::space-size=1
    GtkOptionMenu::indicator_size=0
    GtkOptionMenu::indicator_spacing=0
    GtkPaned::handle_size=4
    GtkRange::trough_border=0
    GtkRange::stepper_spacing=0
    GtkScale::value_spacing=0
    GtkScrolledWindow::scrollbar_spacing=0
    GtkExpander::expander_size=10
    GtkExpander::expander_spacing=0
    GtkTreeView::vertical-separator=0
    GtkTreeView::horizontal-separator=0
    GtkTreeView::expander-size=12
    GtkTreeView::fixed-height-mode=TRUE
    GtkWidget::focus_padding=0
    font_name="Liberation Sans,Sans Regular 8"
}

class "GtkWidget" style "eclin"
    style "eclin2" {
    xthickness=1
    ythickness=1
}

class "GtkButton" style "eclin2"
class "GtkToolbar" style "eclin2"
class "GtkPaned" style "eclin2" 
```

下面是我的 IDE 带有巨大标签的屏幕截图：

![标签太大的 Eclipse Juno IDE](../Images/a53a2c6828e3b1ee0e2e14774fec36ed.png)

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-08-06T18:17:31.640

您可以编辑 Eclipse 的 CSS 而不是弄乱 GTK 主题。

在您的 Eclipse 目录中找到该文件`plugins/org.eclipse.platform_4.2.*/css/e4_default_gtk.css`（其中有一个`*`，因为我猜该版本将来可能会更改或可能已经不同）。在这个文件中有一个 CSS 类：

```
.MPartStack {
    font-size: 11;
    swt-simple: false;
    swt-mru-visible: false;
} 
```

你有两种可能的解决方案：

1.  换成`font-size`更小的东西
2.  只需注释掉或`font-size`从此类中删除（对我来说效果很好）

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-11-23T23:23:59.760

可以通过编辑 CSS 在 Eclipse 4.2 中更改选项卡的样式。安装 E4 CSS 编辑器插件后，您可以直接在 Eclipse Preferences 窗口中更改样式。

转到菜单帮助 > 安装新软件，然后`E4 CSS editor (Incubation)`使用 Eclipse 4 更新站点安装插件（添加此链接：http: [//download.eclipse.org/e4/updates/0.12](http://download.eclipse.org/e4/updates/0.12)）。

重新启动后，转到窗口>首选项，常规>外观，现在您可以在此处为任何选定的主题编辑样式。

我将这种样式用于标签：

```
.MPartStack {
  font-size: 9;
  font-family: Liberation Sans;
  swt-tab-renderer: null;
  swt-tab-height: 22px;
  swt-selected-tabs-background: #FFFFFF #ECE9D8 100%;
  swt-simple: false;
  swt-mru-visible: false;
} 
```

您可以使用该选项指定标签高度`swt-tab-height`。它的值设置标签高度忽略字体大小。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-11-22T13:06:54.667

我还想特别减少水平空间以适应更多选项卡，因为 Eclipse 缺少多行选项卡。

这些说明适用于任何平台（不限于例如 Ubuntu/GTK）。

我所做的是：

*   减小了字体大小
*   将字体更改为水平紧凑的字体
*   移除了 X（关闭标签）按钮

...在我的系统上产生以下结果（Win 7）：

![带有修改的选项卡的屏幕截图](../Images/cf652c3f39366b04f5309cd84d0e9695.png)

...这就是它的完成方式：

1.  检查您正在使用的 CSS 布局：首选项->常规->外观->检查“主题：”列表框的值

2.  在 中打开对应的文件`<eclipse folder>\plugins\org.eclipse.platform_<your version>\css`，例如`e4_default_win7.css`

3.  修改`.MPartStack`条目以设置字体大小和字体，例如：

    ```
    .MPartStack {
        font-size: 8;
        font-family: 'Arial Narrow';
        swt-simple: true;
        swt-mru-visible: false;
    } 
    ```

4.  添加以下条目以删除 X（关闭图标）：

    ```
    CTabItem {
        swt-show-close: false !important;   
    } 
    ```

而已！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-08-26T14:46:03.637

Eclipse 现在（4.5 Mars）在 Linux 上默认使用 GTK3。对于 4.6，似乎已经合并了一个修复程序。

更改`SWT_GTK3`环境变量适用于 Eclipse Mars：

```
$ export SWT_GTK3=0 
```

或将该变量设置为与运行的 eclipse 内联

```
$ SWT_GTK3=0 /path/to/eclipse/eclipse 
```

要杀死它，只需将其作为 eclipse.sh 放在根目录中：

```
#!/bin/bash
SWT_GTK3=0 exec env "${0%.sh}" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-25T05:08:23.637

[您可以从https://github.com/jeeeyul/eclipse-themes](https://github.com/jeeeyul/eclipse-themes)尝试主题。

安装此主题后，通过在 Window > Preferences > General > Appearence > Jeeeyul 的主题中选择主题来应用它。

并且要解决大标签问题，请参考[https://github.com/jeeeyul/eclipse-themes/wiki/Linux-Huge-Toolbar-Problem](https://github.com/jeeeyul/eclipse-themes/wiki/Linux-Huge-Toolbar-Problem)。

这很容易也很漂亮。好好享受！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-20T12:55:57.533

另一种方法是选择：

```
System settings > Universal access > Text size as small. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-04T19:30:24.963

您可以在此处编辑有关标签大小的所有小细节：

[![图片](../Images/eb9ece83a32ef87e3c8c1f9263183aae.png)](https://i.stack.imgur.com/7kqkw.png)

# java - 在休眠相等性中处理空值

> ID：11805787
> 
> 赞同：0
> 
> 时间：2012-08-04T03:56:34.850
> 
> 标签：java, mysql, sql, hibernate

我正在现有应用程序中实现 Hibernate，并且正在将查询转换为 HQL 语法。我有一个在连接子句中使用 <=> 相等运算符的查询（针对 MySQL）。hibernate 中是否有等效的内置机制以相同的方式处理 null 值，还是我必须自己滚动？

更新：是否可以进行 HQL 查询，但连接逻辑部分是使用本机 SQL 指定的？例如，使用此查询：

```
String query2  = " from Alert a ";
query2 += " left join a.alertInitialFactData fd with a.calyear=fd.calyear ";
query2 += " where a.alertTask.taskId=10 ";
query2 += " order by a.alertTimeEvent.timeEventId"; 
```

是否可以仅将本机 sql 用于“with a.calyear=fd.calyear”部分？还是我必须将整个查询转换为本机 sql？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T04:46:44.560

好吧，无论我们在项目中做了什么……我们都自己处理了……我不认为有一个内置的机制来处理 HQL 中的空值。

# perl - 如何使用 Perl 的 Net::Pcap::Reassemble 重新组装 IP 片段？

> ID：11805788
> 
> 赞同：3
> 
> 时间：2012-08-04T03:56:48.680
> 
> 标签：perl, pcap, hexdump

我是 Perl 的新手，并试图使用[Net::Pcap::Reassemble](http://search.cpan.org/perldoc?Net%3a%3aPcap%3a%3aReassemble) - IP 片段重组[Net::Pcap](http://search.cpan.org/perldoc?Net%3a%3aPcap)。我正在尝试重新组装 TCP 数据包并“绑定”感兴趣的数据包流，并为感兴趣的数据打印“绑定”十六进制输出。这是下面的代码和我得到的打印输出。打印输出是两个单独的十六进制转储（用“Hex Payload:”字符串表示）。很明显我没有正确调用 Net::Pcap::Reassemble 模块。我试图实现的期望最终输出如下，取自打印输出。有人可以指出我使用这个模块来实现我想要的输出的正确方向吗？谢谢你。

```
my $user_data;
my $header;
my $packet;   
my $err ='';
my $pcap = Net::Pcap::open_offline("./pcap", \$err) or die "can't open ./pcap...$err\n";
Net::Pcap::loop($pcap, -1, \&process_pkt, '');
Net::Pcap::Reassemble::loop($pcap, -1, \&process_pkt, '');
Net::Pcap::close($pcap);

my $ip;
my $tcp;
my $payload;
sub process_pkt  
{
my ($user_data,$header, $packet) = @_;
$ip = NetPacket::IP->decode(eth_strip($packet));
$tcp = NetPacket::TCP->decode($ip->{data});
$payload = $tcp->{data};

my $hexPayload = hexdump(data => $payload, start_position => 0) if length $payload;
print "Hex Payload:". $hexPayload;

} 
```

输出（这是我目前得到的，但想将它连接在一起）：

```
Hex Payload:  0x0000 : 47 45 54 20 2F 6D 61 63 2F 5F 62 61 73 65 5F 76 : GET./mac/_base_v
0x0010 : 31 2F 73 63 72 69 70 74 2F 6A 71 75 65 72 79 2D : 1/script/jquery-
0x0020 : 31 2E 36 2E 31 2E 6A 73 20 48 54 54 50 2F 31 2E : 1.6.1.js.HTTP/1.
0x0030 : 31 0D 0A 48 6F 73 74 3A 20 77 77 77 2E 6D 69 63 : 1..Host:.www.mic
0x0040 : 72 6F 73 6F 66 74 2E 63 6F 6D 0D 0A 55 73 65 72 : rosoft.com..User
0x0050 : 2D 41 67 65 6E 74 3A 20 4D 6F 7A 69 6C 6C 61 2F : -Agent:.Mozilla/
0x0060 : 35 2E 30 20 28 4D 61 63 69 6E 74 6F 73 68 3B 20 : 5.0.(Macintosh;.
0x0070 : 49 6E 74 65 6C 20 4D 61 63 20 4F 53 20 58 20 31 : Intel.Mac.OS.X.1
0x0080 : 30 2E 36 3B 20 72 76 3A 31 33 2E 30 29 20 47 65 : 0.6;.rv:13.0).Ge
0x0090 : 63 6B 6F 2F 32 30 31 30 30 31 30 31 20 46 69 72 : cko/20100101.Fir
0x00A0 : 65 66 6F 78 2F 31 33 2E 30 0D 0A 41 63 63 65 70 : efox/13.0..Accep
0x00B0 : 74 3A 20 2A 2F 2A 0D 0A 41 63 63 65 70 74 2D 4C : t:.*/*..Accept-L
0x00C0 : 61 6E 67 75 61 67 65 3A 20 65 6E 2D 75 73 2C 65 : anguage:.en-us,e
0x00D0 : 6E 3B 71 3D 30 2E 35 0D 0A 41 63 63 65 70 74 2D : n;q=0.5..Accept-
0x00E0 : 45 6E 63 6F 64 69 6E 67 3A 20 67 7A 69 70 2C 20 : Encoding:.gzip,.
0x00F0 : 64 65 66 6C 61 74 65 0D 0A 52 65 66 65 72 65 72 : deflate..Referer
0x0100 : 3A 20 68 74 74 70 3A 2F 2F 77 77 77 2E 6D 69 63 : :.http://www.mic
0x0110 : 72 6F 73 6F 66 74 2E 63 6F 6D 2F 6D 61 63 2F 72 : rosoft.com/mac/r
0x0120 : 65 6D 6F 74 65 2D 64 65 73 6B 74 6F 70 2D 63 6C : emote-desktop-cl
0x0130 : 69 65 6E 74 0D 0A 44 4E 54 3A 20 31 0D 0A 43 6F : ient..DNT:.1..Co
0x0140 : 6E 6E 65 63 74 69 6F 6E 3A 20 6B 65 65 70 2D 61 : nnection:.keep-a
0x0150 : 6C 69 76 65 0D 0A 0D 0A 00 00 00 00 00 00 00 00 : live............
Hex Payload:  0x0000 : 48 54 54 50 2F 31 2E 31 20 32 30 30 20 4F 4B 0D : HTTP/1.1.200.OK.
0x0010 : 0A 43 61 63 68 65 2D 43 6F 6E 74 72 6F 6C 3A 20 : .Cache-Control:.
0x0020 : 6D 61 78 2D 61 67 65 3D 39 30 30 0D 0A 43 6F 6E : max-age=900..Con
0x0030 : 74 65 6E 74 2D 54 79 70 65 3A 20 61 70 70 6C 69 : tent-Type:.appli
0x0040 : 63 61 74 69 6F 6E 2F 78 2D 6A 61 76 61 73 63 72 : cation/x-javascr
0x0050 : 69 70 74 0D 0A 43 6F 6E 74 65 6E 74 2D 45 6E 63 : ipt..Content-Enc
0x0060 : 6F 64 69 6E 67 3A 20 67 7A 69 70 0D 0A 4C 61 73 : oding:.gzip..Las
0x0070 : 74 2D 4D 6F 64 69 66 69 65 64 3A 20 57 65 64 2C : t-Modified:.Wed,
0x0080 : 20 30 38 20 4A 75 6E 20 32 30 31 31 20 31 38 3A : .08.Jun.2011.18:
0x0090 : 34 35 3A 34 39 20 47 4D 54 0D 0A 41 63 63 65 70 : 45:49.GMT..Accep 
```

所需的输出（以上捆绑/连接在一起）：

```
Hex Payload:  0x0000 : 47 45 54 20 2F 6D 61 63 2F 5F 62 61 73 65 5F 76 : GET./mac/_base_v
0x0010 : 31 2F 73 63 72 69 70 74 2F 6A 71 75 65 72 79 2D : 1/script/jquery-
0x0020 : 31 2E 36 2E 31 2E 6A 73 20 48 54 54 50 2F 31 2E : 1.6.1.js.HTTP/1.
0x0030 : 31 0D 0A 48 6F 73 74 3A 20 77 77 77 2E 6D 69 63 : 1..Host:.www.mic
0x0040 : 72 6F 73 6F 66 74 2E 63 6F 6D 0D 0A 55 73 65 72 : rosoft.com..User
0x0050 : 2D 41 67 65 6E 74 3A 20 4D 6F 7A 69 6C 6C 61 2F : -Agent:.Mozilla/
0x0060 : 35 2E 30 20 28 4D 61 63 69 6E 74 6F 73 68 3B 20 : 5.0.(Macintosh;.
0x0070 : 49 6E 74 65 6C 20 4D 61 63 20 4F 53 20 58 20 31 : Intel.Mac.OS.X.1
0x0080 : 30 2E 36 3B 20 72 76 3A 31 33 2E 30 29 20 47 65 : 0.6;.rv:13.0).Ge
0x0090 : 63 6B 6F 2F 32 30 31 30 30 31 30 31 20 46 69 72 : cko/20100101.Fir
0x00A0 : 65 66 6F 78 2F 31 33 2E 30 0D 0A 41 63 63 65 70 : efox/13.0..Accep
0x00B0 : 74 3A 20 2A 2F 2A 0D 0A 41 63 63 65 70 74 2D 4C : t:.*/*..Accept-L
0x00C0 : 61 6E 67 75 61 67 65 3A 20 65 6E 2D 75 73 2C 65 : anguage:.en-us,e
0x00D0 : 6E 3B 71 3D 30 2E 35 0D 0A 41 63 63 65 70 74 2D : n;q=0.5..Accept-
0x00E0 : 45 6E 63 6F 64 69 6E 67 3A 20 67 7A 69 70 2C 20 : Encoding:.gzip,.
0x00F0 : 64 65 66 6C 61 74 65 0D 0A 52 65 66 65 72 65 72 : deflate..Referer
0x0100 : 3A 20 68 74 74 70 3A 2F 2F 77 77 77 2E 6D 69 63 : :.http://www.mic
0x0110 : 72 6F 73 6F 66 74 2E 63 6F 6D 2F 6D 61 63 2F 72 : rosoft.com/mac/r
0x0120 : 65 6D 6F 74 65 2D 64 65 73 6B 74 6F 70 2D 63 6C : emote-desktop-cl
0x0130 : 69 65 6E 74 0D 0A 44 4E 54 3A 20 31 0D 0A 43 6F : ient..DNT:.1..Co
0x0140 : 6E 6E 65 63 74 69 6F 6E 3A 20 6B 65 65 70 2D 61 : nnection:.keep-a
0x0150 : 6C 69 76 65 0D 0A 0D 0A 00 00 00 00 00 00 00 00 : live............
0x0160 : 48 54 54 50 2F 31 2E 31 20 32 30 30 20 4F 4B 0D : HTTP/1.1.200.OK.
0x0170 : 0A 43 61 63 68 65 2D 43 6F 6E 74 72 6F 6C 3A 20 : .Cache-Control:.
0x0180 : 6D 61 78 2D 61 67 65 3D 39 30 30 0D 0A 43 6F 6E : max-age=900..Con
0x0190 : 74 65 6E 74 2D 54 79 70 65 3A 20 61 70 70 6C 69 : tent-Type:.appli
0x0200 : 63 61 74 69 6F 6E 2F 78 2D 6A 61 76 61 73 63 72 : cation/x-javascr
0x0210 : 69 70 74 0D 0A 43 6F 6E 74 65 6E 74 2D 45 6E 63 : ipt..Content-Enc
0x0220 : 6F 64 69 6E 67 3A 20 67 7A 69 70 0D 0A 4C 61 73 : oding:.gzip..Las
0x0230 : 74 2D 4D 6F 64 69 66 69 65 64 3A 20 57 65 64 2C : t-Modified:.Wed,
0x0240 : 20 30 38 20 4A 75 6E 20 32 30 31 31 20 31 38 3A : .08.Jun.2011.18:
0x0250 : 34 35 3A 34 39 20 47 4D 54 0D 0A 41 63 63 65 70 : 45:49.GMT..Accep 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:59:10.940

您正在尝试重组网络会话，而不是碎片化的网络数据包。您应该使用模块“Net::Analysis”。通过您的一些努力，它可以重新组装一个完整的网络会话。你很快就会学会讨厌管道衬里。

# php - 使用 jquery 加载测验项目。为什么加载时我会丢失选择下一个项目的按钮？

> ID：11805789
> 
> 赞同：1
> 
> 时间：2012-08-04T03:56:57.077
> 
> 标签：php, jquery

我正在使用 jquery 将问题内容动态加载到 div 中。这是我的第一次尝试，当我单击“获取问题”按钮时它会加载。但是，当问题加载时，“获取问题”按钮会消失。我希望按钮保留并最终将其用作下一个问题按钮。

这是jquery代码：

```
<script type="text/javascript" src="../jquery/jquery/jquery-1.7.2.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$(
$("#GetQuest").click(function(){
    $.post("CCRN/question.php", {num : parseInt($("input#q_num").val()) + 1}, function (data) {
        $("div#question").html(data);
        $("input#q_num").val() =  parseInt($("input#q_num").val()) + 1;
    });
});
});
</script>

<input type="button" id="GetQuest" value="Get Question" />
<input type="hidden" id="q_num" value=1 />
<p>Question: <div id="question"> </div></p>
<p>Answer: <div id="answer"> </div></p> 
```

这是创建代码的问题（尽管问题加载并显示正常）

```
<table width="100%"><?php
$i = $q_num;
if ($row["image"] <> NULL) { ?>
 <tr align="center">
    <td colspan="2" align="center">
        <img src="<?php $pic = $row["image"]; echo $base_path . $pic; ?>" />
    </td>
 </tr><br />
<tr>
<td colspan="3">&nbsp;</td>
</tr>
<?php
 } ?>
<tr id="Qu<?php echo $i; ?>" class="Qu<?php echo $i; ?>">
<td width="7%"><?php echo $i.") " ?></td>
<td width="93%" ><?php echo $row["question"]; ?></td>
</tr>

<?php 
for ($j=1;$j<=6;$j++) { 
$bracket= "answer_" . $j;
if ($row[$bracket] !== NULL) {?>
    <tr>
        <td align="center" class="row<?php echo $j % 2; ?>" width="7%">
            <input type="radio" <?php echo ($_POST["Q".$i] == $j) ? 'checked="checked"' : '' ; ?> name="Q<?php echo $i; ?>" value="<?php echo $j; ?>" /><?php echo chr(64 + $j); ?>
        </td>
        <td class="row<?php echo $j % 2; ?>" width="93%">
            <?php echo $row["answer_".$j]; ?>
        </td>
    </tr> <?php
}
} ?>
</table><hr size="2" width="95%"> 
```

我不明白为什么加载问题内容时按钮会消失。我敢肯定这是一件令人尴尬的简单事情，这就是为什么我要来到一个安全的避风港以尽量减少嘲笑！:)

现场测试网站[http://www.GrowingSpeakers.com/index2.php](http://www.GrowingSpeakers.com/index2.php)看到消失的按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T04:08:09.283

您之前使用的是 id 为“question”的 div。

```
<div class="TabbedPanelsContent" id="question"> 
```

和

```
<p>Question: <div id="question"> </div></p> 
```

即使 id 来自不同的文件也没关系，只要它们显示在同一个 DOM 树中 - 它们将被视为一个并且相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T04:03:33.700

您有 2 个带有 ID 问题的 div，并且 javascript 将替换您运行时找到的第一个的内容：

```
 $("div#question").html(data); 
```

如果您更改第一个的 id，它应该可以正常工作。

# c - CPU 特性和编译器符号

> ID：11805791
> 
> 赞同：2
> 
> 时间：2012-08-04T03:57:08.197
> 
> 标签：c, gcc, compiler-construction, cpu, symbols

我有一个关于如何实际设置编译器集符号，特别是 CPU 功能标志（如 SSE、AES、AVX）的问题。例如，如果我用 -mavx 调用 gcc，*无论*将要在其上构建代码的系统是否真正支持 AVX 指令，或者它是否之前检查过，`__AVX__`符号集是否？

 *我之所以问，是因为我需要根据 CPU 功能构建特定的代码路径，并希望将其自动化，以便在基于构建系统的编译时确定正确的路径，而不是手动启用所需的功能。但是由于我拥有的唯一 CPU 基本上支持所有功能，我无法测试我的上述假设（我知道第一世界的问题）

将会*有很多*代码，因此简单地保留所有内容并在运行时进行分支是不可接受的 - 并且假设我的库将在用于给定系统之前构建。

我的意思是，在最坏的情况下，我可以通过将 gcc 参数包装在可识别 cpuid 的脚本中来强制执行此行为，但如果 gcc 自动执行此操作，那就更可取了。那么有没有人知道它是否有效？

* * *

我最感兴趣的是 gcc 对此的看法，但我也很想知道其他 C 编译器的行为方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T04:59:38.590

如果您传递`-mavx`标志，`__AVX__`将*始终*为生成的编译设置（并且生成的代码可能无法在非 AVX 机器上运行）。

如果传递`-march=native`标志，gcc 将启用构建机器支持的指令集，因此`__AVX__`只有在构建机器支持时才会设置。*

# mysql - 表 '/tmp/#sql_3c51_0.MYI' 的密钥文件不正确；尝试修复它

> ID：11805793
> 
> 赞同：30
> 
> 时间：2012-08-04T03:58:43.883
> 
> 标签：mysql

我写了一个查询，它在我的本地服务器上正确运行，它的数据更少，

但是当我在生产服务器上运行它时会出错 - （这有更多大约 6GB 的数据）

```
Incorrect key file for table '/tmp/#sql_3c51_0.MYI'; try to repair it 
```

这是我的查询

```
SELECT   
    `j25_virtuemart_products`.`virtuemart_product_id`,
    `product_name`, 
    `product_unit`,
    `product_s_desc`,
    `file_url_thumb`,
    `virtuemart_custom_id`, 
    `custom_value`   
    FROM 
    `j25_virtuemart_product_customfields`,
    `j25_virtuemart_products`,
    `j25_virtuemart_products_en_gb`,
    `j25_virtuemart_product_medias`,
    `j25_virtuemart_medias`     
    WHERE
    (
    `j25_virtuemart_products`.`virtuemart_product_id`=`j25_virtuemart_products_en_gb`.`virtuemart_product_id`
    AND 
    `j25_virtuemart_products`.`virtuemart_product_id`=`j25_virtuemart_product_customfields`.`virtuemart_product_id`)

AND

    `j25_virtuemart_products`.`virtuemart_product_id`=`j25_virtuemart_product_medias`.`virtuemart_product_id`
    AND 
    `j25_virtuemart_product_medias`.`virtuemart_media_id`=`j25_virtuemart_medias`.`virtuemart_media_id`

    GROUP BY `j25_virtuemart_products`.`virtuemart_product_id`

    LIMIT 0, 1000; 
```

任何人都知道如何从该错误中恢复 - 比如 otimize 这个查询或任何其他方式谢谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-10-23T20:44:39.973

该问题是由 /tmp 文件夹中的磁盘空间不足引起的。/tmp 卷用于需要创建临时表的查询。即使查询仅使用带有 InnoDB 的表，这些临时表也是 MyISAM 格式。

以下是一些解决方案：

*   优化查询，使其不会创建临时表（重写查询，将其拆分为多个查询，或添加适当的索引，使用[pt-query-digest](https://www.percona.com/doc/percona-toolkit/LATEST/pt-query-digest.html)和分析执行计划`EXPLAIN <query>`）请参阅[Percona 关于临时表的文章](https://www.percona.com/blog/2019/07/17/mysql-disk-space-exhaustion-for-implicit-temporary-tables/)。
*   优化 MySQL，使其不会创建临时表（sort_buffer_size、join_buffer_size）。请参阅：[https ://dba.stackexchange.com/questions/53201/mysql-creates-temporary-tables-on-disk-how-do-i-stop-it](https://dba.stackexchange.com/questions/53201/mysql-creates-temporary-tables-on-disk-how-do-i-stop-it)
*   使桌子更小。如果可能，删除不需要的行
*   使用`SELECT table1.col1, table2,col1 ...`而不是`select *`仅使用查询中需要的列来生成较小的临时表
*   使用占用更少空间的数据类型
*   在 /tmp 文件夹所在的卷上添加更多磁盘空间
*   `TMPDIR`通过在 mysqld 启动之前设置环境变量，通过 mysql 更改临时文件夹用户。指向`TMPDIR`具有更多可用空间的磁盘卷上的文件夹。您还可以在 mysqld 服务的命令行中或命令行中使用`tmpdir`选项。请参阅：[B.5.3.5 MySQL 存储临时文件的位置](http://dev.mysql.com/doc/refman/5.7/en/temporary-files.html)`/etc/my.cnf``--tmpdir`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-04T04:05:50.450

执行这些步骤

停止mysql服务

将 .myi 文件重命名为 x.old

启动mysql

[修复查询中的所有表](http://dev.mysql.com/doc/refman/5.1/en/repair-table.html)，MySQL将重建密钥文件

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-08T11:31:00.933

上面有这么多答案，问题所有者已经按照@Hawili的建议得到了解决方案，并且自从提出这个问题以来已经过去了很长时间。但由于这是一个常见问题，我想分享我的经验，以便如果有人由于不同的原因再次遇到这个问题，那么可以从这里得到解决方案。

情况1：

最常见的原因是查询获取的数据大于 /tmp 分区的大小。每当您在查询期间遇到此问题时，请查看您的 /tmp 文件夹大小。临时表是自动创建和删除的，如果在此查询期间此处的可用空间降至 0，则意味着您需要优化查询或需要增加 /tmp 的分区大小。

注意：有时它不是单个查询：如果大量查询的组合在同一台服务器上同时执行此操作，那么您可能会遇到此问题，通常单个查询将在没有任何错误的情况下执行。

案例二：

如果您需要修复损坏的 myisam 表，目录路径将与错误消息中的 /tmp 不同。

案例3：（罕见情况）

有时由于不正确的表连接，您可能会收到此错误。这实际上是一个语法错误，但 mysql 可以抛出这个错误。您可以在下面的链接中查看详细信息-

[表 '/tmp/#sql_18b4_0.MYI' 的密钥文件不正确；尝试修复它](https://stackoverflow.com/questions/31284608/incorrect-key-file-for-table-tmp-sql-18b4-0-myi-try-to-repair-it)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-04T04:00:00.357

通过运行检查 tmp 目录的位置`df -h`。确保有足够的空间来增长临时文件，它可能是几个演出。

编辑：如果您有足够的可用空间，我会检查以确保您索引或包含在 WHERE 子句中的每一列都被索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-09T11:12:05.460

检查您的数据库服务器上是否有足够的磁盘空间。如果磁盘已满，则会显示此错误。现在，您应该查看哪些文件夹取决于您的设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-23T14:15:33.387

我使用了以下命令，错误消失了：

`mysqlcheck --all-databases -r #repair`

我从[cpanel 论坛得到了这个解决方案](https://forums.cpanel.net/threads/repair-all-database-in-mysql.69241/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-15T18:43:58.960

对我来说同样的问题

运行`df -h`看看你的分区 /tmp 是否有足够的空间

在我的情况下 /tmp 是一个溢出文件系统：

`overflow 1,0M 24K 1000K 3% /tmp`

发生了什么：

我在这里遇到了一些问题，我的分区`/`已满，然后 Debian 发行版`/tmp`在 RAM 内存中创建了一个新分区，以暂时使用。这个`/tmp`1MB 的分区不足以供系统使用。

解决方案：运行以下命令删除这个临时创建的分区`/tmp`

`sudo umount -l /tmp`

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-04-11T09:50:25.870

`/etc/init.d/mysqld restart`在终端中使用此命令行重新启动 MySQL 服务。

# css - CSS如何将div中的div与兄弟div垂直对齐（内联块）

> ID：11805795
> 
> 赞同：1
> 
> 时间：2012-08-04T03:59:01.040
> 
> 标签：css, vertical-alignment

[http://jsfiddle.net/LdTpg/3/](http://jsfiddle.net/LdTpg/3/)

```
<div class="a">
    <div class="b">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec justo nunc, vehicula nec auctor a, lacinia dapibus tortor. Praesent id mi id dui sodales laoreet. Maecenas ut aliquet urna. Donec porttitor turpis eu velit viverra in tincidunt nisi viverra. Curabitur mi ligula, facilisis ut cursus vel, fermentum sit amet nibh. Ut in nisl cursus quam molestie scelerisque non a nulla. Morbi eu diam nibh, eu dictum orci. Nunc est neque, dignissim ut fermentum id, sagittis eget urna.
    </div>
    <div class="c">
        <div class="d" style="background: grey; height: 100%; width: 100%;"></div>
        <div class="e">Vertical Align This</div>
    </div>
</div> 
```

款式：

```
​.a {
    border:1px solid red;
    overflow:hidden;
}
.a div {
    display:inline-block;
}
.b {
    width:200px;
    border:1px solid blue;
    float:left;
    position:absolute;
}
.c {
    width: 100%; 
    margin-left: 200px;        
    position:relative;
}
.d {
    position:absolute;
    top:0;
    left:0;
}
.e {
    position: relative;
} 
```

所以基本上

*   我知道左 div（容器 B）的宽度，但不知道它的高度
*   右边div（容器C）的宽度要占用剩余空间
*   我不知道外部 div 的高度或宽度（容器 A）
*   右侧 div（容器 C）中有一个元素（容器 D）必须放在另一个元素（容器 E）下
*   容器 D 应与容器 C 的尺寸相同
*   容器 E 应具有水平和垂直居中的文本（相对于容器 C）

我尝试了各种 CSS 设置，包括弄乱行高、显示（内联块与块）、高度/宽度为 %、浮动......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T12:53:06.393

目前尚不清楚 C 的高度应该在您想要什么的信息中（您没有解决这个问题）。

## 如果 C 是任意的`height`

可以在配置[**此小提琴**](http://jsfiddle.net/LdTpg/26/)时完成（在 IE7+ 中工作）。

```
.a {
    border:1px solid red;
    overflow:hidden;
}
.a div {
    display:inline-block;
}
.b {
    width:200px;
    border:1px solid blue;
    float:left;
}
.c {
    overflow: hidden;       
    position:relative;
    height: 100px; /* arbitrary height */
    line-height: 100px; /* match arbitrary height */
    text-align: center;
}

.a .c {display: block;}

.d {
    position:absolute;
    top:0;
    left:0;
}
.e {
    position: relative;
    vertical-align: middle;
} 
```

## 如果 C 应该匹配 B 的灵活高度

可以在配置[**此小提琴**](http://jsfiddle.net/LdTpg/32/)时完成（在 IE8+ 中工作；**注意**：与 Firefox 和 IE 相比，Chrome 在计算`absolute`D 元素位置的方式上显示出细微的差异）。此解决方案删除`100%`了​​ D`width`和`height`.

```
.a {
    border:1px solid red;
    overflow:hidden;
    display: table;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    min-width: 100%;
    position: relative;
}
.a div {
    display: table-cell;
}
.b {
    width:200px;
    border:1px solid blue;
}
.c {     
    text-align: center;
    vertical-align: middle;
}

.d {
    position:absolute;
    top:1px;
    right: 1px;
    bottom: 1px;
    left: 203px;
}

.a .e {
    display: inline-block;
}
.e {
    position: relative;
} 
```

# ruby-on-rails-3 - 识别错误回形针和 Imagemagick

> ID：11805797
> 
> 赞同：0
> 
> 时间：2012-08-04T03:59:29.717
> 
> 标签：ruby-on-rails-3, imagemagick, paperclip

我最近升级到 osx 10.8 (Mtn Lion)，现在我遇到了 Imagemagick 问题。尝试上传文件时出现以下错误：

```
Command :: identify -format %wx%h '/var/folders/nd/1cw0mqzj0nb3jv8psz_ht9cr0000gn/T/2011Spring20120803-530-2nr1jn.jpg[0]'
[paperclip] An error was received while processing: #<Paperclip::Errors::NotIdentifiedByImageMagickError: /var/folders/nd/1cw0mqzj0nb3jv8psz_ht9cr0000gn/T/2011Spring20120803-530-2nr1jn.jpg is not recognized by the 'identify' command.>
Command :: identify -format %wx%h '/var/folders/nd/1cw0mqzj0nb3jv8psz_ht9cr0000gn/T/2011Spring20120803-530-2nr1jn.jpg[0]'
[paperclip] An error was received while processing: #<Paperclip::Errors::NotIdentifiedByImageMagickError: /var/folders/nd/1cw0mqzj0nb3jv8psz_ht9cr0000gn/T/2011Spring20120803-530-2nr1jn.jpg is not recognized by the 'identify' command.> 
```

我卸载/重新安装了自制软件和 imagemagick。我什至添加了 rmagick gem（我以前不需要），但仍然出现上述错误。

```
brew install imagemagick
Error: imagemagick-6.7.7-6 already installed 
```

这是 brew doctor 输出：

```
brew doctor
Warning: Setting DYLD_LIBRARY_PATH can break dynamic linking.
You should probably unset it.
Warning: You have uncommitted modifications to Homebrew's core.
Unless you know what you are doing, you should run:
  cd /usr/local && git reset --hard
Warning: /usr/bin occurs before /usr/local/bin
This means that system-provided programs will be used instead of those
provided by Homebrew. The following tools exist at both paths:

xml2-config
xmlcatalog
xmllint
xslt-config
xsltproc

Consider amending your PATH so that /usr/local/bin
occurs before /usr/bin in your PATH. 
```

我什至将以下内容添加到我的 config/environments/development.rb 文件中

```
 Paperclip.options[:command_path] = "/usr/local/bin" 
```

我再次卸载了 Imagemagick 并重新安装了它。现在我收到以下链接错误。

```
==> Installing imagemagick dependency: jpeg
dyld: DYLD_ environment variables being ignored because main executable (/usr/bin/sudo) is setuid or setgid
==> Downloading http://www.ijg.org/files/jpegsrc.v8d.tar.gz
Already downloaded: /Library/Caches/Homebrew/jpeg-8d.tar.gz
==> ./configure --prefix=/usr/local/Cellar/jpeg/8d
==> make install
Error: The linking step did not complete successfully
The formula built, but is not symlinked into /usr/local
You can try again using `brew link jpeg'
==> Summary
/usr/local/Cellar/jpeg/8d: 18 files, 1.3M, built in 16 seconds
==> Installing imagemagick dependency: libtiff
dyld: DYLD_ environment variables being ignored because main executable (/usr/bin/sudo) is setuid or setgid
==> Downloading http://download.osgeo.org/libtiff/tiff-4.0.2.tar.gz
Already downloaded: /Library/Caches/Homebrew/libtiff-4.0.2.tar.gz
==> ./configure --prefix=/usr/local/Cellar/libtiff/4.0.2
==> make install
Error: The linking step did not complete successfully
The formula built, but is not symlinked into /usr/local
You can try again using `brew link libtiff'
==> Summary
/usr/local/Cellar/libtiff/4.0.2: 241 files, 3.6M, built in 24 seconds
Error: You must `brew link jpeg' before little-cms can be installed 
```

当我输入 brew link jpeg

```
Error: No such file or directory - /usr/local/Cellar/jpeg/8c 
```

当我输入 brew link libtiff

```
Error: No such file or directory - /usr/local/Cellar/libtiff/3.9.5 
```

所以总而言之，链接正在寻找旧版本的 jpeg（8c 而不是 8d）和 libtiff（3.9.5 而不是 4.0.2）

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T06:07:55.013

我终于能够用 2 个命令修复它。简单的符号链接，看起来很hackish...

JPEG修复

```
cd /usr/local/Cellar/jpeg

ln -s 8d 8c 
```

libtiff 修复

```
/usr/local/Cellar/libtiff

ln -s 4.0.2 3.9.5 
```

# iphone - 修改 cellForRowAtIndexPath 外部的静态单元格而不创建新单元格

> ID：11805798
> 
> 赞同：0
> 
> 时间：2012-08-04T03:59:47.960
> 
> 标签：iphone, ios, uitableview

所以我知道它通常不赞成修改 cellForRowAtIndexPath 之外的单元格，但这是我所拥有的：

我有一个用作问题索引的静态表（1-33）。每行都有一个问题和一个详细披露指标。所有这些都是在故事板上手动输入的。

我有一个文件，其中列出了每个问题和一些属性，例如问题是否已被回答。
当此屏幕加载（viewDidAppear）时，我想检查这些问题中的每一个是否已加载，如果已加载，请将详细信息指示器切换为复选标记。

现在这适用于前 5 个单元格。如果我去一个问题然后回来，那么会检查更多的单元格（即使问题没有得到回答）。这是未定义的行为，因为我在 cellForRowAtIndexPath 之外访问它吗？

这是我用来访问和更改单元格的代码：

```
-(void) viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if (question1Answered)
    { 
        UITableViewCell *cell1 = [self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:3]];
        [cell1 setAccessoryType:UITableViewCellAccessoryCheckmark];
    }
} 
```

同样，它确实适用于前 5 个元素，然后无论我做什么，其余的都不会改变。然后，如果我去一个问题并返回它会显示更多选择它。奇怪的行为...

**编辑：**我刚刚注意到上面的代码有效，但它只更新当前屏幕上的单元格。因此，如果我向下滚动，离开并返回所有可见单元格都会有复选标记。有没有办法强制刷新所有单元格，即使它们不可见？

感谢您的任何帮助...

-大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:51:55.727

这类似于我几天前回答的另一个问题。请参阅[stackoverflow.com/a/11770387/1479411](https://stackoverflow.com/a/11770387/1479411)

使用委托方法。从另一个视图控制器返回后，将任何修改单元格内容和 [self.tableView reloadData] 的代码放入委托方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:48:10.290

您不应该从`viewDidAppear`.

相反，您应该从 viewDidApeear 重新加载数据。

```
-(void) viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if (question1Answered)
    {             
        //This will call your tableview's delegate for visible cells
        [self.tableView reloadData];
    }
} 
```

在 cellForRowAtIndexPath 中，您应该决定分配附件类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T09:32:56.107

你应该首先更新你的模型，然后根据模型状态更新你的 UI。
例如，如果您的模型是一个`Question`对象数组，并且每个问题都有一些`hasBeenAnswered`布尔值。
那么您在 viewDidAppear 中唯一应该做的就是调用`[self.tableView reloadData]`，这将更新您的表格视图，因为`cellForRowAtIndexPath`将根据您的模型状态调用并设置单元格。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil) { 
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // configure the cell according to your model state  
    Question *question = [self.questions objectAtIndex:indexPath.row];  

    // check if this question has been answered
    if (question.hasBeenAnswered) {
       // if yes - set a checkmark
       [cell setAccessoryType:UITableViewCellAccessoryCheckmark];  
    }
    else {
       // if not - set to none (or whatever u want)
       [cell setAccessoryType:UITableViewCellAccessoryNone];
    }

    return cell;
} 
```

# drop-down-menu - AS400 显示文件中的下拉菜单

> ID：11805799
> 
> 赞同：1
> 
> 时间：2012-08-04T03:59:58.763
> 
> 标签：drop-down-menu, ibm-midrange, rpgle, rpg

在 AS400 中，是否可以在显示文件“RECORD”类型的记录格式中有一个下拉菜单。

```
I have created a menu that is written in CL program and invokes the respective 
RPG programs for each option selected. 
```

但是对于其中一个选项，我还想打开一个菜单，一个子菜单，而不是在同一个屏幕上（如下拉菜单）。我知道显示下拉菜单的记录类型......但我该怎么做通过 CL 调用它我不确定。

请帮助人们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:00:54.817

一种显示窗口记录格式的方式与显示主记录格式的方式相同。SNDRCVF（或 SNDF 后跟 RCVF）。CL 不允许使用子文件，但除此之外，没有任何特殊技术可以在 CL 中使用窗口记录格式。我知道这听起来很理论化，但这是我能做的最好的事情，而无需查看您尝试过的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:59:03.000

```
0000.01 WELCOMEQQ,1
0000.10 0001 WRKMBRPDM
0000.11 0002 GO MENU(GIRRAJ111/MENU#1)
0000.12 0003 GO MENU(QGPL/GUEST)
0000.13 0004 GO MENU(QGPL/GUEST)
0000.14 0011 signoff 
```

这里welcomeqq 是我的第一个菜单，这里是MENU#1，GUEST 这些是我的二级菜单，这是第一个菜单的选择

{ 最后你应该在你的选项后面使用“GO MENU(library name/menu name)”这个命令。}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T13:36:25.203

由于这需要使用 CL 来实现，您可以尝试的一个可能选项是使用指标并相应地打开/关闭选项线，这将在同一记录中。好吧，可能存在一个隐藏的缺陷，所有选项都始终打开（除非您声明具有要接收的特定值的字段），只是它是隐藏的（如果用户键入了一个隐藏选项也被触发）

# c# - 什么格式需要成为属性？

> ID：11805802
> 
> 赞同：1
> 
> 时间：2012-08-04T04:01:21.820
> 
> 标签：c#, properties

全部，

我有以下 C# 代码：

```
public int property
{
    set
    {
         tbText.Text = property.ToString();
    }
    get
    {
         return Convert.ToInt32(tbText.Text);
    }
} 
```

当我转到属性窗口时，我看到以下消息：

输入字符串的格式不正确。

tbText 是我试图获取或设置值的 TextBox 控件。

最初控件是空的。

我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T04:04:14.380

您正在寻找 setter 中的[value](http://msdn.microsoft.com/en-us/library/a1khb4f8.aspx)关键字。

> 上下文关键字**值**用于普通属性声明中的 set 访问器。它类似于方法的输入参数。

```
public int property
{
    get
    {             
         int defaultVal;
         int.TryParse(tbText.Text, out defaultVal);
         return defaultVal;
    }
    set
    {
         tbText.Text = **value**.ToString();
    }
}
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:07:39.620

使用 setter 时，您需要将其设置为关键字`value`：

```
public int property
{
    set
    {
        tbText.Text = value.ToString();
    }
    get
    {
        return Convert.ToInt32(tbText.Text);
    }
} 
```

所以设置时`property`：

```
property = 100; // value is equal to whatever you are making property equal. 
```

希望这可以帮助！

# php - PHP根据URL从s3下载文件？

> ID：11805804
> 
> 赞同：0
> 
> 时间：2012-08-04T04:02:04.647
> 
> 标签：php, mod-rewrite, curl, amazon-s3, amazon

我希望我网站上的用户可以输入网址 www.example.com/m/directory/anyname.extension ，它将从 Amazon S3 加载文件。

例如：www.example.com/m/bob/index.php 将从 s3.amazonaws.com/bucketname/m/bob/index.php 加载一个文件

我该怎么做呢？PHP、cURL、mod_rewrite？

我对 mod_rewrite 很糟糕，而且我对 cURL 的经验很少，所以我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T04:09:15.967

如果它是一个小文件，你可以很容易地从 file_get_contents 开始。

```
<?php
echo file_get_contents("s3.amazonaws.com/bucketname/m/bob/index.php");
?> 
```

readfile 函数通常会更好（我刚刚使用 file_get_contents 开始测试）。

[http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

你可以试试这个：

```
<?php
 readfile($url);
?> 
```

# ios - 使用多个视图控制器时的可达性检查

> ID：11805806
> 
> 赞同：0
> 
> 时间：2012-08-04T04:02:13.400
> 
> 标签：ios, reachability

我需要测试可达性，以及这个问题中提到的方法[如何检查 iOS 或 OSX 上的活动 Internet 连接？](https://stackoverflow.com/questions/1083701/how-to-check-for-an-active-internet-connection-on-iphone-sdk)似乎合适。但是我的应用程序使用了一个标签栏控制器，它又部署了多个视图控制器。我是否需要在每个视图控制器中实现可达性测试，或者我可以在 AppDelegate.m 中设置一次（然后在通知消息进入时设置一个 CONNECTION_OK 标志 [供视图控制器测试]）？试图让事情尽可能简单。欢迎举例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T04:53:47.820

您正在考虑做的事情是正确的。您可以仅在 AppDelegate 中实现可达性检查并更新视图控制器可以查询的状态变量（您的 CONNECTION_OK 标志）。这是正确的方法之一（从编程风格的角度来看）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:47:44.810

对我来说，我使用来自[Apple](http://developer.apple.com/library/ios/ipad/#samplecode/Reachability/Listings/Classes_Reachability_h.html)的那个。特别是这两类方法来检查 Internet 连接或本地 WiFi 可用性。我在需要连接到 Internet 或本地 WiFi 之前就这样做了。

```
//  Should be used by applications that do not connect to a particular host
+ (Reachability*) reachabilityForInternetConnection;

//reachabilityForLocalWiFi- checks whether a local wifi connection is available.
+ (Reachability*) reachabilityForLocalWiFi; 
```

# javascript - 为什么在主干的model.fetch之后'this'会绑定到对象闭包内的窗口？

> ID：11805807
> 
> 赞同：0
> 
> 时间：2012-08-04T04:02:44.380
> 
> 标签：javascript, ajax, backbone.js, closures, this

所以我有这个看起来像这样的 javascript/Backbone 脚本：

```
var Model = Backbone.Model.extend({});

var View = Backbone.View.extend({

 initialize: function() {
    _.bindAll(this); //bind this
   this.doProcessing();
 },

 doProcessing: function() {

  $('.someElement').each(function() {
      Model myModel = new Model;
      myModel.fetch({                          //issue ajax
         success: function(model, response){   //after successful ajax
            console.log(this)                  // <-- outputs Window!!
       });     

   }); //end each

  } //end processing

});

new View; 
```

让我无法理解的是如何`this`绑定到窗口。我很清楚我的关闭，但不应该`this`参考`model`?

这就是我的理解 - 成功回调以某种方式绑定到 Window 对象。因此，当它被调用时，上下文就是窗口对象的上下文。但在我看来，这有点出乎意料。骨干为什么这样做的任何原因（或者我误解了什么？）。

通过 的参数设置`myModel`的属性有点奇怪。当它应该允许一个简单的调用时，调用它似乎很复杂`model``success``model.set({...})``this.set({...})`

在这种情况下我的理解`this`正确吗？任何解决方法？或者这更像是 XHR 绑定到成功回调的方式？

来自 Backbone 的源代码（Model.fetch）：

```
fetch: function(options) {
      options = options ? _.clone(options) : {}; //cloning options - does this variable get bound to global?
      var model = this;
      var success = options.success;            //or is it this?
      options.success = function(resp, status, xhr) {
        if (!model.set(model.parse(resp, xhr), options)) return false;
        if (success) success(model, resp);
      };
      options.error = Backbone.wrapError(options.error, model, options);
      return (this.sync || Backbone.sync).call(this, 'read', this, options);
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:48:57.103

“成功回调以某种方式绑定到窗口对象”

不，JavaScript 中的函数不是“绑定”的。`this`仅在调用函数时指定什么。让我们看看它是如何调用的

```
success(model, resp) 
```

所以函数是直接调用的，不是通过方法调用语法( `someObj.someMethod(...)`)，也不是通过`.call()`or `.apply()`。所以在这种情况下，`this`设置为全局对象，在这种情况下是窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:58:24.247

默认情况下会发生这种情况，因为 .call() 或 .apply() 没有给出任何特定的上下文，它回退到`window`用作`this`对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T04:12:30.873

一种解决方法是尝试这样的事情

```
myModel.fetch({                          
     success: _.bind(function(model, response){   
        console.log(this);                  
   },this);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T09:57:47.667

块的*上下文*或引用的内容在 javascript`this`中非常*不稳定。*

我认为上下文的变化是在块中完成的`$('.someElement').each(function() { ... });`，与工作方式无关`Model.fetch()`。

尝试添加更多日志，例如：

```
doProcessing: function() {
  console.log( "out of the block", this );

  $('.someElement').each(function() {
    console.log( "begining of block", this );

    Model myModel = new Model;
    myModel.fetch({                          
      success: function(model, response){ 
        console.log( "into the fetch", this );                 
      }     
    });
  };

  console.log( "end of block", this );
} 
```

进入`each`块`this`应该是实际的 DOM 元素进入循环。

为了解决这种`this`意义的变化，我习惯使用一种解决方法，并且我习惯于看到周围是引用*块*`this`外的另一个变量（什么时候是你期望的）并将这个新的引用用于堵塞：*`this`*

 *```
doProcessing: function() {
  console.log( "out of the block", this );

  var _self = this;

  $('.someElement').each(function() {
    console.log( "begining of block", _self );

    Model myModel = new Model;
    myModel.fetch({                          
      success: function(model, response){ 
        console.log( "into the fetch", _self );
      }     
    });
  };

  console.log( "end of block", this );
} 
```

### 更新

如果您想要引用您最近创建的模型，只需使用您创建的外部引用，如下所示：

```
doProcessing: function() {
  $('.someElement').each(function() {
    Model myModel = new Model;
    myModel.fetch({                          
      success: function(model, response){ 
        console.log( "into the fetch", myModel );                 
      }     
    });
  };
} 
```

或者只是使用 Backbone 发送到*成功回调*的引用：

```
doProcessing: function() {
  $('.someElement').each(function() {
    Model myModel = new Model;
    myModel.fetch({                          
      success: function(model, response){ 
        console.log( "into the fetch", model );                 
      }     
    });
  };
} 
```*

# android - android：字体设置的Intent.Action是否改变了？

> ID：11805808
> 
> 赞同：1
> 
> 时间：2012-08-04T04:02:49.077
> 
> 标签：android, fonts, setting

在android中，当某些设置改变时，app的activity必须重新创建，这可能会导致app崩溃，比如语言或字体设置；我知道语言设置的 Intent.Action 是 ACTION_LOCALE_CHANGED，但找不到字体设置的 Intent.Action；那么问题来了：Android中字体设置的Intent.Action是什么，如果不是，字体设置改变的情况如何处理？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:33:13.320

我知道了;

android.intent.action.FONT_CONFIG_CHANGED

可能是你们在谷歌源代码中找不到！
我的团队定制了源代码！

# php - 如何从 iPhone 应用程序向服务器发送数据

> ID：11805809
> 
> 赞同：0
> 
> 时间：2012-08-04T04:02:54.443
> 
> 标签：php, iphone, mysql, xcode

我正在使用 php 从 iphone 应用程序向服务器发送数据，但是当我发布数据返回时，数据没有插入到数据库中，它只是在 echo 中发送 []。

我的 iPhone 代码

```
 -(void)submitSurveyAnswers{

     NSString*survey_question_response_id="1";
     NSString*survey_id=@"1";
     NSString *question_id =@"1";
     NSString *survey_response_answer_id =@"1";
     NSString *post =[[NSString alloc] initWithFormat:@"survey_question_response_id=%@&survey_id=%@&question_id=%@&survey_response_answer_id=%@",survey_question_response_id,survey_id,question_id,survey_response_answer_id];
     NSLog(post);
    NSURL *url=[NSURL URLWithString:@"http://myserver-solutions.com/app/surveyAnswer.php?"];

    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];
   NSError *error;
   NSURLResponse *response;
   NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

  NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
  NSLog(@"%@",data);
  } 
```

这是我的php代码

```
 <?php
    $host = ""; 
    $user = ""; 
    $pass = ""; 
    $database = ""; 

    $linkID = mysql_connect($host, $user, $pass) or die("Could not connect to host."); 

    mysql_select_db($database, $linkID) or die("Could not find database."); 

    $survey_question_response_id=$_POST['survey_question_response_id'];
    $survey_id=$_POST['survey_id'];
    $question_id=$_POST['question_id'];
    $survey_response_answer_id=$_POST['survey_response_answer_id'];
    echo($survey_question_response_id);

    $query=("INSERT INTO survey_question_responses 
```

(survey_question_response_id,survey_id,question_id,survey_response_answer_id)

```
 VALUES ('$survey_question_response_id', '$survey_id','$question_id','$survey_response_answer_id')");

     mysql_query($query,$con);
     printf("Records inserted: %d\n", mysql_affected_rows());
     echo($survey_id)
     ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:43:00.207

我在 Github 上有一个完整的示例来动态创建表单并将它们提交到 POST 服务器。您可以根据表单的复杂程度来使用它。每个表单都在一个 plist 中描述，并且非常动态。

如果它缺少对任何所需表单类型（复选框、下拉菜单等）的支持，请告诉我，我很乐意添加它们。（到目前为止，我的表单中只需要基于文本的输入，但如果有需求，我也想将其扩展到更复杂的项目！）

（还包括一个 PHP 文件来捕获响应。）

[https://github.com/mikecheckDev/MDContactForm](https://github.com/mikecheckDev/MDContactForm)

# php - 从 MySQL 数据库添加内容以填充页面

> ID：11805816
> 
> 赞同：0
> 
> 时间：2012-08-04T04:05:13.837
> 
> 标签：php, jquery, mysql

我正在尝试用数据库中的内容填充页面。我的想法是，在 php 中使用某种 while 循环并遍历数据库中的每一行并使用 jQuery 的 .prepend 命令将其添加到其他内容下方。

我在此看到的问题是，每次加载页面时，必须通过表中的每一行加载并显示它会占用大量资源。

我在想，当我显示该项目时，我应该更改表中的一个值，表明它已经显示，因此保留当前内容。我的问题是，如果像这样动态添加这些内容，我将如何将其保留在那里？

还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T04:11:14.797

跟踪您已经存储了哪些条目 #s 并使用 sql 的 limit 函数处理新内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:11:41.677

为 db 中的每一行添加时间戳

每当您在 jquery 中读取时，行会将最后一个时间戳保留在变量中

当您在 jquery 中发送请求时，添加最后一个时间戳，然后使用查询进行过滤`WHERE update_time > $jquery_timestamp`

使用这种方式，只会发送新信息

# android - 在 Android 上使用 PhoneGap 处理没有互联网连接

> ID：11805823
> 
> 赞同：2
> 
> 时间：2012-08-04T04:08:36.457
> 
> 标签：android, android-webview

我正在尝试检测用户是否在他们的 android 设备上连接了互联网。如果他们没有互联网，我希望能够显示一个视图，上面有一个按钮，上面写着“重试”，就像 Google Play 应用商店那样。在使用下面的代码之前，我没有使用原生 android webview 检测到任何信号，但我现在想找到一种方法来用 PhoneGap 做同样的事情。另外，如果有人可以提供一些有关如何重新加载网页的示例代码，那就太好了！

```
 webview.setWebViewClient(new WebViewClient() {
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            Intent myIntent = new Intent(view.getContext(), LoadScreen.class);

            startActivity(myIntent);
            finish();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:01:56.067

通过使用以下代码解决了这个问题：

```
public boolean isOnline() {
    ConnectivityManager cm =
        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:10:20.913

您可以测试该`navigator.online`值以确定连接性：

[https://developer.mozilla.org/en-US/docs/DOM/window.navigator.onLine](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.onLine)

# mysql - SQL连接多次？

> ID：11805836
> 
> 赞同：2
> 
> 时间：2012-08-04T04:13:28.983
> 
> 标签：mysql, sql

我正在制作以下格式的用户状态列表***"A like B's XXX"***。A 和 B 都是注册用户，具有名字和姓氏以及用户 ID。如何将status表和user表两次join得到两个用户的名字？谢谢你。

```
SELECT "SQACTION"."TIMECREATED", 
       "SQWORDLIST".*, 
       "SUBJECT"."FIRSTNAME" subject_fn,
       "SUBJECT"."LASTNAME" subject_ln, 
        author.firstname author_fn, 
        author.lastname author_ln 
FROM "SQACTION" 
  INNER JOIN "SQWORDLIST"
    ON SQACTION.ACTION = SQWORDLIST.GUID 
  INNER JOIN "SQUSER" SUBJECT
    ON SQACTION.SUBJECT = SUBJECT.GUID 
  LEFT JOIN SQDOCUMENT
    ON SQACTION.ENTITY = SQDOCUMENT.GUID 
  LEFT JOIN SQUSER AUTHOR
    ON SQDOCUMENT.AUTHORID = AUTHOR.GUID 
WHERE (SUBJECT.GUID = 'B4D3BF632C0C4DB3AB01C8B284069D8F') 
   OR (SUBJECT.GUID IN ('67882AF3FA3C4254AF9A12CA0B0AB6E4',
                        '6A4B52FE233444838AACFE2AFFE4D38F',
                        '8CA3FB9061FF4710B51F1E398D3D1917')) 
ORDER BY "TIMECREATED" DESC 
```

这是我尝试过的。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T04:19:56.057

您需要在`FROM`子句中包含两次表名，并使用别名，以便您可以指定在`ON`语句中使用表的每个实例中的哪些字段。你没有在你的问题中提供足够的细节来给出一个确切的例子，所以这里有一些更笼统的东西。

用户表，带有 ID 和名称

RegTable，带有 UserID 和 SponsorID

```
select ut1.name as [User],
       ut2.name as [Sponsor]
from   UserTable ut1
       inner join RegTable rt on ut1.id = rt.userid
       inner join UserTable ut2 on rt.sponsorid = ut2.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:21:41.717

你的意思是，状态有两个指向用户表的字段链接？

```
select user_a.first_name as user_a_first_name, user_b.first_name as user_b_first_name, status.status_name
from status
left join users as user_a on user_a.id = status.user_from_id 
left join users as user_b on user_b.id = status.user_to_id 
```

# css - jquerymobile 紧凑型列表视图 css

> ID：11805840
> 
> 赞同：1
> 
> 时间：2012-08-04T04:14:31.207
> 
> 标签：css, listview, jquery-mobile

我正在使用的当前列表视图在文本上方和下方有额外的空间。我如何使它成为一个真正紧凑的？[http://jsfiddle.net/qW6sP/8/](http://jsfiddle.net/qW6sP/8/)

```
 <ul data-role="listview" data-theme="d" data-divider-theme="d">            
        <li>
                <h6 style='font-size:8pt;'>Mode: repairing</h6>
                <p>00 hours 00 mins 00 secs</p>                    
                <p class="ui-li-aside"><a href="#" data-role="button" class="ui-btn-right" id="dismissbtn" onclick="fadeint()" data-mini="true" >Done</a></p>

        </li>
      </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:29:28.127

额外的空间由**h6**和**p**标签创建。使用自定义跨度类，然后您可以根据需要定位和调整文本大小......

html:

> ```
> <span class="compactHeader"> Mode: repairing </span>
> <span class="compactText">00 hours 00 mins 00 secs</span> 
> ```

CSS：

```
.compactHeader
{
  //set size and positioning as you want.
}

.compactText
{
  //set size and positioning as you want
} 
```

# java - Eclipse 调试变量值不出现

> ID：11805842
> 
> 赞同：2
> 
> 时间：2012-08-04T04:14:58.087
> 
> 标签：java, eclipse

我目前正在 Eclipse 中使用 Java 进行编码，并且正在尝试使用 Eclipse 的内置调试器来尝试调试我的代码。但是，一旦我进入调试模式并尝试运行程序直到断点，变量就不会显示在变量窗口中。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:22:14.607

确保您不在`Breakpoints`选项卡中，而不是`Variables`在调试透视图右上角窗口中的选项卡中。如有疑问，只需转到`Window > Show View > Variables`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T23:18:29.560

这通常是由 Eclipse 中的渲染错误引起的。通常让应用程序运行超过断点，然后尝试再次运行到断点修复显示。其他时候您必须重新启动 IDE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-06T22:18:48.580

我刚刚遇到了类似的问题，我只能看到方法参数和`this`成员，但看不到局部变量。我在所有可能的项目设置中进行搜索，发现未选中此复选框（“**将变量属性添加到生成的类文件**”）。确保所有 3 个选项（由调试器使用）都打开：

[![在此处输入图像描述](../Images/d69ef6bdc6b6951dbcdbf90f08f9f0e7.png)](https://i.stack.imgur.com/eGISt.png)

# android - 是否有任何第三方工具可以在 Android 中创建多个布局而不是不同的布局文件夹？

> ID：11805844
> 
> 赞同：-2
> 
> 时间：2012-08-04T04:15:24.683
> 
> 标签：android, android-layout, layout, android-resolution

我知道我们在创建 Android 应用程序时必须手动管理多个设备分辨率。

是否有任何第三方框架，当我们创建一个设备分辨率时，它会自动为其他设备分辨率创建布局？

请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T04:25:35.377

与`px`单位不同，Android 使用`dip`单位或**设备独立像素**来渲染它的屏幕。使用的目的`dip`是确保您不必为不同的分辨率创建布局。

在移动领域，我们通常只需要处理两种布局：1) 手机 2) 平板电脑。

然后是垂直和水平方向布局，可以帮助您更好地控制 Android 操作系统如何在这些方向上呈现您的应用程序。

[在 Android 上支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)应该是一个很好的资源。

**编辑：**

你试过[DroidDraw](http://www.droiddraw.org/)吗？这里有一些关于 Android 布局工具的其他讨论：[有没有一个很好的工具来做 Android 布局设计？](https://stackoverflow.com/questions/2783586/is-there-a-good-tool-for-doing-android-layout-design).

Android OS 还捆绑了一些优化工具，例如`HierarchyViewer`，`layoutopt`以提高您的应用程序的性能。更多关于[布局优化](http://developer.android.com/tools/debugging/debugging-ui.html#layoutopt)

从更哲学的角度来看，有时，您可能正在寻找的可能不是您真正需要的：[为什么您真的不想要 Android 的 WYSIWYG 布局编辑器](http://designbycode.tumblr.com/post/1079612795/why-dont-wysiwyg-android)

快乐编码！

请分享您的发现并接受对您有用的答案，这样其他人可能会在他们紧张的午夜搜索中发现它有用:)

# objective-c - 子类文本字段和标记字段不显示光标

> ID：11805847
> 
> 赞同：0
> 
> 时间：2012-08-04T04:16:32.963
> 
> 标签：objective-c, cocoa, nstextfield

如果我继承 NSTokenField 或 NSTextField 并覆盖 becomeFirstResponder （为了在控件成为第一响应者时执行一些代码），当该字段成为第一响应者时（如焦点环和日志所示），光标不会出现。

```
-(BOOL)becomeFirstResponder {
    // call other code here
    NSLog(@"%@",[self.superview.window firstResponder]);
    return YES;
} 
```

既然这个方法的默认实现返回YES，为什么像这样重写它会导致控件不显示光标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T04:18:13.637

你必须打电话`[super becomeFirstResponder]`。覆盖它会中断调用链。在某处`super`是对显示光标的调用的调用。

**注意：**如果调用 super 方法，则必须返回它的返回值。所以你的方法看起来像：

```
- (BOOL) becomeFirstResponder {
     if (someCondition) {
         return NO;
     }
     BOOL retVal = [super becomeFirstResponder];
     // do your stuff
     return retVal;
} 
```

# c - linux下C中带有FIFO的IPC

> ID：11805849
> 
> 赞同：2
> 
> 时间：2012-08-04T02:10:46.850
> 
> 标签：c, linux

我一直在尝试使用 FIFO 实现 IPC，我做了以下，它似乎工作正常，测试了几次，对我来说看起来不错。

问题是我需要注意什么，我知道读取和写入将是原子的，因为我将在 PIPE_BUF 下方写入。

我已经像这样运行它

。/作家

./读者 ./读者

我看到阅读器工作正常，例如第一个阅读器阅读 1，然后第二个阅读器阅读 2 和 3，然后第一个阅读器阅读 4，依此类推。

请注意，我在[这里](http://i.thiyagaraaj.com/tutorials/unix-network-programming-example-programs/fifo-client-server-program-in-unix-using-c-programming)找到了代码并对其进行了修改。

作家.c

```
#include<stdio.h>
#include<unistd.h>
#include<fcntl.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<string.h>
    int main()
    {
    int fd,fd1;
    fd=open("fifo1",O_WRONLY);
    int data = 1;
    while (1){
    write(fd,&data,sizeof(int));
    usleep(10);
    data++;
    }

    //printf("File Content :%s",s1);
    } 
```

读者.c

```
#include<stdio.h>
#include<unistd.h>
#include<fcntl.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<string.h>
    int main()
    {
    int fd,fname;
    mkfifo("fifo1",0600);
    fd=open("fifo1",O_RDONLY);
    int d = 0;
    while(read(fd,&d,sizeof(int))!=0)
    {
    printf("%d\n",d);
    usleep(10);
    }
    close(fd);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:33:31.283

如果某个读取器进程处于饥饿状态，它将在`read`系统调用上被阻塞，写入器最终将被内核调度并写入一些东西。该`PIPE_BUF`限制仅对单个消息的最大大小很重要（例如，读取，您不会达到该大小）。

对称地，如果 writer 写入很多，fifo 缓冲区会变满（上图`PIPE_BUF`）并且`write`系统调用在 writer 进程中被阻塞。最终调度程序将运行阅读器。

请参见[read(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)和[write(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html)手册页。当您想要多路复用时，了解[poll(2)也可能会有所帮助。](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)另请参见[fifo(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/fifo.7.html)。

`PIPE_BUF`是对每个原子读写的限制。更大的读取和写入只能部分完成。内核保证，如果读取或写入操作可以在少于`PIPE_BUF`字节的情况下完成（即当这样的字节数量可用时！），它将在管道和相关文件描述符（例如 FIFO）上整体完成。

阅读[高级 unix 编程](http://basepath.com/aup/)和/或[高级 linux 编程](http://www.advancedlinuxprogramming.com/)书籍

# google-app-engine - java.io.NotSerializableException: com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector

> ID：11805852
> 
> 赞同：2
> 
> 时间：2012-08-04T04:17:55.287
> 
> 标签：google-app-engine

我在 Google App Engine 上使用 Struts2。在我的本地开发框中，该应用程序运行良好。但是在上传到谷歌的云时，我得到了以下异常

我正在使用以下二进制文件

struts2.3.1.2（和依赖的 jar 文件）xwork-core-2.3.1.2
GAE SDK 版本：1.6.6

```
 java.lang.RuntimeException: java.io.NotSerializableException: com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector
        at com.google.apphosting.runtime.jetty.SessionManager.serialize(SessionManager.java:373)
        at com.google.apphosting.runtime.jetty.DatastoreSessionStore.createEntityForSession(DatastoreSessionStore.java:71)
        at com.google.apphosting.runtime.jetty.DatastoreSessionStore.saveSession(DatastoreSessionStore.java:93)
        at com.google.apphosting.runtime.jetty.SessionManager$AppEngineSession.save(SessionManager.java:164)
        at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:41)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
        at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
        at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
        at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477)
        at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
        at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
        at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
        at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
        at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
        at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
        at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
        at java.lang.Thread.run(Thread.java:679) 
```

我什至尝试过使用最新版本的 xwork-core API，但没有任何收获。我在这个网站上看到过这种问题的报告，但没有令人满意的解决方案或答案。有人可以帮我解决这个问题..吗？

如果在 Action 类中使用 ArrayList 是它的根类，作为一种解决方法，我应该选择 ArrayList 的替代品吗？建议使用哪一个 ..？

-谢谢马

# linux - 在 elinks 中调用外部命令时保持键盘控制

> ID：11805855
> 
> 赞同：1
> 
> 时间：2012-08-04T04:18:21.750
> 
> 标签：linux, bash, framebuffer, mplayer, elinks

目前，使用[此处](http://crunchbanglinux.org/forums/topic/18431/youtube-in-mplayer-script/)描述的方法，我可以在不使用 X windows/Flash 的情况下流式传输 YouTube 视频。我的主要基于文本的浏览器是 elinks，您可以调用外部程序并将当前选择的链接传递给它，方法是将其添加到您的`elinks.conf`文件中：

```
set document.uri_passing.youtube = 'ytmplay.sh %c'
bind 'main' 'F10' = 'link-external-command' 
```

这目前*有效*，但与直接从控制台调用 `ytmplay.sh YOUTUBE_URL' 不同，我实际上无法控制 mplayer，并且只能在强制终止 mplayer 时停止视频。有谁知道在通过 elinks 外部命令/URI 传递调用 mplayer 时如何保持对 mplayer 的控制？

# css - 更改默认主题，并添加样式以形成组件

> ID：11805858
> 
> 赞同：0
> 
> 时间：2012-08-04T04:18:38.520
> 
> 标签：css, extjs4, sass, extjs4.1

我对样式（主题）没有几个问题。目前，我在所有窗口和面板中都获得了蓝色主题。我想把它改成粉红色。我怎样才能做到这一点 ？

我读过`swapStyleSheet( String id, String url) : Void`但是，我不知道如何使用它。

2.) 我还需要知道如何更改标签/表单面板等的颜色，我希望所有样式都在 1 页上，而不是将其作为属性添加到标签/表单面板中。（例如`fieldStyle: 'background-color: #ddd; background-image: none;'`：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T23:33:08.603

虽然我没有创建自定义主题，但这里有一个主题指南：[http](http://www.sencha.com/learn/theming/) ://www.sencha.com/learn/theming/ ，它将为您提供非常强大的工具来创建主题，而不是为单个组件设置样式。

# ruby-on-rails - 思考 Sphinx 对整数进行降序排序不会按最高到最低值排序

> ID：11805859
> 
> 赞同：0
> 
> 时间：2012-08-04T04:18:43.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sphinx, thinking-sphinx

我不熟悉使用 Sphinx 和 Thinking Sphinx gem。我有一列最多有 6 位整数，当我对该列进行排序时，默认情况下我最多只能得到 5 位数字，而当它对它们进行排序时，它只按第一个数字进行排序，所以它看起来像这样

```
99999
99998
99997
...
89999
...
79999
...
100999 <- Higher 6 digit number showing up here
10999
10998 
```

即使我的数字高于 99999 这个所以它应该看起来像这样

```
100999
100998
100997
...
...
99999
99998 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:53:19.440

Make sure that you store integers as integers in your DB.

If it's in a string, no one will complain and everything'll work fine until you want to sort them :)

# c++ - 无法将参数 3 从 'std::vector<_Ty> *' 转换为 'Inventory *'。为什么？

> ID：11805860
> 
> 赞同：0
> 
> 时间：2012-08-04T04:19:07.147
> 
> 标签：c++, visual-c++

```
#include "foodservice.h"
#include <iostream>
using namespace std;

int main() {
  Inventory Master;
  bool flag;
  Customer Bob("Bob", 12345, 100.00 );
  Customer Joe("Joe", 56789, 50.00 );
  Customer Arjun("Arjun", 98765, 00.01 );
  Customer Randy("Randy", 54689, 30.28);
  Customer Mark("Mark", 76598, 15.18);

  Master.firststock( "inventory.txt" );
  vector<Food> temp = Master._Inv;
  for(unsigned int i=0; i<temp.size(); i++ ) {
    cout << temp[i].name << " " << temp[i].quant << " " << temp[i].price << endl;
  }

  flag = Bob.addCart( "Apple" , 10,  &Master._Inv );
  Bob.report();
  flag = Bob.addCart( "Oranges", 2, &Master._Inv );
  flag = Bob.removeCart( "Apple", 3, &Master._Inv );
  flag = Arjun.addCart( "Apple", 1, &Master._Inv );
  flag = Bob.checkout(&Master._Inv);
  flag = Arjun.checkout(&Master._Inv);
  Master.summary();*/

  system("pause");

} 
```

* * *

这是我的头文件的一部分：

```
class Inventory;
class Customer {
  public:
    Customer(string n, int c, double b );
    ~Customer() { _Cart.clear(); };
    bool addCart( string name, int q, Inventory* inv );
    bool removeCart( Food f, int q, Inventory* inv );
    void report(); 
    bool checkout(Inventory* inv); 
  protected:
    string name;
    int card;
    double balance;
    CreditCard _CC(int c,double b);
    vector<Food> _Cart;
};

The error i am getting is: cannot convert parameter 3 from 'std::vector<_Ty> *' to 'Inventory *'
1>          with
1>          [
1>              _Ty=Food
1>          ]
1>          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast 
```

我很感激帮助。所以当我使用 &Master._Inv 时会显示错误。_Inv 是我在标题中其他地方声明但未包含的食物向量。然而问题出在指针 &Master.... 我也试过 *Master._Inv 但也没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T04:26:34.707

错误消息非常简单。 `addCart`, `removeCart`, 并且`checkout`都将指针`Inventory`作为参数。但是您的论点`&Master._Inv`是指向 a 的指针`std::vector<Food>`。也许你的意思只是`&Master`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T04:26:46.233

Customer::addCart() 的第三个参数是一个指向 Inventory 对象的指针。尝试通过它&大师。

# objective-c - 让图像移动更“流畅”

> ID：11805865
> 
> 赞同：0
> 
> 时间：2012-08-04T04:19:56.833
> 
> 标签：objective-c, ios, cocoa-touch, uiimageview

我想`IBAction`在调用时使图像“流畅地”移动一定数量的像素。我现在有一个可以让图像向左移动 10 个像素，但它只是一种传送到那里。我希望图像可以移动，就像它的行走不会神奇地结束一样。

这是我所拥有的：

```
- (IBAction)moveImageLeft:(id)sender
{
    y = y + 10;
    myImageView.frame = CGRectMake(x, y, 45, 56);   
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T05:46:11.797

@Dimple 的回答是正确的。但是，仅供参考，这是另一种方法。它被称为动画块，在我看来使整个动画过程变得更加容易。

```
[UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
    y = y + 10;
    myImageView.frame = CGRectMake(x, y, 45, 56);
}completion:^(BOOL finishedAnimating){
    if (finishedAnimating == YES) {
        NSLog(@"animation finished");//you can put your own completion handler events here
    }
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T04:29:42.723

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationDelay:1.0];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

y = y + 10;
myImageView.frame = CGRectMake(x, y, 45, 56);        
[UIView commitAnimations]; 
```

# php - 重定向时删除的 Cookie

> ID：11805867
> 
> 赞同：2
> 
> 时间：2012-08-04T04:21:07.640
> 
> 标签：php, cookies

我有 cookie 的问题。

基本上我正在尝试将用户的会话 ID 存储为 cookie，如下所示：

```
 setcookie("CheckoutSessionID",session_id(),time()+3600); 
```

这在我的网站上运行良好，cookie 具有正确的值并且有效时间足够长。但是，我的网站会重定向到 PayPal，因此用户可以确认付款。然后用户被重定向回我的网站。当用户被重定向回我的网站时，所有 cookie 变量都消失了。

如`print_r($_COOKIE)`，`var_dump($_COOKIE)`等没有值。这仅在被定向到 PayPal 后才会发生。

关于为什么会发生这种情况的任何想法？

提前感谢所有帮助，我很难过！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T05:27:11.637

好的，我一直在深入挖掘并意识到我之前的一个问题是相关的：

[PHP 会话和 session_start()](https://stackoverflow.com/questions/11803978/php-sessions-and-session-start)

基本上我遇到了问题，因为当我去 PayPal 并返回时，PHP 会话被删除了。但是，我相信这实际上是由于会话 COOKIE 被破坏，而不是整个会话造成的。

我还在这里找到了这个主题：[Do PHP session get lost when directing to a payment gateway?](https://stackoverflow.com/questions/6218608/do-php-sessions-get-lost-when-directing-to-a-payment-gateway)

有人给出的答案建议使用带有返回 URL 的 GET 请求来发回数据，而不是使用 cookie 或会话。

我首先使用 cookie 的全部原因是保存用户的会话 ID，因为会话无法正常工作，所以基本上我只是将返回 URL 设置为如下所示：

mydomain.co.uk/mypage.php?SessionID=[session ID goes here] 然后获取它然后将用户的会话ID设置为它。

排序！现在......我的意思是，由于 cookie/会话无法正常工作，我可能最终会碰到另一堵砖墙。

谢谢大家的帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T05:16:16.617

实际上无论发生什么（cookie 是空的），逻辑上都是正确的。当您提交页面/发出请求时，浏览器会`cookie`从客户端计算机发送请求，以便您可以`cookie`在`cookie`变量中找到 。

但是，一旦您将用户重定向到另一个外部页面/站点并再次返回到您的页面，那么您不应该在变量`cookie`中获取 ，`cookie`因为（在您的情况下）当用户从与请求。`paypal``paypal``cookie`

在这种情况下，您可以在将用户重定向到之前将数据保存在数据库中，`paypal`并且一旦用户返回您的站点，您就可以从数据库中检索该数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-27T18:40:11.320

从 Paypal 重定向后，我得到了类似的问题 cookie 被删除。

我花了一段时间才弄清楚哪里出了问题。

```
Samesite=**"Strict"** // Removes cookies after redirect from Paypal.

Samesite=**"Lax"** // does not remove cookies after redirect from Paypal. 
```

# c# - 将 excel 应用程序转换为 C# 应用程序

> ID：11805868
> 
> 赞同：1
> 
> 时间：2012-08-04T04:21:17.797
> 
> 标签：c#, .net, excel

我有一个带有一个入口页面和一个结果页面的 Excel 应用程序。根据输入到输入页面的数据和一些静态表格，还有一些其他工作表可以计算值并稍后在结果页面中进行汇总。

我需要将此应用程序转换为 Web 应用程序并将整个逻辑从 excel 移动到 C#。会有一些 UI 页面和 1 个结果页面，并且当前在 excel 应用程序中的工作表计算将被移动到不同的 C# 类。

是否有任何工具可以做到这一点，或者我们是否必须手动将现有逻辑的每一部分转换为 C#？如果我们必须手动完成，那么是否有任何工具可以帮助将逻辑汇总到文本文件中，这样我们就不必在 Excel 中回溯整个计算来重构逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T04:30:41.727

我不会尝试“转换”解决方案。从头开始用 C# 构建它。它们是用不同的语言编写的，UI 不能重复使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T19:38:29.207

我怀疑一个工具可以帮助您做到这一点，如果该工具存在，我预计生成的 C# 代码会非常糟糕。Excel 的优势之一是它允许非常灵活的编程风格。缺点是生成的代码几乎没有结构，这使得人类和机器都难以遵循。最重要的是，逻辑可以采用多种形式，从 Excel 公式到 VBA 宏，这使事情变得复杂。

相比之下，C# 倾向于以类的形式看待世界，它们具有非常具体的职责。程序本质上协调类之间的消息传递，以便它们可以“相互交谈”并协作完成工作。

在这种情况下，我最多希望翻译工具产生一些令人不快的 C# 程序。最后，电子表格（没有 VBA）是一组位于单元格中并链接在一起的函数，没有足够的结构来提取具有功能的有意义的类/实体。

此外，我认为重新思考这个应用程序是一个机会。Web 应用程序可以轻松完成 Excel 无法完成的事情，反之亦然。我会专注于保留应用程序的精神，而不是“逐字逐句”的紧密翻译，但在设计它时不会过多考虑原始 Excel 应用程序。

拥有 Excel 应用程序的好处是您已经有了概念证明。我不会尝试转换代码，而是简单地追踪对其他计算字段有影响的所有输入点（可能使用审计），列出/图表影响什么（可能使用简单的气泡和箭头图），并尝试用简单的英语描述用户正在尝试做什么，以及用“实体”来描述正在发生的事情。例如`=A2*(1-A3)`，我会说“产品净成本是它的成本时间（1 - 折扣率）”，而不是 。而不是`=SUM(A5:A32)`，我会说“用户想要一个他订购的产品成本的摘要，它应该显示他的订单的总成本，以便他可以概览他的订单”。如果您设法提取具有良好名称和用例的域描述，这将更有利于开发人员在您可能想要的任何平台上编写支持这些要求的最佳应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T12:13:15.867

也许你可以使用谷歌文档。它允许创建脚本和使用公式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T04:46:21.913

我同意法比奥帕戈蒂。即使有一个神奇的“转换器”，谁敢在未来的更新中维护这个机器编码的应用程序？

考虑您的第二个问题，寻找替代帮手，[我发现](http://www.mrexcel.com/articles/show-formulas-in-cells.php)[ **CTRL]+[`]**组合键可以帮助您解决此问题：此快捷方式显示单元格中的所有公式，因此您可以更舒适后面没有遗漏任何东西。我希望。

PS：文本文件？只需应用快捷方式并将工作表“打印”到 PDF 文件即可。

# c# - 如何从 c# .net 客户端下拉框中的存储过程中获取数据？

> ID：11805870
> 
> 赞同：0
> 
> 时间：2012-08-04T04:21:40.993
> 
> 标签：c#, .net

如何从 c# .net 客户端下拉框中的存储过程 n 中获取数据？我必须尝试以下代码，但这对我不起作用.. :( 谁能告诉我这里出了什么问题？

```
 <div id="test-area">
        <table border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td>
                    <asp:DropDownList ID="DropDownEventType"  runat="server" CssClass="dropDownEventType" DataSourceID="spdropDownEventType">
                        <asp:ListItem></asp:ListItem>
                    </asp:DropDownList>
                    <asp:AccessDataSource 
                        ConnectionString="<%= ConnectionStrings:ApplicationServices %>"
                        SelectCommand="app_Event_Type_Select" 
                        SelectCommandType="StoredProcedure"  
                        ID="spdropDownEventType" 
                        runat="server"></asp:AccessDataSource>
                </td>
            </tr>
        </table>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T04:34:40.353

1.  尝试将 DataTextField 和 DataValueField 添加到 DropDownList。

2.  删除属性`ConnectionString`，并设置`DataFile`preporty codebehind。不能`<%= %>`在服务器端控件属性中使用，会导致解析错误

aspx

```
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td>
            <asp:DropDownList ID="DropDownEventType"  runat="server" CssClass="dropDownEventType" DataSourceID="spdropDownEventType" 
                DataTextField="yourEventName" 
                DataValueField="yourEventValue">
            </asp:DropDownList>
            <asp:AccessDataSource 
                SelectCommand="app_Event_Type_Select" 
                SelectCommandType="StoredProcedure"  
                ID="spdropDownEventType" 
                runat="server"></asp:AccessDataSource>
        </td>
    </tr>
</table> 
```

CS：

```
protected void Page_Load(object sender, EventArgs e)
{
    spdropDownEventType.DataFile = "your access db file path";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:35:05.220

你可以查看这篇文章：[http ://forums.asp.net/t/1486795.aspx/1](http://forums.asp.net/t/1486795.aspx/1)

在代码隐藏中，您需要这样的东西：

```
DropDownEventType.DataTextField="TextFieldColumnName"
DropDownEventType.DataValueField="ValueFieldColumnName"
DropDownEventType.DataBind() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T04:51:23.980

```
 <div id="test-area">
    <table border="0" cellpadding="0" cellspacing="0">
        <tr>
            <td>
                <asp:DropDownList ID="DropDownEventType"  runat="server" CssClass="dropDownEventType" DataSourceID="spdropDownEventType">
                    DataTextField="Name" 
                    DataValueField="EventTypeID">
                </asp:DropDownList>
                <asp:AccessDataSource 
                    ConnectionString="<%= ConnectionStrings:ApplicationServices %>"
                    SelectCommand="app_Event_Type_Select" 
                    SelectCommandType="StoredProcedure"  
                    ID="spdropDownEventType" 
                    runat="server"></asp:AccessDataSource>
            </td>
        </tr>
    </table>

</div> 
```

或者

在后面的代码中绑定下拉

```
DropDownEventType.DataSource = datable value;   
DropDownEventType.DataTextField="Name";
DropDownEventType.DataValueField="EventTypeID";
DropDownEventType.DataBind(); 
```

# ember.js - 使用 ember 数据 findQuery 的结果作为 ArrayController contentBinding

> ID：11805871
> 
> 赞同：2
> 
> 时间：2012-08-04T04:21:59.700
> 
> 标签：ember.js, ember-data

我正在尝试编写我的第一个“真正的”ember 应用程序。我已经阅读了几个教程，现在我正在尝试将 ember 与 Ember Data 结合使用来从 Rails 应用程序获取数据并显示它。

我已经得到它来获取数据，解析它并显示它，尽管我不相信它是最好的方式。我有一个`App.itemsController`与此类似的：

```
App.itemsController = Em.ArrayController.create({
  content: App.store.findQuery(App.Item, {visible: true}),
}); 
```

我也有一个`App.ItemIndexView`，它的模板看起来像

```
{{#each App.itemsController}}
    {{id}}{{view App.ItemView item=this}}
{{/each}} 
```

我对此有几个问题。

首先，我想允许用户将项目可见性更改为 false。我在`App.ItemView`文件中有这段代码：

```
acknowledge: function() {
  this.item.set('visible', false);
  App.store.commit();
} 
```

记录得到更新，但是我希望整个项目从视图中删除，但它没有。如何使此记录从中删除`App.itemsController.content`？

我的第二个问题，实际上也可以回答第一个问题，就我的实现而言，我是否完全置身于荒野之中？我觉得应该有一种方法可以让我设置类似的东西`contentBinding: 'App.store.findQuery(App.Item, {visible: true})'`并删除不可见的东西，但我已经尝试过了，但没有任何显示。因此，我想知道我的整个应用程序设置方式是否存在缺陷，并且无法正常运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:55:58.730

您可以使用该`filter`功能代替`findQuery`：

```
content: App.store.filter(App.Item, function (item) {
  return item.get('visible');
}) 
```

当基础数据发生变化时，将重新评估结果。不过，您仍然必须通过 find/findAll/findQuery 从服务器获取数据。

# c - 计算插入排序中的交换次数

> ID：11805874
> 
> 赞同：1
> 
> 时间：2012-08-04T04:22:28.583
> 
> 标签：c, algorithm, optimization, swap, insertion-sort

在[这里](https://www.interviewstreet.com/challenges/dashboard/#problem/4e90477dbd22b)给出的问题中，我必须计算总数。使用插入排序对数组进行排序时所需的交换次数。
这是我的方法

```
#include <stdio.h>
int main()
{
    int t, N, swaps, temp, i, j;
    scanf("%d", &t);

    while(t--){
        scanf("%d", &N);

        int arr[N];
        swaps = 0;

        for(i=0; i<N; ++i){

            scanf("%d", &temp);

            j=i;
            while(j>0 && arr[j-1] > temp){
                arr[j] = arr[j-1];
                ++swaps;
                --j;
            }

            arr[j] = temp;
        }
        printf("%d\n", swaps);
    }

    return 0;
} 
```

但是，这个解决方案超出了时间限制。

我怎样才能让它更快？
并且，这个问题的其他更好的解决方案是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T21:08:41.103

这是一个名为**反转计数的标准问题**

这可以使用 O(n*lg(n)) 中的归并排序来解决。这是我计算反转的代码

```
int a[200001];
long long int count;
void Merge(int p,int q,int r)
{
    int n1,n2,i,j,k,li,ri;
    n1=q-p+1;
    n2=r-q;
    int l[n1+1],rt[n2+1];
    for(i=0;i<n1;i++)
        l[i]=a[p+i];
    for(i=0;i<n2;i++)
        rt[i]=a[q+1+i];
    l[n1]=LONG_MAX;
    rt[n2]=LONG_MAX;
    li=0;ri=0;
    for(i=p;i<=r;i++)
    {
        if(l[li]<=rt[ri])
            a[i]=l[li++];
        else
        {
            a[i]=rt[ri++];
            count+=n1-li;
        }
    }
}
void mergesort(int p,int r)
{
    if(p<r)
    {
        int q=(p+r)/2;

        mergesort(p,q);
        mergesort(q+1,r);
        Merge(p,q,r);
    }
}    
int main()
{
    scanf("%d",&n);
    for(i=0;i<n;i++)
        scanf("%d",&a[i]);
    count=0;
    mergesort(0,n-1);
    printf("%lld\n",count);
} 
```

基本上反转计数的问题是找到否。对 i 和 j 其中 j>i 使得 a[i]>a[j]

要了解这背后的想法，您应该了解基本的归并排序算法

> [http://en.wikipedia.org/wiki/Merge_sort](http://en.wikipedia.org/wiki/Merge_sort)

主意：

使用分而治之

除：序列n的大小到两个大小为n / 2的列表征服：递归计算两个列表组合：这是一个技巧部分（在线性时间内完成）

结合使用合并和计数。假设这两个列表是 A，B。它们已经排序。从 A、B 生成输出列表 L，同时还计算反转次数 (a,b)，其中 a 在 A 中，b 在 B 中，并且 a>b。

这个想法类似于合并排序中的“合并”。将两个排序的列表合并为一个输出列表，但我们也计算反转。

每次将 a_i 附加到输出时，都不会遇到新的反转，因为 a_i 小于列表 B 中剩余的所有项。如果将 b_j 附加到输出，则它小于 A 中的所有剩余项，我们增加按 A 中剩余元素数计算的反转计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T04:52:48.613

这让我想起了您可能想查看的类似问题：[http ://www.spoj.pl/problems/YODANESS/](http://www.spoj.pl/problems/YODANESS/)

在您的问题中，如果需要多次交换，您将没有时间交换所有内容。（想象一下，如果输入的顺序是相反的 9,8,7,6.. 那么您基本上必须将所有内容与所有内容交换。

我认为在你的情况下，每个数字都必须与它左边小于它的所有数字交换。

我建议你使用范围树[http://en.wikipedia.org/wiki/Range_tree](http://en.wikipedia.org/wiki/Range_tree)

范围树的好处是每个节点都可以知道它的左边和右边有多少个节点。您可以非常有效地询问树“有多少数字大于 10”，这就是您对 9 说的有多少交换。

诀窍是在从 i=0 移动到 i=N-1 时构建范围树。在将第 i 个数字插入范围树之前，您可以在每个点查询第 i 个数字的树。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T13:46:49.767

我在 C++ 中做了同样的代码，它被接受了，在 spoj 上花费了大约 4.2 秒（[http://www.spoj.com/submit/CODESPTB/](http://www.spoj.com/submit/CODESPTB/)）。

这是代码片段：

```
//http://www.spoj.com/problems/CODESPTB/
//mandeep singh @msdeep14
#include<iostream>
using namespace std;
int insertionsort(int arr[], int s)
{
	int current,i,j,count=0;
	for(i=1;i<s;i++)
	{
		current=arr[i];
		for(j=i-1;j>=0;j--)
		{
			if(current<arr[j])
			{
				arr[j+1]=arr[j];
				count++;
			}
			else
				break;
		}
		arr[j+1]=current;
	}
	return count;
}
int main()
{
	int t,n,i,res;
	int arr[100000];
	cin>>t;
	while(t--)
	{
		cin>>n;
		for(i=0;i<n;i++)
		{
			cin>>arr[i];
		}
		res=insertionsort(arr,n);
		cout<<res<<endl;
	}
	return 0;
}
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-26T13:01:40.787

```
#include < stdio.h >
int main() {
   int N, swaps, temp[100], i, j;
   scanf("%d", & N);
   int arr[N];
   swaps = 0;
   for (i = 0; i < N; i++) {
       scanf("%d", & temp[i]);
       j = i;
       while (j > 0 && arr[j - 1] > temp[i]) {
           arr[j] = arr[j - 1];
           ++swaps;
           --j;
       }
       arr[j] = temp[i];
   }
   printf("%d", swaps);
   return 0;
} 
```

# c# - 将rtsp流转换为http流

> ID：11805876
> 
> 赞同：3
> 
> 时间：2012-08-04T04:23:16.320
> 
> 标签：c#

在 c# 中是否有可能使用 rtsp 视频流“System.net.httpwebrequest”如果不是请告诉我另一种选择。// 下载文件的 URL

```
 string basepath = @"rtsp://ip.worldonetv.com:1935/live/ ";

        // the path to write the file to

        //            string sFilePathToWriteFileTo = "d:\\Download";

        // first, we need to get the exact size (in bytes) of the file we are downloading

        Uri url = new Uri(basepath);

        System.Net.HttpWebRequest request = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(url);

        System.Net.HttpWebResponse response = (System.Net.HttpWebResponse)request.GetResponse();

        response.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:12:36.957

您可以使用我的库制定 RtspRequests。

然后，您可以对 RtspRequest 进行 base64 编码，并将其作为 HttpRequest 的主体。

在正文中添加`content-length`与 base64 编码的 rtsp 请求的长度相等的标头。

将标头添加`rtsp/x-tunneled`到 HttpRequest，然后将其发送。

您应该返回一个 HttpResponse，其正文包含 base64 编码的 RtspResponse。

Base64 解码 HttpResponse 的正文，然后使用我库中的 RtspResponse 类对其进行解析。

该库是[@http://net7mma.codeplex.com/](http://net7mma.codeplex.com/)

还有一篇codeproject文章@http [://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp](http://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp)

如果您还需要什么，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:55:42.850

没有标准的 C# 库可以做到这一点。您甚至无法使用各种 .NET DirectShow 包装器来做到这一点。我刚让一位同事在这个问题上花了一个月的时间，他最终在 GStreamer 上编写了自己的 C# 包装器。如果您打算显示视频，最简单的选择是嵌入 VLC ActiveX 控件。

# java - 在数组中建立 Happens-Before

> ID：11805878
> 
> 赞同：1
> 
> 时间：2012-08-04T04:23:59.933
> 
> 标签：java, multidimensional-array, synchronization, happens-before

有一个快速同步的问题，这是我的：

a) **Class1**有一个并发散列映射，定义如下：

```
ConcurrentMap<String, int[][]> map  = new ConcurrentHashMap<String, int[][]>(); 
```

b) **Class2**有一个线程，称为**Thread1**。Thread1 创建一个**Id**并检查**map**是否包含它。如果是，则检索值 (int[][])，修改内容并将其放回原处。如果没有，它会创建一个新的 int[][] 并存储它。这个检查->修改/创建的过程经常发生。

```
 private class Thread1 implements Runnable{

            public void run(){
                //keepRunning is volatile
                while( keepRunning ){

                  String id     = "ItemA";
                  int[][] value = map.get(id);

                  //If value is null, create an int[][] and put it back as value for Id
                  //If value is not null, modify the contents according to some logic  
                 }
             }
    } 
```

c) 最后，我有另一个线程，称为**Thread2**。这个线程接受一个 id，检查地图是否有它的值。如果没有，什么都不会发生。如果是这样，那么它将 int[][] 中的值相加，并使用该数字进行一些计算（此处没有修改）。

我想弄清楚我的操作是否是原子的。b) 中的操作很好，因为数组的创建/修改和插入映射仅限于一个线程（**Thread1**）。

此外，由于插入到映射中建立了先发生操作，这将确保 c) 将在 int[][] 中看到更新的值。

但是，我不太确定如果 Thread2 在映射中查找相同的 int[][] 并尝试在 Thread1 修改它时对其进行总结会发生什么。

我认为 Thread2 会在 int[][] 中看到旧的（但未损坏的）值是否正确。原因是在 Thread1 完成将值放回映射之前，新的修改不会对 Thread2 可见。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T04:35:16.213

您的操作不是原子的，线程 2 将在线程 1 修改它们时尝试对这些值求和。

为避免这种情况，您需要复制原始文件并修改副本并放回副本。

# cocoa-touch - 仅 UITextField 文本

> ID：11805883
> 
> 赞同：0
> 
> 时间：2012-08-04T04:25:16.510
> 
> 标签：cocoa-touch, uitextfield

我正在尝试制作一个用于名称的 UITextField，但无法弄清楚如何将其仅限于字母。我知道只有数字是可能的，但是字母怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T04:45:41.870

使用委托并实现：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

在此处验证替换字符串。

# php - 如何使用 dblib 从 PHP 连接到 SQL Server 2008 R2

> ID：11805885
> 
> 赞同：0
> 
> 时间：2012-08-04T04:25:32.273
> 
> 标签：php, database

我正在使用以下代码行从 PHP 连接到 SQL Server 2008 版本：

```
$dbh = new PDO('dblib:host=xx.xx.xx.xx;port=xxxx;dbname=xxxxxx', 'username', 'password'); 
```

从这里我得到：

```
Error!: SQLSTATE[HY000] Unable to connect: 
Adaptive Server is unavailable or does not exist (severity 9) 
```

以上数据库设置`pdo_mssql`在开发机器上可以正常工作，但 Bluehost 不支持`pdo_mssql`.

我在共享主机 (Bluehost) 上，因此无法管理服务器/主机。

如果这是不可能的，那么任何人都可以推荐一个支持的替代托管服务提供商`pdo_mssql`吗？

# applescript - AppleScript 输出中的奇怪字符

> ID：11805888
> 
> 赞同：0
> 
> 时间：2012-08-04T04:25:53.653
> 
> 标签：applescript, text-formatting

我有这个 AppleScript，它返回 iTunes 中当前正在播放的艺术家的名字。不幸的是，如果艺术家姓名包含特殊字符，如 ú，则会输出奇怪的字符。我怎样才能解决这个问题？

```
tell application "iTunes"
    if player state is playing then
        try
            set myTrack to artist of current track
        on error
            return ""
        end try
        return myTrack
    end if
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T21:06:57.200

Unicode 字符通常不会导致任何问题：

```
tell application "iTunes" to tell current track
    set name to "あ"
    name -- あ
end tell 
```

您的某些文件的 ID3 标记可能有一些非 Unicode 编码。我不知道如何处理 AppleScript 中的问题，但您可以尝试将标签转换为 UTF-8 吗？请参阅[https://superuser.com/questions/90449/repair-encoding-of-id3-tags](https://superuser.com/questions/90449/repair-encoding-of-id3-tags)或[http://code.google.com/p/id3-to-unicode/](http://code.google.com/p/id3-to-unicode/)。

# android - android：如何在我的应用程序中实现像 Go Launcher 这样的第一次教程？

> ID：11805890
> 
> 赞同：90
> 
> 时间：2012-08-04T04:26:07.843
> 
> 标签：android, android-layout

Go Launcher 有一个很好的第一次教程。它与 Stock ICS 第一次运行非常相似。我想学习如何在我的应用程序首次启动时显示类似的教程。如何在我的 android 应用程序中实现这个透明视图（与屏幕对象交互）？

![第一张图片](../Images/450cfef7a5f18c0bc6854176be3b92af.png) ![第二张图片](../Images/761ec4d7e9ed08d72372ea876d8ad6cc.png)

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-01T00:35:06.663

我试图用一个透明的活动来做[类似的事情](https://stackoverflow.com/questions/12013334/how-do-you-create-a-transparent-demo-screen-for-an-android-app)，里面有一个viewpager。我想要用户可以浏览的静态“教程”图像。

我的问题的一个答案提到了一个有趣的库（称为 ShowcaseView）。它似乎也很适合您的要求。

[https://github.com/Espiandev/ShowcaseView](https://github.com/Espiandev/ShowcaseView)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T22:03:05.217

您可以使用 FrameLayout 或 RelativeLayout 作为 Activity/Fragment 的根，并将“第一次”视图放在具有（几乎）透明背景的内容上，或者使用另一个以半透明窗口为主题的 Activity/Fragment。（[像这样](https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android)）

我宁愿使用活动/片段，但这取决于你！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-15T13:04:57.590

我写了一个小库，其中包含一个用于制作应用程序的简单组件。这仅限于我的情况，但也许可能是你的情况。Single LessonCardView 首次显示 onstartactivity 或按钮单击 任何批评、帮助或建议将不胜感激。谢谢[https://github.com/dnocode/DnoLib](https://github.com/dnocode/DnoLib)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-23T06:10:34.073

您可以使用 TakuSemba 的 Spotlight 库实现首次用户指南。

它与上面共享的类似，并且仍然维护良好（截至 2021 年）。

[https://github.com/TakuSemba/Spotlight](https://github.com/TakuSemba/Spotlight)

# ruby-on-rails - rails 查找帖子的 user_id = user 的所有评论

> ID：11805891
> 
> 赞同：3
> 
> 时间：2012-08-04T04:26:09.987
> 
> 标签：ruby-on-rails, ruby, activerecord

这里的查询有点复杂。三个相关表：用户、帖子和评论。用户有_很多帖子和评论，帖子属于_用户和有_很多评论，评论属于_一个用户和一个帖子。也就是说，我正在 Rails 中尝试在我的控制器中查找用户在其所有帖子中收到的所有评论。我试过这个：

```
@comments = Comment.where(:post_id.user => @user.id) 
```

但这并没有真正奏效。这可能是一个简单的解决方案，帮助？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T04:37:33.230

您必须为此[加入](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)帖子表：

```
@comments = Comment.joins(:post).where(:posts => { :user_id => @user.id }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:21:31.580

您还可以执行以下操作：

```
@user = User.find(@user.id, :include => :comments)

<% @user.comments.each do |comment| %>
   <%= comment.id %> <br/>
   <%= comment.text %>
<% end %> 
```

# c# - masterpage initializeculture 找不到合适的方法来覆盖错误？

> ID：11805897
> 
> 赞同：11
> 
> 时间：2012-08-04T04:27:46.670
> 
> 标签：c#, calendar

我正在尝试使用带有 C# 的 ASP.NET 开发一个多语言网站我的问题是：我想让我的 MasterPage 支持语言之间的切换，但是当我将“InitializeCulture()”放在 masterpage.cs 中时，我得到了这个错误。

这是我的代码：

```
public partial class BasicMasterPage : System.Web.UI.MasterPage
{
protected void Page_Load(object sender, EventArgs e)
{

}
protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
{
    if (e.Day.IsToday)
    {
        e.Cell.Style.Add("background-color", "#3556bf");
        e.Cell.Style.Add("font-weight", "bold");
    }
}
Dictionary<string, System.Globalization.Calendar> Calendars =
    new Dictionary<string, System.Globalization.Calendar>()
    {
        {"GregorianCalendar", new GregorianCalendar()},
        {"HebrewCalendar", new HebrewCalendar()},
        {"HijriCalendar", new HijriCalendar()},
        {"JapaneseCalendar", new JapaneseCalendar()},
        {"JulianCalendar", new JulianCalendar()},
        {"KoreanCalendar", new KoreanCalendar()},
        {"TaiwanCalendar", new TaiwanCalendar()},
        {"ThaiBuddhistCalendar", new ThaiBuddhistCalendar ()}
    };

protected override void InitializeCulture()
{
    if (Request.Form["LocaleChoice"] != null)
    {
        string selected = Request.Form["LocaleChoice"];
        string[] calendarSetting = selected.Split('|');
        string selectedLanguage = calendarSetting[0];

        CultureInfo culture = CultureInfo.CreateSpecificCulture(selectedLanguage);

        if (calendarSetting.Length > 1)
        {
            string selectedCalendar = calendarSetting[1];
            var cal = culture.Calendar;
            if (Calendars.TryGetValue(selectedCalendar, out cal))
                culture.DateTimeFormat.Calendar = cal;
        }

        Thread.CurrentThread.CurrentCulture = culture;
        Thread.CurrentThread.CurrentUICulture = culture;
    }
    base.InitializeCulture();
}
} 
```

如何创建基类？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T13:30:52.277

该方法`InitializeCulture()`仅存在于[Page](http://msdn.microsoft.com/en-us/library/system.web.ui.page.aspx)类中，而不存在于[MasterPage](http://msdn.microsoft.com/en-us/library/system.web.ui.masterpage)类中，这就是您收到该错误的原因。

要解决此问题，您可以创建一个`BasePage`所有特定页面都继承的：

1.  创建一个新类（不是 Webform），调用它`BasePage`，或者任何你想要的。
2.  使其继承[System.Web.UI.Page](http://msdn.microsoft.com/en-us/library/system.web.ui.page.aspx)。
3.  让所有其他页面继承`BasePage`.

这是一个例子：

```
public class BasePage : System.Web.UI.Page
{
    protected override void InitializeCulture()
    {
        //Do the logic you want for all pages that inherit the BasePage.
    }
} 
```

特定页面应如下所示：

```
public partial class _Default : BasePage //Instead of it System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        //Your logic.
    }

    //Your logic.
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-10T23:20:00.917

**有一个替代解决方案不需要您创建 BasePage。**

“文化”的问题在于它在页面生命周期的早期设置，因此该`Page.InitializeCulture`事件是页面上的早期事件之一（如果不是唯一的），我们可以在其中连接以更改`Thread.CurrentThread.CurrentUICulture`. 但是如果我们更早地这样做，只要请求在服务器上开始。

我对每个请求调用`Application_BeginRequest`的文件事件执行此操作。`Global.asax`

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
  HttpCookie cookie = Request.Cookies["langCookie"];
  if (cookie != null && !string.IsNullOrEmpty(cookie.Value))
  {
    Thread.CurrentThread.CurrentUICulture = new CultureInfo(cookie.Value);
  }
} 
```

在那里，我检查是否存在包含我想要使用的文化的 cookie。如果没有 cookie，则将使用默认区域性。

要更改我的应用程序的语言，我只需要一个控件来更改客户端的 cookie 值，然后对服务器进行简单的回发。这种控制是在内容页还是母版页上都没有关系，它甚至不需要服务器端的任何代码，因为所有的处理都是在上面的方法上完成的，并且cookie被设置为甚至在页面发布之前的客户端。

我使用了一个简单的 LinkBut​​ton（其样式为墨西哥国旗），但您可以使用任何其他在单击/更改时执行回发的控件。

```
<asp:LinkButton ID="btnSpanish" runat="server" OnClientClick="SetLanguageCookie('es')" CausesValidation="false" CssClass="mxFlag" /> 
```

在此按钮回传到服务器之前，它会运行客户端单击事件，该事件会更新我要设置的 cookie 值，瞧！

我有在母版页头部部分设置 cookie 的 javascript 代码：

```
function SetLanguageCookie(selectedLanguage) {
  var expDate = new Date();
  expDate.setDate(expDate.getDate() + 20); // Expiration 20 days from today
  document.cookie = "langCookie=" + selectedLanguage + "; expires=" + expDate.toUTCString() + "; path=/";
}; 
```

就是这样！！`Thread.CurrentThread.CurrentUICulture`得到更改，不需要`BasePage`类也不需要覆盖该方法`Page.InitializeCulture`。甚至还有一个副作用，即选择的语言会在后续访问时被记住，因为它存储在 cookie 中。

如果您想使用 a`DropDownList`而不是 a `LinkButton`，只需确保设置`AutoPostBack="true"`and，因为 没有`OnClientChanged`属性`DropDownList`，您必须硬编码 上的`onchange`属性`DropDownList`并将所选值传递给相同的 javascript 函数。

```
<asp:DropDownList ID="ddlLanguage" runat="server" AutoPostBack="true" onchange="SetLanguageCookie(this.options[this.selectedIndex].value)">
  <asp:ListItem Text="English" Value="en" />
  <asp:ListItem Text="Español" Value="es" />
  <asp:ListItem Text="Français" Value="fr" />
</asp:DropDownList> 
```

但是，该`onchange`属性不是属性的一部分`DropDownList`，因为`DropDownList`是该控件的模拟控件`<select>`，因此该属性只是在呈现时“按原样”放置，并且在回发机制代码之前呈现。这是上面呈现的 HTML `DropDownList`：

```
<select name="ctl00$cph1$ddlLanguage" onchange="SetLanguageCookie(this.options[this.selectedIndex].value);setTimeout(&#39;__doPostBack(\&#39;ctl00$cph1$ddlLanguage\&#39;,\&#39;\&#39;)&#39;, 0)" id="cph1_ddlLanguage">
  <option value="en">English</option>
  <option value="es">Español</option>
  <option value="fr">Français</option>
</select> 
```

希望有人发现这种方法和我一样有用。:)

# jquery - $.parseJSON(data) 不工作

> ID：11805904
> 
> 赞同：0
> 
> 时间：2012-08-04T04:29:48.670
> 
> 标签：jquery, json

我知道这里有很多这个问题。我花了一整天的时间来搜索同一个问题。没有什么可以回答我的！所以，请不要关闭这句话，我只是在重复。
我有一个与另一个 js 文件在同一页面上调用的 PHP 文件，这个 PHP 文件对一个数组进行编码并在同一页面上回显它（即从 ajax 请求调用它时），如下所示：

```
$data = array(  
    "status" => $status,  
    "message" => $message,
);  

echo json_encode($data); 
```

$status 和 $message 的值是由它们上面的一些条件决定的（这些条件在这里并不重要）。这个 PHP 文件在索引文件的顶部被调用，这意味着 JSON 在`<!doctype html>`标签之前被回显。现在，在 js 文件中，这是我尝试处理这个 JSON 的部分：

```
$.post($formUrl, $formData, function(data) {
  $data = $.parseJSON(data);
  alert($data.status);
}); 
```

不要担心变量，它们不是问题。这里唯一的问题是`$data = $.parseJSON(data);`零件。当我运行这段代码时。成功后什么都没有发生，但是在 PHP 文件中，有一个插入到数据库的命令可以正确执行。一切正常，除了这个 JSON，我无法得到它！当我尝试这个时：

```
$.post($formUrl, $formData, function() {
  $str = '{"a":1,"b":2,"c":3,"d":4}';
  $data = $.parseJSON($str);
  alert($data.a);
}); 
```

它按预期工作，它发出警报 1。所以我认为问题在于，`$.parseJSON()`无法解析其中包含 JSON 的 HTML 文件，因为正如我告诉你的那样，PHP 文件在 `< !doctype html >` .
我现在好绝望。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T04:48:21.177

这里的问题是您正在从您的 PHP 脚本中输出 JSON 到一个也回显 HTML 的页面上。您需要一个专门回显 JSON 的 PHP 脚本。此外，在您的 PHP 文件中，您可能希望发送 JSON MIME 类型：

```
header("Content-type: application/json"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T04:54:07.373

尝试在 json_encode 之后立即进行骰子。您可以将整个事情包装在一个 if 语句中，该语句将检查 $_POST 是否为空。所以在第一次加载时，你只会得到 html，但在 ajax 发布时，你只会得到 json。

也尝试使用这个：

```
$.ajax({
    url: $url,
    data: $formData,
    type: "POST",
    dataType: "json", // this tells jquery to expect json back, and parses it automatically
    success: function(data) { alert(data.status) }  
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T04:55:04.760

我想你可以很容易地做到这一点..

发送第四个`json`参数`$.post()`for `dataType`。

```
$.post($formUrl, $formData, function(data) {

  // after specifying the dataType you 
  // don't need to parse is manually by $.parseJSON()
  // jQuery will parse it for you

  // $data = $.parseJSON(data); //  remove this line

  console.log(data);

}, 'json'); 
```

的语法**[`$.post()`](http://api.jquery.com/jQuery.post/)**是：

```
$.post( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] ) 
```

你必须指定最后一个参数`dataType`。

# magento - Magento Sagepay 直接发行

> ID：11805908
> 
> 赞同：0
> 
> 时间：2012-08-04T04:31:48.297
> 
> 标签：magento, opayo

我有 sagepay 帐户。我收到错误状态：无效

状态详细信息：4006：此帐户不支持请求的 TxType。

我正在使用 Ebizmart 的 Magento 扩展。请尽快给我一些想法。

谢谢，开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:18:21.187

这是一个真实的帐户吗？如果它只是一个 TEST 帐户并且您正在发布到 LIVE url，您将收到此消息。您必须要求 Sage Pay 进行实时切换。

您必须联系 Sagepay 并要求他们启用 TxType 字段中的交易类型。

# polygon - 通过在 Google 地图中连接折线来创建多边形

> ID：11805910
> 
> 赞同：0
> 
> 时间：2012-08-04T04:32:32.337
> 
> 标签：polygon

我们正在尝试使用谷歌地图或地球创建城市中各个区域的边界地图。为每个区域创建多边形会使公共边界在缩放时看起来不同。因此，我们计划用折线创建线段（共享边界）。但是，这需要连接多条折线（边界线段）以创建具有多边形属性的区域（闭合边界）。我没有任何选择可以做到这一点。谁能帮助我们解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:07:47.570

尝试查看这些链接，它可能会有所帮助示例： http: [//gmaps-samples-v3.googlecode.com/svn/trunk/drawing/drawing-tools.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/drawing/drawing-tools.html)

文档： [https ://developers.google.com/maps/documentation/javascript/overlays#drawing_tools](https://developers.google.com/maps/documentation/javascript/overlays#drawing_tools)

# dll - 在 DLL 类中使用 XNA Math

> ID：11805913
> 
> 赞同：0
> 
> 时间：2012-08-04T04:32:53.570
> 
> 标签：dll, directx, xna-math-library

我在创建的 DLL 中使用 XNA Math 时遇到问题。我有一个在 DLL 中的类，将被导出。它有一个 XMVECTOR 类型的成员变量。在类构造函数中，我尝试初始化 XMVECTOR。我从读取位置 0x0000000000 读取时遇到访问冲突

代码运行如下：

```
class DLLClass 
{
public:
    DLLClass(void);
    ~DLLClass(void);
protected:
    XMVECTOR vect;
    XMMATRIX matr;
}

DLLClass::DLLClass(void)
{
    vect = XMLoadFloat3(&XMFLOAT3(0.0f, 0.0f, 0.0f));    //this is the line causing the access violation
} 
```

请注意，此类位于将要导出的 DLL 中。我不知道这是否会通过一些进一步的信息有所作为。

另外，当我这样做时，我还有一个问题：

我也收到警告：struct '_XMMATRIX' 需要有 dll-interface 供类 'DLLClass' 的客户端使用

这是致命的吗？如果不是，这是什么意思，我该如何摆脱它？请注意，此 DLLClass 将被导出，并且 DLLClass 的“客户端”可能会使用变量“matr”。

任何帮助，将不胜感激。

编辑：只是一些进一步的信息：我已经逐行调试了代码，似乎在将 XMLoadFloat3 的返回值分配给 vect 时发生了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-04T01:50:12.413

仅当您使用 x64 本机构建时，此代码才是合法的 - 或者 - 如果您用于`__aligned_malloc`确保 DLLClass 的所有实例的内存都是 16 字节对齐的。x86（32 位）`malloc`并且`new`默认仅提供 8 字节对齐。你可以“走运”，但它并不稳定。

```
class DLLClass 
{
public:
   DLLClass(void);
   ~DLLClass(void);
protected:
   XMVECTOR vect;
   XMMATRIX matr;
} 
```

请参阅**DirectXMath 编程指南**，[入门](https://msdn.microsoft.com/en-us/library/windows/desktop/ee418725(v=vs.85).aspx#type_usage_guidelines_)

你有三个选择：

1.  确保 DLLClass 始终是 16 字节对齐的
2.  使用`XMFLOAT4`and`XMFLOAT4X4`代替并执行显式加载/存储
3.  使用[DirectX Tool Kit中的](http://go.microsoft.com/fwlink/?LinkId=248929)[SimpleMath](http://blogs.msdn.com/b/shawnhar/archive/2013/01/08/simplemath-a-simplified-wrapper-for-directxmath.aspx)包装器类型来代替为您处理加载/存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:36:41.127

您不应该获取匿名变量的地址：

```
vect = XMLoadFloat3(&XMFLOAT3(0.0f, 0.0f, 0.0f)); 
```

你需要

```
XMFLOAT3 foo(0.0f, 0.0f, 0.0f);
vect = XMLoadFloat3(&foo); 
```

# hadoop - 你能知道有多少输入值在 Hadoop 中有一个 reducer 而无需对其进行迭代吗？

> ID：11805914
> 
> 赞同：1
> 
> 时间：2012-08-04T04:33:05.513
> 
> 标签：hadoop, mapreduce, hbase

我正在 Hadoop 中编写一个 Reducer，我正在使用它的输入值来构建一个对元素列表进行编码的字节数组。我在其中写入数据的缓冲区的大小取决于减速器接收到的值的数量。提前在内存中分配它的大小会很有效，但是如果不使用“foreach”语句对它们进行迭代，我不知道有多少值。

Hadoop 输出是一个 HBase 表。

**更新：** 使用映射器处理我的数据后，reducer 键具有幂律分布。这意味着只有少数几个键有很多值（最多 9000），但大多数只有几个值。我注意到通过分配一个 4096 字节的缓冲区，97.73% 的值适合它。对于其余的人，我可以尝试重新分配具有双倍容量的缓冲区，直到所有值都适合它。对于我的测试用例，这可以通过在最坏的情况下重新分配内存 6 次来完成，即一个键有 9000 个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T05:25:22.750

我假设您将在分配字节数组之后使用 for-each 来遍历它们，但是您不希望必须缓冲内存中的所有记录（因为您只能循环遍历您的迭代器从您的价值收集中取回一次）。因此，您可以

1.  运行一个计数归约器，输出每个输入记录，并将计数输出到与映射输出具有相同值类的记录，然后使用自定义排序对该结果运行“仅归约”作业，以放置计数第一个（推荐）
2.  覆盖您使用 Hadoop 获得的内置排序以在排序时计数并将该计数记录作为其输出的第一条记录注入（我并不完全清楚您将如何完成覆盖，但一切皆有可能）
3.  如果这些值是唯一的，您可能能够拥有一个有状态的排序比较器，它保留了它被调用的值的哈希值（这看起来非常h​​acky且容易出错，但我敢打赌，如果机制二级排序仅限于一个 JVM 中的一个类加载器）
4.  设计你的 reducer 以使用比字节数组更灵活的数据结构，并在必要时在输出之前将结果转换为字节数组（强烈推荐）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T01:21:07.877

您可以使用以下范例：

Map：每个映射器都保存一个从键到整数的映射，其中 M[k] 是使用某个键 k 发出的值的数量。在其输入结束时，映射还将发出键值对 (k, M[k])。

排序：使用二级排序，使对 (k, M[k]) 出现在对 (k, your values) 之前。

减少：假设我们正在查看密钥 k。然后reducer首先聚合来自不同映射器的计数M[k]以获得一个数字n。这是您要查找的号码。现在您可以创建数据结构并进行计算。

# fonts - FontMetrics - 使用 freetype2 的大写高度

> ID：11805916
> 
> 赞同：2
> 
> 时间：2012-08-04T04:33:08.447
> 
> 标签：fonts, freetype2

我正在尝试使用 freetype2 检索特定字体的大写高度，但我找不到通过 API 进行处理的方法。有谁知道这是否可能，如果可能，那么 api 调用是什么。如果没有，我可以使用任何其他字体库（java、c、python 等）吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T08:18:15.660

如果我错了，请纠正我，但这似乎对我有用：

```
int maxHeight = (face_->bbox.yMax >> 6) - (face_->bbox.yMin >> 6); 
```

# jquery - 如何使用 Jquery ajax 将文本区域中的字符串数据作为参数传递给 servlet？

> ID：11805920
> 
> 赞同：1
> 
> 时间：2012-08-04T04:33:58.023
> 
> 标签：jquery, ajax

我在 html 中有一个文本区域，用户将在其中粘贴一长串数据（带空格），这些数据需要输入到数据库中。用户将单击一个按钮上传，该按钮将调用一个 javascript 函数，我在其中给出一个 jquery ajax post 调用。这个 ajax 调用会将该参数传递给 url 中提到的 servlet。我不确定这里的语法，我想知道如何从 html textarea 传递数据作为输入参数。

**HTML**：

```
<textarea id = "string" rows = "20" cols = "120" > Please enter the data </textarea>
<input type = "button" value = "upload" onclick=  "UploadResult(getElementById('string'.val());" /> 
```

**Javascript**：

```
function UploadResult()
{
    var elementValue = $("#string").val();

    $.ajax({
        type: "POST",
        url: "servleturl.irpt?",
        data: "elementValue",
        success: function(msg){
            alert( "Data Saved: " + msg );
            alert(elementValue);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T04:37:08.130

你的变量有引号。如果您删除引号，并且我假设您的服务器需要 json，那么您需要这样格式化数据。

```
function UploadResult()
{
    var elementValue = $("#string").val();

    $.ajax({
        type: "POST",
        url: "servleturl.irpt",
        //data: "elementValue",
        data: {
            'variableNameExpectedByServer': elementValue
        },
        success: function(msg){
            alert( "Data Saved: " + msg );
            alert(elementValue);
        }
    });
} 
```

**编辑**：

正如 Ricardo Lohmann 所提到的，您还尝试将值传递到您的函数中，然后尝试在函数中再次获取它。在这种情况下，您应该执行以下操作：

**HTML**：

```
<input type="button" value="upload" 
    onclick="UploadResult(document.getElementByID('string').value);" /> 
```

**Javascript**：

```
function UploadResult(result)
{
    $.ajax({
        type: "POST",
        url: "servleturl.irpt",
        data: {
            'variableNameExpectedByServer': result
        },
        success: function(msg){
            alert( "Data Saved: " + msg );
            alert(elementValue);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T04:47:30.613

您正在使用`jQuery`，所以请不要将您的事件直接放在`html`.

**第一**：`UploadResult(getElementById('string'.val());`应该`UploadResult(document.getElementById('string').value); // missing ')'`。

**第二**：您正在传递 textarea 的值，但在您的函数上又得到了它。

**第三**：您将错误的数据传递给 ajax。`data: "elementValue"`应该`data: { 'elementValue': elementValue}`

**第四**：当你通过`data`ajax时你不需要`?`在设置a时使用`url`，所以`url: "servleturl.irpt?"`应该是`url: "servleturl.irpt"`

**html**

```
<div>
    <textarea id ="string" rows = "20" cols = "120" > Please enter the data </textarea>
    <input type ="button" value ="upload" id="submit"/>
</div> 
```

**js**

```
$('div').on('click', '#submit', function() {

    var elementValue = $("#string").val();

    $.ajax({
        type: "POST",
        url: "servleturl.irpt",
        data: {
            'elementValue': elementValue
        },
        success: function(msg) {
            alert( "Data Saved: " + msg );
            alert(elementValue);
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T15:43:12.243

也许你可以使用这个 jquery 插件：

[https://www.articlage.com/adrianillo/article/DataUploader](https://www.articlage.com/adrianillo/article/DataUploader)

您可以轻松上传大量文本。

首先从以下地址下载脚本：[https ://github.com/adrianillo/datauploader](https://github.com/adrianillo/datauploader)

添加对 JQuery 和 DataUploader 脚本的引用

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script  src="js/ajaxdatauploader.js"></script> 
```

初始化 DataUploader 后

```
jQuery.ajaxdatauploader(
{
    additional:,
    data:,
    pagerequest:,
    piecelenght:,
    encodedata:,
    success: function (datauploader, status){ 
    }
    error: function (req, status, error) {               
    }
  }
); 
```

**aditional**：您要发送到服务器的附加数据，在这里您可以设置一个标识符来发送什么数据。

**data**：要发送到服务器的数据。

**pagerequerest** : 发送数据的页面 (aspx, php, jsp, ...)。

**encodedata**：如果为 true，则通过将所有特殊字符替换为其 UTF-8 转义序列来对数据进行编码。在服务器上将不得不解码数据。EG in aspx: HttpUtility.UrlDecode data = (data);

**piecelenght** : 要发送的件的大小。DataUploader 将数据分成几部分，然后发送到服务器。

当发送这个的数据处理完成时，它会接受函数：'success'。如果出现问题并且无法完成数据发送，则会导致“错误”功能。

最后服务器一块一块地收集数据，直到完成

# mysql - Cygwin w/ MySQL SELECT：找不到命令...正在运行外部 .sql 文件

> ID：11805930
> 
> 赞同：0
> 
> 时间：2012-08-04T04:36:54.220
> 
> 标签：mysql, cygwin

我对 Cygwin 很陌生，但我一直在使用 Windows 命令提示符来运行我的 MySQL 问题并毫无问题地处理外部 MySQL 查询。

我升级到 Cgywin，因为它只是一个更好的界面，有更多的选项。

我在这里调用了一个外部脚本：E:/dir/test.sql .. 当我在 MySQL CLI 下以相同的方式运行查询时，我想注意这个 test.sql 在 Windows 命令提示符下完美运行。MySQL 服务器已按预期安装并运行。

```
$ \. E:/dir/test.sql
-bash: SELECT: command not found
-bash: ,: command not found
-bash: ,: command not found
-bash: ,: command not found
-bash: ,: command not found
-bash: ,: command not found
-bash: ,: command not found
-bash: E:/dir/test.sql: line 9: syntax error near unexpected token `concat'
-bash: E:/dir/test.sql: line 9: `INSERT(concat(b.geo_state, replace("b.mtr", ' ', ''), 
 ' 
```

经过一番研究，我发现如果我运行：$ which mysql，我得到一个类似 linux 的路径：/usr/bin/mysql，我能想到的只是我的 mysql.exe 在不同的目录中，这可能是所有问题是。

但我不知道或找不到如何更改 MySQL 的默认 Cygwin 路径（如果这甚至是可能的原因。）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:09:10.947

您的问题似乎是 bash 正在尝试运行您的脚本，而不是 mysql。

试着放

```
#!/usr/bin/mysql 
```

在脚本的顶部。

不过，如果这真的有效，我会感到惊讶，因为至少在 Unixy 系统上，在 mysql 中运行 sql 脚本的正常方法是将它们通过管道传输到 mysql

```
mysql [options...] <test.sql 
```

注意“<”字符。

我在 Windows 上使用 mysql 的经验很少，所以我不知道它是如何在 Windows 上工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T07:16:07.467

首先在 Cygwin 终端中输入 mysql 是否工作正常？！

一个。如果正确，请将您的脚本复制到 /home

湾。类型

```
 cd /home
     mysql < test.sql 
```

它一定会起作用的

# ruby-on-rails-3 - 使用 Rails 在 Heroku 中查看更多日志

> ID：11805938
> 
> 赞同：1
> 
> 时间：2012-08-04T04:39:57.050
> 
> 标签：ruby-on-rails-3, heroku

我已经阅读了，为了查看更多日志，我需要在我的 production.rb 文件中添加以下行：

```
 config.logger = Logger.new(STDOUT)
 config.log_level = :info 
```

如果我这样做，我的应用程序会崩溃并显示以下消息：

```
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/log_tailer.rb:8:in `size': No such file or directory - log/production.log (Errno::ENOENT) 
```

所以......我该怎么做才能看到更多日志？就像我在开发中看到的那样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:09:03.337

也许您应该尝试使用[Loggly 插件](https://addons.heroku.com/loggly)？有一个保留一天的免费计划。

# android - 使用 singlemenuitem 在 android 中解析 XML

> ID：11805940
> 
> 赞同：0
> 
> 时间：2012-08-04T04:40:17.903
> 
> 标签：android, android-emulator, xml-parsing

嗨，我写了一个 xml 解析示例。这里我必须从 mysql 数据库中获取数据信息并成功显示在 android 模拟器中。这是我的代码：

```
 public class CustomizedListView extends Activity {
// All static variables
static final String URL = "http://192.168.1.168/xcart432pro/orderdetails.xml";
// XML node keys
static final String KEY_SONG = "Order"; // parent node
static final String KEY_ID = "orderid";
static final String KEY_TITLE = "orderid";
static final String KEY_ARTIST = "payment_method";
static final String KEY_DURATION = "total";

ListView list;
    LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));

        // adding HashList to ArrayList
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            String Orderid= ((TextView) view.findViewById(R.id.title)).getText().toString();
            String Price = ((TextView) view.findViewById(R.id.duration)).getText().toString();

            String Description = ((TextView) view.findViewById(R.id.artist)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);

             in.putExtra(KEY_TITLE, Orderid);
            in.putExtra(KEY_DURATION, Price);
            in.putExtra(KEY_ARTIST, Description);
            startActivity(in);                  
        }
    });     
}   
     } 
```

dis 是我的 singlemenuitem.java 类是：

```
 public class SingleMenuItemActivity  extends Activity {

// XML node keys

static final String KEY_TITLE = "orderid";
static final String KEY_ARTIST = "payment_method";
static final String KEY_DURATION = "total";
@Override

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent
    String product = in.getStringExtra(KEY_DURATION);
    String login = in.getStringExtra(KEY_TITLE);
    String description = in.getStringExtra(KEY_ARTIST);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);

    TextView lblPName = (TextView) findViewById(R.id.cost_label);
    TextView lblDesc = (TextView) findViewById(R.id.description_label);

    lblName.setText(login);

    lblPName.setText(product);
    lblDesc.setText(description);
    }

    } 
```

在这里我必须成功显示在android模拟器上。但我希望仅在第一页显示 orderid 和 payment_method。然后它移动到下一页意味着必须显示该特定 id 的总数。请给我解决方案。我该怎么做。我希望我的输出是： ![在此处输入图像描述](../Images/91d13e08603107ecc4051b0a6c567f9d.png)

如果我点击 13 表示特定订单总额仅显示在下一个活动中。

![在此处输入图像描述](../Images/67567ca21eb22e182607c89f180251bc.png)

怎么办。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T04:28:32.417

我得到了答案。如果您需要通过添加 andorid:visibility="gone" 到 xml 文件中的描述标签来隐藏“描述”字段。这样提交的描述将出现在列表视图中，但不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:48:07.417

```
 Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);

         in.putExtra("KEY_TITLE", Orderid);
        in.putExtra("KEY_DURATION", Price);
        in.putExtra("KEY_ARTIST", Description);
        startActivity(in); 
```

单菜单项.java

```
 product = getIntent().getExtras().getString("KEY_TITLE");
            login = getIntent().getExtras().getString("KEY_DURATION");
            description = getIntent().getExtras().getInt("KEY_ARTIST"); 
```

# sql - 如何显示每个部门的总体参与百分比？

> ID：11805941
> 
> 赞同：0
> 
> 时间：2012-08-04T04:40:38.417
> 
> 标签：sql, sql-server-2008-r2

我是一名新的 Web 开发人员，我正在开发一个简单的培训管理系统，为用户提供测验。该系统使用 ASP.NET 和 MS SQLServer 开发。现在，我需要提出一个查询，显示每个部门在所有提供的安全测验中的参与百分比（这意味着 IsSent = true 的测验）。

我有以下数据库设计：

```
Employee Table: Username,  Name,    DivisionCode
Divisions Table: SapCode, Divison
Quiz Table: QuizID, Title, Description, IsSent
UserQuiz: UserQuizID, QuizID, DateTimeComplete, Username 
```

***（DivisionCode 是 SapCode 的外键。IsSent 是一个标志，用于指示已提供并发送给用户参与的测验。）***

例如，如果我有四个部门；A、B、C 和 D，我已经向这些部门的员工发送了大约 23 个测验。由于每个部门在每个测验中都有特定的参与百分比。我的查询应该显示参与每个部门所有提供的测验的总体百分比。因此，不应针对每个测验对结果进行分解。

**我正在寻找的预期结果：**

部门***** ** *** ** *** ** *** *****总体百分比

A ***** ** *** ** *** ** *** ** *** ** ***** 80

B ***** ** *** ** *** ** *** ** *** ** ***** 60

C ***** ** *** ** *** ** *** ** *** ** ***** 50

*总百分比是每个测验中每个部门的所有完成百分比的总和。例如，在 Quiz#1 = 40%、在 Quiz#2 = 60% 和在 Quiz#3 = 90% 中，该查询应显示的总百分比是所有其中除以发送的测验总数（即 3）。我希望我很清楚，这个概念很明显。*

**那么该怎么做呢？**

这是数据库的架构及其数据：

```
USE [Test]
GO
/****** Object:  Table [dbo].[Divisions]    Script Date: 08/03/2012 19:36:09 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Divisions](
 [SapCode] [nvarchar](50) NOT NULL,
 [Division] [varchar](50) NOT NULL,
 CONSTRAINT [PK_Divisions] PRIMARY KEY CLUSTERED 
(
 [SapCode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[Divisions] ([SapCode], [Division]) VALUES (N'1', N'A')
INSERT [dbo].[Divisions] ([SapCode], [Division]) VALUES (N'2', N'B')
INSERT [dbo].[Divisions] ([SapCode], [Division]) VALUES (N'3', N'C')
/****** Object:  Table [dbo].[Quiz]    Script Date: 08/03/2012 19:36:09 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Quiz](
 [QuizID] [int] IDENTITY(1,1) NOT NULL,
 [Title] [varchar](50) NOT NULL,
 [Description] [varchar](50) NOT NULL,
 [IsSent] [bit] NOT NULL,
 CONSTRAINT [PK_Quiz] PRIMARY KEY CLUSTERED 
(
 [QuizID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
SET IDENTITY_INSERT [dbo].[Quiz] ON
INSERT [dbo].[Quiz] ([QuizID], [Title], [Description], [IsSent]) VALUES (1, N'Quiz I', N'Test', 1)
INSERT [dbo].[Quiz] ([QuizID], [Title], [Description], [IsSent]) VALUES (2, N'Quiz II', N'Test test', 1)
INSERT [dbo].[Quiz] ([QuizID], [Title], [Description], [IsSent]) VALUES (3, N'Quiz III', N'TEST TEST', 0)
SET IDENTITY_INSERT [dbo].[Quiz] OFF
/****** Object:  Table [dbo].[Employee]    Script Date: 08/03/2012 19:36:09 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Employee](
 [Usename] [nvarchar](50) NOT NULL,
 [Name] [varchar](50) NOT NULL,
 [DivisionCode] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_Employee] PRIMARY KEY CLUSTERED 
(
 [Usename] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'John12', N'John A', N'1')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'John13', N'John B', N'1')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'John15', N'John C', N'3')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'Maria12', N'Maria A', N'3')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'Rony14', N'Rony A', N'2')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'Tid52', N'Tid A', N'3')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'Tim12', N'Tim A', N'1')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'Tim15', N'Tim B', N'2')
/****** Object:  Table [dbo].[UserQuiz]    Script Date: 08/03/2012 19:36:09 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[UserQuiz](
 [UserQuizID] [int] IDENTITY(1,1) NOT NULL,
 [QuizID] [int] NOT NULL,
 [DateTimeComplete] [datetime] NOT NULL,
 [Score] [float] NOT NULL,
 [Username] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_UserQuiz] PRIMARY KEY CLUSTERED 
(
 [UserQuizID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET IDENTITY_INSERT [dbo].[UserQuiz] ON
INSERT [dbo].[UserQuiz] ([UserQuizID], [QuizID], [DateTimeComplete], [Score], [Username]) VALUES (1, 1, CAST(0x0000A07900000000 AS DateTime), 100, N'John12')
INSERT [dbo].[UserQuiz] ([UserQuizID], [QuizID], [DateTimeComplete], [Score], [Username]) VALUES (2, 1, CAST(0x0000A07900000000 AS DateTime), 50, N'Tim12')
INSERT [dbo].[UserQuiz] ([UserQuizID], [QuizID], [DateTimeComplete], [Score], [Username]) VALUES (3, 1, CAST(0x0000A07B00000000 AS DateTime), 100, N'Rony14')
INSERT [dbo].[UserQuiz] ([UserQuizID], [QuizID], [DateTimeComplete], [Score], [Username]) VALUES (4, 1, CAST(0x0000A07900000000 AS DateTime), 0, N'Tim15')
INSERT [dbo].[UserQuiz] ([UserQuizID], [QuizID], [DateTimeComplete], [Score], [Username]) VALUES (5, 1, CAST(0x0000A07900000000 AS DateTime), 100, N'Tid52')
SET IDENTITY_INSERT [dbo].[UserQuiz] OFF
/****** Object:  ForeignKey [FK_Employee_Divisions]    Script Date: 08/03/2012 19:36:09 ******/
ALTER TABLE [dbo].[Employee]  WITH CHECK ADD  CONSTRAINT [FK_Employee_Divisions] FOREIGN KEY([DivisionCode])
REFERENCES [dbo].[Divisions] ([SapCode])
GO
ALTER TABLE [dbo].[Employee] CHECK CONSTRAINT [FK_Employee_Divisions]
GO
/****** Object:  ForeignKey [FK_UserQuiz_Employee]    Script Date: 08/03/2012 19:36:09 ******/
ALTER TABLE [dbo].[UserQuiz]  WITH CHECK ADD  CONSTRAINT [FK_UserQuiz_Employee] FOREIGN KEY([Username])
REFERENCES [dbo].[Employee] ([Usename])
GO
ALTER TABLE [dbo].[UserQuiz] CHECK CONSTRAINT [FK_UserQuiz_Employee]
GO
/****** Object:  ForeignKey [FK_UserQuiz_Quiz]    Script Date: 08/03/2012 19:36:09 ******/
ALTER TABLE [dbo].[UserQuiz]  WITH CHECK ADD  CONSTRAINT [FK_UserQuiz_Quiz] FOREIGN KEY([QuizID])
REFERENCES [dbo].[Quiz] ([QuizID])
GO
ALTER TABLE [dbo].[UserQuiz] CHECK CONSTRAINT [FK_UserQuiz_Quiz]
GO 
```

这是查询：

```
SELECT     COUNT(DISTINCT dbo.UserQuiz.Username) AS [Total Number of Participants], dbo.Divisions.DivisionShortcut, dbo.Quiz.Title
FROM         dbo.employee INNER JOIN
                      dbo.UserQuiz ON dbo.employee.Username = dbo.UserQuiz.Username INNER JOIN
                      dbo.Quiz ON dbo.UserQuiz.QuizID = dbo.Quiz.QuizID INNER JOIN
                      dbo.Divisions ON dbo.employee.DivisionCode = dbo.Divisions.SapCode
WHERE     (dbo.Quiz.IsSent = 1)
GROUP BY dbo.Divisions.DivisionShortcut, dbo.Quiz.Title, dbo.UserQuiz.QuizID
ORDER BY dbo.UserQuiz.QuizID DESC 
```

**我应该怎么做才能改进它并得到我需要的东西？**

# firefox - 导航到 url 时始终下载 Azure Blob

> ID：11805944
> 
> 赞同：32
> 
> 时间：2012-08-04T04:41:45.770
> 
> 标签：firefox, google-chrome, azure, blob, azure-storage

在我们的应用程序中，我们让用户能够将文档上传到 Windows azure blob 存储帐户。上传文档或图像后，它会被分配一些 url (https://name.blob.core.windows.net/container/file-name.jpg)。如果文档是图像或 pdf 或浏览器可以呈现的某些文件，我们会尝试在浏览器中显示它，而不需要用户下载文件。如果我们只是打开一个新窗口或选项卡并将用户定向到 IE 中的 blob uri，则图像或 pdf 会在浏览器中正确呈现。但是，如果我们尝试在 Chrome、FireFox 或 Safari 中打开一个指向 uri 的新窗口，它只会下载文件而不是在浏览器中显示它。

有没有办法强制后三个浏览器只显示文件而不是下载文件？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-04T05:25:04.123

这是因为您没有设置 blob 的[内容类型](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.blobproperties.contenttype.aspx)属性（默认为 application/octet-stream，在大多数浏览器中会触发下载）。如果您希望 PDF 文件正确显示，您需要将 PDF 文件的内容类型更改为**application/pdf**（jpeg 文件为 image/jpeg）。

您可以使用 Azure Storage Explorer、Cloud Storage Studio、CloudBerry、CloudXplorer 等常用工具或使用 SDK 更改内容类型。请注意，其中一些工具会在上传文件后自动将内容类型设置为正确的类型。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-22T15:21:13.110

```
 blob.Properties.ContentType = "application/pdf"; 
```

**//通过扩展名获取文件的内容类型**

```
 public static string GetFileContentType(string FilePath)
    {
        string ContentType = String.Empty;
        string Extension = Path.GetExtension(FilePath).ToLower();

        switch (Extension)
        {
            case ConstantUtility.FILE_EXTENSION_PDF:
                ContentType = "application/pdf";
                break;
            case ConstantUtility.FILE_EXTENSION_TXT:
                ContentType = "text/plain";
                break;
            case ConstantUtility.FILE_EXTENSION_BMP:
                ContentType = "image/bmp";
                break;
            case ConstantUtility.FILE_EXTENSION_GIF:
                ContentType = "image/gif";
                break;
            case ConstantUtility.FILE_EXTENSION_PNG:
                ContentType = "image/png";
                break;
            case ConstantUtility.FILE_EXTENSION_JPG:
                ContentType = "image/jpeg";
                break;
            case ConstantUtility.FILE_EXTENSION_JPEG:
                ContentType = "image/jpeg";
                break;
            case ConstantUtility.FILE_EXTENSION_XLS:
                ContentType = "application/vnd.ms-excel";
                break;
            case ConstantUtility.FILE_EXTENSION_XLSX:
                ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
                break;
            case ConstantUtility.FILE_EXTENSION_CSV:
                ContentType = "text/csv";
                break;
            case ConstantUtility.FILE_EXTENSION_HTML:
                ContentType = "text/html";
                break;
            case ConstantUtility.FILE_EXTENSION_XML:
                ContentType = "text/xml";
                break;
            case ConstantUtility.FILE_EXTENSION_ZIP:
                ContentType = "application/zip";
                break;
            default:
                ContentType = "application/octet-stream";
                break;

        }

        return ContentType;
    } 
```

在保存 blob 时使用它来设置 blob 的内容类型。

[设置存储在 Blob 上的媒体文件的内容类型](https://stackoverflow.com/questions/10040403/set-content-type-of-media-files-stored-on-blob)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-19T22:56:02.990

对于通过 PowerShell 上传文件的用户，请使用以下语法在上传期间设置内容类型。

```
Set-AzureStorageBlobContent -File <localFilePath> -Container <containerName> -Properties @{"ContentType"="text/plain"} -Context $ctx 
```

上面我将 blob 内容类型设置为 text/plain，这在上传将与模板一起使用的 JSON 和 HTML 文件时很有用。更多内容类型标头值列表[在这里](https://msdn.microsoft.com/en-us/library/ms526508(v=exchg.10).aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-08T15:07:45.080

如果使用 Azure SDK (12.x+)，则需要使用传入上传方法的 BlobHttpHeaders（而不是 blob.Properties.ContentType）进行更改。

例如：

```
 var header = new BlobHttpHeaders();
    header.ContentType = "image/jpeg";

    var response = await blobClient.UploadAsync(stream, header); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-24T06:13:20.977

```
public String sasURL(String filePath) throws URISyntaxException, StorageException, InvalidKeyException {
    CloudBlockBlob cloudBlockBlob = cloudBlobContainer.getBlockBlobReference(filePath);
    SharedAccessBlobPolicy sasPolicy = new SharedAccessBlobPolicy();
    GregorianCalendar calendar = new GregorianCalendar();
    calendar.add(Calendar.HOUR, 3);
    sasPolicy.setSharedAccessExpiryTime(calendar.getTime());
    sasPolicy.setPermissions(EnumSet.of(SharedAccessBlobPermissions.READ, SharedAccessBlobPermissions.LIST));
    SharedAccessBlobHeaders sharedAccessBlobHeaders = new SharedAccessBlobHeaders();
    sharedAccessBlobHeaders.setContentType(MediaType.APPLICATION_PDF_VALUE);
    String sas = cloudBlockBlob.generateSharedAccessSignature(sasPolicy, sharedAccessBlobHeaders,null);
    return cloudBlockBlob.getUri()+"?"+sas;
} 
```

# javascript - 移动 safari - 加载图像时的可靠回调？

> ID：11805945
> 
> 赞同：0
> 
> 时间：2012-08-04T04:41:58.110
> 
> 标签：javascript, html, safari, mobile-safari

我尝试像这样加载图像：

```
var img = new Image();
img.src = 'mars.png';
img.onLoad = callback;

function callback(){
    // doesnt fire
       alert("loaded");
} 
```

回调永远不会触发，解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:01:01.947

您必须在更改 src 之前定义 onload，并且事件处理程序是小写的，因此拼写为 onload

```
var img = new Image();
img.onload = callback;
img.src = 'mars.png';

function callback(){
  alert("loaded");
} 
```

或者我喜欢它

```
var img = new Image();
img.onload = function(){
  alert("loaded");
}
img.src = 'mars.png'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:50:25.963

你试过这些吗？

```
var img = new Image();
img.src = 'mars.png';
img.onLoad = function(){
    // doesnt fire
       alert("loaded");
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T05:36:16.290

mplungjan 是对的，您可以改用这些：

```
img.onload = function(){
    // doesnt fire
       alert("loaded");
}; 
```

**onLoad**中的**l**较低

# ruby-on-rails - Refinerycms 从编辑器获取图像并在视图中调整其大小

> ID：11805946
> 
> 赞同：0
> 
> 时间：2012-08-04T04:41:58.620
> 
> 标签：ruby-on-rails, ruby, image, image-resizing, refinerycms

首先感谢您抽出时间来研究这个问题。

我是炼油厂的新手，在视图中调整图像大小时遇到​​问题，我为图像添加了一个新的页面部分并从中获取图像。我只能直接从 cms 编辑器中获取图像标签

“<% sanitize(@page.content_for(:page_image), :tags => %w(img)) %>”

但不知道如何在视图中调整它的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:45:57.750

我自己想通了，这是你如何做到的，

```
<%= sanitize(content_fu(@page.content_for(:page_image), '96x96#c'), :tags => %w(img)) %> 
```

# java - 如何按字符位置拆分字符串？

> ID：11805949
> 
> 赞同：1
> 
> 时间：2012-08-04T04:42:26.320
> 
> 标签：java, android, string, split, character

我想拆分两个数字字符串 12345678 和 -12345678，这样我就可以在每个实例的前两个整数之后插入一个小数点。这就是我目前正在使用的..

```
String googlelat = String.valueOf((int) (location.getLatitude()*1E6)); //<-- equals 12345678
        if (googlelat.length() <= 8  ){
                        //split after second integer
                        //insert decimal 
            //make string 12.345678
        }
        String googlelon = String.valueOf((int) (location.getLongitude()*1E6)); //<-- equals -12345678
                    if (googlelon.length() >  8  ){
                        //split after third character
                        //insert decimal 
            //make string -12.345678
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:13:43.433

试试这个方法......

**1.**将字符串值放入`StringBuilder`.

```
 StringBuilder sb = new StringBuilder(googlelat); 
```

**2** 、StringBuilder的使用`insert()`方法。

```
 sb.insert(2,"."); 
```

它完成了！对经度尝试相同的方法。

# c# - 动态读取的配置设置属性

> ID：11805950
> 
> 赞同：0
> 
> 时间：2012-08-04T04:42:38.743
> 
> 标签：c#, asp.net, xml, design-patterns, configuration

我有一个应用程序，我需要为特定业务实体（即国家/地区）进行配置设置。配置将如下所示：

```
<country value="US">
   <metadata>
      <key name="filePath" value="c:\blah">
      <key name="wsPath" value="http://blah.com">
   </metadata>
   <sublayouts>
     <template value="division">
       <key name="path" value="c:\blah\file.txt">
     </division>
   </sublayouts>
</country>
<country value="FR">
   <metadata>
      <key name="filePath" value="c:\blah">
      <key name="wsPath" value="http://blah.com">
   </metadata>
   <sublayouts>
     <template value="division">
       <key name="path" value="c:\blah\file.txt">
     </division>
   </sublayouts>
</country> 
```

我想要的是能够将其读入我所在站点的静态对象中。因此，对于美国站点，它将加载到具有 value="US" 的整个国家节点中。加载后，我希望能够像这样阅读它：

`string var = Config.metaData.filePath`

或者

`string var = Config.sublayouts.template["division"].path;`

这甚至可行吗？是否有一个好的设计模式（不太难）可以做到这一点？只要有意义，我完全愿意更改 XML 的结构。我希望能够在需要时添加新部分。基本上，这个想法是有一个灵活的配置系统，它不是太难以编程方式维护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T06:41:01.563

您可以利用C# 4.0中的**Dynamic和****ExpandoObject**。通过将 ExpandoObject 转换为 IDictionary，可以将数据从 Xml 动态加载到 ExpandoObject 中，例如：

```
 dynamic country = new ExpandoObject();
 var countryDic = country as IDictionary<string, object>;

 dynamic metadata = new ExpandoObject();
 var metadataDic = metadata as IDictionary<string, object>;
 metadataDic["filePath"] = "your file path";

 countryDic["metadata"] = metadata;
 var filePath = country.metadata.filePath; 
```

更多信息：[ExpandoObject 简介](http://blogs.msdn.com/b/csharpfaq/archive/2009/10/01/dynamic-in-c-4-0-introducing-the-expandoobject.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:50:17.843

您要做的是首先设计数据容器。换句话说，您最终会得到每个 XML 节点类型的类：Country 和 Template。你会得到这样的东西：

```
class Country {
  IList<KeyValuePair<string, string>> MetaData {get;set;}
  IList<Template> Sublayouts {get;set;}
} 
```

一旦你得到了这些数据，你就有了几个将它序列化到 XML 和从 XML 序列化的选项：DataContractSerializer、BinaryFormatter、XmlSerializer 等。

# map - 如何使用 itemtap 迭代列表（sencha touch 2）

> ID：11805951
> 
> 赞同：0
> 
> 时间：2012-08-04T04:42:38.580
> 
> 标签：map, extjs, loops, marker

我想知道如何使用 itemtap 来遍历列表。我现在有一个列表，其中显示了多个项目，当用户单击每个项目时，将出现一个显示项目标记的地图。但是，列表中的每个项目似乎都显示相同的内容。它只是显示列表中的最新项目（第一个在顶部）。我想知道我在 itemtap 功能上做错了什么。谢谢你！！

这是我的控制器，其中 itemtap 功能是：

```
Ext.define('demo.controller.News',{
extend:'Ext.app.Controller',

config:{
    refs:{
        NewsContainer:'newscontainer'

    },
    control:{
        'newscontainer new list':{
            itemtap:function(list, index, target, record){
                var detailsView = Ext.create('demo.view.Mapo');
                detailsView.setData(record.data);
                this.getNewsContainer().push(detailsView);

            }
        }

    }   
} 
```

});

这是我的地图：

```
Ext.define('demo.view.Mapo', {
extend: 'Ext.Map',
xtype:'mapo',
config: {
    title:'Incident Location',
    iconCls:'maps',
    layout:'fit',
    draggable: true,
    useCurrentLocation: true,
    mapOptions: {
        zoom: 11,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
},
initialize: function(){
    var me = this;
    me.on('maprender', function(comp, map){
    var image = 'resources/images/current.png';
        new google.maps.Marker({
            position: new google.maps.LatLng(
                    this._geo.getLatitude(), 
                    this._geo.getLongitude()
            ),
            icon: image,
            map: map,
            title: "Current Location",
            animation: google.maps.Animation.DROP
        });

        //Circle Radius
        // var populationOptions = {
        // strokeColor: "#FF0000",
        // strokeOpacity: 0.8,
        // strokeWeight: 1,
        // fillColor: "#FF0000",
        // fillOpacity: 0.35,
        // map: map,
        // center: new google.maps.LatLng(this._geo.getLatitude(), 
                            // this._geo.getLongitude()),
        // radius: 2000
        // };
        // var t = new google.maps.Circle(populationOptions);

    for (i=0; i<Ext.getStore('news').getData().length; i++){

        var data = Ext.getStore('news').getData().items[i].data
    };
        new google.maps.Marker({
            position: new google.maps.LatLng(
                    data.Latitude, 
                    data.Longitude
            ),
            // icon: image,
            map: map,
            title: "Incident Location",
            animation: google.maps.Animation.BOUNCE
        });

    });
    me.callParent(arguments);
} 
```

});

# javascript - 如何获取元素与顶部的距离？

> ID：11805955
> 
> 赞同：104
> 
> 时间：2012-08-04T04:44:00.777
> 
> 标签：javascript

我想知道如何使用 JavaScript 来获取元素**与页面顶部的距离，而不是父元素**。
![在此处输入图像描述](../Images/dafa36897adeac430aa638ad79a24242.png)

[http://jsfiddle.net/yZGSt/1/](http://jsfiddle.net/yZGSt/1/)

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2018-05-12T20:12:13.133

```
var elDistanceToTop = window.pageYOffset + el.getBoundingClientRect().top 
```

根据我的经验`document.body.scrollTop`，并不总是返回当前的滚动位置（例如，如果滚动实际上发生在不同的元素上）。

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2014-07-18T16:04:20.787

offsetTop 只查看元素的父元素。只需遍历父节点，直到用完父节点并添加它们的偏移量。

```
function getPosition(element) {
    var xPosition = 0;
    var yPosition = 0;

    while(element) {
        xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);
        yPosition += (element.offsetTop - element.scrollTop + element.clientTop);
        element = element.offsetParent;
    }

    return { x: xPosition, y: yPosition };
} 
```

更新：这个答案有一些问题，与应有的值相比，值会有微小的差异，并且在某些情况下无法正常工作。

检查[**@eeglbalazs**的答案](https://stackoverflow.com/a/50310297/7942242)，这是准确的。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-04T04:46:49.460

利用[`offsetTop`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop)

```
document.getElementById("foo").offsetTop 
```

[演示](http://jsfiddle.net/yZGSt/2/)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-11-21T06:06:27.653

这是一些有趣的代码：)

```
window.addEventListener('load', function() {
  //get the element
  var elem = document.getElementById('test');
  //get the distance scrolled on body (by default can be changed)
  var distanceScrolled = document.body.scrollTop;
  //create viewport offset object
  var elemRect = elem.getBoundingClientRect();
  //get the offset from the element to the viewport
  var elemViewportOffset = elemRect.top;
  //add them together
  var totalOffset = distanceScrolled + elemViewportOffset;
  //log it, (look at the top of this example snippet)
  document.getElementById('log').innerHTML = totalOffset;
});
```

```
#test {
  width: 100px;
  height: 100px;
  background: red;
  margin-top: 100vh;
}
#log {
  position: fixed;
  top: 0;
  left: 0;
  display: table;
  background: #333;
  color: #fff;
}
html,
body {
  height: 2000px;
  height: 200vh;
}
```

```
<div id="log"></div>
<div id="test"></div>
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-11-17T13:19:42.677

offsetTop 不获取到页面顶部的距离，而是到具有指定位置的最近父元素的顶部。

您可以使用一种简单的技术，将您感兴趣的元素的所有父元素的 offsetTop 相加来获得距离。

```
// Our element
var elem = document.querySelector('#some-element');

// Set our distance placeholder
var distance = 0;

// Loop up the dom
do {
    // Increase our distance counter
    distance += elem.offsetTop;

    // Set the element to it's parent
    elem = elem.offsetParent;

} while (elem);
distance = distance < 0 ? 0 : distance; 
```

[来自https://gomakethings.com/how-to-get-an-elements-distance-from-the-top-of-the-page-with-vanilla-javascript/](https://gomakethings.com/how-to-get-an-elements-distance-from-the-top-of-the-page-with-vanilla-javascript/)的原始代码

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-03-16T09:38:22.410

```
var distanceTop = element.getBoundingClientRect().top; 
```

有关详细信息，请访问链接：

[https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-05-15T20:37:16.627

这个oneliner似乎工作得很好

```
document.getElementById("el").getBoundingClientRect().top +  window.scrollY 
```

[你的小提琴更新了](http://jsfiddle.net/7nzguLfp/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-03-31T19:48:23.367

`warning` `warning` `warning` `warning` `warning` `warning`

"经典案例" - URL " [/#about-us](http:///#about-us) " 和 id 为**"about-us"**的 div 。在这种情况下，**默认锚点点击行为**设置的顶部位置（因此顶部为**0**为`about-us`div）。你**必须**防止默认（否则你会因为它为什么不起作用而发疯 - 或者 - 你在那里找到的任何其他代码）。下面的“警告”下有更多详细信息。

# 1

**不到 30 秒的解决方案（两行代码“hello world”）：**

## 获取您的元素：

```
var element = document.getElementById("hello"); 
```

## 获取getBoundingClientRect();

> Element.getBoundingClientRect() 方法返回元素的大小及其相对于视口的位置。[https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect)

```
var rect = element.getBoundingClientRect(); 
```

**返回对象：**

[![在此处输入图像描述](../Images/02fc0393b710721017c983f720e98ffe.png)](https://i.stack.imgur.com/Us8DE.png)

## 点符号`top`

```
var distance_from_top = rect.top; /* 1007.9971313476562 */ 
```

而已。

# 2

## StackOverflow 噩梦 2 - 将滚动位置设置为此值

再次“你好世界”（8,000 个答案 - 7,999 个不工作或复杂）。

[https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo](https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo)

```
 window.scrollTo({
    top: element.getBoundingClientRect().top,
    behavior: 'smooth'
  }); 
```

`top`如果需要，可以添加偏移值（对于粘性导航栏）。

## “Hello World”代码片段（从顶部视口获取距离+点击到`scrollTo`）

```
var element = document.getElementById("hello");
var rect = element.getBoundingClientRect();
var distance_from_top = rect.top; /* 50px */
console.log(distance_from_top);

function scrollTovView(){
  window.scrollTo({
    top: distance_from_top,
    behavior: 'smooth'
  });
}
```

```
div{
  text-align:center;
  border: 1px solid lightgray;
}
```

```
<button onclick="scrollTovView()">scrollTo to red DIV</button>
<div style="height: 50px;">50px height</div>
<div id="hello" style="width: 500px; height: 500px; background: red;"></div>
```

# `warning`

## scrollTo 与主锚导航栏“冲突”

例如，如果你使用这个 URL（ID 来锚定 URL）（Top is or "get **crazy**`0` " hh） ，这个技巧是非常有问题的。

```
www.mysite/about#hello 
```

```
 window.scrollTo({
    top: element.getBoundingClientRect().top,
    behavior: 'smooth'
  }); 
```

要使此代码正常工作，您应该添加：

```
 if (this.hash !== "") {
      // Prevent default anchor click behavior
      event.preventDefault(); 
```

她的基本示例： [https ://www.w3schools.com/howto/howto_css_smooth_scroll.asp](https://www.w3schools.com/howto/howto_css_smooth_scroll.asp)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-03-28T10:28:21.443

虽然这是一个相当古老的讨论，但这在`chrome / firefox / safari`浏览器上运行良好：

```
window.addEventListener('scroll', function() {
   var someDiv = document.getElementById('someDiv');
   var distanceToTop = someDiv.getBoundingClientRect().top;
}); 
```

在[JSFiddle上查看](https://jsfiddle.net/yz7gzry7/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-12-20T06:38:29.843

滚动到元素的顶部位置；

```
var rect = element.getBoundingClientRect();
var offsetTop = window.pageYOffset + rect.top - rect.height; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2022-01-13T22:06:09.207

```
document.getElementById("id").offsetTop 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-09-23T11:37:55.107

（来源：[使用 javascript 确定从 div 顶部到窗口顶部的距离](https://stackoverflow.com/questions/9880472/determine-distance-from-the-top-of-a-div-to-top-of-window-with-javascript/32737911#32737911)）

```
<script type="text/javascript">
var myyElement = document.getElementById("myyy_bar");  //your element
var EnableConsoleLOGS = true;                          //to check the results in Browser's Inspector(Console), whenever you are scrolling

// ==============================================
window.addEventListener('scroll', function (evt) {
    var Positionsss =  GetTopLeft ();  
    if (EnableConsoleLOGS) { console.log(Positionsss); }
});
function GetOffset (object, offset) {
    if (!object) return;
    offset.x += object.offsetLeft;       offset.y += object.offsetTop;
    GetOffset (object.offsetParent, offset);
}
function GetScrolled (object, scrolled) {
    if (!object) return;
    scrolled.x += object.scrollLeft;    scrolled.y += object.scrollTop;
    if (object.tagName.toLowerCase () != "html") {          GetScrolled (object.parentNode, scrolled);        }
}

function GetTopLeft () {
    var offset = {x : 0, y : 0};        GetOffset (myyElement, offset);
    var scrolled = {x : 0, y : 0};      GetScrolled (myyElement.parentNode, scrolled);
    var posX = offset.x - scrolled.x;   var posY = offset.y - scrolled.y;
    return {lefttt: posX , toppp: posY };
}
// ==============================================
</script> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-10-29T09:37:50.070

这个函数返回到页面顶部的距离，即使你的窗口是滚动的。它可以用于事件监听器。

```
const getElementYOffset = (element) => {
  const scrollOnWindow =
    window.pageYOffset !== undefined
      ? window.pageYOffset
      : (document.documentElement || document.body.parentNode || document.body)
          .scrollTop;
  const rect = element.getBoundingClientRect();
  let distanceFromTopOfPage = rect.top;
  if (scrollOnWindow !== 0) {
    distanceFromTopOfPage = rect.top + scrollOnWindow;
  }

  return distanceFromTopOfPage;
}; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-13T21:50:41.767

你只需要这条线

```
document.getElementById("el").getBoundingClientRect().top 
```

其中“el”是元素。

* * *

## 回答 #15

> 赞同：-8
> 
> 时间：2012-08-04T04:48:50.650

使用 jQuery 的[`offset()`](http://api.jquery.com/offset/)方法：

```
$(element).offset().top 
```

示例：http: [//jsfiddle.net/yZGSt/3/](http://jsfiddle.net/yZGSt/3/)

# android - Android Emulator 不会从 AVD 管理器加载

> ID：11805962
> 
> 赞同：0
> 
> 时间：2012-08-04T04:45:53.853
> 
> 标签：android, emulation

我一直在谷歌上搜索这个问题，但没有其他人有类似的问题，所以没有答案。我从 AVD 管理器运行模拟器，加载栏几乎走到尽头，然后窗口消失，没有模拟器加载。只有 AVD 经理盯着我看。任何人都知道问题可能是什么？

我还安装了 Java SE 和 Java ME，这是针对不同平台的。会不会是 Java ME 干扰了？模拟器在我的家用计算机上运行良好，那里没有 Java ME，但在工作时它不会加载。工作电脑和家用电脑上的整个 android SDK 文件夹都是我以前用来上班的旧家用电脑的相同复制粘贴。

**这个问题没有解决，并且在系统擦除后最终没有发生（其他需要）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:35:27.227

有没有可能是模拟器本身的屏幕刚刚关闭，需要打开？

尝试按 F7 将其打开。

如果这没有帮助，请尝试创建一个全新的 AVD 而不在那里设置任何内容，然后运行它。

如果没有任何帮助，请删除 sdk 管理器的文件夹并重新安装。

# ruby - .should_receive 理解

> ID：11805973
> 
> 赞同：0
> 
> 时间：2012-08-04T04:47:46.047
> 
> 标签：ruby, rspec2

我一直在关注 rspec book 以了解有关 cucumber 和 rpsec 的更多信息。但我不太明白的是下面这些带有注释的行：

```
messenger = mock("messenger").as_null_object
game.start(%w[a b c d])
messenger.should_receive(:puts).with("bbbb") # 1st line
game.guess(%w[a b c d]) # 2nd line

module Game
  #...
  def guess(guess)
    @messenger.puts "bbbb"
  end
end 
```

我的问题是：我预计 1 linw 应该是 2nd 和反向，就像我们说的“游戏开始，如果你猜到这个，那么你应该收到这个”，但它不是那样工作的。

1.  should_receive 是如何工作的？
2.  是一个观察者在那里等待并捕捉到 stdout 弹出的内​​容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:16:05.787

`.should_receive`在执行完所有语句后查找调用。

# objective-c - Objective-C：（奇怪的）UIButton 框架 NSLogs 不同的坐标与它显示的位置（并接收触摸）

> ID：11805980
> 
> 赞同：2
> 
> 时间：2012-08-04T04:48:33.077
> 
> 标签：objective-c, ios, ios5, uiview, uibutton

**更新**的解决方案：主要问题是我的速度计算返回一个整数 -`0`对于所有情况，除了索引 3 处的对象，它是`1`- 尽管被标记为实例化为`float`. 结果？按钮在从起点到终点的“无限”动画（速度为 0 的动画）中。

//////////////////////////////////

**奇怪：**我正在以编程方式在视图上绘制一些按钮，在对代码进行故障排除时，我发现按钮的框架/位置/中心（在位置 A）与它们实际显示的位置（位置 B）不同。这是我第一次遇到这种现象。。

（更糟糕的是，我正在使用`hitTest:withEvent:`和返回基于框架的按钮，所以我实际上是在跟踪对位置 A 的触摸（和触发动作），即使按钮本身显示在位置 B 中。）

**注意事项和注意事项：**其中一个按钮显示正确。我不知道为什么。所有按钮的动画都正确，因为动画超出了它们的帧。

我确定我的代码中遗漏了一些东西，但我已经研究了好几个小时，并且考虑到我的框架报告错误，我需要更多的眼睛！

**图表：**

```
+-----------------------+
|(mainV)                |
|                       |
|                 +----+|
|                 |(sB)||
|                 +----+|
|                 +----+|
|                 |(sB)||
|                 +----+|
|                 +----+|
|                 |(sB)||
|                 +----+|
|                 +----+|
|                 |(sB)||
|                 +----+|
|                 +----+|
|                 |(dW)||
|                 +----+|
|+---------------------+|
||(mV)                 ||
|+---------------------+|
+-----------------------+ 
```

**传奇：**

*   (mainV) = 主视图/视图控制器，所有内容的父视图
*   (mV) = menuView, (mainV) 的子视图
*   (dW) = drawButton、(mV) 的子视图以及我构建其他按钮的“锚点”
*   (sB) = sizeButton 的实例，(mV) 的子视图，用于在超级`hitTest:withEvent:`视图的框架之外进行触摸

**代码和注释：**

*中央按钮创建方法，我最初调用和创建按钮的地方，大多数 vars 是实例变量*

```
- (void)addSizeSubButtons {

    BOOL showAnimation = NO;

    if ([drawSizeButtonsArray count] == 0) {

        for (int i = 0; i < kNumberOfDrawSizes; i++) {

            // this method is defined below
            // short story is it makes 4 buttons and adds them to an array
            [self makeSizeButton];
        }

        showAnimation = YES;
    }

    // drawSizeButtonsArray is the array from before - see makeSizeButtons below
    for (UIButton *sizeButton in drawSizeButtonsArray) {

        int buttonIndex = [drawSizeButtonsArray indexOfObject:sizeButton];

        // drawButton is my unofficial anchor point - its center is {287.8, -24.25}
        // sizing code in general works and I don't believe is at play here
        // see (dW) in the diagram above..
        [sizeButton setFrame:CGRectMake(0,
                                        0,
                                        drawButton.bounds.size.height * kStackButtonRatio,
                                        drawButton.bounds.size.height * kStackButtonRatio)];

        CGPoint position = CGPointMake(drawButton.center.x,
                                       drawButton.center.y - sizeButton.bounds.size.height * (1.1 + buttonIndex));

        [sizeButton.layer setPosition:position];

        NSLog(@"sizeButton made at %@ named %@",NSStringFromCGPoint(sizeButton.center),sizeButton);

        // NSLog Output (all coords relative to (mV) from legend above:
        // sizeButton made at {287.8, -66.6} (this is loop #1/sizeButton atIndex:0)
        // sizeButton made at {287.8, -105.1} (this is loop #2/sizeButton atIndex:1)
        // sizeButton made at {287.8, -143.6} (this is loop #3/sizeButton atIndex:2)
        // sizeButton made at {287.8, -182.1} (this is loop #4/sizeButton atIndex:3)
        // note: I have tested that the buttons are all different/at different memory addresses
        // --------------------
        // HOWEVER, visual display locations are as follows:
        // button atIndex:0 @ {287.8, -24.25} (remember this is the same as drawButton!)
        // button atIndex:1 @ {287.8, -24.25} (also wrong, and also hidden behind drawButton)
        // button atIndex:2 @ {287.8, -24.25} (three in a row in the wrong place)
        // button atIndex:3 @ {287.8, -182.1} (!! HARK! this one is actually in the right place.. no clue why one is and the other three are not)

        [sizeButton.layer setCornerRadius:sizeButton.bounds.size.width / 7.5];
    }

    // animations are actually working as desired, because they run off the frame
    // as soon as the animation kicks off, buttons all appear in the right place
    // and take the correct action; still, i will include the core method just in case
    if (showAnimation == YES) {

        for (UIButton *sizeButton in drawSizeButtonsArray) {

            // so my button is moving FROM its anchor TO its actual center
            CGPoint origin = drawButton.center;
            CGPoint destination = sizeButton.center;

            // this is just to create a visual effect
            float speed = ( [drawSizeButtonsArray indexOfObject:sizeButton] + 1 ) / [drawSizeButtonsArray count];

            // my central animation method, included below
            CABasicAnimation *slideButton = [self slideButton:sizeButton
                                                    fromPoint:origin
                                                      toPoint:destination
                                                      atSpeed:speed];

            [sizeButton.layer addAnimation:slideButton
                                    forKey:@"slideSizeButtonAnimation"];
        }

    }
} 
```

*从上面调用的 Button Creator Helper/Worker 方法*

```
- (void)makeSizeButton {

    UIButton *sizeButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [drawSizeButtonsArray addObject:sizeButton];

    // button presses
    [sizeButton setUserInteractionEnabled:YES];
    [sizeButton addTarget:self
                   action:@selector(drawSizeButtonPressed:)
         forControlEvents:UIControlEventTouchUpInside];

    // TO DO: remove these debug titles and replace with dots
    [sizeButton setTitle:[NSString stringWithFormat:@"%d",[drawSizeButtonsArray indexOfObject:sizeButton]]
                forState:UIControlStateNormal];
    [sizeButton setTitleColor:[UIColor blackColor]
                     forState:UIControlStateNormal];

    [sizeButton setBackgroundColor:[UIColor whiteColor]];

    // show it!
    [self addSubview:sizeButton];
    [self sendSubviewToBack:sizeButton];

} 
```

*动画辅助方法*

```
- (CABasicAnimation *)slideButton:(UIButton *)button
                        fromPoint:(CGPoint)origin
                          toPoint:(CGPoint)destination
                          atSpeed:(float)speed{

    // now show animation
    CABasicAnimation *slideAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
    [slideAnimation setDelegate:self];

    // from & to values
    [slideAnimation setFromValue:[NSValue valueWithCGPoint:origin]];
    [slideAnimation setToValue:[NSValue valueWithCGPoint:destination]];

    // easing in and out.. oh yeah!
    [slideAnimation setDuration:kAnimationTiming / speed];
    CAMediaTimingFunction *easeInOut = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    [slideAnimation setTimingFunction:easeInOut];

    NSLog(@"slide animation from %@ to %@",NSStringFromCGPoint(origin),NSStringFromCGPoint(destination));

    // NSLog Output: (all these values are correct/what I intended)
    // AND recall that all animations display properly!
    // in fact, judging by NSLog, everything is working fine.. but visually it is not
    // slide animation from {287.8, -24.25} to {287.8, -66.6} (for button atIndex:0)
    // slide animation from {287.8, -24.25} to {287.8, -105.1} (for button atIndex:1)
    // slide animation from {287.8, -24.25} to {287.8, -143.6} (for button atIndex:2)
    // slide animation from {287.8, -24.25} to {287.8, -182.1} (for button atIndex:3)

    return slideAnimation;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:34:59.063

如果您禁用动画，是否还会出现此问题？

您是否对任何视图应用了转换？

我要注意的一件事：设置 UIView 的框架然后调整其图层的位置很奇怪。如何使用`[sizeButton setCenter:position]`而不是访问图层。我不认为这是问题所在，但它可能与它有关。同样，为什么不使用 UIView 的动画方法而不是潜入 CABasicAnimation 领域呢？

# matlab - 平面图图像的热图生成器

> ID：11805983
> 
> 赞同：3
> 
> 时间：2012-08-04T04:49:57.290
> 
> 标签：matlab, python-3.x, heatmap, color-mapping

我想生成地板的热图图像。我有以下几点：

1.  地板的黑白 .png 图像
2.  存储在 Matlab 中的三列数组。-- 前两列表示平面图像的 X 和 Y 坐标 -- 第三个坐标表示该特定坐标的“温度”

我想生成地板的热图，以显示这些坐标中的“温度”强度。*但是，我想在平面图顶部显示热图，以便观众可以看到哪些房间导致了哪些“温度”。*

有什么软件可以做这个工作吗？我可以使用 Matlab 或 Python 来执行此操作吗？

谢谢，

纳兹穆尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:10:52.783

一种方法是：

1) 使用 Matlab 或 NumPy/matplotlib 加载平面图图像。

2）使用一些内置的边缘检测来定位平面图中的边缘像素。

3) 形成一个 (x,y) 位置的大列表，在平面图中可以找到边缘。

4) 绘制热图

5) 将平面图的点散点图作为叠加图。

听起来您知道如何单独执行每个步骤，因此您需要做的就是查找一些有关如何将绘图叠加到同一轴上的内容，这在 Matlab 和 matplotlib 中都非常容易。

如果您不熟悉，可以查看的正确命令是 and 之类的东西`meshgrid`，`surf`可能`contour`还有它们的 Python 等价物。我认为 Matlab 内置了 Canny 边缘检测。我相信这在 Python 中更难，但如果你使用 PIL 库、Mahotas 库、scikits.image 库以及其他一些为图像处理量身定制的库，那还不错。SciPy 现在可能实际上有一个边缘过滤器，所以先检查那里。

唯一的症结在于，如果您的 (x,y) 温度数据与图像中的 (x,y) 像素位置不一致。在这种情况下，您将不得不使用一些 x 比例因子和 y 比例因子来首先将热图的坐标转换为像素坐标，然后绘制热图，然后叠加应该可以工作。

这是一种技术含量相当低的方法。我假设您只需要一个快速而肮脏的情节来说明某些事情是如何工作的。这种方法确实有一个优点，您可以轻松更改平面图点的样式，使其更大、更厚、更薄、不同颜色或透明，具体取决于您希望它如何与热图交互。但是，要真正做到这一点，请使用 GIMP、Inkscape 或 Photoshop 并在事后将热图叠加到图像上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-04T15:03:21.247

我会看看将 Python 与一个名为[Polygon的模块一起使用](http://www.j-raedler.de/projects/polygon/)

多边形将允许您使用几何形状绘制房间，我相信您可以将房间的边界作为黑白图像的叠加层。虽然此时我还没有习惯很多，但我知道您只需要一个 (x,y) 坐标对就可以对给定的形状进行“命中测试”，然后使用该“命中测试”知道你想改变谁的颜色的形状。

最终，我认为多边形会让你在创建房间形状时变得更容易，尤其是当它们不是很好的矩形时 =)

不过，最后一点。确保通读 Jorg 与他的项目有关的所有文档。我还没有在 Python 3.x 环境中使用它，但是在 2.7 中让它运行起来有点费力。

只要我的两分钱，享受吧！

# macos - 如何卸载 FireBreath 插件

> ID：11805984
> 
> 赞同：1
> 
> 时间：2012-08-04T04:50:14.513
> 
> 标签：macos, firebreath

我在 MAC OS X Snow Leopard 中使用 FireBreath。

我有一个插件加载在用户执行一些任务调用此插件的网页中，但是我想在用户被重定向到不再使用该插件的另一个页面时卸载该插件。

如何销毁此插件的实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T16:23:45.400

您可以简单地通过从页面中删除对象标签来销毁插件实例；请注意，这只会破坏实例，不会卸载实际的插件模块/共享库。***没有办法强制浏览器完全卸载插件，除非重新启动浏览器***。

另请注意，当您浏览带有对象标签的页面时，插件实例将被销毁，因此如果用户被重定向到另一个页面，您实际上不需要做任何事情，因为对象标签将不再存在.

# php - pdo 防止 sql 注入

> ID：11805986
> 
> 赞同：2
> 
> 时间：2012-08-04T04:50:17.820
> 
> 标签：php, sql-injection

我正在尝试将访问者的输入插入数据库。
这行得通，但是 - 这足以防止 sql 注入吗？

```
<?php
$db_host = "localhost";
$db_name = "db_qadenza";
$db_user = "root";

$odb = new PDO ("mysql:host=" . $db_host . ";dbname=" . $db_name, $db_user);

if(isset($_POST['Submit']))
{
$user = $_POST['user'];
$pass = $_POST['pass'];
$mail = $_POST['mail'];
$confirm_key=md5(uniqid(rand()));

$q = "INSERT INTO members (user, pass, mail, confirm_key)
VALUES(:user, :pass, :mail, :confirm_key);";

$query = $odb->prepare($q);
$results = $query->execute(array(
":user"=>$user,
":pass"=>$pass,
":mail"=>$mail,
":confirm_key"=>$confirm_key,
));

exit();
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T05:02:55.907

您的代码有两个问题。

1.  您正在使用模拟的准备好的语句。这是 PDO_MYSQL 驱动程序的默认行为。为了规避它，您应该添加：

    ```
    $odb->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
    ```

    结合缺少用于与 DB 通信的字符集，这会使您的代码容易被注入。要建立连接，您应该使用：

    ```
    $odb = new \PDO('mysql:host=localhost;dbname=******;charset=UTF-8', 
                    'user', 'pass'); 
    ```

2.  您的密码散列方法不安全（或者实际上不存在）。相反，您应该为每个密码使用[`crypt()`](http://uk.php.net/manual/en/function.crypt.php)带有`CRYPT_BLOWFISH`或[PBKDF2和不同盐的函数。](http://en.wikipedia.org/wiki/PBKDF2)

此外，您可能会考虑使用[`bindParam()`](http://php.net/manual/en/pdostatement.bindparam.php)设置命名参数的方法，因为通过设置它们`execute()`会将值绑定为`PDO::PARAM_STR`，但还有[其他选项](http://php.net/manual/en/pdo.constants.php)，您可能会觉得有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T04:54:31.883

是的。[prepare($query)](http://www.php.net/manual/en/pdo.prepared-statements.php)方法确保不会发生sql 注入，只要将用户定义的值作为传递的变量输入，它们是给你的。

从链接页面：

> 如果应用程序专门使用预准备语句，开发人员可以确保不会发生 SQL 注入 [...]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T04:56:39.197

是的。我觉得很好。

如果您愿意，您还可以创建额外的 mysql 用户来限制 SQL 注入事件的范围。目前，您正在以`root`.

还要考虑使用密码散列方案，例如 salt + BCrypt。

# java - 为什么 System.exit(0) 在 NetBeans 中不起作用？

> ID：11805987
> 
> 赞同：0
> 
> 时间：2012-08-04T04:50:18.600
> 
> 标签：java, netbeans

我使用 NetBeans（在 Windows 下）并在我的 GUI 程序中添加了一个“关闭”按钮。在按钮上，我按鼠标右键-> 事件-> 动作-> actionPerformed。在代码中，我如下所示。

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    System.exit(0);
} 
```

但运行后，我按下“关闭”按钮，程序并没有退出。相反，它被阻止了，我不能再关闭它了。为什么以及如何处理它？

在 Linux NetBeans 下执行相同的程序时，“System.exit”运行良好，这是否意味着我需要在 Windows 下重新安装 NetBeans？或者任何人有同样的问题？

另外：下面的代码表示 jButton2 事件已注册到 ActionListener，它是由 NetBeans 自动添加的。

```
 jButton2.setText("Close");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                        jButton2ActionPerformed(evt);
                }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T04:55:53.730

**1.**首先，您是否使用**注册**了此关闭按钮`ActionListener`？

**2.**让`Event Dispatcher Thread`（EDT）**只处理GUI**，不要在这里做任何处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:05:46.247

我猜你正在使用 JFrame 来构建你的 GUI。在这种情况下，处理此问题的一种简单方法是添加以下行；

```
 jFrameName.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

# types - OCaml 类型/模块

> ID：11805995
> 
> 赞同：3
> 
> 时间：2012-08-04T04:52:18.630
> 
> 标签：types, module, ocaml

如果我有两个模块 A 和 B，并在模块 A 中定义一个类型，

```
type t1 = THIS of int | THAT of char 
```

然后想在模块 B 中进行一些模式匹配或构造该类型的对象，我必须使用类似的东西

```
A.THIS(3) 
```

这就是它迫使我做的事情，即使在我有一些声明之后

```
type t2 = A.t1 
```

在模块的签名和实现中。如果我想不那么冗长而不使用“A”怎么办？在模块 B 中？我可以制作一种全新的类型和一个将一种转换为另一种的函数，但这似乎很笨重。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T05:17:55.650

您可以使用`open`关键字，它类似于 Java 的`import`：

```
module A = struct
  type t1 = THIS of int | THAT of char
end

module B = struct
  open A
  let b = THIS 3
end 
```

如果要避免污染 module 的全局命名空间，`B`可以使用[表达式`let open ... in ...`，](http://caml.inria.fr/pub/docs/manual-ocaml/manual021.html#toc77)它是在 OCaml 3.12 中引入的：

```
module A = struct
  type t1 = THIS of int | THAT of char
end

module B = struct
  let b = let open A in THIS 3
end 
```

在某些特殊（且相对罕见）的情况下，您可能想要或必须使用`include`关键字而不是`open`. 您可以在 OCaml 手册的[打开模块路径](http://caml.inria.fr/pub/docs/manual-ocaml/manual019.html#@manual.kwd170)和[包含另一个结构的组件](http://caml.inria.fr/pub/docs/manual-ocaml/manual019.html#@manual.kwd171)部分中找到关于它们差异的很好的解释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T05:14:30.110

我不是模块专家，但你*可以*这样做（我刚刚测试过）：

（以 b.ml 计）：

```
type t1 = A.t1 = THIS of int | THAT of char 
```

当然，您也可以`open`使用 A 模块。通常这对我的口味来说太激烈了。为了让它不那么激烈，您可以在第三个模块中定义类型并在 A 和 B 中打开它。

# linux - Creating many communication instances in socket programming in c++ linux

> ID：11805996
> 
> 赞同：0
> 
> 时间：2012-08-04T04:52:30.070
> 
> 标签：linux, multithreading, sockets

I have created one application with server and client class which have methods for creating either creating a tcp socket or udp socket. Now my requirement is i have created two application instances of this application. Since application is in c++ in unix environment I am using putty software to run the application. I have opened two instances of putty. But now my requirement is as follows:

There can be multiple communication instances between the 2 application instances

*   Each communication instance, There can be multiple communication instances between the 2 application instances

*   Each communication instance, can be either UDP or TCP (determined from the config file)be either UDP or TCP (determined from the config fil

Anybody who knows how to create such multiple instances.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:19:12.403

Hmm, so there are two processes, but they want the processes to be able to communicate with each other via more than one pair of sockets? i.e. you could have two (or more) TCP socket connections between the two processes, and/or two (or more) pairs of UDP sockets sending packets back and forth.

If my above paragraph is correct (i.e. if I haven't misunderstood the request), that is certainly possible, although it's not terribly obvious what advantage you'd gain by doing it. Nevertheless, what you'd need to do is have each instance of your application create multiple sockets (either by socket()+bind() for a UDP socket, or by socket()+bind()+listen()+accept() for accepting an incoming TCP connection, or by socket()+connect() to initiate a TCP connection to the other program instance.

The tricky part with managing multiple sockets is handling the waiting correctly. With just one socket you can often get away with using the default blocking I/O semantics, and that way you can end up treating the socket something like a file, and just let each send() or recv() operation (etc) take however long it needs to take to complete before it returns to your calling function.

With more than one socket, on the other hand, you typically want to be able to respond to data on any of the sockets that are ready, which means that you can't just block waiting on any one particular socket, because if you do that, you may end up stuck waiting for a long time (potentially forever!) before that blocking call returns, and in the meantime you are unable to handle any data coming in from any of the other sockets. (The problem becomes particularly obvious when one of the connections is to a computer whose plug was just pulled, as it will typically take the TCP stack several minutes to figure out that the remote computer has gone away)

To deal with the problem, you'll typically want to either use non-blocking I/O and a socket-multiplexing call (e.g. poll() or select() or kqueue()), or spawn multiple threads and let each thread handle a single socket. Neither approach is particularly easy -- the socket-multiplexing approach works well once you get the hang of it, but the multiplexing calls' semantics are somewhat complex, and it takes a while to understand fully how it is intended to work. Non-blocking I/O complicates things further, since it means your code has to correctly deal with partial reads and writes. The multithreading approach seems simpler at first, but it has its own much larger and more subtle set of 'gotchas' (race conditions, deadlocks) that can cause much pain in the long run if you aren't very careful about what the threads are doing and how.

ps Since you're in a Unix environment, a third possible approach would be to fork() a child process for each socket. This would be similar to the multithreading approach, except a bit safer since your "threads" would actually be processes and each would have their own separate memory space, and thus they'd be less likely to trip over each other while doing their work. The downside would be higher memory usage, and also it becomes a bit harder (and slower) for the processes to communicate with each other due to the process space separation.

# sql-server - sql 05中日期时间列的总和

> ID：11805998
> 
> 赞同：0
> 
> 时间：2012-08-04T04:52:34.527
> 
> 标签：sql-server, database, datetime, datetime-format

我的 sql 表中有一个名为“total_hours_worked”的列，它是“datetime”数据类型，我想找出“sql server 中工作的总小时数”的总数。

这个怎么做？我用谷歌搜索但没有得到实际的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:21:29.347

试试这个。这里我也考虑过秒。

```
declare @T table
(
  total_hours_worked datetime
)

insert into @T values ('05:30:00')
insert into @T values ('10:00:00')
insert into @T values ('15:00:00')
insert into @T values ('05:25:45')

select SUM((DATEPART(hh,total_hours_worked)*60)+DATEPART(mi,total_hours_worked)+(DATEPART(ss,total_hours_worked)/(60.0)))/60.0  as TotalHours from @T 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T06:07:37.663

如果我正确理解您的数据，就会出现这样的情况。

```
declare @T table
(
  total_hours_worked datetime
)

insert into @T values ('05:30:00')
insert into @T values ('10:00:00')
insert into @T values ('15:00:00')

select sum(datediff(minute, 0, total_hours_worked)) / 60.0 as hours_worked
from @T 
```

结果：

```
hours_worked
---------------------------------------
30.500000 
```

如果您只需要存储小时数，您应该考虑使用整数数据类型而不是`datetime`. 它将更有效，更容易处理。