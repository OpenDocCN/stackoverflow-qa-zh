# StackOverflow 问答 000110000-000110999

# windows - Windows 许可问题

> ID：110008
> 
> 赞同：0
> 
> 时间：2008-09-21T02:07:44.233
> 
> 标签：windows, linux, licensing

这有点偏离编程主题，但仍然与我的编程项目有关。我正在编写一个使用自定义代理服务器的应用程序。我想用 C# 编写服务器，因为它更容易编写和维护，但我担心 Windows Server + CALS 与 Linux 服务器的许可成本（显然，没有 CALS）。可能有许多客户端站点拥有自己的服务器，每个站点有 200-500 个用户。

代理的工作方式类似于内容过滤器。获取返回网页，根据内容进行处理，然后返回网页，或者重定向到另一个 Web 服务器上的页面。不会有任何使用SQL server、用户认证等。

我需要 Cals 吗？如果是这样，设置具有适当许可的 Windows Server 需要多少费用（每台服务器，在美国）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-21T02:12:40.057

这确实是一个旧约问题。无论如何，没有什么比**联系您当地的 MS 经销商**更容易的了。由于 stackoverflow 本质上是一个国际站点，因此在我看来，问这样一个问题，答案最有可能因位置而异（**MS 许可证价格确实是高度可变的且因国家而异**），我认为不太可能得到有用的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-21T02:10:04.167

我意识到这并不能完全回答您的问题，但是如果您想使用 Linux，也许您想考虑使用[Mono](http://www.mono-project.com/Main_Page)。.Net 在 Linux 上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T03:57:53.300

如果用户实际上不会连接到任何 MS 服务器应用程序（例如 Exchange、SQL Server 等）并且不会直接使用任何操作系统功能（即连接到 UNC 路径），那么只需要服务器许可证即可运行操作系统的机器。当客户端连接到共享时，您需要 Windows Server CAL，邮件客户端需要 Exchange CAL，连接到数据库的应用程序需要 SQL Server CAL。如果您的服务器的客户端除了您的服务提供的端口外不会连接任何东西，那么您应该清楚，为 100 个用户构建服务器的成本不应该高于 10 个用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T02:23:23.447

根据您使用服务器的方式，您可能不需要为用户提供任何 CAL。某些功能需要购买 CAL，但有些则不需要。由于要求太模糊，因此没有真正的好方法来回答这个问题。它使用域服务吗？它使用 SQL 服务器吗？聚类？有很多变数。

如果您正在查看您可能支付的最高金额，请访问[CDW](http://www.cdw.com)并查看 Open License/Open Business 产品以进行估算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-21T02:30:52.087

如上所述，如果您使用自己的连接而服务器上没有其他任何东西，您将不需要 cals。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-21T02:43:25.053

我会用谷歌搜索商业服务器在 Linux 与 Windows 上的投资回报率，我对此一般没有选择，但我已经看到它们长期趋于平稳，从总体上看，Windows 许可证的初始成本实际上是最低的，而且微不足道。

选择最好的技术来解决最终用户的问题，记录原因，提供评估报告，包括维护成本、开发成本等。当您这样做时，您和您的客户将清楚答案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-21T03:48:06.223

如果您的用户没有连接到任何其他 Windows 资源（Active Directory、SQL Server、文件共享等），那么您不需要 CAL，但我相信您有类似外部连接器许可证的东西。 [还有一个“网络版”，看起来在 ~$400 的范围内](http://www.microsoft.com/windowsserver2003/howtobuy/licensing/pricing.mspx)。

此外，微软似乎将在[Windows Server 2008中完全取消对 Web 服务器的 CAL 限制](http://www.crn.com/software/205207950)

微软应该称他们的许可部门 Enigma ...

# c++ - 未在 IHTMLElement 事件处理程序中获取事件参数

> ID：110015
> 
> 赞同：4
> 
> 时间：2008-09-21T02:12:45.220
> 
> 标签：c++, internet-explorer, com, mshtml

我已经向 IHTMLElement 实例添加了回调，但是当为事件调用 IDispatch::Invoke 时，从来没有任何参数（即 pDispParams->cArgs 和 pDispParams->cNamedArgs 始终为 0）。例如，我为 onmouseup 事件添加回调。据我所知，这个事件的回调应该接收一个 MouseEvent 对象。那是对的吗？如果是这样，我需要做些什么来确保发生这种情况？

这是在 Windows XP SP2 上使用用于 IE 6 sp2（或更好）的 MSHTML。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-21T06:02:47.337

所有 DOM 事件的事件参数包括`onmouseup`存储在父窗口的`event`属性 ( `IHTMLWindow2::event`)

如果您还没有缓存父窗口，`IHTMLElement`则有一个`document`返回`IHTMLDocument`接口的属性。从中您可以查询`IHTMLDocument2`哪个具有`parentWindow`属性。`IHTMLWindow2`返回的具有您要查找的属性`event`。您应该能够从那里查询事件接口。

# java - JTable中的多列排序

> ID：110016
> 
> 赞同：6
> 
> 时间：2008-09-21T02:13:04.597
> 
> 标签：java, swing, jtable

我知道`JTable`可以按单列排序。但是是否可以允许多列排序或者我需要自己编写代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-21T02:24:20.340

`setSortKeys`您可以通过在调用[`RowSorter`](http://java.sun.com/javase/6/docs/api/javax/swing/RowSorter.html)您正在使用的方法时指定多个排序键来按多列排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T02:19:23.863

您应该能够设置 TableRowSorter 和与之关联的 Comparator。例子：

```
TableModel myModel = createMyTableModel();
JTable table = new JTable(myModel);
TableRowSorter t = new TableRowSorter(myModel);
t.setComparator(column that the comparator works against, Comparator<?> comparator);
table.setRowSorter(new TableRowSorter(myModel)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T02:23:05.820

查看[JXTable](http://swinglabs.org/docs/components/JXTable/tutorial.jsp)。JXTable 是JTable 的扩展，支持多列排序，以及JTable 不提供的其他功能。它可从 JDNC / SwingLabs 免费获得。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T06:16:18.177

来自 netbeans 集合的 ETable。
它是 org-netbeans-swing-outline.jar
的一部分，谷歌搜索可以找到它。ETable 主要是 Outline（TreeTable）的基础，但它具有内置的多列排序以及许多其他不错的功能

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-02-21T11:13:20.037

“我知道 Jtable 可以按单列排序。但是是否可以允许多列排序或者我需要自己编写代码？”

表排序和过滤由排序器对象管理。提供排序器对象的最简单方法是将 autoCreateRowSorter 绑定属性设置为 true；

```
JTable table = new JTable();
table.setAutoCreateRowSorter(true); 
```

此操作定义了一个行排序器，它是 javax.swing.table.TableRowSorter 的一个实例。

# asp.net - 用另一个图像标记图像以在 ASP.NET 中创建水印的最佳方法？

> ID：110018
> 
> 赞同：7
> 
> 时间：2008-09-21T02:14:21.003
> 
> 标签：asp.net, graphics, watermark, stamp

有人知道吗？希望能够在一张图片上用另一张图片作为水印，也可以做大批量。任何类型的现有库或您知道的技术都会很棒。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-21T02:15:19.753

这将回答您的问题：

[http://www.codeproject.com/KB/GDI-plus/watermark.aspx](http://www.codeproject.com/KB/GDI-plus/watermark.aspx)

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-21T02:15:47.070

我在[ImageMagick](http://www.imagemagick.org/script/index.php)上运气不错。它也有一个[用于 .NET 的 API](http://midimick.com/magicknet/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-21T02:46:50.850

这是我的全文：[http ://forums.asp.net/p/1323176/2634923.aspx](http://forums.asp.net/p/1323176/2634923.aspx)

使用 SDK 命令提示符并将活动文件夹导航到包含以下源代码的文件夹...然后使用编译代码

```
 vbc.exe watermark.vb /t:exe /out:watermark.exe 
```

这将在文件夹中创建一个 exe。exe 接受两个参数：ex。

```
 watermark.exe "c:\source folder" "c:\destination folder" 
```

这将遍历父文件夹和*所有*子文件夹。所有找到的 jpeg 都将使用您在代码中指定的图像添加水印并复制到目标文件夹。原始图像将保持不变。

// watermark.vb --

```
 Imports System
Imports System.Drawing
Imports System.Drawing.Drawing2D
Imports System.Drawing.Imaging
Imports System.IO

Namespace WatermarkManager
    Class Watermark
        Shared sourceDirectory As String = "", destinationDirectory As String = ""

        Overloads Shared Sub Main(ByVal args() As String)

            'See if an argument was passed from the command line
            If args.Length = 2 Then
                sourceDirectory = args(0)
                destinationDirectory = args(1)

                ' make sure sourceFolder is legit
                If Directory.Exists(sourceDirectory) = False
                    TerminateExe("Invalid source folder. Folder does not exist.")
                    Exit Sub
                End If

                ' try and create destination folder
                Try
                    Directory.CreateDirectory(destinationDirectory)
                Catch
                    TerminateExe("Error creating destination folder. Invalid path cannot be created.")
                    Exit Sub
                End Try

                ' start the magic
                CreateHierarchy(sourceDirectory,destinationDirectory)

            ElseIf args.Length = 1
                If args(0) = "/?"
                    DisplayHelp()
                Else
                    TerminateExe("expected: watermark.exe [source path] [destination path]")
                End If
                Exit Sub
            Else
                TerminateExe("expected: watermark.exe [source path] [destination path]")
                Exit Sub
            End If

            TerminateExe()
        End Sub

        Shared Sub CreateHierarchy(ByVal sourceDirectory As String, ByVal destinationDirectory As String)

            Dim tmpSourceDirectory As String = sourceDirectory

            ' copy directory hierarchy to destination folder
            For Each Item As String In Directory.GetDirectories(sourceDirectory)
                Directory.CreateDirectory(destinationDirectory + Item.SubString(Item.LastIndexOf("\")))

                If hasSubDirectories(Item)
                    CreateSubDirectories(Item)
                End If
            Next

            ' reset destinationDirectory
            destinationDirectory = tmpSourceDirectory

            ' now that folder structure is set up, let's iterate through files
            For Each Item As String In Directory.GetDirectories(sourceDirectory)
                SearchDirectory(Item)
            Next
        End Sub

        Shared Function hasSubDirectories(ByVal path As String) As Boolean
            Dim subdirs() As String = Directory.GetDirectories(path)
            If subdirs.Length > 0
                Return True
            End If
            Return False
        End Function

        Shared Sub CheckFiles(ByVal path As String)
            For Each f As String In Directory.GetFiles(path)
                If f.SubString(f.Length-3).ToLower = "jpg"
                    WatermarkImage(f)
                End If
            Next
        End Sub

        Shared Sub WatermarkImage(ByVal f As String)

            Dim img As System.Drawing.Image = System.Drawing.Image.FromFile(f)
            Dim graphic As Graphics
            Dim indexedImage As New Bitmap(img)
            graphic = Graphics.FromImage(indexedImage)
            graphic.DrawImage(img, 0, 0, img.Width, img.Height)
            img = indexedImage

            graphic.SmoothingMode = SmoothingMode.AntiAlias
            graphic.InterpolationMode = InterpolationMode.HighQualityBicubic

            Dim x As Integer, y As Integer
            Dim source As New Bitmap("c:\watermark.png")
            Dim logo As New Bitmap(source, CInt(img.Width / 3), CInt(img.Width / 3))
            source.Dispose()
            x = img.Width - logo.Width
            y = img.Height - logo.Height
            graphic.DrawImage(logo, New Point(x,y))
            logo.Dispose()

            img.Save(destinationDirectory+f.SubString(f.LastIndexOf("\")), ImageFormat.Jpeg)
            indexedImage.Dispose()
            img.Dispose()
            graphic.Dispose()

            Console.WriteLine("successfully watermarked " + f.SubString(f.LastIndexOf("\")+1))
            Console.WriteLine("saved to: " + vbCrLf + destinationDirectory + vbCrLf)

        End Sub

        Shared Sub SearchDirectory(ByVal path As String)
            destinationDirectory = destinationDirectory + path.SubString(path.LastIndexOf("\"))
            CheckFiles(path)
            For Each Item As String In Directory.GetDirectories(path)
                destinationDirectory += Item.SubString(Item.LastIndexOf("\"))

                CheckFiles(Item)

                If hasSubDirectories(Item)
                    destinationDirectory = destinationDirectory.SubString(0,destinationDirectory.LastIndexOf("\"))
                    SearchDirectory(Item)
                    destinationDirectory += Item.SubString(Item.LastIndexOf("\"))
                End If
                destinationDirectory = destinationDirectory.SubString(0,destinationDirectory.LastIndexOf("\"))
            Next
            destinationDirectory = destinationDirectory.SubString(0,destinationDirectory.LastIndexOf("\"))
        End Sub

        Shared Sub CreateSubDirectories(ByVal path As String)
            destinationDirectory = destinationDirectory + path.SubString(path.LastIndexOf("\"))
            For Each Item As String In Directory.GetDirectories(path)
                destinationDirectory += Item.SubString(Item.LastIndexOf("\"))
                Directory.CreateDirectory(destinationDirectory)
                Console.WriteLine(vbCrlf + "created: " + vbCrlf + destinationDirectory)

                If hasSubDirectories(Item)
                    destinationDirectory = destinationDirectory.SubString(0,destinationDirectory.LastIndexOf("\"))
                    CreateSubDirectories(Item)
                    destinationDirectory += Item.SubString(Item.LastIndexOf("\"))
                End If
                destinationDirectory = destinationDirectory.SubString(0,destinationDirectory.LastIndexOf("\"))
            Next
            destinationDirectory = destinationDirectory.SubString(0,destinationDirectory.LastIndexOf("\"))
        End Sub

        Shared Sub TerminateExe(ByVal Optional msg As String = "")
            If msg  ""
                Console.WriteLine(vbCrLf + "AN ERROR HAS OCCURRED //" + vbCrLf + msg)
            End If
            Console.WriteLine(vbCrLf + "Press [enter] to close...")
            'Console.Read()
        End Sub

        Shared Sub DisplayHelp()
            Console.WriteLine("watermark.exe accepts two parameters:" + vbCrLf + " - [source folder]")
            Console.WriteLine(" - [destination folder]")
            Console.WriteLine("ex." + vbCrLf + "watermark.exe ""c:\web_projects\dclr source"" ""d:\new_dclr\copy1 dest""")
            Console.WriteLine(vbCrLf + "Press [enter] to close...")
            Console.Read()
        End Sub
    End Class
End Namespace 
```

# .net - 在 OS X 上使用 BootCamp/VMWare 的 VisualStudio

> ID：110030
> 
> 赞同：4
> 
> 时间：2008-09-21T02:20:49.243
> 
> 标签：.net, visual-studio, macos, configuration, vmware

刚刚购买了 2.4GHz Intel Core 2 Duo iMac，配备 2GB 内存和 320GB 硬盘。我计划使用 BootCamp/VMWare 组合对其进行一些 .net 开发，因为 VMWare 授予对 bootcamp 分区的访问权限。

BootCamp 分区的推荐大小是多少？我应该给 VMWare 多少内存？有什么需要注意的陷阱吗？你目前的配置是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T07:09:24.120

我在我的 MacBook Pro 上使用 VMWare Fusion 2.0，我不会有任何其他方式。

如果您要在虚拟化中运行 Windows + VS 2008，我强烈建议您至少获得 4GB RAM。

我的 VM 有 2gb 的 RAM，你确实注意到了一点点卡顿，特别是当你编译一个大型解决方案时，或者同时运行大量应用程序时。

我强烈推荐 VMWare 而不是 Parallels，因为 VMWare 支持 2 个虚拟 CPU（我认为 v2 中最多支持 4 个虚拟 CPU）。

我建议您的 VM 使用大约 30gb 的磁盘，除非您想在上面玩游戏，否则我不推荐 BootCamp。为什么？拥有一个非常大的虚拟磁盘要容易得多，因为 BootCamp 会占用空间。此外，完整的虚拟磁盘更易于备份/快照/还原。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-21T02:22:09.847

虽然这不能直接解决您的问题，但我不建议在小于 2GB 的 RAM 上运行 VS 2008 和所有支持工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-21T02:28:25.870

我有一个 2.4 GHz Intel Core Duo Macbook Pro 和 4 GB RAM。我使用 VM Fusion/XP/Visual Studio 2005 进行了一些 .NET 开发，并为虚拟机分配了 1 GB 的 RAM。它对我来说很好用，我对它的性能和响应能力很满意。

对我来说唯一真正的烦恼是，默认情况下，某些功能键会触发 Mac 事件，并且不能用作跨步/进入/继续调试功能的键盘快捷键。例如，F10 触发暴露功能。但是，正如@Crash 指出的那样，可以在 vmware 首选项中禁用 mac 键盘快捷键。这就像一个魅力 - 感谢您的提示！

@Soeren Kuklau：感谢您的建议，但我认为我不清楚我的问题。我已经配置了“使用标准功能键”选项。我指的是默认情况下，F10 和 F11 触发器公开操作。这是我真正的烦恼：要使用键盘快捷键进行调试，您必须更改默认设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T06:45:19.123

> 对我来说唯一真正的烦恼是某些功能键会触发 Mac 事件，并且不能用作跨步/进入/继续调试功能的键盘快捷键。

启用系统偏好 → 键盘和鼠标 → 键盘 → 使用所有 F1、F2 等键作为标准功能键。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T00:01:34.107

> 对我来说唯一真正的烦恼是某些功能键会触发 Mac 事件，并且不能用作跨步/进入/继续调试功能的键盘快捷键。

我在带有 Vista x64 的 MBP 上使用 VmWare Fusion 2.0。虚拟机配置中有一个选项可让您禁用 mac-specific-keys。一旦我禁用它，我就可以在 Visual Studio 2008 中毫无问题地使用 F10 和 F11，一旦我切换回 mac os，它们就会按照系统偏好设置中的设置（在我的情况下，它们表现为标准功能键）。

> BootCamp 分区的推荐大小是多少？我应该给 VMWare 多少内存？有什么需要注意的陷阱吗？你目前的配置是什么？

我有一个 MBP 15"，有 4GB 内存。我使用 VmWare Fusion 2.0 和 Vista x64。我将虚拟驱动器配置为使用 40GB（我只安装了 Vista、Visual Studio 2008 Pro (c#+web dev)、MSDN 和 Microsoft Access 2007。我设置了2GB的ram供vm和一个cpu使用。我主要在窗口模式下使用Vista，我可以非常顺利地切换回Leopard，vs 2008的体验真的很棒。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-21T02:27:05.733

我在 Mac (AMD 2.4 GHz) 上运行 windows Xp，分配了 1.5GB，速度相当慢，但它是基于文件的磁盘。我同意上述观点，即您需要 ram，尤其是 vista。我不认为 2GB 基础对于带有 vista 的 mac 和 vmware 来说是足够的。

对于分区，为 os + 软件提供至少 40 Gb 的空间，并为数据提供其他额外的空间。如果您可以为页面文件创建一个额外的物理分区，那也会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T09:09:02.060

您可能还会发现[这里](https://stackoverflow.com/questions/44601/net-development-on-a-mac-tips#44710)的建议很有帮助 - 几周前 Stack Overflow 上已经介绍了这些内容。

就我个人而言，我会说不要费心尝试为 VM 提供超过 2Gb 的内存（我的结果好坏参半，给出了超过 1 的内存，但你的里程可能会有所不同，我的经验都是使用 VMware Fusion 1）。当然，我也会回应上面关于不参加 Bootcamp 的评论。

# xslt - XSLT 是一种函数式编程语言吗？

> ID：110031
> 
> 赞同：24
> 
> 时间：2008-09-21T02:21:44.793
> 
> 标签：xslt, functional-programming, fxsl

关于函数式编程语言的几个问题让我开始思考 XSLT 是否是一种函数式编程语言。如果没有，缺少哪些功能？XSLT 2.0 是否缩短或缩小了差距？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-09-21T02:29:02.763

XSLT 是声明性的，而不是有状态的。

虽然 XSLT 基于函数式编程思想，但它不是一个完整的函数式编程语言，它缺乏将函数视为第一类数据类型的能力。它具有诸如惰性评估之类的元素，以减少不需要的评估以及没有显式循环。

不过，就像函数式语言一样，我认为它可以很好地与跨多个处理器的自动安全多线程并行化。

来自[XSLT 上的维基百科](http://en.wikipedia.org/wiki/XSLT)：

> 作为一种语言，XSLT 受到函数式语言以及基于文本的模式匹配语言（如 SNOBOL 和 awk）的影响。它最直接的前身是 DSSSL，这种语言对 SGML 执行的功能与 XSLT 对 XML 执行的功能相同。XSLT 也可以被认为是一个模板处理器。

这是一个在FXSL 的帮助下使用[XSLT 作为函数式语言的好网站。](http://www.idealliance.org/papers/extreme/proceedings/html/2006/Novatchev01/EML2006Novatchev01.html)FXSL 是一个实现对高阶函数的支持的库。

由于 FXSL，我认为 XSLT 本身不需要功能齐全。也许 FXSL 将来会作为 W3C 标准包含在内，但我没有这方面的证据。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-29T18:37:34.007

我相信你们现在已经找到了这个链接:-) [http://fxsl.sourceforge.net/articles/FuncProg/Functional%20Programming.html](http://fxsl.sourceforge.net/articles/FuncProg/Functional%20Programming.html)。

XSLT 中的好函数毕竟是一流的公民，但有一些变通方法 :-)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-19T15:12:48.213

这就是我编程时的感觉。

XSLT 完全基于定义函数并将它们应用于输入流中的选定事件。

XSLT 允许您设置一个变量。函数式编程不允许函数有副作用——这是一个大问题。

尽管如此，在 XSLT 中编写时，“感觉就像以 FP 方式工作一样。您正在使用输入 - 您没有更改它 - 以创建输出。

这是一个非常非常不同于使用 DOM API 时使用的编程模型。DOM 根本不分离输入和输出。你得到了一个数据结构——你可以按照你认为合适的方式破坏它——没有犹豫、限制或悔恨。

只要说你喜欢 FP 及其背后的原则，你可能会觉得在其中工作很舒服。就像事件驱动编程的经验——以及 XML 本身一样——也会让您对它感到满意。

如果您唯一的经验是使用自上而下的非事件驱动程序 - 那么 XSLT 将是非常陌生的，确实是陌生的风景。至少一开始是这样。积累一点经验，然后当 XPath 表达式和事件处理对您来说真的很舒服时再回到 XSLT，将会获得丰厚的回报。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-21T02:23:46.287

在大多数情况下，使 XSLT 不是 100% 函数式编程语言的原因在于它无法将函数视为一流的数据类型。

可能还有其他一些——但这是显而易见的答案。

祝你好运！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-21T16:53:46.163

Saxon-SA 引入了一些使 XSLT 正常工作的扩展函数。您可以使用[`saxon:function()`](http://www.saxonica.com/documentation/extensions/functions/function.html "Saxonica：XSLT 和 XQuery 处理：saxon:function()")创建一个函数值（实际上是一个`{http://net.sf.saxon/java-type}net.sf.saxon.expr.UserFunctionCall`值），然后使用`saxon:call()`.

Saxon-B 具有与 和 配对类似的[`saxon:expression()`](http://www.saxonica.com/documentation/extensions/functions/expression.html "Saxonica：XSLT 和 XQuery 处理：saxon:expression()")功能`saxon:eval()`。不同之处在于它`saxon:expression()`采用任何 XPath 表达式并`saxon:eval()`对其求值，而采用调用`saxon:function()`的函数的名称。`saxon:call()`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-11T12:26:26.250

这不是一个真正的论点，因为您只能声明变量，而不能在声明后更改它们的值。从这个意义上说，它是声明式而不是命令式，正如 Novatchev 先生的文章中所述。

像 Scheme 或 Erlang 这样的函数式编程语言也可以让你声明变量，在 Haskell 中你也可以这样做：

-- 函数 'test' 获取变量 x 并将其添加到列表 xs 的每个元素上

```
test :: [Int] -> [Int]
test xs = map (+ x) xs
where x = 2 
```

# database - 星型设计

> ID：110032
> 
> 赞同：63
> 
> 时间：2008-09-21T02:22:02.467
> 
> 标签：database, design-patterns, data-warehouse, star-schema, dimensional-modeling

Star-Schema 设计对数据仓库来说是必不可少的吗？或者你能用另一种设计模式做数据仓库吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2008-09-21T13:46:24.540

为数据仓库系统使用[星型模式](http://en.wikipedia.org/wiki/Star_schema)可以获得几个好处，并且在大多数情况下，将它们用于顶层是合适的。您可能还拥有一个操作数据存储 (ODS) - 一种规范化的结构，它保存“当前状态”并促进诸如数据整合之类的操作。然而，在某些合理的情况下，这是不可取的。我曾经有机会构建带有和不带有 ODS 层的系统，并且在每种情况下选择架构都有特定的原因。

无需深入了解数据仓库架构的细节或发起 Kimball 与 Inmon 的激烈战争，星型模式的主要好处是：

*   大多数数据库管理系统在查询优化器中都有工具来执行“星形转换”，使用[位图索引](http://en.wikipedia.org/wiki/Bitmap_index)结构或 [索引交集](http://www.databasejournal.com/features/mssql/article.php/1438821)来快速解析谓词。这意味着在解决选择之前，可以在不触及事实表（通常比索引大得多）的情况下从星型模式中进行选择。

*   [对星型模式进行分区](http://en.wikipedia.org/wiki/Partition_(database))相对简单，因为只需要对事实表进行分区（除非您有一些圣经中的大维度）。 [分区消除](http://blogs.msdn.com/sqlcat/archive/2006/02/17/Partition-Elimination-in-SQL-Server-2005.aspx)意味着查询优化器可以忽略不可能参与查询结果的分区，从而节省 I/O。

*   [在星形模式上实现缓慢变化的维度](http://en.wikipedia.org/wiki/Slowly_changing_dimension)比在雪花模式上更容易实现。

*   [与雪花](http://en.wikipedia.org/wiki/Snowflake_schema)或 ER 模式相比，该模式更易于理解，并且往往涉及更少的连接。您的报告团队会因此而爱上您

*   [星型模式更易于使用，并且（更重要的是）可以很好地与诸如Business Objects](http://en.wikipedia.org/wiki/Business_Objects_(company))或[Report Builder](http://msdn.microsoft.com/en-us/library/ms155933.aspx)之类的临时查询工具一起使用。作为开发人员，您对这些工具生成的 SQL 几乎没有控制权，因此您需要为查询优化器提供尽可能多的帮助。星型模式使查询优化器出错的机会相对较少。

通常，您的报告层会使用星型模式，除非您有特定的理由不这样做。如果您有多个源系统，您可能希望使用规范化或雪花模式来实现[操作数据存储](http://www.dmreview.com/issues/19980701/469-1.html)以累积数据。这更容易，因为 ODS 通常不做历史记录。在星型模式中跟踪历史状态，这比使用规范化结构更容易做到。标准化或雪花状操作数据存储反映了“当前”状态，并且不包含数据中固有的任何历史视图。

ODS 加载过程与数据清理和一致性有关，这对于规范化结构来说更容易实现。一旦您在 ODS 中拥有干净的数据，维度和事实负载就可以使用通用或相对简单的机制相对简单地跟踪历史记录（随时间的变化）；这使用星型模式要容易得多，许多 ETL 工具（例如）提供了用于缓慢变化维度的内置工具，并且实现通用机制相对简单。

以这种方式对系统进行分层提供了职责分离——业务和数据清理逻辑在 ODS 中处理，星型模式负载处理历史状态。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2011-11-18T14:19:16.713

数据仓库文献中一直存在关于应在数据仓库架构中的***何处***[应用星型模式](http://en.wikipedia.org/wiki/Star_schema)设计的争论。

简而言之， [Kimball](http://en.wikipedia.org/wiki/Ralph_Kimball)非常提倡在数据仓库中仅使用 Star-Schema 设计，而[Inmon](http://en.wikipedia.org/wiki/Bill_Inmon)首先希望使用[规范化的 3NF](http://en.wikipedia.org/wiki/3NF)设计来构建 Enterprise Datawarehouse，然后在数据集市中使用 Star-Schema 设计。

除了这里你还可以说[雪花模式设计](http://en.wikipedia.org/wiki/Snowflake_schema)是另一种方法。

第四种设计可能是[Data Vault Modeling](http://en.wikipedia.org/wiki/Data_Vault_Modeling)方法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-21T02:48:07.570

星型模式用于实现对大量数据的高速访问。通过减少满足可能针对主题区域进行的任何查询所需的连接数量，可以实现高性能。这是通过允许维度表中的数据冗余来完成的。

您必须记住，星型模式是仓库顶层的模式。所有模型还涉及仓库堆栈底部的暂存模式，有些还包括一个持久转换的合并暂存区域，其中所有源系统都合并到 3NF 建模模式中。各种主题领域位于此之上。

顶级星型模式的替代方案包括一种变体，即雪花模式。Dan Linstedt 提出的[Data Vault Modeling](http://www.danlinstedt.com/)也可能会进行一些调查。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-21T02:25:28.140

关于星型模式的事情是，它们是大多数人想要用数据仓库做的事情的自然模型。例如，很容易生成具有不同粒度级别（例如月、日或年）的报告。将典型的业务数据插入星型模式也很有效，这也是数据仓库的一个常见且重要的特性。

您当然可以使用您想要的任何类型的数据库，但除非您非常了解您的业务领域，否则如果您使用星型模式，您的报告可能不会像它们那样有效地运行。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-21T02:54:00.520

星型模式非常适合数据仓库的最后一层。你如何到达那里是另一个问题。据我所知，有两大阵营，比尔·英蒙和拉尔夫·金博尔的阵营。如果/当您决定选择明星时，您可能想看看这两个家伙的理论。

此外，一些报告工具非常喜欢星型模式设置。如果您被锁定在特定的报告工具中，那可能会推动报告集市在您的仓库中的样子。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-06-09T16:15:26.997

星型模式是适合常规数据仓库需求的关系数据库的逻辑数据模型；如果给定了关系环境，星型或雪花模式将是一种很好的设计模式，在许多 DW 设计方法中都是硬连线的。

然而，除了关系数据库引擎之外，还有其他一些引擎，它们可以用于高效的数据仓库。多维存储引擎对于 OLAP 任务（例如 TM1）可能非常快；在这种情况下，我们不能应用星型模式设计。需要特殊逻辑模型的其他示例包括 XML 数据库或面向列的数据库（例如，实验性[C 存储](http://db.csail.mit.edu/projects/cstore)）。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-22T03:04:48.537

没有它是可能的。但是，您会让自己的生活变得艰难——您的组织将希望使用位于 DW 之上的标准工具，并且这些工具将期望使用星型模式——将花费大量精力将方形钉子安装在圆形中洞。

许多数据库级优化假设您有一个星型模式；您将花费大量时间进行优化和重组，以使数据库使用您的非明星布局做“正确的事情”。

确保利大于弊。。

（听起来我以前去过那里吗？）

-D

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-31T11:11:24.783

我们需要解决三个问题。

1）如何通过连接它们内部和之间的表、在我们提取时清理数据、创建派生等来从操作源系统中获取数据而不给它们施加过度压力。

2) 如何将来自不同来源的数据——一些遗留的、一些基于文件的、来自不同部门的数据合并成一个完整的、准确的、有效存储的整体，对业务进行建模，并且不反映源系统的结构。请记住，系统更改/更换相对较快，但业务的基本模型变化缓慢。

3) 如何构建数据以满足业务中特定人员/部门的特定分析和报告要求，尽可能快速和准确。

这三个非常不同的问题的解决方案需要不同的架构层来解决它们

暂存层我们复制源的结构，但每晚只加载来自源的更改数据。一旦数据从暂存层进入下一层，数据就会被丢弃。查询是带有简单 data_time 过滤器的单表查询。对源的影响很小。

企业层 这是一个面向业务的第三范式数据库。数据从暂存层提取（然后丢弃）到企业层，在那里进行清理、集成和规范化。

表示（星型模式）层在这里，我们对维度进行建模以满足特定要求。数据被故意去规范化以减少连接的数量。在企业层中可能占用多个表的层次结构被折叠成单个维度表，并且多个事务表可以合并成单个事实表。

你总是面临这三个问题。如果选择去掉企业层，还是要解决第二个问题，但是必须在星型层做，在我看来，这是做错的地方。

# drupal - 如何确定我应该安装 Drupal 5.x 还是 6.x？

> ID：110043
> 
> 赞同：6
> 
> 时间：2008-09-21T02:24:27.860
> 
> 标签：drupal, content-management-system

我打算安装 Drupal。有什么理由不安装最新的 6.x 版本而不是 5.x 分支？是否有任何仅 5.x 的非常好的模块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-21T02:52:16.233

除非你有一个你不能没有的 5.x 模块，**并且**你知道正在努力升级到 6.x，否则只需使用 6.xie 如果你知道你有升级，现在只从 5.x 开始您的站点到 6.x（然后是 7.x）的路径。如果模块没有被积极开发，这意味着当 7.x 推出时你将不受支持，所以你最好现在用 6.x 解决没有该模块的问题，而不是等到你的网站是开发并启动并运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-21T02:46:50.880

我已经找到了足够多的模块来愉快地在 Drupal 6.x 上运行我的网站。我想我唯一想念的 5.x 模块是一个非常容易集成 Google 广告的模块，而且它可能已经更新了，我只是最近没有检查过。我没有足够的流量来让广告值得花时间设置它们，所以我只使用广告活动的搜索部分。

Drupal 7.x 现在正在开发中，所以我希望任何尚未从 5.x 迁移到 6.x 的东西都不再被开发，而且可能并不是真正需要的。

最后，看看您可能需要哪些模块。使用 Drupal 网站上的帐户，您可以按安装类型进行过滤。我发现 6.x 在某些方面（管理和升级模块）更容易使用，总的来说，我在 Drupal 6.x 下维护我的网站比在 4.x 或 5.x 下更容易.

我还认为 6.x 运行得更快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-23T00:35:17.543

我的老板坚持要在 Drupal 6 发布后立即为客户制作网站。这是一个令人头疼的问题，因为视图和 CCK 以及许多其他模块都没有完成。他们的理由是我们最终必须升级到 6，我们不想回去重做这些站点。最终我们在使用模块的开发版本时有很多变通方法，以至于每次升级模块或核心本身时都很痛苦。

值得庆幸的是，情况已不再如此。Views、CCK 和大多数其他模块现在已经为 6 做好了准备并且稳定了。我们使用的唯一尚未升级的模块是电子商务，而且看起来不会升级，因为 ubercart 几乎是 Drupal 的标准商务功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-26T01:29:21.350

几个月前我们问过自己同样的问题（就在 Drupal 6 完成并发布之前）

我们办公室的开发资源有限，我们已经发布了几个 D5 站点和一个 D5 销售应用程序。

我们选择了 Drupal 6。

这个决定是在考虑了我们与之互动的核心之后做出的。除了默认的 Drupal 安装之外，CCK 和 Views 是唯一的顽固关键组件，项目的参与度和活力非常令人鼓舞。

真正非常重要的东西已经/正在被移植到 D6，*哇，这会很好*，p2 的东西很受欢迎。

如果您正在进行任何模块开发，D6 是赢家。

如果您已经对 D5 非常满意，那就坚持下去。

我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-18T13:00:27.920

如果您在发现版本 6 具有您需要的模块之前没有运行过 Drupal。此外，模块每天都会被移植和创建，因此您丢失的模块很可能正在开发中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T09:22:56.000

作为一个模块开发者，我觉得 Drupal 6 的 API 比版本 5 更成熟。所以即使你决定选择 6，然后发现缺少一个模块，开发到 6 也很容易。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-24T05:07:25.727

[资产模块](http://drupal.org/project/asset)还不能用于 D6，甚至在开发分支中也不可用。我听说过很多关于它作为管理各种媒体文件的单一方式的好处，但大多数网站可能很乐意没有它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-23T02:09:55.977

一个重要的与 CCK 相关的未准备好 D6 生产的模块是[filefield](http://www.drupal.org/project/filefield)。如果你没有对图像和媒体做任何实质性的事情，这可能不是问题，但如果你打算做任何严肃的 DAM，这可能值得考虑。否则，我认为我们（终于！）到了使用 D6 比使用 D5 更有意义的地步。无论哪种方式，绝对值得花时间根据您的特定需求构建站点，找出您需要的模块并找出其中是否有任何尚未更新。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T20:56:27.663

对我来说，在选择使用哪个版本时，缺少[protx支付模块是一个交易破坏者。](http://drupal.org/project/protx)

最好的办法是在开始之前获得**完整的需求列表**，并确保它们在 6 中都可用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-09-18T15:36:28.527

现在我已经使用了 Views 2，我再也不会回去了（除非是重新访问旧项目）。

我认为现在，所有有价值的模块和主题都已迁移，现在我看到新的趋势（实际上很好的主题）只有 drupal 6 和相当多的必备模块。

# desktop-sharing - 不错的桌面共享应用

> ID：110052
> 
> 赞同：3
> 
> 时间：2008-09-21T02:28:37.397
> 
> 标签：desktop-sharing, working-remotely

我即将搬家并全职远程工作。现在我们使用 Yugma 和 Skype 来召开开发者会议并展示桌面，但我们不为 Yugma 付费，因此无法授予控制权。在我推荐任何不是免费的东西之前，哪些是允许您与多个其他人共享您的桌面并且还能够授予对您的桌面的控制权的应用程序的最佳选择。

我个人只需要担心在 XP/Vista 上运行的软件，但可以随意在这里放置任何选项，进行搜索，但没有找到关于这个特定主题的任何内容，所以希望它可以成为每个人都可以来的好地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-21T02:31:00.043

VNC 是免费的，跨平台的，效果很好。我们将它用于连接很多人的相当大的演示文稿，因此它可以处理很多观众。我一直用它来远程控制我网络上的其他计算机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T02:30:43.447

试试[TeamViewer](http://www.teamviewer.com/)。很酷的一点是，您不必担心在防火墙上打开/转发端口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-21T02:33:50.660

[UltraVNC](http://www.uvnc.com/)，他们为您的客户打包了一些不错的附加功能，使您能够访问他们的桌面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-21T02:31:55.347

您是否尝试过**NetMeeting** / **Windows 会议空间**？根据您的描述，我相信适合您的要求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-21T02:35:26.163

尝试[虚拟网络计算](http://en.wikipedia.org/wiki/Virtual_Network_Computing)- 有许多免费客户端可用，其中大多数是兼容的，但提供了自己的一组高级功能。

编辑：哇，被三个人殴打：/

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-21T02:35:47.553

我使用 Acrobat 连接。效果很好，最多 15 人，网络摄像头，桌面共享，但每月花费 40 美元。不过在我看来还是值得的。基于 Flash，因此它非常适合许多系统。

编辑：看起来他们正在转换，很难找到该站点。将名称更改为 acrobat connectnow：

[http://www.adobe.com/acom/connectnow/](http://www.adobe.com/acom/connectnow/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-21T03:15:21.403

[Gobby](http://gobby.0x539.de/trac/)是一个非常酷的协作编辑器。您可以与其他人一起处理一组文件并与他们聊天。

# ruby-on-rails - 在 Rails 中存储应用程序特定配置的最佳方式是什么？

> ID：110078
> 
> 赞同：6
> 
> 时间：2008-09-21T02:43:01.107
> 
> 标签：ruby-on-rails, configuration

我需要在 Rails 中存储应用程序特定的配置。但它必须是：

*   可在任何文件中访问（模型、视图、助手和控制器）
*   指定（或不指定）环境，这意味着每个环境都可以覆盖 environment.rb 中指定的配置

我尝试使用 environment.rb 并放置类似的东西

```
USE_USER_APP = true 
```

这对我有用，但是当试图在特定环境中覆盖它时它不会起作用，因为例如 production.rb 似乎在 Rails:Initializer.run 块内。

那么，有人吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-21T02:57:47.640

看看 Configatron：http: [//github.com/markbates/configatron/tree/master](http://github.com/markbates/configatron/tree/master)

我还没有使用它，但他现在正在积极开发它，看起来很不错。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-21T05:20:24.817

最基本的事情是从你的 environment.rb 中设置一个类变量。我为谷歌分析做了这个。本质上，我想要一个不同的密钥，具体取决于我所处的环境，因此开发或登台不会扭曲指标。

我就是这样做的。

在`lib/analytics/google_analytics.rb`：

```
module Analytics
  class GoogleAnalytics
    @@account_id = nil

    cattr_accessor :account_id
  end
end 
```

然后在`environment.rb`或`environments/production.rb`任何其他环境文件中：

```
Analytics::GoogleAnalytics.account_id = "xxxxxxxxx" 
```

然后在您需要引用的任何地方，比如使用 Google Analytics JavaScript 的默认布局，您只需调用`Analytics::GoogleAnalytics.account_id`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-21T11:52:27.543

我昨天正在帮助一位朋友设置[里卡多提到的解决方案。](http://kpumuk.info/ruby-on-rails/flexible-application-configuration-in-ruby-on-rails/)我们通过加载类似于此的 YAML 文件（从这里的内存中获取）来稍微破解它：

```
require 'ostruct'
require 'yaml'
require 'erb'
#config = OpenStruct.new(YAML.load_file("#{RAILS_ROOT}/config/config.yml"))
config = OpenStruct.new(YAML.load(ERB.new(File.read("#{RAILS_ROOT}/config/config.yml")).result))
env_config = config.send(RAILS_ENV)
config.common.update(env_config) unless env_config.nil?
::AppConfig = OpenStruct.new(config.common) 
```

这允许他在配置中嵌入 Ruby 代码，就像在 Rhtml 中一样：

```
development:
  path_to_something: <%= RAILS_ROOT %>/config/something.yml 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-21T02:56:39.763

[我在这里](http://kpumuk.info/ruby-on-rails/flexible-application-configuration-in-ruby-on-rails/)找到了一个好方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-07-19T20:46:12.840

使用环境变量。Heroku 使用这个。请记住，如果您在代码库中保留配置，任何有权访问代码的人都可以访问任何秘密配置（aws api 密钥、网关 api 密钥等）。

daemontool 的 envdir 是设置配置的好工具，我很确定 Heroku 就是用它来为应用程序提供环境变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T22:36:25.037

我使用了[Rails Settings Cached](https://github.com/huacnlee/rails-settings-cached)。

它使用起来非常简单，可以缓存您的配置值并允许您动态更改它们。

# c# - LinearGradientBrush 神器解决方法？

> ID：110081
> 
> 赞同：9
> 
> 时间：2008-09-21T02:45:22.927
> 
> 标签：c#, gdi+

.net 中的 LinearGradientBrush（或者甚至在整个 GDI+ 中？）似乎有一个严重的错误：有时，它会引入工件。（参见[此处](http://www.tech-archive.net/Archive/DotNet/microsoft.public.dotnet.languages.csharp/2007-01/msg01592.html)或[此处](http://www.experts-exchange.com/Microsoft/Development/.NET/Visual_CSharp/Q_23329115.html)- 基本上，线性渐变的第一条线是在 endcolor 中绘制的，即从白色到黑色的渐变将以黑色线开始，然后以适当的白色到黑色渐变开始）

我想知道是否有人找到了解决方法？这是一个非常烦人的错误:-(

这是Artifacts的图片，注意有2个LinearGradientBrushes：

[替代文字 http://img142.imageshack.us/img142/7711/gradientartifactmm6.jpg](http://img142.imageshack.us/img142/7711/gradientartifactmm6.jpg)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-21T02:55:46.460

我在使用渐变画笔时也注意到了这一点。我唯一有效的解决方法是始终在所有边缘上创建比将要使用它绘制的区域大 1 像素的渐变画笔矩形。这可以保护您免受所有四个方面的问题。缺点是边缘使用的颜色与您指定的颜色相差很小，但这比绘图伪影问题要好！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-21T03:05:14.720

您可以在矩形上使用漂亮的 Inflate(int i) 方法来获得更大的版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T17:42:52.380

我会在上面巧妙地回答菲尔的回答（这确实是一个评论，但我没有那个特权）。我看到的行为与文档相反，[文档](http://msdn.microsoft.com/en-us/library/ms142563%28v=vs.85%29.aspx)中说：

> 起始线垂直于方向线并通过矩形的角之一。起点线上的所有点都是起点颜色。然后结束线垂直于方向线并穿过矩形的角之一。结束线上的所有点都是结束颜色。

也就是说，在某些情况下，您会得到一个像素环绕。据我所知（通过实验），我只有在矩形的宽度或高度为奇数时才会遇到问题。因此，为了解决这个错误，我发现当且仅当尺寸（扩展前）为奇数时，将 LinearGradientBrush 矩形增加 1 个像素就足够了。换句话说，始终将画笔矩形向上舍入宽度和高度的下一个偶数像素。

所以要填充一个矩形`r`，我使用类似的东西：

```
Rectangle gradientRect = r;
if (r.Width % 2 == 1)
{
    gradientRect.Width += 1;
}
if (r.Height % 2 == 1)
{
    gradientRect.Height += 1;
}
var lgb = new LinearGradientBrush(gradientRect, startCol, endCol, angle);
graphics.FillRectangle(lgb, r); 
```

疯狂但真实。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-22T22:11:36.853

至少使用 WPF，您可以尝试使用`GradientStop`s 在边缘获得 100% 正确的颜色，即使在重绘时也是如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-15T16:02:23.573

我在我的 C++ 代码中也遇到了伪像。解决问题的方法是为 Graphics 对象设置非默认 SmoothingMode。请注意，所有非默认平滑模式都使用坐标系，该坐标系绑定到像素的中心。因此，您必须正确地将矩形从 GDI 转换为 GDI+ 坐标：

```
 Gdiplus::RectF      brushRect;

    graphics.SetSmoothingMode( Gdiplus::SmoothingModeHighQuality );

    brushRect.X = rect.left - (Gdiplus::REAL)0.5;
    brushRect.Y = rect.top - (Gdiplus::REAL)0.5;
    brushRect.Width = (Gdiplus::REAL)( rect.right - rect.left );
    brushRect.Height = (Gdiplus::REAL)( rect.bottom - rect.top ); 
```

似乎 LinearGradientBrush 仅在高质量模式下才能正常工作。

# java - 哪个循环的性能更好？为什么？

> ID：110083
> 
> 赞同：51
> 
> 时间：2008-09-21T02:46:43.393
> 
> 标签：java, performance, string, garbage-collection

```
String s = "";
for(i=0;i<....){
    s = some Assignment;
} 
```

或者

```
for(i=0;i<..){
    String s = some Assignment;
} 
```

我再也不需要在循环外使用's'了。第一个选项可能更好，因为每次都不会初始化新的字符串。然而，第二个将导致变量的范围仅限于循环本身。

编辑：回应 Milhous 的回答。将字符串分配给循环内的常量是没有意义的，不是吗？不，这里的“一些分配”是指从被迭代的列表中获得的变化值。

另外，问题不是因为我担心内存管理。只是想知道哪个更好。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2008-09-21T06:24:46.287

### 有限的范围是最好的

使用您的第二个选项：

```
for ( ... ) {
  String s = ...;
} 
```

### 范围不影响性能

如果您反汇编从每个编译的代码（使用 JDK 的`javap`工具），您将看到循环在两种情况下都编译为完全相同的 JVM 指令。另请注意，[Brian R. Bondy 的](https://stackoverflow.com/questions/110083/which-of-these-loops-is-better-code-in-terms-of-performance-garbage-collection#110095)“选项 #3”与选项 #1 相同。使用更严格的范围时，不会从堆栈中添加或删除任何额外的内容，并且在两种情况下都在堆栈上使用相同的数据。

### 避免过早初始化

两种情况之间的唯一区别是，在第一个示例中，变量`s`被不必要地初始化。这是与变量声明位置不同的问题。这增加了两条浪费的指令（加载字符串常量并将其存储在堆栈帧槽中）。一个好的静态分析工具会警告您，您永远不会读取您分配给 的值`s`，并且一个好的 JIT 编译器可能会在运行时忽略它。

您可以简单地通过使用空声明（即`String s;`）来解决此问题，但这被认为是不好的做法，并且具有下面讨论的另一个副作用。

通常，将虚假值`null`分配给变量只是为了消除编译器错误，即在未初始化变量的情况下读取变量。这个错误可以被认为是变量范围太大的提示，并且它在需要接收有效值之前被声明。空声明迫使您考虑每个代码路径；不要通过分配虚假值来忽略这个有价值的警告。

### 保留堆栈插槽

如前所述，虽然 JVM 指令在这两种情况下是相同的，但存在一个微妙的副作用，这使得在 JVM 级别上最好尽可能使用最有限的范围。这在该方法的“局部变量表”中可见。考虑一下如果你有多个循环，变量声明在不必要的大范围内会发生什么：

```
void x(String[] strings, Integer[] integers) {
  String s;
  for (int i = 0; i < strings.length; ++i) {
    s = strings[0];
    ...
  }
  Integer n;
  for (int i = 0; i < integers.length; ++i) {
    n = integers[i];
    ...
  }
} 
```

变量`s`和`n`可以在它们各自的循环中声明，但由于它们不是，编译器在堆栈帧中使用两个“槽”。如果它们在循环中声明，编译器可以重用相同的槽，使堆栈帧更小。

### 真正重要的是什么

然而，这些问题大多无关紧要。一个好的 JIT 编译器会发现无法读取您浪费分配的初始值，并优化分配。在这里或那里保存一个插槽不会成就或破坏您的应用程序。

重要的是使您的代码可读且易于维护，在这方面，使用有限范围显然更好。变量的范围越小，就越容易理解它是如何使用的，以及对代码的任何更改都会产生什么影响。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-09-21T02:48:05.650

*理论上*，在循环内声明字符串是一种资源浪费。然而，在*实践*中，您提供的两个片段都将编译为相同的代码（循环外的声明）。

因此，如果您的编译器进行了任何优化，则没有区别。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-09-21T02:51:43.613

一般来说，我会选择第二个，因为 's' 变量的范围仅限于循环。好处：

*   这对程序员来说更好，因为您不必担心在函数稍后的某个地方再次使用 's'
*   这对编译器来说更好，因为变量的范围更小，因此它可以潜在地进行更多的分析和优化
*   这对未来的读者来说更好，因为他们不会想知道为什么's'变量在循环之外声明，如果它以后从未使用过

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-21T13:55:10.087

如果你想加快 for 循环，我更喜欢在计数器旁边声明一个 max 变量，这样就不需要重复查找条件：

代替

```
for (int i = 0; i < array.length; i++) {
  Object next = array[i];
} 
```

我更喜欢

```
for (int i = 0, max = array.lenth; i < max; i++) {
  Object next = array[i];
} 
```

任何其他应该考虑的事情都已经提到过，所以只是我的两分钱（见 ericksons 帖子）

格瑞兹，GHad

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-21T02:54:17.647

为了在@ [Esteban Araya 的答案](https://stackoverflow.com/questions/110083/which-of-these-loops-is-better-code-in-terms-of-performance-garbage-collection#110090)中添加一点，它们都需要每次通过循环创建一个新字符串（作为`some Assignment`表达式的返回值）。无论哪种方式，这些字符串都需要进行垃圾收集。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-13T20:13:30.610

我知道这是一个老问题，但我想我会添加一些*稍微*相关的内容。

在浏览 Java 源代码时，我注意到某些方法，如 String.contentEquals（在下面重复）会生成冗余的局部变量，这些变量只是类变量的副本。我相信某处有一条评论，暗示访问局部变量比访问类变量更快。

在这种情况下，“v1”和“v2”似乎是不必要的，可以删除以简化代码，但添加是为了提高性能。

```
public boolean contentEquals(StringBuffer sb) {
    synchronized(sb) {
        if (count != sb.length())
            return false;
        char v1[] = value;
        char v2[] = sb.getValue();
        int i = offset;
        int j = 0;
        int n = count;
        while (n-- != 0) {
            if (v1[i++] != v2[j++])
                return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-21T05:32:17.363

在我看来，我们需要更多地说明问题。

这

```
s = some Assignment; 
```

没有具体说明这是什么类型的任务。如果任务是

```
s = "" + i + ""; 
```

然后需要分配一个新的刺。

但如果是

```
s = some Constant; 
```

s 将仅指向常量内存位置，因此第一个版本的内存效率更高。

似乎我有点愚蠢地担心为解释的语言恕我直言的 for 循环的大量优化。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-29T21:10:43.897

当我使用多个线程（50+）时，我发现这是处理无法正确关闭进程的幽灵线程问题的一种非常有效的方法....如果我错了，请告诉我原因我错了：

```
Process one;
BufferedInputStream two;
try{
one = Runtime.getRuntime().exec(command);
two = new BufferedInputStream(one.getInputStream());
}
}catch(e){
e.printstacktrace
}
finally{
//null to ensure they are erased
one = null;
two = null;
//nudge the gc
System.gc();
} 
```

# sql - SQL中有设置划分吗？

> ID：110088
> 
> 赞同：4
> 
> 时间：2008-09-21T02:47:09.147
> 
> 标签：sql, database, relational-algebra, set-theory

我完全知道集合划分可以通过一系列其他操作来完成，所以我的问题是：

SQL中有设置除法的命令吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-21T02:54:56.913

[http://vadimtropashko.files.wordpress.com/2007/02/ch3.pdf](http://vadimtropashko.files.wordpress.com/2007/02/ch3.pdf)

从第 32 页开始：

> 关系除法不是基本运算符。它可以用投影、笛卡尔积和集差来表示。

所以不行。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-05-07T16:28:18.603

[这是使用关系代数语法的一个很好的解释](http://en.wikipedia.org/wiki/Relational_algebra#Division_.28.C3.B7.29)。

给定表`sailors`，`boats`并且`reserves`（来自 Ramakrishnan 和 Gehrke 的“数据库管理系统”的示例），您可以使用以下查询计算已预订所有船只的水手：

```
SELECT name FROM sailors
WHERE Sid NOT IN (
    -- A sailor is disqualified if by attaching a boat,
    -- we obtain a tuple <sailor, boat> that is not in reserves
    SELECT s.Sid
    FROM sailors s, boats b
    WHERE (s.Sid, b.Bid) NOT IN (
        SELECT Sid, Bid FROM reserves
    )
);

-- Alternatively:
SELECT name FROM sailors s
WHERE NOT EXISTS (
    -- Not reserved boats
    (SELECT bid FROM boats)
    EXCEPT
    (SELECT r.bid FROM reserves r
    WHERE r.sid = s.sid)
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T03:02:57.550

相关问题：[用于标记的数据库设计](https://stackoverflow.com/questions/48475/database-design-for-tagging)

答案的相关部分是[这篇文章](http://www.dbazine.com/ofinterest/oi-articles/celko1)

所以简而言之，不，SQL中没有设置划分。

# .net - 逻辑及其在 Collections.Generic 和继承中的应用

> ID：110121
> 
> 赞同：3
> 
> 时间：2008-09-21T03:08:58.143
> 
> 标签：.net, inheritance, collections

一切都继承自对象。这是继承的基础。一切都可以隐式地投射到继承树上，即。

```
object me = new Person(); 
```

因此，按照其逻辑结论，一组人也将是一组对象：

```
List<Person> people = new List<Person>();
people.Add(me);
people.Add(you);
List<object> things = people; // Ooops. 
```

除了那行不通，设计 .NET 的人要么忽略了这一点，要么是有原因的，我不确定是哪一个。至少有一次我遇到了这很有用的情况，但我最终不得不使用一个讨厌的 hack（子类化 List 只是为了实现一个强制转换运算符）。

问题是：这种行为有原因吗？是否有更简单的解决方案来获得所需的行为？

作为记录，我相信我想要这种行为的情况是一个通用的打印函数，它通过调用 ToString() 并很好地格式化字符串来显示对象列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-21T03:13:30.957

好的，每个在 .net 中使用过泛型的人一定都曾遇到过这种情况。

是的，直觉上它应该可以工作。不，在当前版本的 C# 编译器中没有。

Eric Lippert 对这个问题有一个非常好的解释（它分为 11 部分或其他内容，会让你在某些地方弯曲，但它非常值得一读）。见[这里](http://blogs.msdn.com/ericlippert/archive/2007/10/16/covariance-and-contravariance-in-c-part-one.aspx)。

### 编辑：

挖出了另一个相关的链接，这个链接讨论了java如何处理这个。看[这里](http://etymon.blogspot.com/2007/02/java-generics-and-covariance-and.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-21T03:13:11.550

你可以使用 linq 来投射它：

```
IEnumerable<Person> oldList = someIenumarable;
IEnumerable<object> newList = oldlist.Cast<object>() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-21T03:23:14.897

乍一看，这并没有直观的意义。但确实如此。看看这段代码：

```
List<Person> people = new List<Person>();
List<object> things = people; // this is not allowed
// ...
Mouse gerald = new Mouse();
things.add(gerald); 
```

现在我们突然有了一个`List`对象`Person`......`Mouse`里面有一个！

这解释了为什么不允许`A<T>`将类型对象分配给类型变量`A<S>`，即使它`S`是 的超类型`T`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-21T03:26:02.860

linq 解决方法是一个很好的解决方法。由于您使用的是类型对象，因此另一种解决方法是将列表作为 IEnumerable （不是通用版本）传递。

**编辑**：C# 4（当前为 beta）支持 IEnumerable 中的协变类型参数。虽然您无法直接分配给 List<object>，但您可以将列表传递给需要 IEnumerable<object> 的方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-01T19:30:49.657

虽然您尝试做的事情确实合乎逻辑，但它实际上是许多语言本身不支持的功能。这就是所谓的 co/contra 方差，它与编译器何时以及如何将对象从一件事隐式转换为另一件事有关。值得庆幸的是，C# 4.0 将为 C# 领域带来协变和逆变，这样的隐式转换应该是可能的。

有关这方面的详细说明，以下 Channel9 视频应该会有所帮助：

[http://channel9.msdn.com/shows/Going+Deep/Inside-C-40-dynamic-type-optional-parameters-more-COM-friendly/](http://channel9.msdn.com/shows/Going+Deep/Inside-C-40-dynamic-type-optional-parameters-more-COM-friendly/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-21T03:13:37.430

使用 linq 扩展方法，您可以做到

```
IEnumerable<object> things = people.Cast<object>();
List<object> things = people.Cast<object>().ToList(); 
```

否则，由于您强烈键入列表，因此不允许隐式转换。

# xss - 如何允许使用while 防止 XSS？

> ID：110123
> 
> 赞同：1
> 
> 时间：2008-09-21T03:09:40.450
> 
> 标签：xss, image

我正在使用 ASP.NET Web 窗体进行博客风格的评论。

编辑1：这看起来比我最初想的要复杂得多。你如何过滤src？
我宁愿仍然使用真正的 html 标签，但如果事情变得太复杂，我可能会采用自定义路线。我还没有做过任何 XML，所以我需要了解更多吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T04:19:31.453

如果 IMG 是您唯一允许的，我建议您使用简单的方括号语法来允许它。这将消除对解析器的需求，并减少使用解析器的其他危险边缘情况的负载。说，类似：

```
Look at this! [http://a.b.c/m.jpg] 
```

哪个会转换为

```
Look at this! <img src="http://a.b.c/m.jpg" /> 
```

您应该过滤 SRC 地址，以免恶意内容也通过 SRC 部分。就像也许

```
Look at this! [javascript:alert('pwned!')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-21T03:17:11.430

使用 XML 解析器来验证您的输入，并删除或编码您不想允许的所有元素和属性。在这种情况下，删除或编码除.`<img> `tag, and all attributes from that except `src`, alt` and title`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-21T06:12:10.497

@chakrit 建议使用自定义语法，例如带括号的 URL - 这很可能是最好的解决方案。你**绝对**不想开始搞乱解析等。
只要确保你正确编码整个评论（根据上下文 - 在这里查看我的答案[HTML 编码会防止各种 XSS 攻击吗？](https://stackoverflow.com/questions/53728/will-html-encoding-prevent-all-kinds-of-xss-attacks#70222)）
（顺便说一句，我刚刚发现了一个很好的自定义语法的示例就在那里... ;-) )

如前所述，将文件扩展名限制为 jpg/gif/etc - 即使可以绕过，也限制协议（例如 http://）。

除了 XSS 之外，另一个需要考虑的问题是 CSRF（[http://www.owasp.org/index.php/Cross-Site_Request_Forgery](http://www.owasp.org/index.php/Cross-Site_Request_Forgery)）。如果你不熟悉这个安全问题，它基本上允许攻击者强制我的浏览器向你的应用程序提交一个有效的经过身份验证的请求，例如转账或更改我的密码。如果它托管在您的站点上，他可以匿名攻击任何易受攻击的应用程序——*包括您*的应用程序。（请注意，即使其他应用程序易受攻击，它们受到攻击也不是你的错，但你仍然不想成为漏洞利用主机或攻击源......）。例如，就您自己的网站而言，攻击者更改您网站上的用户密码要容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-21T04:43:17.870

如果您最终使用非 HTML 格式（这使事情变得更容易 b/c 您可以从字面上转义所有 HTML），请使用诸如[markdown](http://daringfireball.net/projects/markdown/)之类的标准语法。[降价图像](http://daringfireball.net/projects/markdown/syntax#img)语法是`![alt text](/path/to/image.jpg)`

还有其他的，比如[Textile](http://www.textism.com/tools/textile/)。它的图像语法是`!imageurl!`

# sql - 开始使用 SQL 的提示？

> ID：110124
> 
> 赞同：3
> 
> 时间：2008-09-21T03:09:44.193
> 
> 标签：sql

我从来没有太多需要使用数据库进行编程。由于它们的使用如此广泛，这对我来说似乎是一件好事。SQL 似乎是开始的地方，可能是[SQLite](http://www.sqlite.org/)，也可能是[Python 绑定](http://pysqlite.org/)。你会为刚接触这个的人推荐什么？欢迎图书馆、工具和项目创意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-21T03:28:23.697

结构查询语言 (SQL) 是用于与数据库管理系统 (DBMS) 对话的语言。虽然学习是一件好事，但最好还是先考虑一个你想做的项目。你说你从来没有需要很有趣，因为我恰恰相反，几乎我写过的每个程序都使用了某种数据库。绝大多数（主要是基于网络的）都围绕着使用数据库。

*   了解关系和数据库架构。这意味着如何构造你的表，制作外键和关系。

    例如，您可能有一个电影数据库。在其中，您存储有关电影、发行电影的工作室以及电影中的演员的信息。这些中的每一个都成为一张桌子。每部电影由一个工作室发行。由于您不想在每个 Movie 条目中存储重复的工作室信息（地址等），因此您存储了与它的关系，因此每个 Movie 项目都包含对 Studio 项目的引用。这称为一对多关系（一个工作室有很多电影）。同样，您不想为每部电影存储 Actor 信息。但是一个 Actor 可以出现在多部电影中，因此它被存储为多对多关系。

*   学习 SQL 本身。[SQLCourse](http://sqlcourse.com)是入门的好地方，但还有许多其他书籍和资源。SQL 是一个标准，但每个 RDBMS 都有自己的特定于供应商的方式来做某些事情和其他限制（例如，某些系统不支持子查询，有几种不同的语法来限制返回的行数等）。学习你正在使用的语法很重要（例如，不要学习 Oracle 语法，然后尝试在 MySQL 中使用它），但它们足够相似，以至于概念是相同的。

*   工具取决于您使用的 DBMS。MySQL 是一个非常流行的数据库，有很多可用的工具和很多书籍。SQLite 和 Postgresql 也很流行，而且也是免费/开源的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T03:52:52.750

如果可以的话，你真的很想找一个知道如何使用它的人，并挑选他们的大脑。那是因为有很多重要的原则（例如第三范式）通过讨论而不是从书本上更容易学习。

如果您想自学，您应该学习执行基本选择、连接、更新、删除和分组查询的语法。您还应该学习选择的“瑞士军刀”，即 CASE 语句。太多人没有。该线程中推荐的许多教程都可以做到这一点。然后你需要尝试解决 SQL 问题。我确信[Joe Celko 的 SQL Puzzles and Answers](https://rads.stackoverflow.com/amzn/click/com/1558604537)是其中的一个很好的来源，尽管它可能有点高级。

这将使您真正编写 SQL。但是您仍然需要学习如何组织数据库。对于大多数目的而言，这意味着您确实需要了解第三范式的外观。你不必给它一个正式的定义，当你看到它时就能认出它，并且知道如何调整某些东西以成为那种格式。

很多参考资料会解释它，但你不知道你是否正确阅读它们。这是真正非常有帮助的地方，*可以*访问可以查看表格布局并告诉您“这是对的”与“这是错误的，这是需要更改的内容”的人。如果一切都失败了，您可以在这里发布一个带有建议布局的问题。但是与活人来回讨论仍然是更可取的 IMO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-21T03:15:26.630

试试 Wikipedia、[http://www.w3schools.com/sql/default.asp](http://www.w3schools.com/sql/default.asp)和[http://www.sql-tutorial.net/](http://www.sql-tutorial.net/) 也可以在 YouTube 上查看 SQL 视频。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T03:21:58.580

你是对的，SQLite 是一个很好的起点，因为它是免费的、轻量级的，并且可以在许多平台上使用。这只是一个开始。SQLite 在 SQL 语法上非常自由，缺乏像 DBMS 系统那样的内部编程语言。尽管如此，如果您想以最小的开销开始和学习，SQLite 是您的最佳选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-21T03:22:59.513

SQLite 很好，他们有很好的文档，但是你应该知道它不是一个功能齐全的 SQL 数据库，如 MySQL、Postgres 或商业变体。SQLite 的 API 依赖于回调，这是一个很好的模型，但并非所有数据库 API 都以这种方式工作。如果您熟悉 Perl，那么 DBI 是探索 SQL 的另一种好方法。

/艾伦

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-21T04:56:10.147

“A Gentle Introduction to SQL” - 您甚至可以在本教程网站上**练习“实时查询” 。**

> ### [http://sqlzoo.net/](http://sqlzoo.net/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-21T15:38:46.717

我总是向初学者推荐[The Practical SQL Handbook](https://rads.stackoverflow.com/amzn/click/com/0201703092)作为一个很好的起点——尤其是那些看过 SQL 但从不了解如何自己构建查询或如何工作的人。

Celko 的所有书都很棒。

埃尔南德斯的《凡人》这本书很好。

Ken Henderson 的书也很出色。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-21T16:00:19.333

阅读一些[关系代数](http://en.wikipedia.org/wiki/Relational_algebra)是理解关系数据库基本概念的好方法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-21T16:10:59.247

Jeo Cecko 为聪明人编写的 SQL 非常出色。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-06-12T16:28:21.857

我推荐这个网站的练习：[sql-ex.ru](http://www.sql-ex.ru/) 如果你做对了，你甚至可以获得证书。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-11-03T21:57:05.670

[从Ideone](http://ideone.com)开始，只需使用网络浏览器即可尝试在线查询。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-21T03:14:44.137

如果您使用 .NET 框架进行编程，那么学习 LINQ 可能是一个不错的起点。LINQ“引擎”将为您处理与数据库（或对象、实体或 XML 等）的后端通信。如果您想深入挖掘，可以探索您编写的 LINQ 生成的 SQL。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-21T03:14:47.130

如果您已经对 Web 应用程序有所了解，那么这将是一个很好的起点。几乎每个严肃的 web 应用程序都使用 SQL 数据库作为其后端。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-21T03:21:50.407

Head First 的人们推出了一本书。看看他们的其他书有多好，我会推荐这本。虽然还没有读完。([链接](http://headfirstlabs.com/books/hfsql/))

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-21T03:51:11.037

您可能需要考虑从 MySQL 入手，因为它有大量文档并且非常容易上手。您可以下载[社区版](http://dev.mysql.com/downloads/mysql/5.0.html#downloads)，然后添加[GUI 工具](http://dev.mysql.com/downloads/gui-tools/5.0.html)，您将同时拥有 GUI 和命令行界面。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-22T07:56:52.077

阅读一本书以开始学习 SQL。不久前，我从 Apress 阅读了[Beginning SQL Queries ，发现它为初学者编写的清晰且逻辑清晰（我为同事审阅了它）。](http://www.apress.com/book/view/1590599438)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-06-12T16:31:05.500

我从[这里](http://www.experlog.com/gibello/zql/sqltut.html)学到了 90% 的关于 SQL 的知识。1997 年。

我认为它仍然站得住脚。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-01-04T10:33:12.197

嘿，虽然还没有完成，但是如上所述使用 SQLite 是很棒的，Google 'Learn SQL the hard way' 并且有一本在线书籍，你可以通过它使用 SQLite。

Google 非常适合免费下载 pdf'Cough Cough' 但请尝试[http://www.sqlfiddle.com/](http://www.sqlfiddle.com/)

这是一个免费的在线平台！无需登录，只需转到他们的页面，以您想要的任何语言创建数据库（这是我选择 T-SQL 的最佳方式，因为我正在学习），然后您可以随意查询它。我正在学习一个 pdf 文件，其中包含可以下载的开源 SQL 文件，SQLFiddle 非常适合学习供应商特定的 SQL。

# c++ - 如何从 std::map 中检索所有键（或值）并将它们放入向量中？

> ID：110157
> 
> 赞同：303
> 
> 时间：2008-09-21T03:23:58.233
> 
> 标签：c++, dictionary, stl, stdmap

这是我出来的可能方式之一：

```
struct RetrieveKey
{
    template <typename T>
    typename T::first_type operator()(T keyValuePair) const
    {
        return keyValuePair.first;
    }
};

map<int, int> m;
vector<int> keys;

// Retrieve all keys
transform(m.begin(), m.end(), back_inserter(keys), RetrieveKey());

// Dump all keys
copy(keys.begin(), keys.end(), ostream_iterator<int>(cout, "\n")); 
```

当然，我们也可以通过定义另一个函子**RetrieveValues**从地图中检索所有值。

有没有其他方法可以轻松实现这一目标？（我一直想知道为什么 std::map 不包含一个成员函数供我们这样做。）

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2008-09-21T04:38:34.450

虽然您的解决方案应该有效，但根据您的程序员同事的技能水平，可能难以阅读。此外，它将功能从呼叫站点移开。这会使维护变得更加困难。

我不确定您的目标是将密钥放入向量中还是将它们打印到 cout 中，所以我两者都做。你可以尝试这样的事情：

```
std::map<int, int> m;
std::vector<int> key, value;
for(std::map<int,int>::iterator it = m.begin(); it != m.end(); ++it) {
  key.push_back(it->first);
  value.push_back(it->second);
  std::cout << "Key: " << it->first << std::endl();
  std::cout << "Value: " << it->second << std::endl();
} 
```

或者更简单，如果您使用的是 Boost：

```
map<int,int> m;
pair<int,int> me; // what a map<int, int> is made of
vector<int> v;
BOOST_FOREACH(me, m) {
  v.push_back(me.first);
  cout << me.first << "\n";
} 
```

就个人而言，我喜欢 BOOST_FOREACH 版本，因为它的输入更少，而且它的功能非常明确。

* * *

## 回答 #2

> 赞同：186
> 
> 时间：2012-03-13T22:33:32.230

```
//c++0x too
std::map<int,int> mapints;
std::vector<int> vints;
for(auto const& imap: mapints)
    vints.push_back(imap.first); 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2012-03-05T19:29:46.923

为此目的有一个[升压范围适配器：](http://www.boost.org/doc/libs/1_49_0/libs/range/doc/html/range/reference/adaptors/reference/map_keys.html)

```
#include <boost/range/adaptor/map.hpp>
#include <boost/range/algorithm/copy.hpp>
vector<int> keys;
boost::copy(m | boost::adaptors::map_keys, std::back_inserter(keys)); 
```

有一个类似的 map_values 范围适配器用于提取值。

* * *

## 回答 #4

> 赞同：54
> 
> 时间：2010-05-08T13:07:44.007

C++0x 为我们提供了更进一步、更出色的解​​决方案：

```
std::vector<int> keys;

std::transform(
    m_Inputs.begin(),
    m_Inputs.end(),
    std::back_inserter(keys),
    [](const std::map<int,int>::value_type &pair){return pair.first;}); 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2019-05-03T21:08:40.443

基于@rusty-parks 解决方案，但在 c++17 中：

```
std::map<int, int> items;
std::vector<int> itemKeys;

for (const auto& [key, _] : items) {
    itemKeys.push_back(key);
} 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2016-09-16T12:47:48.270

@DanDan 使用 C++11 的答案是：

```
using namespace std;
vector<int> keys;

transform(begin(map_in), end(map_in), back_inserter(keys), 
            [](decltype(map_in)::value_type const& pair) {
    return pair.first;
}); 
```

并使用 C++14（如 @ivan.ukr 所述），我们可以`decltype(map_in)::value_type`用`auto`.

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2021-06-23T06:25:44.133

**使用 C++20 的另一种方式**

范围库有一个键视图，它检索类似对/元组类型的第一个元素：

```
#include <ranges>

auto kv = std::views::keys(m);
std::vector<int> keys{ kv.begin(), kv.end() }; 
```

两个相关的观点值得一提：

1.  values - 获取地图中的值（一对/元组类型中的第二个元素）
2.  元素 - 以类似元组的类型获取第 n 个元素

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2008-09-21T03:57:37.183

您的解决方案很好，但您可以使用迭代器来执行此操作：

```
std::map<int, int> m;
m.insert(std::pair<int, int>(3, 4));
m.insert(std::pair<int, int>(5, 6));
for(std::map<int, int>::const_iterator it = m.begin(); it != m.end(); it++)
{
    int key = it->first;
    int value = it->second;
    //Do something
} 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2008-09-21T03:31:46.543

SGI STL 有一个名为[`select1st`](http://www.sgi.com/tech/stl/select1st.html). 太糟糕了，它不在标准 STL 中！

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2008-09-21T06:24:03.620

我认为上面介绍的 BOOST_FOREACH 很好而且很干净，但是，还有另一个使用 BOOST 的选项。

```
#include <boost/lambda/lambda.hpp>
#include <boost/lambda/bind.hpp>

std::map<int, int> m;
std::vector<int> keys;

using namespace boost::lambda;

transform(      m.begin(), 
                m.end(), 
                back_inserter(keys), 
                bind( &std::map<int,int>::value_type::first, _1 ) 
          );

copy( keys.begin(), keys.end(), std::ostream_iterator<int>(std::cout, "\n") ); 
```

就个人而言，我认为这种方法在这种情况下不如 BOOST_FOREACH 方法那么干净，但在其他情况下 boost::lambda 可能真的很干净。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2016-03-10T01:06:46.533

c++11 的一点点：

```
std::map<uint32_t, uint32_t> items;
std::vector<uint32_t> itemKeys;
for (auto & kvp : items)
{
    itemKeys.emplace_back(kvp.first);
    std::cout << kvp.first << std::endl;
} 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2016-08-10T23:34:39.473

这是一个使用 C++11 魔法的不错的函数模板，适用于 std::map 和 std::unordered_map：

```
template<template <typename...> class MAP, class KEY, class VALUE>
std::vector<KEY>
keys(const MAP<KEY, VALUE>& map)
{
    std::vector<KEY> result;
    result.reserve(map.size());
    for(const auto& it : map){
        result.emplace_back(it.first);
    }
    return result;
} 
```

在这里查看：http: [//ideone.com/lYBzpL](http://ideone.com/lYBzpL)

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2008-09-21T04:05:36.230

此外，如果您有 Boost，请使用 transform_iterator 以避免制作密钥的临时副本。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2008-09-21T04:14:42.167

您可以使用通用的 boost::transform_iterator。transform_iterator 允许您转换迭代的值，例如在我们的例子中，当您只想处理键而不是值时。请参阅[http://www.boost.org/doc/libs/1_36_0/libs/iterator/doc/transform_iterator.html#example](http://www.boost.org/doc/libs/1_36_0/libs/iterator/doc/transform_iterator.html#example)

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2021-01-27T12:12:47.987

### 使用C++17[的*结构化绑定（“解构”）声明*语法](https://en.cppreference.com/w/cpp/language/structured_binding)，

你可以这样做，这更容易理解。

```
// To get the keys
std::map<int, double> map;
std::vector<int> keys;
keys.reserve(map.size());
for(const auto& [key, value] : map) {
    keys.push_back(key);
} 
```

```
// To get the values
std::map<int, double> map;
std::vector<double> values;
values.reserve(map.size());
for(const auto& [key, value] : map) {
    values.push_back(value);
} 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2010-03-05T19:15:20.503

最好的非 sgi、非升压 STL 解决方案是像这样扩展 map::iterator：

```
template<class map_type>
class key_iterator : public map_type::iterator
{
public:
    typedef typename map_type::iterator map_iterator;
    typedef typename map_iterator::value_type::first_type key_type;

    key_iterator(const map_iterator& other) : map_type::iterator(other) {} ;

    key_type& operator *()
    {
        return map_type::iterator::operator*().first;
    }
};

// helpers to create iterators easier:
template<class map_type>
key_iterator<map_type> key_begin(map_type& m)
{
    return key_iterator<map_type>(m.begin());
}
template<class map_type>
key_iterator<map_type> key_end(map_type& m)
{
    return key_iterator<map_type>(m.end());
} 
```

然后像这样使用它们：

```
 map<string,int> test;
        test["one"] = 1;
        test["two"] = 2;

        vector<string> keys;

//      // method one
//      key_iterator<map<string,int> > kb(test.begin());
//      key_iterator<map<string,int> > ke(test.end());
//      keys.insert(keys.begin(), kb, ke);

//      // method two
//      keys.insert(keys.begin(),
//           key_iterator<map<string,int> >(test.begin()),
//           key_iterator<map<string,int> >(test.end()));

        // method three (with helpers)
        keys.insert(keys.begin(), key_begin(test), key_end(test));

        string one = keys[0]; 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2020-07-30T22:50:10.897

我发现以下三行代码是最简单的方法：

```
// save keys in vector

vector<string> keys;
for (auto & it : m) {
    keys.push_back(it.first);
} 
```

这是[此答案](https://stackoverflow.com/a/110255/12165405)的第一种方式的缩短版本。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-12-20T10:08:15.687

以下仿函数检索映射的键集：

```
#include <vector>
#include <iterator>
#include <algorithm>

template <class _Map>
std::vector<typename _Map::key_type> keyset(const _Map& map)
{
    std::vector<typename _Map::key_type> result;
    result.reserve(map.size());
    std::transform(map.cbegin(), map.cend(), std::back_inserter(result), [](typename _Map::const_reference kvpair) {
        return kvpair.first;
    });
    return result;
} 
```

*奖励*：以下仿函数检索映射的值集：

```
#include <vector>
#include <iterator>
#include <algorithm>
#include <functional>

template <class _Map>
std::vector<typename _Map::mapped_type> valueset(const _Map& map)
{
    std::vector<typename _Map::mapped_type> result;
    result.reserve(map.size());
    std::transform(map.cbegin(), map.cend(), std::back_inserter(result), [](typename _Map::const_reference kvpair) {
        return kvpair.second;
    });
    return result;
}

template <class _Map>
std::vector<std::reference_wrapper<typename _Map::mapped_type>> valueset(_Map& map)
{
    std::vector<std::reference_wrapper<typename _Map::mapped_type>> result;
    result.reserve(map.size());
    std::transform(map.begin(), map.end(), std::back_inserter(result), [](typename _Map::reference kvpair) {
        return std::ref(kvpair.second);
    });
    return result;
} 
```

*用法*：

```
int main()
{
    std::map<int, double> map{
        {1, 9.0},
        {2, 9.9},
        {3, 9.99},
        {4, 9.999},
    };
    auto ks = keyset(map);
    auto vs = valueset(map);
    for (auto& k : ks) std::cout << k << '\n';
    std::cout << "------------------\n";
    for (auto& v : vs) std::cout << v << '\n';
    for (auto& v : vs) v += 100.0;
    std::cout << "------------------\n";
    for (auto& v : vs) std::cout << v << '\n';
    std::cout << "------------------\n";
    for (auto& [k, v] : map) std::cout << v << '\n';

    return 0;
} 
```

预期输出：

```
1
2
3
4
------------------
9
9.9
9.99
9.999
------------------
109
109.9
109.99
109.999
------------------
109
109.9
109.99
109.999 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-03-24T19:39:08.490

以原子图为例

```
#include <iostream>
#include <map>
#include <vector> 
#include <atomic>

using namespace std;

typedef std::atomic<std::uint32_t> atomic_uint32_t;
typedef std::map<int, atomic_uint32_t> atomic_map_t;

int main()
{
    atomic_map_t m;

    m[4] = 456;
    m[2] = 45678;

    vector<int> v;
    for(map<int,atomic_uint32_t>::iterator it = m.begin(); it != m.end(); ++it) {
      v.push_back(it->second);
      cout << it->first << " "<<it->second<<"\n";
    }

    return 0;
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-06-07T10:10:47.990

您可以使用 fplus[库](https://github.com/Dobiasd/FunctionalPlus/)中的 get_map_keys() ：

```
#include<fplus/maps.hpp>
// ...

int main() {
    map<string, int32_t> myMap{{"a", 1}, {"b", 2}};
    vector<string> keys = fplus::get_map_keys(myMap);
    // ...
    return 0;
} 
```

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2019-04-14T14:12:52.080

与此处的一个示例略有相似，从`std::map`使用角度进行了简化。

```
template<class KEY, class VALUE>
std::vector<KEY> getKeys(const std::map<KEY, VALUE>& map)
{
    std::vector<KEY> keys(map.size());
    for (const auto& it : map)
        keys.push_back(it.first);
    return keys;
} 
```

像这样使用：

```
auto keys = getKeys(yourMap); 
```

* * *

## 回答 #22

> 赞同：-4
> 
> 时间：2008-09-21T11:13:15.170

> （我一直想知道为什么 std::map 不包含一个成员函数供我们这样做。）

因为它不能比你做的更好。如果一个方法的实现并不优于自由函数的实现，那么通常你不应该编写一个方法；你应该写一个自由函数。

也不清楚为什么它还是有用的。

# ruby-on-rails - 如何使用这个动态生成的字段保存模型？

> ID：110163
> 
> 赞同：0
> 
> 时间：2008-09-21T03:28:30.297
> 
> 标签：ruby-on-rails

我有一个看起来像这样的 rails 模型：

```
class Recipe < ActiveRecord::Base
   has_many :ingredients
   attr_accessor :ingredients_string
   attr_accessible :title, :directions, :ingredients, :ingredients_string

   before_save :set_ingredients

   def ingredients_string
      ingredients.join("\n")
   end

   private

   def set_ingredients
      self.ingredients.each { |x| x.destroy }
      self.ingredients_string ||= false
      if self.ingredients_string
         self.ingredients_string.split("\n").each do |x|
            ingredient = Ingredient.create(:ingredient_string => x)
            self.ingredients << ingredient
         end
      end
   end
end 
```

这个想法是，当我从网页创建成分时，我传入`ingredients_string`并让模型将其全部整理出来。当然，如果我正在编辑一种成分，我需要重新创建该字符串。该错误基本上是这样的：我如何（优雅地）通知成分字符串的视图并仍然检查是否`ingredient_string`在方法中定义`set_ingredients`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-21T05:30:19.257

将这两者一起使用可能会导致您的问题。两者都试图定义一种`ingredients_string`做不同事情的方法

```
 attr_accessor :ingredients_string

   def ingredients_string
      ingredients.join("\n")
   end 
```

摆脱`attr_accessor`, the `before_save`,`set_ingredients`方法并定义自己的`ingredients_string=`方法，如下所示：

```
def ingredients_string=(ingredients)
    ingredients.each { |x| x.destroy }
    ingredients_string ||= false
    if ingredients_string
        ingredients_string.split("\n").each do |x|
            ingredient = Ingredient.create(:ingredient_string => x)
            self.ingredients << ingredient
        end
    end
end 
```

请注意，我只是借用了您的`set_ingredients`. 可能有一种更优雅的方式来分解该字符串并根据需要创建/删除成分模型关联，但为时已晚，我现在想不出。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-21T06:47:18.540

先前的答案非常好，但可以进行一些更改。

def 成分字符串=（文本）成分。每个 { |x| x.destroy } 除非 text.blank? text.split("\n").each 做 |x| 成分 = Ingredient.find_or_create_by_ingredient_string(:ingredient_string => x) self.ingredients

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T02:38:17.990

我基本上只是修改了奥托的答案：

```
class Recipe < ActiveRecord::Base
   has_many :ingredients
   attr_accessible :title, :directions, :ingredients, :ingredients_string

   def ingredients_string=(ingredient_string)
      ingredient_string ||= false
      if ingredient_string
         self.ingredients.each { |x| x.destroy }
         unless ingredient_string.blank?
            ingredient_string.split("\n").each do |x|
               ingredient = Ingredient.create(:ingredient_string => x)
               self.ingredients << ingredient
            end
         end
      end
   end

   def ingredients_string
      ingredients.join("\n")
   end

end 
```

# svn - 如何访问当前的 Subversion 内部版本号？

> ID：110175
> 
> 赞同：22
> 
> 时间：2008-09-21T03:34:56.957
> 
> 标签：svn

如何在 subversion 中自动导入最新的构建/修订号？

目标是像 SO 那样在您的网页页脚上显示该数字。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-09-21T14:58:58.467

让您的构建过程调用[svnversion](http://svnbook.red-bean.com/en/1.4/svn.ref.svnversion.re.html)命令，并将其输出嵌入到生成的 {source|binaries} 中。这不仅会给出当前版本（就像这里的许多其他示例一样），而且它的输出字符串还将告诉构建是在混合树中完成还是在与所讨论的版本号不完全匹配的树中完成（即. 一棵具有局部变化的树）。

使用标准树：

```
$ svnversion
3846 
```

使用修改后的树：

```
$ echo 'foo' >> project-ext.dtd
$ svnversion                   
3846M 
```

使用混合修订的修改树：

```
$ (cd doc; svn up >/dev/null 2>/dev/null)
$ svnversion
3846:4182M 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-09-22T00:38:16.640

该[`svnversion`](http://svnbook.red-bean.com/en/1.8/svn.ref.svnversion.re.html)命令是执行此操作的正确方法。它会输出您的整个工作副本所在的修订号，或者如果您的工作副本是混合的，则输出一系列修订（例如，一些目录是最新的，而有些不是）。它还将指示工作副本是否有本地修改。例如，在一个相当不干净的工作目录中：

```
$ svnversion
662:738M 
```

$Revision$ 关键字不会做你想做的事：它只在包含文件时改变。Subversion 书提供了[更多细节](http://svnbook.red-bean.com/en/1.8/svn.advanced.props.special.keywords.html)。“svn info”命令也不会做你想做的事，因为它只告诉你当前目录的状态，忽略任何子目录的状态。在与上一个示例相同的工作树中，我有一些比我所在的目录新的子目录，但是“svn info”没有注意到：

```
$ svn info
... snip ...
Revision: 662 
```

将 svnversion 合并到您的构建过程中很容易，因此每个构建都以某种运行时可访问的形式获得修订号。例如，对于一个 Java 项目，我让我们的 makefile 将 svnversion 输出转储到一个 .properties 文件中。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-09-21T03:40:20.517

```
svn info <Repository-URL> 
```

或者

```
svn info --xml <Repository-URL> 
```

然后看看结果。对于 xml，解析 /info/entry/@revision 以获取存储库的修订版（本示例中为 151）或 /info/entry/commit/@revision 以针对此路径的最后一次提交的修订版（133，在使用标签）：

```
<?xml version="1.0"?>
<info>
<entry
   kind="dir"
   path="cmdtools"
   revision="151">
<url>http://myserver/svn/stumde/cmdtools</url>
<repository>
<root>http://myserver/svn/stumde</root>
<uuid>a148ce7d-da11-c240-b47f-6810ff02934c</uuid>
</repository>
<commit
   revision="133">
<author>mstum</author>
<date>2008-07-12T17:09:08.315246Z</date>
</commit>
</entry>
</info> 
```

我为自己编写了一个工具（[cmdnetsvnrev](http://www.stum.de/various-tools/cmdtools/)，包括源代码），它替换了我的 AssemblyInfo.cs 文件中的 Revision。虽然它仅限于该目的，但通常 svn info 然后处理是要走的路。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-09-21T03:45:43.500

将 svn:keywords 添加到源文件的 SVN 属性中：

```
svn:keywords Revision 
```

然后在源文件中包含：

```
private const string REVISION = "$Revision$"; 
```

修订将在下一次提交到 (eg) 时使用修订号更新`"$Revision: 4455$"`。您可以解析此字符串以仅提取修订号。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-21T03:43:09.373

如果你有乌龟 SVN，你可以使用 SubWCRev.exe

创建一个名为：

修订信息.tmpl

```
SvnRevision = $WCREV$; 
```

然后执行这个命令：

```
SubWCRev.exe . RevisionInfo.tmpl RevisionInfo.txt 
```

它将使用您的修订号创建一个文件 ReivisonInfo.txt，如下所示：

```
SvnRevision = 5000; 
```

但是，您可以使用任何您想要的源文件，而不是使用 .txt，并且可以访问源代码中的版本号。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-21T03:54:11.047

你没有说你正在使用什么编程语言/框架。这是使用[PySVN在 Python 中执行此操作的方法](http://pysvn.tigris.org)

```
import pysvn
repo = REPOSITORY_LOCATION
rev = pysvn.Revision( pysvn.opt_revision_kind.head )
client = pysvn.Client()
info = client.info2(repo,revision=rev,recurse=False)
revno = info[0][1].rev.number # revision number as an integer 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-09-21T11:36:02.090

使用 c# 和 SharpSvn（来自[http://sharpsvn.net](http://sharpsvn.net)），代码将是：

```
//using SharpSvn;
long revision = -1;
using(SvnClient client = new SvnClient())
{
  client.Info(path,
    delegate(object sender, SvnInfoEventArgs e)
    {
       revision = e.Revision;
    });
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-21T15:46:49.413

在我最新的项目中，我通过使用多种工具（SVN、NAnt 和自定义 NAnt 任务）解决了这个问题。

1.  使用 NAnt 执行`svn info --xml ./svnInfo.xml`
2.  使用 NAnt 从 xml 文件中提取修订号`<xmlpeek>`
3.  在编译项目之前，使用自定义 NAnt 任务将 AssemblyInfo.cs 文件中的 AssemblyVersion 属性更新为具有最新版本号的最新版本（例如，major.minor.maintenance、修订版）。

我的构建脚本的版本相关部分如下所示：

```
<!-- Retrieve the current revision number for the working directory -->
<exec program="svn" commandline='info --xml' output="./svnInfo.xml" failonerror="false"/>
<xmlpeek file="./svnInfo.xml" xpath="info/entry/@revision" property="build.version.revision" if="${file::exists('./svnInfo.xml')}"/>

<!-- Custom NAnt task to replace strings matching a pattern with a specific value -->
<replace file="${filename}" 
         pattern="AssemblyVersion(?:Attribute)?\(\s*?\&quot;(?&lt;version&gt;(?&lt;major&gt;[0-9]+)\.(?&lt;minor&gt;[0-9]+)\.(?&lt;build&gt;[0-9]+)\.(?&lt;revision&gt;[0-9]+))\&quot;\s*?\)" 
         value="AssemblyVersion(${build.version})"
         outfile="${filename}"/> 
```

正则表达式的功劳归于：[http](http://code.mattgriffith.net/UpdateVersion/) ://code.mattgriffith.net/UpdateVersion/ 。但是，我发现 UpdateVersion 不能满足我的需求，因为我的构建中的 pin 功能被破坏了。因此自定义 NAnt 任务。

如果有人对代码感兴趣，请`replace`告诉我自定义 NAnt 任务。由于这是一个与工作相关的项目，我需要与管理层核实，看看我们是否可以在友好（免费）许可下发布它。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-06-20T18:54:33.260

这里有一个提示，您可以如何使用**Netbeans**的功能来
创建将生成 scm-version.txt 的**自定义 ant 任务：**

打开你的**build.xml文件，****然后**添加以下代码 **`<import file="nbproject/build-impl.xml"/>`**

 **```
<!-- STORE SUBVERSION BUILD STRING -->
<target name="-pre-compile">
  <exec executable="svnversion"
    output="${src.dir}/YOUR/PACKAGE/NAME/scm-version.txt"/>
</target> 
```

现在，每次您 make **clean/build**时，Netbeans 都会将 Subversion 版本字符串存储到**scm-version.txt**。

 **您可以通过执行以下操作在运行时读取文件：

```
getClass().getResourceAsStream("scm-version.txt"); // ... 
```

不要忘记将文件**scm-version.txt**标记为**svn:ignore**。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-04-15T06:01:17.303

在 Rails 中，我在 environment.rb 中使用了这个片段，它为我提供了一个可以在整个应用程序中使用的常量（就像在应用程序布局的页脚中一样）。

```
SVN_VERSION  = IO.popen("svn info").readlines[4].strip.split[1] 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-21T03:38:26.857

好吧，你可以运行 'svn info' 来确定当前的修订号，你可以很容易地用一个正则表达式来提取它，比如“Revision: ([0-9]+)”。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-21T03:51:01.163

如果您在 GNU/Linux 下运行，请 cd 到工作副本的目录并运行：

```
svn -u 状态 | grep 状态\反对\修订：| awk '{打印 $4}'
```

根据我的经验，重命名目录后 svn info 不会给出可靠的数字。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-21T03:54:25.537

您需要 Subversion **info**子命令，如下所示：

```
$ svn info .
Path: .
URL: http://trac-hacks.org/svn/tracdeveloperplugin/trunk
Repository Root: http://trac-hacks.org/svn
Repository UUID: 7322e99d-02ea-0310-aa39-e9a107903beb
Revision: 4190
Node Kind: directory
Schedule: normal
Last Changed Author: coderanger
Last Changed Rev: 3397
Last Changed Date: 2008-03-19 00:49:02 -0400 (Wed, 19 Mar 2008) 
```

在这种情况下，有两个修订号：4190 和 3397。4190 是存储库的最后一个修订号，3397 是该工作区从中签出的子树的最后更改的修订号。您可以指定工作空间的路径或存储库的 URL。

在 Windows 下提取它的 AC# 片段看起来像这样：

```
Process process = new Process();
process.StartInfo.FileName = @"svn.exe";
process.StartInfo.Arguments = String.Format(@"info {0}", path);
process.StartInfo.UseShellExecute = false;
process.StartInfo.RedirectStandardOutput = true;
process.Start();

// Parse the svn info output for something like "Last Changed Rev: 1234"
using (StreamReader output = process.StandardOutput)
{
    Regex LCR = new Regex(@"Last Changed Rev: (\d+)");

    string line;
    while ((line = output.ReadLine()) != null)
    {
        Match match = LCR.Match(line);
        if (match.Success)
        {
            revision = match.Groups[1].Value;
        }
    }
} 
```

（在我的例子中，我们使用 Subversion 版本作为程序集版本号的一部分。）

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-08-28T15:18:45.523

我使用[MSBuild Community Tasks](http://msbuildtasks.tigris.org/)项目，该项目具有检索 SVN 修订号并将其添加到您的 AssemblyInfo.vb 的工具。然后，您可以使用反射来检索此字符串以将其显示在您的 UI 中。

这是[带有说明的完整博客文章](http://solutionmania.com/2009/8/28/automatically-adding-svn-revision-numbers-to-assemblies)。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-12-10T06:00:56.520

如果您使用的是 svnant，则可以使用 wcVersion，它复制 svnveresion 并返回可消化的值。见： [http ://subclipse.tigris.org/svnant/svn.html#wcVersion](http://subclipse.tigris.org/svnant/svn.html#wcVersion)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2010-04-12T01:18:07.163

我在 CodePlex 上为[Build Version Increment](http://autobuildversion.codeplex.com/)项目创建了一个[SVN 版本插件。](http://happyturtle.codeplex.com/)这个 SVN 插件将从您的工作副本中提取最新的更改修订号，并允许您在您的版本号中使用它，这应该完全完成您想要做的事情。Build Version Increment 非常灵活，允许您以多种方式设置版本控制的完成方式。

BVI 仅适用于 Visual Studio，但由于您使用的是 Asp.Net，所以这不是问题。它不需要编写任何代码或编辑 xml，所以耶！

# python - 关于使用 Google App Engine 的反馈？

> ID：110186
> 
> 赞同：126
> 
> 时间：2008-09-21T03:41:19.500
> 
> 标签：python, django, google-app-engine

希望做一个非常小，快速的'n肮脏的侧面项目。我喜欢 Google App Engine 在 Python 上运行并内置 Django 的事实——这给了我一个尝试该平台的借口......但我的问题是：

除了玩具问题外，有没有人使用应用程序引擎来解决任何问题？我看到了一些很好的示例应用程序，所以我认为这对于真正的交易来说已经足够好了，但想得到一些反馈。

任何其他成功/失败说明都会很棒。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2008-09-21T04:52:12.543

我已经为我的小型地震监视应用程序 [http://quakewatch.appspot.com/尝试了应用程序引擎](http://quakewatch.appspot.com/)

我的目的是看看应用引擎的能力，所以这里是要点：

1.  默认情况下，Django 没有它，它有自己的 web 框架，它是 pythonic 有像 Django 一样的 URL 调度程序，它使用 Django 模板所以如果你有 Django exp。你会发现它很容易使用
    *   但是您可以使用任何纯 python 框架，并且可以轻松添加 Django，请参见 [http://code.google.com/appengine/articles/django.html](http://code.google.com/appengine/articles/django.html) google-app-engine-django ( [http://code.google.com/ p/google-app-engine-django/](http://code.google.com/p/google-app-engine-django/) ) 项目非常好，工作起来几乎就像处理 Django 项目一样
2.  您不能在服务器上执行任何长时间运行的进程，您所做的是回复请求并且应该很快，否则 appengine 会杀死它所以如果您的应用程序需要大量后端处理，appengine 不是最好的方法，否则您将不得不进行处理在您自己的服务器上
3.  我的 quakewatch 应用程序具有订阅功能，这意味着我必须在最新的地震发生时通过电子邮件发送它们，但我无法在应用程序引擎中运行后台进程来监控新的地震解决方案是使用第三方服务，如 pingablity.com，它可以连接到您的一个页面并执行订阅电子邮件，但在这里您也必须注意不要在这里花费太多时间或将任务分成几部分
4.  它提供了类似 Django 的建模功能，但后端完全不同，但对于一个新项目来说，这无关紧要。

但总的来说，我认为它非常适合创建不需要大量后台处理的应用程序。

编辑：现在[任务队列](http://code.google.com/appengine/docs/python/taskqueue/)可用于运行批处理或计划任务

编辑：在 GAE 上工作/创建一个真正的应用程序一年之后，现在我的意见是，除非你正在制作一个需要扩展到数百万用户的应用程序，否则不要使用 GAE。由于分布式特性，在 GAE 中维护和执行琐碎的任务是一件令人头疼的事情，为了避免超出期限的错误，计算实体或执行复杂的查询需要复杂的代码，因此小型复杂应用程序应该坚持使用 LAMP。

编辑：模型应该考虑到您将来希望进行的所有交易而专门设计，因为只有同一实体组中的实体才能在交易中使用，并且它使更新两个不同组的过程成为一场噩梦，例如从 user1 转移资金到 user2除非它们在同一个实体组中，否则在事务中是不可能的，但是使它们成为同一个实体组可能不是最适合频繁更新的目的....阅读此[http://blog.notdot.net/2009/9/Distributed-Transactions-应用引擎](http://blog.notdot.net/2009/9/Distributed-Transactions-on-App-Engine)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2009-02-19T18:08:15.153

我正在使用 GAE 来托管几个高流量的应用程序。就像 50-100 req/sec 的顺序一样。太棒了，我不能推荐它。

我之前的 Web 开发经验是使用 Ruby（Rails/Merb）。学习 Python 很容易。我没有搞乱 Django 或 Pylons 或任何其他框架，只是从 GAE 示例开始，并从提供的基本 webapp 库中构建了我需要的东西。

如果您习惯了 SQL 的灵活性，那么数据存储区可能需要一些时间来适应。没有什么太伤人的！最大的调整是远离 JOIN。你必须摆脱标准化是至关重要的想法。

本

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2008-09-21T05:12:25.257

我遇到的使用 Google App Engine 的令人信服的原因之一是它与您的域的 Google Apps 集成。从本质上讲，它允许您创建仅限于您域的（受控）登录的自定义、托管 Web 应用程序。

我对这段代码的大部分经验是构建一个简单的时间/任务跟踪应用程序。模板引擎很简单，但使多页应用程序非常容易上手。登录/用户感知 api 同样有用。我能够制作公共页面/私人页面范例而没有太多问题。（用户将登录以查看私人页面。匿名用户仅显示公共页面。）

当我被拉去“真正的工作”时，我刚刚进入项目的数据存储部分。

我能够在很短的时间内完成很多（还没有完成）。由于我以前从未使用过 Python，这特别令人愉快（既因为它对我来说是一门新语言，也因为尽管使用了新语言，但开发仍然很快）。我遇到的事情很少，这让我相信我无法完成我的任务。相反，我对功能和特性有相当积极的印象。

这就是我的经验。也许它不仅仅代表一个未完成的玩具项目，但它确实代表了对该平台的知情试验，我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-09-21T04:09:00.323

“运行 Django 的 App Engine”的想法有点误导。App Engine 替换了整个 Django 模型层，因此请准备好花一些时间来适应 App Engine 的数据存储区，这需要不同的建模和思考数据的方式。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-23T02:37:29.683

我使用 GAE 构建[http://www.muspy.com](http://www.muspy.com)

它不仅仅是一个玩具项目，但也不是过于复杂。我仍然依赖谷歌解决的一些问题，但总体而言，开发网站是一次愉快的经历。

如果您不想处理托管问题、服务器管理等，我绝对可以推荐它。特别是如果您已经了解 Python 和 Django。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-10-08T16:28:00.950

我认为 App Engine 在这一点上非常适合小型项目。不必担心托管有很多话要说。API 还会将您推向构建可扩展应用程序的方向，这是一种很好的做法。

*   [app-engine-patch](http://code.google.com/p/app-engine-patch/)是 Django 和 App Engine 之间的一个很好的层，可以使用 auth 应用程序等等。
*   Google 已承诺在 2008 年底之前推出 SLA 和定价模型。
*   请求必须在 10 秒内完成，对 Web 服务的子请求需要在 5 秒内完成。这迫使您设计一个快速、轻量级的应用程序，将重要的处理任务卸载到其他平台（例如托管服务或 EC2 实例）。
*   更多语言即将推出！谷歌不会说是哪个:-)。我的钱接下来会花在 Java 上。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2010-03-17T12:52:04.343

这个问题已经完全回答了。哪个好。但有一件事也许值得一提。google 应用引擎有一个用于 eclipse ide 的插件，使用起来很愉快。

如果您已经使用 eclipse 进行开发，您会为此感到非常高兴。

要在谷歌应用引擎的网站上部署，我需要做的就是点击一个小按钮——带有飞机标志——超级。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-21T03:47:36.787

看看[sql 游戏](http://mysqlgame.appspot.com/)，它非常稳定，实际上在某个时间点推动了流量限制，以至于被谷歌限制了。除了将您的应用程序托管在其他人完全控制的服务器上之外，我只看到了有关 App Engine 的好消息。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2010-01-28T15:20:56.617

我使用 GAE 构建了一个简单的应用程序，它接受一些参数、格式和发送电子邮件。这是非常简单和快速的。我还对 GAE 数据存储和内存缓存服务（[http://dbaspects.blogspot.com/2010/01/memcache-vs-datastore-on-google-app.html](http://dbaspects.blogspot.com/2010/01/memcache-vs-datastore-on-google-app.html)）进行了一些性能基准测试。它不是那么快。我的观点是，GAE 是一个执行某些方法的严肃平台。我认为它将演变为真正可扩展的平台，根本不允许不良做法。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2010-02-18T21:58:33.780

我在我的 Flash 游戏网站[Bearded Games](http://www.beardedgames.com/ "大胡子游戏")中使用了 GAE 。GAE 是一个很棒的平台。我使用的 Django 模板比过去的 PHP 简单得多。它带有一个很棒的管理面板，并为您提供非常好的日志。数据存储与 MySQL 等数据库不同，但使用起来更容易。建立网站既简单又直接，他们在网站上有很多有用的建议。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-09-10T18:21:41.670

我使用 GAE 和 Django 构建了一个 Facebook 应用程序。我使用[http://code.google.com/p/app-engine-patch](http://code.google.com/p/app-engine-patch)作为起点，因为它支持 Django 1.1。我没有尝试使用任何 manage.py 命令，因为我认为它们不起作用，但我什至没有研究它。该应用程序具有三个模型，并且还使用了 pyfacebook，但这就是复杂性的程度。我正在构建一个更复杂的应用程序，我开始在[http://brianyamabe.com](http://brianyamabe.com)上写博客。

# windows - 想下载一个 Git 仓库，我需要什么（windows 机器）？

> ID：110205
> 
> 赞同：70
> 
> 时间：2008-09-21T03:53:57.507
> 
> 标签：windows, git

我想下载这个开源应用程序，他们正在使用 Git。下载代码库需要什么？

**更新** 使用 Git Bash 时如何更改工作目录？（我想在某个目录下载 repo，使用 pwd 告诉我我将下载我不想要的 repo。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2008-09-21T03:55:47.750

[在 Msys 上](http://code.google.com/p/msysgit/)下载Git 。然后：

```
git clone git://project.url.here 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2011-08-09T19:00:28.850

安装[mysysgit](http://code.google.com/p/msysgit/)。（与 Greg Hewgill 的回答相同。）

安装[Tortoisegit](http://code.google.com/p/tortoisegit/)。（Tortoisegit 需要 mysysgit 或类似 Cygwin 的东西。）

TortoiseGit 安装完成后，右键单击一个文件夹，选择 Git Clone...，然后输入存储库的 Url，然后单击确定。

*这个答案并不比仅仅安装 mysysgit 更好，但你可以避免使用可怕的命令行。:)*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T06:38:41.697

我不想开始一场“Windows 下最好的 unix 命令行是什么”之战，但你有想过[*Cygwin*](http://www.cygwin.com)吗？Git 位于 Cygwin 软件包存储库中。

你会得到很多有益的副作用！(:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T04:25:18.787

要更改 GitMSYS 的 Git Bash 中的工作目录，您可以使用`cd`

cd /path/do/目录

注意：

*   目录分隔符使用正斜杠 ( `/`) 而不是反斜杠。
*   驱动器用小写字母指定，没有冒号，例如“ `C:\stuff`”应该用“ `/c/stuff`”表示。
*   空格可以用反斜杠 ( `\`)转义
*   命令行完成是您的朋友。随时按 TAB 以展开内容，包括 Git 选项、分支、标签和目录。

此外，您可以在 Windows 资源管理器中右键单击目录和“Git Bash here”。

# c# - 可空类型如何在 C# 中工作？

> ID：110229
> 
> 赞同：23
> 
> 时间：2008-09-21T04:15:30.807
> 
> 标签：c#

'int'之间的幕后区别是什么？和'int'？是'int？以某种方式引用类型？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2008-09-21T04:16:51.833

? 将值类型 (T) 包装在 Nullable<T> 结构中：

[http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-21T04:24:51.767

除了“int?” 作为“Nullable”的快捷方式，CLR 中还添加了一些基础设施，以便在“int?”之间进行隐式和静默转换。和“int”。这也意味着任何装箱操作都会隐式地装箱实际值（即，不可能将 Nullable 装箱为 Nullable，它总是导致 T 的装箱值或空对象）。

当你在编译时不知道 T 时（你只在运行时知道它），我在尝试创建 Nullable 时遇到了许多这些问题。[http://bradwilson.typepad.com/blog/2008/07/creating-nullab.html](http://bradwilson.typepad.com/blog/2008/07/creating-nullab.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-21T04:34:41.510

对于关于 Nullable 类型的更好的“幕后”讨论之一，您应该查看 Jeffrey Richter 的[CLR Via C#](https://rads.stackoverflow.com/amzn/click/com/0735667454)。

第 18 章的全部内容都致力于详细讨论 Nullable 类型。这本书对于 .NET CLR 内部的许多其他领域也非常有用。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-12-19T07:12:10.863

我了解到您必须将可空值类型显式转换为不可空值类型，如以下示例所示：

```
int? n = null;

//int m1 = n;    // Doesn't compile
int n2 = (int)n; // Compiles, but throws an exception if n is null 
```

[微软文档](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/nullable-value-types)

# cakephp - CakePHP 多模型视图

> ID：110232
> 
> 赞同：5
> 
> 时间：2008-09-21T04:19:28.753
> 
> 标签：cakephp, entity-relationship, model-driven, cakephp-1.2

我正在用 CakePHP 创建一个网站，我对它有点陌生。我在这个问题上找不到好的资源，所以你去：

我有一个用于注册用户的三表结构`Users`：`Addresses`和`Contacts`。我必须使用所有三个表的信息构建一个视图，例如：

```
全名：[ ]（来自用户）
收货地址：[ ]（来自地址）
手机：[ ]（来自联系人）
电子邮件地址：[ ]（来自联系人）

```

处理这种情况的最佳方法是什么。*专门用来省钱的*。创建一个新的模型来表示这个，它`save()`本身将有一个方法（可能是数据库中的一个sql视图）创建一个控制器来处理这个`bind`或`unbind`s信息的视图

我仍然想知道我将如何处理这两个联系人，因为它们将是 2 个不同`INSERT`的

我能挖掘到的任何提示或资源都会很高兴。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-22T00:44:59.230

如果您使用最新的 1.2 代码，请查看 api 中的 Model::saveAll

例如。您的视图可能如下所示：

```
echo $form->create('User', array('action' => 'add');
echo $form->input('User.name');
echo $form->input('Address.line_1');
echo $form->input('Contact.tel');
echo $form->end('Save'); 
```

然后在您的用户控制器添加方法中，您将拥有类似的内容：

```
...

if($this->User->saveAll($this->data)) {
 $this->Session->setFlash('Save Successful');
 $this->redirect(array('action' => 'index'));
} else {
 $this->Session->setFlash('Please review the form for errors');
}

... 
```

在您的用户模型中，您将需要以下内容：

```
var $hasOne = array('Address', 'Contact'); 
```

希望有帮助！

[http://api.cakephp.org/class_model.html#49f295217028004b5a723caf086a86b1](http://api.cakephp.org/class_model.html#49f295217028004b5a723caf086a86b1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-21T06:59:52.520

CakePHP 允许您使用关系轻松维护模型之间的链接，有关完整详细信息，请参阅[http://book.cakephp.org/view/78/Associations-Linking-Models-Together](http://book.cakephp.org/view/78/Associations-Linking-Models-Together)。然后检索正确的用户，您还将“免费”获得其地址和联系信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-25T09:57:49.470

> 3 种模型：用户、地址、联系人

```
User hasOne Address, Contact
Address belongsTo User
Contact belongsTo User 
```

在您的模型中，您可以这样定义：

```
class User extends AppModel {
var $name = 'User';
var $hasOne = array('Address','Contact');
.. 
```

要制作此视图，您需要**user_id**字段 ind*地址*和*联系人*表

要在视图中使用它，您只需在 User 模型上调用 find 并递归为 1（顺便说一句，用户控制器仅使用 User 模型）。

```
$this->User->recursive = 1;
$this->set('user', $this->User->find('first', array('conditions'=>array('id'=>666))); 
```

这将为您的视图生成此数组：

```
array(
  'Use' => array(
     'id' => 666,
     'name' => 'Alexander'
),
  'Address' => array(
     'id' => 123,
     'zip' => 555
),
   'Contact' => array(
     'id' => 432,
     'phone' => '555-1515'
)); 
```

# windows - 在 Windows 上构建和部署 dll：SxS、清单和所有爵士乐

> ID：110249
> 
> 赞同：3
> 
> 时间：2008-09-21T04:33:47.910
> 
> 标签：windows, dll, manifest, sxs

自 VS 2005 以来，我发现不可能简单地针对 MS 运行时构建一个 dll 并将它们部署在一起（[http://www.ddj.com/windows/184406482](http://www.ddj.com/windows/184406482)）。我对 manifest、SxS 和 co 深感困惑：MSDN 文档真的很差，带有循环引用；特别是因为我更像是一个 Unix 人，我发现所有这些都没有信息。我的核心问题是将 dll 与 msvc9 或 msvc8 链接：由于这些运行时不可再分发，链接和部署此类 dll 的步骤是什么？特别是，清单是如何生成的（我不想要 mt.exe，我想要一些可以跨编译器移植的东西），它们是如何嵌入和使用的？并排组装是什么意思？

基本上，我在哪里可以找到任何类型的规范而不是 MS 行话？

感谢所有回答的人，这真的很有帮助，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T03:20:49.027

我们在所有应用程序和 DLL 中使用一个简单的包含文件 vcmanifest.h，然后将所有项目设置为嵌入清单文件。

vcmanifest.h

```
/*----------------------------------------------------------------------------*/

#if _MSC_VER >= 1400

/*----------------------------------------------------------------------------*/

#pragma message ( "Setting up manifest..." )

/*----------------------------------------------------------------------------*/

#ifndef _CRT_ASSEMBLY_VERSION
#include <crtassem.h>
#endif 

/*----------------------------------------------------------------------------*/

#ifdef WIN64
    #pragma message ( "processorArchitecture=amd64" )
    #define MF_PROCESSORARCHITECTURE "amd64"
#else
    #pragma message ( "processorArchitecture=x86" )
    #define MF_PROCESSORARCHITECTURE "x86"
#endif 

/*----------------------------------------------------------------------------*/

#pragma message ( "Microsoft.Windows.Common-Controls=6.0.0.0") 
#pragma comment ( linker,"/manifestdependency:\"type='win32' " \
                  "name='Microsoft.Windows.Common-Controls' " \
                  "version='6.0.0.0' " \
                  "processorArchitecture='" MF_PROCESSORARCHITECTURE "' " \
                  "publicKeyToken='6595b64144ccf1df'\"" )

/*----------------------------------------------------------------------------*/

#ifdef _DEBUG
    #pragma message ( __LIBRARIES_ASSEMBLY_NAME_PREFIX ".DebugCRT=" _CRT_ASSEMBLY_VERSION ) 
    #pragma comment(linker,"/manifestdependency:\"type='win32' "            \
            "name='" __LIBRARIES_ASSEMBLY_NAME_PREFIX ".DebugCRT' "         \
            "version='" _CRT_ASSEMBLY_VERSION "' "                          \
            "processorArchitecture='" MF_PROCESSORARCHITECTURE "' "         \
            "publicKeyToken='" _VC_ASSEMBLY_PUBLICKEYTOKEN "'\"")
#else
    #pragma message ( __LIBRARIES_ASSEMBLY_NAME_PREFIX ".CRT=" _CRT_ASSEMBLY_VERSION ) 
    #pragma comment(linker,"/manifestdependency:\"type='win32' "            \
            "name='" __LIBRARIES_ASSEMBLY_NAME_PREFIX ".CRT' "              \
            "version='" _CRT_ASSEMBLY_VERSION "' "                          \
            "processorArchitecture='" MF_PROCESSORARCHITECTURE "' "         \
            "publicKeyToken='" _VC_ASSEMBLY_PUBLICKEYTOKEN "'\"")
#endif

/*----------------------------------------------------------------------------*/

#ifdef _MFC_ASSEMBLY_VERSION
    #ifdef _DEBUG
        #pragma message ( __LIBRARIES_ASSEMBLY_NAME_PREFIX ".MFC=" _CRT_ASSEMBLY_VERSION ) 
        #pragma comment(linker,"/manifestdependency:\"type='win32' "            \
                "name='" __LIBRARIES_ASSEMBLY_NAME_PREFIX ".MFC' "              \
                "version='" _MFC_ASSEMBLY_VERSION "' "                          \
                "processorArchitecture='" MF_PROCESSORARCHITECTURE "' "         \
                "publicKeyToken='" _VC_ASSEMBLY_PUBLICKEYTOKEN "'\"")
    #else
        #pragma message ( __LIBRARIES_ASSEMBLY_NAME_PREFIX ".MFC=" _CRT_ASSEMBLY_VERSION ) 
        #pragma comment(linker,"/manifestdependency:\"type='win32' "            \
                "name='" __LIBRARIES_ASSEMBLY_NAME_PREFIX ".MFC' "              \
                "version='" _MFC_ASSEMBLY_VERSION "' "                          \
                "processorArchitecture='" MF_PROCESSORARCHITECTURE "' "         \
                "publicKeyToken='" _VC_ASSEMBLY_PUBLICKEYTOKEN "'\"")
    #endif
#endif /* _MFC_ASSEMBLY_VERSION */

/*----------------------------------------------------------------------------*/

#endif /* _MSC_VER */

/*----------------------------------------------------------------------------*/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-22T14:21:56.147

最简单的做法：假设默认安装 VS2005，您将拥有如下路径：

```
C:\Program Files\Microsoft Visual Studio 8\VC\redist\x86\Microsoft.VC80.CRT 
```

去，抓取这个 redist 文件夹中的文件，然后将 .manifest 和 msvcr80.dll（至少）放在您的应用程序 .exe 文件夹中。这些文件存在于安装的根目录中，应该使您的 exe 和所有链接到它们的 dll 能够完美地工作，而无需借助合并模块、MSI 或任何类型的运行时未安装的即时检测。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T04:46:53.477

好吧，我遇到了其中一些问题，所以也许我的一些评论会有所帮助。

1.  清单是一个 xml 文件。虽然 VS 可以并且会在您编译时为您制作一个，但另一种解决方案是生成一个资源文件 (.rc) 并使用 VS 附带的资源编译器 (rc.exe) 将其编译为已编译的资源文件 (.res) . 您需要从工具菜单运行 VS 命令行，这将导致 rc 位于路径中，并正确设置各种环境变量。然后编译你的资源。生成的 .res 文件可供其他编译器使用。
2.  确保您的清单 xml 文件的大小可被 4 整除。如果需要，在其中间添加空格以实现此目的。尽量避免在开始 xml 标记之前或在结束 xml 标记之后出现任何字符。我有时对此有疑问。如果您不正确地执行第 2 步，预计会出现并排配置错误。您可以通过在资源编辑器（例如 devenv.exe）中打开 exe 并检查清单资源来检查这是否是您的错误。您还可以通过打开构建文件来查看正确清单的示例，但请注意，dll 和 exe 在应提供资源的 id 方面存在微小差异。

您可能需要在 Vista 上进行测试以确保它正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-21T05:29:23.500

[这是解释 VC++ 的 SxS crt 决策背后的原因](http://blogs.gotdotnet.com/martynl/archive/2005/10/13/480880.aspx)的博客条目。它包括解释静态链接 crt 有多糟糕，以及为什么不应该这样做。

这是[有关如何静态链接 crt 的文档](http://msdn.microsoft.com/en-us/library/abx4dbyh(VS.80).aspx)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-21T04:49:59.447

它们是可再分发的，并且您在 msvs 目录中有可再分发的包。

使用您选择的运行时构建，将相应的包添加到您的安装程序中，不要打扰 - 它会工作。不同之处在于 - 它们现在*安装*在不同的位置（但这也是您的应用程序要查找库的地方）。

否则，MSDN 或基本上任何不太老的关于 windows c++ 编程的书。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-21T08:36:14.957

感谢你的回答。对于部署本身，我可以看到 3 个选项，然后：

*   使用 .msi 合并指令。
*   使用可再发行的 VS 包并在我自己的安装程序之前运行它
*   沿着我自己的应用程序复制可再发行*文件。*但在这种情况下，我如何在文件系统层次结构中引用它（比如 bar/foo1/foo1.dll 和 bar/foo2/foo2.dll 在 bar/ 中引用 msvcr90.dll）？我的意思是除了明显和丑陋的“将dll复制到你拥有依赖它的dll的每个目录中）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-16T16:19:14.447

如果您有要启动的服务或要在 MSI 中的“InstallFinalize”操作之前运行的程序，则不能将 VC++8 SP1/9 CRT 用作 Vista 和 windows Server 2008 上的合并模块。

这是因为 dll 在“InstallFinalize”操作中安装在 WinSXS 中。

但 MSI “ServiceStart” 动作出现在此之前。

所以使用引导程序“ [http://www.davidguyer.us/bmg/publish.htm](http://www.davidguyer.us/bmg/publish.htm) ”

或者考虑在安装程序 4.5 中使用安装程序链接。但这意味着您需要一个引导程序来安装 4.5，所以这似乎有点毫无意义..

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-07T16:05:48.710

如果您打算部署 Microsoft DLLs/.manifest 文件并使用 Java JNI，那么您需要将它们放在 JDK/JRE 的 bin 目录中。

如果您在 JBoss 中运行应用程序，则需要将它们放在 JBoss/bin 目录中。

您可以将 JNI DLL 放在适合您的应用程序的位置。

# python - 推荐使用哪种 Python 内存分析器？

> ID：110259
> 
> 赞同：726
> 
> 时间：2008-09-21T04:43:04.737
> 
> 标签：python, performance, memory-management, profiling

我想知道我的 Python 应用程序的内存使用情况，特别想知道哪些代码块/部分或对象消耗了最多的内存。谷歌搜索显示一个商业版本是[Python Memory Validator](http://www.softwareverify.com/python/memory/index.html)（仅限 Windows）。

开源的是[PySizer](http://pysizer.8325.org/)和[Heapy](http://guppy-pe.sourceforge.net/#Heapy)。

我没有尝试过任何人，所以我想知道哪个是最好的考虑：

1.  提供大部分细节。

2.  我必须对我的代码做最少的更改或不做任何更改。

* * *

## 回答 #1

> 赞同：461
> 
> 时间：2012-05-14T22:51:16.357

我的模块[memory_profiler](http://pypi.python.org/pypi/memory_profiler)能够打印内存使用情况的逐行报告，并且可以在 Unix 和 Windows 上运行（最后一个需要 psutil）。输出不是很详细，但目的是让您大致了解代码在哪里消耗更多内存，而不是对分配的对象进行详尽的分析。

用标志装饰你的函数`@profile`并运行你的代码后，`-m memory_profiler`它将打印一个逐行报告，如下所示：

```
Line #    Mem usage  Increment   Line Contents
==============================================
     3                           @profile
     4      5.97 MB    0.00 MB   def my_func():
     5     13.61 MB    7.64 MB       a = [1] * (10 ** 6)
     6    166.20 MB  152.59 MB       b = [2] * (2 * 10 ** 7)
     7     13.61 MB -152.59 MB       del b
     8     13.61 MB    0.00 MB       return a 
```

* * *

## 回答 #2

> 赞同：306
> 
> 时间：2008-09-21T11:45:39.977

[guppy3](https://github.com/zhuyifei1999/guppy3/)使用起来非常简单。在您的代码中的某个时刻，您必须编写以下内容：

```
from guppy import hpy
h = hpy()
print(h.heap()) 
```

这会给你一些像这样的输出：

```
Partition of a set of 132527 objects. Total size = 8301532 bytes.
Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
0  35144  27  2140412  26   2140412  26 str
1  38397  29  1309020  16   3449432  42 tuple
2    530   0   739856   9   4189288  50 dict (no owner) 
```

您还可以找出引用对象的位置并获取有关它的统计信息，但不知何故，有关的文档有点稀疏。

还有一个图形浏览器，用 Tk 编写。

对于 Python 2.x，请使用[Heapy](http://guppy-pe.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：85
> 
> 时间：2008-09-21T04:50:55.013

我推荐[Dowser](http://www.aminus.net/wiki/Dowser)。它很容易设置，您需要对代码进行零更改。您可以通过简单的 Web 界面查看随时间变化的每种类型的对象计数、查看活动对象列表、查看对活动对象的引用。

```
# memdebug.py

import cherrypy
import dowser

def start(port):
    cherrypy.tree.mount(dowser.Root())
    cherrypy.config.update({
        'environment': 'embedded',
        'server.socket_port': port
    })
    cherrypy.server.quickstart()
    cherrypy.engine.start(blocking=False) 
```

您导入 memdebug，然后调用 memdebug.start。就这样。

我还没有尝试过 PySizer 或 Heapy。我会感谢其他人的评论。

**更新**

上面的代码是 for的`CherryPy 2.X`，方法已经去掉了，不带flag了。所以如果你正在使用`CherryPy 3.X``server.quickstart``engine.start``blocking``CherryPy 3.X`

```
# memdebug.py

import cherrypy
import dowser

def start(port):
    cherrypy.tree.mount(dowser.Root())
    cherrypy.config.update({
        'environment': 'embedded',
        'server.socket_port': port
    })
    cherrypy.engine.start() 
```

* * *

## 回答 #4

> 赞同：69
> 
> 时间：2009-10-27T19:41:40.357

考虑[objgraph](http://mg.pov.lt/objgraph/)库（有关示例用例，请参阅[此博客文章）。](http://web.archive.org/web/20201109012938/http://tech.labs.oliverwyman.com/blog/2008/11/14/tracing-python-memory-leaks)

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2013-03-11T14:17:42.353

[Muppy](http://pythonhosted.org/Pympler/muppy.html)是（又一个）Python 的内存使用分析器。该工具集的重点是识别内存泄漏。

Muppy 试图帮助开发人员识别 Python 应用程序的内存泄漏。它可以在运行时跟踪内存使用情况并识别正在泄漏的对象。此外，还提供了允许定位未释放对象的来源的工具。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-07-03T12:12:50.307

我正在为 Python 开发一个名为 memprof 的内存分析器：

[http://jmdana.github.io/memprof/](http://jmdana.github.io/memprof/)

它允许您在执行修饰方法期间记录和绘制变量的内存使用情况。您只需使用以下命令导入库：

```
from memprof import memprof 
```

并使用以下方法装饰您的方法：

```
@memprof 
```

这是一个关于情节如何的例子：

![在此处输入图像描述](https://i.stack.imgur.com/Krt9v.png)

该项目托管在 GitHub 中：

[https://github.com/jmdana/memprof](https://github.com/jmdana/memprof)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2011-10-25T21:31:15.557

我发现[meliae](https://launchpad.net/meliae)比 Heapy 或 PySizer 更实用。如果你碰巧在运行一个 wsgi webapp，那么[Dozer](http://pypi.python.org/pypi/Dozer)是一个不错的 Dowser 中间件包装器

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-09-04T22:56:02.990

也可以试试[pytracemalloc 项目](http://pytracemalloc.readthedocs.org/)，它提供每个 Python 行号的内存使用情况。

编辑（2014/04）：它现在有一个 Qt GUI 来分析快照。

# apache-flex - 如何在 FlashDevelop 中添加对 swcs 的项目引用

> ID：110263
> 
> 赞同：8
> 
> 时间：2008-09-21T04:45:09.363
> 
> 标签：apache-flex, flash, actionscript-3, actionscript, flashdevelop

我正在尝试在 FlashDevelop 中向 papervision 添加项目参考或 swc，但智能感知并没有选择它。我以前做过，但我忘了怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-09-21T05:53:01.400

将您的 swc 添加到项目的 lib 文件夹中。然后右键单击它并标记“添加到库”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-21T09:04:32.487

在菜单中：

```
Project -> Properties -> Compiler Options -> SWC Libraries 
```

（然后将路径或文件添加到列表中）

# graphics - 使用德克斯特的角色精灵好吗，还是我必须

> ID：110271
> 
> 赞同：1
> 
> 时间：2008-09-21T04:50:18.603
> 
> 标签：graphics, 2d, media

.

**灵感—— [南方公园游戏](http://www.megaderek.com/southpark/)**

（如果您在 download.com 上看到下载计数非常受欢迎，，他是否请求许可？？）

我正在制作基于 dexter 实验室主题的 2d 游戏。我从 GSA 得到了 dexter 的精灵。基本上我不是艺术家，所以我必须依赖GameSpriteArchive等网站上已有的精灵、背景、sfx。

但是使用我拥有的 dexter sprite 可以/合法吗？

我也想公开发布它，所以我必须做很多改变才能做到这一点吗？

是否有可能获得使用精灵的许可？我对获得许可的希望非常渺茫。

**除了我的基本计划是——**

1.  来自谷歌搜索的德克斯特的精灵

2.  来自各种 GBA/SNES/等游戏的敌人精灵

3.  这些复古游戏中的瓷砖/物体

4.  德克斯特、飞天小女警和武士杰克背后艺术家的博客和作品集的背景艺术和风格

![替代文字](https://i.stack.imgur.com/LsJGT.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-21T04:56:59.787

我不是律师。这不是法律建议。

如果你自己制作精灵，你会没事的。如果您从创建者那里获得了使用它的版本，那就没问题了。如果它被发布到公共领域，你会没事的。

其他任何事情，你都会有一个明确的问题。

即使您自己创建精灵，您也可能会遇到问题 - 角色的相似性可能受版权保护。然而，这并不是一个简单的问题。

不幸的是，这是您需要请真正的律师才能得到明确答复的事情之一。如果它是供您自己和一些亲密朋友使用的，您可能希望自己不被注意到（就像大多数超速的人一样）而侥幸逃脱。如果您打算将其包含在您分发给公众的东西中（如果您出售它更是如此），您可能会遇到问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T04:54:42.070

可能不合法，因为[Dexter 的实验室](http://www.toonopedia.com/dexter.htm)由 Hanna-Barbera 出版，由 Genndy Tartakovsky 创建。他们将不得不授予您许可证-但问一下也无妨！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T04:55:56.250

如果他们没有注意到，您可能不必获得许可——这是旧的“除非你被抓到否则合法”的事情。但是，我强烈建议您获得创作者的许可，或者出于纯粹的道德理由根本不使用它。毕竟，你不希望有人盗用你的工作，对吧？

# vmware - VMware ESX 与 VMware 工作站

> ID：110274
> 
> 赞同：3
> 
> 时间：2008-09-21T04:51:56.273
> 
> 标签：vmware, virtualization, simulation

我正在使用 VMware Workstation 6.0 模拟“机箱”中的“刀片”紧密集群。主机和目标操作系统都是 Linux。每个“机箱”使用 vmnet 交换机作为虚拟底板，虚拟刀片连接到该底板。其他 vmnet 交换机用于调解每个刀片 VM 上的多个虚拟以太网适配器之间的点对点连接。机箱以及 VM 会频繁启动和关闭。我的脚本 (python) 大量使用 VIX api，并且还操纵 .vmx 配置文件。

从 VMware Workstation 到 ESX，我有什么收获和/或失去什么？我的使用 VIX api 的脚本仍然有效吗？我相当复杂的虚拟网络拓扑，有很多定义为“自定义”的 vmnet 交换机，是否仍然以相同的方式工作？.vmx 配置文件的语法和语义在 Workstation 和 ESX 之间是否相同？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-21T05:33:55.627

通过切换您将获得的第一件事将是一个更强大的平台，该平台直接在您的服务器的裸机上运行。

根据我的经验，*向上*移动VMware 应用程序堆栈从来都不是问题（服务器到工作站再到 ESX）。但是，我将通过将所有 VM 从工作站安装导出到 ESX 安装来验证这一点，以确保您没有看到与从 VMware 运行高端工具相关的任何“奇怪”问题。

根据我的 [有限] 经验，脚本也可以干净利落地继承：每个产品线都在提升其产品线并不会破坏较低级别的工具，但会带来实质性的改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T22:30:14.080

您可以获得可扩展性和性能。与 Workstation 或 Player 等任何 VMware 桌面产品相比，ESX 的可扩展性和运行速度都要好得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-23T21:23:32.787

你不应该失去任何东西。ESXi 执行 Workstation 的所有功能，以及更多功能。我在家里使用 ESXi，在笔记本电脑上使用 Workstation。

您将获得对虚拟网络、存储、快照、克隆、静默来宾操作系统以及 ESXi 配置中许多更高级选项的更细粒度的控制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-11-18T23:23:27.327

需要注意的一件事是，与 Workstation 相比，ESX 产品线的费用相当可观。但是，如果您正在为一家成功的公司工作，那么成本很容易证明是合理的，因为 ESX 是（恕我直言）大炸弹。此外，仅供参考，旧的免费 VMware 服务器选项肯定有一个完全不同的界面。

# resources - 您如何为游戏开发找到媒体资源？

> ID：110279
> 
> 赞同：3
> 
> 时间：2008-09-21T04:54:52.600
> 
> 标签：resources, media

我一直在想，作为一个孤独的游戏开发者，或者说一个只有程序员和喜欢玩游戏的人的团队的一部分......我如何管理由于缺乏艺术家（精灵/瓷砖/动画）在这种情况下？？？

在这种情况下你会怎么做？假设我是一名学生，没有钱聘请艺术家，有没有可以合法免费获得这些资源的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-21T04:59:54.773

最近我需要一些自由语音的声音样本，并找到[了 freesounds.org](http://www.freesound.org/index.php)，其中所有的声音样本都在[CC](http://creativecommons.org)许可下。不太确定我会去哪里寻找图像/纹理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-21T05:41:25.920

您是否尝试过吸引游戏艺术家加入您的努力？

很多人玩游戏（甚至是艺术家）。在游戏上合作的想法可能是足够的激励，特别是如果他们在游戏中获得荣誉，以及投资组合的样本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-21T06:22:11.440

对于图像，还有几个站点，例如**freespace**，例如[http://commons.wikimedia.org/](http://commons.wikimedia.org/)为您的项目获取艺术品/图像的另一个重要资源是联系艺术学校或其他您认识艺术家经常和允许他们为您使用的任何创作签名或获得信用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T08:48:26.697

对于一个爱好者来说，最简单的答案是你不应该担心你的游戏艺术。仅靠程序员的艺术就可以过得很好。

在您创建了一个有效的游戏原型之后，您才应该寻找艺术家。

对于独立开发者，你需要现金来雇佣艺术家。没有办法解决这个问题。只是这样想：你得到你所支付的。

有趣的琐事：最受欢迎的程序员艺术是柯比。开发人员使用粉红色蓬松精灵作为占位符艺术，直到创作者樱井正宏决定该艺术适合游戏并且应该保留。

# css - 风格是如何继承的

> ID：110281
> 
> 赞同：1
> 
> 时间：2008-09-21T04:56:08.043
> 
> 标签：css

如何使样式具有`.a .b .c`除`background-color`（或某些其他属性）之外定义的样式的所有属性？这似乎不起作用。

```
.a .b .c
{
    background-color: #0000FF;
    color: #ffffff;
    border: 1px solid #c0c0c0;
    margin-top: 4px;
    padding: 3px;
    text-align: center;
    font-weight: bold;
}

.a .b .c .d
{
   background-color: green;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:30:03.087

```
.a, .b, .c, .d
{
   background-color: green;
}

.a, .b, .c
{
    background-color: #0000FF;
    color: #ffffff;
    border: 1px solid #c0c0c0;
    margin-top: 4px;
    padding: 3px;
    text-align: center;
    font-weight: bold;
} 
```

这是你的意思吗？
定义的顺序非常有意义，因为后者将适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T04:58:59.347

```
.a, .b, .c {color: #ffffff; border: 1px solid #c0c0c0; margin-top: 4px; padding: 3px; text-align: center; font-weight: bold; }

.a {background-color: red;}

.b {background-color: blue;}

.c {background-color: green;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-21T05:04:34.123

您将添加 .d 类选择器作为您的第一条规则的选择器，然后添加一条规则来重新定义 .d 的背景颜色：

```
.a .b .c,
.d { 
  background-color: #0000FF;
  color: #ffffff;
  border: 1px solid #c0c0c0;
  margin-top: 4px;
  padding: 3px;
  text-align: center;
  font-weight: bold; 
}

.d {
  background-color: green;
} 
```

这就是你所问问题的答案，但我觉得这不是你要找的。也许您应该发布一个标记示例，并告诉我们您希望应用哪些样式，以便我们可以更好地为您提供帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T05:07:06.160

看来你把事情搞混了。如果要将第一组括号中的属性也应用于“.d”，则需要在选择器列表中指定。您还需要用逗号分隔选择器，以便它们成为列表，而不是继承。

例子：

```
<html>
    <head>
    <style type="text/css">
        .a, .b, .c, .d { background-color: #0000FF; color: #FF0000; border: 1px solid #00FF00; font-weight: bold; }
        .d { background-color: white; }
    </style>
    </head>
    <body style="background-color: grey;">
        <p class="a">Lorem ipsum dolor sit amet.</p>
        <p class="b">Lorem ipsum dolor sit amet.</p>
        <p class="c">Lorem ipsum dolor sit amet.</p>
        <p class="d">Lorem ipsum dolor sit amet.</p>
    </body>
    </html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-21T05:28:04.737

我认为你在考虑这个有点倒退，所以让我们试着整理一下你正在使用的语言。

```
.a .b .c{
 background-color: #0000FF;
 color: #ffffff;
} 
```

看上面的CSS，“.a .b .c”部分是**选择器**，大括号之间的部分是样式。该选择器说'找到所有具有“c”类的元素，这些元素在具有“b”类的元素内部，这些元素在具有“a”类的元素内部，并将这些样式应用于它们' - - 这是一条规则，说明页面上的哪些元素将获得您想要的外观。

多个选择器可以匹配页面上的同一个元素，并且它们应用于元素的顺序有规则（[http://www.w3.org/TR/CSS2/cascade.html](http://www.w3.org/TR/CSS2/cascade.html)）。简单的规则是更多的“特定”选择器覆盖更少的“特定”选择器。“div.blueBanner pa:hover.highlight”比“.blueBanner”更“具体”。如果两条规则具有相同的特性，则 CSS 文件中后面的一条将覆盖。

html示例：

```
<div class="a">
    <div class="b">
        <div class="c">foo</div>
        <div class="c d">bar</div>
    </div>
</div> 
```

因此，您有一个选择器“.a .b .c”（如您在上面列出的）和页面上的两个元素（foo 和 bar）与该选择器匹配，因此它们都获得了背景颜色和您定义的所有其他样式。

现在，您还希望第二个元素具有绿色背景色。它具有分配给它的另一个类“d”，因此您可以定义另一个仅匹配第二个元素“.a .b .d”的选择器并将其设置为背景色。“bar”元素仍然从“.a .b .c”选择器中获取所有其他样式（字体、颜色等），但背景颜色来自“.a .b .d”。

# html - Internet Explorer ol 编号按预期显示在 li 的底部而不是顶部

> ID：110305
> 
> 赞同：4
> 
> 时间：2008-09-21T05:19:11.777
> 
> 标签：html, internet-explorer, rendering, haslayout

我正在处理一个具有嵌套 p、div 和 li 的 ol 的页面。Internet Explorer 6 和 7 都在末尾的 p 元素之后（在 li 标记的最底部）呈现 ol 标记的数字，而不是像预期的那样在最外层 li 的顶部。我正在使用 PowerPC Mac，无法进行任何测试。是否有一些简单的 CSS hack 可以使此渲染与 Firefox 中的渲染相同？

[您可以在此处](http://www.taxminimiser.com/beta/whats_included.php)查看实时页面。我知道，我正在定位侧边栏。暂时忽略它。

标记如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="css/global.css" />
        <link rel="stylesheet" type="text/css" href="css/whats_included.css" />
        <script type="text/javascript" src="script/compliant_target_blank.js"></script>
        <!--[if lte IE 5]>
            <script type="text/javascript" src="script/ie_5_unsupported_warning.js"></script>
        <![endif]-->
        <!--[if gt IE 5]>
            <link rel="stylesheet" type="text/css" href="css/ie_hacks/global.css" />
        <![endif]-->
        <title>
            The Daily Plan-It, LLC - Home of the Tax MiniMiser
        </title>
    </head>
    <body>
        <?php include("includes/nav_bar.php") ?>

        <div id="content">
            <img src="images/title.png" alt="Tax MiniMiser Financial Tracking System" />
            <div id="bordered_wrapper">
                <h1>Here's What You Get With The Tax MiniMiser!</h1>
                <h2>24 Envelopes, 7-hole punched to fit one-at-a-time in your binder</h2>
                <ol>
                    <li class="main_item">
                        Business Income &amp; Expense Record
                        <div class="preview_image">
                            <a href="previews/large/bier/front.html" rel="external">
                                <img src="images/small_previews/large/bier_preview.jpg" alt="" /><br/>
                                Click to Preview!
                            </a>
                        </div>
                        <div class="details">
                            <ul>
                                <li>12 receipt envelopes with all the income &amp; expense columns you need to transform your planner or binder into a daily tax journal!</li>
                                <li>Store daily receipts in the convenient pocket envelopes.</li>
                            </ul>
                        </div>
                        <p>To get a free copy of the &quot;20 Column Heading Guidelines&quot;, <a href="files/downloads/20_column_heading_guidelines.pdf">click here</a> or call our Fax-on-Demand line at 888-829-8237.</p>
                    </li>
                    <li class="main_item">
                        Vehicle Mileage &amp; Expense Record
                        <div class="preview_image">
                            <a href="previews/large/vme/front.html" rel="external">
                                <img src="images/small_previews/large/mileage_preview.jpg" alt=""/><br/>
                                Click to Preview!
                            </a>
                        </div>
                        <div class="details">
                            <ul>
                                <li>12 receipt envelopes to track your daily mileage and vehicle expenses. Keep one envelope in each vehicle used for your business(es).</li>
                                <li>Store daily receipts in the convenient pocket envelopes.</li>
                            </ul>
                        </div>
                        <p>To get a free copy of the &quot;Instructions for Vehicle Mileage &amp; Expense Record&quot;, <a href="files/downloads/vehicle_record_instructions.pdf">click here</a> or call our Fax-on-Demand line at 888-829-8237.</p>
                    </li>
                    <li class="main_item">
                        Annual Business Summary of Income and Expense
                        <div class="preview_image">
                            <a href="previews/large/cover/inside.html" rel="external">
                                <img src="images/small_previews/large/cover_inside_preview.jpg" alt="" /><br/>
                                Click to Preview!
                            </a>
                        </div>
                        <div class="details">
                            <ul>
                                <li>Enter the subtotals from all the envelopes throughout the year. Then you and your tax pro can figure out profitability and taxes to maximize your deductions and legally minimize your taxes.</li>
                            </ul>
                        </div>
                    </li>
                </ol>
                <p class="end">To see previews of the small (6&quot; x 8&frac12;&quot;) Tax MiniMisers, visit their respective pages <a href="products.php">here.</a></p>
            </div>
        </div>

        <?php include("includes/footer.php") ?>
    </body>
</html> 
```

和CSS：

```
#content {
    background-color: white;
}

#bordered_wrapper {
    margin-left: 26px;
    background: top left no-repeat url(../images/borders/yellow-box-top.gif);
}

#bordered_wrapper h1, #bordered_wrapper h2 {
    margin-left: 20px;
}

#bordered_wrapper h1 {
    padding-top: 15px;
    margin-bottom: 0;
}

#bordered_wrapper h2 {
    margin-top: 0;
    font-size: 1.3em;
}

ol {
    font-size: 1.1em;
}

ul {
    list-style-type: disc;
}

li.main_item {
    width: 700px;
    clear: right;
}

li p {
    clear: both;
    margin-bottom: 20px;
}

.preview_image {
    width: 200px;
    float: right;
    text-align: center;
    margin-bottom: 10px;
}

.preview_image a {
    text-decoration: none;
}

.preview_image img {
    border-style: none;
}

.end {
    clear: right;
    padding-bottom: 25px;
    padding-left: 20px;
    background: bottom left no-repeat url(../images/borders/yellow-box-bottom.gif);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-25T02:05:48.450

恭喜，您是 IE 的[hasLayout](http://msdn.microsoft.com/en-us/library/ms533776.aspx)属性的受害者。

简短版：这次你很容易。更改这些规则：

```
...

ol {
    font-size: 1.1em;
}

...

li.main_item {
    width: 700px;
    clear: right;
}

... 
```

对此：

```
...

ol {
    font-size: 1.1em;
    width: 700px;
}

...

li.main_item {
    clear: right;
}

... 
```

这一切都很好。

更长的版本：当您将某些 CSS 规则应用于某些元素时，IE 5.5+ 会为这些元素提供一个名为“hasLayout”的属性，该属性会更改该元素的呈现方式。由于 hasLayout 是一个没有明显用途的只读属性，网页设计师花了很长时间才发现这个问题。较旧的网站（甚至 Quirksmode.org！）仍然有页面建议使用填充、边距，甚至使用 Javascript 来解决这些问题。如果你能帮助它，不要做这些事情。相反，看看你是否可以找出错误地赋予了 hasLayout 的元素，并更改有问题的 CSS 以使该元素不再获得 hasLayout。如果这完全破坏了您的页面，请使用[条件注释](http://www.quirksmode.org/css/condcom.html)只为 IE 修复它。以下是一些将“hasLayout”添加到尚未拥有它的元素的 CSS 规则：

*   位置：绝对
*   浮动：左|右
*   显示：内联块
*   高度：除“自动”之外的任何值
*   缩放：“正常”以外的任何值（MS 专有）
*   写作模式：tb-rl（MS专有）

从 IE7 开始，溢出成为 hasLayout 的触发器。

*   溢出：隐藏|滚动|自动

最长版本：阅读以下文章。

1.  这是微软希望你[通过触发 "hasLayout"](http://msdn.microsoft.com/en-us/library/bb250481.aspx)来做的所有巧妙的事情。
2.  这是网页设计师在发现发生了什么时[对 hasLayout 的想法](http://www.satzansatz.de/cssd/onhavinglayout)的简洁版本。一些相同的内容，但包括 CSS hacks 和东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-21T05:36:18.007

我刚刚在 firefox 3/webkit nightly/internet explorer 7 中测试了您的示例 html，所有这些都与顶部的数字完全相同。

问题可能出在您的 CSS 中，您能告诉我们实际损坏的页面吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-21T08:36:33.690

同样在这里，在 WinXP Pro SP3 上用 IE6 测试，它显示正确。您应该提供重现问题的片段或实时网页。也许环境很重要，或者现有的 CSS 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-06T15:42:08.137

实际上，我也遇到了这个错误。在我的页面中，它仅在使用 javascript 更改编号后发生。唯一可用的真正解决方案是使用：

```
vertical-align: top; 
```

老实说，我不知道为什么 IE7 会这样做，但是有一种简单的方法可以解决它。

# git - 如何确保我的 git repo 代码是安全的？

> ID：110313
> 
> 赞同：7
> 
> 时间：2008-09-21T05:25:29.767
> 
> 标签：git, backup, dvcs

如果我们的组织要从 subversion 之类的中央服务器 VCS 切换到 git 之类的分布式 VCS，我如何确保我的所有代码免受硬件故障的影响？

使用中央服务器 VCS，我只需要每天备份存储库。如果我们使用 DVCS，那么所有开发人员机器上都会有大量代码分支，并且如果该硬件出现故障（或者开发人员丢失了他的笔记本电脑或被盗），那么我们将没有任何备份.

请注意，我不认为“让开发人员将分支推送到服务器”是一个好的选择——这[很乏味](http://www.mattblodgett.com/2008/02/matt-blodgett-first-law-of-software.html)，开发人员最终不会这样做。

有没有解决这个问题的通用方法？

**一些澄清：**

使用本机中央服务器 VCS ，除了开发人员最近的更改之外，*所有内容都必须在中央服务器上。*因此，例如，如果开发人员决定分支进行错误修复，则该分支位于中央服务器上并且可以立即进行备份。

如果我们使用 DVCS，那么开发人员可以创建一个本地分支（实际上是许多本地分支）。在开发人员认为“哦，是的，我应该将其推送到中央服务器”之前，这些分支都不在中央服务器上并且可用于备份。

所以我看到的区别（如果我错了，请纠正我！）：如果我们使用 DVCS，但使用普通 VCS，半实现的功能和错误修复可能无法用于中央服务器上的备份。我如何保证该代码的安全？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-21T09:21:16.097

我认为您会发现在实践中开发人员更喜欢使用中央存储库，而不是在彼此的本地存储库之间推拉。克隆中央存储库后，在处理任何跟踪分支时，获取和推送都是微不足道的命令。将六个遥控器添加到所有同事的本地存储库是一件痛苦的事情，而且这些存储库可能并不总是可以访问（关闭、在带回家的笔记本电脑上等）。

在某些时候，如果你们都在做同一个项目，那么所有的工作都需要整合起来。这意味着您需要一个集成分支，将所有更改汇集在一起​​。这自然需要所有开发人员都可以访问，例如，它不属于首席开发人员的笔记本电脑。

设置中央存储库后，您可以使用 cvs/svn 样式的工作流程来签入和更新。如果您有本地更改，则 cvs update 变为 git fetch 和 rebase，如果没有，则变为 git pull。cvs commit 变成 git commit 和 git push。

通过此设置，您的完全集中式 VCS 系统处于类似的位置。一旦开发人员提交了他们的更改（git push），他们需要这样做才能对团队的其他成员可见，他们就在中央服务器上并将被备份。

在这两种情况下需要纪律的是防止开发人员将长期运行的更改保留在中央存储库之外。我们中的大多数人可能都曾在这样一种情况下工作过，其中一名开发人员正在开发功能“x”，这需要对某些核心代码进行根本性的改变。这一变化将导致其他所有人都需要完全重建，但该功能还没有为主流做好准备，所以他只是保持检查直到一个合适的时间点。

尽管存在一些实际差异，但两种情况的情况都非常相似。使用 git，因为您可以执行本地提交并可以管理本地历史记录，所以个人开发人员可能不会像使用 cvs 之类的东西那样感觉到需要推送到中央存储库。

另一方面，使用本地提交可以作为一个优势。将所有本地提交推送到中央存储库上的安全位置应该不是很困难。本地分支可以存储在开发人员特定的标签命名空间中。

例如，对于 Joe Bloggs，可以在他的本地存储库中创建一个别名来执行类似以下的操作以响应 (eg) `git mybackup`。

```
git push origin +refs/heads/*:refs/jbloggs/* 
```

这是一个可以在任何时候（例如一天结束）使用的单个命令，以确保他的所有本地更改都得到安全备份。

这有助于应对各种灾难。Joe 的机器坏了，他可以使用另一台机器并获取已保存的提交并从他离开的地方继续。乔病了？Fred 可以取出 Joe 的分支来获取他昨天所做的“必须”修复，但没有机会与 master 进行测试。

回到原来的问题。dVCS 和集中式 VCS 之间是否需要有所区别？您说在 dVCS 案例中，半实现的功能和错误修复不会出现在中央存储库中，但我认为没有区别。

在使用集中式 VCS 时，我已经看到许多情况下，一个半实现的功能仍停留在一个开发人员的工作台上。它要么采用允许将一半编写的功能签入主流的策略，要么必须做出创建中央分支的决定。

在 dVCS 中可能会发生同样的事情，但应该做出同样的决定。如果有重要但不完整的工作，需要集中保存。git 的优点是创建这个中央分支几乎是微不足道的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-21T05:32:32.400

我认为使用分布式 VCS 必然意味着您*必须*以完全分布式的方式使用它是一种谬论。建立一个通用的 git 仓库，告诉大家仓库是官方的，这是完全有效的。对于正常的开发工作流程，开发人员将从公共存储库中提取更改并更新他们自己的存储库。只有在两个开发人员积极合作开发特定功能的情况下，他们才可能需要直接从彼此那里提取更改。

如果有多个开发人员在一个项目上工作，那么必须记住从其他人那里获取更改是非常乏味的。如果您*没有*中央存储库，您会怎么做？

在工作中，我们有一个备份解决方案，每天备份每个人的工作目录，并每周将全部内容写入 DVD。因此，尽管我们有一个中央存储库，但每个单独的存储库也都有备份。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-21T05:29:47.807

在 DVCS 中使用“中央”服务器作为权威并不少见，这也为您提供了进行备份的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T15:35:06.013

我觉得这个问题有点奇怪。假设您使用的是非分布式版本控制系统，例如 CVS，您将在中央服务器上有一个存储库，并在开发人员的服务器上进行工作。你如何备份存储库？您如何备份开发人员正在进行的工作？这些问题的答案正是您处理问题所必须做的。

使用分布式版本控制，开发人员服务器上的存储库正在进行中。你想备份它吗？然后备份它！就这么简单。

我们有一个自动备份系统，可以从我们指定的机器上抓取任何目录，因此我将机器上的任何存储库和工作副本添加到最后，包括 git 和 CVS 存储库。

顺便说一句，如果您在发布产品的公司中使用分布式版本控制，那么您**将**拥有一个中央存储库。这是你释放的那个。它可能不在特殊的服务器上；它可能在某些开发人员的硬盘上。但是您从中发布的存储库是中央存储库。（我想如果你还没有发布，你可能还没有。）我感觉所有项目都有一个或多个中央存储库。（实际上，如果他们有多个项目，那就是两个项目，一个是分叉。）这也适用于开源。

即使您没有中央存储库，解决方案也是一样的：备份开发人员机器上的工作。无论如何，你应该一直这样做。正在进行的工作在分布式存储库中而不是 CVS 工作副本或直接的非版本化目录中这一事实并不重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-21T05:32:17.923

您可以让开发人员主目录通过本地网络挂载远程设备。然后你只需要担心网络存储的安全。或者，也许您可​​以使用[DropBox 之](http://www.getdropbox.com/)类的工具无缝地将本地存储库复制到其他地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-21T11:35:34.167

您团队中的所有开发人员也可以在服务器上拥有自己的分支（可以是每个工单或只是每个开发人员等）。这样他们就不会破坏 master 分支中的构建，但他们仍然可以将正在进行的工作推送到备份的服务器。

[我自己的 git_remote_branch](http://programblings.com/2008/08/06/time-to-git-collaborating-with-git_remote_branch/)工具对于这种工作流程可能会派上用场（请注意，它需要 Ruby）。它有助于操作远程分支。

作为旁注，谈到回购安全，您可以在您的服务器上设置一个提交后挂钩，该挂钩执行简单的 git clone 或 git push 到另一台机器......每次提交后您都会获得最新的备份！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-24T04:12:05.160

我们使用 rsync 将各个开发人员的 .git 目录备份到服务器上的目录。这是使用围绕 git clone 和 post-commit 等钩子的包装脚本设置的。

因为它是在 post-* 钩子中完成的，所以开发人员不需要记住手动进行。而且因为我们使用带超时的 rsync，如果服务器宕机或者用户在远程工作，他们仍然可以工作。

# c# - LINQ to entity - 构建 where 子句以测试多对多关系中的集合

> ID：110314
> 
> 赞同：18
> 
> 时间：2008-09-21T05:28:03.690
> 
> 标签：c#, linq, entity-framework, lambda, many-to-many

所以，我使用的是 Linq 实体框架。我有 2 个实体：`Content`和`Tag`. 它们彼此之间是多对多的关系。`Content`可以有很多`Tags`，`Tag`也可以有很多`Contents`。所以我正在尝试编写一个查询来选择任何标签名称等于的所有内容`blah`

实体都具有另一个实体的集合作为属性（但没有 ID）。这就是我挣扎的地方。我确实有一个自定义表达式`Contains`（所以，无论谁可以帮助我，你都可以假设我可以为一个集合做一个“包含”）。我从以下网址得到这个表达式：[http ://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=2670710&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=2670710&SiteID=1)

## 编辑 1

[我最终找到了自己的答案。](https://stackoverflow.com/questions/110314/linq-to-entities-building-where-clauses-to-test-collections-within-a-many-to-ma#131551)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-25T05:04:08.910

在阅读了[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)之后，阅读了人们发给我的所有精彩帖子，发布在其他网站上，然后阅读了更多关于[Combining Predicates](http://blogs.msdn.com/meek/archive/2008/05/02/linq-to-entities-combining-predicates.aspx)和[Canonical Function Mapping](http://msdn.microsoft.com/en-us/library/bb738681.aspx)的内容……哦，我从[Calling functions in LINQ 查询中学](http://tomasp.net/blog/linq-expand.aspx)到了一些东西（其中一些课程取自这些页面）。

我终于有办法了！！！虽然有一段有点被黑了......

让我们用 :(

我不得不使用反射器并复制标记为内部的 ExpressionVisitor 类。然后我不得不对其进行一些小改动，以使其正常工作。我必须创建两个异常（因为它是新的内部异常。我还必须更改 ReadOnlyCollection() 方法的返回值：

```
return sequence.ToReadOnlyCollection<Expression>(); 
```

到：

```
return sequence.AsReadOnly(); 
```

我会发布课程，但它非常大，我不想让这篇文章变得混乱，因为它已经是。我希望将来可以从我的库中删除该类，并且 Microsoft 会将其公开。继续...

我添加了一个 ParameterRebinder 类：

```
public class ParameterRebinder : ExpressionVisitor {
        private readonly Dictionary<ParameterExpression, ParameterExpression> map;

        public ParameterRebinder(Dictionary<ParameterExpression, ParameterExpression> map) {
            this.map = map ?? new Dictionary<ParameterExpression, ParameterExpression>();
        }

        public static Expression ReplaceParameters(Dictionary<ParameterExpression, ParameterExpression> map, Expression exp) {
            return new ParameterRebinder(map).Visit(exp);
        }

        internal override Expression VisitParameter(ParameterExpression p) {
            ParameterExpression replacement;
            if (map.TryGetValue(p, out replacement)) {
                p = replacement;
            }
            return base.VisitParameter(p);
        }
    } 
```

然后我添加了一个 ExpressionExtensions 类：

```
public static class ExpressionExtensions {
        public static Expression<T> Compose<T>(this Expression<T> first, Expression<T> second, Func<Expression, Expression, Expression> merge) {
            // build parameter map (from parameters of second to parameters of first)
            var map = first.Parameters.Select((f, i) => new { f, s = second.Parameters[i] }).ToDictionary(p => p.s, p => p.f);

            // replace parameters in the second lambda expression with parameters from the first
            var secondBody = ParameterRebinder.ReplaceParameters(map, second.Body);

            // apply composition of lambda expression bodies to parameters from the first expression 
            return Expression.Lambda<T>(merge(first.Body, secondBody), first.Parameters);
        }

        public static Expression<Func<T, bool>> And<T>(this Expression<Func<T, bool>> first, Expression<Func<T, bool>> second) {
            return first.Compose(second, Expression.And);
        }

        public static Expression<Func<T, bool>> Or<T>(this Expression<Func<T, bool>> first, Expression<Func<T, bool>> second) {
            return first.Compose(second, Expression.Or);
        }
    } 
```

我添加的最后一个类是 PredicateBuilder：

```
public static class PredicateBuilder {
    public static Expression<Func<T, bool>> True<T>() { return f => true; }
    public static Expression<Func<T, bool>> False<T>() { return f => false; }

} 
```

这是我的结果...我能够执行此代码并从我正在搜索的标签中取回具有匹配“标签”实体的结果“内容”实体！

```
 public static IList<Content> GetAllContentByTags(IList<Tag> tags) {
        IQueryable<Content> contentQuery = ...

        Expression<Func<Content, bool>> predicate = PredicateBuilder.False<Content>();

        foreach (Tag individualTag in tags) {
            Tag tagParameter = individualTag;
            predicate = predicate.Or(p => p.Tags.Any(tag => tag.Name.Equals(tagParameter.Name)));
        }

        IQueryable<Content> resultExpressions = contentQuery.Where(predicate);

        return resultExpressions.ToList();
    } 
```

如果有人需要帮助，请告诉我，如果您希望我为此向您发送文件，或者只是需要更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-21T17:52:23.853

总结一下...

```
contentQuery.Where(
    content => content.Tags.Any(tag => tags.Any(t => t.Name == tag.Name))
); 
```

那是你所期待的吗？

我有点困惑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T06:01:26.950

这就是问题本身所要求的：

```
contentQuery.Where(
    content => content.Tags.Any(tag => tag.Name == "blah")
); 
```

我不确定获取提问者代码的思考过程是什么，真的，我也不完全确定它到底在做什么。我真正确定的一件事是 .AsQueryable() 调用是完全没有必要的——要么 .Tags 已经是一个 IQueryable，要么 .AsQueryable() 只是为你伪造它——在 where 添加额外的调用不需要有。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-24T12:27:14.390

该错误与“标签”变量有关。LINQ to Entities 不支持作为值集合的参数。简单地调用 tags.AsQueryable() - 正如之前的答案所建议的那样 - 也不起作用，因为默认的内存中 LINQ 查询提供程序与 LINQ to Entities（或其他关系提供程序）不兼容。

作为一种解决方法，您可以使用表达式 API 手动构建过滤器（请参阅[此论坛帖子](http://forums.microsoft.com/forums/ShowPost.aspx?PostID=3914701&SiteID=1)）并按如下方式应用它：

```
var filter = BuildContainsExpression<Element, string>(e => e.Name, tags.Select(t => t.Name));
var query = source.Where(e => e.NestedValues.Any(filter)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-21T05:49:13.080

```
tags.Select(testTag => testTag.Name) 
```

tags 变量从哪里初始化？它是什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T04:42:58.173

*注意：请编辑问题本身，而不是回复答案 - 这不是讨论线程，他们可以随时重新排序*

如果您正在搜索标有一组标签中的任何一个的所有内容：

```
IEnumerable<Tag> otherTags;
...
var query = from content in contentQuery
            where content.Tags.Intersection(otherTags).Any()
            select content; 
```

看起来您可能正在使用 LINQ To SQL，在这种情况下，如果您编写一个存储过程来执行此操作可能会更好：使用 LINQ 执行此操作可能不会在 SQL Server 上运行——它很可能会尝试拉下所有内容`contentQuery`并获取所有`.Tags`集合。不过，我必须实际设置一个服务器来检查这一点。

# c# - 从固定宽度的平面文件中获取数百万条记录到 SQL 2000

> ID：110325
> 
> 赞同：0
> 
> 时间：2008-09-21T05:32:43.790
> 
> 标签：c#, sql-server

显然我可以使用 BCP，但这是问题所在。如果批处理中的一条记录的日期无效，我想将其重定向到单独的表/文件/其他任何内容，但保持批处理运行。我不认为 SSIS 可以安装在有帮助的服务器上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-21T06:10:50.407

创建一个在 INSERT 上处理的触发器。此触发器将对您的日期字段进行验证检查。如果验证失败，则在单独的表中插入，您也可以选择继续插入或不允许插入。

重要说明：默认情况下，触发器不会在批量插入时触发（包括 BCP 和 SSIS）**。**为了让它工作，你需要指定你希望触发器触发，使用类似的东西：

```
BULK INSERT your_database.your_schema.your_table FROM your_file WITH (FIRE_TRIGGERS ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-21T08:16:24.410

是的，如果您使用的是 DTS，您应该只导入使用 varchar 而不是日期的临时表，然后将数据按摩到适当的表中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-21T20:24:47.653

马特所说的问题是，您不应该在事后使用游标来操作数据，尤其是在您拥有数百万条记录的情况下。CUrsopr 效率极低，应避免使用。

请改用批处理。

But by all means use his idea of a staging table. I wouldn' ever consider importing directly into a production table as too many things can happen over time to change the data in the input file and cause problems.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-21T06:16:41.500

您是说文件中有一个充满日期的列，并且您希望该数据进入 SQL 数据库表中“日期时间”类型的列？如果文件中的一个值不是有效日期，它会爆炸吗？我只是想确保我理解这一点。

您可以在 SQL 数据库中创建另一个临时表，其结构与您希望文件中的数据最终所在的表具有相同的结构，但每列的类型为 varchar(255) 或其他类型。无论任何日期是否有效，将数据从文件中吸出并放入该表都不应该失败。

然后，在 SQL 中，您可以随意处理数据。您可以使用[游标](http://www.jackdonnell.com/articles/SQL_CURSOR.htm)从临时表中选择所有记录并循环访问它们。对于每条记录，您可以使用 T-SQL [ISDATE](http://doc.ddart.net/mssql/sql70/ia-iz_32.htm)函数有条件地将当前记录中的值插入到一个或另一个表中。

我是说，将数据存入数据库，然后像这样运行脚本：

```
// **this is untested, there could be syntax errors**

// if we have tables like this:
CREATE TABLE tempoary (id VARCHAR(255), theDate VARCHAR(255), somethingElse VARCHAR(255))
CREATE TABLE theGood  (id INT, theDate DATETIME, somethingElse VARCHAR(255))
CREATE TABLE theBad   (id INT, theDate VARCHAR(255))

// then after getting the data into [tempoary], do this:
DECLARE tempCursor CURSOR
FOR SELECT id, theDate, somethingElse FROM temporary

OPEN tempCursor

DECLARE @id VARCHAR(255)
DECLARE @theDate VARCHAR(255)
DECLARE @somethingElse VARCHAR(255)

FETCH NEXT FROM tempCursor INTO @id, @theDate, @somethingElse
While (@@FETCH_STATUS <> -1)
BEGIN
    IF ISDATE(@theDate)
    BEGIN
        INSERT INTO theGood (id, theDate, somethingElse)
        VALUES (CONVERT(INT, @id), CONVERT(DATETIME, theDate), somethingElse)
    END
    ELSE
    BEGIN
        INSERT INTO theBad (id, theDate)
        VALUES (CONVERT(INT, @id), theDate)
    END
    FETCH NEXT FROM tempCursor INTO @id, @theDate, @somethingElse
END
CLOSE tempCursor
DEALLOCATE tempCursor 
```

# java - Value 对象应该包含多少业务逻辑？

> ID：110328
> 
> 赞同：14
> 
> 时间：2008-09-21T05:34:46.047
> 
> 标签：java, oop, data-transfer-objects

我尊敬的一位导师建议，一个简单的 bean 是浪费时间 - 值对象“必须”包含一些有用的业务逻辑。

另一个人说这样的代码很难维护，所有的业务逻辑都必须外部化。

我意识到这个问题是主观的。无论如何都要问——想从更多的角度知道答案。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-09-21T09:18:16.227

将数据和业务逻辑放在一起的想法是促进封装，并尽可能少地将内部状态暴露给其他对象。这样，客户端可以依赖接口而不是实现。请参阅[“告诉，不要问”](http://www.pragmaticprogrammer.com/articles/tell-dont-ask)原则和得[墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)。封装使得更容易理解数据可以处于的状态、更容易阅读代码、更容易解耦类并且通常更容易进行单元测试。

将业务逻辑外部化（通常为“服务”或“经理”类）会产生诸如“这些数据在哪里使用？”之类的问题。和“它可以处于什么状态？” 更难回答。这也是一种程序性的思维方式，包裹在一个对象中。这会导致[领域模型贫乏](http://www.martinfowler.com/bliki/AnemicDomainModel.html)。

外化行为并不总是坏事。例如，[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)可能会编排域对象，但不会接管它们的状态操作职责。或者，当您主要对能够很好地映射到输入表单的数据库进行读/写时，也许您根本不需要域模型——或者它所带来的痛苦的对象/关系映射开销。

传输对象通常通过提供调用层所需的最少状态信息来将架构层彼此（或与外部系统）解耦，而不暴露任何业务逻辑。

这可能很有用，例如在为视图准备信息时：只为视图提供它需要的信息，而不是其他任何东西，这样它就可以专注于*如何*显示信息，而不是显示*什么*信息。例如，TO 可能是多个数据源的聚合。

一个优点是您的视图和域对象是分离的。在 JSP 中使用你的域对象会使你的域更难重构，并促进了对 getter 和 setter 的不加选择的使用（因此破坏了封装）。

但是，也存在与拥有大量传输对象相关的开销，并且通常也会产生大量重复。我参与的一些项目最终得到了 TO，它们基本上反映了其他域对象（我认为这是一种反模式）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-21T07:13:02.410

您最好将它们称为[传输对象](https://www.oracle.com/technetwork/java/transferobject-139757.html)或[数据传输对象 (DTO)](http://en.wikipedia.org/wiki/Data_Transfer_Object)。

早些时候，同样的 j2ee 模式被称为“值对象”，但他们更改了名称，因为它与此混淆

[http://dddcommunity.org/discussion/messageboardarchive/ValueObjects.html](http://dddcommunity.org/discussion/messageboardarchive/ValueObjects.html)

为了回答您的问题，我只会将最少的逻辑放在我的 DTO 中，即出于显示原因所需的逻辑。

更好的是，如果我们谈论的是基于数据库的 Web 应用程序，我会超越核心 j2ee 模式并使用[Hibernate](http://www.hibernate.org/)或[Java Persistence API](http://en.wikipedia.org/wiki/Java_Persistence_API)创建一个支持延迟加载关系的域模型并在视图中使用它。

请参阅[视图中的打开会话](http://www.hibernate.org/43.html)。

通过这种方式，您不必编写一组 DTO，并且您可以在视图/控制器等中使用所有业务逻辑。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-21T05:46:38.263

这取决于。

哎呀，我只是脱口而出陈词滥调吗？

设计对象时要问的基本问题是：当其他对象使用/消费时，控制对象数据的逻辑会*不同*还是*相同？*

如果不同的使用领域需要不同的逻辑，请将其外部化。如果无论对象到哪里都相同，则将其与类放在一起。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-21T05:43:29.677

我个人的偏好是将所有业务逻辑放在域模型本身中，即“真正的”域对象中。因此，当创建数据传输对象时，它们大多只是域对象的（不可变）状态表示，因此不包含业务逻辑。虽然它们可以包含用于克隆和比较的方法，但业务逻辑代码的核心仍保留在域对象中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-21T07:19:18.633

科罗斯所说的。

Value Object := 一个小的简单对象，例如金钱或日期范围，其相等性不基于身份。

DTO := 在进程之间携带数据以减少方法调用次数的对象。

这些是 Martin Fowler 提出的定义，我想普及一下。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-21T18:19:09.313

我同意 Panagiotis 的观点：视图模式中的开放会话比使用 DTO 好得多。换句话说，我发现如果您从视图层一直向下传输域对象（或其组合），应用程序会简单得多。

也就是说，这很难实现，因为您需要使 HttpSession 与持久层的工作单元一致。然后您需要确保所有数据库修改（即创建、更新和删除）都是有意的。换句话说，您不希望视图层具有域对象、字段被修改并且修改被持久化而应用程序代码没有故意保存更改的情况。另一个需要处理的重要问题是确保您的事务语义令人满意。通常获取和修改一个域对象将在一个事务上下文中进行，并且使您的 ORM 层需要一个新事务并不难。什么*是*具有挑战性的是嵌套事务，您希望在打开的第一个事务上下文中包含第二个事务上下文。

如果您不介意研究非 Java API 如何处理这些问题，那么值得看看 Rails 的 Active Record，它允许 Ruby 服务器页面直接使用域模型并遍历其关联。

# objective-c - 在 Objective-C 中将 NSArray 过滤成一个新的 NSArray

> ID：110332
> 
> 赞同：125
> 
> 时间：2008-09-21T05:36:29.413
> 
> 标签：objective-c, cocoa, nsarray

我有一个`NSArray`，我想`NSArray`用原始数组中满足特定条件的对象创建一个新对象。条件由返回 a 的函数决定`BOOL`。

我可以创建一个`NSMutableArray`, 遍历源数组并复制过滤器函数接受的对象，然后创建它的不可变版本。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2008-09-21T05:43:47.087

`NSArray`并`NSMutableArray`提供过滤数组内容的方法。`NSArray`提供**filteredArrayUsingPredicate：**它返回一个新数组，其中包含接收器中与指定谓词匹配的对象。`NSMutableArray`添加**filterUsingPredicate:**它根据指定的谓词评估接收者的内容并只留下匹配的对象。这些方法在以下示例中进行了说明。

```
NSMutableArray *array =
    [NSMutableArray arrayWithObjects:@"Bill", @"Ben", @"Chris", @"Melissa", nil];

NSPredicate *bPredicate =
    [NSPredicate predicateWithFormat:@"SELF beginswith[c] 'b'"];
NSArray *beginWithB =
    [array filteredArrayUsingPredicate:bPredicate];
// beginWithB contains { @"Bill", @"Ben" }.

NSPredicate *sPredicate =
    [NSPredicate predicateWithFormat:@"SELF contains[c] 's'"];
[array filteredArrayUsingPredicate:sPredicate];
// array now contains { @"Chris", @"Melissa" } 
```

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2013-10-22T12:06:55.353

有很多方法可以做到这一点，但到目前为止，最简洁的方法肯定是使用`[NSPredicate predicateWithBlock:]`：

```
NSArray *filteredArray = [array filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id object, NSDictionary *bindings) {
    return [object shouldIKeepYou];  // Return YES for each object you want in filteredArray.
}]]; 
```

我认为这是尽可能简洁。

* * *

## 迅速：

对于那些`NSArray`在 Swift 中使用 s 的人，你可能更喜欢这个*更*简洁的版本：

```
let filteredArray = array.filter { $0.shouldIKeepYou() } 
```

`filter`只是一个方法`Array`（`NSArray`隐式桥接到 Swift 的`Array`）。它接受一个参数：一个闭包，它接受数组中的一个对象并返回一个`Bool`. 在您的闭包中，只需`true`在过滤后的数组中返回您想要的任何对象。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2012-11-08T12:14:23.347

根据 Clay Bridges 的回答，这是一个使用块进行过滤的示例（更改`yourArray`为您的数组变量名称和`testFunc`测试函数的名称）：

```
yourArray = [yourArray objectsAtIndexes:[yourArray indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    return [self testFunc:obj];
}]]; 
```

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2010-10-04T16:22:44.910

如果您是 OS X 10.6/iOS 4.0 或更高版本，那么使用块可能比使用 NSPredicate 更好。查看[`-[NSArray indexesOfObjectsPassingTest:]`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)或编写您自己的类别以添加方便`-select:`或`-filter:`方法（[示例](http://parmanoir.com/8_ways_to_use_Blocks_in_Snow_Leopard)）。

希望其他人编写该类别，对其进行测试等？查看[BlocksKit](http://zwaldowski.github.com/BlocksKit)（[数组文档](http://cocoadocs.org/docsets/BlocksKit/2.2.0/Categories/NSArray+BlocksKit.html)）。还有**更多**的例子可以通过搜索来找到，例如[“nsarray block category select”](http://www.google.com/search?client=safari&rls=en&q=nsarray+block+category+select&ie=UTF-8&oe=UTF-8)。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2008-11-21T07:17:39.610

假设您的对象都是相似的类型，您可以添加一个方法作为其基类的一个类别，该类别调用您用于标准的函数。然后创建一个引用该方法的 NSPredicate 对象。

在某些类别中定义使用您的函数的方法

```
@implementation BaseClass (SomeCategory)
- (BOOL)myMethod {
    return someComparisonFunction(self, whatever);
}
@end 
```

然后无论您要过滤：

```
- (NSArray *)myFilteredObjects {
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"myMethod = TRUE"];
    return [myArray filteredArrayUsingPredicate:pred];
} 
```

当然，如果您的函数仅与类中可访问的属性进行比较，则将函数的条件转换为谓词字符串可能会更容易。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-04T10:51:50.977

`NSPredicate`是 nextstep 构造条件以过滤集合 ( `NSArray`, `NSSet`, `NSDictionary`) 的方式。

例如考虑两个数组`arr`和`filteredarr`：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains[c] %@",@"c"];

filteredarr = [NSMutableArray arrayWithArray:[arr filteredArrayUsingPredicate:predicate]]; 
```

filterdarr 肯定会包含仅包含字符 c 的项目。

方便记住那些很少有sql背景的人

```
*--select * from tbl where column1 like '%a%'--* 
```

**1) 从 tbl 中选择 *** --> 集合

**2)column1 like '%a%'** -->`NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains[c] %@",@"c"];`

**3)select * from tbl where column1 like '%a%'** -->

```
[NSMutableArray arrayWithArray:[arr filteredArrayUsingPredicate:predicate]]; 
```

我希望这有帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-29T17:56:03.703

签出这个库

[https://github.com/BadChoice/Collection](https://github.com/BadChoice/Collection)

它带有许多简单的数组函数，再也不用写循环了

所以你可以这样做：

```
NSArray* youngHeroes = [self.heroes filter:^BOOL(Hero *object) {
    return object.age.intValue < 20;
}]; 
```

或者

```
NSArray* oldHeroes = [self.heroes reject:^BOOL(Hero *object) {
    return object.age.intValue < 20;
}]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-20T01:39:36.210

最好和最简单的方法是创建这个方法并传递数组和值：

```
- (NSArray *) filter:(NSArray *)array where:(NSString *)key is:(id)value{
    NSMutableArray *temArr=[[NSMutableArray alloc] init];
    for(NSDictionary *dic in self)
        if([dic[key] isEqual:value])
            [temArr addObject:dic];
    return temArr;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-18T02:07:49.097

您可以使用的另一种分类方法：

```
- (NSArray *) filteredArrayUsingBlock:(BOOL (^)(id obj))block {
    NSIndexSet *const filteredIndexes = [self indexesOfObjectsPassingTest:^BOOL (id _Nonnull obj, NSUInteger idx, BOOL *_Nonnull stop) {
                                       return block(obj);
                                   }];

    return [self objectsAtIndexes:filteredIndexes];
} 
```

# c# - 从 C# 关闭最小化/图标化进程

> ID：110336
> 
> 赞同：3
> 
> 时间：2008-09-21T05:40:50.463
> 
> 标签：c#, winapi, process, kill

这是我的问题：我需要从 C# 程序关闭一个已经在运行的进程。问题是该进程现在作为一个图标运行（最小化到任务栏），除非用户至少打开一次（这在无人看管的机器上永远不会发生），否则它永远不会有主窗口。

我的另一个要求是**关闭**应用程序而不是**终止**。我需要它把它的内存缓冲区写入磁盘——杀死它会导致数据丢失。

这是我到目前为止所尝试的：

```
 foreach (Process proc in Process.GetProcesses())
        {
            if (proc.ProcessName.ToLower().StartsWith("myapp"))
            {
                if (proc.MainWindowHandle.ToInt32() != 0)
                {
                    proc.CloseMainWindow();
                    proc.Close();
                    //proc.Kill();  <--- not good!
                }
            }
        } 
```

在窗口最小化时发现**MainWindowHandle == 0**后，我添加了**if子句。**删除**if**没有帮助。CloseMainWindow **()**和**Close()**都不起作用。**Kill()**可以，但如上所述 - 这不是我需要的。

 ******任何想法都会被接受，包括使用神秘的 Win32 API 函数 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-21T06:43:46.350

这应该有效：

```
[DllImport("user32.dll", CharSet=CharSet.Auto)]
private static extern IntPtr FindWindow(string className, string windowName);
[DllImport("user32.dll", CharSet=CharSet.Auto)]
private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wParam, IntPtr lParam);

private const int WM_CLOSE = 0x10;
private const int WM_QUIT = 0x12;

public void SearchAndDestroy(string windowName) 
{
    IntPtr hWnd = FindWindow(null, windowName);
    if (hWnd == IntPtr.Zero)
        throw new Exception("Couldn't find window!");
    SendMessage(hWnd, WM_CLOSE, IntPtr.Zero, IntPtr.Zero);
} 
```

由于某些窗口不响应`WM_CLOSE`，`WM_QUIT`可能必须改为发送。这些声明应该适用于 32 位和 64 位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-21T06:33:30.867

如果它在任务栏上，它将有一个窗口。还是您的意思是它位于任务栏通知区域（又名 SysTray）中？在这种情况下，它仍然会有一个窗口。

Win32 应用程序并没有真正的“主窗口”，除非按照惯例（主窗口是调用 PostQuitMessage 以响应 WM_DESTROY，从而导致消息循环退出的窗口）。

在程序运行的情况下，运行 Spy++。要查找进程拥有的所有窗口，您应该从主菜单中选择 Spy -> Processes。这将显示一个进程树。从那里，您可以深入到线程，然后到窗口。这将告诉您该进程具有哪些窗口。记下窗口类和标题。有了这些，您以后可以使用 FindWindow（或 EnumWindows）来查找窗口句柄。

使用窗口句柄，您可以发送 WM_CLOSE 或 WM_SYSCOMMAND/SC_CLOSE（相当于单击窗口标题上的“X”）消息。这应该会导致程序很好地关闭。

请注意，我在这里是从 Win32 的角度讨论的。您可能需要使用 P/Invoke 或其他技巧来使其在 .NET 程序中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-21T15:53:48.913

以下是一些答案和说明：

**rpetrich**：之前尝试过你的方法，问题是，我不知道窗口名称，它因用户而异，因版本而异 - 只是 exe 名称保持不变。我所拥有的只是进程名称。正如您在上面的代码中看到的那样，进程的 MainWindowHandle 为 0。

**Roger**：是的，我的意思是任务栏通知区域——感谢您的澄清。我*需要*打电话给 PostQuitMessage。我只是不知道如何，只给定一个进程，而不是一个窗口。

**克雷格**：我很乐意解释这种情况：应用程序有一个命令行界面，允许您指定参数来指示它将做什么以及将结果保存在哪里。但是一旦它运行，停止它并获得结果的唯一方法是在托盘通知中右键单击它并选择“退出”。

现在我的用户想要编写/批处理应用程序。他们从批处理开始绝对没有问题（只需指定 exe 名称和一堆标志），但随后被一个正在运行的进程卡住了。假设没有人会更改进程以提供 API 以在运行时停止它（它已经很老了），我需要一种人为地关闭它的方法。

同样，在无人看管的计算机上，启动进程的脚本可以由任务调度或操作控制程序启动，但无法关闭进程。

希望能澄清我的情况，再次感谢所有试图提供帮助的人！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-21T14:06:57.297

澄清你为什么要尝试这个的问题：如果进程上唯一的用户界面是系统托盘图标，你为什么要杀死它并让进程继续运行？用户将如何访问该进程？如果机器“无人看管”，为什么要关心托盘图标？

# linux - 与 SOCK_RAW 套接字的 TCP 握手

> ID：110341
> 
> 赞同：20
> 
> 时间：2008-09-21T05:43:07.273
> 
> 标签：linux, network-programming

好的，我意识到这种情况有点不寻常，但我需要仅使用原始套接字（在 C 中，在 linux 中）建立 TCP 连接（3 次握手）——即我需要自己构建 IP 标头和 TCP 标头. 我正在编写一个服务器（所以我必须首先响应传入的 SYN 数据包），无论出于何种原因，我似乎都无法正确处理。是的，我意识到 SOCK_STREAM 会为我处理这个问题，但出于我不想进入的原因，这不是一个选择。

我在网上找到的关于使用原始套接字的教程都描述了如何构建 SYN 泛洪器，但这比实际建立 TCP 连接要容易一些，因为您不必基于原始数据包构建响应。我已经让 SYN 泛洪器示例正常工作，我可以从原始套接字读取传入的 SYN 数据包，但我仍然无法为来自客户端的传入 SYN 创建有效的 SYN/ACK 响应。

那么，有没有人知道一个关于使用原始套接字的好教程，它超越了创建 SYN 泛洪器，或者有没有人有一些可以做到这一点的代码（使用 SOCK_RAW，而不是 SOCK_STREAM）？我会很感激。

* * *

MarkR 是绝对正确的——问题在于内核正在发送重置数据包以响应初始数据包，因为它认为端口已关闭。内核正在击败我的响应并且连接消失了。我已经在使用 tcpdump 来监视连接了——我应该更加细心，并注意到有两个回复，其中一个是搞砸了的重置，以及我的程序创建的响应。哦！

似乎效果最好的解决方案是使用 MarkR 建议的 iptables 规则来阻止出站数据包。但是，按照建议，有一种比使用标记选项更简单的方法。我只是匹配是否设置了重置 TCP 标志。在正常连接过程中，这不太可能需要，如果我阻止来自正在使用的端口的所有出站重置数据包，这对我的应用程序并不重要。这有效地阻止了内核不需要的响应，但不是我自己的数据包。如果我的程序正在侦听的端口是 9999，那么 iptables 规则如下所示：

```
iptables -t filter -I OUTPUT -p tcp --sport 9999 --tcp-flags RST RST -j DROP 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-21T06:57:38.577

您想在用户空间中实现 TCP 堆栈的一部分……这没关系，其他一些应用程序会这样做。

您将遇到的一个问题是内核将对传入的数据包发送（通常是否定的、无用的）回复。这将破坏您尝试发起的任何通信。

避免这种情况的一种方法是使用内核没有自己的 IP 堆栈使用的 IP 地址和接口——这很好，但您需要自己处理链路层的东西（特别是 arp）。这将需要一个低于 IPPROTO_IP、SOCK_RAW 的套接字——你需要一个数据包套接字（我认为）。

也可以使用 iptables 规则来阻止内核的响应——但我怀疑这些规则也会以某种方式应用于你自己的数据包，除非你能设法让它们得到不同的处理（也许应用一个 netfilter“标记”到你自己的数据包？）

阅读手册页

套接字(7) ip(7) 数据包(7)

其中解释了适用于套接字类型的各种选项和 ioctl。

当然，您需要像 Wireshark 这样的工具来检查正在发生的事情。您将需要几台机器来测试它，我建议使用 vmware（或类似的）来减少所需的硬件数量。

对不起，我不能推荐一个具体的教程。

祝你好运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T11:30:25.827

我意识到这是一个旧线程，但这里有一个超出普通 SYN 泛洪器的教程：[http ://www.enderunix.org/docs/en/rawipspoof/](http://www.enderunix.org/docs/en/rawipspoof/)

希望它可能对某人有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T06:44:13.010

我无法在任何教程上为您提供帮助。

但我可以就可以用来协助调试的工具给你一些建议。

首先，正如[bmdhacks](https://stackoverflow.com/users/14032/bmdhacks)所建议的，给自己准备一份[wireshark](http://www.wireshark.org/)（或 tcpdump - 但 wireshark 更容易使用）。捕捉良好的握手。确保保存此内容。

捕获您失败的握手之一。Wireshark 有很好的数据包解析和错误检查，所以如果有一个简单的错误，它可能会告诉你。

接下来，为自己获取一份[tcpreplay](http://tcpreplay.synfin.net/)的副本。这还应该包括一个名为“tcprewrite”的工具。tcprewrite 将允许您将之前保存的捕获文件分成两个 - 握手的每一侧一个。然后，您可以使用 tcpreplay 回放握手的一侧，这样您就可以使用一组一致的数据包。

然后，您（再次）使用 wireshark 来检查您的回复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T05:51:49.500

我没有教程，但我最近使用[Wireshark](http://www.wireshark.org/)来调试我正在做的一些原始套接字编程效果很好。如果您捕获了您发送的数据包，wireshark 会很好地向您显示它们是否格式错误。这对于与普通连接进行比较也很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-21T07:22:20.640

在 netinet/ip.h 和 netinet/tcp.h 中分别声明了 IP 和 TCP 头的结构。您可能想查看此目录中的其他标头以获取可能有用的额外宏和内容。

您发送一个设置了 SYN 标志和一个随机序列号 (x) 的数据包。您应该从另一端收到一个 SYN+ACK。该数据包将具有一个确认号 (y)，它指示另一方期望接收的下一个序列号以及另一个序列号 (z)。您发回具有序列号 x+1 和确认号 z+1 的 ACK 数据包以完成连接。

您还需要确保计算适当的 TCP/IP 校验和并为您发送的数据包填写标头的其余部分。另外，不要忘记主机和网络字节顺序之类的东西。

TCP 在 RFC 793 中定义，可在此处获得：http: [//www.faqs.org/rfcs/rfc793.html](http://www.faqs.org/rfcs/rfc793.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-06T14:53:24.783

根据您尝试执行的操作，让现有软件为您处理 TCP 握手可能会更容易。

一个开源 IP 堆栈是 lwIP ( [http://savannah.nongnu.org/projects/lwip/](http://savannah.nongnu.org/projects/lwip/) )，它提供了一个完整的 tcp/ip 堆栈。很可能使用 SOCK_RAW 或 pcap 使其在用户模式下运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T16:07:51.263

如果您使用的是原始套接字，如果您使用与实际不同的源 mac 地址发送，linux 将忽略响应数据包而不发送 rst。

# performance - 计算给定数的除数的算法

> ID：110344
> 
> 赞同：182
> 
> 时间：2008-09-21T05:44:34.010
> 
> 标签：performance, algorithm, pseudocode

计算给定数字的除数的最佳算法（性能方面）是什么？

如果您可以提供伪代码或某个示例的链接，那就太好了。

编辑：所有的答案都非常有帮助，谢谢。我正在实施阿特金筛，然后我将使用类似于 Jonathan Leffler 指出的东西。Justin Bozonier 发布的链接包含有关我想要的更多信息。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2008-09-21T06:03:34.293

Dmitriy 是对的，您希望阿特金筛子生成主要列表，但我认为这不能解决整个问题。现在您已经有了一个素数列表，您需要查看这些素数中有多少充当除数（以及频率）。

~~[这是算法的一些 python 在](http://mail.python.org/pipermail/python-list/2005-March/315250.html)~~ [这里查看](http://mail.python.org/pipermail/python-list/2005-March.txt)并搜索“主题：数学 - 需要除数算法”。只需计算列表中的项目数，而不是返回它们。

[这是一个数学博士](http://mathforum.org/library/drmath/view/55843.html)，它解释了你需要在数学上做什么。

基本上它归结为如果您的数字`n`是：（
`n = a^x * b^y * c^z`
其中 a、b 和 c 是 n 的主要除数，x、y 和 z 是除数重复的次数），那么所有除数的总数是：
`(x + 1) * (y + 1) * (z + 1)`.

编辑：顺便说一句，如果我理解正确的话，要找到 a、b、c 等，你会想做一个贪婪的算法。从你的最大素数除数开始，然后将它自己相乘，直到进一步的乘法超过数字 n。然后移动到下一个最低因子并乘以前一个素数 ^ 乘以当前素数的次数并继续乘以素数，直到下一个将超过 n... 等等。跟踪您乘以的次数除数在一起并将这些数字应用到上面的公式中。

不是 100% 确定我的算法描述，但如果不是这样，它就是类似的东西。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2008-09-21T08:47:26.643

有**比阿特**金筛法更多的分解技术。例如，假设我们想要分解 5893。那么它的 sqrt 是 76.76... 现在我们将尝试将 5893 写为平方的乘积。那么 (77*77 - 5893) = 36 是 6 的平方，所以 5893 = 77*77 - 6*6 = (77 + 6)(77-6) = 83*71。如果这不起作用，我们会看看 78*78 - 5893 是否是一个完美的正方形。等等。使用这种技术，您可以比测试单个素数更快地测试 n 的平方根附近的因子。如果您将这种排除大素数的技术与筛子结合使用，您将获得比单独使用筛子更好的分解方法。

而这只是已经开发的大量技术中的一种。这是一个相当简单的。你需要很长时间才能学习足够的数论来理解基于椭圆曲线的因式分解技术。（我知道它们存在。我不理解它们。）

因此，除非您正在处理小整数，否则我不会尝试自己解决该问题。相反，我会尝试找到一种方法来使用已经实现了高效解决方案的[PARI库之类的东西。](http://www.cs.sunysb.edu/~algorith/implement/pari/implement.shtml)有了它，我可以在大约 0.05 秒内分解一个随机的 40 位数字，例如 124321342332143213122323434312213424231341。（如果您想知道，它的分解是 29*439*1321*157907*284749*33843676813*4857795469949。我很有信心它没有用阿特金的筛子解决这个问题......）

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2011-03-23T14:32:23.587

@亚斯基

您的除数函数有一个错误，即它对于完美的正方形不能正常工作。

尝试：

```
int divisors(int x) {
    int limit = x;
    int numberOfDivisors = 0;

    if (x == 1) return 1;

    for (int i = 1; i < limit; ++i) {
        if (x % i == 0) {
            limit = x / i;
            if (limit != i) {
                numberOfDivisors++;
            }
            numberOfDivisors++;
        }
    }

    return numberOfDivisors;
} 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2008-09-23T01:53:44.487

我不同意阿特金的筛子是要走的路，因为检查 [1,n] 中的每个数字的素数可能比通过除法减少数字要花费更长的时间。

这里有一些代码，虽然稍微有点hackier，但通常要快得多：

```
import operator
# A slightly efficient superset of primes.
def PrimesPlus():
  yield 2
  yield 3
  i = 5
  while True:
    yield i
    if i % 6 == 1:
      i += 2
    i += 2
# Returns a dict d with n = product p ^ d[p]
def GetPrimeDecomp(n):
  d = {}
  primes = PrimesPlus()
  for p in primes:
    while n % p == 0:
      n /= p
      d[p] = d.setdefault(p, 0) + 1
    if n == 1:
      return d
def NumberOfDivisors(n):
  d = GetPrimeDecomp(n)
  powers_plus = map(lambda x: x+1, d.values())
  return reduce(operator.mul, powers_plus, 1) 
```

**ps**这是解决这个问题的python代码。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-04-05T04:32:40.190

这是一个简单的 O(sqrt(n)) 算法。我用它来解决[项目欧拉](http://projecteuler.net/problem=12)

```
def divisors(n):
    count = 2  # accounts for 'n' and '1'
    i = 2
    while i ** 2 < n:
        if n % i == 0:
            count += 2
        i += 1
    if i ** 2 == n:
        count += 1
    return count 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2008-11-04T02:52:27.333

这个有趣的问题比看起来要难得多，而且还没有答案。这个问题可以分解为两个非常不同的问题。

# 1 给定 N，求 N 的质因数列表 L

# 2 给定L，计算唯一组合的数量

到目前为止，我看到的所有答案都指的是＃1，并且没有提到它对于大量的人来说是不可处理的。对于中等大小的 N，甚至 64 位数字，这很容易；对于巨大的 N，因式分解问题可能需要“永远”。公钥加密取决于此。

问题 #2 需要更多讨论。如果 L 只包含唯一的数字，则使用组合公式从 n 个项目中选择 k 个对象是一个简单的计算。实际上，您需要将应用公式的结果求和，同时将 k 从 1 变为 sizeof(L)。但是，L 通常会包含多次出现的多个素数。例如，L = {2,2,2,3,3,5} 是 N = 360 的因式分解。现在这个问题是相当困难的！

重述#2，给定包含 k 个项目的集合 C，例如项目 a 有 a' 个重复项，项目 b 有 b' 个重复项，等等。有多少个 1 到 k-1 个项目的唯一组合？例如，{2}、{2,2}、{2,2,2}、{2,3}、{2,2,3,3} 在 L = {2,2 时必须分别出现一次且仅出现一次,2,3,3,5}。通过将子集合中的项目相乘，每个这样的唯一子集合都是 N 的唯一除数。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2008-09-21T18:38:04.073

您的问题的答案很大程度上取决于整数的大小。小数的方法，例如小于 100 位，和约 1000 位的数字（例如在密码学中使用的）是完全不同的。

*   一般概述：[http ://en.wikipedia.org/wiki/Divisor_function](http://en.wikipedia.org/wiki/Divisor_function)

*   `n`一些有用的小参考值： [A000005：d(n)（也称为 tau(n) 或 sigma_0(n)），n 的除数。](https://oeis.org/A000005)

*   现实世界的例子：[整数分解](http://yacas.sourceforge.net/Algochapter2.html#c2s3)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2011-11-11T02:59:27.923

**只需要一行**
我对您的问题考虑得非常仔细，并且我尝试编写一段高效且高性能的代码要在屏幕上打印给定数字的所有除数，我们只需要一行代码！（通过 gcc 编译时使用选项 -std=c99）

```
for(int i=1,n=9;((!(n%i)) && printf("%d is a divisor of %d\n",i,n)) || i<=(n/2);i++);//n is your number 
```

要查找除数的数量，您可以使用以下非常非常快速的函数（对于除 1 和 2 之外的所有整数都可以正常工作）

```
int number_of_divisors(int n)
{
    int counter,i;
    for(counter=0,i=1;(!(n%i) && (counter++)) || i<=(n/2);i++);
    return counter;
} 
```

或者如果您将给定数字视为除数（对于除 1 和 2 之外的所有整数都可以正常工作）

```
int number_of_divisors(int n)
{
    int counter,i;
    for(counter=0,i=1;(!(n%i) && (counter++)) || i<=(n/2);i++);
    return ++counter;
} 
```

注意：以上两个函数对除数字 1 和 2 以外的所有正整数都有效，因此它对所有大于 2 的数字都有效，但如果您需要涵盖 1 和 2 ，您可以使用以下函数之一（一点慢点）

```
int number_of_divisors(int n)
{
    int counter,i;
    for(counter=0,i=1;(!(n%i) && (counter++)) || i<=(n/2);i++);
    if (n==2 || n==1)
    {
    return counter;
    }
    return ++counter;
} 
```

或者

```
int number_of_divisors(int n)
{
    int counter,i;
for(counter=0,i=1;(!(i==n) && !(n%i) && (counter++)) || i<=(n/2);i++);
    return ++counter;
} 
```

小就是美：）

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-09-21T06:36:17.910

Atkin 筛法是 Eratosthenes 筛法的优化版本，它给出了一个给定整数以内的所有素数。你应该能够谷歌这个以获得更多细节。

一旦你有了那个列表，你就可以将你的数字除以每个素数，看看它是否是一个精确的除数（即余数为零）。

计算数字 (n) 的除数的基本步骤是[这是从真实代码转换而来的伪代码，所以我希望我没有引入错误]：

```
for z in 1..n:
    prime[z] = false
prime[2] = true;
prime[3] = true;

for x in 1..sqrt(n):
    xx = x * x

    for y in 1..sqrt(n):
        yy = y * y

        z = 4*xx+yy
        if (z <= n) and ((z mod 12 == 1) or (z mod 12 == 5)):
            prime[z] = not prime[z]

        z = z-xx
        if (z <= n) and (z mod 12 == 7):
            prime[z] = not prime[z]

        z = z-yy-yy
        if (z <= n) and (x > y) and (z mod 12 == 11):
            prime[z] = not prime[z]

for z in 5..sqrt(n):
    if prime[z]:
        zz = z*z
        x = zz
        while x <= limit:
            prime[x] = false
            x = x + zz

for z in 2,3,5..n:
    if prime[z]:
        if n modulo z == 0 then print z 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2009-07-18T03:31:27.657

你可以试试这个。这有点骇人听闻，但速度相当快。

```
def factors(n):
    for x in xrange(2,n):
        if n%x == 0:
            return (x,) + factors(n/x)
    return (n,1) 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2010-02-02T00:28:59.780

一旦你有了素数分解，就有一种方法可以找到除数的数量。将每个单独因子的每个指数加一，然后将指数相乘。

例如：36 素因式分解：2^2*3^2 除数：1、2、3、4、6、9、12、18、36 除数数：9

每个指数加一 2^3*3^3 指数乘：3*3 = 9

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2009-07-18T04:11:54.253

在您提交解决方案之前，请考虑 Sieve 方法在典型情况下可能不是一个好的答案。

不久前有一个素数问题，我做了一个时间测试——对于 32 位整数，至少确定它是否是素数比蛮力慢。有两个因素在发生：

1）虽然人类需要一段时间才能进行除法，但他们在计算机上的速度非常快——类似于查找答案的成本。

2) 如果您没有素数表，您可以创建一个完全在 L1 缓存中运行的循环。这使它更快。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2014-12-01T14:01:19.630

这是一个有效的解决方案：

```
#include <iostream>
int main() {
  int num = 20; 
  int numberOfDivisors = 1;

  for (int i = 2; i <= num; i++)
  {
    int exponent = 0;
    while (num % i == 0) {
        exponent++; 
        num /= i;
    }   
    numberOfDivisors *= (exponent+1);
  }

  std::cout << numberOfDivisors << std::endl;
  return 0;
} 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2010-12-30T21:19:34.097

除数做了一些惊人的事情：他们完全分开。如果您想检查一个数字 的除数个数，`n`跨越整个频谱 显然是多余的`1...n`。我没有对此进行任何深入的研究，但我解决了[Project Euler 的关于 Triangular Numbers 的问题 12](http://projecteuler.net/index.php?section=problems&id=12)。我对*大于 500 个除数*测试的解决方案运行了 309504 微秒（~0.3 秒）。我为解决方案编写了这个除数函数。

```
int divisors (int x) {
    int limit = x;
    int numberOfDivisors = 1;

    for (int i(0); i < limit; ++i) {
        if (x % i == 0) {
            limit = x / i;
            numberOfDivisors++;
        }
    }

    return numberOfDivisors * 2;
} 
```

每个算法都有一个弱点。我认为这对素数来说很弱。但由于三角数没有打印出来，它完美地发挥了它的作用。从我的分析来看，我认为它做得很好。

节日快乐。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-09-21T05:53:17.577

你想要阿特金的筛子，在这里描述：[http ://en.wikipedia.org/wiki/Sieve_of_Atkin](http://en.wikipedia.org/wiki/Sieve_of_Atkin)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-07-14T12:15:33.400

数论教科书将除数计数函数称为 tau。第一个有趣的事实是它是乘法的，即。τ(ab) = τ(a)τ(b) ，当 a 和 b 没有公因数时。（证明：a 和 b 的每一对除数给出 ab 的一个不同除数）。

现在请注意，对于 pa 素数，τ(p**k) = k+1（p 的幂）。因此，您可以通过分解轻松计算 τ(n)。

然而，分解大数可能会很慢（RSA 加密的安全性取决于两个大素数的乘积很难分解）。这表明这种优化的算法

1.  [测试数字是否为素数（快速）](https://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test)
2.  如果是，则返回 2
3.  否则，[对数字进行因式分解](https://en.wikipedia.org/wiki/Integer_factorization#Factoring_algorithms)（如果有多个大素因数，则速度较慢）
4.  从因式分解计算 τ(n)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-12-02T03:25:27.310

这是计算除数的最基本方法：

```
class PrintDivisors
{
    public static void main(String args[])
    {

    System.out.println("Enter the number");

    // Create Scanner object for taking input
    Scanner s=new Scanner(System.in);

    // Read an int
    int n=s.nextInt();

        // Loop from 1 to 'n'
        for(int i=1;i<=n;i++)
        {

            // If remainder is 0 when 'n' is divided by 'i',
            if(n%i==0)
            {
            System.out.print(i+", ");
            }
        }

    // Print [not necessary]    
    System.out.print("are divisors of "+n);

    }
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2013-01-09T23:12:36.013

素数法在这里很清楚。P[] 是一个小于或等于 sq = sqrt(n) 的素数列表；

```
for (int i = 0 ; i < size && P[i]<=sq ; i++){
          nd = 1;
          while(n%P[i]==0){
               n/=P[i];
               nd++;
               }
          count*=nd;
          if (n==1)break;
          }
      if (n!=1)count*=2;//the confusing line :D :P .

     i will lift the understanding for the reader  .
     i now look forward to a method more optimized  . 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-08-19T13:35:05.060

以下是一个 C 程序，用于查找给定数的除数。

上述算法的复杂度为 O(sqrt(n))。

该算法适用于完美平方数和非完美平方数。

请注意，循环的上限设置为 number 的平方根，以使算法最有效。

请注意，将上限存储在单独的变量中也可以节省时间，您不应该在 for 循环的条件部分调用 sqrt 函数，这也可以节省您的计算时间。

```
#include<stdio.h>
#include<math.h>
int main()
{
    int i,n,limit,numberOfDivisors=1;
    printf("Enter the number : ");
    scanf("%d",&n);
    limit=(int)sqrt((double)n);
    for(i=2;i<=limit;i++)
        if(n%i==0)
        {
            if(i!=n/i)
                numberOfDivisors+=2;
            else
                numberOfDivisors++;
        }
    printf("%d\n",numberOfDivisors);
    return 0;
} 
```

除了上面的 for 循环，您还可以使用以下更有效的循环，因为这消除了查找数字平方根的需要。

```
for(i=2;i*i<=n;i++)
{
    ...
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-12-01T13:02:47.297

这是我写的一个函数。最差的时间复杂度是 O(sqrt(n))，而最好的时间复杂度是 O(log(n))。它为您提供所有主要除数及其出现次数。

```
public static List<Integer> divisors(n) {   
    ArrayList<Integer> aList = new ArrayList();
    int top_count = (int) Math.round(Math.sqrt(n));
    int new_n = n;

    for (int i = 2; i <= top_count; i++) {
        if (new_n == (new_n / i) * i) {
            aList.add(i);
            new_n = new_n / i;
            top_count = (int) Math.round(Math.sqrt(new_n));
            i = 1;
        }
    }
    aList.add(new_n);
    return aList;
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-11-11T15:32:34.793

@肯德尔

我测试了你的代码并做了一些改进，现在它更快了。我还用@هومن جاویدپور 代码进行了测试，这也比他的代码快。

```
long long int FindDivisors(long long int n) {
  long long int count = 0;
  long long int i, m = (long long int)sqrt(n);
  for(i = 1;i <= m;i++) {
    if(n % i == 0)
      count += 2;
  }
  if(n / m == m && n % m == 0)
    count--;
  return count;
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-21T05:59:48.093

这不只是一个因数分解的问题——确定数字的所有因数吗？然后，您可以决定是否需要一个或多个因素的所有组合。

因此，一种可能的算法是：

```
factor(N)
    divisor = first_prime
    list_of_factors = { 1 }
    while (N > 1)
        while (N % divisor == 0)
            add divisor to list_of_factors
            N /= divisor
        divisor = next_prime
    return list_of_factors 
```

然后由您来结合这些因素来确定其余的答案。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-02-07T21:24:50.720

我想这就是你要找的。我完全按照你的要求做。将其复制并粘贴到记事本中。另存为 *.bat.Run.Enter Number。将过程乘以 2，这就是除数的数量。我是故意这样做的，这样它可以更快地确定除数：

请注意，CMD 变量不能支持超过 999999999 的值

```
@echo off

modecon:cols=100 lines=100

:start
title Enter the Number to Determine 
cls
echo Determine a number as a product of 2 numbers
echo.
echo Ex1 : C = A * B
echo Ex2 : 8 = 4 * 2
echo.
echo Max Number length is 9
echo.
echo If there is only 1 proces done  it
echo means the number is a prime number
echo.
echo Prime numbers take time to determine
echo Number not prime are determined fast
echo.

set /p number=Enter Number : 
if %number% GTR 999999999 goto start

echo.
set proces=0
set mindet=0
set procent=0
set B=%Number%

:Determining

set /a mindet=%mindet%+1

if %mindet% GTR %B% goto Results

set /a solution=%number% %%% %mindet%

if %solution% NEQ 0 goto Determining
if %solution% EQU 0 set /a proces=%proces%+1

set /a B=%number% / %mindet%

set /a procent=%mindet%*100/%B%

if %procent% EQU 100 set procent=%procent:~0,3%
if %procent% LSS 100 set procent=%procent:~0,2%
if %procent% LSS 10 set procent=%procent:~0,1%

title Progress : %procent% %%%

if %solution% EQU 0 echo %proces%. %mindet% * %B% = %number%
goto Determining

:Results

title %proces% Results Found
echo.
@pause
goto start 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-01-23T15:57:52.633

我想这个既方便又精确

# 脚本.pyton

`>>>factors=[ x for x in range (1,n+1) if n%x==0] print len(factors)`

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-01-23T16:01:49.877

尝试以下方式：

```
int divisors(int myNum) {
    int limit = myNum;
    int divisorCount = 0;
    if (x == 1) 
        return 1;
    for (int i = 1; i < limit; ++i) {
        if (myNum % i == 0) {
            limit = myNum / i;
            if (limit != i)
                divisorCount++;
            divisorCount++;
        }
    }
    return divisorCount;
} 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2008-09-21T06:16:10.627

我不知道最有效的方法，但我会做以下事情：

*   创建一个素数表以查找小于或等于数字平方根的所有素数（就我个人而言，我会使用阿特金筛法）
*   计算所有小于或等于该数平方根的素数并将其乘以 2。如果数字的平方根是整数，则从 count 变量中减去 1。

应该工作\o/

如果你需要，我明天可以用 C 编写一些代码来演示。

# javascript - 可以通过 JavaScript 设置元素的 CSS 类吗？

> ID：110354
> 
> 赞同：3
> 
> 时间：2008-09-21T05:54:09.323
> 
> 标签：javascript, css

我想做这个：

```
e.className = t; 
```

其中 t 是我在样式表中定义的样式的名称。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-21T06:00:57.373

如果`e`是对 DOM 元素的引用，并且您有这样的类：`.t {color:green;}`那么您希望将类名作为字符串引用：

```
e.className = 't'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T05:58:57.033

是的，这有效（正如乔纳所说，类名作为字符串）。此外，您可以使用[DOM Level 2 Style](http://www.w3.org/TR/DOM-Level-2-Style/)接口直接在对象上设置样式属性。例如，

```
button.style.fontFamily = "Verdana, Arial, sans-serif"; 
```

哪里`button`是（大概）一个按钮对象。:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T09:12:37.370

这不仅有效，而且甚至是最佳实践。

您肯定希望将数据格式 (xHTML) 从设计 (CSS) 和行为 (javascript) 中分离出来。

因此，最好根据事件在 JS 中添加和删除类，而将美学问题委托给 css 样式。

EG：将错误消息涂成红色。

CSS

```
.error
{
    color: red;
} 
```

JS

```
var error=document.getElementById('error');
error.className='error'; 
```

注意：

*   这个片段只是一个例子。在现实生活中，您会为此使用 js。
*   document.getElementById 并不总是可互操作的。最好使用 JS 框架来处理。我个人使用 JQuery。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-25T14:36:07.343

这是使用 jQuery 添加和删除类的示例。

```
// js
  $("p:first").addClass("t");
  $("p:first").removeClass("t");

// css
  .t {
    backgound: red
  } 
```

# python - 如何在 Python 中找到当前的操作系统？

> ID：110362
> 
> 赞同：311
> 
> 时间：2008-09-21T06:01:06.153
> 
> 标签：python, cross-platform, platform-specific

> **可能重复：**
> [Python：我在什么操作系统上运行？](https://stackoverflow.com/questions/1854/python-what-os-am-i-running-on)

正如标题所说，如何在 python 中找到当前的操作系统？

* * *

## 回答 #1

> 赞同：363
> 
> 时间：2012-04-10T15:15:48.457

如果你想要用户可读的数据但仍然很详细，你可以使用[platform.platform()](http://docs.python.org/library/platform.html#platform.platform)

```
>>> import platform
>>> platform.platform()
'Linux-3.3.0-8.fc16.x86_64-x86_64-with-fedora-16-Verne' 
```

`platform`还有一些其他有用的方法：

```
>>> platform.system()
'Windows'
>>> platform.release()
'XP'
>>> platform.version()
'5.1.2600' 
```

您可以拨打以下几种不同的电话来确定您的位置

```
import platform
import sys

def linux_distribution():
  try:
    return platform.linux_distribution()
  except:
    return "N/A"

print("""Python version: %s
dist: %s
linux_distribution: %s
system: %s
machine: %s
platform: %s
uname: %s
version: %s
mac_ver: %s
""" % (
sys.version.split('\n'),
str(platform.dist()),
linux_distribution(),
platform.system(),
platform.machine(),
platform.platform(),
platform.uname(),
platform.version(),
platform.mac_ver(),
)) 
```

该脚本的输出在几个不同的系统（Linux、Windows、Solaris、MacOS）和架构（x86、x64、Itanium、power pc、sparc）上运行：[https ://github.com/hpcugent/easybuild/ wiki/OS_flavor_name_version](https://github.com/hpcugent/easybuild/wiki/OS_flavor_name_version)

例如，sparc 上的 Solaris 给出：

```
Python version: ['2.6.4 (r264:75706, Aug  4 2010, 16:53:32) [C]']
dist: ('', '', '')
linux_distribution: ('', '', '')
system: SunOS
machine: sun4u
platform: SunOS-5.9-sun4u-sparc-32bit-ELF
uname: ('SunOS', 'xxx', '5.9', 'Generic_122300-60', 'sun4u', 'sparc')
version: Generic_122300-60
mac_ver: ('', ('', '', ''), '') 
```

或 M1 上的 MacOS

```
Python version: ['2.7.16 (default, Dec 21 2020, 23:00:36) ', '[GCC Apple LLVM 12.0.0 (clang-1200.0.30.4) [+internal-os, ptrauth-isa=sign+stri'] 
dist: ('', '', '') 
linux_distribution: ('', '', '') 
system: Darwin 
machine: arm64 
platform: Darwin-20.3.0-arm64-arm-64bit 
uname: ('Darwin', 'Nautilus.local', '20.3.0', 'Darwin Kernel Version 20.3.0: Thu Jan 21 00:06:51 PST 2021; root:xnu-7195.81.3~1/RELEASE_ARM64_T8101', 'arm64', 'arm') 
version: Darwin Kernel Version 20.3.0: Thu Jan 21 00:06:51 PST 2021; root:xnu-7195.81.3~1/RELEASE_ARM64_T8101 
mac_ver: ('10.16', ('', '', ''), 'arm64') 
```

* * *

## 回答 #2

> 赞同：329
> 
> 时间：2008-09-21T11:49:19.687

我通常[`sys.platform`](https://docs.python.org/3/library/sys.html#sys.platform)用来获取平台。`sys.platform`将区分 linux、其他 unix 和 OS X，而所有这些`os.name`都是“ `posix`”。

有关更多详细信息，请使用[平台模块](https://docs.python.org/3/library/platform.html#module-platform)。它具有跨平台功能，可为您提供有关机器架构、操作系统和操作系统版本、Python 版本等的信息。此外，它还具有特定于操作系统的功能，可以获取特定的 linux 发行版等信息。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2008-09-21T06:04:34.820

```
import os
print os.name 
```

这为您提供了您通常需要的基本信息。例如，要区分不同版本的 Windows，您必须使用特定于平台的方法。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2008-09-21T06:04:07.363

[https://docs.python.org/library/os.html](https://docs.python.org/library/os.html)

为了补充 Greg 的帖子，如果您使用的是 posix 系统，包括 MacOS、Linux、Unix 等，您可以使用 os.uname() 来更好地了解它是什么类型的系统。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2011-08-24T11:31:20.727

类似的东西：

```
import os
if os.name == "posix":
    print(os.system("uname -a"))
# insert other possible OSes here
# ...
else:
    print("unknown OS") 
```

# python - 在 Django 中更改使用 ModelForm 创建的表单元素的宽度

> ID：110378
> 
> 赞同：57
> 
> 时间：2008-09-21T06:15:13.517
> 
> 标签：python, html, django, django-forms, django-templates

如果我使用 ModelForm 创建 textarea 表单元素，如何更改它的宽度？

这是我的产品类别：

```
class ProductForm(ModelForm):
    long_desc = forms.CharField(widget=forms.Textarea)
    short_desc = forms.CharField(widget=forms.Textarea)
    class Meta:
        model = Product 
```

和模板代码...

```
{% for f in form %}
    {{ f.name }}:{{ f }}
{% endfor %} 
```

`f`是实际的表单元素...

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2008-09-21T06:44:02.057

**您的用例最简单的方法是使用 CSS**。它是一种用于定义演示的语言。查看表单生成的代码，记下您感兴趣的字段的 id，并通过 CSS 更改这些字段的外观。

ProductForm中的字段示例`long_desc`（当您的表单没有自定义前缀时）：

```
#id_long_desc {
    width: 300px;
    height: 200px;
} 
```

**第二种方法**是将`attrs`关键字传递给您的小部件构造函数。

```
class ProductForm(ModelForm):
    long_desc = forms.CharField(widget=forms.Textarea(attrs={'cols': 10, 'rows': 20}))
    short_desc = forms.CharField(widget=forms.Textarea)
    class Meta:
        model = Product 
```

它[在 Django 文档中有所描述](http://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.Widget.attrs)。

**第三种方法**是暂时保留新表单的良好声明性界面，并在自定义构造函数中设置小部件属性。

```
class ProductForm(ModelForm):
    long_desc = forms.CharField(widget=forms.Textarea)
    short_desc = forms.CharField(widget=forms.Textarea)
    class Meta:
        model = Product

    # Edit by bryan
    def __init__(self, *args, **kwargs):
        super(ProductForm, self).__init__(*args, **kwargs) # Call to ModelForm constructor
        self.fields['long_desc'].widget.attrs['cols'] = 10
        self.fields['long_desc'].widget.attrs['rows'] = 20 
```

这种方法具有以下优点：

*   您可以为从模型自动生成的字段定义小部件属性，而无需重新定义整个字段。
*   它不依赖于表单的前缀。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-03-12T22:02:52.053

zuber 的出色回答，但我相信第三种方法的示例代码中存在错误。构造函数应该是：

```
def __init__(self, *args, **kwargs):
    super(ProductForm, self).__init__(*args, **kwargs) # Call to ModelForm constructor
    self.fields['long_desc'].widget.attrs['cols'] = 10
    self.fields['long_desc'].widget.attrs['cols'] = 20 
```

Field 对象没有“attrs”属性，但它们的小​​部件有。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-08-07T21:08:12.890

如果您使用像 Grappelli 这样大量使用样式的插件，您可能会发现任何被覆盖的 row 和 col 属性都会因为 CSS 选择器作用于您的小部件而被忽略。当使用上述 zuber 出色的第二种或第三种方法时，可能会发生这种情况。

在这种情况下，只需通过设置“样式”属性而不是“行”和“列”属性，将第一种方法与第二种或第三种方法混合使用。

这是在上面的第三种方法中修改**init**的示例：

```
def __init__(self, *args, **kwargs):
    super(ProductForm, self).__init__(*args, **kwargs) # Call to ModelForm constructor
    self.fields['short_desc'].widget.attrs['style'] = 'width:400px; height:40px;'
    self.fields['long_desc'].widget.attrs['style']  = 'width:800px; height:80px;' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-02T08:36:44.200

在管理模型视图中设置行和 css 类：

```
'explicacion': AutosizedTextarea(attrs={'rows': 5, 'class': 'input-xxlarge', 'style': 'width: 99% !important; resize: vertical !important;'}), 
```

# asp.net-mvc - IAuthorizationFilter 的设置结果

> ID：110384
> 
> 赞同：2
> 
> 时间：2008-09-21T06:20:03.643
> 
> 标签：asp.net-mvc

我正在寻找从失败的 IAuthorizationFilter 设置结果操作。但是我不确定如何从过滤器内部创​​建一个 ActionResult。控制器似乎无法从过滤器内部访问，因此我通常的 View("SomeView") 无法正常工作。有没有办法让控制器或另一种创建动作结果的方法，因为它似乎不是可实例化的？

不起作用：

```
 [AttributeUsage(AttributeTargets.Method)]
    public sealed class RequiresAuthenticationAttribute : ActionFilterAttribute, IAuthorizationFilter
    {
    public void OnAuthorization(AuthorizationContext context)
    {
        if (!context.HttpContext.User.Identity.IsAuthenticated)
        {
            context.Result = View("User/Login");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-21T17:44:11.800

您应该查看 MVC 框架 AuthorizeAttribute 附带的 IAuthorizationFilter 的实现。如果您使用表单身份验证，则无需将结果设置为用户/登录。您可以提出 401 HTTP 状态响应，ASP.NET 会为您重定向到登录页面。

将结果设置为 user/login 的一个问题是用户的地址栏未更新，因此他们将在登录页面上，但 URL 不匹配。对于某些人来说，这不是问题。但是有些人希望他们网站的 URL 与用户在浏览器中看到的内容相对应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-21T09:32:02.870

您可以直接实例化适当的 ActionResult，然后在上下文中设置它。例如：

```
public void OnAuthorization(AuthorizationContext context)
{
    if (!context.HttpContext.User.Identity.IsAuthenticated)
    {
        context.Result = new ViewResult { ViewName = "Whatever" };
    }
} 
```

# .net - 将一组复选框限制为一定数量的检查

> ID：110385
> 
> 赞同：0
> 
> 时间：2008-09-21T06:20:04.143
> 
> 标签：.net, winforms, user-interface

我有一组复选框，我只想允许在任何时候检查设定的数量。如果新选中的复选框使计数超过限制，我希望自动取消选中最旧的复选框。复选框组都使用如下所示的相同事件处理程序。

我已经通过队列实现了该功能，但是当我必须从队列中间删除一个项目时它非常混乱，我认为有一种更优雅的方式。我特别不喜欢将队列转换为列表只是为了在将列表转换回队列之前调用一种方法。

*   有一个更好的方法吗？
*   像我一样重新挂钩事件处理程序是一个好主意。

这是代码。

```
private Queue<CheckBox> favAttributesLimiter - new Queue<CheckBox>();
private const int MaxFavoredAttributes = 5;

private void favoredAttributes_CheckedChanged(object sender, EventArgs e)
{
    CheckBox cb = (CheckBox)sender;

    if (cb.Checked)
    {
        if (favAttributesLimiter.Count == MaxFavoredAttributes)
        {
            CheckBox oldest = favAttributesLimiter.Dequeue();                  

            oldest.CheckedChanged -= favoredAttributes_CheckedChanged;
            oldest.Checked = false;
            oldest.CheckedChanged += new EventHandler(favoredAttributes_CheckedChanged);
        }

        favAttributesLimiter.Enqueue(cb);

    }
    else // cb.Checked == false
    {                
        if (favAttributesLimiter.Contains(cb))
        {
            var list = favAttributesLimiter.ToList();
            list.Remove(cb);
            favAttributesLimiter=new Queue<CheckBox>(list);
        }
    }
} 
```

编辑：
[Chakrit](https://stackoverflow.com/questions/110385/limiting-a-group-of-checkboxes-to-a-certain-amount-of-checks#110398)用更好的 Queue(Of T) 替代品回答了我的实际问题。然而，关于我取消选中复选框的想法实际上是一个坏主意的论点非常有说服力。我将 Chakrit 的答案保留为已接受，但我对其他答案投了赞成票，因为它们在用户眼中提供了更加一致和可用的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-21T06:38:21.680

以防万一你没有这样想。

从可用性的角度来看，大概您有一些文字说“单击不超过 4 个复选框”之类的内容。

在这种情况下，为什么不简单地计算复选框的数量，并防止对第 5 个框进行任何更改（当然，直到只有 3 个复选框）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-21T07:54:28.363

要问自己的一件事是：你真的想用复选框来实现这种类型的行为吗？从用户的角度来看，复选框已经有一个很好理解的行为，当一个新的复选框被选中时，一个看似随机的复选框会变为未选中状态，这对普通用户来说可能会非常混乱甚至令人沮丧。

也许考虑类似带有添加/删除按钮的列表框，其中列表的设计为用户提供了一个视觉提示，即最多（例如）四个项目。作为参考，我正在考虑类似于[IE 中工具栏自定义对话框的](http://www.iescreenshot.com/images/faq_inst_12.gif)内容。

也许不是您正在寻找的答案，而是需要考虑的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T06:29:02.360

我认为您正在寻找[LinkedList](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)。

使用`AddLast`代替`Enqueue`and`RemoveFirst`代替`Dequeue`and 来删除中间的东西，只需使用普通的`Remove`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T08:14:27.083

我之前所做的是有一个这样的多列选择菜单：

           <---->

选择：选择的选择-1-空框-选择-2-空框-选择-3-空框-选择-4-空框-                  

然后人们可以突出显示“choice-1”并点击右键。突然，第二列将被第一列中的项目填充。然后你可以在添加了3个选项后禁用箭头，并弹出一条消息，“你只能选择三个选项”。与其他选项相比，这更有意义。这对用户来说会容易得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T07:39:02.323

> 像我一样重新挂钩事件处理程序是一个好主意。

那要看。

是 Windows 窗体吗？Windows 窗体运行在 WinAPI 之上，这意味着事件处理程序实际上只是一个由主线程中的消息调度循环调用的函数。因此，这些功能不需要重入并且是“安全的”。

但是，您必须进行错误处理并*在*事件处理程序中捕获任何异常，例如分配失败，否则您的应用程序将终止。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T07:28:51.020

如果您要求用户从选项列表中进行选择并限制选择的数量，那么第一选择可能就是主要选择。

例如选择两个，你将永远不会有任何你不选择的东西：

*   钱
*   力量
*   性别
*   激动
*   小工具
*   程序员大军。

你的第一选择是你的首选吗？

如果要使用复选框，只需在选中第二个复选框时禁用所有未选中的复选框。

# c++ - TinyXML：将文档保存为 char * 或字符串

> ID：110393
> 
> 赞同：14
> 
> 时间：2008-09-21T06:27:11.910
> 
> 标签：c++, tinyxml

我正在尝试使用 TinyXML 从内存中读取和保存，而不仅仅是读取文件并将其保存到磁盘。

似乎文档的 parse 函数可以加载一个 char *. 但是，当我完成它时，我需要将文档保存到 char * 中。有人知道吗？

~~编辑：打印和流媒体功能不是我想要的。它们以可查看的格式输出，我需要实际的 xml 内容。~~

编辑：打印很酷。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-12T15:49:14.177

这是我正在使用的一些示例代码，改编自[TiXMLPrinter](http://www.grinninglizard.com/tinyxmldocs/classTiXmlPrinter.html)文档：

```
TiXmlDocument doc;
// populate document here ...

TiXmlPrinter printer;
printer.SetIndent( "    " );

doc.Accept( &printer );
std::string xmltext = printer.CStr(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-12-27T21:37:48.230

**TinyXml 中一个简单而优雅的解决方案，用于将 TiXmlDocument 打印到 std::string。**

我做了这个小例子

```
// Create a TiXmlDocument    
TiXmlDocument *pDoc =new TiXmlDocument("my_doc_name");

// Add some content to the document, you might fill in something else ;-)    
TiXmlComment*   comment = new TiXmlComment("hello world" );    
pDoc->LinkEndChild( comment );

// Declare a printer    
TiXmlPrinter printer;

// attach it to the document you want to convert in to a std::string 
pDoc->Accept(&printer);

// Create a std::string and copy your document data in to the string    
std::string str = printer.CStr(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-09-21T06:56:25.913

我不熟悉 TinyXML，但从文档看来，通过将 operator << 用于 C++ 流（因此您可以使用[C++ 字符串流](http://www.cppreference.com/wiki/io/sstream/start)）或[TiXMLPrinter 类](http://www.grinninglizard.com/tinyxmldocs/classTiXmlPrinter.html)，您可以在不使用文件的情况下获取 STL 字符串。请参阅[TinyXML 文档](http://www.grinninglizard.com/tinyxmldocs/index.html)（查找“打印”部分）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-21T06:43:39.127

不太明白你在说什么；你的问题不清楚。我猜您想将文件加载到内存中，以便您可以将其传递给文档解析函数。在这种情况下，以下代码应该可以工作。

```
#include <stdio.h> 
```

以下代码将文件读入内存并将其存储在缓冲区中

```
FILE* fd = fopen("filename.xml", "rb"); // Read-only mode
int fsize = fseek(fd, 0, SEEK_END); // Get file size
rewind(fd);
char* buffer = (char*)calloc(fsize + 1, sizeof(char));
fread(buffer, fsize, 1, fd);
fclose(fd); 
```

该文件现在位于变量“缓冲区”中，并且可以传递给任何需要您向其提供文件的 char* 缓冲区的函数。

# .net - 如何在 Windows Server 2003 上从 IIS 6 提供文件？

> ID：110426
> 
> 赞同：2
> 
> 时间：2008-09-21T06:56:44.820
> 
> 标签：.net, windows, iis, iis-6

我有扩展名为 ".dae" 、 ".gtc" 等的文件。当我尝试通过 http 访问这些文件时，服务器返回 404，但它们在目录中。但是，我可以提供众所周知的文件扩展名；如果我只是将它们重命名为 xml，它们是可访问的。

关于问题可能是什么的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-21T09:05:31.203

如果您在 IIS 6.0 Web 服务器上请求扩展名**不是已定义 MIME 类型**的文件，您会收到“ *HTTP 错误 404 - 找不到文件或目录*”错误消息。

要**为特定扩展名** （在您的情况下为 .dae）定义 MIME 类型，请执行以下步骤：

*   打开 IIS Microsoft 管理控制台 (MMC)，**右键单击本地计算机名称**，然后单击**属性**。
*   单击**MIME 类型**。
*   单击**新建**。
*   在“扩展名”框中，键入所需的**文件扩展名**（在您的情况下为**.dae**）。
*   在**MIME 类型框中**，键入*application/octet-stream*。
*   **应用**新设置。

注意：**您必须重新启动万维网发布服务**或等待工作进程回收才能使更改生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-21T07:14:28.320

您需要在 IIS 6 上为您提到的扩展定义其他 MIME 类型。

这是关于如何向 IIS6 添加其他 MIME 类型的 MS 文章：

[http://support.microsoft.com/kb/326965](http://support.microsoft.com/kb/326965)

# unit-testing - 每个函数/方法我应该编写多少个单元测试？

> ID：110430
> 
> 赞同：28
> 
> 时间：2008-09-21T06:58:48.467
> 
> 标签：unit-testing

您是为每个函数/方法编写一个测试，在测试中进行多项检查，还是为每个检查编写一个测试？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-09-21T07:16:07.520

每个检查一个测试和超级描述性名称，每个实例：

```
@Test
public void userCannotVoteDownWhenScoreIsLessThanOneHundred() {
 ...
} 
```

当测试失败时，只有一个断言和使用好名字都会给我一个更好的报告。他们对我尖叫：“你违反了这条规则！”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-21T07:05:40.757

我对该功能提供的每个**功能**进行了测试。然而，每个测试可能有几个断言。测试用例的名称表示正在测试的能力。

一般来说，对于一个功能，我有几个“晴天”测试和一个或几个“雨天”场景，具体取决于它的复杂性。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-21T07:03:25.957

BDD（行为驱动开发）

虽然我还在学习，但它基本上是 TDD 组织/专注于您的软件将如何实际使用......而不是它将如何开发/构建。

[维基百科](http://en.wikipedia.org/wiki/Behavior_Driven_Development) [一般信息](http://behaviour-driven.org/)

顺便说一句，至于是否对每种测试方法进行多个断言，我建议两种方式都尝试。有时您会看到一种策略在哪里让您陷入困境，并且会开始理解为什么您*通常*只对每个方法使用一个断言。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-21T09:21:07.250

我认为单一断言的规则有点太严格了。在我的单元测试中，我尝试遵循**单组断言**的规则——你可以在一个测试方法中使用多个断言，只要你一个接一个地进行检查（你不改变测试的状态断言之间的类）。

所以，在 Python 中，我相信这样的测试是**正确**的：

```
def testGetCountReturnsCountAndEnd(self):
    count, endReached = self.handler.getCount()
    self.assertEqual(count, 0)
    self.assertTrue(endReached) 
```

但是这个应该**分成**两种测试方法：

```
def testGetCountReturnsOneAfterPut(self):
    self.assertEqual(self.handler.getCount(), 0)
    self.handler.put('foo')
    self.assertEqual(self.handler.getCount(), 1) 
```

当然，在较长且经常使用的断言组的情况下，我喜欢创建自定义断言方法——这些对于比较复杂对象特别有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-21T07:01:46.320

每次检查都有一个测试用例。它更细化。它可以更容易地查看哪些特定的测试用例失败了。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-21T07:05:44.767

我为每个方法编写至少一个测试，如果该方法需要一些不同的 setUp 来测试好用例和坏用例，我会编写更多测试。

但是你**永远不**应该在一个单元测试中测试一种以上的方法。如果您的 API 发生变化，它可以减少*修复*测试的工作量和错误。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-21T07:04:32.023

我会为每次检查建议一个测试用例。你保持原子的越多，你的结果就越好！

在单个测试中保留多项检查将帮助您生成需要更正多少功能的报告。

保留原子测试用例将向您展示整体质量！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-21T08:20:45.133

通常每次检查一个测试用例。当测试围绕特定功能进行分组时，它会使重构（例如删除或拆分）该功能更加困难，因为测试也需要大量更改。为您希望从类中获得的每种行为类型编写测试要好得多。有时在测试特定行为时，对每个测试用例进行多次检查是有意义的。然而，随着测试变得越来越复杂，当类中的某些内容发生变化时，它们变得更难改变。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-21T08:47:17.877

在 Java/Eclipse/JUnit 中，我使用两个具有相同树的源目录（src 和 test）。如果我有一个**src/com/mycompany/whatever/TestMePlease**和值得测试的方法（例如**deleteAll(List<?> stuff) throws MyException**），我创建一个**test/com/mycompany/whatever/TestMePleaseTest**与测试不同用例的方法/场景：

```
@Test
public void deleteAllWithNullInput() { ... }

@Test(expect="MyException.class") // not sure about actual syntax here :-P
public void deleteAllWithEmptyInput() { ... }

@Test
public void deleteAllWithSingleLineInput() { ... }

@Test
public void deleteAllWithMultipleLinesInput() { ... } 
```

对我来说，进行不同的检查更容易处理。

尽管如此，由于每个测试都应该是一致的，如果我希望我的初始数据集保持不变，我有时会创建一些东西并在同一个检查中删除它，以确保所有其他测试都能找到原始数据集：

```
@Test
public void insertAndDelete() { 
    assertTrue(/*stuff does not exist yet*/);
    createStuff();
    assertTrue(/*stuff does exist now*/);
    deleteStuff();
    assertTrue(/*stuff does not exist anymore*/);
} 
```

不知道是否有更聪明的方法可以做到这一点，告诉你真相......

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-21T09:16:17.167

我喜欢在一个方法中对每个检查进行一次测试，并为测试方法取一个有意义的名称。例如：

testAddUser_shouldThrowIllegalArgumentExceptionWhenUserIsNull

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-21T07:05:11.493

每个检查一个测试用例。如果您适当地命名该方法，当这些测试之一导致回归失败时，它可以为问题提供有价值的提示。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-21T08:08:57.253

我尝试将数据库测试和业务逻辑测试分开（如其他人推荐的那样使用[BDD](http://en.wikipedia.org/wiki/Behavior_Driven_Development "维基百科 - 行为驱动开发")），首先运行数据库测试可确保您的数据库处于良好状态，然后再要求您的应用程序使用它。

安迪·伦纳德（Andy Leonard）有一个很好的[播客节目，讲述了它所涉及的内容以及如何做](http://www.dotnetrocks.com/default.aspx?showNum=312 ".Net Rocks 上的安迪伦纳德！")，如果您想了解更多信息，我已经写了[一篇关于该主题的博客文章](http://www.fatlemon.co.uk/2008/02/how-far-should-your-unit-tests-go/ "FatLemon - 你的单元测试应该走多远？")（无耻的插头；o）

# asp.net - 关于将旧版 ASP 站点与 .NET 2.0 混合使用的建议

> ID：110431
> 
> 赞同：2
> 
> 时间：2008-09-21T06:59:21.287
> 
> 标签：asp.net, com, asp-classic, e-commerce, paypal

我们刚刚负责更新电子商务应用程序以使用 PayPal 的 PayFlow 产品。该站点最初是用经典的 ASP 编写的，但信用卡处理部分是一个 COM 组件。

我们的计划是用 .NET 2.0 组件替换 COM 组件。在我们出发之前，我正在寻找提示、问题等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-21T09:43:04.203

[我认为 Dan Bartels 关于用 .NET 程序集替换旧的经典 ASP COM 组件](http://blog.danbartels.com/articles/322.aspx)的博客文章 是您的正确起点。

实现博客文章中描述的细节，您应该能够在经典 asp 中实例化您的对象并执行如下代码：

```
Dim myObject
Set myObject = Server.CreateObject("MyWebDLL.MyClass")
Response.Write myObject.MyMethod("test") 
```

# .net - .Net 是否有任何 Common Lisp 实现？

> ID：110433
> 
> 赞同：46
> 
> 时间：2008-09-21T07:00:30.957
> 
> 标签：.net, lisp, common-lisp, language-implementation

.Net 是否有任何 Common Lisp 实现？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-09-22T16:26:30.980

我最近没有看过它，但至少在过去，在 CLR 上完全实现 common lisp 存在一些问题，如果这发生了变化，我会有点惊讶。问题出现在处理浮点数之类的问题上，其中 .net/clr 有办法做到这一点，即 a) 略微不正确 b) 不同意通用 lisp 的 ANSI 标准，但 c) 不允许任何解决此问题的方法。还有其他类似的问题。这些东西很繁琐，也许不太重要，但意味着您不太可能在 CLR 上看到 ANSI CL。

还有更大的问题，例如 common lisp 有一个更强大的对象系统，所以你不能在运行时将它 1:1 映射到对象（没有 MI，一个）。这没关系，但给您留下了一种内部/外部的方法，这是常见的运行时试图避免的......

无论您是否会看到一个常见的 lisp-ish 变体在其上运行，都是另一回事，但我目前不知道（不是我仔细研究过）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-09-21T07:09:11.793

如果可以反过来，您可以通过[Edi Weitz 的 RDNZL](http://weitz.de/rdnzl/)从您最喜欢的 Lisp 访问 .Net 。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-09-21T07:22:14.120

不，但您可能需要考虑在[DLR](http://en.wikipedia.org/wiki/Dynamic_Language_Runtime)上运行[IronScheme](http://www.codeplex.com/IronScheme)。

从网站：

IronScheme 的目标是成为基于 Microsoft DLR 的符合 R6RS 的 Scheme 实现。

IronScheme 将完全重写 IronLisp，并结合开发 IronLisp 的经验教训。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2010-04-05T17:32:56.010

从 2008 年到 2010 年重新考虑这个问题，您现在可能想要考虑 CLR 上的 Clojure。它不是 Common Lisp，但如果你来自那个方向，它会很容易学习。与 CLR 的互操作非常简单，它每天都会吸引更多的用户，并解决其他几个重要的话题，比如并发性。可能值得在其中投入一些时间。更多 CLR 特定 Clojure 信息[在这里](https://github.com/clojure/clojure-clr/wiki)。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-10-03T00:53:17.267

[L 夏普 .NET](http://sourceforge.net/projects/lsharp/)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2010-06-30T13:50:00.170

.NET 的完整通用 lisp [http://code.google.com/p/uabcl/](http://code.google.com/p/uabcl/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-17T20:08:45.210

截至 2019 年，现在有 Bike：[https](https://github.com/Lovesan/bike) ://github.com/Lovesan/bike它使用 lisp 兼容层实现了到 .Net Core 平台的跨平台 Common Lisp 接口。

*   首先是RDNZL重生
*   这一次，在 .Net Core 上，无需一行 C++ 代码，完全跨平台

[（在https://github.com/CodyReichert/awesome-cl#net-core](https://github.com/CodyReichert/awesome-cl#net-core)上看到了）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-16T22:50:32.087

# [#Script Lisp](https://sharpscript.net/lisp/)

我正在开发Lisp，它是[Nukata Lisp](https://github.com/nukata/lisp-in-cs)`#Script`的增强版本，具有许多新功能，可重用现有的脚本功能，以提供与其余部分 （请参阅[语言块和表达式](https://sharpscript.net/docs/syntax#language-blocks-and-expressions)）和 .NET 的无缝集成，包括[.NET 类型的脚本](https://sharpscript.net/docs/script-net)，支持适用于所有 .NET 数字类型，并可以访问其包含**1000多种**[脚本方法](https://sharpscript.net/docs/methods)的综合库- 专为从动态语言访问 .NET 功能而设计。`#Script``#Script`

 **为了提高与现有 Common Lisp 源代码的兼容性，它还实现了大部分[Simplified Common Lisp Reference](http://jtra.cz/stuff/lisp/sclr/) 以及在 Lisp 中实现 C# LINQ 101 示例所需的所有缺失函数：

### [#Script Lisp LINQ 示例](https://sharpscript.net/linq/restriction-operators?lang=lisp)

为了提高可读性和熟悉度，它还采用了许多**Clo​​jure**语法来定义 [数据列表和映射](https://clojure.org/guides/learn/syntax#_literal_collections)文字、 [匿名函数](https://clojure.org/guides/learn/functions#_anonymous_function_syntax)、[Java Interop](https://clojure.org/guides/learn/functions#_java_interop)中用于 .NET Interop 的 [语法、用于索引集合](https://clojure.org/guides/learn/hashed_colls#_field_accessors)和访问索引访问器的关键字语法以及 Clojure 流行的较短别名`fn`, `def`, `defn`- 提高与 Clojure 的源代码兼容性。

## YouTube 演示

因为它是一流的`#Script`语言，它受益于其广泛的支持用例生态系统，您可以在下面的 YouTube 视频中预览其中的一些：

*   [#Script LISP Repl 与 web lisp](https://www.youtube.com/watch?v=RR7yk6ReNnQ)
*   [Lisp TCP REPL 与#Script Lisp](https://www.youtube.com/watch?v=HO523cFkDfk)
*   [#Script Live 观看了 Lisp Shell 脚本](https://www.youtube.com/watch?v=rIgEP8ssikY)
*   [来自游戏内#Script Lisp REPL 的脚本 Unity 3D 游戏对象](https://www.youtube.com/watch?v=WmzI-5L0hJk)

## 安装

`#Script`Lisp 可以通过[Web](https://docs.servicestack.net/web-tool)跨平台`dotnet`工具立即安装，该工具可以通过以下方式安装：

```
$ dotnet tool install -g web 
```

你可以在哪里启动一个即时的 Lisp REPL：

```
$ web lisp 
```

并且能够[运行和观看 Lisp 脚本](https://sharpscript.net/lisp/#run-and-watch-lisp-scripts)，您可以在其中实时查看更改。

[Windows应用程序 dotnet 工具](https://docs.servicestack.net/netcore-windows-desktop)中提供了相同的功能：

```
$ dotnet tool install -g app 
```

此外，您还可以使用`#Script`Lisp 开发[Gist 桌面应用程序](https://sharpscript.net/docs/gist-desktop-apps)和[Sharp 应用程序](https://sharpscript.net/docs/sharp-apps)（.NET Core Windows 桌面应用程序）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-24T15:15:50.133

你可以试试[这个](http://weitz.de/rdnzl/)（免责声明，我自己没有测试过）。也读[这个](https://stackoverflow.com/questions/126790/if-you-already-know-lisp-why-would-you-also-want-to-learn-f)。这就是链接的来源。

# c++ - 清理遗留代码“标题意大利面条”

> ID：110436
> 
> 赞同：4
> 
> 时间：2008-09-21T07:02:26.490
> 
> 标签：c++, legacy-code

清理导致编译时间极慢（Linux / Unix）的“标题意大利面条”的任何推荐做法？

GCC 有没有相当于“#pragma once”的东西？
（发现与此有关的相互矛盾的消息）

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-21T09:15:27.483

假设您熟悉“包含守卫”（标头开头的#ifdef..），另一种加快构建时间的方法是使用外部包含守卫。它在“[大规模 C++ 软件设计](http://vig.pearsoned.com/store/product/1,1207,store-15080_isbn-0201633620,00.html)”中进行了讨论。这个想法是经典的包含保护，不像#pragma once，不要让你从第二次开始忽略标题所需的预处理器解析（即它仍然必须解析并查找包含保护的开始和结束。用外部包含保护您将#ifdef 放在#include 行本身周围。

所以它看起来像这样：

```
#ifndef MY_HEADER
#include "myheader.h"
#endif 
```

当然在 H 文件中你有经典的包含保护

```
#ifndef MY_HEADER
#define MY_HEADER

// content of header

#endif 
```

这样，myheader.h 文件甚至不会被预处理器打开/解析，它可以在大型项目中为您节省大量时间，尤其是当头文件位于共享的远程位置时，就像它们有时那样。

再一次，这一切都在那本书里。hth

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-21T10:00:56.547

如果你想做一个完整的清理并有时间去做，那么最好的解决方案是删除所有文件中的所有#includes（除了明显的，例如abc.cpp中的abc.h），然后编译项目。添加必要的前向声明或标题来修复第一个错误，然后重复直到你干净地完成。

这并不能解决可能导致包含问题的潜在问题，但它确实确保了唯一的包含是必需的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-21T07:39:47.353

我读过 GCC 认为`#pragma once`已弃用，尽管甚至`#pragma once`只能做这么多来加快速度。

要尝试解开`#include`意大利面，您可以查看[doxygen](http://www.doxygen.nl/)。它应该能够生成包含标题的图表，这可能会给您简化事情的优势。我无法立即回忆起详细信息，但图形功能可能需要您安装[GraphViz](http://www.graphviz.org/)并告诉 doxygen 它可以找到 GraphViz 的 dotty.exe 的路径。

如果编译时间是您的主要关注点，您可能会考虑的另一种方法是设置[Precompiled Headers](http://en.wikipedia.org/wiki/Precompiled_headers)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-21T10:32:20.963

理查德有点正确（为什么他的解决方案被记录下来？）。

无论如何，所有 C/C++ 头文件都应该使用内部包含保护。

这说，要么：

1 - 您的遗留代码不再真正维护，您应该使用预编译的头文件（这是一个 hack，但是嘿......您需要加快编译速度，而不是重构未维护的代码）

2 - 您的遗留代码仍然存在。然后，您可以使用预编译的头文件和/或防护/外部防护作为临时解决方案，但最后，您需要删除所有包含，一次一个 .C 或 .CPP，并编译每个 . C 或 .CPP 文件一次一个，在必要时使用前向声明或包含来更正它们的包含（或者甚至将大型包含分成较小的包含以确保每个 .C 或 .CPP 文件将只获得它需要的标题）。无论如何，测试和删除过时的包含是项目维护的一部分，所以......

我自己对预编译头文件的体验并不是很好，因为一半时间，编译器找不到我定义的符号，所以我尝试了完整的“清理/重建”，以确保它不是预编译头文件那已经过时了。所以我的猜测是将它用于你甚至不会接触的外部库（比如 STL、C API 头文件、Boost 等等）。不过，我自己的经验是使用 Visual C++ 6，所以我猜（希望？）他们现在做对了。

现在，最后一件事：标题应该始终是自给自足的。这意味着如果标题的包含取决于包含顺序，那么您就有问题了。例如，如果你可以写：

```
#include "AAA.hpp"
#include "BBB.hpp" 
```

但不是：

```
#include "BBB.hpp"
#include "AAA.hpp" 
```

因为 BBB 依赖于 AAA，所以你所拥有的只是一个你从未在代码中承认的依赖。不通过定义来确认它只会让你的编译成为一场噩梦。BBB 也应该包含 AAA（即使它可能会慢一些：最后，前向声明无论如何都会清除无用的包含，因此您应该有一个更快的编译计时器）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-22T15:07:58.363

前几天我读到了一个减少头文件依赖的巧妙技巧：编写一个脚本

*   查找所有#include 语句
*   一次删除一条语句并重新编译
*   如果编译失败，请重新添加 include 语句

最后，希望您的代码中包含最少的必需包含项。您可以编写一个类似的脚本，重新排列包含以找出它们是否自给自足，或者要求在它们之前包含其他标头（首先包含标头，看看编译是否失败，报告它）。这应该有助于清理你的代码。

还有一些注意事项：

*   现代编译器（其中包括 gcc）识别标头保护，并以与 pragma once 相同的方式进行优化，只打开文件一次。
*   # 当同一个文件在文件系统中具有不同的名称（即使用软链接）时，pragma once 可能会出现问题

*   gcc 支持 #pragma 一次，但称其为“过时”
*   # 并非所有编译器都支持 pragma once，也不是 C 标准的一部分

*   不仅编译器可能有问题。像 Incredibuild 这样的工具也有 #pragma once 的问题

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-21T07:53:12.920

使用其中一种或多种来加快构建时间

1.  使用预编译头文件
2.  使用缓存机制（例如 scons）
3.  使用分布式构建系统 ( distcc, Incredibuild($) )

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-21T07:07:50.177

在标头中：仅当您不能使用前向声明时才包含标头，但始终#include 您需要的任何文件（包含依赖项是邪恶的！）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-21T07:17:24.130

如另一个答案中所述，您绝对应该尽可能使用前向声明。据我所知，GCC 没有任何与 #pragma once 等价的东西，这就是为什么我坚持包含守卫的旧时尚风格。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-21T07:25:58.167

感谢您的回复，但问题是关于现有代码，其中包括严格的“包含顺序”等。问题是是否有任何工具/脚本来澄清实际发生的事情。

标头保护不是解决方案，因为它们不会阻止编译器一次又一次地读取整个文件并且......

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-21T10:04:48.003

[PC-Lint](http://www.gimpel.com/)将大大有助于清理意大利面条头。它还将为您解决其他问题，例如未初始化的变量看不见等。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-21T15:48:06.603

正如 onebyone.livejournal.com 在回复您的问题时评论的那样，一些编译器支持[包括保护优化](http://www.eskimo.com/~hottub/software/include/index.html)，我链接的页面定义如下：

> 包含保护优化是当编译器识别出上述内部包含保护习语并采取措施避免多次打开文件时。编译器可以查看包含文件，去掉注释和空格，并确定整个文件是否在包含保护范围内。如果是，它将文件名和包含保护条件存储在映射中。下次要求编译器包含文件时，它可以检查包含保护条件并决定是跳过文件还是#include 它而不需要打开文件。

再说一次，您已经回答了外部包含守卫不是您问题的答案。对于必须以特定顺序包含的头文件，我建议如下：

*   每个`.c`or`.cpp`文件应该首先`#include`是相应的`.h`文件，其余的`#include`指令应该按字母顺序排序。当这破坏了头文件之间未说明的依赖关系时，通常会出现构建错误。
*   `#define`如果您有一个头文件为基本类型或大多数代码使用的全局指令定义全局 typedef ，则每个`.h`文件都应该`#include`首先是该文件，其余的`#include`指令应该按字母顺序排序。
*   当这些更改导致编译错误时，您通常必须以`#include`.
*   当这些更改不会导致编译错误时，它们可能会导致行为更改。希望您有某种测试套件可用于验证应用程序的功能。

听起来问题的一部分可能是增量构建比它们应该的要慢得多。正如其他人所指出的，这种情况可以通过前向声明或分布式构建系统来改善。

# c# - 如何将 WCF 模板添加到 Visual Studio Express？

> ID：110451
> 
> 赞同：8
> 
> 时间：2008-09-21T07:08:36.383
> 
> 标签：c#, visual-studio, visual-studio-2008, wcf, visual-studio-express

我正在阅读 Michele Bustamante 的《Learning WCF》一书，并尝试使用 Visual Studio C# Express 2008 来完成。说明说要使用 VS C# Express 中不包含的 WCF 项目和项模板。Visual Studio Web Developer Express中包含这些类型*的*模板，我尝试将它们复制到正确的目录中以供 VS C# Express 查找，但 IDE 找不到它们。有一些注册过程吗？或者在某处配置文件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-24T10:03:48.917

如果您同时安装了 Visual Web Developer (VWD) 2008 和 Visual C# (VC#) 2008，则可以在它们之间复制模板。VWD 模板文件位于（默认情况下）：

```
C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\VWDExpress 
```

VC# 模板位于：

```
C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\VCSExpress 
```

只需在两个目录之间复制模板，它们可能不完全匹配，但它们应该足够接近才有意义，例如，我通过从以下位置复制文件将项目模板从 VC# 复制到 VWD：

```
C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\VCSExpress\ProjectTemplates\1033 
```

进入：

```
C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\VWDExpress\ProjectTemplates\CSharp\Windows\1033 
```

模板不会立即出现在模板浏览器中。对于 VWD，您需要运行：

```
C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\VWDExpress.exe /installvstemplates 
```

对于 VC#，你运行：

```
C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\VCSExpress.exe /installvstemplates 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-21T07:51:14.907

如果您是学生，您可以从[DreamSpark](http://dreamspark.com)免费获得完整的 Visual Studio 2008。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-01T15:16:23.107

麦克风，

Visual Web Developer 2008 Express 将帮助您处理 WCF 项目。

我有以下...

Microsoft Visual Studio 2008 版本 9.0.30729.1 SP Microsoft .NET Framework 版本 3.5 SP1

希望这可以帮助。

桑吉夫

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-30T14:29:51.057

作为一个注意后续行动，我也不得不跑

C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\VWDExpress.exe /ResetSettings

**复制**模板并运行

C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\VWDExpress.exe /installvstemplats

IDE 在尝试枚举 C# 项目模板树时崩溃。运行 ResetSettings 后，树迭代并出现了新模板。

# security - 在 Web 开发期间，我将花费多少时间在用户输入验证上？

> ID：110458
> 
> 赞同：7
> 
> 时间：2008-09-21T07:14:46.010
> 
> 标签：security, xss, sql-injection, user-input

我是在网络上开发东西的新手。到目前为止，我花了很多时间（50% 左右）来尝试防止坏人将诸如 sql 注入之类的东西放入我的输入表单并在服务器端验证它。这是正常的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-21T08:15:10.357

@Jeremy - 一些 PHP 细节

当涉及到数据库查询时，请始终尝试使用准备好的参数化查询。`mysqli`和`PDO`库支持这一点。这比使用 mysql_real_escape_string 等转义函数要安全得多。

是的，mysql_real_escape_string 实际上只是一个字符串转义函数。它不是灵丹妙药。它将做的只是转义危险字符，以便它们可以安全地用于单个查询字符串。但是，如果您不事先清理输入，那么您将容易受到某些攻击向量的攻击。

想象一下下面的 SQL：

```
$result = "SELECT fields FROM table WHERE id = ".mysql_real_escape_string($_POST['id']); 
```

您应该能够看到这很容易被利用。
想象一下`id`参数包含常见的攻击向量：

```
1 OR 1=1 
```

它们中没有要编码的危险字符，因此它将直接通过转义过滤器。离开我们：

```
SELECT fields FROM table WHERE id = 1 OR 1=1 
```

这是一个可爱的 SQL 注入向量。

虽然这些功能很有用，但必须小心使用。您需要确保所有 Web 输入都经过一定程度的验证。在这种情况下，我们看到我们可以被利用，因为我们没有检查我们用作数字的变量是否实际上是数字。在 PHP 中，您应该广泛使用一组函数来检查输入是否为整数、浮点数、字母数字等。但是当涉及到 SQL 时，请注意大多数准备好的语句的值。如果上面的代码是一个准备好的语句，那么它是安全的，因为数据库函数会知道这`1 OR 1=1`不是一个有效的文字。

至于 htmlspecialchars()。这本身就是一个雷区。

PHP 中存在一个真正的问题，因为它有一系列不同的与 html 相关的转义函数，并且没有明确指导哪些函数执行什么操作。

首先，如果您在 HTML 标记中，那么您就遇到了真正的麻烦。看着

```
echo '<img src= "' . htmlspecialchars($_GET['imagesrc']) . '" />'; 
```

我们已经在一个 HTML 标记中，所以我们不需要 < 或 > 来做任何危险的事情。我们的攻击向量可能只是`javascript:alert(document.cookie)`

现在生成的 HTML 看起来像

```
<img src= "javascript:alert(document.cookie)" /> 
```

攻击直接通过。

它变得更糟。为什么？因为 htmlspecialchars 只编码双引号而不是单引号。所以如果我们有

```
echo "<img src= '" . htmlspecialchars($_GET['imagesrc']) . ". />"; 
```

我们的邪恶攻击者现在可以注入全新的参数

```
pic.png' onclick='location.href=xxx' onmouseover='... 
```

给我们

```
<img src='pic.png' onclick='location.href=xxx' onmouseover='...' /> 
```

在这些情况下，没有灵丹妙药，您只需要自己清理输入即可。如果您尝试过滤掉不良字符，您肯定会失败。采取白名单方法，只让好的字符通过。查看[XSS 备忘单](http://ha.ckers.org/xss.html)，了解有关向量的多样性的示例

即使您在 HTML 标记之外使用 htmlspecialchars($string)，您仍然容易受到多字节字符集攻击向量的攻击。

最有效的方法是使用 mb_convert_encoding 和 htmlentities 的组合，如下所示。

```
$str = mb_convert_encoding($str, ‘UTF-8′, ‘UTF-8′);
$str = htmlentities($str, ENT_QUOTES, ‘UTF-8′); 
```

即使这样，IE6 也容易受到攻击，因为它处理 UTF 的方式。但是，您可以回退到更有限的编码，例如 ISO-8859-1，直到 IE6 的使用率下降。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-21T07:41:42.450

为了防止 sql 注入攻击，只需使用准备好的语句进行查询（具体方式取决于您的平台）。一旦你这样做了，你就再也不必为这个特定的方面而烦恼了。你只需要在*任何地方*使用它。

至于一般的输入验证，依靠一个通用的基础来测试所需的字段、数字等总是好的。例如，ASP.Net 的验证器非常易于使用。您应该遵循的一条经验法则是不要相信客户端（javascript）会为您执行此操作，因为它很容易绕过它。始终首先在服务器端进行。

需要注意的一个特殊情况是允许引入可能包含 html/javascript 的丰富内容。这可能允许恶意用户在您的数据中注入 javascript，这将触发您在渲染时无法控制的代码。不要**尝试**推出自己的验证码。在网上搜索免费的、经过测试的、托管的代码，这些代码将为您完成。Jeff 在其中一个播客中对此提出了一些建议。

自动化输入验证代码后，执行此操作所花费的时间应该与业务规则的复杂性直接相关。所以作为一般规则：保持简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T07:22:38.893

不，这不正常。也许你需要：

*   使用权限组件避免 SQL 注入（Java 中的 PreparedStatements）
*   创建一个“过滤”来自用户的消息的组件（Java 中的 servlet 过滤器）。

任何现代语言都支持这两件事。

亲切的问候

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-21T07:34:34.510

我很高兴你注意保护自己。太多人没有。

然而，正如其他人所说，更好的架构选择将使您的问题消失。使用准备好的语句（大多数语言应该支持）将使 SQL 注入攻击消失。加上许多数据库，它们将显着提高性能。处理跨站点脚本攻击更加棘手。但基本策略必须是决定如何转义用户输入，决定在哪里转义，并始终在同一个地方进行。不要陷入认为越多越好的陷阱！在一个地方以一种方式始终如一地执行它就足够了，并且将避免您不得不弄清楚多个转义级别中的哪一个导致特定的错误。

或者学习如何创建和维护一个健全的架构的课程需要经验。而且，它需要反思你的糟糕经历。因此，请注意您当前的痛点（看起来确实如此），并考虑您可以采取哪些不同的措施来避免它们。如果您有导师，请与您的导师交谈。这不会总是对你的这个项目有很大帮助，但它会在下一个项目中帮助你。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-21T08:30:03.583

我看到了你的问题。看起来你的保护逻辑**遍布代码库。**并且每次编写具有潜在危险的代码时，都必须小心包含所有保护措施。每次出现新威胁时，您都必须检查所有这些声明并验证它们是否安全。

**你不能以这种方式做真正的安全。**

你应该有一些包装器，如果不是不可能的话，这**会使生成不安全的代码变得困难。**例如，准备好的语句。但是您可能想要使用 ORM，例如 Ruby on Rails 的 ActiveRecord，或者在您的框架中使用类似的东西。

对于输出和 XSS 保护，请确保**默认情况下输出是 HTML 转义的。**然后，如果您确实需要将生成的 HTML 输出给用户，您将明确地执行此操作，并且更容易验证。

对于 CSRF 保护，尝试也找到一个通用的解决方案。通常它应该自动完成它的职责，而不需要你显式地创建一个验证令牌，并手动验证它、丢弃它或拒绝请求。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-21T08:21:12.993

只是对准备好的陈述的说明。首先，如果可以的话，您应该尝试使用存储过程……在大多数情况下，它们可能是更好的解决方案。

其次，它们都保护您免受 SQL 注入，只要您不使用动态 SQL，即编写更多 SQL 然后执行它的 SQL。在这种情况下，它们将无效——存储过程也是如此。

关于您花费的时间百分比：验证非常重要，它确实需要一些思考，如果不是一些时间的话。但是百分比取决于您的应用程序有多大，不是吗？在一个非常小的应用程序中，比如说，只有一个新闻通讯注册，验证很可能会占用你很大一部分时间。

在较大的应用程序中，即您有很多非展示代码的地方，这是不正常的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-24T18:02:03.337

您面临的问题只能通过泛化来解决。

尝试识别您需要的常见输入验证类型

*   数字/字符串值/正则表达式验证
*   范围/长度
*   转义特殊字符
*   根据黑名单检查您在特定上下文中不期望的常见关键字（'script'、'select'、'drop'...）

并在处理数据之前系统地调用它们。

所有*数据库访问*都必须使用准备好的语句完成，而不是连接查询字符串。

所有*输出*都必须转义，因为您不想将所有转义的内容存储在数据库中。

一个好的带外/社交方法是：尽可能地识别你的用户。被识别的机会越高，他们对系统的欺骗就越少。获取他们的手机号码以发送代码，检查他们的信用卡等。

# visual-studio - 有人知道 Visual Studio 的任何（免费/开源）VI 集成吗？

> ID：110477
> 
> 赞同：38
> 
> 时间：2008-09-21T07:27:07.010
> 
> 标签：visual-studio, vim, add-in, vi

vi 适合酷孩子。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2010-06-09T13:20:27.440

在@joe 的回答之后，Jared Parsons 创造了伟大的[VsVim](http://github.com/jaredpar/VsVim)。它已出现在[Visual Studio Gallery](http://visualstudiogallery.msdn.microsoft.com/en-us/59ca71b3-a4a3-46ca-8fe1-0e90e3f79329)中。这是一个现成的扩展包。我下载了它，运行了文件，它开箱即用。它也是免费的。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2010-08-31T17:42:03.407

从 Visual Studio 2010 开始，您可以使用 VsVim。这是扩展库上提供的免费扩展。源代码托管在github上

*   [http://github.com/jaredpar/VsVim](http://github.com/jaredpar/VsVim)
*   [http://visualstudiogallery.msdn.microsoft.com/en-us/59ca71b3-a4a3-46ca-8fe1-0e90e3f79329](http://visualstudiogallery.msdn.microsoft.com/en-us/59ca71b3-a4a3-46ca-8fe1-0e90e3f79329)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2008-09-21T07:32:25.467

1.  [ViEmu](http://www.viemu.com/) - 不是免费但很棒的 Vim 仿真。
2.  [Visual_Studio.vim](http://www.vim.org/scripts/script.php?script_id=864) - 允许您从 Vim 管理 Visual Studio。
3.  [使用 GVim 作为 Visual Studio 编辑器](http://vim.wikia.com/wiki/Calling_gvim_from_MS_Visual_Studio)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-07-17T08:22:55.687

1.  [ViEmu](http://www.viemu.com/) - 不是免费但很棒的 Vim 仿真。
2.  [Visual_Studio.vim](http://www.vim.org/scripts/script.php?script_id=864) - 允许您从 Vim 管理 Visual Studio。
3.  [使用 GVim](http://vim.wikia.com/wiki/Calling_gvim_from_MS_Visual_Studio)作为 Visual Studio 编辑器

[http://vim.wikia.com/wiki/Integrate_gvim_with_Visual_Studio](http://vim.wikia.com/wiki/Integrate_gvim_with_Visual_Studio)

并且 SO 在 [任何人都知道 Visual Studio 的任何（免费/开源）VI 集成中提供了相同的详细信息？](https://stackoverflow.com/questions/110477/anyone-know-of-any-free-open-source-vi-integration-for-visual-studio)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-21T07:34:58.923

ViEmu 不是免费的，但只需 99 美元即可满足您的需求。
您可能还想阅读此[http://vim.wikia.com/wiki/Integrate_gvim_with_Visual_Studio](http://vim.wikia.com/wiki/Integrate_gvim_with_Visual_Studio)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-21T12:01:34.727

你试过 gvim OLE 包吗？我已经将它与以前版本的 Visual Studio 一起使用，并且运行良好。

[http://www.vim.org/download.php#pc](http://www.vim.org/download.php#pc) -- gvim##ole.zip

支持 OLE 的 GUI 版本。这提供了一些额外的功能，例如与 Visual Developer Studio 的集成。但它使用了相当多的内存。

# c# - 在 .NET 窗口应用程序中收集/报告意外错误的最佳方法是什么？

> ID：110488
> 
> 赞同：6
> 
> 时间：2008-09-21T07:39:13.593
> 
> 标签：c#, .net, error-handling, reporting

我正在寻找一种比我们目前必须处理的**意外生产错误**更好的解决方案，而无需重新发明轮子。

我们的大量产品是安装在远程站点的 WinForm 和 WPF 应用程序。从 NullReferenceExceptions 到“一般网络错误”，不可避免地会发生意外错误。因此，从程序员错误到环境问题。

目前，所有这些未处理的异常都使用 log4net 记录下来，然后通过电子邮件发送给我们进行**分析**。然而，我们发现有时这些错误“报告”包含的信息太少，无法识别问题。

在这些报告中，我们需要以下信息：

1.  应用名称
2.  应用版本
3.  工作站
4.  可能是屏幕截图
5.  异常详情
6.  操作系统
7.  可用内存
8.  运行进程
9.  等等...

我真的不想通过从头开始开发来重新发明轮子。需要的组件：

1.  错误收集（详情如上）
2.  错误“发件人”（如果数据库或 Internet 不可用，则需要排队）
3.  错误数据库
4.  分析和报告这些错误。例如，10 个最常见的错误或超时发生在下午 4:00 到下午 5:00 之间。版本 x 和 y 之间的错误比较如何？

注意：我们将[SmartAssembly](http://www.smartassembly.com)视为一种可能的解决方案，但虽然很接近，但它并不能完全满足我们的需求，我希望听到其他开发人员做了什么以及是否存在一些替代方案。

**编辑：**感谢到目前为止的答案。也许我最初的问题并不清楚，问题不在于如何捕获所有未经处理的异常，而是如何处理它们并围绕它们创建报告引擎（分析）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-21T07:50:18.013

我建议 Jeff Atwood 关于[用户友好异常处理](http://www.codeproject.com/KB/exception/ExceptionHandling.aspx)的文章，它完成了您已经询问的大部分内容（应用程序信息、屏幕截图、异常详细信息、操作系统、记录到文本文件和电子邮件），并包含源代码，因此您可以添加额外的你需要的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T07:50:57.140

您可以附加到未处理的异常事件并记录它/点击网络服务/等。

```
[STAThread]
static void Main() 
{
    Application.ThreadException += new ThreadExceptionEventHandler(OnUnhandledException);
    Application.Run(new FormStartUp());
}
static void OnUnhandledException(object sender, ThreadExceptionEventArgs t) 
{
    // Log
} 
```

我还使用 AppDomain 而不是 ThreadException 找到了这个代码片段：

```
static class EntryPoint {
    [MTAThread]
    static void Main() {
        // Add Global Exception Handler
        AppDomain.CurrentDomain.UnhandledException += 
            new UnhandledExceptionEventHandler(OnUnhandledException);

        Application.Run(new Form1());
    }

    // In CF case only, ALL unhandled exceptions come here
    private static void OnUnhandledException(Object sender, 
        UnhandledExceptionEventArgs e) {
        Exception ex = e.ExceptionObject as Exception;
        if (ex != null) {
            // Can't imagine e.IsTerminating ever being false
            // or e.ExceptionObject not being an Exception
            SomeClass.SomeStaticHandlingMethod(ex, e.IsTerminating);
        }
    }
} 
```

这是一些关于它的文档：[AppDomain Unhandled Exception](http://hoser.lander.ca/PermaLink.aspx?guid=4d6820a1-c059-44bc-8b2e-84b2c6a61a39)

除了自己处理之外，实际上并没有一种可重用的通用方法，它确实需要与应用程序的接口正确集成，但是您可以设置一个接受应用程序名称、异常和所有这些好东西，并为您的所有应用程序提供一个集中点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-21T07:59:50.487

您可能想研究 JetBrain 的[Omea Reader](http://www.jetbrains.com/omea/reader/)中内置的错误报告功能。它有一个包罗万象的错误处理组件，当发生意外错误时会弹出一个对话框。用户可以在将问题提交到 JetBrain 的公共错误收集 Web 服务之前输入更多详细信息。

他们将 Omea 开源，以允许社区将 .NET 1.1 代码库升级到 v2 或 3。 [http://www.jetbrains.net/confluence/display/OMEA/this+link](http://www.jetbrains.net/confluence/display/OMEA/this+link)

# python - 有没有一种简单的方法可以在 python 中请求 URL 而不是遵循重定向？

> ID：110498
> 
> 赞同：122
> 
> 时间：2008-09-21T07:49:10.997
> 
> 标签：python, http, redirect

查看 urllib2 的源代码，看起来最简单的方法是将 HTTPRedirectHandler 子类化，然后使用 build_opener 覆盖默认的 HTTPRedirectHandler，但这似乎需要做很多（相对复杂的）工作来完成它应该做的事情很简单。

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2013-02-03T22:42:27.047

这是[请求](http://docs.python-requests.org/en/latest/)方式：

```
import requests
r = requests.get('http://github.com', allow_redirects=False)
print(r.status_code, r.headers['Location']) 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2008-09-21T08:33:12.700

[Dive Into Python](https://linux.die.net/diveintopython/html/http_web_services/redirects.html)有一章很好地介绍了使用 urllib2 处理重定向。另一个解决方案是[httplib](https://docs.python.org/2/library/httplib.html)。

```
>>> import httplib
>>> conn = httplib.HTTPConnection("www.bogosoft.com")
>>> conn.request("GET", "")
>>> r1 = conn.getresponse()
>>> print r1.status, r1.reason
301 Moved Permanently
>>> print r1.getheader('Location')
http://www.bogosoft.com/new/location 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2011-03-18T13:33:06.233

这是一个不会跟随重定向的 urllib2 处理程序：

```
class NoRedirectHandler(urllib2.HTTPRedirectHandler):
    def http_error_302(self, req, fp, code, msg, headers):
        infourl = urllib.addinfourl(fp, headers, req.get_full_url())
        infourl.status = code
        infourl.code = code
        return infourl
    http_error_300 = http_error_302
    http_error_301 = http_error_302
    http_error_303 = http_error_302
    http_error_307 = http_error_302

opener = urllib2.build_opener(NoRedirectHandler())
urllib2.install_opener(opener) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-14T16:45:38.060

请求方法中的`redirections`关键字是红鲱鱼。如果接收到重定向状态代码`httplib2`，它将引发异常，而不是返回第一个请求。`RedirectLimit`要返回您需要在对象上设置`follow_redirects`的初始响应：`False``Http`

```
import httplib2
h = httplib2.Http()
h.follow_redirects = False
(response, body) = h.request("http://example.com") 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-21T13:51:30.080

我想这会有所帮助

```
from httplib2 import Http
def get_html(uri,num_redirections=0): # put it as 0 for not to follow redirects
conn = Http()
return conn.request(uri,redirections=num_redirections) 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-21T11:31:20.713

我第二个 olt 的指针指向[Dive into Python](http://www.diveintopython.org/http_web_services/redirects.html)。这是一个使用 urllib2 重定向处理程序的实现，比它应该做的工作更多？也许，耸耸肩。

```
import sys
import urllib2

class RedirectHandler(urllib2.HTTPRedirectHandler):
    def http_error_301(self, req, fp, code, msg, headers):  
        result = urllib2.HTTPRedirectHandler.http_error_301( 
            self, req, fp, code, msg, headers)              
        result.status = code                                 
        raise Exception("Permanent Redirect: %s" % 301)

    def http_error_302(self, req, fp, code, msg, headers):
        result = urllib2.HTTPRedirectHandler.http_error_302(
            self, req, fp, code, msg, headers)              
        result.status = code                                
        raise Exception("Temporary Redirect: %s" % 302)

def main(script_name, url):
   opener = urllib2.build_opener(RedirectHandler)
   urllib2.install_opener(opener)
   print urllib2.urlopen(url).read()

if __name__ == "__main__":
    main(*sys.argv) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-02-29T05:26:46.340

然而，最短的方法是

```
class NoRedirect(urllib2.HTTPRedirectHandler):
    def redirect_request(self, req, fp, code, msg, hdrs, newurl):
        pass

noredir_opener = urllib2.build_opener(NoRedirect()) 
```

# ruby-on-rails - mod_rails 和 mongrel 在同一台服务器上运行？

> ID：110512
> 
> 赞同：4
> 
> 时间：2008-09-21T07:57:28.513
> 
> 标签：ruby-on-rails, ruby, apache, mongrel, mod-rails

我目前正在运行 mongrel 集群，monit 在一台服务器上监视 8 个 Rails 应用程序。

我想将其中的 7 个应用程序移到 mod_rails，剩下一个在 mongrel 上。7 个较小的应用程序是低容量的，而我想留在 mongrel 上的是一个高容量的应用程序。

据我了解，这将是最好的解决方案 - 因为设置 PassengerPoolIdleTime 只能在全球范围内应用。

对于这种类型的设置，我应该注意哪些配置问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-21T11:23:36.440

我可能只是将所有应用程序移至 mod_rails，因为性能似乎与 Mongrel 相当，并且管理开销更少。

关于配置陷阱，只需确保您允许您的公共目录，否则您会发现静态资产失败：

```
<Directory "/var/www/app/current/public">
    Options FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory> 
```

除此之外，如果您知道如何配置 Apache，mod_rails 非常轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-21T12:18:16.637

最终将所有内容移至 mod_rails。

像冠军一样工作！

# rating - 作为程序员，你如何衡量你的技能？

> ID：110522
> 
> 赞同：24
> 
> 时间：2008-09-21T08:14:04.790
> 
> 标签：rating, metric

在之前的一次采访中，我被问到一个问题：“从 0 到 10，你如何评价自己作为一名程序员？”

我发现这是一个很难回答的问题，因为我不知道衡量我的技能有多好的指标。此外，了解自己的表现对于了解成为更好的程序员需要改进什么很有用。

那么有没有办法知道你的工作做得如何？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2008-09-21T08:19:10.143

打电话给你以前的雇主，和继承你所有旧代码的人谈谈。他们会告诉你你是一个多么优秀的程序员。;)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-21T08:23:58.963

这是一个很难的问题。从纯粹内省的角度来看，我认为“优秀程序员”的最佳衡量标准之一是：你有多喜欢你的手艺？我遇到过很多开发人员，其中一些人非常出色，但我从未认识过*任何*一个朝九晚五的开发人员，并且管理的东西比平庸的结果更好。

当然，向内看并不是衡量能力的最佳方式。我应该认为你的程序员同行能够给你一个相当可靠的答案。措辞这样的问题涉及社交礼仪，但潜力仍然存在。以我的经验，与你共事的人会最清楚你的表现如何，哪怕只是因为如果你犯了错误，他们是必须收拾残局的人。:-)

最后的花絮：编程就是解决问题，纯粹而简单。想想你如何处理遇到的难题。首先，你在情绪上如何应对严峻的挑战？其次，你的代码会是什么样子？你只是盲目地穿过丛林直到你到达*某个地方*某种结果，还是您的方法有条不紊，经过精心衡量并且（最重要的是）经过大量研究？真正优秀的程序员不是什么都知道，或者可以用八种语言实现 Dijkstra 算法的人，他们是那些花费数小时翻阅教科书和晦涩难懂的博客来找到恰巧发生的想法的小块的人对手头的问题至关重要。如果你有耐心和热情去克服深刻的挑战，以及谦虚地向他人寻求想法，那么你就在通往“10”的道路上。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-04-09T13:03:50.873

10 - 你不知道你真的什么都不知道。

9 - 你只是在吹牛，而且你可能没有你想象的那么好。即使你真的这么好，你也缺乏政治技巧来了解选择“9”对你的评价。那个，或者你在这个行业非常有名/很受崇拜（比如你曾经写过一本书，它有一个像“The ______ Book”这样的昵称或大多数开发人员会立即认出的首字母缩略词），并且不怕扔你的名字在身边。

8 - 你非常好，你知道这一点，但你足够聪明，可以意识到选择 9 或 10 的耻辱。你最好能够支持它。

7 - 你很好，但你知道你有很多东西要学。

6 - 你有能力，有很多东西要学，但对自己的能力不是很自信。你确定你不是7？

5 - 体面的初级开发人员。你刚从学校毕业，聪明到意识到你对现实世界的编程一无所知，但你知道如何将代码组合在一起。

4 - 平庸的初级开发者。您刚刚离开学校，但您的基本编码技能仍有待改进。你很难通过大部分编程课程，但出于某种原因决定你仍然想从事软件开发的职业。你也不是真的相信自己，那为什么要面试官呢？

3 或以下 - 如果您对自己的编程能力没有信心，为什么要申请编程工作？

所以“正确”的答案可能是 5-7，这取决于你面试的工作类型。一个 8 号有足够的经验，她不会问这个问题。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-09-21T10:24:18.033

这个面试问题实际上并不是关于你作为一名开发人员有多好。这是关于你有多少自我意识，以及你如何证明（对面试官）你提出的任何数字。

在面试中回答这个问题的正确方法（而不是哲学答案）是选择你最擅长的领域并提供一些好的证据来证明你在这些特定领域的开发人员中排名前 X%。

例如，您可能会说，在创建可靠的软件时，您处于前 Y%，因为这是您的专长之一。那你可以举一些例子。或者，您可以说判断开发技能的合理方法是一个人赚了多少钱。

你不应该做的是从字面上理解这个问题。这通常不是面试官想要的。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-21T08:58:53.590

我认识一个多年来一直使用这个面试问题的人。他说，最好的程序员往往给自己打 7 分左右。尤其是给自己打 10 分的人，通常对自己的能力如此自信，因为他们从未**遇到**过真正优秀的程序员。但是从来没有遇到过，他们会从谁那里学到任何真正的技能呢？当然也有例外。但是，如果您熟悉社区，您可能会知道谁是例外。

顺便说一下，这种现象不仅限于编程。我在很多事情上都发现了这一点。自我评价为十分之十的人通常不是很好。非常擅长 X 的人之所以优秀，是因为他们找到了擅长 X 的其他人，因此会将自己与更难的同龄人群体进行比较，并且通常不会给自己打 10 分。我发现这是真的对于远至打乒乓球或国际象棋的 X 值。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-04-09T13:19:22.320

作为采访潜在开发人员的人，我会说 6-8 之间的任何地方都是该问题的最安全答案。我想平均反应是 7 左右。我认为淘汰无能（0-5）或无知（9-10）真的更重要。如果您决定回答 9+，请准备好证明这一点。

如果您真的想自己认真回答这个问题，我会说[程序员能力矩阵](http://www.indiangeek.net/wp-content/uploads/Programmer%20competency%20matrix.htm)是这样一个评级应该涵盖的领域的一个很好的起点。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-09-21T08:29:36.907

任何编程语言似乎都有三个熟练程度：

1.  您可以立即修复语法错误，无需任何辛苦的脑力劳动
2.  您可以阅读其他人的代码并制定他们的意图，而无需将代码“翻译”成自然语言（或其他一些编程语言）
3.  一旦你理解了一个问题，你就可以用语言提供的结构自然地表达它（命令式、OO、函数式......）

我认为这将带您从 1 -> 10 开始

值得注意的是，对一种语言的深入了解可能会妨碍学习另一种语言。因为一旦你用语言'A'来思考，你必须重新连接你的大脑来学习语言'B'。显然，这仅适用于完全不同类型的编程，例如 C->C++、C#->F#、Java->Scala 等...所以我认为它不可能成为抽象的“完美程序员”。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-09-21T09:04:05.870

您的项目欧拉评级可能会给出一个想法（不是您的技能，而是您对不放弃直到最后的热情）：

[http://projecteuler.net/index.php?section=problems](http://projecteuler.net/index.php?section=problems)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-05-14T17:33:49.227

一种完全有效的方法来解决“您如何从 1 到 10 给自己打分？” 就是指出[自我评估的内在问题](http://www.apa.org/journals/features/psp7761121.pdf)。总结在那篇引人入胜的论文中的实验结果：

1.  几乎每个人都认为自己高于平均水平。这些人中至少有 50% 要么不诚实，要么受骗。
2.  *实际上*位于前 25% 的人经常将自己推低到 50-75% 的范围内（即，他们人为地给自己打低分）。
3.  处于 50-75% 范围内的人倾向于最准确地评估自己。

你可以合理地总结为 50% 的自我评估是谎言，另外 25% 是错误的。因此，您*可以*选择询问面试无人机，他们是在浪费您的时间还是在对您进行心理评估……

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-21T08:25:19.427

> 此外，了解自己的表现对于了解成为更好的程序员需要改进什么很有用。

实际上，了解您需要改进的地方对于了解您的表现如何非常重要。只需看看与您一起工作或互动的人，并尝试找出您希望看到自己做得更好的关于他们的哪些事情。这将慢慢帮助你成为一个更好的程序员。随着您的成长，请查看其他团队和源代码（其他开源项目），以帮助您进一步提高自己。

我认为可能回答给自己打分的一个更好的方法是说我给自己打分的*百分比*是与我共事过的所有其他人相比的。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-21T08:26:07.803

简短的回答是，您将自己与同龄人进行比较。也就是说，拿一个什么都不知道的人给0分，拿你个人认识的最好的程序员给10分——与这两个人相比，你如何看待自己？接近最佳？那将是一个8。中间？那将是5。

只是不要回答 0 或 10 并尽量保持客观。问题的重点不是将您评为程序员，而是在自我评估中评估您的技能。你的洞察力，就是这样。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-04-09T14:19:10.833

衡量一个优秀程序员的标准只有一个：LOC/hr。其他所有指标都是多余的：p

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-21T08:20:25.727

如果人们抱怨您的一些软件系统正在生产中时您的盘子里没有任何东西，那仅仅意味着您的系统设计良好且编码良好，并且与其他公司代码猴子不同，您没有 6-一个月的麻烦票队列让您忙碌。

如果是这种情况，请拍拍自己的后背。你做得很好。

请记住，软件在赚钱之前是没有完成的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-21T08:45:27.680

作为面试官，我会问这个问题，以了解候选人在表达自己方面的能力。

此外，它还显示了他们的自我批判性以及他们为自己和同事设定的标准。

它不仅告诉您他们对上帝/坏编程了解多少，还告诉您他们与客户互动以提取需求的程度以及他们与团队其他成员的匹配程度。

实际排名 0-10 的重要性要小得多。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-21T09:05:37.693

我认为重要的是不要高估语言知识的重要性。

程序员可以拥有的最伟大的技能是在解决问题和设计方面。当您开始实际使用您选择的语言时，几乎只是打字。（接受您希望使用您的问题解决和设计技能的一个领域是在您的代码布局中，以解决可读性和维护问题）

因此，衡量程序员的标准是他们将不同范围的想法或问题结合在一起以解决特定问题的能力。更多的技能可能只是增加可以利用的知识领域。

当然，这些都不能作为衡量你自己技能的指标——但其他人已经说过，无论如何这都是一个无法衡量的问题。:-)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-21T09:31:17.210

如果您想要一个声音字节作为答案：

> 当我开始专业工作时，我可能是 2，现在我会说我在 7 左右，但我每天都在努力达到 10。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-21T10:26:37.950

每分钟字数。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-21T12:44:44.873

在我看来，这是一个很难（在采访中甚至是**UNFAIR**）的问题！到目前为止，我一直在为三个不同的公司工作。我遇到的每一个地方都很少有优秀的程序员（比我好得多），很多优秀的程序员和一些应该变得更好的程序员。但不可能将它们归入从 0 到 10 的类别！

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-11-20T13:46:26.843

成为一名程序员有许多“善良的维度”；评估过程会因您对哪一个感兴趣而有所不同。这里有一些想法：

1.  技术熟练程度：去买一本关于你主要使用的语言的“食谱”式参考；对于书中讨论的每项任务，首先编写自己的解决方案，然后将其与书中提供的解决方案进行比较。
2.  开发速度：在[TopCoder](http://www.topcoder.com/)注册并解决他们存储的问题或参加实时竞赛。
3.  参与开发团队：为您信任的一位同事买午餐，并请他/她诚实地评价自己作为团队成员（例如“作为我们团队的一员，您认为我的主要优势和劣势是什么？ ？你会建议我做些什么来改进？”）[*如果你的团队中没有人可以去进行这样的讨论，他们可能**会**告诉你一些关于这个问题的信息。*]
4.  **沟通技巧：与不是**开发人员的同事坐下来，询问她/他对您当前项目的看法。注意; 考虑她/他的看法与您的看法是否相符。
5.  估算：每天早上记下（*仅供您自己查看*）您希望当天完成的工作以及您预计需要多长时间。在一天结束时，将该笔记与实际发生的事情进行比较，看看你离你有多远。要在这方面有所改进，请考虑造成差异的原因以及您认为哪些因素会使您的猜测更加准确。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-04-09T13:11:50.590

你总是可以与其他程序员竞争，看看你的思维能力有多好。您可以尝试 www.topcoder.com 或 www.spoj.pl 或 wwww.codechef.com 等网站，它们为您提供排名，您可以看到自己的表现如何。然而，这些纯粹是测试你的算法大脑，而不是你的编码方式。如果我被问到这个问题，我会说我是一个不断学习的人，并且相信犯错误和纠正错误，我不害怕自我批评我的代码，也不愿意让别人指出我的错误，你可以决定它的规模。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-04-09T13:18:59.090

定义 100% 的比例。

确定自己停留在 100.0 标记上。

确定其他开发人员和 IT 知名人士的职位。

计算你有多好。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-04-09T13:24:23.837

我被问过几次这个问题。当我刚从大学毕业时，我说 7/8。现在我已经工作了几年，我说 4，尽管我认为我现在已经无限好。

我不认为 0-10 是一条直线图。我更多地将其视为指数图。所以可以肯定的是，我仍然会说十分之四，但我相信我比 90% 的程序员要好。我看过他们的一些作品，这让我很害怕。我曾在银行软件 SSL 软件上工作过，但它确实有效，这很可怕。所以有 10% 的程序员比我好得多。我不确定我是否会赶上他们。在我看来，达到 4 很容易。很难达到 5。从 5 到 6 非常可怕。

值得 8、9 或 10 分的优秀程序员。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-06-29T15:41:03.920

经验。您获得的经验范围越广，您就“越好”。你只知道你经历过什么。

您已开发（或在其中成功工作且未损坏）的系统的规模和复杂性。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2010-03-01T08:57:04.277

这里非常有价值的讨论。爱它。我作为被访者，想就此作如下回答。

我想先分析一下这个问题。

分析取决于语言、框架、问题的性质等几件事，（我是 PHP 和 Wordpress 人，所以答案就在这种情况下）1\. 插件补丁工作，2\. 从头开始​​构建，3\. api 的使用

My common approach would be (in most cases) 1\. understand the given (or already built) scope of the functionality (relative to current problem statement) 2\. reckoning one of the best way to solve (there are definitely more than one way every time…) 3\. coding 4\. testing in real time scenarios (for performance tuning) 5\. in initial stages of any programmer, all four steps are recursive till getting final solution but as experience grows, 1 2 steps becomes recursive.

Aptitude of understanding fundamental philosophy of any language is imp. Rest is problem solving attitude.

And in PHP, I think I am 6.5.

# javascript - jQuery 的限制是什么？

> ID：110533
> 
> 赞同：12
> 
> 时间：2008-09-21T08:22:04.397
> 
> 标签：javascript, jquery, dom

Joel 总是说在使用 3rd 方库时要小心。从我最初的印象来看，jQuery 很棒。使用时应该注意什么？有什么限制？当我更多地使用它时，我以后会遇到什么头痛？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-21T08:40:32.713

我已经广泛使用它，我不得不承认，我还没有遇到任何严重的砖墙！我遇到了几个错误，我必须为自己找到一个快速修复，然后使用下一个 jQuery 版本进行额外测试以确保错误已得到正确处理，但这适用于任何第 3 方库，而不仅仅是 jQuery。

我认为这是一个很棒的库，我必须说，虽然关于 3rd 方库的建议有其优点，但在这个 Web 2.0 世界中，Javascript 的使用量猛增，浏览器之间存在如此多的小差异，拥有一个**维护良好的**库可以真正加快开发速度，因为它可以节省您必须自己完成所有跑腿工作的开销。

我想如果我要发出一个警告，那就是确保你不要过度使用它 - 虽然它通过抽象出你不需要担心的大量逻辑来真正加速 Javascript 开发，但总是存在风险您将开始编写效率低下的应用程序，因为您没有意识到您对浏览器的确切要求。因此，我建议您使用 Firebug 之类的工具进行大量分析，以检查引擎盖下发生了什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-23T13:04:32.220

**@mjc**

```
$("a tip")
.you()
.can()
.chain()
.stuff()
.like()
.this(); 
```

和/或定义一个变量，为它使用 jQuery 函数：

```
var $tip = $("a tip");
$tip.choo();
$tip.choo();
$tip.train(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-21T08:33:29.050

我在使用 jQuery 时遇到的一件事是，您最终会将很多项目链接在一起，如果您不小心，它往往会很快变得难以阅读。

我能想到的一个例子说明了这一点，在[John David Anderson 的博客上](http://www.johndavidanderson.net/blog/2007/10/19/firebug-where-am-i/)：

> 有一个人写了一个日志函数，这样你就可以找出 whereYou(are).whenYoureCoding().inThe(middleOf).a(jQuery).trainWreck()。
> 
> 我可以看到将事物链接在一起的力量，但我的猜测是，如果您需要在中途将事物记录到控制台，那么您可能已经走得太远了。从现在开始一周后，您可能也几乎没有机会阅读它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-21T09:32:16.537

jQuery 很棒——它可以做任何 javascript 可以做的事情，但速度更快，代码更少。它唯一的限制是 javascript 作为客户端脚本语言所固有的限制。像任何工具一样，可能会误用，但除非您的脚本需求非常基础，否则几乎没有理由不使用它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-21T09:42:21.927

我在阅读博客时遇到了以下内容。这并不是 jQuery 的真正限制，而是使用 jQuery 的 ASP.NET 开发人员经常犯的错误：

[http://encosia.com/2008/06/05/3-mistakes-to-avoid-when-using-jquery-with-aspnet-ajax/](http://encosia.com/2008/06/05/3-mistakes-to-avoid-when-using-jquery-with-aspnet-ajax/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-01T13:44:15.043

@BrilliantWater -**大多数人**不使用 jQuery 来“学习”，他们使用它是因为它使用起来更快、更容易，并且比自己创建所有方法带来的麻烦更少。整个“臃肿”的论点完全没有实际意义。jQuery 是最小的库之一，随着越来越多的人使用宽带，它的问题越来越少。

另外，由于 jQuery 由 GoogleCode 托管，它很可能已经在用户缓存中，因为有很多网站都在使用它！

jQuery 太棒了！我一直对自己说我需要学习另一个图书馆，但我真的不需要。jQuery 拥有我需要的一切。我知道它并不适合所有项目，但它肯定在大多数项目中占有一席之地！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-23T17:37:44.043

**@BrilliantWinter**

jQuery 一点也不臃肿。它是最小的图书馆之一。

它的所有功能都是 jQuery 对象的扩展，这意味着您可以分离您不使用的任何功能，并使库的占用空间甚至小于其默认大小（15kb、缩小和 Gzipped）。

jQuery - 以及所有其他库 - 提供了一个在所有 A 级浏览器中都相同的 API。这种抽象使您的代码更清晰，更不容易出错。

最后，jQuery 被主要的“玩家”使用。谷歌、戴尔、Digg 和 NBC 等公司都使用该库。这不仅是一个大的批准印章，也是一个保证 jQuery 的开发人员在修改库时非常小心，确保没有中断和引入错误。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-21T12:18:04.657

在编写任何有用的 javascript 时，我发现 jQuery 是必不可少的。也就是说，我正在开发的一个网站想要制作动画。我建议不要使用 flash，而是执行 jQuery 与 jQuery 很好地打包的相对“简单”的动画。我们使用了淡入淡出和幻灯片等。最后，浏览器处理的太多了（特别是 IE，但 FF 显示出压力的迹象），我们不得不将几乎所有的东西都缩回去。

使用 jQuery 编写代码和进行实验非常有趣。它有一个很棒的开发者社区，可以非常快速地回答问题。只是要小心不要太得意忘形！:)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-12-12T22:29:41.970

jQuery 唯一的缺点是它过于简单易用。你会得到一个非常低的新手使用它并做一些非常奇怪和接近智障的事情。除此之外，jQuery 很漂亮，并且由天才和他的智能程序员手下精心制作，确保跨浏览器质量，减少开发人员的大量工作。不能出错。如果你不喜欢 jQuery，那你就有点过分了，可能洗澡的频率不够。

**更新**

这是我的一个非常古老的答案。如果您使用 querySelector 和 MDN 参考，那么 jQuery 就真的不再需要了，因为浏览器在大多数情况下已经融合为相同的，当然除非您仍然生活在 IE8 死亡领域的要求中。jQuery 也存在于全球范围内，如果您正在构建现代 JavaScript，这很糟糕。**除了有一些不使用模块化语法库的老派插件之外，jQuery 在这一点上并不是真正有用。**

开始关注模块化 JavaScript，因为这是 jQuery 之后的趋势。注意es6/es2015。开始使用 React/React Native 或 Angular 2 来制作应用程序，因为它在某种程度上赶上了。

对不起，约翰·雷西格。在这一点上，人们就像“约翰谁？” 尽管他在我的书中仍然是个天才。不过，我希望他能摆脱自己的桂冠，让事情变得更好。

有趣的是事情如何变化。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-21T09:20:42.400

我是 jQuery 的忠实粉丝（我为它编写了[插件](http://code.google.com/p/jquery-simple-templates/)和[仪表板小部件](http://code.google.com/p/jquery-reference/)就证明了这一点）。

需要注意的一件事是[jQuery 支持哪些浏览器](http://docs.jquery.com/Browser_Compatibility)。文档站点目前似乎有问题。这是另一件需要注意的事情...... ;-)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-01T13:50:15.950

我已经使用它大约 6 个月了，除了我团队中一些速度较慢的开发人员不接受它（可能是因为一些较长的链的外观令人生畏）之外，我没有遇到任何问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-21T09:03:30.460

如果 jQuery 不适合，你总是可以考虑不同的框架。[这是mootools](http://mootools.net/)的一个例子。

> MooTools 是一个紧凑、模块化、面向对象的 JavaScript 框架，专为中高级 JavaScript 开发人员设计。它允许您使用其优雅、有据可查且连贯的 API 编写功能强大、灵活且跨浏览器的代码。

# c# - 防止 .NET “提升”局部变量

> ID：110536
> 
> 赞同：7
> 
> 时间：2008-09-21T08:24:04.703
> 
> 标签：c#, .net, lambda

我有以下代码：

```
string prefix = "OLD:";
Func<string, string> prependAction = (x => prefix + x);
prefix = "NEW:";
Console.WriteLine(prependAction("brownie")); 
```

因为编译器用闭包替换了前缀变量，所以“NEW:brownie”被打印到控制台。

有没有一种简单的方法可以防止编译器在仍然使用 lambda 表达式的同时提升前缀变量？我想要一种使我的 Func 工作方式与以下内容相同的方法：

```
Func<string, string> prependAction = (x => "OLD:" + x); 
```

我需要这个的原因是我想序列化生成的委托。如果前缀变量在不可序列化的类中，则上述函数将不会序列化。

目前我能看到的唯一解决方法是创建一个新的可序列化类，将字符串存储为成员变量并具有字符串前置方法：

```
string prefix = "NEW:";
var prepender = new Prepender {Prefix = prefix};
Func<string, string> prependAction = prepender.Prepend;
prefix = "OLD:";
Console.WriteLine(prependAction("brownie")); 
```

使用助手类：

```
[Serializable]
public class Prepender
{
    public string Prefix { get; set; }
    public string Prepend(string str)
    {
        return Prefix + str;
    }
} 
```

这似乎需要做很多额外的工作才能让编译器变得“愚蠢”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-21T09:39:54.803

我现在看到了根本问题。它比我最初想象的要深。基本上解决方案是在序列化之前修改表达式树，通过用常量节点替换所有不依赖于参数的子树。这显然被称为“功能化”。这里有一个[解释](http://social.msdn.microsoft.com/Forums/en-US/67f63b9a-ea44-4428-aea0-5dcdb61e918b/binding-lambdas-when-they-are-closures)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T09:44:01.173

再做一个关闭...

说，类似：

```
var prepend = "OLD:";

Func<string, Func<string, string>> makePrepender = x => y => (x + y);
Func<string, string> oldPrepend = makePrepender(prepend);

prepend = "NEW:";

Console.WriteLine(oldPrepend("Brownie")); 
```

由于我目前无法访问 VS，因此尚未对其进行测试，但通常，这就是我解决此类问题的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-21T08:28:32.227

Lambda 会自动“吸收”局部变量，恐怕这就是它们按定义工作的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-21T08:31:03.580

这是一个非常常见的问题，即变量被闭包无意中修改 - 一个更简单的解决方案就是：

```
string prefix = "OLD:";
var actionPrefix = prefix;
Func<string, string> prependAction = (x => actionPrefix + x);
prefix = "NEW:";
Console.WriteLine(prependAction("brownie")); 
```

如果您使用的是 resharper，它实际上会识别代码中可能导致此类意外副作用的位置 - 因此，如果文件是“全绿色”，您的代码应该没问题。

我认为在某些方面，如果我们有一些语法糖来处理这种情况会很好，所以我们可以把它写成一个单行，即

```
Func<string, string> prependAction = (x => ~prefix + x); 
```

某些前缀运算符会导致在构造匿名委托/函数之前评估变量的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-21T08:38:59.940

这里已经有几个答案解释了如何避免 lambda “提升”你的变量。不幸的是，这并不能解决您的根本问题。无法序列化 lambda 与“提升”变量的 lambda 无关。如果 lambda 表达式需要一个非序列化类的实例来计算，那么它不能被序列化是完全合理的。

根据您实际尝试做的事情（我无法从您的帖子中完全决定），解决方案是将 lambda 的不可序列化部分移到外面。

例如，而不是：

```
NonSerializable nonSerializable = new NonSerializable();
Func<string, string> prependAction = (x => nonSerializable.ToString() + x); 
```

采用：

```
NonSerializable nonSerializable = new NonSerializable();
string prefix = nonSerializable.ToString();
Func<string, string> prependAction = (x => prefix + x); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-21T09:11:07.837

我现在遇到了问题：lambda 引用了可能不可序列化的包含类。然后做这样的事情：

```
public void static Func<string, string> MakePrependAction(String prefix){
    return (x => prefix + x);
} 
```

（注意 static 关键字。）然后 lambda 不需要引用包含类。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-09-21T08:26:47.490

那这个呢

```
string prefix = "OLD:";
string _prefix=prefix;
Func<string, string> prependAction = (x => _prefix + x);
prefix = "NEW:";
Console.WriteLine(prependAction("brownie")); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-09-21T08:27:28.423

怎么样：

```
string prefix = "OLD:";
string prefixCopy = prefix;
Func<string, string> prependAction = (x => prefixCopy + x);
prefix = "NEW:";
Console.WriteLine(prependAction("brownie")); 
```

?

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-21T08:48:09.247

好吧，如果我们要在这里谈论“问题”，lambdas 来自函数式编程世界，在纯粹的函数式编程语言*中，没有赋值*，所以你的问题永远不会出现，因为前缀的值永远不会改变。*我知道 C# 认为从函数式程序中*导入想法很酷（因为 FP很酷！）但是很难让它变得漂亮，因为 C# 是并且将永远是一种命令式编程语言。

# c# - 任何熟悉 Winforms 的良好“粘性窗口”库的人？

> ID：110554
> 
> 赞同：1
> 
> 时间：2008-09-21T08:38:25.527
> 
> 标签：c#, .net, winforms, user-interface

我想重新创建窗口的粘性和捕捉，就像在 Winamp 中实现的那样。

基本前提是，当您拖动一个窗口并且它靠近另一个窗口时，它会捕捉到它并粘住。当你移动它时，两者将一起移动。

我需要它用于 MDI 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T09:13:00.467

你可以阅读这篇文章并尝试在你的程序中采用它：

[Sticky Windows - 如何使您的（顶级）表单粘贴到另一个或屏幕上](http://www.codeproject.com/KB/cs/stickywindows.aspx)

本文中介绍的类继承自*System.Windows.Forms.NativeWindow*，因此无需继承即可使您的类“可粘贴”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-04T12:10:11.020

我创建了一个[磁铁表单组件](https://github.com/edoreshef/magnet-winforms)，它还支持“胶合”表单的联合移动。我希望它有所帮助。

免责声明：我不知道它在 MDI 项目中的效果如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-01T01:14:22.050

看看这个：

[http://www.codeproject.com/KB/cs/eugsnapformextender.aspx](http://www.codeproject.com/KB/cs/eugsnapformextender.aspx)

# apache-flex - 你能推荐一个好的 FLEX 在线资源或书籍吗？

> ID：110558
> 
> 赞同：7
> 
> 时间：2008-09-21T08:44:09.477
> 
> 标签：apache-flex, flexbuilder

有没有关于这个主题的最喜欢的在线参考资料或好的入门和中级/高级书籍可以推荐给我？我是一名 java 开发人员，所以我正在寻找对我来说尽可能熟悉的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-21T09:09:38.573

**Essential ActionScript 3.0** , Colin Moock

**编程 Flex 3：使用 Adob​​e Flex 创建富 Internet 应用程序的综合指南**，作者：Chafic Kazoun、Joey Lott

另请查看 Flex.org 上的书籍部分

lynda.com 上有一些不错的视频教程

*   [http://www.flex.org](http://www.flex.org)
*   [http://www.adobe.com/devnet/flex](http://www.adobe.com/devnet/flex)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-21T12:36:17.360

以下是一些对我有很大帮助的链接：

[http://onflex.org/](http://onflex.org/)

[http://www.flexdevelopers.com/](http://www.flexdevelopers.com/)

[http://livedocs.adobe.com/flex/3/langref/](http://livedocs.adobe.com/flex/3/langref/)

[http://blog.flexexamples.com/](http://blog.flexexamples.com/)

[http://www.ifbin.com/](http://www.ifbin.com/)

（添加换行符）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T15:08:30.487

一个很棒的在线资源是 Flex Coders 邮件列表，它是可搜索的存档。

存档： http: [//www.mail-archive.com/flexcoders@yahoogroups.com/info.html](http://www.mail-archive.com/flexcoders@yahoogroups.com/info.html)

火狐搜索插件： http: [//flexed.wordpress.com/2006/11/20/flex-coders-search-plugin-for-ie7-and-firefox-2/](http://flexed.wordpress.com/2006/11/20/flex-coders-search-plugin-for-ie7-and-firefox-2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T00:57:21.133

[http://oreilly.com/catalog/9780596529857/](http://oreilly.com/catalog/9780596529857/)

我不会给它一个热烈的评论，但它绝对适合初学者作为参考。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T05:54:19.127

我真的从 Flexible Rails 那里得到了很好的介绍：

[http://www.flexiblerails.com/](http://www.flexiblerails.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-24T17:08:54.887

我不会称它们为很好的参考，但如果您是视频学习者，并且想要一些出售的教程，请查看[lynda.com](http://movielibrary.lynda.com/html/modListing.asp?pid=205)（注意：我只能推荐他们的 adobe 视频）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-24T21:09:08.927

如果您是 Flex 新手，Total Training Flex 3 视频教程是入门的好方法。它们涵盖了各种有用的主题，具有良好的学习曲线。

[http://www.totaltraining.com/](http://www.totaltraining.com/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-24T13:59:33.727

我从**Adob​​e Flex 3 Developer's Guide**中获得了很大的收获，该指南以 PDF 格式巨大且免费提供而闻名。一个鲜为人知的事实：**您可以订购印刷品。**

我在博客上写了

[http://williampower.vox.com/library/post/learning-flex-for-book-learners-what-should-i-read.html](http://williampower.vox.com/library/post/learning-flex-for-book-learners-what-should-i-read.html)

这套书似乎只能通过 Adob​​e 的在线商店购买。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-01T07:42:25.657

很久没有读完一本如何编程的书籍了，但事实上我最近在*[学习 Flex 3：了解](http://oreilly.com/catalog/9780596517328/)*Alaric Cole (O'Reilly) 的 Rich Internet Applications 时就是这样做的。该文本是为初​​学者编写的，但它在侧边框中涵盖了一些高级主题（例如，Flex 布局引擎）。我特别喜欢这些例子是自然而然的，而不是“在第 2 章中我们将建立一个地址簿，我们将在第 3 章中将其变成一个令人兴奋的电子商务场所，到第 4 章将成为一个成熟的事件管理应用程序。”

此外，图形漂亮且色彩丰富，但仍然没有压倒性的浮华。不，写作风格和书籍设计不如内容本身重要，但我认为对于一本初学者书籍，我的主要目标是尽可能地让我坚持到最后，并且这就是我在这个标题中发现的。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-11-24T14:26:15.890

“[官方”弹性手册](http://westes.github.io/flex/manual/)在线。

# c# - 如何将泛型属性作为参数传递给函数？

> ID：110562
> 
> 赞同：7
> 
> 时间：2008-09-21T08:47:03.727
> 
> 标签：c#, generics

我需要编写一个接收属性作为参数的函数并执行它的getter。

如果我需要传递一个函数/委托，我会使用：

```
delegate RET FunctionDelegate<T, RET>(T t);

void func<T, RET>(FunctionDelegate function, T param, ...)
{
    ...
    return function.Invoke(param);
} 
```

是否有类似的方法来定义属性，以便我可以在函数代码中调用它的 getter 和/或 setter？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2010-11-09T10:08:07.350

您还可以编写如下内容：

```
static void Method<T, U>(this T obj, Expression<Func<T, U>> property)
        {
            var memberExpression = property.Body as MemberExpression;
            //getter
            U code = (U)obj.GetType().GetProperty(memberExpression.Member.Name).GetValue(obj, null);
            //setter
            obj.GetType().GetProperty(memberExpression.Member.Name).SetValue(obj, code, null);
        } 
```

和调用示例：

```
DbComputerSet cs = new DbComputerSet();
cs.Method<DbComputerSet, string>(set => set.Code); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-21T09:22:02.537

您可以使用反射，您可以获取 get/set 访问器的 MethodInfo 对象并调用它的 Invoke 方法。

该代码示例假定您同时拥有 get 和 set 访问器，如果您想在生产代码中使用它，您确实必须添加错误处理：

例如，要获取对象 obj 的属性 Foo 的值，您可以编写：

```
value = obj.GetType().GetProperty("Foo").GetAccessors()[0].Invoke(obj,null); 
```

设置它：

```
obj.GetType().GetProperty("Foo").GetAccessors()[1].Invoke(obj,new object[]{value}); 
```

因此，您可以将 obj.GetType().GetProperty("Foo").GetAccessors()[0] 传递给您的方法并执行它的 Invoke 方法。

一种更简单的方法是使用匿名方法（这将在 .net 2.0 或更高版本中工作），让我们使用您的代码示例的略微修改版本：

```
delegate RET FunctionDelegate<T, RET>(T t);

void func<T, RET>(FunctionDelegate<T,RET> function, T param, ...)
{
    ...
    return function(param);
} 
```

对于一个名为 Foo 的 int 类型的属性，它是 SomeClass 类的一部分：

```
SomeClass obj = new SomeClass();
func<SomeClass,int>(delegate(SomeClass o){return o.Foo;},obj); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-21T08:50:56.073

属性只是方法的语法糖。

我不认为你可以修改一个属性，使它成为一些“你可以调用它的吸气剂”的实体。

但是，您可以创建一个方法 GetPropertyValue() 并将其作为委托传递。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-21T09:11:25.713

@Dror 助手，

恐怕你不能那样做。编译器生成 get_PropertyName 和 set_PropertyName 方法，但不使用反射就无法访问它们。IMO 你能做的最好的事情是创建接受**System.Reflection.ProperyInfo**和**System.Object**参数并返回 propInfo.GetValue(obj, null);的函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-21T09:32:34.337

回复：阿库的回答：

然后，您必须先获取该属性信息。似乎“使用反射”是更难的 C# 问题的标准答案，但反射产生的代码并不那么漂亮，难以维护。Dror，为什么不创建一个为您读取属性的委托？这是一个简单的单线，可能是解决您的问题的最快和最漂亮的解决方案。

# tabs - 有人知道选项卡式 FTP 客户端吗？

> ID：110574
> 
> 赞同：0
> 
> 时间：2008-09-21T08:58:01.033
> 
> 标签：tabs, ftp-client

我是唯一需要同时查看多个目录的人吗（通常在同一个远程服务器上，但有时也在其他服务器上）？断开连接和重新连接让我发疯。

最好是一个免费的工具，但我已经到了我会尝试任何东西的阶段！

Firefox 中可以有多个 FireFTP 选项卡吗？或者，我曾考虑过使用[WinTabber——](http://www.wintabber.com/)我在大约 12 个月前将它用于多个 PuTTY 会话，但感觉有点笨拙。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T09:02:30.587

[目录作品](http://www.gpsoft.com.au/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-13T13:13:59.843

**Firefox 中的FireFTP**很好地完成了这项工作。我已经使用了大约 2 个小时，它在将 FileZilla 送到垃圾箱的过程中速度很快！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-21T09:24:19.177

[CrossFTP](http://www.crossftp.com/)：适用于 Windows、Mac OSX 和 Linux 的客户端。下载在[这里](http://www.crossftp.com/download.htm)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-13T13:16:52.583

我使用[TotalCommander](http://www.ghisler.com/)作为我的默认 Windows 文件管理器。它也处理 FTP，并且它是标签式的。它还处理 tar 文件和许多其他我非常喜欢的东西。真是太棒了。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-21T09:35:07.047

[FileZilla](http://filezilla-project.org/) 是我最喜欢的 FTP 客户端。

# php - htmlspecialchars 和 mysql_real_escape_string 是否可以防止我的 PHP 代码被注入？

> ID：110575
> 
> 赞同：116
> 
> 时间：2008-09-21T08:58:26.370
> 
> 标签：php, security, xss, sql-injection

今天早些时候，有人问了一个关于[Web 应用程序中的输入验证策略](https://stackoverflow.com/questions/110458/what-percentage-of-my-time-will-be-spent-in-user-input-verfication-during-web-d)的问题。

在撰写本文时，最佳答案建议`PHP`仅使用`htmlspecialchars`and `mysql_real_escape_string`。

我的问题是：这总是足够吗？还有更多我们应该知道的吗？这些功能在哪里分解？

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2008-09-21T08:58:43.497

当涉及到数据库查询时，请始终尝试使用准备好的参数化查询。`mysqli`和`PDO`库支持这一点。这比使用转义函数（例如`mysql_real_escape_string`.

是的，`mysql_real_escape_string`实际上只是一个字符串转义函数。它不是灵丹妙药。它将做的只是转义危险字符，以便它们可以安全地用于单个查询字符串。但是，如果您不事先清理输入，那么您将容易受到某些攻击向量的攻击。

想象一下下面的 SQL：

```
$result = "SELECT fields FROM table WHERE id = ".mysql_real_escape_string($_POST['id']); 
```

您应该能够看到这很容易被利用。
想象一下`id`参数包含常见的攻击向量：

```
1 OR 1=1 
```

那里没有要编码的危险字符，因此它将直接通过转义过滤器。离开我们：

```
SELECT fields FROM table WHERE id= 1 OR 1=1 
```

这是一个可爱的 SQL 注入向量，可以让攻击者返回所有行。或者

```
1 or is_admin=1 order by id limit 1 
```

产生

```
SELECT fields FROM table WHERE id=1 or is_admin=1 order by id limit 1 
```

这允许攻击者在这个完全虚构的示例中返回第一个管理员的详细信息。

虽然这些功能很有用，但必须小心使用。您需要确保所有 Web 输入都经过一定程度的验证。在这种情况下，我们看到我们可以被利用，因为我们没有检查我们用作数字的变量是否实际上是数字。在 PHP 中，您应该广泛使用一组函数来检查输入是否为整数、浮点数、字母数字等。但是当涉及到 SQL 时，最要注意准备好的语句的值。如果上面的代码是一个准备好的语句，那么它是安全的，因为数据库函数会知道这`1 OR 1=1`不是一个有效的文字。

至于`htmlspecialchars()`. 这本身就是一个雷区。

PHP 中存在一个真正的问题，它有一系列不同的与 html 相关的转义函数，并且没有明确的指导来说明哪些函数做什么。

首先，如果您在 HTML 标记中，那么您就遇到了真正的麻烦。看着

```
echo '<img src= "' . htmlspecialchars($_GET['imagesrc']) . '" />'; 
```

我们已经在一个 HTML 标记中，所以我们不需要 < 或 > 来做任何危险的事情。我们的攻击向量可能只是`javascript:alert(document.cookie)`

现在生成的 HTML 看起来像

```
<img src= "javascript:alert(document.cookie)" /> 
```

攻击直接通过。

它变得更糟。为什么？因为`htmlspecialchars`（当这样调用时）只编码双引号而不是单引号。所以如果我们有

```
echo "<img src= '" . htmlspecialchars($_GET['imagesrc']) . ". />"; 
```

我们的邪恶攻击者现在可以注入全新的参数

```
pic.png' onclick='location.href=xxx' onmouseover='... 
```

给我们

```
<img src='pic.png' onclick='location.href=xxx' onmouseover='...' /> 
```

在这些情况下，没有灵丹妙药，您只需要自己清理输入即可。如果您尝试过滤掉不良字符，您肯定会失败。采取白名单方法，只让好的字符通过。查看[XSS 备忘单](http://ha.ckers.org/xss.html)，了解有关向量的多样性的示例

即使您`htmlspecialchars($string)`在 HTML 标签之外使用，您仍然容易受到多字节字符集攻击向量的攻击。

最有效的方法是使用 mb_convert_encoding 和 htmlentities 的组合，如下所示。

```
$str = mb_convert_encoding($str, 'UTF-8', 'UTF-8');
$str = htmlentities($str, ENT_QUOTES, 'UTF-8'); 
```

即使这样，IE6 也容易受到攻击，因为它处理 UTF 的方式。但是，您可以回退到更有限的编码，例如 ISO-8859-1，直到 IE6 的使用率下降。

有关多字节问题的更深入研究，请参阅[https://stackoverflow.com/a/12118602/1820](https://stackoverflow.com/a/12118602/1820)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-21T09:10:00.897

除了 Cheekysoft 的出色回答：

*   是的，它们会保证您的安全，但前提是它们的使用绝对正确。不正确地使用它们，你仍然很容易受到攻击，并且可能有其他问题（例如数据损坏）
*   请改用参数化查询（如上所述）。您可以通过例如 PDO 或通过 PEAR DB 等包装器使用它们
*   确保magic_quotes_gpc 和magic_quotes_runtime 始终处于关闭状态，并且永远不会意外打开，即使是短暂打开。这些是 PHP 开发人员为防止安全问题（破坏数据）而进行的早期且严重误导的尝试

防止 HTML 注入（例如跨站点脚本）并没有真正的灵丹妙药，但如果您使用库或模板系统来输出 HTML，您可能能够更轻松地实现它。阅读文档以了解如何适当地逃避事情。

在 HTML 中，需要根据上下文对事物进行不同的转义。对于放入 Javascript 中的字符串尤其如此。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-22T17:26:11.773

我肯定会同意上述帖子，但我有一件小事要补充以回复 Cheekysoft 的回答，具体来说：

> 当涉及到数据库查询时，请始终尝试使用准备好的参数化查询。mysqli 和 PDO 库支持这一点。这比使用 mysql_real_escape_string 等转义函数要安全得多。
> 
> 是的，mysql_real_escape_string 实际上只是一个字符串转义函数。它不是灵丹妙药。它将做的只是转义危险字符，以便它们可以安全地用于单个查询字符串。但是，如果您不事先清理输入，那么您将容易受到某些攻击向量的攻击。
> 
> 想象一下下面的 SQL：
> 
> $result = "从表中选择字段 id = ".mysql_real_escape_string($_POST['id']);
> 
> 您应该能够看到这很容易被利用。想象一下 id 参数包含常见的攻击向量：
> 
> 1 或 1=1
> 
> 那里没有要编码的危险字符，因此它将直接通过转义过滤器。离开我们：
> 
> 从表中选择字段，其中 id = 1 或 1=1

我编写了一个快速的小函数，我把它放在我的数据库类中，它将删除任何不是数字的东西。它使用 preg_replace，所以可能有一些更优化的功能，但它在紧要关头工作......

```
function Numbers($input) {
  $input = preg_replace("/[^0-9]/","", $input);
  if($input == '') $input = 0;
  return $input;
} 
```

所以而不是使用

> $result = "SELECT fields FROM table WHERE id = ".mysqlrealescapestring("1 OR 1=1");

我会用

> $result = "SELECT fields FROM table WHERE id = ".Numbers("1 OR 1=1");

它会安全地运行查询

> 从表中选择字段，其中 id = 111

当然，这只是阻止它显示正确的行，但我认为这对于试图将 sql 注入您的站点的人来说不是一个大问题；）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-22T17:38:54.440

这个难题的一个重要部分是上下文。如果您引用查询中的每个参数，则将“1 OR 1=1”作为 ID 发送的人不是问题：

```
SELECT fields FROM table WHERE id='".mysql_real_escape_string($_GET['id'])."'" 
```

结果是：

```
SELECT fields FROM table WHERE id='1 OR 1=1' 
```

这是无效的。由于您正在转义字符串，因此输入无法脱离字符串上下文。我已经对 MySQL 5.0.45 版本进行了测试，并且对整数列使用字符串上下文不会导致任何问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-10-04T21:32:26.360

```
$result = "SELECT fields FROM table WHERE id = ".(INT) $_GET['id']; 
```

运行良好，在 64 位系统上效果更好。请注意您的系统在处理大量数字方面的限制，但对于数据库 id，这在 99% 的情况下都非常有效。

您也应该使用单个函数/方法来清理您的值。即使这个函数只是 mysql_real_escape_string() 的包装器。为什么？因为有一天，当发现您首选的数据清理方法的漏洞利用时，您只需将其更新到一个地方，而不是在系统范围内查找和替换。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2017-03-17T19:02:46.927

为什么，哦，为什么，你**不会**在你的 sql 语句中包含用户输入的引号？似乎很傻不！在你的 sql 语句中包含引号会使 "1 or 1=1" 徒劳无功，不是吗？

所以现在，你会说，“如果用户在输入中包含引号（或双引号）怎么办？”

好吧，很容易解决这个问题：只需删除用户输入的引号。例如：`input =~ s/'//g;`。现在，无论如何，在我看来，用户输入将得到保护......

# sharepoint - 如何在 WSS 3.0 中允许同一文档库的不同文件夹中的不同内容类型？

> ID：110584
> 
> 赞同：2
> 
> 时间：2008-09-21T09:03:58.460
> 
> 标签：sharepoint, wss

我有一个包含大约 50 种可用内容类型的文档库。此文档库分为几个文件夹。当用户单击文件夹中的“新建”按钮时，将提供所有可用的内容类型。我需要根据文件夹限制内容类型。例如，在“Legal”文件夹中，只需要包含法律文件的内容类型。我尝试使用 SPFolder 的 UniqueContentTypeOrder 属性，但它不起作用。怎么了？

private void CreateFolder(SPFolder parent, string name) { SPFolder z = parent.SubFolders.Add(name); 列表 col = new List();

```
 foreach (SPContentType type in myDocumentLibrary.ContentTypes)
        {
            if (ContentTypeMatchesName(name, type))
            {
                col.Add(type);
            }
        }
        z.UniqueContentTypeOrder = col;
        z.Update();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T10:20:31.053

您看过 Ton Stegeman 的[这篇](http://www.tonstegeman.com/Blog/Lists/Posts/Post.aspx?List=70640fe5%2D28d9%2D464f%2Db1c9%2D91e07c8f7e47&ID=56)文章吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-21T11:19:10.477

我认为 Magnus 的答案正是您所需要的，但您为什么要在一个库中存储多种内容类型和文档类型？拥有多个文档库不是更有意义吗？这将使它更容易管理。

# sql - SQL - 你如何比较 CLOB

> ID：110587
> 
> 赞同：9
> 
> 时间：2008-09-21T09:04:24.107
> 
> 标签：sql, triggers, db2, compare, clob

在 DB2 触发器中，我需要比较 CLOB 字段的值。就像是：

```
IF OLD_ROW.CLOB_FIELD != UPDATED_ROW.CLOB_FIELD 
```

但是“！=”不适用于比较 CLOB。

有什么比较方法？

**编辑添加：**

如果在更新期间更改了 Clob 字段，我的触发器需要执行一些操作。这就是我需要比较触发器代码中的 2 个 CLOB 的原因。 **我正在寻找一些关于如何做到这一点的详细信息**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-05T20:28:41.397

在 Oracle 10g 中，您可以使用 DBMS_LOB.compare() API。

例子：

```
select * from table t where dbms_lob.compare(t.clob1, t.clob2) != 0 
```

完整的 API：

```
DBMS_LOB.COMPARE (
   lob_1            IN BLOB,
   lob_2            IN BLOB,
   amount           IN INTEGER := 4294967295,
   offset_1         IN INTEGER := 1,
   offset_2         IN INTEGER := 1)
  RETURN INTEGER;

DBMS_LOB.COMPARE (
   lob_1            IN CLOB  CHARACTER SET ANY_CS,
   lob_2            IN CLOB  CHARACTER SET lob_1%CHARSET,
   amount           IN INTEGER := 4294967295,
   offset_1         IN INTEGER := 1,
   offset_2         IN INTEGER := 1)
  RETURN INTEGER; 

DBMS_LOB.COMPARE (
   lob_1            IN BFILE,
   lob_2            IN BFILE,
   amount           IN INTEGER,
   offset_1         IN INTEGER := 1,
   offset_2         IN INTEGER := 1)
  RETURN INTEGER; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-21T17:33:40.700

计算 clob 的 md5（或其他）哈希值，然后比较它们。初始计算会很慢，但比较起来又快又容易。如果您的大部分数据不经常更改，这可能是一个好方法。

计算 md5 的一种方法是通过触发器中的 java 语句。将这些保存在同一个表中（如果可能）或构建一个简单的辅助表。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-22T06:56:51.910

Iglekott 的想法很好，但有一点需要注意：

如果您的数据可能受到攻击，请小心使用哈希比较。目前，为特定的 MD5 值生成哈希冲突在计算上是不可行的，但可以生成两个不同的输入来生成相同的 MD5（因此不会触发您的代码）。也可以生成两个具有*相同前缀的*不同字符串，这些字符串哈希到相同的值。

如果这种攻击会导致您的系统的完整性受到损害，并且这是一个问题，那么您需要探索其他选项。最简单的方法是简单地切换散列函数，SHA-2 没有当前已知的漏洞。

如果这不是问题 - 见鬼，请使用 CRC。您不会在这里寻求加密安全。如果这些东西被安装在智能炸弹上，请不要使用加密弱功能，'好吧？:-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-17T15:07:46.263

md5 想法可能是最好的，但另一种选择是创建一个特殊触发器，该触发器仅在您的 CLOB 字段更新时触发。

根据[语法图](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.admin.doc/doc/r0000931.htm)，您可以将触发器定义为：

```
CREATE TRIGGER trig_name AFTER UPDATE OF CLOB_FIELD 
//trigger body goes here 
```

这是假设您的应用程序（或更新表的任何人）足够聪明，仅在对 clob 字段进行更改时才更新 CLOB 字段，而不是每次更新表时。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-17T00:10:06.363

如果 CLOB 为 32K 或更少，您可以将它们转换为 VARCHAR，这允许比较、LIKE 和各种 SQL 字符串函数。

否则，您可能需要考虑添加一列来包含 CLOB 的散列，并更改应用程序以使该散列在 CLOB 更新时保持最新。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-21T11:19:53.393

我相信不可能在 CLOB 字段上使用这类运算符，因为它们的存储方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T21:05:06.660

如果该特定列被更新，只需声明触发器即可触发。

```
create trigger T_TRIG on T 
before update of CLOB_COL
... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-09T03:34:34.767

生成哈希值并比较它们是恕我直言的最佳方法。

这是未经测试的代码：

```
...
declare leftClobHash integer;
declare rightClobHash integer;
set leftClobHash = (
    SELECT DBMS_UTILITY.GET_HASH_VALUE(OLD_ROW.CLOB_FIELD,100,1024) AS HASH_VALUE 
    FROM SYSIBM.SYSDUMMY1);
set rightClobHash = (
    SELECT DBMS_UTILITY.GET_HASH_VALUE(UPDATED_ROW.CLOB_FIELD,100,1024) AS HASH_VALUE 
    FROM SYSIBM.SYSDUMMY1);

IF leftClobHash != rightClobHash
... 
```

请注意，您需要 DBMS_UTILITY 模块的 EXECUTE 权限。您可以在以下链接中找到有关提供的 SQL PL 代码的更多信息。

*   声明变量：[http ://www.sqlpl-guide.com/DECLARE](http://www.sqlpl-guide.com/DECLARE)
*   设置变量值：[http ://www.sqlpl-guide.com/SET](http://www.sqlpl-guide.com/SET)
*   生成哈希：[http ://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.sql.rtn.doc%2Fdoc%2Fr0055167.html](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.sql.rtn.doc%2Fdoc%2Fr0055167.html)
*   有关 DBMS_UTILITY 模块的更多信息：[http ://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.sql.rtn.doc%2Fdoc%2Fr0055155.html](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.sql.rtn.doc%2Fdoc%2Fr0055155.html)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-11-05T20:32:45.693

DB2 是否使用`!=`不等于？ANSI SQL 标准使用`<>`不等于。

# c# - 使用 NHibernate 的用户定义字段

> ID：110591
> 
> 赞同：0
> 
> 时间：2008-09-21T09:06:16.817
> 
> 标签：c#, nhibernate, user-defined-fields

我需要将用户定义的字段功能添加到使用 NHibernate 的 asp.net c# 应用程序。

用户必须能够“动态地”在系统中的多个对象中添加和删除字段，最好不要出现任何系统停机时间。

一个重要的限制是用户不能更改数据库架构 - 也就是说，我可以添加支持此功能所需的任何字段/表，但是当用户添加或删除字段时，他无法更改数据库架构.

编辑：我还必须按用户定义字段的值进行排序和过滤。

我知道如何在 c#/SQL 中使用键/值表执行此操作，但我不知道如何使用 NHibrenate 执行此操作（包括按用户定义的字段进行过滤和排序）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-21T09:43:23.000

听起来您只想添加一个名称/值属性表。

有一个表定义名称（例如 ID、FIELDNAME、DESCRIPTION）和另一个定义值（例如 ID、NAME_FK、OBJECT_FK、VALUE）。

让用户向 NAME 表添加新行以添加新属性，并通过向 VALUE 表中添加行、外键到 NAME 表以及您想要附加到的任何对象来添加值。

然后，您的视图可以查询以 OBJECT_FK 为键的 VALUE 表，并使用 NAME_FK 来引用属性名称。

编辑：NHibernate 不会将新值视为实际属性，但如果您将它们映射为集合，您应该能够使用 ICriteria 进行查询和过滤：

```
IList<MyProp> props = session
  .CreateCriteria(typeof(MyProp))
  .Add(Expression.Eq("ObjectName", "Widget"))
  .Add(Expression.Eq("Name", "Size"))
  .List<MyProp>(); 
```

# java - 如何对扩展 SqlMapClientDaoSupport 的 DAO 进行单元测试

> ID：110592
> 
> 赞同：5
> 
> 时间：2008-09-21T09:06:52.947
> 
> 标签：java, spring, ibatis, easymock

Spring DA 有助于编写 DAO。当使用iBATIS作为持久化框架，扩展SqlMapClientDaoSupport时，应该为DAO设置一个SqlMapClient mock，但是我做不到。SqlMapClientTemplate 不是一个接口，EasyMock 不能为它创建一个模拟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-21T10:57:43.243

DAO 和单元测试不能很好相处！在不包含任何业务逻辑且专注于数据库访问的组件中模拟任何内容是没有意义的。您应该尝试编写集成测试。看看 spring 参考文档，第 8.3 章：[http ://static.springframework.org/spring/docs/2.5.x/reference/testing.html](http://static.springframework.org/spring/docs/2.5.x/reference/testing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-26T13:46:21.867

这个确切的原因就是为什么我不从`SqlMapClientDaoSupport`. 相反，我将依赖项注入`SqlMapClientTemplate`（类型为 interface `SqlMapClientOperations`）。这是一个 Spring 2.5 示例：

```
@Component
public class MyDaoImpl implements MyDao {

    @Autowired
    public SqlMapClientOperations template;

    public void myDaoMethod(BigInteger id) {
        int rowcount = template.update("ibatisOperationName", id);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-06-16T11:33:47.157

正如@Banengusk 建议的那样 - 这可以通过[Mockito](http://code.google.com/p/mockito/)来实现。但是，重要的是要确定您的 DAO 将使用`SqlMapClientTemplate`包装您的 mock的 Spring `SqlMapClient`。事实上，`SqlMapClientTemplate`将调用委托给`SqlMapSession`IBatis 层。

因此需要一些额外的模拟设置：

```
mockSqlMapSession = mock(SqlMapSession.class);
mockDataSource = mock(DataSource.class);

mockSqlMapClient = mock(SqlMapClient.class);
when(mockSqlMapClient.openSession()).thenReturn(mockSqlMapSession);
when(mockSqlMapClient.getDataSource()).thenReturn(mockDataSource);

dao = new MyDao();
dao.setSqlMapClient(mockSqlMapClient); 
```

然后我们可以像这样验证行为：

```
Entity entity = new EntityImpl(4, "someField");
dao.save(entity);

ArgumentCaptor<Map> params = ArgumentCaptor.forClass(Map.class);
verify(mockSqlMapSession).insert(eq("insertEntity"), params.capture());
assertEquals(3, params.getValue().size());
assertEquals(Integer.valueOf(4), params.getValue().get("id"));
assertEquals("someField", params.getValue().get("name"));
assertNull(params.getValue().get("message")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-21T17:35:55.407

试试[Mockito](http://code.google.com/p/mockito/)。它允许模拟类，而不仅仅是接口。

# content-management-system - 不是门户系统的 CMS

> ID：110629
> 
> 赞同：3
> 
> 时间：2008-09-21T09:31:40.953
> 
> 标签：content-management-system, repost, portal-system

这是一个[未正确回答的问题](https://stackoverflow.com/questions/107494/cms-without-front-end)的转贴——对此感到抱歉。

我们正在寻找一个价格合理的[CMS](http://en.wikipedia.org/wiki/Content_management_system)，带有源代码，我们可以在其中放弃门户系统。有一些臭名昭著的例子，它们的成本太高了：[Methode](http://www.eidosmedia.com/Feature_Update/MethodePortalServer.html)、[Broadvision](http://www.broadvision.com)、[Microsoft CMS](http://www.microsoft.com/cmserver/)。

在许多系统中，门户部分与后端的耦合过于紧密，无法做到这一点。基本上[Joomla](http://www.joomla.org)、[Drupal](http://drupal.org)、[phpNuke](http://phpnuke.org)、[dotNetNuke](http://www.dotnetnuke.com)、[Umbraco](http://umbraco.org)都是我们不想要的例子。

我们想要一个可以存储具有版本控制、工作流等的异构信息的后台系统。此信息应该是静态可发布的（到文件、xml 等...）。此外，我们希望有一组 API 用于访问自定义前端中的信息。

我们会在大量网站中使用这个系统。平台并不重要，因为我们在多个堆栈上开发站点。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-21T10:10:59.720

我的一个工作伙伴向[SilverStripe](http://www.silverstripe.com/)发誓——基本上它是一个应用程序框架，碰巧附有一个 CMS。很大的灵活性，但您可以免费获得一些 CMS 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-02T22:22:37.020

查看[EPiServer](http://www.episerver.com)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-21T09:36:24.983

我喜欢创造性地命名为[django-cms](http://django-cms.org/)

它......基本的，从某种意义上说，所有这些都是页面，仅此而已:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-21T10:00:08.640

看看[Typo3](http://typo3.org)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-21T10:10:43.090

试试aplaws+ [http://www.aplaws.org.uk/home/index.php](http://www.aplaws.org.uk/home/index.php)
一个非常灵活的系统，它完全符合您的要求

```
We want a back office system that can store heterogeneous information with versioning, workflow and so on. 
```

它具有工作流程、文档版本控制、细粒度用户管理等。并且非常可定制。不过，它的设置/配置不适合胆小的人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-21T10:37:43.557

我不知道满足您需求的特定 CMS，但如果您想比较 CMS 框架，有一个比较网站[CMS Matrix](http://www.cmsmatrix.org/)，我们发现它非常有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-21T11:17:04.197

看看[混凝土 5](http://concrete5.org/)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-02T22:17:11.727

[Nuxeo 5](http://www.nuxeo.org/)可能是您正在寻找的。[它是一个用于构建ECM](http://en.wikipedia.org/wiki/Enterprise_content_management) （企业内容管理）应用程序的开源平台，如果您愿意，您可以编写自己的*富客户端应用程序。*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-02T22:27:16.683

在我的新工作中，我们使用的是 SiteCore 6。它根本不是预制/门户驱动的。它不是开源的，但所有的类都作为 API 公开，而且它的特性和可扩展性非常丰富。

顺便说一句，我不明白 Umbraco 是如何被视为具有紧密绑定的门户系统的。我对它进行了评估并耸了耸肩，但更多的是因为它缺乏合身性和润色性（而且我讨厌在弹出式、固定尺寸的浏览器窗口中工作），尽管我印象深刻的是它具有抽象和对文章类型模板的完全支持，等等，我从来没有注意到任何与门户相关的东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-28T15:38:03.207

听起来像是我们一直在努力的，[Seagull CMS](http://trac.seagullproject.org/wiki/Modules/Cms) - 让我知道您的想法。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-24T10:22:59.780

你有没有调查过[http://www.alfresco.com](http://www.alfresco.com)我自己正在评估它。它首先是一个文档存储库，具有版本控制和工作流程。它有一个 CMS 模块。

希望这可以帮助。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-14T18:05:57.603

我想您会发现 Alfresco 为您完成了这项工作。正如其他人提到的，它是一个解耦的开源 Java 内容管理系统。解耦允许您构建您喜欢的任何前端网站。

干杯

# asp.net - 如何更改 IIS 6 中发送的 http 标头信息

> ID：110632
> 
> 赞同：1
> 
> 时间：2008-09-21T09:32:15.087
> 
> 标签：asp.net, iis

目前，IIS 在 ASP.NET 页面上发送昨天减去 1 小时的过期 http 标头。如何将其更改为 60 秒？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T09:57:15.680

您还可以将 content-expires 页面指令添加到 ASP.NET 页面（用于不同的过期计划）：

@输出缓存

或者您可以在代码中设置标题（可能是基页类）：

`Response.Cache.SetExpires(DateTime.Now.AddSeconds(60));`

一篇关于缓存的好文章可以在 MSDN 上找到：

[http://support.microsoft.com/?scid=kb%3Ben-us%3B323290&x=11&y=6](http://support.microsoft.com/?scid=kb%3Ben-us%3B323290&x=11&y=6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T09:50:24.013

转到 IIS 管理 -> -> 属性 -> HTTP 标头选项卡 -> 单击启用内容过期，并将其设置为您想要的任何内容。

# macos - `hcitool` 是否有任何 OS X 等价物？

> ID：110661
> 
> 赞同：12
> 
> 时间：2008-09-21T09:51:57.940
> 
> 标签：macos, bluetooth

我想为 Mac 编写一些快速脚本来使用蓝牙设备（扫描等）。在 linux 下我可能会使用`hcitool`, 或 python bluez 库。

Mac 有哪些工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-21T11:23:39.780

`hcitool`[是BlueZ](http://www.bluez.org/)附带的命令，它特定于 Linux 内核。

不幸的是，我没有 Mac OSX，所以我无法对此进行测试，但据我所知，[Darwin](http://en.wikipedia.org/wiki/Darwin_(operating_system))与 BSD 有很多共同之处，所以他们都使用[Netgraph 框架](http://www.freebsd.org/cgi/man.cgi?query=netgraph&sektion=4)来开发蓝牙驱动程序。有一些关于如何[在 FreeBSD 中使用蓝牙](http://www.freebsd.org/doc/en/books/handbook/network-bluetooth.html)的信息，我认为它们可能会有所帮助，至少作为一个起点。FreeBSD 中的`hcitool`等价物是[`hccontrol`](http://www.freebsd.org/cgi/man.cgi?query=hccontrol).

# optimization - Intel Atom 的 GCC 优化标志

> ID：110674
> 
> 赞同：28
> 
> 时间：2008-09-21T09:59:31.463
> 
> 标签：optimization, gcc, intel-atom

我正在为 Intel Atom 处理器开发性能关键型应用程序。

这个 CPU 最好的 gcc 优化标志是什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-09-21T12:17:38.700

有一个很酷的框架，叫做[Acovea（通过进化算法分析编译器选项）](https://github.com/Acovea/libacovea "ACOVEA（Analysis of Compiler Options via Evolutionary Algorithm）实现了一种遗传算法来找到")，由 GCC 黑客之一的 Scott Rober Ladd 编写。它是一个遗传/进化算法框架，试图通过自然选择优化特定代码段的 GCC 优化标志。

它的工作原理是这样的：您编写一小段基准代码（它*确实*必须很小，因为它将被重新编译和执行数千次），代表您要优化的较大程序的性能特征。然后，Acovea 随机构建了几十个不同的 GCC 命令行，并使用它们中的每一个编译和运行您的基准测试。然后允许这些命令行中最好的“交配”和“繁殖”新的“孩子”，这些“孩子”（希望）从他们的“父母”那里继承最好的“基因”。这个过程重复了几十“代”，直到出现一组稳定的命令行标志。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-11-14T12:51:30.710

GCC 4.5 将包含 -march=atom 和 -mtune=atom 选项。

来源： http: [//gcc.gnu.org/gcc-4.5/changes.html](http://gcc.gnu.org/gcc-4.5/changes.html)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-12-19T01:53:18.240

我有一个脚本可以自动为您的 CPU 和编译器组合选择适当的标志。我刚刚更新了它以支持 Intel Atom：

[http://www.pixelbeat.org/scripts/gcccpuopt](http://www.pixelbeat.org/scripts/gcccpuopt)

更新：我之前为 Atom 指定了 -march=prescott，但进一步研究表明 Atom 符合 merom ISA，因此 -march=core2 更合适。但是请注意，Atom 是有序内核，最后一个是原始的 pentium。因此，-mtune=pentium 也可能更好。不幸的是，我没有要测试的 Atom。如果有人可以对以下之间的差异进行基准测试，我将不胜感激：

```
-march=core2 -mfpmath=sse -O3
-march=core2 -mtune=pentium -mfpmath=sse -O3 
```

更新：这里有几篇关于 Atom 低级优化的好文章：

*   [http://virtualdub.org/blog/pivot/entry.php?id=286](http://virtualdub.org/blog/pivot/entry.php?id=286)
*   [http://virtualdub.org/blog/pivot/entry.php?id=287](http://virtualdub.org/blog/pivot/entry.php?id=287)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-11-21T08:03:06.647

好吧，Gentoo wiki 为 prescott 声明：

[http://en.gentoo-wiki.com/wiki/Safe_Cflags/Intel#Atom_N270](http://en.gentoo-wiki.com/wiki/Safe_Cflags/Intel#Atom_N270)

CHOST="i686-pc-linux-gnu"

CFLAGS="-march=prescott -O2 -pipe -fomit-frame-pointer"

CXXFLAGS="${CFLAGS}"

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-09-09T17:30:45.603

来自英特尔，[MID 入门](http://software.intel.com/en-us/articles/getting-started-with-icc-for-the-mid/ "开始使用 MID")

使用 GCC 编译时，有几个推荐使用的标志：

*   -O2 或 -O1：O2 标志优化速度，而 -O1 标志优化大小
*   -msse3
*   -三月=核心2
*   -mfpmath=sse

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-18T22:57:11.990

就像奔腾 4：

```
-march=prescott -O2 -pipe -fomit-frame-pointer 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T22:54:46.663

我不知道 GCC 是否有任何特定于 Atom 的优化标志，但 Atom 内核应该与原始 Pentium 非常相似，并且非常重要地添加了 MMX/SSE/SSE2/SSE3/SSSE3 指令集。当然，这些只有在您的代码是浮点数或 DSP-heavy 时才会产生显着差异。

也许你可以尝试：

gcc -O2 -march=pentium -mmmx -msse -msse2 -msse3 -mssse3 -mfpmath=sse

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-26T20:32:49.127

这里有一些博客的交叉授粉......我真正希望的是一个Firefox-compiled-for-atom基准......

地址：http://ivoras.sharanet.org/blog/tree/2009-02-11.optimizing-for-atom.html

“事实证明，gcc 似乎在使用 -mtune=native 时做得非常不错，而且 mtune=generic 是可以接受的。最大的收益（在这个数学密集的基准测试中）来自使用 SSE 进行数学计算，但即使他们被 pentium4 调优破坏。

“最快和最慢优化之间的差异是 21%。使用 March 而不是 mtune 的影响可以忽略不计（没有足够的差异来判断它是否有帮助）。

“（我包含 k6 仅供参考 - 我知道 Atom 没有 3dnow）

“后期更新：调整 k8（使用 SSE 和 O3）产生的最佳分数略高，为 182。”

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-10-01T05:46:15.480

i686 最接近。不要去core2。

GCC 4.1 -O3 -march=i686 GCC 4.3 -O3 -march=native

GCC 4.1 -O4 -ffast-math GCC 4.3 -O4 -ffast-math

[http://macles.blogspot.com/2008/09/intel-cc-compiler-gcc-and-intel-atom.html](http://macles.blogspot.com/2008/09/intel-cc-compiler-gcc-and-intel-atom.html)

# usrp - USRP2：A/D 转换器数量

> ID：110680
> 
> 赞同：1
> 
> 时间：2008-09-21T10:01:54.000
> 
> 标签：usrp

如果只能使用一个 RX 子卡，为什么 USRP2 板上有两个 A/D 转换器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-21T10:03:09.177

大多数子板进行正交下变频并产生模拟 I & Q。对于这些子板，我们使用 1 个 A/D 用于 I，另一个用于 Q。

# c - 您使用哪些编码技术来优化 C 程序？

> ID：110684
> 
> 赞同：32
> 
> 时间：2008-09-21T10:04:37.863
> 
> 标签：c, optimization

几年前，我参加了一个小组，该小组正在面试一个相对高级的嵌入式 C 程序员职位的候选人。

我问的标准问题之一是关于优化技术。我很惊讶有些候选人没有答案。

所以，为了给后代整理一份清单——在优化 C 程序时，您通常使用哪些技术和结构？

速度和尺寸优化的答案都被接受。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-09-21T11:42:37.160

第一要务——不要过早优化。花时间仔细优化一段代码却发现它并不是您认为的瓶颈，这种情况并不少见。或者，换一种说法“在你让它快速之前，让它工作”

在优化代码之前调查是否有任何优化算法的选项。通过优化一个糟糕的算法比优化代码更容易找到性能的改进，然后当你改变算法时才把它扔掉。

并首先弄清楚为什么需要优化。你想达到什么目的？例如，如果您正在尝试改善对某些事件的响应时间，请确定是否有机会更改执行顺序以最小化时间关键区域。例如，当试图改善对某些外部中断的响应时，您可以在事件之间的死区时间做任何准备吗？

一旦你决定需要优化代码，你会优化哪一点？使用分析器。将注意力（首先）集中在最常用的区域上。

那么你能对这些领域做些什么呢？

*   尽量减少条件检查。检查条件（例如循环的终止条件）是没有花在实际处理上的时间。条件检查可以通过循环展开等技术最小化。
*   在某些情况下，条件检查也可以通过使用函数指针来消除。例如，如果您正在实现一个状态机，您可能会发现将各个状态的处理程序实现为小函数（具有统一的原型）并通过存储下一个处理程序的函数指针来存储“下一个状态”比使用带有在单个 case 语句中实现的处理程序代码的大型 switch 语句。YMMV。
*   最小化函数调用。函数调用通常会带来上下文保存的负担（例如，将寄存器中包含的局部变量写入堆栈，保存堆栈指针），因此如果您不必进行调用，则可以节省时间。一种选择（如果您正在优化速度而不是空间）是使用内联函数。
*   如果函数调用是不可避免的，则最小化传递给函数的数据。例如，传递指针可能比传递结构更有效。
*   在优化速度时，选择适合您平台的本机大小的数据类型。例如，在 32 位处理器上，处理 32 位值可能比 8 位或 16 位值更有效。（旁注 - 值得检查编译器是否正在执行您认为的操作。我曾遇到过一些情况，我发现我的编译器坚持对 8 位值进行 16 位算术运算，并进行所有的 to 和 from 转换和他们一起去）
*   查找可以预先计算的数据，并在初始化期间或（更好）在编译时计算。例如，在实现 CRC 时，您可以即时计算 CRC 值（直接使用多项式），这对于大小来说非常有用（但对性能来说很糟糕），或者您可以生成所有中间值的表格 - 这是更快的实施，以损害大小。
*   本地化您的数据。如果您经常处理大量数据，您的处理器可能能够通过将其全部存储在缓存中来加快处理速度。并且您的编译器可能能够使用适合更多本地化数据的较短指令（例如，使用 8 位偏移而不是 32 位的指令）
*   同样，本地化您的功能。出于同样的原因。
*   找出您可以对正在执行的操作做出的假设，并找到利用它们的方法。例如，在 8 位平台上，如果您对 32 位值执行的唯一操作是增量，您可能会发现通过专门为此目的内联（或创建宏）可以比编译器做得更好，而不是使用普通的算术运算。
*   避免昂贵的指令——除法就是一个典型的例子。
*   “register”关键字可以是您的朋友（尽管希望您的编译器对您的寄存器使用有一个很好的了解）。如果您要使用“注册”，您可能必须先声明要“注册”的局部变量。
*   与您的数据类型保持一致。如果您正在对混合数据类型（例如，shorts 和 ints、double 和 float）进行算术运算，那么编译器将为每个不匹配添加隐式类型转换。这是浪费的 CPU 周期，可能没有必要。

上面列出的大多数选项都可以用作正常练习的一部分，而不会产生任何不良影响。但是，如果您真的想获得最佳性能： - 调查可以（安全地）禁用错误检查的位置。不建议这样做，但它会为您节省一些空间和周期。- 在汇编程序中手工制作部分代码。这当然意味着您的代码不再是可移植的，但如果这不是问题，您可能会在这里找到节省。请注意，将数据移入和移出您可以使用的寄存器可能会浪费时间（即满足编译器的寄存器使用）。另请注意，您的编译器本身应该做得很好。（当然，也有例外）

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-09-22T11:49:01.020

正如其他人所说：**配置文件，配置文件配置文件。**

至于实际技术，我认为尚未提及的一种技术：

**冷热数据分离**：保持在 CPU 的缓存中**非常重要。**帮助做到这一点的一种方法是将数据结构拆分为经常访问（“热”）和很少访问（“冷”）的部分。

一个例子：假设你有一个看起来像这样的客户结构：

```
struct Customer
{
    int ID;
    int AccountNumber;
    char Name[128];
    char Address[256];
};

Customer customers[1000]; 
```

现在，让我们假设您想访问很多 ID 和 AccountNumber，但不想访问姓名和地址。你要做的就是把它分成两部分：

```
struct CustomerAccount
{
    int ID;
    int AccountNumber;
    CustomerData *pData;
};

struct CustomerData
{
    char Name[128];
    char Address[256];
};

CustomerAccount customers[1000]; 
```

这样，当您遍历“客户”数组时，每个条目只有 12 个字节，因此您可以在缓存中容纳更多条目。如果您可以将其应用于渲染引擎的内部循环等情况，这将是一个巨大的胜利。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2008-09-21T10:07:20.180

我最喜欢的技术是使用好的分析器。如果没有一个好的配置文件告诉你瓶颈在哪里，没有任何技巧和技术可以帮助你。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2008-09-21T10:07:48.417

我遇到的最常见的技术是：

*   循环展开
*   循环优化以获得更好的缓存预取（即在 M 个周期中执行 N 次操作，而不是 NxM 单次操作）
*   数据对齐
*   内联函数
*   手工制作的 asm 片段

至于一般性建议，大部分已经响起：

*   选择更好的算法
*   使用分析器
*   如果不能提高 20-30% 的性能，就不要优化

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-21T10:20:55.140

对于低级优化：

1.  来自 ffmpeg 的 START_TIMER/STOP_TIMER 宏（用于测量任何代码的时钟级精度）。
2.  Oprofile，当然，用于分析。
3.  大量手工编码的程序集（只需在 x264 的 /common/x86 目录上执行 wc -l，然后记住大部分代码都是模板化的）。
4.  仔细编码；更短的代码通常更好。
5.  智能低级算法，比如我写的 64 位比特流写入器，它只使用一个 if 而不使用 else。
6.  [显式写入组合](http://x264dev.multimedia.cx/?p=32)。
7.  考虑到处理器的重要怪异方面，例如[英特尔的缓存线拆分问题](http://x264dev.multimedia.cx/?p=8)。
8.  寻找可以无损或几乎无损地进行提前终止的情况，其中提前终止检查的成本远低于人们从中获得的速度。
9.  实际上内联程序集用于更适合 x86 SIMD 单元的任务，例如中位数计算（需要编译时检查以支持 MMX）。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-21T10:08:34.733

*   首先，使用更好/更快的算法。优化设计缓慢的代码是没有意义的。
*   在优化速度时，以内存换速度：查找预计算值表、二叉树、编写更快的自定义系统调用实现......
*   以速度换内存时：使用内存压缩

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-21T10:20:34.657

避免使用堆。对相同大小的对象使用 obstacks 或 pool-allocator。将生命周期短的小东西放入堆栈。alloca 仍然存在。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-21T10:21:29.883

未成熟的优化是万恶之源！;)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-09-21T10:31:10.747

由于我的应用程序在设计上通常不需要太多 CPU 时间，因此我专注于我的二进制文件在磁盘和内存中的大小。我主要做的是寻找静态大小的数组，并用动态分配的内存替换它们，这值得稍后释放内存的额外努力。为了减少二进制文件的大小，我寻找在编译时初始化的大数组并将初始化放到运行时。

```
char buf[1024] = { 0, };
/* becomes: */
char buf[1024];
memset(buf, 0, sizeof(buf)); 
```

这将从二进制文件 .DATA 部分中删除 1024 个零字节，并将在运行时在堆栈上创建缓冲区并用零填充它。

编辑：哦，是的，我喜欢缓存东西。它不是特定于 C 的，但取决于您缓存的内容，它可以极大地提高性能。

PS：请在您的清单完成后告诉我们，我很好奇。;)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-09-22T10:55:01.103

如果可能，请与 0 进行比较，而不是与任意数字进行比较，尤其是在循环中，因为与 0 的比较通常使用单独的、更快的汇编程序命令来实现。

例如，如果可能，写

```
for (i=n; i!=0; --i) { ... } 
```

代替

```
for (i=0; i!=n; ++i) { ... } 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-10-16T21:44:16.553

这些天来，优化中最重要的事情是：

*   尊重缓存 - 尝试以简单的模式访问内存，不要为了好玩而展开循环。使用数组而不是具有大量指针追逐的数据结构，对于少量数据可能会更快。并且不要做太大的事情。
*   避免延迟 - 如果其他计算立即依赖于它们，请尽量避免分裂和缓慢的东西。依赖于其他内存访问（即 a[b[c]]）的内存访问是不好的。
*   避免不可预测性 - 许多具有不可预测条件或引入更多延迟的条件的 if/else 真的会让您感到困惑。这里有很多有用的无分支数学技巧，但它们会增加延迟，并且只有在你真的需要它们时才有用。否则，只需编写简单的代码，不要有疯狂的循环条件。

不要为涉及复制和粘贴代码（如循环展开）或手动重新排序循环的优化而烦恼。编译器在这方面通常比你做得更好，但它们中的大多数都不够聪明，无法撤消它。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-09-21T12:20:24.590

基础/一般：

*   没有问题时不要优化。
*   了解您的平台/CPU...
*   ...彻底了解
*   了解您的 ABI
*   让编译器进行优化，只是帮助它完成这项工作。

一些实际有帮助的事情：

选择大小/内存：

*   使用位域存储布尔值
*   通过覆盖联合重用大型全局数组（小心）

选择速度（小心）：

*   尽可能使用预先计算好的表
*   将关键功能/数据放在快速存储器中
*   为常用的全局变量使用专用寄存器
*   计数为零，零标志是免费的

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-09-21T12:36:12.600

很难概括...

*   数据结构：

    *   根据使用情况拆分数据结构非常重要。常见的结构是保存基于流控制访问的数据。这种情况可以显着降低缓存使用率。
    *   考虑缓存行大小和预取规则。
    *   重新排序结构的成员以从您的代码中获得对它们的顺序访问
*   算法：

    *   花时间思考您的问题并找到正确的算法。
    *   了解您选择的算法的局限性（对 10 个要排序的元素进行基数排序/快速排序可能不是最佳选择）。
*   低级：

    *   至于最新的处理器，不建议展开体积​​较小的循环。处理器为此提供了自己的检测机制，并将使其流水线的整个部分短路。
    *   相信硬件预取器。当然，如果您的数据结构设计良好；）
    *   关心您的 L2 缓存行未命中。
    *   尽量减少应用程序的本地工作集，因为处理器倾向于每个内核的缓存更小（C2D 享受每个内核最大 3MB，而 iCore7 将提供每个内核最大 256KB + 8MB 共享给所有内核四核芯片。）。

最重要的是：尽早测量，经常测量并且永远不会做出假设，将您的思考和优化基于分析器检索到的数据（请使用[PTU](http://softwarecommunity.intel.com/articles/eng/1437.htm)）。

另一个提示，性能是应用程序成功的关键，应该在设计时考虑，并且应该有明确的性能目标。

这远非详尽无遗，但应该提供一个有趣的基础。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-09-21T10:35:19.227

还有一点没有提到：

*   了解您的需求：不要针对不太可能或永远不会发生的情况进行优化，专注于最大的收益

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-09-21T11:44:02.913

在我工作的大多数嵌入式系统上，没有分析工具，所以说使用分析器很好，但不是很实用。

速度优化的第一条规则是—— **找到你的关键路径**。
通常你会发现这条路并没有那么长，也没有那么复杂。很难以通用的方式说如何优化它，这取决于你在做什么以及你有能力做什么。例如，您通常希望避免在关键路径上使用 memcpy，因此您需要使用 DMA 或优化，但是如果您的硬件没有 DMA 怎么办？如果不重写它，请检查 memcpy 实现是否是最好的。
根本不要在嵌入式中使用动态分配，但如果出于某种原因这样做，请不要在关键路径中使用。
正确组织您的线程优先级，正确的是真正的问题，并且显然是系统特定的。
我们使用非常简单的工具来分析瓶颈，存储时间戳和索引的简单宏。在 90% 的情况下，很少 (2-3) 次运行会找到您花费时间的地方。
最后一个是**代码审查** ，非常重要。在大多数情况下，我们在代码审查期间避免性能问题是非常有效的方法:)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-09-21T16:42:30.793

1.  衡量绩效。
2.  使用现实和重要的基准。请记住[“对于小 N 来说一切都很快”](http://www.codinghorror.com/blog/archives/000957.html)。
3.  使用分析器查找热点。
4.  减少动态内存分配、磁盘访问、数据库访问、网络访问和用户/内核转换的数量，因为这些往往是热点。
5.  衡量绩效。

此外，您应该衡量性能。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-09-21T10:06:52.443

收集代码执行的配置文件可以让你完成 50% 的工作。其他 50% 负责分析这些报告。

此外，如果您使用 GCC 或 VisualC++，您可以使用“配置文件引导优化”，编译器将从以前的执行中获取信息并重新安排指令以使 CPU 更快乐。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2008-09-21T11:24:23.583

内联函数！受到分析爱好者的启发，我分析了我的一个应用程序，发现了一个小函数，可以对 MP3 帧进行一些位移。它在我的应用程序中进行了大约 90% 的函数调用，因此我将其设为内联，瞧——该程序现在使用的 CPU 时间是以前的一半。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-10-02T12:17:14.900

有时你必须决定你追求的是更多的空间还是更快的速度，这将导致几乎相反的优化。例如，为了充分利用空间，您可以[打包](http://msdn.microsoft.com/en-us/library/aa273913(VS.60).aspx)结构，例如#pragma pack(1)，并在结构中使用[位字段](http://msdn.microsoft.com/en-us/library/ewwyfdbe%28VS.71%29.aspx)。为了获得更高的速度，您可以打包以符合处理器偏好并避免位域。

另一个技巧是通过 realloc 为增长的数组选择正确的大小调整算法，或者更好地根据您的特定应用程序编写自己的堆管理器。不要假设编译器附带的那个是每个应用程序的最佳解决方案。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2009-09-17T21:21:02.203

如果有人对这个问题没有答案，那可能是他们知道的不多。

也可能是他们知道很多。我知道很多（恕我直言：-），如果我被问到这个问题，我会问你：你为什么认为这很重要？

问题是，任何关于性能的先验概念，如果它们没有受到特定情况的影响，那么根据定义，它们都是猜测。

**我认为了解编码技术以提高性能很重要，但我认为知道不使用它们**更重要，直到诊断表明存在问题以及问题是什么。

现在我要自相矛盾地说，如果你这样做，你将学习如何识别导致麻烦的设计方法，以便避免它们，对于新手来说，这听起来像是过早的优化。

举一个具体的例子，[这是一个经过优化的 C 应用程序](https://stackoverflow.com/questions/926266/performance-optimization-strategies-of-last-resort/927773#927773)。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-11-04T12:32:27.357

有时谷歌是最好的算法优化工具。当我遇到一个复杂的问题时，稍微搜索一下就会发现一些拥有博士学位的人已经找到了这个问题和一个众所周知的问题之间的映射，并且已经完成了大部分工作。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2009-09-18T12:06:29.457

很棒的清单。我将添加一个我在上面列表中没有看到的提示，在某些情况下可以以最小的成本产生巨大的优化。

*   绕过链接器

    如果您有一些应用程序分为两个文件，比如 main.c 和 lib.c，在许多情况下，您只需`\#include "lib.c"`在 main.c 中添加一个，这将完全绕过链接器并允许对编译器进行更有效的优化。

优化文件之间的依赖关系可以达到同样的效果，但更改的成本通常更高。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-09-21T15:07:20.630

I would recommend optimizing using more efficient algorithms and not do it as an afterthought but code it that way from the start. Let the compiler work out the details on the small things as it knows more about the target processor than you do.

For one, I rarely use loops to look things up, I add items to a hashtable and then use the hashtable to lookup the results.

For example you have a string to lookup and then 50 possible values. So instead of doing 50 strcmps, you add all 50 strings to a hashtable and give each a unique number ( you only have to do this once ). Then you lookup the target string in the hashtable and have one large switch with all 50 cases ( or have functions pointers ).

When looking up things with common sets of input ( like css rules ), I use fast code to keep track of the only possible solitions and then iterate thought those to find a match. Once I have a match I save the results into a hashtable ( as a cache ) and then use the cache results if I get that same input set later.

My main tools for faster code are:

hashtable - for quick lookups and for caching results

qsort - it's the only sort I use

bsp - for looking up things based on area ( map rendering etc )

# gnuradio - 带宽 USRP2

> ID：110692
> 
> 赞同：2
> 
> 时间：2008-09-21T10:08:58.993
> 
> 标签：gnuradio

我可以使用 USRP2 处理的最大带宽是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T10:09:55.370

USRP2 A/D 以 100MS/s I & Q 采样被抽取到 25MS/s 复数。我们使用 16 位 I&Q。这在 USRP2 可以承受的千兆以太网上达到约 800Mbit/s，没问题。

# java - 使用哪个持续集成库？

> ID：110712
> 
> 赞同：6
> 
> 时间：2008-09-21T10:20:31.537
> 
> 标签：java, comparison, continuous-integration, agile, cruisecontrol

我在上一个项目中使用**Cruise Control**作为 CI 框架。对其他一些工具有什么建议吗？

（并不是说我发现缺少 CruiseControl，只是想知道是否有人进行了一些比较）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-21T10:33:38.620

我们在[Hudson](http://hudson-ci.org/)方面取得了巨大的成功。它易于安装和配置，具有大量插件和良好的 Web 用户界面。checkstyle 和 cobertura 代码覆盖插件是我们使用的两个插件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-21T10:35:57.350

JetBrain 的[TeamCity](http://www.jetbrains.com/teamcity/)非常酷。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-21T11:19:13.627

我们使用[竹子](http://www.atlassian.com/software/bamboo/)。

有关各种主要 CI 服务器的相当广泛的功能矩阵，请查看：[http ://confluence.public.thoughtworks.org/display/CC/CI+Feature+Matrix](http://confluence.public.thoughtworks.org/display/CC/CI+Feature+Matrix)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-21T10:23:37.740

由于我已经从 Ant 切换到 Maven 作为我的构建系统，[Continuum](http://continuum.apache.org/)是显而易见的选择。它非常干净，并提供了我需要的所有功能。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-21T13:12:30.407

我赞同彼得对[哈德逊](http://hudson-ci.org)的建议。Continuum 和 Hudson 都非常易于设置和使用（与 CruiseControl 相比），但 Hudson 提供了更多功能。如果你有兴趣，我[之前写过](http://blog.uncommons.org/2008/05/09/why-are-you-still-not-using-hudson/)我为什么会选择 Hudson。

[如果您可以忍受免费专业许可证](http://www.jetbrains.com/teamcity/buy/buy.jsp#professional)的限制（最多 20 个用户和 20 个构建配置），TeamCity 具有[预先测试的提交功能](http://www.jetbrains.com/teamcity/delayed_commit.html)，也是一个不错的选择。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-21T11:07:41.410

我们使用与 maven 完美配合的 LuntBuild。

此外，Lunbuild 为访问控制提供了很好的粒度。我没有使用太多 CI 工具，但这是我的公司从 Cruise Control 转向 Luntbuild 的主要原因。我们想让客户端访问构建服务器，以便他们可以提取每日构建等，但我们不能让他们访问其他客户端的构建。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-27T01:22:27.963

我们使用对我们有用的 TFS 2008，因为我们几乎是一个全 MS 环境......但是，我也使用过[FinalBuilder](http://www.finalbuilder.com/)，它具有比我见过的任何其他东西更多的功能，并且在环境中特别有用您使用混合技术的地方（例如多个 SCM）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-21T11:09:15.757

TFS 2008 相当不错。它在 TFS 构建中内置了持续集成。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-21T12:54:23.807

TFS 2008 相当不错

CruiseControl 和 Nant 也是如此

看看[CI 工厂](http://www.cifactory.org/joomla/)，它需要最少的配置

# .net - 学习.Net微框架有哪些好的微控制器开发板？

> ID：110736
> 
> 赞同：4
> 
> 时间：2008-09-21T10:32:00.573
> 
> 标签：.net, embedded, .net-micro-framework

不包括微框架模拟器；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T10:36:18.723

一个众所周知的是[Tahoe](http://devicesolutions.net/Products/Tahoe/tabid/55/Default.aspx)。其他的是

*   [http://www.sjjmicro.com/EDK.html](http://www.sjjmicro.com/EDK.html)
*   [http://www.ghielectronics.com/details.php?id=107&sid=108](http://www.ghielectronics.com/details.php?id=107&sid=108)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-03-24T22:03:41.800

我推荐[http://www.netduino.com](http://www.netduino.com)它与 Arduino 引脚兼容，因此可以使用各种硬件屏蔽，请参见[http://www.sparkfun.com](http://www.sparkfun.com)。价格在 35 美元到 60 美元之间也非常合理（Plus 型号支持以太网和 SD 卡，而 Arduino 兼容性没有变化。

**注意：** Netduino/Netduino Plus 在 3.3V 下工作，但可以承受 5V 电压，每个引脚上的电流为 8mA，而不是 Arduino 上的 20mA。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-25T14:13:47.117

带有许多与 Arduino 兼容的盾牌的**[Domino](http://www.tinyclr.com/hardware/1/fez-domino)**和**[Panda价格实惠且得到很好的支持。](http://www.ghielectronics.com/catalog/product/135/)**

# c# - 将标记转换为 HTML 的正则表达式

> ID：110749
> 
> 赞同：7
> 
> 时间：2008-09-21T10:40:42.487
> 
> 标签：c#, html, regex, markdown

您将如何编写正则表达式将标记转换为 HTML？例如，您将键入以下内容：

```
This would be *italicized* text and this would be **bold** text 
```

然后需要将其转换为：

```
This would be <em>italicized</em> text and this would be <strong>bold</strong> text 
```

非常类似于 stackoverflow 使用的 mark down 编辑控件。

**澄清**

对于它的价值，我正在使用 C#。此外，这些是我想要允许的**唯一真正的标签/降价。**正在转换的文本量将少于 300 个字符左右。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-21T11:02:22.233

最好的方法是找到移植到您使用的任何语言的 Markdown 库版本（您没有在问题中指定）。

* * *

既然您已经澄清您只希望处理 STRONG 和 EM，并且您正在使用 C#，我建议您查看[Markdown.NET](http://www.aspnetresources.com/blog/markdown_announced.aspx)以了解这些标签是如何实现的。如您所见，它实际上是两个表达式。这是代码：

```
private string DoItalicsAndBold (string text)
{
    // <strong> must go first:
    text = Regex.Replace (text, @"(\*\*|__) (?=\S) (.+?[*_]*) (?<=\S) \1", 
                          new MatchEvaluator (BoldEvaluator),
                          RegexOptions.IgnorePatternWhitespace | RegexOptions.Singleline);

    // Then <em>:
    text = Regex.Replace (text, @"(\*|_) (?=\S) (.+?) (?<=\S) \1",
                          new MatchEvaluator (ItalicsEvaluator),
                          RegexOptions.IgnorePatternWhitespace | RegexOptions.Singleline);
    return text;
}

private string ItalicsEvaluator (Match match)
{
    return string.Format ("<em>{0}</em>", match.Groups[2].Value);
}

private string BoldEvaluator (Match match)
{
    return string.Format ("<strong>{0}</strong>", match.Groups[2].Value);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-21T10:46:54.097

单个正则表达式是行不通的。每个文本标记都有自己的 html 翻译器。更好地了解现有转换器是如何实现的，以了解它是如何工作的。

[http://en.wikipedia.org/wiki/Markdown#See_also](http://en.wikipedia.org/wiki/Markdown#See_also)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-21T11:51:34.347

我不具体了解 C#，但在 perl 中它将是：

```
\\\*\\\*(.*?)\\\*\\\*/
\< bold\>$1\<\/bold\>/g 
```

```
\\\*(.\*?)\\\*/
\< em\>$1\<\/em\>/g 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-21T12:01:10.937

我遇到了以下建议不要这样做的[帖子。](http://kore-nordmann.de/blog/do_NOT_parse_using_regexp.html)就我而言，虽然我希望保持简单，但我想我会根据[jop 的](https://stackoverflow.com/users/11830/jop)建议发布这个，以防其他人想要这样做。

# python - 报告生成

> ID：110760
> 
> 赞同：3
> 
> 时间：2008-09-21T10:55:46.243
> 
> 标签：python, report

我正在使用 TurboGears 编写一个网络应用程序，在该应用程序中，用户必须能够生成不同的报告。报告所需的数据存储在数据库 (MySQL) 中。报告必须以易于打印的 html 文档或 pdf 文件的形式返回。

我以前使用 jasper 和 iReport 来创建文档，但如果我可以避免启动 Java 来创建报告，我会很高兴。

理想情况下，我想以一种易于阅读的标记语言指定报告，然后只使用生成报告的某种库来提供模板数据。

我很乐意接受有关如何生成这些报告的任何提示！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-21T14:40:06.157

[Pod](http://appyframework.org/pod.html)是我最喜欢的解决您问题的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T12:45:46.277

[您可以使用ReportLab](http://www.reportlab.com/opensource/)工具包从 Python 构建一些精美的 PDF 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-21T11:40:55.917

部分答案：您正在寻找的易于阅读的格式可能是[DocBook](http://www.docbook.org/)。从那里很容易转到 PDF、html、RTF 等。

# c# - 如何从十进制转换为T？

> ID：110763
> 
> 赞同：4
> 
> 时间：2008-09-21T10:58:17.877
> 
> 标签：c#

我在 NumbericUpDown 控件上构建了一个包装器。包装器是通用的，可以支持 int? 和双？

我想编写一个方法来执行以下操作。

```
public partial class NullableNumericUpDown<T> : UserControl where T : struct
{
  private NumbericUpDown numericUpDown;

  private T? Getvalue()
  {
    T? value = numericUpDown.Value as T?; // <-- this is null :) thus my question
    return value;
  }} 
```

当然十进制和双精度之间没有转换？还是整数？所以我需要使用某种转换方式。我想避免 switch 或 if 表达式。

你会怎么做？

为了澄清我的问题，我提供了更多代码......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-21T11:03:20.670

目前还不清楚你将如何使用它。如果你想要双重创建 GetDouble() 方法，对于整数 - GetInteger()

编辑：

好的，现在我想我了解您的用例了

尝试这个：

```
using System;
using System.ComponentModel;

static Nullable<T> ConvertFromString<T>(string value) where T:struct
{
    TypeConverter converter = TypeDescriptor.GetConverter(typeof(T));
    if (converter != null && !string.IsNullOrEmpty(value))
    {
        try
        {
            return (T)converter.ConvertFrom(value);
        }
        catch (Exception e) // Unfortunately Converter throws general Exception
        {
            return null;
        }
    }

    return null;
}

...

double? @double = ConvertFromString<double>("1.23");
Console.WriteLine(@double); // prints 1.23

int? @int = ConvertFromString<int>("100");
Console.WriteLine(@int); // prints 100

long? @long = ConvertFromString<int>("1.1");
Console.WriteLine(@long.HasValue); // prints False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T00:36:43.290

```
public class FromDecimal<T> where T : struct, IConvertible
{
    public T GetFromDecimal(decimal Source)
    {
        T myValue = default(T);
        myValue = (T) Convert.ChangeType(Source, myValue.GetTypeCode());
        return myValue;
    }
}

public class FromDecimalTestClass
{
    public void TestMethod()
    {
        decimal a = 1.1m;
        var Inter = new FromDecimal<int>();
        int x = Inter.GetFromDecimal(a);
        int? y = Inter.GetFromDecimal(a);
        Console.WriteLine("{0} {1}", x, y);

        var Doubler = new FromDecimal<double>();
        double dx = Doubler.GetFromDecimal(a);
        double? dy = Doubler.GetFromDecimal(a);
        Console.WriteLine("{0} {1}", dx, dy);
    }
} 
```

* * *

```
private T? Getvalue()
{
  T? value = null;
  if (this.HasValue)
    value = new FromDecimal<T>().GetFromDecimal(NumericUpDown);
  return value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-21T11:16:45.880

由于此方法将始终返回

```
numericUpDown.Value 
```

您没有理由将该值转换为十进制以外的任何值。您是否正在尝试解决您没有的问题？

# gnuradio - 如何在 USRP 上以非常高的采样频率降低带宽

> ID：110766
> 
> 赞同：2
> 
> 时间：2008-09-21T11:00:33.173
> 
> 标签：gnuradio, usrp

我正在使用带有 DBSRX 子板的 USRP。我需要一个非常高的采样频率。目前USRP可以给我在I和Q的最大采样频率为64M/8，数据类型很短，需要2个字节。

那么我可以减少输出数据的长度吗？例如将数据保存为占用1字节的char，并将采样频率提高到64M/4。我可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-21T11:01:11.923

$ usrp_rx_cfile.py --help

请参阅 -8 选项，它可以获得 8 位 I & Q 并允许最小抽取因子为 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:48:45.470

您可以通过不同的方式执行此操作，其中一种是 user19899 解释的。比较“难”的方法是修改USRP的FPGA代码，在UHD接口前增加无损压缩。在驱动程序方面，您必须向相反的代码添加一个额外的层。

我在另一个平台上这样做了，我们使用这个解决方案节省了近 40% 的带宽。

# javascript - 使用拖放重新排序模型中的条目

> ID：110774
> 
> 赞同：11
> 
> 时间：2008-09-21T11:05:29.403
> 
> 标签：javascript, python, django

假设我在 Django 中有一个博客应用程序。如何使用默认管理员中的可拖动表格重新排序帖子？

如果我不必在模型中添加任何额外的字段，那将是最好的，但如果我真的必须这样做，我可以。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-21T13:59:59.357

有关执行此操作的工作代码，请查看djangosnippets.org[上的](http://www.djangosnippets.org)[代码片段 1053](http://www.djangosnippets.org/snippets/1053/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-21T11:49:27.470

请注意“如果我不必向模型添加任何额外的字段，那将是最好的，但如果我真的必须这样做，我可以。”

抱歉，数据库中信息的顺序是由信息本身决定的：您总是需要添加一列进行排序。对此真的别无选择。

此外，要按此顺序检索事物，您需要专门添加`.order_by(x)`到查询或添加`ordering`到模型中。

```
class InOrder( models.Model ):
    position = models.IntegerField()
    data = models.TextField()
    class Meta:
        ordering = [ 'position' ] 
```

没有额外的字段排序就不会发生。这是关系数据库的规则之一。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-02T08:13:16.737

这些天有一个很好的包来订购管理对象

[https://github.com/iambrandontaylor/django-admin-sortable](https://github.com/iambrandontaylor/django-admin-sortable)

此外，[django-suit](http://djangosuit.com/)对此有内置支持

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-28T12:47:06.713

你可以试试这个片段[https://gist.github.com/barseghyanartur/1ebf927512b18dc2e5be](https://gist.github.com/barseghyanartur/1ebf927512b18dc2e5be)（最初基于这个片段[http://djangosnippets.org/snippets/2160/](http://djangosnippets.org/snippets/2160/)）。

集成非常简单。

您的模型（在 models.py 中）：

```
class MyModel(models.Model):
    name = models.CharField(max_length=255)
    order = models.IntegerField()
    # Other fields...

    class Meta:
        ordering = ('order',) 
```

你管理员（admin.py）：

```
class MyModelAdmin(admin.ModelAdmin):
    fields = ('name', 'order',) # Add other fields here
    list_display = ('name', 'order',)
    list_editable = ('order',)

    class Media:
        js = (
            '//code.jquery.com/jquery-1.4.2.js',
            '//code.jquery.com/ui/1.8.6/jquery-ui.js',
            'path/to/sortable_list.js',
        ) 
```

如果您负责保存名称和排序的属性在您的模型中以不同的方式命名，则相应地更改（片段的）JS。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-21T11:15:01.877

在模型类中，您可能必须添加“订单”字段，以维护特定订单（例如，订单 = 10 的项目是最后一个，订单 = 1 是第一个）。然后你可以在 admin change_list 模板中添加一个 JS 代码（见[这个](http://docs.djangoproject.com/en/dev/ref/contrib/admin/#modeladmin-media-definitions)）来维护拖放功能。最后将模型 Meta 中的排序更改为 ['order'] 之类的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-08T06:56:34.527

只有在模型中添加字段才能确定顺序。让我们在模型中添加位置字段。

```
In your models.py 

class MainModel(models.Model):

    name = models.CharField(max_length=255)
    position = models.PositiveSmallIntegerField(null=True)

    class Meta:
        ordering = ('position',)

In your apps admin.py

class IdeaCardTagInline(nested_admin.NestedStackedInline):
    model = MainModel
    extra = 0
    min_num = 1
    sortable_field_name = "position" 
```

`ordering = ('position',)`在 Meta 中将根据 position 字段中的值对 MainModel 进行排序。 `sortable_field_name = "position"`当用户拖放多个模型时，将有助于自动填充位置值。

要在您的 api 中查看相同的订单，请使用 views_model.py 中的 order_by(x)。只是一个模型示例：

```
Model.objects.filter().order_by('position'). 
```

# gnuradio - 如何在 Gnuradio 中进行通道测量？

> ID：110781
> 
> 赞同：1
> 
> 时间：2008-09-21T11:09:56.240
> 
> 标签：gnuradio

使用 RFX2400 板测量时空编码方案中使用的通道的最佳方法是什么？

据我所知，您只能从 USRP 中获取 I 和 Q 流，我不确定您将如何获得一组通道系数。

我计划使用测量通道的共轭来“逆转”传输造成的损害。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-21T11:12:17.810

如果您尝试测量通道的脉冲响应，那么一种技术是使用 BPSK 调制在感兴趣的载波频率上传输已知的伪随机比特序列（m 序列）。序列的码片速率决定了测量系统的带宽，而序列长度决定了测量的“动态范围”。

在接收器将 LO 设置为与发射器相同的载波频率。在这里，您需要将等效低通接收信号与已知的 m 序列进行互相关，以给出通道的（复杂）脉冲响应。任何超出您对阈值噪声水平定义的“峰值”都将是您在时域中的通道系数。

这实际上是在 gr-sounder 中实现的。

信道探测器发射机以 32 Mchips/sec 的速度发送 PRNG 调制的 BPSK。您需要以这种速度进行关联；不可能通过 USB 向主机发送那么多数据。

软件中的信道探测仪适用于小于 4 Mchip/sec 的码片速率。但这将脉冲响应的分辨率限制在每个 bin 约 250 ns，或空间域中的每个 bin 75 米。

不幸的是，在空间非常有限的 FPGA 上进行的互相关没有频偏补偿，因此产生的脉冲响应向量在时域中“滚动”。

——乔纳森·科根（Johnathan Corgan）的答案（c）

# windows - 如何在 Windows 上的 Perl 中安装 ExtUtils::PkgConfig？

> ID：110801
> 
> 赞同：5
> 
> 时间：2008-09-21T11:23:40.950
> 
> 标签：windows, perl, cpan, pkg-config

我已经尝试过 cpan 和 cpanp shell 并且我不断得到：

```
ExtUtils::PkgConfig requires the pkg-config utility, but it doesn't
seem to be in your PATH.  Is it correctly installed? 
```

什么是 pkg-config 实用程序以及如何安装它？

更新：

*   操作系统：Windows
*   该模块是 File::Extractor 模块的先决条件

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-21T15:37:18.033

看这里： [http](http://gtk2-perl.sourceforge.net/win32/howto_build_gtk2perl_win32.html) ://gtk2-perl.sourceforge.net/win32/howto_build_gtk2perl_win32.html 我通过谷歌搜索 ExtUtils::PkgConfig 和“PPM”（Actvestates Perl 包管理器）找到了这个页面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-21T11:56:59.810

pkg-config 用于编译应用程序和库时。它实际上用于插入正确的命令行参数。

它安装在大多数新版本的 linux 上，但如果它最初不存在则很常见，因此应该不难找到。

以下是在 ubuntu 上安装它的方法：

```
 sudo apt-get install pkg-config 
```

这是维基百科页面：

[http://en.wikipedia.org/wiki/Pkg-config](http://en.wikipedia.org/wiki/Pkg-config)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-21T11:56:33.133

[http://pkgconfig.freedesktop.org/wiki/](http://pkgconfig.freedesktop.org/wiki/)

pkg-config 是编译应用程序和库时使用的辅助工具。根据您的操作系统，您可能可以获得二进制发行版（例如，在 Ubuntu 上尝试 apt-get），否则您可以从他们的网站获取源代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-21T15:35:18.210

我在这里找到了 pkg-config 实用程序的 Windows 二进制文件：http: [//ftp.gnome.org/pub/gnome/binaries/win32/dependencies/](http://ftp.gnome.org/pub/gnome/binaries/win32/dependencies/)

（链接在这里找到：[http](http://www.go-evolution.org/Building_Evolution_on_Windows) ://www.go-evolution.org/Building_Evolution_on_Windows ）

更新：来自[gtk.org](http://www.gtk.org/download-windows.html)的直接下载链接：[pkg-config-0.23-2.zip](http://ftp.gnome.org/pub/gnome/binaries/win32/dependencies/pkg-config-0.23-2.zip)

谢谢指点！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-07-18T22:54:07.777

用于 pkg-config 的 Windows 二进制文件的更好来源是[gtk 站点](http://www.gtk.org/download/win64.php)

# python - django中的脏字段

> ID：110803
> 
> 赞同：36
> 
> 时间：2008-09-21T11:27:24.967
> 
> 标签：python, django

在我的应用程序中，我需要在保存模型时保存更改的值（旧的和新的）。任何示例或工作代码？

我需要这个来预先审核内容。例如，如果用户更改模型中的某些内容，那么管理员可以在单独的表中查看所有更改，然后决定是否应用它们。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-12-01T21:09:14.250

我发现 Armin 的想法非常有用。这是我的变体；

```
class DirtyFieldsMixin(object):
    def __init__(self, *args, **kwargs):
        super(DirtyFieldsMixin, self).__init__(*args, **kwargs)
        self._original_state = self._as_dict()

    def _as_dict(self):
        return dict([(f.name, getattr(self, f.name)) for f in self._meta.local_fields if not f.rel])

    def get_dirty_fields(self):
        new_state = self._as_dict()
        return dict([(key, value) for key, value in self._original_state.iteritems() if value != new_state[key]]) 
```

编辑：我已经测试过这个 BTW。

很抱歉排长队。不同之处在于（除了名称）它只缓存本地非关系字段。换句话说，它不会缓存父模型的字段（如果存在）。

还有一件事；保存后需要重置`_original_state`dict。但我不想覆盖`save()`方法，因为大多数时候我们在保存后丢弃模型实例。

```
def save(self, *args, **kwargs):
    super(Klass, self).save(*args, **kwargs)
    self._original_state = self._as_dict() 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-09-21T14:04:00.800

您没有对您的特定用例或需求进行太多说明。特别是，了解您需要如何处理更改信息（您需要存储多长时间？）会很有帮助。如果您只需要将其存储用于临时目的，@S.Lott 的会话解决方案可能是最好的。如果您想要对存储在数据库中的对象的所有更改进行完整的审计跟踪，请尝试使用此[AuditTrail 解决方案](http://code.djangoproject.com/wiki/AuditTrail)。

**更新**：我在上面链接到的 AuditTrail 代码是我见过的最接近适用于您的案例的完整解决方案的代码，尽管它有一些限制（对于 ManyToMany 字段根本不起作用）。它将所有以前版本的对象存储在数据库中，因此管理员可以回滚到任何以前的版本。如果您希望更改在获得批准之前不会生效，您将不得不使用它。

您还可以基于 @Armin Ronacher 的 DiffingMixin 之类的东西构建自定义解决方案。您将 diff 字典（可能是腌制的？）存储在一个表中，供管理员稍后查看并在需要时应用（您需要编写代码来获取 diff 字典并将其应用于实例）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-09-21T16:33:51.750

Django 当前正在将所有列发送到数据库，即使您只是更改了一个。要改变这一点，需要对数据库系统进行一些更改。这可以很容易地在现有代码上实现，方法是在模型中添加一组脏字段并在每次添加`__set__`列值时添加列名。

如果您需要该功能，我建议您查看 Django ORM，实现它并将补丁放入 Django trac。添加它应该很容易，它也会帮助其他用户。当你这样做时，添加一个每次设置列时调用的钩子。

如果您不想破解 Django 本身，您可以复制对象创建时的字典并对其进行比较。

也许使用这样的mixin：

```
class DiffingMixin(object):

    def __init__(self, *args, **kwargs):
        super(DiffingMixin, self).__init__(*args, **kwargs)
        self._original_state = dict(self.__dict__)

    def get_changed_columns(self):
        missing = object()
        result = {}
        for key, value in self._original_state.iteritems():
            if key != self.__dict__.get(key, missing):
                result[key] = value
        return result

 class MyModel(DiffingMixin, models.Model):
     pass 
```

此代码未经测试，但应该可以工作。当您打电话时，`model.get_changed_columns()`您会得到所有更改值的字典。这当然不适用于列中的可变对象，因为原始状态是字典的平面副本。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-12-31T22:11:05.817

添加第二个答案，因为**自最初发布此问题以来发生了很多变化**。

现在 Django 世界中有许多应用程序可以解决这个问题。您可以在 Django Packages 站点上找到[模型审计和历史应用程序的完整列表。](https://www.djangopackages.com/grids/g/model-audit/)

我写[了一篇博客文章](https://treyhunner.com/2011/09/django-and-model-history/)比较了其中一些应用程序。这篇文章现在有 4 年历史了，有点过时了。不过，解决这个问题的不同方法似乎是相同的。

方法：

1.  将所有历史更改以序列化格式（JSON？）存储在单个表中
2.  将所有历史更改存储在一个表中，以反映每个模型的原始更改
3.  将所有历史更改存储在与原始模型相同的表中（我不推荐这样做）

[django-reversion](https://github.com/etianen/django-reversion)包似乎仍然是这个问题最流行的解决方案。它采用第一种方法：序列化更改而不是镜像表。

几年前我恢复了[django-simple-history 。](https://github.com/treyhunner/django-simple-history)它采用第二种方法：镜像每个表。

所以我建议**使用一个应用程序来解决这个问题**。在这一点上，有一些流行的方法效果很好。

哦，如果您只是在寻找脏字段检查而不是存储所有历史更改，请查看[django-model-utils 中的 FieldTracker](https://django-model-utils.readthedocs.org/en/latest/utilities.html#field-tracker)。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-13T08:57:22.627

我扩展了 Trey Hunner 的解决方案以支持 m2m 关系。希望这将帮助其他人寻找类似的解决方案。

```
from django.db.models.signals import post_save

DirtyFieldsMixin(object):
    def __init__(self, *args, **kwargs):
        super(DirtyFieldsMixin, self).__init__(*args, **kwargs)
        post_save.connect(self._reset_state, sender=self.__class__,
            dispatch_uid='%s._reset_state' % self.__class__.__name__)
        self._reset_state()

    def _as_dict(self):
        fields =  dict([
            (f.attname, getattr(self, f.attname))
            for f in self._meta.local_fields
        ])
        m2m_fields = dict([
            (f.attname, set([
                obj.id for obj in getattr(self, f.attname).all()
            ]))
            for f in self._meta.local_many_to_many
        ])
        return fields, m2m_fields

    def _reset_state(self, *args, **kwargs):
        self._original_state, self._original_m2m_state = self._as_dict()

    def get_dirty_fields(self):
        new_state, new_m2m_state = self._as_dict()
        changed_fields = dict([
            (key, value)
            for key, value in self._original_state.iteritems()
            if value != new_state[key]
        ])
        changed_m2m_fields = dict([
            (key, value)
            for key, value in self._original_m2m_state.iteritems()
            if sorted(value) != sorted(new_m2m_state[key])
        ])
        return changed_fields, changed_m2m_fields 
```

还可能希望合并两个字段列表。为此，替换最后一行

```
return changed_fields, changed_m2m_fields 
```

和

```
changed_fields.update(changed_m2m_fields)
return changed_fields 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-11-11T15:43:49.257

继续 Muhuk 的建议并添加 Django 的信号和唯一的 dispatch_uid，您可以在不覆盖 save() 的情况下重置保存状态：

```
from django.db.models.signals import post_save

class DirtyFieldsMixin(object):
    def __init__(self, *args, **kwargs):
        super(DirtyFieldsMixin, self).__init__(*args, **kwargs)
        post_save.connect(self._reset_state, sender=self.__class__, 
                            dispatch_uid='%s-DirtyFieldsMixin-sweeper' % self.__class__.__name__)
        self._reset_state()

    def _reset_state(self, *args, **kwargs):
        self._original_state = self._as_dict()

    def _as_dict(self):
        return dict([(f.name, getattr(self, f.name)) for f in self._meta.local_fields if not f.rel])

    def get_dirty_fields(self):
        new_state = self._as_dict()
        return dict([(key, value) for key, value in self._original_state.iteritems() if value != new_state[key]]) 
```

这将在保存后清除原始状态，而无需覆盖 save()。该代码有效，但不确定在 __init__ 处连接信号的性能损失是多少

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-01-13T02:03:00.120

我扩展了 muhuk 和 smn 的解决方案，包括对外键和一对一字段的主键进行差异检查：

```
from django.db.models.signals import post_save

class DirtyFieldsMixin(object):
    def __init__(self, *args, **kwargs):
        super(DirtyFieldsMixin, self).__init__(*args, **kwargs)
        post_save.connect(self._reset_state, sender=self.__class__,
                            dispatch_uid='%s-DirtyFieldsMixin-sweeper' % self.__class__.__name__)
        self._reset_state()

    def _reset_state(self, *args, **kwargs):
        self._original_state = self._as_dict()

    def _as_dict(self):
        return dict([(f.attname, getattr(self, f.attname)) for f in self._meta.local_fields])

    def get_dirty_fields(self):
        new_state = self._as_dict()
        return dict([(key, value) for key, value in self._original_state.iteritems() if value != new_state[key]]) 
```

唯一的区别是`_as_dict`我将最后一行从

```
return dict([
    (f.name, getattr(self, f.name)) for f in self._meta.local_fields
    if not f.rel
]) 
```

到

```
return dict([
    (f.attname, getattr(self, f.attname)) for f in self._meta.local_fields
]) 
```

这个mixin，和上面的一样，可以这样使用：

```
class MyModel(DirtyFieldsMixin, models.Model):
    .... 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-21T11:42:58.547

如果您使用自己的事务（不是默认的管理应用程序），您可以保存对象的前后版本。您可以将之前的版本保存在会话中，也可以将其放在表单中的“隐藏”字段中。隐藏字段是安全的噩梦。因此，使用会话来保留该用户发生的事情的历史记录。

此外，当然，您必须获取先前的对象，以便对其进行更改。因此，您有多种方法可以监控差异。

```
def updateSomething( request, object_id ):
    object= Model.objects.get( id=object_id )
    if request.method == "GET":
        request.session['before']= object
        form= SomethingForm( instance=object )
    else request.method == "POST"
        form= SomethingForm( request.POST )
        if form.is_valid():
            # You have before in the session
            # You have the old object
            # You have after in the form.cleaned_data
            # Log the changes
            # Apply the changes to the object
            object.save() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-30T08:26:30.783

基于以上@Trey 和@Tony 的具有m2m 支持的更新解决方案（使用更新[的dirtyfields](https://github.com/romgar/django-dirtyfields)和新的[_meta API](https://docs.djangoproject.com/en/1.9/ref/models/meta/)以及一些错误修复）。这对我来说已经通过了一些基本的光照测试。

```
from dirtyfields import DirtyFieldsMixin
class M2MDirtyFieldsMixin(DirtyFieldsMixin):
    def __init__(self, *args, **kwargs):
        super(M2MDirtyFieldsMixin, self).__init__(*args, **kwargs)
        post_save.connect(
            reset_state, sender=self.__class__,
            dispatch_uid='{name}-DirtyFieldsMixin-sweeper'.format(
                name=self.__class__.__name__))
        reset_state(sender=self.__class__, instance=self)

    def _as_dict_m2m(self):
        if self.pk:
            m2m_fields = dict([
                (f.attname, set([
                    obj.id for obj in getattr(self, f.attname).all()
                ]))
                for f,model in self._meta.get_m2m_with_model()
            ])
            return m2m_fields
        return {}

    def get_dirty_fields(self, check_relationship=False):
        changed_fields = super(M2MDirtyFieldsMixin, self).get_dirty_fields(check_relationship)
        new_m2m_state = self._as_dict_m2m()
        changed_m2m_fields = dict([
            (key, value)
            for key, value in self._original_m2m_state.iteritems()
            if sorted(value) != sorted(new_m2m_state[key])
        ])
        changed_fields.update(changed_m2m_fields)
        return changed_fields

def reset_state(sender, instance, **kwargs):
    # original state should hold all possible dirty fields to avoid
    # getting a `KeyError` when checking if a field is dirty or not
    instance._original_state = instance._as_dict(check_relationship=True)
    instance._original_m2m_state = instance._as_dict_m2m() 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-06-23T01:03:09.107

对于每个人的信息，muhuk 的解决方案在 python2.6 下失败，因为它引发了一个异常，指出 'object.__ init __()' 不接受任何参数......

编辑：嗬！显然这可能是我滥用了 mixin ...我没有注意并将其声明为最后一个父级，因此对 **init**的调用最终在对象父级而不是下一个父级中结束，因为它通常会使用 diamond图继承！所以请无视我的评论:)

# signal-processing - 集成陀螺仪和加速度计读数

> ID：110804
> 
> 赞同：14
> 
> 时间：2008-09-21T11:27:44.967
> 
> 标签：signal-processing, robotics, gyroscope, kalman-filter

> **可能重复：**
> [结合陀螺仪和加速度计数据](https://stackoverflow.com/questions/1586658/combine-gyroscope-and-accelerometer-data)

我已经阅读了很多关于`Kalman filters`.

我有一个系统，其中包含一个三轴加速度计和一个陀螺仪，用于测量围绕加速度计轴之一的旋转。该系统设计为由人手持，大部分时间陀螺仪将测量围绕重力矢量或接近重力矢量的旋转。（在同一行业工作的人可能会从中认出我在说什么；））我意识到这是不受约束的。

陀螺仪似乎具有近乎恒定的偏差，对于系统的每个实例都略有不同。当系统倾斜时，我将如何编写过滤器以使用加速度计读数来校准陀螺仪，因此陀螺轴与重力不共线，并且围绕陀螺轴旋转？似乎应该有足够的信息来做到这一点，但被告知没有，为什么也会是一个答案:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-21T12:18:35.327

您似乎在这里有两个（或三个）单独的问题。

1\. 您并不真正了解卡尔曼滤波器和/或它们背后的数学原理。这将使正确实施和使用一个变得非常困难。

2\. 你似乎不了解这个问题所涉及的基本物理学。（基础物理是指基础物理，而不是简单物理，因为它并不简单。）

我建议您尝试使用更简单的积分器，例如 Runga-Kutta 4，您可以找到许多书籍，其中包含实现和使用的示例。对于这个问题应该足够了。（如果客户指定卡尔曼，询问原因。）

至于为什么问题受到限制，在我看来，它无法确保设备垂直握持，也无法测量实际方向。暂时忘记陀螺仪，假设设备不能绕垂直轴旋转。您有三个加速度计，大概是为了估计 3D 中的位置。因此，如果您看到 X 方向的加速度，您会增加您在 X 方向的估计值。类似地，如果您看到 Z 方向的加速度（我假设它是“向上”），您会增加您在 Z 方向上的位置的估计值。现在稍微旋转设备，比如绕 Y 轴旋转 30 度。现在，当设备认为您正在沿 X 方向加速时，设备实际上的加速比 X 中指示的要小一些，**并且**它也在Z方向加速。所以你的位置估计现在是不正确的。

旋转更难积分（方程更“僵硬”，需要更小的时间步来保持精度）。但是如果设备被倾斜，他们将遇到类似的计算错误答案的问题（因为设备无法判断它是否被倾斜）。它会认为绕垂直轴的旋转比实际大或小，因为旋转的一部分实际上是绕着不同的轴（就像加速部分沿着不同的轴一样）。

也许您需要聘请顾问（不，我不是在找工作）来帮助您制定数学。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-18T21:18:31.613

考虑到您对卡尔曼滤波器的兴趣，也许您打算通过惯性测量来增加 GPS 数据。关于你的问题：

> “当系统倾斜时，我将如何编写过滤器以使用加速度计读数校准陀螺仪，因此陀螺轴与重力不共线，并且围绕陀螺轴旋转？似乎应该有足够的信息来做到这一点”

这听起来像是一个陀螺仪校准。假设您正在进行工厂校准，并将设备放在工作台上，您将能够独立测量对齐情况。然后运行您将编写的调平代码，并从测量和陀螺压缩对齐之间的差异中消除陀螺偏差误差。

如果您想即时更新陀螺漂移，那么您将需要卡尔曼滤波器。

就实施而言，我推荐第 7 章， GPS 和[全球定位系统理论与应用](https://rads.stackoverflow.com/amzn/click/com/1563471078)的*惯性集成*第 2 卷在该主题上有很好的背景。它有理论和数学，但没有源代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-15T13:51:58.020

[我在这个博客](http://tom.pycke.be/mav/69/accelerometer-to-attitude)上找到了关于在导航中使用加速度计和陀螺仪的好文章。关于卡尔曼滤波的部分有点模糊，但似乎有代码示例。

您还可以在[http://academic.csuohio.edu/simond/publications.html](http://academic.csuohio.edu/simond/publications.html)找到有关卡尔曼滤波的一般资源。[(8)](http://academic.csuohio.edu/simond/pubs/ESDNonlinear.pdf)中提到的文章很好，不太吓人，介绍了卡尔曼滤波器背后的数学。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-11T23:45:25.607

[nBot，一个两轮平衡机器人](http://www.geology.smu.edu/~dpa-www/robo/nbot/)
关于作者如何选择解决他的两轮机器人平衡问题的大量信息和链接。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-10T18:50:21.593

丹麦的一位绅士刚刚发布[了一个推导卡尔曼滤波器的工作示例，](http://blog.tkjelectronics.dk/2012/09/a-practical-approach-to-kalman-filter-and-how-to-implement-it/)几乎可以完全解决这个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-05-27T20:16:09.167

如果你碰巧正在为 Propeller uController 开发，[那么 Parallax Object Exchange](http://obex.parallax.com/objects/search/?q=kalman)有一些代码。好问题;-)

# .net - .NET/Mono 的最佳图形库

> ID：110814
> 
> 赞同：6
> 
> 时间：2008-09-21T11:37:36.110
> 
> 标签：.net, graphics, mono, cross-platform

我正在寻找用于 .NET 和 Mono 的高性能图形库。我看过[Tao框架](http://www.taoframework.com/)，虽然它很完整，但在可用性方面却很缺乏。它应该是跨平台兼容的。

还有哪些其他选择对您有用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-06-28T15:02:32.153

.NET/Mono 有一个更现代的 OpenGL 包装器，称为 OpenTK。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-21T11:42:26.693

OpenGL 是我的选择，许多开源包装器都存在 .NET 绑定，而 OpenGL 是为跨平台设置的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-07-20T17:48:05.997

我同意 mhutch - OpenTK 是一个非常好的 .NET/Mono OpenGL 包装器。一方面，它有自己的向量/矩阵数学库，其中包含一些更有用的 GLUT 函数（我曾经错过），如 CreatePerspectiveFieldOfView 和 LookAt。我发现这个库现在特别有用，因为矩阵堆栈不再是“kosher”。最后，它附带了一个很好的示例项目，因此您可以在没有大量文档研究的情况下学习如何使用包装器。

# firefox - Firefox 状态栏在底部边框上方 3/4"

> ID：110822
> 
> 赞同：-3
> 
> 时间：2008-09-21T11:43:01.137
> 
> 标签：firefox

不知何故，我的 FireFox 2 损坏了，状态栏在底部窗口边框上方约 3/4" 处。有人知道如何让它与底部窗口边框齐平吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-21T11:48:38.643

不确定它是否与编程相关......但是：

```
firefox -safe-mode
Reset toolbar and control 
```

更多[关于 Firefox 支持](http://support.mozilla.com/fr/kb/Firefox+window+is+too+large+or+opens+off+screen)

# php - 在 CakePHP 的“子”模型中保存信息

> ID：110825
> 
> 赞同：2
> 
> 时间：2008-09-21T11:44:44.597
> 
> 标签：php, cakephp, cakephp-1.2

我有一个简单的`CakePHP site (1.2)`. 我有一个页面，您可以在其中编辑和保存人员。所以我有一个 Person 模型和控制器。

在评论表中，每个人都没有或有更多评论。所以我有一个 Comment 模型，并且我的 Person 模型与 Comment 模型有一个 hasMany 关联。视图工作得很好。

我的问题是，在查看人员页面上，我有一个添加评论按钮。这应该如何工作？我应该期望 Person 控制器包含评论记录的保存，还是创建一个评论控制器并将其保存在它与人的关联之外？

我对 PHP 有经验，但对 Cake 是全新的。

有任何想法吗？我想我只是错过了一些明显的东西，但我不知道该怎么做。我觉得如果这是`PHP`我会在我的添加评论表单中引用 Person_id ，因此使用单独的控制器，但我觉得有一个简单模型的控制器是没用的，因为评论只在个人记录的上下文中编辑.

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-21T12:12:44.497

我不是 CakePHP 专家，但我仍然认为拥有自己的控制器是有意义的。从我做的那些 CakePHP 博客教程之一的记忆中，你需要在评论模型中链接评论和帖子。这是我从中获得的一些代码：

```
class Comment extends AppModel
{
  var $name = ‘Comment’;
  var $belongsTo = array(‘Person’);
} 
```

然后你需要一个控制器（comments_controller.php）：

```
class CommentsController extends AppController
{
  var $name = ‘Comments’;
  var $scaffold;
} 
```

一些SQL：

```
CREATE TABLE comments (
  id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  author VARCHAR(50),
  comment TEXT,
  person_id INT,
  created DATETIME DEFAULT NULL,
  modified DATETIME DEFAULT NULL
); 
```

它会为您创建一个**CRUD**`$scaffold`应用程序，因此当您在浏览器中转到 /comments 时，您可以**创建****、**阅读、更新和**删除**评论。因此，如您所见，这里没有太多涉及。您所需要的只是您的数据库表和一些提供 person_id 的逻辑。

 ******要保存评论（在您的个人/视图中）：

```
<h2>Add comment</h2>
<?php
echo $form->create(‘Comment’, array(‘action’=>‘add/’.$person[‘Person’][‘id’]);
echo $form->input(‘author’);
echo $form->input(‘content’);
echo $form->submit(‘Add comment’);
echo $form->end();
?> 
```

在您的 CommentsController 中：

```
function add($id = NULL) {
  if (!empty($this->data)) {
    $this->data['Comment']['person_id'] = $id;
    $this->data['Comment']['id'] = '';
    if ($this->Comment->save($this->data)) {
      $this->Session->setFlash('Commented added');
      $this->redirect($this->referer());
    }
  }
} 
```

所以你基本上覆盖了标准的添加动作，它是 Cake 自己添加的。希望现在有意义。此外，您可能需要一条路线，以便它获取 /comments/add/ID。我不知道这部分。:)

# c++ - 从 DLL 动态导入 C++ 类

> ID：110833
> 
> 赞同：16
> 
> 时间：2008-09-21T11:52:00.290
> 
> 标签：c++, windows, dll, import

从 DLL 导入 C++ 类的正确方法是什么？我们正在使用 Visual C++。

有 dllexport/exports.def+LoadLibrary+GetProcAddress 三重奏，但它不适用于 C++ 类，仅适用于 C 函数。这是由于 C++ 名称修改造成的吗？我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-21T12:05:14.563

您需要添加以下内容：

```
extern "C"
{
...
} 
```

以避免函数损坏。

您可以考虑编写两个简单的 C 函数：

```
SomeClass* CreateObjectInstace()
{
    return new SomeClass();
}

void ReleaseObject(SomeClass* someClass)
{
   delete someClass;
} 
```

通过仅使用这些功能，您可以在之后添加/更改对象创建/删除的功能。这有时被称为工厂。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-21T12:06:31.970

[在http://www.codeproject.com/KB/DLL/XDllPt4.aspx](http://www.codeproject.com/KB/DLL/XDllPt4.aspx)找到解决方案

感谢您的努力男孩女孩

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T11:59:30.787

我通常声明一个接口基类，在我的应用程序中使用这个声明，然后使用 LoadLibrary、GetProcAddress 来获取工厂函数。因子总是返回接口类型的指针。

这是一个实际示例，[从 DLL 导出 MFC 文档/视图](http://www.codeproject.com/KB/docview/docviewfromdll.aspx)，动态加载

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-21T12:02:07.800

dllexport/dllimport 有效，将它放在头文件中的类名之前，你就可以开始了。

通常，您希望在 dll 中使用 dllexport，在 exe 中使用 dllimport（但您可以在任何地方使用 dllexport 并且它可以工作，“正确”操作会使其加载速度更快）。

显然这是用于链接时编译。您可以使用 /delayload 链接器指令使其“动态”，但这可能不是您想要的主题行。

如果你真的想要一个 LoadLibrary 风格的加载，你将不得不用“extern C”包装器来包装你的 C++ 函数。问题是由于名称修改，您可以输入完全修改的名称并且它会起作用。

解决方法通常是提供一个返回指向正确类的指针的 C 函数 - COM 以这种方式工作，因为它从 dll 导出 4 个 C 函数，这些函数用于获取 dll 中对象内部的接口方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-21T12:08:07.833

看看[这个问题](https://stackoverflow.com/questions/27998/exporting-a-c-class-from-a-dll)。基本上，有两种方法。您可以使用 _dllexport 标记类，然后与导入库链接，DLL 将自动加载。或者如果你想自己动态加载DLL，你可以使用@titanae 建议的工厂函数思想

# design-patterns - Never do anything until you ready to use it, in software too? [Toyota principle]

> ID：110855
> 
> 赞同：0
> 
> 时间：2008-09-21T12:05:45.357
> 
> 标签：design-patterns, process, process-management, principles

I was listening to [a podcast](http://itc.conversationsnetwork.org/shows/detail3798.html). Where they talked about principles Toyota was using:

> Never do anything until you are ready to use it.

I think this tells us to look in other places, to learn what other practices have been known for years.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T12:28:57.673

It *may* apply to software construction, but I am not sure it *does* apply

If we consider the five elements in a "[toyota-way of decision making](http://malvasiabianca.org/archives/2008/05/the-toyota-way-and-nemawashi/)", based on the principle that "how you arrive at the decision is just as important as the quality of the decision":

[mode humour ON]

*   Finding out what is really going on, including genchi gembutsu.

    > Except that sometime, one does finally understand what is going on when the client explain to us at the end of the project;) ![PM_Build_Swing](https://i.stack.imgur.com/V6AjD.gif)

*   Understanding underlying causes that explain surface appearances—asking “Why?” five times.

    > Sure but the client is not available enough during the project ;)

*   Broadly considering alternative solutions and developing a detailed rationale for the preferred solution.

    > Too late, the programmers are already coding like madmen :)

*   Building consensus within the team, including Toyota employees and outside partners.

    > Oops that programmer is already re-writing the authentification system even though the old one was working fine

*   Using very efficient communication vehicles to do one through four, preferably one side of one sheet of paper.

    > Did you hear "death by powerpoint" ? This is not always our strong suit ;) ![Death by PowerPoint](https://i.stack.imgur.com/M5XAQ.jpg)

[mode humour OFF]

Seriously, as stated by the previous answers, the Agile philosophy does address some of the core tenants of this Toyota principle.

And it may be a little richer that just "You Ain't Gonna Need It", as described in the book "[The Toyota way](http://malvasiabianca.org/archives/2008/05/the-toyota-way-and-nemawashi/)"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T12:14:53.260

Sort of, yes. This is a core part of the [agile philosophy](http://en.wikipedia.org/wiki/Agile_software_development).

Basically, favour flexibility and speed of response over big design up front and unwieldy specifications. One of the best ways of doing that is to only build enough to meet your current requirements, because you never know when they're going to change.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T12:18:56.527

It is old news a little. It's often called "You ain't gonna need it" ( "You Arent' Going to Need It" in non-idomatic English), and abbreviated [YAGNI](http://en.wikipedia.org/wiki/You_Ain%27t_Gonna_Need_It).

Problems associated with implementing a feature when you don't need it:

*   the implementation takes time away from developing features that are needed
*   the feature is hard to document and test, since if you don't need it, who knows what it's supposed to do exactly?
*   maintaining the feature will take additional time
*   the feature adds extra code, complicating the codebase
*   the feature may have a snowball effect, whereby it suggests other features that you may then want to add, even though they're not needed

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T12:10:07.517

It is a good agile practice to think just like that. There is also something called Test-Driven-Development, that helps you get software without bugs (almost), but also have that side effect that NOTHING is implemented that you don't use.

A example is you're own collection class. If you only are needing a Add method, and a ToArray method, then why use the time to implement the Remove and Count methods?

So yep. Follow that principle :)

# php - 需要一个解释如何使用 PHPUnit 的网站

> ID：110858
> 
> 赞同：9
> 
> 时间：2008-09-21T12:08:26.850
> 
> 标签：php, unit-testing, zend-framework, phpunit

我正在寻找`(optimally with Zend Framework)`有关如何使用`PHPUnit`.

我找到了一对，`google`但还没有安静地理解它。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-09-21T15:41:11.503

您正在寻找的是[袖珍指南](http://www.phpunit.de/manual/current/en/)。它解释了如何以多种语言从头到尾使用 PHPUnit。您可以免费在线或离线阅读它，并且它会定期更新。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-21T12:20:30.407

有关[PHPUnit](http://www.phpunit.de/)的信息，请务必阅读[文档](http://www.phpunit.de/manual/3.3/en/)。IMO 看起来还不错。有一篇关于[使用 Zend Framework 创建的 MVC 应用程序的自动测试的](http://replay.waybackmachine.org/20090426040436/http://www.alexatnet.com/node/12)博客文章看起来也很不错。:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-08T11:41:56.333

Zend 开发者专区还发布了“[单元测试艺术简介](http://devzone.zend.com/article/2772-An-Introduction-to-the-Art-of-Unit-Testing-in-PHP)”，其中专门介绍了 PHPUnit 和 Zend。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-21T13:56:49.227

[Simpletest](http://simpletest.org/)与 PHPUnit 非常相似，但更简单，有一个很好的[入门教程](http://simpletest.org/en/first_test_tutorial.html)。即使您打算使用 PHPUnit，这也应该教会您单元测试的基础知识。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-29T20:08:53.577

如果您正在寻找使用 PHPUnit 和`Zend_Test`Zend 框架的简单介绍，我编写了一个[简单的教程，涵盖了设置 PHPUnit 的基础知识](http://blog.andrewhavens.com/2009/03/getting-started-with-zend_test-step-3-make-sure-phpunit-is-ready-for-testing/)以及使用 PHPUnit 和`Zend_Test`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T21:52:05.377

一个很棒的教程（基于 git，基于练习），通过 Sebastian Marek 进行物理测试：[https ://github.com/proofek/phpnw12-tutorial](https://github.com/proofek/phpnw12-tutorial)

发现它对非常基线的初学者非常有帮助。幻灯片： [http ://www.slideshare.net/proofek/test-your-code-like-a-pro-phpunit-in-practice](http://www.slideshare.net/proofek/test-your-code-like-a-pro-phpunit-in-practice)

# .net - VS 2008 中的调试设计器处理

> ID：110867
> 
> 赞同：2
> 
> 时间：2008-09-21T12:13:44.013
> 
> 标签：.net, winforms, visual-studio-2008, designer

我有一个以我的类型形式设置的公共属性，`ListE<T>`其中：

```
public class ListE<T> : IList<T>, ICollection<T>, IEnumerable<T>, IList, ICollection, IEnumerable 
```

是的，它很拗口，但这就是设计器需要它在“属性”窗口中显示为可编辑集合的条件。它做了什么！因此，我单击小 [..] 按钮来编辑集合，然后单击添加以将项目添加到集合中。

> 算术运算导致溢出。

现在，这是一个非常基本的列表，只不过是一个扩展数组。整个事情中唯一接近算术的部分是扩展函数，即使它使用左移而不是乘法，也不会溢出。这一切都让我认为这个异常是在设计器内部引发的，可能是由于我对实现细节的一些小疏忽造成的，但我找不到测试或调试该场景的方法。有没有人有任何聪明的想法？

编辑：是的，我可以成功使用该属性，甚至可以手动使用，即。在`OnLoad`处理程序中，我想如果我不能让它工作，我将不得不求助于它，但这并不理想。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T15:54:18.210

我不明白是什么促使你尝试以这种方式重新发明 List<T> 轮子，但要回答你的问题：我会在你的类的构造函数中添加一行“System.Diagnostics.Debugger.Break()” .

然后尝试在设计器中使用它，您会收到一个弹出窗口，询问您是否要附加调试器。附加 Visual Studio 的第二个实例作为调试器，您将能够在代码中设置一些断点并开始调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-21T13:51:03.577

一个开始的地方是它可能正在使用您的 ListE`1::Count 属性进行数学运算。如果这有一些微妙的缺陷（即它比返回 this.innerList.Count 更复杂），它可能会导致设计者在某些操作上出现算术溢出。通常不会发生算术溢出，除非特别要求使用

```
checked
{
   // ...
} 
```

句法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-24T05:22:48.453

您不必添加 Debugger.Break(); 调用你的代码来调试它。您可以打开一个不同的 VS 实例并附加到您使用它的那个实例上，您应该能够毫无问题地调试它（只要确保您已加载符号）。

# design-patterns - 永远不要生产到未知的途径，在软件中也是如此？【丰田原理】

> ID：110868
> 
> 赞同：5
> 
> 时间：2008-09-21T12:13:44.167
> 
> 标签：design-patterns, error-handling, process, principles

在丰田生产线中，他们总是知道零件经过了什么路径。这样他们就可以确定他们可以解决问题。这也适用于软件吗？

所有错误消息都应该准确地告诉我他们走过的路径。有些会，带有堆栈跟踪的错误消息。这是一个正确的解释吗？它可以在其他地方使用吗？

好的，这是播客。我觉得很有趣

[http://itc.conversationsnetwork.org/shows/detail3798.html](http://itc.conversationsnetwork.org/shows/detail3798.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-21T12:57:24.047

在可行的情况下是个好主意。不幸的是，跟踪机器状态的整个历史通常非常困难。你只是不能用你从哪里得到它，以及*那个*对象的整个状态来标记每个数据结构。您也许可以仅存储外部事件，并以这种方式重现所有内容的来源。

一些例子：

我确实在一个可行的项目上工作，并且帮助很大。当我们快要发货了，并且没有要修复的错误时，我们将在“零玩家模式”下玩游戏，在这种模式下，计算机将整夜反复玩各种角色和语言环境的游戏。如果它断言，它将显示开始匹配的随机键。当我们早上上班时，我们会从屏幕上写下这个键（通常有一个），然后用那个键重新启动它。然后我们会一直观察它，直到断言出现，然后追踪它。重要的是，我们可以重新创建导致错误的所有原始输入，并根据需要重新运行它多次，即使在重新编译之后（在限制范围内......从随机数生成器获取的次数无法更改, 虽然我们有一个单独的 RNG 用于视觉 fx 等非游戏内容）。这只有效，因为每场比赛都是在热重启后开始的，并且只使用非常少量的数据作为输入。

我听说 Bungie 使用了类似的方法来尝试在他们的 Halo 关卡中发现错误的几何形状。他们会将开发套件设置为在特殊模式下整夜运行，坚不可摧的主角会随机移动和跳跃。早上，他们会查看他是否在几何图形中卡在某个他无法脱身的位置。也可能涉及手榴弹。

在另一个项目中，我们实际上用时间戳记录了所有用户交互，以便我们可以重播它。如果可以的话，这很好用，但大多数人都与一个不断变化的数据库进行交互，其整个状态可能不会那么容易地存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T12:19:02.627

它对软件来说不太重要。如果软件出现问题，您通常可以重现故障并进行人工分析。即使它在 1000 次中仅发生 1 次，您通常也可以打开所有日志记录并运行 1000 次（简单的浸泡测试）。

这在生产线上更加昂贵和耗时，甚至是不可能的。

在第一次出错时尽可能多地提供信息并不是什么坏事，但这对我来说并不像对丰田那么重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-21T12:18:39.897

这是一个很好的方法。但请注意，您不应过度记录日志。否则，您无法在所有噪音中找到有趣的信息，并且会降低整体性能（例如匿名对象创建，取决于语言）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-21T12:56:59.713

生成带有完整堆栈跟踪的错误消息*通常是*不好的安全做法。
另一方面，更符合丰田的意图，每个开发的模块都应该追溯到最初的程序员——他们应该对劣质工作、错误修复、安全漏洞等负责。不是为了纪律目的，但必要时进行维护和教育。也许是为了奖金，在相反的情况下...... ;-)

# project-management - 每次都使用相同的方法，这在软件项目中有用吗？

> ID：110876
> 
> 赞同：-1
> 
> 时间：2008-09-21T12:18:43.580
> 
> 标签：project-management, principles

我出去跑步了……听一个关于丰田的播客……无论如何。

我认为这个原则不会在软件项目中使用。（也许是项目管理）。艺术还很年轻。目前，我们不知道我们在做什么。但最终，我们会的。

或者，有人知道如何使用这个核心原则吗？

好的，这是播客。我觉得很有趣

[http://itc.conversationsnetwork.org/shows/detail3798.html](http://itc.conversationsnetwork.org/shows/detail3798.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-21T12:25:13.890

我建议进行一些小的修改，如果该方法已被证明可以正常工作（性能/维护/安全/等），那么每次都使用它。
诀窍是“证明有效”，也是“正确”。
所以基本上，除非当前的方法有问题，否则不要为了改变而改变。（请注意，一种可以证明效果更好的方法，实际上突出了另一种方法存在问题，尤其是效果不佳）。

特别是在我们的领域，它特别适用，因为当大多数代码以相同的方式构建时，您可以获得生产力/可扩展性。例如维护、开发人员培训等。

换而言之，这位著名哲学家更熟悉的话：

> 如果它没有坏，就不要修理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-21T12:26:10.770

好吧，我认为这完全取决于。如果您已经使用的方法具有良好的执行时间，（大部分）没有错误，并且可以按照您的意愿工作，那么就没有必要编写新的方法来完成这项任务。特别是如果您是为金钱或公司编程。

但是，如果您想学习一种编程语言的一些新特性，或者只是一种不同的做事方式，完全出于您的个人兴趣，为什么不呢？

在丰田这样的公司中，节省时间和金钱至关重要。但是，您的个人时间具有您赋予它的任何重要性。如果学习一种新的做事方法对你的底线有好处，那就去做吧。如果您的底线是尽可能多地学习，那么这可能是正确的做法。另一方面，如果您的底线是尽可能快地完成尽可能多的项目，那么事实并非如此。

但是，尝试不同的方法仍然有用，即使您的底线是节省时间和金钱；因为，通过使用不同的方法做一些你已经做过的事情，可能会给你带来一些想法，从长远来看可能会节省你的时间（时间就是金钱）。

所以我几乎想说，如果以完全不同的方式重做某事是你想做的事，那就去做吧。

# windows-ce - Microsoft Robotics Developer Studio 是否适用于 CE 6？

> ID：110881
> 
> 赞同：1
> 
> 时间：2008-09-21T12:20:02.937
> 
> 标签：windows-ce, robotics, robotics-studio, dss

我有一个我创建的 DSS 服务（对于 Microsoft Robotics Studio）。然后我按照文档使其成为一个紧凑的框架服务并创建了一个部署包。然后我将它部署到 CE 6 设备...

MSRS 服务是否适用于 CE 6？该文档讨论了 CE 5。如果我运行它应该看什么？我希望看到类似于在 Windows 上运行 DSSHost 的东西......但我只看到一个空白屏幕，所以我不知道该服务是否正在运行。该文档指出，第一次确实需要时间（EBOX-2300 上 +/- 30 秒）。我离开了一段时间，但仍然是一个空白屏幕！

我应该看点什么吗？我也尝试使用网络浏览器访问该服务，但没有运气。另外，如何设置安全设置以允许分布式节点？

* * *

我还没有完全隔离问题，但我有一个解决方法！！！

我最初尝试使用 MSRS 2008 (CTP) + Visual Studio 2008 创建我的服务，但没有任何成功！！！

我现在使用 MSRS 1.5 Refresh + Visual Studio 2005 做了同样的事情，它工作 100%

如果是 VS 2008 与 VS 2005 或 MSRS 1.5 与 MSRS 2008，我将尝试隔离

PS。我还在 CE 5 和 CE 6 上尝试过，两者都有效！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-23T11:13:58.693

> 应用程序还可以直接在运行 Windows® Vista、Window® XP、Windows® XP Embedded、**Windows® Embedded CE 6.0**和 Windows Mobile® 6 的基于 PC 的机器人上运行，从而实现完全自主操作。

取自[这份](http://download.microsoft.com/download/5/6/b/56b49917-65e8-494a-bb8c-3d49850daac1/microsoft%20robotics%20studio%20(1.5)%20datasheet%20en.pdf)文件

# php - PHP解析配置ini文件

> ID：110887
> 
> 赞同：5
> 
> 时间：2008-09-21T12:23:40.820
> 
> 标签：php, apache

有没有办法读取模块的配置 ini 文件？

例如，我安装了 php-eaccelerator ( [http://eaccelerator.net](http://eaccelerator.net) ) 并将`eaccelerator.ini`文件放入`/etc/php.d`. 我的 PHP 安装不会读取此`.ini`文件，因为`--with-config-file-scan-dir`编译 PHP 时未使用该选项。有没有办法在某处手动指定ini文件的路径，以便PHP可以读取模块的设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T12:31:56.730

这只是一个疯狂的猜测，但尝试将 eaccelerator.ini 中的所有指令添加到 php.ini。首先创建一个`<?php phpinfo(); ?>`并检查它的位置。

例如，试试这个：

```
[eAccelerator]
extension="eaccelerator.so"
eaccelerator.shm_size="32"
eaccelerator.cache_dir="/tmp"
eaccelerator.enable="1"
eaccelerator.optimizer="1"
eaccelerator.check_mtime="1"
eaccelerator.debug="0"
eaccelerator.filter=""
eaccelerator.shm_max="0"
eaccelerator.shm_ttl="0"
eaccelerator.shm_prune_period="0"
eaccelerator.shm_only="0"
eaccelerator.compress="1"
eaccelerator.compress_level="9" 
```

您可以做的另一件事是使用 ini_set() 在运行时设置所有设置。我不确定这是否有效或效果如何。:) 我不熟悉 eAccelerator 肯定知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-21T12:28:39.687

这种情况下的标准方法是将相关的 .ini 行复制到 php.ini 文件的底部。php.ini 文件本身没有“包含“file.ini””功能。

您也不能在运行时执行此操作，因为此时扩展已被初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-21T12:56:18.433

[如果使用 Apache 和 mod-php，您可以使用.htaccess 文件](http://www.php.net/manual/en/apache.configuration.php)在本地配置/覆盖一些 php 设置。您的网络服务器必须在主配置文件中适当地“AlloweOverride”，以允许您在本地覆盖这些设置。根据我的经验，许多托管公司会让您通过 htaccess 设置 php 设置。

（感谢评论者指出这只适用于 mod-php）

# sql - 具有数千个插入的 MySQL 事务 - 它需要多少次“往返”？

> ID：110894
> 
> 赞同：11
> 
> 时间：2008-09-21T12:26:21.627
> 
> 标签：sql, mysql, database

我有通过 ODBC 访问 MySQL 的 C# 代码。

它创建一个事务，执行几千个插入命令，然后提交。现在我的问题是有多少“往返”，可以这么说，发生在数据库服务器上？我的意思是，它只是将每个插入命令传输到数据库服务器，还是缓存/缓冲它们并分批发送？这可以以任何方式配置吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-21T12:53:21.547

MySQL 有一个可以使用的扩展 SQL 样式，其中一次放入多个批量插入：

```
INSERT INTO `table` (`id`, `event`)  VALUES (1, 94263), (2, 75015), (3, 75015); 
```

在运行 SQL 查询本身之前，我通常会将几百个插入部分收集到一个字符串中。这将通过自己对它们进行批处理来减少解析和通信的开销。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-12-30T19:35:15.047

行数本身没有限制；限制是传输到服务器的字节数。

您可以将批量插入构建到“最大允许数据包”中指定的字节数。如果我想使用最少的插入量，我会尝试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T12:37:36.933

它会为您提交的每个查询执行一次往返（无论它是否在事务中）。

在 MySQL 中，可以使用“扩展插入”语法，它允许您在单个语句中插入多个（或实际上是许多）行。这通常被认为是一件好事。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-21T12:44:56.590

往返于数据库服务器与往返于磁盘上的数据库不同。

在您确定往返行程是瓶颈之前，请进行一些实际测量。

有多种方法可以通过一次插入来插入多行，具体取决于您的 DBMS。在您投入编码工作之前，请弄清楚它是否可能对您有任何好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-21T12:36:35.207

没有看到你的代码很难说，但我假设你一次执行一个语句。因此，每个插入语句将获得一次往返。

在 MSSql 中，您可以在单个语句中执行多个插入：

```
cmd.ExecuteNonQuery "insert table values (1)  insert table values (2)" 
```

所以你可以创建一个大字符串并执行它（我认为它会有一个限制），我认为这适用于 MySQL。

同样在 MSSQL 中，您有一个批处理插入器（查找“SqlBulkCopy”），在 MySQL 中可能尝试[从临时文件加载数据](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-29T13:15:45.647

这取决于调用 SQL 语句的位置。我用 MySQL JDBC 驱动程序尝试过一次，得到一个错误，说限制是 1MB，但它是可配置的。

我没有费心去尝试配置它，只是将 SQL 语句分成更小的部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-20T15:14:53.233

将发送的数据限制取决于您的服务器，因此多个插入语句的最大长度会自动调整以适应。瓶颈是数据包长度和缓冲区长度。

有关更多信息，请参阅`net_buffer_length`和`max_allowed_packet`变量描述：

[https://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_net_buffer_length](https://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_net_buffer_length) [https://dev.mysql.com/doc/refman/5.1/en/server-system-variables .html#sysvar_max_allowed_pa​​cket](https://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_max_allowed_packet)

In some cases you can adjust these (e.g. when dumping data) to not generate inserts that are too long yet preserve multiple inserts. Be aware that if you have some blobs in your tables or any other long values that might exceede values of the mentioned variables you may get errors or incomplete data.

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2008-09-21T12:39:49.427

几年前使用 MySQL 4.x 时，我们遇到了不可配置的查询大小的硬限制。

这可能对您没有多大帮助：

1.  我不记得硬限制是什么。
2.  您可能没有使用 MySQL 4.x。
3.  我们没有使用交易。

祝你好运！

# emacs - 与Slime for Scheme 最接近的东西是什么？

> ID：110911
> 
> 赞同：45
> 
> 时间：2008-09-21T12:34:20.890
> 
> 标签：emacs, lisp, scheme, common-lisp, slime

我的大部分开发都是在 Common Lisp 中完成的，但有时我想切换到 Scheme（在读*Lisp in Small Pieces*时，当我想玩 continuations 时，或者当我想用 Gauche 编写一些脚本时，因为例子）。在这种情况下，我的主要不适来源是我没有史莱姆（是的，你可以称我为瘾君子）。

Scheme 与 Slime 最接近的对应物是什么？具体来说，我最感兴趣的是：

*   Emacs 集成（这一点很明显；））
*   体面的选项卡完成（理想情况下，cwcc TAB 应该扩展为 call-with-current-continuation）。它甚至可能是基于符号表的（即，它不必立即注意到我在 a`let`中定义的函数）。
*   小缓冲区中的函数参数提示（如果我输入了`(map |)`（光标位置由 指示`|`）），我想`(map predicate . lists)`在小缓冲区中查看
*   将表格发送给口译员
*   与调试器集成。

我按重要性降序排列了这些特征。

我选择的方案实现是：

*   Mz方案
*   伊卡洛斯
*   左撇子
*   比格卢
*   鸡

如果它至少对他们有用，那就太好了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-21T14:01:02.240

SLIME 的 contrib 目录似乎有 MIT Scheme 和 Kawa 的 SWANK 实现。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-11T22:48:50.493

[Geiser](http://nongnu.org/geiser/)为 Scheme 提供了极好的环境。最新版本除了[Guile](https://www.gnu.org/software/guile/)和[Racket](https://racket-lang.org/)之外，现在还可以与[Chez Scheme](https://cisco.github.io/ChezScheme/)、[Chibi Scheme](https://github.com/ashinn/chibi-scheme)、[Chicken Scheme](http://www.call-cc.org/)以及旧的备用[MIT Scheme](https://www.gnu.org/software/mit-scheme/)进行交互。我建议通过[Melpa](http://melpa.org/#/getting-started)[安装它](http://nongnu.org/geiser/geiser_2.html#Installation)，特别是为了获得最新版本来处理更广泛的 REPL 选择。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-09-24T18:41:54.053

您也可以考虑 Scheme Complete：

[http://www.emacswiki.org/cgi-bin/wiki/SchemeComplete](http://www.emacswiki.org/cgi-bin/wiki/SchemeComplete)

它基本上提供制表符补全。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-25T02:50:25.707

一位评论员说：“DrScheme IDE 具有 emacs 键绑定”，它是一个备受推崇的 IDE，具有您明确列出的许多功能。

此外，Emacs 的方案模式提供了 SLIME 的一些功能 - 集成的 REPL，将表单发送到该 REPL 并加载整个文件的能力。据我所知，一般来说，对于您列出的方案，对于远程连接到正在运行的图像（与 Emacs 缓冲区中的方案 repl 相比）或调试器集成，没有等价物。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-11-04T08:53:41.067

对于我使用 mzscheme 的工作，我通常使用 cmuscheme + quack，这几乎可以提供我在开发过程中需要的东西。

Bigloo 带有非常强大的蜜蜂模式。

对于 gauche，您可以使用 GCA 包，该包提供名称完成、功能描述显示和代码模板插入

**更新**：我在我的网站上发表[了关于 Scheme + Emacs 集成的文章](http://xtalk.msk.su/~ott/en/writings/emacs-devenv/EmacsScheme.html)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-21T12:59:46.600

嗯......我会说[Slime for Scheme](http://mumble.net/~campbell/slime48.html)是最接近Slime for Scheme 的东西；）

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2011-09-04T14:46:16.827

您可以通过使用 swank-chicken 将鸡计划与粘液一起使用。

我建议看一下[geiser](http://www.nongnu.org/geiser/)模式，但它现在只支持 Racket 和 Guile，我在你的列表中没有看到。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-23T17:46:36.910

我没用过，但你可以试试[Quack](http://www.neilvandyke.org/quack/quack.el) with `mzscheme`.

不过，SLIME 很难被击败。在它的 SWANK 端有很多美好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-26T14:10:59.837

[现在有一个名为r7rs-swank 的](https://github.com/ecraven/r7rs-swank)各种 Scheme 的 Slime 后端。

# windows - 更改作为映像挂载的 Windows 系统的主机名/IP 地址

> ID：110920
> 
> 赞同：3
> 
> 时间：2008-09-21T12:37:59.040
> 
> 标签：windows, sysadmin

我正在寻找一种方法来更改通过 Linux 系统上的环回映像安装的 Windows XP 系统的主机名和 IP 地址。所以基本上我可以在文件级别访问 Windows XP 系统，但我无法在其上执行任何程序。一种类似于在 Linux 下编辑 /etc/hostname 和任何网络配置文件的方法。

到目前为止，我发现的唯一方法是在启动后运行一个工具，例如 MS sysprep 或使用 Acronis Snap Deploy 之类的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-21T13:19:41.887

您可以使用[`chntpw`](http://pogostick.net/~pnh/ntpasswd/)工具离线编辑 Windows 注册表。[这是一个如何使用它](http://pogostick.net/~pnh/ntpasswd/regedit.txt)的示例。

您正在寻找的钥匙是这些：

```
HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Control\ComputerName\ComputerName

HKEY_LOCAL_MACHINE\SYSTEM\Current Control Set\
Services\Tcpip\Parameters\Interfaces\{<Interface GUID>} 
```

在界面的 GUID 下，您会发现许多键，您需要的是：

```
IPAddress (REG_MULTI_SZ) = x.x.x.x

SubnetMask (REG_MULTI_SZ) = x.x.x.x

DefaultGateway (REG_MULTI_SZ) = x.x.x.x 
```

看看他们那里的其余键，你可能会发现一些有趣的信息。

# python - 如何关闭 tkinter 窗口？

> ID：110923
> 
> 赞同：112
> 
> 时间：2008-09-21T12:40:04.900
> 
> 标签：python, tkinter

如何结束 Tkinter 程序？假设我有这个代码：

```
from Tkinter import *

def quit():
    # code to exit

root = Tk()
Button(root, text="Quit", command=quit).pack()
root.mainloop() 
```

我应该如何定义`quit`退出我的应用程序的函数？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-03-22T18:39:54.357

**您应该使用`destroy()`关闭 tkinter 窗口。**

```
from Tkinter import *

root = Tk()
Button(root, text="Quit", command=root.destroy).pack()
root.mainloop() 
```

* * *

**解释：**

```
root.quit() 
```

上面这行只是**绕过**了`root.mainloop()`ie ，如果执行了命令，ie`root.mainloop()`仍然会在后台运行。`quit()`

```
root.destroy() 
```

虽然`destroy()`命令消失，`root.mainloop()`即`root.mainloop()`停止。

因此，当您只想退出程序时，您应该使用`root.destroy()`它将停止`mainloop()`.

但是如果你想运行一些无限循环并且你不想破坏你的 Tk 窗口并且想在`root.mainloop()`一行之后执行一些代码，那么你应该使用`root.quit()`. 前任：

```
from Tkinter import *
def quit():
    global root
    root.quit()

root = Tk()
while True:
    Button(root, text="Quit", command=quit).pack()
    root.mainloop()
    #do something 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2008-09-21T12:44:01.880

```
def quit()
    root.quit() 
```

或者

```
def quit()
    root.destroy() 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-11-16T18:36:55.683

```
import tkinter as tk

def quit(root):
    root.destroy()

root = tk.Tk()
tk.Button(root, text="Quit", command=lambda root=root:quit(root)).pack()
root.mainloop() 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-09-17T14:41:22.490

我认为您错误地理解了 Tkinter 的退出功能。这个函数不需要你定义。

首先，您应该如下修改您的函数：

```
from Tkinter import *
root = Tk()
Button(root, text="Quit", command=root.quit).pack()
root.mainloop() 
```

然后，你应该使用'.pyw'后缀来保存这个文件并双击'.pyw'文件来运行你的GUI，这一次你可以通过点击按钮结束GUI，你也可以发现不会出现令人不快的 DOS 窗口。（如果您运行“.py”文件，退出功能将失败。）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-21T13:24:39.613

退出 Python 程序的常用方法：

```
sys.exit() 
```

（您也可以向其传递退出状态）或

```
raise SystemExit 
```

在 Tkinter 程序中可以正常工作。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-08-26T21:22:15.913

在混乱的情况下照明...

```
def quit(self):
    self.destroy()
    exit() 
```

A) destroy() 停止主循环并杀死窗口，但让 python 运行

B) exit() 停止整个过程

只是为了澄清以防有人错过了 destroy() 正在做什么，并且 OP 还询问了如何“结束” tkinter 程序。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-04-05T13:05:35.363

你只需要输入这个：

```
root.destroy() 
```

并且您甚至不需要 quit() 函数，因为当您将其设置为命令时，它将退出整个程序。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-07-24T09:56:24.070

最简单的方法是单击红色按钮（在 macOS 上最左边，在 Windows 上最右边）。如果要将特定功能绑定到按钮小部件，可以这样做：

```
class App:
    def __init__(self, master)
        frame = Tkinter.Frame(master)
        frame.pack()
        self.quit_button = Tkinter.Button(frame, text = 'Quit', command = frame.quit)
        self.quit_button.pack() 
```

或者，为了让事情更复杂一点，使用协议处理程序和`destroy()`方法。

```
import tkMessageBox

def confirmExit():
    if tkMessageBox.askokcancel('Quit', 'Are you sure you want to exit?'):
        root.destroy()
root = Tk()
root.protocol('WM_DELETE_WINDOW', confirmExit)
root.mainloop() 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-10-29T08:42:58.827

如果有人想将他们的 Escape 按钮绑定到关闭整个 GUI：

```
master = Tk()
master.title("Python")

def close(event):
    sys.exit()

master.bind('<Escape>',close)
master.mainloop() 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-07-28T14:58:50.627

你不必打开一个函数来关闭你的窗口，除非你正在做一些更复杂的事情：

```
from Tkinter import *

root = Tk()
Button(root, text="Quit", command=root.destroy).pack()
root.mainloop() 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-05-22T21:11:12.450

在`idlelib.PyShell`模块中，`root`类型变量`Tk`被定义为全局变量

在`PyShell.main()`函数结束时，它调用`root.mainloop()`函数，这是一个无限循环，它一直运行到循环被`root.quit()`函数中断。因此，`root.quit()`只会中断执行`mainloop`

为了销毁与该 idlelib 窗口相关的所有小部件，`root.destroy()`需要调用，这是`idlelib.PyShell.main()`函数的最后一行。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-07-26T14:03:43.447

我通常使用默认的 tkinter`quit`函数，但你可以自己做，像这样：

```
from tkinter import *
from tkinter.ttk import *

window = Tk()
window.geometry('700x700') # 700p x 700p screen

def quit(self):
    proceed = messagebox.askyesno('Quit', 'Quit?')
    proceed = bool(proceed) # So it is a bool

    if proceed:
        window.quit()
    else:
        # You don't really need to do this
        pass

btn1 = Button(window, text='Quit', command=lambda: quit(None))

window.mainloop() 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-12-13T04:33:52.897

对于菜单栏：

```
def quit():
    root.destroy()

menubar = Menu(root)
filemenu = Menu(menubar, tearoff=0)

filemenu.add_separator()

filemenu.add_command(label="Exit", command=quit)
menubar.add_cascade(label="menubarname", menu=filemenu)
root.config(menu=menubar)
root.mainloop() 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-02T17:32:04.563

我使用以下代码退出 Tkinter 窗口：

```
from tkinter import*
root=Tk()
root.bind("<Escape>",lambda q:root.destroy())
root.mainloop() 
```

或者

```
from tkinter import*
root=Tk()
Button(root,text="exit",command=root.destroy).pack()
root.mainloop() 
```

或者

```
from tkinter import*
root=Tk()
Button(root,text="quit",command=quit).pack()
root.mainloop() 
```

或者

```
from tkinter import*
root=Tk()
Button(root,text="exit",command=exit).pack()
root.mainloop() 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-09-18T09:35:25.163

下面的代码片段。我提供了一个小场景。

```
import tkinter as tk
from tkinter import *

root = Tk()

def exit():
    if askokcancel("Quit", "Do you really want to quit?"):
        root.destroy()

menubar = Menu(root, background='#000099', foreground='white',
               activebackground='#004c99', activeforeground='white')

fileMenu = Menu(menubar,  tearoff=0, background="grey", foreground='black',
                activebackground='#004c99', activeforeground='white')
menubar.add_cascade(label='File', menu=fileMenu)

fileMenu.add_command(label='Exit', command=exit)

root.config(bg='#2A2C2B',menu=menubar)

if __name__ == '__main__':
    root.mainloop() 
```

我在这里创建了一个空白窗口并在同一个窗口（根窗口）上添加了文件菜单选项，我只添加了一个选项**exit**。

然后只需为**root****运行 mainloop**。

 **尝试做一次

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-02-14T18:27:38.160

当然，您可以将命令分配给按钮，如下所示，但是，如果您正在制作 UI，建议将相同的命令分配给“X”按钮：

```
def quit(self): # Your exit routine
   self.root.destroy()

self.root.protocol("WM_DELETE_WINDOW", self.quit) # Sets the command for the "X" button 

Button(text="Quit", command=self.quit) # No () 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2020-04-21T04:01:26.913

有一个简单的单行答案：

写 -`exit()`在命令中

就是这样！

# 3d - XNA Game Studio 3D 模型编辑器建议

> ID：110924
> 
> 赞同：10
> 
> 时间：2008-09-21T12:40:06.693
> 
> 标签：3d, xna, modeling

我想创建基本的低多边形 3D 模型以在 XNA Game Studio 游戏中使用。人们推荐什么便宜/免费的工具？

有没有人有任何链接或代码片段显示如何将某种 3D 模型加载到 XNA 中，然后在屏幕上绘制它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-21T12:55:18.703

也看看 trueSpace，它刚刚变得免费 - 但正如 Evil Activity 所说；Blender 也是一个很好的建议，我只是从来没有真正习惯它的界面和如何做事。trueSpace 以这种方式更容易一些，但我认为搅拌机更强大。

我猜你知道[http://creators.xna.com/](http://creators.xna.com/)，有一个 3D 教程你可以在这里查看： [http ://creators.xna.com/en-US/education/gettingstarted](http://creators.xna.com/en-US/education/gettingstarted)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-21T12:50:38.930

[Blender](http://www.blender.org/)是一款免费的 3D 建模工具。这是一篇文章，涵盖了从 Blender 的安装、导出到将 Blender 制作的模型导入 XNA 环境：

[Blender 3D 和 XNA 入门](http://www.virtualrealm.com.au/blogs/getting-started-with-blender-3d-and-xna/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-19T05:35:21.030

生病的第二个搅拌机。

你可以在这里找到一些链接 XNA 和 Blender 的方便教程；
[http://www.stromcode.com/](http://www.stromcode.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-11-07T02:34:13.433

yes, truespace is a good choice. It's the first 3d authoring program I ever used. It's pretty simple, and it's free. you can find tutorials on the official website [http://www.caligari.com/](http://www.caligari.com/)

If you don't plan on selling your game, you can download 3D Studio MAX student license. It's the full program for 3 years for free. The learning curve is pretty easy too, especially for modeling. You can find good tutorials on [digital tutors](http://www.digitaltutors.com/training/3ds_max-tutorials). some are free, some are not. There's also 3Dbuzz you can check out for tutorials.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-23T00:44:21.693

作为一名建模师和纹理艺术家工作了 3 年多，我尝试了大多数建模工具，并不断回到[Nevercenter 的 Silo](http://www.nevercenter.com/)。它是我有幸使用过的最优雅、设计精良的 sub-d 多边形建模应用程序。一旦你使用了 Silo，你会想知道为什么有人使用其他东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-23T00:48:43.430

胡[迪尼](http://www.sidefx.com/) 它也有一个免费的工具，[学徒](http://www.sidefx.com/index.php?option=com_download&Itemid=208&task=apprentice)。

# java - 阅读java中的转移套接字？

> ID：110926
> 
> 赞同：0
> 
> 时间：2008-09-21T12:41:08.813
> 
> 标签：java, ftp, tcp, ipfw

如果我要创建一个 ipfw 转移规则以将所有 FTP 流量转发到特定套接字，是否可以使用 Java 连接到 socekt 并读取数据包信息？如果是这样，我将如何阅读/写入scoket？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-21T13:19:29.533

不明白你的意思。如果您使用的是转移规则，那么您所要做的就是在您的 java 应用程序中侦听该 ip:port 组合，然后一切就绪。如果要读取实际的目标端点信息，则需要为此使用 JNI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-11-09T16:42:38.243

是的，它就像一个普通的套接字，你可以读取/写入它，但是在 Mac OS X 上，如果你确实想修改数据包并将其插入回去，你需要先重新计算 tcp 校验和。

[http://blog.loudhush.ro/2006/08/using-divert-sockets-on-mac-os-x.html](http://blog.loudhush.ro/2006/08/using-divert-sockets-on-mac-os-x.html)

这是一篇很好的文章，介绍了 Mac OS X 上转移套接字的基本用法。您实际上可以在 C 代码中创建规则。

对于您的情况，只需扫描数据包的 TCP 或 IP 标头并解析您想要的任何内容

# text-editor - 在当今时代，是否有正当理由在代码文件中强制规定最大宽度为 80 个字符？

> ID：110928
> 
> 赞同：170
> 
> 时间：2008-09-21T12:43:03.973
> 
> 标签：text-editor, coding-style, policy

严重地。在 22 英寸显示器上，它可能只覆盖屏幕的四分之一。我需要一些弹药来打破这条规则。

* * *

我并不是说不应该有限制。我只是说，80 个字符非常小。

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2008-09-21T13:21:48.187

我认为将代码保留为 80（或 79）列的做法最初是为了支持人们在 80 列的哑终端或 80 列的打印输出上编辑代码。这些要求现在大部分已经消失，但仍然有充分的理由保留 80 列规则：

*   在将代码复制到电子邮件、网页和书籍时避免换行。
*   并排查看多个源窗口或使用并排差异查看器。
*   为了提高可读性。无需左右扫视即可快速读取窄码。

我认为最后一点是最重要的。尽管过去几年显示器的尺寸和分辨率都在增长，但**眼睛却没有**。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2008-09-21T14:05:28.877

80 列文本格式的起源早于 80 列终端——IBM 打孔卡可以追溯到[1928 年，它的遗产是](http://www-03.ibm.com/ibm/history/history/year_1928.html)[1725 年](https://dave.autonoma.ca/blog/2019/06/06/web-of-knowledge/)的纸带！这让人想起[（杜撰的）](http://www.snopes.com/history/american/gauge.asp)故事，即美国的铁路轨距是由罗马英国的战车车轮的宽度决定的。

*我有时觉得它有点束缚，但有一些*标准限制是有意义的，所以它是 80 列。

[这是Slashdot](http://ask.slashdot.org/article.pl?sid=07/07/07/1931246)涵盖的相同主题。

这是一个老式的 Fortran 声明：

![FORTRAN 打卡](https://upload.wikimedia.org/wikipedia/commons/thumb/5/58/FortranCardPROJ039.agr.jpg/600px-FortranCardPROJ039.agr.jpg)

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2008-09-21T13:28:05.613

如今，80 个字符是一个荒谬的限制。在有意义的地方拆分代码行，而不是根据任意字符限制。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2008-09-21T12:48:13.243

为了每个没有 22 英寸宽屏显示器的人，你应该这样做。就我个人而言，我使用的是 17 英寸 4:3 显示器，我发现它的宽度绰绰有余。但是，我也有 3 个这样的显示器，所以我还有很多可用的屏幕空间。

不仅如此，如果行太长，人眼实际上会出现阅读文本的问题。很容易迷失在哪条线上。报纸有 17 英寸宽（或类似的东西），但你看不到它们在页面上一直写着，杂志和其他印刷品也是如此。如果将列保持窄，实际上更容易阅读。

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2008-09-24T00:46:22.983

当您有一个重复的语句序列时，如果将它们分成几行以使差异垂直对齐，则可以更容易地看到相似之处和不同之处。

我认为以下内容比将其拆分为多行时更具可读性：

```
switch(Type) {
case External_BL:   mpstrd["X"] = ptDig1.x - RadialClrX;    mpstrd["Y"] = ptDig1.y - RadialClrY;    break;
case External_BR:   mpstrd["X"] = ptDig1.x + RadialClrX;    mpstrd["Y"] = ptDig1.y - RadialClrY;    break;
case External_TR:   mpstrd["X"] = ptDig1.x + RadialClrX;    mpstrd["Y"] = ptDig1.y + RadialClrY;    break;
case External_TL:   mpstrd["X"] = ptDig1.x - RadialClrX;    mpstrd["Y"] = ptDig1.y + RadialClrY;    break;
case Internal_BL:   mpstrd["X"] = ptDig1.x + RadialClrX;    mpstrd["Y"] = ptDig1.y + RadialClrY;    break;
case Internal_BR:   mpstrd["X"] = ptDig1.x - RadialClrX;    mpstrd["Y"] = ptDig1.y + RadialClrY;    break;
case Internal_TR:   mpstrd["X"] = ptDig1.x - RadialClrX;    mpstrd["Y"] = ptDig1.y - RadialClrY;    break;
case Internal_TL:   mpstrd["X"] = ptDig1.x + RadialClrX;    mpstrd["Y"] = ptDig1.y - RadialClrY;    break;
} 
```

**更新：**在评论中，有人建议这将是执行上述操作的更简洁的方式：

```
switch(Type) {
  case External_BL: dxDir = - 1; dyDir = - 1; break;
  case External_BR: dxDir = + 1; dyDir = - 1; break;
  case External_TR: dxDir = + 1; dyDir = + 1; break;
  case External_TL: dxDir = - 1; dyDir = + 1; break;
  case Internal_BL: dxDir = + 1; dyDir = + 1; break;
  case Internal_BR: dxDir = - 1; dyDir = + 1; break;
  case Internal_TR: dxDir = - 1; dyDir = - 1; break;
  case Internal_TL: dxDir = + 1; dyDir = - 1; break;
}
mpstrd["X"] = pt1.x + dxDir * RadialClrX;
mpstrd["Y"] = pt1.y + dyDir * RadialClrY; 
```

虽然它现在适合 80 列，但我认为我的观点仍然成立，我只是选择了一个坏例子。它仍然证明在一行中放置多个语句可以提高可读性。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2008-10-03T00:55:56.357

以默认大小打印等宽字体（在 A4 纸上）为 80 列 x 66 行。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2008-09-21T12:45:26.260

我利用更大屏幕的优势让多段代码彼此相邻。

你不会从我这里得到任何弹药。事实上，我不希望看到它发生变化，因为在紧急情况下，我仍然会看到需要从文本控制台更改代码的罕见情况。

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2008-09-21T13:17:17.807

超长的行更难阅读。仅仅因为你可以在你的显示器上显示 300 个字符并不意味着你应该让行那么长。300 个字符对于一个语句来说也太复杂了，除非你别无选择（一个需要一大堆参数的调用。）

作为一般规则，我使用 80 个字符，但如果强制执行它意味着在不受欢迎的位置放置换行符，我会超出这个范围。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2008-09-21T14:25:03.527

我唯一强制保持在 80 个字符以内的是我的评论。

就个人而言...我将所有的脑力（几乎没有）都投入到正确的编码上，当我可以花时间在下一个功能上时，不得不返回并将所有内容分解为 80 个字符的限制是很痛苦的. 是的，我想 Resharper 可以为我做这件事，但是让我有点害怕的是，第 3 方产品正在对我的代码布局做出决定并对其进行更改（“请不要将我的代码分成两行 HAL。HAL？” ）。

也就是说，我确实在一个相当小的团队工作，而且我们所有的显示器都相当大，所以担心困扰我的程序员同事的事情就这一点而言并不是一个大问题。

似乎有些语言为了获得更多收益而鼓励更长的代码行（简写 if then 语句）。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2008-09-21T13:19:21.343

我有两个 20" 1600x1200 显示器，我坚持使用 80 列，因为它可以让我并排显示多个文本编辑器窗口。使用 '6x13' 字体（trad.xterm 字体）80 列占用 480 像素加上滚动条和窗口边框。这允许一个人在 1600x1200 显示器上拥有三个这种类型的窗口。在 Windows 上，Lucida Console 字体不会完全做到这一点（最小可用尺寸为 7 像素宽），但 1280x1024 显示器将显示两列和[HP LP2465](http://h10010.www1.hp.com/wwpc/uk/en/sm/WF05a/382087-382087-64283-444767-444767-1844961.html)等 1920x1200 显示器将显示 3。它还会在侧面为 Visual Studio 的各种资源管理器、属性和其他窗口留出一点空间。

此外，很长的文本行很难阅读。对于文本，最佳值为 66 个字符。有一点是，过长的标识符开始适得其反，因为它们难以连贯地布局代码。良好的布局和缩进为代码结构提供了视觉提示，并且某些语言（想到 Python）为此明确使用缩进。

但是，Java 和 .Net 的标准类库往往具有非常长的标识符，因此不一定能保证能够做到这一点。在这种情况下，使用换行符布局代码仍然有助于使结构明确。

请注意，您可以[在此处](http://www.hassings.dk/lars/fonts.html)获得“6x13”字体的 Windows 版本。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2008-09-21T12:53:51.263

其他答案已经很好地总结了事情，但是当您可能想要将一些代码复制并粘贴到电子邮件中时，或者如果不是代码然后是差异，也值得考虑。

那是拥有“最大宽度”有用的时候。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2012-02-01T19:14:56.410

人们说长行代码往往很复杂。考虑一个简单的 Java 类：

```
public class PlaintiffServiceImpl extends RemoteServiceServlet implements PlaintiffService { 
```

这是 94 个字符长，并且类名很短（按照 GWT 标准）。两行很难阅读，而单行可读性很强。务实并因此允许“向后兼容性”，我会说 100 个字符是正确的宽度。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2008-09-21T13:07:25.927

您不是唯一要维护您的代码的人。

下一个人可能有 17 英寸的屏幕或可能需要大字体来阅读文本。限制必须在某个地方，并且由于以前的屏幕限制，惯例是 80 个字符。你能想到任何新标准 (120) 和为什么使用“这就是我的 Xpt 字体适合我的显示器的东西”是一个好主意？

请记住，每条规则总是有例外，所以如果你有一个特定的代码行或代码块，超过 80 个字符是有意义的，那么你就是一个反叛者。

但请先花点时间思考“这段代码真的那么糟糕，不能保存在 80 个字符内吗？”

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2008-09-21T14:47:24.063

在 Linux 编码标准中，它们不仅保持 80 个字符的限制，而且还使用 8 个空格缩进。

部分原因是，如果您到达右边距，您应该考虑将缩进级别移动到单独的函数中。

这将使代码更清晰，因为无论缩进长度如何，具有许多嵌套控制结构的代码都难以阅读。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2008-10-18T08:56:48.333

我已经将我的代码扩大到 100 个字符，这在我的 Macbook 上不到一半的屏幕中可以轻松容纳。120 个字符可能是行开始变得太长和太复杂之前的限制。你不想变得太宽，否则你鼓励复合语句和深度嵌套的控制结构。

右边距是大自然告诉您执行[额外方法重构](http://www.refactoring.com/catalog/extractMethod.html)的方式。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2008-10-18T09:04:27.053

我想知道这是否会在当今时代引起更多问题。请记住，在 C（可能还有其他语言）中，函数名的长度是有规则的。因此，您经常会在 C 代码中看到非常难以理解的名称。好消息是他们不使用很多空间。但每次我查看 C# 或 Java 等语言的代码时，方法名称通常很长，这使得将代码保持在 80 个字符的长度几乎是不可能的。我认为今天 80 个字符无效，除非您需要能够打印代码等。

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2008-09-21T13:18:26.337

正如其他人所说，我认为它最适合（1）打印和（2）垂直并排显示多个文件。

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2008-09-21T17:29:00.900

我喜欢将宽度限制在 100 个字符左右，以便在宽屏显示器上允许两个 SxS 编辑器。我认为不再有任何充分的理由限制 80 个字符。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2011-04-14T18:41:38.257

作为我的雇主编码指南的作者，我将行长从 80 增加到 132。为什么这个值？好吧，就像其他人指出的那样，**80 是许多旧硬件终端的长度。132也是！**这是终端处于*宽模式*时的线宽。任何打印机也可以在宽模式下使用压缩字体制作硬拷贝。

不留在80的原因是我宁愿

*   更喜欢具有标识符含义的较长名称
*   不用担心 C 中结构和枚举的 typedef（它们很糟糕，它们隐藏了有用的信息！如果您不相信，请在“Deep C Secrets”中询问 Peter van der Linden），因此代码`struct FOO func(struct BAR *aWhatever, ...)`不仅仅是 typedef 狂热者的代码.

在这些规则下，每行只有 80 个字符会导致丑陋的换行比我认为可以接受的更频繁（主要是在原型和函数定义中）。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2008-10-03T01:05:53.383

已经有很多很好的答案，但值得一提的是，在您的 IDE 中，左侧可能有一个文件列表，右侧有一个函数列表（或任何其他配置）。

你的代码只是环境的一部分。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2009-04-14T14:48:02.927

使用比例字体。

我是认真的。我通常可以在一行中获得 100-120 个字符的等效值，而不会牺牲可读性或可打印性。事实上，使用好的字体（例如，Verdana）和语法着色会更容易阅读。这几天看起来有点奇怪，但你很快就习惯了。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2008-09-21T13:04:35.247

我认为不强制使用 80 个字符意味着最终会自动换行。
IMO，为最大宽度线选择的任何长度并不总是合适的，换行应该是一个可能的答案。
这并不像听起来那么容易。

它在提供自动换行的 jedit （[来源：][[jedit.org](http://www.jedit.org/images/logo64.png)][）中实现][![替代文字](https://i.stack.imgur.com/FfdK0.png)](https://i.stack.imgur.com/FfdK0.png)

但它在很久以前就[在日食中被深深地错过了](https://bugs.eclipse.org/bugs/show_bug.cgi?id=35779)！（实际上是从 2003 年开始），主要是因为[文本编辑器的自动换行](http://wiki.eclipse.org/index.php/Word_Wrap_for_Text_Viewer_and_Editor)涉及：

*   换行信息用于文本查看器、代码导航、垂直标尺。
*   诸如转到行、行编号标尺列、当前行突出显示、保存文件等功能需要展开的行信息。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2008-09-24T01:14:44.103

我尝试将内容保持在 80 个字符左右，原因很简单：太多意味着我的代码变得太复杂了。过于冗长的属性/方法名称、类名称等会造​​成与简洁名称一样多的危害。

我主要是一名 Python 编码员，所以这产生了两组限制：

1.  不要写长行代码
2.  不要缩进太多

当您开始达到两个或三个缩进级别时，您的逻辑就会变得混乱。如果您不能在同一页面上保留单个块，那么您的代码就会变得过于复杂和难以记住。如果您不能将单行保持在 80 个字符以内，那么您的行就会变得过于复杂。

在 Python 中以牺牲可读性为代价编写相对简洁的代码（参见 codegolf）很容易，但以牺牲可读性为代价编写冗长的代码更容易。辅助方法不是坏事，辅助类也不是。过度抽象可能是一个问题，但这是编程的另一个挑战。

如果对 C 等语言有疑问，请编写辅助函数并内联它们，如果您不想调用另一个函数并跳回的开销。在大多数情况下，编译器会为您智能地处理事情。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2008-09-24T01:41:15.583

我整天都在并排比较，我没有一个该死的 22 英寸显示器。我不知道我会不会。当然，这对于喜欢箭头编码和 300 字符行的纯写程序员来说没什么兴趣。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2008-09-21T12:46:46.680

实际上，我对自己的代码遵循了类似的规则，但这只是因为将代码打印到 A4 页面 - 80 列的宽度大约是我想要的字体大小的正确宽度。

但这是个人喜好，可能不是你想要的（因为你想让弹药走另一条路）。

你不质疑限制背后的原因 - 严肃地说，如果没有人能提出一个很好的理由，那么你就有一个很好的理由将它从你的编码标准中删除。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2008-10-20T13:31:14.863

是的，因为即使在这个时代，我们中的一些人也在终端上编码（好吧，主要是终端模拟器），显示器只能显示 80 个字符。所以，至少对于我所做的编码，我真的很欣赏 80 字符规则。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-21T13:51:54.807

我仍然认为限制不限于视觉部分。当然，现在显示器和分辨率足够大，可以在一行中显示更多字符，但它是否增加了可读性？

如果确实执行了限制，那么重新考虑代码而**不是**将所有内容放在一行中也是一个很好的理由。缩进也是一样——如果你需要更多的层次，你的代码需要重新考虑。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-21T19:03:06.120

在 80 个字符处中断是您**在**编码时所做的事情，而不是之后。当然，评论也是如此。大多数编辑可以帮助您了解 80 个字符的限制在哪里。

（这可能有点 OT，但是在 Eclipse 中，有一个选项可以在保存代码时格式化代码（根据您想要的任何规则）。起初这有点怪异，但过了一段时间你开始接受与生成的代码一样，格式化不再掌握在您手中。）

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-09-24T00:59:10.473

如果我们有其中之一[，](https://stackoverflow.com/questions/112996/what-toolapplicationwhatever-do-you-wish-existed#113226)我们将不会进行此讨论！;-)

但说真的，人们在回答中提出的问题是非常合理的。然而，最初的发布者并没有反对限制，只是 80 列太少了。

通过电子邮件发送代码片段的问题有一些优点。但是考虑到大多数电子邮件客户端对预先格式化的文本所做的邪恶事情，我认为换行只是您的问题之一。

至于打印，我通常发现 100 个字符行将*非常*适合打印页面。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2008-12-17T03:32:40.973

我尝试将行数保持在 80 列以下。最强烈的原因是我经常发现自己在命令行工作时使用`grep`并`less`浏览我的代码。我真的不喜欢终端如何打破长的源代码行（它们毕竟不是为那项工作而生的）。另一个原因是，我发现如果所有内容都符合要求并且没有被编辑器破坏，它看起来会更好。例如，长函数调用的参数在彼此和类似的东西下方很好地对齐。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2008-12-17T03:35:40.470

我强迫我的学生挤进 80 列**，这样我就可以打印出他们的代码并进行标记**。

大约 17 年前，我让自己的代码扩展到 88 列，因为我开始使用[Noweb](http://www.cs.tufts.edu/~nr/noweb/)做所有事情，而 88 列适合使用 TeX 打印的精美文档。

我只缩进了两个空格，但额外的空间很棒。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2009-01-26T16:45:43.587

我们最近做了一个调查。几乎每个人都在 gnome 终端中使用*vim*，如果我们进行垂直拆分，列数是 78 作为标准字体大小和屏幕分辨率 1280x1024。

所以我们都同意一个列数为（大约）75 个字符的编码标准。没关系。

# ruby-on-rails - 间隔轨道缓存

> ID：110930
> 
> 赞同：1
> 
> 时间：2008-09-21T12:44:01.897
> 
> 标签：ruby-on-rails, ruby, caching

我需要缓存一个页面。为此，我使用了 ActionController 的 caches_page。但现在，我想每 10 分钟过期并重新生成一次。我有哪些选择？

后来：我不想为此使用任何外部工具，例如cron。重要的一点是**基于间隔**的缓存到期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-21T15:23:34.710

如果你想让片段超时，你也可以使用[它。](http://code.google.com/p/timedcachedfragment/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-21T13:46:55.333

AFAIK rails 页面缓存根据请求比较缓存时间并在必要时重新生成。如果您需要强制刷新该缓存，请查看 Sweepers。 [http://www.railsenvy.com/2007/2/28/rails-caching-tutorial#sweepers](http://www.railsenvy.com/2007/2/28/rails-caching-tutorial#sweepers)

# html - 我应该如何在 HTML 表单中的 GET 和 POST 方法之间进行选择？

> ID：110933
> 
> 赞同：23
> 
> 时间：2008-09-21T12:45:04.607
> 
> 标签：html, http

我想知道使用这两种方法的所有利弊。特别是对网络安全的影响。

谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-09-21T12:48:01.747

要在它们之间进行选择，我使用这个简单的规则：

获取读取。（读取数据并显示）

POST 用于写入的任何内容（即更新数据库表、删除条目等）

另一个考虑是 GET 受制于最大 URI 长度，当然不能处理文件上传。

[这个页面有一个很好的总结](http://www.cs.tut.fi/~jkorpela/forms/methods.html)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-09-21T13:27:35.100

GET 和 POST 都有自己的位置。您不应该依赖它们中的任何一个来确保安全。

获取请求

*   很容易缓存
*   很容易收藏
*   受 URI 长度限制
*   可能会在访问日志中显示参数

POST 请求

*   允许文件上传
*   允许大数据
*   浏览器地址栏不显示参数

您是否希望表单提交的结果可以**收藏**（想想 Google 搜索）？使用**GET**。

您希望表单提交的结果是**可缓存**的吗？使用**GET**。

您的请求**不是幂等**的（安全可重复）吗？使用**POST**然后[始终重定向到适合通过 HTTP GET 获取的页面](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

你需要**文件上传**吗？使用**POST**。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-09-21T12:49:06.970

GET 不应该有副作用：[http ://www.w3.org/DesignIssues/Axioms.html#state](http://www.w3.org/DesignIssues/Axioms.html#state)

当提交有副作用时，应使用 POST 表单。

这两种方法对安全性都没有任何实际影响，如果您担心安全性，请使用 SSL。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-21T14:28:18.463

除了来自例如 Micke 的精彩回答之外，我想指出浏览器界面如何处理使用 GET 与 POST 请求的页面的一个重要区别。

如果您重新加载 GET 请求的页面，浏览器将再次获取 URL（从服务器或缓存中），但是如果您重新加载 POST，浏览器将显示一个关于重新发布数据的稍微令人困惑的警告弹出窗口，用户可能会然后取消（导致更加混乱的“过期”页面）。如果您使用返回或历史记录返回到作为 POST 的结果的页面，同样的事情。

这当然是基于不同的语义：GET-requests 应该是幂等的——也就是说，你可以做几次而不改变任何东西。另一方面，帖子用于具有副作用的操作，例如注册某事，通过某事，在论坛上发表评论。通常，用户在重新加载时不希望重复此操作，因此警告是明智的。但是，如果操作可以安全地重复（如搜索），请避免使用 POST，因为警告不是必需的，只会让用户感到困惑。

关于安全性的一点：如果您在 GET 表单中有一个密码字段，则当您输入密码时，密码将被屏蔽以防窥探，但是，当您点击提交时，它将在地址栏中清晰可见！但除此之外，GET 和 POST 都没有真正的安全性，因此如果担心，请使用 SSL。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-21T12:49:53.520

查看[RFC 2616：第 9 节“HTTP/1.1 方法定义”](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-21T12:53:35.507

GET 在 URL 中传递数据，POST 在 HTTP 内容中传递相同的数据，从安全角度来看两者完全相同（也就是说，完全不安全，除非你自己做一些事情，比如使用 HTTPS）。

GET 受浏览器和 Web 服务器支持的最大 URL 长度限制，因此只能以短格式使用。

从 HTTP 标准的角度来看，GET 请求不应该改变站点，并且浏览器/蜘蛛更有可能自己发出 GET 请求（没有用户实际点击某些东西）然后 POST 请求。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-05T11:37:38.327

HTTP 中的 GET 和 POST 方法是使用 HTTP（超文本传输​​协议）协议将数据从客户端传输到服务器的两种最流行的方法。GET 和 POST 都可用于发送请求和接收响应，但它们之间存在显着差异。

**什么是 GET HTTP 请求？** HTTP 协议支持在使用 HTTP 或 HTTPS 协议发送请求时可以使用的几种请求方法。GET 就是其中之一。顾名思义，GET 方法是从 HTTP Server 检索页面。GET 请求的一个重要属性是任何请求参数或查询参数都作为 URL 编码字符串传递，并使用“？”附加。字符使其不安全，因为您在 URL 字符串中传递的任何信息对每个人都是可见的。

**何时使用 HTTP GET 请求** 正如我所说，GET 方法不安全，因此不是传输机密数据的合适选择，但 GET 方法对于从 Web 服务器检索静态内容非常有用。下面是一些使用 GET 方法有意义的示例： 重复请求没有副作用。例如单击指向另一个页面的链接。点击链接两次或三次都没关系，这也使服务器的浏览器有机会捕捉响应以更快地检索。您没有传递任何敏感和机密信息。相反，您只需传递一些配置数据或会话 ID。您希望 HTTP GET 请求指向的 URL 可以加入书签。需要发送到服务器的数据不大，可以安全地容纳所有浏览器支持的最大 URL 长度。

**什么是 POST HTTP 方法** POST HTTP 请求由方法表示：HTTP 请求中的 POST。在 POST 方法中，数据不作为 URL 字符串的一部分发送到服务器，而是在 POST 中，数据作为消息正文的一部分发送。几乎所有的身份验证请求都是通过 HTTP 世界中的 POST 方法发送的。POST 方法是安全的，因为数据在 URL 字符串中不可见，并且可以使用 HTTPS 安全地加密以提高安全性。所有发送到服务器的敏感和机密信息都必须通过 POST 请求并通过 HTTPS（带有 SSL 的 HTTP）。POST 方法也用于向服务器提交信息，任何可以改变应用程序状态的信息，例如将商品添加到购物车、付款等。这里有一些示例，您应该考虑在 HTTP 请求中使用 POST 方法：如果您是，请使用 POST在 GET 的情况下发送无法放入 URL 的大数据。如果您将敏感和机密信息传递给服务器，例如 user_id、密码、帐号等，请使用 POST 方法。如果您提交可以改变应用程序状态的数据，例如将项目添加到购物车以传递该购物车进行支付处理，请使用 POST 方法。如果您正在编写安全应用程序并且不想在 URL 中显示查询参数，请使用 POST。

**HTTP 协议中 GET 和 POST 方法** 之间的区别 GET 和 POST 之间的大部分区别已经在各自的章节中讨论过。当您想要选择 GET 和 POST 时，这一切都取决于要求，并且了解这些差异有助于您做出决定。

GET 方法在 URL 字符串中传递请求参数，而 POST 方法在请求正文中传递请求参数。GET 请求只能传递有限数量的数据，而 POST 方法可以向服务器传递大量数据。与 POST 请求不同，GET 请求可以被添加书签和缓存。GET 主要用于查看目的（例如 SQL SELECT），而 POST 主要用于更新目的（例如 SQL INSERT 或 UPDATE）。

[从这里引用](http://javarevisited.blogspot.in/2012/03/get-post-method-in-http-and-https.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-21T12:48:41.480

如果您要传递密码或其他敏感信息等内容，请始终使用 POST 并确保您使用的是 SSL，这样数据就不会以明文形式在客户端和服务器之间传输。

安全方面，使用 GET 的缺点是所有提交的数据都将在 URL 中，因此本地存储在客户端的浏览器历史记录中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-21T12:50:10.010

如果您希望结果可收藏，请使用 GET。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-21T12:52:39.613

GET 可能更容易调试，因为您无需任何其他工具即可监控地址栏中的所有发送值。但是最大有一个限制。长度，所以有一些变量你可能会超过这个。

现在 POST 并不太安全，因为使用 Fiddler & co 等免费工具。你可以很容易地掌握这些价值观。但是，您可以通过这种方式提交的值的长度或数量并没有真正的限制，并且您的 URL 看起来更加用户友好。

所以我一直以来的建议是使用 POST 而不是 GET。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-21T14:53:53.143

大卫 M 的回答是我的投票。

我只是想添加一个我听说过的项目，也许它是一个都市传说？？

有人有一个网站，其中的链接仅供内部使用，以删除其网站上的文件。一切都很好，直到一个网络蜘蛛（我认为是谷歌）以某种方式找到了这些链接并愉快地跟踪每个链接，导致他网站上的所有文件都被删除。链接使用 GET 并且应该使用 POST，因为蜘蛛不遵循 POST 链接。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-21T15:00:20.103

Google 搜索引擎是 GET 表单的一个示例，因为您应该能够连续搜索两次，并且这样做不会影响结果。它还具有很好的效果，您可以链接到搜索结果页面，因为它是一个普通的 GET 请求，就像任何其他地址一样。

如前所述，使用 POST 删除或更新数据，但我想补充一点，您应该立即将用户**重定向**到 GET 页面。

[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-21T16:19:31.177

这取决于您要传输的数据类型和数据大小。使用 GET，您最多可以将 255 个字符传递到操作页面。使用 POST 方法，您没有这样的限制。POST 为数据提供了更多隐私，因为它不会显示在任何地方。您使用 GET 方法发送的任何内容都会显示在 broser 的地址栏中。

许多搜索站点通常使用 GET 方法，因为这使您可以为搜索查询添加书签。希望这可以帮助。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2010-09-16T12:19:14.103

GET 中一个经常被忽视的安全问题是 Web 服务器日志包含每个页面访问的完整 URL。对于 GET 请求，这包括所有查询参数。即使您安全地访问该站点，它也会以纯文本形式保存到服务器日志中。

服务器日志经常被站点统计应用程序使用，因此不仅仅是服务器管理员可能会看到它。

同样的警告也适用于第三方跟踪软件，例如谷歌分析——它们记录页面的完整 URL，再次包括 GET 查询参数并将其报告给分析用户。

因此，如果您提交敏感数据（密码、卡号等），即使它是通过 AJAX 并且从未出现在浏览器的实际 URL 栏中，您也应该始终使用 POST。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2008-09-21T14:13:31.650

前几天我注意到一个问题，这是一个真正的“DUH！” 我的时刻。

我们的网站上有第三方搜索引擎，他们使用 GET 方法将搜索查询发布到他们的代码中。此外，我还有一些代码可以在查询字符串中查找可能的 SQL 注入攻击。我的代码搞砸了一切，因为它正在寻找“EXEC”、“UPDATE”、“DELETE”等词。好吧，结果用户正在寻找“EXECUTIVE MBA”，而我​​的代码在“EXECUTIVE”中找到了“EXEC” "并禁止他们的IP。

相信我，我并不是在吹嘘我的代码，只是说在 GET 和 POST 之间进行选择除了“我是否希望我的密码出现在查询字符串中”之外，还有半深远的影响。

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2008-09-21T12:53:53.277

通常最好使用 POST，因为它可以更好地隐藏以进行窥探，更好地处理某些浏览器字段中的空格/编码，尤其是由于 GET 字段的总长度的限制。

* * *

## 回答 #17

> 赞同：-7
> 
> 时间：2008-09-21T12:48:24.380

这两组值很容易被黑客或其他东西监控，但 GET 的安全性较低，因为它的值非常明显（就在地址栏中）。

如果需要，请使用 SSL 以确保安全。

一个好建议：当您不发布内容但尝试获取特定页面（如产品页面）时，始终使用 POST 表单，使用查询字符串 (?value=products)。因此名称 POST 和 GET :)

# xna - 在 XNA Game Studio 中播放 ZX Spectrum AY-3-8912

> ID：110973
> 
> 赞同：3
> 
> 时间：2008-09-21T13:01:48.750
> 
> 标签：xna, sinclair, zxspectrum

是否有任何库、代码片段或类似的东西可以让我在我的 XNA Game Studio 游戏中播放[ZX Spectrum](http://en.wikipedia.org/wiki/ZX_Spectrum) .ay 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-28T16:49:40.167

您应该先将 .ay 文件转换为 wav。[这里](http://ldesoras.free.fr/prod.html#src_ay3hacking)有一个程序 可以做到这一点。它还附带源代码，因此有空闲时间的人可能会通过创建内容导入器和处理器来提供帮助？:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-26T09:19:40.727

如果你想自己编码，你需要：

1.  **Zilog Z80A CPU仿真器**

    做起来并不容易，但有一些免费的 C/C++ 源代码。我用我自己的。

2.  **3通道AY 8910/8912 PSG芯片仿真器**

    这比 CPU 简单得多。它只是音调发生器，但文档不是很好，所以你需要做很多实验。

3.  **1 位数字扬声器仿真**

    *.AY 文件并不总是使用 AY 芯片进行声音输出。有些游戏结合了 AY 和内置扬声器。我现在不确定 AY 是否也支持 covox……但如果是，那么您通常还需要在某些 i8255 芯片上包含 8/16 位单声道/立体声 covox。

4.  **键盘仿真**

5.  **可变硬件架构支持**

    *.AY 文件存储更多架构的音乐...夏普、Amstard CPC、ZX48、ZX128、克隆之间存在差异...有些晶体频率不同，有些对复制器的通道混合不同，IO 地址也可能不同更不用说内存分页问题了。

6.  **声音输出**

    这取决于目标平台，因为我不使用 XNA，所以不会触及这个主题（因为它已经被回答/接受）

**AY 播放器是这样的：**

1.  首先加载 AY 标头
2.  检测目标平台并配置您的模拟器以匹配它
3.  将 AY 二进制文件加载到目标内存区域
4.  设置寄存器并开始仿真

因此，如果您想编写 AY 播放器，您最终会编写 Z80 模拟器，因为 *.AY 文件是程序而不是录音。由于许多 AY 文件使用扬声器，因此您将需要正确模拟争用模型，否则会出现时序问题，尤其是在扬声器上可以听到...

为了提高质量，您可以应用 FIR 滤波器来模拟许多效果器使用的类似**PWM**的扬声器控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-21T13:05:26.010

如果您需要 XNA 中的声音，并且想要 XBOX 360 支持，您需要使用支持的文件格式。您最好尝试将 .ay 文件转换为 XNA 原生支持的格式。

如果您只想支持 Windows，则搜索可以播放它们的 .NET 库，如果它在 .NET 中运行，它将在 Windows 上的 XNA 中运行。

# language-agnostic - 技术词汇本地化的优缺点？

> ID：110987
> 
> 赞同：6
> 
> 时间：2008-09-21T13:10:01.910
> 
> 标签：language-agnostic, locale

这个问题是针对这里的非英语人士的。

*这有点偏颇，因为 SO 是一个“讲英语”的网络论坛，所以......另一方面，大多数开发人员无论如何都会懂英语......*

在您的地区文化中，技术词是否被翻译成地区词？例如，当 IT 使用时，“设计模式”或“工厂”或其他用德语、西班牙语等写/说的东西如何？英文单词是首选吗？本地翻译？两个版本（英语/语言环境）是否均匀使用？

### 编辑

你能用你的答案写下“设计模式”的语言环境翻译吗？

在法语中，根据 Wikipedia.fr，它是“Patron de Conception”，翻译回“概念化模型”（我猜）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-05T17:14:51.693

我们在巴西确实有一些奇怪的组合。许多书籍被翻译成葡萄牙语，但通常也有原件。将它与互联网结合起来，基本上每个人都必须知道两种语言的术语，因为你永远不知道下一个人会如何引用它们。直到最近，大多数翻译都是由一些与 IT 没有任何联系的人进行的。有些术语只是翻译不好。

设计模式就是一个很好的例子。GoF 的书被称为“Padrões de Projeto”。但 projeto 也意味着项目。所以大多数人确实称它为设计模式，但用翻译后的名称来称呼模式（Fábrica Abstrata 代替 Abstract Factory，Fachada 代替 Facade）。我看到人们将设计模式称为“Padrões de Desenho”，因为有些人确实认为 desenho（也意味着设计，但也意味着绘图）更好地反映了软件开发的设计阶段。

虽然我确实看到了翻译一些术语以使对话更流畅的价值（许多巴西人对“th”字有一些问题。葡萄牙语中不存在音素......），这通常会引起误解只是没有接触过一些晦涩难懂的翻译。坚持原来的条款显然更好。并且非常严格，当需要使用翻译时，不要选择晦涩难懂的翻译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-21T16:32:03.283

您可以将单词翻译成另一种语言，但您通常不会翻译它们所属的心态（这就是为什么好的翻译要花很多钱的原因）。在一种语言中建立一个明显组的技术术语也可能在其他语言中失去它们的语言联系。

我经常偶然发现的最糟糕的例子之一是在美国营销术语中猖獗的“体验”一词。现在的一切都是一种体验。现在有些人把它翻译成德语“Erfahrung”，这听起来很糟糕，因为它不符合德国人的心态。我们不认为使用工具或软件作为 Erfahrung。这个词可能被正确翻译，但考虑到思维方式，完全不符合标准。

编辑答案：“设计模式”的德语是Entwurfsmuster。它有时用于讲座和演示文稿。我几乎每天的有趣活动是将英语“to cast”翻译为德语动词“casten”。由于 C/C++ 中的强制转换在很长一段时间内一直被认为是邪恶的并且会导致很多错误，因此“casten”通常是一个问题。现在“casten”在发音上与德语名字“Karsten”相同。因此，每当铸造是导致错误的原因时，我可以说这一切都是由 Karsten 引起的；）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-21T15:12:55.283

来自瑞士并说德语，我投票支持将它们保持为英语。前段时间我参加了 IBM 大会（OS/2 0.9 开发者大会，I0m 在这里放弃了我的年龄）。那时大多数人对界面组件（组合框、列表框、按钮）的名称并不像今天这样熟悉，尤其是参加的许多大型机程序员。

所以一切都被同时翻译成不同的语言。我的意思是一切。这使得：

*   设置了一组错误的标准名称
*   来自不同国家的程序员无法互相交谈
*   听讲座真的很难，特别是如果你有一些以前的知识

唯一的办法是用耳机盖住一只耳朵，一边听英文原版演讲，一边尝试将事物的英文名称放在德文翻译中的正确位置。太累了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-19T20:06:25.347

我来自奥地利，因此学习德语作为第一语言。

设计模式变成了“Entwurfsmuster”，这是一个相当不错的翻译，并没有在翻译中损失太多，但我们仍然在奥地利使用英语“原始”，即使是说英语很糟糕的人也会使用英语单词。让它更容易......

为了完整性：这并不完全正确，只有世界其他地方在使用英文术语，'you' 也使用一些'foreign' 词：

*   （我最喜欢的：）[Gedankenexperiment](http://en.wikipedia.org/wiki/Gedankenexperiment)似乎众所周知
*   数学中的[特征值和特征向量](http://en.wikipedia.org/wiki/Eigenvalue)
*   [幼儿园](http://en.wikipedia.org/wiki/Kindergarden)与德国幼儿园有关

最近我偶然发现了一个名为：来自德语单词[über的](http://en.wikipedia.org/wiki/%C3%9Cber)[übernote](http://www.ubernote.com)的网站。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-21T18:51:19.937

不，谢谢。保留英文技术术语。翻译很尴尬，通常丑陋且令人困惑。

有时我在意大利遇到相反的问题。您尽量不要混合使用英语和意大利语......所以方法和类被命名为“findUserBySocialSecurityNumber”、“delete”等等。但是商业术语通常是不可能翻译的（意大利语唯一识别码是“Codice Fiscale”，它不是社会安全号码或任何东西），所以遇到名为“findUserByCodiceFiscale”的方法并不罕见，我承认这很愚蠢。:)

**编辑**：意大利语中的*设计模式*可能被翻译*为 schemi di progettazione*（或*struttura di progettazione*，根据[维基百科](http://it.wikipedia.org/wiki/Design_pattern)），但我从未在对话中听到过。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-21T19:15:20.177

波兰的大多数 IT 人员使用英语术语，波兰语仅在与业务或用户交流时使用。

就我个人而言，我倾向于将所有计算机上的语言环境设置为英语——我**知道**英语手册中使用了哪个单词，但我不确定它是如何翻译成波兰语版本的。

在我的大学里，所有的讲座都是波兰语，有时我们不知道导师什么时候使用了一些翻译过的术语（比如“kompilator skrośny”[交叉编译器]或“krotka”[在数据库中记录]）。

“Design Patterns”翻译为波兰语是“wzorce projektowe”。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-15T09:25:19.080

在我的[技术博客](http://www.bortzmeyer.org/)中，所有内容都翻译成法语。使用英语单词进行计算，仅仅因为背后的大部分概念都是在美国发明的，就像只使用德语单词进行打印（因为 Gutenberg）或使用希腊单词进行政治一样愚蠢。

当然，就像任何规则一样，也有例外。有时很难找到一个好的翻译（我使用“bit”和“pizza”，而不是法语翻译）。而且没有翻译总比翻译差好（比如“toile”换“web”，严重的翻译错误）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-21T13:12:13.670

我通常做的是丹麦语（我来自丹麦），或者在与商务人士或普通非 IT 人士交谈时使用丹麦语作为 IT 术语。如果是 IT 人员，我只使用英文术语。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-21T13:21:28.110

我是来自德国的非英语人士。

在我看来，将与编程相关的单词从英语翻译成另一种语言是没有意义的。在大学（虽然它位于德国），几乎所有的讲座都是用英语进行的，所有好的编程书籍都是用英语写的，最重要的网站（比如这个 ;-)）使用英语。所以你从一开始就习惯了“设计模式”和“工厂”之类的术语。有时我什至不认识，当我用德语与同事交谈时，我使用了一些英语技术词汇。

当你和来自不同国家的人组成一个团队时，这也很有帮助，因为你有一种共同的“语言”，每个人都明白谈论“工厂”的含义。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-21T13:34:15.147

除了其他好的答案之外，我还要补充一点，从另一种语言音译而来的编写代码只是一种糟糕的形式。使代码笨拙且不直截了当，每个人都会以不同的方式翻译它（即使是说同一种语言的人），当涉及到多国团队时，就变得无法理解。这包括变量、类和函数名称，甚至注释……
我已经为荷兰团队、土耳其团队、世界各地的团队进行了代码审查——我们实际上不得不聘请翻译来向我们解释代码。这变得非常荒谬，因为翻译人员也不懂代码......（最终我们放弃了，让当地团队给了我们一些关键词，但仍然......）

如果编码约定是本地化的，就无法理解 -*甚至本地化为我说的语言！*

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-21T14:57:36.973

Oh please, keep them english. Im a non-native english speaker from germany, and I always start to giggle when I come across german texts with technical terms translated to german.

My personal favorite is the german translation for stack:

Stack translates to Keller Datenspeicher. Translating this back to english gives something like Basement data storage. (Uh - where's the stack, and what has that to do with basement?) No young programmer here understands the german anachronisms anymore.

Stackoverflow translates to Keller Datenspeicher Überlauf btw. (Basement data storage overflow)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-11-22T18:18:37.423

这里是意大利语。通常，意大利程序员更喜欢为事物使用英文名称，尽管他们经常错误地使用它们（以及大多数英文单词）。主要原因是：

*   有些术语仅以英文形式使用，很难或不可能翻译它们：`stack`例如。

*   有些词的英文形式听起来更好：`matrice`(matrix) 是 的翻译`array`，但它很不常见，因为它听起来很糟糕。

`Design pattern`翻译为`schema di progettazione`。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-21T19:05:02.447

我认为技术术语应该保留其原始语言，几乎任何情况下都是英语。我记得关于操作系统的讲座——特别是虚拟内存——他们谈到了平铺。我想“这到底是怎么回事？我的厨房和浴室里有瓷砖，但我的记忆中没有！” 并最终陷入了深深的困惑。后来，我了解到他们以一种荒谬的方式翻译了 mempages。类似的“有趣”翻译涉及堆的储存、堆栈的地窖和其他我忘记的东西。
一般来说，我认为翻译可能对不知道你在说什么的用户友好。其他任何人都会更好地了解“真实”术语 - 即使他不知道，他也会使用“真实”术语更容易找到更多信息。

我不认为这有什么真正的缺点。医生也有自己的技术语言，建筑工人也有自己的语言，为什么程序员没有专门的语言呢？你不能在不知道“cut”这个词的情况下与外科医生交谈（我找不到一个很好的例子，因为我不懂他们的语言），因此，你不能在不知道这个词的情况下与程序员谈论他所做的事情“设计模式”、“工厂”或“最小化二元决策图”。如果您不这样做，请接受您无法与程序员交谈，或者向他询问基础知识并自己了解有关术语的更多信息。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-11-05T14:11:55.120

我的母语是阿拉伯语，我也会说法语/英语。

阿拉伯语是技术术语中最难使用的语言之一...我非常喜欢坚持使用 Tech 单词的英文版本我发现用户熟悉英语中的技术术语而不是阿拉伯语（至少是我处理过的那些）阿拉伯语使用术语必须是出于法律原因，所以我们必须以某种方式忍受一些软件

我们曾经在技术部门玩过一个小游戏，那就是猜阿拉伯语同义词，我们会因为一堆极客不知道的意想不到的词而大笑，所以想象一下对用户来说会是什么样子

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-12-15T09:31:46.803

丹麦语中的设计模式类似于“designmønstre”，但我从未见过有人使用它。

全球只有不到 600 万母语使用者，大多数计算机科学术语都没有翻译成丹麦语。而是使用英语术语。这显然使读者更容易找到有关该主题的其他国际资源，但它也使原始语言有些受到外国术语的破坏。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-11-05T13:44:03.727

> 我认为技术术语应该保留其原始语言，几乎任何情况下都是英语

让我们看看：[Stack 于 1955 年首次提出，然后于 1957 年由德国早期计算机科学家 Friedrich L. Bauer 获得专利](http://en.wikipedia.org/wiki/Stack_(data_structure)#History)。所以，全世界的每个人：从现在开始使用“Stapelspeicher”而不是“stack”和“Stapelspeicherüberlauf”而不是“stackoverflow”；）（请注意：检查 stapelspeicherüberlauf.de 是否可用...）

但我同意，最好使用（我也这样做）英文单词，因为它们无处不在。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-11-05T13:55:19.913

我是意大利人，我认为翻译的技术词听起来很有趣！

为了清楚起见，最好坚持英文版本：每个人都知道（应该知道）什么是设计模式，但“schemi di progettazione”在某种程度上更加晦涩难懂。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-11-05T13:55:38.367

虽然我会说英语，但我在一家位于法国的瑞士公司工作。以我的经验，大多数人使用英语专业术语。法国政府试图强加法国条款，但没有人注意。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-11-05T13:56:24.933

瑞典语设计模式 - designmönster。所以它和许多其他翻译一样工作得很好，但很多只是听起来很傻。通常瑞典人对英语有很好的理解，所以在谈话中，它往往是瑞典语、英语术语，有时是瑞典语术语之间的混合——通常是带有瑞典语法的英语单词:)

“你提交了分支？” 变成“Har du committat branchen”？

代码应该是全英文的。本地化的变量名称是 EVIL。********************