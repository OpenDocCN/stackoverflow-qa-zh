# StackOverflow 问答 000944000-000944999

# java - 如何在 JTable 中隐藏（使不可见）行？

> ID：944006
> 
> 赞同：2
> 
> 时间：2009-06-03T10:18:48.537
> 
> 标签：java, jtable, row

有什么办法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-10-08T06:04:23.393

您可以`RowFilter<DefaultTableModel, Object>`使用该类来过滤掉行。DefaultTableModel 可以替换为您自己的模型。要过滤，请实现该方法

```
@Override
public boolean include(Entry entry) {
    // All rows are included if no filter is set
    if (filterText.isEmpty())
        return true;

    // If any of the column values contains the filter text,
    // the row can be shown
    for (int i = 0; i < entry.getValueCount(); i++) {
        String value = entry.getStringValue(i);
        if (value.toLowerCase().indexOf(filterText) != -1)
            return true;
    }

    return false;
} 
```

访问行时，例如侦听 ListSelectionEvents，不要忘记将可见行索引转换为模型中的完整行索引。Java 也为此提供了一个函数：

```
public void valueChanged(ListSelectionEvent e) {
    ListSelectionModel lsm = (ListSelectionModel) e.getSource();

    int visibleRowIndex = ... // Get the index of the selected row

    // Convert from the selection index based on the visible items to the
    // internal index for all elements.
    int internalRowIndex = tableTexts
            .convertRowIndexToModel(visibleRowIndex);

    ...
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-03T10:28:41.187

查看[Sun 的 JTables 教程](http://java.sun.com/docs/books/tutorial/uiswing/components/table.html)并查看排序和过滤部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-06-17T17:03:42.400

您可以为每个列设置一个数组列表，这些列由过滤的值填充，并在自定义渲染器中实现这些。如果一个单元格的整行值不满足，则渲染器使用 row+1 递归调用自身。

如果单元格行确实符合条件，它会被渲染，另一个数组列表存储已经渲染的行号，最好通过示例来解释此方法在客户渲染器中扩展 JLabel

```
public Component getTableCellRendererComponent(JTable table, Object color,
        boolean isSelected, boolean hasFocus, int row, int column) {

    Object value;
    String s;

    try {
        if (row == 0) {
            drawn[column].clear();
        }// drawn is arraylist which stores cols rend
        if (row > table.getModel().getDataVector.size()) {
            return null;
        }// if we go too far
        if (drawn[column].contains(Integer.toString(row)) == true) {
            // already rendered?
            return getTableCellRendererComponent(table, color, isSelected,
                    hasFocus, (row + 1), column);
        }// render row+1

        for (int i = 0; i < filters.length; i++) {
            value = table.getModel().getValueAt(row, i);
            s = (i == 1) ? df.format(value) : value.toString();
            if (filters[i].contains(s) != true) {
                //try and put in next row, if succeeds when it reaches column 8 it adds row to
                return getTableCellRendererComponent(table, color,
                        isSelected, hasFocus, (row + 1), column);
            }
        }

        value = table.getModel().getValueAt(row, column);

        setFont(getFont().deriveFont(Font.BOLD));

        if ((isSelected == false)) {

            if ((column == 1)) {
                setForeground(Color.magenta);
            }// just formatting
            else {
                setForeground(Color.black);
                setBackground(Color.white);
            }

        } else {
            setBackground(Color.blue);
            setForeground(Color.white);
        }

        if ((column == 1))// col 1 is a date, other columns strings
        {
            setText((value == null) ? "" : df.format(value));
        } else {
            setText((value == null) ? "" : value.toString());
        }

        todayStr = df.format(new java.util.Date());
        dateval = table.getModel().getValueAt(row, 1);
        String datevalStr = df.format(dateval);
        if (datevalStr.equals(todayStr)) {
            setForeground(Color.red);
        }
        drawn[column].add(Integer.toString(row));// mark row as rendered

    } catch (Exception e) {
        e.getMessage();
        return null;
    }
    return this;
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2009-06-03T10:21:02.090

最简单的方法是从模型中删除相应的元素~~。~~

# c# - 混淆 C# 鸭子类型、隐式转换和不一致

> ID：944013
> 
> 赞同：1
> 
> 时间：2009-06-03T10:19:55.977
> 
> 标签：c#, design-decisions

每个人似乎都喜欢鸭子打字，如果它看起来像鸭子，行为像鸭子，像鸭子一样对待它。[C# 4.0 允许鸭子打字，目前在少数情况下支持它（请参阅http://www.eioba.com/a75370/how_duck_typing_benefits_c_developers](http://www.eioba.com/a75370/how_duck_typing_benefits_c_developers)中的“C# 已经使用鸭子打字很长时间” ）

现在...几乎所有东西都有一个.AnotherType()。我无法理解需要 .ToString() 的 int 但是当将列表传递给需要 obj[] 的函数时，它真的需要 .ToArray() 吗？似乎不一致。

有人可以解释不一致之处，解释为什么 .ToArray 有意义（或任何其他设计决策）或给我任何类型的见解吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-03T10:34:13.343

几乎任何集合都应该提供一种方法来允许从其他公共集合创建它，或者允许它被制成（甚至更好地被视为）其他公共集合。

数组功能强大但推理复杂，因为它们（本质上）是可变的，但允许在需要时进行一些强大的优化（例如，有效的快速排序实现确实需要能够就地交换元素）。
序列（`IEnumerable<T>`对你来说）非常棒，因为它们对自身的要求很少（包括任何修改它们的关键方式），这意味着期望它们的代码往往非常灵活且广泛有用。

能够简单而轻松地从另一个集合获取特定类型的集合，您可以编写代码来处理它需要的结构，但通过简单的翻译调用轻松与许多其他类型的结构交互。如果后来证明这是一个性能问题，您可能必须避免翻译并让更多的代码库了解底层类型，但首先您可以干净而快速地编写它。

已经存在许多期望某种集合的 api，可能的原因包括：

*   写在 2.0 更改之前，这些更改使 .Net 中的集合更加丰富
*   因为他们知道他们需要改变状态，所以他们让调用者负责提供要改变的状态（比如就地排序功能）
*   他们写得不好

值得注意的是，.Net pre 2.0 中除了数组之外缺少任何类型的强类型集合，这意味着许多 BCL api 事后看来设计不佳。BCL 中的反射 api 是显着的示例，它们在应该是 IEnumerable 时返回整个地方的数组。

因此，能够轻松地从一种显式集合过渡到另一种显式集合在现实世界中非常有用。

重新阅读您的陈述（目前这不是一个真正的问题），您似乎对从一个集合转换到另一个集合时是否应该*要求*显式转换/转换方法感到困惑。

答案是，它取决于（并且动态确实会改变一些事情，但不会改变太多）。

简单地说，如果可以像预期类型一样透明地处理集合实例，则不需要转换。一般来说，函数应该尝试尽可能少地请求（通常为 IEnumerable），然后传入的任何实际类型都将通过多态性正常工作。在某些情况下，运行时必须做一些魔术来实现这一点（数组就是一个显着的例子）但通常这很好。

事情变得复杂的地方是功能需要具体类型的地方。同样糟糕的前期设计，例如在添加 HashSet 时未能包含 ISet 接口，这意味着如果您有一个确实需要集合的方法，您将被迫使用具体类型或滚动您自己的 ISet 和支持 Set - 不愉快。某些转换操作，例如从集合到列表，在*只读*上下文中是可行的（您只需确定性地枚举集合中的所有值），但在写入上下文中不可行（您可以将某些内容添加到列表两次但不能为例子）

这就是关于几乎所有不可变的通用功能约定的帮助，通过这样做，它变得更容易不关心集合的具体实现，而只考虑它的外部可见行为（集合的红黑树或一个哈希表——对消费者来说并不重要，它只是一个集合）

动态使事情变得有些复杂，因为要保持其实现的（粗略地说）“公理”，即在使用动态时，您应该得到与静态类型相同的结果，它必须处理诸如数组上的运行时魔术之类的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T15:34:43.300

我认为 Java 集合框架远远优于 .net 一...

例如......在Linq中，当你执行和.orderBy时，你不能将它作为Icollection返回......

一切都应该继承自iCollection......

我希望收集框架在版本 4 上会非常“类似 java”

# asp.net-mvc - 创建我自己的 HtmlHelper 扩展时出现问题

> ID：944015
> 
> 赞同：3
> 
> 时间：2009-06-03T10:20:45.943
> 
> 标签：asp.net-mvc, model-view-controller, extension-methods

我有一个 HtmlHelper 的扩展方法：

```
<%= Html.MyMethod( params )%> 
```

它在视觉工作室中工作，但抛出（在运行时）：

> 编译器错误消息：CS0117：“System.Web.Mvc.HtmlHelper”不包含“MyMethod”的定义

奇怪的是，这确实有效：

```
<%= HtmlHelperExtensions.MyMethod( Html, params ) %> 
```

为什么我的方法不能作为扩展工作，而是作为普通的静态调用工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-03T13:29:04.020

我在 web.config 中找到了答案——有一个部分告诉它如何编译嵌入在 HTML 中的 C#：

```
<system.codedom>
    <compilers>
        <compiler language="c#;cs;csharp" 
                  extension=".cs"
                  type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        </compiler>
    </compilers>
</system.codedom> 
```

这缺少一个额外的标志，告诉它使用 3.5 编译器技巧，让扩展方法和匿名类型在 HTML 中工作：

```
<system.codedom>
    <compilers>
        <compiler language="c#;cs;csharp" 
                  extension=".cs"
                  type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <providerOption name="CompilerVersion" value="v3.5" />
        </compiler>
    </compilers>
</system.codedom> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T13:06:01.197

确保您在视图中导入包含扩展方法的命名空间。

```
<%@ Import Namespace="MyProject.MyExtensions"%> 
```

或者将其添加到您的 web.config 中，以便在每个视图中都可用：

```
 <namespaces>
            <add namespace="System.Web.Mvc"/>
            <add namespace="System.Web.Mvc.Ajax"/>
            <add namespace="System.Web.Mvc.Html"/>
            <add namespace="System.Web.Routing"/>
            <add namespace="MyProject.MyExtensions"/>
        </namespaces> 
```

# java - 使用 Log4j SyslogAppender 时定义 PatternLayout 的最佳实践

> ID：944020
> 
> 赞同：2
> 
> 时间：2009-06-03T10:22:15.690
> 
> 标签：java, logging, log4j, syslog, owasp

对于那些正在开发 PCI 范围内的应用程序的人，指南建议您应该将应用程序日志存储在另一层，远程连接到其他地方的系统日志服务器感觉是最佳实践。

问题变成了，PatternLayout 应该是什么样子才能最好地让人们至少每天查看他们的日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T14:30:03.350

取决于他们希望如何进行日志审查。

我建议稍微不同的转折。将日志事件展平为 XML 格式（例如 log4j XMLLayout）并保存生成的 XML 片段。

然后可以轻松地进行后期处理，例如通过 Log Parser

[http://www.microsoft.com/technet/scriptcenter/tools/logparser/default.mspx](http://www.microsoft.com/technet/scriptcenter/tools/logparser/default.mspx)

# emacs - 如何在 Emacs 中更改构建/调试的工作目录？

> ID：944023
> 
> 赞同：3
> 
> 时间：2009-06-03T10:23:34.567
> 
> 标签：emacs, ide, gdb

我正在尝试习惯使用 Emacs 进行构建和调试，尽管我遇到了一些困难。我现在最大的问题是我需要在`make -k`我的应用程序的根目录中（例如打开一个文件），并且我需要在二进制目录中运行`gdb MyApp`。

尝试让 Ctrl+Shift+B`make -k -C <my_hard_coded_dir>`和某种类型的 F5`gdb <MyApp>`从我的 bin 目录运行是徒劳的吗？没关系，如果换档键对 Emacs 来说很麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T13:20:06.237

要指定 Mx make 用于编译的内容，请指定 compile-command 变量。

```
(setq compile-command "make -c /path/to/makefile") 
```

对于你的 GDB 东西，变量是 gud-gdb-command-name，所以

```
(setq gud-gdb-command-name "gdb --anotate=3 -cd /path/to/exec") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T10:38:39.293

为了编译，我在我的 .emacs 中使用了这个 sippet

```
(global-set-key [f2]   'compile)
(global-set-key [f3]   'next-error)
(setq compile-command "u: & cd \\gbceinspielen\\trunk\\src\\compile & make -k ") 
```

命令“gdb”启动调试器，但我不知道，是否有相当于 compile-command 的命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T17:11:01.913

我个人使用 EDE 来保留具体项目的编译设置，并即时创建编译命令。[您可以在我的 cedet 配置](http://github.com/alexott/emacs-configs/blob/a67483764df95690a4a7dd53af523e600fdbefa5/rc/emacs-rc-cedet.el)中看到它是如何工作的，从第 100 行开始

# java - 引用 JAXB jar - 最佳实践

> ID：944031
> 
> 赞同：0
> 
> 时间：2009-06-03T10:25:29.243
> 
> 标签：java, jaxb, code-organization

我的第一篇文章，所以放轻松。

我正在寻找有关组织和引用第三方 jar 以在我的 j2ee Web 应用程序中使用的建议。我需要整理和引用的 jars 是 JWSDP-2.0 JAXB api jars。

我正在使用 Eclipse 和 Tomcat 5.5。我的 Web 应用程序与 Web 服务交换 XML，因此需要使用 JWSDP-2.0 中的 JAXB api 进行一些 XML 编组和解组。

我已经下载了 JWSDP-2.0 并安装到我的电脑上。我现在正在尝试找出最佳方法，使其中包含的必要 jar 文件可用于我机器上的 eclipse 中的 Web 应用程序，以及我机器上的 Tomcat 以及最终的测试和生产服务器上的 Web 应用程序。

我开始只是将 .jar 文件复制到我项目的 WEB-INF/lib 文件夹中。这意味着当部署到 Tomcat 时，jar 文件现在将在 .war 中导出。但是，我不喜欢这样，因为 jar 文件来自 JWSDP-2.0 中的几个不同的库，像这样复制它们意味着它们只是被扔在一起，而不是像 JAXB、JAXP、SAAJ 等那样很好地分开。还有，有一些名称冲突，例如，我的 Web 应用程序已经包含旧的 xml 解析 jar，例如 xalan.jar，它们已经被 Web 应用程序的不同部分使用。

然后我删除了所有这些 jar，并在 eclipse 中创建了一系列用户库，例如“jwsdp-2.0_jaxp”、“jwsdp-2.0_jaxb”，它们从 WSDP-2.0 安装中的位置引用这些 jar。就在 Eclipse 中编译我的 Web 应用程序而言，这工作得很好，但是我现在需要使这些 jar 可用于 Tomcat，而且我在最好的方法上有点卡在那里。

所以，在基本层面上，我的问题是如何获取 Tomcat 中引用的 jar 文件？

更一般地说，我正在寻找一些关于在项目中引用和包含第三方 jar 的最佳实践的建议，以期顺利部署到服务器。

如果有人可以推荐任何关于代码组织和部署的好文章/书籍/资源，这将帮助我学习这种场景的最佳实践，那就太好了

提前喝彩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T10:55:52.440

这里有几点：

*   如果您的 WAR 文件中有 JARS 冲突，那么您就是在自找麻烦。您应该整理出您的应用程序需要哪些，并丢弃其余的。否则，您将面临 tomcat 加载“错误”类的风险。
*   JWSDP 2.0*非常*旧，并且包含一个旧的、预发布的 JAXB 版本。我强烈建议使用最新的 JAXB JAR（来自[http://jaxb.dev.java.net](http://jaxb.dev.java.net)），因为早期访问 JAXB2 遇到了许多问题。
*   虽然您的 WEB-INF/lib 拥有结构化的目录布局可能会很好，但这并不重要，因为这是您的构建工件。只要您从结构化存储库中获取 JAR，您就不需要在 WAR 中保留该结构。Tomcat不在乎。通过将它们全部放在一个目录中会出现名称冲突这一事实是一个警告，您需要对这些冲突进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T10:31:29.293

组织依赖项的最佳做法是使用 maven 构建 eclipse 项目和 war for tomcat 并让他下载所需的所有依赖项：

[https://jaxb.dev.java.net/jaxb-maven2-plugin/](https://jaxb.dev.java.net/jaxb-maven2-plugin/)

# c++ - 这是 MFC 中的内存泄漏吗

> ID：944033
> 
> 赞同：8
> 
> 时间：2009-06-03T10:25:48.680
> 
> 标签：c++, mfc, memory-leaks

```
// CMyDialog inherits from CDialog 
void CMyFrame::OnBnClickedCreate()
{
    CMyDialog* dlg = new CMyDialog();
    dlg->Create( IDD_MYDIALOG, m_thisFrame );
    dlg->ShowWindow( SW_SHOW );
} 
```

我很确定这会泄漏。我真正要问的是：MFC 中是否有任何“魔法”可以在对话框被销毁时进行对话框清理。如果 dlg 不是指针而是在堆栈上声明，它将如何工作 - 当 dlg 超出范围时，析构函数不会破坏窗口。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-03T11:16:32.027

是的，在您的情况下这是内存泄漏，但是在通过使用覆盖在堆上分配无模式对话框的情况下，您可以避免内存泄漏`PostNcDestroy`。

对话框不是为自动清理而设计的（主框架窗口和视图窗口都是）。如果您想为对话框提供自动清理，那么您必须覆盖`PostNcDestroy`派生类中的成员函数。要将自动清理添加到您的类，请调用您的基类，然后执行`delete this`. 要从您的类中删除自动清理，请`CWnd::PostNcDestroy`直接调用而不是直接调用`PostNcDestroy`基类中的成员。

```
void MyDialog::PostNcDestroy() 
{

    CDialog::PostNcDestroy();
    delete this;
} 
```

这是如何工作的（来自 MSDN）：

> 销毁 Windows 窗口时，发送到窗口的最后一条 Windows 消息是 WM_NCDESTROY。该消息的默认 CWnd 处理程序 (CWnd::OnNcDestroy) 将从 C++ 对象中分离 HWND 并调用虚函数 PostNcDestroy。某些类会覆盖此函数以删除 C++ 对象。
> 
> “delete this”将释放与 C++ 对象关联的所有 C++ 内存。即使默认的 CWnd 析构函数在 m_hWnd 为非 NULL 时调用 DestroyWindow，但这不会导致无限递归，因为在清理阶段句柄将被分离并为 NULL。

您还可以参考 MSDN（[销毁窗口对象](https://msdn.microsoft.com/en-us/library/5zba4hah.aspx)）了解更多详细信息。

**笔记：**

这适用于可以在**堆上**分配的无模式对话框。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-03T10:28:35.523

是的，这是一个泄漏。是的，如果对象是堆栈分配的，则窗口将被销毁。使用对话框作为堆栈分配的对象对于模态对话框来说是典型的——您调用一个方法来将对话框显示为模态窗口，并且该方法仅在对话框关闭并且对象在此之后被销毁时返回。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-03T10:30:05.300

如果你手动调用**`Create`**一个对话框，你也必须手动调用**`Destroy`**它。
使用时**`DoModal()`**没有必要。

来自[MSDN](http://msdn.microsoft.com/en-us/library/yhth57kd(VS.80).aspx)：

> 使用 CWnd::DestroyWindow 函数来销毁由 Create 函数创建的对话框。

# nhibernate - 处理 NHibernate 父子集合的最佳实践

> ID：944045
> 
> 赞同：11
> 
> 时间：2009-06-03T10:29:50.123
> 
> 标签：nhibernate, domain-driven-design

所以在一个典型的模型中，你有一个可以有很多孩子的父母和一个只能有一个父母的孩子，你如何管理孩子的添加。我一直在使用这种方法；

```
public class Parent
{
    public Parent()
    {
        Children = new List<Child>();
    }

    public IList<Child> Children
    {
        get;
        private set;
    }
}

public class Child
{
    public Parent Parent
    {
        get;
        set;
    }
}

var child = new Child();
var parent = new Parent();
parent.Children.Add(child);
child.Parent = parent; 
```

问题是，无论我想添加一个新的孩子，我都必须记住添加对孩子和父母的引用，这有点痛苦。我可以向父类添加一个 AddChild 方法，并让它负责添加子类 - 现在的问题是有两种方法可以添加子类，通过 Children 属性和方法。那么这是一个更好的解决方案吗？

```
public class Parent
{
    public Parent()
    {
        children = new List<Child>();
    }

    private IList<Child> children
    {
        get;
        private set;
    }

    public IEnumerable<Child> Children
    {
        get
        {
            return children;
        }
    }

    public void AddChild(Child child)
    {
        children.Add(child);
        child.Parent = this;
    }
} 
```

有没有关于这方面的最佳实践的指导，你是做什么的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-03T10:48:45.857

这根本不是 NHibernate 问题。

您应该实现 AddChild 方法。这些类负责它们的一致性，因此它们不应该公开任何不应该可用的东西。例如，应该隐藏（可变）子列表。公开 IEnumerable 是个好主意。

您的第二个代码是一个很好的起点。您可能需要更多方法，例如 RemoveChild 或 CoundChildren。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-03T10:52:12.683

我这样做：

```
public class Parent
{
    private ISet<Child> _children = new HashedSet<Child>();

    public ReadOnlyCollection<Child> Children
    {
        get{ return new List(_children).AsReadOnly(); }
    }

    public void AddChild( Child c )
    {
       if( c != null && !_children.Contains (d) )
       {
          c.Parent = this;
          _children.Add (c);
       }
    }
} 
```

所以，事实上，Stefan 也是这么说的。我只是公开了 Children 列表的只读副本，以便您可以轻松地遍历父级的子级，并获取父级拥有的子级数量。必须使用 AddChild 和 RemoveChild 成员方法向父级添加和删除子级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T17:37:00.867

我这样做除了我不使用私有列表的属性

```
private IList<Child> _children
public IEnumerable<Child> Children
{
    get
    {
        return children;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-10-05T07:43:33.767

我将公共 IEnumerable 与 Add|Remove 方法一起使用。

但是我不太喜欢它，因为它不直观，并且会破坏类定义。

我想知道为什么人们不使用 CustomCollection 来覆盖 Add、Remove、Replace 函数？（就像它在 MS 代码中无处不在）？？？？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-03-20T04:08:20.727

我支持这个问题的公认解决方案，但是提出的解决方案并不完整，因为使用私有字段需要在映射器中进行一些额外的配置。为了他人的利益，以下是完整的解决方案：

```
public partial class Test
{
    private readonly IList<Child> children = new List<Child>();
    public virtual IEnumerable<Child> Children
    {
        get
        {
            return children;
        }
    }
} 
```

请注意，公开的集合必须是虚拟的，NHibernate 才能使用它。我还想将其设为只读字段，在创建类时初始化，以确保它存在于所有场景中。这是相关的映射器：

```
public class TestMap : ClassMap<Test>
{
    ...
    HasMany(s => s.Children).Access.CamelCaseField();
} 
```

Access 属性告诉 NHibernate 在将值映射到模型时使用私有字段。Access 属性上还有其他选项允许使用各种命名配置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T21:20:34.053

如果您的数据库中有一个外键，并且您正在使用 Identity(SQL Server) 来生成您的主键，那么您将*需要*从子级到父级的反向链接。否则，插入会抱怨孩子，因为 nhibernate 需要为父 ID 来回做一些事情，但它还没有完成。

我们最终做了什么来摆脱反向链接：使用 NHibernate HiLo 生成器。这样，NHibernate 始终拥有插入父/子关系所需的 Id。

<3！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-06-03T11:49:29.743

我不喜欢使我的实体接口混乱的所有额外`AddXXX()`和方法。相反，我有一个自定义列表，它在调用和方法`RemoveXXX()`时引发事件。`Add()``Remove()`

然后链接发生在事件处理程序中：

```
public class Course()
{
   public Course()
   {
     this.Topics = new EntityList<Topic>();
     this.Topics.AddItem += new AddItemEventHandler<Topic>(Topic_AddItem);
     this.Topics.RemoveItem += new RemoveItemEventHandler<Topic>(Topic_RemoveItem);
   }

   public EntityList<Topic> Topics { get; private set; }

   private void Topic_AddItem(Topic item, object args)
   {
     // Replace with your linking code:
     EntityLinker.Link(this).With(item, args);
   }   

   private void Topic_RemoveItem(Topic item, object args)
   {
     // Replace with your unlinking code:
     EntityLinker.Unlink(this).From(item, args);
   }   
} 
```

# php - 意大利面条php的定义？

> ID：944048
> 
> 赞同：5
> 
> 时间：2009-06-03T10:30:10.120
> 
> 标签：php, coding-style

我见过很多“意大利面条”，我只想清楚地解释什么**是**意大利面条代码，什么**不是**。只是因为我宁愿不这样做。

PHP 中的引用会有所帮助，因为这是我选择的语言。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-03T10:35:31.170

不同之处在于意大利面条代码是由其他开发人员编写的。你的代码永远不是意大利面条代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-03T10:34:37.210

术语“意大利面条代码”根本不特定于 PHP - 它适用于所有编程语言，并且在大多数语言中应该看起来非常相似（至少具有相同的范式）。但是，也许您理解这一点，并且只想要一个 PHP 示例。

关于这个主题的[维基百科文章](http://en.wikipedia.org/wiki/Spaghetti_code)似乎很清楚：

> Spaghetti code 是对源代码的贬义词，它具有复杂而复杂的控制结构，尤其是使用许多 GOTO、异常、线程或其他“非结构化”分支结构的源代码。之所以这样命名，是因为程序流看起来像一碗意大利面，即扭曲和缠结。意大利面条代码可能由多种因素造成，包括缺乏经验的程序员和在较长的生命周期中不断修改的复杂程序。结构化编程大大降低了意大利面条代码的发生率。

这个论坛主题，[我正在用 PHP 编写意大利面条代码的 100 个迹象](http://www.webmasterworld.com/forum88/2884.htm)，可能对您有些用处，因为它专门与 PHP 相关。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-03T10:32:56.747

[这是意大利面条代码](http://en.wikipedia.org/wiki/Spaghetti_code)的一个相当不错的定义。

这是一个主观术语，用于描述过于复杂、结构不良、难以遵循、不一致、依赖于副作用（特别是全局副作用）或这些的某种组合的代码。

像大多数脚本语言一样，PHP 是松散类型的。您不需要在使用变量之前声明它们。许多变量在“全局”范围内使用，并且有隐式包含文件的规定（自动加载），仅举几例。这些都不是坏特性，但是如果使用不当，它们很容易导致意大利面条式代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T10:47:58.137

意大利面条代码的[经典定义是“由于使用非结构化分支而难以遵循控制流的代码”。](http://en.wikipedia.org/wiki/Spaghetti_code)由于 PHP 与 1970 年代以来发明的大多数语言一样不支持 GOTO，因此理论上您无法编写意大利面条式代码。（更新：自 5.3 以来，PHP 确实有一个 goto 语句，但它的破坏性潜力仍然有所限制）

但是，可以通过自由使用全局变量的长脚本和函数来实现良好的近似。[深度嵌套的 if/elseif/else 级联](http://en.wikipedia.org/wiki/Cyclomatic_complexity)和错误格式的奖励积分。添加一些 HTML、JavaScript、PHP、生成 HTML 的 PHP 和生成生成 HTML 的 JavaScript 的 PHP 的混合，[确保](https://stackoverflow.com/questions/824622/problems-with-htmlspecialchars/824645#824645)没有人能够理解代码，甚至是编写代码的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T12:26:47.220

在编写良好的代码中，您应该能够清楚地遵循流程，不仅从开始到结束，而且从结束到开始（除非存在致命错误情况，在这种情况下，您的处理程序应该有回溯输出）。**每个功能都遵循一出一出的规则**。

避免意大利面条式代码的一种方法是确保 return 语句是您在函数中编写的最后一件事，并且在此之前您永远不会有 return。

如果一个函数返回一个意外的值，干净的代码将允许您从 return 语句开始并向后工作以查看它从哪里得到它的值。但是，如果代码是意大利面条，那么大约有一半的时间您将浪费数小时来困惑函数如何返回该值，直到您偶然发现埋在函数中间的第二个 return 语句。

我强烈不同意 cletus 和 Andomar 的说法，即这*都是*主观的。函数中间的 return 语句显然是意大利面条代码。

# c# - 实体模型不加载

> ID：944050
> 
> 赞同：1
> 
> 时间：2009-06-03T10:30:59.293
> 
> 标签：c#, .net, entity-framework

每当我尝试打开我的实体模型时，我都会收到一条不太有用的错误消息，指出“操作无法完成”。所以不幸的是，我没有更具体的信息。但是，我有其他模型可以正常打开，除了重命名实体之外，我没有对模型进行任何重大更改。

这种行为是否有任何已知的解决方法？我重新启动了 VS 和我的电脑，再次删除并添加了模型，但没有任何帮助，所以它一定是 .edmx 中的东西，我猜。但我没有手动修改它，所有的编译都没有错误或警告。：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T19:42:23.593

我想我修好了...

我正在使用继承，如果您在派生实体上有 0..1|... 关联，这可能会导致错误。解决方法通常是将关联设置为 1|... 关联，然后进行继承，然后将其改回。

但是在我的情况下，它以某种方式破坏了它，但是我首先将关联留在 0..1|... . 现在它起作用了。:)

我真的等不及下一个 EF 了：-/

更新：

我再次遇到错误，这次我通过打开 .edmx 文件并在 EF 设计器部分中删除重复的 InheritanceConnectors 来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T10:41:00.553

这就是我要做的。我会从 edmx（或任何源文件）文件中剪切数据片段，以查看设计器何时再次开始加载它。这样我就能找出问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T10:41:36.353

现在这很奇怪。如果您没有手动操作过 EDMX 文件（其他人也没有），那么它一定是 EFDesigner。每个人都知道它在预测试版中比任何严肃的东西都多。您是否尝试过部分更改？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T20:58:04.557

我有完全相同的问题。我通过将项目内容复制到另一个文件夹来解决它。当我重新打开项目时，问题就消失了。我没有复制 .suo 文件。我认为这个问题是由于我的工作中出现了一些不可忽视的停电问题。

# sql-server - 每列不同

> ID：944061
> 
> 赞同：1
> 
> 时间：2009-06-03T10:34:34.857
> 
> 标签：sql-server, sql-server-2005, distinct

我需要`3`从表中选择列，但我需要任何列中的每个值在该列的结果集中都是唯一的。

这个查询：

```
SELECT DISTINCT TOP 10 a, b, c
FROM   x 
```

将返回`10`不同的集合。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T10:49:18.587

```
WITH q AS
        (
        SELECT  a, b, с, ROW_NUMBER() OVER (ORDER BY a, b, c) AS rn
        FROM    mytable
        )
SELECT  TOP 10 a, b, c
FROM    q q1
WHERE   NOT EXISTS
        (
        SELECT  1
        FROM    q
        WHERE   q.rn < q1.rn
                AND q.a = q1.a
        )
        AND NOT EXISTS
        (
        SELECT  1
        FROM    q
        WHERE   q.rn < q1.rn
                AND q.b = q1.b
        )
        AND NOT EXISTS
        (
        SELECT  1
        FROM    q
        WHERE   q.rn < q1.rn
                AND q.c = q1.c
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T10:39:38.230

[这个问题](https://stackoverflow.com/questions/467329/selecting-the-distinct-values-from-three-columns-with-the-max-of-a-fourth-where-t)没有给你你想要的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T10:41:22.003

我不知道这是否可能一次性完成。我会通过创建一个表变量来做到这一点。

```
DECLARE @Results TABLE
(
  a varchar(100),
  b varchar(100),
  c varchar(100)
)
INSERT @Results(a)
SELECT DISTINCT a FROM myTable

INSERT @Results(b)
SELECT DISTINCT b FROM myTable

INSERT @Results(c)
SELECT DISTINCT c FROM myTable

SELECT a,b,c FROM @Results 
```

# javascript - Firefox window.opener 问题

> ID：944066
> 
> 赞同：3
> 
> 时间：2009-06-03T10:36:57.237
> 
> 标签：javascript, firefox, new-operator, tabs, window.opener

只要从右键菜单中使用“在新选项卡中打开”，“window.opener”在 IE 和 Firefox 中都可以正常工作；错误控制台说“window.opener”为空。有没有其他方法可以访问开瓶器？

编辑：错误控制台说“window.opener”只有在单击“在新选项卡中打开”时才为空。对于所有其他情况，不存在此类错误。因此，我想知道是否存在“window.opener”以外的替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-01-19T21:11:18.403

`window.opener``window.open`仅当使用或通过`target`属性或类似属性打开窗口（或选项卡，如果它被转移到选项卡）时才有效。特别是，UI 从不设置窗口的打开器。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2009-06-03T10:40:54.297

它是**window.open()** IIRC

# javascript - JavaScript 中的 ' 和 " 有什么区别？

> ID：944081
> 
> 赞同：80
> 
> 时间：2009-06-03T10:40:23.330
> 
> 标签：javascript, string

我看到了[这个问题](https://stackoverflow.com/questions/943795/difference-between-and)，我想知道 JavaScript 中的同一件事。

如果在 JavaScript 中创建字符串时使用字符 ' 或字符 "，应用程序的行为似乎相同。那么这两个字符之间有什么区别？

我在使用 ' 构建字符串时看到的唯一优势是我可以执行以下操作：

```
var toAppend = '<div id="myDiv1"></div>'; 
```

代替：

```
var toAppend = "<div id=\"myDiv1\"></div>"; 
```

我应该注意它们之间的任何显着差异吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2009-06-03T10:42:24.840

它们在所有意图和目的上都是等效的。如您所述，如果您想在字符串中使用其中一个，最好使用另一个来创建字符串。除此之外，一切都一样。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-06-11T20:58:39.837

尽管在技术上与 Javascript 没有区别，但值得注意的是，单引号字符串本身[不是有效的 JSON](http://json.org)。我认为人们会自动假设，因为 JSON 是有效的 JS，所以有效的 JS 字符串也是有效的 JSON，[这不一定是真的](http://jsonlint.com)。

例如， `{'key': 'Some "value"'}`不是有效的 JSON，而是`{"key": "Some 'value'"}` 。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2009-06-03T10:42:32.530

没有区别。它存在的原因正是你所说的

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-21T08:11:19.607

根据 Mozilla 的说法，好的做法是在 HTML 中使用“”（不能使用“”），而在 Javascript 中保留“”（“”和“”都可以无差别地使用）......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-02-17T10:52:01.107

我认为还有另一个区别。如果您执行以下操作

```
var str1 = 'The \' character';
var str2 = 'The " character';
var str3 = "The ' character";
var str4 = "The \" character";
document.write(str1.replace("'", "%26"));
document.write(str2.replace('"', "%22"));
document.write(str3.replace("'", "%26"));
document.write(str4.replace('"', "%22")); 
```

对于 str1 和 str4，document.write 将失败。这就是区别，但我不知道是否有解决方法可以使它们起作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-02T07:03:38.963

试试这个：

```
console.log("mama+"mama"")

Output : Uncaught SyntaxError: missing ) 
after argument list 
```

现在尝试：

```
console.log('mama+"mama"')

Output :  mama+"mama" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-11T06:59:23.397

如上所述，没有区别，但对于需要在字符串中使用“/”的情况。

对于需要将字符串与变量连接的情况，我认为更好的做法是使用模板字符串： `Price: ${price}, Amount: ${amount}. Total: ${price*amount}`

这样您就可以添加 " 和 '，并连接变量。

更容易阅读，更容易写。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2018-06-11T01:11:25.680

警告！！！！

它们是有区别的。添加到数组时，您必须使用其中一个。当您使用两种不同类型的引号时，数组会变得混乱。

例子：

```
//WILL NOT WORK
var array = ["apple","orange","banana"];

array.push('pear');

//WILL WORK
var array = ["apple","orange","banana"];

array.push("pear"); 
```

# windows - 有没有像 Windows 的 xvfb 或 xnest 之类的东西？

> ID：944086
> 
> 赞同：19
> 
> 时间：2009-06-03T10:41:23.797
> 
> 标签：windows, user-interface, testing

在具有驱动 GUI 的端到端测试的项目中，在开发人员工作站上运行测试很尴尬，因为 GUI 自动化驱动程序会干扰桌面。它会移动鼠标，将注意力从我们想要使用的应用程序上转移开，并且如果我们在测试运行期间切换到另一个应用程序，它可能会开始在错误的应用程序中输入文本。

在 Linux 上，我们通过在虚拟 X 服务器（xvfb 或 xnest）上运行被测应用程序解决了这个问题。使用 xnest，我们可以观看测试运行，但仍然可以不受干扰地使用真实桌面。

Windows有什么等价物吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-12-29T13:02:34.337

您可以使用SysInternals 包中的“[桌面”应用程序。](http://technet.microsoft.com/en-us/sysinternals/cc817881.aspx)在一个桌面上运行 UI 测试并在另一个桌面上工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-09T12:37:53.190

我发现了一个由 Frank P. Westlake 编写的名为“RunProcess.exe”的免费软件程序，它可以运行绑定到非交互式（例如屏幕外）WindowStation 桌面的进程。但是，没有来源。

因此，我使用 Java 和 JNA 实现了我自己的版本（比 Frank Westlake 的更简单）。它位于工具模块的[Window Licker存储库中。](https://github.com/petercoulton/windowlicker)该类称为`com.objogate.wl.win32.RunOnDesktop`. 在某些时候，我可能会将其移植到 C 并使其成为普通的命令行 .exe，或者将其转换为 Ant 任务以在屏幕外运行测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-13T17:57:33.373

我刚刚在我的 Windows 10 机器上尝试了多桌面方法。我正在运行 Selenium Javascript 测试。我在另一个桌面上开始测试并等待它打开浏览器，然后切换回我的主桌面。但是在 Chrome 浏览器成为活动窗口的同时，它实际上迫使我回到那个桌面:-(

我想我会尝试 RunProcess.exe 或 Nat 的解决方案。

# c# - 从 DataContext 获取值到 MarkupExtension

> ID：944087
> 
> 赞同：7
> 
> 时间：2009-06-03T10:41:28.103
> 
> 标签：c#, wpf, xaml, mvvm, datacontext

我正在使用 MV-VM 模式

在我的虚拟机中，我有类似的代码

```
public class ViewModel {
    public XmlDocument Document { ... }
    ....
} 
```

我有一个标记扩展，我想从中使用所述文档

```
 public override object ProvideValue(IServiceProvider serviceProvider) {
        IProvideValueTarget valueProvider = serviceProvider.GetService(typeof(IProvideValueTarget)) as IProvideValueTarget;
        if (valueProvider != null) {
            DependencyObject target = valueProvider.TargetObject as DependencyObject;
            XmlDocument doc = Foo.GetDocument(target);
            if (doc != null) {
                var n = doc.SelectSingleNode("/.../text()");
                if (n != null) return n.Value;
            }
        }
        return "«" + ObjectProperty + "»";
    } 
```

我创建了附加属性 Foo.Document，并将其附加到我的页面（页面的 DataContext 设置为我的 ViewModel 类的实例

```
<Page ... lc:Foo.Document="{Binding Document}">
  ...
</Page> 
```

（为了不必每次使用标记扩展时都将其作为参数输入）

现在，在我的标记扩展中，当我尝试读取 Document 附加属性时，我总是得到一个空文档。通过调试绑定，在运行标记扩展后，附加属性会获得正确的值，这似乎是一个计时问题。

有可能让它以某种方式工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-07-17T00:36:09.453

ProvideValue 方法被调用两次，一次是在解析器评估 XAML 时，一次是在加载值时。在第一次调用中，targetObject 只是一种称为 SharedDP 的虚拟对象，而不是应用标记扩展的对象。您需要跳过第一个电话，只处理第二个电话。这是在我们的应用程序中工作的代码。

```
 public override object ProvideValue(IServiceProvider serviceProvider){                                
                var pvt = serviceProvider as IProvideValueTarget;
                if (pvt == null)
                {
                    return null;
                }

                var frameworkElement = pvt.TargetObject as FrameworkElement;
                if (frameworkElement == null)
                {
                    return this;
                }
//.... Code will run once the markup is correctly loaded
 var dataContext = frameworkElement.DataContext; 

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T17:50:29.823

也许，您可以从标记扩展将事件连接到页面上的 Loaded 或 Initialized 事件。或者，您可以在提到 Foo.Document 之后将您的标记扩展名放在 XAML 文件中。

谢谢， Rob Relyea WPF/XAML 团队 [我的博客](http://robrelyea.com/blog)

# javascript - 动态图像的IE6透明度问题

> ID：944090
> 
> 赞同：0
> 
> 时间：2009-06-03T10:41:43.093
> 
> 标签：javascript, internet-explorer-6, png

我正在尝试对动态 png 图像使用各种技术，即在使用 javascript DOM 加载页面后添加的图像。

我尝试的所有技术似乎都失败了。是否有可靠的技术？

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T10:44:45.257

我已经在相当复杂的网站上使用[了 TwinHelix 的这个修复程序](http://www.twinhelix.com/css/iepngfix/)并取得了巨大的成功:)

一个警告（这适用于我相信的所有“修复”）是您不能使元素的背景图像透明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T10:46:55.720

[http://allinthehead.com/retro/338/supersleight-jquery-plugin](http://allinthehead.com/retro/338/supersleight-jquery-plugin)

更好的是，不要浪费时间为 IE6 开发。我知道这让我很容易上当，但在 IE6 上运行不佳的新网站越多，我们对人们至少升级到 IE7 的压力就越大。您必须在 IE6 周围进行大量黑客攻击才能做出*很多*事情，这是您真正需要坐下来认真考虑的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T10:46:31.897

有一个很好的 jQuery 插件叫做[pngFix](http://jquery.andreaseberhard.de/pngFix/)。

# c++ - 如何在 emacs 中进行海量搜索和替换？

> ID：944091
> 
> 赞同：1
> 
> 时间：2009-06-03T10:42:14.857
> 
> 标签：c++, emacs, refactoring

> **可能重复：**
> [使用 Emacs 在尚未打开的文本文件中递归查找和替换](https://stackoverflow.com/questions/270930/using-emacs-to-recursively-find-and-replace-in-text-files-not-already-open)
> 
> 重复：[使用-emacs-to-recursively-find-and-replace-in-text-files-not-already-open](https://stackoverflow.com/questions/270930/using-emacs-to-recursively-find-and-replace-in-text-files-not-already-open)

我需要在文件列表上进行正则表达式搜索和替换。有没有一个emacs命令（命令组合）？或者，也许您有更好的方法在 linux 上进行 c++ 重构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T11:49:39.727

[`dired`](http://www.emacswiki.org/emacs/DiredMode)您可以在or[`ibuffer`](http://www.emacswiki.org/emacs/IbufferMode)和 query-replace-regexp中标记文件。否则为什么不使用带有一些魔法的shell，a la `find`：`sed`

```
for f in $(find . -name "*.cpp"); do
    mv $f $f.bak
    sed -e "s/old/new/g" $f.bak > $f
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T10:43:45.837

你看过[XRefactory](http://www.xref.sk/xrefactory/main.html)吗？

# sql - 多个表上的 Mysql COUNT(*)

> ID：944099
> 
> 赞同：17
> 
> 时间：2009-06-03T10:44:24.243
> 
> 标签：sql, mysql

这个查询有什么问题：

```
SELECT co.*, mod.COUNT(*) as moduleCount, vid.COUNT(*) as vidCount 
 FROM courses as co, modules as mod, videos as vid 
 WHERE mod.course_id=co.id AND vid.course_id=co.id ORDER BY co.id DESC 
```

换句话说，我该如何处理从“课程”返回的每条记录，还有一个名为“modCount”的附加列显示模块表中该 course_id 的记录数，另一个名为“vidCount”的列视频表也是如此。

错误：

> 错误号：1064
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在第 1 行使用 ' *) as moduleCount, vid.COUNT(* ) as vidCount FROM courses as co, '

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-06-03T10:53:15.583

使用子选择，您可以：

```
SELECT co.*, 
    (SELECT COUNT(*) FROM modules mod WHERE mod.course_id=co.id) AS moduleCount, 
    (SELECT COUNT(*) FROM videos vid WHERE vid.course_id=co.id) AS vidCount
FROM courses AS co
ORDER BY co.id DESC 
```

但要小心，因为当课程有很多行时，这是一个昂贵的查询。

**编辑：** 如果您的表非常大，则以下查询应该执行得更好（有利于阅读和理解更复杂）。

```
SELECT co.*, 
    COALESCE(mod.moduleCount,0) AS moduleCount,
    COALESCE(vid.vidCount,0) AS vidCount
FROM courses AS co
    LEFT JOIN (
            SELECT COUNT(*) AS moduleCount, course_id AS courseId 
            FROM modules
            GROUP BY course_id
        ) AS mod
        ON mod.courseId = co.id
    LEFT JOIN (
            SELECT COUNT(*) AS vidCount, course_id AS courseId 
            FROM videos
            GROUP BY course_id
        ) AS vid
        ON vid.courseId = co.id
ORDER BY co.id DESC 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2011-10-19T21:41:30.890

我有更好的解决方案而且很容易

```
SELECT COUNT(*),(SELECT COUNT(*) FROM table2) FROM table1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-03T10:50:52.403

```
SELECT co.*,
       (
       SELECT  COUNT(*)
       FROM    modules mod
       WHERE   mod.course_id = co.id
       ) AS modCount,
       (
       SELECT  COUNT(*)
       FROM    videos vid
       WHERE   vid.course_id = co.id
       ) AS vidCount
FROM   courses co
ORDER BY
        co.id DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T10:51:06.617

```
SELECT co.*, m.ModCnt as moduleCount, v.VidCnt as vidCount 
FROM courses co
INNER JOIN (
        select count(*) AS ModCnt, co.id AS CoID
        from modules 
        group by co) m
    ON m.CoID = co.id
INNER JOIN (
        select count(*) AS VidCnt, co.id AS CoID
        from videos
        group by co) v
    ON v.CoID = co.id   
INNER JOIN videos vid 
    ON vid.course_id = co.id 
ORDER BY co.id DESC 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-06-03T11:05:21.080

拍这个。我用一些非mysql代码完成了这项工作：

```
function getAllWithStats($info='*',$order='',$id=0)
{
    $courses=$this->getAll($info,$order,$id);

    foreach ($courses as $k=>$v)
    {
        $courses[$k]['modCount']=$this->getModuleCount($v['id']);
        $courses[$k]['vidCount']=$this->getVideoCount($v['id']);
    }

    return $courses;
} 
```

# java - 从 J2ME 应用程序检测电源中断

> ID：944106
> 
> 赞同：1
> 
> 时间：2009-06-03T10:46:51.803
> 
> 标签：java, java-me

我参与了另一个应用程序。这一次，它是关于开发 J2ME 应用程序的。

将运行应用程序的移动设备将连接到电源插座。

每当手机被拔掉（电池中的电能供应中断）时，应用程序应该检测到它并执行一些自定义操作，例如发送短信或其他东西。

所以，我想知道我可以使用哪段代码来检测 J2ME 应用程序中的能源供应中断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T13:27:49.093

这将与您关于该主题的其他问题的答案相同：

这样做的唯一标准方法是通过 JSR-256（要么这样做要么不能这样做）。[您可以从http://www.jcp.org/en/jsr/detail?id=256](http://www.jcp.org/en/jsr/detail?id=256)阅读规范

不幸的是，它是最近才出现的，尚未在大多数零售手机中实际实施。

发货时，索尼爱立信 Satio（或 Idou）将拥有它。

* * *

编辑：由于现在在此回复的评论中询问，用于检查电池状态的 Symbian OS C++ API 是：

`CTelephony::TBatteryInfo`

在 Developer Library 文档中查找它：

[http://developer.symbian.com/main/documentation/sdl/symbian94/index.jsp](http://developer.symbian.com/main/documentation/sdl/symbian94/index.jsp)

* * *

编辑：JSR-256 示例代码的最佳猜测是[JSR 256 电池事件](https://stackoverflow.com/questions/950172/jsr-256-battery-events/951223#951223)

* * *

编辑：诺基亚 N97 有 JSR-256，它可以安装在诺基亚 N85 和诺基亚 5800 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-04T10:49:21.037

如果是 Symbian 操作系统，您可以在 Symbian 端使用 tsr（拼写？），并在 j2me 端使用 jni 进行通信。

# html - 正则表达式根据 src 值有条件地选择所有图像 html 标记

> ID：944109
> 
> 赞同：2
> 
> 时间：2009-06-03T10:47:20.993
> 
> 标签：html, regex

我需要一个正则表达式来执行以下操作（不幸的是，它必须是一个正则表达式，我无法编码，因为它在购买的产品中工作）：

我想选择一块 html 中的所有图像标签，其中图像标签不包含类属性，或者，如果它包含类属性，则该属性在开头不包含特定字符串。基本上，我想从一大块 html 中删除（通过匹配）所有图像标签，除了应用了特定类的图像。

这可能是两个单独的正则表达式——我只想匹配它们——而不是提取任何数据。

因此，例如，假设我要保留的类名为 Pretty。

我希望正则表达式匹配：

```
<img src="xx"/>
<img border="x" src="xx"/>
<img whatever other attributes src="xx"/>
<img class="ugly" src="xx"/>
<img whatever other attributes class="fugly" src="xx"/> 
```

但不匹配

```
<img class="Pretty" src="xx"/>
<img whatever other attributes class="Pretty" src="xx"/>
<img class="Pretty subpretty" src="xx"/> 
```

如果在一个正则表达式中更容易做到（一个匹配所有没有类属性的图像标签，一个匹配那些不“漂亮”的类属性），那也很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-03T10:56:43.140

请改用[XPath](http://www.w3schools.com/XPath/default.asp)，因为这就是它的用途：

```
//img[not(contains(@class,'Pretty'))] 
```

此 XPath 表达式查找其属性不包含字符串的每个`img`元素。我认为它适用于缺少该属性的元素。`class``'Pretty'``class`

使用正则表达式解析 XML 和 HTML 通常是一个非常糟糕的主意。当然，XPath 仅在所讨论的 HTML 是严格的情况下才有效。如果它不是一个有效的 XML 文档，那么您可能希望默认使用其他东西，但即便如此，正则表达式也不是适合这项工作的工具。

附录：我在 30 分钟内回到这个是错误的。发生了什么事，我没有时间解决。如果它不适用于缺少该`class`属性的元素，请使用以下表达式：

```
//img[(not(@class)) or (not(contains(@class,'Pretty')))] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T13:56:27.287

有点快速和肮脏，但它有效：

```
/(?!<img\b[^>]+\bclass="?[^>"]*\bPretty\b)<img\b[^>]*>/ 
```

这个怎么运作：

`<img\b[^>]+\bclass="?[^>"]*\bPretty\b`匹配所有“漂亮”图像。

`<img\b[^>]*>`匹配所有图像。因此，将“漂亮”图像子模式放在子模式前面的负前瞻中以匹配所有图像。然后这将匹配所有图像，减去那些匹配漂亮子模式的图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-04T03:47:32.957

```
<img(?:\s+(?:(?!class\b)\w+="[^"]*"|class="(?!Pretty)[^"]*"))*/> 
```

这似乎回答了您的问题，但是您没有解决许多细节，例如：

*   标签和属性名称是否一致小写？

*   如果类名以“pretty”开头（即区分大小写）怎么办？

*   属性值是否总是被引用，并且总是带有双引号？

*   是否会有额外的空格，例如“=”周围或最后的“/>”之前？

*   您的“购买的​​工具”是否支持带有负前瞻的正则表达式？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-05T10:08:45.513

是的，对于所有建议我最好使用正则表达式以外的东西的人，你当然是对的，但我想你错过了问题中的第一句话。

我最终找到了解决方案，nick 和 alan M 看起来最接近那个，谢谢大家！幸运的是，我可以使用负前瞻，所以它工作得很好:)

# jquery - jQuery :FadeOut 不适用于表格行

> ID：944110
> 
> 赞同：20
> 
> 时间：2009-06-03T10:47:32.020
> 
> 标签：jquery, fadeout

我有以下 HTML 表呈现到我的浏览器。我正在从我的 ASP.NET 代码隐藏文件创建此表。

```
<table Class="tblTradeInCart">
    <tr class="tblCartHeader">
        <td>Item</td>
        <td>Model</td>
        <td> Price</td>
        <td>Delete</td>
    </tr>
    <tr id="tr_15_1">
        <td><img src="dia/images/LGVX9700.jpg" width="50" height="50" /></td>
        <td>LG VX9700</td>
        <td>$ 122</td>
        <td><a href='#' onclick="deleteItem(15,1,'tr_15_1')"><img src='..\Lib\images\NCcross.gif' style='border:0px'></a></td>
    </tr>
    <tr id="tr_11_8">
        <td><img src="dia/images/NOK5610.jpg" width="50" height="50" /></td>
        <td>NOKIA 5610</td>
        <td>$ 122</td>
        <td><a href='#' onclick="deleteItem(11,8,'tr_11_8')"><img src='..\Lib\images\NCcross.gif' style='border:0px'></a></td>
    </tr>
    <tr id="tr_14_9">
        <td><img src="dia/images/NOKN95.jpg" width="50" height="50" /></td>
        <td>NOKIA N95</td>
        <td>$ 91.5</td>
        <td><a href='#' onclick="deleteItem(14,9,'tr_14_9')"><img src='..\Lib\images\NCcross.gif' style='border:0px'></a></td>
    </tr>
</table> 
```

在我的javascript中，我有如下的删除功能

```
function deleteItem(modelId,itemindexId, rowId)
{
   $.get("RemoveFromCart.aspx",{ model:modelId,cartItem:itemindexId,mode:"removefromcart",rand:Math.random() } ,function(data)
 { 
    //document.getElementById(rowId).style.display = "none";

    var row=$("#"+rowId);     
   row.fadeOut(1000);

}); 
```

}

但是当我调用 deleteItem 函数时，我没有得到淡入淡出的效果。它只是像 display="none" 一样隐藏行。

谁能指导我如何解决这个问题？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-06-03T17:11:26.860

jQuery 隐藏时有问题`trs`。这是当前的解决方法，直到他们决定在核心中执行类似的操作。

```
row.find("td").fadeOut(1000, function(){ $(this).parent().remove();}); 
```

这基本上隐藏了`tds`行中的，而不是实际的行。然后它从 DOM 中删除该行。它适用于我相信的所有浏览器。如果需要，您可以专门针对 IE。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-08-24T11:12:52.470

虽然 Jab 的解决方案是解决问题的方法，但它确实包含错误。具体来说，您删除父元素的回调函数将为该行中的每个“td”元素触发一次，而实际上它应该只为最后一个触发一次。这可以通过将警报调用放入回调中来证明，对于行中的每个 td 都会看到一次。

我还没有找到一个非常巧妙的方法来解决这个问题，但我最终得到了一些类似的东西：

```
function ShowHideTableRow(rowSelector, show, callback)
{
    var childCellsSelector = $(rowSelector).children("td");
    var ubound = childCellsSelector.length - 1;
    var lastCallback = null;

    childCellsSelector.each(function(i)
    {
        // Only execute the callback on the last element.
        if (ubound == i)
            lastCallback = callback

        if (show)
        {
            $(this).fadeIn("slow", lastCallback)
        }
        else
        {
            $(this).fadeOut("slow", lastCallback)
        }
    });
} 
```

要调用它，您将使用如下内容：

```
ShowHideTableRow("#MyTableRowId",false,function() { // do something else ONCE when the row is hidden or shown... }); 
```

注意：我的版本不会从 dom 中删除该行，因为我只想隐藏/显示它，但它应该很容易适应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T14:21:38.387

现在可以像这样使用 Jquery：

```
$("#id_of_your_tr").fadeOut(1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T10:57:53.950

这两件事是不同的：

*   通过 hide()、fadeOut()、slideUp()、应用类、设置 CSS 值或通过动画方式隐藏行；和
*   从 DOM 中删除元素。

如果我正确地阅读了您所说的内容，那么您想两者都做。如果是这样，试试这个：

```
function deleteItem(modelId,itemindexId, rowId) {
  $.get("RemoveFromCart.aspx", {
    model: modelId,
    cartItem: itemindexId,
    mode: "removefromcart",
    rand:Math.random()
  }, function(data) { 
    var row=$("#"+rowId);     
    row.fadeOut(1000, function() {
      row.remove();
    });
  });
}; 
```

基本上这是在说：

*   使用给定参数在服务器上获取 RemoveCart.aspx；
*   当该函数返回时，开始在一秒钟内淡出该行；
*   当淡出完成后，将其从 DOM 中删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-28T06:43:58.807

从[jquery 1.6](http://api.jquery.com/fadeOut/#callback-function)`td`开始，您可以使用 Promise 在所有动画完成后执行单个回调。

```
$('td', row).each(function() {
    $(this).fadeOut('slow', 'linear');
})
.promise()
.done(function() {
    $(this).parent('tr').remove();
}); 
```

# scala - 何时在 Scala 方法声明中使用等号？

> ID：944111
> 
> 赞同：88
> 
> 时间：2009-06-03T10:47:40.867
> 
> 标签：scala

带等号：

```
object HelloWorld {
  def main(args: Array[String]) = {
    println("Hello!")
  }
} 
```

没有等号：

```
object HelloWorld {
  def main(args: Array[String]) {
    println("Hello!")
  }
} 
```

上述两个程序的执行方式相同。在博客文章*[我不喜欢 Scala 中的事情中，](http://www.francolombardo.net/things-i-do-not-like-in-scala_post-69.html)*我读到当缺少等号时，该方法将返回`Unit`（与 Java 相同`void`），因此返回值的方法必须使用等号。但是不返回值的方法可以用任何一种方式编写。

在不返回值的 Scala 方法中使用等号的最佳实践是什么？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2009-06-03T18:23:52.580

我实际上非常不同意丹尼尔。我认为不应该使用不相等的*语法*。如果您的方法作为 API 公开并且您担心意外返回错误的类型，请添加显式类型注释：

```
object HelloWorld {
  def main(args: Array[String]): Unit = {
    println("Hello!")
    123
  }
} 
```

不相等的语法更短，可能看起来“更干净”，但我认为它只会增加混淆的可能性。我有时忘记添加等号，并相信我的方法实际上返回了一个值，而实际上它正在返回 Unit。因为不等于和等于推断类型的语法在视觉上非常相似，所以很容易错过这个问题。

尽管这会花费我更多的工作，但我更喜欢显式类型注释（即暴露的接口）。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2009-06-03T13:34:48.033

更新：从 Scala-2.10 开始，首选使用等号。老答案：

返回的方法`Unit`应*始终*使用不等于语法。这避免了在实现中传递到 API 中的潜在错误。例如，您可能不小心做了这样的事情：

```
object HelloWorld {
  def main(args: Array[String]) = {
    println("Hello!")
    123
  }
} 
```

当然是一个简单的例子，但你可以看到这可能是一个问题。因为最后一个表达式不*返回*，`Unit`所以方法本身的返回类型不是`Unit`. 这在公共 API 中公开，可能会导致其他问题。使用不等于语法，最后一个表达式是什么并不重要，Scala 将返回类型固定为`Unit`.

它也是两个字符更清洁。:-) 我也倾向于认为不等于语法使代码更容易阅读。更明显的是，所讨论的方法返回`Unit`而不是一些有用的值。

在相关的注释中，抽象方法有类似的语法：

```
trait Foo {
  def bar(s: String)
} 
```

该方法`bar`具有签名`String=>Unit`。当您省略抽象成员上的类型注释时，Scala 会这样做。再一次，这更干净，而且（我认为）更容易阅读。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-06-03T20:17:21.447

您*必须*在调用声明中使用等号，但返回 Unit 的定义除外。

在后一种情况下，您*可以*放弃等号。但是，此语法可能已被弃用，因此最好避免使用。使用等号并声明返回类型将始终有效。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-18T22:38:01.470

对于方法，[Scala Style Guide](http://docs.scala-lang.org/style/declarations.html)推荐使用 equals 语法而不是过程语法

> > **过程语法**
> > 
> > 避免使用过程语法，因为它往往会因为简洁而造成混淆。

```
// don't do this
def printBar(bar: Baz) {
  println(bar)
}
// write this instead
def printBar(bar: Bar): Unit = {
  println(bar)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-27T21:14:47.757

一件事：想象一个应该返回 Unit 的方法的最后一条语句不返回 Unit。使用非相等语法非常方便，我希望这不会被弃用，因为我看到了几个用例

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-30T20:03:14.180

随着时间的推移，默认样式发生了变化，并且在许多对答案的评论中都提到了这一点，[官方样式指南](http://docs.scala-lang.org/style/types.html#functions)中建议使用`=`函数声明的语法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-24T14:21:38.790

对于没有返回值的方法，表达这种方法的一种方法是省略结果类型和等号，在方法之后用花括号括起来的块。在这种形式中，该方法看起来像一个过程，一个仅出于副作用而执行的方法。

# iphone - iPhone sqlite3_next_stmt() 支持

> ID：944117
> 
> 赞同：0
> 
> 时间：2009-06-03T10:49:12.720
> 
> 标签：iphone, sqlite

尝试在 ApplicationWillTerminate 方法中关闭数据库连接时，我收到一条未完成语句的错误消息。

为了找到错误的来源，我想使用 SQLLite next 语句。

但似乎 iPhone OS 2.2 中的头文件不支持此语句。我错过了什么吗？

是否有另一种方法来识别导致 SQLlite 中未完成语句的问题。虽然我似乎正在敲定，但我想我错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-10T13:42:49.520

我刚刚调试了同样的问题，未完成的语句阻止我在 iPhone 上关闭我的 SQLite 数据库。`sqlite3_next_stmt`似乎没有做任何事情，但我设法手动追踪未完成的语句。我的数据库代码基于 Apple 的 SQLite Books 示例，特别是延迟准备的语句。由于我为几个不同的语句执行此操作，因此我决定将这部分代码包装在辅助方法中，如下所示：

```
- (void)updateIntFieldStatement:(sqlite3_stmt *)update_field_statement WithCString:(char*)cString toValue:(int)value {
    if (update_field_statement == nil) {
        if (sqlite3_prepare_v2(database, cString, -1, &update_field_statement, NULL) != SQLITE_OK) {
            NSAssert1(0, @"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
        }
    }
}
```

然后我会这样调用这段代码：

```
[self updateIntFieldStatement:static_statement WithCString:"UPDATE myTable SET myField = ? WHERE pk = ?" toValue:transmitted]; 
```

问题是，`static_statement`它永远不会被改变，它只是保持为零，所以它会一次又一次地懒惰地准备，而我的最终代码从未得到它。原因是这部分：`&update_field_statement`。我的声明是一个`sqlite3_stmt *`, 但`sqlite3_prepare_v2`需要一个`sqlite3_stmt **`, 一个句柄而不是一个简单的指针。Apple 的示例代码通过获取指针的地址来获取句柄，但是当我在辅助方法中这样做时，我得到了本地参数句柄，而不是全局句柄。

C指针作用域：1，我：0...

解决方案是改变我的辅助方法来处理：

```
- (void)updateIntFieldStatement:(sqlite3_stmt **)update_field_statement WithCString:(char*)cString toValue:(int)value {
    if (*update_field_statement == nil) {
        if (sqlite3_prepare_v2(database, cString, -1, update_field_statement, NULL) != SQLITE_OK) {
            NSAssert1(0, @"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
        }
    }
}
```

然后在全局范围内获取句柄：

```
[self updateIntFieldStatement:&static_statement WithCString:"UPDATE myTable SET myField = ? WHERE pk = ?" toValue:transmitted]; 
```

现在该语句只准备一次，`static_statement`在发生这种情况时被正确分配，然后最终完成，所以我可以关闭数据库。希望这可以帮助您或其他人！

# ruby-on-rails - Rails：HasManyThroughAssociationNotFoundError

> ID：944126
> 
> 赞同：44
> 
> 时间：2009-06-03T10:52:30.153
> 
> 标签：ruby-on-rails, ruby, activerecord, has-many-through

我在让`has_many through`协会工作方面遇到问题。

我不断收到此异常：

```
Article.find(1).warehouses.build
ActiveRecord::HasManyThroughAssociationNotFoundError: Could not find the association :entries in model Article 
```

这些是涉及的模型：

```
class Article < ActiveRecord::Base
  has_many :warehouses, :through => :entries
end

class Warehouse < ActiveRecord::Base
  has_many :articles, :through => :entries
end

class Entry < ActiveRecord::Base
  belongs_to :article
  belongs_to :warehouse
end 
```

这是我的架构：

```
create_table "articles", :force => true do |t|
  t.string   "article_nr"
  t.string   "name"
  t.integer  "amount"
  t.string   "warehouse_nr"
  t.datetime "created_at"
  t.datetime "updated_at"
  t.integer  "unit"
end

create_table "entries", :force => true do |t|
  t.integer "warehouse_id"
  t.integer "article_id"
  t.integer "amount"
end

create_table "warehouses", :force => true do |t|
  t.string   "warehouse_nr"
  t.string   "name"
  t.integer  "utilization"
  t.datetime "created_at"
  t.datetime "updated_at"
end 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2009-06-03T11:07:29.080

您需要添加

```
has_many :entries 
```

对于您的每个模型，因为 :through 选项只指定了第二个关联，它应该使用它来查找另一方。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-02T23:18:56.503

您需要添加

```
has_many :entries 
```

对于每个模型，以及以上 has_many :through，如下所示：

```
class Article < ActiveRecord::Base
  has_many :entries
  has_many :warehouses, :through => :entries
end

class Warehouse < ActiveRecord::Base
  has_many :entries
  has_many :articles, :through => :entries
end 
```

有关如何处理视图和控制器的更详细教程[https://kolosek.com/rails-join-table/](https://kolosek.com/rails-join-table/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-11T16:48:33.390

@Meekohi 这意味着您没有 Entry 模型。我自己刚刚收到错误消息，所以想指出它（由于声誉低，无法将其作为评论发布）。

```
class Entry < ActiveRecord::Base
  belongs_to :article
  belongs_to :warehouse
end 
```

只需运行

```
rails g model Entry 
```

# mysql - MySQL 按 2 列排序

> ID：944134
> 
> 赞同：14
> 
> 时间：2009-06-03T10:56:11.067
> 
> 标签：mysql, sql-order-by

我有一张包含电视节目信息的表格，我想按季节排序，然后按剧集排序。这是我所拥有的基本观点：

```
+---+--------+---------+
|id | Season | Episode |
+---+--------+---------+
| 1 |    1   |    1    |
+---+--------+---------+
| 1 |    1   |    2    |
+---+--------+---------+
| 1 |    2   |    1    |
+---+--------+---------+
| 1 |    2   |    3    |
+---+--------+---------+ 
```

所以我选择我需要的东西并按季节订购。但是季节之间会有很多，所以我也需要对剧集进行排序，但不会影响季节。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-06-03T11:00:36.253

你的意思是：

```
SELECT id, Season, Episode 
FROM table 
ORDER BY Season ASC, Epsisode ASC 
```

按多列排序非常简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-03T11:01:52.990

我们知道你的意思:) 在你的订单中你应该有

```
ORDER BY Season, Episode 
```

它将按季节排序，然后按季节内的情节排序

# powerbuilder - Powerbuilder 不同窗口中的相同功能

> ID：944136
> 
> 赞同：1
> 
> 时间：2009-06-03T10:56:59.333
> 
> 标签：powerbuilder

我有两个窗口，可以说 w_base1 和 w_base2。现在在 w_base1 我写了下面的语句，它工作正常。

ls_Value = This.GetItemString(ll_CurrRow, "af_value")

现在我想在 w_base2 中使用相同的上述语句，但它给出了以下错误：

**Powerbuilder 应用程序执行错误 (R0002) 应用程序终止。错误：对象 w_base2 的 abcd 事件中第 230 行的空对象引用。**

当它终止应用程序时，它直接进入上述语句，即

ls_Value = This.GetItemString(ll_CurrRow, "af_value")

我相信问题出在 af_value 上，我无法看到它实际获取的内容，但根据上述错误，它正在与 Null 相关。谁能尽快帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T12:58:52.770

你的错误说`line 230 in abcd event of object w_base2`，这听起来像一个窗口，但你的代码说`This.GetItemString()`。GetItemString 是一种 DataWindow 方法，不能在窗口上使用。检查您的代码是否实际在 DataWindow 控件上运行。

如果类型`af_value`不是字符串，那么你会得到一个执行错误（虽然我认为它应该是一个不同的错误？）

基本上这个错误意味着你引用了一个不存在或超出范围的对象。检查您是否也将 DataWindow 对象分配给 DataWindow 控件。

你可以排除的事情：

1.  如果 的内容`af_value`为空，那么你会得到一个空 in `ls_Value`，但你不会得到这个错误。
2.  如果行或列不存在，您将收到“指定的行/列无效”。

# java - Java Web Start 驱动安装

> ID：944144
> 
> 赞同：1
> 
> 时间：2009-06-03T11:00:56.223
> 
> 标签：java, installation

我正在尝试找出在客户端计算机上安装 Java 应用程序的最佳方式。这里的主要指导方针是这些客户是计算机文盲 - 所以越少大惊小怪越好。

我正在考虑使用一个模型来启动一个 Java Web Start 应用程序，它可以同时处理注册和安装过程。

我希望这些客户（主要是房地产经纪人）能够访问主页上的链接，那里有一个漂亮的 Web Start 屏幕（甚至是嵌入式 Java 小程序），他们只需填写一个表格并点击安装并在他们的计算机上安装最新版本的程序。

这里的指导方针是：

1.  安装的程序应该是完全可执行的（应该避免各种 JavaW 怪异）。
2.  安装的程序应该在启动时运行。

另外/可选：

3.  安装的 Web Start/applet 程序应该能够扫描计算机是否存在已安装程序的先前版本并做出相应响应——这意味着如果它已经安装，它只会在需要时更新已安装程序的 JAR（关闭它关闭，更新并重新启动）。这样我就可以从已安装的程序中调用 JNLP 作为自动更新方法。

我想要一些关于这方面的建议 - 是否已经有这样的系统可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T13:12:06.347

查看最新的 Web Start。它会自动执行 jar-update 魔法（一如既往），但也允许您延迟加载 jar 文件。加上离线运行。

如果你想填充本地缓存，那么 jar 文件应该有版本化的名称，然后你的“更新”应用程序可能需要这些。然后，它们将在程序下次运行时准备就绪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T11:45:38.317

试试[IzPack](http://izpack.org/features/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T13:57:54.070

[IzPack](http://izpack.org/features/) + [launch4j](http://launch4j.sourceforge.net/)

# latex - 逐字命令后的空格过多

> ID：944151
> 
> 赞同：5
> 
> 时间：2009-06-03T11:02:33.050
> 
> 标签：latex

如果我输入以下 LaTeX 代码：

```
\begin{singlespace}
\begin{verbatim} 
```

在这些标签内的文本出现之前有太多的空白。看起来有两个换行符。有没有办法减少这个空白？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T13:51:27.923

许多环境在其内容周围放置了一些默认的周围空间。正确的方法最有可能找出决定这个空间的变量是如何被调用并修改它的（暂时的，或者针对整个文件）。但是，为了快速而肮脏的修复，您可以使用一些负 vspace：

```
Lorem ipsum...

\vspace{-1ex}

\begin{strangedays}
% ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-01-31T19:27:24.507

查看 LaTeX 内核 ( [`latex.ltx`](http://mirrors.ctan.org/macros/latex/unpacked/latex.ltx)) 显示了定义

```
\def\@verbatim{\trivlist \item\relax
  \if@minipage\else\vskip\parskip\fi
  [...] 
```

换句话说，它会`\parskip`在开头添加 a ，除非逐字逐句以“`minipage`模式”执行。

所以尝试使用

```
\begin{quote}
\begin{verbatim}
...
\end{verbatim}
\end{quote} 
```

这样，逐字以`minipage`模式执行，并且不会`\parskip`在开头添加 a。

通常，您希望在引用源代码等时添加一些缩进`verbatim`，因此`quote`无论如何您都想要使用 using。

# xslt - XSLT 将一系列元素转换为单个列表？

> ID：944152
> 
> 赞同：0
> 
> 时间：2009-06-03T11:03:25.873
> 
> 标签：xslt

给定一个像这样的源文档：

```
<A>
  <B>
    <C>item1</C>
  </B>
  <B>
    <C>item2</C>
  </B>
  <B>
    <C>item3</C>
  </B>
</A> 
```

我可以用什么 XSLT 来生产这样的东西：

```
<A>
  <B>
    <C>item1</C>
    <C>item2</C>
    <C>item3</C>
  </B>
</A> 
```

我试过一张...

```
 <xsl:template match="B">
    <xsl:choose>
      <xsl:when test="count(preceding-sibling::B)=0">
        <B>
          <xsl:apply-templates select="./C"/>
          <xsl:apply-templates select="following-sibling::B"/>
        </B>
      </xsl:when>

      <xsl:otherwise>
          <xsl:apply-templates select="./C"/>
      </xsl:otherwise>

    </xsl:choose>
  </xsl:template> 
```

但我越来越...

```
<A>
  <B>
    <C>item1</C>
    <C>item2</C>
    <C>item3</C>
  </B>
  <C>item2</C>
  <C>item3</C>
</A> 
```

第二个问题：我很难调试 XSLT。提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T11:14:31.077

最简单的方法：

```
<xsl:template match="/A">
  <A>
    <B>
      <xsl:copy-of select=".//C" />
    </B>
  </A>
</xsl:template> 
```

要回答为什么您会看到使用 XSLT 看到的输出的问题：

我假设你有一个

```
<xsl:apply-templates select="B" /> 
```

到位。这表示：

*   被`<xsl:template match="B">`调用三次，每次调用一次`<B>`。
*   首先`<B>`，它按照您的意图执行，其他时候它直接分支到，通过您可能拥有`<xsl:otherwise>`的 s 复制s。这就是你的 extra的来源。`<C>``<xsl:template match="C">``<C>`
*   要修复它（不是我赞同你的方法），你应该改变它......

...这：

```
<xsl:apply-templates select="B[1]" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T11:15:34.290

您可以使用 Altova XmlSpy 或 Visual Studio 进行调试。以下 xslt 将提供所需的 o/p。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="A">
        <A>
            <B>
                <xsl:apply-templates/>
            </B>
        </A>
    </xsl:template>
    <xsl:template match="B">
        <xsl:copy-of select="C"/>
    </xsl:template>
</xsl:stylesheet> 
```

如果上述解决方案对您不起作用（我怀疑您正在处理更复杂的 xml），您可能希望在您的 xml 上发布更多信息。

此外，如果需要，拥有 B 和 C 的模板可以进一步扩展模板 o/p。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T11:19:54.653

为了回答您的第二个问题，我使用了[VS 2008 调试器](http://msdn.microsoft.com/en-us/library/ms255602(VS.80).aspx)，它的工作原理就像一个魅力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T16:55:24.930

此样式表合并同级`<B>`元素，无论样式表中的位置或其他元素名称如何。

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <!-- By default, copy all nodes unchanged -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template> 

  <!-- Only copy the first B element -->
  <xsl:template match="B[1]">
    <xsl:copy>
      <!-- Merge the attributes and content of all sibling B elements -->
      <xsl:apply-templates select="../B/@* |
                                   ../B/node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- Don't copy the rest of the B elements -->
  <xsl:template match="B"/>

</xsl:stylesheet> 
```

更新：

如果您希望结果打印得非常漂亮，并且如果您的输入文档中只有空格的文本节点不重要，那么您可以将其添加到样式表的顶部（作为 的子项`<xsl:stylesheet>`）：

```
<xsl:strip-space elements="*"/>
<xsl:output indent="yes"/> 
```

# php - PHP 多个下拉框表单提交到 MySQL

> ID：944158
> 
> 赞同：3
> 
> 时间：2009-06-03T11:05:31.300
> 
> 标签：php, mysql, html

找不到任何关于如何执行此操作的好信息，所以我想我会在这里添加它。如何使用 php 从多项选择下拉 html 表单中获取所选数据并提交到数据库。我需要为每个选择单独一行。

我很高兴知道如何获取数据并将其放入数组中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-03T11:08:02.620

实际上，它被发送到一个数组中！

```
<form action="myscript.php" method="POST">
<select name="colors[]" multiple="multiple" size="2">
<option>Red</option>
<option>Blue</option>
<option>Green</option>
<option>Orange</option>
</select>
<input type="submit" value="Go!"> 
</form> 
```

然后在服务器端，`$_POST['colors']`将是一个包含所选值的数组。

这里的关键是在名称中使用方括号表示法让 PHP 知道期待一个数组。

有关更多信息，[请查看 PHP 文档的示例](http://www.php.net/variables.external)。

一旦有了变量，创建新行就很简单了。

# sql - 用于连接和删除公共前缀的 TSQL 查询

> ID：944160
> 
> 赞同：3
> 
> 时间：2009-06-03T11:06:41.250
> 
> 标签：sql, sql-server, tsql

我有一些数据

```
id    ref
==   ==========
1    3536757616
1    3536757617
1    3536757618 
```

并想得到结果

```
1    3536757616/7/8 
```

所以本质上数据是在 id 上聚合的，引用连接在一起，用斜杠“/”分隔，但删除了任何公共前缀，所以如果数据像

```
id    ref
==   ==========
2    3536757628
2    3536757629
2    3536757630 
```

我想得到结果

```
2    3536757629/28/30 
```

我知道我可以通过使用简单地连接参考

```
SELECT distinct
    id,
    stuff ( ( SELECT
                  '/ ' + ref 
              FROM
                  tableA tableA_1
              where tableA_1.id = tableA_2.id
    FOR XML PATH ( '' ) ) , 1 , 2 , '' )
from TableA tableA_2 
```

给予

```
1   3536757616/ 3536757617/ 3536757618
2   3536757628/ 3536757629/ 3536757630 
```

但正是它消除了我所追求的共同元素......

* * *

测试数据代码：

```
create table tableA (id int, ref varchar(50))

insert into tableA
select 1, 3536757616
union select 1, 3536757617
union select 1, 3536757618
union select 2, 3536757628
union select 2, 3536757629
union select 2, 3536757630 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T11:45:19.173

```
WITH hier(cnt) AS
        (
        SELECT  1
        UNION ALL
        SELECT  cnt + 1
        FROM    hier
        WHERE   cnt <= 100
        )
SELECT  CASE WHEN ROW_NUMBER() OVER (ORDER BY id) = 1 THEN ref ELSE ' / ' + SUBSTRING(ref, mc + 1, LEN(ref)) END 
FROM    (
        SELECT  MIN(common) AS mc
        FROM    (
                SELECT  (
                        SELECT  MAX(cnt)
                        FROM    hier
                        WHERE   SUBSTRING(initref, 1, cnt) = SUBSTRING(ref, 1, cnt)
                                AND cnt <= LEN(ref)
                        ) AS common
                FROM    (
                        SELECT  TOP 1 ref AS initref
                        FROM    tableA
                        ) i,
                        tableA
                ) q
        ) q2, tableA
FOR XML PATH('')

---

3536757616 / 17 / 18 / 28 / 29 / 30 
```

与组相同：

```
WITH hier(cnt) AS
        (
        SELECT  1
        UNION ALL
        SELECT  cnt + 1
        FROM    hier
        WHERE   cnt <= 100
        )
SELECT  (
        SELECT  CASE WHEN ROW_NUMBER() OVER (ORDER BY a2.ref) = 1 THEN ref ELSE ' / ' + SUBSTRING(ref, mc + 1, LEN(ref)) END 
        FROM    tableA a2
        WHERE   a2.id = q2.id
        FOR XML PATH('')
        )
FROM    (
        SELECT  id, MIN(common) AS mc
        FROM    (
                SELECT  a.id,
                        (
                        SELECT  MAX(cnt)
                        FROM    hier
                        WHERE   SUBSTRING(i.initref, 1, cnt) = SUBSTRING(a.ref, 1, cnt)
                                AND cnt <= LEN(ref)
                        ) AS common
                FROM    (
                        SELECT  id, MIN(ref) AS initref
                        FROM    tableA
                        GROUP BY
                                id
                        ) i
                JOIN    tableA a
                ON      i.id = a.id
                ) q
        GROUP BY
                id
        ) q2
---
3536757616 / 7 / 8
3536757628 / 29 / 30 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T11:37:07.427

我将我的表命名为 #T，并使用以下 SELECT 语句

```
select id, number, substring(#t.ref, 1, v.number), count(id)
from master.dbo.spt_values v
inner join #t on v.number <= len(#t.ref)
where v.name is null and v.number > 0 
group by id, number, substring(#t.ref, 1, v.number)
order by id, count(id) desc, number desc 
```

你会得到一个结果集，其中每个 id 的第一条记录包含每个 id 的最大长度和最长的初始字符串。

这不是一个完整的解决方案，而是一个很好的起点：遍历 id，发出 SELECT TOP 1 以检索最长的字符串，并连接具有相同 id 的每条记录的字符串差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T11:56:33.037

```
declare @tableA table(id int, ref varchar(50))
declare @suffix table(id int, suffix varchar(50))
declare @todo table(id int)

insert into @tableA
select 1, '3536757616'
union select 1, '3536757617'
union select 1, '3536757618'
union select 2, '3536757628'
union select 2, '3536757629'
union select 2, '3536757630'

insert into @suffix
select * from @tableA

insert into @todo
select s1.id
from (
    select id, cnt = count(*)
    from @suffix
    group by id, substring(suffix, 1, 1) 
  ) s1 
  inner join (
    select id, cnt = count(*)
    from @suffix
    group by id
  ) s2 on s2.id = s1.id and s2.cnt = s1.cnt

while exists (select * from @todo)
begin
  update @suffix
  set suffix = substring(suffix, 2, len(suffix) - 1)
  from @suffix s
       inner join @todo t on t.id = s.id

  delete from @todo

  insert into @todo
  select s1.id
  from (
      select id, cnt = count(*)
      from @suffix
      group by id, substring(suffix, 1, 1) 
    ) s1 
    inner join (
      select id, cnt = count(*)
      from @suffix
      group by id
    ) s2 on s2.id = s1.id and s2.cnt = s1.cnt  
end

select * from @suffix 
```

# python - pygtk gui 用 pyjack 线程冻结

> ID：944161
> 
> 赞同：0
> 
> 时间：2009-06-03T11:06:56.147
> 
> 标签：python, multithreading, pygtk

我有一个程序可以通过插孔连接从火线设备 (FA-66) 录制音频。界面是用 pygtk 创建的，录音是用 py-jack ( [http://sourceforge.net/projects/py-jack/](http://sourceforge.net/projects/py-jack/) )。录制是在不同的线程中完成的，因为必须同时使用 GUI 来查看音频的结果。

问题是当我启动录制线程时，GUI 响应变得非常缓慢。我在主线程的开头有 gtk.gdk 函数 start_threads() 。如果我做对了，我不需要threads_enter() 和threads_leave()，因为录制不会影响GUI。如果我错了，请纠正。

函数 jack.process() 记录来自三个麦克风的音频。例如，如果我用 time.sleep(2) 替换它，一切正常。

在这种情况下创建线程的最佳方法是什么？为什么 jack.process 会冻结 GUI？它需要所有的cpu时间还是什么？我的代码示例如下：

录音机.py：

```
...
def start(self):
    Thread(target=self._start).start()

def _start(self):
    while self.eventhandler.record.isSet():
        data = self._jackRecord(self.sample_length)
        self.datahandler.queue.put(data)

def _jackRecord(self, length):
    capture = Numeric.zeros((self.inputs, int(self.sample_rate * length)), 'f')
    output = Numeric.zeros((self.inputs, self.buffer_size), 'f')
    i = 0
    while i < capture.shape[1] - self.buffer_size:
        try:
            jack.process(output, capture[:,i:i+self.buffer_size])
            i += self.buffer_size
        except:
            pass
    return capture 
```

eventhandler.py：recordStart() 和 recordStop() 只是在按下开始和停止按钮时调用的回调函数。

```
...
def recordStart(self, widget, data=None):
    if not self.record.isSet():
        self.record.set()
        self.soundrecorder = SoundRecorder(self, self.datahandler)
        self.soundrecorder.connect()
        self.soundrecorder.start()
def recordStop(self, widget, data=None):
    if self.record.isSet():
       self.record.clear()
       del(self.soundrecorder) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T15:20:15.980

你误解了线程是如何工作的。

在这种情况下，线程对您没有帮助。

> *“然后，当记录一个样本时，将对其进行分析，并将结果显示在 GUI 中。同时，已经在记录下一个样本。”*

**错了**。线程不会同时做两件事。在 python 中，有一个全局锁可以防止两个线程同时运行 python 代码或接触 python 对象。除此之外，如果您没有两个 CPU 或内核，则两件事永远不会同时发生。线程机制只是在它们之间切换，每次执行固定数量的指令。

**线程还无益**地增加了处理、内存和代码复杂性开销。与单线程相比，使用线程的 Python 代码运行**速度更慢**，性能也**更低。**这条规则只有少数例外，您的情况不是其中之一。

您可能希望将录制循环重写为回调并将其与 GTK 循环集成（您将获得比使用线程更好的性能）。

为此，请[`gobject.idle_add`](http://pygtk.org/docs/pygobject/gobject-functions.html#function-gobject--idle-add)优先使用 a 。

如果您想真正“同时”运行两件事，使用两个处理器/内核，您想启动另一个进程。启动一个进程来收集数据并通过某种进程间通信机制将其传输到另一个正在分析和绘制数据的进程。[多处理](http://docs.python.org/library/multiprocessing.html)模块可以帮助您。

# sql-server - 开源数据库代理？

> ID：944162
> 
> 赞同：1
> 
> 时间：2009-06-03T11:06:59.407
> 
> 标签：sql-server, database, oracle, security, proxy

有谁知道开源数据库代理，它可以充当闭源客户端应用程序与 SQL 服务器和/或 Oracle 数据库之间的中介？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T11:31:57.313

根据我的经验，我还没有找到 Oracle 数据库的代理。因此，我把事情掌握在自己手中。可以在[Oracle 的 JDBC 驱动程序](http://www.oracle.com/technology/software/tech/java/sqlj_jdbc/htdocs/jdbc_111060.html)中找到此信息的重要来源。同样，我建议使用[Wireshark](http://www.wireshark.org/)来分析您的客户端和现有数据库之间的基本网络流量（虽然它只了解协议的基础，但您可以大致了解数据包结构）。

我不知道你希望你的代理做什么，所以我会给你一个我需要我做的总结。我的应该允许客户端使用可能与真正的 Oracle 服务器完全不同的用户名、密码和 SID 连接到我的代理服务器。例如，如果客户端以用户名`corner`、密码`gas`和 SID连接到代理`DOGRIVER`，则代理会将其转换为真实服务器上的用户名`scott`、密码`tiger`和 SID 。`PROD`

我设法创建了一个适用于 10g 数据库的代理。只需一点点工作，它就可以修改为与 11i 一起使用。通过一些更密集的工作，它可以与 9i 一起使用。我需要的大部分信息都可以在前面提到的 JDBC 驱动程序和 Wireshark 中找到，但如果您有兴趣，我愿意分享我的代码。

# lucene - 跨多个应用服务器同步 Lucene.net 索引

> ID：944166
> 
> 赞同：14
> 
> 时间：2009-06-03T11:09:42.147
> 
> 标签：lucene, lucene.net

我们正在为企业 Web 应用程序设计搜索架构。我们将为此使用 Lucene.net。索引不会很大（大约 100,000 个文档），但搜索服务必须始终处于运行状态并且始终处于最新状态。将一直有新文档添加到索引和并发搜索。由于我们必须为搜索系统提供高可用性，因此我们有 2 个应用程序服务器，它们公开 WCF 服务来执行搜索和索引（服务的副本在每个服务器中运行）。然后服务器使用 lucene.net API 来访问索引。

问题是，保持索引始终同步的最佳解决方案是什么？我们考虑了几个选项：

*   使用一台服务器进行索引并让第二台服务器通过 SMB 访问索引：不行，因为我们有单点故障情况；

*   对两台服务器建立索引，基本上每个索引都写入两次：可能性能很差，并且可能会出现不同步，例如。服务器 1 索引正常，服务器 2 磁盘空间不足或其他什么；

*   使用 SOLR 或 KATTA 包装对索引的访问：不，我们不能在服务器上运行 tomcat 或类似的东西，我们只有 IIS。

*   将索引存储在数据库中：我发现这可以使用 Lucene 的 java 版本（JdbcDirectory 模块）来完成，但我找不到与 Lucene.net 类似的任何东西。即使这意味着对性能的小幅影响，我们也会选择这个选项，因为它可以干净地解决最小开发的并发和同步问题。

*   使用 Lucene.net DistributedSearch contrib 模块：我无法提交包含有关此文档的单个链接。通过查看代码我什至不知道这段代码做了什么，但在我看来，它实际上将索引拆分到多台机器上，这不是我们想要的。

*   rsync 和朋友，在 2 个服务器之间来回复制索引：这对我们来说感觉很骇人且容易出错，而且，如果索引变大，可能需要一段时间，在此期间我们将返回损坏或不一致数据给客户端，所以我们必须制定一些我们不希望的临时锁定策略。

我知道这是一个复杂的问题，但我相信很多人以前都遇到过。欢迎任何帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-03T11:50:01.927

似乎最好的解决方案是将两台服务器上的文档索引到它们自己的索引副本中。

如果您担心索引在一台服务器上成功而在另一台服务器上失败，那么您需要跟踪每台服务器的成功/失败，以便在问题解决后重新尝试失败的文档。这种跟踪将在 Lucene 之外的任何系统中完成，无论您使用什么系统来呈现要索引到 Lucene 的文档。根据索引的完整性对您的重要性，您可能还必须从正在使用的任何负载均衡器中删除故障服务器，直到问题得到解决并且索引已重新处理任何未完成的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-02-22T04:59:45.127

我知道这是一个老问题，但我只是遇到了它，并想为其他寻求多服务器实施建议的人提供 2 美分。

为什么不将索引文件保存在共享的 NAS 文件夹中？它与您正在考虑的将索引存储在数据库中有何不同？可以复制数据库以实现高可用性，NAS 也可以复制！

我将配置您在负载均衡器后面的两个应用服务器。任何传入的索引请求都将索引 NAS 上机器特定文件夹中的文档。也就是说，NAS 上的索引与您的应用服务器一样多。当一个搜索请求进来时，你将使用 Lucene 进行多索引搜索。Lucene 有内置的构造（MultiSearcher）来做到这一点，并且性能仍然非常出色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T12:34:25.113

肖恩·卡彭特的回答 +1。在两台服务器上建立索引似乎是最明智和最安全的选择。

如果您要索引的文档很复杂（Word/PDF 等），您可以在单个服务器上执行一些预处理，然后将其提供给索引服务器，以节省一些处理时间。

我之前使用过的一个解决方案是在一台服务器上创建一个索引块，然后`rsync`将其传送到搜索服务器，并将该块合并到每个索引中，使用[`IndexWriter.AddIndexesNoOptimize`](http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/index/IndexWriter.html#addIndexesNoOptimize(org.apache.lucene.store.Directory[])). 您可以每 5 分钟创建一个新块，也可以在它达到一定大小时创建一个新块。如果您不必拥有绝对最新的索引，这可能是您的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-13T04:37:05.677

在 Java 世界中，我们通过在索引前面放置一个 MQ 来解决这个问题。仅当从队列中拉出的 bean 成功时插入才完成，否则它只是回滚它采取的任何操作，在 doc 上标记为待处理，稍后再试一次

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-09T07:31:06.400

我们保持负载平衡服务器同步的方式，每个服务器都有自己的 Lucene 副本，是在其他服务器上执行一个任务，该任务每 5 分钟运行一次，命令每个负载平衡服务器将其索引更新到某个时间戳。

例如，任务向所有负载均衡服务器发送时间戳“12/1/2013 12:35:02.423”（任务通过查询字符串将时间戳提交到每个负载均衡网站上的网页），然后每个服务器使用该时间戳向数据库查询自上次更新到该时间戳以来发生的所有更新，并更新其本地 Lucene 索引。

每个服务器还将时间戳存储在数据库中，因此它知道每个服务器上次更新的时间。因此，如果服务器脱机，当它重新联机时，下次它收到时间戳命令时，它将获取它在脱机时错过的所有更新。

# php - 有人可以解释一下这个脚本的作用吗

> ID：944167
> 
> 赞同：0
> 
> 时间：2009-06-03T11:09:52.303
> 
> 标签：php, regex

```
class person {

    var $name;
    var $email;

    //Getters
    function get_name() { return $this->name; }
    function get_email() { return $this->email; }

    //Setters
    function set_name( $name ) { $this->name = $name; }

    function set_email( $email ) {

        if ( !eregi("^([0-9,a-z,A-Z]+)([.,_,-]([0-9,a-z,A-Z]+))*[@]([0-9,a-z,A-Z]+)([.,_,-]([0-9,a-z,A-Z]+))*[.]([0-9,a-z,A-Z]){2}([0-9,a-z,A-Z])*$", $email ) ) {
            return false;
        } else { 
            $this->email = $email;
            return true;
        }

    }//EOM set_email

}//EOC person 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-03T11:12:53.343

它是用于存储有关人的信息的数据类。它还验证电子邮件。如果您给 set_email 方法一个无效的电子邮件（在这种情况下是一个与正则表达式不匹配的字符串），该方法将返回 false。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-03T11:13:24.170

这是一个存储用户名和电子邮件地址的类。set_email() 方法检查提供的地址以确保它在存储之前看起来有效。

[eregi](http://php.net/eregi)函数使用正则表达式检查电子邮件地址。这些是执行字符串操作和解析的非常强大的方法，但是那个特定的例子可能不是最好的介绍。如果您刚刚开始使用正则表达式，您可能希望查看与[Perl 兼容的正则表达式](http://uk.php.net/pcre)，因为这些正则表达式使用更广泛且功能更强大。此外，[ereg 函数将从 PHP5.3+ 开始弃用](http://uk.php.net/manual/en/intro.regex.php)

这[是介绍信息的一个来源](http://www.regular-expressions.info/php.html)，我建议使用[Regex Coach](http://www.weitz.de/regex-coach/)之类的应用程序来玩转和测试正则表达式。

分解它：

```
^                         # force match to be at start of string
([0-9,a-z,A-Z]+)          # one or more alphanumerics
([.,_,-]([0-9,a-z,A-Z]+)) # followed by period, underscore or 
                          # dash, and more alphanumerics
*                         # last pattern can be repeated zero or more times
[@]                       # followed by an @ symbol
([0-9,a-z,A-Z]+)          # and one or more alphanumerics
([.,_,-]([0-9,a-z,A-Z]+)) # followed by period, underscore or dash, 
                          # and more alphanumerics
*                         # last pattern can be repeated zero or more times
[.]                       # followed by a period
([0-9,a-z,A-Z]){2}        # exactly two alphanumerics
([0-9,a-z,A-Z])*$         # then the remainder of the string must be 
                          # alphanumerics too - the $ matches the end of the
                          # string 
```

编写一个正则表达式来匹配所有有效电子邮件地址的 100% 是相当复杂的，这是一个匹配大多数的简化模式。这是一篇关于[编写电子邮件地址正则表达式模式](http://www.regular-expressions.info/email.html)的好文章。

# asp.net - ASP.NET - 主题和相对引用

> ID：944170
> 
> 赞同：2
> 
> 时间：2009-06-03T11:10:32.257
> 
> 标签：asp.net, themes

我有一个使用主题的 ASP.NET 应用程序。假设我有一个名为“MySkin”的主题。

我有一个页面位于我的应用程序的子目录中。当我引用一个使用“MySkin”的页面时，我注意到 ASP.NET 呈现了一个链接元素，该元素向上移动到站点的根目录，然后向下移动到 App_Themes 目录。这是我在呈现的 ASP.NET 页面中找到的示例链接元素：

```
<link href="../../App_Themes/MySkin/theme.css" type="text/css" rel="stylesheet" /> 
```

渲染的链接元素是否有理由不使用以下内容：

```
<link href="/App_Themes/MySkin/theme.css" type="text/css" rel="stylesheet" /> 
```

这是浏览器兼容性问题还是有其他原因？

我问的原因是因为我正在使用 Server.Execute 呈现我的 ASP.NET 页面并将结果存储在不同的目录中。因此，我更愿意使用第二种方式来引用我的主题的 css。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-05-17T12:24:27.300

根据内置的内部类PageThemeBuildProvider，asp.net创建包含在主题目录下的css文件的相对路径

```
internal void AddCssFile(VirtualPath virtualPath)
{
    if (this._cssFileList == null)
    {
        this._cssFileList = new ArrayList();
    }
    this._cssFileList.Add(virtualPath.AppRelativeVirtualPathString);
} 
```

为了克服您的问题，您可以尝试使用基本标签：

```
//Add base tag which specifies a base URL for all relative URLs on a page
System.Web.UI.HtmlControls.HtmlGenericControl g = new System.Web.UI.HtmlControls.HtmlGenericControl("base");
//Get app root url
string AppRoot = Request.Url.AbsoluteUri.Replace(Request.Url.PathAndQuery, "");
g.Attributes.Add("href",AppRoot);
Page.Header.Controls.AddAt(0,g); 
```

使用这种方法的坏处是，如果应用程序 url 被更改，您的链接将会中断。

为了最大限度地减少此类更改影响，您可以使用 html include 代替基本标记来包含包含基本标记的文件，如下所示：

base.html 包含：

```
<base href="http://localhost:50897"></base> 
```

这可以在应用程序开始请求时创建：

```
bool writeBase = true;
        protected void Application_BeginRequest(object sender, EventArgs e)
        {
            if (writeBase)
            {
                writeBase = false;
                //Save it to a location that you can easily reference from saved html pages.                
                string path = HttpContext.Current.Server.MapPath("~/App_Data/base.html");
                using (System.IO.TextWriter w = new System.IO.StreamWriter(path, false))
                {
                    w.Write(string.Format("<base href=\"{0}\"></base>", HttpContext.Current.Request.Url.AbsoluteUri.Replace(HttpContext.Current.Request.Url.PathAndQuery, "")));
                    w.Close();
                }
            }            
        } 
```

并作为文字控件添加到您的 aspx ：

```
//the path here depends on where you are saving executed pages.
System.Web.UI.LiteralControl l = new LiteralControl("<!--#include virtual=\"base.html\" -->");
Page.Header.Controls.AddAt(0,l); 
```

saved.html 包含：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--#include virtual="base.html" -->
...
</head>
 .... 
</html> 
```

**更新：** 这是在 asp.net 开发服务器下测试的，如果在 IIS 下作为应用程序托管，则 AppRoot 将无法正确解析。要获得正确的应用程序绝对 url，请使用：

```
/// <summary>
/// Get Applications Absolute Url with a trailing slash appended.
/// </summary>
public static string GetApplicationAbsoluteUrl(HttpRequest Request)
{   
return VirtualPathUtility.AppendTrailingSlash(string.Format("{0}://{1}{2}", Request.Url.Scheme, Request.Url.Authority, Request.ApplicationPath));
} 
```

# mysql - MySQL 在整个表上加入 SUM 列

> ID：944173
> 
> 赞同：0
> 
> 时间：2009-06-03T11:11:26.683
> 
> 标签：mysql, sum, left-join

假设我有下表：

```
id    num_votes    total_rating
-------------------------------
1     20           30
2     40           13
3     15           25 
```

我想将所有`id`s 的 SUM 加入到整个表中，所以它看起来像：

```
id    num_votes    total_rating    sum
--------------------------------------
1     20           30              6
2     40           13              6
3     15           25              6 
```

我试图对自己进行 LEFT JOIN 但我只得到 1 行结果——有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T11:14:04.293

```
SELECT  t.*, idsum
FROM    (
        SELECT  SUM(id) AS idsum
        FROM    mytable
        ) q,
        mytable t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T11:15:22.933

```
SELECT id, num_votes, total_rating, (SELECT SUM(id) FROM `table`) AS sum FROM `table` 
```

这是一个内联选择，它们可能很昂贵。但它在这里有效。

# c# - 从 Animal[] 转换为 Dog[] 的最佳方式

> ID：944174
> 
> 赞同：5
> 
> 时间：2009-06-03T11:11:59.927
> 
> 标签：c#, arrays, casting

如果 Dog 继承自 Animal。

我有一个 Animal[]，我碰巧知道它只包含狗。得到 Dog[] 的最快/最好的方法是什么？我使用了 new ArrayList(oldarray).ToArray(typeof(Dog)); 到目前为止，但这感觉有点笨拙，我想知道是否有更优雅的东西。

更新：使用 .net 2.0 配置文件。应该马上就提到这一点。我希望在这种情况下编辑原始问题符合 stackoverflow 网络礼节。我期待着我们可以升级和使用 Linq 的那一天。

再见，卢卡斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-03T11:13:39.333

```
var dog_arr = Array.ConvertAll(animal_arr, x => (Dog) x); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-03T11:16:53.180

使用 LINQ 这将是

```
oldarray.Cast<Dog>().ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T11:27:33.750

也许您一开始就可以将它创建为 Dog[] 数组？

鉴于：

```
interface ICage {
    Animal[] GetAnimals();
} 
```

如果实例化一个包含 Dogs 的 Animal[] 数组，则不能强制转换该数组：

```
class DogCage : ICage {
    Animal[] GetAnimals() { return new Animal[] { spot, fido }; }
} 
```

如果你实例化一个包含 Dogs 的 Dog[] 数组，它仍然可以作为 Animal[] 数组返回，但你也可以将数组转换回 Dog[]。

```
class DogCage : ICage {
    Animal[] GetAnimals() { return new Dog[] { spot, fido }; }
} 
```

现在这将起作用：

```
Dog[] dogs = (Dog[])cage.GetAnimals(); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2009-06-03T11:28:05.950

您可以使用通用集合，例如 List from`System.Collections.Generic`而不是数组，然后使用以下内容：

```
List<Animal> animals = new List<Animal>();
animals.Add(new Dog());
List<Dog> dogs = animals.ConvertAll(delegate(Animal animal) { return (Dog)animal; }); 
```

如果你真的需要它在一个数组中，你也可以这样做：

```
animals.ConvertAll(delegate(Animal animal) { return (Dog)animal; }).ToArray(); 
```

# ruby-on-rails - 如何在rails中初始化自己的类？

> ID：944176
> 
> 赞同：0
> 
> 时间：2009-06-03T11:12:33.483
> 
> 标签：ruby-on-rails, ruby, oop

我想调用 InvoicingAndDelivery.report_lines，然后给我这些结果的数组，但它不起作用。有任何想法吗？

```
class InvoicingAndDelivery < Report
  include DateExtentions
  attr_accessor :report_lines, :tba_line, :sum_line

  def initialize(part_or_service_ids, start_date, to_date)

    # @report_lines = []

    number_of_months(start_date,to_date).times do |i|
      start_date = start_date + i.months
      l = InvoicingAndDeliveryReport.new
      l.month = start_date.strftime("%m/%Y")
      l.work_profile = WorkProfileLine.delivery_amount_for_serivces_in(part_or_service_ids, start_date)
      l.forecast_delivery = LineItem.forecast_delivery_amount_for_services_in(part_or_service_ids, start_date)
      l.invoicing = InvoiceLine.invoices_total_for_services_in(part_or_service_ids, start_date)
      l.projected_invoices = InvoiceLine.projected_invoice_total_for_services_in(part_or_service_ids, start_date)
      l.costs =  LineItem.costs_total_for_services_in(part_or_service_ids, start_date)
      l.gross_profit = l.invoicing - l.costs
      l.opportunities = LineItem.oportunities_value_for_services_in(part_or_service_ids, start_date)
      #    @report_lines<< l
    end

    @tba_line = InvoiceLine.service_type(@part_or_service).tba_lines.sum("invoice_lines.sell_price * invoice_lines.quantity").to_f
    @sum_line = get_sum_line
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T14:44:08.673

如果`InvoicingAndDelivery`来自`ActiveRecord::Base`，[则不应覆盖`initialize`](http://blog.dalethatcher.com/2008/03/rails-dont-override-initialize-on.html)。而是将此代码放入`after_initialize`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T14:47:07.530

什么是报告？

有可能你覆盖了你不应该有的东西......需要在初始化时调用 super ，或者如前所述，使其成为回调。

# php - 为什么这个正则表达式匹配是积极的？

> ID：944180
> 
> 赞同：2
> 
> 时间：2009-06-03T11:13:17.913
> 
> 标签：php, regex, posix-ere

给定模式`^[a-zA-Z0-9 .\-_]+$`和字符串`te\\st`，为什么匹配是正数？我正在使用它来验证用户名，我不希望人们在他们的用户名中加上斜杠，它会与 URL 混淆。

我正在打电话`ereg($pattern, $username)`，正在运行 PHP 5.2.8 版。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-03T11:16:37.610

`ereg`疯了。我建议避免它。您应该尝试使用[`preg_match`](http://www.php.net/preg_match)：

```
$count = preg_match('/^[a-zA-Z0-9 .\-_]+$/', 'te/\st', $matches);
print_r($matches); // empty array (no matches)
print $count; // 0 (no matches) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T12:46:05.777

`^[a-zA-Z0-9 ._-]+$`

也会起作用。要匹配文字 - 在字符类中，通常最安全的做法是将其放在结尾 ] 之前，或者在使用 ereg (POSIX) 时将其放在开头 [ 之后。您应该能够逃脱 - 但由于某种原因直接在 . 似乎失败了。无论如何，如果您必须使用 ereg，有一个解决方案。关于为什么失败的真正好问题，. 应该只是字符类中的普通字符。埃雷格是越野车。

[进一步参考。](http://www.regular-expressions.info/charclass.html)

如果您可以选择使用 preg (PCRE) ...

# c# - 如何在鼠标悬停任何单元格时突出显示 datagridview 的行和/或列标签（在 c# 中）？

> ID：944187
> 
> 赞同：2
> 
> 时间：2009-06-03T11:14:45.303
> 
> 标签：c#, winforms, datagridview

使用 Windows 窗体上的 DataGridView 控件，当您将鼠标移动到行标签（或列标签）上时，它（标签单元格）的背景会变为蓝色阴影（或其他颜色，毫无疑问，取决于您的 Windows 配色方案）。

我想在将鼠标移动到网格中的任何单元格上时产生这种效果 - 即突出显示鼠标当前悬停在行上的行标签。

使用 mouseover 事件更改当前行样式的逻辑非常简单。我可以更改行的其他属性（比如背景颜色），但我真的想要比这更微妙的东西，我认为突出显示行标签会非常有效。

可以做到吗？如果可以，怎么做？（最好是 C#）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-21T17:37:51.683

你可以重写[OnCellPainting](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.oncellpainting.aspx)事件来做你想做的事。根据[DataGridView](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview(VS.85).aspx)的大小，您可能会看到闪烁，但这应该可以满足您的需求。

```
 class MyDataGridView : DataGridView
    {
        private int mMousedOverColumnIndex = int.MinValue;
        private int mMousedOverRowIndex = int.MinValue;

        protected override void OnCellMouseEnter(DataGridViewCellEventArgs e)
        {
            mMousedOverColumnIndex = e.ColumnIndex;
            mMousedOverRowIndex = e.RowIndex;
            base.OnCellMouseEnter(e);
            base.Refresh();
        }

        protected override void OnCellPainting(DataGridViewCellPaintingEventArgs e)
        {
            if (((e.ColumnIndex == mMousedOverColumnIndex) && (e.RowIndex == -1)) ||
                ((e.ColumnIndex == -1) && (e.RowIndex == mMousedOverRowIndex)))
            {
                PaintColumnHeader(e, System.Drawing.Color.Red);
            }
            base.OnCellPainting(e);
        }

        private void PaintColumnHeader(System.Windows.Forms.DataGridViewCellPaintingEventArgs e, System.Drawing.Color color)
        {
            LinearGradientBrush backBrush = new LinearGradientBrush(new System.Drawing.Point(0, 0), new System.Drawing.Point(100, 100), color, color);
            e.Graphics.FillRectangle(backBrush, e.CellBounds);
            DataGridViewPaintParts parts = (DataGridViewPaintParts.All & ~DataGridViewPaintParts.Background);
            e.AdvancedBorderStyle.Right = DataGridViewAdvancedCellBorderStyle.None;
            e.AdvancedBorderStyle.Left = DataGridViewAdvancedCellBorderStyle.None;
            e.Paint(e.ClipBounds, parts);
            e.Handled = true;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T11:29:29.207

您可以挂钩 DataGridView 的 CellMouseEnter 和 CellMouseLeave 事件，然后相应地更改背景颜色。像这样的东西：

```
 private void dataGridView1_CellMouseEnter(object sender, DataGridViewCellEventArgs e)
    {
        if (e.RowIndex < 0 || e.ColumnIndex < 0) //column header / row headers
        {
            return;
        } 

        this.dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Style.BackColor = Color.LightBlue;
    }

    private void dataGridView1_CellMouseLeave(object sender, DataGridViewCellEventArgs e)
    {
        if (e.RowIndex < 0 || e.ColumnIndex < 0) //column header / row headers
        {
            return;
        }

        this.dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Style.BackColor = Color.White;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-29T11:52:17.797

我知道你已经对此有了回应，但我会分享一些不同的东西。

这样一来，**整行都被涂漆了**。我只是稍微修改了@BFree 评论。

```
 private void dataGridView1_CellMouseEnter(object sender, DataGridViewCellEventArgs e)
    {
        if (e.RowIndex < 0 || e.ColumnIndex < 0) //column header / row headers
        {
            return;
        }
        foreach (DataGridViewCell cell in this.dataGridView1.Rows[e.RowIndex].Cells)
        {
           cell.Style.BackColor = Color.LightBlue;
        }
    }

    private void dataGridView1_CellMouseLeave(object sender, DataGridViewCellEventArgs e)
    {
        if (e.RowIndex < 0 || e.ColumnIndex < 0) //column header / row headers
        {
            return;
        }
        foreach (DataGridViewCell cell in this.dataGridView1.Rows[e.RowIndex].Cells)
        {
            cell.Style.BackColor = Color.White;
        }
    } 
```

# sql - 使用 SQL 压缩查询

> ID：944198
> 
> 赞同：2
> 
> 时间：2009-06-03T11:19:04.983
> 
> 标签：sql, mysql, group-by, aggregate, sql-order-by

我有一张桌子，上面有 4 件我想要的东西……名称、价格、数量和特定日期

每个日期有很多条目：

```
Name          Price  Date

Twin Private  $25    06/02/09
Double        $35    06/02/09
Single        $20    06/02/09
Twin Private  $25    06/03/09
Double        $35    06/03/09
Single        $20    06/03/09
Twin Private  $25    06/04/09
Double        $35    06/04/09
Single        $20    06/04/09 
```

我怎样才能把它浓缩成：

```
Name          Price_06/02/09  Price_06/03/09  Price_06/04/09

Twin Private  $25             $25             $30
Double        $35             $35             $50
Single        $20             $20             $40 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-03T11:24:35.067

我认为这会做到：

```
select  Name,
        max(Price_06/02/09) as Price_06/02/09,
        max(Price_06/03/09) as Price_06/03/09,
        max(Price_06/04/09) as Price_06/04/09
from    (
        select    Name,
                  case Date
                      when '06/02/09' then Price
                      else null
                  end as Price_06/02/09,
                  case Date
                      when '06/03/09' then Price
                      else null
                  end as Price_06/03/09,
                  case Date
                      when '06/04/09' then Price
                      else null
                  end as Price_06/04/09
        from      Rates) as Aggregated
group by 
        Name 
```

这分两个阶段进行，内部查询将数据延伸出来，因此您最终会得到：

```
Name          Price_06/02/09  Price_06/03/09  Price_06/04/09

Twin Private  $25             null            null
Double        $35             null            null
Single        $20             null            null
Twin Private  null            $25             null
Double        null            $35             null
Single        null            $20             null
Twin Private  null            null            $25
Double        null            null            $35
Single        null            null            $20 
```

然后外部查询按名称分组以将其展平为：

```
Name          Price_06/02/09  Price_06/03/09  Price_06/04/09

Twin Private  $25             $25             $25
Double        $35             $35             $35
Single        $20             $20             $20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T23:12:48.847

我最终使用了这样的东西：

我正在使用mysql，它是否支持PIVOT？

```
SELECT

    name, room_id,

      MAX(IF(to_days(bookdate) - to_days('2009-06-24') = 0, price, '')) AS Day1,
      MAX(IF(to_days(bookdate) - to_days('2009-06-24') = 1, price, '')) AS Day2,
      MAX(IF(to_days(bookdate) - to_days('2009-06-24') = 2, price, '')) AS Day3,
      MAX(IF(to_days(bookdate) - to_days('2009-06-24') = 3, price, '')) AS Day4,
      MAX(IF(to_days(bookdate) - to_days('2009-06-24') = 4, price, '')) AS Day5,
      MAX(IF(to_days(bookdate) - to_days('2009-06-24') = 5, price, '')) AS Day6,
      MAX(IF(to_days(bookdate) - to_days('2009-06-24') = 6, price, '')) AS Day7, spots
    FROM `availables`
    GROUP BY name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T12:01:53.383

除了 Garry Shutler 的[回答](https://stackoverflow.com/questions/944198/condensing-query-using-sql/944211#944211)之外，更改位置的列和行可能会很有用，因为房间名称的数量肯定有限，但我们不能这样说日期。

# jquery - 即时创建/附加 Divs-无法获取 ID JQuery

> ID：944206
> 
> 赞同：1
> 
> 时间：2009-06-03T11:21:38.550
> 
> 标签：jquery

我正在动态创建 Div。如果我尝试获取这些 Div 的属性 ID，我将无法获取它。

```
$("#displayPanel div").click(function (){ alert($(this).attr("id")); } 

<div id="displayPanel" class="displayPanel"> 
      <div id="heading"> Display Panel </div> <br/> 
      <div id="save" class="saveClass"></div> <br/> 
       <div id="field1" class="my"> </div> 
       <div id="field2" class="my"> </div> 
</div> 
```

`Field1`并被`Field2`创建并附加到`DisplayPanel`. 而且我无法获得这些 div 的 ID。但我正在获取其他现有 div 的 id

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T11:24:29.310

添加 div 后是否重新绑定事件？

您可以使用 live() 方法绑定实时点击事件：

```
$("#displayPanel div").live("click", function (){ alert($(this).attr("id")); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T11:23:18.970

您需要使用[live 事件](http://docs.jquery.com/Events/live)，`.click()`它只适用于页面加载后的元素。

```
$("#displayPanel div").live("click", function(){ ... 
```

# php - xml 集成 - 将 xml 发布到 url

> ID：944209
> 
> 赞同：2
> 
> 时间：2009-06-03T11:23:22.777
> 
> 标签：php, javascript, xml

请帮帮我，我又是这个问题

不要阻止这个问题

我想将我的 xml 文件发布到 url

我将从那里得到一个响应 xml 文档作为回报

但我不知道该怎么做

我想尽可能简单地做到这一点

不使用 curl 或任何其他东西

只使用 java script , ajx 和 php

请任何人提供代码来执行此操作

帮助.................

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T11:30:07.363

使用 jQuery（免费）就这么简单：[http://groups.google.com/group/jquery-en/browse_thread/thread/4509b4b7a43ee6bd](http://groups.google.com/group/jquery-en/browse_thread/thread/4509b4b7a43ee6bd)

希望有帮助！

# c# - 禁用控制面板

> ID：944212
> 
> 赞同：0
> 
> 时间：2009-06-03T11:24:48.153
> 
> 标签：c#, windows, controlpanel

我使用以下代码禁用 Windows 控制面板。它成功禁用了控制面板，但需要重新启动系统才能应用更改。有谁知道我如何可以立即将这些更改应用到控制面板，而无需重新启动系统？任何人都可以帮助我吗？

```
 RegistryKey RegKey = Registry.CurrentUser.CreateSubKey(@"Software\Microsoft\Windows\CurrentVersion\Policies\Explorer");
        RegKey.SetValue("NoControlPanel", true, RegistryValueKind.DWord); RegKey.Close();

        RegKey = Registry.LocalMachine.CreateSubKey(@"Software\Microsoft\Windows\CurrentVersion\Policies\Explorer");
        RegKey.SetValue("NoControlPanel", true, RegistryValueKind.DWord); RegKey.Close();

        //registry
        RegKey = Registry.CurrentUser.CreateSubKey(@"Software\Microsoft\Windows\CurrentVersion\
        Group Policy Objects\LocalUser\Software\Microsoft\Windows\CurrentVersion\Policies\System");
        RegKey.SetValue("DisableRegistryTools", true, RegistryValueKind.DWord); RegKey.Close();

        RegKey = Registry.CurrentUser.CreateSubKey(@"Software\Microsoft\Windows\CurrentVersion\Policies\System");
        RegKey.SetValue("DisableRegistryTools", true, RegistryValueKind.DWord); RegKey.Close();
        return true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T11:35:55.573

更改注册表后，您可以尝试运行[Gpupdate 。](http://technet.microsoft.com/en-us/library/bb490983.aspx)理论上，这应该重新加载组策略详细信息，因此禁用控制面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T09:48:43.287

以下代码将禁用：

```
Microsoft.Win32.RegistryKey regkey = Microsoft.Win32.Registry.CurrentUser.CreateSubKey(@"Software\Microsoft\Windows\CurrentVersion\Policies\Explorer");
                regkey.SetValue("NoControlPanel", true, Microsoft.Win32.RegistryValueKind.DWord);
                regkey.Close();

            regkey = Microsoft.Win32.Registry.LocalMachine.CreateSubKey(@"Software\Microsoft\Windows\CurrentVersion\Policies\Explorer");
            regkey.SetValue("NoControlPanel", true, Microsoft.Win32.RegistryValueKind.DWord);
            regkey.Close(); 
```

以及重新启用的代码：

```
Microsoft.Win32.RegistryKey regkey = Microsoft.Win32.Registry.CurrentUser.CreateSubKey(@"Software\Microsoft\Windows\CurrentVersion\Policies\Explorer");
                regkey.SetValue("NoControlPanel", false, Microsoft.Win32.RegistryValueKind.DWord);
                regkey.Close();

            regkey = Microsoft.Win32.Registry.LocalMachine.CreateSubKey(@"Software\Microsoft\Windows\CurrentVersion\Policies\Explorer");
            regkey.SetValue("NoControlPanel", false, Microsoft.Win32.RegistryValueKind.DWord);
            regkey.Close(); 
```

# asp-classic - 寻找将“特色”添加到特定数字序列的代码

> ID：944213
> 
> 赞同：0
> 
> 时间：2009-06-03T11:25:17.810
> 
> 标签：asp-classic, count, numbers

我正在考虑在来自数据库的以下记录序列中添加一类“特色”（在经典 ASP 中）的最佳方法：N、Y、Y、N、N、Y、Y

顺序为：2 3 6 7 10 11 14 15 18 19...

我已经有一个计数（从每条记录的 1 开始）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T11:29:02.360

您可以在序列中搜索特定模式。

在这种情况下，如果 x mod 4 = 2 或 x mod 4 = 3，它看起来是有特色的。

# asp.net - 动态更改 GridView 项模板

> ID：944216
> 
> 赞同：8
> 
> 时间：2009-06-03T11:27:00.617
> 
> 标签：asp.net, gridview, dynamic, templates

我有一个相当大的 asp.net 网站，它在很多地方都使用绑定到同一个对象的 GridView。我正在使用项目模板来自定义每一行。但是，要在所有页面中使用相同的模板，我必须将项目模板复制并粘贴到每个页面。显然这不是最好的解决方案。最重要的是，我希望能够通过更改一些配置文件来更改 GridView 使用的模板。一种选择是使用 DataGrid 创建一个用户控件，并公开在每个页面中使用的必要属性。然而，这并不满足能够动态更改模板的第二个要求。基本上我正在寻找一种方法来告诉 GridView 使用模板并能够动态地执行此操作。任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-03T15:38:42.007

为了完成你想要的，我认为你有两个选择：

1.) 在代码中动态构建每个 TemplateField，并根据一些配置切换它们。
2.) 为您的自定义网格创建用户控件并使用它们。

我知道您说过您不想使用 UserControl，因为这会剥夺您动态更改布局的能力，但让我用一个例子来挑战这个假设。

您可以使用内置的 ASP.Net 功能，以便通过使用[PlaceHolder Control](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.placeholder.aspx)来根据您的喜好动态切换用户控件。

```
<asp:PlaceHolder ID="GridViewPlaceHolder" runat="server" /> 
```

您的自定义网格可以在 .ascx 文件中以声明方式构建，然后在运行时动态加载到位，如下所示：

```
GridViewPlaceHolder.Controls.Add(LoadControl("~/Controls/MyCustomControl.ascx")); 
```

现在，如果您真的想让您的生活更轻松，那么您可以创建一个抽象基类，您的所有自定义网格控件都将从该类继承。通过这种方式，您的控件可以在加载时进行一般处理。

```
public abstract class CustomGridControl: System.Web.UI.UserControl
{
    public abstract Object DataSource { get; set; }
} 
```

可以在标记中定义一个简单的网格：

```
<asp:GridView ID="myGridView" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField HeaderText="Name">
            <ItemTemplate>
                <asp:Label Text='<%#Eval("Name") %>' runat="server"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Age">
            <ItemTemplate>
                <asp:Label Text='<%#Eval("Age") %>' runat="server"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

您为该控件提供的代码如下所示：

```
public partial class SimpleGrid : CustomGridControl
{
    public override object DataSource
    {
        get { return myGridView.DataSource; }
        set { myGridView.DataSource = value; }
    }
} 
```

现在使用它的页面或控件只需转换为基类，您就可以通用地使用它。以下是如何使用它的简单示例，但我认为它清楚地说明了这一点：

```
protected void Page_Load(object sender, EventArgs e)
{
    var dataSource = new List<MyCustomClass>
                        {
                            new MyCustomClass{Name = "Josh", Age = 43},
                    new MyCustomClass{Name = "Bob", Age = 14},
                    new MyCustomClass{Name = "Ashley", Age = 32},
                        };

    DynamicallyLoadUserControlGrid("~/GridViewTemplates/SimpleGrid.ascx", dataSource);
}

private void DynamicallyLoadUserControlGrid(String controlLocation, List<MyCustomClass> dataSource)
{
    var ctrl = (CustomGridControl)LoadControl(controlLocation);
    ctrl.DataSource = dataSource;
    ctrl.DataBind();

    GridViewPlaceHolder.Controls.Add(ctrl);
} 
```

所以你有它。自定义模板控件，无需尝试在代码中手动构建它们。我将在另一个答案中发布*完全手动*的方法，但是一旦你看到它，我想你会同意这种方法是首选的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-03T15:59:03.087

好的，这里是 100% 手动构建模板化字段的示例。

创建动态模板列的第一步是创建一个实现 [System.Web.UI.ITemplate](http://msdn.microsoft.com/en-us/library/system.web.ui.itemplate.aspx)接口的类。对于我们这里的简单示例，我将使用标签。

```
public class MyCustomTemplate : ITemplate
{
    public String DataField { get; set; }

    public MyCustomTemplate(String dataField)
    {
        DataField = dataField;
    }

    public void InstantiateIn(Control container)
    {
        var label = new Label();
        label.DataBinding += label_DataBinding;

        container.Controls.Add(label);
    }

    void label_DataBinding(object sender, EventArgs e)
    {
        var label = (Label)sender;
        var context = DataBinder.GetDataItem(label.NamingContainer);
        label.Text = DataBinder.Eval(context, DataField).ToString();
    }
} 
```

请注意，为了支持 DataBinding，您必须在选择添加的任何控件上手动处理该事件。一旦你开发了你的模板，你就可以将它用作你想要使用的任何 TemplateField 的 ItemTemplate。

因此，假设我们有一些想要将网格绑定到的自定义业务对象集合。

```
public class MyCustomClass
{
    public String Name { get; set; }
    public Int32 Age { get; set; }
} 
```

我们将不得不手动将每一列构建为 TemplateField，然后将我们的集合绑定到 GridView。为了使这个更清洁和更容易做到，我将 TemplateField 集合的构建封装到一个静态帮助器类中：

```
public static class MyCustomTemplateCollection
{
    public static DataControlFieldCollection GetTemplateCollection()
    {
        var col = new DataControlFieldCollection();

        var nameField = new TemplateField
                        {
                            HeaderText = "Name",
                            ItemTemplate = new MyCustomTemplate("Name")
                        };

        var ageField = new TemplateField
                        {
                            HeaderText = "Age",
                            ItemTemplate = new MyCustomTemplate("Age")
                        };

        col.Add(nameField);
        col.Add(ageField);

        return col;
    }
} 
```

在后面的代码中使用它看起来像这样：

```
protected void Page_Load(object sender, EventArgs e)
{
    var dataSource = new List<MyCustomClass>
                        {
                            new MyCustomClass{Name = "Josh", Age = 43},
                    new MyCustomClass{Name = "Bob", Age = 14},
                    new MyCustomClass{Name = "Ashley", Age = 32},
                        };

    DynamicGrid(dataSource);
}

private void DynamicGrid(List<MyCustomClass> dataSource)
{
    var col = MyCustomTemplateCollection.GetTemplateCollection();

    foreach (DataControlField field in col)
    {
        myGridView.Columns.Add(field);
    }

    myGridView.DataSource = dataSource;
    myGridView.DataBind();
} 
```

最后，这将产生与动态用户控件示例相同的输出，但正如您所见，它要麻烦得多。这也是一个非常简单的示例，不包含任何 CSS 属性或多种类型的控件。你可以这样做，但这会很痛苦，并且可能会让你想一起退出编程。使用用户控制解决方案，让您的生活更轻松。

# profiling - 从命令行与 Visual Studio 运行 Profiler

> ID：944217
> 
> 赞同：0
> 
> 时间：2009-06-03T11:27:29.147
> 
> 标签：profiling

我正在使用内置分析器和 DevPartner .NET 分析器的 Visual Studio 2008。我可以选择从 Visual Studio 还是从命令行运行探查器？

有谁知道推荐哪个选项？

与从命令行运行相比，从 Visual Studio 运行需要更多时间是否正确？

谢谢。

达美什。 [http://smartsecurity.blogspot.com](http://smartsecurity.blogspot.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-22T06:03:49.910

好吧，我发现自己从命令行运行分析器比从 IDE 运行要好得多和准确得多。IDE 需要自己的时间来加载和显示分析统计信息。甚至微软也建议从命令行运行分析器。

这是链接：http: [//blogs.msdn.com/buckh/archive/2007/10/09/using-vsts-2008-memory-allocation-profiling.aspx](http://blogs.msdn.com/buckh/archive/2007/10/09/using-vsts-2008-memory-allocation-profiling.aspx)

谢谢和问候， Dharmesh Mehta

# c# - Server.MapPath 和 HostingEnvironment.MapPath 有什么区别？

> ID：944219
> 
> 赞同：185
> 
> 时间：2009-06-03T11:28:04.780
> 
> 标签：c#, asp.net

`Server.MapPath()`和有什么区别`HostingEnvironment.MapPath()`吗？`Server.MapPath()`有什么优势吗`HostingEnvironment.MapPath()`？

我最初的问题是在服务器上映射文件路径时`HttpContext`不存在并且我无法将`Server`变量传递`Global.asax`给我的方法。

我`HostingEnvironment.MapPath()`改用它，因为它不需要`HttpContext`. 是否存在这两种方法会给出不同结果的情况？

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2009-06-03T11:43:47.353

`Server.MapPath()`最终调用`HostingEnvironment.MapPath()`，但它创建一个`VirtualPath`具有特定选项的对象：

> `VirtualPath`传递给的对象`HostingEnvironment.MapPath()`是这样构造的：
> 
> ```
> VirtualPath.Create(path, VirtualPathOptions.AllowAllPath|VirtualPathOptions.AllowNull); 
> ```

***编辑****：实际上，唯一的区别是您可以将 null 传递给`Server.MapPath()`，但不能传递给`HostingEnvironment.MapPath()`*

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2009-06-03T11:44:36.930

`Server.MapPath()`需要一个`HttpContext`. `HostingEnvironment.MapPath`才不是。

# c# - 我应该使用 Screen.PrimaryMonitor 还是 Screen.AllScreens 来设置 Form.Location？

> ID：944223
> 
> 赞同：0
> 
> 时间：2009-06-03T11:29:30.627
> 
> 标签：c#, .net, winforms, screen

作为问题的建议，我是否应该检查 Rectangle 以根据以下内容设置 Form.Location （取自设置文件）：

**1.**

```
if (settings.X <  Screen.PrimaryScreen.WorkingArea...)
{
  // Set the form's Location based on the settings object
} 
```

*或者*

**2.**

```
int width = 0;
foreach (Screen screen in Screen.AllScreens)
{
    width += screen.WorkingArea.Width;
}

if (settings.X <  width...)
{
  // Set the form's Location based on the settings object
} 
```

或者是否有一个简单的班轮可以完成#2 的任务？我正在研究双显示器，但用户群可能有任意数量的配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T12:03:13.180

也许我对这个不同问题的回答在这种情况下也有帮助：

[使用多个监视器恢复窗口大小/位置](https://stackoverflow.com/questions/937298/restoring-window-size-position-with-multiple-monitors/940290#940290)

# c - 数据类型范围的定义

> ID：944224
> 
> 赞同：2
> 
> 时间：2009-06-03T11:29:39.317
> 
> 标签：c

整数等数据类型的“范围”是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-04T03:58:59.980

[数据类型](http://en.wikipedia.org/wiki/Data_type)是一种抽象，应用于一块内存，以将那块内存视为可以表示值的区域。

例如，一个字节由 8 位内存组成。在下图中，每个位都用下划线 ( `_`) 表示：

```
byte: _ _ _ _ _ _ _ _  <- 8 bits 
```

由于我们有 8 个位置可以输入`0`or `1`（因为每个内存位只能设置为`on`or`off`状态 - 因此[binary](http://en.wikipedia.org/wiki/Binary_numeral_system)），所以我们可以有`2^8`or 256 个不同值的组合，我们可以从 8 位中表示。

这就是范围的概念发挥作用的时候——我们如何将这 256 个值组合分配给一个可用范围？

一种方法是将 256 个组合中的第一个作为`0`，将最终组合作为`255`：

```
byte: 0 0 0 0 0 0 0 0  <- Represents a "0"
byte: 0 0 0 0 0 0 0 1  <- Represents a "1"

        .. so on ..

byte: 1 1 1 1 1 1 1 0  <- Represents a "254"
byte: 1 1 1 1 1 1 1 1  <- Represents a "255" 
```

对于这种数据类型，范围是从`0`到`255`。这种类型通常称为 an `unsigned byte`，因为它可以表示的值是`unsigned`没有符号的。基本上，它的处理方式好像都是正数。

另一方面，由于我们有 256 种组合，如果我们将其中一半指定为正数而另一半指定为负数怎么办？因此，我们为字节表示分配正值或负值：

```
byte: 0 1 1 1 1 1 1 1  <- Represents a "127"
byte: 0 1 1 1 1 1 1 0  <- Represents a "126"

        .. so on ..

byte: 0 0 0 0 0 0 0 1  <- Represents a "0"
byte: 0 0 0 0 0 0 0 0  <- Represents a "0"
byte: 1 1 1 1 1 1 1 1  <- Represents a "-1"

        .. so on ..

byte: 1 0 0 0 0 0 0 1  <- Represents a "-127"
byte: 1 0 0 0 0 0 0 0  <- Represents a "-128" 
```

上述表示称为“二进制补码”系统，上表改编自[维基百科关于二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)的文章。

使用这种类型的表示，在相同的 8 位中，我们可以定义一种表示从`-128`到的数字范围的方法`127`。这种表示通常称为 a `signed byte`，因为它是一种`byte`可以同时具有正数和负数表示的类型。

在比较`unsigned byte`和`signed byte`时，它们的范围是不同的：

```
unsigned byte :       0  -  255
signed byte   :    -128  -  127 
```

但是，它们都有 256 种可能的值组合，它们可以表示。它们的区别仅在于它们可以表示的值的*范围*。那是数据类型的范围。

同样，这也可以扩展到`int`, `long`, `float`,`double`类型。分配给每种数据类型的位数是不同的。例如：

```
int:  _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _   <- 16 bits
long: _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _  <- 32 bits 
```

*注意：每种类型的实际位数，例如`int`和`long`可能与实现和架构相关，因此上表不一定正确。*

在上图中，`int`类型用 16 位表示，即它可以表示的值`2^16`或`65536`值的组合。同样，与 一样`byte`，值的范围可以全是正数，也可以分为正数和负数：

```
unsigned int  :       0  -  65535
signed int    :  -32768  -  32767 
```

*（同样，`int`不一定必须是 16 位。）*

[浮点](http://en.wikipedia.org/wiki/Floating_point)类型（例如`float`和`double`）也由内存中的位表示，但它们的数据表示不同于整数数据类型（例如`byte`和`int`），因为它们会将值作为二进制分数和指数存储在内存中。浮点类型也确实有范围的概念。

有关如何在现代系统中定义和计算浮点值的详细信息，请参阅[Wikipedia 上有一篇关于 IEEE-754 的文章](http://en.wikipedia.org/wiki/IEEE_754-1985)。

数据类型的数据范围来自值的组合，这些值可以从为单个数据类型的单个单元分配的内存量中表示，以及这些可能的组合如何分配给它们所代表的实际值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-03T11:35:39.520

范围是指可以存储在给定类型变量中的最大值和最小值。例如，如果您有 unsigned char 并且我们假设数据类型的大小是 8 位，那么您可以在其中存储 0-2^8-1 即 0-255 的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T11:39:36.860

您应该查看标准包含路径中的 limits.h。您的机器类型有准确的范围

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-03T11:46:17.143

> 变量的范围
> 
> 变量的范围是该变量可以保持的最高值和最低值之间的差值。例如，带符号的 16 位整数变量的范围是 -32,768 到 +32,767。在整数的情况下，变量定义仅限于整数，范围将覆盖其范围内的每个数字（包括最大值和最小值）。但是，对于其他数字类型，例如浮点数，范围仅表示可以存储的最大和最小数字 - 在范围内会有很多无法表示的数字。

[来自维基百科](http://en.wikipedia.org/wiki/Range_(computer_science))

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-03T11:49:40.960

C 中的大多数类型都依赖于机器，因此您应该查看编译器为您的架构提供的 limits.h。

对于序数类型，还有一种手动检查方法：

*   如果未签名：`min = 0, max = 2**(sizeof(type)*8)-1`
*   如果签名：min =`-2**(sizeof(type)*8-1), max = 2**(sizeof(type)*8-1)-1`

对于浮点值，您可以查看 IEEE 754 标准，因为它是几乎所有架构中最常用的格式。

编辑：

范围的定义是类型可以容纳的最大值和最小值之间的差异。对于序数类型，它是`2**(sizeof(type)*8)`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-03T11:36:38.367

有关 c 中的数据类型及其范围的更多信息：[这里](http://www.exforsys.com/tutorials/c-language/c-programming-language-data-types.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-03T11:31:47.673

范围是该数据类型支持的最小值到最大值。

**C 中的**整数**`16-bit`是.**

 ****有符号的 int**将`-32768`是`32767`ie`(-2^15)`到`(2^15 -1)`

**无符号整数：** `0 to 65535`即`0 to (2^16)`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-03T11:34:06.060

范围是数据类型可以使用的值的范围，定义在其最小值和最大值之间。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-22T16:58:29.267

```
public class JavaApplication4 {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {

    System.out.println("Byte->"+Byte.MAX_VALUE+" "+Byte.MIN_VALUE);
     System.out.println("Short->"+Short.MAX_VALUE+" "+Short.MIN_VALUE);
    System.out.println("Integer->"+Integer.MAX_VALUE+" "+Integer.MIN_VALUE);
     System.out.println("long->"+Long.MAX_VALUE+" "+Long.MIN_VALUE);
    System.out.println("float->"+Float.MAX_VALUE+" "+Float.MIN_VALUE);
    System.out.println("Double->"+Double.MAX_VALUE+" "+Double.MIN_VALUE);

} 
```

}

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-06-03T11:43:12.207

在 x86 上，char 为 1 字节，short 为 2，int 为 4，float 为 4，double 为 8

根据您使用它们的方式（有符号或无符号），您可以据此计算范围。

# javascript - 如何从函数内部设置javascript变量？

> ID：944225
> 
> 赞同：0
> 
> 时间：2009-06-03T11:29:41.467
> 
> 标签：javascript, variables

请看下面的代码。当 i == 0 的值时，警报 1 根据逻辑打印变量值。但是，如果我尝试打印值（警报 2），它只会显示“未定义，未定义”。我的问题是我必须进行哪些更改才能使第二个警报（警报 2）中打印的值与警报 1 相同？

```
var testPoint = [];

function load() {
  if (GBrowserIsCompatible()) {
    map = new GMap2(document.getElementById("map_canvas"));
    map.addControl(new GSmallMapControl());
    map.addControl(new GMapTypeControl());
    map.setCenter(new GLatLng(52.5271463402545, -1.50573921491311), 8, G_HYBRID_MAP);

    GDownloadUrl("controllers/gmap_genxml2.php", function(data) {
      var xml = GXml.parse(data);
      var markers = xml.documentElement.getElementsByTagName("marker");
      for (var i = 0; i < markers.length; i++) {
        if(i == 0) {
            testPoint["lat"] = parseFloat(markers[i].getAttribute("lat"));
            testPoint["lng"] = parseFloat(markers[i].getAttribute("lng"));

            /********* ALERT 1 ***********/
            alert(testPoint["lat"]+" "+testPoint["lng"]);
            /********* ALERT 1 End ***********/
        }
        var name = markers[i].getAttribute("name");
        var address = markers[i].getAttribute("address");
        var type = markers[i].getAttribute("type");
        var point = new GLatLng(parseFloat(markers[i].getAttribute("lat")),
                                parseFloat(markers[i].getAttribute("lng")));
        var marker = createMarker(point, name, address, type);
        map.addOverlay(marker);
      }
    });

    /********* ALERT 2 ******************/
    alert(testPoint["lat"]+" "+testPoint["lng"]);
    /********* ALERT 2 Start ***********/
  }
} 
```

感谢您的帮助。迪杰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T11:37:48.910

你必须意识到很多 JavaScript 都是基于事件的。这是正在发生的事情：

`GDownloadUrl`接受回调。第二个参数是*请求完成时*将调用的函数。它**不会**立即被调用。这个很重要。关闭对 的调用后`GDownloadUrl`，Javascript 将继续运行。它不会等待请求完成。事实上，如果您将两个警报都保留在其中，您将看到警报 2 将在警报 1 之前触发。因此，如果您想在获取这些变量后对它们执行特定操作，您应该将该代码移至一个函数并从`GDownloadUrl`回调中调用它。这正是 JavaScript 的工作方式，你会习惯的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T11:34:21.770

两个对象键 lat 和 lng 仅在 GDownloadUrl 调用的回调函数中被赋值。

您必须等待它执行一次，然后您将获得正确的值。

我建议你在这个回调函数的末尾移动alert 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T11:36:10.160

您将函数指针传递给另一个函数调用。这并不一定会使代码执行。时间可能不对。您的 ALERT 1 在调用函数时发生（很好），但 ALERT 2 实际上是在调用函数之前执行的！

在打印 testPoint 的内容之前尝试延迟 1 秒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T11:38:05.367

```
 testPoint = [];

    // This global var is introduced to mark that testPoint values are not yet loaded.
    var isLoaded = false;

    function load() {

    if (GBrowserIsCompatible()) {
        map = new GMap2(document.getElementById("map_canvas"));
        map.addControl(new GSmallMapControl());
        map.addControl(new GMapTypeControl());
        map.setCenter(new GLatLng(52.5271463402545, -1.50573921491311), 8, G_HYBRID_MAP);

    GDownloadUrl("controllers/gmap_genxml2.php", function(data) {
      var xml = GXml.parse(data);
      var markers = xml.documentElement.getElementsByTagName("marker");
      for (var i = 0; i < markers.length; i++) {
        if(i == 0) {
                testPoint["lat"] = parseFloat(markers[i].getAttribute("lat"));
                testPoint["lng"] = parseFloat(markers[i].getAttribute("lng"));

                /********* ALERT 1 ***********/
                alert(testPoint["lat"]+" "+testPoint["lng"]);
                /********* ALERT 1 End ***********/

                // Set it to true to indicate that testPoint array is already loaded.
                isLoaded = true;
        }
        var name = markers[i].getAttribute("name");
        var address = markers[i].getAttribute("address");
        var type = markers[i].getAttribute("type");
        var point = new GLatLng(parseFloat(markers[i].getAttribute("lat")),
                                parseFloat(markers[i].getAttribute("lng")));
        var marker = createMarker(point, name, address, type);
        map.addOverlay(marker);
      }
    });

    /********* ALERT 2 ******************/
     // Try to alert testPoint each 0.5 sec until we can successfully do it.
     function alert2() {
         // if testPoint is loaded - then alert it, if not then try in 0.5 sec.
         if (isLoaded) {
              alert(testPoint["lat"]+" "+testPoint["lng"])
         } else {
              setTimeout(alert2, 500);
         }
     };

     alert2();
    /********* ALERT 2 Start ***********/
  }
} 
```

# eclipse - 如何自动化测试图形（基于 Eclipse）桌面应用程序？

> ID：944226
> 
> 赞同：3
> 
> 时间：2009-06-03T11:30:03.683
> 
> 标签：eclipse, continuous-integration, automated-tests

我需要基于 Eclipse 自动测试桌面应用程序。值得吗？如果是，我可以将哪些工具与一些知名的持续集成工具一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T12:18:36.067

[**SWTBot**](http://www.eclipse.org/swtbot/)逐渐成熟，可用于基于 SWT 的 Gui 测试。

您可以将这些测试集成到持续集成过程中，甚至可以将它们作为 JUnit 测试。

![作为配置运行](https://i.stack.imgur.com/Dj1ge.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-02T15:28:11.337

我们从实例化中使用一个名为[WindowTester](http://www.instantiations.com/windowtester/)的商业工具。您可以在 RCP Developer 套件中与 WindowBuilder（UI 设计器）一起购买。在我看来，它真的很好而且很便宜。

# html - Css 固定显示在 IE6 中不起作用

> ID：944228
> 
> 赞同：0
> 
> 时间：2009-06-03T11:30:18.423
> 
> 标签：html, css, internet-explorer, internet-explorer-6

我正在尝试复制getsatisfaction选项卡的效果-它在IE7和Firefox以及几乎所有其他浏览器中都可以正常工作，但在Explorer 6中却一团糟-我讨厌IE6，但它是最常用的浏览器-我的选项卡现在而不是被覆盖在侧面，而是坐在我页面的顶角，将所有页面内容推到底部。

该选项卡只是应用了此 CSS 样式的链接：

```
a#feedback_link
{
  position:fixed; top:40%; 
  right:0px !important; 
  z-index:9999999; 
  text-decoration:none; 
  background-color:#2E8CDC; 
  padding:0px; 
  border:0px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T11:34:58.057

`display: fixed`IE6 不支持

有关此问题的一些解决方法，请参见：[http ://tagsoup.com/cookbook/css/fixed/](http://tagsoup.com/cookbook/css/fixed/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T11:37:30.250

IE6 忽略位置：固定。这是一个已知的缺陷。一种可能（但有些难看）的解决方法是在 CSS 文件中使用 JavaScript 表达式，如下所示：

```
a#feedback_link
{
    position:absolute; 
    top:expression(eval(document.documentElement.scrollTop+document.documentElement.clientHeight*0.4));
    ... 
```

使用条件注释将此声明限制为仅限 IE6。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T11:38:16.397

`display: fixed`IE6 不支持。

如果你想让它工作，我建议尝试[IE7.js 或 IE8.js](http://code.google.com/p/ie7-js/)，它们是 IE6 的兼容性补丁（通过 JavaScript 实现），支持`display: fixed`.

您可以`IE7.js`在此处查看功能概览：

[`http://www.charlescooke.me.uk/web/lab_notes/ie7_script.html`](http://www.charlescooke.me.uk/web/lab_notes/ie7_script.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-03T11:44:21.283

好吧，在我开始之前：IE6实际上是最常用的浏览器。[让数字说话](http://www.w3schools.com/browsers/browsers_stats.asp)。

问题可能与“固定”定位有关。将其更改为绝对（并根据需要更改代码）或使用条件 css 为 ie6 制作特殊 css。

在此处查看一些示例：[http://snipplr.com/view/2952/ie6-fixed-position-fix/](http://snipplr.com/view/2952/ie6-fixed-position-fix/)

# vim - VIM：选项、变量和两者之间的转换

> ID：944229
> 
> 赞同：6
> 
> 时间：2009-06-03T11:31:03.773
> 
> 标签：vim

我对VIM中的这些感到困惑。有些东西需要设置，有些则需要设置。而且，我如何检查某个选项。我知道这是一个选项，因为我使用 set 来更改它。

例如，如何检查当前文件类型选项是否为 java？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-06-03T18:15:32.380

**选项**

所有这些选项都会以一种或另一种方式改变 Vim 的行为。其中许多是用来定制你的 Vim：你可以设置如何处理备份文件，如何管理文本，是否显示菜单和工具栏，以及一堆其他的东西。有几个选项是缓冲区或窗口的本地选项；例如，它们指定应该在缓冲区上使用哪种语法高亮和缩进。该`:set`命令可用于设置和打印选项的值，请参阅[`:help :set`](http://vimdoc.sourceforge.net/htmldoc/options.html#:set)。如果您键入 ，您将获得所有选项的列表以及单行描述[`:h option-list`](http://vimdoc.sourceforge.net/htmldoc/quickref.html#option-list)。如果您键入 ，您将获得所有选项的列表及其详细说明[`:h option-summary`](http://vimdoc.sourceforge.net/htmldoc/options.html#option-summary)。

**内部变量**

内部变量是不同的东西：它们就像程序中的变量。您可以随时创建或销毁变量。它们本身不会影响 Vim 的行为，只能通过可以读取（和修改）它们的值并基于它做不同事情的 Vim 脚本（例如 Vim 插件和你的 .vimrc 文件）。有几种内部变量：全局变量、局部变量和其他一些变量。它们在 中进行了描述[`:h internal-variables`](http://vimdoc.sourceforge.net/htmldoc/eval.html#internal-variables)。它们在表达式 ( [`:h expression`](http://vimdoc.sourceforge.net/htmldoc/eval.html#expression)) 中进行评估，并且可以使用`let`( [`:h :let`](http://vimdoc.sourceforge.net/htmldoc/eval.html#:let)) 和`unlet`( [`:h :unlet`](http://vimdoc.sourceforge.net/htmldoc/eval.html#:unlet)) 命令设置和删除它们。

**广义上的变量**

还有其他对象的行为类似于变量，但不是内部变量。它们也在表达式中进行评估，并且可以使用`let`命令设置它们的值；但它们不能被删除。除了内部变量之外，还有三种类型的变量：环境变量（[`:h :let-environment`](http://vimdoc.sourceforge.net/htmldoc/eval.html#:let-environment)）、寄存器变量（[`:h let-register`](http://vimdoc.sourceforge.net/htmldoc/eval.html#:let-register)）和选项变量（[`:h let-option`](http://vimdoc.sourceforge.net/htmldoc/eval.html#:let-option)）。它们都有一个前缀，以便它们可以与内部变量以及彼此区分开来。环境变量以 为前缀`$`，寄存器变量以为前缀`@`，选项变量以`&`. 这些变量指向某个地方（指向真实的环境变量、寄存器或选项），当它们的值在脚本中或由用户读取或设置时，实际上“真实事物”的值被读取或设置。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-06-03T11:54:29.670

刚刚通过更多研究得到了这个：要获取选项的值，请在选项前面加上`&`.

所以，上面可以做为

```
if &filetype == 'java' 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-06-03T12:09:24.743

*:set*用于显示选项值，显式设置选项值并切换它们，而*:let*用于设置选项值作为先前表达式的结果（当您通过变量定义选项值时）。自然，在 vim 脚本中，您将使用*:let* more。

例如：
您通常将文件类型设置为

```
:set ft=batch 
```

但你也可以

```
:let varijabla='batch'
:let &filetype=varijabla 
```

# javascript - 当访问者退出网站时如何弹出

> ID：944234
> 
> 赞同：2
> 
> 时间：2009-06-03T11:33:08.840
> 
> 标签：javascript, html, ajax

我的公司创建了网络调查，偶尔有人问我是否可以在网站上进行退出调查。因此，当访问者即将离开网站时，会出现一个“弹出窗口”，询问他们是否会进行快速调查。通过“弹出”，我指的是浮动 CSS div，而不是子窗口（尽管有时客户没有意识到这一点）。

编写真正的退出调查在技术上是否可行？

我不这么认为，但我错过了什么吗？**onbeforeunload**事件接近所需的功能，但消息和按钮不能完全自定义以使其可用。

当前实施退出调查的趋势是在访问开始时弹出邀请，如果用户说好的，则打开一个子窗口并将焦点设置回主窗口。在访问结束时，用户会看到子窗口。我发誓我从未见过“退出时弹出”调查（除非巧合）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T11:38:44.133

他们肯定会通过关闭窗口/选项卡来“退出”网站吗？您是在寻求一种方法来阻止他们关闭标签吗？还是弹出关闭操作触发的窗口？听起来浏览器会出于充分的理由阻止它，如果您找到解决方法，它很可能会在未来的版本中得到修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-18T12:29:33.900

```
var exitmessage = 'Please dont go!'; //custome message
DisplayExit = function() {
    return exitmessage;
};
window.onbeforeunload = DisplayExit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T11:38:53.650

有一个 JavaScript [onunload](http://www.w3schools.com/jsref/jsref_onunload.asp)事件，您可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T11:42:40.787

令人难以置信的是，即使在 2009 年，人们也想创建垃圾网站。

我的 FF 中的 AdBlock Plus 会停止所有弹出窗口。如果我使用其他浏览器，我通常会在它加载内容之前关闭窗口。

# opengl - 在 autoconf 脚本中处理非标准库位置的正常方法是什么？

> ID：944235
> 
> 赞同：2
> 
> 时间：2009-06-03T11:33:27.887
> 
> 标签：opengl, build-automation, glut, autotools, autoconf

我第一次尝试使用 GNU autoconf/automake 工具链，所以我的问题的答案可能很简单。

该程序需要 OpenGL/GLUT，其中头文件和库安装在非标准位置。我发现[这些](http://code.google.com/p/autoconf-gl-macros/)宏应该为我做所有的检查。我只是用*AX_CHECK_GLUT*来调用它。如何让宏找到库？我正在寻找类似的东西

> ./configure --with-glut-dir=/home/hanno/glut

更一般地说：在 autoconf 脚本中处理非标准库位置的正常方法是什么？当然，我可以使用 CPPFLAGS 和 LIBS 变量，但我觉得我错过了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-06T12:37:52.373

Autotools 的设计方式，包作者不需要做任何事情来支持安装在非标准位置的先决条件。的输出`./configure --help`包括以下几行：

```
LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
            nonstandard directory <lib dir>
CPPFLAGS    C/C++/Objective C preprocessor flags, e.g. -I<include dir> if
            you have headers in a nonstandard directory <include dir> 
```

因此，如果安装程序在非标准位置安装了先决条件，他将不得不发出

```
./configure CPPFLAGS=-I/non-standard-dir/include LDFLAGS=-L/non-standard-dir/lib 
```

因为`CPPFLAGS`和`LDFLAGS`被`configure`检查和`Makefile`规则使用，所以一切都应该工作。

一些包作者喜欢提供`--with-`*包*`=location`选项作为上述内容的简写，但这通常不是`--with-`*包*选项的目的。这些选项更好地用于[指定是否应使用可选包，或者应如何满足先决条件](http://www.gnu.org/software/autoconf/manual/html_node/External-Software.html)。

# asp.net - 是否有任何性能原因不使用 UserControls？

> ID：944242
> 
> 赞同：0
> 
> 时间：2009-06-03T11:36:31.203
> 
> 标签：asp.net, performance, user-controls

在页面上使用 10 个用户控件与显示相同数据但没有用户控件的页面是否存在性能差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T15:43:20.057

当然，具有大量对象和类的简洁设计会影响性能

但是，鉴于今天的硬件成本.....我不在乎

我可以用更多的硬件来解决一个好的设计的问题，但是没有硬件可以修复一个糟糕的设计；）

所以使用尽可能多的用户控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T11:43:43.297

用户控件只是另一个对象。它可能会使用更多的内存和更多的时间（因为需要将对象放在内存中才能使用），但我猜它们太小了，不会对性能产生影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T15:45:59.450

使用用户控件是有成本的，但可以忽略不计，而且收益远远超过成本。

# php - 实现 PHP 接口，使对象实例可以作为数组类型参数传递？

> ID：944245
> 
> 赞同：2
> 
> 时间：2009-06-03T11:37:27.723
> 
> 标签：php, interface

在 PHP 中可以指定参数类型，尽管他们称之为类型提示。

我正在实现一个接口，其中一个函数将数组指定为参数类型：

```
function myFunction(array $argument){
} 
```

我想定义一个类，它的一个实例可以用作这个函数的参数。换句话说，它将扩展 ArrayObject 或实现 ArrayAccess 或类似的东西。

是否有适用于此的内置接口或抽象类？（ArrayObject 没有）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T11:50:56.293

这是不可能的。`array()`不是任何类的对象。因此，它不能实现任何接口（参见[此处](http://bugs.php.net/bug.php?id=41942)）。所以你不能互换使用对象和数组。解决方案很大程度上取决于您想要实现的目标。

为什么不将函数签名更改为仅允许`ArrayObject`s、`ArrayIterator`s、`ArrayAccess`s、`IteratorAggregate`s、`Iterator`s 或`Traversable`s（取决于您想在函数内部做什么）？

如果您必须依赖传递对象的交互功能，则应将`Traversable`其用作类型提示。这将确保该对象可以与`foreach()`. 如果您需要对对象进行类似数组的键访问（例如`$test['test']`），您应该将`ArrayAccess`其用作类型提示。但是如果您需要传递的对象是特定的自定义类型，请使用自定义类型作为类型提示。

另一种选择是根本不使用类型提示并确定函数体内传递的参数的类型并相应地处理参数（或抛出一个`InvalidArgumentException`或类似的东西）。

```
if (is_array($arg)) { ... }
else if ($arg instanceof Traversable) { ... }
else if ($arg instanceof ArrayAccess) { ... }
else {
    throw new InvalidArgumentException('...');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T11:49:25.873

没有，但我建议两种选择：

1.  删除*数组*说明符，而是使用 is_array 和 instanceof ArrayObject 在函数内检查
2.  在调用例程或作为上述 1\. 的一部分时使用 (array) $ArrayObject。

*灵魂融合*的例子:-)

```
function myFunction(array $argument){
    echo var_export($argument,true);
}
$a = new ArrayObject();
$a[] = 'hello';
$a[] = 'and goodbye';

myFunction((array)$a); 
```

输出

```
 array (
   0 => 'hello',
   1 => 'and goodbye',
 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T11:52:58.630

不，这是不可能的，因为数组是 PHP 中的原始类型。一个类的实例是一个对象，PHP 内部的比较此时已经停止（不检查接口等）。

您可以从对象中创建一个数组：

```
$array = array();
foreach ($yourObject as $key => $value) {
    $array[$key] = $value;
} 
```

# java - 从 J2ME 获取电池状态

> ID：944247
> 
> 赞同：2
> 
> 时间：2009-06-03T11:37:47.817
> 
> 标签：java, java-me

如何通过 J2ME 获取电池状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T12:03:30.697

嗯，这样做的唯一标准方法是通过 JSR-256。移动传感器 API。[您可以从http://www.jcp.org/en/jsr/detail?id=256](http://www.jcp.org/en/jsr/detail?id=256)
阅读规范

不幸的是，它是最近才出现的，尚未在大多数零售手机中实际实施。

发货时，索尼爱立信 Satio（或 Idou）将拥有它。

编辑：诺基亚 N97 有 JSR-256，它可以安装在诺基亚 N85 和诺基亚 5800 上。

编辑：[这是 Attilah 的另一个 JSR-256 问题，答案中有一些代码。](https://stackoverflow.com/questions/950172/jsr-256-battery-events/951223#951223)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T11:46:08.767

我不确定是否存在仅通过 J2ME 的通用方法。

使用[诺基亚及其属性](http://wiki.forum.nokia.com/index.php/TSJ000306_-_MIDP:_System_properties)，您可以（[在 J2ME 中获取电池电量](http://discussion.forum.nokia.com/forum/showthread.php?t=132313)）：

```
System.getProperty("com.nokia.mid.batterylevel"); 
```

* * *

[如此处所示](http://www.discussweb.com/j2me/2430-there-possible-getting-battery-level-mobile-using-j2me.html)的通用属性并不总是有效（可以返回 null）

> 某些系统属性可能会返回 null，因为早期设备可能不支持它们，并且某些系统属性需要 MIDlet 受信任，否则返回 null...

```
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;
import javax.microedition.location.*;

public class HelloMidp extends MIDlet implements CommandListener {
    private Command exitCommand;

    Display display;
    Form mainForm;

    public HelloMidp () {
        exitCommand = new Command("Exit", Command.EXIT, 1);
        mainForm = new Form ("HelloMidp");
        String batt = System.getProperty("batterylevel");
        mainForm.append (batt);
    }

    protected void startApp()
    {
        mainForm.addCommand(exitCommand);
        mainForm.setCommandListener(this);
        Display.getDisplay(this).setCurrent(mainForm);
    }

    protected void pauseApp() {}
    protected void destroyApp(boolean bool) {}
    public void commandAction(Command cmd, Displayable disp)
    {
        if (cmd == exitCommand) {
            destroyApp(false);
            notifyDestroyed();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T12:31:52.950

我确定这取决于您正在处理的手机和操作系统。没有做过任何 J2ME 开发，我希望会有某种“环境”或“系统”服务来提供这种信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-16T14:18:31.567

本文[介绍](http://developer.sonyericsson.com/community/docs/DOC-2956)了如何在索尼爱立信手机上使用 JSR 256 来读取电池电量、网络覆盖范围和其他一些有趣的传感器数据。从 JP8.3 起支持。

解决问题的代码：

```
SensorInfo[] batteryInfo = SensorManager.findSensors("battery_charge", null);
SensorConnection sensor = (SensorConnection)Connector.open(batteryInfo[0].getUrl());
Data data[] = sensor.getData(1);
String batteryLevel = "Current charge level: "+data[0].getIntValues()[0]; 
```

# c# - 在 PreLoad 中设置的 RadioButtonList 导致 UpdatePanel 触发器在设置回初始值时不会触发

> ID：944253
> 
> 赞同：1
> 
> 时间：2009-06-03T11:39:01.700
> 
> 标签：c#, asp.net, ajax

我们在使用 UpdatePanels 和 RadioButtonLists 时遇到了一些“奇怪”的问题，因为当您更改值时没有发生 PostBack。

我设法找到了这个问题，即当 RadioButtonList 的值在页面的 PreLoad 中设置并且您正在重新选择此初始值时会发生此问题。

我有 ASP 页面的完整代码和下面的 CodeBehind。

ASPX：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="RBLPostBackIssue._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <div>
    <asp:Label ID="Label1" runat="server"></asp:Label>
    <asp:RadioButtonList ID="RadioButtonList1" AutoPostBack="true" OnSelectedIndexChanged="RadioButtonList1_SelectedIndexChanged" RepeatDirection="Horizontal" runat="server">
        <asp:ListItem>Yes</asp:ListItem>
        <asp:ListItem>No</asp:ListItem>
    </asp:RadioButtonList>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:PlaceHolder ID="PlaceHolder1" runat="server">
                <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
            </asp:PlaceHolder>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="RadioButtonList1" EventName="SelectedIndexChanged" />
        </Triggers>
    </asp:UpdatePanel>
    </div>
    </form>
</body>
</html> 
```

代码隐藏：

```
using System;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace RBLPostBackIssue
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_PreLoad(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                switch (new Random().Next(2))
                {
                    case 0:
                        Label1.Text = "Initial value set to Yes";
                        RadioButtonList1.SelectedValue = "Yes";
                        break;
                    case 1:
                        Label1.Text = "Initial value set to No";
                        RadioButtonList1.SelectedValue = "No";
                        break;
                }
            }
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                ShowHideLogic();
            }
        }

        private void ShowHideLogic()
        {
            PlaceHolder1.Visible = RadioButtonList1.SelectedValue.ToLower().Contains("yes");
        }

        protected void RadioButtonList1_SelectedIndexChanged(object sender, EventArgs e)
        {
            ShowHideLogic();
        }
    }
} 
```

出现以下情况。

*   首次加载 RadioButtonList 随机设置为 Yes 或 No。
*   您更改 RadioButtonList 的值，文本框将相应地显示/隐藏。
*   您将值更改回其原始值，并且根本不会发生回发。
*   无论您多久更改一次值，只有在您不选择初始值时才会发生回发。

PreLoad 中初始值的设置来自一些我们不希望更改的遗留代码。那里的任何更改都需要大量测试并重新部署到大量其他项目。

我发现的唯一解决方案是不为 RadioButtonList 使用触发器，而是将其放在 UpdatePanel 中。虽然在某些情况下这是一个解决方案，但它并不理想，因为 UI 并不总是允许这样做。

我想我的问题是，有没有其他人遇到过这个问题，你知道另一种解决方案，还是我只是愚蠢而错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T12:22:07.167

这取决于 ASP.Net 如何呈现单选按钮列表的 HTML。如果您在第一次加载页面时查看页面的源，则`<input>`最初选择的元素将具有一个`checked="checked"`属性。`<input>`最初未选择的元素将具有一个`onclick="javascript:setTimeout('__doPostBack...')"`属性。

因此，仅当您更改所选项目时才会发生回发，这很公平。

但是，当您使用 UpdatePanel 时，整个页面不会在回发时重新呈现，只是更新面板的内容。因此，如果最初选择“是”，则单击“否”将回发并删除文本框。但是单选按钮的 HTML 没有改变，所以现在单击是不会回发，因为没有 javascript 来执行此操作。

您可以通过将单选按钮列表放在与 PlaceHolder 相同的 UpdatePanel 中，或将单选按钮列表放在其自己的 UpdatePanel 中来解决所有这些问题。这将确保呈现单选按钮的 HTML 将在每次回帖后更新，并且事情将按预期工作。

# ruby-on-rails - 带有保留的日历结构

> ID：944255
> 
> 赞同：0
> 
> 时间：2009-06-03T11:39:09.750
> 
> 标签：ruby-on-rails, asp.net-2.0, google-calendar-api

我试图找到一个日历的数据结构，它应该提供与谷歌日历相同的功能（想在我自己的 sql 数据库中构建一个结构）..

它应该提供一次、多次、洞天、从日期到日期的日期、事件等等......但是找到正确的结构有点困难 - 你知道我在哪里可以找到模板或还有什么对我有帮助的吗？

谢谢！

**编辑：**

嗯...我没有找到任何 rails-plugins 或符合我意愿的东西...

我想建立一个社交网站，用户可以在其中创建约会以进行空闲时间活动......因此我需要一个日历结构......

是否有任何 Rails 插件或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T11:52:32.623

许多日历系统使用一个标准来相互交换数据。

[http://en.wikipedia.org/wiki/ICalendar](http://en.wikipedia.org/wiki/ICalendar)

它有点重，可能比你想要的要多。不过它可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T11:48:13.333

好吧，您可以查看[Google Calendar GData API 文档](http://code.google.com/apis/calendar/docs/2.0/developers_guide.html)以获得一些想法。我*强烈*建议你不要*太*有野心。日历真的很难。时区、多位与会者、重复（以及例外情况）、与其他日历系统的互操作等都是痛苦的。

你越能限制自己，你的生活就会越轻松。例如，我建议您尝试使您的重复表示相当简单 - 以天而不是小时/秒等为最小粒度，并且可能禁止诸如“每周一、周三和周五”之类的概念。

您能否提供更多背景信息来说明您为什么要创建自己的日历系统而不是使用现有的系统？如果可能的话，尽量避免这样做:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-05T18:14:55.370

查看一个名为 RiCal 的新 gem ( [http://rubyforge.org/projects/rical/](http://rubyforge.org/projects/rical/) )。我还没有用它构建任何东西，但它看起来很有希望作为一种在 Ruby 中操作事件信息的方式。

# css - 是否建议使用 CSS 框架？

> ID：944257
> 
> 赞同：6
> 
> 时间：2009-06-03T11:40:02.913
> 
> 标签：css, frameworks

我是一个普通的网络开发人员。只是想看看是否建议使用 CSS 框架，例如**[960 框架](http://960.gs/)**。如果有人有，使用它的优缺点是什么。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-03T11:43:50.317

这取决于您将使用它。如果你使用它，它可能会加快你的 css 开发，但你会失去一点灵活性。

实际上，所有这些“框架”都是一样的，而不仅仅是 CSS ......

如果您决定使用 css 框架，我建议您阅读[这篇文章](http://nettuts.com/tutorials/html-css-techniques/which-css-grid-framework-should-you-use-for-web-design/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T11:55:28.453

有两个广泛采用的选项：[960](http://960.gs)和[blueprint](http://www.blueprintcss.org/)。两者都依赖于基于[网格的布局](http://csswizardry.com/typogridphy/)系统。两者都包括[CSS 重置](http://meyerweb.com/eric/tools/css/reset/)。

这里的优势显然是您可以在多个浏览器中获得更一致的布局，例如，如果您在 Firefox 上进行测试，您更有可能在 IE 上看起来相同。因为这些框架是基于网格的，所以您的布局也更加清晰和对齐。两者都有水平对齐，但仅蓝图支持垂直对齐或垂直节奏。

缺点是它可能对您的布局来说太过分了。如果您想要一个简单的三列布局，那么您可以选择一个 CSS 重置加上一个三列布局模板。

就我个人而言，我发现使用这些框架给了我很多创造性的表达，并且由于跨浏览器的 CSS 黑客，在采用这些框架后，我在布局上做的比以往任何时候都多。我使用 Blueprint 是因为我觉得它非常直观，但 960 Grid System 也得到了很好的评价。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T11:56:12.460

是的，作为一个起点，只要你准备好去掉与你无关的东西，并且乐于对其进行更改。这是开始布局/设计的好方法，但是如果您随后编写一个样式表来覆盖框架的 CSS 中的规则，那将毫无用处。准备好调整它以适应您的工作。

顺便说一句，我很喜欢[bluetrip](http://bluetrip.org/)，其中：

> 结合了 Blueprint、Tripoli（因此得名）、Hartija 的打印样式表、960.gs 的简单性和 Element 的图标的精华

# c# - 在“DropDownList”模式下使用 .Net ComboBox 属性 SelectionStart 和 SelectionLength 导致的奇怪行为

> ID：944263
> 
> 赞同：0
> 
> 时间：2009-06-03T11:43:09.087
> 
> 标签：c#, winapi, exception, combobox, hook

我们有一个示例应用程序，其中包含“DropDownList”模式下的组合框的此类处理程序：

```
 private void comboBox1_Leave(object sender, EventArgs e)
    {
        comboBox1.SelectionStart = 0;
        comboBox1.SelectionLength = 0;
    } 
```

上面的代码行为不同，具体取决于应用程序是否加载了 CALLWNDPROC 挂钩。如果应用程序中有一个 CALLWNDPROC 钩子——只要组合框失去焦点，上面的代码就会抛出异常。没有钩子 - 该代码不会抛出。

这些是异常描述中的几行：

```
System.ArgumentOutOfRangeException: InvalidArgument=Value of '-2136611475' is not valid for 'start'.
Parameter name: start
   at System.Windows.Forms.ComboBox.Select(Int32 start, Int32 length)
   at System.Windows.Forms.ComboBox.set_SelectionLength(Int32 value)
   at ComboCrash.Form1.comboBox1_Leave(Object sender, EventArgs e) in T:\tmp.proj\ComboCrash\ComboCrash\Form1.cs:line 32
   at System.Windows.Forms.Control.OnLeave(EventArgs e)
   at System.Windows.Forms.Control.NotifyLeave()
   at System.Windows.Forms.ContainerControl.UpdateFocusedControl() 
```

问题是：安装钩子后出现这种不同行为的原因可能是什么？

PS1：我不是 C# 开发人员，但在我看来，文本选择的概念不适用于 DropDownList 组合框（因为它们没有文本框），对吗？

PS2：安装钩子的应用程序和钩子DLL是用C++编写的。钩子函数很简单：

```
return (CallNextHookEx(hook_handle, code, wParam, lParam)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-10T10:10:45.440

好的，因为没有建议，我会提供一些：

1.  如果您的组合框是 DropDownList，则使用 SelectionStart 和 SelectionLength 属性是不正确的。在这些情况下，CB_GETEDITSEL 被发送到组合框的窗口——它不会返回任何可靠的东西（因为没有要查询的编辑控件）。所以 -**只是不要这样做**（或用 try-catch 附上相应的代码）！或者 - 始终检查组合框的类型。
2.  违反先前的建议可能会导致 (a) 没有异常；(b) 未处理的异常或程序异常终止（取决于 JIT 设置）。如果您的环境中安装了系统范围的 WH_CALLWNDPROC 挂钩，情况 (b) 非常稳定。

**2011 年 2 月更新** 正如我在此处的评论中提到的，唯一的解决方法（读取 - 肮脏的 hack）是安装您自己的相同类型的钩子（WH_CALLWNDPROC），但如果消息适用于您的组合框，则不要调用其他钩子。是的，它很丑。

# java - 检索数据时保证缓存命中

> ID：944265
> 
> 赞同：0
> 
> 时间：2009-06-03T11:43:30.053
> 
> 标签：java, sql, caching, jdbc

## 问题设置

1.  实体到达进行处理并通过一系列步骤对这些实体以及可能对其他相关实体进行操作并产生一些结果；
2.  一些实体需要实时处理，无需任何数据库访问；
3.  目前，实现只是在数据库中查找实体，没有任何缓存。

优化时间:-)

## 可能的方法

### 简单缓存

一个简单的内存缓存有两个缺陷：

1.  它可能会溢出，因为我们正在谈论大量实体；
2.  它不保证在缓存中找到所需的实体，并且无法查询可用性或被要求“预加载”自身。

所以这是不行的。

### 实体分析+预加载

我正在考虑构建某种分析器来找出需要为给定实体检索哪些数据，即使是大型形式，并请求缓存以带外加载所需的数据。

步骤是：

1.  实体来了。如果需要在内存中处理，发送缓存加载请求；
2.  实体被放置在缓存等待队列中，直到收到缓存加载响应。如果数据可用，这可能是即时的；
3.  发送实体进行处理并使用加载的数据；
4.  缓存被清除。这确实有可能清除政策，但我目前并不担心这些。

## 问题

您对这种方法有何看法？我是否错过了一些可以在这种情况下应用的众所周知的数据访问模式？

* * *

**更新 1**：忘了提到整个处理是单线程的，这确实极大地限制了选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T13:02:29.893

你说：

> 一个简单的内存缓存有两个缺陷：
> 
> 1.  它可能会溢出，因为我们正在谈论大量实体
> 2.  它不保证在缓存中找到所需的实体，并且无法查询可用性或被要求“预加载”自身。

也许我完全误解了您的问题和需求，但这在许多层面上听起来都不正确：

1.  许多缓存解决方案允许您定义可以存储在缓存中的元素的最大数量。一旦达到最大大小，可以根据先进先出策略或基于最近最少使用来删除项目。
2.  缓存不应该“保证在缓存中找到所需的实体”；这不是缓存的目的。
3.  大多数缓存解决方案的 API 确实允许您检查缓存中是否存在密钥（事实上，如果您使用 a 构建自己的解决方案，`Map`您仍然可以这样做......）。
4.  Ehcache 具有[自填充缓存](http://ehcache.sourceforge.net/EhcacheUserGuide.html#id.s4.11.2)，可用于允许您在需要开始检索项目之前预先填充缓存（[此处的另一个链接](http://ehcache.sourceforge.net/EhcacheUserGuide.html#id.s26.5.2)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T12:07:43.857

基本上，您正在尝试缓存数据库查询。当您开始使用缓存时，数据库状态可能已经改变。这是导致数据不一致的秘诀。

作为替代方案，检查您是否可以优化数据库。数据库很可能在 10 毫秒内回答查询。您甚至可以拥有索引视图等，并定期访问它，以便将其缓存在内存中。

作为另一种选择，请考虑以下情况：预取数据不会减少总工作量。实体必须等待预取，无论它是否排队。既然工作无论如何都要做，不如在队列工作进程中做呢？考虑增加工作进程的数量，以便您可以同时处理更多队列。

编辑：正如您的评论所说，您绑定到一个工作线程：

*   也许将处理分为两步？第一个进程检索数据库数据，并将丰富的实体存储在新队列中。第二个进程从新队列中读取数据，并执行涉及其他内存数据源的工作
*   使用全局互斥锁保护其他内存中的实体。这意味着许多工作线程可以与数据库对话，而只有一个可以访问其他内存中的实体。

# javascript - 如何在 .js 文件中声明全局变量

> ID：944273
> 
> 赞同：89
> 
> 时间：2009-06-03T11:45:01.810
> 
> 标签：javascript, global-variables

我需要一些在所有`.js`文件中都需要的全局变量。

例如，考虑以下 4 个文件：

1.  `global.js`
2.  `js1.js`
3.  `js2.js`
4.  `js3.js`

考虑到我将上述所有 4 个文件加载到 HTML 文档中，有没有办法可以在其中声明 3 个全局变量`global.js`并在其他 3 个文件中访问它们？`.js`

有人可以告诉我这是否可能，或者是否有解决方法来实现这一目标？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2009-06-03T11:48:50.790

只需在函数范围之外的 global.js 中定义变量：

```
// global.js
var global1 = "I'm a global!";
var global2 = "So am I!";

// other js-file
function testGlobal () {
    alert(global1);
} 
```

为了确保这有效，您必须在尝试访问该文件中定义的任何变量之前包含/链接到 global.js：

```
<html>
    <head>
        <!-- Include global.js first -->
        <script src="/YOUR_PATH/global.js" type="text/javascript"></script>
        <!-- Now we can reference variables, objects, functions etc. 
             defined in global.js -->
        <script src="/YOUR_PATH/otherJsFile.js" type="text/javascript"></script>
    </head>
    [...]
</html> 
```

当然，如果您不希望 js 文件的加载中断初始页面加载，您可以在关闭 <body>-tag 之前链接脚本标签。

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2009-06-03T12:09:01.437

推荐的方法是：

```
window.greeting = "Hello World!" 
```

然后，您可以在任何函数中访问它：

```
function foo() {

   alert(greeting); // Hello World!
   alert(window["greeting"]); // Hello World!
   alert(window.greeting); // Hello World! (recommended)

} 
```

这种方法是首选的原因有两个。

1.  意图是明确的。关键字的使用`var`很容易导致将`vars`原本打算是本地的全局声明，反之亦然。这种变量作用域是许多 Javascript 开发人员的困惑点。因此，作为一般规则，我确保所有变量声明都以关键字`var`或前缀开头`window`。

2.  您也可以标准化此语法以通过这种方式读取变量，这意味着本地范围`var`不会破坏全局`var`，反之亦然。例如，这里发生的事情是模棱两可的：

```
 greeting = "Aloha";

 function foo() {
     greeting = "Hello"; // overrides global!
 }

 function bar(greeting) {
   alert(greeting);
 }

 foo();
 bar("Howdy"); // does it alert "Hello" or "Howdy" ? 
```

但是，这更简洁，更不容易出错（您实际上不需要记住所有变量范围规则）：

```
 function foo() {
     window.greeting = "Hello";
 }

 function bar(greeting) {
   alert(greeting);
 }

 foo();
 bar("Howdy"); // alerts "Howdy" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-06-03T11:48:38.043

你试过了吗？

如果你这样做：

```
var HI = 'Hello World'; 
```

在`global.js`. 然后做：

```
alert(HI); 
```

在`js1.js`它会提醒它罚款。您只需`global.js`在 HTML 文档中的其余部分之前包含。

唯一的问题是您必须在窗口的范围内（而不是在任何函数内）声明它。

您可以直接取消`var`零件并以这种方式创建它们，但这不是一个好习惯。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-06T11:37:49.263

如上所述，在脚本文件中使用最顶层范围存在问题。这是另一个问题：脚本文件可能从某个运行时环境中不是全局上下文的上下文中运行。

有人建议直接将全局分配给`window`。但这也是**运行时相关的**，并且在 Node 等中不起作用。这表明可移植的全局变量管理需要一些仔细的考虑和额外的努力。也许他们会在未来的 ECMS 版本中修复它！

现在，我会推荐这样的东西来支持对所有运行时环境进行适当的全局管理：

```
/**
 * Exports the given object into the global context.
 */
var exportGlobal = function(name, object) {
    if (typeof(global) !== "undefined")  {
        // Node.js
        global[name] = object;
    }
    else if (typeof(window) !== "undefined") {
        // JS with GUI (usually browser)
        window[name] = object;
    }
    else {
        throw new Error("Unkown run-time environment. Currently only browsers and Node.js are supported.");
    }
};

// export exportGlobal itself
exportGlobal("exportGlobal", exportGlobal);

// create a new global namespace
exportGlobal("someothernamespace", {}); 
```

它需要更多的输入，但它使您的全局变量管理面向未来。

[免责声明：我在查看以前版本的stacktrace.js](https://github.com/stacktracejs/stacktrace.js/blob/master/stacktrace.js)时想到了这个想法的一部分。

我认为，还可以使用 Webpack 或其他工具来获得对运行时环境的更可靠且更少恶意的检测。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-03T11:49:10.947

是的，您可以访问它们。您应该在“公共空间”（任何功能之外）将它们声明为：

```
var globalvar1 = 'value'; 
```

您可以稍后访问它们，也可以在其他文件中访问它们。

# delphi - 如何修复 Delphi 2009 数据资源管理器？

> ID：944279
> 
> 赞同：1
> 
> 时间：2009-06-03T11:46:05.257
> 
> 标签：delphi, installation, delphi-2009

可能我通过多次安装/卸载弄乱了几个delphi版本的安装（我想我没有按照发布顺序）。我想试用 Developer Studio 2009，但在安装后（尽管其他一切似乎都可以正常工作），当我单击“数据资源管理器”选项卡时，列表上没有显示任何内容。此问题可能是由注册表中的多个 dbexpress 配置引起的，但我无法修复它。我认为卸载程序属于非卸载程序。无论如何，注册表很烂。

注意：显然，OPSYS 重新安装不是一个可接受的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-04T02:56:53.560

这就是为什么我现在在虚拟机中开发的一个例子。如果事情被破坏，我总是可以恢复到早期的快照。

# java - 如何在 JAVA 的动作类中创建 JSON 对象

> ID：944285
> 
> 赞同：0
> 
> 时间：2009-06-03T11:48:10.293
> 
> 标签：java, json, xstream

我想创建一个 JSON 对象。我试过以下

```
myString=new JSONObject().put("JSON", sampleClass).toString(); 
```

但 mystring 给了我 {"SampleClass@170f98"}。

我还尝试了以下

```
 XStream xsStream=new XStream(new JsonHierarchicalStreamDriver());
 SampleClass sampleClass=new SampleClass(userset.getId(),userset.getUsername());
 myString=xsStream.toXML(sampleClass); 
```

它可以工作，但是当我在 javascript 中使用 getJSON 来获取 myString 时它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T12:02:25.410

尝试

```
String myString = new JSONObject().put("JSON", new JSONObject(sampleClass)).toString(); 
```

在我的例子中，它看起来像这样：

```
import org.json.JSONObject;
import org.junit.Test;

public class JsonTest
{
    public static class SampleClass
    {
        private String id;

        private String userName;

        public SampleClass ( String id, String name )
        {
            this.id = id;
            this.userName = name;
        }

        public String getUserName ()
        {
            return userName;
        }

        public void setUserName ( String userName )
        {
            this.userName = userName;
        }

        public String getId ()
        {
            return id;
        }

        public void setId ( String id )
        {
            this.id = id;
        }
    }

    @Test
    public void testSampleClass () throws Exception
    {
        SampleClass sampleClass = new SampleClass ( "myId", "MyName" );
        System.out.println ( new JSONObject ( sampleClass ).toString () );
    }
} 
```

结果如下所示：

```
{"userName":"MyName","id":"myId"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T12:00:17.490

你应该试试：

```
XStream xsStream=new XStream(new JettisonMappedXmlDriver()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T12:17:37.283

查看 GSON，一个由 Google 将对象转换为 JSON 的 Java 库。[GSON 图书馆][1]

从谷歌代码网站：

> [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

*   提供简单的 toJson() 和 fromJson() 方法将 Java 对象转换为 JSON，反之亦然
*   允许将预先存在的不可修改对象与 JSON 相互转换

# delphi - 快速排序和堆栈溢出异常

> ID：944289
> 
> 赞同：2
> 
> 时间：2009-06-03T11:49:04.830
> 
> 标签：delphi, stack-overflow, quicksort

我认为 QuickSort 在某些特定情况下可能会导致堆栈溢出异常。

在排序过程中有两种选择枢轴元素的基本方法 - 枢轴值可以是排序范围中间的元素或随机选择的元素（在排序范围内）。第二种方法（随机）是否比第一种方法更不容易发生堆栈溢出？你能告诉我吗？

这是我的快速排序（Delphi）版本：

```
procedure QuickSort(lLowBound, lHighBound: integer; lCompare: TListSortCompare;
  lSwap: TListSortSwap);

  procedure Sort(lLowIndex, lHighIndex: integer);
  var
    lLeft: Integer;
    lRight: Integer;
    lPivot: Integer;
    lLeftCompare: Integer;
    lRightCompare: Integer;
  begin
    repeat
      lLeft := lLowIndex;
      lRight := lHighIndex;
      lPivot := (lLowIndex + lHighIndex) div 2; //the pivot as the element in the middle
      //lPivot := lLowIndex + Random(lHighIndex - lLowIndex + 1); //the pivot chosen randomly
      repeat
        lLeftCompare := lCompare(lLeft, lPivot);
        while lLeftCompare < 0 do
        begin
          Inc(lLeft);
          lLeftCompare := lCompare(lLeft, lPivot);
        end;
        lRightCompare := lCompare(lRight, lPivot);
        while lRightCompare > 0 do
        begin
          Dec(lRight);
          lRightCompare := lCompare(lRight, lPivot);
        end;

        if lLeft <= lRight then
        begin
          if not ((lLeftCompare = 0) and (lRightCompare = 0)) then
          begin
            lSwap(lRight, lLeft);

            if lPivot = lLeft then
              lPivot := lRight
            else if lPivot = lRight then
              lPivot := lLeft;
          end;
          Inc(lLeft);
          Dec(lRight);
        end;
      until lLeft > lRight;

      if (lLowIndex < lRight) then
        Sort(lLowIndex, lRight);

      lLowIndex := lLeft;
    until lLeft >= lHighIndex;
  end;

begin
  if lHighBound > lLowBound then
    Sort(lLowBound, lHighBound);
end; 
```

提前感谢您的建议！

马吕斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T12:11:09.950

使用特定索引处的任何元素（第一个、最后一个或中间）作为枢轴元素总是会导致特定数据集退化的风险。第一个和最后一个元素特别糟糕，因为它们会随着预排序（或几乎预排序）的数据而退化，这很常见。中间元素在实践中问题较少，但仍然容易受到恶意构建的数据集的攻击。

使用随机元素意味着退化只能通过纯粹的运气来发生（假设 RNG 无法被假设的攻击者预测），所以这是一个很好的策略。进一步的改进可以显着降低被坏运气击中的可能性，即使用 3 个（或 5 个或更多）随机选择的元素的中位数，但必须权衡由此产生的额外复杂性和运行时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T12:10:33.693

提高效率的一种概率方法是选择 3 个随机元素并使用中间值（不是最大也不是最小的那个）。

您还可以使用记录堆栈来推送和弹出边界并编写循环而不是进行递归调用（而且它会使用更少的内存，因为不需要为所有调用复制指向数组的指针）。

编辑：我注意到内部过程不将指针作为参数，所以忘记那部分^_^无论如何，堆栈帧比函数的参数有更多的信息，所以它会更节省内存（重点是分配数据堆栈的堆通常大于进程堆栈）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T19:48:32.533

感谢您的回答。

Fortran，感谢您关于制作非递归方法的建议。基于它们，我设法进行了迭代快速排序，它似乎工作正常:)。

这是代码：

```
procedure QuickSortI(lLowBound, lHighBound: integer; lCompare: TListSortCompare;
  lSwap: TListSortSwap);
var
  lLeft: Integer;
  lRight: Integer;
  lPivot: Integer;
  lLeftCompare: Integer;
  lRightCompare: Integer;
  lStack: array of integer;
  lStackLen: integer;
begin
  if lHighBound > lLowBound then
  begin
    lStackLen := 2;
    SetLength(lStack, lStackLen);
    lStack[lStackLen - 1] := lLowBound;
    lStack[lStackLen - 2] := lHighBound;

    repeat
      lLowBound := lStack[lStackLen - 1];
      lHighBound := lStack[lStackLen - 2];
      SetLength(lStack, lStackLen - 2);
      Dec(lStackLen, 2);

      lLeft := lLowBound;
      lRight := lHighBound;
      lPivot := (lLowBound + lHighBound) div 2;
      repeat
        lLeftCompare := lCompare(lLeft, lPivot);
        while lLeftCompare < 0 do
        begin
          Inc(lLeft);
          lLeftCompare := lCompare(lLeft, lPivot);
        end;
        lRightCompare := lCompare(lRight, lPivot);
        while lRightCompare > 0 do
        begin
          Dec(lRight);
          lRightCompare := lCompare(lRight, lPivot);
        end;

        if lLeft <= lRight then
        begin
          if not ((lLeftCompare = 0) and (lRightCompare = 0)) then
          begin
            lSwap(lRight, lLeft);

            if lPivot = lLeft then
              lPivot := lRight
            else if lPivot = lRight then
              lPivot := lLeft;
          end;
          Inc(lLeft);
          Dec(lRight);
        end;
      until lLeft > lRight;

      if (lHighBound > lLeft) then
      begin
        Inc(lStackLen, 2);
        SetLength(lStack, lStackLen);
        lStack[lStackLen - 1] := lLeft;
        lStack[lStackLen - 2] := lHighBound;
      end;

      if (lLowBound < lRight) then
      begin
        Inc(lStackLen, 2);
        SetLength(lStack, lStackLen);
        lStack[lStackLen - 1] := lLowBound;
        lStack[lStackLen - 2] := lRight;
      end;

    until lStackLen = 0;
  end;
end; 
```

我希望我以最佳方式实现它。我使用一个动态数组来存储排序边界（每对项目都是下限和上限）。

这种迭代方法似乎比递归方法稍慢，但我认为没那么重要。

如果您发现错误或您知道优化该方法的方法，如果您告诉我，我将不胜感激。

谢谢！

马吕斯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-20T23:45:02.120

一个不错的快速排序实现使用 O(log n) 堆栈空间。它通过首先对最小的子数组进行排序来实现这一点。如果您不这样做，最坏的情况是枢轴是最大元素并且您尝试对每次仅小一个的子数组进行排序。当您使用已排序的数据作为输入并将正确的元素作为枢轴时，就会发生这种情况。

您的显式堆栈实现较慢并且遇到同样的问题（尽管它现在是堆而不是堆栈）。

缺少的另一件事是当子数组很小（5-25 个元素）时切换到插入排序。还可以查看此站点上的双轴快速排序问题。

# java - java中的线程

> ID：944291
> 
> 赞同：1
> 
> 时间：2009-06-03T11:49:15.453
> 
> 标签：java, multithreading

```
int iThreadCount = 1;
iThreadCount = GHMTreadUtil.getHygThreadCount();
arrHygThread = new Thread[iThreadCount];

for(int iCount=0;iCount<iThreadCount;iCount++)
{
    LogMgr.logDebugInfo("spawning the HYG Thread"+iCount,objDebug);

    Job1 objJob1=new Job1 ();
    Job2 objJob2 =new Job2 ();
    Thread objHygThread = new Thread(objJob1,objJob2);
    arrHygThread[iCount]=objHygThread;
    objHygThread.start();
} 
```

如果我想为下面指定的 2 个作业创建线程 **`Thread objHygThread = new Thread(objJob1,objJob2);`**

需要我以前进口什么吗？如果有人知道这个问题的答案，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T11:52:22.233

A`Thread`通常将 a`java.lang.Runnable`作为参数，并且一次只能使用一个`Runnable`。所以你需要启动两个线程：

```
Thread objHygThread1 = new Thread(objJob1);
Thread objHygThread2 = new Thread(objJob2); 
```

如果`Job`类实现了`Runnable`接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T11:53:19.283

一个线程只需要*一个*可运行的。如果您有两个可运行对象，您将需要两个线程，或者您自己在 Thread 对象中的另一个可运行对象中管理这两个可运行对象。

请参阅[线程（可运行 r）](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Thread.html#Thread(java.lang.Runnable))

我还将向您推荐[我](https://stackoverflow.com/questions/939022/java-threads/939061#939061)对您之前的问题和 ThreadPoolExecutor 的回答。ThreadPoolExecutor 不保证提交给它的作业的顺序。如果您需要，那么您可能应该自己管理这些运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-03T12:07:08.087

一定要看看新的 java.util.concurrent 类，它们使并发编程更容易，更不容易出错。[这是夏威夷大学讲座中](http://navet.ics.hawaii.edu/~casanova/courses/ics432_fall08/slides/ics432_j.u.c.pdf)的一个相关示例：

```
public class Task implements Runnable {
    private String message;
    private int iterations;
    public Task(String s, int n) {
        message = s; iterations = n;
    }
    public void run() {
        for (int i=0; i < iterations; i++) {
            System.out.println(message);
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) { }
        }
    }
}

java.util.concurrent.*;
. . .
ExecutorService pool;
pool = Executors.newFixedThreadPool(3);
pool.execute(new Task(“three”,3));
pool.execute(new Task(“two”,2));
pool.execute(new Task(“five”,5));
pool.execute(new Task(“six”,6);
pool.execute(new Task(“one”,1);
pool.shutdown(); 
```

这将创建一个包含三个线程的池，然后为池提供五个要执行的任务。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-03T12:00:09.333

```
final Job1 objJob1 = new Job1 ();
final Job2 objJob2 = new Job2 ();
Thread objHygThread = new Thread(new Runnable(){
    public void run() { objJob1.run(); objJob2.run(); }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-03T12:38:46.133

我强烈建议您看一下[Java Executor Interfaces](http://java.sun.com/docs/books/tutorial/essential/concurrency/executors.html)。

将线程管理和创建与应用程序的其余部分分开是有意义的。封装这些函数的对象称为执行器。以下小节详细描述了执行者。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-03T12:33:11.607

与手头的问题无关，但我希望你意识到这里第一行的赋值是一个死存储，完全没有必要：

```
int iThreadCount = 1;
iThreadCount = GHMTreadUtil.getHygThreadCount(); 
```

可以（并且应该）只是：

```
int iThreadCount = GHMTreadUtil.getHygThreadCount(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-06-03T11:55:22.040

看起来您首先需要创建一个类，`extends java.lang.Thread`以便您可以拥有一个带有 2 个参数的构造函数。

您可能还需要`public void run()`在您的 Thread 子类中进行覆盖，以便它知道如何处理 2 个作业对象。

# c# - 预测中的蒙特卡洛模拟？

> ID：944293
> 
> 赞同：1
> 
> 时间：2009-06-03T11:49:26.810
> 
> 标签：c#, .net, finance, data-mining

我是物理学家。我也有一些关于蒙特卡洛模拟的信息。我想和蒙特卡洛一起学习财务预测。你有什么主意吗？您如何看待财务决策编程？使用蒙特卡洛模拟的财务软件的未来如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T19:36:48.207

请务必在该主题上搜索 Nassim Nicholas Taleb。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T11:57:13.050

[从金融维基百科文章中的蒙特卡洛方法](http://en.wikipedia.org/wiki/Monte_Carlo_methods_in_finance)开始，不要忽视[反对使用这种方法](http://registeredrep.com/mag/finance_why_advisors_say/)进行财务规划的警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-29T20:08:47.273

这本书很经典：[http ://www.amazon.com/Monte-Carlo-Methods-Finance-Jaeckel/dp/047149741X](https://rads.stackoverflow.com/amzn/click/com/047149741X)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-14T14:23:37.693

如果您是对量化金融感兴趣的物理学家，请查看 Emanuel Derman 的“我的量化生活” [http://www.emanuelderman.com/media/MyLifeAsAQuant.pdf](http://www.emanuelderman.com/media/MyLifeAsAQuant.pdf)

# c# - C#/.Net 中“新”属性的优缺点？

> ID：944296
> 
> 赞同：9
> 
> 时间：2009-06-03T11:49:34.487
> 
> 标签：c#, .net, properties, new-operator

考虑以下示例代码：

```
// delivery strategies
public abstract class DeliveryStrategy { ... }
public class ParcelDelivery : DeliveryStrategy { ... }
public class ShippingContainer : DeliveryStrategy { ... } 
```

和以下示例订单类：

```
// order (base) class
public abstract class Order
{
    private DeliveryStrategy delivery;

    protected Order(DeliveryStrategy delivery)
    {
        this.delivery = delivery;
    }

    public DeliveryStrategy Delivery
    {
        get { return delivery; }
        protected set { delivery = value; }
    }
} 
```

当我派生一种新类型的订单类时，它将继承 DeliveryStrategy 类型的 Delivery 属性。

现在，当必须使用 ParcelDelivery 策略交付 CustomerOrders 时，我们可以考虑在 CustomerOrder 类中的 Delivery 属性中使用“ **new ”：**

```
public class CustomerOrder : Order
{
    public CustomerOrder()
        : base(new ParcelDelivery())
    { }

    // 'new' Delivery property
    public new ParcelDelivery Delivery
    {
        get { return base.Delivery as ParcelDelivery; }
        set { base.Delivery = value; }
    }
} 
```

（CustomerOrder 显然需要确保与 Order 兼容（多态））

这允许在 CustomerOrder 上直接使用 ParcelDelivery 策略，而无需强制转换。

你会考虑使用这种模式吗？为什么/为什么不？

**更新**：我想出了这种模式，而不是使用泛型，因为我想将它用于多个属性。我不想对所有这些属性使用泛型类型参数

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-03T11:56:14.737

我更喜欢使类型通用：

```
public abstract class Order<TDelivery> where TDelivery : Delivery
{
    public TDelivery Delivery { ... }
    ...
}

public class CustomerOrder : Order<ParcelDelivery>
{
    ...
} 
```

这确保了编译时的类型安全，而不是将其留给执行时。它还可以防止以下情况：

```
CustomerOrder customerOrder = new CustomerOrder();
Order order = customerOrder;
order.Delivery = new NonParcelDelivery(); // Succeeds!

ParcelDelivery delivery = customerOrder.Delivery; // Returns null 
```

哎哟。

我认为`new`通常是最后的手段。它在实施和使用方面都增加了复杂性。

如果您不想走一般路线，我会介绍一个真正的新属性（使用不同的名称）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-03T12:33:49.310

我认为这是一个很好的模式。通过消除转换结果的需要，它可以更容易地显式使用派生类型，并且它不会“破坏”基类行为。实际上，在 BCL 中的某些类中使用了类似的模式，例如查看 DbConnection 类层次结构：

*   DbConnection.CreateCommand() 返回一个 DbCommand
*   SqlConnection.CreateCommand() 使用“new”隐藏基本实现以返回 SqlCommand。
*   （其他 DbConnection 实现也是如此）

因此，如果您通过 DbConnection 变量操作连接对象， CreateCommand 将返回 DbCommand ；如果您通过 SqlConnection 变量操作它，CreateCommand 将返回一个 SqlCommand，如果您将其分配给 SqlCommand 变量，则避免强制转换。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-03T11:53:36.083

您可以使用泛型。

```
// order (base) class
public abstract class Order<TDeliveryStrategy> where TDeliveryStrategy : DeliveryStrategy
{
    private TDeliveryStrategy delivery;

    protected Order(TDeliveryStrategy delivery)
    {
        this.delivery = delivery;
    }

    public TDeliveryStrategy Delivery
    {
        get { return delivery; }
        protected set { delivery = value; }
    }
}

public class CustomerOrder : Order<ParcelDelivery>
{
    public CustomerOrder()
        : base(new ParcelDelivery())
    { }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-03T13:21:03.490

在我看来，使用“new”关键字从基类中隐藏可写属性是一个坏主意。new 关键字允许您在派生类中隐藏基类的成员，而不是覆盖它。这意味着使用基类引用对此类成员的调用仍然访问基类代码，而不是派生类代码。C# 有 'virtual' 关键字，它允许派生类实际[覆盖](http://en.wikipedia.org/wiki/Overriding)实现，而不是简单地隐藏它。[这里](http://www.akadia.com/services/dotnet_polymorphism.html)有一篇相当不错的文章讨论了这些差异。

在您的情况下，您似乎正在尝试使用方法隐藏作为将[属性协方差](http://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science))引入C# 的一种方式。但是，这种方法存在问题。

通常，拥有基类的价值在于允许您的代码的用户以多态方式处理类型。如果有人使用对基类的引用设置 Delivery 属性，您的实现会发生什么情况？如果 Delivery 属性不是 ParcelDelivery 的实例，派生类会中断吗？这些是你需要问自己关于这种实施选择的问题。

现在，如果基类中的 Delivery 属性没有提供 setter，那么您的情况会略有不同。基类的用户只能检索属性而不能设置它。由于您将属性访问路由回基类，因此通过基类进行的访问将继续有效。但是，如果您的派生类不是密封的，则从它继承的类可能会通过使用它们自己的版本隐藏 Delivery 属性来引入相同类型的问题。

正如其他一些帖子已经提到的那样，您可以使用泛型作为实现不同 Delivery 属性类型的一种方式。Jon 的例子很好地证明了这一点。如果您需要从 CustomerOrder 派生并将 Delivery 属性更改为新类型，则泛型方法存在一个问题。

有一个泛型的替代方案。您需要考虑您是否真的想要一个可设置的属性。如果去掉 Delivery 属性上的设置器，直接使用 Order 类引入的问题就消失了。由于您使用构造函数参数设置交付属性，因此可以保证所有订单都具有正确的策略类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-03T12:11:05.113

是否有任何理由需要更改返回类型？如果没有，那么我建议只将 Delivery 属性设为虚拟，因此它必须由继承的类来定义：

```
public abstract class Order
{
    protected Order(DeliveryStrategy delivery)
    {
        Delivery = delivery;
    }

    public virtual DeliveryStrategy Delivery { get; protected set; }
}

public class CustomerOrder : Order
{
    public CustomerOrder()
        : base(new ParcelDelivery())
    { }

    public DeliveryStrategy Delivery { get; protected set; } 
} 
```

如果您确实需要更改返回类型，那么我想知道为什么您需要对返回类型进行如此剧烈的行为更改。无论如何，如果是这样，那么这对您不起作用。

因此，要直接回答您的问题，如果需要返回类型与基类不同，我只会使用您描述的模式，并且非常谨慎（我会分析我的对象模型以查看是否还有其他东西我可以先做）。如果不是这种情况，那么我会使用上面描述的模式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-03T16:07:27.410

考虑这种方法：

```
public interface IOrder
{
    public DeliveryStrategy Delivery
    {
        get;
    }
}

// order (base) class
public abstract class Order : IOrder
{
    protected readonly DeliveryStrategy delivery;

    protected Order(DeliveryStrategy delivery)
    {
        this.delivery = delivery;
    }

    public DeliveryStrategy Delivery
    {
        get { return delivery; }
    }
} 
```

然后使用

```
public class CustomerOrder : Order
{
    public CustomerOrder()
        : base(new ParcelDelivery())
    { }

    public ParcelDelivery Delivery
    {
        get { return (ParcelDelivery)base.Delivery; }
    }

    DeliveryStrategy IOrder.Delivery
    {
        get { return base.Delivery}
    }
} 
```

这仍然远非完美（您的示例没有*说明为什么*基类根本需要了解交付策略，并且具有约束的通用性会更有意义，但这至少允许您使用相同的名称为财产并获得类型安全。

在您的示例中是没有意义的，如果某些东西*不是*正确的类型，您不应该用 null 掩盖它，因为您的不变量已被违反，您应该抛出。

在可能的情况下，只读字段总是更可取。它们清楚地表明了不变性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-10-22T14:32:50.757

您的解决方案没有按照您的想法执行。它似乎有效，但没有调用您的“新”方法。考虑对代码进行以下更改以添加一些输出以查看调用了哪个方法：

```
// order (base) class
public abstract class Order
{
    private DeliveryStrategy delivery;

    protected Order(DeliveryStrategy delivery)
    {
        this.delivery = delivery;
    }

    public DeliveryStrategy Delivery
    {
        get 
        {
            Console.WriteLine("Order");
            return delivery; 
        }
        protected set { delivery = value; }
    }
}

public class CustomerOrder : Order
{
    public CustomerOrder()
        : base(new ParcelDelivery())
    { }

    // 'new' Delivery property
    public new ParcelDelivery Delivery
    {
        get 
        {
            Console.WriteLine("CustomOrder");
            return base.Delivery as ParcelDelivery; 
        }
        set { base.Delivery = value; }
    }
} 
```

然后以下代码片段实际使用您的 CustomOrder 类：

```
Order o = new CustomerOrder();
var d = o.Delivery; 
```

将输出“订单”。新方法专门打破了多态性。它在 CustomOrder 上创建一个新的 Delivery 属性，该属性不属于 Order 基类。因此，当您像使用 Order 一样使用 CustomOrder 时，不要调用新的 Delivery 属性，因为它只存在于 CustomOrder 上，而不是 Order 类的一部分。

你想要做的是覆盖一个不可覆盖的方法。如果您的意思是该属性是可覆盖的，请将其抽象化：

```
// order (base) class
public abstract class Order
{
    private DeliveryStrategy delivery;

    protected Order(DeliveryStrategy delivery)
    {
        this.delivery = delivery;
    }

    public abstract DeliveryStrategy Delivery
    {
        get { return delivery; }
        protected set { delivery = value; }
    }
}

public class CustomerOrder : Order
{
    public CustomerOrder()
        : base(new ParcelDelivery())
    { }

    public override ParcelDelivery Delivery
    {
        get { return base.Delivery as ParcelDelivery; }
        set { base.Delivery = value; }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-02-24T21:15:19.227

使用`new`影子基类的虚拟成员是一个坏主意，因为子派生类型将无法正确覆盖它们。如果存在想要在派生类中隐藏的类成员，则不应将基类成员声明为`abstract`or `virtual`，而应简单地调用`protected abstract`or`protected virtual`成员。`protected`派生类型可以使用调用适当成员并适当转换结果的方法来隐藏基类方法。

# c++ - 复制内存块

> ID：944302
> 
> 赞同：13
> 
> 时间：2009-06-03T11:51:03.110
> 
> 标签：c++, memory, copy

我需要一个关于如何有效地复制内存块的建议，如果可能的话，在 C++ 或汇编语言中一次尝试。

我有一个指向内存位置和偏移量的指针。将内存视为我需要复制的由行和列组成的二维数组。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-06-03T11:53:02.543

怎么样[`std::memcpy`](http://en.cppreference.com/w/cpp/string/byte/memcpy)？   

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-03T12:05:24.687

如果您需要自己实现此类功能，我建议您检查[Duff's Device](http://en.wikipedia.org/wiki/Duff%27s_device)是否必须高效完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T12:00:36.303

阅读您的评论，听起来您可能想要使用并行性。有执行此操作的指令，但它们仅对寄存器而不是内存进行操作。

这是因为计算机体系结构的方式（我假设 x86）。

您一次只能访问一个内存位置，因为计算机只有一个地址总线。如果您尝试一次访问多个位置，您将超载公共汽车，并且没有任何东西可以正常工作。

如果你可以把你需要的数据放在寄存器中，那么你可以使用很多很酷的处理器指令，比如 MMX 或 SSE，来执行并行计算。但是对于并行复制内存，这是不可能的。

正如其他人所说，使用 memcpy。它可靠、经过调试且快速。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-09-28T04:45:54.583

如果源和源重叠，请使用 memmove()。通常 memcpy() 和 memmove() 已经针对编译器的 clib 进行了高度优化。如果您确实编写了替代品，请至少将其与 clib 版本进行基准测试，以确保您不会减慢代码速度。

> 我有一个由 5000 行或更多行组成的块，并且在一个一直被调用 10000 次的函数中

另外，考虑改变你的数据结构。也许您可以拥有一个指向辅助数组（列）的指针的一维数组，而不是二维数组。然后，您只需复制或移动指针，而不是复制整行。您可以将列数组汇集在一个空闲列表中，这样您就不会花费大量时间来分配和释放它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T11:55:53.177

[内存](http://www.cppreference.com/wiki/c/string/memcpy)？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-03T12:23:31.173

组装中的 REP MOVSD 也许？如果没有更多关于您要复制的确切信息的信息，很难说……或者，您也可以重新编程 DMA 控制器来执行此操作，但它实际上最终会比仅使用处理器慢。:-)

# eclipse - 在 Eclipse 中重新运行应用程序

> ID：944306
> 
> 赞同：3
> 
> 时间：2009-06-03T11:52:31.127
> 
> 标签：eclipse

在 Eclipse 中启动 Java 应用程序时，其输出将转到控制台视图。我可以从那里停止应用程序，但我不能像在 Idea 中那样重新启动它。

有这个命令/选项/插件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-03T11:54:16.660

Ctrl+F11 -> 运行上次启动

F11 -> 调试上次启动

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T11:57:55.263

Ctrl + F11（运行持续启动）

# asp.net - 禁用 Internet Explorer 8 开发人员工具

> ID：944323
> 
> 赞同：7
> 
> 时间：2009-06-03T11:56:00.230
> 
> 标签：asp.net, internet-explorer

有没有办法禁用 Internet Explorer 8 开发人员工具，或者至少更改快捷键映射？

我正在开发一个多年来一直使用 F12 键的功能的 ASP.NET AJAX 应用程序（它实际上是原始 DOS 应用程序的保留）。客户使用该键用于 sam 功能已近 15 年，我们非常希望避免移动该功能。

干杯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-03T12:07:57.163

将名为“ **`Disabled`**”的 DWORD 值添加到

> HKCU\Software\Microsoft\Internet Explorer\IEDevTools

并赋予其价值“ **`1`**”

# entity-framework - 实体框架：继承和包含

> ID：944332
> 
> 赞同：10
> 
> 时间：2009-06-03T11:59:24.043
> 
> 标签：entity-framework, inheritance, include

假设以下层次结构：

```
class Department { EntityCollection<Employee> Employees; }

class Employee { string Name; }

class RemoteEmployee : Employee { Country Location; EntityReference<Country> CountryReference; } 
```

因此，部门包含员工列表。员工类型有一个层次结构，一些类型引用其他实体。假设我们需要向部门加载其员工。好的，没问题：

```
dataContext.Departments.Include("Employees") 
```

这将返回具体的员工类型（即 RemoteEmployee 用于远程）。现在我们需要使用远程员工加载位置。

```
dataContext.Departments.Include("Employees").Include("Employees.Location") - Error: no such property in Employee
dataContext.Departments.Include("Employees").Include("RemoteEmployees.Location") - Error: no such property in Department 
```

我应该在 Include 中指定什么以使用 RemoteEmployee 加载位置？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-04T00:39:21.637

我很确定 CatZ 的建议不起作用。

我不认为你可以使用 Include 来做到这一点，但你可以使用投影技巧来实现相同的效果，请参阅[如何在实体框架中对关系进行排序](http://blogs.msdn.com/alexj/archive/2009/02/25/tip-1-sorting-relationships-in-entity-framework.aspx)

你需要做的是这样的：

```
var results = from d in ctx.Departments
              select new {
                   d, 
                   employees = d.Employees.Select(
                      e => new {
                          e, 
                          location = e is RemoteEmployee ? 
                                     (e as RemoteEmployee).Location : 
                                     null
                     }
                   )
              };

foreach (var result in results)
{
    var re = result.d.Employees.First() as RemoteEmployee;
    Console.WriteLine("{0} {1} works from {2}", 
           re.Firstname, re.Surname, re.Location.Name);
} 
```

请注意，您不需要使用匿名类型来获取数据，本质上进行投影具有填充您部门的集合的副作用，因为实体框架的一个功能称为修复。

希望这有助于亚历克斯

# javascript - window.focus 在 IE 中不起作用

> ID：944333
> 
> 赞同：2
> 
> 时间：2009-06-03T11:59:27.570
> 
> 标签：javascript, internet-explorer, window, focus

在 Firefox 3 中，当我使用 window.open 打开一个新窗口（或选项卡）时，新窗口具有焦点，这就是我想要的。

在 IE 中，由于某种原因，旧窗口仍然有焦点，所以我研究了我的 window.open 代码现在这样做的问题。

```
 var w = window.open("Sheet.aspx", "_blank");
  w.focus(); 
```

不幸的是，这在 IE 7 中对我不起作用。旧窗口仍然有焦点。我在这里缺少什么？

我已将 IE 设置为在选项卡中打开新页面，而不是新页面，并且我已允许我的站点所在域的弹出窗口。

我可以在第二个选项卡上看到 IE 进度指示器，但它永远不会切换到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T12:11:54.097

我的一个网络应用程序中的代码几乎完全相同，在 IE7 中运行良好。如果您禁用弹出窗口阻止程序，它会起作用吗？您是否安装了任何可以阻止弹出窗口的扩展程序/工具栏，您可以尝试禁用它们吗？

- 编辑：

我的代码与您的不同，因为它为窗口提供了宽度和高度，因此它以弹出窗口的形式打开，但如果我将 IE 设置为“始终在新选项卡中打开弹出窗口”，它仍然专注于窗口我，但我已经完全关闭了弹出窗口阻止程序。我仍然认为您的问题最可能的根源是弹出窗口阻止程序或附加组件。

# asp.net-mvc - ASP.NET MVC - 使用多个模型查看

> ID：944334
> 
> 赞同：35
> 
> 时间：2009-06-03T11:59:29.787
> 
> 标签：asp.net-mvc, view

我正在尝试生成这样的 HTML

```
 <form action="/some/process" method="post">
        <input type="hidden" name="foo.a" value="aaa"/>
        <input type="hidden" name="bar.b" value="bbb"/>
        <input type="submit" />
    </form> 
```

所以它可以被这个Action处理：

```
 public ActionResult Process(Foo foo, Bar bar)
    {
        ...
    } 
```

给定动作代码

```
 public ActionResult Edit()
    {
        ViewData["foo"] = new Foo { A = "aaa" };
        ViewData["bar"] = new Bar { B = "bbb" };

        return View();
    } 
```

我应该在 Edit.aspx 视图中写什么？我不想手动编写名称“foo.a”和“bar.b”。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-06-03T12:08:21.453

字符串索引`ViewData`不好。您可能想要做的是为您的多变量视图数据创建一个小包装类，并将其传递给强类型视图。IE：

```
public class FooBarViewData
{
   public Foo Foo {get; set;}
   public Bar Bar {get; set;}
}
public ActionResult Edit()
{
   FooBarViewData fbvd = new FooBarViewData();
   fbvd.Foo = new Foo(){ A = "aaa"};
   fbvd.Bar = new Bar(){ B = "bbb"};
   return View(fbvd);
} 
```

然后，您的视图只是强类型，您可以使用该属性`FooBarViewData`调用该对象的成员。`Model`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-06-03T12:12:34.453

你有几个选择。首先，您可以从 ViewData 引用它们并使用 HtmlHelper 扩展。或者，您可以创建一个特定于视图的模型并为 Edit.aspx 使用强类型视图页。

```
public class EditModel
{
    public Foo foo { get; set; }
    public Bar bar { get; set; }
}

public ActionResult Edit()
{
    var model = new EditModel();

    model.foo = new Foo { A = "aaa" };
    model.bar = new Bar { B = "bbb" };

    return View( model );
} 
```

（Edit.aspx 是类型`ViewPage<EditModel>`）

无论哪种方式，HtmlHelper 扩展都会获取任何初始值。

```
<form action="/some/process" method="post">
     <%= Html.Hidden( "foo.A" ) %>
     <%= Html.Hidden( "bar.B" ) %>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-21T23:43:17.413

上述解决方案可能已过时。该解决方案似乎适用于 ASP.Net MVC5+。

您将不得不使用该`ViewModel`方法。这是一个很好的教程，您可以查看。

[http://tutlane.com/tutorial/aspnet-mvc/how-to-use-viewmodel-in-asp-net-mvc-with-example](http://tutlane.com/tutorial/aspnet-mvc/how-to-use-viewmodel-in-asp-net-mvc-with-example)

您将不得不将多个模型合并为一个`ViewModel`，并从每个模型中获取您要使用的所有属性到`ViewModel`.

***但是***，*强烈*建议您创建一个新的*Controller*和一个新的*View*来容纳新创建的`ViewModel`。阅读教程。

```
public class FooBarViewModel
{
   public string A {get; set;}  //Property for Foo
   public string B {get; set;}  //Property for Bar
}

public ActionResult Edit()
{
   FooBarViewModel fooBarVM = new FooBarViewModel();
   fooBarVM.A = "aaa";
   fooBarVM.B = "bbb";

   return View(fooBarVM);
} 
```

但在这种情况下，您应该能够将其传递`ViewModel`到不同的视图中。只需确保在`foobar.cshtml`页面中正确声明此类似指令即可。

```
@model FooBar.Models.FooBarViewModel 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-12T12:51:47.790

我挣扎了一段时间试图让两个模型工作，我遇到的大多数答案都是针对早期版本的 MVC。

**根据David Lee**的建议，我发现以下教程最适合 MVC 5 ：

[http://tutlane.com/tutorial/aspnet-mvc/how-to-use-viewmodel-in-asp-net-mvc-with-example](http://tutlane.com/tutorial/aspnet-mvc/how-to-use-viewmodel-in-asp-net-mvc-with-example)

我创建了一个连接并仅从两个模型中选择了我需要的列。

我让它与部分视图一起工作

在 view.cshtml

```
 @model IEnumerable<Test.Models.TestViewModel>
    ...
      @foreach (var item in Model)
                    {
                        <tr>
                            <td style="text-align:center;vertical-align:middle">
                                @Html.DisplayFor(modelItem => item.TestName)
... 
```

# python - 在 Python 中删除模块时调用的方法

> ID：944336
> 
> 赞同：10
> 
> 时间：2009-06-03T12:00:03.483
> 
> 标签：python, destructor, shutdown

有没有一种方法可以添加到我的模块中，在破坏类时会被调用？

我们有一个简单的类，它只有静态成员函数，卸载模块时需要清理数据库连接。

希望对于`__del__`没有实例的模块或类有一种方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-06-03T12:05:17.497

什么时候销毁哪个类？我虽然你说模块？

您的模块一直存在，直到解释器停止。您可以使用“atexit”模块添加一些要运行的东西：

```
import atexit
atexit.register(myfunction) 
```

* * *

编辑：根据您的评论。

由于您不希望它作为析构函数，因此我上面的回答是正确的。只需定义另一个函数（或静态方法，如果您愿意）并将其注册到 atexit：

```
def close_database():
    proceed_to_close()

import atexit
atexit.register(close_database) 
```

现在快速说明您的定义。

你说这个类没有任何实例。那么为什么要把它变成一个类呢？为什么不在模块级别定义函数呢？模块是一流的对象，只缓存和导入一次......

示例，而不是定义`database.py`：

```
class DataBase(object):
    @staticmethod
    def execute_some_query(query):
        code_here()
        some_code()
    @staticmethod
    def close_database():
        proceed_to_close()
import atexit ; atexit.register(DataBase.close_database) 
```

并使用：

```
from database import DataBase
DataBase.execute_some_query(query) 
```

您可以改为`database.py`：

```
def execute_some_query(query):
    code_here()
    some_code()

def close_database():
    proceed_to_close()
import atexit ; atexit.register(close_database) 
```

并像这样使用它：

```
import database
database.execute_some_query(query) 
```

* * *

或者更好：使用[sqlalchemy](http://www.sqlalchemy.org/)并避免创建自己的数据库接口的所有这些麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T12:05:17.153

您正在寻找的类析构函数方法是`__del__`. 调用的时间以及如何处理异常和子类化有一些细微差别`__del__`，因此请务必阅读[官方文档](http://docs.python.org/reference/datamodel.html#special-method-names)。

关于术语的快速说明：在 python 中，a`module`是您的代码所在的文件......本质上是一个命名空间。一个模块可以包含许多类、变量和函数。该`__del__`方法位于类上，而不是模块上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-03T12:04:26.610

使用 del 方法：

```
class Foo:

    def __init__(self):
        print "constructor called."

    def __del__(self):
        print "destructor called." 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-10T13:30:32.897

使用 bpython 测试...

```
>>> import atexit
>>> class Test( object ):
...     @staticmethod
...     def __cleanup__():
...         print("cleanup")
...     atexit.register(Test.__cleanup__)
... 
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "<input>", line 6, in Test
NameError: name 'Test' is not defined 
```

# c - 如何使用 make file 选项在 Visual Studio 2005 中链接 *.c 文件？

> ID：944338
> 
> 赞同：1
> 
> 时间：2009-06-03T12:00:12.157
> 
> 标签：c, visual-studio, makefile, linker

在 makefile 中链接 Visual Studio 中的源文件的选项是什么？

我已将其作为“链接”给出，但这不起作用。

编译选项是'cl'。这运作良好。

我想知道链接选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T12:05:14.250

链接是 Visual Studio 命令。如果您打开 Visual Studio 提示符，它应该可以工作。

检查链接命令是否在您的路径中。

# javascript - 使用ajax提交表单并返回结果

> ID：944351
> 
> 赞同：0
> 
> 时间：2009-06-03T12:03:50.963
> 
> 标签：javascript

我创建了一个消息系统，允许用户互相发送消息。这很好用，但是当他们回复我不希望他们被带到另一个页面时，我想要一个警报说“已发送”或“未发送”。下面是我的代码，它不起作用。

在 php 中：

```
 echo"<form id=\"form\" name=\"form\" method=\"post\" onsubmit=\"send(reply)\">"; 
```

javascript:

```
 function send(reply)
 {
    var httpRequest;
    make_request()
    function stateck() 
        {
        if(httpxml.readyState==4)

        { 

        alert (httpxml.responseText);   

        }

    httpxml.onreadystatechange=stateck;
    reply_url="compose.php?reply=" + reply.value + "&msgid="<?php echo $msgid; ?> + "&to="<?php echo $to; ?> + "&subject="<?php echo $subject; ?>";
    httpxml.open("GET",reply_url,true);
    httpxml.send(null);
    }
} 
```

我正在使用 php php 变量，因为需要从数据库中访问这些数据。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T12:06:41.363

由于发生了表单提交，因此将您带到了不同的页面。如果您不希望提交表单，请使用

```
onsubmit="send(reply); return false;" 
```

顺便说一句，您可以使用单引号： echo ' ... ' 这样您就不需要转义字符串中的所有双引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T12:25:29.267

您需要通过在提交处理程序中返回 false 来告诉浏览器您自己处理了事件：

```
echo"<form id=\"form\" name=\"form\" method=\"post\" onsubmit=\"send(reply); return false;\">"; 
```

此外，您的发送功能看起来会产生错误，这将导致浏览器提交。您没有在任何地方分配给 httpxml。我假设你真的想要：

```
 function send(reply) {
     var httpxml;
     httpxml = make_request();
     stateck = function () {
        if(httpxml.readyState==4){ 
            alert (httpxml.status);// you will want to check the server response code too
            alert (httpxml.responseText);       
        }

     };

     httpxml.onreadystatechange=stateck;
     reply_url="compose.php?reply=" + reply.value + "&msgid="<?php echo $msgid; ?> + "&to="<?php echo $to; ?> + "&subject="<?php echo $subject; ?>";
     httpxml.open("GET",reply_url,true);
     httpxml.send(null);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T12:11:27.967

您可能会考虑使用 JavaScript 库。为什么要在已经存在的情况下重新发明轮子？

例子：

*   [jQuery](http://www.jquery.com)
*   [MooTools](http://mootools.net/)
*   [原型](http://www.prototypejs.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T12:25:15.740

通常如果你想通过 Ajax 返回一些东西，你想避免页面提交。但是，如果您希望用户感觉他们正在提交表单，请在将充当 Ajax 提交按钮的页面上放置一个普通按钮（即不是提交按钮）。将您的 Ajax 更新函数与 onclick 绑定，并让您将请求定向到的 PHP 页面在响应中发送您想要的任何结果。其他一切（将结果文本弹出到字段等）应该只是标准的 Ajax 和 JavaScript。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T12:33:22.073

我同意 Natrium。一个javascript库是要走的路。我更喜欢prototype/scriptaculous，以便使用原型快速介绍ajax，请参阅以下内容

[http://www.prototypejs.org/learn/introduction-to-ajax](http://www.prototypejs.org/learn/introduction-to-ajax)

# php - 使用php和smarty以水平方式显示数组数据

> ID：944355
> 
> 赞同：0
> 
> 时间：2009-06-03T12:04:35.330
> 
> 标签：php, css, loops, smarty

建议我一个更好的方法来做到这一点。我想以水平方式显示数组结果。

> **第 1 列 | 第 2 栏 | 第 3 栏** **3 | 7 | 10**

现在它以垂直方式显示如下

> **第 1 列 | 第 2 栏 | 第 3 列** **3**
> **7**
> **10**

> 数组结果：存储在 $result 变量中并分配在 smarty 变量中

```
Array
    (
        [0] => Array
            (
                [1] => 3
                [Value] => 3
            )
        [1] => Array
            (
                [1] => 7
                [Value] => 7
            )
        [2] => Array
            (
                [1] => 10
                [Value] => 10
            )
    ) 
```

> .tpl 代码

```
<div>
    <ul>
       <li>Column1</li>
       <li>Column2</li>
       <li>Column3</li>
       <div class="clear"></div>
    </ul>

    {section name="index" loop=$result}
     <ul>                          
        <li>{$result[index].value}</li>
        <div class="clear"></div>
     </ul>
    {/section}
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T12:10:51.043

将 UL 置于循环之外，并确保 LI 的显示设置为内联或向左浮动。

```
<ul>
{section name="index" loop=$result}                     
   <li style="float:left;">{$result[index].value}</li>
{/section}
   <br style="clear:both" />
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T12:10:50.247

这行得通吗？

```
<table>
 <tr>
  <th>Column1</th>
  <th>Column2</th>
  <th>Column3</th>
 </tr>

 <tr>
 {section name="index" loop=$result}
   <td>{$result[index].value}</td>
 {/section}  
 </tr>
</table> 
```

# updatepanel - 更新面板缺失数据

> ID：944360
> 
> 赞同：1
> 
> 时间：2009-06-03T12:05:23.237
> 
> 标签：updatepanel

我有一个更新面板，里面有一个gridview。从一开始加载时，gridview 工作正常（如果我查看“查看源”所有数据都在那里），但是当在该更新面板上完成回发并再次单击“查看源”时，我获取的其他数据不存在. 它仍然有旧数据。

但是，如果我刷新整个页面，我就会得到它。对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T12:34:40.353

浏览器中的查看源代码通常不会显示对 HTML 所做的任何动态更改（即由 UpdatePanel 上的异步回发导致的更改）。它只会为您提供从初始页面请求中收到的 HTML。如果您使用的是 Firefox，则使用 Firebug 检查标记应该会显示动态更改。如果你有 IE8，开发者工具也会做同样的事情。如果您有 IE6 或 7（或 8），[FullSource](http://www.thundermain.com/FullSource.html)扩展将显示当前显示的 HTML，而不是初始页面响应。

# c# - 想要从 XML 序列化/反序列化对象 - 将标签指定为字符串常量是个好主意吗？

> ID：944363
> 
> 赞同：1
> 
> 时间：2009-06-03T12:05:43.937
> 
> 标签：c#, .net, xml, serialization

我有一门课，我想有机会序列化/反序列化。
它实现了接口 IXMLConvertable：

```
public interface IXMLConvertable<T>
where T: new() {
    T deserialize(XElement element);
    void serialize(XElement element);
} 
```

当 T 是一种要反序列化的对象时。问题是不是在代码中而是在字符串常量中指定 XML 标记名称是否是一种好习惯，如下所示：

```
public class XMLTagger {
    Dictionary<String, String> xmltags;  /*key is fieldname to serialize, value is the tag for it*/
    //... 
    public void addNewTag(String field, String tagForIt) {
        xmltags.Add(field, tagForIt);
    }
    //...
} 
```

我希望你能明白。我的每个类都可以使用这个类，我想要序列化/反序列化的对象，并提供简单的方法来通过字段名称获取所需的标签。是不是个好主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T12:12:09.323

我能问一下你为什么要引入一个额外的接口吗？[`IXmlSerializable`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)看起来很相似（尽管`XmlWriter`/`XmlReader`面向）。我也不确定为什么`deserialize`会*返回*一些东西；我们不应该反序列化*到*当前对象吗？（否则它是一个`IXmlConverter<T>`，如果你明白我的意思）。

重新标记...问题不清楚；您不会在代码或字符串常量中显示任何标签名称...

但它*更*容易使用[`XmlSerializer`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)并让它担心一切......

```
[XmlType("foo")]
public class Foo {
    [XmlAttribute("bar")]
    public string Bar {get;set;}
    [XmlElement("baz")]
    public int Baz {get;set;}
} 
```

# c# - 如何使用 C# 在 WPF 中设置 BitmapImage.CreateOptions

> ID：944366
> 
> 赞同：0
> 
> 时间：2009-06-03T12:07:06.773
> 
> 标签：c#, wpf, bitmapimage

```
BitmapImage bi = new BitmapImage(new Uri(@"D:\DSC_0865.png"));
bi.CreateOptions = BitmapCreateOptions.PreservePixelFormat;
img1.Source = bi; 
```

在上面的代码中，如果我尝试设置`bi.CreateOptions`它，它不会接受它。它显示为无。请问您能提出一个解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T12:19:00.713

尝试使用 Begin/EndInit 设置 BitmapImage

```
BitmapImage bi = new BitmapImage();
bi.BeginInit();
bi.CreateOptions = BitmapCreateOptions.PreservePixelFormat;
bi.UriSource = new Uri(@"D:\DSC_0865.png")
bi.EndInit();
img1.Source = bi; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T12:20:20.023

您使用的 BitmapImage 构造函数的[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms602473.aspx) 有一个简短的说明，指出*“使用此构造函数创建的 BitmapImage 对象会自动初始化。初始化后，属性更改将被忽略。”*

因此，在调用构造函数后设置 CreateOptions 没有任何效果。实际上，BitmapImage 是在构造函数中创建的，所以它是有道理的。您可能会争辩说，属性设置器可能应该抛出 InvalidOperationException。

您的问题的解决方案是使用另一个构造函数，例如，如[MSDN 文档页面上 CreateOptions 属性](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.createoptions.aspx)的示例所示。

# c++ - 如何获取指针指向的值的地址

> ID：944370
> 
> 赞同：2
> 
> 时间：2009-06-03T12:08:01.547
> 
> 标签：c++, pointers

我有一个指向 int 的指针。

```
int index = 3;
int * index_ptr = &index; 
```

`index_ptr`是一个类的成员变量`IndexHandler`。

A 类有一个 IndexHandlers 的 std::vector，Avector。B类有一个指向IndexHandlers的指针的std::vector，Bvector，我将它设置为指向A类向量中的项目，因此：

```
Bvector.push_back(Avector[i].GetPtr()) 
```

跟我到现在？

我想检查当我解析 Bvector 中的指针并检索内部 IndexHandlers`index_ptr`时，它们是否指向与`index_ptr`A 类相同的...

如何检查它们是否指向相同的内存地址？...如何打印两组指针指向的值的地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T12:13:34.530

要打印 int 指针的地址和 int 指针指向的 int 值，请使用

```
printf("%p %i\n", ptr, *ptr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T12:15:16.663

将它们并排打印出来的非迭代器方法：

```
for (size_t i = 0; i < Avector.size(); i++)
{
  std::cout << "Avector ptr:" << Avector[i].GetPtr() << ", Bvector ptr:" << Bvector[i] << std::endl;
} 
```

这将打印出每个指针的值。

不过，您应该注意一件事。如果 IndexHandler 中的指针指向 IndexHandler 中的值，那么如果调整向量的大小，它可能会失效，并且如果在该索引处插入或删除项目，则指向索引上方任何内容的指针将失效。正因为如此，将指向向量中的项的指针保留通常是一个坏主意，如果您想这样做，那么最好使用 std::list 容器代替（这不会使指向列表中项的指针无效）您插入或删除新值）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T12:18:11.277

一个非常“C”的方法是使用 printf。像这样：

```
printf("A = %p, B = %p", (void *)A, (void *)B); 
```

以上假设 A 和 B 是指针类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T12:20:02.707

> 如何检查它们是否指向相同的内存地址？

```
if (index_ptr1 == index_ptr2)
{
  // They point to the same address
}
else
{
  // They don't
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T19:57:39.887

类内：

```
//from this to uint value
void*   me=(void*)this;
uint* me_pAddress=(uint*)&me;
uint ThisAddress=*me_pAddress; //address value of 'this' pointer

//from uint value to this pointer
void*** me_ppAddress=(void***)&ThisAddress;
myClass* thisPointer=(myClass* )(*me_ppAddress);
thisPointer->myFunction(); 
```

# c# - 两个远程 sql 连接时事务范围不起作用

> ID：944372
> 
> 赞同：2
> 
> 时间：2009-06-03T12:08:48.410
> 
> 标签：c#, ado.net, transactions, mstdc

我在我的 C# 控制台应用程序项目中使用两个 SQL Server 连接对象。我需要在单个事务中执行此操作所以我使用了 Transactionscope（分布式事务）

我无法在事务范围内使用连接它显示错误

服务器上的 MSDTC 不可用。

我该如何解决....一个sql连接是远程服务器，另一个是本地服务器。

注意：- msdtc 服务已经启动。

服务器在两台机器上启动。我仍然面临这个问题。我是否需要关闭本地 Intranet 机器中的防火墙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T12:11:45.360

启动 MSDTC 服务。

在命令提示符下：

```
net start msdtc 
```

或来自服务 MMC。找到“分布式事务协调器”并单击开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T12:17:42.137

如果您很难让 DTC 正常运行（尤其是在涉及防火墙或 SQL 集群的情况下），那么[DTCPing](http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=5e325025-4dcd-4658-a549-1d549ac17644)是一个很好的工具（由 Microsoft 提供）来识别它。请注意，（IIRC）您需要能够在两个方向上进行 DTCPing

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T12:18:13.587

每当您执行分布式事务时，Microsoft 分布式事务协调器都需要在您的本地计算机和参与事务的所有服务器上运行。如果你有防火墙，你还需要确保你限制了 MSDTC 通信的端口，并在你的防火墙配置中添加了适当的规则以允许连接——我相信它需要端口映射器访问以及特定端口您为 RPC 选择的范围。MSDTC 还有各种需要同步的安全设置来控制服务器之间的身份验证方式。

以下是一些可能有用的链接：

1.  [MSDN 上的 MSDTC](http://msdn.microsoft.com/en-us/library/ms684146.aspx)
2.  [MSDTC 故障排除](http://msdn.microsoft.com/en-us/library/aa561924.aspx)
3.  [MSDTC 和防火墙问题](http://support.microsoft.com/kb/306843)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T12:19:12.443

我最近在一个项目中遇到了同样的问题。不幸的是，我无权按照其他答案中的说明启动 MSDTC。如果您处于同样的情况，我建议您阅读我不久前发布的关于此问题的问题。

[MSDTC 问题](https://stackoverflow.com/questions/761031/how-do-you-get-around-multiple-database-connections-inside-a-transactionscope-if)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T17:07:12.213

只是一个想法，你可能已经尝试过了。如果您确认 MSDTC 服务正在运行，您是否查看过运行服务的机器上的事件日志？您可能会从那里的服务中找到错误信息。

# c# - 隐式创建事件时向 ScatterViewItems 添加事件

> ID：944381
> 
> 赞同：0
> 
> 时间：2009-06-03T12:11:15.270
> 
> 标签：c#, wpf, xaml, pixelsense

不确定这里有太多的表面开发人员，但是嘿嘿...

如果我有一个 scatterview 隐式创建 ScatterViewItem 对象（见下文），是否可以为每个 scatterViewItem 撤销联系事件？此外，当我明确地将图像对象包装在 ScatterViewItem 中时，该项目不再起作用。谁能告诉我为什么会这样？

```
<s:ScatterView ItemsSource="{StaticResource DummyData}" >
   <s:ScatterView.ItemTemplate>
      <DataTemplate>
         <Image Source="{Binding Path=ImagePath}" />
      </DataTemplate>
   </s:ScatterView.ItemTemplate>
 </s:ScatterView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T19:44:49.640

将图像包装在数据模板内的 scatterviewitem 中将无济于事，因为只要您使用 ItemsSource，scatterview 仍会生成并用另一个 scatterviewitem 包装它。防止这种情况的唯一方法是在后面的代码中显式地创建并添加 svi 到 scatterview 上的项目集合中，但这会放弃数据绑定的优势。

为了解决您最初的问题，我假设您想知道在任何生成的 scatterviewitem 上何时发生 ContactDown 或 ContactUp 事件，对吗？由于这些是路由事件，因此您可以在 scatterview 级别订阅。

```
 <s:ScatterView ItemsSource="{StaticResource DummyData}" 
                 s:ScatterViewItem.ContactDown="OnSVIContactDown">
    <s:ScatterView.ItemTemplate>      
        <DataTemplate>         
           <Image Source="{Binding Path=ImagePath}" />      
        </DataTemplate>   
    </s:ScatterView.ItemTemplate> 
  </s:ScatterView> 
```

# svn - 如何在 SVN 提交之前强制检查等等？

> ID：944382
> 
> 赞同：0
> 
> 时间：2009-06-03T12:11:17.250
> 
> 标签：svn

我们公司将 SVN 用于 VCS，我们希望这样做：

预提交有效，因此我们可以在提交前将大任务分解为小任务。

我们需要在提交之前审查代码。

一个人可以制作一个版本，其他人可以检查出来。（不修改发布回购。）

我们可以轻松地 fork 到另一个 SVN 服务器（用于项目管理）并将更改推送回来。

我知道 mercurial,git,bazzar 可以完成这项工作，但是 SVN 怎么可以呢？

ps：不要告诉我把SVN改成mercurial，我不是CTO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T12:16:12.700

有些问题可以通过给开发者自己的分支来解决。他们可以在那里开发自己的代码，如果它足够成熟和稳定，它可以与“主”分支合并。

您还可以将 SVN 与 Git/Mercurial/Bazaar 同时使用 - 有些项目实际上是这样做的。开发人员在日常工作中使用去中心化的 VCS-es，并将经过审核和批准的更改移至 SVN。

# sql - 是否有任何机构使用 sql 服务代理来更新 winforms(WPF) GUI？

> ID：944383
> 
> 赞同：2
> 
> 时间：2009-06-03T12:11:22.740
> 
> 标签：sql, sql-server-2005

当数据库表中发生数据更改时，我有一个更新 Winforms 应用程序 GUI 的方案。是否有任何机构使用 SQL 服务代理来做同样的事情？

例如：

我在 SQl Server 2005 数据库中有一个客户和订单表，并且我有一个 winform(WPF) 应用程序，它驻留在呼叫中心主管（比如 CCE-A、CCE-B、CCE-C、CCE-D）办公桌上，以显示待处理的客户订单.

所有这些呼叫中心主管将同时处理待处理订单。作为开发人员，我面临的挑战是在客户和订单表发生变化时更新呼叫中心主管 GUI。

提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-05T13:05:46.137

这实际上取决于您必须更新的 GUI 的数量。本质上，ServiceBroker 的 SqlDependency 可以在数据库中的数据更改时触发对应用程序的更新，因此您可以使用它，或者滚动您自己的实现，但需要注意的是它不适合大规模/多依赖刷新因为每个依赖项的开销。Klaus Aschenbrenner 的 Pro SQL Server 2008 Service Broker 是关于如何将服务代理与托管代码一起使用的一个很好的参考。

您可以在要监视的数据上创建单个测试 SqlDependency，并使用 SQLTrace 捕获数据库引擎执行的语句以在 SQL Server 中创建服务和队列。然后，您可以将这些语句用作自定义服务的基础以满足您的需求，让客户端设置为使用相同的服务，而不是每个都通过 SqlDependency 启动自己的服务。这与 WPF 中的 ObservableCollection 一起应该可以让您到达您需要的位置。

# html - HTML 元素中的 XSLT 元素导致错误

> ID：944390
> 
> 赞同：0
> 
> 时间：2009-06-03T12:13:06.577
> 
> 标签：html, xslt, xhtml

我怎么能意识到这样的事情：

```
<img alt="logo" src="/Content/Images/Logos/<xsl:value-of select="/customer/country"/>.png" /> 
```

XSLT 处理器由于“<”而引发错误 - 在此处签名...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T12:15:46.430

您可以使用：

```
<img alt="logo" >
     <xsl:attribute name="src">
        /Content/Images/Logos/<xsl:value-of select="/customer/country"/>.png
     </xsl:attribute>
</img> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-26T00:05:34.477

元素不能嵌套在属性值中。您可以使用 {...} 来嵌入 XPath，如下所示：

```
<img alt="logo" src="/Content/Images/Logos/{/customer/country}.png" /> 
```

# c++ - 如何在 C++ 中使用 smo 库

> ID：944393
> 
> 赞同：0
> 
> 时间：2009-06-03T12:13:54.890
> 
> 标签：c++, sql-server, sql-server-2005, smo

我正在尝试在 vs2005 中列出所有使用 c++ 的 sqlserver 实例。

如何在 C++ 中使用 smo 库来做到这一点？给我代码示例。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-08T17:27:55.133

使用 Windows Toolhelp API，您可以枚举 SQL Server 进程，而无需使用 SQL API（我没有查看）。

*   您可以使用 CreateToolhelp32Snapshot 调用创建系统快照。
*   使用 Process32Next 和 Process32First 循环浏览快照进程。
*   对于每个进程，查询 PROCESSENTRY32 结构成员。szExeFile 包含可执行文件名。

请注意，服务在 services.exe 可执行文件下运行，因此如果您的服务器作为服务运行，则使用此方法可能看不到它。

# php - 从PHP中的字符串中提取浮点数

> ID：944400
> 
> 赞同：8
> 
> 时间：2009-06-03T12:16:15.103
> 
> 标签：php, regex, text

我想将字符串转换为浮点数。例如

```
152.15 x 12.34 x 11mm 
```

进入

```
152.15, 12.34 and 11 
```

并存储在一个数组中，使得 $dim[0]=152.15, $dim[1]=12.34, $dim[2]=11。

我还需要处理类似的事情

```
152.15x12.34x11 mm

152.15mmx12.34mm x 11mm 
```

谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-06-03T12:19:31.087

```
$str = '152.15 x 12.34 x 11mm';
preg_match_all('!\d+(?:\.\d+)?!', $str, $matches);
$floats = array_map('floatval', $matches[0]);
print_r($floats); 
```

正`(?:...)`则表达式构造就是所谓的[非捕获组](http://www.regular-expressions.info/named.html)。这意味着该块不会在`$mathces`数组的一部分中单独返回。**在这种情况下，**这不是绝对必要的，但这是一个有用的结构。

**注意：**调用[`floatval()`](http://us2.php.net/floatval)元素也不是绝对必要的，因为如果您尝试在算术运算或类似操作中使用它们，PHP 通常会正确地处理类型。但这并没有什么坏处，尤其是对于仅作为一个班轮的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-03T12:33:32.477

```
<?php

$s = "152.15 x 12.34 x 11mm";

if (preg_match_all('/\d+(\.\d+)?/', $s, $matches)) {
    $dim = $matches[0];
}

print_r($dim);

?> 
```

给

```
Array
(
    [0] => 152.15
    [1] => 12.34
    [2] => 11
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T12:21:27.650

```
$string = '152.15 x 12.34 x 11mm';
preg_match_all('/(\d+(\.\d+)?)/', $string, $matches);
print_r($matches[0]); // Array ( [0] => 152.15 [1] => 12.34 [2] => 11 ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T12:20:31.100

```
$str = "152.15 x 12.34 x 11mm";
$str = str_replace("mm", "", $str);
$str = explode("x", $str);
print_r($str); // Array ( [0] => 152.15 [1] => 12.34 [2] => 11 ) 
```

对其进行了测试，它适用于上述所有字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T12:45:41.627

```
preg_match_all("/\d*\.?\d+|\d+/", "152.15mmx12.34mm x .11mm", $matches); 
```

此示例也支持像*.11*这样的数字，因为它们是有效数字。`$matches[0]`将包含*152.15*、*12.34*和*0.11*，假设您键入将结果转换为浮点数。如果你不*0.11*将显示为*.11*。我会使用`array_map`.

```
$values = array_map("floatval", $matches[0]); 
```

您可以将这些值用于任何数学运算，而无需进行类型转换。直接打印时只需要铸造。

# jquery - 悬停时设置超时

> ID：944403
> 
> 赞同：2
> 
> 时间：2009-06-03T12:17:36.473
> 
> 标签：jquery

我正在尝试使用 jquery 的悬停来清除设置变量（计时器）上的一个超时（cleartimeout），然后在鼠标离开元素后设置另一个（settimeout）。关于如何做到这一点的任何想法？

到目前为止，我的代码（不起作用！！！！）是：

```
$(function () {

    $('ul.contact').hover(function () {

        $(this).clearTimeout(timer).animate({ 'opacity': 0.7 });
    }, function () {
        $(this).setTimeout(function () {
            $('ul.contact').fadeOut('slow');
        }, 8000);
        });

    timer = setTimeout(function () {
        $('li#contact').removeClass('cur');
        $('li#$url').addClass('cur');
    }, 8625);

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-03T12:20:37.480

setTimeout() 和 clearTimeout() 是（全局）窗口对象的函数，因此应该在没有对象的情况下调用它们。在您的示例中，删除“$(this)”。在调用 setTimeout 和 clearTimeout 之前

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-03T12:22:13.890

你也不能像你想要`.animate()`的那样链接一个电话。`clearTimeout()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T19:28:50.843

The hoverIntent jQuery plugin might help. It allows you to tune the sensitivity of a mouseover:

[http://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

...which I suspect is what you are trying to do.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T12:37:52.923

我意识到我没有为我想要保持显示的实际元素设置另一个变量。现在已经设置了另一个变量，并且在新代码中一切正常：

非常感谢您的提示，它们也包括在内！

```
$(function () {

    $('ul.contact').hover(function () {

        clearTimeout(display);
        clearTimeout(timer);
        $(this).css('display', 'block');
    }, function () {
        $(this).fadeOut('slow');
        $('li#contact').removeClass('cur');
        $('li#$url').addClass('cur');
    });

}); 
```

# infopath - 如何仅在页面加载时根据另一个字段填充字段？（信息路径）

> ID：944411
> 
> 赞同：0
> 
> 时间：2009-06-03T12:19:05.720
> 
> 标签：infopath

我正在创建一个 Infopath 表单，而我正在尝试做的是仅在加载时使用该字段的初始值填充一个额外的文本框。

我知道这听起来很奇怪，举个例子可能会更好： - 字段 1 开始为空白，用户将字段更改为“100”并保存。Extra_Field 保持空白。- 当表单再次打开时，Extra_Field 现在填充“100”并且用户将字段 1 更改为“200”，Extra_Field 保持在“100”，保存表单 -再次打开该字段，Extra_Field 现在填充“200”...

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-04T09:10:26.463

只需转到**附加菜单→表单选项→打开并保存→规则按钮**
并在此处添加规则。（这些规则只会在每次开放期间执行一次。）

介意之前创建您的字段。

# python - 将工作表从一个电子表格复制到另一个电子表格

> ID：944419
> 
> 赞同：1
> 
> 时间：2009-06-03T12:20:22.270
> 
> 标签：python, gdata-api, google-docs, gdata

是否可以使用 gdata API 或工作表将电子表格从一个电子表格复制到另一个电子表格？现在我将所有单元格从一个工作表复制到另一个工作表。每个请求一个单元格。它太慢了。我阅读了“单元批处理”并编写了以下代码：

```
 src_key = 'rFQqEnFWuR6qoU2HEfdVuTw'; dst_key = 'rPCVJ80MHt7K2EVlXNqytLQ'

sheetcl = gdata.spreadsheet.service.SpreadsheetsService('x@gmail.com','p')
dcs = gdata.docs.service.DocsService('x@gmail.com', 'p')

src_worksheets = sheetcl.GetWorksheetsFeed(src_key)
dst_worksheets = sheetcl.GetWorksheetsFeed(dst_key)

for src_worksheet, dst_worksheet in zip(src_worksheets.entry, dst_worksheets.entry):

    sheet_id = src_worksheet.id.text.split('/')[-1]
    dst_sheet_id = dst_worksheet.id.text.split('/')[-1]

    cells_feed = sheetcl.GetCellsFeed(src_key, sheet_id)
    dst_cells_feed = sheetcl.GetCellsFeed(dst_key, dst_sheet_id)

    for cell in cells_feed.entry:
        dst_cells_feed.AddInsert(cell)

    sheetcl.ExecuteBatch(dst_cells_feed, dst_cells_feed.GetBatchLink().href) 

```

但它不起作用。我认为原因是内部循环中的每个单元格都有它的 id，它由电子表格 ID 组成：

```
 >>> cell.id.text
'http://spreadsheets.google.com/feeds/cells/rFQqEnFWuR6qoU2HEfdVuTw/default/private/full/R1C1'
>>> 

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-23T21:05:02.450

您可能应该使用[单元格范围查询](http://code.google.com/apis/spreadsheets/data/1.0/developers_guide_python.html#cellsQueryExample)一次获取一整行，然后在目标电子表格中[插入行。](http://code.google.com/apis/spreadsheets/data/1.0/developers_guide_python.html#addRow)

# php - php包括：ms word生成的html文件和垃圾css

> ID：944428
> 
> 赞同：1
> 
> 时间：2009-06-03T12:22:46.883
> 
> 标签：php, ms-word

当然，word 生成的 html 很烂。但不幸的是，我需要从这些现有文档中获取一些文本到我的 php 页面。问题是，然后它弄乱了我原始页面的 css。什么是出路？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T12:24:54.977

试试[这个](http://snipplr.com/view/5217/clean-word-html-using-regular-expressions/)。这是一个 ereg 函数，可以从字符串中清除一些 Word HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T12:31:10.423

或[html 整洁](http://tidy.sourceforge.net/docs/quickref.html#word-2000)，[在这里](http://www.php.net/tidy)

# c++ - 错误 C1854：无法覆盖在目标文件中创建预编译头期间形成的信息

> ID：944429
> 
> 赞同：26
> 
> 时间：2009-06-03T12:22:58.303
> 
> 标签：c++, visual-studio, precompiled-headers, dllexport

```
foo.cpp(33918) : fatal error C1854: cannot overwrite information formed 
during creation of the precompiled header in object file: 'c:\somepath\foo.obj' 
```

咨询 MSDN 为我提供了以下信息：

> 在为同一文件指定 /Yc（创建预编译头）选项后，您指定了 /Yu（使用预编译头）选项。某些声明（例如包括 __declspec dllexport 的声明）使此无效。

在这种情况下，我们使用的是 dllexport 和预编译的头文件。有没有人遇到过这种情况并知道任何解决方法？非常感谢任何有助于阐明这个问题的意见。

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-06-03T20:24:16.237

我想你可以在这里找到答案：http: [//social.msdn.microsoft.com/forums/en-US/vclanguage/thread/b3aa10fa-141b-4a03-934c-7e463f92b2a5/](http://social.msdn.microsoft.com/forums/en-US/vclanguage/thread/b3aa10fa-141b-4a03-934c-7e463f92b2a5/)

基本上，您需要将 stdafx.cpp 文件设置为“创建预编译头文件”，并将所有其他 .cpp 文件设置为“使用预编译头文件”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-12-28T14:28:22.403

我也有这个问题。

确保将预编译器头输出文件设置为正确的位置。我的实际上输出到了正确的位置，但读取它时出现了问题，因为路径里面有一个小神器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-15T09:54:56.747

我的解决方案是仔细检查所有预编译的头文件设置，不仅是 .exe 项目，而且是所有 dll 项目，并重新创建所有头文件。之后，错误在 .exe 编译中消失了。

# asp.net - ASP.NET 路由和正则表达式

> ID：944431
> 
> 赞同：1
> 
> 时间：2009-06-03T12:24:10.563
> 
> 标签：asp.net, routing

我正在尝试启用如下路线

```
route = new Route("{w1}-{c1}-{n1},{w2}-{c2}-{n2}", new ResultRouteHandler());
route.Constraints = new RouteValueDictionary();
route.Constraints.Add("c1", "(.*)|([-])");
route.Constraints.Add("c2", "(.*)|([-])");
RouteTable.Routes.Add(route); 
```

但是，当 c1 或 c2 为“-”时，我遇到了问题。例如“abc,d---f”返回 404（而“abc,def”工作正常）。有人知道我在做什么错吗？先感谢您。

**编辑：**

我为这个问题找到了一个简单的解决方法：

```
route = new Route("{w1}-{c1}-{n1},{w2}---{n2}", new MyRouteHandler());
RouteTable.Routes.Add(route);
route = new Route("{w1}-{c1}-{n1},{w2}-{c2}-{n2}", new MyRouteHandler());
RouteTable.Routes.Add(route); 
```

如果 c2 是“-”，我们匹配第一个路由，否则匹配第二个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-07T03:14:00.603

如果我理解正确，您**确实**想要匹配`"a-b-c,d---f"`，这就是您首先调整约束的原因。您拥有的正则表达式有些多余`'-'`，但`'.*'`. 换句话说，我不认为你的正则表达式应该受到责备，而是路由引擎解析器。

如果您将路线从`"{w1}-{c1}-{n1},{w2}-{c2}-{n2}"`to更改为`"{w1}-{c1}-{n1},{w2}_{c2}-{n2}"`，则 c2 将开始匹配`'-'`in `"a-b-c,d_--f"`。我认为关于路由解析的一些事情不喜欢使用分隔符作为下一个值。

所以我认为你可以放弃你的约束（因为它们目前存在），但如果你想`'-'`成为`c1`或`c2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T13:32:43.623

我对正则表达式的实现不是 100% 肯定，但我认为它应该是这样的：

```
route.Constraints.Add("c1", "([^-]*)");
route.Constraints.Add("c2", "([^-]*)"); 
```

# windows - Windows 的“man”程序（打开 UNIX 手册页的程序）在哪里？

> ID：944434
> 
> 赞同：40
> 
> 时间：2009-06-03T12:24:58.063
> 
> 标签：windows, manpage

我正在寻找适用于 linux man（手动阅读器）的 windows 可执行文件。

我试着用谷歌搜索，但对它得出的结果感到沮丧，因为“男人”是一个如此常见的词组。

我得到的结果是“在德克萨斯州执行的人......”。

所以我现在关注 SO 社区。有什么线索吗？

* * *

这是我的需要：我在 Windows 上有 Portable Git。它有一个 bash windows 二进制文件。但是当它试图向我展示一些命令的帮助时，可怜的东西抱怨说“没有手动阅读器”。因此，如果我得到一个 man 二进制文件，我会将它放在 bin/ 目录中，所有内容都将是 hunky-dory。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-06-03T12:53:00.940

如果您想在 Windows 中打开 linux 风格的手册页，那么请让[Groff for Windows](http://gnuwin32.sourceforge.net/packages/groff.htm)在您的命令行上查看手册页，如下所示：

```
groff -Tascii -mm your_file | more 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-08T17:49:53.817

HELP 是 man 的等效 Windows 命令。例如：

```
C:\> HELP
For more information on a specific command, type HELP command-name
ASSOC          Displays or modifies file extension associations.
ATTRIB         Displays or changes file attributes.
BREAK          Sets or clears extended CTRL+C checking.
BCDEDIT        Sets properties in boot database to control boot loading.
CACLS          Displays or modifies access control lists (ACLs) of files.
CALL           Calls one batch program from another.
CD             Displays the name of or changes the current directory.
CHCP           Displays or sets the active code page number.
CHDIR          Displays the name of or changes the current directory.
CHKDSK         Checks a disk and displays a status report.
CHKNTFS        Displays or modifies the checking of disk at boot time.
CLS            Clears the screen.
CMD            Starts a new instance of the Windows command interpreter.
COLOR          Sets the default console foreground and background colors.
COMP           Compares the contents of two files or sets of files.
COMPACT        Displays or alters the compression of files on NTFS partitions.
CONVERT        Converts FAT volumes to NTFS.  You cannot convert the
               current drive.
COPY           Copies one or more files to another location.
DATE           Displays or sets the date.
DEL            Deletes one or more files.
DIR            Displays a list of files and subdirectories in a directory.
DISKCOMP       Compares the contents of two floppy disks.
DISKCOPY       Copies the contents of one floppy disk to another.
DISKPART       Displays or configures Disk Partition properties.
DOSKEY         Edits command lines, recalls Windows commands, and 
               creates macros.
DRIVERQUERY    Displays current device driver status and properties.
ECHO           Displays messages, or turns command echoing on or off.
ENDLOCAL       Ends localization of environment changes in a batch file.
ERASE          Deletes one or more files.
EXIT           Quits the CMD.EXE program (command interpreter).
FC             Compares two files or sets of files, and displays the 
               differences between them.
FIND           Searches for a text string in a file or files.
FINDSTR        Searches for strings in files.
FOR            Runs a specified command for each file in a set of files.
FORMAT         Formats a disk for use with Windows.
FSUTIL         Displays or configures the file system properties.
FTYPE          Displays or modifies file types used in file extension 
               associations.
GOTO           Directs the Windows command interpreter to a labeled line in 
               a batch program.
GPRESULT       Displays Group Policy information for machine or user.
GRAFTABL       Enables Windows to display an extended character set in 
               graphics mode.
HELP           Provides Help information for Windows commands.
ICACLS         Display, modify, backup, or restore ACLs for files and 
               directories.
IF             Performs conditional processing in batch programs.
LABEL          Creates, changes, or deletes the volume label of a disk.
MD             Creates a directory.
MKDIR          Creates a directory.
MKLINK         Creates Symbolic Links and Hard Links
MODE           Configures a system device.
MORE           Displays output one screen at a time.
MOVE           Moves one or more files from one directory to another 
               directory.
OPENFILES      Displays files opened by remote users for a file share.
PATH           Displays or sets a search path for executable files.
PAUSE          Suspends processing of a batch file and displays a message.
POPD           Restores the previous value of the current directory saved by 
               PUSHD.
PRINT          Prints a text file.
PROMPT         Changes the Windows command prompt.
PUSHD          Saves the current directory then changes it.
RD             Removes a directory.
RECOVER        Recovers readable information from a bad or defective disk.
REM            Records comments (remarks) in batch files or CONFIG.SYS.
REN            Renames a file or files.
RENAME         Renames a file or files.
REPLACE        Replaces files.
RMDIR          Removes a directory.
ROBOCOPY       Advanced utility to copy files and directory trees
SET            Displays, sets, or removes Windows environment variables.
SETLOCAL       Begins localization of environment changes in a batch file.
SC             Displays or configures services (background processes).
SCHTASKS       Schedules commands and programs to run on a computer.
SHIFT          Shifts the position of replaceable parameters in batch files.
SHUTDOWN       Allows proper local or remote shutdown of machine.
SORT           Sorts input.
START          Starts a separate window to run a specified program or command.
SUBST          Associates a path with a drive letter.
SYSTEMINFO     Displays machine specific properties and configuration.
TASKLIST       Displays all currently running tasks including services.
TASKKILL       Kill or stop a running process or application.
TIME           Displays or sets the system time.
TITLE          Sets the window title for a CMD.EXE session.
TREE           Graphically displays the directory structure of a drive or 
               path.
TYPE           Displays the contents of a text file.
VER            Displays the Windows version.
VERIFY         Tells Windows whether to verify that your files are written
               correctly to a disk.
VOL            Displays a disk volume label and serial number.
XCOPY          Copies files and directory trees.
WMIC           Displays WMI information inside interactive command shell.

For more information on tools see the command-line reference in the online help. 
```

这是另一个例子：

```
C:\> HELP SET
Displays, sets, or removes cmd.exe environment variables.

SET [variable=[string]]

  variable  Specifies the environment-variable name.
  string    Specifies a series of characters to assign to the variable.

...

(I cut several pages worth of information from its output) 
```

它提供了丰富的信息。但是，唉，这与调用 /? 真的没有什么不同。无论如何要使用的应用程序的参数（即：SET /？）。

但是，至少您可以通过以下方式在不知道其名称的情况下找到所需的应用程序：

```
C:\> HELP | find /i "ACL"
CACLS          Displays or modifies access control lists (ACLs) of files.
ICACLS         Display, modify, backup, or restore ACLs for files and 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-06-03T12:28:03.097

如果您安装[Cygwin](http://www.cygwin.com/)，您将获得一个 man 命令……当然，这不会涵盖 Windows 概念；Windows 文档不是以 man 文件格式提供的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-06-03T13:21:55.970

安装 cygwin 并将 windows 命令提示符中的路径设置为

设置 PATH=C:\cygwin\bin;%PATH%

并且只给'男人'它应该工作..

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-03T12:38:40.003

[在 Windows 中，作为命令解释器 ( `cmd.exe`)](http://en.wikipedia.org/wiki/Command_Prompt_(Windows))一部分的命令，例如`dir`、`copy`、`ren`等命令将显示一些带有`/?`开关的帮助信息。

一些例子：

```
dir /?
rename /?
copy /? 
```

这是 DOS 时代的一个保留，当时许多命令和程序使用反斜杠作为开关，并`?`用于显示使用和帮助信息，因此是`/?`开关。

此外，`help`在命令解释器中键入也将显示所有命令解释器命令的列表。`help <command_name>`也会显示帮助信息。

Microsoft 提供了一个[命令参考](http://technet.microsoft.com/en-us/library/cc754340.aspx)，其中包含每个命令的用法和选项。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-12-22T05:06:39.173

假设您已经从 /usr/share/man 中的 shell（我更喜欢 C shell）加载并使用[Windows Unix 应用程序子系统。](https://en.wikipedia.org/wiki/Windows_Services_for_UNIX#Subsystem_for_UNIX-based_Applications_.28SUA.29_and_separate_NFS)只是：

```
 set MANPATH "/usr/share/man" 
```

在您的 .cshrc 或 .login 启动文件中，然后您将能够使用以下命令：

```
 man 1 csh 
```

从手册集 1 中获取有关“csh”命令的手册信息。

希望这可以帮助。- 甲板

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-05-04T17:01:28.340

我有一个类似的问题，你可以尝试使用 --help 它应该给你你需要的信息例如

```
ls --help 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-03T12:50:03.193

Windows 帮助通常通过 .CHM 文件发布或通过 Microsoft 知识库和 MSDN 在线发布。没有像 *NIX 系统那样的中央帮助库。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-08T12:44:11.033

**如果**你已经在你的 Windows 上安装了一个 man 可执行文件（它碰巧我安装了，不确定我从哪里安装它），你可以找到它的位置：

```
C:\> where man 
```

`where`查找您在 Windows 上的可执行文件的位置。

来源：[https ://superuser.com/questions/49104/how-do-i-find-the-location-of-an-executable-in-windows](https://superuser.com/questions/49104/how-do-i-find-the-location-of-an-executable-in-windows)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-19T17:10:04.103

您也可以尝试从 Windows[中](https://embedeo.org/ws/doc/man_windows/#google_vignette)查看手册页。这很简单，只需在 Windows 命令提示符下使用（无需安装）：

```
mandoc.exe manpage.1 | more 
```

注意：您也可以将 mandoc.exe 放在 PATH 中。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2009-06-03T12:28:40.600

在 DOS 中，您可以键入 HELP

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2009-06-03T12:30:49.753

大多数 Windows 命令都有一个 /h 开关，用于使用和简要的例行信息。

# javascript - 使用jQuery追加转义文本？

> ID：944436
> 
> 赞同：21
> 
> 时间：2009-06-03T12:25:20.763
> 
> 标签：javascript, jquery

我知道我可以`$.html`用来设置某些东西的 HTML 内容，并`$.text`设置内容（并且这会转义 HTML）。

不幸的是，我使用`$.append`的是 ，它不会转义 HTML。

我有这样的事情：

```
function onTimer() {
    $.getJSON(url, function(data) {
        $.each(data, function(i, item) {
           $('#messages').append(item);
        }
    }
} 
```

...其中 url 返回一个字符串数组。不幸的是，如果这些字符串之一是 (eg) `<script>alert('Hello')</script>`，这将被执行。

如何让它转义 HTML？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-06-03T12:30:12.657

看看 jQuery 是如何做到的：

```
text: function( text ) {
    if ( typeof text !== "object" && text != null )
        return this.empty().append( (this[0] && this[0].ownerDocument || document).createTextNode( text ) );

    var ret = "";

    jQuery.each( text || this, function(){
        jQuery.each( this.childNodes, function(){
            if ( this.nodeType != 8 )
                ret += this.nodeType != 1 ?
                    this.nodeValue :
                    jQuery.fn.text( [ this ] );
        });
    });

    return ret;
}, 
```

所以这样的事情应该这样做：

```
$('#mydiv').append(
    document.createTextNode('<b>Hey There!</b>')
); 
```

**编辑**：关于你的例子，它很简单：

```
$('#messages').append(document.createTextNode(item)); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-03T12:29:16.403

您要附加一个已经有内容的元素？或者您在追加后添加内容？无论哪种方式，您仍然需要在该元素上执行 .text(...) 。

如果您使用 append 并将 HTML 作为参数传递，请先尝试创建元素，然后将其传递给 append。

前任：

```
$('<div/>').text('your content here').appendTo('div#someid') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T21:44:39.130

如果你真的想让 jQuery 将一些文本转义为 HTML 片段并且不想`document`自己直接接触，以下纯 jQuery 可以为你将文本转义为 HTML（但仅限于 HTML 上下文中）：

```
jQuery('<p/>').text('v & M_FLAG == M_FLAG').html() 
```

这可用于非常低效地附加文本：

```
jQuery('#message').append(jQuery('<p/>').text(item).html()); 
```

不会`<p/>`插入额外的元素，因为[`.html()`](http://api.jquery.com/html)返回元素的 HTML 格式的内容，不包括元素本身。

基于 jQuery 缺乏实例化文本节点的内置方法，我认为 jQuery 的作者希望用户直接使用`document.createTextNode()`，如[之前的答案](https://stackoverflow.com/a/944456/429091)所示。

# apache-flex - 将 URL 作为参数传递

> ID：944438
> 
> 赞同：0
> 
> 时间：2009-06-03T12:25:53.290
> 
> 标签：apache-flex

```
 <mx:HTTPService id="addWeb" resultFormat="object" result="Added(event)" fault="faultWeb(event)" showBusyCursor="true" method="GET" url="http://localhost/search/populate.php" useProxy="false">
        <mx:request xmlns="">
            <urlWeb>{urlW.text}</urlWeb>
        </mx:request>
    </mx:HTTPService>

 <mx:Text id="query" x="10" y="425" text="Text" width="486" visible="false" height="30" fontWeight="bold" fontSize="16"/>
            <mx:Button x="772" y="424" label="Add" click="addWeb.send();"/>
            <mx:TextInput id="urlW" x="604" y="424" />
            <mx:Label x="513" y="426" text="Add website" /> 
```

我正在传递一些随机 url 作为参数，但我得到了这种错误。

```
[RPC Fault faultString="Error #1096" faultCode="Client.CouldNotDecode" faultDetail="null"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T16:55:44.727

```
<urlWeb>{urlW.text}</urlWeb> 
```

这在 Flex 解析请求节点时是无效的。您需要使用数组、对象、字符串、数字或 xml

```
<mx:String>{urlW.text}</mx:String> 
```

# c# - 这些操作码是做什么用的？

> ID：944443
> 
> 赞同：6
> 
> 时间：2009-06-03T12:28:01.787
> 
> 标签：c#, reflector, opcode

使用反射器我得到以下输出：

```
.method private hidebysig static class myModelTestarea.Foo Method() cil managed
{
  .maxstack 1
  .locals init ([0] class myModelTestarea.Foo CS$1$0000)
  L_0000: nop 
  L_0001: ldc.i4.0 
  L_0002: newarr object
  L_0007: call object myModelTestarea.Program::Resolve(object[])
  L_000c: castclass myModelTestarea.Foo
  L_0011: stloc.0 
  L_0012: br.s L_0014
  L_0014: ldloc.0 
  L_0015: ret 
} 
```

为了

```
private static Foo Method()
{
  return (Foo)Resolve();
}

private static object Resolve( params object[] args )
{
  return new Foo();
} 
```

第 11-14 行是做什么的？我调用一个函数并得到一个结果（第 7 行）。我将结果转换为正确的返回类型（c 行） - 为什么不立即返回？

不知何故，转换后的结果被存储为一个局部变量——然后无条件跳转到下一行，再次加载局部变量。为什么？

在我看来，第 11-14 行和局部变量可以省略...？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-03T12:29:54.747

这看起来像一个 DEBUG 构建，它留下了额外的 IL 来帮助调试器。在 RELEASE 中再试一次，它应该看起来更干净，有优化等。

```
.method private hidebysig static class program/Foo Method() cil managed
{
    .maxstack 8
    L_0000: ldc.i4.0 
    L_0001: newarr object
    L_0006: call object program::Resolve(object[])
    L_000b: castclass program/Foo
    L_0010: ret 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-03T12:31:46.757

这是调试版本吗？为了调试器，它可能在那里。

我在其他地方也看到过类似的事情——不过它几乎总是无害的。不要忘记大部分优化是由 JIT 完成的，它可以很容易地注意到这样的事情。唯一的缺点是更多的 IL 向 JIT 提示不应该内联该方法。

# functional-programming - 什么是“无点”风格（在函数式编程中）？

> ID：944446
> 
> 赞同：122
> 
> 时间：2009-06-03T12:28:18.870
> 
> 标签：functional-programming, coding-style, scheme, pointfree

我最近注意到的一个短语是“无点”风格的概念......

首先，有[这个](https://stackoverflow.com/questions/943405/point-free-style-with-objects-records-in-f)问题，[还有](https://stackoverflow.com/questions/907306/confusion-about-currying-and-point-free-style-in-haskell)这个问题。

然后，我发现他们[在这里](http://lambda-the-ultimate.org/node/3331)提到“另一个可能值得讨论的话题是作者不喜欢无点风格。”

什么是“无点”风格？有人可以给出简明的解释吗？它与“自动”柯里化有关吗？

为了了解我的水平 - 我一直在自学 Scheme，并编写了一个简单的 Scheme 解释器......我了解“隐式”柯里化是什么，但我不知道任何 Haskell 或 ML。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-06-03T12:38:22.703

只需查看[Wikipedia 文章](http://en.wikipedia.org/wiki/Point-free_programming)即可获得您的定义：

> 隐式编程（无点编程）是一种编程范式，其中函数定义不包括有关其参数的信息，使用组合器和函数组合 [...] 而不是变量。

哈斯克尔示例：

常规（您明确指定参数）：

```
sum (x:xs) = x + (sum xs)
sum [] = 0 
```

无点（`sum`没有任何明确的参数 - 它只是一个`+`以 0 开头的折叠）：

```
 sum = foldr (+) 0 
```

或者更简单：`g(x) = f(x)`你可以只写. 而不是`g = f`.

所以是的：它与柯里化（或函数组合之类的操作）密切相关。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2009-06-03T12:46:49.347

无点风格意味着被定义的函数的参数没有明确提及，该函数是通过函数组合来定义的。

如果你有两个功能，比如

```
square :: a -> a
square x = x*x

inc :: a -> a
inc x = x+1 
```

如果你想将这两个函数组合成一个计算函数`x*x+1`，你可以像这样定义它“point-full”：

```
f :: a -> a
f x = inc (square x) 
```

无点替代方案是不谈论论点`x`：

```
f :: a -> a
f = inc . square 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-04-25T20:12:24.040

JavaScript 示例：

```
//not pointfree cause we receive args
var initials = function(name) {
  return name.split(' ').map(compose(toUpperCase, head)).join('. ');
};

const compose = (...fns) => (...args) => fns.reduceRight((res, fn) => [fn.call(null, ...res)], args)[0];
const join = m => m.join();

//pointfree
var initials = compose(join('. '), map(compose(toUpperCase, head)), split(' '));

initials("hunter stockton thompson");
// 'H. S. T' 
```

[**参考**](https://github.com/MostlyAdequate/mostly-adequate-guide/blob/master/ch05.md#pointfree)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-06-06T14:14:31.227

无点风格意味着代码没有明确提及它的参数，即使它们存在并且正在使用。

由于函数的工作方式，这在 Haskell 中有效。

例如：

```
myTake = take 
```

返回一个带有一个参数的函数，因此没有理由显式键入参数，除非您也想要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-08T07:31:43.487

尽管代码清楚地说明了无点的想法（即没有参数），但我无法使提供 Brunno 的 javascript 示例工作。所以我使用[ramda.js](https://ramdajs.com/)来提供另一个例子。

假设我需要找出句子中最长的单词，给定一个字符串，`"Lorem ipsum dolor sit amet consectetur adipiscing elit"`我需要输出类似`{ word: 'consectetur', length: 11 }`

如果我使用纯 JS 样式代码，我将使用 map 和 reduce 函数像这样编写代码

```
let str = 'Lorem ipsum dolor sit amet consectetur adipiscing elit'
let strArray = str.split(' ').map((item) => ({ word: item, length: item.length }))
let longest = strArray.reduce(
    (max, cur) => (cur.length > max.length ? cur : max), 
    strArray[0])
console.log(longest) 
```

使用 ramda，我仍然使用 map 和 reduce，但我会像这样编写代码

```
const R = require('ramda')
let longest = R.pipe(
  R.split(' '),
  R.map((item) => ({ word: item, length: item.length })),
  R.reduce((max, cur) => (max.length > cur.length ? max : cur), { length: 0 })
)
let tmp = longest(str)
console.log(tmp) 
```

我会争辩说，我的 ramda 代码的要点是将我的函数链接在一起的管道，它使我的目的更加清晰。无需创建临时变量`strArray`是一个奖励（如果我在管道中有超过 3 个步骤，那么它将成为一个真正的奖励）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-02-22T00:12:25.730

这是 TypeScript 中的一个示例，没有任何其他库：

```
interface Transaction {
  amount: number;
}

class Test {
  public getPositiveNumbers(transactions: Transaction[]) {
    return transactions.filter(this.isPositive);

    //return transactions.filter((transaction: {amount: number} => transaction.amount > 0));
  }

  public getBigNumbers(transactions: Transaction[]) {
    // point-free
    return transactions.filter(this.moreThan(10));

    // not point-free
    // return transactions.filter((transaction: any) => transaction.amount > 10);
  }

  private isPositive(transaction: Transaction) {
    return transactions.amount > 0;
  }

  private moreThan(amount: number) {
    return (transaction: Transaction) => {
      return transactions.amount > amount;
    }
  }
} 
```

您可以看到无点样式更“流畅”且更易于阅读。

# ruby - 可以从外部 ruby 类中获取 Rdoc 条目吗？

> ID：944453
> 
> 赞同：1
> 
> 时间：2009-06-03T12:29:57.307
> 
> 标签：ruby, rdoc

如果我在对象空间中有一堆类并且有一个也从对象空间生成的方法列表，是否有可能获取单个方法的 rdoc 文档？

例子：

文件：foo.rb

```
# Class rdoc information here
class foo

  # defining bar here, just prints hello world
  def bar
   puts "hello world"
  end
end 
```

文件：baz.rb

```
require 'foo.rb'
puts "I want to print out the rdoc portion of method bar here" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T17:13:10.430

我有一个全面的工作，但如果有人有更好的解决方案，请告诉我。

基本上，我的 foo.rb 脚本仅在生成一些打包元数据时才会执行。这在每个编译周期执行一次。我在我的 makefile 中添加了一个额外的目标，它保留了一个本地 ri 文档，然后在我的 foo.rb 脚本中我只是像这样调用 ri：

文件：baz.rb

```
myClassName = "foo" 
myMethoedName = "bar"
caseDoc=`ri -f simple -d ../.ri #{myClassName}##{myMethodName} -T`
puts caseDoc 
```

# javascript - 仅从 Jquery ajax 获取文件的一部分

> ID：944465
> 
> 赞同：0
> 
> 时间：2009-06-03T12:32:10.843
> 
> 标签：javascript, jquery, ajax

我有一些非常简单的示例代码，如下所示：

```
$.ajax({
  url: 'demo2.htm',
  success: function(loadeddata){
    $("#loaded_data").after(loadeddata);
    alert('success');
  },
  error: function(){
    alert('failure');
  }
}); 
```

加载的数据当前返回所有内容。我需要做的是只获取一个特定的 div，然后将其添加到#loaded_data。

我怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T12:34:36.687

这是 jQuery 在内部执行的方式：

```
$("<div/>").append(loadeddata).find('#mydiv'); 
```

如果您希望在 HTML 中包含 SCRIPT 标记，则应将其放入以避免 IE 中出现任何“Permission Denied”错误：

```
$("<div/>").append(loadeddata.replace(/<script(.|\s)*?\/script>/g, "")).find('#mydiv'); 
```

**编辑**：

你错过了应该发生的事情的重点。

通过执行`$("<div/>").append(...);`jQuery 创建一个虚拟对象`<div>`，并通过将 HTML 插入到`<div>`. 完成后，我们可以找到我们想要的 DIV，并返回 HTML。所以我应该放在上面的更合适的代码示例如下所示：

```
var html = $("<div/>").append(loadeddata).find('#mydiv').html();
$('#whereIwantIt').html(html); 
```

正如您在链接中看到的那样，[这可以满足您的需求](http://jsbin.com/uzuce)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T16:26:18.540

好的，这是一个带有 find 的新 pastebin，并且正如 Paolo 提到的那样修复了脚本问题。

[http://jsbin.com/esoze/edit](http://jsbin.com/esoze/edit)

如您所见，嵌入了页面的整个 HTML，而不仅仅是指定的元素。

# asp.net-mvc - 如何在 VB.NET 中定义 ActionLink？

> ID：944468
> 
> 赞同：0
> 
> 时间：2009-06-03T12:33:12.010
> 
> 标签：asp.net-mvc, vb.net, html.actionlink

[ActionLinks](http://aspalliance.com/ArticleFiles/1525/image020.jpg) 此图像显示了定义 Actionlinks 的类型安全方法，如何在 VB.NET 中定义它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T12:47:59.360

```
<%= Html.ActionLink(Of SearchController)("Search Drinks", Function(s) s.Results("Beverages",2)) %> 
```

# javascript - Jquery“THIS”.myFuntionName在ajax成功时不可用？但之前还可以

> ID：944470
> 
> 赞同：0
> 
> 时间：2009-06-03T12:33:28.640
> 
> 标签：javascript, jquery

谁能帮忙，我对关键字 this.. 有问题。在输入 ajax 调用之前它是可用的，但是在输入成功时。我的“this”可用，但不包含相同的信息，即我希望调用的方法。这个例子说明了我的意思。

我将不胜感激，this.isoDateReviver 在执行 ajax 之前可用.. 然后当成功时.. this.isoDateReiver 未定义

```
var data = new Object();
data.year = this.today = new Date().getFullYear();

this.isoDateReviver("yes", "yes");                //// THIS WORKS HERE

$.ajax({
    type: "POST",
    url: "MyService.aspx/GetHolidays",
    data: JSON.stringify(data),
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        var holidays = JSON.parse(msg.d,
            this.isoDateReviver);             // THIS DOES NOT WORK its undefined

        Calendar.initalizeHolidays(holidays);
    },
    error: function (msg) {
        alert(error);
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T12:36:01.240

这是因为成功函数在不同的范围内执行。

你需要做：

```
var me = this;

$.ajax({
    // etc
success: function(msg) {
    var holidays = JSON.parse(msg.d, me.isoDateReviver); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T12:36:18.650

见：[http ://www.alistapart.com/articles/getoutbindingsituations](http://www.alistapart.com/articles/getoutbindingsituations)

成功调用的函数与上一次调用 this.isoDateReceiver 的上下文不同。

# sifr - 透明背景 - 不完全透明

> ID：944472
> 
> 赞同：0
> 
> 时间：2009-06-03T12:33:39.513
> 
> 标签：sifr

我已经在我的网站上实施了 sIFR 3，但我遇到了一个奇怪的问题。

标题覆盖在渐变的背景图像上。此图像在 CSS 中定义。如下图所示，sIFR 覆盖的区域颜色略有不同。

~~[标题图片](http://www.mhsc.nhs.uk/sifrheader.jpg)~~（死链接）

替换的代码如下：

```
sIFR.replace(Amasis_MT_font, {
    selector: 'h1.flashHeader',
    css: [
    '.sIFR-root { font-weight:normal; color:#507A9A; leading:-10; width:500px }',
    'a { text-decoration: none }',
    'a:link { color: #507A9A }',
    'a:hover { color: #003366 }'
    ],
    wmode: 'transparent'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T22:12:32.043

可能是您的显示器设置为 16 位颜色？

# c++ - 如何在 C++ 应用程序中构建原生 YouTube 播放器？

> ID：944473
> 
> 赞同：0
> 
> 时间：2009-06-03T12:33:45.473
> 
> 标签：c++, visual-c++, youtube

我想在我的 Visual C++ 应用程序中构建一个原生 YouTube 播放器，就像 iPhone 中的那个一样。

有人有提示吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T12:40:42.650

确保您已`ffdshow codecs`安装，然后您可以使用[DirectShow播放 Flash 视频 (](http://msdn.microsoft.com/en-us/library/dd375454(VS.85).aspx) [FLV](http://www.adobe.com/devnet/flv/) ) 。

# c++ - 如何在不取消引用的情况下调用指向函数的指针？

> ID：944479
> 
> 赞同：1
> 
> 时间：2009-06-03T12:35:12.333
> 
> 标签：c++, function-pointers, typedef

我在 Py++ 生成的 C++ 程序中有一个奇怪的 typedef 语句。

```
double radius(int);  // function to be wrapped
typedef double (*radius_function_type)(int);    
bp::def("radius", radius_function_type(&radius));   // bp::def is a function for wrapping 
```

到目前为止，我发现上面的 typedef 语句不是我们大多数人都熟悉的类型，

```
typedef complex_type simple_alias; 
```

相反，它是一种声明指向以 int 作为参数并返回 double （与原型相同）的函数的指针的方法。所以我现在的问题是，如何使用函数地址作为参数调用**指向**函数的指针**（没有取消引用） ？**这也与原型不匹配。有人请解释！

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-03T12:47:07.647

它没有声明一个函数指针变量，而是一个名为 typedef 的函数指针`radius_function_type`。`radius_function_type(&radius)`只是函数指针本身的（冗余）强制转换。（一元`&`地址运算符也是多余的；对于一个函数来说，`radius`和`&radius`是一样的。）

在低层次上，调用函数只是根据底层调用约定（通常在堆栈上）将参数放置在某处，然后跳转到内存地址。因此，如果编译器知道函数指针类型（函数签名）和指针值本身，则编译器可以仅使用指针调用函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T12:51:39.307

你的问题令人困惑。你问这是做什么的：

```
radius_function_type(&radius)" 
```

这只是一个 C++ 类型转换，有点像：

```
radius (int (42)); 
```

但由于 radius 已经是 radius_function_type 类型，所以你可以很容易地做到：

```
bp::def("radius", radius); 
```

但由于这是由 Py++ 生成的代码，因此可能对输出要格外小心。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T12:38:49.533

嗯......这有点类似于在 C 和 C++ 中数组与指针的关系。函数的名称基本上也是一个指针。从这个角度来看，给定一个定义也就不足为奇了：

```
int foo(int a, int b)
{
  return a + b;
} 
```

您可以通过作为函数名称的指针直接进行调用：

```
foo(1, 2); 
```

或者通过将该值存储在一个单独的变量中，该变量必须声明为一个指针：

```
int (*pointer)(int, int) = foo;
pointer(1, 2); 
```

在这种情况下，我们可以直接通过指针变量调用，也不需要通过写显式地“获取”函数的地址`&foo`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T12:46:47.227

取消引用（以您认为的方式）函数的指针意味着：访问 CODE 内存，就像它是 DATA 内存一样。

函数指针不应该以这种方式被取消引用。相反，它被称为。

我会使用名称“取消引用”和“呼叫”。没关系。

无论如何：C 的设计方式使得函数名称标识符和变量保存函数的指针都具有相同的含义：CODE 内存的地址。它允许通过在标识符或变量上使用 call () 语法来跳转到该内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-03T12:55:56.520

函数指针基本上就是需要调用的函数的地址。要调用函数指针指向的函数，您可以将函数指针视为您希望调用的函数的名称。调用它本身的行为执行取消引用；不需要显式取消引用。

函数指针语法可能看起来像指针（带有 & 和 *）或者也可以省略。正如[@unwind](https://stackoverflow.com/questions/944479/how-come-pointer-to-a-function-be-called-without-dereferencing/944500#944500)已经指出的那样，它类似于如何处理数组，其中裸数组类似于指针，并且您可以选择在数组前面加上 & 来获取地址。

# visual-c++ - 如何在编译中使用 /NODEFAULTLIBS 选项？

> ID：944481
> 
> 赞同：8
> 
> 时间：2009-06-03T12:35:19.120
> 
> 标签：visual-c++, visual-studio-2005, conditional-compilation

我有一个解决方案资源管理器包含 2 个项目。对于我启用`/clr`的一个项目`/mdd`。对于父项目，我有`/mtd`并且没有 clr 支持。当我编译这个时，我得到两个链接器错误，包括以下一个：

**链接警告链接 4098：默认库可能与使用 /NODEFAULTLIBS 库的其他库冲突**

所以我的问题是如何`/NODEFAULTLIBS`在编译中使用。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-04T08:54:30.957

首先，如果可以的话，您需要确定是哪个库导致了冲突。链接警告是否告诉您任何信息？

然后您需要打开该项目的属性页，然后转到链接器 -> 命令行。在“其他选项”区域中，键入：

/NODEFAULTLIB:xxx.lib

其中 xxx.lib 是冲突库。但是，如果您无法确定它是哪个库，请尝试：

/NODEFAULTLIB

# c# - 如何获取当前用户的临时文件夹

> ID：944483
> 
> 赞同：421
> 
> 时间：2009-06-03T12:35:50.587
> 
> 标签：c#, .net, temporary-directory

目前我正在使用以下函数来获取当前用户的临时文件夹路径：

```
string tempPath = System.IO.Path.GetTempPath(); 
```

在某些机器上，它给了我当前用户的临时文件夹路径，例如：

> C:\Documents and Settings\administrator\Local Settings\Temp\

在某些机器上，它给了我系统临时文件夹路径，例如：

> C:\Windows\TEMP

MSDN 文档还说，上面的 API 返回当前系统的临时文件夹。

是否有任何其他可用的 API 可以为我提供当前用户的临时文件夹路径，如下所示：

> C:\Documents and Settings\administrator\Local Settings\Temp\

* * *

## 回答 #1

> 赞同：435
> 
> 时间：2009-06-03T17:26:44.610

`System.IO.Path.GetTempPath()`只是`GetTempPath(..)`Kernel32 中本地调用的包装器。

看看[http://msdn.microsoft.com/en-us/library/aa364992(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa364992%28VS.85%29.aspx)

从该页面复制：

> GetTempPath 函数按以下顺序检查环境变量是否存在，并使用找到的第一个路径：
> 
> *   TMP 环境变量指定的路径。
> *   TEMP 环境变量指定的路径。
> *   USERPROFILE 环境变量指定的路径。
> *   Windows 目录。

我并不完全清楚“Windows 目录”是指 windows 下的临时目录还是 windows 目录本身。将临时文件转储到 windows 目录本身听起来像是不受欢迎的情况，但谁知道呢。

因此，将该页面与您的帖子结合起来，我猜您的管理员用户的 TMP、TEMP 或 USERPROFILE 变量中的任何一个都指向 windows 路径，否则它们未设置并且它正在回退到 windows 临时路径。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2009-06-03T12:45:52.547

**不要**使用这个：

```
System.Environment.GetEnvironmentVariable("TEMP") 
```

环境变量可以被覆盖，所以`TEMP`变量不一定是目录。

正确的方法是`System.IO.Path.GetTempPath()`在接受的答案中使用。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-06-21T18:23:04.570

我有同样的要求——我们想把日志放在环境中应该存在的特定根目录中。

```
public static readonly string DefaultLogFilePath = Environment.GetFolderPath(Environment.SpecialFolder.UserProfile); 
```

如果我想将它与子目录结合起来，我应该能够使用`Path.Combine( ... )`.

该`GetFolderPath`方法具有特殊文件夹选项的重载，允许您控制是创建指定路径还是简单验证。

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2009-06-03T12:45:04.653

尝试

```
Environment.GetEnvironmentVariable("temp"); 
```

# c# - 在视图状态中访问变量的语法

> ID：944484
> 
> 赞同：0
> 
> 时间：2009-06-03T12:35:58.790
> 
> 标签：c#, asp.net

我想在回发之间保留一个变量，所以我编写了一个访问器将其放入视图状态。其中哪一种是访问它的最佳方式？还是有更好的选择？

选项1：

```
private int Status
{
    get
    {
        try
        {
            return (int)ViewState[@"__Status"];
        }
        catch
        {
            return 0;
        }
    }
    set
    {
        ViewState[@"__Status"] = value;
    }
} 
```

选项 2：

```
private int Status
{
    get
    {
        if (ViewState[@"__Status"] is int)
        {
            return (int)ViewState[@"__Status"];
        }
        else
        {
            return 0;
        }
    }
    set
    {
        ViewState[@"__Status"] = value;
    }
} 
```

谢谢

编辑：我正在使用 C# 2.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T12:45:13.593

这是我倾向于这样做的方式：

```
private int Status
{
  get { return (ViewState["MYSTATUS"] != null) ? (int)ViewState["MYSTATUS"] : 0; }
  set { ViewState["MYSTATUS"] = value; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T12:39:55.070

好吧，选项 2 不会编译，但我认为这是正确的方向。;-) 尽量不要为此使用异常。改为检查 ViewState 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T12:49:03.850

不完全是一个答案，假设 null 与 0 相同是否合理。为什么不使用`int?`和属性类型，那么我认为你可以这样做：

```
public int? MyProperty
{
    get
    {
        return ViewState["status"] as int?;

    }
    set
    {
        ViewState["status"] = value;
    }
} 
```

# wcf - wcf 服务的 msi 安装程序

> ID：944488
> 
> 赞同：0
> 
> 时间：2009-06-03T12:36:46.700
> 
> 标签：wcf, iis, windows-installer

是否可以创建一个 msi 安装程序来在 IIS 上托管 WCF 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T12:40:08.220

wcf 需要一个主机，无论是服务还是 IIS 站点，因此您应该使用服务安装程序或 Web 应用程序安装程序。

# java - 有没有去除无用 goto 的 Java 字节码优化器？

> ID：944492
> 
> 赞同：18
> 
> 时间：2009-06-03T12:37:34.717
> 
> 标签：java, bytecode, goto, jvm-hotspot, optimization

问题：我有一个方法可以编译成超过 8000 字节的 Java 字节码。HotSpot 有一个神奇的限制，使 JIT 不会为超过 8000 字节的方法启动。（是的，拥有一个巨大的方法是合理的。这是一个标记器循环。）该方法在一个库中，我不想要求该库的用户必须配置 HotSpot 才能停用魔法限制。

观察：反编译字节码表明 Eclipse Java 编译器生成了很多无意义的 goto。（javac 甚至更糟。）也就是说，有些 goto 只能通过跳转到达。显然，跳转到 goto 的跳转应该直接跳转到 goto 跳转的地方，并且 goto 应该被消除。

问题：是否有针对 Java 5 类文件的字节码优化器，它可以扁平化无意义的跳转链，然后删除不必要的 goto？

编辑：我的意思是这样的模式：

```
8698:   goto    8548
8701:   goto    0 
```

显然，第二个 goto 只能通过跳转到 8701 来达到，这也可能是直接跳转到 0。

在第二次调查中，这种可疑的模式更为常见：

```
4257:   if_icmpne   4263
4260:   goto    8704
4263:   aload_0 
```

显然，人们希望编译器将“不等于”比较反转为“相等”比较，跳转到 8704 并消除 goto。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T12:55:11.607

我感觉到你的痛苦。我不得不编写一个解析器，它有大约 5kloc 的 if(str.equals(...)) 代码。我按照 parse1、parse2 等的方式分解了几种方法。如果 parse1 没有产生解析的答案，则调用 parse2 等。这不一定是最佳实践，但它确实可以满足您的需要.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T12:49:50.527

一种编译超过 8000 字节的方法？有人看懂那个代码吗？是否可测试？尝试将其拆分为具有有意义名称的多个（私有？）方法，而不是使用优化器！

好的，也许有一些合法的大方法。但是很抱歉，问题中没有任何提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T12:57:13.243

如果您不使用调试符号（即 javac 中的 -g 标志）进行编译，是否会有所不同？这可能会使该方法低于魔法极限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T13:06:47.480

将方法重构为子方法是不可能的吗？无论如何，现代 JIT 都会内联这些调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T14:34:12.733

如果它是一个标记器循环，最好使用数据驱动的一组映射和一些适当的反射来做到这一点？

因此，您可以将标记匹配存储在一个结构中，该结构将它们映射到有关该标记的语法和实现相关函数的方法的数据。查找可以在结构上进行优化，避免大循环。

这引入了保持数据和实现同步的问题，但是您可以使用 doclet 或可能的注释从代码库生成数据。

在不确切知道您的大方法的作用的情况下，我们仅限于尝试以您认为最好的方式对其进行优化（这显然是不可能的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-30T12:29:46.290

如果您在课堂上运行字节码收缩器/混淆器，您的性能会提高吗？例如，yguard，proguard，...

也许您可以使用 asm 编写类文件后处理器，因为您的用例非常具体。

即使您删除所有无意义的 goto，这是否会使您处于魔法限制之下？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-30T12:48:19.217

[字节码库](http://java-source.net/open-source/bytecode-libraries)列表提到了[BCEL](http://jakarta.apache.org/bcel/)和[ASM](http://asm.ow2.org/)，我以前听说过，还有许多其他人在做各种各样的事情。

# python - 从 Python 守护进程执行 OS 命令

> ID：944501
> 
> 赞同：0
> 
> 时间：2009-06-03T12:39:03.777
> 
> 标签：python, bash, operating-system, command, handler

我有一个带有回调的 daemon.py。我应该如何让处理函数执行操作系统命令？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2009-06-03T12:40:34.320

当我前段时间学习 Python 时，我使用过：

```
import os
os.system('ls -lt') 
```

但似乎在 Python 3.x 中，推荐使用[命令](http://docs.python.org/library/commands.html)或[os.popen()](http://docs.python.org/library/os.html#os.popen)

# html - 一个 iframe，在一个锚标记中。是的，我知道。IE渲染的问题

> ID：944502
> 
> 赞同：0
> 
> 时间：2009-06-03T12:39:10.220
> 
> 标签：html, css, iframe, anchor

这一切都始于我想要一种隐藏某些内容的方法，除非有要求。我已经在一些工具提示中使用了 link:hover 方法，并且想尝试将它用于此目的。

我正在避免使用 JS，因为我的网站的性质适合在手机上使用——即使在支持 JS 的地方，它的加载也是显而易见的，并且当它失败时，会使网站使用起来令人沮丧。

因此，我在带有时间戳生成 url 的锚标签中的 div 标签中有一个 iframe。实际上隐藏 iframe 导致它无法在 IE 中加载，所以我将它的高度设置为 0，直到它处于“已访问”状态。本来我只是用了div，但是链接属性都带了过来，所以引入了frame。在 FF 中，这按预期工作（为什么要将链接状态应用于链接不驻留的框架的元素？（当然，进一步的问题是，“为什么首先将框架包装在锚标签中？ ?” 足够有效））但在 IE 中，“链接”状态会部分地干扰框架的功能。

光标是正常的，但是当您尝试单击框架中的任何内容时，常规的 url 指示指针会短暂出现。框架内的链接工作正常——但形式很棘手。您只能在框架内第二次单击时在表单字段中设置插入符号。第一次点击似乎将焦点放在了框架中；之后点击表单字段就足够了。最后需要注意的是，在 iframe 中不能用鼠标选择任何内容，包括用户在表单字段中输入的任何文本。

我玩过 z-indexes 无济于事，并且还尝试在访问时将链接本身的可见性设置为隐藏（这有效，但并没有杀死 I'm-still-going-to-pretend-I IE 中的“m-a-link”行为。

想法？

相关代码：html：

```
<a id="t-l" href="#<?php
echo time();
?>a" class=hidebox>save/share<div><iframe src="addtoany.php?pageID=1962460927" frameborder=0></iframe></div></a> 
```

CSS：

```
.hidebox {}
.hidebox iframe {height: 0px; width: 300px; background-color:#393242;}
.hidebox:visited {}
.hidebox:visited div {width:300px; height:400px; padding: 10px 0px 0px 10px;}
.hidebox:visited iframe {height: 400px; width: 285px; border: 0px solid #393242; margin: 0px auto 0px auto;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-13T17:34:02.843

您不应该将块元素嵌套在内联元素中并使用 css 进行 dom 操作逻辑。为什么不使用 javascript 解决方案？这将允许您拥有正确结构化的文档和所需的功能，而无需依赖浏览器的怪癖。

# iphone - iPhone 应用程序的 XML 序列化库

> ID：944509
> 
> 赞同：11
> 
> 时间：2009-06-03T12:40:39.873
> 
> 标签：iphone, objective-c, xml, serialization

Apple 提供了 NSArchiver 和 NSUnachriver 用于对象序列化/反序列化，但这不能处理任何自定义 xml 架构。因此，必须手动使用任何自定义 xml 模式的数据填充对象结构。由于 iPhone 开发者社区正在迅速发展，许多新手程序员都对处理可用的 xml 解析可能性感到绝望。

iPhone SDK 只提供 NSXmlParser 用于 xml 解析，这对于读取 xml 文件的某些部分更有用，而不是填充整个对象结构，这真的很痛苦。

另一种可能性是著名的 libxml 库，它是用 ANSI C 编写的 - 对于开始使用 Objective-c 进行编程并且以前从未学过正确 C 的人来说并不容易使用。事件有很多可用的包装器，处理 xml 对新手来说可能是一件痛苦的事。

在这里，我的想法发生了。自动填充对象结构的 XmlSerializer 库可以使它更容易，并提高许多程序员的应用程序质量。我的想法应该是这样的：

**xml文件**

```
<Test name="Michael" uid="28">
    <Adress street="AlphaBetaGammastrasse 1" city="Zürich" postCode="8000" />

  <Hobbies>
    <Hobby describtion="blabla"/>
    <Hobby describtion="blupblup"/>
  </Hobbies>
</Test> 
```

**要填写的课程**

```
@interface Test : NSObject {
    NSString *name;
    Adress *adress;
    NSArray *hobbies;
    int uid;
}
@property (nonatomic, copy) NSString *name;
@property (nonatomic, retain) Adress *adress;
@property (nonatomic, retain) NSArray *hobbies;
@property (nonatomic, readwrite) int uid;
@end

@interface Adress : NSObject {
    NSString *street;
    NSString *city;
    int postCode;
}
@property (nonatomic, copy) NSString *street;
@property (nonatomic, copy) NSString *city;
@property (nonatomic, readwrite) int postCode;
@end 
```

**xml 序列化程序应该如何工作**

```
NSError *error = nil;
XMLSerializer *serializer = [[XMLSerializer alloc] init];
NSData *data = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"TestFile" ofType:@"xml"]];
Test *test = [serializer deserializeWithData:data error:&error]; 
```

填充对象结构只需要一行代码：

```
Test *test = [serializer deserializeWithData:data error:&error]; 
```

这将非常容易使用，任何新手程序员都可以使用它。对于更高级的使用，序列化器可以是可配置的。

你认为，这对 iPhone 和 OSX 应用程序来说是一个有用且流行的库吗？

编辑：您可以在[此处](http://code.google.com/p/orxml/)查看该项目，但距离发布还很遥远。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-09T09:17:02.837

NSKeyedArchiver 的工作原理正是因为它不会尝试映射到 XML 模式。很多很多 XML 模式的设计都很糟糕（即它们将内存中的对象结构转换为外部表示格式）。关键问题是文档的设计应该从文档的角度来看是有意义的，然后需要映射到您想要的对象的任何内存布局。是否见过带有大量“refid”属性的 XML 文档引用文档的其他部分？这些通常是从关系数据库音译而来的，关系数据库只是在结果集上加上尖括号。

因此，从假设 XML 文档与其代码表示之间的一对一映射开始，除了最简单的情况外，几乎注定要失败。试想一下，如果 HTML 是围绕用于在第一个浏览器中实例化文档的 C++ 对象设计的，那么我们今天的 HTML 会是什么样子……（嗯，更像是 Objective-C，但是嘿……）

关于 NSKeyedArchiver 的要点是，您可以在不破坏加载旧版本的能力的情况下改进数据结构。使用某种自动化的 instance-var-to-element 映射（正确地）做到这一点非常困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-18T19:19:45.060

我已经开始了一个类似的开源项目。我将其命名为 SAMIXOS。您可以访问此页面并尝试一下。它处于初始开发阶段。它的工作原理与 Enyra 所要求的类似。

很快我将提供一个示例代码。

[http://sourceforge.net/projects/samixos/](http://sourceforge.net/projects/samixos/)

萨米人

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-28T19:29:35.117

这是一个非常好的主意，在实现方面我会通过实现 NSXMLArchiver 和 NSXMLUnarchiver 作为 NSCoder 的子类来实现。这样，任何符合 NSCoding 协议的类都可以轻松地与 XML 进行序列化。

序列化为 XML 时的一个性能损失是将原始值作为属性，因为您无法保证对象请求数据进行编码的顺序。因此，如果属性是您想要的，那么它在内存缓冲区中将会非常大。但这将是一个有趣的练习。

至于受欢迎程度如何？我认为不是那么受欢迎。用例太小了。

*   设备到设备 - 简单地使用 NSKeyedArchiver 更容易，更紧凑。
*   设备到新服务器 - 新服务器也必须实现相同的方案，序列化为 Java、C# 或其他。
*   设备到现有服务器 - XML 格式已经固定，而且很可能不接近这个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-10-08T18:07:36.483

我打开了一个相关的开源项目，[适用于 iOS 的 XML 流编写器](http://code.google.com/p/xswi/)：

*   用 Objective-C 编写，单个 .h。和 .m 文件
*   一个 @protocol 用于命名空间支持，一个用于不支持

例子：

```
// allocate serializer
XMLWriter* xmlWriter = [[XMLWriter alloc]init];

// start writing XML elements
[xmlWriter writeStartElement:@"Root"];
[xmlWriter writeCharacters:@"Text content for root element"];
[xmlWriter writeEndElement];

// get the resulting XML string
NSString* xml = [xmlWriter toString]; 
```

这将生成以下 XML 字符串：

```
<Root>Text content for root element</Root> 
```

以我的经验，用于将对象从一个模型（内存中的对象）映射到另一个模型（某些 XML 模式）的经济高效的工具并不存在，因为仍然必须以某种方式表达逻辑。您最好使用您熟悉的工具（代码！？）来完成工作。

但是如果你坚持使用这样的工具，那么要走的路就是让你的对象模型和 XML 模型一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-10T17:08:32.400

我一直在努力满足该领域的需求，并认为这将是一个好主意。我不得不欺负我的 .net 服务来返回 JSON 以便在 iPhone 上轻松使用。一个像样的序列化库会很棒。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-09-08T15:46:55.680

您所描述的内容隐藏在[ObjectiveResource](http://github.com/yfactorial/objectiveresource/tree/1.1) [实现](http://github.com/lgalabru/objectiveresource/blob/cb12c9772314088c26e66c921ae17754f9d9b89b/src/Classes/NSObject+ObjectiveResource.m)中，它同时支持 JSON 和 XML。分叉应该很容易，并通过丢弃所有连接管理将其缩小到仅解析。

# security - MSDTC 是否存在任何固有的安全风险？

> ID：944511
> 
> 赞同：2
> 
> 时间：2009-06-03T12:41:22.197
> 
> 标签：security, msdtc

是否存在与启用 MSDTC 相关的一般安全风险？

我的一位团队成员告诉我，启用它存在安全风险，但我想知道它们是什么，如果有的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-16T15:08:15.213

^(我在阅读 MSDTC 时遇到了这个问题。我知道它已经*很*老了，但我认为它应该为未来的读者提供一个答案。)

* * *

### 这完全取决于配置和您真正需要的东西。

与大多数软件一样，MSDTC 需要正确配置以将成功利用的风险降至最低。虽然我通常不会称其为不安全，[但已检测到漏洞](https://support.microsoft.com/en-us/kb/902400)，因此在积极使用 MSDTC 时需要考虑一些方面。

如果您的系统需要非常高的安全级别，那么完全禁用 DTC 并不是一个坏选择。但是为了能够利用 DTC 功能，您可能需要启用它的某些部分。有关您可以做什么的更多信息，Microsoft 提供了一组有关[DTC 安全注意事项的 MSDN 页面以及](https://msdn.microsoft.com/en-us/library/ms680682(v=vs.85).aspx)[MS Technet](https://technet.microsoft.com/en-us/library/cc731495.aspx)上的一些最新文章。

MSDTC 自 Windows 2000 以来一直存在，因此很多人（尤其是 Microsoft 的人）能够探索它并建立最佳实践。只要您的系统已完全修补，信任 DTC 是合理的。

**进一步阅读： Ajit Yadav** [使用不安全 RPC](https://blogs.msdn.microsoft.com/ajit/2009/09/09/potential-risks-of-using-unsecure-rpc-no-authentication-required-setting-in-msdtc-security-configuration/)的潜在风险（在 MSDN 博客上，您应该查看他的其他帖子）。

# c# - 将 webresponse 流放入 iframe - 麻烦

> ID：944513
> 
> 赞同：2
> 
> 时间：2009-06-03T12:41:45.597
> 
> 标签：c#, asp.net

嘿再次stackoverflowers

我正在从旧的 ASP（在 VBScript 中）迁移一个网站，并且我必须使用 iFrame 来确保旧的东西在新容器中工作。

在 aspx 页面上，我有一个带有 runat="server" 属性的 iFrame，以使其在代码隐藏文件中可用。

```
<iframe id="frmLoader" runat="server" scrolling="auto" width="100%" height="600px"></iframe> 
```

现在的问题是，要获得某些功能，我必须 POST 到页面（来自旧站点）以使其呈现不同的方式，从而提供对 POST 的响应。

以下代码驻留在 Page_Load 中，当然参数在 postData 对象中

```
byte[] encData = new ASCIIEncoding().GetBytes(postData);

req.Method = "POST";
req.ContentType = "application/x-www-form-urlencoded";
req.ContentLength = encData.Length;

Stream dataStream = req.GetRequestStream();
dataStream.Write(encData, 0, encData.Length);
dataStream.Flush();
dataStream.Close();

WebResponse res = req.GetResponse();
StreamReader sr = new StreamReader(res.GetResponseStream());
string s = sr.ReadToEnd();
frmLoader.InnerHtml = s; 
```

这里的痛苦是我似乎无法将字符串渲染到 iframe 中。通过调试，我检查了是否应该出现某些东西并且应该出现，但它没有：p

有人知道我如何将字符串解析到 iframe 中吗？

此外，当触发 iframe 中的功能时，页面应该保留在那里，并响应来自我一直在寻找的原始站点（旧 asp）的其他帖子，但没有找到答案。

* * *

创建一个处理程序意味着我必须为我希望使用的每个旧页面创建一个自定义处理程序？

我在深入的网络开发方面没有那么有经验:)

在旧的 ASP 中，以前的开发人员将很多功能放在一个页面中，通过使用 post 消息，我可以调用这些函数，每次呈现不同的页面。

可以像您所说的那样构建处理程序以接受一堆参数来改变帖子吗？

编辑：

我刚刚注意到这里的另一个问题。处理程序无权访问数据所在的会话以发布我需要的帖子。每个动作都有不同的帖子...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T12:47:27.037

您是否手动尝试过？尝试以下操作：

```
<iframe>text</iframe> 
```

它是如何在浏览器中显示的？

这是因为 iframe 不能那样工作。像 img 标签一样，它需要一个“src”属性来说明内容的来源。

您可以创建一个 .ashx 文件 (HttpHandler)，并让它执行 POST 并返回结果。您的 iframe 将是`<iframe src="yourHandler.ashx"/>`.

# asp.net - Asp.NET 论坛和博客共享会员

> ID：944514
> 
> 赞同：3
> 
> 时间：2009-06-03T12:41:46.643
> 
> 标签：asp.net, asp.net-mvc, asp.net-membership, blogs, forum

我正在寻找在新网站上创建博客和论坛。我希望用户注册以在论坛上发帖并在博客上发表评论以及拥有自己的公共个人资料页面。

我有使用 BlogEngine.NET 的经验，所以希望使用它。我目前没有使用 .NET 论坛软件的经验，所以我正在研究这些选项。

这会很难设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T12:45:12.347

我不认为它会很难设置，特别是如果您设法找到一个使用会员提供程序和 BlogEngine.NET 的 ASP.NET 论坛。这样，您就不必尝试将某些东西装配在一起来使用您已有的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-04T03:57:31.103

ASP.NET Membership API 使这变得非常简单。您需要做的就是让博客和论坛都使用相同的 Membership Provider 并连接到相同的数据存储（很可能是 SQL 数据库），并且两个应用程序将使用相同的登录名和密码。

但是，如果您想提供“单点登录”，以便他们在从论坛导航到博客时不需要重新输入密码，那么您需要在相同的站点/应用程序。

就 BlogEngine.NET 而言；这确实是构建网站的绝佳起点。博客和会员资格提供程序已经存在，因此您需要做的就是添加论坛功能。

BlogEngine.NET 并没有真正为用户使用其自定义成员资格提供程序在网站上注册提供完整的支持，但是调整使其工作所需的内容非常简单。不久前，我在[http://communitycodingcontest.org](http://communitycodingcontest.org)网站上这样做了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-05-07T11:53:05.687

ASP.NET Fourms 有几个选项。

## 另一个 .NET 论坛

[http://www.yetanotherforum.net/](http://www.yetanotherforum.net/)

## 吉比特

[http://www.jitbit.com/asp-net-forum/](http://www.jitbit.com/asp-net-forum/)

## 点网核弹

[http://www.dotnetnuke.com/](http://www.dotnetnuke.com/)

## 开放论坛 (MVC)

[http://openforum.codeplex.com/](http://openforum.codeplex.com/)

# c# - 字符串中的字符串 例如：pie = "He said "hi"" - C#

> ID：944515
> 
> 赞同：6
> 
> 时间：2009-06-03T12:41:48.967
> 
> 标签：c#, string, escaping

在带有 C# 的 Visual Studio 中，如何在这样的字符串中声明一个字符串？我看到了一些 Stack Overflow 页面，例如“Java string inside string to string”，但不认为其中任何一个与我的问题相同。

基本上如果我有

```
"<?xml version="1.0" encoding="UTF-8"standalone="yes" ?>" 
```

如何在我的代码中将它或类似的东西声明为字符串？有人建议我在 ""1.0"" 之类的东西上加双引号，但我无法让它发挥作用。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-06-03T12:43:17.310

要么像这样转义双引号：

```
"<?xml version=\"1.0\" encoding=\"UTF-8\"standalone=\"yes\" ?>" 
```

或使用逐字字符串（注意字符串前面的前导**@符号），如下所示：**

```
@"<?xml version=""1.0"" encoding=""UTF-8""standalone=""yes"" ?>" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-03T12:43:34.987

任何一个：

```
@"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes"" ?>" 
```

或者

```
"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?>" 
```

或更简单地说；使用单引号！

```
"<?xml version='1.0' encoding='UTF-8' standalone='yes' ?>" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T12:43:43.660

```
String myString = "<?xml version=\"1.0\" encoding=\"UTF-8\"standalone=\"yes\" ?>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T12:43:00.133

尝试这个：

```
string myString = @"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes"" ?>" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T12:43:48.433

您可以转义引号：http: [//blogs.msdn.com/csharpfaq/archive/2004/03/12/88415.aspx](http://blogs.msdn.com/csharpfaq/archive/2004/03/12/88415.aspx)。

# string - C++ 中最常用的字符串类型是什么以及如何在它们之间进行转换？

> ID：944516
> 
> 赞同：4
> 
> 时间：2009-06-03T12:41:53.007
> 
> 标签：string, visual-c++, types

或者 下次 C++ 编译器扭动你的手臂在 2 种任意字符串类型之间转换只是为了惹你生气时，如何不杀死自己或某人？

由于我习惯于 VB6、C#、Ruby 进行字符串操作，因此我很难用 C++ 进行编码。但是现在我花了 30 多分钟试图将一个包含 2 个 guid 和一个字符串的字符串记录到调试窗口中......而且它并没有变得更容易而且我已经遇到了`RPC_WSTR`，`std::wstring`并且`LPCWSTR`

是否有简单（或任何）规则来了解它们之间的转换？还是只有经过多年的折磨才会出现？

基本上，我正在寻找标准 API 和特定于 MS/Visual C++ 库中最常用的字符串类型；下次怎么办，我明白了

```
Error   8   error C2664: 'OutputDebugStringW' : cannot convert parameter 1 from 'std::wstring' to 'LPCWSTR' 
```

**更新**：我修复了 ^^^^ 编译错误。我正在寻找一个更全球性的答案，而不是针对我作为示例列出的特定问题的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-03T12:53:29.270

有两种内置的字符串类型：

*   C++ 字符串使用 std::string 类（std::wstring 用于宽字符）
*   C 风格的字符串是 const char 指针 const char*) (or `const wchar_t*`)

两者都可以在 C++ 代码中使用。大多数 API，包括 Windows，都是用 C 编写的，因此它们使用 char 指针而不是 std::string 类。

Microsoft 进一步将这些指针隐藏在许多宏后面。

LPCWSTR 是一个*指向 Const Wide String 的长指针*，或者换句话说，是一个`const wchar_t*`。

LPSTR 是一个*指向 String 的长指针*，或者换句话说，是一个`char*`（不是 const）。

他们还有一些，但一旦你知道了前几个，他们应该很容易猜到。它们还具有 *TSTR 变体，其中 T 用于指示这可能是常规字符或宽字符，具体取决于项目中是否启用了 UNICODE。如果定义了 UNICODE，则 LPCTSTR 解析为 LPCWSTR，否则解析为 LPCSTR。

所以真的，当使用字符串时，你只需要知道我在顶部列出的两种类型。其余的只是 char 指针版本的各种变体的宏。

从 char 指针转换为字符串很简单：

```
const char* cstr = "hello world";
std::string cppstr = cstr; 
```

而另一种方式并不多：

```
std::string cppstr("hello world");
const char* cstr = cppstr.c_str(); 
```

也就是说，`std::string`将 C 风格的字符串作为构造函数中的参数。它有一个`c_str()`返回 C 风格字符串的成员函数。

一些常用的库定义了自己的字符串类型，在这些情况下，您必须检查文档以了解它们如何与“正确的”字符串类进行互操作。

您通常应该更喜欢 C++`std::string`类，因为与 char 指针不同，它们*表现*为字符串。例如：

```
std:string a = "hello ";
std:string b = "world";
std:string c = a + b; // c now contains "hello world"

const char* a = "hello ";
const char* b = "world";
const char* c = a + b; // error, you can't add two pointers

std:string a = "hello worl";
char b = 'd';
std:string c = a + b; // c now contains "hello world"

const char* a = "hello worl";
char b = 'd';
const char* c = a + b; // Doesn't cause an error, but won't do what you expect either. the char 'd' is converted to an int, and added to the pointer `a`. You're doing pointer arithmetic rather than string manipulation. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T12:45:50.347

这是[一篇文章](http://www.flounder.com/cstring.htm)，涵盖了主要用于 CString 的内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T12:46:27.927

```
OutputDebugStringW (myString.c_str ()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T12:45:57.117

欢迎使用 C++ ;-)

您可以只创建一个接受`std::string`. 然后在函数中提取 c 风格的字符串并传递给`OutputDebugStringW`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T12:48:31.980

`std::wstring`和`std::string`只是`std::basic_string<wchar_t>`和的别名`std::basic_string<char>`。

两者都有一个`.c_str()`- 方法，它返回一个传统的 C 字符串指针（`LPCWSTR`等）和一个接受 C 字符串的构造函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-04T06:40:29.930

您可能想查看[CStdString](http://www.codeproject.com/KB/string/stdstring.aspx)。它是一个跨平台的标准 C++ CString 实现，可以很容易地转换为大多数其他字符串类型。几乎所有与字符串相关的头痛都消失了，它只是一个头文件。

# c# - 如何从“System.Drawing.Color”字符串中获取 System.Type

> ID：944519
> 
> 赞同：4
> 
> 时间：2009-06-03T12:43:08.387
> 
> 标签：c#, .net, reflection, .net-2.0

我有一些控件的 xml 存储属性

```
<Prop Name="ForeColor" Type="System.Drawing.Color" Value="-16777216" /> 
```

我想像其他人一样将其转换回来

```
System.Type type = System.Type.GetType(propertyTypeString);
object propertyObj = 
  TypeDescriptor.GetConverter(type).ConvertFromString(propertyValueString); 
```

System.Type.GetType("System.Drawing.Color") 返回 null。

问题是如何正确地从字符串中获取颜色类型

（最好不要只为 Color 属性做特殊情况）

**更新**

有时会手动编辑此 xml

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T12:50:54.813

使用时需要指定程序集以及类型名称[`Type.GetType()`](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)，除非类型在`mscorlib`或当前正在执行的程序集中。

如果您知道它在`System.Drawing`程序集中，则可以[`Assembly.GetType()`](http://msdn.microsoft.com/en-us/library/y0cd10tb.aspx)改用 - 或者查看可能的程序集的完整列表：

```
Type type = candidateAssemblies.Select(assembly => assembly.GetType(typeName))
                               .Where(type => type != null)
                               .FirstOrDefault();

if (type != null)
{
    // Use it
}
else
{
    // Couldn't find the right type
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T12:49:01.870

您是否已加载 System.Drawing 程序集？你有参考吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T12:54:28.317

您是否自己将这些属性存储在 XML 中？如果是这样，只需编写对象`AssemblyQualifiedName`而不是仅`FullName`在创建节点时编写。这提供了从字符串加载类型所需的程序集上下文信息`Type.GetType()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T13:43:47.423

也许那与您的问题并不完全相关，但我有一个类似的问题。我需要使用`XmlSerializer`. 在搜索了互联网并结合了几位作者的智慧之后，我想出了包装类：

```
/// <summary>
/// Color that can be xml-serialized
/// </summary>
public class SerializableColor
{
    public int A { get; set; }
    public int R { get; set; }
    public int G { get; set; }
    public int B { get; set; }
    public int KnownColor { get; set; }

    /// <summary>
    /// Intended for xml serialization purposes only
    /// </summary>
    private SerializableColor() { }

    public SerializableColor(Color color)
    {
        this.A = color.A;
        this.R = color.R;
        this.G = color.G;
        this.B = color.B;
        this.KnownColor = (int)color.ToKnownColor();
    }

    public static SerializableColor FromColor(Color color)
    {
        return new SerializableColor(color);
    }

    public Color ToColor()
    {
        if (KnownColor != 0)
        {
            return Color.FromKnownColor((KnownColor)KnownColor);
        }
        else
        {
            return Color.FromArgb(A, R, G, B);
        }
    }
} 
```

也许它可以应用于您的情况。您会看到，Color 类有时不会将自身存储为 ARGB 值的组合，而是作为 KnownColor 枚举值......在序列化过程中需要保留。

# sql - 如何在 MS Access 2007 中使用值填充组合框

> ID：944524
> 
> 赞同：0
> 
> 时间：2009-06-03T12:44:07.510
> 
> 标签：sql, ms-access, combobox

我有一个包含 3 个表的数据库。

**制造商：** ID、名称、说明

**型号：** ID、Manufact_ID、名称

**订单：** ID、Manufact_ID、Model_ID、数量、日期、

在 Access 中，我想为 Order 提供正常的表/数据表视图，它提供以下输出

```
ID Manufact.Name Model_ID(组合框) 数量 日期  
1 LG W3000H-BN 10 02-01-2009
2 三星 SyncMaster 205BW 5 02-20-2009
3 三星 SyncMaster 206BW 2 03-18-2009
4 饭山 ProLite E1902S-B1 1 05-13-2009

```

我的问题是组合框。我只想在组合框中选择当前制造商的型号列表。例如：如果选择了 SAMSUNG，则仅适用于 SAMSUNG 型号。我尝试将 Model_ID 列的查找行源设置为

```
选择型号.ID,型号.Manufact_ID,型号.名称,订单.Manufact_ID \
FROM Model, Order WHERE Order.Manufact_ID = Model.Manufact_ID

```

这实际上是一个 Model INNER JOIN Order ON ... 给出错误的结果。如何在实际行的 Lookup SELECT 命令中引用 Order.Manufact_ID 的实际值？这是一个我无法字符串化的变量值。

谢谢！

施特劳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T13:00:27.260

不幸的是，这是不可能的。表单上的组合框只能有 1 个来源，数据表或多记录表单上的每条记录不能有不同的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T16:51:16.277

您可能希望阅读这篇文章，这似乎与您的相同。它提供了一个解决方案：

[是否有一种简单的方法可以在此 Access 数据库架构中填充下拉列表？](https://stackoverflow.com/questions/927256/is-there-a-simple-way-of-populating-dropdown-in-this-access-database-schema/927588#927588)

# asp.net - 如何获得 ASP.Net 页面的客户端验证以运行？

> ID：944525
> 
> 赞同：3
> 
> 时间：2009-06-03T12:44:32.753
> 
> 标签：asp.net, validation

我正在尝试运行客户端验证。我整理了一个非常简单的测试 - 文件名为 aTET3.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" 
    CodeFile="aTET3.aspx.cs" Inherits="aTET3" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>TEST</title>

    <script type="text/javascript">
    //<![CDATA[
    function TEST() 
    {
        alert("INSIDE TEST");
        alert("ValidatorCommonOnSubmit()=" + ValidatorCommonOnSubmit());
        alert("Page_ClientValidate()=" + Page_ClientValidate());
    }
    //]]>
    </script>
</head>

<body link="#1A548E" vlink="#1A548E" alink="#1A548E" onunload="TEST()">

<form name="appForm" method="post" action="aTET3.aspx" id="appForm" runat="server">
<asp:ValidationSummary id="appValidationSummary" 
    ValidationGroup="appValidation" 
    DisplayMode="List"
    EnableClientScript="true"
    HeaderText="Loan application not ready"
    runat="server"
    Enabled="true"
    Visible="true" 
    ShowSummary="true" />
<asp:Label ID="lblMessage" Font-Bold="true" ForeColor="Red" runat="server" />

<br />
Enter amount:

<asp:RequiredFieldValidator ID="ApplicationAmountValidator" 
    ValidationGroup="appValidation" 
    ControlToValidate="txtApplicationAmount"
    ErrorMessage="Application amount is required." 
    EnableClientScript="true" 
    Enable="true"
    Display="Dynamic"
    runat="server">+++</asp:RequiredFieldValidator>

<asp:TextBox ID="txtApplicationAmount" Columns="6" runat="server" />

<br /><br />

<asp:Button ID="btnSave" runat="server" Text="Send Application" 
     CausesValidation="true" />

</form>

</body>
</html> 
```

该页面有一个带有RequiredFieldValidator 的文本框。还有一个 ValidationSummary 控件和一个提交按钮。（我添加了在 Unload 上调用的 TEST() 方法，以在回调之前检查页面的状态。）不发生客户端验证；相反，请求被发送回服务器。如果我在服务器上调用 Validate()，那么我会得到验证。

我尝试将 ValidateRequest="true" 添加到 Page 指令中，结果相同。

当我查看发出的 Javascript 时，我突然想到了一些事情。这是其中的一部分：

```
<script type="text/javascript">
<!--
var Page_ValidationActive = false;
if (typeof(ValidatorOnLoad) == "function") {
    ValidatorOnLoad();
}

function ValidatorOnSubmit() {
    if (Page_ValidationActive) {
        return ValidatorCommonOnSubmit();
    }
    else {
        return true;
    }
}
// -->
</script> 
```

请注意，Page_ValidationActive 设置为 False，这意味着 ValidatorOnSubmit 始终返回 true。这对我来说似乎很奇怪，除了我查看了“WebUIValidation.js”，并看到 ValidatorCommonOnSubmit 无论如何都不会验证页面 - Page_ClientValidate() 方法可以，但我如何让它运行？

在我的 TEST() 方法中，当我手动调用 Page_ClientValidate() 时，表单确实按预期在客户端得到验证 - 并且回发请求被发送回服务器。

我已经使用 FireFox 3.0.10 和 MSIE 7 进行了测试，结果相同。

我希望我错过了一些非常基本的东西，我最终会感到非常愚蠢——有人能指出来吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T12:48:24.117

您必须将所有验证内容放在同一个验证组中。包括触发验证的按钮。

# java - Java BitTorrent 库

> ID：944530
> 
> 赞同：51
> 
> 时间：2009-06-03T12:45:13.780
> 
> 标签：java, bittorrent

Java 有没有像样的 BitTorrent 库？我需要编写一个简单的 torrent 客户端，但如果我不必从头开始编写所有内容，那就太好了。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-11T08:27:02.527

Turn 的[TTorrent](http://mpetazzoni.github.io/ttorrent/)是一个纯 Java 位种子库。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-06-03T12:48:11.543

[三环的Snark](http://www.staging.threerings.net/snark.html)是一个非常轻量级的 bitorrent 库，它将为您提供基本的 torrent 功能。

[最初](http://www.klomp.org/snark/)由 Mark Wielaard 编写。可以在此处找到 github 源[https://github.com/akerigan/born-again-snark](https://github.com/akerigan/born-again-snark)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-24T09:38:48.890

我在 Github 上创建了一个[Bitlet Fork](https://github.com/Toilal/bitlet)。

它是 LGPLed，运行速度比 ttorent 快。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-12-12T15:16:10.800

[Azureus](http://sourceforge.net/projects/azureus/)（现名为[Vuze](https://en.wikipedia.org/wiki/Vuze)）为您提供了一个插件 API。使用此 API，您可以将代码插入 Azureus。在你的程序中启动它，并监听/响应它的事件。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-03T13:04:40.293

Azureus 是用 Java 编写的 - 很可能不是“简单”但很可能是“体面”:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-01-13T10:39:19.790

添加来自 jjnguy 的回答：代码似乎在[http://code.google.com/p/snark/](http://code.google.com/p/snark/)中，而不是在您提供的链接中指向的存储库中。

我没用过，但谷歌搜索显示[YAIRCC](http://sourceforge.net/projects/yaircc/)。将自己描述为“一个轻量级的 Java Bittorrent 库和客户端”。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2011-05-31T08:37:45.867

Transdroid 和 Transdroid-desktop 是用于 android 的库，也可以在 java 中用于控制现有的 torrent 客户端。

# python - 创建递归路径Python的有效方法

> ID：944536
> 
> 赞同：16
> 
> 时间：2009-06-03T12:46:07.633
> 
> 标签：python, path, operating-system

我需要一个简单的函数来在 Python 中创建一个父路径可能存在或不存在的路径。

如果存在父母之一，则从 python 文档 os.makedirs 将失败。

我已经编写了下面的方法，它可以根据需要创建尽可能多的子目录。

这看起来有效吗？

```
def create_path(path):
    import os.path as os_path
    paths_to_create = []
    while not os_path.lexists(path):
        paths_to_create.insert(0, path)
        head,tail = os_path.split(path)
        if len(tail.strip())==0: # Just incase path ends with a / or \
            path = head
            head,tail = os_path.split(path)
        path = head

    for path in paths_to_create:
        os.mkdir(path) 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-06-03T12:50:37.983

> `os.makedirs`“如果其中一个父母存在，来自 python 的文档将失败。”

不，[`os.makedirs`](http://docs.python.org/library/os.html#os.makedirs)如果目录本身已经存在，将会失败。如果仅存在任何父目录，它就不会失败。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-01-25T11:15:18.620

这是我的看法，它让系统库完成所有的路径争论。除了已经存在的目录之外的任何错误都会被传播。

```
import os, errno

def ensure_dir(dirname):
    """
    Ensure that a named directory exists; if it does not, attempt to create it.
    """
    try:
        os.makedirs(dirname)
    except OSError, e:
        if e.errno != errno.EEXIST:
            raise 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-08-10T19:30:17.360

初稿：

```
import os

class Path(str):
    """
    A helper class that allows easy contactenation
    of path components, creation of directory trees,
    amongst other things.
    """  
    @property
    def isdir(self):
        return os.path.isdir(self)

    @property
    def isfile(self):
        return os.path.isfile(self)

    def exists(self):
        exists = False
        if self.isfile:
            try:
                f = open(self)
                f.close()
                exists = True
            except IOError:
                exists = False
        else:
            return self.isdir
        return exists

    def mktree(self, dirname):
        """Create a directory tree in this directory."""
        newdir = self + dirname
        if newdir.exists():
            return newdir
        path = dirname.split('/') or [dirname]
        current_path = self + path.pop(0)
        while True:
            try:
                os.mkdir(current_path)
            except OSError as e:
                if not e.args[0] == 17:
                    raise e
                current_path = current_path + path.pop(0)
                continue
            if len(path) == 0:
                break
        return current_path

    def up(self):
        """
        Return a new Path object set a the parent
        directory of the current instance.
        """
        return Path('/'.join(self.split('/')[:-1]))

    def __repr__(self):
        return "<Path: {0}>".format(self)

    def __add__(x, y):
        return Path(x.rstrip('/') + '/' + y.lstrip('/')) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-08T07:04:39.907

对于 python ( >=3.4.1 )，os.makedirs 有 exists_ok 参数。

> 如果 exists_ok 为 False（默认值），如果目标目录已经存在，则会引发 OSError。

因此，如果您使用 like exists_ok=True ，则递归目录创建不会有任何问题。

> 注意：exist_ok 是 python 3.2 附带的，另一方面，即使您设置为 True，也会有一个关于引发异常的错误。所以尝试使用 python >= 3.4.1 （在那个版本中修复）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-01T18:46:58.367

试试这个代码，它检查路径是否存在直到 n 子目录级别，如果不存在则创建目录。

```
def pathtodir(path):
if not os.path.exists(path):
    l=[]
    p = "/"
    l = path.split("/")
    i = 1
    while i < len(l):
        p = p + l[i] + "/"
        i = i + 1
        if not os.path.exists(p):
            os.mkdir(p, 0755) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-15T14:23:04.173

这是一个旧线程，但我对提供的解决方案并不满意，因为它们对于简单的任务来说大多过于复杂。

从库中的可用函数中，我相信我们能做的最干净的是：

```
os.path.isdir("mydir") or os.makedirs("mydir") 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-26T16:42:28.320

我在研究在项目目录中制作简单目录树的方法时发现了这个问题。

我对 Python 有点陌生，当数据结构变得太复杂（即嵌套）时，我会感到很挣扎。在我的大脑思维导图中，跟踪可迭代的小列表要容易得多，所以我想出了两个非常基本的定义来帮助我创建目录树。

该示例使用四个对象来创建一棵树：

1.  根目录路径 = PROJECT_HOME
2.  主路径 = 主路径（如果不存在则创建，不被覆盖）
3.  将进入 home = 分支内部的目录名称的可迭代（在 home 内部创建，不被覆盖）
4.  映射到分支 = 叶子的键控迭代字典（在每个映射分支内部创建的每个值，不被覆盖）
5.  如果存在任何目录，它不会被覆盖，并且错误会静默传递。

    ```
    import os
    from os.path import join as path_join
    import errno

    def make_node(node):
        try:
            os.makedirs(node)
        except OSError, e:
            if e.errno != errno.EEXIST:
                raise

    def create_tree(home, branches, leaves):
        for branch in branches:
            parent = path_join(home, branch)
            make_node(parent)
            children = leaves.get(branch, [])
            for child in children:
                child = os.path.join(parent, child)
                make_node(child)

    if __name__ == "__main__":
        try:  # create inside of PROJECT_HOME if it exists
            PROJECT_HOME = os.environ['PROJECT_HOME']
        except KeyError:  # otherwise in user's home directory
            PROJECT_HOME = os.expanduser('~')

        home = os.path.join(PROJECT_HOME, 'test_directory_tree')
        create_tree(home, branches=[], leaves={})

        branches = (
            'docs',
            'scripts',
        )
        leaves = (
            ('rst', 'html', ),
            ('python', 'bash', )
        )
        leaves = dict(list(zip(branches, leaves)))
        create_tree(home, branches, leaves)

        python_home = os.path.join(home, 'scripts', 'python')
        branches = (
            'os',
            'sys',
            'text_processing',
        )
        leaves = {}
        leaves = dict(list(zip(branches, leaves)))
        create_tree(python_home, branches, leaves)

        after_thought_home = os.path.join(home, 'docs', 'after_thought')
        branches = (
            'child_0',
            'child_1',
        )
        leaves = (
            ('sub_0', 'sub_1'),
            (),
        )
        leaves = dict(list(zip(branches, leaves)))
        create_tree(after_thought_home, branches, leaves) 
    ```

此示例创建的目录树如下所示：

```
 dev/test_directory_tree/
    ├── docs
    │   ├── after_thought
    │   │   ├── child_0
    │   │   │   ├── sub_0
    │   │   │   └── sub_1
    │   │   └── child_1
    │   ├── html
    │   └── rst
    └── scripts
        ├── bash
        └── python
            ├── os
            ├── sys
            └── text_processing 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-28T13:15:55.080

[此代码](https://gist.github.com/samuelsh/b837f8ab8b33c344f01128568dd12019)将使用递归函数调用生成具有给定深度和宽度的目录树：

```
#!/usr/bin/python2.6

import sys
import os

def build_dir_tree(base, depth, width):
    print("Call #%d" % depth)
    if depth >= 0:
        curr_depth = depth
        depth -= 1
        for i in xrange(width):
                # first creating all folder at current depth
                os.makedirs('%s/Dir_#%d_level_%d' % (base, i, curr_depth))
        dirs = os.walk(base).next()[1]
        for dir in dirs:
                newbase = os.path.join(base,dir)
                build_dir_tree(newbase, depth, width)
    else:
        return

if not sys.argv[1:]:
        print('No base path given')
        sys.exit(1)

print('path: %s, depth: %d, width: %d' % (sys.argv[1], int(sys.argv[2]), int(sys.argv[3])))
build_dir_tree(sys.argv[1], int(sys.argv[2]), int(sys.argv[3])) 
```

# winapi - 挂钩时覆盖窗口未正确绘制

> ID：944538
> 
> 赞同：1
> 
> 时间：2009-06-03T12:46:44.793
> 
> 标签：winapi, hook, overlay

要求是在另一个应用程序窗口的一侧绘制我的信息。照顾 z 顺序等等挂钩 WH_GETMESSAGE 和绘制 WM_PAINT 似乎不错。

然而，一些 WM_PAINT 用于我关注的窗口区域，但其他 WM_PAINT 用于完全不同的东西，如上下文菜单或按钮。

示例记事本与在记事本屏幕中写入“Hello”的覆盖物挂钩。这工作正常。但是，当右键单击记事本时，上下文菜单会被 Hello 覆盖。基本上上下文菜单被破坏了。

有没有一种优雅的方法来确定 WM_PAINT 是上下文菜单？

```
LRESULT CALLBACK overlayHook(int code, WPARAM wParam, LPARAM lParam) {
    //Try and be the LAST responder to WM_PAINT messages;
    LRESULT retCode = CallNextHookEx(hhk, code, wParam, lParam);

    //Per GetMsgProc documentation, don't do anything fancy
    if(code < 0) {
        return retCode;
    }

    //Assumes that target application only draws when WM_PAINT message is
    //removed from input queue.
    if(wParam == PM_NOREMOVE) {
        return retCode;
    }

    MSG* message = (MSG*)lParam;
    if(message->message != WM_PAINT) {
        //Ignore everything that isn't a paint request
        return retCode;
    }

    PAINTSTRUCT psPaint;    
    BeginPaint(message->hwnd, &psPaint);
    HDC hdc = psPaint.hdc;
    RECT r = psPaint.rcPaint;           
    TextOut(hdc, 10, 10, "Hello", 4);
    EndPaint(message->hwnd, &psPaint);
    return retCode;
} 
```

仅测试绘图更新区域是不够的，因为上下文菜单可以在任何地方并包含我关注的区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T20:28:40.800

我不知道有什么优雅的方法可以做到这一点，但是您可以使用 GetWindowLong() 来获取窗口的样式或 GetClassName() 来获取其类名，然后根据这些值做出过滤决策。

# flash - 如何将多个事件排队到 actionscript 3 中的单个 eventHandler？

> ID：944541
> 
> 赞同：0
> 
> 时间：2009-06-03T12:47:01.157
> 
> 标签：flash, actionscript-3, events, event-handling, event-queue

我正在构建一个加载小游戏的框架（在 swf 中），并且遇到了问题。

我目前有一个监听器来监听子小游戏发送到父框架的事件。但是，如果子级发送的两个消息（事件）彼此过于接近，似乎第一个事件会被忽略，这会导致一些消息根本无法到达父框架。

我读到您可以以某种方式将动作脚本事件排队，以便以 FIFO 为基础处理事件。我怎样才能做到这一点？这个问题的文档似乎非常稀缺，所以我很难过。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-04T01:01:26.583

您真的应该发布带​​有此类问题的代码；其他人是对的——听起来你确实在某个地方犯了错误，而且当这些问题伴随着一些代码时，帮助解决这些问题要容易得多。

也就是说，即使你在一个紧密的循环中调度你的事件，像这样：

```
addEventListener("foo", handleFoo, false, 0);

for (var i:int = 0; i < 100; i++)
{
   dispatchEvent(new FlexEvent("foo"));
}

private function handleFoo(event:Event):void
{
   trace("hello");
} 
```

...您会看到与该循环的迭代一样多的“你好”；没有比这更“紧密”的了。您可以优先*处理*事件——例如，首先调用这个监听器（因此上面的“0”），第二个调用另一个监听器（“1”），依此类推——使用 addEventListener 函数的优先级参数（再次，见上文），但仅此而已。除非您自己编写队列，否则没有内置的事件调度队列。

# sql-server - 如何在 SQL Server 2005 中高效地存储和管理图像

> ID：944545
> 
> 赞同：0
> 
> 时间：2009-06-03T12:47:17.693
> 
> 标签：sql-server, database, sql-server-2005

我想将我的产品图像插入数据库，然后根据请求获取这些图像。请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T13:14:30.697

我不同意亚伦。在文件系统中存储图像总是会给您留下孤立文件和/或数据库条目的潜在问题。很难保持“参照完整性”。可能在某些情况下您不想走 blob 路线，因为图像特别大等，但在大多数标准应用场景中，我会将图像存储在数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T13:28:46.453

这是一个非常常见的 SQL Server 讨论。一般的经验法则是，如果要存储的文件大于 1MB，则将它们存储在文件系统中。

有关所涉及问题的完整讨论，请参阅以下 Microsoft Research 文档。

[http://research.microsoft.com/apps/pubs/default.aspx?id=64525](http://research.microsoft.com/apps/pubs/default.aspx?id=64525)

附带说明一下，SQL Server 2008 使用 Filestream 技术来满足这种情况。

[SQL Server 文件流](http://technet.microsoft.com/en-us/library/bb933993.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T13:05:50.463

将图像存储在 SQL Server 2005 数据库中的最佳方法是存储图像实际存在的路径。

有关更多信息，请参阅此。

[https://stackoverflow.com/questions/805519/save-image-in-database](https://stackoverflow.com/questions/805519/save-image-in-database)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T15:00:40.777

另一个非常简单的选项

将您的图像转换为 Base64 字符串将其存储在 varchar 字段中

要显示它，只需将其从 base64 转换为二进制....

这适用于任何数据库引擎，在 .net 中从二进制到 base64 的转换需要几微秒...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T12:49:07.547

插入到 BLOB 类型的字段中很容易。

恢复图像取决于您将使用的语言。你使用 PHP 吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-03T13:26:30.750

SQL Server 2005 确实有一个**Image 数据类型**。用它。

至于是好是坏，就看你的要求了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-03T13:42:57.220

最好的方法是升级 SQL Server 2008 并使用 FileStream（存储在文件系统中的内容）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-03T13:47:00.567

跳过整个“数据库中的图像是坏的”辩论，您需要在这里解决一些问题。

1）数据存储：你需要有一个地方来放置图像。在 SQL 2005 中，最好使用 VARBINARY(MAX) 列。

2）上传：您需要将图像上传到您的数据库中。查看 FileUpload 命令。就实际插入内容而言，.NET 数据类型将是 byte[]。在任何情况下，您的 ORM 都应该为您处理这个问题。还要记住你应该存储提供的文件大小、文件名和mimetype，你很快就会需要这些。

3) 展示：这是让大多数人绊倒的地方。您需要设法请求显示图像文件。最好的方法是实现一个自定义的 IHttpHandler。然后选择图像数据、文件名、mimetype 和文件长度。将 mimetype 和文件名推送到 header 中，将内容长度设置为文件长度并将二进制数据流式传输到输出流。

# javascript - 如何匹配javascript中的特定数字？

> ID：944550
> 
> 赞同：1
> 
> 时间：2009-06-03T12:48:21.590
> 
> 标签：javascript, validation

我有一种情况，在 javascript 中，我需要比较一个字符串的内容，以查看它是否在另一个可能包含多个数字的字符串中包含完全相同的数字。

例如。

来源：“1234”比较：“1000 12345 112345 1234 2000”

它应该只匹配 1234 而不是 12345 或 112345 等。

如果源出现在行的开头或结尾，它也需要匹配。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T12:52:06.013

使用正则表达式：

```
"1000 12345 112345 1234 2000".match("\\b1234\\b") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T12:54:28.363

使用单词边界来匹配数字怎么样：

```
var p = /\b1234\b/;
var match = p.exec("1000 12345 112345 1234 2000") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T12:53:15.997

这可能是效率较低的方法之一。对空格字符执行 javascript 字符串 split()，然后搜索返回的字符串数组。

# perl - 如何解决导致 Perl 的 Statistics::Descriptive 中的无限循环的舍入错误？

> ID：944553
> 
> 赞同：2
> 
> 时间：2009-06-03T12:48:47.907
> 
> 标签：perl, statistics, floating-point, rounding, floating-accuracy

我正在使用 Perl 中的[Statistics::Descriptive](http://search.cpan.org/dist/Statistics-Descriptive)库来计算频率分布并遇到浮点舍入误差问题。

我将两个值 0.205 和 0.205（取自其他数字并 sprintf'd 到那些）传递给 stats 模块并要求它计算频率分布，但它陷入了无限循环。

使用调试器单步执行，我可以看到它正在执行以下操作：

```
my $interval = $self->{sample_range}/$partitions;

my $iter = $self->{min};

while (($iter += $interval) <  $self->{max}) {

  $bins{$iter} = 0;

  push @k, $iter;  ##Keep the "keys" unstringified

} 
```

$self->sample_range （范围是 max-min）返回 2.77555756156289e-17 而不是我期望的 0。这意味着循环 ((min+=range) < max)) 进入（出于所有意图和目的）无限循环。

DB<8> 打印 $self->{max};
0.205
DB<9> 打印 $self->{min};
0.205
DB<10> 打印 $self->{max}-$self->{min};
2.77555756156289e-17

所以这看起来像一个舍入问题。不过，我想不出如何解决这个问题，而且我不确定编辑库是个好主意。我正在寻找解决方法或替代方法的建议。

干杯，尼尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T15:47:29.573

我是 Statistics::Descriptive 维护者。由于其数字性质，已报告了许多舍入问题。我相信这个特定的版本在我最近发布的你使用的版本的更高版本中得到了修复，方法是使用乘法而不是 +=。

请使用CPAN[的最新版本](http://search.cpan.org/dist/Statistics-Descriptive/)，应该会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T13:28:13.117

不完全是一个舍入问题；你可以看到更精确的值，比如

```
printf("%.18g %.18g", $self->{max}, $self->{min}); 
```

在我看来，模块中存在一个缺陷，它假设样本范围可以分成 $partitions 块；因为浮点没有无限精度，所以这并不总是可能的。在您的情况下，最小值和最大值是完全相邻的可表示值，因此不能有多个分区。我不知道该模块究竟将分区用于什么，所以我不确定这可能会产生什么影响。该模块中另一个可能的问题是它使用数字作为散列键，这隐含地对它们进行字符串化，从而稍微舍入值。

在将数据提供给模块之前，您可能会通过字符串化清洗数据取得一些成功：

```
$data = 0+"$data"; 
```

这至少将确保（使用默认打印精度）看起来相等的两个数字实际上是相等的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-03T13:32:22.907

这不应该导致无限循环。`$self->{sample_range}/$partitions`如果为 0 ，会导致该循环无限的原因。

# php - 哪个更好：require_once？或者如果 (!defined('FOOBAR')) 需要？还是完全不同的东西？

> ID：944558
> 
> 赞同：3
> 
> 时间：2009-06-03T12:49:58.840
> 
> 标签：php

假设 PHP 版本 >= 5.2，这是一个更好的管理解决方案，包括：

```
require_once DEFPATH . 'config.inc.php'; 
```

或者

```
if (!defined('FOOBAR')) require DEFPATH . 'config.inc.php'; 
```

还是完全不同的东西？

站点不使用前端控制器或自动装载机。需要包含的文件的典型数量是 3 - 8。

我听说，在这里和其他地方，这`require_once`会增加开销并且不能很好地缓存。`require_once`但我也听说，在 PHP 的后期版本中，少量语句在实践中是可以的。

还必须有一些与检查是否已定义相关的开销，但这可能不是问题。

一般来说，哪种做法更好，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T13:19:39.670

是的， require_once() 带有 CPU 和内存开销，但对性能没有任何意义。事实上，这是一种非常有效的操作，因为 PHP 只进行一次哈希表查找来确定该文件是否已经被解析。不要用像你的 !defined('FOOBAR') 示例这样的 hack 给自己带来任何不必要的麻烦，因为它做同样的事情只是不那么优雅。

在 PHP 请求期间需要时间的是文件路径查找以及随后的解析步骤。运行时确定您之前是否已经解析过文件所需的资源量可以忽略不计。

您可以做一些事情来使您的请求运行得更快：

*   在 include() 和 require() 中避免不必要的长搜索路径
*   可以使用绝对包含路径
*   仅根据需要包含内容
*   缓存大的输出片段
*   缓存复杂查询结果
*   编写简洁的代码，将很少使用的功能卸载到按需包含的源文件中

如果您使用的是代码缓存或某种运行时优化器，请阅读手册 - 它们有不同的策略，实际上可能会损害性能或引入错误，具体取决于您的代码。

最后一个建议：提防过早的优化！在服务器上花费 0 到 50 毫秒的请求在用户端实际上是无法区分的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T12:54:24.917

我会在你的情况下使用 require_once 。即使它增加了开销，您也可以忽略它，尤其是当您只需要包含最多 8 个文件时。require_once 更不容易出错，而且更“干净”......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T13:10:07.147

在您的示例中，检查是否定义了 FOOBAR 会更好。但那是因为您的示例没有指定包含文件的完整路径。

您应该始终为几乎所有内容指定完整路径，除非您特别想使用相对路径。否则 PHP 需要在各种搜索路径目录中搜索您的文件。如果它恰好在最后一个搜索路径目录中，那就有点开销了。

我总是创建一个数组，其中包含我从中加载文件的目录的完整路径，然后我将适当的路径添加到我正在加载的文件中。

# c# - WCF 服务调用包装器

> ID：944562
> 
> 赞同：2
> 
> 时间：2009-06-03T12:50:43.300
> 
> 标签：c#, .net, wcf, wrapper

为 WCF 服务调用创建包装器的最佳实践是什么？我认为有必要在同一个地方监视所有呼叫，我正在考虑使用这种代码，这是正确的想法吗？

```
RetType t = ServiceExecutionContext<IServiceChanel>.Execute(s=>s.GetServiceMethod()); 
```

您在企业应用程序中使用哪种包装器？
非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-03T14:17:09.413

WCF 有一个模型，允许您在服务调用链中。如果您尝试做的只是一些日志记录（如果您在配置文件中打开诊断，WCF 已经非常擅长做）以及围绕您的服务的常见事情，我会使用它而不是尝试包装每个服务调用来电。

这是一篇关于如何为 WCF 服务创建自定义行为[的优秀 MSDN 文章。](http://msdn.microsoft.com/en-us/magazine/cc163302.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T16:07:45.897

如果需要，请编写自己的[Message Inspector](http://msdn.microsoft.com/en-us/library/aa717047.aspx "消息检查器")。

WCF 还内置了[消息日志记录](http://msdn.microsoft.com/en-us/library/ms751526.aspx "消息记录")。默认情况下，您可以使用 System.Diagnostics.XmlWriterTraceListener 轻松地将日志记录到文件中，但是如果您需要在其他地方（例如数据库）写入日志，您可以编写自己的[跟踪侦听](http://msdn.microsoft.com/en-us/library/ms172718.aspx "跟踪侦听器")器。

我会推荐这种方法而不是消息检查器......消息检查器很容易写不正确并且在不知道你在做什么的情况下损害性能。

# c++ - C++ 中的 tempnam 等效项

> ID：944579
> 
> 赞同：3
> 
> 时间：2009-06-03T12:54:44.777
> 
> 标签：c++, c

我需要生成随机名称，用于在目录中创建临时文件。目前我正在为此使用 C 标准函数 tempnam() 。我的代码是用 C++ 编写的，并且想使用 C++ 等价物来完成相同的任务。该代码需要在 Solaris 和 Windows 上运行。

有人知道 C++ 中有这样的事情吗？对此的任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T13:05:43.757

`std::tempnam`在`cstdio`标题中尝试。;)

C 标准库在 C++ 代码中仍然可用。为方便起见，它们提供了 C++ 包装器（在带有“c”前缀且没有扩展名的标头中），并且在 std 命名空间中可用。

您也可以使用纯 C 版本（全局命名空间中的 stdio.h 和 tempnam，但您确实要求使用 C++ 版本；））

C++ 标准库仅在确实有改进空间时才提供新功能。它有一个字符串类，因为字符串类是对 C 中的 char 指针的改进。它有一个矢量类，因为它很有用。

对于类似的东西`tempnam`，C++ 能够为聚会带来什么，而我们还没有从 C 中得到什么？所以他们没有做任何事情，除了提供旧版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T13:32:31.737

根据手册页，我知道这并不能回答您的问题，但作为旁注：

> 尽管 tempnam(3) 生成的名称难以猜测，但在 tempnam(3) 返回路径名和程序打开它之间，另一个程序可能会使用 open(2) 创建该路径名，或将其创建为符号链接。这可能导致安全漏洞。为避免这种可能性，请使用 open(2) O_EXCL 标志打开路径名。**或者更好的是，使用 mkstemp(3) 或 tmpfile(3)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T12:57:46.190

为什么不直接使用您目前在 C 中使用的相同函数？C++ 向后兼容 C。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T12:59:12.583

tempnam() 有什么问题？您可以使用常规的 libc 函数吗？tempnam 位于 stdio.h 中，您可能已经将其包括在内。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T13:07:55.840

```
#include <cstdio>
using std::tmpnam;
using std::tmpfile; 
```

您还应该[在 StackOverflow 上检查这个先前的问题，](https://stackoverflow.com/questions/499636/c-how-to-create-a-stdofstream-to-a-temp-file)并避免使用 mkstemp 创建文件时出现竞争条件，所以我建议使用 std::tmpfile

# java - HTMLUnit 可以在密码字段中输入数据吗？

> ID：944581
> 
> 赞同：3
> 
> 时间：2009-06-03T12:55:17.363
> 
> 标签：java, html, testing

我的 HTMLUnit 测试失败了，我感觉这是因为我正在使用 setValueAttribute() 方法输入密码，并且由于某种原因不起作用。有任何想法吗？我应该将密码的加密形式传递给 HTMLUnit 吗？

编辑：

设置通行证的代码：

loginForm.getInputByName("loginPassword").setValueAttribute("1234");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-04T06:20:01.980

这应该可行，您能否向 HtmlUnit 用户列表提交一个测试用例，以便我们进一步调查？

你的，Ahmed Ashour [http://asashour.blogspot.com/](http://asashour.blogspot.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T13:50:30.670

密码字段未加密。它只是没有在浏览器中呈现为纯文本（而是点或星）。您可以使用工具使其可见，例如 Firefox 的 Webdeveloper 工具栏。所以这应该不是问题。我自己正在使用 HtmlUnit，它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-22T17:09:34.997

它确实有效，我有它的工作。

我会检查以确保您获得正确的输入字段名称。如果没有，您可以发布堆栈跟踪。

下面的代码对我有用。form.getInputByName("密码").setValueAttribute("1234");

# php - 什么是 CMIString4096，如何提取其中的数据？

> ID：944582
> 
> 赞同：4
> 
> 时间：2009-06-03T12:55:34.790
> 
> 标签：php, decode, scorm

我有这个从 Adob​​e Presenter 7 返回的字符串。它被称为 suspend_data 并且类型为 CMIString4096 [（由文档）](http://www.chrisfoster.com.au/blog/wp-content/uploads/2008/10/scorm.pdf)

> CMIString4096 一组最大长度为 4096 个字符的 ASCII 字符。

这是字符串：

> aG1111111000000000BB001EC％2EacC％7E％24GS％2AayjHm110BKCBBB0B0EBAB1B1ED％2EicC％7E％24GS％2AlfkHm110BKDBCB0B0EBBB0B0EBAB1B1EE％2EwcC％7E％24GS％2ACBlHm100BKDB2BCBCDB1BABBDB0BBBADF％2E7cC％7E％24GS％2A4GmHm110BKBB0Ebl％C3％A1rRbl％C3％A1R％3Bgr％C3％A6nn％3Brau％ C3%B0urB

它看起来像带有一些 urlencoded 字符的 base64。当我 urldecode() 字符串时，最后几个字符类似于一些数据，但它在 utf8 中，然后我 utf8_decode 它并看到这个。

```
aG1111111000000000BB001EC.acC~$GS*ayjHm110BKCBBB0B0EBAB1B1ED.icC~$GS*
lfkHm110BKDBCB0B0EBBB0B0EBAB1B1EE.wcC~$GS*CBlHm100BKDB2BCBCDB1BABBDB0BBBADF.
7cC~$GS*4GmHm110BKBB0EblárRblár;grænn;rauðurB 
```

好的，我更接近一些数据（最后），但看起来仍然一团糟。当我使用 base64_decode() 时，我得到一些二进制文件，但我不知道它到底是什么。

有谁知道这些数据是什么以及我如何从中获得一些意义？我正在使用 PHP btw，所以只有其中的函数适用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T17:21:52.493

cmi.suspend_data 字段中存储的数据只是一个数据桶，SCO（内容）可以使用它来保持其当前状态。数据没有语义含义或定义的结构。在许多情况下，可以猜测数据的含义或对其进行逆向工程，但 Adob​​e Presenter 生成的内容似乎并非如此。

suspend_data 字段限制为 4096 个 ASCII 字符。对于某些 SCO，这并不能提供足够的存储空间来完全保持当前状态。在许多情况下，面临这种困境的内容开发人员会将压缩算法应用于状态数据，以便将其压缩到有限的大小。看起来这就是 Adob​​e Presenter 在这里所做的。我的猜测是他们将数据压缩到您发现的未编码状态，然后应用 url 编码以确保所有生成的字符都可以安全地发送到 LMS。

挂起数据开头的 1 和 0 字符串可能是有意义的。它可能对应于学习者之前看过课程中的哪些幻灯片。为了验证这一点，通过 SCORM TestTrack（[scorm.com](http://www.scorm.com)上免费提供）之类的工具运行课程并使用生成的调试日志来观察暂停数据在用户完成课程时如何变化可能会有所帮助。

SCORM 提供了相当多的其他数据模型元素，它们确实具有与课程当前状态相关的特定含义。这是[所有可用数据模型元素的列表](http://www.scorm.com/scorm-explained/technical-scorm/run-time/run-time-reference/)。SCORM TestTrack 调试日志还将显示 Adob​​e Presented 内容使用了哪些数据模型元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T13:10:42.310

我不认为 SCORM 定义了 suspend_data 字段包含的内容或它的格式。这完全取决于内容/课程（在您的情况下为 Adob​​e Presenter），但它只能是文本，并且限制为 4096 个字符。

内容可以使用此字段来存储任何类型的状态，该状态应在下次启动时传递回内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T13:23:59.507

成立

> **13\. cmi.suspend_data**
> 
> 读/写
> 
> 旨在充当存储 SCO 希望保留到后续会话的任何信息的位置。

在[这里](https://adlhub.golearn.csd.disa.mil/dst/documents/ADL%20Technical%20Specifications_Final.pdf)。因此，正如[Martin](https://stackoverflow.com/questions/944582/what-is-cmistring4096-and-how-can-i-extract-the-data-within-it/944652#944652)所写，SCORM 只定义了数据类型，而不是*cmi.suspend_data*的编码或内容。也许[这](http://forums.adobe.com/thread/162340)可以帮助您确定编码。

# open-source - 哪些重要的 Google 产品是开源的？

> ID：944586
> 
> 赞同：1
> 
> 时间：2009-06-03T12:56:30.950
> 
> 标签：open-source

我知道谷歌做**了一些**开源，但他们的很多资产都是非常封闭的。哪些主要是开源的，哪些不是？

*   Android - 完全开放（我认为）
*   GMail - 已关闭
*   搜索 - 显然已关闭
*   Chrome - 一些开源位（webkit）......但我不确定
*   JavaScript 编译器（Steve Yegge 正在使用）
*   Youtube - 关闭
*   Feedburner - 已关闭 Blogger - 已关闭

我正在努力想出来自 Google 的大型 pro-OSS 产品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T13:02:08.160

（免责声明：我是 Google 员工，因此显然有偏见：）

查看[此页面](http://code.google.com/more/)，了解我们的开源 API 和项目的相当大的列表。（我特别关注[协议缓冲区](http://code.google.com/p/protobuf/)和[C# 端口](http://code.google.com/p/protobuf-csharp-port/)。）

其他要考虑的事情不在我的头上，其中一些毫无疑问在该列表中：

*   [谷歌 Java 集合](http://code.google.com/p/google-collections/)
*   [GWT](http://code.google.com/webtoolkit/)（谷歌网络工具包）
*   [波](http://wave.google.com)（未来）

您也可以认为[code.google.com](http://code.google.com)本身就是一个“亲 OSS 产品”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T13:02:52.200

Chrome 是完全开源的，就像[Chromium](http://code.google.com/p/chromium/)一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T13:06:27.607

[Google CTemplate](http://code.google.com/p/google-ctemplate/)，一个 C++ 的模板库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T13:23:26.713

[http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)用Java实现的ZXing多格式一维/二维条码图像处理库。可能它不是主要的，也不是最高质量的，但与大多数其他此类库相比，我发现它有用且开源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T15:16:41.743

[Jaiku](http://code.google.com/p/jaikuengine/)，最近。

# jquery - jQuery PrettyPhoto 将 ID 传递给 iframe

> ID：944587
> 
> 赞同：5
> 
> 时间：2009-06-03T12:56:31.090
> 
> 标签：jquery, jquery-plugins

我正在尝试使用 jQuery PrettyPhoto 并且由于某种原因它没有通过 id 变量..如果有人以前遇到过这个问题并且知道解决方案，那就太棒了！这是代码：

```
<a href="/store-item-details?id=5&iframe=true&width=800&height=530" 
   rel="prettyPhoto[iframes]"
   title="">
   <img src="/images/store/thumbs/'.$item->image.'"
        alt="'.$item->name.'"
        width="100"
        border="0" />
</a> 
```

这是链接（带有漂亮的照片，单击其中一个缩略图）

[http://www.photographicpassions.com/shop?view=products&category=1](http://www.photographicpassions.com/shop?view=products&category=1)

这是标签的直接链接：

[http://www.photographicpassions.com/store-item-details?id=1&iframe=true&width=800&height=530](http://www.photographicpassions.com/store-item-details?id=1&iframe=true&width=800&height=530)

请帮忙！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-03T22:51:18.377

您的问题在于 prettyPhoto 本身。该插件假定（在 iframe 的情况下）该 url 中没有其他重要参数，并在解析出高度和宽度后将其全部删除。

这是 jquery.prettyPhoto.js 的未缩小版本的片段。注意第三行，它删除了 movie_url 中问号之后的所有内容。

```
 }else if(pp_type == 'iframe'){
      movie_url = $caller.attr('href');
      movie_url = movie_url.substr(0,movie_url.indexOf('?'));

      pp_typeMarkup = '<iframe src ="'+movie_url+'" width="'+(correctSizes['width']-10)+'" height="'+(correctSizes['height']-10)+'" frameborder="no"></iframe>';
    } 
```

我不确定你感觉有多勇敢，但如果你注释掉第三行，它会为你工作。（你可能想在之后重新缩小：http: [//fmarcia.info/jsmin/test.html](http://fmarcia.info/jsmin/test.html)）

```
 }else if(pp_type == 'iframe'){
      movie_url = $caller.attr('href');
      // movie_url = movie_url.substr(0,movie_url.indexOf('?')); // commented out to allow other attributes to be passed along.

      pp_typeMarkup = '<iframe src ="'+movie_url+'" width="'+(correctSizes['width']-10)+'" height="'+(correctSizes['height']-10)+'" frameborder="no"></iframe>';
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-05T13:24:01.623

如果你不想破解它，我已经发布了一个新版本的 prettyPhoto 修复了这个错误。

查看项目页面：[http ://www.no-margin-for-errors.com/projects/prettyPhoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyPhoto-jquery-lightbox-clone/)

# c# - 在我的项目中添加图像

> ID：944588
> 
> 赞同：2
> 
> 时间：2009-06-03T12:56:47.610
> 
> 标签：c#, image

我正在尝试使用 Microsoft Visual Studio 2008 C# 在我的项目中添加/更改图像。除此之外，还包括 Devexpress 组件。

我做了什么，我复制了一个图像（.png 文件）并将其粘贴到我的“PrintRibbonControllerResources.resx”中，然后我必须再次打开 MainForm.cs 右键单击​​表单并单击运行设计器。它将打开功能区控件设计器。从那里，我可以添加图像。

你觉得可以吗？这是我第一次这样做，我没有任何经验，我正在边做边学。

谢谢

=== 似乎我在资源选项卡下看不到添加功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T15:10:38.823

我通常将图像添加到项目本身。（添加/现有项目）我这样做是为了可以使用 SourceControl 签入/签出图像文件。然后 resx 链接到这些文件。

基本上，我的理念是：如果它有效，就不要修复它。如果此解决方案适合您，那很好。至少，直到你发现它失败的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T13:00:38.413

如果您进入项目的属性，然后选择资源选项卡，您可以直接从那里添加它，并且可以在项目的默认资源文件中访问它，这可能更方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T15:17:31.197

我喜欢将它添加到解决方案文件夹（或项目中的文件夹），并通过“添加现有文件”将其添加到 resx。

我获得了拥有资源文件的所有优点，也获得了拥有物理文件的优点（编辑、快速查看等）

# svn - 多个 Subversion 客户端和 TortoiseSVN

> ID：944589
> 
> 赞同：1
> 
> 时间：2009-06-03T12:56:50.420
> 
> 标签：svn, tortoisesvn

我安装了 Subversion 1.5.x，然后安装了 TortoiseSVN 1.6.x。

仅使用 1.5.x 命令行实用程序一切正常。在熟悉了 svn 一段时间后，我使用 TortoiseSVN 客户端进行了提交，这很有效，但是命令行客户端现在给我的客户端太旧了，在所有命令上都会出现新的客户端错误。

1 - 我是否损坏了我的工作副本？我不这么认为，因为 TortoiseSVN 工作正常。

2 - 如果我想与 TortoiseSVN 同时使用命令行 svn，我想我只需要下载 1.6.x 命令行客户端并使用它。根据 TSVN 常见问题解答，客户端可以安装在彼此的“顶部”，无论这意味着什么。

如果是这样，我该如何绕过旧的命令行客户端？

我假设我只是通过直接运行或更改环境路径来运行较新的 svn.exe，否则安装包会将较新的 svn 目录放在路径的末尾。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T13:00:59.320

工作副本的格式随着 subversion 1.6 而改变。当您使用 TortoiseSVN 1.6 时，您的工作副本会自动更新为新格式，并且现在不能再被较旧的 subversion 客户端（例如您的 1.5 二进制文件）读取。

只需用当前版本 1.6.2 替换您的 subversion 1.5 客户端二进制文件，一切都会再次正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T13:06:34.643

SVN 1.5 和 1.6 对工作副本信息使用不同的格式。当您使用 1.6 客户端时，它会自动转换您的工作副本，使以前的客户端无法使用您的工作副本。而且没有退路。

您是正确的，好的解决方案是下载 svn 1.6 命令行客户端。或者将您的 TortoiseSVN 降级到 1.5 重新结帐。

# nhibernate - 在 NHibernate 中查询对象存在的最快方法

> ID：944591
> 
> 赞同：1
> 
> 时间：2009-06-03T12:57:15.287
> 
> 标签：nhibernate

我正在寻找**检查对象是否存在的**最快方法。场景非常简单，假设有一个目录工具，它读取当前硬盘。找到目录后，应该创建它，或者如果已经存在，则更新它。

首先让我们只关注创建部分：

```
 public static DatabaseDirectory Get(DirectoryInfo dI)
    {
        var result = DatabaseController.Session
                      .CreateCriteria(typeof (DatabaseDirectory))
                      .Add(Restrictions.Eq("FullName", dI.FullName))
                      .List<DatabaseDirectory>().FirstOrDefault();

        if (result == null)
        {
            result = new DatabaseDirectory
                         {
                             CreationTime = dI.CreationTime,
                             Existing = dI.Exists,
                             Extension = dI.Extension,
                             FullName = dI.FullName,
                             LastAccessTime = dI.LastAccessTime,
                             LastWriteTime = dI.LastWriteTime,
                             Name = dI.Name
                         };
        }
        return result;
    } 
```

这是关于：

*   速度
*   关注点分离

想到的是以下内容：扫描将始终“作为一个整体”执行。意思是，在扫描驱动器 C 期间，我知道没有任何新内容被添加到数据库中（来自其他进程）。因此，在扫描之前“缓存”所有现有目录可能是个好主意，并以这种方式查找它们。另一方面，这可能不适合大型数据集，例如文件（将是 600.000 或更多）......

也许使用“索引列”或类似的东西可以获得一些性能提升，但我对这个主题不太熟悉。如果有人有一些参考资料，请指出我正确的方向......

谢谢，克里斯

PS：我正在使用 NHibernate、Fluent Interface、Automapping 和 SQL Express（可以切换到完整的 SQL）

**注意：** 在给定的问题中，路径不是数据库中的 ID。ID 是自动增量的，我无法更改此要求（其他原因）。所以真正的问题是，**“检查对象是否存在，ID 未知，只是该对象的属性”的最快方法是什么**

并且可以通过选择具有“以 C:Testfiles 开头”之类的大组来进行批处理，但问题仍然存在，我如何提前知道该组有多大。我不能选择“max 1000”并检查这个缓冲字典，因为我可能会“在搜索的目录旁边点击”......我希望这个问题很清楚。最重要的部分是，缓冲真的对性能有这么大的影响。如果是这样，将整个数据库加载到仅包含 PATH 和 ID 的字典中是否有意义（我认为，即使有 1.000.000 个对象，这也可以。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T16:23:58.710

首先，我强烈建议您（实际上是使用 NH 的任何人）阅读 Ayende 关于[Get、Load 和 query 之间差异](http://ayende.com/Blog/archive/2009/04/30/nhibernate-ndash-the-difference-between-get-load-and-querying-by.aspx)的文章。

在您的情况下，由于您需要检查是否存在，我会使用`.Get(id)`而不是查询来选择*单个*对象。

但是，我想知道您是否可以通过利用您的问题领域的一些知识来提高性能。如果您要扫描整个驱动器并检查数据库中是否存在每个目录，则通过执行批量操作可能会获得更好的性能。也许创建一个仅包含对象 PK 的 DTO 对象，`DatabaseDirectory`以进一步最小化数据传输/处理。就像是：

```
Dictionary<string, DirectoryInfo> directories;
session.CreateQuery("select new DatabaseDirectoryDTO(dd.FullName) from DatabaseDirectory dd where dd.FullName in (:ids)")
    .SetParameterList("ids", directories.Keys)
    .List(); 
```

然后只需删除那些与返回的 ID 值匹配的元素即可获取不存在的目录。根据输入集的大小（对于文件，几乎可以肯定），您可能必须将过程分成更小的批次。

As far as separation of concerns, just keep the operation at a repository level. Have a method like `SyncDirectories` that takes a collection (maybe a `Dictionary` if you follow something like the above) that handles the process for updating the database. That way your higher application logic doesn't have to worry about how it all works and won't be affected should you find an even faster way to do it in the future.

# python - 使用断言的最佳实践？

> ID：944592
> 
> 赞同：548
> 
> 时间：2009-06-03T12:57:16.580
> 
> 标签：python, assert, assertion, raise

1.  `assert`将其用作标准代码的一部分而不是仅用于调试目的是否存在性能或代码维护问题？

    是

    ```
    assert x >= 0, 'x is less than zero' 
    ```

    好于或差于

    ```
    if x < 0:
        raise Exception, 'x is less than zero' 
    ```

2.  此外，是否有任何方法可以设置这样的业务规则`if x < 0 raise error`，总是在没有`try/except/finally`so 的情况下进行检查，如果在整个代码中的任何时间`x`小于 0，则会引发错误，例如，如果您`assert x < 0`在函数的开头设置，则在函数内的任何位置哪里`x`变得小于 0 引发异常？

* * *

## 回答 #1

> 赞同：828
> 
> 时间：2009-06-03T14:34:29.317

断言应该用于测试不*应该发生*的情况。目的是在程序状态损坏的情况下尽早崩溃。

异常应该用于可能发生的错误，并且**您应该几乎总是创建自己的异常类**。

* * *

例如，如果您正在编写一个从配置文件读取到 a 的函数，文件`dict`中不正确的格式应该引发 a `ConfigurationSyntaxError`，而您可以`assert`不打算返回`None`。

* * *

在您的示例中，如果`x`是通过用户界面或外部来源设置的值，则最好例外。

如果`x`仅由您自己在同一程序中的代码设置，请使用断言。

* * *

## 回答 #2

> 赞同：418
> 
> 时间：2009-12-03T08:15:24.573

**“assert”语句在编译优化时被删除**。所以，是的，性能和功能都存在差异。

> 当前代码生成器在编译时请求优化时不会为断言语句发出代码。- [Python 2 文档](http://docs.python.org/reference/simple_stmts.html#the-assert-statement) [Python 3 文档](https://docs.python.org/3/reference/simple_stmts.html#the-assert-statement)

如果您使用`assert`实现应用程序功能，然后优化部署到生产，您将被“but-it-works-in-dev”缺陷所困扰。

请参阅[PYTHONOPTIMIZE](http://docs.python.org/using/cmdline.html?highlight=optimization%20options#envvar-PYTHONOPTIMIZE)和[-O -OO](https://docs.python.org/3/using/cmdline.html#cmdoption-o)

* * *

## 回答 #3

> 赞同：160
> 
> 时间：2009-06-03T13:12:18.017

当 x 在整个函数中变得小于零时，能够自动抛出错误。您可以使用[类描述符](http://docs.python.org/reference/datamodel.html#implementing-descriptors)。这是一个例子：

```
class LessThanZeroException(Exception):
    pass

class variable(object):
    def __init__(self, value=0):
        self.__x = value

    def __set__(self, obj, value):
        if value < 0:
            raise LessThanZeroException('x is less than zero')

        self.__x  = value

    def __get__(self, obj, objType):
        return self.__x

class MyClass(object):
    x = variable()

>>> m = MyClass()
>>> m.x = 10
>>> m.x -= 20
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "my.py", line 7, in __set__
    raise LessThanZeroException('x is less than zero')
LessThanZeroException: x is less than zero 
```

* * *

## 回答 #4

> 赞同：151
> 
> 时间：2013-09-24T11:33:18.260

# 四大目的`assert`

假设您与四个同事 Alice、Bernd、Carl 和 Daphne 一起处理 200,000 行代码。他们调用你的代码，你调用他们的代码。

然后`assert`有**四个角色**：

1.  **通知 Alice、Bernd、Carl 和 Daphne 您的代码需要什么。**
    假设您有一个处理元组列表的方法，并且如果这些元组不是不可变的，则程序逻辑可能会中断：

    ```
    def mymethod(listOfTuples):
        assert(all(type(tp)==tuple for tp in listOfTuples)) 
    ```

    这比文档中的等效信息更值得信赖，并且更易于维护。

2.  **通知计算机您的代码期望什么。**
    `assert`强制执行代码调用者的正确行为。如果您的代码调用 Alices 的代码而 Bernd 的代码调用您的代码，那么如果没有`assert`，如果程序在 Alices 代码中崩溃，Bernd 可能会认为这是 Alice 的错，Alice 会调查并可能会认为是你的错，你调查并告诉 Bernd 这实际上是他的。很多工作丢失了。
    有了断言，无论谁接错电话，他们很快就能看出这是他们的错，而不是你的错。爱丽丝、伯恩德和你们都会受益。节省大量时间。

3.  **告知您的代码的读者（包括您自己）您的代码在某个时候取得了什么成就。**
    假设您有一个条目列表，并且每个条目都可以是干净的（这很好），也可以是 smorsh、trale、gullup 或 twinkled（这些都是不可接受的）。如果是 smorsh，则必须是 unsmorshed；如果它是 trale，它必须是 baludoed；如果是 gullup，则必须小跑（然后也可能有节奏）；如果它闪烁，则必须再次闪烁，周四除外。你明白了：这是复杂的东西。但最终结果是（或应该是）所有条目都是干净的。Right Thing(TM) 要做的是将清洁循环的效果总结为

    ```
    assert(all(entry.isClean() for entry in mylist)) 
    ```

    这个陈述让每个试图理解美妙循环*究竟是什么的人都头疼。*这些人中最常见的可能是你自己。

4.  **通知计算机您的代码在某个时间点实现了什么。**
    如果您在小跑后忘记调整需要它的条目的速度，这`assert`将节省您的时间并避免您的代码在很久以后破坏亲爱的 Daphne。

在我看来，`assert`文档（1 和 3）和保障（2 和 4）的两个目的同样有价值。
通知人们甚至可能比通知计算机*更*有价值，因为它可以防止`assert`目标捕获的错误（在案例 1 中）以及任何情况下的大量后续错误。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2009-12-03T11:37:29.207

除了其他答案之外，断言本身抛出异常，但只有 AssertionErrors。从实用的角度来看，断言不适合当您需要对捕获的异常进行细粒度控制时。

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2009-06-03T13:12:25.380

这种方法唯一真正的错误是很难使用 assert 语句做出一个非常具有描述性的异常。如果您正在寻找更简单的语法，请记住您*也*可以执行以下操作：

```
class XLessThanZeroException(Exception):
    pass

def CheckX(x):
    if x < 0:
        raise XLessThanZeroException()

def foo(x):
    CheckX(x)
    #do stuff here 
```

另一个问题是使用 assert 进行正常的条件检查是很难使用 -O 标志禁用调试断言。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2017-09-01T06:09:43.053

这里的英语单词***assert***有***swear***、***firm***、***avow***的意思。这并不意味着*“检查”*或*“应该”*。这意味着*您*作为编码员在这里***宣誓***：

```
# I solemnly swear that here I will tell the truth, the whole truth, 
# and nothing but the truth, under pains and penalties of perjury, so help me FSM
assert answer == 42 
```

如果代码是正确的，除了[单事件扰乱](https://en.wikipedia.org/wiki/Single_event_upset)、硬件故障等，**任何断言都不会失败**。这就是为什么程序对最终用户的行为不能受到影响的原因。**特别是，即使在特殊的编程条件**下，断言也不会失败。它只是永远不会发生。如果发生这种情况，程序员应该为此受到打击。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2013-03-06T02:22:48.577

如前所述，当你的代码不应该达到某个点时，应该使用断言，这意味着那里有一个错误。我可以看到使用断言的最有用的原因可能是不变/前置/后置条件。这些都是在循环或函数的每次迭代开始或结束时必须为真的东西。

例如，一个递归函数（2 个单独的函数，其中 1 个处理错误的输入，另一个处理错误的代码，因为递归很难区分）。如果我忘记写 if 语句，这会很明显，出了什么问题。

```
def SumToN(n):
    if n <= 0:
        raise ValueError, "N must be greater than or equal to 0"
    else:
        return RecursiveSum(n)

def RecursiveSum(n):
    #precondition: n >= 0
    assert(n >= 0)
    if n == 0:
        return 0
    return RecursiveSum(n - 1) + n
    #postcondition: returned sum of 1 to n 
```

这些循环不变量通常可以用断言来表示。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-12-15T03:10:31.973

嗯，这是一个悬而未决的问题，我有两个方面想谈一谈：何时添加断言以及如何编写错误消息。

# 目的

向初学者解释它 - 断言是可能引发错误的语句，但您不会捕捉到它们。他们通常不应该被抚养，但在现实生活中，他们有时确实会被抚养。这是一个严重的情况，代码无法从中恢复，我们称之为“致命错误”。

接下来，它用于“调试目的”，虽然正确，但听起来很不屑一顾。我更喜欢“声明不变量，永远不应该被违反”的表述，尽管它对不同的初学者的工作方式不同......有些人“只是得到它”，而另一些人要么找不到任何用处，要么替换正常的异常，甚至用它来控制流量。

# 风格

在 Python 中，`assert`是语句，而不是函数！（记住`assert(False, 'is true')`不会加注。但是，不碍事：

**何时以及如何编写可选的“错误消息”？**

这实际上适用于单元测试框架，它通常有许多专门的方法来做断言（`assertTrue(condition)`等`assertFalse(condition), assertEqual(actual, expected)`）。它们通常还提供一种对断言进行评论的方法。

在一次性代码中，您可以在没有错误消息的情况下进行操作。

在某些情况下，没有什么可以添加到断言中：

def dump(something): assert isinstance(something, Dumpable) # ...

但除此之外，消息对于与其他程序员（有时是您的代码的交互式用户，例如在 Ipython/Jupyter 等中）的交流很有用。

给他们信息，而不仅仅是泄露内部实现细节。

代替：

```
assert meaningless_identifier <= MAGIC_NUMBER_XXX, 'meaningless_identifier is greater than MAGIC_NUMBER_XXX!!!' 
```

写：

```
assert meaningless_identifier > MAGIC_NUMBER_XXX, 'reactor temperature above critical threshold' 
```

甚至可能：

```
assert meaningless_identifier > MAGIC_NUMBER_XXX, f'reactor temperature({meaningless_identifier }) above critical threshold ({MAGIC_NUMBER_XXX})' 
```

我知道，我知道 - 这不是静态断言的情况，但我想指出消息的信息价值。

# 负面信息还是正面信息？

这可能会引起争议，但读到以下内容让我很受伤：

```
assert a == b, 'a is not equal to b' 
```

*   这是两个相互矛盾的东西。因此，每当我对代码库产生影响时，我都会通过使用“必须”和“应该”等额外动词来推动指定我们想要的东西，而不是说出我们不想要的东西。

    断言 a == b, 'a 必须等于 b'

然后，getting`AssertionError: a must be equal to b`也是可读的，并且该语句在代码中看起来是合乎逻辑的。此外，您可以在不阅读回溯的情况下从中获得一些东西（有时甚至不可用）。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-09-24T11:45:09.717

## *有*性能问题吗？

*   请记住**“先让它工作，然后再让它快速工作”**。
    任何程序中只有很少的百分比通常与其速度相关。如果它被证明是一个性能问题，你总是可以排除或简化`assert`它——而且它们中的大多数永远不会。

*   **务实**：
    假设您有一个处理非空元组列表的方法，如果这些元组不是不可变的，则程序逻辑将中断。你应该写：

    ```
    def mymethod(listOfTuples):
        assert(all(type(tp)==tuple for tp in listOfTuples)) 
    ```

    如果您的列表往往有 10 个条目，这可能很好，但如果它们有 100 万个条目，这可能会成为问题。但与其完全丢弃这张有价值的支票，你可以简单地将其降级​​为

    ```
    def mymethod(listOfTuples):
        assert(type(listOfTuples[0])==tuple)  # in fact _all_ must be tuples! 
    ```

    这很便宜，但无论如何都可能会捕获大多数*实际的程序错误。*

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-03-23T13:56:05.173

对于它的价值，如果您正在处理依赖于`assert`正常运行的代码，那么添加以下代码将确保启用断言：

```
try:
    assert False
    raise Exception('Python assertions are not working. This tool relies on Python assertions to do its job. Possible causes are running with the "-O" flag or running a precompiled (".pyo" or ".pyc") module.')
except AssertionError:
    pass 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-10-17T11:04:16.623

Assert 是检查 -
**1\. 有效条件，
2\. 有效语句，
3\. 真逻辑；** 的源代码。它不会使整个项目失败，而是会发出警报，表明您的源文件中的某些内容不合适。

在示例 1 中，因为变量 'str' 不为空。所以不会引发任何断言或异常。

**示例 1：**

```
#!/usr/bin/python

str = 'hello Python!'
strNull = 'string is Null'

if __debug__:
    if not str: raise AssertionError(strNull)
print str

if __debug__:
    print 'FileName '.ljust(30,'.'),(__name__)
    print 'FilePath '.ljust(30,'.'),(__file__)

------------------------------------------------------

Output:
hello Python!
FileName ..................... hello
FilePath ..................... C:/Python\hello.py 
```

在示例 2 中，var 'str' 为空。**因此，我们通过断言**语句使用户免于执行错误程序。

**示例 2：**

```
#!/usr/bin/python

str = ''
strNull = 'NULL String'

if __debug__:
    if not str: raise AssertionError(strNull)
print str

if __debug__:
    print 'FileName '.ljust(30,'.'),(__name__)
    print 'FilePath '.ljust(30,'.'),(__file__)

------------------------------------------------------

Output:
AssertionError: NULL String 
```

在我们不想调试并意识到源代码中的断言问题的那一刻。禁用优化标志

**python -O assertStatement.py**
什么都不会打印

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-02-06T20:03:20.630

异常的使用`assert`和引发都与通信有关。

*   断言是关于*开发人员处理*的代码正确性的声明：代码中的断言通知代码的读者关于代码正确必须满足的条件。运行时失败的断言会通知开发人员代码中存在需要修复的缺陷。

*   异常是关于可能在运行时发生但不能由手头代码解决的非典型情况的指示，在要处理的调用代码处解决。发生异常并不表示代码中存在错误。

> 最佳实践

因此，如果您将运行时出现的特定情况视为您想通知开发人员的错误（“您好开发人员，此情况表明某处存在错误，请修复代码。”）然后去断言。如果断言检查您的代码的输入参数，您通常应该在文档中添加当输入参数违反该条件时您的代码具有“未定义的行为”。

相反，如果这种情况的发生并不是您眼中的错误的指示，而是您认为应该由客户端代码处理的（可能很少但）可能的情况，请引发异常。引发异常的情况应该是相应代码文档的一部分。

> 使用是否存在性能 [...] 问题`assert`

断言的评估需要一些时间。不过，它们可以在编译时消除。但是，这会产生一些后果，请参见下文。

> 使用 [...] 是否存在代码维护问题`assert`

通常，断言提高了代码的可维护性，因为它们通过明确假设并在运行时定期验证这些假设来提高可读性。这也将有助于捕捉回归。然而，有一个问题需要牢记：断言中使用的表达式应该没有副作用。如上所述，可以在编译时消除断言——这意味着潜在的副作用也会消失。这可能会无意中改变代码的行为。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-04-08T17:40:32.600

在 PTVS、PyCharm 等 IDE 中，Wing`assert isinstance()`语句可用于为一些不清楚的对象启用代码完成。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-05-12T13:03:24.067

我要补充一点，我经常`assert`用来指定我的代码应该具有的属性，例如[循环不变量](https://en.wikipedia.org/wiki/Loop_invariant#:%7E:text=In%20computer%20science%2C%20a%20loop,the%20effect%20of%20a%20loop.)或逻辑属性，就像我在经过正式验证的软件中指定它们一样。

它们的目的是通知读者，帮助我推理，并检查我的推理没有犯错误。例如 ：

```
k = 0
for i in range(n):
    assert k == i * (i + 1) // 2
    k += i 
    #do some things 
```

或更复杂的情况：

```
def sorted(l):
   return all(l1 <= l2 for l1, l2 in zip(l, l[1:]))

def mergesort(l):
   if len(l) < 2: #python 3.10 will have match - case for this instead of checking length
      return l
   k = len(l // 2)
   l1 = mergesort(l[:k])
   l2 = mergesort(l[k:])
   assert sorted(l1) # here the asserts allow me to explicit what properties my code should have
   assert sorted(l2) # I expect them to be disabled in a production build
   return merge(l1, l2) 
```

由于在优化模式下运行 python 时断言被禁用，所以不要犹豫在其中编写昂贵的条件，特别是如果它使您的代码**更清晰**且**不易出错**

# objective-c - 如何声明二维字节数组

> ID：944594
> 
> 赞同：1
> 
> 时间：2009-06-03T12:57:29.980
> 
> 标签：objective-c, iphone

我正在尝试制作一个二维字节数组。

任何人都可以给出如何在 Objective-C 中声明 NULL 2D 字节数组的代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T13:00:37.883

由于objective-c 是c 的严格超集，因此您可以只使用纯c 定义，它就可以正常工作：

```
char** myMatrix = malloc(width*height); 
```

您也可以使用 NSArray 的 NSArray，但这不是二维数组。它是一个锯齿状数组，比普通字节数组更难使用。

另一种选择是使用 NSData/NSMutableData 对象。这是使用字节数组的基础方式。有关详细信息，请参阅[NSMutableData 类参考](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSMutableData_Class/Reference/NSMutableData.html)。

```
NSMutableData* data = [NSMutableData dataWithLength:1024]; // One kilobyte
void* dataPointer = [data mutableBytes]; // Get a pointer to the raw bytes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T13:07:32.627

我在 C 中这样做是在作弊。

```
size_t width;
size_t height;
unsigned char *twoDimArray = calloc(width*height); 
```

# c# - Silverlight 3.0 可写位图

> ID：944599
> 
> 赞同：0
> 
> 时间：2009-06-03T12:59:08.963
> 
> 标签：c#, silverlight, silverlight-3.0

我有一个 writableBitmap 对象，我想将它保存在服务器上。有没有办法保存它可能是使用网络服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-19T08:28:34.407

您应该能够将其`byte[]`作为 Stream 发送到您自己的 Web 服务，或者将其序列化并发送到您喜欢的任何地方。

# javascript - 页面完成后加载文件而不重定向

> ID：944601
> 
> 赞同：1
> 
> 时间：2009-06-03T12:59:32.207
> 
> 标签：javascript, jquery, asp.net-mvc, file, download

我正在尝试做几乎相同的事情，例如在 Sourceforge 上。用户创建一些数据后，我生成一个文件，我希望在页面加载后将其提供给他。但是，我对 javascript 和简单的复制粘贴几乎一无所知

```
<script type="text/javascript">
    var download_url = "http://downloads.sourceforge.net/sourceforge/itextsharp/itextsharp-4.1.2-dll.zip?use_mirror=dfn";

    function downloadURL() {
        if (download_url.length != 0 && !jQuery.browser.msie) {
            window.location.href = download_url;
        }
    }

    jQuery(window).load(downloadURL);

</script> 
```

是不足够的。用户下载文件很重要，那么怎么做呢？

与前面相关的一个问题是 - 我创建的文件存储在哪里？曾经在使用 asp.net 开发服务器，然后在真正的 IIS 服务器上？这个地址应该怎么看？当我尝试

```
setTimeout("window.location.href='file://localhost/C:/Downloads/file.pdf'", 2000); 
```

我什么也没得到，HTTP 出现未知地址的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T13:03:47.580

您要求用户的浏览器在他们自己的计算机上查找文件……您正试图将其保存在那里。

你可以使用类似的东西：

```
window.location.href='http://www.yourServer.com/generatePDF.asp?whatever=whatever' 
```

其中[http://www.yourServer.com/generatePDF.asp?whatever=whatever](http://www.yourServer.com/generatePDF.asp?whatever=whatever)是什么为用户生成 pdf 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T13:09:56.163

在服务器上，您必须将响应标头中的内容处置设置为“附件”，如[这些答案](https://stackoverflow.com/questions/40943/how-to-automatically-start-a-download-in-php)中所述。

如果这样做，下载将不会影响浏览器中当前显示的页面。因此，如果您在 Javascript 中发起一个获取附件的请求，浏览器将不理会该页面，用户将看到一个带有打开/保存/取消问题的消息框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T13:17:48.723

请参阅[Haack 的 DownloadResult](http://haacked.com/archive/2008/05/10/writing-a-custom-file-download-action-result-for-asp.net-mvc.aspx)示例。它准确地解释了（我认为）你正在做什么。除非您将超时调用与您的下载操作 url 一起提供。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-04T11:26:43.333

您可以创建自己的 PdfResult 来扩展 ActionResult ，如下所示：

```
public class PdfResult : ActionResult
{
    public byte[] Content { get; set; }
    public string FileName { get; set; }

    public override void ExecuteResult(ControllerContext context)
    {
        var response = context.HttpContext.Response;
        response.AddHeader("content-disposition", "attachment; filename=" + this.FileName);
        response.AddHeader("content-length", this.Content.Length.ToString());
        response.ContentType = "application/pdf";

        using (MemoryStream memoryStream = new MemoryStream(this.Content))
        {
            memoryStream.WriteTo(response.OutputStream);
        }

        response.End();
    } 
```

然后在您的操作中，您可以简单地返回文件，如下所示：

```
 public ActionResult Pdf(string param1...)
    {
        var content = GeneratePdf(); //etc
        var fileName = AssignFileName();

        return new PdfResult { Content = content, FileName = fileName + ".pdf" };
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T13:15:08.370

几个不同的东西。首先，由于您使用的是 MVC，因此创建一个实际生成文件并将其作为[FileResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.fileresult.aspx)返回的操作。该文件可以是服务器上的实际文件，但也可以动态生成——比如在 MemoryStream 中——并由此创建 FileResult。将内容设置为 application/octet-stream 或实际文件类型（如果不是通过插件在浏览器中呈现的文件类型）。其次，不要在呈现页面的操作中生成文件，而是使用您引用的技术调用从该页面生成 FileResult 的操作（尽管看起来他们正在为 IE 做一些不同的事情）。如果 MIME 类型不是可以呈现的类型，它将被下载。

```
public ActionResult GenerateFile( string value, int other )
{

   MemoryStream file = new MemoryStream();
   ...

   return File( file, "application/octet-stream" );
} 
```

# entity-framework - ADO.NET Entity Framework 中是否有瞬态类型？

> ID：944602
> 
> 赞同：2
> 
> 时间：2009-06-03T12:59:45.310
> 
> 标签：entity-framework, .net-3.5

我正在使用 .net 3.5 框架 sp1 和 VS 2008 sp1。我创建了一个 edmx 模型。我无法创建瞬态（未持久化到数据库）属性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T13:03:35.397

您可以将属性添加到您有兴趣添加瞬态属性的类型的部分类 - 请参阅[此处](http://msdn.microsoft.com/en-us/library/bb738696.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T20:54:27.473

实体数据模型目前不支持瞬态属性的概念。但是，正如 Christopher 指出的那样，您可以在不映射到实体属性的部分类中创建 CLR 属性。

这可以正常工作，但请记住，在 LINQ to Entity 查询中对该属性的所有引用都将导致异常。

# .net - 是否有一种简单的方法来输出人类可读的对象图（特别是针对异常）

> ID：944603
> 
> 赞同：2
> 
> 时间：2009-06-03T12:59:46.670
> 
> 标签：.net, reflection, serialization, exception-handling

我有一个未处理的异常处理程序（如果有一个矛盾处理程序），但我想从中获取更多信息。

目前它记录异常消息、堆栈跟踪等，并递归地对任何内部异常执行相同的操作。然而，异常通常是异常类的派生类型，因此我不知道它会是什么样子。所以我想要一些代码使用反射将所有原始字段和属性作为名称/值对输出到文本文件，然后递归地对对象图中的任何非原始对象执行相同操作。

我自己尝试过这样做，但很快意识到我必须处理收藏等问题，而且之前一定有人这样做过。我想另一种选择可能是使用序列化。

有没有人这样做过？有代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T13:26:18.223

您可以使用反射来输出异常的所有属性，但是您应该警惕过于复杂的日志记录/异常处理代码，因为异常处理程序中的异常可能会让您没有有用的调试信息来调试原始异常。特别是，如果您要递归输出该异常的任何非原始对象，那么请考虑如果您有任何循环引用会发生什么。

每当我想记录所有内容时，我通常只使用 ex.ToString() - 它看起来并不漂亮，并且可能不包含异常中的**所有**数据（除非基类重载了 ToString() 方法）但是我发现一般来说它包含足够的信息。

或者，如果您正在处理您可以控制的自定义异常，那么您可能会发现序列化是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-04T18:11:41.320

我会看看[ELMAH](http://code.google.com/p/elmah/)项目。它是为 ASP.NET 设计的，所以你不能直接将它用于 WinForms 项目，但它可能有一些激发灵感的想法。

# wpf - WPF 与 Silverlight

> ID：944608
> 
> 赞同：126
> 
> 时间：2009-06-03T13:00:39.973
> 
> 标签：wpf, silverlight

> **可能重复：**
> [WPF 和 Silverlight 应用程序有什么区别？](https://stackoverflow.com/questions/629927/what-is-the-difference-between-wpf-and-silverlight-application)

WPF 和 Silverlight 之间的确切区别是什么？

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2009-06-03T13:42:58.483

这是一个非常广泛的问题。我的公司最近写了一份白皮书，概述了这两种技术之间的差异，大约有 70 页。不幸的是，它还没有发布，或者我会给你链接。

> **编辑：正如所承诺的，这里是 Codeplex 白皮书的链接：
> 
> [http ://wpfslguidance.codeplex.com/](http://wpfslguidance.codeplex.com/)**

不过，我会试着总结一下。

1.  WPF 是一个厚 Windows 客户端平台，可以访问完整的 .Net 框架。Silverlight 是一种基于浏览器的技术，可以访问 .Net 框架的子集（称为 CoreCLR）。因此，您会注意到在框架中使用看似日常的方法和对象的差异。例如，String 类的 Split() 方法在 Silverlight 中有 3 个覆盖，但在 .Net Framework 中有 6 个。你会看到很多这样的差异。

2.  在 WPF 中，所有视觉呈现元素都派生自 Visual 基类。在 Silverlight 中，它们不会；相反，它们源自 Control。然而，这两种技术最终都从层次结构中的 DependencyObject 类派生而来。

3.  WPF 目前提供或拥有比 Silverlight 更多的用户控件；尽管通过 Silverlight 工具包和即将发布的 Silverlight 3 可以缓解这种差异。

4.  WPF 支持 3 种类型的路由事件（直接、冒泡和隧道）。Silverlight 仅支持直接和冒泡。

5.  下一个版本的 Silverlight 将缓解相当多的数据绑定差异。目前，Silverlight 不支持绑定模式、OneWayToSource 或显式 UpdateSourceTriggers。此外，如果未设置，Silverlight 默认使用 OneWay 数据绑定，而 WPF 使用依赖属性指定的默认模式。

6.  Silveright 不支持 MultiBinding。

7.  Silverlight 支持 XmlDataProvider，但不支持 ObjectDataProvider。WPF 两者都支持。

8.  Silverlight 只能进行异步网络调用。WPF 可以访问完整的 .Net 网络堆栈，并且可以进行任何类型的调用。此外，目前，Silverlight 支持 SOAP，但不能原生处理 SOAP 错误异常（这在 Silverlight 3 中可能会改变）。

9.  密码学存在巨大差异（Silverlight 在命名空间中有 20 个类，而 WPF 可以访问 107 个）。基本上，Silverlight 仅支持 4 种散列算法和 AES 加密协议。

10.  Silverlight 尚不支持：命令、验证、打印、XPS 文档、语音、3D、可冻结对象或与 Windows 桌面的 InterOp；所有这些都在 WPF 中可用。

11.  Silverlight 支持浏览器互操作、更多媒体流选项，包括时间线标记和 Deep Zoom。WPF 还不支持这些功能。

这绝不是完整的，因为我试图将 70 页的文档缩减为项目符号。

最后，即使存在所有这些差异，微软仍在努力缩小这两种技术之间的差距。Silverlight 工具包和 WPF 工具包都解决了每种技术的一些缺点。Silverlight 3 将添加许多当前不可用的功能（例如元素到元素的数据绑定）。但是由于核心库的不同，总会有一些Framework的差异。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-03T13:06:15.547

WPF 是一种 Windows 桌面技术，用于在 .Net 框架中开发 Windows 应用程序。

Silverlight 是一种 Web 技术，在 Windows 和 MAC 上都受到浏览器插件的完全支持（与 Flash 类似）。还有一个用于在 Linux (Moonlight) 上运行 Silverlight 的插件。

虽然 WPF 和 Silverlight 提供的功能（在用户界面组件和对 XAML 的支持方面）之间存在相似之处，但 Silverlight 是一个非常小的框架，包含 WPF 功能的子集。Silverlight 的较新版本实际上包含一些 WPF 中没有的功能，因此它不再是真正的子集。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-03T13:43:02.930

WPF 具有 Silverlight 所不具备的功能：基于 DirectX 的完整 3d 引擎、Windows 集成（例如 Windows 7 任务栏缩略图和系统注册表可用性）以及对包括 Oracle 数据库支持在内的完整 .NET 框架的访问。此外，SL 在安全沙箱中运行，可防止访问诸如整个文件系统之类的东西，WPF 应用程序可以在其中运行完全信任并具有完整的系统访问权限。

如上所述，SL 开创了一些技术，例如 VisualStateManager，这些技术通过 Microsoft 支持的 WPF 工具包将其二次集成到 WPF 中。

如果您正在寻找适合您的项目的技术，这里有一个简单的方法来查看它：如果您正在编写一个可以在与网络断开连接时运行的应用程序，或者如果您正在编写一个需要访问上面列出的 Windows 特定功能，然后 WPF 是要走的路。对于与平台无关、支持 Web 的应用程序，Silverlight 是一个合适的选择。嗯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-27T09:33:58.373

你可以说它[非常] 大致类似于 Flex 和 Adob​​e Air 之间的区别，但这有点误导。

WPF 是指 .NET Framework 3.0 及更高版本用户可以访问以绘制到屏幕的一组技术（通过 API 公开）。

许多 WPF API 可用于 Silverlight 应用程序。

当然，除了 WPF 之外，Silverlight 下还有许多其他 API 可用，因为 SL 应用程序需要做的不仅仅是在屏幕上绘制。

# java - 如何访问 jar 中的配置文件？

> ID：944610
> 
> 赞同：7
> 
> 时间：2009-06-03T13:01:27.133
> 
> 标签：java, jar

我正在使用[FlatPack](http://flatpack.sourceforge.net/)从平面文件中解析和加载数据。这需要加载一个配置文件，该文件存储平面文件列的映射。

我有一个常量来定义映射文件的位置：

```
private static final String MAPPING_FILE = "src/com/company/config/Maping.pzmap.xml"; 
```

我有一个实际进行解析的 parse(File dataFile) 方法：

```
private void parse(File dataFile) throws FileNotFoundException, SQLException {
        Parser parser;

        log.info("Parsing " + dataFile.getName());

        FileReader mappingFileReader = new FileReader(MAPPING_FILE);
        FileReader dataFileReader = new FileReader(dataFile);

        parser = DefaultParserFactory.getInstance().newFixedLengthParser(mappingFileReader, dataFileReader);
        parser.setHandlingShortLines(true);

        DataSet dataSet = parser.parse();

        //process the data
} 
```

当我把所有东西都装起来并作为一个罐子运行时——它会`FileReader mappingFileReader = new FileReader(MAPPING_FILE);`用`FileNotFoundException`. 那个文件虽然在罐子里。

我怎么去呢？

我已经查看了[这个问题](https://stackoverflow.com/questions/600146/run-exe-which-is-packaged-inside-jar)和[这个](https://stackoverflow.com/questions/463972/creating-a-new-file-using-an-existing-file-within-a-jar)关于访问 jars 中文件的问题，他们都建议临时提取文件。不过我不想那样做。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-03T13:03:23.433

如果它在 JAR 中，一般来说，它不是文件。[`Class.getResourceAsStream(String)`](http://java.sun.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String))您应该使用或类似的东西加载数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T13:04:53.757

我认为它只是在这里解决：

[http://www.velocityreviews.com/forums/t129474-beginner-question-how-to-access-an-xml-file-inside-a-jar-without-extracting-it.html](http://www.velocityreviews.com/forums/t129474-beginner-question-how-to-access-an-xml-file-inside-a-jar-without-extracting-it.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T15:58:10.437

如果我没记错的话，getResourceAsStream() 的行为可能会有所不同，具体取决于您的 webapp 部署的 Web 服务器，例如，我认为在 Websphere 实例上部署为战争时可能会出现问题。但我不确定这是否适用于你。

但我不确定您是否正在尝试解决“正确”问题：如果它是一个配置文件，这意味着数据依赖对吗？不依赖代码（你的 jar ）？当平面文件更改时，您的配置文件也需要更改，对吗？如果这是真的，听起来配置应该更好地存储在其他地方，或者甚至作为参数传递给你的 jar。

但也许我还没有完全理解你的问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T17:27:45.077

使用 Apache Commons Configuration，然后你可以读/写 XML，自动更新，在路径或 jar 中查找配置文件，没有很多麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-10T04:49:43.280

下面的代码对我有用：

进口：

```
import java.io.IOException;
import java.io.InputStream;
import java.util.Properties; 
```

代码：

```
 Properties properties = new Properties();
    InputStream in = MyCLassName.class.getClassLoader().getResourceAsStream(configFilePath); //pass the config.properties file path with file name
    try {
        properties.load(in);
        properties.getProperty("username"); //here put the key from config.properties
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

# xml - emacs：HideShow 是否适用于 xml 模式（sgml 模式）？

> ID：944614
> 
> 赞同：8
> 
> 时间：2009-06-03T13:03:04.807
> 
> 标签：xml, emacs

我在我的 cc 模式缓冲区中使用 hideshow.el 来折叠我没有查看的文件部分。

如果能够在 XML 文档中做到这一点，那就太好了。我使用 emacs 22.2.1 和内置的 sgml-mode 进行 xml 编辑。我还没有获得使用 XML 的 hideshow。我的意思是，我打开了次要模式，但击键没有效果。哦，除了，我确实收到了要折叠的 XML 注释。但是没有元素。

有没有人成功做到这一点？
建议？

* * *

**编辑**：如果我向 hs-special-modes-alist 添加一个 sgml-mode 元素，我敢打赌它会起作用。我需要一个用于开始块的正则表达式。有人做过吗？

* * *

我还没有转到 nxml 模式。我是不是该？它会“折叠”还是隐藏？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-03T13:45:42.787

回答我自己的问题......我正在使用这样的东西。似乎工作。

```
;; Fix XML folding
(add-to-list 'hs-special-modes-alist
             (list 'nxml-mode
                   "<!--\\|<[^/>]*[^/]>"
                   "-->\\|</[^/>]*[^/]>"
                   "<!--"
                   'nxml-forward-element
                   nil))

;; Fix HTML folding
(dolist (mode '(sgml-mode
                html-mode
                html-erb-mode))
  (add-to-list 'hs-special-modes-alist
               (list mode
                     "<!--\\|<[^/>]*[^/]>"
                     "-->\\|</[^/>]*[^/]>"
                     "<!--"
                     'sgml-skip-tag-forward
                     nil))) 
```

# c# - 如何在 C#（Windows 应用程序）中将文件从本地系统复制到其他系统？

> ID：944619
> 
> 赞同：8
> 
> 时间：2009-06-03T13:04:23.057
> 
> 标签：c#, file-copying

我需要从我的 Windows C# 应用程序加载帮助文件并移动/复制到其他系统（到其本地驱动器）。本地系统上的应用程序（相同的 C# windows 应用程序）将使用它来寻求帮助。

需要做些什么来实现这一点？

我明白`File.Copy()`但我不知道，它是否也适用于远程系统？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-03T13:14:33.440

```
File.Copy(
    @"C:\localpath\file.hlp", 
    @"\\remotemachinename\localpathonremotemachine\file.hlp"); 
```

或者类似的东西......第二个值是UNC路径。

如果目标位置需要登录名和密码，则适用以下答案：[使用远程管理员凭据将文件复制到远程计算机](https://stackoverflow.com/questions/766033/copy-file-to-remote-computer-using-remote-admin-credentials/766086#766086)（感谢 Carlos Rendon 找到它）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T13:08:55.887

[File.Copy()](http://msdn.microsoft.com/en-us/library/system.io.file.copy.aspx)将现有文件复制到新文件。目标可以是远程共享 (UNC)。

# vim - vim-snipmate 和 supertab 在一起

> ID：944624
> 
> 赞同：18
> 
> 时间：2009-06-03T13:05:33.927
> 
> 标签：vim

我只是尝试安装 snipmate。supertab 已经在工作了。

它不起作用。当我即使在一个片段关键字之后按 Tab 键时，也会触发完成。我试图重新映射密钥（到 cm），但即使这样，也会触发完成而不是 snipmate。（在重新映射厘米之前没有做任何事情）。

我在 vimrc 中做了这个映射。文档告诉我在 after/plugin/snipmate.vim 中执行此操作，但未加载此脚本（根据 :scriptnames）。

任何想法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2011-05-31T11:00:01.097

snipmate 插件好久没更新了。这就是为什么我开始了一个友好的分叉，我正在合并和协调这个（至少对我而言）必不可少的插件的进一步开发。

更多信息：[https ://github.com/garbas/vim-snipmate/blob/master/README.md](https://github.com/garbas/vim-snipmate/blob/master/README.md)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-10T11:05:44.283

我从 vim.org 运行旧版本的 snipmate 时遇到了非常相似的问题

编写它的人并不总是更新 vim.org 页面，但他确实经常在 github 上进行处理。

[从此处](http://github.com/msanders/snipmate.vim/tree/master)的下载链接获取最新副本，看看是否对您有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-02-15T19:43:15.430

你重新映射到`<C-m>`什么？`<Tab>`或者你的插件函数调用？你试过没有 SuperTab 的 SnipMate 吗？

这两个插件都有硬连线的主要功能，`<Tab>`这使得它们的使用有点不可预测。我试过了，但我不喜欢它。

相反，也许你可以保留 SnipMate（如果它自己工作的话）并将omnicompletion 快捷方式重新映射到更容易的东西。我的 .vimrc 中有这些：

```
" change the mapleader from \ to ,
let mapleader=","

" omnicompletion : words
inoremap <leader>, <C-x><C-o>

" omnicompletion : filenames
inoremap <leader>: <C-x><C-f>

" omnicompletion : lines
inoremap <leader>= <C-x><C-l> 
```

[autocomplpop.vim](http://www.vim.org/scripts/script.php?script_id=1879&rating=life_changing)也能很好地工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-13T14:29:51.010

使用 SuperTab 2.0 版本。

不要使用最新的 2.1 版本，它不能相互兼容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-17T05:52:01.573

将它添加到 .vimrc，当您使用 Tab 时，然后显示片段列表。

`au BufRead,BufNewFile *.py set expandtab au BufRead,BufNewFile *.sh set expandtab au BufRead,BufNewFile *.go set expandtab`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-07T20:10:14.300

我设法将 SnippMate 的 TAB 键重新映射到另一个键，在我的例子中是 cj，它工作正常：

```
ino <silent> <c-j><c-r>=TriggerSnippet()<cr>
snor <silent> <c-j> <esc>i<right><c-r>=TriggerSnippet()<cr> 
```

我做了改变`after/plugin/snipmate.vim`。就我而言，*:scriptnames*将文件列为已加载。

# sql - 按整数排序，底部有空白字段

> ID：944629
> 
> 赞同：3
> 
> 时间：2009-06-03T13:06:04.067
> 
> 标签：sql, sql-server, sql-server-2008

我们目前正在重写我们的 CMS，我们希望我们的客户能够使用“位置”字段重新排序表格中的项目。因此，如果他们将一个项目标记为位置 1，它将位于顶部，然后位置 2 在其下方，依此类推。

问题是我们不希望他们每次都必须填写一个位置，只有当他们想要重新订购某些东西时，所以位置字段通常是空白的。所以你可能有以下...

车 - 1

自行车 - 2

房子

电脑

狗

这会导致问题，因为如果您使用以下 SQL...

```
SELECT ProductName FROM Products ORDER BY Position DESC; 
```

所有空白的都到顶部，而不是底部。

可以使用 SQL 语句将它们按正确的顺序排列吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-03T13:13:50.727

```
SELECT ProductName
FROM Products
ORDER BY
  CASE WHEN Position is null THEN 1 ELSE 0 END,
  Position 
```

如果您想在底部保持空值的同时按 Position Descending 排序，可以这样做：

```
ORDER BY
  CASE WHEN Position is null THEN 1 ELSE 0 END,
  Position desc 
```

如果您想要一致的排序（您可能正在分页），请在末尾添加 ProductName 或 ProductID 以打破未定位产品之间的所有联系。

```
ORDER BY
  CASE WHEN Position is null THEN 1 ELSE 0 END,
  Position,
  ProductID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T13:08:22.987

```
SELECT  ProductName
FROM    Products
ORDER BY
        COALESCE(position, (SELECT MAX(position) + 1 FROM Products)) 
```

或者，您可以使用：

```
SELECT  *
FROM    (
        SELECT  ProductName
        FROM    Products
        WHERE   position IS NOT NULL
        ORDER BY
                position
        ) q
UNION ALL
SELECT  ProductName
FROM    Products
WHERE   position IS NULL 
```

这将更有效率，因为第一个子查询将使用索引来`position`进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T13:25:20.440

这应该为您完成这项工作。

```
CREATE TABLE [dbo].[Test](
    [Position] [int] NULL,
    [Title] [varchar](15) NULL
) 
GO

INSERT INTO Test Values(1, 'P1')
INSERT INTO Test Values(2, 'P2')
INSERT INTO Test Values(NULL, 'P3')
INSERT INTO Test Values(NULL, 'P4')
INSERT INTO Test Values(NULL, 'P5')
GO

SELECT Title + ' - ' +  CASE  
    WHEN POSITION IS NULL THEN ''
    ELSE CAST(Position AS CHAR(3))
    END
FROM Test
ORDER BY CASE WHEN Position is null THEN 1 ELSE 0 END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T13:27:29.217

**仅在必要时使用 NULL**

您可以通过将“未设置”行默认为整数最大值来轻松消除空值的使用以及由此产生的排序问题：

*   更新产品 SET Position=2147483647 WHERE Position IS NULL
*   将列设置为 NOT NULL，添加默认值 2147483647
*   按预期使用您的 ORDER BY
*   在您的应用程序或负载查询中，禁止显示 2147483647 的任何值

这是一个示例负载：

```
SELECT 
    ProductName
        ,CASE
             WHEN Position=2147483647 THEN NULL  --or cast this as a varchar and use 'N/A'
             ELSE Position
         END
    FROM ... 
```

如果您必须使用空值，请这样做：

```
SELECT
    ProductName
        ,Position
    FROM Test
    ORDER BY COALESCE(Position,2147483647) 
```

# .net - fuslogvw中Default/NativeImage是什么意思？

> ID：944633
> 
> 赞同：4
> 
> 时间：2009-06-03T13:06:34.643
> 
> 标签：.net, assembly-resolution

我偶尔使用 fuslogvw 来跟踪加载程序集的问题。在我使用它的所有时间之后，似乎文件夹“NativeImage”具有加载我的 dll 的本机图像的结果。当找不到本机图像（通常不是）时，我认为它会查找 .net 程序集。“默认”文件夹是我通常关心的，因为它包含所有程序集绑定的日志，这通常是我的问题所在。

谁能在这里解释真正的区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-18T12:56:57.450

本机映像是 DLL 的 JIT 编译版本。如果它们不存在，则定位并使用非 JIT-ted 版本。

[本文](http://web.archive.org/web/20100813121241/http://www.grimes.demon.co.uk/workshops/fusWSTwelve.htm)更详细地解释了原生镜像以及如何将它们与 fuslogvw 一起使用。

# makefile - 出错——我该如何解决这个问题？

> ID：944635
> 
> 赞同：1
> 
> 时间：2009-06-03T13:06:50.447
> 
> 标签：makefile

我有很多 C 文件，我通过 Visual Studio 2005 通过命令行使用 makefile 构建了它。所有目标文件都正确生成，链接过程也正常，但最终的 *.exe 没有生成。在最后一行，有以下错误。我完全不懂。有谁能够帮我？

这是错误：

```
process_begin: CreateProcess((null), /link /nologo /subsystem:console /o uartsim.exe xtmpmain.obj ua
rtsim.obj fiber_driver.obj xtmp_options.obj getopt.obj D:\usr\xtensa\XtDevToolsDE\install\tools\RB-2
008.4-win32\XtensaTools\lib\iss\xtmp.lib, ...) 失败。
make (e=2): 系统找不到指定的文件。
make.exe: *** [uartsim.exe] 错误 2

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T13:14:07.577

Make 找不到 uartsim.exe 文件。它要么不在您的计算机上，要么不在您的 PATH 中。

尝试定位文件，检查文件路径是如何传递给 Visual Studio 的（环境变量，绝对路径，只是可执行文件名）。如果它只是可执行文件名，则意味着您必须在 PATH 中已经拥有它才能使其工作。

# php - 如何在很长一段时间内逐步向浏览器显示 HTML？

> ID：944644
> 
> 赞同：12
> 
> 时间：2009-06-03T13:08:39.130
> 
> 标签：php, xmlhttprequest, comet

我是否需要传回任何 HTTP 标头来告诉浏览器我的服务器不会立即关闭连接并在收到 HTML 时显示？是否有必要让 HTML 像 flush() 那样增量显示？

这种技术曾经用于聊天之类的事情，但我正在考虑将它用于 COMET 类型的应用程序。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-03T13:30:29.103

[长轮询](http://en.wikipedia.org/wiki/Push_technology#Long_polling)是执行此类操作的常用技术；简而言之，它的工作原理如下：

1.  客户端向服务器发送 XHR。

    *   如果有数据准备好，服务器会立即返回。
    *   如果没有，服务器保持连接打开，直到数据可用，然后返回。
    *   如果请求超时，请返回 1)。
2.  客户端上运行的页面接收此数据，并对其进行处理。

3.  回到 1)

这就是 Facebook[实现其聊天功能的](http://www.hfadeel.com/Blog/?p=128)方式。

[本文](http://cometdaily.com/2007/11/16/more-on-long-polling/)还澄清了长轮询的一些误解，并详细说明了这样做的一些好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T13:28:16.893

当客户端在一定时间内没有收到任何数据时，将关闭连接。此超时不受 HTTP 标头的影响。它是特定于客户端的，通常设置为 120 秒 IIRC。

因此，您所要做的就是定期发送少量数据以避免超时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T13:19:29.297

我认为一个更强大的解决方案是一个带有 Javascript 计时器的页面，它可以轮询服务器以获取新数据。保持响应开放并不是 HTTP 协议的设计目的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T13:23:29.727

我会在我去的时候回显/打印 HTML。有几种不同的方法可以让脚本在发送下一个位之前暂停。您不需要对标头或任何特殊代码执行任何操作来告诉浏览器等待。只要您的脚本仍在运行，它就会呈现从脚本接收到的 HTML。

```
echo "<HTML><HEAD.../HEAD><BODY>";
while (running)
{
    echo "printing html... </br>";
}
echo "</BODY></HTML>";  //all done 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-03T13:28:21.213

尝试永远框架（如在 gmail 中）

所有这些技术都只是黑客，http 不是为了做到这一点而设计的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-03T15:16:46.847

在脚本的末尾，使用类似这样的东西（假设您通过将 ob_start() 放在页面顶部来打开输出缓冲

```
<?php

set_time_limit(0); // Stop PHP from closing script after 30 seconds

ob_start();

echo str_pad('', 1024 * 1024, 'x'); // Dummy 1 megabyte string

$buffer = ob_get_clean();

while (isset($buffer[0])) {

$send = substr($buffer, 0, 1024 * 30); // Get 30kbs bytes from buffer :D
$buffer = substr($buffer, 1024 * 30); // Shorten buffer

echo $send; // Send buffer
echo '<br />'; // forces browser to reload contents some how :P

ob_flush(); // Flush output to browser
flush(); 

sleep(1); // Sleep for 1 second

}

?> 
```

无论用户和服务器连接有多快，该脚本基本上都会以 30kbs（模拟）输出 1 兆字节的文本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-03T13:13:38.030

根据您正在执行的操作，您可以在脚本继续执行时回显，然后在回显时将 html 发送到浏览器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-03T13:26:35.727

我建议您研究使用 Ajax 而不是普通的旧 HTML 来实现此类功能。这使您在架构设计和用户界面方面具有更大的灵活性

# delphi - 如何在客户端仍然连接时更新 DataSnap 服务器？

> ID：944648
> 
> 赞同：5
> 
> 时间：2009-06-03T13:09:12.093
> 
> 标签：delphi, delphi-2009, delphi-2010, datasnap, delphi-xe

我们将有状态的 DataSnap 服务器用于一些业务逻辑任务，并提供客户端数据集数据。

如果我们必须更新服务器来修改业务规则，我们将新版本复制到一个新的空文件夹并注册它（取决于 Delphi 版本，只需启动或运行 TRegSvr 实用程序）。

即使旧服务器实例正在运行，我们也可以这样做。但是，**注册新版本后，所有新的客户端连接仍将使用当前正在运行的（旧）服务器实例**。所有客户端都必须先断开连接，然后新服务器将用于下一个客户端。

有没有办法在注册后立即**将所有新客户端连接定向到新服务器**？

（我知道新的或更改的方法签名也需要更改并重新启动客户端，但这个问题是关于不影响界面的内部修改）

我们使用的是 Socket 连接，所有客户端共享同一个服务器应用程序（只打开一个应用程序窗口）。在早期，我们使用了远程数据模块的不同配置，这导致每个客户端有一个应用程序窗口。也许这可能是一个解决方案？（因为每个新客户端都会启动当前注册的可执行文件）

更新：Delphi XE 是否为“热部署”（更新的服务器）提供一些支持？我们目前使用 Delphi 2009，但如果它提供更轻松的“热部署”实施，我们将升级到 XE。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-09T06:23:05.757

您可以将您的应用程序服务器分成 2 个新服务器，一个是一个简单的代理对象，将所有方法（如果有的话还可以包含状态信息）重定向到第二个实际实现您的业务逻辑的对象。如果您决定随时更换业务应用服务器，您还需要在代理服务器中实现“静默重新连接”功能，以免打扰连接的客户端。我自己以前从未做过这样的设计，但希望这个想法很清楚

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-11T04:17:04.023

这个问题可能没有一个简单的答案，我怀疑您将不得不修改客户端。我能想到的最简单的解决方案是在服务器上设置一个标志（某个通常称为方法的属性或输出参数），客户端会定期检查该标志，告诉客户端断开连接并重新连接（称为 ImBeingRetired 之类的东西）。

在某些情况下也可以为 datasnap 编写回调（尽管我从未这样做过）。这将允许服务器通知客户端它应该重新启动或重新连接。

我能想到的最后一个选项（尚未提到）是使客户端/服务器无状态，以便每次客户端想要连接的东西时，得到它想要的东西然后断开连接。

不幸的是，这些选项都不是您想要的问题的答案，但可能会给您一些想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-04T11:58:48.370

您是否尝试过重命名当前服务器并将新服务器以正确的名称放在相同的位置（而不是更改注册表位置）。我之前成功地为 COM 库做过这个。我不确定它是否适用于远程启动规则，因为它可能会寻找一个现有的实例来连接，而不是一个全新的服务器。

这可能有点骇人听闻，但您会让客户端调用服务器上的一个方法，指示有更新的版本可用。这将允许它执行任何必要的清理，因此它最终不会同时与现有服务器实例和新服务器实例通信。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-07T16:18:08.817

1.  （可选）设置 vmware vSphere、ESX，或查找已有的托管服务。
2.  将会话变量存储在 db 中。
3.  准备 2 个具有 2 个不同 IP 地址的网络盒并部署您的东西。
4.  设置 DNS、防火墙、负载平衡器或 BSD 虚拟机，以便名称“example.com”解析为 Web 框 1。
5.  将新版本部署到 web box 2。
6.  使用您选择的任何路由方法切换到 web box 2。
7.  如果一切正常，将新版本部署到 web box 1。

使用 DNS 可能是最简单的，但是映射传播到客户端需要时间（如果客户端在您的 LAN 之外），并且两个客户端可能会看到不同的结果。一些防火墙具有 IP 地址映射功能，您可以映射公共 IP 地址和内部 IP 地址。理想的方法是使用负载均衡器并将其配置为 50:50，并在您想要升级时将其更改为 100:0，但它需要花钱。一种更便宜的替代方法是在 BSD vm 上运行软件负载平衡器，但它可能需要一些工作。

**编辑**：我的意思是会话变量，而不是会话。你说服务器是有状态的。如果它包含一些使用会话变量的业务逻辑，则需要将其存储在外部，以便在切换期间在重新连接时保留。实际的 DataSnap 会话将丢失，因此当您在升级过程中关闭 web box 1 时，客户端将收到 web box 1 的“Session {some-uuid} is not found”错误，它将重新连接到 web box 2。您也可以使用 3 个 IP 地址（1 个公共和 2 个私有），因此客户端总是看到 1 个地址，这是更好的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-10-25T16:07:07.403

我通过拥有一个保存我的“数据版本”的特定表来做了类似的事情。每次我更新服务器或更改系统范围的全局设置时，我都会增加这个字段。当客户端启动时，它总是检查这个值，并在任何事务/查询之前再次检查。如果该值与我刚开始时的值不同，那么我需要通过我的重新初始化逻辑，这可以很容易地包括重新登录到更新的服务器。

我正在使用 IIS 发布我的应用服务器，因此会更改的数据将是应用服务器的路径。我保留了旧的可用，以响应任何正在进行的现有交易。最终，一旦我知道该版本不再有客户端连接，这些将被删除。

如果您记录客户端上次连接的服务器（因此会知道），您可以轻松地知道要保留哪些版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T16:05:18.273

对于较新的版本（Delphi 2010 及更高版本），有一个有趣的解决方案

*   对于使用 HTTP 传输的系统：

[在 DataSnap 2010 中实现故障转移和负载平衡 作者 Andreano Lanusse](http://www.andreanolanusse.com/en/implementing-failover-and-load-balancing-in-datasnap-2010/)

*   以及 TCP/IP 传输的相关问题：

[如何将 DataSnap 客户端连接定向到各种 DS 服务器？](https://stackoverflow.com/questions/11824347/how-to-direct-datasnap-client-connections-to-various-ds-servers)

# c# - 使用 lambda 参数时如何减少类型声明？

> ID：944650
> 
> 赞同：1
> 
> 时间：2009-06-03T13:10:00.377
> 
> 标签：c#, generics, lambda, type-inference

下面是我拥有的一些代码的大幅缩减版本

```
public class DataInfo<T>
{
    public DataInfo(string description, Func<T, object> funcToGetValue)
    {
        this.description = description;
        this.funcToGetValue= funcToGetValue;
    }

    public readonly string description;
    public readonly Func<T, object> funcToGetValue;
}

public class DataType1
{
    public int fieldA { get; set; }
    public string fieldB { get; set; }
}

public class CurrentUse
{
    static List<DataInfo<DataType1>> data1 = new List<DataInfo<DataType1>>()
    {
        new DataInfo<DataType1>("someStuff", data => data.fieldA),
        new DataInfo<DataType1>("someOtherStuff", data => data.fieldB)
    };
} 
```

（有很多类型，不用担心不是所有内容都是公开的！）

这是有效的，就目前而言还可以，但我必须不断重复的事实让我`new DataInfo<DataType1>`有点困扰。

我尝试创建 DataInfo 的非通用助手版本来为我创建对象

```
public class DataInfo
{
    public static DataInfo<T> Create<T>(string description, Func<T, object> func)
    {
        return new DataInfo<T>(description, func);
    }
}
public class DesiredUse
{
    static List<DataInfo<DataType1>> data1 = new List<DataInfo<DataType1>>()
    {
        DataInfo.Create("someStuff", data => data.fieldA),
        DataInfo.Create("someOtherStuff", data => data.fieldB)
    };
} 
```

但这不起作用，因为编译器无法解析 fieldA 和 fieldB，因为它无法推断数据的类型。

有什么想法可以摆脱重复的类型信息吗？我不介意进行更改，只要我最终得到一个 DataInfos 列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T13:20:42.883

我会创建一个构建器类：

```
public sealed class DataInfoListBuilder<T> : IEnumerable
{
    private readonly List<DataInfo<T>> list = new List<DataInfo<T>>();

    public void Add(string description, Func<T, object> function)
    {
         list.Add(DataInfo.Create<T>(description, function));
    }

    public List<DataInfo<T>> Build()
    {
        return list;
    }

    public IEnumerator GetEnumerator()
    {
        throw new InvalidOperationException
            ("IEnumerator only implemented for the benefit of the C# compiler");
    }
} 
```

然后将其用作：

```
static List<DataInfo<DataType1>> data1 = new DataInfoListBuilder<DataType1>
{
    { "someStuff", data => data.fieldA },
    { "someOtherStuff", data => data.fieldB }
}.Build(); 
```

我还没有测试过，但我认为应该可以。您可以在 DataInfo 中将其设为非泛型类型，在这种情况下您可以使用：

```
static List<DataInfo<DataType1>> data1 = new DataInfo<DataType1>.Builder
{ ... }.Build(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T13:44:34.410

您可以从 List> 继承并提供专门的 add 方法：

```
public class SpecialList<T> : List<DataInfo<T>>
{
    public void Add(string description, Func<T, object> func)
    {
        base.Add(new DataInfo<T>(description, func));
    }
} 
```

然后，您可以像这样使用它：

```
public class CurrentUse
{
    public static SpecialList<DataType1> Data1
    {
        get
        {
            SpecialList<DataType1> list = new SpecialList<DataType1>();
            list.Add("someStuff", data => data.fieldA);
            list.Add("someOtherStuff", data => data.fieldB);

            return list;
        }
    } 
```

# nsis - 我的安装程序中出现空框？如何删除它？

> ID：944653
> 
> 赞同：1
> 
> 时间：2009-06-03T13:10:45.023
> 
> 标签：nsis

我正在为我的应用程序使用一个非常简单的安装脚本，并在部分选择屏幕上显示一个空框。我想删除它，或者至少知道它的用途并填满它。

这是一个截图 [![替代文字](https://i.stack.imgur.com/8W8jS.png)](https://i.stack.imgur.com/8W8jS.png)

和我的安装脚本

```
; example2.nsi
;
; This script is based on example1.nsi, but it remember the directory, 
; has uninstall support and (optionally) installs start menu shortcuts.
;
; It will install ICV-MRI into a directory that the user selects,

;--------------------------------
!include "MUI.nsh"

; The name of the installer
Name "ICV-MRI"

; The file to write
OutFile "ICV-MRI_Setup.exe"

; The default installation directory
InstallDir $PROGRAMFILES\ICV-MRI

; Registry key to check for directory (so if you install again, it will 
; overwrite the old one automatically)
InstallDirRegKey HKLM "Software\ICV-MRI" "Install_Dir"

; Request application privileges for Windows Vista
RequestExecutionLevel admin

Function LaunchLink
  ExecShell "" "$INSTDIR\mri.exe"
FunctionEnd

;--------------------------------

; Pages

Page components
Page directory
Page instfiles

UninstPage uninstConfirm
UninstPage instfiles

;  !insertmacro MUI_PAGE_WELCOME
;  !insertmacro MUI_PAGE_DIRECTORY
;  !insertmacro MUI_PAGE_INSTFILES

    # These indented statements modify settings for MUI_PAGE_FINISH
    !define MUI_FINISHPAGE_NOAUTOCLOSE
    !define MUI_FINISHPAGE_RUN
    !define MUI_FINISHPAGE_RUN_NOTCHECKED
    !define MUI_FINISHPAGE_RUN_TEXT "Run MRI when the installer closes"
    !define MUI_FINISHPAGE_RUN_FUNCTION "LaunchLink"
    !define MUI_FINISHPAGE_SHOWREADME_NOTCHECKED
  !insertmacro MUI_PAGE_FINISH
!insertmacro MUI_LANGUAGE "English"

;--------------------------------

; The stuff to install
Section "ICV-MRI (required)"

  SectionIn RO

  ; Set output path to the installation directory.
  SetOutPath $INSTDIR

  ; Put file there
  File "dist\bz2.pyd"
  File "dist\library.zip"
  File "dist\mri.exe"
  File "dist\PyQt4.QtCore.pyd"
  File "dist\PyQt4.QtGui.pyd"
  File "dist\python26.dll"
  File "dist\QtCore4.dll"
  File "dist\QtGui4.dll"
  File "dist\select.pyd"
  File "dist\sip.pyd"
  File "dist\unicodedata.pyd"
  File "dist\w9xpopen.exe"

  ; Write the installation path into the registry
  WriteRegStr HKLM SOFTWARE\ICV-MRI "Install_Dir" "$INSTDIR"

  ; Write the uninstall keys for Windows
  WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\ICV-MRI" "DisplayName" "ICV-MRI"
  WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\ICV-MRI" "UninstallString" '"$INSTDIR\uninstall.exe"'
  WriteRegDWORD HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\ICV-MRI" "NoModify" 1
  WriteRegDWORD HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\ICV-MRI" "NoRepair" 1
  WriteUninstaller "uninstall.exe"

SectionEnd

; Optional section (can be disabled by the user)
Section "Start Menu Shortcuts"

  CreateDirectory "$SMPROGRAMS\ICV-MRI"
  CreateShortCut "$SMPROGRAMS\ICV-MRI\Uninstall.lnk" "$INSTDIR\uninstall.exe" "" "$INSTDIR\uninstall.exe" 0
  CreateShortCut "$SMPROGRAMS\ICV-MRI\ICV-MRI.lnk" "$INSTDIR\mri.exe" "" "$INSTDIR\mri.exe" 0

SectionEnd

Section "Desktop Shortcuts"

  CreateShortCut "$DESKTOP\ICV-MRI.lnk" "$INSTDIR\mri.exe" "" "$INSTDIR\mri.exe" 0

SectionEnd

;-------------------------------- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T13:57:48.440

如果要删除它，`!define MUI_COMPONENTSPAGE_NODESC`请在脚本顶部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T13:19:32.837

该框用于部分描述。

查看 Modern UI Basic.nsi 文件：

```
 ;--------------------------------
;Installer Sections

Section "Dummy Section" SecDummy

  SetOutPath "$INSTDIR"

  ;ADD YOUR OWN FILES HERE...

  ;Store installation folder
  WriteRegStr HKCU "Software\Modern UI Test" "" $INSTDIR

  ;Create uninstaller
  WriteUninstaller "$INSTDIR\Uninstall.exe"

SectionEnd

;--------------------------------
;Descriptions

  ;Language strings
  **LangString DESC_SecDummy ${LANG_ENGLISH} "A test section."**

  ;Assign language strings to sections
  **!insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN
    !insertmacro MUI_DESCRIPTION_TEXT ${SecDummy} $(DESC_SecDummy)
  !insertmacro MUI_FUNCTION_DESCRIPTION_END** 
```

阅读更多[Modern UI 自述文件](http://nsis.sourceforge.net/Docs/Modern%20UI/Readme.html)，组件页面描述部分。

> 现代 UI 组件页面有一个文本框，当用户将鼠标悬停在组件上时，可以在其中显示描述。如果您不想使用这些描述，请插入 MUI_COMPONENTSPAGE_NODESC 接口设置。
> 
> 要设置节的描述，需要在节命令中添加一个附加参数，该参数具有节的唯一标识符。此名称稍后可用于设置此部分的描述。

# linux - 有人可以给我一个删除 www 的 .htaccess 示例吗？

> ID：944657
> 
> 赞同：1
> 
> 时间：2009-06-03T13:11:59.000
> 
> 标签：linux, .htaccess

有人能给我一个 .htaccess 的例子，它会从 http:// 和 https:// 中删除 www 吗？

我想从 ssl 和 www:80 中删除 www

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T13:22:23.160

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www\.(.*) [NC]
RewriteRule (.*) //%1/$1 [L,R=301] 
```

# linux - 如何按字母顺序递归地对一堆文件进行排序

> ID：944659
> 
> 赞同：0
> 
> 时间：2009-06-03T13:12:16.893
> 
> 标签：linux, sorting, find

在 Ubuntu 上，我在一棵名为“output.txt”的树中有一堆文件。对于每个文件，我想用“排序”按字母顺序对行进行排序。我考虑过

寻找 。-name output.txt -exec 排序{} \;

但这会将排序的行输出到控制台，而不是更新我想要的原始文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T13:20:15.363

```
find . -name output.txt -exec sort{} -o{} \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-04T03:58:39.153

Fortran,

我会做一些不同的事情，我不会对文件进行排序。以防万一在排序后将任何新内容添加到文件中。这是我要做的：

*   镜像具有“output.txt”文件的目录树并将排序后的文件放在那里

像这样：

```
#!/bin/bash 

LIST=`find $1 -name output.txt`

for i in $LIST ; do
        X=`dirname $i`
        mkdir -p "sorted/$X"
        sort "$i" -o "sorted/$i"
done 
```

以上需要一点润色，mkdir 周围应该有一个“if”，并且应该检查 $1 的完整性

给你这个：

原文：

```
mytest
mytest/ccc
mytest/ccc/f
mytest/ccc/f/output.txt
mytest/ccc/d
mytest/ccc/d/output.txt
mytest/ccc/e
mytest/ccc/e/output.txt
mytest/bbb
mytest/bbb/f
mytest/bbb/d
mytest/bbb/e
mytest/aaa
mytest/aaa/f
mytest/aaa/f/output.txt
mytest/aaa/d
mytest/aaa/d/output.txt
mytest/aaa/e
mytest/aaa/e/output.txt 
```

输出：

```
sorted
sorted/mytest
sorted/mytest/ccc
sorted/mytest/ccc/f
sorted/mytest/ccc/f/output.txt
sorted/mytest/ccc/d
sorted/mytest/ccc/d/output.txt
sorted/mytest/ccc/e
sorted/mytest/ccc/e/output.txt
sorted/mytest/aaa
sorted/mytest/aaa/f
sorted/mytest/aaa/f/output.txt
sorted/mytest/aaa/d
sorted/mytest/aaa/d/output.txt
sorted/mytest/aaa/e
sorted/mytest/aaa/e/output.txt 
```

最后一件事我认为排序输出文件被写入 tmp 文件，然后在排序完成后重命名，否则输出文件可能会在读取所有内容之前截断输入文件。就像 sed 的就地选项一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T13:18:14.433

尝试这个

```
csh <enter>

foreach i ( `find . -type f -name output.txt -print`) <enter>
   cat $i | sort > $.sorted <enter>
end <enter> 
```

您将生成文件的排序副本。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-06-03T13:14:10.757

我没有大量使用Linux，所以我可能会弄错，但你不应该能够控制它`StdOut`吗？

```
find . -name output.txt -exec sort{} \ > output.txt 
```

# html - 为什么背景颜色对这个 DIV 没有影响？

> ID：944663
> 
> 赞同：35
> 
> 时间：2009-06-03T13:13:15.517
> 
> 标签：html, css

```
<div style="background-color:black" onmouseover="this.bgColor='white'">
    <div style="float:left">hello</div>
    <div style="float:right">world</div>
</div> 
```

为什么背景颜色不显示为黑色？我无法设置宽度和浮动，没有它们可以吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-06-03T13:16:12.143

由于外部 div 仅包含浮动 div，因此它以 0 高度呈现。要么给它一个高度，要么将其溢出设置为隐藏。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-06-03T13:16:58.663

将其更改为：

```
<div style="background-color:black; overflow:hidden;" onmouseover="this.bgColor='white'">
<div style="float:left">hello</div>
<div style="float:right">world</div>
</div> 
```

基本上外部 div 只包含浮点数。浮动从正常流程中移除。因此，外部 div 实际上什么都不包含，因此没有高度。它确实是黑色的，但你只是看不到它。

overflow:hidden 属性基本上使外部 div 包含浮动。另一种方法是：

```
<div style="background-color:black" onmouseover="this.bgColor='white'">
<div style="float:left">hello</div>
<div style="float:right">world</div>
<div style="clear:both></div>
</div> 
```

哦，为了完整起见，你应该更喜欢类而不是直接 CSS 样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T13:23:37.370

浮点数没有高度，因此包含 div 的高度为零。

```
<div style="background-color:black; overflow:hidden;zoom:1" onmouseover="this.bgColor='white'">
<div style="float:left">hello</div>
<div style="float:right">world</div>
</div> 
```

溢出：隐藏清除大多数浏览器的浮动。

zoom:1 清除 IE 的浮动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-30T21:18:42.580

这是一个非常古老的问题，但值得补充的是，我刚刚遇到了一个类似的问题，`footer`在我的案例中，元素上的背景颜色没有显示。我添加了一个`position: relative`有效的。

# c++ - 在 Eclipse 中设计 Qt + OpenGL 应用程序

> ID：944665
> 
> 赞同：3
> 
> 时间：2009-06-03T13:13:40.557
> 
> 标签：c++, eclipse, user-interface, qt, opengl

我正在为 Eclipse 中的 UI 使用 OpenGL 和 Qt 开始一个 C++ 项目。我想创建一个 UI，其中窗口的一部分包含用于 OpenGL 渲染的框架，其余部分将包含其他 Qt 小部件，例如按钮等。

我以前没有在 eclipse 中使用过 Qt 或 GUI 编辑器，我想知道最好的方法是什么？我应该通过手动编码创建 UI 还是使用 eclipse 的 GUI 设计器更容易 - 我快速浏览了一下，似乎没有内置 OpenGL 小部件。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-03T13:37:26.983

如果您使用的是 Qt Designer（我认为可以通过 Eclipse 集成获得），您可以在布局中放置一个基本 QWidget，然后将该小部件“提升”为 QGLWidget。去做这个：

1.  将 QWidget 添加到布局中的所需位置
2.  右键单击小部件
3.  选择“推广到”
4.  输入 QGLWidget 作为类名和标题
5.  点击*添加*
6.  从对话框顶部的提升小部件列表中选择 QGLWidget
7.  点击*推广*

这样您就不必通过占位符路线并创建附加层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T13:18:32.153

为什么不使用[Qt Eclipse 集成](http://www.qtsoftware.com/developer/eclipse-integration)？它完美地工作，使您能够直接从 Eclipse 编辑 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T13:22:33.673

我在使用 Qt Designer 时遇到了同样的问题。我使用一个简单的框架作为 OpenGL 小部件的占位符，然后，在主窗口构造函数中，我手动创建了 OpenGL 小部件并将其分配给占位符框架（作为一个孩子）。

这里的主要优点是您可以看到 OpenGL 小部件在设计界面时应该在哪里。主要缺点是仍然需要一些编码来设置 GUI。

# wpf - WPF 动态数据模板：GridView CellTemplate 不为空，但 VisualTree 属性为空

> ID：944671
> 
> 赞同：1
> 
> 时间：2009-06-03T13:14:36.577
> 
> 标签：wpf, listview, celltemplate

我正在尝试在运行时动态设置我的 ListView.GridView 的 CellTemplate 的 DataTemplate。问题是当我这样做时，什么也没有发生。我检查了 CellTemplate，它不为空，但它的 VisualTree 属性为空。有什么建议么？

```
GridViewColumn gvc = new GridViewColumn
    {
        Header = col.Label ?? col.Name,
        DisplayMemberBinding = binding                        
    };

DataTemplate cellTemplate = FindDataTemplate(listView, col.CellTemplate);
if (cellTemplate != null)
    gvc.CellTemplate = cellTemplate;

gridView.Columns.Add(gvc); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-06T17:34:48.620

显然，当您设置**DisplayMemberBinding**时，会忽略**CellTemplate 。**所以在使用**CellTemplate**时，不要设置**DisplayMemberBinding**。

[http://krishnabhargav.blogspot.com/2009/06/gridviewcolumn-celltemplate-does-not.html](http://krishnabhargav.blogspot.com/2009/06/gridviewcolumn-celltemplate-does-not.html)

# sharepoint - 我应该在哪里存储共享点安装中的 CSS 文件？

> ID：944673
> 
> 赞同：0
> 
> 时间：2009-06-03T13:14:46.920
> 
> 标签：sharepoint, deployment

我有一些 css 文件部署在“站点”范围内的功能中

它们包含对图像的一些调用（也由解决方案部署），因此路径类似于

```
background: #ffcc00 url(  '/sites/portal/Style Library/CSS/PersonalCenter.gif' ) repeat-x; 
```

但是，我非常希望能够部署到其他“站点/XXXX”，而不必更改所有 css 文件中的 url！

我不能只将它们放在顶级 URL 中，因为它有自己的样式等，并且将子站点中的样式混搭到其中会令人困惑。

还有其他地方我应该存储这样的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T13:44:19.637

将它们（图像）放在_layouts中怎么样，然后你可以使用

```
url(  '/_layouts/images/PersonalCenter.gif' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T14:30:59.293

有两个主要选项：

**1\. 将您的图像存储在样式库中。**

浏览到 /sites/portal/Style Library/Images 并在那里创建一个文件夹来存储您的图像。这似乎类似于 CSS 文件中已经完成的操作。在 CSS 文件中使用相对路径来避免 URL 的 /sites/portal 部分。

*优点：*版本控制，无需担心跨多台服务器部署。

**2\. 将图像存储在文件系统上。**

为特定于您的解决方案的图像创建一个文件夹，例如在

> C:\Program Files\Common Files\Microsoft Shared\web 服务器扩展\12\TEMPLATE\IMAGES\siteXXX

这映射到 Johan 提到的您将使用的文件夹

> /_layouts/images/siteXXX/image.gif

参考您的图像。

*优点：*性能（可能）取决于服务器的配置方式。

**建议：**尽可能使用样式库。单独的版本控制是一个巨大的好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T16:37:13.047

感谢您的回答...最后我想起了相对路径和

```
background: #ffcc00 url(  '../CSS/PersonalCenter.gif' ) repeat-x; 
```

工作得很好。

图像/css 文件保留在样式库中，这对于在将 CSS 更改提交到主要功能之前检查 CSS 更改并“正确”发布解决方案很有用

现在为什么我不从一开始就这样做！？

# .net - 在.net中如何找到元素节点的简单路径

> ID：944675
> 
> 赞同：0
> 
> 时间：2009-06-03T13:15:11.847
> 
> 标签：.net, xml

鉴于：

通过调用 XmlDocument.GetSingleNode 方法获得的 xmlnode，您知道该节点是一个元素，

如果您想找到该元素的简单路径，有没有比爬树更直接的方法，直到您到达根节点并边走边构建路径？这并不难，我只是希望有一个现有的方法/属性来取回代表路径的字符串。

我可以看到“简单路径”可能不是一个易于确定的术语，我的意思是使用子轴以“/”开头的以斜线分隔的元素列表，它导致节点 I有在手。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T13:22:44.423

我不知道这样做的内置方法，我也没有真正看到好处。

因为如果文档可以更改，则通过索引识别节点是不可靠的，否则您将如何以通用方式识别它？如果你想保持一个运行时指针指向一个文档上不变的节点，你不需要遍历树来找到它，因为你可以只保留一个 XPathNavigator 到它或对 XmlElement 的引用或其他任何东西为了回到节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T13:26:29.470

不，没有简单直接的方法或库函数可以为您执行此操作。但是请记住，如果修改了文档，您计算的任何先前路径都可能无效。此外，如果 XML 文档允许一个元素或其任何祖先在父元素中出现多次，您将需要跟踪该元素的特定索引。

听起来像是一个有用的小扩展方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T13:28:48.793

如果您想识别当前节点的*文档唯一*路径，问题将是，在树的每个级别，您必须对该级别的所有节点有足够的了解（唯一属性 [preferred] 或索引) 来唯一标识节点。

因此，对于给定的模式，您可能能够构建它，但没有通用方法。

# java - Java 是否支持可变变量？

> ID：944677
> 
> 赞同：19
> 
> 时间：2009-06-03T13:15:33.283
> 
> 标签：java

比如在 PHP 中：

```
<?php
$a = 'hello';
$$a = 'world';

echo $hello;
// Prints out "world"
?> 
```

我需要动态创建未知数量的 HashMap（每个都放入一个数组列表中）。请说出是否有更简单或更以 Java 为中心的方式。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-03T13:20:13.647

您能做的最好的事情就是拥有一个 HashMap 的 HashMap。例如：

```
Map<String,Map<String,String>> m = new HashMap<String,Map<String,String>>();
// not set up strings pointing to the maps.
m.put("foo", new HashMap<String,String>()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T13:18:51.763

它在java中不称为变量变量。

它被称为反射。

查看 java.lang.reflect 包文档了解详细信息。

你可以使用反射来做所有这些事情。

贝斯托斯，

jrh

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T13:19:31.170

Java 不支持您刚刚在 PHP 中所做的事情。

要做类似的事情，您应该只制作 a`List<Map<>>`并将您`HashMap`的 s 存储在其中。您可以使用`HashMap`of `HashMaps`。

Java 中的“变量变量”是一个数组或列表或某种具有不同大小的数据结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T13:22:20.990

不，你会做类似的事情

```
List<Map<String,String> myMaps = new ArrayList<Map<String,String>>() 
```

然后在你的循环中你会做：

```
Map<String,String> newMap = new Hashtable<String,String>();
//do stuff with newMap
myMaps.add(newMap); 
```

# asp.net - 使 WCF Web 服务与 GET 请求一起工作

> ID：944678
> 
> 赞同：42
> 
> 时间：2009-06-03T13:15:43.250
> 
> 标签：asp.net, wcf, web-services, rest

**背景**
我过去创建了 ASMX Web 服务，并且能够从 Web 浏览器和使用地址约定的 Ajax GET 请求访问该服务：
`MyService.asmx/MyMethod?Param=xxx`

我刚开始使用 WCF，并在我的 ASP.NET 项目中创建了一个新的 Web 服务。它会创建一个扩展名为 .svc 的文件，例如 MyService.svc。

**当前情况**
我可以使用`WcfTestClient`VS2008 附带的服务来使用该服务。我还可以通过在另一个项目中添加服务引用或使用`svcutil.exe`命令行生成代理和配置文件来创建自己的 WCF 客户端。

**问题**
当我尝试使用浏览器使用该服务时`MyService.svc/MyMethod?MyParam=xxx`，我得到一个没有任何错误的空白页面。

**我已经尝试过**
，我已经在 web.config 中添加了一个[basicHttpBinding ，并在行为配置中将其](http://msdn.microsoft.com/en-us/library/ms731361.aspx)[设为 HttpGetEnabled](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicemetadatabehavior.httpgetenabled.aspx)。我还将该`[WebGet(UriTemplate = "MyMethod?MyParam={MyParam}")]`属性添加到我的操作合同中。

我已经关注了另一个堆栈溢出问题中的信息：
**[REST / SOAP EndPoints for a WCF Service](https://stackoverflow.com/questions/186631/rest-soap-endpoints-for-a-wcf-service)**

但是，执行这些步骤后，我要么得到一个空白页，要么得到一个 HTTP 404 错误。代码没有什么特别之处。我只是将一个字符串作为参数并返回“Hello xxx”。这是一个基本的“Hello WCF World”概念验证类型的东西。

* * *

**更新**- 这是相关代码

```
[ServiceContract]
public interface IMyService
{
    [WebGet(UriTemplate = "MyMethod/MyParam={MyParam}")]
    [OperationContract]
    string MyMethod(string MyParam);
} 
```

**Web.Config - system.serviceModel 部分**

```
<system.serviceModel>     
    <behaviors>
        <serviceBehaviors>          
            <behavior name="MyServiceBehavior">
              <serviceMetadata httpGetEnabled="true"  />
              <serviceDebug includeExceptionDetailInFaults="true"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <services>
      <service behaviorConfiguration="MyServiceBehavior" name="MyService">
        <endpoint address="" 
                       binding="wsHttpBinding" contract="IMyService" />
        <endpoint address="MyService.svc" 
                       binding="basicHttpBinding"  contract="IMyService" />
        <endpoint address="mex" 
                       binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>    
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2009-06-07T15:24:18.797

查看您的`web.config`serviceModel 部分，我可以看到您需要添加一个[webHttpBinding](http://msdn.microsoft.com/en-us/library/bb412176.aspx)并关联一个包含webHttpGet 的[endPointBehavior](http://msdn.microsoft.com/en-us/library/bb924425.aspx)。

您的操作合同是正确的。这是您的 system.serviceModel 配置部分的外观，以便您能够从 GET HTTP 请求中使用服务。

```
<system.serviceModel>     
    <behaviors>
        <serviceBehaviors>
            <behavior name="MyServiceBehavior">
                <serviceMetadata httpGetEnabled="true"    />
                <serviceDebug includeExceptionDetailInFaults="true"/>          
            </behavior>
        </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="WebBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>    
    <services>      
      <service behaviorConfiguration="MyServiceBehavior" name="MyService">
        <endpoint address="ws" binding="wsHttpBinding" contract="IMyService"/>
        <endpoint address="" behaviorConfiguration="WebBehavior"
                  binding="webHttpBinding"
                  contract="IMyService">
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>    
</system.serviceModel> 
```

请务必为您的 wsHttpBinding 端点分配不同的地址，否则您将收到错误消息，指出您有两个端点正在侦听同一个 URI。

另一种选择是将 wsHttpBinding 中的地址留空，但为 webHttpBinding 服务分配不同的地址。但是，这也会改变您的 GET 地址。

例如，如果您将地址分配为“asmx”，您将使用地址“ `MyService.svc/asmx/MyMethod?MyParam=xxxx`”调用您的服务。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-03T13:34:08.470

正常的 WCF 请求始终是 SOAP 请求 - 您将无法仅使用浏览器完成此操作，您需要 WCF 测试客户端。

WCF 有一个名为[WCF REST Starter Kit](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=18830)的附加组件（它也将包含在带有 .NET 4.0 的 WCF 4.0 中），它允许您使用 GET/POST/PUT/DELETE HTTP 命令来查询 WCF 服务等。但是，您需要专门为 REST 编写服务 - 您不能在同一个服务调用上使用 SOAP 和 REST。

马克

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-03T13:41:26.040

正如[marc_s 所说](https://stackoverflow.com/questions/944678/making-a-wcf-web-service-work-with-get-requests/944786#944786)，REST Starter Kit 可以提供帮助，但您也应该知道 .NET 3.5 直接在其中支持 REST 服务。它不像您可以使用入门套件完成的那样完整，但它很有用。

它的工作方式是在操作上放置一个`[WebGet]`属性，以指示各种参数应该来自 URL 中的哪个位置：

```
[WebGet(UriTemplate = "helloworld/{name}")]
string Helloworld(string name); 
```

有关大量信息，请参阅[此门户](http://msdn.microsoft.com/en-us/netframework/dd547388.aspx)。

请注意，如果您在配置中指定多个端点/绑定，则可以将相同的服务公开为 SOAP 和 REST。

# java - 安全地向 RESTFUL API 提供凭据

> ID：944679
> 
> 赞同：6
> 
> 时间：2009-06-03T13:15:57.230
> 
> 标签：java, rest, struts, passwords

我创建了一个 RESTful 服务器应用程序，它位于有用的 URL（例如 www.site.com/get/someinfo）上并为请求提供服务。它是在春天建造的。

但是，这些访问受密码保护。我现在正在构建一个客户端应用程序，它将连接到这个 RESTful 应用程序并通过 URL 请求数据。如何传递凭据？目前，它只是向用户弹出用户/密码框，但我希望用户能够在客户端应用程序的框中输入用户名和密码，并让客户端应用程序在何时将凭据提供给 RESTful 应用程序它请求数据。客户端是使用 Struts 构建的。

干杯

编辑 - 我认为我的问题不够清楚。我已经强制使用 HTTPS，我的问题更多，在代码中，当我从 www.site.com/get/someinfo 请求数据时，如何在发出请求的同时传递我的凭据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-05T03:41:14.793

你或多或少有 3 个选择：

1.  [HTTP 身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)
2.  滚动您自己的协议，理想情况下基于[HMAC](http://en.wikipedia.org/wiki/Hmac)质询/响应
3.  [身份验证](http://oauth.net/)

OAuth 目前容易受到网络钓鱼攻击的变体的影响，这种攻击在很大程度上无法被目标检测到。因此，在协议修改之前我不会推荐它。

OAuth 也应该是关于设计安全协议有多么困难的一课，所以我很犹豫是否推荐你自己的路线。

这留下了 HTTP 身份验证，如果您可以使用它，这可能是最好的。

综上所述，互联网上的几乎所有内容都使用基于表单的身份验证，而且许多人甚至不使用 https 来保证传输级别的安全性，因此对于您的目的而言，简单地发送密码文本可能已经“足够好”了。即便如此，我还是鼓励使用 https，因为这至少可以减少中间人攻击的危险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-05T02:39:40.787

如果您可以在请求中添加 HTTP 标头，则只需添加`Authorization`标头：

```
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 
```

您正在使用基本身份验证的位置，该`QWxhZGRpbjpvcGVuIHNlc2FtZQ==`位是“ `username:password`” base64 编码的（不带引号）。[RFC 2617](http://www.rfc-editor.org/rfc/rfc2617.txt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-04T13:28:47.877

嗯，https 与身份验证无关，它只是传输级加密。

如果你和一个 HTTP api 交互，不管它是不是 https，然后弹出对话框，这意味着它使用 HTTP 身份验证，无论是基本的还是摘要的。如果您的客户端实例化一个 http 客户端以从这些“服务”读取数据，那么您可以在实例化对象时传递这些凭据。

如果您使用客户端脚本，XmlHttpRequest 也支持 http 身份验证。

因此，就代码而言，您如何将凭据传递给 RESTful 服务取决于您使用的 http 客户端（您实例化以检索数据的对象）。您可以简单地自己从客户端收集这样的用户名/密码，并使用它来调用其他服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-05T03:30:03.417

查看现有的解决方案。在这种情况下，[oauth](http://oauth.net)

# asp.net-mvc - 如何释放 HttpPostedFileBase 使用的资源？

> ID：944680
> 
> 赞同：6
> 
> 时间：2009-06-03T13:15:58.353
> 
> 标签：asp.net-mvc

上传文件后，我尝试将其从 PC 中删除，但提示该文件正在使用中。

我缺少什么代码来释放文件以使其可删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-03-17T20:19:22.813

您可能需要在阅读后手动关闭 InputStream，以确保在 HttpPostedFileBase 被垃圾收集之前它不会保持打开状态。

# c# - 是 C# '??' 操作员线程安全吗？

> ID：944683
> 
> 赞同：8
> 
> 时间：2009-06-03T13:17:01.783
> 
> 标签：c#, .net, thread-safety, null-coalescing-operator

每个人都知道这不是线程安全的：

```
public StringBuilder Builder
{
    get 
    {
        if (_builder != null)
            _builder = new StringBuilder();
        return _builder; 
    }
} 
```

那这个呢？

```
public StringBuilder Builder
{
    get { return _builder ?? (_builder = new StringBuilder()); }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-03T13:19:19.873

那或多或少是线程安全的。您仍然可以让两个线程同时进行空值检查，从而创建单独的对象而看不到另一个。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-03T13:19:29.703

**开始编辑**

根据您编辑的标题，空合并运算符本身似乎是线程安全的（请参阅[Phil Haack 的分析](http://haacked.com/archive/2006/08/08/IsTheNullCoalescingOperatorThreadSafe.aspx)）。然而，它似乎并不能保证对 StringBuilder 构造函数的潜在多次调用。

**结束编辑**

线程有一个更大的问题，那就是 Builder 属性本身表示可以跨线程共享的状态。即使您使惰性初始化线程安全，也不能保证使用 Builder 的方法以线程安全的方式进行。

```
// below code makes the getter thread safe
private object builderConstructionSynch = new object();
public StringBuilder Builder
{
    get
    {
        lock (builderConstructionSynch)
        {
            if (_builder == null) _builder = new StringBuilder();
        }
        return _builder;
    }
} 
```

以上将防止 _builder 的延迟初始化中的线程问题，但除非您将调用同步到 StringBuilder 的实例方法，否则在任何使用 Builder 属性的方法中都不能保证线程安全。这是因为 StringBuilder 中的实例方法并非设计为线程安全的。[请参阅MSDN StringBuilder 页面](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)中的以下文本。

> 此类型的任何公共静态（在 Visual Basic 中为 Shared）成员都是线程安全的。不保证任何实例成员都是线程安全的。

如果您在多个线程中使用 StringBuilder，则最好将其封装在您的类中。将 Builder 设为私有并将您需要的行为公开为公共方法：

```
public void AppendString(string toAppend)
{
    lock (Builder)
    {
        Builder.Append(toAppend);
    }
} 
```

这样，您就不会到处编写同步代码。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-06-03T13:18:53.073

两个版本都没有

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-03T13:19:43.447

不，也不是原子的

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-03T13:26:53.697

给出的答案是正确的，两者都不是线程安全的。事实上，它们大多是等价的，`??`操作符只是让代码更精简的编译器魔法。如果你想让它成为线程安全的，你需要使用一些同步机制。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-03T13:39:24.123

我自己没有测试过这种方法，但是如果你想要线程安全而不需要锁定方案的开销，并且你不担心可能创建和丢弃对象实例，你可以试试这个：

```
using System.Threading;

public StringBuilder Builder
{
    get 
    {
        if (_builder != null)
            Interlocked.CompareExchange( ref _builder, new StringBuilder(), null );
        return _builder; 
    }
} 
```

仅当 _builder == null 时，对 CompareExchange() 的调用才会将 _builder 中的值原子替换为 StringBuilder 的新实例。Interlocked 类的所有方法都保证不会被线程切换抢占。

# javascript - 如何使用 jQuery 访问输入字段文本？

> ID：944697
> 
> 赞同：0
> 
> 时间：2009-06-03T13:19:34.663
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 的 typeWatch 插件。我有这个 javascript：

```
 <script type="text/javascript">
 $(document).ready(function() {
   var options = {
        callback: function() { alert("a-ok!  " + $(this).text); },
        wait: 333,
        highlight: true,
        captureLength: 1
    }

    $("#customer").typeWatch(options);
 });
 </script> 
```

我的视图的 HTML 有这个：

```
 Method B: <%= Html.TextBox("customer") %> 
```

通过这个测试，如果我在文本框中输入“ABC”，我希望会弹出一个带有“a-ok！ABC”的警报。相反，出现以下...

```
a-ok!  function (F) {
    if (typeof F !== "object" && F != null) {
        return this.empty().append((this[0] && this[0].ownerDocument || 
               document).createTextNode(F));
    }
    var E = "";
    o.each(F || this, function () {o.each(this.childNodes, function () {
          if (this.nodeType != 8) {
             E += this.nodeType != 1 ? this.nodeValue : o.fn.text([this]);}});});
   return E;
} 
```

我尝试将 $(this).text 更改为 .val，并且我还尝试将输入字段更直接地引用为 $("#customer")，但它们会产生类似的结果。如何仅访问输入的文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T13:22:29.243

您应该在文本框上使用 val() 函数：

```
$(this).val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T13:38:49.850

查看 typeWatch 2.0 版的代码，我发现了这个：

```
 function checkElement(timer, override) {
        var elTxt = jQuery(timer.el).val(); <----------- !!! this...

        // Fire if text > options.captureLength AND text != saved txt OR if override AND text > options.captureLength
        if ((elTxt.length > options.captureLength && elTxt.toUpperCase() != timer.text) 
        || (override && elTxt.length > options.captureLength)) {
            timer.text = elTxt.toUpperCase();
            timer.cb(elTxt); <-------------- !!! ...goes here.
        }
    }; 
```

timer.cb 是您在选项中设置的回调。因此，您只需在您使用的回调函数中添加一个参数，该参数将是输入中的文本。

# python - 如何检查 NaN 值？

> ID：944700
> 
> 赞同：1369
> 
> 时间：2009-06-03T13:19:54.927
> 
> 标签：python, math

`float('nan')`结果为 Nan（不是数字）。但是我该如何检查呢？应该很容易，但我找不到。

* * *

## 回答 #1

> 赞同：1745
> 
> 时间：2009-06-03T13:24:37.010

[数学.isnan(x)](http://docs.python.org/library/math.html#math.isnan)

> `True`如果 x 是 NaN（不是数字）则返回，`False`否则返回。

```
>>> import math
>>> x = float('nan')
>>> math.isnan(x)
True 
```

* * *

## 回答 #2

> 赞同：495
> 
> 时间：2009-06-03T13:22:05.873

测试 NaN 的常用方法是查看它是否等于自身：

```
def isNaN(num):
    return num != num 
```

* * *

## 回答 #3

> 赞同：230
> 
> 时间：2009-06-03T13:28:31.620

`numpy.isnan(number)`告诉你是`NaN`不是。

* * *

## 回答 #4

> 赞同：169
> 
> 时间：2019-03-03T08:38:35.697

**以下是您可以测试变量是否为“NaN”的三种方法。**

```
import pandas as pd
import numpy as np
import math

# For single variable all three libraries return single boolean
x1 = float("nan")

print(f"It's pd.isna: {pd.isna(x1)}")
print(f"It's np.isnan: {np.isnan(x1)}}")
print(f"It's math.isnan: {math.isnan(x1)}}") 
```

**输出**

```
It's pd.isna: True
It's np.isnan: True
It's math.isnan: True 
```

* * *

## 回答 #5

> 赞同：47
> 
> 时间：2017-05-24T09:40:52.973

这是一个答案：

*   符合 IEEE 754 标准的 NaN 实现
    *   即：python的NaN：`float('nan')`，`numpy.nan`...
*   任何其他对象：字符串或其他对象（如果遇到不会引发异常）

遵循标准实现的 NaN 是唯一一个与自身进行不等比较应返回 True 的值：

```
def is_nan(x):
    return (x != x) 
```

还有一些例子：

```
import numpy as np
values = [float('nan'), np.nan, 55, "string", lambda x : x]
for value in values:
    print(f"{repr(value):<8} : {is_nan(value)}") 
```

输出：

```
nan      : True
nan      : True
55       : False
'string' : False
<function <lambda> at 0x000000000927BF28> : False 
```

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2020-06-03T11:40:47.900

**似乎检查它是否等于自身**

```
x!=x 
```

**是最快的。**

```
import pandas as pd 
import numpy as np 
import math 

x = float('nan')

%timeit x!=x                                                                                                                                                                                                                        
44.8 ns ± 0.152 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)

%timeit math.isnan(x)                                                                                                                                                                                                               
94.2 ns ± 0.955 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)

%timeit pd.isna(x) 
281 ns ± 5.48 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

%timeit np.isnan(x)                                                                                                                                                                                                                 
1.38 µs ± 15.7 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each) 
```

* * *

## 回答 #7

> 赞同：33
> 
> 时间：2012-09-25T18:22:03.583

实际上，我只是遇到了这个问题，但对我来说，它正在检查 nan、-inf 或 inf。我刚用

```
if float('-inf') < float(num) < float('inf'): 
```

这对于数字是正确的，对于 nan 和 inf 都是错误的，并且会引发字符串或其他类型的异常（这可能是一件好事）。此外，这不需要导入任何库，如 math 或 numpy（numpy 太大了，它会使任何已编译应用程序的大小增加一倍）。

* * *

## 回答 #8

> 赞同：26
> 
> 时间：2009-06-03T13:24:51.097

[数学.isnan()](http://docs.python.org/library/math.html#math.isnan)

或将数字与自身进行比较。NaN 总是 != NaN，否则（例如，如果它*是*一个数字）比较应该成功。

* * *

## 回答 #9

> 赞同：21
> 
> 时间：2012-07-04T20:15:28.800

好吧，我进入了这篇文章，因为我对这个功能有一些问题：

```
math.isnan() 
```

运行此代码时出现问题：

```
a = "hello"
math.isnan(a) 
```

它引发了异常。我的解决方案是再次检查：

```
def is_nan(x):
    return isinstance(x, float) and math.isnan(x) 
```

* * *

## 回答 #10

> 赞同：17
> 
> 时间：2010-01-26T09:10:53.530

另一种方法，如果你卡在 <2.6，你没有 numpy，你没有 IEEE 754 支持：

```
def isNaN(x):
    return str(x) == str(1e400*0) 
```

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2010-06-17T08:35:39.217

随着 python < 2.6 我最终得到

```
def isNaN(x):
    return str(float(x)).lower() == 'nan' 
```

这适用于我在 Solaris 5.9 机器上使用 python 2.5.1 和在 Ubuntu 10 上使用 python 2.6.5

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2016-06-23T08:22:33.077

我从一个`NaN`以字符串形式发送的网络服务接收数据`'Nan'`。但是我的数据中也可能有其他类型的字符串，所以一个简单的字符串`float(value)`可能会引发异常。我使用了以下已接受答案的变体：

```
def isnan(value):
  try:
      import math
      return math.isnan(float(value))
  except:
      return False 
```

要求：

```
isnan('hello') == False
isnan('NaN') == True
isnan(100) == False
isnan(float('nan')) = True 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2019-01-28T06:53:40.863

**如何从混合数据类型列表中删除 NaN（浮点）项**

如果您在可迭代中混合了类型，这里有一个不使用 numpy 的解决方案：

```
from math import isnan

Z = ['a','b', float('NaN'), 'd', float('1.1024')]

[x for x in Z if not (
                      type(x) == float # let's drop all float values…
                      and isnan(x) # … but only if they are nan
                      )] 
```

```
['a', 'b', 'd', 1.1024]
```

短路评估意味着`isnan`不会调用非“浮点”类型的值，因为无需评估右侧即可`False and (…)`快速评估。`False`

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2016-12-07T06:49:13.127

判断变量是 NaN 还是 None 的所有方法：

**无类型**

```
In [1]: from numpy import math

In [2]: a = None
In [3]: not a
Out[3]: True

In [4]: len(a or ()) == 0
Out[4]: True

In [5]: a == None
Out[5]: True

In [6]: a is None
Out[6]: True

In [7]: a != a
Out[7]: False

In [9]: math.isnan(a)
Traceback (most recent call last):
  File "<ipython-input-9-6d4d8c26d370>", line 1, in <module>
    math.isnan(a)
TypeError: a float is required

In [10]: len(a) == 0
Traceback (most recent call last):
  File "<ipython-input-10-65b72372873e>", line 1, in <module>
    len(a) == 0
TypeError: object of type 'NoneType' has no len() 
```

**NaN型**

```
In [11]: b = float('nan')
In [12]: b
Out[12]: nan

In [13]: not b
Out[13]: False

In [14]: b != b
Out[14]: True

In [15]: math.isnan(b)
Out[15]: True 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2020-01-13T19:02:29.690

在 Python 3.6 中检查字符串值 x math.isnan(x) 和 np.isnan(x) 会引发错误。因此，如果我事先不知道它是一个数字，我无法检查给定的值是否为 NaN。以下似乎解决了这个问题

```
if str(x)=='nan' and type(x)!='str':
    print ('NaN')
else:
    print ('non NaN') 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2021-06-28T19:13:38.270

比较`pd.isna`，`math.isnan`以及`np.isnan`它们处理不同类型对象的灵活性。

下表显示是否可以使用给定方法检查对象类型：

```
 +------------+-----+---------+------+--------+------+
|   Method   | NaN | numeric | None | string | list |
+------------+-----+---------+------+--------+------+
| pd.isna    | yes | yes     | yes  | yes    | yes  |
| math.isnan | yes | yes     | no   | no     | no   |
| np.isnan   | yes | yes     | no   | no     | yes  | <-- # will error on mixed type list
+------------+-----+---------+------+--------+------+ 
```

### [`pd.isna`](https://pandas.pydata.org/docs/reference/api/pandas.isna.html)

检查不同类型缺失值的最灵活方法。

* * *

没有一个答案涵盖`pd.isna`. 虽然`math.isnan`并且`np.isnan`将返回`True`值`NaN`，但您无法检查不同类型的对象，如`None`字符串或字符串。这两种方法都会返回错误，因此检查具有混合类型的列表会很麻烦。这`pd.isna`很灵活，将为不同类型的类型返回正确的布尔值：

```
In [1]: import pandas as pd

In [2]: import numpy as np

In [3]: missing_values = [3, None, np.NaN, pd.NA, pd.NaT, '10']

In [4]: pd.isna(missing_values)
Out[4]: array([False,  True,  True,  True,  True, False]) 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-07-17T04:57:43.240

> 对于浮点类型的nan

```
>>> import pandas as pd
>>> value = float(nan)
>>> type(value)
>>> <class 'float'>
>>> pd.isnull(value)
True
>>>
>>> value = 'nan'
>>> type(value)
>>> <class 'str'>
>>> pd.isnull(value)
False 
```

* * *

## 回答 #18

> 赞同：-5
> 
> 时间：2018-07-17T13:03:05.650

对于 panda 中的字符串，取 pd.isnull：

```
if not pd.isnull(atext):
  for word in nltk.word_tokenize(atext): 
```

NLTK 的特征提取功能

```
def act_features(atext):
features = {}
if not pd.isnull(atext):
  for word in nltk.word_tokenize(atext):
    if word not in default_stopwords:
      features['cont({})'.format(word.lower())]=True
return features 
```

# shell - 处理 FTP 错误代码

> ID：944707
> 
> 赞同：0
> 
> 时间：2009-06-03T13:21:08.483
> 
> 标签：shell, unix, grep

即使在文件传输过程中发生错误，大多数 FTP 客户端也会返回退出代码“0”。

我遇到了一个问题，我正在检查错误代码。但是我的脚本在发送的字节中获取了错误代码号并且验证失败。

我试过这样：

```
if [[ egrep '^202 |^421 |^426 |^450 |^500 |^501 |^503 |^530 |^550 |^553 |^666 |^777 |^999 ' test.log ]] echo " Error in FTP !!! " else echo " FTP Successful !!!" fi 
```

任何人都可以帮助我如何将错误代码与“发送字节”消息一起出现的其他数字区分开来，例如“220 字节在 0.001 秒内发送（220 KB/秒）”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T17:18:10.750

当返回错误代码时，消息是否只包含错误代码而后面没有文本？如果是这样，使用行尾锚 $ 将起作用：

```
if [[ egrep '^202$ |^421$ |^426$ |^450$ |^500$ |^501$ |^503$ |^530$ |^550$ |^553$ |^666$ |^777$ |^999$ ' test.log ]] echo " Error in FTP !!! " else echo " FTP Successful !!!" fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-12T11:18:13.417

使用正则表达式的 Perl 变体，您可以使用如下内容：

```
if [[ grep -P '^(([45][0-9][0-9] )(?-i)(?!bytes received))|\?|(\w+: )|([Nn]ot connected)' test.log ]] echo " Error in FTP !!! " else echo " FTP Successful !!!" fi 
```

正则表达式测试各种常见的 FTP 错误代码和一些在客户端。它使用前瞻表达式 '(?! ...)' 来测试文字“收到的字节数”是否不存在，这可以解决您的需求 - 以及我的需求。;-)

表达式远非完美，可以根据您的需要进行扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T13:36:12.307

我想你必须在你的模式中更具体一点，即在错误代码之后将消息的开头放入模式中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T18:54:54.390

使用`wget`或`curl`。它们都支持 ftp，以及 http 和 https，并将返回所需的退出状态。它们也是开源的。

# shader - 使用像素着色器效果帮助亮度和对比度

> ID：944713
> 
> 赞同：12
> 
> 时间：2009-06-03T13:22:10.400
> 
> 标签：shader

什么是应用亮度和对比度的简单像素着色器脚本效果？

我找到了这个，但它似乎不正确：

```
sampler2D input : register(s0);
float brightness : register(c0);
float contrast : register(c1);

float4 main(float2 uv : TEXCOORD) : COLOR
{
    float4 color = tex2D(input, uv); 
    float4 result = color;
    result = color + brightness;
    result = result * (1.0+contrast)/1.0;

    return result;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2010-06-12T05:23:39.677

这是你想要的？

```
float Brightness : register(C0);
float Contrast :   register(C1);

sampler2D Texture1Sampler : register(S0);

float4 main(float2 uv : TEXCOORD) : COLOR
{

   float4 pixelColor = tex2D(Texture1Sampler, uv);
   pixelColor.rgb /= pixelColor.a;

  // Apply contrast.
  pixelColor.rgb = ((pixelColor.rgb - 0.5f) * max(Contrast, 0)) + 0.5f;

  // Apply brightness.
  pixelColor.rgb += Brightness;

  // Return final pixel color.
  pixelColor.rgb *= pixelColor.a;

 return pixelColor;
} 
```

--- 使用 Shazzam 着色器编辑器测试 [http://shazzam-tool.com](http://shazzam-tool.com)

# sql - 合并的 SQL 表名

> ID：944720
> 
> 赞同：2
> 
> 时间：2009-06-03T13:22:41.037
> 
> 标签：sql

我有一个来自多个工会的合并表，我想知道从哪些表中获取结果，这可能吗？

例子...

从用户中选择名称，其中名称为 '%alex%' union select name from admins where name like '%alex%';

会返回让我们说两行，亚历山大和亚历山德拉。Alexander 是管理员，Alexandra 是用户。我怎样才能区分它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-03T13:24:23.797

```
SELECT 
     Name, 
    'Users' AS Type 
FROM users 
WHERE name LIKE '%alex%'
UNION
SELECT 
     Name, 
     'Admins' AS Type 
FROM admins 
WHERE name LIKE'%alex%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T13:24:33.157

在您的选择中包含一个虚拟列，以便您识别源表

```
select name, 'Name' as Source from users where name like '%alex%' 
union select name, 'Admins' as Source from admins where name like '%alex%'; 
```

# java - Tomcat 中的 PreparedStatement 缓存

> ID：944722
> 
> 赞同：5
> 
> 时间：2009-06-03T13:22:47.153
> 
> 标签：java, tomcat, caching, prepared-statement

我正在寻找一种实现 PreparedStatement 缓存的方法，以便为过去已经执行的查询节省重新创建 PreparedStatement 对象。

是否有一些内置方法可以使用 Tomcat 实现这一目标？还是我必须自己编程这个缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T13:40:01.407

我相信 tomcat 使用[commons-dbcp](http://commons.apache.org/dbcp/)并且 commons-dbcp 支持准备好的语句池。

在[这里查看](http://commons.apache.org/dbcp/configuration.html)。

poolPreparedStatements false 为此池启用准备好的语句池。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T13:25:46.727

准备好的语句缓存由您的 JDBC 连接池或 JDBC 驱动程序完成，*而不是*由 Tomcat。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T17:07:33.087

您没有说明您的数据库，但如果它是 SQL Server，那么 jTDS 驱动程序会在内部为您执行此操作。这一切都被抽象出来了，所以你不需要编写任何毛茸茸的缓存代码。

见这里：http: [//jtds.sourceforge.net/faq.html#preparedStatmentMemoryLeak](http://jtds.sourceforge.net/faq.html#preparedStatmentMemoryLeak)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T21:00:57.310

DB2 JDBC Driver (JCC) 使用 JDBC 连接属性，例如 maxStatements=10; 它确实缓存了连接的语句。池不需要缓存它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T15:05:51.937

也许我在您的要求中遗漏了一些东西，但是如果您在“原始”JDBC 中进行查询，那么基本上您需要做的就是保持连接打开并继续对 PreparedStatement 的引用。

# c - C 中是否有与 Perls 的 split() 函数等效的函数？

> ID：944738
> 
> 赞同：0
> 
> 时间：2009-06-03T13:25:46.210
> 
> 标签：c, split, strtok

我正在尝试使用小数点作为分隔符在 C 程序中拆分实数，例如 1234.56 产生

(int) whole_num = 1234 (int) 分数 = 56

有什么想法我可以如何去做吗？自从我和 C 混在一起已经很久了，明白吗？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T13:28:48.887

```
void split( double num, int& whole_number, double& fraction) {
    fraction = modf(num, &whole_number);
} 
```

这是有效的，因为 modf 采用双精度的整数部分并返回小数部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-03T13:30:05.000

假设您要拆分字符串。

`strtok_r`和你最喜欢的字符串到数字函数，比如`strtol`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T13:30:10.990

如果您正在处理一个实际的浮点数，而不是这样的字符串表示，您应该使用它[`modf`](http://www.opengroup.org/onlinepubs/009695399/functions/modf.html)来拆分整数和小数部分。

Perl`split`按正则表达式拆分，因此要复制完整功能，您需要一个正则表达式库。对于一般的字符串拆分，您可以使用[`strtok`](http://www.opengroup.org/onlinepubs/009695399/functions/strtok.html)，但因为它会就地更改字符串，`strtok_r`（在同一页上描述）建议改为。

# c# - 为什么 PngBitmapEncoder 类会使我的图像看起来有颗粒感？

> ID：944744
> 
> 赞同：4
> 
> 时间：2009-06-03T13:26:30.890
> 
> 标签：c#, image

我正在使用此代码将 jpg 图像转换为 png 8。代码有效，但图像看起来有颗粒感。我在 Photoshop 中导出为 png 8，它看起来更平滑且没有颗粒感。

**注意**：8位png

有没有图像大师可以提供帮助？

**我的代码：**

```
Image ImageFile = Image.FromFile(@"C:\Documents and Settings\dvela\My Documents\Downloads\pngtest\Batman01.jpg");
Rectangle NewSize = new Rectangle();
NewSize.Width = 112;
NewSize.Height = (NewSize.Width * ImageFile.Height) / ImageFile.Width;

Bitmap image = new Bitmap(NewSize.Width, NewSize.Height);

Graphics graphics = Graphics.FromImage(image);
graphics.CompositingQuality = CompositingQuality.HighQuality;
graphics.PixelOffsetMode = PixelOffsetMode.HighQuality;
graphics.SmoothingMode = SmoothingMode.HighQuality;

graphics.DrawImage(ImageFile, NewSize);

FormatConvertedBitmap fcb = new FormatConvertedBitmap(System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(image.GetHbitmap(), IntPtr.Zero, Int32Rect.Empty, BitmapSizeOptions.FromWidthAndHeight(NewSize.Width, NewSize.Height)), PixelFormats.Indexed8, BitmapPalettes.Halftone256Transparent, 0.5);

PngBitmapEncoder pngBitmapEncoder = new PngBitmapEncoder();
pngBitmapEncoder.Interlace = PngInterlaceOption.Off;
pngBitmapEncoder.Frames.Add(BitmapFrame.Create(fcb));

using (Stream fileStream = File.Open(@"C:\Documents and Settings\dvela\My Documents\Downloads\pngtest\test.png", FileMode.Create))
{
   pngBitmapEncoder.Save(fileStream);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T13:40:36.650

您正在为转换后的图像使用具有 256 种颜色的固定调色板。Photoshop 可能使用专门为该图像创建的调色板，并包含其所有颜色（或大部分颜色）。

您可以使用[dithering](http://en.wikipedia.org/wiki/Dithering#Digital_photography_and_image_processing)或以某种方式生成[自定义调色板](http://en.wikipedia.org/wiki/List_of_software_palettes#Adaptive_palettes)，或两者兼而有之。

更多信息也在[这里](http://en.wikipedia.org/wiki/Color_quantization)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T15:24:25.300

我发现[这个库](http://bip.codeplex.com/)可以进行基于调色板和八叉树的颜色量化。

这篇[MSDN 文章](https://web.archive.org/web/20140207002502/http://msdn.microsoft.com/en-us/library/aa479306.aspx)用代码解释了算法之间的区别。

# asp.net - 我想将我的 FormsAuthentication cookie 设置为超时但通过代码

> ID：944745
> 
> 赞同：3
> 
> 时间：2009-06-03T13:26:35.443
> 
> 标签：asp.net, security, forms-authentication

我想将我的 FormsAuthentication cookie 设置为超时但通过代码。我知道我可以在 web.config 中执行此操作，但我想在数据库中进行配置。这可以通过代码实现吗？

```
<system.web>
        <authentication mode="Forms">
              <forms timeout="50000000"/>
        </authentication>
    </system.web> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T13:44:35.283

为此，您需要创建自己的[FormsAuthenticationTicket](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.aspx)和 cookie 并将其手动添加到响应中。请参阅链接页面上的示例。

# c# - Windows - 控制台输出是否会无意中导致系统发出蜂鸣声？

> ID：944752
> 
> 赞同：4
> 
> 时间：2009-06-03T13:28:14.863
> 
> 标签：c#, .net, windows, console, beep

我有一个 C# 控制台应用程序，它在控制台中记录了很多内容（使用`Trace`）。它记录的一些内容是网络消息的压缩表示（因此其中很多都呈现为时髦的非字母字符）。

应用程序运行时，我经常收到系统哔声。我写到控制台的一些“文本”是否可能导致它们？

（系统提示音，我的意思是来自 PC 机箱内的低技术扬声器，而不是任何类型的 Windows 声音方案 WAV）

* * *

如果是这样，有没有办法为我的应用程序禁用它？我希望能够输出任何可能的文本，而不会将其解释为声音请求。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-06-03T13:29:47.047

这通常是由输出字符代码 7 CTRL-G 引起的，它是 BEL（铃）字符。

购买新电脑或主板时，我通常做的第一件事是确保从主板到扬声器的线没有连接。自从指挥官基恩时代以来，我就没有使用过扬声器（移除那根电线是与操作系统无关的停止声音的最佳方式:-)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-03T13:59:32.883

```
HKEY_CURRENT_USER\Control Panel\Sound 
```

将“哔”键设置为“否”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-03T13:30:15.483

当然，如果您将 ASCII 控制代码“Bell”（0x7）输出到控制台，它会发出哔哔声。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-03T13:56:27.037

如果您不想发出哔声，则必须在输出之前替换 0x7 字符，或者禁用“哔声”设备驱动程序，您可以在非即插即用驱动程序部分找到，如果您打开“显示隐藏的设备”选项。或者把扬声器拿出来。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-09T01:18:01.163

即使您检查 BELL 字符的输入，它仍可能会发出哔哔声。这是由于字体设置和 unicode 转换造成的。有问题的字符是[U+2022](http://www.fileformat.info/info/unicode/char/2022/index.htm)，子弹。

Raymond Chen[解释说](http://blogs.msdn.com/b/oldnewthing/archive/2007/01/04/1411080.aspx)：

> 在 OEM 代码页中，项目符号字符被转换为哔声。但这是为什么呢？
> 
> 您所看到的是相反的 MB_USEGLYPHCHARS。Michael Kaplan 不久前讨论了 MB_USEGLYPHCHARS。它确定在转换为 Unicode 时是否应将某些字符视为控制字符或可打印字符。例如，它控制 ASCII 钟形字符 0x07 是否应转换为 Unicode 钟形字符 U+0007 或 Unicode 项目符号 U+2022。您需要 MB_USEGLYPHCHARS 标志来决定在转换为 Unicode 时要走哪条路，但从 Unicode 转换时没有相应的歧义。从 Unicode 转换时，U+0007 和 U+2022 都映射到 ASCII 响铃字符。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-03T13:30:40.820

如果未在操作系统级别禁用，输出字符串中的 \b 将导致蜂鸣声。

# asp.net - 如何在代码隐藏页面的控制下滚动 ASP.NET 页面？

> ID：944757
> 
> 赞同：1
> 
> 时间：2009-06-03T13:28:32.227
> 
> 标签：asp.net, vb.net

我有一个 ASP.NET 3.5 页面，其中包含一些 AJAX、一些验证器和一些在代码隐藏页面 (VB.NET) 中完成的业务规则验证。

当检测到错误时，验证器会将焦点设置为“违规”控件。

当违反业务规则时，我使用以下代码“即时”生成一些 javascript 并执行它以模拟 Winforms“MessageBox.Show”功能：

```
Sub DisplayMessages()
    Dim lblError As New Label
    lblError.Text = "<script language='javascript'>" & Environment.NewLine & "window.alert('"
+ strError + "')</script>"
    Page.Controls.Add(lblError)
    strError = "" 
End Sub 
```

（以及必要时对该子程序的适当调用）

现在，当用户点击“保存”按钮并且一切正常时，页面会一直向下滚动到“保存”按钮所在的底部。我想通过将页面滚动回顶部来向用户指示事情已成功完成。

我尝试使用另一个子例程来调整以前对 javascript 的使用 - 添加控件似乎不起作用，所以我尝试只将原始代码放入执行 ad hoc：

```
Sub ScrollPageToTop()
    Dim strScroll As String
    strScroll = "<script language='javascript'>" & Environment.NewLine & "window.scrollTo(0,0);</script>"
    ClientScript.RegisterStartupScript(Me.GetType, "ScrollToTop", strScroll.ToString)
End Sub 
```

在“btnSave.Click”代码的末尾，如果一切正常，则调用该子程序。

我得到的是页面滚动到顶部，然后返回到单击“保存”按钮时的位置。

由于各种原因，'MaintainScrollPositionOnPostback="True"' 位于 .aspx 代码顶部的 Page 指令中。我真正想要的是让它 FALSE 片刻，以便页面在顶部重置 - 再次，仅当一切正常且仅针对此按钮（页面上还有其他按钮需要页面保留它是滚动位置）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T14:18:02.860

假设保存成功，您没有其他理由保持当前表单的状态，您可以简单地重定向到同一页面并传递成功标志。

```
Response.Redirect ("CurrentPage.aspx?Saved=Y"); 
```

使用 querystring 参数使您的成功消息可见。

您可能需要更有创意地构建重定向 url 来捕获您正在编辑的项目，但这可能对您有用。

# php - 面向 Internet 的 SSRS 报告

> ID：944762
> 
> 赞同：2
> 
> 时间：2009-06-03T13:29:06.500
> 
> 标签：php, reporting-services

我正在使用 PHP 5.2.9 和 MS Sql Server 2005 设计一个网站。我有一个 SSRS 报告，我想设置它以便互联网上的人可以访问它（在他们输入用户名和密码之后，但我可以弄清楚那部分）。

我们的网站本地托管在 Web 服务器上，数据库位于单独的服务器上。我还没有设置 SSRS 实例。

所以任何关于如何做到这一点的帮助都会很棒（在游戏中切换到 asp.net 有点太晚了（

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T13:38:39.040

解决这个问题的最简单方法是查看 MS 所谓的“URL 访问”，它允许您链接到托管在 SSRS 安装上的报告。有很多方法可以通过所有 URL 访问参数进行自定义。

看看这里：[URL 访问](http://msdn.microsoft.com/en-us/library/ms153586.aspx)

简单示例：

`http://<Server Name>/reportserver?/Sales/YearlySalesByCategory&rs:Command=Render`

上面的链接将导致报表在 Web 浏览器中呈现，就像普通页面一样。您还可以指定其他渲染模式，例如 PDF。我通常在我的应用程序中做的是让用户单击引用报告的链接，并将呈现模式设置为 PDF。然后，您可以将所有安全和身份验证代码包装在它周围，这样您就可以远离那些您不想使用它的人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T13:41:01.937

我认为您最好的选择是使用 SSRS Web 服务接口。您可以通过 ASP“代理”汇集请求。用 PHP 从头开始​​编写客户端可能是不可取的（除非你找到了一个现成的组件，我没有研究）。代理类可用于 .Net（[参见此处](http://msdn.microsoft.com/en-us/library/ms154697(SQL.90).aspx)）。您的代理客户端可以使用“服务帐户”进行身份验证。

或者，您可以使用 SSRS URL 接口。我很久以前为 SSRS 1.0编写了一个[Java 代理。](http://www.javaworld.com/javaworld/jw-01-2005/jw-0110-sqlrs.html)基本方法可能仍然有效。

就安全集成而言，这将取决于您的用户是否在 AD 域中。通过 Windows Integrated Security 以外的模型使用 RS 进行身份验证并不简单，需要自定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T13:57:33.620

按照建议使用 Web 服务，但对 Internet 隐藏 SSRS 服务器。

SSRS 和 SharePoint 根本不是互联网安全的。如果您在社交方面认识一位 MS 顾问，请喝啤酒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-24T14:08:00.037

[好吧，我在这里](http://technet.microsoft.com/en-us/library/ms159272(SQL.90).aspx)找到了微软关于整个问题的一些文档。我现在已经启动并运行了，所以我很高兴。尽管为了使其完美，我仍然需要在 Web 服务器和网络的其余部分之间设置另一个防火墙。

# delphi - 调试 dcu 路径

> ID：944763
> 
> 赞同：2
> 
> 时间：2009-06-03T13:29:09.730
> 
> 标签：delphi, debugging

请提供一些有关调试 dcu 路径及其使用位置的详细信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T15:11:05.030

写下下面这行...

```
procedure TFormMain.Button1Click(Sender: TObject);
begin
  ShowMessage('a');
end; 
```

...并在该行放置一个断点 ( `F5`) 。`ShowMessage()`

运行应用程序后，调试器将在此行停止。现在按`F7`。

使用**Use debug .dcus**设置和有效的**Debug DCU 路径**（类似于`$(BDS)\lib\Debug`，取决于您的 Delphi 版本），您将在 中输入`ShowMessage`过程`Dialog.pas`，而无需设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T13:37:11.633

'Debug DCU Path' 是一个 Borland Delphi 选项，位于`Tools > Debugger Options`. 它指定目录列表，当“调试 DCU”选项打开时，将搜索项目使用的 Delphi 编译单元的调试版本。

# c# - C#：等待变量变为非空

> ID：944766
> 
> 赞同：2
> 
> 时间：2009-06-03T13:29:46.297
> 
> 标签：c#, multithreading, monitor

.Net 奇怪的锁定语义再次困扰着我。

我正在启动一个线程，子线程依次启动一个表单。父线程应该等到表单创建完成。

我的第一次尝试是使用 Monitor 来观察 Form 变量：

```
private void OpenForm()
{
    if (FormThread == null)
    {
        Monitor.Enter(Form);
        FormThread = new Thread(FormStub);
        FormThread.SetApartmentState(ApartmentState.STA);
        FormThread.Start();
        Monitor.Wait(Form);
        Monitor.Exit(Form);
    }
}

private void FormStub()
{
    Form = new ConnectorForm();
    Monitor.Enter(Form);
    Monitor.PulseAll(Form);
    Monitor.Exit(Form);
    Application.Run(Form);
} 
```

...这会引发异常。Monitor.Enter() 失败，因为 Form == null。

我可以很容易地创建一个虚拟整数或其他东西（我实际上认为我会canabalize FormThread 变量），但我想知道是否有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T13:35:50.403

这种情况下更好的同步原语：

```
private ManualResetEvent mre = new ManualResetEvent(false);

private void OpenForm()
{
    if (FormThread == null)
    {
        FormThread = new Thread(FormStub);
        FormThread.SetApartmentState(ApartmentState.STA);
        FormThread.Start();
        mre.WaitOne();
    }
}

private void FormStub()
{
    Form = new ConnectorForm();
    mre.Set();
    Application.Run(Form);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T13:35:07.563

在当前线程上执行旋转等待不会删除使用单独线程启动新表单的全部意义吗？除非我误解了某些东西，否则您只想同步创建新表单。（是否有任何理由需要驻留在不同的 STA 中？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T13:35:24.677

您可以尝试以下方法，它使用单个`object`/`Monitor`作为消息机制：

```
private void OpenForm()
{
    if (FormThread == null)
    {
        object obj = new object();
        lock (obj)
        {
            FormThread = new Thread(delegate () {
                lock (obj)
                {
                    Form = new ControllerForm();
                    Monitor.Pulse(obj);
                }
                Application.Run(Form);
            });
            FormThread.SetApartmentState(ApartmentState.STA);
            FormThread.Start();
            Monitor.Wait(obj);
        }
    }
} 
```

原始线程持有锁直到它调用`Monitor.Wait`; 这让第二个线程（已经开始）创建表单，使原始线程恢复活力，然后释放；原始线程仅在存在后才退出`Form`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T13:41:36.397

我倾向于将[AutoResetEvent](http://msdn.microsoft.com/en-us/library/zd6a283y(VS.80).aspx)用于以下情况：

```
private AutoResetEvent _waitHandle = new AutoResetEvent(false);

private void OpenForm()
{
    Thread formThread = new Thread(FormStub);
    formThread.SetApartmentState(ApartmentState.STA);
    formThread.Start();
    _waitHandle.WaitOne();

    // when you come here FormStub has signaled                
}

private void FormStub()
{
    // do the work

    // signal that we are done
    _waitHandle.Set();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T13:56:58.237

传递 EventWaitHandle 的另一种方法是将其作为参数传递给 FormStub（因此它不会弄乱您的对象模型）：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);

    EventWaitHandle e = new EventWaitHandle(false, EventResetMode.ManualReset);
    Thread t = new Thread(FormStub);
    t.SetApartmentState(ApartmentState.STA);
    t.Start(e);
    e.WaitOne();
}

static void FormStub(object param)
{
    EventWaitHandle e = (EventWaitHandle) param;
    Form f = new Form1();

    e.Set();
    Application.Run(new Form1());
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-06-03T13:44:52.413

使用静态布尔值来标记表单是否已加载。它是原子的，因此不需要锁定。

在主代码中，只需执行类似的操作

```
while(!formRun) { Thread.Sleep(100); } 
```

真正的问题是你为什么要这样做？通常你希望主线程运行 GUI 的东西，而辅助线程运行帮助代码。如果您解释为什么需要它，我们可能会想出更好的技术。

# asp.net - ASP.Net healthMonitoring with AJAX

> ID：944775
> 
> 赞同：3
> 
> 时间：2009-06-03T13:32:17.070
> 
> 标签：asp.net, ajax, health-monitoring

目前，在我们所有的环境中，我们都打开了 healthmonitoring 以在用户导致错误时提醒我们：

```
<healthMonitoring enabled="true">
  <providers>
    <add name="MailWebEventProvider" type="System.Web.Management.SimpleMailWebEventProvider" to="email@addr.com" from="email@addr.com" buffer="false" subjectPrefix="prefix: "/>
  </providers>
  <rules>
    <add name="All errors from my site" eventName="All Errors" provider="MailWebEventProvider" profile="Critical"/>
  </rules>
</healthMonitoring> 
```

我们最近开始实现更多的 AJAX 功能，我刚刚意识到在部分页面更新期间抛出的任何错误都不会触发 healthmonitor 发送电子邮件。用户获取默认的 alert() 消息框；但是，服务器端没有任何内容。

有谁知道如何打开这个？我不确定我缺少什么设置

***编辑***

我看到 ScriptManager 控件有一个名为“AsyncPostBackError”的事件。如果我抓住它并执行“抛出 e.Exception”，它将触发运行状况监视器；但是，它会删除用户看到的错误。有谁知道如何在不抛出这样的错误的情况下启动健康监视器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T14:02:21.800

不确定这是否是您要查找的内容，但在查看[here](http://msdn.microsoft.com/en-us/library/ms998306.aspx)、[here](http://aspnet.4guysfromrolla.com/articles/031407-1.aspx)和[here](http://blogs.msdn.com/erikreitan/archive/2006/05/22/603586.aspx)之后，您似乎可以创建自定义 Web 事件，您可以从后面的代码中调用这些事件。因此，您可以从导致部分页面回发在服务器上留下通知的函数中调用这些处理程序。

特别检查第一个链接；它详细介绍了如何构建自定义 Web 事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T15:31:32.103

根据马修的建议，我想出了这个：

```
protected void ScriptManager1_AsyncPostBackError(object sender, AsyncPostBackErrorEventArgs e)
{
    ((ScriptManager)sender).AsyncPostBackErrorMessage = e.Exception.Message;

    WebBaseEvent.Raise(new AjaxWebErrorEvent(e.Exception.Message, null, 100123, e.Exception)); 
} 
```

AjaxWebErrorEvent 是这样的：

```
public class AjaxWebErrorEvent : WebRequestErrorEvent
{
    public AjaxWebErrorEvent(string message, object eventSource, int eventCode, System.Exception e) 
        : base(message, eventSource, eventCode, e)
    {
    }
} 
```

# delphi - 如何使用 IIS 调试诊断报告在 Delphi COM 组件中定位源文件行

> ID：944783
> 
> 赞同：0
> 
> 时间：2009-06-03T13:33:42.123
> 
> 标签：delphi, iis, com, debugging

我们有一个从 ISAPI Web 应用程序调用的 Delphi COM 组件。COM 组件正在挂起应用程序，因为它试图显示 MessageBox()。我们的用户代码中没有 MessageBox() 调用，因此它必须位于 Delphi 运行时源代码中，可能位于异常处理程序代码中。

我们有一个 IIS 调试诊断报告，显示我们的模块名称 + 偏移地址作为违规代码。

我们的模块有一个 .MAP 文件，我们还使用 MAP2DBG 生成了一个 .dbg 文件。

我们的问题是如何使用 .MAP 或 .DBG 文件使用包含偏移地址的 IIS 调试诊断挂起报告来定位源文件代码行？

我们尝试使用 WinDbg，但无法弄清楚我们需要做什么来定位源代码行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T15:24:12.353

首先，您需要找到进程将 COM 模块加载到 IIS 进程的基地址 - 这可能在 IIS 调试日志中很明显。让我们称之为 BASE。

然后你计算 MAPoffset = offset - BASE - $1000 并且你有一个可以在 Delphi MAP 文件中搜索的地址。

在 MAP 文件中（应详细说明以获取行号映射），您将找到每个源模块的部分，其中列出了“行号段：偏移”的记录。然后检查 MAPoffset 是等于一个偏移量还是介于两个行号偏移量之间。这应该给你一个方向，哪条线是有问题的线。

该段通常为 1 - 表示带有生成代码的文本段 - （在 MAP 文件的顶部有一个段映射）。

希望这可以帮助！

# perl - 如何在 Perl 中使用哈希作为子例程的参数？

> ID：944784
> 
> 赞同：7
> 
> 时间：2009-06-03T13:33:45.650
> 
> 标签：perl, hash, reference

我有一个函数正在做一些计算，然后将一些属性传递给另一个子例程，如下所示：

```
sub get_result {
    my $id = 1;     
    my %diet = ( result  => 28, 
                 verdict => 'EAT MORE FRUIT DUDE...'     
               );

    my %iq = ( result   => 193, 
               verdict => 'Professor Einstien'   
             );           
    print_result($id, %diet, %iq);
}

sub print_result {     
    my $id = shift;     
    my %d  = @_;     
    my %i  = @_;     

    print "IQ: $id\n";     
    print "DIET RESULT: $d{result}\n";     
    print "DIET VERDICT: $d{verdict}\n";     
    print "IQ RESULT: $i{result}\n";     
    print "IQ VERDICT: $i{verdict}\n";     
} 
```

我的问题是 (DIET RESULT, DIET VERDICT) 和 (IQ SCORE, IQ RESULT) 中打印的结果都相同。好像变量 %d 和 %i 正在填充相同的变量。任何想法为什么会这样？

如果我尝试像这样移动所有三个变量：

```
my $id = shift;     
my %d  = shift;     
my %i  = shift; 
```

我收到以下错误：

```
Odd number of elements in hash assignment 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-06-03T13:36:53.363

当您将数组（或哈希）传递给子例程时，子例程将获取值（或键值对）的列表。这就是为什么你不能传递两个数组（或两个哈希），因为子例程不知道第一个数组在哪里结束，第二个从哪里开始。

要解决此问题，您应该改为传递引用：

```
my %hash1 = ( foo => 'bar' );
my %hash2 = ( bar => 'baz' );
subroutine( \%hash1, \%hash2 );

sub subroutine {
    my ( $hashref1, $hashref2 ) = @_;
    print $hasref1->{foo}, $hashref2->{bar};
} 
```

PS：除了概念问题外，您的代码还具有以下特点：

```
my %d  = @_;     
my %i  = @_; 
```

如果 %d 和 %i 都被分配了相同的值，那么当它们之后相同时就不足为奇了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-03T16:42:28.610

您可能想查看我的书[Intermediate Perl](http://oreilly.com/catalog/9780596102067/)，其中大约三分之一涉及引用以及如何使用它们。这包括将复杂的数据结构传递到子例程以及引用使您的生活更轻松的其他方式。:)

```
some_sub( \%hash );
some_sub( { key => 'value' } );
some_sub( $hash_ref );

sub some_sub {
    my( $hash_ref ) = @_;

    ...
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-03T13:38:45.060

当您传入`%diet`and`%iq`时，它们都会被展平到 arg 数组中，因此在您的`print_result`,中包含and中的`%d`所有项目。`%diet``%iq`

要解决，请使用and的*引用*：`%diet``%iq`

```
print_result($id, \%diet, \%iq); 
```

然后在`print_result`：

```
my $id = shift;
my %d  = %{+shift};
my %i  = %{+shift}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T15:33:29.230

```
use strict;
use warnings;

sub get_result {

  ...

  print_result( $id, \%diet, \%iq );
  # or
  print_result( $id, {%diet}, {%iq} );
}

sub print_result{
  my( $id, $diet_h, $iq_h ) = @_;
  my %diet = %$diet_h;
  my %iq = %$iq_h;

  ...

} 
```

或者：

```
use strict;
use warnings;

sub print_result($\%\%);

sub get_result{

  ...

  print_result($id, %diet, %iq);
}

sub print_result($\%\%){
  my( $id, $diet_h, $iq_h ) = @_;
  my %diet = %$diet_h;
  my %iq = %$iq_h;

  ...

} 
```

# asp.net - asp.net 中的动态控制

> ID：944788
> 
> 赞同：0
> 
> 时间：2009-06-03T13:34:15.897
> 
> 标签：asp.net, dynamic, controls

是否可以执行回发并让视图状态记住以下代码中的选定值？

似乎 placeholder1.controls.clear() 正在删除它。

```
 protected void Page_Load(object sender, EventArgs e)
{
    bind();
}
protected void bind()
{
    PlaceHolder1.Controls.Clear();        
    DropDownList ddl = new DropDownList() { AutoPostBack = true, ID="ddl" };
    ddl.SelectedIndexChanged += new EventHandler(ddl_SelectedIndexChanged);
    ddl.Items.Add("hi");
    ddl.Items.Add("bye");
    PlaceHolder1.Controls.Add(ddl);
}
void ddl_SelectedIndexChanged(object sender, EventArgs e)
{
    bind();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T13:37:06.717

尝试删除该`PlaceHolder1.Controls.Clear();`方法，

并将您的`Bind()`呼叫移出`Page_Load`和移入`OnInit`

您将遇到生命周期问题，因为在您重新创建控件之前，加载视图状态和事件触发代码已经发生

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T13:37:08.090

尝试从 Page_Init() 调用 bind()。

ViewState 在 Page_Init() 之后但在 Page_Load() 之前加载，因此当您从 Page_Load() 调用 bind() 时，您是在 .NET 尝试设置 DropDownList 的选定值但失败之后调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T14:02:41.813

> 是否有可能......让视图状态记住选定的值......？

ViewState 数据在加载事件*之前的回发中恢复。*如果您希望 ViewState 记住控件的*任何内容*，则该控件也*必须*在加载事件之前存在于页面上。

我怀疑您的问题的一部分是您在 selectedindex 更改时重新创建下拉列表控件，但是在该代码中没有任何地方设置 selectedindex ，因此每次设置它时都会破坏选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T13:36:23.973

为什么不通过将 Visible 设置为 false 来隐藏 PlaceHolder？此外，当您需要动态注入内容时，请参阅[真正了解动态控件](http://weblogs.asp.net/infinitiesloop/archive/2006/08/25/TRULY-Understanding-Dynamic-Controls-_2800_Part-1_2900_.aspx)以了解动态控件，因为动态控件远非简单。

# iphone - 使用图像序列的 iPhone 游戏动画的内存问题

> ID：944790
> 
> 赞同：3
> 
> 时间：2009-06-03T13:34:41.763
> 
> 标签：iphone, objective-c, animation, memory-leaks

我目前正在开发一款 iPhone 游戏，该游戏使用图像序列（带有透明胶片的 jpg 和 png）具有大量动画。使用 Instruments 查看 Leaks 和 Object Allocations，我看到的对象分配最多不到 500k。但是，当我们从一个游戏关卡切换到另一个关卡时，程序仍然会崩溃并意外退出。这是不正常的吗？据我所知，iPhone 有 128Mb 的内存。

更多信息：我们正在使用 CAKeyFrameAnimation（Apple 建议）和 imageNamed（以便预先缓存图像）。在每个 Level 对象中，我可以看到当我换出一个级别并加载另一个级别时，会调用 dealloc。然而，内存似乎不断上升和上升，并且永远不会被释放回原来的水平。=(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-09T20:04:07.163

您可以为其使用自动释放并调用显式函数来释放未使用的图像视图，从而图像分配将很低，并且当调用 delloac 函数时，您已经通过显式释放它们完成了一些工作，因此当 delloc 调用时它将释放大部分内存都试试这个。

谢谢

# windows - 适用于 Windows Communication Foundation 的 Linux/Mac OS X 等效项

> ID：944808
> 
> 赞同：6
> 
> 时间：2009-06-03T13:38:36.043
> 
> 标签：windows, linux, wcf, macos, communication

- 编辑 -

Linux 和 Mac OS X 的哪些应用程序开发框架/组件模型类似于 Windows Communication Foundation 和 COM，它们提供用于操作/与软件应用程序通信的高级 IPC 机制？

高级通信模型是指 RPC、发布/订阅等。

我正在为交互设备编写软件，这些软件可以绑定到一些软件中的计算和数据操作。到目前为止，我可能有一个带有物理滑块的控制面板，这些滑块绑定到 Excel、Calculate 或 Numbers 中加载的电子表格中的各个单元格。我有办法感知源自设备的事件，但交互子系统（X11、Explorer 等）无法扩展以处理新类型的交互事件，因此我需要捕获我自己的事件并将其传输到软件和从软件传输他们所绑定的。

此外，我想控制的大多数应用程序都无法修改以响应这些新类型的事件。并且模拟热键和快捷键序列的表现力不够，尽管它会利用现有的交互子系统。这就是我对特定于平台的框架感兴趣的原因，因此我可以利用预先存在的钩子来控制野外的软件。

由于这是用于用户交互，因此它需要具有低延迟。我也想选择无状态的异步通信。

我已经考虑过这个问题，我意识到我需要问两个问题。一个是关于高级 IPC，另一个是关于允许您调用软件对象上的方法的对象组件模型。

--原始问题--

哪些通信/组件框架提供的功能与 Linux 和 Mac OS X 上的 Windows Communications Foundation 最相似？

我的研究小组开始为交互式应用程序开发某种类型的应用程序开发框架，其中涉及新类型的设备来操作/与软件应用程序交互。我们希望使用适配器模式为设备/设备应用程序/应用程序或设备/应用程序通信提供抽象，以便使用此框架构建的软件可以跨 3 个主要操作系统平台移植。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-04T08:08:13.140

如果 Linux 应用程序足够现代，您也许可以利用[D-Bus](http://www.freedesktop.org/wiki/Software/dbus)。它主要是来自 KDE 的 DCop 的后代，在较小程度上是来自 GNOME 的 Bonobo，所以如果它更老，你可能会查找其中的一个。当然，这是假设它使用其中一个工具包。

If it's even older than that or uses a toolkit without any high-level IPC (e.g. Motif (I think)), you may end up having to resort to pipes, sockets, fifos, and anything else I might have forgotten. That assumes, of course, that the app has some kind of hooks for that stuff.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-04T06:34:16.713

这是与 Mac OS X 上的网络相关的指南列表它涵盖了从低级套接字通信到[http://developer.apple.com/documentation/Cocoa/Networking-date.html#doclist的不同级别的网络](http://developer.apple.com/documentation/Cocoa/Networking-date.html#doclist)

它涵盖：

*   核心基础网络功能与低级 BSD 套接字一起工作。
*   Cocoa 流类，用于从流中读取数据并将数据写入流。
*   Mac OS X 中可用的 Web 服务客户端框架。
*   Bonjour 在 Cocoa 或 Carbon 应用中。
*   URL 加载系统操作 URL 和传输 URL 内容
*   分布式对象编程——不同线程或不同进程中的Objective-C对象之间的通信

否则， [Mac OS X](http://www.apple.com/macosx/technology/unix.html)是完全符合 Posix 的 unix 系统，因此您会发现与 Linux 上类似的 IPC 系统。

或者您可能正在使用 Mac OS X [System Services](http://developer.apple.com/documentation/Cocoa/Conceptual/SysServices/SysServices.html)，该系统允许一个应用程序访问另一个应用程序的功能。应用程序宣传他们提供的服务。有关更多详细信息，请阅读链接的 Apple 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T13:43:58.357

最接近的表亲是您选择的语言中的[libsoap](http://sourceforge.net/projects/csoap/)和等效的 SOAP 库。

# php - 如何以编程方式输出 Drupal 节点链接的自定义路径（无 PathAuto）？

> ID：944812
> 
> 赞同：2
> 
> 时间：2009-06-03T13:38:50.177
> 
> 标签：php, drupal

我希望能够在**不使用 PathAuto 模块的情况下以编程方式将输出路径更改为 Drupal 节点**。我们目前处理大量添加到后端的内容（每天数千篇文章）。我不想使用 PathAuto 生成路径别名，而是希望 Drupal 输出默认链接，但附加部分标题以获得更好的 SEO。

**这方面的一个例子是：**

/节点/123

**将更改为**

/node/123/This-is-the-article-title（此路径当前适用于现有节点）

我了解如何在主题基础上通过修改主题/视图模板来做到这一点，但我想这样做，以便在任何时候在任何地方显示到节点的链接时，它都会添加标题插件。

此外，我想将其限制为特定的内容类型（例如，“文章”）。

我正在使用**Drupal 5.x**，我不想**使用 PathAuto**（如果没有必要，我不想存储数十万个路径别名）

**我正在寻找不使用 PathAuto 的解决方案**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T16:57:43.193

Drupal 有一个从“/node/1234/”映射到“/blogs/look-at-what-my-cat-just-did”的内部机制。它是核心系统的一部分，几乎无处不在，在每个请求中都使用，甚至无需您询问。它足够快，你几乎不会注意到它的发生——drupal 中还有很多其他的东西——慢得多。

如果您担心 URL 在前端的显示方式 - 您应该使用 url() 函数（以及对节点内容执行相同操作的过滤器）来处理以另一种方式进行的查找。

Pathauto 的作用在于，当您创建或编辑内容时，它将在 Drupal 的 url_alias 表中生成许多条目（基于您创建的任何 pathauto 规则）。这是一次性费用。除非您以天文数字的速度生成内容 - 这样做的相关成本可以忽略不计。

只需使用 Drupal，您就已经支付了查找 URL 别名的费用。没有黑客核心，你就无法真正避免它。在数据库中存储“数十万个路径别名”并不是什么大不了的事——如果你把它分解成实际的存储需求，你只会看到几兆字节。由于该表的索引很好，因此查找几乎是即时的。这是核心功能，无论 Pathauto 是否在您的系统上都会发生。

除非您对要将节点映射到的 URL 类型有一些非常奇怪的要求，否则您所做的任何事情都只是重新创建 Pathauto 现有功能的子集（并且可能会引入一堆新错误）​​。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-01T13:27:03.397

您可以为每个节点类型设置自定义路径别名，而无需使用路径自动模块：

1.  如果您还没有安装规则模块。
2.  使用“在保存“您的类型”类型的内容之前”事件创建规则
3.  添加一个 php 操作，然后创建您的自定义路径并执行以下操作：
4.  $node->path['alias'] = 你的自定义路径别名
5.  点击保存，完成

如果您不想使用规则模块，则可以在自定义模块中使用 hook_node_presave

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-22T18:19:50.167

尽管 Pathauto 可能是最佳选择，但您可以使用 hook_menu 函数将 URL 挂载到方法。该方法可以根据 URL 以编程方式找到您想要的节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-23T21:16:58.317

您可以尝试使用这两个功能：

[http://api.drupal.org/api/function/custom_url_rewrite_outbound](http://api.drupal.org/api/function/custom_url_rewrite_outbound) [http://api.drupal.org/api/function/custom_url_rewrite_inbound](http://api.drupal.org/api/function/custom_url_rewrite_inbound)

但实际上，Pathauto 是做到这一点的“正确”方式。

# javascript - 在 jQuery 中多次调用函数

> ID：944814
> 
> 赞同：3
> 
> 时间：2009-06-03T13:39:56.727
> 
> 标签：javascript, jquery

我有一个名为“go()”的函数，需要在页面加载时调用三次。现在我已经在一个带有“nav”类的 div 的 ready 事件上调用了它。有人可以建议我如何三次调用 go 函数。一个接一个地添加 go() 调用它只调用一次。

```
$('.nav').ready(function() {
     go();
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T13:45:27.823

即使你说这不起作用，它应该......

```
$('.nav').ready(function() {
     go();
     go();
     go();
    }); 
```

更新：如果你的 go() 函数有错误，它可能会在 go() 第一次返回之前终止执行。在 Firebug 中运行，看看是否有任何错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T13:46:22.190

```
$('.nav').ready(function() {
     go();
     go();
     go();
    }); 
```

应该叫它三遍。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T13:48:34.417

正如其他人所说，一个接一个地拨打电话应该叫它三遍。由于函数的调用方式等原因，go() 正在执行的操作可能不会多次执行。仔细查看 go() 可能会有所帮助 - 请发布该代码和/或解释原因你需要调用它 3 次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T13:47:14.450

就像 rikh 说的，你一定是弄错了。

请测试当您将 go() 函数替换为以下内容时，您是否可以看到三个 hello-s：

```
function go() {
  alert("hello");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-12T21:50:29.780

我想我理解你想要做什么......用我可能描述的最好的术语，因为我没有上过任何一个 jQuery 课程，只是通过像这个网站这样的地方自己学习了一些零碎的东西。我正在做类似的事情。`datepicker`对于需要弹出日历的两个不同字段，*我*需要调用两次-*在*. 在我的脑海中，我做了这个，我用两个不同的值制作了两个单独的脚本：*`form``id`*

 *```
<script>
   $( function() {
     $( "#datepicker" ).datepicker();
   } );
</script>  

<script>
 $( function() {
   $( "#datepicker2" ).datepicker();
 });
</script> 
```

我`form`在`body`我的网页中看起来像这样：

对于我的入住日期：

```
<input name="DateIn" type="text" id="datepicker" style="width:90px"/> 
```

对于我的退房日期：

```
<input name="DateOut" type="text" id="datepicker2" style="width:90px"> 
```

所以我猜你需要制作 3 个脚本，每个脚本在你的头脑中都带有`#go1`, `#go2`,`#go3`在你的`html`. 我希望这有帮助。

# c - 在 Metal C 中使用 WTO 进行打印

> ID：944816
> 
> 赞同：4
> 
> 时间：2009-06-03T13:40:09.647
> 
> 标签：c, mainframe, zos, metalc

我正在尝试使用 Metal C 中的 WTO 指令将“Hello World”打印到我的工作日志中。这是基于 z/OS V1R10.0 Metal C Programming Guide and Reference 的第 1.2.3.5 节中的示例当我使用 WTO 时出现的问题是我的缓冲区包含 0 或 ASCII 到 EBCDIC 转换。我在下面粘贴了我的工作日志的相关部分，然后是我的代码，然后是我无法编译的 IBM 示例中的代码。作业日志

```
09.01.56 J0686275 IEF403I IMIJWS0G - 开始 - 时间 = 09.01.56
 09.01.56 J0686275 +...0.......
 09.01.56 J0686275 - --计时（分钟）-- ----分页计数---
09.01.56 J0686275-IMIJWS0G 去 00 6 .00 .00 .00 1292 0 0 0 0 0 1
 09.01.56 J0686275 IEF404I IMIJWS0G - 结束 - 时间 = 09.01.56

```

我的代码

```
＃包括
＃包括
＃包括
 主函数（）
 {
                                    结构 WTO_PARM {
               无符号短长度；
               无符号短代码；
               字符*文本；
            } wto_buff = { 4+11, 0, "你好世界" };
            __asm(" WTO MF=(E,(%0))" : : "r"(&wto_buff));

        }

```

IBM 代码

```
int main() {

            结构 WTO_PARM {
               无符号短长度；
               无符号短代码；
               字符文本[80]；} wto_buff = { 4+11, 0, "你好世界" }; __asm(" WTO MF=(E,(%0))" : : "r"(&wto_buff));
            返回0；
        }

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-16T07:59:28.520

IBM 示例对我有用（在 Z/os 1.9 下），但我必须添加一个编译指示来设置代码页：在示例顶部：#pragma filetag("IBM-500") 编译器不接受 [ 和 ]在字符文本[80]中；我也尝试将 char text[80] 更改为 char *text ，但我得到了和你一样奇怪的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T14:01:09.570

也许两个版本的结构在内存中的布局不一样？我在 gcc 中试过这个：

```
#include <stdio.h>

struct WTO_PARM {
    unsigned short len;
    unsigned short code;
    char *text;
};

int main()
{
    struct WTO_PARM moo = { 4+11,0,"hello" };
    printf("size %zu struct %p string %p\n", sizeof(struct WTO_PARM),&moo,moo.text);
    return 0;
} 
```

结果如下：

```
size 8 struct 0x22cce0 string 0x402000 
```

但是，如果我将 text 参数的类型更改为 char[80]，结果将更改为：

```
size 84 struct 0x22cc80 string 0x22cc84 
```

WTO 指令可能希望将字符串直接打包到该结构中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-04T14:39:25.580

为什么不能编译 IBM 样本？它对我来说很好 - 也许您可以向我们展示您的编译器参数和错误消息？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T08:16:41.017

您是否通过 TN3270 客户端编辑您的代码？问题很可能与您的模拟器中的代码页有关。例如，我需要在 ISPF 中进行以下更改： c x'4A' x'AD' all (for [ ) 和 c x'5A' x'BD' (for ]) 以编译源代码...

# .net - 如何从 .NET 1.1 应用程序使用 .NET 2.0 XSLT 引擎？

> ID：944818
> 
> 赞同：1
> 
> 时间：2009-06-03T13:40:48.647
> 
> 标签：.net, xslt, transform

我正在开发一个 .NET 1.1 程序集，该程序集进行了许多巨大的 XSL 转换。这开始导致内存问题。因此，我想在 .NET 2.0 框架中使用 XSLT 引擎，因为我知道它效率更高且资源占用更少。注意：由于时间和预算限制（超出我的控制范围），目前不能将 .NET 1.1 程序集升级到 .NET 2.0。

我编写了一个可以进行 XSL 转换的 .NET 2.0 程序集，并将其公开为 COM+ 互操作对象。当我从 .NET 1.1 程序集中加载这个对象时，它加载得很好，但是当我加载 XSL 转换时，就会发生异常，并且它不包含任何关于出错的有用信息。

有趣的是，如果我在 .NET 2.0 程序集中调用一个更简单、不相关的测试方法（就像一个只写入事件日志而不是进行转换的方法），它似乎可以工作。

关于替代方法的任何想法？或者有什么明显的我做错了吗？

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T13:54:05.437

我怀疑单独的 COM 互操作会扼杀您在将 XSLT 升级到 2.0 后获得的任何性能增强。可能也与无用异常有关。

您是否尝试过在 2.0 下运行 1.1 程序集？有关如何针对特定版本的框架的说明，请参阅[此页面。](http://weblogs.asp.net/infinitiesloop/archive/2006/08/25/TRULY-Understanding-Dynamic-Controls-_2800_Part-1_2900_.aspx)我对底层的 XSLT 引擎不是很熟悉，但仅仅切换目标可能会让您在 2.0 中获得玩具，并且肯定会获得 2.0 的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-04T03:20:10.813

考虑[msxsl.exe 工具](http://www.microsoft.com/downloads/details.aspx?familyid=2FB55371-C94E-4373-B0E9-DB4816552E41&displaylang=en)上的 Process.Start() 。它不使用 .NET。或者，如果您仍然在进行 COM 互操作，请考虑 MSXML——它也可以进行 XSL，而且速度很快。

# java - java中的访问者模式实现-这看起来如何？

> ID：944824
> 
> 赞同：2
> 
> 时间：2009-06-03T13:42:21.840
> 
> 标签：java, visitor-pattern

Alrite，我将直接跳到代码：

```
public interface Visitor {

public void visitInventory(); 
public void visitMaxCount();
public void visitCountry();
public void visitSomethingElse();
public void complete();
//the idea of this visitor is that when a validator would visit it, it would validate data
//when a persister visits it, it would persist data, etc, etc.
// not sure if I making sense here...
}

public interface Visitable {
public void accept(Visitor visitor); 
} 
```

这是一个基本实现：

```
public class StoreValidator implements Visitor {
private List <ValidationError> storeValidationErrors = new ArrayList<ValidationError>();

public void addError(ValidationError error) {
storeValidationErrors.add(error);
}

public List<ValidationError> getErrors() {
return storeValidationErrors;
}

public void visitInventory() {
// do nothing 
}

public void visitMaxCount() {
//do nothing
}
//... etc..  all empty implementations 

} 
```

你会明白为什么我在这里做了一个空的实现......我现在要写一个验证器......它扩展了 StoreValidator

```
public XYZValidator extends StoreValidator {

@Override 
public void visitInventory(Visitable visitable) { 
// do something with visitable .. cast it to expected type
// invoke a DAO, obtain results from DB
// if errors found, do addError(new ValidationError()); with msg.
}

@Override 
public void visitMaxCount(Visitable visitable) {
//do something with visitable.. 
}

// I wouldn't implement the rest coz they wouldn't make sense
// in XYZValidator.. so they are defined as empty in StoreValidator.

} 
```

现在这是可访问的样子：

```
public Store implements Visitable {

public void accept(Visitor visitor) {
visitor.visitInventory();
visitor.visitMaxCount();
}
} 
```

我可以在 Store 对象列表上执行类似操作的代码：

```
List<Store> stores; //assume this has a list of stores.
StoreValidator validator = new XYZValidator(); //or I would get it from a validatorfactory
for(Store store: stores) {
           store.accept(validator); // so even if you send a wrong validator, you are good.
} 
```

同样，您将拥有 ABCValidator，它将为其他方法（visitCountry / visitSomethinElse）提供实现，并且它将从 StoreValidator 扩展。我会有另一种类型的对象（不是存储）定义接受方法。

I do see a problem here... Say, I need a FileValidator which is different from StoreValidator, I would expect it to have none of these business related validations such as visitInventory(), etc. But, by having a single interface Visitor, I would endup declaring all kinds of methods in Visitor interface. Is that correct? Is this how you do it?

I don't know if I got the pattern wrong, or if I am making any sense. Please share your thoughts.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-03T14:03:38.553

Some time ago I wrote something similar for my master thesis. This code is slightly type safe than yours:

```
interface Visitable<T extends Visitor> {

   void acceptVisitor(T visitor);
}

interface Visitor {

    /**
     * Called before any other visiting method.
     */
    void startVisit();

    /**
     * Called at the end of the visit. 
     */
    void endVisit();
} 
```

example:

```
interface ConstantPoolVisitor extends Visitor {

    void visitUTF8(int index, String utf8);

    void visitClass(int index, int utf8Index);

    // ==cut==
}

class ConstantPool implements Visitable<ConstantPoolVisitor> {

    @Override
    public void acceptVisitor(ConstantPoolVisitor visitor) {
        visitor.startVisit();

        for (ConstanPoolEntry entry : entries) {
            entry.acceptVisitor(visitor);
        }

        visitor.endVisit();
    } 
```

so yes, I think that this definitely a good and flexible design if, and only if, your data changes slower than your behaviour. In my example the data is Java bytecode, that is fixed (defined by the JVM specification). When "behaviour dominates" (I want to dump, compile, transform, refactor, etc my bytecode) the Visitor pattern let you to change/add/remove behaviour without touching your data classes. Just add another implementation of Visitor.

For the sake of simplicity assume that I must add another visit method to my Visitor interface: I would end in breaking all my code.

**As alternative I would consider the strategy pattern for this scenario**. Strategy + decorator is a good design for validation.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-03T14:09:55.607

There is a problem with your code as given. The interface you give has methods such as

```
public void visitInventory(); 
```

but you then implement it in XYZValidator as

```
public void visitInventory(Visitable visitable) 
```

The [visitor pattern](http://en.wikipedia.org/wiki/Visitor_pattern) is a way to implement [multiple dispatch](http://en.wikipedia.org/wiki/Multiple_dispatch) in languages that do not do that automatically (such as Java). One of the requirements is that you have a group of related classes (i.e. a set of subclasses with a single super class). You don't have that here, so the visitor pattern is not appropriate. The task you are trying to do, however, is fine, it is just not the Visitor pattern.

In Java, you should think of the Visitor pattern if you have code like

```
public void count(Item item) {
  if (item instanceof SimpleItem) {
    // do something
  } else if (item instanceof ComplexItem {
    // do something else
  } else ...
} 
```

particulary if the subclasses of Item are relatively fixed.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T14:04:07.583

I'm using a visitor pattern in a different way.. I have a specific Visitor interface for a type of object and this interface declares only one method - for visiting that object.. like this:

```
public interface TreeNodeVisitor {
    void visit(TreeNode node);
} 
```

the object *TreeNode* can accept *TreeNodeVisitor*s which means he just calls it's *visit* method for the node and/or it's children..

The concrete implementation of the visitor implements the **visit** method and says what the visitor will do.. for example **ContryVisitor, InventoryVisitor, etc**

This approach should avoid your probleam..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T14:24:49.493

You probably don't want to map a pattern directly to a single interface that everything following that pattern implements. Patterns are NOT Interfaces, they are general plans for implementing a solution.

In your example you would create a StoreVisitor interface and a FileVisitor interface for the different business objects that wish to use the Visitor pattern in the appropriate circumstances.

It might be that different Visitor implementations share common activities - so you could have a superinterface that defines those common functions. You could then code Visitable interfaces to use either the specific Visitable interface or it's superclass as appropriate.

For example, the FileVisitor and SQLTableVisitor interfaces might be a subclass of a DataStoreVisitor interface. Then:

VisitableStore accepts a StoreVisitor,

VisitableFile accepts a Filevisitor, or

VisitableDataStore accepts a DataStoreVistor (which might be an implementation of either FileVisitor or SQLTableVisitor).

*   forgive the random examples, I hope this makes sense.

# c# - 指定的初始化向量 (IV) 与此算法的块大小不匹配

> ID：944833
> 
> 赞同：37
> 
> 时间：2009-06-03T13:44:14.787
> 
> 标签：c#, encryption, rijndaelmanaged, rijndael

我正在研究一种基本加密方法。我正在使用 RijndaelManaged。我很久以前从某个地方得到这个代码，但不记得在哪里。

我之前的代码可以工作，但是发生了一些变化，我无法弄清楚。

当我运行我的代码时，我收到以下错误；

> 指定的初始化向量 (IV) 与此算法的块大小不匹配。

这是我的代码：

```
string textToEncrypt = "TEST STRING";

int keySize = 256;
string hashAlgorithm = "SHA1";
string passPhrase = "AH!PSB0%FGHR$";
string saltValue = "LRT%YUR#VBNL@1";
string initVector = "HR$2pIjHR$2pIj";

byte[] initVectorBytes = Encoding.ASCII.GetBytes(initVector);
byte[] saltValueBytes = Encoding.ASCII.GetBytes(saltValue);

byte[] plainTextBytes = Encoding.UTF8.GetBytes(textToEncrypt);

var password = new PasswordDeriveBytes(passPhrase, saltValueBytes, hashAlgorithm, 2);

byte[] keyBytes = password.GetBytes(keySize / 8);

RijndaelManaged symmetricKey = new RijndaelManaged();

symmetricKey.Mode = CipherMode.CBC;

ICryptoTransform encryptor = symmetricKey.CreateEncryptor(keyBytes,initVectorBytes);

MemoryStream memoryStream = new MemoryStream();

var cryptoStream = new CryptoStream(memoryStream,encryptor,CryptoStreamMode.Write);
cryptoStream.Write(plainTextBytes, 0, plainTextBytes.Length);

cryptoStream.FlushFinalBlock();

byte[] cipherTextBytes = memoryStream.ToArray();

memoryStream.Close();
cryptoStream.Close();

string cipherText = Convert.ToBase64String(cipherTextBytes); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-06-03T13:45:56.997

问题是您的初始化向量大小需要为 16 个字节。

您的初始向量大小为 14 个字节。

您需要将初始向量的大小增加 2 个字节，您的代码才能正常工作。

例子：

```
string initVector = "HR$2pIjHR$2pIj12"; 
```

然后，您将使用当前代码和提供的示例 IV（初始化向量）大小获得输出：

hAC8hMf3N5Zb/DZhFKi6Sg==

本文很好地解释了初始化向量是什么。

[http://en.wikipedia.org/wiki/Initialization_vector](http://en.wikipedia.org/wiki/Initialization_vector)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-05-06T18:10:39.237

您应该能够检查 IV 需要使用多少字节：

```
algorithm.BlockSize / 8 
```

BlockSize 以位为单位，因此 128 位 / 8 给出 16 个字节的 ASCII，您还可以找到`Rfc2898DeriveBytes`一个用于生成密钥的有用类。

```
algorithm.IV = rfc2898DeriveBytesForIV.GetBytes(algorithm.BlockSize / 8); 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-07-27T13:19:56.917

如果有人将他们的代码从 .NET Framework 迁移到 .NET Core 并开始出现此异常`RijndaelManaged.CreateEncryptor`：由于“ [.NET Framework 允许大于 64 位的 IV 并截断它们](https://referencesource.microsoft.com/#mscorlib/system/security/cryptography/tripledescryptoserviceprovider.cs,101)”这一事实，您的旧感冒正在起作用。

要解决，请参阅[Kevin Jones](https://github.com/vcsjones)评论：“[只需将您的 IV 更改为仅前 8 个字节](https://github.com/dotnet/runtime/issues/27572#issuecomment-427890385)”

所以，举个例子：

```
private static byte[] IV_192 =  { 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F, 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18 }; 
```

会成为：

```
// Rename field if desired.
private static byte[] IV_192 =  { 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08 }; 
```

Also worth noting, "[Rijndael class is the predecessor of the Aes algorithm. You should use the Aes algorithm instead of Rijndael.](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.rijndaelmanaged?view=netcore-3.1)"

# java - Tomcat 6 在启动时冻结

> ID：944837
> 
> 赞同：2
> 
> 时间：2009-06-03T13:44:37.390
> 
> 标签：java, tomcat6

当我启动 tomcat 6 时，它会在启动的某个时间点冻结​​并永远停留在那里（我已经等了 3 个小时，但什么也没发生——甚至没有出现内存不足的错误）。我不知道什么会导致这样的行为。

我正在使用 Jira 和 Confluence 运行 tomcat，问题似乎是当 tomcat 尝试加载 confluence 时：

```
******************************************************************************************************
JIRA 3.13.3 build: 344 (Enterprise Edition) started. You can now access JIRA through your web browser.
******************************************************************************************************

    2009-06-02 19:38:21,272 JiraQuartzScheduler_Worker-1 INFO [jira.action.admin.DataExport] Export took 387ms
    2009-06-02 19:38:21,291 JiraQuartzScheduler_Worker-1 INFO [jira.action.admin.DataExport] Wrote 392 entities to export
    2009-06-02 19:38:21,606 INFO [main] [com.atlassian.confluence.lifecycle] contextInitialized Starting Confluence 2.10.3 (build #1519)
    2009-06-02 19:38:21,711 INFO [main] [beans.factory.xml.XmlBeanDefinitionReader] loadBeanDefinitions Loading XML bean definitions from class path resource [bootstrapContext.xml]
    2009-06-02 19:38:22,236 INFO [main] [beans.factory.xml.XmlBeanDefinitionReader] loadBeanDefinitions Loading XML bean definitions from class path resource [setupContext.xml] 
```

在上面的这条线之后，没有更多的事情发生。

我认为这可能是 permGem 或类似的问题，因此为了避免 permGem 限制，我将 catalina.sh 配置为：

```
CATALINA_OPTS="$CATALINA_OPTS -Dorg.apache.jasper.runtime.BodyContentImpl.LIMIT_BUFFER=true"

JAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms1536m -Xmx1536m -XX:PermSize=256m -XX:MaxPermSize=640m -XX:+DisableExplicitGC" 
```

我增加了很多jvm的空间来看看它是否有效，但它没有帮助。

Tomcat 版本：6.0.18 Jira 版本：3.13.3 Confluence 版本：2.10.3

那么，以前有人遇到过这个问题吗？可能是内存（RAM）问题吗？Spring和Tomcat6有问题吗？还是其他什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T13:49:03.730

您的日志中有任何错误吗？

您是否检查过 Confluence 是否正在等待数据库或网络？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T13:52:51.227

获取应用程序的[线程转储](http://java.sun.com/developer/technicalArticles/Programming/Stacktrace/)并检查是否存在 BLOCKED、WAITING 或 TIMED_WAITING 线程。

还要注意 RUNNABLE 中的线程，*但*要进行网络 I/O，例如`InputStream.read()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-04T14:08:30.930

我检查了我的数据库，它根本不工作，但这不是让我的 tomcat 冻结的问题。

我遇到了内存不足的问题。在 tomcat 卡住的那个地方，有一个内存峰值，可以从 confluence 加载很多东西。

我正在使用虚拟机 (VMware) 在具有 3 个其他虚拟机的服务器内运行我的 confluence、jira 和 svn。

为了解决这个问题，我不得不将我的虚拟机可以使用的内存 (RAM) 从 2Gb 增加到 4Gb。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-08T13:09:48.277

请检查 $CATALINA_BASE/common/lib/javaee.jar 是否存在

# javascript - 请解释这个 jQuery 语句

> ID：944838
> 
> 赞同：0
> 
> 时间：2009-06-03T13:44:40.493
> 
> 标签：javascript, jquery

这究竟是在做什么？

```
this.$blah = jQuery("<div id=blahblah1></div>"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-03T13:48:38.707

它创建了一个新的 DOM 元素 (div)，它包含在带有 id 的 jQuery 对象中，`blahblah1`并将其分配给当前对象的属性。有关从 HTML 创建元素的信息，请参阅[jQuery Core 文档](http://docs.jquery.com/Core/jQuery#htmlownerDocument)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T13:54:07.730

这将创建一个新的 jQuery 对象，其中包含一个新创建`div`的 id `blahblah1`。然后将 jQuery 对象分配给当前对象的 $blah 属性。

# apache-flex - 在 Flex/ActionScript 中处理来自 SOAP 代理对象的可空数字的最佳方法

> ID：944839
> 
> 赞同：4
> 
> 时间：2009-06-03T13:44:44.597
> 
> 标签：apache-flex, soap

我在 Flex 3 中使用由 Flex Builder 中的工具创建的 WSDL 生成的代理类来使用 SOAP 服务。一些 SOAP 对象具有可为空的整数属性，这些属性在 SOAP 到本地对象的转换过程中被转换为零。我们正在考虑一种“幻数”方法，如果服务返回 -1，我们将其视为 null。这显然是一种 hack，在某些情况下可能不起作用（例如，-1 是有效 # 的情况）。

有没有人找到更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-01-16T08:35:20.547

Flex Soap Encoder 将 NaN 更改为 Null。请扩展此类并覆盖此行为。

# web-services - 将一些 Web 服务保持为私有，而另一些则为公开

> ID：944841
> 
> 赞同：1
> 
> 时间：2009-06-03T13:45:18.653
> 
> 标签：web-services, iis

不确定实现某事的最佳方式...

我们在几个 Web 服务器上运行了许多在 asp.net v3.5 上的 Web 服务。他们都很好地互相交谈，并在公共互联网上交谈。

现在我们希望将其中一些网络服务保持为“私有”，即使它们无法在公共互联网上使用，而让其他网络服务可以访问。

AFAICS 最简单的方法就是在不同的端口上运行私有服务，并将公共服务保留在端口 80 上。我们的防火墙只允许通过端口 80 访问 Internet，因此会将来自 Internet 的任何请求丢弃到私有 Web 服务。排序...我想？

这个想法是一个合理的解决方案吗？或者是否有一些我应该使用的简单的 IIS 机制？

谢谢

萨尔瓦多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T13:48:53.263

您可以通过 IIS 控制面板（目录安全选项卡）中的黑名单/白名单限制对站点的访问。这就是我过去所做的按IP地址过滤的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T13:47:00.567

您可以将 IP 访问限制设置到您想要的任何站点/应用程序上。例如，我们有几个`internal`Web 服务只允许访问 10.xxx 范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T13:54:04.967

> AFAICS 最简单的方法是在不同的端口上运行私有服务并将公共服务保留在端口 80 上。我们的防火墙只允许通过端口 80 访问 Internet，因此会将来自 Internet 的任何请求丢弃到私有 Web 服务。

这正是我们采取的方法。我们还有一个 VPN，以便员工在远程工作时可以访问该站点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T14:01:28.370

这实际上取决于您希望内部 Web 服务的安全性。

如果您在内部 Web 服务上有敏感数据，则需要将它们放在完全不同的服务器上，即使您不允许通过为它们分配不同的端口从外部访问它们。

但是，如果您对敏感数据没有问题，那么为内部和外部用户分配不同的端口或 IP 地址是一个不错的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T13:50:21.543

除了端口之外，您还可以对调用者使用限制（例如，使用 IP 地址过滤）。

此外，您实际上可能需要对 Web 服务的调用者进行身份验证，如果您使用 ActiveDirectory，这应该很容易配置。

在任何情况下，如果您有一个“公共”网络服务，它也是私有的，您可能希望“发布”两次：一次用于公共（带有漂亮的外部 URL），一次用于内部，以便您的其他内部服务和/ 或客户端不必通过“外部”URL。然后，您可以为同一服务的不同发布者配置不同的限制（客户端 IP、身份验证等）。

# c++ - 在 VS2005 中使用 MSBuild for C++

> ID：944842
> 
> 赞同：2
> 
> 时间：2009-06-03T13:45:24.393
> 
> 标签：c++, visual-studio-2005, msbuild

是否可以将最新的 MSBuild (.NET4/VS2010) 与 VS2005 工具链一起使用？

我有一个针对 VS2005 编译的 C++ 项目。当编译器仍处于测试阶段时，我还没有准备好升级到 VS2010。但我想使用新版本的 MSBuild，因为它本机构建 C++，并提供旧 VCBuild 工具所没有的扩展点和灵活性。

有谁知道您是否可以通过这种方式使用 MSBuild？还是 .NET 4 中的 MSBuild 与 VS2010 工具链耦合？

提前致谢，

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-14T18:29:14.653

如果你还没有准备好升级到 VS2010，因为它是 Beta，你不担心 .NET 4.0 是 beta 吗？您可以使用 MSBuild 4.0 来定位其他版本的 .NET 运行时（2.0 及更高版本），但这些工具也处于测试阶段。

您必须将项目文件转换为 MSBuild 4.0 项目文件，然后使用它们。最简单的方法是在 Visual Studio 2010 中打开解决方案文件。

赛义德·易卜拉欣·哈希米

我的书：[Microsoft Build Engine 内部：使用 MSBuild 和 Team Foundation Build](https://rads.stackoverflow.com/amzn/click/com/0735626286)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-10-10T17:05:37.403

这个答案对您来说可能不再感兴趣，但万一有人在搜索中点击它：

.net 4.0 提供的 MSBuild 可用于构建面向 VS2010、VS2008 或（稍加定制）VS2005 的本机 c++ 项目

这是通过设置平台工具集来完成的。

有关详细说明，请参阅以下博客文章：http: [//blogs.msdn.com/b/vcblog/archive/2009/12/08/c-native-multi-targeting.aspx](http://blogs.msdn.com/b/vcblog/archive/2009/12/08/c-native-multi-targeting.aspx)

# c# - Lambda 函数中的 if 语句？

> ID：944853
> 
> 赞同：6
> 
> 时间：2009-06-03T13:48:11.627
> 
> 标签：c#, .net, c#-3.0, lambda

这可能很简单，但我对 Lambda 比较陌生，所以请多多包涵。

我有一个使用 Lambda 函数进行递归的函数。主函数接收一个布尔值，告诉它是否在 lambda 中包含某些信息。

该函数旨在为 XML 编写一个自定义类 - 我认为代码是非常自我解释的。

目前我已经使用一个简单的 if 语句克服了这个问题，但是感觉很难看，所以想知道是否有人知道更好的方法？

```
 private XElement ErrorListToXml(ErrorList el, bool outputTagsOnly)
    {
        // Need to declare in advance to call within the lambda.
        Func<ErrorType, XElement> recursiveGenerator = null;

        if (outputTagsOnly)
            recursiveGenerator = error => new XElement
                (error.Name,
                 error.ChildErrors.Select(recursiveGenerator));
        else
            recursiveGenerator = error => new XElement
          (error.Name,
          new XAttribute("Ignore", error.Filter),
           error.ChildErrors.Select(recursiveGenerator));

        var element = new XElement
                   ("ErrorList",
                    ChildErrors.Select(recursiveGenerator));

        Console.WriteLine(element);

        return element;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-03T14:13:17.533

mquander 的解决方案可以稍微改进以减少重复。您可以使用这样一个事实，即您可以`null`在 XElement 构造函数内容中传递一个元素，并且它会被忽略。因此，我们可以将条件进一步移动到：

```
Func<ErrorType, XElement> recursiveGenerator = null;    
recursiveGenerator = (error => new XElement(error.Name,
            outputTagsOnly ? null : new XAttribute("Ignore", error.Filter),
            error.ChildErrors.Select(recursiveGenerator));

var element = new XElement("ErrorList", ChildErrors.Select(recursiveGenerator)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-03T13:54:02.190

如果您愿意，可以在 lambda 函数中安全地移动“if”语句：

```
Func<ErrorType, XElement> recursiveGenerator = null;

recursiveGenerator = (error =>
    outputTagsOnly
        ? new XElement(error.Name,
                       error.ChildErrors.Select(recursiveGenerator));
        : new XElement(error.Name, new XAttribute("Ignore", error.Filter),
                       error.ChildErrors.Select(recursiveGenerator)));

var element = new XElement("ErrorList", ChildErrors.Select(recursiveGenerator)); 
```

除此之外，似乎没有任何简单的方法可以简化您所拥有的。

（PS当它看起来很丑时，通过漂亮的打印给那只猪涂上口红;）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-03T13:56:32.903

您可以很容易地在 lambda 中相同类型的值之间做出决定：

```
customer => flag ? customer.Name : customer.Address 
```

您可以稍加努力地在 lambda 中使用 if 语句：

```
customer =>
{
  if (flag)
    return customer.Name
  else
    return customer.Address
} 
```

这些都不会对您的方法有很大帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T13:54:13.033

我想你可以做到这一点，但归根结底它仍然是一个如果：

```
 recursiveGenerator = error => outputTagsOnly ? 
                   new XElement(error.Name,error.ChildErrors.Select(recursiveGenerator)
              : 
              new XElement(error.Name,new XAttribute("Ignore", error.Filter), 
             error.ChildErrors.Select(recursiveGenerator); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T14:13:04.570

您可以尝试将您的问题分解为两个不同的问题：

1.  如何从错误结构中构建树。
2.  将什么放入树节点。

然后代码将如下所示：

```
 private XElement ErrorListToXml(ErrorList el, bool outputTagsOnly)
        {
            // Need to declare in advance to call within the lambda.
            Func<ErrorType, XElement> treeGenerator = null;
            Func<ErrorType, object[]> elementParametersGenerator = null;

            treeGenerator = error => new XElement
                (error.Name,
                elementParametersGenerator(error));

            if(outputTagsOnly)
                elementParametersGenerator = error => 
                    new object[] {error.ChildErrors.Select(treeGenerator)};
            else
                elementParametersGenerator = error => 
                    new object[] { new XAttribute("Ignore", error.Filter), error.ChildErrors.Select(treeGenerator) };

            var element = new XElement
                       ("ErrorList",
                        ChildErrors.Select(treeGenerator));

            Console.WriteLine(element);

            return element;
        } 
```

在这种特殊情况下并没有明显更好，但它是一种更通用的方法。

# asp.net-mvc - 如何限制对 ASP.NET MVC 中某些页面的访问？

> ID：944857
> 
> 赞同：5
> 
> 时间：2009-06-03T13:48:35.027
> 
> 标签：asp.net-mvc, authorization, roles

我希望锁定对用户编辑页面（例如/user/pure.krome/edit）的访问，如果

a) Identity.IsAuthenticated = false

或者他们已经过身份验证但是

b) Idenitity.Name != 他们尝试编辑的用户页面的用户名
c) Identity.UserType() != UserType.Administrator // 这就像一个角色，不使用 RoleProviders。

我假设你可以用一些东西来装饰控制器或控制器的操作方法，但我只是不确定是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T13:51:34.287

看看`AuthorizeAttribute`。

[ASP.Net MVC：可以覆盖 AuthorizeAttribute 吗？](https://stackoverflow.com/questions/532773/asp-net-mvc-can-the-authorizeattribute-be-overriden)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T13:53:24.720

我使用从[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)派生的自定义属性来执行此操作。覆盖[OnAuthorize](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.onauthorization.aspx)方法并实现您自己的逻辑。

```
public class OnlyUserAuthorizedAttribute : AuthorizeAttribute
{
    public override void OnAuthorize( AuthorizationContext filterContext )
    {
        if (!filterContext.HttpContext.User.Identity.IsAuthenticated)
        {
            filterContext.Result = new HttpUnauthorizeResult();
        }
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-04T14:48:56.263

我实现了以下 ActionFilterAttribute ，它可以处理身份验证和角色。我将角色存储在我自己的数据库表中，如下所示：

*   用户
*   UserRole（包含 UserID 和 RoleID 外键）
*   角色

```
public class CheckRoleAttribute : ActionFilterAttribute
{
    public string[] AllowedRoles { get; set; }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        string userName = filterContext.HttpContext.User.Identity.Name;

        if (filterContext.HttpContext.User.Identity.IsAuthenticated)
        {
            if (AllowedRoles.Count() > 0)
            {
                IUserRepository userRepository = new UserRepository();
                User user = userRepository.GetUser(userName);
                bool userAuthorized = false;
                foreach (Role userRole in user.Roles)
                {
                    userAuthorized = false;
                    foreach (string allowedRole in AllowedRoles)
                    {
                        if (userRole.Name == allowedRole)
                        {
                            userAuthorized = true;
                            break;
                        }
                    }
                }
                if (userAuthorized == false)
                {
                    filterContext.HttpContext.Response.Redirect("/Account/AccessViolation", true);
                }
            }
            else
            {
                filterContext.HttpContext.Response.Redirect("/Account/AccessViolation", true);
            }
        }
        else
        {
            filterContext.HttpContext.Response.Redirect(FormsAuthentication.LoginUrl + String.Format("?ReturnUrl={0}", filterContext.HttpContext.Request.Url.AbsolutePath), true);
        }

    } 
```

我这样称呼...

```
 [CheckRole(AllowedRoles = new string[] { "admin" })]
    public ActionResult Delete(int id)
    {
        //delete logic here
    } 
```

# python - 如何从 HTML 中提取嵌套表？

> ID：944860
> 
> 赞同：5
> 
> 时间：2009-06-03T13:48:39.270
> 
> 标签：python, html, html-table, extract

我有一个 HTML 文件（以 utf-8 编码）。我用`codecs.open()`. 文件架构是：

```
<html>
// header
<body>
  // some text
  <table>
    // some rows with cells here
    // some cells contains tables
  </table>
  // maybe some text here
  <table>
    // a form and other stuff
  </table>
  // probably some more text
</body></html> 
```

我只需要检索第一个表（丢弃带有表单的表）。省略`<table>`对应的 first 之前和之后的所有输入`</table>`。一些单元格还包含段落、粗体和脚本。主表的每一行不超过一个嵌套表。

如何提取它以获取行列表，其中每个元素包含普通（unicode 字符串）单元格的数据和每个嵌套表的行列表？嵌套层数不超过 1 层。

我尝试了 HTMLParse、PyParse 和 re 模块，但无法正常工作。我对 Python 很陌生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T14:07:04.163

尝试[美丽的汤](http://www.crummy.com/software/BeautifulSoup/)

原则上，您需要使用真正的解析器（Beaut.Soup 是），正则表达式不能处理嵌套元素，出于计算机科学的原因（有限状态机无法解析上下文无关语法，IIRC）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-03T14:29:27.253

你可能喜欢[lxml](http://codespeak.net/lxml/)。我不确定我是否真的理解你想用那个结构做什么，但也许这个例子会有所帮助......

```
import lxml.html

def process_row(row):
    for cell in row.xpath('./td'):
       inner_tables = cell.xpath('./table')
       if len(inner_tables) < 1:
           yield cell.text_content()
       else:
           yield [process_table(t) for t in inner_tables]

def process_table(table):
    return [process_row(row) for row in table.xpath('./tr')]

html = lxml.html.parse('test.html')
first_table = html.xpath('//body/table[1]')[0]

data = process_table(first_table)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T14:13:23.853

如果 HTML 格式正确，您可以将其解析为 DOM 树并使用 XPath 提取您想要的表格。我通常使用[lxml](http://codespeak.net/lxml/index.html)来解析 XML，[它也可以解析 HTML](http://codespeak.net/lxml/parsing.html)。

用于拉出第一个表的 XPath 将是“//table[1]”。

# python - Numpy：我应该使用 newaxis 还是 None？

> ID：944863
> 
> 赞同：100
> 
> 时间：2009-06-03T13:48:45.930
> 
> 标签：python, numpy

在 numpy 中，可以使用切片语法中的“newaxis”对象来创建长度为 1 的轴，例如：

```
import numpy as np
print np.zeros((3,5))[:,np.newaxis,:].shape
# shape will be (3,1,5) 
```

该[文档指出](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#numpy.newaxis)，也可以使用`None`代替`newaxis`，效果完全相同。

有什么理由选择一个而不是另一个吗？是否有任何一般偏好或风格指南？我的印象是它`newaxis`更受欢迎，可能是因为它更明确。那么有什么理由`None`允许吗？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2009-06-03T15:05:52.140

`None`是允许的，因为`numpy.newaxis`它只是 . 的别名`None`。

```
In [1]: import numpy

In [2]: numpy.newaxis is None
Out[2]: True 
```

作者可能选择了它，因为他们需要一个方便的常量，并且`None`可用。

至于为什么你应该更喜欢`newaxis`:`None`主要是因为它更明确，部分原因是有一天`numpy`作者可能会将其更改为`None`. （他们不打算，也可能不会，但没有充分的理由更喜欢`None`.)

# crystal-reports - 表别名和数据表

> ID：944864
> 
> 赞同：0
> 
> 时间：2009-06-03T13:48:52.967
> 
> 标签：crystal-reports

我正在尝试用数据表填写报告。该报告有两个表，它们相同但别名不同。在 c# 中，我为其中一个创建了一个数据表，其中包含必须显示的记录，另一个数据表包含另一个表信息。Crystal 仅从第一个数据表中获取信息以填充两个表，因此显示的数据是错误的。我可以用两个不同的数据表填充两个相同但别名不同的表吗？

这是我昨天写的同样的问题，但更简单。

谢谢大家，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-11T10:16:22.197

Crystal Reports 确实支持具有别名的重复表。问题可能出在链接上。如果您尝试在报表上显示这两个表，则没有 JOIN 或 WHERE 语句。

该表需要与自身建立链接。这是关于将表连接到自身的[教程的链接](http://www.wellho.net/forum/The-MySQL-Relational-Database/Joining-a-table-to-itself.html)

```
select * from tbl1 as child join tbl1 as parent on parent.primarykey = child.foreignkey; 
```

# java - 为什么我的 servlet 堆栈跟踪为我的类显示“未知来源”？

> ID：944869
> 
> 赞同：8
> 
> 时间：2009-06-03T13:49:50.610
> 
> 标签：java, exception, servlets, stack-trace, nullpointerexception

我目前正在使用 Apache Tomcat 5.5.16 来提供基于 Lucene 的搜索 API。

最近，我的 servlet 类中出现了一些 NullPointerExceptions。该类称为`com.my_company.search.servlet.SearchServlet`.

对于某些类型的输入，我通常可以创建一个 NullPointerException，但我无法确定它到底在哪里。

StackTrace 表明该错误发生在此处：

`com.my_company.search.servlet.SearchServlet.doGet(Unknown Source)`

这个类的源文件和 .class 文件都在：

`$TOMCAT_HOME/webapps/my_servlet/WEB-INF/classes/com/my_company/search/servlet/`

我的问题是，如何让 Tomcat 为我提供更具描述性的错误位置？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-06-03T13:51:44.987

除非有问题的类是用调试信息编译的，否则 Tomcat 无法为您提供更详细的信息。如果没有此调试信息，JVM 无法确定错误发生在哪一行代码上。

**编辑：**您可以通过在命令行上运行时指定`-g` [选项](http://java.sun.com/j2se/1.4.2/docs/tooldocs/windows/javac.html#options)来要求编译器包含此信息。`javac`您还可以使用[Javac Ant 任务](http://ant.apache.org/manual/Tasks/javac.html)`debug`的参数指定此选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-03T14:01:07.183

您必须将调试信息添加到您的类中。使用以下选项编译它们`-g`：

```
javac -g YourServlet.java 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T13:54:20.130

当 JIT 编译器优化您的类时，可能会出现位置未知来源。此时，源信息丢失。要获取原始位置，请重新启动服务器并重试测试。大多数情况下，您会在源中获得位置

# perl - 如何将字符附加到文件中的一行？

> ID：944870
> 
> 赞同：1
> 
> 时间：2009-06-03T13:49:51.420
> 
> 标签：perl

我有一个从票务系统中提取的 CSV 文件（我没有直接的数据库访问权限），并且需要在 Excel 中创建报告之前从另一个数据库中附加几列。

我正在使用 Perl 从另一个数据库中提取数据，并希望在处理文件时将附加列附加到每行的末尾。

有没有办法做到这一点而不必基本上创建一个新文件？基本结构是：

```
foreach $line (@lines) {
    my ($vars here....) = split (',',$line);
    ## get additional fields
    ## append new column data to line
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-03T14:06:30.090

您可以查看[DBD::CSV](http://search.cpan.org/~jzucker/DBD-CSV-0.22/lib/DBD/CSV.pm)将文件视为数据库（它还会为您处理转义特殊字符）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T14:32:37.823

您可以使用 Tie::File（自 Perl 5.8 起在 Perl 核心中）来修改文件：

```
#!/usr/bin/perl

use strict;
use warnings;

use Tie::File;

my $file = shift;

tie my @lines, "Tie::File", $file
    or die "could not open $file: $!\n";

for my $line (@lines) {
    $line .= join ",", '', get_data();
}

sub get_data {
    my $data = <DATA>;
    chomp $data;
    return split /-/, $data
}

__DATA__
1-2-3-4
5-6-7-8 
```

您还可以通过设置 $^I 来使用带有 @ARGV/<> 技巧的就地编辑：

```
#!/usr/bin/perl

use strict;
use warnings;

$^I = ".bak";

while (my $line = <>) {
    chomp $line;
    $line .= join ",", '', get_data();
    print "$line\n";
}

sub get_data {
    my $data = <DATA>;
    chomp $data;
    return split /-/, $data
}

__DATA__
1-2-3-4
5-6-7-8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T16:33:14.720

尽管有任何不错的界面，但您最终还是必须逐行读取文件。如果某些引用的字段可以嵌入换行符，您甚至可能需要做更多的事情。使用了解 CSV 的知识来避免其中一些问题。[Text::CSV_XS](http://search.cpan.org/dist/Text-CSV_XS)应该可以为您省去大部分奇怪情况的麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T13:53:13.643

考虑使用就地`-i`编辑文件的选项。`<>`

# javascript - ExtJS 抓取 JSON 结果

> ID：944871
> 
> 赞同：17
> 
> 时间：2009-06-03T13:49:55.600
> 
> 标签：javascript, php, json, extjs

我正在从 PHP 女巫生成 JSON 响应，如下所示：

```
{ done:'1', options: [{ message:'Example message'},{message:'This is the 2nd example message'}]} 
```

我想使用 ExtJS 获取这些结果。这是我到目前为止所拥有的：

```
Ext.Ajax.request({
    loadMask: true,
    url: 'myfile.php',
    params: {id: "1"}
}); 
```

我接下来要写什么才能得到这样的 json 结果：

```
var mymessages = jsonData.options; 
```

并且 mymessages 应该包含示例消息，这是第二个示例消息。

谢谢你。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-06-03T13:56:47.660

直截了当的方法：

```
Ext.Ajax.request({
  loadMask: true,
  url: 'myfile.php',
  params: {id: "1"},
  success: function(resp) {
    // resp is the XmlHttpRequest object
    var options = Ext.decode(resp.responseText).options;

    Ext.each(options, function(op) {
      alert(op.message);
    }
  }
}); 
```

或者您可以使用 Store 以更 Ext-ish 的方式进行操作：

```
var messages = new Ext.data.JsonStore({
  url: 'myfile.php',
  root: 'options',
  fields: [
    {name: 'text', mapping: 'message'}
  ],
  listeners: {
    load: messagesLoaded
  }
});
messages.load({params: {id: "1"}});

// and when loaded, you can take advantage of
// all the possibilities provided by Store
function messagesLoaded(messages) {
  messages.each(function(msg){
    alert(msg.get("text"));
  });
} 
```

解决最后一条评论的另一个示例：

```
var messages = [{title: "1"},{title: "2"},{title: "3"}];

var titles = msg;
Ext.each(messages, function(msg){
  titles.push(msg.title);
});
alert(titles.join(", ")); 
```

虽然我更喜欢使用 Array.map（Ext 不提供）：

```
var text = messages.map(function(msg){
  return msg.title;
}).join(", ");
alert(text); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-03T13:56:53.557

使用*成功*和*失败*属性：

```
Ext.Ajax.request({
    loadMask: true,
    url: 'myfile.php',
    params: {id: "1"},
    success: function(response, callOptions) {
       // Use the response
    },
    failure: function(response, callOptions) {
       // Use the response
    }
}); 
```

有关详细信息，请参阅[Ext API文档](http://extjs.com/deploy/dev/docs/?class=Ext.Ajax)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T11:02:57.090

检查这个适用于 Ext JS 4 的示例小提琴。[http://jsfiddle.net/mrigess/e3StR/](http://jsfiddle.net/mrigess/e3StR/)

分机 4 以后使用`Ext.JSON.encode()`和`Ext.JSON.decode()`；而 Ext 3 使用`Ext.util.JSON.encode()`和`Ext.util.JSON.decode()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T14:15:54.923

如果您确定您的输入是正确的（谨防 xss 攻击），您可以使用 eval() 函数从您的 json 结果中创建您的 javascript 对象，然后可以通过您的命令访问该对象：

```
var mymessages = jsonData.options; 
```

但是话又说回来，Ext 为您做得很好，正如 Rene 通过 Ext.decode 函数指出的那样

# linux - 如何解决 Oracle RemoteOperationException：从命令读取错误时出错

> ID：944879
> 
> 赞同：0
> 
> 时间：2009-06-03T13:51:56.657
> 
> 标签：linux, oracle

最近，每当我被要求在 Oracle DataGuard 的企业管理器 (EM) 工具中提供主机用户名和密码时，我都会收到以下错误：RemoteOperationException: Error reading error from command。任何需要执行并需要主机凭据的配置或管理都会引发此错误。这是我很长时间以来看到的最无益的错误之一。我检查了所有我能想到的日志文件，但找不到任何错误日志或问题的迹象。我验证了我可以使用我在 EM 中尝试的凭据登录服务器，我使用内置测试工具验证了通过 EM 的连接配置，并且我验证了 EM 中所有保存的密码都是正确的。这适用于初始安装。在过去几周的某个时候，它停止工作，我不知道为什么。主机运行 Linux Red Hat 4 Enterprise 和 Oracle 10g。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-10T18:10:32.787

重新安装 OEM 代理解决了这个问题。不知何故，所有的特工似乎都腐败了。

# sharepoint - SharePoint 的职业生涯？

> ID：944894
> 
> 赞同：0
> 
> 时间：2009-06-03T13:54:26.823
> 
> 标签：sharepoint

我想学习 SharePoint。在这个经济衰退时期，SharePoint 专业人员有什么工作吗？我有 .NET 知识。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-03T16:03:00.123

说有对 SharePoint 的需求是轻描淡写的。因为在 2007 年之前，SP 开发人员很少而且相差甚远，所以到目前为止，很少有人有足够的 SP 经验来处理真正复杂的项目。

然而，SharePoint 并没有消失，随着明年 MSSPS 2010 的发布，SharePoint 还会进一步发展。如果您是一名优秀的 ASP.Net 开发人员，正在寻找一个利基市场，那么 SharePoint 将是一个不错的选择。

我对新 SharePoint 开发人员的 #1 提示：下载 WSPBuilder Visual Studio 插件，并在开始任何自定义 SharePoint 工作之前安装它。通过了解附加组件如何构建您的项目并将 SharePoint 大写-F 功能添加到 SP 解决方案包，这将使这些概念更容易在您的脑海中单击。

我的 #2 提示：[在 Microsoft Windows SharePoint Services 3.0 内部](https://rads.stackoverflow.com/amzn/click/com/0735623201)- 最好的书，放下手，真正解释 SharePoint 的工作原理，从上到下。阅读此封面，您将了解至少 30% 以上的 SharePoint 人员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T18:21:03.990

我想说两个网站值得检查：

1.  MS SharePoint 开发人员：http: [//mssharepointdeveloper.com](http://mssharepointdeveloper.com)
2.  [我的斜坡： http](http://myrampup.com/) ://myrampup.com/

这些站点包含有关 SharePoint 开发的大量信息，包括实验室和带有 SharePoint 和 Visual Studio 的虚拟 PC。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-03T14:12:17.927

SharePoint 是 Microsoft 增长最快的产品。它的管理和开发很复杂，而且 SharePoint 专业知识获得了相当不错的溢价（至少在我熟悉的三个市场中：达拉斯、西雅图和中西部中部）。我每周都会接到几个招聘人员的电话，他们希望我了解 SharePoint 知识。

如果您想成为 SharePoint 开发人员，则需要熟悉 .NET 以及 C# 或 VB.NET，因此看起来您已经掌握了这些知识。

您应该做的第一件事是花一些时间阅读此处的 SharePoint 问题，以了解 SharePoint 开发人员面临哪些类型的问题。SO上有一些*优秀*的SharePoint人员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-04T04:10:38.563

仍然有大量的 SharePoint 工作。但是，大多数雇用 SharePoint 开发人员的公司都在寻找已经是专家并且能够帮助现有 .NET 团队学习 SharePoint 的人。

有足够的需求，您不需要大量的经验即可被视为专家。但是，您至少需要在真正的 SharePoint 项目上花一些时间才能获得专家的工作。您最好的选择可能是为开始使用 SharePoint 的公司或同时拥有 .NET 和 SharePoint 项目的咨询公司担任 .NET 开发人员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T14:08:16.873

您可以访问[http://www.indeed.com/](http://www.indeed.com/)等工作网站，了解您所在地区对不同产品/技术的需求。

我工作过的一些地方非常广泛地定制了 SharePoint。

就我个人而言，我看到相当多的 SharePoint 在本地使用。我最近接到了一些关于 SharePoint 工作的猎头电话，所以这里似乎确实有需求。

# xml - 如何在 Actionscript 中删除 XML 实体引用

> ID：944895
> 
> 赞同：0
> 
> 时间：2009-06-03T13:54:34.407
> 
> 标签：xml, actionscript-3, actionscript-2

`&apos;`我需要从通过 XML 文档获得的字符串中删除一堆。我正在使用 Actionscript 2，所以 Regex 不适合我。即使我正在寻找 Actionscript 2 解决方案，如果您有其他可能需要它的人的答案，仍然回复 Actionscript 3 答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T13:56:57.130

为什么不进行简单的[字符串搜索和替换](http://www.webtoolkit.info/actionscript-string-replace.html)？

# delphi - 防止 Delphi COM 组件显示 MessageBox()

> ID：944896
> 
> 赞同：4
> 
> 时间：2009-06-03T13:54:36.573
> 
> 标签：delphi, com, isapi

我们有一个从 ISAPI 应用程序执行的 Delphi 2007 COM 组件。COM 组件正在挂起应用程序，因为它正在尝试显示 MessageBox()。对 MessageBox() 的调用必须发生在 Delphi RTL 中，因为它不在我们的用户代码中。

应用程序挂起，当然，因为没有人在服务器上登录来清除 MessageBox()。

我们如何配置我们的 Delphi 项目，以便 Delphi RTL 不会尝试在异常时显示 MessageBox()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T15:20:22.750

编写您自己的异常处理程序并将其附加到 Application.OnException 事件。如果存在 OnException 事件处理程序，应用程序将不会使用其默认的 MessageBox 例程。签名定义为：

```
TExceptionEvent = procedure (Sender: TObject; E: Exception) of object; 
```

如果这是服务器，您可能希望将异常信息写入日志，并可能向用户返回一些错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T15:19:42.940

消息框说什么？我假设这是一个例外。为什么不在 COM 组件中的代码周围放置一个异常处理程序，并以不同的方式记录异常？（例如，使用事件日志）。和/或首先解决导致异常的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T14:26:35.013

我不知道 Delphi 有什么直接的方法，但你可以做的是在 AutoIT/AutoHotKey 中编写一个小脚本，并让该脚本在系统托盘中运行，这样它就会自动关闭 MessageBox。

相信我，这很简单。

> [http://www.autoitscript.com/autoit3/index.shtml](http://www.autoitscript.com/autoit3/index.shtml)
> 
> [http://www.autohotkey.com/](http://www.autohotkey.com/)

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-04T10:18:12.487

是否可以将应用程序编译为控制台应用程序？我不确定你是否可以这样做并且仍然让它包含 COM 对象，这将阻止显示消息对话框我敢肯定。

只是一个想法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-06-04T08:18:00.170

我已经创建了一个单元来挂钩 MessageBox/MessageDlg 调用（通过绕行），所以我可以在 Windows 服务中抑制这些调用（以避免由于其他人的一些愚蠢代码在消息框调用中“挂起”我的服务 dll它）。如果你需要，我可以搜索这个单元并发送给你。

# c# - 在 C# 的父窗体的中心显示一个子窗体

> ID：944897
> 
> 赞同：83
> 
> 时间：2009-06-03T13:54:49.507
> 
> 标签：c#, winforms

我创建一个新表单并从父表单调用如下：

```
loginForm = new SubLogin();   
loginForm.Show(); 
```

我需要在父窗体的中心显示子窗体。因此，在子表单加载中，我执行以下操作：`

```
Point p = new Point(this.ParentForm.Width / 2 - this.Width / 2, this.ParentForm.Height / 2 - this.Height / 2);
this.Location = p; 
```

但这会引发错误，因为父表单为空。我也尝试设置 Parent 属性，但没有帮助。对此有任何意见吗？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2009-06-03T13:57:49.220

尝试：

```
loginForm.StartPosition = FormStartPosition.CenterParent;
loginForm.ShowDialog(this); 
```

当然，孩子现在将成为父窗口的阻塞形式（对话框），如果不需要，那么只需替换`ShowDialog`为`Show`..

```
loginForm.Show(this); 
```

不过，您仍然需要指定 StartPosition。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-03-02T23:31:26.933

parent 的设置对我不起作用，除非我使用`form.ShowDialog();`.

使用时`form.Show();` 或`form.Show(this);`在我使用之前没有任何效果，`this.CenterToParent();`. 我只是把它放在表单的*Load*方法中。一切都很好。

父中心的起始位置已设置，并且在使用阻止显示对话框时有效。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2011-08-01T15:51:06.363

“父母”和“所有者”之间似乎存在混淆。如果您以 MDI 形式打开一个表单，即嵌入到另一个表单中，那么这个周围的表单就是父表单。值为 FormStartPosition.CenterParent 的表单属性 StartPosition 指的是这个。您可以传递给 Show 方法的参数是 Owner，而不是 Parent！这就是为什么 frm.StartPosition = FormStartPosition.CenterParent 不能像您预期的那样工作。

如果其 StartPosition 设置为 Manual，则放置在表单中的以下代码将相对于其所有者将其居中，并带有一些偏移量。小偏移以平铺方式打开表格。如果所有者和拥有的表单具有相同的大小，或者如果您打开多个拥有的表单，这是一个优势。

```
protected override void OnShown(EventArgs e)
{
    base.OnShown(e);
    if (Owner != null && StartPosition == FormStartPosition.Manual) {
        int offset = Owner.OwnedForms.Length * 38;  // approx. 10mm
        Point p = new Point(Owner.Left + Owner.Width / 2 - Width / 2 + offset, Owner.Top + Owner.Height / 2 - Height / 2 + offset);
        this.Location = p;
    }
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-06-03T14:01:37.107

假设您的代码在您的父表单中运行，那么您可能正在寻找这样的东西：

```
loginForm = new SubLogin();
loginForm.StartPosition = FormStartPosition.CenterParent
loginForm.Show(this); 
```

作为记录，还有一个`Form.CenterToParent()`功能，如果您出于某种原因也需要在创建后将其居中。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-02-15T05:12:26.053

在表单内启动`MDIForm`表单时，您需要使用`.CenterScreen`而不是`.CenterParent`.

```
FrmLogin f = new FrmLogin();
f.MdiParent = this;
f.StartPosition = FormStartPosition.CenterScreen;
f.Show(); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-11-17T07:47:22.147

```
childform = new Child();
childform.Show(this); 
```

在事件子窗体加载

```
this.CenterToParent(); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2010-10-04T13:26:56.630

你需要这个：

将 Me 替换为 this.parent，但您需要在显示该表单之前设置父级。

```
 Private Sub ÜberToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ÜberToolStripMenuItem.Click

        'About.StartPosition = FormStartPosition.Manual ' !!!!!
        About.Location = New Point(Me.Location.X + Me.Width / 2 - About.Width / 2, Me.Location.Y + Me.Height / 2 - About.Height / 2)
        About.Show()
    End Sub 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-03-03T12:13:05.383

当您想使用非阻塞窗口（show() 而不是 showDialog()）时，这不起作用：

```
//not work with .Show(this) but only with .ShowDialog(this)
loginForm.StartPosition = FormStartPosition.CenterParent;
loginForm.Show(this); 
```

在这种情况下，您可以使用此代码在显示表单之前将子表单居中：

```
//this = the parent
frmDownloadPercent frm = new frmDownloadPercent();
frm.Show(this); //this = the parent form
//here the tips
frm.Top = this.Top + ((this.Height / 2) - (frm.Height / 2));
frm.Left = this.Left + ((this.Width / 2) - (frm.Width / 2)); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-10-13T20:41:53.507

它适用于所有情况，将 Form1 交换为您的主窗体。

```
Popup popup = new Popup();
popup.StartPosition = System.Windows.Forms.FormStartPosition.Manual;
popup.Location = new System.Drawing.Point((Form1.ActiveForm.Location.X + Form1.ActiveForm.Width / 2) - (popup.Width / 2),(Form1.ActiveForm.Location.Y + Form1.ActiveForm.Height / 2) - (popup.Height / 2));
popup.Show(Form1.ActiveForm); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-10-21T14:22:01.190

如果要计算自己的位置，则首先设置`StartPosition`为`FormStartPosition.Manual`：

```
Form Child = new Form();
Child.StartPosition = FormStartPosition.Manual;
Child.Location = new Point(Location.X + (Width - Child.Width) / 2, Location.Y + (Height - Child.Height) / 2);
Child.Show(this); 
```

这是主/父表单，就像 Location.X 一样。

的默认值`StartPosition`是`FormStartPosition.CenterParent`，因此它会在显示后更改孩子的位置。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-06-03T14:01:15.343

在 SubLogin 表单上，我将公开一个 SetLocation 方法，以便您可以从父表单设置它：

```
public class SubLogin : Form
{
   public void SetLocation(Point p)
   {
      this.Location = p;
   }
} 
```

然后，从您的主要形式：

```
loginForm = new SubLogin();   
Point p = //do math to get point
loginForm.SetLocation(p);
loginForm.Show(); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-07T20:44:08.730

制作一个 Windows 窗体，然后为其添加选项：CenterParent 然后使用此代码：

```
yourChildFormName x = new yourChildFormName();
x.ShowDialog(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-11-15T06:55:50.813

如果从主窗口（父窗体）的新线程打开任何窗体（子窗体），则无法将子窗体保持在主窗体的中心，因此我们需要手动修复子窗体的位置表示 X 和 Y 坐标。

在子窗口的属性中将“StartPosition”更改为“Manual”

# 主窗口中的代码

```
private void SomeFunction()
{
    Thread m_Thread = new Thread(LoadingUIForm);
    m_Thread.Start();
    OtherParallelFunction();
    m_Thread.Abort();
}

private void LoadingUIForm()
{
    m_LoadingWindow = new LoadingForm(this);
    m_LoadingWindow.ShowDialog();
} 
```

# 子窗口中的代码，用于通过父当前位置和大小来定义自己的位置

```
public LoadingForm(Control m_Parent)
{
   InitializeComponent();
   this.Location = new Point( m_Parent.Location.X+(m_Parent.Size.Width/2)-(this.Size.Width/2),
                              m_Parent.Location.Y+(m_Parent.Size.Height/2)-(this.Size.Height/2)
                            );
} 
```

这里计算父级中心的坐标，并且通过（this.height/2）和（this.width/2）计算其自己的中心，子窗口精确地保持在父级的中心，这个函数可以是还为父母搬迁事件采取了进一步措施。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-07-10T04:30:54.467

作为子表单，我认为它不会在父表单的中间开始，直到您将其显示为对话框。 `.......... Form2.ShowDialog();`

我正要制作关于表格。这是我正在寻找的完美。并且在您关闭 About_form 之前，一旦您单击 About_Form （在我的情况下），您就无法触摸/单击父母表单的任何内容。因为它显示为对话框

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-06-05T17:05:00.077

您可以在子窗体的构造函数中设置 StartPosition，以便窗体的所有新实例都以它的父窗体为中心：

```
public MyForm()
{
    InitializeComponent();

    this.StartPosition = FormStartPosition.CenterParent;
} 
```

当然，您也可以在子窗体的 Designer 属性中设置 StartPosition 属性。当您想将子窗体显示为模式对话框时，只需在 ShowDialog 方法的参数中设置窗口所有者即可：

```
private void buttonShowMyForm_Click(object sender, EventArgs e)
{
    MyForm form = new MyForm();
    form.ShowDialog(this);
} 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2009-06-03T14:04:32.000

当您尝试访问它时，父级可能尚未设置。

尝试这个：

```
loginForm = new SubLogin();
loginForm.Show(this);
loginForm.CenterToParent() 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-09-15T06:16:47.957

如果您必须从 childForm 将您的 childForm 居中，那么代码将是这样的。此代码在 childForm.cs

```
this.Show(parent as Form);    // I received the parent object as Object type
this.CenterToParent(); 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2019-07-05T17:52:47.347

```
 protected override void OnLoad(EventArgs e) {
        base.OnLoad(e);

        CenterToParent();
    } 
```

* * *

## 回答 #19

> 赞同：-4
> 
> 时间：2012-10-02T17:39:44.793

为什么不使用这个？

```
LoginForm.WindowStartupLocation = Windows.WindowStartupLocation.CenterOwner 
```

(vb.net)

# c# - 异步架构

> ID：944902
> 
> 赞同：1
> 
> 时间：2009-06-03T13:56:23.310
> 
> 标签：c#, architecture, asynchronous

我有一个通过网页 UI 显示的 C# 库。当然还有 UI 层，它通过业务逻辑层进行调用，然后访问数据访问层以检索数据。数据实际上是通过具有异步查询数据能力的 Web 服务检索的。

我开始学习如何异步处理请求以加快页面时间（使用多个线程尽快从 Web 服务中获取多个项目），以及通过线程不一直被捆绑来实现可伸缩性。

鉴于我的代码的三层架构，这是否意味着页面通过业务层异步调用（并因此通过并发请求来加速），而数据层中的 Web 服务反过来也会异步发出请求？处理所有回调的逻辑正在伤害我的大脑。这种方法是否有任何资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T14:13:19.470

如果您可以接受引入一种新语言，那么 F# 非常擅长编写异步代码，这是它的主要优势之一，恕我直言，除了简洁之外。编写异步代码看起来几乎与线性非异步代码一模一样！

相关链接：

*   [超越 F# 的基础 - 异步工作流](http://www.infoq.com/articles/pickering-fsharp-async)
*   [F# 简介](http://channel9.msdn.com/pdc2008/TL11/)（视频）
*   [F# 中的并发](http://www.langnetsymposium.com/2009/talks/21-AmanderLauter-FSharpConcurrency.html)（视频 - 关于通过选择性引入 F# 替换模块来加速现有现实世界 C# 保险处理系统的优秀简短案例研究）

如果您不想引入新语言，这里有一种使用迭代器来简化代码的技术：

*   [使用迭代器在 C# 中进行异步编程](http://tomasp.net/blog/csharp-async.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T14:26:20.970

有一个有点有用的概念叫做`Future<T>`，它代表了未来要完成的异步工作的一个单元。

因此，简单来说，在某些操作（如应用程序启动或页面加载）开始时，您可以定义将来需要哪些值，并让后台线程为您计算它们。

当您的用户需要特定值时，您只需从相应的`Future<T>`. 如果它已经完成，你立即得到它，否则你将不得不阻塞你的主线程，或者以某种方式通知用户该值还没有准备好。

您可以在[此处](https://stackoverflow.com/questions/896936/asyncfuturet-or-what-futuret-obtained-in-a-background-thread-is-it-a-pattern)找到有关该概念的一些讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T14:24:01.490

我猜您有两个区域可以处理来自以下的回调：

*   数据层 -> 业务对象
*   业务对象 -> 表示层

对于第一个，我将使用代码生成来自动为所有方法创建 aysnc 和回调逻辑。如果你有很多非常接近相同的类，那么这工作得很好。

对于第二个领域，我倾向于使用数据绑定来“自动”更新 UI，因为下面的对象正在填充。

# xml - 将配置文件设置为 XML 文件

> ID：944913
> 
> 赞同：2
> 
> 时间：2009-06-03T13:57:02.823
> 
> 标签：xml, configuration

我有一个 XML 文件，其中包含可能会根据读取位置而改变的数据库设置。最好，我会从一些配置文件中读取这些设置。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T14:13:39.203

您可以使用 System.Xml.Serialization.XmlSerializer 类自动将设置拉入自定义类。

使用您的设置创建一个类：

```
public class Settings
{
    private string connectionString;

    public string ConnectionString
    {
        get { return connectionString; }
        set { connectionString = value; }
    }
} 
```

然后使用以下命令获取数据：

```
Settings settings = new Settings();
FileStream filestream = new FileStream("settings.xml", FileMode.Open);
System.Xml.Serialization.XmlSerializer cereals = new System.Xml.Serialization.XmlSerializer(typeof(Settings));
settings = cereals.Deserialize(filestream); 
```

同样，如果要将当前对象分配给设置文件，请执行以下操作：

```
XmlSerializer cereals = new XmlSerializer(typeof(Settings));
System.IO.FileStream writer = new FileStream("settings.xml", FileMode.Create);
cereals.Serialize(writer, settings); 
```

在这种情况下，“settings.xml”文件位于当前目录中，但我通常将其放在用户的应用程序数据文件夹中，因为您始终可以写入该文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T14:03:42.780

您可以使用 app.config 文件，也可以创建自己的 XML 文件来存储它们

[在 Windows 窗体 C# 应用程序中拥有配置文件的最简单方法](https://stackoverflow.com/questions/114527/simplest-way-to-have-a-configuration-file-in-a-windows-forms-c-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-09T22:42:38.427

试试我在这个主题上的以下帖子，与上面 Dave 提出的解决方案非常相似，但内容更丰富。 [http://www.picnet.com.au/blogs/Guido/post/2009/09/10/XML-Settings-Files-No-more-webconfig.aspx](http://www.picnet.com.au/blogs/Guido/post/2009/09/10/XML-Settings-Files-No-more-webconfig.aspx)

# oracle - 如何确定 PL/SQL 语句中的行/值抛出错误？

> ID：944916
> 
> 赞同：7
> 
> 时间：2009-06-03T13:57:40.327
> 
> 标签：oracle, exception, error-handling, plsql

（甲骨文 PL/SQL）

如果我有一个抛出错误的简单 SQL 语句，即：

```
DECLARE
    v_sql_errm varchar2(2048);
BEGIN
    UPDATE my_table SET my_column = do_something(my_column)
        WHERE my_column IS NOT NULL;
EXCEPTION
    when others then
        -- How can I obtain the row/value causing the error (unknown)?
        v_sql_errm := SQLERRM;
        insert into log_error (msg) values ('Error updating value (unknown): '||
             v_sql_errm);
END; 
```

异常块中是否有任何方法可以确定查询遇到错误的行/值？我希望能够记录它，以便我可以进入并修改/更正导致错误的特定数据值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T14:35:44.057

如果您使用的是 10gR2 或更高版本，则可以使用 DML 错误日志记录来完成此操作。

一个例子：

```
SQL> create table my_table (my_column)
  2  as
  3  select level from dual connect by level <= 9
  4  /

Tabel is aangemaakt.

SQL> create function do_something
  2  ( p_my_column in my_table.my_column%type
  3  ) return my_table.my_column%type
  4  is
  5  begin
  6    return 10 + p_my_column;
  7  end;
  8  /

Functie is aangemaakt.

SQL> alter table my_table add check (my_column not in (12,14))
  2  /

Tabel is gewijzigd.

SQL> exec dbms_errlog.create_error_log('my_table')

PL/SQL-procedure is geslaagd. 
```

这将创建一个名为*err$_my_table*的错误记录表。通过在更新语句中添加日志错误子句来填充此表：

```
SQL> begin
  2    update my_table
  3       set my_column = do_something(my_column)
  4     where my_column is not null
  5           log errors reject limit unlimited
  6    ;
  7  end;
  8  /

PL/SQL-procedure is geslaagd.

SQL> select * from err$_my_table
  2  /

                       ORA_ERR_NUMBER$
--------------------------------------
ORA_ERR_MESG$
--------------------------------------------------------------------
ORA_ERR_ROWID$
--------------------------------------------------------------------
OR
--
ORA_ERR_TAG$
--------------------------------------------------------------------
MY_COLUMN
--------------------------------------------------------------------
                                  2290
ORA-02290: check constraint (RWK.SYS_C00110133) violated
AAGY/aAAQAABevcAAB
U

12

                                  2290
ORA-02290: check constraint (RWK.SYS_C00110133) violated
AAGY/aAAQAABevcAAD
U

14

2 rijen zijn geselecteerd. 
```

在 10gR2 之前，您可以使用 SAVE EXCEPTIONS 子句：[http ://rwijk.blogspot.com/2007/11/save-exceptions.html](http://rwijk.blogspot.com/2007/11/save-exceptions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T19:01:01.477

使用 SAVE EXCEPTIONS 子句的解决方案：

```
SQL> create table my_table (my_column)
  2  as
  3  select level from dual connect by level <= 9
  4  /

Table created.

SQL> create function do_something
  2  ( p_my_column in my_table.my_column%type
  3  ) return my_table.my_column%type
  4  is
  5  begin
  6    return 10 + p_my_column;
  7  end;
  8  /

Function created.

SQL> alter table my_table add check (my_column not in (12,14))
  2  /

Table altered.

SQL> declare
  2    e_forall_error exception;
  3    pragma exception_init(e_forall_error,-24381)
  4    ;
  5    type t_my_columns is table of my_table.my_column%type;
  6    a_my_columns t_my_columns := t_my_columns()
  7    ;
  8  begin
  9    select my_column
 10           bulk collect into a_my_columns
 11      from my_table
 12    ;
 13    forall i in 1..a_my_columns.count save exceptions
 14      update my_table
 15         set my_column = do_something(a_my_columns(i))
 16       where my_column = a_my_columns(i)
 17    ;
 18  exception
 19  when e_forall_error then
 20    for i in 1..sql%bulk_exceptions.count
 21    loop
 22      dbms_output.put_line(a_my_columns(sql%bulk_exceptions(i).error_index));
 23    end loop;
 24  end;
 25  /
2
4

PL/SQL procedure successfully completed. 
```

对于非常大的数据集，您可能不想炸毁您的 PGA 内存，因此请务必在这种情况下使用 LIMIT 子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T14:17:35.450

尝试输出您的错误，看看它是否为您提供了您正在寻找的信息。例如：

```
EXCEPTION
    WHEN OTHERS
    THEN
      DBMS_OUTPUT.PUT_LINE(SQLERRM);
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T14:28:11.997

有关执行如何到达相关行的更多详细信息，您可以尝试显示这些函数返回的输出：

*   `DBMS_UTILITY.format_error_stack`：

    > 格式化当前错误堆栈。这可用于异常处理程序以查看完整的错误堆栈。

*   `DBMS_UTILITY.format_error_backtrace`：

    > 格式化从当前错误点到捕获错误的异常处理程序的回溯。如果当前未处理任何错误，则返回 NULL 字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T14:32:36.280

试试这个（未测试）：

```
 DECLARE
      cursor c1 is
        select key_column, my_column
        from my_table
        WHERE my_column IS NOT NULL
        ORDER BY key_column;

      my_table_rec my_table%ROWTYPE;

    BEGIN

      FOR my_table_rec in c1
      LOOP
        UPDATE my_table SET my_column = do_something(my_column)
            WHERE key_column = my_table_rec.key_column;
      END LOOP;

    EXCEPTION
        when others then
        insert into log_error (msg) values ('Error updating key_column: ' || my_table_rec.key_column || ', my_column: ' || my_table_rec.my_column);
    END; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-03T14:34:12.483

PL/SQL 定义了 2 个全局变量来引用错误：

SQLERRM：SQL 错误消息

SQLERRNO：SQL 错误编号

这在 PL/SQL 的 EXCEPTION 块中是可读的。

```
DECLARE 
    x number;
BEGIN
    SELECT 5/0 INTO x FROM DUAL;
EXCEPTION
    WHEN OTHERS THEN:
        dbms_output.put_line('Error Message: '||SQLERRM);
        dbms_output.put_line('Error Number: '||SQLERRNO);
END; 
```

# c# - 更改工具条顺序

> ID：944917
> 
> 赞同：1
> 
> 时间：2009-06-03T13:57:48.190
> 
> 标签：c#, toolstrip

我目前从我的单独模块中添加工具条，例如：

```
this.toolStripContainer.TopToolStripPanel.Controls.Add(module.Instance.Toolbar) 
```

然后按照加载模块的顺序购买它们，这不是很好。有没有办法重新订购它们？

或者我应该考虑为我的模块添加某种索引并按照我想要工具条的顺序加载它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T14:24:38.010

Controls 集合有一个[SetChildIndex(Control child, int newIndex)](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.setchildindex.aspx)方法。看看您是否可以使用该方法根据您的需要订购控件。

**编辑：**刚刚做了一个快速测试。您需要在添加控件之前调用 SuspendLayout()，然后在完成后调用 ResumeLayout()：

```
 this.toolStripContainer1.TopToolStripPanel.SuspendLayout();
        this.toolStripContainer1.TopToolStripPanel.Controls.Add(t1);
        this.toolStripContainer1.TopToolStripPanel.Controls.Add(t2);
        this.toolStripContainer1.TopToolStripPanel.Controls.SetChildIndex(t1, 1);
        this.toolStripContainer1.TopToolStripPanel.ResumeLayout(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T02:34:18.463

我这样解决：

```
StripContainer.TopToolStripPanel.Join(
    Instance.MMethod.Main.ToolStripMenu,
    StripContainer.TopToolStripPanel.Controls[
        StripContainer.TopToolStripPanel.Controls.Count - 1].Right, 
    0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T16:19:47.023

I ended up adding all the toolstrips to a list... sorting the list by ToolStrip.Tag... and then adding them to the control list...

This allows the module writer to set a priority for the toolstrip, kind of like toolstrip merging

# cakephp - 我可以让 CakePHP 根据某些条件返回合适的状态码吗？

> ID：944921
> 
> 赞同：1
> 
> 时间：2009-06-03T13:58:03.353
> 
> 标签：cakephp, http-status-code-404

[这个问题与我的旧帖子在 CakePHP 中处理别名 URL](https://stackoverflow.com/questions/940326/dealing-with-alias-urls-in-cakephp/)略有相关

经过深思熟虑，我正在探索在我的 Cake 应用程序中使用自定义 404 脚本的选项，当 URL 未映射到任何控制器/操作时会到达该选项。该脚本将检查 $this->here 并在重定向数据库中查找它。如果找到匹配项，它将跟踪特定的“促销”代码并重定向。

我在考虑状态码。我可以让我的脚本根据某些条件返回合适的状态码吗？例如：

1.  URL 匹配重定向 - 返回 301
2.  URL 确实没有目的地 - 返回 404。

我可以这样做吗？

编辑：

那这个呢？有人看到它有什么问题吗？我把它放在 app_controller 中。

```
function appError($method, $params) {

    //do clever stuff here

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-03T16:36:42.127

这应该有效。假设您在 LegacyUrls::map() 控制器操作中重定向 404。代码需要存放在 app/app_error.php 中：

```
<?php
class AppError extends ErrorHandler{
    function error404($params) {
        $Dispatcher = new Dispatcher();
        $Dispatcher->dispatch('/legacy_urls/map', array('broken-url' => '/'.$params['url']));
        exit;
    }

    function missingController($params) {
        $Dispatcher = new Dispatcher();
        $Dispatcher->dispatch('/legacy_urls/map', array('broken-url' => '/'.$params['url']));
        exit;
    }
}
?> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-03T17:32:45.663

我一直创建**app\views\errors\missing_action.ctp**和**app\views\errors\missing_controller.ctp**

当 url 没有映射到控制器或其方法时，Cake 将自动显示其中一个视图。

除非对您没有提供的错误代码有一定的*需求，否则这将完美无缺！*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-11-05T21:10:23.177

我想补充felixge的答案。

此版本向浏览器输出 404 错误：

```
class AppError extends ErrorHandler
{
        function _outputMessage($template)
        {
                if ($template === 'error404') {
                        $Dispatcher = new Dispatcher();
                        $Dispatcher->dispatch('legacy_urls/map', array('broken-url' => '/'.$params['url']));
                        return;
                }
                parent::_outputMessage($template);
        }
} 
```

# flash - 使用 flash 作为 e4x 的代理？

> ID：944922
> 
> 赞同：0
> 
> 时间：2009-06-03T13:58:18.080
> 
> 标签：flash, proxy, e4x

我真的很喜欢用 e4x 处理 XML，任何其他我只是感到困惑并且似乎无法让它工作的方法。所以我在考虑是否可以在 Flash 中创建一个代理来使用 e4x 处理 xml（如果我能找到一种方法，我会将它用于 JavaScript 和 PHP）。基本上传递一个 xml 对象和一个 e4x 表达式并返回结果。在我开始考虑如何使这成为可能之前，我想知道这是否是一个糟糕的主意？这是浪费时间还是可以这样做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T14:53:00.887

听起来效率很低。技术上听起来可行（通过 ExternalInterface），但我会为 JS 或 PHP 搜索 E4X 库。

如果您只想学习在所有 3 个平台上与 XML 交互的一种方式，或者看看 XPath。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T00:19:17.973

你可以看看 Aptana Jaxer，它是一个使用无头 Firefox 的服务器端 JavaScript 服务器。Firefox 原生支持 JavaScript 中的 e4x，所以一切都应该正常工作。

# asp.net - 我如何知道是否安装了正确的 .NET 框架？

> ID：944923
> 
> 赞同：3
> 
> 时间：2009-06-03T13:58:22.260
> 
> 标签：asp.net, iis, asp.net-3.5

我是一名开发人员，正在尝试创建一个非常基本的“Hello World”.NET 3.5 Web 应用程序。但是，每当我发布代码时，我都会收到以下错误。

```
Parser Error

Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: Could not load the assembly 'App_Web_default.aspx.cdcab7d2'. Make sure that it is compiled before accessing the page.

Source Error: 

Line 1:  <%@ page language="C#" autoeventwireup="true" inherits="_Default, App_Web_default.aspx.cdcab7d2" %>
Line 2:  
Line 3:  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

这是我正在采取的步骤。

*   打开 VS2008 并使用 C# 和 .NET Framework 3.5 创建一个新网站。
*   更新 Default.aspx 以说“Hello World”
*   对 web.config 进行以下更改 ** 添加`<customErrors mode="Off"/>` ** 注释掉`<authentication mode="Windows" />`
*   发布站点，选中“允许此预编译站点可更新”和“使用固定命名和单页程序集”复选框

我想知道这是我做错了什么还是我们的网络管理员设置不正确。

它会/可能与 /bin 目录的位置有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T14:26:57.210

如果您没有部署服务器的访问权限，了解您的应用程序运行的框架版本的最佳方法是查看常见 ASP.NET 错误页面的底部。你可以找到这样的框架版本：

> 版本信息：Microsoft .NET Framework 版本：2.0.50727.3053；ASP.NET 版本：2.0.50727.3053

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T14:08:53.423

这是来自 MSDN 的帖子：

[http://msdn.microsoft.com/en-us/kb/kb00318785.aspx](http://msdn.microsoft.com/en-us/kb/kb00318785.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T14:02:28.990

您是否在 IIS 中使用了正确的 .NET 版本？

组合框中的版本必须正确：（仅显示 .NET 1.1 和 2.0 的屏幕截图）

[替代文字 http://helpdesk.nucleus.be/content/installatie-van-dot-net-3-5/iis_dot_net_3_5.jpg](http://helpdesk.nucleus.be/content/installatie-van-dot-net-3-5/iis_dot_net_3_5.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-04T13:24:45.810

问题实际上是我们的网络管理员将站点设置在比我想象的更高的目录中。因此，当我发布站点时，bin 文件夹不在站点的根目录下。这就是找不到文件的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T14:22:22.867

我会首先在没有预编译的情况下发布网站。如果仍然无法正常工作，请与您的网络管理员一起检查以下内容：

您可以通过查看查看安装了哪些版本的 .net：

```
C:\Windows\Microsoft.NET\Framework 
```

您应该为安装的每个版本的框架都有一个文件夹，例如：

```
v1.0.3705
v1.1.4322
v2.0.50727
v3.0
v3.5 
```

如果 IIS 是在 .net 2.0 之后安装的，您可能需要运行 aspnet_regiis 来安装或修复 .net IIS 安装：

```
C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis -i 
```

请注意，在 IIS 中，您只会在框架下拉列表中看到 v1.1.4322 和 v2.0.50727（.net v3 和 v3.5 使用 v2.0 运行时）。您的站点需要选择 v2.0.50727。

您还需要确保运行您的 Web 应用程序的帐户（通常是服务器上的网络服务）对包含您的 Web 应用程序文件的文件夹具有正确的权限（读取应该足以进行测试）。

# zend-framework - Zend Framework中如何在控制器外调用Controller的动作？

> ID：944924
> 
> 赞同：2
> 
> 时间：2009-06-03T13:58:32.260
> 
> 标签：zend-framework

我在 Zend 框架中使用 Xajax。我需要在我创建的 Xajax 类的功能中调用特定控制器的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T14:08:01.883

您能否将需要调用的操作代码放入模型中，然后在操作中以及其他任何地方调用它：

```
$model = new Model;
$model->methodToCall(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2011-02-17T21:47:09.900

使用 jQuery。它使 AJAX 变得简单。

```
$.ajax({
  url: '/my-controller/my-action',
  success: function(data) {
    alert('Successful response');
  }
}); 
```

在 Zend Framework 中，创建您想要使用 AJAX 调用的控制器操作并发送您想要使用的响应正文（例如 XML、JSON 或 HTML）。

# c++ - c++ 音频转换 ( mp3 -> ogg ) 问题

> ID：944925
> 
> 赞同：4
> 
> 时间：2009-06-03T13:58:42.290
> 
> 标签：c++, audio

我想知道是否有人知道如何将 mp3 音频文件转换为 ogg 音频文件。我知道有些程序可以在线购买，但我宁愿拥有自己的小应用程序，让我可以转换任意数量的文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T14:13:17.893

这很简单。我不会使用 Windows Media Format SDK。仅仅因为它对这项工作来说太过分了。

你需要一个 MP3 解码器和一个 OGG 编码器，以及一些围绕它的胶水代码（打开文件、设置编解码器、管道周围的原始音频数据等。）

对于 MP3 解码器，我建议您查看 liblame 库或使用此解码库[http://www.codeproject.com/KB/audio-video/madlldlib.aspx](http://www.codeproject.com/KB/audio-video/madlldlib.aspx)作为起点。

对于OGG，选择并不多。你需要 libogg 和 libvorbis。就这么简单。库附带的示例代码向您展示了如何进行编码。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-10-22T13:52:15.610

这是个坏主意。引用 Vorbis 常见问题解答

> 您可以将任何音频格式转换为 Ogg Vorbis。但是，从一种有损格式（如 MP3）转换为另一种有损格式（如 Vorbis）通常不是一个好主意。MP3 和 Vorbis 编码器都通过丢弃您可能听不到的部分音频波形来实现高压缩比。但是，MP3 和 Vorbis 编解码器非常不同，因此它们都会丢弃音频的不同部分，尽管肯定有一些重叠。将 MP3 转换为 Vorbis 涉及将 MP3 文件解码回未压缩的格式，如 WAV，并使用 Ogg Vorbis 编码器对其进行重新压缩。解码的 MP3 将丢失 MP3 编码器选择丢弃的原始音频部分。然后，Ogg Vorbis 编码器在压缩数据时会丢弃其他音频组件。最好，结果将是一个听起来与原始 MP3 相同的 Ogg 文件，但很可能生成的文件听起来比原始 MP3 更差。在任何情况下，您都不会得到比原始 MP3 更好听的文件。
> 
> 由于许多音乐播放器可以同时播放 MP3 和 Ogg 文件，因此您没有理由必须将所有文件切换为一种格式或另一种格式。如果您喜欢 Ogg Vorbis，那么我们鼓励您在从原始无损音频源（如 CD）进行编码时使用它。从原件编码时，您会发现您可以制作比 MP3 更小或质量更好（或两者兼有）的 Ogg 文件。
> 
> （如果您绝对必须从 MP3 转换为 Ogg， [Freshmeat](http://freshmeat.net/search/?q=convert%20ogg%20mp3)上有几个转换脚本可用。）

[http://www.vorbis.com/faq/#transcode](http://www.vorbis.com/faq/#transcode)

而且，为了准确起见，来自同一个常见问题解答：

> **Ogg** Ogg 是 Xiph.org 的音频、视频和元数据容器格式的名称。
> 
> **Vorbis** Vorbis 是一种特定音频压缩方案的名称，旨在包含在 Ogg 中。请注意，其他格式也可以嵌入到 Ogg 中，例如 FLAC 和 Speex。

我想在 Ogg 中嵌入 MP3 理论上是可能的，但我不确定为什么有人会想要。FLAC 是一种无损音频编解码器。Speex 是一种非常有损的音频编解码器，针对语音编码进行了优化。Vorbis 是一种通用的有损音频编解码器。因此，“Ogg 音频”有点用词不当。Ogg Vorbis 是我想你的意思的正确术语。

综上所述，如果您仍想从 MP3 转换为 Ogg Vorbis，您可以 (a) 尝试上面的 Freshmeat 链接，(b) 查看其他答案，或 (c) 查看 FFmpeg。FFmpeg 是一个用于转换大量视频和音频编解码器和格式的通用库。它可以做很多聪明的事情。我听说它的默认 Vorbis 编码器质量很差，但它可以配置为使用 libvorbis 而不是其内置的 Vorbis 编码器。（最后一句话现在可能已经过时了。我不知道。）

请注意，FFmpeg 将使用 LAME 和 libvorbis，就像您已经使用的一样。它不会为你做任何新的事情。它只是为您提供了进行各种其他转换的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-03T14:11:15.947

您将需要解码 mp3 然后编码成 ogg。

一种可能性是使用 liblame 进行 mp3 解码和使用 libogg/libvorbis 编码成 ogg。或者只使用这些的命令行版本。

但我不会说从一种有损格式转换为另一种格式是个好主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T14:20:07.567

Foobar2000 ( [http://www.foobar2000.org/](http://www.foobar2000.org/) ) 是免费的，可以很容易地在文件格式之间进行转换。只需点击几下即可从 MP3 转换为 OGG。

请记住，从有损格式转换为有损格式会比从无损格式（FLAC、CD 音频、Apple 无损编解码器）转换为有损格式（MP3、OGG、M4A）更会降低音频质量。如果您可以访问无损源音频，请使用它来转换它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T14:04:25.417

您当然可以使用[Windows Media Format SDK](http://msdn.microsoft.com/en-us/library/aa387410.aspx)在 C++ 中执行此操作。

我自己只使用过 WMFSDK9。它包含一个名为 UncompAVIToWMV 的示例，可以帮助您入门。从自述文件：

> 它展示了如何合并来自多个 AVI 文件的音频和视频流的样本，并将它们合并到类似的流中，或者根据源流配置文件创建一个新流。它还展示了如何创建任意流、进行多通道编码和添加 SMPTE 时间码。

# php - PHP mysql 和 mysqli 模块连接到同一个数据库可以安全地并排使用吗？

> ID：944930
> 
> 赞同：2
> 
> 时间：2009-06-03T13:59:35.550
> 
> 标签：php, mysql, mysqli

假设有人正在考虑将代码库从使用基本 PHP`mysql_*`函数转换为`mysqli`实现。到同一个数据库的连接是否可以在两个接口中并排使用，或者是否有某种方式可以相互干扰？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-03T14:03:54.700

它们不会共享连接，因此如果您将部分事务代码转换为 mysqli，则事务将无法正常工作（例如，如果您从事务中调用函数，并将函数代码更改为使用 mysqli 而不是调用代码）。

# ruby-on-rails - 如何创建 InstantRails 克隆

> ID：944931
> 
> 赞同：0
> 
> 时间：2009-06-03T13:59:54.520
> 
> 标签：ruby-on-rails, windows

我想为使用 Windows 的 Rails 开发人员创建一个新的 InstantRails 类型的应用程序。当然，这将是免费和开源的。

原因：

*   在 Apache 上使用 nginx，特别是因为 nginx 人现在正在发布原始 Windows 版本。
*   使用最新版本的 Rails。

我以前没有开发过 Windows 应用程序。任何人都可以提供一些我可能会考虑的一般步骤来实现这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T14:14:24.413

在大多数情况下，InstantRails 只是对运行所需的所有软件的封装——Ruby、Rails、MySQL、Apache 等等。你没有理由不能以同样的方式打包东西。看看他们是怎么做的。您需要编写的唯一应用程序是与管理器等效的应用程序，如果您要使用与 GPL 兼容的许可证，您只需修改[InstantRails-Mgr](http://instantrails.rubyforge.org/svn/trunk/InstantRails-win/InstantRails-Mgr/)即可。

# sql - MySQL 5 上的 MONTHNAME() 问题

> ID：944932
> 
> 赞同：1
> 
> 时间：2009-06-03T14:00:47.653
> 
> 标签：sql, mysql

我正在尝试在我们的数据库上运行报告。我们想知道每个行业每月的新注册量。我写了这个查询：

```
SELECT 
  COUNT(j.jobseeker_id) as new_registrations, 
  i.description as industry_name,
  MONTHNAME(j.created_at)
FROM
  tb_jobseeker as j, tb_industry as i
WHERE 
  YEAR(j.created_at) = 2009 
AND 
  i.industry_id = j.industry_id 
GROUP BY 
  i.description, MONTHNAME(j.created_at)
HAVING
  MONTHNAME(j.created_at) =  MONTHNAME(NOW()); 
```

当我运行这个查询时，我得到一个空的结果集。但是，如果我运行以下命令：

```
SELECT 
  COUNT(j.seeker_id) as new_registrations, 
  i.description as industry_name,
  MONTHNAME(j.created_at)
FROM
  tb_seeker as j, tb_industry as i
WHERE 
  YEAR(j.created_at) = 2009 
AND 
  i.industry_id = j.industry_id 
GROUP BY 
  i.description, MONTHNAME(j.created_at)
HAVING
  MONTHNAME(j.created_at) =  'June'; 
```

它返回我正在寻找的结果。

请问有什么帮助吗？我难住了。

更新：查询将在过去一个月的每个月底或下一个月初运行。所以，我们现在是在六月，但它需要运行到五月。希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T14:05:34.960

有什么作用：

```
SELECT MONTHNAME(NOW()) 
```

在你的服务器上返回？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T14:05:50.123

Errr....不是May O_o

如果你这样写，你的查询会更有效率：

```
SELECT 
  COUNT(j.jobseeker_id) as new_registrations, 
  i.description as industry_name,
  MONTHNAME(j.created_at)
FROM
  tb_jobseeker as j, tb_industry as i
WHERE 
  j.created_at BETWEEN '2009-05-01' AND '2009-05-31'
AND 
  i.industry_id = j.industry_id 
GROUP BY 
  i.description, MONTH(j.created_at) 
```

只有在绝对必须的情况下才应该使用 HAVING。

如果您可以按 i.id 而不是 i.description 分组会更好，但这取决于 i.description 是否唯一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T14:14:12.103

这个查询可以写得更好：

```
SELECT 
 COUNT(j.jobseeker_id) as new_registrations, 
 i.description as industry_name,
 MONTHNAME(j.created_at)
FROM
  tb_jobseeker as j, tb_industry as i
WHERE 
  YEAR(j.created_at) = YEAR(NOW())
  AND MONTH(j.created_at) =  MONTH(NOW())
  AND i.industry_id = j.industry_id 
GROUP BY 
  i.industry_id 
```

分组后应用“HAVING”子句；如果您想根据聚合结果进行过滤（例如，获取上个月申请人数超过 100 人的所有行业），则需要应用它。按行业标识（我假设它是主键）分组比按字符串（行业名称和月份名称）分组要快。最后，如果您只选择单个月份，则不需要按月分组。

但是，假设您的表包含当前月份的实际信息，您应该得到正确的数据。

# wpf - WPF DataGrid 在查看模式和编辑模式之间切换模板

> ID：944939
> 
> 赞同：4
> 
> 时间：2009-06-03T14:01:21.117
> 
> 标签：wpf, datagrid, templating

如果窗口左侧有一个 WPF `DataGrid`，右侧有一个区域用于显示所选记录。选定的记录由`Textbox`es 和`ComboBox`es 组成，在单击编辑按钮之前禁用。一切都按预期工作。

但是，在被更改的`ComboBox`时候填充 es似乎有点笨拙。在单击“编辑”按钮之前，可以使用更轻的控件（例如 a ），然后可以将 s 换成es。`SelectedItem``DataGrid``TextBlock``TextBlock``ComboBox`

我确信这可以通过某种模板来完成，但是当我尝试对此进行试验时，与`ComboBox`es 关联的所有事件都报告错误，因为它们不再存在，因为它们已被替换为 TextBlocks “查看模式”。

我可能会解决这个错误，所以一些指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-12T12:05:54.483

这是优秀的[文章](http://wpf.codeplex.com/wikipage?title=Single-Click%20Editing)

对 DataGrid 中的所有单元格应用单击编辑

1.  将以下样式粘贴到 DataGrid 的资源中
2.  将方法粘贴到后面的代码中

仅对 DataGrid 中的某些单元格应用单击编辑

1.  在样式上设置 x:Key（例如 ）
2.  将样式粘贴到 DataGrid 的资源中
3.  将样式应用于您想要单击编辑的列的 CellStyle 属性（例如）
4.  将方法粘贴到后面的代码中

    ```
    //
    // SINGLE CLICK EDITING
    //
    private void DataGridCell_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        DataGridCell cell = sender as DataGridCell;
        if (cell != null && !cell.IsEditing && !cell.IsReadOnly)
        {
            if (!cell.IsFocused)
            {
                cell.Focus();
            }
            DataGrid dataGrid = FindVisualParent<DataGrid>(cell);
            if (dataGrid != null)
            {
                if (dataGrid.SelectionUnit != DataGridSelectionUnit.FullRow)
                {
                    if (!cell.IsSelected)
                        cell.IsSelected = true;
                }
                else
                {
                    DataGridRow row = FindVisualParent<DataGridRow>(cell);
                    if (row != null && !row.IsSelected)
                    {
                        row.IsSelected = true;
                    }
                }
            }
        }
    }    

    static T FindVisualParent<T>(UIElement element) where T : UIElement
    {
        UIElement parent = element;
        while (parent != null)
        {
            T correctlyTyped = parent as T;
            if (correctlyTyped != null)
            {
                return correctlyTyped;
            }

            parent = VisualTreeHelper.GetParent(parent) as UIElement;
        }
        return null;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T23:20:27.380

ContentTemplateSelector 属性应允许您根据当前模式（查看/编辑）选择一个或另一个模板

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T12:40:10.737

标记的答案链接已失效。

这可能会有所帮助： [http ://wpf.codeplex.com/wikipage?title=Single-Click%20Editing](http://wpf.codeplex.com/wikipage?title=Single-Click%20Editing)

# .net - 开源 .Net 身份验证库？

> ID：944944
> 
> 赞同：2
> 
> 时间：2009-06-03T14:02:23.640
> 
> 标签：.net, authentication, open-source

我正在建立一个网站，我想避免使用 asp.net 会员资格。在我决定从头开始编写这段代码之前，我想考虑一些替代方案。是否有任何解决身份验证问题的开源项目？

注意：我需要用户/通过身份验证（不能使用 Open Id）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T15:16:34.287

[Rhino Security](https://github.com/ayende/rhino-security)是一个选项，也有一些关于[如何将其](http://bartreyserhove.blogspot.com/2008/10/integrate-rhino-security-with-aspnet.html)与 ASP.NET MVC 集成的文章。

# wcf - 在 IIS 中托管多个服务合同

> ID：944960
> 
> 赞同：1
> 
> 时间：2009-06-03T14:05:43.447
> 
> 标签：wcf

如何在 IIS 中托管多个服务合同。例如，我的项目中有 3 个不同的服务合同，并在三个不同的类中实施。首先，我使用 SVC 文件在 IIS 中托管服务合同，现在我想在同一服务中托管另一个服务。可能吗？

或者

如何在单个服务（svc 文件）中公开多个服务合同，是否可能？请为此解决方案提供一些输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T14:57:08.880

是的。您的 .svc 文件指的是服务类。这个类可以实现多个服务契约，只需列出它们。缩写示例：

```
[ServiceContract]
public interface ICalculator // ...

[ServiceContract]
public interface IHelloWorld // ...

public MyMultiContractService : ICalculator, IHelloWorld // ...

<%@ServiceHost language=c# Debug="true" Service="MyMultiContractService"%> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-06-03T15:03:06.123

如果您还不知道，这里有一个关于 WCF 的不错的截屏视频系列。

[http://msdn.microsoft.com/en-us/netframework/wcf-screencasts.aspx](http://msdn.microsoft.com/en-us/netframework/wcf-screencasts.aspx)

# c# - 将 32 位 dll 转换为 64 位 dll

> ID：944962
> 
> 赞同：12
> 
> 时间：2009-06-03T14:06:12.463
> 
> 标签：c#, windows-vista

当我尝试在 64 位应用程序中使用它时，我有 32 位编译的 dll，它无法加载，所以我想将 dll 转换为 64 位。当应用程序的平台从“任何 CPU”或“x64”更改为“x86”时，它工作正常。但我想在 64 位下使用它，因为我要从 ASP 页面调用 dll。

这个你能帮我吗。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-03T14:25:57.667

Windows 不能将 32 位 dll 加载到 64 位进程中 - 这是您无法规避的限制。这意味着如果您的 32 位 DLL 对其他 32 位 DLLS 执行任何 P/Invokes（或使用任何 32 位 .Net DLLS），您将完全不走运（您将需要以 32 位运行整个网站）。

您并不完全清楚它何时有效，何时无效。以下是解释：

1.  x86 - 32 位 - 无法加载到 64 位进程中。
2.  x64 - 64bit - 不能在 32 位机器上执行。
3.  AnyCPU - dual - 可以在两种环境中加载和执行。

在 AnyCPU 方面：

1.  64 位机器上的 64 位进程 - DLL 加载为 64 位。
2.  32 位机器上的 32 位进程 - DLL 加载为 32 位。
3.  64 位机器上的 32 位进程 - DLL 加载为 32 位。

在大多数情况下，可以将其保留为 AnyCPU。但是，正如我所说，如果您使用任何本机或 .Net 32​​ 位 DLL，您将需要使您的整个应用程序成为 32 位（您无法或 Microsoft 对此无能为力）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-03T14:53:04.273

x86 标志的设置通常是有原因的，因此更改它可能是个坏主意。但是，如果您绝对确定，这里有一个实用程序 corflags.exe。我在 C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin 下有它。当然，它只会对 .net 程序集有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T14:11:58.457

如果您想在 32 位和 64 位进程中加载​​纯 C# DLL，那么正确的选择是 AnyCPU。这会将其编译为与 CPU 无关的 DLL，并且可以加载到任一类型的进程中。

不过，我不是 100% 确定这就是您要问的。如果不是，你能澄清你的问题吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T21:56:56.107

你可以看看[http://msdn.microsoft.com/en-us/library/ms164699%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms164699%28VS.80%29.aspx)

# session - 您应该让用户在 Web 应用程序上保持登录状态多长时间？

> ID：944963
> 
> 赞同：7
> 
> 时间：2009-06-03T14:06:14.583
> 
> 标签：session

**问题背景：** 我们正在构建一个需要用户登录的在线 Web 应用程序。我们将添加“让我在这台计算机上登录 x 周”的功能。

**问题：**

您应该允许用户保持登录状态多长时间的正常标准是什么？* 2周？* 4 周？* 永远？

为什么？我们是否有理由不让我们的用户永远保持登录状态？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-03T14:12:37.987

不知道有没有标准，真的。这完全取决于您的应用程序和安全问题。您不希望任何人都能够在您仍然登录的情况下坐在您的计算机前并获取您的信用卡号。

但是，例如，Stackoverflow 没有关于登录的最高安全问题，它也不应该。我不必每次访问都在这里登录，这是一个很大的便利。

另一方面，我的工作涉及开发和支持大型在线保险应用程序。在我们收集大量个人信息时，确保其安全更为重要。当然，我们不收集信用卡或社会安全号码，我们当然不希望登录在应用程序中间超时。因此，我们妥协了与会话相关的 12 小时超时。这意味着关闭浏览器具有自动注销的效果，或者如果您让浏览器在站点上停留 12 小时，您也会以这种方式注销。

然后在频谱的另一端，您的在线银行网站通常会在大约 20 分钟后将您注销。这是完全有道理的，因为我想不出比有人偷了我所有的钱更糟糕的情况，因为网上银行让我登录的时间过长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-03T18:27:14.867

答案将取决于应用程序的便利性与安全性之间可接受的平衡。

在线银行等高安全性应用程序可能永远不允许用户保持登录状态。

对于电子邮件等低安全性应用程序，允许用户永久保持登录状态可能是可以接受的。但是，您应该始终将其设置为用户的选项，并且该选项应说明仅当他们使用私人计算机时才应使用它（您永远不想在共享或公共计算机上执行此操作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-03T14:12:09.270

“我们是否有理由不让我们的用户永远保持登录状态？”

如果您这样做，则可以访问您的帐户的非授权用户可以永远保持签名，无论您是否更改密码。

我不知道标准，但我认为两周是正常的时间间隔。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T14:12:53.387

这取决于。

在我离开网站后，我的网上银行不会让我保持登录状态。但是我的电子邮件会在两周内自动让我登录，而 StackOverflow（到目前为止）还没有要求我在使用它的一个月内重新登录。

因此，这取决于您正在构建的应用程序的类型。

# performance - 多核 Intel CPU 中的高速缓存如何共享？

> ID：944966
> 
> 赞同：54
> 
> 时间：2009-06-03T14:06:49.933
> 
> 标签：performance, x86, multiprocessing, intel, cpu-cache

我有几个关于多核 CPU 或多处理器系统中使用的高速缓存存储器的问题。（虽然与编程没有直接关系，但在为多核处理器/多处理器系统编写软件时会产生很多影响，因此在这里问！）

1.  在多处理器系统或多核处理器（英特尔四核、酷睿二双核等）中，每个 cpu 核心/处理器是否有自己的高速缓存（数据和程序高速缓存）？

2.  一个处理器/核心是否可以访问彼此的缓存，因为如果允许它们访问彼此的缓存，那么我相信可能会有更少的缓存未命中，在这种情况下，如果该特定处理器缓存没有一些数据但其他一些数据处理器的缓存可能有它，从而避免从内存读取到第一个处理器的缓存？这个假设是否有效和真实？

3.  允许任何处理器访问其他处理器的高速缓存内存会有什么问题吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-06-05T02:47:45.013

> 在多处理器系统或多核处理器（英特尔四核、酷睿二双核等）中，每个 cpu 核心/处理器是否有自己的高速缓存（数据和程序高速缓存）？

1.  是的。它因确切的芯片型号而异，但最常见的设计是每个 CPU 内核都有自己的私有 L1 数据和指令缓存。

    在旧的和/或低功耗 CPU 上，下一级缓存通常是 L2 统一缓存，通常在所有内核之间共享。或者在 65nm Core2Quad（一个封装中有两个 core2duo 芯片）上，每对内核都有自己的最后一级缓存，无法高效通信。

现代主流 Intel CPU（从第一代 i7 CPU，Nehalem 开始）使用 3 级缓存。

*   32kiB 拆分 L1i/L1d：每核私有（与早期的英特尔相同）
*   256kiB 统一 L2：每核私有。（Skylake-avx512 上 1MiB）。
*   大型统一 L3：在所有内核之间共享

末级缓存是一个大型共享 L3。它在核心之间物理分布，L3 切片与连接核心的环形总线上的每个核心一起使用。通常每个内核都有 1.5 到 2.25MB 的三级缓存，因此多核 Xeon 可能在其所有内核之间共享一个 36MB 的三级缓存。这就是为什么双核芯片有 2 到 4 MB L3，而四核芯片有 6 到 8 MB。

在 Skylake-avx512 以外的 CPU 上，L3*包含*每个核心的私有缓存，因此它的标签可以用作窥探过滤器，以避免向所有核心广播请求。即缓存在私有L1d、L1i 或L2 中的任何内容也必须在L3 中分配。请参阅[英特尔酷睿 i7 处理器中使用了哪种缓存映射技术？](https://stackoverflow.com/questions/49092541/which-cache-mapping-technique-is-used-in-intel-core-i7-processor)

[David Kanter 的 Sandybridge 文章](https://www.realworldtech.com/sandy-bridge/2/)有一个很好的内存层次结构/系统架构图，显示了每核缓存及其与共享 L3 的连接，以及连接到该 L3 的 DDR3/DMI（芯片组）/PCIe。（这仍然适用于 Haswell / Skylake-client / Coffee Lake，除了后来的 CPU 中的 DDR4）。

> 一个处理器/核心是否可以访问彼此的缓存，因为如果允许它们访问彼此的缓存，那么我相信可能会有更少的缓存未命中，在这种情况下，如果该特定处理器缓存没有一些数据但其他一些数据处理器的缓存可能有它，从而避免从内存读取到第一个处理器的缓存？这个假设是否有效和真实？

2.  不会。每个 CPU 内核的 L1 高速缓存都紧密集成到该内核中。访问相同数据的多个内核将在各自的 L1d 缓存中拥有自己的副本，非常靠近加载/存储执行单元。

    多级缓存的全部意义在于，单个缓存对于非常热的数据来说不够快，但对于仍然定期访问的不经常使用的数据来说就不够大了。 [为什么在大多数处理器中，L1 缓存的大小都小于 L2 缓存的大小？](https://stackoverflow.com/questions/4666728/why-is-the-size-of-l1-cache-smaller-than-that-of-the-l2-cache-in-most-of-the-pro)

    在英特尔当前的 CPU 中，离核到另一个内核的缓存不会比只到 L3 更快。或者，与仅构建更大/更快的 L3 缓存相比，实现这一点所需的核心之间的网状网络将是令人望而却步的。

    其他内核内置的小型/快速缓存可以加速这些内核。与其他提高缓存命中率的方法相比，直接共享它们可能会花费更多的功率（甚至可能需要更多的晶体管/裸片面积）。（功率是比晶体管数量或芯片面积更大的限制因素。这就是现代 CPU 能够负担得起大型私有 L2 缓存的原因）。

    另外，您不希望其他内核污染可能缓存与*该*内核相关的内容的小型私有缓存。

> 允许任何处理器访问其他处理器的高速缓存内存会有什么问题吗？

3.  是的——根本没有电线将各种 CPU 缓存连接到其他内核。如果一个内核想要访问另一个内核缓存中的数据，那么它唯一可以访问的数据路径就是系统总线。

一个非常重要的相关问题是[缓存一致性问题](http://en.wikipedia.org/wiki/Cache_coherency)。考虑以下情况：假设一个 CPU 内核在其缓存中有一个特定的内存位置，并且它写入该内存位置。然后，另一个内核读取该内存位置。您如何确保第二个核心看到更新的值？这就是缓存一致性问题。

正常的解决方案是[MESI 协议](https://en.wikipedia.org/wiki/MESI_protocol)，或者它的变体。 [英特尔使用 MESIF](https://en.wikipedia.org/wiki/MESIF_protocol)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-06-05T02:07:04.393

快速回答 1) 是 2) 否，但这一切都可能取决于您所指的内存实例/资源，数据可能同时存在于多个位置。3）是的。

有关该问题的完整解释，您应该阅读 Ulrich Drepper ( [http://lwn.net/Articles/250967/](http://lwn.net/Articles/250967/) ) 撰写的 9 部分文章“每个程序员都应该了解的内存”，您将全面了解您似乎在以良好且易于理解的细节询问的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-03T14:21:08.657

首先回答你的问题，我知道 Core 2 Duo 有一个 2 层缓存系统，其中每个处理器都有自己的一级缓存，它们共享一个二级缓存。这有助于数据同步和内存利用。

为了回答你的第二个问题，我相信你的假设是正确的。如果处理器能够访问彼此的缓存，那么显然会有更少的缓存未命中，因为可供处理器选择的数据会更多。但是，请考虑共享缓存。在 Core 2 Duo 的情况下，共享缓存允许程序员在这个环境中安全地放置常用变量，这样处理器就不必访问它们各自的一级缓存。

要回答您的第三个问题，访问其他处理器的缓存内存可能存在问题，这属于“单写多读”原则。我们不能允许多个进程同时写入内存中的同一位置。

有关 core 2 duo 的更多信息，请阅读这篇简洁的文章。

[http://software.intel.com/en-us/articles/software-techniques-for-shared-cache-multi-core-systems/](http://software.intel.com/en-us/articles/software-techniques-for-shared-cache-multi-core-systems/)

# javascript - 这是有效的 JSON 吗？

> ID：944969
> 
> 赞同：5
> 
> 时间：2009-06-03T14:07:15.300
> 
> 标签：javascript, json

```
{"something":"1","mode":"true","number":"1234"} 
```

因为我在期待 JSON 时得到 406。

它是通过 Jersey 生成的，它被告知 @Produces JSON 方法。它被一个将 JSON 设置为其句柄的 Dojo xhrGet 接收。

编辑 - 澄清一下，我对我评估的代码或类似的东西不感兴趣。问题很简单——它是有效的 JSON 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-03T14:12:05.197

是的，但是您将布尔 ( `mode`) 和数字 ( `number`) 元素都作为字符串。不应该是：

```
{"something":"1","mode":true,"number":1234} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-03T14:24:24.983

如果字典的所有值都是字符串，则它是有效的 JSON。这也是有效的 JSON：

{“某事”：1，“模式”：真，“数字”：1234}

但是，当您请求响应类型（例如 html 或 json）并且服务器无法以该类型发送它时，通常会发生 406 错误。为什么你认为输入无效？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-09-09T01:07:57.257

我使用一个名为 JASONLint ( [http://www.jsonlint.com/](http://www.jsonlint.com/) ) 的简单复制/粘贴工具来测试我堆积如山的 JSON。你可以挖。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T14:11:02.780

如果您想直接使用数字，则不应将它们放在引号中。它是有效的 JSON，但您可能想要做的是：

{"something":1,"mode":"true","number":1234}

如果您想要更好的答案，您需要添加更多信息。

编辑：嗯......是的，布尔值也不应该被引用，除非你*想*自己转换它，出于某种原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T17:49:35.893

*   是的，这是有效的 JSON
*   尽管如果您打算将其作为 HTTP 请求的结果输出，则需要转义所有引号

$str = "{\"something\":\"1\",\"mode\":\"true\",\"number\":\"1234\"}"; 回声 $str

# sql-server - 单元测试和 SQL 数据库连接

> ID：944970
> 
> 赞同：0
> 
> 时间：2009-06-03T14:07:40.823
> 
> 标签：sql-server, vb.net, linq, unit-testing

我创建的单元测试有问题。第一次这样做，所以我不确定为什么会收到此错误

```
<DeploymentItem("ETDS.exe")> <DataSource("System.Data.SqlClient", "Data Source=Foo;Initial Catalog=FooDB;Integrated Security=True", "User_Names", DataAccessMethod.Sequential)> <TestMethod()> _
Public Sub ValidateUserNameTest()
    Dim target As Login_Accessor = New Login_Accessor ' TODO: Initialize to an appropriate value
    Dim expected As Boolean = True ' TODO: Initialize to an appropriate value
    Dim actual As Boolean
    actual = target.ValidateUserName
    Assert.AreEqual(expected, actual)
End Sub 
```

我得到的错误是

**测试方法 ETDS_Unit_Tests.LoginTest.ValidateUserNameTest 抛出异常：System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）。**

这是我的软件使用的相同连接，软件运行良好，只有单元测试失败。我做错了什么？

**编辑** 它似乎对表中的每个数据行都失败了一次。此外，我正在测试的方法中使用 Linq 查询。我相信这可能是导致我错误的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T14:10:19.770

因为您使用的是集成安全性，所以问题很可能是：“谁在运行测试，他们对网络和/或 SQL Server 有什么权限？”。如果它是本地计算机帐户，则可能甚至不允许通过网络输出。

我注意到您的连接字符串没有`Server=`

如果你在本地连接，它应该有`Server=(local)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-04T09:00:50.320

您的本地 SQL Native Client 配置中是否有 Foo 别名设置？没有那个“数据源= Foo；” 您的连接字符串中的引用将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:40:09.450

我不知道这是否与遇到的 OP 相同，但我发现的一个非常相似的问题的解决方案是添加`Provider=SQLOLEDB;`到连接字符串中。

# wcf - 通过 VBScript 调用 WCF 服务

> ID：944975
> 
> 赞同：10
> 
> 时间：2009-06-03T14:08:44.377
> 
> 标签：wcf, vbscript, msxml

有一个带有配置的 WCF 服务：

```
<services>
  <service name="MyService" behaviorConfiguration="MyServiceBehavior">
    <endpoint 
      binding="basicHttpBinding"  
      contract="IMyService" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8001/MyService" />
      </baseAddresses>
    </host>
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="MyServiceBehavior">
      <serviceMetadata httpGetEnabled="True" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

该脚本应该调用它：

```
Option Explicit

Dim soapClient
Dim serviceUri
Dim serviceName
Dim portName
Dim result

serviceUri = "http://localhost:8001/MyService"
serviceName = "MyService"
portName = "BasicHttpBinding_IMyService"

Set soapClient = CreateObject("MSSOAP.soapClient")
soapClient.ClientProperty("ServerHTTPRequest") = True
soapClient.mssoapinit serviceUri & "?WSDL", serviceName, portName 
```

运行脚本时出现此错误：

客户端：WSDLReader：分析 WSDL 文件失败 HRESULT=0x8 0004005 - WSDLReader：初始化服务失败 HRESULT=0x80004005 - WSDL 服务：初始化服务 MyService 的端口失败 HRESULT =0x80004005 - WSDLPort：分析端口 BasicHttpBinding_IMyService 的绑定信息失败 HRESULT =0x80004005 - WSDLPort: 端口 BasicHttpBinding_IMyService 的操作无法初始化 HRESULT=0x8000 4005 - WSDLOperation: 操作 //def:portType[@name="IMyService"]/def:operation[@name="MyMethod"] 没有在 porttype 部分中找到 HRESULT=0x80004005

出了什么问题？请帮忙。

编辑：

谢谢你，芝士，你的回答。MSSOAP 的问题似乎在于它要求所有 xsd 模式都内嵌在生成的 WSDL 文件中。WCF 默认情况下不这样做。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-03T19:48:28.540

不要使用 MSSOAP。我认为在过去的 3 或 4 年里，它现在已经不支持了。考虑使用 XmlHttp，它是 MSXML 的一部分，受支持并将继续维护。您将不得不手动构建一个 SOAP 信封。但这种方式更可靠。

示例代码

```
' URL to the WCF service'
url= "http://server:port/Wcf.Service.Address"

Dim requestDoc
Set requestDoc = WScript.CreateObject("MSXML2.DOMDocument.6.0")

Dim root
Set root = requestDoc.createNode(1, "Envelope", "http://schemas.xmlsoap.org/soap/envelope/")
requestDoc.appendChild root

Dim nodeBody
Set nodeBody = requestDoc.createNode(1, "Body", "http://schemas.xmlsoap.org/soap/envelope/")
root.appendChild nodeBody

Dim nodeOp
Set nodeOp = requestDoc.createNode(1, "Register", "urn:Your.Namespace.Here")
nodeBody.appendChild nodeOp

Dim nodeRequest
Set nodeRequest = requestDoc.createNode(1, "request", "urn:Your.Namespace.Here")
'content of the request will vary depending on the WCF Service.'
' This one takes just a plain string. '
nodeRequest.text = "Hello from a VBScript client."

nodeOp.appendChild nodeRequest

Set nodeRequest = Nothing
Set nodeOp = Nothing
Set nodeBody = Nothing
Set root = Nothing

'the request will look like this:'
'       <s:Envelope xmlns:s='http://schemas.xmlsoap.org/soap/envelope/'> '
'         <s:Body> '
'           <Register xmlns='urn:Your.Namespace.Here'> '
'               <request>hello from a VBScript client.</request> '
'           </Register> '
'         </s:Body> '
'       </s:Envelope>'

WSCript.Echo  "sending request " & vbcrlf & requestDoc.xml

dim xmlhttp

set xmlhttp = WScript.CreateObject("MSXML2.ServerXMLHTTP.6.0")
' set the proxy as necessary and desired '
xmlhttp.setProxy 2, "http://localhost:8888"
xmlhttp.Open "POST", url, False
xmlhttp.setRequestHeader "Content-Type", "text/xml"
' set SOAPAction as appropriate for the operation '
xmlhttp.setRequestHeader "SOAPAction", "urn:Set.As.Appropriate"
xmlhttp.send requestDoc.xml

WScript.Echo vbcrlf & "Raw XML response:" & vbcrlf 
WSCript.Echo  xmlhttp.responseXML.xml

dim response
set response= xmlhttp.responseXML
'the response is an MSXML2.DOMDocument.6.0' 
'party on the response here - XPath, walk the DOM, etc. ' 
```

仅供参考：请参阅[which-version-of-msxml-should-i-use](https://stackoverflow.com/questions/951804/which-version-of-msxml-should-i-use)以了解如何选择 MSXML 版本。

# oop - OOP 的重大挑战者

> ID：944977
> 
> 赞同：15
> 
> 时间：2009-06-03T14:09:00.133
> 
> 标签：oop, paradigms

据我了解，OOP 是大型项目最常用的范例。我还知道大型系统的一些较小的子集使用其他范例（例如 SQL，它是声明性的），并且我还意识到在较低级别的计算 OOP 是不可行的。但在我看来，通常更高级别的解决方案几乎总是以 OOP 方式组合在一起。

是否存在真正的非 OOP 范式实际上是大规模解决方案的*更好*选择的场景？还是这些天闻所未闻？

自从我开始学习 CS 以来，我就一直想知道这一点；很容易让人觉得 OOP 是某种编程的必杀技，永远不会被超越。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-03T14:17:44.297

在我看来，OOP 被如此广泛使用的原因并不是因为它是适合这项工作的工具。我认为更多的是可以以客户理解的方式向客户描述解决方案。

汽车是具有发动机的车辆。这就是编程和现实世界的结合！

很难理解任何可以如此优雅地适应编程和现实世界的东西。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-03T14:28:24.867

Linux 是一个非常非 OOP 的大型项目。而且它也不会从中获得很多好处。

我认为 OOP 对它有很好的影响，因为它与良好的编程实践相关联，如封装、数据隐藏、代码重用、模块化等。但这些优点绝不是 OOP 独有的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-04-08T14:28:58.930

您可能会看一下由 Joe Armstrong 编写的 Erlang。

维基百科：

> “Erlang 是一种通用并发编程语言和运行时系统。Erlang 的顺序子集是一种函数式语言，具有严格的求值、单一赋值和动态类型。”

乔·阿姆斯特朗：

> “因为面向对象语言的问题在于，他们拥有随身携带的所有这些隐式环境。你想要一根香蕉，但你得到的是一只拿着香蕉和整个丛林的大猩猩。”</p>

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-03T14:33:01.737

OOP 的承诺是代码重用和更容易维护。我不确定它是否已交付。我认为 dot net 之类的东西与我们过去从各个供应商那里获得的 C 库非常相似。如果需要，您可以调用该代码重用。至于维护坏代码就是坏代码。OOP 没有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-03T14:21:43.070

我是 OOP 的最大粉丝，我每天都在练习 OOP。这是编写代码最自然的方式，因为它类似于现实生活。

不过，我意识到 OOP 的虚拟化可能会导致性能问题。当然，这取决于您的设计、您选择的语言和平台（例如，用基于垃圾收集的语言（如 Java 或 C#）编写的系统可能比用 C++ 编写的系统性能更差）。

我想在实时系统中，过程编程可能更合适。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-03T14:27:26.180

请注意，并非所有声称是 OOP 的项目实际上都是 OOP。有时大部分代码都是程序性的，或者数据模型是[贫乏](http://martinfowler.com/bliki/AnemicDomainModel.html)的，等等......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-04T10:24:24.520

看到[这个](http://en.wikipedia.org/wiki/Programming_paradigm)和[这个](http://en.wikipedia.org/wiki/Multi-paradigm_programming_language)。显然，您可以将 C# 与五种不同的编程范例一起使用，C++ 与三种等。

软件构建与基础物理学不同。物理学努力使用可能受到新实验数据和/或理论挑战的范式来描述现实。物理学是一门寻找“真理”的科学，而软件构建却没有。

软件建设是一**门生意**。你需要有**生产力**，即实现一些有人愿意花钱的目标。使用范式是因为它们对于有效地**生产软件**很有用。你不需要每个人都同意。如果我做 OOP 并且它对我来说效果很好，我不在乎如果我有时间和金钱来学习“新”范式是否可能对我有用 20%，然后重新考虑整个软件结构。我从头开始工作并重新设计它。

此外，您可能使用了另一种范式，我仍然会很高兴，就像我可以通过经营日本料理餐厅赚钱而您可以在隔壁的墨西哥料理餐厅赚钱一样。我不需要和你讨论日本菜是否比墨西哥菜好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-05-26T09:14:27.310

我怀疑 OOP 很快就会消失，它太适合我们的问题和心理模型了。

不过，我们开始看到的是多范式方法，将声明性和功能性的想法结合到面向对象的设计中。大多数较新的 JVM 语言（JavaFX、Scala、Clojure 等）以及 .net 平台上的 LINQ 和 F# 都是一个很好的例子。

需要注意的是，我在这里不是在谈论替换 OO，而是在谈论补充它。

*   JavaFX 表明，声明式解决方案超越了 SQL 和 XSLT，还可用于绑定 GUI 中可视组件之间的属性和事件

*   对于容错和高并发系统，函数式编程**非常**适合，正如 Ericsson AXD301（使用 Erlang 编程）所证明的那样

所以......随着并发变得越来越重要和 FP 变得越来越流行，我想不支持这种范式的语言会受到影响。这包括许多当前流行的，例如 C++、Java 和 Ruby，尽管 JavaScript 应该可以很好地应对。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-04T10:10:38.867

Zyx，你写道，“大多数系统都使用关系数据库......”

恐怕没有这样的事。关系模型明年将有 40 年历史，至今仍未实施。我认为您的意思是“SQL 数据库”。您应该阅读 Fabian Pascal 的任何内容，以了解关系 dbms 和 SQL dbms 之间的区别。

“ ...通常选择关系模型是因为它很受欢迎，”

没错，它很受欢迎。

“ ...工具的可用性，”

唉，没有必要的主要工具：关系模型的实现。

“ 支持，”

是的，关系模型有很好的支持，我敢肯定，但它完全不受 dbms 实现的支持。

“以及关系模型实际上是一个数学概念的事实，”

是的，它是一个数学概念，但是，它没有被实施，它在很大程度上仅限于象牙塔。弦理论也是一个数学概念，但我不会用它来实现系统。

事实上，尽管它是一个数学概念，但它肯定不是一门科学（如计算机科学），因为它缺乏任何科学的第一个要求：它是可证伪的：没有实现关系 dbms 来检查它的索赔。

是纯蛇油。

“……与面向对象相反。”

与OOP相反，关系模型从未实现过。

购买一本关于 SQL 的书并获得生产力。

将关系模型留给非生产性的理论家。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-03T14:18:39.847

使用 OOP 使代码更易于管理（如修改/更新/添加新功能）和理解。对于较大的项目尤其如此。因为模块/对象封装了它们的数据和对该数据的操作，所以更容易理解功能和全局。

OOP 的好处是更容易（与其他开发人员/管理人员/客户）讨论 LogManager 或 OrderManager，每个都包含特定的功能，然后描述“将数据转储到文件中的一组方法”和“方法跟踪订单详细信息”。

所以我认为 OOP 对大型项目很有帮助，但总会有新的概念出现，所以在未来继续寻找新的东西，评估并保留有用的东西。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-03T15:37:51.757

人们喜欢将各种事物视为“对象”并对其进行分类，因此毫无疑问，OOP 如此受欢迎。但是，在某些领域 OOP 并没有获得更大的普及。大多数系统使用关系数据库而不是客观的。即使第二个模型拥有一些显着的记录并且对于某些类型的任务更好，但由于其受欢迎程度、工具的可用性、支持以及关系模型实际上是一个数学概念这一事实，关系模型还是被异常选择了。哎呀。

我从未见过 OOP 的另一个领域是软件构建过程。所有的配置和制作脚本都是程序化的，部分原因是 shell 语言缺乏对 OOP 的支持，部分原因是 OOP 对于此类任务来说太复杂了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-02-06T22:51:06.207

我的观点有点争议，但我认为 OOP，至少是现在流行的一种，对于在我的特定领域（VFX，在场景组织和应用方面有点相似）生产最大规模的软件*没有*帮助状态为游戏）。我发现它在中小规模上非常有用。在这里我必须要小心一点，因为我过去曾邀请过一些暴徒，但我应该承认这是我在特定领域的狭隘经验。

我经常发现的困难是，如果您拥有所有这些封装数据的小型具体对象，那么它们现在都希望彼此交谈。它们之间的交互可能会变得非常复杂，就像这样（在跨越数千个对象的实际应用程序中要复杂得多）：

[![在此处输入图像描述](https://i.stack.imgur.com/850d9.png)](https://i.stack.imgur.com/850d9.png)

这不是与耦合直接相关的依赖图，而是“交互图”。可以有抽象来将这些具体对象彼此分离。`Foo`可能不会直接交谈`Bar`。相反，它可能会通过`IBar`或类似的方式与它交谈。该图仍将连接`Foo`到，`Bar`因为尽管已解耦，但它们仍会相互通信。

构成它们自己的小生态系统的中小型对象之间的所有这些通信，如果应用于我领域中大型代码库的整个规模，可能会变得非常难以维护。而且它变得如此难以维护，因为很难推断对象之间的所有这些交互会发生什么，比如副作用。

相反，我发现有用的是将整个代码库组织成完全独立的、庞大的子系统，这些子系统可以访问一个中央“数据库”。然后每个子系统输入和输出数据。其他一些子系统可能会访问相同的数据，但没有任何一个系统直接相互通信。

[![在此处输入图像描述](https://i.stack.imgur.com/2Wxj4.png)](https://i.stack.imgur.com/2Wxj4.png)

... 或这个：

[![在此处输入图像描述](https://i.stack.imgur.com/pVTFZ.png)](https://i.stack.imgur.com/pVTFZ.png)

...并且每个单独的系统不再尝试封装状态。它不会试图成为自己的生态系统。相反，它在中央数据库中读取和写入数据。

当然在每个子系统的实现中，他们可能会使用一些对象来帮助实现它们。这就是我发现 OOP 在这些子系统的实现中非常有用的地方。但是这些子系统中的每一个都构成了一个相对中小型的项目，不是太大，而且我发现OOP非常有用。

**最少知识的“流水线编程”**

这允许每个子系统只专注于做自己的事情，而几乎不知道外部世界正在发生什么。专注于物理的开发人员可以坐下来使用物理子系统，对软件的工作原理知之甚少，除了有一个中央数据库，他可以从中检索运动组件（只是数据）之类的东西，并通过将物理应用于该数据来转换它们。这让他的工作变得非常简单，这样他就可以做他最擅长的事情，而对其他所有事情的运作方式知之甚少。输入中央数据并输出中央数据：这是每个子系统必须正确执行的所有操作，其他一切才能正常工作。这是我在我的领域中发现的最接近“流水线编程”的东西

由于每个子系统的关注范围很窄，测试仍然非常简单。我们不再使用依赖注入模拟具体对象，而是生成与特定系统相关的最少量数据并测试特定系统是否为给定输入提供正确的输出。由于要测试的系统如此之少（只有几十个可以组成一个复杂的软件），它还大大减少了所需的测试数量。

**打破封装**

然后，该系统变成一个相当扁平的管道，通过独立的子系统转换中央应用程序状态，这些子系统实际上不知道彼此的存在。有时可能会将一个中心事件推送到另一个系统处理的数据库，但另一个系统仍然不知道该事件来自何处。我发现这是至少在我的领域中解决复杂性的关键，而且它是通过实体组件系统有效地实现的。

然而，它类似于更接近大规模程序或函数式编程的东西，以解耦所有这些子系统并让它们在对外部世界了解最少的情况下工作，因为我们打破封装以实现这一点并避免要求系统与每个其他。当您放大时，您可能会发现您的对象份额被用于实现这些子系统中的任何一个，但在最广泛的范围内，这些系统类似于 OOP 以外的东西。

**全球数据**

我不得不承认，起初我对将 ECS 应用到我所在领域的建筑设计非常犹豫，因为首先，据我所知，在流行的商业竞争对手（3DS Max、SoftImage 等）中还没有这样做过，其次，它看起来像是一大堆全球可访问的数据。

然而，我发现这不是一个大问题。我们仍然可以非常有效地维护不变量，甚至可能比以前更好。原因在于 ECS 将所有内容组织成系统和组件的方式。您可以放心，音频系统不会尝试改变运动组件，例如，即使在最骇人听闻的情况下也不会。即使团队协调不善，ECS 也不太可能退化为您无法推断哪些系统访问哪个组件的情况，因为这在纸面上相当明显，并且几乎没有任何理由可以访问某个系统一个不合适的组件。

相反，它通常消除了许多以前对 hacky 事物的诱惑，因为数据是开放的，因为在我们以前的代码库中在松散的协调和紧缩时间下完成的许多 hacky 事情是在仓促尝试 X 射线抽象并尝试访问对象生态系统的内部。由于人们匆忙试图获取并使用他们想要访问的数据进行操作，抽象开始变得泄漏。他们基本上是在尝试访问导致界面设计迅速退化的数据。

由于系统的组织方式，仍然有一些类似于封装的东西，因为通常只有一个系统修改特定类型的组件（在某些特殊情况下是两个）。但是他们不拥有该数据，他们不提供检索该数据的功能。系统不相互交谈。它们都通过中央 ECS 数据库进行操作（这是必须注入所有这些系统的唯一依赖项）。

**灵活性和可扩展性**

这已经在关于实体组件系统的外部资源中得到广泛讨论，但它们在适应全新的设计理念方面非常灵活，即使是打破概念的想法，例如对哺乳动物、昆虫和植物等生物的建议豆芽在阳光下一下子就叶子了。

原因之一是因为没有要打破的中心抽象。如果您需要更多数据，或者只是创建一个将植物、哺乳动物和昆虫所需的组件串在一起的实体，您可以引入一些新组件。设计用于处理昆虫、哺乳动物和植物组件的系统然后会自动将其拾取，您无需更改任何内容即可获得所需的行为，只需添加一行代码以使用新的组件组合实例化实体。当您需要全新的功能时，您只需添加新系统或修改现有系统。

我在其他地方没有发现这么多讨论的是，即使在没有我们未能预料到的破坏概念的设计更改的情况下，这在多大程度上简化了维护。即使忽略 ECS 的灵活性，当您的代码库达到一定规模时，它确实可以简化事情。

**将对象转化为数据**

在之前的 OOP 繁重的代码库中，我看到维护代码库更接近上面的第一张图的难度，所需的代码量激增，因为`Car`该图中的类比：

[![在此处输入图像描述](https://i.stack.imgur.com/0V73Z.png)](https://i.stack.imgur.com/0V73Z.png)

...必须构建为实现多个接口的完全独立的子类型（类）。因此，我们在系统中拥有爆炸性数量的对象：点光源与定向光源的单独对象，鱼眼相机与另一个对象的单独对象等等。我们有数千个对象以无穷无尽的组合实现了几十个抽象接口。

当我将它与 ECS 进行比较时，它只需要数百个，并且我们能够在使用一小部分代码之前做完全相同的事情，因为这将类比`Car`实体变成了不再需要其类的东西。它变成了一个简单的组件数据集合，作为一种`Entity`类型的通用实例。

**OOP 替代方案**

因此，在某些情况下，在设计的最广泛级别上过度应用 OOP 会开始真正降低可维护性。在您的系统最广泛的鸟瞰图上，它可以帮助将其展平，而不是尝试将其建模得如此“深入”，使对象与对象交互的对象与对象交互，无论多么抽象。

比较我过去和现在使用的两个系统，新的系统具有更多功能，但需要数十万 LOC。前者需要超过 2000 万个 LOC。当然，这不是最公平的比较，因为前者有巨大的遗产，但如果你从两个系统中分一杯羹，这两个系统在功能上完全相等，没有遗留包袱（至少与我们可能得到的差不多）， ECS 只需要一小部分代码来做同样的事情，部分原因是它通过将它们转化为原始数据（组件）的集合（实体）来显着减少系统中的类数量，并使用庞大的系统来处理它们一船的小/中型物体。

> 是否存在真正的非 OOP 范式实际上是大规模解决方案的更好选择的场景？还是这些天闻所未闻？

这远非闻所未闻。例如，我在上面描述的系统广泛用于游戏中。这在我的领域非常罕见（我的领域中的大多数架构都是类似于 COM 的纯接口，这就是我过去从事的架构类型），但我发现凝视游戏玩家在什么时候做什么设计一个建筑让世界变得与众不同，因为它能够创造出在它不断发展的过程中仍然非常容易理解的东西。

也就是说，有些人认为 ECS 本身就是一种面向对象的编程。如果是这样，它就不像我们大多数人会想到的那种 OOP，因为数据（组成它们的组件和实体）和功能（系统）是分开的。它需要在广泛的系统级别放弃封装，这通常被认为是 OOP 最基本的方面之一。

**高级编码**

> 但在我看来，通常更高级别的解决方案几乎总是以 OOP 方式组合在一起。

如果您可以将应用程序与非常高级的代码拼凑在一起，那么就您的团队必须维护的代码而言，它的规模往往相当小或中等，并且可能可以使用 OOP 非常有效地组装。

在我的 VFX 领域中，我们经常需要做一些相对较低级别的事情，比如光线追踪、图像处理、网格处理、流体动力学等，并且不能仅仅将这些从第三方产品拼凑起来，因为我们实际上是在竞争更多的是我们可以在底层做些什么（用户对尖端的、有竞争力的生产渲染改进比更好的 GUI 更兴奋）。因此，可能会有很多代码，从非常低级的位和字节混洗到脚本编写者通过嵌入式脚本语言编写的非常高级的代码。

**通信网络**

但是对于任何类型的应用程序（高级或低级或组合）都有足够大的规模，它围绕着一个非常复杂的中央应用程序状态，我发现尝试封装所有内容不再有用成物体。这样做往往会增加复杂性，并且由于所有事物之间发生的交互量成倍增加，因此难以推理正在发生的事情。如果在足够大的规模上没有一个断点，我们不再将每个事物建模为必须相互通信的封装生态系统，那么推理数千个生态系统相互通信就不再那么容易了。即使每一个都是单独的简单，作为一个整体考虑的一切都可能开始超过头脑，如果您尝试仅围绕 OOP 原则来设计整个大型系统，我们通常必须投入大量的精力来进行更改、添加新功能和调试等等。它可以帮助至少在某些域中以某种规模摆脱封装。

到那时，让一个物理系统封装它自己的数据（否则很多东西可能想要与它对话并检索该数据以及使用适当的输入数据对其进行初始化），它就不再那么有用了，这就是我发现通过 ECS 进行的这种替代方案非常有用，因为它将类比物理系统和所有此类庞大的系统变成了“中央数据库转换器”或“输出新内容的中央数据库阅读器”，现在它们可以相互忽略。然后，每个系统开始更像是扁平管道中的进程，而不是在非常复杂的通信图中形成节点的对象。

# cvs - 使用非 ASCII 字符提交文本文件的问题

> ID：944978
> 
> 赞同：3
> 
> 时间：2009-06-03T14:09:01.957
> 
> 标签：cvs, tortoisecvs

我有一个包含一些希腊字符的 html 文件，每当我尝试提交它时，我都会得到：

commitlog：file="dummy.html" 似乎是 BINARY commitlog 错误：file="dummy.html" 出现 BINARY 但签入为 ASCII cvs commit：预提交检查失败

我正在使用： cvs add -kk dummy.html cvs commit dummy.html

有没有办法解决这个问题并将文件提交为文本而不是二进制文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-06-01T19:26:44.893

尝试使用以下命令添加此文件：

**cvs 添加 -kb**

如果你想要二进制文件，请尝试：

cvs 添加 -ko

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-05T23:22:50.750

这取决于您的文件是如何编码的。例如，如果您使用 utf-8，CVS 可以将其视为普通文本文件。

# apache-flex - 通过 Post 方法从 Flex 中的 Web 服务获取 XML

> ID：944981
> 
> 赞同：0
> 
> 时间：2009-06-03T14:09:40.943
> 
> 标签：apache-flex, flash, actionscript, service

我在java中创建了一个servlet，它会在调用时给我一个xml响应

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {      
        response.setContentType("text/xml; charset=utf-8");                                                      // Set the servlet's response type to XML.
        PrintWriter out = null;

        try {
            out = response.getWriter();

            XMLOutputFactory of = XMLOutputFactory.newInstance();

            XMLStreamWriter writer = of.createXMLStreamWriter(out);

            writer.writeStartDocument();
            writer.writeStartElement("Test");
            for(int i = 1; i <= 100; i++) {
                writer.writeStartElement("TheNumber");
                writer.writeAttribute("number", "" + i);
                writer.writeAttribute("value", "" + Math.pow(2, i));
                writer.writeEndElement();
            }
            writer.writeEndElement();
            writer.close();

            out.close();
        } catch (Exception ex) {

        }
} 
```

现在我想在 flex 中获取这个 xml，有人可以给我一个提示吗？我尝试了 mx:WebService 和 mx:HttpService 但它们都不起作用。

提前致谢

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T03:59:38.963

直接的 URLLoader 也可以为您工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-10-11T00:17:54.370

既然您已经使用 HttpService 解决了问题，那么现在是时候将 Flex 远程处理与他们的 Granite Data Services 或 BlazeDS 一起使用，除非您有一些不能解决的主要原因。解析 XML 和使用 XML 进行数据传输是一种禁忌，性能很糟糕，如果可以避免的话，通常也是个坏主意。

[http://www.graniteds.org/](http://www.graniteds.org/)

[http://opensource.adobe.com/wiki/display/blazeds/BlazeDS/](http://opensource.adobe.com/wiki/display/blazeds/BlazeDS/)

# php - 在 Windows 上构建 PECL 扩展

> ID：944986
> 
> 赞同：0
> 
> 时间：2009-06-03T14:10:25.387
> 
> 标签：php, dll, msbuild, pecl

我想在 Windows 上构建一个旧版本的[APC 。](http://in.php.net/manual/en/apc.installation.php)他们说（检查链接）

> 此 PECL 扩展的 DLL 当前不可用。另请参阅 Windows 部分的构建。

但所提到的指南不可用。你能推荐一个方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-10-09T12:53:34.653

好吧，我昨晚试过了，我还需要下载 PHP 源文件、Zlib 源和 OpenSSL 源，并构建 Zlib 和 openSSl 静态库以获取所有引用。但是，一旦我让所有参考资料都知道，该死的东西仍然在构建中出错，因为某些东西被重新定义了。

我知道你的意思，这个过程根本没有记录。就我个人而言，我不认为有可以下载的windwows DLL，因为他们也无法构建它。

# wpf - WPF 数据绑定智能感知

> ID：944987
> 
> 赞同：9
> 
> 时间：2009-06-03T14:10:45.137
> 
> 标签：wpf, data-binding, mvvm, intellisense

好的，所以我有一个关于 WPF 的一般性问题。我对 ASP.NET MVC 有点搞砸了，并且在标记中它对您的视图模型对象具有智能感知功能，因此您不会输入错误（我喜欢它）。

输入 WPF，我喜欢它，我正在使用 MVVM 方法，我必须做的一件烦人的事情是确保我正确绑定到我的视图模型。所以我在我的 xaml 中输入一些内容，然后我要么 1）如果我很懒，只需运行应用程序并单击 2）如果我不懒 a）查看我正在使用的控件的当前 DataContext。b）转到该 ViewModel 类查看属性 c）找到我的属性，然后单击返回到我的视图并确保我拼写正确。

我相信您可以在运行时查看您的跟踪输出以查找不正确的绑定，但是否有一些东西可以在 xaml 中允许智能感知。View 需要了解我的 ViewModel，所以为什么不在 xaml 中公开它。

我认为 IDE 为我这样做会很好，这意味着，当我键入**“{Binding”**时，它应该在可视树上找到第一个非空 DataContext 并显示属性，让我选择一个然后你有它。

我错过了什么吗？有没有其他选择。有什么见解吗？

编辑：

关于下面的评论，有一种方法可以在设计时设置数据上下文，例如

```
<Window.Resources>
    <DesignTimeData:DesignTimeCustomers x:Key="designTimeCustomersDS" />
</Window.Resources> 
```

这是此博客的一个片段：http: [//karlshifflett.wordpress.com/2008/10/11/viewing-design-time-data-in-visual-studio-2008-cider-designer-in-wpf-and- silverlight-项目/](http://karlshifflett.wordpress.com/2008/10/11/viewing-design-time-data-in-visual-studio-2008-cider-designer-in-wpf-and-silverlight-projects/)

它所做的只是在 xaml 中引用一个类。

那么，有了这个，设计者就不能利用数据上下文的反射来为你提供该类的所有属性吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-15T15:50:47.273

[与 2013 年相比：](http://blogs.msdn.com/b/visualstudio/archive/2013/08/09/xaml-editor-improvements-in-visual-studio-2013.aspx)

具有已解析 DataContext 的 IntelliSense ![在此处输入图像描述](https://i.stack.imgur.com/6OyQp.jpg)

带有设计时 DataContext 的 IntelliSense ![在此处输入图像描述](https://i.stack.imgur.com/BU4C0.jpg)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-06-17T08:54:46.197

> 那么，有了这个，设计者就不能利用数据上下文的反射来为你提供该类的所有属性吗？

Resharper 6 具有此功能，如果您在视图上设置了 d:DataContext，则可以在智能感知中向您显示 d:DataContext 的成员。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-03T15:46:51.023

Visual Studio 2010 将支持绑定上的智能感知。但是，这仅限于 Binding 对象本身的属性。例如，在 XAML 编辑器中键入“{Binding”后，我会在其余属性（路径、元素名称等）上获得智能感知。

我认为与您指定的数据上下文有关的智能感知类型是不可能的，因为数据上下文是在运行时设置的。我尝试通过直接在构造函数中设置数据上下文在 VS 2010 中进行试验，但没有任何运气。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-03T14:09:01.850

根据 ：

[http://blogs.msdn.com/b/visualstudio/archive/2013/08/09/xaml-editor-improvements-in-visual-studio-2013.aspx](http://blogs.msdn.com/b/visualstudio/archive/2013/08/09/xaml-editor-improvements-in-visual-studio-2013.aspx)

Visual Studio 2013 xaml 编辑器现在支持用于数据绑定的 IntelliSense

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-02-28T11:41:01.020

在 Visual Studio 2010 中有一个绑定构建器，您可以启用它 [http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/14/how-to-enable-using-the-binding-builder-in -wpf-and-silverlight-applications.aspx](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/14/how-to-enable-using-the-binding-builder-in-wpf-and-silverlight-applications.aspx) 但你仍然没有得到智能感知，这很奇怪。

# java - 有没有办法在不抛出异常的情况下转储堆栈跟踪？

> ID：944991
> 
> 赞同：187
> 
> 时间：2009-06-03T14:11:58.007
> 
> 标签：java, debugging, exception, logging, stack-trace

我正在考虑为我的 Java 应用程序创建一个调试工具。

我想知道是否可以获得堆栈跟踪，就像`Exception.printStackTrace()`但实际上没有抛出异常一样？

我的目标是，在任何给定的方法中，转储堆栈以查看方法调用者是谁。

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2009-06-03T14:15:43.257

是的，只需使用

```
Thread.dumpStack() 
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2009-06-03T14:19:44.480

您还可以尝试`Thread.getAllStackTraces()`获取所有存活线程的堆栈跟踪图。​​​​​​​</p>

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2009-06-03T15:28:37.600

如果您只想跟踪当前线程（而不是系统中的所有线程，如 Ram 的建议），请执行以下操作：

线程.currentThread()。[获取堆栈跟踪（）](http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#getStackTrace())

要查找来电者，请执行以下操作：

```
private String getCallingMethodName() {
    StackTraceElement callingFrame = Thread.currentThread().getStackTrace()[4];
    return callingFrame.getMethodName();
} 
```

并从需要知道调用者是谁的方法中调用该方法。但是，请注意：列表中调用帧的索引可能会因 JVM 而异！这完全取决于在您到达生成跟踪点之前 getStackTrace 中有多少层调用。一个更健壮的解决方案是获取跟踪，并对其进行迭代以查找 getCallingMethodName 的框架，然后再往前走两步以找到真正的调用者。

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2009-06-03T14:16:12.023

您可以获得这样的堆栈跟踪：

```
Throwable t = new Throwable();
t.printStackTrace(); 
```

如果要访问帧，可以使用 t.getStackTrace() 获取堆栈帧数组。

请注意，如果热点编译器一直忙于优化，这个堆栈跟踪（就像任何其他的一样）可能会丢失一些帧。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-01-31T15:06:20.750

注意 Thread.dumpStack() 实际上抛出了一个异常：

```
new Exception("Stack trace").printStackTrace(); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-12-07T14:16:03.140

Java 9 引入了[`StackWalker`](https://docs.oracle.com/javase/9/docs/api/java/lang/StackWalker.html)用于遍历堆栈的类和支持类。

以下是 Javadoc 中的一些片段：

> 该[`walk`](https://docs.oracle.com/javase/9/docs/api/java/lang/StackWalker.html#walk-java.util.function.Function-)方法为当前线程打开一个顺序流，[`StackFrames`](https://docs.oracle.com/javase/9/docs/api/java/lang/StackWalker.StackFrame.html)然后应用给定的函数来遍历`StackFrame`流。该流按顺序报告堆栈帧元素，从表示生成堆栈的执行点的最顶部帧到最底部帧。当`StackFrame`walk 方法返回时，流将关闭。如果试图重用关闭的流，`IllegalStateException`将被抛出。
> 
> ...
> 
> 2.  要快照当前线程的前 10 个堆栈帧，
>     
>     
>     
>     ```
>     List<StackFrame> stack = StackWalker.getInstance().walk(s ->
>      s.limit(10).collect(Collectors.toList())); 
>     ```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-06-03T16:04:38.690

您还可以通过向进程发送 QUIT 信号向 JVM 发送信号以在正在运行的 Java 进程上执行 Thread.getAllStackTraces()。

在 Unix/Linux 上使用：

`kill -QUIT process_id`，其中 process_id 是您的 Java 程序的进程号。

在 Windows 上，您可以在应用程序中按 Ctrl-Break，尽管您通常不会看到这个，除非您正在运行控制台进程。

JDK6 引入了另一个选项 jstack 命令，它将显示计算机上任何正在运行的 JDK6 进程的堆栈：

`jstack [-l] <pid>`

这些选项对于在生产环境中运行且不能轻易修改的应用程序非常有用。它们对于诊断运行时死锁或性能问题特别有用。

[http://java.sun.com/developer/technicalArticles/Programming/Stacktrace/](http://java.sun.com/developer/technicalArticles/Programming/Stacktrace/) [http://java.sun.com/javase/6/docs/technotes/tools/share/jstack.html](http://java.sun.com/javase/6/docs/technotes/tools/share/jstack.html)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-04-04T10:50:27.040

如果您需要捕获输出

```
StringWriter sw = new StringWriter();
new Throwable("").printStackTrace(new PrintWriter(sw));
String stackTrace = sw.toString(); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2020-05-02T08:28:11.973

[Rob Di Marco](https://stackoverflow.com/a/945020/595305)的答案是迄今为止最好的，如果您愿意输出到`stderr`.

如果您想`String`按照正常跟踪使用新行捕获到 a ，您可以执行以下操作：

```
Arrays.toString(Thread.currentThread().getStackTrace()).replace( ',', '\n' ); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-03T15:38:27.420

[HPROF Java Profiler](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr008.html)

您甚至不必在代码中执行此操作。您可以将 Java HPROF 附加到您的进程，并随时点击 Control-\ 以输出堆转储、正在运行的线程等。. . 无需破坏您的应用程序代码。这有点过时了，Java 6 带有 GUI jconsole，但我仍然发现 HPROF 非常有用。

# .net - .NET Framework 3.5 SP1 语言包 ClickOnce 包

> ID：944997
> 
> 赞同：2
> 
> 时间：2009-06-03T14:12:15.557
> 
> 标签：.net, .net-3.5, clickonce, bootstrapper, prerequisites

Visual Studio 2008 SP1 不为 .NET Framework 3.5 SP1 提供任何语言包先决条件。

我的研究结果是：创建安装语言包的自定义引导程序包应该很容易。我已经下载了[Bootstrapper Manifest Generator](http://code.msdn.microsoft.com/bmg)。它确实是一个创建自定义包的好工具，但我不知道语言包包的正确参数是什么（例如重启模式、安装时间和大小、安装条件、退出代码等）。

.NET 语言包是否有现成的引导程序包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T14:26:50.457

本页详细介绍了 .NET Framework 3.5 的部署

[http://msdn.microsoft.com/hi-in/library/cc160716(en-us).aspx](http://msdn.microsoft.com/hi-in/library/cc160716(en-us).aspx)

由于您使用各种语言，您应该使用 dotnetfx35setup.exe 可执行文件进行安装，因为它会检测到正确的语言包并下载它们。您必须寻找合适的 HomeSite URL 来下载它，但应该不难找到。

该页面应详细说明启动和运行它所需的所有命令行开关。

Bootstrapper Manifest Generator 很不错，但似乎有时会出现问题。您可能希望将 .NET Framework 3.5 的现有英语引导程序作为您的多语言引导程序的模板。

关于退出代码，我相当肯定 dotnetfx35setup.exe 网络引导程序使用与 dotnetfx35.exe 相同的代码。*****