# StackOverflow 问答 10031000-10031999

# c++ - regsvr32 导致 CDatabase 析构函数在使用 SQL Native Client (v2005) 时挂起

> ID：10031000
> 
> 赞同：2
> 
> 时间：2012-04-05T14:56:42.130
> 
> 标签：c++, sql-server, com+, regsvr32

我在 Visual Studio 2005 中有一个 C++ COM dll，它使用 SQL Server (v2000) 驱动程序连接到数据库 (SQL Server 2005)。我们的 DB 团队最近要求我们将 SQL Server 驱动程序从 SQL Server (v2000) 升级到 SQL Native Client (v2005) 或 SQL Server Native Client 10.0 (v2007)。

应用程序构建得很好。然后，当我在 DLL 上执行 regsvr32 命令为 COM 注册它时，应用程序挂起。当我通过代码进行调试时，我发现在主 APP（从 CWinApp 继承）的 InitInstance 中，应用程序使用存储过程将启动消息记录到数据库中。

调试该日志消息显示创建了一个执行存储过程的 CDatabase 对象。存储过程正确执行；消息被记录到数据库并且执行返回到 C++ 代码。然后，当 CDatabase 对象关闭时（通过调用 CDatabase::Close()），应用程序挂起。我调试了 CDatabase 代码，发现在 CDatabase::Close() 中调用了

```
AFX_SQL_SYNC(::SQLFreeConnect(m_hdbc)); 
```

正是在这个调用中，执行不返回。调试器返回到（运行）状态，没有任何返回。当我尝试执行 Debug -> Break All 时，我收到一条消息，指出没有正在运行的线程并且进程可能已死锁。

这仅在调用 REGSVR32 期间发生。如果我为 regsvr32 部分选择 Sql Server 驱动程序，然后将其更改为 Sql Native Client 或 Sql Server Native Client v10.0，则应用程序工作正常。

我也在与微软合作，但我们的时间不多了。任何帮助或想法将不胜感激！

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:32:48.647

下面链接中的人似乎通过在他的主应用程序中动态加载 ODBC dll 而不仅仅是在 DLL 中解决了这个问题。这可以以某种方式适用于您的情况吗？

[SQLFreeHandle 死锁问题？](http://us.generation-nt.com/answer/sqlfreehandle-deadlock-issue-help-35637822.html)

# ajax - ajax 视图上的 login_required 装饰器返回 401 而不是 302

> ID：10031001
> 
> 赞同：15
> 
> 时间：2012-04-05T14:56:47.277
> 
> 标签：ajax, django

在编写一些视图来响应 ajax 请求时，我发现 login_required 装饰器总是为未经过身份验证的用户返回 302 状态代码有点奇怪。由于这些视图是 ajax 视图，这似乎有点不合适。我不希望用户在这种情况下登录，但我希望 Django 告诉客户端访问这样的视图需要身份验证（我认为 401 应该是正确的状态码）。

为此，我开始编写自己的装饰器 login_required_ajax，但不知何故，这超出了我的技能范围。到目前为止，这是我想出的：

```
def login_required_ajax(function=None,redirect_field_name=None):
    """
    Just make sure the user is authenticated to access a certain ajax view

    Otherwise return a HttpResponse 401 - authentication required
    instead of the 302 redirect of the original Django decorator
    """
    def _decorator(view_func):
        def _wrapped_view(request, *args, **kwargs):
            if request.user.is_authenticated():
                return view_func(request, *args, **kwargs)
            else:
                return HttpResponse(status=401)

        if function is None:
            return _decorator
        else:
            return _decorator(function) 
```

在视图上使用此装饰器时，一旦我尝试访问站点上的任何页面，就会收到 ViewDoesNotExist 异常。

我首先认为问题可能是当用户未通过身份验证时直接返回 HttpResponse ，因为响应对象不是可调用的。但是，只要我不尝试访问有问题的视图，装饰器就应该工作，不是吗？如果这真的是症结所在，我该如何编写一个装饰器来返回一个状态码为 401 的 HttpResponse？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-05T15:10:14.743

这是一个很好的尝试。这是我发现的几个问题：

1.  您的`_decorator`函数应该返回`_wrapped_view`.
2.  您的块的缩进`if function is None`有点偏离 -`login_required_ajax`函数需要返回修饰函数。

这是进行了这些更改的装饰器：

```
def login_required_ajax(function=None,redirect_field_name=None):
    """
    Just make sure the user is authenticated to access a certain ajax view

    Otherwise return a HttpResponse 401 - authentication required
    instead of the 302 redirect of the original Django decorator
    """
    def _decorator(view_func):
        def _wrapped_view(request, *args, **kwargs):
            if request.user.is_authenticated():
                return view_func(request, *args, **kwargs)
            else:
                return HttpResponse(status=401)
        return _wrapped_view

    if function is None:
        return _decorator
    else:
        return _decorator(function) 
```

# java - 在 JPanel 中添加一些 JPanel（一个在另一个之下）

> ID：10031004
> 
> 赞同：4
> 
> 时间：2012-04-05T14:57:02.563
> 
> 标签：java, swing, layout, awt, jpanel

我想将一些面板（具有不同的高度）添加到另一个面板（`JPanel`在 a 中`JScrollPane`），如下图所示：

![在此处输入图像描述](../Images/7c124ddaa72748aaab94cba673447565.png)

我应该使用哪种布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:18:23.590

看起来很适合[`BoxLayout`](http://docs.oracle.com/javase/7/docs/api/javax/swing/BoxLayout.html)。另请参阅[A Visual Guide to Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)以获得 J2SE 中可用布局的快速“鸟瞰图”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:03:38.757

可能最简单的是使用 flowlayout 并相应地设置 JPanel 的首选高度[http://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html)

如果您打算对您的布局做更多的事情，我建议您使用更高级的第三方布局之一，例如 JGoodies 表单布局[http://www.jgoodies.com/freeware/forms/](http://www.jgoodies.com/freeware/forms/)您需要了解更多，但比您具有良好的灵活布局，可以解决您将看到的大多数现实世界问题。

# java - 使用 UNIX 命令和变量在 Java 中循环

> ID：10031007
> 
> 赞同：1
> 
> 时间：2012-04-05T14:57:09.117
> 
> 标签：java, unix, aix

全部。

我是 Java 的新手，但由于我有很多时间在 UNIX（Linux 和 AIX）中编写脚本，我被要求修复一个程序，该程序在特定程序中打开和保存文件列表。

我从 UNIX 获得的变量是文件的路径名。由于它们有些敏感的性质，我已经用通用名称替换了变量。请记住，该程序不可移植，它只能在这台机器上运行。

我需要构建一个while循环，它将从命令“ ps -ef | grep programname | grep -v grep | wc -l ”中获取输出，并确保在退出循环之前我有两个“programname”实例。具有“构建while循环的行是我想要的地方，之后的代码由鼠标移动和按键组成。

变量“countvariable”仅在我需要它来测试循环时才存在，因此可能没有必要

```
/*    */ import java.awt.AWTException;
/*    */ import java.awt.Robot;
/*    */ import java.io.IOException;
/*    */ 
/*    */ public class auto
/*    */ {
/* 7  */   static final String pathvariable1 = "pathvariable1";
/* 8  */   static final String pathvariable2 = "pathvariable2";
/* 9  */   static final String pathvariable3 = "pathvariable3";
/* 10 */   static final String countvariable = "countvariable";
/* 11 */   static final String countvariable = System.getenv("countvariable");
/* 12 */   static final String ENVNAME = System.getenv("pathvariable1");
/* 13 */   static final String pathvariable2 = System.getenv("pathvariable2");
/* 14 */   static final String pathvariable3 = System.getenv("pathvariable3");
/*    */   public static void main(String[] paramArrayOfString) {
/*    */     try {
/* 13 */       String[] arrayOfString = { ENVNAME +"/bin/myprogram","-G","pathvariable2/pathvariable3/scenario.xml" };
/* 14 */       Runtime localRuntime = Runtime.getRuntime();
/* 15 */       Process localProcess = localRuntime.exec(arrayOfString);
/*    */     }
/*    */     catch (IOException localIOException)
/*    */     {
/* 19 */       localIOException.printStackTrace();
/*    */     }
/*    */     try
/*    */ //Build while loop here to wait for 2 program incidents (ps -ef | grep   programname...
/* 23 */       Robot localRobot = new Robot();
/* 24 */       localRobot.delay(5000);
/* 25 */       localRobot.keyPress(10);
///More robot stuff goes here....
/*    */     }
/*    */     catch (AWTException localAWTException) {
/* 60 */       localAWTException.printStackTrace();
/*    */     }
/*    */   }
/*    */ }
/* Location:    
 * Qualified Name:     auto
 * JD-Core Version:    0.6.0
 */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:44:16.643

您可以尝试此代码并验证它是否有效。

```
 ProcessBuilder builder = new ProcessBuilder("ps", "-ef");
    builder.redirectErrorStream(true);
    Process process = builder.start();
    BufferedReader reader = new BufferedReader(new InputStreamReader(
            process.getInputStream()));
    String line;
    while ((line = reader.readLine()) != null) {
        out.println("->" + line);
    } 
```

因为您需要 grep，所以我建议您使用以下命令创建自己的 bash 脚本：

```
 ps -ef | grep programname | grep -v grep | wc -l 
```

只需将第一行替换为::

```
 ProcessBuilder builder = new ProcessBuilder("/path/to/script/scriptName", "param1Optional"); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:24:02.740

您知道如何使用 Thread.sleep 创建一个循环并等待。然后剩下的问题是寻找与模式匹配的所有进程并确保结果是你得到的。

根据以下解析示例，您可以按照自己的方式运行 ps： [https](https://stackoverflow.com/a/2218237/885650) ://stackoverflow.com/a/2218237/885650 。不过，我建议使用 pgrep（可能使用 -f），而不是双 grep。

但是，对于您的用例，编写一个简短的 shell 脚本可能更明智，如果事情如您所愿，则返回代码为 0，否则为 1。

```
 #!/bin/bash
  [ "$(pgrep programname |wc -l)" == "2" ] && exit 0
  exit 1 
```

您可以将其放入您的 while 循环中，然后使用 Process.waitFor。这使您免于使用 Java 进行所有解析。您可能很想将 while 循环放在 shell 脚本中。这样做的缺点是您在超时机制中不够灵活。

最好的选择是，如果您的主程序 (/bin/myprogram) 会发出信号，表明它直接达到了您正在寻找的状态，例如通过创建某个文件、打开端口等。

附带说明一下，Java 不允许您探索 myprogram 进程的子进程，因为这不是跨平台的概念。

# php - 如何检查php中会话丢失的原因是什么？

> ID：10031008
> 
> 赞同：2
> 
> 时间：2012-04-05T14:57:12.953
> 
> 标签：php, session

用户登录时我已经存储了用户ID，但是我发现它有时会丢失，会话丢失的常见原因是什么？

我已经使用了超时插件（空闲一段时间会警告并帮助您注销）并且有一些 javascript 可以在页面之间传输

`You have edited the list. <a href='view.php' onClick='window.location.reload()'>Back</a></div>`

```
<input type="button" value="Back" onclick="location.href='add.php'" class="btn" style="width:100px"/> 
```

并取消设置会话，但这不应该是原因吗？

```
$(function(){
  $("#closeTab").click(function() {
            $.post("clear.php",function(data){
             window.parent.$('#tt').tabs('close','Create List'); 
             location.reload();     
      });
  });
}); 
```

清除.php

```
 if (isset($_SESSION['lname']))
unset($_SESSION['lname']);
if (isset($_SESSION['creminder']))
unset($_SESSION['creminder']);
if (isset($_SESSION['subscribe']))
unset($_SESSION['subscribe']);
if (isset($_SESSION['unsubscribe']))
unset($_SESSION['unsubscribe']); 
```

这用于存储会话

```
$user=$_SESSION['username']; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:07:27.683

PHP 以这种方式管理会话：

当 session_start() 在网络服务器上创建一个文件。该文件是一个文本文件，例如 session1234。在用户浏览器上设置了一个 cookie，该 cookie 包含值“session1234”。每次用户调用同一域上的页面时，浏览器都会静默发送该 cookie。

这样用户就被识别出来了，用户的会话数据就从服务器上的会话文件中取出来了。

会话过期的原因：

1.  通常当从 web 应用程序注销时，我们使用 session_destroy() 来销毁服务器 session1234 上的文件。因此，如果用户再次使用 cookie 内容 session1234 调用站点：服务器上不存在文件 session1234（已通过注销删除），则用户未通过身份验证
2.  发生超时：文件 session1234 从服务器默认 20 分钟删除（可在 php.ini 中配置）。如果用户再次调用该站点，与以前相同。每次用户采取行动（调用服务器）时，服务器都会更新会话文件的生存时间
3.  用户清除浏览器 cookie（如果有人想清除浏览器的历史记录，可能会发生这种情况）：cookie 丢失，浏览器不发送 cookie 服务器没有收到它并且无法验证用户身份

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:22:03.770

PHP 处理会话非零到期的方式也有一个缺点。基本上，如果您将会话 cookie 设置为在 15 分钟内过期，它将在会话开始后 15 分钟过期......它不会刷新该过期时间。

要运行在用户“做某事”时刷新的会话，您需要将到期日期存储为会话变量，并在启动会话时检查该变量并在必要时重新生成会话。

我之前尝试过更新会话 cookie 中的到期日期，当会话开始时……[它导致了一些有趣的问题](https://webmasters.stackexchange.com/questions/21133/session-cookie-being-dropped-when-moving-under-the-ssl)。

这是极不可能的，但有可能会话垃圾收集的生命周期也低于 cookie 到期的生命周期。有很多[ini 变量](http://php.net/manual/en/ini.core.php)可以处理其中一些常见的会话问题，您可以通过在运行时设置它们来覆盖其中的大部分：

```
ini_set('session.gc_maxlifetime' 900);
ini_set('session.cookie_lifetime' 0); //ALWAYS set this to 0 - so the cookie will only expire when the browser is closed
ini_set('session.cookie_domain', '.domain.ext'); //always start with a "." if you want to cover multiple sub-domains
ini_set('session.cookie_path', '/'); //always use "/" unless you want to limit the cookie to a specific path "/admin" for instance 
```

就个人而言，我会将所有会话处理内容放入（单例模式）类中，并在构造函数中处理验证和到期。

# c++ - 使用 C、C++ 和 C++/CLI 项目解决 LNK2005

> ID：10031010
> 
> 赞同：0
> 
> 时间：2012-04-05T14:57:15.370
> 
> 标签：c++, c, visual-c++, linker

我在尝试构建时遇到链接器错误（有一堆......这是一个这样的）：

`error LNK2005: "public: int __cdecl std::ios_base::rdstate(void)const " (?rdstate@ios_base@std@@QEBAHXZ) already defined in msvcprt.lib(MSVCP90.dll)`

我有一个 C 项目：

*   配置类型：静态库 (.lib)
*   MFC 的使用：使用标准 Windows 库
*   使用 ATL：不使用 ATL
*   运行时库：多线程 DLL (/MD)

我有一个 C++ 项目：

*   配置类型：动态库 (.dll)
*   MFC 的使用：使用标准 Windows 库
*   ATL 的使用：到 ATL 的动态链接
*   运行时库：多线程 DLL (/MD)

我有一个依赖于上述两个项目的 C++/CLI 项目：

*   配置类型：动态库 (.dll)
*   MFC 的使用：使用标准 Windows 库
*   ATL 的使用：到 ATL 的动态链接
*   运行时库：多线程 DLL (/MD)
*   公共语言运行时支持 (/clr)
*   这链接到 C 项目 .lib
*   这有一个对 C++ DLL 的项目引用

这些是使用 Visual 2010 构建的，但使用 v3.5 工具集（因此使用 9.0）。

我见过的大多数解决方案都表明运行时库设置不同步。这不是这里的情况，它们都是多线程 DLL。它们都是在 Release x64 中构建的。

这些项目设置有什么问题吗？我可以分享更多相关设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:09:56.193

我建议在任何地方都使用相同的设置，而不是混合使用（静态库和 dll 项目）。如果我没记错的话，我遇到了同样的问题。

# javascript - 如何获取函数名称和 getElementById 中的变量

> ID：10031011
> 
> 赞同：2
> 
> 时间：2012-04-05T14:57:21.033
> 
> 标签：javascript, function, while-loop, do-while

嗨我有一个while循环：

```
var i = 0;

while(i < 20)
{
    function showi()
    {
        document.getElementById('tablei').style.display = 'block';
        document.getElementById('hidei').style.display = 'block';
        document.getElementById('showi').style.display = 'none';
    }

    function hidei()
    {
        document.getElementById('tablei').style.display = 'none';
        document.getElementById('hidei').style.display = 'none';
        document.getElementById('showi').style.display = 'block';
    }

 i++;

} 
```

我想知道如何让 i 变量显示在函数名称和 getElementById 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:58:54.467

```
 function show(i)
    {
        document.getElementById('table' + i).style.display = 'block';
        document.getElementById('hide' + i).style.display = 'block';
        document.getElementById('show' + i).style.display = 'none';
    }

    function hide(i)
    {
        document.getElementById('table' + i).style.display = 'none';
        document.getElementById('hide' + i).style.display = 'none';
        document.getElementById('show' + i).style.display = 'block';
    } 
```

最好创建一个函数，例如“show(1)”或“show(42)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:01:43.297

您想使用字符串连接运算符“+”。

也就是说，你可以写：

```
'table' + i 
```

如果你遍历不同的 i 值，你会得到你想要的变量名：

```
table0
table1
table2
table3
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:03:19.180

我猜你想创建

```
show1(), show2(), show3(), etc... 
```

用这个循环？就目前而言，您只是一遍又一遍地重新定义相同的功能。

您不能创建动态函数名称，例如

```
function show + i() { ... } 
```

不可能。您可以使用 eval 调用来伪造它：

```
eval('function show' + i + '() { ... }'); 
```

但是 eval() 是完全邪恶的，不应该使用。

我建议使用数组进行以下解决方法：

```
show = [];
while(i < 20) {
   show[i] = function() { ... }
}

show[7](); // execute the #7 function 
```

However, this is still very ugly. Why not simply pass `i` as a parameter?

```
function show(i) {
   document.getElementById('table' + i).style.display = 'block';
} 
```

will do exactly what you want, and still be only one single function, not the 20+ you're trying to define.

# telerik - Telerik MVC 图表：如何使用 javascript 在客户端更改数据绑定模式？

> ID：10031012
> 
> 赞同：1
> 
> 时间：2012-04-05T14:57:21.667
> 
> 标签：telerik, telerik-mvc

我有一个 Telerik MVC 条形图，它在启动期间出于性能目的使用服务器端绑定。页面加载后。我想将数据绑定更改为 AJAX，以便图表可以更新自身以响应其他事件。可以使用javascript更新数据绑定模式吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:53:53.440

您可以将要初始加载的值传递给 Chart 构造函数，还可以定义 ajax 绑定和选择方法。之后，一旦页面加载完毕，您可以使用以下代码刷新图表

```
<code>
   $('#chartID').data().tChart.rebind()
</code> 
```

# jquery - jQuery UI 对话框 - 等待关闭动画完成

> ID：10031024
> 
> 赞同：1
> 
> 时间：2012-04-05T14:57:57.690
> 
> 标签：jquery, jquery-ui, jquery-dialog

在我的网站上，我有两个 jQuery UI 对话框。一个对话框只显示 gif 图像（工作动画）。我在做 AJAX 请求之前调用它。AJAX 请求完成后，我需要关闭第一个对话框，然后显示第二个。我这样做：

```
$("#dialog-working").dialog("close");
$("#dialog").dialog("open"); 
```

但这显然行不通。当我这样做时，两个对话框都可见一段时间。

因此，我正在寻找一种仅在第一个对话框关闭后（在他的动画完成后）打开第二个对话框的方法。你能帮助我吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:03:22.203

你的questin不是很清楚。在对话框关闭后做某事：

```
$('#dialog').bind('dialogclose', function(){
    //Do something
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:03:09.100

查看对话框关闭事件。

[http://jqueryui.com/demos/dialog/#event-close](http://jqueryui.com/demos/dialog/#event-close)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:26:31.380

[检查这个](http://jsfiddle.net/lazydot/nruMX/)

这里：

```
<div class="demo">
  <div id="dialog">
    <p>This is the default dialog</p>
  </div>
  <div id="opener">Click to open</div>
</div> 
```

和这里：

```
$(document).ready(function() {
$("#dialog").dialog({
    autoOpen: false,
    title: 'My dialog title'
});

$("#dialog").dialog();

/* this one beeing of interest for you */
$( "#dialog" ).dialog({
   beforeClose: function(event, ui) {
       alert("dialog is gonna be closed now");
   }
});

$('#opener').click(function() {
    $("#dialog").dialog('open');       
    return false;
});   

}); 
```

# android - Android Asset Studio：使用图像创建图标不起作用

> ID：10031032
> 
> 赞同：9
> 
> 时间：2012-04-05T14:58:22.763
> 
> 标签：android

还有其他人有这个问题吗？[http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)当我尝试使用图像并上传图像时，它只是变成了一个灰色框。我已经尝试了所有不同的浏览器，但仍然没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T22:27:05.623

你可能有两个问题之一。

1) 要验证图像是否正在处理，请确保从主屏幕中选择“启动器图标”作为测试。**其他图标不是全彩色**的，它们是灰色或黑色或白色。例如，操作栏的图标应该是灰色的（取决于主题）。请参阅[操作栏设计指南](http://developer.android.com/design/patterns/actionbar.html)。如果您看到您的图标，但它是方形而不是原生“形状”，则您遇到了第二个问题。

2) 使用 gif（或 png）作为您的原始文件，并确保在创建时设置透明颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:00:21.810

该工具在几种浏览器中对我来说效果很好。我建议您尝试使用其他浏览器，并确保您的位图没有损坏。

# xcode4.2 - 故事板和自定义容器视图控制器

> ID：10031035
> 
> 赞同：16
> 
> 时间：2012-04-05T14:58:42.650
> 
> 标签：xcode4.2, uistoryboard, uicontainerview

我正在根据[苹果规范](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)创建一个自定义容器视图。我想使用情节提要连接三个*静态*子 UIViewController。**情节提要**中是否有一种简单的方法可以通过`Relationship`情节提要中的 UINavigationController 进行连接？

![NavigationController '关系'](../Images/22dc4c47d01fcfbfd0a001f50d9e2644.png)

根据我的研究，这似乎是不可能的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-25T19:28:25.867

可以将**容器**视图控制器链接到孩子。事实上，这样做非常容易。您打开对象库，在搜索字段中键入“容器”，然后查找对象“容器视图”。它看起来像这样：

![在此处输入图像描述](../Images/46a7a4ae4931782b9f290d8ca981b73c.png)

将容器视图拖到视图控制器的内容视图中。

然后，您从容器视图中控制并拖动到您希望容器视图托管的另一个视图控制器上。IB 为你设置了一个“embed segue”。当父视图控制器的内容视图被加载时，嵌入 segue 被调用。embed segue 设置父/子视图控制器关系并执行您需要的内务处理。这很容易而且无痛。

为每个嵌入 segue 调用您的 prepareForSegue 方法。您可以像其他 segue 一样为嵌入 segue 分配唯一标识符，然后使用 prepareForSegue 中的 segue ID 为子视图控制器进行额外设置。

看看 github 上的这个项目，它展示了如何使用 embed segues 将 2 个静态 UITableViewControllers 包含在使用容器视图和嵌入 segues 的父级中。该项目为父子 VC 建立自定义协议以相互通信。在 prepareForSegue 方法中，父级保存指向两个子 VC 的指针，并将自己设置为两个子 VC 的代表，以便子级可以与父级通信。

您可以在此链接中找到该项目： **[https ://github.com/DuncanMC/test](https://github.com/DuncanMC/test)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T11:14:17.790

您可以为此使用容器视图。Container View 会自动创建与新视图控制器的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:02:21.160

您是否尝试过继承 UITabbarcontroller 或 UINavigationController？

您可以创建从其中之一扩展的自定义类，然后将其设置在情节提要中 - 从而允许您创建相同的关系。然后您可以隐藏标签栏并添加您想要的任何功能。

![在此处输入图像描述](../Images/15b40428a3daeb2633e70bfa9758298a.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T22:39:47.703

我没有这样做，但这是一个有趣的问题。在尝试将它们关联到情节提要中之前，您是否在容器控制器中定义了子视图控制器（您可能正在这样做 - 没有显示代码）？从文档中听起来这就是您需要做的 - 这可能与您可以将它们拖入的通用类不同。

> 为了让 iOS 将事件正确地路由到子视图控制器和这些控制器管理的视图，您的容器视图控制器必须在将子视图控制器添加到视图层次结构之前将子视图控制器与其自身关联。

无论如何 - 一个猜测......

# jquery - 在 jquery 中创建输入字段的克隆并更新字段 ID

> ID：10031041
> 
> 赞同：0
> 
> 时间：2012-04-05T14:59:13.063
> 
> 标签：jquery, forms, input, clone

我正在尝试动态添加我能够做到的输入字段。但我不确定如何在输入字段中添加新名称。我希望它是一个递增的数字。所以第一组输入字段将是 input1 并且创建的每个克隆都会增加数字：input1、input2、input3 等。有谁知道我该怎么做？这是jsfiddle：http: [//jsfiddle.net/liveandream/Xs7m8/](http://jsfiddle.net/liveandream/Xs7m8/)

这是我的代码：

HTML：

```
<form action="#" method="post">
<div class="avail">
        <div class="roomType">
          <p>Tipo de Habitación:<br />
        <input type="text" name="roomType" /></p></div>
        <div class="roomType">
          <p><span class="small">Fecha de inicio:</span><br />
        <input type="text" name="Date1" /></p></div>
        <div class="roomType"><p><span class="small">Fecha de Termino:</span><br />
        <input type="text" name="Date2" /></p></div>
        <div class="roomType">
          <p>Tarifa:<br />
        <input type="text" name="roomRate" /></p></div><br clear="all" />
</div>
<input type="submit" value="+" id="copy" />
<input type="submit" value="Add to Database" name="add" /> 
```

还有我的jQuery：

```
$("#copy").click(function(e) {
       $(".avail").clone().removeAttr('id').insertBefore(this);
       e.preventDefault();
    }); 
```

提前感谢任何愿意提供帮助的人！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:08:34.807

（删除了我最初的答案 - 忽略了 HTML 中的现有 ID）

您可以按房间对帖子结果进行分组。

```
results = {};
$('form').submit(function(e) {
    e.preventDefault(); // prevent automatic submitting

    $('.avail').each(function(index) {
        // Here your have the gather the fields and values in result array;

        results['room'+index] = result; // add array with results of one room to result
    });

    // Post the result
    $.post($(this).attr('action'), results, function(result) {
         // callback
    });
}); 
```

# windows-phone-7 - WP7 了解用户是否对应用进行了评分或评论

> ID：10031045
> 
> 赞同：2
> 
> 时间：2012-04-05T14:59:26.930
> 
> 标签：windows-phone-7, review

我已经设法创建功能来检查用户是否在 Windows Phone 7 上使用试用/演示或完整/购买的应用程序。

是否有可能以某种方式知道用户是否评论或评价了当前的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:02:42.720

我不相信这是目前可能的，您可能对这篇关于提醒用户为您的应用程序留下评论的博客文章感兴趣：-

[http://igrali.wordpress.com/2011/12/24/bug-prompt-users-to-leave-you-reviews-and-rates-on-windows-phone-marketplace/](http://igrali.wordpress.com/2011/12/24/bug-prompt-users-to-leave-you-reviews-and-rates-on-windows-phone-marketplace/)

[http://roybott.com/blog/getting-ratings-for-your-wp7-app.html](http://roybott.com/blog/getting-ratings-for-your-wp7-app.html)

您可以尝试以下方法：-

[http://mikaelkoskinen.net/post/Marketwatcher-WP7-Class-Library-and-Sample-Application-for-Fetching-Application-Reviews-from-the-Marketplace.aspx](http://mikaelkoskinen.net/post/Marketwatcher-WP7-Class-Library-and-Sample-Application-for-Fetching-Application-Reviews-from-the-Marketplace.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:40:31.803

我认为这样做的唯一方法是在隔离存储中保存一个值，例如：hasRated，它的值最初为false。

然后当用户按下菜单项时：评价我！该值将更改为 true。

在决定是否显示提醒消息之前，会检查该值。

不幸的是，您将无法检测到用户是否按下了“给我评分！” 然后在没有评分的情况下按下返回按钮，他将被视为他已经评分。

# firefox - 以最少的用户干预安装多个 Firefox 扩展或插件的方法？

> ID：10031046
> 
> 赞同：3
> 
> 时间：2012-04-05T14:59:28.190
> 
> 标签：firefox, firefox-addon, batch-processing, user-friendly, unattended-processing

# 问题：

我如何将多个 Firefox 扩展安装到新的 Firefox v11+ 配置文件中，除了验证安全约束的最低限度（例如，单个“恐慌”提示）之外，用户浪费的动作量（减少鼠标点击和键盘按下）最少？

# 约束：

1.  该方法在 Firefox 的 Linux 和 Windows 安装上应该完全相同，并且不需要管理员权限（Windows 可能例外）或 root 权限（Firefox 本地安装在用户主目录中，而不是在`/bin`.
2.  通过当前使用的任何机制自动更新的任何扩展都应继续更新这些扩展。（keyconfig 扩展（见下文）可能会例外，如果它没有在新修订时自动更新，但我不知道是否是这种情况）。
3.  该方法应该适用于未出现在工具/附加组件下的“获取附加组件”搜索中的扩展（例如，下面“几乎”解决方案部分中提到的[keyconfig ）。](http://forums.mozillazine.org/viewtopic.php?t=72994)

# “几乎”解决方案：

以下是我尝试过的各种事情，但并不完全符合需要。这里的关键限制是减少我在安装 Firefox 扩展时浪费的动作量。

## 命令行方式：

我几乎可以通过调用 Firefox 来获得我想要的，`.xpi`通过这种类型的命令行，使用存储在本地文件系统上的文件的完全限定路径（仅在 Linux 64 位机器上测试；尚未在 Windows 上但也可以在那里工作） ：

```
firefox some_extension1.xpi \
  some_extension2.xpi \
  some_extension3.xpi \
  ... \
  some_extensionN.xpi 
```

`some_extensionN.xpi`我希望安装的特定扩展的完全限定路径在哪里。但这不可行，因为 Firefox 会*多次*提示，每个要安装的扩展程序一次，而只需要一个安全提示。多个提示是一个显示停止器。

## 大规模扩展方式：

[Massive Extender](https://addons.mozilla.org/en-us/firefox/addon/massive-extender/)扩展让我很高兴，但由于[放弃了对 AddOn Collections 扩展的支持](http://bit.ly/Az5PDG)而变得无法运行。等待某人开始支持 Firefox Sync 中的扩展可能不是一种选择：我相信他们将禁止同步未通过某些官方渠道注册的扩展，例如从工具>插件菜单搜索中显示的扩展Firefox 中的条目。[keyconfig](http://forums.mozillazine.org/viewtopic.php?t=72994)扩展似乎不是通过官方渠道管理的一个非常有用的扩展示例。

## FEBE 扩展方式：

[FEBE 扩展](https://addons.mozilla.org/en-US/firefox/addon/febe/)很接近，但也不可行，因为它在尝试从 Box.net 恢复时会导致 Firefox 崩溃（截至 2014 年 4 月 5 日）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T16:58:08.510

您应该创建一个[多项目包](https://developer.mozilla.org/en/Multiple_Item_Packaging)。您基本上压缩了一个`install.rdf`文件和几个 XPI 文件，并将存档重命名为`something.xpi`. 该`install.rdf`文件应如下所示：

```
<RDF xmlns="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns:em="http://www.mozilla.org/2004/em-rdf#">

  <Description about="urn:mozilla:install-manifest">
    <em:id>foobar@example.com</em:id>
    <em:type>32</em:type>
    <em:targetApplication>
      <Description>
        <!-- Firefox -->
        <em:id>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</em:id> 
        <em:minVersion>10.0</em:minVersion>
        <em:maxVersion>11.*</em:maxVersion>
      </Description>
    </em:targetApplication>
  </Description>
</RDF> 
```

您可能希望为您的捆绑包选择一些`foobar@example.com`与兼容的 Firefox 版本不同的 ID，并调整它。然后你可以简单地触发这个包的安装，它会在里面安装所有的扩展。

*重要提示*：`install.rdf`必须位于 ZIP 存档的顶层，而不是子目录内。

# javascript - 如何使用后退按钮向 jQuery UI 选项卡添加历史记录

> ID：10031050
> 
> 赞同：2
> 
> 时间：2012-04-05T14:59:34.363
> 
> 标签：javascript, jquery

我有一个带有 5 个选项卡（jquery ui）的 PHP 文件。选项卡四和五包含表格。表单和选项卡工作正常 - 期望这一点：我提交表单（POST 方法不是 XHR），然后单击鼠标右键（Firefox 和 IE 行为相同）并选择返回，然后通过鼠标单击输入的页面中选择选项卡五表单数据仍然可用。

我尝试建立一个链接，这对用户来说更方便。

```
<a href="#" onClick='history.back();$("#tabs").tabs("select","4");'>modify</a> 
```

如果点击我的修改链接，它仍然会跳回到标签一，标签五中的表单字段是空的。

我阅读了几篇关于 jQuery UI 选项卡和后退按钮的文章，但似乎都没有解决我的问题。

我的错在哪里，手动执行此步骤与我与 JS 的链接有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:13:04.920

一旦你离开它正在运行的页面，Javascript 就会停止执行——你的处理程序的后半部分`onClick`永远不会运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T16:09:46.640

此处的评论之后是一个功能，它将记住您选择的最后一个选项卡。它确实依赖于您使用设置的“返回”按钮。

据我所知，您会发现的问题是您无法拦截单击浏览器后退按钮的用户。我发现在网站上创建一个明显而清晰的后退按钮可以完成这项工作，到目前为止我在我们网站上的反馈似乎支持了这一点。

功能是：

```
$(function() {
    var $previousTab = 0;
    var $backButtonUsed = false;    

    // Initialise tabs
    $("#tabs").tabs();

    $("#tabs").bind("tabsselect", function(event, ui) {
        if ($backButtonUsed)
        {
            $backButtonUsed = false;
        } else {
            $previousTab = $("#tabs").tabs('option', 'selected');
        }
        return true;
    });

    $("#back").live('click', function() {
        $backButtonUsed = true;
        $("#tabs").tabs({ selected: $previousTab });
        return true;
    });
});​ 
```

我还将它包含在[JSFiddle](http://jsfiddle.net/45J7g/2/)中，因此您可以使用 HTML 和 jQuery UI 选项卡查看它的运行情况。

让我知道你的想法。

# android - 更改 TextView 的 Textcolor 和背景

> ID：10031060
> 
> 赞同：2
> 
> 时间：2012-04-05T14:59:58.640
> 
> 标签：android, colors, fonts, background, selector

我是 Android 开发的新手。

如果 ListViewItem 被选中或按下，我会尝试更改它的 FontColor 和背景。使用以下选择器更改背景绝对没有问题：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

   <item android:state_pressed="true"
         android:drawable="@drawable/background_pressed"></item>

   <item android:state_focused="true"
         android:drawable="@drawable/background_pressed"></item>

   <item android:state_selected="true"
         android:drawable="@drawable/background_pressed"></item>

   <item android:drawable="@android:color/transparent"></item>

</selector> 
```

但是我怎样才能改变背景和字体颜色呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:45:30.413

更改 TextView 的字体颜色与列表项的背景颜色相同：创建一个 StateListDrawable 并将`TextView`'s设置`android:textColor`为您的自定义可绘制对象。

例如，请参阅[Change ListViews text color on click](https://stackoverflow.com/a/7167230/710990)。将此与您已有的列表项背景相结合。

如果您希望颜色相互淡入，`android:exitFadeDuration="@android:integer/config_mediumAnimTime"`请在`<selector>`-tag 中设置（例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:06:59.833

试试这个

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    TextView txtName;
    txtName.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            TextView textView = (TextView) v;
            textView.setBackgroundColor(Color.RED);
            textView.setTextColor(Color.YELLOW);
        }
    });
} 
```

# actionscript-3 - 如何将两个 Actionscript 文件链接到一个 .fla 文件？

> ID：10031061
> 
> 赞同：0
> 
> 时间：2012-04-05T15:00:02.093
> 
> 标签：actionscript-3

.fla 文件只允许您在“类”位中链接一个 .src 文件，有没有办法将两个 .as 文件链接到 .fla 文件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T19:59:14.937

您只能有一个文档类（对应于 .as 文件），但是每个符号也可以有一个与之关联的类。这实质上为您提供了与 .fla 文件关联的无限数量的 .as 文件。

创建文档类：

1.  转到属性窗口；在发布部分下，有一个空白字段，您可以在其中命名您的课程。
2.  将其命名为您喜欢的任何名称（很可能与您的 .fla 文件名称相似）。点击铅笔会提示创建这个类，它会自动为你打开一个新的 .as 文件。

要为符号创建类：

1.  转到库选项卡；右键单击符号通常所在的位置，然后单击“新符号”。
2.  为您的符号命名，然后单击复选框“为 ActionScript 导出”。在 Class 字段中填写您希望为 .as 文件命名的内容。

# java - 暴露不同泛型类型的不可修改列表包装器

> ID：10031062
> 
> 赞同：2
> 
> 时间：2012-04-05T15:00:02.407
> 
> 标签：java, generics, collections

我有一个`List<ParentObject>`where`ParentObject`定义为：

```
public class ParentObject
{
  ChildObject child1;
  // and other stuff...
} 
```

我想通过构造一个包装器列表将其`List<ParentObject>`作为不可**修改的内容暴露给其他人：** `List<ChildObject>`

```
public class WrapperList implements List<ChildObject>
{
  List<ParentObject> delegateList;

  public WrapperList( List<ParentObject> delegateList )
  {
    this.delegateList = delegateList;
  }

  // fill in java.util.List methods...
} 
```

我可以采用这种方法并使其发挥作用，但这似乎是一个可能已经普遍解决的问题。是否有一个现有的库可以提供像我提议的那样的列表包装器？大概我会定义一个翻译方法，告诉包装器列表如何`ChildObject`从给定的`ParentObject`.

基本问题是：这是一个好方法还是有一个库（Guava 或 Apache Commons Collections 或其他东西）已经提供了类似的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:05:12.193

用番石榴做到这一点的最简单方法是

```
return Collections.unmodifiableList(Lists.transform(parentList,
  new Function<ParentObject, ChildObject>() {...})); 
```

（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:04:56.443

扩展 AbstractList，而不是实现 List。如果它是不可修改的，那么您需要实现的只是`size()`and `get(int index)`，这很简单。

`AbstractList`通过 throw 实现其余部分`UnsupportedOperationExceptions`。

我不知道有任何通用列表可以提供您所要求的内容，但构建起来并不复杂（只会反思）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:05:10.027

我认为您可以使用 Guava 和 Collections.unmodifiableList 来解决这个问题。在番石榴中，使用[Lists.transform](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html)

# vb.net - 如何合并一个数据表中已经存在的两列？

> ID：10031063
> 
> 赞同：0
> 
> 时间：2012-04-05T15:00:02.470
> 
> 标签：vb.net, datatable, datacolumn

我有一个数据表。在该表中，我有名为 [Total Day]、[Present day] 和 [leave] 的列。数据如下：

```
[Total Day], [Present day], [leave]
   30           25             5
   30           26             4 
```

现在我想将这三列连接到另一列中。我想要输出这样的东西：

```
[Total Day] [Present Day] [Leave]  [TotalDay    PresentDay  Leave]
30           25             5      30 VBCrLf    25 VBCrLf     5
30           26             4      30 VBCrLf    26 VBCrLf     4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:29:46.803

```
table.Columns.Add("TotalDay    PresentDay  Leave", GetType(String), "[Total Day] + '" & vbCrLf & "' + [Present Day] + '" & vbCrLf & "' + [Leave]") 
```

假设方括号不是列名的一部分，如果是，则使用“[[Total Day\]]”等。详情请参见：http: [//msdn.microsoft.com/en-us/library/ system.data.datacolumn.expression.aspx](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:08:09.843

```
SELECT [Total Day], [Present Day], [Leave], 
       [Total Day] + '\n' + [Present Day] + '\n' + [Leave] As [TotalDay PresentDay Leave]
FROM MyTable 
```

# php - 如何在 PHP 中编码多字节文件名并在 javascript 中解码它们？

> ID：10031064
> 
> 赞同：10
> 
> 时间：2012-04-05T15:00:04.500
> 
> 标签：php, javascript, encoding

以下是文件名的一些示例：

```
漢語.jpg (Chinese)
Федерация.jpg (Russian)
AbÇöişÜĞ.jpg (Turkish, ISO-8859-9)
... 
```

我试过`rawurlencode(mb_convert_encoding($file, "UTF-8", mb_detect_encoding($file)))`了，但这不起作用，所有中文和俄文字符都打印为 %3F（常规问号），所有土耳其文字符都被删除。

我正在 Windows，PHP 5.3 上进行测试。

我找到的唯一解决方案是显式输入编码：`rawurlencode(mb_convert_encoding($file, "UTF-8", "ISO-8859-9"))`这仅适用于土耳其语字符。

顺便说一句，`mb_detect_encoding($file)`上述文件总是返回“UTF-8”。

**编辑：**
运行以下代码后，我认为`mb_convert_encoding()`无法解决我的问题：

```
$iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator("mp", FilesystemIterator::UNIX_PATHS));
$iterator = new RegexIterator($iterator, '/^.+\.(gif|jpg|jpeg|png)$/i', RegexIterator::GET_MATCH);

foreach ($iterator as $file)
{
    foreach (mb_list_encodings() as $encoding)
        var_dump(rawurlencode(mb_convert_encoding($file[0], "UTF-8", $encoding)) . " : " . $encoding);
} 
```

我想这是关于编码的事情，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T19:11:41.587

所以，主要的是大多数传输（网络、文件、rpc）最多需要一个字节的字符。URL 编码 (%FF) 要求输入数据也是每个字符一个字节。

所以你需要做的是使用 UTF8。它将采用多字节字符并从中生成一个 1 字节字符的字符串。从这个字符串，你可以做正常 ascii 可以做的事情。

你想要做的是为 php 显式设置编码：

```
mb_internal_encoding("UTF-8"); 
```

现在您的所有内部字符串和文件名等都将采用 UTF-8（单字节）编码。从这里您可以回显文件名 AS-IS，它将作为编码数据命中传输。从 javascript，您所要做的就是使用 AJAX 发送一个请求，它会自动为您整齐地解码，准备好在浏览器中使用:) 只需确保您在 html 文件中设置了您的内容类型，因为这样将用作您的默认 JS 编码。

```
<meta http-equiv=”Content-Type” content=”text/html; charset=utf-8″ /> 
```

# share - 使用自定义文本和缩略图分享 Google+

> ID：10031065
> 
> 赞同：4
> 
> 时间：2012-04-05T15:00:07.477
> 
> 标签：share, google-plus

在为 facebook 创建共享链接时，您可以通过执行以下操作来个性化共享链接：

```
<a title='Share on Facebook' 
href='http://www.facebook.com/sharer.php?s=100
&p[title]=TITLE_HERE
&p[summary]=TEXT_HERE
&p[url]=URL_HERE
&p[images][0]=URL_TO_IMAGE' target='_blank' >
<img alt="Facebook" src="ICON_URL" />
</a> 
```

有没有办法用 Google+ 做类似的事情，而不必在标题中填写元标记（因为我需要在一个页面中有很多共享链接）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T19:08:21.593

您可以为此使用 schema.org 微数据。这些不是在站点头部制作的标签，而是您分配给特定节点的属性。这是它如何工作的示例：

假设您有一个包含多篇文章的博客，每篇文章都应该有自己的 +1 按钮。在每篇文章的最外层节点（如果您使用 HTML5 语义，它可能是`<article>`），您定义了一个新`itemscope`的和特定的`itemtype`（在这种情况下`"http://schema.org/BlogPosting"`，请参阅[所有类型的列表](http://schema.org/docs/full.html)）。

接下来，您使用该字段注释应包含在共享片段中的`itemprop`字段。例如，如果文章有图像，则`<img>`可以对节点进行注释`itemprop="image"`等等。

请注意，这些注释仅在当前 itemscope 中有效。+1 按钮也必须放置在此范围内，因为它会查找出现在 DOM 层次结构中按钮上方的第一个 itemscope。

积极的一面是您可以在每个页面上定义多个 itemscope，从而轻松地将多个 +1 按钮与不同的共享片段集成在上面。

[+1 按钮文档](https://developers.google.com/+/plugins/+1button/#plus-snippet)中还提供了更多信息。

# c# - Linq 可选参数

> ID：10031067
> 
> 赞同：7
> 
> 时间：2012-04-05T15:00:19.237
> 
> 标签：c#, .net, linq, dynamic

我有一个 linq 查询。我从收集的表单中有一堆参数，我需要根据用户正在搜索的字段进行过滤。

```
IQueyable<Users> user = from user in edmxObject.Users
where user.FirstName.Contains(model.FirstName ?? user.FirstName)
&& user.UserName.Contains(model.UserName ?? user.UserName) 
```

我还有一些非字符串字段过滤器需要过滤，包括 long 和 boolean。如果用户没有选择任何东西，它们可能是空值。如何将它们包含在查询中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-05T15:02:21.440

这是 LINQ 如此强大的最佳示例之一 - 延迟执行。您可以在不同的阶段构建查询，只有当查询最终执行或解决时，才会生成 SQL 语句：

```
var query = edmxObject.Users.AsQueryable<Users>();

if (! String.IsNullOrEmpty(model.FirstName)) {
    query = from user in query
            where user.FirstName.Contains(model.FirstName)
            select user;
}
if (! String.IsNullOrEmpty(model.UserName) {
    query = from user in query
            where user.UserName.Contains(model.UserName)
            select user;
}

// this will cause the query to execute get the materialized results
var result = query.ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T15:04:15.340

如果查询不包含特定字段，则根本不需要将其包含在 where 子句中：

```
IQueyable<Users> user = from user in edmxObject.Users;

if (model.FirstName != null) 
    users = users.Where(user => user.FirstName.Contains(model.FirstName)

if (/* age is searched for */) 
    users = users.Where(user => user.Age == model.Age); 
```

您可以通过这种方式有条件地嵌套谓词，以确保您只有真正需要的条件。

# android - 如何在表格布局中覆盖列号及其宽度限制？

> ID：10031068
> 
> 赞同：0
> 
> 时间：2012-04-05T15:00:20.347
> 
> 标签：android, tableview, html

在我的应用程序中，我正在以编程方式构建 TableView。表格由一系列单行组成，其中一个文本视图通常包含一个长文本（大约是屏幕宽度的 80%），该文本跨越具有 5 个文本视图的以下行。这很好用，但不幸的是，我还需要在这些行中放置一个带有一个文本框的复选框。由于文本框内容的长度，此复选框必须放在右侧并占用尽可能少的宽度。但是，如果我使文本框仅跨越 4 列，并将复选框放在为第 5 列保留的空间中，则复选框的宽度太大，而文本则不够（它会被包装，这很糟糕）。我准备了一个示例来说明这种情况：

```
+---------------------------------------------------+
|TextView spanning over 5 columns below             |   <- 1 column spans over 5
|-----+------+---------------+------+---------------|
|col1 | col2 |Column number 3| Col4 | Column number5|   <- 5 columns
|-----+------+---------------+------+---------------|
|This spans over 4 column - not enou|[V]            |
|gh                                 |               |   <- 2 columns, 1st spans over 4
|-----+------+---------------+------+---------------|
|col1 | col2 |Column number 3| Col4 | Column number5|   <- 5 columns
|-----+------+---------------+------+---------------|
|This is what I need-checkbox maximum to right  |[V]|   <- 2 columns
+---------------------------------------------------+ 
```

最后一行显示了我需要它的样子。在 HTML 中，我只会在一行中嵌套另一个表，并在这个新表中相应地拆分宽度，但这种情况似乎不可能在 Android TableLayout 中构建。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:07:37.330

另一个尝试 ;) 更改在表格布局的属性、第二行的文本视图和复选框的 layout_gravity 中。我想使用这些元素，您将能够以编程方式执行相同的操作；）

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:stretchColumns="0,1,2,3" >

    <TableRow
        android:id="@+id/tableRow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="@string/app_name" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="@string/app_name" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="@string/app_name" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="@string/app_name" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="@string/app_name" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_span="4"
            android:text="@string/app_name" />

        <CheckBox
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right" />
    </TableRow>

</TableLayout> 
```

查看表格的 android:shrinkColumns 和 android:stretchColumns 属性。您可以使用以下方法编辑此属性：

```
setColumnShrinkable(int columnIndex, boolean isShrinkable)
setColumnStretchable(int columnIndex, boolean isStretchable) 
```

它应该使用这种方法工作（我没有测试过）。

# c# - 在表达式中使用泛型 > 在构造函数中

> ID：10031074
> 
> 赞同：2
> 
> 时间：2012-04-05T15:00:40.843
> 
> 标签：c#, generics, c#-4.0, constructor, func

这可能是一个相对简单的疏忽，但我无法确定我是否真的被允许这样做，或者可能是一个合理的替代方案（在 VS2010、C# .Net 4.0 中使用）。如果可能的话，我强烈希望在构造函数中这样做。

这是我的课：

```
public class MyClass1<TOrderBy> : MyInterface1<MyType1, MyType2>
{
    public MyClass1(IEnumerable<Guid> ids) : this(ids, 0, 10, a => a.Time, ListSortDirection.Ascending) { }

    public MyClass1(IEnumerable<Guid> ids, int pageIndex, int itemsPerPage, Expression<Func<MyType2, TOrderBy>> orderBy, ListSortDirection sortDirection)
        {
            this.pageIndex = pageIndex;
            this.itemsPerPage = itemsPerPage;
            this.orderBy = orderBy;
            this.sortDirection = sortDirection;
            this.ids = ids != null ? ids.ToList() : new List<Guid>();
        }
} 
```

我得到错误

`Cannot convert expression type 'System.DateTime' to return type 'TOrderBy'`悬停时`a => a.Time`

以及错误`Cannot convert lambda expression to delegate type 'System.Func<MyType2,TOrderBy>' because some of the return types in the block are not implicitly convertible to the delegate return type`和`Cannot implicitly convert type 'System.DateTime' to 'TOrderBy'`构建时。

正如您可能知道的那样，我正在尝试构建一个类，该类在构造函数中获取信息以对 IQueryable 进行排序和分页。我想通过重载的构造函数提供默认值。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:48:44.037

```
a => a.Time 
```

时间是一个`DateTime`。 `TOrderBy`可能不是 a `DateTime`，例如：

```
MyClass1<Car> x = new MyClass1<Car>(ids); 
```

所以，你不能做你想做的事。

* * *

这`TOrderBy`是一个很大的痛苦！最好的办法是避免这个问题，`TOrderBy`如果你能提供帮助的话，不要把它作为课堂的一部分。 [这个答案](https://stackoverflow.com/a/7742446/8155)显示了一种包装排序表达式以向外界隐藏 TOrderBy 的方法。

# eclipse - Mac 上的 GWT_HOME

> ID：10031079
> 
> 赞同：0
> 
> 时间：2012-04-05T15:01:04.917
> 
> 标签：eclipse, macos, gwt

我通过他们网站上为 Eclipse Indigo 提供的 Zip 安装了 GWT。

但是，当我尝试运行一个项目（不是一个新的 WebApplication，它有效）时，它说 BUILD FAILED ....../${env.GWT_HOME} 不存在。

如何在 Eclipse 上设置 GWT_HOME，如果 GWT_HOME 全部由 Eclipse 自动安装，我如何知道它的位置？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:26:12.510

您有 2 个选项。

**选项 1** - 便于维护

1）直接从[这里](http://code.google.com/p/google-web-toolkit/downloads/list)下载 GWT 2）在 eclipse goto`Windows -> Preference -> Google -> Web Toolkit -> Add`中（在弹出窗口中配置 GWT 版本、位置和名称）

3) 您可以设置多个 GWT 版本并将其中一个设置为默认值。

![在此处输入图像描述](../Images/91451125afaef2355a3dbc17b1e6f09d.png)

**选项 2**

1) 在您的 ecipe 文件夹中 grep/搜索 gwt-user*.jar ( dropins,plugins,features,p2 !!!! )

2) 配置类路径变量 GWT_HOME。转到**“Windows -> 首选项 -> Java -> 构建路径 -> 类路径变量 -> 新建”**

![在此处输入图像描述](../Images/fecee363123b60815020c5dce8648f4b.png)

# c# - AutoFilterRow 上的 XtraGridView 自定义过滤器

> ID：10031081
> 
> 赞同：3
> 
> 时间：2012-04-05T15:01:15.277
> 
> 标签：c#, .net, winforms, devexpress

Hy，我有一个带有 AutoFilterRow
的 XtraGrid，默认过滤器是：

> 以([columnName], 'mytext') 开头

但我想将其更改为：

> [columnName] 喜欢 '%mytext%'

无需创建自定义过滤器

我只想打开网格，在 FilterRow 'mytext' 里面写，Filter LIKE 应该应用到我的专栏

一种解决方案是在过滤器更改时捕获，创建字符串并

```
gridView1.Columns["myCol"].FilterInfo = mystring; 
```

但我不知道如何捕捉插入的文本

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T19:26:00.010

您需要更改[OptionsColumnFilter.AutoFilterCondition](http://help.devexpress.com/#WindowsForms/DevExpressXtraGridColumnsOptionsColumnFilter_AutoFilterConditiontopic)选项以获得所需的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T18:27:55.717

如果你已经有了这个：

```
Starts with([columnName], 'mytext') 
```

您应该能够进入 XtraGrid 设计器，选择布局，然后在网格预览窗口的底部，您可以单击“编辑过滤器”链接，这将打开过滤器编辑器。

![在此处输入图像描述](../Images/5aee6f255b5249248c0acd8ba03bce07.png)

将“Begins With”更改为“Contains”，与 LIKE 相同。

![在此处输入图像描述](../Images/d912d8c1642dfc6ea9368e98bae2ea3c.png)

如果这不能解决您想要做的事情，那么您问题的另一半是在哪里捕获过滤器事件。GridView 有一些事件，您会感兴趣的两个事件是`FilterEditorCreated`和`ShowFilterPopupListBox`。

# ruby-on-rails - 实例在 Heroku 上的 Rails 中表现得像类

> ID：10031086
> 
> 赞同：1
> 
> 时间：2012-04-05T15:01:23.967
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, heroku

创建新帐户时，我有类似于以下的代码作为 after_create 回调：

```
def after_account_create
  new_account = self
  logger.info( '%%%%%%%%%%%%%%%%%%%%%     account is = ' + new_account.inspect)          
  assessment = Assessment.new :title => "Cake baking", :description => "Every day we bake fresh cakes to sell in our shop. This is our assessment of the risks involved in this process.", :account_id => new_account.id
  assessment.save!
end 
```

当我在我的开发环境（Passenger / Postgres）上运行它时，它工作正常 - 每次个人注册并创建一个新帐户时，它都会创建一个分配给该个人帐户的新评估。

但是，当我在我的生产环境（Heroku 上的瘦网络服务器）上运行此程序时，每次个人注册并创建一个新帐户时，它都会创建一个新的评估，但会分配给之前个人的帐户。

以下是第二个人创建帐户时来自两个日志的示例：

**发展**

```
%%%%%%%%%%%%%%%%%%%%%     account is = #<Account id: 97, name: "Eric Clapton", plan: "Partnership", billing_zip: nil, no_of_users: 1, no_of_assessments: nil, id_of_admin_user: 90, created_at: "2012-04-05 14:58:54", updated_at: "2012-04-05 14:58:56">
(0.2ms)  BEGIN
SQL (1.5ms)  INSERT INTO "assessments" ("account_id", "created_at", "description", "title", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["account_id", 97], ["created_at", Thu, 05 Apr 2012 10:58:56 EDT -04:00], ["description", "Every day we bake fresh cakes to sell in our shop. This is our assessment of the risks involved in this process."], ["title", "Cake baking"], ["updated_at", Thu, 05 Apr 2012 10:58:56 EDT -04:00]] 
```

**生产**

```
%%%%%%%%%%%%%%%%%%%%%     account is = #<Account id: 2, name: "jack cale", plan: "Partnership", billing_zip: nil, no_of_users: 1, no_of_assessments: nil, id_of_admin_user: 2, created_at: "2012-04-05 14:46:54", updated_at: "2012-04-05 14:46:56">
(2.0ms)  BEGIN
SQL (2.2ms)  INSERT INTO "assessments" ("account_id", "created_at", "description", "title", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["account_id", 1], ["created_at", Thu, 05 Apr 2012 10:46:56 EDT -04:00], ["description", "Every day we bake fresh cakes to sell in our shop. This is our assessment of the risks involved in this process."], ["title", "Cake baking"], ["updated_at", Thu, 05 Apr 2012 10:46:56 EDT -04:00]] 
```

**更新：** 我在我的开发环境中更改了`config.cache_classes`to `true`from `false`，现在我遇到了完全相同的问题，所以它肯定与此有关。我正在使用此 gem 将对象的创建范围仅限于当前帐户[https://github.com/ErwinM/acts_as_tenant](https://github.com/ErwinM/acts_as_tenant)这可能是请求之间缓存的内容吗？

**UPDATE2：** 实际上正是这样。current_tenant 值在会话之间被缓存。每次为新创建的帐户创建帐户时，我都必须向 accounts_controller 添加一个定义 current_tenant 值的方法。

# java - 是否可以将用户的输入数据放入一个线程并将服务器的数据输入另一个（UDP）？

> ID：10031089
> 
> 赞同：0
> 
> 时间：2012-04-05T15:01:39.720
> 
> 标签：java, udp

我有 UDPserver 等待客户端的请求并发送响应给他们。为了检查客户是否在线，我需要向他们发送消息。（检查）。但是！在客户端的电脑上，用户可以选择一些消息并将其发送到服务器，然后等待服务器的响应。如何做这样的事情 -***用户可以向服务器发送消息，但同时客户端可以从服务器接收消息***？将客户端放入`readLine`一个线程并`recieve`放入另一个线程？

这是客户端的主循环（ds - DatagramSocket.Client - 我自己的类）

```
while(true){
        try{
            //variable client we use it in every condition
            Client obj = null;
            ds = null;
            //REGR - registration FNDI - find ip FNDM - find mask GETL - get all CHKA - check all
            System.out.println("PORT - ");
            int port = Integer.parseInt(new BufferedReader(new InputStreamReader(System.in)).readLine());
            ds = new DatagramSocket(port);
            //wait for user's choice
            System.out.println("Commands - REGR,FNDI,FNDM,GETL,CHKA");
            String cmd = new BufferedReader(new InputStreamReader(System.in)).readLine();
            if (cmd.equals("REGR"))
            {
                //sending data to server and waiting for its response
            }
            else if (cmd.equals("FNDI"))
            {
                //same
            }   
            else if (cmd.equals("FNDM"))
            {
                //same
            }
            else if (cmd.equals("GETL"))
            { 
                //same
            }
            else if(cmd.equals("CHKA"))//CHKA
            {
                //same
            }
        }catch(Exception exc)
        {
            System.out.println(exc);
            return;
        }
        finally
        {
            if (ds!=null)
                ds.close();
        }
} 
```

主服务器的循环

```
 while(!stop){
        myfile.write(aam.InputMsg.name());
        System.out.println(aam.InputMsg);
        DatagramPacket pack = new DatagramPacket(buf,buf.length);
        socket.receive(pack);
        //ports.add(pack.getPort());
        //object from pack
        Object o = Deserialize.Deserialization(buf);
        //ok. first - REGR - so check on Client
        if (o instanceof Client)//registration
        {
            //perform some task
        }
        else if (o instanceof InetAddress)//find client by IP
        {
            //same
        }
        else if (o instanceof String)//different messages - name to find, start test.
        {   
            //same
        }
        else
        {
            throw new Exception("SOME WRONG DATA FROM CLIENT");
        }
    }
    System.out.println("Server stopped");
}
catch(Exception exc)
{
    System.out.println(exc);
}
finally{
    if (socket!=null){
        socket.close();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:08:23.847

在 C/C++ 套接字中，您通常会使用“select()”调用来处理发生在文本中的任何输入——键盘、文件或网络。

在 Java 套接字中，您可能会考虑查看“nio”：

[http://tutorials.jenkov.com/java-nio/nio-vs-io.html](http://tutorials.jenkov.com/java-nio/nio-vs-io.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:28:56.547

是的，您需要将客户端的至少一部分放到另一个线程中。

可以通过将客户端输入循环放入单独的线程来开始。

```
Thread t_input = new Thread() {
    public void run() {
        BufferedReader br_in = new BufferedReader(new InputStreamReader(System.in));
        String cmd = br_in.readLine();
        while(cmd != null) {
            if(cmd.equals("exit")) { //stop the user input
                client_Shutdown();
                break;
            }
            //handle other user input
            cmd = br_in.readLine();
        }
    }
};

t_input.start(); 
```

# xml - 将 XML 绑定到自动完成框 windows phone

> ID：10031099
> 
> 赞同：0
> 
> 时间：2012-04-05T15:02:17.947
> 
> 标签：xml, windows-phone-7

是否可以在 xml 中获取带有节点的项目列表，然后在 windows phone 的自动完成文本框中使用这些项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:16:42.930

以下可能是一个很好的起点“数据绑定 Windows Phone 工具包 AutoCompleteBox”：-

[http://www.windowsphonegeek.com/articles/Data-Binding-the-Windows-Phone-Toolkit-AutoCompleteBox](http://www.windowsphonegeek.com/articles/Data-Binding-the-Windows-Phone-Toolkit-AutoCompleteBox)

[http://www.reddit.com/r/wp7dev/search?q=autocompletebox&restrict_sr=on&sort=relevance](http://www.reddit.com/r/wp7dev/search?q=autocompletebox&restrict_sr=on&sort=relevance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-08T17:40:32.437

您可以处理 Populating 事件以将 AutoCompleteBox 链接到动态生成的数据。

[这](https://msdn.microsoft.com/en-us/library/system.windows.controls.autocompletebox.populating(v=vs.95).aspx)就是你要找的。这是一篇很好的文章，有一个很好的例子。如前所述，不要忘记在手动填充操作完成时调用 PopulateComplete()。

您还可以将 ItemFilter 属性设置为自定义过滤器，以定义您自己的搜索逻辑。有关详细信息，请参阅[此](https://msdn.microsoft.com/en-us/library/system.windows.controls.autocompletebox.filtermode(v=vs.95).aspx)。请记住将 FilterMode 设置为自定义。

# firefox - 列表样式图像中的动画 svg

> ID：10031105
> 
> 赞同：1
> 
> 时间：2012-04-05T15:02:41.280
> 
> 标签：firefox, svg, firefox-addon

问题指火狐4+，扩展开发

我使用 svg 作为

```
list-style-image: url(svg) 
```

在某些情况下，我会在 svg 元素上使用动画，因为我没有 DOM 对象来与 javascript 交互。

使用 javascript 的第一个原因是在某些事件上开始动画。我不想动态生成 <animate> 和 <svg>，如果我能得到 DOM 树，然后通过**list-style-image**将它附加到目标上，那就太好了。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T01:48:23.077

当 SVG 被用作图像而不是文档时，您无法从 JS 访问其 DOM。

# ipad - iPad - 显示来自 ShareKit 共享器的自定义 UIViewController

> ID：10031107
> 
> 赞同：0
> 
> 时间：2012-04-05T15:03:00.657
> 
> 标签：ipad, uiviewcontroller, sharekit

我有一个带有 ShareKit 的自定义共享器，它重定向到我的应用程序的 UIViewController 以执行一些操作。通常我使用此代码在 iPhone 上执行该任务

```
//Create a new snippet with the item to be shared
Snippet * selectedSnippet = [[Snippet alloc] initWith: item.title :item.text :@"" : 0];

//pass the item to the controller
detailsController.currentSnippet = selectedSnippet;

//Show view controller with the navigation controller
[[SHK currentHelper] showViewController: detailsController]; 
```

但这显示了我的`UIViewController`裁剪，我的猜测是因为它被显示为模态窗口，所以我也尝试了：

```
[[self navigationController] pushViewController: detailsController animated: YES]; 
```

而不是最后一行，没有运气。我想要的是`UIViewController`从我的共享者那里显示一个，但使用整个屏幕。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:06:23.253

不要使用`[SHK currentHelper]`. 如需灵感，请查看 SHKiOS5Twitter 如何在[ShareKit 2.0中呈现其 UI](https://github.com/ShareKit/ShareKit/)

以下是步骤：

1.  检查是否没有 ShareKit 的菜单，或者是否打开了其他 ShareKit 的视图。如果是，请关闭它并在关闭通知后继续。
2.  找到当前的顶视图控制器，[ShareKit 2.0](https://github.com/ShareKit/ShareKit/)对此有一个特殊的功能。
3.  然后只需使用 UIView 的 presentViewController:animated:completion: 方法

# javascript - 正则表达式字符串不以特殊字符开头或结尾

> ID：10031108
> 
> 赞同：5
> 
> 时间：2012-04-05T15:03:01.220
> 
> 标签：javascript, jquery, regex

所以哥们，你好。我有一些需要实现的密码要求，其中一个要求是字符串**不能以特殊字符开头或结尾**。我确实花了一些时间在谷歌上搜索，但我的 RegEx 功夫是 kimosabe 水平。

万一您对某些代码感兴趣，这里是**JavaScript**：
*注意：是的，密码也在服务器上验证:) 以下代码段运行 RegEx 测试并简单地检查或 x 与密码规则关联的行项.*

```
var validate = function(password){
        valid = true;

        var validation = [
            RegExp(/[a-z]/).test(password), RegExp(/[A-Z]/).test(password), RegExp(/\d/).test(password), 
            RegExp(/[-!#$%^&*()_+|~=`{}\[\]:";'<>?,./]/).test(password), !RegExp(/\s/).test(password), !RegExp("12345678").test(password), 
            !RegExp($('#txtUsername').val()).test(password), !RegExp("cisco").test(password), 
            !RegExp(/([a-z]|[0-9])\1\1\1/).test(password), (password.length > 7)
        ]

        $.each(validation, function(i){
            if(this == true)
                $('.form table tr').eq(i+1).attr('class', 'check');
            else{
                $('.form table tr').eq(i+1).attr('class', '');
                valid = false
            }
        });

        return(valid);

    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-05T15:14:02.230

**编辑：**你想要的正则表达式是： -

```
/^[a-zA-Z0-9](.*[a-zA-Z0-9])?$/ 
```

**附加信息**

在正则表达式`^`中表示“字符串的开头”和`$`“字符串的结尾”，例如：-

```
/^something$/ 
```

火柴

```
'something' 
```

但不是

```
'This is a string containing something and some other stuff' 
```

您可以使用 否定字符`[^-char to negate-]`，所以

```
/^[^#&].*/ 
```

匹配任何不以 # 或 & 开头的字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-12T07:36:08.927

```
/^[a-zA-Z0-9](.*[a-zA-Z0-9])?$/ 
```

此表达式检查以下验证：

*   开头和结尾没有空格
*   结尾和开头没有特殊字符
*   之间允许的特殊字符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:23:36.687

这个正则表达式应该是你想要的：

```
/^[0-9a-z].*[0-9a-z]$/ 
```

# codeigniter - 如何将模板链接到 PyroCMS 中的视图和 URL？

> ID：10031110
> 
> 赞同：0
> 
> 时间：2012-04-05T15:03:03.997
> 
> 标签：codeigniter, templates, expressionengine, pyrocms

我拼命地试图找到 ExpressionEngine 的开源替代品，不是因为我有支付它的问题，不幸的是我无法在每个站点上证明它是合理的。

PyroCms 似乎是一个非常完善的开源选项，但我似乎无法弄清楚如何将模板链接到视图，然后链接到 url。如何为最终用户创建自定义字段以添加内容？然后如何将这些自定义字段链接到特定模板？这甚至可能吗？

也许我的头脑仍然处于 EE 模式，但虽然 Pyro 文档看起来很好，但我确实觉得它们有点轻，也许可以理解，因为它是一个非商业产品。

如果我走错了路，是否有不同的选项可以让我保持与 ExpressionEngine 类似的工作流程？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T00:24:11.677

PyroCMS does things a little differently from ExpressionEngine so there will be a little confusion coming from one to the other expecting things to be the same.

URL's can be a few different things:

1.  Module
2.  Page
3.  Route

So, /blog goes to the blog module.

/foo loads up a page that you have created called "Foo" with a slug of "foo".

/login is a route, that goes to /users/login

Unlike ExpressionEngine there is not the idea that every URL maps to a template which needs to be created in the database. Instead a module can load its own views (which can be overridden in the theme) and pages can be easily created by the user entirely without needing to know anything about templates.

The general idea is that the designer creates the theme, the developer creates the modules and the end user just uses, without needing to set up templates and URL mapping, etc. By keeping the specific tasks to specific types of user there is no confusion in the middle where end users try to redesign the site (think MySpace) or designers end up writing code. Instead everyone does what they are best at and can share the results in the Add-on Store on the site.

"I do find them a bit light, perhaps understandable as it is a non-commercial product."

If you could give some feedback through our forums or contact form about where you feel the product is light then perhaps we can work out A) if the functionality could be added or B) if the functionality is there but could be made more obvious.

PyroCMS is not just some "dumped onto GitHub" hobby project by a few devs, it is its own company with support staff and a team of developers, so we don't like to see comments like this! If anything can be done to help you just need to ask. We don't troll StackOverflow that often so just swing by our site with any other questions.

# javascript - 为什么Javascript只将回车计为一个字符，而它是两个？

> ID：10031112
> 
> 赞同：15
> 
> 时间：2012-04-05T15:03:10.313
> 
> 标签：javascript, dom, carriage-return

这是这个问题的一个分支：[Chrome counts characters wrong in textarea with maxlength attribute](https://stackoverflow.com/q/10030921/561731)

* * *

在那个问题中，发现[Javascript 将回车计数为一个字符，而实际上它是两个 ( `\r\n`)](https://stackoverflow.com/a/10030992/561731)，这是为什么呢？

测试小提琴：http: [//jsfiddle.net/maniator/E527z/](http://jsfiddle.net/maniator/E527z/)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-05T15:07:55.333

由于未知的原因，jQuery 总是将 a 值中的所有换行符转换`<textarea>`为单个字符。也就是说，如果浏览器给它`\r\n`一个换行符，jQuery 会确保它只是`\n`在`.val()`. （实际上原因可能不是“未知”；可能是跨浏览器标准化结果，因为 IE 报告换行符为 2 个字符长。）

`<textarea>`出于“maxlength”的目的，Chrome 和 Firefox 都以相同的方式计算标签的长度。

但是，HTTP 规范坚持将换行符表示为`\r\n`. 因此，jQuery、webkit 和 Firefox 都犯了这个错误。发布该字段时，webkit 和 Firefox 正确添加了换行符！

结果是，`<textarea>`如果您的服务器端代码确实具有固定的字段值最大大小，那么标签上的“maxlength”几乎没有用。

**编辑**这在 2015 年仍然是一个问题 - 至少在 Chrome 45.0.2454 和 IE 11.0.9600 上。

# php - 在 C 中加载内存转储（类似于 PHP 序列化）

> ID：10031116
> 
> 赞同：0
> 
> 时间：2012-04-05T15:03:28.227
> 
> 标签：php, c, linux

我有一个 C 程序，它在启动时会读取大量配置文件、用户设置并将其全部存储在内存中。

问题是这个 c 工具运行了很多次，而这些读取配置、解析设置等的初始步骤需要很长时间。

我正在考虑一次运行所有这些步骤并将内存保存在某处，然后只在下次运行时读取该内存转储（有点像缓存）。

在C中可能吗？我在想类似于 PHP 中的序列化/反序列化来解析内存中的内容......

*更新：我无法将设置的内容保存在文件中，只能在启动时重新读取，因为内存内容有点复杂。为许多用户读取设置，并在内存中构建复杂的哈希/列表，具有多个子元素、正则表达式调用等。想法是将最终结构保存在某处并每次重用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:28:11.103

您可以使用 sysv shm 之类的东西设置一个共享内存段，并让程序在第一次运行时填充数据。以下时间它可以只附加到相同的内存段（使用 shmat/shmget）。

# c++ - 防止 QTable 在编辑时选择所有文本

> ID：10031121
> 
> 赞同：2
> 
> 时间：2012-04-05T15:03:43.437
> 
> 标签：c++, model-view-controller, qt

默认情况下，编辑 QTable 中的项目会选择单元格中的所有文本。我想避免这种情况。但是，我似乎无法找到发生这种情况的地方。

我写了一个简单的自定义委托，它继承自`QStyledItemDelegate`，并返回一个自定义对象，它简单地继承自`QLineEdit`. 在这些课程中，我尝试了一些我认为可以完成“技巧”的组合，例如禁用`QLineEdit::focusInEvent()`，指定 my 的选择`QLineEdit`，但没有任何效果。

我得到的最接近的是，当我单击一个单元格时，我设置了我想要的选定文本。但是在单击单元格的那一刻和执行我的自定义选择的那一刻之间，无论如何都会选择整个文本，这是我想避免的。

任何的想法？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:50:22.077

像这样编写自定义 QLineEdit：

```
class MyLineEdit : public QLineEdit {
public:
  MyLineEdit(QWidget*parent=0) : QLineEdit(parent)
  {}

  void showEvent(QShowEvent*)
  {
    deselect();
    setSelection(1,2); // should be configurable
  }
}; 
```

并将其设置为编辑器小部件，我可以双击表格单元格并获得带有一些预选文本的行编辑，而不会闪烁。无论如何，整个单元格在双击中间被选中，不知道这是否适合您。

# jquery-ui - 在 datepicker 中为 minDate 添加几天

> ID：10031124
> 
> 赞同：0
> 
> 时间：2012-04-05T15:03:51.033
> 
> 标签：jquery-ui, datepicker, mindate

如何更改此代码

minDate: '2012/3/4'+'5D',

```
var dates = $( "#from, #to" ).datepicker({
    dateFormat: 'yy/mm/dd',
    changeMonth: true,

    **minDate: '2012/3/4'+'5D',**

    onSelect: function() { 
       var d1=new Date($('#from').val());
       var d2=new Date($('#to').val());
       $('#quantity').val((Math.ceil((d2-d1)/86400000)));
   }
}); 
```

到最小日期=>2012/3/9

坦克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:08:11.717

免责声明：如果它实际上是硬编码的，只需将其更改为`'2012/3/9'`.

解析日期，加上 5 天，然后再次将其转换为字符串：

```
var d = '2012/3/4';
var parts = d.split('/');
var date = new Date(+parts[0], +parts[1] - 1, +parts[2]);

date.setDate(date.getDate() + 5);

var result = date.getFullYear() + '/' + (date.getMonth() + 1) + '/' + date.getDate(); 
```

[这是一个演示。](http://jsfiddle.net/minitech/Zvyha/)

并将其放入您的代码中：

```
var d = '2012/3/4';
var parts = d.split('/');
var date = new Date(+parts[0], +parts[1] - 1, +parts[2]);

date.setDate(date.getDate() + 5);

var result = date.getFullYear() + '/' + (date.getMonth() + 1) + '/' + date.getDate();

var dates = $( "#from, #to" ).datepicker({
    dateFormat: 'yy/mm/dd',
    changeMonth: true,
    minDate: result,
    onSelect: function() { 
       var d1=new Date($('#from').val());
       var d2=new Date($('#to').val());
       $('#quantity').val((Math.ceil((d2-d1)/86400000)));
    }
}); 
```

# html - 在 DOM 树中移动 Flash 对象

> ID：10031129
> 
> 赞同：0
> 
> 时间：2012-04-05T15:04:24.030
> 
> 标签：html, flash

我发现了这个问题；[我可以在不重新加载的情况下在 DOM 中移动 Flash 对象吗？](https://stackoverflow.com/questions/3963283/can-i-move-a-flash-object-within-the-dom-without-it-reloading)

我正在开发一个简单的视频聊天应用程序。每当我在 dom 树中移动一个 flash 对象时，它都会自行重置。我知道没有解决方案，这是浏览器特定的行为。但是，我想问一下是否有任何解决方法可以做到这一点。我的要求很简单。我有多个水平对齐的流。每个流都是不同的 Flash 对象。当有人放大单个 Flash 对象时，我需要将其移到顶部。每当我将它移到顶部时，该特定视频就会自行重置，然后您等待几秒钟以恢复流。是否有任何解决方法或任何方法可以避免这种情况。

我目前只是将相同的列表项添加到同一个父级。这是一个非常重要的功能，任何不需要闪存自行重置的解决方案都是可以接受的。（除了创建一个包含所有流的父 Flash 容器。）

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T15:17:49.307

我不确定，但我认为具有绝对位置和更改 x/y 坐标的 div 对我有用（虽然我没有进行任何广泛的测试）。可以试一试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:22:41.740

前段时间我遇到了同样的问题。我发现它做不到。如果你在 dom 树中移动包含你的 flash 的元素，它会重新加载。我通过将容器元素的位置设置为绝对并通过更改其 x 和 y 来更改其在舞台上的位置来解决此问题

# c - 我的 C “你好，世界！” 程序没有编译

> ID：10031130
> 
> 赞同：1
> 
> 时间：2012-04-05T15:04:34.490
> 
> 标签：c, visual-studio

我想学习 C，所以我决定开始一个 C 项目并尝试经典的“你好，世界！” Visual Studio 中的程序。

所以我把这段代码放在

```
#import <stdio.h>

main()
{
    printf("Hello, world!");
} 
```

并得到三个错误：

> IntelliSense：无法打开源文件“C:/.../stdio.tlh”
> IntelliSense：标识符“printf”未定义
> IntelliSense：PCH 警告：找不到合适的标头停止位置。未生成智能感知 PCH 文件。

显然我的项目设置错误，或者我没有我需要的头文件或类似的东西。

我确信这似乎是一个非常基本的问题，但我之前没有真正使用过 C，所以我被卡住了，不知道该怎么做。我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T15:05:47.907

`#import`应该是`#include`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-05T15:06:03.193

不是`#import`，是`#include`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T15:06:32.370

您应该使用#include 而不是#import

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T15:09:39.050

其他人没有指出的几点：

1.  main() 应该返回 int
2.  您的 printf 字符串文字参数应该有一个新行。

# jquery - 使用 JQM 中的页面 id 刷新页面

> ID：10031133
> 
> 赞同：1
> 
> 时间：2012-04-05T15:04:48.580
> 
> 标签：jquery, html, jquery-mobile

我是 JQM 的新手。我有文件 index.html，在其中我使用 div 标签创建了许多页面，例如

```
 <div data-role="page" id="pg1 "></div> 
```

现在我想使用页面 id 重新加载特定页面。如何使用 location.reload() 或其他方式来做到这一点？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:41:23.620

如果您使用的是多页面模板，其中所有伪页面都在一个文档中，那么默认情况下您不能刷新页面，因为它只存在于当前 DOM 中。您可以编写一个函数，在 AJAX 请求中请求相同的文档，然后从响应中获取伪页面并替换 DOM 中的当前页面：

```
function replace_multipage_template (SELECTOR) {

    //show the loading spinner
    $.mobile.showPageLoadingMsg();

    $.ajax({

        //request the same document as the current URL
        url     : window.location.href,
        success : function (response) {

            //select just the desired pseudo-page
            var $ele = $(response).find(SELECTOR);

            //replace the current pseudo-page with the new one
            $(SELECTOR).replaceWith($ele);

            //hide the loading spinner
            $.mobile.hidePageLoadingMsg();

            //navigate to the refreshed pseudo-page
            $.mobile.changePage($ele);
        },
        error   : function (jqXHR, textStatus, errorThrown) { /*make sure to handle errors*/ }
    });
} 
```

您可以在事件处理程序中将此代码`click`用于将用户定向到要刷新的页面的链接的事件：

```
//bind via delegation to the click events for links that target a specific pseudo-page
$(document).delegate('a[href="#some-page-id"]', 'click', function () {

    //call the function from above, using the HREF attribute as the SELECTOR variable
    replace_multipage_template($(this).attr('href'));

    //prevent the default behavior of the link
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T16:52:31.807

[http://jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html)

使用带有 reloadPage 选项的 $.mobile.changePage 方法

# android - 如何测量 Android WebView 入站/出站流量

> ID：10031135
> 
> 赞同：1
> 
> 时间：2012-04-05T15:04:50.173
> 
> 标签：android, networking, uiwebview, webview, web-traffic

是否可以测量 Android WebView 入站/出站流量？

我的任务是测量我的应用程序执行的所有网络活动。据我了解 TrafficStats 类有严重的局限性。在某些情况下它可能不起作用。它也只出现在 API 8 中，而我也必须支持 7。因此，仅当我找不到任何其他解决方案时，才可以选择使用它。

请注意，所有其他网络流量都很容易测量，因为它由我的应用程序控制。所以问题只是 WebView 组件发出/接收的那部分。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:04:46.293

> 是否可以测量 Android WebView 入站/出站流量？

使用`TrafficStats`，或使用您设备之外的东西（例如，一些可以记录此信息的代理服务器）。

> 据我了解 TrafficStats 类有严重的局限性。

你当然欢迎你的意见。

> 它也只出现在 API 8 中，而我也必须支持 7。

除非您在特定于 API 级别 7 的应用程序中有显着不同的行为，否则您消耗的带宽`WebView`可能不会有太大变化。将您的构建目标设置为 API Level 8 并`TrafficStats`在 API Level 8+ 设备上使用（通过`Build.VERSION.SDK_INT`检查）。

# mongodb - 在 MongDB 中使用集合的“年”和“月”字段作为分片键

> ID：10031136
> 
> 赞同：0
> 
> 时间：2012-04-05T15:04:52.220
> 
> 标签：mongodb, sharding

我们目前正在实施一个解决方案，其中我们有一个要根据以下字段分片的集合：

年份 (INT)

月 (INT)

我们预计每年为收集生成大约 2GB 的数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T16:12:31.267

如果你不介意我问，你为什么要考虑分片？2GB 应该很容易适应单个服务器。

话虽这么说，如果您肯定要对您的集合进行分片，那么选择一个足够细粒度的非增量分片键非常重要，这样就永远不会出现无法拆分块的情况。

例如，如果仅按 Month 拆分集合，则可能只有 12 个块。如果一月是插入的热门月份，则可能会出现这样的情况，即一百万条（只是为了选择任意大的数字）记录可以插入到该块中，并且永远无法拆分。

同样重要的是不要选择递增（或递减）的分片键。随着新文档被插入到集合中，每个后续文档将被添加到同一个块中，直到该块达到其大小限制并且必须拆分。然后可以将较低的块移动到不同的服务器，从而产生“瀑布”效果（一个分片不断填充块，然后移动到其他分片）。同时，所有新文档都不断被写入同一个分片，从而形成所谓的“热点”。如果插入速率足够，磁盘可能会在尝试写入新文档时达到其 IO 限制，同时将现有数据迁移到另一个分片。

Mongo“分片介绍”文档有更多关于文档如何存储在分片集合中的详细信息。 [http://www.mongodb.org/display/DOCS/Sharding+Introduction](http://www.mongodb.org/display/DOCS/Sharding+Introduction)

此外，Mongo 文档“选择分片键”提供了有关选择分片键时要考虑的内容的详细信息。 [http://www.mongodb.org/display/DOCS/Choosing+a+Shard+Key](http://www.mongodb.org/display/DOCS/Choosing+a+Shard+Key)

如果可能的话，我推荐阅读 Kristina Chodorow 的“Scaling MongoDB”。 [http://shop.oreilly.com/product/0636920018308.do](http://shop.oreilly.com/product/0636920018308.do) 这提供了一个很好的分片介绍以及我上面提到的选择分片键的注意事项和注意事项的更详细说明。

以下是其他用户就分片和选择 Shard Keys 提出的一些问题的链接。（您可能认识一些链接和一些作者）希望这些资源能够提高您对分片如何工作的理解，如果您仍然决定对您的集合进行分片，请允许您选择一个有效的分片键。

“分片不平衡” - [http://groups.google.com/group/mongodb-user/browse_thread/thread/1328250382087448](http://groups.google.com/group/mongodb-user/browse_thread/thread/1328250382087448)

“为此数据集设计分片索引的最佳方法是什么” - [http://groups.google.com/group/mongodb-user/browse_thread/thread/5bda4a39d9be54f5](http://groups.google.com/group/mongodb-user/browse_thread/thread/5bda4a39d9be54f5)

“低基数分片键” - [http://groups.google.com/group/mongodb-user/browse_thread/thread/3c96d1c254f113b1](http://groups.google.com/group/mongodb-user/browse_thread/thread/3c96d1c254f113b1)

“片键分析” - [http://groups.google.com/group/mongodb-user/browse_thread/thread/9cf0b8657d4515e2](http://groups.google.com/group/mongodb-user/browse_thread/thread/9cf0b8657d4515e2)

# objective-c - CCCrypt 加密结果问题

> ID：10031137
> 
> 赞同：1
> 
> 时间：2012-04-05T15:04:52.377
> 
> 标签：objective-c, encryption, aes, encryption-symmetric

我正在使用 CCCrypt 加密/解密字符串值。它似乎工作正常，因为解密值等于初始值，但问题是我无法从解密数据中提取正确的 NSString 对象。

```
@implementation NSData (AES256) 

- (NSData *)AES256EncryptWithKey:(NSString *)key 
{
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                        keyPtr, kCCKeySizeAES256,
                                        NULL /* initialization vector (optional) */,
                                        [self bytes], dataLength, /* input */
                                        buffer, bufferSize, /* output */
                                        &numBytesEncrypted);
    if (cryptStatus == kCCSuccess) { 
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
    }

    free(buffer); //free the buffer;
    return nil;
}

- (NSData *)AES256DecryptWithKey:(NSString *)key {
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesDecrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                        keyPtr, kCCKeySizeAES256,
                                        NULL /* initialization vector (optional) */,
                                        [self bytes], dataLength, /* input */
                                        buffer, bufferSize, /* output */
                                        &numBytesDecrypted);

    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free(buffer); //free the buffer;
    return nil;
} 
```

我不知道做错了什么，所以如果有人可以提供帮助，我将不胜感激。

问题的第二部分 - 如何为 AES 加密方法设置 CBC 模式。文档中说默认使用此模式，但我应该将什么作为 CCCrypt 方法中的第三个参数传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:01:15.213

解决您在上一个答案中评论的问题，该`initWithData:encoding:`函数将返回`nil`，因为加密的数据不太可能与 匹配`NSUTF8StringEncoding`，因为它是加密的。

与彻底回答相同的问题：[为什么我的 initWithData 在将 NSData 转换为通过 CommonCrypto 从加密返回的 NSString 后返回 nil 指示错误？](https://stackoverflow.com/questions/8815570/why-does-my-initwithdata-return-nil-indicating-an-error-after-converting-nsdata)虽然顺便说一句，base64 不会使您的加密数据成为可见字符串，而是进一步改变它以制作可显示的 ASCII 字符串。不应假定此字符串与加密数据相同，也不应假定与加密数据相同，但作为字符串使用，例如在钥匙串中，它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:19:15.547

要在解密后获得确切的字符串，您必须进行 base64 解码`Decrypted Data`，然后使用 NSUTF8StringEncoding 创建 NSString。

```
 NSString decryptedString = [[NSString alloc]initWithData:decryptedData];

    NSData *data = [NSData dataByBase64DecodingString:decryptedString];

    decryptedString = [data dataUsingEncoding:NSUTF8StrinEncoding]; 
```

`decryptedString`在加密之前保持字符串相同。

对于 base64 解码，请参阅[这篇](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)文章。

# apache-flex - Flex ComboBox - 刷新数据提供程序

> ID：10031140
> 
> 赞同：1
> 
> 时间：2012-04-05T15:04:55.457
> 
> 标签：apache-flex

我正在使用组合框来列出文件夹的内容。

通过单击按钮，我使用该 combobox.selectedItem 删除该文件夹。删除后数据仍在组合框中。我该如何刷新该组合框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:42:35.010

ArrayLists 和 ArrayCollections（无论您用作“dataProvider”）都调度[CollectionEvent.COLLECTION_CHANGE](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/events/CollectionEvent.html#COLLECTION_CHANGE)事件以通知 List 组件（或在本例中为 CombBox）添加或删除了一个项目。

所以基本上你需要做的就是从 dataProvider 中删除项目，ComboBox 将自动刷新。

```
myComboBox.dataProvider.removeItemAt(myComboBox.selectedIndex); 
```

（对于这个示例代码，我假设您正在谈论一个仅将 ILists 作为数据提供者的 Spark ComboBox）

# apache-flex - 弹性柱颜色

> ID：10031142
> 
> 赞同：0
> 
> 时间：2012-04-05T15:05:04.273
> 
> 标签：apache-flex, datagrid, flex-spark

我对 Spark DatagridColumn 的 contentColor / backgroundColor 有疑问。

我有

```
<s:GridColumn> 
   <s:itemEditor >
   <fx:Component>
            --- < component like.. combobox>

        <fx:Component>           
   <s:itemEditor >
<s:GridColumn> 
```

好吧..我试图用颜色（让我们说“红色”）为那一列着色。我尝试给出一个类名，设置背景颜色等。

我注意到“conentColor”有效，但只有当您单击组件以“编辑”单元格时，但我想看到列的单元格着色，即使我没有编辑它们......

有任何想法吗？？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:09:18.017

那是因为您使用的是`ItemEditor`.

如果你也使用 an`ItemRenderer`应该没问题。

检查这些：

*   [http://livedocs.adobe.com/flex/3/html/help.html?content=cellrenderer_3.html](http://livedocs.adobe.com/flex/3/html/help.html?content=cellrenderer_3.html)
*   [ItemRenderer 与 ItemEditor](https://stackoverflow.com/questions/1958745/itemrenderer-vs-itemeditor)

# ruby - 使用Passenger部署rails

> ID：10031143
> 
> 赞同：4
> 
> 时间：2012-04-05T15:05:07.673
> 
> 标签：ruby, ruby-on-rails-3, apache, deployment, passenger

我想使用 apache 和乘客将我的应用程序部署到我的本地服务器中。我安装了所有先决条件，如开发库和乘客 gem。然后我将这些行包含在我的 /etc/apache2/httpd.conf 文件中；

```
PassengerRoot /home/insane-36/.rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11
PassengerRuby /home/insane-36/.rvm/wrappers/ruby-1.9.3-p125/ruby 
```

现在，我在 /etc/apache2/sites-available 中创建了一个名为 sampleapp 的文件，并将以下内容放入其中；

```
<VirtualHost *:80>
 ServerName sampleapp
 RailsEnv development
 DocumentRoot /home/insane-36/Documents/Web/Rails/sampleapp/public
 <Directory /home/insane-36/Documents/Web/Rails/sampleapp/public>
  AllowOverride all
  Options MultiViews
  Order allow,deny
  Allow from all
 </Directory> 
</VirtualHost> 
```

我启用了该站点，然后将主机名添加到 /etc/hosts 文件中。但是，当我现在尝试使用其 ServerName 浏览该站点时，它给出了权限被拒绝错误：

```
Forbidden

You don't have permission to access / on this server.

Apache/2.2.20 (Ubuntu) Server at sampleapp Port 80 
```

我不知道这里有什么问题。我尝试多次编辑相同的文件，禁用站点，启用站点，重新加载 apache。请向我提出这个问题背后的问题和解决方案。提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:56:49.443

这是目录中的权限问题，而不是守护进程本身；DocumentRoot /home/insane-36/Documents/Web/Rails/sampleapp/public 中有索引文件吗？谁拥有它？Apache 以什么方式运行？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-13T16:59:37.380

我知道这是一个老问题，仍然是谷歌搜索该错误的最佳结果。

解决方案是添加 Require allgranted 作为里面的最后一行

```
 <Directory /home/insane-36/Documents/Web/Rails/sampleapp/public>
  AllowOverride all
  Options MultiViews
  Order allow,deny
  Allow from all
  Require all granted
 </Directory> 
```

# nhibernate - 如何关闭 Fluent NHibernate 中的锁定？

> ID：10031146
> 
> 赞同：4
> 
> 时间：2012-04-05T15:05:14.777
> 
> 标签：nhibernate, fluent-nhibernate

当我将数据导入一个大表时，我遇到了这个问题，整个网站都会关闭，直到导入完成。插入/更新过程最多可能需要 3 小时才能完成。此外，如果由于某种原因引发异常，则表将无限期锁定，直到重新启动应用程序池。

我调查了正在发生的事情。显然，在此过程完成之前，所接触的表格都被锁定。如果这是直接 SQL 查询，我会在查询中添加“with (NOLOCK)”来解决问题。但是，我不知道如何告诉 Fluent NHibernate 将其添加到它生成的查询中。

另外，在构建会话工厂时，是否有一种方法可以在默认情况下将“with (NOLOCK)”设置为所有查询？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T10:21:23.290

当您打开会话或无状态会话时，使用 IsolationLevel.ReadUncomitted 开始事务。这相当于在该事务中的所有语句上指定 NOLOCK。

```
using (var session = _sessionFactory.OpenSession())
using (var transaction = session.BeginTransaction(IsolationLevel.ReadUncommitted))
{
    // do work

    transaction.Commit();
} 
```

# linux - Linux 排序不适用于负浮点数

> ID：10031156
> 
> 赞同：11
> 
> 时间：2012-04-05T15:05:55.373
> 
> 标签：linux, bash, unix, sorting, ubuntu

如何对这种输入进行排序？

```
0.00159265291648695254
-0.00318530179313823899
0
0.00999983333416666468
0.00362937767285478371
0.00477794259012844049
-0.00637057126765263261
0.00681464007477014026
-0.00840724736714870645
-0.00522201549675090458 
```

要么`sort -n data`并`sort -g data`产生这个：

```
0
0.00159265291648695254
-0.00318530179313823899
0.00362937767285478371
0.00477794259012844049
-0.00522201549675090458
-0.00637057126765263261
0.00681464007477014026
-0.00840724736714870645
0.00999983333416666468 
```

另一方面`-1.whatever`将在零之前。我需要那种注意到减号的东西。谢谢你。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-05T15:48:41.797

所有这些麻烦都做了我的本地设置。我的 ubuntu 是捷克语：

```
$ echo $LANG
cs_CZ.UTF-8 
```

在这个本地设置中，它不是小数点，而是一个将整数与其他整数分开的小数逗号（正如我们在数学课中所认为的那样，在我们的语言中，我们确实写的是逗号而不是点）。

所以：

```
echo '0,03 >> 0,4 >
> -0,3 >
> 0' | sort -n
> 0
> -0,3 >
> 0,4 >
0,03 > 
```

如果您正在编写 bash 脚本，请将排序例程设置为使用“正常”设置。

```
export LC_ALL=C 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:15:17.233

问题可能出在您的排序命令中。如果我运行相同，我的结果与预期的一样：

```
$ echo '0.00159265291648695254
> -0.00318530179313823899
> 0
> 0.00999983333416666468
> 0.00362937767285478371
> 0.00477794259012844049
> -0.00637057126765263261
> 0.00681464007477014026
> -0.00840724736714870645
> -0.00522201549675090458' | sort -n
-0.00840724736714870645
-0.00637057126765263261
-0.00522201549675090458
-0.00318530179313823899
0
0.00159265291648695254
0.00362937767285478371
0.00477794259012844049
0.00681464007477014026
0.00999983333416666468 
```

如果不使用它，你应该使用 GNU 排序

```
sort (GNU coreutils) 5.93
Copyright (C) 2005 Free Software Foundation, Inc.
This is free software.  You may redistribute copies of it under the terms of
the GNU General Public License <http://www.gnu.org/licenses/gpl.html>.
There is NO WARRANTY, to the extent permitted by law.

Written by Mike Haertel and Paul Eggert. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-20T16:09:41.007

我有同样的问题。对于 1.0 和 -1.0 之间的数字。sort -n（或-g）不能解决它。我终于把所有的东西都乘了一个大数，排序，然后再除。尽管如此，我还是不明白为什么linux会出现这样的错误

# ajax - 如何在 JSF 2.0 中使用表单重新呈现页面的一部分？

> ID：10031159
> 
> 赞同：7
> 
> 时间：2012-04-05T15:06:16.197
> 
> 标签：ajax, forms, jsf-2, richfaces

目前我们正在尝试从 JSF 1.2 迁移到 JSF 2.0，我们面临的问题之一是无法重新呈现包含表单的页面的一部分。像这样（重新渲染`outerDiv`或表单本身）：

```
<h:panelGroup id="outerDiv">
    <h:form id="form1">...</h:form>
    <h:form id="form2">...</h:form>
</h:panelGroup> 
```

我的意思是，如果我更新`outerDiv`所有内容都会更新，但表单（或表单）本身会损坏并且行为异常，那么至少 ajax 调用在第一次触发时不起作用，或者不是调用某个 bean 的方法，而是创建了该 bean 的新实例并且什么都不做（要么在每次通话时破坏以前的通话，要么在第一次通话时创建新通话然后什么也不做）。该问题可以通过仅重新渲染表单内的组件来解决，如下所示（更新`innerDiv1`和`innerDiv2`）：

```
<h:panelGroup id="outerDiv">
   <h:form id="form1">
       <h:panelGroup id="innerDiv1">...</h:panelGroup>
   </h:form>
   <h:form id="form2">
       <h:panelGroup id="innerDiv2">...</h:panelGroup>
   </h:form>
</h:panelGroup> 
```

但是我们有很多地方包含一些页面，`ui:include`并且在该页面内部查看并在那里更新某些组件并不是很方便。此外，我们必须修改所有这些页面，因为其中许多页面在表单中没有通用的包装 div，并且单独更新每个组件将非常麻烦且容易出错。
那么，是否有可能让 JSF 2.0 像在 JSF 1.2 中一样使用第一种方法正确更新页面的一部分？

* * *

编辑：看起来表单渲染的问题是我使用的richfaces 4.2问题`a4j:ajax`（其后继者`a4j:support`与richfaces 3.3.3一起使用）和基于`rich:commandButton`. 当我用本机 jsf 的表单替换它们时，`f:ajax`似乎正确刷新了它们。但是外部 div 的问题仍然存在

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T17:29:25.707

这与部分状态保存有关。如果您对一个组件进行 ajax 更新，该组件又包含一个表单作为其子项之一，那么它的视图状态将丢失。该表单中的每个第一个 ajax 请求都会失败，因为没有视图状态。但是，如果该 ajax 请求正在重新呈现表单本身，那么它将起作用。

要解决此问题，您需要在 ajax /属性旁边**显式**包含其他表单的 ID，无论何时从*另一个*表单调用它。`render``update``outerDiv`

 *例如

```
<h:form>
    <h:commandButton value="Update other forms">
        <f:ajax render="outerDiv form1 form2" />
    </h:commandButton>
</h:form>
<h:panelGroup id="outerDiv">
    <h:form id="form1">...</h:form>
    <h:form id="form2">...</h:form>
</h:panelGroup> 
```

不，这不会导致带有重复组件的 ajax 响应。它只会触发 JSF 准备和保存其他表单的状态。

### 也可以看看：

*   [JSF 2.0 中的通信 - 包含另一种表单的内容的 Ajax 呈现](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm)*

# touch - 如何在 android avd 中运行 sencha touch 程序？

> ID：10031165
> 
> 赞同：0
> 
> 时间：2012-04-05T15:06:34.720
> 
> 标签：touch, extjs

在 sencha touch 中，我构建了简单的 hello word 程序。它在浏览器上运行良好，但我不知道如何在 android 模拟器中运行这个程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:12:01.450

基本上有两种方法可以做到这一点：

1.  使用 Phonegap 将您的应用程序构建为原生 Android 应用程序。详细说明见：http: [//phonegap.com/start#android](http://phonegap.com/start#android)

2.  如果您使用的是 Sencha Touch 2，您可以通过 Sencha SDK 使用它内置的原生 Android 封装。看到这个：[http ://docs.sencha.com/touch/2-0/#!/guide/native_android](http://docs.sencha.com/touch/2-0/#!/guide/native_android)

# objective-c - 过滤我使用 NSSearchField 加载核心数据的数据

> ID：10031167
> 
> 赞同：2
> 
> 时间：2012-04-05T15:06:46.673
> 
> 标签：objective-c, xcode, core-data, nssearchfield

我如何使用`NSSearchField`过滤器数据加载到带有核心数据的程序中？

我想从不与绑定接口的代码中做到这一点

（请给我有关它的教程）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:22:33.413

我认为您正在寻找的是有关使用带有 NSFetchRequest 的谓词的信息。

请参阅[Apple](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/predicates.html#//apple_ref/doc/uid/TP40001798-SW1)关于谓词编程的文档。

不？那么你有没有[看过苹果](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/SearchFields/Articles/AddingSearchField.html)关于搜索字段的文档？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T19:02:50.857

可能没有比 cimgf.com 上的核心数据更权威的专家（Apple 之外）了。这是一个教程，可以帮助您准确地完成您所需要的。

[http://www.cimgf.com/2008/11/25/adding-itunes-style-search-to-your-core-data-application/](http://www.cimgf.com/2008/11/25/adding-itunes-style-search-to-your-core-data-application/)

编辑：您可以通过在阵列上使用另一个 NSPredicate 来进一步过滤数据而无需返回磁盘。如果您有一个`NSFetchedResultsController`被叫`myFetchController`和一个`NSPredicate`被命名的`myPredicate`，您可以执行以下操作。

```
NSArray * results = [myFecthController fetchedObjects];
NSArray * filteredResults = [results filteredArrayUsingPredicate:myPredicate]; 
```

# jquery - Jquery .on 和 .off 不适用于 mouseenter 和 mouseleave 事件

> ID：10031171
> 
> 赞同：-1
> 
> 时间：2012-04-05T15:07:09.160
> 
> 标签：jquery, html, mouseenter, mouseleave

我正在尝试`jQuery` `mouseenter`和`mouseleave`事件一起玩，但失败了。

这是我想要做的

```
$("#selector").mouseenter(function(){
        some code....
        jQuery(this).off('mouseenter'); 
    }
);
$("#selector").mouseleave(function(){
    some code....
    jQuery(this).on('mouseenter');
}); 
```

在这`.off()`工作，但不幸`.on`的是没有工作。

有人能帮我一下吗？

提前谢谢。

> > >

编辑：对不起，我上述问题中的信息较少。

我需要打开工具提示`mouseenter`并在该工具提示中有一些按钮。此工具提示附加在同一 div 中。因此，当我尝试单击工具提示中的按钮时，它会调用`mouseenter`事件，因此工具提示会再次附加到 div 中。`.off()`因此，一旦调用 tooptip 直到鼠标不离开选择器，我就会调用事件。

如果您需要更多信息，请与我们联系。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:13:05.973

您需要将事件重新绑定到处理程序。`$(this).on('mouseenter');`不会将任何处理程序绑定到它。

尝试使用函数绑定为处理程序，以便它可以再次绑定，而`on`不是`off`使用`.one`

```
$("#selector").one('mouseenter', selMouseEnter);

$("#selector").mouseleave(function(){
    some code....
    $("#selector").one('mouseenter', selMouseEnter);
});

function selMouseEnter () {
    some code....
} 
```

**编辑：**您尝试做的事情可以使用`.hover`或简单地实现`.mouseenter`和`.mouseleave`功能来实现。无需`bind/unbind`在 mouseenter 和 mouseleave 上调用一次这些函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:12:31.433

和方法不用于打开`on`和`off`关闭事件，它们用于绑定和取消绑定事件。

所以这：

```
$("#selector").mouseenter(function(){
  some code....
}); 
```

与以下内容相同：

```
$("#selector").on("mouseenter", function(){
  some code....
}); 
```

和：

```
$("#selector").bind("mouseenter", function(){
  some code....
}); 
```

当鼠标悬停在元素上时，您不必取消绑定事件，只需处理`mouseenter`and`mouseleave`事件：

```
$("#selector").mouseenter(function(){
  some code....
}).mouseleave(function(){
  some code....
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:17:33.250

您可以通过以下方式简单地实现您想要做的事情：

```
$("#selector").mouseenter(function(){
    some code....
}).mouseleave(function(){
    some code....
}); 
```

不需要重新绑定和解除绑定。

另外，你用`.on`错了，你也需要传递一个函数。请参阅[`.on`文档](http://api.jquery.com/on/)。

# .net - .NET 框架 4.5 中的 WPF 和分组数据性能：是否有测试？

> ID：10031174
> 
> 赞同：0
> 
> 时间：2012-04-05T15:07:21.903
> 
> 标签：.net, wpf, performance, wpfdatagrid, .net-4.5

当由于缺少虚拟化而对数据进行分组时，WPF Listbox 或 Datagrid 表现出非常糟糕的性能：

[带分组的 WPF DataGrid 虚拟化](https://stackoverflow.com/questions/1477044/wpf-datagrid-virtualization-with-grouping)

.NET Framework 4.5 承诺性能改进。（[在显示大量分组数据时提高了性能](http://msdn.microsoft.com/en-us/library/bb613588(v=vs.110).aspx#grouped_virtualization)）。这是真的吗？有人试过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T12:06:36.610

开箱即用没有性能改进。需要设置附加属性 [VirtualizingPanel.IsVirtualizingWhenGrouping](http://msdn.microsoft.com/en-us/library/system.windows.controls.virtualizingpanel.isvirtualizingwhengrouping%28v=vs.110%29.aspx)（框架 4.5 中的新功能），它允许在分组时打开虚拟化。

```
<DataGrid EnableColumnVirtualization="True" EnableRowVirtualization="True"
   VirtualizingPanel.IsVirtualizingWhenGrouping="True"> 
```

性能增益是巨大的。大约一千个成员组的扩展从大约 40 秒缩短到几分之一秒。

# c# - C#中工厂设计模式的使用示例

> ID：10031176
> 
> 赞同：1
> 
> 时间：2012-04-05T15:07:22.787
> 
> 标签：c#, oop, design-patterns, factory-pattern

我现在了解工厂设计模式背后的理论，但似乎找不到任何实际使用的例子。有人可以提供一个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T22:38:21.607

工厂设计有几种变体：抽象工厂、工厂方法等。由于您对现实世界的示例感兴趣，我想我会分享我所做的。

作为一个例子，我使用了一个数据访问工厂来返回一个数据访问类的具体实例。逻辑类不知道也不关心正在使用哪个数据库；它只是向工厂询问数据类，然后使用该数据类。

这是我的 DataAccessFactory 类中的方法。它负责确定使用哪个数据类，并将其返回给调用者：

```
public static T GetDataInterface<T>() where T : class
{
    Assembly assembly = Assembly.GetExecutingAssembly();

    T theObject = (from t in assembly.GetTypes()
                   where t.GetInterfaces().Contains(typeof(T))
                     && t.GetConstructor(Type.EmptyTypes) != null
                     && t.Namespace == _namespace
                   select Activator.CreateInstance(t) as T).FirstOrDefault() as T;

    return theObject as T;
} 
```

这就是我的一个业务逻辑类发出 DAL 请求的方式：

```
return DataAccessFactory.GetDataInterface<IApplicationData>().GetAll(); 
```

业务逻辑与数据访问层完全解耦。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:13:26.550

由于您的问题非常笼统，因此仅提供有关该主题的一些链接以及示例等：

*   [http://www.dotnetperls.com/factory](http://www.dotnetperls.com/factory)
*   [工厂设计模式（需要批评）](https://stackoverflow.com/questions/4099969/factory-design-pattern-needing-critique)
*   [http://www.dofactory.com/Patterns/PatternAbstract.aspx#_self2](http://www.dofactory.com/Patterns/PatternAbstract.aspx#_self2)
*   [http://www.codeproject.com/Articles/57421/Design-Patterns-Part-2-The-Factory-Pattern](http://www.codeproject.com/Articles/57421/Design-Patterns-Part-2-The-Factory-Pattern)

该模式在 .NET 框架中使用 - 例如与[`WebRequest`](http://msdn.microsoft.com/en-us/library/bw00b1dc.aspx).

# salesforce - 在 salesforce.com 中测试 Rest Web 服务

> ID：10031179
> 
> 赞同：4
> 
> 时间：2012-04-05T15:07:29.987
> 
> 标签：salesforce

我正在 salesforce.com 平台上开发一个 Rest Web 服务。我写了它，当我调用它时它工作正常并给出准确的响应。问题是如何测试它

```
@RestResource(urlMapping='/feedpost/*')

    global class Feedpost9
    {
      @HttpPut
      global static User updateCase() {
         RestRequest req=RestContext.request;
         User user=[SELECT id from User where email=:req.headers.get('email') LIMIT 1];
         return user;          
    }

} 
```

现在我的任务是测试这个 REST Web 服务方法`updateCase`。为了测试 POST 请求方法，我必须在方法调用中设置参数，但在 PUT 方法的情况下 - 我如何`RestContext.request`在测试类中设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T23:32:04.930

在单元测试中必须解决两个问题：

*   需要一个有效的 RestRequest
*   测试环境中缺少数据

这是设置您的方法想要的请求对象的基本技术

```
global class Feedpost9 {

    // your methods here...

    static testMethod void testRest() {
        // set up the request object
        System.RestContext.request = new RestRequest();
        RestContext.request.requestURI = '/feedpost/whatever';
        RestContext.request.addHeader('email', 'blahblah@some.org');
        // Invoke the method directly
        Feedpost9.updateCase();
    }
} 
```

您可能遇到的另一个问题是，在 Salesforce v24 及更高版本的单元测试中，默认情况下无法访问您的数据。这是因为单元测试在一种沙盒中运行，其中没有您的数据，但*包含*您的元数据（RecordTypes 等）。因此，有两种技术可以为您的测试获取数据：

1.  在您的方法上使用`@isTest(SeeAllData=true)`注释。这将使测试方法可以访问您的数据。
2.  让您的测试方法构建/插入测试数据，然后针对该数据运行测试。当测试结束时，您的测试数据会奇迹般地从您的数据库中消失。

我更喜欢使用后一种方法，但有时我会作弊......

# android - getActionBar 返回 null

> ID：10031180
> 
> 赞同：25
> 
> 时间：2012-04-05T15:07:30.483
> 
> 标签：android, android-actionbar

调用`getActionBar`返回`null`。这经常被报道，所以我确保包括其他人使用的解决方案：我的`minSdkVersion=11`，我有一个标题栏，我在`getActionBar`之后打电话`setContentView`。另外，我的活动不是儿童活动。

```
setContentView(R.layout.main);

// experiment with the ActionBar 
ActionBar actionBar = getActionBar();
actionBar.hide(); 
```

设备是运行 Android 3.2 的三星 Galaxy Tab 10.1

提前感谢您的任何想法或建议！

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-05T15:21:07.527

看来您需要通过主题或以下代码请求具有操作栏（！= 标题栏）。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // The Action Bar is a window feature. The feature must be requested
    // before setting a content view. Normally this is set automatically
    // by your Activity's theme in your manifest. The provided system
    // theme Theme.WithActionBar enables this for you. Use it as you would
    // use Theme.NoTitleBar. You can add an Action Bar to your own themes
    // by adding the element <item name="android:windowActionBar">true</item>
    // to your style definition.
    getWindow().requestFeature(Window.FEATURE_ACTION_BAR);

    setContentView(R.layout.main);

    // experiment with the ActionBar 
    ActionBar actionBar = getActionBar();
    actionBar.hide();
} 
```

[[这里](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/ActionBarMechanics.html)]的代码

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-17T13:29:56.020

似乎需要满足几个条件才能使其起作用。让我难过很久的是这个：

确保您的活动扩展了活动（不是 ActionBarActivity）。

```
public class MagicActivity extends Activity 
```

确保您的应用清单具有类似的内容

```
<application
    ...
    android:theme="@android:style/Theme.Holo" > 
```

并确保您的活动布局有

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    ....
    android:theme="@android:style/Theme.WithActionBar" > 
```

-标记

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-11-25T07:30:42.130

我似乎通过用**getSupportActionBar()切换****getActionBar()**解决了我的所有错误。我尝试了不同的主题，添加了**getWindow().requestFeature(Window.FEATURE_ACTION_BAR);** ，确保 setContentView(view) 是第一个，所有其他的东西都是之前看到的。

 ***** * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-06-11T11:13:24.943

操作栏需要带有应用标题的主题或活动。确保您没有将您的应用程序或活动设置为 Theme.NOTITLE。

```
<application
    android:name="com.xxx.yyy.Application"
    android:debuggable="false"
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/Theme.NoTitle"> // remove this line if you have this in your code

<activity
        android:name="com.xxx.yyy.Activity"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:theme="@style/Theme.NoTitle"  // remove this line if you have this in your code
        android:windowSoftInputMode="adjustResize|stateHidden" > 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-05T18:18:44.243

我试图使用支持库从 ActionBarActivity 的片段中获取 ActionBar。我不得不这样做：

```
ActionBarActivity actionBarActivity = (ActionBarActivity)getActivity();
ActionBar actionBar = actionBarActivity.getSupportActionBar(); 
```

我的下一个任务是弄清楚如何使这个通用化。例如，这段代码感觉很脏，因为它要求我的 Fragment 知道它正在被 ActionBarActivity 使用并使用支持库。我认为它应该是一种方法，`getActivity().getActionBar()`如果父 Activity 不是 ActionBarActivity，则首先检查然后上面的代码捕获 ClassCastException。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-04T17:41:06.570

如果为 API14 或更高版本创建应用程序项目，将有一个 values-14 文件夹。确保该文件夹存在并且它有一个 styles.xml 文件，其中包含：

```
<style name="AppBaseTheme" parent="android:Theme.Holo.Light.DarkActionBar">
        <!-- API 14 theme customizations can go here. -->
</style> 
```

我收到此错误是因为我创建了一个新项目并且我不想在我的项目中添加任何额外的值文件夹，所以我只保留了值文件夹并删除了 values-v11 和 values-v14 文件夹。但显然，如果您想使用 ActionBar，API14 及更高版本的默认主题需要在其父 XML 标记中包含一个 ActionBar。所以我认为我可能做错了！希望这可以帮助某人。不过，您最有可能通过上述答案解决您的问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-07-01T11:26:54.697

这解决了我的问题：

```
android.support.v7.app.ActionBar ab = getSupportActionBar(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-19T06:48:56.703

真正的答案应该是@zapl 和@Himanshu Virmani 的结合

对于 Android 清单：

```
<application
    android:name="com.xxx.yyy.Application"
    android:debuggable="false"
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/Theme.NoTitle"> // remove this line if you have this in your code

<activity
        android:name="com.xxx.yyy.Activity"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:theme="@style/Theme.NoTitle"  // remove this line if you have this in your code
        android:windowSoftInputMode="adjustResize|stateHidden" > 
```

对于活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // The Action Bar is a window feature. The feature must be requested
    // before setting a content view. Normally this is set automatically
    // by your Activity's theme in your manifest. The provided system
    // theme Theme.WithActionBar enables this for you. Use it as you would
    // use Theme.NoTitleBar. You can add an Action Bar to your own themes
    // by adding the element <item name="android:windowActionBar">true</item>
    // to your style definition.
    getWindow().requestFeature(Window.FEATURE_ACTION_BAR);
    setContentView(R.layout.activity_main);
    // Hide the status bar for Android 4.1 and higher
    View decorView = getWindow().getDecorView();
    // Hide the status bar.
    int uiOptions = View.SYSTEM_UI_FLAG_FULLSCREEN;
    decorView.setSystemUiVisibility(uiOptions);
    // Remember that you should never show the action bar if the
    // status bar is hidden, so hide that too if necessary.
    ActionBar actionBar = getActionBar();
    actionBar.hide();
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-11-18T05:46:23.897

确保您扩展 ACTIONBARACTIVITY 而不是 ACTIVITY 这应该可以解决您的问题

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-05-21T09:27:40.063

只需更改两件事 1) 清单文件编辑 android:theme="@android:style/Theme.Holo" >

2) 片段文件添加 android:theme="@android:style/Theme.WithActionBar"

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-07-27T13:01:28.803

更改系统请求的顺序：

```
@Override
protected void onCreate(Bundle savedInstanceState) {

    getWindow().requestFeature(Window.FEATURE_ACTION_BAR);

    super.onCreate(savedInstanceState);    
    setContentView(R.layout.main);

    // experiment with the ActionBar 
    ActionBar actionBar = getActionBar();
    actionBar.hide();
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-10T19:01:26.407

步骤 01：

改变你的班级家长。**活动到 AppCompatActivity**

IE：

```
public class BluetoothActivity extends AppCompatActivity {
//Your Code
} 
```

步骤02：

如下创建一个全局变量。（我正在使用 androidx。所以这就是导入的样子）

```
androidx.appcompat.app.ActionBar actionBar; 
```

步骤 03：

如下使用深色操作栏。

```
<style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
<!-- Your style -->
</style> 
```

步骤04：

分配 getSupportActionBar(); **到变量，您在onCreate**方法中创建为全局变量。

```
setContentView(R.layout.activity_bluetooth);
actionBar = getSupportActionBar(); //Create this After setContentView
actionBar.show(); //this is for Experimental process only 
```

步骤 05：

现在你可以用你的 actionBar 做任何你想做的事

IE

```
actionBar.setTitle("Profile"); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-02T15:36:18.837

也许你的活动风格是基于 NoActionBar

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-09-12T21:33:30.483

如果您正在开发一个以 sdk>=14 为目标的应用程序，并且您正在扩展 AppCompat 以支持以前版本中的 Material 主题。当您想像后退按钮一样隐藏操作栏中的项目时，您需要执行以下操作：在您的活动中（而不是在片段类中）如果您将使用 getActionBar()，它将返回 null。如 Appsupport 主题 getSupportAcionBar() 将返回操作栏。

如果您想从[DevByte关注，这里是链接](https://www.youtube.com/watch?v=5Be2mJzP-Uw)

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_detail);
    getSupportActionBar().setDisplayHomeAsUpEnabled(false);

} 
```****

# vbscript - VbScript MSMQManagement - 获取消息计数

> ID：10031184
> 
> 赞同：1
> 
> 时间：2012-04-05T15:07:41.913
> 
> 标签：vbscript, msmq

谁能帮我解决这个问题。我正在尝试使用 vbscript 获取 msmq 消息计数。

```
Dim MSMQApp 
Set MSMQApp = CreateObject("MSMQ.MSMQApplication")

Dim qFormat 
For each qFormat in MSMQApp.PrivateQueues
   WScript.Echo qFormat
   Dim Mgmt 
   Set Mgmt = CreateObject("MSMQ.MSMQManagement")
   Mgmt.Init ,,"DIRECT=OS:" & qFormat
   WScript.Echo CLng(Mgmt.MessageCount)
Next 
```

有一个私人队列 - 我在 WScript.Echo qFormat 中看到。但是当初始化我有一个错误：队列未打开或可能不存在。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:10:28.317

问题是 - “如果指定的目标或传出队列不包含任何消息并且不存在对它的句柄，则会引发异常并生成非特定 MQ_ERROR (0xC00E0001) 错误。” 有队列，但其中没有消息 - 异常。

# c - 在C中按下一个键时如何知道Shift键状态？

> ID：10031185
> 
> 赞同：3
> 
> 时间：2012-04-05T15:07:49.500
> 
> 标签：c, macos, console

我想编写一个程序，等待直到按下++ `CTRL`， 然后打印“Hello World！”。我正在使用 MacOSX，我希望它是基于控制台的。`SHIFT``A`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:10:43.820

如果“Console-Based”表示程序必须在终端中运行，则无法区分`Ctrl`+`A`和`Ctrl`+ `Shift`+ `A`；两者都产生相同的输入。

# c++ - 任务栏编程

> ID：10031187
> 
> 赞同：2
> 
> 时间：2012-04-05T15:07:50.297
> 
> 标签：c++, linux, user-interface

我打算像 Tint2 一样为 Linux 编写简单的任务栏管理器，但实现了我自己的想法。这将是统一和色调之间的某种混合。

我有 OpenGL、C++、Python 的经验...

*   现在我想知道创建这样的任务栏我必须知道什么？
*   这样的事情是如何完成的？我应该使用哪些库？
*   如果我想用 OpenGL 做到这一点，我该怎么做，有多难？
*   我是否需要为特定的窗口管理器编程（我正在使用 OpenBox）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:22:57.457

1.  您应该了解 X 和窗口管理器的工作原理。您可能还想了解启动通知。

2.  这太开放了，无法回答。

3.  ……十一十七？

4.  不，但是您应该了解 ICCCM 和 EWMH，这样您才能与它们相处融洽。

# java - 这会使 StringBuilder 的使用变得多余吗？

> ID：10031189
> 
> 赞同：1
> 
> 时间：2012-04-05T15:07:58.630
> 
> 标签：java, string, immutability, stringbuilder, redundancy

如果我做：

```
StringBuilder sb = new StringBuilder();
sb.append("somestring" + "hello" + "more strings" + "last one"); 
```

是否与以下内容相同：

```
string s = "somestring";
s + "hello" + "more strings" + "last one"; 
```

它会使使用字符串生成器毫无意义吗？从而需要使用：

```
StringBuilder sb = new StringBuilder();
sb.append("somestring");
sb.append("hello");
sb.append("more strings");
sb.append("last one"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:11:04.047

您的长问题的简短回答是“是”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T15:11:37.550

如果这是您在该代码片段中的*全部*用途`StringBuilder`，那确实毫无意义。如果您在初始调用后继续附加`append`，那么它并非*完全*没有意义。不过，您的最后一个示例比前两个更有意义。

我假设您帖子中的常量只是为了清楚起见。如果它们确实是常量，编译器将进行[*常量折叠*](https://stackoverflow.com/questions/8581824/does-java-compiler-include-string-constant-folding)，使第一个示例等效于

```
StringBuilder sb = new StringBuilder();
sb.append("somestringhello"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T15:24:53.983

`StringBuilder``StringBuffer`当您将多次附加元素时，应该使用而不是字符串“+”操作。如：

```
String s = new String();
for(int i=0; i < x; i++){
  s += i;
} 
```

因为这将被转换为（类似的东西）：

```
String s = new String();
for(int i=0; i < x; i++){
   StringBuffer sb = new StringBuffer();
   sb.append(s);
   sb.append(i)
   s = sb.toString();
} 
```

在每次迭代中（在等效字节码内），您正在创建 a`StringBuffer`并将其转换为`String`.

有很多来源，但即；[这个](http://www.venishjoe.net/2009/11/java-string-concatenation-and.html)和[这个](http://www.znetdevelopment.com/blogs/2009/04/06/java-string-concatenation/)都可以。我在 2010 年左右对这个问题做了一个小研究，我对这个问题的了解可以追溯到那个时候。如果从那时起还有其他改进，我不知道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T15:15:09.267

查看使用 StringBuilder 的代码与仅连接字符串的代码的编译输出，我发现最新的编译器通常会使用 StringBuilder，无论何时合适。话虽如此，请注意，在您的第一个示例中，您需要说 's = s + "hello"; 为了捕捉结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T07:19:02.627

根据[String javadocs](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)，`+`操作符被转换为`StringBuilder`反正。

两个主要区别是：

1.  当您像在示例中那样连接一组文字时。常量折叠将在编译时将这些单独的字符串转换为单个字符串，从而避免在运行时执行此操作。

    `"somestring" + "hello" + "more strings" + "last one"`变成`"somestringhellomore stringslast one"`

2.  当您在循环或其他分支结构中连接时。使用`+`将创建多个`StringBuilder`实例，这些实例将在运行时使用更多内存和处理能力。（见[http://nicklothian.com/blog/2005/06/09/on-java-string-concatenation/](http://nicklothian.com/blog/2005/06/09/on-java-string-concatenation/)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T15:11:17.700

StringBuilder 是可变的，但 String 不是。StringBuilder 使这些字符串操作更加高效。对于像您的示例这样的小作品，您可能不会注意到差异。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T15:16:17.110

在第一种情况下，固定文字将被编译器检测到，并将作为单个值内联。喜欢

```
sb.append("somestring" + "hello" + "more strings" + "last one"); 
```

将被视为

```
sb.append("somestringhellomore stringslast one"); 
```

所以它只会追加一次到 StringBuilder。

在第二种情况下，它会附加多次。

# asp.net-mvc - 如何在 mvc3 的一个视图中显示 webgrid 内容并插入数据表单？

> ID：10031191
> 
> 赞同：0
> 
> 时间：2012-04-05T15:08:04.573
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我无法仅在一个视图中显示 Web 网格包含和插入数据表单

我创建了一个应用程序，`index.cshtml`我在其中显示所有员工详细信息。

`index.cshtml`

```
<div>
WebGrid Control
<br /><br />
@Html.Partial("_WebGridPartial")
</div> 
```

我在其中创建了显示数据的局部视图。

现在我创建了另一个视图`Create.cshtml`，它获取员工详细信息并保存到数据库中。

但是，如果我想同时显示两者`grid`，`create employee form`那么我该如何使用它呢？因为问题是当我显示它正在使用的数据时，它`@model IEnumerable<MvcGrid.Models.EmpData>` 的类型是 IEnumerable 并且在`Create View`我需要使用的输入字段内部，`@model MvcGrid.Models.EmpData`并且只能使用一个模型语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:30:36.430

您可以传递`index.cshtml`包含您的网格数据和员工的 ViewModel 的 ViewModel。

例如

```
public class EmployeesViewModel
{
    public IEnumerable<EmployeeViewModel> employeesForGrid { get; set; }
    public EmployeeViewModel employeeForEdit { get; set; }
} 
```

在您的控制器中...

```
public ViewResult Index()
{
    IEnumerable<Employee> employees = _employeeRepo.GetEmployees();
    IEnumerable<EmployeeViewModel> employeesForGrid = MapEmployeesForView(employees);

    var model = new EmployeesViewModel()
    {
        employeesForGrid = employeesForGrid,
        employeeForEdit = new EmployeeViewModel(); 
    };

    return View(model);
} 
```

然后`index.cshtml`：

```
@model EmployeesViewModel

@{Html.RenderPartial("_WebGridPartial", Model.employeesForGrid);}
<br/><br/>
@{Html.RenderPartial("_Create", Model.employeeForEdit);} 
```

# iphone - 有没有办法以编程方式检查构建是否在 Adhoc、发布、分发中？

> ID：10031198
> 
> 赞同：7
> 
> 时间：2012-04-05T15:08:42.230
> 
> 标签：iphone, ios, build, adhoc

就像标题说的那样，我需要一种方法来检测构建是临时的、发布的还是分发的，因为我对每种类型的构建使用 keychain-access-groups 我使用不同的配置，因此捆绑种子 ID 是不同的。我只需要一种有效的方法来在某些构建上切换它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T15:39:54.743

转到您要测试的目标，然后构建设置并搜索预处理，您应该会看到如下内容：

![在此处输入图像描述](../Images/4f12a536b44e4c9afa2eb5a1b354d47d.png)

如您所见，调试已经有一个值。如果要检查发布版本，可以输入 RELEASE=1。然后在您的代码中放入这样的 if 语句：

```
#if DEBUG==1
// do debug build settings stuff there
#endif

#if RELEASE==1
// do release build settings stuff there
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:13:09.937

也许您可以使用自定义构建设置（又名定义），它在不同的构建配置中会有不同的值？

# javascript - 如何使用js通过cookie发送参数

> ID：10031200
> 
> 赞同：1
> 
> 时间：2012-04-05T15:08:51.853
> 
> 标签：javascript, html, cookies

我有两个 HTML 文件。一个文件需要向第二个文件发送标题。第二个文件需要接收标题和`alert()`它。我需要更改哪些代码才能根据需要运行？

**cookieTitleSend.html**

```
<html>
<head>
<script type="text/javascript">

function setCookie(Title_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var Title_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=Title_name + "=" + Title_value;
}
</script>
</head>
<body onload="setCookie("Title_name",PHP Hello World,1);">
</body>
</html> 
```

**cookieTitleReceive.html**

```
<html>
<head>
<script type="text/javascript">
function getCookie(Title_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
  {
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==Title_name)
    {
    return unescape(y);
    }
  }
}

function checkCookie()
{
var Title_name=getCookie("Title_name");
if (Title_name!=null && Title_name!="")
  {
  alert("Welcome again your Title is
:  " + Title_name);
  }
else 
  {
  Title_name=prompt("There is no title :","");

  }
}
</script>
</head>
<body onload="checkCookie()">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:15:08.110

您的代码看起来有一些问题，但您可以从正确连接事件处理程序开始。

```
<body onload="setCookie('Title_name','PHP Hello World',1);"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:22:53.930

我认为您的代码中可能有一些微妙的东西，请查看[此](http://www.javascripter.net/faq/cookies.htm)链接以了解如何使用 cookie。也就是说，您的 setter 可能需要进行以下更改：

```
exdate.setTime(today.getTime() + 3600000*24*exDays);
document.cookie = cookieName+"="+escape(value)
             + ";expires="+exdate.toGMTString(); 
```

我在 GetCookie 的循环中看到的内容：

```
for (i=0;i<ARRcookies.length;i++) 
```

我认为应该是：

```
for (i=0;i<ARRcookies.length-1;i++) 
```

希望有帮助！

-sf

# css - 流体自适应无序列表

> ID：10031202
> 
> 赞同：0
> 
> 时间：2012-04-05T15:09:04.510
> 
> 标签：css, html-lists, responsive-design, fluid-layout

我想知道是否有解决方案：（可能没有，但你永远不知道！）

假设我们有一个这样的 ul 列表：

```
<ul class="nav">
<li><a href="/">Home</a></li>
<li><a href="/">What we do</a></li>
<li><a href="/">Human resources</a></li>
<li><a href="/">How we work</a></li>
<li><a href="/">Management</a></li>
<li><a href="/">Multimedia</a></li>
</ul> 
```

我们的 CSS 使用 inline-block 技巧使其水平显示：

```
.nav li {display:inline-block;} 
```

我们添加了一些基本的视觉效果

```
.nav li {border-right: 3px solid #ffb521;}
.nav a:link, .nav a:visited {color: #a51d21;font: bold 18px/18px Calibri,Tahoma,sans-serif;padding: 10px 30px 10px 30px;display: block;background: #ffd074;}
.nav a:hover, .nav a:active {background:#a54d24;color:#ffd074;} 
```

没什么特别的。

这也是小提琴：http: [//jsfiddle.net/rjsaQ/](http://jsfiddle.net/rjsaQ/)

所以问题来了：我怎样才能确保我的水平列表会拉伸并占用所有可用空间，但不会转到下一行。我想我应该删除填充，并使用最大宽度，但我试过了，它并没有真正起作用。我应该结合宽度和最大宽度吗？

提前感谢您的时间和答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:21:58.573

有，您应该将列表设置为`display: table`并列出项目`display: table-cell`，但此解决方案不是跨浏览器

示例：http: [//jsfiddle.net/rjsaQ/1/](http://jsfiddle.net/rjsaQ/1/)

# map - 配置Hadoop集群时应该设置多少个mapper/reducer？

> ID：10031204
> 
> 赞同：4
> 
> 时间：2012-04-05T15:09:11.240
> 
> 标签：map, hadoop, reduce

在配置 Hadoop 集群时，为集群设置映射器/减速器数量的科学方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T15:42:25.397

没有公式。这取决于你有多少核心和多少内存。mapper的数量+reducer的数量一般不应该超过core的数量。请记住，机器也在运行任务跟踪器和数据节点守护程序。一般建议之一是映射器多于减速器。如果我是你，我会用合理数量的数据运行我的一项典型工作来进行尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-01T05:49:02.837

引自“Hadoop The Definite Guide, 3rd edition”，第 306 页

> 由于 MapReduce 作业通常受 I/O 限制，因此拥有比处理器更多的任务以获得更好的利用率是有意义的。
> 
> 超额订阅的数量取决于您运行的作业的 CPU 利用率，但一个好的经验法则是比处理器多**1 到 2**个任务（包括 map 和 reduce 任务）。

上面引用中的处理器相当于一个逻辑核心。

但这只是理论上的，很可能每个用例都不同，需要执行一些测试。但这个数字可能是一个很好的测试开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:35:42.700

取自[Hadoop Gyan-我的博客](http://hadoop-gyan.blogspot.in)：

> 映射器的数量是根据前面描述的数据局部性原则决定的。数据局部性原则：Hadoop 尽最大努力在数据存在本地的节点上运行 map 任务，以优化网络和节点间通信延迟。由于输入数据被分割成块并馈送到不同的映射任务，因此希望将馈送到该映射任务的所有数据在单个节点上可用。由于 HDFS 仅保证大小等于其块大小 (64M) 的数据存在于一个节点上，建议/提倡拆分大小等于 HDFS 块大小，以便映射任务可以利用此数据本地化。因此，每个映射器有 64M 的数据。如果我们看到一些映射器运行了很短的时间，请尝试减少映射器的数量并使它们运行更长的时间大约一分钟。
> 
> reducer 的数量应该略小于集群中的 reduce 槽的数量（槽的概念是在配置集群时在作业/任务跟踪器属性中预先配置的），以便所有的 reducer 在一波中完成充分利用集群资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T20:40:59.673

可能，您还应该查看减速器延迟加载，它允许减速器在需要时稍后启动，因此基本上可以增加映射槽的数量。虽然对此没有太多想法，但似乎很有用。

# php - PHP/Mysql/jQuery - 长轮询 - 2 次数据库检查之间的最佳延迟

> ID：10031205
> 
> 赞同：0
> 
> 时间：2012-04-05T15:09:14.453
> 
> 标签：php, jquery, long-polling

我目前正在处理一个长轮询脚本，我必须在其中检查数据库是否有新更改。

我想知道在一个while循环中进行查询是否会消耗太多资源然后再次进行查询**而没有任何延迟**，或者我是否应该让**一点延迟**，比如一秒钟。

例如，当我在 Facebook 上查看时，它似乎在一秒钟内就有了新的变化，所以我猜他们在检查数据库时没有任何延迟，或者这种延迟真的很短，比如半秒。

我不期待一个直接的答案，但更多关于最佳实践的建议

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:15:49.137

是的，如果 while 循环尽可能快地运行（它会），您不仅会获得可能会压倒数据库连接的快速速率，而且您也不会获得非常“均匀”的轮询速率。

尝试类似的东西

```
$polllength = 1;
while(1) {
    $polltime = microtime(true);
    //poll function call;
    $endtime = microtime(true);
    $sleeptime = $polllength - ($endtime-$polltime);
    sleep($sleeptime);
} 
```

这样，无论轮询功能如何变化，您的轮询大约相隔 $polllength 秒（这将归因于 INTARNETS）

编辑：另外，确保有办法摆脱那个while循环，但每个人都应该知道你们都知道

对于负载平衡，您希望能够以某种方式调整 polllength 值，以免完全硬编码。无论是在配置文件中还是其他什么都取决于您，它甚至可能是一个随着负载的增加而增加的值。这取决于最终用户对它的实际“感觉”以及服务器的实际运行情况。一个好的经验法则是 n 个线程最大值意味着 n *（轮询长度/平均响应时间）用户。当用户等待来自不堪重负的服务器的响应时，超出该限制无疑会增加响应时间。

# php - 如何在wordpress中自动发布新帖子

> ID：10031208
> 
> 赞同：0
> 
> 时间：2012-04-05T15:09:18.713
> 
> 标签：php, wordpress

我想创建一个插件，通过该插件用户可以发布新帖子，而无需使用 Wordpress 帖子选项。有没有可用的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:16:58.873

如果要从插件发布帖子，则必须调用[wp_insert_post()](http://codex.wordpress.org/Function_Reference/wp_insert_post)函数，并提供要创建的新帖子的适当详细信息。

# php - 将 PHP 5.3 中的匿名函数转换为 PHP 5.2 等效函数

> ID：10031210
> 
> 赞同：1
> 
> 时间：2012-04-05T15:09:36.857
> 
> 标签：php, closures, anonymous

我在 PHP 5.2 的第 2 行和第 13 行有错误，我不知道要进行更正，我尝试使用 create_function 但不起作用，有人可以帮忙吗？

```
function _process_special_keyword($str){
   $callback = function($match){
     $ret = $match[1] . '[' . $match[2] . ']';
     if(!empty($match[3])){
       $ret .= '.[' . $match[3] . ']';
     } 
     $ret .= $match[4];
     return $ret;           
   };

   $strSQL = preg_replace_callback('/([\s\(\.,])(' . SPECIAL_KEYWORDS . ')(?:\.(' . SPECIAL_KEYWORDS . '))?([\s\)\.,])/i', $callback, $str);

   $callback = function($match){
     return 'CASE WHEN ' . $match[1] . ' THEN ' . $match[2] . ' ELSE ' . $match[3] . ' END';
   };

   $strSQL = preg_replace_callback('/if\s*\((.+),(.+),(.+)\)/i', $callback, $strSQL);
   return $strSQL;
} 
```

谢谢。

错误：解析错误：语法错误，意外的 T_FUNCTION

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:14:18.423

使用 时`create_function()`，第一个参数的内容应该是 PHP 代码的字符串表示形式，它将填充`function`声明的括号。第二个参数应该只包含函数声明的花括号内的代码`{}`，实际的声明本身应该被省略。

试试这个代码：

```
function _process_special_keyword($str){

   $callback = create_function(
     '$match',
     '
       $ret = $match[1] . "[" . $match[2] . "]";
       if(!empty($match[3])){
         $ret .= ".[" . $match[3] . "]";
       } 
       $ret .= $match[4];
       return $ret;
     '
   );

   $strSQL = preg_replace_callback('/([\s\(\.,])(' . SPECIAL_KEYWORDS . ')(?:\.(' . SPECIAL_KEYWORDS . '))?([\s\)\.,])/i', $callback, $str);

   $callback = create_function(
     '$match',
     'return "CASE WHEN " . $match[1] . " THEN " . $match[2] . " ELSE " . $match[3] . " END";'
   );

   $strSQL = preg_replace_callback('/if\s*\((.+),(.+),(.+)\)/i', $callback, $strSQL);
   return $strSQL;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T15:15:09.753

您可以在此函数之外声明回调。像这样：

```
function _callback_one($match){
  $ret = $match[1] . '[' . $match[2] . ']';
  if(!empty($match[3])){
    $ret .= '.[' . $match[3] . ']';
  } 
  $ret .= $match[4];
  return $ret;           
}

function _callback_two($match){
  return 'CASE WHEN ' . $match[1] . ' THEN ' . $match[2] . ' ELSE ' . $match[3] . ' END';
}

function _process_special_keyword($str){
   $strSQL = preg_replace_callback('/([\s\(\.,])(' . SPECIAL_KEYWORDS . ')(?:\.(' . SPECIAL_KEYWORDS . '))?([\s\)\.,])/i', '_callback_one', $str);

   $strSQL = preg_replace_callback('/if\s*\((.+),(.+),(.+)\)/i', '_callback_two', $strSQL);
   return $strSQL;
} 
```

注意：如果这些函数在一个类中（意味着函数需要像 一样调用`$this->_callback_one`），则传递一个数组作为“回调”参数。

```
function _process_special_keyword($str){
   $strSQL = preg_replace_callback('/([\s\(\.,])(' . SPECIAL_KEYWORDS . ')(?:\.(' . SPECIAL_KEYWORDS . '))?([\s\)\.,])/i', array($this, '_callback_one'), $str);

   $strSQL = preg_replace_callback('/if\s*\((.+),(.+),(.+)\)/i', array($this, '_callback_two'), $strSQL);
   return $strSQL;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:26:04.490

根据对象问题，我认为更快的方式是这样的，

```
$f = <<<myfunc
 \$ret = \$match[1] . '[' . \$match[2] . ']';
 if(!empty(\$match[3])){
   \$ret .= '.[' . \$match[3] . ']';
 } 
 \$ret .= \$match[4];
 return \$ret;           
myfunc;

$callback = create_function('$match',$f); 
```

注意 $ 和 <<< FLAG FLAG 之前的反斜杠；构造。在实践中，火箭的答案更简单。

# firefox-addon - XUL 中的 br 或换行符

> ID：10031215
> 
> 赞同：1
> 
> 时间：2012-04-05T15:09:45.547
> 
> 标签：firefox-addon, xul

如何在没有的情况下将文本移动到 XUL 中的新行`html:br`？XUL 中是否有换行符或类似的东西？

```
<description>
    Some
    text
    here
</description> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T17:09:40.310

`<description>`元素可以尊重换行符，与`<html:p>`. 您只需使用[`white-space`CSS 属性](http://www.w3.org/TR/CSS2/text.html#white-space-prop)：

```
<description style="white-space: pre-wrap;">
    Some
    text
    here
</description> 
```

# html - 有没有类似 .selector:not:nth-child(formula) 的东西？

> ID：10031216
> 
> 赞同：1
> 
> 时间：2012-04-05T15:09:47.300
> 
> 标签：html, css

我有一盒选择器，它们都共享这个类。`widgetContainer`可以在一行中容纳 3 个 div，然后再放入下一行。我`nth-child(3n+0)`用来从每个 3rd div 的右侧取出边距，允许我在前 2 个 div 中添加更多 10px 的边距（这使得 div 完全适合容器）。

但我想知道的是，是否有办法定位`nth-child(3n+0)`并删除边距，然后定位，例如`:not:nth-child(3n+0)`允许我在其上添加额外的 10px 边距？这允许我保持我的 CSS 不变，如果不支持伪选择器，那么它会很好地降级。

让我向您展示我的代码：

**HTML**

```
<div class="widgetContainer">
    <div class="widgetBox">
        <dt>Title</dt>
        <dd>Lorem Ipsum..</dd>
    </div>
    <div class="widgetBox">
        <dt>Title</dt>
        <dd>Lorem Ipsum..</dd>
    </div>
    <div class="widgetBox">
        <dt>Title</dt>
        <dd>Lorem Ipsum..</dd>
    </div>
    <div class="widgetBox">
        <dt>Title</dt>
        <dd>Lorem Ipsum..</dd>
    </div>
    <div class="widgetBox">
        <dt>Title</dt>
        <dd>Lorem Ipsum..</dd>
    </div>
    <div class="widgetBox">
        <dt>Title</dt>
        <dd>Lorem Ipsum..</dd>
    </div>
</div> 
```

**CSS**

```
.widgetBox {
    width: 300px;
    height: auto;
    float: left;
    margin: 30px 20px 10px 0;
    border: 3px solid #e4e4e4;
}
.widgetBox:nth-child(3n+0) {
    margin: 30px 0 10px 0;
} 
```

**[在 JSFiddle 上](http://jsfiddle.net/fZv27/)**

我可以用 CSS 做的是让`widgetBox`边距为`30px 30px 10px 0`，但这在不支持的浏览器中不起作用`nth-child`，它将强制每行有 2 个 div，因为边距尚未从第 3 个 div 中删除。

如果您需要更多说明，请告诉我！

*注意 - 我真的不想为此使用 jQuery，但如果有必要，请告诉我，我一定会考虑使用它！*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:20:25.643

没有非选择器..只需添加两个样式：

```
.widgetBox:nth-child(3n+1) {
    margin: 30px 30px 10px 0;
}

.widgetBox:nth-child(3n+2) {
    margin: 30px 30px 10px 0;
} 
```

# php - 在 that have been received from submitting a from in the page itself

> ID：10031217
> 
> 赞同：0
> 
> 时间：2012-04-05T15:09:57.927
> 
> 标签：php, javascript, forms, iframe

this is the form:

```
<form id="aqarinfo" action="newEntry.php" method="post" enctype="multipart/form-data" target="upload_target0">

<inputs>

</form> 
```

the iframe:

```
 <iframe id="upload_target0" name="upload_target0" src="#" style="width:0;height:0;border:0px solid #fff;"></iframe> 
```

the `newEntry.php` page:

```
 <script language="javascript" type="text/javascript">
 window.top.window.success_upload(<?php echo "\"".$lastAqar . "\""; ?>);
 </script> 
```

the javascript function in the parent page:

```
 function success_upload(lastaqar){
  do things....
 } 
```

unfortunately the JavaScript function does not get called. what would be the issue here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:12:57.450

尝试：

```
<script language="javascript" type="text/javascript">
parent.success_upload(<?php echo "\"".$lastAqar . "\""; ?>);
</script> 
```

# php - Getting sum of duplicated date entries from last month, week, day

> ID：10031218
> 
> 赞同：0
> 
> 时间：2012-04-05T15:10:11.763
> 
> 标签：php, mysql, sql

I have a table with 3 columns: `id`, `updated_at`, `click_sum`.

Many rows have the exact same `updated_at` value which makes it hard to simply retrieve the data, `order by updated_at` and display the sums in a chart. Since there are multiple sums for the same dates which screws the chart.

What I try to achieve is to get the following output:

```
 update_at | click_sum
-----------+-----------
   date1   |    100
   date2   |     3
   date3   |    235
   date4   |    231 
```

Optionally only those dates which are form the last month, week or day `AND` not simply the dates which are `NOW() - 1` month.

The current query I build is very large and doesn't work that well. It groups by dates (no duplicated dates appear) and `SUM()`s the clicks correctly but defining from when (last month, week, day) the dates are doesn't seem to work properly.

Query: (`$interval` stands for `MONTH` or `DAY` or `SECOND` or `WEEK`)

```
SELECT d.updated_at, SUM(d.clicks_sum) AS click_sum
FROM aggregated_clicks d
JOIN 
(
     SELECT c.id, MAX(StartOfChains.updated_at) AS ChainStartTime
     FROM aggregated_clicks c
     JOIN 
     (
         SELECT DISTINCT a.updated_at
         FROM aggregated_clicks a
         LEFT JOIN aggregated_clicks b ON (b.updated_at >= a.updated_at - INTERVAL 1 DAY AND b.updated_at < a.updated_at)
         WHERE b.updated_at IS NULL
      ) StartOfChains  ON c.updated_at >= StartOfChains.updated_at
     GROUP BY c.id
) GroupingQuery
ON d.id = GroupingQuery.id
WHERE GroupingQuery.ChainStartTime >= DATE_SUB(NOW(), INTERVAL 1 $interval)
GROUP BY GroupingQuery.ChainStartTime
ORDER BY GroupingQuery.ChainStartTime ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:47:10.990

也许我对您的问题的性质（以及它所指的表格）假设太多，但我认为这可以比您显示的查询更简单。

计算最近完成的月份并不难。

它从知道本月的第一个日期开始——使用这个：

```
date_sub(curdate(), interval (extract(day from curdate())-1) day) 
```

要知道上个月的第一天，请使用：

```
date_sub(date_sub(curdate(), interval extract(day from (curdate())-1) day), interval 1 month) 
```

因此，如果您想获得两者之间几天的总和 - 即最近完成的月份，请使用：

```
select updated_at, sum(click_sum) from aggregated_clicks
  where updated_at >= date_sub(date_sub(curdate(), interval extract(day from (curdate())-1) day), interval 1 month)
    and updated_at < date_sub(curdate(), interval (extract(day from curdate())-1) day)
  group by updated_at; 
```

计算最近完成的一周同样容易。这个例子将假设一个星期天到星期六的星期。

由于 ODBC 标准定义日期数字的方式，很容易找到前一周的结束（星期六）：

```
date_sub(curdate(), interval dayofweek(curdate()) day) 
```

那一周的开始（星期日）是在那之前的六天：

```
date_sub(curdate(), interval (dayofweek(curdate())+6) day) 
```

因此，如果您想获得介于两者之间的几天的总和 - 即最近完成的一周，请使用以下命令：

```
select updated_at, sum(click_sum) from aggregated_clicks
  where updated_at >= date_sub(curdate(), interval (dayofweek(curdate())+6) day)
    and updated_at <= date_sub(curdate(), interval dayofweek(curdate()) day)
  group by updated_at; 
```

当然，根据最近完成的日期计算非常容易。

要获取前一天的日期，请使用以下命令：

```
date_sub(curdate(), interval 1 day) 
```

所以如果你想要昨天的总和，使用这个：

```
select updated_at, sum(click_sum) from aggregated_clicks
  where updated_at = date_sub(curdate(), interval 1 day)
  group by updated_at; 
```

注意：我已经使用 MySQL 5.1、YMMV 测试了这些查询。

## ----------

更新：由于日期列是日期时间，只需将`updated_at`我的查询中的所有引用更改为`date(updated_at)`如下所示：

月案例：

```
select date(updated_at), sum(click_sum) from aggregated_clicks
  where date(updated_at) >= date_sub(date_sub(curdate(), interval extract(day from (curdate())-1) day), interval 1 month)
    and date(updated_at) < date_sub(curdate(), interval (extract(day from curdate())-1) day)
  group by date(updated_at); 
```

周案例：

```
select date(updated_at), sum(click_sum) from aggregated_clicks
  where date(updated_at) >= date_sub(curdate(), interval (dayofweek(curdate())+6) day)
    and date(updated_at) <= date_sub(curdate(), interval dayofweek(curdate()) day)
  group by date(updated_at); 
```

昨天的案例：

```
select date(updated_at), sum(click_sum) from aggregated_clicks
  where date(updated_at) = date_sub(curdate(), interval 1 day)
  group by date(updated_at); 
```

# ruby-on-rails - saving embedded documents mongoid

> ID：10031219
> 
> 赞同：2
> 
> 时间：2012-04-05T15:10:12.143
> 
> 标签：ruby-on-rails, mongoid

I have a person model which `embeds_many` addresses.

Is there a way to always clear embedded relationship when updating? For example, If I send a complete representation of a person, including addresses, I want to replace existing addresses rather than appending them.

My temp fix is a `before_save` callback which clear out all addresses

```
class Person
  include Mongoid::Document
  embeds_many :addresses

  before_save :clear_addresses!

  def clear_addresses!
    self.unset(:addresses)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T07:33:18.587

`addresses`当你更新你的人时，你可以传递一个空的参数

```
person.update_attributes(:addresses => []) 
```

# java - 获取全球所有重要交易所的价值

> ID：10031222
> 
> 赞同：0
> 
> 时间：2012-04-05T15:10:22.040
> 
> 标签：java, yahoo, yahoo-finance

我想知道是否有某种方法可以访问交易所的价值（重要的交易所，如纳斯达克、Bse、nse、道琼斯、日本和亚洲市场）。我了解雅虎金融，但不确定如何准确获取所有交易所的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:23:31.073

谷歌它 - 例如：[http](http://www.world-exchanges.org/) ://www.world-exchanges.org/ 。如果我是你，我会尝试 rss 提要 - [http://www.youtube.com/watch?v=TZ8mhOoRK7I](http://www.youtube.com/watch?v=TZ8mhOoRK7I)。

希望能帮助到你。

# ruby - 更改变量直到它是正确的（如果，否则）

> ID：10031223
> 
> 赞同：-2
> 
> 时间：2012-04-05T15:10:22.560
> 
> 标签：ruby

我运行一个 irc 机器人，用 ruby​​ 编写，运行 cinch irc 框架。机器人回复有趣的事实并循环浏览这些事实，这样您就不会厌倦它们。我设置了一个冷却时间，所以它们不能在 6 小时内显示。它不再显示最初显示的事实，而是显示随机选择的事实，这可能是之前显示的事实。

```
line = IO.readlines("facts.txt")
factnumber = rand(line.length)
    if fact_not_next_6_hours[factnumber] == true
    factnumber = rand(line.length)
    m.reply "fact #{factnumber}: #{line[factnumber]}"
    fact_not_next_6_hours[factnumber] = true 
```

`fact_not_next_6_hours[factnumber]`是 6 小时冷却的变量；如果设置为 true，则冷却处于活动状态。我需要去做：

```
factnumber = rand(line.length) 
```

直到它没有将 6 小时冷却设置为 true，然后执行

```
m.reply "fact #{factnumber}: #{line[factnumber]}"
fact_not_next_6_hours[factnumber] = true 
```

我的第一个想法是做多个`if`s，但没有奏效，我相信有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:31:52.853

首先，如果你只是设置一个布尔标志，你怎么知道什么时候“解冻”它？我会在对象中保留上次访问时间的“时间戳”。此外，我不会到处使用原始类型，而是以更面向对象的方式来做。

这是我的解决方案：

```
class Fact
  attr_reader :text

  def initialize(text)
    @text = text
    @last_accessed = Time.new(0) # a long time ago, not in cooldown
  end

  def in_cooldown?
    Time.now - @last_accessed < 60*60*6
  end

  def cooldown!
    @last_accessed = Time.now
  end
end

class Facts
  attr_reader :all

  def initialize(file_name)
    @all = IO.readlines("facts.txt").map{|line| Fact.new(line)} 
  end
end

class FactRandomizer
  def initialize(facts)
    @facts = facts
  end

  def get
    fact = not_in_cooldown.sample || all.sample # all can be in cooldown
    fact.cooldown!
    fact.text
  end

  private

  def not_in_cooldown
    @facts.select{|fact| !fact.in_cooldown?}
  end
end 
```

用法：

```
facts = Facts.new("whatever").all
randomizer = FactRandomizer.new(facts)
randomizer.get 
```

编辑：

我重构了代码，使其不再使用类方法。请注意，现在测试此代码将变得多么容易，以及交换部分代码是多么容易（例如替换从文件中读取事实的部分或事实处于冷却状态意味着什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:21:52.273

你真的应该重命名`line`为`lines`，因为它实际上是一个行数组。我已经在我的回答中这样做了。

这本质上是一个“do while”循环：

```
begin 
  factnumber = rand(lines.length)
end while fact_not_next_6_hours[factnumber] 
```

但是根据您拥有多少事实以及您希望“使用”多少事实，过滤掉您不能首先使用的事实可能更有意义：

```
fact = (0...lines.length).zip(lines).reject do |k, v|
  fact_not_next_6_hours[k]
end.sample

m.reply "fact #{fact[0]}: #{fact[1]}" 
```

( ) 的第一位`(0...lines.length).zip(lines)`只是将每一行与一个数字相关联（例如`[[0, "fact"], [1, "afact"], ...]`）。我建议单独运行方法链的每个部分，这样您就可以完全了解正在发生的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:17:58.380

你可以做：

```
factnumber = rand(line.length)
while fact_not_next_6_hours[factnumber] == true
  factnumber = rand(line.length)
end
m.reply "fact #{factnumber}: #{line[factnumber]}"
fact_not_next_6_hours[factnumber] = true 
```

或者：

```
nil while fact_not_next_6_hours[factnumber = rand(line.length)] == true
m.reply "fact #{factnumber}: #{line[factnumber]}"
fact_not_next_6_hours[factnumber] = true 
```

# mysql - 在插入时使用 MySQL 检查两列的重复，但都不是唯一的

> ID：10031224
> 
> 赞同：0
> 
> 时间：2012-04-05T15:10:28.917
> 
> 标签：mysql, insert, duplicates

这个问题在这里：

[MySQL：INSERT IGNORE 或 ON DUPLICATE KEY UPDATE 检查多个而不是唯一的列](https://stackoverflow.com/questions/7025651/mysql-insert-ignore-or-on-duplicate-key-update-with-checking-multiple-and-not-u)

相似，但不完全一样。

我正在尝试使用如下表格建立一个观察列表：

```
 recordId    |    itemId   |   userId    |    dateAdded 
```

recordId 是唯一的`unique`列，并且是一个自动增量 ID 字段。

itemId、userId 和 dateAdded 可以单独复制，但不能完全复制。

所以，如果用户已经将一个项目添加到他/她的监视列表中，我希望它只更新 dateAdded。

因此，行可能多次包含相同的 userId（因为用户可能希望“观看”多个项目）并且它可能多次包含 itemId（因为同一项目可能被许多用户“观看”）但两者的组合匹配已存在记录的 userId 和 itemId 应该会导致更新。

是否有一个单一的语句方式来做到这一点，或者我是否需要`userId = & postingUser & and itemId = & requestedId &`在尝试插入之前询问数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:49:42.420

您可以这样做：

```
insert into <tablename> (itemId, userId)
values (?, ?)
on duplicate key update dateAdded = now(); 
```

*? 代表您要插入的新值*

这是假设您已经为 定义了唯一索引`(itemId, userId)`：

```
CREATE TABLE <table> (
  `recordId` int(11) NOT NULL AUTO_INCREMENT,
  `itemId` int(11) DEFAULT NULL,
  `userId` int(11) DEFAULT NULL,
  `dateAdded` timestamp,
  PRIMARY KEY (`recordId`),
  UNIQUE KEY itemuser (`itemId`,`userId`)
) ENGINE=InnoDB; 
```

这是如何工作的：

*   当您尝试插入一行时，MySQL 将检查键冲突
*   由于您为 的组合创建了唯一键`(itemId, userId)`，因此将对其进行检查
*   如果没有冲突，MySQL 将继续插入行
*   如果存在冲突，MySQL 将回退到该`on duplicate key`子句，该子句会更新`dateAdded`列的值

# mybatis - mybatis - 如何摆脱映射文件并只使用注释

> ID：10031226
> 
> 赞同：0
> 
> 时间：2012-04-05T15:10:30.777
> 
> 标签：mybatis

我在看这个精彩的 mybatis 例子

[http://mybatis.co.uk/index.php/2010/09/mybatis-simple-and-complete-example.html](http://mybatis.co.uk/index.php/2010/09/mybatis-simple-and-complete-example.html)

它主要使用注释，但希望有一个 @MyBatisDao 注释，所以我不需要返回某个映射文件并为我添加到系统的每个 dao 添加一行。我现在显然只会使用映射，但只是好奇是否有办法？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T05:28:15.900

您可以使用 package 元素让它扫描您的映射器（自 3.1 起）

[MyBatis 3.1 参考指南](http://www.mybatis.org/core/configuration.html#mappers)

# xcode - “无法读取符号”的 Xcode 警告指向 DerivedData 下不存在的路径

> ID：10031234
> 
> 赞同：0
> 
> 时间：2012-04-05T15:11:03.493
> 
> 标签：xcode, warnings

*我的一个新的 Xcode 4.2 项目仅在设备上运行时才*发出以下警告（如在模拟器中，而不是在模拟器中）：

警告：无法读取 /Users/me/Library/Developer/Xcode/DerivedData/MyApp-caubqehwsicqvmfcjxvvwaprgulm/Build/Products/Debug-iphoneos/SomeOtherString.app/MyApp 的符号（找不到文件）。警告：本地找不到 SomeOtherString.app/MyApp 的副本，从远程设备上的内存中读取。这可能会减慢调试会话。

我不知道这个“SomeOtherString.app”是从哪里来的，但我想告诉 Xcode 停止寻找它。麻烦的是，我找不到它的设置位置。我查看了所有项目设置，打开了 project.pbxproj 并查看了那里——什么也没有。

我终于在我的项目文件夹中为“SomeOtherString”做了一个递归grep——找不到字符串！

是的，我做了很多“清理”并清除了我的 DerivedData 目录。但 Xcode 坚持 MyApp 属于“SomeOtherString.app”！

所以，我的问题是：这条路径到底存储在哪里？

我能找到的最接近的其他 SO 问题是[这个](https://stackoverflow.com/questions/5815920/xcode-project-warning-unable-to-read-symbols-after-renaming-the-project)，但没有人发布过解决方案。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:28:51.417

实际上，我发现了这里发生了什么。尽管 SomeOtherString 实际上不在我的项目中，但我显然选择了一个与 Xcode 知道的名为 SomeOtherString 的另一个应用程序相同的包 ID。

我想如果克隆一个项目，这可能是一个问题——确保你使用了一个你以前没有使用过的包 ID。

# java - deleterow() 只读语句错误

> ID：10031235
> 
> 赞同：1
> 
> 时间：2012-04-05T15:11:04.163
> 
> 标签：java, oracle, jdbc

我正在使用 JDBC/Oracle 做我的第一个应用程序......今天我遇到了一个问题，我无法找出问题所在。

这是我的代码（某些部分）

**我的全局变量：**

```
public class Esercizio02_GestioneDB {

public Esercizio02_GestioneDB(){

}

public Connection conn = null;
public Statement s = null;
public ResultSet rs = null;
public ResultSet rs1 = null;
ResultSetMetaData rsmd = null;
ResultSetMetaData rsmd1 = null;

[...] 
```

**我的连接方法：**

```
public void connetti(String user, String pwd) throws ClassNotFoundException, SQLException {

        //DRIVER
        Class.forName("oracle.jdbc.driver.OracleDriver");

        //URL
        String url = "jdbc:oracle:thin:@//localhost:1521/xe";

        //CONNECTION
        conn = DriverManager.getConnection(url, user, pwd);

        //AUTOCOMMIT
        conn.setAutoCommit(true);

        //STATEMENT
        s = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,    ResultSet.CONCUR_UPDATABLE);         

} 
```

**所以，我有一种方法可以删除表中的一行：**

```
private void eliminaPrenotazione() {

    try {

        String message1 = "Scegli la prenotazione da cancellare:\n\n";

        String query = "SELECT * FROM camere_prenotate";

        rs1 = s.executeQuery(query);
        rsmd1 = rs1.getMetaData();

        message1 += "INDICE ";
        for (int i=1; i<=rsmd1.getColumnCount(); i++) {
            message1 += rsmd1.getColumnName(i);
            message1 += " \t ";
        }
        message1 += "\n_______________________________\n";

        int rowIndex = 1;
        String columnType = "";
        while (rs1.next()) {    
            message1 += "["+rowIndex+"]. ";
            rowIndex++;

            for (int i=1; i<=rsmd1.getColumnCount(); i++) {

                columnType = rsmd1.getColumnTypeName(i);

                if(columnType.substring(0, 3).equalsIgnoreCase("num")) message1 += rs1.getInt(i);
                if(columnType.substring(0, 3).equalsIgnoreCase("var") || columnType.substring(0, 3).equalsIgnoreCase("dat"))
                        message1 += rs1.getString(i);

                message1 += " \t ";
            }
            message1 +="\n";
        }
        message1 +="\n";

        String scelta = JOptionPane.showInputDialog(null, message1);
        int sceltaInt = Integer.parseInt(scelta);

        rs1.absolute(sceltaInt);
        rs1.deleteRow();

    } catch (Exception e) {

        JOptionPane.showMessageDialog(null, "Errore: " + e.getMessage());
    }

} 
```

deleteRow() 返回一个错误...它说我的 ResultSet 是只读的，但在我的声明中它被定义为

```
s = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); 
```

那么，怎么了？

对不起noobish代码和糟糕的英语-.-'''

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:28:39.353

`select *`使`Resultset`实例只读。
`select COLUMNNAME`使其可更新。

# javascript - how can i get the value of a td

> ID：10031240
> 
> 赞同：0
> 
> 时间：2012-04-05T15:11:18.253
> 
> 标签：javascript, html-table, spiceworks

i want to get the value of this [td](http://img521.imageshack.us/img521/2028/olasd.png)

my code

```
 function check() {
     var e = document.getElementById("ticket_category_clone");
     var str = e.options[e.selectedIndex].text;

     alert(str);
     if (str === "Hardware") {
         SPICEWORKS.utils.addStyle('#ticket_c_hardware_clone{display: none !important;}');
     }

 }

 SPICEWORKS.app.helpdesk.ready(check); 
```

and bang it does Nothing, what could be the problem?

the html srry for not post it in the begging

```
 <select id="ticket_category_clone" name="ticket[category]" hdpp="ticket_category">
    <option value=""></option><option value="Hardware">Hardware</option>
    <option value="Software">Software</option>
    <option value="Rede" selected="selected">Rede</option>
    <option value="Pedidos">Pedidos</option>
    <option value="Formação/Dúvida">Formação/Dúvida</option>
    <option value="Outro">Outro</option><option value="#edit_categories#">Edit Categories...</option></select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:13:21.700

You could use

```
var e = document.getElementById("td.body-c_hardware.cell-c_hardware");
var str = e.innerHTML; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:18:38.313

To use [getElementById](https://developer.mozilla.org/en/DOM/document.getElementById), your tag needs an id

```
<table>
  <tr><td id="idValue">Content</td></tr>
</table> 
```

and you need to fetch it by just using the id value

```
document.getElementById('idValue'); 
```

* * *

If you want to use CSS-like selectors, you may be best using a toolkit like jQuery

```
jQuery('#idValue');
jQuery('td.className');
jQuery('table.tableClass td.cellClass'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:18:56.467

You need to get the select element by its id. You can then access either the text of the option or the value of the option. I think you may want the value instead of the text. I have posted a solution for both ways.

[http://jsfiddle.net/c4eWg/1](http://jsfiddle.net/c4eWg/1)

```
var e = document.getElementById('ticket_category_clone');
alert(e.options[e.selectedIndex].innerHTML); 
```

​ If you want the actual value, and not the text then use this instead. I suspect it might be what you want.

```
var e = document.getElementById('ticket_category_clone');
alert(e.value); 
```

# c++ - NetUserGetInfo 不适用于受信任的域

> ID：10031242
> 
> 赞同：1
> 
> 时间：2012-04-05T15:11:35.623
> 
> 标签：c++, windows, networking, active-directory

我正在使用以下代码来获取当前用户。这里的问题是网络管理 API 似乎不适用于受信任的域。我成功地用[DsGetDcName替换了](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675983%28v=vs.85%29.aspx)[NetGetAnyDCName](http://msdn.microsoft.com/en-us/library/bb720837.aspx)。现在的问题是[NetUserGetInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370654%28v=vs.85%29.aspx)无法从受信任域的域控制器中检索用户信息。

问题 - 我如何从受信任的域中获取用户配置文件？有没有类似于 DsGetDcName 的 NetUserGetInfo 方法的替代品？我想不通。请帮忙。

```
ns = NetGetAnyDCName(NULL, domain, &pDCName);

if (ns != NERR_Success)
{
    if(fLog!=NULL)fprintf(fLog,PGPTXT_MACHINE8("Non-fatal error: NetGetAnyDCName failed: %d.\n"), ns);

    pDCName = (LPBYTE) domain;
    bFreeDCName = FALSE;
}
else
{
    if(fLog!=NULL)fprintf(fLog,PGPTXT_MACHINE8("NetGetAnyDCName *%S*.\n"), (LPWSTR)pDCName);
}

if(fLog!=NULL)fprintf(fLog,PGPTXT_MACHINE8("NetUserGetInfo *%S* *%S*.\n"), (LPWSTR)pDCName,userName);

ns = NetUserGetInfo ((LPWSTR)pDCName, (LPWSTR)userName, 4, (LPBYTE*)&pui4); 
```

# javascript - 回调函数的一些价值

> ID：10031244
> 
> 赞同：1
> 
> 时间：2012-04-05T15:11:37.963
> 
> 标签：javascript, jquery, jquery-ui, jquery-callback

所以，我有这个简单的代码

```
$('#info_name'+index).show("slide", {direction: "right"}, 1000, function(){
    $('#info_info'+index).show('slide',{direction: "up"}, 1000);
}); 
```

被`i`声明为上层只是一个变量`var i=0`，但在回调中，函数我看不到它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:16:08.360

我不确定这是否会满足您的要求，即使`i`可用 - 如果您希望回调函数影响事件处理程序附加到的元素，请使用`$(this)`：

```
$('#info_name'+i).show("slide", {direction: "right"}, 1000, function(){
        $(this).show('slide',{direction: "up"}, 1000)
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:45:41.577

存在范围问题`i`。由于`i`在外部范围内声明，所有回调将引用相同的`i`，这意味着，如果`i`更改，所有回调的引用`i`也将更改。

您可以做的是创建一个函数来生成回调，因为在这种情况下会创建一个新范围，因此`i`将保留 的值。

基于原始问题，我稍微简化了代码。您已经对其进行了编辑，但我再也找不到回调了……但希望这可能对您有所帮助

```
var getCallback = function(index) {
    return function(){
        // You can see how this index is being captured correctly in Javascript console
        console.log(index);
        $('#name' + index).show('slide',{direction: "up"}, 1000)
    };
};

for (var i = 0; i < 3; ++i) {
    $('#name'+i).show("slide", {direction: "right"}, 1000, getCallback(i));
} 
```

JSFiddle： http: [//jsfiddle.net/vd9Mj/](http://jsfiddle.net/vd9Mj/) ​</p>

更新：

你的回调在哪里...？看来您已将其从问题中删除。

```
var i=-1;

var doStuff = function(index) {
    $('.third').append('<div class="showinfo"><h3 id="info_name'+i+'" class="info_name">'+contact_name[index]+'</h3><span class="info_info" id="info_info'+index+'"><strong>'+contact_information[0][0]+'</strong>: '+contact_number[index]+'</span></div>');
    $('#info_name'+index).show("slide", {direction: "right"}, 1000);
    $('#info_info'+index).delay(1000).show('slide',{direction: "up"}, 1000, function() {
       // Insert code for callback.
    });
};

$.each(contact_status, function(key, value){
    i++;
    if(value == info_id){
        doStuff(i);
    }
});
​ 
```

# ios - iOS：在发生触摸时转移 UIView 的所有权？

> ID：10031253
> 
> 赞同：7
> 
> 时间：2012-04-05T15:12:01.583
> 
> 标签：ios, uiview, uiscrollview, touchesbegan, touchesmoved

我收到的那一刻`touchesBegan`，我想要`removeFromSuperview`被触摸的视图和`addSuperview`新的父视图，然后继续接收触摸。但是我发现有时这不起作用。具体来说，`touchesMoved`永远`touchesEnded`不会被调用。

有没有使这项工作正常工作的技巧？这是为了实现拖放行为，其中视图最初位于滚动视图内。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T04:37:24.960

**代替：**

```
[transferView removeFromSuperView];
[newParentView addSubview:transferView]; 
```

**仅使用：**

```
[newParentView addSubview:transferView]; 
```

[文档](https://developer.apple.com/documentation/uikit/uiview/1622616-addsubview)指出： “视图只能有一个超级视图。如果视图已经有一个超级视图并且该视图不是接收者，则此方法会在使接收者成为其新的超级视图之前删除先前的超级视图。”

因此不需要使用 removeFromSuperView，因为它是由 addSubview 处理的。我注意到 removeFromSuperView 会在不调用 touchesEnded 的情况下结束任何当前的触摸。如果您只使用 addSubview，触摸不会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:24:19.870

您需要在超级视图中处理您的触摸，而不是在您想要切换的视图中。这将允许您在不丢失触摸事件的情况下切换视图。但是，当您执行此操作时，您必须测试自己是否在要切换的特定子视图中发生触摸。这可以通过多种方式完成，但这里有一些方法可以帮助您入门：

将 Rects/Point 转换为另一个视图：

```
[view convertRect:rect toView:subview];
[view convertPoint:point toView:subview]; 
```

以下是一些测试点是否位于视图中的方法：

```
[subView hitTest:point withEvent:nil];
CGRectContainsPoint(subview.frame, point); //No point conversion needed
[subView pointInside:point withEvent:nil]; 
```

一般来说，最好使用 UIGestureRecognizers。例如，如果您使用的是 UIPanGestureRecognizer，您将创建一个手势识别器可以调用的方法，并在该方法中完成您的工作。例如：

```
- (void) viewPanned:(UIPanGestureRecognizer *)pan{
    if (pan.state == UIGestureRecognizerStateBegan){
        CGRect rect = subView.frame;
        newView = [[UIView alloc] initWithFrame:rect];
        [subView removeFromSuperview];
        [self addSubview:newView];
    } else if (pan.state == UIGestureRecognizerStateChanged){
        CGPoint point = [pan locationInView:self];
        newView.center = point;
    } else {
        //Do cleanup or final view placement
    }
} 
```

然后你初始化识别器，将它分配给目标（通常是自我）并添加它：

```
[self addGestureRecognizer:[[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(viewPanned:)]]; 
```

现在 self （这将是管理它的子视图的超级视图）将响应平移动作。

# breakpoints - 移动和桌面屏幕尺寸统计

> ID：10031266
> 
> 赞同：25
> 
> 时间：2012-04-05T15:13:09.320
> 
> 标签：breakpoints, responsive-design

我在哪里可以找到有关移动和桌面屏幕尺寸的统计信息？

我正在制作一个响应式网站，特别是我试图找出的天气是大多数手机与台式机和平板电脑用户之间的大小差距，我可以在其中设置断点。我认为应该有，但我知道我应该测试我的假设。

所以要明确一点，我希望手机有一套风格，平板电脑和台式机有另一套风格。

谢谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-17T20:02:42.253

我刚刚完成了一个响应式商业网站（[https://plus.google.com/101258044853419629282/posts/GejAf734nP6](https://plus.google.com/101258044853419629282/posts/GejAf734nP6)），我可以告诉你的是——断点绝对不是 600px！

以下是事实（就 CSS 和 @media 查询而言）：

1.  1366px 桌面宽度刚刚超过 1024px 成为最流行的尺寸：[http ://techcrunch.com/2012/04/11/move-over-1024x768-the-most-popular-screen-resolution-on-the-web-is-现在-1366x768/](http://techcrunch.com/2012/04/11/move-over-1024x768-the-most-popular-screen-resolution-on-the-web-is-now-1366x768/)

2.  尽管如此，在平板电脑上，1024x768px 的 iPad 是最受欢迎的。

3.  iOS Safari 是理智的，并且总是报告正确的视口，即。无论您是普通 iPad 还是 Retina iPad，它都会告诉您它是 1024x768，同样 iPhone 会告诉您它是 320x480。

4.  Android 浏览器存在更多问题，因为该平台上的屏幕各不相同。例如，Nexus One 有一个 480x800 像素的屏幕，但在 254ppi（像素比 1.5）时，报告给 CSS 的视口实际上是 360x600。更有趣的 Galaxy Nexus 有一个 1280x720px 的屏幕，分辨率为 316ppi（像素比为 2.0，如 Retina），报告的视口为 360*640。

例外是 Android 4.0 上的 Chrome Beta，在横向模式下它有一个错误，并且似乎它在 Galaxy Nexus 上报告视口宽度为 1280 像素，因此很难不与桌面 CSS 发生冲突。

**结论**

我个人使用了 768px 屏幕宽度的断点，即：我将横屏的 iPad 视为桌面，假设最小桌面尺寸为 1024px。但我也可以假设它是 800 像素，就像过去一样。然后，我专门为 iPad 肖像处理 768px，因为非视网膜 iPad 有很多空间，它还不是小屏幕。然后，我将小于 768px 的所有内容称为小屏幕智能手机。

为了最大程度地优化，您可以在 640px、600px、480px、360px、320px 甚至 240px（低端机器人）处使用临时断点，但最好将其完全基于 % 低于 768px，以便自动适应。

**更新**：我发现一个有用的断点是 810px - Facebook 选项卡中 iframe 的宽度。当您创建 FB 应用程序并希望重用您的 webapp 代码时很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T10:47:01.920

有关*最新*的分辨率统计信息，请更改此网址中的日期范围：http: [//gs.statcounter.com/#resolution-na-monthly-200903-201401](http://gs.statcounter.com/#resolution-na-monthly-200903-201401)

在我建立的项目中，我们在 1024px 宽度上设置了媒体查询断点，因为这是 iPad 1、2 和 Mini 的宽度，下方是“移动”，上方是 iPad+桌面。

这就是@nytimes 开发人员的做法。请参阅：JavaScript Jabber Podcast 093：http: [//javascriptjabber.com/093-jsj-the-new-york-times-and-javascript-with-eitan-konigsburg-alastair-coote-and-reed-emmons/](http://javascriptjabber.com/093-jsj-the-new-york-times-and-javascript-with-eitan-konigsburg-alastair-coote-and-reed-emmons/) 他们在哪里描述这是10:40。

如需更全面的设备分辨率列表：http: [//mobile.smashingmagazine.com/2013/03/21/responsive-web-design-with-physical-units/](http://mobile.smashingmagazine.com/2013/03/21/responsive-web-design-with-physical-units/)

与往常一样*，****这取决于*** 您的目标人群。**如果您正在为孩子**构建网站/应用程序（其中许多人将使用**低端 android**），您可能需要一个断点为 320 像素（宽度）的“超移动”版本。

 ****** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T04:19:33.937

960 x 800 x 768 x 640 x 480 x 360 是响应式网页设计必须遵循的尺寸

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-13T22:23:59.107

如果有人查看[statcounter.com](http://gs.statcounter.com/)并将这些数字与[W3C](http://www.w3schools.com/browsers/browsers_stats.asp)等来源进行比较，那么可能会怀疑他们是如何获得这些数字的。

如果你想得到一个真实的统计数据，请访问这个网站： [浏览器显示](http://www.w3schools.com/browsers/browsers_display.asp)， [高屏幕分辨率](http://www.w3schools.com/browsers/browsers_resolution_higher.asp)*****

# c - fgets 工作然后返回访问冲突

> ID：10031269
> 
> 赞同：0
> 
> 时间：2012-04-05T15:13:11.487
> 
> 标签：c

我正在使用 fgets() 从文件中读取行。我能够读取文件的几行，然后 fgets() 返回访问冲突。人们会认为我的文件缓冲区存在问题，但正如您在我的代码中看到的那样，情况并非如此。我注意到的一个奇怪行为是，如果我在一个紧密的循环中读取并打印文件的所有行，我就没有问题。我使用了一些 printf() 语句来调试这个问题，并注意到文件位置因执行哪个循环而异。我的“完整循环”逻辑中没有触及 FILE *。

紧密循环文件位置为：0、27、53、80、82、99、127、155 等。

完整的循环文件位置：0、27、53、80、82、99、138

输入文件：

```
!!!!!!!!!!!!!!!!!!!!!!!!!
! Test sparc gagdet file
!!!!!!!!!!!!!!!!!!!!!!!!!

! instruction 1
1: subcc     %g0, %i4, %i4
1: subc      %g0, %i4, %i4 ** access violation reading this line **

! instruction 2
** etc. ** 
```

代码：

```
/*
* parse_profile: Parse the gadget profile and load the memory structures required to scan the library file
*/
int parse_profile(FILE * gadget_file, struct g_handle * gadget_handle){

// Buffers used to temporarily store file imput
char op_code [NODE_BUF_SIZE] = "\0";
char reg [NODE_BUF_SIZE] = "\0";

// Reference nodes in the bod_ops and save_regs lists
struct char_node * temp_node = NULL;
struct char_node * op_node = NULL;
struct char_node * reg_node = NULL;

// 
int level = 1;
int old_level = 1;
int curr_line = 0;

// A buffer to hold file data
char file_buffer [PAGE_SIZE];

// Reference nocdes in the instruction tree
struct instruction_node * current_node = NULL;
struct instruction_node * prev_node = NULL;
struct instruction_node * prev_level = NULL;

// Read a line from the gadget file (data for a single instruction)
//while(fgets(file_buffer, PAGE_SIZE, gadget_file) != NULL){
char * shiz = file_buffer;
while(shiz != NULL){
printf("\n file location: %d", ftell(gadget_file));
fflush(stdout);
shiz = fgets(file_buffer, PAGE_SIZE, gadget_file);
/*
// tight loop with different file position
while(shit != NULL){
printf("\n file location: %d", ftell(gadget_file));
fflush(stdout); 
shiz = fgets(file_buffer, PAGE_SIZE, gadget_file);
}
*/
    // Increment the current line
    curr_line = curr_line + 1;
printf("\nline (%d)", curr_line);
fflush(stdout);     
    // Ensure we have gathered the entire line of the file
    if(strlen(file_buffer) >= PAGE_SIZE){

        // We have exceeded the maximum line size,  quit
        printf("\nError reading gadget profile, Line %d: Maximum line length of 4096 has been exceeded", curr_line);
        return(-1);

    } // Ensure we have gathered the entire line of the file

    // If this is a comment
    if(*file_buffer == '!'){

        // Do nothing
    }
    // If this is a blank line
    else if(sscanf(file_buffer," %s ") < 1){

        // Do nothing
    }
    // Scan the current line until we have saved all instructions
    else if(sscanf(file_buffer,"%d: %s", &level, op_code) == 2){
printf("\n file location: %d", ftell(gadget_file));
fflush(stdout);
printf("1");
fflush(stdout);     
        // Store instruction information
/*      
commented block
*/
    } // Scan the current line until we have saved all instruction/nibble pairs

    // Scan the current line until we have saved all  registers to be preserved
    else if(sscanf (file_buffer,"r: %s", reg) == 1){
/*
commented block
*/          
    } // Scan the current line until we have saved all  registers to be preserved

    // Scan the current line until we have saved all  op_codes to be avoided
    else if(sscanf (file_buffer,"o: %s", op_code) == 1){
/*
commented block
*/

    } // Scan the current line until we have saved all  op_codes to be avoided

    else{

        // quit
        printf("\nError reading gadget profile, Line %d: \n%s", curr_line, file_buffer);
        return(-1); 
    }
printf("7");
printf("\n file location: %d", ftell(gadget_file));
fflush(stdout);     
} // Read a line from the gadget file (data for a single instruction) 
printf("a");
fflush(stdout);     
// If fread() returned an error, exit with an error
if(ferror(gadget_file) != 0){

    // Print error and exit
    printf("\nError reading gadget profile");
    return(-1);

} // If fread() returned an error, exit with an error   

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:38:14.060

您在线上有未定义的结果

```
else if(sscanf(file_buffer," %s ") < 1){ 
```

The number of format specifiers exceeds the number of pointers passed. It is quite possible that the `sscanf` tries to store the scan result at the arbitrary location whose bit-pattern was in the wrong place.

# jquery - 通过 ajax/jQuery $.post 将未经身份验证的用户重定向到不同的页面

> ID：10031270
> 
> 赞同：0
> 
> 时间：2012-04-05T15:13:15.693
> 
> 标签：jquery, asp.net, ajax, asp.net-mvc-3, partial-views

我有一个 jQuery post call，如下所示：

```
$.post('/Controller/_PartialAction', { 'param1': data }, function(result) { }); 
```

没关系，一切正常，除非用户的身份验证 cookie 过期。

发生的情况是，那里已经有东西会重定向`/Controller/_PartialAction`到登录页面，但是在这种情况下，部分操作是部分视图，而不是我想重定向完整视图。

所以它已经将它重定向到登录页面，但我想重定向一个不同的页面，比如我想重定向到`/Controller/Index`. 有没有办法在 ajax/jQuery 调用中指定错误路径或重定向路径？

IE，类似这样的东西（这不存在，但就像我正在尝试做的那样）

```
$.post({success}, {redirect}, {error}, {data}, {function}) 
```

所以基本上，我怎样才能使用不同的 url 进行 jQuery/ajax 发布调用以查找错误，以便我可以重定向到那个错误？

*编辑*

被重定向的是 ajax 调用本身。所以我不能从控制器重定向它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:19:37.983

因此，您想根据用户的会话是否已过期来定义操作 URL？

为什么不将操作 URL 定义为变量，然后在 post 调用中使用它：

```
// Use an asp.net function to work out whether session has expired
if( ... ) {
   // Session expired
   var url = 'Controller/Index';
} else {
   // Session alive
   var url = 'Controller/_PartialAction';
}

$.post(url, { 'param1': data }, function(result) { }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:20:46.223

我不完全确定你在追求什么，但是（基于[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)）你可以使用底层的 $.ajax （http://api.jquery.com/ jQuery.ajax/) 并设置一个`error`函数？

或者您可以在成功回调中测试 cookie 的过期时间，然后根据该测试的结果进行重定向。

# sap-ase - 如何在 Sybase ASE 中使用单个 INSERT 语句插入多条记录

> ID：10031273
> 
> 赞同：2
> 
> 时间：2012-04-05T15:13:24.353
> 
> 标签：sap-ase

此功能在[MySQL 中可用，如本文所示，](https://stackoverflow.com/questions/4067113/how-to-insert-multiple-rows-in-single-insert-statement)根据[Sybase 文档](http://dcx.sybase.com/1200/en/dbreference/insert-statement.html)，它也应该受支持，但是 Sybase 不提供有效示例，因此您必须解释以下内容：

***语法 1 插入具有指定表达式列值的单行或多行。多行（如果指定）由附加括号分隔***

因此，我将“附加括号”解释为期望以下代码起作用

```
create table #tmp_codes (
    code varchar(12) NULL
)

insert into #tmp_codes (code) 
values
    ('AAA'),
    ('BBB'),
    ('CCC') 
```

但是它与

```
Incorrect syntax near ',' on line 7 
```

我正在使用 Sybase ASE 15，并且看不到任何[关于在此支持页面上为 INSERT 语句插入多行的引用](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.commands/html/commands/commands62.htm)

Sybase 是否提供此功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T06:44:31.247

您的第一个 Sybase 文档链接是 ASA 而不是 ASE 文档。在 ASE 中，您只能使用 insert - select 语句插入多行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-01-30T06:22:35.180

这似乎是很久以前提出的问题，但可能对参考有用。创建一个包含多行的文本文件。

从 Sybase ASE 运行以下命令：

```
INPUT INTO TableName
FROM FilePath\FileName FORMAT TEXT 
```

例子：

```
INPUT INTO TempTable FROM c:\test.txt FORMAT TEXT 
```

# php - 如何将透明度设置为图像中特定背景颜色的图像 - 使用 PHP - GD

> ID：10031275
> 
> 赞同：1
> 
> 时间：2012-04-05T15:13:30.013
> 
> 标签：php, gd, php-5.3

假设我有任何图像（比如护照类型图像，用户周围的背景相同）。

我想要做的是使用 PHP GD 使背景图像透明。所以请让我知道我怎样才能做到这一点？示例图像显示在这里。我希望黄色是透明的。 ![在此处输入图像描述](../Images/ba9b02e28807118383d50eb0b708d48f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:33:28.193

您基本上想要做的是将颜色“接近”替换为您的背景颜色。“接近”是指与其相似的颜色：

```
// $src, $dst......
$src = imagecreatefromjpeg("dmvpic.jpg");

// Alter this by experimentation
define( "MAX_DIFFERENCE", 20 );

// How 'far' two colors are from one another / color similarity.
// Since we aren't doing any real calculations with this except comparison,
// you can get better speeds by removing the sqrt and just using the squared portion.
// There may even be a php gd function that compares colors already. Anyone?
function dist($r,$g,$b) {
   global $rt, $gt, $bt;
   return sqrt( ($r-$rt)*($r-$rt) + ($g-$gt)*($g-$gt) + ($b-$bt)*($b-$bt) );
}

// Alpha color (to be replaced) is defined dynamically as 
// the color at the top left corner...
$src_color = imagecolorat( $src ,0,0 );
$rt = ($src_color >> 16) & 0xFF;
$gt = ($src_color >> 8) & 0xFF;
$bt = $src_color & 0xFF;

// Get source image dimensions and create an alpha enabled destination image
$width = imagesx($src);
$height = imagesy($src);
$dst = =imagecreatetruecolor( $width, $height ); 
imagealphablending($dst, true);
imagesavealpha($dst, true);

// Fill the destination with transparent pixels
$trans = imagecolorallocatealpha( $dst, 0,0,0, 127 ); // our transparent color
imagefill( $dst, 0, 0, $transparent ); 

// Here we examine every pixel in the source image; Only pixels that are
// too dissimilar from our 'alhpa' or transparent background color are copied
// over to the destination image.
for( $x=0; $x<$width; ++$x ) {
  for( $y=0; $y<$height; ++$y ) {
     $rgb = imagecolorat($src, $x, $y);
     $r = ($rgb >> 16) & 0xFF;
     $g = ($rgb >> 8) & 0xFF;
     $b = $rgb & 0xFF;

     if( dist($r,$g,$b) > MAX_DIFFERENCE ) {
        // Plot the (existing) color, in the new image
        $newcolor = imagecolorallocatealpha( $dst, $r,$g,$b, 0 );
        imagesetpixel( $dst, $x, $y, $newcolor );
     }
  }
}

header('Content-Type: image/png');
imagepng($dst);
imagedestroy($dst);
imagedestroy($src); 
```

请注意，上面的代码未经测试，我只是在 stackoverflow 中输入它，所以我可能有一些迟缓的拼写错误，但它应该在最小的点上让你朝着正确的方向前进。

# dcpu-16 - 你能写信给[PC]吗？

> ID：10031276
> 
> 赞同：7
> 
> 时间：2012-04-05T15:13:40.090
> 
> 标签：dcpu-16

根据[DCPU 规范](http://0x10c.com/doc/dcpu-16.txt)`SET`，指令失败的唯一情况是该`a`值是文字。

那么下面的工作吗？

```
SET [PC],0x1000 
```

一个更有用的版本是设置一个偏移量`PC`，所以一个相当奇怪的无限循环将是：

```
SET [PC+0x2],0x89C3 ; = SUB PC,0x2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T15:32:59.757

可能（=我认为它应该有效，但我没有尝试）。

这被称为“自我修改”代码，并且在 8 位时代非常普遍，因为 a) 有限的 RAM 和 b) 有限的代码大小。像这样的代码非常强大但容易出错。如果您的代码库增长，这很快就会成为维护的噩梦。

著名用例：

1.  Windows 95 使用这样的代码在堆栈上构建图形渲染代码。
2.  病毒和木马将其用作攻击媒介（在堆栈上编写代码或操纵返回地址以模拟 a `JMP`）
3.  在 C64 上模拟 switch 语句

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T17:24:29.313

[PC] 没有任何价值，所以我猜你需要通过将 PC 存储在可以用作指针（注册表或内存）的东西中来以一种迂回的方式来做到这一点。

```
        套装A
        设置 [A+3], 0x8dc3 ; SUB PC, 3（如果 A 不能从 SUB PC 外部更改，2 也可以。）

```

# ssrs-2008 - 报告的文件名是否可以包含特殊符号，例如“$”和“%”

> ID：10031277
> 
> 赞同：0
> 
> 时间：2012-04-05T15:13:40.227
> 
> 标签：ssrs-2008

是否可以将报告命名为“欠我 10 美元的人”或“折扣百分比报告”之类的名称？我最初能够用 $ 符号命名一个报告，但后来我无法部署它。但是，我将其改为“美元”，并成功部署。

是否可以有一个包含“$”和“%”符号的报告文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:56:20.620

即使可以，这也是不好的做法。试着保留它`A-z 0-9 -_`

# jquery - Jquery无限滚动-div上的滚动条不是正文

> ID：10031278
> 
> 赞同：5
> 
> 时间：2012-04-05T15:13:45.413
> 
> 标签：jquery, jquery-masonry, infinite-scroll

我找到了一个使用 masonry 插件的无限滚动演示。

[http://www.jquery4u.com/demos/infinite-scrolling-demo1/](http://www.jquery4u.com/demos/infinite-scrolling-demo1/)

我想做的是将滚动条放在容器 div 上。所以身体会保持静止。

这可能吗？如果您需要我进一步解释，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:54:31.463

将它嵌套在 iframe 中是一种选择吗？

[http://jsfiddle.net/PN4XQ/](http://jsfiddle.net/PN4XQ/)

编辑：我还没有权限添加评论，所以我不得不回答这个问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T16:37:23.293

这是您尝试做的一个简单示例：

*   [http://www.stevefenton.co.uk/cmsfiles/assets/File/infinitescroller.html](http://www.stevefenton.co.uk/cmsfiles/assets/File/infinitescroller.html)

容器`<div>`CSS：

```
<style type="text/css">
  /* Optional styles */ 
  #infinitescroller {
  background-color: White;
  width: 50%;
  height: 200px;
}
</style> 
```

容器`<div>`HTML：

```
<div id="infinitescroller">
  <div>
    <p>Starting content</p>
  </div>
</div> 
```

# php - $_POST 接收要更新的动态字段数量

> ID：10031280
> 
> 赞同：4
> 
> 时间：2012-04-05T15:13:47.523
> 
> 标签：php, sql, arrays

我不知道给这个问题取什么标题。这是我的目标：

在第一页，我有一个从数据库生成的表单。它循环通过将计数变量分配给字段的 id（即：header_1、header_2、header_3...）

现在，字段的数量可能会有所不同，因为我需要能够添加额外信息（即：header_4、header_5）。

当我提交表单时，如何为每个字段创建一个变量？

`$header1 = $_POST['header_1']`

本质上，我正在寻找一种基于数组（或基于变量的变量）的方法来简化这样的事情：

```
$sql="UPDATE about SET about_header = '$head1', about_content = '$post1' WHERE about_id = '$id1'";
$result = mysql_query($sql);
$sql="UPDATE about SET about_header = '$head2', about_content = '$post2' WHERE about_id = '$id2'";
$result = mysql_query($sql);
$sql="UPDATE about SET about_header = '$head3', about_content = '$post3' WHERE about_id = '$id3'";
$result = mysql_query($sql); 
```

我想像这样的查询会起作用，但我不确定如何处理我需要帮助构建的信息数组。

```
$y=1;
$sql="UPDATE about SET about_header = '$head$y', about_content = '$post$y' WHERE about_id = '$id$y'"; 
```

我希望我解释得足够好。任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T15:16:30.767

你有没有尝试过类似的东西：

```
<input name="header[]" />
<input name="header[]" />
<input name="header[]" /> 
```

这将在 PHP 端创建一个多维数组，您可以轻松地循环访问它。

```
echo $_POST['header'][0];
echo $_POST['header'][1];
echo $_POST['header'][2]; 
```

为此使用准备好的语句也会更快，尽管您必须切换到使用诸如 PDO 之类的东西来进行数据库交互。这是使用上面显示的代码进行循环的示例。

```
$fieldCount = count($_POST['header']);
for ($i = 0; $i < $fieldCount; $i++) {
   $sql = 'UPDATE about SET about_header = \''.$_POST['header'][$i].'\', about_content = \''.$_POST['post'][$i].'\' WHERE about_id = \''.$_POST['id'][$i].'\'';
   mysql_query($sql);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:17:18.267

```
<input type="text" name="head[]" />
<input type="text" name="head[]" />
<input type="text" name="head[]" />

<?php
foreach ($_POST['head'] as $head) {
    // ....
}
?> 
```

像这样命名您的输入（注意数组符号）将产生

```
$_POST == array( 'head' => array(
  0 => FIRST TEXT DATA,
  1 => SECOND TEXT DATA,
  2 => THIRD TEXT DATA
)) 
```

# ember.js - findAll 完成加载所有记录时的 Ember-Data 回调

> ID：10031283
> 
> 赞同：8
> 
> 时间：2012-04-05T15:13:59.547
> 
> 标签：ember.js, ember-data

使用 ember-data 我正在加载模型的所有记录：

```
App.adapter = DS.Adapter.create({
  findAll: function(store, type) {
      var url = type.url;
      jQuery.getJSON(url, function(data) {
          var ids = data.map(function(item, index, self){ return item.id });
          store.loadMany(type, ids, data);
      });
  }
}); 
```

`didLoad`当每个记录完成加载时调用该方法。**当所有**记录都完成加载时，是否有方法可以调用？

* * *

编辑

模型：

```
App.Article  = DS.Model.extend({

  title: DS.attr('string'),
  content: DS.attr('string'),

  checkIsLoaded: function() {
      if (this.get('isLoaded')){
         console.log('loaded!'); // outputs `loaded` for each record
      }
  }.observes('isLoaded')

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T15:19:48.110

是的，您可以使用`findQuery`，然后观察`.isLoaded`上的属性`ModelArray`。

例如：

```
load: ->
    @set 'data', @get('store').findQuery App.MyModel, { q: '...' } 
```

并观察：

```
loadingComplete: ( ->
    @doSomeStuff() if @getPath 'data.isLoaded'
).observes 'data.isLoaded' 
```

# c# - Datagridview 水平滚动不会一直跨数据

> ID：10031286
> 
> 赞同：0
> 
> 时间：2012-04-05T15:14:07.857
> 
> 标签：c#, winforms, datagridview

我经常遇到这个问题，在使用datagridview时，如果我需要使用水平滚动，它不会到表单的末尾。最后一列然后呈现为不可访问。我通常可以通过扩展 dgv 的大小或启动表单最大化来作弊，但是如果垂直滚动按预期工作（一直到数据集中的最后一条记录），为什么水平滚动不呢？

```
private void InitializeMemberGrid()
    {
        // Set grid properties
        this.grdMembers.AutoGenerateColumns = false;
        this.grdMembers.RowHeadersVisible = true;
        this.grdMembers.Columns.Clear();
        mPicWaiting = PartD.Windows.Common.Utility.AddWaitingImage(this.grdMembers);
        mPicWaiting.Visible = false;

        // Member ID Column
        var colMemberID = new DataGridViewTextBoxColumn();
        colMemberID.Name = "MemberID";
        colMemberID.HeaderText = "Member ID";
        colMemberID.DataPropertyName = "ID";
        this.grdMembers.Columns.Add(colMemberID);

        //// Contract ID Column
        var colContractID = new DataGridViewTextBoxColumn();
        colContractID.Name = "ContractID";
        colContractID.HeaderText = "Contract ID";
        colContractID.DataPropertyName = "ContractID";
        this.grdMembers.Columns.Add(colContractID);

        // SSN Column
        var colSSN = new DataGridViewTextBoxColumn();
        colSSN.Name = "SSN";
        colSSN.HeaderText = "SSN";
        colSSN.DataPropertyName = "SSN";
        this.grdMembers.Columns.Add(colSSN);

        // HICN Column
        var colHICN = new DataGridViewTextBoxColumn();
        colHICN.Name = "HICN";
        colHICN.HeaderText = "HICN";
        colHICN.DataPropertyName = "HICN";
        this.grdMembers.Columns.Add(colHICN);

        // Name Column
        var colName = new DataGridViewTextBoxColumn();
        colName.Name = "Name";
        colName.HeaderText = "Name";
        colName.DataPropertyName = "LastNameFirstName";
        colName.AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill;
        this.grdMembers.Columns.Add(colName);

        // DOB Column
        var colDOB = new DataGridViewTextBoxColumn();
        colDOB.Name = "DOB";
        colDOB.HeaderText = "DOB";
        colDOB.DataPropertyName = "DateOfBirth";
        colDOB.DefaultCellStyle.Format = "MM/dd/yyyy";
        this.grdMembers.Columns.Add(colDOB);

        // Retirement Date Column
        var colRetireDate = new DataGridViewTextBoxColumn();
        colRetireDate.Name = "RetireDate";
        colRetireDate.HeaderText = "Retirement";
        colRetireDate.DataPropertyName = "RetireDate";
        this.grdMembers.Columns.Add(colRetireDate);

        // RelCode Column
        var colRelCode = new DataGridViewTextBoxColumn();
        colRelCode.Name = "RelCode";
        colRelCode.HeaderText = "Rel";
        colRelCode.DataPropertyName = "RelCode";
        this.grdMembers.Columns.Add(colRelCode);

        // Resend Column
        var colResend = new DataGridViewTextBoxColumn();
        colResend.Name = "Resend";
        colResend.HeaderText = "Resend";
        colResend.DataPropertyName = "Resend";
        this.grdMembers.Columns.Add(colResend);

        // Sent Column
        var colSent = new DataGridViewTextBoxColumn();
        colSent.Name = "Sent";
        colSent.HeaderText = "Sent";
        colSent.DataPropertyName = "SubmissionCount";
        this.grdMembers.Columns.Add(colSent);

        // Status Column
        var colStatus = new DataGridViewTextBoxColumn();
        colStatus.Name = "Status";
        colStatus.HeaderText = "Status";
        colStatus.DataPropertyName = "Status";
        this.grdMembers.Columns.Add(colStatus);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:20:44.727

您可能已经设置了控件的宽度，`DataGridView`而不是将控件停靠在表单中。

确保控件在设计器中看起来正确，然后将其锚定在右侧。如果调整表格大小，这将阻止结束列被切断。更好的是，添加一个面板以嵌入您的控件并相应地停靠它。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-16T20:27:29.690

将最后一列的“AutoSizeMode”属性设置为“AllCells”为我修复了它：

```
column.AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCells; 
```

# android - 在android的基本适配器中刷新单个单元格

> ID：10031291
> 
> 赞同：1
> 
> 时间：2012-04-05T15:14:22.400
> 
> 标签：android

我想获得只刷新 GridView 的一个单元格的功能目前我正在使用刷新整个网格的 baseAdapter.notifyDataSetChanged() ，即使我只有具有不同数据的单元格我也必须这样做 我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:55:49.053

在单元格中应用您的更改之前。使用此代码后（对我来说是关于gridview）

```
 adapterForImage.notifyDataSetChanged();
    gridview.setAdapter(adapterForImage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:04:24.877

我们不能刷新单个单元格，但是为了达到这个效果，我们可以获取屏幕中显示的第一个单元格的位置（不是网格的第一个单元格），然后简单地保存该位置，刷新整个网格并从该保存的位置预览

```
 int prevcurr = gridview.getFirstVisiblePosition();
            Adap.notifyDataSetChanged();
            try {
                Thread.sleep(1);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            gridview.requestFocusFromTouch();
            gridview.setSelection(prevcurr); 
```

# php - mysql_fetch_array 返回一个数组，其值为数字索引，但对应的关联索引为空

> ID：10031292
> 
> 赞同：2
> 
> 时间：2012-04-05T15:14:23.437
> 
> 标签：php, mysql

我有一个包含以下字段的表：

```
row_id    
first_field
second_field 
```

row_id 是整数类型，设置为自动递增并且是主键。其他两个字段是文本类型。

该表最多填充五行。因此，row_id 的值为 1、2、3、4 和 5。

我还有另一个类似结构的表，它与我的第一个表具有一对多的对应关系。

但是当我进行选择查询并将结果提供给 mysql_fetch_array 时，会发生一些奇怪的事情。

当我运行这个：

```
$query = "select a.*, b.* from table1 as a
         left join table2 as b on a.row_id = b.row_id";
$result = mysql_query($query) or die(mysql_error());
while ($row = mysql_fetch_array($result)) {
    echo '<pre>'; print_r($row); echo '</pre>';
} 
```

我明白了：

```
Array
(
    [0] => 1
    [row_id] => 1
    [1] => some text
    [first_field] => some text
    [2] => some text
    [second_field] => some text 
}

Array
(
    [0] => 2
    [row_id] => 2
    [1] => some text
    [first_field] => some text
    [2] => some text
    [second_field] => some text 
}

Array
(
    [0] => 3
    [row_id] => 
    [1] => some text
    [first_field] => some text
    [2] => some text
    [second_field] => some text 
}

Array
(
    [0] => 4
    [row_id] => 
    [1] => some text
    [first_field] => some text
    [2] => some text
    [second_field] => some text 
}

Array
(
    [0] => 5
    [row_id] => 
    [1] => some text
    [first_field] => some text
    [2] => some text
    [second_field] => some text 
} 
```

对于每个数组结果，我想将您的注意力引向第一个字段 row_id。在前两个数组中，索引 0 和 row_id 具有相同的值，而在随后的三个数组中，只有索引 0 具有值。row_id 似乎为空。

这是我第一次遇到这样的事情。这是什么原因造成的？如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:38:44.603

`LEFT JOIN`这与您在查询中编辑了另一个表的事实有关。

使用 a `LEFT JOIN`，第一个表中没有第二个表中匹配行的行将在`JOIN`ed 字段中填充`NULL`值。

因为您在两个表中都有一个列`row_id`，并且您已经`*`从两个表中进行了选择，所以后面的值`row_id`将覆盖结果中的前面的值。`table2`中的第 3、4 和 5 行似乎没有匹配的行`table1`。这导致 NULL `row_id`。

解决方案是选择`row_id`您想要的，并且有多种方法可以做到这一点。但是对于这样一组相对简单的结果，我建议您明确说明您想要的所有列：

```
SELECT a.*, b.col_1, b.col_2
FROM table1 a
LEFT JOIN table2 b ON a.row_id = b.row_id 
```

或者，您可以`LEFT`从连接中删除 ，结果中将省略第 3、4 和 5 行。

# ruby-on-rails - 主动管理员销毁操作

> ID：10031296
> 
> 赞同：0
> 
> 时间：2012-04-05T15:14:56.660
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem, activeadmin

我在一个用 ruby​​ on rails 编写的项目中工作，我目前正在为我网站的内容管理器系统使用活动管理 gem，我只是想知道活动管理员如何使用删除操作，我试图覆盖它，但我的代码不起作用，我认为我们在如何让特定线路被破坏方面遇到问题

```
def destroy

  @menu = Menu.find(params[:menu_recipe][:menu_id])
  @menu_recipe = @menu.menu_recipes.find(params[:id])
  @menu_recipe.remove_recipe
  @menu_recipe.destroy
  redirect_to @reservation, :notice => "recipe destroyed"

      end 
```

它带有一个错误

```
undefined method `[]' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:18:17.763

大概`params[:menu_recipe]`没有设置。试着放在`params[:menu_recipe] ||= {}`开头。

但是，无论如何，您为什么要通过 找到`Menu`？你不能只做'MenuRecipe.find(params[:id])'吗？

# java - JSF：使用 Icefaces 组件上传文件的问题

> ID：10031300
> 
> 赞同：2
> 
> 时间：2012-04-05T15:15:04.753
> 
> 标签：java, jsf, file-upload, jsf-2, icefaces

我正在尝试`FileUpload`使用 Icefaces [ace:fileEntry](http://wiki.icesoft.org/display/ICE/FileEntry)的功能，但我`fileUploadListener`的服务器上没有被调用，这里是代码：

**xhtml 片断：**

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ace="http://www.icefaces.org/icefaces/components"
      xmlns:ice-cc="http://www.icesoft.com/icefaces-composite-comps"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ice="http://www.icesoft.com/icefaces/component">
<h:head>
    <link rel="stylesheet" type="text/css" href="/xmlhttp/css/rime/rime.css"/>
</h:head>
<h:body>
    <h:form enctype="multipart/form-data">
        <ace:fileEntry id="fileEntryComp"
                       label="File Entry"
                       relativePath="uploaded"
                       fileEntryListener="#{fileUpload.uploadFile}"/>
        <h:commandButton value="Upload File"/>
    </h:form>
</h:body>
</html> 
```

**爪哇片**

```
public void uploadFile(FileEntryEvent event)
    {
        FileEntry fileEntry = (FileEntry) event.getSource();
        FileEntryResults results = fileEntry.getResults();
        for (FileEntryResults.FileInfo fileInfo : results.getFiles())
        {
            if (fileInfo.isSaved())
            {
                log.debug("########### FILE IS SAVED ########");
            }
        }
    } 
```

**日志信息：**

```
 FINE  lifecycle        - Entering RestoreViewPhase
FINE  lifecycle        - New request: creating a view for /trade_entry/UploadBlotter.xhtml
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - Created component with component type of 'javax.faces.ViewRoot'
FINE  application      - Created new view for /trade_entry/UploadBlotter.xhtml
FINE  application      - RenderKitId for this view as determined by calculateRenderKitId HTML_BASIC
FINE  lifecycle        - Exiting RestoreViewPhase
FINE  timing           -  [TIMING] - [2ms] : Execution time for phase (including any PhaseListeners) -> RESTORE_VIEW 1
FINE  lifecycle        - render(com.sun.faces.context.FacesContextImpl@1dc6429)
FINE  lifecycle        - Entering RenderResponsePhase
FINE  lifecycle        - About to render view /trade_entry/UploadBlotter.xhtml
FINE  application      - Building View: /trade_entry/UploadBlotter.xhtml
FINE  application      - Created component with component type of 'javax.faces.Output'
FINE  component        - /trade_entry/UploadBlotter.xhtml @7,9 <h:head> Component[-1351329185_508ba5ae] Created: javax
.faces.component.UIOutput
FINE  application      - Created component with component type of 'javax.faces.Output'
FINE  component        - /trade_entry/UploadBlotter.xhtml @10,9 <h:body> Component[-1351329185_508ba588] Created: java
x.faces.component.UIOutput
FINE  application      - Created component with component type of 'javax.faces.HtmlForm'
FINE  component        - /trade_entry/UploadBlotter.xhtml @11,13 <h:form> Component[-1351329185_508ba5e2] Created: jav
ax.faces.component.html.HtmlForm
FINE  application      - Created component with component type of 'org.icefaces.ace.component.FileEntry'
FINE  application      - Created component with component type of 'javax.faces.Output'
FINE  application      - Created component with component type of 'javax.faces.ComponentResourceContainer'
FINE  application      - Created component with component type of 'javax.faces.Output'
FINE  application      - Created component with component type of 'javax.faces.Output'
FINE  component        - /trade_entry/UploadBlotter.xhtml @15,70 <ace:fileEntry> Component[-1351329185_508ba5fc] Creat
ed: org.icefaces.ace.component.fileentry.FileEntry
FINE  application      - Created component with component type of 'javax.faces.HtmlCommandButton'
FINE  component        - /trade_entry/UploadBlotter.xhtml @16,47 <h:commandButton> Component[-1351329185_508ba5c9] Cre
ated: javax.faces.component.html.HtmlCommandButton
FINE  application      - Created component with component type of 'javax.faces.ComponentResourceContainer'
FINE  component        - No renderer-type for component j_id1
FINE  component        - No renderer-type for component javax_faces_location_BODY
FINE  application      - Rendering View: /trade_entry/UploadBlotter.xhtml
FINE  component        - No renderer-type for component javax_faces_location_HEAD
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  component        - No renderer-type for component _captureFileOnsubmit
FINE  application      - Begin writing marker for viewId /trade_entry/UploadBlotter.xhtml
FINE  application      - End writing marker for viewId /trade_entry/UploadBlotter.xhtml
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - URL pattern of the FacesServlet executing the current request .jsp
FINE  application      - Begin writing marker for viewId /trade_entry/UploadBlotter.xhtml
FINE  application      - End writing marker for viewId /trade_entry/UploadBlotter.xhtml
FINE  lifecycle        - Exiting RenderResponsePhase 
```

现在，在当前状态下，我可以打开文件系统导航弹出窗口，我可以选择文件，但`fileUploadListener`应该被点击，但现在它没有，我也能够获取我在服务器端设置的一些数据，因此服务器之旅正在工作我唯一的问题`fileUploadListener`是没有被击中，有什么建议吗？

**更新** 我仍在寻找答案，因为我无法成功将文件上传到服务器。

**更新 2** 现在`Content is not allowed in prolog`出现异常，不确定这到底是什么意思，这里是堆栈跟踪：

```
 ERROR [Faces Servlet]  - Servlet.service() for servlet Faces Servlet threw exception: javax.faces.view.facelets.Facele
tException: Error Parsing /trade_entry/UploadBlotter.xhtml: Error Traced[line: 2] Content is not allowed in prolog.
        at com.sun.faces.facelets.compiler.SAXCompiler.doCompile(SAXCompiler.java:417) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.compiler.SAXCompiler.doMetadataCompile(SAXCompiler.java:400) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.compiler.Compiler.metadataCompile(Compiler.java:130) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.impl.DefaultFaceletFactory.createMetadataFacelet(DefaultFaceletFactory.java:327) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.impl.DefaultFaceletFactory.access$200(DefaultFaceletFactory.java:93) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.impl.DefaultFaceletFactory$2.newInstance(DefaultFaceletFactory.java:166) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.impl.DefaultFaceletFactory$2.newInstance(DefaultFaceletFactory.java:164) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.impl.DefaultFaceletCache$2.newInstance(DefaultFaceletCache.java:94) [:2.1.7-SNAPSHOT]
        at com.sun.faces.facelets.impl.DefaultFaceletCache$2.newInstance(DefaultFaceletCache.java:89) [:2.1.7-SNAPSHOT]
        at com.sun.faces.util.ExpiringConcurrentCache$1.call(ExpiringConcurrentCache.java:99) [:2.1.7-SNAPSHOT] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:43:50.013

我没有看到`<h:form>`您的组件周围有任何东西，您的代码中有吗？我对icefaces 没有任何经验，但我习惯于richFaces。带一个

```
<rich:fileUpload immediate="true" id="fileUploadId" 
                        ajaxSingle="true" listHeight="70px" listWidth="500px"
                        uploadButtonClass="otherButton" styleClass="backgroundColorInput"
                        addButtonClass="otherButton"
                        fileUploadListener="#{paramActions.fileUploadListener}">
                        <a:support event="onuploadcomplete" reRender="paramsForm" />
                    </rich:fileUpload> 
```

它需要包含在一个

```
<h:form id="paramsForm" enctype="multipart/form-data"> 
```

**fileUpload 需要**multipart/form-data enctype****

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:21:42.457

大多数情况下，未关闭的**标签**会导致该异常。检查你的 xhtml，你可能会找到任何打开的标签。

例如：任何打开的 div 或 span ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T08:19:58.140

`enctype="multipart/form-data"`从中删除`h:form`它应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T17:08:19.737

我在 JBoss 7.1 服务器上遇到了这个问题。我有一个 EAR 项目、一些 EJB 项目和几个 WAR 项目。当我遇到问题时，我在 EAR 库中部署了 icefaces jar，但是当我将它们移动到使用 ace:fileentry 的 WAR 项目时，它开始工作了。**

# c# - 试图在日期时间中切断时间

> ID：10031303
> 
> 赞同：0
> 
> 时间：2012-04-05T15:15:09.723
> 
> 标签：c#, asp.net, gridview

我遇到了一些问题，只能在我的表格中显示一个日期..

我在上一个问题上得到了一些帮助，但遇到了另一个问题。这些是我们添加的内容：

```
((BoundField)gvEmployeeReview.Columns[1]).DataFormatString = "{0:d}"; //date hired column
((BoundField)gvEmployeeReview.Columns[8]).DataFormatString = "{0:d}"; //next review column 
```

这是aspx页面[http://pastebin.com/DnH3wcAG ，这里是页面](http://pastebin.com/DnH3wcAG)[http://pastebin.com/yY2nbbEG](http://pastebin.com/yY2nbbEG)
背后的代码 当我运行它时，我得到：

> “索引超出范围。必须为非负数且小于集合的大小。
> 
> 参数名称：index
> 说明：当前web请求执行过程中发生了未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArgumentOutOfRangeException：索引超出范围。必须是非负数且小于集合的大小。
> 参数名称：index”及其在这一行的“Line 158: ((BoundField)gvEmployeeReview.Columns[1]).DataFormatString = "{0:d}"; //日期雇用列"

任何试图解决这个问题的帮助都会很棒。我没有运气

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:23:25.910

这与日期格式无关。尝试访问列时可能会发生错误。请注意，列索引从零开始。如果您有`N`列，则索引范围从`0`到`N-1`。尝试使用索引`[0]`and`[7]`而不是`[1]`and `[8]`：

```
((BoundField)gvEmployeeReview.Columns[0]).DataFormatString = "{0:d}";
((BoundField)gvEmployeeReview.Columns[7]).DataFormatString = "{0:d}"; 
```

这会产生实际的列数

```
gvEmployeeReview.Columns.Count 
```

* * *

更新

我不是网络专家；悬停，我刚刚用 a 做了一个测试，`GridView`我立即得到了正确的日期格式。我使用这样的对象数据源：

1.  创建具有所需属性的类。添加一个静态方法，返回`List<T>`带有一些真实或样本数据的

    ```
    public class Model
    {
        public int ID { get; set; }
        public DateTime BeginDate { get; set; }
        public DateTime EndDate { get; set; }
        public string Name { get; set; }

        public static List<Model> GetModels()
        {
            return new List<Model> {
                new Model{ BeginDate=DateTime.Now,
                           EndDate=DateTime.Now.AddDays(1), ID=1, Name="test"},
                new Model{ BeginDate=DateTime.Now.AddDays(10),
                           EndDate=DateTime.Now.AddDays(12), ID=1, Name="test 2"}
            };
        }
    } 
    ```

2.  将 a`GridView`放在页面上，然后单击`[>]`右上方的小图标打开任务窗口`GridView`。

3.  在`Choose Data Source...`选择`<New data source...>`.

4.  在`Data Source Configuration Wizard`打开的窗口中，选择`Object`然后单击`OK`。然后选择`Model`类作为业务对象并单击`Next >`。最后`GetModels`在`SELECT`选项卡上选择并单击完成。

5.  在第 4 点的最后一步之后，会打开一个包含问题的对话窗口`"Refresh Fields and Keys for 'GridView1'"`。点击是的。设计器自动为所选类的每个属性添加列并显示一些示例数据。

6.  现在，再次单击`[>]`并选择`Edit Columns...`。在左下角列表中选择一个日期列。您将`DataFormatString`在属性窗口的部分下找到该属性`Data`。在这里可以输入`{0:d}`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T15:17:43.913

正如异常所说，您正在访问超出范围的集合的成员。应该`gvEmployeeReview.Columns[1]`是不存在的。里面有多少成员`gvEmployeeReview.Columns`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:14:37.857

我只是重做了页面并在gridview中构建了表格，而不是在代码中构建它......最后它更容易......不得不更改一些代码......但结果一切都很好......感谢所有的投入

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T15:23:34.657

查看您的集合数据源，您尝试读取不存在的内容。可以这样想：你有三个桶。现在我问你第四个桶里有什么？这个错误是你告诉我我没有第四桶。

# vba - VBA Outlook SaveAsFile 方法创建空文件

> ID：10031307
> 
> 赞同：0
> 
> 时间：2012-04-05T15:15:28.107
> 
> 标签：vba, outlook

我必须处理传入的邮件，然后将一些 xls 附件保存为文件。所以，我得到所有附件

```
For Each att In mail.Attachments 
```

（我确实拥有`att`对象中的所有附件 - 我通过将`att.FileName`属性与附件名称进行比较来检查它 - 没关系。）但是当我尝试将附件保存为文件时，例如像这样：

```
att.SaveAsFile "C:\test.xls" 
```

文件已创建，但它们始终为空。附件中的源文件包含一些数据、文本和图片，但保存的文件是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T17:42:42.207

很难从您的代码中判断问题可能是什么。使用 Outlook 2003，我让它对任何/所有 .xls 附件都能正常工作......

```
Sub TestSub()
    Dim mail As Outlook.Inspector
    Dim att As Variant
    Set mail = Application.ActiveInspector
    For Each att In mail.CurrentItem.Attachments
        att.SaveAsFile "P:\test.xls"
    Next att
End Sub 
```

# sql-server - SQL Server 2008 - 触发器是否以与登录名/用户相同的权限运行？

> ID：10031308
> 
> 赞同：7
> 
> 时间：2012-04-05T15:15:30.920
> 
> 标签：sql-server, sql-server-2008, tsql, triggers, database-security

只是一个简单的问题：

假设我在数据库中的表上放置了一个插入触发器。

如果通过登录名/用户“foobar”将数据插入到该表中。

触发器是否以与“foobar”相同的访问权限/权限执行？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:20:52.603

是的。

您可以使用

```
EXECUTE AS 
```

create 语句的子句，如此处[所述](http://msdn.microsoft.com/en-us/library/ms188354.aspx)。

触发器的默认值是

```
EXECUTE AS CALLER 
```

我们在哪里找到

> 呼叫者
> 
> 指定模块内的语句在模块调用者的上下文中执行。执行模块的用户不仅必须对模块本身具有适当的权限，而且还必须对模块引用的任何数据库对象具有适当的权限。 **CALLER 是除 queues 之外的所有模块的默认值**，并且与 SQL Server 2005 的行为相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:19:07.513

默认情况下是的，但您可以使用

```
WITH EXECUTE AS 
```

关于触发器定义

[http://msdn.microsoft.com/en-us/library/ms188354(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms188354(v=sql.100).aspx)

# image - Safari在加载时渲染图像背景黑色

> ID：10031311
> 
> 赞同：7
> 
> 时间：2012-04-05T15:15:51.107
> 
> 标签：image, safari, background-color

我目前正在开发一个网站，但遇到了 Safari 的问题。加载图像时，有一个黑色背景作为支架放置。我希望它是透明的或白色的，但我似乎无法弄清楚。看看这个：

[http://blazing-ocean-6482.herokuapp.com/](http://blazing-ocean-6482.herokuapp.com/)

我已经让 html 和 body 有 background-color:white; 但这似乎并没有改变问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:30:55.463

只需使用`interlaced`选项保存PNG图像

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T08:47:17.497

我在 safari 6 中遇到了同样的问题。我的图像在灰度色彩空间中。我将它切换到 rgb，问题就消失了。尝试检查您的图像色彩空间设置！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T01:33:51.463

这是因为 PNG 没有 alpha 通道。仅当图像具有透明像素时，Photoshop 才会使用 Alpha 通道保存图像。为了在 Safari 中正常工作，PNG 图像的 IHDR 块必须在其内容中包含“truecolor-apha”。您可以在tweakpng ( [http://entropymine.com/jason/tweakpng/](http://entropymine.com/jason/tweakpng/) ) 或类似程序中看到 png 块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T20:17:08.897

我遇到了与上述相同的问题（也仅在 Safari 中）。我的body标签有一个背景图片，是repeat-x，用作整个网站的背景。当用户在 Safari 中访问页面时，页面加载时会出现黑色闪烁。我已经寻找了很长时间的解决方案，但它似乎是 Safari 的一个未解决的错误。

我尝试将“样式：背景颜色：#FFF”添加到 html 和正文标签，还尝试使用老派的“bgcolor：#FFF” - 没有用。

我能让 Safari 正常运行的唯一方法是使用 CSS + jQuery。在你的 html 和 CSS 文件中给 body 一个“bg-on”类。在链接的 .js 文件或标签中的 html 页面中：

```
jQuery(function ($) {
$(document).ready(function(){

$('body').removeClass('bg-on');

});//end document ready

/* NOTE (window).load fires when images have been fully loaded */
$(window).load(function() {

$('body').addClass('bg-on');

});//end window load function
});//end jQuery function no conflict mode 
```

上面所做的是当浏览器加载 DOM 时，它会从正文中删除类，因此 Safari 不会显示黑色背景，因为没有背景图像。然后当 window.load 事件触发时，当所有资源都加载完毕后，body 会被赋予背景图像......

它也不会影响禁用 JS 的浏览器，因为“bg-on”类被硬编码到 html 中。

不是一个特别优雅的解决方案，但它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T06:42:08.987

我最近在 Safari 6.0.2 中遇到了这个问题，它也出现在移动 Safari 中（至少在 iOS 6 中）。将我的背景保存为隔行扫描并不能全面工作，颜色空间是 RGB。谢天谢地，我的背景颜色很少，将其转换为 GIF 完全解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-06T02:16:56.057

我的问题是，我上传了正确的文件，但是使用页面构建器我编辑了图像 - 并从 png 转换为 jpg。首先用 alpha 制作 png，然后上传 - 工作。

# javascript - 在超时循环中运行函数

> ID：10031312
> 
> 赞同：0
> 
> 时间：2012-04-05T15:15:55.303
> 
> 标签：javascript, jquery

我有以下代码：

```
// After 8 seconds change the slide...
        var timeout = setTimeout("changeSlide()", 8000);

        $('div.slideshow').mouseover(function() {

            // If the user hovers the slideshow then reset the setTimeout
            clearTimeout(timeout);
        });

        $('div.slideshow').mouseleave(function() {

            clearTimeout(timeout);
            var timeout = setTimeout("changeSlide()", 8000);

        }); 
```

我想要发生的是让函数 changeSlide 每 8 秒循环运行一次，除非有人悬停在幻灯片 div 上。当他们删除光标然后再次超时！

然而，循环只发生一次，悬停不会停止超时或再次启动它：/

编辑：

这循环很好，但悬停打开和关闭会导致函数运行多次：

```
// After 8 seconds change the slide...
        var timeout = setInterval(changeSlide, 2000);

        $('div.slide').mouseover(function() {

            // If the user hovers the slideshow then reset the setTimeout
            clearInterval(timeout);
        });

        $('div.slide').mouseleave(function() {

            clearInterval(timeout);
            var timeout = setInterval(changeSlide, 2000);

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:29:31.537

你在这里有几个问题。首先，当您设置超时时，如果您可能想要停止它，则需要将该函数调用的返回存储到一个变量中。

```
 var slide_timer = setTimeout(changeSlide, 8000); 
```

其次，当你调用`clearTimeout`（而不是`clearInterval`）时，你需要传递一个参数。什么论据？你调用时存储的那个变量`setTimeout`

```
 clearTimeout(slide_timer); 
```

第三，当你使用时`setTimeout`，它只会触发一次。`setInterval`会继续开火，然后你会用`clearInterval`它来阻止它。

使用间隔而不是超时存在时间问题。浏览器对它们的处理方式略有不同，了解差异并使用正确的方法可能对您的代码很重要。如果您使用间隔，因为它们只触发一次，您必须在每次触发时重新建立超时。

```
var slide_timer = setTimeout(function () {
    changeSlide();
    var slide_timer = setTimeout(changeSlide, 8000);
}, 8000); 
```

或者

```
var slide_timer = setTimeout(changeSlide, 8000);
...
function changeSlide() {
   ... your code ...
    var slide_timer = setTimeout(changeSlide, 8000);
} 
```

（我更喜欢前一种方法）

最后，无论您使用超时还是间隔，都不要将字符串传递给`setTimeout`，而是传递函数引用。请参阅上面的示例代码，或者像这样：

```
var slide_timer = setTimeout("changeSlide()", 8000); // <--- DON'T
var slide_timer = setTimeout(changeSlide, 8000);     // <--- DO
var slide_timer = setTimeout(function () {           // <--- DO
    changeSlide() ;
    // other script
}, 8000); 
```

把它们放在一起：

```
// After 8 seconds change the slide...
    var slide_timer = setTimeout(changeSlide, 8000);
    $('div.slideshow').hover(function() {
        // If the user hovers the slideshow then reset the setTimeout
        clearTimeout(slide_timer);
    }, function() {
        slide_timer = setInterval(changeSlide, 8000);
    }); 
```

**文档**

*   clearTimeout - [https://developer.mozilla.org/en/DOM/window.clearTimeout](https://developer.mozilla.org/en/DOM/window.clearTimeout)
*   setTimeout - [https://developer.mozilla.org/en/DOM/window.setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)
*   clearInterval - [https://developer.mozilla.org/en/DOM/window.clearInterval](https://developer.mozilla.org/en/DOM/window.clearInterval)
*   setInterval - [https://developer.mozilla.org/en/DOM/window.setInterval](https://developer.mozilla.org/en/DOM/window.setInterval)
*   所以回答讨论间隔和超时之间的细微差别 - [https://stackoverflow.com/a/7900293/610573](https://stackoverflow.com/a/7900293/610573)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:18:24.097

当您指定 setTimeout（或 setInterval）时，它会返回一个值，然后用于 clearTimeout 和 clearInterval。正确用法如下：

```
var timeout = setTimeout(changeSlide, 8000);
clearTimeout(timeout); 
```

另请注意，我使用的是 clearTimeout，而不是 clearInterval。

您还会注意到我没有在“changeSlide”周围加上引号，并且我删除了括号。将字符串传递给 setTimeout 时，使用 eval()。通常，建议避免使用 eval()。因此，相反，我们将函数的直接引用传递给它（不带引号）。我们*不*使用括号，因为这实际上会立即调用 changeSlide()，而不是将执行推迟到 setTimeout（并且会将 changeSlide() 的结果作为参数传递给 setTimeout）

编辑：要让它连续运行，您必须在每次 changeSlide 调用后*再次调用 setTimeout 。*setTimeout 运行一次。作为替代方案，您可以使用 setInterval，它会自动重复。对 setInterval 的一个警告是，如果间隔太短并且它调用的回调需要很长时间才能运行，那么您最终可能会得到一堆间隔排队等待一个接一个地执行，没有延迟。8 秒的间隔可能不会遇到这个问题。

编辑2：

```
var timeout;
var changeSlide = function(){
   // do something to change slides
   clearTimeout(timeout);
   timeout = setTimeout(changeSlide, 8000);
}

// queue up the first changeSlide, all others happen inside changeSlide
timeout = setTimeout(changeSlide, 8000);

$('div.slideshow').mouseleave(function()  {
    clearTimeout(timeout);
    var timeout = setTimeout(changeSlide, 8000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:40:55.617

最后，这是最好的（但我不会接受这是我的答案，因为是其他人帮助我达到了这一点）

```
// After 8 seconds change the slide...
    var slide_timer = setInterval(changeSlide, 2000);
    $('div.slideshow').hover(function() {
        // If the user hovers the slideshow then reset the setTimeout
        clearInterval(slide_timer);

    }, function() {
        slide_timer = setInterval(changeSlide, 2000);
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T15:23:14.830

我认为您需要 setInterval 而不是 setTimeout，因为：

> setTimeout（表达式，超时）；超时后运行代码/函数一次
> 
> setInterval（表达式，超时）；以间隔运行代码/函数，它们之间的超时长度

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T15:57:11.880

您的问题可能是**鼠标悬停**事件。mouseover 事件会冒泡，因此如果您有嵌套的 HTML 结构，则该事件可能会被多次调用。 **如果您使用 jQuery**，则应使用**mouseenter**事件，该事件只会为元素调用一次。

另一方面，不要使用 setInterval ，而是使用 setTimeout 模式。像这样的东西：

```
 //Immediately Invoked Function Expression that gets called immediately
    (function() {
        //Make the initial call to your setTimeout function
        repeat();
        //Function will constantly be called
        function repeat() {
            setTimeout(function() {
                //(Put your conditional logic here)
                console.log('test');
                repeat();
            }, 2000);
        }
    })(); 
```

# php - PHP API - 按日期交友

> ID：10031313
> 
> 赞同：0
> 
> 时间：2012-04-05T15:16:02.180
> 
> 标签：php, facebook, facebook-graph-api

如何按添加日期获取好友列表？

或者两个用户成为朋友的时间。我见过一些这样的问题。但他们老了。我不知道 facebook 是否为此添加了任何选项。

我想使用图形 api - php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:39:22.977

Facebook 不提供任何方法来检索此类信息。

# java - 我们如何才能看到 JVM 中特定世代中的对象是什么？

> ID：10031317
> 
> 赞同：2
> 
> 时间：2012-04-05T15:16:14.283
> 
> 标签：java, jvm

有没有办法查看 JVM 中哪个特定代（伊甸园、旧等）中有哪些特定对象？我试图找出一种方法来查看哪些对象存在问题。我正在使用 JProfiler，记录内存会在任何时候告诉你实时和 GCed 对象，但不会告诉你对象在哪几代。还有其他工具可以告诉你吗？我似乎也找不到任何这样的 GC 调试选项。

附带说明一下，使用 JProfiler 记录内存似乎对应用程序有太多开销，因此要么我无法长时间记录内存（快速达到峰值内存），要么开销以某种方式干扰/影响应用程序行为。还有，记录记忆。对此有任何建议（我是否缺少开关以避免这种情况）？我通常选择动态仪器选项，但据我所知，我使用采样的几次也有相同的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:24:56.170

启用 jvm 标志以打印 GC： -XX:-PrintGCDetails 在垃圾收集时打印更多详细信息。可管理。（在 1.4.0 中引入。）

您可以做的另一件事是使用带有可视 GC 插件的 JVisualVM（在 jdk1.6 中构建）：http: [//visualvm.java.net/plugins.html](http://visualvm.java.net/plugins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:18:24.097

[yourkit](http://www.yourkit.com/)能够做你想做的事。更准确地说，您可以看到次要和主要垃圾收集。

***编辑：*** SO中的一些人同意我的看法。 [哪个 Java 分析器更好：JProfiler 还是 YourKit？](https://stackoverflow.com/questions/163722/which-java-profiler-is-better-jprofiler-or-yourkit)

# jquery - 停止下一个悬停动画的发生，直到当前完成

> ID：10031320
> 
> 赞同：0
> 
> 时间：2012-04-05T15:16:32.233
> 
> 标签：jquery, html, css, animation

我有一组堆叠的图像和一组图像右侧的句子。我的程序是这样工作的：当您将鼠标悬停在一个句子上时，相应的图像会淡入堆栈的前面，而前一个图像会淡出。我有一个使用 onmouseenter 和 onmouseleave 的悬停函数，在这两个函数中，都会调用辅助函数来执行正确的动画过程。

我遇到的问题是，如果在第一个动画上执行动画时将鼠标悬停在另一个句子上，它就会中断。我研究了 stop(true, true) 并可能在当前悬停时动画完成后创建一个回调函数，但这些不是效果修复。

有谁知道在当前动画完成之前冻结未来动画的任何方法？我不应该添加到数组队列中，但也许我可以在淡入淡出调用中设置一个布尔变量来检查动画的进度。

**可能的解决方案：**在 onHover() 的 onmouseleave 状态下，我以 300 毫秒的延迟调用 setTimeOut 来检查默认 img 是否具有活动类，如果没有，我将其动画化（这意味着当用户离开句，300ms后，默认图像淡入）。如果用户将鼠标悬停在任何其他句子上，我想我可以添加到此功能以延迟下一个悬停的动画。

**我试过的**

```
//get rid of intitial page load animation classes
$('#pics img').not($currentCase).not('.active').removeClass('first next-in-line last-in-line');

do {
    $currentCase
    //before this image is faded in, we need to add the next-in-line class so it is stacked right below the top image
        .addClass('next-in-line')
        .fadeIn(fadeSpeed, function () {
            ($(this).removeClass('next-in-line'))
        });
} while ($('#pics img.active').is(':animated'));

$currentCase.addClass('active'); 
```

*   当鼠标悬停在一个句子上时，上面会冻结脚本。

**我的回答：* *对于那些可能遇到类似问题的人，在fadeIn()的回调函数中，我使用以下代码进行了修复：

```
$('.active').removeClass('active').hide(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:26:09.977

您可以检查图像是否仍在使用

```
if($(this).is(':animated')) 
```

一般的想法是检查某些东西是否仍在动画中，如果是，则不要开始另一个动画。

# jquery - 在 Web 上寻找 Excel 类型的体验 (ASP.NET MVC)

> ID：10031322
> 
> 赞同：0
> 
> 时间：2012-04-05T15:16:39.693
> 
> 标签：jquery, asp.net-mvc

我们正在用 ASP.NET MVC（也使用 Jquery）编写一个应用程序。我们的用户期望网格样式控件与 Excel 电子表格非常相似。他们想直接编辑每个单元格中的所有内容，包括使用下拉菜单、文本字段、日期选择器和复选框。

我查看了许多第三方网格控件，但它们似乎都很难实现我们用户习惯的体验。许多这些第 3 方工具在组合框和数据绑定方面存在问题。其他人则要求用户单击编辑按钮才能编辑行的内容（这对我们的用户社区不起作用）。

他们唯一想要单击按钮的时间是“删除一行”、“保存所有工作”和“添加新行”

有没有人建议我们可以用来实现这一目标的 3rd 方工具？它几乎就像一个谷歌电子表格类型的应用程序，能够制作一些行日期选择器、组合框等。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:19:58.597

也许我制作的 jQuery 插件[Handsontable](http://handsontable.com/)会对你有所帮助？它的目标是提供类似 Excel 的导航。

它与任何后端无关，因此您必须自己实现保存。

不幸的是，它没有复选框、日期选择器。不过，它确实具有自动完成功能（下拉菜单）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:23:39.360

我刚刚使用 jqGrid 和 Tomasz Pęczek 的[Lib.Web.Mvc](https://github.com/tpeczek/Lib.Web.Mvc)助手来实现类似的效果。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:35:54.403

也许 Telerik MVC 网格，看演示：

[http://demos.telerik.com/aspnet-mvc/grid/keyboardnavigation](http://demos.telerik.com/aspnet-mvc/grid/keyboardnavigation)

# json - 用 Dart 解析 JSON

> ID：10031323
> 
> 赞同：8
> 
> 时间：2012-04-05T15:16:41.870
> 
> 标签：json, dart

我希望能够将字符串解析为可以使用点表示法访问的对象，例如 myobject.property，而不是数组表示法，例如 myobject['property']。数组表示法工作正常。这是我到目前为止所拥有的。

我有一些 XML：

```
<level1 name="level1name">
  <level2 type="level2Type">
    <entry>level2entry</entry>
    <entry>level2entry</entry>
  </level2>
</level1> 
```

转换为 JSON：

```
{
  "level1": {
    "name": "level1name",
    "level2": {
      "type": "level2Type",
      "entry": [
        "level2entry",
        "level2entry"
      ]
    }
  }
} 
```

我有以下飞镖代码：

```
Object jsonObject = JSON.parse("""{
      "level1": {
        "name": "level1name",
        "level2": {
          "type": "level2Type",
          "entry": [
            "level2entry",
            "level2entry"
          ]
        }
      }
    }
""");

  print("my test 1 == ${jsonObject}");
  print("my test 2 == ${jsonObject['level1']}");
  print("my test 3 == ${jsonObject['level1']['name']}"); 
```

产生（期望的）输出：

```
my test 1 == {level1: {name: level1name, level2: {type: level2Type, entry: [level2entry, level2entry]}}}
my test 2 == {name: level1name, level2: {type: level2Type, entry: [level2entry, level2entry]}}
my test 3 == level1name 
```

但是当我尝试时：

```
print("my test 1 == ${jsonObject.level1}"); 
```

我得到以下信息：

```
Exception: NoSuchMethodException : method not found: 'get:level1'
Receiver: {level1: {name: level1name, level2: {type: level2Type, entry: [level2entry, level2entry]}}}
Arguments: []
Stack Trace:  0\. Function: 'Object.noSuchMethod' url: 'bootstrap' line:717 col:3 
```

理想情况下，我想要一个可以使用点符号访问的对象，并且编译器不会发出有关 Object 没有属性的警告。我尝试了以下方法：

```
class MyJSONObject extends Object{
  Level1 _level1;
  Level1 get level1() => _level1;
  set level1(Level1 s) => _level1 = s; 
}

class Level1 {
  String _name;
  String get name() => _name;
  set name(String s) => _name = s; 
}
...
MyJSONObject jsonObject = JSON.parse("""{
      "level1": {
        "name": "level1name",
        "level2": {
          "type": "level2Type",
          "entry": [
            "level2entry",
            "level2entry"
          ]
        }
      }
    }
""");
...
print("my test 1 == ${jsonObject.level1.name}"); 
```

但我没有像希望的那样给我'level1name'，而是得到：

```
Exception: type 'LinkedHashMapImplementation<String, Dynamic>' is not a subtype of type 'MyJSONObject' of 'jsonObject'. 
```

我在这里做错了什么？有什么办法可以做我正在尝试的事情吗？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T17:40:37.463

目前，JSON.parse 只返回 Lists (array)、Maps、String、num、bool 和 null ( [api ref](http://api.dartlang.org/json/JSON.html#parse) )。

我怀疑在反射进入语言之前，它无法根据 json 中的键重新构造对象。

但是，您可以在 MyJsonObject 中创建一个构造函数，该构造函数接受一个字符串，在内部调用 JSON.parse，并分配各种值。

这样的东西在飞镖编辑器中有效：

```
#import("dart:json");
class Level2 {
   var type;
   var entry;
}

class Level1 {
   var name;
   var level2;        
}

class MyJSONObject {
  Level1 level1;

  MyJSONObject(jsonString) {
     Map map = JSON.parse(jsonString);

     this.level1 = new Level1();
     level1.name = map['level1']['name'];
     level1.level2 = new Level2();
     level1.level2.type = map['level1']['level2']['type'];
     //etc...

  }
}

main() {
   var obj = new MyJSONObject(json);
   print(obj.level1.level2.type);

} 
```

如果您有更深的嵌套级别，那么一个不平凡的版本将需要一些循环和可能的递归。

更新：我已经编写了一个非平凡的版本（受下面帖子的启发），它[在 github 上](https://github.com/chrisbu/dartwatch-JsonObject)（也将 Seth 的评论重新构造为构造函数）：

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T20:52:02.877

克里斯完全正确。我只会补充一点，可以修改 JSON 解析器以返回一个更丰富的对象（类似于`JsonMap`而不是 pure `Map`），这可以`jsonObj.property`通过实现`noSuchMethod`. 那显然会比`jsonObj['property']`.

# javascript - 如何在不调用它的情况下通过另一个方法传递一个方法，并将一个变量对象传递给它？

> ID：10031326
> 
> 赞同：1
> 
> 时间：2012-04-05T15:16:49.887
> 
> 标签：javascript, jquery

对不起我的最后一个问题。这是格式更好的问题。

我有一个方法，我正在传递一个方法：

```
method("my_passed_method()")

function method(passed_method){
    eval(passed_method.replace('()', + '(' + obj + ')' );
} 
```

但这会返回：

`SyntaxError: missing ] after element list`

我假设这只是一些简单的 JSON 语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:21:13.690

我想你可能想要这个：

```
method(my_passed_method)

function method(passed_method){
    passed_method(obj);
} 
```

请注意，当您调用时`method`，您传递的是*函数引用*，而不是字符串，并且您没有*调用* `my_passed_method`（`()`它后面没有），您只是在引用它。

在`method`中，您通过变量调用函数`passed_method`，因为该变量包含函数引用。

在 JavaScript 中，函数是第一类对象。变量可以引用它们，你可以传递它们等等。

这是一个完整的、独立的示例：

```
// The function we'll pass in
function functionToPass(arg) {
    display("functionToPass's arg is: " + arg);
}

// The function we pass it into
function functionReceivingIt(func) {
    func("foo");
}

// Do it
functionReceivingIt(functionToPass); 
```

[现场复制](http://jsbin.com/ugisac)| [资源](http://jsbin.com/ugisac/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:21:12.320

方法的名称同时是您对该方法对象的引用。括号（可选地在它们之间带有参数）使 javascript 调用该方法。这意味着您的代码可以重写为：

```
method(my_passed_method)

function method(passed_method){
    passed_method();
} 
```

那么，这里发生了什么？当您传入 name`my_passed_method`时，javascript 引擎将查看该 name 映射到的内容，并发现它映射到一个 functio 对象。然后，在方法的函数调用中，该对象被分配给参数名称`passed_method。比，在这个名字后面加上括号会让 javascript 尝试执行那个对象，这确实是可能的，因为这个对象是一个函数，就像任何其他类型一样，函数就是我们所说的第一类公民。您可以通过将它们分配给变量并传递它们来像对待任何其他值一样对待它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:23:33.053

`eval`是邪恶的；或者他们说。您不需要将函数作为字符串传递，您可以只传递函数本身，然后使用[`Function.call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)or[`Function.apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)传递参数（或直接调用它）：

```
method(my_passed_method);
function method(passed_method) {
  passed_method(obj);
  // OR: passed_method.call(window,obj);
} 
```

必要的情况`eval`非常罕见。

请注意，您的代码会将 obj 评估为 javascript，因此输出可能会有所不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T15:22:34.363

在 Javascript 中，函数被视为对象。您可以将它们作为参数传递给其他函数，如下所示。

```
function something(x){
alert(x);
}

function pass(func){
  pass2(func);
}

function pass2(func){
  func("hello");
}

pass(something); //alerts hello 
```

演示：http: [//jsfiddle.net/wBvA2/](http://jsfiddle.net/wBvA2/)

# windows-installer - Visual Studio 安装项目启动条件以检查 StyleCop

> ID：10031328
> 
> 赞同：4
> 
> 时间：2012-04-05T15:16:53.950
> 
> 标签：windows-installer, stylecop

我创建了一组默认项目模板和开发框架库。我目前有 2 个单独的安装程序，现在想将它们组合成一个安装程序，并确保安装 StyleCop 作为先决条件。

如果尚未安装 StyleCop，我希望下载并安装它。

一旦我确认 StyleCop 已经安装，我想覆盖全局样式规则以符合我们的编码标准。

如果不编写自定义安装程序，这是否可行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T10:22:42.203

一旦我在 MSDN 上找到了相关的 How To，结果就变得非常简单。

第一步是在目标机器上添加启动条件搜索。[你可以在这里](http://msdn.microsoft.com/en-us/library/4awx1f1d.aspx)看到这是如何完成的

下面的屏幕截图显示了要搜索的注册表项和值。 ![StyleCop 注册表搜索属性](../Images/45681323098c462feba9062408870084.png)

启动条件属性应如下所示... ![启动条件属性](../Images/f65fcd68c0f0114928f3837e7afab0fd.png)

然后应按[此处](http://msdn.microsoft.com/en-us/library/h0z89y5d.aspx)所示配置文件系统文件夹。下面的屏幕截图显示了文件夹属性。

![文件系统文件夹属性](../Images/94a924a3ad815217883ce1069f586fd8.png) **注意：我使用注册表中的 PID 值来确保覆盖正确的设置文件。**

# mysql - 在教义中分离 INSERT 和 UPDATE 查询

> ID：10031329
> 
> 赞同：1
> 
> 时间：2012-04-05T15:16:59.853
> 
> 标签：mysql, doctrine

是否有任何简单的解决方案如何使用 Doctrine 在一个数据库上执行 INSERT 查询并在另一个数据库上执行 SELECT 查询？

我正在尝试将 Doctrine 与 Mysql 复制一起使用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:57:06.543

已经找到解决方案，需要修改2个类：

类 Doctrine_Query，更改 preQuery 方法：

```
public function preQuery()
{
    $doctrine_manager = Doctrine_Manager::getInstance();

    if ($this->getType() == Doctrine_Query::SELECT) {
       $this->_conn = $doctrine_manager->getConnection('slave');
    } else { 
       $this->_conn = $doctrine_manager->getConnection('master');
    }
} 
```

类 Doctrine_Record，更新方法保存：

```
public function save(Doctrine_Connection $conn = null)
{
    if ($conn === null) {
        $conn = Doctrine_Manager::getInstance()->getConnection('master');
    }
    parent::save($conn);
} 
```

# bison - 简单（？）语法中的移位减少冲突

> ID：10031330
> 
> 赞同：2
> 
> 时间：2012-04-05T15:17:06.610
> 
> 标签：bison, shift-reduce-conflict

我正在尝试用野牛描述语法，但我不确定是否可以做到。我的预期语法是这样的：

```
%token A B C D SEP

%%

items          : /* empty */
               | items_nonempty
               ;

items_nonempty : item
               | items_nonempty SEP item
               ;

item           :       B
               |       B       SEP D
               |       B SEP C
               |       B SEP C SEP D
               | A SEP B
               | A SEP B       SEP D
               | A SEP B SEP C
               | A SEP B SEP C SEP D
               ; 
```

" `items`" 是一个（可能为空的）元素序列`item`，由`SEP`标记分隔。

每个项目最多包含 4 个标记 ( `A B C D`)，按此顺序，以 . 分隔`SEP`。项目中的`A`、`C`和`D`标记是可选的。

请注意在每个项目内以及项目本身之间重复使用相同的分隔符标记 SEP。

我希望预期的语法很清楚。我认为它是明确的，但我很不确定它是否被限制到可以被野牛解析——不幸的是，我的解析器知识相当生疏。

使用给定的语法，bison 报告 4 个移位/减少冲突。查看“输出”，我了解它们出现的位置以及原因；但我不知道如何（以及是否）可以编写预期的语法来摆脱 S/R 冲突。

我不愿意使用`%expect`声明。同样，我不愿意让我的扫描仪使用分隔符标记，而不是将它们传递给解析器。

任何有关如何清理此语法的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:24:11.120

基本问题是，所写的语法需要两个前瞻标记来决定它何时找到 an 的结尾并因此可以减少它，或者在它认为是前瞻的下一个字符`item`之后是否还有当前项目的另一部分。`SEP`

您可以尝试多种方法

*   使用 btyacc 或 bison 的 GLR 支持来有效地获得更多的前瞻。

*   编写语法以接受单个项目的任意列表，然后使用 post-pass 将它们重新组合成 1-4 个项目的集合，其中至少 1`B`并拒绝格式错误的集合（这是 Gunther 的建议）

*   使用扫描仪做更多的前瞻——而不是返回简单的`SEP`令牌，返回`SEP_BEFORE_A_OR_B`或`SEP_NOT_BEFORE_A_OR_B`取决于后面的下一个令牌`SEP`是什么。

*   在扫描仪中组合标记——返回`SEP_C`和`SEP_D`作为单个标记（分隔符后跟一个`C`或`D`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:32:41.220

语法确实是明确的，它是 LL(7) 并且（未经验证）我相信它是 LR(2)，甚至可能是 LALR(2)。因此，如果您有一个用于其中任何一个的生成器，它就可以完成这项工作。

lookahead-1 冲突源于在项目之间和项目内使用相同的分隔符，如果您放弃分隔符或项目结构，它们将消失。

所以你可以做的是用不同的语法解析两次。在第一遍中，您可以验证分隔符的位置是否正确，语法可能类似于

```
items          :
               | items_nonempty
               ;
items_nonempty : item
               | items_nonempty SEP item
               ;
item           : A
               | B
               | C
               | D
               ; 
```

在第二个（也是更重要的）阶段，您将验证项目结构。这可能是

```
items          :
               | items_nonempty
               ;
items_nonempty : item
               | items_nonempty item
               ;
item           : B
               | B D
               | B C
               | B C D
               | A B
               | A B D
               | A B C
               | A B C D 
               ; 
```

词法分析器忽略了分隔符的位置。

上面两个都是 LALR(1)，前者是 LL(1)，后者是 LL(4)，但可以通过一些因式分解得到 LL(1)。

这将是一个独立于 bison 或 lexer 工具提供的特殊产品的解决方案。我期待着了解他们可以做些什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:23:39.033

您可以将`SEP`以下其他标记包含在单个规则中。写得很简洁，你的语法可以这样表达：

```
%token A B C D SEP
%%
items : /* empty */ | item | itemsSEP item ;
item : a B | a b C | a b c D ;
itemsSEP : itemSEP | itemsSEP itemSEP ;
itemSEP : a b c d ;
a : /* empty */ | A SEP ;
b : B SEP ;
c : /* empty */ | C SEP ;
d : /* empty */ | D SEP ; 
```

所以现在我有`itemSEP`一个项目后跟一个分隔符，但`item`最后一个项目后面没有分隔符。它们由小写的单字母非终结符组成，每个非终结符也包括以下分隔符，并注意一些可选参数。只有最后一个参数`item`始终是一个原始终端，因为后面不会有分隔符。

使用以这种方式表达的语法，您不会遇到任何移位减少冲突，因为现在的语法是 LALR(1)。在每一步，它都会准确地知道要应用什么减少，即使该规则的要点是去掉一个`SEP`，这样我们就可以进一步向前看一个令牌。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T21:33:25.087

这有一个转变/减少冲突：

```
%token A B C D SEP

%%

items
    : /* empty */
    | items_nonempty
    ;

items_nonempty
    : item
    | items_nonempty SEP item
    ;

item
    : opt_a B opt_c_d_list
    ;

opt_a
    :   /* Nothing */
    |   A SEP
    ;

opt_c_d_list
    :   /* Nothing */
    |   opt_c_d_list c_or_d
    ;

c_or_d
    :   SEP C
    |   SEP D
    ; 
```

仅此`opt_a`规则将 S/R 计数从 4 更改为 2。残余问题是相同的 SEP 在 B 之后分隔 C 或 D，Yacc 无法向前看。您需要进行语义检查才能禁止“B SEP D SEP C”；上述规则将允许这样做。

您是否可以考虑修改您的标记器以在读取 SEP C 时返回 C？，在读取 SEP D 时返回 D？您甚至可以在 中使用词汇反馈和开始条件`flex`，这样在读取 B 时，您翻转一个开关，以便 SEP C 仅作为 C 返回，而 SEP D 仅作为 D 返回。如果这是可能的，以下是明确的语法可以在没有 S/R 冲突的情况下工作：

```
%token A B C D SEP

%%

items
    : /* empty */
    | items_nonempty
    ;

items_nonempty
    : item
    | items_nonempty SEP item
    ;

item
    : opt_a B opt_c opt_d
    ;

opt_a
    :   /* Nothing */
    |   A SEP
    ;

opt_c
    :   /* Nothing */
    |   C
    ;

opt_d
    :   /* Nothing */
    |   D
    ; 
```

# html - 容器不会居中....无法解决

> ID：10031331
> 
> 赞同：0
> 
> 时间：2012-04-05T15:17:09.573
> 
> 标签：html, css

这应该是一个将容器放在页面中心的非常简单的过程。

```
<style type="text/css">
    body{
       margin: 0;
       padding: 0;
    }
    #container{
       width:960px;
       float:left;
       margin:0 auto;
    }
</style>
...
<div id="container">
   Content
</div> 
```

谁能告诉我为什么`container`不居中？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T15:19:28.513

`margin:0 auto;`为左右提供自动边距，这将使其居中。

如果它没有居中，那将是因为`float:left;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:19:26.300

您的意思是“**没有**出现”吗？

设置和删除。`text-align:center;`_`body``float:left;``#container`

# c# - 建议基于组件的模式选择对象状态

> ID：10031337
> 
> 赞同：0
> 
> 时间：2012-04-05T15:17:43.723
> 
> 标签：c#, design-patterns

我正在寻找实现这一点的最佳方法，本质上是一种适合的模式，给定一个与兄弟姐妹和孩子有关系的对象。

我们有一套复杂的规则来设置每个对象的状态

例如

*   n个“类型”A的兄弟对象，那么每个对象的状态都是x
*   n 个兄弟对象“type”A 和“type”B 然后每个的状态是 y

这可能还有 3 或 4 个变体

对于每个兄弟对象，其子对象的组成将确定它的“类型”

希望这足够清楚，如果您认为我可以添加更多说明，请发表评论？

编辑：

添加了一些伪代码

状态将与 Foo 对象（而不是 FooBar 或 Bar）一起保留，并且状态在用户驱动的事件上更新（用户可以修改 Foos 和 Bars 的组合，然后生成事件以重新调查，设置状态并持久化到数据库）

希望这可以帮助

```
void Main()
{

    var foobar = GrabAFooBar();
    //Each Foo will have its state set based on the rules in the question
    //eg
    //foobar has 2 Foos both of which only contain BarType1 then both foos have a State of StateOne
    //foobar has 2 foos, one has a BarType1 one has a BarType2 both foos have a State of StateTwo
    //foobar has 2 foos, one has a BarType1 and BarType3 one has a BarType2 both foos have a State of StateThree
    //effectivaly there are 5 States (currently) and a  well defined set of combinations
    //All foos will have the same state at the end of the process (there will never be a mix)

}

FooBar GrabAFooBar()
{
    //return a FooBar from data
}

// Define other methods and classes here

    class FooBar
    {
        List<Foo> Foos {get;set;}

    }
    class Foo
    {
        public List<Bar> Item {get;set;}
        public State state {get;set;}
    }
    abstract class Bar
    {

    }

    class BarType1 : Bar
    {
    }

    class BarType2 : Bar
    {
    }

    class BarType3 : Bar
    {
    }

    enum State
    {
        StateOne,
        StateTwo,
        StateThree
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:51:35.620

责任链在这里听起来像是一种可能的模式。

链中的每个处理程序都将负责“匹配”您的对象并返回状态或将对象传递给链中的下一个处理程序。您可以对链中的处理程序进行排序，以便即使两个或更多处理程序接受对象，链的顺序也会决定您的优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:58:51.087

我建议用管理逻辑的实际类替换枚举：

```
public abstract class State {
    public bool AppliesTo( Foo foo );
}

public class StateOne : State {
    public override bool AppliesTo( Foo foo ){
        return foo.Item.All(x => x is Bar1);
    }
}
//etc. 
```

“x is Bar1”部分不好，你可以使用双重调度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T16:02:02.117

我不认为有这样的模式，除非你想听到类似的答案`Object Oriented Programming`。

你有很多选择，例如：

1.  通过调用将计算状态并将其保存在属性中的方法/函数来按需**计算**`State`状态）

2.  创建一个属性getter，**每次调用时**`State`都会计算状态

***   将 CollectionChanged 处理程序附加到同级集合并**在集合更改后自动更新状态**** 

 **这些之间的选择将取决于您的依赖项更改的频率、您需要了解状态的频率以及您的计算成本。

如果规则没有太大变化，那么您可以对它们进行硬编码。但如果它们发生变化，您应该考虑使用*规则引擎*，例如[Biztalk](http://msdn.microsoft.com/en-us/library/ee267559%28v=bts.10%29.aspx)**

# php - 动态添加的表单字段未显示在 POSTed 数据中

> ID：10031340
> 
> 赞同：3
> 
> 时间：2012-04-05T15:17:57.833
> 
> 标签：php, javascript, jquery

我正在使用 jQuery 添加表单元素。它显示在页面上很好，具有正确的值，但是当我提交表单时，数据不会显示在 PHP 后端。我查看了 Firebug 的 POST 数据，但也没有看到它。我用来添加表单元素的 javascript 是：

```
$("#projectArray").append("<input type='text' name='data[Project][description]' value='"+projectDescription+"' id='test' />"); 
```

有没有人遇到过这样的事情？我似乎看过其他帖子，但它们似乎是拼写错误，据我所知，我在这一行没有任何拼写错误。

**编辑**：根据要求，这是表单代码。我剪掉了很多，因为它是一个相当大的形式。如果有人想要完整的代码，我可以粘贴它。

```
<form action="/learningexperiences/add" id="LearningexperienceAddForm" method="post" accept-charset="utf-8">
    <div style="display:none;"><input type="hidden" name="_method" value="POST"/></div>
    <div class="input text"><tr><td><label for="LearningexperienceSubjectarea">Subject Area</label>&nbsp;&nbsp;</td><td><input name="data[Learningexperience][subjectarea]" maxlength="50" type="text" id="LearningexperienceSubjectarea"/></td></tr>
...
    <tr><td>Active</td><td><div class="cbx"><input type="hidden" name="data[Learningexperience][active]" id="LearningexperienceActive_" value="0"/><input type="checkbox" name="data[Learningexperience][active]"  checked="checked" value="1" id="LearningexperienceActive"/></div></td></tr>

    <tr><td colspan="2" style="vertical-align:middle;"><div id="projectArray"></div></td></tr>

...
    <input type="hidden" name="data[Learningexperience][id]" id="LearningexperienceId"/><tr><td colspan="2" style="vertical-align:middle;">&nbsp;</td></tr>

</table>

<table id="buttonsTable">
<tr><td style="text-align:right;"><div style="margin-right:5px;"><div class="submit"><input  name="cancel" type="submit" value="Cancel"/></div></div></td>
<td><div class="submit"><input  type="submit" value="Save Record"/></div></form></td></tr>
</table> 
```

**编辑2：**我将附加标签更改为附加到表单元素（#LearningexperienceAddForm）。我不知道为什么，但它从那个时候开始工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T21:02:51.997

在遇到同样的麻烦时遇到了这个问题。我很确定您需要将标签放在所有东西的外面。

像这样的东西：

```
<form>
<table>

[add as many dynamic fields as you want]

</table>
</form> 
```

由于远高于我的工资等级的原因，如果这些标签有问题，则不会选择动态字段进行发布...

希望这可以为我节省 2 个小时的时间 :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:51:48.240

我将建议创建元素*然后*附加它，而不是附加 HTML 本身：

```
var input = document.createElement('input');
input.name = 'data[Project][description]';
input.type = 'text';
input.value = projectDescription;
input.id = 'test';
$('#projectArray').append(input); 
```

这将更好地将其插入 DOM 以进行访问。

让我知道这是否适合您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T13:42:43.883

我将附加标签更改为附加到表单元素 (#LearningexperienceAddForm)。我不知道为什么，但它从那个时候开始工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-17T23:28:57.710

对于遇到此问题的任何人，只需确保您的结束表单标签包含附加数据。我的表单中有太多的结束 div 被 Google Chrome 替换为结束标签，所以请注意这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-05T07:41:30.723

请检查所有 html 元素标签，我的意思是在表单之间打开（<...>）和关闭标签（）。一切都应该以管理的方式进行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-27T21:16:09.987

我在从打算作为“模板”的内容中克隆一些输入字段以复制由其他人编写的字段集时发现，这些输入没有出现在我的表单数据中。经过一番摸索，结果发现输入字段上有`disabled`属性，一旦从我的克隆副本中删除，就会正确地包含在表单提交中。

我猜其他开发人员这样做是因为他们不希望模板与表单数据一起提交，因为它出现在表单标签中。

# linux - 为什么这个 shell 管道会退出？

> ID：10031344
> 
> 赞同：19
> 
> 时间：2012-04-05T15:18:00.557
> 
> 标签：linux, bash, unix, pipe

我有一个随机生成 10 个字符的密码的 shell 管道：

```
cat /dev/urandom | base64 | head -c 10 
```

我的问题是`cat /dev/urandom | base64`一个无限的输出流，它不会自行退出。但是为什么附加`head -c 10`会使整个管道退出？我假设`cat`，`base64`并且`head`是 3 个独立的进程，如何`head`让`cat`进程退出？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-05T15:22:17.843

`head`读取所需数量后关闭输入文件。当管道从一侧关闭时，另一侧会出现写入错误；这导致`base64`关闭，这反过来又导致`cat`关闭。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-06T13:15:51.513

`base64`输出 10 个字节后，`head`获得足够的输入并退出。当前者试图输出更多字节时，它会收到[SIGPIPE 信号](http://en.wikipedia.org/wiki/SIGPIPE)并因此退出。出于同样的原因，`cat`将依次退出。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-05T15:23:27.873

管道通过将一个进程 A 的输出连接到 B 的输入来工作。连接可以断开，当

*   A 关闭其输出。B 将获得 EOF。
*   B 关闭其输入。A 在尝试写入下一个字节时将收到输出不再可用的错误。

由于这两种情况很常见，因此处理已移至 C 标准库中。

# jquery - jQuery UI Datepicker - 前端的动态日期格式但后端的静态日期格式？

> ID：10031351
> 
> 赞同：4
> 
> 时间：2012-04-05T15:18:33.020
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

许多客户要求我们让我们的日期选择器反映他们选择在我们的应用程序中使用的日期格式。不幸的是，我们经常使用日期选择器，因此，对每个选择器进行检查并确保日期仍然被正确解析是最后的手段。

现在我已经将他们选择的日期格式翻译成日期选择器的相应日期格式，并简单地将默认设置设置为该格式`dateFormat`。

```
<?php
// set default datepicker date format depending on their date format
$phpToJsDateFormats = array(
    'j M Y' => 'd M yy',
    'Y-m-d' => 'yy-mm-dd',
    'm-d-Y' => 'mm-dd-yy',
    'd-m-Y' => 'dd-mm-yy',
    'n/j/Y' => 'm/d/yy',
    'j/n/Y' => 'd/m/yy',
    'F jS, Y' => 'MM d, yy',
);
$jqueryDateFmt = $phpToJsDateFormats[ $settings['Config']['format_date'] ];
?>
<script type="text/javascript">
$.datepicker.setDefaults({
    dateFormat: "<?php echo $jqueryDateFmt ?>"
});
</script> 
```

为了使这个简单修复，我想知道是否有一种方法可以掩盖 datepicker 的实际值，以便我们向用户显示的值是他们的日期格式，但 datepicker 实际提交的值是我们的默认格式已经使用了。我正在考虑类似于全局表单的`onsubmit`东西，以及通过 AJAX 提交的表单类似的东西，但我不知道。也许 jQuery 在他们的日期选择器中内置了一些我不知道的很酷的东西。

任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T22:04:19.977

使用[altFormat](http://api.jqueryui.com/datepicker/#option-altFormat)

```
$( ".selector" ).datepicker({ altFormat: "yy-mm-dd" }); 
```

> 这允许向用户显示一种日期格式以供选择，而实际上在幕后发送另一种格式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-30T17:59:48.937

我找到了这个：

```
$.datepicker.setDefaults($.datepicker.regional['nl']);
$('.datepicker').datepicker('option', {
    dateFormat: 'yy-mm-dd'
}); 
```

# ruby-on-rails - Rails 合并两个 ActiveRecord::Relation 的

> ID：10031353
> 
> 赞同：3
> 
> 时间：2012-04-05T15:18:37.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个“个人资料”模型和这个模型的两个 ActiveRecord::Relations。第一个关系的 SQL 请求非常大。其次是

```
Profile.where(:id => 1) 
```

我想将第二个关系添加到第一个。因此，第二个关系将包含第一个配置文件。

我试过了

```
first.merge(second) 
```

但它返回空关系。Rails 版本是 3.2.2 当然，结果也应该是关系。我需要将 .limit() 和 .paginate() 添加到这个关系中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:44:01.303

您可以在现有关系上附加额外的 .where 子句，因此：

```
relation = Thing.joins(:associated_things => [:users, :still_more_things]).where(:condition => true)
new_relation = relation.where(:id => 1) 
```

这将使用 AND 将新的“位置”与任何现有的“位置”结合起来。ActiveRecord::Relation 不支持使用 OR 加入 'wheres'，如果您需要这样做，如果您使用的是 Rails 3.1+，请查看 Squeel (https://github.com/ernie/squeel)，或 meta_where ( https://github.com/ernie/meta_where) 用于 3.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T20:39:48.843

合并会用合并关系中的值覆盖第一个关系中相同键的值。

# javascript - Raphael div 不透明度不适用于 IE

> ID：10031354
> 
> 赞同：1
> 
> 时间：2012-04-05T15:18:38.097
> 
> 标签：javascript, internet-explorer, raphael, opacity

我试图弄清楚如何制作适用于 IE 的不透明矩形（FF/Chrome/Safari 都可以）。我尝试在我的 CSS 文件中创建一个类

```
.opacity60 {
 -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
 filter: alpha(opacity=60);
} 
```

然后尝试使用以下代码创建一个矩形：

```
 var rIn = Raphael("sideIn", "100%", "100%");
       rIn.rect(0, 0, "100%", "100%").attr({fill:"black", stroke:"none",
opacity:0.6 });
       rIn.rect.node.setAttribute('class', 'opacity60') 
```

但是，我在 IE 控制台中收到以下错误（它也不适用于 FF）：

```
SCRIPT5007: Unable to get value of the property 'setAttribute': object
is null or undefined 
```

我的代码基于我[之前](https://stackoverflow.com/questions/9959427/raphael-opacity-not-displaying-on-ie)提出的问题，但由于我无法获得建议的工作方法，我想知道是否还有其他我做错的事情。我也在 Raphael 列表上询问过，但那里也没有建议的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:21:39.640

恐怕您根本无法通过 CSS 类为 VML 元素设置不透明度。例如，参见[讨论这个差距的这个问题。](https://stackoverflow.com/questions/8661154/is-it-possible-to-set-fill-and-stroke-colors-and-opacity-on-vml-paths-using-css)

您需要使用 Raphael 的原生`.attr({opacity: .5})`或直接设置 VML 元素的*opacity*属性。一般来说，Raphael API 可以保护您免受这些不一致的影响，尽管您无法将样式规则分离到样式表中，这令人沮丧。

您可以做的一件事是在视觉编码之间保持一些分离，就是将所有样式信息作为对象写入代码中的指定区域：

```
var RECT_STYLE = {
    opacity: .5, 
    fill: "#ff0000", 
    stroke: "#333333",
    stroke-width: 1
}

var OVAL_STYLE = {
    opacity: .9, 
    fill: "#ffFF00", 
    stroke: "#000000",
    stroke-width: 5
}
//etc... 
```

然后将它们设置为：

```
rect.attr(RECT_STYLE);
oval.attr(OVAL_STYLE); 
```

# java - TypeInitializationException 未处理

> ID：10031363
> 
> 赞同：1
> 
> 时间：2012-04-05T15:19:03.453
> 
> 标签：java

我在 C# 语言中使用 opennlp 工具。我写了以下代码：

```
string modelpath = @"D:\models\en-sent.bin";
java.io.FileInputStream modelInpStream = new java.io.FileInputStream(modelpath);
SentenceModel model = new SentenceModel(modelInpStream);
SentenceDetectorME sentenceDetector = new SentenceDetectorME(model); 
```

但它在该行中导致了 TypeInitializationException：

```
SentenceModel model = new SentenceModel(modelInpStream); 
```

异常消息：

```
TypeInitializationException was unhandled
The type initializer for 'java.nio.charset.StandardCharsets' threw an exception. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T22:12:10.833

假设您使用 IKVM 代码将 openNLP jar 文件转换为 .Net，您应该只需要在您的项目中包含 IKVM Charsets dll 以使其工作。

# java - 进程永远不会以 processBuilder 结束

> ID：10031368
> 
> 赞同：1
> 
> 时间：2012-04-05T15:19:10.573
> 
> 标签：java

我在使用 Process builder 在 java 中运行命令时遇到问题。在测试机器中它可以正常工作，但是一旦在服务器上，命令打开的进程就会冻结并且永远不会退出。此代码用于 apache tomcat windows web 服务器：

```
//WORD is the absolute path for msWord and inF is the absolute path
//for the file to save as pdf
public boolean changeFormatMSOffice(String inF, String WORD) {
    System.out.println("changeFormatMSOffice(" + inF + "," + WORD + ")");
    String macro = "";
    ArrayList<String> wordArr = new ArrayList<String>(java.util.Arrays.asList(TO_PDF_WORD.replace(" ", "").split(",")));
    ArrayList<String> excelArr = new ArrayList<String>(java.util.Arrays.asList(TO_PDF_EXCEL.replace(" ", "").split(",")));
    ArrayList<String> ppArr = new ArrayList<String>(java.util.Arrays.asList(TO_PDF_PP.replace(" ", "").split(",")));
    String extension = inF.substring(inF.lastIndexOf(".")).replace(".", "").trim();
    BufferedWriter out;
    List<String> cmdList = new ArrayList<String>();
    cmdList.add(WORD);
    String saveFile = "";
    if (wordArr.contains(extension)) {
        macro = "/msaveAsPDF";
        cmdList.add(macro);
        cmdList.add(inF);
    } else if (excelArr.contains(extension) || ppArr.contains(extension)) {
        if (excelArr.contains(extension)) {
            macro = "/mSaveXLSAsPDF";
        } else {
            macro = "/msavePPTAsPDF";
        }
        cmdList.add(macro);
        int fileNum = 0;
        saveFile = "\"" + PATH + (PATH.substring(PATH.length() - 1).equals(File.separator) ? "" : File.separator) + fileNum + ".txt\"";
        while (new File(saveFile).exists()) {
            fileNum++;
            saveFile = "\"" + PATH + (PATH.substring(PATH.length() - 1).equals(File.separator) ? "" : File.separator) + fileNum + ".txt\"";
        }
        try {
            out = new BufferedWriter(new FileWriter(saveFile));
            out.write(inF);
            out.close();
            cmdList.add(saveFile);
        } catch (Exception e) {
            System.err.println(e.toString());
        }
    }

    try {
        ProcessBuilder proc = new ProcessBuilder(cmdList);
        System.out.println("PreWaitForList");
        Process pro = proc.start(); //<----- important part starts here
        StreamGobbler g1 = new StreamGobbler("stdin", pro.getInputStream());
        StreamGobbler g2 = new StreamGobbler("stderr", pro.getErrorStream());
        g1.start();
        g2.start();
        pro.waitFor();//<---- hangs here, but need to wait for it to exit(system requirement)
        System.out.println("AfterWaitFor");
        try {
            if (!saveFile.equals("")) {
                new File(saveFile).delete();
            }
        } catch (Exception e) {
        }
        return true;
    } catch (Exception e) {
        System.err.println(e.toString());
        return false;
    }
} 
```

我发现信息说您需要收集 std 和错误流，否则它会冻结，所以我使用了以下流 gobbler 实现：

```
public class StreamGobbler implements Runnable {

    String name;
    InputStream is;
    Thread thread;

    public StreamGobbler(String name, InputStream is) {
        this.name = name;
        this.is = is;
    }

    public void start() {
        thread = new Thread(this);
        thread.start();
    }

    public void run() {
        try {
            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);

            while (true) {
                String s = br.readLine();
                if (s == null) {
                    break;
                }
                System.out.println("[" + name + "] " + s);
            }

            is.close();

        } catch (Exception ex) {
            System.out.println("Problem reading stream " + name + "... :" + ex);
            ex.printStackTrace();
        }
    }
} 
```

请注意，在命令行中运行命令时，它在测试机器和服务器中都有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T17:47:17.683

当您从 java 与命令行启动进程时，环境参数（如 $path）和工作目录是否相同？

# javascript - Spotify 应用播放列表，未触发的事件

> ID：10031373
> 
> 赞同：1
> 
> 时间：2012-04-05T15:19:32.613
> 
> 标签：javascript, spotify, playlists

我遵循了 Spotify Apps API 中的播放列表示例，但除了示例播放列表之外，没有触发任何回调。

```
working: "spotify:user:spotify:playlist:3Yrvm5lBgnhzTYTXx2l55x"
not working: "spotify:user:1123874884:playlist:7xgiawpXZUVRFI1ohNfnP2" 
```

第一个来自示例，第二个是我的示例播放列表。我像这样加载它们：

```
var playlist = models.Playlist.fromURI("spotify:user:shihjiapei:playlist:6YZtFxUCxmCgp3KDWTQhXW");
console.log("before event registration");
playlist.observe(models.EVENT.LOAD, function() {
    console.log("Playlist loaded!");
    console.log(playlist);
});
playlist.observe(models.EVENT.LOAD_ERROR, function() {
    console.log("Playlist error: not public!");
    console.log(playlist);
}); 
```

第一个说：播放列表已加载！第二个没说什么……

我在 spotify-client 中检查了我的播放列表是否公开。那么我还需要打开什么其他秘密开关？？

任何经验，最佳做法表示赞赏。

**编辑：** WTF，它就像那样工作..

```
var playlist_url = 'http://open.spotify.com/user/1123874884/playlist/7xgiawpXZUVRFI1ohNfnP2';
tempPlaylist = models.Playlist.fromURI(playlist_url, function(resultPlaylist) {
    console.log("Playlist loaded!");
    console.log(resultPlaylist);
}); 
```

但为什么它与某些播放列表相反呢？啊！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:59:51.723

我认为这可能是因为您的第二个示例是本地播放列表，它在技术上已经加载（在您本地的 Spotify 客户端中）。第一个示例是您可能尚未订阅的示例，因此它不会为您存储在本地，因此需要下载。

放入 HTTP uri 而不是 Spotify 是类似的情况，必须首先下载播放列表信息，因此会调用回调。

# vb.net - 在不知道经理 URL 的情况下在 AD 中设置经理属性

> ID：10031379
> 
> 赞同：0
> 
> 时间：2012-04-05T15:19:51.927
> 
> 标签：vb.net, active-directory, ldap

我有一个函数可以让我在这里编辑用户的 manager 属性：

```
 Public Shared Sub SetManagerProperty(ByVal de As DirectoryEntry, ByVal pName As String, ByVal pValue As String)

        'First make sure the property value isnt "nothing"
        If Not pValue Is Nothing Then
            'Check to see if the DirectoryEntry contains this property already
            If de.Properties.Contains(pName) Then   'The DE contains this property
                'Update the properties value
                de.Properties(pName)(0) = pValue
            Else    'Property doesnt exist
                'Add the property and set it's value

                'de.Properties(pName).Add("cn=" & frmOrganization.txtManagerName.Text & ",OU=Company,OU=Users,OU=Summit,OU=North America,DC=mycompany,DC=com")

            End If
        End If

    End Sub 
```

但是，如果经理不在公司 OU 中怎么办？我如何编辑它以在整个域中搜索他？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:38:11.157

使用一个`DirectorySearcher`对象

```
DirectorySearcher ds = new DirectorySearcher();
ds.SearchRoot = new DirectoryEntry(String.Format("LDAP://{0}/{1}",adserver,searchroot));
ds.PropertiesToLoad.Add("distinguishedName");
ds.SearchScope = SearchScope.Subtree;
ds.Filter = String.Format("(&(objectCategory=user)(sAMAccountName={0}))", frmOrganization.txtManagerName.Text);
SearchResult sr = ds.FindOne();
if (sr == null)
{
    // Manager does not exist
    return null;
}
String managerDN = sr.Properties["distinguishedName"][0].ToString(); 
```

# php - 使用 PHP 发送 HTML 电子邮件

> ID：10031380
> 
> 赞同：0
> 
> 时间：2012-04-05T15:19:56.890
> 
> 标签：php, html, email

我正在尝试使用 PHP 发送一封 html 电子邮件，并且它一直以文本形式出现。所有值都是从 php 正确生成的，它只是电子邮件中的文本。这是代码：

```
 $to='xxxxxxx@xxxxxxx.com';
    $from = 'xxxxxxx@xxxxxxxx.com';
    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
    $headers = "From: $from \r\n";
    $subject = "Print Run: " . $run . " is ordered";
    $body ="<html>
            <head>
            </head>
            <body>
            <table>
                <tr>
                    <th>Company</th>
                    <th>Quantity</th>
                    <th>Size</th>
                    <th>Date Added</th>
                    <th>
                    </th>
                </tr>";
            for($i = 0; $i < $arraySize; $i++){     
                $body .= "<tr><td>" . $companyName[$i] . "</td><td>" . $quantity[$i] . "</td><td>" . $cardSize[$i] . "</td><td>" . $dateAdded[$i] . "</td></tr>";
            }
            $body .= "<tr>
                        <td style=\"font-weight:bold; border-style:solid; border-top-width:1px;\">Totals</td>
                        <td style=\"font-weight:bold; border-style:solid; border-top-width:1px;\">" . $totals . "</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        </tr>
                        </table>
                        </body>
                        </html>";

    mail($to,"Print Run: " . $run . " is ordered",$body,$headers); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T15:21:18.747

您覆盖三行中最后一行的标题：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers = "From: $from \r\n"; 
```

应该是（注意点）：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "From: $from \r\n"; 
```

# html - 屏幕元素无缘无故跳行

> ID：10031381
> 
> 赞同：0
> 
> 时间：2012-04-05T15:19:59.140
> 
> 标签：html, css

我正在制作一个移动网络应用程序。在页面的顶部，我有一行，左侧是“返回”链接，右侧是页面名称。或者应该是这样。相反，我得到了一个带有其*下方*页面名称的反向链接。这是我的代码。我不知道如何解决它。

```
<a style="text-decoration:none" href="resultsMap.html?radius=0&latitude=37.33&longitude=-121.85&j=true">Back</a>
<p id="name"> PageName </p>
        <hr/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:23:02.977

这是因为您使用的是段落：

```
<p id="name"> PageName </p> 
```

改用 ie`<div>`并将其格式化以对齐您喜欢的位置

* * *

看到这个小提琴：http: [//jsfiddle.net/UQFSw/1/](http://jsfiddle.net/UQFSw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:35:03.373

这是因为锚（链接）是**内联**元素，而段落是**块**元素。

[块级与内联元素](http://webdesign.about.com/od/htmltags/qt/block_vs_inline_elements.htm)

内联元素的行为类似于文本。如果它们被插入到文本的中间，它们会与文本一起流动。块元素将自己的空间作为单独指定的部分。

`div`如果您想使用通用内联元素，请不要使用上面建议的 a ，而是使用 a `span`。

我建议改为：

```
<div style="border-bottom:1px solid black;">
    <a style="text-decoration:none" href="resultsMap.html?radius=0&latitude=37.33&longitude=-121.85&j=true">Back</a>
    <span style="float:right;">Page Name</span>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:38:39.363

段落 ( `<p>`) 是块级元素，它有一个使用浏览器窗口的整个宽度的容器，而不是像`<a>`，在文本流中占据它们的位置的内联元素。

换句话说，一个段落将始终从“新行”开始，而锚点将放置在当前行中。

如果您希望页面名称直接位于链接的右侧，您可以编写

```
<a ...>Back</a>
<span id="name"> PageName </span> 
```

该`<span>`元素也是一个内联元素。

# sbt - sbt 0.11.2：仅使用企业关系库作为依赖项

> ID：10031382
> 
> 赞同：1
> 
> 时间：2012-04-05T15:20:03.537
> 
> 标签：sbt

我正在尝试设置一个与类型安全堆栈一起安装的 sbt 实例，以便仅将我的私有 nexus 存储库用于所有依赖项。

但无论我尝试什么，依赖项都是从[http://repo.typesafe.com/typesafe/releases](http://repo.typesafe.com/typesafe/releases)下载的。我尝试了许多解决方案，尤其是[这里](https://stackoverflow.com/questions/9115405/sbt-0-11-using-a-corporate-maven-repository)、[这里](https://stackoverflow.com/questions/3770125/how-do-i-get-sbt-to-use-a-local-maven-proxy-repository-nexus)和[这里](https://github.com/harrah/xsbt/wiki/Library-Management)解释的那些。

我什至尝试更改 sbt-launch.jar 中的 sbt.boot.properties 但没有运气。类型安全堆栈中是否有一些特殊的东西可以防止在这方面改变 sbt 行为？

顺便说一句，我想对所有内容使用 nexus + local，而不仅仅是项目依赖项：依赖项、插件，以及 sbt 需要下载的所有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-07T13:59:56.277

只是想说，在 sbt 0.12 中，我们专门尝试解决这个需求/问题。我们现在完全支持启动器 -> 项目中的代理存储库。

基本上，在 sbt 0.12.3 (Play 2.1) 中只需创建一个文件：`~/.sbt/repositories`

```
[repositories]
  local
  my-ivy-proxy-releases: http://repo.company.com/ivy-releases/, [organization]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext]
  my-maven-proxy-releases: http://repo.company.com/maven-releases/ 
```

然后在启动 sbt 时，我们`-Dsbt.override.build.repos=true`

您还可以使用指定不同的代理文件`-Dsbt.repository.config=<path-to-your-repo-file>`

希望这可以帮助！- 乔什

请参阅：[http](http://www.scala-sbt.org/release/docs/Detailed-Topics/Proxy-Repositories.html) ://www.scala-sbt.org/release/docs/Detailed-Topics/Proxy-Repositories.html了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:10:36.677

检查您是否已清除以下文件夹 ~/.sbt 的内容，因为它可能包含对类型安全解析器的引用。

在您的 Build.scala 或任何 .sbt 文件（插件或构建）中，确保您的所有解析器现在都指向您的 nexus 存储库。

确保您的 sbt 启动脚本如下所示：

java -Dsbt.boot.properties=sbt.boot.properties -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=256m -Xmx512M -Xss2M -jar `dirname $0`/sbt-launch.jar "$@"

让我知道这是否行不通。

克里希宁

# xslt - 用于验证任何 xml 文档节点的任何测试是否失败的样式表

> ID：10031385
> 
> 赞同：0
> 
> 时间：2012-04-05T15:20:21.163
> 
> 标签：xslt

请帮助解决以下问题：

我有一个非常异构且大的输入文件。

我需要在各个节点上运行单独的测试，最后输出一个布尔值：是否有任何测试失败？还是他们都通过了？

有什么好的方法吗？

我已经详细说明了一个例子。

输入文件的简化示例：

```
<?xml version="1.0" encoding="utf-8"?>
    <Application>
      <PersonApplicants>
               <Person ApplicantType="Borrower" ApplicationType="Sole" >
                    <PersonName FirstName="Jane" Surname="Smith" />
                    <PersonalDetails CreditHistory="CleanCredit" YearsInCurrentProfession="12">
                        <Residency ResidencyStatus="Citizen" ResidencyCountry="Australia"/>
                    </PersonalDetails>
                </Person>
                <Person ApplicantType="Guarantor" ApplicationType="Sole" >
                    <PersonName FirstName="John" Surname="Smith" />
                </Person>
        </PersonApplicants>
      <CompanyApplicants>
        <Company ApplicantType="Guarantor" ApplicationType="Joint">
          <CompanyName CompanyName="C1" TradingName="C1" />
          <BusinessDetails YearsInBusiness="19" CreditHistory="CleanCredit" />
        </Company>
      </CompanyApplicants>
    </Application> 
```

在每个节点上运行一系列单独的测试，并在最后输出是否至少有一个测试失败或全部通过。

输出示例 xml：

```
<TestResult>Failed</TestResult> 
```

如果任何测试失败或

```
<TestResult>Passed</TestResult> 
```

如果所有测试都通过了。

这是我尝试做的一个示例：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" encoding="utf-8" indent="yes"/>
    <xsl:strip-space elements="*" />
    <xsl:template match="/">
        <TestResult>
            <xsl:variable name="fail_test">
                <xsl:apply-templates select="Application" />
            </xsl:variable>
                <xsl:choose>
                    <!-- If any rule triggers/fails, output the following value "True".-->
                    <xsl:when test="$fail_test">True</xsl:when>
                    <!-- Otherwise putput the following value "False"-->
                    <xsl:otherwise>False</xsl:otherwise>
                </xsl:choose>
        </TestResult>
    </xsl:template>
    <xsl:template match="Application">
        <xsl:apply-templates select="PersonApplicants"/>
        <xsl:apply-templates select="CompanyApplicants"/>
    </xsl:template>
    <xsl:template match="PersonApplicants">
    <!-- Test Rule 1 Have at least one Borrower, Person or Company.  -->
    <xsl:variable name="var1">
        <xsl:choose>
            <xsl:when test="//Person/@ApplicantType='Borrower' or //Company/@ApplicantType='Borrower'"><xsl:copy-of select="true()" /></xsl:when>
            <xsl:otherwise><xsl:copy-of select="false()" /></xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <!-- Test Rule 2 Only one applicant allowed for a Sole application, Person or Company. -->
    <xsl:variable name="var2">
        <xsl:choose>
            <xsl:when test="Person/@ApplicationType='Sole'">
                <xsl:choose>
                    <xsl:when test="count(//Person) + count(//Company) = 1"><xsl:copy-of select="true()" /></xsl:when>
                    <xsl:otherwise><xsl:copy-of select="false()" /></xsl:otherwise>
                </xsl:choose>
            </xsl:when>
            <xsl:otherwise><xsl:copy-of select="true()" /></xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
<!-- need a way to handle the results on all Person nodes -->
<!-- this is only in here as a placeholder for the correct code -->
        <!-- Test child nodes of Person Applicants, i.e Person nodes. -->
        <xsl:for-each select="Person">
            <xsl:apply-templates select="."/>
        </xsl:for-each>
<!--******************************************************************-->
            <!--the returned value of the template-->
        <xsl:copy-of select="not($var1 and $var2)" />
<!--******************************************************************-->
   </xsl:template>

<xsl:template match="Person">
<!-- @ApplicantType LIXI 2.0 node Validation: is required -->
<xsl:variable name="var1">
    <xsl:choose>
        <xsl:when test="not (@ApplicantType) or string(@ApplicantType) =''"><xsl:copy-of select="true()" /></xsl:when>
        <xsl:otherwise><xsl:copy-of select="false()" /></xsl:otherwise>
    </xsl:choose>
</xsl:variable>

<!-- @PrimaryApplicant LIXI 2.0 node Validation: PrimaryApplicant is required when Applicant Type is Borrower -->
<xsl:variable name="var2">
    <xsl:choose>
        <xsl:when test="not (@PrimaryApplicant) or string(@PrimaryApplicant) =''">
            <xsl:choose>
                <xsl:when test="@ApplicantType='Borrower'"><xsl:copy-of select="true()" /></xsl:when>
                <xsl:otherwise><xsl:copy-of select="false()" /></xsl:otherwise>
            </xsl:choose>
        </xsl:when>
        <xsl:otherwise><xsl:copy-of select="true()" /></xsl:otherwise>
    </xsl:choose>

        <!--the returned value of the template-->
    <xsl:copy-of select="not($var1 and $var2)" />
<!--******************************************************************-->
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T18:07:33.893

最简单的，从你所在的地方

```
<xsl:template match="/">
    <TestResult>
        <xsl:variable name="fail_test">
            <xsl:apply-templates select="Application" />
        </xsl:variable>
        <xsl:choose>
        <xsl:when test="contains($fail_test,'false')" >Failed</xsl:when>
    <xsl:otherwise>Passed</xsl:otherwise>
    </xsl:choose>
    </TestResult>
</xsl:template> 
```

请注意，您的测试样式表的结尾格式不正确，`/xsl:if`应该是`/xsl:choose`

# c# - 我的 WP7 对象在哪里？

> ID：10031388
> 
> 赞同：1
> 
> 时间：2012-04-05T15:20:32.337
> 
> 标签：c#, windows-phone-7, layout, reference

试图重写机器生成了我的第一个 WP7 HelloWorld 到更复杂的东西。

只是无法理解如何获取对对象的引用？例如在我的布局中有几个对象：

```
 <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}" Loaded="onLoaded"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0"></Grid>
</Grid> 
```

只是我想以编程方式引用`TextBlock`'s. 当然，它应该是非常简单明了的东西，但我找不到办法。

请给我一些提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:23:56.097

只需使用名称：`ApplicationTitle`，`PageTitle`...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T22:52:12.787

大麦，

如果要在代码中引用控件，则必须确保您的 xaml 控件具有其名称参数集，例如

```
<TextBlock Text="Hello World"/> 
```

您将无法从后面的代码中轻松访问该文本块，因此您应该给它一个名称

```
<TextBlock Text="Hello World" x:Name="helloWorldText"/> 
```

因此，在您后面的代码中，您可以使用

```
helloWorldText.text = "something"; 
```

# javascript - 锚包装器上的 jQuery .one("click") 导致未遵循 href

> ID：10031389
> 
> 赞同：2
> 
> 时间：2012-04-05T15:20:39.747
> 
> 标签：javascript, html, javascript-events, jquery

这是一个看似棘手的 HTML/JS 小点，它让我或 jQuery 被抛出一个循环（我的钱在我身上）。

**它在[这个 fiddle](http://jsfiddle.net/peteorpeter/yneNB/1/)中进行了演示。**

* * *

...但这是场景。一个锚被一个跨度包裹：

```
<span> the span
    <a onclick="alert('onclick HTML attritbute fired!')" href="http://www.href-attribute-    fired.com">the link</a>
    wraps the link
</span> 
```

跨度有一个单击处理程序来单击锚点。这需要`.one()`避免由于事件冒泡而永远循环（我也尝试过`.on()`以`.off()`相同的结果短路循环 - 参见小提琴）。

```
$('a').click(function() {
    alert("jQuery click fired!");
});

$('span').one("click", function() {
    alert('(span clicked, let us see what other events fire...)');
    $(this).find('a').click();
}); 
```

* * *

当您单击链接本身时，您会注意到：

1.  onclick HTML 属性被触发！
2.  jQuery点击被解雇了！
3.  （点击了跨度，让我们看看还有哪些其他事件会触发......）
4.  onclick HTML 属性被触发！
5.  jQuery点击被解雇了！
6.  **遵循href**

由于事件冒泡到跨度，它在 JS 事件中循环了一个额外的时间，这有点愚蠢和不优雅，但完全符合预期，对我来说很有意义。这里的关键部分是，在所有的 JS 事件都通过之后，*在后面跟着 href*。

当您单击外部跨度时，这是事件的顺序：

1.  （点击了跨度，让我们看看还有哪些其他事件会触发......）
2.  jQuery点击被解雇了！
3.  onclick HTML 属性被触发！
4.  **... {蟋蟀！？！} ....**

即使锚点的 JS`click`事件已经触发，**href 也不会被跟随**。

* * *

我猜这*直到第二次从 冒泡之后才*`.one()`解除点击事件的绑定，并且在那一点上，事件传播完全消失了。由于在所有点击事件完成之前不会遵循 href，因此当信号在不知道触发 go-to-href 事件时死亡。`span` *`anchor`*`span``anchor`

......但这真的会发生吗？是什么赋予了？

`window.location`有什么更好的方法来解决这个问题（出于各种原因，我想避免 JS 取消 href 并手动设置）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:25:10.880

在第一个实例中（当您直接单击它时）会遵循该链接，因为这是`<a>`标签的工作方式，并且您的任何处理程序都不会要求取消默认行为。

通过 jQuery 在标签上显式触发“点击”`<a>`不会跟随链接；这就是 jQuery 的工作原理。

# c - 条件运算符的有效使用？

> ID：10031392
> 
> 赞同：5
> 
> 时间：2012-04-05T15:20:47.593
> 
> 标签：c, conditional-operator

考虑以下代码：

```
int i, k, m;
k = 12;
m = 34;
for (i = 0; i < 2; i++) ((i & 1) ? k : m) = 99 - i;
printf("k: %ld   m: %ld\n\n", k, m); 
```

在这个愚蠢的例子中，条件运算符表达式是：

```
if (i & 1) k = 99 - i; else m = 99 - i; 
```

我的编译器没有抱怨，执行这段代码给出了预期的输出

```
k: 98   m: 99 
```

不过，我的问题是，这是否是符合 C 标准的有效代码？我以前从未见过类似的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T15:27:34.787

C11 标准中的脚注 110：

> 条件表达式不会产生左值。

和 6.5.16 第 2 段：

> 赋值运算符应具有可修改的左值作为其左操作数。

所以不，该代码不符合 C 标准。

在 C++11 中，它*是*有效的：

> 如果第二个和第三个操作数是左值并且具有相同的类型，则结果是该类型并且是左值。

因此，这是 C 和 C++ 显着不同的另一个尘土飞扬的角落。如果您的编译器没有产生错误，那么我猜您正在使用具有“C 模式”的 C++ 编译器，而不是正确的 C 编译器；微软？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T16:23:17.850

This is not legal C, and a compiler that accepts it is wrong. However, you can do the same thing with:

```
*((i & 1) ? &k : &m) = 99 - i; 
```

and it becomes legal C.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:25:11.257

在 C++ 中使用条件作为 lval 是有效的，但在 C 中则不行。

在 C++ 中 (ISO?IEC 14882:1998(E) 5.16.4)

> 如果第二个和第三个操作数是左值并且具有相同的类型，则结果是该类型并且是左值。

如果你想在 C 中使用类似的技巧，你应该使用指针：

ISO/IEC 9899:TC2, 6.5.14.6

> 如果第二个和第三个操作数都是指针，或者一个是空指针常量而另一个是指针，则结果类型是指向一个类型的指针，该类型由两个操作数指向的类型的所有类型限定符限定。

```
*((i & 1) ? &k : &m) = 99 - i; 
```

# ruby-on-rails - Rails 优化复杂查询

> ID：10031393
> 
> 赞同：1
> 
> 时间：2012-04-05T15:20:49.180
> 
> 标签：ruby-on-rails, performance, postgresql

这是背景，我有一个 API 方法，它将一个标准化的名称列表发送到我的服务器，然后将名称与给定的 Persons 对象匹配。每个人都有许多我想返回的与他们相关的 Post 对象。我的数据库查询如下所示：

```
 @articles = Article.joins(:artists).select("artists.*").where({:artists=>{:name=>keys}}).group("#{Article.col_list}").order("articles.publish_date DESC").limit(25) 
```

当名称列表很大（超过 100 个）时，此查询在我的生产服务器上可能需要长达 2 秒的时间。如何快速优化此查询？

这是查询的解释。

```
 Limit  (cost=9144.19..9144.20 rows=25 width=802) (actual time=4341.409..4341.431 rows=25 loops=1)
   ->  Sort  (cost=9144.19..9150.74 rows=13096 width=802) (actual time=4341.408..4341.416 rows=25 loops=1)
         Sort Key: articles.publish_date
         Sort Method:  top-N heapsort  Memory: 47kB
         ->  HashAggregate  (cost=9030.99..9070.28 rows=13096 width=802) (actual time=4255.854..4315.125 rows=3916 loops=1)
               ->  Nested Loop  (cost=1581.27..8978.60 rows=13096 width=802) (actual time=7.443..3337.624 rows=39920 loops=1)
                     ->  Hash Join  (cost=1581.27..7650.04 rows=13096 width=4) (actual time=7.426..2627.426 rows=39920 loops=1)
                           Hash Cond: (articles_artists.artist_id = artists.id)
                           ->  Seq Scan on articles_artists  (cost=0.00..5476.38 rows=737461 width=8) (actual time=0.019..1310.806 rows=737515 loops=1)
                           ->  Hash  (cost=1579.83..1579.83 rows=413 width=4) (actual time=7.383..7.383 rows=300 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 8kB
                                 ->  Bitmap Heap Scan on artists  (cost=477.60..1579.83 rows=413 width=4) (actual time=4.959..7.152 rows=300 loops=1)
                                       Recheck Cond: ((name)::text = ANY ('{"A BOY NAMED EARTH","A ROCKET TO MOON","A SKYLIT DRIVE","A VISIBLE BOY","AARON GILLESPIE",AB,"ABBIE BARRETT",ABERFELDY,"ABRA NIIRE","ABSOLUTE ZERO",ACDC,"ADAM GREEN",ADELE,ADO,"ADRINA THORPE",ADVENTURE,AEROSMITH,"AESOP ROCK",AFI,AIR,"AIR TRAFFIC",AKON,"AL GREEN","ALANIS MORISSETTE",ALCENDOR,"ALEX CHILTON","ALEXI MURDOCH","ALIAS EHREN","ALICE RUSSELL","ALICIA KEYS","AMANDA PALMER","AMERICAN FOOTBALL","AMY MACDONALD","AMY WINEHOUSE","ANALOG REBELLION",ANBERLIN,"ANDREW BIRD","ANDREW HILL","ANGELS AIRWAVES",AQUEDUCT,"ARCADE FIRE","ARETHA FRANKLIN","ART BRUT","ART GARFUNKEL","ARTIC MONKEYS","ARTIC MONKEYS","AS TALL AS LIONS",ASHANTI,"ATLAS SOUND","ATTACK ATTACK!",AUTOLUX,"AVENUE D","AVRIL LAVIGNE","B JU",BACK2SQUARE1,"BAD ENGLISH",BALMORHEA,"BAND OF HORSES",BARCELONA,"BAXTER DURY","BEASTIE BOYS",BEATLES,BECK,"BELLE AND SEBASTIAN","BEN FOLDS FIVE","BEN MARTIN","BETTE MIDLER","BETTIE SERVEERT",BEYONCE,"BIFFY CLYRO","BILLY BRAGG","BILLY BRAGG AND BLOKES","BILLY JOEL","BILLY OCEAN",BIRDY,"BLACK EYED PEAS","BLACK KIDS",BLACKSTONE,"BLIND PILOT","BLINK 182","BLOC PARTY","BLOODHOUND GANG",BLUEBOY,BLUR,"BOB DYLAN","BOB MARLEY","BOB MARLEY WAILERS","BOMBAY BICYCLE CLUB","BON IVER","BONNIE TYLER",BONOBO,"BOX CAR RACER","BOYS LIKE GIRLS","BOYZ II MEN",BREAKBOT,"BRENDAN BENSON","BRETT ANDERSON",BRICOLAGE,"BRITNEY SPEARS",BRONCO,"BRUCE SPRINGSTEEN","BRUNO MARS",BUSH,"BUSTA RHYMES",BUSTED,CAESARS,"CAGE ELEPHANT",CAKE,CALLA,"CALVIN HARRIS",CAMRON,CAMRON,CAMP,CAMPING,"CANDIE PAYNE",CASHEW,"CASSANDRA WILSOM",CASSIDY,"CATE LE BON","CHARLIE FEATHERS","CHERRY GHOST",CHIC,CHICAGO,CHINGY,"CHRIS BROWN","CHRISTINA AGUILERA","CHRISTINA STURMER",CHUMBAWAMBA,CIRCLE,"CLARENCE CARTER",CLIPSE,"COBRA STARSHIP",COLDPLAY,COMMON,CONSPIRATORS,COOLIO,COPELAND,"COPY HAHO",CORNELIUS,CREED,CULTS,"CYNDI LAUPER","CYPRESS HILL","CAT EMPIRE",CURE,"DA LATA","DAFT PUNK",DALMINJO,DAMERO,"DARREN HANLON","DASHBOARD CONFESSIONAL",DATAROCK,"DAVID BOWIE","DAVID E SUGAR","DAVID GUETTA","DAVID KITT","DEATH CAB FOR CUTIE","DIANA KRALL",DIGITALISM,"DINOSAUR JR","DISCO INFERNO",DISCOVERY,"DIZZEE RASCAL",DMX,"DON BLACKMAN","DR DOG",DRAKE,DRUGSTORE,DIPLOMATS,DREAM,EAGLES,EDITORS,ELBOW,ELECTRELANE,"ELIZA DOOLITTLE","ELLE MILANO","ELLIE GOULDING","ELTON JOHN","ELVIS COSTELLO WITH BURT BACHARACH","ELVIS PRESLEY",EMBRACE,EMINEM,"EMMY GREAT","EMPIRE! EMPIRE!","ERIC CHURCH","ERIC CLAPTON","ERIN MCCARLEY",ERRORS,"EUGENE KELLY","EXPLOSIONS IN SKY",FABOLOUS,FAILURE,"FAITH EVANS","FAR EAST MOVEMENT",FAUNTS,FEIST,FELT,FIELDS,"FLEET FOXES","FLIGHT OF CONCHORDS","FLORENCE MACHINE",FOALS,"FOO FIGHTERS","FOSTER PEOPLE","FOUR TET","FRANK TURNER","FRANZ FEDINAND",FREE,"FLAMING LIPS",GORILLAZ,"GRATEFUL DEAD",IDLEWILD,"IMANI COPPOLA","IMOGEN HEAP",INCUBUS,INCUBUS,"IRON WINE","J DILLA","J COLE",JACK,"JACK JOHNSON",JACOBITES,"JAMES BLAKE","JAMES BLUNT","JAMES BONG","JAMES BROWN","JAMIE T","JAN DELAY","JANE CULLUM","JASON DERULO","JASON MORAN","JAY Z","JAY Z","JEFF WAYNE","JENNIFER LOPEZ","JENNY LEWIS",JEREMIH,"JIM JONES","JIMMY EAT WORLD","JOHN COLTRANE","JOHN LEGEND","JOHN MAYER","JOY DIVISION","JUELZ SANTANA","JUNIOR BOYS","JUSTIN TIMBERLAKE","KAISER CHEIFS",KANTE,"KANYE WEST",KARMA,"KATE NASH","KATE NASH","KATY PERRY",KESHA,KEANE,KEANE,"KELLY ROWLAND","KENNY G","KERI HILSON","KEVIN AYERS","KID CUDI","KID HARPOON","KID LOCO","KID ROCK","KINGS OF LEON",KILLERS,KOOKS,"LADY GAGA","LADY SOVEREIGN","LED ZEPPELIN","LEE DORSEY",LEMAR,LEMONGRASS,"LEROY HUTSON","LIL WAYNE","LILY ALLEN","LITTLE COMETS","LITTLE JOY","LL COOL J",LLOYD,"LLOYD BANKS","LONDON LOUNGE",LOST,LOVE,LUDACRIS,LUDIQUE,"LUPE FIASCO","LUTHER VANDROS","MACHINE HEAD","MACY GRAY",MADONNA,MAINO,"MANU CHAO","MAREN MONTAUK","MARIAH CAREY","MARK FRY","MARK MORRISON","MARK RONSON","MAROON 5","MARY J BLIGE","MASSIVE ATTACK","MAT KEARNEY","MATTHEW DEAR","MEAT LOAF",METALLICA,MGMT,"MICHAEL GIACCHINO","MICHAEL JACKSON","MILES DAVIS","MISSY ELLIOTT","MOBB DEEP","MODEST MOUSE","MODEST MOUSE",MONK,MOON,MORRISSEY,MOTZ,"MOVING HEARTS",MUSE,MUTEMATH,"MY WRITES","MORNING OF",NAS,"NE YO","NICKI MINAJ","NINE INCH NAILS","P DIDDY","PATRICK WATSON","PAUL MCCARTNEY","PEARL JAM","PEPE ALGILAR","PEPE WHITE","PETER GABRIEL",PHARRELL,"PHIL COLLINS",PHISH,PITBULL,PIXIES,POLICE,PRINCE,"R KELLY",RADIOHEAD,RAKIM,RANK,"RASCAL FLATTS","RAY CHARLES","RED HOT CHILI PEPPERS",REDNEX,REENO,"RELIENT K","RICK ROSS","RICKY NELSON",RIFT,RIHANNA,"ROBBIE WILLIAMS","ROD STEWART","RODNEY HUNTER",ROKOKO,"ROLLING STONES","ROSCOE DASH","ROY DAVIS JR","RYAN LESLIE","RYAN LESLIE",RZA,"SARAH MCLACHLAN","SARAH RUSSELL",SEAL,"SHANIA TWAIN",SHERWOOD,"SMASH MOUTH",SMITHS,"SNOOP DOGG","SOMETHING CORPORATE",SPOON,SPOON,"ST LUNATICS",STARS,"STAT QUO","STEELY DAN","STEVIE WONDER","STYLES P","SUNSET RUBDOWN",SUPERCHUNK,"SWIZZ BEATZ","SECRET HANDSHAKE",SMITHS,"T PAIN",TI,"TALIB KWELI","TAYLOR SWIFT","THROWING MUSES",TLC,"TOM JONES","TOM PETTY","TONY YAYO",TOOL,"TORI AMOS",TORTOISE,TRAIN,"TREY SONGZ","TRIBE CALLED QUEST",TUBBS,TYCHO,"WHITE STRIPES","WAKA FLOCKA FLAME",WALE,WILCO,"WILL SMITH",U2,USHER,"YEAH YEAH YEAHS","YEAR OF RABBIT","YOUNG BUCK","YOUNG JEEZY","ZAC BROWN BAND",2PAC,"50 CENT"}'::text[]))
                                       ->  Bitmap Index Scan on index_artists_on_name  (cost=0.00..477.58 rows=413 width=0) (actual time=4.897..4.897 rows=311 loops=1)
                                             Index Cond: ((name)::text = ANY ('{"A BOY NAMED EARTH","A ROCKET TO MOON","A SKYLIT DRIVE","A VISIBLE BOY","AARON GILLESPIE",AB,"ABBIE BARRETT",ABERFELDY,"ABRA NIIRE","ABSOLUTE ZERO",ACDC,"ADAM GREEN",ADELE,ADO,"ADRINA THORPE",ADVENTURE,AEROSMITH,"AESOP ROCK",AFI,AIR,"AIR TRAFFIC",AKON,"AL GREEN","ALANIS MORISSETTE",ALCENDOR,"ALEX CHILTON","ALEXI MURDOCH","ALIAS EHREN","ALICE RUSSELL","ALICIA KEYS","AMANDA PALMER","AMERICAN FOOTBALL","AMY MACDONALD","AMY WINEHOUSE","ANALOG REBELLION",ANBERLIN,"ANDREW BIRD","ANDREW HILL","ANGELS AIRWAVES",AQUEDUCT,"ARCADE FIRE","ARETHA FRANKLIN","ART BRUT","ART GARFUNKEL","ARTIC MONKEYS","ARTIC MONKEYS","AS TALL AS LIONS",ASHANTI,"ATLAS SOUND","ATTACK ATTACK!",AUTOLUX,"AVENUE D","AVRIL LAVIGNE","B JU",BACK2SQUARE1,"BAD ENGLISH",BALMORHEA,"BAND OF HORSES",BARCELONA,"BAXTER DURY","BEASTIE BOYS",BEATLES,BECK,"BELLE AND SEBASTIAN","BEN FOLDS FIVE","BEN MARTIN","BETTE MIDLER","BETTIE SERVEERT",BEYONCE,"BIFFY CLYRO","BILLY BRAGG","BILLY BRAGG AND BLOKES","BILLY JOEL","BILLY OCEAN",BIRDY,"BLACK EYED PEAS","BLACK KIDS",BLACKSTONE,"BLIND PILOT","BLINK 182","BLOC PARTY","BLOODHOUND GANG",BLUEBOY,BLUR,"BOB DYLAN","BOB MARLEY","BOB MARLEY WAILERS","BOMBAY BICYCLE CLUB","BON IVER","BONNIE TYLER",BONOBO,"BOX CAR RACER","BOYS LIKE GIRLS","BOYZ II MEN",BREAKBOT,"BRENDAN BENSON","BRETT ANDERSON",BRICOLAGE,"BRITNEY SPEARS",BRONCO,"BRUCE SPRINGSTEEN","BRUNO MARS",BUSH,"BUSTA RHYMES",BUSTED,CAESARS,"CAGE ELEPHANT",CAKE,CALLA,"CALVIN HARRIS",CAMRON,CAMRON,CAMP,CAMPING,"CANDIE PAYNE",CASHEW,"CASSANDRA WILSOM",CASSIDY,"CATE LE BON","CHARLIE FEATHERS","CHERRY GHOST",CHIC,CHICAGO,CHINGY,"CHRIS BROWN","CHRISTINA AGUILERA","CHRISTINA STURMER",CHUMBAWAMBA,CIRCLE,"CLARENCE CARTER",CLIPSE,"COBRA STARSHIP",COLDPLAY,COMMON,CONSPIRATORS,COOLIO,COPELAND,"COPY HAHO",CORNELIUS,CREED,CULTS,"CYNDI LAUPER","CYPRESS HILL","CAT EMPIRE",CURE,"DA LATA","DAFT PUNK",DALMINJO,DAMERO,"DARREN HANLON","DASHBOARD CONFESSIONAL",DATAROCK,"DAVID BOWIE","DAVID E SUGAR","DAVID GUETTA","DAVID KITT","DEATH CAB FOR CUTIE","DIANA KRALL",DIGITALISM,"DINOSAUR JR","DISCO INFERNO",DISCOVERY,"DIZZEE RASCAL",DMX,"DON BLACKMAN","DR DOG",DRAKE,DRUGSTORE,DIPLOMATS,DREAM,EAGLES,EDITORS,ELBOW,ELECTRELANE,"ELIZA DOOLITTLE","ELLE MILANO","ELLIE GOULDING","ELTON JOHN","ELVIS COSTELLO WITH BURT BACHARACH","ELVIS PRESLEY",EMBRACE,EMINEM,"EMMY GREAT","EMPIRE! EMPIRE!","ERIC CHURCH","ERIC CLAPTON","ERIN MCCARLEY",ERRORS,"EUGENE KELLY","EXPLOSIONS IN SKY",FABOLOUS,FAILURE,"FAITH EVANS","FAR EAST MOVEMENT",FAUNTS,FEIST,FELT,FIELDS,"FLEET FOXES","FLIGHT OF CONCHORDS","FLORENCE MACHINE",FOALS,"FOO FIGHTERS","FOSTER PEOPLE","FOUR TET","FRANK TURNER","FRANZ FEDINAND",FREE,"FLAMING LIPS",GORILLAZ,"GRATEFUL DEAD",IDLEWILD,"IMANI COPPOLA","IMOGEN HEAP",INCUBUS,INCUBUS,"IRON WINE","J DILLA","J COLE",JACK,"JACK JOHNSON",JACOBITES,"JAMES BLAKE","JAMES BLUNT","JAMES BONG","JAMES BROWN","JAMIE T","JAN DELAY","JANE CULLUM","JASON DERULO","JASON MORAN","JAY Z","JAY Z","JEFF WAYNE","JENNIFER LOPEZ","JENNY LEWIS",JEREMIH,"JIM JONES","JIMMY EAT WORLD","JOHN COLTRANE","JOHN LEGEND","JOHN MAYER","JOY DIVISION","JUELZ SANTANA","JUNIOR BOYS","JUSTIN TIMBERLAKE","KAISER CHEIFS",KANTE,"KANYE WEST",KARMA,"KATE NASH","KATE NASH","KATY PERRY",KESHA,KEANE,KEANE,"KELLY ROWLAND","KENNY G","KERI HILSON","KEVIN AYERS","KID CUDI","KID HARPOON","KID LOCO","KID ROCK","KINGS OF LEON",KILLERS,KOOKS,"LADY GAGA","LADY SOVEREIGN","LED ZEPPELIN","LEE DORSEY",LEMAR,LEMONGRASS,"LEROY HUTSON","LIL WAYNE","LILY ALLEN","LITTLE COMETS","LITTLE JOY","LL COOL J",LLOYD,"LLOYD BANKS","LONDON LOUNGE",LOST,LOVE,LUDACRIS,LUDIQUE,"LUPE FIASCO","LUTHER VANDROS","MACHINE HEAD","MACY GRAY",MADONNA,MAINO,"MANU CHAO","MAREN MONTAUK","MARIAH CAREY","MARK FRY","MARK MORRISON","MARK RONSON","MAROON 5","MARY J BLIGE","MASSIVE ATTACK","MAT KEARNEY","MATTHEW DEAR","MEAT LOAF",METALLICA,MGMT,"MICHAEL GIACCHINO","MICHAEL JACKSON","MILES DAVIS","MISSY ELLIOTT","MOBB DEEP","MODEST MOUSE","MODEST MOUSE",MONK,MOON,MORRISSEY,MOTZ,"MOVING HEARTS",MUSE,MUTEMATH,"MY WRITES","MORNING OF",NAS,"NE YO","NICKI MINAJ","NINE INCH NAILS","P DIDDY","PATRICK WATSON","PAUL MCCARTNEY","PEARL JAM","PEPE ALGILAR","PEPE WHITE","PETER GABRIEL",PHARRELL,"PHIL COLLINS",PHISH,PITBULL,PIXIES,POLICE,PRINCE,"R KELLY",RADIOHEAD,RAKIM,RANK,"RASCAL FLATTS","RAY CHARLES","RED HOT CHILI PEPPERS",REDNEX,REENO,"RELIENT K","RICK ROSS","RICKY NELSON",RIFT,RIHANNA,"ROBBIE WILLIAMS","ROD STEWART","RODNEY HUNTER",ROKOKO,"ROLLING STONES","ROSCOE DASH","ROY DAVIS JR","RYAN LESLIE","RYAN LESLIE",RZA,"SARAH MCLACHLAN","SARAH RUSSELL",SEAL,"SHANIA TWAIN",SHERWOOD,"SMASH MOUTH",SMITHS,"SNOOP DOGG","SOMETHING CORPORATE",SPOON,SPOON,"ST LUNATICS",STARS,"STAT QUO","STEELY DAN","STEVIE WONDER","STYLES P","SUNSET RUBDOWN",SUPERCHUNK,"SWIZZ BEATZ","SECRET HANDSHAKE",SMITHS,"T PAIN",TI,"TALIB KWELI","TAYLOR SWIFT","THROWING MUSES",TLC,"TOM JONES","TOM PETTY","TONY YAYO",TOOL,"TORI AMOS",TORTOISE,TRAIN,"TREY SONGZ","TRIBE CALLED QUEST",TUBBS,TYCHO,"WHITE STRIPES","WAKA FLOCKA FLAME",WALE,WILCO,"WILL SMITH",U2,USHER,"YEAH YEAH YEAHS","YEAR OF RABBIT","YOUNG BUCK","YOUNG JEEZY","ZAC BROWN BAND",2PAC,"50 CENT"}'::text[]))
                     ->  Index Scan using articles_pkey on articles  (cost=0.00..0.10 rows=1 width=802) (actual time=0.006..0.006 rows=1 loops=39920)
                           Index Cond: (articles.id = articles_artists.article_id)
 Total runtime: 4343.603 ms
(18 rows) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:30:20.150

这个脱颖而出：

-> 对articles_artists 的Seq Scan（成本=0.00..5476.38 行=737461 宽度=8）（实际时间=0.019..1310.806 行=737515 循环=1）

如果您`EXPLAIN`在查询上运行并在任何地方看到“Seq Scan”一词，这表明您需要检查您是否拥有所有正确的索引。检查`articles_artists`并确保您在 和 上都有索引`article_id`，`artist_id`假设您是这样命名它们的。

另外，`VACUUM ANALYZE`在您的数据库上运行 a 并查看是否可以加快速度。Postgresql 的查询优化器依赖于 生成的统计信息`VACUUM ANALYZE`，因此如果表在没有运行的情况下发生了显着变化，查询性能可能会受到影响。

最后，考虑分解该查询并让 ruby​​ 收集数据。有时你最好不要试图让数据库足够聪明以正确执行复杂的查询，而是在客户端手动优化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:33:20.247

我看到两个问题。首先是上面Michele提到的seq scan。第二个是嵌套循环连接，可能是由于此时发生的记录太多。

我会看看您可以根据搜索条件进一步推动查询，以便选择尽可能少的项目。

我的猜测是索引不会有很大的不同，但额外的搜索条件会，特别是如果那些可以命中索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T19:44:35.930

无论如何，您似乎都将获取最新的 25 篇文章。所以我会使用一个子查询来选择这 25 篇最近的文章并将结果与​​艺术家表连接起来。

为什么这会更好？因为您的查询构建了一个临时结果，该结果将每位艺术家与他们的所有文章连接起来，然后再对结果进行排序并获取最近的 25 个。

不……我错了。我按名称看到艺术家的 where 条件，这意味着我的解决方案不起作用。

所以我回来看看能不能帮上忙。如果您查看您发布的解释数据中的成本，艺术家名称“过滤器”是您花费最多的。另请注意，艺术家姓名都出现在此处，TWICE 暗示您在嵌套循环内不止一次为此操作付费。

因此，如果可以，请构建一个临时表，该表是通过过滤器的艺术家表。然后使用该表以我之前描述的方式执行文章查找，您的查询会更快。

# c++ - 模板参数的隐式转换规则

> ID：10031397
> 
> 赞同：12
> 
> 时间：2012-04-05T15:21:03.377
> 
> 标签：c++, templates, overloading

如果您重载一个函数，然后使用与其中一个重载完全匹配的参数调用它

```
int f(int){return 3;}
int f(bool){return 4;}
...        //inside main()
f(1);      //Calls f(int) 
```

编译器在尝试任何隐式转换之前简单地选择这个（完美）匹配。但是我一直在尝试重载函数 tempĺate ，如

```
template <bool veracity>
int f(){return 1;}

template <int amount>
int f(){return 2;}

...        //inside main()
f<1>(); 
```

但编译器一直抱怨对重载的 f() 的调用不明确，说它可能是`f<true>()`or 或`f<1>()`. 编译器不应该只选择完美匹配，而不是尝试将*1*转换为*true*吗？

我的印象是模板参数的隐式转换实际上比函数参数的隐式转换更具限制性。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T15:44:32.743

你提供的参数不是类型，它是一个值，所以规则有点不同——你需要对非类型参数应用规则。对于非类型参数，允许隐式转换。§14.3.2/5：

> 对用作非类型模板参数的每个表达式执行以下转换。如果非类型模板参数不能转换为相应模板参数的类型，则该程序格式错误。
> 
> — 对于整数或枚举类型的非类型模板参数，应用转换后的常量表达式 (5.19) 中允许的转换。

在 C++03 中，措辞略有不同，但效果基本相同（也 §14.3.2/5）：

> — 对于整型或枚举类型的非类型模板参数，应用整型提升（4.5）和整型转换（4.7）。

无论哪种方式，由于`1`既是 an`int`又可以隐式转换为 a `bool`，所以您的调用是模棱两可的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T15:52:21.283

由于这不是编译器错误，而是语言功能（请参阅[此答案](https://stackoverflow.com/a/10031741/1176973)），因此您必须找到解决方法。

要么你必须重命名你的函数，要么你可以使用这个 hack：

```
template <typename T> struct F;

template<> struct F<bool> {
  template <bool veracity>
  static int f(){return 1;}
};

template<> struct F<int> {
  template <int amount>
  static int f(){return 2;}
};

template <typename T, T value>
int f() { return F<T>::template f<value>(); }

// inside main():
std::cout << f<int,  2>() << '\n'; // prints 2
std::cout << f<bool, 2>() << '\n'; // prints 1 
```

# javascript - 有没有办法使用 firebug 查看 [object][object] 中包含的信息？

> ID：10031398
> 
> 赞同：1
> 
> 时间：2012-04-05T15:21:04.460
> 
> 标签：javascript, jquery, object, firebug

我正在使用 console.log(variable) 和 firebug 来检查 javascript 代码。有时，我会得到 [object][object] 作为值。有没有比 [object] [object] 获得更多的信息？

**编辑：** [object Object] 不可点击

**EDIT2：**我能够使用`console.log("My EPIC Object", epicObject);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:22:35.997

单击它，您将看到它包含的内容（只要它不是字符串）。

![点击它](../Images/f0afb65cf83d7e5e1081aca9cff0ae62.png)

小提琴：http: [//jsfiddle.net/maniator/YEaW3/](http://jsfiddle.net/maniator/YEaW3/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T16:07:19.383

您可以尝试使用 console.log(JSON.stringify(myObject)) 记录它。

# javascript - 在 Javascript 中更改函数的变量范围

> ID：10031399
> 
> 赞同：2
> 
> 时间：2012-04-05T15:21:04.813
> 
> 标签：javascript, serialization, module, scope

我对打电话或申请更改`this`参考不感兴趣。只是为了我自己的兴趣，我正在尝试另一种 javascript 的 require 技术，这将使定义更清晰，目标是不必为我的定义传递数组或双重引用模块名称。

我有一个在函数上使用 toString 和 eval 的示例解决方案（只是一个概念证明），但我想知道是否有更安全或更有效的方法来做到这一点。

```
// Sample module libraries (would probably be in their own files)
someModules = { 
    testModule: {test: function(){console.log("test from someModule")}},
    anotherModule: { doStuff: function(){console.log("Doin stuffs!");}}
};

sampleRequire = function() {

    // Load the modules
    for (var i=arguments.length-2; i>=0; --i){

        // Create a local variable reference to the module
        eval ('var '+arguments[i]+' = someModules.'+arguments[i].toString());
    }

    // Redefine the programmer's function so that it has my local vars in its scope
    eval("var fn = "+arguments[arguments.length-1]);

    return fn;
}

// Main code...
sampleRequire( 'testModule', 'anotherModule',
    function(){ 
        testModule.test();
        anotherModule.doStuff();
    }
)(); 
```

**编辑：**

Pointy 提出了一个很好的观点，即这将完全破坏 main 函数的范围，这通常是不可接受的。理想情况下，我希望看到模块变量被添加到函数的范围内，而不会破坏它的其他范围变量（模块名称除外——程序员必须知道不要对两件事使用相同的名称）。我打赌这可能是不可能的，但我仍然希望看到一些想法。

另一个目标是灵活地执行此操作，而不必将每个模块的参数添加到主函数。否则，我们将回到 CommonJS 样式的第一方（我不是想与之抗争，只是对范围感到好奇！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:46:38.797

我倾向于说“你做错了”。即使可以，使用未声明的变量也不是一个好主意。

这是另一个将模块写入全局对象的技巧。但是，这可能会对从主函数调用的方法产生副作用。

```
sampleRequire = function() {

    var cache = {};
    var moduleNames = [].slice.call(arguments);
    var fn = moduleNames.pop();

    return function () {
        var result, name, i;
        // export modules to global object
        for (i = 0; i < moduleNames.length; i++) {
            name = moduleNames[i];
            cache[name] = window[name]; // remember old values
            window[name] = someModules[name];
        }
        result = fn.apply(null, arguments);
        // restore original global stuff
        for (i = 0; i < moduleNames.length; i++) {
            name = moduleNames[i];
            window[name] = cache[name];
        }
        return result;
    };
} 
```

我还尝试了一些关于`with`关键字的魔法，它基本上是为你想要的而制作的。`eval`但是，在这种情况下，它似乎无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:30:44.513

我想不出任何其他方式来做你所追求的。我还怀疑这可能是少数`eval`不*邪恶*的用例之一。但请记住，模块可能依赖于它们的作用域，这可能会破坏它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:32:11.970

怎么样：

```
someModules = { 
  testModule: {test: function(){console.log("test from someModule")}},
  anotherModule: { doStuff: function(){console.log("Doin stuffs!");}}
};

function requireModules() {
  var all = [];
  for (var i = 0, l = arguments.length; i<l; i++) {
    all.push(someModules[i]);
  }
  return all;
}

(function(testModule,anotherModule){
  testModule.test();
  anotherModule.doStuff();
}).apply(null,requireModules('testModule','anotherModule')); 
```

# ruby-on-rails - 在 Rails date_select 上插入一个 CSS 类以进行选择

> ID：10031404
> 
> 赞同：7
> 
> 时间：2012-04-05T15:21:22.993
> 
> 标签：ruby-on-rails, html-helper, ruby-on-rails-3.2

我正在使用 date_select 方法生成 3 个 html 选择，即日、月和年。但我需要每个选择都有一类 CSS。

我还没有在文档中找到如何将参数传递给助手，我尝试了几种方法，但什么也没做。

导轨视图：

```
<%= f.date_select :birthday, :order => [:day, :month, :year], :start_year => 1910, :end_year => 2012, :html => {:class => ['day', 'month', 'year']} %> 
```

HTML 输出：

```
<select id="poll_user_birthday_3i" name="poll_user[birthday(3i)]">
<select id="poll_user_birthday_2i" name="poll_user[birthday(2i)]">
<select id="poll_user_birthday_1i" name="poll_user[birthday(1i)]"> 
```

像我一样的 HTML 输出：

```
<select id="poll_user_birthday_3i" name="poll_user[birthday(3i)]" class="day">
<select id="poll_user_birthday_2i" name="poll_user[birthday(2i)]" class="month">
<select id="poll_user_birthday_1i" name="poll_user[birthday(1i)]" class="year"> 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T17:39:04.083

他们解决这个问题的方法是使用 css

看法

```
<span class="datetime"> <%= f.date_select :birthdate, :order => [:day, :month, :year], :start_year => 1910, :end_year => 2012 %></span> 
```

CSS

```
.datetime select:nth-child(1){
  width: 130px;
  text-indent: 15px; 
}

.datetime select:nth-child(2) {
  width: 200px;
  text-indent: 5px;
}

.datetime select:nth-child(3) {
  width: 110px;
  text-indent: 15px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-04T11:39:28.120

Rails 现在确实做到了 OP 想要的。

> :with_css_classes - 如果要为“选择”标签分配不同的样式，请设置为 true。此选项会自动为您的“选择”标签设置“年”、“月”、“日”、“小时”、“分钟”和“秒”类。

[资源](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html "资源")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T15:41:23.527

不幸的是，`date_select`它没有提供将不同的 html 选项传递给每个选择的方法。可选`html_options`参数应用于它们中的每一个。

您可以使用单独的助手`select_day` `select_hour`并`select_minute`自己编译。

这样，您可以将单独的类传递给每个类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T16:10:40.000

根据 rails 文档（[http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)），方法定义如下。

**date_select(object_name, method, options = {}, html_options = {})**

使用上述选项，您可以指定您的代码，如下所示。

```
 <%= f.date_select :birthday, {:order => [:day, :month, :year], :start_year => 1910, :end_year => 2012}, {:class => 'common-class'} %> 
```

您传递的 html 选项将被丢弃，因为它没有按照文档进行，因此您无法在 date_select 中应用任何类。

您可以参考以下线程以获取更多信息。

[如何在 Rails 中为 collection_select 设置 HTML 选项？](https://stackoverflow.com/questions/1947578/how-do-i-set-the-html-options-for-collection-select-in-rails)

此外，您需要按照 lebreeze 的建议编写单独的辅助方法并应用上述步骤以获得准确的输出。

希望能帮助到你。

# css - 悬停在设置属性的元素上

> ID：10031407
> 
> 赞同：2
> 
> 时间：2012-04-05T15:21:48.937
> 
> 标签：css, css-selectors

如何在未禁用的元素上放置悬停样式？我尝试了以下，但没有悬停效果。

```
input.btn[disabled='false']:hover 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:28:06.327

我认为你应该使用

```
input:not([disabled="disabled"]):hover {
    border: 1px solid red;
}​ 
```

但是我认为这个伪选择器在大多数浏览器中都不起作用。

请参阅[http://jsfiddle.net/xmKbt/5/](http://jsfiddle.net/xmKbt/5/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:33:22.590

如何使用`enabled`选择器？

```
<script>$("input:enabled").val("this is it");</script> 
```

这是文档 [http://api.jquery.com/enabled-selector/的链接](http://api.jquery.com/enabled-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:27:01.180

您不能根据[Mozilla](https://developer.mozilla.org/en/DOM/CSS)和[MSDN](http://msdn.microsoft.com/en-us/library/ms531207%28VS.85%29.aspx)**设置**伪类。

# imagebutton - 动态更改 ImageButton PostBackURL 属性

> ID：10031409
> 
> 赞同：0
> 
> 时间：2012-04-05T15:22:00.510
> 
> 标签：imagebutton, postbackurl

我正在使用`ASP.NET 2.0`. 我正在构建一个表格，`ImageButton`每个单元格中都有一个。

如果用户单击 a `dropdown`，我会进行回发并使用一组新的 ImageButtons 重建表。

当用户单击 ImageButton 时，我`PostBackURL`在 Javascript 确认框中显示该属性，并且它是正确的。

但是，当我在上述回发之后继续时，实际`PostBackURL`是页面执行回发**之前来自该单元格的那个。**

我在每个页面上都构建`ImageButton`了一个独特的。`ID`

有谁知道为什么`PostBackURL`ImageButton click 上显示的内容实际上没有被使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:27:01.053

使用查询字符串捕获图像按钮 ID。根据查询字符串，所需图像显示在图像按钮内

例如：`response.redirect("home.aspx?imgid"+ib.id);`

在主页中：`string a=request.querystring("imgid");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:02:48.047

和？..或者只是这样做。

图片按钮有一个回发网址 r8，因此当用户点击图片时，使用 jquery [$('#imagebutton').attr('id')] 捕获其 id 并将此信息保存在隐藏字段中并检索值使用 request.form["hiddenfield"]..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-06T13:13:11.087

只需检查使用的拼写。它应该是**Url**而不是**URL**。因此，请尝试使用`PostBackUrl`而不是`PostBackURL`.

# c# - 这个 C# 操作方法代码是否真的触发了 301 重定向？

> ID：10031412
> 
> 赞同：6
> 
> 时间：2012-04-05T15:22:10.633
> 
> 标签：c#, asp.net-mvc-3, redirect, http-status-code-301, actionmethod

这是我在有人访问我的电子商务网站上的产品页面时使用的代码。

```
public ActionResult Details(int id, string slug)
{
    using (var productRepository = new EfProductRepository())
    {
        var product = productRepository.FindById(id);
        if (product == null) return RedirectToAction("Index", "Home");
        if (product.SeoTextSlug != slug)
            return RedirectToAction("Details", new {id = product.ProductId, slug = product.SeoTextSlug});

        var model = new ProductDetailModel();

        //Load the product information.
        model.Product.ProductId = product.ProductId;
        model.Product.CoverImagePath = product.CoverImagePath;
        model.Product.Name = product.Name;
        model.Product.Tagline = product.Tagline;
        model.Product.Price = product.Price;
        model.Product.Stock = product.Stock;
        model.Product.PieceCount = (int)product.PieceCount;
        model.Product.SKU = product.SKU;

        //Load the reviews for that product.
        if (product.Reviews.Any())
        {
            foreach (var review in product.Reviews)
            {
                model.Reviews.Add(new ReviewModel()
                {
                    ReviewId = review.ReviewId,
                    AccountId = (int)review.AccountId,
                    Content = review.Content,
                    Location = review.Location,
                    ProductId = (int)review.ProductId,
                    PublishDate = review.PublishDate,
                    ReviewRatingId = (int)review.ReviewRatingId
                });   
            }
        }

        return View(model);
    }
} 
```

在这一点：

```
if (product.SeoTextSlug != slug)
    return RedirectToAction("Details", new {id = product.ProductId, slug = product.SeoTextSlug}); 
```

我实际上是否正确触发了 301 重定向？

当然它可以按我的意愿工作，但我想确保我返回正确的标准 HTTP 结果，以便搜索引擎正确响应它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T15:27:38.320

我相信`RedirectToAction`返回 302 而`RedirectToActionPermanent`返回 301。

# css - 在 Android 浏览器中创建垂直滚动 div 的最简单方法是什么？

> ID：10031416
> 
> 赞同：0
> 
> 时间：2012-04-05T15:22:22.337
> 
> 标签：css, html, scroll, android-browser

**注意：**我意识到有人提出了非常相似的问题，但是移动网络还很年轻且不稳定，而且这些讨论已经有几年的历史可能已经过时了。

我正在尝试`<div>`在 Android 浏览器中创建一个简单的滚动——通过`overflow-y: auto`在兼容的浏览器中给它一个固定的大小来实现它。不幸的是，移动 Webkit 浏览器似乎不支持该属性。我还能如何创建此功能或等效功能？

如果可能的话，我更喜欢 CSS 解决方案。我已经看到了 JavaScript 小部件[iScroll](http://cubiq.org/iscroll-4)和[Dojo Mobile 列表](http://dojotoolkit.org/reference-guide/1.7/dojox/mobile.html#lists)，但对于我正在尝试做的事情来说，这些似乎有点过分了。iScroll 页面提到“最新的 Android 版本支持此功能（尽管支持不是最佳的）”所以我想知道 Android 4.0 是否可能已经解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:26:04.783

我已经在许多不同的设备上使用了标准的触摸事件来产生良好的效果。如果它只是一个简单的解决方案，而不是一个重量级的插件，只需使用`touchstart` `touchmove`和`touchend`事件顶部计算移动并修改滚动顶部。

我找不到跨设备的标准 CSS 方式，但也许 webkit 有一些专有的东西。

PS这是最近3个月的。

**[更新]**

您可以像使用其他任何事件一样使用这些事件，

```
var startX = 0;
var startY = 0;
var ele = document.getElementById('myScrollableDiv');
ele.addEventListener('touchstart', function(ev){
    startX = ev.screenX;
    startY = ev.screenY;
});

ele.document.getElementById('myScrollableDiv').addEventListener('touchmove', function(ev){
    movementX = startX - ev.screenX;
    movementY = startY - ev.screenY;
    ele.style.scrollLeft = ele.style.scrollLeft + movementX;
    ele.style.scrollTop = ele.style.scrollTop + movementY;
    ev.preventDefault();
}); 
```

这完全来自内存，所以它需要一些我现在不能做的测试，而且我现在也没有我使用的代码（尽管那是在 jQuery 中）。这种方法最终效果很好，只是需要解决一些问题。希望这足以让您开始工作。

# haskell - 如何将类型（种类？）仅限于产品类型

> ID：10031417
> 
> 赞同：5
> 
> 时间：2012-04-05T15:22:29.040
> 
> 标签：haskell

我正在研究使用 monad 理解来表示 SQL 查询，并生成适当的 SQL。乍一看，这不是问题，似乎很合适。但是我必须限制类型，这些类型只能将单子形成为产品，没有总和，我想不出一种方法来放置这样的约束。

我想使用类型检查器来确保只能使用 SQL 中可表示的类型。

我想，我可以使用模板 haskell 来派生正确的实例，如果类型不适合，则拒绝派生，但我更希望在类型级别完成。由于我的无知，我引入错误的机会较少。

我怎么能这样做？如果是，请您推荐一些阅读和/或代码示例。

**编辑：**谢谢，我有一些好的路径可以遵循，需要更多阅读:) 这里是一个长周末。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T15:36:57.780

不幸的是，这实际上是不可能的： a`Monad`必须是完全多态的。这与您不能制作`Set`单子（`Ord`约束）的原因相同。

如果你只能处理让结果类型满足约束，那么你可以有`runSQL :: (Product a) => SQL a -> IO a`，或类似的。在这种情况下，只需使用 Template Haskell 派生适当的实例即可，或者使用新的[GHC Generics](http://www.haskell.org/haskellwiki/Generics)；普通的 Haskell 无法确定一个类型是否仅由产品组成。

但我怀疑您需要访问一元计算的整个结构，才能将其转换为 SQL。不幸的是，monad 并没有很好地做到这一点，因为它们与任意的 Haskell 函数连接在一起，你无法“查看内部”。[箭头](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Arrow.html)更近，可以让你做更多的静态分析，但仍然有那个讨厌`arr`的地方，让你再次潜入任意 Haskell 函数。

做这样的事情最可行的选择可能是编写一个模板 Haskell 拼接器来解析你想要的语法；您可以说`$(sql [| [ (a,b) | a <- table1, b <- table2 |])`并`sql`在编译时将 AST 转换为相应的 SQL 如果该语法太难看，您可以编写使用带有[haskell-src-meta](http://hackage.haskell.org/package/haskell-src-meta)的准引用器，它看起来像`[sql| (a, b) | a <- table1, b <- table2 |]`.

您可能还对[广义箭头](http://www.cs.berkeley.edu/~megacz/garrows/)扩展感兴趣，尽管对于您的目的而言，它可能是矫枉过正（而且过于实验性）。

# c++ - 生成文件不起作用

> ID：10031421
> 
> 赞同：0
> 
> 时间：2012-04-05T15:22:36.440
> 
> 标签：c++, makefile

使用我的 makefile 时出现此错误：

```
make: Warning: File `makefile' has modification time 56 s in the future
make: Circular Menu.o <- Menu.o dependency dropped.
g++ a.out main.o Menu.o CourseList.o Course.o LecturerList.o StudentList.o Lecturer.o Student.o -o a.out
make: warning:  Clock skew detected.  Your build may be incomplete. 
```

这是我的生成文件：

```
a.out: main.o Menu.o CourseList.o Course.o LecturerList.o StudentList.o Lecturer.o Student.o
g++ main.o Menu.o CourseList.o Course.o LecturerList.o StudentList.o Lecturer.o Student.o -o a.out

main.o: main.cpp Lecturer.o LecturerList.o Student.o StudentList.o Course.o CourseList.o Menu.o
g++ -c main.cpp

Menu.o: Menu.o Lecturer.o LecturerList.o Student.o StudentList.o Course.o CourseList.o
g++ -c Menu.cpp

CourseList.o: CourseList.cpp
g++ -c CourseList.cpp

Course.o: Course.cpp
g++ -c Course.cpp

LecturerList.o: LecturerList.cpp
g++ -c LecturerList.cpp

StudentList.o: StudentList.cpp
g++ -c StudentList.cpp

Lecturer.o: Lecturer.cpp
g++ -c Lecturer.cpp

Student.o: Student.cpp
g++ -c Student.cpp 
```

错误在哪里，我该如何解决？我知道这可能有点令人困惑，但我希望这里有人可以帮助我解决这个问题，我已经为此烦恼了好几个小时......谢谢！

注意：我编辑了错误和生成文件。现在我只有1个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:30:27.870

首先，“File 'makefile' has modify time 56 s in the future”的问题是系统管理员问题。您将文件存储在网络文件系统上。您的计算机和服务器计算机的时间不一致。要解决此问题，请调整其中一台或两台计算机上的日期，以使它们一致。要保持该协议，请使用“ntpd”之类的内容。

其次，循环依赖是因为您混淆了 Makefile 中的“.o”和“.cpp”文件。具体来说，您将`.o`文件列为其他文件的源依赖`.o`项，这（几乎）从未如此。`Menu.o: Menu.o`就是这样一种循环依赖。

第三，“找不到文件 a.out”消息是因为您在链接器命令行上将“a.out”指定为输入和输出文件。

这是您的 Makefile 的一个固定版本（如果您将其复制粘贴到编辑器中，请不要忘记修复选项卡。）

```
a.out: main.o Menu.o CourseList.o Course.o LecturerList.o StudentList.o Lecturer.o Student.o
  # Lose extraneous "a.out" on the next line.
  g++ main.o Menu.o CourseList.o Course.o LecturerList.o StudentList.o Lecturer.o Student.o -o a.out

# Get rid of all '.o' in the next line. They don't make any sense.
main.o: main.cpp 
  g++ -c main.cpp

# Change "Menu.o" to "Menu.cpp" and get rid of other .o files
Menu.o: Menu.cpp
  g++ -c Menu.cpp

CourseList.o: CourseList.cpp
  g++ -c CourseList.cpp

Course.o: Course.cpp
  g++ -c Course.cpp

LecturerList.o: LecturerList.cpp
  g++ -c LecturerList.cpp

StudentList.o: StudentList.cpp
  g++ -c StudentList.cpp

Lecturer.o: Lecturer.cpp
  g++ -c Lecturer.cpp

Student.o: Student.cpp
  g++ -c Student.cpp 
```

最后，如果您要使用模式规则和自动变量，您的 Makefile 可以变得更简单和更具可读性。

这是一个更短的版本：

```
a.out: main.o Menu.o CourseList.o Course.o LecturerList.o StudentList.o Lecturer.o Student.o
  g++ $^ -o a.out

# Take advantage of Makefile's pattern match to avoid specifying every. single. file.
%.o: %.cpp 
  g++ -c $< 
```

* * *

参考：[http ://www.gnu.org/software/make/manual/make.html](http://www.gnu.org/software/make/manual/make.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:25:56.027

第二行：

```
g++ a.out main.o Menu.o CourseList.o Course.o LecturerList.o StudentList.o Lecturer.o Student.o -o a.out 
```

正在尝试编译`a.out`成`a.out`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:26:53.070

我想你想要

```
g++ -o a.out ... 
```

不是

```
g++ a.out ... 
```

您也可以通过不让 Menu.o 依赖于 Menu.o 来摆脱循环警告

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T15:29:24.957

线

```
Menu.o: Menu.o Lecturer.o LecturerList.o Student.o StudentList.o Course.o CourseList.o 
```

列为`Menu.o`的必要条件`Menu.o`。

并且`a.out`列出的是`g++`您应该使用的输入`-o`来指示您希望输出到那里。

# java - 注入对异步服务的引用 - 缺点

> ID：10031423
> 
> 赞同：-1
> 
> 时间：2012-04-05T15:22:43.053
> 
> 标签：java, gwt, memory, singleton

如果在我的 GWT UI 组件中我使用 @Inject 来引用我的 CoolServiceAsync 接口 - 是否会从 GWT 绑定中创建该服务的“实现”的单独实例？或者它是单例并且 JavaScript 对象的相同实例将在所有组件之间共享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:31:57.680

您可能必须在 GWT 中指定用于 IoC 的内容。我假设你使用谷歌杜松子酒。除非您将绑定指定为单例，否则它将在[GWT.create()](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/core/client/GWT.html#create%28java.lang.Class%29)的帮助下创建，因为延迟绑定。[GWT.create()](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/core/client/GWT.html#create%28java.lang.Class%29)总是返回新实例。

# python - python IDLE可以用于迭代/内存开发吗？

> ID：10031427
> 
> 赞同：3
> 
> 时间：2012-04-05T15:22:58.467
> 
> 标签：python, python-idle

我不确定我是否正确地用了这个主题，但基本上我很好奇是否有人可以在 Python IDLE 或类似工具中开发代码，然后通过一些命令吐出内存中的当前代码。我相信我以前在阅读 Lisp 书籍时这样做过，并记得它是一种与通常重新运行静态文件非常不同的方法。关于如何执行此操作或类似操作的任何建议？谢谢

**更新**我最终结合了使用 execfile 和重新加载命令的 IDLE，同时在单独的编辑器（eclipse/pydev）中编辑代码。我更改了我的“主”文件，以便在调用 execfile 时不会立即执行任何操作。主文件中的代码和导入的模块被加载到当前范围/堆栈中，因此当我编写新代码或发生错误时，我可以直接在 IDLE 命令行中进行测试。一旦我发现问题或前进的方向，我就会在编辑器中更新代码，运行 reload(module) 更新模块，然后在主文件上运行 execfile(path)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T15:27:16.213

这对 LISP 来说是明智的原因是每个 LISP 程序只是一堆宏和函数，并且 s 表达式可以自动格式化为一个很好的表示形式。

在 Python 中情况并非如此，您有更复杂的语法（重要的空格、装饰器、许多控制结构、不同类型的字符串文字，...）和更多的语义元素（类、函数、顶级代码、 ...)，所以这种方法在这里不会很好地工作。即使是最小的项目，生成的代码也会变得非常混乱，并且生成的代码仍然需要大量的“后处理”，这在某种程度上抵消了开发速度的优势。

相反，您可以在一个好的文本编辑器中编写代码，然后

*   使用内置功能将其与 REPL 集成（EMACS 和 Vim 对这类东西有很好的支持）或
*   使用 将其加载到 REPL 中`execfile`，这将为您提供良好的文本编辑和提示的交互性。
*   连同程序一起，编写一套单元测试。建议将这用于任何重要的软件，并自动测试您的代码，因此您将不得不在交互式提示中花费更少的时间，手动检查功能是否正常工作。

您还可以获取一个功能更全面的 IDE，它支持代码评估和全面调试（PyDev 是这里的一个示例，感谢 sr2222）。

# android - Android：无法使用 listsFiles() 查看所有文件

> ID：10031440
> 
> 赞同：0
> 
> 时间：2012-04-05T15:23:36.877
> 
> 标签：android, file

我想列出目录中的所有文件。就我而言，方法 File.listFiles() 听起来不错，但实际上并非如此。实际上，该方法有效，但仅适用于某些路径。为什么？我需要权限吗？也许是因为我正在用手机调试？（不知道在我用手机调试的时候，被调试的app是否可以访问内部和外部存储）。

* * *

感谢您的友好回答：）好吧，当手机连接到电脑时，我会尝试使用该应用程序，而当没有连接到电脑时。在第一种情况下，我无法访问似乎存储在内部和外部存储中的所有文件夹，而在第二种情况下，我可以。问题是：有没有办法用作数据量（我不确定“数据量”这个词，很抱歉，但我不是英语：D）只有内部存储而外部没有？通过这种方式，我将通过访问我的手机的外部存储进行调试:) 我认为这可能不是代码，因为当手机未连接到电脑时，应用程序可以工作:)

# java - 当你从 B-Tree 中拆分一个节点并且它的顺序是奇数时，你如何平均分配键？

> ID：10031444
> 
> 赞同：2
> 
> 时间：2012-04-05T15:23:49.903
> 
> 标签：java, key, b-tree

当您拆分一个 5 阶的节点时，您将拥有 4 个密钥，因此您可以均匀分布，但是当节点具有奇数个密钥时，事情就不会如此均匀地分布。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:34:40.673

Go read Wikipedia article. It describes this exactly:

> If this number is odd, then U=2L and one of the new nodes contains (U−2)/2 = L−1 elements, and hence is a legal node, and the other contains one more element, and hence it is legal too. If U−1 is even, then U=2L−1, so there are 2L−2 elements in the node. Half of this number is L−1, which is the minimum number of elements allowed per node.

[http://en.wikipedia.org/wiki/B-tree](http://en.wikipedia.org/wiki/B-tree)

# postgresql - PostGIS SQL 从一组具有不同 ID 的点生成单独的线段

> ID：10031445
> 
> 赞同：2
> 
> 时间：2012-04-05T15:23:51.960
> 
> 标签：postgresql, geospatial, postgis

全部，

我可能试图将 SQL 角度推得太远，但我需要从一组 GPS 跟踪点生成简单的两个顶点线段，作为来自许多车辆 (veh_id) 的馈送。生成的线段也在输入中按 ID 分组。

我可以使用现有的 POSTGIS 工具很好地生成多段线，甚至在制作多段线后将它们分成单独的段，但是保持线段分开让我大脑冻结。

业务需求是，我需要将时间/距离公式应用于每个段，因为它是基于从用于达到每个段速度的每个点的计算创建的。输入是混合车辆 ID 的事实似乎是个问题。

我知道这是某种加入，但我还不能让它工作。我想如果我能找到一种方法，至少将每段的点配对以构建单独的线段，我就可以让其余的工作。“cmdrecid”是时间顺序的，但对于所有车辆，每辆车都会有差距

到目前为止，我的 sql 与原始点相去甚远，任何人的任何想法或指示，谢谢！！：

```
 select a.cmdrecid,
               a.esn,
               a.time_idx,
               a.the_geom,
               a.speed,
               a.veh_id
          from stmaint_plots a, (select veh_id, count(*) 
                                   from stmaint_plots 
                                  where time_idx >= (NOW() - INTERVAL '1 minutes') 
                               group by veh_id having count(*) > 1
                                 ) as b
         where a.time_idx >= (NOW() - INTERVAL '1 minutes') 
           and a.veh_id = b.veh_id
      order by b.veh_id, a.time_idx desc;

     cmdrecid |   esn    |        time_idx        |                      the_geom                      | speed | veh_id 
    ----------+----------+------------------------+----------------------------------------------------+-------+--------
       562233 | 10202001 | 2012-04-05 10:05:54-05 | 0101000020840D030031FB5FADF10221418696195E70770341 |  16.0 | 2042
       562226 | 10202001 | 2012-04-05 10:05:46-05 | 0101000020840D030031FB5FADF10221418696195E70770341 |  16.0 | 2042
       562246 | 10202010 | 2012-04-05 10:06:16-05 | 0101000020840D0300DC583A10C74921419B78BD2F3C440441 |  29.6 | 2075
       562232 | 10202010 | 2012-04-05 10:05:53-05 | 0101000020840D0300BAD35538334A2141F97506A3732D0441 |   1.0 | 2075
       562216 | 10202010 | 2012-04-05 10:05:33-05 | 0101000020840D0300BAD35538334A2141F97506A3732D0441 |   0.0 | 2075
       562239 | 11031319 | 2012-04-05 10:06:08-05 | 0101000020840D030090D4FFEB8DFD214168556D2F88770341 |   0.0 | 2202
       562227 | 11031319 | 2012-04-05 10:05:46-05 | 0101000020840D030090D4FFEB8DFD214168556D2F88770341 |   0.0 | 2202
       562245 | 10202004 | 2012-04-05 10:06:14-05 | 0101000020840D03000EE2342EC8382141C3A07B7223420241 |   3.8 | 2234
       562231 | 10202004 | 2012-04-05 10:05:53-05 | 0101000020840D0300645F4BBDF837214194A58D9944430241 |   1.5 | 2234
       562219 | 10202004 | 2012-04-05 10:05:35-05 | 0101000020840D0300645F4BBDF837214194A58D9944430241 |   0.0 | 2234
       562242 | 11030817 | 2012-04-05 10:06:10-05 | 0101000020840D0300F07C6C31085B2141DAE94B086BF20341 |   6.7 | 2350
       562213 | 11030817 | 2012-04-05 10:05:31-05 | 0101000020840D03009BF21B7B0C5C2141D4D6754598EB0341 |   0.1 | 2350
       562229 | 11072928 | 2012-04-05 10:05:51-05 | 0101000020840D0300A05299973C66214137D638BF22820441 |   0.0 | 2369
       562217 | 11072928 | 2012-04-05 10:05:34-05 | 0101000020840D0300A05299973C66214137D638BF22820441 |   0.1 | 2369
       562244 | 11072930 | 2012-04-05 10:06:12-05 | 0101000020840D0300526B108976CE2041538A57D001C40241 |   0.0 | 2372
       562234 | 11072930 | 2012-04-05 10:05:55-05 | 0101000020840D0300526B108976CE2041538A57D001C40241 |   0.1 | 2372
       562211 | 11072930 | 2012-04-05 10:05:31-05 | 0101000020840D0300526B108976CE2041538A57D001C40241 |   0.1 | 2372
       562243 | 11031308 | 2012-04-05 10:06:11-05 | 0101000020840D0300A3888CBB4D0C224131ACAA5F99860341 |   0.0 | 2482
       562230 | 11031308 | 2012-04-05 10:05:51-05 | 0101000020840D0300A3888CBB4D0C224131ACAA5F99860341 |   0.0 | 2482
       562214 | 11031308 | 2012-04-05 10:05:32-05 | 0101000020840D0300A3888CBB4D0C224131ACAA5F99860341 |   0.0 | 2482
       562240 | 11072901 | 2012-04-05 10:06:08-05 | 0101000020840D0300D5C9EF09F7FD214181016B7FD7710341 |   4.4 | 2522
       562220 | 11072901 | 2012-04-05 10:05:36-05 | 0101000020840D03007FE8CC1AF6FD214104C0399242750341 |   2.4 | 2522
       562241 | 11072910 | 2012-04-05 10:06:08-05 | 0101000020840D0300BE72D47D5A0D2241C53399774B630341 |   0.0 | 2532
       562225 | 11072910 | 2012-04-05 10:05:45-05 | 0101000020840D0300BE72D47D5A0D2241C53399774B630341 |   0.0 | 2532
       562249 | 11030821 | 2012-04-05 10:06:25-05 | 0101000020840D0300E15572FD4E042141D491539CA1E80441 |   0.0 | 2538
       562236 | 11030821 | 2012-04-05 10:06:04-05 | 0101000020840D0300E15572FD4E042141D491539CA1E80441 |   0.0 | 2538
       562223 | 11030821 | 2012-04-05 10:05:44-05 | 0101000020840D03008EA28CFC7F032141E6E959569FE80441 |  12.2 | 2538
       562235 | 11031332 | 2012-04-05 10:05:55-05 | 0101000020840D030064B179212BFE2141F351ECB0B4700341 |   3.9 | 2809
       562215 | 11031332 | 2012-04-05 10:05:33-05 | 0101000020840D0300B033836AF6FD214143DE49E11E740341 |   2.8 | 2809
       562248 | 11031326 | 2012-04-05 10:06:20-05 | 0101000020840D030046D5FF39849421418F854A13E9DA0241 |   0.0 | 2811
       562221 | 11031326 | 2012-04-05 10:05:39-05 | 0101000020840D030046D5FF39849421418F854A13E9DA0241 |   0.2 | 2811
    (31 rows) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:45:25.277

看着这个问题：

[https://gis.stackexchange.com/questions/34687/how-to-split-osm-roads-into-individual-segments-at-intersections](https://gis.stackexchange.com/questions/34687/how-to-split-osm-roads-into-individual-segments-at-intersections)

总体共识是，这不是一个好主意，因为您可以创建不存在的交叉口（立交桥等成为交叉口）。更好的方法是使用 osm2pgrouting 或 osm2po 之类的工具。

# android - Android 示例 ActionBarCompat

> ID：10031446
> 
> 赞同：1
> 
> 时间：2012-04-05T15:23:53.923
> 
> 标签：android

我想我在这里遗漏了一些东西。

在参考文档中找到此示例后，我想对其进行测试。因此，我通过导入此项目创建了一个新项目 - 针对 SDK 的 v2.3。

但是，当项目打开时，出现 51 个错误。

我的问题，即使这应该在 android 3.0 之前的版本中运行，我应该使用什么版本的 SDK 构建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:31:46.730

将目标 API 级别设置为 14 (4.0)，但将最低级别（在清单中）设置为 3 或更高。

然后它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T01:35:14.237

我遇到了类似的错误，这些错误已通过 SIMON 所说的 PLUS 修复：

可以在通过删除顶部的解决它`xxxxx cannot be resolved or is not a field`下找到的问题`R.java``import android.R;``MainActivity.java`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T10:36:51.630

如果您仍然遇到错误问题，这就是我修复它的方法...

右键单击包资源管理器窗格下的“com.example.android.actionbarcompat.MainActivity”。从此处单击属性（按钮上的最后一个选项）更改 Android 属性下的构建目标。选择 api 14 android 4.0

我已经尝试过清单方式，但它没有用，但这对我有用。:D

# perl - 使用带括号且只有一个变量的 my

> ID：10031455
> 
> 赞同：37
> 
> 时间：2012-04-05T15:24:27.763
> 
> 标签：perl

我有时会看到这样的 Perl 代码：

```
my ( $variable ) = blah.... 
```

在单个变量周围加上括号有什么意义？我认为括号仅在声明多个变量时使用，例如：

```
my ( $var1, $var2, $var3 ) = blah... 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-05T18:39:48.443

有几种情况存在差异：

1.  当**数组**在右侧时

    ```
    my @array = ('a', 'b', 'c');
    my  $variable  = @array;           #  3   size of @array
    my ($variable) = @array;           # 'a'  $array[0] 
    ```

2.  当**列表**在右侧时

    ```
    my  $variable  = qw/ a b c d /;    # 'd'  last  item of the list
    my ($variable) = qw/ a b c d /;    # 'a'  first item of the list 
    ```

3.  具有变量（**数组/标量**）返回值的子程序

    ```
    sub myFunction {
      ...
      return (wantarray() ? @array : $scalar);
    }
    my  $variable  = myFunction(...);  # $scalar   from the subroutine
    my ($variable) = myFunction(...);  # $array[0] from the subroutine 
    ```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-05T15:32:15.717

括号创建了一个列表上下文，它影响赋值右侧的评估方式。

比较

```
my $x = grep { /s/ } qw(apples bananas cherries);
print $x; 
```

和

```
my ($x) = grep { /s/ } qw(apples bananas cherries);
print $x; 
```

[当您只想获取列表的第一个元素并丢弃其余元素](https://stackoverflow.com/questions/3728337/)时，您通常会使用这种结构。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-05T15:29:30.090

我不是 Perl 专业人士（无论如何，我不是），但 AFAIK 它与列表有关。Perl 有不同的上下文（标量、列表）。使用`($var)`开关列出上下文，`$var`是标量上下文。

```
my $var = (1, 2, 4); # $var = 4 (last element)
my ($var) = (1, 2, 4); # $var = 1 
```

请否决这个答案，如果它完全错误:)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-05T15:50:59.433

你混淆了两个不同的东西。首先，使用`my`声明多个变量时，需要使用括号：

```
my $foo, $bar; 
```

不起作用，因为它被认为是两个不同的语句：

```
my $foo;
$bar; 
```

因此，您需要括号将参数组合到*函数* `my`的参数列表中：

```
my($foo, $bar); 
```

其次，您有明确的分组以调用列表上下文：

```
$foo, $bar = "a", "b"; # wrong! 
```

将被视为三个单独的语句：

```
$foo;
$bar = "a";
"b"; 
```

但是，如果您使用括号将其分组`$foo`并`$bar`放入列表中，则赋值运算符将使用列表上下文：

```
($foo, $bar) = ("a", "b"); 
```

奇怪的是，如果你去掉 RHS 括号，你也会遇到一个小问题：

```
($foo, $bar) = "a", "b"; # Useless use of a constant (b) in void context 
```

但这是因为`=`运算符的优先级高于逗号`,`，您可以在[perlop](http://perldoc.perl.org/perlop.html)中看到这一点。如果你试试：

```
my @array = ("a", "b");
($foo, $bar) = @array; 
```

您将获得不带括号的所需行为。

现在完成循环，让我们删除上面的列表上下文，看看会发生什么：

```
my @array = ("a", "b");
$foo = @array;
print $foo; 
```

这会打印`2`，因为数组是在标量上下文中计算的，而标量上下文中的数组返回它们包含的元素数。在这种情况下，它是`2`。

因此，诸如此类的语句使用列表上下文：

```
my ($foo) = @array;          # $foo is set to $array[0], first array element
my ($bar) = ("a", "b", "c"); # $bar is set to "a", first list element 
```

这是一种覆盖标量分配中隐含的标量上下文的方法。为了比较，这些分配在标量上下文中：

```
my $foo = @array;            # $foo is set to the number of elements in the array
my $bar = ("a", "b", "c");   # $bar is set to "c", last list element 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-05T20:12:36.347

我已经在另一个网站上发布了关于这个主题的深入[解释。](http://www.perlmonks.org/?node_id=790129)

【这里不能发。StackOverflow 不支持表格。并不是说任何人通常对非现场链接到文档有问题。]

# iphone - 显示带有视频和链接的 PDF

> ID：10031457
> 
> 赞同：1
> 
> 时间：2012-04-05T15:24:31.073
> 
> 标签：iphone, ios, ipad, pdf, video

应用商店中有一个显示在线杂志的应用，它有一些动画、页面格式随方向变化的变化以及页面之间的一些视频。

我很难找到如何做到这一点，所以如果你们有更好的想法，请告诉我。基本上：

1- 是否可以在 pdf/pdf 页面内/之间显示视频？
2-是否有任何其他文件格式可以像 pdf 一样按顺序显示图像，但支持动画？
3- 我知道当设备改变方向时如何改变图片，但它在 pdf 上可行吗？我需要 2 个不同方向的 pdf 文件吗？

从长远来看，我正在尝试做一个动画/动态/交互式杂志查看器。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:36:37.697

我不明白为什么您不能以 PDF 格式播放视频/多媒体文件。

PDF 已经支持可以嵌入到文件中的视频/多媒体（作为注释 - 请参阅[https://groups.google.com/d/topic/pdfnet-sdk/uUcA75j0IPg/discussion](https://groups.google.com/d/topic/pdfnet-sdk/uUcA75j0IPg/discussion)）

但是，根据您的描述，您似乎希望支持与嵌入式多媒体注释不同的流式外部内容。

PDF 规范不直接支持这一点，但是没有什么能阻止您自定义链接注释并扩展您的应用程序以支持此用例场景。

例如，如果您创建类型为“e_Link”的注释和类型为“e_URI”的操作，您还可以在注释或操作字典中添加一些自定义条目...例如：

```
pdftron.PDF.Action act = pdftron.PDF.Action.CreateURI(doc.GetSDFDoc());
pdftron.PDF.Annots.Link link = pdftron.PDF.Annots.Link.Create(doc.GetSDFDoc(), new Rect(85, 458, 503, 502), act);
pdftron.SDF.Obj dict = link.GetSDFObj();
dict.PutBool("My multimedia annot", true);
dict.PutName("MyString", "foo:bar, some parameter for streaming... if required etc");
... 
```

当用户点击链接注释时，您可以识别单击（点击）的注释。这是在工具库中完成的，该工具库以源代码形式提供，购买许可证或使用 pdfview.GetAnnotaAt(x,y)。您可以通过查询自定义标签来识别您的多媒体注释：

```
Annot a = ...
pdftron.SDF.Obj my_tag = a.GetSDFObj().FindObj("My multimedia annot ");
if (my_tag != null && my_tag.GetBool())  {
 string my_params = a.GetSDFObj().FindObj("MyString").GetName();
  ... use custom parameters and URL from associated action to stream remote data.
} 
```

对于流式传输和播放远程多媒体，您将使用 Android 和 iOS 上都可用的平台 API。

有关更多信息，请参阅： [https ://groups.google.com/d/topic/pdfnet-sdk/WgEWM9OSCi0/discussion](https://groups.google.com/d/topic/pdfnet-sdk/WgEWM9OSCi0/discussion)

# mysql - MySQL 查找价格最高的产品的型号。

> ID：10031459
> 
> 赞同：0
> 
> 时间：2012-04-05T15:24:34.707
> 
> 标签：mysql

关系：

```
Product(maker, model, type) 
Laptop(Model, price, speed, ram, hd, screen) 
PC(model, price, speed, ram, hd) 
Printer(model,price, color, price) 
```

我试图找到价格最高的产品型号。

我试过的：

```
-> SELECT model, MAX(price) FROM
-> ((SELECT model, MAX(price) FROM product NATURAL JOIN pc)
-> union
-> (SELECT model, MAX(price) FROM product NATURAL JOIN printer)
-> union
-> (SELECT model, MAX(price) FROM product NATURAL JOIN laptop)); 
```

我不断收到的错误是“ERROR 1054 (42S22): Unknown column 'price' in 'field list'”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:33:05.057

该查询将不起作用。我认为这就是您要查询的内容：

```
(SELECT model, price FROM product NATURAL JOIN pc)
union all
(SELECT model, price FROM product NATURAL JOIN printer)
union all
(SELECT model, price FROM product NATURAL JOIN laptop)
ORDER BY price DESC
LIMIT 1 
```

**编辑：**根据您的评论扩展答案

好吧，前面的查询结果是一个元组。如果您只指一个字段/属性/列，那么您应该这样做：

```
SELECT model from (
    (SELECT model, price FROM product NATURAL JOIN pc)
    union all
    (SELECT model, price FROM product NATURAL JOIN printer)
    union all
    (SELECT model, price FROM product NATURAL JOIN laptop)
) final
ORDER BY price DESC
LIMIT 1 
```

但这会更慢，而且可能是不必要的。

我没有得到`where price < all`. 如果您按价格降序订购并且只获得第一个记录，您将只能获得最高价格记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:26:55.253

您需要为子选择中的 max() 函数起别名：

```
SELECT model, MAX(price)
FROM (
   SELECT model, MAX(price) AS price ...
                           ^^^^^^^^^
   etc... 
```

您基本上是在使用子查询动态创建一个表，因此从技术上讲，外部查询必须是

```
SELECT model, MAX(MAX(price))
                  ^^^^^^^^^^--- field name in subselects 
```

这真的行不通。您正在对子查询未返回的字段名称（价格）进行双重 MAX() 调用。

# dump - 使用模式转储更新 PostgreSQL 模式

> ID：10031460
> 
> 赞同：0
> 
> 时间：2012-04-05T15:24:39.060
> 
> 标签：dump, postgresql

我有两台服务器：生产和测试。他们都运行 PostgreSQL。我在测试服务器上做了很多改动，比如`ALTER table`，`CREATE INDEX`等等，并希望尽可能简单地将这些改动转移到生产服务器上。最方便的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:25:17.353

最好的方法是：

1.  在每个数据库上运行 pgdump，创建一个完整的转储。
2.  使用 Beyond Compare 之类的比较工具并排运行两个文件并创建合并；鉴于您已经说过只有“更改”更改和数据更改，两者应该足够相似，可以将它们排列起来
3.  创建一个新的测试数据库以将该脚本部署到，并通过 psql（或您使用的任何工具）运行该脚本。
4.  如果该脚本成功运行，则清除目标数据库并针对它运行该脚本。
5.  确保数据库支持的应用程序在此过程中处于脱机状态，至少在您删除数据库并重新部署期间。
6.  如果有其他数据更改，您可能希望在删除目标数据库之前对其进行 pgdump。然后，您可以合并回在目标 DB 上的第一个 pgdump 和第二个 pgdump 之间添加的数据。

其他注意事项：

*   Pgdump 是一个命令行工具，通常通过 ssh 运行（如 PuTTY）
*   它以正确的创建顺序输出 ASCII 文本 SQL 脚本，因为 PostGre 可以具有对象相互依赖性。
*   psql，PostGre 的命令行界面应该允许您从文件执行脚本，如果您没有可以处理与整个转储一样大的 SQL 脚本的 GUI 程序。
*   有单独转储数据和结构的选项。

# iphone - iphone中的自动更新订阅应用内购买？

> ID：10031463
> 
> 赞同：1
> 
> 时间：2012-04-05T15:24:41.243
> 
> 标签：iphone, in-app-purchase

我有一个 iPhone 应用程序，我在其中使用 MKstorekit4.1 的自动更新订阅。我已成功实施它，并且我得到了服务器响应。实际上我想使用此订阅活动 1 个月。我在 config.plist 中给出的值是 30。但是当我测试时，我需要在同一天再次购买？我需要该购买活动 30 天。MKstorekit 说他们已经用下面的代码处理了它。那为什么我有这个场景。

```
-(BOOL) isSubscriptionActive
{    
if([[self.verifiedReceiptDictionary objectForKey:@"receipt"] objectForKey:@"expires_date"]){

    NSLog(@"%@",self.verifiedReceiptDictionary);
    NSTimeInterval expiresDate = [[[self.verifiedReceiptDictionary objectForKey:@"receipt"] objectForKey:@"expires_date"] doubleValue]/1000.0;
    NSLog(@"%f",expiresDate);
     NSLog(@"%f",[[NSDate date] timeIntervalSince1970]);
    return expiresDate > [[NSDate date] timeIntervalSince1970];

}else{

    NSString *purchasedDateString = [[self.verifiedReceiptDictionary objectForKey:@"receipt"] objectForKey:@"purchase_date"];        
    if(!purchasedDateString) {
        NSLog(@"Receipt Dictionary from Apple Server is invalid: %@", verifiedReceiptDictionary);
        return NO;
    }
      NSLog(@"%@",purchasedDateString);
    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    //2011-07-03 05:31:55 Etc/GMT
    purchasedDateString = [purchasedDateString stringByReplacingOccurrencesOfString:@" Etc/GMT" withString:@""];    
    NSLocale *POSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
    [df setLocale:POSIXLocale];        
    [df setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];            
    [df setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSDate *purchasedDate = [df dateFromString: purchasedDateString];        
    int numberOfDays = [purchasedDate timeIntervalSinceNow] / (-86400.0);
        NSLog(@"%@",purchasedDate);
         NSLog(@"%@",numberOfDays);
    return (self.subscriptionDays > numberOfDays);        
   }
} 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:46:09.040

当您在沙盒中时，每月订阅每 5 分钟到期一次，并且在首次购买后 30 分钟后停止自动续订，所以不要沮丧，当您注意到它不再自动续订或在您之前过期时预期的。

# php - 使用 PHP 驱动程序查询 MongoDB 子集两层深度

> ID：10031464
> 
> 赞同：1
> 
> 时间：2012-04-05T15:24:47.060
> 
> 标签：php, json, facebook-graph-api, mongodb, mongodb-php

我已访问 Facebook Graph API 以获取一个 JSON 对象，该对象代表我的提要（我的 Facebook 墙）上的最新帖子。然后，我使用 PHP Mongo 驱动程序将其保存到名为 feeds 的 MongoDB 集合中。

```
//$post['feed']['data'] contains the Facebook JSON object of wall posts
//create a mongo instance
$mongo = new Mongo();
//access the feeds collection
$feeds = $mongo->changeup->feeds;
//dump the feed right into mongo
$feeds->insert($post['feed']['data']); 
```

这是读回放入 mongo 的整个对象后其中一个数组的样子。

我只给你看一个，但它给了我更多，每个索引，下一个是 [1] => Array() 等等......有些结构不同，因为有些包含 [story] ​​字段，其他包含 [message] 字段，有些包含两者。

```
Query:
$cursor = $feeds->find();

foreach ( $cursor as $feed ) { 
print_r($feed);
}

Result:
[0] => Array
        (
            [id] => 505212695_10150696450097696
            [from] => Array
                (
                    [name] => John Doe
                    [id] => 505212695
                )

            [story] => "Text of a story I posted on my wall..."
            [story_tags] => Array
                (
                    [38] => Array
                        (
                            [0] => Array
                                (
                                    [id] => 15212444
                                    [name] => John Doe
                                    [offset] => 38
                                    [length] => 10
                                    [type] => user
                                )

                        )

                )

            [type] => status
            [application] => Array
                (
                    [name] => Share_bookmarklet
                    [id] => 5085647995
                )

            [created_time] => 2012-04-04T05:51:21+0000
            [updated_time] => 2012-04-04T05:51:21+0000
            [comments] => Array
                (
                    [count] => 0
                )

) 
```

问题是我不想只找到整个集合，我只想找到那些说 [message] 和 [story] ​​字段的数组，然后只找到它们的内容，别无其他。

我正在尝试接收一个子集，两个级别的深度：

```
//this works, however, I'm only able to get the 0 array 
$cursor = $feeds->find( array(), array('0.story' => true) ); 
```

如何按所有数组过滤？

我希望我的最终结果如下所示：

```
Array
(
    [_id] => MongoId Object
        (
            [$id] => 4f7db4dd6434e64959000000
        )

    [0] => Array
        (
            [story] => "Text of a story I posted on my wall..."
        )
    [1] => Array
        (
            [story] => "Text of a story I posted on my wall..."
        )
    [2] => Array 
        (
            [story] => "Text of a story I posted on my wall..."
            [message] => "In this case message text exists as well..."
        )
    [3] => Array
        (
            [message] => "Text of a message I posted on my wall..."
        )

    etc...
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T17:06:32.863

我相信最初的问题始于每个提要文档的数据结构。请注意，您的对象只是一个 id，然后是递增数量的数字键，仅此而已。理想的做法是在顶层插入一个带有键和值的实际对象结构。目前，因为您直接将 facebook 数据直接转储到 mongo 而不对其进行格式化，驱动程序将您的数组映射到键/值。现在每个提要文档都有可变数量的匿名对象。

参考这个：[http ://www.php.net/manual/en/mongo.writes.php](http://www.php.net/manual/en/mongo.writes.php)

我认为您的提要文档应该是这样的：

```
{ 
    "_id" : ObjectId("4f7db4dd6434e64959000000"), 
    "posts" : 
    [
        {
            "story" : "Text of a story I posted on my wall...",
            "message" : "In this case message text exists as well...",
        },
        {
            "story" : "Text of a story I posted on my wall...",
            "message" : "In this case message text exists as well...",
        }
    ],
    "posts_meta1": "some val",
    "posts_meta2": "other data"
} 
```

请注意，它包含一个“posts”顶级键，下面是您的帖子对象数组。这解决了多个问题。你有一个顶级键来索引，而不是“数字”，你有一个更干净的根级别来添加更多的提要字段，你可以干净地实现你的查找查询。

一个简单的查找可能如下所示：

```
// Return all feed docs, and only include the posts.story field
db.feeds.find({}, {"posts.story": 1}) 
```

更高级的查询可能如下所示：

```
// Return an feed document that either contains a posts.story
// field, or, contains a posts.message field
db.feeds.find({
    $or: [ 
        {$exists: {"posts.story": true}}, 
        {$exists: {"posts.message": true} 
    ]
}) 
```

简而言之，您从 facebook 返回的数据应首先格式化为对象结构，然后插入 mongo。例如，日期应该作为正确的日期对象插入，而不是原始字符串：[http](http://www.php.net/manual/en/class.mongodate.php) ://www.php.net/manual/en/class.mongodate.php 。这允许您在 mongo 中执行基于日期的查询，并且 php 驱动程序还将确保来回转换它们，以便它们更适合您的语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T18:15:34.650

如果没有看到从 Facebook 发送的 JSON 数据，很难判断 story_tags 字段中的结构应该是什么样子。您可能需要解码来自 Facebook 的 JSON 并强制 json_decode 转换为 PHP 关联数组：

```
$ar = json_decode($post['feed']['data'], true); 
```

这里的 'true' 标志强制它将数据作为关联数组处理。

然后，您将插入如下：

```
$feeds->insert($ar); 
```

无论哪种方式，在将数据存储到数据库之前，我都倾向于将数据重组为更适合您需求的东西——这将使您能够更有效地使用索引。如果您确实需要存储来自 Facebook 的整个响应，您可以始终将其存储为嵌套对象：

```
$ar['raw'] = $post['feed']['data']; 
```

# python - Python 频率分布 (FreqDist / NLTK) 问题

> ID：10031470
> 
> 赞同：2
> 
> 时间：2012-04-05T15:25:02.340
> 
> 标签：python, nltk, frequency-distribution

我正在尝试将单词列表（标记化字符串）分解为每个可能的子字符串。然后我想对每个子字符串运行一个 FreqDist，以找到最常见的子字符串。第一部分工作正常。但是，当我运行 FreqDist 时，出现错误：

```
TypeError: unhashable type: 'list' 
```

这是我的代码：

```
import nltk

string = ['This','is','a','sample']
substrings = []

count1 = 0
count2 = 0

for word in string:
    while count2 <= len(string):
        if count1 != count2:
            temp = string[count1:count2]
            substrings.append(temp)
        count2 += 1
    count1 +=1
    count2 = count1

print substrings

fd = nltk.FreqDist(substrings)

print fd 
```

的输出`substrings`很好。这里是：

```
[['This'], ['This', 'is'], ['This', 'is', 'a'], ['This', 'is', 'a', 'sample'], ['is'], ['is', 'a'], ['is', 'a', 'sample'], ['a'], ['a', 'sample'], ['sample']] 
```

但是，我就是无法让 FreqDist 在其上运行。任何见解将不胜感激。在这种情况下，每个子字符串的 FreqDist 仅为 1，但该程序旨在在更大的文本样本上运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T15:41:23.510

我不完全确定您想要什么，但错误消息是说它想要对列表进行哈希处理，这通常表明它正在将其放入集合中或将其用作字典键。我们可以通过给它元组来解决这个问题。

```
>>> import nltk
>>> import itertools
>>> 
>>> sentence = ['This','is','a','sample']
>>> contiguous_subs = [sentence[i:j] for i,j in itertools.combinations(xrange(len(sentence)+1), 2)]
>>> contiguous_subs
[['This'], ['This', 'is'], ['This', 'is', 'a'], ['This', 'is', 'a', 'sample'],
 ['is'], ['is', 'a'], ['is', 'a', 'sample'], ['a'], ['a', 'sample'],
 ['sample']] 
```

但我们还有

```
>>> fd = nltk.FreqDist(contiguous_subs)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/nltk/probability.py", line 107, in __init__
    self.update(samples)
  File "/usr/local/lib/python2.7/dist-packages/nltk/probability.py", line 437, in update
    self.inc(sample, count=count)
  File "/usr/local/lib/python2.7/dist-packages/nltk/probability.py", line 122, in inc
    self[sample] = self.get(sample,0) + count
TypeError: unhashable type: 'list' 
```

但是，如果我们将子序列制作成元组：

```
>>> contiguous_subs = [tuple(sentence[i:j]) for i,j in itertools.combinations(xrange(len(sentence)+1), 2)]
>>> contiguous_subs
[('This',), ('This', 'is'), ('This', 'is', 'a'), ('This', 'is', 'a', 'sample'), ('is',), ('is', 'a'), ('is', 'a', 'sample'), ('a',), ('a', 'sample'), ('sample',)]
>>> fd = nltk.FreqDist(contiguous_subs)
>>> print fd
<FreqDist: ('This',): 1, ('This', 'is'): 1, ('This', 'is', 'a'): 1, ('This', 'is', 'a', 'sample'): 1, ('a',): 1, ('a', 'sample'): 1, ('is',): 1, ('is', 'a'): 1, ('is', 'a', 'sample'): 1, ('sample',): 1> 
```

那是你要找的吗？

# mysql - MySQL - 整理

> ID：10031475
> 
> 赞同：5
> 
> 时间：2012-04-05T15:25:18.560
> 
> 标签：mysql, database

当我创建一个数据库时，我被要求选择默认排序，当我创建一个表时，我被要求选择排序。utf8_general_ci 还是...拉丁语...？区分哪一个是正确的依据是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T15:52:46.667

[排序](http://dev.mysql.com/doc/refman/5.0/en/charset-general.html)规则确定字符的排序顺序，它是一组用于比较字符集中字符的规则。任何给定的[字符集](http://dev.mysql.com/doc/refman/5.0/en/charset-mysql.html)总是至少有一个排序规则。排序规则名称**ci**、**cs**和**bin**的结尾分别表示**不区分大小写**、**区分大小写**和**二进制**。类似的二进制排序规则`utf8_bin`通常也区分大小写，因为它根据字符串的数值进行二进制字符串比较。

这意味着如果要进行不区分大小写的选择查询，其中 a 和 A 没有区别，则应使用以 ci 结尾的排序规则。如果要进行区分大小写的查询，其中 a 和 A 不同，则应使用以 cs 或 bin 结尾的排序规则。

如果没有选择，则应用标准级别。MySQL 中有各种级别的排序规则，例如可以显示为

```
mysql> show variables like '%collation%';
+----------------------+-------------------+
| Variable_name        | Value             |
+----------------------+-------------------+
| collation_connection | utf8_general_ci   |
| collation_database   | latin1_swedish_ci |
| collation_server     | latin1_swedish_ci |
+----------------------+-------------------+ 
```

# apache - 如何通过 htaccess 禁用 apache 中的访问日志？

> ID：10031476
> 
> 赞同：10
> 
> 时间：2012-04-05T15:25:20.260
> 
> 标签：apache, .htaccess

我在一个网站上工作，客户希望网站非管理员部分的用户完全匿名。

我不太了解 apache，但是有没有办法通过 .htaccess 文件禁用日志记录？（以便它可以与站点一起移植，而不依赖于特定的服务器设置）

我[找到](http://www.mydigitallife.info/how-to-disable-and-turn-off-apache-httpd-access-and-error-log/)了 httpd.conf 的说明，但我不知道如何复制 .htaccess 文件中的注释行

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T15:26:19.000

答案是大大的NO。不幸的是，您无法从 .htaccess 控制 Apache 日志记录。

# gnuplot - gnuplot 的平均值和置信区间

> ID：10031478
> 
> 赞同：1
> 
> 时间：2012-04-05T15:25:36.123
> 
> 标签：gnuplot, confidence-interval

我有这样的原始数据：

```
x1      val1
x1      val2
x1      val3
x1      val4
x2      val5
x2      val6
x2      val7
x3      val8
... 
```

我想用 x1,x2,...xn 作为 X 值和 average(val1,val2,val3,val4), average(val5,val6... 作为 Y 值制作一个线图。

*   在gnuplot中可以吗？
*   我可以显示置信区间吗？
*   我可以忽略每个 x 中的最高值和最低值吗？

谢谢！！

PD：[这是一个用 PROC GPLOT 做的例子](http://www.wuss.org/proceedings09/09WUSSProceedings/papers/anl/ANL-Rutledge.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:59:40.737

一般来说，gnuplot 不能很好地平均化。但是，在您的情况下，您可能很幸运，如果您的数据按 X 值排序并且您想对具有相同 X 值的行进行平均，您可以使用“平滑”选项告诉 gnuplot 进行平均/求和。请参阅“帮助平滑独特”和“帮助平滑频率”。所以你应该能够做类似的事情

plot 'raw_data.txt' u 1:2 平滑独特

我不知道如何在不费力的情况下跳过 gnuplot 中的点。要进行更复杂的计算，您始终可以编写自己的数据处理函数，然后在数据上运行它并随后绘制它，例如：

[http://gnuplot-tricks.blogspot.com/2010/01/further-new-features-in-gnuplot-44.html](http://gnuplot-tricks.blogspot.com/2010/01/further-new-features-in-gnuplot-44.html)

或者

[http://gnuplot-tricks.blogspot.com/search?q=average](http://gnuplot-tricks.blogspot.com/search?q=average)

但这些事情可能最好由外部脚本处理。

# joomla - 通用 URL 路由

> ID：10031479
> 
> 赞同：1
> 
> 时间：2012-04-05T15:25:43.067
> 
> 标签：joomla

我最近接手了一个个人 Joomla 项目，因为另一位开发人员放弃了它，我在掌握一些基础知识时遇到了困难。
我曾在其他几个 Web 开发框架中工作过，但 Joomla 范式似乎非常不同，并且文档以完全不同的方式呈现。

上一个开发者的根 URL (site.com) 和 site.com/index.php 为文章“home”提供服务，
并让所有其他 URL (site.com/gallery、site.com/contact) 为文章提供服务'东西'。我只是不知道在哪里确定文章 X 将为 URL Y 提供服务。
我相信该项目是 Joomla 1.6。
一个直接的答案或一个好的文章链接就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:52:48.520

如果要更改重写的 URL，请转到同一屏幕（菜单 | 主菜单 | 菜单项）并将“别名”字段更改为新的必需值。

如果您需要在重写之前查看原始 URL，请转到同一位置并查看“链接”字段。“菜单项类型”将告诉您菜单指向的对象类型。

其中一些确实取决于您使用的重写方式。以上假设它只是 Joomla 默认值。其他工具如 joomsef 可以覆盖这些东西。

# java - GlassFish JSF：IndexOutOfBoundsException 跟踪中没有个性化的类

> ID：10031482
> 
> 赞同：3
> 
> 时间：2012-04-05T15:25:55.983
> 
> 标签：java, jsf, jsf-2, glassfish-3

我正在运行的 GlassFish 服务器出现问题。一段时间后，它似乎“崩溃”或停止响应，尤其是在重负载下。我已经回去检查我的应用程序，并确保不是应用程序本身在创建它。我一直在浏览服务器的日志文件并一直发现这个错误：

```
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.ArrayList.rangeCheck(ArrayList.java:604)
    at java.util.ArrayList.get(ArrayList.java:382)
    at javax.faces.component.AttachedObjectListHolder.restoreState(AttachedObjectListHolder.java:165)
    at javax.faces.component.UIComponentBase.restoreState(UIComponentBase.java:1560)
    at javax.faces.component.UIOutput.restoreState(UIOutput.java:256)
    at com.sun.faces.application.view.StateManagementStrategyImpl$2.visit(StateManagementStrategyImpl.java:267)
    at com.sun.faces.component.visit.FullVisitContext.invokeVisitCallback(FullVisitContext.java:151)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1590)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:254)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:188)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:148)
    at javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:303)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.VirtualServerPipeline.invoke(VirtualServerPipeline.java:131)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:328)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

**编辑**：其他日志：

```
java.util.zip.ZipException: Not in GZIP format
    at java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:164)
    at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:78)
    at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:90)
    at com.sun.faces.renderkit.ClientSideStateHelper.doGetState(ClientSideStateHelper.java:231)
    at com.sun.faces.renderkit.ClientSideStateHelper.getState(ClientSideStateHelper.java:198)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.getState(ResponseStateManagerImpl.java:100)
    at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:227)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:188)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:148)
    at javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:303)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.VirtualServerPipeline.invoke(VirtualServerPipeline.java:131)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:328)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

和 ：

```
javax.faces.application.ViewExpiredException: viewId:/index.xhtml - View /index.xhtml could not be restored.
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:205)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.VirtualServerPipeline.invoke(VirtualServerPipeline.java:131)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:328)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

还 ：

```
java.lang.ArrayIndexOutOfBoundsException: 4
    at javax.faces.component.UIComponentBase.restoreState(UIComponentBase.java:1576)
    at com.sun.faces.application.view.StateManagementStrategyImpl$2.visit(StateManagementStrategyImpl.java:267)
    at com.sun.faces.component.visit.FullVisitContext.invokeVisitCallback(FullVisitContext.java:151)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1590)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIForm.visitTree(UIForm.java:344)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:254)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:188)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:148)
    at javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:303)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.VirtualServerPipeline.invoke(VirtualServerPipeline.java:131)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:328)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

因此，与任何 Java 错误一样，我会沿着堆栈跟踪查找它是从哪里生成的。我遇到的问题是，我所做的任何类都没有出现在跟踪中......这让我相信（我可能错了）这不是从我的代码生成的——即使它没有感觉我的代码几乎是这个错误的根源。

对此的任何意见将不胜感激。

我正在运行 Glasffish Open Source V.3.1 和 JSF 2.0

*我不知道如何找到这些错误的来源。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T22:52:18.210

我有一个与您的第一个示例相同的堆栈跟踪，并通过确保我使用的支持 bean 正在实现 Serializable 来解决它。

我通过查看 GlassFish 服务器日志发现了这一点，并注意到：

```
WARNING: JSF1063: WARNING! Setting non-serializable attribute value into HttpSession (key: user, value class: proj4.beans.UserBean). 
```

这导致我[JSF 支持 bean 应该是可序列化的？](https://stackoverflow.com/questions/3372687/jsf-backing-bean-should-be-serializable).

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-05T13:22:05.317

backing bean应该实现Serializable，这解决了这个问题

# python - Python：如何匹配字符串 - 仅当下一行具有给定字符串时？

> ID：10031490
> 
> 赞同：0
> 
> 时间：2012-04-05T15:26:23.377
> 
> 标签：python, regex

我有一个文本文件，如下所示：

```
node13 
    state = free 
np = 8 
properties = beta,eightcores 
ntype = cluster 
status = opsys=linux,uname=Linux node13 2.6.27.19-5-default #1 SMP 2009-02-28 04:40:21 +0100 x86_64,sessions=? 15201,nsessions=? 01,nusers=0,idletime=6837317,totmem=20506268kb,availmem=20259728kb,physmem=20506268kb,ncpus=8,loadave=0.00,gres=,netload=17130666575,se=free,jobs=,varattr=,rectime=1333639375 

node14 
    state = job-exclusive 
np = 8 
properties = beta,eightcores 
ntype = cluster 
```

我只想在节点空闲的情况下获取节点。为此，我必须制作一个正则表达式，`node(..)`仅当以下行具有`state = free`. 你能帮我解决这个问题吗？

**编辑**：

到目前为止没有任何效果。可能是因为我没有在文件中阅读，但是

```
proc = subprocess.Popen("pbsnodes", stdout=subprocess.PIPE)
listOfFreeNodes = proc.stdout.read() 
```

它会以某种方式损害解决方案吗？这是完整的`pbsnodes`输出：

```
node01                                                   
     state = free                                        
     np = 8                                              
     properties = alpha,eightcores                       
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node01 2.6.27.19-5-01,nusers=0,idletime=861913,totmem=16432576kb,availmem=16=free,jobs=,varattr=,rectime=1333641123                  

node02                                                   
     state = free                                        
     np = 8                                              
     properties = alpha,eightcores                       
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node02 2.6.27.19-5-nusers=2,idletime=5357510,totmem=16432576kb,availmem=1617ree,jobs=,varattr=,rectime=1333641107                    

node03                                                   
     state = free                                        
     np = 8                                              
     properties = alpha,eightcores                       
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node03 2.6.27.19-5-s=1,idletime=8564681,totmem=16432576kb,availmem=16029924kobs=60966.hpchead.linux,varattr=,rectime=1333641119      

node04                                                   
     state = free                                        
     np = 8                                              
     properties = alpha,eightcores                       
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node04 2.6.27.19-5-01,nusers=0,idletime=8564678,totmem=16432576kb,availmem=1e=free,jobs=,varattr=,rectime=1333641124                 

node05                                                   
     state = free                                        
     np = 8                                              
     properties = alpha,eightcores                       
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node05 2.6.27.19-5-01,nusers=0,idletime=2072593,totmem=16432652kb,availmem=1=free,jobs=,varattr=,rectime=1333641091                  

node06                                                   
     state = free                                        
     np = 8                                              
     properties = alpha,eightcores                       
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node06 2.6.27.19-5-s=1,idletime=9038,totmem=16432576kb,availmem=16200960kb,p,varattr=,rectime=1333641096                             

node07                                                   
     state = free                                        
     np = 8                                              
     properties = alpha,eightcores                       
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node07 2.6.27.19-5-s=1,idletime=8564671,totmem=16432576kb,availmem=16173848kobs=,varattr=,rectime=1333641134                         

node08                                                   
     state = free                                        
     np = 8                                              
     properties = alpha,eightcores                       
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node08 2.6.27.19-5- 21356,nsessions=5,nusers=1,idletime=8564604,totmem=1643219260329746,state=free,jobs=,varattr=,rectime=1333641095 

node09                                                   
     state = free                                        
     np = 8                                              
     properties = alpha,eightcores                       
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node09 2.6.27.19-5-01,nusers=0,idletime=8564648,totmem=16432552kb,availmem=1e=free,jobs=,varattr=,rectime=1333641126                 

node10                                                   
     state = free                                        
     np = 8                                              
     properties = alpha,eightcores                       
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node10 2.6.27.19-5-2,nsessions=5,nusers=1,idletime=6821493,totmem=16432552kb036941,state=free,jobs=,varattr=,rectime=1333641133      

node11                                                   
     state = free                                        
     np = 8                                              
     properties = alpha,eightcores                       
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node11 2.6.27.19-5-01,nusers=0,idletime=8564599,totmem=16432556kb,availmem=1e=free,jobs=,varattr=,rectime=1333641120                 

node12                                                   
     state = free                                        
     np = 8                                              
     properties = alpha,eightcores                       
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node12 2.6.27.19-5-01,nusers=0,idletime=8564627,totmem=16432556kb,availmem=1e=free,jobs=,varattr=,rectime=1333641121                 

node13                                                   
     state = free                                        
     np = 8                                              
     properties = beta,eightcores                        
     ntype = cluster                                     
     status = opsys=linux,uname=Linux node13 2.6.27.19-5-01,nusers=0,idletime=6839072,totmem=20506268kb,availmem=2e=free,jobs=,varattr=,rectime=1333641130                 

node14                                                   
     state = job-exclusive                               
     np = 8                                              
     properties = beta,eightcores                        
     ntype = cluster                                     
     jobs = 0/66481.hpchead.linux, 1/66481.hpchead.linux,chead.linux, 6/66481.hpchead.linux, 7/66481.hpchead.linux
     status = opsys=linux,uname=Linux node14 2.6.27.19-5-,nusers=1,idletime=8568052,totmem=24635060kb,availmem=206free,jobs=66481.hpchead.linux,varattr=,rectime=1333641132

node15                                                   
     state = job-exclusive                               
     np = 8                                              
     properties = beta,eightcores                        
     ntype = cluster                                     
     jobs = 0/66482.hpchead.linux, 1/66482.hpchead.linux,chead.linux, 6/66482.hpchead.linux, 7/66482.hpchead.linux
     status = opsys=linux,uname=Linux node15 2.6.27.19-5-,nusers=1,idletime=8567636,totmem=24635012kb,availmem=212free,jobs=66482.hpchead.linux,varattr=,rectime=1333641092

node16                                                   
     state = job-exclusive                               
     np = 8                                              
     properties = beta,eightcores                        
     ntype = cluster                                     
     jobs = 0/66481.hpchead.linux, 1/66481.hpchead.linux,chead.linux, 6/66481.hpchead.linux, 7/66481.hpchead.linux
     status = opsys=linux,uname=Linux node16 2.6.27.19-5-=1,idletime=8564418,totmem=24634928kb,availmem=20700104kbbs=66481.hpchead.linux,varattr=,rectime=1333641117       

node17                                                   
     state = job-exclusive                               
     np = 8                                              
     properties = beta,eightcores                        
     ntype = cluster                                     
     jobs = 0/66482.hpchead.linux, 1/66482.hpchead.linux,chead.linux, 6/66482.hpchead.linux, 7/66482.hpchead.linux
     status = opsys=linux,uname=Linux node17 2.6.27.19-5-s=1,idletime=6824915,totmem=24634928kb,availmem=20598068kbs=66482.hpchead.linux,varattr=,rectime=1333641113       

node21                                                   
     state = job-exclusive                               
     np = 12                                             
     properties = blade                                  
     ntype = cluster                                     
     jobs = 0/66483.hpchead.linux, 1/66483.hpchead.linux,chead.linux, 6/66483.hpchead.linux, 7/66483.hpchead.linux.hpchead.linux                                           
     status = opsys=linux,uname=Linux node21 2.6.27.19-5-,nusers=1,idletime=8569176,totmem=26790348kb,availmem=203e=free,jobs=66483.hpchead.linux,varattr=,rectime=13336411

node22                                                   
     state = job-exclusive                               
     np = 12                                             
     properties = blade                                  
     ntype = cluster                                     
     jobs = 0/66475.hpchead.linux, 1/66475.hpchead.linux,chead.linux, 6/66475.hpchead.linux, 7/66475.hpchead.linux.hpchead.linux                                           
     status = opsys=linux,uname=Linux node22 2.6.27.19-5-users=1,idletime=8569178,totmem=26790348kb,availmem=21384free,jobs=66475.hpchead.linux,varattr=,rectime=1333641118

node23                                                   
     state = job-exclusive                               
     np = 12                                             
     properties = blade
     ntype = cluster
     jobs = 0/66484.hpchead.linux, 1/66484.hpchead.linux, 2/66484.hpchead.linux, 3/66484.hpchead.linux, 4/66484.hpchead.linux, 5/66484.hpchead.linux, 6/66484.hpchead.linux, 7/66484.hpchead.linux, 8/66484.hpchead.linux, 9/66484.hpchead.linux, 10/66484.hpchead.linux, 11/66484.hpchead.linux
     status = opsys=linux,uname=Linux node23 2.6.27.19-5-default #1 SMP 2009-02-28 04:40:21 +0100 x86_64,sessions=10309 10370,nsessions=2,nusers=1,idletime=8569255,totmem=26790348kb,availmem=20165484kb,physmem=24685876kb,ncpus=12,loadave=12.01,gres=,netload=21742922098,state=free,jobs=66484.hpchead.linux,varattr=,rectime=1333641120

node24
     state = job-exclusive
     np = 12
     properties = blade
     ntype = cluster
     jobs = 0/66485.hpchead.linux, 1/66485.hpchead.linux, 2/66485.hpchead.linux, 3/66485.hpchead.linux, 4/66485.hpchead.linux, 5/66485.hpchead.linux, 6/66485.hpchead.linux, 7/66485.hpchead.linux, 8/66485.hpchead.linux, 9/66485.hpchead.linux, 10/66485.hpchead.linux, 11/66485.hpchead.linux
     status = opsys=linux,uname=Linux node24 2.6.27.19-5-default #1 SMP 2009-02-28 04:40:21 +0100 x86_64,sessions=11157 11218,nsessions=2,nusers=1,idletime=8569254,totmem=26790348kb,availmem=21489804kb,physmem=24685876kb,ncpus=12,loadave=12.05,gres=,netload=18486923435,state=free,jobs=66485.hpchead.linux,varattr=,rectime=1333641114

node25
     state = job-exclusive
     np = 12
     properties = blade
     ntype = cluster
     jobs = 0/66469.hpchead.linux, 1/66469.hpchead.linux, 2/66469.hpchead.linux, 3/66469.hpchead.linux, 4/66469.hpchead.linux, 5/66469.hpchead.linux, 6/66469.hpchead.linux, 7/66469.hpchead.linux, 8/66469.hpchead.linux, 9/66469.hpchead.linux, 10/66469.hpchead.linux, 11/66469.hpchead.linux
     status = opsys=linux,uname=Linux node25 2.6.27.19-5-default #1 SMP 2009-02-28 04:40:21 +0100 x86_64,sessions=6711 6772,nsessions=2,nusers=1,idletime=8569282,totmem=26790348kb,availmem=21082316kb,physmem=24685876kb,ncpus=12,loadave=12.00,gres=,netload=15199518313,state=free,jobs=66469.hpchead.linux,varattr=,rectime=1333641095 
```

**编辑**：

感谢所有回答的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:30:22.697

这应该返回正确的节点值

```
r'node\d+(?=[^\n]*\n\s*state\s*=\s*free)' 
```

这使用积极的前瞻来窥视行尾，但不捕获它找到的任何东西。它只匹配节点值。

```
l = re.findall(r'node\d+(?=[^\n]*\n\s*state\s*=\s*free)', s)
print l
>>> ['node13'] 
```

**编辑**：受@hexparrot 评论的启发，我意识到有一种更简单的方法。这个正则表达式`r'node\d+(?=\s*state\s*=\s*free)'`更简单，也可以工作，即使它没有明确搜索换行符（因为`\s`包含 EOL 字符）。但是......它也不保证`state=free`会在**以下行**中找到，如 OP 的要求中所述。它也将`node99 state=free`在同一行上匹配。所以明确地寻找`\n`更好的满足OP的要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T15:42:11.327

如果您可以依赖生成的文件是可靠构造的（如，遵循与您所示相同的格式），则正则表达式有时比必要的要重一些。

因此，这是一种使用简单迭代的方法：

```
with open('yourfile.txt', 'r') as fp:
    node_dict = {}
    node = None
    for line in fp:
        if line[0:4] == 'node':
            node = line.strip()
            node_dict[node] = 0
        elif "state" in line:
            node_dict[node] = line.split('=')[1].strip()

print node_dict 
```

退货

```
{'node13': 'free', 'node14': 'job-exclusive'} 
```

然后很容易获得“免费”节点：

```
>>> print [k for k,v in node_dict.items() if v == 'free']
['node13'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T15:42:59.517

我建议先将文本解析为 python 结构，然后再操作该结构。正则表达式对于这项工作来说太复杂太脆弱了。考虑：

```
doc = """
node13 
    state = free 
np = 8 
properties = beta,eightcores 
ntype = cluster 
status = opsys=linux,uname=Linux node13 2.6.27.19-5-default etc

node14 
    state = job-exclusive 
np = 8 
properties = beta,eightcores 
ntype = cluster
"""

data = {}
lastkey = None
for line in map(str.strip, doc.splitlines()):
    if ' = ' in line and lastkey:
        k, v = line.split(' = ', 1)
        data[lastkey][k] = v
    elif len(line):
        lastkey = line
        data[lastkey] = {} 
```

这将创建一个像这样的字典：

```
{'node13': {'np': '8',
            'ntype': 'cluster',
            'properties': 'beta,eightcores',
            'state': 'free',
            'status': 'opsys=linux,uname=Linux node13 2.6.27.19-5-default etc'},
 'node14': {'np': '8',
            'ntype': 'cluster',
            'properties': 'beta,eightcores',
            'state': 'job-exclusive'}} 
```

你可以用普通的python方式操作它：

```
 free_nodes = [v for v in data.values() if v['state'] == 'free'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T15:32:32.487

您可以使用[re.DOTALL](http://docs.python.org/library/re.html#re.DOTALL)标志，以便`.`匹配包括换行在内的所有内容。这是一个示例

```
>>> st="""
node13 
    state = free 
np = 8 
properties = beta,eightcores 
ntype = cluster 
status = opsys=linux,uname=Linux node13 2.6.27.19-5-default #1 SMP 2009-02-28 04:40:21 +0100 x86_64,sessions=? 15201,nsessions=? 01,nusers=0,idletime=6837317,totmem=20506268kb,availmem=20259728kb,physmem=20506268kb,ncpus=8,loadave=0.00,gres=,netload=17130666575,se=free,jobs=,varattr=,rectime=1333639375 

node14 
    state = job-exclusive 
np = 8 
properties = beta,eightcores 
ntype = cluster
"""

>>> re.findall("(node\d+).*?state.*?free",st,re.DOTALL)
['node13'] 
```

请注意，这也可以在没有正则表达式的情况下完成

```
>>> stlines=st.splitlines()
>>> [stlines[i]  for i in xrange(0,len(stlines)-1) if stlines[i+1].partition("=")[-1].strip() == 'free']
['node13']
>>> 
```

注意***如果您需要更健壮的正则表达式，正如弗朗西斯在他的示例中所示，您可以使用以下

```
>>> re.findall("(node\d+).*?state[ ]*=[ ]*free",st,re.DOTALL)
['node13']
>>> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T15:52:05.770

我同意@thg435 的观点，即正则表达式对于这项工作来说太强大了。我更喜欢一个非常简单的解决方案：

```
lines = data.split('\n')
num_lines = len(lines)
[lines[i] for i in range(numlines - 1) if 'state = free' in lines[i+1]] 
```

这确实抓住了您想要做的事情的本质：如果下一行 ( `lines[i+1]`) 包含所需的文本，则当前行（可能是节点的名称）进入列表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-05T18:24:52.363

向后看往往比向前看更容易。因此，当下一行包含某些内容时，不要考虑获取当前行；当*当前*行包含某些内容时，您想获取*上一行。*以这些术语为框架，很容易构思和实施：

 *```
def find_free_node(doc):
    prevline = ""
    for line in doc.splitlines():
       if line.strip() == "state = free" and previine.startswith("node"):
           return prevline.strip()
       prevline = line 
```

另一种方法是跟踪您所在的节点，而不是前一行。即使该`state = free`行没有立即跟随节点名称行，这也将起作用。

```
def find_free_node(doc):
    node = ""
    for line in doc.splitlines():
        if line.startswith("node"):
            node = line.strip()
        elif line.strip() = "state = free" and node:
            return node 
```

对我来说，这些比基于多行正则表达式的解决方案要清晰得多。*

# django - 将查询集序列化为 JSON 需要很多时间。我该如何调试呢？

> ID：10031492
> 
> 赞同：1
> 
> 时间：2012-04-05T15:26:40.087
> 
> 标签：django, json, django-serializer

我将 10000 个批量的 Django 模型对象序列化为 json 并发送它们。我正在使用[DjangoFullSerializers](http://code.google.com/p/wadofstuff/wiki/DjangoFullSerializers)从 wadofstuff 来执行此操作，因为我还希望将相关字段与我的对象一起序列化。在服务器负载高峰期间，一批大约需要 9-10 分钟才能完成。获取 10000 个 MySQL 对象需要 1-2 秒。我不确定 JSON 的序列化可能会采取什么措施来承担如此多的开销。我尝试过使用 simplejson（它没有提供序列化相关字段的选项），但是花费的时间仍然足够长。我不确定，但我认为，wadofstuff 在屏幕后面使用 simplejson。我无法使用 Django 配置 cjson，因此无法对此进行测试。但是我怎样才能优化配置或改进当前设置的使用。直觉上，我觉得，一旦数据被提取到内存中，将 10000 个对象转换为 JSON 应该不会花这么长时间。我正在附加使用 cProfile 获取的配置文件转储。请看一下并提出一些建议/提示/帮助。

附件：[cProfile 转储文件](http://cl.ly/3R0m2P0l3e2h1A3u2v3H)

提前致谢。

更新 1：还编写了我用于测试的代码。我在 shell 中运行它。

```
import cProfile
from dashboard.models import *
from django.core import serializers
from datetime import datetime

start = end = None
def myfunc():
 global start, end
 start = datetime.now()
 us = UserPermission.objects.filter(username = 54).values_list('district_operated', flat=True)
 villages = list(Village.objects.filter(block__district__id__in = us))
 offset = 0
 limit = 10000
 screenings = Screening.objects.select_related('village').filter(village__in = villages).distinct().order_by("-id")[offset:limit]
 x = list(screenings)
 json_subcat = serializers.serialize("json", screenings, relations=('village',))
 end = datetime.now()

cProfile.runctx("myfunc()", globals(), locals(), 'dump.profile') 
```

# ios - 在 iOS 中切换 UIViewController

> ID：10031496
> 
> 赞同：0
> 
> 时间：2012-04-05T15:26:57.423
> 
> 标签：ios, uiviewcontroller

我有三个 UIViewController ：A，B，C

我从 A 到 B

我从 B 到 C

我怎样才能从C goBackTo A 不通过B？

```
//in a.m
B* b =[B alloc] init];
[self presentModalViewController:b animated:YES];
[b release];
//in b.m
C* c=[C alloc] init];
[self presentModalViewController:c animated YES];
[c release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:34:07.353

我实际上不确定这是否可以在没有导航控制器的情况下工作。如果没有，您可以使用延迟关闭 b 和 c。

```
[self popToRootViewControllerAnimated:YES]; 
```

**编辑：**

如下所述，这是行不通的。在延迟内使用`[self dismissmodalviewcontroller:animated:]`来做你想做的事。

# javascript - 如何在 html5 本地存储中保存 html、javascript 和 css 文件？

> ID：10031504
> 
> 赞同：6
> 
> 时间：2012-04-05T15:27:29.637
> 
> 标签：javascript, css, html

有没有办法在 html5 本地存储中存储 html、javascript 和 css 文件？

我想让我的网络应用程序更快！

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T15:30:10.990

您想为此使用应用程序缓存，而不是 localStorage：

[http://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:29:41.873

您不使用 HTML5 本地存储来存储 CSS/JS 文件，而是[缓存](http://www.mnot.net/cache_docs/)它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:30:44.763

我建议在客户端和服务器端使用缓存而不是存储在本地存储中，这样您可以控制何时更新（使缓存失效），您还可以考虑使用 CDN 来交付静态内容，如图像、js、css

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T16:17:40.053

即使它不是最好的解决方案，也可以使用本地存储缓存大部分接口。[Christian Heilmann 在他2010 年的 24Ways 文章](http://24ways.org/2010/html5-local-storage)中讨论了很多想法。请查看[此截屏视频](http://screenr.com/JHr)，了解您所想的完整示例。

请注意，要将图像缓存在本地存储中，您需要先[对它们进行 Base 64 编码](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T15:32:47.253

本地存储是一种键值存储，您应该更喜欢存储数据对象 (json) 或单个值，如字符串或数字。不要将表示层保存在里面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-28T03:55:37.603

You can absolutely use it.

When you configure your cache fot the browser to checks if a file has changed or not it will request a file and the CDN will respond with 304 status code which means the file in the browser cache can be used. However this still requires an HTTP request. You can also use etag or expires so it doesn't do that.

However it could happen that you load external files from sites where you have no control over the header. In that case to not have the http request and 304 response you could save time by using local storage.

# sql-server - Sql Server - 如何获取上次服务器重启（DMV 重置日期/时间）

> ID：10031508
> 
> 赞同：9
> 
> 时间：2012-04-05T15:27:59.780
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, dmv

我正在对 Glenn Berry 出色的 DMV 查询进行一些修改！

但是，我想将“上次服务器重启”添加到结果集中，或者更具体地说，重置（所有，特定）DMV 的统计信息的日期/时间。

由于在查看统计数据时了解上次重置非常重要，因此我想绝对确保日期/时间准确并显示。

问题：如何获得最准确的日期/时间，何时重置/所有 DMV 统计信息？

谢谢！-D

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T22:13:42.153

```
SELECT sqlserver_start_time FROM sys.dm_os_sys_info 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-16T15:02:32.127

使用先前的问题（不同的关键词），我最终使用了这种方法。与往常一样，由个人决定什么对他们来说是“最好的”！

SELECT create_date FROM sys.databases WHERE name = 'tempdb'

来源：[查看sql server服务运行了多长时间，来自t-sql](https://stackoverflow.com/questions/1036824/find-out-how-long-the-sql-server-service-has-been-running-from-t-sql)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T15:44:50.560

这将起作用，但您必须知道服务名称，它也仅适用于 R2 及更高版本

```
SELECT last_startup_time 
FROM   sys.dm_server_services 
WHERE  servicename = "Your Service name" 
```

尽管这并不完全准确，因为您还可以通过 DB detach 或 DB close 重置 DB 特定视图。

还有[两个可以](https://stackoverflow.com/a/362243/119477)在实时数据库上重置的视图`sys.dm_os_latch_stats`和`sys.dm_os_wait_stats`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-17T10:04:38.863

> 有很多方法可以检查 SQL Server 上次重新启动的时间。
> 
> 下面提到的 SQL 查询可用于快速找出服务器重启日期时间。

```
 SELECT sqlserver_start_time FROM sys.dm_os_sys_info;  

SELECT login_time FROM sys.dm_exec_sessions WHERE session_id = 1;  

 select start_time from sys.traces where is_default = 1  ;

 SELECT crdate FROM sysdatabases WHERE name='tempdb'  ;

 SELECT create_date FROM sys.databases WHERE name = 'tempdb' ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-04T17:44:58.490

有多种方法可以找出 SQL Server 重新启动时间。以下是返回服务器重启日期的代码：

```
SELECT sqlserver_start_time FROM sys.dm_os_sys_info;  
SELECT login_time FROM sys.dm_exec_sessions WHERE session_id = 1; 
SELECT start_time from sys.traces where is_default = 1;
SELECT crdate FROM sysdatabases WHERE name='tempdb';
SELECT create_date FROM sys.databases WHERE name = 'tempdb'; 
```

# android - BaseAdapter.notifyDatasetChanged() 不更新 ListView

> ID：10031509
> 
> 赞同：10
> 
> 时间：2012-04-05T15:28:06.323
> 
> 标签：android, listview, baseadapter

为什么当我调用 notifyDatasetChanged() 时我的列表视图没有更新？我可以让它显示数据的唯一方法是，再次在 ListView 上调用 setAdatper() ......我也尝试通过 runOnUIThread() 调用它，它没有改变任何东西

**适配器**

```
/**
 * Adapter to provide the data for the online scores
 * 
 * @author soh#zolex
 *
 */
public class OnlineScoresAdapter extends BaseAdapter {

    private Context context;
    private List<ScoreItem> scores = new ArrayList<ScoreItem>();

    /**
     * Constructor
     * 
     * @param Context context
     */
    public OnlineScoresAdapter(Context context) {

        this.context = context;
    }

    /**
     * Add an item to the adapter
     * 
     * @param item
     */
    public void addItem(ScoreItem item) {

        this.scores.add(item);
    }

    /**
     * Get the number of scores
     * 
     * @return int
     */
    public int getCount() {

        return this.scores.size();
    }

    /**
     * Get a score item
     * 
     * @param int pos
     * @return Object
     */
    public Object getItem(int pos) {

        return this.scores.get(pos);
    }

    /**
     * Get the id of a score
     * 
     * @param in pos
     * @retrn long
     */
    public long getItemId(int pos) {

        return 0;
    }

    /**
     * Get the type of an item view
     * 
     * @param int pos
     * @return int
     */
    public int getItemViewType(int arg0) {

        return arg0;
    }

    /**
     * Create the view for a single list item.
     * Load it from an xml layout.
     * 
     * @param int pos
     * @param View view
     * @param ViewGroup viewGroup
     * @return View
     */
    public View getView(int pos, View view, ViewGroup group) {

        LinearLayout layout;
        if (view == null) {

            layout = (LinearLayout)View.inflate(this.context, R.layout.scoreitem, null);

        } else {

            layout = (LinearLayout)view;
        }

        TextView position = (TextView)layout.findViewById(R.id.pos);
        TextView time = (TextView)layout.findViewById(R.id.time);
        TextView player = (TextView)layout.findViewById(R.id.player);
        TextView createdAt = (TextView)layout.findViewById(R.id.created_at);

        ScoreItem item = (ScoreItem)getItem(pos);
        player.setText(item.player);
        position.setText(String.valueOf(new Integer(item.position)) + ".");
        time.setText(String.format("%.4f", item.time));
        createdAt.setText(item.created_at);

        return layout;
    }

    /**
     * Get the number of different views
     * 
     * @return int
     */
    public int getViewTypeCount() {

        return 1;
    }

    /**
     * Return wheather the items have stable IDs or not
     * 
     * @return boolean
     */
    public boolean hasStableIds() {

        return false;
    }

    /**
     * Return wheather the list is empty or not
     * 
     * @return boolean
     */
    public boolean isEmpty() {

        return this.scores.size() == 0;
    }

    /**
     * No need of a data observer
     * 
     * @param DataSetObserver arg0
     * @return void
     */
    public void registerDataSetObserver(DataSetObserver arg0) {

    }

    /**
     * No need of a data observer
     * 
     * @param DataSetObserver arg0
     * @return void
     */
    public void unregisterDataSetObserver(DataSetObserver arg0) {

    }

    /**
     * No item should be selectable
     * 
     * @return boolean
     */
    public boolean areAllItemsEnabled() {

        return false;
    }

    /**
     * No item should be selectable
     * 
     * @param int pos
     * @return boolean
     */
    public boolean isEnabled(int arg0) {

        return false;
    }
} 
```

**活动**

XMLLoaderThread 工作正常，它只是 notifyDatasetChanged 似乎什么都不做......

```
/**
 * Obtain and display the online scores
 * 
 * @author soh#zolex
 *
 */
public class OnlineScoresDetails extends ListActivity {

    WakeLock wakeLock;
    OnlineScoresAdapter adapter;
    boolean isLoading = false;
    int chunkLimit = 50;
    int chunkOffset = 0;

    @Override
    /**
     * Load the scores and initialize the pager and adapter
     * 
     * @param Bundle savedInstanceState
     */
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
        this.wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK, "racesow");

        adapter = new OnlineScoresAdapter(this);
        setListAdapter(adapter);
        this.loadData();

        setContentView(R.layout.listview);
        getListView().setOnScrollListener(new OnScrollListener() {

            public void onScrollStateChanged(AbsListView view, int scrollState) {

            }

            public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {

                if (totalItemCount > 0 && visibleItemCount > 0 && firstVisibleItem + visibleItemCount >= totalItemCount) {

                    if (!isLoading) {

                        loadData();
                    }
                }
            }
        });
    }

    public void loadData() {

        final ProgressDialog pd = new ProgressDialog(OnlineScoresDetails.this);
        pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        pd.setMessage("Obtaining scores...");
        pd.setCancelable(false);
        pd.show();

        isLoading = true;
        String mapName = getIntent().getStringExtra("map");
        XMLLoaderThread t = new XMLLoaderThread("http://racesow2d.warsow-race.net/map_positions.php?name=" + mapName + "&offset=" + this.chunkOffset + "&limit=" + this.chunkLimit, new Handler() {

            @Override
            public void handleMessage(Message msg) {

                switch (msg.what) {

                    // network error
                    case 0:
                        new AlertDialog.Builder(OnlineScoresDetails.this)
                            .setMessage("Could not obtain the maplist.\nCheck your network connection and try again.")
                            .setNeutralButton("OK", new OnClickListener() {

                                public void onClick(DialogInterface arg0, int arg1) {

                                    finish();
                                    overridePendingTransition(0, 0);
                                }
                            })
                            .show();
                        break;

                    // maplist received
                    case 1:
                        pd.dismiss();
                        InputStream xmlStream;
                        try {

                            xmlStream = new ByteArrayInputStream(msg.getData().getString("xml").getBytes("UTF-8"));
                            XMLParser parser = new XMLParser();
                            parser.read(xmlStream);

                            NodeList positions = parser.doc.getElementsByTagName("position");
                            int numPositions = positions.getLength();
                            for (int i = 0; i < numPositions; i++) {

                                Element position = (Element)positions.item(i);

                                ScoreItem score = new ScoreItem();
                                score.position = Integer.parseInt(parser.getValue(position, "no"));
                                score.player = parser.getValue(position, "player");
                                score.time = Float.parseFloat(parser.getValue(position, "time"));
                                score.created_at = parser.getValue(position, "created_at");

                                adapter.addItem(score);
                            }

                            adapter.notifyDataSetChanged();

                            chunkOffset += chunkLimit;
                            isLoading = false;

                        } catch (UnsupportedEncodingException e) {

                            new AlertDialog.Builder(OnlineScoresDetails.this)
                                .setMessage("Internal error: " + e.getMessage())
                                .setNeutralButton("OK", null)
                                .show();
                        }

                        break;
                }

                pd.dismiss();
            }
        });

        t.start();
    }

    /**
     * Acquire the wakelock on resume
     */
    public void onResume() {

        super.onResume();
        this.wakeLock.acquire();
    }

    /**
     * Release the wakelock when leaving the activity
     */
    public void onDestroy() {

        super.onDestroy();
        this.wakeLock.release();
    }

    /**
     * Disable animations when leaving the activity
     */
    public void onBackPressed() {

        this.finish();
        this.overridePendingTransition(0, 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-30T20:24:05.790

有点晚了，但答案是你不应该实施

```
public void registerDataSetObserver(DataSetObserver arg0) {

}

public void unregisterDataSetObserver(DataSetObserver arg0) {

} 
```

我只是`BaseAdapter`按预期进行了简单的工作，在添加这两种方法后停止工作。我认为“某人”需要观察数据变化等:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:19:06.887

我不确定您的自定义 BaseAdapter 的实现是否正确。

尝试改变

```
public long getItemId(int pos) {
    return 0;
} 
```

至

```
 public long getItemId(int pos) {
    return pos;
 } 
```

我还发现这个简单的[教程](http://thinkandroid.wordpress.com/2010/01/13/custom-baseadapters/)可能对如何实现 BaseAdapter 有所帮助。完成此操作后，您可以再次尝试 notifyDataSetChanged()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T16:15:08.033

您应该`adapter.notifyDataSetChanged()`在每次操作数据集后调用。如果您要批量添加项目（例如`for`-loop），这意味着您必须将 .notifyDataSetChanged 放入循环中，如下所示：

```
for(int i = 0; i < numPositions; i++) {
    ....
    adapter.addItem(score);
    adapter.notifyDataSetChanged();
} 
```

确保`adapter.notifyDataSetChanged()`从 UI 线程调用。

如果您宁愿更新一次适配器，请将您`ScoreItem`的 s存储`ArrayList`在循环调用之后：

```
adapter.addAll(scoreList);
adapter.notifyDataSetChanged(); 
```

但是话又说回来，据我所知，真的没有理由这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-01T11:31:05.197

也许它会对某人有所帮助。要使该方法正常工作，您应确保满足以下条件：

**1)** `getCount()`应该返回**正确的项目大小**，例如

```
 @Override
    public int getCount() {
        return allMonthDays.size();
    } 
```

**2)** `getItemId(int position)`如果项目被更改，应该返回**不同的 id**，所以在这里只返回位置可能是不够的，例如

```
 @Override
    public long getItemId(int position) {
        return allMonthDays.get(position).getTimestamp();
    } 
```

**3）** `getView(int position, View convertView, ViewGroup parent)`应该返回需要，如果你想重用旧的`View`，你应该确保你**更新它**`convertView`

# mysql - 我可以从 org-mode 的 SQL 块交互地使用 MySQL 吗？

> ID：10031523
> 
> 赞同：8
> 
> 时间：2012-04-05T15:28:42.300
> 
> 标签：mysql, sql, emacs, org-mode

我从 Org 模式交互式地使用 R - `C-x '`R 代码块内的键绑定使用 ESS 启动交互式 R 会话。

当我从 SQL 代码块内部按下`C-x '`时，它会将代码块发送到 SQL 模式缓冲区，但不清楚我如何才能向 MySQL 发送查询。

我可以用 MySQL 做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T17:58:53.523

首先，包括接受的答案中的代码[如何让 emacs sql-mode 使用 mysql 配置文件 (.my.cnf)？](https://stackoverflow.com/questions/5734965/how-can-i-get-emacs-sql-mode-to-use-the-mysql-config-file-my-cnf)在你的`.emacs`

其次，`C-x '`在 SQL 代码块中使用 from 将代码块发送到 SQL 模式缓冲区

在 SQL 模式下将代码块发送到缓冲区后，使用`M-x pool-a`（或您希望使用的任何连接）启动您的 MySQL 会话。

此时，可以使用标准 SQL 键绑定：

```
C-c C-c send paragraph
C-c C-r send selected region
C-c C-b send entire buffer
C-c C-s send string 
```

# popup - Salesforce标准详细信息页面中的jquery弹出窗口

> ID：10031526
> 
> 赞同：0
> 
> 时间：2012-04-05T15:29:06.513
> 
> 标签：popup, salesforce

我想在用户创建任何记录（比如 Lead ）并进入标准潜在客户详细信息页面后显示 jquery 弹出消息..请提出建议..

另外，如何在侧边栏组件中包含 js 文件？

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:33:44.340

查看 Tehnrd 的这篇非常有用的帖子：
[http ://www.tehnrd.com/show-and-hide-buttons-on-page-layouts/](http://www.tehnrd.com/show-and-hide-buttons-on-page-layouts/)

他详细介绍了如何在视频中使用侧边栏组件包含 JavaScript 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T23:23:31.027

关于您的弹出窗口，我使用 ModalPopup ：[http](http://www.modalpopups.com/demos/0.2/demo.htm) ://www.modalpopups.com/demos/0.2/demo.htm 它使用起来非常简单，文档中有很多示例。

# opengl - 通过几何着色器传递不同的变量

> ID：10031530
> 
> 赞同：3
> 
> 时间：2012-04-05T15:29:27.697
> 
> 标签：opengl, glsl

我在我的 OpenGL 应用程序中引入了几何着色器。我的着色器有很多“变化”的变量，我从顶点着色器传递到片段着色器。现在，在介绍了几何着色器之后，我必须为每个顶点手动传递几何着色器中的每个变化值。有没有办法避免这种情况并“自动”做事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T18:25:00.043

不。

在管道中引入几何着色器后，如果要将变量从顶点着色器传递到片段着色器，则必须手动传递它们，从顶点着色器创建输入变量，并将输出变量创建到片段着色器。我不知道您使用的是哪个 GLSL 版本，但您可能需要查看[GLSL 3.30 规范](http://www.opengl.org/registry/doc/GLSLangSpec.3.30.6.clean.pdf)的第 4.3.4 节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T00:36:20.957

不，因为除了 noop 几何着色器之外，没有任何明智的方法可以做到这一点，如果你的几何着色器没有对几何做任何事情，为什么首先启用它？

通常，几何着色器将多个顶点作为输入并产生（不同）数量的顶点作为输出。那么哪个输入顶点应该“自动”映射到哪个输出顶点？

# html - 用于谷歌浏览器扩展的 indexdb

> ID：10031535
> 
> 赞同：1
> 
> 时间：2012-04-05T15:29:37.027
> 
> 标签：html, google-chrome, google-chrome-extension, google-chrome-devtools

我在我的谷歌浏览器扩展中使用 IndexDB，但要求是，根据用户偏好，我们需要删除存储在 IndexDB 存储中的所有记录。

到目前为止的代码是这样的

```
var db = VidManager.vidDB.db;
var trans = db.transaction(["vid"], IDBTransaction.READ_WRITE);
var store = trans.objectStore("vid"); 
```

现在 store 有了值，有人可以建议我如何删除所有 store 值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:52:18.263

您可以像下面这样删除每个 id：

```
var request = store.delete(id);
request.onsuccess = function(e) {
  // Do post processing such as updating UI,
};

request.onerror = function(e) {
  console.log(e);
}; 
```

或者您可以删除整个商店：

```
var request = trans.deleteObjectStore('vid');
request.onsuccess = function(e) {
  // Do post processing such as updating UI,
};

request.onerror = function(e) {
  console.log(e);
}; 
```

# wpf - WPF 设计器永远不会正确加载

> ID：10031536
> 
> 赞同：0
> 
> 时间：2012-04-05T15:29:38.330
> 
> 标签：wpf, visual-studio, xaml

我有一个 WPF 应用程序，所有似乎都运行良好，但有一个例外 - 设计器很少（如果有的话）正确加载。通常抱怨`Undefined CLR namespace.`然后说它找不到我`local:`定义的一些控件。

这只是设计器或 Visual Studios 代码生成中的缺陷，还是实际上是我的应用程序出现系统性问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:33:35.137

在您的代码中可能是仅在设计时发生的错误。可以调试它。请参阅[如何：调试 Designer 加载失败](http://msdn.microsoft.com/en-us/library/ee856616.aspx)。很快，您需要另一个 Visual Studio 实例并将其附加到显示您的 wpf 应用程序的实例上。您甚至可以尝试使用[How to: Debug .NET Framework Source 追查](http://msdn.microsoft.com/en-us/library/cc667410.aspx)错误的根源。

我有一个类似的问题，我成功地将它追踪到 DataContextChanged 事件处理程序并摆脱了它。

# javascript - 如何检查 ajax 或 jquery 中是否存在 url 或网页

> ID：10031537
> 
> 赞同：0
> 
> 时间：2012-04-05T15:29:39.773
> 
> 标签：javascript, jquery, ajax

在创建个人资料时，用户可以填写他的网站/博客链接/，显示他的个人资料页面。在将此链接保存到数据库之前，我想检查给定的 url/网页是否存在。

有没有办法通过 javascript/ajax/ 做到这一点？就像加载用户个人资料页面一样，它会检查 url。

```
 if url/webpage exists 
         then url links will shown to user profile page. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:34:32.983

您不能保证用户网站支持跨域请求，因此请在您的服务器上创建一个代理并发送该站点的标头。如果状态为 200，则在 IFrame 中加载网站

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:33:39.223

您可以使用Ruby 中的[OpenURI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)打开 URL 并检查 HTTP 状态代码。200 到 300 之间的任何值都意味着成功。[这是所有 HTTP 状态代码及其描述的列表](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-05T15:36:40.137

您可以使用[Net::HTTP 库](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/index.html)。

```
require "net/http"
url = URI.parse("http://www.google.com/")
req = Net::HTTP.new(url.host, url.port)
res = req.request_head(url.path) 
```

此时 res 是一个包含请求结果的[Net::HTTPResponse 对象。](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTPResponse.html)

# paypal - 在 Paypal 批量付款方面需要一些帮助

> ID：10031539
> 
> 赞同：2
> 
> 时间：2012-04-05T15:29:42.760
> 
> 标签：paypal, payment-gateway

每当我尝试进行大规模支付时，我都会收到以下错误消息。

“很抱歉，您的 PayPal 帐户目前不符合发送批量付款的条件。请联系 PayPal 客户服务或您的客户经理。批量付款未完成”

但是，当我尝试通过测试模式时，它工作正常。我需要在我的真实账户中授予任何权限和任何其他设置吗？如果您需要任何其他详细信息，请告诉我。

任何帮助都将不胜感激。！

[仅供参考] 我也联系了贝宝。他们告诉我，不要考虑这个消息，它将通过 api 工作。！我还要再问他们。在此之前，我想知道为什么要问他们清楚..！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:31:37.790

嗯，这很不言自明。默认情况下，Paypal 关闭批量付款，您需要联系 Paypal 以在您的真实账户上启用它。

# sql-server-2008 - SQL JOB 更新所有表

> ID：10031547
> 
> 赞同：0
> 
> 时间：2012-04-05T15:30:21.113
> 
> 标签：sql-server-2008

我正在使用 Microsoft SQL Server 2008 R2。我通过创建 SSIS 包将数据库 A（myproduction 数据库）复制到数据库 B（Myreportin 数据库）。两个数据库都在同一个服务器中。我想运行一个作业，以便如果有任何更改（数据诸如插入新行或更新任何表中任何行的值之类的修改）发生在数据库 A 中，这也将发生在我的 B 数据库中，sql 作业将运行并自动完成更改。我不希望在数据库 B 表中发生这种情况将被删除并重新创建（因为它不是我们的业务规则），而只会发生更改。

任何人都可以帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:42:36.867

我建议您使用**replication**进行调查。具体来说，如果您需要不断更新，则使用事务复制。这里有一点来自[MSDN](http://msdn.microsoft.com/en-us/library/ms151176%28v=sql.105%29.aspx)：

> 事务复制通常从发布数据库对象和数据的快照开始。获取初始快照后，在发布服务器上进行的后续数据更改和模式修改通常会在发生时（近乎实时）交付给订阅服务器。数据更改以与发布者发生的相同顺序和相同事务边界应用于订阅者；因此，在发布中，事务一致性得到保证。

如果您不需要持续更新（当然，这是以性能为代价的），您可以考虑合并复制或快照复制的替代方案。[这是](http://msdn.microsoft.com/en-us/library/ms152531.aspx)一个开始检查这些替代方案的页面。

# android - 我需要上传我的 APK 以进行 LVL 测试吗？

> ID：10031550
> 
> 赞同：0
> 
> 时间：2012-04-05T15:30:28.187
> 
> 标签：android, android-lvl

我很困惑，因为 android 指南对同一件事说了两件事。

它说使用开发者帐户的好处是您不必上传 APK 进行静态响应测试。

另一方面，它说，静态响应测试仅适用于上传的应用程序（不一定发布）。

SOOO 什么是正确答案：如果我不上传 apk 并使用我的开发者帐户，我会收到 Not_Market_manager 响应。这是否意味着我必须始终上传我的 apk 进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:43:44.067

是的。上传，但不要发布，APK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-05T11:46:37.540

以前，您可以发布应用程序的“草稿”版本进行测试。不再支持此功能。相反，您可以通过两种方式测试预发布应用在 Google Play 商店中的功能：

*   您可以将应用程序发布到 alpha 或 beta 分发渠道。这使得该应用程序可以在 Google Play 商店中使用，但仅限于您放在“白名单”中的测试人员。

*   在少数情况下，您可以使用未发布的应用程序测试 Google Play 功能。例如，您可以使用静态响应、始终返回特定结果（如“已购买”或“已退款”）的特殊保留产品 ID 来测试未发布应用的应用内计费支持。

[您可以在此处](https://developer.android.com/google/play/billing/billing_testing.html#draft_apps)找到有关它的更多最新信息

# c - GDB如何确定栈底？

> ID：10031555
> 
> 赞同：6
> 
> 时间：2012-04-05T15:30:57.973
> 
> 标签：c, gdb

背景：我正在使用`getcontext(3)`/ `makecontext(3)`/ `setcontext(3)`( `ucontext.h`; SUSv2, POSIX.1-2001) 系列函数分配我自己的机器上下文和堆栈。

当我使用 gdb（版本 6.1.1）检查堆栈时，线程位于我分配的这些上下文之一中，似乎 gdb 不知道堆栈的末端（逻辑底部）在哪里。例如，这是来自 x86 FreeBSD 的堆栈：

```
#0  0x2872d79f in poll () from /lib/libc.so.7
#1  0x28646e23 in poll () from /lib/libthr.so.3
#2  0x2869b267 in fdtask (task=0x28a3dc40, v=0x0) at fd.c:58
#3  0x2869c8dc in taskstart (y=681827392, x=0) at task.c:58
#4  0x00000000 in ?? ()
#5  0x28a3dc40 in ?? ()
#6  0x00000000 in ?? ()
#7  0x00000000 in ?? ()
…
#65 0x00000000 in ?? ()
… 
```

[（是的，这是建立在Russ Cox 的 libtask 库](http://swtch.com/libtask/)之上的。）

此上下文的执行从`taskstart`函数开始，但 GDB 似乎无法确定它应该停止尝试读取堆栈，即使它在该帧中遇到了 NULL 的返回地址。

我的问题是：我能做些什么（通过以某种方式格式化堆栈，或设置寄存器等）来帮助 GDB 了解堆栈的顶部在哪里？谢谢。

**编辑：**结论：gdb 6.1.1 检测堆栈末尾的一种方法似乎是检查存储的帧指针是否为 NULL；我通过修改 x86 和 amd64`makecontext(2)`函数以在初始化新上下文时将 ebp 或 rbp 重置为零来解决我的用例问题。（在这种情况下，我不关心其他架构。）这个问题在 gdb 7.1 中消失了；据推测，gdb 7.1 能够通过其他方式（例如 debuginfo）检测堆栈结束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:32:56.630

如果 GDB 使用帧指针来展开堆栈（DWARF2 之前的方法），它会在到达空帧指针时停止，我相信。对于 DWARF2，事情要复杂得多，因为“帧指针”是由堆栈指针与指令指针和当前指令的 DWARF2 帧偏移信息相结合隐式确定的，但基本上效果是相同的。不确定这些天使用的是哪个 FreeBSD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T19:05:51.020

`gdb`文档说，它停止列出回溯帧的一种方法是在`main()`.

请参阅第 6251 行gdb/doc/gdb.textinfo 中的[ftp://sourceware.org/pub/gdb/snapshots/current/gdb-7.4.50.20120405.tar.bz2](ftp://sourceware.org/pub/gdb/snapshots/current/gdb-7.4.50.20120405.tar.bz2)`@cindex backtrace beyond @code{main} function`。

# python - Scrapy spider 不会释放项目内存

> ID：10031556
> 
> 赞同：0
> 
> 时间：2012-04-05T15:31:05.123
> 
> 标签：python, xml, scrapy, web-crawler

我正在使用scrapy从各种来源中提取一些数据，它工作得非常好，但现在我已经编写了一个蜘蛛来从一个大的XML文件（大约100MB => 40000个项目）中提取数据。

我正在使用scrapy [XMLFeedSpider](http://doc.scrapy.org/en/latest/topics/spiders.html#xmlfeedspider)。

问题是scrapy正在使用大量内存（1GB或更多），我不知道为什么它不释放我的项目使用的内存。

当我使用 scrapy 的 trackrefs 工具（通过 telnet 连接到我的蜘蛛）时，我得到以下输出：

```
 >>> prefs()
  Libxml2Document                     2   oldest: 160s ago
  CustomName                          1   oldest: 163s ago
  XmlResponse                         1   oldest: 161s ago
  XmlXPathSelector                    1   oldest: 0s ago
  Request                             1   oldest: 163s ago
  CustomName                          38893   oldest: 150s ago 
```

我已禁用所有项目管道。

在我的蜘蛛中，我不保留任何项目参考，我只是创建项目并返回它们。我找不到内存泄漏在哪里...

有没有解释为什么我的物品没有被释放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:31:21.300

根据“prefs”的输出，它的第一列是类名，Scrapy 没有名为“CustomName”的类。此名称看起来像 XML 字段中的某个列。此外，你有没有看到这些奇怪的两行：

```
CustomName                          1   oldest: 163s ago
CustomName                          38893   oldest: 150s ago 
```

它的意思是“不同的类，但具有相同的名称”。你应该发布你的代码。我猜您的 Item 类刚刚命名为“CustomName”。

# c# - Python 3.2 中 hexdigest 的 C# 等价物是什么？

> ID：10031558
> 
> 赞同：9
> 
> 时间：2012-04-05T15:31:13.367
> 
> 标签：c#, python, python-3.x, sha1, hashlib

我目前正在开发一个将 Python 3.2 程序转换为 C# 的项目。

在 python 程序中有一行代码返回一个双倍长度的字符串对象，只包含十六进制数字。

Python程序中的代码是：

```
if sha1.hexdigest().upper() == hash_string:
    #do whatever 
```

我一直在尝试并未能从 python 中的 hashlib 中找到 C# 中的 hexdigest 等价物。

在 C# 中，我已经在一个字节数组中获得了 SHA1 哈希，但是我尝试执行等效于 hexdigest 的所有方法都未能提供与 hash_string 的匹配 - 这是 sha1 的 hexdigest*应该*匹配的。

我不确定问题是我用来模拟 hexdigest 的方法还是我用来首先生成 sha1 哈希的方法 - 所以如果有人有他们*知道*的 hexdigest 方法，那就太好了这将允许我消除至少一个可能的问题原因。

我目前用来代替 hexdigest 的方法是：

```
string hexaHash = "";
foreach (byte b in sha1result)
{
    hexaHash += String.Format("{0:x2}", b);
}
string result = hexaHash; 
```

编辑：*facepalm*好的，我刚刚弄清楚我的问题是什么。在 python 中生成 sha1 哈希时，它是从小写的十六进制字符串中进行的。在我的 C# 中，它是一个大写的十六进制字符串。所以我猜想我正在使用的hexdigest等价物是好的。很抱歉浪费了人们的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-12-13T07:07:56.543

```
var hmac = BitConverter.ToString(hashBytes).Replace("-", "").ToLower(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T08:42:44.017

使用 HMACSHA1 类对其进行转换。

# wpf - 如何使 WPF Datagrid 列不可聚焦？

> ID：10031559
> 
> 赞同：6
> 
> 时间：2012-04-05T15:31:18.067
> 
> 标签：wpf, focus, wpfdatagrid, datagridtextcolumn

我有一个 WPF`DataGrid`用于数据输入，但有些`DataGridTextColumn`只是信息，我已经设置了它们`IsReadOnly="True"`，因此它们的单元格不会进入编辑模式。但是，他们仍然可以获得我想要避免的焦点。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T08:11:13.463

使用单元格样式并设置 Focusable=False。

```
<Page.Resources>
    <Style x:Key="CellStyle" TargetType="{x:Type DataGridCell}">
        <Setter Property="Focusable" Value="False"/>
    </Style>
</Page.Resources>

<DataGrid ItemsSource="{Binding Items}" ...>
    <DataGrid.Columns>
        <DataGridTextColumn 
            CellStyle="{StaticResource CellStyle}" 
            IsReadOnly="True" 
            Header="Name" Binding="{Binding Name}"/>

    .... 
```

# java - Java：使用 IndentingXMLStreamwriter 会导致文件变大

> ID：10031561
> 
> 赞同：1
> 
> 时间：2012-04-05T15:31:26.747
> 
> 标签：java, xml, streamwriter, indentation

我正在使用 IndentingXMLStreamWriter-Class 来获取格式良好的 XML 文件。代码如下所示：

```
XMLOutputFactory output = XMLOutputFactory.newInstance();
XMLStreamWriter streamWriter;
IndentingXMLStreamWriter indentingStreamWriter;
streamWriter = output.createXMLStreamWriter(new FileOutputStream(fileName));
indentingStreamWriter = new IndentingXMLStreamWriter(streamWriter);
indentingStreamWriter.setIndentStep("    "); 
indentingStreamWriter.writeStartDocument("UTF-8", "1.0"); 
```

生成的 XML 的大小和深度非常大。当我使用缩进流写入器时，文件的大小是使用“普通”流写入器生成的文件的两倍多。有没有更好的方法来实现缩进或者我做错了什么？

提前致谢

拉斯

更新： dty 是 - 当然 - 绝对正确。我问自己以更紧凑的方式（例如制表符）进行缩进是否是个好主意。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:35:22.640

冒着听起来很愚蠢的风险，您正在获取一个 XML 文件并添加缩进（每级 4 个字符）和换行符（大概）。它会变大。

大多少取决于 XML 标记的大小以及它们的嵌套程度。如果它们的标签非常小，那么空白的相对大小就会非常大，并且可以想象到文件大小的两倍。如果它们嵌套得很深，您将为每一行添加大量空间。

如果您想要打印精美的文档，您似乎没有太多选择。您可以使用更少的空格（2 个而不是 4 个），甚至是制表符（尽管下一个人可能会因此而开枪），但是，真的，我认为这是*c'est la vie*的一个例子。

# asp.net - 从 Azure 连接到 HTTPS Web 服务

> ID：10031562
> 
> 赞同：2
> 
> 时间：2012-04-05T15:31:26.917
> 
> 标签：asp.net, web-services, azure, ssl-certificate

我在 Azure 中有一个 Web 角色，它必须连接到受 SSL 保护的外部 Web 服务。当应用程序尝试连接到 Web 服务时，它会给出一个错误：

> 无法为具有“certname.organization.org”权限的 SSL/TLS 安全通道建立信任关系。

它所需的证书已作为服务证书上传到 Azure，但由于某种原因，它似乎没有正确引用或使用它。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:13:57.547

听起来您在 Azure 中的服务客户端对您正在调用的外部服务的 SSL 证书不满意 - 您是否可以控制该服务？

您可以通过使用以下内容来测试这一点，以忽略来自 Azure 中客户端的 SSL 错误：

```
ServicePointManager.ServerCertificateValidationCallback =
    (obj, certificate, chain, errors) => true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T17:54:49.907

我也间歇性地看到过这个问题。就我而言，事实证明，获取根证书之一的网络连接有时会超时。然后在将来的请求中它会再次工作。

我最终编写了一个自定义回调，它可以让我感兴趣的特定证书在出现错误的情况下工作，而不会影响其他证书的验证。下面是我的代码。正如您可能知道的那样，我正在尝试使用 Android Cloud-to-Device Messaging 端点，并尝试解决 Google 使用的通配符证书的问题，但它应该是可推广的。这也包含我用来诊断特定错误的所有日志记录。即使您不想强制验证证书，日志记录代码也可以帮助您决定如何继续。

```
private static readonly Uri PUSH_URI = new Uri("https://android.apis.google.com/c2dm/send", UriKind.Absolute);

/**
//The following function needs to be wired up in code somewhere else, like this:
ServicePointManager.ServerCertificateValidationCallback += ValidateDodgyGoogleCertificate;
**/
/// <summary>
/// Validates the SSL server certificate. Note this is process-wide code.
/// Wrote a custom one because the certificate used for Google's push endpoint is not for the correct domain. Go Google. 
/// </summary>
/// <param name="sender">either a host name string, or an object derived from WebRequest</param>
/// <param name="cert">The certificate used to authenticate the remote party.</param>
/// <param name="chain">The chain of certificate authorities associated with the remote certificate.</param>
/// <param name="sslPolicyErrors">One or more errors associated with the remote certificate.</param>
/// <returns>
/// Returns a boolean value that determines whether the specified
/// certificate is accepted for authentication; true to accept or false to
/// reject.
/// </returns>
private static bool ValidateDodgyGoogleCertificate(object sender, X509Certificate cert, X509Chain chain, SslPolicyErrors sslPolicyErrors)
{
    if (sslPolicyErrors == SslPolicyErrors.None)
    {
    // Good certificate.
    return true;
    }

    string hostName = sender as string;
    if (hostName == null)
    {
    WebRequest senderRequest = sender as WebRequest;
    if (senderRequest != null)
    {
        hostName = senderRequest.RequestUri.Host;
    }
    }

    //We want to get past the Google name mismatch, but not allow any other errors
    if (sslPolicyErrors != SslPolicyErrors.RemoteCertificateNameMismatch)
    {
    StringBuilder sb = new StringBuilder();
    sb.AppendFormat("Rejecting remote server SSL certificate from host \"{0}\" issued to Subject \"{1}\" due to errors: {2}", hostName, cert.Subject, sslPolicyErrors);

    if ((sslPolicyErrors | SslPolicyErrors.RemoteCertificateChainErrors) != SslPolicyErrors.None)
    {
        sb.AppendLine();
        sb.AppendLine("Chain status errors:");

        foreach (var chainStatusItem in chain.ChainStatus)
        {
        sb.AppendFormat("Chain Item Status: {0} StatusInfo: {1}", chainStatusItem.Status, chainStatusItem.StatusInformation);
        sb.AppendLine();
        }
    }

    log.Info(sb.ToString());

    return false; 
    }

    if (PUSH_URI.Host.Equals(hostName, StringComparison.InvariantCultureIgnoreCase))
    {
    return true;
    }

    log.Info("Rejecting remote server SSL certificate from host \"{0}\" issued to Subject \"{1}\" due to errors: {2}", hostName, cert.Subject, sslPolicyErrors);
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T06:25:13.913

忽略 SSL 错误是您可以做的一件事。

但是，如果它在您的机器上运行，并且在您的实例上不起作用，则也可能是实例上的证书链不完整。您需要在您的机器上打开证书，转到**证书路径**并导出路径中的每个证书。

然后，将这些证书添加到您的项目并让启动任务（.bat 或 .cmd 文件）将它们添加到受信任的根 CA：

```
REM Install certificates.
certutil -addstore -enterprise -f -v root Startup\Certificates\someROOTca.cer
certutil -addstore -enterprise -f -v root Startup\Certificates\otherROOTca.cer 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T00:03:10.433

我将 cer 添加到项目的根目录并选择“始终复制”并使用以下命令使 azure 使用 SSL 自签名连接到服务器

```
 REM Install certificates.
certutil -addstore -enterprise -f -v root startsodev.cer 
```

# php - 使用 XMLHttpRequest 时如何保留 PHP 中生成的对象

> ID：10031577
> 
> 赞同：1
> 
> 时间：2012-04-05T15:32:22.173
> 
> 标签：php, javascript, ajax

我正在开发具有主文件 index.php 的网页，如下所示：

 `````
include('UserClass.php');
include('html/top.php');
$user = new User();
if (isset($_POST['user'], $_POST['pass']))
{
   $user->login($_POST['user'], $_POST['pass']);
}

if ($user->logged != 1)
{
   include('html/forms/login.html');
   include('html/forms/register.html');
   include('html/calendar.php');
} 
````  `这是我的 ajax 脚本：

 `````
function nextMonth()
{
   var xmlhttp = new XMLHttpRequest();
   xmlhttp.onreadystatechange=function()
   {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
         document.getElementById("text").innerHTML=xmlhttp.responseText;
      }
   }
   xmlhttp.open("GET", "html/calendar.php", true);
   xmlhttp.send();
} 
````  `当我单击触发 nextMonth() 的按钮时，出现错误：

> 致命错误：在第 41 行的 /var/www/.../html/calendar.php 中的非对象上调用成员函数 check_date()

这意味着对象用户不存在，所以我不能使用来自用户类的方法。在 calendar.php 中创建新的用户实例是不可能的，因为它会注销用户，每当他尝试将日历视图更改为下个月时。在做所有这些 AJAX 事情时，我应该如何从 index.php 保存/传递对象？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:41:34.273

您需要 php 层是有状态的，这是使用会话完成的。````

# wpf - 带有 WPF 的 MVVM 模式中不需要 Dispatcher 吗？

> ID：10031578
> 
> 赞同：2
> 
> 时间：2012-04-05T15:32:22.763
> 
> 标签：wpf, multithreading, xaml, mvvm, dispatcher

我正在启动一个新线程并尝试通过我的视图模型中定义的属性更新 UI 元素，并且我能够做到这一点而没有任何错误，但是如果我尝试通过代码隐藏更新 UI 元素，它会引发已知的 UI 访问错误（“调用线程无法访问此对象，因为不同的线程拥有它。”）。第一个问题是..这两种方法有什么区别？第二个问题是什么时候我会在 ViewModel 中理想地使用 Disptacher？

# 代码背后

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
        Thread th = new Thread(new ThreadStart(delegate()
            {
                textbox.Text = "Rajib";
            }
        ));

        th.Start();
    }

//inside XAML
<TextBox x:Name="textbox" Text="{Binding UserInput, Mode=TwoWay}" /> 
```

# MVVM

```
public string UserInput
    {
        get { return _UserInput; }
        set { _UserInput = value; OnPropertyChanged("UserInput"); }
    } 
```

//通过按钮单击上的 ICommand 属性调用 public void ExecuteCommand(object obj) { InvokeCallThroughAnonymousDelegateThread(); }

```
private void InvokeCallThroughAnonymousDelegateThread()
    {
        ThreadStart start = delegate()
        {
            UserInput = "Calling from diff thread";
        };           
        new Thread(start).Start();
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T16:15:34.790

任何更新 UI 的尝试都必须在调度程序线程中完成。但是，对于属性更改事件，当从后台线程引发事件时，WPF*会自动为您调度。*您可以在 Bea Costa（前 WPF 数据绑定 PM）博客上阅读更多相关信息：

[http://bea.stollnitz.com/blog/?p=34](http://bea.stollnitz.com/blog/?p=34)

他们打算对事件做同样的`INotifyCollectionChanged`事情，但在以前的版本中从未考虑过。对于 4.5 [，他们现在将自动同步集合更改](http://msdn.microsoft.com/en-us/library/hh198845%28v=vs.110%29.aspx)事件`INotifyPropertyChanged`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:53:10.807

NotifyPropertyChanged 的​​线程上下文由 WPF 通过事件更改，但您后面的代码不会将线程上下文更改为 UI 线程。在您的代码隐藏中，请改用它：

```
Task.Factory.StartNew(() =>
        {
            // Background work
        }).ContinueWith((t) => {
            // Update UI thread

        }, TaskScheduler.FromCurrentSynchronizationContext()); 
```

关于何时直接使用 Dispatcher，我有一个中型项目，我没有在任何 ViewModel 中使用 Dispatcher。我用它来处理 Xaml 资源、弱事件处理，它在 MefedMVVM 和 Prism 内部使用，我也使用它。

# python - 如何将简单的几何形状写入 numpy 数组

> ID：10031580
> 
> 赞同：33
> 
> 时间：2012-04-05T15:32:41.737
> 
> 标签：python, image, numpy, geometry

我想生成一个大小为 200x200 元素的 numpy 数组，并在其中放入一个以 100,100 坐标为中心、半径为 80 且笔划宽度为 3 像素的圆。如何在不涉及文件操作的情况下在 python 2.7 中执行此操作？可能使用几何或成像库以允许泛化到其他形状。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-05T16:19:26.707

通常的方法是定义一个坐标网格并应用你的形状方程。为此，最简单的方法是使用`numpy.mgrid`：

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.mgrid.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.mgrid.html)

```
# xx and yy are 200x200 tables containing the x and y coordinates as values
# mgrid is a mesh creation helper
xx, yy = numpy.mgrid[:200, :200]
# circles contains the squared distance to the (100, 100) point
# we are just using the circle equation learnt at school
circle = (xx - 100) ** 2 + (yy - 100) ** 2
# donuts contains 1's and 0's organized in a donut shape
# you apply 2 thresholds on circle to define the shape
donut = numpy.logical_and(circle < (6400 + 60), circle > (6400 - 60)) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-05T15:53:43.537

[Cairo](http://www.cairographics.org/)是一个现代、灵活和快速的 2D 图形库。它具有[Python 绑定](http://www.cairographics.org/pycairo/)并允许基于 NumPy 数组创建“表面”：

```
import numpy
import cairo
import math
data = numpy.zeros((200, 200, 4), dtype=numpy.uint8)
surface = cairo.ImageSurface.create_for_data(
    data, cairo.FORMAT_ARGB32, 200, 200)
cr = cairo.Context(surface)

# fill with solid white
cr.set_source_rgb(1.0, 1.0, 1.0)
cr.paint()

# draw red circle
cr.arc(100, 100, 80, 0, 2*math.pi)
cr.set_line_width(3)
cr.set_source_rgb(1.0, 0.0, 0.0)
cr.stroke()

# write output
print data[38:48, 38:48, 0]
surface.write_to_png("circle.png") 
```

此代码打印

```
[[255 255 255 255 255 255 255 255 132   1]
 [255 255 255 255 255 255 252 101   0   0]
 [255 255 255 255 255 251  89   0   0   0]
 [255 255 255 255 249  80   0   0   0  97]
 [255 255 255 246  70   0   0   0 116 254]
 [255 255 249  75   0   0   0 126 255 255]
 [255 252  85   0   0   0 128 255 255 255]
 [255 103   0   0   0 118 255 255 255 255]
 [135   0   0   0 111 255 255 255 255 255]
 [  1   0   0  97 254 255 255 255 255 255]] 
```

显示圆圈的一些随机片段。它还创建了这个 PNG：

![红圈](../Images/3bcb5b78a012cce8c5f4136e059676fd.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-01-05T21:30:44.327

另一种可能性是使用`scikit-image`. 您可以将[circle_perimeter](http://scikit-image.org/docs/dev/api/skimage.draw.html#skimage.draw.circle_perimeter)用于空心或`circle`整圆。

你可以像这样画一个单笔画圈：

```
import matplotlib.pyplot as plt
from skimage import draw
arr = np.zeros((200, 200))
rr, cc = draw.circle_perimeter(100, 100, radius=80, shape=arr.shape)
arr[rr, cc] = 1
plt.imshow(arr)
plt.show() 
```

您还可以使用`loop`. 在这种情况下，您应该使用抗锯齿版本来避免伪影：

```
import matplotlib.pyplot as plt
from skimage import draw
arr = np.zeros((200, 200))
stroke = 3
# Create stroke-many circles centered at radius. 
for delta in range(-(stroke // 2) + (stroke % 2), (stroke + 1) // 2):
    rr, cc, _ = draw.circle_perimeter_aa(100, 100, radius=80+delta, shape=arr.shape)
    arr[rr, cc] = 1
plt.imshow(arr)
plt.show() 
```

一种可能更有效的方法是生成两个完整的圆并从外部“减去”内部：

```
import matplotlib.pyplot as plt
from skimage import draw
arr = np.zeros((200, 200))
stroke = 3
# Create an outer and inner circle. Then subtract the inner from the outer.
radius = 80
inner_radius = radius - (stroke // 2) + (stroke % 2) - 1 
outer_radius = radius + ((stroke + 1) // 2)
ri, ci = draw.circle(100, 100, radius=inner_radius, shape=arr.shape)
ro, co = draw.circle(100, 100, radius=outer_radius, shape=arr.shape)
arr[ro, co] = 1
arr[ri, ci] = 0
plt.imshow(arr)
plt.show() 
```

这两种方法实际上产生的结果略有不同。

[![<code>stroke=3</code> 的圆圈](../Images/685134637cb5652e68e2de5468d70c8c.png)](https://i.stack.imgur.com/yiM3i.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-05T15:52:30.073

opencv新的python绑定 `import cv2`创建numpy数组作为默认图像格式

它们包括[绘图功能](https://docs.opencv.org/2.4/modules/core/doc/drawing_functions.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-25T03:51:17.413

一种仅使用`numpy`, 的方法（类似于@Simon的答案）如下：

```
import numpy as np

def draw_circle(radius, dim=None):
    if dim == None:
        dim = (radius * 2, radius * 2)
    circle = np.zeros(dim)
    x, y = np.meshgrid(np.arange(dim[0]), np.arange(dim[1]))
    r = np.abs((x - dim[0] / 2)**2 + (y - dim[1] / 2)**2 - radius**2)

    m1 = r.min(axis=1, keepdims=True)
    m2 = r.min(axis=0, keepdims=True)
    rr = np.logical_or(r == m1, r == m2)
    l_x_lim = int(dim[0] / 2 - radius)
    u_x_lim = int(dim[0] / 2 + radius + 1)
    l_y_lim = int(dim[0] / 2 - radius)
    u_y_lim = int(dim[0] / 2 + radius + 1)

    circle[l_x_lim:u_x_lim, l_y_lim:u_y_lim][rr[l_x_lim:u_x_lim, l_y_lim:u_y_lim]] = 1
    return circle

gen_circle(20) # draw a circle of radius 20 pixels 
```

# javascript - Javascript的命名空间大写是否有标准

> ID：10031587
> 
> 赞同：5
> 
> 时间：2012-04-05T15:33:14.237
> 
> 标签：javascript, naming-conventions

我正在采用大量的 Javascript / jQuery 代码。我想将它移到 Backbone.js，但作为中介，我试图给它命名，以便它更加模块化。

我想知道是否有 Javascript 命名空间的标准。我打算做这样的事情：

```
var arc={
  name:"Spock",

  nav:function(){
    //alert('name' + this.name);
    obj=get_nav_obj();
    get_to_api_v2(obj);
  }

}; 
```

arc应该大写吗？我倾向于看到大写，但由于站点的其余部分是 Ruby，小写可能更一致。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T15:38:31.450

在 javascript 中，[camelCase](http://en.wikipedia.org/wiki/CamelCase)用于常规标识符。CAPSLOCKS 用于[“常量”](https://stackoverflow.com/questions/130396/are-there-constants-in-javascript)。ProperCase 用于[对象构造函数](http://javascript.crockford.com/code.html#names)（表示它们应该始终使用 调用`new`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T15:37:54.107

Javascript 中的 captilization 没有绝对的标准。尽管绝大多数 javascript 更喜欢驼峰式大小写。简而言之，驼峰式大小写标识符的第一个字母小写，然后将名称中每个后续单词的开头大写。这`arc`是一个词，因此所有较低的词都是合适的。

*   [http://en.wikipedia.org/wiki/CamelCase](http://en.wikipedia.org/wiki/CamelCase)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T15:39:18.347

这归结为个人喜好。我们的代码最佳实践定义只有函数构造函数必须大写。对我来说，对象的实例是小写的。

谷歌搜索“javascript code guidleine”，看看其他人在做什么

# opengl - 切线空间法线贴图 - 着色器完整性检查

> ID：10031591
> 
> 赞同：9
> 
> 时间：2012-04-05T15:33:35.013
> 
> 标签：opengl, shader

我从切线空间法线贴图着色器中得到了一些非常奇怪的结果:)。在我在这里展示的场景中，茶壶和方格墙正在使用我的普通 Phong-Blinn 着色器进行着色（显然，茶壶背面剔除使它具有轻微短暂的外观和感觉 :-)）。我尝试将法线映射添加到球体中，并产生迷幻的结果：

![球体上的法线贴图不正确](../Images/92005e229430c2cc9d347c74d58d66ed.png)

光线来自右侧（几乎可以看到黑色斑点）。我在球体上使用的法线贴图如下所示：

![法线贴图](../Images/e9b37e0fd10f4f4aebd057173cbee634.png)

我正在使用 AssImp 处理输入模型，因此它会自动为我计算每个顶点的切线和双法线。

像素和顶点着色器如下。我不太确定出了什么问题，但如果切线基矩阵有某种错误，我也不会感到惊讶。我假设我必须将事物计算到眼睛空间，然后将眼睛和光矢量转换到切线空间，这是正确的方法。请注意，灯光位置已经进入视图空间中的着色器。

```
// Vertex Shader
#version 420

// Uniform Buffer Structures

// Camera.
layout (std140) uniform Camera
{
    mat4 Camera_Projection; 
    mat4 Camera_View;
};

// Matrices per model.
layout (std140) uniform Model
{
    mat4 Model_ViewModelSpace;
    mat4 Model_ViewModelSpaceInverseTranspose;
};

// Spotlight.
layout (std140) uniform OmniLight
{
    float Light_Intensity;

    vec3 Light_Position;            // Already in view space.
    vec4 Light_Ambient_Colour;
    vec4 Light_Diffuse_Colour;
    vec4 Light_Specular_Colour;
};

// Streams (per vertex)
layout(location = 0) in vec3 attrib_Position;
layout(location = 1) in vec3 attrib_Normal;
layout(location = 2) in vec3 attrib_Tangent;
layout(location = 3) in vec3 attrib_BiNormal;
layout(location = 4) in vec2 attrib_Texture;

// Output streams (per vertex)
out vec3 attrib_Fragment_Normal;
out vec4 attrib_Fragment_Position;
out vec3 attrib_Fragment_Light;
out vec3 attrib_Fragment_Eye;

// Shared.
out vec2 varying_TextureCoord;

// Main
void main()
{
    // Compute normal.
    attrib_Fragment_Normal = (Model_ViewModelSpaceInverseTranspose * vec4(attrib_Normal, 0.0)).xyz;

    // Compute position.
    vec4 position = Model_ViewModelSpace * vec4(attrib_Position, 1.0);

    // Generate matrix for tangent basis.
    mat3 tangentBasis = mat3(   attrib_Tangent, 
                                attrib_BiNormal, 
                                attrib_Normal);

    // Light vector.
    attrib_Fragment_Light = tangentBasis * normalize(Light_Position - position.xyz);

    // Eye vector.
    attrib_Fragment_Eye = tangentBasis * normalize(-position.xyz);

    // Return position.
    gl_Position = Camera_Projection * position;
} 
```

...像素着色器看起来像这样：

```
// Pixel Shader
#version 420

// Samplers
uniform sampler2D Map_Normal;

// Global Uniforms

// Material.
layout (std140) uniform Material
{
    vec4  Material_Ambient_Colour;
    vec4  Material_Diffuse_Colour;
    vec4  Material_Specular_Colour;
    vec4  Material_Emissive_Colour;

    float Material_Shininess;
    float Material_Strength;
};

// Spotlight.
layout (std140) uniform OmniLight
{
    float Light_Intensity;

    vec3 Light_Position;    
    vec4 Light_Ambient_Colour;
    vec4 Light_Diffuse_Colour;
    vec4 Light_Specular_Colour;
};

// Input streams (per vertex)
in vec3 attrib_Fragment_Normal;
in vec3 attrib_Fragment_Position;
in vec3 attrib_Fragment_Light;
in vec3 attrib_Fragment_Eye;

// Shared.
in vec2 varying_TextureCoord;

// Result
out vec4 Out_Colour;

// Main
void main(void)
{
    // Compute normals.
    vec3 N = normalize(texture(Map_Normal, varying_TextureCoord).xyz * 2.0 - 1.0);  
    vec3 L = normalize(attrib_Fragment_Light);
    vec3 V = normalize(attrib_Fragment_Eye);
    vec3 R = normalize(-reflect(L, N));

    // Compute products.
    float NdotL = max(0.0, dot(N, L));
    float RdotV = max(0.0, dot(R, V));

    // Compute final colours.
    vec4 ambient  = Light_Ambient_Colour * Material_Ambient_Colour;
    vec4 diffuse  = Light_Diffuse_Colour * Material_Diffuse_Colour * NdotL;
    vec4 specular = Light_Specular_Colour * Material_Specular_Colour * (pow(RdotV, Material_Shininess) * Material_Strength);

    // Final colour.
    Out_Colour = ambient + diffuse + specular;      
} 
```

编辑：场景的 3D Studio 渲染（显示 UV 在球体上正常）：

![在此处输入图像描述](../Images/c38a690f409ddc2b4a819b5ced335f1a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T16:29:44.713

我认为您的着色器还可以，但是球体上的纹理坐标完全关闭。就好像它们被扭曲到沿经度的两极。

# java - 使用交替时的 Java 正则表达式优先级

> ID：10031593
> 
> 赞同：1
> 
> 时间：2012-04-05T15:33:38.313
> 
> 标签：java, regex

给定一组由 OR（即 | ）分隔的 java 正则表达式模式，这些模式是否会遵循任何特定的优先级。

示例代码：-

```
 List<String> columnValues = new ArrayList<String>

    String []columnPatterns = new String[] { "(\\S\\s?)+", "(\\S\\s?)+",
                "(\\d+,?)+\\.\\d+ | \\d+:\\d+", "(\\S\\s?)+",
                "-?\\$?(\\d+,?)+\\.\\d+" };

    String searchString = "Text1            This is Text 2                                          129.80";

    int findFrom = 0;
    int columnIndex = 0;
    List<String> columnValues = new ArrayList<String>();
    for (String pattern : columnPatterns) {
        Pattern p = Pattern.compile(pattern);
        Matcher m = p.matcher(searchString);
        if (m.find(findFrom)) {
            columnValues.add(columnIndex++,
                    searchString.substring(m.start(), m.end()).trim());
            findFrom = m.end();
        }
    }

    for (String value : columnValues) {
        System.out.println("<" + value + ">");
    } 
```

上面的代码产生以下结果：-

```
 <Text1>
    <This is Text 2>
    <129.80> 
```

但是，如果我将 columnPatterns 数组中索引位置 2 处的模式从 "(\d+,?)+\.\d+ | \d+:\d+" 更改为 "(\d+,?)+\.\d+ | \d+ :\d+ | \d+" 如下图：-

```
 columnPatterns = new String[] { "(\\S\\s?)+", "(\\S\\s?)+",
                "(\\d+,?)+\\.\\d+ | \\d+:\\d+ | \\d+", "(\\S\\s?)+",
                "-?\\$?(\\d+,?)+\\.\\d+" }; 
```

我得到以下结果：-

```
 <Text1>
   <This is Text 2>
   <129>
   <.80> 
```

这是否意味着应用了某种隐式优先级，或者这背后是否有其他原因，以及这种行为的解决方案/解决方法是什么？

编辑：另外，为什么代码的行为方式如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:40:57.610

> 给定一组由 OR（即 | ）分隔的 java 正则表达式模式，这些模式是否会遵循任何特定的优先级

左到右。在字符串中的每个位置，每个交替都将按顺序进行测试，首先匹配的将是最终匹配（除非稍后回溯）。

在您的情况下，最后一个替代将首先匹配，因为您在它的开头有一个空格，因此当之前的替代不匹配时它可以匹配。

例如匹配`\d| \d`string 上的模式`foo 7`，第二个替换将首先匹配 string 中的索引 3。第一个无法在该位置匹配，只能在索引 4 处匹配。

# jquery - IE8 的 JQuery 日期选择器问题

> ID：10031597
> 
> 赞同：0
> 
> 时间：2012-04-05T15:33:49.323
> 
> 标签：jquery, internet-explorer, internet-explorer-8, datepicker

我正在通过旅行优惠开发一个搜索引擎，并且 i0ve 有几个包含开始日期和结束日期的字段，其中包含 datepicker。它在任何地方都很好用，但在 Internet Explorer 8 中：它只显示 2...IE 的第一个日历在这些行中给我一个警报，但我看不出问题出在哪里：

```
function spCalendar( id, options, from, to )
{
 jQuery( document ).ready(
  function() {
   jQuery.extend( 
    options, { 
     onClose: function() {
      time =  jQuery( this ).datepicker( 'getDate' );
      jQuery( '#'+this.get( 'id' ).replace( '_selector', '' ) ).val( new Date( time       ).valueOf() ); 
 }     
}
   );
jQuery.extend( options, spCalLang );
jQuery( '#'+id+'_from_selector' ).datepicker( options );
if( from > 0 ) {
 jQuery( '#'+id+'_from_selector' ).datepicker( 'setDate', new Date( from ) );    
}
else {
 jQuery( '#'+id+'_from_selector' ).val( '' );
}      
jQuery( '#'+id+'_to_selector' ).datepicker( options );
if( to > 0 ) {
 jQuery( '#'+id+'_to_selector' ).datepicker( 'setDate', new Date( to ) );    
}
else {
 jQuery( '#'+id+'_to_selector' ).val( '' );
   }   
  } 
 );
}
; 
```

感谢帮助！

[这是页面](http://www.mawitalia.it/viaggidiatlantide/calendar1.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:24:52.130

我不知道您是否仍然遇到此问题，但我在您的 OP 代码中看到的两个问题已在下面修复：

```
function spCalendar(id, options, from, to) {
    jQuery(document).ready(function() {
        jQuery.extend(options, {
            "onClose": function() {
                var time = jQuery(this).datepicker('getDate'); //Added var keyword to declare variable
                jQuery('#' + this.get('id').replace('_selector', '')).val(new Date(time).valueOf());
            }
        });
        jQuery.extend(options, spCalLang);
        jQuery('#' + id + '_from_selector').datepicker(options);
        if (from > 0) {
            jQuery('#' + id + '_from_selector').datepicker('setDate', new Date(from));
        } else {
            jQuery('#' + id + '_from_selector').val('');
        }
        jQuery('#' + id + '_to_selector').datepicker(options);
        if (to > 0) {
            jQuery('#' + id + '_to_selector').datepicker('setDate', new Date(to));
        } else {
            jQuery('#' + id + '_to_selector').val('');
        }
    });
}​ //removed unnecessary semi-colon 
```

我不再有 IE8，所以我无法测试你链接到的网站。此外，指向[http://www.mawitalia.it/viaggidiatlantide/components/com_sobipro/var/js/2b243ae1f1120a3d557ef0e4f3189a89.js](http://www.mawitalia.it/viaggidiatlantide/components/com_sobipro/var/js/2b243ae1f1120a3d557ef0e4f3189a89.js)的链接返回 404 - Not Found。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T18:37:38.960

尝试

```
 function() {
        jQuery.extend( 
            options, { 
                onClose: function(dateText, inst) {
                var dtPicker = $("#"+inst.id);
                    time =  dtPicker.datepicker( 'getDate' );
                    jQuery( jQuery(dtPicker).attr( 'id' ).replace( '_selector', '' ) ).val( new Date( time ).valueOf() ); 
                }                   
            }
        ); 
```

也适用于 IE7 删除 'yearSuffix' 的最后一个逗号：'',<----

```
spCalLang = {
'timeOnlyTitle': 'Choose Time',
'timeText': 'Time',
'hourText': 'Hour',
'minuteText': 'Minute',
'secondText': 'Second',
'currentText': 'Oggi',
'closeText': 'Scegli',
'monthNames': ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno', 'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'],
'monthNamesShort': ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
'dayNames': ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
'dayNamesShort': ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
'dayNamesMin': ['Do', 'Lu', 'Ma', 'Me', 'Gi', 'Ve', 'Sa'],
'weekHeader': '',
'yearSuffix': ''}; 
```

# c++ - 我们如何自定义使用 `std::iterator` 的目的和教程

> ID：10031599
> 
> 赞同：1
> 
> 时间：2012-04-05T15:33:54.190
> 
> 标签：c++

```
class MainClass
{    
    class EmbeddedClass
    {...};

    class const_iterator 
      : public std::iterator<std::random_access_iterator_tag, EmbeddedClass> 
    {...}

    class iterator: public const_iterator
    {...};
}; 
```

我在一个遗留项目中看到了上述设计。

问题 1> 设计嵌入式的主要目的是`class const_iterator`什么`class iterator`？

问题 2> 是否有一个很好的设计教程来说明我们如何以专业的方式实现自定义`const_iterator`或类？`iterator`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:08:32.563

> 问题1> 设计嵌入式类const_iterator和类迭代器的主要目的是什么？

大概`MainClass`表示某种容器、集合、列表生成器或其他可迭代的数据结构。创建具有这些名称的迭代器类允许在标准算法（如or `MainClass`）中用作容器类。`std::for_each``std::accumulate`

> 问题 2> 有没有很好的设计教程来说明我们如何以专业的方式实现自定义的 const_iterator 或迭代器类？

我没有立即意识到一个。

# php - 如何在我的网站中嵌入指向办公地点的 Bing 地图？

> ID：10031600
> 
> 赞同：2
> 
> 时间：2012-04-05T15:34:05.513
> 
> 标签：php, javascript, maps

如何通过描述性信息窗口将 Bing 地图嵌入指向我的办公室地址的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:47:55.537

这是一个例子：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head>
      <title>Infobox set location</title>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
      <script type="text/javascript">
      var map = null;

      function getMap()
      {
        map = new Microsoft.Maps.Map(document.getElementById('myMap'), {credentials: 'Your Bing Maps Key'});
      }

      function setInfoBoxLocation()
      {
        map.entities.clear();         
        var infoboxOptions = {width :200, height :100, showCloseButton: true, zIndex: 0, offset:new Microsoft.Maps.Point(10,0), showPointer: true, title:'Infobox Title', description:'Infobox description' }; 
        var defaultInfobox = new Microsoft.Maps.Infobox(map.getCenter(), infoboxOptions );    
        map.entities.push(defaultInfobox); 
        defaultInfobox.setLocation(new Microsoft.Maps.Location(47.4, -122.33));
      }
      </script>
   </head>
   <body onload="getMap();">
      <div id='myMap' style="position:relative; width:400px; height:400px;"></div>
      <div>
         <input type="button" value="SetInfoBoxLocation" onclick="setInfoBoxLocation();" />
      </div>
   </body>
</html> 
```

以下是更多示例： http: [//www.bingmapsportal.com/ISDK/AjaxV7](http://www.bingmapsportal.com/ISDK/AjaxV7)

# c# - 从 Winform 应用程序中的 Combobox 读取值

> ID：10031603
> 
> 赞同：3
> 
> 时间：2012-04-05T15:34:17.133
> 
> 标签：c#, winforms, nullreferenceexception

我正在使用 VS2010 构建一个 Windows 窗体应用程序。我想读取用户从下拉列表中选择的值并基于该值`ComboBox`生成。`patientNo`但是当我运行应用程序时，我得到一个`NullReferenceException`.

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    string patientNumber;

    string gender = comboBox2.SelectedValue.ToString();
    if (gender != null)
    {
        if (gender == "Female")
        {
            var generator = new PatientNumberGenerator();
            patientNumber = generator.GeneratePatientNumber(Gender.Female);
            const string message = "patientNumber";

            const string caption = "Testing PatientNumber class";
            var result = MessageBox.Show(message, caption,
                                         MessageBoxButtons.YesNo,
                                         MessageBoxIcon.Question);

        }
        else if (gender == "Male")
        {
            var generator = new PatientNumberGenerator();
            patientNumber = generator.GeneratePatientNumber(Gender.Male);
            const string message = "patientNumber";

            const string caption = "Testing PatientNumber class";
            var result = MessageBox.Show(message, caption,
                                         MessageBoxButtons.YesNo,
                                         MessageBoxIcon.Question);
        }
   } 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T15:43:58.517

你还没有说异常发生在哪一行，所以它有点在黑暗中拍摄。然而：

```
string gender = comboBox2.SelectedValue.ToString(); 
```

`comboBox2.SelectedValue`可能为 null，在这种情况下尝试调用`ToString()`它会导致 NullReferenceException。尝试：

```
if (comboBox2.SelectedValue == null)
{
    return;
}
string gender = comboBox2.SelectedValue.ToString();
//[etc…] 
```

如果这不是您的问题，则异常可能在该方法的其他调用中，例如`GeneratePatientNumber`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T18:02:26.977

如果您在代码中的某处将`comboBox2.DataSource`属性设置为某个数据源，`.SelectedValue`则将检索一个值。如果您**没有**设置该`.DataSource`属性，`SelectedValue`则将返回 null。

我假设由于您不断获得空值，因此您没有设置数据源，而是在 VS 设计器中设置您的项目。如果是这种情况，您应该改用：

```
comboBox2.SelectedItem.ToString() 
```

检索列表中的 SelectedItem。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:42:35.500

除了 GeneratePatientNumber 之外，我唯一能看到你会得到 NullReferenceException 的地方是

```
comboBox2.SelectedValue.ToString(); 
```

如果未选择任何内容，则为`.SelectedValue`null，因此不能`ToString()`调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T18:31:38.433

我知道这已经有一年多了，但我正在做一个类似的项目，但错误完全相同。为我解决的问题是使用

```
comboBox2.SelectedText.ToString(); 
```

或者

```
comboBox2.SelectedItem.ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-14T04:14:55.377

请勿在使用`combobox1.SelectedValue`中`case`使用：

```
string selected = combobox1.SelectedItem.ToString(); 
```

它对我有用。

# sql-server-2008 - 使用光标了解两个日期之间的天数

> ID：10031604
> 
> 赞同：-4
> 
> 时间：2012-04-05T15:34:23.810
> 
> 标签：sql-server-2008, tsql

我有一张这样的桌子

```
SELECT V_EP_ID,V_START_DATE,V_END_DATE 
FROM PGATEINTRA.dbo.EMPLOYEE_VACATIONS 
ORDER BY V_EP_ID ASC 
```

上述查询的输出是

```
V_EP_ID     V_START_DATE             V_END_DATE
------------------------------------------------------
28        2010-06-21 00:00:00     2010-06-21 00:00:00
103       2011-06-27 00:00:00     2011-06-27 00:00:00
103       2011-08-12 00:00:00     2011-08-12 00:00:00
104       2011-03-24 00:00:00     2011-03-24 00:00:00
104       2011-05-06 00:00:00     2011-05-06 00:00:00
104       2010-06-07 00:00:00     2010-06-08 00:00:00
104       2011-02-23 00:00:00     2011-02-25 00:00:00
... 
```

我写了这样的声明

```
SELECT * FROM PGATEINTRA.dbo.EMPLOYEE_VACATIONS 
WHERE V_START_DATE >='2010-06-21 00:00:00' 
   AND V_END_DATE <= '2010-06-21 00:00:00' 
```

通过传递 v_start_date 和 v_end_date 从`PGATEINTRA.dbo.EMPLOYEE_VACATIONS`

我得到的输出为

```
V_ID  V_TYPE  V_EP_ID V_REASON      V_START_DATE         V_END_DATE
----------------------------------------------------------------------------
3      c        28     Took leave   2010-06-21 00:00:00  2010-06-21 00:00:00
7      c       109     Took leave   2010-06-21 00:00:00  2010-06-21 00:00:00 
```

我希望输出动态获取 V_START_DATE 和 V_END_DATE 之间的所有 V_EP_ID FROM PGATEINTRA.dbo.EMPLOYEE_VACATIONS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:36:43.350

我不知道游标在这里发挥作用，但我认为您需要的是`DATEDIFF`功能：

```
WHERE DATEDIFF(DAY, V_START_DATE, V_END_DATE) = 0 
```

# php - 优化 WebSQL 本地数据库填充

> ID：10031605
> 
> 赞同：4
> 
> 时间：2012-04-05T15:34:24.810
> 
> 标签：php, javascript, sqlite, web-sql

我正在尝试优化本地数据库在正在开发的 Web 应用程序中的填充速度。目前，它使用 PHP 访问数据库，然后使用 Javascript 将该数据插入本地数据库。

问题是，除了几个条目之外，任何东西都会减慢它的速度，我很确定这是因为它为每一行执行一个单独的 SQL 查询。我一直在阅读事务（提交和回滚等等），这似乎是一个答案，但我不完全确定如何实现它，甚至不知道在哪里实现它。

这是加载特定表的函数之一的示例。

```
function ploadcostcodes()
{
$IPAddress = '';
$User = '';
$Password = '';
$Database = '';
$Company  = '';
$No='';
$Name='';
ploadSQLConnection($IPAddress,$User,$Password,$Database,$Company); 
```

// 这连接到信息来自的实际数据库。

```
$Login = 'XXXXXXX';
$conn=mssql_connect($IPAddress,$Login,$Password);
 if (!$conn )
{
      die( print_r('Unable to connect to server', true));
}
 mssql_select_db($Database, $conn);

 $indent="        ";

$sql="SELECT Cost_Code_No as No, Description as Name, Unit_of_Measure FROM v_md_allowed_user_cost_codes WHERE Company_No = " . $Company . " and User_No = '" . $User . "'";

 $rs=mssql_query($sql);
 if (!$rs)
 {
   exit("No Data Found");
 }

 while ($row = mssql_fetch_array($rs))
 {
     $No = addslashes($row['No']);
     $Name = addslashes($row['Name']);
     $Name = str_replace("'",'`',$Name);
     $Unit = addslashes($row['Unit_of_Measure']);

  //THIS IS WHERE I SEE THE PROBLEM

     echo $indent."exeSQL(\"INSERT INTO Cost_Codes (Cost_Code_No,Name,Unit_of_Measure) VALUES('".$No."','".$Name."','".$Unit."')\",\"Loading Cost Codes...\"); \r\n";
 }
 mssql_free_result($rs);
 mssql_close($conn);
 return 0;
} 
```

我不知道交易需要什么（或者即使那是需要做的）。有用于访问数据的 MSSQL、用于插入数据的 SQLite 和运行 PHP 代码的 Javascript。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-05T15:43:01.110

我会准备一个带有占位符的查询，然后使用正确的参数为每一行执行它。像这样的东西（仅 JS 部分，使用[underscore.js](http://documentcloud.github.com/underscore/)作为数组助手）：

```
db.transaction(function(tx) {
    var q = 'INSERT INTO Cost_Codes (Cost_Code_No, Name, Unit_Of_Measure) VALUES (?, ?, ?)';
    _(rows).each(function(row) {
        tx.executeSql(q, [row.code, row.name, row.unit]);
    });
}); 
```

编辑：带占位符的查询有两个主要好处：

1.  它使数据库引擎更容易缓存和重用查询计划（因为您运行相同的查询一百次而不是一百次不同的查询一次）。
2.  它使转义数据和避免 SQL 注入变得更加容易。

# java - 在固定时间后中断线程，是否必须抛出 InterruptedException？

> ID：10031607
> 
> 赞同：5
> 
> 时间：2012-04-05T15:34:36.350
> 
> 标签：java, concurrency, timeout

我想在固定的时间后中断一个线程。其他人问了同样的问题，投票最多的答案（[https://stackoverflow.com/a/2275596/1310503](https://stackoverflow.com/a/2275596/1310503)）给出了下面的解决方案，我稍微缩短了。

```
import java.util.Arrays;
import java.util.concurrent.*;

public class Test {
    public static void main(String[] args) throws Exception {
        ExecutorService executor = Executors.newSingleThreadExecutor();
        executor.invokeAll(Arrays.asList(new Task()), 2, TimeUnit.SECONDS);
        executor.shutdown();
    }
}

class Task implements Callable<String> {
    public String call() throws Exception {
        try {
            System.out.println("Started..");
            Thread.sleep(4000); // Just to demo a long running task of 4 seconds.
            System.out.println("Finished!");
        } catch (InterruptedException e) {
            System.out.println("Terminated!");
        }
        return null;
    }
} 
```

他们补充说：

> sleep() 不是必需的。它仅用于 SSCCE/演示目的。只需在此处代替 sleep() 执行您的长时间运行的任务。

但是如果你替换`Thread.sleep(4000);`为`for (int i = 0; i < 5E8; i++) {}`then 它不会编译，因为空循环不会抛出 InterruptedException。为了使线程可中断，它需要抛出一个 InterruptedException。

有什么方法可以使上述代码与一般的长时间运行的任务一起工作，而不是`sleep()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T15:40:23.403

如果您希望您的操作是可中断的（即应该可以在它完成之前中断它），您需要使用其他可中断操作（Thread.sleep、InputStream.read、[阅读更多信息](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#interrupt%28%29)）或手动检查线程中断状态使用 Thread.isInterrupted 的循环条件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T15:42:56.427

您可以检查线程的中断状态，例如：

```
public static void main(String[] args) throws Exception {
    ExecutorService executor = Executors.newSingleThreadExecutor();
    executor.invokeAll(Arrays.asList(new Task()), 2, TimeUnit.SECONDS);
    executor.shutdown();
}

static class Task implements Callable<String> {

    public String call() throws Exception {
        System.out.println("Started..");
        for (int i = 0; i < Integer.MAX_VALUE; i++) {
            if (Thread.currentThread().isInterrupted()) {
                System.out.println("Interrupted!");
                return null;
            }
        }
        System.out.println("Finished!");
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T15:38:00.643

你误会了。

*“...为了使线程可中断，它需要抛出一个 InterruptedException”*根本不正确。那个 catch 块的存在只是因为`Thread.sleep()`方法 throws `InterruptedException`。如果您没有使用 sleep （或任何其他可以 throw 的代码`InterruptedException`），那么您不需要 catch 块。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-05T15:48:39.050

`InterruptedException`如果您替换`sleep`. 您应该删除 try-catch `InterruptedException`：

```
public String call() {
    System.out.println("Started..");
    for (int i = 0; i < 5E8; i++) {}
    System.out.println("Finished!");
    return null;
} 
```

# jquery - 如何在滚动时固定 div

> ID：10031610
> 
> 赞同：-3
> 
> 时间：2012-04-05T15:35:09.117
> 
> 标签：jquery, css

有没有一种使用 JQuery 的方法可以检测 div 何时开始离开屏幕，并更改其 CSS 以使其位置变为固定并卡在窗口底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:41:52.057

如果我是正确的，我认为您正在寻找的是带有航点的 JQuery 中的粘性元素。看看这个页面：[JQuery Waypoints](http://imakewebthings.com/jquery-waypoints/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:36:34.390

CSS

```
.div-fixed {
  position: fixed;
  bottom: 10px;
  right: 10px;
} 
```

JS

```
if ($('#mydiv').offset().top() + $('#mydiv').height() > $(document).height()) {
  $('#mydiv').addClass('div-fixed');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:39:21.700

这是我以前使用过的**[jsFiddle 演示。](http://jsfiddle.net/YYzVq/light/)**

jQuery：

```
var stickerTop = parseInt($('#sticker').offset().top);
$(window).scroll(function() {
    $("#sticker").css((parseInt($(window).scrollTop()) + parseInt($("#sticker").css('margin-top')) > stickerTop) ? {
        position: 'fixed',
        top: '0px'
    } : {
        position: 'relative'
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T15:53:44.267

JS

```
var backup_position_toolbar = $('#toolbar').offset().top;
$(window).scroll(function() {
    if ( $('#toolbar').offset().top - $(window).scrollTop() < 0 ) $('#toolbar').addClass('fixed');
    if ( $(window).scrollTop() < backup_position_toolbar ) $('#toolbar').removeClass('fixed');
}); 
```

CSS

```
.fixed {
    margin: 1px;
    position: fixed;
    top: 0;
} 
```

# hsqldb - HSQL：尝试创建外键约束时出错

> ID：10031613
> 
> 赞同：1
> 
> 时间：2012-04-05T15:35:19.800
> 
> 标签：hsqldb

以下是我的表的创建 DDL：

```
create table REFDATA.CONFIG_COLLECTION  (
COLLECTION_ID        NUMBER(22,7)                      not null,
COLLECTION_CD        VARCHAR2(12)                    not null,
COLLECTION_TYPE      VARCHAR2(12)                    not null,
COLLECTION_DESC      VARCHAR2(255),
primary key (COLLECTION_ID) 
)
create unique index REFDATA.CONFIG_COLLECTION_AK on REFDATA.CONFIG_COLLECTION (COLLECTION_CD); 
```

然后我有以下更改来创建外键：

```
alter table REFDATA.CONFIG_COLLECTION_MEMBER
add foreign key (COLLECTION_CD)
references REFDATA.CONFIG_COLLECTION (COLLECTION_CD); 
```

加载 HSQLDB 时出现以下错误：

```
Caused by: java.sql.SQLException: Primary or unique constraint required on main table: CONFIG_COLLECTION in statement [

alter table REFDATA.CONFIG_COLLECTION_MEMBER
   add foreign key (COLLECTION_CD)
      references REFDATA.CONFIG_COLLECTION (COLLECTION_CD)]
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.jdbcStatement.fetchResult(Unknown Source)
    at org.hsqldb.jdbc.jdbcStatement.execute(Unknown Source)
    at org.apache.commons.dbcp.DelegatingStatement.execute(DelegatingStatement.java:264)
    at org.springframework.jdbc.core.JdbcTemplate$1ExecuteStatementCallback.doInStatement(JdbcTemplate.java:420)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:395)
    ... 46 more 
```

这里有什么问题？在我看来，我已经正确指定了唯一约束。这是 HSQLDB 的 1.8 版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:15:06.577

唯一索引不是唯一约束。您不需要唯一索引，但必须创建唯一约束。

```
ALTER TABLE REFDATA.CONFIG_COLLECTION ADD CONSTRAINT CONFIG_COLLECTION_AK UNIQUE(COLLECTION_CD); 
```

# sql - 选择下一行

> ID：10031614
> 
> 赞同：1
> 
> 时间：2012-04-05T15:35:20.727
> 
> 标签：sql, sql-server, tsql, sql-server-2008-express

我想将当前行中的两个文本字段与下一行中的相同字段连接起来

所以如果桌子像

```
field1  field2  field3

text1    text3  order1
text2    text4  order1 
```

我想这样做：

```
if (field3.current_row = field3.next_row)
     SELECT field1 + getNextRow(field1) as "Concatenated Field" FROM table 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T16:13:18.100

如果您已经在 SQL Server **2012**上，则可以执行以下操作：

```
SELECT field1 + lead(field1) over (order by field1) as "Concatenated Field"
from table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T16:08:56.727

你可以做类似的事情：

```
create table #temp
(
    field1 varchar(50),
    field2 varchar(50)
)

insert into #temp values ('text1', 'text3')
insert into #temp values ('text2', 'text4')

;with cte as
(
    select *, row_number()over(order by field1) as rownum
    from #temp
)
SELECT *
FROM 
(
    select c1.field1 + ' ' + (SELECT field1 FROM cte c2 WHERE c2.rownum = c1.rownum + 1) as ConcField
    from cte c1
) c
where c.concfield is not null

drop table #temp 
```

# c++ - CBS_DROPDOWNLIST 组合无法响应 WM_CTLCOLOR... 在 Windows UX 主题下

> ID：10031621
> 
> 赞同：1
> 
> 时间：2012-04-05T15:35:53.843
> 
> 标签：c++, windows, winapi, windows-7

我们有一些 C++ Win32 代码通过响应 WM_CTLCOLOR... 消息将背景颜色应用于某些控件。

当 Windows UX 主题不运行时，这可以正常工作。

在默认主题的 Windows 7 下，具有 CBS_DROPDOWNLIST 样式的组合框仅以主题的灰色背景显示。CBS_DROPDOWN 组合框正确响应启用主题的背景颜色变化。

我知道我可以删除受影响控件的主题，但这会让它们看起来很奇怪。

既然 MS 似乎已经破坏了 WM_CTLCOLOR... 的东西，任何人都知道更改单个主题控件的背景颜色的官方方法。

谢谢JF

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:46:49.890

您可能会检查是否可以使用[NM_CUSTOMDRAW](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775528%28v=vs.85%29.aspx)通知完成您想要的操作。这些被发送到父级（如 WM_CTLCOLOR... 消息）。使用这些通知，某些控件比其他控件效果更好。您并不总是会收到您期望的所有通知。

另一个选项是子类化控件并覆盖 WM_PAINT。这将是很多工作，但它是可行的。有关于[主题绘画的](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373487%28v=vs.85%29.aspx#drawing_controls_vs)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:42:26.147

如果要更改主题控件的颜色，则需要使用主题 API 自定义绘制它。这是一项相当棘手的任务，基本上没有记录。祝你好运！

# android - 启动超时已过期，放弃唤醒锁！HistoryRecord 的活动空闲超时。这有什么好担心的吗？

> ID：10031624
> 
> 赞同：10
> 
> 时间：2012-04-05T15:35:55.590
> 
> 标签：android, android-activity, timeout, android-asynctask

在我的应用程序中，我使用`AsyncTask`. `oncreate`有时我会在日志中收到“启动超时已过期，放弃唤醒锁！HistoryRecord 的活动空闲超时”。这会导致任何问题，还是我们可以忽略它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-09T06:35:43.790

终于找到了答案。这可以忽略。

这意味着您的主线程不断运行，通过其消息队列泵送消息而不会空闲。如果这是您想要的，则没有什么可修复的。这就是日志消息是警告而不是错误的原因。

来源：[谷歌群组](https://groups.google.com/forum/?fromgroups#!topic/android-developers/TfkPlN5b-ig)

# .net - IsNumeric 在评估对象时抛出 FormatException

> ID：10031626
> 
> 赞同：2
> 
> 时间：2012-04-05T15:35:56.110
> 
> 标签：.net, vb.net, visual-studio, compact-framework, windows-ce

我正在使用 Visual Studio 2008 为 Windows CE 6.0 紧凑型框架开发软件。

我有这个“奇怪？” isNumeric 方法有问题。还有其他更好的方法来完成这项工作吗？为什么让我例外？（事实上​​有两个……都是 FormatException 类型）

谢谢

```
dim tmpStr as object = "Hello"
if isNumeric(tmpStr) then    // EXCEPTIONs on this line
    // It's a number
else
    // it's a string
end if 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T15:43:45.897

即使它`FormatException`的文档中没有列出`IsNumeric`它确实是可以抛出的异常之一。将被抛出的情况是

*   传递了一个字符串值
*   字符串没有`0x`or`&H`前缀

不过，我找不到这种行为的任何理由。我什至能够辨别它的唯一方法是深入研究反射器中的实现。

解决它的最好方法似乎是定义一个包装方法

```
Module Utils
  Public Function IsNumericSafe(ByVal o As Object) As Boolean
    Try
      Return IsNumeric(o)
    Catch e As FormatException
      Return False
    End Try
  End Function
End Module 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:43:10.280

您收到此错误的原因实际上是因为 CF 不包含`TryParse`方法。另一种解决方案是使用正则表达式：

```
Public Function CheckIsNumeric(ByVal inputString As String) As Boolean
    Return Regex.IsMatch(inputString, "^[0-9 ]+$")
End Function 
```

**编辑**

这是一个更全面的正则表达式，应该匹配任何类型的数字：

```
Public Function IsNumeric(value As String) As Object

    'bool variable to hold the return value
    Dim match As Boolean

    'regula expression to match numeric values
    Dim pattern As String = "(^[-+]?\d+(,?\d*)*\.?\d*([Ee][-+]\d*)?$)|(^[-+]?\d?(,?\d*)*\.\d+([Ee][-+]\d*)?$)"

    'generate new Regulsr Exoression eith the pattern and a couple RegExOptions
    Dim regEx As New Regex(pattern, RegexOptions.Compiled Or RegexOptions.IgnoreCase Or RegexOptions.IgnorePatternWhitespace)

    'tereny expresson to see if we have a match or not
    match = If(regEx.Match(value).Success, True, False)

    'return the match value (true or false)
    Return match

End Function 
```

有关详细信息，请参阅本文：[http ://www.dreamincode.net/code/snippet2770.htm](http://www.dreamincode.net/code/snippet2770.htm)

# android - Android + Zip4j-1.3.1 jar 抛出 VerifyError

> ID：10031628
> 
> 赞同：1
> 
> 时间：2012-04-05T15:36:34.010
> 
> 标签：android

我正在尝试在我的 android 项目中使用 zip4j jar 文件来密码保护应用程序中的 zip 文件。复制 lib 文件夹中的 jar 并将其添加到构建路径。代码编译得很好。但是当我运行该项目时，它会给出VerifyError。

注意：如果我将源代码而不是 jar 添加到项目中，它工作正常。

```
E/dalvikvm(1502): Could not find class 'net.lingala.zip4j.core.ZipFile', referenced from method a.test.zip.ZipHelper.zipFilesWithStandardZipEncryption
W/dalvikvm(1502): VFY: unable to resolve new-instance 45 (Lnet/lingala/zip4j/core/ZipFile;) in La/test/zip/ZipHelper;
D/dalvikvm(1502): VFY: replacing opcode 0x22 at 0x002a
W/dalvikvm(1502): VFY: unable to resolve exception class 46 (Lnet/lingala/zip4j/exception/ZipException;)
W/dalvikvm(1502): VFY: unable to find exception handler at addr 0x78
W/dalvikvm(1502): VFY:  rejected La/test/zip/ZipHelper;.zipFilesWithStandardZipEncryption (Landroid/content/Context;)V
W/dalvikvm(1502): VFY:  rejecting opcode 0x0d at 0x0078
W/dalvikvm(1502): VFY:  rejected La/test/zip/ZipHelper;.zipFilesWithStandardZipEncryption (Landroid/content/Context;)V
W/dalvikvm(1502): Verifier rejected class La/test/zip/ZipHelper;
D/AndroidRuntime(1502): Shutting down VM
W/dalvikvm(1502): threadid=1: thread exiting with uncaught exception (group=0x4001d800) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:18:13.087

你把你的jar文件放在哪里了？没有必要，但在某些情况下，它的工作原理如下：您需要将 jar 放在 assets 文件夹中。然后你配置你的 Java 构建路径。从 assets 文件夹添加 jar，然后（在 eclipse 中，进入 order and export 选项卡并检查 jar 文件）导出 jar。它会自动将其添加到您的应用程序库文件夹中。我不知道为什么，但在我的一个应用程序中它并没有反过来工作（复制 lib 中的 jar 并将其添加到 builtpath）。你也可以改变你的java编译器。

# html - 防止单元格扩大表格高度

> ID：10031643
> 
> 赞同：2
> 
> 时间：2012-04-05T15:37:26.040
> 
> 标签：html, css

我正在尝试使图像采用表格的所有剩余宽度并跨越表格的整个高度而不进一步扩展它，如果没有足够的高度，则使用溢出：自动滚动。

宽度位很容易，但无论我做什么，包含图像的表格单元格都会扩展表格的高度。除了明确设置图像的高度之外，有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:11:04.020

到目前为止，我发现的解决方案在浏览器上有所不同，因此并不理想。您可以根据客户端呈现不同的标记。（但仍在寻找更普遍的答案。）

再次更新了迄今为止最通用的解决方案：

```
<style>
    div.ImageBlock
    {
        height:100%;
        width:100%;
        left:0px;
        top:0px;
        overflow:auto;
    }
    div.IE_CompatMode
    {
        position:absolute;
    }
</style> 
```

两者都可以在 Chrome 中使用，并且当 IE 的兼容模式为 On 时，必须添加 IE_CompatMode。

```
<td rowspan="2" style="position:relative;">
    <div class="ImageBlock [conditional:]IE_CompatMode">
        <img src="Images/Jellyfish.jpg" style="position:absolute; top:0px; left:0px;" />
    </div>
</td> 
```

在 Firefox 中没有任何东西（*我还没有尝试过）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:52:45.050

您必须在内容周围使用包装元素来限制高度。

```
<table>
    <tr>
        <td><div class="overflow">This is short.</div></td>        
        <td><div class="overflow">This is longer.</div></td>   
        <td><div class="overflow">This is really long and repeated. This is really long and repeated.</div></td>           
    </tr>
</table>

.overflow {
    max-height:40px;
    overflow:hidden;
}

var tableHeight = $('table').height();
$('.overflow').css('height',tableHeight + 'px'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T16:02:15.537

总是可以给图像一个百分比，例如 height="100%" 这应该使它成为它所在的单元格的完整大小，但会限制溢出。

# php - htaccess 通用重写规则

> ID：10031644
> 
> 赞同：0
> 
> 时间：2012-04-05T15:37:34.527
> 
> 标签：php, apache, .htaccess, redirect

我有以下重写设置：

```
RewriteRule r/(.*) scripts/report.php?cp=1&id=$1 
```

重定向 mydomain.com/r/123abc 效果很好，但它会重定向服务器上以“r”开头的所有页面。有谁知道我如何才能更具体地只在 url 为 mydomain.com/r/ 时重定向？我应该注意，我需要保持这个通用性，所以我不能在规则中包含 mydomain.com。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:42:26.710

我不确定这是否适合您（未经测试），但请尝试一下：

```
# Rewrite ini
RewriteEngine on
RewriteBase /mydomain.com/

# Redirect all /mydomain.com/r/* calls to scripts/report.php
RewriteRule ^r/(.*)$ scripts/report.php?cp=1&id=$1 [QSA] 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:43:30.560

试着在你的重写规则`^/`前面加上一个。`r/(.*)`这将使它：

```
RewriteRule ^/r/(.*) scripts/report.php?cp=1&id=$1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:44:57.340

您应该指定 RegEx 应该匹配*整个字符串*，而不是只匹配字符串。您可以使用`^`和`$`符号执行此操作：

```
RewriteRule ^r/(.*)$ scripts/report.php?cp=1&id=$1 
```

# graphics - 在 X 下可能以最低级别读取帧缓冲区

> ID：10031645
> 
> 赞同：1
> 
> 时间：2012-04-05T15:37:48.303
> 
> 标签：graphics, x11, framebuffer

对于我正在编写的安全应用程序，我想以最低级别读取视频卡的帧缓冲区。
我想尽可能确定我正在阅读的内容正是最终将放在硬件上点亮屏幕像素的内容，
并且中间没有软件层（或者至少我想要中间的层数尽可能少）。

我已经看到使用 X 在精确的时刻抓取屏幕非常容易，但该调用仍在通过 X 服务器。
我想要一些更底层的东西，即使这意味着在显卡上弄乱了一些 ioctl。
我已经看到了 DRI 和 DRI2 的存在，但它们的记录非常糟糕，尤其是后者。
我真的无法理解它们是如何工作的。您对一项好的研究有任何想法、参考或起点吗？

任何事情都会不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:58:15.573

我不确定阅读帧缓冲区会对您有多大帮助（即使无视 timday 在他的评论中指出的问题，决定您阅读的内容是否是您想要的内容可能不是很容易），但如果您是在 Linux 上这样做你可以映射[内核帧缓冲设备](http://en.wikipedia.org/wiki/Linux_framebuffer)，可能使用[DirectFB](http://directfb.org/)来帮助你。或者，如果您使用的是非 Linux PC 平台，则可以使用 VESA（查看 X.Org 中的 VESA 代码[和](http://ftp.x.org/pub/individual/xserver/)X.Org [VESA 驱动程序](http://ftp.x.org/pub/individual/driver/xf86-video-vesa-2.3.1.tar.gz)（实际代码在两者之间拆分）。请注意，您多显示器设置之类的东西可能也会有一些乐趣。

# php - PHP foreach 循环中的 JQuery $.post

> ID：10031655
> 
> 赞同：1
> 
> 时间：2012-04-05T15:38:15.647
> 
> 标签：php, jquery, exacttarget

我有一个表单，订阅者可以在其中选择他们想要接收的时事通讯，然后 AJAX 表单会将结果发送到 Exact Target 并将订阅者添加到订阅者想要添加的每个列表中。

我有一个 PHP foreach 循环设置来处理这个问题。

```
<?php foreach ($listNumbers as $item): ?>
            var xmlData = 'Ths is the ET API call';
            $.post('ET url for API call'+xmlData);      
        <?php endforeach; ?> 
```

循环运行后，用户会被发送到这样的感谢页面。

```
$(document).ready(function() {
location.href = "thank you url";
}); 
```

一切正常..在大多数情况下。我正在使用准备好的文档，因为我想给循环足够的时间来提交 API 调用。有没有办法检测 $.post 函数何时完成？如果成功了？然后将用户发送到感谢页面？

我发现在代码有机会运行之前，位置 href 正在将一些用户发送到感谢页面。

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:41:16.137

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

有一个回调告诉你它已经完成了

```
jQuery.post( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] ) 
```

*   url - 包含请求发送到的 URL 的字符串。
*   data - 与请求一起发送到服务器的映射或字符串。
*   success(data, textStatus, jqXHR) - 请求成功时执行的回调函数。
*   dataType - 来自服务器的预期数据类型。默认值：智能猜测（xml、json、脚本、文本、html）。

示例脚本，您需要跟踪所有请求是否已完成，尽管我强烈建议您编写一个新的服务器端调用，如果可以的话，您只能调用一次。

```
var xhrCount = <?= count($listNumbers) ?>;
<?php foreach ($listNumbers as $item): ?>
   var xmlData = 'Ths is the ET API call';
   $.post('ET url for API call'+xmlData, null, function() {
       xhrCount--;
       if (xhrCount === 0) {
           location.href = 'myurl'
       }
   });      
<?php endforeach; ?> 
```

不确定，您可能有什么问题，`count()`但您可以自己计算；

```
var xhrCount = 0;
<?php foreach ($listNumbers as $item): ?>
   var xmlData = 'Ths is the ET API call';
   xhrCount++;
   $.post('ET url for API call'+xmlData, null, function() {
       xhrCount--;
       if (xhrCount === 0) {
           location.href = 'myurl'
       }
   });      
<?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:41:48.923

```
$(document).ready(function() { }); // this is NOT the callback of the AJAX request 
```

以上将不起作用，因为它将立即被调用，因为您停留在同一页面上（已经准备好）。AJAX 调用是异步的，因此它不会等到请求完成。

您可以使调用异步或使用 ajax 请求的成功回调。

为了更好地澄清：

当`$(document).ready(function() {});`DOM 准备好时触发（即有点像页面已加载并且我已准备好其他内容（例如附加事件侦听器））。你想要做的是使用`.post()`像这样的回调：

```
$.post('ajax/test.html', function(data) {
  // this only gets called when the ajax request is finished
}); 
```

但真正的问题仍然存在：为什么要使用 PHP 循环来构建 AJAX 请求。那根本没有意义。您仍在使用 PHP 构建页面，那么为什么不添加您想要使用 AJAX 获取的内容呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:45:28.830

你可以试试这个 `var jqxhr = $.post('ET url for API call'+xmlData);`

循环后：

```
jqxhr.complete(function(){
  location.href = "thank you url";
}); 
```

您可以在文档中阅读有关 jqXHR 状态函数的[信息](http://api.jquery.com/jQuery.post/)。

但是你可能想改变你的整个方法。也许你的 PHP 应该输出一个你的页面可以循环的 javascript 数组。你想达到什么目的？

# sql - SQL中的逗号分隔列表

> ID：10031658
> 
> 赞同：30
> 
> 时间：2012-04-05T15:38:31.827
> 
> 标签：sql, sql-server, sql-server-2008

如何遍历 SQL 中的逗号分隔列表？我有一个 ID 列表，我需要将这些 ID 传递给存储过程。我不能更改存储过程。我需要弄清楚如何为每个 id 执行 SP。给我一些想法，我可以从那里继续。

谢谢。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-04-05T15:48:23.967

```
declare @S varchar(20)
set @S = '1,2,3,4,5'

while len(@S) > 0
begin
  --print left(@S, charindex(',', @S+',')-1)
  exec YourSP left(@S, charindex(',', @S+',')-1)
  set @S = stuff(@S, 1, charindex(',', @S+','), '')
end 
```

尝试 SE 数据：[走字符串](https://data.stackexchange.com/stackoverflow/query/66016)

# java - 用枚举替换字符串文字 If/elseIf 块

> ID：10031659
> 
> 赞同：3
> 
> 时间：2012-04-05T15:38:36.037
> 
> 标签：java

我是使用 Java Enums 的新手，我已经读过比较字符串文字的替换 IF 逻辑应该替换为 Enum。我不太明白如何用枚举替换下面的代码，有什么想法吗？基于传递给 applyEQ 的 col 值，我需要根据它的值执行下一个方法调用。我确实提前知道 col 的可能值，并且我现在正在使用常量文件。我应该创建一个枚举并将其放在我的常量接口文件中吗？

```
public class FilterHelper implements IFilterHelper {

   private final EQuery eQuery;

   public FilterHelper(EQuery query) {
      eQuery = query;
   }

    @Override
    public void applyEQ(String col, String val) throws Exception {
        int return = 0;
        if (col.equalsIgnoreCase(EConstants.NAME)) {
            ret = Sample.addName(eQuery, val);
        } else if (col.equalsIgnoreCase(EConstants.KEYWORDS)) {
            ret = Sample.addKey(eQuery, val);
        } else if (col.equalsIgnoreCase(EConstants.ROLE)) {
            ret = Sample.addRole(eQuery, val);
        }  

        if (return != 0) {
            throw new Exception("failed");
        }
    }
} 
```

**EConstants.java**

```
public final class EConstants {    
    public static final String NAME = "cewName";
    public static final String KEYWORDS = "cewKeywords";
    public static final String ROLE = "cewRole";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:43:17.833

您可以将 EConstants 重写为枚举：

```
public enum EConstants {
  NAME, KEYWORDS, ROLE
} 
```

并使用 switch 语句评估条件：

```
// col has type of EConstants
switch (col) {
  case NAME:
    // do something
    break;
  case KEYWORDS:
    // do something
    break;
  case ROLE:
    // do something
    break;
  default:
    // what to do otherwise
    break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:47:59.020

首先创建一个`enum`：

```
public enum EConstants {
    CEWNAME,
    CEWROLE,
    CEWKEYWORDS;
} 
```

然后将`col`String 转换为此`enum`并使用`switch`：

```
public void applyEQ(String col, String val) throws Exception {
    int ret = 0;
    final EConstants constant = EConstants.valueOf(col.toUpperCase());
    switch(constant) {
        case CEWNAME:
            ret = Sample.addName(eQuery, val);
            break;
        case CEWROLE:
            ret = Sample.addRole(eQuery, val);
            break;
        case CEWKEYWORDS:
            ret = Sample.addKey(eQuery, val);
            break;
        default:
            throw new Exception("Unhandled enum constant: " + constant);
    }
} 
```

请注意，如果不匹配任何常量值，`EConstants.valueOf()`则可以抛出。`IllegalArgumentException``col.toUpperCase()`

顺便说一句，我讨厌在多个地方（和`break`关键字）初始化的局部变量，尝试提取方法：

```
final EConstants constant = EConstants.valueOf(col.toUpperCase());
final int ret = processSample(val, constant); 
```

以及方法本身：

```
private int processSample(String val, EConstants constant) throws Exception {
    switch(constant) {
        case CEWNAME:
            return Sample.addName(eQuery, val);
        case CEWROLE:
            return Sample.addRole(eQuery, val);
        case CEWKEYWORDS:
            return Sample.addKey(eQuery, val);
        default:
            throw new Exception("Unhandled enum constant: " + constant);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T16:17:53.443

Java 枚举的伟大之处在于它们为类型安全枚举模式提供了语言级别的支持，因为它允许您定义方法甚至覆盖它们。所以你可以这样做：

```
public enum CewColumn {

NAME("cewName") {

    @Override
    public int add(EQuery eQuery, String val) {
        return Sample.addName(eQuery, val);
    }
}, 
KEYWORDS("cewKeywords") {

    @Override
    public int add(EQuery eQuery, String val) {
        return Sample.addKey(eQuery, val);
    }
}, 
ROLE("cewRole") {

    @Override
    public int add(EQuery eQuery, String val) {
        return Sample.addRole(eQuery, val);
    }
};

private final String colName;

private MyColumn(String colName) {
    this.colName = colName;
}

private static final Map<String, CewColumn> COLUMNS = new HashMap<>(values().length);
static{
    for (CewColumn cewColumn : values()){
        COLUMNS.put(cewColumn.colName, cewColumn);
    }
}

public abstract int add(EQuery eQuery, String val);

public static CewColumn getCewColumn(String colName){
    return COLUMNS.get(colName);
}
} 
```

然后你可以像这样使用它：

```
CewColumn cewColumn = CewColumn.getCewColumn(colName);
if (cewColumn != null){
    int ret = cewColumn.add(eQuery, val);
} 
```

-> 你用多态替换了 switch 语句！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T15:54:39.237

最好创建一个枚举。

```
 public Enum AvailableCols{
       COL_1,
       COL_2;
    } 
```

并将过程转换为

```
 public void applyEQ(AvailableCols col, String val) throws Exception { 
         switch(col){
             case COL1:
             ... 
```

如果您仍然希望保留字符串，可以查看以下[帖子](https://stackoverflow.com/questions/604424/java-convert-string-to-enum)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T15:43:59.763

基本上创建一个枚举并更改类型`col`并使用`equals()`或`==`比较`col`枚举值的值。或者，您可以使用`switch`语句，但我怀疑这会使您的代码仅对 3 个常量更具可读性。

例子：

```
enum EConstants {
   NAME,
   KEYWORDS,
   ROLE;
}

public void applyEQ(EConstants col, String val) throws Exception {
   if( col == EConstants.NAME ) {
    ...
   }
   ....
}

//or

public void applyEQ(EConstants col, String val) throws Exception {
   if( EConstants.NAME.equals(col) ) { //col might be null
    ...
   }
   ....
}

//or

public void applyEQ(EConstants col, String val) throws Exception {
   switch( col ) {
     case NAME: 
       ...
       break;
     case ROLE: 
       ...

   }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T15:49:25.090

[http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

如果您的原始数据是一个字符串，您仍然需要进行字符串比较来分配枚举。如果您对结果数据进行大量比较，这可能会更快，但如果没有，它只会增加代码的复杂性。

您可以像集合一样迭代枚举的值，这在您需要添加常量时为您提供了优势。这还不错。

这是如何做到的：

```
public enum EConstants {
    NAME, KEYWORDS, ROLE
}
...
public EConstants setConstant(String from) {
    if (from.equalsIgnoreCase("cewName")) {
        return NAME;
    } else if (col.equalsIgnoreCase("cewKeywords")) {
        return KEYWORDS;
    } else if (col.equalsIgnoreCase("cewRole")) {
        return ROLE;
    }      
} 
```

您以这种方式预处理数据，现在当您试图找出逻辑时，您可以在枚举类型值上使用开关。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T16:02:21.490

这是给你的一个窍门。不`switch/case`（只是想出一个更好的名字`EConstants`）。

```
public enum EConstants {
  NAME,
  KEYWORDS,
  ROLE;

  private interface Applier {
    void apply(EQuery query, String val);
  }

  public void apply(EQuery query, String val) {
    map.get(this).apply(query, val);
  }

  private static Map<EConstants, Applier> map = new HashMap<EConstants, EConstants.Applier>();
  static {
      map.put(NAME, new Applier() {

        @Override
        public void apply(EQuery query, String val) {
          Sample.addName(query, val);
        }

      });

      map.put(KEYWORDS, new Applier() {

        @Override
        public void apply(EQuery query, String val) {
          Sample.addKey(query, val);
        }

      });

      map.put(ROLE, new Applier() {

        @Override
        public void apply(EQuery query, String val) {
          Sample.addRole(query, val);
        }

      });
  }
} 
```

现在你只需写：

```
@Override
public void applyEQ(EConstants econs, String val) {
    econs.apply(equery, val);
} 
```

# api - 获取带有特定标签的 Tumblr 帖子

> ID：10031664
> 
> 赞同：5
> 
> 时间：2012-04-05T15:38:52.540
> 
> 标签：api, tumblr

我只需要获取标记为“日记”的 tumblr 帖子

这是提要，“http://clintonbeattie.tumblr.com/api/read/json”

我不知道如何循环浏览帖子并只输出日记。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T15:45:49.530

使用 api v2 仅提取您需要的标签

```
http://api.tumblr.com/v2/blog/clintonbeattie.tumblr.com/posts?api_key=PyezS3Q4Smivb24d9SzZGYSuhMNPQUhMsVetMC9ksuGPkK1BTt&tag=diary 
```

来自文档：[http ://www.tumblr.com/docs/en/api/v2#posts](http://www.tumblr.com/docs/en/api/v2#posts)

# c - 在 C 中使用宏定义数据结构

> ID：10031665
> 
> 赞同：5
> 
> 时间：2012-04-05T15:39:07.287
> 
> 标签：c

我试图围绕使用宏来定义数据结构操作的概念。以下代码是使用 FreeBSD 中内置列表库的简单示例。在库中，所有操作都定义为宏。我也在其他几个库中看到了这种方法。

我可以看到这有一些优点，例如。能够使用任何数据结构作为列表中的元素。但我不太明白这是如何工作的。例如：

1.  是什么`stailhead`？这似乎是“刚刚”定义的。
2.  如何传递`head`和传递`entries`给函数？
3.  什么类型`head`，如何声明指向它的指针？

这种技术是否有一个标准名称可以用来搜索谷歌，或者任何解释这个概念的书？任何有关此技术如何工作的链接或良好解释将不胜感激。

感谢[Niklas B。](https://stackoverflow.com/users/916657/niklas-b)我运行`gcc -E`并得到了这个定义`head`

```
struct stailhead {
  struct stailq_entry *stqh_first;
  struct stailq_entry **stqh_last; 
} head = { ((void *)0), &(head).stqh_first }; 
```

这对于`stailq_entry`

```
struct stailq_entry {
 int value;
 struct { struct stailq_entry *stqe_next; } entries;
}; 
```

所以我猜`head`是 type `struct stailhead`。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/queue.h>

struct stailq_entry {
        int value;
        STAILQ_ENTRY(stailq_entry) entries;
};

int main(void)
{
        STAILQ_HEAD(stailhead, stailq_entry) head = STAILQ_HEAD_INITIALIZER(head);
        struct stailq_entry *n1;
        unsigned i;
        STAILQ_INIT(&head);                     /* Initialize the queue. */

        for (i=0;i<10;i++){
                n1 = malloc(sizeof(struct stailq_entry));   /* Insert at the head. */
                n1->value = i;
                STAILQ_INSERT_HEAD(&head, n1, entries);
        }
        n1 = NULL;

        while (!STAILQ_EMPTY(&head)) {
                n1 = STAILQ_LAST(&head, stailq_entry, entries);
                STAILQ_REMOVE(&head, n1, stailq_entry, entries);
                printf ("n2: %d\n", n1->value);
                free(n1);
        }

        return (0);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T15:43:47.143

首先阅读[本文](http://www.manpagez.com/man/3/STAILQ_HEAD/)以了解这些宏的作用。然后去`queue.h`。你会在那里得到你的宝库！

我给你找了几枚金币——

```
#define STAILQ_HEAD(name, type)                                         \
struct name {                                                           \
        struct type *stqh_first;/* first element */                     \
        struct type **stqh_last;/* addr of last next element */         \
} 
```

让我们深入挖掘并回答您的问题

> 什么是尾灯？这似乎是“刚刚”定义的。

```
#define STAILQ_HEAD(name, type)                                         \
struct name {                                                           \
        struct type *stqh_first;/* first element */                     \
        struct type **stqh_last;/* addr of last next element */         \
}
 STAILQ_HEAD(stailhead, entry) head =
 STAILQ_HEAD_INITIALIZER(head);
 struct stailhead *headp;            /* Singly-linked tail queue head. */ 
```

`stailhead`结构也是如此

> 如何将头部和条目传递给函数？

```
#define STAILQ_ENTRY(type)                                              \
struct {                                                                \
        struct type *stqe_next; /* next element */                      \
} 
```

所以`entries`and `head`（如前所述）只是结构，你可以像传递其他结构一样传递它们。`&structure_variable`

> head 是什么类型，如何声明指向它的指针？

已经解释过了！

阅读[此手册页](http://leaf.dragonflybsd.org/cgi/web-man?section=3&command=queue)以获取漂亮的示例。

# google-analytics - Google Analytics API：提取一些数据的问题

> ID：10031666
> 
> 赞同：0
> 
> 时间：2012-04-05T15:39:15.773
> 
> 标签：google-analytics, google-analytics-api

我如何使用这个 API？我可以提取一些数据，但不是全部……我有点迷茫，在文档中找不到任何示例。我正在使用 gapi.class.php。

我有如下代码：

```
$ga = new gapi('user','pwd');

    $ga->requestReportData('id',array('browser'),array('pageviews','visits', 'timeOnSite'));
    var_dump($ga);
    foreach($ga->getResults() as $result)
    {
     print_r($result);
      echo '<strong>'.$result.'</strong><br />';
      echo 'Pageviews: ' . $result->getPageviews() . ' ';
      echo 'Visits: ' . $result->getVisits() . '<br />';
      echo 'Time On site: ' . $result->getTimeOnSite() . '<br />';
    }

    echo '<p>Total pageviews: ' . $ga->getPageviews() . ' total visits: ' . $ga->getVisits() . '</p>'; 
```

以上工作，但我也想获得其他数据，如目标......我看到这个：[http ://code.google.com/intl/es-ES/apis/analytics/docs/gdata/dimsmets/ dimsmets.html](http://code.google.com/intl/es-ES/apis/analytics/docs/gdata/dimsmets/dimsmets.html)

但我不太确定如何调用每个函数或属性......我真的迷路了，任何例子都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:35:02.717

GAPI 使用魔术 get 方法。您输入所需的维度和指标，并使用神奇的 get 方法获取它们。

例如：

```
$ga = new gapi('user','pwd');

    $ga->requestReportData('id',array('browser'),array('pageviews','visits', 'timeOnSite'));

   foreach($ga->getResults() as $result)
      {
       print_r($result);
     echo '<strong>'.$result.'</strong><br />';
     echo 'Pageviews: ' . $result->getPageviews() . ' ';
     echo 'Visits: ' . $result->getVisits() . '<br />';
     echo 'Time On site: ' . $result->getTimeOnSite() . '<br />';
   }

   echo '<p>Total pageviews: ' . $ga->getPageviews() . ' total visits: ' . $ga->getVisits() . '</p>'; 
```

`array('browser')`是维度， `array('pageviews','visits', 'timeOnSite')`是指标。`$result->getPageviews()`是`pageviews`指标的神奇获取方法。

因此，[请参阅列表](http://code.google.com/intl/es-ES/apis/analytics/docs/gdata/dimsmets/dimsmets.html)并输入您想要的维度和指标，然后使用`getYourdimension`or的神奇 get 方法返回它们`getYourmetric`。请注意，它`get`是小写字母，并且维度或指标以大写字母开头。

[有关更多信息，请参阅文档](http://code.google.com/p/gapi-google-analytics-php-interface/)：

> 使用神奇的 get 方法访问指标和维度 使用 GAPI，当从 Google 返回数据时，它会自动转换为原生 PHP 对象，并带有一个允许“获取”任何维度或指标值的接口。
> 
> 例如，如果您请求度量“uniquePageviews”和维度“pagePath”，您可以执行以下操作：

```
foreach($ga->getResults() as $result)
{
  echo $result->getUniquePageviews();
  echo $result->getPagePath();
} 
```

# asp.net - 使用 web.config 从目录停止热链接

> ID：10031675
> 
> 赞同：2
> 
> 时间：2012-04-05T15:40:05.847
> 
> 标签：asp.net, .net, web-config, url-rewrite-module

我的网站上有一个用于缓存大型 Flash 电影的文件夹，我想阻止其他人将它们嵌入他们的网站；我想尝试`web.config`仅使用该文件来执行此操作。怎么可能做到这一点？

我第一次尝试规则（不起作用）：

以下规则应该阻止公共访问（和嵌入）缓存文件夹“CurrentCache”中的 .swf 文件 - [http://myurl.com/ContentCache/](http://myurl.com/ContentCache/)并提供替换电影“NoEmbedFromCacheSWF.swf”。

```
<rule name="Prevent SWF hotlinking" enabled="true">
      <match url="^(ContentCache)(.swf)$" ignoreCase="true" />
      <conditions>
        <add input="{HTTP_REFERER}" pattern="^http://(.*\.)?myurl\.com/.*$" negate="true" />
      </conditions>
      <action type="Rewrite" url="/Content/Flash/NoEmbedFromCacheSWF.swf" />
    </rule> 
```

提前致谢！

注意：我认为我的正则表达式错误`<match url="A swf inside /ContentCache/" ignoreCase="true" />`，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:47:51.220

`HttpModule`您可以为此构建一个。有一篇博客文章准确描述了我认为你想做的事情：

[HttpModule 在 ASP.NET 中阻止外部引用](http://madskristensen.net/post/HttpModule-to-block-external-referrers-in-ASPNET.aspx)

**编辑：**当然我只是在这里弯曲规则`web.config`。您必须使用外部模块，但是您可以使用它`web.config`仅引用 from 而无需修改任何代码。

**Edit2：**如果你想使用重写规则来做，你必须改变你的模式，像这样：

```
<rule name="Prevent SWF hotlinking" enabled="true">   
  <match url="/ContentCache/.*\.swf$" ignoreCase="true" />   
  <conditions>   
    <add input="{HTTP_REFERER}" pattern="^http://(.*\.)?myurl\.com/.*$" negate="true" />   
  </conditions>   
  <action type="Rewrite" url="/Content/Flash/NoEmbedFromCacheSWF.swf" />   
</rule> 
```

[使用的模式是一个正则表达式，你可以在这里](http://www.codeproject.com/Articles/939/An-Introduction-to-Regular-Expressions)阅读它们，你可以在[这个网页](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)上测试它们。

# eclipse - 由于带有 ExpressionFactoryImpl 的 ClassCastException，无法在 JSP 页面中使用 JSTL，项目包含 juel-impl jar

> ID：10031678
> 
> 赞同：1
> 
> 时间：2012-04-05T15:40:24.307
> 
> 标签：eclipse, jsp, maven, jstl

错误是：

```
SEVERE: Servlet.service() for servlet [jsp] in context with path [] threw exception      [Unable to compile class for JSP] with root cause
java.lang.ClassCastException: de.odysseus.el.ExpressionFactoryImpl cannot be cast to javax.el.ExpressionFactory
at javax.el.ExpressionFactory.newInstance(ExpressionFactory.java:180)
at javax.el.ExpressionFactory.newInstance(ExpressionFactory.java:107)
at org.apache.jasper.compiler.PageInfo.<init>(PageInfo.java:79)
at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:110)
    ..... 
```

该项目正在使用战争覆盖，其中覆盖的项目具有 juel-impl jar，这是使用 shindig 所必需的。有什么方法可以在子项目jsp页面中使用jstl？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T11:16:59.660

似乎您的类路径中有两个相互竞争的 EL API，tomcat 和您的应用程序中的另一个。您的 war 文件不得包含`el-api.jar`或`juel-api.jar`. 确保排除这些依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T05:05:49.683

Juel 2.1.3 jar 是以下 Jars juel-impl.jar、juel-spi.jar 和 juel-api.jar 的组合。当我们在 pom 中包含 juel 2.1.3 jar 并部署在 tomcat 7 中时，我们遇到了同样的问题。

通过从 pom 中删除 Juel 2.1.3 并仅添加 juel-impl 解决了该问题。

<dependency>
<groupId>de.odysseus.juel</groupId>
<artifactId>juel-impl</artifactId>
<version>2.2.6</version>
</dependency>

您还需要添加 <dependency> <groupId>de.odysseus.juel</groupId> <artifactId>juel-api</artifactId> <version>2.2.6</version> </dependency>

juel 2.1.3 jar 包含 javax/el 接口，也是 jsp-api jar 的一部分。

我希望这将有所帮助。

# vb.net - 有没有办法在字典对象中只找到部分键值？

> ID：10031681
> 
> 赞同：0
> 
> 时间：2012-04-05T15:40:30.953
> 
> 标签：vb.net, data-dictionary

有一个字典对象加载了以下键值：119 189a 189b 189c 197 201a 201b

在大多数情况下，生活是美好的，所有个人的关键价值观都是需要/独特的。但在某些情况下，后面带有字母的键（即...189a、189b、189c）都表示相同的意思（即...189）。所以我需要一种方法来查看键值是否仅存在于键的第一部分（如 containskey 方法），然后返回 true。
关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:44:22.730

像这样的东西？

```
dictionary.Keys.Any(Function(key) key.StartsWith("189")) 
```

或者您可以使用正则表达式进行更多查找粒度控制：

```
dictionary.Keys.Any(Function(key) Regex.IsMatch(key, "^189[^\d]?") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T16:13:47.873

由于您*有时*只需要忽略后缀字母，为了获得最大效率，我建议使用额外的[HashSet(T)](http://msdn.microsoft.com/en-us/library/bb359438.aspx)来存储数字部分。当您从字典中添加/删除元素时，还要从`HashSet(T)`. `HashSet(T).Contains`方法是 O(1)，因此检查元素是否存在将很快。

# c# - 存储过程中使用的 TSQL 函数将列强制为只读

> ID：10031685
> 
> 赞同：5
> 
> 时间：2012-04-05T15:40:57.957
> 
> 标签：c#, sql-server-2008, tsql

设置：将 DataReader 加载到 DataTable 中。尝试在加载后更改 DataTable 中的列。

问题：尝试更改列时触发 ReadOnlyException。

条件：

*   当函数（udf 或 system）应用于存储过程中的别名列时，该列变为 ReadOnly。
*   如果列只是简单的别名而没有应用任何函数，则不会触发错误。
*   如果将选择移动到表函数，则不会触发错误，然后 proc 从该函数中选择。
*   在 C# 中将列属性设置为 ReadOnly 时（显然）不会发生错误。

问题：有没有办法改变一个过程，使一个应用了函数的别名列不是只读的？我正在寻找一种替代方法来更改 C# 或创建一个函数来执行 proc 已经执行的操作。

C#：

```
var dt = new DataTable();
using( var sqlDR = objDocsFBO.GetActiveDocsMerged(KeyID) )
{
    dt.Load(sqlDR);
}
foreach( DataRow dr in dt.Rows )
{
    //Testing Alias Alone - Pass
    dr["DocumentPathAlias"] = "file:///" + Server.UrlEncode(dr["DocumentPathAlias"].ToString()).Replace("+", "%20");
    //Testing Function Applied - Fail
    //dr["DocumentPath"] = "file:///" + Server.UrlEncode(dr["DocumentPath"].ToString()).Replace("+", "%20");
} 
```

SQL：

```
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[usp_ActiveDocs_RetrieveMerged]
@KeyID INT
AS 
BEGIN
--Testing Select From Function
--SELECT * FROM dbo.ufn_ActiveDocs_RetrieveMerged(@KeyID) --Pass
SELECT AD.ADMergeLogID
, AD.TemplateName
, CONVERT(NVARCHAR(10), AD.InitiatedOn, 101) [CreatedOn]
, (SELECT fn.UserName FROM dbo.ufn_User_GetFullName(AD.InitiatedBy) fn) [CreatedBy]
, AD.DocumentName
, AD.DocumentPath [DocumentPathAlias] --Pass
--, REPLACE(AD.DocumentPath, '\\', '\') [DocumentPath] --Fail
--, dbo.udf_VerifyPath(AD.DocumentPath) [DocumentPath] --Fail
FROM dbo.ActiveDocsMergeLog AD
WHERE AD.DocumentPath != 'DocumentPath not found.'
AND AD.KeyID = @KeyID
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:02:14.133

如果将查询放入临时表中，它将覆盖 SQL 设置的任何表架构属性。

# java - 每个活动都必须有自己的模型吗？

> ID：10031687
> 
> 赞同：0
> 
> 时间：2012-04-05T15:41:04.620
> 
> 标签：java, android

我刚刚阅读了 MVC 设计模式的描述，我有一些问题：我是 Android 开发人员（初级），我想让我的代码更清晰。那么，我应该使用 MVC 吗？每个活动都必须有自己的模型吗？有什么好的教程吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:45:50.153

它已经实施了。[Android 上的 MVC 模式](https://stackoverflow.com/questions/2925054/mvc-pattern-in-android)

你不需要做任何事情，因为 Android 是预先构建的 MVC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:51:00.207

MVC 是一种想法，而不是一种特定的做事方式（例如活动和模型之间的一对一关系）。这个想法是分离模型、视图和控制器，这样东西*才有意义*。

在 Android 中，多个 Activity 可以引用单个模型（例如，具有您可以搜索的房屋列表的 Activity、“编辑房屋”Activity 以及将它们显示为坐标中的点的地图）。所以，回答你的第二个问题：不，他们不需要有自己的模型。

是的，如果有意义的话，你应该使用 MVC。只需将您的模型视为与实际应用程序分开的实体，并将您的活动视为模型的“用户”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:56:24.360

在 Android 上，我发现 MVP（模型、视图、演示者）模式与整个系统架构更直接相关。您的活动包括视图，在 MVP 设置中，它们负责管理自己的事件并控制自己的外观。演示者充当模型和视图之间的促进者，在视图请求时提供数据。根据您的需要，演示者可能是也可能不是服务。至于 View/Model 比率，它实际上取决于您在任何时候试图在屏幕上显示的内容。当 android 仅在手机上运行时，在活动和模型之间建立一对一的关联是有意义的。现在，正常情况是模型和片段之间存在一对一的相关性，

但是，如果您想再次执行 MVC，现在片段是工具箱中的一种工具，这比以前容易得多，尤其是在开发良好的事件系统（例如 RoboGuice 中包含的事件系统）的情况下 - 将您的片段想象为您的视图和作为控制器的活动 - 对您的视图进行排序，从模型中为它​​们提供数据，并处理到其他控制器的转换。

模式的选择取决于您的需求——如果一个应用程序是高度服务驱动的，MVP 可能是更好的选择。但是，如果应用程序只是数据库之上的瘦客户端，那么 MVC 可能会更容易。全取决于你 ：）

MVP 的“入门”资源：[http ://www.jamespeckham.com/blog/10-11-21/MVP_on_Android.aspx](http://www.jamespeckham.com/blog/10-11-21/MVP_on_Android.aspx)

# php - Zend 框架中转发和重定向或 setRenderView 之间的区别是什么？

> ID：10031691
> 
> 赞同：0
> 
> 时间：2012-04-05T15:41:16.020
> 
> 标签：php, zend-framework

> **可能重复：**
> [Zend 框架中重定向和转发有什么区别](https://stackoverflow.com/questions/2551238/what-is-the-difference-between-redirect-and-forward-in-zend-framework)

我是zend框架的新手，当我尝试在控制器中使用foward、redirect、setViewRender时，它们有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:56:14.467

正如[官方文档](http://framework.zend.com/manual/en/zend.controller.action.html#zend.controller.action.utilmethods)所说：

*   `_forward($action, $controller = null, $module = null, array $params = null):`执行另一个动作。如果在 preDispatch() 中调用，当前请求的操作将被跳过以支持新的操作。否则，在处理完当前动作后，_forward() 中请求的动作将被执行。
*   `_redirect($url, array $options = array()):`重定向到另一个位置。此方法采用 URL 和一组可选选项。默认情况下，它执行 HTTP 302 重定向。

[阅读更多内容](https://stackoverflow.com/questions/2551238/what-is-the-difference-between-redirect-and-forward-in-zend-framework)以更好地理解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:53:03.653

我很确定重定向会将您重定向到特定页面/控制器，因此会经历所有预览过程，包括您是否可以查看页面，setViewRender 只会输出您选择的视图并忽略控制器的所有内容等处理。（但是我有一段时间没有使用zend）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T16:53:45.117

_redirect 创建一个全新的 http 请求，而 _forward 只是转发请求。我在 zend_registry 中设置变量时意识到了这一点，这听起来可能有点偏离轨道，但是当您使用 _request 时，所有请求变量、标头和注册表变量都被完全重置，而在 _forward 的情况下，它只是转发所有这些东西。这就像您可以在 _forward 的情况下之前提供信息以及更多信息。

好吧，对于 setViewRenderer，我真的很喜欢这个想法，我的意思是这有点像依赖注入。你真的不需要有一个默认视图，你可以为给定的动作提供一个新的视图。[如果您对此](http://devzone.zend.com/976/zend-frameworks-mvc-introduces-the-viewrenderer/)进行研究，我认为您会得到最好的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T22:45:32.447

`_forward`是内部重定向。as`_redirect`发送一个标头，告诉客户端的浏览器转到其他 URL，_forward 告诉调度程序在内部将请求重定向到其他地方。

如果您考虑以下的正常发货顺序：

```
 preDispatch()
 someAction()
 anotherAction()
 postDispatch() 
```

在该进程中的任何时候调用`_forward`都将导致以下步骤无法执行。所以如果你调用`_forward`，`preDispatch()`将`someAction()`不会被调用等等。如果您`_forward()`使用`someAction()`viewRenderer 操作助手来渲染视图（您让框架选择要渲染的视图脚本），则不会在`someAction()`.

当请求被转发到新的控制器/模块时，整个调度过程将在那里重复。

**笔记：**

如果你转发`someAction()`到`anotherAction()`你必须这样做

```
return $this->_forward('another'); 
```

您应该添加一个`return`to，`$this->_forward()`否则您当前的 Action 将在转发到另一个 Action 之前继续执行。

另请注意，将呈现的视图将是`another.phtml`

在进行重定向时，ZF 会指示浏览器加载*http://example.com/controller-name/action-name*作为`_redirect()`发送标头，这意味着您创建一个新的 HTTP 请求并使用它完成整个调度过程。

最后在一个动作中渲染一个特定的视图，使用`viewRenderer`Action 助手：

```
 // Bar controller class, foo module:
    class Foo_BarController extends Zend_Controller_Action
    {
        public function addAction()
        {
            // Render 'bar/form.phtml' instead of 'bar/add.phtml'
            $this->_helper->viewRenderer('form');
        }

        public function editAction()
        {
            // Render 'bar/form.phtml' instead of 'bar/edit.phtml'
            $this->_helper->viewRenderer->setScriptAction('form');
        }

        public function processAction()
        {
            // do some validation...
            if (!$valid) {
                // Render 'bar/form.phtml' instead of 'bar/process.phtml'
                $this->_helper->viewRenderer->setRender('form');
                return;
            }

            // otherwise continue processing...
        }

    } 
```

# sql - 立即执行'一些命令'

> ID：10031695
> 
> 赞同：3
> 
> 时间：2012-04-05T15:41:24.353
> 
> 标签：sql, oracle, plsql, execute-immediate

是否可以在一个 EXECUTE IMMEDIATE 块中执行一些 sql 命令？

这种语法有什么问题：

```
declare
    pragma autonomous_transaction;
begin           
    execute immediate
    'begin
        COMMENT ON TABLE t1 IS ''description1'';
        COMMENT ON TABLE t2 IS ''description2'';            
    end;';
end; 
```

对于一个 SQL 命令，它工作正常：

```
declare
    pragma autonomous_transaction;
begin           
    execute immediate ' COMMENT ON TABLE t1 IS ''description1'' ';
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T16:00:32.543

立即执行的`begin` `end`字符串内将被视为 PL/SQL 匿名块。DDL，例如`COMMENT`在 PL/SQL 中是不允许的。如果是，您将不需要立即执行。Oracle 本质上一次处理一个 PL/SQL 语句块或一个 SQL 语句。尽管也有用于批处理 SQL 语句的 API。

因此，要`COMMENT`在 PL/SQL 块或过程中运行，您将需要`execute immediate`语句。

如果没有更多的上下文，我无法明智地评论这是否是正确的方法，或者如果单独使用两个评论语句会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:28:20.910

好吧，你*可以*这样做：

```
begin           
    execute immediate
    'begin
        execute immediate ''COMMENT ON TABLE t1 IS ''''description1'''' '';
        execute immediate ''COMMENT ON TABLE t2 IS ''''description2'''' '';
    end;';
end; 
```

但是没有多大意义。

# sql-server-2008 - 具有动态列的 SQL Server 表？

> ID：10031696
> 
> 赞同：0
> 
> 时间：2012-04-05T15:41:25.420
> 
> 标签：sql-server-2008, dynamic

我想知道如何解决这个问题。

我们的数据库中有一个配置文件表，该表将由一个进程填充，该进程读取上传的 excel 文档，然后将列和行中的数据转储到用户的配置文件中（所有此类 excel 电子表格之间唯一的共同点是电子邮件地址）。

因此，我们无法真正预测给定用户的个人资料会是什么样子。如何创建我的个人资料表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:46:19.413

如果你有办法使用编程语言处理这些数据，而不是盲目地做映射，那应该很简单。

带有 ID 的 User_table，以及一些修复信息，例如名称和其他信息。

然后你有一个配置文件表，它有一个 user_id 外键，和键对值，标题/值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T16:10:13.950

抱歉，我必须创建另一个答案，但评论不会让我创建 ascii 草图

```
----------
| user   |
----------
| id   pk|
| name   |
| .....  |
----------

----------------
| preference   |
----------------
| user_id   fk | <-- reference user.id
| header       |
| value        |
---------------- 
```

csv_row=`1,churk,height,11,weight,500lb,width,22,...` 或 csv_row=`1,churk,height=11,wieght=500lb,width=22......`

这将在用户表中产生 1 行，user.id = 1，user.name = Churk 至少优先 3 行。{[1,height,11],[1,weight,500lb],[1,width,22]}

因此，当您查询数据库时，您所需要的只是

```
SELECT * FROM user JOIN preference on preference.user_id = user.id WHERE user.name = 'Churk'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:44:35.227

以后如何查询这些数据？尽管我讨厌这种做法，但这可能是需要将 csv 数据存储在列中的情况。

**更新：**
这可能非常适合[实体属性值](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)模式。我也不是 EAV 的真正粉丝，但至少它不像列中的 csv 数据那么邪恶。

# php - Magento 管理页面完全空白，在任何地方都找不到错误

> ID：10031697
> 
> 赞同：4
> 
> 时间：2012-04-05T15:41:26.617
> 
> 标签：php, apache, magento

问题开始于一段时间前，但当时还有其他优先事项，现在很难追溯任何可能导致它的系统更改。简而言之，访问[http://mysite/index.php/admin/](http://mysite/index.php/admin/)为我提供了一个空白页面。如 0 字节。

index.php 页面的代码以

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

php.ini 中设置的内存限制为 512MB。我已经`chmod -R 777 *`在 Magento 的顶级目录中完成了，我只是看不到任何线索，说明什么可能导致它给我一个空白页。这个 Magento 安装的店面工作正常。我能做些什么来解决这个问题？

编辑：我也尝试删除缓存，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:34:12.303

尝试通过将“magento/errors/local.xml.sample”重命名为“magento/errors/local.xml”来启用magento错误报告。这可能会给您一些提示来跟踪您的问题。

# ssh - 通过 ssh 从本地父级向远程子级转发信号

> ID：10031699
> 
> 赞同：0
> 
> 时间：2012-04-05T15:41:37.583
> 
> 标签：ssh, signals

我有一个执行远程命令并将输出重定向到本地文件的脚本。

远程命令只是连续读取 pcap 文件列表并写入标准输出。

最后的命令是这样的——

```
ssh root@host /sbin/path-to-utility | cat > local-file 
```

执行此远程命令的脚本需要有信号处理程序来保存整体传输的状态。

另外我想向远程命令或进程发送信号以停止读取 pcap 文件，以便在完成写入当前文件后退出。

**我尝试了 -t 选项并且信号处理工作得非常好，但是它在远程命令写入的实际输出中添加了一些额外的字符并扰乱了我的 pcap 数据。**

要么我需要通过 ssh 处理没有 -t 选项的信号，要么我需要找出为什么 ssh -t 会向实际数据添加额外的字节。

请帮忙！

谢谢，

萨钦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:54:33.907

该`-t`选项告诉 ssh 分配一个终端。额外的字符旨在由您的终端解释。

也许你应该告诉 ssh 你正在使用一个不同的终端，它不会产生任何额外的字符，但仍会传递信号。这行得通吗？

```
TERM=dumb ssh root@host /sbin/path-to-utility | cat > local-file 
```

（我不知道 TERM 的最佳价值是什么。）

# python - 如何确定比例因子以使协方差矩阵的第一个元素为 1？

> ID：10031710
> 
> 赞同：0
> 
> 时间：2012-04-05T15:42:44.447
> 
> 标签：python, scaling, covariance, svd

我有需要居中和缩放的数据，以便以原点为中心。然后需要旋转数据，使最大方差的方向在 x 轴上。然后计算数据的平均值和协方差。我需要协方差矩阵的第一个元素为 1。我认为这是通过调整比例因子来完成的，但我无法弄清楚比例因子应该是什么。

为了使数据居中，我去掉了平均值，为了旋转我使用 SVD，但缩放仍然是我的问题。

```
signature = numpy.loadtxt(name, comments = '%', usecols = (0,cols-1))
signature = numpy.transpose(signature)

#SVD to get D so that data can be scaled by 1/(highest singular value in D)
U, D, Vt = numpy.linalg.svd( signature , full_matrices=0)
cs = utils.centerscale(signature, scale=False)
signature = cs[0]
#plt.scatter(cs[0][0],cs[0][1],color='r')

#SVD so that data can be rotated so that direction of most variance is on x-axis
U, D, Vt = numpy.linalg.svd( signature , full_matrices=0)
cs = utils.centerscale(signature, center=False, scalefactor=D[0])
U, D, Vt = numpy.linalg.svd( cs[0] , full_matrices=0)
D = numpy.diag(D)
norm = numpy.dot(D,Vt) 
```

以下是*norm*的均值和 cov 结果示例（测试用例使用 res）。

```
**********************************************************************
Failed example:
print numpy.mean(res, axis=1)
Expected:
[  7.52074907e-18  -6.59917722e-18]
Got:
[ -1.22008884e-17   2.41126563e-17]
**********************************************************************
Failed example:
print numpy.cov(res, bias=1)
Expected:
[[  1.00000000e+00   9.02112676e-18]
 [  9.02112676e-18   1.40592827e-01]]
Got:
[[  4.16666667e-03  -1.57698124e-19]
 [ -1.57698124e-19   5.85803446e-04]]
**********************************************************************
1 items had failures:
2 of   4 in __main__.processfile
***Test Failed*** 2 failures. 
```

除了协方差矩阵的第一个元素，所有值都无关紧要，它必须是一个。

我试过到处找，找不到答案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:10:36.663

我不知道 utils.centerscale 是什么或做什么，但如果你想通过一个常数因子缩放矩阵，使其协方差矩阵的左上项为 1，你可以简单地将矩阵除以平方根未缩放的协方差项：

```
>>> import numpy
>>> numpy.random.seed(17)
>>> m = numpy.random.rand(5,4)
>>> m
array([[ 0.294665  ,  0.53058676,  0.19152079,  0.06790036],
       [ 0.78698546,  0.65633352,  0.6375209 ,  0.57560289],
       [ 0.03906292,  0.3578136 ,  0.94568319,  0.06004468],
       [ 0.8640421 ,  0.87729053,  0.05119367,  0.65241862],
       [ 0.55175137,  0.59751325,  0.48352862,  0.28298816]])
>>> c = numpy.cov(m,bias=1)
>>> c
array([[ 0.0288779 ,  0.00524455,  0.00155373,  0.02779861,  0.01798404],
       [ 0.00524455,  0.00592484, -0.00711072,  0.01006019,  0.00631144],
       [ 0.00155373, -0.00711072,  0.13391344, -0.10551922,  0.00945934],
       [ 0.02779861,  0.01006019, -0.10551922,  0.11250984,  0.00982862],
       [ 0.01798404,  0.00631144,  0.00945934,  0.00982862,  0.01444482]])
>>> numpy.cov(m/c[0][0]**0.5, bias=1)
array([[ 1\.        ,  0.18161135,  0.05380354,  0.96262562,  0.62276138],
       [ 0.18161135,  0.20516847, -0.24623392,  0.3483699 ,  0.21855613],
       [ 0.05380354, -0.24623392,  4.63722877, -3.65397781,  0.32756326],
       [ 0.96262562,  0.3483699 , -3.65397781,  3.89605297,  0.34035085],
       [ 0.62276138,  0.21855613,  0.32756326,  0.34035085,  0.5002033 ]]) 
```

但这与简单地将协方差矩阵除以左上角成员具有相同的效果：

```
>>> (numpy.cov(m,bias=1)/numpy.cov(m,bias=1)[0][0])/(numpy.cov(m/c[0][0]**0.5, bias=1))
array([[ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.]]) 
```

根据您正在做的事情，您可能还对 感兴趣`numpy.corrcoef`，它给出了相关系数矩阵。

# c# - 更改装配解析器搜索顺序

> ID：10031711
> 
> 赞同：3
> 
> 时间：2012-04-05T15:42:52.257
> 
> 标签：c#, assemblies

这与我昨天问[的一个问题有关。](https://stackoverflow.com/questions/10020645/)简而言之，我遇到的问题是我有两个相互冲突的程序集版本。一个在应用程序库中，另一个在 PrivateBinPath 中。

据我了解，程序集解析器首先搜索应用程序库，然后在私有路径中搜索。问题是，根据我通过运行融合日志得到的结果，如果解析器在应用程序库中发现错误的版本，它会抛出一个错误，指出版本不匹配并停止探测。

我需要使用位于应用程序库中的引用，因此设置 PrivateBinPathProbe 不是一个选项，因为它不包括应用程序库。有没有什么办法可以先更改在 PrivateBinPath 中搜索的顺序？

作为旁注，我不明白为什么解析器会在找到错误版本时放弃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:14:41.260

`AssemblyResolve`仅在上一次查找未成功时才调用该事件。因此，您必须将 Yahia 的方法与上一个问题的答案结合起来：

1.  设置`PrivateBinPathProbe`为使 Fusion 不会在 AppBase 目录中查找。
2.  实现一个`AssemblyResolve`事件来解析 AppBase 目录的路径。
3.  ...
4.  利润！

第一步很重要，这样事件才会被触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:47:42.387

AFAIK 没有选择这样做...

但是，您可以实施一种解决方法：

*   设置[`AssemblyResolve`处理程序](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)
*   实现处理程序以任何首选顺序搜索您想要的任何位置

另一种选择是将依赖项嵌入到 EXE/DLL 中，因此根本不需要搜索任何路径 - 有关实现此目的的选项，请参见[此处](https://stackoverflow.com/questions/8077570/how-to-merge-multiple-assemblies-into-one/8079242#8079242)。

# php - 在 NSData 中发送一个 php 对象和变量

> ID：10031715
> 
> 赞同：1
> 
> 时间：2012-04-05T15:42:57.147
> 
> 标签：php, iphone, objective-c, nsdata

我实际上是在尝试发送一个 php 变量（说“您现在已连接！”）。我想知道如何使用 NSData 在我的 iphone 应用程序中恢复这个变量。

我的代码如下：

```
NSMutableURLRequest *Requete = [NSMutableURLRequest requestWithURL:url];

[Requete setHTTPMethod:@"POST"];

// On passe les variables

[Requete setHTTPBody:[[NSString stringWithFormat:@"email=%@ &   
password=%@",email,password]dataUsingEncoding:NSASCIIStringEncoding]];

NSURLResponse *response;
NSError *error;

NSData *result = [NSURLConnection sendSynchronousRequest:Requete returningResponse:&response error:&error];      

NSString *test = [[NSString alloc]initWithData:result encoding:NSASCIIStringEncoding];
NSLog(test); 
```

我有一个回声“已连接！” 在我的 phpscript 中。我想恢复我的变量 return $connected=1。当我运行它时，控制台打印已连接！而不是 1；再说了，我不知道为了恢复一个 php 对象要执行完全相同的过程吗？

谢谢大家，

昆汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:51:20.457

PHP 在服务器端执行，这意味着您的所有变量将不再可用于您的移动（或其他）客户端，除非您明确定义它们确实存在（通过回显它们）。

所以你有两个选择：

1.  将您的 webscript 编辑为`echo "$$connected=1";`这样，您将检索它作为 NSData 中的输出。请注意，这将不是一个 iphone 变量。要使其成为 iphone 变量，您必须执行 JSON 编码 PHP 输出之类的操作：`{"connected":1}`或者让您的 php 文件生成 PLIST。然后使用适当的 JSON / PLIST 反序列化器反序列化 NSData。

2.  您可以编辑您的 iOS 应用程序以将您的 NSData 转换为字符串，然后将其与 @"Connected!" 进行比较。如果匹配，则创建一个本地 iOS 变量（一个 int？）并将其设置为等于 1。

方法 2 是最简单的，因为您已经拥有`*test`. 只是：

```
if ([test rangeOfString:@"Connected!"] > 0 ) test = @"1"; 
```

使用方法 1，您将必须

```
NSMutableDictionary *mydict = [NSJSONSerialization JSONObjectWithData:result options:NSJSONReadingMutableContainers|NSJSONReadingMutableLeaves error:&error];
test = [mydict objectForKey:@"connected"]; 
```

顺便说一句，如果您的 url 变量之间的空格不是为了 StackOverflow 的可读性而故意添加的，您应该删除它们，即`user=%@&pass=%@`而不是`user=%@ & pass=%@`.

PS -- 如果您使用的是 iOS SDK < 5，您将不得不使用第三方工具处理 JSON 序列化/反序列化，例如 JSONKit、JSON、touchJSON 等。

# php - 循环和未定义的索引php

> ID：10031725
> 
> 赞同：1
> 
> 时间：2012-04-05T15:43:34.863
> 
> 标签：php, loops, checkbox

这是我第一次使用 PHP，我从 w3school 学习一切。我的问题 ：

1 个循环

我有一个座位预订数据库，例如：A1 A2 A3 A4 A5

我尝试做一些循环来减少相同代码的重复但失败了。

2 复选框的未定义索引。

我做了一些复选框，但出现错误：如果我提交表单时未选中某些复选框，则出现未定义索引。我谷歌但我不知道如何用他们的解决方案改变我的编码，因为我不理解他们的解决方案。

下面是我的编码。

```
 <html>

<?php

    $connect = mysql_connect("localhost","root","") or die ("Coulnt connect!");
    mysql_select_db("book") or die ("Couldnt find db");

    $A1 = 'enable';
    $A2 = 'enable';
    $A3 = 'enable';
    $A4 = 'enable';
    $A5 = 'enable';

    $query = mysql_query("SELECT * FROM seats WHERE Seat_Number = 1 AND Alphabet = 'A'");
    $row = mysql_fetch_array($query);
    $check = $row['Availability'];

    if($check >0)
    {
        $A1 = 'disabled';
    }

    $query = mysql_query("SELECT * FROM seats WHERE Seat_Number = 2 AND Alphabet = 'A'");
    $row = mysql_fetch_array($query);
    $check = $row['Availability'];

        if($check >0)
    {
        $A2 = 'disabled';
    }

    $query = mysql_query("SELECT * FROM seats WHERE Seat_Number = 3 AND Alphabet = 'A'");
    $row = mysql_fetch_array($query);
    $check = $row['Availability'];

    if($check >0)
    {
        $A3 = 'disabled';
    }

        $query = mysql_query("SELECT * FROM seats WHERE Seat_Number = 4 AND Alphabet = 'A'");
    $row = mysql_fetch_array($query);
    $check = $row['Availability'];

    if($check >0)
    {
        $A4 = 'disabled';
    }

    $query = mysql_query("SELECT * FROM seats WHERE Seat_Number = 5 AND Alphabet = 'A'");
    $row = mysql_fetch_array($query);
    $check = $row['Availability'];

    if($check >0)
    {
        $A5 = 'disabled';
    }

    if(isset($_POST ['submit']))
    {

        $ch1 = $_POST["ch1"];
        $ch2 = $_POST["ch2"];
        $ch3 = $_POST["ch3"];
        $ch4 = $_POST["ch4"];
        $ch5 = $_POST["ch5"];

        if(isset($_POST['ch1'])) 
        {
            echo 'You have select ch1';
            mysql_query("UPDATE seats SET Availability = 1 WHERE Alphabet = 'A' AND Seat_Number = 1");
        }

        if(isset($_POST['ch2'])) 
        {
            echo 'You have select ch2 <br>';
            mysql_query("UPDATE seats SET Availability = 1 WHERE Alphabet = 'A' AND Seat_Number = 2");
        }

        if(isset($_POST['ch3'])) 
        {
            echo 'You have select ch3 <br>';
            mysql_query("UPDATE seats SET Availability = 1 WHERE Alphabet = 'A' AND Seat_Number = 3");
        }

        if(isset($_POST['ch4'])) 
        {
            echo 'You have select ch4 <br>';
            mysql_query("UPDATE seats SET Availability = 1 WHERE Alphabet = 'A' AND Seat_Number = 4");
        }

        if(isset($_POST['ch5'])) 
        {
            echo 'You have select ch5 <br>';
            mysql_query("UPDATE seats SET Availability = 1 WHERE Alphabet = 'A' AND Seat_Number = 5");
        }

        }

?>

<center>
<body>

<form method="post" >

  <p>

    <input name="ch1" type="checkbox" id="A1" value="A1"<?php echo $A1; ?>/>
    <input name="ch2" type="checkbox" id="A2" value="A2"<?php echo $A2; ?>/>
    <input name="ch3" type="checkbox" id="A3" value="A3"<?php echo $A3; ?>/>
    <input name="ch4" type="checkbox" id="A4" value="A4"<?php echo $A4; ?>/>
    <input name="ch5" type="checkbox" id="A5" value="A5"<?php echo $A5; ?>/>

 </p>

<input type='submit' name='submit' value='Book Selected !' />
<input name="none" type="reset" value="Clear">

</form>
</body>
</center>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:08:33.817

这里有一些关于循环和函数的帮助：

```
 $A1 = 'enable';
    $A2 = 'enable';
    $A3 = 'enable';
    $A4 = 'enable';
    $A5 = 'enable';

    $seats = array(1,2,3,4,5);

    function check_availability($seat)
    {
        $query = mysql_query("SELECT * FROM seats WHERE Seat_Number = $seat AND Alphabet = 'A'");
        $row = mysql_fetch_array($query);
        $check = $row['Availability'];

        if($check >0)
        {
            return 'disabled';
        }
        else{
            return 'available';
        }

    } 
```

此功能的作用是为您检查座位并相应地返回禁用或可用。我们可以这样称呼它：

```
foreach($seats as $seat){
         ${'A'.$seat} = check_availability($seat);
    } 
```

此代码将函数的返回值分配给 $A1、$A2 等......这里是 POST 的循环：

```
if(isset($_POST ['submit']))
    {
        for($e=1 ; $e <=5 ; $e++){
            if(isset($_POST['ch'.$e])) 
            {
                echo 'You have select ch'.$e;
                mysql_query("UPDATE seats SET Availability = 1 WHERE Alphabet = 'A' AND Seat_Number = $e");
            }

        }
    } 
```

基本上我们重复检查 isset() 5 次 - var $e 从 1 开始，然后比较它是否仍然小于或等于 5，如果不是则增加 1

同时我们使用 $e 来更改 mysql 查询中的座位号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:47:30.733

删除错误所需要做的就是删除此块：

```
 $ch1 = $_POST["ch1"];
    $ch2 = $_POST["ch2"];
    $ch3 = $_POST["ch3"];
    $ch4 = $_POST["ch4"];
    $ch5 = $_POST["ch5"]; 
```

无论如何，它并没有做任何有用的事情——你永远不会`$ch1`在代码中的任何地方使用变量等。

如果您确实想保留变量，您可以将各个行移动到相关`if (isset())`块 - 如果您这样做，您将不会在检查它们是否已设置之前尝试使用这些`$_POST`键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:49:52.250

我认为问题在于您检查 post 变量，您需要将其放入 isset 或类似的东西

例如 $ch1 = null; if(isset($_POST['ch1']){ $ch1 = $_POST['ch1']; }

这样它就不会尝试访问数组的 ch1 部分，如果它没有设置抛出未定义的索引异常。希望解释也有助于了解您哪里出错了。

你需要为每个 _POST 做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T16:30:27.580

复选框的未定义索引可以通过简单地使用来消除

```
$ch1 = isset($_POST["ch1"])?$_POST['ch1']:null;
$ch2 = isset($_POST["ch2"])?$_POST['ch2']:null;
$ch3 = isset($_POST["ch3"])?$_POST['ch3']:null;
$ch4 = isset($_POST["ch4"])?$_POST['ch4']:null;
$ch5 = isset($_POST["ch5"])?$_POST['ch5']:null; 
```

而不是使用

```
$ch1 = $_POST["ch1"];
$ch2 = $_POST["ch2"];
$ch3 = $_POST["ch3"];
$ch4 = $_POST["ch4"];
$ch5 = $_POST["ch5"]; 
```

对于下一个关于循环的查询，您可以使用

```
<?php
$A[1] = 'enable';
$A[2] = 'enable';
$A[3] = 'enable';
$A[4] = 'enable';
$A[5] = 'enable';
for ($i=1, $i<=5, $i++) {
 $query = mysql_query("SELECT * FROM seats WHERE Seat_Number = ". $i ." AND Alphabet = 'A'");
 $row = mysql_fetch_array($query);
 $check = $row['Availability'];

    if($check >0)
    {
        $A[$i] = 'disabled';
    }
}
?> 
```

# ssrs-2008 - SSRS 2008 R2 - 分发缓慢

> ID：10031726
> 
> 赞同：0
> 
> 时间：2012-04-05T15:43:42.577
> 
> 标签：ssrs-2008, reporting-services

我们有一个订阅的 SSRS 报告。该报告每周一次通过电子邮件发送给 400 多个用户。我们运行查询以获取要发送到的电子邮件列表。

最初，我们为每个用户运行此报告，然后通过电子邮件将其发送出去，即使每个用户的报告都相同。发送所有报告花了 5 个多小时。

我们现在将报告更改为先缓存，然后将报告发送到列表中的所有电子邮件。

它现在在 1 多小时内分发报告。我认为这仍然很慢，但也许我错了。我认为这应该需要几分钟而不是几小时才能运行。

报告的大小从 250 kb 到 750 kb 不等。

我有另一个报告做类似的事情，但只有 8 个报告，但每个用户的每个报告都不同。这一切几乎立即发生。不知道有什么区别。

关于在哪里寻找以找出为什么需要这么长时间的任何建议。SSRS 中是否内置了一些东西来减慢分发或延迟分发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:57:17.000

SSRS 中没有内置任何东西可以减慢速度。我会看看你的 SQL 服务器和 SSRS 使用的 SMTP 服务器之间的连接。我怀疑问题出在电子邮件中的数据，通常作为附件，并且只是将该数据发送到 SMTP 服务器。

此外，您可以将其设置为向多个用户发送一封电子邮件或分别向每个用户发送一封电子邮件：您是否考虑过使用一封电子邮件的方法？

# python - python中的EXIF元数据删除

> ID：10031733
> 
> 赞同：3
> 
> 时间：2012-04-05T15:43:59.170
> 
> 标签：python, exif, chilkat

我正在使用 Django-media-tree 将图像导入站点图像库。我在 PIL 中遇到了一个错误，其中图像上的一些未知 EXIF 数据导致生成缩略图时出现未处理的异常。我不想在 PIL 中四处乱窜，而是希望在 PIL 处理图像之前简单地从图像中删除所有 EXIF 数据。

使用 chilkat.CkXmp() 我试图以干净的形式将图像重写到新目录，但是 RemoveAllEmbedded() 方法返回 None，并且图像被完整地重写为 EXIF 数据。

```
import os
import sys
import chilkat

ALLOWED_EXTENSIONS = ['.jpg', 'jpeg', '.png', '.gif', 'tiff']

def listdir_fullpath(d):
    list = []
    for f in os.listdir(d):
        if len(f) > 3:
            if f[-4:] in ALLOWED_EXTENSIONS:
                list.append(os.path.join(d, f))
    return list

def trim_xmp_data(file, dir):
    xmp = chilkat.CkXmp()
    success = xmp.UnlockComponent("Anything for 30-day trial.")
    if (success != True):
        print xmp.lastErrorText()
        sys.exit()

    success = xmp.LoadAppFile(file)
    if (success != True):
        print xmp.lastErrorText()
        sys.exit()
    print "Num embedded XMP docs: %d" % xmp.get_NumEmbedded()

    xmp.RemoveAllEmbedded()

    #  Save the JPG.
    fn = "%s/amended/%s" % (dir, file.rsplit('/')[-1])
    success = xmp.SaveAppFile(fn)
    if (success != True):
        print xmp.lastErrorText()
        sys.exit()

for item in listdir_fullpath('/Users/harrin2/Desktop/tmp/'):
    trim_xmp_data(item, '/Users/harrin2/Desktop/tmp') 
```

谁能告诉我哪里出错了，或者是否有更好的方法来清理图像，我愿意接受建议.....

TIA

# c# - 如何使用 SAP Nco 3.0 向 rfcTable 添加字段？

> ID：10031738
> 
> 赞同：1
> 
> 时间：2012-04-05T15:44:18.580
> 
> 标签：c#, sap, sap-dotnet-connector

我看不懂文档，真的需要一个具体的例子。

我已经创建了目的地。在这里，我定义了我的 BAPI：

```
IRfcFunction BapiIncomingInvoiceGetDetail = SapRfcRepository.CreateFunction("BAPI_INCOMINGINVOICE_GETDETAIL"); 
```

设置我的导入，调用它，然后获取我的导出 - 其中一个是表：

```
IRfcTable ITEMDATATable = BapiIncomingInvoiceGetDetail.GetTable("ITEMDATA"); 
```

我现在想为表 ITEMDATATable 中的每个项目添加一个字段并设置它的值，以便以后可以引用它，就好像它是 BAPI 返回的字段之一一样。谁能告诉我怎么做？

编辑：好的，我已经取得了一些进展：

```
RfcFieldMetadata newField = new RfcFieldMetadata("SKU_AMT",0,0,0);
ITEMDATATable.CurrentRow.Metadata.AddField(newField);
ITEMDATATable.SetValue("SKU_AMT",myItemData.SKU_AMT); 
```

但是，当我尝试设置该值时，我得到 RfcInvalidStateException“无法将元素添加到锁定的 STRUCTURE BAPI_INCINV_DETAIL_ITEM”。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:08:02.113

您不能将列附加到表中，这些字段已经定义。您需要向表中添加一行并填充该行的字段。这应该可以工作（尽管我现在无法测试）：

```
IRfcTable ITEMDATATable = BapiIncomingInvoiceGetDetail.GetTable("ITEMDATA");
ITEMDATATable.Append();
ITEMDATATable.SetValue("SKU_ATM",myItemData.SKU_AMT); 
```

# rtmp - get_iplayer RTMP 失败

> ID：10031744
> 
> 赞同：1
> 
> 时间：2012-04-05T15:44:39.500
> 
> 标签：rtmp

谁能告诉我如何解决这个突出显示的问题？我下载字幕没有问题，但下载程序。

我使用了 UKBestVPN 服务。下载字幕没问题，所以VPN服务应该没有问题。有人说我需要在Win 7中设置端口10060。我在防火墙高级设置中做了，但错误再次出现。

谢谢你。

```
C:\Program Files (x86)\get_iplayer>get_iplayer --pid b01fkbb3
get_iplayer v2.80, Copyright (C) 2008-2010 Phil Lewis
This program comes with ABSOLUTELY NO WARRANTY; for details use --warranty.
This is free software, and you are welcome to redistribute it under certain
conditions; use --conditions for details.

INFO Trying to stream pid using type tv
INFO: pid found in cache
Matches:
524: Newsnight - 02/04/2012, BBC Two, News,TV, default,

INFO: 1 Matching Programmes
INFO: Checking existence of default version
INFO: flashhigh1,flashhigh2,flashstd1,flashstd2 modes will be tried for version default
INFO: Trying flashhigh1 mode to record tv: Newsnight - 02/04/2012
INFO: File name prefix = Newsnight_-_02_04_2012_b01fkbb3_default
RTMPDump 2.4 git-6230845 2011-9-25
(c) 2010 Andrej Stepanchuk, Howard Chu, The Flvstreamer Team; license: GPL
Connecting ...
ERROR: RTMP_Connect0, failed to connect socket. 10060 (Unknown error)
INFO: Command exit code 3 (raw code = 768)
WARNING: Failed to stream file C:\Users\Tin\Desktop\iPlayer Recordings\Newsnight_-_02_04_2012_b01fkbb3_default.partial.mp4.flv via RTMP
INFO: skipping flashhigh1 mode
INFO: Trying flashhigh2 mode to record tv: Newsnight - 02/04/2012
INFO: File name prefix = Newsnight_-_02_04_2012_b01fkbb3_default
RTMPDump 2.4 git-6230845 2011-9-25
(c) 2010 Andrej Stepanchuk, Howard Chu, The Flvstreamer Team; license: GPL
Connecting ...
ERROR: RTMP_Connect0, failed to connect socket. 10060 (Unknown error)
INFO: Command exit code 3 (raw code = 768)
WARNING: Failed to stream file C:\Users\Tin\Desktop\iPlayer Recordings\Newsnight_-_02_04_2012_b01fkbb3_default.partial.mp4.flv via RTMP
INFO: skipping flashhigh2 mode
INFO: Trying flashstd1 mode to record tv: Newsnight - 02/04/2012
INFO: File name prefix = Newsnight_-_02_04_2012_b01fkbb3_default
RTMPDump 2.4 git-6230845 2011-9-25
(c) 2010 Andrej Stepanchuk, Howard Chu, The Flvstreamer Team; license: GPL
Connecting ...
ERROR: RTMP_Connect0, failed to connect socket. 10060 (Unknown error)
INFO: Command exit code 3 (raw code = 768)
WARNING: Failed to stream file C:\Users\Tin\Desktop\iPlayer Recordings\Newsnight_-_02_04_2012_b01fkbb3_default.partial.mp4.flv via RTMP
INFO: skipping flashstd1 mode
INFO: Trying flashstd2 mode to record tv: Newsnight - 02/04/2012
INFO: File name prefix = Newsnight_-_02_04_2012_b01fkbb3_default
RTMPDump 2.4 git-6230845 2011-9-25
(c) 2010 Andrej Stepanchuk, Howard Chu, The Flvstreamer Team; license: GPL
Connecting ...
ERROR: RTMP_Connect0, failed to connect socket. 10060 (Unknown error)
INFO: Command exit code 3 (raw code = 768)
WARNING: Failed to stream file C:\Users\Tin\Desktop\iPlayer Recordings\Newsnight_-_02_04_2012_b01fkbb3_default.partial.mp4.flv via RTMP
INFO: skipping flashstd2 mode
ERROR: Failed to record 'Newsnight - 02/04/2012 (b01fkbb3)'

C:\Program Files (x86)\get_iplayer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T03:26:38.980

您不能通过成功下载字幕文件来假设视频服务器将与您的 VPN 配合使用。我相当肯定 .srt 是由 BBC 服务器提供的，而视频流是由一个大型 CDN 提供的。

再次尝试

> **C:\Program Files (x86)\get_iplayer>get_iplayer --pid b01fkbb3 --verbose --long**

看看结果。如果看起来对字幕文件的请求与对视频流的请求的域不同，您最有可能的问题是 Limelight 或 Akamai 拒绝通过 UKBestVPN 发出的请求。

如果 CDN 能够明智地规避地理限制，付费 VPN 通常没有义务为您提供新 IP ——但询问也无妨。抱歉，这可能不是您想听到的；视频服务器拒绝您的请求可能有更良性的原因......也许如果您的 VPN 真的很忙，那么响应 RTMP 握手可能会很慢......等等。

PS假设你纠正了你的问题，这里有几个提示：

1.  进入**C:\Program Files (x86)\get_iplayer**并复制**get_iplayer.cmd**；将其粘贴回程序文件夹并将其重命名为**bbc.cmd**。

    > 现在你只需要输入**bbc -g horizo​​n**。

2.  创建一个名为**PATH**的用户变量并将**C:\Program Files (x86)\get_iplayer**放入其中。

    > 现在，您只需按下**Windows 键**并直接在“***搜索程序和文件***”框中键入**bbc -g Horizo​​n 。**

**   您不必在一个微不足道的命令行窗口中处理文本换行。

    > Right-click on the get_iplayer icon and select **properties**; click on the **Layout** tab and you can resize it to something more usable.* 

* * *

 *## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T14:11:18.377

Use Expat Shield or any other program that provides a UK IP address. Get_iPlayer will do the download job. No RTMP error, then. UKBestVPN may not be as stable to bypass the IP restriction as Expat Shield is.*

# css - 除了顶部之外的所有侧面的css阴影

> ID：10031746
> 
> 赞同：5
> 
> 时间：2012-04-05T15:44:47.300
> 
> 标签：css

嗨，试图在除顶部之外的所有侧面都获得阴影，对于下拉子菜单，在此站点上找到了此代码，它在所有侧面都有阴影，但没有底部

```
body {
     width: 300px;
     height: 200px;
     margin: 20px auto;

 -webkit-box-shadow: 0 -3px 3px -3px #999, 3px 0px 3px -3px #999, -3px 0px 3px -3px #999;
 -moz-box-shadow:    0 -3px 3px -3px #999, 3px 0px 3px -3px #999, -3px 0px 3px -3px #999;
 box-shadow:         0 -3px 3px -3px #999, 3px 0px 3px -3px #999, -3px 0px 3px -3px #999
 } 
```

我如何改变为除顶部之外的所有方面的阴影？
一直在尝试小提琴，但我一生都无法理解上面的代码来改变它从上到下的影子
[http://jsfiddle.net/PuKDb/](http://jsfiddle.net/PuKDb/)

需要它像这样
[http://jsfiddle.net/leaverou/8tgAp/](http://jsfiddle.net/leaverou/8tgAp/)
但上面的阴影不是红线......

我是一个剪切和粘贴编码器，所以会有任何帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T15:48:49.123

```
body {
    width: 300px;
    height: 200px;
    margin: 20px auto;

-webkit-box-shadow: 3px 3px 3px -3px #999, 3px 3px 3px -3px #999, -3px 3px 3px -3px #999;
-moz-box-shadow:    3px 3px 3px -3px #999, 3px 3px 3px -3px #999, -3px 3px 3px -3px #999;
box-shadow:         3px 3px 3px -3px #999, 3px 3px 3px -3px #999, -3px 3px 3px -3px #999
} 
```

没有解释，因为您显然对它为什么起作用不感兴趣，只是它起作用了；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T01:23:46.473

可能作者永远不会再访问这个话题了，但我发现正确的定义是由两个声明而不是 3 个：

```
box-shadow: 3px 5px 8px -1px rgba( 15, 15, 15, .8 ), -3px 5px 8px -1px rgba( 15, 15, 15, .8 ); 
```

这很难解释，但如果你定义两种原色，你会在底部阴影中看到原因：

```
box-shadow: 3px 3px 8px -1px red, -3px 3px 8px -1px yellow; 
```

非零整数作为第一个值的存在混合了两种颜色，产生了一种新的颜色。

关键是，定义三个声明，其中一个将覆盖另一个（取决于参数），从而产生更暗的阴影。

这同样适用于垂直偏移。如果它们都相同（这里用 5px 表示），则会发生另一个叠加，如果为正，则在底部阴影中，如果为负，则在顶部阴影中（不是主题的情况）。

我希望它可以帮助别人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:50:44.090

这应该适合你

```
body 
{
    width: 300px;
    height: 200px;
    margin: 20px auto;

-webkit-box-shadow: 3px 3px 3px -3px #999, 3px 3px 3px -3px #999, -3px 3px 3px -3px #999;

-moz-box-shadow:    3px 3px 3px -3px #999, 3px 3px 3px -3px #999, -3px 3px 3px -3px #999;

box-shadow:         3px 3px 3px -3px #999, 3px 3px 3px -3px #999, -3px 3px 3px -3px #999
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T15:57:28.963

```
.div {
    -webkit-box-shadow: 0 3px 3px -3px #c00;
    -moz-box-shadow:    0 3px 3px -3px #c00;
    box-shadow:         0 3px 3px -3px #c00;
} 
```

根据大小和模糊更改第二组数字。

# perl - 将字符串转换为浮点数

> ID：10031752
> 
> 赞同：3
> 
> 时间：2012-04-05T15:44:56.067
> 
> 标签：perl

soemone 可以帮我解决以下情况吗？我正在尝试比较 $price 和 $lsec。

```
if( (sprintf("%.2f", ($price*100+0.5)/100)*1 != $lsec*1) )
{
                print Dumper($price,$lsec)
} 
```

有时，倾销者会打印相同的数字（作为字符串）并跳进去。想，乘以 1 会使它们产生浮点数......

这里自卸车输出：

```
$VAR1 = '8.5';
$VAR2 = '8.5'; 
```

我究竟做错了什么？

谢谢，

问候和复活节快乐。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T16:41:22.187

Perl 变量中*存储的内容与**使用*方式之间存在差异。您是正确的，乘以 1 会强制将变量*用作*数字。它还导致将数字存储在[`SV`](http://perldoc.perl.org/perlguts.html#Datatypes)向解释器表示变量的数据结构中。您可以使用该[`Devel::Peek`](http://perldoc.perl.org/Devel/Peek.html)模块查看 Perl 存储在每个变量中的内容：

```
use Devel::Peek;
my $num = "8.5";
Dump $num; 
```

输出：

```
SV = PV(0xa0a46d8) at 0xa0c3f08
  REFCNT = 1
  FLAGS = (POK,pPOK)
  PV = 0xa0be8c8 "8.5"\0
  CUR = 3
  LEN = 4 
```

继续……

```
my $newnum = $num * 1;
Dump $num;
Dump $newnum; 
```

输出：

```
SV = PVNV(0xa0a46d8) at 0xa0c3f08
  REFCNT = 1
  FLAGS = (PADMY,NOK,POK,pIOK,pNOK,pPOK)
  IV = 8
  NV = 8.5
  PV = 0xa0be8c8 "8.5"\0
  CUR = 3
  LEN = 4
SV = NV(0x9523660) at 0x950df20
  REFCNT = 1
  FLAGS = (PADMY,NOK,pNOK)
  NV = 8.5 
```

我们关心的属性是`PV`（字符串指针）、`NV`（浮点数）和`IV`（整数）。最初，`$num`只有字符串值，但将其用作数字（例如在乘法中）会导致它存储数值。但是，`$num`仍然“记住”它是一个字符串，这就是为什么`Data::Dumper`将它视为一个字符串。

对于大多数目的，不需要*显式*强制将字符串用作数字，因为运算符和函数可以以最合适的形式使用它们。`==`例如， and运算符将`!=`其操作数强制转换为数字形式以进行数字比较。使用`eq`or`ne`代替强制进行字符串比较。这是始终[`use warnings`](http://perldoc.perl.org/warnings.html)在您的 Perl 脚本中的另一个原因，因为尝试将非数字字符串与 进行比较`==`将获得以下警告：

```
Argument "asdf" isn't numeric in numeric eq (==) at -e line 1. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T18:16:21.280

你说对一个字符串乘以 1 会强制它被评估为一个数字是正确的，但是数字`!=`比较器会做同样的事情。这大概是您从其他语言中获得的一种技术，因为 Perl 通常会做*正确的事情*，并且不需要强制转换任一操作数。

让我们看一下您要比较的值：

```
use strict;
use warnings;

use Data::Dumper;

my $price = '8.5';
my $lsec = '8.5';

my $rounded_price = sprintf("%.2f", ($price * 100 + 0.5) / 100);
print "$rounded_price <=> $lsec\n";

if ( $rounded_price != $lsec ) {
  print Dumper($price,$lsec);
} 
```

**输出**

```
8.51 <=> 8.5
$VAR1 = '8.5';
$VAR2 = '8.5'; 
```

所以 Perl 正确地说 8.51 不等于 8.5。

我怀疑你的

```
($price * 100 + 0.5) / 100 
```

旨在四舍五入`$price`到小数点后两位，但实际上它所做的只是增加`$price`0.005。我想你是想写

```
int($price * 100 + 0.5) / 100 
```

但是您也可以通过`sprintf`它来做同样的事情的另一种方式。

*任何一个*

```
$price = int($price * 100 + 0.5) / 100 
```

*或者*

```
$price = sprintf ".2f", $price 
```

但两者都是矫枉过正！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:58:16.390

这部分：

```
($price*100+0.5)/100) 
```

如果你输入 8.5，你会得到 8.505。这自然不等于8.5。由于您没有更改`$price`，因此您不会注意到任何差异。

Perl 会自动处理转换，因此您无需担心这一点。

```
my $x = "8.5";
my $y = 8.5;
print "Equal" if $x == $y; # Succeeds 
```

比较的性质，`==`或者在您的情况下`!=`将参数转换为数字，无论它们是否为数字。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-05T15:49:45.667

你没有做错什么。Perl 在转储之前将其转换为字符串。对于比较，使用`==`and`!=`进行数字比较和`eq`字符串`ne`比较。Perl 根据需要转换为字符串和数字。

例子：

`$ perl -MData::Dumper -e "my $a=3.1415; print Dumper($a);"`

`$VAR1 = '3.1415';`

# ruby-on-rails - xlsx 问题：创建包含大量行的 excel 工作表

> ID：10031756
> 
> 赞同：4
> 
> 时间：2012-04-05T15:45:04.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3, export-to-excel, axlsx

我正在使用 Axlsx 创建一个 excel 文件。对于一个小数据集，它工作得很好。但是一旦数据集变大，它就会挂起。我在这个过程上运行了 strace，它做了很多 brk。

```
a = Axlsx::Package.new
book = a.workbook
book.add_worksheet(:name => "test") do |sheet|

  input_array.each do |input_data|
     ...# covert input_data to row_data
     sheet.add_row(row_data)
  end
end
File.open("testfile", 'w') { |f| f.write(p.to_stream().read) } 
```

我的 input_array 大小约为 400,000，因此工作表有 400,000 行，非常大。它卡在`p.to_stream().read`. 任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T04:55:36.563

看来我需要开始关注SO了！这是 randym（axlsx 的作者）

有几件事我想指出应该可以帮助你完成你需要做的事情，嗯……完成了！

1.  如果您正在写入文件，请考虑 Package#serialize - 不是因为它更快，而是因为它需要您维护的代码更少。

    p.serialize '文件名.xlsx'

2.  在过去的几周里，性能得到了重大改进。请升级到 1.1.1 gem 不再依赖 RMagic，并且不再需要 use_autowidth = false。

[https://github.com/randym/axlsx](https://github.com/randym/axlsx)

大师的基准：

```
Benchmarks w/40k rows:
                            user     system      total        real
axlsx_noautowidth      68.130000   1.690000  69.820000 ( 80.257108)
axlsx                  61.520000   2.290000  63.810000 ( 78.187423)
axlsx_shared           53.280000   1.170000  54.450000 ( 62.880780)
axlsx_stream           52.110000   1.360000  53.470000 ( 61.980672)
csv                    10.670000   0.930000  11.600000 ( 14.901387)

Benchmarks w/4k rows:
                            user     system      total        real
axlsx_noautowidth       4.880000   0.120000   5.000000 (  5.314383)
axlsx                   5.470000   0.110000   5.580000 (  5.853739)
axlsx_shared            5.720000   0.080000   5.800000 (  6.135263)
axlsx_stream            4.840000   0.090000   4.930000 (  5.194801)
csv                     1.090000   0.090000   1.180000 (  1.484763) 
```

这是基准测试文件：

[https://gist.github.com/2411144](https://gist.github.com/2411144)

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:20:45.040

您可以尝试禁用处理列自动宽度功能的 RMagick，因为它是一个非常繁重的过程 AFAIK。

```
a = Axlsx::Package.new   
a.use_autowidth = false 
```

# android - 我如何在 android 中创建/打开数据库？

> ID：10031757
> 
> 赞同：0
> 
> 时间：2012-04-05T15:45:08.847
> 
> 标签：android, cordova

我正在使用PhoneGap，n在xCode中使用此代码然后正常运行并在iphone模拟器中显示数据库--> 5.0-->应用程序-->（应用程序名称）-> Webkit->数据库

但是当我在 Eclipse 中时，它不会在 ddms->data->data->database 中创建任何数据库。它如何正常工作。建议我

```
<!DOCTYPE html>
<html>
  <head>
    <title>Contact Example</title>

    <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    //
    function onDeviceReady() {
        var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
        db.transaction(populateDB, errorCB, successCB);
    }

    // Populate the database 
    //
    function populateDB(tx) {
         tx.executeSql('DROP TABLE IF EXISTS DEMO');
         tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
         tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
         tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
    }

    // Transaction error callback
    //
    function errorCB(tx, err) {
        alert("Error processing SQL: "+err);
    }

    // Transaction success callback
    //
    function successCB() {
        alert("success!");
    }

    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>Database</p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:34:43.357

DDMS 无权访问 /data 目录。有关解决方法，请参阅这两个 stackoverflow 讨论：

*   [复制到 SD 卡](https://stackoverflow.com/questions/4935388/ddms-file-explorer-cant-access-data-data-htc-desire-hd)
*   [使用 adb 拉取](https://stackoverflow.com/questions/1105219/android-where-are-database-files-stored)

# objective-c - 频繁（5Hz）核心数据保存的性能开销

> ID：10031760
> 
> 赞同：2
> 
> 时间：2012-04-05T15:45:20.140
> 
> 标签：objective-c, ios, core-data, nsmanagedobject, nstimeinterval

对于播放音频文件的 iPhone 应用程序，我正在开发一个系统来跟踪用户在他们听过的任何一集中的进度（例如，他们听了 file1 的前 4:35，然后开始另一个文件，然后继续返回到 file1，它从 4:35 开始）。

我已经建立了一个核心数据模型来存储元数据，但我想知道在播放期间我可以/应该多积极地缓存当前位置。

目前我刚刚坚持保存：调用以前用于更新时间标签和 UISlider 播放头的方法。NSTimerInterval 每 0.2 秒调用一次该方法。

0.2 秒比我需要跟踪进度缓存的精度高得多。无论如何，这些值都会四舍五入到最接近的秒数，因此基本上每次保存的 4/5 是多余的。

不过，鉴于这几乎是 Core Data 正在做的所有事情，它只在任何给定时间处理单个记录的单个值，我想知道只做额外的、不必要的保存是否更有意义:'s，或者管理第二个计时器以减少更新频率。

照原样，Instruments 报告每个事件的保存持续时间约为 800，在 2000 年左右达到峰值。我不确定如何解释这些结果。模拟器中的实际应用性能似乎没有受到显着影响。

如果这种保存非常便宜，以至于将代码复杂度保持在低水平（只管理一个计时器）是有意义的，我会保持原样，但我的直觉是，无论多么便宜，这都是很多操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:58:31.670

你不应该看到你在电池消耗中看到的那样大的性能差异。

在 iOS 设备中使用闪存写入磁盘比在计算机上写入旋转盘 HDD 快得多。此外，与保持电镀旋转相比，对 HDD 的写入不会花费太多电力。但是，相对于读取或仅保留闪存而言，写入闪存存储需要更多的功率。

换句话说，在 iOS 设备上写入的功耗不可忽略。如果您可以摆脱 4hz，那很容易为您的应用程序的电池消耗带来显着改善。

# javascript - 如何正确地将 jQuery 插件导入 Node.JS？

> ID：10031766
> 
> 赞同：9
> 
> 时间：2012-04-05T15:45:33.050
> 
> 标签：javascript, jquery, node.js, prototype

## 背景

我是 Node.JS 的新手，但对 JavaScript 和 jQuery 非常有经验。我通过 安装 jQuery 没有问题`npm install jquery`，但是，在代码中引用插件是另一个挑战。

我已经查看了[这个类似的 StackOverflow 问题](https://stackoverflow.com/questions/3987768/jquery-plugins-with-node-js)，并且该解决方案似乎有效，但在我看来，每次需要插件时实例化“假”浏览器窗口并注入基于 jQuery 插件的函数可能不是最有效的方法。

[对我来说linq.js](http://linqjs.codeplex.com/)失败的特定插件（是的，我知道 js linq 可以通过 npm 获得，但它与 linq.js 不同！）。

**注意：**我所指的插件不依赖于任何 DOM 元素；就我而言，它只是通过各种数据函数运行 JSON 对象。这就是我认为不需要实例化窗口对象的原因。

## 问题

如何在 Node.JS 应用程序中正确导入和使用 jQuery 插件？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2022-01-01T10:53:12.413

你不能这样做。JQuery 在客户端操作 DOM，这意味着它在运行 NodeJs 的服务器端没有业务。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-07T12:26:34.620

你没有。

您永远不会在服务器上使用 jQuery。它在那里没有位置，您在服务器上没有 DOM，而 jQuery 本身就是一个平庸的库。

如果您真的想在节点中使用“jQuery 插件”，您可以将插件重写为不依赖 jQuery 的独立模块。

顺便说一句，你也不应该需要 linq.js，因为它是你不需要的 API，你已经有了数组方法。还有你在 JavaScript 中编码 C# 而不是学习 JavaScript。

您还拥有所有数组方法（map、filter、reduce 等），因此您根本不需要它。如果你真的想要一些 linq.js 提供的糖，请改用[下划线](http://documentcloud.github.com/underscore/)。（我个人推荐 ES5 over underscore）

请正确使用 ECMAScript 而不是模拟 C#。

# linux - 当我通过输入重定向删除正在使用的文件时会发生什么？

> ID：10031768
> 
> 赞同：1
> 
> 时间：2012-04-05T15:45:38.830
> 
> 标签：linux, postgresql

在 linux 上，我使用 psql 和输入重定向运算符将文件加载到数据库中。我想删除该文件以释放一些磁盘空间。会不会影响负载？

```
psql mydatabase < myfile.sql &
rm myfile.sql 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:48:24.770

在完成之前，该文件实际上不会从磁盘中删除`psql`。它将从目录中删除，因此不会出现，但文件将保留在磁盘上（用完空间），直到操作完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T18:39:16.727

在 linux（和大多数 unix 变体）中，删除进程当前保持打开的文件将导致操作系统删除目录条目，但将文件本身保留在磁盘上，直到最后一个保持文件打开的进程将其关闭，因此使用该文件的进程可以像什么事都没发生一样愉快地工作。

所以（1）您的脚本是幸运的巧合（shell 在设置重定向之前也不会删除文件），并且（2）在`psql`完成使用它之前尝试删除文件几乎没有效果，因为文件仍然会占用磁盘空间直到`psql`完成。

你可能的意思是：

```
(psql mydatabase < myfile.sql && rm myfile.sql) & 
```

这就像在后台生成一个子shell，它运行 psql 命令并*在它返回*remove之后`myfile.sql`。

意思是“`&&`运行左侧，只有成功（读取：返回退出状态0）运行右侧”。这是一个常见的 shell 习惯用法。

# java - 通用数组创建

> ID：10031771
> 
> 赞同：8
> 
> 时间：2012-04-05T15:45:45.127
> 
> 标签：java, arrays, generics

这是我正在使用的代码

```
public class aClass<T> {

    private T[] elements;

    public aClass(T[] elements) {
        this.elements = elements;
    }

    public void doSomething() {
        T[] newArray = (T[]) new Object[5];
        ...
    }

} 
```

我见过有人说创建这样的数组是个坏主意，因为它不是类型安全的。但是，每次我使用它时，我都没有遇到任何问题。什么时候创建这样的数组会导致问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T16:11:20.150

您不能创建 T 数组，因为 Java 在运行时不知道 T 的类型是什么。这是因为在 Java 中泛型是通过类型擦除实现的。这意味着编译器在确保一切正常后会丢弃大部分泛型类型信息。

对于数组，情况就不同了，因为 Java 需要知道 T 的确切类型才能创建给定的数组，并且由于无法确定此类事情，因此您无法创建泛型类型的数组。

您可以做的是提供您要使用的实际数组的实例，Java 编译器可以确保它是适当的类型：

```
public static <T> void fillWith(T[] destiny, List<? extends T> source){
    for(int i=0; i<= destiny.length; i++){
        destiny[i] = source.get(i);
    }
} 
```

该`java.utils.Arrays.copy`方法提供了一种谨慎使用泛型和反射的替代方法，您可以将其用作您想要做的事情的参考。

```
public static <T> T[] copyOf(T[] original, int newLength) {
   return (T[]) copyOf(original, newLength, original.getClass());
}

public static <T,U> T[] copyOf(U[] original, int newLength, Class<? extends T[]> newType) {
        T[] copy = ((Object)newType == (Object)Object[].class)
            ? (T[]) new Object[newLength]
            : (T[]) Array.newInstance(newType.getComponentType(), newLength);
        System.arraycopy(original, 0, copy, 0,
                         Math.min(original.length, newLength));
        return copy;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T16:12:19.643

这是一个导致问题的示例：

```
public class Main {

    public static class List<E extends Number> {

        private E[] myE;

        public void hello(E e) {
            E[] newArray = (E[]) new Object[5];
            for (int i = 0; i < newArray.length; i++) {
                newArray[i] = e;
            }
            myE = newArray;
        }

    }

    public static <T> T[] createArray(int size) {
        return (T[]) new Object[size];
    }

    public static void main(String[] args) throws IOException {
        List<Integer> integers = new List<Integer>();
        integers.hello(5);
    }
} 
```

您的代码有效，因为当您声明泛型参数`<T>`时，它是未绑定的，这意味着它扩展了`Object`. 当您将数组转换为时，`(T[])`您实际上是在转换为，`(Object[])`因为这是编译器可以做的最好的事情。现在，如果您将数组保留在代码中，您应该不会遇到太多问题。但是，如果您的代码之外的某个人可以检索该数组并使用对象以外的类型实例化您的类，他将有 ClassCastException。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T15:55:26.843

不是类型安全的东西本身不会产生问题。但它可以在编译时隐藏问题，直到正确的时刻才会弹出。

您将能够在非类型安全的环境中完全工作而不会出现问题，但这是一个坏习惯，因为类型安全的环境确实可以保证您不会遇到一组常见的运行时错误，您没有任何目前，但您没有任何保证，这些确实很重要，您可以信任的任何安全都意味着更少的努力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T15:56:57.887

其他人都错了。除非您在创建时拥有该类型的实例，否则没有其他方法可以创建数组。另请参阅[如何在 Java 中创建泛型数组？](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)

如果你有类型实例（= 具有类型的东西`Class<T>`），你可以调用`java.lang.reflect.Array.newInstance(Class<?>, int)`，但即便如此，你也需要强制转换，那何必呢？

`elements`如果类型是`Object`而不是，我会说情况会有所不同，`T`但由于情况并非如此，因此代码完全可以。

如果你想进一步隐藏它，你可以编写一个辅助方法：

```
 @SuppressWarnings( "unchecked" )
  public static <T> T[] createArray( int size ) {
      return (T[]) new Object[size];
  } 
```

这会在您调用它时创建一个数组而无需强制转换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T16:00:56.720

`Collection`在这种情况下使用 a 更安全。做类似的东西

```
...
Collection<T> newElements = new ArrayList<T>(5);
... 
```

无论如何，据我所知，创建这样的通用数组不会给您带来真正的问题，但“闻起来很糟糕”，因为它需要显式类型转换。在这种情况下你真的需要一个数组吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-06T00:37:28.950

> 我见过有人说创建这样的数组是个坏主意，因为它不是类型安全的。但是，每次我使用它时，我都没有遇到任何问题。什么时候创建这样的数组会导致问题？

人们说这是一个坏主意，因为从逻辑上讲，将运行时类型为 if is not 的对象强制转换是`Object[]`不`T[]`正确`T`的`Object`。

但是，您看不到任何直接的问题，因为在类内部（在 的范围内`T`）`T`被删除了。所以不检查从`Object[]`to的演员表。`T[]`

如果你所做的只是在你的类中使用这个变量（在类型变量的范围内`T`），并且你永远不会将它返回给类外的人，并且类外的人无法访问它，那么它不会引起任何问题。

事实上，你这样做的方式是有好处的——在获取和设置数组元素时，你可以获得泛型类型检查的所有好处，如果你只是遵循完全的“类型安全”，你就不会得到这些好处使用类型变量的解决方案`Object[]`，在这种情况下，您将不得不手动转换您从中获得的东西。

如果您将此数组变量作为 type 返回到外部（或以其他方式允许外部访问它），您将遇到问题`T[]`，因为调用代码将期望某种类型的数组，并且泛型将在调用中插入强制转换接收到这个数组时的代码，并且强制转换将在运行时失败（因为例如 a`Object[]`不是 a `String[]`；它们在运行时是不同的类型）。这是一个简单的例子：

```
public class aClass<T> {

    private T[] elements;

    public aClass(T[] elements) {
        this.elements = elements;
    }

    public void doSomething() {
        elements = (T[]) new Object[5];
        ...
    }

    public T[] getArray() {
        return elements;
    }

}

// some other code...
aClass<String> foo = new aClass<String>(new String[2]);
foo.doSomething();
String[] bar = foo.getArray(); // ClassCastException here 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T15:48:51.480

您可能在比较和打印方面遇到问题.. 基本上任何时候知道类型对于格式化很重要。你拥有它的方式系统不知道数组中有什么数据

# python - 我如何在 python (GAE) 中进行 api 调用？

> ID：10031772
> 
> 赞同：0
> 
> 时间：2012-04-05T15:45:46.540
> 
> 标签：python, google-app-engine, recaptcha

我在 Google 应用引擎中制作了一个简单的 Web 表单，并在其中添加了一个 recaptcha 组件。该组件显示在我的网页上。但我不知道如何进行 api 调用。我的代码是；

```
def post(self):

    challenge = self.request.get('recaptcha_challenge_field')
    response  = self.request.get('recaptcha_response_field')
    remoteip  = os.environ['REMOTE_ADDR']
    private_key = 'xxx'

    cResponse = self.request.submit(http://www.google.com/recaptcha/api/verify?privatekey="private_key"&remoteip="remoteip"&challenge="challenge"&response="response")

    if cResponse.is_valid:
        # response was valid
        # other stuff goes here
        pass
    else:
        error = cResponse.error_code 
```

很明显我的 api 调用是完全错误的，但我不知道怎么做。我见过的例子使用插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T17:24:48.470

[使用此处记录](https://developers.google.com/appengine/docs/python/urlfetch/overview)的 URL Fetch API ，链接页面中的第一个示例应该适合您的需要。请注意，url fetches 有一个配额并且是可计费的。

# css - 如何开始向下 20px 的背景图像？

> ID：10031776
> 
> 赞同：0
> 
> 时间：2012-04-05T15:46:06.747
> 
> 标签：css

我环顾四周，这似乎很简单，但我似乎无法解决。

我有一个带背景的 div。我希望背景从 20px 开始向下，然后重复-y，就像在其余部分向下重复一样。

```
<div class="main_col"></div>
.main_col {
    width: 680px;
    float: left;
    background:#fff;
    background-position:50% 50%;
} 
```

这就是我正在尝试的，但它正在填充整个 div？

这是我尝试过的...... http://jsfiddle.net/uzi002/gqqTM/4/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:58:16.287

您不能使用当前 CSS2 标准中的一个类定义来做到这一点。

使用单独的 div 作为背景。

如果你想摆弄一些 CSS3，你可以查看

```
background-origin 
```

在 [http://www.css3.info/preview/background-origin-and-background-clip/](http://www.css3.info/preview/background-origin-and-background-clip/)

请注意浏览器支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:49:01.080

您可以尝试将 padding-top: 20px 添加到 .main_col 并在其中创建具有此背景的附加 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:49:18.333

```
.main_col {
    width: 680px;
    float: left;
    background: url("your image") 0px 20px;        
} 
```

**更新**

这是使用**giker**的示例尝试这样的[事情](http://jsfiddle.net/88FZ6/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T15:57:56.020

有 3 个与实现此目的相关的 CSS 属性：

1.  `background-image { url(/myBackground.png) }`// 选择图像
2.  `background-repeat { no-repeat }`// 选择如何或是否重复
3.  `background-position { 1px 1px }`// 选择背景图像左上角相对于元素左上角的 X、Y 坐标。

现在，这一切都非常冗长，但可以浓缩为一条规则，如下所示：

```
background { url(myBackground.png) no-repeat 1px 1px } 
```

可以使用相对值（例如代码显示的 %）作为背景位置，但您需要使用 px。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-05T15:49:10.123

尝试使用~~边距~~填充。

IE

```
.main_col {
    width: 680px;
    float: left;
    background:#fff;
    background-position:50% 50%;
    padding-top:20px;
} 
```

# c# - C# - 韩语编码

> ID：10031782
> 
> 赞同：4
> 
> 时间：2012-04-05T15:46:28.830
> 
> 标签：c#

这可能与其他韩语编码问题不同。

我必须刮掉这个网站，它是韩文。

他们网站上的一个例句是“개인정보보호를 위해 뒤로가기 버튼 대신 검색결과 화면 상단과 하단의 이전 버튼읋닰 용해

我正在使用 HttpWebRequest 和 HttpWebResponse 来抓取网站。

这就是我检索 html 的方式

-- 部分代码 --

```
using (Stream data = resp.GetResponseStream())
{
    response.Append(new StreamReader(data, Encoding.GetEncoding(code), true).ReadToEnd());
} 
```

现在我的问题是，我没有得到正确的韩文字符。在我的“代码”变量中，我将代码页基于 MSDN [http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)（让我缩小范围）。

以下是韩语代码页：51949、50225、20949、20833、10003、949

但仍然没有得到正确的韩文字符？你认为是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:51:38.950

该页面很可能不是特定的韩语编码，而是其中一种 Unicode 编码。

尝试`Encoding.UTF8`, `Encoding.Default`(UTF-16) 而不是特定的代码页。也有`Encoding.UTF7`和`Encoding.UTF32`，但它们并不常见。

可以确定的是，检查服务器返回的内容类型的元标记和标头。

* * *

更新（从评论中收集）：

由于 content-type 标头是`EUC-KR`，因此相应的代码页是 51949，这就是您需要用来检索页面的内容。

目前尚不清楚您是否将其写入文件 - 在写入文件时需要使用*相同*的编码，或者将`byte[]`原始文件编码转换为输出文件编码（使用[`Encoding.Convert`](http://msdn.microsoft.com/en-us/library/system.text.encoding.convert.aspx)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-23T07:39:44.667

虽然有完全相同的问题，但我已经用下面的代码完成了它：

```
Encoding.UTF8.GetString(DownloadData(URL)); 
```

这直接将 WebClient GET 请求的输出转换为 UTF8 编码。

# jquery - 选择div的最佳方式

> ID：10031786
> 
> 赞同：1
> 
> 时间：2012-04-05T15:46:52.807
> 
> 标签：jquery

我想在另一个 div 中添加一个 div#container ，然后获取内部 div 的选择器。哪个是更好的方法？

```
$('#container').html("<div><div class='get'></div></div>");
var div = $('#container').find('.get'); 
```

或者

```
var div = $('<div></div>');
$('#container').html(
    $('<div></div>').html(div)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:49:15.293

后者。在第一个示例中，您遍历的次数`find`比第二个示例多得多（因为 ），这对性能有一些影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:50:25.550

任何一种方法都可以，但第一种方法使用相同的选择器两次。更好的做法是

```
var con = $('#container').html("<div><div class='get'></div></div>");
var div = con.find('.get'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:48:51.503

```
var div = $('<div />');
$('#container').html('').append(div); 
```

我不认为你可以使用 jQuery 对象作为参数`html()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T15:48:55.620

无论哪种方式都绝对没问题。如果您要添加元素，我可能会使用第二种方式，它看起来更干净一些。

# asp.net-mvc - 无区域的 ASP.NET Web API 中的多级路由

> ID：10031787
> 
> 赞同：4
> 
> 时间：2012-04-05T15:47:09.843
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-web-api

我正在尝试使用新的 ASP.NET Web API 来执行以下操作：

`/api/business/{id}`获取企业目录信息的 GET 。对同一 URL 的 PUT 会更新信息等。该部分工作正常。当我想添加以前的操作以查看对该业务的评论时，我遇到了问题。理想情况下，我希望在`/api/business/{id}/reviews`GET 可以返回评论，POST 提交新评论，等等。

在普通的 ASP.NET MVC 应用程序中，我可以定义两个操作方法（Reviews 和 PostReview），然后使用属性来更改操作名称并接受第二个函数的 HTTP 方法。我希望有一些方法可以用新系统中的类来做到这一点，但我无法弄清楚它是什么，而且我在文档中没有看到任何关于这个问题的信息。

使用区域不起作用*，*据我所知：我需要`/business/{id}`URL 才能工作并使用中断的区域。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T18:04:26.847

Web API 确实支持按操作路由，因此您可以执行以下操作：

```
routes.MapHttpRoute(
    name: "ActionApi",
    routeTemplate: "api/{controller}/{id}/{action}",
    defaults: new { action = "DirectoryInfo", id = RouteParameter.Optional }
); 
```

控制器方法：

```
[HttpGet]
[ActionName("DirectoryInfo")]
public void GetDirectoryInfo(int id)

[HttpPut]
[ActionName("DirectoryInfo")]
public void PutDirectoryInfp(int id)

[HttpGet]
public void Review(int id)

[HttpPost]
[ActionName("Review")]
public void PostReview(int id) 
```

另一种选择是创建两个控制器，BusinessController 和 ReviewController，并创建以下路由：

```
routes.MapHttpRoute(
    name: "BusinessRoute", 
    routeTemplate: "api/business/{id}", 
    defaults: new { controller = "Business", id = RouteParameter.Optional }
    );
routes.MapHttpRoute(
    name: "reviewsRoute", 
    routeTemplate: "api/contacts/{id}/reviews/", 
    defaults: new { controller = "Reviews", id = RouteParameter.Optional}
    ); 
```

然后使用 Web API 样式的隐式操作名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:02:43.613

> 使用区域不起作用，据我所知：我需要 /business/{id} URL 才能工作并使用中断的区域。

`DefaultHttpControllerSelector`作为记录，您可以通过覆盖ASP.NET MVC来让 Areas 和 WebApi 正常运行。我已经在工作中的 ASP.NET MVC 中解决了这个问题。请参阅以下博客了解我的实现以及有关如何将区域支持引入 WebApi 的更多详细信息：

[http://blogs.infosupport.com/asp-net-mvc-4-rc-getting-webapi-and-areas-to-play-nicely/](http://blogs.infosupport.com/asp-net-mvc-4-rc-getting-webapi-and-areas-to-play-nicely/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:56:28.013

从**DDD**的角度来看，如果 review 是一个聚合（它有自己的存储库），那么它需要自己的控制器。如果 Post 是它的根聚合，那么它必须与 Post 本身一起返回。

形成我所看到的，它是一个根聚合，因此它需要它自己的控制器。因此你有：

```
/api/reviews/{id} 
```

或者

```
/api/reviews?postId={postId} 
```

其中 id 是 post 的。

* * *

这主要是因为我们没有行动了。我对此并不完全满意，但这就是我们所拥有的。

# c# - 如何不调整数据网格或包装面板项目的大小？

> ID：10031791
> 
> 赞同：0
> 
> 时间：2012-04-05T15:47:27.963
> 
> 标签：c#, wpf, datagrid, user-controls, wrappanel

我创建了一个用户控件，其中我有一个数据网格以及其他项目。

这些控件的功能之一是通过两个按钮，我可以在`DataGrid`.

其中多个控件放置在`WrapPanel`, 中，以显示在我的主应用程序中。

现在，在运行我的应用程序并按下按钮向数据网格添加新列时，数据网格改变了大小，结果初始用户控件变得更宽，这意味着包装面板的一个子项比其他子项更宽。
如果我添加多条新行并且用户控件达到应用程序窗口的宽度，那么数据网格下方会出现一个滚动条，以便我可以滚动并查看数据网格中的所有内容。

有什么办法可以防止这种行为？

理想情况下，我正在寻找我的 wrappanel 子级具有恒定大小，并且我的数据网格在其中添加新列时直接呈现滚动条。因此，所有 wrappanel 子项具有相同的宽度。
如果可能的话，我不想为我的用户控件放置一个特定的常量大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:29:00.523

`Grid`使用 a 可以达到与使用a相同的结果`WrapPanel`，只是不太方便。

从网格开始，您可以设置 Width/MinWidth/MaxWidth（使用星号表示法）和 Height/.../... 以获得您想要的行为。

# caching - 实时 Facebook 和 Twitter 更新教程

> ID：10031793
> 
> 赞同：2
> 
> 时间：2012-04-05T15:47:38.087
> 
> 标签：caching, facebook-graph-api, callback, twitter, real-time-updates

我希望能够从 facebook 和 twitter 获得实时更新（对于已注册在网站上显示其内容的预定义用户，而不是正在浏览该网站的用户）。我已经阅读了这些文档，但有大量可用信息，而且很多概念对我来说都是新的。虽然我不反对学习并且很想学习，但我不知道从哪里开始。

例如，我不知道如何设置回调或缓存请求等。

哪里有一些关于如何做到这一点的好教程？

nb 我正在慢慢浏览他们的在线文档......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:59:49.773

[http://www.codedestination.com/1/post/2013/05/-facebook-real-time-updates-api-tutorial-part-i.html](http://www.codedestination.com/1/post/2013/05/-facebook-real-time-updates-api-tutorial-part-i.html)有一个很好的教程。它解释了如何订阅以及如何设置回调。

我希望它有所帮助。

# java - 从写入文件的行中获取特定字符串

> ID：10031798
> 
> 赞同：1
> 
> 时间：2012-04-05T15:47:54.973
> 
> 标签：java, string

我有一个文件，我从中逐行读取，并且我编写了一个代码来获取字符串的某个部分（从该行），它位于两个特定单词之间，例如

```
[abc] long time ago [cde] 
```

现在我已经编写了以下代码来获取很久以前的字符串

```
if (line.contains("[abc]") && line.contains("[cde]")) {
    int b = line.indexOf("abc");
    int cc = line.indexOf("cde");
    String tk = line.substring(b + 4, cc);
    System.out.println(tk);
} 
```

这段代码工作正常，但现在的问题是。我遇到了以下行

```
[abc] long time ago [cde]    [abc] Everyday is a new day [cde] 
```

现在，请告诉我如何获取这两个字符串……因为它们位于同一行，而我的代码只考虑第一个……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:50:49.973

```
while (line.contains("[abc]") && line.contains("[cde]")) {
    int b = line.indexOf("abc");
    int cc = line.indexOf("cde");
    String tk = line.substring(b + 4, cc);
    System.out.println(tk);
    line = line.substring(cc + 4);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:51:48.350

[使用此链接](http://docs.oracle.com/javase/tutorial/essential/regex/)的正则表达式，因为它们将匹配给定字符串的每次出现。

# c++ - 带有 Carbon 框架的微秒计时器

> ID：10031829
> 
> 赞同：1
> 
> 时间：2012-04-05T15:49:51.543
> 
> 标签：c++, macos, frameworks, timer, macos-carbon

我们可以在 Carbon 框架中找到相当于： Microseconds() 的等价物吗？

```
** 微秒（）
 *  
 * 概括：
 * 确定从那时起经过的微秒数
 * 系统启动时间。
 *  
 * 讨论：
 * 返回一个值，表示从一些微秒开始
 * 时间点，通常是系统启动后。一
 * 微秒是 1 * 10^-6 秒，所以有一百万 (
 * 1,000,000 ) 微秒每秒。供参考，在一
 * 微秒光可以在真空中传播约 850 英尺。
 *    
 * Microseconds() 不一定在计算机运行时提前
 *睡着了，所以它不应该用于长时间的计时。
 *  
 * 参数：
 *    
 * microTickCount：
 * 自系统启动以来经过的微秒数。
 *  
 * 可用性：
 * Mac OS X：CoreServices.framework 10.0 及更高版本
 * CarbonLib：在 CarbonLib 1.0 及更高版本中
 * 非碳 CFM：在 InterfaceLib 7.1 及更高版本中*

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:00:46.067

`Microseconds`是一项核心服务，它*始终*可以从 Carbon 访问。（Carbon 位于核心服务之上）。

它也源自经典的 Mac OS。

# node.js - HTTP 请求 node.js 使用 mikeal 的“请求”

> ID：10031832
> 
> 赞同：13
> 
> 时间：2012-04-05T15:50:13.263
> 
> 标签：node.js, httprequest

我正在尝试使用[https://github.com/mikeal/request](https://github.com/mikeal/request)。我的代码有什么问题？错误消息在代码下。在我的程序中，我使用的是我的真实 App 和 Rest ID

```
var request = require('request');
request.post( {
url: 'https://api.parse.com/1/classes/GameScore',
headers: {
    "X-Parse-Application-Id": "11111",
    "X-Parse-REST-API-Key": "222222",
    "Content-Type": "application/json" 
         },
body: {
    "score": 1337, "playerName": "Sean Plott", "cheatMode": false
    }
 }, 
function (error, response, body) {
  if(response.statusCode == 201){
    console.log('Status Update');
  } else {
    console.log('error: '+ response.statusCode);
    console.log(body);
  }
}
); 
```

错误信息：

```
node.js:134
    throw e; // process.nextTick error, or 'error' event on first tick
    ^
Error: Argument error, options.body.
at Request.init (/mnt/ws/users/$mn/mnort9/165767/node_modules/request/main.js:264:13)
at new Request (/mnt/ws/users/$mn/mnort9/165767/node_modules/request/main.js:102:8)
at request (/mnt/ws/users/$mn/mnort9/165767/node_modules/request/main.js:800:11)
at Function.post (/mnt/ws/users/$mn/mnort9/165767/node_modules/request/main.js:844:10)
at Object. (/mnt/ws/users/$mn/mnort9/165767/index.js:2:9)
at Module._compile (module.js:411:26)
at Object..js (module.js:417:10)
at Module.load (module.js:343:31)
at Function._load (module.js:302:12)
at Array.<anonymous> (module.js:430:10) 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-05T15:53:25.707

body 应该是一个字符串、数组或缓冲区。不是一个对象。

如果你想发送 json 然后发送 json

```
request({
    ...,
   json: { ... }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T10:22:28.000

我认为最好的

```
r = npm.request(options, function (error, response, body) {

if (error) {
var msg = error.code || 'Error code undefined!';
return;
};

//and after

if((response.statusCode == 200) || (response.statusCode == 201)){
}

} 
```

# java - HashMap 的奇怪序列化行为

> ID：10031833
> 
> 赞同：5
> 
> 时间：2012-04-05T15:50:15.347
> 
> 标签：java, serialization, deserialization

考虑以下三个类：

*   **EntityTransformer**包含将**实体**与字符串相关联的映射
*   **Entity**是一个包含 ID 的对象（由 equals / hashcode 使用），并且包含对**EntityTransformer**的引用（注意循环依赖）
*   **SomeWrapper**包含一个**EntityTransformer**，并维护一个 Map 关联**Entity**的标识符和相应的**Entity**对象。

以下代码将创建一个 EntityTransformer 和一个 Wrapper，向 Wrapper 添加两个实体，对其进行序列化、反序列化并测试这两个实体是否存在：

```
public static void main(String[] args)
    throws Exception {

    EntityTransformer et = new EntityTransformer();
    Wrapper wr = new Wrapper(et);

    Entity a1 = wr.addEntity("a1");  // a1 and a2 are created internally by the Wrapper
    Entity a2 = wr.addEntity("a2");

    byte[] bs = object2Bytes(wr);
    wr = (SomeWrapper) bytes2Object(bs);

    System.out.println(wr.et.map);
    System.out.println(wr.et.map.containsKey(a1));
    System.out.println(wr.et.map.containsKey(a2));
} 
```

输出是：

> {a1=whatever-a1, a2=whatever-a2}
> 
> 错误的
> 
> 真的

所以基本上，序列化以某种方式失败了，因为地图应该包含两个实体作为键。我怀疑 Entity 和 EntityTransformer 之间的循环依赖关系，实际上，如果我将 Entity 的 EntityManager 实例变量设为静态，它就可以工作。

**问题1**：鉴于我被这种循环依赖所困扰，我该如何克服这个问题？

另一件非常奇怪的事情：如果我删除维护包装器中标识符和实体之间关联的地图，一切正常......？？

**问题2**：有人明白这里发生了什么吗？

如果您想测试它，贝娄是一个完整的功能代码：

**在此先感谢您的帮助 ：）**

```
public class SerializeTest {

public static class Entity
        implements Serializable
 {
    private EntityTransformer em;
    private String id;

    Entity(String id, EntityTransformer em) {
        this.id = id;
        this.em = em;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final Entity other = (Entity) obj;
        if ((this.id == null) ? (other.id != null) : !this.id.equals(
            other.id)) {
            return false;
        }
        return true;
    }

    @Override
    public int hashCode() {
        int hash = 3;
        hash = 97 * hash + (this.id != null ? this.id.hashCode() : 0);
        return hash;
    }

    public String toString() {
        return id;
    }
}

public static class EntityTransformer
    implements Serializable
{
    Map<Entity, String> map = new HashMap<Entity, String>();
}

public static class Wrapper
    implements Serializable
{
    EntityTransformer et;
    Map<String, Entity> eMap;

    public Wrapper(EntityTransformer b) {
        this.et = b;
        this.eMap = new HashMap<String, Entity>();
    }

    public Entity addEntity(String id) {
        Entity e = new Entity(id, et);
        et.map.put(e, "whatever-" + id);
        eMap.put(id, e);

        return e;
    }
}

public static void main(String[] args)
    throws Exception {
    EntityTransformer et = new EntityTransformer();
    Wrapper wr = new Wrapper(et);

    Entity a1 = wr.addEntity("a1");  // a1 and a2 are created internally by the Wrapper
    Entity a2 = wr.addEntity("a2");

    byte[] bs = object2Bytes(wr);
    wr = (Wrapper) bytes2Object(bs);

    System.out.println(wr.et.map);
    System.out.println(wr.et.map.containsKey(a1));
    System.out.println(wr.et.map.containsKey(a2));
}

public static Object bytes2Object(byte[] bytes)
    throws IOException, ClassNotFoundException {
    ObjectInputStream oi = null;
    Object o = null;
    try {
        oi = new ObjectInputStream(new ByteArrayInputStream(bytes));
        o = oi.readObject();
    }
    catch (IOException io) {
        throw io;
    }
    catch (ClassNotFoundException cne) {
        throw cne;
    }
    finally {
        if (oi != null) {
            oi.close();
        }
    }

    return o;
}

public static byte[] object2Bytes(Object o)
    throws IOException {
    ByteArrayOutputStream baos = null;
    ObjectOutputStream oo = null;
    byte[] bytes = null;
    try {
        baos = new ByteArrayOutputStream();
        oo = new ObjectOutputStream(baos);

        oo.writeObject(o);
        bytes = baos.toByteArray();
    }
    catch (IOException ex) {
        throw ex;
    }
    finally {
        if (oo != null) {
            oo.close();
        }
    }

    return bytes;
}
} 
```

**编辑**

有一个很好的总结是什么可能是这个问题： [http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4957674](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4957674)

> 问题是 HashMap 的 readObject() 实现，为了重新散列地图，调用它的一些键的 hashCode() 方法，不管这些键是否已经完全反序列化。
> 
> 如果键包含（直接或间接）对映射的循环引用，则在反序列化期间可以执行以下顺序 --- 如果键在哈希映射之前写入对象流：
> 
> 1.  实例化密钥
> 2.  反序列化密钥的属性 2a。反序列化 HashMap（直接或间接被 key 指向）2a-1。实例化 HashMap 2a-2。读取键和值 2a-3。在键上调用 hashCode() 以重新散列地图 2b。反序列化密钥的剩余属性
> 
> 由于 2a-3 在 2b 之前执行，因此 hashCode() 可能会返回错误的答案，因为键的属性尚未完全反序列化。

现在这并不能完全解释为什么如果从 Wrapper 中删除 HashMap 或移至 EntityTransformer 类可以解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T18:05:17.297

这是循环初始化的问题。虽然 Java 序列化可以处理任意周期，但初始化必须以某种顺序发生。

在 AWT 中有一个类似的问题，其中`Component`( `Entity`) 包含对其父级`Container`( `EntityTransformer`) 的引用。AWT 所做的是在`Component` `transient`.

```
transient Container parent; 
```

所以现在每个人都`Component`可以在重新添加之前完成它的初始化`Container.readObject`：

```
 for(Component comp : component) {
        comp.parent = this; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T16:27:18.890

更奇怪的是，如果你这样做

```
Map<Entity, String> map = new HashMap<>(wr.et.map);
System.out.println(map.containsKey(a1));
System.out.println(map.containsKey(a2)); 
```

序列化和反序列化后，您将获得正确的输出。

还：

```
for( Entity a : wr.et.map.keySet() ){
    System.out.println(a.toString());
    System.out.println(wr.et.map.containsKey(a));
} 
```

给出：

```
a1
false
a2
true 
```

我想你发现了一个错误。最有可能的是，序列化以某种方式破坏了散列。事实上，我想你可能已经发现[了这个错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4957674)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:55:29.007

是否可以重写序列化，在序列化之前将引用转换为键值，然后在反序列化时将其转换回？

在序列化时找到 EntityTransformer 的哈希键并改用该值（可能在名为 parentKey 的结构中提供一个值）并将引用清空，这似乎非常简单。然后在重新序列化时，您会找到与该键值关联的 EntityTransformer 并分配其引用。

# python - TypeError：'int'对象不可订阅-python

> ID：10031834
> 
> 赞同：0
> 
> 时间：2012-04-05T15:50:18.390
> 
> 标签：python, list, int, typeerror

我正在尝试制作一个获取随机网站并计算元素的小程序。

这是我的错误：

```
Traceback (most recent call last):
  File "elements counter.py", line 23, in <module>
    if elem[1] == string:
TypeError: 'int' object is unsubscriptable 
```

这是我的代码：

```
from urllib2 import Request, urlopen, URLError

print 'Fetching URL..'

try:
    html = urlopen(Request("http://www.randomwebsite.com/cgi-bin/random.pl"))
except URLError:
    html = urlopen(Request("http://www.randomwebsitemachine.com/random_website/"))

print 'Loading HTML..'

ellist = [(None,None),]
isel = False
string = ''

for char in html.read():
    if char == '<':
        isel=True
    elif isel:
        if char == ' ' or char == '>':
            if string in ellist:
                for elem in ellist:
                    if elem[1] == string:
                        elem[0] += 1
            else:
                ellist += (1,string)
            isel = False
            string = ''
        else:
            string += char

print sorted(ellist, key = lambda tempvar: tempvar[0])

html.close()
raw_input() 
```

如果您在代码中发现更多错误，请指出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:52:44.130

当你这样做

```
 ellist += (1,string) 
```

和

```
 ellist.extend((1,string)) 
```

所以`ellist`看起来像

```
[(None, None), 1, string] 
```

因此，当您到达`for`循环中的第二个元素时，它`int`不是`tuple`.

相反，做

```
 ellist.append((1,string)) 
```

或者，如果你真的想使用`+=`，

```
 ellist += [(1,string)] 
```

其余代码看起来基本正确，但请注意，您无法正确处理引号或 HTML 注释中的尖括号。如果要解析 HTML，请使用现有的众多 HTML 解析器之一，例如 Python 的 HTMLParser 模块、lxml 或 BeautifulSoup。

# android - 将特定值与文本文件中的值进行比较

> ID：10031835
> 
> 赞同：0
> 
> 时间：2012-04-05T15:50:18.430
> 
> 标签：android, eclipse, if-statement

我有以下代码来检查特定值是否与我服务器上的文本文件中的不同。在 PHP 中它非常简单：`$str = '1.3'; if($str != '1.2') { die('not the same!'); }`而在 Java 中它......好吧。我真的不知道。正因为如此，我才问你应该怎么做？

```
try {
    // Create a URL for the desired page
    URL url = new URL("http://erik-edgren.nu/weather-right-now.txt");

    // Read all the text returned by the server
    BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
    String str;
    while ((str = in.readLine()) != null) {
        if(str != "1.2") {
            Toast.makeText(this, "Ny version finns att hämta: v" + str, Toast.LENGTH_SHORT).show();
        }
    }
    in.close();

} catch (MalformedURLException e) {
    Toast.makeText(this, "error 1", Toast.LENGTH_SHORT).show();

} catch (IOException e) {
    Toast.makeText(this, "error 2", Toast.LENGTH_SHORT).show();
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:51:44.053

Java中的对象比较是使用`equals`方法完成的，`==`比较引用。`if(str != "1.2")`应该如此`if(!str.equals("1.2"))`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:54:38.217

使用`!str.equals("1.2");`，你的问题就解决了。

# xcode - 我的视图消失了... tableViewController 加载 viewController，但视图显示为黑色。为什么？

> ID：10031840
> 
> 赞同：1
> 
> 时间：2012-04-05T15:50:32.047
> 
> 标签：xcode, uiviewcontroller, xcode4.2, uitableview

看看这种情况...

*   我的视图消失了。

为什么 ？？？

[http://www.4shared.com/photo/9XIMsP9a/AppConcDuvida.html](http://www.4shared.com/photo/9XIMsP9a/AppConcDuvida.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:00:58.530

在代码中创建 DetalhesViewController 不太可能正常工作。

如果您要使用情节提要和 segue，那么您应该在那里建立连接并在 prepareForSegue 中配置新控制器，而不是在 didSelectRowAtIndexPath 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T18:23:21.183

您应该从情节提要中实例化您的视图控制器。

```
DetalhesViewController *detailViewController = [self.storyBoard instantiateViewControllerWithIdentifier:@"controllerIdentifier"];
self.navigationController push:detailViewController animated:YES]; 
```

# php - PHP imagecreatefromjpeg 有效，那么为什么 png/bmp/gif 无效？

> ID：10031846
> 
> 赞同：5
> 
> 时间：2012-04-05T15:51:03.583
> 
> 标签：php, image, image-resizing

我想上传和调整具有不同扩展名的图片。php 从原始图片的中心裁剪出最大可能的正方形，然后将其保存为 360*360 像素。

该代码适用于 jpeg 文件，但对于 gif、bmp 和 png，我得到一个 33 字节大小的损坏文件。

这是大部分代码：

```
$file_temp = $_FILES["pic"]["tmp_name"];
list ($width, $height, $type) = getimagesize ($file_temp);

$picture_name = "... a name.ext ...";
$upload = "... some dir/$picture_name";

if (move_uploaded_file($file_temp, "$upload"))
{

    //switches content-type and calls the imagecreatefrom... function
    if ($type == 1)
    {
        header ('Content-Type: image/gif');
        $image = imagecreatefromgif($upload);
    }
    elseif ($type == 2)
    {
        header ('Content-Type: image/jpeg');
        $image = imagecreatefromjpeg($upload);
    }
    elseif ($type == 3)
    {
        header ('Content-Type: image/png');
        $image = imagecreatefrompng($upload);
    }
    else
    {
        header ('Content-Type: image/x-ms-bmp');
        $image = imagecreatefromwbmp($upload);
    }

    $image_p = imagecreatetruecolor(360, 360);

    //this code below should preserve transparency but I couldn't try it out for now...

    if($type==1 or $type==3)
    {
        imagecolortransparent($image_p, imagecolorallocatealpha($image_p, 0, 0, 0, 127));
        imagealphablending($image_p, true);
        imagesavealpha($image_p, true);
    }

    //this part is for cropping
    $x=0;
    $y=0;

    if ($width > $height)
    {
        $x= ($width - $height)/2;
        $width = $height;
    }
    else
    {
        $y = ($height - $width)/2;
        $height = $width;
    }

    imagecopyresampled ($image_p, $image, 0, 0, $x, $y, 360, 360, $width, $height);
    if ($type == 1)
        imagegif ($image_p, $upload, 80);
    elseif ($type == 2)
        imagejpeg ($image_p, $upload, 80);
    elseif ($type == 3)
        imagepng ($image_p, $upload, 80);
    else
        imagewbmp ($image_p, $upload, 80);
} 
```

因此，只有 jpeg 文件能被正确处理，而 gif、png 和 bmp 文件则不能。我没有想法......
在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:58:28.930

您的 PHP 编译时可能不支持这些格式。运行 phpinfo() 并检查输出是否有如下内容：

```
GD Support => enabled
GD Version => bundled (2.0.34 compatible)
GIF Read Support => enabled
GIF Create Support => enabled
PNG Support => enabled
libPNG Version => 1.2.10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T16:01:48.213

由于您似乎每次都得到一个损坏的 33 字节图像文件，而不是 jpg，这可能是写入文件的 PHP 错误（因为您的 PHP 文件似乎直接显示图像内容，来自您的内容类型标题）。您是否尝试过在文本编辑器中打开文件并查看其内容？如果它是乱码，那么它就是一个错误，但如果它是一个 PHP 警告，那么您的 PHP 版本可能不支持这些扩展图像类型。那，或者您的代码中可能有警告。

# wpf - ImageSourceConverter.ConvertFromString 在长时间运行的应用程序中变慢

> ID：10031847
> 
> 赞同：0
> 
> 时间：2012-04-05T15:51:06.400
> 
> 标签：wpf, c#-4.0

我有一个应用程序，它基本上显示文件中图像的幻灯片放映。图像的加载会随着时间的推移而减慢。放入一些计时代码，我已将变慢的代码行标识为下面的 ConvertFromString 行：

```
var imgSrcConverter = new ImageSourceConverter();
imgSrc = (ImageSource) imgSrcConverter.ConvertFromString(imgFilePath); 
```

在 15 个小时的整个过程中，这条线的执行从大约 70 毫秒到 > 400 毫秒。

任何人都可以就为什么会发生这种情况以及可以采取哪些措施来预防和/或改善这种情况提供任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T17:17:08.280

您可以在启动时将图像加载到内存中，然后循环浏览它们吗？

# javascript - Javascript replace() 函数在同一张图片上运行多次

> ID：10031848
> 
> 赞同：1
> 
> 时间：2012-04-05T15:51:16.580
> 
> 标签：javascript, jquery-mobile, replace

`class="replace-2x"`如果用户在具有 Retina 显示屏的移动设备上，我正在运行 Javascript 替换功能，以将我的 jQuery Mobile 网站上的标准图像替换为 Retina 质量的图像。例如，在 Retina 设备上，`logo.png`将替换为`logo@2x.png`. JS函数在这里：

```
function highdpi_init() {
    $(".replace-2x").each(function () {
        var src = $(this).attr("src");
        $(this).attr("src", src.replace(".png", "@2x.png").replace(".jpg", "@2x.jpg"));

    });
}

$(".page").live('pageinit',function(event){
    highdpi_init();
}); 
```

我现在遇到了替换功能不止一次运行的问题。因此，例如，它在页面加载时替换`logo.png`为`logo@2x.png`，但随着页面继续加载，它会一遍又一遍地在 img src 中替换`.png`为`@2x.png`，因此图像标签最终看起来像这样：

```
<img src="mobile/images/logo@2x@2x@2x@2x@2x@2x@2x@2x@2x@2x@2x.png" class="replace-2x" alt="logo" width="200"> 
```

如何防止它多次替换单个 img 元素？请记住，我将在同一页面上有多个图像，因此该功能需要应用于所有图像，但每个图像只有一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:59:55.553

问题肯定是您的“pageinit”事件被多次调用。您可以遵循 MДΓΓ БДLL 的想法（如果动态添加图像，这将不起作用），或者您可以使您的处理程序更智能，这样它就不会替换已经被替换的 src

```
function highdpi_init() {
    $(".replace-2x").each(function () {
        var $this = $(this);
        var src = $this.attr("src");
        $this.attr("src", src.replace(".png", "@2x.png").replace(".jpg", "@2x.jpg"));
        // Remove the class so it doesn't replace it again
        $this.removeClass('replace-2x')

    });
} 
```

你不需要 JS，你可以只用 CSS 来做。

```
<link rel="stylesheet" media="only screen and (-webkit-min-device-pixel-ratio: 2)" href="/css/highdpi.css"/> 
```

你可以让你的图像看起来像

```
<img src="transparent.gif" class="logo-a" alt="logo" width="200" /> 
```

你`highdpi.css`可以做

```
img.logo-a {
   background-image: url('file@2x.png') 
} 
```

而在`lowdpi.css`

```
img.logo-a {
   background-image: url('file.png') 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:03:07.573

使用 .one() 应该可以工作，因为它只是一个绑定，如果您使用 Jquery Mobile，建议的方式就可以了。除非您从服务器传回 html。在这种情况下，最好添加一个额外的条件以确保在替换之前 src 还没有 @2x.png。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T16:06:58.187

令人失望的是，官方 jQuery Mobile 文档中关于 pageinit 的文档很少。所以我要在这里推测一下。它看起来像是`pageinit`用于在特定 DOM 元素完成加载时触发事件，因为它可能尚未在初始页面加载时加载（延迟到需要时）。话虽如此，可能是向有问题的 DOM 元素添加/更改图像会再次触发 pageinit。你能用“嘿，我已经更新到 2x”的内容标记每个更新的图像吗？诸如此类的东西

```
$.data(targetimg, 'retinafied', true); 
```

然后在替换 src 之前检查该值？

# javascript - 如何处理不成功的 iframe 加载？

> ID：10031857
> 
> 赞同：1
> 
> 时间：2012-04-05T15:51:55.403
> 
> 标签：javascript, html

我的应用程序允许用户在 iframe 中查看页面，但像 www.google.com 这样的页面会产生错误

> 拒绝显示文档，因为 X-Frame-Options 禁止显示。

和诸如[stackoverflow.com/questions/590163/how-to-get-all-options-of-a-select-using-jquery 之](https://stackoverflow.com/questions/590163/how-to-get-all-options-of-a-select-using-jquery)类的页面，会向我发送一条警告信息：

> 出于安全原因，不允许装帧；单击确定以删除框架。

我应该如何检测这些情况并友好地告诉用户一般消息发生了什么，例如“此页面访问受限，请直接从新标签页访问它。”

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-05T15:58:36.053

这是因为许多网站都包含框架克星。您收到的错误很可能与尝试访问父窗口并收到拒绝访问错误的javascript进程有关。

一种可能的解决方案是在您的服务器上构建一个代理来获取 html 并从您的域提供它，但许多站点也不喜欢这样，甚至可能会因此而给您带来麻烦。

# ios - 是否可以将远程存储挂载到 iOS 的本地文件系统？

> ID：10031859
> 
> 赞同：6
> 
> 时间：2012-04-05T15:52:03.867
> 
> 标签：ios, vfs

是否可以在 iOS 上实现 VFS 驱动程序，它可以将远程存储（如 Dropbox）挂载到本地文件系统？我认为普通的iOS设备是不允许的，但是越狱设备呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T12:18:25.203

iOS的[Dropbox API](https://www.dropbox.com/developers/core/sdks/ios)允许列出和使用 Dropbox 存储：. 经典的 unix 挂载是被禁止的。

# jquery-ui - jquery拖放 - 恢复当前

> ID：10031862
> 
> 赞同：1
> 
> 时间：2012-04-05T15:52:17.803
> 
> 标签：jquery-ui, drag-and-drop

我有一个用于库存的 jquery UI 拖放。它有效，但如果我的库存已经有 20 件物品（如果它已满），我希望它不会发生。

我不擅长 javascript/jquery，我不知道如何修复我的代码来做到这一点。如果库存已满，我希望它恢复到原来的位置。

这是我用来拖放的功能

```
function itemInSpot(drag_item,spot) {

    // this is my count. i don't want it to drop an item if it's 20 or more.
    var inv_count = parseInt(<? echo count($inv_item) ?>, 10);

    var oldSpotItem = $(spot).find('img');  
    oldSpotItem.appendTo('#inventory').draggable({ revert: 'invalid' });

    var item = $('<img />');
    drag_item.empty().remove(); 
    item.attr('src',drag_item.attr('src')).attr('title',drag_item.attr('title')).attr('id',drag_item.attr('id')).attr('class',drag_item.attr('class')).appendTo(spot).draggable({ revert: 'invalid' }); 

    } 
```

这是运行该函数的代码，在页面加载时设置：

```
$(document).ready(function() {
    $(".weapons,.shield").draggable({ stack: "div", revert: 'invalid'});
    $('#inventory').droppable();
    $("#weapon_spot").droppable({ accept: '.weapons'})
    $('#shield_spot').droppable({ accept: '.shield'});

    $('#weapon_spot,#shield_spot,#inventory').bind('drop', function(ev,ui) { itemInSpot(ui.draggable,this); });
    }); 
```

那么如何添加`if inv_count > 19 then revert item back to it's original position`in呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:19:51.290

这是一个基本的**[jsFiddle 示例](http://jsfiddle.net/j08691/DtbHe/)**，它有六个可拖动/可拖放的项目，在第三个项目被拖放到目标上后，会触发警报，并且在可拖放区域中不允许其他可拖动项目。如果尝试放置元素，则元素保留可拖动属性并恢复到其原始位置。

jQuery：

```
$(".ui-widget-content").draggable({
    revert: "invalid"
});
$("#droppable").droppable({
    drop: function(event, ui) {
        $(this).addClass("ui-state-highlight").find("p").html("Dropped!");
        $(ui.draggable).addClass('in');
        if ($('.in').length == 3) {
            $("#droppable").droppable("option", "accept", ".in");
            alert('Full!');
        }
    }
}); 
```

# fonts - True Type 字体。glyf 表的问题

> ID：10031864
> 
> 赞同：3
> 
> 时间：2012-04-05T15:52:25.387
> 
> 标签：fonts, truetype, opentype

我正在尝试学习如何阅读开放式字体文件。

问题是我在阅读某些表格时遇到问题。[我认为http://www.microsoft.com/typography/otspec/otff.htm](http://www.microsoft.com/typography/otspec/otff.htm)提供的信息就足够了

当试图阅读我在 simple glyph description 下找到的 glyf 表时 `flags[n]`，其中 n 是标志的数量。

问题是我不知道从哪里获得标志的数量，而且没有标志的数量读取表格似乎是不可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T20:15:59.623

好的，我找到了问题的答案，endPtsOfContours 具有坐标列表中每个轮廓的最后一个点的位置。

我使用 TTFDUMP 来找出答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-27T13:24:39.470

只是为了澄清如何计算标志的数量。标志的数量`n`, 是+ 1中的*最后一个*元素。`endPtsOfContours`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-02T09:22:16.057

虽然这是一个老问题，但我觉得我需要在这个主题中添加更多信息，因为上面的答案可能会产生错误的结果。

字形中的点数等于最后一个`endPtsOfContours`+ 1。通常这等于标志数`n`，但不一定。使用标志（*重复*标志）中的第 3 位表示同一标志重复多次。如果设置了此标志，则标志的数量可以低于点数。

事实是，在读取标志之前，您无法知道必须读取多少字节。您将不得不继续阅读标志，直到达到点数。这是一个小的 Javascript 片段，显示了如何实现读取标志。

```
var pointCount; // This has to the set to the last endPtsOfContours + 1 
var flags = []; // our internal array of flags
while (flags.length < pointCount) {  
    var flag = fontReader.readByte(); // flag is a single byte
    flags.push(flag); // add flag
    if (flag & 8) {  // if bit 3 is set
        var repeats = fontReader.readByte(); // next byte indicates repeats of the flag
        for (; repeats > 0; repeats--) {
            flags.push(flag); // add same flag again
        }
    }
} 
```

我无法告诉您是否或多久在现实世界的字体中使用*重复*标志（可能是上面评论中提到的两种字体 Bradley Hand ITC Regular 和 Rage Italic 使用它），但如果您想确保您阅读正确标志的数量，您将不得不考虑这一点。

# c++ - 无法在 C++ 应用程序中导入 dll

> ID：10031875
> 
> 赞同：0
> 
> 时间：2012-04-05T15:53:35.493
> 
> 标签：c++, visual-studio-2010, dll

我有一个名为`hecom32.dll`. 我想在我的应用程序中使用它。我如下：

```
#import "hecom32.dll" 
```

我收到以下错误：

```
enter Error 1   error C1083: Cannot open type library file: 'c:\users\dvargo\documents\visual studio 2010\projects\johnny\johnny\hecom32.dll': Error loading type library/DLL.  c:\users\dvargo\documents\visual studio 2010\projects\johnny\johnny\johnny.cpp  6   1   Johnny 
```

显然它不能添加它。但是，我不确定要确定它有什么问题。有什么方法可以分析文件，看看为什么它不能被导入。是否有不同的方式来使用 dll 中的函数？

我正在使用 Visual Studio 2010

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T16:02:15.530

只有当 hecom32.dll 实现 COM 服务器并将类型库作为资源嵌入时，这才能正常工作。您可以使用 File + Open + File 进行检查，选择 dll。您将看到列出的资源，如果您打开节点，应该有一个标记为“TYPELIB”且资源 ID 为 1 的资源。

肯定是丢失了，错误消息说明了很多。嵌入类型库是一种约定，不是必需的。也可以将其单独保存为 .tlb 文件。当然，它可能根本就不是 COM 服务器。您可以通过在 dll 上运行 Dumpbin.exe /exports 来查看。COM 服务器至少有一个名为“DllGetClassObject”的导出。

如果这些都没有成功，那么您最好联系 DLL 的所有者并寻求有关如何正确使用它的帮助。这通常需要一个包含导出函数声明的 .h 文件和一个 .lib 文件，以便您可以链接它。

# css - CSS3 过渡自下而上

> ID：10031876
> 
> 赞同：0
> 
> 时间：2012-04-05T15:53:42.373
> 
> 标签：css, css-transitions

卡在这里：http: [//jsfiddle.net/UFkg8/](http://jsfiddle.net/UFkg8/)

现在动画是自上而下的。我需要改变什么才能使其自下而上？

如果我将顶部更改为 100%；在 .mask 中它可以工作，但它也会使 div 的高度加倍并创建一个滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:09:14.170

我已经看到您不想修改`.post`，但为什么不添加`overflow:hidden;`呢？[这个 jsfiddle](http://jsfiddle.net/UFkg8/1/)对我有用（至少在 Chrome 中是这样）。

# linux - 如何使用 crond 而不是 atd？

> ID：10031881
> 
> 赞同：0
> 
> 时间：2012-04-05T15:54:02.990
> 
> 标签：linux, cron, busybox

我有一个嵌入式设备正在运行`busybox`。设备已`crond`安装并运行，但没有`atd`守护程序。我需要安排任务在给定时间运行（仅一次，而不是定期）。我知道，“犹太洁食”方式是使用`at`命令，但不幸的是我没有。那么，我该如何使用`cron`作为解决方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:10:31.627

您可以设置 cron 来运行您的脚本，当它成功时，脚本应该只是注释掉或删除 cron 条目。

# php - 在我的数据库中实现图片表的最佳方法

> ID：10031885
> 
> 赞同：1
> 
> 时间：2012-04-05T15:54:23.350
> 
> 标签：php, mysql

我有一个网站，里面有很多图片。目前我只是将图片全部放在服务器上，然后我使用 php 获取目录中的文件并将它们全部显示在一张表中。但是，当我这样做时，图片按字母顺序显示，这是我不想要的。我希望它们显示我的插入时间。我在想我可以创建一个表格，其中一个数字字段设置为自动递增，然后是插入图片的文件名。并将图片留在服务器上。所以每次我插入图片时，它都会插入一行带有数字和文件名的行。所以当我显示时，我只显示那个数字 Desc，它应该给我最新插入的图片。这是最好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:59:15.250

听起来不错。如果您真的想获得技术知识，可以使用时间戳字段并按此排序。但是，听起来只要您在插入图像时自动递增，您的想法就可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:05:52.503

如果您计划在系统中保存数千（或更多）照片，则需要在将实际图像文件存储在硬盘驱动器上时使用数据库表来存储元数据。

执行 10,000 次 I/O 命中来按日期对文件进行排序是很疯狂的。执行一个 SQL 查询以返回按日期排序的所有文件名的列表要好得多，因为 MySQL 可能能够将整个表放入内存中。

```
table image
{
    id
    user_id (if images belong to certain users)
    path (the file system path and/or filename)
    created (timestamp)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:57:36.780

你在正确的轨道上。我会使用时间戳（类型`DATETIME`）来确定图片上传的确切时间，并按此排序。递增的 ID 并不总是与插入时间相对应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T15:58:23.803

您可以通过 auto_incremented id 字段来执行此操作，或者您可以存储时间戳并以这种方式对其进行排序。任何一个都是不错的选择，只要确保您避免潜在的主键违规。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T16:00:09.477

随着`filemtime()`您获得文件的时间戳。因此，`uasort()`在您使用 (例如) 获取文件后，可以使用 - 或其他 php 排序函数之一来定义排序`readdir()`。不需要数据库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T16:00:13.440

将指向文件的指针存储在数据库中是最好的方法，并将图像保存在文件系统中。至于创建日期，您可以使用 `DATETIME`它来跟踪它的创建时间，然后按照您想要的顺序查询它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T16:01:44.593

我认为没有必要这样做。PHP 中必须有一种方法来获取所有文件列表并按创建日期排序。由于此文件将上传到您的服务器，因此 date_created 时间将是您服务器上创建的日期；因此，不需要新的表和数据库调用等。

# visual-studio-2010 - 我应该将与我在所有 Visual Studio 项目中使用的工具相关的程序集放在哪里？

> ID：10031893
> 
> 赞同：2
> 
> 时间：2012-04-05T15:54:46.610
> 
> 标签：visual-studio-2010, reference, organization, file-organization

当我在**Visual Studio 2010**中开发 Web 应用程序时，我使用**GhostDoc**、**SandCastle**、**AJAX Toolkit**、**Moq**等工具...

我通常在我**所有**的项目中使用这些工具。例如，当我下载**Moq**工具时，我有一个包含几个程序集的 zip 文件。因此，在解压缩文件后，我在我当前正在开发的项目的文件夹（在文件系统中）中**添加**了相关程序集，然后我从 Visual Studio 中**引用**了 dll。

现在的问题或更好的组织缺陷是2：

1）我将程序集放在**特定的项目文件夹**中。这很难看，因为我想将程序集放在所有项目共有的**一个文件夹中。**你通常把它们放在哪里？

2) 每次我开始一个新项目时，我都需要重新引用所有程序集。这一点，尤其是使用**Ajax Toolkit**时非常烦人。每次我创建一个新项目时，有没有办法告诉**Visual Studio**添加一组**预定义的程序集？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:57:30.130

对于流行的工具，您可以使用[NuGet](http://nuget.org)。它将帮助您管理工具的下载、更新和删除以及引用适当的程序集。

在您提到的那些中，我在官方 NuGet 包 repo 中找到了以下这些：

*   起订量
*   AjaxControl 工具包

# r - 与 R 中的 SAS 数据集通信

> ID：10031894
> 
> 赞同：8
> 
> 时间：2012-04-05T15:54:47.843
> 
> 标签：r, sas

我有一堆 SAS 格式的数据集。我想避免使用 SAS，因为我认为 R 为我提供了足够多的功能。因此，是否有一个包可以让我与 R 中的 SAS 数据集进行交互？我安装了 SAS 软件，但我想避免用多种语言编写代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-05T16:15:17.010

由于您拥有 SAS，因此您可以使用 Frank Harrell 的具有`sas.get`和`sasxport.get`功能的“Hmisc”包。它还有一堆实用功能：`label,sas.get`, `contents`, `describe`. 对于那些没有 SAS 许可证的人，包 'foreign' 有`read.ssd`、`lookup.xport`和`read.xport`.

EDIT1：我还要提到 Anthony Joseph Damico 最近宣布了一个将 SAS INPUT 代码解析为 read.fwf 代码的包。来自其描述文件：“使用为 SAS 用户设计的导入代码将 ASCII 文件读入 sas7bdat 文件，SAScii 包通过 (.sas) 语法文件的 INPUT 块进行解析，以设计 read.fwf() 函数所需的参数称呼。”

EDIT2：Matt Shotwell 还有一个名为“sas7bdat”的包`read.sas7bdat(file)`，将其功能描述为“以 sas7bdat 数据格式读取 SAS 文件”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-25T00:46:57.793

最近，have 包可以读写 sas7bdat 和 SAS xpt 文件[。](https://CRAN.R-project.org/package=haven)此包与[tidyverse](https://www.tidyverse.org/)中的其他导入/导出包一致。

还有一个名为[libr](https://CRAN.R-project.org/package=libr)`libname()`的包几乎完全模拟了 SAS函数。这个包是称为[sassy](https://r-sassy.org/)的包系统的一部分，它在 R 中重新创建了许多基本的 SAS 概念。

# jquery - 多个异步 Google 地图 onclick

> ID：10031895
> 
> 赞同：0
> 
> 时间：2012-04-05T15:54:49.393
> 
> 标签：jquery, google-maps-api-3

我正在尝试根据他们点击的链接加载不同的谷歌地图。像这样的东西：

首先，用户单击一个链接，例如...

```
<a class="loadMap" href="?map&center=44.370987,-85.407715">load map 1</a> 
```

...或者...

```
<a class="loadMap" href="?map&center=23.4567,-80.234523">load map 2</a> 
```

然后异步加载 Google Maps API（如果尚未加载）。地图中心取自点击链接的 href，然后地图显示在点击链接的正下方（在 jQuery 中类似于**$(this).after(showMap);**）

我找到[了异步加载单个地图的](http://gmaps-samples.googlecode.com/svn/trunk/dynamicloading/scriptappend.html)示例，但我不知道如何传递不同的地图参数以加载不同的地图并将其相对于单击的链接放置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:27:42.943

> *   **演示：** [https ://so.lucafilosofi.com/multiple-asynchronous-google-maps-onclick/](https://so.lucafilosofi.com/multiple-asynchronous-google-maps-onclick/)

```
 function initialize(map_id, lat, lng) {
            var myOptions = {
                zoom : 8,
                center : new google.maps.LatLng(lat, lng),
                mapTypeId : google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById(map_id), myOptions);
        }

        $(function() {
            $('.loadMap').click(function(e) {
                e.preventDefault();
                var cooordinates = this.hash.split('=')[1].split(',');
                var lat = cooordinates[0];
                var lng = cooordinates[1];
                var map = this.id + '-map';

                if($('#maps_canvas #' + map).length === 0) {
                    $('<div class="map_style" id="' + map + '">').appendTo('#maps_canvas');
                    initialize(map, lat, lng);
                }
            });
        }); 
```

> *   **注意：**完整代码见演示源

# mongodb - 什么时候使用mongodb的聚合框架？

> ID：10031896
> 
> 赞同：0
> 
> 时间：2012-04-05T15:54:49.853
> 
> 标签：mongodb, aggregation-framework

我研究过mongodb 2.1的聚合框架。我已经做了一个测试。

```
var drugstore = {
    id: 860011001238937,
    name: "store1",    
    transaction_flow: [
        {
        pepdate: 20120327,
        create_date: "2012-3-27 16:36:33",
        trace: "000256",
        peopleid: "123456",        
        tranamt: 1000,
       },
        {
        pepdate: 20120405,
        create_date: "2012-3-27 16:36:33",
        trace: "000256",
        peopleid: "123456",        
        tranamt: 1000,
       }
                ]
}; 
```

在我将 4 万条数据插入 transaction_flow 后，mongodb 崩溃了。而且我知道mongodb的文档的限制大小是16Mb，现在药店集合是22Mb。所以聚合命令，例如。unwind，为什么要设计这个命令，什么时候使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:19:35.863

MongoDB 命令的任何结果的最大大小限制为 64MB。有一个正在进行的[票证](https://jira.mongodb.org/browse/SERVER-3253)将添加一个类似于 map reduce 命令的输出选项，您可以在其中将结果转储到新集合中。

# apache - 您可以使用 htaccess 或在虚拟主机设置中禁用单个站点的 apache 日志吗？

> ID：10031898
> 
> 赞同：6
> 
> 时间：2012-04-05T15:55:09.557
> 
> 标签：apache, .htaccess, logging

我正在一个网站上工作，出于隐私原因，客户不希望在该网站上进行任何登录。该站点将托管在与许多其他网站相同的 Apache Web 服务器上，这就是为什么我可以在 Apache 中关闭登录。是否有某种方法可以使用 htaccess 规则或通过向 VirtualHost 设置添加某些内容来禁用单个站点的日志记录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T11:34:28.193

选项似乎是

1.  发送到 *nix 上的 /dev/null 或 Windows 上的 C:/nul（[见这里](http://www.apachelounge.com/viewtopic.php?t=3184)）
2.  删除基本日志记录指令并在每个虚拟主机中复制它们（因此默认情况下虚拟主机没有登录）

似乎应该有一些更好的方法来做到这一点，但这就是我发现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:57:16.047

是的，只需在您的虚拟主机的 httpd conf 中注释掉（使用“#”）ErrorLog 和 CustomLog 条目。

[http://www.mydigitallife.info/how-to-disable-and-turn-off-apache-httpd-access-and-error-log/](http://www.mydigitallife.info/how-to-disable-and-turn-off-apache-httpd-access-and-error-log/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T09:19:06.370

我通过使日志记录依赖于不存在的环境变量来实现这一点。所以在`VirtualHost`你可以有：

```
CustomLog /var/log/httpd/my_access_log combined env=DISABLED 
```

只要没有调用环境变量，`DISABLED`那么您就不会得到任何日志。

实际上，我来到这里是为了寻找一个更整洁的解决方案，但这无需更改全局`httpd.conf`.

编辑：删除引用`.htaccess`因为`CustomLog`仅适用于全局配置或@Basj 指出的虚拟主机配置

# visual-studio-2010 - 如果存在 .svn 文件夹，则加载 App_LocalResources 符号缓慢

> ID：10031899
> 
> 赞同：0
> 
> 时间：2012-04-05T15:55:17.467
> 
> 标签：visual-studio-2010, svn, web-applications, localization, debug-symbols

在我们通过将 .resx 文件添加到 App_LocalResources 将语言支持从 2 种语言增加到 8 种语言之后，按下 F5 和在 IE 中加载我们的 Web 应用程序之间的时间从大约 16 秒增加到大约 55 秒。

在此期间观察输出窗口，所有关于加载符号的行都迅速出现在“App_LocalResources”行中，然后它们只是涓涓细流。

经过两天的调查，它似乎与SVN密切相关。在提交新的 resx 文件之前，问题不会出现。如果我们将隐藏的“.svn”文件夹从“App_LocalResources”文件夹中移出，时间会下降到 18 秒。所以我怀疑 .svn 下的文件出于某种疯狂的原因使 Visual Studio 感到困惑。

我们已经尝试了其他人建议的所有解决缓慢加载符号的解决方案，例如删除断点、更改符号服务器和符号缓存设置、在构建后事件中调用 aspnet_compiler，但它们都没有效果。我们尝试的最新方法是告诉 VS 仅加载单个主 DLL 的调试符号，使用工具 > 选项 > 调试 > 符号 > 指定模块，但它似乎忽略了这一点并尝试为所有内容加载符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:51:27.113

如果真的只是因为 .svn 文件夹让调试器感到困惑，那么您可以将您的 SVN 客户端升级到 1.7+，它只在您的工作根目录中使用单个 .svn 文件夹。

[http://subversion.apache.org/docs/release-notes/1.7.html](http://subversion.apache.org/docs/release-notes/1.7.html)

# android - 在 Canvas.drawLine() 中使用常量

> ID：10031901
> 
> 赞同：0
> 
> 时间：2012-04-05T15:55:23.333
> 
> 标签：android

我有这个代码。只有第一个 drawLine 被绘制，其余 2 个不被绘制。谁能解释为什么其他两条拉线在本案中不起作用？如果我在 drawLine() 语句中将“因子”替换为“1/2”，它们就会起作用。谢谢

公共类 RenderView 扩展视图 {

```
Paint paint;
private float factor = 1/2;

public RenderView(Context context) {
    // TODO Auto-generated constructor stub
    super(context);
    paint = new Paint(Paint.ANTI_ALIAS_FLAG);
}

@Override
protected void onDraw(Canvas canvas) {

    int screenWidth = canvas.getWidth();
    int screenHeight = canvas.getHeight();

    paint.setColor(Color.RED);

    canvas.drawLine(0, 0, screenWidth, screenHeight, paint);

    canvas.drawLine(factor*screenWidth, 0, factor*screenWidth, screenHeight, paint);

    canvas.drawLine(0, factor*screenHeight, screenWidth, factor*screenHeight, paint);

    invalidate();       
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:57:57.483

1/2 为 0（整数除法）。尝试 1f/2 或仅 0.5f。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:58:55.170

我认为问题在于 1/2 是整数除法，因此 1/2 = 0。请尝试 0.5f。

# facebook - Facebook Graph API 不返回事件图片

> ID：10031905
> 
> 赞同：12
> 
> 时间：2012-04-05T15:55:37.427
> 
> 标签：facebook, api, facebook-graph-api

编辑：好像 Facebook 终于修复了这个错误！

* * *

你能帮我理解为什么会这样吗：

这是一个带有图片的公共活动： [https ://www.facebook.com/events/282054218538223](https://www.facebook.com/events/282054218538223)

但是当我尝试访问[http://graph.facebook.com/282054218538223/picture](http://graph.facebook.com/282054218538223/picture)时，我得到的只是一张默认图片。

* * *

这是另一个公共事件： http: [//www.facebook.com/events/266496120103339](http://www.facebook.com/events/266496120103339)

但这一次，访问[http://graph.facebook.com/266496120103339/picture](http://graph.facebook.com/266496120103339/picture)返回事件照片。

* * *

2个事件有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T15:20:12.047

这个答案没有解释*为什么*请求不能使用 Graph API，但可能会帮助需要检索事件配置文件图像的人。

使用 FQL，您可以像这样检索事件配置文件图像：

选择 pic, pic_small, pic_big FROM event WHERE eid=282054218538223

使用 Robin 的第一个示例中的事件 id。此调用以 3 种不同大小返回事件配置文件图像的 url。它适用于 Robin 问题中的两个示例，只需更改事件 ID。

用 Robin 的例子在[Graph Explorer](https://developers.facebook.com/tools/explorer)中试试：

```
https://graph.facebook.com/fql?q=SELECT pic,pic_big,pic_small FROM event WHERE eid=282054218538223 
```

和 MoXplod 的例子：

```
https://graph.facebook.com/fql?q=SELECT pic,pic_big,pic_small FROM event WHERE eid=271148229633674 
```

[如果需要，请确保您拥有FQL 事件表](https://developers.facebook.com/docs/reference/fql/event/)中所述的访问令牌。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T15:52:56.793

有同样的问题。它似乎确实是 Facebook Graph API 的一个错误。

[我目前在Facebook 开发人员错误](https://developers.facebook.com/bugs)页面上至少统计了三个单独的打开错误报告，这些报告描述并重现了问题（您可能需要登录 FB 才能访问信息）：

[无法通过 Graph API 检索新创建事件的图片](https://developers.facebook.com/bugs/318569924873280)

[某些事件封面无法通过 Graph API 获得](https://developers.facebook.com/bugs/334421566619692)

[事件图片无法通过 API 访问](https://developers.facebook.com/bugs/262648820496801)

首先，订阅所有三个（重复的）错误报告可能是个好主意。

# xml - 当我从浏览器运行我的 WCF REST 方法时，我收到 一个：在浏览器中返回 WCF REST 服务时的 xml 元素前面？任何人都见过这个并知道它为什么会发生？我期待格式化的元素 < 问问题 问问题 2012-04-05T15:55:38.420 166 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 当我从浏览器运行我的 WCF REST 方法时，我收到 一个：在浏览器中返回 WCF REST 服务时的 xml 元素前面？任何人都见过这个并知道它为什么会发生？我期待格式化的元素 <getproductnamelistresponse xmlns="TheBigContract"><getproductnamelistresult xmlns:i="http://www.w3.org/2001/XMLSchemaintance" xmlns:a="http://schemas.datacontract.org/2004/07/ProductDTO"><a:product><a:truckid>0</a:truckid> <a:truckname>BBQ Smith</a:truckname> <a:website>test</a:website></a:product> <a:product><a:truckid>0</a:truckid> <a:truckname>Bon Me</a:truckname> <a:website>test</a:website></a:product> 那仍然是有效的 XML。您的内部元素是在http://schemas.datacontract.org/2004/07/ProductDTO名称空间中定义的，这就是有效 XML 如何使用同一 XML 文档中多个名称空间中的元素的方式。你看到xmlns:a=...了GetProductNameListResult吗？这定义了该名称空间的前缀（别名）。只有来自单个名称空间的元素可以没有前缀（称为默认名称空间）。 编辑：名称空间定义容器，其中元素和属性名称必须是唯一的。但是，如果它们来自不同的名称空间，您可以在同一个 XML 文档中拥有多个具有相同名称的元素类型。它与 .NET 名称空间的概念类似。 xmlwcfweb-servicesrest 4 1 回答 1 This answer is useful 0 那仍然是有效的 XML。您的内部元素是在http://schemas.datacontract.org/2004/07/ProductDTO名称空间中定义的，这就是有效 XML 如何使用同一 XML 文档中多个名称空间中的元素的方式。你看到xmlns:a=...了GetProductNameListResult吗？这定义了该名称空间的前缀（别名）。只有来自单个名称空间的元素可以没有前缀（称为默认名称空间）。 编辑：名称空间定义容器，其中元素和属性名称必须是唯一的。但是，如果它们来自不同的名称空间，您可以在同一个 XML 文档中拥有多个具有相同名称的元素类型。它与 .NET 名称空间的概念类似。 于 2012-04-05T15:59:56.090 回答 Related 1 python - OpenGL utf-8 字符串渲染 1 r - 使用循环计算子集 2 perl - 计算器不考虑运算的优先级 3 perl - Perl 模块找出一个词是否是动词/名词/形容词/冠词/介词 1 android - 如何将图像保存到从图库中选择的 sqlite 数据库或从相机捕获到 sqlite 数据库 1 asp.net-mvc - 为什么没有 @Html.RouteAction(routeName: "MyRouteName") 助手？ 3 css - 制作皇家滑块全屏 2 debugging - vb6如何在msgbox中进入调试模式 3 java - 如何使用 jUnit 对 Servlet 过滤器进行单元测试？ 1 javascript - 无法在最新（稳定的 12 和 beta v. 1497）歌剧中的 userjs（注入脚本）中执行跨域 xmlhttprequest，这是一个错误吗？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</getproductnamelistresult></getproductnamelistresponse>

> ID：10031906
> 
> 赞同：0
> 
> 时间：
> 
> 标签：xml, wcf, web-services, rest

当我从浏览器运行我的 WCF REST 方法时，我收到 **一个：**在浏览器中返回 WCF REST 服务时的 xml 元素前面？任何人都见过这个并知道它为什么会发生？我期待格式化的元素

```
<?xml version="1.0"?>
<GetProductNameListResponse xmlns="TheBigContract">
<GetProductNameListResult xmlns:i="http://www.w3.org/2001/XMLSchemaintance" xmlns:a="http://schemas.datacontract.org/2004/07/ProductDTO">

<a:Product>
<a:Company i:nil="true"/>
<a:DayOfWeek i:nil="true"/>
<a:Location i:nil="true"/>
<a:TimeOfDay i:nil="true"/>
<a:TruckID>0</a:TruckID>
<a:TruckName>BBQ Smith</a:TruckName>
<a:Website>test</a:Website>
</a:Product>

<a:Product>
<a:Company i:nil="true"/>
<a:DayOfWeek i:nil="true"/>
<a:Location i:nil="true"/>
<a:TimeOfDay i:nil="true"/>
<a:TruckID>0</a:TruckID>
<a:TruckName>Bon Me</a:TruckName>
<a:Website>test</a:Website>
</a:Product> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:59:56.090

那仍然是有效的 XML。您的内部元素是在`http://schemas.datacontract.org/2004/07/ProductDTO`名称空间中定义的，这就是有效 XML 如何使用同一 XML 文档中多个名称空间中的元素的方式。你看到`xmlns:a=...`了`GetProductNameListResult`吗？这定义了该名称空间的前缀（别名）。只有来自单个名称空间的元素可以没有前缀（称为默认名称空间）。

编辑：名称空间定义容器，其中元素和属性名称必须是唯一的。但是，如果它们来自不同的名称空间，您可以在同一个 XML 文档中拥有多个具有相同名称的元素类型。它与 .NET 名称空间的概念类似。

# ios - iOS 的辅助触控功能是否有 API？

> ID：10031907
> 
> 赞同：7
> 
> 时间：2012-04-05T15:55:55.680
> 
> 标签：ios, accessibility, gestures

iOS SDK 是否提供框架或 API 供我们使用他们的自定义手势创建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-28T07:32:07.803

没有用于访问现有辅助触摸功能（必须由用户在设置中打开）或创建类似 UI 的公共 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T07:36:18.630

[不可以。您可以在此处](https://developer.apple.com/accessibility/ios/)找到存在 API 的辅助功能列表。辅助触摸不是其中之一。

# programming-languages - 数据检索 - 数据库 VS 编程语言

> ID：10031910
> 
> 赞同：2
> 
> 时间：2012-04-05T15:56:17.887
> 
> 标签：programming-languages, rdbms

我最近一直在使用数据库，在此之前我正在开发不使用数据库的独立组件。在所有数据库工作中，我有一些问题浮出水面。为什么数据库查询比从文件中检索数据的编程语言更快。

为了进一步阐述我的问题 -

假设我有一个名为 Employee 的表，其中包含 Name、ID、DOB、Email 和 Sex 字段。为简单起见，我们还将假设它们都是固定长度的字符串，并且它们没有任何索引或主键或任何其他约束。

假设我们在表中有 100 万行数据。在一天结束时，该表将存储在磁盘上的某个位置。当我编写查询 Select Name,ID from Employee where DOB="12/12/1985" 时，DBMS 从文件中提取数据，处理它，过滤它并给我一个结果，它是 100 万的一个子集行数据。

现在，假设我将相同的 100 万行存储在一个平面文件中，为简单起见，每个字段同样是固定长度的字符串。数据在磁盘中的文件中可用。当我用 C++ 或 C 或 C# 或 Java 编写程序并执行查找 DOB="12/12/1985" 的名称和 ID 的相同任务时，我将逐条读取文件记录并检查每一行数据如果 DOB="12/12/1985"，如果匹配，那么我存储该行给用户。

与 SQL 查询返回结果的速度相比，程序执行此操作的速度太慢了。

我假设 DBMS 也是用某种编程语言编写的，并且还有解析查询的额外开销等等。

那么，在 DBMS 中发生了什么使得检索数据比通过编程语言更快呢？

如果这个问题在这个论坛上不合适，请删除，但请给我一些可以找到答案的指示。

如果有任何帮助，我会使用 SQL Server。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T16:00:19.040

> 为什么数据库查询比从文件中检索数据的编程语言更快

这取决于很多因素——网络延迟和磁盘寻道速度是其中两个重要因素。有时从文件中读取会*更快。*

在您对在一百万行中*查找*一行的描述中，数据库通常比在文件中查找要快，因为它采用了对数据的*索引*。

如果您预处理数据文件并为不同字段提供索引文件，您也可以加快从文件系统查找数据的速度。

注意：数据库通常不用于此功能，而是因为它们符合 ACID，因此适合在您有多个进程（通常在许多计算机上的多个客户端）同时查询数据库的环境中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T17:52:27.357

有很多技术可以加速各种访问。正如@Oded 所说，索引是您特定示例的重要解决方案：如果数据库已设置为按日期维护索引，则它可以直接转到该日期的条目，而不是通读整个文件。（请注意，维护索引确实会占用空间和时间——它不是免费的！）

另一方面，如果*没有*建立这样的索引，并且数据库没有按日期顺序存储，那么按日期查询将需要遍历整个数据库，就像您的平面文件程序一样。

当然，您可以编写自己的程序来维护和使用文件的日期索引，这将像数据库一样加快日期查询。而且，您可能会发现您想要添加其他索引，以加快其他类型的查询 - 或者删除一个索引，结果证明使用的资源超出其价值。

最终，管理您添加到文件管理器中的所有功能可能会成为一项复杂的任务。您可能希望将这种配置存储在其自己的文件中，而不是将其硬编码到您的程序中。至少，您需要一些功能来确保更改配置不会损坏您的文件...

换句话说，您将编写自己的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T15:17:34.450

......一个旧的，我知道......只是为了如果有人发现这个：问题包含“假设......没有任何索引”

...所以问题是关于数据库和没有索引的平面文件之间的顺序数据读取斗争，数据库获胜......

答案是：如果你从磁盘上逐条读取，你会做大量的磁盘查找，这在性能方面是昂贵的。数据库总是按概念加载页面 - 因此一次同时加载几条记录。更少的磁盘查找肯定会更快。如果您要从平面文件中进行内存缓冲读取，您可以获得相同或更好的读取值。

# c++ - Google Protocol Buffers，在提供的流对象中向后重新定位 IO 头

> ID：10031911
> 
> 赞同：0
> 
> 时间：2012-04-05T15:56:20.020
> 
> 标签：c++, serialization, protocol-buffers, file-format

我想将 IO 头移动到某个 CodedOutputStream 或 ZeroCopyOutputStream 的开头，以便我可以使用文件中有多少 protobuf 消息以及以下消息消耗多少字节来更新标头数据结构。

[备份功能](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.io.zero_copy_stream_impl#FileOutputStream.BackUp.details)不适用于此，有什么建议吗？我正在为事件数据创建文件格式，其中每个文件包含多个事件数据集。为此，我需要 2 种类型的标题实体（固定大小），一种是全局的，另一种是每个数据集的。我在写入数据集事件后更新这些。那么，如何在不破坏流对象内部状态的情况下移动写入标头？

**编辑**

我想知道，如果我刷新流包装器并仅使用 c 函数来重新安装头部，这是否适用于流类，或者我最终会进入未定义的土地？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:19:06.477

I guess the most obvious way would be to have two files instead of each one: The main file with the streamed data, and then an index file with the header information.

# c# - 来自 sql 连接的 LINQ

> ID：10031917
> 
> 赞同：0
> 
> 时间：2012-04-05T15:56:37.103
> 
> 标签：c#, linq, linq-to-sql

我试图了解如何在 LINQ 中重写连接查询。

```
SELECT cs.qid,cs.qk FROM location_table pl
JOIN (SELECT qid,qk FROM q_table WHERE att5 = 'process') cs ON pl.qck = cs.qk
WHERE pl.location = 'there' 
```

这是我开始使用的 LINQ，但它返回的结果与上述 SQL 不同

```
from pl in location_table
from cs in q_table
where s. att5 == 'process'
&& cs.qk == pl.qck
&& pl. location == 'there' 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T16:00:48.097

您需要使用`join`关键字

```
from pl in location_table
join cs in q_table
    on cs.qk equals pl.qck
where cs.att5 == ‘process’ && pl. location == ‘there’
select new{cs.qid, cs.qk} 
```

如果您想将其重写为`EXISTS`因为只需要 q_table 的输出：

```
SELECT qid,qk 
FROM q_table AS cs
WHERE EXISTS
    (
        SELECT 1 
        FROM location_table pl
        WHERE pl.qck = cs.qk AND pl.location = 'there'
    )
    AND cs.att5 == 'process' 
```

你会这样做：

```
from cs in q_table
where location_table.All(pl=>pl.qck == cs.qk && pl.location == 'there')
    && cs.att5 == 'process'
select new{cs.qid, cs.qk} 
```

他们都应该得到相同的结果。我将把性能检查留给你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:29:45.260

您是否尝试过使用显式连接？

```
from pl in location_table
join cs in q_table on cs.qk equals pl.qck
where s. att5 == 'process'
&& pl. location == 'there' 
```

# php - 在 php 函数中包装一个 mysql 查询并打印结果

> ID：10031919
> 
> 赞同：0
> 
> 时间：2012-04-05T15:56:51.323
> 
> 标签：php, mysql, html

我在数据库上运行以下查询以删除一些数据：

```
delete subscriber, subscription from subscriber,subscription where subscription.status = 0 and subscription.snid=subscriber.snid; 
```

但是我现在需要创建一个 php 函数，当我按下一个名为`clean`

然后打印出所有`subscriber`被删除的数据。

不太确定从哪里开始。

到目前为止，这是我的 html：

```
<form id="form1" name="form1" method="post" action="">
Clean subscribers: 
<input type="submit" name="clean" id="clean" value="Clean" />
</form> 
```

非常感谢您对此的任何帮助或建议。

C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:59:16.887

您需要该按钮将表单提交到处理程序页面，然后处理程序页面将运行查询，并收集+打印数据。

如果您不想刷新页面（或让您的用户转移到另一个页面），您将希望使用 Ajax。

这就是你开始的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T16:00:59.663

首先，您需要选择要删除的数据。

然后您需要删除它并返回选定的行。

```
$rows = array();
mysql_connect(...);
$res = mysql_query(...select query here...);
while($row=mysql_fetch_assoc($res)) {
    $rows[] = $row;
}
$res = mysql_query(...delete query here...);
return $rows; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T16:01:52.003

您可能不想完全删除订阅者。如果我是你，我会包含一个名为“已删除”的字段或类似的内容，指示订阅者是否已被删除。然后根据该字段的真假进行查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T16:05:12.627

显然你不努力！但无论如何我都会回答你。

```
<?php
$con = mysql_connect("serverUrl","login","password");
mysql_select_db("dbName", $con);

$result = mysql_query("SELECT * FROM subscriber, subscription where subscription.status = 0 and subscription.snid=subscriber.snid;");

while($row = mysql_fetch_array($result))
  {
  echo $row['subscriber.name']; //assuming you have a field {name} in your table
  echo "<br />";
  }
mysql_query("delete subscriber, subscription from subscriber,subscription where subscription.status = 0 and subscription.snid=subscriber.snid;");
?> 
```

# r - R地图绘制经度和 纬度点

> ID：10031921
> 
> 赞同：4
> 
> 时间：2012-04-05T15:57:04.720
> 
> 标签：r, maps, latitude-longitude

我有一张美国地图和一张我想绘制的长纬度列表。一旦我得到这个工作，我也想切换到“世界”地图。地图已生成，但地图上未显示任何点。TSV 文件的第一行包含此标头：

```
长{tab}纬度
```

R 似乎正在“流量”表中读取。我究竟做错了什么？

```
图书馆（“地图”）

流量 = read.table("C:/temp/traffic_10.40.tsv", header=T, sep="\t")
png(filename="C:/temp/usa.png", width=850, height=600, bg="white")
地图（“状态”，绘图 = TRUE，填充 = FALSE，col = 调色板（））
标题（“目的地”）
点（x=traffic$LONG,y=traffic$LAT,col='red',cex=0.75）
dev.off()

```

**编辑**

```
> 输入（流量）
结构（列表（长 = c（47.6218、32.7942、34.1121、40.0068、47.6218、
33.9553、33.7629、40.0068、39.05、38.1075、33.7629、32.769、37.3857、
29.4576、34.1674、38.8147、32.7942、31.1429、40.3254、30.3059、
38.2248、47.6218、33.9553、38.1075、27.1943、29.4576、30.5175、
38.5668、42.6657、40.2982、32.7539、40.6698、47.6742、32.7942、
47.6218, 35.8219), LAT = c(-122.35, -96.7653, -118.411, -75.1347,
-122.35，-83.3937，-84.4226，-75.1347，-77.4833，-122.264，-84.4226，
-96.5998、-122.026、-98.5054、-84.8014、-77.0647、-96.7653、-81.471、
-78.9195、-97.7505、-85.7412、-122.35、-83.3937、-122.264、-80.2432、
-98.5054、-97.6721、-121.467、-73.799、-111.698、-97.3363、-73.9438、
-122.115, -96.7653, -122.35, -78.6588)), .Names = c("LONG", "LAT"
), class = "data.frame", row.names = c(NA, -36L))

```

另外，我是一个 R 新手，并尝试在谷歌上找到这个，但成功有限，因为我不确定要准确搜索什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T21:14:19.463

问题出在您的数据集中，而不是您以后的代码中。

第一个点有一个坐标`47.6218`和另一个`-122.35`。 [纬度](http://en.wikipedia.org/wiki/Latitude)不能超出范围`[-90,90]`度，因此[经度](http://en.wikipedia.org/wiki/Longitude)必须是`-122.35`和纬度`47.6218`，与您的数据集相反。 [这是西雅图太空针的稍北](http://maps.google.com/maps?ll=47.6218,-122.35&z=19)

`x`（水平）传统上是经度或东经；`y`（垂直）传统上是纬度或北纬

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T16:11:44.933

一种选择是为此使用[googleVis](http://cran.r-project.org/web/packages/googleVis/index.html)。您可以绘制出您的点 Google-Maps 样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T17:15:23.013

固定的。我交换了 $LAT 和 $LONG。现在它完美地工作了。

```
点（x=traffic$LAT,y=traffic$LONG,col='red',cex=0.75）

```

# iis - 通过局域网访问其他计算机上的 IIS 托管站点

> ID：10031926
> 
> 赞同：0
> 
> 时间：2012-04-05T15:57:25.703
> 
> 标签：iis, localhost

我的 IIS 上托管了一个网站，我想从连接到同一局域网的其他设备访问它。虽然我可以通过这样做访问我的本地主机（IIS 中的默认网站）：

```
http://10.0.1.6/ 
```

哪里，那是我的内部IP。这总是有效的，即使在 iPad 和 iPod 上也是如此。

到目前为止，这对所有情况都有效。现在，我有一个通过绑定托管在 IIS 中的网站，`mysite.local`并且我编辑了我的主机文件，因此对它的请求将转到 IIS。

问题是我不知道如何在我的其他设备上访问它了。

这样做`http://10.0.1.6/mysite.local`给了我一个错误，这是可以理解的。该网站与子域密切合作，因此我将不得不通过类似`one.mysite.local`或之类的方式访问它`two.mysite.local`。

那么如何使用其他设备访问此站点？请问有什么想法吗？

谢谢

我不知道我还需要提供什么来提供答案，如果您需要任何东西，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:05:00.500

将 clientX 上的主机文件更新为“mysite.local”-> 10.0.1.6 - 假设您正在测试的客户端是 PC/Mac。如果客户端是其他东西 - iPad 等，您可能需要为您的网络设置本地 DNS 服务器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-28T02:13:01.907

将两个绑定添加到您的网站，一个用于本地访问，另一个用于 LAN 访问，如下所示：

打开 IIS 并从左侧面板中选择您的本地网站（您希望从本地网络访问的网站）：

> 连接 > 服务器（用户 PC）> 站点 > 本地站点

**在Actions**选项卡下的右侧面板上打开**Bindings**添加这些绑定：

 **1.  当地的：

    > ```
    > Type: http
    > Ip Address: All Unassigned
    > Port: 80
    > Host name: samplesite.local 
    > ```

2.  局域网：

    > ```
    > Type: http
    > Ip Address: <Network address of the hosting machine ex. 192.168.0.10>
    > Port: 80
    > Host name: <Leave it blank> 
    > ```

瞧，您应该可以通过使用主机的 LAN IP 地址（上例中为 192.168.0.10）作为站点 url 从本地网络上的任何计算机访问该网站。

**笔记：**

如果您想使用主机名（如 samplesite.local）而不是 IP 地址从 LAN 访问网站，请将主机名添加到本地网络机器上的 hosts 文件中（主机文件可以在**“C:\ Windows\System32\drivers\etc\hosts”**，或者ubuntu 中的**“/etc/hosts” ）：**

> 192.168.0.10 samplesite.local**

# c# - 在 Windows8 中编写 C#/XAML 与 C++/XAML WinRT 应用程序的优缺点是什么？

> ID：10031929
> 
> 赞同：34
> 
> 时间：2012-04-05T15:57:35.273
> 
> 标签：c#, c++, xaml, windows-8, microsoft-metro

我想沿着将 WPF/Silverlight 组件移植到 Windows 8 的路线。对于一些上下文，该组件是一个[实时 WPF Chart](http://www.scichart.com)，它使用 WPF/XAML 和位图渲染的混合来实现高表现。

我希望该组件与 Metro 兼容，例如用于 Metro 模式和桌面模式。我阅读了很多关于在 Windows 8 中创建[C++/WinRT](http://www.codeproject.com/Articles/262151/Visual-Cplusplus-and-WinRT-Metro-Some-fundamentals)应用程序以及[C#/XAML](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/br229571.aspx)应用程序的内容，但是这两个框架之间有什么区别？

如果您选择 C#/XAML 而不是 C++/XAML，是否有限制？还要考虑从 .NET4.0 中的 C#/Xaml 移植到 Windows8 会容易得多，如果我可以坚持使用 C#/XAML，但是我能否使用这种方法创建功能齐全的 Metro 组件？

您的意见/建议表示赞赏。

**编辑：**

如果您投票关闭此线程，请发表评论原因。这是一个有效的问题，有 +6 票，四个答案和一个最爱。把它留给我似乎是合理的！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-05T20:26:50.303

我将差异视为设计选择，而不是个人对语言的偏好。偏好与 VB 与 C# 更相关。通常，在您选择 C++ 或 .NET 的任何应用程序中，您会得到相同的差异。

C++ 将为您提供更快的启动时间。IIRC，.NET 4.5 具有自动 NGENing 功能（不确定它与 Metro 应用程序的关系），因此这可能有助于缓解 .NET 应用程序典型的缓慢启动时间。

C++ 将降低一般内存使用量，因为它不使用垃圾收集器。这在平板电脑等资源受限的设备上变得越来越重要。IIRC，.NET 4.5 对 GC 暂停有更多的缓解（这可能导致 UI 崩溃），它们仍然是托管代码的现实。

由于 .NET 和 C++ 使用相同的 WinRT 框架，因此与 XAML/WinRT 平台交互可能不会有太大差异（通过 C++ 与 WinRT 对象交互在技术上更快，但影响非常小），但当然你的用户使用 C++ 编写的代码通常比使用 .NET 更快。

C++ 通常更难逆向工程，即使与模糊的 .NET 代码相比也是如此。尽管狡猾的小偷无论如何都可以窃取您的IP。

由于 .NET 最初是为了方便开发人员和开发人员的生产力而创建的，因此您在构建应用程序时将拥有更多方便的选择（例如，基于反射的工具，如 DI/IoC）。

通过 .NET 迭代应用程序代码可能更容易，因为 .NET 的编译速度比 C++ 快，但正确创建的 C++ 项目可以大大缓解这种情况。

纯 .NET 项目可以支持“任何 CPU”，这意味着您的应用程序可以在所有受支持的 WinRT 平台上运行。您只需重新编译 C++ 项目即可支持 ARM、x86/64。如果您的 .NET 应用程序依赖于自定义 C++ 组件，则必须针对每个体系结构进行编译。

因为 WinRT 是从头开始创建以支持多种语言的，所以我对不熟悉 C++ 的开发人员的建议是坚持使用 .NET，但探索受益于 C++ 的领域。Microsoft 在 /CX 预测方面做得很好，大多数 C# 开发人员应该能够找到自己的方法。我对 C++ 开发人员的建议是坚持使用 C++ 并获得 C++ 的所有好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T16:27:46.127

从*XAML*的角度来看，它成为一种语言选择。无论您在此处选择哪种代码语言，XAML UI 堆栈都是相同的。根据您的应用程序目标，如果您需要 C++ 为您提供的优势，使用 C++ 可能更有意义。

我们现在还可以在 Win8 中混合 DirectX 和 XAML，这通常意味着 C++——但是对于像 SharpDX 这样的项目仍然不完全有效（是的，我意识到你将在 DirectX 中为包装托管代码付出性能损失...我只是指出可以做到）。

您的问题似乎是关于创建可在桌面和 Metro 中使用的可重用组件。这可能有点挑战性，具体取决于您如何构建它，因为需要对如何从文件位置加载资源（即，generic.xaml）而不是从嵌入式资源进行一些更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T16:29:22.433

我能想到的使用 C++/XAML 的唯一优势是速度是否对您的项目很重要。C#/XAML 的优点是更容易编码，特别是如果您的项目已经在 C# 中。

到目前为止，还没有办法在 Windows 8 中制作同时针对 Metro 和桌面的应用程序。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T16:36:05.853

好吧，其他人可能知道更多，但基于[微软对我在 WinRT 发布时间提出的问题的回答](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/639b8eb3-ae78-4ca5-a5ad-329366f1816b "WinRT 是一种协议和一组原生 API，允许每种语言保持其现有执行环境的真实性 - 用于 JavaScript 的 Chakra、用于 C# 的 CLR 和用于 C++ 的 CRT/原始本机代码。")：

> WinRT 是一种协议和一组原生 API，允许每种语言保持其现有执行环境的真实性 - 用于 JavaScript 的 Chakra、用于 C# 的 CLR 和用于 C++ 的 CRT/原始本机代码。

这*表明*我们目前使用 CLR 与本机代码访问本质上是本机代码 API (WinRT) 的体验类似的性能权衡。但我期待看到对此进行一些实证调查，以了解 WinRT 的不同之处。

# c# - 如何在 C# 中绘制抛物线？

> ID：10031931
> 
> 赞同：0
> 
> 时间：2012-04-05T15:57:52.923
> 
> 标签：c#, graphics

我正在做一个数值分析项目，我想在表格上绘制图形和抛物线。只是我想画一条抛物线`x² - 2x - 1`。那么，我该怎么做呢？

示例代码：

```
g = this.CreateGraphics();
p = new Pen(Brushes.WhiteSmoke,1);
s = new SolidBrush(Color.Blue);

g.DrawString("x", this.Font, s, x1, y0 + 10);
g.DrawString("y", this.Font, s, x0 - 5, y2 - 20);
g.DrawRectangle(p, 400, 100, 300, 300);

for (int i = 0; i < 300; i += 30)
{
    line(400, 100 + i, 700, 100 + i);
}

public void line(int x, int y, int x1, int y1)
{
    g = this.CreateGraphics();
    p = new Pen(Brushes.Gray, 1);
    g.DrawLine(p, x, y, x1, y1);
    g.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T16:12:05.103

我建议您使用 System.Windows.Forms.DataVisualization.Charting 库。它的文档在这里：

[http://msdn.microsoft.com/en-us/library/dd489065.aspx](http://msdn.microsoft.com/en-us/library/dd489065.aspx)

我第一次尝试使用这个库时让我感到困惑的是：这个库有*两个*版本实际上是相同的。其中之一旨在*在后端服务器上*生成图表。也就是说，您进入一个网页并说“我想要一个过去十年该股票价格的自定义图表”，该工具会在服务器上为您生成一个图表并向您发送它的位图。还有另一个版本旨在*在交互式客户端应用程序*中生成图表。显然，您想要第二个。很容易意外地阅读服务器端的文档，这可能会造成混淆，所以要小心。

另请注意，此图表控件*内置于*.NET 4 中，并且是早期版本的*单独下载*。如果您使用的是旧版本的 Visual Studio，则可能需要下载该控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T18:01:28.523

如果您希望能够插入抛物线公式，您将需要一个数学解析器。

我个人使用过 muParser，我发现它使用起来非常简单。 [http://www.codeproject.com/Articles/18384/Parsing-Mathematical-Expressions-with-muParser](http://www.codeproject.com/Articles/18384/Parsing-Mathematical-Expressions-with-muParser) 为例。

我想还有很多其他人，但我不认识他们。

现在......谈论图表......我使用MS Charts。这里： http: [//archive.msdn.microsoft.com/mschart](http://archive.msdn.microsoft.com/mschart)

从 .NET Framework 4 开始，图表控件是 .NET Framework 的一部分。所以你已经拥有了！样品非常非常好。我真的建议下载它们。

现在两者之间的联系： - 在一个循环中，只需在不同点通过 muParser 评估您的函数。- 绘制你的观点。

# iphone - 在旋转时重绘 UITableViewCells

> ID：10031935
> 
> 赞同：2
> 
> 时间：2012-04-05T15:58:06.670
> 
> 标签：iphone, ios, objective-c, uitableview, autorotate

我有 custom`UITableViewCell`以及页眉和页脚。`UITextField`它们中的每一个在排列的列中都有s。这些列的位置是根据`UITableView`. （即这样它在横向打开时会利用更宽的屏幕）。

我遇到的问题是当我在视图控制器加载后旋转视图时。`UITableViewCell`s 仍然使用旧的定位。

搜索完之后，我现在已经`didRotateFromInterfaceOrientation:`在这个方法中实现并重新加载了数据。

现在已经对页眉和页脚进行了排序。但是，`UITableViewCell`s 仍然是预先旋转的格式。有没有办法强制表格完全重绘其所有内容？

编辑：我的`tableView:cellForIndexPath:`代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CustomCell";
    UITextField *TextField1, *TextField2, *TextField3, *TextField4, *TextField5;
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    float width = (self.tableView.frame.size.width - 68);

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

            TextField1 = [[UITextField alloc] initWithFrame:CGRectMake(((width*position1)+10.0), 10.0, (width*width1), 31.0)];
            TextField1.tag = 1;

            TextField2 = [[UITextField alloc] initWithFrame:CGRectMake((width*position2), 10.0, (width*width2), 31.0)];
            TextField2.tag = 2;

            TextField3 = [[UITextField alloc] initWithFrame:CGRectMake((width*position3), 10.0, (width*width3), 31.0)];
            TextField3.tag = 3;

                TextField4 = [[UITextField alloc] initWithFrame:CGRectMake((width*position4), 10.0, (width*width4), 31.0)];
            TextField4.tag = 4;

            TextField5 = [[UITextField alloc] initWithFrame:CGRectMake((width*position5), 10.0, ((width*width5)-40.0-editingWidth), 31.0)];
            TextField5.tag = 5;

            cell.accessoryType = UITableViewCellAccessoryNone;

            [cell.contentView addSubview:TextField1];
            [cell.contentView addSubview:TextField2];
            [cell.contentView addSubview:TextField3];
            [cell.contentView addSubview:TextField4];
            [cell.contentView addSubview:TextField5];

            [TextField1 release];
            [TextField2 release];
            [TextField3 release];
            [TextField4 release];
            [TextField5 release];

        } else {

            TextField1 = (UITextField *)[cell.contentView viewWithTag:1];
            TextField2 = (UITextField *)[cell.contentView viewWithTag:2];
            TextField3 = (UITextField *)[cell.contentView viewWithTag:3];
            TextField4 = (UITextField *)[cell.contentView viewWithTag:4];
            TextField5 = (UITextField *)[cell.contentView viewWithTag:5];

        }

    // Configure the cell...

    // Clear cell contents
    TextField1.text = @"";
    TextField2.text = @"";
    TextField3.text = @"";
    TextField4.text = @"";
    TextField5.text = @"";

    int sectionCount = 0;
    sectionCount = [workoutSectionsMutableArray count];

    // Repopulate cells

    NSMutableArray *cellDataArray = [self retrieveCellDataAtIndexPath:indexPath];

    TextField1.text = [[cellDataArray objectAtIndex:indexPath.row] 1];
    TextField2.text = [[cellDataArray objectAtIndex:indexPath.row] 2];
    TextField3.text = [[cellDataArray objectAtIndex:indexPath.row] 3];
    TextField4.text = [[cellDataArray objectAtIndex:indexPath.row] 4];
    TextField5.text = [[cellDataArray objectAtIndex:indexPath.row] 5];

    }

    return cell;

} 
```

我的`didRotateFromInterfaceOrientation:`方法：

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation) fromInterfaceOrientation {

    [self.tableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:44:09.263

当您在表视图上调用 reload 时，将在您的数据源上调用 tableView:cellForRowAtIndexPath: 方法。由于您已经初始化了单元格，因此不会调用 if 语句中的代码，并且不会重新定位文本字段。

最简单的解决方法是简单地将文本字段代码移出 if 语句。我不确定这是否会导致明显的性能下降。

顺便说一句，您添加到单元格的 nameTextField、resistanceTextField 等未初始化，但我认为这只是从代码传输到 stackoverflow 时发生的混淆。我假设它应该是您要添加的 TextField1、TextField2 等。

# facebook - 重新离线访问弃用：什么时候做 fb_exchange_token 的事情？

> ID：10031936
> 
> 赞同：2
> 
> 时间：2012-04-05T15:58:08.433
> 
> 标签：facebook, authentication, facebook-authentication

我正在调整一个已经使用 FB 身份验证和访问令牌一段时间的站点，以处理不推荐使用的 offline_access，特别是执行 fb_exchange_token 的事情来为站点的用户获取延长期限的令牌。它似乎有效，但我有一些问题。我的基本做法是：

*   我通过通常的服务器端来回过程让用户登录，最后给了我一个有效的用户访问令牌。这工作正常，并且似乎在 5300 秒左右有效，就像标准/原始令牌一样。

*   然后我立即进行 fb_exchange_token 调用；这成功了，并给了我一个新的 access_token 可以使用几个月。这是我的网站在代表用户执行操作时保存以备将来使用的令牌。

这是有道理的，对吧？一个接一个地打一个电话似乎有点多余，但它让我得到了延长寿命的令牌，这正是我想要的。我想我可以使用原始令牌，只要它持续存在，并且在原始令牌过期之前不打扰交换，但是（a）似乎我不妨从一开始就获取并使用扩展的令牌和（b）我不清楚是否可以将过期的令牌换成延长期限的令牌。

所以：有人看到这种方法有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:51:27.567

a) 是的，这种方法效果很好。我用我的一些应用程序来做到这一点。

b) 请参阅此常见问题解答中的第 3 项。 [http://dominicminicoopers.blogspot.com/2012/03/facebook-access-tokens-and-offline.html](http://dominicminicoopers.blogspot.com/2012/03/facebook-access-tokens-and-offline.html)

> **我可以将我的 60 天访问令牌换成新的 60 天访问令牌吗？**
> 
> 不，对不起，你不能。您只能将有效（即当前）用户访问令牌交换为扩展令牌。您不能扩展已扩展的访问令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T22:54:26.743

I've noticed today that for the token to actually be extended you have to disable the offline_token within your application settings. I was trying all day with this setting still enabled and I was only getting standard 2 hour tokens, the moment I disabled it, and tried again (after re-authenticating with FB) I got given a 2 month token. Hopes this saves people time (the documentation isn't very clear at all haha).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T17:12:51.423

Why not just do something like this (much cleaner than doing all those explodes)?

```
$response = $this->facebook->api('/oauth/access_token', 'GET', array(
    'grant_type' => 'fb_exchange_token',
    'client_id' => $app_id,
    'client_secret' => $app_secret,
    'fb_exchange_token' => $access_token
));
parse_str($response, $output_array);
$long_lived_access_token = $output_array['access_token'];
$expires = $output_array['expires']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T16:50:46.360

截至 4 月 10 日，这仍然适用于人们吗？我昨天注意到我们的原始代币在 60 天内不再有效，因此我实施了 fb_exchange_token 调用。但是我得到的回复仍然只持续了大约 2 个小时.. 即：

access_token=AAAEHLUxxx...xx&expires=4404

我一直在使用 Android SDK 来获取令牌，并且我的应用已弃用了 offline_access 权限。它工作了大约一周，所有代币过去都可以使用 60 天。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T15:00:31.383

```
$url = "https://graph.facebook.com/oauth/access_token?client_id=$client_id&client_secret=$client_secret&grant_type=fb_exchange_token&fb_exchange_token=$fb_access_token";
$graph = file_get_contents($url);
$graph = explode("=", $graph);
$graph = explode("&", $graph[1]);
$new_access_token = $graph[0]; 
```

# python - 在单元测试中使用 django.template 上下文时遇到问题

> ID：10031945
> 
> 赞同：4
> 
> 时间：2012-04-05T15:58:37.927
> 
> 标签：python, django, unit-testing, django-1.3

当我使用来自 django.template 的 Context 时，我遇到了一些令人困惑的情况。

以下在 python shell 中工作：

```
>>> from django.template import Context, Template
>>> b=Template('TEST').render(Context())
>>> print b
TEST 
```

当我在单元测试中使用相同的代码时，我得到以下错误：

```
Traceback (most recent call last):
  File "/newsletterapi/tests.py", line 25, in setUp
    b = Template('TEST').render(Context())
  File "/opt/python2.7/lib/python2.7/site-packages/django/template/base.py", line 121, in render
    context.render_context.push()
AttributeError: 'Context' object has no attribute 'render_context' 
```

单元测试如下所示：

```
from django.test import TestCase
from myproject.newsletterapi.models import Newsletter
from django.utils.termcolors import colorize
from django.db import IntegrityError
from django.template import Template, Context
import random
import datetime
from decimal import *
import string

class NewsletterTest(TestCase):

    def setUp(self):
        b = Template('TEST').render(Context()) # this is line 25
        self.newsletter = Newsletter(body=b)
        self.newsletter.save()

### ... continues here 
```

有谁知道为什么这在 shell 中有效但在单元测试中无效？我感谢每一个提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T16:30:37.410

好的，我得到了解决方案：

```
from decimal import * 
```

是“坏人”这个库也有一个 Context 对象。感谢任何人阅读！

# vba - Microsoft Word 在使用样式查找期间挂起

> ID：10031946
> 
> 赞同：0
> 
> 时间：2012-04-05T15:58:40.647
> 
> 标签：vba, ms-word

在 Word 文档中搜索样式时，有时会在仅找到第一个匹配项后挂起样式搜索，并进入无限循环。这主要发生在表格中，即使稍后在同一单元格中出现。搜索文本时永远不会发生这种情况。那是一个错误吗？它是如何工作的？

```
Public Sub FindOccurences()
    On Error GoTo MyErrorHandler

    Dim i As Long: i = 0
    Dim findRange As Range
    Set findRange = ActiveDocument.Range

    With findRange.Find
        findRange.Find.ClearFormatting

        'findRange.Find.Text = "the" 'Never hangs searching for text
        findRange.Find.Style = ActiveDocument.Styles("text.10")

        Do While .Execute(Forward:=True) = True
            findRange.HighlightColorIndex = wdTurquoise
            i = i + 1

            DoEvents
        Loop
    End With

    MsgBox "Done. Found times: " & i

    Exit Sub

MyErrorHandler:
    MsgBox "FindOccurences" & vbCrLf & vbCrLf & "Err = " & Err.Number & vbCrLf & "Description: " & Err.Description
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:34:32.097

I tried this code and ended up with an infinite loop, even though my document does not have any tables. I think the problem is that the while loop condition you use is constructed for a linear search of the word document, and that styles are not searched in a linear fashion, but rather iterated through some type of collection data structure.

# delphi - Delphi：如何查找和修复 EOutOfMemory 错误？

> ID：10031947
> 
> 赞同：7
> 
> 时间：2012-04-05T15:58:45.140
> 
> 标签：delphi, pascal, vcl

我正在构建一个进行科学模拟的德尔福应用程序。它越来越复杂，现在由许多单元和形式组成。

每次运行时，我都会开始收到 EOutOFMemory 错误。它似乎发生在我在函数中临时使用变体数组期间或之后。冒着问一个非常愚蠢的问题的风险，“变体数组”是在自找麻烦吗？（我可以将所有内容都转换为字符串，但原则上变体数组可以节省很多捏造的东西）。

有问题的数组使用可能是：

```
 Function  TProject.GetCurrentProjParamsAsArray(LProjectName, LProjectType : ShortString): ArrayOfVariant;
Var
  ArrayIndex : Word;
begin
    SetLength (Result,54);
    ArrayIndex := 0;
    Result [ArrayIndex] := LProjectName;        Inc(ArrayIndex);
    Result [ArrayIndex] := LProjectType;        Inc(ArrayIndex);                   // this structure makes it easier to add extra fields in the DB than hard coding the array index!!
    Result [ArrayIndex] := FileTool.DateTimeForFileNames    ;    Inc(ArrayIndex);
    Result [ArrayIndex] := SiteAndMet.  SiteName            ;    Inc(ArrayIndex);
    Result [ArrayIndex] := SiteAndMet.  PostCode            ;    Inc(ArrayIndex);
    Result [ArrayIndex] := SiteAndMet.  MetFileNamePath     ;    Inc(ArrayIndex);
    Result [ArrayIndex] := SiteAndMet.  SiteLat             ;    Inc(ArrayIndex);
    Result [ArrayIndex] := SiteAndMet.  SiteLong            ;    Inc(ArrayIndex);
    Result [ArrayIndex] := SiteAndMet.  SiteAlt             ;    Inc(ArrayIndex);
    Result [ArrayIndex] := SiteAndMet.  TZoneIndex          ;    Inc(ArrayIndex);
    Result [ArrayIndex] := SiteAndMet.  TZoneHours          ;    Inc(ArrayIndex);
    Result [ArrayIndex] := SiteAndMet.  TZoneMeridian       ;    Inc(ArrayIndex);
    Result [ArrayIndex] := SiteAndMet.  Albedo              ;    Inc(ArrayIndex);
    Result [ArrayIndex] := SiteAndMet.  ArrayTilt           ;    Inc(ArrayIndex);
    Result [ArrayIndex] := SiteAndMet.  ArrayAzimuth        ;    Inc(ArrayIndex); 
```

在任务管理器中 - 内存使用量峰值为 42MB，VM 为 31M，每次运行我会遇到约 90,000 个页面错误。（在具有 3GB 内存的 xp 机器上）

有没有人有任何关于监视我的应用程序中不同组件的内存使用情况的一般提示？或追踪此错误的原因？

最近我已经从将主要项目数据存储为 CSV 到使用 ADO DB，同时我也开始使用 Variant 数据类型，而不是一直在字符串和单/双之间转换。

我遵循了各种我能找到的内存节省技巧，在实用的地方我已经删除了 Application.CreateForm(TProject, Project); 来自 .dpr 的语句并动态创建它们。（除了大部分时间都在使用表格的地方）。一般来说，我使用最小的实用数据类型（字节、短字符串等）并尽量减少“公共”变量和函数的使用

非常欢迎任何提示，布赖恩

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T16:15:59.687

`EOutOfMemory`当内存管理器无法为给定的分配请求找到连续的内存块时，就会发生这种情况。因此，您要么 1) 分配比预期更多的内存，2) 泄漏已成功分配的内存，或 3) 分割（不一定泄漏）内存，因此内存管理器必须随着时间的推移不断分配越来越多的内存。

发生异常时，查看调用堆栈。这将导致您无法分配内存的代码。要获取调用堆栈，请在调试器中运行您的应用程序，或使用 MadExcept、EurekaLog、JCLExcept 等异常日志记录框架。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T17:59:16.560

我怀疑您显示的代码是问题的根源。很可能是出现症状的地方。

如果你怀疑你实际上有一些基本的低级损坏，你可能想尝试打开 FastMM 的完全调试模式。例如，您遇到的问题可能是由一般内存堆损坏引起的，而不是实际内存不足。

如果您没有堆损坏，而是真正的内存不足问题，那么查找和解决它通常需要一个适当的工具，称为分析器，如 AQTime。如果您只是简单地调试代码并发现您试图在某个地方或通过对某些内存分配函数的一系列调用中获取不合理数量的内存，那么您的分配代码可能在某种程度上是错误的。

但是，如果没有诸如 nexus quality suite 或 AQTime 或其他类似工具之类的分析器，您将大多是盲目的。您的应用程序只是失败了，堆管理代码报告它内存不足。您可能在某处正在破坏您的堆。您可能真的为 32 位进程分配了太多内存。您的计算机可能没有足够的真实或虚拟内存，或者您正在分配一个巨大的数据结构，但您没有意识到在您的应用程序中是不切实际的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T17:48:40.747

要查找 OutOfMemory 异常的原因，您需要查看所有对象的创建，而不仅仅是引发异常的位置。

像 EurekaLog 这样的第三方工具可以显示所有在应用程序上实例化但未正确处理的对象。您可以尝试使用带有 FreeAndNil 过程的 try finally 块来纠正它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-06T11:54:08.597

听起来像内存泄漏。

我总是加一个

```
 {$IFDEF DEBUG}
    ReportMemoryLeaksOnShutdown := DebugHook <> 0;
  {$ENDIF} 
```

到我的调试版本的项目源文件。

这很好地表明了我构建程序的程度。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-05T17:34:18.850

你安装了完整版的 FastMem 内存管理器吗？它可以帮助您跟踪内存处理中的错误。看看你有没有漏东西。

如果您没有泄漏，那么您有一个非常极端的碎片问题，您必须通过维护一个对象池而不是继续分配/释放它们来处理它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-13T15:49:44.860

您需要按照“[调试](http://www.dnabaser.com/learn%20Delphi%20programming%20language/)”部分中的说明设置项目选项，以便能够调试您的程序。
一旦你这样做了，重新构建你的程序，下次发生错误时，你将能够介入并检查你的代码。使用 Watches (Ctrl+Alt+W)，您应该能够看到您分配了多少内存以及分配的位置。

# android - 在另一个正在运行的活动（Android）之上显示对话框？

> ID：10031951
> 
> 赞同：1
> 
> 时间：2012-04-05T15:59:06.813
> 
> 标签：android, dialog

我创建了一个可以与 Android 平台上的另一个应用程序一起使用的应用程序。另一个应用程序根据用户操作传递我的应用程序信息和意图。我希望我能够在另一个应用程序之上弹出一个半透明的信息对话框。我遵循了此处的示例之一，但它使我的应用程序回到了前台，并将对话框置于其之上。这可能吗？我希望避免与其他开发人员一起设置意图侦听器等来显示我的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T13:21:33.307

如果要在另一个活动之上处理弹出窗口，则必须使用广播侦听器来实现。就半透明属性而言，您可以在实例化新对话框时添加以下行： dialog = new DialogBox(this, R.style.Transparent);

为了实现这一点，您需要在 styles.xml 中编写以下代码，该代码将驻留在项目的 values 文件夹中。

```
 <style name="Transparent">
        <item name="android:windowIsTranslucent">true</item>
        <item name="android:windowAnimationStyle">
         @android:style/Animation.Translucent</item>
        <item name="android:windowBackground">@drawable/transparent</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:colorForeground">#fff</item>
      </style> 
```

同样，您需要在 values 文件夹中的 colors.xml 文件中添加以下行：

```
 <drawable name="transparent">#00000000</drawable> 
```

另外，您可以尝试一下：将模糊添加到背景图像

```
 WindowManager.LayoutParams lp = dialog.getWindow().getAttributes();  
     lp.dimAmount=0.0f;  
     dialog.getWindow().setAttributes(lp);  
     dialog.getWindow().addFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND); 
```

希望这会有所帮助。

谢谢！

# cmake - 如何在cmake的函数中设置全局变量？

> ID：10031953
> 
> 赞同：23
> 
> 时间：2012-04-05T15:59:09.260
> 
> 标签：cmake

我正在编写一个 CMakeLists.txt 来生成文件并编译生成的文件。我创建了一个函数来将一些文件路径字符串添加到全局列表变量中。

我的 CMakeLists.txt：

```
set(source_list "nothing")
function(test file_path)
    list(APPEND source_list ${file_path})
endfunction(test)
test(abc.txt)
test(def.txt)
message("At last, the source_list is:\"${source_list}\"") 
```

cmake 输出：

```
At last, the source_list is:"nothing" 
```

有人建议使用宏而不是函数，但我确实需要使用局部变量，所以我需要使用函数而不是宏。

如何在函数 test() 中正确设置全局变量 source_list？cmake不能以简单和正常的方式来做吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-08-05T03:05:49.110

PARENT_SCOPE 仅适用于父级，如果您有其他非父级脚本也想查看它，它将不起作用。

您需要缓存真正的“类全局”变量。在您的情况下，请使用：

```
SET(source_list  "${source_list}" CACHE INTERNAL "source_list") 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-05T16:25:05.380

您需要使用`set`而不是`list`影响父范围中的变量。

因此，将您的`list`命令替换为：

```
set(source_list ${source_list} ${file_path} PARENT_SCOPE) 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-09-25T19:54:56.810

另一种方法是使用全局属性。一旦你设置它：

```
set_property(GLOBAL PROPERTY source_list_property "${source_list}") 
```

你可以从任何地方阅读它：

```
get_property(source_list GLOBAL PROPERTY source_list_property) 
```

我在上面的示例中使用了属性 ( `source_list_property`) 和变量 ( `source_list`) 的不同名称。也许使用相同的名称会更好。但重点是使用属性作为全局变量，而不是命名。

此类全局属性不在缓存中。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-11-29T10:30:02.987

基于 Maxim Suslov 的回答，以下代码适用于我遇到的类似问题：

```
set_property(GLOBAL PROPERTY source_list)
function(add_source)
    get_property(tmp GLOBAL PROPERTY source_list)
    foreach(arg ${ARGV})
        set(tmp "${tmp} ${arg}")
    endforeach()
    set_property(GLOBAL PROPERTY source_list "${tmp}")
endfunction(add_source)

add_source(a_file)
add_source(b_file c_file)

get_property(local_prop GLOBAL PROPERTY source_list)
message("list: ${local_prop}") 
```

函数 add_source 可以从任何子目录中调用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-02-18T08:22:07.880

解决此问题的另一种方法是使用`macro`而不是`function`- 这样宏内部的所有变量都将在调用者的上下文中进行评估。

# internet-explorer - Browserswitch 然后使用 meta http-equiv="X-UA-Compatible" - Documentmodus 已经完成

> ID：10031956
> 
> 赞同：1
> 
> 时间：2012-04-05T15:59:20.133
> 
> 标签：internet-explorer, internet-explorer-9, browser-detection, x-ua-compatible

我们对某些 Internet Explorer 版本有一些奇怪的问题，所以我们有一个浏览器开关

```
<head>
<!--[if IE 6]>
  <!-- load some IE6 stuff -->
  <meta http-equiv="X-UA-Compatible" content="IE=6" />
<![endif]-->
<!--[if IE 7]>
  <!-- load some IE7 stuff -->
  <meta http-equiv="X-UA-Compatible" content="IE=6" />
<![endif]-->

<!--[if IE 8]>
  <!-- load some IE8 stuff -->
  <meta http-equiv="X-UA-Compatible" content="IE=8" />
<![endif]-->

<!--[if IE 9]>
  <!-- load some IE9 stuff -->
  <meta http-equiv="X-UA-Compatible" content="IE=8" />
<![endif]-->
</head> 
```

如果我像这样加载它，我会在 IE9 Developer 插件中看到：

> HTML1115：X-UA 兼容的 META-Tag ("IE=8") 被忽略，因为 documentmodus 已经加载。

（最初是德语，所以我应该是翻译）

并且文档方式仍然是IE9

如果我把它写进我的`<head>`标签：

```
 <meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

IE9 将被加载为 IE8，所以这行得通，但是 IE6 的东西当然做错了....

那么有什么方法可以像我第一次尝试那样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:59:44.333

你不能这样做。在元素之前可以使用的东西数量有限`X-UA-Compatible` `meta`。

> X-UA-Compatible 标头不区分大小写；但是，它必须出现在网页的标题（HEAD 部分）中，位于除标题元素和其他元元素之外的所有其他元素之前。

（来自[http://msdn.microsoft.com/en-us/library/ie/cc288325%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/cc288325%28v=vs.85%29.aspx)）

这就是为什么您的标记不能按预期工作的原因 - 条件注释会导致所有后续`X-UA-Compatible`声明都被忽略。

另请注意，`X-UA-Compatible`仅在 IE8 和更新版本中受支持 - 它在 IE6 和 IE7 中完全被忽略。如果您仅使用以下内容：

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

那么 IE6 和 IE7 将使用它们自己的渲染，并且 IE8 以上的所有版本都会将文档渲染为 IE8。

# c# - 如何在 ASP.NET 中获取控件的 ID

> ID：10031957
> 
> 赞同：-1
> 
> 时间：2012-04-05T15:59:24.523
> 
> 标签：c#, asp.net, controls

我正在尝试遍历一组数字，将它们与它们关联的复选框匹配，然后选中该框。

我的复选框设置如下：

```
<input type="checkbox" runat="server" id="someID" name="somename" value="1234" /> 
```

当前页面加载时我的代码如下所示：

```
foreach (string interest in interests_Var){
   foreach (var c in Page.Controls)
   {
   }
} 
```

`interests_Var`是我的数组包含不同的数字。我们假设其中之一是`1234`. 在循环浏览页面控件时，我想将控件的值与我的数字进行比较。如果它等于我的数字，我想应用属性`checked="checked"`。我假设我必须找到我正在使用的控件的 ID，然后使用该 ID 添加一个新属性。或者有没有办法可以使用`c`变量添加属性？

我对这个设置没有死心，所以如果你知道更好的方法，我会全神贯注。感谢您的任何帮助和建议。

**谢谢**

很多好的建议。我稍后会尝试这些。在另一个项目上被搁置了。

**解决了**

好的，这是我的结束代码。感谢詹姆斯的帮助。

```
foreach (string interest in interests_Var)
{
       foreach (var chkCtrl in Panel1.Controls.OfType<CheckBox>())
       {
           if (chkCtrl.Attributes["value"].ToString() == interest.ToString())
          {
               chkCtrl.Checked = true;
          }
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T16:11:01.243

我假设您正在使用多个复选框并存储了多个值。最好使用 Asp:Checkbox，而不是简单地将 runat="server" 属性分配给您的输入控件。

假设您有这样的数据源：

```
public class MyClass
{
   public String Name {get;set;}
   public int Number {get;set;}
} 
```

使用此服务器控制：

```
<asp:CheckBoxList ID="cblMyList" runat="server" DataTextField="Name" DataValueField="Number"> 
```

该`Name`属性将用作显示字符串，其中`Number`的值实际上是 HTTP Post 的一部分。

在 OnInit-Eventhandler 中，您可能会像这样绑定：

```
List<MyClass> values = //...
cblMyList.DataSource = values;
cblMyList.DataBind();
foreach (ListItem item in this.cblMyList.Items)
{
   if(interests.Contains(item.Value))
   {
    item.Selected = true;
   }
} 
```

使用这段代码可以获取所有选定的值：

```
List<int> selectedValues = cblMyList.Items.Cast<ListItem>().Where(x => x.Selected).Select(x => int.Parse(x.Value)).ToList(); 
```

我选择 int 作为 DataValueField 的数据类型。当然，您可以使用其他类型，只需将 替换`int`为您选择的数据类型即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T16:09:02.657

如果您为您的复选框分配一个 ID，例如 "interest" + `value`，那么您可以使用`FindControl`按兴趣查找您的复选框：

```
foreach (string interest in interests_Var)
{
    HtmlInputCheckBox checkBox = (HtmlInputCheckBox)this.FindControl("interest" + interest);
    if (checkBox == null)
        throw new InvalidOperationException("Missing check box for " + interest);
    checkBox.Checked = true;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T16:12:15.603

最好将 CheckBox 控件放入 a`Panel`或 a`PlaceHolder`中，因为这样您就不必担心遍历控件层次结构的递归逻辑。

```
<asp:Panel ID="Panel1" runat="server">
    <asp:CheckBox ID="CheckBox1" runat="server" Text="Testing" value="1234" />
    ...
</asp:Panel> 
```

通过将控件放入容器中，您可以遍历该元素的子控件：

```
foreach (string interest in interests_Var)
{
    foreach (var chkCtrl in Panel1.Controls.OfType<CheckBox>())
    {
        chkCtrl.Checked = chkCtrl.Attributes["value"].Contains(interest.ToString());
    }
} 
```

假设`interests_Var`是`List`，这是使用 LINQ 的一种更短的方法：

```
interests_Var.ForEach(str => plcInvoiceDetail.Controls.OfType<CheckBox>()
    .Select(chk => chk.Checked = chk.Attributes["value"] == str)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T16:14:05.720

如果这是一个 Web 表单应用程序，并且您并没有按照您的描述进行操作，您可以将您的标记更改为：

```
<asp:CheckBox id="someID" runat="server" /> 
```

然后它将在 .designer.cs 文件中定义。这样，您可以像这样在代码中简单地引用它：

```
if ( someID.Checked )
{
    // do whatever
} 
```

注意，如果是动态添加的控件，还是要使用`FindControl()`别人提到的方法，因为Visual Studio不会为你添加到.designer.cs文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T16:31:45.843

您可以使用以下文章中描述的控件数组：-
[http://msdn.microsoft.com/en-us/library/aa289500%28v=VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa289500%28v=VS.71%29.aspx)
[http://www.codeproject。 com/Articles/21159/How-to-Create-a-Control-Array-in-C](http://www.codeproject.com/Articles/21159/How-to-Create-a-Control-Array-in-C)
对于从控件中遍历值，您可以使用以下内容作为参考：-
[将控件数组添加到 aspx 页面](https://stackoverflow.com/questions/7746513/add-array-of-controls-to-an-aspx-page)

我建议您使用 ASP.NET Checkbox 而不是 HTML < input type="checkbox">。

# sockets - 多个 UDP 套接字来侦听同一端口上的特定源

> ID：10031961
> 
> 赞同：2
> 
> 时间：2012-04-05T15:59:45.437
> 
> 标签：sockets, udp

既然可以构造一个 tcp 套接字和一个监听同一端口的 udp 套接字，那么是否可以构造多个在同一端口上侦听 udp 消息的套接字，每个套接字都侦听不同的源端点？

在设计方面，我目前的印象是，“正确”的做法是让一个套接字侦听所有 udp 消息并让它在应用程序级别确定来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T16:10:33.777

使用 socket 选项可以让多个 UDP 套接字在同一个本地 IP/端口对上侦听`SO_REUSEADDR`，但是没有办法告诉每个套接字只接受其预期的远程 IP/端口对的数据包，所以不能保证哪个套接字将接收哪个数据包。所以是的，正确的选择是使用单个套接字来查看每个接收到的数据包的发送 IP/端口并相应地引导数据包。

# mysql - MySQl 最便宜的彩色打印机

> ID：10031965
> 
> 赞同：0
> 
> 时间：2012-04-05T15:59:59.977
> 
> 标签：mysql

关系：

*   产品（制造商、型号、类型）
*   笔记本电脑（型号、价格、速度、内存、高清、屏幕）
*   PC（型号，价格，速度，内存，高清）
*   打印机（型号、价格、颜色、价格）

我现在正在寻找最便宜的彩色打印机的制造商

我的查询：

```
SELECT maker FROM 
(SELECT model FROM printer NATURAL JOIN product WHERE printer.color = '1') AS t1  
WHERE price < all; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T11:57:33.000

我是这样解决的：

```
select distinct Pro.maker, Pri.price
from Product Pro join Printer Pri on Pro.model = Pri.model
where Pri.price = (select min(price) from Printer where color = 'y')  and Pri.color = 'y' 
```

在子查询`(select min(price) from Printer where color = 'y')`中，我们应该指定只搜索彩色打印机的价格。

我在这个解决方案中不喜欢的是我们必须为彩色打印机进行两次过滤：

*   在子查询中`(select min(price) from Printer where color = 'y')`
*   在顶部查询中`... and Pri.color = 'y'`

虽然我不知道如何摆脱在这两个地方指定这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T16:09:57.507

使用子查询，您应该这样解决：

```
select pro.maker from printer pri
natural join product pro
where pri.color = '1'
  and pri.price <= all (select price from printer where pri.color = '1') 
```

带`LIMIT`子句：

```
select pro.maker from printer pri
natural join product pro
where pri.color = '1'
order by pri.price
limit 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T16:03:15.380

```
 SELECT `p.maker`
      FROM `product` AS `p`
INNER JOIN printer as pr
     WHERE p.model = pr.model
  ORDER BY pr.price ASC LIMIT 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T16:16:49.127

在 Mysql 中，以下查询也有效：

```
select b.maker, min(a.price) from printer a, product b 
where a.color = '1'
and a.model = b.model; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-13T01:20:38.737

尝试以下查询：

```
Select distinct maker,price from Product 
Join Printer on printer.color='y'and Product.model= Printer.model
group by Printer.model
having price = (select min(price) from Printer where color='y') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-09T13:09:03.457

```
select distinct product.maker, price 
from printer
join product
on ( product.model=printer.model)
where color='y' and
price = (select min(price) from printer where color='y') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-19T07:57:45.037

```
SELECT DISTINCT maker, price 
FROM Printer 
JOIN Product 
ON Product.model=Printer.model 
WHERE Printer.color=1 
AND Printer.price=
(SELECT MIN(price) 
FROM Printer
WHERE color=1) 
```

正确的。

您的查询结果：

```
maker      price

D          270.0000 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-10T18:59:53.380

我是初学者，但我尝试过这样

```
select distinct p.maker, pr.price from

(select maker, model from product)p

inner join 

(select model, price from printer where color='y' and price=(select min(price) from 
printer where color='y'))pr

on p.model=pr.model 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-12T07:26:04.237

```
select ‍product.maker, printer.price
from product join printer on product.model=printer.model
where price= (select min(price) from printer where color='y') 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-12-30T07:16:39.387

可以有多种解决方案，下面也可以。

你可以试试这个，

```
select  top 1 t1.maker, t2.price from  product t1, printer t2
where t2.color = 'y'
and t1.model = t2.model order by t2.price 
```

# c - 错误 C2016：C 要求结构或联合至少有一个来自结构的成员

> ID：10031966
> 
> 赞同：2
> 
> 时间：2012-04-05T16:00:07.930
> 
> 标签：c, struct

当我对 2 个头文件执行类似操作时：headerfile_1.h 和 headerfile_2.h 我收到错误：错误 C2016：C 要求结构或联合至少有一个来自 headerfile_1.h 中结构 A 定义的成员

在 headerfile_1.h

```
#include "headerfile_2.h"
struct a;

struct a{
    B bb;
}A; 
```

在 headerfile_2.h

```
typedef struct b{
  void (*func0)(A *aa);
}B; 
```

请帮助我理解，我哪里出错了。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T16:07:23.297

您尝试执行的操作将不起作用，因为您在两个头文件之间存在循环依赖关系：

头文件_1：

```
struct A{
    B bb;  /* Use of B, therefore B needs to be defined before A */
}; 
```

头文件_2：

```
typedef struct b{
    void (*func0)(A a); /* Use of A, therefore A needs to be defined before B */
} B; 
```

不可能的。

您可以做的一件事是更改定义`func0`以获取指向`A`而不是完整对象的指针。这样，您就不需要`A`before的定义`B`。

所以：

头文件_1：

```
#include "headerfile_2.h"

struct A{
    B bb;
}; 
```

头文件_2：

```
typedef struct A A;

typedef struct b{
    void (*func0)(A *a); /* A * instead of A */
} B; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T19:03:56.360

你给它的代码在不同的地方弄错了。我想你想`A`成为一个`typedef`to `struct a`？

最简单的方法是始终将`typedef`as 前向声明放在**一个**头文件中

```
typedef struct a A;
typedef struct b B; 
```

然后你必须以`struct`正确的顺序声明它们自己（没有任何其他`typedef`）。在这里，您`struct b`只需要一个指向的指针，`A`因此仅使用`typedef`上述内容就可以了。但是`struct a`需要整个`B`而不只是一个指针，所以你的声明`struct a`必须*看到*整个声明`struct b`。

# regex - 为什么 .htaccess 中的这个正则表达式不匹配？

> ID：10031977
> 
> 赞同：1
> 
> 时间：2012-04-05T16:00:53.127
> 
> 标签：regex, .htaccess, mod-rewrite

我有以下行：

```
RewriteRule ^page.php?var1=([0-9]+)&var2=(.*)&var3=(.*)$ index.php?module=page&var1=$1 
```

当我使用此 url 访问目录时：page.php?var1=24&var2=346adf&var3=asdf

它不执行正则表达式。有人有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:05:40.533

基本上你的规则是不正确的。原因：您只能使用 REQUEST_URI 匹配，`RewriteRule`但不能匹配其中的 QUERY String。

将您的代码更改为此以使其正确：

```
RewriteCond %{QUERY_STRING} ^var1=([0-9]+)&var2=[^&]*&var3=.*$ [NC]
RewriteRule ^page\.php/?$ index.php?module=page&var1=%1 [L,NC,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T16:03:41.520

我注意到的第一件事是？应该可以逃脱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T16:05:45.967

除了缺少转义之外，查询字符串（后面的东西`?`）不是`RewriteRule`匹配的一部分。`RewriteCond`如果要匹配查询字符串，则必须使用附加项。例如：

```
RewriteCond %{QUERY_STRING} ^foo=([^&]+)&bar$
RewriteRule ^page\.php$ otherpage.php?x=%1 [QSA] 
```

我不会推荐这个。您最好在脚本中解析查询字符串。

# php - 从对象内部取出一个字符串

> ID：10031981
> 
> 赞同：2
> 
> 时间：2012-04-05T16:01:04.297
> 
> 标签：php, wordpress

作为数据库查询的结果，我有以下对象，对象的最后一部分`$result->meta_value`是我感兴趣的。

我需要从字符串中获取这个值：

```
file";s:24:"2012/04/twitter.jpg"; 
```

谁能建议我如何将字符串分解成有用的东西？

```
object(stdClass)#72 (4) {
  ["meta_id"]=&gt;
  string(4) "2367"
  ["post_id"]=&gt;
  string(3) "540"
  ["meta_key"]=&gt;
  string(23) "_wp_attachment_metadata"
  ["meta_value"]=&gt;
  string(646) "a:6:{s:5:"width";s:3:"300";s:6:"height";s:3:"180";s:14:"hwstring_small";s:23:"height='76' width='128'";s:4:"file";s:24:"2012/04/twitter.jpg";s:5:"sizes";a:2:{s:9:"thumbnail";a:3:{s:4:"file";s:24:"twitterwinjs-150x150.jpg";s:5:"width";s:3:"150";s:6:"height";s:3:"150";}s:14:"post-thumbnail";a:3:{s:4:"file";s:22:"twitter60x60.jpg";s:5:"width";s:2:"60";s:6:"height";s:2:"60";}}s:10:"image_meta";a:10:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";}}"
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T16:02:28.010

```
<?php unserialize($result->meta_value); ?> 
```

这个字符串是一个序列化的数组，见[http://php.net/serialize](http://php.net/serialize)。

# ruby-on-rails - 检查事件是否在时间范围内

> ID：10031993
> 
> 赞同：0
> 
> 时间：2012-04-05T16:01:59.540
> 
> 标签：ruby-on-rails, ruby, time

我有一个由以下定义的时间框架模型：

```
STARTTIME: HH:MM
ENDTIME: HH:MM 
```

现在我需要以`ACTUALTIME`HH:MM 格式对给定时间进行查询，并检查是否`ACTUALTIME`在我定义的任何给定时间范围内：`STARTTIME`和`ENDTIME`。

由于仅由 Hour 和 Minute 定义的 Ruby 时间对象始终由日期表示，我想知道是否有可能查询如下内容：Is 13:40 between 11:00 and 15:00 without take the date part into帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:31:52.013

如果您`HH:MM`是字符串，并且它们始终是零填充的（例如“03:08”），那么您可以使用简单的字符串比较：

```
irb:02> first = "03:17"; last = "11:54"
#=> "11:54"
irb:03> range = first..last
#=> "03:17".."11:54"
irb:04> range.include? "00:00"
#=> false
irb:05> range.include? "03:50"
#=> true
irb:06> range.include? "03:09"
#=> false
irb:07> range.include? "12:17"
#=> false
irb:08> range.include? "11:17"
#=> true 
```

如果您的 STARTTIME 和 ENDTIME 作为实例进入 Ruby，`Time`那么您可以编写一个将它们转换为字符串 ( `my_time.strftime('%H:%M')`) 的方法，或者您可以简单地编写一个比较器：

```
# Returns true if hour:min is between the times in t1 and t2
def between(hour,min,t1,t2)
  t1.hour<=hour && hour<=t2.hour && t1.min<=min && min<=t2.min
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T21:59:06.930

感谢 Phrogz 的建议我想出了如何编写一个可以独立于日期比较两次的方法。即使`ENDTIME`在 24:00 之后，它对我来说也很好

```
def betweenTime(timestart, timeend, timecheck)

 getseconds = lambda{ |time| time.hour*60*60 + time.min*60 + time.sec}

 timestart = getseconds[timestart]
 timeend = getseconds[timeend]
 timecheck = getseconds[timecheck]

 if (timeend-timestart) < 0
   timeend = timeend + (60*60*24) # add seconds for one day if timeend is after 24:00
 end

 timecheck.between?(timestart, timeend)
end 
```

# c# - Redis .StoreAll 在 mscorlib.dll 中发生“System.StackOverflowException”类型的未处理异常

> ID：10031996
> 
> 赞同：0
> 
> 时间：2012-04-05T16:02:09.290
> 
> 标签：c#, redis

我正在使用 Redis，但它`StoreAll`不起作用。

> mscorlib.dll 中出现“System.StackOverflowException”类型的未处理异常

```
var newOrders = (from i in DB.Produtoes.OrderByDescending(d => d.idProduto) select i);
using (var produtosRedis = redisClient.GetTypedClient<Produto>())
{
    produtosRedis.StoreAll(newOrders);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:46:53.157

您遇到的是由`StoreAll()`.

这些帖子将帮助您：

1.  [在将 EF 对象图序列化为 Json 时防止 StackOverflowException](https://stackoverflow.com/a/9201020/290343)
2.  [EntityFramework 到 Json 的解决方法？](https://stackoverflow.com/a/7611766/290343)