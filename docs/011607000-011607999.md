# StackOverflow 问答 11607000-11607999

# git - 在这些文件中发现带有 TRAILING WHITESPACE 的 git svn dcommit 错误

> ID：11607002
> 
> 赞同：1
> 
> 时间：2012-07-23T05:41:17.097
> 
> 标签：git, svn

我尝试使用 'git svn dcommit' 但出现以下错误：

存储库挂钩失败：“预提交”挂钩失败，错误输出：

```
*** Transaction blocked
    TRAILING WHITESPACE discovered in these files
        designs/trunk/1167923/cfg/main.cpp
        designs/trunk/1167923/cfg/Registers.cpp

Code does not conform to whitespace standard
 at /usr/lib/git-core/git-svn line 922 
```

我不知道如何解决它。

这是我的配置：

```
receive.denynonfastforwards=true
alias.st=status
alias.ci=commit
alias.co=checkout
alias.br=branch
alias.log1=log --oneline
alias.fetchavs=fetch --all --progress -v
alias.pushav=push --all --progress -v
alias.dfb=diff -b 
alias.dfw=diff -w
color.ui=auto
color.branch=auto
color.diff=auto
color.interactive=auto
color.status=auto
core.autocrlf=input
core.safecrlf=true
core.whitespace=nowarn
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
svn-remote.svn.url=http://svn
svn-remote.svn.fetch=designs/trunk/1167923:refs/remotes/trunk
svn-remote.svn.branches=designs/branches/1167923/*:refs/remotes/*
svn-remote.svn.tags=designs/tags/1167923/*:refs/remotes/tags/* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:50:08.893

该错误将来自您的远程（svn）服务器 - 您的 git-svn 配置不是特别相关。

您需要编辑待处理的提交，以便服务器接受每个单独的提交。

例如

*   `git rebase -i HEAD~10`
*   确定问题提交
*   选择 e 进行编辑
*   纠正你的空白错误
*   `git commit -va --amend`
*   `git rebase --continue`

然后再试`dcommit`一次。

在您自己的 git pre-commit 钩子中放置等效检查符合您的利益 - 这样您就可以在提交时知道您的更改在推送到 svn 时将被拒绝，因此可以更正。

# mysql - 如何优化 25M 行的批量 sql 更新

> ID：11607003
> 
> 赞同：1
> 
> 时间：2012-07-23T05:41:20.523
> 
> 标签：mysql, performance

我需要运行以下查询来更新包含约 25M 行的表。

```
UPDATE cast_info SET movie_url = 
    (SELECT imdb_id FROM title WHERE title.id = cast_info.movie_id) 
```

在运行此查询之前，我需要在 mysql 中更改任何内容或变量，而不是说需要十个小时，而是只需要八个小时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T05:54:50.920

尝试这个

```
UPDATE cast_info as ci inner join title as ti on ti.id = ci.movie_id
SET ci.movie_url =t.imdb_id 
```

# linux - 在 bash 中使用 awk 变量

> ID：11607005
> 
> 赞同：2
> 
> 时间：2012-07-23T05:41:37.283
> 
> 标签：linux, bash, shell, awk

我有一个 awk 脚本，它获取系统中总 eth 中断的数量。

```
#!/bin/bash

FILE="/proc/interrupts"

awk 'NR==1 {
core_count = NF 
print "core count: ", core_count
next
}

/eth/ {
 for (i = 2; i <= 2+core_count; i++)
 totals[i-2] += $i
}

END {
print "Totals"
for (i = 0; i < core_count; i++)
printf("CPU%d: %d\n", i, totals[i])
}
' $FILE 
```

在 bash 的最后，我有 core_count 和 totals 数组。但是，我需要使用这些变量，如何在脚本的其余部分使用它们？换句话说，如何将它们全球化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:43:17.490

你不能。将它们呼出并拉入。

```
{ read core_count ; read -a totals ; } < <(echo -e "2\n4 5") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:00:31.023

```
#!/bin/bash

FILE="/proc/interrupts"

output=$(awk 'NR==1 {
core_count = NF 
print core_count
next
}

/eth/ {
 for (i = 2; i <= 2+core_count; i++)
 totals[i-2] += $i 
}

END {
for (i = 0; i < core_count; i++)
  printf("%d\n", totals[i])
}
' $FILE)
core_count=$(echo $output | cut -d' ' -f1)
output=$(echo $output | sed 's/^[0-9]*//')
totals=(${output// / })
echo CC: $core_count total0 ${totals[0]} total1 ${totals[1]} 
```

# php - 在非对象上调用成员函数 fetch()

> ID：11607006
> 
> 赞同：-1
> 
> 时间：2012-07-23T05:41:42.640
> 
> 标签：php, database, pdo, syntax-error

所以，我很确定我的查询应该没问题。但是我做了一个 var_dump 并且它确实返回 false，所以我不知道为什么。有人可以告诉我我的查询有什么问题或诸如此类的问题，以及如何解决吗？我很确定这不是我的自定义函数 db_​​connect，它以前工作过。可能是什么问题呢？

这是我的代码：

```
require_once("includes/helpers.php");
session_start();

$dbh = connect_db('mysql:host=localhost;dbname=project1', 'jharvard', 'crimson');

if (!isset($_POST['quantity'])) { //go back if incomplete
    redirect('search');
}   

if (!isset($_SESSION['email'])) {
    redirect('index');
}
elseif (!isset($_SESSION['row'])) {
    redirect('stocks');
}

$amount = htmlspecialchars($_POST['quantity']);
$value = htmlspecialchars($_SESSION['row']);
$email = htmlspecialchars($_SESSION['email']);
$name = htmlspecialchars($_SESSION['q']);   

if (!filter_var($amount, FILTER_VALIDATE_INT) || $amount < 0) {
    redirect('search');
}

$dbh->beginTransaction();
$result = $dbh->query("SELECT balance FROM users WHERE email = $email"); //get balance 
$result1 = $dbh->query("SELECT id FROM users WHERE email = $email"); //get id

var_dump($result);

$bal = $result->fetchAll(PDO::FETCH_NUM);
$id = $result1->fetch(PDO::FETCH_ASSOC);

//if ($bal < $amount * $value) {
//  redirect ('search');
//} 

$bal = $bal - $amount * $value; //subtracting from total

$dbh->exec("INSERT INTO stocks (name, shares, id) VALUES ('$name', '$amount', '$id')");
$dbh->commit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:53:49.117

您需要将 $email 变量放在引号内：

```
$result = $dbh->query("SELECT balance FROM users WHERE email = '$email'"); //get balance 
$result1 = $dbh->query("SELECT id FROM users WHERE email = '$email'"); 
```

或连接：

```
$result = $dbh->query("SELECT balance FROM users WHERE email = '".$email."'");
$result1 = $dbh->query("SELECT id FROM users WHERE email = '".$email."'"); 
```

# salesforce - 如何在 Visualforce 页面上仅显示从自定义验证中提取的错误消息？

> ID：11607007
> 
> 赞同：6
> 
> 时间：2012-07-23T05:41:57.053
> 
> 标签：salesforce, apex-code, visualforce

我使用对象的配置添加了一些自定义验证。我正在通过 visualforce 页面插入该对象记录。我已经`<apex:pageMessages/>`在我的 visualforce 页面上添加了。我还编写了用于捕获异常并在 VF 页面上显示错误消息的代码块。请在下面找到代码块：

```
catch(DMLException excp)
{
    ApexPages.Message msg = new ApexPages.Message(Apexpages.Severity.ERROR, excp.getMessage() );
    ApexPages.addMessage(msg);  
    return null;                            
} 
```

我仍然无法从自定义验证中获得唯一的错误消息。它向我显示如下错误：

> 插入失败。第 0 行的第一个异常；第一个错误：FIELD_CUSTOM_VALIDATION_EXCEPTION， **error_message_from_custom_validation_comes_here**

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T06:16:32.757

您需要像这样获取 DML 消息：

```
ApexPages.Message msg = new ApexPages.Message(Apexpages.Severity.ERROR, excp.getdmlMessage(0) );
ApexPages.addMessage(msg); 
```

[使用异常消息](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_exception_methods.htm)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T21:26:08.693

最好的方法是使用 addMessages，注意复数。它的优点是只显示消息详细信息，对于批量操作，相同的消息只显示一次，我个人最喜欢的是：它只有一行，所以如果它是一个不可测试的异常，你的覆盖率会更高。

```
try {
    //failed dml operation
} catch(DmlException excp) {
    ApexPages.addMessages(excp);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-07T15:14:57.703

```
try{
   ...
} catch (DMLException ex){
    String errorMessage = ex.getMessage();
    Integer occurence;
    if (ex.getMessage().contains('FIELD_CUSTOM_VALIDATION_EXCEPTION')){
        occurence = errorMessage.indexOf('FIELD_CUSTOM_VALIDATION_EXCEPTION,') + 34;
        errorMessage = errorMessage.mid(occurence, errorMessage.length());
        occurence = errorMessage.lastIndexOf(':');
        errorMessage = errorMessage.mid(0, occurence);
    }
    else {
        errorMessage = ex.getMessage();
    }

    ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR, errorMessage));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-30T18:26:53.410

通过对 Miguel 的代码再使用一个字符串函数，将为您提供准确的“验证错误消息”。谢谢米格尔。你的代码帮助了我。希望这可以帮助。

```
str = errorMessage.substringBefore(':'); 
```

# java - 什么是 antiJARLocking 属性？

> ID：11607009
> 
> 赞同：36
> 
> 时间：2012-07-23T05:42:02.817
> 
> 标签：java, jakarta-ee, tomcat

属性`antiJARLocking`是什么意思？当我把它变成*true / false*有什么意义？

我在`context.xml`web-application 的文件中看到了这个属性：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/poll">
 <Resource name="jdbc/PollDatasource" auth="Container"
           type="javax.sql.DataSource"
 // etc etc
</context> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-23T06:02:49.743

# 雄猫 7

来自[上下文配置的 Tomcat 7.0 文档](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)：

> *“antiJARLocking - 如果为 true，当通过 URL 访问 JAR 中的资源时，Tomcat 类加载器将采取额外措施来避免 JAR 文件锁定。这将影响应用程序的启动时间，但在可能发生文件锁定的平台或配置上可能会被证明是有用的.如果没有指定，默认值为false。”*

（他们试图解决的问题......我认为......是锁定的 JAR 文件会阻止热重新部署等工作。）

阅读文档以获取更多信息。

# Tomcat 8 及更高版本

该`antiJARLocking`属性由[`antiResourceLocking`](http://tomcat.apache.org/tomcat-8.0-doc/config/context.html#Standard_Implementation)Tomcat 8 及更高版本中的属性替换。该文档提到了设置此属性的一些值得注意的副作用。

* * *

也可以看看：

*   [http://stackoverflow.com/q/22480442/642706](http://stackoverflow.com/q/22480442/642706) ... 其中指出，如果您执行热重新部署，打开此功能可能会导致 permgen（或在 Java 8+ 中为元空间）内存泄漏。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-28T04:00:28.910

Windows 喜欢在类加载期间锁定文件，从而防止它们被手动删除或被另一个应用程序打开。在取消部署和重新部署战争时，它也会引起问题。在 Tomcat 中，当您指定`<Context antiJARLocking="true"/>`这将阻止 Windows 获取对您的 jar 的锁定

# python - python makedirs权限被拒绝

> ID：11607015
> 
> 赞同：3
> 
> 时间：2012-07-23T05:42:24.590
> 
> 标签：python, apache, mkdir

我有一个使用 django 框架和 mod_wsgi 运行 python 代码的 apache httpd 服务器。我的 view.py 我需要进行子进程调用来执行另一个 python 文件，该文件在进程中需要创建一些目录。

但是，无论我尝试在哪里创建目录，我都会收到 OSERROR 13: Permission denied 。

只有在 /tmp 中创建目录是成功的。

谁能指导我如何解决这个问题？

提前致谢！！！

**编辑：** 我在 serverfault.com 中找到了答案。这里仅供参考 apache2 在 root 下运行，但它分叉在“www-data”组下运行的进程。所以创建一个目录，你想在其中创建文件/目录

```
sudo mkdir /srv/www/writable 
```

更改组

```
sudo chgrp www-data /srv/www/writable 
```

授予组写入权限

```
sudo chmod g+w /srv/www/writable 
```

你完成了。现在您可以使用 apache2 运行的脚本在此目录中创建任何文件/目录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T10:34:26.123

可能值得补充的是，这也可以在 Python 中实现

```
import os
import pwd

path = '/var/www/myapp/foo/'
if not os.path.exists(path):
        os.makedirs(path) # creates with default perms 0777
        uid, gid =  pwd.getpwnam('root').pw_uid, pwd.getpwnam('www-data').pw_uid
        os.chown(path, uid, gid) # set user:group as root:www-data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T11:08:46.853

我在 serverfault.com 中找到了答案。这里供参考

apache2 在 root 下运行，但它分叉在“www-data”组下运行的进程。所以创建一个目录，你想在其中创建文件/目录

sudo mkdir /srv/www/writable 更改组

sudo chgrp www-data /srv/www/writable 授予组写入权限

sudo chmod g+w /srv/www/writable 你就完成了。现在您可以使用 apache2 运行的脚本在此目录中创建任何文件/目录

# sql-server-2012 - 如何在 SQL Server 2012 中使用源代码管理

> ID：11607016
> 
> 赞同：0
> 
> 时间：2012-07-23T05:42:24.850
> 
> 标签：sql-server-2012, redgate

我使用 SQ Server 2012 并希望对其进行源代码控制。我想`Redgate SQL Source Control`用于这个目的。当我`Redgate Source Control 3`在更改上安装按钮和菜单`SSMS 2008 R2`并向其添加命令源代码控制和按钮时。但`SSMS 2012`没有改变应用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:18:52.910

SQL Source Control 不是源代码控制系统。它是一个从数据库创建 sql 脚本并将脚本提交到源代码控制系统的 shim，它确实带有 Git 的配置文件。

SQL Source Control 加载项*应该*出现在 SSMS 2012 中。如果没有以菜单项形式出现的证据，请先尝试重新安装它。

但是，如果您安装了 .net 4.5 beta，您*可能会遇到问题。*我不相信 SQL Source Control 支持这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:50:20.470

我搜索一下`Redgate`。要将 redgate 源代码控制添加到 SSMS 2012，必须使用 SQL Server 源代码控制的更新版本。

`Redgate SQL Source Control 3.0.13.4214`

# scala - Haskell、Scala、Clojure，高性能模式匹配和并发选择什么

> ID：11607020
> 
> 赞同：44
> 
> 时间：2012-07-23T05:42:53.880
> 
> 标签：scala, haskell, clojure, programming-languages, ocaml

在阅读了很多关于 FP 在并发执行和性能方面的优势的博客和帖子之后，我最近开始研究 FP。我对 FP 的需求很大程度上受到我正在开发的应用程序的影响，我的应用程序是一个基于状态的数据注入器，它可以插入另一个时间非常关键的子系统（接近每秒 200 万个事务）。我有几个这样的子系统需要测试。我正在认真考虑使用 FP 的并行性并希望采用正确的方法，SO 上的许多帖子都谈到了 Scala、Haskell 和 Clojure wrt 语言结构、库和 JVM 支持的优缺点。从语言的角度来看，我可以学习任何语言，只要它能帮助我达到结果。

某些帖子支持 Haskell 的模式匹配和语言的简单性，基于 JVM 的 FP 语言在使用现有的 java 库方面具有很大的优势。JaneStreet 是 OCAML 的大力支持者，但我真的不确定 OCAML 的开发人员支持和帮助论坛。

如果有人处理过如此大的数据，请分享您的经验。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-23T06:23:54.933

你想要*快速*还是想要*轻松*？

如果你想要快速，你应该使用 C++，即使你使用 FP 原则来帮助正确。由于时间至关重要，因此对软（和硬，如果需要）实时编程的支持将很重要。您可以准确地决定如何以及何时有时间恢复记忆，并且只在该任务上花费尽可能多的时间。

您所说的三种语言[都比接近最佳的手动调整的 C++ 慢 2-3 倍](http://benchmarksgame.alioth.debian.org/u64q/which-programs-are-fastest.html)，而且只有在以相当传统的命令式方式使用时。它们都使用垃圾收集，这将在您的事务中引入不受控制的随机延迟。

现在，就是说，要使用 C++ 以防弹的方式运行它需要做*很多工作。*应用 FP 原则需要相当多的样板文件（即使在 C++11 中），并且大多数库默认情况下是可变的。（编辑：Rust 正在成为一个不错的选择，但是足够详细地描述 Rust 超出了这个答案的范围。）

也许您没有时间并且有能力缩减其他规格。例如，如果关键的不是*时间*而是*吞吐量*，那么您*可能*需要 Scala 而不是 Clojure（请参阅[计算机语言基准游戏](http://benchmarksgame.alioth.debian.org/u64q/compare.php?lang=clojure&lang2=scala)，其中 Scala 在撰写本文时赢得了所有基准测试，*并且*几乎在每种情况下都具有较小的代码大小（编辑： CLBG 在这方面不再有帮助，尽管您可以在 Web 档案中找到支持这些声明的档案））；应该选择 OCaml 和 Haskell 是出于其他原因（类似的基准分数，但它们具有不同的语法和互操作性等）。

至于哪个系统具有最好的并发支持，Haskell、Clojure 和 Scala 都还不错，而 OCaml 则有点欠缺。

这几乎将其范围缩小到 Haskell 和 Scala。您需要使用 Java 库吗？斯卡拉。您需要使用 C 库吗？可能是哈斯克尔。你都不需要吗？然后，您可以根据自己喜欢的风格进行选择，而不必过分担心选择错误的人会使您的生活变得更加艰难。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-23T06:22:58.040

我已经使用 Clojure 完成了这项工作，由于以下原因，这被证明非常有效：

*   就库而言，在 JVM 上是一个*巨大的优势*。出于我的目的，这有效地排除了 Haskell 和 Ocaml，因为我们需要轻松访问 Java 生态系统并与基于 JVM 的工具（Maven 构建等）集成。
*   如果您需要严格优化内部循环，您可以使用纯 Java。我们为一些处理大型 double[] 数组的自定义代码执行此操作，但 99% 的时间 Clojure 可以为您提供所需的性能。有关如何使 Clojure 真正快速运行的一些示例，请参见[http://www.infoq.com/presentations/Why-Prismatic-Goes-Faster-With-Clojure （相当技术视频，假设有一些先验知识！）。](http://www.infoq.com/presentations/Why-Prismatic-Goes-Faster-With-Clojure)一旦您开始计算利用多个内核的难易程度，Clojure 在性能上就非常具有竞争力。
*   Clojure 有非常好的多核并发支持。事实证明，这对于管理并发任务非常有用。见[http://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey](http://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey)
*   REPL 为数据测试和探索性工作提供了一个非常好的环境。
*   Clojure 是*惰性*的，这使得它适合处理大于内存的数据集（假设您小心不要尝试将整个数据集一次强制放入内存）。在这样的环境中也有一些不错的库可用，最值得注意的是[Storm](https://github.com/nathanmarz/storm)和[Aleph](https://github.com/ztellman/aleph/)。Storm 对您来说可能特别有趣，因为它是为大量事件的分布式实时处理而设计的。

我不能说太多其他语言的经验，但我对 Haskell 和 Scala 的一些实践经验的印象是：

*   如果您关心静态类型的纯度和严格的函数式编程，Haskell 非常棒。静态类型可以是正确性的有力保证，因此可能使其适用于高度算法的工作。就个人而言，我发现纯 FP*有点*过于死板——很多时候可变状态很有用，我认为 Clojure 在这里有更好的平衡（通过通过托管引用允许受控的可变性）。
*   Scala 是一门很棒的语言，它与 Clojure 共享在 JVM 上的优势。对我来说，Scala 更像是一个“更好的 Java”，具有功能特性和令人印象深刻的类型系统。这不是从 Clojure 的范式转变。缺点是类型系统可能会变得非常复杂/令人困惑。

总的来说，我认为您可能会对其中任何一个感到满意。这可能会归结为您对 JVM 的关心程度以及您对类型系统的看法。

# iphone - 如何在应用程序启动时从应用程序委托加载不同的视图控制器类（即从应用程序委托）

> ID：11607024
> 
> 赞同：0
> 
> 时间：2012-07-23T05:43:14.593
> 
> 标签：iphone, objective-c, ios, xcode4, uiviewcontroller

我正在开发一个屏幕，我想根据条件加载视图控制器。即关于条件，它应该在应用程序启动时从应用程序委托加载特定的视图控制器类。

```
 if(condition success)
 { 
//Load viewcontroller1 
} else 
{ 
//Load  viewcontroller2
 } 
```

我怎样才能做到这一点。请帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:51:04.047

只需打开 Xcode，创建一个新项目，将其**设为 Universal** (iPad/iPhone)，您就会看到一个示例。它为您创建两个 .xib 文件。一个用于 iPad，一个用于 iPhone。

然后，应用程序委托执行以下操作：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
    } 
```

在这种情况下，它对`ViewController`两个 .xib 使用相同的类（ViewController.h 和 .m）。但是，您当然也可以改变这一点。只需进入 Xcode 图形设计器（以前是 Interface Builder）中的每个 .xib，选择 .xib，选择**File** **'s Owner**，然后在 Inspector 选项卡上（属性...通常在右侧），您可以从组合框。

 **所以，如果你需要一个不同的 Objective-C`UIViewController`子类，你可以这样做。请记住将上面的代码也更改为匹配（`[ViewController alloc]`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:51:24.903

你可以看到苹果也做了同样的事情。创建一个通用应用程序。在 appDelegate 你可以看到

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
} else {
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
} 
```

他们根据条件加载不同的视图控制器。**

# php - 将元素插入 PHP 多维数组

> ID：11607029
> 
> 赞同：1
> 
> 时间：2012-07-23T05:43:48.787
> 
> 标签：php, arrays, multidimensional-array

我有一个 PHP 表单，其中字段定义为`item[fieldname][]`，其中字段集通过 Jquery Clone 函数重复。

这些行在提交时发布如下

```
[item] => Array ( [itemdate] => Array ( [0] => 2012-07-10 20:44:05 [1] => 2012-07-12 20:44:17 )
                  [flditmname] => Array ( [0] => sdc [1] => sd ) 
                  [fieldtype] => Array ( [0] => 1 [1] => 2 ) 
                  [subscribe] => Array ( [0] => X [1] => X ) 
          ) 
```

现在我需要`item[id][]`在提交的每一行中插入一个元素（类似于事务号）。我对如何做到这一点感到困惑。我想到了两种方法：

1.  找到行数，然后通过迭代添加值。但是为此，我面临一个问题，即 PHP 计数函数没有返回正确的值（它将每个数组计数为一个而不是行）。我可以从第一个元素开始计数，但我不会知道它，因为我的字段是动态填充的。

2.  某种数组推送，它可以遍历行并将我的元素添加到值。

在这里寻求专家的帮助，我将如何做到这一点。或者有没有其他方法可以建议我如何处理标题项目交易过帐，其中每个项目都使用行项目编号（所有字段动态填充）引用标题交易 ID？结构大致如下：

**标题：** 文档 ID | 字段1 | 字段2 | ...

**项目：** 文档 ID | 行号 | 字段3 | 字段4 | ...

在发布过程中，文档 ID 将从数据库中作为*lastno+1*获取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:50:52.003

不确定您到底要做什么，但是这样的事情行不通吗？

```
foreach ($items as &$item)
{
     $item['id'][] = $id;
} 
```

* * *

**编辑：**

```
$key = key($items);

foreach ($items[$key] as $item)
{
     $items['id'][] = $id;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T06:51:38.720

```
foreach($items as $index => $array)
{
    $items[$index]['id']=$id;

} 
```

我知道这很旧，但仍然可以帮助寻找类似答案的人

# jquery - 当我的文本框为空时，将 NULL 值添加到数据库的最佳方法

> ID：11607030
> 
> 赞同：0
> 
> 时间：2012-07-23T05:44:06.560
> 
> 标签：jquery, asp.net, sql-server

**问题出在 executeScalar 上，我的 sql 语句没有返回任何内容**

我的表中有一些值是 Int32 类型的，其他的 datetime 类型是可以为空的。我想要的是当用户没有填充文本框来插入空值而不是“”（空白），这对于我的字段来说是不正确的类型。

![在此处输入图像描述](../Images/c2659e1aa7b46900078b9aa38d9b174c.png)

我试过这样的想法：

```
insertActor.Parameters.AddWithValue("@School2StartYear", String.IsNullOrWhiteSpace(txtSchool2StartYear.Text) ? (object)DBNull.Value : (object)Int16.Parse(txtSchool2StartYear.Text)); 
```

我必须为我的**15 个表（有 30 多个字段）执行此操作。**

我也看到了`.validate()`jQuery 的函数，但我根本没有尝试过。

我也看到了这个想法：`[DisplayFormat(ConvertEmptyStringToNull = true)]`

我必须在数据库中进行吗？添加''时将其转换为NULL？

**那么这是最好的方法吗？检查所有文本框是否为 IsNullOrWhiteSpace**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:23:42.387

我通常只排除参数：

```
Int16 school2StartYear;
if (Int16.TryParse(txtSchool2StartYear.Text, out school2StartYear) {
    insertActor.Parameters.AddWithValue("@School2StartYear", school2StartYear);
} 
```

您的 SQL 代码将声明该参数，`@School2StartYear smallint = NULL`以便如果该参数被排除在外，则将其`NULL`用作默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:33:00.127

异常可能是因为语句的结果为空，而不是因为你输入的值不正确。尝试像这样拆分执行：

```
object result = insertActor.ExecuteScalar();
newID = Int32.Parse(result.ToString()); 
```

我怀疑结果为空，这会在调用 ToString 方法时导致 NullReferenceException。

新 id 是否应该来自 return 语句、输出参数、select 语句？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T05:57:15.460

您可以检查 IsDBNull

```
Convert.IsDBNull (txtSchool2StartYear) ? 0:int.Parse (txtSchool2StartYear); 
```

# php - 对于一个 6 年了解 PHP 的人来说，ASP.Net 是否难以学习或工作？

> ID：11607031
> 
> 赞同：2
> 
> 时间：2012-07-23T05:44:07.323
> 
> 标签：php, asp.net, asp.net-mvc-3

如果我有 6 年 php 工作经验和 2 年 c# .net 经验。我学习和使用 ASP .net 或 VB .net 会不会很困难？

你会建议我学习哪些步骤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T05:50:22.373

好吧，这肯定不是那么难，因为

1.  您非常熟悉网络技术以及响应和请求的工作方式。
2.  您在 SO 上的分数表明您热衷于学习和帮助并获得帮助。
3.  您已经使用过 C#，因此您只需将 Asp.Net 基础知识付诸实践，并且您的 Web 知识已经存在。

在 asp.net 中有两个主要类别 1) Asp.net web 表单和 2) asp.net MVC；你可以选择任何，但 MVC 对你来说很容易，因为它有点类似于你在 PHP 中所做的事情，而 Web-Forms 也很容易处理。

祝你好运，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:50:03.267

如果您是 PHP 开发人员，我认为开始使用 ASP.NET MVC 进行开发并不难。您是否使用过 MVC 方法？PHP 有一些 MVC 框架，如果您了解什么是 MVC，那么开始使用 ASP.NET MVC 一定会更容易。
有很多教程视频。例如，您可以从[asp.net mvc 网站](http://www.asp.net/mvc)
开始， 也有许多书籍可以帮助您了解 ASP.NET MVC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T06:23:21.673

我认为编程中最重要的方面是你思考它的方式。当您对循环、If 语句和其他东西有良好的实践时，您可以使用手册切换到另一种语言。

正如 jigar 所说，您熟悉 HTML、CSS 和 JS 等 Web 技术，这些技术在所有服务器端语言中都是相同的。

我自己已经用 PHP 编码了 8 年，但去年有一个 ASP.NET 项目，我学习和切换得非常快。

# java - 在 wicket 中获取 CSS 值

> ID：11607039
> 
> 赞同：0
> 
> 时间：2012-07-23T05:45:26.323
> 
> 标签：java, css, wicket

在我的项目中，我遇到了在 wicket 类中获取 css 属性值的问题，假设我们有一些面板

```
public final class ExamplePanel extends Panel {

  public ExamplePanel(String id) {
      super(id);
      add(new Label("someText", "hello"));
  }} 
```

这个文件的 html 文件是

```
<html xmlns:wicket>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>ExamplePanel</title>
    <wicket:head>
        <link href="panel.css" rel="stylesheet"/>
        <script src="jquery.min.js"></script>
        <script src="jquery-ui.min.js"></script>

    </wicket:head>
</head>
<body>
    <wicket:panel>
        <div id="container" wicket:id="hello">
        </div>
    </wicket:panel>
</body> 
```

和下面的CSS

```
#parentContainer{
 width:500px;
 height: 500px;
 background:RGB(57,51,51);
 position:relative;
} 
```

我需要获取 css 代码的值，例如

```
public final class ExamplePanel extends Panel {

  public ExamplePanel(String id) {
      super(id);
      Label label = new Label("someText", "hello");
      add(label);
      // draft code
      //String height = label.getCssValue("height");
      // String position = label.getcssvalue("position");
  }} 
```

或者从这个div获取css值的任何其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:25:15.870

由于 CSS 应用于客户端，您唯一的机会是通过 JavaScript 获取值（Torr3nt 提到的 JQuery 方法是我所知道的最简单的方法）并使用 Ajax 将这些值发布回您的应用程序。

[这里](https://cwiki.apache.org/WICKET/calling-wicket-from-javascript.html)有关于如何从 JavaScript 调用 wicket 的描述。

# apex-code - 显示相关列表的 VF 页面

> ID：11607040
> 
> 赞同：-1
> 
> 时间：2012-07-23T05:45:34.233
> 
> 标签：apex-code, visualforce

我将类别表作为类别（主题文本），将 QA 表作为 QA（问题文本、答案文本、查找（类别））

我想创建一个 Visualforce 页面：

```
Category1.subject

   Question1   checkbox
   Answer1

   Question2   checkbox
   Answer2

Category2.subject
   Question3   checkbox
   Answer3

   Question4   checkbox
   Answer4. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:03:04.690

您可以使用数据表执行此操作，但使用嵌套重复执行此操作几乎肯定更容易，这些重复遍历您的类别，然后遍历每个类别的问题。

```
<apex:repeat value="{!categories}" var="cat">
    <div>{!cat.subject}</div>
    <br/>
    <apex:repeat value="{!cat.questions__r}" var="question" />
        <div>{!question.question_text__c}</div>
        <div>{!question.answer_text__c}</div>
    </apex:repeat>
</apex:repeat> 
```

然后您在控制器中对类别的查询将类似于以下内容

```
[select id, subject, (select question_text... from questions__r) from category__c] 
```

# php - 日期之间的 PHP 与请求的不匹配

> ID：11607046
> 
> 赞同：0
> 
> 时间：2012-07-23T05:46:11.440
> 
> 标签：php, sql, date, between

我有一个关于 between 和 join table 的问题。我在下面有一个代码：

```
SELECT t_submissions.badge_id,
       t_submissions.employee_name,
       t_submissions.dept_name,
       t_submissions.ot_date,
       t_submissions.ot_from,
       t_submissions.ot_to,
       t_submissions.remarks,
       t_submissions.submission_by,
       t_acknowledged.acknowledge_by,
       t_approved.approval_by
FROM   t_submissions,
       t_acknowledged,
       t_approved
WHERE  ot_date BETWEEN '01-Mar-2012' AND '30-Mar-2012'
       AND t_submissions.submission_no = t_acknowledged.submission_no
       AND t_submissions.submission_no = t_approved.submission_no; 
```

当我尝试编译此代码时，显示日期为 2012 年 3 月 1 日至 2012 年 3 月 30 日的数据。显示日期为 01-Jun-2012、02-Jul-2012 的示例数据。好吧，我认为我的代码有问题。需要你的建议。请帮忙。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:49:59.883

您需要将 varchar 转换为日期，然后进行比较。这是一个带有解决方案的类似线程。

[mySQL 将 varchar 转换为日期](https://stackoverflow.com/questions/4706289/mysql-convert-varchar-to-date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:55:57.197

正如我在评论中所说，您必须将日期字段的类型转换为`date`. 比较仅适用于`date`. 这是你的代码。我试着美化它。
此外，您应该在日期中使用月份的**数字表示。**

```
SELECT ts.badge_id, ts.employee_name,
       ts.dept_name, ts.ot_date,
       ts.ot_from, ts.ot_to,
       ts.remarks, ts.submission_by,
       ta.acknowledge_by, tp.approval_by
FROM t_submissions AS ts, t_acknowledged AS ta, t_approved AS tp 
WHERE ot_date BETWEEN '01-03-2012' AND '30-03-2012' 
AND ts.submission_no = ta.submission_no 
AND ts.submission_no = tp.submission_no; 
```

# c# - C# 紧凑框架中的单文件虚拟文件系统

> ID：11607047
> 
> 赞同：1
> 
> 时间：2012-07-23T05:46:11.550
> 
> 标签：c#, database, windows, windows-phone-7, xna

嘿，我正在尝试创建一个可以替换我当前存储系统的存储系统。

我需要能够以与使用 .Net 紧凑框架的 WP7、XBOX 和 PC 兼容的方式每秒相当快地保存 10 个文件，几乎没有垃圾创建。

最初在我正在制作的游戏中，我只是将文件保存到磁盘上，因为世界不同地区和其中的东西有 100 个文件（我已经尽我所能将文件折叠在一起），在后台线程上这些文件批量处理，然后分批写入，同时流式传输新文件。

虽然这对电脑来说很好，但在手机上人们会经常退出游戏或关闭手机，因此实际上只会保存 X of Z 文件，从而导致未知的保存文件状态。更糟糕的是，在 Xbox 上保存单个文件并将其提交到磁盘需要长达 1 秒的时间，并且还会产生大量垃圾（每分钟 > 30 mb），这会导致 Xbox 每次暂停 1-3 秒1-3 秒，因为它的“非常糟糕”的垃圾收集器每分配 1mb 的内存就运行一次。游戏中的其他所有内容都不会产生垃圾，并且会被池化和缓存，所以这也是一个问题。

因此，我随后迁移到使用单个文件使用 zip 系统存储所有内容。这可行，但很少会损坏 zip 文件，因为我以一种从未设计过的方式使用它...基本上我在游戏开始时加载文件，然后在它位于内存流中时保存到它并从中保存，然后根据播放器进度每 3-7 分钟我将单个文件转储到磁盘。

所以基本上 zip 文件（我已经尝试了 2 种实现）没有做我需要的。有谁知道是否还有其他东西可以满足我的需要，或者对我应该如何构建自己的想法有任何想法？

tldr;

所以简而言之，我需要一个系统

*   单个文件
*   可以存在于内存中，只需定期提交到本地磁盘
*   几乎不产生垃圾
*   .Net Compact 框架兼容（或与源代码，所以我可以这样做）
*   文件/结构编辑就地完成
*   可靠第一，性能第二
*   无需压缩或加密
*   不需要能够只加载文件的一小部分
*   可能是一种数据库/不必模仿文件结构

类似于这个问题[在这里](https://stackoverflow.com/questions/2336804/open-source-embedded-filesystem-or-single-file-virtual-filesystem-or-structure)

有人有想法么？

# cuda - CUDA 程序输出错误

> ID：11607050
> 
> 赞同：0
> 
> 时间：2012-07-23T05:46:23.780
> 
> 标签：cuda

这是我的第一个（抄袭）CUDA 程序；

```
 __global__  void vecAdd(float* A, float* B, float* C) 
  { 

      int i = threadIdx.x; 
      A[i]=0; 
      B[i]=i; 
      C[i] = A[i] + B[i]; 
   } 

   #include  <stdio.h> 
   #define  SIZE 10 
    int  main() 
   { 
        int N=SIZE; 
       float A[SIZE], B[SIZE], C[SIZE]; 
       float *devPtrA; 
       float *devPtrB; 
       float *devPtrC; 
       int memsize= SIZE * sizeof(float); 

       cudaMalloc((void**)&devPtrA, memsize); 
       cudaMalloc((void**)&devPtrB, memsize); 
       cudaMalloc((void**)&devPtrC, memsize); 
       cudaMemcpy(devPtrA, A, memsize,  cudaMemcpyHostToDevice); 
       cudaMemcpy(devPtrB, B, memsize,  cudaMemcpyHostToDevice); 

       vecAdd<<<1, N>>>(devPtrA,  devPtrB, devPtrC); 
       cudaMemcpy(C, devPtrC, memsize,  cudaMemcpyDeviceToHost); 

       for (int i=0; i<SIZE; i++)  
        printf("C[%d]=%f B[%d]=%f\n",i,C[i],i,B[i]); 

        cudaFree(devPtrA); 
       cudaFree(devPtrA); 
       cudaFree(devPtrA); 
   } 
```

这是输出：

erin@ubuntu:~$ nvcc -lcudart vecadd.cu

erin@ubuntu:~$ ./a.out

C[0]=0.000000 B[0]=0.000000

C[1]=0.000000 B[1]=0.000000

C[2]=-0.344699 B[2]=0.000000

C[3]=0.000000 B[3]=0.000000

C[4]=-0.344700 B[4]=0.000000

C[5]=0.000000 B[5]=0.000000

C[6]=0.000000 B[6]=0.000000

C[7]=0.000000 B[7]=0.000000

C[8]=0.000000 B[8]=-0.344690

C[9]=0.000000 B[9]=0.000000 erin@ubuntu:~$

这是在 Pathetic Panda(?) 12.04 上的 Ubuntu 64 位上。

谢谢你的帮助！

真挚地，

艾琳

* * *

预期的输出应该打印 和的`i`值。`B[i]``C[i]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:01:21.147

在我看来，您的 CUDA 调用 simple 根本不起作用。您确定系统中的所有内容都正确安装了吗？尝试以下操作：

在您的代码前加上：

```
void check() {
    cudaError_t err = cudaGetLastError();
    if (err != cudaSuccess) {
        printf("%s\n",cudaGetErrorString(err));
    }
    exit(1);
} 
```

并`check()`在每个 CUDA 调用之后放置。您可能希望以某种方式在更大的代码中自动执行此操作，但出于测试目的，它应该就足够了。如果有问题，您应该会收到一条人类可读的消息。就我而言，我得到了：

```
CUDA driver version is insufficient for CUDA runtime version 
```

我需要更新它；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:16:19.817

首先，没有 cudaMemcpy 调用来复制回主机阵列 B，您需要添加`cudaMemcpy(B, devPtrB, memsize, cudaMemcpyDeviceToHost);`. 然后尝试用它替换设备代码

```
 #include "device_launch_parameters.h"
    __global__  void vecAdd(float* A, float* B, float* C) 

  {     
      int i = threadIdx.x; 
      A[i]=0; 
      B[i]=(float)i; 
      C[i] = (float)(A[i] + B[i]); 
   } 
```

device_launch_parameters.h 标头包含 threadIdx.x 调用的定义，类型转换为 float 是可选的，在我的情况下，此代码在没有它的情况下工作正常。

# asp.net - 命名空间在类文件中不可见

> ID：11607056
> 
> 赞同：1
> 
> 时间：2012-07-23T05:47:17.743
> 
> 标签：asp.net

我正在使用 vs 2008 创建 Web 应用程序。我想创建 sql_Helper 类。我知道 Web 应用程序不包含 App_Code 文件夹。我在我的 Web 应用程序中手动创建文件夹 app_code 并将类放入其中。但是命名空间 system.Data.sqlClient 和 System .Web.Configuration 不可见，但可见其他不在 app_code 中的网页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:50:35.530

确保您引用了这些 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:57:24.573

App_Code 文件夹不适用于 Web 应用程序。

App_Code 文件夹是一个特殊的 ASP.NET **RUNTIME**文件夹...当您的站点实际在服务器上运行时，此文件夹中的任何文件都由 ASP.NET 编译...这实际上允许您将随机类/代码文件放到此文件夹中在服务器端编译。

在您在编译时编译成 dll 的 Web 应用程序中，这将是一个问题。

App_Code 文件夹用于网站项目，而不是用于 Web 应用程序项目。

如果您确实想调用您的文件夹 App_Code，请将其中的类标记为具有编译操作的构建操作。

# postgresql - 使用嵌套选择优化查询

> ID：11607059
> 
> 赞同：1
> 
> 时间：2012-07-23T05:48:06.153
> 
> 标签：postgresql, query-optimization

是否可以优化以下查询？ `webdte.docto`a 是一个非常大的表，包含数百万个条目，并在所有查询列上运行索引。最后的排序顺序非常重要。

```
SELECT 
   id_doc,
   id_tip_doc,
   id_est_doc,
   folios.nro_fol,
   seleccionable
FROM
(
   SELECT distinct(nro_fol)
   FROM webdte.docto 
   WHERE
      id_tip_doc IN
      (
         SELECT distinct(id_tip_doc)
         FROM webdte.docto
         WHERE id_doc IN
         (
            SELECT id_doc
            FROM webdte.lib_doc
            WHERE id_lib = 37
         )
      ) AND
      id_doc IN
      (
         SELECT id_doc
         FROM webdte.lib_doc
         WHERE id_lib = 37
      )
) AS folios JOIN webdte.docto AS docs ON docs.nro_fol = folios.nro_fol
ORDER BY id_tip_doc, folios.nro_fol, id_est_doc; 
```

抱歉，这是我的第一个查询方法的解释。平等主义的答案已经很好，但也许它还可以更快？谢谢！

```
Sort  (cost=13745.13..13805.42 rows=24115 width=22)"
  Sort Key: docs.id_tip_doc, docto.nro_fol, docs.id_est_doc"
  ->  Hash Join  (cost=9240.19..11492.84 rows=24115 width=22)"
        Hash Cond: (docto.nro_fol = docs.nro_fol)"
        ->  HashAggregate  (cost=4424.81..4665.91 rows=24110 width=6)"
              ->  Hash Semi Join  (cost=733.75..4364.54 rows=24110 width=6)"
                    Hash Cond: (docto.id_doc = lib_doc.id_doc)"
                    ->  Seq Scan on docto  (cost=0.00..2885.28 rows=105128 width=10)"
                    ->  Hash  (cost=432.38..432.38 rows=24110 width=4)"
                          ->  Seq Scan on lib_doc  (cost=0.00..432.38 rows=24110 width=4)"
                                Filter: (id_lib = 37)"
        ->  Hash  (cost=2885.28..2885.28 rows=105128 width=22)"
              ->  Seq Scan on docto docs  (cost=0.00..2885.28 rows=105128 width=22)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:53:15.527

我认为您可以简化为：

```
SELECT id_doc
      ,id_tip_doc
      ,id_est_doc
      ,nro_fol
      ,seleccionable
FROM   webdte.docto d
WHERE  EXISTS (
   SELECT 1
   FROM   webdte.docto   d0
   JOIN   webdte.lib_doc l USING (id_doc)
   WHERE  l.id_lib = 37
   AND    d0.nro_fol = d.nro_fol
   )
ORDER  BY id_tip_doc, nro_fol, id_est_doc; 
```

因为`EXISTS`,`DISTINCT`不应该是必需的。如果 上有很多重复项，这可以大大加快查询速度`nro_fol`。
您的原始查询非常多余。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:17:41.690

我认为获取唯一 id_tip_doc 的 where 子句并不重要，因为无论如何您都在选择 distinct(nro_fol)。尽管优化此查询的最佳方法之一是使用正确的索引，然后重新编写查询。

您可以创建以下索引（尽管它也取决于您的其他查询）： 1\. webdte.lib_doc : id_lib 2\. webdte.docto : id_doc + nro_fol

```
select id_doc,id_tip_doc,id_est_doc,  folios.nro_fol ,seleccionable 
```

from (select distinct(nro_fol) from webdte.docto where id_doc in (select id_doc from webdte.lib_doc where id_lib = 37) )
folios join webdte.docto docs on docs.nro_fol = folios.nro_fol order by id_tip_doc, folios.nro_fol, id_est_doc ;

# ffmpeg-php - FFMPEG PHP 似乎不起作用

> ID：11607062
> 
> 赞同：0
> 
> 时间：2012-07-23T05:48:24.980
> 
> 标签：ffmpeg-php

我正在尝试安装 FFMPEG-PHP 以进行后端视频转换并捕获我网站上传的视频用户的缩略图。但是我遇到了问题，我不确定它到底是什么。

**环境：** Ubuntu Server 12.04 PHP5和Apache2（没有使用LAMP包。单独安装。）

要安装 ffmpeg，我遵循了本教程[http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide](http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)。

**在命令行上工作：** 当我尝试从命令行进行转换时，它可以工作。

`avconv -i test.mp4 test.flv`- 工作 `ffmpeg -i test.mp4 test.flv`- 工作，说使用 avconv

文件夹权限已更改为 R 777。

**phpInfo():**

*   ffmpeg-php 版本：0.6.0-svn
*   ffmpeg-php 构建于：2012 年 2 月 25 日 17:59:17
*   ffmpeg-php gd 支持：启用
*   ffmpeg libavcodec 版本：Lavc53.34.0
*   ffmpeg libav格式版本：Lavf53.20.0
*   ffmpeg swscaler 版本 SwS2.1.0

我在某处阅读以尝试以下代码，

```
extension_loaded('ffmpeg') or die('Error in loading ffmpeg'); 
```

如果扩展加载成功，上面的代码不应该给出任何输出。我的没有显示任何错误。

PHP中的代码不起作用，

```
exec("ffmpeg -i test2.mp4 test2.flv", $command_output, $result);
if ($result !== 0) {
echo 'Command failed!<br>';
print_r($command_output);
die();
}
echo 'success!';
print_r($command_output); 
```

它将 Command failed 打印为空数组 Array ( )。

希望有人可以帮助指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:08:30.927

感谢大卫指出 api。FFMPEG-PHP 一直在工作。我现在可以创建视频的图像。如果有人有类似的问题，代码如下。

来源：http: [//itwigle.com/twig/Capturing_video_thumbnails_with_PHP](http://itwigle.com/twig/Capturing_video_thumbnails_with_PHP)

```
<?php
if (! extension_loaded (ffmpeg)) exit ('ffmpeg was not loaded ');
$movie_file = "test2.mp4";

// Instantiates the class ffmpeg_movie so we can get the information you want the video  
$movie = new ffmpeg_movie($movie_file);  

//Need to create a GD image ffmpeg-php to work on it  
$image = imagecreatetruecolor($width, $height); 

//Create an instance of the frame with the class ffmpeg_frame  
$frame = new ffmpeg_frame($Image);  

//Choose the frame you want to save as jpeg  
echo $thumbnailOf = $movie->getFrameRate() * 5;  

//Receives the frame  
$frameImg = $movie->GetFrame($thumbnailOf);

// Resizes the frame to 200, 100
//$frameImg-> resize(200, 100);  

//Convert to a GD image  
$image = $frameImg->toGDImage(); 

//Save to disk.  
imagejpeg($image, $movie_file.'.jpg', 100); 
?> 
```

但是我在将视频从 mp4 转换为 flv 时仍然遇到问题。希望有人可以帮助我进行转换。

# jquery - 使用多个下拉列表从多个选项中选择首选项

> ID：11607070
> 
> 赞同：0
> 
> 时间：2012-07-23T05:50:20.567
> 
> 标签：jquery, drop-down-menu

我如何在 jquery 中设计具有公共菜单的多个下拉列表，这样当一个人被要求使用三个下拉列表选择三个首选项时，当前下拉列表应该只有那些以前未选择的公共菜单中的选项

示例：
[下拉列表 1].......[下拉列表 2]............[下拉列表 3]
agra ：已选择.............德里............ ......马图拉德里
............................马图拉...... .....................德里：选定
的马图拉...................... ....阿拉哈巴德：选择
阿拉哈巴德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:31:43.747

好吧，这就是多选列表的用途，但如果你真的想要三个单独的下拉菜单，这里有一些我为你准备的东西：

```
var $one = $("#one"),
    $two = $("#two"),
    $three = $("#three"),
    $options = $one.children().clone();

$one.change(function() {
    var oneVal = $one.val(),
        twoVal = $two.val();
    $two.empty()
        .append($options.clone().filter(function(){
                                  return this.value != oneVal; }))
        .children().filter(function(){ return this.value == twoVal; })
        .prop("selected",true);
    $two.change();
});

$two.change(function() {
    var oneVal = $one.val(),
        twoVal = $two.val(),
        threeVal = $three.val();
    $three.empty();
    if (twoVal === "")
        return;        
    $three.append($options.clone().filter(function() {
            return this.value != twoVal && this.value != oneVal;
        }))
        .children().filter(function(){ return this.value == threeVal; })
        .prop("selected",true);
}); 
```

演示：http: [//jsfiddle.net/G89m2/](http://jsfiddle.net/G89m2/)

这假设您有类似于我的演示中的 html，即，在第一个下拉列表中定义了可用选项。

一些浏览器不允许你使用 CSS 来隐藏选项元素，所以我采取的方法是，当第一个下拉列表中的选择发生变化时，它会从第二个和第三个中删除选项，并只放回不同的选项. 如果在第二个和第三个中有先前的选择，如果它仍然可用，它会恢复它。

# sql - 使用接口和私有代码在组件中组织 SQL

> ID：11607074
> 
> 赞同：1
> 
> 时间：2012-07-23T05:50:37.883
> 
> 标签：sql, stored-procedures, interface, sql-server-2008-r2, components

我正在修改一个在 SQL (MS SQL Server 2008 R2) 中实现了很多逻辑的应用程序。从逻辑上讲，业务逻辑可以拆分为许多不同的组件。

当前的实现非常非结构化：每个过程、函数、视图在任何地方访问和写入数据。我想将应用程序组织成更小的单元，就像使用 JavaEE 应用程序一样：具有公共接口的小型 JAR，但隐藏了持久层和业务逻辑实现。

除了“私有接口表或存储过程”之外，是否有任何默认概念如何定义“公共接口表或存储过程”。在第一步中，使用命名约定可能就足够了。但如果有更好的方法，请告诉我。

[编辑] 由于我们仅限于使用 MS SQL Server：您如何看待在同一数据库中为每个模块定义单独方案的概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:58:38.743

There's no real equivalent to this other than access control of the database tables and procedures, which is different from how a OO system organizes visibility.

The best case scenario would be to move as much logic from the sprocs into the application layer and deal with the messiness there. If this isn't likely to happen, I would consider refactoring your functions so that they perform only single operations (logically). If necessary, you could group similar sprocs under a single one and have the application layer operate only through those functions.

# rails-admin - 在 Rails Admin 中添加自定义操作

> ID：11607080
> 
> 赞同：7
> 
> 时间：2012-07-23T05:51:04.937
> 
> 标签：rails-admin

似乎 Rails 管理员的文档真的很差我能找到的是这个链接[https://github.com/sferik/rails_admin/wiki/Custom-action](https://github.com/sferik/rails_admin/wiki/Custom-action)

但是在这个链接中没有提到如何在 rails admin 中使用自定义操作和视图，只安装插件，它接下来会做什么。我什至没有足够的时间查看 Rails 管理代码并弄清楚如何去做

我想要的是可以在[这里的屏幕截图中引用](http://s3.amazonaws.com/awesome_screenshot/521882?AWSAccessKeyId=0R7FMW7AXRVCYMAPTPR2&Expires=1343022984&Signature=fO5ajvxG%2bRNTvLjZBHrTUes1lJs=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-16T12:05:27.507

Rails 管理员更新了他们的 wiki，但它不在您提到的链接中。

相反，他们将其放置在[Actions wiki](https://github.com/sferik/rails_admin/wiki/Actions)本身中。

这更详细，可能更全面。

# avfoundation - AVPlayer Slider 寻求向后问题

> ID：11607085
> 
> 赞同：9
> 
> 时间：2012-07-23T05:51:52.953
> 
> 标签：avfoundation, uislider, avplayer, seekbar, avplayerlayer

我正在使用 AVplayer 在我的应用程序中播放视频。我正在使用**seekToTime:toleranceBefore:toleranceAfter:**

使用滑块搜索视频，所以问题是当您**向前滑动时，**视频搜索**完美（看起来视频移动得更快）**但是**向后滑动**视频在向后滑动时看起来很**生涩（基本上不如滑动 florward 显示的平滑）** . 有谁知道问题是什么，或者我做错了什么。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T23:47:34.550

我在 iPhone 上遇到了同样的问题。这是清单：

1.  确保提供PreciseDurationAndTiming 返回YES
2.  确保 canPlayReverse 为 YES（我猜有些编解码器不支持它。）
3.  不要使用最高质量。

AVCaptureSession 默认为高质量捕获。如果您想要如丝般顺滑的反转，您需要使用较低质量的设置，即使在 iPhone 5 上也是如此。由于大多数编解码器都针对正向解压缩进行了优化，因此反转需要更多的计算。

作为一种解决方法，如果您需要高质量的捕捉，您可以捕捉到高分辨率格式，导出为低分辨率格式并使用它进行编辑，然后使用时间修剪原始的高分辨率图像。我正在考虑在我自己的应用程序中这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:43:29.310

我认为这是因为当您向后流式传输时缓冲区变空。请对 bufferIsEmpty 值执行 KVO。这可能是因为在您的应用程序中可能会在其他资源方面使用大量内存。测试这一点的最佳方法是创建另一个项目并尝试相同。只需尝试使用 AVPlayerQueue 而不是 AVPlayer 并查看结果。

# vagrant - 在 virtualbox 上查看 localhost

> ID：11607090
> 
> 赞同：0
> 
> 时间：2012-07-23T05:53:11.277
> 
> 标签：vagrant, virtualbox

我有一台 linux mint 机器，使用 Vagrant 在虚拟机中运行 ubuntu 服务器。我正在尝试从我的造币厂查看 ubuntu 服务器的本地主机。

我的 Vagrantfile 有以下行未注释：
`config.vm.forward_port 80, 8080`

我的 virtualbox 在 10.0.2.15 处显示 eth0 - 但是，在设置了在 virtualbox 上的 8080 上侦听的虚拟主机之后，转到此地址（来自 mint 机器）不会在端口 80 或 8080 访问 virtualbox 的 apache 实例。

我承认我在这里有点不习惯，第一次和流浪汉一起工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:53:13.900

如果您在 8080 上转发了端口 80，您应该能够使用此 url localhost:8080 从主机访问您的 Web 服务器

如果您想了解更多详细信息，请尝试 curl -v 'http://localhost:8080/'

# redis - hiredis blpop 用法

> ID：11607091
> 
> 赞同：0
> 
> 时间：2012-07-23T05:53:12.577
> 
> 标签：redis

我正在写一个小程序。我正在使用 zmq，一旦客户端发送了一些数据，具有两个线程的服务器会在一个线程中接收这些数据。该线程添加了一些额外的信息，并且必须写入 redis。第二个线程应该在 redis 上被阻塞，以接收通过第一个线程发生的任何更新。第二个线程应该得到第一个线程推送的所有这些数据。

有 RPUSH 和 BLPOP 操作。我很想拥有一个 cpp 客户端，但看起来那里的功能有限。我要和hiredis一起去（官方支持）。我能否提供一些关于我需要使用哪些 API 来实现我需要的功能的指示？

感谢帮助。

# ios - 单击 Xcode 4.3.3 时保持 A 按钮突出显示

> ID：11607092
> 
> 赞同：1
> 
> 时间：2012-07-23T05:53:18.817
> 
> 标签：ios, xcode, uibutton, storyboard

我有一个应用程序需要某个按钮在按下时保持突出显示。按下此按钮时应保持突出显示，以通知用户特定页面已添加到收藏夹。并且可以解压。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:03:55.707

```
 [yourButton setImage:[UIImage imageNamed:@"normalState.png"] forState:UIControlStateNormal];
    [yourButton setImage:[UIImage imageNamed:@"highlightedState.png"] forState:UIControlStateSelected];
    [yourButton setImage:[UIImage imageNamed:@"highlightedState.png"] forState:UIControlStateSHighlighted]; 
```

设置此图像首选项以及您想要调用的任何时间

```
 [yourButton setSelected:YES]; 
```

这会将您的按钮更改为突出显示状态。您可以通过执行将其更改为正常

```
 [yourButton setSelected:NO]; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-21T19:41:05.973

上面的答案一切都很好，除了可能导致问题的错字。 UIControlStateSHighlighted 应该是 UIControlStateHighlighted

这里有更多例子

[http://www.guyford.co.uk/showpage.php?id=279&page=XCode_IPhone_/_iPad_Development_-_Highlighting_a_Button_and_setting_its_image](http://www.guyford.co.uk/showpage.php?id=279&page=XCode_IPhone_/_IPad_Development_-_Highlighting_a_Button_and_setting_its_image)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T05:58:32.847

是的，只需为按钮保留一个图像以显示高亮状态，就像这样。

```
[myBtn setImage:@"highlightedImage.png" forState:UIControlStateHighlighted]; 
```

现在，在按钮检查突出显示版本和普通版本的方法中

```
-(IBAction) startWorkoutClicked:(id)sender
{
     if(btnStart.highlighted)
     {
         btnStart.highlighted = NO; //btn changes to normal state
     }
     else
     {
         btnStart.highlighted = YES; //btn changes to highlighted state 
     } 
} 
```

# java - 我在哪里可以找到 JSR-275 替代品？

> ID：11607094
> 
> 赞同：0
> 
> 时间：2012-07-23T05:53:30.903
> 
> 标签：java, jsr

[JSR-275](http://www.jcp.org/en/jsr/detail?id=275)已经停产，并且很快就会从 javax 命名空间中删除，据我通过谷歌搜索得知。[据说org.unitsofmeasurement](http://www.unitsofmeasurement.org/)有一个替代品，但 API 似乎与 JSR-275 完全不同。据说[jscience](http://jscience.org/)是一个替代品，但似乎没有可以依赖的带有人工制品（如 JAR）的 maven 存储库。

我是否遗漏了什么，或者这只是我需要下载源代码、构建自己的 JAR 并忽略 Internet 上的混乱的事情之一？

如果我这样做，有哪些选择？有没有一个很好的源代码下载选项，或者我只需要获取 jsr-275 1.0-beta-2 jar 之类的副本并将其存放在我自己的仓库中？这似乎有点冒险，因为未来的 Java 升级（Java 9？）可能会破坏与一些旧 jar 的兼容性。

你是如何处理这个问题的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:13:36.490

在寻找 JSR-275 替代品时，我发现了 Eclipse UOMo [http://www.eclipse.org/uomo/](http://www.eclipse.org/uomo/)。

它仍处于孵化阶段，但看起来很有希望。

不知道他们是否有 Maven 存储库，但它完全兼容 OSGi，这很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-20T08:14:03.697

JSR-275 的官方替代品是[JSR-363 Units of Measurement API](https://jcp.org/en/jsr/detail?id=363)。有不同的实现（另请参阅[JSR 363 Implementation and Adoption](https://jcp.org/aboutJava/communityprocess/ec-public/materials/2017-05-08/JSR363_IMPL_JCP_EC_May_2017.pdf)），我会推荐参考实现[Indriya](https://github.com/unitsofmeasurement/indriya)，因为它似乎是 Maven Central 提供的稳定的 Java 8（2.0）甚至 Java 9/12/14 实现（2.1）。

更多详细信息可以在官方[计量单位](http://unitsofmeasurement.github.io)项目网站上找到。

# objective-c - 为导航栏设置背景图像有时显示不正确

> ID：11607096
> 
> 赞同：1
> 
> 时间：2012-07-23T05:53:38.020
> 
> 标签：objective-c, cocoa-touch, uinavigationbar

![在此处输入图像描述](../Images/103e8d57a4df147f604ddab1bb63eeb0.png)

如果我正在设置导航栏背景图像，它在应用程序中可以正常工作，但如果我从我的邮件编辑器打开这个屏幕，它会中断。谁能告诉我这段代码有什么问题？

```
UIImage *gradientImage44 = [[UIImage imageNamed:@"image.png"]
                                    resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
[[UINavigationBar appearance] setBackgroundImage:gradientImage44 
                                           forBarMetrics:UIBarMetricsDefault];

@implementation UINavigationBar (CustomBackground)

- (void)drawRect:(CGRect)rect
{
    UIImage *navBackgroundImage = [[UIImage imageNamed:@"image.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:0.0];
    [navBackgroundImage drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}

@end 
```

# c# - 检查字符串C#中是否有电话号码

> ID：11607103
> 
> 赞同：1
> 
> 时间：2012-07-23T05:54:48.707
> 
> 标签：c#, regex, string

我读了一个包含所有类型字符的字符串。我想检查字符串中是否有，由至少 7 位数字组成的子字符串。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T05:56:11.110

使用正则表达式

```
[0-9]{7,}

bool includesPhone = Regex.IsMatch("phone number 123456789", "[0-9]{7,}"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:57:03.497

使用`Regex`- 类似的东西`\d{7,}`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T06:06:06.517

用这个：`var match= Regex.Match(s,"\d{7}")`

这里 s 是你的字符串。现在 match 包含与模式匹配的数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T05:57:00.520

您可以为此任务使用正则表达式。正则表达式模式取决于电话号码的格式......

# json - 将猫鼬模型引导到 BackboneJS

> ID：11607105
> 
> 赞同：3
> 
> 时间：2012-07-23T05:54:59.067
> 
> 标签：json, backbone.js, mongoose, express

我定义了以下嵌入式文档 Mongoose 模型

```
 var mongoose = require("mongoose");
    module.exports = function(mongoose) {
        var Schema = mongoose.Schema,
            chapters, articles;

        Articles = new Schema({
            identity: Number,
            order: Number,
            quick_title: String,
            full_title: String,
            last_edited: Number,
            contributor: [String],
            content: String,
            video_link: String,
            presentation_link: String,
            question_id: [Number],
            show_in_chapter: Boolean,
            summary_text: String,
            summary_image: String
        });
        chapters = new Schema({
            order: Number,
            title: String,
            articles: [Articles]
        });

        return mongoose.model('chapters', chapters);
    } 
```

通过 .find 获取整个模型数据库后，我目前正在尝试使用作者推荐的方法（使用 EJS 模板引擎）将其引导到一个主干JS模型中：

```
 var Chapters = Backbone.Collection.extend({});
    chapters = new Chapters( JSON.stringify(<%=chapters%>)); 
```

我已经尝试了很多方法让它工作，使用上面的代码它会给我错误 Unexpected SyntaxError Unexpected Number (参考第一个标题是第 1 章)

关于如何将此 Mongoose 模型转换为 Backbonejs 模型的任何想法？谢谢！

更新：

通过在将其发送到模板然后在模板中使用 stringify 使其工作，并用括号覆盖它：`chapters = new Chapters("(" + <%-chapters2%> + ")");`

不幸的是，这并没有给我想要的 Backbone 集合。当我'console.log(chapters.toJSON());'时，它只给了我以下

```
[
Object
([object Object],[object Object],[object Object],[object Object]): Object
__proto__: Object
] 
```

使用 .at 方法时，在 (0) 处也只有一个模型。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:58:44.243

如果您没有在服务器上进行 JSON.stringify，请尝试使用 <%-chapters%> 进行未转义缓冲

```
chapters = new Chapters(<%- JSON.stringify(chapters) %>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:07:43.147

要在更新后回答您的问题，如果您在服务器端使用 JSON.stringify，以下内容适用于我

```
var Chapter = Backbone.Model.extend({});
var Chapters = Backbone.Collection.extend({
    model: Chapter
});
var collection = new Chapters(<%-names%>);
console.log(collection.toJSON()); 
```

# drupal - 将变量从 template.php 传递到 page.tpl

> ID：11607106
> 
> 赞同：2
> 
> 时间：2012-07-23T05:55:01.953
> 
> 标签：drupal, variables, drupal-7

我对drupal 很陌生，我需要查询一个表并将该查询的结果作为变量传递给我的page.tpl 文件。我已经尝试了几个小时，但我发现没有任何效果。

template.php 中的 php 代码

```
<?php
 $result = db_select("SELECT COUNT(node.nid) AS num FROM node WHERE node.type = 'service'");
 foreach ($result as $record) {
    $number = $record->num;
 }
 return $number; 
```

我什至尝试添加一个，`echo 'hello world';`但也没有出现。

page.tpl 中的代码

```
 <?php if ($number > 0) { ?>
    testing
 <?php } ?> 
```

有两个类型为服务的节点。任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T08:36:48.657

您需要在 template.php 文件中使用挂钩。

例如（将 THEME_NAME 替换为您的主题名称）：

```
function THEME_NAME_preprocess_page(&$vars) {   
    $vars['foo'] = "bar";
} 
```

这会将一个名为“foo”的变量传递给您的 page.tpl.php 文件。

# http - 在渲染之前传递给另一个闭包的 Grails 域模型

> ID：11607118
> 
> 赞同：0
> 
> 时间：2012-07-23T05:56:47.457
> 
> 标签：http, grails

我想问一下是否可以关闭渲染表单和验证输入，然后让另一个控制器持久化？我与下面的这行代码有关：

```
def create() {
    if(params.size() <= 2) {
        [modelInstance: new <Domain>()]
    } else {
        def model = new <Domain>(params)
        if(!model.validate()) {
            render(view:"create", model: [modelInstance: model])
            return
        } else {
            chain(action:"save", model: [modelInstance: model])
        }
    }
}

def save() {
//  where the modelInstance object was created from the create closure
    if (!modelInstance.save(flush: true)) {
        render(view: "create", model: [modelInstance: modelInstance])
        return
    }

    flash.message = "Sucess!"
    redirect(action: "show", model: [modelInstance: modelInstance])
} 
```

> **注意：**第二个闭包`save`没有要渲染的 .gsp 文件，它只做持久性然后重定向进程，要么通过，要么失败。

当我在闭包中使用第一个 modelIstance 时`save`，页面返回`HTTP 405`错误。这是因为我们找不到`model`对象，但我们使用了`chain`方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:55:56.383

看起来您正在尝试使用更适合私有辅助方法的链。尝试将两个控制器中所需的逻辑封装在一个单独的方法中。

# c# - Asp.Net MVC 3 自定义模型绑定与变量对象

> ID：11607121
> 
> 赞同：5
> 
> 时间：2012-07-23T05:56:57.370
> 
> 标签：c#, asp.net-mvc, model-binding

我的实体：（ PersonModel 应该有一个 AddressOne 或 AddressTwo 类型的地址（可能还有其他），因此 PersonModel 有一个地址字段的对象类型。）

```
public class Person
{
    public int PersonId { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }
    public object Address { get; set; }
}

public class AddressOne
{
    public string Street { get; set; }
    public string City { get; set; }
}

public class AddressTwo
{
    public string Province { get; set; }
    public string State { get; set; }
} 
```

模型：（我在 typeOfAddress 中传递了一个隐藏字段以匹配表单提交后的正确地址）

```
public class PersonModel
{
    private System.Type _typeOfAddress;
    private object _address;

    [Required]
    public int PersonId { get; set; }
    [Required]
    public string Name { get; set; }
    [Required]
    public string Surname { get; set; }

    public System.Type typeOfAddress
    {
        get { return _typeOfAddress; }
        set { _typeOfAddress = value; }
    }

    public object Address
    { 
        get {
            return _address;
        } 
        set {
            _address = value;
            _typeOfAddress = _address.GetType(); 
        } 
    }
}

public class AddressOneModel
{
    [Required]
    public string Street { get; set; }
    [Required]
    public string City { get; set; }
}

public class AddressTwoModel
{
    [Required]
    public string Province { get; set; }
    [Required]
    public string State { get; set; }
} 
```

我的观点（对于地址字段，我有此代码中省略的广告编辑器模板）：

```
@using (Html.BeginForm()) {

<ul>
<li> 
    PersonId: @Html.EditorFor(model => model.PersonId)
</li>
<li>
    Name: @Html.EditorFor(model => model.Name)
</li>
<li>
    Surname: @Html.EditorFor(model => model.Surname)
</li>
<li>
    Address:
</li>
<li>
    @Html.HiddenFor(model => model.typeOfAddress)
    @Html.EditorFor(model => model.Address)
</li>
</ul>
<button type="submit">Submit</button>

} 
```

然后是我的控制器：（在此示例中，我在模型中加载 AddressOne 但应该是一或二取决于运行时...）

```
 [HttpGet]
    public ActionResult Index()
    {
        PersonModel myPerson = new PersonModel();

        myPerson.PersonId = 1;
        myPerson.Name = "Michael";
        myPerson.Surname = "Douglas";

        AddressOneModel Address = new AddressOneModel();
        Address.Street = "5th Avenue";
        Address.City = "New York";

        myPerson.Address = Address;

        return View(myPerson);
    }

    [HttpPost]
    public ActionResult Index([ModelBinder(typeof(PersonModelBinder))]PersonModel myPerson)
    {
        if (ModelState.IsValid) { 
            // some things here
        }
        return View();
    } 
```

然后是 PersonModel 的模型绑定器：

```
public class PersonModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        PersonModel bindedModel = new PersonModel();

        foreach (var Property in typeof(PersonModel).GetProperties())
        {
            PropertyInfo info = bindedModel.GetType().GetProperty(Property.Name); 
            object castedInfo = new object();

            var uType = info.PropertyType;
            if (uType == typeof(string))
            {
                castedInfo = bindingContext.ValueProvider.GetValue(Property.Name).AttemptedValue.ToString();
            }
            else if (uType == typeof(Type))
            {
                castedInfo = Type.GetType(bindingContext.ValueProvider.GetValue(Property.Name).AttemptedValue.ToString());
            }
            else if (uType == typeof(object))
            {
                string objType = bindingContext.ValueProvider.GetValue("typeOfAddress").AttemptedValue; 
                object address = (object)Activator.CreateInstance(Type.GetType(objType));

                // another foreach as previous
            }
            else
            {
                object uCasted = (object)Activator.CreateInstance(info.PropertyType);
                uCasted = Convert.ChangeType(bindingContext.ValueProvider.GetValue(Property.Name).AttemptedValue, Property.PropertyType);
                castedInfo = uCasted;
            }
            info.SetValue(bindedModel, castedInfo, null);
        }
        return bindedModel;
    } 
```

这是实现 PersonModel 绑定的正确方法吗？那么 [Post] 控制器中的验证呢？

我还看到了一种以如下方式使用 DefaultBinder 的方法：

```
[ModelBinderType(typeof(PersonModel))]
public class PersonModelBinder : DefaultModelBinder
{
     //...
} 
```

但我在 MVC3 中没有找到 ModelBinderType 的任何参考！！有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T02:26:53.610

看起来你正试图以艰难的方式做到这一点。您不需要模型活页夹。我要做的是将每种类型的地址添加到模型中，并在页面上显示不为空的地址。这样可以省去很多麻烦。

```
public class PersonModel : IValidatableObject 
{
    private System.Type _typeOfAddress;
    private object _address;

    [Required]
    public int PersonId { get; set; }
    [Required]
    public string Name { get; set; }
    [Required]
    public string Surname { get; set; }

    public System.Type typeOfAddress
    {
        get { return (AddressOne ?? AddressTwo ?? AddressThree).GetType(); }
    }

    public AdressOneModel AddressOne {get;set;}
    public AdressTwoModel AddressTwo {get;set;}
    public AdressThreeModel AddressThree {get;set;}
} 
```

然后也许在页面上这样做

```
@using (Html.BeginForm()) 
{
    <ul>
    <li> 
        PersonId: @Html.EditorFor(model => model.PersonId)
    </li>
    <li>
        Name: @Html.EditorFor(model => model.Name)
    </li>
    <li>
        Surname: @Html.EditorFor(model => model.Surname)
    </li>
    <li>
        Address:
    </li>
    <li>
    @if(model.AddressOne != null)
    {
        Html.EditorFor(model => model.AddressOne)
    }
    else if(model.AddressTwo != null)
    {
        Html.EditorFor(model => model.AddressTwo)
    }
    </li>
    </ul>
    <button type="submit">Submit</button>
} 
```

但这真的取决于你为什么要这样做

# php - pjax 和 facebook 插件 (php)

> ID：11607126
> 
> 赞同：0
> 
> 时间：2012-07-23T05:57:26.450
> 
> 标签：php, ajax, facebook, pjax

我是用pjax来控制页面&网址，所以当我按下导航按钮时，部分内容&网址会被改变而不刷新，

但现在我面临一个问题，即我在页面内插入了一个 facebook 评论插件，当第一次显示 facebook 评论插件时它只是可行的，但是一旦我将页面从另一个页面导航到 facebook 评论插件页面，它不再工作了，我试图删除 '//connect.facebook.net/en_US/all.js#xfbml=1&appId=xxxxxxxx' 并在每次浏览此页面时重新加载它，但结果仍然是同样，谁能帮我解决这个问题？非常感谢。

我的代码如下： -

//index.php的一部分

```
<div id="wrapper">
    <div id="content">
        <div id="navigation">
            <div id="timer">1</div>
            <ul>
                <li>
                    <a href="/html5/sample3/finished/index.php" title="You Get What You Give">
                        You Get What You Give
                    </a>
                    <a href="/html5/sample3/finished/index.php?page=fortune-faded" title="Fortune Faded">
                        Fortune Faded
                    </a>
                    <a href="/html5/sample3/finished/index.php?page=liar" title="Liar">
                        Liar
                    </a>
                    <a href="/html5/sample3/finished/index.php?page=universal" title="Universal">
                        Universal
                    </a>
                </li>
            </ul>
        </div>

        <div id="container">
            <div id="left">
                <?php echo $content['left']; ?>
            </div>

            <div id="right">            
                <?php echo $content['right']; ?>
            </div>
        </div>

    </div>

    <div class="clearer"></div>
</div>

<script src="js/jquery-1.7.1.min.js"></script>
<script src="js/core.js"></script>

//part of core.js
var systemObject = {
    run : function() {
        this.content($('#navigation ul li a'));
        this.pop();
    },
    content : function(obj) {
        obj.live('click', function(e) {
            var thisUrl = $(this).attr('href');
            var thisTitle = $(this).attr('title');
            systemObject.load(thisUrl);
            window.history.pushState(null, thisTitle, thisUrl);
            e.preventDefault();
        });
    },
    pop : function() {
        window.onpopstate = function() {
            systemObject.load(location.pathname);
        };
    },
    load : function(url) {
        $("#facebook-jssdk").remove();                                  //delete //connect.facebook.net/en_US/all.js#xfbml=1&appId=xxxxxxxxx
        url = url === '/' ? '/ygwyg' : url;
        jQuery.getJSON(url, { ajax : 1 }, function(data) {              //load content
            jQuery.each(data, function(k, v) {
                $('#' + k + ' section').fadeOut(200, function() {
                    $(this).replaceWith($(v).hide().fadeIn(200));
                });
            });
        });
    },
};
$(function() {
    systemObject.run();
});

 //part of index.php?page=fortune-faded
<section>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=xxxxxxxxx";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-comments" data-href="http://example.com" data-num-posts="2" data-width="470"></div>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:29:04.757

在 AJAX 成功函数中显式调用“FB.XFBML.parse()”，这将重新解析 html 并呈现 Facebook 评论部分。

```
 //facebook comments
    var isFacebook = $data.find('.fb-comments');
    if(isFacebook != 'undefined' ) {
        var scriptText = 'FB.XFBML.parse();';
        var scriptNode = document.createElement('script');
        scriptNode.appendChild(document.createTextNode(scriptText));
        contentNode.appendChild(scriptNode);                   
    } 
```

对于您的代码，请在内部写入：

```
 load : function(url) {
        url = url === '/' ? '/ygwyg' : url;
        jQuery.getJSON(url, { ajax : 1 }, function(data) {   //load content
            jQuery.each(data, function(k, v) {

                //here check if the response data contains .fb-contents class
                //Then call the FB.XFBML.parse() function    

                $('#' + k + ' section').fadeOut(200, function() {
                    $(this).replaceWith($(v).hide().fadeIn(200));
                });
            });
        });
    }, 
```

# c# - 通过 ListBox.Items 交互时出现异常

> ID：11607132
> 
> 赞同：1
> 
> 时间：2012-07-23T05:57:59.860
> 
> 标签：c#, .net, winforms, listbox, iteration

如果在 ListBox 中未选择任何项目，则代码可以正常工作。

如果在 ListBox 中选择了至少一个项目，则在计算第一个项目后，foreach 迭代会中断。异常是 InvalidOperationException，详细信息显示 Items 集合已被修改。

```
foreach (object item in listBoxFiles.Items) //InvalidOperationException occurs
{
    if (listBoxFiles.SelectedItems.Contains(item)) 
    {
        //do nothing
    }
} 
```

**编辑：**我正在寻找类似**ListBoxItem.IsSelected**但它不存在的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:11:14.347

我可以重现这个问题。访问`SelectedItems`似乎正在改变`Items`，而不是调用`Contains`. 它不应该那样做。我暂时没有解释。

解决方法：

如果你检查是否`item`包含在`SelectedItems`你可以马上迭代`SelectedItems`而不是。另一种选择是`SelectedItems`在迭代之前复制，如下所示：

```
List<object> selectedItems = new List<object>();
selectedItems.AddRange( listBoxFiles.SelectedItems.OfType<object>() ); 
```

# c# - 全局鼠标事件处理程序

> ID：11607133
> 
> 赞同：42
> 
> 时间：2012-07-23T05:58:03.860
> 
> 标签：c#, event-handling, mouseevent

我有以下代码，我从某处获得来捕获鼠标事件。我修改了它并制作了一个事件处理程序，以便我可以订阅它。鼠标事件被正确捕获。但它永远不会触发事件处理程序。任何人都可以弄清楚代码有什么问题吗？

```
public static class MouseHook
{
    public static event EventHandler MouseAction = delegate { };

    public static void Start() => _hookID = SetHook(_proc);
    public static void stop() => UnhookWindowsHookEx(_hookID);

    private static LowLevelMouseProc _proc = HookCallback;
    private static IntPtr _hookID = IntPtr.Zero;

    private static IntPtr SetHook(LowLevelMouseProc proc)
    {
        using (Process curProcess = Process.GetCurrentProcess())
        using (ProcessModule curModule = curProcess.MainModule)
        {
            return SetWindowsHookEx(WH_MOUSE_LL, proc,
              GetModuleHandle(curModule.ModuleName), 0);
        }
    }

    private delegate IntPtr LowLevelMouseProc(int nCode, IntPtr wParam, IntPtr lParam);

    private static IntPtr HookCallback(int nCode, IntPtr wParam, IntPtr lParam)
    {
        if (nCode >= 0 && MouseMessages.WM_LBUTTONDOWN == (MouseMessages)wParam)
        {
           MSLLHOOKSTRUCT hookStruct = (MSLLHOOKSTRUCT)Marshal.PtrToStructure(lParam, typeof(MSLLHOOKSTRUCT));  
           MouseAction(null,new EventArgs());
        }
        return CallNextHookEx(_hookID, nCode, wParam, lParam);
    }

    private const int WH_MOUSE_LL = 14;

    private enum MouseMessages
    {
        WM_LBUTTONDOWN = 0x0201,
        WM_LBUTTONUP   = 0x0202,
        WM_MOUSEMOVE   = 0x0200,
        WM_MOUSEWHEEL  = 0x020A,
        WM_RBUTTONDOWN = 0x0204,
        WM_RBUTTONUP   = 0x0205
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct POINT
    {
        public int x;
        public int y;
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct MSLLHOOKSTRUCT
    {
        public POINT pt;
        public uint mouseData, flags, time;
        public IntPtr dwExtraInfo;
    }

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr SetWindowsHookEx(int idHook,
      LowLevelMouseProc lpfn, IntPtr hMod, uint dwThreadId);

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool UnhookWindowsHookEx(IntPtr hhk);

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode,
      IntPtr wParam, IntPtr lParam);

    [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr GetModuleHandle(string lpModuleName);
} 
```

我像这样订阅它。

```
MouseHook.Start();  
MouseHook.MouseAction += new EventHandler(Event); 
```

接收事件的函数。

```
private void Event(object sender, EventArgs e) => Console.WriteLine("Left mouse click!"); 
```

**更新：** 我将工作代码放在一个[开源 nuget 包中，用于用户操作挂钩。](https://github.com/titanium007/Windows-User-Action-Hook)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-23T15:14:42.363

```
return SetWindowsHookEx(WH_MOUSE_LL, proc, GetModuleHandle(curModule.ModuleName), 0); 
```

当您在早于 Windows 8 的 Windows 版本上的 .NET 4 上运行此代码时，此代码将失败。CLR 不再模拟托管程序集的非托管模块句柄。您无法在代码中检测到此故障，因为它缺少所需的错误检查。在 GetModuleHandle 和 SetWindowsHookEx 上。pinvoke 时不要跳过错误检查，winapi 不会抛出异常。检查它们是否返回 IntPtr.Zero 并在返回时简单地抛出 Win32Exception。

修复很简单，SetWindowsHookEx() 需要一个有效的模块句柄，但在设置低级鼠标挂钩时实际上并没有使用它。因此，任何句柄都可以，您可以传递 user32.dll 的句柄，该句柄始终加载在 .NET 应用程序中。使固定：

```
IntPtr hook = SetWindowsHookEx(WH_MOUSE_LL, proc, GetModuleHandle("user32"), 0);
if (hook == IntPtr.Zero) 
{
    throw new System.ComponentModel.Win32Exception();
}
return hook; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-23T07:38:04.603

我只是将您的代码复制到一个简单的 Windows 窗体中，并且它的工作方式与您描述的一样。你是如何使用它的？你在哪里开始和附加活动？

为了完整起见，这是我最终得到的代码 - 从一个简单的 C# 表单模板开始

```
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            MouseHook.Start();
            MouseHook.MouseAction += new EventHandler(Event);
        }

        private void Event(object sender, EventArgs e) { Console.WriteLine("Left mouse click!"); }
    }

    public static class MouseHook
    {
        public static event EventHandler MouseAction = delegate { };

        public static void Start()
        {
            _hookID = SetHook(_proc);

        }
        public static void stop()
        {
            UnhookWindowsHookEx(_hookID);
        }

        private static LowLevelMouseProc _proc = HookCallback;
        private static IntPtr _hookID = IntPtr.Zero;

        private static IntPtr SetHook(LowLevelMouseProc proc)
        {
            using (Process curProcess = Process.GetCurrentProcess())
            using (ProcessModule curModule = curProcess.MainModule)
            {
                return SetWindowsHookEx(WH_MOUSE_LL, proc,
                  GetModuleHandle(curModule.ModuleName), 0);
            }
        }

        private delegate IntPtr LowLevelMouseProc(int nCode, IntPtr wParam, IntPtr lParam);

        private static IntPtr HookCallback(
          int nCode, IntPtr wParam, IntPtr lParam)
        {
            if (nCode >= 0 && MouseMessages.WM_LBUTTONDOWN == (MouseMessages)wParam)
            {
                MSLLHOOKSTRUCT hookStruct = (MSLLHOOKSTRUCT)Marshal.PtrToStructure(lParam, typeof(MSLLHOOKSTRUCT));
                MouseAction(null, new EventArgs());
            }
            return CallNextHookEx(_hookID, nCode, wParam, lParam);
        }

        private const int WH_MOUSE_LL = 14;

        private enum MouseMessages
        {
            WM_LBUTTONDOWN = 0x0201,
            WM_LBUTTONUP = 0x0202,
            WM_MOUSEMOVE = 0x0200,
            WM_MOUSEWHEEL = 0x020A,
            WM_RBUTTONDOWN = 0x0204,
            WM_RBUTTONUP = 0x0205
        }

        [StructLayout(LayoutKind.Sequential)]
        private struct POINT
        {
            public int x;
            public int y;
        }

        [StructLayout(LayoutKind.Sequential)]
        private struct MSLLHOOKSTRUCT
        {
            public POINT pt;
            public uint mouseData;
            public uint flags;
            public uint time;
            public IntPtr dwExtraInfo;
        }

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr SetWindowsHookEx(int idHook,
          LowLevelMouseProc lpfn, IntPtr hMod, uint dwThreadId);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool UnhookWindowsHookEx(IntPtr hhk);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode,
          IntPtr wParam, IntPtr lParam);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr GetModuleHandle(string lpModuleName);

    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-19T14:42:06.520

对于任何未来的访客：

我已经实现了一个线程级鼠标钩子。

[![在此处输入图像描述](../Images/84e499aec5dae075ae87f3a88d5377b9.png)](https://github.com/macote/Winook)

```
_process = Process.Start(@"c:\windows\notepad.exe");
//_process = Process.Start(@"c:\windows\syswow64\notepad.exe"); // works also with 32-bit

_mouseHook = new MouseHook(_process.Id);
_mouseHook.MessageReceived += MouseHook_MessageReceived;
_mouseHook.Install();

...

private void MouseHook_MessageReceived(object sender, MouseMessageEventArgs e)
{
    Debug.WriteLine($"Mouse Message Code: {e.MessageCode}; X: {e.X}; Y: {e.Y}; Delta: {e.Delta}");
} 
```

# python - How to dynamically increase the field list for more items while entering data?

> ID：11607134
> 
> 赞同：2
> 
> 时间：2012-07-23T05:58:05.617
> 
> 标签：python, plone, ploneformgen

I use PloneFormGen to create a requirement form for a list of items.

I wish to increase the list dynamically i.e. if the items required is 2, the number of input fields for the required items is 2\. If I wish to add the 3rd item, I should be able to click a button say a "+" link and make the 3rd additional input field available to add it.

How can this feature be enabled? Is is available with plone 4.1 already?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:29:24.383

尝试安装此 PFG 扩展： http: [//pypi.python.org/pypi/Products.PFGDataGrid](http://pypi.python.org/pypi/Products.PFGDataGrid)

“它向 PloneFormGen 添加了一个 DataGridField 表单字段。为 plone 4 [vangheem] 修复”

然后它应该在 Plone4.1 上的 PFG 上工作。

# javascript - how to use JS to dynamically update innerHTML

> ID：11607136
> 
> 赞同：0
> 
> 时间：2012-07-23T05:58:09.743
> 
> 标签：javascript

I have a drop down box, each option in it has 2 values. I want to dynamically update value in my HTML based on the selection. The value that has to be shown is derived from drop down box values. Here is my code, but nothing seems to be happening here.

```
<html>

    <head><title></title>

    <script type="text/javascript">

var a = new Array();
a[1] = "kgs"; 
a[2] = "gms"; 
a[3] = "ltrs"; 
a[4] = "ml"; 
a[5] = "nos"; 

window.onload = function() {

function updateunit(){

var b = document.getElementById("itemname");

var b1 = b.options[b.selectedIndex].value;

var c = b1.split(',');

var d = c[1];

var e = a[d];

alert(document.write(a[1]));

document.getElementById('pane2').innerHTML = b1 ;

}

updateunit()

document.getElementById('itemname').onchange = updateunit ;

}    

</script></head>

<body>

<form action='production.php' method="POST"> 

Item Name <select name ="itemname" id = "itemname">
<option value = '1,5' > A </option>
<option value = '2,5' > B </option>
<option value = '3,5' > C </option>
<option value = '4,5' > D </option>
</select> <br>

Amount <input type="text" name="amount"> <span id = "pane2"></span> <br>

</form>        

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:15:25.420

我希望你正在努力实现这一目标。[http://jsfiddle.net/nsjithin/SbtSF/](http://jsfiddle.net/nsjithin/SbtSF/)

1.  要获取所选下拉列表的值，您只需要 elem.value
2.  将 updateunit 函数作为全局函数，而不是在 window.onload 函数中。
3.  数组从索引 0 开始。所以在拆分时不要说 c[1]，它总是会给你 5，从 c[0] 中获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:07:34.643

```
Javascript is case sensitive 
```

检查代码语法应该是`selectedIndex`——

并请使用它——`alert(a[1]);`让我知道它是否有效

```
 var a = new Array();
    a[1] = 'kgs'; 
    a[2] = 'gms'; 
    a[3] = 'ltrs'; 
    a[4] = 'ml'; 
    a[5] = 'nos'; 

    window.onload = function() {

    function updateunit(){

    var b = document.getElementById("itemname");

var b1 = b.options[b.selectedIndex].value; 
```

**新编辑**

这是我在 xampp->htdocs 下保存为 name.php 的代码，代码如下所示，我在浏览器中测试为 -- localhost/name.php

```
<?php
/*
I have a drop down box, each option in it has 2 values. I want to dynamically update value in my HTML based on the selection. The value that has to be shown is derived from drop down box values. Here is my code, but nothing seems to be happening here. 
*/
?>

    <html>

        <head><title></title>

        <script type="text/javascript">

    var a = new Array();
    a[1] = 'kgs'; 
    a[2] = 'gms'; 
    a[3] = 'ltrs'; 
    a[4] = 'ml'; 
    a[5] = 'nos'; 

    window.onload = function() {

    function updateunit(){

    var b = document.getElementById("itemname");

    var b1 = b.options[b.selectedIndex].value;

    var c = b1.split(',');

    var d = c[1];

    var e = a[d];

    alert(a[1]);

    document.getElementById('pane2').innerHTML = b1 ;

    }

    updateunit()

    document.getElementById('itemname').onchange = updateunit ;

    }    

    </script></head>

    <body>

    <form action='production.php' method="POST"> 

    Item Name <select name ="itemname" id = "itemname">
    <option value = '1,5' > A </option>
    <option value = '2,5' > B </option>
    <option value = '3,5' > C </option>
    <option value = '4,5' > D </option>
    </select> <br>

    Amount <input type="text" name="amount"> <span id = "pane2"></span> <br>

    </form>        

    </body>

    </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T11:09:44.997

```
var a = ["kgs", "gms", "ltrs", "ml", "nos"];
window.onload = function() {
    updateunit();
    document.getElementById('itemname').onchange = updateunit;
}
function updateunit(evt) {
    var b1 = evt.target.value;
    if(b1) {
        var d = b1.split(',')[1];
        var e = a[d - 1];
        document.getElementById('pane2').innerHTML = e ;
    }  

} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-23T06:08:26.623

代替 ：

```
document.getElementById('pane2').innerHTML = b1 ; 
```

利用 ：

```
document.getElementById('pane2').html(b1); 
```

参考： [http ://api.jquery.com/html/](http://api.jquery.com/html/)

# postgresql - closing connection unexpectedly in postgres

> ID：11607137
> 
> 赞同：0
> 
> 时间：2012-07-23T05:58:20.287
> 
> 标签：postgresql

I am having a scenario where we close the postgres connection unexpectedly that is the jetty server which is using the connection pool. So in our scenario we are killing the jetty server issuing Kill -9 so connection pool is not closed properly , so my question is that will it going to affect the postgres database, can it cause the postgres corruption. Or all the Connections will be closed automatically and the running transactions will be rolled back without affecting the database.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:34:06.420

任何未提交的事务都会在您断开连接时导致隐式回滚。这永远不会导致数据库损坏，回滚永远不会导致数据库损坏。

使用**kill -9**会提出问题，但是当您终止连接时它不会损坏您的数据库。

# javascript - horizontal tabs to vertical

> ID：11607138
> 
> 赞同：0
> 
> 时间：2012-07-23T05:58:21.777
> 
> 标签：javascript, tabs, navigation

Is there any way to make the tabs on this script vertical instead of horizontal? (stacked on top of each other)

[http://www.javascriptsource.com/navigation/giltab.html](http://www.javascriptsource.com/navigation/giltab.html)

Love it otherwise, but I'm wanting to do a menu inside my main page & my main menu is horizontal.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:30:18.997

**垂直的**

```
 <!DOCTYPE html>
     <html>
     <head>
     <style type="text/css">
     ul
     {
     list-style-type:none;
     margin:0;
     padding:0;
     }
     a
     {
     display:block;
     width:60px;
     background-color:#dddddd;
     }
     </style>
     </head>

     <body>
     <ul>
     <li><a href="#home">Home</a></li>
     <li><a href="#news">News</a></li>
     <li><a href="#contact">Contact</a></li>
     <li><a href="#about">About</a></li>
     </ul>

     </body>
     </html> 
```

**水平的**

```
 <!DOCTYPE html>
    <html>
    <head>
    <style type="text/css">
    ul
    {
    list-style-type:none;
    margin:0;
    padding:0;
    }
    li
    {
    display:inline;
    }
    </style>
    </head>

    <body>
    <ul>
    <li><a href="#home">Home</a></li>
    <li><a href="#news">News</a></li>
    <li><a href="#contact">Contact</a></li>
    <li><a href="#about">About</a></li>
    </ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:34:26.483

```
use
//vertical  
li
    {
    display:inline;
    }

//horizontal

li
    {
    display:block;
    } 
```

# android - Updating texture using glTexImage2D(..) in OpenglES2 [Android]

> ID：11607142
> 
> 赞同：6
> 
> 时间：2012-07-23T05:58:40.603
> 
> 标签：android, opengl-es-2.0

Initialization code creates one RGB one-color texture with 128x128 pixels:

```
GLES20.glGenTextures ( 1, textureId, 0 );
GLES20.glBindTexture ( GLES20.GL_TEXTURE_2D, textureId[0] );
GLES20.glTexImage2D ( GLES20.GL_TEXTURE_2D, 0, GLES20.GL_RGB, bitmap.getWidth(), bitmap.getHeight(), 0,GLES20.GL_RGB, GLES20.GL_UNSIGNED_BYTE, byteBuffer );|
GLES20.glBindTexture ( GLES20.GL_TEXTURE_2D, 0 ); 
```

after initialization I have the proper texture and everything works ok. At some poin I have to make some changes in my texture or even replace it completelly with other image:

```
GLES20.glBindTexture ( GLES20.GL_TEXTURE_2D, textureId[0] );
GLES20.glTexImage2D ( GLES20.GL_TEXTURE_2D, 0, GLES20.GL_RGB, bitmap.getWidth(), bitmap.getHeight(), 0,GLES20.GL_RGB, GLES20.GL_UNSIGNED_BYTE, byteBuffer );|
GLES20.glBindTexture ( GLES20.GL_TEXTURE_2D, 0 ); 
```

But glTexImage2D dosen't make any changes to the texture and returns no error. But this code works correctly in my iOS project, but in case of android it doesn't. It looks like I can't use glTexImage2D(..) twice with same texture, in other words, the only way to modify my texture is to create new one and delete old one, but why it's works correctly in iOS? What's wrong with my code?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T10:13:08.400

对不起，那是我的错。我试图从其他线程（不是从 GL 线程）调用 glTexImage2D 函数。现在一切都很完美。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T06:29:33.790

我认为**glTexImage2D()**用于定义纹理，而**glTexSubImage2D()**用于重新定义/更新纹理。

您可能只需要切换到 glTexSubImage2D() 即可进行纹理更新。

# ios - How to securely store an AES key on the iPhone

> ID：11607143
> 
> 赞同：2
> 
> 时间：2012-07-23T05:58:47.963
> 
> 标签：ios, security, commoncrypto

So I was going about implementing AES encryption of data on an iPhone app, when I was puzzled by how to store the encryption key. I can easily enough encrypt data using a user-entered password, the encryption key. However, if I store the key unencrypted, the encryption is useless as anyone with access could easily enough decrypt the data with the readily-available encryption key. I could encrypt the key, but then there would be another unencrypted key floating around and someone could just follow the chain down to the data. It seemed clear that I could not store the key, so I thought that I could have the key be only in the user's mind. It would be very secure, but I would have no way to check if the decryption worked correctly and all data would be lost in the event that the user forgot their password, which is unacceptable.

Essentially, how can I securely store an encryption key for AES?

I'm sure this situation has been encountered before, as other questions have shown, but they seemed web-focused. I am interested in an iPhone-centric solution, potentially using CommonCrypto?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:31:57.737

如您所说，不要存储密码。您仍然可以单独存储密码的哈希值并对其进行测试以查看它是否是正确的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:55:38.670

也许您有兴趣将其作为通用服务保存在 Keychain 中？钥匙串服务有一个不错的 Objective-C 包装器，称为[SSKeychain](https://github.com/samsoffes/sskeychain)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:05:35.823

我在我的项目中使用了一个很好的开源工具包，用于在钥匙链中存储安全数据。

[PDKeychainBindingsController](https://github.com/carlbrown/PDKeychainBindingsController)

# json - 如何在 asp.net mvc 中使用 jquery 在文本框更改事件上调用 Json 方法？

> ID：11607145
> 
> 赞同：1
> 
> 时间：2012-07-23T05:58:52.283
> 
> 标签：json, asp.net-mvc-3, c#-4.0, jquery

我想使用 jquery 在我的文本框更改事件上调用 JSON 方法。

下面是我的 JsonResult 方法的样子

```
public JsonResult GetUserName(string emailId)
{
    string UserName = "";
    var query = (from u in DbContext.Users
                 where u.User_Email.ToLower() == emailId.ToLower()
                 select u).SingleOrDefault();
    if(query!=null)
    {
        UserName = query.User_FirstName +", "+query.User_LastName;
    }
    return Json(UserName, JsonRequestBehavior.AllowGet);
} 
```

下面是我的查看代码

```
Email:&nbsp;<input type="text" id="txtEmail" /><br /><br />
Name:&nbsp;<input type="text" id="txtName" /> 
```

下面是jquery代码

```
<script type="text/javascript">
        $(document).ready(function () {
            //$("#txtEmail").first().focus();

            $("#txtEmail").change(function () {
                var emailId = $(this).val();
                //$("#txtName").val(emailId);
                $.ajax({
                    url: 'GetUserName',
                    type: 'POST',
                    data: JSON.stringify({ emailId: emailId }),
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (data) {
                        if (data != "" || data != null) {
                            $("#txtName").val(data);
                        }
                        else {
                            alert("Our system does not recognize this email. Please try again.");
                            $("#txtEmail").focus();
                        }
                    }
                });
            });
        });
    </script> 
```

注意....我的 GetUserName JsonResult 方法属于我的默认控制器。

我的 jquery 代码在更改事件上成功执行，但没有调用 GetUserName 方法......请让我知道我缺少什么。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:07:03.297

你的 url 是错误的，它应该是这样`/DefaultControllerName/GetUserName`的（如果`GetUserName`不是你必须在 url 中指定控制器的默认操作，这就是默认控制器并不重要）这就是为什么你应该总是使用内置[`UrlHelper`](http://msdn.microsoft.com/en-us/library/dd492942)来生成 url ASP.NET MVC：

```
$.ajax({
   url: '@(Url.Action("GetUserName"))',
   type: 'POST', 
```

使用 aspx 视图引擎：

```
$.ajax({
    url: '<%: Url.Action("GetUserName") %>',
    type: 'POST' 
```

# android - Browsing multiple photos in flash for android

> ID：11607146
> 
> 赞同：16
> 
> 时间：2012-07-23T05:58:59.477
> 
> 标签：android, actionscript-3, flash

I am trying to develop an application for android phone using flash/as3, I want to know How to browse multiple photos from gallery using media promise or camera roll. Right now I am able to browse only one photo at a time.

```
 var mediaFile:CameraRoll = new CameraRoll();
       var imagePromise:MediaPromise;
       CameraRoll(mediaFile).browseForImage(); 
```

is there any code or resources that I can look at.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-16T21:40:51.517

您必须创建“浏览器”。

您必须一次读取/写入一个相机胶卷文件（所有系统如何工作），但您的应用程序可以保存图像和文件引用并对图像执行任何操作 - 用户可以选择多个图像。

从相机胶卷导入文件，转换为位图，以任何方式操作并推入数组。如果您正在制作画廊，请将位图大小调整为缩略图大小。您的应用程序应该只将缩略图位图存储在 gpu 中，原始 bmp 是相机胶卷文件。

这是将相机胶卷文件转换为 bmp 的示例：http: [//www.flashandmath.com/mobile/cameraroll/](http://www.flashandmath.com/mobile/cameraroll/)

# javascript - Unable to display expected value in jsp

> ID：11607147
> 
> 赞同：1
> 
> 时间：2012-07-23T05:59:01.417
> 
> 标签：javascript, jsp

i was rounding off the value to .25,.50,.75 and .00 in the javascript. and the code is as below.

```
function roundOff(obj) {
    //alert(document.getElementById("sample").value);
    var val=obj.value;
    var newValue;

    var floorValue = Math.floor(val);
    var remainder = val - floorValue;
    if (remainder < 0.325) {
        if (remainder < 0.125) {
            newValue = floorValue;

        } else {
            newValue = floorValue + 0.25;
        }
    } else {
        if (remainder < 0.625) {
            newValue = floorValue + 0.5;
        } else if (remainder < 0.875) {
            newValue = floorValue + 0.75;
        } else {
            newValue = floorValue + 1;
        }
    }
    alert(floorValue);

        alert(newValue);
        document.getElementById("sample").value=newValue;

    //return obj;
} 
```

but am not able to put the value back to the jsp page. if i type 5.5, only 5 is displayed in the jsp. but if i put alert and check the value of floorvalue then it is 5.5\. but if i put it to the textbox in jsp it is giving only 5\. why is it so???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:57:21.333

尝试使用 onblur 事件。因为它在小提琴中工作正常。除此之外，我认为您的代码没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:41:37.807

我在导致麻烦的jsp中使用onKeyUp。相反，我将其更改为 onBlur，因为它提供了与我的要求相同的效果。并感谢您的建议。它现在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:20:48.373

您将文本框的值设置为 floorValue，而不是 newValue。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-23T06:13:36.577

你可以这样试试

```
document.getElementById("sample").value="+floorValue+"; 
```

如果可行，您可以在[此处](http://antguider.blogspot.in/2012/06/javascript-tips-and-tricks-part-i.html)参考原因第四个问题

# objective-c - Deallocation of NSMutableArray inside a Function

> ID：11607148
> 
> 赞同：0
> 
> 时间：2012-07-23T05:59:08.120
> 
> 标签：objective-c, memory, memory-management, nsmutablearray

Here is my code:

```
- (void)showRectangles
{
  NSMutableArray *rects = [[NSMutableArray alloc]init];
  //....rest of code here
  [rects release];
} 
```

The problem here is that when I analyze the code, it gives me this warning:

`Incorrect decrement of the reference count of an object that is not owned at this point by the caller`

I don't understand why this gives me a warning. Can anyone explain why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:02:26.387

通过在问题导航器中展开消息，xcode 将为您指出每个 ref count 操作。最终，这将向您展示静态分析器是如何得出这个结论的。

或者，您可能在此过程中重新分配了变量`rects`（引入了泄漏和过度释放）。

# javascript - 如何使用 Javascript / jQuery 从 url 中删除一些文本

> ID：11607149
> 
> 赞同：0
> 
> 时间：2012-07-23T05:59:10.280
> 
> 标签：javascript, jquery

当我运行滑块时，我有一个带有垂直滑块的网页，它正在更改 URL。我想在页面刷新时删除一些文本。就像我有一个 URL 95.0.4.12/inner/innerpage3.html 并且当我使用滑块时，它正在将此 URL 更改为 inner/innerpage3.html#slide4 或任何滑块编号

```
<script type="text/javascript">
$(function (){
var top= window.top.location.href;
window.onload=$(document).scrollTop(0)
})
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:02:57.773

您可以使用`document.location.hash`以下方法：

> 该`hash`属性返回 URL 的锚点部分，包括井号 (#)。

```
$(function (){
    document.location.hash = ""
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:03:36.860

您可以使用`window.location.hash`来更改 URL 的哈希部分。您还可以使用`document.referrer`来检测用户来自哪张幻灯片。

# rss - 加拿大雅虎天气RSS提要

> ID：11607150
> 
> 赞同：2
> 
> 时间：2012-07-23T05:59:14.943
> 
> 标签：rss, weather, yahoo-weather-api

我的应用程序使用 yahoo 的天气提要 (XML) 来显示未来 5 天的天气预报。当邮政编码在美国时，这很好用。例如，下面的 url 为我提供了密歇根州富兰克林的提要。

```
http://xml.weather.yahoo.com/forecastrss/48025_f.xml 
```

我也需要加拿大的类似提要，但似乎无法正常工作。例如，'Scarborough' 的邮政编码是 M1M1M1。试过了

```
http://xml.weather.yahoo.com/forecastrss/M1M1M1_f.xml 
```

但这不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T15:23:19.500

我正在可靠地使用：

```
http://weather.yahooapis.com/forecastrss?w=location 
```

在哪里`w = WOEID`和`Scarborough, Canada` `w=4369`为什么：

```
http://weather.yahooapis.com/forecastrss?w=4369 
```

将正确返回天气数据。有关 API 的更多信息，请[点击此处](http://developer.yahoo.com/weather/)。

我也使用这种方法来获取`WOEID`给定位置名称字符串：

```
// Create new XML doc
XmlDocument xmldoc = new XmlDocument();
// Get XML doc
xmldoc.Load(string.Format("http://where.yahooapis.com/v1/places.q({0})?appid={1}", place, ApplicationID));
string woeid = xmldoc.GetElementsByTagName("woeid")[0].InnerText;
return woeid; 
```

但要使其正常工作，您需要通过注册您的应用程序来获取`ApplicationID`from 。`Yahoo`

# php - 是否可以使用 PHP DOM 找到图像的宽度和高度？

> ID：11607152
> 
> 赞同：0
> 
> 时间：2012-07-23T05:59:21.910
> 
> 标签：php, html, image, dom

我使用 curl 抓取网页内容。并使用该 html 内容创建 DOM。我需要检查该 html 中包含的图像的大小。

是否可以使用 Php DOM 的宽度和高度（图像标签不包含宽度和高度属性）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:55:16.000

正如您所说，img 标签不包含高度和宽度。你可以看看[getimagesize](http://php.net/manual/en/function.getimagesize.php) PHP函数。您需要将从报废中获得的图像 url 传递给 getimagesize 函数。

前任：

```
<?php 

   $size = getimagesize("http://static.php.net/www.php.net/images/php.gif");          

   print_r($size);
?> 
```

**输出**是数组

```
Array
(
[0] => 120
[1] => 67
[2] => 1
[3] => width="120" height="67"
[bits] => 7
[channels] => 3
[mime] => image/gif
) 
```

希望这有帮助。

# c# - RequiredFieldValidator not working inside createuserwizard

> ID：11607153
> 
> 赞同：1
> 
> 时间：2012-07-23T05:59:25.177
> 
> 标签：c#, asp.net, validation, createuserwizard

I have created 2 steps in the createuserwizard. 1st step is for user to input in their particulars and 2nd step is for default login step (username, password, security q&a)..

The validator works fine at step 1, however it is not working in step 2\. The error messages are not working..

here is the code:

```
 <asp:CreateUserWizard ID="CreateUserWizard1" 
            runat="server" 
            oncreateduser="CreateUserWizard1_CreatedUser"
            InvalidPasswordErrorMessage="Password length must be more than 8 characters." 
            ContinueDestinationPageUrl="~/Home.aspx" 
            DisplayCancelButton = "True" 
            CancelDestinationPageUrl="~/Home.aspx" 
            DisableCreatedUser="True" onsendingmail="CreateUserWizard1_SendingMail"
            >

            <WizardSteps>

             <asp:WizardStep ID="CreateUserWizardStep0" runat="server">

                    <table>
                        <tr >
                            <th class="style9">Register your account at BedOfRoses:</th>
                        </tr>

                        <tr>
                            <td class="style9">Name:</td>
                            <td>
                                <asp:TextBox runat="server" ID="CustName"/>
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator1" ControlToValidate="CustName"
                                     ErrorMessage="CustName is required." />
                            </td>
                        </tr> 
                        <tr>
                            <td class="style9">Contact Number:</td>
                            <td>
                                <asp:TextBox runat="server" ID="CustNum" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator2" ControlToValidate="CustNum"
                                     ErrorMessage="CustNum is required." />
                            </td>
                        </tr>  
                        <tr>
                            <td class="style9">Cust Role:</td>
                            <td>
                                <asp:DropDownList ID="CustRole" runat="server">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>Bride</asp:ListItem>
                                    <asp:ListItem>Groom</asp:ListItem>
                                </asp:DropDownList>
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator3" ControlToValidate="CustRole"
                                     ErrorMessage="CustRole is required."  />
                            </td>
                        </tr>   
                        <tr>
                            <td class="style9">CustStatus:</td>
                            <td>
                                <asp:DropDownList ID="CustStatus" runat="server">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>Engaged</asp:ListItem>
                                    <asp:ListItem>Engaged, started planning</asp:ListItem>
                                    <asp:ListItem>Married!</asp:ListItem>
                                </asp:DropDownList>
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator4" ControlToValidate="CustStatus"
                                     ErrorMessage="CustStatus is required." />
                            </td>
                        </tr>     
                                <tr>
                            <td class="style9">PName:</td>
                            <td>
                                <asp:TextBox runat="server" ID="PName" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator5" ControlToValidate="PName"
                                     ErrorMessage="PName is required." />
                            </td>
                        </tr>
                                <tr>
                            <td class="style9">PEmail:</td>
                            <td>
                                <asp:TextBox runat="server" ID="PEmail" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator6" ControlToValidate="PEmail"
                                     ErrorMessage="PEmail is required." />
                            </td>
                        </tr>
                                <tr>
                            <td class="style9">PRole:</td>
                            <td>
                                <asp:DropDownList ID="PRole" runat="server">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>Bride</asp:ListItem>
                                    <asp:ListItem>Groom</asp:ListItem>
                                </asp:DropDownList>
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator7" ControlToValidate="PRole"
                                     ErrorMessage="PRole is required." />
                            </td>
                        </tr>
                                <tr>
                            <td class="style9">WedDate:</td>
                            <td>
                               <asp:ScriptManagerProxy ID="ScriptManagerProxy1" runat="server">
                                </asp:ScriptManagerProxy>

                                <asp:TextBox runat="server" ID="WedDate"/> &nbsp;
                                <asp:Label ID="Label1" 
                                    runat="server" style="font-size: small; text-decoration: underline" 
                                    Text="Wedding Date? " onmouseout="BalloonPopupControlBehavior.hidePopup();">
                                </asp:Label>

                                <asp:BalloonPopupExtender ID="Label1_BalloonPopupExtender" runat="server" 
                                    BalloonSize="Small" BalloonStyle="Rectangle" DisplayOnClick="False" 
                                    DisplayOnMouseOver="True" Enabled="True" 
                                    ExtenderControlID="" Position="TopRight" TargetControlID="Label1" 
                                    BalloonPopupControlID="Panel1" UseShadow="False" CustomClassName="Balloon">
                                </asp:BalloonPopupExtender>
                                <br /> 

                                  <asp:CalendarExtender ID="WedDate_CalendarExtender" runat="server" 
                                    DefaultView="Days" Enabled="True" PopupPosition="BottomLeft" 
                                    TargetControlID="WedDate" FirstDayOfWeek="Monday" CssClass="DatePicker" 
                                     Format="dd/MM/yyyy" >
                                </asp:CalendarExtender>

                                <asp:Panel ID="Panel1" runat="server">
                                    <span class="style5"><span class="style6"><em>Brides and Grooms: Don’t know your 
                                    exact wedding date yet?
                                    <br />
                                    Don’t worry, just put in an estimate – you can update it anytime.</em></span></span> 

                                 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                                    </asp:UpdatePanel>
                                </asp:Panel>

                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator8" ControlToValidate="WedDate"
                                     ErrorMessage="WedDate is required." />
                            </td>
                        </tr>

                    </table>

                   </asp:WizardStep>

             <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server">
              <ContentTemplate>

                    <table>
                        <tr>
                            <th class="style4">User Information</th>
                        </tr>
                        <tr>
                            <td class="style4">Username:</td>
                            <td>
                                <asp:TextBox runat="server" ID="UserName" />

                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator9" ControlToValidate="UserName" 
                                    ErrorMessage="Username is required." />
                            </td>
                        </tr>
                        <tr>
                            <td class="style4">Password:</td>
                            <td>
                                <asp:TextBox runat="server" ID="Password" TextMode="Password" MaxLength="20" />

                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator10" ControlToValidate="Password" 
                                    ErrorMessage="Password is required." />
                            </td>
                        </tr>
                        <tr>
                            <td class="style4">Confirm Password:</td>
                            <td>
                                <asp:TextBox runat="server" ID="ConfirmPassword" TextMode="Password" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator13" ControlToValidate="ConfirmPassword" 
                                    ErrorMessage="Confirm Password is required." />
                            </td>
                        </tr>
                        <tr>
                            <td class="style4">Email:</td>
                            <td>
                                <asp:TextBox runat="server" ID="Email" />
                                <asp:RequiredFieldValidator ID="RequiredFieldValidator11" runat="server" ControlToValidate="Email" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td class="style4">Question:</td>
                            <td>
                                <asp:DropDownList ID="Question" runat="server" Height="17px" Width="235px">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>What&#39;s the company name of your first job? </asp:ListItem>
                                    <asp:ListItem>Where did you first met your partner? </asp:ListItem>
                                    <asp:ListItem>What was your childhood nickname? </asp:ListItem>
                                    <asp:ListItem>Which primary school did you attend?</asp:ListItem>
                                </asp:DropDownList>
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator12" ControlToValidate="Question" 
                                    ErrorMessage="Question is required." />
                            </td>
                        </tr>
                        <tr>
                            <td class="style4">Answer:</td>
                            <td>
                                <asp:TextBox runat="server" ID="Answer" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator14" ControlToValidate="Answer" 
                                    ErrorMessage="Answer is required." />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                 <asp:CompareValidator ID="PasswordCompare" runat="server" ControlToCompare="Password"
                                        ControlToValidate="ConfirmPassword" Display="Dynamic" ErrorMessage="The Password and Confirmation Password must match."></asp:CompareValidator>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <asp:Literal ID="ErrorMessage" runat="server" EnableViewState="False"></asp:Literal>
                            </td>
                        </tr>
                    </table>
                    <asp:SqlDataSource ID="InsertExtraInfo" runat="server" ConnectionString="<%$ ConnectionStrings:ASPNETDBConnectionString1 %>"
                        InsertCommand="INSERT INTO [Details] ([UserId], [CustName], [CustNum], [CustRole], [CustStatus], [PName], [PEmail], [PRole], [WedDate]) VALUES (@UserId, @CustName, @CustNum, @CustRole, @CustStatus, @PName, @PEmail, @PRole, @WedDate)"
                        ProviderName="<%$ ConnectionStrings:ASPNETDBConnectionString1.ProviderName %>">
                        <InsertParameters>
                            <asp:ControlParameter Name="CustName" Type="String" ControlID="CustName" PropertyName="Text" />
                            <asp:ControlParameter Name="CustNum" Type="String" ControlID="CustNum" PropertyName="Text" />
                            <asp:ControlParameter Name="CustRole" Type="String" ControlID="CustRole" PropertyName="Text" />
                            <asp:ControlParameter Name="CustStatus" Type="String" ControlID="CustStatus" PropertyName="Text" />
                            <asp:ControlParameter Name="PName" Type="String" ControlID="PName" PropertyName="Text" />
                            <asp:ControlParameter Name="PEmail" Type="String" ControlID="PEmail" PropertyName="Text" />
                            <asp:ControlParameter Name="PRole" Type="String" ControlID="PRole" PropertyName="Text" />
                            <asp:ControlParameter Name="WedDate" Type="String" ControlID="WedDate" PropertyName="Text" />
                        </InsertParameters>

                    </asp:SqlDataSource>
                    </ContentTemplate>

              </asp:CreateUserWizardStep> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:13:55.957

您应该在 RequiredField Validtors 中使用 Display="Dynamic" 并将 Validation Group 应用于您的控件。

# php - PHP 注销脚本

> ID：11607155
> 
> 赞同：1
> 
> 时间：2012-07-23T05:59:41.553
> 
> 标签：php

我正在尝试创建一个 PHP 注销脚本，但是，一旦我实现它，页面就会在登录后被重定向到该页面。这是代码：

连接.php

```
<?php 
    session_start();
    $link = mysql_connect("localhost", "database_name", "database_pass") or die(mysql_error());
    mysql_select_db("database_name") or die(mysql_error());

    if(isset($_COOKIE['username'])) 
             $_SESSION['username'] = $_COOKIE['username'];
 ?> 
```

注销.php

```
<?php
    include("connect.php");
    session_start();
    session_destroy();
    $username = $_SESSION['username'];
setcookie($username, time()-3600);  
    header("Location: index.php");
    die;    
?> //immediately after here, instead of going to index.php(the login page), it goes straight to the page that would appear after if the user had logged in(control_panel.php). 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:02:53.557

看看这个页面：[http ://blog.ircmaxell.com/2011/08/security-review-creating-secure-php.html](http://blog.ircmaxell.com/2011/08/security-review-creating-secure-php.html)

它完全通过“创建安全的 PHP 登录脚本”。您当前的解决方案存在许多安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:07:23.533

我猜你的代码是错误的，问题出在这里..

在您的 logout.php 中，您在取消设置会话后使 cookie 过期，您的 cookie 不会过期。

在 connect.php 中，您正在使用此条件再次设置会话，它设置是因为 cookie 仍在用户的浏览器中

```
if(isset($_COOKIE['username'])) 
            $_SESSION['username'] = $_COOKIE['username']; 
```

所以不要这样做：

```
setcookie($username, time()-3600); 
```

做这个 ：

```
 setcookie($username, "", time()-3600); 
```

# java - Dynamically adding variables to JavaBean

> ID：11607157
> 
> 赞同：1
> 
> 时间：2012-07-23T05:59:52.487
> 
> 标签：java

Is there a way to build a JavaBean dynamically based on the DB table column names and assoicated data? For example, if I get back of 5 columns in a db table, I need to create a javaBean with those 5 column names as variables and their getters/setters as well. Next time, if I get 7 columns, I can create a javaBean with 7 variables.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:06:32.017

我认为您可以通过字节码操作来做到这一点。

2个主要库是：

*   javassist - [http://www.csg.ci.iu-tokyo.ac.jp/~chiba/javassist/](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)
*   asm - [http://asm.ow2.org/](http://asm.ow2.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:04:48.187

好吧，它不必是“动态”bean，您可以只使用 Map 变体，例如`HashMap`. 没有错。

```
Map<String,Object> results = new HashMap<String,Object>();
// .. fill results ...
// .. then
Object someData = results.get("someDataKey"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:09:04.923

答案是不。您不能在运行时要求变量。你能做的是。

```
Map<String, Map> results = new HashMap<String, Map>();
// Associate each column with a new map and put it in results.
// Take each variable from column and associate it with the corresponding column's hashmap. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T06:02:56.363

我不相信您可以拥有具有可变字段的对象，但您可以使用 Map 来存储结果。这可能是最接近你想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T06:19:49.740

您可以使用[DynaBean](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/DynaBean.html)：

DynaBean 是一个 Java 对象，它支持可以动态修改其名称和数据类型以及值的属性。在最大程度上可行，BeanUtils 包的其他组件将识别这些 bean 并将它们视为标准 JavaBeans，以便检索和设置属性值。

# android - Android add text (timestamp) to recordered video

> ID：11607162
> 
> 赞同：8
> 
> 时间：2012-07-23T06:00:40.227
> 
> 标签：android, mediarecorder

Is there any way to add text (e.g. date+time) to recorded by Android camera video? For video recording I'm using standard pair of classes: `Camera` and `MediaRecorder`.

What I'm looking for is shown on this screen:

![enter image description here](../Images/718c344cec5a284d1f462f232cab3442.png)

Any ideas please?

# c# - 无法加载文件或程序集“EntityFramework”或其依赖项之一

> ID：11607164
> 
> 赞同：4
> 
> 时间：2012-07-23T06:00:49.327
> 
> 标签：c#, .net, asp.net-mvc-3, entity-framework

我在 IIS 上有这个错误，但在 localhost 站点上工作很好。

无法加载文件或程序集“EntityFramework”或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，无法加载。

堆栈跟踪：

```
[BadImageFormatException: Could not load file or assembly 'EntityFramework' or one of its dependencies. This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded.]
   System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection) +0
   System.Reflection.Assembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection) +43
   System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +127
   System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +142
   System.Reflection.Assembly.Load(String assemblyString) +28
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46

[ConfigurationErrorsException: Could not load file or assembly 'EntityFramework' or one of its dependencies. This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded.]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +613
   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +203
   System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +105
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178
   System.Web.Compilation.BuildProvidersCompiler..ctor(VirtualPath configPath, Boolean supportLocalization, String outputAssemblyName) +54
   System.Web.Compilation.ApplicationBuildProvider.GetGlobalAsaxBuildResult(Boolean isPrecompiledApp) +232
   System.Web.Compilation.BuildManager.CompileGlobalAsax() +52
   System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +337

[HttpException (0x80004005): Could not load file or assembly 'EntityFramework' or one of its dependencies. This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded.]
   System.Web.Compilation.BuildManager.ReportTopLevelCompilationException() +58
   System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +512
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters) +729

[HttpException (0x80004005): Could not load file or assembly 'EntityFramework' or one of its dependencies. This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +8894031
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +85
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +333 
```

请帮忙

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T06:03:21.987

检查网站的 IISPool 并使其使用最新版本的 .Net。这将解决您的问题。

请参阅下面的快照！

![在此处输入图像描述](../Images/0d81647dfb483cbea051fdfee379ea10.png)

# .net - .NET/CLR 上的 Scala 中的具体泛型

> ID：11607170
> 
> 赞同：5
> 
> 时间：2012-07-23T06:01:30.840
> 
> 标签：.net, scala, generics, language-design, type-erasure

Scala（至少在[JVM](https://en.wikipedia.org/wiki/Java_virtual_machine)上）使用[类型擦除](https://stackoverflow.com/tags/type-erasure/info)来实现 Java 兼容性。这个[功能](https://softwareengineering.stackexchange.com/questions/55047/what-is-the-greatest-design-flaw-you-have-faced-in-any-programming-language)被[广泛](https://stackoverflow.com/questions/1357906/is-it-possible-for-scala-to-have-reified-generics-without-changing-the-jvm) [持有](https://stackoverflow.com/questions/8582479/overloading-generic-event-handlers-in-scala) [吸](https://stackoverflow.com/questions/8605329/reified-generics-in-scala-2-10)。[_](https://stackoverflow.com/questions/1094173/how-do-i-get-around-type-erasure-on-scala-or-why-cant-i-get-the-type-paramete) [在 JVM 上解决这个问题会很困难](https://stackoverflow.com/questions/1357906/is-it-possible-for-scala-to-have-reified-generics-without-changing-the-jvm)。

[与 JVM 的情况相比，.NET 支持具体化的泛型。](https://en.wikipedia.org/w/index.php?title=Comparison_of_C_Sharp_and_Java&oldid=503563938#Type_erasure_versus_reified_generics)[Scala 的 .NET 实现](http://www.scala-lang.org/node/168)是否使用它们？如果不是，可以吗，否则使用具体化会导致什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:27:54.563

它正在进行中，小心不要破坏 JVM 和 .NET 之间的 Scala 语义。

早在 2011 年，我就在 scala-tools 邮件列表上问过这个问题，Miguel Garcia 给出了答案，他在其中概述了大局：

一些报价：

> (1) Scala.Net 预览版目前做了什么。正如您所注意到的，擦除阶段也作为管道的一部分运行。这是预览版的一个“功能”，一个必须包含的“功能”，因为还没有对 CLR 泛型的支持（更多内容见下文）。然而，在 Scala.Net 中运行 JVM 风格的擦除有一个很大的优势：所有依赖 Scala 库的 Scala 程序都可以在 .Net 上编译，而不是等待 CLR Generics 准备好。那些依赖于 Java JDK 的程序也可以被编译，这取决于 IKVM 对相关 JDK API 的支持 [1]。
> 
> (2) Scala.Net 中对 CLR 泛型的支持。支持它的主要动机是获得与现有程序集的互操作性。在获得这种互操作性时，将注意不要脱离 Scala 语义。换句话说，任何有效的 Scala 程序都将在 JVM 和 .NET 上运行并产生相同的结果。这将我们带到了正在进行的工作 [2]。初始原型仅处理 Scala 的 C# 子集。所以现在我要解决剩下的问题。这比最初预期的要多，但覆盖整个语言很重要。
> 
> 关于与 .NET 程序集的互操作的更多评论，特别是本机问题。是的，CLR 程序集可以使用“native int”（不同 CPU 上的不同大小）、由 .dll 导出的 C 函数的 P/Invoke 等来表达。Scala.Net 不打算做这种低级的诡计。感兴趣的程序集互操作性处于“公共语言规范”级别，即通常从任何 C#、VB.NET 等编译器获得的内容（“通常”，即除非使用“[DllImport]”属性和相关的 C++-isms ）。
> 
> 引用 CLI 规范：
> 
> --- 开始引用 --- 公共语言规范 (CLS) -- CLS 是语言设计者和框架（即类库）设计者之间的协议。它指定了 CTS（通用类型系统）的一个子集和一组使用约定。语言通过至少实现属于 CLS 的 CTS 的那些部分，为其用户提供访问框架的最大能力。类似地，如果框架的公开导出方面（例如，类、接口、方法和字段）仅使用属于 CLS 的一部分并遵守 CLS 约定的类型，那么框架将得到最广泛的使用。--- 结束报价 ---

查看整个线程：

[https://groups.google.com/forum/?fromgroups#!topic/scala-tools/JDjstK1_uvM](https://groups.google.com/forum/?fromgroups#!topic/scala-tools/JDjstK1_uvM)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T13:50:11.857

从[这个问题](https://stackoverflow.com/questions/6950572/for-scala-are-there-any-advantages-to-type-erasure)的答案中，您可以认为在 VM 中保留泛型可能根本不是优势，因为它仍然会决定可以表示什么以及类型之间的关系是什么。（更深入的，请访问 Ola Bini 的[原始博客](http://olabini.com/blog/2010/07/questioning-the-reality-of-generics/)）。

其他示例：

*   [比较类型擦除在 Scala 和 Java 中的影响](http://lampwww.epfl.ch/~emir/bqbase/2006/10/16/erasure.html)（相当旧，2006 年）- Burak Emir 的博客文章，总结

> 擦除似乎不仅对向后兼容有用，而且因为动态类型语言所提倡的完整运行时类型信息是有代价的。.NET CLR 泛型的设计通过代码专业化解决了这一成本问题。上述案例应该清楚地表明它何时是擦除以及何时应归咎于特定缺陷的语言。

*   [关于擦除的思考](http://www.scala-lang.org/node/7212)- 邮件列表线程。例如大卫波拉克：

> 网络是，如果 JVM 已经具体化了泛型（没有类型擦除），就不可能实现 Scala 的类型系统...... Scala 的类型系统比 Java 的更复杂，如果 JVM 有基于 Java 泛型的泛型，在 Scala 中我们仍然会遇到问题。另一方面，类型擦除允许编译器实现复杂的类型系统，即使所有类型信息在运行时都不可用。

* * *

据我所知，Scala 的 .NET 后端远远落后于当前的 JVM 实现，也不支持 .NET 的具体化泛型。

* * *

Scala 2.10 甚至在从实际虚拟机模型中抽象类型信息的方向上*更进一步*。Martin Odersky 在一个演示文稿中展示了新的反射/具体化交互，例如[嵌入在这个条目中](http://hacking-scala.posterous.com/new-features-in-scala-210)（从 42'18" 开始）。

我相信您将能够使用类型标签（替换清单）来克服模式匹配和擦除的问题。[这个邮件列表线程](http://groups.google.com/group/scala-user/browse_thread/thread/3547cec3a60d0a2a)有一点，但我不知道它在多大程度上有效或无效。

（纯属猜测：）对于类型信息比 JVM 更少的平台的后端，寻求更多的抽象可能会有所帮助，例如对 JavaScript 的假设编译。

# android - setting of dpi in Oracle VM virtual box

> ID：11607172
> 
> 赞同：1
> 
> 时间：2012-07-23T06:01:37.937
> 
> 标签：android, android-layout, android-intent, android-emulator

I am testing my android app in Oracle VM Virtual Box, i'm using normal screen mode with dimension `320x480x16`.

When i launch the app the layout is correctly fetched from `layout-large` folder but the images are always fetched from drawable-hdpi. I am newbie to this concept. I have read some article but i am still confused. Can anybody tell me how to change/set the dpi in Oracle VM Virtual Box from the command line?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:22:49.640

我不相信你的布局很大。large 用于具有约 7 英寸显示屏的屏幕。

至于创建具有特定 DPI 的模拟器，您可以在使用 AVD 创建新模拟器时选择 DPI。模拟器控制应用程序位于 SDK 文件夹中。

您需要的硬件选项称为抽象 LCD 密度。

看到[这个](https://developer.android.com/guide/practices/screens_support.html) 以了解更多关于密度的信息。默认设置为 240，这是一个 HDPI 屏幕，您可以为 mdpi 降低它或为 xhdpi 增加它。

还要考虑一下：像 10 英寸平板电脑（例如 motorolla xoom）这样的超大屏幕具有 xlarge 布局但 mdpi 密度。因此，换句话说，更大的分辨率或尺寸并不总是意味着更密集的屏幕。

# html - AppCache 文件夹中的所有图像

> ID：11607176
> 
> 赞同：0
> 
> 时间：2012-07-23T06:01:51.930
> 
> 标签：html, caching, browser-cache, application-cache, html5-appcache

我有一个从 Web 服务获取数据（包括图像）的 Web 客户端。

我已经能够缓存 Web 客户端，因此即使他/她处于离线状态，用户也可以使用它。但是我无法缓存图像。

这是我的清单中的内容：

```
CACHE: .... http://192.168.20.50:8080/ws/images/products/* 
```

任何想法如何缓存该文件夹中的所有图像？我使用的是完整的 URL，因为我的客户有不同的 URL。(http://192.168.20.50:8080/client)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T08:46:28.433

CACHE 部分不支持通配符。在这里，您必须明确插入每个图像。但是在服务器端，您可以在列出所有文件并将它们的名称附加到清单时动态地执行此操作。

# iphone - NSArray 方法 算法逻辑

> ID：11607178
> 
> 赞同：1
> 
> 时间：2012-07-23T06:02:04.647
> 
> 标签：iphone, ios, algorithm, nsarray

我对 Objective-C 语言非常陌生，在面试中被问到一个我无法回答的问题。

我尝试了很多方法和逻辑都没有成功。在这里寻找答案：

问题是：

```
 - (NSArray *)reorderTheArraysAndMergeThemInDescendingOrder:(NSArray *)firstArray and:(NSArray *)secondArray 
```

参数中提供的两个数组都已按升序排序。

我的任务是提供一个数组作为返回变量，它将包含 firstArray 和 secondArray 的所有唯一元素，并将它们按降序排列。我不被允许使用 Objective-C 的内置排序功能（自从我进入这个领域以来，我一直在这样做）。我的变量可能只是原始变量（结果当然是一个整数数组。）。

我完全是整个编程领域的新手，非常感谢这里的一个好的答案。

修阁

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T06:20:37.057

由于提供的数组是按升序排序的，因此这个问题与经典算法非常相关[`Mergesort`](http://en.wikipedia.org/wiki/Merge_sort)（如果您从未听说过它，请查看它，这是一个经典）。

由于您的数组仅包含原始数据类型，因此可以使用它们进行比较`<`

你感兴趣的代码看起来像

```
- (NSArray *)reorderAndMergeReverse:(NSArray *)array1 and:(NSArray *)array2{

    NSMutableArray *result = [NSMUtableArray array];

     int i = array1.count-1;
     int j = array2.count-1;

     while (result.count < array1.count+array2.count){

        if ([array1 objectAtIndex:i] > [array2 objectAtIndex:j]){
             [result addObject:[array1 objectAtIndex:i]];
             i--:
        } else {
            [result addObject:[array2 objectAtIndex:j]];
             j--:
        }

     }
     return result;
} 
```

我不确定您是否要删除重复项，您的问题不是很清楚，您介意告诉我是否可以改进我的代码吗？
编辑：还是这样做了：由于您的数组已排序，因此重复项彼此相邻，因此首先不添加它们可能很容易；

```
- (NSArray *)reorderAndMergeReverse:(NSArray *)array1 and:(NSArray *)array2{

    NSMutableArray *result = [NSMUtableArray array];

     int i = array1.count-1;
     int j = array2.count-1;
     int k = 0;

     while (i>=0 || j>=0){

        if ([array1 objectAtIndex:i] > [array2 objectAtIndex:j]){
             if ([array1 objectAtIndex:i] != [result objectAtIndex:k]){
                 [result addObject:[array1 objectAtIndex:i]];
                 k++;
             }
             i--:
        } else {
            if (array2 objectAtIndex:j] != [result objectAtIndex:k]){
                   [result addObject:[array2 objectAtIndex:j]];
                   k++;
             }
             j--:
        }

     }
     return result;
} 
```

编辑：该代码中存在一些错误，因为`i`可能会变成负数并随后被用于`objectAtIndex:`，这只是为了展示这个想法，而不是提供开箱即用的代码解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:14:35.200

有很多方法可以解决这个问题。您可以反转数组，然后将第二个中的项目插入第一个，或者您可以将第二个附加到第一个然后重新使用它们。

稍后我将发布代码来演示我能找到的最简单的方法。它必须有多快和多高效？只要能完成工作，它可以是任何东西吗？

编辑：看来 Olotiarhas 打败了我。

# windows-phone-7 - 如何从隔离存储中检索数据？

> ID：11607180
> 
> 赞同：0
> 
> 时间：2012-07-23T06:02:14.190
> 
> 标签：windows-phone-7

我正在尝试从我的 windows phone 7 应用程序中的隔离存储中检索数据。实际上我将我的 web 服务响应 xml 文件存储到设备数据库中。现在我想从设备数据库中检索数据。那么我该如何找回呢？

我的代码是这样的。异

```
latedStorageSettings setting = IsolatedStorageSettings.ApplicationSettings;
 if (IsolatedStorageSettings.ApplicationSettings.Contains("latitude"))
            {
                setting.Add("latitude", ClsGetDeviceMap.lstLatitude.ElementAt<string>(i).Trim());  
            }
            else if (IsolatedStorageSettings.ApplicationSettings.Contains("longitude"))
            {
                setting.Add("longitude", ClsGetDeviceMap.lstLongLatitude.ElementAt<string>(i).Trim());
            }
            setting.Save(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:29:12.927

保存数据

```
settings[latitude]=... 
```

检索数据

```
var latitude = settings[latitude] 
```

# list - 使用List将字符串定义为字符列表，并编写递归函数返回字符串的长度

> ID：11607183
> 
> 赞同：2
> 
> 时间：2012-07-23T06:02:40.740
> 
> 标签：list, common-lisp

***任务***：使用 List 将**字符串定义为字符列表，**并编写递归函数以返回字符串的长度。

我为此作业编写了代码，但它不起作用。

以下是我的代码：

```
(defun stringlength  (string)
 ;;  "Compute the length of str."

   (if (string= string nil )   0

       (+ 1 (stringlength(subseq string 1))))) 
```

在命令行中我输入：

```
cl-user(32): (stringlength "aaa") 
```

它给了我错误：

```
Stack overflow (signal 1000)
  [condition type: synchronous-operating-system-signal] 
```

有人可以帮我吗？非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:20:15.033

```
(defun stringlength (string)
  (if (string= string nil)
      0
      (+ 1 (stringlength (subseq string 1))))) 
```

您应该记录或测试该函数是否需要一个字符列表。否则会令人困惑，因为 STRING 和字符串操作是内置在 Lisp 中的，而字符串不是列表。

你已经被它弄糊涂了;-)。`STRING=`是一个来自 Lisp 的函数，它是为内置类型定义的`STRING`。您不能使用它，因为您的任务是对字符列表执行操作。也是`SUBSEQ`错误的功能。

要替换`STRING=`，您需要一个函数来测试某些内容是否为空列表。

要替换`SUBSEQ`您需要一个函数，该函数返回删除了 head 元素的列表。

```
(stringlength "aaa") 
```

那么上面的也是错误的。您需要使用字符列表而不是内置字符串类型来调用它。看你的任务。查看函数`LIST`并查看 Lisp 中的字符是如何编写的。

# python - 按 KeyProperty 的 NDB 查询过滤器

> ID：11607186
> 
> 赞同：1
> 
> 时间：2012-07-23T06:02:50.287
> 
> 标签：python, google-app-engine, google-cloud-datastore, app-engine-ndb

我在 ndb 模型中有一个类方法，我在其中按“用户”（没问题）和“行业”进行过滤。

问题是实体**Recommendation**没有*行业*属性，但具有*Stock*属性，即 Stock 的 KeyProperty，而**Stock**具有*行业*属性

如何修复**get_last_n_recommendations_for_user_and_industry**方法以按行业过滤，即股票的 KeyProperty？

```
class Industry(ndb.Model):
    name = ndb.StringProperty()
    ...

class Stock(ndb.Model):
    name = ndb.StringProperty()
    industry = ndb.KeyProperty(kind=Industry)
    ...

    @classmethod
    def get_industry(cls):
        return cls.query(cls.ticker == cls).get().industry

class Recommendation(ndb.Model):
    user = ndb.KeyProperty(kind=User)
    stock = ndb.KeyProperty(kind=Stock)
    ...

    @classmethod
    def get_last_n_recommendations_for_user_and_industry(cls, stock_key, user_key, n):
        return cls.query(
                cls.user == user_key, 
                cls.stock.get().industry == ndb.Key('Stock', stock_key.string_id()).get().industry
            )
            .fetch(page_size) 
```

当我这样做时，我有这个错误：

```
AttributeError: 'KeyProperty' object has no attribute 'get' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T06:47:29.723

您不能通过引用属性的属性过滤/查询，您需要将行业属性添加到推荐模型并对其进行查询。

```
class Recommendation(ndb.Model):
  user = ndb.KeyProperty(kind=User)
  stock = ndb.KeyProperty(kind=Stock)
  industry = ndb.ComputedProperty(lambda e:  
    Stock.industry.get_value_for_datastore(e.stock))

  @classmethod
  def get_last_n_recommendations_for_user_and_industry(cls, industry_key, user_key, n):
    return cls.query(
            cls.user == user_key, 
            cls.industry == ndb.Key('Stock', stock_key.string_id()).get().industry
        )
        .fetch(page_size) 
```

# cocos2d-iphone - 碰撞检查问题

> ID：11607192
> 
> 赞同：0
> 
> 时间：2012-07-23T06:03:09.373
> 
> 标签：cocos2d-iphone, collision-detection, sprite

所以在我的游戏中，我有物品从屏幕顶部掉下来，当玩家（另一个精灵）抓住这些物品时，该物品会消失并在计数器上添加一个。

这是我的碰撞检查方法

```
//WHEN THE THINGS COLLIDE, THEY DISSAPEAR
- (void)update:(ccTime)dt {
CGSize winSize = [[CCDirector sharedDirector] winSize];

NSMutableArray *targetsToDelete = [[NSMutableArray alloc] init];
for (CCSprite *target in _targets) {
    CGRect targetRect = CGRectMake(
                                       target.position.x - (target.contentSize.width/2),
                                       target.position.y - (target.contentSize.height/2),
                                       target.contentSize.width,
                                       target.contentSize.height);
    BOOL playerHit = FALSE;
        CGRect playerRect = CGRectMake(
                                       _Banker.position.x - (_Banker.contentSize.width/2),
                                       _Banker.position.y -     (_Banker.contentSize.height/2),
                                       _Banker.contentSize.width,
                                       _Banker.contentSize.height);

        if (CGRectIntersectsRect(playerRect, targetRect)) {
            //[targetsToDelete addObject:target];
            playerHit = TRUE;
                [targetsToDelete addObject:target];

            break;

    }

    for (CCSprite *target in targetsToDelete) {
        [_targets removeObject:target];
        [self removeChild:target cleanup:YES];

        _targetsDestroyed++;
        [_label setString:[NSString stringWithFormat:@""]];
        if (_targetsDestroyed > 30) {
            GameWinScene *gameWinScene = [GameWinScene node];
            _targetsDestroyed = 0;
            [[CCDirector sharedDirector] replaceScene:gameWinScene];
        } else{
            NSString *killcounttext = [NSString stringWithFormat:@"Catches: %i",     _targetsDestroyed];
            self.label = [CCLabelTTF labelWithString:killcounttext fontName:@"Zapfino"     fontSize:20];
            _label.color = ccc3(225,225,225);
            _label.position = ccp(winSize.width * 0.20,winSize.height * 0.92);
            [self addChild:_label];
        }
    }

    if (targetsToDelete.count > 0) {
        [targetsToDelete addObject:target];
    }
    [targetsToDelete release];
}
} 
```

我添加了一个 CCLOG 以确保将目标添加到 targetstodelete，因为在我的下一个方法中，我随后删除了 targetstodelete 中的任何内容。CCLOG 确认正在添加目标，但并未删除它们。

这是我的删除方法

```
for (CCSprite *target in targetsToDelete) {
        [_targets removeObject:target];
        [self removeChild:target cleanup:YES];

        _targetsDestroyed++;
        [_label setString:[NSString stringWithFormat:@""]];
        if (_targetsDestroyed > 30) {
            GameWinScene *gameWinScene = [GameWinScene node];
            _targetsDestroyed = 0;
            [[CCDirector sharedDirector] replaceScene:gameWinScene];
        } else{
            NSString *killcounttext = [NSString stringWithFormat:@"Catches: %i", _targetsDestroyed];
            self.label = [CCLabelTTF labelWithString:killcounttext fontName:@"Zapfino" fontSize:20];
            _label.color = ccc3(225,225,225);
            _label.position = ccp(winSize.width * 0.23,winSize.height * 0.92);
            [self addChild:_label];
        }
    } 
```

任何帮助表示赞赏，但请不要像某些人那样只说“去学习objective-C”：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:18:38.820

在您的代码中，您编写了这些行，

```
 if (targetsToDelete.count > 0) {
        [targetsToDelete addObject:target];
    } 
```

我不明白你为什么添加这个，所以我认为有错误所以请检查，否则解释你为什么添加这个代码..

# xml - 如何在 XLST 中使用一个元素的值和另一个元素的属性求和

> ID：11607193
> 
> 赞同：0
> 
> 时间：2012-07-23T06:03:09.497
> 
> 标签：xml, xslt

我需要遍历一个 XML 文件的一部分，该文件列出了带有 ID 号的资源。执行此操作时，我将 ResourceId 存储在变量 $ResId 中。然后，对于每个 ResourceId，我需要遍历文件的不同部分，并使用 WorkUnitsYear 元素的 StartYear 和 StartMonth 属性总结在几个财政年度的每个财政年度中每个资源被分配给特定策略的小时数。当我省略对 WorkUnitsYear 元素的引用时，我能够对小时求和，但我无法找到正确的语法来对额外的年份和月份属性求和。所以首先我想帮助弄清楚如何包括月份和年份。

其次，我需要包含一些复杂的逻辑，以达到以下效果：if (StartYear = '2012' AND St​​artMonth > 6) OR (StartYear='2013' AND St​​artMonth < 7) sum to FY13 等几个财政年度。我不确定如何在 XSLT 中实现这个逻辑。

这是我到目前为止的部分代码。请注意，我已经重复了总和 - 一次仅使用资源 ID 和一次尝试包含年份的行。

```
<StrategyPool>
  <Strategy Id="109">
    <StrategyName>TNC CEs SECO</StrategyName>
    <StrategyCalculatedCosts>
      <CalculatedWho>
        <ResourceId>39</ResourceId>
        <ResourceId>43</ResourceId>
      </CalculatedWho>

      <CalculatedCosts>
        <CalculatedWorkUnitsEntries>
          <WorkUnitsEntry>
            <WorkUnitsEntryResourceId>
              <ResourceId>39</ResourceId>
            </WorkUnitsEntryResourceId>
            <WorkUnitsEntryDetails>
              <DateUnitWorkUnits>
                <WorkUnitsDateUnit>
                  <WorkUnitsYear StartYear="2012" StartMonth="7">
                  </WorkUnitsYear>
                </WorkUnitsDateUnit>
                <NumberOfUnits>4</NumberOfUnits>
              </DateUnitWorkUnits>
            </WorkUnitsEntryDetails>
          </WorkUnitsEntry>
          <WorkUnitsEntry>
            <WorkUnitsEntryResourceId>
              <ResourceId>43</ResourceId>
            </WorkUnitsEntryResourceId>
            <WorkUnitsEntryDetails>
              <DateUnitWorkUnits>
                <WorkUnitsDateUnit>
                  <WorkUnitsYear StartYear="2012" StartMonth="7">
                  </WorkUnitsYear>
                </WorkUnitsDateUnit>
                <NumberOfUnits>1</NumberOfUnits>
              </DateUnitWorkUnits>
            </WorkUnitsEntryDetails>
          </WorkUnitsEntry>
        </CalculatedWorkUnitsEntries>
      </CalculatedCosts>
    </StrategyCalculatedCosts>
  </Strategy>
</StrategyPool> 
```

预期输出是一个表格行，其中包含每个 ResourceId 的 NumberOfUnits 总和。然后我的样式表包含以下内容：

```
<xsl:for-each select="//StrategyPool/Strategy">
  <xsl:variable name="StrategyId" select="@Id" />
    <xsl:if test="StrategyCalculatedCosts/CalculatedCosts/CalculatedWho/ResourceId[text()=$ResId]">
    <tr>
      <td>
        <xsl:value-of select="StrategyName"/>
      </td>
      <td>
        ID = <xsl:value-of select="$StrategyId"/>    <br />
        <xsl:value-of select="StrategyDetails"/>
        <br />

        <xsl:variable name="CalcNode" select="StrategyCalculatedCosts/CalculatedCosts/CalculatedWorkUnitsEntries" />

        <xsl:value-of select="sum($CalcNode/WorkUnitsEntry[WorkUnitsEntryResourceId/ResourceId=$ResId]/WorkUnitsEntryDetails/DateUnitWorkUnits/NumberOfUnits)" />
        <br />
        <xsl:value-of select="sum($CalcNode/WorkUnitsEntry[WorkUnitsEntryResourceId/ResourceId=$ResId]/WorkUnitsEntryDetails/DateUnitWorkUnits[WorkUnitsYear[@StartYear='2012']]/NumberOfUnits)" />

      </td>
    </tr>
    </xsl:if>
</xsl:for-each> 
```

包含 [value-of select="sum($CalcNode] 的第一行给出了预期的总数。下一行类似，尝试包含 StartYear 给出了意外的总数 0。我正在寻求帮助以纠正该行的语法。

# asp.net - 在 asp.net 中的指定日期和时间自动更改值

> ID：11607194
> 
> 赞同：0
> 
> 时间：2012-07-23T06:03:12.813
> 
> 标签：asp.net, sql, date, triggers

我想在 asp.net 中的指定日期和时间将 sql 中表的字段的值设置为 TRUE。我怎样才能做到这一点？有没有办法在sql中使用触发器来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:26:51.793

假设您使用的是 MS SQL Server，[触发器](http://technet.microsoft.com/en-us/library/ms189799.aspx)通常用于根据`Insert, Update, Delete`命令执行操作。

如果您拥有的 asp.net 代码正在运行，那么您可以在设定的时间让它向数据库发送更新语句。

如果这就是 asp.net 程序正在做的所有事情，那么也许看看调度一个[SQL 作业](http://technet.microsoft.com/en-us/library/ms135739%28sql.105%29.aspx)

# javascript - 具有类的 div 中的子项不会在没有相同类的情况下触发 onmouseover

> ID：11607195
> 
> 赞同：0
> 
> 时间：2012-07-23T06:03:13.833
> 
> 标签：javascript, html, dom-events, onmouseover

问题：
我希望`id="TestIdName"`在另一个 div（在鼠标悬停时隐藏一个 div（）`class="IdName"`。为了检测正确的 id 名称，我正在使用：（`"TestBoxWindow" + event.target.classname`）因此，当我不将类添加到div ( `class="IdName"`，它不起作用，因为他们没有那个类。

有没有办法让它更简单，或者我必须添加`class="IdName"`到里面的每个元素`class="IdName"`？

编码：

HTML

```
<div class="SomethingElse">
    <div onmouseover="MyFunction(this)" class="IdName">
        <div class="IdName"></div>
        <p class="IdName">Search</p>
    </div>
</div>

<div id="TestIdName" 
```

在Javascript中

```
function MyFunction(x) 
    {
       document.getElementById("Test" + event.target.classname).style.display 
           = 'none';
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:10:38.273

试试这个

```
<div class="SomethingElse">
    <div onmouseover="MyFunction(this)" class="IdName">
        <div></div>
        <p>Search</p>
    </div>
</div>
<div id="TestIdName"
function MyFunction(x) 
    {
       document.getElementById("Test" + x.className).style.display 
           = 'none';
    } 
```

# cocos2d-iphone - 在 for 循环中创建 Box2d 主体

> ID：11607199
> 
> 赞同：1
> 
> 时间：2012-07-23T06:03:34.130
> 
> 标签：cocos2d-iphone, box2d-iphone

我有一个问题，在创建许多 box2d 实体并将它们添加到世界后，我的应用程序在迭代世界内部的实体时崩溃并出现 EXEC_BAD_ACCESS 错误，这是我创建实体的方式：

```
for(CXMLElement *node in obstaclesArr)
{
    b2BodyDef nObstacleBody;
    b2Body *obsBody;
    CCSprite *obstacle;

    obstacle = [CCSprite spriteWithFile:[NSString stringWithFormat:@"%@.png",[[node attributeForName:@"body"]stringValue]]];

    NSString *strX = [[node attributeForName:@"x"]stringValue];
    NSString *strY = [[node attributeForName:@"y"]stringValue];

    float x;
    float y;

    x = [strX floatValue];
    y = [strY floatValue];

    obstacle.tag = E;
    obstacle.position = ccp(x,y);
    [self addChild:obstacle z:9];

    nObstacleBody.type = b2_staticBody;
    nObstacleBody.position.Set(x/PTM_RATIO, y/PTM_RATIO);
    nObstacleBody.userData = obstacle;
    obsBody = world->CreateBody(&nObstacleBody);

    [[GB2ShapeCache sharedShapeCache]addFixturesToBody:obsBody forShapeName:[[node attributeForName:@"body"]stringValue]];
    [obstacle setAnchorPoint:[[GB2ShapeCache sharedShapeCache]anchorPointForShape:[[node attributeForName:@"body"]stringValue]]];
} 
```

这是发生崩溃的地方：

```
for (b2Body* b = world->GetBodyList(); b; b = b->GetNext())
{
    if (b->GetUserData() != NULL) {
        //Synchronize the AtlasSprites position and rotation with the corresponding body
        CCSprite *myActor = (CCSprite*)b->GetUserData();
        myActor.position = CGPointMake( b->GetPosition().x * PTM_RATIO, b->GetPosition().y * PTM_RATIO);//<-- crashes in this line
        myActor.rotation = -1 * CC_RADIANS_TO_DEGREES(b->GetAngle());
    }   
} 
```

我不知道为什么会崩溃，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:38:05.420

可能是您的 myActor 不是 cocos2d 对象？

或者

您正在从图层中移除 (removeChild:) 并尝试在之后访问？在这种情况下，保留计数将减少，并且对象将不再存在..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:45:30.267

您可以通过检查 b2Body 中的 Userdata 类型来避免崩溃。

```
for (b2Body* b = world->GetBodyList(); b; b = b->GetNext())
    {
        if (b->GetUserData() != NULL) {
            //Synchronize the AtlasSprites position and rotation with the corresponding body
            CCSprite *myActor = (CCSprite*)b->GetUserData();

            if(myActor && [myActor isKindOfClass:[CCSprite class]] )
            {
                myActor.position = CGPointMake( b->GetPosition().x * PTM_RATIO, b->GetPosition().y * PTM_RATIO);//<-- crashes in this line
                myActor.rotation = -1 * CC_RADIANS_TO_DEGREES(b->GetAngle());  
            }
        }   
    } 
```

# ruby-on-rails - 设计 - 意外的“您的用户名或密码无效”消息

> ID：11607202
> 
> 赞同：1
> 
> 时间：2012-07-23T06:03:43.600
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我有一个有趣的问题。每当我尝试访问未经授权的资源时，设计成功地将我重定向到注册页面，但是......意外地抛出“您的用户名或密码无效”。错误信息。有什么可能发生的，错了吗？任何提示将不胜感激。

非常感谢。

**编辑** 用户模型是相当标准的：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable 

  devise :registerable
  devise :omniauthable

  # boring stuff ommitted
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:01:27.277

可能是您`attr_accessor :password`在使用 Devise 时离开了，这会阻止 Devise 加密您的密码，并生成“无效的用户名/密码”消息，即使在登录字段中输入了有效数据也是如此。

# php - 将 HTML/PHP 系统转换为 ASP.net

> ID：11607205
> 
> 赞同：-3
> 
> 时间：2012-07-23T06:03:57.813
> 
> 标签：php, html, windows, asp-classic

我目前正在用 PHP/HTML 和 mySQL 构建文档模板系统。但是它只适用于浏览器。我想把它做成一个独立的软件，适用于 Windows。我怎样才能过渡到 ASP？我将使用 MS Visual Studio 2010。

是否有可能使系统成为那个窗口的盒子样式？当然我需要使用数据库来存储和调用数据。我只需要一个关于使用什么以及从哪里开始的指南。

这是文档模板的一个示例。 ![文件模板](../Images/4c0981c11c564ebcfb222461aa526079.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:37:32.400

您的问题的基本答案是，要做您想做的事，您需要丢弃已经拥有的每一行代码，然后从头开始重新开始整个事情。

VB.Net 是与 PHP 完全不同的产品，从基于浏览器的系统转向桌面应用程序是一个更大的飞跃。

这里没有人会给你一个真正能帮助你做出改变的答案，因为答案太多了。

不过给你一些小想法：

1.  您可以在本地桌面计算机上安装 PHP/Apache/MySQL。如果问题是您想在不上网的情况下使用该软件，那么您可以在您的机器上本地运行它。即使它仍在浏览器中。

2.  PHP 可用于编写桌面应用程序。有一个名为[PHP GTK](http://gtk.php.net/)的库允许您执行此操作。它将涉及对您的系统的*大量*更改，但它仍然是 PHP，因此它可能对您有所帮助。

3.  如果只是浏览器本身的问题，您可以在 Visual Studio 中编写一个小型桌面程序，将现有的 HTML 系统加载到 webview 控件中。

4.  您询问了有关编写 ASP 代码的问题。ASP 和 PHP 一样也是基于 Web 的系统，因此不适合编写桌面应用程序。如果你想这样做，你需要使用 VB.Net。您还在问题标签中使用了标签“asp-classic”。这是一个非常旧的 ASP 版本，不再受支持。如果您确实编写 ASP 代码，那将是 ASP.Net。但是，如果您想编写桌面应用程序，最好使用 VB.Net 编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:09:17.697

您可能必须重新开始，如果您以 .NET 语言开始项目，则可能是可行的，并且转换为独立项目并不难。我认为数据库应该是可用的，这实际上可能是最重要的部分。

# c# - string.GetHashCode() 唯一性和冲突

> ID：11607206
> 
> 赞同：7
> 
> 时间：2012-07-23T06:04:12.943
> 
> 标签：c#, .net

给定两个不同的字符串，总是这样`s.GetHashCode() != s1.GetHashCode()`吗？

不同整数的数量是否小于不同字符串的数量？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T06:05:51.737

不。就像一个简单的思想实验：有多少个字符串（提示：比 2 ^(32)多得多，因此可以有多少个唯一的哈希码（提示：2 ^(32)。[看到问题了吗？](http://en.wikipedia.org/wiki/Pigeonhole_principle)）

只要返回两个对象相等，哈希码就必须*相等。*`Equals`此外，每当两个哈希码*不*相等时，对象本身就不可能相等。没有进一步的要求，但它们*应该*分布良好，以便哈希表能够很好地执行。所以基本上是：

![在此处输入图像描述](../Images/5d436ddc6c504f60d9b41c92c5335fb4.png)

请注意省略了相应的 ⇐ 变体。这不是等价的，只有两个含义。

引用[文档](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)：

> 哈希函数必须具有以下属性：
> 
> 1.  如果两个对象比较相等，则每个对象的 GetHashCode 方法必须返回相同的值。但是，如果两个对象比较不相等，则两个对象的 GetHashCode 方法不必返回不同的值。
>     
>     
> 2.  只要确定对象的 Equals 方法的返回值的对象状态没有修改，对象的 GetHashCode 方法就必须始终返回相同的哈希码。请注意，这仅适用于应用程序的当前执行，并且如果再次运行应用程序，则可以返回不同的哈希码。
>     
>     
> 3.  为了获得最佳性能，散列函数必须为所有输入生成随机分布。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T06:06:49.307

要添加到@Joey 的声明中，您*主要是*能让哈希码始终不相等。

有 2^32 个可能的哈希码，但输入字符串是无限的。

哈希冲突*保证*发生在足够的 (2^32 + 1) 输入值。

事实上，由于[生日问题](http://en.wikipedia.org/wiki/Birthday_problem)，哈希冲突比人们想象的要普遍得多。当我不久前为使用 64 位哈希码的系统进行数学计算时（它具有比 32 位哈希码更多*的*可能哈希值，而不是天真地认为的两倍），具有 1 亿个输入值，这是非常可能会有至少 1 次哈希冲突。我认为概率在 1% 左右。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-07T08:19:25.343

据我所知`Object.GetHashCode()`，没有在对象上提供哈希函数（所以我认为 Joey 的考虑在这种情况下是不正确的），它只返回一个由 CLR 分配给对象的唯一索引，当对象被创建和释放时垃圾收集。

所以你不能在给定的时刻有一个哈希码重复（在同一个 AppDomain 中），但你可以有一个重复的时间（在应用程序执行期间可能会多次分配相同的索引）。

这里也讨论了这个问题： [Object.GetHashCode() 的默认实现](https://stackoverflow.com/questions/720177/default-implementation-for-object-gethashcode)

# facebook-graph-api - Facebook News Feed 不返回所有帖子

> ID：11607207
> 
> 赞同：1
> 
> 时间：2012-07-23T06:04:18.123
> 
> 标签：facebook-graph-api, feed

我从 facebook home api 获取 facebook 新闻提要数据，但是当我将它与我的 facebook 帐户和从 api 返回的数据进行比较时，它是不同的，API 返回数据中缺少一些帖子。

那么这可能是什么原因呢？如果有任何许可问题，那么请建议我需要提供什么样的许可？

如果新闻提要中看不到任何类型的数据，那么我还需要有关 facebook home API 不支持哪种数据的详细信息。

您的回答将不胜感激。

谢谢，阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T13:13:56.457

有些帖子可能是私密的（例如，您发布了一些内容，并且只对您的朋友可见），并且 API 将只获取公开帖子。

访问您的 Facebook 提要并检查您看不到的帖子的隐私设置。

# iphone - NSURLErrorDomain 错误 -1012

> ID：11607214
> 
> 赞同：10
> 
> 时间：2012-07-23T06:05:04.720
> 
> 标签：iphone, ios, nsurlconnection, nsurlrequest, nsurlcredential

我需要从受密码保护的 URL 解析 xml 文件我尝试了以下操作

```
NSURLCredential *credential = [NSURLCredential credentialWithUser:@"admin"  password:@"123456" persistence:NSURLCredentialPersistenceForSession];
NSURLProtectionSpace *protectionSpace = [[NSURLProtectionSpace alloc]
                                         initWithHost:@"xyz.com"
                                         port:80
                                         protocol:@"http"
                                         realm:nil
                                         authenticationMethod:NSURLAuthenticationMethodDefault];  
[[NSURLCredentialStorage sharedCredentialStorage] setCredential:credential
                                             forProtectionSpace:protectionSpace];    
url = [NSURL URLWithString:urlString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"GET"];
[request setValue:@"application/xml" forHTTPHeaderField:@"Content-Type"];
connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
NSURLResponse *response;
NSError *error;
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse: &response error: &error];   
 NSString *dataStr=[[NSString alloc]initWithData:returnData encoding:NSUTF8StringEncoding]; 
 NSLog(@"data == %@\n error in connecting == %@",dataStr,error); 
```

我得到以下回复

```
data == <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>401 Authorization Required</title>
</head><body>
<h1>Authorization Required</h1>
<p>This server could not verify that you
are authorized to access the document
requested.  Either you supplied the wrong
credentials (e.g., bad password), or your
browser doesn't understand how to supply
the credentials required.</p>
<p>Additionally, a 401 Authorization Required
error was encountered while trying to use an ErrorDocument to handle the request.</p>
</body></html> 
```

连接错误==错误域=NSURLErrorDomain代码=-1012“操作无法完成。（NSURLErrorDomain错误-1012。）”UserInfo=0x6e51b90 {NSErrorFailingURLKey= [http://example.com/api/ID/password/ xml/](http://example.com/api/ID/password/xml/) ,

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-29T09:23:59.823

在使用`NSURLRequest`访问服务器时， 的委托方法`NSURLConnection`提供了一种在*身份验证受到挑战*时*得到通知*的方法。

 *下面的示例将显示一种处理要求凭据的 URL 的方法。

```
- (void)CallPasswordProtectedWebService
{
 NSURL *url = [NSURL URLWithString:@"your url"];
 NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url];
urlConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];
}

//when server asks the credentials this event will fire

 - (void)connection:(NSURLConnection *)connection 
  didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{

 if ([challenge previousFailureCount] == 0) {
    NSURLCredential *newCredential;
    newCredential=[NSURLCredential credentialWithUser:@"username"                                               password:@"password"                                              persistence:NSURLCredentialPersistenceNone];
    [[challenge sender] useCredential:newCredential
           forAuthenticationChallenge:challenge];
} else {
    [[challenge sender] cancelAuthenticationChallenge:challenge];
}
}

//when connection succeeds this event fires

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
 NSLog(@"Successfuly connected ");  

}

//when connection fails the below event fires 

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
 NSLog(@"connection failed");

} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-03T15:30:46.503

在我的情况下，**问题是由防火墙/代理要求所有 HTTPS 调用的客户端证书引起的**。我通过提供 NSURLProtocol 子类来处理身份验证挑战并提供此证书来解决此问题。

```
[NSURLProtocol registerClass:self];

//implement these methods
- (void)didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;

- (void)resolveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge withCredential:(NSURLCredential *)credential; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T16:01:47.207

使用 Xcode 6，即使在早期的 IOS 上运行良好，我的应用程序也不会在 IOS 8 平台上下载大量文件。我的代码基本上与您在下面的代码一样，但是当身份验证挑战到来时，错误仍然出现。

我不得不将代码更改为

```
 if ([challenge previousFailureCount] == 0) {
    NSURLCredential *newCredential;
    newCredential=[NSURLCredential credentialWithUser:@"username"                                               password:@"password"                                              persistence:NSURLCredentialPersistenceForSession];
    [[challenge sender] useCredential:newCredential
           forAuthenticationChallenge:challenge];
} else {
   NSURLCredential *newCredential;
    newCredential=[NSURLCredential credentialWithUser:@"username"                                               password:@"password"                                              persistence:NSURLCredentialPersistenceForSession];
    [[challenge sender] useCredential:newCredential
           forAuthenticationChallenge:challenge];
} 
```

这当然使 IF 语句变得多余（它可以被删除）。我没有解释，但即使在持久会话中也没有使用用户名和密码响应挑战，会导致错误（-1012）。现在它可以像在早期的 IOS 上一样工作*

# android - 寻找 FreeImage.so

> ID：11607215
> 
> 赞同：1
> 
> 时间：2012-07-23T06:05:13.383
> 
> 标签：android, c, freeimage

谁能告诉我在哪里可以找到 freeImage.so？我一直在努力寻找相同的内容，但没有成功。任何帮助将不胜感激。我已尝试将 freeimage.a 转换为 freeImage.so 和那还没有奏效。提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:37:54.757

您可以自己从 FreeImage 源编译 .so。只需添加`BUILD_SHARED_LIBRARY`到 FreeImage 的`Android.mk`. 您还需要一个正确的头文件才能将 .so 中的函数导入到您的项目中。

PS你为什么不喜欢静态库.a？

# c++ - 为什么 gloox 不起作用？

> ID：11607222
> 
> 赞同：0
> 
> 时间：2012-07-23T06:05:59.133
> 
> 标签：c++, chat, ubuntu-12.04, gloox

我正在尝试使用 C++ gloox 库，首先我尝试从这里运行示例
[https://github.com/knatten/blog.knatten.org/blob/master/gloox/bot.cpp](https://github.com/knatten/blog.knatten.org/blob/master/gloox/bot.cpp)

然后我尝试了另一个给定的示例，但我什至看不到我的客户在线......我怎样才能发送至少发送存在信息并在线？我的电脑有问题吗？我正在使用 Ubuntu。

```
#include <gloox/client.h>
#include <gloox/messagehandler.h>
#include <gloox/message.h>
#include <gloox/presencehandler.h>
#include <gloox/connectionlistener.h>
#include <iostream>
#include <string>
using namespace std;
using namespace gloox;
//my one
const string LOGIN = "gmail.com"; 
ostream& operator<<(ostream& os, Message::MessageType type) {
    switch (type) {
        case Message::Chat:
            os << "Chat";
            break;
        case Message::Error:
            os << "Error";
            break;
        case Message::Groupchat:
            os << "Groupchat";
            break;
        case Message::Headline:
            os << "Headline";
            break;
        case Message::Normal:
            os << "Normal";
            break;
        case Message::Invalid:
            os << "Invalid";
            break;
        default:
            os << "unknown type";
            break;
    }
return os;
}

ostream& operator<<(ostream& os, const Message& stanza) {
    os << "type:'" << stanza.subtype() <<  "' from:'" << stanza.from().full() << "' body:'" << stanza.body() << "'";
    return os;
}

class Bot : public MessageHandler, 
            /*public PresenceHandler,*/
            public ConnectionListener
            /*,public RosterListener*/{
 public:
   Bot(){
      JID jid( "mmaaria123@gmail.com/home" );
      client = new Client( jid, "mmaaria123" );
      client->registerConnectionListener( this );
      client->registerMessageHandler( this );
      client->connect(true);
   }

    virtual void onConnect() {
        cout << "It is connected good:)"  << endl;
        sleep(5);
        client->disconnect();
    }

    virtual void onDisconnect(ConnectionError e) {
        cout << "ConnListener::onDisconnect() " << endl;
    }

    virtual bool onTLSConnect(const CertInfo& Info) {

       time_t tm = Info.date_from;
       time_t tm_to = Info.date_to;
       cout << "\t Certificate information to " << LOGIN << endl;
       cout << "\t========================================" << endl;
      // number code << "\tServer status: " << Info.status;
        if (Info.status !=0)
            {
            cout << "\t !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!" << endl;
            cout << "\t !!!  The certificate has a problem !!!" << endl;
            cout << "\t !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!" << endl;
            // parsing binary Status Cert
            if ((CertInvalid) & Info.status)
                {
                    cout << "\t- The certificate is not trusted " << endl;
                }
            if (( CertSignerUnknown) & Info.status)
                {
                    cout << "\t- The certificate hasn't got a kown issuer" << endl;
                }
            if ((CertRevoked) & Info.status)
                {
                    cout << "\t- The certificate has been revoked " << endl;
                }
            if ((CertExpired) & Info.status)
                {
                    cout << "\t- The certificate has expired " << endl;
                }
            if ((CertNotActive) & Info.status)
                {
                    cout << "\t- The certificate is not yet active " << endl;
                }
            if ((CertWrongPeer) & Info.status)
                {
                    cout << "\t- The certificate has not issued for the peer we're connected to " << endl;
                }
            if ((CertSignerNotCa) & Info.status)
                {
                    cout << "\t- The signer is not CA " << endl;
                }
            cout << endl;
            }
            // end parsing
        else
            // if Info.status=0 sertificate is valide
            cout << " *** Cert is OK!" << endl;

       cout << "\tChain: " << Info.chain << endl;
       cout << "\tIssuer: " << Info.issuer << endl;
       cout << "\tServer: " << Info.server << endl;
       cout << "\tCert date from: " << ctime(&tm);
       cout << "\tCert date to: " << ctime(&tm_to);
       cout << "\tProtocol: " << Info.protocol << endl;
       cout << "\tCipher: " << Info.cipher << endl;
       cout << "\tMAC: " << Info.mac << endl;
       cout << "\tCompression: " << Info.compression << endl;
       cout << "\t========================================" << endl;
     return true;

    }

   virtual void handleMessage( const Message& stanza,
                               MessageSession* session = 0 ){
     Message msg(Message::Chat, stanza.from(), "hello world" );
     client->send( msg );
   }

 private:
   Client* client;
};

int main( int argc, char* argv[] ){
    cout << "1" << endl;
    Bot b;
} 
```

在控制台中，它打印证书不受信任证书没有已知的颁发者但是 onTLSConnect 总是返回 true，所以它至少应该是在线的......最后它应该打印“它连接良好:)”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:57:18.803

检查您的代码，`onTLSConnect`只有一个`return`语句，即`return true;`在末尾。它永远不会返回`false`任何地方。

# php - 如何使整数数组适合某个范围？

> ID：11607228
> 
> 赞同：1
> 
> 时间：2012-07-23T06:06:56.563
> 
> 标签：php, arrays, normalization

只需说我想获取一组数字：

```
$a['a'] = 10;
$a['b'] = 20;
$a['c'] = 500;
$a['d'] = 1000; 
```

并强制它们适应一个范围（例如 1 到 100），如下所示：

```
$a['a'] = 1;
$a['b'] = 2;
$a['c'] = 50;
$a['d'] = 100; 
```

另一个例子...

从：

```
$a['a'] = 12;
$a['b'] = 28; 
```

到：

```
$a['a'] = 1;
$a['b'] = 100; 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T06:10:37.873

***更新：***

现在我明白了你真正想要什么，你需要使用这个公式：

```
 (new_max - new_min)(x - min)
f(x) = ----------------------------  + new_min
                max - min 
```

例如：

```
$a = [
    'a' => 10,
    'b' => 20,
    'c' => 500,
    'd' => 1000,
];
$min = min($a);
$max = max($a);
$new_min = 1;
$new_max = 100;
foreach ($a as $i => $v) {
    $a[$i] = ((($new_max - $new_min) * ($v - $min)) / ($max - $min)) + $new_min;
}
var_dump($a); 
```

示例：[http ://codepad.viper-7.com/hwGnhJ](http://codepad.viper-7.com/hwGnhJ)

* * *

***老答案：***

您可以使用[`array_walk`](http://php.net/manual/en/function.array-walk.php), 和[`min`](http://php.net/manual/en/function.min.php)/ [`max`](http://php.net/manual/en/function.max.php)：

```
$a = [1, 2, 1000];
array_walk($a, function(&$value) {
    $value = max(min($value, 100), 1);
});
var_dump($a); 
```

示例：[http ://codepad.viper-7.com/jjOCjx](http://codepad.viper-7.com/jjOCjx)

或者只是一个简单的`foreach`and `if`：

```
foreach ($a as $i => $v) {
    if ($v > 100) $a[$i] = 100;
    elseif ($v < 1) $a[$i] = 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:21:08.397

您好，您可以通过以下方式执行此操作。

```
$a['a'] = 10;
$a['b'] = 20;
$a['c'] = 500;
$a['d'] = 1000; 

$range =10; // you can define the range here which you want.

foreach($a as $k=>$v)
{

    $a[$k] = $v/$range;

}

print_r($a); 
```

# asynchronous - 异步 JMS 消息传递

> ID：11607229
> 
> 赞同：2
> 
> 时间：2012-07-23T06:07:00.637
> 
> 标签：asynchronous, jms

如何实现异步 JMS 应用程序？是否有必要更改服务器程序或者我应该更改客户端代码？我想知道如何将同步 JMS 消息传递更改为异步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:31:03.510

很简单。您需要为您的消费者分配一个消息侦听器以异步接收消息。

```
consumer.setMessageListener(new MessageListener). 
```

谷歌搜索会给你一些样本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:52:45.657

Java EE 中的消息驱动 Bean 是异步的。自然地。一个简单的 MDB 可能如下所示：

```
@MessageDriven(mappedName = "jms/MyQueue") // JNDI name for a specific Destination (queue or topic)
public class MyMDB implements MessageListener{
  public void onMessage(Message msg){
    // handle it async.

  }
} 
```

否则，在普通的 java/JMS 中，它几乎一样简单，相同的代码，但不是 @MessageDriven 注释，而是必须完成一些初始化代码来让 JMS 使用者启动并运行。当然，还必须完成标准 JMS 设置过程，例如获取连接工厂、创建连接和查找目标。

```
public class MyConsumer implements MessageListener{ 

  public void init(Connection conn, Destination dest){
    // connection and destination from JNDI, or some other method.
    Session sess = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);
    MessageConsumer cons = sess.createConsumer(dest);
    cons.setMessageListener(this);
    conn.start();
  }

  @Override
  public void onMessage(Message msg) {
    // Do whatever with message

   }
} 
```

# php - cakephp分页表中每5行标题行

> ID：11607232
> 
> 赞同：-2
> 
> 时间：2012-07-23T06:07:12.770
> 
> 标签：php, cakephp, pagination

如何在 cakephp 分页表中每 5 行放置一个标题行？

我希望所有行都在同一页面上，因此我将其设置为每 100 行分页一次。我只有 40 行，所以它们显示在一页上，这是我想要的，但标题在顶部，当用户滚动时不可见。（我知道这就是他们必须分页的原因，但我希望所有行都在同一页上）。

直接使用 PHP 没问题，只需每 5 行计数一次并插入标题行；但是我如何用 CakePHP 做到这一点？

我一直在我的控制器和视图中摆弄分页，但很难将 html 和 php 与`:`

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:48:12.497

你为什么不做一个固定的标题？这似乎比制作 10 个标题更合乎逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T17:29:02.550

没有“蛋糕”的方法可以做到这一点的建议很有帮助，并引导我回到普通的旧 php 寻求解决方案。

我最终做了简单的 if else 循环使用行计数器使用控制器分页器计数器，它将每 x 行插入一个标题行。

```
<?php 
$count = $this->Paginator->counter(array('format' => '{:count}'));
$i = 0;
foreach ($cards as $card) {
     $count++;
     if($count%10==0){
     //&& ($count == 30 || $count == 40 || $count == 50)
    INSERT HEADER ROW (using html)
            INSERT DATA ROW  (using html and php)   
    } else {    
            INSERT DATA ROW (using html and php)
            }
 ?> 
```

# android - 如何在Android的Alert Box中动态添加按钮

> ID：11607236
> 
> 赞同：1
> 
> 时间：2012-07-23T06:07:44.410
> 
> 标签：android, button, dynamic, android-alertdialog

我正在开发用于验证的 android 应用程序，它显示带有警报框的消息。我想根据某些条件动态添加按钮。我喜欢问如何做到这一点？我在谷歌上搜索，但找不到任何合适的解决方案。

任何建议都是有帮助的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:43:14.807

您可以使用 DialogFragment 来实现它。创建您自己的对话框视图并在对话框片段的 onCreateView() 中对其进行膨胀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:47:46.193

如果您知道可能显示的按钮：

*   将它们添加到您的布局中
*   根据您的条件，使用可见性属性来显示或隐藏它们。（[如何](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:19:04.697

我得到了答案，我在 CommandWrapper 的帮助下使用了命令设计模式。

以下链接更准确地阐述。[关联](https://developmentality.wordpress.com/2009/10/31/android-dialog-box-tutorial/)

谢谢大家的建议。

# php - 如果相同 uID 的其他行具有特定的单元格值，则查询 SELECT uID

> ID：11607237
> 
> 赞同：1
> 
> 时间：2012-07-23T06:07:48.030
> 
> 标签：php, mysql, codeigniter

我正在尝试构建一个基于 PHP 的 Web 软件，但遇到了一个我不知道解决方案语法的问题。

基本上，我有两张桌子：

```
+-------------+     +---------------+
| Certs       |     | Clients       |
+-------------+     +---------------+
| userID      |     | eID           |
| prodID      |     | prods         |
| prodName    |     +---------------+
+-------------+ 
```

在这里，个人购买的每个产品都由他唯一的用户 ID 和产品的唯一 prodID 存储。

客户就像卖家，他们自己有不同的 ID，prods 是一串逗号分隔的产品 ID。

certs 表中的示例行如下所示：

```
userID  |  prodID  |  prodName
------------------------------
9000    |  42      |  Pen     
4234    |  54      |  Pencil
9000    |  54      |  Pencil 
```

一个示例客户端行将如下所示：

```
eID  |  prods
-------------
595  |  42,54 
```

现在，我需要形成一个查询，返回已购买特定卖家所有产品的所有用户 ID。

例如，对于卖家 ID 595，它应该返回 9000，因为用户 ID 9000 同时购买了 42 和 54。

为方便起见，可以修改表结构，但是由于其他技术问题，我无法创建与其卖家相关的标准化产品列表。

任何帮助将非常感激！谢谢~

注意：另一种说法是将卖家的产品列表保存在结果类型数组中。然后**SELECT** prodID **FROM** certs **WHERE** userID = x 最后检查 prodID 的结果数组是否包含数组 prods 的所有元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:18:53.047

试试这个解决方案：

```
SELECT a.userID
FROM certs a
INNER JOIN clients b ON b.eID = 595 AND FIND_IN_SET(a.prodID, b.prods) > 0
CROSS JOIN
(
    SELECT (LENGTH(prods) - LENGTH(REPLACE(prods, ',', ''))) + 1 AS prodcnt
    FROM clients
    WHERE eID = 595
) c
GROUP BY a.userID, c.prodcnt
HAVING COUNT(1) = c.prodcnt 
```

* * *

## 这个怎么运作：

```
CROSS JOIN
(
    SELECT (LENGTH(prods) - LENGTH(REPLACE(prods, ',', ''))) + 1 AS prodcnt
    FROM clients
    WHERE eID = 595
) c 
```

这样做是将特定卖家拥有的 prodID 数量的计数附加到每一行。我们通过获取 CSV 列表的字符串长度并减去相同的 CSV 列表但不带逗号的长度来计算它，然后在差值上加一。例子：

**" " 的**字符串长度**`54,234,436`为 10。**

 **替换逗号：

**" " 的**字符串长度**`54234436`为 8。**

 **那么 (10-8)+1 = 3。

列表中的三个项目。

* * *

我们使用和[`FIND_IN_SET`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)之间的连接条件来确定 CSV列表中是否存在。`certs``clients``prodID``prods`

`FIND_IN_SET`基本上返回 CSV 列表中特定项目的从 1 开始的索引位置。例如：

```
FIND_IN_SET('54', '34,76,54,128') 
```

将返回`3`，因为`54`作为列表中的第三项存在。我们只需要检查它是否存在于连接条件的列表中，因此我们只需检查它是否 > 0。如果项目不在 CSV 列表中，它将返回 0。

* * *

一旦我们有了特定客户的产品的笛卡尔连接计数，并且连接的表，中间结果集将如下所示：

```
a.userID  |  a.prodID  |  b.eID  |  b.prods  |  c.prodcnt
---------------------------------------------------------
9000      |  42        |  595    |  42,54    |  2
4234      |  54        |  595    |  42,54    |  2
9000      |  54        |  595    |  42,54    |  2 
```

这些行中的每一行都满足连接条件。

然后我们按 分组`userID`以计算每个 的行数`userID`。由于 9000 的行数与 中的重复值相同`c.prodcnt`，因此返回该行。userID`4234`被过滤掉，因为只有一行满足连接条件。****

# java - 框架上的java绘画问题

> ID：11607246
> 
> 赞同：0
> 
> 时间：2012-07-23T06:09:23.733
> 
> 标签：java, swing, jframe, paint

我正在使用以下调用从我的主类创建另一个类的对象：

```
JSplash splash = new JSplash(); 
```

但是，当我创建这个对象时，它会执行 JSplash 类的构造函数并给出我的窗口和按钮。但它不会在框架上绘制。你能帮我解决这个问题吗？

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;

/**
 *
 * @author Curtis
 */
public class JSplash extends DFrame implements ActionListener {
//declaration of variable objects
    Font myFont = new Font("Arial", Font.BOLD, 20);
    JButton myButton = new JButton("Click Me!");
    Color bgColor = new Color(0, 0, 255);
    Color firstColor = new Color(255, 255, 255);
    String first = "Welcome to DaemoDynamics!";
    String last = "Click the Button";
    String middle = "";
    String middle2 = "";
    private static int count = 1;
    DFrame splash = new DFrame();
//Constructor
    public JSplash() {
        setDefaultLookAndFeelDecorated(true);
        System.out.println("Hello");
        setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);
        splash.add(myButton);
        getContentPane().setBackground(bgColor);
        //adds action listener
        myButton.addActionListener(this);
        splash.setVisible(true);
    }
//Paint method
    @Override
    public void paint(Graphics e) {
        System.out.println("paint is being reached");
        super.paint(e);
        e.setFont(myFont);
        e.setColor(firstColor);
        e.drawString(first, 14, 80);
        e.drawString(last, 70, 240);
        e.drawString(middle, 75, 150);
        e.drawString(middle2, 60, 175);
    }

//Listener Method
    @Override
    public void actionPerformed(ActionEvent e) {
        //First Time button hit
        if (count == 1) {
            middle = "Brighter Business";
            middle2 = "for A Brighter Future";
            last = "Click Again to Begin";
            repaint();
            //increases button count
            count++;
        } else//if button count is not 1
        {
            splash.setVisible(false);
            FinalProject app = new FinalProject();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:37:03.933

You've create a NEW `DFrame` inside you `JSplash` constructor and then ADDED your components to IT. This is simply not required. Remove the reference's to splash and simply use the `DFrame` you've extended. And while i'm looking at, splash has no layout manager, which isn't going to help. The paint method is never going to be called, because the window that's displayed on the screen is never the `JSplash`, but the `DFrame` you created (called splash)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:30:42.340

创建一个扩展 JPanel 的新类。确保您的按钮已添加到该面板，并使用您的逻辑覆盖该面板的 paintComponent() 方法。这应该有效。

[参考这里。](http://docs.oracle.com/javase/tutorial/uiswing/painting/step2.html)

自定义绘画应该在 paintComponent 方法中完成。理想情况下，您不应覆盖 JFrame 的绘制方法。

# javascript - 在 html5 画布中将文本绘制为图像

> ID：11607248
> 
> 赞同：1
> 
> 时间：2012-07-23T06:10:09.053
> 
> 标签：javascript, html, text, annotations

我在一个 HTML5 项目中工作。我想绘制带边界的文本（即文本注释）。

首先，我在 mousemove 上绘制一个矩形并在其中填充文本，如下所示：

```
context.strokeRect(x,y,w,h);
context.fillText('Enter youe text here',x,y); 
```

但是当我开始绘制文本注释时，文本会完全绘制。所以文本溢出矩形边界之外。所以我想拍摄矩形部分的图像，然后我可以管理这个文本溢出问题。我正在使用以下方式来做到这一点： -

```
 context.strokeRect(x,y,w,h);
 context.fillText('Enter youe text here',x,y);
 var imageData = context.getImageData(x,y,w,h);
 var data = imageData.data;
 context.putImageData(imageData, x,y); 
```

通过这种方式，文本图像成功创建，但现在我如何隐藏 fillText(x,y,w,h) 语句，并且我还在文本的帮助下将图像数据放在矩形内。

非常感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:01:21.050

如果我理解正确，您似乎想测量文本宽度并将画布拆分？

我制作了一个小例子来解释如何使用 measureText 方法：

[http://jsfiddle.net/sQ3S7/](http://jsfiddle.net/sQ3S7/)

实际上，正如您在演示中看到的那样，它没有返回测量的高度尺寸。因此，您可能必须逐行遍历画布以找出文本的高度。

对于我的 JS 游戏引擎，我做了一个小字体工具，它完全可以做到这一点并将其导出为 JSON 格式，也许后面的算法会帮助你:)

[http://martens.ms/lycheeJS/tool/Font.html](http://martens.ms/lycheeJS/tool/Font.html)

代码可在 github.com/martensms/lycheeJS 上找到（不能发布超过两个链接，因为我是 SO 新手）

~干杯

# android - 如何在我的 Android 应用程序中获取日历页面？

> ID：11607250
> 
> 赞同：3
> 
> 时间：2012-07-23T06:10:13.213
> 
> 标签：android, calendar

我在我的应用程序中使用此代码并获得以下页面。

```
Intent calendarIntent = new Intent(Intent.ACTION_EDIT);  
            calendarIntent.setType("vnd.android.cursor.item/event");
            calendarIntent.putExtra("title", "Title");
            calendarIntent.putExtra("beginTime", new Date());
            calendarIntent.putExtra("endTime", new Date(2013,7,7));
            calendarIntent.putExtra("description", "Description");

            startActivity(calendarIntent); 
```

![在此处输入图像描述](../Images/5adb4789a6bd4e022121a2ef7bccd09e.png)

但我想要这个页面

![在此处输入图像描述](../Images/1d168739c0aa30325d17890c90c1706a.png)

我应该在我的代码中更改什么。请帮我。

![在此处输入图像描述](../Images/982b9d3d6fc7072369ef262f7cc3e42b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:23:08.057

试试这个 ：

```
 long startMillis;
    ...
    Uri.Builder builder = CalendarContract.CONTENT_URI.buildUpon();
    builder.appendPath("time");   
    ContentUris.appendId(builder, startMillis);
    Intent intent = new Intent(Intent.ACTION_VIEW).setData(builder.build());
    startActivity(intent); 
```

# java - 为什么没有排序列表

> ID：11607259
> 
> 赞同：1
> 
> 时间：2012-07-23T06:11:03.477
> 
> 标签：java

Sun 提供了`TreeSet`和`TreeMap`但没有 TreeList。他们提供了一个实用程序`Collections.sort()`来对列表进行排序。当他们提供Sorted Map和Set时，他们没有提供Sorted List的原因是什么？

这背后有什么具体原因吗？

我正在为 SCJP 做准备，所以在经历`Generics`and`Collections`时，我有这个疑问。谁能澄清一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T06:15:42.883

List API 中的第一行表示它是一个有序集合（也称为序列）。如果对列表进行排序，则无法保持顺序，因此 Java 中没有 TreeList。可能就是这种情况，您需要像您提到的那样对其进行外部排序。
正如 API 所说，Java List 从 Sequence 中获得灵感，并查看序列属性[http://en.wikipedia.org/wiki/Sequence_(mathematics)](http://en.wikipedia.org/wiki/Sequence_%28mathematics%29)

这并不意味着您不能对列表进行排序，而是 Java 严格遵守他的定义，并且默认情况下不提供列表的排序版本。

# ruby-on-rails - Rails：文件路径

> ID：11607261
> 
> 赞同：0
> 
> 时间：2012-07-23T06:11:24.003
> 
> 标签：ruby-on-rails, ruby

理论问题：如果我要创建一个目录 Dir.mkdir('/test')，这个目录会被创建为 /app/test 还是 /public/test？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:13:41.120

它将在文件系统`test`的根路径 ( `/`) 下创建，因为您指定的是绝对路径（并且很可能由于权限问题而失败）。

分别使用`Dir.mkdir('app/test')`或`Dir.mkdir('public/test')`。

# mysql - 服务器链接 - mysql 和 sql 2008 服务器链接

> ID：11607264
> 
> 赞同：2
> 
> 时间：2012-07-23T06:11:47.220
> 
> 标签：mysql, sql, sql-server, sql-server-2008

我已经使用 sql 2008 中的服务器链接完成了数据迁移。但目前它无法正常工作。

**无法初始化链接服务器“MYSQL”的 OLE DB 提供程序“MSDASQL”的数据源对象。链接服务器“MYSQL”的 OLE DB 提供程序“MSDASQL”返回消息“[Microsoft][ODBC Driver Manager] 无法初始化的数据源对象OLE DB 提供程序 +未找到数据源名称且未指定默认驱动程序”。（Microsoft SQL Server，错误：7303）**

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:11:45.107

请检查我们的 DSN 连接。

您可能会将其添加到用户 DSN 而不是系统 DSN。

如果您将 DSN 添加到用户 DSN 中，它将返回 7303 错误代码，但如果您将 DSN 创建为系统 DSN，它将起作用。

# linux - 组装-为什么打印顺序相反？

> ID：11607267
> 
> 赞同：2
> 
> 时间：2012-07-23T06:12:11.017
> 
> 标签：linux, assembly, x86

小端：

```
mov eax,4
push dword  0x44434241
mov ebx,1
mov ecx,esp
mov edx,4
int 0x80
add esp,4 
```

我不明白为什么它打印 ABCD 而不是 DCBA。41在最低地址，44在最高地址，为什么？例如，当我写

```
x: dd 0x12345678 
```

78 在最低地址，但这里的数字仍然不是 78563412 而是 12345678。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:58:10.543

`0x12345678`是一个 32 位的值，它在一个 little-endian 系统上表示`0x78`，最低地址（我们称之为 address `addr`）和`0x12`最高地址：

```
 addr   addr+1  addr+2  addr+3                single 32-bit number
+----+  +----+  +----+  +----+                  +--------------+
| 78 |  | 56 |  | 34 |  | 12 |    represents    |   12345678   |
+----+  +----+  +----+  +----+                  +--------------+ 
```

并且 32 位值`0x44434241`存储`0x41`在最低地址和`0x44`最高地址：

```
 addr   addr+1  addr+2  addr+3                single 32-bit number
+----+  +----+  +----+  +----+                  +--------------+
| 41 |  | 42 |  | 43 |  | 44 |    represents    |   44434241   |
+----+  +----+  +----+  +----+                  +--------------+ 
```

但是您的第一个示例中的代码*没有*将内存用作 32 位数字：它使用`write`系统调用将*字节序列*写入`stdout`. 这个字节序列是按照它们在内存中存储的顺序写入的：

```
 addr
+----+
| 41 |    =>   single byte 'A' is printed, then...
+----+

addr+1
+----+
| 42 |    =>   ...single byte 'B' is printed, then...
+----+

addr+2
+----+
| 43 |    =>   ...single byte 'C' is printed, then...
+----+

addr+3
+----+
| 44 |    =>   ...single byte 'D' is printed
+----+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:15:54.210

我相信这是正在发生的事情->“最常见的情况是指字节在单个 16、32 或 64 位字中的排序方式，并且字节顺序与字节顺序相同。通常的对比是在较大的数据项中，最高有效字节还是最低有效字节首先排序——即，在最低字节地址。”

来自[维基百科](http://en.wikipedia.org/wiki/Endianness)

# java - 如何检查给定的字符串是否是一个单词

> ID：11607270
> 
> 赞同：5
> 
> 时间：2012-07-23T06:12:45.220
> 
> 标签：java, android, string, dictionary

您好，我正在开发一个文字游戏，我想检查用户输入是否为有效单词，请建议我可以在 android 中检查给定字符串的方式。

例如。String s = "asfdaf" 我想检查它是否有效。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T06:32:26.803

有很多可能的解决方案，其中一些如下

使用网络词典 API

[https://developer.oxforddictionaries.com/](http://developer.dictionary.com/)

[http://googlesystem.blogspot.com/2009/12/on-googles-unofficial-dictionary-api.html](http://googlesystem.blogspot.com/2009/12/on-googles-unofficial-dictionary-api.html)

[http://www.dictionaryapi.com/](http://www.dictionaryapi.com/)

如果您更喜欢本地解决方案

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

class WordChecker {
    public static boolean check_for_word(String word) {
        // System.out.println(word);
        try {
            BufferedReader in = new BufferedReader(new FileReader(
                    "/usr/share/dict/american-english"));
            String str;
            while ((str = in.readLine()) != null) {
                if (str.indexOf(word) != -1) {
                    return true;
                }
            }
            in.close();
        } catch (IOException e) {
        }

        return false;
    }

    public static void main(String[] args) {
        System.out.println(check_for_word("hello"));
    }
} 
```

这使用在所有 Linux 系统上找到的本地单词列表来检查单词

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-09T16:20:03.853

首先，从例如下载一个单词列表[`here`](https://github.com/dwyl/english-words/blob/master/words.txt)。将其放在项目的根目录中。使用以下代码检查 a 是否[`String`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html)是单词列表的一部分：

```
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.Collections;
import java.util.HashSet;
import java.util.Set;

public class Dictionary
{
    private Set<String> wordsSet;

    public Dictionary() throws IOException
    {
        Path path = Paths.get("words.txt");
        byte[] readBytes = Files.readAllBytes(path);
        String wordListContents = new String(readBytes, "UTF-8");
        String[] words = wordListContents.split("\n");
        wordsSet = new HashSet<>();
        Collections.addAll(wordsSet, words);
    }

    public boolean contains(String word)
    {
        return wordsSet.contains(word);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T06:16:12.757

我会存储一本字典并在那里进行查找。如果该词出现在字典中，则它是有效的。

您可以在此处找到有关如何执行此操作的一些线索： [Android 字典应用程序](https://stackoverflow.com/questions/5301125/android-dictionary-application)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-23T16:48:22.740

> zeitue 说：
> 
> ```
> import java.io.BufferedReader;
> import java.io.FileReader;
> import java.io.IOException;
> 
> class WordChecker {
>     public static boolean check_for_word(String word) {
>         // System.out.println(word);
>         try {
>             BufferedReader in = new BufferedReader(new FileReader(
>                 "/usr/share/dict/american-english"));
>             String str;
>             while ((str = in.readLine()) != null) {
>                 if (str.indexOf(word) != -1) {
>                     return true;
>                 }
>             }
>             in.close();
>         } catch (IOException e) {
>         }
> 
>         return false;
>     }
> 
>     public static void main(String[] args) {
>         System.out.println(check_for_word("hello"));
>     }
> } 
> ```

但这仅适用于linux。如果你想在 Mac 上做同样的事情，改变路径

```
/usr/share/dict/american-english 
```

至

```
/usr/share/dict/web2 
```

我没有在 Windows 上尝试过，但如果有人知道下面的评论

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T06:16:47.883

```
if(s.equals("word from dictionary in loop"){
    //action
} 
```

这也很好

```
s = s.toLowerCase(); 
```

所以无论词条“pokemon”如何

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-10-08T14:05:04.930

您可以尝试此代码进行基本验证

```
import java.util.Scanner;

public class InputValidation {

    public static void main(String[] args) {
        String input;
        try {
            System.out.println("Enter the input");
            Scanner s = new  Scanner(System.in);

            input = s.next();
            if(input.matches(".*\\d.*")){
                System.out.println(" Contains digit only");
            } else{
                System.out.println(" Only String/words found");
            }

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

# iphone - UITextView 文字出血效果

> ID：11607271
> 
> 赞同：1
> 
> 时间：2012-07-23T06:12:45.947
> 
> 标签：iphone, objective-c, ios

我的 iPhone 项目要求将图像（可能在 an 中`UIImageView`）放置在 a 上的某个位置，`UITextView`并且它不应与文本重叠（相反，文本应该出现在容纳它的图像周围）。如果图像被移动，文本应该重新调整，这样它就不会被剪切并重新出现在图像周围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:25:31.290

这称为包装。

您可能需要使用 Core Text。[https://developer.apple.com/library/mac/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html)

以前的相关问题：

[https://stackoverflow.com/questions/7313156/test-wrapping-around-image-in-ios](https://stackoverflow.com/questions/7313156/test-wrapping-around-image-in-ios)

[如何在 iOS 上使用文字环绕绘制图像？](https://stackoverflow.com/questions/5284516/how-can-i-draw-image-with-text-wrapping-on-ios)

# java - 如何在spring验证器中获取请求参数？

> ID：11607272
> 
> 赞同：1
> 
> 时间：2012-07-23T06:12:47.027
> 
> 标签：java, spring, spring-mvc

我有一个场景，我想获取一些请求参数并在 spring 验证器中进行验证。谁能告诉我如何在 spring 验证器中获取请求参数。

谢谢。

```
<c:forEach items="${serviceLocaleList}" var="item" varStatus="count">

                    <table>
                    <tr>
                    <td width="2%" class="formbutton1">
                        <a id="displayText" href="javascript:toggleDivVisibility('myDiv'+'<c:out value="${count.index}"/>',document.getElementById('plusMinusImg'+'<c:out value="${count.index}"/>'))" >
                            <img alt="Show/Hide Filters" src="../images/fold-collapse.gif" id="plusMinusImg<c:out value="${count.index}"/>" />
                        </a>
                    </td>
                    <td width="98%" class="formbutton1" valign="middle" align="left">
                        <b><c:out value="${item.language}"></c:out></b>
                    </td></tr>
                    </table>
                    <input type="hidden" name="language<c:out value="${count.index}"/>" value="<c:out value='${item.language}'/>">

                    <div id="myDiv<c:out value="${count.index}"/>" style="display: block">

                        <table width="100%" border="0" align="center" cellpadding="0"
                            cellspacing="0" style="border: 1px solid black;">

                                    <tr>
                                        <td class="tabRowLeft" width="20%"><fmt:message key='name' /><font color="#FF0000">*</font></td>
                                        <td class="partner_regn_tr" width="70%">
                                            <input id="Name<c:out value="${count.index}"/>" type="text" size="83" maxlength="25" name="Name<c:out value="${count.index}"/>"  disabled/>
                                            <font color="#FF0000">&nbsp;&nbsp;</font>
                                        </td>
                                    </tr> 
```

我的要求是获取动态本地化数据并进行验证。我实际上是通过调用控制器中的自定义验证器方法来做到这一点的。

```
ServiceRegistrationValidator validator = (ServiceRegistrationValidator) getValidator();
//Validate all the request parameters that belongs to Sevrice presentation
validator.validateHttpRequestParameters(request, errors); 
```

使用上面的代码行，验证工作正常。但是我发现用户数据正在被删除，当出现验证错误时。因为它没有在命令对象中设置。

从 requestParameter 读取它后，我尝试在 comman 对象中设置它。但是在调用 onSubmit 之前会调用 spring 验证器。因此，当其他未本地化的字段出现验证错误时，为本地化字段输入的用户数据会被删除。

所以，我想阅读验证器中的 requestParameters 来解决上述问题。如果您有解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:17:59.353

试试这个方法

在Controller中使用@RequestParam标签获取请求参数

并将请求参数设置为命令对象

并将命令对象传递给验证器：

例如：

```
@RequestMapping(method=RequestMethod.GET)
public ModelAndView getRequestParams(@RequestParam("abc") String param1 , @RequestParam("def") String param2, HttpServletRequest request, HttpServletResponse response){
   CommandObject commObj = new CommandObject();
   AbcValidator validator = new AbcValidator();
   commanObj.setParam1(param1);
   commanObj.setParam2(param2);
   validator.validate(commandObj);

} 
```

最好注入commandObj，验证器。试试上面的例子。

# editor - Tkinter 标题栏选项

> ID：11607274
> 
> 赞同：0
> 
> 时间：2012-07-23T06:13:25.200
> 
> 标签：editor, tkinter, options, titlebar

Tkinter 中有没有一种方法可以编辑标题栏？背景颜色、前景颜色、标题栏大小等选项。这是我正在处理的课程的代码，我正在寻找使标题栏与框架匹配的方法。

```
#CreateFile
from Tkinter import *

class CreateFile(Tk):
    def __init__(self, model):
        self.model=model
        myfont = ("Arial", 11, "bold")
        Tk.__init__(self)
        self.title('Create New File')

        self.resizable(0,0)
        frame = Frame(self,bg='black')
        self.lbl=Label(frame,text='Name: ',bg='black',fg='yellow')
        self.lbl.grid(row=0,column=0)
        self.file_entry=Entry(frame,width=30,font=myfont,bg='black',fg='yellow')
        self.file_entry.bind('<Control-a>',self.select_all)
        self.file_entry.grid(row=0,column=1)
        self.create_btn=Button(frame,text='Create',bg='black',fg='yellow')
        self.create_btn.grid(row=0,column=2,padx=10)    
        frame.grid()
        self.mainloop()

    def select_all(self,event):
        print 'd'

model=None
createFile = CreateFile(model) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T11:06:09.173

不，您不能修改属性标题栏。

您唯一的选择是完全关闭标题栏（使用`self.wm_overrideredirect(True)`），然后创建自己的标题栏。这将要求您添加自己的绑定来移动和调整窗口大小。

# objective-c - NSZombieEnabled 是否仅适用于 Objective-C 代码？

> ID：11607275
> 
> 赞同：2
> 
> 时间：2012-07-23T06:13:27.193
> 
> 标签：objective-c, c, xcode, nszombie, nszombieenabled

在一个 Objective-C 项目中，如果我合并了一些 C 代码，环境变量 NSZombieEnabled 是否可以帮助我调试我用 C 代码完成的意外取消分配的区域，或者它只适用于 Objective-C 部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:20:01.463

它仅适用于 Objective-C 对象。这些对象没有死，而是变成了僵尸，它们会在尝试向它们发送任何消息时抱怨。由于普通内存无法接收消息，因此这种机制对它没有意义。

您需要 Valgrind 或类似的工具来进行通用内存调试。

# c# - 找不到“位图”（您是否缺少 using 指令或程序集引用？）

> ID：11607277
> 
> 赞同：31
> 
> 时间：2012-07-23T06:13:33.653
> 
> 标签：c#, bitmap

我收到以下编译时错误：

`The type or namespace name 'Bitmap' could not be found (are you missing a using directive or an assembly reference?)`

这是我的代码：

```
BitmapImage img = new BitmapImage(); 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-10-26T09:01:15.733

您必须添加`System.Drawing`到您的引用，因此在解决方案资源管理器中右键单击“引用”并单击“添加引用”，然后在程序集中找到`System.Drawing`并单击“**确定”**

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2020-06-15T14:12:55.237

今天（2020 年）是 nuGet 包`System.Drawing.Common.dll`。要添加它：右键单击项目名称（在解决方案资源管理器中）->“管理 NuGet 包”-> 选择顶部的“浏览”标签--> 搜索“System.Drawing.Common”-> 安装它.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-26T08:27:43.253

添加 PresentationCore 作为参考。

## 如何：

1.  单击 .NET 选项卡。
2.  从列表中找到并单击 PresentationCore 项。
3.  单击确定按钮。

## 结果：

PresentationCore 程序集出现在项目的引用列表中。

## 最后：

在文件顶部为 System.Windows.Media.Imaging 命名空间添加 using 指令，这就是它所在的位置`BitmapImage`。

```
using System;
using System.Windows.Media.Imaging; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T06:14:45.283

也许您需要添加：

```
using System.Windows.Media.Imaging; 
```

# android - android 设备上的 sencha touch 2.0 应用程序无法正常工作

> ID：11607278
> 
> 赞同：3
> 
> 时间：2012-07-23T06:13:35.707
> 
> 标签：android, sencha-touch-2

我在 sencha touch2.0 中创建了一个应用程序，当我在 android 上运行它时出现媒体播放器错误，我的应用程序挂起错误详细信息如下

```
07-23 11:35:28.863: E/MediaPlayer(29241): Error (1,-2147483648) 
```

没有播放音频是什么问题

我正在使用 mp3 格式的音频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:17:11.787

Betteu 你可以在 sencha 中使用 iframe 它将支持所有设备..

像这样你试试..

```
 {
                        xtype:"label",
                        left:5,
                        html:'<iframe id="player" type="text/html" width="300" height="200" src="http://www.youtube.com/embed/......" frameborder="0"></iframe>',

                      }, 
```

首先嵌入视频并尝试这个......

# javascript - Javascript变量作为数组工作

> ID：11607282
> 
> 赞同：2
> 
> 时间：2012-07-23T06:14:17.640
> 
> 标签：javascript, jquery, variables, jquery-ui-tabs

我已经动态创建了 jquery 选项卡。我想重命名选项卡。当我单击选定的选项卡时。一个文本框出现在模糊上，它将文本框的值设置为选项卡。再次，当我尝试对另一个选项卡执行此操作时，它会重命名当前和早期选项卡。等等...

[**JS Fiddle 上的现场演示**](http://jsfiddle.net/ranasaani/k44Wk/15/)

```
$(document).ready(function() {
$("#tabs").tabs({
    tabTemplate: "<li><a href='#{href}'>#{label}</a> <p title='close' id='removeTab' style='cursor:pointer;display:inline'>x</p></li>"
});
});

$(function() {

    for (i=0; i<3; i++){
    var title = '<span id="a'+i+'">Tab.....  ' + i;
        var url = '#fragment-' + i;
        addTab(url, title, i);
    }
    var index =10;
    index++;
    $("#addTab").live('click', function() {
        index++;
        var title = '<span id="a'+index+'">Tab.....  ' + index;
        var url = '#fragment-' + index;
        addTab(url, title, index);

    });
function addTab(url, title, index) {

    $('#tabs').tabs("add", url, title, [index]);
    $('#a'+index).click(function(){
            var _current = '#a'+index 
            if($(_current ).parent().parent().hasClass('ui-tabs-selected')){
                $(_current).hide();
                $('#editTabName').stop(false, true).hide();
                var nameField = '#editTabName';
                $(nameField).css({
                        top: '12px',
                        left: $(this).parent().offset().left + 8+'px',
                        zIndex:100,
                        position:'absolute'
                    });
           $(nameField).val($(_current).html());
                $(nameField).show(50);
                $(nameField).focus();
                $(nameField).blur(function (){
                    alert(_current);
                    newName = $(nameField).val();
                    $(_current).html(newName);
                    $(nameField).hide();
                    $(_current).show();
                });
            }
        });
}

$('#removeTab').live('click', function() {
    var $tabs = $('#tabs').tabs();
    var selected = $tabs.tabs('option', 'selected');
    if(selected == -1)
        selected = $('p[id=removeTab]').index(this);
    $('#tabs').tabs("remove", [selected]);
});
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:37:16.907

每次重命名时，您都在设置绑定事件。`$(nameField).blur(function (){})`实际上不会覆盖您以前的模糊，它只会附加功能。所以你需要在添加新功能之前解绑它。`$(nameField).unbind('blur');`

所以函数将是

```
function addTab(url, title, index) {
    $('#tabs').tabs("add", url, title, [index]);
    $('#a'+index).click(function(){
        var _current = '#a'+index;
        if($(_current ).parent().parent().hasClass('ui-tabs-selected')){
            $(_current).hide();
            $('#editTabName').stop(false, true).hide();
            var nameField = '#editTabName';
            $(nameField).css({
                    top: '12px',
                    left: $(this).parent().offset().left + 8+'px',
                    zIndex:100,
                    position:'absolute'
                });
            $(nameField).val($(_current).html());
            $(nameField).show(50);
            $(nameField).focus();
            $(nameField).unbind('blur');                
            $(nameField).blur(function (){
                alert(_current);
                newName = $(nameField).val();
                $(_current).html(newName);
                $(nameField).hide();
                $(_current).show();
            });
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T06:42:50.977

使用一个而不是模糊。

```
$(nameField).blur(function () 
```

变成：

```
$(nameField).one('blur', function (){ 
```

[http://jsfiddle.net/k44Wk/18/](http://jsfiddle.net/k44Wk/18/)

# c# - 如何动态生成在字典中显示值的标签

> ID：11607286
> 
> 赞同：1
> 
> 时间：2012-07-23T06:14:37.250
> 
> 标签：c#, dictionary, label, dynamically-generated

我想在单独的标签中显示字典中的值。我得到这样的字典：

```
Dictionary<string, int> counts = new Dictionary<string, int>();
foreach (string code in myCodeList)
{
    if (!counts.ContainsKey(code))
    {
       counts.Add(code, 1);
    }
    else
    {
       counts[code]++;
    }
}

//now counts contains the expected values 
```

我想动态生成标签，因为其中的元素`counts`只能在运行时确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:01:58.440

```
Dictionary<string, int> counts = new Dictionary<string, int>();
foreach (string code in myCodeList)
{
    if (!counts.ContainsKey(code))
    {
       counts.Add(code, 1);
    }
    else
    {
       counts[code]++;
    }
}

Point p = new Point(12, 12); //initial location - adjust it suitably
foreach (var item in counts)
{
    var label = new Label();
    label.Text = item.Key + " - " + item.Value;
    label.Location = new Point(p.X, p.Y);
    label.Tag = item; //optional
    Controls.Add(label);

    p.Y += label.Height + 6; //to align vertically
    //p.X += label.Width + 18; //to align horizontally. 
} 
```

这是基本方法。您所要做的就是`p`根据您的设计调整变量以正确定位标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:26:57.630

这应该足够了

**编辑**

```
YourLabel.Text = counts.Count.ToString(); 
```

# collections - 基于索引的数据结构

> ID：11607288
> 
> 赞同：1
> 
> 时间：2012-07-23T06:15:09.237
> 
> 标签：collections, arraylist

我打算抛出 Java 集合信息。我遇到了 ArrayList 是基于索引的数据结构的术语。它的意义是什么？我对此感到困惑？这是否意味着它存储带有索引的元素/对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:29:45.537

ArrayList is part of java collection frame work. Since ArrayLis is an index based data-structure searching or getting element from Array with index is pretty fast. Array provides O(1) performance for get(index) method but remove is costly in ArrayList as you need to rearrange all elements.

For more help on Java collection framework read below book

[Java Collection](http://www3.ntu.edu.sg/home/ehchua/programming/java/J5c_Collection.html)

# c - 从 square.c 检测三角形

> ID：11607289
> 
> 赞同：2
> 
> 时间：2012-07-23T06:15:10.897
> 
> 标签：c, opencv

我正在使用opencv做一个项目。我想从网络摄像头检测形状。我已经通过编辑 square.c 成功检测到正方形，现在我想使用 square.c 来检测三角。

是否可以从 square.c 中检测三角形？我必须添加或修改哪个部分？

**编辑**

我试过添加这个代码：

```
else if ( result->total == 3 &&
    fabs ( cvContourArea(result, CV_WHOLE_SEQ)) > 1000 &&
    cvCheckContourConvexity(result))
{
    s = 0;
    for (int i = 0; i < 3; i++)
    {
        if (i >= 1)
        {
            t = fabs( angle(
                      (CvPoint*)cvGetSeqElem(result, i),
                      (CvPoint*)cvGetSeqElem(result, i-1),
                      (CvPoint*)cvGetSeqElem(result, i-2)));
            s =  s > s ? s : t;
        }
    }
} 
```

但结果是，在正方形上检测到的三角形..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:09:29.543

您也可以考虑查看我之前关于检测图像中的许多三角形的[答案之一。](https://stackoverflow.com/a/9857379/951860)

这是该示例中要注意的主要功能：

```
vector<Point> getAllTriangleVertices(Mat& img, const vector< vector<Point> >& contours)
{
    vector<Point> approxTriangle;
    vector<Point> allTriangleVertices;
    for(size_t i = 0; i < contours.size(); i++)
    {
        approxPolyDP(contours[i], approxTriangle, arcLength(Mat(contours[i]), true)*0.05, true);
        if(approxTriangle.size() == 3)
        {
            copy(approxTriangle.begin(), approxTriangle.end(), back_inserter(allTriangleVertices));
            drawContours(img, contours, i, Scalar(0, 255, 0), CV_FILLED);

            vector<Point>::iterator vertex;
            for(vertex = approxTriangle.begin(); vertex != approxTriangle.end(); ++vertex)
            {
                circle(img, *vertex, 3, Scalar(0, 0, 255), 1);
            }
        }
    }

    return allTriangleVertices;
} 
```

本质上，此函数使用由检测到的轮廓`findContours`并在图像上绘制三角形顶点并填充它们。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:33:02.317

是 i = 1：与

```
...
(CvPoint*)cvGetSeqElem(result, i),
(CvPoint*)cvGetSeqElem(result, i-1),
(CvPoint*)cvGetSeqElem(result, i-2))); 
```

您访问元素 1、0 和序列的最后一个元素。这是故意的吗？

第二：为什么

```
for (int i = 0; i < 3; i++)
{
    if (i >= 1) 
```

为什么不

```
for (int i = 1; ... 
```

# lua - Lua中的进程间通信

> ID：11607293
> 
> 赞同：7
> 
> 时间：2012-07-23T06:15:34.687
> 
> 标签：lua, ipc

我有两个应用程序（都是纯 Lua，在 Windows 上），它们应该能够相互交谈。我成功使用了 luasocket TCP/IP 模块；但我想知道我可以使用哪些其他方法来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T06:29:45.413

Steve Donovan 的[winapi](https://github.com/stevedonovan/winapi)库通过命名管道支持 IPC，类似于 Unix 域套接字。

示例可[在此处](http://stevedonovan.github.com/winapi/topics/readme.md.html#Pipe_Server)和[此处](http://stevedonovan.github.com/winapi/examples/pipe-server.lua.html)获得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:30:17.220

如果你想要多平台的东西，可以考虑 0MQ；Lua 绑定[在这里](https://github.com/Neopallium/lua-zmq)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T10:34:26.630

我喜欢使用[OiL](http://www.tecgraf.puc-rio.br/~maia/oil/)在应用程序之间进行通信。它非常易于使用并且可以在多平台上使用（通过 CORBA）。

您可以创建一个简单的界面并创建结构化数据，这比自己解析消息更容易理解。

# tabs - Ext-js4 MVC tabspanel onclose 事件

> ID：11607299
> 
> 赞同：0
> 
> 时间：2012-07-23T06:16:31.497
> 
> 标签：tabs, event-handling, extjs4

我需要在选项卡面板组件上实现全局 onclose 事件，因此每当关闭选项卡时，我都希望发生一些事情。

这可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:13:58.960

使用 MVC 控制器很容易监听此类事件。这是进入 Ext.app.Controller 类实例的示例代码：

```
init:function () {
    this.control(
       'tabpanel tab':{
            close:this.onTabClose
        } 
        .....
} 
```

这是一个示例[http://jsfiddle.net/dbrin/UqfFH/](http://jsfiddle.net/dbrin/UqfFH/)

# java - 在具有旧 API 的应用程序上使用功能新 API

> ID：11607301
> 
> 赞同：0
> 
> 时间：2012-07-23T06:16:32.603
> 
> 标签：java, android

我有 API 5 的应用程序。我想为具有 Android 3.0 或更高版本的手机添加一些功能。但我希望应用程序可以在具有 API 5 的手机上运行。（新功能仅适用于 Android 3.0 或更高版本的用户）。有哪些解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:35:28.113

我不相信有任何库会支持 API 级别 5，但是有适用于 API 级别 6 及更高级别的 android 支持库。

[安卓支持-v4.jar](https://developer.android.com/tools/extras/support-library.html)

我很好奇，为什么要使用 5 级？那些 Andorid OS 版本还在使用您的应用程序吗？上次我检查甚至 6 级（android 1.6）有大约 1% 的谷歌播放应用程序使用。我可以想象 1.5 会比这更低。

我建议将您的应用至少从 minimumTargetSDK 移动到 Android 1.6

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:23:52.887

有许多库可让您使用 android 3.0 或更高版本的某些功能。最突出的是使用来自 Android 3.0 的 Fragments

这个链接应该可以帮助你：[支持库](http://developer.android.com/tools/extras/support-library.html)

# android - How to change text color of preference category in Android?

> ID：11607302
> 
> 赞同：43
> 
> 时间：2012-07-23T06:16:37.403
> 
> 标签：android, android-preferences

The textColor attribute isn't working. Here's my XML:

```
<PreferenceCategory
        android:title="Title"
        android:textColor="#00FF00"> 
```

Any ideas?

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-23T06:19:51.277

use this customize PreferenceCategory class :

```
public class MyPreferenceCategory extends PreferenceCategory {
    public MyPreferenceCategory(Context context) {
        super(context);
    }

    public MyPreferenceCategory(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MyPreferenceCategory(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onBindView(View view) {
        super.onBindView(view);
        TextView titleView = (TextView) view.findViewById(android.R.id.title);
        titleView.setTextColor(Color.RED);
    }
} 
```

and add this at your Pref.xml file :

```
<ali.UI.Customize.MyPreferenceCategory android:title="@string/pref_server" /> 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-07-23T07:29:07.217

One solution is to make a theme for your PreferenceScreen. So in your themes.xml or styles.xml (better to put it in themes.xml) :

```
<style name="PreferenceScreen" parent="YourApplicationThemeOrNone">
    <item name="android:textColor">@color/yourCategoryTitleColor</item>
</style> 
```

then in your AndroidManifest.xml :

```
<activity
      android:name="MyPreferenceActivity"
      ...
      android:theme="@style/PreferenceScreen" >
</activity> 
```

It worked perfectly for me.

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2016-01-09T18:16:45.713

An easy way to do this is to set the custom layout for the preferenceCategory here:

```
<PreferenceCategory
    android:layout="@layout/preferences_category"
    android:title="Privacy" > 
```

Then set your code inside your preferences_category layout file:

```
<TextView
    android:id="@android:id/title"
    android:textColor="@color/deep_orange_500"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="16sp"
    android:textStyle="bold"
    android:textAllCaps="true"/> 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-06-01T16:06:56.523

To change text color of preference category only set a theme to your `PreferenceActivity` in your Android Manifest and make sure that *colorAccent* item exists. This color is taken by your `PreferenceCategory`.

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-11-07T15:56:58.313

Actually just found out that preference category text using `colorAccent`.

If your app didn't using style of `colorAccent`, you can go to `styles.xml` and find
`<item name="colorAccent">@color/colorPrimary</item>`, and change the color as you want.

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-01-13T06:38:43.717

Other way around will be mention the theme in your *AppTheme*, application level

```
 <style name="AppBaseTheme" parent="Theme.AppCompat.Light.NoActionBar">
        .....//your other items
        <item name="preferenceTheme">@style/PrefTheme</item>
    </style>

    <style name="PrefTheme" parent="@style/PreferenceThemeOverlay">
        <item name="preferenceCategoryStyle">@style/CategoryStyle</item>
    </style>

    <style name="CategoryStyle" parent="Preference.Category">
        <item name="android:layout">@layout/pref_category_view</item>
    </style> 
```

**XML** : pref_category_view

```
<?xml version="1.0" encoding="utf-8"?>
<TextView android:id="@android:id/title"
          style="?android:attr/listSeparatorTextViewStyle"
          xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:textColor="@color/red"
          android:layout_height="wrap_content"
    /> 
```

For more customization visit [v7 Preferences res](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v7/preference/res/values/styles.xml?autodive=0%2F%2F)

**Important**: I am using *PreferenceFragmentCompat* from [lib v7 Preference](http://developer.android.com/tools/support-library/features.html?utm_campaign=ADP-protip-827&utm_source=dac&utm_medium=plus&linkId=16598683#v7-preference).

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-11-08T10:48:11.647

Using Material Theme, you just have to override the following property :

```
<style name="YourTheme" parent="@style/Theme.MaterialComponents">
    <item name="colorAccent">@color/your_custom_color</item>
</style> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-01-26T17:34:06.437

```
public class MyPreferenceCategory extends PreferenceCategory {

 public MyPreferenceCategory(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
  }
 public MyPreferenceCategory(Context context, AttributeSet attrs) {
    super(context, attrs);
  }
 public MyPreferenceCategory(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
  }

 @Override
 protected View onCreateView(ViewGroup parent) {
    // It's just a TextView!
 TextView categoryTitle =  (TextView)super.onCreateView(parent);
 categoryTitle.setTextColor(parent.getResources().getColor(R.color.orange));

    return categoryTitle;
  }
} 
```

And in your prefs.xml:

```
<com.your.packagename.MyPreferenceCategory android:title="General">
.
.
.
</com.your.packagename.MyPreferenceCategory> 
```

Or you can also use this [answer](https://stackoverflow.com/questions/5334828/how-can-i-change-font-size-in-preferencescreen)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-09-05T12:48:02.267

Define your own PreferenceTheme and override colors.

```
<style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>
    <item name="preferenceTheme">@style/AppTheme.PreferenceTheme</item>
</style>

<style name="AppTheme.PreferenceTheme" parent="PreferenceThemeOverlay.v14.Material">
    <item name="colorAccent">`#color_value`</item>
</style> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-09-25T16:06:44.963

Inspired by @AliSh answer, but I needed to only change the colour of **one** `Preference` text item. So, for all the Kotlin guys out there:

```
class TextColorPreference : Preference {

    constructor(context: Context) : super(context)

    constructor(context: Context, attrs: AttributeSet) : super(context, attrs)

    constructor(
        context: Context, attrs: AttributeSet,
        defStyle: Int
    ) : super(context, attrs, defStyle)

    override fun onBindViewHolder(holder: PreferenceViewHolder?) {
        super.onBindViewHolder(holder)

        context?.let {
            (holder?.findViewById(android.R.id.title) as? TextView)?.setTextColor(
                ContextCompat.getColor(
                    it,
                    R.color.colorPrimary
                )
            )
        }
    }
} 
```

And then put it in your `xml/prefs.xml`:

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

    <this.should.be.your.package.TextColorPreference
        android:id="@+id/settings_logout"
        android:key="@string/prefs_key_logout"
        android:title="@string/settings_logout" />
</PreferenceScreen> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-03-06T15:45:20.190

For androidx preference library you can extend `PreferenceCategory` or `Preference` class like this:

```
class DangerPreference(
    context: Context?,
    attrs: AttributeSet?,
): Preference(context, attrs) {

    override fun onBindViewHolder(holder: PreferenceViewHolder?) {
        super.onBindViewHolder(holder)
        holder?.itemView?.findViewById<TextView>(android.R.id.title)?.setTextColor(Color.RED)
    }
} 
```

then use it normally in your `PreferenceScreen`:

```
<com.github.anastr.myscore.util.pref.DangerPreference
    app:key="deleteServerData"
    app:title="@string/delete_server_data"
    app:iconSpaceReserved="false" /> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-14T08:54:49.117

A lot of the other answers didn't work for my case. I'm using a PreferenceFragmentCompat and I didn't want to have actual code doing this. So I simply made a copy of the preference category xml file and changed the textColor field. The file goes under the Apache license, Version 2.

```
<?xml version="1.0" encoding="utf-8"?>

<!--
  ~ Copyright (C) 2015 The Android Open Source Project
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License -->

  <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="8dp"
    android:layout_marginTop="8dp"
    android:layout_marginStart="?android:attr/listPreferredItemPaddingLeft"
    android:orientation="vertical">
    <TextView
      android:id="@android:id/title"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_marginTop="16dp"
      android:paddingEnd="?android:attr/listPreferredItemPaddingRight"
      android:textAlignment="viewStart"
      android:textColor="@color/app_accent"
      android:textStyle="bold"
      tools:ignore="RtlSymmetry"/>
    <TextView
      android:id="@android:id/summary"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:ellipsize="end"
      android:singleLine="true"
      android:textColor="?android:attr/textColorSecondary"/>
  </LinearLayout> 
```

And imported it in my .xml layout for the Preference fragment:

```
 <PreferenceCategory
    android:layout="@layout/preference_category_companion"
    android:key="my_preference_title"
    android:title="@string/my_preference_title"> 
```

# iphone - 在 iPhone 中录制我正在运行的应用程序的视频

> ID：11607305
> 
> 赞同：0
> 
> 时间：2012-07-23T06:16:59.030
> 
> 标签：iphone, objective-c, ios

我想录制我在 iPhone 上运行的应用程序的视频并将其用于重播。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:12:18.737

好吧，如果您的手机是 4S，您可以从 Apple 获得一个将视频输出为高清流的加密狗。加密狗可让您插入 HDMI 电缆，因此您需要一些方法来捕获该输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:59:28.927

我正在寻找这个并且找不到任何解决方案。

您唯一的选择是： 1\. 在模拟器中运行应用程序并使用 Mac 的任何屏幕捕获工具来录制视频 2\. 将 iPhone 固定在吊舱/支架上并使用另一台相机录制您的应用程序的视频

如果该应用程序没有任何仅在设备上可用的功能，我会避免使用选项 2，因为 iPhone 的光滑屏幕会显示各种反射，并且用户在视频中的手真的很烦人。

# ios - 从 iOS 中的其他线程访问 UI 组件

> ID：11607306
> 
> 赞同：0
> 
> 时间：2012-07-23T06:17:00.917
> 
> 标签：ios, multithreading, user-interface

我有一个关于如何刷新 iOS 应用程序 UI 的问题。我想要实现的是：

1.  根据从 Web 服务检索到的数据在 UITableView 中显示数据
2.  应从单独的线程（不是主线程）调用 Web 服务
3.  取到数据后，会用取到的数据刷新UITableView的内容
4.  这是由于在网络连接不良的情况下，在从 Web 服务接收数据的过程中，UI 不会挂起或应用程序不会阻止用户输入

为此，我创建了以下源代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSURL *myURL = [[NSURL alloc] initWithString:[Constant webserviceURL]];
    NSURLRequest *request = [NSURLRequest requestWithURL:myURL cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData                        timeoutInterval:60];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    NSXMLParser *parser = [[NSXMLParser alloc] initWithData:data];
    [self myparser] = [[MyXMLParser alloc] initXMLParser];

    [parser setDelegate:myparser];
    BOOL success = [parser parse];
    if (success) {
        // show XML data to UITableView
        [_tableView performSelectorOnMainThread:@selector(reloadData) withObject:[myparser xmldata] waitUntilDone:NO];
    }
    else {
        NSLog(@"Error parsing XML from web service");
    }
} 
```

================== 我的实现是否正确？有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:47:15.853

你会想打电话

```
+ (void)sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler 
```

它将调用以在不同的线程上获取数据，然后当数据被拉下或从 url 下载数据时出现问题时，它将在与原始调用**相同的线程上调用您的处理程序块。**

这是使用它的一种方法：[https ://stackoverflow.com/a/9409737/1540822](https://stackoverflow.com/a/9409737/1540822)

你也可以使用

```
- (id)initWithRequest:(NSURLRequest *)request delegate:(id < NSURLConnectionDelegate >)delegate 
```

当数据在卡盘中下载时，这将调用您的 NSURLConnectionDelegate 方法之一。如果您将拥有大量数据，那么您可能希望使用它，这样您就不会在响应中花费太多时间。

# c# - C#中的布局管理器

> ID：11607307
> 
> 赞同：4
> 
> 时间：2012-07-23T06:17:05.317
> 
> 标签：c#, java, winforms, layout, boxlayout

我正在尝试用 C# 设计一个 UI。我来自 Java 背景，熟悉 Java 中的不同布局管理器。

所以我想做的是：

我有一个窗格。在此窗格中，我希望在另一个下方添加控件。在 Java 中，我会使用 BoxLayout（Y 轴），然后添加控件。此外，可以通过为每个单独的容器使用不同的布局来进一步定制单独的控件/容器。

我如何在 C# 中做到这一点？

我需要做的是：

1）在另一个下方添加控件。每个单独的控件都可以是较小控件的集合。

所以我可以拥有的是：

```
Control 1 here
Control 2 here
Control 3 here 
```

每个控件都可以有自己的布局，比如 X 轴上的 BoxLayout 等等。我该怎么做？

PS：我正在使用WINFORMS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T06:21:21.543

我将刺探您正在构建 WinForms，并建议您查看以下控件，它们类似于 Java 布局管理器；

*   控制板
*   流布局面板
*   表格布局面板

Panel 可以让您在其中任意放置控件，并且您可以使用 Dock、Anchor 和 Location 属性来定位每个子控件。

如果您将流程设置为“TopDown”，FlowLayoutPanel 会按照您的要求执行操作，但所有内容都将左对齐，我相信这是无法更改的。

我期望 TableLayoutPanel 对您最有用。只需创建具有 1 列的面板，并将每个控件添加到一行。这些行可以设置为 AutoSize 以使其内容为您提供与我认为的 BoxLayout 最接近的匹配。

# c# - Resharper 模式来检测可空类型的算术

> ID：11607309
> 
> 赞同：11
> 
> 时间：2012-07-23T06:17:17.360
> 
> 标签：c#, resharper

谁能想到可以检测以下错误的良好 Resharper 模式：

```
decimal? x = null;

decimal? y = 6M;

var total = x + y;

Console.WriteLine(total); // Result is null 
```

我已经尝试过创建一个模式，但我不知道如何快速处理所有类型的算术（例如 +、-、* 等）和任何可为空的类型 ( `e.g. Nullable<int>, Nullable<decimal>, Nullable<double> etc`)。我也不能处理交换性（例如它应该检测*x + y*以及*y + x*）。

请注意，我不一定需要检测*x*实际上是否为空：只需检测它是否为可空类型。我想强制开发人员写：x.Value + y.Value。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T04:33:03.793

这不是一个完整的答案，但这是迄今为止我想出的最好的答案。

模式是：

```
$obj$ + $nullableObj$ 
```

**obj**是“ *System.Object 类型的表达式或其派生类型之一* **nullableObj**是“ *System.Nullable 类型的表达式*”。（请注意，您不希望 nullableObj 包含派生类型）。

这不是一个很好的解决方案，因为该模式不处理交换性，因此您需要复制并粘贴它并反转表达式：

```
$nullableObj$ + $obj$ 
```

此外，此模式仅处理十进制，因此您需要为您感兴趣的每种类型复制并粘贴它（是的，这可能是很多模式）。

一条好消息：*+*符号同时处理加法和减法，因此您无需担心减法。

# java - 如何在运行 Junit 测试用例时创建用户会话

> ID：11607310
> 
> 赞同：1
> 
> 时间：2012-07-23T06:17:23.087
> 
> 标签：java, oracle, session, junit, junit4

我在 Junit 中编写了一些测试用例。现在，在运行这些测试用例时，我遇到了一个错误，因为某些属性所需的值是从用户会话中提供的，比如用户名。那么如何在运行 Junit 测试用例时创建用户会话并为这些属性提供会话值。我必须将这些属性输入到 Oracle 数据库中。谢谢，奈杰尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T06:24:10.673

有一些用于 HTTP 测试的模拟实现——例如 Spring 有`org.springframework.mock`包，其中包括`MockHttpSession`.

使用模拟，您可以创建一个测试实例并使用测试值预先填充它，以便您的代码看起来像一个真实的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:06:18.537

创建一个属性文件，您可以在其中定义用户名和密码。使用属性文件中的用户名和密码（如果需要，因为您可以使用用户名本身从数据库中选择用户详细信息）编写自定义方法来获取用户会话对象。从 getUserSessionObject 设置 userSessionVariables。每当调用提交时调用此函数。

# node.js - 我有什么版本的 [在此处插入 npm 模块]？

> ID：11607311
> 
> 赞同：0
> 
> 时间：2012-07-23T06:17:28.430
> 
> 标签：node.js, npm

我正在挑选我在 Node.js 中的一个项目。它工作得很好，但由于缺乏时间而没有投入生产。

我更新了节点、快递和套接字 io

```
npm update [package name] -g 
```

我知道`-g`全局状态，但我不确定我是否以这种方式安装在服务器上，所以我的问题是：

我怎么知道我的应用程序有哪个版本？

如果我只需要更新该应用程序，我应该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:34:03.103

[npm ls](http://npmjs.org/doc/list.html) - 列出已安装的包

# noclassdeffounderror - 从 jar 运行时发生 java.lang.Noclassdeffounderror

> ID：11607313
> 
> 赞同：1
> 
> 时间：2012-07-23T06:17:32.017
> 
> 标签：noclassdeffounderror

从 jar.the java.lang.Noclassdeffound 运行项目时发生错误。

例如：1 类包含主要方法：

包 p;

导入 p1.MyClass1；

导入 p2.MyClass2；

公共类TestClass {

```
public int i;
public Object obj;  //Line 5

public void aMethod(){ 
```

// 对象 obj=null; //第 7 行

```
 if(i==0){
        obj=new MyClass1();
        System.out.println("if block: p1.MyClass1");
    }else{
        obj=new MyClass2();
        System.out.println("else block: p2.MyClass2");
    }
}

public static void main(String [] args){
    TestClass t=new TestClass();
    t.aMethod();
} 
```

}

2：p1包的MyClass1：

包 p1;

公共类 MyClass1 {

```
public MyClass1() {} 
```

}

3- p2 包的 MyClass2：

包p2；

公共类 MyClass2 {

```
public MyClass2() {} 
```

}

* * *

在上面的示例中，3 个类是 TestClass、MyClass1 和 MyClass2。当我在构建之后运行上述项目（TestClass 是我项目的主类）时，使用 jar 并手动删除 p2 包它运行良好。但是在 TestClass 中的 chenge 对全局变量 public Object obj 进行注释（第 5 行）并在 TestClass 的方法 aMethod 中删除注释局部变量 Object obj（第 7 行）。然后我在手动删除 p2 包后从 jar 构建并运行项目，控制台**在线程“main”java.lang.NoClassDefFoundError: p2/MyClass2 中显示异常**

```
at run time no need of p2 package but making the variable "obj" in class TestClass 
```

从全局到本地（在方法 aMethod() 中）发生异常。 **请对我的问题进行排序，为什么会出现此错误。**

# java - 使用多线程建立连接

> ID：11607315
> 
> 赞同：0
> 
> 时间：2012-07-23T06:18:09.773
> 
> 标签：java

我正在编写一个Java程序来计算（比如说）5个http连接（到不同的IP）的http连接时间。

第一种情况是，在没有线程的情况下，程序一个接一个地连接和测试 http 服务器，这意味着当完成一个服务器测试然后继续另一个服务器。在这种情况下，花费的时间非常长。而且，超时没有正常工作，例如我设置了

```
setConnectTimeout(5 * 1000);
setReadTimeout(5 * 1000); 
```

但时间回来了

```
long starTime = System.currentTimeMillis();

c.connect();

String line;
BufferedReader in = new BufferedReader(new InputStreamReader(uc.getInputStream()));
while ((line = in.readLine()) != null){
    page.append(line);

elapseTime = System.currentTimeMillis() - starTime; 
```

可以超过 5 秒，有些甚至可以达到 30 秒（但我只将 5 秒设置为超时）。

因此，我将实现设为多线程。但结果更加荒谬。我现在什至无法成功连接。

现在我的问题是，我们可以使用多线程建立多个连接吗？如果答案是肯定的，我必须注意什么才能避免上述问题？

感谢。

****额外信息**** 1) 我正在计算代理连接速度，所以，是的，连接是代理连接。2) 我创建的线程数在 100 左右。我认为应该没问题吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:41:12.340

你是如何建立你的连接的？你在使用套接字连接吗？如果是这样，根据您设置套接字的方式，您可能会发现连接超时值可能会被忽略

```
Socket sock = new Socket("hostname", port);
sock.setSoTimeout(5000);
sock.connect(); 
```

实际上不会设置连接超时值，因为构造函数已经尝试连接。

```
SocketAddress sockaddr = new InetSocketAddress(host, port);
Socket sock = new Socket();
sock.connect(sockaddr, 5000); 
```

将更准确地与超时值连接。这可以解释为什么您的套接字超时不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:05:08.457

```
public float getConnectionTime(){
        long elapseTime = 0;

        Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(ipAdd, portNum));
        URL url;
        StringBuilder page = new StringBuilder();
        HttpURLConnection uc = null;
        try {

            uc = (HttpURLConnection)Main.targetMachine.openConnection(proxy);
//          uc = (HttpURLConnection)Main.targetMachine.openConnection();

            uc.setConnectTimeout(Main.timeOut);
            uc.setReadTimeout(Main.timeOut);

            long starTime = System.currentTimeMillis();

            uc.connect();

//          if (uc.getResponseCode() == HttpURLConnection.HTTP_OK){
//              System.out.println("55555");
//          }else System.out.println("88888");

            String line;
            BufferedReader in = new BufferedReader(new InputStreamReader(uc.getInputStream()));
            while ((line = in.readLine()) != null){
               page.append(line);

            elapseTime = System.currentTimeMillis() - starTime;        

        }
        } catch (SocketTimeoutException e) {
            System.out.println("time out lo");
//          e.printStackTrace();
            return 9999; //if time out, use 9999 signal.
        } catch (IOException e){
            System.out.println("open connection error, connect error or inputstream error");
//          e.printStackTrace();
            return 9999;
        }finally{
            if (uc != null)
                uc.disconnect();
        }

//      System.out.println(page);
        return (float)elapseTime / 1000;
    } 
```

# asp.net-mvc-3 - 使用 Action Link Helper 在锚标签之间放置 span 标签

> ID：11607317
> 
> 赞同：1
> 
> 时间：2012-07-23T06:18:25.777
> 
> 标签：asp.net-mvc-3, razor, html-helper

我有网站模板并将其用于我的网站。我是 asp.net mvc 3 和 razor 的新手。使用 html helper 修改 html 标签非常困难。如何使用 ActionLink Helper 在锚标记之间放置跨度标记。我使用 razor 和 html helper 来生成链接。我想制作以下标签：

```
<li><a href="Account/LogOff" title="Logout"><span class="glyph logout"></span> Logout</a></li> 
```

我试过这个

```
<li>@Html.ActionLink("<span class='glyph logout'></span> Log out", "LogOff", "Account") </li> 
```

我很困惑如何做到这一点。将跨度标记生成为字符串不是正确的方法。我怎样才能产生正确的标签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T20:14:12.917

您想要使用的是 @Url.Action 在拥有自定义 HTML 的同时创建 URL。

```
<li>
  <a href="@Url.Action("LogOff","Account")" title="Logout">
    <span class="glyph logout"></span> Logout
  </a>
</li> 
```

这样您就可以控制 URL 并能够添加您自己的自定义 HTML。@Html.ActionLink 不允许您在本机标签内添加自定义 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:27:48.987

如果您需要自定义锚标记内的内容，您应该使用 Html.Action 方法而不是 Html.ActionLink

```
<li>
  <a href="@Html.Action("LogOff", "Account")" title="Logout">
    <span class="glyph logout"></span> Log
  </a>
</li> 
```

# regex - egrep 字符串大小写

> ID：11607319
> 
> 赞同：1
> 
> 时间：2012-07-23T06:18:28.490
> 
> 标签：regex, linux, shell

我必须从一个类似这样的文件名 temp 中进行 grep

```
Process             State  
BE_RP:1 [PL_2_3]    Running  
BE_RP:2 [PL_2_4]    Running  
BE_RP:3 [PL_2_5]    Running  
BE_RP:4 [PL_2_6]    Running  
FE_SCTP:0 [PL_2_3]  Running  
FE_SCTP:1 [PL_2_4]  Running  
BE_NMP:0            Not Running  
OAM:0               Running 
```

我需要编写一个 egrep 语句，它将返回处于运行或未运行状态的进程数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:35:51.843

```
awk '/^OAM/ { next } /Not Running[ \t]*$/{s++} END {print s, NR-s-1}' foo.txt 
```

印刷`<running>` `<not running>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T06:31:54.790

### 跑步

```
$ grep -v 'OAM' input | grep -cP '(?<!Not) Running\s*$'
6 
```

### 不运行

```
$ grep -v 'OAM' input | grep -cP 'Not Running\s*$'
1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:02:52.517

```
sed '{
1 d
s/^[^:]*:[0-9]*[ ]*//
s/^[^]]*]//
s/^[ ]*//
}' input_file | sort | uniq -c 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T09:24:00.400

```
grep -P '^(?!OAM:0).*Running' temp | cut -f2 | wc -l 
```

# javascript - 如何在谷歌地图上绘制路线？

> ID：11607320
> 
> 赞同：0
> 
> 时间：2012-07-23T06:18:34.980
> 
> 标签：javascript, google-maps

我想在地图上准确地在道路上绘制车辆路线，但我的积分会在 1 分钟后更新。所以现有的代码在建筑物上划线等等......任何机构对此都有一些解决方案？提前致谢..

# android - Android 自定义标签栏

> ID：11607324
> 
> 赞同：0
> 
> 时间：2012-07-23T06:19:17.643
> 
> 标签：android, android-tabhost

[我在这里](http://cdn.vikitech.netdna-cdn.com/wp-content/uploads/2011/11/Music02.png)看到了几个具有如下 TabBar 的应用程序。我说的是图像左下角的小部件。您可以拖动圆盘并更改选项卡。还有一个关于当前 TAB 的图像弹出窗口。我试过搜索，但到目前为止没有运气。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:29:42.327

这是HTC为自己使用而开发的东西。

抱歉，它不向开发人员公开。

如果你想要这样的东西，你需要自己开发它。您可以通过使用 TabHost 小部件和将 TabWidget 放置在水平滚动视图中，然后在选项卡上单击显示某种带有描述和图像的自定义全屏 Toast 消息来实现此目的。还可以自定义 TabWidget，您绝对可以在 Tabhost 上找到信息，并在 stackoverflow 或谷歌上的一些教程上自定义 tabwidget。

无论如何，您肯定需要从头开始执行此操作，但这当然是可能的。

# powerbuilder - 数据窗口内的 PowerBulder DropDownListBox

> ID：11607325
> 
> 赞同：1
> 
> 时间：2012-07-23T06:19:31.737
> 
> 标签：powerbuilder

我在 Datawindow 中创建了一个 DropDownListBox。

更改项目后，我在 INI 文件中的下拉菜单中设置并保存所选项目的值。

在我的 Open Event 中，我使用 setitem 在该下拉菜单中设置保存的值。这里的问题是它没有将焦点放在那些下拉列表中所选项目的索引上。

我还使用了 SetRow()、setcolumn()、SetText() 来对选定文本进行聚焦。这个问题是我有 100 多个项目。当所选值在中间时，让我们说索引＃50，滚动条焦点仍在顶部索引＃1上，而不是索引＃50。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:30:20.110

1) 尝试使用 SetRedraw

```
dw.SetRedraw(false)
dw.SetItem(...)
dw.SetRedraw(true) 
```

2) 尝试使用 DDDW 而不是 DDLW。并将 DDDW 与整数索引列一起使用。有时构建器会因字符串“keys”而失败

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:52:08.710

A) 在数据窗口中使用 DDDW 编辑样式会容易得多。您只需执行 SetItem(row, column, value) 即可在下拉列表中设置初始值。

B) 话虽如此，我不会将列表框中的 100 多个项目称为“有效的 UI 设计”。我会将它演变成一个具有按类型搜索功能的编辑框，就像您在 Google 搜索页面中看到的那样。

# xslt - 如何使用 xslt 显示站点的站点地图/导航？

> ID：11607326
> 
> 赞同：1
> 
> 时间：2012-07-23T06:19:32.710
> 
> 标签：xslt, umbraco

我有一个网站，其中包含所附图片中的页面和子页面。![在此处输入图像描述](../Images/a8a8313d384b66c99b56a9af3c08dc8f.png)

一些子页面属于第一个页面（关于患者直接），它们已设置“不显示在菜单中”。

好吧，我想做一个 xslt 文件，它会生成这样的 html 内容：

菜单项 1（包括主页 - About Patient Direct）

-子菜单第 1 页 1

菜单项 2（包括主页 - About Patient Direct）

-子菜单第 2 页 1

-子菜单页 2 2

**我怎样才能做到这一点？**

这是我到目前为止所拥有的

```
<?xml version="1.0" encoding="UTF-8"?> 
```

]>

```
<xsl:output method="xml" omit-xml-declaration="yes" />

<xsl:param name="currentPage"/>

<!-- Input the documenttype you want here -->
<xsl:variable name="level" select="1"/>

<xsl:template match="/">

  <xsl:if test="$currentPage/@id = $currentPage/ancestor-or-self::* [@level=$level]/@id">
         <div class="column">
            <h1>
              <a href="#">
                  Home Page - I don't know what to write here
              </a>
           </h1>
          </div>      
  </xsl:if>

        <xsl:for-each select="$currentPage/ancestor-or-self::* [@level=$level]/* [@isDoc and string(umbracoNaviHide) != '1']">
         <div class="column">
            <h1>
                <xsl:choose>
                    <xsl:when test="name() = 'Link'">
                        <a href="{current()/linkUrl}" target="_blank">
                            <xsl:value-of select="@nodeName" />
                        </a>
                    </xsl:when>
                    <xsl:otherwise>
                        <a href="{umbraco.library:NiceUrl(@id)}">
                            <xsl:value-of select="@nodeName" />
                        </a>
                    </xsl:otherwise>
                </xsl:choose>
            </h1>
          </div>
        </xsl:for-each>

</xsl:template> 
```

我还在[http://our.umbraco.org/forum/developers/xslt/33326-How-to-display-sitemapnavigation-for-a-site-using-xslt上展开了讨论](http://our.umbraco.org/forum/developers/xslt/33326-How-to-display-sitemapnavigation-for-a-site-using-xslt)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:19:51.573

我终于成功地完成了我一直在寻找的事情。这是那些可能正在寻找相同功能的人的代码

```
<?xml version="1.0" encoding="UTF-8"?> 
```

]>

```
<xsl:template name="menu">
    <xsl:param name="level"/>

    <xsl:variable name="RootNode" select="umbraco.library:GetXmlNodeById(1050)" />
    <div class="column">
        <h1>
            <a href="{umbraco.library:NiceUrl($RootNode/@id)}" style="width:200px;">
                <xsl:value-of select="$RootNode/@nodeName"/>
            </a>
        </h1>
        <xsl:call-template name="submenu_Homepage">
        </xsl:call-template>

    </div>

    <xsl:if test="count($currentPage/ancestor-or-self::* [@level=$level]/* [@isDoc and string(umbracoNaviHide) != '1']) &gt; '0'">
        <xsl:for-each select="$currentPage/ancestor-or-self::* [@level=$level]/* [@isDoc and string(umbracoNaviHide) != '1']">
            <div class="column">
                <h1>
                    <xsl:choose>
                        <xsl:when test="name() = 'Link'">
                            <a href="{current()/linkUrl}" target="_blank">
                                <xsl:value-of select="@nodeName" />
                            </a>
                        </xsl:when>
                        <xsl:otherwise>
                            <a href="{umbraco.library:NiceUrl(@id)}">
                                <xsl:value-of select="@nodeName" />
                            </a>
                        </xsl:otherwise>
                    </xsl:choose>

                </h1>

                <xsl:if test="count(current()/* [@isDoc and string(umbracoNaviHide) != '1']) &gt; '0'">
                    <xsl:call-template name="submenu">
                        <xsl:with-param name="level" select="$level+1"/>

                    </xsl:call-template>
                </xsl:if>
            </div>
        </xsl:for-each>
    </xsl:if>

</xsl:template>

<xsl:template name="submenu">
    <xsl:param name="level"/>
    <ul class="level_{@level}">
        <xsl:for-each select="current()/*[@isDoc and string(umbracoNaviHide) != '1']">
            <li>
                <xsl:if test="position() != last()">
                    <xsl:attribute name="class">bottom_border</xsl:attribute>
                </xsl:if>
                <a href="{umbraco.library:NiceUrl(@id)}">
                    <xsl:value-of select="@nodeName"/>
                </a>
                <!--case when we have third menu level-->
                <xsl:if test="count(current()/* [@isDoc and string(umbracoNaviHide) != '1']) &gt; '0'">
                    <xsl:call-template name="submenu">
                        <xsl:with-param name="level" select="$level+1"/>
                    </xsl:call-template>
                </xsl:if>
            </li>
        </xsl:for-each>
    </ul>
</xsl:template>

<xsl:template name="submenu_Homepage">
    <ul>
        <xsl:for-each select="$currentPage/ancestor-or-self::*/* [@isDoc and string(umbracoNaviHide) = '1']">
            <li>
                <xsl:if test="position() != last()">
                    <xsl:attribute name="class">bottom_border</xsl:attribute>
                </xsl:if>
                <xsl:choose>
                    <xsl:when test="name() = 'Link'">
                        <a href="{current()/linkUrl}" target="_blank">
                            <xsl:value-of select="@nodeName" />
                        </a>
                    </xsl:when>
                    <xsl:otherwise>
                        <a href="{umbraco.library:NiceUrl(@id)}">
                            <xsl:value-of select="@nodeName" />
                        </a>
                    </xsl:otherwise>
                </xsl:choose>
            </li>

        </xsl:for-each>
    </ul>
</xsl:template> 
```

# iphone - 如何为单个 UIView 提供两个不同的类引用？

> ID：11607330
> 
> 赞同：1
> 
> 时间：2012-07-23T06:19:44.137
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我想在我的应用程序中实现两个功能作为颜色填充和视图放大。但问题是我无法同时实现这两个功能。因为我必须为我的 UIView 的两个功能指定两个不同的类引用，这是不可能的。

换句话说，我有一个视图，并且我将类引用作为 UIView （用于颜色功能）。但是对于放大功能，我必须将类引用作为 MagnifyingView 提供给该视图。因此，不可能同时实现这两个功能。

那么我怎样才能在不同的条件下给 UIView 和 ACMagnifyingView 两个不同的类引用到单个 UIView 呢？

我怎样才能做到这一点 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:17:41.787

你试过`Categories`吗？检查本教程[http://iphone-obsessed.blogspot.com.br/2010/05/tutorial-creating-class-categories-in.html](http://iphone-obsessed.blogspot.com.br/2010/05/tutorial-creating-class-categories-in.html)

你能提供更多信息吗？也许如果您提供更多信息，我可以为您提供更多帮助

**编辑**

如何`Categories`工作：

你有一`UIView`门课，你想使用一些你重复很多次的方法。你是做什么的：你创建一个类别`UIView`并将这个方法添加到你的类别中，如下所示：

文件`UIView+CustomView.h`

```
#import <UIKit/UIKit.h>

@interface UIView (CustomView)

- (void)myCustomMethod;

@end 
```

文件`UIView+CustomView.m`

```
#import "UIView+CustomView.h"

@implementation UIView (CustomView)

- (void)myCustomMethod {
  // Whatever you want to do with this UIView
}

@end 
```

现在，每次您需要使用时，`myCustomMethod`您只需导入，该类中的`UIView+CustomView.h`所有`UIView`对象都可以访问此方法。

像这样：

文件`MainViewController.m`，标题：

```
#import "UIView+CustomView.h" 
```

文件`MainViewController.m`，正文，在任何方法中：

```
[myView myCustomMethod]; 
```

考虑到这一点，我相信您可以添加您`ACMagnifyingView`的子类和此类别以使用您的自定义视图

# data-modeling - 在一张表中存储多个表ID的编程逻辑

> ID：11607331
> 
> 赞同：0
> 
> 时间：2012-07-23T06:19:46.417
> 
> 标签：data-modeling

我有五个表如下

```
1.tblFruits
2.tblGroceries 
3.tblVegetables
4.tblPlants
5.tblDescriptions 
```

除第 5 个表外，所有表都`tblDescriptions`将 id 作为一列，作为主键，将 Items 作为第二列。

表 1 至表 4 列类似，如下

```
ids     item_name 
```

现在我想将四个表的项目的描述存储在第五个表中，如下所示

```
Desc_Id   Description     Ids 
```

现在的问题是，因为我正在存储 id 来识别其他四个表中项目的描述，所以当我将四个表的 id 放在一起时，我可能会得到相似的 id。

让我知道上述要求的表格设计

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:27:44.837

由于您的表相似，因此最佳做法是组合所有表甚至描述，并使用类型列定义行类型。

```
id   name   description   type
                          [Fruits, Groceries, Vegetables, Plants] 
```

它更容易理解和维护。

但是，如果您的表格不同，您有两种选择：

**1-为您的类型使用超级表，它会产生我建议的唯一 ID。**

2- 在描述字段中使用类型行并将其定义为该表中 ID 旁边的主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:27:54.900

```
tblDescription
=====================
id | pk_id | description | type

id : auto_generated id of tblDescription
pk_id : foreign key to linked to the tblFruits,tblGroceries.. table
description : the description
type : value either  be fruits, groceries,vegetables,plants .To identify the table. 
```

提取描述的 SQL 如下：

```
Select f.item_name, d.description from tblDescription d 
inner join tblFruits f on d.pk_id=f.id and d.type='fruits'
inner join tblGroceries g on d.pk_id=g.id and d.type='groceries' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:28:03.293

使用`Polymorphic Association`. 作为带有描述的第 5 个表的外键，使用两列`object_id`和`object_model`.

表格内容示例：

```
Desc_Id Description Object_ID Object_Model
1       'dsferer'   12        `Fruit`
2       `desc2      12        `Vegetable`
2       `descfdfd2  19        `Vegetable` 
```

出于性能原因，请记住在两列上添加唯一索引。

[在这里你](http://net.tutsplus.com/tutorials/php/understanding-and-applying-polymorphism-in-php/)有一些用 PHP 解释这个的文章

# java - 来自单词的信息性句子

> ID：11607332
> 
> 赞同：1
> 
> 时间：2012-07-23T06:19:46.650
> 
> 标签：java, android, algorithm

我有一些词，例如“Arizona”、“Jhon call smith”、“Morning”、“jogging”，我想写成“Jhon call smith from Arizona while jogging in morning”我有很多如上所述的数据，想创造信息安卓中的句子。我怎么能在android中做到这一点。有没有可用的算法或方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:30:44.570

这是一个研究相当深入的人工智能主题。获得基本工作的一种快速而肮脏的方法是采用“Mad Libs”方法。将您的单词分组为名词，动词，代词等类别。然后只需用相关类别中的单词填写空白即可。

`The <adjective> <noun> is <verb>.`

不过，很难用这个来告诉你的最终目标，以获得更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:37:54.490

它是机器学习和模式识别的研究领域。这个想法是用样本句子训练你的算法，以便它学习如何构建它们，然后能够使用它学到的东西并遵循一些模式来构建有意义且人类可以理解的句子。

在这里向您描述一个算法是行不通的，而且您在不学习理论的情况下实施某些东西也不会教给您太多东西。这是一个很大的领域，有很多方法。

作为一个好的入门者，我推荐阅读[自然语言处理](http://en.wikipedia.org/wiki/Natural_language_processing)。

查看[此页面](http://en.wikipedia.org/wiki/List_of_natural_language_processing_toolkits)以了解您可以使用的库。

# php - 通过 apache 设置将 http 请求转移到两个文件

> ID：11607351
> 
> 赞同：0
> 
> 时间：2012-07-23T06:21:27.173
> 
> 标签：php, apache, http

我在 apache 中接收通过 php 文件处理的 http 请求。有没有办法（通过apache中的某些设置）可以将相同的请求分成两个php文件，在那里它们可以同时并行处理。它会导致任何性能问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:25:55.803

HTTPd 已经这样做了，除非您将 PHP 作为 CGI 或其他一些特殊的单进程模式运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:44:43.033

除非您的设置非常奇怪，否则您应该能够每秒处理多达数千个请求。

Apache（假设是标准设置）为每个请求生成一个新的工作线程，然后该线程处理请求。因此，如果您有一个处理请求的 php 脚本，那么它将在该线程内处理请求。

PHP 脚本没有锁定，它们在服务器处理请求时由 PHP 运行时解释和执行，这意味着单个脚本可以在多个线程中运行。

例如，我在工作中处理的应用程序由数百个 PHP 文件组成，所有这些文件都一起工作，应用程序每秒处理 1000 个请求，这一切都在一个大部分标准的 LAMP 设置上（我们还有一些额外的，比如 XHProf）。

# sql - 如何避免并发事务插入的重复 ID？

> ID：11607354
> 
> 赞同：1
> 
> 时间：2012-07-23T06:21:32.703
> 
> 标签：sql, oracle, plsql

我在多个会话中执行了以下 PL/SQL：

```
DECLARE
   x     NUMBER;
   y     NUMBER;
BEGIN
   x := 500;
   y := 0;
   WHILE (x > y)
   LOOP
       SET TRANSACTION 

       Select max(SERIAL_NO) INTO y from MY_TABLE;

       y := y + 1;

       insert into MY_TABLE S (S.SERIAL_NO, S.Request_id)
       values ((
                (select max(SERIAL_NO) from MY_TABLE) + 1
               )
              ,'B');

       Commit;

   END LOOP;
END;
/ 
```

我的表中仍然有重复的条目，这怎么会发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T06:35:22.057

当然。Oracle 具有已提交的事务隔离级别。

例如，如果两个会话像这样运行：

```
Time  Session A                                 Session B
1     (Select max(SERIAL_NO) from MY_TABLE)+1
2                                               (Select max(SERIAL_NO) from MY_TABLE)+1
3     commit; 
```

您将在表中获得 SERIAL_NO 的重复项，因为会话 A + B 看到 SERIAL_NO 的值相同。

您需要使用序列来确保唯一性（或实现您自己的信号量风格 - 但我不推荐这样做）。

您的`SET TRANSACTION`陈述缺少一些参数，但这无论如何都无济于事（如果您想到的话`SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;`）

另请参阅[http://docs.oracle.com/cd/B19306_01/server.102/b14220/consist.htm#sthref1981](http://docs.oracle.com/cd/B19306_01/server.102/b14220/consist.htm#sthref1981)关于可串行化隔离事务级别和数据并发性和一般一致性的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:33:16.287

如果您不想在表中出现重复项，请使用 UNIQUE CONSTRAINTS。

# jasper-reports - 单个 JasperReport 中的两个 SQL 查询

> ID：11607360
> 
> 赞同：6
> 
> 时间：2012-07-23T06:22:07.197
> 
> 标签：jasper-reports, reporting, ireport

我们正在为 Web 应用程序生成基于 iReports 和 JasperReports 的报告。

使用 iReports 我发现我遇到了大问题。

我想使用两个 SQL 查询来填写我的主报告...在查询设计器中我只能编写一个查询..

对于另一个查询，我不能使用子报告...

如何编写第二个查询，它将返回不同的字段并将它们包含在我的报告中。

请指导...

我不能使用子报告...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T10:27:39.607

是的，向报告中添加表格就像添加字段一样简单。只需将其从调色板中拖放到需要它的报告中即可。

1.  添加一个新的表数据源。我假设这已经完成了。
2.  配置数据源后，您可以使用向导设计表 UI。
3.  只需单击下一步或完成即可关闭向导。

要在数据集中添加参数（如果需要），请使用报告检查器导航到您的数据集。扩展您的数据集。你会找到参数菜单。右键单击以添加新参数。

现在右键单击您的表格并选择编辑表格数据源。在这里，您将找到将参数从主报告传递到表格的选项。将参数传递给您的表格应该像在子报告中一样简单。从下拉列表框中选择刚刚创建的参数并传递所需的值。在出现的数据集运行对话框中，请确认您正在使用的数据集和报表连接。您已经完成了对表格的配置，接下来您将在表格的单元格中放置字段以显示数据。

*你得到你的文档没有页面，因为我猜主报告查询没有返回任何行。要执行您的表格，您的主报告必须至少返回一行*

希望这对您有所帮助。

祝你好运！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T07:46:23.427

就 Ireports 而言，主报表只能包含一个查询。如果您想在报告中使用多个查询，可以通过以下方式。

*   子报告
*   表数据集。
*   子数据集。

由于您不希望使用子报告，因此您可以使用表数据集。表数据集也可以对子报表执行任何操作（返回变量除外）。您可以将子数据集与图表和图形一起使用。我希望桌子对你有用。

# mysql - 如何外部连接两个 mysql 查询？

> ID：11607361
> 
> 赞同：0
> 
> 时间：2012-07-23T06:22:07.507
> 
> 标签：mysql

假设有 4 个表，这样 `t1.id = t2.pid` 和 `t3.id = t4.pid`

我如何在哪里获取记录`t1.val1 != t3.val1 AND t2.val2 != t4.val2`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:38:32.193

您需要使用`LEFT OUTER JOIN`从两个表中查找不匹配的记录。

```
SELECT *
FROM t1
     INNER JOIN t2
           ON t1.id = t2.pid
     LEFT OUTER JOIN t3
           ON t2.pid = t3.id
     LEFT OUTER JOIN t4
           ON t3.id = t4.pid
WHERE (t1.val1 IS NULL OR t3.val1 IS NULL)
      AND (t2.val2 IS NULL OR t4.val2 IS NULL) 
```

访问： http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# c++ - c ++自定义运算符（+ =）以不可预测的方式表现

> ID：11607362
> 
> 赞同：1
> 
> 时间：2012-07-23T06:22:10.643
> 
> 标签：c++, operator-keyword

```
Kvector::Kvector(float x, float y, float z) : x(x), y(y),z(z) {};

Kvector& Kvector::operator+(const Kvector& other) {
    return Kvector(x + other.x, y + other.y, z + other.z);
};

Kvector& Kvector::operator*(const Kvector& other) {
    return Kvector((x == 0) ? 0 : x*other.x, 
                   (y == 0) ? y * other.y : 0,
                   (z == 0) ? 0 : z * other.z);
};

Kvector& Kvector::operator*(const float other) {
    return Kvector(x * other, y * other, z * other);
};

void Kvector::operator+=(const Kvector& other) {
    x += other.x;
    y += other.y;
    z += other.z;
}; 
```

上面是名为 Kvector 的 struct 的运算符定义（带有 float xyz 的 struct，三个简单对象，仅此而已）。

如果我对代码的理解是正确的，下面的代码应该打印 29 29 29。它确实如此。

```
Kvector a(1,1,1);
a = a*29;
cout<<"poss "<<a.x << " "<<a.y<< " "<< a.z<<endl; 
```

但是，如果我尝试

```
Kvector a(1,1,1);
a += a*29;
cout<<"poss "<<a.x << " "<<a.y<< " "<< a.z<<endl; 
```

由于某种原因，它会打印 1 1 1 。所以我尝试了下面的代码。

```
Kvector a(1,1,1);
a = a+ a*29;
cout<<"poss "<<a.x << " "<<a.y<< " "<< a.z<<endl; 
```

上面的代码打印以下内容

位置 -1.07374e+008 -1.07374e+008 -1.07374e+008

我希望它打印 30 30 30 因为 a= (1,1,1) + (1,1,1) * 29 = (1,1,1) + ( 29, 29,29) = (30,30, 30)

我将非常感谢对此行为的解释。感谢您阅读我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:26:27.787

operator+= 签名是：

```
Kvector& Kvector::operator+=(const Kvector& other) 
{
  x+=other.x; 
  y+=other.y; 
  z +=other.z;

  return *this;
}; 
```

实现 + usign += 以减少代码重复并作为免费函数也是一个好习惯。

```
Kvector Kvector::operator+(const Kvector& a, const Kvector& b) 
{
  Kvector result(a);
  result += b;
  return result;
}; 
```

目前，您的代码正在为 operator+ 返回一个 Kvector&，它返回对局部变量的引用，这显然是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:24:15.557

```
Kvector& Kvector::operator+(const Kvector& other){return Kvector    (x+other.x,y+other.y,z+other.z); };
Kvector& Kvector::operator*(const Kvector& other){return Kvector((x==0)?0: x*other.x,(y==0)?    y*other.y:0,(z== 0)? 0: z*other.z); };
Kvector& Kvector::operator*(const float other){return Kvector( x*other,y*other,z*other); }; 
```

您返回对临时对象的引用。不正确。替换`Kvector&`为`Kvector`返回类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:28:20.937

您不应该在方法中返回局部变量作为参考。结果可能出乎意料。许多 c++ 编译器应该对此给出警告，例如 vc++11

# c++ - __declspec(dllexport) 在导入函数之前添加它时会做什么

> ID：11607363
> 
> 赞同：6
> 
> 时间：2012-07-23T06:22:19.973
> 
> 标签：c++, c, dll, opencv

> **可能重复：**
> [Windows 和 C++：extern 和 __declspec(dllimport)](https://stackoverflow.com/questions/2288293/windows-c-extern-declspecdllimport)
> [为什么/何时不需要 __declspec(dllimport)？](https://stackoverflow.com/questions/4489441/why-when-is-declspec-dllimport-not-needed)

我想写一个DLL项目。该项目包括几个 DLL。他们是**依赖**的。我定义了一些宏，如下所示：

```
#ifdef  MYDLL_DECL1
    #define  DLL_DECL __declspec(dllexport)
#else
    #define DLL_DECL __declspec(dllimport)
#endif 
```

**我为每个模块**定义了 MYDLL_DECL1...MYDLL_DECLn 。因为我认为如果我定义相同的宏，它就行不通。但我真的只想定义一个宏，我写了一个测试台。我有两个模块。在第二个模块的源文件中。我编写如下代码：

```
#define  MYDLL_DECL
#include "moudle1.h"
#include "moudle2.h" 
```

如果我使用相同的宏名称“MYDLL_DECL”，对于model1的头文件我定义了“MYDLL_DECL”，所以“DLL_DECL”等于“__declspec（dllexport）”。实际上在 module2 中它应该等于“__declspec(dllimport)”，因为 module2 导入 module1。 **但是当我为两个模块定义相同的宏时，我发现它起作用了。而且我还发现 OpenCV 也将这种方法用于其库**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T07:45:27.747

首先，想想没有宏你需要什么。如果在 module1 中定义了一个类或函数，则需要 `__declspec(dllexport)`在 module1 以及`__declspec(dllimport)`所有其他模块中声明它。包括在声明它的头文件中。

由于您不想维护两个不同的头文件，并且您不想到处进行条件编译，因此最好的解决方案是使用条件定义的宏，例如：

```
#ifdef MODULE1
#define MODULE1_DECL __declspec(dllexport)
#else
#define MODULE1_DECL __declspec(dllimport)
#endif 
```

调用编译器时，只`MODULE1`在项目中定义module1；您没有在任何其他项目中定义它。因此，当编译 module1 时，`MODULE1_DECL`展开为`__declspec(dllexport)`，而在编译任何其他模块时，它展开为`__declspec(dllimport)`.

# javascript - phonegap Facebook 集成 - 从 Facebook 获取用户详细信息

> ID：11607367
> 
> 赞同：0
> 
> 时间：2012-07-23T06:22:55.387
> 
> 标签：javascript, facebook, html, cordova

我正在使用 PhoneGap 创建一个 html5 应用程序。我想将 facebook 集成到我的应用程序中。我想要做的是，我希望用户使用 Facebook 登录我的应用程序，但在身份验证后，我需要获取已登录的特定用户的详细信息，例如个人资料名称、电子邮件 ID、出生日期、地点、地址、个人资料图片等...当我们传递用户名和密码时，是否有任何特定的 API 提供所有这些详细信息作为响应。请给我建议一种方法..或者如果可能的话，请给我打电话.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:26:41.747

PhoneGap 只是一个围绕 HTML/其他网络格式的移动平台包装器。因此，由于这些工具很容易使用它们来实现这一目标，PhoneGap 也不例外。学习并实施[Facebook Graph API](https://developers.facebook.com/docs/reference/api/)，这是 Facebook 将 FB 集成到您的应用程序的整体解决方案。一旦用户使用 OAuth 2.0 身份验证登录，Graph API 访问令牌允许您获取所需的所有信息（在用户设置的访问权限内）！

一旦您熟悉了 Graph API 的工作原理，请从[此处](https://developers.facebook.com/docs/authentication/)实现用户登录的广泛指南开始，然后获取个人资料信息将变得很简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:35:44.647

我假设你的技能在于 Javascript/HTML 领域，所以[这里有一个链接](http://developers.facebook.com/docs/reference/javascript/)，它将告诉你所有你需要知道的关于使用 javascript 访问 facebook apis 的信息。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:46:42.263

查看[Facebook 网站](https://developers.facebook.com/docs/guides/web)和[身份验证](https://developers.facebook.com/docs/authentication/)指南。Facebook 还有一个[JavaScript 测试控制台](https://developers.facebook.com/tools/console)，允许您测试和调试 JavaScript SDK 方法。
例如用法：

```
 window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document)); 
```

一个示例插件项目，您可以参考[Facebook for PhoneGap on Android](https://github.com/jos3000/phonegap-plugins/tree/master/Android/Facebook)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T11:19:19.023

phonegap Facebook 集成 - 从 Facebook 获取用户详细信息

[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

# vb.net - 在命令提示符下运行的 VB.Net 代码

> ID：11607371
> 
> 赞同：0
> 
> 时间：2012-07-23T06:23:22.667
> 
> 标签：vb.net, command, prompt

我已经完成了一个 VB.Net 程序，它从两个文本文件中读取数据（一个文本文件将包含服务器名称列表，另一个将包含值列表）并使用一个文本文件列表中的服务器名称访问数据库并将其他文本文件中的值用作过滤器。

该代码在 Dot Net 环境中运行良好。

要求是，我需要让它在命令提示符下运行。输入应该是以下

MyProgram.exe -s D:\ServerName.txt -v D:\Valuelist.txt

MyProgram 是 VB.Net 中程序的名称，另外两个是文本文件。

帮我解决这个问题

谢谢，拉米亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:44:16.307

如您所述从命令提示符运行意味着您需要创建一个`Console Application`. 创建新项目时选择此项目类型意味着您的程序将没有界面，而是在控制台上运行。

命令行参数将传递给主事件。

您还可以使用普通的 Windows 应用程序，并检查`System.Environment.CommandLine`以查看用于启动应用程序的命令行。

要测试您的应用程序，请在项目 -> 属性 -> 调试 -> 命令行参数中指定要运行的命令行属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:45:04.627

在项目的属性中，在**Application**下，设置：
**Application type** = Console Application
**Startup object** = Sub Main

接下来将一个模块添加到您的项目（或使用现有的）并创建一个类似的方法：

```
Sub Main(args() As String)
    If args.Length >= 2 Then
        ProcessFiles(args(0), args(1))
    Else
        AskForFiles()
    End If
End Sub 
```

此方法将在应用程序执行时运行。该`args`参数将包含所有命令行参数。

* * *

或者，您可以使用 Windows 窗体应用程序，在这种情况下，当它启动时，您需要检查命令行参数。

```
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles Form1.Load
    Dim args As String() = Environment.GetCommandLineArgs()
    If args.Length >= 2 Then
        ProcessFiles(args(0), args(1))
    Else
        AskForFiles()
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T04:06:09.097

从您的评论看来，您实际上只是从“开始”菜单>“运行”中运行命令（或其变体，具体取决于您使用的 Windows 版本）。

这意味着会为您的命令创建一个控制台窗口以在其中执行，然后它会关闭。

作为最低要求，您需要包括其他答案中描述的参数处理。

为了能够继续查看程序的结果，请先自己打开命令提示符，或者`Console.ReadLine`在程序末尾添加一个。然后它将等待按下返回，或者您可以关闭窗口。

# lua - 用于 LONG BUFFER 操作的 Lua 中的“C like struct”？

> ID：11607372
> 
> 赞同：3
> 
> 时间：2012-07-23T06:23:28.473
> 
> 标签：lua

为了 Lua 的简单和美观，我想在 Lua 中而不是在 C 中编写“映射”；-)

所以让我们说在 CI 中可能有以下内容：

```
typedef struct my_struct{
    char field_1[10];                              
    char field_2[250];                                
    char field_3[2000];                              
}my_struct;

my_struct   *pmy_struct;

pmy_struct = (my_struct *) some_buffer; 
```

所以我想要一种在 Lua 中对“结构”内的字段进行固定长度的方法，以便整体 BUFFER OFFSETS 在到达目标系统时保持完好......

**所以让我们说在上面的结构中我想将“field_3”设置为文本“apple”......我仍然希望该结构字段的总长度为 2000 字节......**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T05:31:22.580

你可以用 Lua 做到这一点。

如果您希望（或被迫）继续使用 Lua 5.1，请考虑使用[struct](http://www.inf.puc-rio.br/~roberto/struct/)库。

```
raw_data = struct.pack("c10c250c2000", field1, field2, field3)
field1, field2, field3 = struct.unpack("c10c250c2000", raw_data) 
```

但是，目前可用的最佳解决方案是[LuaJIT](http://luajit.org/luajit.html)；与标准 Lua 实现相比，使用 LuaJIT 有很多好处，但最适合您的是[FFI 库](http://luajit.org/ext_ffi.html)。

```
local ffi = require"ffi"
ffi.cdef[[
    typedef struct {
        char field_1[10];                              
        char field_2[250];                                
        char field_3[2000];                              
    } my_struct;
]]

local my_thing = ffi.new("my_struct")
my_thing.field_1 = "Ain't"
my_thing.field_2 = "this"
my_thing.field_3 = "great? :D"

local ptr_my_thing = ffi.new("my_struct*", my_thing)
ptr_my_thing.field_2 = [[
    LuaJIT does a great job at figuring out
    what you're trying to do.
]]
ptr_my_thing.field_3 = [[
    There are some cases where the generics of
    Lua cannot be used to infer information,
    so have a look at the LuaJIT site for specifics.
]]

print(ffi.string(ptr_my_thing.field_2)) 
```

一个常见的误解是，Lua 和 Python 等通用语言不应该（或者，在无知中，不能）用于低级细节。LuaJIT 是“智能”语言的重要第一步，它允许您在任何级别工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T07:37:29.080

Lua 不是这样工作的。Lua 没有“结构”。它没有具有“大小”的“字段”。

它有表，可以有几种不同类型的值。这些值映射到键（它们本身就是值）。虽然您可以使用元表来防止添加新键，但您不能强制将值的“大小”设置为特定的值。

或者，换一种说法，*停止尝试像 C 一样对 Lua 进行编程。*它们是不同的语言，您应该以自己的方式处理每种语言。在 C 中，您需要关心字段的大小、结构的布局等。

使用 Lua（和大多数脚本语言）的原因是因为您*不想*关心这些事情。您不必关心字符串“apple”是否恰好存储在大小为 2000 字节的字节数组中。如果你想关心这个，那么你就不想使用 Lua。

# javascript - 以度数计算 Google 静态地图的尺寸

> ID：11607374
> 
> 赞同：0
> 
> 时间：2012-07-23T06:23:38.413
> 
> 标签：javascript, google-maps, math, trigonometry

我正在尝试计算 Google 静态地图返回的卫星图像的宽度和高度（以度为单位）。

**我的问题：**我认为我没有正确计算卫星图像的高度（以度为单位）。

你知道如何计算这张卫星图像的高度吗？

[http://maps.googleapis.com/maps/api/staticmap?center=-32,151&zoom=14&size=400x400&sensor=true](http://maps.googleapis.com/maps/api/staticmap?center=-32,151&zoom=14&size=400x400&sensor=true)

以下代码可以正确计算以度为单位的卫星图像的宽度，但不能正确计算高度：

```
var meshWidthDeg  = (imgWidth/256f)*(360f / Math.Pow(2f,zoom));
var meshHeightDeg = (imgHeight/256f)*(360f / Math.Pow(2f,zoom));
var elevArea       = new Array(lat - (meshWidthDeg/2), lon - (meshHeightDeg/2), 
                                   meshWidthDeg, meshHeightDeg); 
```

# factorial - 哪个函数增长得更快，指数或阶乘？

> ID：11607376
> 
> 赞同：89
> 
> 时间：2012-07-23T06:23:47.053
> 
> 标签：factorial, exponential

哪个函数增长得更快，指数（如 2^n、n^n、e^n 等）或阶乘（n！）？Ps：我只是在某个地方读到，n！增长速度超过 2^n。

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-07-23T06:38:21.353

嗯！最终比具有恒定基数（2^n 和 e^n）的指数增长得更快，但 n^n 比 n 增长得更快！因为基数随着 n 的增加而增加。

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2016-03-17T15:16:04.497

`n! = n * (n-1) * (n-2) * ...`

`n^n = n * n * n * ...`

第一个 in 之后的每一项`n^n`都较大，因此 n^n 会增长得更快。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-22T14:36:56.657

`n^n`增长大于`n!`- 对于一个很好的解释，请参阅@AlexQueue 的答案。

对于其他情况，请继续阅读：

阶乘函数确实比指数函数渐近增长，但差异何时开始并不清楚。例如，对于`n=5`和`k=10`，阶乘`5!=120`仍然小于`10^5=10000`。为了找出阶乘函数何时开始变大，我们必须进行一些快速的数学分析。

我们使用斯特林公式和基本的对数操作：

```
log_k(n!) ~ n*log_k(n) - n*log_k(e)

k^n = n!
log_k(k^n) = log_k(n!)
n*log_k(k) = log_k(n!)
n = log_k(n!)

n ~ n*log_k(n) - n*log_k(e)
1 ~ log_k(n) - log_k(e)
log_k(n) - log_k(e) - 1 ~ 0
log_k(n) - log_k(e) - log_k(k) ~ 0
log_k(n/(e*k)) ~ 0

n/(e*k) ~ 1
n ~ e*k 
```

因此，一旦`n`达到 的大小的近 3 倍`k`，阶乘函数将开始变得比指数函数大。对于大多数实际场景，我们将使用 的大值`n`和 的小值`k`，因此在实践中，我们可以假设阶乘函数严格大于指数函数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-06T18:20:15.230

我想向您展示一种更加图形化的方法来很容易地证明这一点。我们将使用除法来绘制一个函数，它会很容易地向我们展示这一点。

让我们用一个基本而枯燥的除法函数来解释除法的一个性质。

[![变量 a 和 b 的除法](../Images/6d75c46c315d8a5e323fd55ad51bc73f.png)](https://i.stack.imgur.com/LipA5.png)

随着 a 的增加，对该表达式的评估也会增加。随着 b 减小，该表达式的评估也减小。

使用这个想法，我们可以根据我们期望增加和减少的内容绘制图表，并比较哪个增加更快。

在我们的例子中，我们想知道指数函数是否会比阶乘增长得更快，反之亦然。我们有两种情况，变量指数与变量阶乘的常数，以及变量指数与变量阶乘的变量。

用 Desmos 绘制这些工具（没有隶属关系，它只是一个不错的工具），向我们展示了这一点：

### 常数到变量指数与变量阶乘的关系图

[![图1](../Images/14ae22b79a91f4a5fc47858aa5f19811.png)](https://i.stack.imgur.com/vM0hx.png)

尽管最初似乎指数表达式增加得更快，但它达到了不再增加得那么快的地步，相反，阶乘表达式增加得更快。

### 变量到变量指数与变量阶乘的关系图

[![图2](../Images/71416e2b537bf840c61d0a23ea32be87.png)](https://i.stack.imgur.com/uEbeB.png)

虽然它最初似乎较慢，但它开始迅速上升超过该点，因此我们可以得出结论，指数必须比阶乘增长得更快。

# java - 删除Java中的重复对象

> ID：11607378
> 
> 赞同：0
> 
> 时间：2012-07-23T06:23:52.640
> 
> 标签：java, hashcode

我有如下所示的用户对象：

用户.java：

```
 public class User {
        public String firstName;
        public String lastName;

        public String getFirstName() {
            return firstName;
        }   
        public void setFirstName(String firstName) {
            this.firstName = firstName;
        }
        public String getLastName() {
            return lastName;
        }
        public void setLastName(String lastName) {
            this.lastName = lastName;
        }

        @Override
        public int hashCode() {
            return (this.firstName.hashCode() + this.lastName.hashCode());
        }

        @Override
        public boolean equals(Object obj) {
            if(obj instanceof User) {
                User temp = (User) obj;
                if(this.firstName.equals(temp.firstName) && this.lastName.equals(temp.lastName)) {
                    return true;
                }
            }
            return false;
        }
    } 
```

主程序如下图所示：

```
 import java.util.*; 

    class pp {
        public static void main(String[] args) {
            List<User[]> a = new ArrayList<User[]>();
            User[] u = new User[3];

            u[0] = new User();
            u[0].setFirstName("Mike"); u[0].setLastName("Jordon");      

            u[1] = new User();
            u[1].setFirstName("Jack"); u[1].setLastName("Nicolson");

            u[2] = new User();
            u[2].setFirstName("Jack"); u[2].setLastName("Nicolson");

            a.add(u);

            Set<User[]> s = new HashSet<User[]>(a);

            for (User[] ss : s) {
                for (int i=0; i<ss.length; i++) {           
                    System.out.println(ss[i].getFirstName() + " " + ss[i].getLastName());
                }
            }
        }
    } 
```

我期望输出是

```
Mike Jordon
Jack Nicolson 
```

但不知何故，它保留了重复的对象并打印为：

```
Mike Jordon
Jack Nicolson
Jack Nicolson 
```

谁能告诉我我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T06:26:28.707

你的 equals 方法应该是这样的：

```
 @Override
    public boolean equals(Object obj) {
        if(obj instanceof User) {
            User temp = (User) obj;
            if(this.firstName.equals(temp.firstName) && this.lastName.equals(temp.lastName)) {
                return true;
            }
        }
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T09:34:44.767

我已经解决了您的问题并理解了要求。请找到我已经实现的类似代码，并且还成功地从集合中删除了具有重复值的对象。

```
@Snipet...

Employee.java
==============

package com.hcl;

public class Employee {

    public String empid;
    public String empname;
    public double sal;
    public int age;

    public Employee(){

    }

    public Employee(String empid,String empname,double sal,int age){

        this.empid = empid;
        this.empname = empname;
        this.sal = sal;
        this.age = age;
    }

    public String getEmpid() {
        return empid;
    }
    public void setEmpid(String empid) {
        this.empid = empid;
    }
    public String getEmpname() {
        return empname;
    }
    public void setEmpname(String empname) {
        this.empname = empname;
    }
    public double getSal() {
        return sal;
    }
    public void setSal(double sal) {
        this.sal = sal;
    }
    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    }

    /**
     * This override method playes a major role to remove duplicate values
     */
    @Override
    public int hashCode() {
        return (this.empid.hashCode() + this.empname.hashCode()+String.valueOf(this.sal).hashCode()+String.valueOf(this.age).hashCode());
    }

    /**
     * This override method plays a major role to remove duplicate values
     */
    @Override
    public boolean equals(Object obj) {
        if(obj instanceof Employee) {
            Employee temp = (Employee) obj;

            if(this.empid.equals(temp.empid) && this.empname.equals(temp.empname) && String.valueOf(this.sal).equals(String.valueOf(temp.sal)) && String.valueOf(this.age).equals(String.valueOf(temp.age))) {
                return true;
            }
        }
        return false;
    }

}

@Snipet..........
RemoveDuplicateObjects.java
=============================
package com.hcl;

import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

public class RemoveDuplicateObjects {

    public static void main(String[] args) {

        Employee emp1 = new Employee("1","bapi",1000,31);
        Employee emp2 = new Employee("2","mano",2000,29);
        Employee emp3 = new Employee("1","bapi",1000,31); // emp3 == emp1 duplicate object
        Employee emp4 = new Employee("3","Rohan",3000,27);
        Employee emp5 = new Employee("1","bapi",1000,31); // emp5 == emp3 == emp1 duplicate object

        RemoveDuplicateObjects obj = new RemoveDuplicateObjects();

        // empList contains objects having duplicate values. How to remove duplicate? 
        List<Employee> empList = new ArrayList<Employee>();
        empList.add(emp1);
        empList.add(emp2);
        empList.add(emp3);
        empList.add(emp4);
        empList.add(emp5);

        if(emp1.equals(emp2)){

            System.out.println("emp1 and emp2 are equal");
        }

        if(emp1.equals(emp3)){
            System.out.println("emp1 and emp3 are equal");
        }
        obj.removeDuplicate(empList);

    }

    // method is used for removing objects having duplicate values
    private void removeDuplicate(List<Employee> empList) {

        Set<Employee> empSet = new HashSet<Employee>();
        empSet.addAll(empList);

        for(Employee e: empSet){

            System.out.println("id = "+e.getEmpid());
            System.out.println("name = "+e.getEmpname());
            System.out.println("sal = "+e.getSal());
            System.out.println("age = "+e.getAge());
        }

    }

}

Done! Now you can run the program and analyze the solution. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T06:29:28.750

我想你想要这个：

```
 class pp {
        public static void main(String[] args) {
            Set<User> a = new HashSet<User>();

        User u = new User();
        u.setFirstName("Mike"); u.setLastName("Jordon");  
        a.add(u);

        u = new User();
        u.setFirstName("Jack"); u.setLastName("Nicolson");
        a.add(u);

        u = new User();
        u.setFirstName("Jack"); u.setLastName("Nicolson");

        a.add(u);

        for (User ss : a) {           
                System.out.println(ss.getFirstName() + " " + ss.getLastName());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T06:44:01.990

试试这个我的朋友：

```
 Iterator i = a.iterator();
        while (i.hasNext()) {
            User u = (User) i.next();
            boolean match = false;
            Iterator j = a.iterator();
            boolean once = true;
            while (j.hasNext()) {                    
                if(once){j.next();} // to skip own occurence only once
                once = false;                    
                User u2 = (User) j.next();
                if (u.getFirstName().equals(u2.getFirstName())
                        && u.getLastName().equals(u2.getLastName())) {
                    match = true;
                }
            }
            if (!match) {
                // print
            }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T06:29:28.457

通常，您可以将元素添加到 a`Set`以删除重复项。但是，您通常不想将整个数组添加到集合中；您只想添加单个元素，如下所示：

```
 public static void main(String[] args) {
        Set<User> a = new HashSet<User>();
        User[] u = new User[3];

        u[0] = new User();
        u[0].setFirstName("Mike"); u[0].setLastName("Jordon");      

        u[1] = new User();
        u[1].setFirstName("Jack"); u[1].setLastName("Nicolson");

        u[2] = new User();
        u[2].setFirstName("Jack"); u[2].setLastName("Nicolson");

        // Add each of the users to the Set.  Note that there are three.
        for (User user : u) {
            a.add(u);
        }

        // Get the results back as an array.  Note that this will have two.
        User[] duplicatesRemoved = new User[0];
        a.toArray(duplicatesRemoved);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T06:31:27.350

按照 Jason 的建议覆盖 equals 方法。现在要删除重复项，您需要使用 Set。

List 允许重复值，因此您将始终有重复值。Set 不允许重复值，因此它将解决您的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-23T06:33:10.827

您正在使用一组数组，其中该组有一个元素，即三个用户的数组。数组不强制或检查唯一性，这就是为什么您两次获得相同的用户。如果您完全删除了这些数组，并且只使用了一个 Set，您将获得您想要的“独特”行为。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-23T06:41:24.200

首先，如果您不想重复，您应该使用 Set 来存储对象而不是数组。（数组和列表确实允许存储重复的对象）

其次，您的 equals 方法应使用 String.equal 方法进行比较，并且也应检查空值以确保安全。我会始终使用 IDE 的自动生成功能来处理 hashcode 和 equals 方法（即 Eclipse Source -> Generate hashCode() and equals()...）

```
 @Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((firstName == null) ? 0 : firstName.hashCode());
    result = prime * result + ((lastName == null) ? 0 : lastName.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    User other = (User) obj;
    if (firstName == null) {
        if (other.firstName != null)
            return false;
    } else if (!firstName.equals(other.firstName))
        return false;
    if (lastName == null) {
        if (other.lastName != null)
            return false;
    } else if (!lastName.equals(other.lastName))
        return false;
    return true;
} 
```

和主要方法

```
public static void main(String[] args) {
    List<Set<User>> a = new ArrayList<Set<User>>();
    Set<User> set = new HashSet<User>();

    User u = new User();
    u.setFirstName("Mike"); u.setLastName("Jordon");      
    set.add(u);

    u = new User();
    u.setFirstName("Jack"); u.setLastName("Nicolson");
    set.add(u);

    u = new User();
    u.setFirstName("Jack"); u.setLastName("Nicolson");
    set.add(u);

    a.add(set);

    for (Set<User> ss : a) {
        for (User user : ss) {           
            System.out.println(user.getFirstName() + " " + user.getLastName());
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-23T07:41:10.933

您好，您可以在 pp 类中编写一个方法，以便从用户数组中删除重复元素，如下所示：

```
private User[] getUserArrayWithoutDuplicates(User[] a) {
    int count = a.length;
    Set<User> tempset = new HashSet<User>();
    for (int i = 0; i < count; i++) {
        User[] user = a;
        int arraysize = user.length;
        for (int j = 0; j < arraysize; j++)
            tempset.add(user[j]);
    }
    User[] usr = new User[tempset.size()];
    Iterator<User> tempIterator = tempset.iterator();
    int p = 0;
    while (tempIterator.hasNext()) {
        User user = tempIterator.next();
        usr[p] = new User();
        usr[p].setFirstName(user.firstName);
        usr[p].setLastName(user.lastName);
        p++;
    }
    return usr;
} 
```

此方法将从用户数组中删除重复条目并返回没有重复条目的用户数组。

# c# - 如何从 Collections 中获取 Linq？

> ID：11607380
> 
> 赞同：1
> 
> 时间：2012-07-23T06:23:57.423
> 
> 标签：c#, linq-to-objects

请让我举个例子。说，我们有：

1.  枚举一些正则表达式组名称的 CheckedListBox 控件。
2.  一个 TextBox 控件，用户可以在其中打印一些输入文本
3.  一个 Button，它使程序检查输入文本是否与正则表达式匹配并向用户显示已检查（在我们的 CheckedListBox 中）组的值。

让按钮单击事件处理程序如下所示：

```
Regex r = new Regex(@"^(?<Num5>\d{1,5})\:(?<SomeText>.{1,})$");
Match m = r.Match(textBox1.Text);
if (m.Success)
{
    MessageBox.Show(
        string.Concat(
            checkedListBox1.CheckedItems
                           .OfType<string>()
                           .Where(s => m.Groups[s].Success)
                           .SelectMany(s => string.Format("{0}: {1}\n",
                                                          s,
                                                          m.Groups[s].Value))));
}
else
    MessageBox.Show("Input text didn't match"); 
```

那么，是否有机会在不显式使用 OfType 或 Cast 方法的情况下从 Collection 中获取类似于 CheckedItemCollection（实现类似接口列表）的 LINQ 功能？

PS：这只是一个例子，所以，请不要太挑剔..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:31:46.737

不，CheckedItemCollection 是非泛型的，编译器不知道您在处理什么对象。使用

```
.OfType<type>() 
```

是你能做的最好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T06:32:19.423

不能。LINQ 只能在 generic 上运行`IEnumerable<T>`，但只能在`Cast()`和`OfType()`上运行`IEnumerable`。

# android - Android：如何在 android 中进行其余 API 身份验证

> ID：11607381
> 
> 赞同：0
> 
> 时间：2012-07-23T06:23:57.913
> 
> 标签：android

我想使用用户名和密码调用安全的 rest api (Https)。来自 api 的响应是 JSON 对象。

我怎样才能做到这一点 ？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T07:46:56.250

对于连接使用 AsyncTask 和这个片段：

```
URL url = new URL(res.getString(R.string.url));
            String charset = res.getString(R.string.utf);
            HttpURLConnection http = null;

                HttpsURLConnection https = (HttpsURLConnection) url.openConnection();
                http = https;
                http.setRequestMethod(res.getString(R.string.post));
                http.setDoInput(true);
                http.setDoOutput(true);
                http.setRequestProperty(res.getString(R.string.charset), charset);
                http.setRequestProperty(res.getString(R.string.content_type), "application/x-www-form-urlencoded;charset=" + charset);

                String query = String.format("par1=%s&par2=%s&par3=%s&par4=%s", 
                     URLEncoder.encode(res.getString(R.string.par), charset), 
                     URLEncoder.encode(res.getString(R.string.par2), charset),
                     URLEncoder.encode(res.getString(R.string.par3), charset),
                     URLEncoder.encode(holder.toString(), charset));

                OutputStream output = null;
                try {
                     output = http.getOutputStream();
                     output.write(query.getBytes(charset));
                } finally {
                     if (output != null) try { output.close(); } catch (IOException logOrIgnore) {}
                }

                BufferedReader in = new BufferedReader(new InputStreamReader(http.getInputStream()),4800); 
                StringBuffer responseBuffer = new StringBuffer();
                String line;

                while ((line = in.readLine()) != null) { 
                    responseBuffer.append(line);
                }

                in.close();
                answer = new Gson().fromJson(responseBuffer.toString(), Answer.class); 
```

对于解析 JSON 对象，请使用 Google 制作的 GSON 库，非常有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:42:50.013

对请求使用 HTTPPost 对象，对响应使用 JSONObject。例如 ：

[http://senior.ceng.metu.edu.tr/2009/praeda/2009/01/11/a-simple-restful-client-at-android/](http://senior.ceng.metu.edu.tr/2009/praeda/2009/01/11/a-simple-restful-client-at-android/)

# python - 是否有用于 python pandas 的 C/C++ API？

> ID：11607387
> 
> 赞同：20
> 
> 时间：2012-07-23T06:24:19.670
> 
> 标签：python, c, api, pandas

我正在使用 C/C++ 从遗留后端系统中提取大量数据，并使用`distutils`. 在Python中获取数据后，我将其放入一个pandas DataFrame对象中进行数据分析。现在我想走得更快，并想避免第二步。

是否有用于 Pandas 的 C/C++ API 在 C/C++ 中创建 DataFrame，添加我的 C/C++ 数据并将其传递给 Python？我正在考虑类似于 numpy C API 的东西。

我已经考虑在 C 中创建 numpy 数组对象作为一种解决方法，但我大量使用时间序列数据，并且也希望拥有 TimeSeries 和 date_range 对象。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-10-28T19:07:45.663

现在有一个 C++ 库，在接口和功能方面与 Pandas 包相当。见Linkedin这篇文章“ [https://www.linkedin.com/pulse/pythons-pandas-c-update-hossein-moein/](https://www.linkedin.com/pulse/pythons-pandas-c-update-hossein-moein/) ” 开源代码在“ [https://github.com/hosseinmoein/DataFrame](https://github.com/hosseinmoein/DataFrame) ”

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-03-17T09:47:18.803

我正在处理类似的问题，使用 C API 从 Pandas 不支持的格式加载数据。我找到了两种方法来解决这个问题，希望有人会发现它们有用。

*   Pandas 数据框是纯 Python 类，因此不容易从 C/C++ 构建，但各个列的底层数据存储[（参见类系列源）](https://github.com/pydata/pandas/blob/master/pandas/core/series.py#L88)是 numpy 一维数组。Numpy 有一个不错的[C API](http://docs.scipy.org/doc/numpy-1.10.0/reference/c-api.html)，您可以从 C 构造 numpy 数组，然后将其传递给您的 Python 代码。

*   第二种解决方案是为 Pandas 编写自己的输入模块。这并不像听起来那么工作，而且可能非常有效。Pandas 低级 IO 模块是用[Cython](http://cython.org/)（一种介于 Python 和 C 之间的特殊语言，编译为 C）编写的，例如[parser.pyx](https://github.com/pydata/pandas/blob/master/pandas/parser.pyx)示例。虽然那个特定的解析器非常复杂，但您的解析器基本上只会调用您的遗留 C 代码。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-23T10:31:10.300

所有 pandas 类（TimeSeries、DataFrame、DatetimeIndex 等）都有纯 Python 定义，因此没有 C API。您最好将 C 中的 numpy ndarrays 传递给您的 Python 代码，并让您的 Python 代码从中构造 pandas 对象。

如有必要，您可以使用`PyObject_CallFunction`etc. 来调用 pandas 构造函数，但您必须注意从模块导入中访问名称并检查错误。

# scala - 用于 lambda 函数的 Scala 语法

> ID：11607388
> 
> 赞同：3
> 
> 时间：2012-07-23T06:24:21.783
> 
> 标签：scala

所以编译：

```
def compress[T](list: List[T]): List[(T, Int)] =
{
    list.zipWithIndex.filter { tuple => (tuple._2 == 0) || (tuple._1 != list(tuple._2 - 1)) }
} 
```

这不会编译：

```
def compress[T](list: List[T]): List[(T, Int)] =
{
    list.zipWithIndex.filter { (_._2 == 0) || (_._1 != list(_._2 - 1)) }
} 
```

为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T06:30:56.663

`_`不代表`x`。相反，它的意思是“使用参数列表中的下一个参数”或“将此方法转换为函数对象”，具体取决于上下文。在您的情况下，第二个是无稽之谈，因为您想要一个变量的函数但使用`_`了三次。

提示：使用`x`或`t`。拼写`tuple`不太可能对任何人都有帮助，并且单字母版本与`_`. 更好的是，

```
filter { case (t,i) => (i==0) || (t != list(i-1)) } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T06:32:43.933

您的第二个示例扩展为：

```
def compress[T](list: List[T]): List[(T, Int)] =
{
    list.zipWithIndex.filter { ((x => x._2) == 0) || ((y => y._1) != list((z => z._2) - 1)) }
} 
```

编译器正确地拒绝为荒谬。包含的调用*仅*`_`围绕该调用扩展为 lambda，仅此而已。

# windows - 如何使用 windows cmd 查看用户权限？

> ID：11607389
> 
> 赞同：35
> 
> 时间：2012-07-23T06:24:36.413
> 
> 标签：windows, powershell, cmd, privileges, wmic

我正在尝试使用 Windows 中的命令提示符查看用户权限。用户帐户和用户权限，例如：

```
SeBatchLogonRight
SeDenyBatchLogonRight
SeInteractiveLogonRight
SeDenyInteractiveLogonRight
SeServiceLogonRight
SeDenyServiceLogonRight
SeNetworkLogonRight
SeDenyNetworkLogonRight 
```

我尝试使用`ntrights`，但它不工作。我无法使用任何工具，因为我正在尝试为操作系统审计创建一个自动化脚本。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-08-23T08:47:32.580

您可以使用以下命令：

```
whoami /priv
whoami /all 
```

如需更多信息，请查看[whoami@technet](http://technet.microsoft.com/en-us/library/cc771299.aspx)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-01-07T07:02:28.170

Mark Russinovich 写了一个很棒的工具，叫做 AccessChk，它可以让你从命令行获取这些信息。无需安装。

[http://technet.microsoft.com/en-us/sysinternals/bb664922.aspx](http://technet.microsoft.com/en-us/sysinternals/bb664922.aspx)

例如：

```
accesschk.exe /accepteula -q -a SeServiceLogonRight 
```

为我返回这个：

```
IIS APPPOOL\DefaultAppPool
IIS APPPOOL\Classic .NET AppPool
NT SERVICE\ALL SERVICES 
```

相比之下，`whoami /priv`我`whoami /all`错过了一些条目，比如`SeServiceLogonRight`.

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-27T22:48:57.470

我会开始：

```
secedit /export /areas USER_RIGHTS /cfg OUTFILE.CFG 
```

然后检查相关权限的行。但是，现在的问题是这些帐户被列为 SID，而不是用户名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T06:40:33.443

转到命令提示符并输入命令，

```
net user <username> 
```

将显示您的本地组成员身份。

如果您在域中，请改用**localgroup**：

```
net localgroup Administrators or net localgroup [Admin group name] 
```

单独使用 localgroup 检查本地组列表。

```
net localgroup 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-27T04:18:53.060

我收到此错误，错误代码为**0x80070003**，只需删除项目**src文件夹下的****.vs**文件夹，重新启动 Visual Studio 并重建解决方案即可解决。

 *** * *

## 回答 #6

> 赞同：-3
> 
> 时间：2017-06-05T12:59:01.947

使用`whoami /priv`命令列出所有用户权限。**

# mongodb - 两个或多个副本集中的一个 MongoDB 实例

> ID：11607394
> 
> 赞同：0
> 
> 时间：2012-07-23T06:25:03.590
> 
> 标签：mongodb, replication

是否可以让一个 mongodb 实例属于一个或多个副本集？

我正在使用副本集 - mongodb 复制方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:52:57.587

不。

使用 Master-Slave 您可以破解它以使其工作，但不能使用 Replica Sets。但是，您可以在一台机器上运行两个实例。只需在不同的端口上运行它们。

请注意，通常不建议这样做。如果您正在共享副本，这通常意味着您没有足够的硬件。

# jquery - jquery 插件使启用模态/弹出窗口的站点

> ID：11607395
> 
> 赞同：0
> 
> 时间：2012-07-23T06:25:21.703
> 
> 标签：jquery, jquery-ui

我正在使用 Ruby on Rails 和 jQuery。两者都是最新的稳定副本。

我需要进行身份验证和其他一些功能，例如通过弹出/模态更新交付项目的状态。该表单将具有一些复杂的验证逻辑等。

我尝试使用 facebox，但很难使用 facebox 加载 javascript。

我应该使用什么 jquery 插件。

因为我需要访问 javascript 代码，所以我必须使用 iframe。还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:28:32.340

查看[SimpleModal](http://www.ericmmartin.com/projects/simplemodal/)。

它有以下描述：

> SimpleModal 是一个轻量级的 jQuery 插件，它为模态​​对话框的开发提供了一个强大的接口。将其视为模态对话框框架。SimpleModal 让您可以灵活地构建您可以设想的任何内容，同时使您免受 UI 开发固有的相关跨浏览器问题的影响。

# java - 具有相同 @RequestMapping 的 Spring MVC 多个控制器

> ID：11607396
> 
> 赞同：4
> 
> 时间：2012-07-23T06:25:25.913
> 
> 标签：java, spring, spring-mvc

我正在尝试制作一个允许用户从登录页面登录的网络应用程序`index.htm`。此操作与*LoginController*映射，在成功登录后将用户带回相同`index.htm`但已登录的用户并用欢迎消息问候用户。

index.htm 还有另一个名为 itemform 的表单，它允许用户将项目名称添加为文本。此操作由 itemController 控制。

我的问题是我的*LoginController*和*itemController*都相同`@RequestMapping`，因此我收到此错误：

> 在 ServletContext 资源 [/WEB-INF/tinga-servlet.xml] 中定义名称为“org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0”的 bean 创建错误：bean 初始化失败；嵌套异常是 java.lang.IllegalStateException：无法将处理程序 [loginController] 映射到 URL 路径 [/index.htm]：已经映射了处理程序 [com.tinga.LoginController@bf5555]。
> 
> 无法将处理程序 [loginController] 映射到 URL 路径 [/index.htm]：已经映射了处理程序 [com.tinga.LoginController@bf5555]。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:26:50.577

```
@RequestMapping(value="/login.htm")
public ModelAndView login(HttpServletRequest request, HttpServletResponse response) {
   // show login page if no parameters given
   // process login if parameters are given
}

@RequestMapping(value="/index.htm")
public ModelAndView index(HttpServletRequest request, HttpServletResponse response) {
   // show the index page
} 
```

最后，您需要一个 servlet 过滤器来拦截请求，如果您不请求 login.htm 页面，则必须检查以确保用户已登录。如果您允许过滤器链继续进行. 如果没有，您将转发到 /login.htm

```
public class LoginFilter implements Filter {
  public void doFilter(ServletRequest request,  ServletResponse response, FilterChain chain)
            throws IOException, ServletException {

    HttpServletRequest httpServletRequest = (HttpServletRequest)request;

    boolean loggedIn = ...; // determine if the user is logged in.
    boolean isLoginPage = ...; // use path to see if it's the login page

    if (loggedIn || isLoginPage) {
        chain.doFilter(request, response);
    }
    else {
        request.getRequestDispatcher("/login.htm").forward(request, response);
    }
  }
} 
```

而在 web.xml

我的部署描述符中的示例：

```
<filter>
    <filter-name>LoginFilter</filter-name>
    <filter-class>LoginFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>LoginFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>  
    <dispatcher>FORWARD</dispatcher> 
</filter-mapping> 
```

这一切都来自记忆，但它应该让您大致了解如何进行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:35:39.457

所有控制器的请求映射在 Spring MVC 中应该是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:18:46.653

Maybe in your controllers with the same @RequestMapping you should define the Method (GET, POST...), like this way:

```
@RequestMapping(value="/index.htm", method = RequestMethod.GET)
@RequestMapping(value="/index.htm", method = RequestMethod.POST) 
```

The controller with the GET method you use to render the form and bind the data (some object) to it. The controller with POST method you usually use to process the submission and validation of the form.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:29:16.710

在表单中添加隐藏参数以区分它们，然后通过在 post 方法的注释中添加 params 属性来区分它们。

```
<form:hidden name="hiddenAction" value="login" />
<form:hidden name="hiddenAction" value="item" />

@RequestMapping(method = RequestMethod.POST, params = {"hiddenAction=login"})
@RequestMapping(method = RequestMethod.POST, params = {"hiddenAction=item"}) 
```

# cakephp - CakePHP 中的媒体文件转换器插件/组件

> ID：11607399
> 
> 赞同：1
> 
> 时间：2012-07-23T06:25:46.607
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我正在尝试开发一个可以将媒体文件格式从一种更改为另一种的插件/组件。具体来说，我需要它将“tiff”文件转换为“jpg”图像文件的数组/单个副本。

请指导，我如何实现它，或者是否有任何类型的教程链接，我可以从中下载它或寻求一些帮助来开发它。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:01:41.003

我们在我们的 CMS（基于 CakePHP 1.2 构建；如果有任何我不知道的重大差异，很抱歉）使用行为来做到这一点。这使得控制器逻辑非常简单（实际上我们使用了一个烘焙控制器，根本没有任何修改）。

不幸的是，在 GD（PHP 中的默认图像处理库）中，TIFF 不是受支持的文件格式。您需要使用 ImageMagick 或等效工具自己进行实际转换，但在您的 CakePHP 项目中实现它的逻辑与我在这里描述的没有任何不同。

该行为（在我们的例子中）用于生成缩略图和页面分辨率的图像，并将上传的文件格式转换为 JPEG。

在其`beforeSave()`方法中，它检查是否指定了数据（并且没有错误），然后`tmp_name`从发布的数据中提取值（并删除发布的数据对象）。

在其`afterSave()`方法中，它实际上执行了图像转换任务（将生成的图像放在磁盘上的预期位置），然后使用上传的图像 ID 更新扩展模型上的任何外键。我们在操作中执行此`afterSave()`操作，因此我们有一个数据库 ID 用于命名磁盘上的文件。

在其`afterDelete()`方法中，我们取消链接磁盘上的文件。

在模型中使用行为就像告诉模型一样简单（`ContentImage`行为的名称在哪里）：

```
var $actsAs = array('ContentImage'); 
```

尽管我们也使用模型来定义输出目录，因为我们有几个模型实现了该行为，并且感觉这样做是正确的，例如在模型中：

```
function getThumbnailDir() {
    return WWW_ROOT.'img'.DS.'upload'.DS.'thumb';
} 
```

并且在行为本身中，输出路径变为：

```
$Model->getThumbnailDir().DS.$Model->id.'.jpg' 
```

# ruby - Redmine 的插件迁移：将插件放在 db/migrate 而不是插件文件夹中

> ID：11607405
> 
> 赞同：0
> 
> 时间：2012-07-23T06:26:27.333
> 
> 标签：ruby, ruby-on-rails-3, plugins, redmine, redmine-plugins

我是 ruby​​ on rails 和创建 redmine 插件的新手。我在`Allissue`不使用任何列的情况下创建了一个模型。现在我想在`project_name`迁移的帮助下添加一列`./script/generate migration AddRoleToAllissue project_name:string`。

但它将迁移放置在`db/migrate`名为的文件夹中`20120722192815_add_role_to_allissue.rb`，而不是插件迁移文件夹中。我遵循[堆栈溢出问题](https://stackoverflow.com/questions/1221154/plugin-migrations-for-redmine)并将迁移的文件移动到插件文件夹`mv ./db/migrate/20120722192815_add_role_to_allissue.rb ./vendor/plugins/redmine_allissues/db/migrate/002_add_role_to_allissue.rb`。

我只是想知道插件迁移的替代方案，其中不需要将迁移的文件移动到插件文件夹。我不确定，但可能有用于插件迁移的命令。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:26:15.787

实际上，您正在生成 Rails 迁移，而不是 Redmine 插件迁移。这就是您的迁移文件位于`db/migrate`文件夹中的原因。

正确的语法适用于 Rails 3.x (Redmine >= 2.x)：

```
 rails generate redmine_plugin_model <plugin_name> <model_name> ... 
```

对于 Rails 2.x（Redmine <2.x）：

```
 script/generate redmine_plugin_model <plugin_name> <model_name> ... 
```

它将在正确的位置生成迁移。

您应该查看 Redmine wiki 上关于[插件](http://www.redmine.org/projects/redmine/wiki/Plugins)的教程。

# asp.net - 如何在 umbraco 中检查 cookie？

> ID：11607415
> 
> 赞同：6
> 
> 时间：2012-07-23T06:27:11.130
> 
> 标签：asp.net, umbraco

我想检查 umbraco 中的 cookie，是否可以？

如果是，那么我如何在模板中设置 cookie 并在模板或 xslt 中检索 cookie 的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T08:18:13.410

您可以使用内置库来执行此操作：

```
<xsl:value-of select="umbraco.library:RequestCookies('cookie')" /> 
```

将它添加到您的 XSLT 中，您就可以从站点中的任何页面调用宏。

只是为了完成您将使用的答案

```
<xsl:value-of select="umbraco.library:setCookie('cookie')" /> 
```

设置值和上面的代码来获取值。

# ruby-on-rails - 在 json 中使用 ruby on rails 发送错误消息

> ID：11607417
> 
> 赞同：5
> 
> 时间：2012-07-23T06:27:26.553
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, json

我正在验证 ruby​​ on rails 中的输入字段。我检查用户是否输入或填写了这些字段。如果让我们说`name`字段未填写，则向用户发送一条错误消息，指示该`name`字段未填写。其他错误也是如此。如何使用 ruby​​ on rails 在 json 中发送这种消息。

这就是我现在正在做的事情。

这个模型

```
validates :email, :name, :company, :presence => true
validates_format_of :email, :with => /\A[a-z0-9!#\$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#\$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\z/ 
```

这是我目前向客户端发送 json 数据的方式

```
@contacts = Contact.new(params[:contact])

if @contacts.save
  render :json => { :error => 0, :success => 1 }
else
  render :json => { :error => 1, :success => 0 }
end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T06:37:07.467

最简单的方法是发送错误的哈希值。

所以：

```
render :json => { :errors => @contacts.errors.as_json }, :status => 420 
```

请注意，`:status => 420`要让 jquery 的 $.ajax 方法调用它们的错误回调，你不应该在出现错误时返回 200 状态（默认值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:31:44.247

你真的应该使用 http 状态码来告诉用户发生了什么，所以对于无效记录有

```
420 Invalid Record  Record could not be saved 
```

然后在您的 JSON 返回中，您还可能有一条错误消息，其中将返回您的活动记录/活动模型错误消息，以提供更多信息。

# flash - 使用 Flash，我可以通过哪些不同方式在不同的 FLA 文档类之间共享库符号？

> ID：11607418
> 
> 赞同：1
> 
> 时间：2012-07-23T06:27:29.083
> 
> 标签：flash, sharing, fla

例如，假设我有两个 FLA 文档类，每个类都需要使用库中的香蕉 MovieClip。我不想在每个 FLA 中都有一个香蕉副本。在两个 FLA 文档类之间共享香蕉 MovieClip 有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:36:34.217

看看创建[`SWC`](http://en.wikipedia.org/wiki/Adobe_SWC_file)文件。

> Adobe SWC 文件是预编译的 Flash 符号和 ActionScript 代码包，允许 Flash 或 Flex 开发人员分发类和资产，或避免重新编译不会更改的符号和代码。

您可以通过选择在发布 FLA 时创建它们来导出 SWC 文件，方法是`File > Publish Settings`：

![在此处输入图像描述](../Images/30b508477bc90af1b418574c39799dc5.png)

然后在您的其他项目中，您可以将 SWC 添加到您的库路径中，`File > ActionScript Settings > Library path`并按预期使用内容：

![在此处输入图像描述](../Images/eeae20442e9731ba8bfe8ebbdaeb1582.png)

# javascript - 使用 javascript 调整包含浮点数的 div 的大小时，浮点数不会重排

> ID：11607419
> 
> 赞同：3
> 
> 时间：2012-07-23T06:27:39.050
> 
> 标签：javascript, css, css-float

我有一个容器 div，其中包含大约 20 个向左浮动的 div。当我使用 Tween.js 使用 javascript 动画调整父 div 的大小时，除非我将鼠标悬停在其中一个 div 上，否则浮动不会重排到新大小。

似乎有什么东西阻止了页面刷新。

我在想也许有一种方法可以通过 javascript 强制显示更新？

**更新：**

我把它放在 JS Fiddle 上：http: [//jsfiddle.net/mattlundstrom/fNUhn/](http://jsfiddle.net/mattlundstrom/fNUhn/)

单击任何缩略图以切换动画。此版本使用 TweenLite 为 #project-container 的“左侧”CSS 设置动画。请注意您必须如何在动画之后移动鼠标以使容器的内容重排。

我在 Safari 5+ OSX 和 Chrome 20+ OSX 中得到了这个结果。在 Firefox 13.0 OSX 中按预期工作。

**更新 2**

我所看到的视频：http: [//f.cl.ly/items/1R1n2s0U3I3c1M3s2K0T/lundstrom_float_issue.mov](http://f.cl.ly/items/1R1n2s0U3I3c1M3s2K0T/lundstrom_float_issue.mov)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:47:23.413

正如您所说，我能够重新创建您的问题。这似乎是 webkit 在动画或过渡后重绘或测量元素的问题。

无论如何，这都不是最好的解决方案，但至少目前它会起作用，希望我发现的内容能帮助其他人了解更多信息。

如果您在动画中添加*onComplete*并触发*.project mouseleave*，它看起来可以正常工作：

```
function completeAnimate(){
        $('.project').trigger('mouseleave');
    }

    function contract(){

        // PROJECTS CONTRACT RIGHT
        TweenLite.to($('#projects-container'), .5, {css:{left:"300px", opacity:".5"}, ease:Expo.easeInOut, onComplete: completeAnimate});
    } 
```

**[所以这是我的 jsfiddle，它有一些测试和其他动画测试，以便您可以看到我尝试过的一些内容](http://jsfiddle.net/digthedoug/uYp9s/1/)。**

jQuery animate() 和 css 关键帧动画与您使用的 Tween 代码具有相同的结果，但是，直接样式更新可以正常工作。

```
$('#projects-container').css('left','300px'); 
```

完全没有问题，但当然也没有动画。

我注意到的其他一些事情是，如果您取出*.project*事件绑定，它仍然无法正确重绘，但是如果您移动鼠标，它仍然不会。它只是保持这种状态。

我还尝试使用一些通常可以用来强制重绘的技巧来强制重绘元素。我在动画开始后每隔一段时间就尝试过这个，但没有任何运气。

您也可以将这两个补间与两者的属性合并为一个，仅供参考。

希望这将帮助某人找到 webkit 转换的真正问题。

# go - go if/for/func block open 大括号位置是否需要在同一行？

> ID：11607425
> 
> 赞同：3
> 
> 时间：2012-07-23T06:28:00.063
> 
> 标签：go

在 for、func 或 if 语句之后的 go**块**是否必须在同一行有左大括号？如果我将它向下移动，我会得到一个编译错误，但我在语言规范中看不到它们表明必须像这样构造一个块。

> 块是匹配大括号内的一系列声明和语句。
> 
> 块 = "{" { 语句 ";" } "}" 。
> 
> IfStmt = "如果" [ SimpleStmt ";" ] 表达式块 ["else" (IfStmt | Block)]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:56:24.037

由于分号推断，从[Effective Go开始：](http://golang.org/doc/effective_go.html#semicolons)

> 一个警告。
> 永远不要将控制结构（if、for、switch 或 select）的左大括号放在下一行。
> 如果这样做，将在大括号前插入分号，这可能会导致不良影响。像这样写它们：

```
if i < f() {
    g()
} 
```

> 不是这样的：

```
if i < f()  // wrong!
{           // wrong!
    g()
} 
```

* * *

作为[jnml](https://stackoverflow.com/users/1065241/jnml)评论，[语言语法对于 blocks 是正确的](http://golang.org/ref/spec#Blocks)。
但是*结合*[分号注入](http://golang.org/ref/spec#Semicolons)，这意味着你真的应该：

*   始终将大括号与 if 语句放在同一行（否则 ' `if`' 不会做你认为应该做的事情）
*   实际上，总是使用[`gofmt`](http://golang.org/cmd/gofmt/)它而不去想它（最好每次将代码保存在编辑器中时都对其进行 gofmt。它速度很快，并且会使您的代码与其他*任何*Go 代码保持一致）

甚至 Go 编译器也会强制执行“大括号同一行”规则，以避免任何不可预见的副作用。
所以语言参考并没有说明将大括号放在哪里，但是`gofmt`编译器和编译器都会确保它被正确放置在`if`语句中。

# android - Titanium.Geolocation.getCurrentPosition() 没有给出输出

> ID：11607429
> 
> 赞同：2
> 
> 时间：2012-07-23T06:28:20.580
> 
> 标签：android, titanium, appcelerator, appcelerator-mobile

这是我在 Titanium Appcelerator 上的代码：

```
 function ApplicationWindow(title) {
    var self = Ti.UI.createWindow({
        title:title,
        backgroundColor:'white'
    });

        var button = Ti.UI.createButton({
        height:44,
        width:200,
        title:L('openWindow'),
        top:200
    });

    self.add(button);

    function getPosition() {
        alert("In the Function");
        Titanium.Geolocation.getCurrentPosition(function(e) {
                    Titanium.Geolocation.distanceFilter = 10;
                    Ti.Geolocation.preferredProvider = "gps";

                    if (e.error) {
                        Ti.UI.createAlertDialog({
                            title: L('geolocate_failure'),
                            message: e.error
                        }).show();
                        return;
                    }
                    var found = new Object();
                    locateIndicator.show();
                    found.longitude = e.coords.longitude;
                    found.latitude = e.coords.latitude;
                    found.altitude = e.coords.altitude;
                    found.heading = e.coords.heading;
                    found.accuracy = e.coords.accuracy;
                    found.speed = e.coords.speed;
                    found.timestamp = e.coords.timestamp;
                    found.altitudeAccuracy = e.coords.altitudeAccuracy;
                    return found
                });
    }

 button.addEventListener('click', function() {
        alert("button click");
        getPosition();
    });
    return self;
};

module.exports = ApplicationWindow; 
```

当我在 Android Emulator 中运行此代码时，它会弹出“**位置当前不可用**”。这是否意味着直到我在移动设备上运行此代码（启用 GPS）它不会给我任何 GPS 相关的输出？还是与我的代码有关？
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:31:04.677

如果要在模拟器中运行地理位置服务，则必须在 ddms 中设置纬度和经度。

# maven - 如何注册我的 Maven 原型，以便它被列为原型的一部分：生成

> ID：11607433
> 
> 赞同：2
> 
> 时间：2012-07-23T06:28:37.053
> 
> 标签：maven, maven-archetype

如何注册我的 Maven 原型，以便它被列为**mvn archetype:generate**调用的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:13:05.857

该`mvn archetype:generate`命令列出了 maven 中央存储库的目录文件中定义的原型...

该目录旨在包含稳定可靠的原型...

如果您的原型将帮助我们拯救世界，您应该创建一个 JIRA 并要求他们注册您的项目：[https ://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide)

否则，您可以设置一个本地目录，用于传播您的项目。

嗨，M。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:11:50.750

您可以先将 archtype ( mvn install) 安装到本地存储库中，然后它将可用于 mvn archetype:generate 命令。

```
mvn archetype:generate -DarchetypeGroupId=gpid  -DarchetypeArtifactId=archetype 
```

# php - PHP mysqli条件大于或小于符号错误

> ID：11607434
> 
> 赞同：0
> 
> 时间：2012-07-23T06:28:45.927
> 
> 标签：php, mysqli

我在 mysqli 准备好的语句中遇到了以下奇怪的问题

这是我的示例查询和参数

```
SELECT * from ecf_request WHERE id > ? OR id < ?
...
$stmt->bind_param("ii", $id, $id1); //5, 10 
```

当我只使用`=`条件时，它工作正常，但对于`>`和`<`条件它不起作用。我收到`"Number of variables doesn't match number of parameters in prepared statement"`错误

是否可以在准备好的语句中使用大于和小于符号？

我需要为日期过滤条件实现它。两个日期之间的记录。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T06:33:42.293

一个人`id`不能同时对自己更大和更小。你同时给出了一个`id >10`条件`id <10`。

如果您希望同时选择 id1 和 id2 ，请使用`SELECT * from ecf_request WHERE id IN(?,?)`而不是`AND`如果您想选择介于两者之间的所有内容，请使用`SELECT * from ecf_request WHERE id BETWEEN ? AND ?`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:40:27.210

您可以使用 BETWEEN 语句。这是一个例子：

```
SELECT * FROM `ecf_request` WHERE `id` BETWEEN ? AND ? 
```

# c++ - 既然存在智能指针，那么使用 C 类型指针是否已弃用？

> ID：11607435
> 
> 赞同：6
> 
> 时间：2012-07-23T06:28:56.537
> 
> 标签：c++, c++11, smart-pointers

> **可能重复：**
> [我什么时候使用哪种指针？](https://stackoverflow.com/questions/8706192/which-kind-of-pointer-do-i-use-when)

有许多赞成 C++11 的智能指针的优点：它们更安全，它们的功能性和范围更明显等。

是“经典”的 C 类指针吗

```
class C{};
C c;
C* c_p = &c; 
```

现在过时了？他们甚至被弃用了吗？或者是否存在 C 指针仍然有意义的用例？

**编辑：**带有智能指针的代码片段：

```
class C{};
C c;
std::shared_ptr<C> c_p(new C()); 
```

**编辑：**感谢您指出重复。从 Xeo 那里的回答：

> 使用哑指针（原始指针）或对资源的非拥有引用的引用，并且当>您知道资源将比引用对象/范围更长寿时。当您需要可空性或可重置性时，首选引用并>使用原始指针。

如果仅此而已，我接受这个问题已经结束。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T06:43:38.277

在某些用例中，原始指针是有意义的。

现代代码中的原始指针是“非拥有”指针。这意味着代码不应该做任何需要或取得指向对象所有权的事情。例如，它不应该是`delete`d，用于构造拥有的智能指针，或者保存在当前上下文之外。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-23T07:34:52.043

绝对不。智能指针用于特殊情况，不用于一般用途。根据应用程序和编程风格，大多数指针仍然是原始指针；实际上，在某些情况下，可能根本没有智能指针。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T06:44:47.260

不，原始指针并没有过时。除非必要，否则通常不鼓励使用它们。更不鼓励通过原始指针维护对象的所有权，因为您必须记住`delete`它，这在存在异常的情况下可能很难。

原始指针比智能指针更有效，因此在代码的某些性能敏感部分使用它们是有意义的。在某些领域，例如线性代数，指针算术可能很有用，您可以在那里使用原始指针 [1]，或者在原始指针之上构建新的抽象，可能与智能指针结合使用，而不是仅使用智能指针.

[1]*例如*，用于定义子矩阵的视图

# php - rss feed xml：将 rss feed 转换为 xml 对象后无法访问图像

> ID：11607436
> 
> 赞同：0
> 
> 时间：2012-07-23T06:28:58.767
> 
> 标签：php, xml, image, rss, feed

在[http://feeds.feedburner.com/rb286](http://feeds.feedburner.com/rb286)中，有很多图片。但是，当我使用 simplXmlElement 将其转换为 xml 对象时，我无法看到图像。我的代码：

```
if (function_exists("curl_init")){
$ch=curl_init();
curl_setopt($ch,CURLOPT_URL,"http://feeds.feedburner.com/rb286");
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
$data=curl_exec($ch);
curl_close($ch);
//print_r($data);   //here i'm able to see the images
     $doc=new SimpleXmlElement($data);
     print_r($doc);   //here i'm not able to see the images
  } 
```

有人可以告诉我转换为 xml 对象后如何访问图像吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:57:59.623

您将不得不遍历主标签`<content:encoded>`中个人`<items>`的`<channel>`标签。我会使用[xpath](http://php.net/manual/en/simplexmlelement.xpath.php)方法来选择标签。一旦你得到你想要的元素，你可以使用字符串操作工具，比如[preg_match_all](http://php.net/manual/en/function.preg-match-all.php)`<img>`来 grep出来：

***编辑：***添加了更精细的图像标签匹配，排除了 feedburner 和其他 cdn 中的广告。

```
$xml = simplexml_load_string(file_get_contents("http://feeds.feedburner.com/rb286"));

foreach ($xml->xpath('//item/content:encoded') as $desc) {
    preg_match_all('!(?<imgs><img.+?src=[\'"].*?http://feeds.feedburner.com.+?[\'"].+?>)!m', $desc, $>

    foreach ($m['imgs'] as $img) {
        print $img;
    }
} 
```

标签是命名空间的`<content:encoded>`，所以如果你想使用 simplexml 的内置属性映射，你必须像这样处理它：

```
// obtain simplexml object of the feed as before
foreach ($xml->channel->item as $item) {
    $namespaces = $item->getNameSpaces(true);
    $content = $item->children($namespaces['content']);
    print $content->encoded; // use it howevery you want
} 
```

[您可以在此处](http://www.w3.org/TR/xpath/)阅读有关 xpath 查询语言的更多信息。

# linux - 如何在 Linux 文件夹中的所有文件中附加和前置一些文本

> ID：11607447
> 
> 赞同：1
> 
> 时间：2012-07-23T06:30:22.383
> 
> 标签：linux, bash, shell, append, prepend

我有如下的文件夹结构

`resources/folder1 , /folder2 , /folder3`

现在我希望这个文本前面加上换行符：

```
{% extends '::layout.html.twig' %}
{% block body %} 
```

这应该附加在底部

```
{% endblock %} 
```

资源下文件夹和子目录中的所有文件。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:37:00.137

可能有无数种方法可以做到这一点。以不包含空格等的文件名为准，则可以使用：

```
find resources -type f -print |
while read file
do
    {
    echo "{% extends '::layout.html.twig' %}"
    echo "{% block body %}"
    cat $file
    echo "{% endblock %}"
    } > tmp.$$
    cp tmp.$$ $file
    rm -f tmp.$$
done 
```

这组大括号对封闭的命令执行 I/O 重定向。在与命令相同的行上准确使用它们有点棘手，但上面的代码很容易。`tmp.$$`如果您不在恶劣的环境中工作，重定向到是可以的；如果您认为在运行脚本时人们可能会颠覆您，您可能需要使用`mktemp`或其他命令。如图所示`cp`完成`rm`意味着如果任何文件实际上是符号链接（或硬链接），您就不会遇到问题；链接被保留。替代方案，例如`mv tmp.$$ $file`会破坏链接或符号链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T06:51:53.327

你可以这样做`sed`：

```
 sed -i -e "
 1s/^/\n{% extends '::layout.html.twig' %}\n{% block body %}\n/ ;
 $s/$/\n{% endblock %}/
 " $(ls -R resources/folder* ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T06:56:36.423

将目录更改为`resources`，创建两个模板文件：`BEGIN`和`END`.

### 文件：开始

```
{% extends '::layout.html.twig' %}
{% block body %} 
```

### 文件：完

```
{% endblock %} 
```

### 运行命令：

```
sed -i '1s/^/\n/' */*
sed -i -e '1rBEGIN' -e '$rEND' */*
sed -i '1d' */* 
```

* * *

没有反斜杠转义了，这个解决方案非常清晰和简单，并且可以很好地扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T07:06:24.980

最简单的方法是分两个步骤imo：

```
egrep -r -l "{% extends '::layout.html.twig' %}" resources/ |xargs sed -i 's/ \{\%\ extends\ \'\:\:layout\.html\.twig\'\ \%\} /\n \{\%\ extends\ \'\:\:layout\.html\.twig\'\ \%\}/g' 
```

进而：

```
egrep -r -l "{% extends '::layout.html.twig' %}" resources/ |xargs sed '$ a\\n' 
```

# connection - 将 Xmpp 聊天应用程序与服务器连接时出现异常

> ID：11607450
> 
> 赞同：-1
> 
> 时间：2012-07-23T06:30:50.857
> 
> 标签：connection, xmpp

我的代码是

```
try {
ConnectionConfiguration connConfig = new ConnectionConfiguration(hostname, portno, "");
                 conn = new XMPPConnection(connConfig);
                conn.connect();
                } 
            catch (XMPPException e)
            {
                throw new ProtocolException(e.toString());
            } 
```

如何解决这个问题？

> 07-23 11:54:08.126: W/dalvikvm(19805): VFY: 无法解析静态方法 3144: Ljavax/swing/SwingUtilities;.invokeLater (Ljava/lang/Runnable;)V 07-23 11:54:08.126 : D/dalvikvm(19805): VFY: 在 0x0006 07-23 11:54:08.126 处替换操作码 0x71: D/dalvikvm(19805): VFY: Lorg/jivesoftware/smackx/debugger/EnhancedDebugger 中的死代码 0x0009-0009；。 userHasLogged (Ljava/lang/String;)V 07-23 11:54:09.507: W/System.err(19805): java.lang.reflect.InvocationTargetException 07-23 11:54:09.517: W/System.err( 19805): 在 java.lang.reflect.Constructor.constructNative(Native Method) 07-23 11:54:09.517: W/System.err(19805): 在 java.lang.reflect.Constructor.newInstance(Constructor.java: 415) 07-23 11:54:09.527: W/System.err(19805): 在 org.jivesoftware.smack.XMPPConnection.initReaderAndWriter(XMPPConnection.java:1027) 07-23 11:54:09.527:W/System.err(19805): 在 org.jivesoftware.smack.XMPPConnection.initConnection(XMPPConnection.java:850) 07-23 11:54:09.547: W/System.err(19805): 在 org.jivesoftware.smack .XMPPConnection.connectUsingConfiguration(XMPPConnection.java:834) 07-23 11:54:09.577: W/System.err(19805): at org.jivesoftware.smack.XMPPConnection.connect(XMPPConnection.java:1276) 07-23 11 :54:09.607: W/System.err(19805): 在 com.src.protocol.XMPPProtocolManager.connect(XMPPProtocolManager.java:116) 07-23 11:54:09.607: W/System.err(19805): 在com.src.screen.Login.onClick(Login.java:80) 07-23 11:54:09.607: W/System.err(19805): 在 android.view.View.performClick(View.java:2532) 07 -23 11:54:09.607: W/System.err(19805): 在 android.view.View$PerformClick.run(View.java:9293) 07-23 11:54:09.617: W/System.err(19805 ): 在 android.os.Handler。handleCallback(Handler.java:587) 07-23 11:54:09.617: W/System.err(19805): 在 android.os.Handler.dispatchMessage(Handler.java:92) 07-23 11:54:09.627: W/System.err(19805): 在 android.os.Looper.loop(Looper.java:150) 07-23 11:54:09.627: W/System.err(19805): 在 android.app.ActivityThread.main (ActivityThread.java:4310) 07-23 11:54:09.637: W/System.err(19805): 在 java.lang.reflect.Method.invokeNative(Native Method) 07-23 11:54:09.637: W/ System.err(19805): at java.lang.reflect.Method.invoke(Method.java:507) 07-23 11:54:09.647: W/System.err(19805): at com.android.internal.os .ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 07-23 11:54:09.647: W/System.err(19805): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 07-23 11:54:09.657: W/System.err(19805): 在 dalvik.system.NativeStart。主要（本机方法）07-23 11:54:09.657：W/System.err（19805）：原因：java.lang.NoClassDefFoundError：javax.swing.JTabbedPane 07-23 11:54:09.667：W/System。错误（19805）：在 org.jivesoftware.smackx.debugger.EnhancedDebugger.createDebug（EnhancedDebugger.java:158）07-23 11:54:09.667：W/System.err（19805）：在 org.jivesoftware.smackx.debugger .EnhancedDebugger.(EnhancedDebugger.java:147) 07-23 11:54:09.667: W/System.err(19805): ... 19 更多 07-23 11:54:09.677: E/[Login.java] : onConnection :(19805): java.lang.NullPointerException 07-23 11:54:12.190: E/[Login.java] : login :(19805): java.lang.IllegalStateException: 未连接到服务器。debugger.EnhancedDebugger.createDebug(EnhancedDebugger.java:158) 07-23 11:54:09.667: W/System.err(19805): at org.jivesoftware.smackx.debugger.EnhancedDebugger.(EnhancedDebugger.java:147) 07- 23 11:54:09.667: W/System.err(19805): ... 19 更多 07-23 11:54:09.677: E/[Login.java] : onConnection :(19805): java.lang.NullPointerException 07 -23 11:54:12.190: E/[Login.java] : login :(19805): java.lang.IllegalStateException: 未连接到服务器。debugger.EnhancedDebugger.createDebug(EnhancedDebugger.java:158) 07-23 11:54:09.667: W/System.err(19805): at org.jivesoftware.smackx.debugger.EnhancedDebugger.(EnhancedDebugger.java:147) 07- 23 11:54:09.667: W/System.err(19805): ... 19 更多 07-23 11:54:09.677: E/[Login.java] : onConnection :(19805): java.lang.NullPointerException 07 -23 11:54:12.190: E/[Login.java] : login :(19805): java.lang.IllegalStateException: 未连接到服务器。java.lang.IllegalStateException：未连接到服务器。java.lang.IllegalStateException：未连接到服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:42:50.393

抛出异常，如果

```
InvocationTargetException - if the underlying method throws an exception. 
```

因此，如果使用反射 API 调用的方法抛出异常（例如运行时异常），反射 API 会将异常包装到 InvocationTargetException 中。

# playframework - Play Framework - 单元测试 Comet

> ID：11607458
> 
> 赞同：1
> 
> 时间：2012-07-23T06:31:26.273
> 
> 标签：playframework, playframework-2.0

我正在使用 Comet 将信息发回并在浏览器中转发。有谁知道我可以为我的 javascript/comet 服务器编写单元/自动化测试的方法？我希望能够只传递彗星字符串，然后为 javascript 编写一个单元测试。

# google-calendar-api - 需要好的例子：Javascript 中的 Google Calendar API

> ID：11607465
> 
> 赞同：44
> 
> 时间：2012-07-23T06:32:08.250
> 
> 标签：google-calendar-api

我正在尝试做的事情：使用 javascript 从我的网站将事件添加到谷歌日历。

我不能做什么：为谷歌日历 api 找到一个好的教程/演练/示例。我能够找到在 v1 和 v2 api 之间来回链接的所有文档，或者 v3 api 似乎不是基于客户端的。

对于那些好奇的人，我正在开发这个网站：http: [//infohost.nmt.edu/~bbean/banweb/index.php](http://infohost.nmt.edu/~bbean/banweb/index.php)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-24T00:27:59.417

Google 提供了一个很棒的 JS 客户端库，可以与 Google 的所有基于发现的 API（例如 Calendar API v3）一起使用。我写了[一篇博](http://googleappsdeveloper.blogspot.com/2011/12/using-new-js-library-to-unlock-power-of.html)文，介绍了设置 JS 客户端和授权用户的基础知识。

在应用程序中启用基本客户端后，您需要熟悉 Calendar v3 的细节来编写应用程序。我建议两件事：

*   [APIs Explorer](https://developers.google.com/apis-explorer/#p/calendar/v3/)将向您显示 API 中可用的调用。
*   Chrome 开发人员工具的 Javascript 控制台会在您操作时自动建议方法名称`gapi.client`。例如，开始输入`gapi.client.calendar.events.`，您应该会看到一组可能的补全（您将需要该`insert`方法）。

这是将事件插入 JS 的示例：

```
var resource = {
  "summary": "Appointment",
  "location": "Somewhere",
  "start": {
    "dateTime": "2011-12-16T10:00:00.000-07:00"
  },
  "end": {
    "dateTime": "2011-12-16T10:25:00.000-07:00"
  }
};
var request = gapi.client.calendar.events.insert({
  'calendarId': 'primary',
  'resource': resource
});
request.execute(function(resp) {
  console.log(resp);
}); 
```

希望这足以让您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-07T23:24:59.980

这应该可以解决问题

```
 //async function to handle data fetching
    async function getData () {
    //try catch block to handle promises and errors
    try {
        const calendarId = ''
        const myKey = ''
        //using await and fetch together as two standard ES6 client side features to extract the data
        let apiCall = await fetch('https://www.googleapis.com/calendar/v3/calendars/' + calendarId+ '/events?key=' + myKey)
        //response.json() is a method on the Response object that lets you extract a JSON object from the response
        //response.json() returns a promise resolved to a JSON object
        let apiResponse = await apiCall.json()
        console.log(apiResponse)
    } catch (error) {
        console.log(error)
    }
}
getData() 
```

# android - 复制数据库时出错

> ID：11607468
> 
> 赞同：4
> 
> 时间：2012-07-23T06:32:21.967
> 
> 标签：android

我使用助手复制数据库没有问题。但是由于今天重新格式化了我的电脑并安装了 Eclipse，所以我不能再复制数据库了。可能是模拟器的sd卡导致问题。原木猫是这样说的。

> 07-23 14:23:48.875：E/AndroidRuntime(237)：未捕获的处理程序：线程主因未捕获的异常而退出
> 07-23 14:23:48.885：E/AndroidRuntime(237)：java.lang.RuntimeException：无法开始活动 ComponentInfo{com.frux.kfcmobile/com.frux.kfcmobile.KFCmobileActivity}: android.database.sqlite.SQLiteException: no such table: first: , while compile: SELECT *from first
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java :2512)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 android.app.ActivityThread.access$2200(ActivityThread.java:119)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在android.os.Handler.dispatchMessage(Handler.java:99)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 android.os.Looper.loop(Looper.java:123)
> 07-23 14: 23:48.885: E/AndroidRuntime(237): 在 android.app.ActivityThread.main(ActivityThread.java:4363)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 java.lang.reflect.Method .invokeNative(Native Method)
> 07-23 14:23:48.885: E/AndroidRuntime(237): at java.lang.reflect.Method.invoke(Method.java:521)
> 07-23 14:23:48.885: E/ AndroidRuntime(237)：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
> 07-23 14:23:48.885: E/AndroidRuntime(237) : 在 dalvik.system.NativeStart.main(Native Method)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 由: android.database.sqlite.SQLiteException: 没有这样的表: 第一: , 编译时: SELECT *from first
> 07-23 14:23:48.885: E/AndroidRuntime(237): at android.database.sqlite.SQLiteProgram.native_compile(Native Method)
> 07-23 14:23:48.885: E/AndroidRuntime(237):在 android.database.sqlite.SQLiteProgram.compile(SQLiteProgram.java:110)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 android.database.sqlite.SQLiteProgram.(SQLiteProgram.java:59)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 android.database.sqlite.SQLiteQuery.(SQLiteQuery.java:49)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 android .database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:49)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1220)
> 07- 23 14:23:48.885: E/AndroidRuntime(237): 在 android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1193)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 com。 frux.kfcmobile.KFCmobileActivity.onCreate(KFCmobileActivity.java:42)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
> 07-23 14:23:48.885: E/AndroidRuntime(237): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)

这是我的 DBHelper

公共类 DatabaseHelper 扩展 SQLiteOpenHelper{

```
private static String DB_PATH = "/data/data/com.frux.kfcmobile/databases/";
private static String DB_NAME = "database";
private SQLiteDatabase myDataBase; 
private final Context myContext;
private static final int DATABASE_VERSION = 1;

public DatabaseHelper(Context context) {
    // TODO Auto-generated constructor stub
    super(context, DB_NAME, null, DATABASE_VERSION);
    this.myContext = context;

}
 public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
            this.getWritableDatabase();
            this.close();
        }else{

            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();
            this.close();
            try {

                copyDataBase();

            } catch (IOException e) {

            //throw new Error("Error copying database message");

            }
        }

    }

 private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

 private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

 public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    } 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-10T19:38:03.790

专注于以下行，不要忘记添加**`.sqlite`**扩展名：

```
private static String DB_NAME = "wfbos.sqlite"; 
```

它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:24:50.863

他可以使用我的 DbHelper ..它是从资产文件夹复制的数据库...

```
package com.Blog;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter extends SQLiteOpenHelper 
{
    private static String DB_NAME = "wfbos.sqlite";
    private String DB_PATH  = "";

    private static DBAdapter adb;
    private SQLiteDatabase db;
    private Context myContext;

    /*public DBAdapter(Context context, String name, CursorFactory factory,int version) 
    {
        super(context, DB_NAME, factory, 1);

        this.myContext = context;
        DB_PATH = "/data/data/"+myContext.getPackageName()+"/databases/";

    }*/
    public DBAdapter(Context context)
    {   
        super(context, DB_NAME, null,1);

        this.myContext = context;
        DB_PATH = "/data/data/"+myContext.getPackageName()+"/databases/";
    }

    public static synchronized DBAdapter getAdapterInstance(Context context)
    {
        if(adb == null)
        {
          adb = new DBAdapter(context);
        }

        return adb;

    }

    public void createdatabase()
    {
        boolean dbExist = checkDataBase();
        if(dbExist)
        {

        }
        else
        {
            this.getReadableDatabase();
            try 
            {
                copyDataBase();
            } 
            catch (IOException e)
            {
                Log.v("log",e.toString());
                throw new Error("Error copying database");
            }

        }
    }

    private void copyDataBase() throws IOException
    {

        // Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) 
        {
            myOutput.write(buffer, 0, length);
        }
        Log.v("log", "copy finish");
        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

     private boolean checkDataBase() 
     {
         SQLiteDatabase checkDB = null;
         try 
         {
             String myPath = DB_PATH + DB_NAME;
             checkDB = SQLiteDatabase.openDatabase(myPath, null,
                     SQLiteDatabase.OPEN_READONLY);
         }
         catch (SQLiteException e) 
         {
         }
         if (checkDB != null)
         {
             checkDB.close();
         }
         return checkDB != null ? true : false;
     }

     public SQLiteDatabase openDataBase() throws SQLException
     {
         // Open the database
         String myPath = DB_PATH + DB_NAME;

         db= SQLiteDatabase.openDatabase(myPath, null,
                 SQLiteDatabase.OPEN_READWRITE);

         return db;
     }

    @Override
    public void onCreate(SQLiteDatabase db)
    {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
        // TODO Auto-generated method stub

    }
    @Override
    public synchronized void close() {

            if(db != null)
                db.close();

            super.close();

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:40:17.117

`onCreate`您以某种方式弄乱了`DBHelper`. 这没有发生，因为您之前总是创建数据库。现在，如果失败，您必须在新设备（您的案例新模拟器）上进行全新安装，因为您的 Create Table 查询可能错误并且未正确创建表。

所以检查那些，我很确定这就是你的问题。

编辑：

`*`我也认为你在和`first`喜欢之间缺少一个空格：

```
SELECT * from first 
```

# macos - 单击宏（Mac 兼容）

> ID：11607472
> 
> 赞同：2
> 
> 时间：2012-07-23T06:32:52.917
> 
> 标签：macos, macros, mouse, repeat

我想创建一个宏，所以每当我按住一个键时，它将单击鼠标的当前位置 x 时间并释放 y 时间。

我发现只有点击和暂停而不是按住鼠标按钮，或者我只能以十分之一秒的间隔点击（我希望能够在百分之一秒甚至更好的时间内点击。 .. 毫秒）。有人知道那里有什么好的mac兼容程序吗？

# asp.net-mvc - 一个模型的两个验证器

> ID：11607476
> 
> 赞同：0
> 
> 时间：2012-07-23T06:33:04.707
> 
> 标签：asp.net-mvc, fluentvalidation

当我需要使用两个验证器验证模型时，我遇到了这种情况：

1)`BaseValidator`有一些共同规则的。

2)`[Variable]CustomValidator`根据模型的属性之一确定。

将向您展示我大致打算做什么的代码（当然它不起作用，因为没有这样的方法`AlsoValidateWith()`）如下：

```
[Validator(typeof(AnimalValidator))]
public class AnimalModel
{
    public string Type { get; set }
    public int NumberOfLegs { get; set; }
    public string Color { get; set; }
    public int NumberOfEyes { get; set; }
    public bool HasWings { get; set; }
}

public class AnimalValidator: AbstractValidator<AnimalModel>
{
    public AnimalValidator()
    {
        RuleFor(x => x.NumberOfEyes).Equal(2);
        RuleFor(x => x).AlsoValidateWith(new DogValidator()).When(x => x.Type == "Dog");
        RuleFor(x => x).AlsoValidateWith(new CatValidator()).When(x => x.Type == "Cat");
    }
}

public class DogValidator: AbstractValidator<AnimalModel>
{
    public DogValidator()
    {
        RuleFor(x => x.Color).Equal("Black");
        RuleFor(x => x.NumberOfLegs).Equal(2);
        RuleFor(x => x.HasWings).Equal(false);
    }
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:06:05.200

除非您正在验证“子”模型，否则我认为使用 When 方法是不可能的。

但是，调用代码（例如您的控制器）可以改为调用适当的验证器。这是一个简化的示例：

```
public ActionResult SomeAction(AnimalModel model)
{    
    ModelState.Clear();

    if (model.Type == "Dog")
        model.ValidateModel(new DogFullValidator(), ModelState);
    else if (model.Type == "Cat")
        model.ValidateModel(new CatFullValidator(), ModelState);

    // etc.
} 
```

上面的例子使用了一个简单的扩展方法来调用流式验证：

```
public static class ValidationExtensions
{
    public static ModelStateDictionary ValidateModel<TModel, TValidator>(this TModel model, TValidator validator, ModelStateDictionary modelState)
        where TModel : class
        where TValidator : AbstractValidator<TModel>
    {
        var result = validator.Validate(model);

        result.AddToModelState(modelState, string.Empty);

        return modelState;
    }
} 
```

# iphone - 无法设置 UIButton 的标题

> ID：11607479
> 
> 赞同：2
> 
> 时间：2012-07-23T06:33:31.620
> 
> 标签：iphone, ios, ipad, uibutton

我是 iPhone 新手，

```
 xpos=30;
    ypos=40;

for(int i=0;i<[MyArray count];i++)
        {            
            if(i!=0)
            {
                if (i%4==0) 
                {                    
                    ypos+=180;
                    xpos=30;
                }
                else
                {
                    xpos+=200;
                }
            }

            button = [UIButton buttonWithType:UIButtonTypeCustom];
            button.frame = CGRectMake(xpos, ypos, 110.0, 130.0);
            [button setImage: [UIImage imageNamed:@"ibook2.png"] forState:UIControlStateNormal];
            [button setTitleEdgeInsets:UIEdgeInsetsMake(ypos, xpos, 0.0, 0.0)];
            [button setTitle:[NSString stringWithFormat:@"%@", [MyArray objectAtIndex:i]] forState:UIControlStateNormal];
            [button setTitleColor:[UIColor redColor] forState:UIControlStateNormal];
            [self.view addSubview:button];
} 
```

我可以看到按钮，但无法在 UIButton 上看到我的文本。

**任何帮助将不胜感激。**

![](../Images/f9c367eef15eabfb823908af9196ecea.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T07:03:01.170

请设置按钮背景图像。您已设置按钮图像。请使用这个：

```
[button setBackgroundImage:[UIImage imageNamed:@"blue_button.png"]
                            forState:UIControlStateNormal]; 
```

对于包装按钮标题用户：

```
[button setTitle:@"Test button name 123" forState:UIControlStateNormal];

 button.titleLabel.numberOfLines=2;

 button.titleLabel.lineBreakMode = UILineBreakModeWordWrap; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T06:42:49.177

你看不到文字，因为你使用了 setImage: 按钮的功能。一次您可以在文本上显示图像或按钮，但您可以添加图像作为背景，这样您就可以看到图像和标题。简而言之，将图像设置为背景。

```
[btn setBackgroundImage:[UIImage imageNamed:@"imageName"] forState:UIControlStateNormal]; 
```

请同时删除设置插图的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:46:49.040

而不是设置

```
[button setImage: [UIImage imageNamed:@"ibook2.png"] forState:UIControlStateNormal];   // This will not allow you to set Button title. 
```

你必须使用：

```
[button setBackgroundImage: [UIImage imageNamed:@"ibook2.png"] forState:UIControlStateNormal];    // This will allow you to set title along background button image. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T06:46:50.007

如果您的图像太大，那么它只会显示图像和文本由于图像而被截断，因为文本将在图像之后可见，请尝试使用 setBackground 图像或尝试小分辨率图像或 setImageEdgeInsets 。

# html - 第二行中的文本省略号

> ID：11607481
> 
> 赞同：1
> 
> 时间：2012-07-23T06:33:53.040
> 
> 标签：html, css, word-wrap

如何使用纯 CSS 在第二行获得省略号？

这是我现在使用的 CSS

```
.desc p{
     display: table-cell;  
     width:90%;  
     vertical-align: middle;  
     height:30px ;  
     overflow: hidden;  
     text-overflow: ellipsis;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:25:10.627

CSS 当前不支持多行。您需要使用 JavaScript 或 jQuery。我推荐[dotdotdot jQuery 插件](http://dotdotdot.frebsite.nl/)。

# javascript - 如何使用 javascript for selenium IDE 获取明天的日期？

> ID：11607482
> 
> 赞同：-1
> 
> 时间：2012-07-23T06:33:55.587
> 
> 标签：javascript, selenium

我需要得到明天的日期并且需要存储在 selenium IDE 中。

任何人都可以帮助这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:44:26.850

你可以像这样得到明天的日期：

```
var d = new Date();
d.setDate(d.getDate() + 1)
console.log(d.toLocaleDateString();) //or d, depends on how you want that date 
```

并将其存储在 Selenium 中，也许[这](https://stackoverflow.com/questions/7630207/how-to-use-selenium-to-store-values-between-tests)可以帮助您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T17:47:58.537

使用 selenium [html] 脚本，您可以使用它。简单来说就是获取现在的日期/时间，加上86400000毫秒（一天的毫秒数=24h*60m*60s*1000ms）

```
<tr>
    <td>storeEval</td>
    <td>d=new Date(new Date().getTime()+86400000)</td>
    <td>tomorrow</td>
</tr>
<tr>
    <td>echo</td>
    <td>${tomorrow}</td>
    <td></td>
</tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:00:14.270

对于上述问题，我已经在 codebins 上完成了 bin 解决方案。它的演示链接如下：

**演示：** [http ://codebins.com/bin/4ldqp9v](http://codebins.com/bin/4ldqp9v)

请通过添加您的评论告诉我此解决方案是否对您有帮助。

**HTML：**

```
<div id="panel">
  <input type="text" size="15" id="txtdate" name="txtdate" />
  <input type="button" id="btndate" name="btndate" value="Show Tommorrow Date" />
  <div id="result">
  </div>
</div> 
```

**Javascript：**

```
var dateBtn = document.getElementById('btndate');

dateBtn.onclick = function() {
    var strdate = document.getElementById('txtdate').value;
    if (strdate != "" && strdate != null && typeof(strdate) != "undefined") {

        if (isValidDate(strdate)) {

            var userdate = new Date(strdate);
            var newdate = new Date(userdate.getTime() + 1 * 24 * 60 * 60 * 1000);

            document.getElementById("result").innerHTML = "Tomorrow date is: " + (newdate.getMonth() + 1) + "/" + newdate.getDate() + "/" + newdate.getFullYear() + " [MM/dd/YYYY]";
        }

    } else {
        alert("Invalid date format value..!");
        return false;
    }
}

//Function for checking valid date format/value.
function isValidDate(dateStr) {

    // Checks for the following valid date formats:
    // MM/DD/YYYY
    // Also separates date into month, day, and year variables
    var datePat = /^(\d{2,2})(\/)(\d{2,2})\2(\d{4}|\d{4})$/;

    var matchArray = dateStr.match(datePat); // is the format ok?
    if (matchArray == null) {
        alert("Date must be in MM/DD/YYYY format")
        return false;
    }

    month = matchArray[1]; // parse date into variables
    day = matchArray[3];
    year = matchArray[4];
    if (month < 1 || month > 12) { // check month range
        alert("Month must be between 1 and 12");
        return false;
    }
    if (day < 1 || day > 31) {
        alert("Day must be between 1 and 31");
        return false;
    }
    if ((month == 4 || month == 6 || month == 9 || month == 11) && day == 31) {
        alert("Month " + month + " doesn't have 31 days!")
        return false;
    }
    if (month == 2) { // check for february 29th
        var isleap = (year % 4 == 0 && (year % 100 != 0 || year % 400 == 0));
        if (day > 29 || (day == 29 && !isleap)) {
            alert("February " + year + " doesn't have " + day + " days!");
            return false;
        }
    }
    return true; // date is valid
} 
```

**演示：** [http ://codebins.com/bin/4ldqp9v](http://codebins.com/bin/4ldqp9v)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T09:08:55.433

```
Selenium.prototype.doGenerateTomorrowDate = function( varName1, varName2 ) 
{
    var currentDate = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);
    var day = currentDate.getDate()
    var month = currentDate.getMonth() + 1
    var year = currentDate.getFullYear()
    var monthNames = [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ];
    var month = monthNames[month];
    storedVars[ varName1 ] =  day;
    storedVars[ varName2 ] =  month;
};

<tr>
    <td>generateTomorrowDate</td>
    <td>x</td>
    <td>y</td>
</tr>
<tr>
    <td>echo</td>
    <td>${x}</td>
    <td></td>
</tr>
<tr>
    <td>echo</td>
    <td>${y}</td>
    <td></td>
</tr> 
```

这将在明天和明天返回。

# html - 跨行表格单元格中的按钮不会伸出

> ID：11607484
> 
> 赞同：2
> 
> 时间：2012-07-23T06:33:58.410
> 
> 标签：html, css, firefox

首先，我一直在谷歌和论坛中寻找答案，但没有找到，对不起，如果之前有人问过，如果你能把我链接到答案，那就太好了。

这是我的问题：我有一个由带有按钮的表格组成的网络计算器。[这是一个链接。](http://yovelzack.fav.cc/WEBCalc/index.htm)如果你用IE打开它会一团糟，所以不要。我稍后会处理它。在 FF 上，跨行按钮不会向上和向下伸展以覆盖孔单元，在 Chrome 上它看起来像预期的那样。如何让它在 FF 上也看起来不错？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:44:04.997

由于许多不需要在这里重新散列[的原因](https://stackoverflow.com/questions/83073/)，使用`<table>`for*布局*是一个坏主意。对您来说重要的是，FireFox 以不同于其他浏览器的方式显示表格，并且您将很难使用这种方法来布置您想要的按钮。

相反，只需放弃桌子并绝对定位按钮，或浮动它们。

**编辑：**浮动布局效果很好：

[http://jsfiddle.net/gilly3/7rL97/5/](http://jsfiddle.net/gilly3/7rL97/5/)

如果您在 chrome 中查看 JSFiddle 的框架会弄乱显示，但如果您在框架外的 chrome 中查看它，您可以看到它在 chrome 中也可以正常工作：http: [//fiddle.jshell.net/gilly3/7rL97/ 5/节目/](http://fiddle.jshell.net/gilly3/7rL97/5/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:52:07.773

[阅读此](http://www.cssnewbie.com/input-button-line-height-bug/)内容并尝试添加填充

```
padding: 18px 6px; 
```

填充将拉伸您的按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:58:24.230

@yekhezkel gilly3 可能是对的。但我找到了解决您问题的方法。它适用于 Firefox 和 chrome。我没有在IE中测试过。

step1：`fix`向所有`td`包含`rowspan=2`. 它应该看起来像这样。

```
<td rowspan="2" class="fix">
   <button onclick="modifyInout('+')">+</button>
</td> 
```

`fix`Step2：为类添加以下css

```
.fix {  
   height: 70px;  /* double the value of td height you specified earlier */
} 
```

让我知道它是否有帮助。

这是[jsFiddle](http://jsfiddle.net/bm2yF/1/)：（在 firefox 或其他浏览器中打开以测试它。）

问候 ：）

# jquery - 我可以在 JQuery ValidationEngine 中实现自己的验证吗？

> ID：11607486
> 
> 赞同：0
> 
> 时间：2012-07-23T06:34:12.023
> 
> 标签：jquery, forms, jquery-plugins

我使用 JQuery ValidationEngine 的插件，并且我的表单有“额外”验证。例如：验证用户的 AGE 是否大于 18，如果我的数据库中已经存在一个文档的名称（为此使用 ajax）等。

有没有办法创建我自己的函数并使用插件调用它们？我可以使用插件调用函数 ajax 并显示个人消息吗？

注意：我使用 PHP 框架 CodeIgniter

这是我的ajax函数

```
function validatedoc(){
    var doc = $('#doc').val();
    $.ajax({
    url:"panel_control/verify",
    type: 'POST',
    data:{
        doc: doc
    },
    dateType: "html",
    scriptCharset: "utf-8" ,
    async:false,
    success: function (response){
        if(response == 'equals'){
            $('#error_msj').html("Already Exists");
        }
    }
});
} 
```

并且已经是活跃的validationEngine

```
$("#form_id").validationEngine();
            $("#form_id").submit(function() {
                if ($("#form_id").validationEngine('validate')) {
                    $.blockUI({ message: "Procesing",
                    css: {
                        border: 'none',
                        padding: '15px',
                        backgroundColor: '#000',
                        '-webkit-border-radius': '10px',
                        '-moz-border-radius': '10px',
                        opacity: .5,
                        color: '#fff'
                    } });
                }
                }); 
```

谢谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:36:45.380

好吧，我用 Jquery ValidationEngine 的“funcCall”来做。

这会在我的脚本上调用一个外部函数来实现我的自定义验证。:D

# mongodb - 如何在 MongoDB 中删除文档？

> ID：11607487
> 
> 赞同：8
> 
> 时间：2012-07-23T06:34:14.850
> 
> 标签：mongodb

是否可以获取从 MongoDB 中删除的文档？

```
result = db.things.remove({_id: id})
// is there a result.removedObjects? 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T06:50:39.757

这是可能的，但它需要不同的命令。您正在寻找[`findAndModify`命令](http://www.mongodb.org/display/DOCS/findAndModify+Command)。

如果您将选项设置为`{query: ..., remove: true, new: false}`，您将删除单个文档并返回已删除的文档。

*一些注意事项*：

*   `new`是许多语言中的关键字，请确保正确包装标志的文本。
*   将`findAndModify`仅适用于单个文档。这适用于删除`_id`，但不适用于远程删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-23T09:08:03.980

```
db.collection('mycollection').findOneAndDelete({
    id: '123456'
}, function (error, response) {
    response.value;// returns the deleted object, but no longer exists in the database
}); 
```

# ios - 使用 iOS 向自己发送电子邮件。

> ID：11607489
> 
> 赞同：2
> 
> 时间：2012-07-23T06:34:33.803
> 
> 标签：ios, xcode, messageui

我通过 messageUIFramework 与 MFMailComposeViewController 合作过。我有一个案例，我必须向自己发送电子邮件。如何添加“发件人”地址 MFMailComposeViewController 委托？有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T09:33:13.940

如何在APP内发送邮件？

```
- (IBAction)sendMail:(id)sender {
    if ([MFMailComposeViewController canSendMail])
    {
        MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];

        mailer.mailComposeDelegate = self;

        [mailer setSubject:@"Message Pro"];

        //Destination adress
        NSArray *toRecipients = [NSArray arrayWithObjects:@"your adress", nil];
        [mailer setToRecipients:toRecipients];

        //Attachement Object
        UIImage *myImage = [UIImage imageNamed:@"image.jpeg"];
        NSData *imageData = UIImagePNGRepresentation(myImage);
        [mailer addAttachmentData:imageData mimeType:@"image/png" fileName:@"mobiletutsImage"]; 

        //Message Body
        NSString *emailBody = @"message body";
        [mailer setMessageBody:emailBody isHTML:NO];

        [self presentModalViewController:mailer animated:YES];

        [mailer release];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure"
                                                        message:@"Your device doesn't support the composer sheet"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles: nil];
        [alert show];
        [alert release];
    }
}

-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error{
    switch (result)
    {
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued.");
            break;
        case MFMailComposeResultSaved:
            NSLog(@"Mail saved: you saved the email message in the drafts folder.");
            break;
        case MFMailComposeResultSent:
            NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send.");
            break;
        case MFMailComposeResultFailed:
            NSLog(@"Mail failed: the email message was not saved or queued, possibly due to an error.");
            break;
        default:
            NSLog(@"Mail not sent.");
            break;
    }

    // Remove the mail view
    [self dismissModalViewControllerAnimated:YES];
} 
```

别忘了

1.  添加一个按钮`IBAction`= sendMail
2.  导入 MessageUI.framework
3.  在您的 .h 文件中添加委托`MFMailComposeViewControllerDelegate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:46:25.983

“发件人”地址由您指定`MFMailComposeViewController`（用户可以在获得撰写邮件视图时覆盖为他们配置的任何邮件帐户）。您，程序员，不必担心获取/设置“发件人”地址。

# php - 在 wordpress 前端访问并拥有功能正常的元框字段

> ID：11607491
> 
> 赞同：0
> 
> 时间：2012-07-23T06:34:36.847
> 
> 标签：php, ajax, wordpress, facebook-graph-api, meta-boxes

我目前正在使用我在这里找到的代码从 wordpress 的前端发布 [http://voodoopress.com/review-of-posting-from-front-end-form/](http://voodoopress.com/review-of-posting-from-front-end-form/)

但是我正在使用一些插件，这些插件在后端的元框中有他们的字段，我似乎无法将数据从前端表单传递给。其中一个插件是 wordpress facebook 插件[http://wordpress.org/extend/plugins/facebook/](http://wordpress.org/extend/plugins/facebook/) 喜欢访问的字段 id 是Suggest-friends ID，因为它在您键入时为当前朋友自动完成 ajax facebook . 这是前端的可能性还是我在尝试不可能？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:58:59.490

如果我正确理解您的问题，这就是您需要的功能： http: [//codex.wordpress.org/Function_Reference/get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)

他们在文档中给出的使用示例是这样的：

```
<?php $meta_values = get_post_meta($post_id, $key, $single); ?> 
```

对于第一个值 $post_id，您可以按照以下说明进行操作：

> $post_id 是您想要元值的帖子的 ID。使用 $post->ID 获取 $post 变量范围内的帖子 ID。使用 get_the_ID() 检索 WordPress 循环中当前项目的 ID

因此，如果您在模板页面上 $post->ID 就可以了。

接下来，您需要 $key 成为“推荐朋友”

最后， $single 设置为 true 返回一个字符串

因此，您可以将其用作最终结果：

```
<?php 
$suggestFriends = get_post_meta($post->ID, 'suggest-friends', true);
echo 'The value of suggest-friends for this post is: '.$suggestFriends;
?> 
```

希望有帮助！

# c# - 将内容正文添加到客户电子邮件

> ID：11607495
> 
> 赞同：1
> 
> 时间：2012-07-23T06:34:52.323
> 
> 标签：c#, .net, asp.net-mvc-3

在我的网络应用程序中，我有链接“联系我们”这个链接是：

```
<a href="mailto:somemail@somemail.com" title="contactus">contact us</a> 
```

我的问题是：有没有办法在打开的电子邮件正文中放入一些内容？我的意思是如果用户点击链接，并且他的默认电子邮件被打开，那么有没有办法打开他的默认电子邮件，其中包含一些正文内容？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T06:36:49.853

```
mailto:somemail@somemail.com?subject=Contact us&body=Message goes here! 
```

# java - 在java中修剪一个字符串以获得第一个单词

> ID：11607496
> 
> 赞同：30
> 
> 时间：2012-07-23T06:34:54.870
> 
> 标签：java

我有一个字符串“魔术词”。我需要修剪字符串以仅提取“魔术”。我正在执行以下代码。

```
String sentence = "Magic Word";  
String[] words = sentence.split(" ");  

for (String word : words)  
{  
   System.out.println(word);  
} 
```

我只需要第一个字。是否有任何其他方法可以修剪字符串以仅在`space`发生时才获得第一个单词？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-23T06:35:47.127

```
 String firstWord = "Magic Word";
     if(firstWord.contains(" ")){
        firstWord= firstWord.substring(0, firstWord.indexOf(" ")); 
        System.out.println(firstWord);
     } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-23T06:36:07.033

您可以使用以正则表达式作为输入`String`的 '[`replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String))方法，将空格之后的所有内容（包括空格）替换为空字符串（如果确实存在空格）：

```
String firstWord = sentence.replaceAll(" .*", ""); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-06-12T18:13:55.457

这应该是最简单的方法。

```
public String firstWord(String string)
{
return (string+" ").split(" ")[0]; //add " " to string to be sure there is something to split
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-23T06:49:08.970

修改之前的答案。

```
String firstWord = null;
if(string.contains(" ")){
firstWord= string.substring(0, string.indexOf(" ")); 
}
else{
   firstWord = string;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-02T03:42:00.547

```
 String input = "This is a line of text";

   int i = input.indexOf(" "); // 4

   String word = input.substring(0, i); // from 0 to 3

   String rest = input.substring(i+1); // after the space to the rest of the line 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-23T06:39:04.113

一个肮脏的解决方案：

```
sentence.replaceFirst("\\s*(\\w+).*", "$1") 
```

如果不匹配，这有可能返回原始字符串，所以只需添加一个条件：

```
if (sentence.matches("\\s*(\\w+).*", "$1"))
    output = sentence.replaceFirst("\\s*(\\w+).*", "$1") 
```

或者您可以使用更清洁的解决方案：

```
String parts[] = sentence.trim().split("\\s+");
if (parts.length > 0)
    output = parts[0]; 
```

上面的两个解决方案假设字符串中第一个不是空格的字符是单词，如果字符串以标点符号开头，这可能不是真的。

要解决这个问题：

```
String parts[] = sentence.trim().replaceAll("[^\\w ]", "").split("\\s+");
if (parts.length > 0)
    output = parts[0]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-23T06:54:55.013

你可以试试这个->

```
 String newString = "Magic Word";
  int index = newString.indexOf(" ");
  String firstString = newString.substring(0, index);
  System.out.println("firstString = "+firstString); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-05T14:02:57.280

我们永远不应该让简单的事情变得更复杂。编程就是让复杂的事情变得简单。

string.split(" ")[0]; //第一个词。

# windows-phone-7 - 是否可以使用 appbar 弹出一个 sigin/up 页面（pivot）？

> ID：11607497
> 
> 赞同：0
> 
> 时间：2012-07-23T06:35:07.367
> 
> 标签：windows-phone-7

是否可以使用 appbar 弹出一个 sigin/up 页面（pivot）？是否可以自动填充屏幕（是否有 SystemTray）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:22:58.813

有可能的

要在您的主页中打开一个弹出窗口，请使用（页面加载时的示例弹出窗口）：

```
 public MainPage()
    {
        InitializeComponent();

        Loaded += (obj, args) =>
            {
                Popup popup = new Popup()
                {
                    IsOpen = true
                };

                popup.Child = new PivotPage1(this.ActualWidth, this.ActualHeight, this, popup);
            };
    } 
```

在您的 PivotPage 中，创建附加构造函数：

```
 private PhoneApplicationPage parent = null;
    private IApplicationBar parentAppBar = null;
    private Popup popup = null;

    public PivotPage1(double w, double h, PhoneApplicationPage p, Popup pop) : this()
    {
        Width = w;
        Height = h;
        parent = p;
        popup = pop;

        Loaded += (obj, args) =>
            {
                parentAppBar = parent.ApplicationBar;
                parent.ApplicationBar = this.ApplicationBar;
            };

        Unloaded += (obj, args) =>
            {
                parent.ApplicationBar = parentAppBar;
            };
    }

    private void menuItem3_Click(object sender, EventArgs e)
    {
        popup.IsOpen = false;
    } 
```

# java - 正则表达式从 Groovy 中的字符串中识别时钟速度

> ID：11607500
> 
> 赞同：0
> 
> 时间：2012-07-23T06:35:32.810
> 
> 标签：java, regex, groovy

我有这个字符串`2 Intel(R) Itanium(R) Processor 9320s (1.66 GHz, 16 MB)`，我需要获得**1.66 GHz** ，这可能是时钟速度所具有的任何东西`1600 MHz`等等`1.33 GHz`

有什么帮助吗？

我正在尝试类似的东西`\b\([\d\s\w\.]*,\b`请给出你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:45:42.737

```
str = '''2 Intel(R) Itanium(R) Processor 9320s (1.66 GHz, 16 MB)'''
extractedStr = str.replaceAll(/(.*)\((.*)Hz,(.*)/,'$2Hz')
println extractedStr 
```

在这里，我们将输入字符串的部分分成三部分，

*   之前的所有内容都`(xxxx yHz`将位于正则表达式的第一 (.*) 部分。第一部分可以通过 $1 访问。
*   `\(`是时钟速度之前的开括号。`\`是逃避`(`
*   (. *)Hz，后面包含带有单位和逗号的时钟速度值。(.) 的第二部分*可以通过 $2 访问。
*   第三个 (.*) 用于时钟速度之后的所有内容。可以通过 $3 访问。

据此，我们只需要 2Hz 就可以从您的字符串中提取时钟速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:46:44.033

您可以将此正则表达式与 Pattern 类一起使用：

```
"\\d+(\\.\\d+)?\\s*.?Hz" 
```

它将搜索十进制数，后跟可选空格和可选乘数（我使用正则表达式中的任何字符 - 因为我只需要匹配它），并以“Hz”结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:48:04.017

您可以像这样使用正则表达式：`\s+\((.+?), .+?\)$`. 这将提取最后一组括号内的值，并将第一个值（在您的情况下为`1.66 GHz`）放入正则表达式组中，您以后可以访问该组以提取值。

然后，您可以查看[本](http://groovy.codehaus.org/Tutorial+5+-+Capturing+regex+groups)教程以获取有关如何在 groovy 中匹配和访问正则表达式组的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T06:55:28.877

这将找到时钟速度并且不需要括号：

```
"(\\d+(?:\\.\\d+)?)\\s*.Hz" 
```

第 1 组将包含数字本身

# flowplayer - 频闪媒体播放与 Flowplayer

> ID：11607504
> 
> 赞同：1
> 
> 时间：2012-07-23T06:35:42.857
> 
> 标签：flowplayer, osmf

这个问题已经在[使用频闪媒体播放 (OSMF) 的体验中提出过？](https://stackoverflow.com/questions/3691330/experience-using-strobe-media-playback-osmf)但那是 2010 年的事了。

谁能帮我了解一下目前的情况？我想集成一个视频播放器，但如果我必须使用 OSMF 或 Flowplayer，我会感到困惑。谁能给我建议或优点/缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T03:37:20.920

根据我的经验，Flowplayer 最好的部分是您可以轻松地将其标记为不同的风格，基本上您可以在几乎任何地方自定义播放器。它支持 css 预定义样式或使用 JavaScript 进行动态更新，如果您需要一些高级任务，这将非常方便。然而，在这方面，OSMF 并没有给您太多的灵活性。

# java - hbase：使用动态创建的限定符查询特定值

> ID：11607508
> 
> 赞同：1
> 
> 时间：2012-07-23T06:35:51.687
> 
> 标签：java, hbase

嗨，

Hbase 允许列族在不同的行中具有不同的限定符。在我的情况下，列族具有以下规范

```
abc[cnt] # where cnt is an integer that can be any positive integer 
```

我想要实现的是从不同的列族中获取所有数据，前提是所描述的限定符（在不同的列族中）的值匹配。

为了缩小扫描范围，我只需添加查询所需的这两个系列。但这是我现在所能得到的。

我已经使用 SingleColumnValueFilter 实现了相同的行为，但是预先知道了限定符。但是对于这个，限定符可以是*abc1*，*abc2* ...选项太多，因此 SingleColumnValueFilter 太多。

然后我尝试使用 ValueFilter，但这个过滤器只返回那些与值匹配的列，因此是错误的列族。

您能想出任何方法来实现我的目标，在列族中动态创建的限定符中查询值并返回列族和另一个列族的内容（如创建扫描时指定的那样）？最好只查询一次。

提前感谢您的任何意见。

**更新：（**如评论中讨论的澄清）

以更图形化的方式，一行可能有以下内容：

```
colfam1:aaa
colfam1:aab
colfam1:aac
colfam2:abc1
colfam2:abc2 
```

**而如果colfam2的任何**值具有例如值x，我想获得colfam1的所有家庭，关于colfam2：abc [cnt]是动态创建的，而cnt是任何正整数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:40:27.390

我看到了两种方法：客户端过滤或服务器端过滤。

**客户端过滤**更直接。Scan 仅添加两个系列“ `colfam1`”和“ `colfam2`”。然后，对于`Result`您从 中获得的每个`scanner.next()`，您必须根据“ `colfam2`”中的限定词进行过滤。

```
byte[] queryValue = Bytes.toBytes("x");
Scan scan = new Scan();
scan.addFamily(Bytes.toBytes("colfam1");
scan.addFamily(Bytes.toBytes("colfam2");
ResultScanner scanner = myTable.getScanner(scan);
Result res;
while((res = scanner.next()) != null) {
   NavigableMap<byte[],byte[]> colfam2 = res.getFamilyMap(Bytes.toBytes("colfam2"));
   boolean foundQueryValue = false;
   SearchForQueryValue: while(!colfam2.isEmpty()) {
       Entry<byte[], byte[]> cell = colfam2.pollFirstEntry();
       if( Bytes.equals(cell.getValue(), queryValue) ) {
           foundQueryValue = true;
           break SearchForQueryValue;
       }
   }
   if(foundQueryValue) {
       NavigableMap<byte[],byte[]> colfam1 = res.getFamilyMap(Bytes.toBytes("colfam1"));
       LinkedList<KeyValue> listKV = new LinkedList<KeyValue>();
       while(!colfam1.isEmpty()) {
           Entry<byte[], byte[]> cell = colfam1.pollFirstEntry();
           listKV.add(new KeyValue(res.getRow(), Bytes.toBytes("colfam1"), cell.getKey(), cell.getValue()); 
       }
       Result filteredResult = new Result(listKV);
   }
} 
```

（此代码未经测试）

最后`filteredResult`就是你想要的。这种方法并不优雅，如果您在这些系列中有大量数据，也可能会给您带来性能问题。如果“colfam1”有很多数据，如果值“x”不在“colfam2”的限定符中，则最终不会被使用，您不想将其传输到客户端。

**服务器端过滤**。这需要您实现自己的 Filter 类。我相信您不能使用提供的过滤器类型来执行此操作。实现您自己的过滤器需要一些工作，您还需要将其编译为 .jar 并使其可用于所有 RegionServer。但是，它可以帮助您避免徒劳地发送“colfam1”的大量数据。向您展示如何自定义实现过滤器对我来说工作量太大，因此我建议您阅读一本好书（例如[HBase: The Definitive Guide](http://shop.oreilly.com/product/0636920014348.do)）。但是，过滤器代码看起来很像我向您展示的客户端过滤，所以这已经完成了一半的工作。

# javascript - 用于更改屏幕方向的 phonegap 插件出错

> ID：11607510
> 
> 赞同：1
> 
> 时间：2012-07-23T06:36:06.390
> 
> 标签：javascript, android, cordova

我收到此错误。

> Uncaught TypeError: Object # has no method 'exec' at file:///android_asset/www/JS/pg-plugin-screen-orientation.js:4

```
var screenOrientation = function() {}

screenOrientation.prototype.set  = function(str, success, fail) {

 PhoneGap.exec(success, fail, "ScreenOrientation", "set", [str]); // GETTING ERROR IN THIS LINE

};

navigator.screenOrientation = new screenOrientation(); 
```

我已按照本文档中给出的步骤进行操作。 [https://github.com/champierre/pg-plugin-screen-orientation](https://github.com/champierre/pg-plugin-screen-orientation)

* * *

现在它工作正常。但是当这条线被执行时应用程序崩溃了

```
activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

* * *

```
07-24 18:01:19.200: E/AndroidRuntime(12001): FATAL EXCEPTION: main
07-24 18:01:19.200: E/AndroidRuntime(12001): android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@4054e820 is not valid; is your activity running?
07-24 18:01:19.200: E/AndroidRuntime(12001):    at android.view.ViewRoot.setView(ViewRoot.java:527)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at android.view.Window$LocalWindowManager.addView(Window.java:424)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at android.app.Dialog.show(Dialog.java:241)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at org.apache.cordova.Notification$1.run(Notification.java:205)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at android.app.Activity.runOnUiThread(Activity.java:3717)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at org.apache.cordova.Notification.alert(Notification.java:208)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at org.apache.cordova.Notification.execute(Notification.java:70)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at org.apache.cordova.api.PluginManager.exec(PluginManager.java:212)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at org.apache.cordova.CordovaChromeClient.onJsPrompt(CordovaChromeClient.java:185)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:566)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at android.os.Looper.loop(Looper.java:123)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at android.app.ActivityThread.main(ActivityThread.java:3683)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at java.lang.reflect.Method.invokeNative(Native Method)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at java.lang.reflect.Method.invoke(Method.java:507)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-24 18:01:19.200: E/AndroidRuntime(12001):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:56:10.240

您使用的是哪个版本的 PhoneGap/Cordova？该`PhoneGap`对象已重命名为`cordova`最新版本。因此，您可能需要更新 JS 文件以调用`cordova.exec`而不是`PhoneGap.exec`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:42:44.367

当我调用 exec 时出现此错误。在之前的任何地方起作用

> onDeviceReady()

事件已触发。

# hadoop - Hive 中的索引

> ID：11607513
> 
> 赞同：1
> 
> 时间：2012-07-23T06:36:08.233
> 
> 标签：hadoop, indexing, hive

我在 hadoop 集群上有一个相当大的 Hive 表（约 200 亿条记录），我需要对其进行几次连接。

是否可以在键上索引此表？例如，如果表名是**table1**并且我想在列**键上执行****table1**与**table2**、**table3**和**table** 4 的多个连接，那么最有效的方法是什么？

 **如果相关表 2-4 相对较小（每个约 1 亿）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:19:06.240

恕我直言，索引只有在 table1 上具有非常高的选择性时才会有所帮助。如果 table1 的严重部分（我推测超过 1-5%）将是连接的结果，则索引将不会有效。原因是在任何情况下您都会阅读所有页面/块。
Hive 可以确定一个表很小，并将其用作每个映射器上的内存哈希表，执行连接而不进行混洗。[https://issues.apache.org/jira/browse/HIVE-195](https://issues.apache.org/jira/browse/HIVE-195)
您还可以从在 mapjoin 的情况下对表进行分区这一事实获得改进： [https ://issues.apache.org/jira/browse /HIVE-917](https://issues.apache.org/jira/browse/HIVE-917)
我不确定 Hive 是否能够使用分区信息进行公共连接。**

# symfony1 - 日期选择器不使用自动完成 symfony

> ID：11607518
> 
> 赞同：0
> 
> 时间：2012-07-23T06:36:47.603
> 
> 标签：symfony1, autocomplete, datepicker, symfony-1.4

我正在使用 symfony 中的一个表单，其中我需要同时使用**自动完成**和**日期选择器**功能。对于我正在使用的**自动完成**`sfExtraWidgetFormInputAutocomplete`功能和我在表单方法中使用的**日期选择器。**在我的表单中，首先呈现使用自动完成的小部件，然后呈现**datepicker**小部件。我读过这两个存在一些兼容性问题。 `sfWidgetFormDateJQueryUI``configure()`

 **请告诉我如何使它们都以单一形式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:56:29.357

在页面顶部使用这一行：

```
jq_add_plugins_by_name(array('autocomplete')); 
```**

# php - 在 Wordpress 中使用多个部分投票 +1 或 -1

> ID：11607524
> 
> 赞同：0
> 
> 时间：2012-07-23T06:37:19.600
> 
> 标签：php, jquery, mysql, ajax, wordpress

我制作了一个自定义的 wordpress 帖子类型，包含多个内容部分，每个部分都以相同的方式从数据库中提取出来。

现在我要投赞成票和反对票，在不刷新页面的情况下显示结果，并更新数据库中的分数。很像 stackoverflow + 和 - 投票。

在这里我找到了解决方案，但是我无法将代码转移到wordpress： [Count clicks on one button, save it to MYSQL and then display the current value (AJAX, PHP)](https://stackoverflow.com/questions/10245693/count-clicks-on-one-button-save-it-to-mysql-and-then-display-the-current-value)

我尝试这样的事情，我需要 wordpress 语法中的哪些代码？

一个大问题是，每个块都是从数据库构建的，那么如何为每个块创建一个唯一的 + 和 - 按钮，并将其写回正确的数据库行？我可以从类中的每个部分插入 ID，然后读出这个类并写入数据库中的相应字段吗？

我的尝试：

```
global $wpdb;

$wpdb->update( 'my_database', array( 'vote' => $vote + 1 ), array( '%d') );

/*so here you select the already stored value and then you make an update to increment it*/
$myrows = $wpdb->get_results( "SELECT vote FROM my_database WHERE part_id = "??" );

$vote = mysql_fetch_assoc($myrows);
echo $vote['vote']+1; 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:19:24.303

假设您要跟踪的每个项目都有一个唯一标识符 (part_id)，有两种方法可以做到这一点：

1.  使用值 part_id、plus_counter、minus_counter 或创建一个新表
2.  追加到您现有的表 part_id、plus_counter、minus_counter

当用户查看该特定部分时，根据 part_id 查询现有表并相应显示。

标记代码：SELECT plus_counter, minus_counter FROM table_name WHERE part_id='$part_id'

# json - 在 GWT 中使用 JavaScript 覆盖类型解析 Json 响应

> ID：11607531
> 
> 赞同：0
> 
> 时间：2012-07-23T06:38:05.627
> 
> 标签：json, gwt

我在解析来自服务器的 json 响应时有一个查询。我们使用 gson 将对象列表序列化为服务器中的 json 字符串。在 gwt 客户端中，我们使用了 JavaScript 覆盖类型来解析它。所以我来自客户的 gwt 电话看起来像这样

//其中json响应来自服务器的obj列表的代码片段。

```
jsonpReqBuiler.requestObject(url, new AsyncCallback<JsArray<MyJsoClass>>() {
           onSuccess(final JsArray<MyJsoClass> result) {
              ////Need a string equivalent of JsArray type to sore???
           }
} 
```

我们希望将 json 响应 - JsArray 作为字符串存储到 sqllite 数据库中。即使服务器以 Json 字符串响应，但在内部解析后结果为 JsArray 类型，现在我可以将其存储为字符串，以便我可以读取并转换回来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:19:31.887

您可以使用以下代码：

```
jsonpReqBuiler.requestObject(url, new AsyncCallback<JsArray<MyJsoClass>>() {
    onSuccess(final JsArray<MyJsoClass> result) {
        String json = new JSONArray(result).toString();
    }
} 
```

# java - ajax 模式下的 JAAS

> ID：11607538
> 
> 赞同：0
> 
> 时间：2012-07-23T06:39:10.410
> 
> 标签：java, ajax, jsf, jaas

我有个问题。是否可以在 AJAX 模式下使用 JAAS 授权。我的意思是，我可以将表单授权与 j_security_check 一起使用，登录后无需重定向，而是停留在同一页面上。

我想在电子商务网站上进行用户授权，所以我不能制作单独的登录页面。我只需要主页上的登录按钮，用户按下这个按钮，就会出现某种弹出窗口，登录和密码字段，用户输入他的凭据，按登录并通过ajax请求获得授权..并且没有重定向..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:08:44.983

这样做会有点棘手：一种方法是

1.  当用户单击按钮（您已经提到的那个）时，它会打开一个新的弹出窗口（一个带有最少选项的调整大小的页面），它将从 JAAS 加载登录页面。
2.  提交有效凭据后，将在同一弹出窗口中打开下一页
3.  页面加载后，使用 javascript`onLoad`事件关闭此弹出窗口。

在Javaworld上找到[此链接](http://www.javaworld.com/community/node/3675/)的另一种实现方式。

# google-api - 从外部 Web 应用程序对 Google Drive 的身份验证

> ID：11607539
> 
> 赞同：0
> 
> 时间：2012-07-23T06:39:13.840
> 
> 标签：google-api, google-drive-api

我有一个 asp.net MVC 应用程序，它应该与我正在构建的 Google Drive 交互。我从我的 UI 收到一个 fileId 并将其传递给控制器​​，如下所示：

```
 [HttpPost]
    public void DownloadFile(string fileId)
    {
        FileService fileService = new FileService();
        DriveService driveService = new DriveService();
        fileService.GetFileMetaDataInfo(driveService, fileId);
        Console.WriteLine(fileId);
    }

public class FileService
{
    public void GetFileMetaDataInfo(DriveService service, String fileId)
    {
        try
        {
            Google.Apis.Drive.v2.Data.File file = service.Files.Get(fileId).Fetch();
            Console.WriteLine("Title: " + file.Title);
            Console.WriteLine("Description: " + file.Description);
            Console.WriteLine("MIME type: " + file.MimeType);
        }
        catch (Exception e)
        {
            Console.WriteLine("An error occurred: " + e.Message);
        }
    }
} 
```

然后控制器将控制权传递给上面同样显示的 FileService 类。在基本层面上，我现在只想看看我是否能够从谷歌驱动器获取文件的 MetaDataInfo。此代码在尝试获取文件详细信息时抛出异常，即 try 块中的第一行。我怀疑这与身份验证有关。这是我需要帮助的地方，我查看了 Drive API 文档，但我不太清楚如何从我的外部 Web 应用程序向 Google Drive 进行身份验证。任何人都可以为我澄清这一点，或者可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:30:26.490

异常消息应该告诉您请求失败的原因，但我同意您的观点，问题在于身份验证，因为我看不到您在哪里设置凭据。

Google Drive SDK 文档包含一个完整的 ASP.NET MVC 应用程序，您可以将其用作参考：

[https://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)

# asp.net - 在 ASP.NET 中注册的 HttpApplication 事件

> ID：11607543
> 
> 赞同：0
> 
> 时间：2012-07-23T06:39:44.090
> 
> 标签：asp.net

我有以下查询：在 ASP.NET Global.ascx 文件中定义了以下 HttpApplication 事件：

```
 protected void Application_Start(object sender, EventArgs e)
   {

   }

    protected void Session_Start(object sender, EventArgs e)
    {

    }

    protected void Application_BeginRequest(object sender, EventArgs e)
    {

    }

    protected void Application_AuthenticateRequest(object sender, EventArgs e)
    {

    }

    protected void Application_Error(object sender, EventArgs e)
    {

    }

    protected void Session_End(object sender, EventArgs e)
    {

    }

    protected void Application_End(object sender, EventArgs e)
    {

    } 
```

据我了解，这些是 HttpApplication 事件处理程序。但也有很多其他事件。Global.ascx 事件是否只是注册事件？如果没有，那么那些已注册的其他事件是什么？另外，假设我在实现 Application_BeginRequest 事件处理程序时实现了一个 HttpModule。现在，ASP.NET Framework 也实现了相同的功能。那么我的实现会覆盖框架吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:44:35.400

您可以*附加*任意数量`handlers`的事件。欲了解更多信息，请阅读`MSDN`- 页面 `Handling events`。

阅读 MSDN -[生命周期事件和 Global.asax 文件](http://msdn.microsoft.com/en-us/library/ms178473.aspx)以及[IIS 7.0 的 ASP.NET 应用程序生命周期概述](http://msdn.microsoft.com/en-us/library/bb470252.aspx)

# ios - 新计算机上的“未找到有效的签名身份”

> ID：11607547
> 
> 赞同：2
> 
> 时间：2012-07-23T06:39:54.607
> 
> 标签：ios, xcode, code-signing, provisioning-profile

我买了新电脑。首先，我从旧项目中复制了 iOS 项目。然后，我在管理器中刷新了个人资料，但他们都得到了状态“未找到有效的签名身份” ![在此处输入图像描述](../Images/d8f4e13e67fe6d345fcea52f9839b74e.png)

所以在钥匙串访问中所有证书都可以

![在此处输入图像描述](../Images/76466adf813571bdde08ff502d17cb06.png)

有任何想法吗？我应该如何验证所有这些配置文件？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T06:50:17.120

您的证书中没有私钥![在此处输入图像描述](../Images/3c61fbf02dd7d95731b3b72dde0902a7.png)

转到您的旧 Mac 单击**3**右键单击​​私钥并导出该密钥，为该密钥提供密码。将其复制到私钥到 pendrive 并将其导入新的 Mac 钥匙串，它要求输入密码，因此在导出时提供您在旧 Mac 中设置的密码。重新启动xcode它工作正常

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T06:45:05.723

证书没问题，但是签署证书所需的私钥不在这里：您可以看到这一点，因为 Keychain.app 中证书附近没有公开三角形。

证书附带的密钥应该有一个 .p12 扩展名，但如果找不到它，最好的办法是使用 DevCenter 撤销证书，然后重新创建它们并将它们下载到新系统上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T18:32:10.203

如果你的旧 Mac 中有你的私钥，你可以像这样创建你的 .p12 文件：http: [//seventhsoulmountain.blogspot.com/2013/09/how-do-i-create-p12-file.html](http://seventhsoulmountain.blogspot.com/2013/09/how-do-i-create-p12-file.html)

但如果你不这样做，你必须撤销你的旧证书并创建一个新证书。有时这是一种痛苦。最近我不得不面对这个。证书可能会出现，但您没有随身携带私钥。如需完整指南，请点击下方： [http ://seventhsoulmountain.blogspot.com/2013/09/ios-code-sign-in-complete-walkthrough.html](http://seventhsoulmountain.blogspot.com/2013/09/ios-code-sign-in-complete-walkthrough.html)

# gcc - GCC v4.6 与 4.7

> ID：11607555
> 
> 赞同：0
> 
> 时间：2012-07-23T06:40:32.233
> 
> 标签：gcc, compiler-construction, gnu

有什么不同？是更好还是旧版本只是为了保留而保留？我看到 4.5 不再可用。我用的是4.6.2，好像没问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:47:39.227

[您可以在此处](http://gcc.gnu.org/gcc-4.7/changes.html)查看主要更改列表。如果您对当前使用的版本感到满意，我想不急于升级。

GCC 项目一般维护两个稳定的发布分支。目前这些分支是 4.6.x 和 4.7.x。

# ruby-on-rails - 后功能测试失败

> ID：11607559
> 
> 赞同：1
> 
> 时间：2012-07-23T06:40:54.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试创建一个功能测试来测试我的一个控制器中的 create 方法。对于我的一生，我无法弄清楚为什么这会失败。我遇到了一次失败，零错误：

```
1) Failure:
test_should_create_order(OrdersControllerTest) [/Users/user/rails_work/depot/test/functional/orders_controller_test.rb:38]:
"Order.count" didn't change by 1.
<3> expected but was
<2>. 
```

所以，我很确定这意味着我的功能测试无法下订单。这是我的测试：

```
 setup do
    @order = orders(:one)
  end

  test "should create order" do
    assert_difference('Order.count') do
      post :create, order: @order.attributes.slice(Order.accessible_attributes)
    end

    assert_redirected_to store_url
  end 
```

我的订单夹具：

```
one:
  name: Dave Thomas
  address: MyText
  email: dave@example.org
  pay_type: Check 
```

和我的 Order#create 控制器：

```
def create
    @order = Order.new(params[:order])
    @order.add_line_items_from_cart(current_cart)

    respond_to do |format|
      if @order.save
        Cart.destroy(session[:cart_id])
        session[:cart_id] = nil 
        format.html { redirect_to store_url, notice: 'Thank you for your order' }
        format.json { render json: @order, status: :created, location: @order }
      else
        @cart = current_cart
        format.html { render action: "new" }
        format.json { render json: @order.errors, status: :unprocessable_entity }
      end
    end
  end 
```

现在，如果我将功能测试中的设置方法更改为：

```
@order = Order.create(orders(:one)) 
```

代替：

```
@order = orders(:one) 
```

失败消失了，但我得到了大约 8 个这样的错误：

```
NoMethodError: undefined method `stringify_keys' for #<Order:0x007f8c62dbb960> 
```

如果有人可以帮助我修复此功能测试，我将不胜感激。欢迎任何和所有输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T12:59:32.060

**底线：**单独分配每个`order`属性。

我不熟悉“批量分配”漏洞（Rails 的新手），但[这里（Pragmatic Forums）](http://forums.pragprog.com/forums/148/topics/10843)是有人因此而难以进行特定测试的案例。

尝试单独拼出订单的每个属性。代替

```
post :create, order: @order.attributes.slice(Order.accessible_attributes) 
```

利用

```
post :create, order: { 
    address: @order.address,
    email: @order.email,
    name: @order.name,
    pay_type: @order.pay_type
} 
```

整个测试将是这样的：

```
test "should create order" do
    assert_difference('Order.count') do
        post :create, order: { address: @order.address, email: @order.email, name: @order.name, pay_type: @order.pay_type }
    end

    assert_redirected_to store_path
end 
```

# jsp - 如何在jsp中部署网站

> ID：11607566
> 
> 赞同：1
> 
> 时间：2012-07-23T06:41:29.277
> 
> 标签：jsp, jakarta-ee

我有一个使用 Netbeans 和 Glassfish 使用 Struts 和 Hibernate 等 Java EE 技术开发的 JSP 网站。

我想将它部署在网络上。我该怎么做？我还需要大约 10 个 MySql 数据库和 3 个托管电子邮件帐户。哪个服务器适合它，Windows 还是 Linux？我也没有在任何托管服务提供商网站上找到任何书面 JSP。关于 JSP 的场景是什么？

还列出一些尊重客户隐私和安全的最安全和最好的网络托管服务提供商。我来自印度德里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:53:05.850

JSP 可以托管在 Linux 和 Windows 服务器上。

然而，大多数流行的低成本主机不支持 JSP，因为 Java 是资源密集型的。

我会推荐[网络解决方案](http://www.networksolutions.com)。

您可能想直接与主机核实对 JSP 的支持。

或者，您可以查看[Hosting Review](http://www.hosting-review.com/)以获得超值优惠。但是，对于那些没有说明他们是否支持 JSP 的主机，请联系他们的实时支持以确认。

在做出决定之前一定要仔细阅读房东的评论，不要只选择最便宜的。

另一个提示是在付款后停用自动续订并从主机中完全删除您的信用卡信息，因为一些流氓主机可能会收取隐藏费用并根据您的卡详细信息自动将其记入您的卡。

# android - 仅在方向更改android时更改布局颜色

> ID：11607567
> 
> 赞同：0
> 
> 时间：2012-07-23T06:41:34.980
> 
> 标签：android, android-layout, orientation, android-orientation

我创建了对话框，当我启动应用程序时首先显示该对话框（在 onCreate 方法中编码），然后问题和答案将显示在 textview

所以为了解决方向问题（所以当方向改变时对话框再次不显示）我使用Manifest：

```
android:configChanges="keyboardHidden|orientation" 
```

我有`res/layout-land`，`res/layout-port`

但只改变背景的颜色

我`onConfigurationChanged`在我的活动中使用过（它被称为轮换）。

所以现在当方向改变时对话框不会再次出现并且背景被重绘但是初始化的问题和答案`onCreate()`不会显示

那么如何保养

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:49:43.840

使用`android:configChanges="keyboardHidden|orientation"`意味着您的活动自己处理配置更改，系统不会更改布局。在[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

要重置文本视图，**在不使用的情况下`android:configChanges="keyboardHidden|orientation"`**：

```
@Override
public Object onRetainNonConfigurationInstance() {
    final MyDataObject data = collectMyLoadedData();
     //here get the text from the text view, and any other info
    return data;
}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final MyDataObject data = (MyDataObject) getLastNonConfigurationInstance();
    if (data != null) {
       //get the text and set it in the text view
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:48:14.250

当你改变设备的方向时，android会继续执行而不会再次调用onCreate，但是如果你把代码放在onResume中，这段代码会再次执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:28:46.847

在 OnCreate 中为您的主布局添加为

```
 LinearLayout lv=(LinearLayout)findViewById(R.id.mainlayout);
  lv.setBackgroundColor(android.R.color.black);  // for default potrait or landscape view and after that add this in that activity

@Override
public void onConfigurationChanged(Configuration newConfig) {
  Configuration c = getResources().getConfiguration();

  if(c.orientation == Configuration.ORIENTATION_PORTRAIT ) {
    // portrait
     lv.setBackgroundColor(android.R.color.black);
  } else if(c.orientation == Configuration.ORIENTATION_LANDSCAPE ){
    // landscape
    lv.setBackgroundColor(android.R.color.white);
  }
} 
```

并将其添加到您定义的活动中的清单中

```
 android:configChanges="keyboardHidden|orientation" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-25T13:05:39.057

您是否使用`onSaveInstanceState`过保存数据和`onRestoreInstanceState`检索数据？如果您已完成此操作，那么您可以在 中显示相同的对话框`onRestoreInstanceState`。

好吧，我有一个问题要问你。更改方向时如何保持背景颜色不变？如果颜色未知或随机颜色怎么办？

# c# - 我如何获得 ListView 的正确行索引

> ID：11607568
> 
> 赞同：0
> 
> 时间：2012-07-23T06:42:13.630
> 
> 标签：c#, asp.net, listview, active-directory, indexing

我编写了一个从 Active Directory 获取数据的 ASP.NET 应用程序。我使用 ListView 来显示这些数据。用户在文本框中输入一个字符串（姓氏或其中的一部分）。比 ListView 列出 TextBox 中具有相同字符串的所有 AD 用户。每条线路都有一个按钮“Anzeigen”以获取有关用户的更多信息。此 ListView 有六列，每行显示一个用户。第六列是“Anzeigen”按钮。如果用户单击此按钮，则打开一个新的 WebForm“benutzer.aspx”，其中包含有关此选定用户的更多信息，并从该行获取会话值“电子邮件”。

我的问题：

我不知道如何获得会话值所需的 ListView 行的索引。

我的代码：

cs 文件：

```
 protected void Button1_Command(object sender, CommandEventArgs e)
        {
            if (e.CommandName == "Anzeigen")
            {

                //This give me everyone the Value -1 back 
                int selectedLine = myListView.SelectedIndex; 

                //I need the Line Index for the right Value
                Label lb = (Label)myListView.Items[selectedLine].FindControl("Label2"); 

                   string email = lb.Text;

                   Session["email"] = email; 

                Response.Redirect("Benutzer.aspx");

            }

        } 
```

ASPX 文件：

```
...
        <ItemTemplate>

            <tr runat="server"> 

                <td align="left" ><asp:Label ID="Label1" Text='<%# Eval("Benutzer") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label5" Text='<%# Eval("Telefon") %>' runat="server" /></td>
                <td align="left"><asp:Button ID="Button1" Text="Anzeigen" OnCommand="Button1_Command" CommandName="Anzeigen" CommandArgument="myArgument" runat="server" /></td>

            </tr>

        </ItemTemplate>
... 
```

我搜索并找到 listview selectedindices 但它不起作用:(而且我不能在我的 Application 中使用它。

塔拉索夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:13:40.157

ASPX：

```
<td align="left"><asp:Button ID="Button1" Text="Anzeigen" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>'  runat="server" /></td> 
```

CS：

```
protected void Button1_Command(object sender, CommandEventArgs e)
        {
            if (e.CommandName == "Select")
            {
               int index = Convert.ToInt32(e.CommandArgument);

                Label lb = (Label)myListView.Items[index].FindControl("Label2");

                string email = lb.Text;

                Session["email"] = email;

                Response.Redirect("Benutzer.aspx");

            }

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:15:16.863

使用 ListView 的 ItemCommand 而不是 Button 的 on 命令

有关详细信息，请参阅[http://www.codeproject.com/Articles/24570/Complete-ListView-in-ASP-NET-3-5 。](http://www.codeproject.com/Articles/24570/Complete-ListView-in-ASP-NET-3-5)另一件事 从示例中您可以看到作者已经从 e.Item 中提取了值。您可以将密钥（电子邮件、用户名或其他）作为 CommandArgument 传递，并且可以直接从命令参数访问该值。如何通过它

```
<asp:LinkButton ID="myLink" runat="server" CommandName="Anzeigen" CommandArgument='<%#Eval("KeyColumn")%>'>Anzeigen</asp:LinkButton> 
```

也使用 Linkbutton 而不是 Asp:Button

# linux - ClientDC 和 WindowDC 在 Fedora 16 Gnome 3 下不画图，只有 PaintDC

> ID：11607571
> 
> 赞同：0
> 
> 时间：2012-07-23T06:42:41.697
> 
> 标签：linux, wxpython, fedora, gnome-3, gdi

我正在编写一个在框架的 ClientDC 中绘制文本和形状的应用程序。当我在我的 Fedora 16（Gnome 3）下运行该应用程序时，框架中没有绘制任何内容，但如果我在 Windows 下运行它，所有绘图都正常显示。

我试过用 WindowDC 在上面画图，但跟 Fedora 下的 ClientDC 没什么区别。只有在使用 PaintDC 时，我才能获得成功的绘图。

我做错了什么（或遗漏了什么），还是只是 Linux/Fedora/Gnome 3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:04:04.613

我认为推荐的绘画方法是使用较新的 wx.GCDC 并回退到 wx.PaintDC。如果您需要高级绘图，请参阅 FloatCanvas、cairo 或 glcanvas。

# php - 列出 zip 文件的文件和目录内容

> ID：11607574
> 
> 赞同：1
> 
> 时间：2012-07-23T06:42:50.243
> 
> 标签：php

我正在尝试显示 zip 文件的文件和目录内容而不解压缩它。Zip 库未随 PHP 一起安装，我无权安装它。

我现在正在尝试解析的输出`unzip -l <zipfile>`以获取 zip 文件的目录结构以及其他文件信息。我可以通过逐行解析结果轻松获取文件信息。但是，我发现很难将其转换为数组中的目录结构，因为我只是 php 的新手。结构如下所示（请忽略我只是试图显示结构的语法）。子目录或子文件放置在子索引内。

```
$file[0]['file_name'] = 'dir1',
$file[0]['children'] = array($subfile[0]['file_name'] = 'subdir1',
                 $subfile[0]['children'] = .....,
                 $subfile[1]['file_name'] = 'subdir1',
                 $subfile[1]['children'] = .....)
$file[1]['file_name'] = 'dir2',
$file[1]['children'] = array($subfile[0]['file_name'] = 'subdir1',
                 $subfile[0]['children'] = .....,
                 $subfile[1]['file_name'] = 'subdir1',
                 $subfile[1]['children'] = .....) 
```

下面是 的示例输出`unzip -l <zipfile>`。

```
12363  08-18-2010 13:07   lsmaps/aka.gif 
10299  03-10-2010 12:34   lsmaps/aob.gif 
26095  03-10-2010 12:34   lsmaps/cba.gif 
```

你知道更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:50:21.523

[pclzip](http://www.phpconcept.net/pclzip)一个纯 PHP（阅读：您可以将文件复制到您的项目中）的 zip 阅读器和编写器，如下所示：

```
require_once('pclzip.lib.php');
$archive = new PclZip('zipfile.zip');
var_export($archive->listContent()); 
```

要将平面信息转换为树，可以使用以下辅助函数：

```
function flatToTree($flat) {
    $res = array();
    foreach ($flat as $e) {
        $parent =& $res;
        $path = explode('/', $e['filename']);
        for ($i = 0;$i < count($path) - 1;$i++) {
            if (! array_key_exists($path[$i], $parent)) {
                $parent[$path[$i]] = array('file_name'=>$path[$i],
                                           'children'=>array());
            }
            $parent =& $parent[$path[$i]]['children'];
        }
        $basename = $path[count($path)-1];
        if ($basename != '') { // A file, not a directory
            $parent[$basename] = array('file_name' => $path[$i]);
        }
    }
    return $res;
}
var_export(flatToTree($archive->listContents())); 
```

请注意，它使用关联数组（或字典/映射）来允许更快地按名称访问文件。您仍然可以使用[`foreach`](http://php.net/manual/en/control-structures.foreach.php). 但是，如果您必须有数字数组，只需调用[`array_values`](http://php.net/array_values)每个元素。

# haskell - 构造函数中的不可见/隐藏字段

> ID：11607576
> 
> 赞同：11
> 
> 时间：2012-07-23T06:43:10.460
> 
> 标签：haskell, types, derived-types, derived-instances

我正在[*学习 Learn You a Haskell for Great Good*](http://learnyouahaskell.com/)，我已经达到了[第 8.4 节，“派生实例”](http://learnyouahaskell.com/making-our-own-types-and-typeclasses#derived-instances)。在本节中，有以下数据类型声明：

```
data Person = Person { firstName :: String  
                     , lastName :: String  
                     , age :: Int  
                     } deriving (Eq) 
```

在尝试的同时

```
*Main> mikeD == Person {firstName = "Michael", lastname = "Diamond", age = 43} 
```

我收到以下错误：

```
<interactive>:55:41:
`lastname' is not a (visible) field of constructor `Person' 
```

通过更正我删除了错误`lastname`。`lastName`

**问题：**

在错误消息**中，该词`(visible)`向我暗示必须有可能将字段声明为 hidden / invisible**。这是正确的还是不正确的？如果是，我如何将构造函数中的字段声明为隐藏，以及需要声明隐藏字段的一般场景是什么？如果您可以通过给出一个简单的使用示例来解释这一点，那将不胜感激。

注意：我在 LYAH 中找不到任何关于隐藏或不可见字段的参考/详细信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T06:59:30.963

可以隐藏记录的字段或任何数据类型的构造函数，尽管不在声明站点。这个想法是简单地选择不从模块中导出该构造函数和/或字段，如下所示：

```
module MyModule (DT(C1, int, mStr)) where

data DT = C1 -- visible
             { 
               int :: Int, -- visible
               str :: String -- hidden
             }
        | C2 -- hidden
             {
               dbl :: Double, -- hidden
               mStr :: Maybe String -- visible
             } 
```

请注意，里面的所有内容`MyModule`仍然可以访问构造函数和所有四个字段，但是在其他一些导入的模块中，`MyModule`只有导出的是可见的。

# php - 使用 & 运算符的 PHP 函数

> ID：11607578
> 
> 赞同：-5
> 
> 时间：2012-07-23T06:43:18.120
> 
> 标签：php

```
<?php
function zz(& $x)
{
    $x=$x+5;
}

$x=10;
zz($x);
echo $x; 
```

我使用了上面的代码，但我不知道`&`符号是什么意思。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T06:44:42.053

这指的是[通过引用传递一个变量](http://php.net/manual/en/language.references.pass.php)。

为了更好地理解这意味着什么，也许可以尝试一下。 [用 & 号](http://ideone.com/2ADgB)运行[它，不用 &](http://ideone.com/nMFmk)号运行它。您会注意到，*如果没有*与号，则`$x`保持为`10`，因为变量`$x`是按值传递的。这意味着只有值`10`被传递给函数；更新时，这对外部范围没有影响。 *使用*与号，变量`$x`以这样一种方式传递，即变量可以被函数修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T06:45:30.117

[这意味着通过引用传递](http://php.net/manual/en/language.references.pass.php)

简而言之：函数可以更改您传递给它的变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T06:45:45.080

& 表示通过引用传递变量。在这种情况下，函数外部的 x 增加了 5，如果 & 不存在，则不会增加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T06:45:54.080

`&`后跟 a指定您正在发送变量的`$variable`地址，以便更新引用地址的变量的值而不是值。

您可以通过引用函数来传递变量，以便函数可以修改变量。有关更多信息，请参阅[通过引用传递](http://php.net/manual/en/language.references.pass.php)！

# ios - XCode 编译器 Apple LLVM 3.1 与 LLVM GCC 4.2

> ID：11607579
> 
> 赞同：2
> 
> 时间：2012-07-23T06:43:21.970
> 
> 标签：ios, xcode, image-processing, opencv, opticalflow

我下载了这个项目来试一试（http://www.hatzlaha.co.il/150842/Lucas-Kanade-Detection-for-the-iPhone）。它还在 AppStore 上发布了一个版本。

当我下载源代码并编译时，它给出了编译错误。我将编译器更改为 LLVM GCC，它立即编译，没有任何错误或警告。

此外，这是我所做的：

*   在个人 iPhone 上下载了应用 Lucas Kanade。按预期运行（即显示跟踪点和视频输出）。
*   在公司 iPad 上部署了上述编译的应用程序。这里显示了跟踪点（这意味着应用程序正在获取视频帧）但无法显示视频输出。

一般应用流程：

*   从相机中抓取一帧。
*   处理框架（跟踪点）。
*   输出帧，因此屏幕看起来像显示相机馈送，正如预期的那样。

设备详情：

*   iPhone：操作系统 5.1.1 (9B206)；iPhone 4；
*   iPad：操作系统 5.1 (9B176)；平板电脑 2；

**问题**

*   出现视频输出问题是因为操作系统版本不同还是因为使用了 GCC 编译器？
*   如果是编译器问题，将编译错误放在这里进行解决是否合适，或者我是否需要启动一个单独的问题？

我知道这些信息可能还不够，因为有很多未知数，但相信我，深入了解应用程序的细节将是一个非常详尽的问题描述。让我知道猜测解决方案需要更多信息。我会在这里更新它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:50:17.860

就像你已经说过的信息是不够的。我只能猜测。跟踪点的项目通常使用他们自己的驱动程序来访问相机。原因可能是它不能与 llvm 编译器一起使用。

如果您找到任何特定于 iPhone 的文件，只需查看项目即可。它们主要是 dat 文件。也许您会在项目中找到一些预处理器宏，例如#ifdef target_iphone 之类的。在这种情况下，您可以联系生产商并请求 iPad 驱动程序。

我没有下载并尝试了该项目，但这只是一个猜测。

# boost - boost i/o 流文档

> ID：11607580
> 
> 赞同：0
> 
> 时间：2012-07-23T06:43:30.807
> 
> 标签：boost, documentation

boost.org 在文档方面遇到了一些问题 - 它只是无法打开。是否有关于 boost io 流的任何其他资源或体面的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:47:34.617

如果您安装了 Boost，则完整的文档位于 doc 目录中。例如，在我的电脑上是 C:\Program Files\Boost\boost_1_48_0\doc\html\index.html

要查看此文档，无需构建 Boost 库，只需从存档中提取文件即可。

# javascript - td 的 onclick 更改 td css

> ID：11607582
> 
> 赞同：0
> 
> 时间：2012-07-23T06:43:37.827
> 
> 标签：javascript, jquery, asp.net, html

```
<div id="divScroll" style="overflow-x: hidden">
                    <asp:UpdatePanel ID="updatePanelTableAppointment" runat="server">
                        <ContentTemplate> <table border="1" id="myTable">
    <tr class="csstr">
    <td class="csstdgreen" rowspan="3">
        john
    </td>
    </tr>
</table>
</asp:UpdatePanel>  </div> 
```

以上是我的 html 我必须检查表 td 的 jquery onclick 如果 td 具有类 csstdgreen 并且 rowspan 不为空，那么我必须使该 td 具有 csstdgreen 并且具有 rowspan 1、2、3 等，然后将其设为黄色。

我怎样才能用jquery实现

```
 $('#myTable td').click(function ()
                    {
                        if ($('td').hasClass("csstdgreen") && $('td').attr('rowspan'))
                        {
                            alert("Hi");
                            $('.csstdgreen').removeClass('csstdselected');
                            $('td').removeClass('csstdgreen').addClass('csstdselected');
                        }

                    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:48:46.597

使用引用`this`对目标进行更改`td`：

```
$('#myTable td').click(function () {
    if ($(this).hasClass("csstdgreen") && $(this).attr('rowspan') )
    {
        alert("Hi");
        $('.csstdgreen').removeClass('csstdselected');
        $(this).removeClass('csstdgreen').addClass('csstdselected');
    }
});​ 
```

[演示](http://jsfiddle.net/KbR4c/)

# android - 在Android中动态创建按钮矩阵

> ID：11607583
> 
> 赞同：0
> 
> 时间：2012-07-23T06:43:41.803
> 
> 标签：android, android-layout

我想在 Android 中为一些 m 行和 n 列动态创建按钮矩阵。它应该以矩阵形式（表格形式）对齐。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:47:23.377

使用[Gridlayout](http://developer.android.com/reference/android/widget/GridLayout.html)并根据自定义适配器的 getView 方法中的位置动态添加按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:46:17.837

使用网格布局

[http://developer.android.com/reference/android/widget/GridLayout.html](http://developer.android.com/reference/android/widget/GridLayout.html)

# jquery - Jquery复选框点击问题

> ID：11607584
> 
> 赞同：0
> 
> 时间：2012-07-23T06:43:43.500
> 
> 标签：jquery

我的表单上有一个 id="chkBold" 的复选框。当我单击或选中此复选框时，我想要元素

改变颜色。这是我的代码和整个页面。它不会改变颜色。你能看出这里有什么问题吗？

谢谢。

```
(function () {
    $("#chkBold").click(function(){
        if($("#chkBold").is(':checked')) {
            $("p").css('color', 'Blue'); 
        }else{
            $("p").css('color', 'Red'); 
        }
     });
});

 jsfiddle: http://jsfiddle.net/netten/dAesw/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:46:58.237

你错过了一个美元符号：

```
$(function () {
    $("#chkBold").click(function(){
        if($(this).is(':checked')) {
            $("p").css('color', 'blue'); 
        }else{
            $("p").css('color', 'red'); 
        }
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:05:27.203

我刚试着整理你的 jsfiddle，它似乎工作...... [http://jsfiddle.net/8fggu/2/](http://jsfiddle.net/8fggu/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:52:43.453

检查这个工作模型---

[http://jsfiddle.net/swapnesh/Xwj6n/](http://jsfiddle.net/swapnesh/Xwj6n/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T06:52:47.957

尝试调试

```
if($("#chkBold").is(':checked'))
               {
                alert($('p'));   
                $("p").css('color', 'Blue'); 
                } 
```

确保这个选择器给你同样的元素你想改变颜色，还有一件事，你想改变字体颜色还是背景颜色，两者都是不同的。

# python - 如何使用 python 或 awk 为每个字符分配值并找到平均值？

> ID：11607594
> 
> 赞同：3
> 
> 时间：2012-07-23T06:44:34.493
> 
> 标签：python, awk, bioinformatics, biopython

我有一个包含蛋白质序列（200 个序列）的文本文件，如下所示。

```
>ptn1
AAGHM
>ptn2
MGLKKRR 
```

我需要为序列的每个字符提供以下值，并且必须找到每个序列的平均值。

```
A= 0.2, G= 0.5, L=0.14, M= 0.70, R= 0.55, C=0.48, H= 1.00 , K=0.4 
```

期望的输出

```
ptn1  - 0.52
ptn2  - 0.462 
```

如何使用 awk 或 python 做到这一点？

您的建议将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T06:51:45.807

```
def avg(sequence):
    v= {'A': 0.2, 'C': 0.48, 'R': 0.55, 'G': 0.5, 'H': 1.0,
        'K': 0.4, 'M': 0.7, 'L': 0.14}
    return sum(v[x] for x in sequence) / len(sequence)

avg("AAGHM")  # => 0.5199999999999999
avg("MGLKKRR" # => 0.46285714285714274 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T07:20:14.860

`FS=""`
[http://www.gnu.org/software/gawk/manual/html_node/Single-Character-Fields.html#Single-Character-Fields](http://www.gnu.org/software/gawk/manual/html_node/Single-Character-Fields.html#Single-Character-Fields)需要 gawk
用法：
`awk -f foo.awk foo.txt`

```
BEGIN {
    FS=""
    k["A"]=0.2; k["G"]=0.5; k["L"]=0.14; k["M"]=0.70
    k["R"]=0.55; k["C"]=0.48; k["H"]=1.00; k["K"]=0.4
}

/^>/{
    $1=""
    name=$0
    next
}

{
    s=0
    for (i=1; i<=NF; i++) {
      s+=k[$(i)]
    }
    printf "%s - %.3f\n", name, s/NF
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T11:42:02.313

您的序列文件似乎是 FASTA 格式。您应该使用专门适用于处理序列的工具，而不是使用`awk`.

如果您的文件格式发生变化怎么办？如果您想根据格式规范提取有意义的数据怎么办？已经构建的解析器非常适合这些问题。

我喜欢[Biopython](http://biopython.org)：

```
from Bio import SeqIO
records = SeqIO.parse("sequences.fasta", "fasta")

# Function borrowed from Tichodrama's answer
def avg(sequence):
    v= {'A': 0.2, 'C': 0.48, 'R': 0.55, 'G': 0.5, 'H': 1.0,
        'K': 0.4, 'M': 0.7, 'L': 0.14}
    return sum(v[x] for x in sequence) / len(sequence)

for record in records:
    print("Score for {}: {:.2f}".format(record.id, avg(record.seq))) 
```

请注意，`record`上述每个[`SeqRecord`](http://biopython.org/wiki/SeqRecord)对象都是一个包含有用信息的对象，例如解析的定义信息和序列字母表（例如，您可以区分蛋白质序列和 DNA 序列）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T06:58:41.063

```
mapping = {
    'A': 0.2,
    'G': 0.5,
    'L': 0.14,
    'M': 0.7,
    'R': 0.55,
    'C': 0.48,
    'H': 1.0,
    'K': 0.4}

def process(seqs):
    i = 0
    while i < len(seqs) - 1:
        print seqs[i].strip()[1:], '-', avg(seqs[i+1])
        i += 2

def avg(seq):
    return sum(mapping[v] for v in seq) / len(seq)

# assume the file is data.txt
process(open('data.txt').readlines()) 
```

# .net - .net 中线程的 RAM 和 CPU 限制

> ID：11607603
> 
> 赞同：2
> 
> 时间：2012-07-23T06:45:18.963
> 
> 标签：.net, multithreading, operating-system, limits

我需要为某个线程设置 CPU/RAM 使用的最大限制。这如何通过.net（不使用虚拟化）来完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:29:08.470

AFAIK 你不能按线程来做。您只能按进程执行此操作。你唯一能做的就是描述[here](http://msdn.microsoft.com/en-us/library/system.threading.thread.priority.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:31:30.680

Windows 不提供限制线程的 CPU 或内存使用的机制。

但是，您可以通过调整线程的*优先级*来实现类似的效果。具有较高优先级的线程在计算机资源中获得相对较大的份额，而具有较低优先级的线程在必要时会向下调度，以便为具有较高优先级的线程腾出空间。

在 .NET 的世界中，这可以通过[Thread.Priority 属性](http://msdn.microsoft.com/en-us/library/system.threading.thread.priority.aspx)方便地公开，该属性接受[ThreadPriority 值](http://msdn.microsoft.com/en-us/library/system.threading.threadpriority.aspx)之一。

请注意，线程*和*进程都有优先级，线程的基本优先级将由您为 Thread.Priority 属性设置的值及其进程的优先级确定。

相关问题：[如何以编程方式将程序的 CPU 使用率限制在 70% 以下？](https://stackoverflow.com/questions/989281/how-can-i-programmatically-limit-my-programs-cpu-usage-to-below-70)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-22T06:23:33.483

确保您有足够的内存，并且因为“单线程”已经在处理有限数量的内存，

真正将公寓状态与 MTA 一起使用。

它的线程数很少，但由主线程管理，它实现了没有“内存限制墙”的进程和任务。您的流程不会因 MTA 的公寓而崩溃。

[https://docs.microsoft.com/en-us/dotnet/api/system.threading.apartmentstate?view=net-6.0（MTA](https://docs.microsoft.com/en-us/dotnet/api/system.threading.apartmentstate?view=net-6.0) apartmentstate 的一个 .Net 版本）

要快速赚钱，或灵活的容器肯定有：

*   并行任务（Thread.subtree.subtree....parallel...）
*   线程池
*   MTA（针对 STA）
*   线程的优先级
*   灯光代码
*   通过代码进行内存管理（vb：无，数组擦除，gc 调用）

每一个都可以通过速度、同步、全局内存量或内存管理来推动你的软件更快，或者没有内存过载。

# java - java android中的子菜单不使用xml

> ID：11607604
> 
> 赞同：-2
> 
> 时间：2012-07-23T06:45:26.217
> 
> 标签：java, android, xml-parsing, dynamic-ui

我有一个解析的 xml 文件，现在我想以分层方式创建一个动态 UI。例如：

```
1
   1.1
   1.2
2
   2.1 
3
   3.1
   3.1.1 
```

每个具有子菜单的菜单都用名称“menu”标记，作为动作的菜单被标记为“action”。你能帮我实现这个吗？我知道逻辑是错误的，我目前正在研究它，但这是我想要做的：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    this.mymenu=menu;
    Iterator<Option> it= optionList.iterator();
    int count=0;
    while(it.hasNext()){
        Option e= (Option)it.next();
        if(e.getType().equals("menu")){
            count++;
            menu.add(0,count,0,e.getName());
        }
    }

    getMenuInflater().inflate(R.menu.parser, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:55:20.070

像这样使用

```
public boolean onCreateOptionsMenu(Menu menu) {
super.onCreateOptionsMenu(menu);
SubMenu sub = menu.addSubMenu(0,1,0, "SubMenu");
sub.add(0,11,0,"SubMenu 1");
sub.add(0,12,0,"SubMenu 2");
sub.add(0,13,0,"SubMenu 3");
return true;
} 
```

有关更多详细信息，请查看[此处](http://smartandroidians.blogspot.in/2009/11/creating-menu-submenu.html)

# java - 安卓程序修改

> ID：11607610
> 
> 赞同：0
> 
> 时间：2012-07-23T06:46:08.347
> 
> 标签：java, android, eclipse

我目前正在开发我的第一个 android 项目，即修改现有的示例程序（“井字游戏”游戏）。我正在浏览官方网站上的教程，但是查看示例代码，我认为我无法在我拥有的时间内自行解决所有问题。

修改包括能够选择自定义背景、设置评分系统以及实施定时“闪电战”模式。我的基本问题是：

1.  设置游戏背景颜色/图像的代码在哪个子文件夹中？

2.  有没有办法创建一个打开文件搜索窗口以允许用户选择此自定义背景图像的 Intent 函数？

我想从这里开始，我相信随着我的进展我会有更多的问题。一如既往，任何帮助表示赞赏。（顺便说一句，游戏中的代码来自随 Android SDK for Eclipse 一起安装的标准示例问题）。

**更新1：**

到目前为止，我在一个名为 GameView 的类中找到了这个：

```
mDrawableBg = getResources().getDrawable(R.drawable.lib_bg);
 setBackgroundDrawable(mDrawableBg); 
```

mDrawableBg 是一个 Drawable 对象，我不确定这部分引用的是什么：

```
R.drawable.lib_bg 
```

在这段代码中修改背景的正确方法是什么？

**更新 2：**

这是我所在的位置：

我有 getDrawable 函数将另一个函数作为参数：

```
mDrawableBg = getResources().getDrawable(getImage()); 
```

getImage() 假设返回一个引用所选图像的整数，这是该函数的代码（到目前为止）：

```
public int getImage(){

    Intent intent = new Intent(Intent.ACTION_GET_CONTENT);  
    intent.setType("image/*");
    startActivityForResult(intent, 10);

} 
```

这是假设打开图库并让用户选择图像，但我不确定如何将参考 ID 返回到该选定图像。此外，startActivityForResult 函数无法正常工作，我认为我没有正确使用 Activity 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:55:51.647

1.  背景可能被定义为可绘制的（in `/res/drawable-*`）或颜色值（in`/res/values/colors.xml`或类似的东西）。它将在`/res/layout`. 布局文件将被 Java 源文件夹中的活动类之一引用。

2.  您可以在代码中声明一组可绘制资源 ID，并使用它来动态生成对话框和/或活动。Horizo [​​ntalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)小部件可能对此有用。如果您以意图启动选择活动，请使用[`startActivityForResult`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)而不是[`startActivity`](http://developer.android.com/reference/android/app/Activity.html#startActivity%28android.content.Intent%29). 然后，您可以使用 设置顶视图的背景[`setBackgroundResource()`](http://developer.android.com/reference/android/view/View.html#setBackgroundResource%28int%29)。

# android - Android：Twitter oAuth 给出 OAuthNotAuthorizedException 错误

> ID：11607611
> 
> 赞同：2
> 
> 时间：2012-07-23T06:46:13.197
> 
> 标签：android, twitter-oauth

我想使用推特`oAuth`。我看过不同的例子和教程。所以我从一开始就开始了。我已经注册了应用程序就`dev.twitter.com,`可以了。消费者密钥和消费者秘密可用。

然后我在我的 libs 文件夹中添加了 jars 并定义了如下常量`signpost-core`：`signpost-commonhttp`

```
private static final String CONSUMER_KEY = "myConsumerKey";
private static final String CONSUMER_SECRET = "myConsumerSecretKey";

private static String ACCESS_KEY = null;
private static String ACCESS_SECRET = null;

private static final String REQUEST_URL = "http://twitter.com/oauth/request_token";
private static final String ACCESS_TOKEN_URL = "http://twitter.com/oauth/access_token";
private static final String AUTH_URL = "http://twitter.com/oauth/authorize";
private static final String CALLBACK_URL = "OauthTwitter://twitter";
private static final String PREFERENCE_FILE = "twitter_oauth.prefs"

private static CommonsHttpOAuthConsumer consumer = new CommonsHttpOAuthConsumer(
            CONSUMER_KEY, CONSUMER_SECRET);
private static CommonsHttpOAuthProvider provider = new CommonsHttpOAuthProvider(
REQUEST_URL, ACCESS_TOKEN_URL, AUTH_URL); 
```

这是我的清单：

```
<data android:scheme="OauthTwitter" android:host="twitter"/> 
```

最后这是我的点击事件：

```
try {
    String authURL = provider.retrieveRequestToken(consumer, CALLBACK_URL);
    Log.d("OAuthTwitter", authURL);
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authURL)));
} catch (OAuthMessageSignerException e) {
    e.printStackTrace();
} catch (OAuthNotAuthorizedException e) {
    e.printStackTrace();
} catch (OAuthExpectationFailedException e) {
    e.printStackTrace();
} catch (OAuthCommunicationException e) {
    e.printStackTrace();
} 
```

当我单击按钮时，我看到了这个踪迹：

```
07-23 06:24:48.428: W/System.err(15121): oauth.signpost.exception.OAuthNotAuthorizedException: Authorization failed (server replied with a 401). This can happen if the consumer key was not correct or the signatures did not match.
07-23 06:24:48.433: W/System.err(15121):    at oauth.signpost.AbstractOAuthProvider.handleUnexpectedResponse(AbstractOAuthProvider.java:243)
07-23 06:24:48.433: W/System.err(15121):    at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:193)
07-23 06:24:48.433: W/System.err(15121):    at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:74)
07-23 06:24:48.438: W/System.err(15121):    at com.exampel.app.MyActivity$1.onClick(MyActivity.java:71)
07-23 06:24:48.438: W/System.err(15121):    at android.view.View.performClick(View.java:2364)
07-23 06:24:48.438: W/System.err(15121):    at android.view.View.onTouchEvent(View.java:4179)
07-23 06:24:48.438: W/System.err(15121):    at android.widget.TextView.onTouchEvent(TextView.java:6541)
07-23 06:24:48.443: W/System.err(15121):    at android.view.View.dispatchTouchEvent(View.java:3709)
07-23 06:24:48.443: W/System.err(15121):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-23 06:24:48.443: W/System.err(15121):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-23 06:24:48.448: W/System.err(15121):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-23 06:24:48.448: W/System.err(15121):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-23 06:24:48.448: W/System.err(15121):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1665)
07-23 06:24:48.448: W/System.err(15121):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
07-23 06:24:48.453: W/System.err(15121):    at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
07-23 06:24:48.453: W/System.err(15121):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1649)
07-23 06:24:48.453: W/System.err(15121):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1694)
07-23 06:24:48.458: W/System.err(15121):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-23 06:24:48.458: W/System.err(15121):    at android.os.Looper.loop(Looper.java:123)
07-23 06:24:48.458: W/System.err(15121):    at android.app.ActivityThread.main(ActivityThread.java:4363)
07-23 06:24:48.463: W/System.err(15121):    at java.lang.reflect.Method.invokeNative(Native Method)
07-23 06:24:48.463: W/System.err(15121):    at java.lang.reflect.Method.invoke(Method.java:521)
07-23 06:24:48.463: W/System.err(15121):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-23 06:24:48.463: W/System.err(15121):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-23 06:24:48.468: W/System.err(15121):    at dalvik.system.NativeStart.main(Native Method) 
```

我确定密钥和秘密，但仍然相同。我究竟做错了什么？任何建议都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T06:51:55.620

从 twitter 开发者帐户重置密钥，然后重试.. 我有同样的问题，重置密钥后问题解决了。

使用这个网址

```
 public static final String REQUEST_URL = "http://api.twitter.com/oauth/request_token";
 public static final String ACCESS_URL = "http://api.twitter.com/oauth/access_token";
 public static final String AUTHORIZE_URL = "http://api.twitter.com/oauth/authorize";

public static final String OAUTH_CALLBACK_SCHEME = "x-oauthflow-twitter";
 public static final String OAUTH_CALLBACK_HOST  = "callback";
 public static final String OAUTH_CALLBACK_URL  = OAUTH_CALLBACK_SCHEME + "://" + OAUTH_CALLBACK_HOST; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T12:53:49.277

首先，我必须指定您的代码和答案看起来都很好，但不确定为什么不工作。在其他地方，我`ConfigurationBuilder`在初始化时使用`TwitterFactory`.

看起来像：

```
ConfigurationBuilder cb = new ConfigurationBuilder();
cb.setDebugEnabled(true)
    .setOAuthConsumerKey("ConsumerKey")
    .setOAuthConsumerSecret("ConsumerSecret");
try {
    Twitter twitter = new TwitterFactory(cb.build()).getInstance();
    requestToken = twitter.getOAuthRequestToken("application://calback");
    WebView twitterSite = new WebView(MyActivity.this);
    twitterSite.loadUrl(requestToken.getAuthenticationURL());
    setContentView(twitterSite);                    
} catch (Exception e) {
    e.printStackTrace();
} 
```

然后小心你的`<data>`定义。标签应该是 into `<intent-filter>`。

如果仍然出现错误，请再重置一次。我希望这能解决你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:29:01.173

我在点击时使用它进行 Twitter 身份验证..

```
Intent i = new Intent(getApplicationContext(), PrepareRequestTokenActivity.class);
                finish();
                startActivity(i); 
```

这是 PrepareRequestTokenActivity.java

```
package com.twitter;

import oauth.signpost.OAuth;
import oauth.signpost.OAuthConsumer;
import oauth.signpost.OAuthProvider;
import oauth.signpost.commonshttp.CommonsHttpOAuthConsumer;
import oauth.signpost.commonshttp.CommonsHttpOAuthProvider;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;

import com.WFBOS.SettingActivity;

/**
 * Prepares a OAuthConsumer and OAuthProvider 
 * 
 * OAuthConsumer is configured with the consumer key & consumer secret.
 * OAuthProvider is configured with the 3 OAuth endpoints.
 * 
 * Execute the OAuthRequestTokenTask to retrieve the request, and authorize the request.
 * 
 * After the request is authorized, a callback is made here.
 * 
 */
public class PrepareRequestTokenActivity extends Activity 
{

    final String TAG = getClass().getName();

    private OAuthConsumer consumer; 
    private OAuthProvider provider;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        try
        {
            this.consumer = new CommonsHttpOAuthConsumer(Constants1.CONSUMER_KEY, Constants1.CONSUMER_SECRET);
            this.provider = new CommonsHttpOAuthProvider(Constants1.REQUEST_URL,Constants1.ACCESS_URL,Constants1.AUTHORIZE_URL);
        }
        catch (Exception e)
        {
            Log.e(TAG, "Error creating consumer / provider",e);
        }

        Log.i(TAG, "Starting task to retrieve request token.");
        new OAuthRequestTokenTask(this,consumer,provider).execute();
    }

    /**
     * Called when the OAuthRequestTokenTask finishes (user has authorized the request token).
     * The callback URL will be intercepted here.
     */
    @Override
    public void onNewIntent(Intent intent)
    {
        super.onNewIntent(intent); 
        SharedPreferences prefs = getSharedPreferences("Twitter", MODE_PRIVATE);
        final Uri uri = intent.getData();
        if (uri != null && uri.getScheme().equals(Constants1.OAUTH_CALLBACK_SCHEME)) 

        {
            Log.i(TAG, "Callback received : " + uri);
            Log.i(TAG, "Retrieving Access Token");
            new RetrieveAccessTokenTask(this,consumer,provider,prefs).execute(uri);
            finish();   
        }
    }

    public class RetrieveAccessTokenTask extends AsyncTask<Uri, Void, Void> 
    {

        private Context context;
        private OAuthProvider provider;
        private OAuthConsumer consumer;
        private SharedPreferences prefs;

        public RetrieveAccessTokenTask(Context context, OAuthConsumer consumer,OAuthProvider provider, SharedPreferences prefs)
        {
            this.context = context;
            this.consumer = consumer;
            this.provider = provider;
            this.prefs=prefs;
        }

        /**
         * Retrieve the oauth_verifier, and store the oauth and oauth_token_secret 
         * for future API calls.
         */
        @Override
        protected Void doInBackground(Uri...params)
        {
            final Uri uri = params[0];
            final String oauth_verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);

            try 
            {
                provider.retrieveAccessToken(consumer, oauth_verifier);

                final Editor edit1 = prefs.edit();
                edit1.putString(OAuth.OAUTH_TOKEN, consumer.getToken());
                edit1.putString(OAuth.OAUTH_TOKEN_SECRET, consumer.getTokenSecret());
                edit1.commit();

                String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
                String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");
                Log.d("toker", token);
                Log.d("Secret", secret);
                consumer.setTokenWithSecret(token, secret);
                context.startActivity(new Intent(context,SettingActivity.class));

                //executeAfterAccessTokenRetrieval();

                Log.i(TAG, "OAuth - Access Token Retrieved");

            } 
            catch (Exception e)
            {
                Log.e(TAG, "OAuth - Access Token Retrieval Error", e);
            }

            return null;
        }

        /*private void executeAfterAccessTokenRetrieval()
        {
            String msg = getIntent().getExtras().getString("tweet_msg");
            try
            {
                TwitterUtils.sendTweet(prefs, msg);
            } 
            catch (Exception e)
            {
                Log.e(TAG, "OAuth - Error sending to Twitter", e);
            }
        }*/
    }   

} 
```

这是 OAuthRequestTokenTask.java

```
package com.twitter;

import oauth.signpost.OAuthConsumer;
import oauth.signpost.OAuthProvider;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.util.Log;

/**
 * An asynchronous task that communicates with Twitter to 
 * retrieve a request token.
 * (OAuthGetRequestToken)
 * 
 * After receiving the request token from Twitter, 
 * pop a browser to the user to authorize the Request Token.
 * (OAuthAuthorizeToken)
 * 
 */
public class OAuthRequestTokenTask extends AsyncTask<Void, Void, Void> 
{

    final String TAG = getClass().getName();
    private Context context;
    private OAuthProvider provider;
    private OAuthConsumer consumer;

    /**
     * 
     * We pass the OAuth consumer and provider.
     * 
     * @param   context
     *          Required to be able to start the intent to launch the browser.
     * @param   provider
     *          The OAuthProvider object
     * @param   consumer
     *          The OAuthConsumer object
     */
    public OAuthRequestTokenTask(Context context,OAuthConsumer consumer,OAuthProvider provider)
    {
        this.context = context;
        this.consumer = consumer;
        this.provider = provider;
    }

    /**
     * 
     * Retrieve the OAuth Request Token and present a browser to the user to authorize the token.
     * 
     */
    @Override
    protected Void doInBackground(Void... params) 
    {

        try
        {
            Log.i(TAG, "Retrieving request token from Google servers");
            final String url = provider.retrieveRequestToken(consumer, Constants1.OAUTH_CALLBACK_URL);
            Log.i(TAG, "Popping a browser with the authorize URL : " + url);
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND);
            context.startActivity(intent);
        } 
        catch (Exception e) 
        {
            Log.e(TAG, "Error during OAUth retrieve request token", e);
        }

        return null;
    }

} 
```

这是我的 Constants1.java

```
package com.twitter;

public class Constants1
{

    public static final String CONSUMER_KEY = "your key";
    public static final String CONSUMER_SECRET= "your key";

    public static final String REQUEST_URL = "http://api.twitter.com/oauth/request_token";
    public static final String ACCESS_URL = "http://api.twitter.com/oauth/access_token";
    public static final String AUTHORIZE_URL = "http://api.twitter.com/oauth/authorize";

    public static final String  OAUTH_CALLBACK_SCHEME   = "x-oauthflow-twitter";
    public static final String  OAUTH_CALLBACK_HOST     = "callback";
    public static final String  OAUTH_CALLBACK_URL      = OAUTH_CALLBACK_SCHEME + "://" + OAUTH_CALLBACK_HOST;

    //public static final String    OAUTH_CALLBACK_URL      = "http://www.wfbos.com";

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T16:32:40.453

我有非常相似的代码并且得到了同样的错误。通过将我的测试手机设置为使用网络的日期/时间设置，我能够让事情正常进行。显然，如果您的设备的日期/时间设置不正确，则可能会导致此问题。

# ios - iOS - 如何在 iPhone 上查看 printf 的输出？

> ID：11607613
> 
> 赞同：1
> 
> 时间：2012-07-23T06:46:19.480
> 
> 标签：ios, xcode, printf, nslog, syslog

我有一部越狱的 iPhone，我正在使用一个应用程序，该应用程序包含一个包含`.c`多个`printf`语句的文件。我正在处理的应用程序包含串行连接，即扩展坞连接器的引脚 12 和 13。话虽如此，我无法使用 Xcode 中的控制台查看`printf`语句的输出，因为当应用程序运行时，我有一个定制的底座连接器（未连接到计算机）连接到手机

我可以通过 ssh 进入手机，并且可以使用 .c 文件中的 printf 语句来查看`NSLog`使用 syslogd的输出，所以有没有办法通过 SSH 会话在 iPhone 上查看？或者有没有办法可以重定向/告诉文件输出到？`/var/log/syslog``/var/log/syslog``stdout``.c``/var/log/syslog`

任何一种解决方案都可以。谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:51:20.563

[如果您已越狱，使用Syslog SBSetting 切换](http://modmyi.com/cydia/sbsettingssyslogd)的最直接方式

将启用日志记录到`/var/log/syslog`

# youtube-api - 我们如何获得 youtube 开发者密钥和客户端 ID..？

> ID：11607614
> 
> 赞同：1
> 
> 时间：2012-07-23T06:46:22.083
> 
> 标签：youtube-api

我正在使用以下参考将 YouTube API 集成到 Flex 中 [https://www.flextras.com/DataSorter/Samples/YouTubeSample/#app=d6b7&241c-selectedIndex=1](https://www.flextras.com/DataSorter/Samples/YouTubeSample/#app=d6b7&241c-selectedIndex=1) 此模块需要“开发人员密钥”和“客户端 ID”我们如何获取 youtube 开发者密钥和客户端 ID ..？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:52:40.093

您可以在 API 控制台中获取它们：

[API 控制台](https://accounts.google.com/ServiceLogin?service=devconsole&passive=1209600&continue=https://code.google.com/apis/console/&followup=https://code.google.com/apis/console/)

有关 API 控制台的一些信息：

[https://developers.google.com/console/help/](https://developers.google.com/console/help/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T13:07:20.083

我创建的 Youtube 视频位于[https://youtu.be/nBdCmeNqqJ0](https://youtu.be/nBdCmeNqqJ0)，它将指导您创建**客户端 ID**和**开发人员密钥**，即`Client secret`启用**YouTube DATA API v3** `which will allow you to use Youtube DATA API V3 service`。

**或者**

看看下面的 gif。

![https://s23.aconvert.com/convert/p3r68-cdx67/3fjqk-nr656.gif](../Images/347302ef1fcc6ce27c98cd567a7d80f5.png)

实际上，我已经`(which tells the steps to create Client ID, Client secret)`在线将 AVI 文件转换为 Gif。

因此，如果您想拥有它，最好将 gif 下载并保存在适当的地方，因为它可以稍后被站点所有者删除。

谢谢。

# apache-flex - NativeProcess.isSupported 和 Updater.isSupported 在 AIR 应用程序中是否都为真？

> ID：11607615
> 
> 赞同：0
> 
> 时间：2012-07-23T06:46:25.157
> 
> 标签：apache-flex, air, adobe, air-native-extension

我正在尝试在 Windows 中检查用户域名，并且需要本机进程支持。

在应用程序配置 xml ( `xmlns="http://ns.adobe.com/air/application/2.6"`) 我有

```
<supportedProfiles>extendedDesktop desktop</supportedProfiles> 
```

当我使用 adl 运行应用程序时，一切正常，但是当我尝试安装应用程序（* .air 包）时，我收到一个错误，即不支持本机进程。有趣的是，当我安装编译后的 *.exe 文件时，安装后我有本机进程支持。

但是使用 *.exe 安装我有`Updater.isSupported == false`，但是，当我使用 *.air 包安装时，我有`Updater.isSupported == true`.

看起来当我安装 *.exe 时我有 profile=extendedDesktop，但是当我使用 *.air 安装包时我使用的是 profile=desktop。

但我两者都需要。有没有办法解决这个问题？

汇编：

```
echo Creating air application
call g:\flex_sdk\bin\adt.bat -package -storetype pkcs12 -keystore mykey.p12 -storepass simple -tsa none  news.air news-app.xml .
echo Compile exe
call g:\flex_sdk\bin\adt.bat -package -target native news.exe news.air 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:33:43.010

你所要求的是不可能的。[`ApplicationUpdater`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/air/update/ApplicationUpdater.html)Adobe 提供的不适用于本机代码应用程序。

（如果您想了解有关原因的更多信息，可以查看代码；它位于您的 sdk 目录下的`\frameworks\projects\air\ApplicationUpdater\src`.）

但是，可以以类似但不完全相同的方式自动更新本机代码打包的应用程序。有关详细信息，请参阅 Adob​​e 网站上的此帖子：http: [//www.adobe.com/devnet/air/articles/updating-air-apps-native-installer.html](http://www.adobe.com/devnet/air/articles/updating-air-apps-native-installer.html)。我会在这里提供信息，但我不是那篇文章的作者。

# macos - Applescript 播放曲目 Spotify

> ID：11607618
> 
> 赞同：3
> 
> 时间：2012-07-23T06:46:42.360
> 
> 标签：macos, applescript, spotify

我想通过运行一个applescript来播放曲目。我无法弄清楚播放曲目的方法。

我正在做这个

```
tell application "Spotify"
    play track "One Thing" in context spotify:track:5Up9Lj7QWudEfMc0ve5qWW
end tell 
```

这显然行不通。我不知道如何处理上下文部分。什么是上下文？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T15:25:51.913

查看 AppleScript 编辑器中的文档。`Track`并且`context`都是 URI。Spotify 上下文是一个容器，客户端默认使用曲目的专辑。

因此，例如，这两个都将在其专辑的上下文中播放曲目（它们在功能上是相同的）：

```
tell application "Spotify"
     play track "spotify:track:5Up9Lj7QWudEfMc0ve5qWW"
end tell

tell application "Spotify"
     play track "spotify:track:5Up9Lj7QWudEfMc0ve5qWW" in context "spotify:album:33yaWg4n9max6UWPlD59zs"
end tell 
```

但是，您也可以在艺术家的上下文中播放曲目：

```
tell application "Spotify"
     play track "spotify:track:5Up9Lj7QWudEfMc0ve5qWW" in context "spotify:artist:2AsusXITU8P25dlRNhcAbG"
end tell 
```

甚至是播放列表！

```
tell application "Spotify"
    play track "spotify:track:3NN3bw0UMt3DbFUVGh78kV" in context "spotify:user:sweetlelle:playlist:6C7spm3ZSJSWL9EZAhiMFb"
end tell 
```

# javascript - js中原型的详细研究

> ID：11607624
> 
> 赞同：0
> 
> 时间：2012-07-23T06:47:16.390
> 
> 标签：javascript, prototype

考虑下面的代码：

```
//for extend classes
function extend(subClass,superClass){
  var F=function(){};
  F.prototype=superClass.prototype;
  subClass.prototype=new F();
  subClass.prototype.constructor=subClass;
}
//basic sender object
function Sender(){}
Sender.prototype = {
  ...
};
//interface
//extend method 1:
function BackendAdmin(){}
BackendAdmin.prototype.Sender = function(){};
extend(BackendAdmin.Sender,Sender); //will generate prototype of undefined error
//extend method 2:
function BackendAdmin(){
  this.Sender = function(){};
  extend(this.Sender,Sender);// Seems can not be extended
}
// instance
var myadmin=new BackendAdmin();
myadmin.Sender.StartLoading(); // do not have method for method 2. 
```

在这种情况下，我想在 BackendAdmin 中创建一个 sender 实例，它继承了基本 sender 类的方法，此外，如果需要，我还需要重写 BackendAdmin 中的 sender 方法。但是，除非我使用这样的东西，否则它似乎在这两种情况下都不起作用：

```
this.sender = new Sender(); 
```

如何使用扩展功能？

# c# - 如何从特定位置读取一行字符串

> ID：11607626
> 
> 赞同：0
> 
> 时间：2012-07-23T06:47:18.493
> 
> 标签：c#, .net, string, io, stream

我正在处理一个非常大的文件。我说的是技嘉大。

我需要能够从特定索引中读取一行，因为文本文件一直在更新。实现这一目标的最快解决方案是什么？我完全不受空间要求的限制。

编辑：发布了更详细的信息。假设我有以下需要阅读的文本：

```
Jun 21 09:47:53 ez-x5 user.debug if_comm: [TX] 30 40 05 
Jun 21 09:47:53 ez-x5 user.debug if_comm: [RX] 04 
Jun 21 09:47:53 ez-x5 user.debug if_comm: [TX] 30 40 05 
Jun 21 09:47:54 ez-x5 user.debug if_comm: [RX] 02 30 40 0f 30 32 31 23 64 31 30 32 30 64 64 49 49 49 49 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 03 0b 
```

这个文本文件由我们的记录器持续更新。当文本文件被更新时，我需要读取附加到日志中的任何内容的新行（由 \n 分隔）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:57:31.907

使用 FileStream 对象，您可以通过更改 Position 属性来随机访问文件。

见[这里](http://msdn.microsoft.com/en-us/library/y0bs3w9t)。

设置位置时，它会寻找流中的位置，因此您需要提前知道要从文件中的哪个位置开始查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:02:59.237

通过使用，[`MemoryMappedFile`](http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.memorymappedfile.aspx)您可以将文件的一部分映射到您的内存中（这样您就不会读取完整的文件）。通过将其与 a 相结合，[`FileSystemWatcher`](http://msdn.microsoft.com/de-de/library/system.io.filesystemwatcher.aspx)您应该能够获得一个非常好的解决方案来工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:51:46.890

使用`lineCounter`variale 并在阅读时增加它`StreamReader.ReadLine()`。当您达到特定索引（即。`lineCounter==SpecificIndex`）时，请停止阅读。

# php - 想为 wordpress 设置 cron 作业（Backwpup 插件）

> ID：11607633
> 
> 赞同：2
> 
> 时间：2012-07-23T06:47:45.780
> 
> 标签：php, wordpress, cron, webserver, centos

这是我第一次接触 cron 工作，所以如果我的问题听起来很愚蠢，我很抱歉。

BackWPup 用于在一段时间后自动备份，但它自己的 cron 作业无法正常工作。它仅在我登录 wp-admin 时启动。所以我决定使用服务器的 cron 作业，但我不知道该怎么做。它说：

> 如果您要使用托管服务商的 cron 作业，您必须将其指向 url：[http ://example.com/wp-cron.php](http://example.com/wp-cron.php)

另外，我想知道如何删除工作。

注意：我只有 ssh 访问权限，没有主机控制面板。操作系统：CentOS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:52:32.473

我想你应该添加命令

```
wget http://example.com/wp-cron.php >> /path/to/my/wp-cron.log 2>&1 
```

到 crontab。当然，您可以使用任何其他 CLI http-tool 代替`wget`，但这是我所知道的最简单的，我认为在这里就足够了。

称呼

```
crontab -e 
```

然后添加一行

```
0 * * * * wget http://example.com/wp-cron.php >> /path/to/my/wp-cron.log 2>&1 
```

这将每小时调用一次此命令。有关详细信息，请参阅[`man crontab`](http://www.manpagez.com/man/5/crontab/)。

# mysql - 检索具有空日期值的行

> ID：11607637
> 
> 赞同：-1
> 
> 时间：2012-07-23T06:48:10.647
> 
> 标签：mysql, null

我想检索一段时间内缺勤的所有员工的姓名。

我需要一个查询，它可以返回我没有出勤率的员工。数据结构如下图所示：

```
date: 17-07-2012

empname | intime | outtime | teamtype 
abs     | NULL   | NULL    | PD
dfg     | NULL   | NULL    | PD

date: 18-07-2012

empname | intime | outtime | teamtype 
abs     | NULL   | NULL    | PD
ghf     | NULL   | NULL    | PD
dfg     | NULL   | NULL    | PD 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:38:43.157

我假设您想要在指定时间*不*在场的员工列表。请注意，我猜到了表名和列，因为它们不包含在您的问题中：

```
select empName
from employees left outer join attendance
    on employees.id = attendance.employee_id and :DATE between intime and outtime
where
    attendance.employee_id is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:07:44.123

```
select empName from tblName where intime is null 
```

# c++ - 使用动画 Qt、C++ 变换/旋转 QGraphicsItem

> ID：11607639
> 
> 赞同：0
> 
> 时间：2012-07-23T06:48:19.557
> 
> 标签：c++, linux, qt

目前我尝试`QGraphicsItem`在他的`Qt::YAxis`. 我在这里有这个示例代码，但它不起作用，因为`QGraphicsPixmapItem`没有属性“*变换*”。

```
QPropertyAnimation *animation = new QPropertyAnimation(myQGraphPixItem, "transform");
animation->setDuration(10000);
animation->setStartValue(QTransform::rotate (0, Qt::YAxis));
animation->setEndValue(QTransform::rotate (60, Qt::YAxis));

animation->start(); 
```

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:52:49.853

声明你自己的变换属性

```
class YourItem : public QGraphicsPixmapItem
{
    Q_OBJECT
    Q_PROPERTY(QTransform transfrom READ transform WRITE setTransform)
    ...
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T11:55:56.883

QVariantAnimation 目前不支持 QTransform。看看 [http://qt-project.org/doc/qt-5.0/qtcore/qvariantanimation.html#details](http://qt-project.org/doc/qt-5.0/qtcore/qvariantanimation.html#details)

# oracle - JPA 对象映射不会在插入时保存子项

> ID：11607641
> 
> 赞同：1
> 
> 时间：2012-07-23T06:48:21.177
> 
> 标签：oracle, jpa, playframework

我的 Play 应用程序中有这个模型。

```
@Entity
@Table(name="SHOPPER")
public class User extends GenericModel {

    ...

    @OneToMany(cascade = CascadeType.ALL)
    @JoinColumn(name = "SASHNBR", insertable = true, updatable = true)
    public List<Direction> directions;
} 
```

方向模型看起来像这样

```
@Entity
@Table(name="SHADDR")
public class Direccion extends GenericModel {

    ...

    @Column(name="SASHNBR")
    @Required
    public Long idUser;
} 
```

这样我就有一个错误，因为方向没有在保存时生成 idUser。

我也试过这种方法。

```
@Entity
@Table(name="SHOPPER")
public class User extends GenericModel {

    ...

    @OneToMany(cascade = CascadeType.ALL, mappedBy="user")
    public List<Direction> directions;
} 
```

方向模型看起来像这样

```
@Entity
@Table(name="SHADDR")
public class Direccion extends GenericModel {

    ...

    @ManyToOne(fetch=FetchType.EAGER)
    @JoinColumn(name = "SASHNBR", insertable = true, updatable = true)
    User user;
} 
```

但它也没有奏效。

有人可以帮我弄这个吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:07:17.953

你需要自己去救孩子。您可以查看[教程](http://www.playframework.org/documentation/1.2.5/guide2)以获取示例。

```
public User addDirection(Direction direction) {    
    this.directions.add(direction);
    this.save();
    return this;
}

@Override
public User save(){
    for (Direction dir : directions) {
        dir.save()
    }
    super.save()
    return this;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:06:50.483

请尝试这样的事情：

```
User user = new User();
// [...] call required setters of user object
for (int i=0; i<5; i++) {
    Direction direction = new Direction();
    direction.setUser(user);
    // [...] call other required setters of direction object
    user.getDirections().add(direction);
}
entitymanager.persist(user); 
```

# php - 如何使用 ajax 和 php 发布密码？

> ID：11607642
> 
> 赞同：1
> 
> 时间：2012-07-23T06:48:23.743
> 
> 标签：php, jquery, ajax, security, post

我有一个固定的用户名密码和一个可变文本。

这是第一种方法，但**不安全**：

```
<form action="http://site.com/foo.php" method="post">
  <input type="hidden" name="username" value="user123" />
  <input type="hidden" name="password" value="pass123" />
<input type="text" name="text" />
<input type="submit" />

</form> 
```

这是第二种方法请完成此：

**索引.html**

```
<form action="foo.php" method="post">
<input type="text" name="text" />
<input type="submit" />
</form> 
```

**foo.php**

```
$username = "user123";
$password = "pass123";

$text = $_POST["text"];

$url  = "http://site.com/foo.php?text=".$text."&password=".$password."&username=".$username; 
```

**如何安全地发布*$url*？（没有 HTTPS）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:55:06.760

没有 HTTPS 就没有安全。

因为当您发送密码时，即使您对其进行了加密，网络中继节点也将获得访问权限，并且可以以这种方式使用它。

您只能使用 MD5 来防止密码观察，但它仍然可以访问。

但是在本身是加密的HTTPS中，密码不能被破解，因为有一个只有客户端和服务器知道的公钥和私钥。

也许您可以通过 HTTPS 进行登录。无需购买证书。您可以轻松地自己发布一个并将其设置在您的主机上。

对重要业务使用 HTTPS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:54:15.407

> **更新：**
> 
> 如果没有 HTTPS，您将无法安全登录。
> 这是非常不安全的，并且不会阻止人们在截获哈希时登录。
> 只需使用 HTTPS。

* * *

使用[MD5 功能](http://php.net/en/manual/function.md5.php)。

例如

```
$url = "http://example.com/foo.php?text=".$text."&password=".md5($password)."&username=".$username; 
```

然后在接收站点 ( `http://example.com/foo.php?...`) 上，使用实际密码的哈希 (MD5) 检查收到的密码。

**例子：**

*发送文件：*

```
$username = "user123";
$password = "pass123";

$text = $_POST["text"];

$url = "http://example.com/foo.php";
$data = "text=".$text."&password=".md5($password)."&username=".$username;

$handle = curl_init($url);
curl_setopt($handle, CURLOPT_POST, true);
curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
$result = curl_exec($handle);
curl_close($handle);
if($result) {
    // Success
} else {
    // Failed
} 
```

*接收文件：*

```
$username = $_POST["username"];
$password = $_POST["password"];

// Insert code here to escape the username with mysqli_real_escape_string,
// then retrieve data from database with MySQLi.

if($password == md5($db_password)) {
    // Correct password
} else {
    echo 'Incorrect password.';
}
unset($username, $password, $db_password); // For security, remove variables from memory 
```

# sql - Sql Server 上下和索引逻辑

> ID：11607644
> 
> 赞同：2
> 
> 时间：2012-07-23T06:48:35.340
> 
> 标签：sql, sql-server, uppercase, lowercase

我在 sql 中有 FirstName 和 LastName 列。我想让 First Name 的第一个字母大，其余的低相同 LastName 的第一个字母大，其余的低 例如：我们有 FisrtName，LastName 是 john sinatra，我的名字必须是 John Sinatra。T-SQL代码应该如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:52:54.740

试试这个：

```
SELECT
    UPPER(LEFT(FirstName, 1)) + LOWER(RIGHT(FirstName, LEN(FirstName) - 1)) AS FirstName,
    UPPER(LEFT(LastName, 1)) + LOWER(RIGHT(LastName, LEN(LastName) - 1)) AS LastName
FROM MyTable 
```

# sql - 根据月份计算和汇总表中的数据

> ID：11607648
> 
> 赞同：0
> 
> 时间：2012-07-23T06:48:51.293
> 
> 标签：sql, select

我想从包含日期和数据的表中计算数据..表中有很多数据。示例如下：

```
DATE       hour  data1  data2
-------------------------------
01/01/2010  1    10860  1234    
01/01/2010  2    10861  1234    
01/01/2010  3    10862  1234    
01/01/2010  4    10863  567   
01/01/2010  5    10864  458    
02/01/2010  1    10865  3467    
02/01/2010  2    10866  7890    
02/01/2010  3    10867  863    
02/01/2010  4    10868  0    
02/01/2010  5    10868  698  
03/01/2010  1    10868  4693  
03/01/2010  2    10868  7853  
03/01/2010  3    10868  5987 
```

并根据上述数据。我想把它计算成这样的表：

```
DATE           sdata1  sdata2
-------------------------------
01/01/2010     54310   4727    
02/01/2010     54334   12918    
03/01/2010     32604   18533 
```

sdata1 和 sdata2 是计算的数据的总和......我有什么办法可以将数据计算到上述数据显示中？谢谢……呵呵……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:52:33.177

```
SELECT DATE, SUM(data1) AS sdata1, SUM(data2) AS sdata2 FROM table1 GROUP BY DATE; 
```

试试这个，让我知道这是否是你要找的。如果需要范围，您还可以使用 WHERE DATE BETWEEN startDate AND endDate。

* * *

如果您希望另一个表中的此数据用于“处理”，则另一个技巧是：

```
CREATE TABLE table2 (SELECT DATE, SUM(data1) AS sdata1, SUM(data2) AS sdata2 FROM table1 GROUP BY DATE); 
```

这将执行上面的查询，但会使用结果创建一个新表。我不确定您为什么需要它，但有时反规范化并在表格中显示计算信息可以加快您的应用程序的速度。

* * *

如果您已经有一张桌子，那么您可以执行以下操作：

```
INSERT INTO table2 (DATE, sdata1, sdata2) VALUES (SELECT DATE, SUM(data1) AS sdata1, SUM(data2) AS sdata2 FROM table1 GROUP BY DATE); 
```

# unix - 在 unix 中搜索字符串

> ID：11607649
> 
> 赞同：0
> 
> 时间：2012-07-23T06:48:59.470
> 
> 标签：unix, command, find

我想显示包含字符串 CHAR * getenv 的所有文件名，其中 getenv 是一个函数。

我正在使用这个查询

```
find . -type f -exec grep -l "CHAR * getenv" {} \; 
```

但它没有提供所需的输出。它显示带有字符串 CHAR getenv 但不是 CHAR * getenv 的文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:54:46.447

```
find . -type f -exec grep -l "CHAR \* getenv" {} \; 
```

或者

```
grep -rl "CHAR \* getenv" * 
```

您需要转义 * 因为它表示 0 个或更多的后续字符（在本例中为空格）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:52:28.637

使用 grep -F 防止搜索字符串被视为正则表达式。

```
find . -type f -exec grep -lF "CHAR * getenv" {} \; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:56:33.240

问题是 bash 扩展发生在 grep 命令执行之前：所以你的行被转换成`find . -type f -exec grep -l CHAR smt getenv {} \; find . -type f -exec grep -l CHAR smt2 getenv {} \;.` 用单引号替换双引号应该可以解决问题，因为那样 bash 扩展不会发生。

# maven-2 - 使用密钥库的 Maven Jarsigning

> ID：11607652
> 
> 赞同：0
> 
> 时间：2012-07-23T06:49:14.373
> 
> 标签：maven-2, m2e, jar-signing

发现`maven`很难用于简单的事情，比如`jar-signing`..可能是我做错了，纠正我。

我已经生成了一个`keystore`文件，它位于我的`src/main/keystore/mykey.keystore`...

我的 POM 看起来像：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>   
        <executions>
        <execution>
        <goals>
            <goal>sign</goal>
        </goals>
        </execution>
       </executions>
       <configuration>
        <keystore>src/main/keystore/mykey.keystore</keystore>
        <alias>aliasname</alias>
        <storepass>password</storepass>         
    </configuration>        
    </plugin>
        <plugin>
         <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>      
    <executions>
    <execution>
    <id>jar-with-dependencies</id>
    <phase>package</phase>
    <goals>
      <goal>single</goal>
    </goals>       
    <configuration>                         
       <descriptorRefs>
          <descriptorRef>jar-with-dependencies</descriptorRef>
       </descriptorRefs>           
     <appendAssemblyId>false</appendAssemblyId>
     </configuration>
    </execution>     
  </executions>      
</plugin> 
```

当我跑`mvn:install` ..

```
 Executing: cmd.exe /X /C ""C:\Program Files (x86)\Java\jdk1.6.0\jre\..  
 \bin\jarsigner.exe" -verify S:\Test-API\testapplet\target\appletbio-0.0.1-SNAPSHOT.jar"
 [info] jar is unsigned. (signatures missing or not parsable)
 [INFO] jarsigner: unable to sign jar: java.util.zip.ZipException: duplicate entry:    
 META-INF/maven/ 
```

...

```
 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-jar-plugin:2.3.2:sign 
 (default) on project 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:03:43.087

嗯..很简单..我需要使用

```
 <phase>prepare-package</phase> 
```

代替

```
 <phase>package</phase> 
```

这个[SO Anwser](https://stackoverflow.com/questions/11384704/sign-a-jar-file-created-with-maven-assembly-plugin)

# jquery - 调试通过 jQuery 添加到元素的事件处理程序

> ID：11607654
> 
> 赞同：0
> 
> 时间：2012-07-23T06:49:29.337
> 
> 标签：jquery, iphone, cordova, jquery-mobile, jquery-events

我正在尝试调试一些复杂的代码，其中一些 UI 是在 iPhone phonegap 应用程序中创建的。

问题是，当我按下元素时，附加到其事件的事件处理程序（据说是）似乎`touchstart`不会触发。

要么由于某些原因这些事件没有真正附加，要么点击在以某种方式到达它们之前被阻止......

我正在尝试调试这种情况并想知道：

1.  给定一个 jQuery 对象，是否有一种方法可以列出附加到它的事件处理程序（通过 jQuery）以进行调试？

2.  有没有一种简单的方法可以覆盖`.on`并拥有它`console.log`的参数

3.  关于我应该如何解决这个问题的任何其他想法

**更新**：在验证元素确实有`touchstart`处理程序并且没有被调用后，我发现如果我添加点击或`mousedown`事件处理程序，它们确实会被调用。

我怀疑这部分是由 jQuery mobile 引起的，但我不确定它如何或为什么以及为什么它只影响我的部分控件（那些不是 JQM 控件......）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:46:40.717

[你如何记录jQuery中一个元素触发的所有事件？](https://stackoverflow.com/questions/7439570/how-do-you-log-all-events-fired-by-an-element-in-jquery/10995631#10995631)

```
function getEventsList($obj) {
    var ev = new Array(),
        $events = $obj.data('events');
    for(var i in $events) {
        ev.push(i);
    }
    return ev.join(' ');
}

$obj.on(getEventsList($obj), function(e) {
    console.log(e);
}); 
```

我用它来找出 jquery 插件绑定到元素的确切自定义事件。它获取所有附加的事件，并在事件被触发时调用 console.log。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:19:15.680

[这个 Chrome 扩展](https://chrome.google.com/webstore/detail/dbhhnnnpaeobfddmlalhnehgclcmjimi)列出了附加的 JQuery 事件。

# android - Android 位图解码进度

> ID：11607657
> 
> 赞同：3
> 
> 时间：2012-07-23T06:49:54.093
> 
> 标签：android, bitmap, png, progress

假设性问题：假设我想使用 BitmapFactory 从文件/流/任何内容中解码位图。是否可以获得解码进度（作为整数）？我想将进度放在 ProgressBar 中。或者甚至有可能但不使用 BitmapFactory？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:36:34.963

让我们说使用Android提供的BitmapFactory的方法你不能。因为它调用了一些原生函数来解码图像。

如果你想深入了解，只需通过[android.graphics.BitmapFactory](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/graphics/BitmapFactory.java#BitmapFactory.nativeSetDefaultConfig%28int%29) 和[android.graphics.BitmapFactory_Delegate](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.4_r1/android/graphics/BitmapFactory_Delegate.java#BitmapFactory_Delegate)类的代码，看看它们是如何实现解码图像的代码并在你的情况下实现相同的，然后你就可以做到了修改了一些代码。（我不知道它有多大帮助）。

# c# - 从表中删除，并返回未删除的记录

> ID：11607658
> 
> 赞同：1
> 
> 时间：2012-07-23T06:50:05.530
> 
> 标签：c#, asp.net, sql-server, sql-server-2008, ado.net

我的 SQLSERVER(2008R2) 上有一个名为“Clients”的表，它有 ClientID 和 Address。我想做一个查询/SP，它执行以下操作：

1.  接收地址列表。
2.  删除具有这些地址的记录。
3.  返回无法删除的地址列表（未找到行等）。
4.  返回删除的行数。

我的应用程序是基于 C#-ASP.NET 的应用程序。我想到了以下解决方案：

1.  制作一个`SP`接收地址列表，然后尝试删除它们，如果无法删除它，将其添加到某种数组/列表中。- 我对这个解决方案的问题是我不熟悉列表在 SQLSERVER(2008R2) 上的工作方式。

2.  使用`DataTable`，从数据库中选择我需要的数据，然后使用 删除它`SqlDataAdapter`，并检查通过 更改的行是什么`RowState`。

我的数据库示例：

```
Client ID    Address

111111111  'foo st. 2'

222222222  'foo bld 1'

333333333  'foo rd 22'

444444444  'foo st. 1' 
```

输入示例：

`input list{'foo st. 2','foo bld 1','foo st 22','foo st 1'}`- 最后两项在上表中不存在，所以我希望我的 SP（或任何其他解决方案）返回：

```
'Deleted rows: 2' //thats not a problem
'list of the records which weren't removed: {'foo st 22','foo st 1'} //thats a problem.. 
```

希望我尽可能清楚地说明自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:06:28.670

我不认为你可以找到哪些项目没有被 sql 中的 delete 语句删除。首先，您需要一种用逗号分隔字符串的方法。我会使用[这个问题中建议的表格函数](https://stackoverflow.com/questions/2786377/how-to-split-a-string-in-t-sql)

一旦你有了它，那么你需要在删除到临时表之前进行选择，然后删除那里的记录，然后返回丢失的记录：

```
DECLARE @SplitString TABLE
(
    value varchar(MAX)
)

DECLARE @MissingRecords TABLE
(
    value varchar(MAX)
)

INSERT INTO @SplitString
SELECT  part
FROM    dbo.fSplitString('foo st 22, foo st 1', ',')

SELECT  value
FROM    @SplitString
WHERE   value NOT IN (  SELECT Address
                        FROM TableName
                     )

DELETE  FROM TableName
WHERE   Address IN (SELECT Value FROM @SplitString)

SELECT  *
FROM    @MissingRecords 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:55:33.207

首先，执行 DELETE 语句：

```
sql="DELETE FROM TABLENAME where Col1='Something'"; 
```

然后在执行 SELECT 语句到未删除的行列表之后？

```
 sql="SELECT * FROM TABLENAME where Col1='Something'"; 
```

编辑：

```
List<string> addresses=new List<string>()
{
 "foo st. 2","foo bld 1","foo st 22","foo st 1"
};
List<string> deleted=new List<string>();
List<string> notdeleted=new List<string>();

using(SqlConnection cn=new SqlConnection("connStr"))
 {
  using(SqlCommand cmd=new SqlCommand())
  {
    cmd.CommandText="DELETE from TableName Where Address=@address";
    cmd.Connection=cn;
    cmd.Parameters.Add("@address",SqlDbType.VarChar,50);
    cn.Open();
    for(String address in addresses)
     {
       cmd.Parameters["@address"].Value=address;
       int result=cmd.ExecuteNonQuery();
       if(result!=-1)
        {
          //deleted
          deleted.Add(address);
        }
      else
        {
         //not deleted
         notdeleted.Add(address);
        }
     }
    cn.Close();
   }
 } 
```

# iphone - 如何在objective-c iOS中使用触摸擦除图像？

> ID：11607663
> 
> 赞同：0
> 
> 时间：2012-07-23T06:50:28.960
> 
> 标签：iphone, objective-c, image-processing, erase

我正在做一个项目，我在另一个图像上方添加了一个 UIImage。现在，我必须使用平滑的触摸来擦除顶部图像的一部分或全部。我看到了许多与我的非常相似的其他问题。但他们没有得到正确的回答，或者在我的情况下可能不起作用。

请为此建议我一些示例代码或任何教程。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-19T04:35:53.197

创建图像视图.....

```
- (void)viewDidLoad
{
    eraseimg1 = [[UIImageView alloc] initWithFrame:CGRectMake(20,100, 80, 80)];
    eraseimg1.image = [UIImage imageNamed:@"qute.jpg"];
    [self.view  addSubview:eraseimg1];
    eraseimg1.userInteractionEnabled = YES;
    [super viewDidLoad];
} 
```

`touchesMoved:`事件手指移动以擦除图像。

```
-(void)touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event
{
    UITouch *touch = [[event allTouches] anyObject];
    UIGraphicsBeginImageContext(eraseimg1.frame.size);
    [eraseimg1.image drawInRect:CGRectMake(0, 0,eraseimg1.frame.size.width, eraseimg1.frame.size.height)];
    CGContextSetBlendMode(UIGraphicsGetCurrentContext( ),kCGBlendModeClear);
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext( ), 50);
    CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [[UIColor clearColor] CGColor]);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastTouch1.x, lastTouch1.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastTouch1.x, lastTouch1.y);
    CGContextAddRect(UIGraphicsGetCurrentContext(),CGRectMake(0,0,80,20));
    CGContextStrokePath(UIGraphicsGetCurrentContext()) ;
    eraseimg1.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
} 
```

# jsf - 如何在 JSF 中使用 OpenJPA EntityManagerFactory

> ID：11607664
> 
> 赞同：0
> 
> 时间：2012-07-23T06:50:29.627
> 
> 标签：jsf, jpa, entitymanager

我在 WebSphere Application Server 上使用 OpenJPA。我的 WebApplication 使用 JSF 2（没有 EJB）。

我想知道是否有在 JSF 中使用 JPA 的最佳实践。

我发现 EntityManagerFactory (EMF) 应该是应用程序范围的。此外，EMF 应该（仅）在应用程序停止时被销毁。

但我的消息来源不是最新的：

[Java 记事本：](http://javanotepad.blogspot.de/2007/05/jpa-entitymanagerfactory-in-web.html) 2007 年Web 应用程序中的 JPA EMF

从 2010 年开始[在 Web 层中使用 JPA 的最佳方式](http://www.swview.org/blog/best-way-use-jpa-web-tier)

[如何在](http://javanotepad.blogspot.de/2007/06/how-to-close-jpa-entitymanger-in-web.html) 2007 年的 Web 应用程序中关闭 JPA EntityManger

是否有其他实践或更好的方法来处理 JSF 中的 JPA？特别是 EMF 和 DAO 的范围。

最好的问候， 投票

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:29:29.363

创建一个简单的[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)，该过滤器在方法中创建 EMF，在方法`init()`中关闭它`destroy()`并创建一个设置为. 您也可以在那里开始和结束交易。`EntityManager``doFilter()``ThreadLocal<EntityManager>`

这也称为“在视图中打开会话”或“在视图中打开实体管理器”模式。

# git - 如何获取仅与当前本地工作分支相关的信息？

> ID：11607667
> 
> 赞同：0
> 
> 时间：2012-07-23T06:50:49.523
> 
> 标签：git, version-control

我的最终目标是快速更新我的本地工作分支。

在远程，有一个巨大的数据库，其中包含许多分支和标签等。一旦我将远程存储库同步（或克隆）到本地存储库中，当我执行 'repo forall -c 'git pull' 以获取最新信息时，会检索所有 git 项目的所有信息，因此需要很长时间。

例如，my_local_working_branch_1 对应于 remote/working_branch_1。就我而言，my_local_working_branch_1 大约有 300 个 git 项目

```
$ git branch
my_local_working_branch_1

$ repo forall -c 'git pull'
remote : couting objects: ...
remote : Compressing object: ...
remote : Total ...
From ssh://......
*[new branch] working_branch_2
*[new branch] working_branch_3
*[new tag]    ...
*[new tag]    ... 
```

为了节省时间，我只想从 remote/working_branch 更新 my_local_working_branch，实际上是它的 300 个 git 项目。

我可以使用 git fetch 或 git pull 吗？请给出详细说明。

如果您需要更多信息来完全理解它，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:00:51.177

你可以`pull`选择分支（你实际上在做什么），或者`fetch`+`rebase`它。

```
git pull <remote> <branch>

# the same as 

git fetch <remote> <branch>
git merge <remote>/<branch> <local_branch> 
```

或者：

```
git fetch <remote> <branch>
git rebase <remote>/<branch> <local_branch> 
```

我让你试试这两种情况，看看哪一种适合你。

# workflow - 流程/工作流引擎

> ID：11607672
> 
> 赞同：0
> 
> 时间：2012-07-23T06:51:06.720
> 
> 标签：workflow, jbpm

我正在研究一个需要工作流/流程引擎的解决方案。我的工作流程包含一些基于 Java 的进程（类）和一些 Linux Shell 脚本。流程不会是静态的，每个流程的执行取决于前一流程的状态/结果，并且会有多个路径，路径将由前一流程的状态确定。

我尝试查看 jBPM，但找不到合适的调用 shell 脚本的支持。请建议我一个适合我要求的替代方案。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:34:18.317

好吧，您可以使用 jBPM5，添加对运行 shell 脚本的支持非常简单，我们可以为您提供帮助。您能否详细说明您的要求？干杯

# 3d - 沿由 2 个点给出的 3d 线移动点

> ID：11607673
> 
> 赞同：1
> 
> 时间：2012-07-23T06:51:18.323
> 
> 标签：3d, line

我发现了很多关于在两个给定点之间移动点的文章，但我只是想知道我是否有一条线，由两个点给出，例如 L1，L2，我想得到一个点 P，它位于同一条线上但被移动了一段距离 d。

P<--------------L1<----L2

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:59:54.493

令 d0 为 L1 和 L2 之间的距离。

```
a = d / d0;
P.x = L1.x * (1 - a) + L2.x * a;
P.y = L1.y * (1 - a) + L2.y * a; 
```

# perl - 无法 ssh 到远程机器

> ID：11607676
> 
> 赞同：2
> 
> 时间：2012-07-23T06:51:20.967
> 
> 标签：perl

无法登录机器...但使用相同的凭据我可以登录机器

```
my $ssh = Net::SSH::Expect->new (host => "9.118.46.36", password=> 'test01', user => 'root', raw_pty => 1, timeout => 20);

    # establishes the ssh connection, 
    # authenticating with that user and password
    $ssh->login(); 
```

SSHAuthenticationError 登录超时。输入流当前的内容如下： root@9.118.46.36 的密码： at /usr/local/share/perl/5.14.2/Expect.pm line 828

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:00:17.653

我将超时时间增加到 30 并且它可以工作......有没有办法检查应该是什么超时时间。随着系统负载的增加，超时 30 也可能不起作用。

# xml - VBA如何捕获请求超时错误？

> ID：11607677
> 
> 赞同：12
> 
> 时间：2012-07-23T06:51:22.950
> 
> 标签：xml, excel, vba, xmlhttprequest, timeout

我正在使用对象[MSXML2.ServerXMLHTTP60](http://msdn.microsoft.com/en-us/library/ms762278%28v=vs.85%29)向网络服务发送请求；**有了这个对象，我可以通过异步**方法加快数据加载并避免锁定 Excel 屏幕（*无响应*）。但是，当webservice响应很长时间时，我仍然有一个问题，超出ServerXMLHTTP60超时设置，请求函数是静默的，我无法捕捉到超时错误。在[另一个问题](https://stackoverflow.com/questions/11407010/how-to-vba-callback-function-when-xmlhttp-ontimeout)上，@osknows 建议使用`xmlhttp status = 408`来捕获超时错误，但这对我不起作用。

我已经准备了一个测试文件，你可以[在这里](https://dl.dropbox.com/u/60740207/testTimeout.xlsm)下载。按打开 VBA 源代码，您将看到我从[本指南](http://www.dailydoseofexcel.com/archives/2006/10/09/async-xmlhttp-calls/)复制的`Atl + F8`类模块`CXMLHTTPHandler`

```
 If m_xmlHttp.readyState = 4 Then
        If m_xmlHttp.Status = 200 Then
            MsgBox m_xmlHttp.responseText
        ElseIf m_xmlHttp.Status = 408 Then 'Debug never run to here?
            MsgBox "Request timeout"
        Else
         'Error happened
        End If
    End If 
```

**VBA如何捕获请求超时错误？**

感谢您的帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-23T15:00:23.343

这里有几个并发症。

1.  `MSXML2.ServerXMLHTTP`不公开 COM 可用事件。`WithEvents`因此，使用并附加到它的`OnReadyStateChange`事件来实例化一个对象并不容易。
    事件在那里，但处理它的标准 VBA 方法不起作用。
2.  无法使用 VBA IDE 创建可以处理该事件的模块。
3.  使用异步请求时需要调用[`waitForResponse()`](http://msdn.microsoft.com/en-us/library/ms765535%28v=vs.85%29)（除了调用`setTimeouts()`！）
4.  没有`timeout`事件。超时作为错误抛出。

**要解决问题 #1：**

通常一个 VBA 类模块（也适用于用户表单或工作表模块）允许你这样做：

```
Private WithEvents m_xhr As MSXML2.ServerXMLHTTP 
```

所以你可以像这样定义一个事件处理程序：

```
Private Sub m_xhr_OnReadyStateChange()
  ' ...
End Sub 
```

不是这样`MSXML2.ServerXMLHTTP`。这样做会导致 Microsoft Visual Basic 编译错误：“对象不提供自动化事件”。

显然，该事件未导出以供 COM 使用。有办法解决这个问题。

`onreadystatechange`读取签名

```
Property onreadystatechange As Object 
```

所以你可以分配一个对象。我们可以使用方法创建一个类模块`onreadystatechange`并像这样分配：

```
m_xhr.onreadystatechange = eventHandlingObject 
```

但是，这不起作用。`onreadystatechange`需要一个对象，并且每当事件触发时，都会调用对象*本身*，而不是我们定义的方法。（例如，`ServerXMLHTTP`无法知道`eventHandlingObject`我们打算将用户定义的哪个方法用作事件处理程序）。

我们需要一个可调用对象，即具有*默认方法*的对象（每个 COM 对象都可以有一个）。
*（例如：`Collection`对象是可调用的，你可以说`myCollection("foo")`which 是 的简写`myCollection.Item("foo")`。）*

**要解决问题 #2：**

我们需要一个具有默认属性的类模块。不幸的是，这些无法使用 VBA IDE 创建，但您可以使用文本编辑器创建它们。

*   `onreadystatechange`在 VBA IDE 中准备包含函数的类模块
*   `.cls`通过右键单击将其导出到文件
*   `onreadystatechange`在文本编辑器中打开它并在签名下方添加以下行：
    `Attribute OnReadyStateChange.VB_UserMemId = 0`
*   删除原始类模块并从文件中重新导入。

这会将修改后的方法标记为`Default`。您可以在对象浏览器 (F2) 中看到一个小蓝点，这标志着默认方法：

![默认方法](../Images/79e2b9c7e510fb8388442807021f1a48.png)

所以每次调用对象时，*实际上*是调用了`OnReadyStateChange`方法。

**要解决问题 #3：**

只需`waitForResponse()`在 之后调用`send()`。

```
m_xhr.Send
m_xhr.waitForResponse timeout 
```

如果发生超时：如果您没有调用此方法，则请求将永远不会返回。`timeout`如果您这样做了，则会在几毫秒后引发错误。

**要解决问题 #4：**

为方便起见，我们需要使用一个`On Error`处理程序来捕获超时错误并将其转换为事件。

**把它们放在一起**

这是我编写的一个包装和处理`MSXML2.ServerXMLHTTP`对象的 VB 类模块。将其另存为`AjaxRequest.cls`并将其导入到您的项目中：

```
VERSION 1.0 CLASS
BEGIN
  MultiUse = -1  'True
END
Attribute VB_Name = "AjaxRequest"
Attribute VB_GlobalNameSpace = False
Attribute VB_Creatable = False
Attribute VB_PredeclaredId = False
Attribute VB_Exposed = False
Option Explicit

Private m_xhr As MSXML2.ServerXMLHTTP
Attribute m_xhr.VB_VarHelpID = -1
Private m_isRunning As Boolean

' default timeouts. TIMEOUT_RECEIVE can be overridden in request
Private Const TIMEOUT_RESOLVE As Long = 1000
Private Const TIMEOUT_CONNECT As Long = 1000
Private Const TIMEOUT_SEND As Long = 10000
Private Const TIMEOUT_RECEIVE As Long = 30000

Public Event Started()
Public Event Stopped()
Public Event Success(data As String, serverStatus As String)
Public Event Error(data As String, serverStatus As String, xhr As MSXML2.ServerXMLHTTP)
Public Event TimedOut(message As String)

Private Enum ReadyState
  XHR_UNINITIALIZED = 0
  XHR_LOADING = 1
  XHR_LOADED = 2
  XHR_INTERACTIVE = 3
  XHR_COMPLETED = 4
End Enum

Public Sub Class_Terminate()
  Me.Cancel
End Sub

Public Property Get IsRunning() As Boolean
  IsRunning = m_isRunning
End Property

Public Sub Cancel()
  If m_isRunning Then
    m_xhr.abort
    m_isRunning = False
    RaiseEvent Stopped
  End If
  Set m_xhr = Nothing
End Sub

Public Sub HttpGet(url As String, Optional timeout As Long = TIMEOUT_RECEIVE)
  Send "GET", url, vbNullString, timeout
End Sub

Public Sub HttpPost(url As String, data As String, Optional timeout As Long = TIMEOUT_RECEIVE)
  Send "POST", url, data, timeout
End Sub

Private Sub Send(method As String, url As String, data As String, Optional timeout As Long)
  On Error GoTo HTTP_error

  If m_isRunning Then
    Me.Cancel
  End If

  RaiseEvent Started

  Set m_xhr = New MSXML2.ServerXMLHTTP60

  m_xhr.OnReadyStateChange = Me
  m_xhr.setTimeouts TIMEOUT_RESOLVE, TIMEOUT_CONNECT, TIMEOUT_SEND, timeout

  m_isRunning = True
  m_xhr.Open method, url, True
  m_xhr.Send data
  m_xhr.waitForResponse timeout

  Exit Sub

HTTP_error:
  If Err.Number = &H80072EE2 Then
    Err.Clear
    Me.Cancel
    RaiseEvent TimedOut("Request timed out after " & timeout & "ms.")
    Resume Next
  Else
    Err.Raise Err.Number, Err.Source, Err.Description, Err.HelpFile, Err.HelpContext
  End If
End Sub

' Note: the default method must be public or it won't be recognized
Public Sub OnReadyStateChange()
Attribute OnReadyStateChange.VB_UserMemId = 0
  If m_xhr.ReadyState = ReadyState.XHR_COMPLETED Then
    m_isRunning = False
    RaiseEvent Stopped

    ' TODO implement 301/302 redirect support

    If m_xhr.Status >= 200 And m_xhr.Status < 300 Then
      RaiseEvent Success(m_xhr.responseText, m_xhr.Status)
    Else
      RaiseEvent Error(m_xhr.responseText, m_xhr.Status, m_xhr)
    End If
  End If
End Sub 
```

请注意`m_xhr.OnReadyStateChange = Me`将 AjaxRequest 实例*本身*分配为事件处理程序的行，这可以通过标记`OnReadyStateChange()`为默认方法来实现。

**请注意，**如果您进行更改，则`OnReadyStateChange()`需要再次执行导出/修改/重新导入例程，因为 VBA IDE 不保存“默认方法”属性。

该类公开了以下接口

*   方法：
    *   `HttpGet(url As String, [timeout As Long])`
    *   `HttpPost(url As String, data As String, [timeout As Long])`
    *   `Cancel()`
*   特性
    *   `IsRunning As Boolean`
*   活动
    *   `Started()`
    *   `Stopped()`
    *   `Success(data As String, serverStatus As String)`
    *   `Error(data As String, serverStatus As String, xhr As MSXML2.ServerXMLHTTP)`
    *   `TimedOut(message As String)`

在另一个类模块中使用它，例如在用户表单中，使用`WithEvents`：

```
Option Explicit

Private WithEvents ajax As AjaxRequest

Private Sub UserForm_Initialize()
  Set ajax = New AjaxRequest
End Sub

Private Sub CommandButton1_Click()
  Me.TextBox2.Value = ""

  If ajax.IsRunning Then
    ajax.Cancel
  Else
    ajax.HttpGet Me.TextBox1.Value, 1000
  End If
End Sub

Private Sub ajax_Started()
  Me.Label1.Caption = "Running" & Chr(133)
  Me.CommandButton1.Caption = "Cancel"
End Sub

Private Sub ajax_Stopped()
  Me.Label1.Caption = "Done."
  Me.CommandButton1.Caption = "Send Request"
End Sub

Private Sub ajax_TimedOut(message As String)
  Me.Label1.Caption = message
End Sub

Private Sub ajax_Success(data As String, serverStatus As String)
  Me.TextBox2.Value = serverStatus & vbNewLine & data
End Sub

Private Sub ajax_Error(data As String, serverStatus As String, xhr As MSXML2.ServerXMLHTTP)
  Me.TextBox2.Value = serverStatus
End Sub 
```

进行您认为合适的增强。这`AjaxRequest`门课只是回答这个问题的副产品。

# android - 如何从我当前的应用程序中打开 **Google Maps** 应用程序？

> ID：11607678
> 
> 赞同：1
> 
> 时间：2012-07-23T06:51:23.050
> 
> 标签：android, google-maps

如何在当前应用程序的按钮单击事件中打开**Google 地图**应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T06:55:07.253

使用下面的行

```
String uri = "http://maps.google.com/";
            Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
            intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
            startActivity(intent); 
```

这将在地图应用程序中重定向。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T06:58:52.873

您可以打开谷歌地图，意图给出您的起点和终点。

```
Intent navigation = new Intent(Intent.ACTION_VIEW, Uri
        .parse("http://maps.google.com/maps?saddr="
                + Constants.latitude + ","
                + Constants.longitude + "&daddr="
                + latitude + "," + longitude));
startActivity(navigation); 
```

这将打开任何地图应用程序。表示浏览器或谷歌地图应用程序。如果您只想要谷歌地图并摆脱对话框，您可以向意图提示您要使用哪个包。

在`startActivity()`添加之前：

```
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T06:56:47.133

您必须使用**Intent**。

这里有一个**真实的例子**

[http://www.tutorialforandroid.com/2009/10/launching-other-application-using-code.html](http://www.tutorialforandroid.com/2009/10/launching-other-application-using-code.html)

这里有一个**理论例子**

[从您自己的（意图）打开另一个应用程序](https://stackoverflow.com/questions/2780102/open-another-application-from-your-own-intent)

这里有 Android**文档**

[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

希望能帮助到你！:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T06:54:46.140

您可以通过在 AndroidManifes.xml 中指定“intent-filters”来做到这一点；有关如何从您的应用程序启动 google 应用程序的更多信息，请参阅此链接：[Intents List: Invoking Google Applications on Android Devices](http://developer.android.com/guide/appendix/g-app-intents.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T07:00:56.123

```
WebView view=(WebView) findViewById(R.id.w);    
Button button=(Button) findViewById(R.id.nxt);

button.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                     view.loadUrl("http://maps.google.co.in/maps?hl=en&tab=wl");
                    }
                        }; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T05:36:29.740

这是从我当前的应用程序调用**谷歌地图的另一种方式。**

```
String SettingsPage = "com.google.android.apps.maps/com.google.android.maps.MapsActivity";

                try
                {
                Intent intent = new Intent(Intent.ACTION_MAIN);             
                intent.setComponent(ComponentName.unflattenFromString(SettingsPage));             
                intent.addCategory(Intent.CATEGORY_LAUNCHER );             
                startActivity(intent); 
                }
                catch (ActivityNotFoundException e)
                {
                 Log.e("Activity Not Found","");
                }
                catch (Exception e) {
                     Log.e("Activity Not Found",""+e);
                } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-23T07:07:10.957

你可以使用这样的东西：`Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps?saddr=20.344,34.34&daddr=20.5666,45.345")); startActivity(intent);`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-20T09:43:26.317

用这个。希望这对你有用：

```
 Button showMap = (Button) findViewById(R.id.btn_showMap);
 showMap .setOnClickListener(new OnClickListener()
 {
 public void onClick(View v){
 Intent i = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("geo:"+ latitude +","+ longitude ));
 startActivity(i);
 }
 }); 
```

# qt - Qt 创建者默认是静态还是动态链接它的库？

> ID：11607682
> 
> 赞同：23
> 
> 时间：2012-07-23T06:51:51.210
> 
> 标签：qt, qt-creator

我正在开发一个封闭源代码的应用程序，并按照 LGPL 这样做，我必须将 Qt 的库动态链接到我的应用程序。Qt 默认情况下会这样做还是我必须采取措施这样做？如果是这种情况，我将如何去做？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-23T07:33:31.830

**Qt 默认使用动态链接。**

在部署到非开发人员机器时，您会立即注意到这一点，因为没有 Qt 库，您的代码将无法运行。

如果您关心的是 LGPL，那么在编译 Qt 本身时要小心。大多数与 Qt 的 LGPL 违规不是因为静态链接（因为动态是默认值），而是因为使用非默认参数编译 Qt。

LGPL 不仅是必须在您的二进制文件中提供该库，而且您还可以指定您的用户如何构建自己的 LGPL 部分。如果您自己编译 Qt 并且不使用网站上的预编译二进制文件，则必须在您的版本中记录您的构建配置的那部分！

一旦你在你的程序上运行了一些东西，就开始为没有安装 Qt 的非开发人员环境准备一个发布版本。一旦您删除必须沿程序复制的 DLL（或您的操作系统使用的任何格式），您的程序就会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:06:52.937

默认情况下它会这样做，从网站上有关它的许多问题来看，静态链接似乎相当复杂。

# php - 将 cakephp 中的月份更改为 3 个字母的单词

> ID：11607684
> 
> 赞同：0
> 
> 时间：2012-07-23T06:51:53.353
> 
> 标签：php, cakephp

我在使用 cakephp 输入类型日期时遇到问题。

我怎样才能使十二月到`Dec`，一月到`Jan`等等？

我有这个代码：

```
$this->Form->input('Profile.birthday', array(
    'label' => '', 
    'dateFormat' => 'MDY', 
    'minYear' => date('Y') - 112, 
    'maxYear' => date('Y')
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:17:07.667

dateformat 选项将允许您配置日期部分。

```
Used to specify the format of the select inputs for a date-related set of inputs.
Valid values include ‘DMY’, ‘MDY’, ‘YMD’, and ‘NONE’.
[http://book.cakephp.org/view/203/options-dateFormat][1] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-03T13:07:34.693

使用 CSS 属性

```
select {
    border: 1px solid #BCBCBC;  
    color: #4C4D51;   
    font: 14px "Franklin Gothic Book";
    text-overflow: "";
} 
```

# sql-server - 在 SQL 查询中处理 NULL

> ID：11607688
> 
> 赞同：2
> 
> 时间：2012-07-23T06:52:22.657
> 
> 标签：sql-server

在 SQL Case 中检查 NULL 的正确做法是什么？

1)**使用 ISNULL()**

```
WHEN (ISNULL(TABLE.COLUMN,0) > 0) THEN .... 
```

2)**使用 IS NULL**

```
WHEN TABLE.COLUMN IS NOT NULL THEN .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:57:59.723

如果您想在 SQL 案例中检查空值，第二个是正确的..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:59:50.790

如果您正在检查任何条件，则始终使用“is null”，如果将任何值替换为不同的值，则使用 isnull(a,b)。检查以下 - [http://msdn.microsoft.com/en-us/library/ms184325.aspx](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

特意看最后一行！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:05:19.250

这也是另一种检查`NON NULL`值的方法。

检查列的长度，如果它大于 1 或等于 1，则它是一个 NON NULL 值。

```
declare @emp table
 (
 fname varchar(50)
 );

 INSERT into @emp VALUES('vishwanath');
 INSERT into @emp VALUES('chetan');
 INSERT into @emp VALUES(NULL);
 INSERT into @emp VALUES(NULL);

 SELECT * FROM @emp
 where len(fname)>=1 and fname<>'';

 Gives..

     fname
--------------------------------------------------
    vishwanath
    chetan 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T07:11:15.393

如果列中的值大于 0 或为空，则两者都是正确的。如果您想了解 SQL Server 中空值的奇怪行为，可以参考这篇[文章。](http://allwrong.wordpress.com/2008/03/07/sql-when-case-null-fails/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T09:01:30.777

当您检查列是否为空时，最好使用 col IS NULL

使用 `ISNULL(TABLE.COLUMN,0) > 0)`函数时，必须将空值转换为零拳头，然后应取所有大于零的值

此功能在其他场合很有用。假设我想返回所有空值以及负值。

所以查询将是

```
select * from table where col is null or col<0 
```

这可以重写为

```
select * from table isnull(col,-1)<0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T09:33:05.333

两者都是正确的，但是当您想在计算 SUM、平均值等时在该列中使用常量值而不是 NULL 时，ISNULL 会很有帮助。
例如，您可以检查：http://www.w3schools.com/ sql/sql_isnull.asp

由于这个特性，我个人使用 ISNULL/COALESCE 进行计算。

# perforce - p4 同步问题：更改映射和删除文件夹后无法同步所有文件

> ID：11607704
> 
> 赞同：0
> 
> 时间：2012-07-23T06:53:06.657
> 
> 标签：perforce

我想更改 perforce 客户端中的映射路径

例如：

```
//depot/a/... /home/user/xyz/... 
```

到

```
//depot/a/... /home/user/p4/xyz/... 
```

使用 更改路径后`p4 client`，我使用 删除`xyz`了文件夹`rm -rf`。

然后运行`p4 sync`，但我认为有些文件没有同步到新路径`p4/xyz/`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:30:29.770

服务器认为工作区/客户端已经有这些文件的#head 修订，不需要再次同步它们。

您可以尝试使用`-f`选项来强制刷新，但这需要一把钳子来解决问题。

我会尝试`p4 sync -k //depot/a/...#none`更新服务器“拥有”列表。键入`[p4 help sync][1]`以获取有关该命令的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:55:41.327

尝试使用**强制**(-f) 标志。请参阅[文档](ftp://ftp.perforce.com/perforce/r05.2/doc/manuals/cmdref/sync.html)。

如果您使用的是可视化客户端，GUI 中还应该有一个复选框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-16T00:15:11.013

这里有同样的问题，没有一个解决方案奏效。原来我试图同步的文件是`p4 opened`. 一旦我恢复使用`p4 revert`它同步回来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T11:39:28.543

以下解决方案对我有用。

```
p4 sync -f //depot/a/... 
```

我所做的是，同步了整个基本目录，包含我所有文件和文件夹的目录。

`-f`是必要的，因为它实际上会复制，这在正常情况下不会发生`sync`（尝试`ls`在文件上进行确认）。

如果是单个文件的`rm -rf`情况，您可以这样做

```
p4 sync -f path/to/file 
```

# facebook-graph-api - 像来自graph api explorer的照片

> ID：11607707
> 
> 赞同：2
> 
> 时间：2012-07-23T06:53:14.543
> 
> 标签：facebook-graph-api, photo, explorer

我正在尝试为朋友的照片点赞，以对网站功能进行一些初步研究，并且在图形 api 浏览器中发现了奇怪之处。我检查了发布流选项。但是当我将下拉菜单设置为 POST 并将 URL 设置为 IMAGE_ID/likes 时，它会报告：

```
{
    "error": {
        "message": "Trying Too Often: You are attempting this too often.  Please try again later.", 
    "type": "OAuthException", 
    "code": 368
    }
} 
```

然后我立即退出 facebook。善良的灵魂是否愿意尝试通过 Graph API 浏览器为朋友的照片点赞，看看是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:34:43.683

当然，传递 URL，我会看看会发生什么。

用我朋友的照片对其进行了测试，效果很好……

# objective-c - 枚举值“UIGestureRecognizerStatePossible”、“UIGestureRecognizerStateCancelled”和“UIGestureRecognizerStateFailed”未在开关中处理

> ID：11607708
> 
> 赞同：2
> 
> 时间：2012-07-23T06:53:21.477
> 
> 标签：objective-c, ios5, xcode4.2

当我使用手势功能进行上下翻转时，会发生这种情况，请帮助解决此错误

```
- (void)doFlipForward:(UIGestureRecognizer *)aGestureRecognizer forOrientation:(UIInterfaceOrientation)anOrientation{
    if(isAnimating)
    return;

switch([aGestureRecognizer state])//There is occurred in this line
{
    case UIGestureRecognizerStateBegan:
        [CATransaction begin];
        [CATransaction setDisableActions:YES];
        [flipPage setHidden:NO];
        [flipShadow setHidden:NO];
        [CATransaction commit];         
        break;

    case UIGestureRecognizerStateChanged:
    {
        CGFloat multiplier = 0.0f;
        if(UIInterfaceOrientationIsPortrait(anOrientation))
        {
            multiplier = portraitMultiplierTable[(NSInteger)[aGestureRecognizer locationInView:self].x];
            [thisPage setPortraitCurlAnimationPosition:multiplier];
            [flipPage setPortraitCurlAnimationPosition:multiplier];
            [flipShadow setPortraitCurlAnimationPosition:multiplier];
        }
        else
        {
            multiplier = landscapeMultiplierTable[(NSInteger)[aGestureRecognizer locationInView:self].x];
            [thisPage setLandscapeCurlAnimationPosition:multiplier];
            [flipPage setLandscapeCurlAnimationPosition:multiplier];
            [flipShadow setLandscapeCurlAnimationPosition:multiplier];
        }
    }
        break;

    case UIGestureRecognizerStateEnded:
    {
        CGFloat transX = [(UIPanGestureRecognizer *)aGestureRecognizer translationInView:self].x;

        CGFloat width = [self bounds].size.height * PAGE_RATIO;
        if(width + transX < width/2)
        {
            [self animateOpen];
        }
        else
        {
            [self animateClose];
        }
    }           
        break;
} 
```

}

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T07:01:42.400

您没有`case`警告中列出的值。添加以下内容以使警告静音：

```
default:
    break; 
```

# iphone - UIRotationGestureRecognizer

> ID：11607712
> 
> 赞同：0
> 
> 时间：2012-07-23T06:53:38.243
> 
> 标签：iphone, objective-c, uigesturerecognizer

我有一个非常奇怪的问题，我正在我的应用程序中实现 UIRotationGestureRecognizer 来旋转图像。我的问题是，有时当您开始旋转图像时，它会跳到另一根手指。示例：我用一根手指拖动图像，然后用第二根手指开始旋转，但图像转到第二根手指。这正常吗？可以修复吗？我正在使用的代码是：

```
if([recognizer state] == UIGestureRecognizerStateEnded) {

    prevRotation = 0.0;
    return;
}

CGFloat newRotation = 0.0 - (prevRotation - [recognizer rotation]);

CGAffineTransform currentTransformation = image.transform;
CGAffineTransform newTransform = CGAffineTransformRotate(currentTransformation, newRotation);

image.transform = newTransform;

prevRotation = [recognizer rotation]; 
```

我尝试保存中心的最后一个位置并再次应用它，但它也不起作用，如下所示：

```
lastPoint=image.center;

if([recognizer state] == UIGestureRecognizerStateEnded) {

    prevRotation = 0.0;
    return;
}

CGFloat newRotation = 0.0 - (prevRotation - [recognizer rotation]);

CGAffineTransform currentTransformation = image.transform;
CGAffineTransform newTransform = CGAffineTransformRotate(currentTransformation, newRotation);

image.transform = newTransform;

prevRotation = [recognizer rotation];
image.center=lastPoint; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:59:08.613

试试这个代码：

```
-(void)rotate:(id)sender
{

    [self.view bringSubviewToFront:[(UIRotationGestureRecognizer*)sender view]];

    self.imageTag = [[sender view]tag];
    NSLog(@"sender tag %d", self.imageTag);
    if([(UIRotationGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {

        lastRotation = 0.0;
        return;
    }

    CGFloat rotation = 0.0 - (lastRotation - [(UIRotationGestureRecognizer*)sender rotation]);

    CGAffineTransform currentTransform = [(UIPinchGestureRecognizer*)sender view].transform;
    CGAffineTransform newTransform = CGAffineTransformRotate(currentTransform,rotation);

    [[(UIRotationGestureRecognizer*)sender view] setTransform:newTransform];

    lastRotation = [(UIRotationGestureRecognizer*)sender rotation];
} 
```

# asp.net - 404 无法正常工作

> ID：11607714
> 
> 赞同：0
> 
> 时间：2012-07-23T06:53:51.757
> 
> 标签：asp.net, iis-7, web-config

我已经建立了一个在 IIS 7.5 上运行的 asp.net 网站。在 web.config 中，我们对 404 页面使用自定义错误。

```
<customErrors mode="On" defaultRedirect="~/oops.aspx?type=error">
  <error statusCode="404" redirect="oops.aspx?type=404"/>
</customErrors> 
```

当我们使用像 www.ourdomain.com/stackoverflow 这样的 url 时，我们会被重定向到我们在 web.config 的 customerrors 部分中设置的 404 页面。当我们访问 www.ourdomain.com/stackoverflow.aspx 时，我们得到一个空白页面，而不是 404 页面（因为该页面不存在）。该页面还获得状态代码 200（表示 OK）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:29:17.310

检查您的 URL 重写方法是否正确重定向到错误页面的路径...因为您收到状态代码 200，表示您的处理已完成。所以你应该检查你的 URL 重写方法是否有错误......

# uibutton - 在 iCarousel 中为 UIButtons 添加标签

> ID：11607715
> 
> 赞同：0
> 
> 时间：2012-07-23T06:53:52.097
> 
> 标签：uibutton, uilabel, icarousel

我在 ViewController 中实现了 iCarousel 方法，一切正常，但有一件事，我想在轮播视图标签下方添加，对于每个图像，我想更改此标签区域中的文本。这是我用于将每个图像创建为按钮的代码。

提前致谢。

```
UIImage *buttonImage =[NSArray arrayWithObjects:[UIImage imageNamed:@"Hotels.png"],
                       [UIImage imageNamed:@"image2.png"],
                       [UIImage imageNamed:@"image3.png"],
                       [UIImage imageNamed:@"image4.png"],
                       [UIImage imageNamed:@"image1.png"],
                       [UIImage imageNamed:@"FastFood.png"],
                       [UIImage imageNamed:@"Taxi.png"],nil];

UIButton *button =[UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0, 0, 200.0f, 200.0f); 
```

[button setImage:[buttonImage objectAtIndex:index]forState:UIControlStateNormal]; [按钮 addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside]; 返回按钮；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:23:23.140

iCarousel 有一个委托方法：

```
- (void)carouselCurrentItemIndexDidChange:(iCarousel *)carousel; 
```

使用该方法更新您的标签，因为每次轮播中居中的项目更新时都会触发它。

要实际确定要使用的标签文本，您可能需要创建第二个字符串数组来匹配您的图像数组。这样，您可以使用 carousel.currentItemIndex 属性作为字符串数组的索引来选择正确的标签。

# java - Hadoop 上的支持向量机

> ID：11607716
> 
> 赞同：0
> 
> 时间：2012-07-23T06:53:59.060
> 
> 标签：java, hadoop, machine-learning

Hadoop上是否有支持向量机的实现？我正在寻找可以让我在 Hadoop 之上训练然后测试 SVM 模型的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:16:10.867

有人正在使用 BSP 在[Apache Hama](http://hama.apache.org/)上进行实现，这基本上是该项目 MPI 版本的一个端口： [http ://code.google.com/p/psvm/](http://code.google.com/p/psvm/)

您可以在这里跟踪他的进度：

[https://github.com/truncs/hello-world](https://github.com/truncs/hello-world)

[https://github.com/truncs/psvm](https://github.com/truncs/psvm)

我想这需要1-2个月才能完成，主要部分实际上正在运行。

# asp.net-mvc - 迁移到剃须刀，一个艰难的过程

> ID：11607717
> 
> 赞同：0
> 
> 时间：2012-07-23T06:53:59.367
> 
> 标签：asp.net-mvc, razor, migration

我想知道如何将此助手转换为剃须刀

```
<% Html.AjaxForm(s =>
 { %>
<div class="form2">
    <br />
    <label class="smallLabel" for="Name" >
        Name : <span id="s_Name">*</span></label>
    <%=Html.TextBox("Name", ViewData.Model.Name, new { @class = "smallTextBox" })%>

</div>
<% });%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:10:34.340

```
@using(Ajax.BeginForm(new AjaxOptions()))
{
    <div class="form2">
        <br />
        <label class="smallLabel" for="Name" >Name : <span id="s_Name">*</span></label>
        @Html.TextBoxFor(m => m.Name, new { @class = "smallTextBox" })
    </div>
} 
```

我强烈建议您重新访问[razor 语法信息](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)

**更新**

以下语法：

```
@using(Html.BeginForm())
{
} 
```

将呈现以下html：

```
<form>
</form> 
```

无论您放在弯曲括号内的任何内容都将在`<form>`标签内。

# jquery - 如何取消在 AjaxForm 上的提交

> ID：11607718
> 
> 赞同：3
> 
> 时间：2012-07-23T06:53:58.947
> 
> 标签：jquery, ajax, jquery-plugins

我正在使用 jquery 插件（ajax 形式），我尝试实现这样的东西

```
$("#MyFormID").ajaxForm({
    dataType: "json",
    resetForm: true,
    beforeSubmit: function() {
       //validateData returns boolean
       if(validateData()){
          // continue submit
       }else{
          //cancel submit
       }
    },
    success: function(json) {
        //show success notification     
    }
}); 
```

有没有办法阻止 ajax 提交表单？在beforesubmit 功能上可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T06:57:37.850

您可以使用`return false;`in`beforeSubmit`函数来阻止表单提交。

来源：http: [//jquery.malsup.com/form/#options-object](http://jquery.malsup.com/form/#options-object)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T06:58:02.890

呼入回调`xhr.abort()`。`beforeSend`

# android - GO SMS 干扰 abortbroadcast()

> ID：11607721
> 
> 赞同：1
> 
> 时间：2012-07-23T06:54:19.990
> 
> 标签：android, sms, broadcastreceiver

我在安装 GO SMS 时中止 SMS 广播时遇到问题，显然它的优先级总是高于我的短信拦截应用程序。请参阅这篇文章（[在另一个应用程序中抑制/阻止广播接收器](https://stackoverflow.com/questions/6600266/suppress-block-broastreceiver-in-another-app)）。我已经尝试了上面帖子中建议的解决方案，为我的应用设置了可能的最高优先级整数，还尝试了那里提到的 First-app-installed 规则。但这似乎不起作用。你们对如何将我的应用程序置于比 GO SMS 更高的优先级有任何想法吗？GO SMS 是否仅通过将其优先级设置为 2147483647 来实现？

# c# - 如何使用 c# 从 excel 文件中仅获取活动工作表名称？

> ID：11607722
> 
> 赞同：1
> 
> 时间：2012-07-23T06:54:31.053
> 
> 标签：c#, excel

我只想使用 c# 从 excel 文件中获取活动工作表名称，但现在我正在获取所有工作表名称，如何使用 c# 从 excel 中仅获取活动工作表名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T06:59:45.107

您可以使用 ActiveSheet 属性从中获取名称

请参阅此处的链接[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._application.activesheet](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._application.activesheet)

例如

```
WorkSheet sheet = (WorkSheet)_application.activesheet;

string name = sheet.Name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-04T11:12:43.200

您可能想要使用 NugetPackage 库 NPOI ( [https://archive.codeplex.com/?p=npoi](https://archive.codeplex.com/?p=npoi) )。您可以检索有关 Excel 文件（XLSX 或 XLS）的大量有用信息。包括保存工作簿时的活动工作表（`ActiveSheetIndex`属性）。它的优点是不依赖 Microsoft Interpot API（不需要安装 Excel）。你可以试试这个：

`using NPOI.SS.UserModel; using NPOI.HSSF.UserModel; using NPOI.XSSF.UserModel;`

...

```
//Stream
FileStream arquivoXLSX = new FileStream(XLSXWorkbokPath, FileMode.Open, FileAccess.Read);

//Workbook Data from XML
XSSFWorkbook workbook = new XSSFWorkbook(XLSXWorkbokPath);

//Active Worksheet Index
var ActWsIndex = workbook.ActiveSheetIndex;
//Active Worksheet Name
var ActWsName = workbook.GetSheetName(ActWsIndex); 
```

我希望它有所帮助。

# c++ - 为什么 exit(0) 给我错误？

> ID：11607726
> 
> 赞同：0
> 
> 时间：2012-07-23T06:54:50.857
> 
> 标签：c++, visual-studio-2010, visual-c++, opengl

所以我一直在关注一个教程，当我尝试编译以下代码时：

```
#include <glut.h>
#include <iostream>

void render(void);
void keyboard(unsigned char c, int x, int y);
void mouse(int button, int state, int x, int y);

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(640, 480);
    glutCreateWindow("Test GLUT App");

    glutDisplayFunc(render); // render
    glutKeyboardFunc(keyboard);
    glutMouseFunc(mouse);

    glutMainLoop(); // initialization finished. start rendering
}

void render(void)
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glBegin(GL_TRIANGLES);
    glColor3f(0.5, 0.2, 0.9);
    glVertex2f(-0.5, -0.5);
    glColor3f(0.1, 0.2, 0.5);
    glVertex2f(0.0, -0.5);
    glColor3f(0.3, 0.9, 0.7);
    glVertex2f(0.0, 0.5);
    glEnd();

    glutSwapBuffers();  
}

void keyboard(unsigned char c, int x, int y)
{
    if(c == 27)
    {
        exit(0);
    }
}

void mouse(int button, int state, int x, int y)
{
    if(button == GLUT_RIGHT_BUTTON)
    {
        exit(0);
    }
} 
```

我突然收到**3 个错误**：

**错误 1 ​​错误 C2381: 'exit' : 重新定义；__declspec(noreturn) 不同 c:\program files (x86)\microsoft visual studio 10.0\vc\include\stdlib.h 353**

**错误 2 错误 C3861: 'exit': identifier not found ....main.cpp 45**

**错误 3 error C3861: 'exit': identifier not found ....main.cpp 53**

有谁知道为什么会出现这个错误？我正在使用 VS2010。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T06:56:59.957

你需要`#include <cstdlib>`。

编辑：

您可能正在学习一个为您提供头文件的非常知名的教程。

这将帮助您然后[GLUT 退出重新定义错误](https://stackoverflow.com/questions/14402/glut-exit-redefinition-error)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-18T11:14:22.960

如果您的 Visual Studio 引发构建错误，提示 IntelliSense 未识别“退出”，那么您必须包含**process.h**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:00:13.033

尝试添加`using namespace std`到顶部。我不确定这是否会解决它，但我之前有一个类似的错误并且修复了它。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T03:33:37.393

您需要将标头简单地声明为工作，在我的组合中工作

```
#include <stdlib.h>
#include <cstdlib>
#include <glut.h>
#include <iostream> 
```

# php - 通过 http 代理的 stream_socket_client

> ID：11607731
> 
> 赞同：7
> 
> 时间：2012-07-23T06:55:06.957
> 
> 标签：php, sockets, ssl

我正在研究 APNS（Apple 推送通知服务）。我正在按照教程所说的那样做：

```
$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

$fp = stream_socket_client(
    'ssl://gateway.sandbox.push.apple.com:2195', $err,
    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx); 
```

但是在我的服务器上，我必须通过 HTTP 代理连接到互联网，所以这些代码总是出现超时错误。如何使用 ssl 协议为 strem_socket_client 设置 http 代理？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T23:05:20.600

最好的方法是设置[`proxy`](http://php.net/manual/en/context.http.php#context.http.proxy)选项`stream_context_create`：

```
$ctx = stream_context_create(array(
        'http' => array(
            'proxy' => 'tcp://127.0.0.1:8888',
            )
        )
       ); 
```

有关完整的 http 选项，请参阅[http://php.net/manual/en/context.http.php](http://php.net/manual/en/context.http.php)。也许您必须设置[`request_fulluri`](http://php.net/manual/en/context.http.php#context.http.request-fulluri)为true。

# asp.net - 如何开发多语言 Web 应用程序

> ID：11607734
> 
> 赞同：0
> 
> 时间：2012-07-23T06:55:23.537
> 
> 标签：asp.net, localization, globalization, multilingual

我用 Asp.Net 开发了一个多语言 Web 应用程序。我想问一个问题。我应该使用全球化还是 Cookie？哪个是真正的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:00:52.637

全球化将是一个更好的选择……您可以创建特定于语言的资源文件来执行多语言 Web 应用程序。

你可以检查

[http://www.codeproject.com/Articles/7998/Creating-multilingual-websites-Part-1](http://www.codeproject.com/Articles/7998/Creating-multilingual-websites-Part-1)

[在 ASP.NET 应用程序中实现多语言的最佳方法](https://stackoverflow.com/questions/5754685/best-way-to-implement-a-multilingual-in-asp-net-application)

为了更好地理解。

我强烈建议使用资源文件，一些资源是：

[演练：通过 ASP.NET 使用资源进行本地化](http://msdn.microsoft.com/en-us/library/fw69ke6f%28v=vs.80%29.aspx)

[如何：设置 ASP.NET 网页全球化的文化和 UI 文化](http://msdn.microsoft.com/en-us/library/bz9tc508%28v=VS.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-23T15:16:06.640

这就是我创建多语言网站的方式。

代码语言：[PHP](http://php.net)

目录结构：

```
/
|- core
|  |- init.php
|  `- lang
|     |- en_US.UTF-8.ini
|     `- hi_IN.UTF-8.ini
|
`- dashboard.php 
```

语言文件名：**en_US.UTF-8.ini**

```
[Headers]
HEADER_DASHBOARD = "Dashboard";
HEADER_USERS     = "Users";
HEADER_GROUPS    = "Groups";
HEADER_HELP      = "Help";

[MainMenu]
MENU_DASHBOARD = "Dashboard";
MENU_USERS     = "Users";
MENU_GROUPS    = "Groups";
MENU_HELP      = "Help"; 
```

文件名：**init.php**

```
<?php
$available_lang = [
         'en' => 'en_US.UTF-8',
         'hi' => 'hi_US.UTF-8',
      ];

//check if requested language is available or fallback to default.
$language = (isset($available_lang[$_GET['ln']])) ? $available_lang[$_GET['ln']]:'en_US.UTF-8';

$_SESSION['language'] = $_GET['ln'];

$ini = parse_ini_file("/core/lang/" . $language . ".ini");
?> 
```

文件名：**dashboard.php?ln=en**

```
<?php
require_once 'core/init.php';

if ($_SESSION['language']) == 'en') {
    echo '<a href="?ln=hi">Hindi</a>';
} else {
    echo '<a href="?ln=en">English</span></a>';
}

// example uses
echo $ini['HEADER_GROUPS']; // Dashboard
?> 
```

# ruby-on-rails-3 - 根据rails 3中的标题生成URL

> ID：11607739
> 
> 赞同：0
> 
> 时间：2012-07-23T06:55:42.917
> 
> 标签：ruby-on-rails-3

我是 Rails 的新手。请帮忙。我在模型中有 2 个字段

```
class Article < ActiveRecord::Base
  attr_accessible :title, :url, :description
end 
```

用户输入标题后，我们需要通过更改标题中的以下内容来自动填充 url 表单字段

1.  从标题中删除所有特殊字符
2.  用破折号“-”替换空格
3.  低档

然后用户可以更新 url 以进一步自定义它。最后，当他点击“创建文章”按钮时，我们需要再次检查以上3个条件来验证。

我正在使用 Rails 3.2.6

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:11:12.110

我假设它是一个网络应用程序，并且用户给出了一个带有两个文本框的表单，他可以在其中输入标题和 url。您可以使用 javascript 在文本框中自动生成 url，用户可以在其中自定义并保存。

# c++ - 如何使用 CPP 在 win7 64 位操作系统中打开 MSAcess 数据库？

> ID：11607744
> 
> 赞同：0
> 
> 时间：2012-07-23T06:56:15.000
> 
> 标签：c++, ms-access, 64-bit, database-connection

我需要做的就是在 64 位操作系统中打开 MSAcess DB。我的代码在 32 位操作系统中工作正常，但是当移植到 64 位时，打开函数抛出异常“数据库操作失败”。我的代码部分是跟随

```
//Code
CDatabase* m_pDatabase;
m_pDatabase = new CDatabase();
string szConnect = Driver={Microsoft Access Driver (*.mdb)};Dbq=E:\Application Files\Database\PLConfig.mdb
m_pDatabase->OpenEx(szConnect.c_str()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:10:58.333

Jet (.mdb) 驱动程序不适用于 64 位，您需要 2010 版的 ACE 驱动程序和合适的连接字符串 ( [http://www.connectionstrings.com/access-2007/](http://www.connectionstrings.com/access-2007/) )

```
Driver={Microsoft Access Driver (*.mdb, *.accdb)} 
```

[Microsoft Access 数据库引擎 2010](http://www.microsoft.com/en-us/download/details.aspx?id=13255)

# c# - 太多多余的javascript代码

> ID：11607748
> 
> 赞同：0
> 
> 时间：2012-07-23T06:56:37.573
> 
> 标签：c#, javascript, asp.net

在我的 asp.net 页面上，我需要控制脏控件。我在 javascript 方面不是那么好，所以我在互联网上找到了这样做的解决方案：

```
<script type="text/javascript" language="javascript">
    //Demo of completely client side dirty flag.

    function setDirty() {
        document.body.onbeforeunload = showMessage;
        //debugger;
        document.getElementById("DirtyLabel").className = "show";
    }

    function clearDirty() {
        document.body.onbeforeunload = "";
        document.getElementById("DirtyLabel").className = "hide";
    }

    function showMessage() {
        return ""
    }

    function setControlChange() {
        if (typeof (event.srcElement) != 'undefined') {
            event.srcElement.onchange = setDirty;
        }
    }

    document.body.onclick = setControlChange;
    document.body.onkeyup = setControlChange;

    window.onunload = function (sender, eventArgs) {
        if (window.opener != null) {
            window.opener.ClearBlocker();

            if (window.opener.TempClientReturnFunction != null)
                window.opener.TempClientReturnFunction = window.opener.ReturnFunction;
        }
    }
</script> 
```

但如果我有 7 页需要控制脏控件，那将是过多的冗余代码。有什么方法可以创建一些我可以调用函数的类/库，或者有没有更聪明的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:09:35.450

正如已经建议的那样，将您的代码放入一个单独的文件中，然后包含在需要它的每个页面上。

您可能要考虑的其他事情是采用“模块”模式，从而将不超过一个成员放入 javascript 全局命名空间。

模块化后，您的代码将如下所示：

```
var DIRTY_CONTROL = (function(){ //module pattern
    // *** Private members ***
    var dirtyLabelId = "DirtyLabel";
    var showMessage = function() {
        return "";
    };
    var setDirty = function(id) {
        id = id || dirtyLabelId;
        document.body.onbeforeunload = showMessage;
        //debugger;
        document.getElementById(id).className = "show";
    }
    var clearDirty = function clearDirty(id) {
        id = id || dirtyLabelId;
        document.body.onbeforeunload = "";
        document.getElementById(id).className = "hide";
    };
    var setControlChange = function(e) {
        e = e || window.event;
        var target = e.target || e.srcElement;
        target.onchange = setDirty;
    };
    var init = function() {
        document.body.onclick = document.body.onkeyup = setControlChange;
        window.onunload = function() {
            if (window.opener) {
                if (window.opener.ClearBlocker) {
                    window.opener.ClearBlocker();
                }
                if (window.opener.ReturnFunction) {
                    window.opener.TempClientReturnFunction = window.opener.ReturnFunction;
                }
            }
        };
    };
    // *** Public members ***
    //Expose private members here, as required.
    return {
        clearDirty: clearDirty,
        setDirty: setDirty,
        init: init
    };
})(); 
```

*未经测试*

按照惯例，模块的名称是大写的。

调用公共函数如下：

```
DIRTY_CONTROL.init(); 
```

或者

```
DIRTY_CONTROL.clearDirty(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:06:38.737

将该 JS 块放入像 Dirty.js 这样的 JS 文件中，然后在要使用它的每个页面上使用以下代码。

```
<script src="Dirty.js"></script> 
```

您可以在标签之间添加它，或者在正文末尾添加它，具体取决于您何时需要实际调用它。

# extjs4 - 从复选框获取值 - 逻辑问题

> ID：11607751
> 
> 赞同：0
> 
> 时间：2012-07-23T06:56:54.253
> 
> 标签：extjs4, extjs4.1

我有 2 `checkboxes`，它被称为`A`and `B`。当我点击 时`checkbox` `A`，所有特定的 a`field`都`Grid`应该过滤所有带有值的值`A`。

如果我单击，`B`则应该过滤并显示其中的所有值。`filed``grid``B`

如果我同时单击两者，则两者`A and B`都应显示。

```
 if (chkbxVal== 'A') {
        console.log('Only A');
        return rec.get('gridField') == 'A'; 
        } else if (chkbxVal == 'B'){
        console.log('Only B');
        return rec.get('gridField') == 'B'; 
        } else {
        console.log('both A and B');
        return rec;
        } 
```

以上，如果我有 2 个复选框，则有效。但是如果我有 3 个复选框（或更多）怎么办。我应该有 9 个 if-else 条件让它工作吗？看看下面的原型，它只适用于 3 个复选框，我有 6 个或 7 个，那么我应该有 36-49 个 if-else 条件吗？我有一个逻辑问题有人可以帮助我吗？

```
if (A){
// display A
} else if (B) {
// display B
} else if (C) {
//display C
} else if (A and B) {
//display A and B
} else if (A and C) {
// display A and C
} else if (B and C) {
//display B and C
} else {
// display all
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:13:45.180

不，那不是一个好主意。这是一个示例，它仅上升到“E”，但示例可以扩展：

```
Ext.require('*');

Ext.define('MyModel', {
    extend: 'Ext.data.Model',
    fields: ['name', 'filterField']
})

Ext.onReady(function(){

    var active = [];

    function onBoxChange() {
        active = [];
        form.items.each(function(item){
            if (item.checked) {
                active.push(item.inputValue);
            }        
        });
        updateGrid();
    }

    function updateGrid() {
        store.suspendEvents();
        store.clearFilter();
        store.filterBy(function(rec){
            return Ext.Array.indexOf(active, rec.get('filterField')) > -1;
        });
        store.resumeEvents();
        grid.getView().refresh();
    }

    var items = [];

    Ext.Array.forEach(['A', 'B', 'C', 'D', 'E'], function(name){
        items.push({
            boxLabel: name,
            xtype: 'checkbox',
            inputValue: name,
            checked: true,
            listeners: {
                change: onBoxChange
            }
        });
    });

    var form = new Ext.form.Panel({
        flex: 1,
        items: items
    });

    var store = new Ext.data.Store({
        model: MyModel,
        data: [{
            name: 'A1',
            filterField: 'A'
        }, {
            name: 'A2',
            filterField: 'A'
        }, {
            name: 'A3',
            filterField: 'A'
        }, {
            name: 'B1',
            filterField: 'B'
        }, {
            name: 'B2',
            filterField: 'B'
        }, {
            name: 'C1',
            filterField: 'C'
        }, {
            name: 'C2',
            filterField: 'C'
        }, {
            name: 'C3',
            filterField: 'C'
        }, {
            name: 'D1',
            filterField: 'D'
        }, {
            name: 'E1',
            filterField: 'E'
        }, {
            name: 'E2',
            filterField: 'E'
        }, {
            name: 'E3',
            filterField: 'E'
        }, {
            name: 'E4',
            filterField: 'E'
        }]
    });

    var grid = new Ext.grid.Panel({
        flex: 1,
        store: store,
        columns: [{
            dataIndex: 'name',
            text: 'Name'
        }]
    });

    new Ext.container.Viewport({
        layout: {
            type: 'vbox',
            align: 'stretch'
        },
        items: [form, grid]
    });

}); 
```

# ios - iPad2 上的 CVOpenGLESTextureCacheCreateTextureFromImage 太慢了，需要将近 30 毫秒，太疯狂了

> ID：11607753
> 
> 赞同：4
> 
> 时间：2012-07-23T06:56:58.930
> 
> 标签：ios, video, opengl-es

我使用 opengl es 在 iPad 上显示 bgr24 数据，我是 opengl es 的新手，所以在显示视频部分我使用来自 RosyWriter 的代码一个 APPLE 示例。它可以工作，但是 CVOpenGLESTextureCacheCreateTextureFromImage 函数花费超过 30 毫秒，而在 RosyWriter 中它的成本可以忽略不计。我所做的是首先将 BGR24 转换为 BGRA 像素格式，然后使用 CVPixelBufferCreateWithBytes 函数创建一个 CVPixelBufferRef，然后通过 CVOpenGLESTextureCacheCreateTextureFromImage 获取一个 CVOpenGLESTextureRef。我的代码如下，

```
- (void)transformBGRToBGRA:(const UInt8 *)pict width:(int)width height:(int)height
{
rgb.data = (void *)pict;

vImage_Error error = vImageConvert_RGB888toARGB8888(&rgb,NULL,0,&argb,NO,kvImageNoFlags);
if (error != kvImageNoError) {
    NSLog(@"vImageConvert_RGB888toARGB8888 error");
}

const uint8_t permuteMap[4] = {1,2,3,0};

error = vImagePermuteChannels_ARGB8888(&argb,&bgra,permuteMap,kvImageNoFlags);
if (error != kvImageNoError) {
    NSLog(@"vImagePermuteChannels_ARGB8888 error");
}

free((void *)pict);
} 
```

转换后会生成CVPixelBufferRef，代码如下，

```
[self transformBGRToBGRA:pict width:width height:height];

CVPixelBufferRef pixelBuffer;
CVReturn err = CVPixelBufferCreateWithBytes(NULL,
                             width,
                             height,
                             kCVPixelFormatType_32BGRA, 
                             (void*)bgraData, 
                             bytesByRow, 
                             NULL, 
                             0,
                             NULL, 
                             &pixelBuffer);

if(!pixelBuffer || err)
{
    NSLog(@"CVPixelBufferCreateWithBytes failed (error: %d)", err);  
    return;
}

CVOpenGLESTextureRef texture = NULL;
err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, 
                                                            videoTextureCache,
                                                            pixelBuffer,
                                                            NULL,
                                                            GL_TEXTURE_2D,
                                                            GL_RGBA,
                                                            width,
                                                            height,
                                                            GL_BGRA,
                                                            GL_UNSIGNED_BYTE,
                                                            0,
                                                            &texture);

if (!texture || err) {
    NSLog(@"CVOpenGLESTextureCacheCreateTextureFromImage failed (error: %d)", err);  
    CVPixelBufferRelease(pixelBuffer);
    return;
} 
```

其他代码几乎与 RosyWriter 示例类似，包括着色器。所以我想知道为什么，如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T05:32:04.423

通过这几天的研究，我发现为什么要`CVOpenGLESTextureCacheCreateTextureFromImage`花费很多时间，当数据很大时，这里是3M，**分配，复制和移动操作**，成本相当可观，尤其是复制操作。然后使用**像素缓冲池**将性能从 30ms 大大提高`CVOpenGLESTextureCacheCreateTextureFromImage`到 5ms，与 glTexImage2D() 相同的水平。我的解决方案如下：

```
NSMutableDictionary*     attributes;
attributes = [NSMutableDictionary dictionary];

[attributes setObject:[NSNumber numberWithInt:kCVPixelFormatType_32BGRA] forKey:(NSString*)kCVPixelBufferPixelFormatTypeKey];
[attributes setObject:[NSNumber numberWithInt:videoWidth] forKey: (NSString*)kCVPixelBufferWidthKey];
[attributes setObject:[NSNumber numberWithInt:videoHeight] forKey: (NSString*)kCVPixelBufferHeightKey];

CVPixelBufferPoolCreate(kCFAllocatorDefault, NULL, (CFDictionaryRef) attributes, &bufferPool);

CVPixelBufferPoolCreatePixelBuffer (NULL,bufferPool,&pixelBuffer);

CVPixelBufferLockBaseAddress(pixelBuffer,0);

UInt8 * baseAddress = CVPixelBufferGetBaseAddress(pixelBuffer);

memcpy(baseAddress, bgraData, bytesByRow * videoHeight);

CVPixelBufferUnlockBaseAddress(pixelBuffer,0); 
```

使用这个新创建**的 pixelBuffer**，你可以让它变得更快。

**在属性**中添加以下配置可以使其性能达到最佳，小于 1ms。

```
 NSDictionary *IOSurfaceProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                                                        [NSNumber numberWithBool:YES], @"IOSurfaceOpenGLESFBOCompatibility",[NSNumber numberWithBool:YES], @"IOSurfaceOpenGLESTextureCompatibility",nil];

[attributes setObject:IOSurfaceProperties forKey:(NSString*)kCVPixelBufferIOSurfacePropertiesKey]; 
```

# javascript - 如何设置点击标签样式？

> ID：11607755
> 
> 赞同：0
> 
> 时间：2012-07-23T06:57:01.157
> 
> 标签：javascript, jquery, html, css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:06:22.873

由于您使用的是 Jquery，因此您可以执行以下操作：

```
$(function(){
    $('.navigation ul#topnav li a').hover(
      function(){
        //remove the active class from all links on mouseover
        $('.navigation ul#topnav li a').removeClass('.active');
      },
      function(){
        //add active class to current link on mouseout
        $(this).addClass('active');
      }
    );
}); 
```

...然后在您的 css 中为活动类添加样式：

```
.navigation ul#topnav li a.active{
  /*your styles*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:07:12.247

为此，您必须使用 jquery。

```
$('.links').click(function(){
    $(this).addClass('clicked');
}); 
```

然后有一个点击链接的样式。

```
.clicked{
    color:red;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:07:30.970

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T07:09:08.187

您还可以为选定状态添加新样式：

```
 .navigation ul#topnav li a:selected{
     //Your Style Here
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T07:09:11.027

需要添加另一个类并将其添加到单击的元素中。

JS

```
$('.navigation ul#topnav li a').click(function(){
    $(this).addClass('active');
}); 
```

CSS

```
.navigation ul#topnav li a.active{
        color:#824d97;
        background-color:inherit;
        background:url(../images/nav-hover-bg.png) repeat-x 0 0 !important;
        border-left:5px solid #6c1b93 !important;
        border-right:5px solid #6c1b93 !important;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-23T07:12:35.530

为它制作 javascript/jQuery 代码。

OnLoad/就绪 DOM

jQuery

```
$(".navigation ul#topnav li").click(function() {
     if($(this).hasClass("selected")) {
         $(this).removeClass("selected");
     } else {
         $(this).addClass("selected");
     } 
}); 
```

CSS

```
.navigation ul#topnav li.selected {
    background-color:#selectedcolor
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-23T07:14:40.803

试试下面的：

```
.navigation ul#topnav li a:visited{ 
    color:#824d97; 
    background-color:inherit; 
    background:url(../images/nav-hover-bg.png) repeat-x 0 0 !important; 
    border-left:5px solid #6c1b93 !important; 
    border-right:5px solid #6c1b93 !important; 
} 
```

# c++ - c++中对象的地址及其成员

> ID：11607756
> 
> 赞同：5
> 
> 时间：2012-07-23T06:57:02.670
> 
> 标签：c++, class, pointers

我正在处理我的一个应用程序问题。这里我面临的问题是我需要使用类对象的指针调用一些函数。

但主要问题是我没有类指针，而是我有一个成员变量值（可以说它是一个值列表）。在此之后，我用下面的代码做了一个小测试。

```
using namespace std;

class Person {
public:
      Person(string name, int age) {
            this->name = name;
            this->age = age;
      }
      string getName() {
            return name;
      }
      int getAge() {
            return age;
      }
      void Print()
      {
      printf("This address is %x\n",this);
      printf("age adress is %x\n",&age);

      }
private:
      int age;
      string name;

};

int main() {
      cout << "Creating a person..." << endl;

Person *johnDoe=new Person("John Doe", 25);
      cout << "Person's name: " << johnDoe->getName() << endl;
      cout << "Person's age: " << johnDoe->getAge() << endl;
      johnDoe->Print();
      delete johnDoe;
      return 0;
} 
```

执行的 coutput 是：

```
> ./a.out
Creating a person...
Person's name: John Doe
Person's age: 25
This address is 72918
age adress is 72918 
```

现在我的疑问是：

是否保证类成员变量的地址总是指向对象的地址？如果我需要使用指针来调用其他核心 api 函数，我可以使用这个地址吗？

我google的时候看到了这个？

*（C1x §6.7.2.1.13：“一个指向结构对象的指针，经过适当转换，指向它的初始成员……反之亦然。作为结构对象，可能有未命名的填充，但不是在它的开头。”）*

即使在 c++ 和类的情况下也是如此吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T06:59:57.170

> 是否保证类成员变量的地址总是指向对象的地址？

不。在 C++ 中，在第一个成员之前可能有一些东西（特别是对于派生类和多态类）。究竟有什么是实现定义的。

> 如果我需要使用指针来调用其他核心 api 函数，我可以使用这个地址吗？

不，而且您不需要：只要您可以访问成员，您也可以访问`this`，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:05:50.770

这也适用于类，除非它们具有任何虚函数。如果你有继承权，你也应该小心（不确定规则到底有多精确）。

总的来说，这是一个坏主意。你为什么要这样做？您依赖于类的结构（即，如果您在年龄之前不小心添加了一个成员，您的代码将会中断）并且您放弃封装（无论如何其他类都不应该有指向年龄的指针，因为它是私有的 - 你会泄露你对象表示）。

顺便说一句：你是 Java 程序员吗？你的构造函数看起来像你，因为你没有正确初始化你的对象。你应该这样做：

```
Person(String n, int a) : age(a), name(s) {} 
```

（否则编译器将首先调用 int 和 string 的默认构造函数，然后在它们上调用 operator= - 这效率不高）。

# file - 如何读取特定行和特定位置？

> ID：11607757
> 
> 赞同：2
> 
> 时间：2012-07-23T06:57:03.237
> 
> 标签：file, bash, shell, unix, solaris

我在读取特定行和特定位置的字符串时遇到问题。我有一个输入文件，每行中的每个值都有固定的位置和固定的长度。这是我的输入文件的示例：

```
sltele     Hoodie   24051988 d12Hdq
sltele     Hoodie   07051987 d30Hdq
sltele     Hoodie   07082011 d08Hdq
sltele     Hoodie   09081961 d04Hdq
sltele     Hoodie   20041962 d14Hdq
sltele     Hoodie   20032000 d01Hdq
sltele     Hoodie   13062002 d05Hdq 
```

我需要在第一行的第 3 列中读取一个字符串。所以，我用了这个

```
awk 'NR==1 {print $2, $3}' inputfile.inp 
```

如何以字符位置为参数获得准确的结果？（12-18 日和 21-28 日）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T07:00:04.917

采用`cut -c`

查看手册页以获取更多详细信息。

您也可以使用以下内容：

```
echo "abcdefghij" | awk '{print substr($0,2,2),substr($0,6,2)}'
bc fg 
```

上面是第二个位置的 2 个字符和第六个位置的 2 个字符。

您的解决方案将是：

```
awk 'NR==1 {print substr($0,12,6),substr($0,21,7)}' inputfile.inp 
```

上面的命令将从第 1 行的第 12 个位置获取 6 个字符，从第 21 个位置获取 7 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:33:23.977

您也可以使用*sed*：

```
sed -rn "1 s@.{11}(.{7}).{2}(.{8})@\1\2@p" filename 
```

解释：

*   **-n**不打印行
*   **替换**_****
***   **1**只有第一行*   **.{11}**省略 11 个字符*   **(.{7})**保存 7 个字符（字符 12-18）*   **.{2}**省略 2 个字符 (19-20)*   **(.{8})**保存 8 个字符 (21-28)*   **\1\2**用第一次和第二次保存替换字符串*   **p**打印指定行的行**

# python - pyodbc：ubuntu 上的 .mdb 连接错误

> ID：11607762
> 
> 赞同：0
> 
> 时间：2012-07-23T06:57:35.650
> 
> 标签：python, sql, pyodbc, unixodbc

我正在尝试访问位于我的系统上的 .mdb 文件。我的代码看起来像这样：

```
import csv
import pyodbc

MDB = '/home/filebug/client/my.mdb'
DRV = '{Microsoft Access Driver (*.mdb)}'
PWD = 'mypassword'

conn = pyodbc.connect('DRIVER=%s;DBQ=%s;PWD=%s' % (DRV,MDB,PWD))
print conn
curs = conn.cursor()

SQL = 'SELECT * FROM InOutTable;' # insert your query here
curs.execute(SQL)

rows = curs.fetchall()

curs.close()
conn.close() 
```

但我面临以下错误：

```
Traceback (most recent call last):
  File "mdb.py", line 8, in <module>
    conn = pyodbc.connect('DRIVER=%s;DBQ=%s;PWD=%s' % (DRV,MDB,PWD))
pyodbc.Error: ('IM002', '[IM002] [unixODBC][Driver Manager]Data source name not found, and no default driver specified (0) (SQLDriverConnect)') 
```

我已经`pyodbc-3.0.6-py2.7-linux-i686.egg`安装在我的系统上。使用 Ubuntu 12.04 谁能告诉我这里有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:54:47.060

I get this info from [http://www.easysoft.com/developer/interfaces/odbc/linux.html](http://www.easysoft.com/developer/interfaces/odbc/linux.html)

> In this case unixODBC could not locate the DSN "dsn_does_not_exist" and hence could not load the ODBC driver. Common reasons for this error are:
> 
> The DSN "dsn_does_not_exist" does not exist in your USER or SYSTEM ini files.
> 
> The DSN "dsn_does_not_exist" does exist in a defined ini file but you have omitted the "Driver=xxx" attribute telling the unixODBC driver manager which ODBC driver to load.
> 
> The "Driver=/path_to_driver" in the odbcinst.ini file points to an invalid path, to a path to an executable where part of the path is not readable/searchable or to a file that is not loadable (executable).
> 
> The Driver=xxx entry points to a shared object which does not export the necessary ODBC API functions (you can test this with dltest included with unixODBC.
> 
> The ODBC driver defined by DRIVER=xxx in the odbcinst.ini file depends on other shared objects which are not on your dynamic linker search path. Run ldd on the driver shared object named by Driver= in the odbcinst.ini file and see what dependent shared objects cannot be found. If some cannot be found than you need to defined your LD_LIBRARY_PATH environment variable to define the paths to any dependent shared objects or add these paths to /etc/ld.so.conf and rerun ldconfig.

# asp.net-mvc - 实体框架代码优先迁移中的不同 dll

> ID：11607764
> 
> 赞同：0
> 
> 时间：2012-07-23T06:57:44.607
> 
> 标签：asp.net-mvc, ef-code-first, entity-framework-4.3, entity-framework-migrations

我有一个 MVC 4 项目（Company.Project.WebUI），一个用于我所有模型类的项目（Company.Project.Data）和一个用于 DAL 的项目（Company.Project.Services）。

如何使用 Code First 迁移来管理它？

编写命令时出现以下错误`Add-Migration Init`：

`

```
System.Reflection.ReflectionTypeLoadException: Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information.
   at System.Reflection.RuntimeModule.GetTypes(RuntimeModule module)
   at System.Reflection.RuntimeModule.GetTypes()
   at System.Reflection.Assembly.GetTypes()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.FindConfiguration()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.GetMigrator()
   at System.Data.Entity.Migrations.Design.ToolingFacade.GetPendingMigrationsRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run() 
```

`

当我写命令时，`Add-Migration -StartUpProjectName "Company.Project.Services" Init`我也会得到一个错误

`

```
System.IO.FileNotFoundException: Could not load file or assembly 'Company.Project.WebUI' or one of its dependencies. The system cannot find the file specified.
File name: 'Company.Project.WebUI'
   at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
   at System.Reflection.Assembly.Load(String assemblyString)
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.FindConfiguration()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.GetMigrator()
   at System.Data.Entity.Migrations.Design.ToolingFacade.GetPendingMigrationsRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run() 
```

`

有人可以告诉我将 EF Code First Migration 与不同的 dll 一起使用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:28:33.410

我不知道为什么，但 EF 希望将您的 DAL 项目设置为 Visual Studio 中的启动项目。我只是遇到了同样的错误，这解决了问题。

在解决方案资源管理器上：右键单击您的 DAL 项目 -> 选择“设置为启动项目”。

# c# - 将数据拆分为整数

> ID：11607765
> 
> 赞同：-1
> 
> 时间：2012-07-23T06:57:46.267
> 
> 标签：c#, casting

我意识到它不会在里面读取`if (berjaya[23].Equals(70))`，好像它不等于 70。但是当我尝试`berjaya[23]`使用 MessageBox 显示时，它确实显示为 70。

我的第一个猜测是铸造。我试过`int value = (int)(berjaya[23]);`了，我的下一个计划是尝试做`if(value == 70)`，但它说字符串不能转换为 int。

有没有其他的`(berjaya[23].Equals(70))`阅读方式？

===编辑===

我应该通过这种方式投射数据拆分：

```
int.TryParse(berjaya[23], out value1); 
```

然后改变图片，我用这个：

```
if (value1 == 301)
                {
                    Bitmap abc = (Bitmap)System.Drawing.Bitmap.FromFile("C:\\Users\\HDAdmin\\Pictures\\HospitalIcon\\web\\web2\\images\\a3_01.gif");
                    pictureBox1.Image = abc;                                      
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:09:05.303

试试这个，但设置图像名称

```
Bitmap abc = (Bitmap)System.Drawing.Bitmap.FromFile("C:\\Users\\HDAdmin\\Pictures\\HospitalIcon\\fafa\\images\\a3_00.gif");
if (berjaya[23].Equals(70)) 
{

    abc = (Bitmap)System.Drawing.Bitmap.FromFile("C:\\Users\\HDAdmin\\Pictures\\HospitalIcon\\fafa\\images\\a3_01.gif");                    

}

myPicturebox.Image = abc; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:24:27.713

您必须先添加一个空位图。像：

```
Bitmap abc; 
```

或者您可以为此分配价值。然后在 if/else 你变成：

```
abc = (Bitmap)System.Drawing.Bitmap.FromFile("C:\\Users\\HDAdmin\\Pictures\\HospitalIcon\\fafa\\images\\a3_01.gif"); 
```

附加：操作，对不起小姐/先生/女士（我必须说什么？）萨拉布朗，这将是一个非常复杂的。添加这个功能

```
public int value(string num){
    string a = num.split("");//If this function true?
    int res = 0;
    for(var b = 0; b<a.Length; b++){
        res = res*10;
        switch(a[b]){
            case "0":
                break;
            case "1":
                res += 1;
                break;
            case "2":
                res += 2;
                break;
            case "3":
                res += 3;
                break;
            case "4":
                res += 4;
                break;
            case "5":
                res += 5;
                break;
            case "6":
                res += 6;
                break;
            case "7":
                res += 7;
                break;
            case "8":
                res += 8;
                break;
            case "9":
                res += 9;
                break;
        }
    }
    return res;
} 
```

添加此代码Bitmap abc；

```
if(value(Berjaya[23])==70){
    abc = (Bitmap)System.Drawing.Bitmap.FromFile("C:\\Users\\HDAdmin\\Pictures\\HospitalIcon\\fafa\\images\\a3_01.gif");
} 
```

# ios - GPUImageExposureFilter 切换图像尺寸？

> ID：11607767
> 
> 赞同：1
> 
> 时间：2012-07-23T06:57:49.797
> 
> 标签：ios, xcode, gpuimage

我在一些图像上运行 GPUImageExposureFilter。当我在纵向图像上执行此操作时，由于某种原因，它会将图像的纵横比调整为横向。

当我运行这个过滤器时，图像从 2448 x 3264 变为 3264 x 2448。我正在努力追查问题。如果您认识到这个问题，任何帮助将不胜感激。

过滤器设置

```
GPUImageOutput<GPUImageInput> *exposureFilter;
exposureFilter = [[GPUImageExposureFilter alloc] init]; 
```

滑块：

```
[(GPUImageExposureFilter *)exposureFilter setExposure:[exposureSlider value]]; 
```

![在此处输入图像描述](../Images/91a5bc572192cd10d68d52ab6cb0a60b.png)

# jpa - 带有实体或 ID 的 JPQL @NamedQuery？

> ID：11607769
> 
> 赞同：0
> 
> 时间：2012-07-23T06:57:59.070
> 
> 标签：jpa, ejb-3.1

如有重复请见谅。

业务层是否可以或推荐使用对象而不是 id？

```
SELECT c
FROM Child AS c
WHERE c.parent = :parent 
```

```
public List<Child> list(final Parent parent) {

    // does parent must be managed?
    // how can I know that?
    // have parent even been persisted?

    return em.createNamedQuery(...).
        setParameter("parent", parent);
} 
```

这就是我的工作方式。

```
SELECT c
FROM Child AS c
WHERE c.parent.id = :parent_id 
```

```
public List<Child> list(final Parent parent) {

    // wait! parent.id could be null!
    // it may haven't been persisted yet!

    return list(parent.getId());
}

public List<Child> list(final long parentId) {
    return em.createNamedQuery(...).
        setParameter("parent_id", parentId);
} 
```

更新的问题 --------------------------------------

`@EJB`是否可以在同一个 JTA 中说任何可以注入的 JAX-RS 或 JAX-WS 类？

我一直好奇的原始问题来了。

假设我们有两个 EJB。

```
@Stateless
class ParentBean {

    public Parent find(...) {
    }
}

@Stateless
class ChildBean {

    public List<Child> list(final Parent parent) {
    }

    public List<Child> list(final long parentId) {
    }
} 
```

处理任何 EJB 客户端的正确方法是什么？

```
@Stateless // <<-- This is mandatory for being injected with @EJB, right?
@Path("/parents/{parent_id: \\d+}/children")
class ChildsResource {

    @GET
    @Path
    public Response list(@PathParam("parent_id") final long parentId) {

        // do i just have to stick to this approach?
        final List<Child> children1 = childBean.list(parentId);

        // is this parent managed?
        // is it ok to pass to other EJB?
        final Parent parent = parentBean.find(parentId);

        // is this gonna work?
        final List<Child> children2 = childBean.list(parent);

        ...
    }

    @EJB
    private ParentBean parentBean;

    @EJB
    private ChildBean childBean;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:14:38.860

**以下仅作为对“业务层是否可以或建议使用对象而不是 ids可以说注入@EJB 在同一个JTA 中？”。**

有可能的。大多数情况下也推荐。ORM 的全部目的是我们可以对对象及其关系进行操作，而不是对它们在数据库中的表示进行操作。

实体的 ID（特别是在代理 ID 的情况下）通常是仅在我们靠近存储本身时才有意义的概念。当只有提供的持久性本身需要访问 id 时，设计访问 id 的方法通常是有意义的`protected`。当我们这样做时，向实体用户发布的噪音更少。

像往常一样也有有效的例外。例如，可以发现在线路上移动整个实体太耗费资源，并且最好使用 id 列表而不是实体列表。在问题实际存在之前，不应做出这样的设计决策。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:20:50.660

如果 parent 还没有被持久化，那么查询将不起作用，执行它没有多大意义。如果父级没有被持久化，你有责任避免执行它。但我不会让它成为 find 方法本身的责任。只需在方法的文档中明确说明，作为参数传递的父级必须有一个 ID，或者至少是持久的。无需进行与实体管理器相同的验证。

如果它已被持久化，但尚未发生刷新，则实体管理器必须在执行查询之前刷新，正是为了使查询找到新父级的子级。

至少使用 Hibernate，您可以使用分离的父级执行查询。如果 ID 存在，查询将使用它并执行查询。

# node.js - 当发布文件大小超过nodejs和express中的限制时如何响应客户端或浏览器

> ID：11607776
> 
> 赞同：1
> 
> 时间：2012-07-23T06:58:14.487
> 
> 标签：node.js, express, connect

我从浏览器获取“POST”值到 nodejs 和 express。
我将文件发布到nodejs。
下面是代码。

```
var express = require('express')
  , routes = require('./routes')
  , http = require('http');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  //app.use(express.bodyParser());
  app.use(express.bodyParser({
      uploadDir: __dirname + '/upload',
      keepExtensions: true,
      limit: '50mb'
    }));
  app.use(express.limit('35mb'));
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.post('/', function(request, response){

    console.log(request.body.upfile);
    console.log(request.files);
    var ret = {a:'a',b:'b'};
    response.writeHead(200, { 'Content-Type': 'application/json'});
    response.write(JSON.stringify(ret));
    response.end();

});

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

它可以接收发布文件。
但我已将文件大小限制设置为 50mb。
当我发布大于 50mb 的文件时。
浏览器将继续上传文件，直到完成。
我需要的是大于 50mb 的大小。它向浏览器响应 413（请求实体太大，这就是快速错误打印出来的内容）http 代码，阻止它上传。

我已经调查了 express 源代码。
它使用位于
第 45 行的 node_modules/express/node_modules/connect/lib/middleware/limit.js 中的连接
。它将 413 和调用堆栈记录到 stdio。
我想我可以在这里使用 413 http 代码来响应浏览器。
但是当我测试它时。浏览器打印重置。
下面是修改代码。

```
module.exports = function limit(bytes){
  if ('string' == typeof bytes) bytes = utils.parseBytes(bytes);
  if ('number' != typeof bytes) throw new Error('limit() bytes required');
  return function limit(req, res, next){
    var received = 0
      , len = req.headers['content-length']
        ? parseInt(req.headers['content-length'], 10)
        : null;

    // self-awareness
    if (req._limit) return next();
    req._limit = true;

    // limit by content-length
    if (len && len > bytes) {
      var ret = {a:'bbbbb',b:'b'};  
      res.writeHead(413);
      res.write(JSON.stringify(ret));
      res.end();

      return next(utils.error(413));
    }

    // limit
    req.on('data', function(chunk){
      received += chunk.length;
      if (received > bytes) req.destroy();
    });

    next();
  };
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:54:18.313

这里发生的是第一个“如果”：

```
// limit by content-length
if (len && len > bytes) {
  var ret = {a:'bbbbb',b:'b'};  
  res.writeHead(413);
  res.write(JSON.stringify(ret));
  res.end();

  return next(utils.error(413));
} 
```

仅当浏览器发送 'content-length' 标头时才会执行，但情况并非总是如此。大多数情况下，它会回退到在这里即时计算字节数：

```
// limit
req.on('data', function(chunk){
  received += chunk.length;
  if (received > bytes) req.destroy();
}); 
```

但是正如您所看到的，当它超过允许的限制时，它只会破坏请求，从而导致来自浏览器的重置消息。你可以把它改成这样：

```
// limit
req.on('data', function(chunk){
  received += chunk.length;
  if (received > bytes) {
    var ret = {a:'bbbbb',b:'b'};  
    res.writeHead(413);
    res.write(JSON.stringify(ret));
    res.end();
  }
}); 
```

它似乎有效，但我不确定这是否是正确的方法。

# windows-8 - 在 Windows 8 Metro 风格应用程序中，如何在应用程序未运行时更新动态磁贴？

> ID：11607778
> 
> 赞同：6
> 
> 时间：2012-07-23T06:58:29.970
> 
> 标签：windows-8, live-tile

在 Windows 8 Metro 风格应用程序中，如何在应用程序未运行时更新动态磁贴？

当 OS 系统开始启动时，动态磁贴开始运行。

[http://blogs.msdn.com/b/windowsappdev/archive/2012/04/16/creating-a-great-tile-experience-part-1.aspx](http://blogs.msdn.com/b/windowsappdev/archive/2012/04/16/creating-a-great-tile-experience-part-1.aspx)

“3.在应用程序未运行时使用来自云的轮询通知来更新磁贴”

但我找不到任何示例代码。

我也尝试了 MSDN 的 PushNotificationSample，但是我不知道如何设置“服务器 URI”？

有没有人有类似的经历？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T15:15:32.543

好的，让我们来回答你！以下是帮助您入门的每一种方式和资源。你的情况我不清楚，所以我会尽量笼统。

在 Windows 8 中有四种方法可以更新动态磁贴！对于主应用程序磁贴和应用程序创建的后续辅助磁贴也是如此。

1> 首先是**应用程序**在运行时可以更新磁贴

*   [http://thesociablegeek.com/windows-8/livetiles/working-with-live-tiles-locally/](http://thesociablegeek.com/windows-8/livetiles/working-with-live-tiles-locally/)

但是，您问的是如何在它不运行时进行更新：

2> 用户可以使用他们的 Windows 8 应用程序部署**后台任务。**此后台任务会定期执行，并且可以在执行期间更新应用程序的磁贴。后台任务的最低频率为 15 分钟。Windows 8 每两小时为一个任务分配 1 个 CPU 秒。您的任务可以按您想要的频率执行，直到您用尽它的分配。

*   [http://thesociablegeek.com/windows-8/livetiles/modifying-live-tiles-in-a-background-process/](http://thesociablegeek.com/windows-8/livetiles/modifying-live-tiles-in-a-background-process/)

3> 应用程序可以在运行时打开 WNS（**Windows 通知服务**）通道。当它不运行时，Web 服务可以跨 WNS 推送磁贴更新。

*   [http://msdn.microsoft.com/en-us/library/windows/apps/hh465460.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465460.aspx)
*   [http://visualstudiomagazine.com/articles/2012/03/25/using-push-notifications-in-windows-8.aspx](http://visualstudiomagazine.com/articles/2012/03/25/using-push-notifications-in-windows-8.aspx)
*   [http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868253(v=win.10).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868253(v=win.10).aspx)

4> 可以将磁贴配置为**从 URL**拉取。定期评估来自该 URL 的 XML 的增量，并在检测到时刷新磁贴。默认情况下，瓷砖在三天后过期。

*   [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.startperiodicupdate.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.startperiodicupdate.aspx)
*   [http://msdn.microsoft.com/en-us/library/windows/apps/hh761476.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh761476.aspx)

**澄清点**：当操作系统启动时，你不能导致像磁贴更新这样的事情。一方面，在 Windows 8 中重新启动（或至少关闭）的想法实际上已被弃用。但是您的 Store 应用程序只能以上述方式执行 - 并且不能执行 StartUp 文件夹（过去）或 RegEdit/Run（过去）之类的操作。但是维护或计时器触发器可以让您非常接近。

而且，这就是答案。祝你好运，伙计！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T20:22:23.923

尝试后台任务@ [http://code.msdn.microsoft.com/windowsapps/Background-Task-Sample-9209ade9](http://code.msdn.microsoft.com/windowsapps/Background-Task-Sample-9209ade9)

# php - 无法在 netbeans 中设置 zend 框架

> ID：11607781
> 
> 赞同：0
> 
> 时间：2012-07-23T06:58:47.690
> 
> 标签：php, zend-framework, netbeans

我一直在努力开始在 netbeans 中开发 zend 框架应用程序，因为最近几天我遵循了 zend 网站上的视频教程中提到的所有内容。我的问题是我无法在 netbeans 中注册提供程序。我已将包含路径`C:xampp/php/PEAR`设置为并将 PHP 解释器设置为`C:\xampp\php\php.exe`. 但我不明白它有什么问题。

我收到此错误：

```
nb-commnands not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:04:51.567

NetBeansCommandsProvider.php 在 netbeans 安装文件夹中，例如“C:\Program Files\NetBeans 6.9\php\zend”，将文件复制到 php include_path，例如 C:\ZendFramework-1.10.5\library 或添加“ C:\Program Files\NetBeans 6.9\php\zend" 到 include_path。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:13:18.043

[尝试像这样](http://www.kilinjal.com/blog/how-configure-zend-tool-netbeans?page=show)设置 Windows 环境变量 PATH

# selenium - 使用remotewebdriver时，IE上的selenium click和sendkeys随机失败

> ID：11607795
> 
> 赞同：0
> 
> 时间：2012-07-23T07:00:01.053
> 
> 标签：selenium, jquery-selectors, selenium-grid

我正在使用远程 webdriver 在远程 VM 上驱动 IE 浏览器 [这是网格设置的一部分]

我注意到 click 和 sendkey 事件随机失败，即会话结束并且浏览器退出。这发生在脚本的不同部分，它并没有被隔离到一个区域，并且仅在执行 click 和 sendkey 事件时发生。

查看日志，它看起来好像事件实际上被触发但什么也没做，所以当它移动到下一行时它退出，因为它找不到元素。

我正在使用 IE8 并且浏览器缩放设置为 100% 。我曾尝试将 JavaScriptExecutor 与 Jqueryselectors 一起使用并得到一个 javascript 异常，因此我被迫使用单击和发送键。

有没有人面临类似的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:24:41.873

我在 iPhone 上运行远程 Web 驱动程序时遇到了类似的问题。似乎远程 Web 驱动程序不支持 jQuery 触摸事件，这意味着 JQuery 正在寻找给定数量的触摸事件，例如。点击、触摸启动、滑动等，但当您调用 click 时，Selenium 不会触发其中任何一个。我求助于使用以下Javascript：

`window.jQuery(document.elementFromPoint(198,216)).trigger('touchstart');`

您可以使用`driver.findElement(By.id(id)).getLocation()`来获取要单击的元素的位置。

然而，当我执行 Javascript 时，我确实遇到了一个异常：

> org.openqa.selenium.WebDriverException：'undefined' 不是对象命令持续时间或超时：530 毫秒构建信息：版本：'2.2.1'，修订：'16551'，时间：'2012-04-11 21:42 :35' 系统信息：os.name：'Mac OS X'，os.arch：'x86_64'，os.version：'10.7.5'，java.version：'1.6.0_37' 驱动程序信息：driver.version： RemoteWebDriver 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) 在 java.lang.reflect。 org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java: 上的 Constructor.newInstance(Constructor.java:513)175) 在 org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:459) 在 org.openqa.selenium.remote.RemoteWebDriver 在 org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:128) .executeScript(RemoteWebDriver.java:366) 在 com.alea.qa.sample.CustomTouchAction.executeScript(CustomTouchAction.java:108) 在 com.alea.qa.sample.CustomTouchAction.Touchstart(CustomTouchAction.java:76) 在 com。 alea.qa.sample.anotherRun.main(anotherRun.java:34) 原因：org.openqa.selenium.remote.ErrorHandler$UnknownServerException：'undefined' 不是对象 构建信息：版本：'2.2.1'，修订版: '16551', 时间: '2012-04-11 21:42:35' 系统信息: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.7.5', java.version: '1.6.0_37' 驱动程序信息：驱动程序版本：未知

但它仍然设法单击该元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T08:47:28.947

看看用户 Slanec 的[这个问题及其（目前是第一个也是唯一的）答案](https://stackoverflow.com/questions/11444947/selenium-webdriver-script-fails-to-execute-sendkey-in-ie-8-when-running-it-fro)。听起来很相似。简而言之，尝试调整浏览器窗口的大小。Selenium 驱动程序可能无法访问边缘附近的元素。

# android - 使用 PDF 库的示例 - Android 上的 libharu？

> ID：11607801
> 
> 赞同：0
> 
> 时间：2012-07-23T07:00:25.727
> 
> 标签：android, pdf, android-ndk, pdf-viewer, pdfview

是否有使用 libHaru 查看 PDF 文档的示例？我是 NDK 开发的新手。我不知道如何使用这个原生库。谁能给我举个例子？

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T13:43:09.107

没有例子，因为libHaru不支持阅读PDF文档。

来自官方网站：

> 目前，libHaru 不支持阅读和编辑现有的 PDF 文件，而且这种支持不太可能出现。

# c# - 结合2个通用列表

> ID：11607802
> 
> 赞同：0
> 
> 时间：2012-07-23T07:00:27.257
> 
> 标签：c#, generic-list

我有 2 个通用列表：

```
List<Student> obj1 = new List<Student>();
List<Student> obj2 = new List<Student>(); 
```

我想要组合 obj1 和 obj2：obj1+obj2。

前任：

**对象1：**

* * *

```
1          remi         sistan

2          shaki        sistan 
```

**对象2：**

* * *

```
3          nani         shahin

4          tina         shahin 
```

**对象 1 + 对象 2：**

* * *

```
1          remi         sistan

2          shaki        sistan

3          nani         shahin

4          tina         shahin 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T07:03:21.237

简单的。

```
var list1 = Enumerable.Range(0, 10).ToList();
var list2 = Enumerable.Range(10, 10).ToList();
var list3 = list1.Concat(list2).ToList();  //uses System.Linq 
```

你也可以这样做：

```
var list1 = Enumerable.Range(0, 10).ToList();
var list2 = Enumerable.Range(10, 10).ToList();
list1.AddRange(list2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:02:17.613

`obj1.AddRange(obj2)`对你来说应该足够了。

使用 [AddRange](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:02:10.520

我们怎么办

```
List<Student> newobj = obj1.Concat(obj2).ToList(); 
```

为此，您需要包括命名空间`System.Linq`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T07:05:01.893

您可以使用如下[`.concat(List list)`](http://msdn.microsoft.com/en-us/library/bb302894)方法：`List<Student> con = obj1.Concat(obj2).ToList();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T07:02:02.003

您可以使用将返回一个新的枚举的 Concatinate 扩展方法，或者简单地将 list2 添加到 list1 中，如下所示：

obj1.AddRange(obj2);

# lucene - ElasticSearch 中的排序和最新记录

> ID：11607808
> 
> 赞同：4
> 
> 时间：2012-07-23T07:00:54.150
> 
> 标签：lucene, elasticsearch

我有两个与 ElasticSearch 相关的问题。

1) 有没有办法指定我想要特定字段的结果按降序排序？等效的 SQL 查询将是：

```
select * from table1 where a="b" order by myprimarykey desc; 
```

2）如何获得第一个和最后一个（最新）记录？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T12:38:38.903

1) Elasticsearch 有相当复杂的[排序 API](http://www.elasticsearch.org/guide/reference/api/search/sort.html)，允许你控制排序顺序。因此，在 elasticsearch 中，您的 MySql 查询的等效项如下所示：

```
{
    "query" : {
        "term" : { "a" : "b" }
    },
    "sort" : [
        { "myprimarykey" : "desc"} }
    ]
} 
```

也可以在 _search [URI](http://www.elasticsearch.org/guide/reference/api/search/uri-request.html)上指定排序。

2) 要检索第一条和最后一条记录，您需要执行两次搜索`desc`和`asc`排序，并为每个检索一条记录。可以使用[Multi Search API](http://www.elasticsearch.org/guide/reference/api/multi-search.html)组合这两个查询。

# java - 通过 jni 调用在 android 上显示 toast 消息

> ID：11607811
> 
> 赞同：1
> 
> 时间：2012-07-23T07:01:36.877
> 
> 标签：java, android, cocos2d-x

我已按照[本](http://digitalsynapsesblog.blogspot.com/2011/09/cocos2d-x-launching-url-on-android.html)教程通过 jni 调用在 android 上启动 url。它运行成功。
以同样的方式，我想从我的 cocos2dx 层显示一条 toast 消息，如下所示：

```
public static void openURL(String url) {
  Toast.makeText(me,url,Toast.LENGTH_LONG).show();
} 
```

但它因错误而崩溃：`Can't create handler with thread`. 你知道我怎样才能正确显示它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:19:31.210

试试下面的代码，这肯定对你有用。

*   首先像这样在类文件中创建一个 Runnable 接口，

    ```
    Runnable runnable = new Runnable() {    

    @Override

    public void run() {
     // TODO Auto-generated method stub
    Toast.makeText(MainActivity.this, "Your url string...",Toast.LENGTH_SHORT).show();
    }}; 
    ```

*   然后创建一个 Handler 对象并调用该可运行接口，如下所示，

    ```
    Create Handler object like,

    Handler handler;

    initialize it like,

    onCreate(){
        .................
        handler = new Handler();
        .................
    }

    then call runnable whenever you want like,

    handler.post(runnable); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:09:57.957

您不能在后台线程上运行 UI 内容。您应该使用 AsyncTask 并将该代码放在执行前/后执行中，或者如果您只是显示一个 toast，您可以在 UI 线程上运行它

```
runOnUiThread(new Runnable() {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T00:29:32.060

所以这是从2012年开始的。

我想没有多少人使用 cocos2d-x。好的，这就是你在 cocos2d-x 上的做法。

编辑**AppActivity.java**

```
 public class AppActivity extends Cocos2dxActivity
    {
    private Activity activity;
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.activity = this;
        showToast();
    }

    public void showToast()
    {
        activity.runOnUiThread(new Runnable()
        {

            @Override
            public void run()
            {
                // TODO Auto-generated method stub
                Toast.makeText(activity, "Hello :D", 10).show();
            }
        });
    }

    } 
```

这在 cocos2d-x 版本 3.x 中非常好用，我对其进行了测试。当然，JNI 只会调用该方法，这必须有效。

# c - 共享内存和分叉的意外行为？

> ID：11607814
> 
> 赞同：2
> 
> 时间：2012-07-23T07:01:48.827
> 
> 标签：c, linux, fork, shared-memory

给定以下代码：

```
#include <sys/types.h>
#include <sys/shm.h>
#include <stdio.h>
#include <sys/types.h>
int main()
{
    int arr[100];
    int shmid  = shmget(IPC_PRIVATE, sizeof(int), 0600);
    int *ptr = shmat(shmid, NULL, 0);
    *ptr = 42;
    arr[0] = 1;

    if (fork())
    {
        wait(NULL);
        printf("%d, %d\n",arr[0],*ptr);
    }

    else
    {
        arr[0] = 2;
        *ptr = 1337;
    }
    return 0;
} 
```

输出是：`1,1337`。

问题：为什么不是`2,1337`？

如果孩子更新`arr`and `ptr`is his block 怎么可能？意思是，父进程更新`arr[0]`到发生`1`之前`fork()`，那么为什么更新`ptr`发生了而没有更新`arr[0]`到值`2`呢？

最好的祝福

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T07:15:57.507

`arr`不是在父母和孩子之间共享的。
之后`fork`，他们每个人都有不同的副本。所以当孩子改变时`arr`，它不会影响父母。
您的共享内存调用会影响`ptr`，但不会`arr`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T07:11:02.750

数组不是指针！数组可以存储在堆栈上。检查汇编代码。

# jquery - 我在这个简单的 jquery 代码中缺少什么

> ID：11607821
> 
> 赞同：-5
> 
> 时间：2012-07-23T07:02:18.570
> 
> 标签：jquery

```
<HTML>
<head>
<script type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">    </script>
</head>

<BODY>
<script type="text/javascript">
$(document).ready(function(){   

    $('#shareButton').click(function(){
        alert ("this is hit");
    });
});

</script>
<button id="shareButton" > Share </button>
</BODY>

</HTML> 
```

单击按钮时，它不会提醒消息“This is Hit”。

请帮忙..谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T07:04:01.433

将您的按钮移出`<script>`标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T07:03:31.870

`<button id="shareButton" > Share </button>`从`<script>`标签中删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:07:39.300

移动`<script>`标签的按钮。因为按钮标签在脚本标签内，它应该在外面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T07:04:41.060

您的按钮元素位于`<script>`标签内。将它放在脚本部分之前或之后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T07:04:49.000

按钮标签在脚本标签内，它应该在外面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T07:27:32.437

```
hi there but above code is working in on my side, 
```

我正在使用自行运行的 Firefox 13.0.1 浏览器代码。如果您看不到结果，请检查您包含的 jquery 文件是否正确，请检查您的互联网连接是否正常，以便将来自 google 的文件包含在您的 html 页面中。并将脚本放在 html 的 head 部分和 body 部分的按钮中

# c# - 如果集合可能很小，则在数据库或内存中维护集合

> ID：11607823
> 
> 赞同：0
> 
> 时间：2012-07-23T07:02:46.600
> 
> 标签：c#, asp.net, performance

我有以下课程：

```
public class MatchMaker : Hub
    {

        private readonly ISoloUserRepository soloUsers;
        public MatchMaker(ISoloUserRepository userRepo)
        {
            this.soloUsers = userRepo;
        }
         //Client Requests
        public void findNewPartner(string Name, string Country)
        {

            SoloUser soloUser = soloUsers.Users.FirstOrDefault(s => (s.Name == Name) && (s.Country == Major));
            if (soloUsers.Users.Count > 0){
                Clients.partnerRequestResult(soloUsers.Users.FirstOrDefault());
                soloUsers.Users.Remove(soloUser);
            }
            else
            {
                soloUser = new SoloUser { 
                    Name = Name,
                    Country = Country                       
                };
                soloUsers.Users.Add(soloUser);
            }

        }
    } 
```

我希望能够将我的`soloUsers`对象保存在内存中，因此每当访问此类时，它都会跟踪`SoloUser`添加到`soloUsers`存储库中的对象。我还没有完全建立我的`SoloUserRepository`班级，所以我想知道处理这个问题的最佳方法。从这个意义上说，我是否必须使用数据库来维护`SoloUser`添加到集合中的内容，或者有没有办法将此集合存储在内存中？请记住，不断添加和删除用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:20:04.043

我会说收藏品的大小无关紧要。这取决于其他因素，例如：

1.  如果您的进程关闭，您是否需要继续收集？如果不是 - 内存会正常；如果您只丢失一些数据是可以的 - 不时将内存与持久存储同步；否则 - 使用（不一定是数据库）存储。

2.  有多少线程将访问您的收藏？这是 web/cs 应用程序的一些后端，对吧？如果是这样 - 那么您将需要一些锁和事件来同步访问。关系数据库通常可以为您处理这些。

3.  如果您确定，该集合将保持较小 - 内存将没问题。如果它长大了会发生什么？将部分进程移动到其他服务器或将持久存储移动到其他服务器会更容易吗？你的例行程序会保持足够快吗？

# html - 使用应用程序缓存的问题

> ID：11607832
> 
> 赞同：0
> 
> 时间：2012-07-23T07:03:59.783
> 
> 标签：html, caching, html5-appcache

嗨，我正在尝试使用应用程序缓存。据记录，我收到如下提示：

```
This website() is asking to store data on your computer for offline use . 
```

有 3 个选项：

```
1.Allow 2\. Never for this website 3\. Not now 
```

在我的情况下，只有第 3 个选项有效。为什么？

这是我的html文件

```
<html manifest="example.appcache">
.......
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:42:08.187

那是因为你：

*   要么在您的计算机上本地托管 appcache 文件，并且您的计算机不会向浏览器返回正确的 MIME：**text/cache-manifest**

*   或者您的服务器 (IIS/Apache) 未正确配置以提供具有正确 MIME 的 .appcaches 文件。

对于 Apache，您需要将此行添加到您的 .htaccess

```
AddType text/cache-manifest .appcache 
```

对于IIS，搜索“appcache IIS MIME”可以找到教程

# arduino - Arduino编译的十六进制文件在哪里？

> ID：11607834
> 
> 赞同：34
> 
> 时间：2012-07-23T07:04:08.347
> 
> 标签：arduino

Arduino IDE 在哪里保存 Mac OS X 上的二进制文件？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-25T16:25:14.867

在 Arduino 软件中：转到*File* -> *Preferences*然后选择*Show verbose output during* -> *compilation*。

[![在此处输入图像描述](../Images/61dcedcff9441fcedefc1ab913698962.png)](https://i.stack.imgur.com/lWzPy.png)

最后，在编译时，程序会显示大量数据。在最后几行，您将找到文件的路径¹`.hex`。

* * *

¹每次路径改变！

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-09-25T12:40:09.500

Arduino 1.6.5 有一个新命令：在`Sketch`菜单下，选择`Export compiled Binary`，然后选择`Show Sketch Folder`。它在那里。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-20T14:33:42.590

Arduino IDE 使用[mktemp](http://linux.die.net/man/1/mktemp)命令在 Mac 和 Linux 上创建 temp 目录。但是，在 Mac 上，默认的 $TMPDIR env var 不是 /tmp/，因为它在 Linux 上。在 Mac 上，它位于 /var/folders 下，它是在启动时随机生成的。这会使事情变得有些复杂，但这里有一些技巧可以添加到您的工具包中（如别名、函数、shell 脚本等），以帮助您找到所需的内容。

## 查找十六进制文件

```
find $TMPDIR -name \*.hex -exec ls -lrt {} \; #<-- you need that backslash before and space after the semicolon 
```

## 查找构建目录

```
ls -ldrt $TMPDIR/build* 
```

* * *

**注意：**和导致列表分别按“时间”排序的“反向”标志`ls`。这意味着最新的将在底部。`r``t`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-26T02:01:10.620

乌达利鲁所说的。该技巧也适用于 Windows。在 XP 上，它最终位于 C:\Documents and Settings\Your_User_Name\Local Settings\Temp\buildxxxxx\（每个版本的 xxx 编号都会更改，请选择最新的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-17T03:36:55.283

arduino 网页[http://arduino.cc/en/Hacking/BuildProcess](http://arduino.cc/en/Hacking/BuildProcess) 描述

> 在“验证”期间，.hex 文件被写入 /tmp（在 Mac 和 Linux 上）或 \Documents and Settings\\Local Settings\Temp（在 Windows 上）

我正在使用 fedora19 64bit，当我检查我的 /tmp 时，创建的构建目录是 /tmp/build8102....tmp/

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-10T17:26:06.967

[我在这里](http://onlinehandsontraining.com/generating-hex-file-arduino-sketch/)用图像做了一个简单的教程

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-02-11T19:53:16.727

在下面的博客中非常精美地解释了在 [哪里可以找到 Arduino Hex 文件或输出二进制文件](https://www.kanda.com/blog/microcontrollers/avr-microcontrollers/find-arduino-hex-files-output-binaries/) 我希望这会有所帮助:)

# operating-system - 学习开发操作系统

> ID：11607835
> 
> 赞同：0
> 
> 时间：2012-07-23T07:04:09.940
> 
> 标签：operating-system

我喜欢从头开始学习操作系统开发（关于中断处理，关于 IDT，如何加载我自己的引导扇区等）你能推荐一些资源吗？
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:40:46.067

OSDev [wiki](http://wiki.osdev.org/Expanded_Main_Page)是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:18:14.607

看看Andrew Tanenbaum 的[操作系统设计和实现](http://www.amazon.co.uk/Operating-Systems-Design-Implementation-Tanenbaum/dp/0135053765/ref=sr_1_4?s=books&ie=UTF8&qid=1343027781&sr=1-4)。它包含操作系统调用 Minix 的源代码，是 Linux 的“灵感”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:41:02.777

最好的在线资源位于[OSdev Wiki](http://wiki.osdev.org/Main_Page)上。您将找到开始内核制作所需的所有信息，从工具链到 IDT 填充。

# ajax - 如何中断 ajax 调用并将控制重定向到错误页面..？

> ID：11607837
> 
> 赞同：2
> 
> 时间：2012-07-23T07:04:15.573
> 
> 标签：ajax, authentication, extjs

我使用 MVC 结构，使用 ExtJS 作为 UI。

我正在为会话检查实施过滤器。如果会话过期，我在 filter.java 中写了一个重定向，如 response.sendRedirect("error page");

但这似乎不起作用，因为我每次都在触发 ajax 调用，并且当过滤器阻碍它时，它显示为 JS 错误，而不是重定向..

无论如何要避免在每个ajax调用错误中编码？只是简单地重定向，而不是再次回到 ajax 错误部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:30:29.997

最好的办法可能是对特定返回码进行全局覆盖。数据连接对象有一个“请求异常”事件，它可以监听[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax) - 你可以利用它。

# android - 单击列表视图项后如何显示位图图像

> ID：11607838
> 
> 赞同：0
> 
> 时间：2012-07-23T07:04:36.927
> 
> 标签：android, bitmap

我对android编程很陌生。我正在开发我的第一个应用程序。

我试图显示保存在 res/drawable-mdpi 中的图像在来自先前活动中的列表视图的一小段文本下方。例如，有一个带有电视节目名称的列表视图，单击时将显示电视节目的名称，然后是该电视节目的图像。我尝试了许多不同的东西，但这是我正在使用的基本代码。文本加载它，但我想要下面的图像。

```
package com.example.listviews;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class LocationActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    // Get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra("valueLoc");

    // Create the text view
    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);

   //     ImageView image = (ImageView) findViewById(R.id.menu_settings);

    setContentView(textView);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:26:52.827

你应该建立一个列表视图：

```
//Initialize the programs array
String[]  programsArray = new String[10];

... /* Fill programsArray */

listView = ( ListView ) findViewById( R.id.programlistview );
ArrayAdapter arrayAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, programArray);
listView.setAdapter(adapter);
listView.setOnItemClickListener(new OnItemClickListener() {             
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        /* Code to show image */        
    }
}); 
```

我不能建议您使用任何代码来显示图像，因为这部分的问题太笼统了，并且代码取决于您希望如何显示图像。您可以使用 Popup、其他 Activity、同一 Activity 中的框架等等。

# iphone - 如果我从横向模式单击快照，人脸检测算法将不起作用

> ID：11607839
> 
> 赞同：1
> 
> 时间：2012-07-23T07:04:40.103
> 
> 标签：iphone, ios, ipad, ios5, ios4

我使用以下代码从图像中检测人脸：

```
-(void)markFaces:(UIImageView *)imagePick {

CIImage* image = [CIImage imageWithCGImage:imagePick.image.CGImage];
CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace 
                                          context:nil options:[NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]];
NSDictionary* imageOptions = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:6] forKey:CIDetectorImageOrientation];
NSLog(@"imageOptions %@",imageOptions);
NSArray* features = [detector featuresInImage:image options:imageOptions];

if([features count] > 0)
{
    NSLog(@"Face Found");
}
else
{
    NSLog(@"Face not Found");        
}
} 
```

如果我从横向模式单击快照，此算法将不起作用。为什么？任何帮助，将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:30:18.130

我认为问题出在这一行：

```
NSDictionary* imageOptions = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:6] forKey:CIDetectorImageOrientation]; 
```

您实际上是在告诉它仅在您传递的数字是 6 时才寻找纵向方向。

头文件中的文档说：

> // 可与 -[CIDetector featuresInImage:options:] 一起使用的选项
> 
> /* 此键的值是 1..8 中的整数 NSNumber，例如在 kCGImagePropertyOrientation 中找到的值。如果存在，将基于该方向进行检测，但返回特征中的坐标仍将基于图像的坐标。*/

选项是

![在此处输入图像描述](../Images/6f944b8113c36047c7d9a6e32cc8092d.png)

没有记录很烦人`featuresInImage:options:`（我现在必须提交一个错误，因为我已经看到了）

# c# - 在 C# 中使用 Nibbles

> ID：11607848
> 
> 赞同：1
> 
> 时间：2012-07-23T07:05:20.800
> 
> 标签：c#, java, javascript, .net, xna

嘿，我想编写一个像 XNA Color 结构或 SurfaceFormat.Bgra4444 结构这样的结构，它在 8 位字节中保存 2 个半字节。

这是我目前所拥有的......

```
/// <summary>
/// Packed byte containing two 4bit values
/// </summary>
public struct Nibble2 : IEquatable<Nibble2>
{
    private byte packedValue;

    public byte X
    {
        get { return 0; }
        set { }
    }

    public byte Y
    {
        get { return 0; }
        set { }
    }

    /// <summary>
    /// Creates an instance of this object.
    /// </summary>
    /// <param name="x">Initial value for the x component.</param>
    /// <param name="y">Initial value for the y component.</param>
    public Nibble2(float x, float y)
    {
        packedValue = 0;
    }

    /// <summary>
    /// Creates an instance of this object.
    /// </summary>
    /// <param name="vector">Input value for both components.</param>
    public Nibble2(Vector2 vector)
    {
        packedValue = 0;
    }

    public static bool operator ==(Nibble2 a, Nibble2 b) { return a.packedValue == b.packedValue; }
    public static bool operator !=(Nibble2 a, Nibble2 b) { return a.packedValue != b.packedValue; }

    public override string ToString()
    { return packedValue.ToString("X : " + X + " Y : " + Y, CultureInfo.InvariantCulture); }

    public override int GetHashCode()
    {return packedValue;}

    public override bool Equals(object obj)
    {
        if (obj is Nibble2)
            return Equals((Nibble2)obj);
        return false;
    }

    public bool Equals(Nibble2 other)
    {return packedValue == other.packedValue;}
} 
```

如您所见，我的属性和构造函数没有被暗示。因为这是我遇到麻烦的部分。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T07:23:24.140

基本上，您只需要记住什么是高半字节和低半字节。只需用二进制 1111（十进制 15）屏蔽即可获得低半字节。`byte`可以通过右移 4来获得高半字节（因为它是无符号的）。其余的只是位数学。

```
// assume x is the low nibble
public byte X
{
    get { return (byte)(packedValue & 15); }
    set { packedValue = (packedValue & 240) | (value & 15); }
}

// assume y is the high nibble
public byte Y
{
    get { return (byte) (packedValue >> 4); }
    set { packedValue = (value << 4) | (packedValue & 15); }
} 
```

但是，我无法帮助您：

```
public Nibble2(float x, float y)
{
    packedValue = 0;
} 
```

因为那是 64 位，并且您希望将其放入 8 位。您需要**更**具体地说明您想要对这些值做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:10:45.043

考虑以下字节值：

```
10101100 
```

要读取一个字节的高位，您应该将字节向右移动：

```
10101100 (original)
01010110 (shifted one bit)
00101011  
00010101 
00001010 (shifted four bits) 
```

您可以使用移位字节`return (byte)(packedValue >> 4);`

要仅读取低位，您只需使用 AND 操作消除高位：

```
10101100 
00001111 AND
--------
00001100 
```

您可以通过使用对值执行此 AND 操作`return (byte)(packedValue & 0xf);`

可以通过清除目标半字节然后简单地添加输入值来设置这些值（如果设置高半字节，则向左移动）：

```
packedValue = (byte)((packedValue & 0xf0) + (lowNibble & 0xf));
packedValue = (byte)((packedValue & 0xf) + (highNibble << 4)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:10:49.287

如果您将输入值与这样填充的字节相加`00001111`，即 dec 中的 15。您保留要保存的部分。然后，您必须将 Nibble2 的左侧部分左移 4 个字节以存储在 packedValue 字节中。

```
private byte x = 0;
private byte y = 0;

public byte X
{
    get { return x; }
    set { x = value}
}

public byte Y
{
    get { return y; }
    set { y = value }
}

private byte packedValue 
{
    get { return (x & 15 << 4) | (y & 15); }
} 
```

# selenium - 要调用的 javascript 函数，以便在确认对话框中单击“确定”

> ID：11607853
> 
> 赞同：5
> 
> 时间：2012-07-23T07:06:06.890
> 
> 标签：selenium

我正在 Selenium IDE 中编写一个自动化测试来测试我们的一个应用程序。我们的应用程序会抛出其中一个确认对话框“您确定要继续吗”。单击确定或取消

Selenium 不支持单击这些对话框。我尝试了以下 SeleniumIDE 功能但没有成功：

```
chooseOkOnNextConfirmation
chooseOkOnNextConfirmationAndWait 
```

我可以在 SeleniumIDE 中调用一个 JavaScript 函数来执行此操作，还是我不走运。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T05:00:52.767

如果您正在使用 IDE，则代码应该是

```
Command : assertConfirmation
Target : Are you sure you want to continue? 
```

这肯定会帮助你..

如果您正在处理`WebDriver`，那么代码应该是

```
driver.switchTo().alert().accept(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:04:16.123

在使用 Selenium 时，您将不得不使用 JavascriptExecutor 来按下 OK 或 Cancel 按钮。您可以尝试以下方式-

```
((JavascriptExecutor)driver).executeScript("window.confirm = function(msg){return true;};"); 
```

那当然是，没有看到你的任何代码

# c - 当 i 为 512 时，“i == (2^8)”的条件检查失败？

> ID：11607854
> 
> 赞同：17
> 
> 时间：2012-07-23T07:06:07.407
> 
> 标签：c

这是一个打印2到8的幂的小程序。但是在8之后它并没有退出。请解释原因。

```
#include <stdio.h>
#include <unistd.h>
int main(void)
{
        unsigned int i=1;
        while(1) {
                i = i<<1;
                printf("i = %d\n",i);
                if(i==(2^8))
                        break;
                sleep(1);
        }
        printf("Exited While loop.. \n");
        return 0;
} 
```

当 i = 2^8 时，循环不会退出。我的输出是这样的：

```
i = 2
i = 4
i = 8
i = 16
i = 32
i = 64
i = 128
i = 256
i = 512 (Should have Exited here. But the program is continuing. Why?)
i = 1024
i = 2048
i = 4096.... 
```

**编辑 ：**

感谢您回答 ^ 是 XOR 运算符。但是现在下面的代码表现得很奇怪。请解释。

```
#include <stdio.h>
int main(void)
{
        if((2)^8 == 1<<8) {
                printf("True.. \n");
        } else {
                printf("False..!!");
        }
        return 0;
} 
```

上面的函数程序打印 true。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-23T07:08:56.877

在 C 中，^ 运算符表示 XOR（按位异或）。

要获得 2 的 8 次方，您需要使用循环（循环中的 res *=2），或在 math.h 中舍入 pow 函数（请注意，math.h 函数返回 float - 因此不会t 等于整数）。

当然，最简单的方法是按位移位。

**关于编辑部分：**

[欢迎来到运算符优先](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)的精彩世界。发生的情况是 == 比 ^ 具有更高的优先级，因此条件计算为 2^0，即 2，这是真的。

要使其工作，您需要添加括号：

```
if ( (2^8) == (1<<8) ) ... 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-23T07:09:33.603

问题是`^`按[位异或](http://en.wikipedia.org/wiki/Bitwise_operation#XOR)运算符，而不是提高功率。让我们`2^8`以按位格式解释：

```
2 = 0010
8 = 1000
======== xor
10= 1010 
```

所以结果，一点一点地应用异或，是10，这永远不会发生，所以你的循环永远不会退出。如果您使用`pow(2,8)`并舍入为整数，则可以使单元测试正常工作。

另一个信息，在这个例子中可能不是这种情况，但在处理浮点值时最好避免严格相等，与 epsilon 相比更好。

**对于您的编辑：** 确保优先级：

```
if((2^8) == (1<<8)) 
```

正如预期的那样，这将返回错误。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-23T07:09:25.583

`2^8`是`2 XOR 8`，即。10，而不是 256。因此你的循环不会停止。您可能想`(1<<8)`专门检查其中一个或 256。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T07:10:17.423

`^`不是 c 中的幂，它的意思是`XOR`. 2^8==10 并且在此代码中它不等于 i 。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T07:11:39.883

^ 是按位异或，您要查找的函数是 math.h 中的 pow :)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-23T07:36:37.860

**对于您的编辑部分**

```
#include <stdio.h>
int main()
{
        if((2^8) == (1<<8)) {
                printf("True.. \n");
        } else {
                printf("False..!!");
        }
        return 0;
} 
```

它将返回**False**。

# jquery - 垂直滚动的Jquery数据表列标题宽度问题

> ID：11607858
> 
> 赞同：1
> 
> 时间：2012-07-23T07:06:18.347
> 
> 标签：jquery, datatables

我第一次使用数据表并被以下解释的问题所震惊。当我尝试包含垂直滚动时，列标题会丢失所有 itz 对齐，所有列宽都会减小，因此会得到标题行的长度是整个桌子的一半。

我注意到的另一件事是，在第 th 类样式中，宽度为 0px，任何人都可以理解为什么会这样吗？我已经包含的 js 部分，

```
$(document).ready(function() {

                $.ajax({
                    type : "GET",
                    url :"",

                    dataType : "json",
                    success : function(data) 
                    {
                            $('#customers').dataTable(
                            {
                            "aaData":data.response,
                            "aoColumns": [
                            { "sTitle": "Rendering Engine", "bSortable": false},
                            { "sTitle": "Broswers", "bSortable": false },
                            { "sTitle": "Platform", "bSortable": false }
                            ],
                         "sScrollY": "250px",
                        "iDisplayLength": 200,
                        "bFilter": false,
                        "bLengthChange": false,
                        "bAutoWidth": false
                           });
                    }   
                });
            }); 
```

和html部分

```
<table id="customers"></table> 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-17T18:52:07.600

我通过使用带有溢出的 div 包装“dataTable”表解决了这个问题：auto

```
.dataTables_scroll
{
    overflow:auto;
} 
```

并在你的 dataTable 初始化后添加这个 JS

```
jQuery('.dataTable').wrap('<div class="dataTables_scroll" />'); 
```

不要使用 sScrollX 或 sScrollY，然后删除并自己添加一个 div 包装器，它做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:01:29.253

```
 success : function(data) 
                {
                        $('#customers').dataTable(
                        {
                        "aaData":data.response,
                        "aoColumns": [
                        { "sTitle": "Rendering Engine", "bSortable": false},
                        { "sTitle": "Broswers", "bSortable": false },
                        { "sTitle": "Platform", "bSortable": false }
                        ],
                     "sScrollX": "100%",
                     "sScrollY": "250px",
                    "iDisplayLength": 200,
                    "bFilter": false,
                    "bLengthChange": false,
                    "bFilter": true,
                    "bSort": true,
                    "aLengthMenu": [50,100,250,500],
                    "sPaginationType": "full_numbers"
                       });
                }   

  //use this style
 <style type="text/css">

       .dataTables_length {
       float: left;
       width: 40%;
        }

    .dataTables_filter {
      float: right;
      text-align: right;
      width: 50%;
      } 

  .dataTables_info {
   float: left;
   width: 50%;
  vertical-align: middle;
  /*min-height: 100%;*/
  /*position: absolute;*/
  }
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:59:24.490

问题是你的桌子是空的。我过去见过类似的问题，它们总是由您的表没有`<thead>`/引起的`<tbody>`。

将您的 HTML 更改为：

```
<table id="customers">
    <thead>
    </thead>
    <tbody>
    </tbody>
</table> 
```

让我知道发生什么事。

# ios - 带有 OSC 的音符持续时间，或连续音符开/关

> ID：11607862
> 
> 赞同：0
> 
> 时间：2012-07-23T07:06:38.080
> 
> 标签：ios, midi, duration, osc

我正在为我的 iOS 音乐鼓垫类型应用程序添加 OSC 功能。我可以在敲击打击垫时发送字符串，然后使用 OSCulator 映射到 MIDI，使用 Logic Pro 进行测试并正常播放音符，但我想知道如何给 Logic Pro 音符持续时间，这将如何完成？

目标是让音符一直持续到按下打击垫，所以在实际按下打击垫之前你不会知道持续时间。计划在未来实现 CoreMIDI，但从 OSC 和 OSCulator 开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:25:25.493

按试验和错误排序，添加 Int 1 然后添加 Int 0 来停止就可以了，但是如果您有不希望这种行为的焊盘，添加 Int 会强制您也有 Int 0，所以在这些情况下不要'不要添加一个 Int。

```
OSCMessage *msg = [OSCMessage createWithAddress:[NSString stringWithFormat:@"/Pad%i", i + 1]];

if (stick)
    [msg addInt:1];             

[outPort sendThisPacket:[OSCPacket createWithContent:msg]]; 
```

然后关闭它：

```
if (stick)
{
    OSCMessage *msg = [OSCMessage createWithAddress:[NSString stringWithFormat:@"/Pad%i", i + 1]];

    [msg addInt:0]; 

    [outPort sendThisPacket:[OSCPacket createWithContent:msg]];

} 
```

这使用 VVOSC/vvopensource。起初它不起作用，但随后删除了所有 OSCulator 设置并重新配置，然后它就起作用了。

# html - 相对于容器定位内联元素

> ID：11607867
> 
> 赞同：2
> 
> 时间：2012-07-23T07:06:52.933
> 
> 标签：html, css, positioning

我希望 HTML 中的元素相对于它的父元素定位，类似于[这个问题](https://stackoverflow.com/questions/104953/position-an-html-element-relative-to-its-container-using-css)，但使用内联。

我有[一个小提琴](http://jsfiddle.net/vVBmQ/)要演示。对于此示例，我希望文本框覆盖文本（使用`margin:0;`，而不是负值。

可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:02:55.227

尝试使用`position:relative;`并`position: absolute;`喜欢这样：

[我的小提琴](http://jsfiddle.net/vVBmQ/2/)

或者只是使用`left: 0px;`而不是，`margin`但要确保父母`div`是`positioned` `relative`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:09:42.663

```
<div>
    <input value="Text" />
</div>
​ 
```

还是您将其用于输入以外的其他用途？

由于您已经在使用绝对定位，您可以只做`left: 0`.

# c++ - boost线程锁错误

> ID：11607872
> 
> 赞同：1
> 
> 时间：2012-07-23T07:07:23.243
> 
> 标签：c++, multithreading, boost, locking

我有这个给出错误的代码：

```
 error this boost::lock_error
 error this boost::lock_error
 error this boost::lock_error
 error this boost::lock_error
 error this boost::lock_error 
```

由于我不知道错误在哪里，我将尝试复制代码：

主要的

```
 boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool>  tuple = dups.back();
  ppa::Node *n = boost::get<0>(tuple);
  cout << "creating other threads" << endl;
  for ( int i = 0; i < 5; ++i )
  {
    cout << "making  thread " << i << endl;
    g.create_thread( boost::bind( threaded_function, boost::ref(mf), 
                                    boost::ref(n) ));
  } 
```

线程

```
 void threaded_function(Model_factory &mf, ppa::Node *root)
  {
    try 
    {   
      while(true)
      {
        boost::mutex::scoped_lock lock(result_mutex);

        if(wait.empty())
        {
          lock.unlock();
          break;
        }
        else 
        {
          lock.lock();
          if(!running_jobs.empty())
          {
            cout << "vector wait size = " << wait.size()   << "\n";
            cout << "running size   = " << running_jobs.size() << "\n";
            cout << "done size  = " << done.size()   << "\n";
            boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> tuple;
            tuple = running_jobs.back();
            running_jobs.pop_back();
            ...
          }
          ...
        }
        ...
      }
    }
    catch (boost::lock_error& le)
    {
      cout << "error this " << le.what() << endl;
    }
  } 
```

该代码用于我尝试并行执行的对齐程序中，它在不同的线程中一一对齐元组，直到等待列表（向量等待）为空。谢谢。我做了一些事情，我`lock.unlock()`在每个 if 和 else 之前都放了一个，现在它正在工作，但是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:53:23.293

您正在锁定互斥锁两次。

```
boost::mutex::scoped_lock lock(result_mutex); 
```

为您锁定互斥锁。当它超出范围时它也会解锁它，因此您不需要自己解锁它。

所以以下几行是不必要的：

```
lock.lock();
lock.unlock(); 
```

# java - java类路径中的转义通配符处理

> ID：11607873
> 
> 赞同：1
> 
> 时间：2012-07-23T07:07:28.513
> 
> 标签：java, windows, shell, cmd

由于通配符处理，下一个代码打印当前目录中每个文件的属性。

```
c:\work>attrib * 
```

我需要在我的脚本中禁用通配符处理。转义符号不起作用：

```
c:\work>attrib "*"
c:\work>attrib ^* 
```

两者都给你相同的。

我需要禁用通配符处理才能启动接受通配符作为参数的应用程序。

爪哇

```
import java.util.Arrays;

public class A {

    public static void main(String[] args) {
        System.out.println(Arrays.deepToString(args));
    }
} 
```

命令

```
C:\work\temp>start.bat

C:\work\temp>java -cp playground.jar A *
[activation.jar, file.txt, playground.jar, playground.jar.bak, start.bat, test.bat]

C:\work\temp>start.bat

C:\work\temp>java -cp playground.jar A "*"
[activation.jar, file.txt, playground.jar, playground.jar.bak, start.bat, test.bat]

C:\work\temp>start.bat

C:\work\temp>java -cp playground.jar A "* foo? *bar*"
[* foo? *bar*] 
```

* * *

找到解决方法。“*;” - 不是无效的文件夹名称，而是有效的类路径：

```
java -cp "*;" A 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T07:34:41.843

正如 Ignacio Vazquez-Abrams 已经指出的那样，在 Windows 上，shell*不会进行通配符扩展*。这取决于应用程序。因此，您无法对 shell 做任何事情来阻止它做一些它一开始就不会做的事情。

```
> echoargs.exe *
arg 1: * 
```

因此，如果您的应用程序中的参数以某种方式损坏，那么这绝对不是 shell 的错。

**编辑：**显然Java“有帮助”复制了Unix行为并为您扩展了所有通配符。上面`echoargs`是用 C# 编写的，这就是问题没有显示的原因。

好的，进一步挖掘揭示了[这个 2004 年的错误报告。这是因为](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5036373)[Java](http://msdn.microsoft.com/en-us/library/8bch7bkk%28v=vs.71%29.aspx)与不同版本`setargv`的. 这发生在 Java 甚至看到参数之前，因为这是 C 运行时启动代码。

此外，据我所知，这在任何地方都没有记录，上面链接的错误 5036373 甚至指出*应该*记录它。显然，没有解决办法。即使它不可能将文字通配符传递给 Java 程序。显然，Windows 确实只是 Java 的二等目标，他们不在乎（否则它会破坏太多程序，但我不确定有多少程序明确依赖这种行为）。

# windows - 在 Windows 7 上将数据迁移到另一个实例

> ID：11607875
> 
> 赞同：1
> 
> 时间：2012-07-23T07:07:33.993
> 
> 标签：windows, plone

我想将数据从一个 Plone 实例迁移到另一个。我是克隆新手。
非常感谢任何用于迁移的 URL 或步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:50:00.300

当您想要移动一个完整的实例时，您需要复制与备份相同的数据。

这意味着您需要复制：

1.  对象`Data.fs`存储文件
2.  `blobstorage`目录_
3.  除了 Plone 之外，您的所有自定义和已安装的软件包。

请参阅[Plone 常见问题解答](http://plone.org/documentation/faq/plone-backup-move/)和[备份（和恢复）Plone 实例](https://stackoverflow.com/questions/1851996/backing-up-and-restoring-a-plone-instance)。

# php - 除 .php 文件外的所有文件的标头在 1 个月内到期

> ID：11607879
> 
> 赞同：0
> 
> 时间：2012-07-23T07:07:42.577
> 
> 标签：php, apache, http, caching, expires-header

为了加快我的网站速度，我已经阅读了有关`Expires`标题、如何在 Apache 中实现它以及如何仅对某些文件类型执行此操作的信息。但是，我想为除文件（网页）以外的**所有文件** 设置一个月的有效期。`.php`

那么我该怎么做`.htaccess`呢？我有一个 PHP 脚本，用于`filemtime`在编辑 CSS、JS 文件时更改它们的文件名，以便重新下载它们（例如，如果文件`xxxxxxx`在 Unix 时间发生更改，它会将文件名更改`/resource.css?recache=xxxxxxxx` 为请求时的文件名）。所以这被照顾了。由于图像等不经常更改，我希望将它们全部缓存一个月。

另外，浏览器对`Expires`标头的支持是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:16:12.777

在 Apache 配置文件中使用[mod_expires 。](http://httpd.apache.org/docs/current/mod/mod_expires.html)例如：

```
# Turn on Expires and set default to 0
ExpiresActive On
ExpiresDefault A0

# Set up caching on media files for 1 month
<filesMatch "\.(flv|ico|pdf|avi|mov|ppt|doc|mp3|wmv|wav|gif|jpg|jpeg|png|swf)$">
ExpiresDefault A2592000
Header append Cache-Control "public"
</filesMatch> 
```

[你可以在这里](http://www.askapache.com/hacking/speed-site-caching-cache-control.html)阅读更多

# css - 如何限制div的宽度？

> ID：11607881
> 
> 赞同：0
> 
> 时间：2012-07-23T07:07:48.383
> 
> 标签：css, html, width

我在我的网站上放了一个 Google+ 按钮。这是代码：

```
<div id="gplus"><div class="g-plusone" data-size="medium" data-annotation="inline" data-width="120"></div></div>

#gplus {
position: fixed;
bottom: 40px;
left: 5px;
z-index: 1;
width: 120px;
overflow: hidden;
} 
```

但是谷歌放入inner div的iframe是1200px宽，覆盖内容。如何限制它？我固定了#gplus 的宽度并添加了溢出：隐藏但它没有帮助。：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:18:46.960

您可以添加新的样式定义以使溢出继承到内部 div。例如。

```
 #g-plusone {overflow:inherit;} 
```

这在 IE7 中不起作用。

您可能会发现需要向生成的 iframe 添加类定义，例如为

```
 #gplus iframe {width:120px;} 
```

这会将 #gplus div 中的任何 iframe 设置为 120 像素的宽度。

**更新**：查看您的网站后，以下样式应该可以解决问题

```
 #gplus iframe {min-width:120px !important;} 
```

Google 正在设置其框架的最小宽度，但您可以通过设置最小宽度并使用重要的覆盖来覆盖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:21:02.157

`max-width: 500px;`或您想要的任何最大宽度，这样您就可以限制或控制元素的宽度。

# c++ - 为什么这会失败

> ID：11607882
> 
> 赞同：-4
> 
> 时间：2012-07-23T07:07:51.143
> 
> 标签：c++

我被卡住了，无法弄清楚为什么下面的代码没有运行。我对 c/c++ 相当陌生。

```
#include <iostream>
int main(){
    const char *arr="Hello";
    const char * arr1="World";

    char **arr2=NULL;
    arr2[0]=arr;
    arr2[1]=arr1;

    for (int i=0;i<=1;i++){
        std::cout<<arr2[i]<<std::endl;
    }
    return 0;
} 
```

因为这运行得很好

```
#include <iostream>
int main(){

    const char *arr="Hello";
    const char * arr1="World";

    char *arr2[1];
    arr2[0]=arr;
    arr2[1]=arr1;

    for (int i=0;i<=1;i++){
        std::cout<<arr2[i]<<std::endl;
    }
    return 0;
} 
```

为什么是这样？并且通常如何迭代一个 char **？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T07:13:22.980

`char *arr2[1];`是一个数组，其中包含一个类型为“char 指针”的元素（在堆栈上分配）。`arr2[0]`是该数组中的第一个元素。`arr2[1]`未定义。

`char **arr2=NULL;`是指向“char 指针”的指针。请注意，堆栈上*没有*分配内存。`arr2[0]`未定义。

最重要的是，**您的两个版本都不正确。**第二个变体“运行得非常好”只是一个提醒，错误的代码*看起来*可以正确运行，直到后来疏忽的编程真的*咬*了你，并且因为你破坏了堆栈而让你浪费了数小时和数天的调试时间。

**编辑：**代码中的进一步“罪行”：

1.  字符串文字是 类型的`char const *`，你不要忘记`const`.
2.  缩进函数代码是常见的（也是推荐的）做法。
3.  （恕我直言）在各个地方添加空格以提高可读性是（例如 post `(`、 pre `)`、 pre 和 post 二元运算符，`;`在`for`语句中的 post 等）的好习惯。口味不同，并且有一个声音派别实际上*鼓励*尽可能地留出空间，但你甚至没有始终如一地*这样*做- 并且**普遍**推荐*一致性。* 尝试像[astyle](http://astyle.sourceforge.net/)这样的代码重新格式化程序，看看它们可以为可读性做些什么。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:11:20.770

这是不正确的，因为 arr2 没有指向任何东西：

```
char **arr2=NULL;
arr2[0]=arr;
arr2[1]=arr1; 
```

正确方法：

```
char *arr2[2] = { NULL };
arr2[0]=arr;
arr2[1]=arr1; 
```

这也是错误的，arr2 的大小为 1：

```
char *arr2[1];
arr2[0]=arr;
arr2[1]=arr1; 
```

正确的方法是一样的：

```
char *arr2[2] = { NULL };
arr2[0]=arr;
arr2[1]=arr1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:25:59.820

```
char **arr2=NULL; 
```

是指向指向 NULL 的指针的指针，而

```
char *arr2[1]; 
```

是一个指针数组，已经为两个项目分配了空间。

在指向指针的指针的第二种情况下，您正试图将数据写入不存在的内存位置，而首先编译器已经为数组分配了两个内存插槽，因此您可以将值分配给这两个元素。

如果您非常简单地考虑它，C 指针只不过是一个整数变量，其值实际上是一个内存地址。因此，通过定义`char *x = NULL`，您实际上是在定义一个值为 NULL（即零）的整数变量。现在假设你写了类似的东西`*x = 5`；这意味着转到存储在 x (NULL) 中的内存地址并在其中写入 5。由于没有地址为 0 的内存槽，所以整个语句都失败了。

老实说，自从我上次不得不处理这些东西以来已经有很多年了，但是这里的[这个小教程](http://www.learncpp.com/cpp-tutorial/68-pointers-arrays-and-pointer-arithmetic/)可能会清除 C++ 中数组和指针的运动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T07:13:12.383

简单地说，指针的声明不会保留任何内存，而数组的声明则不会。

在您的第一个示例中，您的行 char **arr2=NULL 声明了一个指向字符指针的指针，但未将其设置为任何值 - 因此它被启动指向零字节（NULL==0）。当您说 arr2[0]=something 时，您正试图在这个不属于您的零位置放置一个值 - 因此崩溃。

在您的第二个示例中：声明 *arr2[2] 确实为两个指针保留了空间，因此它可以工作。**

# java - 在片段而不是主要中具有按钮操作

> ID：11607888
> 
> 赞同：1
> 
> 时间：2012-07-23T07:08:48.997
> 
> 标签：java, android

我有一个使用标签的 Android 应用程序（使用 ActionBarSherlock）。所以我的主要活动为我创建了选项卡，然后我从那里加载片段布局。

在我的`MainActivity.java`我创建一个选项卡（这只是一个片段）：

```
mTabsAdapter = new TabsAdapter(this, mViewPager);

mTabsAdapter.addTab(
    bar.newTab().setText("Fragment 1"),
    MainMenuFragment.class, null); 
```

我的 MainMenu.java 看起来像这样：

```
public class MainMenuFragment extends SherlockFragment
{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState)
    {
        View view = inflater.inflate(R.layout.mainmenu_fragment, container, false);

        return view;
    }

    public void showMainMenu(View view)
    {
        Log.e("app", "olol: button!"); // never called!!
    }
} 
```

* * *

这是`mainmenu_fragment`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000" >

    <Button
        android:id="@+id/btnMenu"
        android:layout_width="170dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="41dp"
        android:text="@string/mainmenu"
        android:onClick="showMainMenu" />
</RelativeLayout> 
```

现在我所要做的就是将方法`showMainMenu(View view)`放在某个地方。我认为这会放在相应的 java 文件中（在我的例子中为 MainMenuFragment.java）。但它仅在我将方法放入 MainAvtivity.java 文件时才有效。

这意味着我所有来自各种片段布局的按钮操作都将放在一个（主）java文件中。为什么我不能简单地将它放在调用片段布局的java文件中..？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:20:19.663

现在我要做的就是将方法 showMainMenu() 放在某个地方——这是错误的。请参考[android:onClick](http://developer.android.com/reference/android/view/View.html#attr_android%3aonClick)的文档：

例如，如果您指定 android:onClick="sayHello"，则必须声明**您的上下文**（通常是您的 Activity）的 public void sayHello(View v) 方法。

似乎您无法将回调放置在*某处*，因为框架将无法找到该回调。如果您在 Activity 中定义它（实际上是一个 Context），则 View 可以找到它。实际上，View.java 包含以下代码：

```
case R.styleable.View_onClick:
    if (context.isRestricted()) {
        throw new IllegalStateException("The android:onClick attribute cannot " + "be used within a restricted context");
    }

    final String handlerName = a.getString(attr);
    mHandler = getContext().getClass().getMethod(handlerName, View.class);
    ...
    mHandler.invoke(getContext(), View.this); 
```

似乎这是使用当前 android:onClick 属性规范调用布局文件中定义的回调的唯一可能方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T07:51:31.340

简短的答案是（就像已经指出的那样），你不能。

唯一的方法是创建一个 onClick 偶数监听器。在 onCreate 方法的 MainMenuFragment.java 中，执行以下操作：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    View view = inflater.inflate(R.layout.scan_fragment, container, false);

    Button menuButton = (Button)view.findViewById(R.id.btnMenu);
    menuButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Log.e("app", "onclick listener");
        }
    });

    return view;
} 
```

您可以从布局 xml 中删除 onClick 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:35:21.757

我使用以下方法解决了这个问题：

片段 xml 包含

`android:onClick="myFunction"`

活动包含

```
public void myFunction(View v)
{ getSupportFragmentManager().findViewById/Tag(...).myFunction(v); } 
```

然后片段代码可以如下实现以访问本地数据

```
public void myFunction(View v) {...} 
```

希望这可以帮助。

# javascript - 在 Panel / Div 对象下隐藏 iFrame

> ID：11607893
> 
> 赞同：1
> 
> 时间：2012-07-23T07:09:10.433
> 
> 标签：javascript, asp.net, css

正如您在我的图像中看到的那样，我有 Pdf（在 iFrame 中）以及 Jquery 滑动菜单（在 Div/Panel 中）以及另一个 iFrame。我想隐藏滑动菜单 iFrame（添加的原因面板在 iframe 下，因为作为 pdf 查看器行为面板将自己隐藏在 Pdf 下并且不会在表单上可见）。为此，我尝试设置 display attribute = none; 这不起作用:(有没有办法隐藏 iFrame 但面板应该在它的位置。

![在此处输入图像描述](../Images/60c5c2f759f5fb21ae626f46eab7b1b6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:42:50.480

使用萤火虫来检测你是否在监视表达式中获取元素..你应该像这样访问 iFrame

```
<form name="formname" .... id="form-first">
<iframe id="one" src="iframe2.html">
</iframe>
</form>

function iframeRef( frameRef ) {
return frameRef.contentWindow ? frameRef.contentWindow.document : frameRef.contentDocument
}

var inside = iframeRef( document.getElementById('one') ) 
```

# php - 使用 PHP 读取 XLS 以在 MySQL 中导入

> ID：11607905
> 
> 赞同：2
> 
> 时间：2012-07-23T07:10:10.777
> 
> 标签：php, mysql, xls, xlsx

我正在创建一个模块，用户可以上传“.xls”文件，然后必须使用 PHP 将其插入 MySQL。服务器是免费的 bsd 并且现在拥有所有权限。我尝试过 PHPexcelReader，但它不起作用。你能建议我一些可以完成工作的东西。ps：用phpexcelreader写的是'文件名xxxxxxx它不可读'，但它是可读的并且可以下载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:27:18.117

文件名不可读？是否有可能文件已重命名，而您仍在使用旧名称？

那么我使用 PHPExcel，它可以在这个链接 [PHPExcel](http://phpexcel.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:10:33.613

您可能需要将完整的绝对路径传递给 XLS 文件，例如：

```
/var/www/testing.somesite.com/uploads/xxxxxxx.xls 
```

或者只是 CWD 到包含该文件的目录，然后再尝试访问它。

# qt - 如何从 Qt 主窗口类中分离标签页的功能

> ID：11607907
> 
> 赞同：4
> 
> 时间：2012-07-23T07:10:19.183
> 
> 标签：qt, tabwidget

在我的应用程序中，我有 QTabWidget 和 3 个页面，其中设计了控件，使用 Qt creator 2.4.1。现在我想通过创建新类将这些页面的功能与 MainWindow 分开。

我的问题是如何在我的新类中访问 MainWindow::ui 实例？这是私下声明的。

它是一个 qt 桌面应用程序，平台是 qt 4.8.1/win 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:26:37.947

您不能在选项卡中直接访问 MainWindow 的 ui。由于您的 QTabWidget 是 MainWindow 的子级（这就是它应该实现的方式，并假设您这样做了）。

但是您可以通过 Signals 和 Slots 来实现这一点。您可以通过将插槽写入从各个选项卡发出的信号来在 MainWindow 中执行操作。

**或者**

您可以在 MainWindow 上编写一个方法，该方法将在其 UI 上进行操作。并从选项卡小部件中调用它 -

```
this->parent->parent->uiMethod();

// this(Tab) -> parent(QTabWidget) -> parent(MainWindow) -> [related method] 
```

# random - 随机数算法

> ID：11607908
> 
> 赞同：0
> 
> 时间：2012-07-23T07:10:22.563
> 
> 标签：random, numbers

我必须为抽奖实现一个算法。问题是我希望一些参与者有更多的机会，因为他们有更多的积分。我怎样才能做到这一点？我想简单地把它们放在抽奖中很多次，但似乎不合法。你知道任何可以做到这一点的算法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-28T21:50:30.770

伪算法：

```
winnerTicket <- a random number between zero and sum ticket count - 1
currentTicket <- 0
For each participant in participants ordered by id
    If winnerTicket - currentTicket > participant.ticketCount
        currentTicket += participant.ticketCount
    Else
        return participant 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:13:19.487

为什么这不是“合法的”。如果您将您的机会数量基于点数，您可以根据他的点数在抽奖中添加该人 X 次。那个人的机率增加。

我会以这种方式解决它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-28T22:01:16.263

你有一个映射：`participant => number of chances`. 在许多编程语言中，您可以像这样声明映射或字典：

```
{"player1": 2, "player2": 5, ... many more like these} 
```

所以你可以像这样迭代：

```
accumulatedMap = {} #an empty map
total = 0
for each pair of key:count in the mapping:
    total = total + count
    accumulatedMap[key] = total

#now, get random and calculate
element = random between 1 and total, inclusive.
for each pair of key:accumulated in the mapping:
    if element <= accumulated:
        return key
#at this point, in the worst case the last key was returned. 
```

此代码只是一个示例。请记住，映射在迭代时并不总是保持插入顺序。

# adk - 下载 Microsoft MediaRoom ADK (SDK)

> ID：11607909
> 
> 赞同：0
> 
> 时间：2012-07-23T07:10:24.663
> 
> 标签：adk

我是 Microsoft MediaRoom 的新手。我想下载 Microsoft MediaRoom ADK(SDK)。我尝试了很多，但没有找到任何下载链接。所以请任何人都可以给我一个链接。

MediaRoom 用于开发机顶盒应用程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:43:28.003

您将在[http://mediaroomsds.microsoft.com](http://mediaroomsds.microsoft.com)下找到所有必要的文件。但是，您需要一个有效的 Microsoft 帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:53:39.843

这是我的投递箱链接的 MicrosoftMediaroomADK.msi。让我知道你是否能得到它。

[https://dl.dropboxusercontent.com/u/61494529/ADK/MicrosoftMediaroomADK.msi](https://dl.dropboxusercontent.com/u/61494529/ADK/MicrosoftMediaroomADK.msi)

我想是MR20。

# mysql - mytop（一个mysql监控工具）线程视图不考虑其他用户在查询中提交的查询

> ID：11607913
> 
> 赞同：0
> 
> 时间：2012-07-23T07:10:43.937
> 
> 标签：mysql, monitoring

我运行了一个将 2000 次插入提交到表中的程序。但是在 mytop 线程 veiw 中，每次刷新 mytop 视图时，跟踪查询数量的“查询”项仅增加 2，这就是 mytop 提交自身以从 mysql 获取信息的查询数量。不知道为什么不添加插入查询的数量...。

另一件事是我的命令视图只有几个项目

```
 show status 

show variables 

show processlist

    set option

   Compression 
```

但它被告知有更多，例如选择查询的数量（http://www.opensourcetutorials.com/tutorials/Server-Side-Coding/Administration/mytop/page4.html）。我又不知道为什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:26:25.483

我不使用 mytop。但要让监控获得其统计信息，它必须查询服务器本身。通过查看屏幕截图，mytop 使用“SHOW FULL PROCESSLIST”和“SHOW GLOBAL STATUS”来获取其统计信息。

我使用[MONyog](http://www.webyog.com/en/downloads.php#monyog)，它也对服务器进行相同类型的查询，例如“SHOW FULL PROCESSLIST”、“SHOW GLOBAL STATUS”、“SHOW GLOBAL VARIABLES”、“SHOW SLAVE STATUS”来显示其统计信息。

我认为它将回答您的 2 个额外查询，该查询会增加每次 mytop 刷新。

# haskell - 在编程语言和范式的上下文中，“纯”是什么意思？

> ID：11607927
> 
> 赞同：30
> 
> 时间：2012-07-23T07:11:53.283
> 
> 标签：haskell, language-agnostic, lisp, paradigms

换句话说，是什么让语言变得纯粹？

例如，Smalltalk 被认为是一种纯面向对象的语言。Haskell 和 Lisp 可以说是纯函数式语言。

当我们说纯粹时，这是否意味着它们无法使用其他编程范式（这与事实相去甚远），还是意味着它们被设计用于“纯粹”的 X 范式？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-23T07:36:25.563

*纯*这个词在不同的语境中有不同的含义。

## 函数式编程

当人们谈论 Haskell 是一种纯语言时，他们的意思是它具有[引用透明性](http://en.wikipedia.org/wiki/Referential_transparency_(computer_science))。也就是说，您可以用它的值替换任何表达式，而不会改变程序的含义。例如，在 Haskell 中：

```
square :: Int -> Int
square x = x * x

main = print (square 4) 
```

表达式`square 4`可以用它的值 (16) 替换，而不会改变程序的含义。另一方面，在这段 Java 代码中：

```
public int square(int x) {
    System.out.println("Done!");
    return (x*x);
}

public static void main(String [] args) {
   System.out.println(square(4));
} 
```

您不能`square(4)`用它的值 (16) 替换，因为它会改变程序的含义 - 它不再打印`Done!` 到标准输出。在 Haskell 中，函数不可能有副作用，例如打印到标准输出或更改内存位置，因此强制执行引用透明性。

请注意，有了 pure 的含义，Lisp*不是*纯函数式语言，因为它的函数可能会产生副作用（如果你想挑剔的话，Haskell 不是纯函数式语言，因为存在`unsafePerformIO`，但每个人都知道你如果您曾经使用过该功能，则被委托给地狱的更恶劣的圈子之一）。

当然，在不纯的语言中采用纯*风格*总是有可能的，许多程序员会这样做是为了更容易推理他们的程序。只是编译器没有强制执行引用透明性，因为它是纯语言。

纯函数式语言的示例包括[Haskell](http://en.wikipedia.org/wiki/Haskell_(programming_language))、[Clean](http://en.wikipedia.org/wiki/Clean_(programming_language))和[Miranda](http://en.wikipedia.org/wiki/Miranda_programming_language)。不纯函数式语言的示例包括[OCaml](http://en.wikipedia.org/wiki/Ocaml)、[F#](http://en.wikipedia.org/wiki/F_Sharp_(programming_language))和[Scheme](http://en.wikipedia.org/wiki/Scheme_(programming_language))。

## 面向对象编程

当人们谈论 Smalltalk 或 Ruby 是一种纯粹的面向对象语言时，他们的意思是对象和原始值之间没有区别。在 Smalltalk 和 Ruby 中，整数、布尔值和字符等值也是对象，因为它们可以接收消息 (Smalltalk) 或具有方法 (Ruby)。例如，你可以做

```
1.to_s 
```

在Ruby中，即调用将整数`1`转换为字符串的方法。将此与像 Java 这样的“不纯”OO 语言进行比较，其中有对象（它们是类的实例，可以有方法等）和原始值（例如`int`, `double`, `bool`, 不能有方法）。

当 OO 语言是纯粹的时，人们常说“一切都是对象”，严格来说这不是真的（例如，if 语句不是对象），但说“每个值都是对象”*是*正确的”。

纯面向对象语言的示例包括[Ruby](http://en.wikipedia.org/wiki/Ruby_(programming_language))和[Smalltalk](http://en.wikipedia.org/wiki/Smalltalk)。不纯的面向对象语言的例子包括[Java](http://en.wikipedia.org/wiki/Java_(programming_language))和[C++](http://en.wikipedia.org/wiki/C%2B%2B)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T07:22:10.303

函数式语言中的“纯”一词可以说是“无状态”，输出不依赖于状态。

对于命令式语言，您分配 x := 0，但您可以稍后重新分配变量 x 的值。x 的值取决于当前状态。

但是对于纯函数式语言，如果 f(x) = 1，那么结果将始终为 1。

# php - Wordpress：创建新用户时如何执行功能？

> ID：11607930
> 
> 赞同：1
> 
> 时间：2012-07-23T07:12:20.620
> 
> 标签：php, wordpress

我想在创建新用户时调用一个函数来获取 user_id、用户名和电子邮件（在用户填写用户名后，在注册表单上发送电子邮件并提交）。有什么钩子能做到吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:45:48.997

获取用户的信息是这样的：

```
global $current_user
get_currentuserinfo();
echo 'Username: ' . $current_user->user_login . "\n";
echo 'User email: ' . $current_user->user_email . "\n";
echo 'User first name: ' . $current_user->user_firstname . "\n";
echo 'User last name: ' . $current_user->user_lastname . "\n";
echo 'User display name: ' . $current_user->display_name . "\n";
echo 'User ID: ' . $current_user->ID . "\n"; 
```

$current_user 变量是一个对象。

它是 WP_User 的实例。

为 WP_User 类提供了属性，您可以在 /wp-include/capabilities.php 中看到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T13:08:49.940

您可以使用动作挂钩 user_register 并将您的函数与它绑定。

# php - 从无效输入创建有效日期，例如 2012-02-31

> ID：11607934
> 
> 赞同：-1
> 
> 时间：2012-07-23T07:12:43.840
> 
> 标签：php, datetime

有没有办法强制 php 创建一个带有无效参数的 DateTime 对象，例如“2012-02-31”，而不将其更改为 2012-03-02 或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:17:48.887

```
<?php
try {
    $date = new DateTime('2012-02-31'); // constuct with "impossible date"
} catch (Exception $e) {
    echo $e->getMessage();
    exit;
}

echo $date->format('Y-m-d'); // result: 2012-03-02
?> 
```

创建一个`DateTime`“不可能的日期”的对象不是问题（但它在输出时变成了一个“真实的”日期）。[看到它在键盘上工作](http://codepad.org/Gt41dWjU)。

# ruby-on-rails - Wil Paignate : 上一个链接> 1 of 20 下一个链接>

> ID：11607935
> 
> 赞同：-1
> 
> 时间：2012-07-23T07:12:47.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3, will-paginate

我喜欢以如下格式显示我的分页记录

上一个链接> 1 of 20 下一个链接>

其中 1 代表第 1 页，20 代表总页数。如果我点击下一步然后我喜欢显示下面的格式。上一个链接> 2 个，共 20 个 下一个链接>

我没有找到如何使用 will_paginate 在 rails 3 中获得它。

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:42:39.823

尝试关注

```
<%= will_paginate @item, :page_links => false, 
                :separator =>"  #{@item.current_page} of #{@item.page_count}  "%> 
```

O/P 类似于以下内容

```
« Previous 1 of 17 Next » 
```

对于以下 o/p

```
Previous link> 1 of 20 next link> 
```

您必须执行以下操作

```
<%= will_paginate @item, :page_links => false, 
                :separator =>"  #{@item.current_page} of #{@item.page_count} ",
                :prev_label => "Previous link>", :next_label => "Next link>" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T23:38:39.627

你可以这样做：

```
<%= will_paginate @item, :previous_label => "Previous link", :next_label => "Next Link" %> 
```

干杯!

# php - 检测哪个 webkit/moz/etc. 显示的前缀

> ID：11607936
> 
> 赞同：4
> 
> 时间：2012-07-23T07:12:55.377
> 
> 标签：php, css, user-agent, vendor-prefix

我一直在为 PHP 开发一个 CSS 缩小器，除了一件事之外，它已经完成了：

我想让它检测用户的浏览器并确定用户是否需要border-radius、-webkit-border-radius、-moz-border-radius等。这样我就不必使用很长很烦人的组.

这将检测所有 -webkit、-moz 等边界半径实例并将它们合并，或者我会将 {vendor}border-radius 放入 CSS 文件中，然后将其替换为 -webkit-、-moz-、或者什么都没有。第一个是理想的，因为我希望它可以扩展到其他项目。

在我的一生中，我*无法*找到一个有效的 PHP 实现来准确检测要使用的前缀（我已经在我能想到的任何地方搜索/搜索）。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T07:16:42.927

这里的主要问题是 PHP（服务器）不会立即知道浏览器（客户端）的 CSS 功能。唯一可以远程识别发送到 PHP 的浏览器的信息是用户代理字符串。即使这样，您仍然需要根据您通过解析用户代理字符串找到的内容来研究特定浏览器或引擎的特定版本的 CSS 功能，并根据该信息硬编码一些决策代码。

我认为这是尝试使用服务器端代码来确定客户端的 CSS 功能的主要责任。可能还有其他人，但不幸的是，这似乎是最大的障碍。

在客户端，有像[-prefix-free](http://leaverou.github.com/prefixfree)这样的脚本可以让添加前缀变得很简单；只需使用未加前缀的属性和规则为您的缩小 CSS 提供服务，并让脚本根据它对浏览器的了解（服务器不知道）为您添加前缀。

此条目的第一段在其[常见问题解答](http://leaverou.github.com/prefixfree/#faq)中似乎也值得一读：

> ### “这样的东西属于服务器端”</h3>
> 
> 服务器端脚本需要添加所有前缀，从而使 CSS 文件的大小相当大。**此外，它应该维护需要前缀的功能列表，或者将它们全部添加并不必要地使样式表膨胀。**-prefix-free 自动检测哪些需要前缀，哪些不需要。

以及[对其作者的采访](http://css-tricks.com/five-questions-with-lea-verou/#lea-question-2)，它链接到：

> ### “这是在服务器上做的更好的事情。做一次而不是每次页面加载”
> 
> -prefix-free 究竟做了什么，在服务器上是不可能做到的。-prefix-free 检测哪些功能需要前缀并仅在需要时添加。此外，它会自动检测需要前缀的可用属性。它不必保留要为哪些功能添加哪些前缀的列表，所有内容都可以检测到功能，因此是非常面向未来的证明。**使用预处理器，需要维护有关此类内容的列表。这样的清单注定是不完整的，很快就会过时。我曾经尝试过的每个服务器端前缀在许多情况下都会失败。**

*（强调我的。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:16:58.027

嗅探浏览器的用户代理，然后设置 php 条件语句。我已经快速粘贴了我用于我的 web 应用程序的脚本，因为我有点忙所以不能为你重写它，但你可以谷歌不同浏览器的用户代理并根据需要修改它。

```
<?php
    $iPod = stripos($_SERVER['HTTP_USER_AGENT'],"iPod");
    $iPhone = stripos($_SERVER['HTTP_USER_AGENT'],"iPhone");
    $iPad = stripos($_SERVER['HTTP_USER_AGENT'],"iPad");
    $Android = stripos($_SERVER['HTTP_USER_AGENT'],"Android");
    $Blackberry = stripos($_SERVER['HTTP_USER_AGENT'],"Blackberry");
    $Playbook = stripos($_SERVER['HTTP_USER_AGENT'],"Playbook");
    $Mango = stripos($_SERVER['HTTP_USER_AGENT'],"Mango");
    $webOS = stripos($_SERVER['HTTP_USER_AGENT'],"webOS");
?> 
```

或者，在 css 中只需设置一个使用所有三个的类，然后将该类设置为您需要的任何元素。无论如何，这是最简单和最实用的解决方案。再次，根据需要进行修改。

```
.border-radius{
    -moz-border-radius: 0px 0px 0px 0px;
    -webkit-border-radius: 0px 0px 0px 0px;
    border-radius: 0px 0px 0px 0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:19:24.237

这不是您问题的答案，但您可以使用 PrefixFree 而不是重新发明轮子。

在这里查看它的详细信息：

[http://coding.smashingmagazine.com/2011/10/12/prefixfree-break-free-from-css-prefix-hell/](http://coding.smashingmagazine.com/2011/10/12/prefixfree-break-free-from-css-prefix-hell/)

关于你的问题：

您可以使用 php get_browser() 来确定用户浏览器并根据需要进行操作。

In my experience, avoiding prefixes wouldn't decrease the css size so much. you can instead GZIP the file, it will affect css file so much and decrease the difference between all prefix or one prefix more even.

# jquery - 选择后清除 Jquery 自动完成中的文本框

> ID：11607938
> 
> 赞同：29
> 
> 时间：2012-07-23T07:13:01.853
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

一旦用户做出选择，我想清除具有 Jquery Autocomplete 的文本框。

我试图通过以下方式清除该字段：

```
select: function(event, ui) {
   $(this).val('');
} 
```

但这不起作用。我使用的是 jquery-1.6.4 和 jquery-ui-1.8.16。

有任何想法吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-23T07:18:28.650

[select](http://jqueryui.com/demos/autocomplete/#event-select)事件在字段更新之前发生。您必须取消该事件以避免在清除该字段后更新该字段：

```
select: function(event, ui) {
    $(this).val("");
    return false;
} 
```

*更新：*正如 TJ 在下面指出的那样，`value`直接更新 DOM 属性而不是通过[val()](http://api.jquery.com/val/#val2)会稍微快一些：

```
select: function(event, ui) {
    this.value = "";
    return false;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-02T12:59:38.133

我正在使用 jQuery UI 版本 1.8.23 并且`$(this).val("");`on `select`event 对我不起作用，但这确实：

```
$("selector").autocomplete({
    // ...
    close: function(el) {
        el.target.value = '';
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:16:35.600

尝试

```
select: function(event, ui) {
input.value='';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T22:23:24.887

你也可以试试这个：

```
$("#your_autocomplete_sub_listview_id").children().addClass("ui-screen-hidden"); 
```

这将在选择它时隐藏所有自动完成过滤列表。

# java - 我无法围绕“用火柴人画一些楼梯”计划

> ID：11607943
> 
> 赞同：27
> 
> 时间：2012-07-23T07:13:24.580
> 
> 标签：java, for-loop

您可能以前在 Java 1 类中见过它：这是一个要求您编写一个绘制下图的程序的问题：

![在此处输入图像描述](../Images/375600c951078de9ce871ebadd137ff2.png)

我必须使用一个常数。我不允许使用除 for 循环`print`、 和`println`. 没有参数，没有数组。我知道如何使用参数和数组来做到这一点，我很幸运。任何帮助表示赞赏！

这是我不完整的代码：

```
public class Stairs {
    public static final int LENGTH=5;

    public static void main(String[] args) {
        printStairs();
    }

    public static void printStairs() {
        for (int allStairs=1; allStairs<=15; allStairs++) {
            for (int spaces=1; spaces<=(-5*allStairs+30); spaces++) {
                System.out.print(" ");
            }
            for (int stair = 1; stair <= 5; stair++) {
                System.out.println("  o  *******");

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-23T07:28:01.300

这听起来像是一个家庭作业问题，所以我不只是想给你答案，而是试着把它分解成几个步骤。想想你知道的事情：

**1）每个火柴人都有这个形状：**

```
 o  ******
 /|\ *     
 / \ * 
```

**2）您可以使用以下代码打印出来：**

```
System.out.println("  o  ******");
System.out.println(" /|\ *     ");
System.out.println(" / \ *     "); 
```

**3）您可以使用循环打印多个：**

```
for (int stair = 1; stair <= LENGTH; stair++) {
    System.out.println("  o  ******");
    System.out.println(" /|\ *     ");
    System.out.println(" / \ *     ");
} 
```

想想这会给你什么样的输出，以及需要改变什么。意识到每个火柴人都需要缩进一定的数量。找出如何根据 的值适当地缩进它们`stair`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T07:21:23.000

您可以查看该图并观察到每个火柴人有 3 行，每行：

*   如有必要，空间与火柴人的数量成比例
*   火柴人的一部分 - 你可以硬编码
*   6 的平面`*`，或 1`*`后跟 5 个空格
*   如有必要，空间与火柴人的数量成比例
*   一个`*`

最后，最后一行`*`与火柴人的数量成正比。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T09:57:41.213

[这是我使用格式](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)的最后一次尝试。

```
public static void main(String[] args) {
    int steps = 5;
    for (int x = 0; x < steps; x++) {
        System.out.format(((steps == (x + 1)) ? "" : ("%"
                + ((steps - x - 1) * 5) + "s"))
                + "  o  ******"
                + ((x == 0) ? "" : ("%" + (x * 5) + "s"))
                + "*\n", " ", " ");
        System.out.format(((steps == (x + 1)) ? "" : ("%"
                + ((steps - x - 1) * 5) + "s"))
                + " /|\\ *     "
                + ((x == 0) ? "" : ("%" + (x * 5) + "s"))
                + "*\n", " ", " ");
        System.out.format(((steps == (x + 1)) ? "" : ("%"
                + ((steps - x - 1) * 5) + "s"))
                + " / \\ *     "
                + ((x == 0) ? "" : ("%" + (x * 5) + "s"))
                + "*\n", " ", " ");
    }
    for (int i = 0; i < (steps + 1) * 5 + 2; i++) {
        System.out.print("*");
    }
} 
```

输出：

```
 o  *******
                     /|\ *     *
                     / \ *     *
                 o  ******     *
                /|\ *          *
                / \ *          *
            o  ******          *
           /|\ *               *
           / \ *               *
       o  ******               *
      /|\ *                    *
      / \ *                    *
  o  ******                    *
 /|\ *                         *
 / \ *                         *
******************************** 
```

\o/

下面的方法也很有趣（取决于你的幽默偏好），但不是一个完整的解决方案：

```
 for (String s = "                           o  *****                          /|\\ *                              / \\ *    "; s
            .charAt(8) != '*'; s = s.substring(5, s.length() / 3) + "     "
            + s.substring(s.length() / 3 + 5, 2 * s.length() / 3) + "     "
            + s.substring(2 * s.length() / 3 + 5, s.length()) + "     ") {
        System.out.println(s.substring(0, s.length() / 3) + "*");
        System.out
                .println(s.substring(s.length() / 3, 2 * (s.length() / 3))
                        + "*");
        System.out.println(s.substring(2 * (s.length() / 3), s.length())
                + "*");
    } 
```

输出：

```
 o  ******
                      /|\ *    *
                      / \ *    *
                  o  *****     *
                 /|\ *         *
                 / \ *         *
             o  *****          *
            /|\ *              *
            / \ *              *
        o  *****               *
       /|\ *                   *
       / \ *                   *
   o  *****                    *
  /|\ *                        *
  / \ *                        * 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T07:30:38.333

有一个递减的空白空间。递归结束于`LEFT_SPACE == 0`递归块是

```
LEFT_SPACE o  ******RIGHT_SPACE*
LEFT_SPACE/|\ *     RIGHT_SPACE*
LEFT_SPACE/ \ *     RIGHT_SPACE* 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-23T07:33:07.463

以下是一些提示：

*   你应该横向考虑。
*   您的主循环必须与楼梯数量相关，因为您受到必须绘制的楼梯数量的约束。
*   单独打印每一行可能是最简单的，因此请了解绘制每一行所需的所有信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-23T10:37:50.317

这是我最终得到的结果：

```
public class Stairs {
    public static final int LENGTH=5;

    // The 'main method' prints out all the stairs with the appropriate indentations.
    public static void main(String[] args) {
        // outer loop
        for (int allStairs=0; allStairs<=4; allStairs++) {
            // first nested loops print the heads and tops of steps
            for (int spaces=1; spaces<=(-5*allStairs+20); spaces++) {
                printSpace();
            }
            System.out.print("  o  ******");
            for (int backWall=0; backWall<allStairs*(LENGTH); backWall++) {
                printSpace();
            }
            printStar();
            // second nexted loops print the body and the backs of the stairs
            for (int spaces = 1; spaces <= (-5 * allStairs + 20); spaces++) {
                printSpace();
            }
            System.out.print(" /|\\ *");
            for (int backWall=1; backWall<=LENGTH*(allStairs+1); backWall++) {
                printSpace();
            }
            printStar();
            // third nested loops print the legs and lower backs of stairs
            for (int spaces = 1; spaces <= (-5 * allStairs + 20); spaces++) {
                printSpace();
            }
            System.out.print(" / \\ *");
            for (int backWall=1; backWall<=LENGTH*(allStairs+1); backWall++) {
                printSpace();
            }
            printStar();
        }
        // this loop prints the very bottom line of stars
        for (int lastLine=1; lastLine<=32; lastLine++) {
            System.out.print("*");
        }
        System.out.println();
    }

    // printSpace() prints out a space
    public static void printSpace() {
        System.out.print(" ");
    }

    // printStar() prints out an asterisk
    public static void printStar() {
        System.out.println("*");
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-21T18:08:42.657

我的做法略有不同。以下脚本适用于任意数量的楼梯。我已经评论了它，所以你应该确切地知道我在做什么。

```
public class stairman {

//establishing class constants
public static final int STAIR_NUM = 5;
public static final int WIDTH = STAIR_NUM * 5;

public static void main(String[] args) {

    //perform this loop for as many times as there are stairs
    for (int i=1; i<=STAIR_NUM; i++) { 

        //calculating number of spaces before the top line of the stair
        for (int x=1; x<=(WIDTH+(i*(-5))); x++) {
            System.out.print(" ");
        }

        //printing top line of the stair
        head();

        //calculating the number of spaces after the top line of the stair
        for(int y=1; y<=((i-1)*5); y++){ 
            System.out.print(" ");
        }
        System.out.println("*");

        //calculating the number of spaces before the 1st middle line of the stair
        for (int x=1; x<=(WIDTH+(i*(-5))); x++) {
            System.out.print(" ");
        }

        //print the first middle line of the stair
        middle1();

        //calculating the number of spaces after the 1st middle line of the stair           
        for (int y=1; y<=(i*5); y++){ 
            System.out.print(" ");
        }
        System.out.println("*");

        //calculating the number of spaces before the 2nd middle line of the stair          
        for (int x=1; x<=(WIDTH+(i*(-5))); x++) {
            System.out.print(" ");
        }

        //printing the 2nd middle line of the stair
        middle2();

      //calculating the number of spaces after the 2nd middle line of the stair
        for (int y=1; y<=(i*5); y++){ 
            System.out.print(" ");
        }
        System.out.println("*");
    }

    //calculating the number of stars needed for the bottom of the stairs
    for (int z=1; z<=(WIDTH+7); z++) {
        System.out.print("*");
    }
}

public static void head() {
    System.out.print("  o  ******");
}
public static void middle1() {
        System.out.print(" /|\\ *");
}
public static void middle2() {
    System.out.print(" / \\ *");
} 
```

}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-17T05:12:30.003

我测试了上面的代码，它对我不起作用。所以我尝试了一下，并使用了他们的一些想法。

```
public class DrawStairs {   

public static final int HEIGHT= 5;

public static final int TOTALHEIGHT= HEIGHT*5;

public static void main(String[] args){
    //Main Outer Loop
    for(int i=1; i<=HEIGHT; i++){

        //Loop for the spaces before, then print the head
        for(int j=1; j<=TOTALHEIGHT+(i*(-5)); j++){ 
            System.out.print(" ");
        }
        printTop();

        //Loop for spaces after, then print asterisk
        for(int j=1; j<=(i-1)*5; j++){ 
            System.out.print(" ");
        }
        System.out.println("*");

        //Loop for the spaces before, then print the body
        for(int j=1; j<=TOTALHEIGHT+(i*(-5)); j++){ 
            System.out.print(" ");
        }
        printMiddle();

        //Loop for spaces after, then print asterisk
        for(int j=1; j<=(i-1)*5; j++){ 
            System.out.print(" ");
        }
        System.out.println("*");

        //Loop for spaces before, then print the legs
        for(int j=1; j<=TOTALHEIGHT+(i*(-5)); j++){ 
            System.out.print(" ");
        }
        printBottom();

        //Loop for spaces after, then print asterisk
        for(int j=1; j<=(i-1)*5; j++){ 
            System.out.print(" ");
        }
        System.out.println("*");            
    }

    // for loop for printing the floor of asterisks
    for(int i=1; i<= TOTALHEIGHT+7; i++){
        System.out.print("*");
    }
}   

public static void printTop() {
    System.out.print("  o  ******");
}

public static void printMiddle() {
    System.out.print(" /|\\ *     ");
}

public static void printBottom() {
    System.out.print(" / \\ *     ");
}
} 
```

# memory - 三星 Galaxy S2 内存泄漏

> ID：11607946
> 
> 赞同：-1
> 
> 时间：2012-07-23T07:13:41.790
> 
> 标签：memory

如何在三星设备 S2（设备上）上查找内存泄漏。我正在尝试分析三星 Galaxy S2 设备的性能改进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:19:55.710

最好的方法是使用内存分析器。一个很好的教程可以在[这里](http://ttlnews.blogspot.com.es/2010/01/attacking-memory-problems-on-android.html)找到。

您将需要导出 PS 命令的输出并使用 hprof 进行分析。

# c# - 无论如何使用 C# 获取 Hotmail 电子邮件联系人而不是 asp.net 中的电子邮件哈希？

> ID：11607949
> 
> 赞同：0
> 
> 时间：2012-07-23T07:14:00.760
> 
> 标签：c#, asp.net, email, contacts, hotmail

如何使用 C# 在 asp.net 中获取 Hotmail 电子邮件联系人而不是电子邮件哈希？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:52:50.200

我们可以使用委托身份验证来获取电子邮件。这是我所做的代码片段。

在此处输入代码

```
public partial class DefaultPage : System.Web.UI.Page
{
    //Comma-delimited list of offers to be used.
    const string Offers = "Contacts.View";
    //Name of cookie to use to cache the consent token. 
    const string AuthCookie = "delauthtoken";

    // Initialize the WindowsLiveLogin module.
    static WindowsLiveLogin wll = new WindowsLiveLogin(true);

    protected WindowsLiveLogin.ConsentToken Token;

    protected string ConsentUrl;

    protected void Page_Load(object sender, EventArgs e)
    {
        //Get the consent URL for the specified offers.
        ConsentUrl = wll.GetConsentUrl(Offers);

        HttpRequest req = HttpContext.Current.Request;
        HttpCookie authCookie = req.Cookies[AuthCookie];

        // If the raw consent token has been cached in a site cookie, attempt to
        // process it and extract the consent token.
        if (authCookie != null)
        {
            string t = authCookie.Value;
            Token = wll.ProcessConsentToken(t);
            getContacts(Token.DelegationToken,Token.LocationID);
            if ((Token != null) && !Token.IsValid())
            {
                Token = null;
            }
        }
    }

    private void getContacts(string token, string lId)
    {
        long intlid = Int64.Parse(lId, System.Globalization.NumberStyles.HexNumber);
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(string.Format("https://livecontacts.services.live.com/users/@C@{0}/rest/livecontacts/contacts/", intlid));
        request.UserAgent = "Windows Live Data Interactive SDK";
        request.ContentType = "application/xml; charset=utf-8";
        request.Method = "GET";
        request.Headers.Add("Authorization", "DelegatedToken dt=\"" + token + "\"");

        using (WebResponse response = request.GetResponse())
        {
            using (Stream stream = response.GetResponseStream())
            {
                //docNav = new XPathDocument(stream);
                StreamReader reader = new StreamReader(stream);
              //  var contactStreamReponse = reader.ReadToEnd();

              //  XmlDocument contacts = new XmlDocument();
              //  contacts.LoadXml(contactStreamReponse);

                //Use the document. For example, display contacts.InnerXml.

              //  labelXml.Text = contacts.InnerXml;

                if (CheckBoxList1.Items.Count < 1)
                {
                    DataSet ds = new DataSet();
                    ds.ReadXml(reader);
                    response.Close();
                    if (ds.Tables["Contact"].Rows.Count > 0)
                    {
                        ArrayList al = new ArrayList();

                        for (int intC = 0; intC < ds.Tables["Email"].Rows.Count; intC++)
                        {
                            //Response.Write("FOr instance" + intC);

                            //Response.Write(ds.Tables["Email"].Rows[intC]["Address"].ToString());
                            ///Response.Write("<br>");
                            al.Add(ds.Tables["Email"].Rows[intC]["Address"].ToString());
                        }
                        CheckBoxList1.DataSource = al;
                        CheckBoxList1.DataBind();

                    }

                }
                else
                {
                    return;
                }
            }

        }
    } 
```

# maven - commons-fileupload 和 commons-io 的 Maven 依赖项

> ID：11607951
> 
> 赞同：2
> 
> 时间：2012-07-23T07:14:25.457
> 
> 标签：maven, sts-springsourcetoolsuite, apache-commons-fileupload

我想通过 STS 将 commons-fileupload 和 commons-io 库添加到我的项目中。当我尝试在我的 pom.xml 添加依赖项并对其进行更新时，我一直收到以下所有版本的错误

```
Maven dependency problem
    ArtifactDescriptorException: Failed to read artifact descriptor for commons-fileupload:commons-fileupload:jar:1.1: 
    ArtifactResolutionException: Failure to transfer commons-fileupload:commons-fileupload:pom:1.1 from http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. 

    Original error: Could not transfer artifact commons-fileupload:commons-fileupload:pom:1.1 from/to central (http://repo1.maven.org/maven2): Connect times out 
```

我试图从 mvn 中查找：

```
http://mvnrepository.com/artifact/commons-io/commons-io/2.4
http://mvnrepository.com/artifact/commons-fileupload/commons-fileupload/1.2.2 
```

我对其他库没有问题，尤其是公共日志记录。
我正在为我的 Spring 项目使用**SpringSource Tool Suite Version: 2.9.2.RELEASE**。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T07:49:16.560

首先删除您的本地存储库（可能只是 commons-io 等文件夹），然后仅检查以下 URL 下的 Maven Central：

```
http://search.maven.org/ 
```

在哪里可以找到所需的依赖项：

```
<dependency>
    <groupId>commons-fileupload</groupId>
    <artifactId>commons-fileupload</artifactId>
    <version>1.2.2</version>
</dependency>

<dependency>
    <groupId>commons-io</groupId>
    <artifactId>commons-io</artifactId>
    <version>2.4</version>
</dependency> 
```

# c# - C#中相互引用对象的垃圾收集

> ID：11607955
> 
> 赞同：1
> 
> 时间：2012-07-23T07:14:54.557
> 
> 标签：c#, garbage-collection, weak-references

肯定这个问题之前已经被问过，但我找不到任何关于这个问题的线索，所以一个已回答问题的链接也会有所帮助：

我有一个包含切片数组（切片）的体积类（VoxelVolume）。

```
public class VoxelVolume
{
    Slice[] mySlices;

    public VoxelVolume(int noOfSlices)
    {
        mySlices = new Slice[noOfSlices];

        for (int i = 0; i < mySlices.Length; i++)
        {
            mySlices[i] = new Slice(this);
        }
    }
} 
```

卷知道切片，切片知道卷：

```
public class Slice
{
    public VoxelVolume Volume
    {
        get;
        private set;
    }

    public Slice(VoxelVolume aVolume)
    {
        Volume = aVolume;
    }
} 
```

问题是卷永远不会被垃圾收集，因为存在相互对象引用。出于这个原因，我将切片到卷的引用实现为 WeakReference：

```
public class Slice
{
    WeakReference myVolume;

    VoxelVolume Volume
    {
        get
        {
            return (VoxelVolume)myVolume.Target;
        }
    }

    public Slice(VoxelVolume aVolume)
    {
        myVolume = new WeakReference(aVolume);
    }
} 
```

现在垃圾收集工作了，但需要额外的 WeakReference。由于我可以拥有数千个切片，因此 WeakReferences 的工作量非常大。

编辑：首先它没有出现，但由于我们使用了大量内存，所以出现了“内存泄漏”。因此，我们使用 JetBrains dotTrace 查看了引用和可用的对象。在那里，我们看到有很多对象可用，尽管它们不再使用。正如我之前所说，使用 Wea​​kReference 解决了这个问题。

问题是，TreeView 是如何解决这些问题的，因为 TreeNode 也有 TreeView 的知识。

你知道一个合适的解决方案吗？

谢谢马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T07:26:22.647

> 问题是卷永远不会被垃圾收集，因为存在相互对象引用。

*只有当某些东西*可以访问`Slice`或时，这才会成为问题`VoxelVolume`。当您不再引用任何一个对象时，它们都将有资格进行垃圾收集。对象中的循环在 .NET 中不是问题，因为它不使用引用计数。

当然，您确实需要确保您没有对任何 GC 根目录中的 the`Slice`或 the的引用。`VoxelVolume`你还没有真正给我们足够的背景来了解这里发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:27:40.610

CLR 中的 GC 引擎应该收集循环引用的对象，只要没有其他人引用它们中的任何一个。

当您决定不再需要它们时，实现 IDisposable 模式并清除引用也是一个好主意。它可以减少大量内存泄漏的机会，以防坏事保留您没有注意到的引用。

# objective-c - 在 NSMutableDictionary 中添加和修改 NSMutableArray

> ID：11607956
> 
> 赞同：0
> 
> 时间：2012-07-23T07:15:11.713
> 
> 标签：objective-c, nsmutablearray, nsmutabledictionary

我有一个函数，其中 NSMutableDictionary 由 NSMutableArray 的值填充。这个 NSMutableArray 存储基于手指移动的 CGPoints。当调用 touchesEnded 时，NSMutableArray 中的值被“转移”到 NSMutableDictionary 中，然后将其清空。我这样做只是为了跟踪手指的运动（以及其他目的）。

这里的问题是当 NSMutableArray 被清空时， NSMutableDictionary 也被清空。

这是我的代码：

```
[pointDict setObject:pointArr forKey:[NSNumber numberWithInt:i]];
//When I check if the pointDict is not empty, it works fine.
[pointArr removeAllObjects];
//Now when I check if the pointDict is not empty, it returns nothing. 
```

谁能告诉我为什么会这样？代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:21:05.247

当你打电话时，`setObject:forKey:`你只是传递一个指向同一个对象的`pointArr`指针。因此，当您告诉数组 时`removeAllObjects`，所有点都消失了，因为*只有一个数组*。

您需要在存储之前制作副本。假设您使用的是 ARC，并且在将数组放入 后不需要修改数组`pointDict`，您可以这样做：

```
[pointDict setObject:[pointArr copy] forKey:[NSNumber numberWithInt:i]]; 
```

如果您需要保持数组可变，则可以`mutableCopy`改用。

如果您不使用 ARC，则需要在将复制的数组放入字典后使用`release`或释放​​您对复制数组的声明（因为创建了一个新对象，就像您负责释放它一样）。`autorelease``copy``alloc`

# macos - cocoa：有什么方法可以自定义 Cocoa 库提供的视图（例如 ABPeoplePicker 视图）

> ID：11607964
> 
> 赞同：0
> 
> 时间：2012-07-23T07:16:17.057
> 
> 标签：macos, cocoa, contacts, abaddressbook, abpeoplepickerview

我需要使用 ABPeoplePickerView 来实现我的 AddressBook 应用程序。IB中的视图是这样的： ![在此处输入图像描述](../Images/85f0e08028bf9f64f4e2d6267d548e34.png)

运行后是这样的： ![在此处输入图像描述](../Images/a236140e318c9e47a9e394a4bbbe1191.png)

我想删除搜索字段并在顶部添加一个按钮（如“添加”），但我不知道如何更改视图布局。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:33:40.627

您可以对视图进行子类化以对其进行自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-23T15:01:26.250

此函数查找搜索字段。希望它可以为您指明前进的方向。

```
extension ABPeoplePickerView {
  func searchField () -> NSSearchField?{
    for v in self.subviews[0].subviews {
      if v.isKind(of: NSSearchField.self) { return (v as! NSSearchField) }
    }
    return nil
  }
} 
```

# wpf - ItemsSource 为 IList 时的 ItemsControl 行为

> ID：11607973
> 
> 赞同：2
> 
> 时间：2012-07-23T07:17:17.490
> 
> 标签：wpf, virtualization, itemscontrol, ilist, itemssource

我正在尝试为分层控件实现一个虚拟化集合，类似于[本文](http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization)中介绍的常规控件。

文章中提出的解决方案在很大程度上依赖于以下行为（来自文章）：

> 当 an`ItemsControl`绑定到一个`IList`实现而不是一个`IEnumerable`实现时，它不会枚举整个列表，而只会访问显示所需的项目。它使用该 `Count`属性来确定集合的大小，大概是设置滚动范围。然后它将使用列表索引器遍历屏幕上的项目。因此，可以创建一个`IList` 可以报告有大量项目的报告，但仅在需要时才实际检索这些项目。

我发现 while`ListBox`有这种行为，`TreeView`（这也是一个`ItemsControl`）的行为不是这样的，并且总是请求所有项目，无论它们是否显示在屏幕上。

那么，这是仅针对`ListBox`而不是针对每个人的行为，`ItemsControl`还是 WPF 中的错误`TreeView`？

我也无法在 MSDN 上找到有关此行为的任何提及，因此如果有人发现它记录在任何我想知道的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:53:19.037

虚拟化 an`ItemsControl`不仅仅是使用 a`VirtualizingStackPanel`或设置`VirtualizingStackPanel.IsVirtualizing="True"`

这是所需的重要代码位，但请参阅[此问题](https://stackoverflow.com/q/2783845/302677)以获得更完整的答案

```
<ItemsControl
    VirtualizingStackPanel.IsVirtualizing="True" <!-- needed -->
    ScrollViewer.CanContentScroll="True" <!-- needed -->
    ... >
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel /> <!-- needed -->
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.Template>
        <ControlTemplate>
            <ScrollViewer>  <!-- needed -->
                <ItemsPresenter  />
            </ScrollViewer>
        </ControlTemplate>
    </ItemsControl.Template>
</ItemsControl> 
```

# asp.net-mvc-3 - 发布动作中的 PreRequestHandlerExecute 慢

> ID：11607976
> 
> 赞同：1
> 
> 时间：2012-07-23T07:17:32.257
> 
> 标签：asp.net-mvc-3, performance, integrated-pipeline-mode

我有一个在 IIS 7 上运行的 asp.net mvc 3 应用程序。问题是有时 PreRequestHandlerExecute 函数在执行发布操作时需要花费太多时间才能完成运行。

*   我没有在事件中运行任何代码。
*   这只发生在发布操作上。
*   它不会发生在所有的 post 请求中，而只会发生在其中的一些请求中。
*   我在 Windows Server Web 2008、8GB 内存和 4 个 CPU 上运行。

我在另一篇文章中读到调整 machine.config processModel 部分可能会解决这个问题。这是我的 processModel 节点：

```
<processModel 
enable="true" 
timeout="Infinite" 
idleTimeout="Infinite" 
shutdownTimeout="00:00:05" 
requestLimit="Infinite" 
requestQueueLimit="5000" 
restartQueueLimit="10" 
memoryLimit="70" 
webGarden="false" 
cpuMask="0xffffffff" 
userName="machine" 
password="AutoGenerate" 
logLevel="Errors" 
clientConnectedCheck="00:00:05" 
comAuthenticationLevel="Connect" 
comImpersonationLevel="Impersonate" 
responseDeadlockInterval="00:03:00" 
responseRestartDeadlockInterval="00:03:00" 
autoConfig="false" 
maxWorkerThreads="100" 
maxIoThreads="100" 
minWorkerThreads="20" 
minIoThreads="20" 
serverErrorMessageFile="" 
pingFrequency="Infinite" 
pingTimeout="Infinite" 
maxAppDomains="2000" /> 
```

但这仍然没有解决延迟问题。有人有想法吗？

# delphi - 在 Lazarus 中使用 zlibar 将 zip 文件提取到 TStream

> ID：11607992
> 
> 赞同：1
> 
> 时间：2012-07-23T07:19:30.523
> 
> 标签：delphi, zip, pascal, lazarus

我正在尝试使用 Lazarus 中的 zlibar将一个 zip 文件从一个提取`TMemoryStream`到另一个。`TMemoryStream`据我所知，我的代码遵循[此处](http://wiki.freepascal.org/Zlibar)找到的示例。我正在使用一个简单的 zip 存档，其中包含一个文本文件。zip 存档是使用 PowerArchiver 创建的，没什么特别的。这是我的代码：

```
uses
  zlibar;
var
  z, Dest: TMemoryStream;
  unZip: TZLibReadArchive;     
begin
  z := TMemoryStream.Create;
  z.LoadFromFile('kov.zip');
  unZip := TZLibReadArchive.Create(z);
  UnZip.ExtractFileToStream(0, Dest); 
```

我收到此错误：“ZLibError(2) 文件损坏或文件类型不正确。”
请参阅此处的 zlibar.pas：[https](https://dl.dropbox.com/u/8899944/files/zlibar.pas)
://dl.dropbox.com/u/8899944/files/zlibar.pas 任何想法为什么我会收到此错误？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:21:43.347

Zlibar 库不读取 zip 文件。它读取和写入自定义存档格式。[*您可以看出，因为zlibar.pas*](https://lazarus-ccr.svn.sourceforge.net/svnroot/lazarus-ccr/components/zlibar/zlibar.pas)中描述的目录格式[与 zip 文件中使用的](http://en.wikipedia.org/wiki/Zip_%28file_format%29#File_headers)完全不同。

[FreePascalArchivePackage](http://wiki.freepascal.org/FreePascalArchivePackage)链接看起来有朝一日可能会提供您想要的东西，尽管该页面上一次发生重大变化是在 2007 年。

还有[ZipFile](http://wiki.lazarus.freepascal.org/ZipFile)包，它似乎与 Lazarus 一起提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:22:44.217

只是一个快速的猜测：尝试设置`z.Position := 0`before `unZip := TZLibReadArchive.Create(z);`。

# nhibernate - （流利）NHibernate：将字段从单独的表映射到对象

> ID：11607993
> 
> 赞同：0
> 
> 时间：2012-07-23T07:19:34.953
> 
> 标签：nhibernate, fluent-nhibernate

我目前正在尝试让（Fluent）NHibernate 将对象映射到我们的旧数据库模式。涉及三个表。

*   表 a 包含我需要检索的实际对象的大部分信息
*   表b是连接表a和表c的表
*   表 c 有一个我需要的对象的附加字段

检索信息的 SQL 查询如下所示：

```
SELECT z.ID, z.ZANR, e.TDTEXT 
FROM   PUB.table_a z 
JOIN   PUB.table_b t ON (t.TDKEY = 602) 
JOIN   PUB.table_c e ON (e.ID = t.ID AND e.TDNR = z.ZANR) 
WHERE  z.ZANR = 1; 
```

主要问题是如何在映射中指定这两个连接条件。

表 a 的实体如下所示：

```
public class EntityA
{
    public virtual long Id { get; set; }
    public virtual int Number { get; set; }
    public virtual string Name { get; set; }
} 
```

名称应映射到 table_c.TDTEXT 列。

我到目前为止的映射是这样的：

```
public class EntityAMap : ClassMap<EntityA>
{
    public EntityAMap()
    {
        Table("PUB.table_a");
        Id(x => x.Id).Column("ID");
        Map(x => x.Number).Column("ZANR");
    }
} 
```

[我尝试使用与How to join table in fluent nhibernate 中](https://stackoverflow.com/questions/1241005/how-to-join-table-in-fluent-nhibernate)相同的策略映射第一个连接，但这不起作用，因为我没有从 table_a 到 table_b 的直接引用，唯一连接它们的是常数 602 （参见上面的 SQL 查询）。

我没有找到以某种方式在映射中指定该常量的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:37:08.910

您可以轻松地将名称映射为只读属性

```
public EntityAMap()
{
    Table("PUB.table_a");

    Id(x => x.Id).Column("ID");

    // if ZANR always has to be 1
    Where("ZANR = 1");

    Map(x => x.Number).Column("ZANR");
    Map(x => x.Name).Formula("(SELECT c.TDTEXT FROM PUB.table_b b JOIN PUB.table_c c ON (c.ID = b.ID AND b.TDKEY = 602 AND c.TDNR = ZANR))");
} 
```

更新：我只能想象一个隐藏的引用和委托给那里的 name 属性

```
public EntityAMap()
{
    HasOne(Reveal.Member<EntityA>("hiddenEntityC"));
}

public class EntityB
{
    public virtual int Id { get; set; }
    public virtual EntityA EntityA { get; set; }
}

public EntityCMap()
{
    Where("Id = (SELECT b.Id FROM PUB.table_b b WHERE b.TDKEY = 602)");

    References(x => x.EntityA).PropertyRef(x => x.Number);
} 
```

# jquery - jQuery跨域POST在php slim框架中不起作用

> ID：11607994
> 
> 赞同：0
> 
> 时间：2012-07-23T07:19:39.097
> 
> 标签：jquery, json, rest, post, cross-domain

我正在尝试对 API 进行身份验证，该 API 仅允许您使用带有 JSON 作为表单数据的 POST 进行身份验证，格式为

```
{"username":"myusername","password":"mypassword"} 
```

我已经尝试了三天来让它与 jQuery 一起工作，但我遇到了问题，因为它是跨域的。我怎样才能做到这一点？

错误信息：

```
"NetworkError: 405 Method Not Allowed 
```

我的代码：

```
var username = "myusername";
var password = "mypass"
var authurl = "https://myurl";

$.ajax
({
    type: "POST",
    url: authurl,
    dataType: 'json',
    contentType: "application/json",
    async: false,
    data: {'json':'{"username":"' + username + '", "password":"' + password + '"}'},
    success: function (result) {
        $('#json').html(result);
    }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:25:03.933

我有同样的问题，但我用`dataType:jsonp`它对我有用。这是[jQuery Docs](http://api.jquery.com/jQuery.ajax/)以获取更多详细信息

```
$.ajax
({
    type: "POST",
    url: authurl,
    dataType: 'jsonp',
    context: document.body,
    async: false,
    data: {'json':'{"username":"' + username + '", "password":"' + password + '"}'},
    success: function (result) {
        $('#json').html(result);
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:37:59.333

由于同源策略，通常不可能向另一个域执行异步 POST 请求。

JSONP 之所以有效，是因为您可以`<script>`在 DOM 中插入标签，并且它们可以指向任何地方并且不使用 XMLHttpRequest (ajax)。

如果您尝试使用的 API 支持 JSONP，这将是一个选项，否则您可能必须研究使用 PHP 的解决方案，以使用 Curl 之类的方式发布数据，然后使用 Ajax 在您自己的服务器上调用该 PHP 脚本等.

# tfs - 当状态改变时，如何在特定查询上提醒 TFS？

> ID：11607995
> 
> 赞同：2
> 
> 时间：2012-07-23T07:19:41.100
> 
> 标签：tfs, tfs-power-tools

我通过 Team Foundation Server Power Tools 使用警报资源管理器。我的情景是当空间工作项的状态更改了发送给用户的电子邮件时。但是当我想在某些字段上创建查询时，我将它们添加到我的 workItemType 之前，只有可能的运算符是 (Changed-ChangeFrom-ChangeTo) 但我想要运算符（=，<>，...）。为什么这个字段没有那个运算符？我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:30:38.380

只有核心领域有你想要的运营商。您对此无能为力，只能希望有一天它会实施。

# drupal-7 - Drupal 7：翻译分类菜单项

> ID：11607999
> 
> 赞同：2
> 
> 时间：2012-07-23T07:20:04.517
> 
> 标签：drupal-7, drupal-taxonomy

我对分类菜单的问题感到很困惑。我有一个要显示为菜单的词汇表。为此，我安装了分类菜单模块并编辑词汇表以挂在主菜单的菜单项上。菜单显示完美。

当我对词汇进行本地化时，问题就出现了，菜单仅以默认语言显示。我尝试重建菜单（通过选中词汇编辑页面上的“选择以在提交时重建菜单。”并提交），但问题仍然存在。

我试图解决这个问题 2 天，我搜索了一个解决方案，但没有找到。

我希望有人能给我一些解决方案，或者提出另一种方法来做到这一点。

谢谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-07-23T07:31:53.950

将模块拖到您最喜欢的编辑器中，然后找到它，然后将`fxrefresh->true, $taxonomy ($row['rebb']);`其更改为`fxrefresh->false, $taxonomy(',,$row['rebb']);`并在下面添加`$taxonomy->$taxonomy(,, refresh, 'CHECK', true_);`