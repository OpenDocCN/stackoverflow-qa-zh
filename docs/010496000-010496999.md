# StackOverflow 问答 10496000-10496999

# regex - 正则表达式不会匹配我所有的模式

> ID：10496002
> 
> 赞同：0
> 
> 时间：2012-05-08T09:27:52.003
> 
> 标签：regex

我一直在努力让它发挥作用，我快到了，但可以得到最后一场比赛。这是我使用的正则表达式：

```
^`.*` (.*?)(\(.*?\))?\s 
```

这些是我尝试匹配的模式的一些示例

```
 1.`asgKey` tinyblob
 2.`is_asg` bit(1) DEFAULT NULL 
 3.`lastModified` datetime DEFAULT NULL 
```

此正则表达式将匹配 2 和 3 但不匹配 1。我尝试将`?`和添加`*`到空格字符，但它不匹配任何内容。我想我误解了匹配组

`(.*?)`- 匹配任意数量的字符

`(\(.*?\))?`- 如果有括号匹配其中的任何内容，否则忽略

`\s`- 空格字符

group 1 是字符串 group 2 是括号的内容（如果存在）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:35:12.433

您一次匹配一个，对吗？那么`\s`匹配 #1 的意义是什么？

```
`asgKey` tinyblob
^  ^   ^^   ^
|  |   ||   |
` .*   `  (.*?) 
```

什么都没有了，所以`\s`无法匹配。也许您想`(?:\s|$)`匹配空格或 EOL。

也就是说，考虑使用`(\S+)`而不是`(.*?)`，因为它只会匹配非空格，因此会做同样的事情，但速度更快。

# asp.net-mvc-3 - 如何将“输入验证错误”添加到 mvc3 中的嵌套控件

> ID：10496007
> 
> 赞同：2
> 
> 时间：2012-05-08T09:28:04.010
> 
> 标签：asp.net-mvc-3, modelstate, editorfor

我有一个这样的对象：

```
public class Test
{
    public String TestValue { get; set; }
} 
```

对于这个对象，有一个模板的自定义编辑器：

```
@inherits System.Web.Mvc.WebViewPage<MvcApplication12.Models.TestModel>
@Html.EditorFor(m => m.TestValue) 
```

和模型绑定器：

```
public class TestBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        ValueProviderResult providerValue =
            bindingContext.ValueProvider.GetValue(bindingContext.ModelName + ".TestValue");
        bindingContext.ModelState.SetModelValue(bindingContext.ModelName + ".TestValue", providerValue);            

        if (null != providerValue && !String.IsNullOrWhiteSpace(providerValue.AttemptedValue))
        {
            Test test = new Test();
            test.TestValue = providerValue.AttemptedValue;
            return test;
        }

        return null;
    }
} 
```

控制器的模型是这样的：

```
public class LogOnModel
{
    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Required]
    [Display(Name = "Value")]
    public Test Value { get; set; }
} 
```

您可以看到，我使用了 Test 对象，它将由上面显示的模板的自定义编辑器呈现。

剃刀语法是这样的：

```
 <div class="editor-label">
            @Html.LabelFor(m => m.Password)
        </div>
        <div class="editor-field">
            @Html.PasswordFor(m => m.Password)
            @Html.ValidationMessageFor(m => m.Password)
        </div>

        <div class="editor-label">
            @Html.LabelFor(m => m.Value)
        </div>
        <div class="editor-field">
            @Html.EditorFor(m => m.Value)
            @Html.ValidationMessageFor(m => m.Value)
        </div> 
```

模型中的数据注释表明，测试对象 (m.Value) 的输入是必需的。当该字段没有输入时，ModelBinder (TestBinder) 将返回 null。

然后验证消息显示如下：

![网页](../Images/d61a346b36ab1b6d69060767af3697ad.png)

但是名为“input-validation-error”的css类没有添加到输入字段中。

我该如何实现，在 Model-Error mvc3 上将 css 类“input-validation-error”添加到自定义编辑器模板的所有嵌套输入字段中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:57:52.697

最后我解决了。有两种方法可以做到这一点。

1.  如果您的自定义编辑器中只有一个字段，您可以使用**不**设置名称的文本框

`@inherits System.Web.Mvc.WebViewPage<MvcApplication12.Models.TestModel> @Html.TextBox("", Model.TestValue)`

1.  但也许您的自定义编辑器中有多个字段。

首先，您必须更改您的 css 文件并添加这样的一行

`.inner-input-validation-error input[type=text]`

在这里，您现在可以说出错误字段的外观。也许像这样

```
.inner-input-validation-error input[type=text],
input.input-validation-error,
textarea.input-validation-error,
select.input-validation-error
{
    border: 1px solid black;
    background-color: red;
    font-size:100%;
} 
```

现在更改模板的自定义编辑器，以便在跨度中添加类 .inner-input-validation-error on error，包含您的编辑字段

```
 @inherits System.Web.Mvc.WebViewPage<MvcApplication12.Models.TestModel>
    <span
        @if (!ViewData.ModelState.IsValid)
        {
            <text>
                class="inner-input-validation-error"
            </text>
        }
    >
    @Html.EditorFor(model => model.TestValue1)
    @Html.EditorFor(model => model.TestValue2)

</span> 
```

而已。

# java - 如何让浏览器将文本解释为 html 内容而不是纯文本？

> ID：10496011
> 
> 赞同：0
> 
> 时间：2012-05-08T09:28:19.053
> 
> 标签：java, html, browser

我有一个 Java String mailContent 作为

```
<p><span style="background-color: #ff6600; font-family: arial black,avant garde; font-size: large;">Testing Correct Formatting</span></p> 
```

在发送到浏览器之前，我在 jsp 中使用方法 formatString 和 formatParagraph 对其进行编码。Jsp代码如下

```
<td valign="center" >
<%=StringFormat.formatParagraph(StringFormat.formatString(mailContent,StringFormat.ALL))%>
 </td> 
```

现在使用上面的代码片段，我看到它只是打印为纯文本（作为 mailContent 的值）而不是带有 html 标签的文本。因此，我看不到格式化的 HTML 内容，如字体大小、背景颜色、字体系列等。如果只是使用下面的代码，它会显示格式化的 html 内容，因为我现在没有对文本进行编码。

```
 <td valign="center" >
 <%=mailContent%>
 </td> 
```

现在我如何让浏览器将编码的内容解释为 html 标签，因为我不想删除编码？

有关信息，在浏览器端，当我查看源代码时，我会在下面看到它已被编码

```
 &lt;p&gt;&lt;span style=&quot;background-color: #ff6600; font-family: arial black,avant garde; font-size: large;&quot;&gt;Testing Correct Formatting&lt;/span&gt;&lt;/p&gt;<br/><br/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:38:35.473

浏览器使用名为 的 HTTP 标头来决定内容类型`Content-Type`。您应该发送内容类型值`text/html`。您现在正在发送`text/plain`，因此浏览器将内容视为纯文本。

请在[此处](http://en.wikipedia.org/wiki/MIME)查看更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:05:09.203

```
<%@ page contentType="text/html; charset=iso-8859-1" language="java"  %>

<%
request.setAttribute("Att","<p><span style=\"background-color: #ff6600; font-family: arial black,avant garde; font-size: large;\">Testing Correct Formatting</span></p>");
%>
<%= request.getAttribute("Att")%>

In place of value in setAttrbiute you can pass your string object. 
```

# android - Android，如何通过两个不同的线程访问一个通用方法？

> ID：10496012
> 
> 赞同：0
> 
> 时间：2012-05-08T09:28:26.570
> 
> 标签：android, serialization, android-asynctask

在我的应用程序中，我有两个线程（我正在使用 AsyncTask 类）。在`doInBackground()`每个线程的方法中，我正在调用自己的`getNewsItems(Url url)`方法，该方法将连接到服务器并获得响应。之后在`onPostExecute()`每个线程的方法中，我将调用`displayData()`方法在屏幕上显示结果。

问题是当我运行时，应用程序崩溃。我认为这是因为这两个线程可以同时访问常用方法，因为当我分离常用方法时，应用程序会成功运行。我不知道是不是因为不使用序列化？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T01:38:43.167

您可以将`synchronized`修饰符添加到由多个线程访问的方法中。

例如

```
public synchronized void getNewsItems(Url url){
    //some logic here
} 
```

这样，当一个线程正在为一个对象执行同步方法时，所有其他为同一对象调用同步方法的线程都会阻塞（暂停执行），直到第一个线程处理完该对象。

你也可以在这里阅读：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)

更新：

你可以`getNewsItems(Url url)`像这样在一个单独的类中：

```
public class NewsItems{
  getNewsItems(Url url){
    //some logic here
  }
} 
```

然后在你的线程中实例化它，如下所示：

```
public void run(){
  NewsItems ni = new NewsItems();
  ni.getNewsItems(url);
} 
```

这样，将调用相同的方法，但在不同的类实例中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:34:25.583

当两个线程可以访问公共方法时没有问题。在不同的类中创建您的通用方法，然后将不同的对象共享给两个不同的线程。不要使常用方法静态同步。

# json - 加快自动完成建议

> ID：10496013
> 
> 赞同：0
> 
> 时间：2012-05-08T09:28:28.320
> 
> 标签：json, jquery, autocomplete

我有一个使用 ajax(json) 来获取 Google 建议(xml) 的脚本，演示：[JsFiddle](http://jsfiddle.net/Xbpk7/8/)

我认为它对缓慢的反应，尤其是在第一次按键时。所以我想加快速度。我首先想到的是在 keydown 而不是默认的 keyup 上做请求。但这并没有加快速度并引起了另一个问题。不可能再出现在名单上。所以我的问题是：有什么方法可以加快第一个键（建议）的速度，也许整个事情都在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:48:51.630

我认为你应该首先加速你的服务器端搜索引擎。+ 您可以在用户输入超过 3 或 4 个字母后自动完成。（然后它会通过更少的搜索结果）+您可以在服务器端为您的搜索查询提供一些限制+还为表分配正确的索引。

您也可以使用缓存作为搜索结果。

# iphone - 特定格式的时区

> ID：10496018
> 
> 赞同：0
> 
> 时间：2012-05-08T09:28:35.507
> 
> 标签：iphone

我对 iphone 中的 TimeZone 概念不熟悉。我有一点疑问，我们如何才能以 (GMT +5:30) 孟买、加尔各答、马德拉斯、新德里的格式获取 iphone 设备中的所有时区。我正在尝试通过使用 api [NSTimeZone knownTimeZoneNames] 并将其放置在一个数组中，但它以不同的格式显示，但我想要上述格式。如果你知道这一点，请帮助任何人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:43:32.650

伙计使用我的代码，如下所示。它需要一些解决方法，但你会得到你想要的。

```
 NSArray *temp = [[NSArray alloc]init];
     temp = [NSTimeZone knownTimeZoneNames];
     for (id tstring in temp)
     {
         NSString *tstring2 = [[NSString alloc]init];
         tstring2 =  tstring;
         NSDate *now = [NSDate date];
         NSDateFormatter *df = [[[NSDateFormatter alloc] init] autorelease];
         [df setTimeStyle:NSDateFormatterLongStyle];
         [df setTimeZone:[NSTimeZone timeZoneWithName:tstring2]];
         NSString *alltime = [df stringFromDate:now];
          NSLog(@"%@ %@",tstring2, alltime);
         [tstring2 release];

     } 
```

**>> OutPut** 你会得到国家数据，但这里我只发布其中的一些数据

```
 Asia/Katmandu 4:21:21 PM GMT+05:45
     Asia/Kolkata 4:06:21 PM GMT+05:30
     Asia/Krasnoyarsk 6:36:21 PM GMT
     America/Tortola 6:36:21 AM AST
     America/Vancouver 3:36:21 AM PDT
     America/Whitehorse 3:36:21 AM PDT
     Europe/Copenhagen 12:36:21 PM GMT+02:00
     Europe/Dublin 11:36:21 AM GMT+01:00
     Europe/Gibraltar 12:36:21 PM GMT 
```

希望对你有帮助..

# javascript - 如何将拉斐尔画布完全（包含一些对象）从一个坐标移动到另一个坐标到另一个坐标

> ID：10496021
> 
> 赞同：3
> 
> 时间：2012-05-08T09:28:52.533
> 
> 标签：javascript, html, dom-events, raphael

我在这里创建了 Raphael 内容.. [http://jsfiddle.net/ryWH3/76/](http://jsfiddle.net/ryWH3/76/)

现在我需要将 Raphael Canvas 的全部内容从一个坐标移动到另一个坐标。

例如：

我的拉斐尔画布在 -- x_coordinate:100,y_coordinate:100

现在我想把它移到 -- x: 200, y :200

从旧坐标中，我想将整个内容移动到 -- x:150, y:150

再次从最后一个坐标到其他一些坐标

请建议我移动此内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:44:15.767

好的，我认为您实际上不能更多地了解论文本身，这是 Raphael 返回给您的 r 变量的内容。你可以遍历元素并对它们做任何你喜欢的事情：

```
r.forEach(function (el) {
   el.translate(200,200);
}); 
```

我更新了你的小提琴来展示它的移动：

[更新的小提琴](http://jsfiddle.net/ryWH3/94/)

**编辑**

我还添加了以下内容来演示为您的各种集合设置动画：

```
Text.animate({transform: "t100,100"}, 1000);
smallCircles.animate({transform: "t100,100"}, 1000);
bigCircles.animate({transform: "t100,100"}, 1000); 
```

[更新了上述动画的小提琴](http://jsfiddle.net/ryWH3/97/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:37:56.163

以 jquery 为例...

```
$(paper.canvas).css({top:topPosition, left: leftPosition}); 
```

paper.canvas 是您获取其内部的 dom 元素的方式。

# linux - 无法以 root 用户身份启动 Oracle 侦听器

> ID：10496026
> 
> 赞同：0
> 
> 时间：2012-05-08T09:29:02.737
> 
> 标签：linux, oracle, oracle10g

我想以 root 用户身份启动 Oracle Listner。我能够以 oracle 用户身份启动侦听器。但它不是以root用户身份启动的。我能够以 root 用户身份停止并检查状态。

当我以 root 身份启动侦听器时，它会给出以下消息：-

```
# lsnrctl start

LSNRCTL for Linux: Version 10.2.0.1.0 - Production on 08-MAY-2012 15:08:11

Copyright (c) 1991, 2005, Oracle.  All rights reserved.

Starting /opt/oracle/102/bin/tnslsnr: please wait...

/opt/oracle/102/bin/tnslsnr: error while loading shared libraries: libclntsh.so.10.1: cannot open shared object file: No such file or directory
TNS-12547: TNS:lost contact
 TNS-12560: TNS:protocol adapter error
  TNS-00517: Lost contact
   Linux Error: 32: Broken pipe 
```

请帮助我以 root 用户身份启动监听器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:55:27.080

您不应该以 root 用户身份运行 Oracle，这是一个安全风险。没有一个理由以 root 用户身份运行 rdbms 和/或侦听器，除非您完全搞砸了安装，甚至不允许以 root 用户身份运行。

如果您确实需要以 root 用户身份运行侦听器，请确保您的环境变量正确。在你的情况下：

```
 # export ORACLE_HOME=/opt/oracle/102
   # export PATH=$PATH:$ORACLE_HOME/bin

   # cd $ORACLE_HOME/bin
   # chmod u+s lsnrctl
   # lsnrctl start 
```

适用于 Linux 的 LSNRCTL：版本 10.2.0.5.0 - 生产于 2012 年 5 月 9 日 20:51:07

> 版权所有 (c) 1991、2010，甲骨文。版权所有。
> 
> 正在启动 /data/oracle/base/product/se_10205_s/bin/tnslsnr：请稍候...
> 
> 适用于 Linux 的 TNSLSNR：版本 10.2.0.5.0 - 生产系统参数文件是 /data/oracle/base/admin/network/listener.ora 写入 /data/oracle/base/product/se_10205_s/network/log/listener 的日志消息.log 监听：(DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=LISTENER)))
> 
> 连接到 (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=LISTENER))) LISTENER 的状态 ------------------------ 别名 LISTENER适用于 Linux 的 TNSLSNR 版本：版本 10.2.0.5.0 - 生产开始日期
> 2012 年 5 月 9 日 20:51:09 正常运行时间 0 天 0 小时。0分钟。0 sec Trace Level off Security ON: Local OS Authentication SNMP OFF Listener Parameter File /data/oracle/base/admin/network/listener.ora Listener Log File /data/oracle/base/product/se_10205_s/network/log/listener. log Listening Endpoints Summary...
> (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=LISTENER))) 监听器不支持服务 命令成功完成

```
# lsnrctl stop 
```

> 适用于 Linux 的 LSNRCTL：版本 10.2.0.5.0 - 生产于 2012 年 5 月 9 日 20:52:16
> 
> 版权所有 (c) 1991、2010，甲骨文。版权所有。
> 
> 连接到 (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=LISTENER))) TNS-01190: 用户无权执行请求的侦听器命令

不要这样做；如果你这样做，你就犯了一个错误。选择属于 dba 组但不是 root 的任何其他用户。

顺便说一句：在这个小演示之后，我不得不解决一个小问题：

> 以 pid=5215 开始 侦听错误：(DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=LISTENER))) TNS-12555: TNS:permission denied TNS-12560: TNS:protocol adapter error
> TNS-00525: Insufficient privilege用于操作 Linux 错误：1：不允许操作

问题是 - 很明显 - /var/tmp/.oracle/sLISTENER 归 root 所有。对正确用户的一点 chown 处理了这一点。

# php - 嵌套的 Foreach 循环

> ID：10496028
> 
> 赞同：0
> 
> 时间：2012-05-08T09:29:08.100
> 
> 标签：php

我是 php 新手。我有一个 foreach 循环，用于检查票并将此票数据输出到谷歌电子表格中，另一个 foreach 循环存储旧票 id，但我需要将新票 id 与旧票 id 数组进行比较，如果存在则删除它并添加新的工单数据。我在比较旧票号和新票号 1 时遇到问题，请告知如何做到这一点。谢谢

```
 foreach ($result->tickets as $ticket)
  {
    // For each for old ticket id's
    foreach ($result->tickets as $oldticket)
    {
           $oldid = $oldticket->id;
    }

    $row = array
    (
          "Ticket ID" => $ticket->id,
          "Ticket Title" => $ticket->title,
          "Created On" => $month_created_on,
          "Solved On" => $solved_on ,
          "Status" => $ticket->status,
          "Time Spent" => $ticket->time_spent,
          "Assigned To" => $ticket->assigned_to->full_name,
          "Mojo Number" => $ticket->assigned_to->mojo_number 
      );

    if ($ticket->id ==  $oldid){
                $ss->deleteRow($row);
    }
    $ss->addRow($row);

    return $row;
  } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:35:31.403

这是一个很难回答的问题，因为不太清楚您要完成什么。

通常，嵌套的 foreach 如下所示：

```
foreach($result as $key => $value){
    foreach($value as $subKey => $subValue){

       //code here while still being able to access $key,$value from the top foreach

     }//foreach

     //code here what you want to do per lower level grouping, ie the second foreach

}//foreach 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:32:24.977

你应该做这样的事情

```
foreach ($result->tickets as $ticket)
{
    // For each for old ticket id's
    foreach ($ticket as $oldticket)
    {
        $oldid = $oldticket->id;
    }

    $row = array
    (
        "Ticket ID" => $ticket->id,
        "Ticket Title" => $ticket->title,
        "Created On" => $month_created_on,
        "Solved On" => $solved_on ,
        "Status" => $ticket->status,
        "Time Spent" => $ticket->time_spent,
        "Assigned To" => $ticket->assigned_to->full_name,
        "Mojo Number" => $ticket->assigned_to->mojo_number 
    );

    if ($ticket->id ==  $oldid){
        $ss->deleteRow($row);
    }
    $ss->addRow($row);

    return $row;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T10:00:55.697

您可以将旧票证 ID 值保存到一个数组中。然后使用 in_array() 函数，如下所示：

```
//Compose old ticket group.
$old_tickets = array();

// Add an old ticket id into old ticket id group
$old_tickets[] = $old_ticket_id;

//When to fetched new ticket ids, inside of loop, check if ticket id is already existing $old_tickets

if(in_array($ticket_id, $old_tickets)) { 
    // Do something, remove a row process in your case.
} 
```

好吧，我看到这与安东的答案相同。:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T09:42:02.853

```
$aOld = array(); // array to save your old tickets.

foreach ($result->tickets as $ticket)
{
  $aRow = array(
      "Ticket ID" => $ticket->id,
      "Ticket Title" => $ticket->title,
      "Created On" => $month_created_on,
      "Solved On" => $solved_on ,
      "Status" => $ticket->status,
      "Time Spent" => $ticket->time_spent,
      "Assigned To" => $ticket->assigned_to->full_name,
      "Mojo Number" => $ticket->assigned_to->mojo_number 
  );
  if (in_array($ticket->id, $aOld)){ // if we had such id, so delete this row, else add it
    $ss->deleteRow($row);
  } else {
    $ss->addRow($row);
    $aOld[] = $ticket->id;
  }
//  return $row; Why this is here? 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T09:34:53.643

像这样重写你的代码：

```
 foreach ($result->tickets as $ticket)
  {

    $row = array
    (
          "Ticket ID" => $ticket->id,
          "Ticket Title" => $ticket->title,
          "Created On" => $month_created_on,
          "Solved On" => $solved_on ,
          "Status" => $ticket->status,
          "Time Spent" => $ticket->time_spent,
          "Assigned To" => $ticket->assigned_to->full_name,
          "Mojo Number" => $ticket->assigned_to->mojo_number 
      );
    // For each for old ticket id's
    foreach ($result->tickets as $oldticket)
    {
        $oldid = $oldticket->id;

        if ($ticket->id ==  $oldid){
                $ss->deleteRow($row);
        }
    }
    $ss->addRow($row);

    return $row;
  } 
```

# c# - 如何检测是否安装了斑马打印机

> ID：10496029
> 
> 赞同：2
> 
> 时间：2012-05-08T09:29:27.740
> 
> 标签：c#, wmi, zebra-printers

我正在.Net（csharp 4.0）中开发一个应用程序，它检测是否安装了斑马打印机，然后如果在EPL中支持zpl，则将条形码发送到zpl中的打印机。如何检查斑马打印机是否已安装或在网络上可用（共享打印机），如果是，它支持 zpl 或 epl。我想检查设备 ID。但它看起来设备 id 只是显示名称，当我从打印机和设备更改打印机名称时会更改。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:34:30.570

您不想检查型号名称。相反，您检查哪些驱动程序正在控制打印机。毕竟——支持 ZPL 的打印机将使用 Zebra 打印机驱动程序。您可以检查 drivername 属性，如下所示。当然，有关打印机还有更多可用的属性。

```
using System;
using System.Management;

namespace Test
{
    class Program
    {
        public static void Main(string[] args)
        {
            string query = string.Format("SELECT * from Win32_Printer");
            ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);
            ManagementObjectCollection coll = searcher.Get();

            foreach (ManagementObject printer in coll)
            {
                //foreach (PropertyData property in printer.Properties)
                //{
                //    Console.WriteLine(string.Format("{0}: {1}", property.Name, property.Value));
                //}

                var property = printer.Properties["DriverName"];
                if (property.Value.ToString().ToLowerInvariant().Contains("zebra"))
                {
                    Console.ForegroundColor = ConsoleColor.Red;
                    Console.Write("ZEBRA: ");
                }
                else 
                {
                    Console.ForegroundColor = ConsoleColor.Gray;
                    Console.Write("Regular: ");
                }

                Console.WriteLine(string.Format("{0}: {1}", property.Name, property.Value));
            }

            Console.Write("Press any key to continue . . . ");
            Console.ReadKey(true);
        }
    }
} 
```

# c# - 如何在VS 2010中添加microsoft.office.interop.word（2003版）

> ID：10496032
> 
> 赞同：4
> 
> 时间：2012-05-08T09:29:39.720
> 
> 标签：c#, ms-word, primary-interop-assembly

我想将 Office 2003 主要互操作程序集添加到 Visual Studio。所以我关注这篇文章：

[http://msdn.microsoft.com/en-us/library/aa159923(v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/aa159923(v=office.11).aspx)

但我只找到版本 12.0.0.0（对于 Office 2007）和版本 14.0.0.0（对于 Office 2010）的 Microsoft.Office.Interop.Word。并且我的 VS 库中不存在 Microsoft.Office.Interop.Word For Office 2003 版本。

我还安装了 Office 2003 更新：可重新分发的主互操作程序集来自 Under Link 但没有区别。 [http://www.microsoft.com/en-us/download/details.aspx?id=20923](http://www.microsoft.com/en-us/download/details.aspx?id=20923)

如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:40:21.993

对于 Interop 的 office 组件，您需要在机器上安装 office。您已在计算机上安装了 Office 2007 和 2010，因此您无法在参考中找到 Office 2007 版本程序集。

但是您可以为互操作安装运行时并执行任务。

[如何安装 Office 主互操作程序集](http://msdn.microsoft.com/en-us/library/kh3965hw%28VS.80%29.aspx)

# download - FileDownload 控件 - 如何格式化日期（created 和 lastmodified）

> ID：10496040
> 
> 赞同：1
> 
> 时间：2012-05-08T09:30:34.840
> 
> 标签：download, xpages, date-format

我正在使用 FileDownload 控件来显示 Notes 文档中的附件列表。

日期显示为：dd/MM/yy hh.mm - 由于我的用户是丹麦人，我想以以下格式显示日期：dd-MM-yyyy hh:mm。

如果您使用 SimpleDateFormater，这非常简单。在 SSJS 中看起来像：

```
var date:Date = new Date(aFile.getCreated());
if(date==null) return date;
return new java.text.SimpleDateFormat("dd-MM-yy hh:mm").format(date); 
```

在 FileDownload 控件中，您可以计算“createdValue”属性的值。但是，该控件需要一个“日期”类型的对象，它不允许在上面的示例中进行格式化（它只是抛出一个错误 500）。

有什么建议么？

/约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T11:36:35.713

您已经发现**createdValue**属性需要一个 java.util.Date 对象，因此更改其格式化方式的唯一方法是更改​​ XPage 使用的浏览器区域设置（如[在此处](https://stackoverflow.com/questions/10460426/control-language-localization-in-extlib-controls "这里")回答）。使用标准下载控件，您可以通过向其添加**var="file"**属性并在 createdValue 属性中使用它来获取每个文件的句柄：

```
createdValue="new Date(file.getCreated());" 
```

如果您想对文件列表进行更多控制，您可以使用重复控件并将其绑定到 RichText 项中的文件列表：

```
<xp:repeat id="repeat1" rows="30" var="file" disableOutputTag="true">
    <xp:this.value><![CDATA[#{javascript:document1.getAttachmentList("files")}]]></xp:this.value>
    <xp:this.facets>
        <xp:text escape="false" disableTheme="true" xp:key="header">
            <xp:this.value><![CDATA[<table><tbody>]]>
            </xp:this.value></xp:text>
        <xp:text escape="false" disableTheme="true" xp:key="footer"><xp:this.value><![CDATA[</tbody></table>]]></xp:this.value></xp:text>
    </xp:this.facets>
    <tr>
        <td>
            <xp:text escape="true" id="computedField1" value="#{file.name}"></xp:text>
        </td>
        <td>
            <xp:text escape="true" id="computedField2">
                <xp:this.value><![CDATA[#{javascript:var date:Date = new Date(file.getCreated());
    return new java.text.SimpleDateFormat("dd-MM-yy hh:mm").format(date);}]]></xp:this.value>
      </xp:text>
    </td>
  </tr>
</xp:repeat> 
```

顺便说一句：默认下载控件的另一个缺点是它为每个链接添加了一个内容处置标头，因此浏览器总是询问您是否要保存或打开文件而不是直接打开图像（例如）。

# android - 如何在 onDraw 方法中创建和显示列表视图？

> ID：10496044
> 
> 赞同：1
> 
> 时间：2012-05-08T09:31:16.490
> 
> 标签：android, view, ondraw

我是Android新手，所以请帮助我。在 onDraw 方法中，我画了很多东西，我想把它们作为背景。当我点击角落时，我想要列表视图（带有 SeekBars、按钮等）以及我之前作为背景绘制的所有内容。当列表视图滚动时，此背景不必滚动。如何创建和设置这样的列表视图？

我的.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

<com.project.MyView
    android:id="@+id/main_view"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:40:29.357

将您的自定义视图作为整个屏幕的背景。您可以通过将根视图作为您的自定义视图来做到这一点。然后计算触摸角并使您的子视图（即列表视图可见）。

# iphone - iPhone：我们如何为表格视图中的行加载自定义复选标记图像？

> ID：10496046
> 
> 赞同：0
> 
> 时间：2012-05-08T09:31:36.357
> 
> 标签：iphone, uitableview, didselectrowatindexpath, checkmark

当用户选择任何行并且插入新行时，我想为 tableview 单元格显示一个自定义复选标记和取消复选标记图像，该单元格加载了未复选标记图像。

一旦我检查了该行，那么即使在使用新数据重新加载表之后，我也想显示以前检查过的行，而新的则未选中。

我怎样才能得到最后带有复选标记的所有行。

我试过了，但我无法在第一次加载自定义复选标记图像时我可以在取消选择行时进行更改，但它也有一些问题，因为它不能像我上面提到的那样始终如一地工作。

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    return 1;

 }

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

   return [cardData.mArrRecipient count];

 }

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString * sCellIdentifier = @"cell";
    NSLog(@"cellforrow");

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:sCellIdentifier];
    if (cell == nil) 
{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:sCellIdentifier] autorelease];

    RecipientData *recipientData = [[cardData.mArrRecipient objectAtIndex:indexPath.row]autorelease];
    cell.textLabel.text = recipientData.sRecipientFName;
} 
cell.accessoryType=UITableViewCellAccessoryNone;
cell.selectionStyle = UITableViewCellSelectionStyleNone;
return cell;
}

 -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
 {

    if (IndexPath) 
    {
        UIImageView *imageView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"img_checkmark_red.png"]] autorelease];
        [tableView cellForRowAtIndexPath:indexPath].accessoryView = imageView;
        IndexPath=FALSE;
    }
    else 
    {
        UIImageView *imageView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"img_uncheckmark_red.png"]] autorelease];
        [tableView cellForRowAtIndexPath:indexPath].accessoryView = imageView;
        IndexPath=TRUE; 
    }
  }

  -(void)viewWillAppear:(BOOL)animated
  {

[super viewWillAppear:animated];   
if ([cardData.mArrRecipient count]>0) 
{
    [IBTblNewRecipientDetail reloadData];        
}
 } 
```

谁可以帮我这个事？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:38:57.613

这是教程 [http://weheartgames.com/2009/06/simple-iphone-checkbox/](http://weheartgames.com/2009/06/simple-iphone-checkbox/)

或使用这个

```
 UIButton   * checkBox=[UIButton buttonWithType:UIButtonTypeCustom];
        checkBox.tag=indexPath.row;
        checkBox.frame=CGRectMake(270,15, 20, 20);
        [cell.contentView addSubview:checkBox];
        [checkBox setImage:[UIImage imageNamed:@"selectedBoxWith.png"] forState:UIControlStateNormal];
        [checkBox addTarget:self action:@selector(checkBoxClicked:) forControlEvents:UIControlEventTouchUpInside];

-(void)checkBoxClicked:(id)sender{
if(self.isChecked ==NO){
  self.isChecked =YES;
  [sender  setImage:[UIImage imageNamed: @"selectedBoxWithTik.png"] forState:UIControlStateNormal];
}else
{
   self.isChecked =NO;
  [sender setImage:[UIImage imageNamed:@"selectedBoxWith.png"]forState:UIControlStateNormal];

    }
}

and 

-(void)checkBoxClicked:(id)sender{

    UIButton *tappedButton = (UIButton*)sender;

    if([tappedButton.currentImage isEqual:[UIImage imageNamed:@"selectedBoxWith.png"]]) {
        [sender  setImage:[UIImage imageNamed: @"selectedBoxWithTik.png"] forState:UIControlStateNormal];
    }

    else {
        [sender setImage:[UIImage imageNamed:@"selectedBoxWith.png"]forState:UIControlStateNormal];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T04:35:00.957

用于选择多行：

```
- (void)addTableView {

self.tableView = [[UITableView alloc] initWithFrame:CGRectMake("whatever frame you want to set")
                                                        style:UITableViewStylePlain];
self.tableView.dataSource = self;
self.tableView.delegate = self;
self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;

self.timeSheetEntryTableView.allowsMultipleSelection = YES;

self.array = [[NSMutableArray alloc]init];
[self.view addSubview:self.tableView];

}

- (UITableViewCell *)tableView:(UITableView *)tableView
 cellForRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *cellIdentifier = @"Cell Identifier";

self.cell=[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if (!self.cell) {

self.cell = [[Cell alloc]initWithStyle:UITableViewCellStyleDefault
                               reuseIdentifier:cellIdentifier];
self.cell.accessoryType = UITableViewCellAccessoryNone;

}
self.cell.selectionStyle = UITableViewCellSelectionStyleNone;
if ([self.array containsObject:indexPath])
{
[self.cell.checkImage setImage:[UIImage imageNamed:@"check_box_selected.png"]];
}
else
{
 [self.cell.checkImage setImage:[UIImage imageNamed:@"check_box.png"]];
}

return self.cell;

} 
```

//是否选择和取消选择我使用了自定义单元格

```
 - (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

self.cell = [tableView cellForRowAtIndexPath:indexPath];

[self.array addObject:indexPath];
[self.cell.checkImage setImage:[UIImage imageNamed:@"check_box_selected.png"]];

}

- (void)tableView:(UITableView *)tableView 
didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {

self.cell = [tableView cellForRowAtIndexPath:indexPath];

[self.array removeObject:indexPath];

[self.cell.checkImage setImage:[UIImage imageNamed:@"check_box.png"]];

} 
```

# sql-server - 使用动态表的跨服务器 SSIS 自动提取

> ID：10496047
> 
> 赞同：0
> 
> 时间：2012-05-08T09:31:38.833
> 
> 标签：sql-server, ssis, extract

你必须原谅我对此的无知——我通常是一个服务器类型的人！

我有一个实时和报告服务器，我们将调用`LIVE`和`REP`。

我有一组表`LIVE`，其中的一些数据需要`PIVOT`每晚**都**加载到`REP`服务器上。这已经通过 SSIS 包发生 - 问题是 - **提取脚本是固定的*，但*我需要它是动态*的。

IE。我需要一个新表，在`LIVE`该表上定义提取到的确切内容`REP`。

这意味着我想

*   `REP`每天晚上DROP 提取的表
*   `REP`按照表中的定义创建新`LIVE`表
*   构建动态 SQL 以从`LIVE`表中 SELECT 到新创建的`REP`表中

我很担心，因为我知道 SSIS 对表定义等可能很有趣。

**我不是在问如何构建动态 SQL——**我已经完成了那部分，并且它完全运行良好`LIVE`——但它需要是跨服务器的。

以前有人做过吗？最佳做法是什么？我什至可以`EXEC`在 SSIS 包中动态 SQL，这可以安排吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:12:24.210

这可能会给你一些想法：

创建主工作流，您可以在其中动态构建删除表并通过创建结果集来创建表列表：

![主要工作流程](../Images/e3b621addb6413b915489d32b0b21957.png)

设置一个循环遍历结果集中的每个表：

![对于每个循环设置 1](../Images/76a168702558e873dabd2fb7f33020ad.png)

![对于将当前表存储在变量中的每个循环](../Images/20af3f356306e343351486b0f29248f3.png)

然后在您的数据流任务中，您可以从一个连接/表中读取并写入另一个：

![数据流任务](../Images/7561299ff908d6921e2ae6ef8da13b31.png)

# javascript - Programmatically set the 'readonly' attribute of the editoptions options in jqGrid column

> ID：10496057
> 
> 赞同：0
> 
> 时间：2012-05-08T09:32:22.200
> 
> 标签：javascript, jquery, jqgrid, options

I'm using jqgrid's form editing feature.

Can I programmatically set the `readonly` attribute of the `editoptions` options in the `jqgrid`?

I need to determine if as specific field would be `readonly` or not, depends on one of the current row cell value.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:01:01.563

You can set `readonly` attribute inside of `beforeShowForm` on the field (see [here](https://stackoverflow.com/a/3952654/315935)) or alternatively you can set/remove `readonly: 'readonly'` property (see [here](https://stackoverflow.com/a/7058114/315935)) of the `editoptions` for the column inside of `beforeInitData` which will be called *before* the edit form will be created. You can use `setColProp` for example to change `editoptions` (see [here](https://stackoverflow.com/a/9019406/315935) an example).

To implement the changes depends on the cell value from some column you need just get the id of selected row with respect of `getGridParam` and then get the cell value using `getCell` (see [here](https://stackoverflow.com/a/3021186/315935)).

In any cases I recommend you to use `recreateForm: true` option of form editing. It should be default options in my opinion.

# javascript - 如何在使用 window.onerror 处理来自 statement1 的错误时继续 statement2

> ID：10496061
> 
> 赞同：1
> 
> 时间：2012-05-08T09:32:44.133
> 
> 标签：javascript, error-handling, try-catch

我`window.onerror(message,url,line)`用来记录我的错误消息，因为它为我提供了比`try{}catch(e){}`.

但是，请考虑以下事项：

```
function1(); // Generates error
function2(); // Will not be executed 
```

如何确保在仍使用 window.onerror 的同时触发*function2 ？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:34:38.783

你不能。如果您需要允许以后代码执行的错误处理，您**必须**使用 try..catch。

幸运的是，JavaScript 没有任何与 VB6 等效的东西`On Error Resume Next`；它会让很多糟糕的 JavaScript 代码变得更糟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:03:52.793

[在这里](http://jsfiddle.net/sBw6u/1/)做了一个你的小提琴的叉子，我所做的只是用捕获的错误显式地触发 window.onerror 事件。

似乎几乎是真的:)

```
try
{
    function2();
}
catch(error)
{
    window.onerror(error);
} 
```

​</p>

**更新**

找到了一种获取行号和网址的方法。代码目前有点混乱，但可以工作，所以它应该让你开始......

```
try
{
    function1();
}
catch(error)
{
    var url = error.stack.split('\n')[1].match(/\(.+\)/g)[0];
    var line = url.match(/\/\:[0-9]+.+$/g)[0];
    url = url.replace('(','').replace(line,'');
    line = line.replace(')','').replace('/:','')
    window.onerror(error,url,line);
} 
```

[这是工作的](http://jsfiddle.net/sBw6u/4/)jsfiddle

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:47:57.637

同时，我找到了一种使用方法`setTimeout`，但我希望可能有更好的方法：

```
setTimeout(function1);
setTimeout(function2); 
```

见[http://jsfiddle.net/7y2Ej/1/](http://jsfiddle.net/7y2Ej/1/)

# jquery - jquery下拉列表“其他”可编辑的称呼

> ID：10496065
> 
> 赞同：0
> 
> 时间：2012-05-08T09:32:48.727
> 
> 标签：jquery, drop-down-menu

我正在尝试创建一个下拉菜单“饱和”，另一个选项是可编辑的。用户可以选择下拉列表中的所有选项，但如果不匹配，他可以选择“其他”类型他想要的。我在我的演示中放了一些东西，但我很卡住。

[http://jsfiddle.net/Rjqy5/57/](http://jsfiddle.net/Rjqy5/57/)

```
title -> this will change once selected the other
Mr
Mrs
Miss
Ms
Other -> this will be editable. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:14:42.683

```
 $(document).ready(function () {
            $('.dropdown').live('mouseenter', function () {
                $('.sublinks').stop(false, true).hide();

                var submenu = $(this).parent().next();

                submenu.css({
                    position: 'absolute',
                    top: $(this).offset().top + $(this).height() + 'px',
                    left: $(this).offset().left + 'px',
                    zIndex: 1000
                });

                submenu.stop().slideDown(300);

                submenu.mouseleave(function () {
                    $(this).slideUp(300);

                    $('a#other').focus(function () {
                        $('#change').blur();
                    });
                });
            });

            $('#tbOthers').live('keypress focusout', function (e) {
                var textTitle = $.trim($(this).val());
                if (e.type === 'keypress') {
                    if ((e.keyCode ? e.keyCode : e.which) === 13) {
                        if (textTitle.length === 0) {
                            $(this).replaceWith('<a href="#" class="dropdown" id="change">Title</a>');
                        }
                        else {
                            $(this).replaceWith('<a href="#" class="dropdown" id="change">' + textTitle + '</a>');
                        }
                    }
                } else if (e.type === 'focusout') {
                    if (textTitle.length === 0) {
                        $(this).replaceWith('<a href="#" class="dropdown" id="change">Title</a>');
                    }
                    else {
                        $(this).replaceWith('<a href="#" class="dropdown" id="change">' + textTitle + '</a>');
                    }
                }
            });

            $('#mainLink').find('.sublinks a').live('click', function (e) {
                var objChange = $('#mainLink').find('#change');
                if ($(this).attr('id') === 'other') {
                    objChange.parent().append($('<input />', { 'id': 'tbOthers', 'type': 'text' }));
                    objChange.remove();
                    alert('dd');
                }
                else {
                    objChange.text($(this).text());
                }
            });

        }); 
```

# android - 在我的应用程序中创建了彩信，但未显示在本机消息应用程序中

> ID：10496068
> 
> 赞同：1
> 
> 时间：2012-05-08T09:33:05.020
> 
> 标签：android, mms

我创建了彩信。问题是：这显示在我的应用程序中，但未显示在 android 本机消息应用程序中。你知道什么是错的吗？我应该为 thread_id 设置什么？提前致谢。

---这是我的代码---

```
ContentResolver cr = getContentResolver();

ContentValues cv = new ContentValues(); 
cv.put("thread_id", System.currentTimeMillis() % 100); 
cv.put("ct_t", "application/vnd.wap.multipart.related");
cv.put("read", "1"); 
Uri temp_mms = cr.insert(Uri.parse("content://mms/inbox"), cv); 
String str_uri = temp_mms.toString(); 
String newID = temp_mms.getLastPathSegment().trim();

 ContentValues cv_addr2 = new ContentValues(); 
 cv_addr2.put("address", "112233"); 
 Uri temp_mms_addr2 = cr.insert(Uri.parse("content://mms/"+ newID +"/addr"), cv_addr2); 

 // ------------------------------PART Table ContentValues 
 Uri uriPart = Uri.parse("content://mms/"+ newID +"/part");
 ContentValues cv_part2 = new ContentValues(); 
 cv_part2.put("ct", "image/jpeg"); 
 Uri temp_mms_part2 = cr.insert(uriPart, cv_part2);

 OutputStream os = cr.openOutputStream(temp_mms_part2);
 InputStream is = cr.openInputStream(selectedImageUri);
 byte[] buffer = new byte[256];
 for (int len = 0; (len = is.read(buffer)) != -1; ) {
     os.write(buffer, 0, len);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:33:58.133

部分答案：不确定为什么它没有出现在内置消息应用程序中，但请查看[如何在 Android 中读取 MMS 数据的答案？](https://stackoverflow.com/questions/3012287/how-to-read-mms-data-in-android)有关如何获取线程 ID 的信息。

编辑：您可能还需要`content://mms/{id}/addr`为发件人添加一个地址条目，如果这是来自当前设备，似乎`insert-address-token`就足够了。地址条目还需要为接收地址和发件人`type`设置一个。`151``137`

可能还需要更多内容，我会阅读现有的数据库，然后逐个字段地浏览它，并确保您涵盖了其中不包含`null`或`0`.

# javascript - 获取动态更改的 asp.net 标签的值

> ID：10496069
> 
> 赞同：4
> 
> 时间：2012-05-08T09:33:06.517
> 
> 标签：javascript, jquery, asp.net, web, controls

我有一个 asp.net 标签 web 控件。我使用 jQuery .html() 函数动态更改其文本。当我尝试在服务器上获取标签的当前值时，它会显示页面加载时的原始值。有什么办法可以使标签的 jQuery 更改永久化，以便我可以在服务器上获取它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:39:07.980

您需要将 JQuery 更改镜像到另一个将在服务器端持续存在的控件中。

例如，使用一个隐藏字段，将`runat="server"`您的更改隐藏到此，然后这将在服务器上持续存在，即从隐藏字段读取标签更改

所以

**jQuery**

```
$('#labelID').html('New Text');

$('#hiddenFieldID').val('New Text'); 
```

**服务器端**

```
string labelText = hiddenFieldID.value; 
```

这并不漂亮，但这是我发现的唯一方法。

JQuery 不与之交互，`ViewState`因此 JQuery 的任何更改都会在回发时丢失。这是我认为人们现在转向 MVC 的原因之一。回发架构不能很好地适应客户端的变化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:38:25.203

我认为您不能开箱即用地做到这一点（尽管我可能是错的）。问题是标签不是 HTML 表单字段，因此它的值不会在回发时发送回服务器，因此将使用 ViewState 值或默认值，而不是更新后的值。

您可以一起破解一些东西，您还可以在隐藏字段中设置标签值，这将在回发时被发送回服务器，并在回发时使用它来填充标签的值（如果它已被更改）？

# dotnetnuke - 多个 DotNetNuke 模块定义之间的识别

> ID：10496073
> 
> 赞同：2
> 
> 时间：2012-05-08T09:33:25.523
> 
> 标签：dotnetnuke, dotnetnuke-module, dotnetnuke-6

我在 DotNetNuke 6 中构建了一个包含多个模块定义的模块。一个模块可以添加到多个页面（选项卡），多个模块可以添加到一个页面（选项卡）。问题是我找不到将我的所有模块定义从一个实例联系在一起的标识符。

`DesktopModuleId`仅对于安装的每个模块都是唯一的（不是每个实例和页面）。

`ModuleId`对于每个模块实例**和定义**都是唯一的。

`TabModuleId`对于每个模块实例和选项卡**和定义**都是唯一的。

*因此，我正在寻找一种在我将模块放在页面上时识别哪些模块定义属于彼此的方法。*

我发现一个论坛帖子解释了同样的问题，有人建议查看`ModuleId`每个定义并检查它们是否是连续的。我觉得这很hackies。

编辑：
我正在开发的模块包含许多不同的定义，但假设我们有 3 个（查看、编辑和设置）。当我安装模块时，我必须为模块设置一个类别，比如我希望它是一个博客模块。然后，所有 3 个定义都将从数据库中获取具有相同唯一 ID 的数据（假设）。现在我再次安装相同的模块，我想选择另一个类别（投资组合）并且只获取该数据。DNN 现在的工作方式，我无法将我的博客项目与我的投资组合项目分开，因为无法知道我的 3 个博客定义彼此属于并且与其他 3 个投资组合定义分开。我希望这是有道理的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:31:21.400

如果`DesktopModuleId`每个模块都是独立的，那么根据 DNN，它们就没有任何关系。`PackageId`将它们关联起来的可能性很小`DesktopModule`，但我还没有看到在同一个包中安装多个桌面模块的方法（并且包是功能的最高级别包含）。

听起来您希望所有模块定义都包含在一个桌面模块中。在用于安装模块的清单中，确保只有一个`package`元素并且只有一个`component[type="Module"]`元素。在该`component`元素内部，`moduleDefinition`每个模块都有一个。然后，可以将单个模块添加到页面中，并且在您执行此操作时将包含每个部分（您可以自由删除不需要的任何部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:49:56.263

我不知道你到底想达到什么。但是如果我尝试在同一页面上多次放置一个模块并保持它“唯一”，我也会遇到问题。

就我而言，我尝试设置不同的模块设置并在 Page_Load() 对此设置做出不同的反应。

我决定使用

```
Session["8400f2b6-d930-47af-a524-fc16721b4591"] = new List<KeyValuePair<int, string>>(); 
```

GUID 将帮助我保持 Session 的唯一性。List<> 将使用 ModuleID、mySpecialSetting 存储我的特殊设置。

如果您在同一页面上多次放置一个模块，这可能会帮助您获得唯一的特殊模块信息。

最好的问候，没有人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T21:34:59.377

我用下面的代码解决了我自己的问题。这不是首选的解决方案，但我使用它取得了成功，并且在 DNN 实施真正的解决方案之前它会起作用。

类中的所有方法都`Controller`连接数据库中的自定义表。代码检查所有模块定义是否在当前页面（选项卡）上并且不在数据库中。如果不是，它将结合新的实例 ID 将其添加到数据库中。如果页面中添加了 2 个或更多相同的模块并且此代码稍后运行（例如更新），它将仅获取顺序的模块 id（其他模块 id 将稍后添加）。

```
ModuleInstanceId = Controller.GetModuleInstanceId(TabModuleId);
if (ModuleInstanceId == -1)
{
    Dictionary<Int32, String> ModuleInstanceDefinitions = new Dictionary<Int32, String>();
    Dictionary<String, ModuleDefinitionInfo> ModuleDefinitions = new ModuleController().GetModule(ModuleId).DesktopModule.ModuleDefinitions;
    foreach (ModuleDefinitionInfo ModuleDefinition in ModuleDefinitions.Values)
    {
        List<ModuleInfo> Modules = new ModuleController().GetModulesByDefinition(PortalId, ModuleDefinition.FriendlyName).ToList<ModuleInfo>();
        foreach (ModuleInfo Module in Modules)
        {
            if (Module.TabID == TabId)
            {
                if (Controller.GetModuleInstanceId(Module.TabModuleID) == -1 || Controller.GetModuleInstanceId(ModuleDefinition.FriendlyName) == -1)
                {
                    ModuleInstanceDefinitions.Add(Module.TabModuleID, ModuleDefinition.FriendlyName);
                }
            }
        }
    }

    // Probably shouldn't be more then specified in the manifest;
    // Only situatie this could occure is when the module is added to a page twice at the same page;
    ModuleInstanceDefinitions = ModuleInstanceDefinitions.OrderBy(ModuleDefinition => ModuleDefinition.Key).Take(ModuleDefinitions.Count).ToDictionary(Item => Item.Key, Item => Item.Value);

    ModuleInstanceId = Controller.SetModuleInstances(ModuleInstanceDefinitions);
} 
```

希望有人会发现这很有用，或者 DNN 会将其添加到源代码中:)

# php - PHP：使用带有 cUrl 的“WebForm_DoPostBackWithOptions”发布 ASPX 表单

> ID：10496079
> 
> 赞同：5
> 
> 时间：2012-05-08T09:34:05.530
> 
> 标签：php, curl

我正在尝试发布一个使用 SharePoint 和 PHP 的 ASPX 表单。 **发布数据适用于标准表格**，我似乎无法让这个表格工作。我确实注意到`onclick`提交按钮上的一个属性：

```
onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$PlaceHolderMain$btnSaveTask", "", true, "", "", false, false))" 
```

我从未使用过 ASPX，也不知道这是什么。这不是身份验证问题或 url 有问题，因为它可以正常返回网页（包含表单）。

这是我的PHP代码：

```
function add($username, $password){

    $data = array(
        'ctl00$PlaceHolderSearchArea$ctl01$ctl00' => 'https://keystone.stpeters.sa.edu.au',
        'ctl00$PlaceHolderSearchArea$ctl01$ctl04' => '0',
        'ctl00$PlaceHolderMain$DateStart$DateStartDate' => '9/05/2012',
        'ctl00$PlaceHolderMain$DateDue$DateDueDate' => '10/05/2012',
        'ctl00$PlaceHolderMain$Title' => 'test again',
        'ctl00$PlaceHolderMain$btnSaveTask' => 'OK',
        '__spText1' => '',
        '__spText2' => ''
    );

    $curl_handle = curl_init();
    $fullurl = "https://keystone.stpeters.sa.edu.au/_layouts/StPeters.Keystone/MyTasks/MyTaskDetail.aspx?id=0&IsDlg=1"; // 
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_FAILONERROR, 0);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
    curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
    curl_setopt($ch, CURLOPT_URL, $fullurl);

    $returned = curl_exec($ch);

    curl_close ($ch);

    return $returned;
} 
```

# google-maps - 放大地图时保持信息窗口在视图中

> ID：10496080
> 
> 赞同：1
> 
> 时间：2012-05-08T09:34:08.097
> 
> 标签：google-maps, google-maps-api-3, infowindow

刚刚开始将我们的地图从 API 的 V2 转换为 v3。

到目前为止遇到的一个问题是，当 InfoWindow 打开并放大地图时，InfoWindow 将移出地图并最终不可见，这与 V2 中的行为不同。在 V2 中，InfoWindow 始终处于可见状态。

V2 地图： http: [//www.stroud.gov.uk/docs/housing/tenant_map_v2.asp](http://www.stroud.gov.uk/docs/housing/tenant_map_v2.asp)

V3 地图： http: [//www.stroud.gov.uk/docs/housing/tenant_map_v3.asp](http://www.stroud.gov.uk/docs/housing/tenant_map_v3.asp)

只需单击任何标记以打开它的信息窗口，然后使用普通缩放控件放大地图。

有没有办法保持 V2 地图中的行为？

谢谢，迈克

* * *

我想出了一个可行的解决方案。URL 如上，但使用tenant_map.asp

```
var currentInfoWindow = null; // new global scope variable to hold current open infoWindow 
```

在我添加的 google.maps.event.addListener(newMarker, "click" 函数中：

```
currentInfoWindow = this; 
```

添加一个 zoom_changed 监听器：

```
google.maps.event.addListener(theMap, "zoom_changed", function () {
    if (currentInfoWindow != null) {
        infoWindow.open(theMap, currentInfoWindow);
    }
}); 
```

和一个 infoWindow closeclick 监听器：

```
google.maps.event.addListener(infoWindow, "closeclick", function () {
    currentInfoWindow = null;
}); 
```

似乎工作正常，缩放时做一点平移，但这是我迄今为止唯一要做的事情。

它看起来不如V2地图，所以如果其他人有更好的解决方案，请发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:37:51.703

在我看来，因为 V2 地图在您缩放时会直接缩放到最后一个突出显示的标记上。V3 只是放大地图当前居中的位置。如何让标记单击事件处理程序将地图重新​​集中在该标记上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:24:24.420

这是一个将信息窗口保持在适当位置的缩放功能。我正在使用自己的缩放控件并调用`zoomBy(1)`放大一个级别或`zoomBy(-2)`缩小两个级别。

```
var helperOverlay = new google.maps.OverlayView();
helperOverlay.draw = function(){};
helperOverlay.setMap(map);

function zoomBy(delta) {
  var newZoom = map.getZoom() + delta;
  if ( newZoom < 0 ) return;
  var projection = helperOverlay.getProjection();
  if ( projection ) { // projection may be undefined (if the overlay is not ready I guess)
    var center = projection.fromLatLngToContainerPixel(map.getCenter());
    var focus  = projection.fromLatLngToContainerPixel(infoWindow.getPosition());
    for (var i = Math.abs(delta); i > 0; i--)
      center = (delta > 0) ?
        new google.maps.Point((center.x + focus.x)/2, (center.y + focus.y)/2) :
        new google.maps.Point(center.x * 2 - focus.x, center.y * 2 - focus.y);
    map.setCenter(projection.fromContainerPixelToLatLng(center));
  }
  map.setZoom(newZoom);
} 
```

[数学是从这个滚轮缩放实现](http://code.google.com/p/google-maps-utility-library-v3/source/browse/trunk/scrollwheelzoom/src/scrollwheelzoom.js?r=26 "这个滚轮缩放实现")中借来的。如果我们可以调用内置的滚轮缩放实现传递信息窗口的位置，那就太好了。

# php - 正则表达式在模式之间添加一些东西，同时保留其间的模式

> ID：10496082
> 
> 赞同：1
> 
> 时间：2012-05-08T09:34:13.590
> 
> 标签：php, regex, preg-replace

**简而言之**
，给定一个这样的字符串 -

```
MAX_checkTime_Hour('0,1', '=~') and (MAX_checkTime_Day('1,2', '=~') or MAX_checkTime_Day('1,2', '=~')) and MAX_checkGeo_Country('DZ,AO,BJ) 
```

我想在或或等`<br />`模式之前和之间插入标签，以便输出是 -`and MAX_``and (MAX_``and ((MAX_`

```
MAX_checkTime_Hour('0,1', '=~')<br /> and <br />(MAX_checkTime_Day('1,2', '=~') or MAX_checkTime_Day('1,2', '=~'))<br /> and <br />MAX_checkGeo_Country('DZ,AO,BJ) 
```

**到目前为止我所做**
的通过以下正则表达式替换，我几乎就在那里。标签的插入`<br />`正在工作，但我必须插入固定数量的`&nbsp;`s -

```
preg_replace("/\s+and\s+MAX_/",'<br />&nbsp;&nbsp;&nbsp;and&nbsp;&nbsp;&nbsp;<br />MAX_',$str); 
```

**我想**——

*   保留确切数量的空格。
*   保留前括号的确切数量`MAX_`。

所以，如果原始字符串是这样的 -

```
MAX_checkTime_Hour('0,1', '=~') <3 white spaces here> and <5 white spaces here> #2 first brackets here#MAX_checkTime_Day('1,2', '=~') 
```

我希望输出是 -

```
MAX_checkTime_Hour('0,1', '=~')<br /> <3 white spaces here> and <5 white spaces here> <br /><first brackets here>MAX_checkTime_Day('1,2', '=~') 
```

**更新**
我尝试使用以下假设可变数量的空格将存储在变量中，但它不起作用 -

```
preg_replace("/{\s+}and{\s+}MAX_/",'<br />$1and$2<br />MAX_',$str); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:44:54.893

**尝试这个：**

```
$result = preg_replace('/(?<=and)(?=[\s(]+MAX_)/im', '<br />and<br />MAX_\'', $subject); 
```

**正则表达式解释**

```
<!--
(?<=and)(?=[\s\(]+MAX_)

Options: case insensitive; ^ and $ match at line breaks

Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=and)»
   Match the characters “and” literally «and»
Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=[\s\(]+MAX_)»
   Match a single character present in the list below «[\s\(]+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
      A whitespace character (spaces, tabs, and line breaks) «\s»
      A ( character «\(»
   Match the characters “MAX_” literally «MAX_»
--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:01:44.913

我想您忘记了源中的“或”运算符（位于第三个 MAX_ 之前）。有替代品。正则表达式的版本 - 它更通用（因为它可以匹配并安全地替换 'and' 和 'or' 运算符）并且它经过了一些优化（因为它不使用前瞻/后视语法）：

```
$result = preg_replace('/(\s+(and|or)\s+)(\(*MAX_)/', '<br/>$1<br/>$2', $str); 
```

它也兼容[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，替换字符串不包含源字符串的任何部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:04:54.587

怎么样：

```
$str = "MAX_checkTime_Hour('0,1', '=~') and (MAX_checkTime_Day('1,2', '=~') or MAX_checkTime_Day('1,2', '=~')) and MAX_checkGeo_Country('DZ,AO,BJ)";

echo preg_replace("/(\s+)and(\s+)(\(*MAX_)/", "<br />$1and$2<br />$3", $str); 
```

**输出：**

```
MAX_checkTime_Hour('0,1', '=~')<br /> and <br />(MAX_checkTime_Day('1,2', '=~') or MAX_checkTime_Day('1,2', '=~'))<br /> and <br />MAX_checkGeo_Country('DZ,AO,BJ) 
```

# iphone - Phonegap iOS：如何在多任务返回时更新内容

> ID：10496087
> 
> 赞同：1
> 
> 时间：2012-05-08T09:34:33.110
> 
> 标签：iphone, ios, cordova

嗨，我有一个问题，当没有启用 gps 时会显示一条消息，然后您转到设置并激活 gps（定位服务：打开）并返回应用程序并且它不刷新？如何检测该事件并刷新页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:50:43.287

您很可能正在寻找`- (void)applicationWillEnterForeground:(UIApplication *)application`您的应用程序委托的方法。

实现此方法，并添加检查 GPS 可用性的代码。每当您的应用程序从后台（非活动）进入前台（活动）时，都会调用该方法。最初启动应用程序时不会调用它。

# mysql - MySQL PHP - 按日/月/年分组结果？

> ID：10496093
> 
> 赞同：0
> 
> 时间：2012-05-08T09:34:55.897
> 
> 标签：mysql, date, group-by, sql-order-by

我有一个表（日志），我在其中保存了我的服务器上发生的事情的日志，我想创建一个函数来对我得到的结果进行排序。为了更好地解释：

我的查询是。

```
SELECT * 
  FROM Logs 
  WHERE username = '$user' 
  ORDER BY cur_timestamp DESC 
```

（cur_timestamp 是我的日志表中的一个字段，记录插入的时间戳）
（$user 是用户名（之前设置的））

这将像往常一样按降序返回所有记录的数组。现在我想做的是查询数据库并让它只返回某一天或某月内的记录等，例如，如果用户选择一个月，我希望它只返回所有记录那个月。

我一直在尝试研究该做什么，并且事情似乎指向我使用该`GROUP BY`技术，但这只返回一个结果。我不确定。任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:38:45.610

示例（2012 年 1 月的日志）：

```
SELECT * 
FROM Logs 
WHERE username = '$user' 
and cur_timestamp between '2012-01-01' and '2012-01-31'
ORDER BY cur_timestamp DESC 
```

只有今天：

```
SELECT * 
FROM Logs 
WHERE username = '$user' 
and date(cur_timestamp) = curdate()
ORDER BY cur_timestamp DESC 
```

如果您想从过去到现在的特定时间，您可以使用[DATEADD](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)。

示例（过去 30 天的日志）：

```
SELECT * 
FROM Logs 
WHERE username = '$user' 
and date(cur_timestamp) >= DATE_ADD(curdate(), INTERVAL -30 DAY)
ORDER BY cur_timestamp DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:45:16.797

如果我正确理解您的问题，我认为您不需要 GROUP BY，而只是添加一个 WHERE 以选择特定时间范围内的所有日志

```
SELECT * 
FROM Logs 
WHERE username = '$user'
AND cur_timestamp > '2010-01-01'
AND cur_timestamp < '2012-12-01'
ORDER BY cur_timestamp DESC 
```

您唯一需要做的就是调整日期范围。不需要任何 GROUP BY

# r - data.frame 中的“选择性”连接？

> ID：10496095
> 
> 赞同：2
> 
> 时间：2012-05-08T09:35:08.393
> 
> 标签：r, merge, dataframe

我有两个相同长度的向量。这是一个具有四行的简单示例：

```
[1] green  
[2] black, yellow  
[3] orange, white, purple  
[4] NA  

[1] red  
[2] black  
[3] NA  
[4] blue 
```

第一个或第二个向量中可以有 NA，但在每一行中，它们中的至少一个总是有一个值。第一个向量可以包含一个或多个值，而第二个向量只能有一个。我想“有选择地”逐行连接这两个向量，输出将是这样的：

```
[1] green, red  
[2] black, yellow  
[3] orange, white, purple  
[4] blue 
```

这意味着第一个向量的内容必须始终存在于输出中。如果第一个向量的一行中有 NA，它将被第二个向量的同一行中的值覆盖。
如果此值不在第一个向量的同一行中，则将添加第二个向量的内容。第二个向量中的 NA 将被忽略。

我试过了：

```
merge(A,B)
merge(A, B, all=TRUE)
merge(A, B, all.x=TRUE)
merge(A, B, all.y=TRUE) 
```

但它们都产生完全不同的结果。

如上所述，我怎样才能实现这种“选择性”连接？

非常感谢您的考虑！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:00:21.793

你本质上是在尝试做一个“联合，然后扔掉任何 NA”，那么这个单线怎么样？

```
A = list( 'green', c('black', 'yellow'), c('orange', 'white', 'purple'), NA)                                                             

B = list( 'red', 'black', NA, 'blue')    

> sapply(mapply(union, A,B), setdiff, NA)                                                                                               
 [[1]]                                                                                                                                   
 [1] "green" "red"                                                                                                                       

 [[2]]                                                                                                                                   
 [1] "black"  "yellow"                                                                                                                   

 [[3]]                                                                                                                                   
 [1] "orange" "white"  "purple"                                                                                                          

 [[4]]                                                                                                                                   
 [1] "blue" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:08:46.690

I'm not sure how you have this data input into a `data.frame` but if you put the data into 2 lists then I could see a method for doing it. Here is my attempt (with credit to the comment suggestions below):

```
# get the data
a <- c("green","black, yellow","orange, white, purple",NA)
b <- c("red","black",NA,"blue");

# strip any spaces first
a <- gsub("[[:space:]]+","",a)
b <- gsub("[[:space:]]+","",b)

# convert to lists
alist <- strsplit(a,",")
blist <- strsplit(b,",")

# join the lists
abjoin <- mapply(c,alist,blist)
# remove any duplicates and NA's
abjoin <- lapply(abjoin,function(x) (unique(x[complete.cases(x)])))

# result
> abjoin
[[1]]
[1] "green" "red"  

[[2]]
[1] "black"  "yellow"

[[3]]
[1] "orange" "white"  "purple"

[[4]]
[1] "blue" 
```

And to convert into a vector with each colour set split by commas:

```
sapply(abjoin,paste,collapse=",")
#[1] "green,red"           "black,yellow"        "orange,white,purple"
#[4] "blue" 
```

# sharepoint - 共享点数据检索

> ID：10496098
> 
> 赞同：0
> 
> 时间：2012-05-08T09:35:21.677
> 
> 标签：sharepoint

我有一个 Sharepoint 的数据库 (WSS_Content)，但没有安装 sharepoint，我需要它的数据。您检索数据的解决方案是什么？我应该编写一个转换器来将文件/链接/站点数据从二进制数组中提取为数据还是有更简单的方法？我可以安装一个新的共享点并使用这个数据库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T23:51:24.647

我挖掘了一个我不久前使用的旧应用程序，它可以从内容数据库中提取所有文档的基本内容。它没有任何选择性，它只是抓住那里的任何东西。然后，您可以选择输出以获取所需的内容。

我相信原始代码来自其他人（我不记得在哪里，所以不能相信他们）。我只是稍微破解了它。随意试一试。

它只是直接访问数据库，因此您只需将它安装在 SQL Server 中。不需要 SharePoint 服务器。

```
using System;
using System.Data.SqlClient;
using System.IO;

namespace ContentDump
{
    class Program
    {
        // Usage: ContentDump {server} {database}
        //
        static void Main(string[] args)
        {
            string server = args[0];
            string database = args[1];
            string dbConnString = String.Format("Server={0};Database={1};Trusted_Connection=True;", server, database);

            // create a DB connection
            SqlConnection con = new SqlConnection(dbConnString);
            con.Open();

            // the query to grab all the files.
            SqlCommand com = con.CreateCommand();
            com.CommandText = "SELECT ad.SiteId, ad.Id, ad.DirName," +
                " ad.LeafName, ads.Content" +
                " FROM AllDocs ad, AllDocStreams ads" +
                " WHERE ad.SiteId = ads.SiteId" +
                " AND ad.Id = ads.Id" +
                " AND ads.Content IS NOT NULL" +
                " Order by DirName";

            // execute query
            SqlDataReader reader = com.ExecuteReader();

            while (reader.Read())
            {
                // grab the file’s directory and name
                string DirName = (database + "/" + (string)reader["DirName"]).Replace("//", "/");
                string LeafName = (string)reader["LeafName"];

                // create directory for the file if it doesn’t yet exist
                if (!Directory.Exists(DirName))
                {
                    Directory.CreateDirectory(DirName);
                    Console.WriteLine("Creating directory: " + DirName);
                }

                // create a filestream to spit out the file
                FileStream fs = new FileStream(DirName + "/" + LeafName, FileMode.Create, FileAccess.Write);
                BinaryWriter writer = new BinaryWriter(fs);

                int bufferSize = 1024;
                long startIndex = 0;
                long retval = 0;
                byte[] outByte = new byte[bufferSize];

                // grab the file out of the db
                do
                {
                    retval = reader.GetBytes(4, startIndex, outByte, 0, bufferSize);
                    startIndex += bufferSize;
                    writer.Write(outByte, 0, (int)retval);
                    writer.Flush();
                } while (retval == bufferSize);

                // finish writing the file
                writer.Close();
                fs.Close();

                Console.WriteLine("Finished writing file: " + LeafName);
            }

            // close the DB connection and whatnots
            reader.Close();
            con.Close();
        }
    }
}
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:26:14.507

您可以尝试使用命令 stsadm.exe -o addcontentdb -url -databasename 在新的共享点环境和 webapp 中附加数据库。这种方式也用于将数据库从 sharepoint 2007 迁移到 2010 Farms。然后你应该在 webapp 的 url 中看到内容

# c - 在 C 中读取字符串数组

> ID：10496099
> 
> 赞同：3
> 
> 时间：2012-05-08T09:35:23.627
> 
> 标签：c, arrays, string

我想读取数组中的一组字符串。数组的大小将在运行时使用`malloc`或`alloc`即接受字符串的数量作为输入来决定。我尝试了以下代码，但它不起作用。

```
char *array;
array=(char*)malloc(sizeof(char)*t); //t is the size of array
for(int temp=0;temp<t;temp++)
{
    gets(a[temp]);
} 
```

在整数数组的情况下也是如此。
请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:39:48.500

C 对存储字符串没有任何自动内置支持，没有“字符串”变量，并且可以自动增长以容纳适当数量的字符。您需要自己分配内存。

您现在正在做的是为适当数量的字符指针分配位置，而不是为任何字符分配位置。所以`gets()`调用正在写入未分配的内存，这是未定义的行为。由于每个整数都完全适合单个分配，这就是为什么类似的代码适用于整数。字符串更复杂，所以你需要做更多的工作。

如果这些字符串的长度有任何已知的上限，则可以使用固定长度的临时缓冲区，然后在知道所需大小后将其复制到新分配的动态内存中。如果没有这样的界限，你需要重复相同的概念，通过读取一个固定的块，存储它，如果没有找到行尾，读取另一个块，使用 增加这个字符串的内存分配`realloc()`，追加新字符，并重复直到行结束。

附带说明一下，您应该始终避免使用`[gets()](http://linux.die.net/man/3/gets)`，因为它不支持保护您的程序免受缓冲区溢出。使用 fgets() 会好得多，记录在同一页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:39:59.367

您分配的是恰好一个字符串的空间，以零结尾的格式存储。

如果你想存储几个字符串的数组，你需要`malloc()`一个数组`char *`加上几个字符串。

此外，`gets()`不安全，因为没有大小限制。相反，使用[`fgets()`](http://pubs.opengroup.org/onlinepubs/007904875/functions/fgets.html). 它具有以下签名：

```
char *fgets(char *restrict s, int n, FILE *restrict stream); 
```

因为它想要一个流，你应该给`stdin`.

所以阅读一行的最佳方法是

```
char * read_one_line(uint32_t maxbufsize)
{
    char * s = malloc(maxbufsize);
    if (!fgets(s, maxbufsize, stdin)) {
        free(s);
        return NULL;
    } else {
        char * s2 = realloc(s, strlen(s)+1); // +1 for the NUL at the end
        if (s2) {
            return s2;
        } else {
            return s; // should never happen as the memory block is shrinked
        }
    }
} 
```

此函数分配一行所需的内存，在读取后适当调整其大小，并将其留给调用者在适当的时间再次释放它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:42:27.123

您需要首先为字符串数组 ( `char*`) 分配空间：

```
char **array;
array = (char**)malloc(sizeof(char*)*t); 
```

然后你需要为它们中的每一个分配空间（让我们`50`成为这些字符串的最大字符数）：

```
int i = 0, m = 50;
for (i = 0; i < t; ++i)
    array[i] = (char*)malloc(sizeof(char)*51); // 51 = 50 characters + '\0' 
```

然后你可以做你想做的事：

```
for(i = 0; i < t; ++i)
    scanf("%50s", array[i]); 
```

而不是`gets`，最好使用`scanf`指定的**宽度**（`%50s`= 50 个字符 + `'\0'`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T09:50:40.057

请记住，最后在字符数组中应该有一个`NUL`字符。

所以用or分配`t+1`内存字节。`alloc``malloc`

`t`字符的字节和终止`NUL`字符的 1 个字节。

在你的`for`循环之后，即在循环之外，只需写

```
a[temp] = '\0'; 
```

然后你可以在工作中使用它。

我希望它会奏效。

它看起来像这样

```
char *a = malloc(sizeof((char)*(t+1)));//t is number if characters
int temp;
for(temp=0; temp<t; temp++) {
    gets(a[temp]);
}
a[temp] = 0; 
```

然后打印数组，你会得到一个字符串。

```
printf("%s",a); 
```

# android - 自定义多项选择列表视图

> ID：10496100
> 
> 赞同：0
> 
> 时间：2012-05-08T09:35:26.413
> 
> 标签：android, android-listview

我想创建一个自定义多项选择列表视图，任何人都可以帮忙。

在我的情况下，有一个自定义布局，其中包含四个文本视图和一个复选框。

这是我的代码

[https://stackoverflow.com/a/10561814/1381622](https://stackoverflow.com/a/10561814/1381622)

* * *

这是我的代码

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.take_order);

    addToOrder=(Button)findViewById(R.id.addToOrder);
    order=(Button)findViewById(R.id.order);
    back=(ImageButton)findViewById(R.id.back);
    buttonSeperator=(ImageView)findViewById(R.id.buttonSeperator);

    spTable=(Spinner)findViewById(R.id.tableNo);
    ArrayAdapter<CharSequence> adapter=ArrayAdapter.createFromResource(this,R.array.tableList,android.R.layout.simple_spinner_item);

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_item);
    spTable.setAdapter(adapter);
    spTable.setOnItemSelectedListener(this);

    categoryList=(ListView)findViewById(R.id.foodCategoryList);
    //categoryList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    //categoryList.setItemsCanFocus(false);

    fc=new FoodCategory();

    categoryAdapter=fc.new FoodAdapter(this,R.layout.food_category_list,fc.list);

    categoryList.setAdapter(categoryAdapter);
    categoryList.setOnItemClickListener(this);

}

    @Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id)
{
    fl=new FoodList();

    order.setVisibility(View.GONE);
    addToOrder.setVisibility(View.VISIBLE);
    back.setVisibility(View.VISIBLE);
    buttonSeperator.setVisibility(View.VISIBLE);

        fl.bundleCategory=fc.list[position];
        fl.foodListService();

        WaiterFoodAdapter foodAdapter=new WaiterFoodAdapter(this, R.layout.take_order_list, fl.foodList);
        categoryList.setAdapter(foodAdapter);
        categoryList.setOnItemClickListener(this);

} 
```

实际上我使用一个列表视图，当用户单击列表视图时，我在同一个列表视图中设置了另一个适配器......并且

```
public void back(View v)
{
    addToOrder.setVisibility(View.GONE);
    back.setVisibility(View.GONE);
    buttonSeperator.setVisibility(View.GONE);
    order.setVisibility(View.VISIBLE);

    categoryList.setAdapter(categoryAdapter);       
} 
```

当用户单击返回按钮时，我再次设置旧适配器，，，，第二个适配器列表视图无法单击，我不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:44:37.233

请参考以下链接：

[http://appfulcrum.com/2010/09/18/listview-example-4-custom-layout-checkbox-imagebutton-textview/](http://appfulcrum.com/2010/09/18/listview-example-4-custom-layout-checkbox-imagebutton-textview/)

# c++ - BS-42e6.gcno 文件调试

> ID：10496102
> 
> 赞同：1
> 
> 时间：2012-05-08T09:35:47.690
> 
> 标签：c++, linux, code-coverage, gcov

我正在尝试使用现有代码库配置 gcov 以实现代码覆盖。现有代码库是基于服务的代码库（即包含多个文件 c 和 cpp 以及一项服务）

我已经关注了配置 gcov 的 wiki 页面，并将 -fprofile-arcs -ftest-coverage 添加到 makefile 中。当我编译服务时，它只生成一个 gcno 文件，该文件有一些名称（BS-42e6.gcno）。

根据 wiki 页面，gcov 应该为每个 c 和 cpp 文件（如 test.c.gcno 和 test1.cpp.gcno）生成 gcno 文件，但我有一个 gcno 文件。

我不知道如何进一步处理 gcno 文件。

该服务存在于基于 xml 的框架中。所以我们从 xml 传递输入，框架对输入参数进行编组和解组，并传递 c 或 cpp 文件。

所以我对测试gcov文件有疑问。根据wiki页面，我们从编译中得到a.out，我们运行a.out并生成相应的文件。但就我而言，我将如何进一步进行。

如果我需要提供更多信息，请告诉我

[http://gcc.gnu.org/onlinedocs/gcc/Gcov.html](http://gcc.gnu.org/onlinedocs/gcc/Gcov.html) http://www.ecoscentric.com/ecospro/doc/html/ref/gcov.html [http://codingfreak.blogspot.in/2009/ 02/gcov-analyzing-code-produced-with-gcc.html](http://codingfreak.blogspot.in/2009/02/gcov-analyzing-code-produced-with-gcc.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:08:14.600

经过长时间的调试，当我们在编译期间传递 gcov 参数（-fprofile-arcs -ftest-coverage）时，我发现了问题。当我在链接期间传递这些参数时，我能够成功生成 gcno 文件。仅供其他参考

# .net - 为什么 WPF 中需要 AutomationProperties

> ID：10496106
> 
> 赞同：10
> 
> 时间：2012-05-08T09:36:26.877
> 
> 标签：.net, wpf, ui-automation

据我了解，AutomationProperties 可用于识别 UI 自动化客户端的控件名称。

我想了解需要创建单独的自动化属性集，而不是出于相同目的使用 x:Name。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-12T12:46:05.373

让我们考虑一个文本框，在您的应用程序中它是PhoneNumberTextBox，并且您还有一个PhoneNumberLabel 和PhoneNumberValidationTick。然后将它们显示在带有显示“客户”标签的组框内</p>

尝试使用您的应用程序的盲人希望屏幕阅读器在他们进入文本框时说“客户电话号码”，同样，为您的应用程序编写自动化 UI 测试的测试人员希望能够找到文本框包含“客户电话号码”。

现在，如果您的应用程序已被翻译成德语怎么办……。盲人用户不希望屏幕阅读器说“Kundentelefonnummer”吗？

现在假设您更改应用程序以使用 PhoneNumberInputControl，您可能希望更改代码中控件的名称，但测试人员更希望控件名称不会更改……。

因此，我们需要一个名称的概念，该名称由程序使用，这些程序试图在运行时遍历应用程序的“重要”逻辑控件，并自动化用户与应用程序交互的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-09T08:25:43.587

我认为我的答案来得有点晚，但我找到了一个合适的解释，我想与所有程序员分享，以改进他们在自动化领域的工作。

现在，我主要使用一些称为 RPA 的自动化工具，特别是[UiPath](https://www.uipath.com)和[Automation Anywhere](https://www.automationanywhere.com)。

几个月以来，我一直在努力使用一些自动化工具，因为它们是在[WPF](https://en.wikipedia.org/wiki/Windows_Presentation_Foundation)而不是[Windows Forms](https://en.wikipedia.org/wiki/Windows_Forms)中开发的，这使得它们很难自动化，我们在图像识别方面非常依赖，不是因为它们设计不当或没有按预期工作，但因为`AutomationProperties`从未在任何项目中考虑过。

为了找到任何 RPA 无法识别控件并且我们一直被迫使用***图像识别***的答案，特别是在***VB.NET***中构建的 UiPath 等工具中，它应该与 Windows 完全连接，它难以置信地相信它不能很好地工作，它促使我更深入地调查根本原因，我创建了以下测试用例。

一个基本的 WPF 应用程序，没有任何自动化属性（默认情况下），仅包含 a `Grid`、 a `Label`、 a`Button`和 a `TextBox`：

```
<Window x:Class="UiPathExample.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:UiPathExample"
    mc:Ignorable="d"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button x:Name="button" Content="Button" HorizontalAlignment="Left" Margin="91,60,0,0" VerticalAlignment="Top" Width="75"/>
        <Label x:Name="label" Content="Label" HorizontalAlignment="Left" Margin="82,121,0,0" VerticalAlignment="Top"/>
        <TextBox x:Name="textBox" HorizontalAlignment="Left" Height="23" Margin="300,135,0,0" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="120"/>
    </Grid>
</Window> 
```

[现在，如果您尝试使用Spy++](https://docs.microsoft.com/en-us/visualstudio/debugger/introducing-spy-increment?view=vs-2017)、UiPath 中的[Ui Explorer](https://studio.uipath.com/docs/uipath-explorer) 、Automation Anywhere 中的对象克隆等搜索任何控件。这是您的结果：

[![示例 1](../Images/0dfc4f854e683085f587d5131d6bb2fb.png)](https://i.stack.imgur.com/ukaM4.png)

任何 RPA 或工具都无法发现所有控件。对于这个例子，我使用的是 UiPath 的 Ui Explorer（我也可以使用 Spy++，我会得到相同的结果）；但是，如果您稍微修改代码并按照本网站的建议添加所有自动化 ID：

[http://www.jonathanantoine.com/2011/11/03/coded-ui-tests-automationid-or-how-to-find-the-chose-one-control/](http://www.jonathanantoine.com/2011/11/03/coded-ui-tests-automationid-or-how-to-find-the-chose-one-control/)

新代码将如下所示：

```
<Window x:Class="UiPathExample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:UiPathExample"
        mc:Ignorable="d"
        AutomationProperties.AutomationId="Window1"
        Title="MainWindow" Height="350" Width="525">
    <Grid AutomationProperties.AutomationId="Grid1">
        <Button x:Name="button" Content="Button" HorizontalAlignment="Left" Margin="91,60,0,0" AutomationProperties.AutomationId="btnButton1" VerticalAlignment="Top" Width="75"/>
        <Label x:Name="label" Content="Label" AutomationProperties.AutomationId="lbl1" HorizontalAlignment="Left" Margin="82,121,0,0" VerticalAlignment="Top"/>
        <TextBox x:Name="textBox" HorizontalAlignment="Left" Height="23" Margin="300,135,0,0" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="120" AutomationProperties.AutomationId="txtAutomationEx"/>
    </Grid>
</Window> 
```

现在，UI Explorer 可以访问所有控件，就像我突出显示的按钮一样：

[![示例 2](../Images/1a35166ab2f8924cbf0c88b9adbe0706.png)](https://i.stack.imgur.com/WYBKk.png)

根据我的个人经验，这就是我认为我们应该使用它们的原因；尤其是在 RPA 在任何行业都成为标志性的时代。此外，如果将来有人自动化您正在构建的工具，您将为您或您的团队**节省大量时间**，因为如果没有这些属性，自动化将非常低效，因为您将一直依赖**图像识别**作为就我而言。

此外，您可以在此处阅读有关自动化属性的更多信息： [https ://docs.microsoft.com/en-us/dotnet/framework/ui-automation/ui-automation-properties-overview](https://docs.microsoft.com/en-us/dotnet/framework/ui-automation/ui-automation-properties-overview)

快乐的自动化！

**PS：**

> 在我的调查中，一个有趣的事实是，任何**Windows 窗体** 项目的控件从一开始就已经暴露给任何自动化工具，而无需额外的努力，这就是它们自动化速度更快的原因。

# ruby - Net::SSH.exec 命令返回的数据是否有大小限制

> ID：10496109
> 
> 赞同：0
> 
> 时间：2012-05-08T09:36:33.993
> 
> 标签：ruby, ssh, ls, net-ssh

我正在尝试使用以下代码列出远程机器的文件。

```
Net::SSH.start(host_name, 'ec2-user') do |ssh|
  cmd = "ls #{get_ls_command(dir_loc, extension)}"
  ssh.exec!(cmd) do |channel, stream, data|
  if stream == :stderr
    # do something -- and error has been raised. 
    # for now raise an exception 
    puts data
    raise "Error in fetching file data"
 end
 return data.split("\n")
end 
```

如果文件数量很大，则从 exec 命令返回的数据将被截断，并且只返回文件的部分列表。在我看来，有一个大小限制。任何人都知道我可以如何增加它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:10:20.983

您的代码不完整，您缺少一个`end`并且有一个“错误”的缩进，它不代表实际的嵌套。但是，我会尝试使用我们所拥有的

该方法将接收到的数据以块的形式提供给块。在您的 return 语句中，`data`实际上是指向最后返回的数据块。这意味着您的代码仅在块仅产生一次时才会意外工作（它最多使用 8000 字节 iirc）。

为了保证多收益的安全，您必须首先完整地收集数据，然后正确处理它。你可以这样做：

```
Net::SSH.start(host_name, 'ec2-user') do |ssh|
  cmd = "ls #{get_ls_command(dir_loc, extension)}"

  result = ""
  ssh.exec!(cmd) do |channel, stream, data|
    if stream == :stderr
      # do something -- and error has been raised. 
      # for now raise an exception 
      puts data
      raise "Error in fetching file data"
    end
    result << data
  end

 return result.split("\n")
end 
```

# java - 使用java读取文件头

> ID：10496110
> 
> 赞同：2
> 
> 时间：2012-05-08T09:36:34.727
> 
> 标签：java, binary-data, java-io, preon

我正在尝试使用 java 读取文件头，我想获取文件类型（图像、音频等）。我尝试了很多例子，但似乎没有任何效果。我尝试了 preon 并没有运气，有人可以告诉我如何使用 preon 或其他 Java api 读取文件头，谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T09:39:12.230

```
 File f = new File(filepath);
 System.out.println("Mime Type of " + f.getName() + " is " +  
 new MimetypesFileTypeMap().getContentType(f)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:04:29.380

使用[mime-util 的](http://sourceforge.net/projects/mime-util/)MagicMimeMimeDetector：

```
detector.getMimeTypes(file) 
```

# objective-c - 从使用 UIButton 元素注册的 IBAction 中删除 UIView

> ID：10496112
> 
> 赞同：0
> 
> 时间：2012-05-08T09:37:11.210
> 
> 标签：objective-c, ios, uiview, nsnotificationcenter

我正在尝试`UIView`从`NSNotification`. 当我按下“完成”按钮时，应用程序应该删除`screen3`，但它不起作用。有什么建议么？这里有代码：

```
- (void) mostrarCompra:(NSNotification *) notification
{
    [self buyView:self];
}

- (void)buyView:(id)sender
{
   screen3 = [[UIView alloc]initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width,               self.view.bounds.size.height)];   
   screen3.backgroundColor= [UIColor grayColor];

   UIToolbar* tabBar = [UIToolbar new]; 
   tabBar.barStyle = UIBarStyleDefault;
   [tabBar sizeToFit];  
   [tabBar setFrame:CGRectMake(0,0,self.view.bounds.size.width,60)];    
   UIBarButtonItem *atras = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(returnBuy:)];

   [tabBar setItems:[NSArray arrayWithObjects:atras,nil]];  

   [screen3 addSubview:tabBar]; 

   [superwindow addSubview:screen3];
}   

- (IBAction)returnBuy:(id)sender{

    [screen3 removeFromSuperview];  
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:51:38.167

在将 screen3 添加为子视图并从父视图中删除之前使用 nslog

NSLog(@"%@",screen3);

如果输出是对两个地方的相同位置的引用，那么还有其他一些 prblm，但是指针的值不同，例如 0x324fa 和 0xa214c，那么您在添加和删除视图期间分配或更改 screen3 的值. 告诉我你在这两种情况下是否得到这个。

# ios5 - UITextField占位符字体颜色白色iOS 5？

> ID：10496114
> 
> 赞同：1
> 
> 时间：2012-05-08T09:37:13.643
> 
> 标签：ios5, interface-builder, uitextfield, xcode4.3, placeholder

我在 XIB 中遇到问题。我的占位符颜色在界面生成器中默认为灰色，但是当我运行应用程序时，文本的颜色为白色，我看不到它，因为背景是白色的。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:52:11.007

您可以这样覆盖`drawPlaceholderInRect:(CGRect)rect`以手动呈现占位符文本`UITextField`

```
- (void) drawPlaceholderInRect:(CGRect)rect {
    [[UIColor blueColor] setFill];
    [[self placeholder] drawInRect:rect withFont:[UIFont systemFontOfSize:16]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:29:47.807

上述解决方案对我不起作用，我使用了以下解决方法。

```
[UILabel appearanceWhenContainedIn:[UITextField class], nil] setTextColor:[UIColor darkGrayColor]]; 
```

但后来我知道了另一个错误，上面的工作完成了，但它也将所有其他标签的颜色重置为默认黑色。然后我不得不对 UILabel 类进行子类化，并在我认为的所有其他标签中使用我的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-07T18:12:06.747

快速修复语法：

```
[[UILabel appearanceWhenContainedIn:[UITextField class], nil] setTextColor:[UIColor darkGrayColor]]; 
```

# jquery - 从ajax请求中获取值到隐藏字段

> ID：10496116
> 
> 赞同：2
> 
> 时间：2012-05-08T09:37:28.097
> 
> 标签：jquery, asp.net

我想将从 web 服务返回的值存储到 jquery 中的隐藏字段

```
 $.ajax({
        type: "POST",
        url: "/AutoComplete.asmx/CompareGroupName",
        data: { Text: text },
        dataType: "json",
        onfocusout: function (element) {
            $(element).valid();
            $(element).filter('.valid').qtip('destroy');
        },
        success: function (data) {
            response($.map(data.d, function (item) {
                return {
                    value: item.igroup_id

                }
                $('#hdnGroupNameCheck').val = item.igroup_id;

            }))
        },

        complete: function (xhr) {
            if (xhr.status == 200) {
                alert("Group Name already exist");

            }
            else
                alert("Group Name does not exist");
        }

    }); 
```

我得到 Group 已经存在并且 Group 不存在并且 web 服务运行良好。但是如何通过asp.net中的代码获取隐藏字段中的id并显示相同的消息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:45:29.683

好吧，恐怕我不明白你想要什么。但是，从您的代码中，我看到以下错误： $('#hdnGroupNameCheck').val = item.igroup_id;

jQuery 对象方法 val() 应该以下列方式使用： $('#hdnGroupNameCheck').val(item.igroup_id);

添加更多想法。:-)

我看到您将返回类型设置为 JSON。如果服务器端代码未返回正确的 JSON 格式数据，则不会执行成功回调。

另外，当我输入评论时，请确保之前不会出现任何 Javascript 错误

```
$('#hdnGroupNameCheck').val(item.igroup_id); 
```

如果你使用谷歌 Chrome 浏览器，你可以使用它的优秀开发者工具来检测更多的东西。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:27:10.273

```
 function ontextchange() {
    if ($('#<%=txtGroupName.ClientID %>').val() != "") {
        $('#<%=lblGroupName.ClientID %>').text($('#<%=txtGroupName.ClientID %>').val());
    }
    var text = $('#<%=txtGroupName.ClientID %>').val();

    $.ajax({
        type: "POST",
        url: "AutoComplete.asmx/CompareGroupName",
        data: "{'Text':" + JSON.stringify(text) + "}",
        // async: false,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: comparegroup,
        error: function (msg) {
            return false;
        }

    });
    return false;

}

function comparegroup(msg) {
    populatecontrol(msg.d, $("#<%=lblGroupNameCheck.ClientID %>"));

}

function populatecontrol(list, control) {
    var id = 0;
    var GroupName = document.getElementById('<%=hdnGroupNameCheck.ClientID %>');
    if (list.length > 0) {
        $.each(list, function (key, value) {
            var obj = JSON.parse(value);
            document.getElementById('<%=hdnGroupNameCheck.ClientID %>').value = obj.Second;
            $('#lblGroupNameEdit').show();
            control.html("Group already exist.Click here to");
            $('#<%= lblGroupNameEdit.ClientID%>').text("edit or");
            $('#<%= lblGroupNameInquire.ClientID%>').text("inquire");

        });
        return false;
    }
    else
        $('#<%= lblGroupNameCheck.ClientID%>').text("");
        $('#<%= lblGroupNameEdit.ClientID%>').text("");
        $('#<%= lblGroupNameInquire.ClientID%>').text("");
    } 
```

# hibernate - 在 Hibernate 中使用数据库视图

> ID：10496117
> 
> 赞同：15
> 
> 时间：2012-05-08T09:37:44.583
> 
> 标签：hibernate, views

我的数据库中有一个名为的表`Samples`，它有一个名为的列`baseline`，它是一个布尔变量。我想在`baseline`设置为的行中搜索`1`，所以我在数据库（MySQL）中创建了一个视图。现在，`Samples`我想查询这个视图（名称为`Baselines`），而不是查询表。

我是否需要在 hibernate cfg 文件中为此视图添加声明？另外，我是否需要创建另一个以此命名`Baselines`的 Java 类？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-08T09:43:23.180

Hibernate 可以像对待任何表一样对待视图。只需根据该视图定义一个实体类（`Baselines`如您所说）。

视图最常见的困难是某些数据库引擎无法处理视图上的插入或更新，因此如果您的应用程序试图修改数据，请注意这一点。我不知道MySQL是否能够做到这一点。

使用视图的另一种方法是使用[Hibernate Filters](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#filters)，它们的作用大致相同，但在 Hibernate 会话级别。

# windows-xp - 文件参数替换：使用 png 文件创建电影

> ID：10496121
> 
> 赞同：0
> 
> 时间：2012-05-08T09:38:23.790
> 
> 标签：windows-xp, ffmpeg

我有一个简单的问题：我尝试创建一个如上所述的电影文件（有很多名为 plt_.png 的 png 文件）。当我尝试运行命令行输入时：

ffmpeg -q:v 5 -r 2 -b:v 9600 -i plt_%d.png 电影.mp4

...我收到错误消息：“plt_d.png：没有这样的文件或目录”。

这是因为 XP 试图用命令行参数 0 替换 %，我认为。但是这个替换不应该在这里完成，而是由 ffmpeg 更深一层。

你有解决这个问题的想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:57:20.633

您应该在论点周围加上引号。

所以

```
ffmpeg -q:v 5 -r 2 -b:v 9600 -i plt_%d.png movie.mp4 
```

变成

```
ffmpeg -q:v 5 -r 2 -b:v 9600 -i "plt_%d.png" movie.mp4? 
```

# php - php中的PDF导出

> ID：10496122
> 
> 赞同：21
> 
> 时间：2012-05-08T09:38:24.337
> 
> 标签：php, pdf, formatting, export, converter

是否有可能在 pdf 中写入大量数据而不用更少的执行时间更改任何 ini 修改..？

目前我正在使用 tcpdf 插件。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-06T18:25:52.837

如果您打算从 PHP 创建 PDF，pdflib 将帮助您。

否则，如果你想通过 PHP*将*HTML 页面转换为 PDF，你会发现这里有点麻烦。

所以，我知道的选项是：

[DOMPDF](http://dompdf.org/ "DOMPDF")：包装 HTML 并构建 PDF 的 PHP 类。效果很好，可定制（如果你知道 PHP），基于 pdflib，如果我没记错的话，它甚至需要一些 CSS。坏消息：当 HTML 很大或非常复杂时速度很慢。

[HTML2PS](http://www.tufat.com/s_html2ps_html2pdf.htm "HTML2PS")：与 DOMPDF 相同，但这个首先转换为 .ps（GhostScript），然后转换为您需要的任何格式（PDF、JPEG、PNG）。对我来说，它比 DOMPDF 好一点，但有同样的*速度问题*。哦，与 CSS 更好的兼容性。

这两个是 PHP 类，但是如果你可以在服务器上安装一些软件，并通过`passthru()`or访问它`system()`，也可以看看这些：

[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/ "wkhtmltopdf")：基于 WebKit（Safari 的包装器），它非常快速和强大。似乎它是即时将 HTML 转换为 PDF 的最佳方法（目前），使用 CSS2 的 3 页 XHTML 文档仅需 2 秒。无论如何，这是一个最近的项目，所以 google.code 页面经常更新。

[htmldoc](https://www.msweet.org/projects.php?Z1 "htmldoc")：这是一辆坦克，它真的永远不会停止/崩溃。截至 2007 年，该项目似乎已死，但如果您不需要 CSS 兼容性，这对您来说可能会很好。

[tcpdf](http://sourceforge.net/projects/tcpdf/files/) - 这是 fpdf 的增强和维护版本。它具有[tpdf 的所有主要功能，](http://www.tcpdf.org/)并且执行时间更快，输出也更好。有关使用两个最流行的 PDF 生成类的详细教程：TCPDF 和 FPDF，请点击[此链接](http://blog.chapagain.com.np/php-easily-create-pdf-on-the-fly/)。我认为您应该**继续使用 TCPDF**。

另见这些帖子：

1.  [使用 PHP 将 HTML + CSS 转换为 PDF？](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)
2.  [哪一个是 PHP 的最佳 PDF-API？](https://stackoverflow.com/questions/1648715/best-pdf-generator-in-php-mpdf-or-fpdf)
3.  [在 PHP 中将 html 导出为 PDF？](https://stackoverflow.com/questions/9851278/export-a-html-into-pdf-in-php)
4.  [将带有 PHP 变量的 HTML 写入 PDF 文件？](https://stackoverflow.com/questions/4868362/writing-html-with-php-variables-to-pdf-file)
5.  [如何使用php将html转换为pdf？](https://stackoverflow.com/questions/5190635/how-to-convert-html-into-pdf-with-php)
6.  [将 html 导出为 pdf 的工具](https://stackoverflow.com/questions/7107776/tool-for-exporting-html-as-pdf)
7.  [将 PHP 文件中的 HTML 转换为 PDF 文件](https://stackoverflow.com/questions/7108882/converting-html-in-php-file-to-pdf-file)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T09:45:51.583

我强烈推荐[FPDF](http://www.fpdf.org/)，非常易于使用，您不需要任何修改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T10:05:13.077

我一直在使用 DOMPDF [http://code.google.com/p/dompdf/](http://code.google.com/p/dompdf/)，因为它可以很好地处理 HTML/CSS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T11:07:00.643

您应该使用 Webkit HTML to PDF [http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

它只是请求 HTML 页面（从您的 PHP 生成）并将其呈现为 PDF（使用最好的 Webkit 呈现引擎之一）。

因此它在 PHP 端不需要额外的资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T09:49:31.913

[http://www.phpclasses.org/package/6638-PHP-Generate-a-PDF-file-with-a-listing-of-data-records.html](http://www.phpclasses.org/package/6638-PHP-Generate-a-PDF-file-with-a-listing-of-data-records.html)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-19T05:43:13.950

你可以只使用 Zend 框架。如果我没记错的话，框架中有一个功能可以让您创建 PDF。

# c# - 如果之前显示过，则隐藏占位符

> ID：10496126
> 
> 赞同：0
> 
> 时间：2012-05-08T09:38:40.633
> 
> 标签：c#, asp.net, session, placeholder

所以我正在尝试编写一些代码来在占位符中隐藏一段 javascript。这个想法是如果它已经显示过一次就隐藏它。我的代码如下所示：

```
 <asp:PlaceHolder runat="server" ID="LoadScript">
    <script type="text/javascript">
       javascript function
    </script>
    </asp:PlaceHolder> 
```

我有一个使用会话和占位符的可见状态的想法，但无法真正弄清楚逻辑。这是我正在尝试使用的内容：

```
Session["Script"] = LoadScript.Visible;
 this.LoadScript.Visible = false; 
```

有人能想出一种方法来完成这项工作吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:44:16.313

```
if(Session["scriptRan"] != null) 
{
    this.LoadScript.Visible = false; 
}
else
{
    Session["scriptRan"] = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:44:39.090

Visible 属性只是改变 CSS 的可见性属性。它不会阻止您的代码工作。但：

```
if(Session["run"]==null)
   //change visibility
else
   //also change visibility but make it different. 
```

# node.js - 节点 AWS-lib：重复调用 AWS-lib 导致签名错误

> ID：10496127
> 
> 赞同：2
> 
> 时间：2012-05-08T09:38:43.737
> 
> 标签：node.js, amazon-ec2, amazon-web-services, aws-lib

在等待启动实例时，我重复运行相同的 EC2 API 调用。

```
var check_started = function() {
  console.log('Calling');
  ec2.call("DescribeInstanceStatus", {InstanceId:['pretend_instance_id']}, function(err, status_result){
    if (err) {
      console.log('error')
      console.log(err)
      console.log(status_result)
    } else {
      console.log('success')
    }
  }); 
}

var instance_started_checker = setInterval( check_started, 5 * 1000) 
```

第一次调用**总是成功**，但后续调用失败：

```
The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. Consult the service documentation for details. 
```

我该怎么做才能使重复调用起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:29:44.610

我认为如果您在创建代理的选项中指定 API 版本可能会有所帮助。像这样：

```
var ec2 = aws.createEC2Client(yourAccessKeyId, yourSecretAccessKey, {
        version: "2012-04-01"
    }
); 
```

我尝试了您的代码，但无法重现相同的错误。当我没有指定 API 版本时，我得到“InvalidAction”。这是我使用的代码：

```
var aws = require("aws-lib");
var ec2 = aws.createEC2Client("xXx", "yYy", {
    secure: "https",
    host: "ec2.eu-west-1.amazonaws.com",
    version: "2012-04-01"
}
);
var check_started = function() {
console.log('Calling');
ec2.call("DescribeInstanceStatus", {InstanceId:["i-abcdefg"]}, function(err, status_result) {
    if (err) {
      console.log('error')
      console.log(err)
      console.log(status_result)
    } else {
      console.log('success')
      console.log(status_result.instanceStatusSet)
      clearInterval(instance_started_checker);
    }
});
}
var instance_started_checker = setInterval( check_started, 5 * 1000); 
```

出于好奇，您在调用 DescribeInstances 时是否遇到同样的错误？

# java - 两个实体管理器实例在第一个更新时第二个选择旧值

> ID：10496129
> 
> 赞同：1
> 
> 时间：2012-05-08T09:38:47.887
> 
> 标签：java, hibernate, entity

我正在使用休眠实体管理器 3.4.0.GA，我遇到了流动问题：我有两个实体管理器实例**em1**和**em2**，我有一个实体。我更新**em1**中的实体，然后在**em2**中选择它，但是**em2**对数据库进行选择，但在实体中有旧值（更新之前）。我做错了什么:(

确切的步骤在**em1** (T1) 我获取实体并更新它然后提交 T1 并且更改在数据库中，然后在**em2** (T2) 我进行 jpa 查询以获取所有实体，但实体（我更新成功在 T1) 中保存旧值，因为它是从一级缓存中读取的:(。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:00:35.190

**级别 - 1 ：**此缓存的范围是`EntityManager`或`PersistenceContext`（不用于 Hibernate，但可能是会话）。

**Level - 2 :**它的范围是`EntityManagerFactory`& 缓存的对象可以被应用程序中的任何实体管理器检索。

当您使用两个不同的实体管理器时，对象不是从一级缓存加载的，而是从二级缓存加载的。因此从中检索陈旧的对象。

*   你可以试试`session.setCacheMode(CacheMode.REFRESH)`。

    否则，您可以在查询本身中设置提示。

    `@NamedQuery(name="queryWithNoCache", query="SELECT e FROM Entity e", hints={@QueryHint(name="org.hibernate.cacheMode", value="REFRESH")})`

    您也可以相应地尝试其他模式。

*   Ehcache 文档：

    > Session.find 不使用主对象的缓存。Hibernate 将尝试为任何关联的对象使用缓存。然而 Session.find 确实会导致缓存被填充。Query.find 的工作方式完全相同。在获得缓存命中的机会较低的情况下使用这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:48:45.703

更新后尝试使用 em1.flush() :)

# linq - nhibernate 查询条件 api 到 linq 查询

> ID：10496130
> 
> 赞同：0
> 
> 时间：2012-05-08T09:38:49.623
> 
> 标签：linq, nhibernate

我正在研究自定义会员提供程序，并且正在使用 nhibernate 标准 api 查询。我在将这些查询翻译为 linq 时遇到问题。这是代码

标准api代码

```
 users = session.CreateCriteria(typeof(Entities.User))
              .Add(NHibernate.Criterion.Restrictions.Like("Email", emailToMatch))
              .Add(NHibernate.Criterion.Restrictions.Eq("ApplicationName", this.ApplicationName))
               .List<Entities.User>(); 
```

不完整的linq

```
users = session.Query<Entities.User>()
            .Where(x => x.EMail == emailToMatch) 
            //missing ApplicationName equal to this.ApplicationName
            .ToList(); 
```

更新：图吧

```
 users = (from User u in session.Query<Entities.User>()
              where u.Email == emailToMatch && "ApplicationName" == this.ApplicationName
              select u).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:54:08.323

```
from user in session.Query<User>()
where user.Email == emailToMatch && user.ApplicationName == this.ApplicationName
select user; 
```

请注意，您的标准提到“喜欢”以在 linq 使用中实现相同包含所有尽管这可能不是有效的电子邮件匹配

IE

```
from user in session.Query<User>()
where user.Email == emailToMatch && user.Name.Contains("Adam") 
select user; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:12:35.567

使用 LINQ 方法语法：

```
users = session.Query<Entities.User>()
             .Where(user => user.Email == emailToMatch && user.ApplicationName == this.ApplicationName) 
```

注意：仅当您确实需要立即运行查询时才执行 .ToList()。

# javascript - 使用哪个组件来实现菜单？

> ID：10496131
> 
> 赞同：0
> 
> 时间：2012-05-08T09:38:53.243
> 
> 标签：javascript, backbone.js, marionette

我想显示一个菜单，如：

```
欧比旺克诺比
  我的朋友
  选项

我的光剑
  蓝色光剑
  绿色光剑
  添加光剑

```

如您所见，`My lightsabers`菜单是项目列表，但添加新光剑的链接是独立的。

我相信我应该使用 a`CollectionView`来渲染光剑列表，但是如何渲染“添加”链接？

你有这样的菜单的例子吗？

这个问题可以概括为：如何自定义 Marionette 呈现的 HTML 位而不破坏它所做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:33:21.417

我会为此使用 CompositeView，因为需要添加链接。

您将设置一个模板，其中包含实际列表的占位符，然后具有添加链接和所有必要的其他位。然后修改`appendHtml`复合视图的方法以将实际项目放置在正确的位置。

例如，这里有一个模板可以让你走上正轨：

```
<script id="light-saber-menu-template" type="text/html">
  <h4>My Lightsabers</h4>
  <ul id="light-sabers">
    <li class="divider"></li>
    <li><a href="#">Add A Lightsaber</a></li>
  <ul>
</script>

<script id="light-saber-menu-item-view" type="text/html">
  <%= name %>
</script> 
```

在此示例中，我将使用`divider`ul 作为放置项目的位置，将它们插入到分隔符之前：

```
 MenuItem = Backbone.Marionette.ItemView.extend({
  template: "#light-saber-menu-item-template",
  tagName: "li"
});

MenuView = Backbone.Marionette.CompositeView.extend({
  template: "#light-saber-menu-template",

  itemView: MenuItem,

  appendHtml: function(cv, iv){
    var $divider = cv.$(".divider");
    $divider.before(iv.el);
  }
});

myLightSabers = new LightSaberCollection(... data ...);

menu = new MenuView({
  collection: myLightSabers
});

menu.render(); 
```

这应该会产生`<ul>`您期望的项目：

```
<div>
  <h4>My Lightsabers</h4>
  <ul>
    <li>Blue</li>
    <li>Green</li>
    <li>Red</li>
    <li class="divider"></li>
    <li><a href="#">Add A Lightsaber</a></li>
  </ul>
<div> 
```

有关使用 CompositeView 的更多示例，请参阅此博客文章： http: [//lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)

# php - PHP可以有线程工作吗？

> ID：10496136
> 
> 赞同：0
> 
> 时间：2012-05-08T09:39:02.073
> 
> 标签：php, multithreading

我想知道我是否可以在 PHP 端做一些线程工作，就像在 Java 中一样......

我已经尝试过`sleep()`功能，但它似乎将所有进程都卡在了服务器上。

我想在一个完成之前处理几个发布操作。

但是当我尝试使用 Ajax 时，我注意到虽然我发送了异步请求，但它们还是按顺序一个接一个地处理。

有没有办法在 PHP 端创建一个线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:40:39.843

PHP 不支持多线程（在脚本中）或异步处理。

但是，如果您向服务器发送多个请求，只要您的服务器未配置为一次仅处理一个请求，它们就会被并行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:40:48.450

PHP 不支持多线程。这个[链接](https://stackoverflow.com/questions/590684/multithreading-in-php)也很有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:40:19.790

尝试工作服务器： http: [//gearman.org/](http://gearman.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T09:46:20.377

我们有时会使用 hack。我们创建了一个脚本，在其中我们发送了几个 http 请求而不等待响应。

这样我们就能够模拟线程。

# c# - 中继器控制和复选框对齐

> ID：10496141
> 
> 赞同：0
> 
> 时间：2012-05-08T09:39:21.777
> 
> 标签：c#

我在 c# 中做一个 asp.net web 应用程序。我需要对齐，如下所示： ![在此处输入图像描述](../Images/e557730fbd12cb2249a9e74944ab9200.png)

我想使用中继器控件进行此对齐。我使用了以下内容：

aspx 页面：

```
 <table cellspacing="0" cellpadding="0" border="0" width="80%" align="center">
        <tr>
          <td>
          </td>
      <asp:Repeater ID="rptroutebind" runat="server">
        <ItemTemplate>
            <td>                                                                                   <asp:Label ID="lblRouteName" runat="server" Text='<%# Eval("ROUTENAME") %>' Width="100"></asp:Label>
           </td>
         </ItemTemplate>
      </asp:Repeater>
      </tr>
   <asp:Repeater ID="rptbindoutlet" runat="server">
     <ItemTemplate>
         <tr>
            <td>                                                                                <asp:Label ID="lblOutName" runat="server" Text='<%# Eval("RONAME") %>' Width="100"></asp:Label>
            </td>
                </tr>
         <tr>
        <td style="height: 10px">
        </td>
        </tr>
     </ItemTemplate>
    </asp:Repeater>
  </table> 
```

然后我得到以下不带复选框的对齐方式。谁能告诉如何放置这些复选框

**编辑：** 我试过这个

cs页面：

```
protected void rptbindoutlet_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {
            CheckBox chk;
            foreach (RepeaterItem item in rptbindoutlet.Items)
            {
                for (int i = 1; i <= chkno; i++)
                {
                    chk = new CheckBox();
                    chk.ID = "check" + i;
                    rptbindoutlet.Controls.Add(chk);
                }
            }
        } 
```

我得到了复选框，但没有正确对齐。我是这样的： ![在此处输入图像描述](../Images/bf53097f121aaf32de04fcbf87a7fe60.png)

**编辑 1：**

```
 protected void rptbindoutlet_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {
            CheckBox chk;
            foreach (RepeaterItem item in rptbindoutlet.Items)
            {
                TableRow tr = new TableRow();
                for (int i = 1; i <= chkno; i++)
                {
                    TableCell tc = new TableCell();
                    chk = new CheckBox();
                    chk.ID = "check" + i;
                    tc.Controls.Add(chk); 
                }
                rptbindoutlet.Controls.Add(tr);
            }
        } 
```

这给了

![在此处输入图像描述](../Images/fd364252e61260346c769ce04571de2c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:48:46.407

根据您的代码，您`ItemTemplate`使用 c# 代码而不是表结构添加了一个新的。您正在使用父级中的表，并且在`ItemDataBound`事件中您只是通过新的`ItemTemplate`. 所以我建议你生成一个 TableRow 和 TableCell 并在这个 TableCell 中根据你的父表结构在运行时添加新的 CheckBox ....

# bioinformatics - 打印 MultipleSeqAlignment 对象

> ID：10496143
> 
> 赞同：1
> 
> 时间：2012-05-08T09:39:32.993
> 
> 标签：bioinformatics, biopython, sequence-alignment

我有一个由 3 个序列生成的比对`clustalx`

```
AAAACGT Alpha
AAA-CGT Beta
AAAAGGT Gamma 
```

我可以通过 Biopython 中的预定义索引对对齐进行切片`align[:,:4]`

但是，打印结果会给出：

```
AAAA Alpha
AAA- Beta
AAAA Gamma 
```

如何在不打印下面给出的名称的情况下捕获子对齐？

```
AAAA
AAA-
AAAA 
```

`align[:,:4].seq`不提供我正在寻找的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T15:11:45.900

您可能可以执行以下操作：

```
for x in align[:, :4]:
    print x.seq 
```

或者在 print 语句所在的位置做任何你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:48:03.510

我需要先问一个后续问题 - 的确切类型是`align[:,:4]`什么？

无论哪种方式，它似乎都是某种数组，所以你不能简单地做`.seq`. `seq`如果确实是单个条目的属性，您可以做的是使用`map`函数提取它们：

```
map(lambda el: el.seq, align[:, :4]) 
```

# visual-c++ - 如何获取命名管道的完整路径

> ID：10496150
> 
> 赞同：1
> 
> 时间：2012-05-08T09:40:03.397
> 
> 标签：visual-c++, named-pipes

在 Visual C++ 中通过 CreateNamedPipe 函数创建命名管道后，如何获取命名管道的完整路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:11:17.343

您可以使用 API [NtQueryDirectoryFile](http://msdn.microsoft.com/en-us/library/windows/hardware/ff567047%28v=vs.85%29.aspx)执行此操作，请参阅[此处](http://communities.vmware.com/thread/295120)以获取示例代码和讨论。

# c++ - 如何返回 boost multi_index 迭代器的开始和结束

> ID：10496151
> 
> 赞同：0
> 
> 时间：2012-05-08T09:40:07.440
> 
> 标签：c++, linux, boost, multi-index

我在我的类中定义了一个 multi_index 迭代器。我需要授予用户基于某个索引遍历容器的权限。我只是不知道该怎么做。请问你能帮帮我吗：

```
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/identity.hpp>
#include <boost/multi_index/member.hpp>

using namespace ::boost;
using namespace ::boost::multi_index;

struct RoadNetwork{
        int n;
        int m;
        RoadNetwork(int q = 0,int p = 0){ n = q; m = p;};
 };

class A
{
public:
    typedef multi_index_container<
    RoadNetwork,
        indexed_by<
            ordered_unique<identity<RoadNetwork> >,
            ordered_non_unique<member<RoadNetwork, int, &RoadNetwork::n> >

        >
    > mindex;
    mindex i;

        const mindex::nth_index<0>::type& iterator_begin() const
        {
            return i.get<0>().begin();
        }

};

int main(void){
    A a;

    return 0;
} 
```

错误是：

```
~/workspace/multiIndex$ g++ main.cpp   main.cpp: In member function ‘const type& A::iterator_begin() const’: main.cpp:30:34: error: invalid initialization of reference of type ‘const type& {aka const boost::multi_index::detail::ordered_index<boost::multi_index::identity<RoadNetwork>, std::less<RoadNetwork>, boost::multi_index::detail::nth_layer<1, RoadNetwork, boost::multi_index::indexed_by<boost::multi_index::ordered_unique<boost::multi_index::identity<RoadNetwork>
>, 

boost::multi_index::ordered_non_unique<boost::multi_index::member<RoadNetwork, int, &RoadNetwork::n> > >, std::allocator<RoadNetwork> >, boost::mpl::vector0<mpl_::na>, boost::multi_index::detail::ordered_unique_tag>&}’ from expression of type ‘boost::multi_index::detail::ordered_index<boost::multi_index::identity<RoadNetwork>,

std::less<RoadNetwork>, boost::multi_index::detail::nth_layer<1, RoadNetwork, boost::multi_index::indexed_by<boost::multi_index::ordered_unique<boost::multi_index::identity<RoadNetwork>
>, 

boost::multi_index::ordered_non_unique<boost::multi_index::member<RoadNetwork, int, &RoadNetwork::n> > >, std::allocator<RoadNetwork> >, boost::mpl::vector0<mpl_::na>, boost::multi_index::detail::ordered_unique_tag>::const_iterator {aka 

boost::multi_index::detail::bidir_node_iterator<boost::multi_index::detail::ordered_index_node<boost::multi_index::detail::ordered_index_node<boost::multi_index::detail::index_node_base<RoadNetwork, std::allocator<RoadNetwork> > > > >}’ 
```

我重视你的帮助。

谢谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:30:00.783

`iterator_begin()`函数返回类型不正确。正确的声明是：

```
mindex::nth_index_iterator<0>::type iterator_begin() const; 
```

# java - 在android中带有时区的日历字符串

> ID：10496152
> 
> 赞同：1
> 
> 时间：2012-05-08T09:40:07.517
> 
> 标签：java, android, timezone

我正在寻找一种将时间字符串转换为日历的方法，如下所示：

```
 public static Calendar stringToCalendar(String strDate, TimeZone timezone){
    String FORMAT_DATETIME = "yyyy-MM-dd'T'HH:mm:ss";
    SimpleDateFormat sdf = new SimpleDateFormat(FORMAT_DATETIME);
    sdf.setTimeZone(timezone);
    Date date = sdf.parse(strDate);
    Calendar cal = Calendar.getInstance(timezone);
    cal.setTime(date);
    return cal;
   } 
```

上面的这段代码不起作用。
例如：当我使用模式**yyyy-MM-dd'T'HH:mm:ss传递时间字符串“** *2012-05-08T09:10:10* ”并且时区为 GMT+7 时，结果（来自 Calendar 对象）应该是: *2012-05-08T16:10:10* 问题是由于某些原因，我不想使用[Joda 时间](http://www.joda.org/joda-time/)。那么，我该怎么做呢？

 **** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:20:38.357

只需使用[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)并在其上设置[TimeZone](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setTimeZone%28java.util.TimeZone%29)。然后调用该`parse()`方法。

编辑：

* * *

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.TimeZone;

public class temp2 {

    public static void main(String[] args) throws ParseException {
        String s = "2012-05-08T09:10:10";
        Calendar cal = stringToCalendar(s, TimeZone.getTimeZone("GMT+0"));
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        sdf.setTimeZone(TimeZone.getTimeZone("GMT+7"));
        System.err.println(sdf.format(cal.getTime()));
    }

    public static Calendar stringToCalendar(String strDate, TimeZone timezone) throws ParseException {
        String FORMAT_DATETIME = "yyyy-MM-dd'T'HH:mm:ss";
        SimpleDateFormat sdf = new SimpleDateFormat(FORMAT_DATETIME);
        sdf.setTimeZone(timezone);
        Date date = sdf.parse(strDate);
        Calendar cal = Calendar.getInstance();
        cal.setTime(date);
        return cal;
    }

} 
```

输出：

> 2012-05-08 16:10:10 哪里差确实是7小时***

# c - setreuid 调用无法重新建立进程权限

> ID：10496153
> 
> 赞同：0
> 
> 时间：2012-05-08T09:40:12.270
> 
> 标签：c, linux, permissions, root, setuid

我对 setreuid 有点困惑。

场景：一个进程以普通用户身份运行（id：cateof），但在很短的时间内需要以 root 身份运行。我必须从 cateof 提升对 root 的权限，然后再恢复为普通用户。我的第一个想法是在 setreuid(0, 0); 之间嵌套我的“根调用”。和一个 setreuid(ruid, euid); 就够了，但我错了。回到普通用户的唯一方法是在“root call”之后直接调用 setreuid(ruid, euid) 两次。

这是代码：

```
int main(...) {
    //check the permission, that the program is setuid
    //become normal user 
    ruid = getuid ();
    euid = geteuid ();
    setreuid(ruid, euid); 
    ...
    setreuid(0, 0);
    root_action();
    setreuid(ruid, euid); //undo root #1
    setreuid(geteuid(), getuid()); //undo root#2 
```

如果我不在最后一行调用**setreuid(geteuid(), getuid())**，则该进程将继续以 root 身份运行。为什么我需要调用它两次？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:58:56.877

你第一次调用 setreuid 实际上是一个无操作 - 它不会放弃特权，你本质上是说将我的真实 uid 设置为 my`getuid`并将我的有效 uid 设置为 my `geteuid`，在 setuid 应用程序的情况下与你相同获得。

在以用户身份运行的 setuid`root`程序开始时`bob`，然后`getuid() == bob`，`geteuid() == root`

如果您想放弃特权，那么您可能应该调用：

```
setreuid(euid, ruid); 
```

Thad 会将有效 uid 设置为`bob`，将实际 uid 设置为`rood`。在那之后所做的一切都将*好像由非特权用户 bob*完成，了解此时您还没有完全放弃切换回`root`特权的能力，因为您还没有清除保存的用户 ID 信息。

获得 root 权限将通过以下方式完成：

```
setreuid(ruid, euid); 
```

同样，最后，当您重新删除权限时，您需要执行相同的操作：

```
setreuid(euid, ruid); 
```

即设置有效的 uid 为 id `bob`。[answer here][1] 是类似的情况，它更简洁地解释了细节。

通常，在检查这些信息时，一个小打印机助手，如：

```
void printids(char *header) {
    uid_t ruid, euid, saveduid;
    getresuid(&ruid, &euid, &saveduid);
    printf("%s ruid=%d euid=%d saveduid=%d\n", header, ruid, euid, saveduid);
} 
```

帮助确定所有步骤中的权限/uid 信息。

仅`seteuid()`用于临时更改权限会更简单一些，而不是更重一些`setreuid()`。您还可以使用`setresuid()`调用来更明确地设置真实、有效和保存的用户 ID 值。

保存和删除权限：

```
setresuid(ruid, ruid, euid); 
```

重新获得root权限：

```
setresuid(euid, euid, -1); 
```

退回到非 root 权限：

```
setresuid(ruid, ruid, -1); 
```

即我们让保存的用户ID保留根信息，并在根/非根之间操作`realuid`和值切换`euid`

# sql - 在 sql server 2008 中计算表中具有相同值的两列的行

> ID：10496154
> 
> 赞同：1
> 
> 时间：2012-05-08T09:40:17.690
> 
> 标签：sql, sql-server-2008

下面是我的表结构和数据...

```
id   receiver   caller category   playfilename
1    4564165    42444    4        skdjfls.wav
2    4444444    42444    2        dfkjsanf.wav
3    4444444    42444    2        kldsfjas.wav
4    4845455    42444    3        dsklfjal.wav
5    4542122    42444    2        dfssadfs.wav
6    4535656    42444    2        dsfjklsaj.wav 
```

在这里，我想计算具有相同接收者和类别列数据的行数。例如，在上表中返回一个额外的选择列，总计数为 2，它有 4444444 个接收器和类别 2。类似地，将与接收器和调用者上的值匹配的其他行返回到具有计数列的另一行，如下所示。

```
SELECT DISTINCT receiver, caller, category, playfilename, count from tbl_record .... ... 
```

我不知道该怎么做。sql server 中是否有任何函数可以解决这个问题，或者我使用了存储过程之类的东西

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T09:43:36.643

这个怎么样？

```
SELECT
    receiver, caller, category, playfilename,
    COUNT(*) OVER (PARTITION BY receiver, category) AS CountPerReceivercategoryGroup
from tbl_record 
```

# c - protobuf-C 中字符串的使用

> ID：10496163
> 
> 赞同：0
> 
> 时间：2012-05-08T09:40:32.443
> 
> 标签：c, linux, protocol-buffers

我是使用 protobuf 的新手。我在 Linux-C 中使用 protobuf 库。

有没有为我的消息设置**可选和必需*字符串的示例？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:05:03.823

protobuf的[首页](http://code.google.com/p/protobuf/)有一个`.proto`-file 示例，其中包含：

```
required string name = 2;
optional string email = 3; 
```

所以这似乎不是很复杂。这些页面上似乎没有“官方”C API，并且您没有提供指向您正在使用的那个的链接，因此很难说更多。

# java - 处理中的不同屏幕尺寸和图像

> ID：10496164
> 
> 赞同：0
> 
> 时间：2012-05-08T09:40:33.850
> 
> 标签：java, android, image

我目前正在使用 Processing 为 Android 操作系统开发我的第一个游戏应用程序。我需要用图像“覆盖”一个椭圆（一个圆圈），但是我需要对其进行缩放，以便得到一个与宽度和高度成比例的完美定义的圆圈（半径 = 宽度 *（0.0375））。我想过制作相同图像宽度，不同尺寸的不同版本，并根据当前屏幕分辨率选择一个。我的问题是：

Android 手机有标准的屏幕分辨率吗？如果是这样，我可以为每种尺寸制作一张图像，那会很棒吗？你能告诉我在哪里可以找到这些决议吗？

有更有效的处理方式吗？我不能使用 XML，因为我正在使用处理并且我的所有图像都进入资产文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:48:22.430

Android 的标准屏幕分辨率在这里定义：http: [//developer.android.com/training/multiscreen/screendensities.html](http://developer.android.com/training/multiscreen/screendensities.html)

基本上，它们是 0.75、1.0、1.5 和 2.0。

处理这个问题的最简单方法是通过 XML。通过处理，您的意思是[http://processing.org/](http://processing.org/)吗？如果框架不能为您处理这个问题（如果它是基于 OpenGL 的，它确实应该），那么使用常规 Android 进行开发实际上可能更简单。

# python - 如何将 QTableWidget 导入/导出到某个文件？

> ID：10496168
> 
> 赞同：1
> 
> 时间：2012-05-08T09:40:46.983
> 
> 标签：python, pyqt4, qtablewidget

PyQt 中是否有一些简单的方法可以将数据从 QTableWidget 存储到某个文件，然后再次使用该内容？这对我来说不是一项关键任务，所以我不想发明一些自定义 xml 规则或其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:23:24.170

Qt 提供了一个（修改后的）模型->视图框架，因此表格或任何其他 GUI 小部件中的数据都存储在数据模型中。这是您要保留的模型中的数据。GUI 小部件本身不提供任何工具来执行此操作。

Qt 数据模型组件中没有实现标准的数据持久性方法。Qt 确实提供了将数据结构以二进制 (QDataStream)、文本 (QTextStream) 和 XML (QDomDocument) 格式保存到磁盘的功能。但是，如果您使用 PyQt，您可能最好使用 Python 的内置数据持久性库，例如 Pickle 或 Shelve，或者它是 JSON 或 XML 库。

# php - 使用 jquery 突出显示多个 div

> ID：10496172
> 
> 赞同：0
> 
> 时间：2012-05-08T09:40:58.267
> 
> 标签：php, jquery, codeigniter

我有一个日历，我试图在本月任何一天的鼠标悬停时突出显示星期六到星期六......所以如果你将鼠标悬停在 5 月 7 日星期一，它将突出显示 5 日星期六 - 12 日星期六。

我已经通过以下方式解决了这个问题。日历是用php动态生成的，所以每一天都是这样的：

```
<td class="calendar-day week_number_' . $this_week_number . '">
    <div class="hello" id="day_' . $list_day . '"><div class="day-number">' . $list_day . '</div>'
</td> 
```

`'week_number_ . $this_week_number'`为每个星期六到星期六生成，并且 2 周共享的星期六同时应用了这两个类，例如一年中的第一个可用周将是`week_number_1`（这是一个度假小屋，因此并非所有周都开放）。`$list_day`是为其他地方的每一天生成的日期。

使用页面底部的以下 jquery 进行突出显示：

```
$('.hello').mouseover(function() {
    var day = $(this).attr('id');
    $.post('/modules/calendar/get_week_number2', { month:" . $month . ", day:day, year:" . $year . " }, function(data) {
        $('.calendar-day').siblings('.week_number_'+data).css('background', 'yellow');
    });
});

$('.hello').mouseleave(function() {
    var day = $(this).attr('id');
    $.post('/modules/calendar/get_week_number2', { month:" . $month . ", day:day, year:" . $year . " }, function(data) {
        $('.calendar-day').siblings('.week_number_'+data).css('background', 'red');
    });
}); 
```

这是在 Codeigniter 中完成的，所以这个 jquery 被生成并插入到页面底部，只是为了解释那里的 php 变量。最后`get_week_number2`是确定要突出显示哪一周的功能...

```
public function get_week_number2() {
    $month = $_POST['month'];
    $day = str_replace("day_", "", $_POST['day']);
    $year = $_POST['year'];
    $date = date('Y-m-d H:i:s', mktime(0,0,0,$month,$day,$year));
    $date2 = strtotime($date);
    foreach($this->weeks_in_year() AS $week_number => $week)
    {
        if($date2 > strtotime($week['from']) AND $date2 < strtotime($week['to']))
        {
            echo $week_number;
        }
    }
} 
```

`$this->weeks_in_year()`是另一个在一年中生成一系列星期的函数......但我认为不需要在这里......它已经变得太长了！

所以我的问题是，是的，这行得通，但没有更好的方法吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:45:16.513

由于您似乎正在使用表格，因此可以说更好的方法是获取悬停`td`元素的父元素，并一举`tr`将样式应用于该行的所有子元素。`td`也就是说，而不是弄清楚兄弟姐妹之类的东西。

所以让我们说：

```
<td class="calendar_day">
    <div id="day_1"></div>
</td> 
```

你可以走了：

```
$('.calendar_day').on('mouseover', function () {

    // get the parent TR
    var $this = $(this),
        $row = $this.parent('tr')
        ;

    // then apply a style that highlights every cell in that row
    $row.find('tr').addClass('highlight'); // ... or whatever your logic is

}); 
```

然后你可以在`mouseleave`.

# ruby - 红宝石 | 设计数学？

> ID：10496174
> 
> 赞同：6
> 
> 时间：2012-05-08T09:41:20.743
> 
> 标签：ruby, math, primes

**情况：**

*   我正在编写一个程序来解决素数。我需要解决 4x^2+y^2=n 的问题，其中 n 是一个已知变量。
*   是的，它必须是 Ruby。
*   我很乐意在这个项目上花费大量时间。
*   我最好自己编写方程的求解算法，并将其作为该项目的一部分。

**我真正喜欢的：**

*   如果有人可以向我提供指向与求解代数方程相关的形式算法的构造的指南、网站或消歧的链接，或者向我提供*在读者*看来这将有助于我的探索的信息。
*   请不要建议我使用其他语言。如果您在回答之前接受我真的非常想这样做，我也将不胜感激。这个项目没有范围和时间限制，也不是为了盈利。这是为了我自己的教育。

**笔记：**

*   我并不直接反对为 Ruby 实现和使用已经存在的数学库/模块/某些东西，但另一种方式对我来说更可取。

结束评论：

问题是我知道如何用手/用计算器解决这些方程，但我不确定如何用代码解决它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:44:35.623

我想你正在实施阿特金筛法。在这种情况下，您实际上并没有*求解*方程。查看[原始论文](http://www.ams.org/journals/mcom/2004-73-246/S0025-5718-03-01501-1/S0025-5718-03-01501-1.pdf)以了解实际算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T21:23:25.080

看起来您正在尝试实现[阿特金筛，](http://en.wikipedia.org/wiki/Sieve_of_Atkin)那么您可能也知道 4x^2+y^2=n 只是三个方程中的第一个。我不想破坏你的乐趣，因此下面只实现了那个。如果您遇到困难，请评论此答案，我会回复您。

```
max = 100
primes = Array.new(max + 1) { false }
sqrt = Math.sqrt(max)
1.upto(sqrt) do |x|
  1.upto(sqrt) do |y|
    n = 4 * x**2 + y**2
    primes[n] ^= true if n <= max && (n % 12 == 1 || n % 12 == 5)
  end
end 
```

# ruby-on-rails - 如何在 Rails 中实现 RESTful 父/子表单？

> ID：10496175
> 
> 赞同：0
> 
> 时间：2012-05-08T09:41:22.797
> 
> 标签：ruby-on-rails, parent-child, restful-architecture

我的应用程序被父母和他们的孩子使用。

我想允许父母从他们的帐户页面编辑有关他们孩子的详细信息。我设想一个单一的表单，其中上部包含有关父级的字段，下部包含有关子级的字段。如果父母有多个孩子，则下面的部分将被标记；每个孩子一个标签。

如果可能的话，我想实现一个 RESTful 设计。到目前为止我考虑过的选项是：

**选项 1** - 通过父级的资源路由公开父级和所有子级（嵌套子窗体的列表），然后使用 JavaScript 将 UI 更改为基于选项卡的布局。

**选项 2** - 通过父级的资源路由公开父级和一个子级（嵌套形式）。通过嵌套路由公开同一页面，但针对特定子级。

所以：

'GET /parent/1' 将呈现父级的帐户页面，其中包含“第一个”（默认）子级的嵌套子表单。它还将包含两个或多个链接到嵌套路由的可点击链接（样式为选项卡）；每个孩子一个（例如“GET /account/1/child/1”和“GET /account/1/child/2”）。

每个嵌套路由都将由一个“孩子”控制器提供服务，该控制器实际上将呈现与父路由/控制器呈现完全相同的父帐户页面，但具有路由寻址的子资源的适当填充子表单。

选项 2 似乎是一种可行的方法，但我欢迎反馈和任何其他想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:19:14.367

在任何一种方法中，如果您尚未保存父级，您可能难以在子级之间导航。如果您从孩子 1 导航到孩子 2，您如何存储有关孩子 1 的信息，现在您将通过呈现孩子 2 的表单来替换孩子 1 选项卡。也许选项 1 通过隐藏数据来处理这个问题，但是选项2肯定有这个问题。

我建议让用户先保存父数据，然后编辑子数据，但不要尝试同时编辑父数据和子数据。

这是对嵌套路由的一个很好的使用。通常嵌套路由是有代价的，你必须不断地发送对外部嵌套对象的引用。在这种情况下，您确实想要（或不介意）对父级的引用，因为这对您的工作流程非常重要。

但是，仅仅因为嵌套路由可以很好地工作，并不意味着 Javascript 选项可能不会更好。之后，您不必在编辑子数据的过程中重新加载页面。在最坏的情况下，如果他们的孩子比你考虑的多一个，你必须加载一个部分来添加一个新表单。

# google-maps-api-3 - 标记地图中的点

> ID：10496180
> 
> 赞同：3
> 
> 时间：2012-05-08T09:41:50.933
> 
> 标签：google-maps-api-3, google-fusion-tables

是否有任何代码来标记地图上显示的点数据。我的地图上共有 600 个点。我想用 1 到 600 的数字命名它。这样用户就可以使用数字轻松识别点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:46:55.097

这个页面也许能帮助你：[谷歌地图的动态图标](https://developers.google.com/chart/image/docs/gallery/dynamic_icons) 它展示了如何为你的谷歌地图使用动态标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:35:07.840

这在 Fusion Tables 中目前是不可能的。[已创建](http://code.google.com/p/fusion-tables/issues/detail?id=223)一个问题来请求此操作。在该问题的帖子底部有一条消息暗示现在可以使用 Trusted Tester API 完成。发布了一个鼠标悬停示例。

# c# - 使用 Web 服务时出错，内容类型“application/xop+xml”与预期类型“text/xml”不匹配

> ID：10496186
> 
> 赞同：41
> 
> 时间：2012-05-08T09:42:03.207
> 
> 标签：c#, .net, webservice-client, wcf-client

在为我公司购买的产品使用网络服务时，我遇到了一个奇怪的问题。该产品名为 Campaign Commander，由一家名为 Email Vision 的公司制造。我们正在尝试使用“Data Mass Update SOAP API”。

每当我尝试调用 web 服务上的任何方法时，调用实际上都会成功，但客户端在处理响应时失败并且我得到一个异常。

错误的详细信息如下，感谢你们提供的任何帮助。

## 使用 Web Reference 时出错（旧式 Web 服务客户端）

当使用该服务作为 Web 参考时，我会收到我拨打的`InvalidOperationException`任何电话，并显示以下消息：

```
Client found response content type of 'multipart/related; type="application/xop+xml"; boundary="uuid:170e63fa-183c-4b18-9364-c62ca545a6e0"; start="<root.message@cxf.apache.org>"; start-info="text/xml"', but expected 'text/xml'.
The request failed with the error message:
--

--uuid:170e63fa-183c-4b18-9364-c62ca545a6e0
Content-Type: application/xop+xml; charset=UTF-8; type="text/xml";
Content-Transfer-Encoding: binary
Content-ID: <root.message@cxf.apache.org>

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <ns2:openApiConnectionResponse xmlns:ns2="http://api.service.apibatchmember.emailvision.com/" xmlns:ns3="http://exceptions.service.apibatchmember.emailvision.com/">
      <return>DpKTe-9swUeOsxhHH9t-uLPeLyg-aa2xk3-aKe9oJ5S9Yymrnuf1FxYnzpaFojsQSkSCbJsZmrZ_d3v2-7Hj</return>
    </ns2:openApiConnectionResponse>
  </soap:Body>
</soap:Envelope>
--uuid:170e63fa-183c-4b18-9364-c62ca545a6e0--
--. 
```

如您所见，响应肥皂信封看起来有效（这是有效响应并且调用成功），但客户端似乎内容类型有问题并生成异常。

## 使用服务参考（WCF 客户端）时出错

当我将服务作为服务参考使用时，我会收到我拨打的`ProtocolException`任何电话，并显示以下消息：

```
The content type multipart/related; type="application/xop+xml"; boundary="uuid:af66440a-012e-4444-8814-895c843de5ec"; start="<root.message@cxf.apache.org>"; start-info="text/xml" of the response message does not match the content type of the binding (text/xml; charset=utf-8). If using a custom encoder, be sure that the IsContentTypeSupported method is implemented properly. The first 648 bytes of the response were: '
--uuid:af66440a-012e-4444-8814-895c843de5ec
Content-Type: application/xop+xml; charset=UTF-8; type="text/xml";
Content-Transfer-Encoding: binary
Content-ID: <root.message@cxf.apache.org>

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <ns2:openApiConnectionResponse xmlns:ns2="http://api.service.apibatchmember.emailvision.com/" xmlns:ns3="http://exceptions.service.apibatchmember.emailvision.com/">
      <return>Dqaqb-MJ9V_eplZ8fPh4tdHUbxM-ZtuZsDG6GalAGZSfSzyxgtuuIxZc3aSsnhI4b0SCbJsZmrZ_d3v2-7G8</return>
    </ns2:openApiConnectionResponse>
  </soap:Body>
</soap:Envelope>
--uuid:af66440a-012e-4444-8814-895c843de5ec--'. 
```

就像前面的例子一样；我们有一个有效的soap响应并且调用成功了，但是客户端似乎有内容类型的问题并且产生了一个异常。

我可以设置任何选项以使客户对响应类型没有问题吗？我已经进行了一些 Google 搜索，但到目前为止，我发现的任何内容都没有帮助我。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-05-08T11:01:24.230

对于任何遭受同样问题的人；我找到了一种将 Web 服务用作服务参考 (WCF) 的解决方案。[BasicHttpBinding.MessageEncoding](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.messageencoding.aspx)属性需要设置为“Mtom” 。

这是所需配置设置的片段：

```
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding messageEncoding="Mtom">          
        </binding>
      </basicHttpBinding>
    </bindings>
  </system.serviceModel>
</configuration> 
```

编辑：如果您对自定义绑定有同样的问题，请参阅[@robmzd 的答案](https://stackoverflow.com/questions/10496186/error-consuming-webservice-content-type-application-xopxml-does-not-match-ex/#34351351)。

我还没有找到将它作为旧式 Web 参考使用的解决方案。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-26T16:06:21.553

经过几天的努力，我找到了一个非常简单的解决方案：

1.  在VS2010的主菜单中选择Tools->WCF Service Configuration Editor，激活Configuration Editor；
2.  再次关闭它；
3.  右击App.Config文件，找到一个新的菜单项“Edit WCF Configuration”；
4.  点击绑定；
5.  将 MessageEncoding 更改为 Mtom；
6.  节省。

我希望这会对某人有所帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-18T08:28:00.407

我有同样的问题，但`<customBinding>`. 要修复它，您可以使用绑定下的单独`<mtomMessageEncoding>`配置节点配置 Mtom 消息编码。

```
<configuration>
  <system.serviceModel>
    <bindings>
      <customBinding>
        <binding name="MyServiceBinding">
          <mtomMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16" messageVersion="Soap12" writeEncoding="utf-8">
            <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
          </mtomMessageEncoding>
        </binding>
      </customBinding>
    </bindings>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-24T13:56:18.837

如果您正在自托管 WCF 服务，并且您正在使用 WCF 客户端使用该服务。您必须记住`MessageEncoding`像这样在主机中设置属性：

```
BasicHttpBinding binding = new BasicHttpBinding();
binding.MessageEncoding = WSMessageEncoding.Mtom; 
```

我也遇到了这个问题。`MessageEncoding`我的客户在启动时不断抛出此异常，直到我意识到我忘记在主机应用程序中 设置绑定属性时才弄清楚为什么。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-10T04:47:46.610

I got exactly the same problem with the same function and the same company and I spend a couple of hours on Google trying to find the right answer. After so many trials I finally got it. Here is what I did: The following string was the response that functions from Email Vision where returning me (My main purpose was Mass Upload but I swap to getLastUpload for simplicity and testing).

string(2180) "

```
--uuid:5c8a8a1d-a29c-43d0-baaa-cb3a8c189962
Content-Type: application/xop+xml; charset=UTF-8; type="text/xml";
Content-Transfer-Encoding: binary
Content-ID: <root.message@cxf.apache.org>

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><ns2:getLastUploadResponse xmlns:ns2="http://api.service.apibatchmember.emailvision.com/" xmlns:ns3="http://exceptions.service.apibatchmember.emailvision.com/"><return><id>254816</id><source>API_BATCH_MEMBER</source><status>DONE</status></return><return><id>254810</id><source>API_BATCH_MEMBER</source><status>DONE</status></return><return><id>254805</id><source>API_BATCH_MEMBER</source><status>DONE</status></return><return><id>254799</id><source>API_BATCH_MEMBER</source><status>DONE</status></return><return><id>254797</id><source>API_BATCH_MEMBER</source><status>DONE</status></return><return><id>254791</id><source>API_BATCH_MEMBER</source><status>DONE</status></return><return><id>254790</id><source>API_BATCH_MEMBER</source><status>DONE</status></return><return><id>254771</id><source>API_BATCH_MEMBER</source><status>DONE</status></return><return><id>254770</id><source>API_BATCH_MEMBER</source><status>ERROR</status></return><return><id>254759</id><source>API_BATCH_MEMBER</source><status>DONE</status></return><return><id>254747</id><source>API_BATCH_MEMBER</source><status>DONE</status></return><return><id>253619</id><source>CCMD</source><status>DONE</status></return><return><id>238053</id><source>CCMD</source><status>DONE WITH ERROR(S)</status></return><return><id>216618</id><source>CCMD</source><status>DONE WITH ERROR(S)</status></return><return><id>200373</id><source>CCMD</source><status>DONE</status></return><return><id>200367</id><source>CCMD</source><status>DONE</status></return><return><id>195445</id><source>CCMD</source><status>DONE</status></return><return><id>194579</id><source>CCMD</source><status>DONE</status></return><return><id>194263</id><source>CCMD</source><status>DONE</status></return><return><id>193740</id><source>CCMD</source><status>DONE</status></return></ns2:getLastUploadResponse></soap:Body></soap:Envelope>
--uuid:5c8a8a1d-a29c-43d0-baaa-cb3a8c189962-- 
```

If you look at the top of the string it has a key value and other staff from the server which made the SoapClient class to throw an exception "looks like we got no XML document". Eventhough the xml document was below all this staff.

```
--uuid:5c8a8a1d-a29c-43d0-baaa-cb3a8c189962
Content-Type: application/xop+xml; charset=UTF-8; type="text/xml";
Content-Transfer-Encoding: binary
Content-ID: <root.message@cxf.apache.org> 
```

Similarly at the bottom of the string (after the xml) the same key appears

```
--uuid:5c8a8a1d-a29c-43d0-baaa-cb3a8c189962-- 
```

So the solution was to try to get rid of the part of the string from the beginning to the start of the xml file and from the end of the xml file to the end of the string. I found a very good script that helped me to approach this solution here [MTOM php client](https://gist.github.com/2243055). However, my response xml was a bit different so I just modified that script a little bit and here is my version.

```
function upload_file_insert_via_soap_obj( $token, $csv_file )
{
    try
    {
        $wsdl_loc = 'https:XXX/apibatchmember/services/BatchMemberService?wsdl';

        $soap_Object = new MTOMSoapClient( $wsdl_loc, array( 'cache_wsdl' => WSDL_CACHE_NONE, 'trace' => true ) );

        $parameters['token'] = $token;
        $parameters['insertUpload']['fileName'] = "insertMemberTest.txt";
        $parameters['insertUpload']['fileEncoding'] = "UTF-8";
        $parameters['insertUpload']['separator'] = ",";
        $parameters['insertUpload']['skipFirstLine'] = "false";
        $parameters['insertUpload']['autoMapping'] = "true"; 

        $parameters['file'] = file_get_contents( "insertMemberTest.txt" );

        $results = $soap_Object->uploadFileInsert( $parameters );

        $upload_id = $results->return;

        echo "<br/>upload_id: ".$upload_id;  
        return $upload_id;  
    }
    catch ( Exception $exception )
    {
        echo "EX REQUEST: " . $soap_Object->__getLastRequest() . "<br/>";
        echo "EX RESPONSE: " . $soap_Object->__getLastResponse() . "<br/>";
        echo "<br/>Response var dump: "; var_dump( $soap_Object->__getLastResponse() ); echo "<br/>";

        echo '<br/><br/> Exception: '.$exception->getMessage()."<br/>";
        var_dump( $exception );
    }
}

/**
* This client extends the ususal SoapClient to handle mtom encoding. Due
* to mtom encoding soap body has test apart from valid xml. This extension
* remove the text and just keeps the response xml.
*/

class MTOMSoapClient extends SoapClient 
{

    public function __doRequest( $request, $location, $action, $version, $one_way = 0 ) 
    {
        $response = parent::__doRequest( $request, $location, $action, $version, $one_way );
        //if resposnse content type is mtom strip away everything but the xml.
        if ( strpos( $response, "Content-Type: application/xop+xml" ) !== false ) 
        {
            //not using stristr function twice because not supported in php 5.2 as shown below
            //$response = stristr(stristr($response, "<s:"), "</s:Envelope>", true) . "</s:Envelope>";
            $tempstr = stristr( $response, "<soap:" );
            $response = substr( $tempstr, 0, strpos( $tempstr, "</soap:Envelope>" ) ) . "</soap:Envelope>";
        }
        //log_message($response);
        return $response;
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-09T05:45:26.740

I just got this problem because <**configSections**> was not the first element in <**configuration**>.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-31T17:05:41.497

我不确定这是否是放置此内容的合适位置，但我很难让我的 Windows 服务连接到 WSDL（使用自动生成的 Web 参考）。

我在这里遇到了与原始海报相同的错误。由于我没有使用 WCF，因此 app.config 对我不起作用并导致我的服务无法启动。我确实在[MSDN](https://social.msdn.microsoft.com/Forums/en-US/a2caf82e-f382-4584-9ffc-51b791a50c14/how-to-enable-mtom-feature-on-aspnet-webapplication-which-is-client?forum=wcf)上找到了 AjayChigurupati 声明要更改的帖子

`public partial class WsdlService : System.Web.Services.Protocols.SoapHttpClientProtocol {...}`

至

`public partial class WsdlService : Microsoft.Web.Services3.WebServicesClientProtocol {...}`

（确保将`Microsoft.Web.Services3`引用添加到您的项目）

现在我们可以访问布尔属性`RequireMtom`，你可以像这样包围你的调用函数：

```
 public DownloadResponse downloadDataFile([System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)] DownloadRequest Request) {
        RequireMtom = true; // ADDED
        object[] results = this.Invoke("downloadDataFile", new object[] {
                    Request});
        RequireMtom = false; // ADDED
        return ((DownloadResponse)(results[0]));
    } 
```

希望这可以帮助其他人在未来遇到同样的问题。

# php - 调整用户上传图片大小的最佳实践

> ID：10496190
> 
> 赞同：1
> 
> 时间：2012-05-08T09:42:38.873
> 
> 标签：php, image, imagemagick, resize, uploading

我正在为一个网站工作，有很多用户上传的图片。

让我们假设设计师做得很好，并在整个网站上使用了 4:3。所以现在，我们有 2 种尺寸，即 400x300 和 200x150

您认为哪种调整大小策略最适合这种情况？如果用户上传一张 800x200 的图片，应该如何调整它的大小？它应该去 400x100，还是应该去 1200x300 然后裁剪到中心，使其成为 400x300？

另外，您认为较小的图像应该发生什么。例如，如果用户尝试从 200x150 开始上传会怎样。是否应该扩大规模？应用了某种效果？我不认为所有较小的图像都应该被拒绝，尽管如果它们太小，用户可能会收到错误消息

顺便说一句，我说的是用 PHP (Imagemagick) 上传和处理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:48:13.883

一般来说，当图像变小时应该使用双三次滤波，当图像变大时应该使用双线性滤波。双三次滤波器有助于提高图像的清晰度，而双线性则使图像变得平滑。

但是，无论是裁剪、调整大小还是将两者混合，这完全取决于您的用户上传的图像类型以及它们在网站上的显示方式。

例如，如果您有照片的缩略图，您可能希望尽可能避免裁剪它们。

但是，如果您正在寻找一种“艺术”的感觉，则可以从角落裁剪图像而无需实际调整图像大小。

# java - Dateformat 不返回真实时间 - Java

> ID：10496192
> 
> 赞同：1
> 
> 时间：2012-05-08T09:42:42.167
> 
> 标签：java, android, datetime

这段代码给了我 09:40（我在土耳其），但我现在的时间是 12:40 我浏览了很多页面，但我找不到任何解决方案。我应该怎么做才能修复它？

```
 String DATE_FORMAT_NOW = "dd-MM-yyyy HH:mm:ss"; 
    Calendar cal = Calendar.getInstance(); 
    String timeZone = cal.getTimeZone().getDisplayName(); 
    System.out.println("timeZone is : " + timeZone ); 
        System.out.println("Current Time in MiliSeconds : " + cal.getTimeInMillis() ); 
    SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT_NOW); 
    String time=sdf.format(cal.getTime()); 
    System.out.println(time); 
```

还有为什么当我的时间是 12:40 时这段代码给出了 08:27

```
DateFormat formatterHourSecond = new SimpleDateFormat("HH:mm");
String saatStr = formatterHourSecond.format(tarih);     
System.out.println("Saat : " + saatStr); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:51:56.060

看起来您的 JVM 的时区不正确。尝试`TimeZone`在对象中显式设置为土耳其`SimpleDateFormat`，如下所示：

```
SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT_NOW);
sdf.setTimeZone(TimeZone.getTimeZone("Turkey"));
String time=sdf.format(cal.getTime()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:55:46.840

您机器的时区在某种程度上不正确。通常这是由操作系统（通过区域设置）完成的，JVM 会接受它。所以最好的解决方案实际上是在你的操作系统中设置正确的设置，在重新启动你的应用程序后，你应该得到正确的时间。如果您计划让您的应用程序在不同的国家/地区运行，这尤其好。

但是，如果您真的需要强制 TimeZone，有两种方法可以做到这一点：

1.  在 SimpleDateFormat 上执行：[http](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setTimeZone(java.util.TimeZone) ://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setTimeZone(java.util.TimeZone )

2.  为您的整个应用程序全局执行此操作：[TimeZone.setDefault(TimeZone.getTimeZone(...))](http://docs.oracle.com/javase/6/docs/api/java/util/TimeZone.html#setDefault%28java.util.TimeZone%29)

# c# - 在 ASP.NET MVC 存储库模式中，每个类都需要有一个接口吗？

> ID：10496193
> 
> 赞同：0
> 
> 时间：2012-05-08T09:42:42.773
> 
> 标签：c#, asp.net-mvc-3

我有点混淆什么应该是存储库，什么应该有接口。
是的，我知道这些都是为了方便单元测试。

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:47:47.157

存储库模式可帮助您使您的应用程序更易于管理和可扩展。它为您提供了以最少的更改插入或拔出某些功能以及影响应用程序兼容性的便利。

通常，当涉及到 MVC 存储库时，它用于数据层。

没有必要实现它，但如果你这样做会很好，并且对你的问题的具体回答取决于你如何实现它，因为不需要接口和类的一对一映射。

您可以通过以下链接了解更多详情

[MVC 存储库模式设计决策](https://stackoverflow.com/questions/2449865/mvc-repository-pattern-design-decision)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:21:22.403

完整阅读[这篇](http://www.dotnetage.com/publishing/home/2011/07/05/6883/the-repository-pattern-with-ef-code-first-dependeny-injection-in-asp-net-mvc3.html)文章，我想你的所有疑问都会得到解答。;)

# facebook - 注销后facebook访问令牌仍然有效

> ID：10496194
> 
> 赞同：1
> 
> 时间：2012-05-08T09:42:43.363
> 
> 标签：facebook, curl, token, logout

我正在使用带有 libCurl 的 Facebook API。我尝试使用 logout.php 页面注销用户，但访问令牌仍然有效，我可以访问用户数据。我可以在浏览器中重现这个：

[https://graph.facebook.com/oauth/authorize?client_id=CLIENT_ID&redirect_uri=https%3A%2F%2Fwww.facebook.com%2Fconnect%2Flogin_success.html&response_type=token&scope=email](https://graph.facebook.com/oauth/authorize?client_id=CLIENT_ID&redirect_uri=https%3A%2F%2Fwww.facebook.com%2Fconnect%2Flogin_success.html&response_type=token&scope=email)

我登录到我的应用程序并使用带有“me”对象的打开图检索用户数据：

"https://graph.facebook.com/me/?access_token=ACCESS_TOKEN (引用只是因为我不能发布更多的超链接。)

我得到一个包含数据的 .js 文件。到目前为止还可以。

现在我想注销用户： [https ://www.facebook.com/logout.php?access_token=ACCESS_TOKEN&next=http://www.google.com](https://www.facebook.com/logout.php?access_token=ACCESS_TOKEN&next=http://www.google.com)

我被重定向到 google.com，但我仍然可以使用带有访问令牌的 me-URL 检索用户数据。

所以访问令牌没有失效，这意味着没有注销！我看错了吗？如何在注销时使访问令牌无效？

谢谢！

费边

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:07:00.467

据我所知，令牌应该保持有效。用户登录状态和访问令牌不相关。令牌在超时或用户更改密码后失效。

# c - 即使使用 -g3 或 -ggdb3 或 -gdwarf-4 也不存在 gdb 宏符号

> ID：10496195
> 
> 赞同：9
> 
> 时间：2012-05-08T09:42:46.493
> 
> 标签：c, debugging, gdb

我有这个 C 文件（sample.c）：

```
#include <stdio.h>
#define M 42
#define ADD(x) (M + x)
int main ()
{
  printf("%d\n", M);
  printf("%d\n", ADD(2));
  return 0;
} 
```

我编译的是：

```
$ gcc -O0 -Wall -g3 sample.c -o sample 
```

然后调试

```
$ gdb ./sample
GNU gdb (Gentoo 7.3.1 p2) 7.3.1
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-pc-linux-gnu".
For bug reporting instructions, please see:
<http://bugs.gentoo.org/>...
Reading symbols from /tmp/sample...done.
(gdb) macro list
(gdb) macro expand ADD(2)
expands to: ADD(2)
(gdb) print M
No symbol "M" in current context.
(gdb) q 
```

这曾经奏效。我需要它来工作，因为我正在使用为硬件外围设备和内存地址提供#define 名称的库。

这似乎与[Sourceware gdb 站点](http://sourceware.org/gdb/current/onlinedocs/gdb/Macros.html)上显示的行为直接矛盾。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T09:55:29.773

看起来宏需要以一种或另一种方式“引入范围”。如果您完全按照链接到的页面中的示例进行操作，它们就会像宣传的那样工作（至少它们对我有用）。

示例（`t.c`是您的源文件）：

```
$ gcc -O0 -g3 t.c
$ gdb ./a.out 
GNU gdb (Gentoo 7.3.1 p2) 7.3.1
...
Reading symbols from .../a.out...done.
(gdb) info macro ADD
The symbol `ADD' has no definition as a C/C++ preprocessor macro
at <user-defined>:-1
             // Macros not loaded yet
(gdb) list main
1   #include <stdio.h>
2   #define M 42
3   #define ADD(x) (M + x)
4   int main ()
5   {
6     printf("%d\n", M);
7     printf("%d\n", ADD(2));
8     return 0;
9   }
(gdb) info macro ADD
Defined at /home/foo/tmp/t.c:3
#define ADD(x) (M + x)
             // Macros "in scope"/loaded
(gdb) macro expand ADD(42)
expands to: (42 + 42)
(gdb) macro expand M      
expands to: 42
(gdb) macro expand ADD(M)
expands to: (42 + 42)
(gdb) 
```

或者：

```
$ gdb ./a.out 
GNU gdb (Gentoo 7.3.1 p2) 7.3.1
...
Reading symbols from .../a.out...done.
(gdb) macro expand ADD(1)
expands to: ADD(1)
             // Macros not available yet
(gdb) break main
Breakpoint 1 at 0x400538: file t.c, line 6.
(gdb) r
Starting program: /home/foo/tmp/a.out 
Breakpoint 1, main () at t.c:6
6     printf("%d\n", M);
(gdb) macro expand ADD(1)
expands to: (42 + 1)
             // Macros loaded
(gdb) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T09:55:15.527

尝试做`list`第一个：

```
(gdb) list
1       #include <stdio.h>
2       #define M 42
3       #define ADD(x) (M + x)
4       int main ()
5       {
6         printf("%d\n", M);
7         printf("%d\n", ADD(2));
8         return 0;
9       }
10
(gdb) info macro M
Defined at /home/ouah/tst.c:2
#define M 42
(gdb) info macro ADD
Defined at /home/ouah/tst.c:3
#define ADD(x) (M + x)
(gdb) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T07:19:06.387

我遇到了示例问题，并意识到我使用的是旧版本的 gcc。

之前我用过 gcc 3.46 和 gdb 7.3，宏扩展不起作用，将 gcc 升级到 4.5.2 和 gdb 到 7.5 解决了这个问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-08T10:07:47.877

gdb 适用于可执行文件，其中您的所有宏仅在预处理时被替换，因此 M 不存在于上下文中

# java - 使用 eclipselink 的 rcp 启用动态编织

> ID：10496197
> 
> 赞同：1
> 
> 时间：2012-05-08T09:43:01.820
> 
> 标签：java, eclipselink

我在 rcp 应用程序中使用 eclipselink，当第一次应用程序使用数据库时，我收到这些警告消息。此外，应用程序滞后 1-2 秒，直到 jpa 成功登录。如何停止此警告，此警告是否滞后于应用程序？

```
[EL Info]: 2012-05-08 12:28:31.186--ServerSession(981252826)--EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461
[EL Warning]: 2012-05-08 12:28:31.774--ServerSession(981252826)--Reverting the lazy setting on the OneToOne or ManyToOne attribute x for the entity class [class y] since weaving was not enabled or did not occur.
[EL Warning]: 2012-05-08 12:28:31.775--ServerSession(981252826)--Reverting the lazy setting on the OneToOne or ManyToOne attribute xx for the entity class [class yy] since weaving was not enabled or did not occur.
[EL Warning]: 2012-05-08 12:28:31.775--ServerSession(981252826)--Reverting the lazy setting on the OneToOne or ManyToOne attribute xxx for the entity class [class yyy] since weaving was not enabled or did not occur.
[EL Info]: 2012-05-08 12:28:31.969--ServerSession(981252826)--bundleresource://46.fwk1596783631:2_Management login successful 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:40:29.493

也许现在回答为时已晚，但它与多对一或一对一关系和延迟加载有关。您可能会使用它，为此，eclipselink 必须编织字节码（.class 文件）。如果 eclipselink 无法编织代码（由于某些原因），那么它不能使用 LAZY 加载....所以这可能是您的应用程序滞后的原因（如果不是 LAZY 那么是 EAGER 加载，这可能需要一些额外的时间，直到从数据库中获取数据）。

# iphone - iphone 如何在日历中添加事件？

> ID：10496201
> 
> 赞同：3
> 
> 时间：2012-05-08T09:43:24.333
> 
> 标签：iphone, ios5, calendar, xcode4.2

我正在尝试制作一个日历并查看我可以在其中创建、编辑或删除点击按钮的事件的日历，创建的事件应该每周查看我已经尝试过 kal、tapku 图书馆日历但找不到合适的。是否有任何链接或代码可以帮助我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:52:35.237

```
#import <EventKit/EventKit.h>
#import <EventKitUI/EventKitUI.h>

EKEventViewController *detailViewController;
EKEventStore *eventStore;
eventStore = [[EKEventStore alloc] init]; 
EKEvent *event = [EKEvent eventWithEventStore:eventStore]; 
event.title = @"Test Event"; 
event.startDate = copyofnextappdt; 
event.endDate = copyofnextappdt;
[event setCalendar:[eventStore defaultCalendarForNewEvents]];
NSError *err;
[eventStore saveEvent:event span:EKSpanThisEvent error:&err]; 
```

# c# - 如何将 GridView 图像绑定到 Metro 风格应用程序中的数据库？

> ID：10496202
> 
> 赞同：0
> 
> 时间：2012-05-08T09:43:24.880
> 
> 标签：c#, sql-server, xaml, windows-runtime, winrt-xaml

我创建了一个 GridView 应用程序，并希望将 GridView 中的图像绑定到数据库中的值，数据库中的值存储为图像数据类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:59:04.913

你不能。您必须首先通过 Web 服务公开图像。WinRT 应用程序不直接与数据库对话——AFAIK 还没有 API。[也许有人为 SQLite](https://github.com/timheuer/callisto/tree/master/src/Callisto/Data)创建了一些代理，但您仍然需要先下载图像。

# css - 浮动没有响应？

> ID：10496203
> 
> 赞同：0
> 
> 时间：2012-05-08T09:43:30.727
> 
> 标签：css, responsive-design

[tmbeta.tumblr.com](http://tmbeta.tumblr.com)

看到帖子下的注释数了吗？css 没问题，但不知何故 float:right 没有响应。

要了解我在说什么，请访问[http://responsivepx.com/?tmbeta.tumblr.com#500x497](http://responsivepx.com/?tmbeta.tumblr.com#500x497)并尝试使窗口小于 480 像素。下面有一个小间隙，可以通过刷新页面来修复，但我正在寻找一个稳定的解决方案。

我尝试清除浮动，但似乎没有任何效果。

正如我所说，这是代码，导致问题的原因是浮动：对。

```
 .notecount {
                    float: right;
                color: #fff;
                font-size: .8em;
                font-weight: bold;
                text-shadow: 0 1px 0 #000;
                border-bottom: solid #666666 1px;
                padding: .3em .8em 0 2.5em;
                -webkit-border-radius: 15px;
                   -moz-border-radius: 15px;
                        border-radius: 15px;
                -webkit-box-shadow: inset 0px 3px 3px 0px #23262c;
                box-shadow: inset 0px 3px 3px 0px #23262c;
                background: #393939 url(http://dl.dropbox.com/u/13823768/masonry/img/notes.png) no-repeat 10px 65% ;
vertical-align: middle;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:11:36.410

通过在媒体查询之外添加 float:right 来解决此问题。这是一个小提琴。 [http://jsfiddle.net/Xkw9T/](http://jsfiddle.net/Xkw9T/)

# android - Android apk 混淆

> ID：10496206
> 
> 赞同：3
> 
> 时间：2012-05-08T09:43:41.307
> 
> 标签：android, obfuscation, proguard

我正在尝试混淆我的 android 应用程序。但无法达到结果。

在工具中它提示“输入不包含任何类。您是否指定了正确的 '-injars' 选项？”

那么，这是否意味着我的输入文件已经被混淆了？如何区分普通 APK 和混淆 APK？

任何帮助将不胜感激。

# java - play 2.0中没有play.test.FunctionalTest怎么写功能测试？

> ID：10496207
> 
> 赞同：2
> 
> 时间：2012-05-08T09:43:42.083
> 
> 标签：java, playframework-2.0

我是 Java 和 play 框架的新手。目前我正在使用 Play framework 2.0，并且没有类 play.test.FunctionalTest。如何编写函数测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:18:57.923

请参阅示例应用程序中的示例。

一个现成的示例位于 ${PLAY_FRAMEWORK}/samples/java/computer-database/test/FunctionalTest.java，引用如下：

```
import org.junit.*;

import java.util.*;

import play.mvc.*;
import play.test.*;
import play.libs.F.*;

import static play.test.Helpers.*;
import static org.fest.assertions.Assertions.*;

public class FunctionalTest {

    @Test
    public void redirectHomePage() {
        running(fakeApplication(), new Runnable() {
           public void run() {
               Result result = callAction(controllers.routes.ref.Application.index());

               assertThat(status(result)).isEqualTo(SEE_OTHER);
               assertThat(redirectLocation(result)).isEqualTo("/computers");
           }
        });
    }

    @Test
    public void listComputersOnTheFirstPage() {
        running(fakeApplication(), new Runnable() {
           public void run() {
               Result result = callAction(controllers.routes.ref.Application.list(0, "name", "asc", ""));

               assertThat(status(result)).isEqualTo(OK);
               assertThat(contentAsString(result)).contains("574 computers found");
           }
        });
    }

    @Test
    public void filterComputerByName() {
        running(fakeApplication(), new Runnable() {
           public void run() {
               Result result = callAction(controllers.routes.ref.Application.list(0, "name", "asc", "Apple"));

               assertThat(status(result)).isEqualTo(OK);
               assertThat(contentAsString(result)).contains("13 computers found");
           }
        });
    }

    @Test
    public void createANewComputer() {
        running(fakeApplication(), new Runnable() {
            public void run() {
                Result result = callAction(controllers.routes.ref.Application.save());

                assertThat(status(result)).isEqualTo(BAD_REQUEST);

                Map<String,String> data = new HashMap<String,String>();
                data.put("name", "FooBar");
                data.put("introduced", "badbadbad");
                data.put("company.id", "1");

                result = callAction(
                    controllers.routes.ref.Application.save(), 
                    fakeRequest().withFormUrlEncodedBody(data)
                );

                assertThat(status(result)).isEqualTo(BAD_REQUEST);
                assertThat(contentAsString(result)).contains("<option value=\"1\" selected>Apple Inc.</option>");
                assertThat(contentAsString(result)).contains("<input type=\"text\" id=\"introduced\" name=\"introduced\" value=\"badbadbad\" >");
                assertThat(contentAsString(result)).contains("<input type=\"text\" id=\"name\" name=\"name\" value=\"FooBar\" >");

                data.put("introduced", "2011-12-24");

                result = callAction(
                    controllers.routes.ref.Application.save(), 
                    fakeRequest().withFormUrlEncodedBody(data)
                );

                assertThat(status(result)).isEqualTo(SEE_OTHER);
                assertThat(redirectLocation(result)).isEqualTo("/computers");
                assertThat(flash(result).get("success")).isEqualTo("Computer FooBar has been created");

                result = callAction(controllers.routes.ref.Application.list(0, "name", "asc", "FooBar"));
                assertThat(status(result)).isEqualTo(OK);
                assertThat(contentAsString(result)).contains("One computer found");

            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T10:44:59.827

play.test.FunctionalTest 不存在。

如何编写函数测试应该阅读这里的文档。

*   [https://github.com/playframework/Play20/wiki/JavaTest](https://github.com/playframework/Play20/wiki/JavaTest)

# 测试您的应用程序

测试源文件必须放在应用程序的`test`文件夹中。`test`您可以使用和`test-only`任务从 Play 控制台运行测试。

## 使用 JUnit

测试 Play 2 应用程序的默认方法是使用 [[JUnit| http://www.junit.org/]]。

``` 封装测试；

导入 org.junit.*；

导入play.mvc。*; 导入play.test。*; 导入 play.libs.F.*；

导入静态 play.test.Helpers。*; 导入静态 org.fest.assertions.Assertions。*;

公共类 SimpleTest {

```
@Test 
public void simpleCheck() {
    int a = 1 + 1;
    assertThat(a).isEqualTo(2);
} 
```

}```

# php - 如何用php隐藏动态内容？

> ID：10496215
> 
> 赞同：0
> 
> 时间：2012-05-08T09:44:28.777
> 
> 标签：php

我在徘徊如何根据您所在的页面隐藏页面的内容，我使用下面的代码做到了这一点，但是我想知道如何隐藏动态生成的页面，例如 index.php* *?id =......* *.

有没有我可以使用的 php 函数，它会说忽略 .php 之后的所有内容，所以不要考虑 ?id=.. 。

```
if($_SERVER['PHP_SELF'] != "/3uboats/index.php"){

CONTENT TO HIDE 

} 
```

如果我不清楚请要求澄清，提前谢谢大家

我想隐藏此页面的内容**stampa_fattura_partenza.php?id_prenotazione_partenze=1** 1 是由 php 生成的，它是动态的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:03:32.980

您可以检查是否`$_REQUEST[ "id_prenotazione_partenze" ]`已设置，例如：

```
if( isset( $_REQUEST[ "id_prenotazione_partenze" ] ) ){
//hide content
} 
```

然后，如果任何值与它一起传递，`$_REQUEST[ "id_prenotazione_partenze" ]`它将评估该`if`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:46:43.660

你最好不要使用`$_SERVER['PHP_SELF']`不安全的。您可以检查此代码是否设置了变量：

```
if(isset($_GET['id_prenotazione_partenze']) &&
         $_GET['id_prenotazione_partenze'] != 1) {
    ...
} 
```

这应该适用于您的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:47:37.093

您可以做的是使用 $_REQUEST["id_prenotazione_partenze"] 或 $_GET["id_prenotazione_partenze"] 获取您的 id 的值，并在您的 php IF 中使用它。

```
if($_REQUEST["id_prenotazione_partenze"]==1){
    // HIDE
} 
```

例如，当您的页面 id = 1 时，这会隐藏内容。

# jquery - jQuery Smoothdivscroll ajax 间歇性问题

> ID：10496216
> 
> 赞同：1
> 
> 时间：2012-05-08T09:44:29.150
> 
> 标签：jquery, html, smooth-scrolling

我遇到了 smoothdivscroll 插件的间歇性问题。我注意到，有时当我加载页面时，只会显示第一张图片并且它只是静止的。有时（几次刷新后）所有图像都会加载并开始滚动。我检查了来自 ajaxContent.php 的响应，片段响应似乎是正确的。

我目前正在使用以下示例代码：

```
$("#div").smoothDivScroll({
    autoScrollingMode: "always", 
    autoScrollingDirection: "endlessloopleft", 
    autoScrollingStep: 1, 
    autoScrollingInterval: 15, 
    ajaxContentURL: "ajaxContent.php"
}); 
```

ajaxContent.php 的作用是它返回带有图像源的 div 的页面片段，类似于[http://www.smoothdivscroll.com/lab.html](http://www.smoothdivscroll.com/lab.html)上的示例，其中打开了“用演示 html 内容替换内容”。图像 src 实际上是外部站点上图像的完整路径，例如

```
<img src="http://example.com/image.jpg">. 
```

返回的片段示例：

```
<div class="contentBox">
<img src="http://example.com/image.jpg">
</div>
<div class="contentBox">
<img src="http://example2.com/image2.jpg">
</div> 
```

然后我还尝试了似乎运行良好的演示示例，是否会减慢从外部站点加载图像的速度导致插件无法正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:17:28.933

是的，这可能是由于图像加载缓慢和/或具有“contentBox”类的 div 的 CSS 问题导致插件难以计算可滚动区域中所有元素的总宽度。

当 Smooth Div Scroll 启动时，它会检查是否指定了 ajaxContentURL。如果是这样，它会从该 URL 加载 HTML 内容，并在重新计算可滚动区域的宽度之后立即加载。当它重新计算可滚动区域的宽度时，它会查看直接子元素的宽度，在您的情况下，div 的类为“contentBox”。如果这些 div 没有在 CSS 中指定固定宽度**并且**部分/所有图像尚未完全加载，则 Smooth Div Scroll 将错误地计算所有元素的总宽度。

如果所有图像的宽度相同，您可以尝试为“contentBox”-div 设置固定宽度。您可以尝试的另一件事是暂时剥离包装器 div 并仅加载带有图像标签的 HTML。

# visual-studio-2010 - 使用不同的软件来区分 TFS 文件

> ID：10496217
> 
> 赞同：1
> 
> 时间：2012-05-08T09:44:29.920
> 
> 标签：visual-studio-2010, tfs

> **可能重复：**
> [Team Foundation Server (TFS) 文件差异查看器 - 使用其他工具自定义](https://stackoverflow.com/questions/188166/team-foundation-server-tfs-file-difference-viewer-customize-with-other-tool)

我正在使用带有 TFS 的 Visual Studio 2010 Ultimate。我不喜欢 TFS 的默认差异程序。

是否可以将默认差异程序更改为其他程序，例如 WinMerge？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T10:05:41.437

您几乎可以将任何 3rd 方合并工具与 TFS 一起使用。[这是一个博客](http://blogs.msdn.com/b/jmanning/archive/2006/02/20/diff-merge-configuration-in-team-foundation-common-command-and-argument-values.aspx)，其中包含有关调用大多数主要差异/合并工具的全面说明。

# google-apps-script - Google Docs App 脚本：表单内容 string.replace() 方法不起作用

> ID：10496225
> 
> 赞同：0
> 
> 时间：2012-05-08T09:44:50.637
> 
> 标签：google-apps-script

我尝试创建一个脚本，该脚本从谷歌文档中的电子表格中读取值（名称、日期等），并自定义特定表单的描述（文本内容）以发送给具有这些值的用户。但是 string.replace() 方法并没有像我期望的那样工作。它只是用任何东西代替钥匙。我错过了什么吗？我花了几个小时谷歌搜索没有答案。任何帮助将不胜感激。

```
var docId = ScriptProperties.getProperty("QuestionnaireDocId"); 

var sheet = SpreadsheetApp.getActiveSheet();
var startRow = 2;  // First row of data to process
var numRows = 1000000;   // Number of rows to process
// Fetch the range of cells A2:B3
var dataRange = sheet.getRange(startRow, 1, numRows, 5)
// Fetch values for each row in the Range.
var data = dataRange.getValues();

for (var i = 0; i < data.length; ++i) {
    var row = data[i];
    var name = row[0]; // this var isn't empty. - tested it to check

    var formSpreadsheet  = SpreadsheetApp.openById(docId);
    var sFormUrl = formSpreadsheet.getFormUrl();
    if(sFormUrl) {
        var response = UrlFetchApp.fetch(sFormUrl);
        var sFormContent = response.getContentText();

        //Replace <keyName> in the form description with the value of var 'name'
        sFormContent = sFormContent.replace("<keyName>", name); 

        //get only body content
        sFormContent = sFormContent.replace(/[\s\S]+<body[^>]*>([\s\S]+)<\/body>[\s\S]+/i, '$1');

        //remove script
        sFormContent = sFormContent.replace(/<script[^>]*>[\s\S]*<\/script>/i, '');
        //add inline style for form elements, since gmail does not allow style tag and      link tag to style it
        sFormContent = sFormContent.replace(/class\=\"errorbox-good\"/gi, 'class="errorbox-good" style="margin-bottom:1.5em;zoom:1"');
        sFormContent = sFormContent.replace(/class\=\"ss-q-title\"/gi, 'class="ss-q-title" style="display:block;font-weight:bold;"');
        sFormContent = sFormContent.replace(/class\=\"ss-q-help\"/gi, 'class="ss-q-help" style="display:block;color:#666;margin:.1em 0 .25em 0"');
        sFormContent = sFormContent.replace(/class\=\"ss-choices\"/gi, 'class="ss-choices" style="list-style:none;margin:.5em 0 0 0;padding:0;"');
    }
    var mailBody2;

    if(sFormUrl) {
        mailBody2 = '<br /><br />If you have trouble viewing or submitting this form, you can fill it out online:<br />';
        mailBody2 += '<a href="' + sFormUrl + '" title="">' + sFormUrl + '</a>';
        mailBody2 += '</body></html>';
        mailBody2 += '<br /><br />';
        mailBody2 += sFormContent;
        mailBody2 += '<br />';
    }       

    // Embed form and send the email - the emails work fine

    var subject = "Test email";

    MailApp.sendEmail(email_address, subject, mailBody2, {htmlBody: mailBody2}); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:53:46.473

看起来有几件事正在发生，导致这不能按书面规定工作。首先，在您从 UrlFetchApp 调用返回的表单内容中，有两个地方显示了表单描述。一个看起来像这样。我只是将 foo 放在表单的描述字段中：

```
<meta itemprop="description" content="foo &lt;keyName&gt;"> 
```

另一个看起来像这样：

```
<div class="ss-form-desc ss-no-ignore-whitespace">foo </div> 
```

第二个实例是实际显示在您的电子邮件中的实例，如您所见，它似乎已经被删除了。我的猜测是它会删除任何看起来可能是 HTML 的东西。

所以这就是我尝试过的，这对我有用。在您的表单描述中，放置 [keyName] 而不是 .

然后，您还需要全局搜索和替换，而不仅仅是 [keyName] 的第一个实例，以确保您在两个地方都得到它。所以改变这一行：

```
sFormContent = sFormContent.replace("<keyName>", name); 
```

对此：

```
sFormContent = sFormContent.replace(/\[keyName\]/g, name); 
```

一旦我进行了这些更改，我就可以让它工作，我收到的电子邮件在描述中包含我的电子表格中的值，在单词“foo”之后。

# sql - 在对相同数据进行插入/删除查询后更新客户端数据集：连接正忙于其他命令

> ID：10496227
> 
> 赞同：1
> 
> 时间：2012-05-08T09:44:52.083
> 
> 标签：sql, delphi, dataset, sqlconnection

我正在编写一个简单的数据库编辑器作为我的第一个 Delphi 程序。

我对 Delphi 没有任何问题，只有通过数据库连接。

我将数据加载到数据网格中`-> sqlConnection -> sqlDataSet -> sqlDataprovider -> Clientdataset -> Datasource`

我使用单独的连接 +`SqlQuery`为每个记录插入/删除记录。

我用 DBEdit 更改记录

当我插入/删除记录后，我对记录进行了更改，并想要更新更改时出现问题，我收到以下错误

> *连接正忙于其他命令的结果。*

代码：

```
procedure TDatabaseApp.bNieuwClick(Sender: TObject);
begin

//Waardes invullen in de query statement!

SQLInsert.ParamByName('naam').asString := txtNaam2.Text;
SQLInsert.ParamByName('brouwernr').asString := txtBrouwerNR.Text;
SQLInsert.ParamByName('soortnr').asString := TXTSoortNR.Text;
SQLInsert.ParamByName('alcohol').asString := TxtAlcohol.Text;

//query
SQLInsert.ExecSQL();
SQLInsert.Close();

//Reload datagrid after record has been inserted!
Refresh();

end; 
```

刷新代码

```
procedure   TDatabaseApp.Refresh();
begin

//After a insert/delete query i call this statement, and changes made with the DBEdit are cancelled = temp solution.
  ClientDataSet1.CancelUpdates();  

  SQLDataSet1.Open();
  ClientDataSet1.Open();
  SQLDataSet1.Refresh();
  ClientDataSet1.Refresh();
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:16:33.073

由于您的 ClientDataSet 链接到您的 DataSetProvider 并且您的 DataSetProvider 链接到您的 SQLDataSet，因此您永远不应该直接操作 SQLDataSet，而是使用 ClientDataSet 执行所有操作。

因此，您将拥有：

```
procedure TDatabaseApp.Refresh();
begin
    //ClientDataSet1.CancelUpdates();  //will raise an error depends on the CDS state
    ClientDataSet1.Close;  
    ClientDataSet1.Open();

    //SQLDataSet1.Open(); //not necessary, as you already open the CDS
    //SQLDataSet1.Refresh(); //not necessary, as you already open the CDS
    //ClientDataSet1.Refresh(); //not necessary, as you already open the CDS
end; 
```

但我建议您也使用 CDS 进行插入，放弃使用“SQLInsert”对象。这样，事情就会变得简单得多。

# java - 查找我的检票口项目的相对上传路径

> ID：10496231
> 
> 赞同：0
> 
> 时间：2012-05-08T09:45:15.770
> 
> 标签：java, web, wicket

我需要将图片上传到我的网络服务器上的 /picture 文件夹。问题是我不知道如何找到将文件复制到的路径。我研究过 icket 的例子，但他们使用；

```
uploadFolder = new Folder(System.getProperty("java.io.tmpdir"), 
               "wicket-uploads"); 
```

找到将文件复制到的正确文件夹。我需要的是我的 html 文件的路径，以便我可以将 /picture 文件夹添加到该路径。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:57:28.197

您可以使用[ServletContext 的 getRealPath(...) 方法](http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)

```
String realPath = context.getRealPath("pictures"); 
```

要获取 ServletContext，请使用可从所有页面访问的 WebApplication 类：

```
ServletContext context = ((WebApplication) getApplication()).getServletContext(); 
```

# rpyc - 如何在远程控制台中重新启动 RPyC 的 classic_server？

> ID：10496234
> 
> 赞同：1
> 
> 时间：2012-05-08T09:45:18.893
> 
> 标签：rpyc

### 

我想通过远程控制台在 Linux 中重启 RPyC 的 classic_server
但我不知道如何重启它。

所以我创建了一个 bash 来杀死所有 python 进程，
然后重新启动 classic_server
但是当我通过 subprocess 在远程控制台中调用它时，它说 addr 已经在使用中。

debug显示，在我杀死python之前，python正在监听18812，也就是classic_server监听的端口，
但是bash脚本杀死它之后，bash脚本代替了classic_server监听了18812端口！很奇怪，是吗？

所以求一个重启经典服务器的方法，或者如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:45:20.493

我正在运行服务模块，而不是经典模块，但是在创建服务器实例时，您可以设置端口号 - 这应该避免端口过载。

```
server = ThreadedServer(AgentService, port = 12345) 
```

至于 bash 脚本，可能值得编写一个服务并将其添加到 init.d。例如： [http ://www.unix.com/unix-dummies-questions-answers/34641-making-script-start-service.html](http://www.unix.com/unix-dummies-questions-answers/34641-making-script-start-service.html)

这不会解决问题，但肯定会使服务器更易于使用。

# java - 如何在 Mac OS X 上获取文件类型？

> ID：10496237
> 
> 赞同：10
> 
> 时间：2012-05-08T09:45:23.320
> 
> 标签：java, macos, file, filesystems, file-type

我正在使用此代码来获取文件的类型 -

```
FileSystemView filesystem = FileSystemView.getFileSystemView();
String sFileType = filesystem.getSystemTypeDescription(file)) 
```

在 Windows 下，此代码工作文件，正确显示文件类型。但是在 Mac OS X 下，这段代码没有显示任何内容。方法`getSystemTypeDescription`说：

> 覆盖具有本机 ShellFolder 实现的平台。

如何做到这一点以及我们如何在 Mac OS X 上获取文件类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:30:52.567

看看[Quaqua](http://www.randelshofer.ch/quaqua/)库，它有一个[OSXLionFileSystemView](http://www.randelshofer.ch/quaqua/javadoc/ch/randelshofer/quaqua/lion/filechooser/OSXLionFileSystemView.html)类，它是默认 FileSystemView 的覆盖版本，应该可以在 OS X Lion 上正常工作......

# c++ - c ++如何将我的命令行参数（MAC地址）转换为无符号字符

> ID：10496240
> 
> 赞同：2
> 
> 时间：2012-05-08T09:45:39.137
> 
> 标签：c++, unsigned-char, string-conversion

我有一个程序，我想采用 MAC 地址的命令行参数，例如`"./myapp 00:11:22:33:44:55"`

稍后 MAC 地址用于`struct sockaddr_ll.sll_addr`无符号字符数组中，每个元素是 MAC 地址的一个八位字节。这个函数（在博客上找到）接受命令行参数并使用冒号“:”作为分隔符分隔它；

```
void StringExplode(string str, string separator, vector<string>* results){
    int found;
    found = str.find_first_of(separator);
    while(found != string::npos){
        if(found > 0){
            results->push_back(str.substr(0,found));
        }
        str = str.substr(found+1);
        found = str.find_first_of(separator);
    }
    if(str.length() > 0){
        results->push_back(str);
    }
} 
```

我的命令行参数代码如下所示；

```
unsigned char MAC[6];
vector<string> R;
string thisstring = argv[2];
StringExplode(thisstring, ":", &R);
MAC[0] = (unsigned char)atoi(R[0].c_str());
MAC[1] = (unsigned char)atoi(R[1].c_str());
MAC[2] = (unsigned char)atoi(R[2].c_str());
MAC[3] = (unsigned char)atoi(R[3].c_str());
MAC[4] = (unsigned char)atoi(R[4].c_str());
MAC[5] = (unsigned char)atoi(R[5].c_str());
printf("Ethernet %02x:%02x:%02x:%02x:%02x:%02x\n",MAC[0],MAC[1],MAC[2],MAC[3],MAC[4], MAC[5]); 
```

但是，这会打印出“以太网 00:0b:16:21:2c:37”。这是因为 atoi() 正在环绕吗？我似乎无法在这里指出问题，但是，我觉得这可能是一种不好的做事方式。我是 c++ 的新手，但即使对我来说，这也感觉很啰嗦，所以我希望这里的键盘英雄能够解释它有多糟糕，并希望我可以如何让它更有效率。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:51:36.013

问题是您将八位字节解析为十进制数字而不是十六进制 - 11 = 0xb、22 = 0x16 等。

我不确定执行此操作的最 C++ 方式是什么，但您可以使用[strtoul](http://www.cplusplus.com/reference/clibrary/cstdlib/strtoul/)和基本参数：

```
for(int i = 0; (i < 6) && (i < R.size()); ++i) {
    MAC[i] = (unsigned char)strtoul(R[i].c_str(), NULL, 16);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:11:46.583

问题是您正在读取表示十六进制数字的字符串，就好像它们是十进制一样。C++11 字符串到整数转换函数有一个参数，您可以在其中指定输入的基数，因此要将十六进制字符串转换为无符号整数，您可以这样做：

```
unsigned int i2 = std::stoi("ff", nullptr, 16); // input is base 16 
```

见[stoul, stoull, stol, stoi](http://en.cppreference.com/w/cpp/string/basic_string/stoul)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:50:30.167

从我的角度来看，一切都很好。唯一的一点是您正在以十六进制视图打印十进制值。将输入值转换为十六进制。

# php - 显示勒死的外来字符

> ID：10496244
> 
> 赞同：0
> 
> 时间：2012-05-08T09:46:06.407
> 
> 标签：php, mysql

我的数据库中有这个字符：

```
É 
```

但结果是

```
G 
```

我尝试将 html 字符代码输入到数据库中，但这会导致网站上的输出为空。

我的数据库（MYSQL）设置为 UTF8。所有其他外来字符都很好。

我使用 PHP 和 apache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:47:15.503

在你的 sql 查询中也提到 UTF8。它将解决问题。

更新：

```
<?php 
$link2 = mysql_connect('localhost','user1','pass1',TRUE); 
mysql_selectdb('db2',$link2); 
mysql_set_charset('utf8',$link2); 

?> 
```

# c# - 创建类时如何填充 IList？

> ID：10496245
> 
> 赞同：0
> 
> 时间：2012-05-08T09:46:08.327
> 
> 标签：c#, ilist

我有以下课程：

```
public class CityViewModel
{
     public City City { get; set; }
     public IList<CityDetail> CityDetails { get; set; }

     public class CityDetail()
     {
         public CityDetail() {
         Text = new HtmlText();
         ImageFile = String.Empty;
         Correct = false;
         Explanation = new HtmlText();
     }
     public bool   Correct { get; set; }
     public HtmlText Text { get; set; }
     public string ImageFile { get; set; }
     public HtmlText Explanation { get; set; }
} 
```

我怎样才能做到这一点，以便当我做类似的事情时：`var model = new CityViewModel();`

它创建了一个`CityViewModel`有十个`CityDetail`记录的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T09:48:08.577

您需要向 CityViewModel 对象添加一个构造函数：

```
//Add a constructor
public CityViewModel()
{
    //Populate the variable
    CityDetails = Enumerable.Repeat(new CityDetail(), 10).ToList();
} 
```

# tsql - 如何在发布和订阅中删除复制表

> ID：10496246
> 
> 赞同：5
> 
> 时间：2012-05-08T09:46:10.273
> 
> 标签：tsql, replication, sql-drop

如何删除发布和订阅中的复制表？（仅限脚本）

我不想仅将其从复制中删除，因为这样表的未复制副本将保留在订阅中。我希望删除该表的所有实例。

所以我想要一个脚本，从发布者中删除表，从发布中删除表，并将表删除到发布者和所有订阅者中。理想情况下，它将采用表名的参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T16:44:38.020

您需要调用[sp_droparticle](http://msdn.microsoft.com/en-us/library/ms173832.aspx)或[sp_dropmergearticle](http://msdn.microsoft.com/en-us/library/ms179926.aspx)从发布中删除文章，然后生成新快照。

然后调用 DROP table 删除发布者和订阅者的表。

[这在Add Articles to and Drop Articles from Existing Publication](http://msdn.microsoft.com/en-us/library/ms152493.aspx)和[Delete an Article](http://msdn.microsoft.com/en-us/library/ms146908.aspx)中都有介绍。

要将 DROP 语句从发布者发布到订阅者，请使用[sp_addscriptexec](http://msdn.microsoft.com/en-us/library/ms174360.aspx)。

# jquery - Textarea - 防止用户插入多个换行符

> ID：10496248
> 
> 赞同：0
> 
> 时间：2012-05-08T09:46:29.540
> 
> 标签：jquery, line-breaks

我有以下函数来获取 ID 为 #posttext 的文本区域中的值并调用函数来发布内容。

**我不希望用户能够连续**输入多个换行符。我怎样才能防止这种情况？

这是代码：

```
//Post something
$('#postDiv').on('keydown', '#posttext', function(e) {
if (e.which==13 && !e.shiftKey && $('#posttext').val()!=' Post something...') {

//This is what I tried to prevent a user from inserting more than one br in a row
var last = false;

var code = (e.keyCode ? e.keyCode : e.which);
if(code == 13) {
    if (last) { e.preventDefault(); }
    last=true;
}else{
    last=false;
}

//If not currently loading and enough text typed in, submit
if($('#imageFeedback').html()!=' | Loading...' && $('#posttext').val().length>15){

    //Say that it is loading
    $('#imageFeedback').css('color','black').css('font-weight','normal').html(' | Loading...');

    //Call function to post
    post($(this));
    return false;
}
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:50:26.607

如果您稍后简单地删除重复的换行符会更好，例如使用这个正则表达式：`s/\n{2,}/\n/g`

但是，要做你想做的，只需删除重复的换行符 onkeyup

```
$('#postDiv').on('keyup', '#posttext', function(e) {
    var val = $(this).val(),
        newval = val.replace(/\n{2,}/g, '\n');
    if(val != newval) {
        $(this).val(newval);
    }
}); 
```

演示：http: [//jsfiddle.net/ThiefMaster/WJmhF/](http://jsfiddle.net/ThiefMaster/WJmhF/)

# c++ - c++ 对象实例化使用 sizeof、malloc 和 cast

> ID：10496249
> 
> 赞同：0
> 
> 时间：2012-05-08T09:46:31.040
> 
> 标签：c++, instantiation

在 Java 中，我可以使用“类”方法“newInstance”来实例化一个对象，这对我的特定系统来说确实很有帮助。我现在正试图在 C++ 中实现类似的东西。

对我来说，如何实现这一点并不明显，但经过一些思考......（你明白了吗......嗯？）我认为通过创建一个具有保存属性的 ClassDescription 类可能是可能的 ' sizeof' 类实例和一个方法 newInstance，该方法分配此内存量并将其作为 void * 返回。然后调用代码将需要适当地转换它。

C++ 语言是否适当地定义了这是否有效？

顺便说一句..我认识到我可以为作为备份计划的类创建一个包含工厂的注册表。对于这个问题的答案，我会重视关注我所讨论的内容是否有效的具体问题。

此致

***附加上下文*** 此要求的原因是允许通用库实例化库用户知道但不知道库本身的类。该库将有一些元数据用于实现此目的，因此可以告知类的大小。从用户的角度来看，不必将工厂对象添加到元数据中会更“整洁”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T09:49:28.837

这在某些情况下是有效的。要求是类型必须是[“普通旧数据类型”（POD）](https://stackoverflow.com/questions/146452/what-are-pod-types-in-c)（[另请参见此答案](https://stackoverflow.com/a/5442736/168175)）。如果它有更复杂的东西（例如虚拟成员函数、具有虚拟成员函数的成员、基类也必须是 POD 等），那么它将无法工作并且是未定义的行为。

您可以通过执行以下操作[检查类型是否满足这些要求](https://stackoverflow.com/a/7169153/168175)：

```
#include <type_traits> 

static_assert(std::is_pod<A>::value, "A must be a POD type."); 
```

一般来说，虽然它可能表明你做错了。C++ 不是 Java，可能有更好的方法来解决潜在的实际问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T09:49:35.343

malloc 和 cast 方法中缺少的是对象的构造。使用`new`两者分配内存并构造它。这包括构建 v-tables、调用构造函数等等。类型转换 malloc 分配的内存无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:52:41.457

请注意，`malloc`选择正确大小的内存块只会为您提供原始内存。您需要在此内存块中构造所需类的对象。这可以使用[*placement new*](http://en.wikipedia.org/wiki/Placement_syntax)来实现。

# jquery - Mac OSx 上的 jquery ajax JSON 请求

> ID：10496250
> 
> 赞同：0
> 
> 时间：2012-05-08T09:46:34.020
> 
> 标签：jquery, ajax, macos

我们有一些客户抱怨说，当他们尝试登录我们的网站时，会在浏览器上显示一个 SJON 字符串。

像这样的东西

```
{"cityname":"pune","userid":"173","email":"123@gmail.com","mobile":"xxxxxxxxx","areaid":"4","address":"xxxxx","user_status":"1","status":"1","login_status":1} 
```

这是我们的 AJAX 登录请求返回的内容

```
$("li").delegate("input#user_login","click",function() {
var formData = $("#login_form").serialize();
$.ajax({
    type: "POST",
    url: global_url+"users/auth/login",
    cache: false,
    data: formData,
    dataType: "json",
    success: function(request){
        if(request.login_status == 1) {
            if(request.status == 0) {
                window.location.reload();
            }else if(request.status == 2) {
                $("#tastykhana_user_password div.wrapper input[name='userid']").val(request.userid);
                $.colorbox( {  inline:true, href:"#tastykhana_user_password", onComplete: function() { $(".upload").colorbox.resize(); } } );
            }else {
                window.location.reload();
            }
        }else {
            var message = "";
            for(i=0;i<request.message.length;i++) {
                if(request.message[i].error != '') {
                    log_error('auth','Login form error '+request.message[i].field);
                    message = message + request.message[i].error +' , ';
                }
            }
            alert(message);
        }
    },
    error: function(request, errorType, errorThrown){
        log_error('auth','login 500 error');
    }
});
 }); 
```

我无法弄清楚这个问题，理想情况下，ajax 请求的成功处理程序应该在登录后刷新页面，而是从服务器请求返回的 json 字符串显示在浏览器中。这些问题发生在 OSx 系统上。

# wcf - WCF 实体框架无法访问实体子级

> ID：10496255
> 
> 赞同：1
> 
> 时间：2012-05-08T09:46:50.587
> 
> 标签：wcf, entity-framework, children

我正在用 EF 编写 WCF 服务。尝试返回客户实体的孩子时出现我的问题。下面的示例代码：

```
[DataContract]
public class Customer
{
        [Key]
        [DataMember]
        public int CustomerID { get; set; }

        [DataMember]
        public string FirstName { get; set; }

// Customer has a collection of BankAccounts
        [DataMember]
        public virtual ICollection<BankAccount> BankAccounts { get; set; }
}

[DataContract(IsReference = true)]
    public class BankAccount
    {
        [Key]
        [DataMember]
        public int BankAccountID { get; set; }

        [DataMember]
        public int Number { get; set; }

        // virtual property to access Customer
        //[ForeignKey("CustomerID")]
        [Required(ErrorMessage = "Please select Customer!")]
        [DataMember]
        public int CustomerID { get; set; }

        [DataMember]
        public virtual Customer Customer { get; set; }
    } 
```

我得到的错误：

```
An error occurred while receiving the HTTP response to http://localhost:8732/Design_Time_Addresses/MyServiceLibrary/MyService/. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details. 
```

我调用的服务功能：

```
public Customer GetCustomer(int customerId)
        {
            var customer = from c in dc.Customers
                           where c.CustomerID == customerId
                           select c;
            if (customer != null)
                return customer.FirstOrDefault();
            else
                throw new Exception("Invalid ID!");

        } 
```

我试图调试它，这个函数返回客户及其子银行帐户，我还禁用了延迟加载。我发现如果我注释掉这一行

```
public virtual ICollection<BankAccount> BankAccounts { get; set; } 
```

形成客户类，一切正常，除了我无法获得 BankAccount，它只返回客户。我是 WCF 的新手，所以请帮帮我。谢谢。

所以我找到了解决问题的方法。只需将来自 BankAccount 的客户参考标记为 IgnoreDataMember

```
[IgnoreDataMember]
public virtual Customer Customer { get; set; } 
```

并在 MyDbContext 构造函数中禁用 ProxyCreation。

```
this.Configuration.ProxyCreationEnabled = false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:17:39.177

您的函数需要启用延迟加载才能返回客户及其帐户，因为该函数不使用预加载。如果要禁用延迟加载，必须使用：

```
dc.Customers.Include("BankAccounts") 
```

无论如何，您的主要问题是循环引用（客户对帐户有引用，而帐户对客户有反向引用），这会破坏默认的 WCF 序列化。您必须[通知序列化程序](https://stackoverflow.com/questions/5762135/ef4-cause-circular-reference-in-web-service)它们的存在。

# php - 未定义的变量：错误 - cakephp

> ID：10496259
> 
> 赞同：-1
> 
> 时间：2012-05-08T09:47:07.733
> 
> 标签：php, jquery, ajax, cakephp

我有从 youtube 视频复制的表单验证，但它是使用 cakephp 1.3 编码的。所以我很难将它迁移到 2.1

CommentsController.php - 函数 validate_form()

```
function validate_form()
    {
        if($this->RequestHandler->isAjax())
        {
            $this->request->data['Comment'][$this->request['form']['field']] = $this->request['form']['value'];
            $this->Comment->set($this->request->data);
            if($this->Comment->validates())
            {
                $this->autorender = FALSE;
            }
            else
            {
                $error = $this->validateErrors($this->Comment);
                $this->set('error', $error[$this->request->params['data']['field']]);
            }
        }
    } 
```

validate_form.ctp

```
<?php echo $error; ?> 
```

错误：

```
Undefined variable: error [APP\View\Comments\validate_form.ctp, line 1] 
```

为什么它是未定义的？请帮助我，如果我不这样做，我的老板会解雇我。我只是一个试用期的员工，一个 5 天大的初级网络开发人员

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T11:26:15.550

使用您当前的代码，`$error`仅在提交的表单未验证时设置，但在表单正确验证时未设置。在吐出之前，您需要在视图中添加一个检查，例如：

```
if(isset($error)) {
    echo $error;
} else {
    echo "Form is valid"; // Optionally echo something else if everything went OK.
} 
```

但这不可能是你的全部观点？如果存在任何验证错误，该位将仅显示验证错误，而不会显示其他任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T11:26:41.943

我的猜测是评论正在验证，所以这就是为什么`$error`永远不会被设置，你只需要在你的视图文件中检查这个：

```
if(isset($error)) {
    echo $error;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:48:19.417

您还需要更改这行代码：

```
$this->RequestHandler->isAjax() 
```

到：

```
$this->request->is('ajax'); 
```

由于 AjaxHelper 从 cakephp 2.x 开始贬值

# android - android中增量运算符的实现

> ID：10496262
> 
> 赞同：0
> 
> 时间：2012-05-08T09:47:15.940
> 
> 标签：android, post-increment

我对前后增量进行了一些测试，以确定 android 上的两个运算符之间是否存在性能或功耗差异。

我没有发现任何差异。

基本论文在这里得到了很好的解释：[http](http://www.roman10.net/pre-increment-and-post-increment/) ://www.roman10.net/pre-increment-and-post-increment/ （pre更快，因为没有生成temp-var）。

我为 c++ 学习了这一点，这个网站显示了 c 实现，但我无法弄清楚如何在 android 中完成实现（可能不同）。

用于测试的代码是

```
int lPlotRangeCtr = 0;
    while (lPlotRangeCtr != mPlotRange){
        int lTMP = ++lPlotRangeCtr;
    } 
```

正如你可以想象的那样，这是用于预增量的块，用于后期类似的块。我使用 tamp var "lTMP" 来确保分配了运算符的返回值，并且编译器不会转换增量运算符。

所以任何人都可以帮助我，如何找到实现。编译器仍然可以转换运算符，当它被批准时，“lTMP”永远不会被读取？编译时是否会自动删除此类语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:54:48.023

编译器可以非常聪明，如果它直接优化了变量，我不会感到惊讶。我建议您将其设为全局变量并将其标记为 volatile。这会强制编译器对其进行写入。

说了这么多，如果您担心 x++ 与 ++x 的性能，那么您可能对性能进行了过多的微观管理。大多数性能提升都是在比这更高的水平上实现的，除了最极端的情况外，这种变化对您的程序产生的影响在所有情况下都可以忽略不计。

# php - Htaccess 权限被拒绝/显示目录索引

> ID：10496267
> 
> 赞同：1
> 
> 时间：2012-05-08T09:47:47.217
> 
> 标签：php, apache, .htaccess, redirect, routing

我问了一个[问题]：[htaccess reverse directory](https://stackoverflow.com/questions/10487909/htaccess-reverse-directory) here关于反向路由。但是，我不断获取目录视图而不是有问题的文件。

例如：我去 /img/header.jpg 我得到文件夹 /img/ 的内容，而文件 header.jpg 存在。我在选项中添加了 -Indexes ，但这只会导致 403 禁止访问消息。

我应该如何编辑我的 htaccess 以显示 imgs/js/css 等但仍保持递归结构？

**当前 htacces:**

```
 Options +FollowSymLinks -MultiViews -Indexes
 # Turn mod_rewrite on
 RewriteEngine On
 RewriteBase /

 RewriteCond %{DOCUMENT_ROOT}/$1/$2.php !-f
 RewriteRule ^(.*?)/([^/]+)/?$ $1/ [L]

 RewriteCond %{DOCUMENT_ROOT}/$1.php -f
 RewriteRule ^(.*?)/?$ $1.php [L] 
```

提前致谢

**编辑**

我尝试在 RewriteBase / 之后直接添加以下行：

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

这适用于大多数文件。只有当它是 images/css/js/ico/etc 时才应该有效。我认为目前如果它直接找到一个 php 文件就可以了。

我似乎无法弄清楚如何获得剩余的参数。

```
 /index/foo/bar/for/ 
```

应该找到的文件是 foo ，如何在 $_GET 中获取剩余的 2 个参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:12:35.793

将您的代码更改为：

选项 +FollowSymLinks -MultiViews -Indexes

```
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f [OR]
# If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
# don't do anything
RewriteRule ^ - [L]

# if current ${REQUEST_URI}.php is not a file then
# forward to the parent directory of crrent REQUEST_URI
RewriteCond %{DOCUMENT_ROOT}/$1/$2.php !-f
RewriteRule ^(.*?)/([^/]+)/?$ $1/ [L]

# if current ${REQUEST_URI}.php is a valid file then 
# load it be removing optional trailing slash
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ $1.php [L] 
```

**编辑：**根据 OP 的评论，此解决方案用`param`路径的其余部分填充查询参数：

```
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f [OR]
# If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
# don't do anything
RewriteRule ^ - [L]

# if current ${REQUEST_URI}.php is not a file then
# forward to the parent directory of crrent REQUEST_URI
RewriteCond %{DOCUMENT_ROOT}/$1/$2.php !-f
RewriteCond %{QUERY_STRING} ^(?:param=)?(.*)$
RewriteRule ^(.*?)/([^/]+)/?$ $1/?param=$2/%1 [L]

# if current ${REQUEST_URI}.php is a valid file then 
# load it be removing optional trailing slash
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ $1.php [L] 
```

# php - 有什么方法可以从文本框中获取值并使用 jquery 将其放入变量中然后提醒它？

> ID：10496268
> 
> 赞同：0
> 
> 时间：2012-05-08T09:47:56.673
> 
> 标签：php, jquery, cakephp

当用户在文本框中键入他的用户名时，我正在尝试创建一个欢迎页面。当他单击提交按钮时，我希望在进入下一页之前使用 jquery 提醒他的名字。这是我在可能的代码中得到的：

```
<html>
    <head>
    <?php   echo $this->Html->script("jquery-1.4.3.min"); ?>

    </head>
    <body>
    <?php
        echo $content_for_layout;
    ?>

    <script type="text/javascript">
        $(document).ready(function () {
         //       alert('JQuery is succesfully included');

        $(':submit').click(function(){
            <?php if(($this->request->controller=='members')&&($this->action=='register')):?>
                    var some = $("#myId").val();
                    alert(some);
            <?php  endif; ?>
            });

        });

    </script>
    </body>
</html> 
```

但它在警报框中不显示任何内容。

我也试过这个：

```
<html>
    <head>
        <?php   echo $this->Html->script("jquery-1.4.3.min"); ?>

    </head>
    <body>
    <?php
        echo $content_for_layout;
    ?>

    <script type="text/javascript">
        $(document).ready(function () {
         //       alert('JQuery is succesfully included');

        $(':submit').click(function(){
            <?php if(($this->request->controller=='members')&&($this->action=='register')):?>
                    //alert('well');
                    var some = $("#myId").val();
                    alert($some);
            <?php  endif; ?>
            });

        });

    </script>
    </body>
</html> 
```

但没有弹出警报框......我也试过这个：

```
<html>
    <head>
        <?php   echo $this->Html->script("jquery-1.4.3.min"); ?>

    </head>
    <body>
    <?php
        echo $content_for_layout;
    ?>

    <script type="text/javascript">
        $(document).ready(function () {
         //       alert('JQuery is succesfully included');

        $(':submit').click(function(){
            <?php if(($this->request->controller=='members')&&($this->action=='register')):?>
                    //alert('well');
                    var some = $("#myId").val();
                    alert($(some));
            <?php  endif; ?>
            });

        });

    </script>
    </body>
</html> 
```

但它给了我一个警告框，显示 [object Object] .. :(

什么是正确的代码？

这就是我的 ctp 文件中的内容

```
<?php
    echo $this->Form->create('Member',array('action'=>'register','id'=>'myId'));
    echo $this->Form->input('username', array('id'=>'myId'));
    echo $this->Form->end('Check');
?> 
```

这就是我在我的 html 源页面中得到的

```
好的
```

```
<head>

    <script type="text/javascript" src="/js/jquery-1.4.3.min.js"></script>      

</head>

<body>

<h2>REGISTER</h2> 
```

用户名

```
<script type="text/javascript">

    $(document).ready(function () {

     //       alert('JQuery is succesfully included');

    $(':submit').click(function(){

                            //alert('well');

                var some = $("#myId").val();

                //alert(some);

                    });

    });

</script>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T07:37:53.707

这是满足您要求的脚本..

```
<HTML>
    <head>

    <script type="text/javascript">
    function show_ans(myform)
    {
        var answer=myform.ans.value;    
            alert(answer);
    }

    </script>
    </head>
    <body>
    <form onSubmit="show_ans(this)">
    <input type="text" id="ans" name="ans">
    <input type="submit">
    </form>
    </body>
    </HTML> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T00:43:01.507

我已经让它工作了。好吧，id='myId' 是重复的……这是我的 ctp 文件。

```
<h2>REGISTER</h2>
<?php
    echo $this->Form->create('Member',array('action'=>'register','id'=>'myId'));
    echo $this->Form->input('username', array('id'=>'testMe'));
    echo $this->Form->end('Check');
?> 
```

这是我的带有 jquery 的 default.ctp：

```
<html>
    <head>
        <?php   echo $this->Html->script("jquery-1.4.3.min"); ?>

    </head>
    <body>
    <?php
        echo $content_for_layout;
    ?>
    <script type="text/javascript">
        $(document).ready(function () {
         //       alert('JQuery is succesfully included');

        $(':submit').click(function(){
            <?php if(($this->request->controller=='members')&&($this->action=='register')):?>
                    //alert('well');
                    var some = $('#testMe').val();
                    //var some ='charm';
                    alert(some);
            <?php  endif; ?>
            });
        });
    </script>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T09:52:13.610

服务器端代码未生成 id=myId 的输入元素。您需要重新评估 php 代码以输出正确的输入元素，如下所示：

`<input type="text" id="myId" value="whatever" />`

然后此代码将返回该输入的值：

`$('#myId').val()`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-08T09:53:07.750

```
var some = $("#myId").val();
alert(some);

Or
alert($("#myId").val()); 
```

# maven - 如何将内部版本号附加到css 标签

> ID：10496274
> 
> 赞同：0
> 
> 时间：2012-05-08T09:48:32.553
> 
> 标签：maven

我正在使用 GWT、maven 构建工具和 Hudson 工具进行持续集成。我需要在其中一个 HTML/JSP 文件中显示内部版本号。任何人都可以建议我如何做到这一点。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:12:40.730

塞德里克有重点，好文章。它还取决于环境和配置，在我的项目中，我通常执行以下操作来简单地获取 Manifest 内容：

```
InputStream is = servletContext.getResourceAsStream("META-INF/MANIFEST.MF"); 
```

进而

```
Properties properties = new Properties(); 
properties.load(is);
String buildNumber = properties.getProperty("BuildNumber"); 
```

或者

```
Manifest manifest = new Manifest(is);
manifest.get... 
```

# android - Android 模拟器中的外部 SDCard

> ID：10496279
> 
> 赞同：1
> 
> 时间：2012-05-08T09:48:47.810
> 
> 标签：android, android-emulator

如何在 Android Emulator 中模拟外部 SDCard（/sd-ext 安装在 /mnt/sdcard2 上）？

我能够定义和使用内部 SDCard（通过 emulator.exe -sdcard sdcard.img，安装在 /mnt/sdcard 上），但我需要模拟一个安装 2 个 SD 的设备（Olivetti Olipad）。我认为有一些这样的设备，所以我想这可能是一个常见问题。

阿尔贝托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:53:12.167

它在三星 s1 上的工作方式只是内部 sd 卡上的一个文件夹，它将您发送到外部 sd 卡。所以你可以通过创建这个文件夹来模拟它。

# javascript - 使用 Spine 在 Stylus 中创建动态样式表

> ID：10496284
> 
> 赞同：0
> 
> 时间：2012-05-08T09:49:24.517
> 
> 标签：javascript, spine.js, stylus

我希望能够在我的 Spine 应用程序中拥有不同的主题。这些主题由一组颜色和字体组成。这些颜色和字体可以在 CMS 中进行编辑。

我想知道是否可以使用从数据库加载的数据在 Spine 内的 Stylus 中定义变量。或者也许创建一个动态样式表。

我尝试在 Spine 中要求使用手写笔：

```
require('stylus') 
```

这导致了以下错误：

```
uncaught exception: module stylus not found
http://localhost:9294/application.js
Line 4191 
```

是否可以在 Spine 中定义 Stylus 变量？我如何需要手写笔？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:21:04.647

我推荐[spin.app](http://spinejs.com/docs/app)。
它内置了手写笔支持，并允许您将节点包提供给浏览器。

# r - R 文档中哪些标签是强制性的？

> ID：10496285
> 
> 赞同：3
> 
> 时间：2012-05-08T09:49:24.860
> 
> 标签：r

在 a 中记录 R 函数和在 a 中记录`myfunction.Rd`整个包时`mypackage-package.Rd`，哪些标签是强制性的？

“标签”是指那些看起来像`\somename{}`. 例如： `\item{}` `\title{}` `\examples{}`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T10:44:25.770

这在[第 2.1 节 -](http://cran.r-project.org/doc/manuals/R-exts.html#Rd-format)编写 R 扩展的 Rd 格式中进行了描述。寻找“强制性”。

对于功能，强制性部分是：

```
\name{name}
\alias{topic}
\title{title}
\description{...}
\usage{fun (arg1, arg2, ...)}
\arguments{...} 
```

对于包裹：

```
\name{name}
\alias{topic}
\title{title}
\docType{package} 
```

# wcf - 我应该使用 OData 还是开发自己的 WCF 服务？

> ID：10496286
> 
> 赞同：2
> 
> 时间：2012-05-08T09:49:25.640
> 
> 标签：wcf, wcf-data-services, odata

我有一个通过 Web 服务公开实体框架数据的项目。我想知道我应该使用 OData 还是编写自己的 WCF 服务？看来OData已经死了。我对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T10:24:32.287

WCF 数据服务团队最近刚刚发布了一个新的[WCF 数据服务 v5.1.0 (RC)](http://blogs.msdn.com/b/astoriateam/archive/2012/04/20/wcf-data-services-5-1-0-rc-prerelease.aspx)版本......

我在这里看不到任何消亡的迹象，真的……阅读他们的团队博客！他们甚至[宣布将来会**更频繁**](http://blogs.msdn.com/b/astoriateam/archive/2012/05/07/wcf-data-services-now-with-more-releases.aspx)地发布！

对我来说听起来不像死了...

基本上，OData / WCF 数据服务是将实体框架数据模型发布到 Web 的最快方式。如果它对您来说足够好，如果它满足您的所有需求 - 那么无论如何 -**使用它！**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:57:43.430

只是为了更新这个线程......

这绝对没有死。检查[此链接](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api)。[OData](http://www.odata.org/introduction/)正在成长，它可能会成为分发 API (REST) 的默认方式。新的 Web API（参考 Asp.Net MVC 4）非常重视它。

# jsf - 我如何在 JSF 中处理未定义数量的相关 inputText

> ID：10496290
> 
> 赞同：1
> 
> 时间：2012-05-08T09:49:45.437
> 
> 标签：jsf, jsf-2

我需要收集班级学生的作业成绩。到目前为止我所做的是

1.  获取学生ID列表
2.  使用 ui:repeat i 循环遍历列表，对于每个学生 ID，我

    2a)显示一个h:inputText，其值为当前学生id，然后

    2b）在上面（2a）中的文本框右侧，我显示另一个 h:inputText 供教师输入该学生的分数（现在该值是一个虚拟变量，只是为了让页面显示）。

3.  我有一个命令按钮来提交所有数据。

例如，如果我有 20 个学生，我将有 20 行，其中每行有两个 h:inputText，一个已经包含当前的 student_id，另一个是空的，供老师输入分数。

我如何正确收集这些值，以便正确的学生 ID 与正确的分数相关联。

请注意，我无法硬编码文本字段的数量，因为班级中的学生人数可以随时更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:58:31.197

创建模型对象。

```
public class Score {

    private Long studentId;
    private BigDecimal teacherScore;

    // Getters/setters.
} 
```

在一些 JSF 托管 bean 中列出它们。

```
private List<Score> scores; 
```

用来`<h:dataTable>`展示它们。

```
<h:dataTable value="#{bean.scores}" var="score">
    <h:column><h:inputText value="#{score.studentId}" /></h:column>
    <h:column><h:inputText value="#{score.teacherScore}" /></h:column>
</h:dataTable>
<h:commandButton value="Save" action="#{bean.save}" />
<h:messages /> 
```

而已。

# android - android中的录音ui

> ID：10496292
> 
> 赞同：1
> 
> 时间：2012-05-08T09:49:57.683
> 
> 标签：android, android-layout

我正在android中创建一个录音模块，现在我要做的是创建如下的录音用户界面，特别是麦克风图像，当用户说话时，我们可以动画显示它的振幅水平（我不知道）不知道怎么称呼声音的强度）。

下图是安卓三星手机中提供的默认语音录制，我不想通过其意图使用默认语音录制服务，因为它有自己的限制

![在此处输入图像描述](../Images/ed1f59591111de8605903ba7ac04052d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:53:38.727

这不是 Android 中的默认记录器应用程序。我相信它是三星手机的默认应用程序。

Android 中也没有可用于录制的暂停 API。你必须做一些低级编码来实现这一点。

# sql - 更好的方法从 django 的数据库中检索最近的 10 个项目

> ID：10496293
> 
> 赞同：3
> 
> 时间：2012-05-08T09:49:58.277
> 
> 标签：sql, django, django-models, django-queryset

我使用下面的查询从我的数据库中检索 10 个项目

```
 itemobjects = Items.objects.all()[:10] 
```

有一个更好的方法吗？因为当我的数据库中的项目数量增加时，上述查询非常慢，大约需要 1-2 秒

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T09:55:36.643

这根本不需要很长时间，即使在大桌子上也是如此。`Meta`您是否在模型的类上定义了默认排序？也许它在默认情况下对非索引字段进行排序，这将是您看到的减速的原因。

无论如何，要获取最新条目，请按主键（保证被索引）对它们进行排序：

```
itemobjects = Items.objects.all().order_by('-pk')[:10] 
```

/edit：只是一个提示：给模型类提供单数名称是一种惯例，例如，`Item`而不是`Items`.

# c# - 上传大量照片

> ID：10496296
> 
> 赞同：0
> 
> 时间：2012-05-08T09:50:14.020
> 
> 标签：c#, .net, web-services, ftp

我有从窗口应用程序上传 1000 张照片的要求。

我遵循的逻辑是..首先在本地框中调整照片大小，然后上传。

我尝试过在 dotnet 中使用 FTP 上传和使用 Web 服务的 Http 上传。

但我得到的最佳解决方案是……上传 1000 张照片需要 100 分钟。即1分钟上传10张照片。

任何人都可以建议还有什么可以尝试提高这里的性能。

让我知道是否需要更多详细信息..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T09:51:52.753

除了所需的带宽外，一次上传一个文件还有开销。您可以尝试将它们全部压缩到一个文件中（即使对于许多图像格式，大小节省不会很重要）并以这种方式上传，以避免逐个文件的开销。甚至将它们批量化，比如将 50 或 100 张照片打包成一个 zip 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:56:40.957

首先重新调整照片大小并批量上传照片。没有人可以增加带宽。您可以使用 H.264 图像压缩技术来确保不同浏览器的可靠性和一致性。

[用于图像压缩的 H.264](http://H.264%20for%20image%20compression)

[如何在 c# Sample1 中实现 H.264](http://jasonjano.wordpress.com/2010/02/09/a-simple-c-wrapper-for-ffmpeg/)

[如何在 C# 示例 2 中实现 H.264](http://nolovelust.com/post/Another-Simple-C-Wrapper-For-FFmpeg.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:03:10.453

我一直致力于实施一种解决方案，以在通过 WAN 移动大文件时最大限度地提高传输速度。考虑到通过 WAN 的速度的限制因素不是带宽，而是延迟和 TCP 窗口大小。也许这是您遇到的问题？：[请参阅此处的说明](http://www.speedguide.net/articles/the-tcp-window-latency-and-the-bandwidth-delay-2678)

并行使用 FTP 传输应该可以提高您的性能，并且您不需要手动实施解决方案。您的 FTP 是否支持通过多个连接发送文件？

我使用异步套接字池和自定义协议开发了自己的解决方案。与 FTP 相比，速度提高了很多，但这并不是一个微不足道的发展......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T10:07:15.380

我首先要确保两个操作都是异步执行的，并在两者之间使用某种消息传递。因此，在处理图像时，它们会被添加到消息队列中以供上传。一旦它们被上传，它们就会从队列中移除。这样，如果出现问题，您就不必再次重新加载所有这些。这也是我在进行批量上传时遇到的问题。

# ios - AVPlayer 未达到播放结束

> ID：10496304
> 
> 赞同：0
> 
> 时间：2012-05-08T09:50:59.040
> 
> 标签：ios, avfoundation, avplayer, cmtime

我正在用 AVFoundation 制作电影。为此，我创建了一个带有 AVMutableComposition 的 playerItem 和一个带有该 playerItem 的 AVPlayer。我的问题是 AVPlayer 直到最后才播放。它提前半秒左右结束。

奇怪的是，如果我记录 AVPlayer 的 currentTime，它实际上到达了结束时间。但我可以从电影中看出它并不完全是最后。

另外，我有一个 timeLine 播放控件，它只是一个 UISlider，它允许我手动查找时间。如果我手动寻找时间，我可以到达电影的实际结尾。

我唯一能想到的是一些浮点数或 CMTime 舍入，它们会产生这个问题。但我想不出任何解决方案。

如果有人能给我一些建议或可能的解决方案，那就太好了。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:14:40.823

我通过更改 videoComposition 的 frameDuration 解决了这个问题。

# input - 文本框背景中的图像精灵

> ID：10496305
> 
> 赞同：1
> 
> 时间：2012-05-08T09:51:06.297
> 
> 标签：input, background, background-image, css-sprites, shorthand

我想在输入文本框的背景中显示图像。图像应放置在输入文本框的最右侧中心部分。可以通过以下代码轻松完成：

```
 <input type="text" class="card" size=20 /> 
```

CSS将是：

```
 .card{
     background:url('image.png') no-repeat right center;
       } 
```

我面临的问题是图像是一个精灵，由 3 个图像组成。我想在背景位置 -34px 0 显示一个，它的宽度是 23px；

如何用css指定背景位置和大小？

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:58:48.243

如果精灵很紧，您不能在 CSS 中剪切背景，其他选项是在输入框旁边添加一个跨度并将背景设置为精灵以及正确的高度和宽度，然后使用背景位置来获取正确的图像，一旦完成，您就可以使用负左值定位跨度，将其拉到文本框的左侧，希望这会有所帮助:)

```
<div style="position:relative; display:inline-block;">
  <input type="text" /><span style="position:absolute; right:0px; background:#FF0000">O</span>
</div> 
```

# sql - 如何从服务器上所有数据库的动态生成脚本中更改全文目录

> ID：10496309
> 
> 赞同：0
> 
> 时间：2012-05-08T09:51:13.910
> 
> 标签：sql, sql-server, full-text-search, alter, catalog

如何通过其 Database.Owner.Name 完整目录名称更改全文目录？

```
declare @db_name sysname;
declare db cursor for 
select name from sys.Databases where name like 'myprefix%'
open db
fetch next from db into @db_name
while @@fetch_status = 0
begin
  set @sql = 'ALTER FULLTEXT CATALOG [' +  @db_name + '].dbo.IndexedContent REBUILD'
  exec sp_executesql @sql   
  fetch next from db into @db_name
end
close db;
deallocate db; 
```

但 SQL Server 抱怨

```
Incorrect syntax near '.' 
```

[http://msdn.microsoft.com/en-us/library/ms176095.aspx](http://msdn.microsoft.com/en-us/library/ms176095.aspx)上的文档没有明确指定catalog_name 是否可以完全限定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:47:58.703

[文档](http://msdn.microsoft.com/en-us/library/ms189520.aspx)说目录名称是单个元素，即没有模式或数据库前缀（例如，与 CREATE TABLE 的语法不同[）](http://msdn.microsoft.com/en-us/library/ms174979.aspx)。因此，您可能需要先将执行上下文切换到正确的数据库：

```
set @sql = 'USE ' +  QUOTENAME(@db_name) + '; ALTER FULLTEXT CATALOG IndexedContent REBUILD;' 
```

# android - 更改列表视图的选择背景

> ID：10496313
> 
> 赞同：0
> 
> 时间：2012-05-08T09:51:25.873
> 
> 标签：android

在安卓中，

我有使用以下代码填写的列表

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.main, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.label);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
    textView.setText(values[position]);

    // Change icon based on name
    String s = values[position];

    System.out.println(s);

    if (s.equals("xxxxxxxx")) {
        imageView.setImageResource(R.drawable.one);
    } else if (s.equals("yyyyyyyyyy")) {
        imageView.setImageResource(R.drawable.two);
    } else if (s.equals("zzzzzzzzzzzzzzzzz")) {
        imageView.setImageResource(R.drawable.three);
    }

    // to change the background color

    return rowView;
} 
```

如何更改选择颜色而不是橙色，在布局中我使用以下代码

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="#DFE1E5">

    <ImageView
        android:id="@+id/logo"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="5dp"
        android:src="@drawable/one" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20dp" >
    </TextView>

</LinearLayout> 
```

解决我这样做的问题

首先将颜色xml添加到drwable

```
<?xml version="1.0" encoding="utf-8"?> 

<resources> <color name="selection_color">#0587F4</color> 
</resources> 
```

其次，我将 XML 添加到 drwable 以处理选择

```
<?xml version="1.0" encoding="utf-8"?>

<selector  xmlns:android="http://schemas.android.com/apk/res/android">

    <item 
        android:drawable="@color/selection_color"

        android:state_selected="true"/>
   <!--  <item android:drawable="@drawable/list_selection_bg" android:state_pressed="true"/>
--> 
</selector> 
```

第一个问题是它引发了关于“@color/selection_color”的错误

实现这一目标的任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:03:46.163

创建 Selector 的 XML 并将其保存在 drawable 文件夹中

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/list_selection_bg" android:state_selected="true"/>
    <item android:drawable="@drawable/list_selection_bg" android:state_pressed="true"/>
</selector> 
```

然后在Adapter类的getView方法中添加如下代码

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.main, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.label);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
    textView.setText(values[position]);

    // Change icon based on name
    String s = values[position];

    System.out.println(s);

    if (s.equals("xxxxxxxxxxx")) {
    imageView.setImageResource(R.drawable.one);
    } else if (s.equals("yyyyyyyy")) {
    imageView.setImageResource(R.drawable.two);
    } else if (s.equals("zzzzzzzzzzzzzzzzz")) {
    imageView.setImageResource(R.drawable.three);
    }

    // to change the background color
rowView.setBackgroundResource(R.drawable.alternate_list_color1);

    return rowView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:30:59.603

在 ListView 中提到它

android:listSelector="@drawable/list_selector"

并使 list_selector.xml 可绘制并粘贴此代码，您可以根据您的要求进行更改...

```
<!-- Selected -->
<item android:drawable="@drawable/list_hover" android:state_focused="true" android:state_pressed="false"/>
<!-- @drawable/tab_focus -->

<!-- Pressed -->
<item android:drawable="@drawable/list_hover" android:state_pressed="true"/>
<!-- @drawable/tab_press --> 
```

# java - Java GUI组件名称的语法？

> ID：10496314
> 
> 赞同：0
> 
> 时间：2012-05-08T09:51:27.830
> 
> 标签：java, user-interface, syntax, fitnesse

GUI 组件喜欢`JTextField`或`JComboBox`具有我可以通过调用设置的名称属性`setName(..)`。

组件名称可以包含每个字符吗？有没有定义组件名称语法的来源？

背景：为了让用户编写 FitNesse 测试，我考虑使组件属性与它们旁边的标签文本相同。但有些标签包含空格或符号，如连字符、点、逗号等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:58:26.003

据我所知，您可以使用任何字符串：[http ://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#setName%28java.lang.String%29](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#setName%28java.lang.String%29)

来自java源代码。组件名是一个String，据说可以为null。设置名称功能似乎也没有任何限制：

```
public void setName(String name) {
    String oldName;
    synchronized(getObjectLock()) {
        oldName = this.name;
        this.name = name;
        nameExplicitlySet = true;
    }
    firePropertyChange("name", oldName, name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:01:18.600

根据这个[问题](https://stackoverflow.com/questions/227143/java-what-is-java-awt-component-getname-and-setname-used-for)，我认为你不应该使用这些功能。如果你也想使用，任何字符似乎都可以接受。至少 API 中没有关于禁止字符的内容。您可能只会在外观上遇到一些问题。

# android - Android - 应用程序安装在 SD 卡上时的内部存储与外部存储

> ID：10496320
> 
> 赞同：12
> 
> 时间：2012-05-08T09:51:43.957
> 
> 标签：android, android-sdcard

我有一个下载大量内容的应用程序（它因用户而异，但可能是 200mb 到 1GB 或更多）。

目前我将所有这些内容保存在外部存储上，因为这可能是空间最多的区域，例如 SD 卡。这在大多数情况下都可以正常工作，但是在某些情况下这不一定是理想的。

如果设备像大多数平板电脑一样具有内置外部存储，但也有 SD 卡插槽，则外部存储问题会变得有点复杂。该应用程序可以安装到 SD 卡上，但内容将保存在内置存储中，而不是外部 SD 卡上。

如果应用程序安装在 SD 卡上，调用会`getFilesDir()`给出 SD 卡或内部存储上的路径吗？

处理这个问题的最佳方法是什么？我应该将内容保存到内部存储（在 sd 卡上）、外部存储还是在启动应用程序时询问用户最好的主意？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T11:27:22.210

> 该应用程序可以安装到 SD 卡上，但内容将保存在内置存储中，而不是外部 SD 卡上。

否。如果设备有外部存储，应用程序将安装到外部存储。*设备是否也*有 SD 卡并不重要。

> 如果应用程序安装在 SD 卡上，调用 getFilesDir() 会给出 SD 卡或内部存储上的路径吗？

`getFilesDir()`*始终*是内部存储，无论应用程序安装在何处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-01T16:03:32.787

> 如果应用程序安装在 SD 卡上，调用 getFilesDir() 会给出 SD 卡或内部存储上的路径吗？

类中的No.`getFilesDir()`方法`Context`总是返回内部存储的路径（在 Android 术语中）。

在大多数情况下，返回的目录路径`getFilesDir()`是`/data/data/your.application.package.appname/files`. 但它可能会因不同的手机、不同的 Android 版本而异。

要将您的应用程序文件存储在 SD 卡中，您可以在课堂上使用`File[] getExternalFilesDirs (String type)`方法。`Context`通常，第二个返回路径是 microSD 卡（如果有）的存储路径。

在我的手机上，返回的第二条路径是在作为参数`/storage/sdcard1/Android/data/your.application.package.appname/files`传递之后`null``getExternalFilesDirs (String type)`

根据 Google/官方 Android 文档的内部和外部存储术语与我们的想法有**很大不同。**

# ipad - 在详细视图中加载文档

> ID：10496323
> 
> 赞同：2
> 
> 时间：2012-05-08T09:51:51.180
> 
> 标签：ipad

我正在尝试通过“打开方式”功能将文档（word/excel/pdf 等）加载到我的拆分视图中。我的详细视图包含将显示这些文件的 Web 视图。我可以使用以下代码在应用程序委托中获取 URL

```
 - (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
    {
        //Loading webpage in webview by passing url
        NSURL *urlToPass = url;
        [objWeb passWebURL:urlToPass];
        return YES;
    } 
```

但该文件未在详细视图中加载。我创建了一个函数来在详细视图中接受此 URL。

```
-(void)passWebURL:(NSURL *)strURL
{
    NSLog(@"URL PASSED IS:: %@", strURL);
    passedURL = strURL;
    NSURLRequest *requestURL = [NSURLRequest requestWithURL:passedURL];
    NSURLConnection *urlConnection = [NSURLConnection connectionWithRequest:requestURL delegate:self];
    [urlConnection start];
    [viewToDisplay loadRequest:requestURL];
} 
```

但我不确定在哪里调用他的方法，因为文件没有显示。

提前感谢您的帮助

# javascript - 通过我的 Facebook 应用程序处理 Facebook 注册 - 使用 nodejs everyauth

> ID：10496329
> 
> 赞同：2
> 
> 时间：2012-05-08T09:52:05.970
> 
> 标签：javascript, facebook, node.js, express, everyauth

我们使用 everyauth 将 Facebook 身份验证集成到我们的用户帐户系统（nodejs、express）**中**。

现在做了什么（在伪代码中）：

```
everyauth
  .facebook
    .appId('....')
    .appSecret('.....')
    .findOrCreateUser( 
      function (session, accessToken, accessTokenExtra, fbUserMetadata) {
      ...
      }
    .redirectPath('/internal/facebook'); 
```

身份验证完美运行。问题是通过此流程时：

1.  用户现在没有其用户代理的 Facebook cookie（用户未登录到 Facebook）。

2.  用户通过 Facebook 调用身份验证（调用everyauth 的**/auth/facebook服务）**

3.  Facebook“登录/登录”页面已加载。用户想要创建新的 Facebook 帐户并选择“注册 Facebook”。

4.  用户完成注册详细信息，然后应通过我们的应用程序通过单击他刚刚收到的邮件中的链接来确认他的 Facebook 帐户注册。

5.  所以用户去他的邮件，点击链接 - **他被重定向到根 - “/” - 我们的用户帐户。**- 这是一个没有 UI 的网络服务，它为不同的应用程序提供用户帐户服务......

### 问题如下：

1.  用户通过我们的应用程序注册 Facebook 后如何获取用户？在这种情况下不调用**findOrCreateUser() 。**
2.  用户通过我们的 App 注册 Facebook 后（用户注册成功后），我们如何覆盖重定向到我们 App 的“/”的行为？

# java - 在不知道真实姓名的情况下获取 JSON 字段名

> ID：10496331
> 
> 赞同：1
> 
> 时间：2012-05-08T09:52:11.557
> 
> 标签：java, json

我有一个*JSON*数组，我想`List<String> jsonFieldName`根据 JSON 响应中唯一字段的数量动态创建一个基础；比如说；

```
JSON = [{a:1,b:2,c:3},{a:4,b:5,c:5}]; 
```

结果：

```
temp_array=[{a,b,c}]; 
```

基于上面的 JSON 示例，我最终会得到 3 个新列表；列表：列表 a 列表 b 列表 c

我想以这样的方式结束，因为我想创建一个通用的 JSON 响应解析器，其中每个响应的大小/长度可能不同。

如何在 Android 中实现一个；

这是我现有的解析 JSON 响应的方法

```
public void getJsonData(JSONArray ja) {
    try {
        // JSONArray jArray = new JSONArray(result);
        for (int i = 0; i < ja.length(); ++i) {
            JSONObject jo = ja.getJSONObject(i);
            Log.i("Connect->getJsonData", jo.getString("tableno"));
        }
    } catch (Exception e) {
        Log.e("ConnectToDatabase->getJsonData", "Error Parsing JSON Data "
                + e.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:55:43.590

这是我所做的：

```
public void getJsonData(JSONArray ja) {
 **List<String> arrNames = new ArrayList<String>**;
 try {
    // JSONArray jArray = new JSONArray(result);
    for (int i = 0; i < ja.length(); ++i) {
        JSONObject jo = ja.getJSONObject(i);
        **arrNames[i] = jo.names(i);**
        Log.i("Connect->getJsonData", jo.getString("tableno"));
    }
 } catch (Exception e) {
    Log.e("ConnectToDatabase->getJsonData", "Error Parsing JSON Data "
            + e.toString());
 }
} 
```

# ios - btw NSString *var = @"value" 和 NSString *var =[ [NSString alloc] initWithString:@"value"] 有什么区别

> ID：10496338
> 
> 赞同：1
> 
> 时间：2012-05-08T09:53:06.120
> 
> 标签：ios, cocoa

在ios中初始化字符串变量的两种方式有什么区别（，adv/disadv）？

`NSString *var = @"value"`和`NSString *var =[ [NSString alloc] initWithString:@"value"]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:44:23.413

编码：

```
NSString *var = @"value"; 
```

`NSCFConstantString`创建一个由编译器创建并作为程序数据的一部分存储的实例。出于内存管理的目的，它不响应`retain`或者`release`可以有效地被忽略。

但是代码：

```
NSString *var =[ [NSString alloc] initWithString:@"value"]; 
```

分配一个`NSString`对象并使用常量字符串的内容对其进行初始化`@"value"`。`release`当不再需要但不能更新（它是不可变的）时，它必须是d ，因此与第一段代码相比几乎没有提供什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T09:56:02.723

@"value" 返回一个自动释放的字符串，但 initWithString: 返回一个保留的字符串，需要释放。如果您使用的是 ARC，则没有区别，因为它会为您释放它。

# python - 启动第一个 Django 项目错误

> ID：10496344
> 
> 赞同：3
> 
> 时间：2012-05-08T09:53:31.377
> 
> 标签：python, django, apache

我的电脑运行 Ubuntu 12.04，我按照本教程开始使用 Django：http: [//blog.stannard.net.au/2010/12/11/installing-django-with-apache-and-mod_wsgi-on-ubuntu- 10-04/](http://blog.stannard.net.au/2010/12/11/installing-django-with-apache-and-mod_wsgi-on-ubuntu-10-04/)

我尝试通过运行此命令开始`/srv/www/`我的项目`alex``sudo django-admin.py startproject alex`

然后创建 apache 文件夹和`django.wsgi`文件 ( `/srv/www/alex/apache/django.wsgi`)

树为`/srv/www/alex/`

```
.
├── apache
│   └── django.wsgi
├── alex
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
└── manage.py

2 directories, 6 files 
```

亚历克斯阿帕奇网站：

```
<VirtualHost *:80>

    ServerName alex.djangoserver
    DocumentRoot /srv/www/alex

    <Directory /srv/www/alex>
        Order allow,deny
        Allow from all
    </Directory>

    WSGIDaemonProcess alex.djangoserver processes=2 threads=15 display-name=%{GROUP}
    WSGIProcessGroup alex.djangoserver

    WSGIScriptAlias / /srv/www/alex/apache/django.wsgi

</VirtualHost> 
```

apache错误日志结果：

```
[error] [client 127.0.0.1] mod_wsgi (pid=28076): Exception occurred processing WSGI script '/srv/www/floqq/alex/django.wsgi'.
[error] [client 127.0.0.1] Traceback (most recent call last):
[error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 219, in __call__
[error] [client 127.0.0.1]     self.load_middleware()
[error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 39, in load_middleware
[error] [client 127.0.0.1]     for middleware_path in settings.MIDDLEWARE_CLASSES:
[error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 184, in inner
[error] [client 127.0.0.1]     self._setup()
[error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 42, in _setup
[error] [client 127.0.0.1]     self._wrapped = Settings(settings_module)
[error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 95, in __init__
[error] [client 127.0.0.1]     raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
[error] [client 127.0.0.1] ImportError: Could not import settings 'alex.settings' (Is it on sys.path?): No module named alex.settings 
```

## 更新

apache/django.wsgi

```
import os
import sys

path = '/srv/www'
if path not in sys.path:
    sys.path.insert(0, '/srv/www')

os.environ['DJANGO_SETTINGS_MODULE'] = 'alex.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:06:11.250

在您的 wsgi 文件中，您有：

```
sys.path.insert(0, '/srv/www')

os.environ['DJANGO_SETTINGS_MODULE'] = 'alex.settings' 
```

这将搜索`settings.py`in `/srv/www/alex/`。

那失败了，因为根据您发布的树，`settings.py`它位于`/srv/www/alex/alex/`.

所以你有3个选择：

1.  更改插入的路径
2.  更改目录结构，或
3.  重构`/srv/www/alex/`为包含`alex.settings`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T11:09:32.800

您不应该`sudo`在开发过程中使用任何您需要的命令；因为您不以 root 身份进行开发，这将导致其他具有权限的问题。

如果您是 django 新手，那么与更传统的开发框架（如 PHP）不同的第一件事就是您不需要 Web 服务器或数据库服务器即可开始使用。Django 附带了您在开发过程中所需的一切，包括您从[`runserver`](https://docs.djangoproject.com/en/dev/ref/django-admin/#django-admin-runserver)命令开始的 Web 服务器。

您还应该使用[官方教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)来帮助您入门。一旦您对本教程感到满意，那么您将对如何部署项目有更好的理解，并且可以轻松地关注其他帖子。

Apache`mod_wsgi`在部署项目时是最好的，在开发过程中不是最优的（或必要的）。

我建议您从以下步骤开始：

*   首先，您应该执行`sudo apt-get install python-virtualenv`，这将允许您为您的 python/django 工作创建一个单独的环境。这是您应该以 root 身份运行的*唯一*命令，并且只会执行一次。

*   现在，开始吧。打开终端并以*普通用户*身份输入以下内容：

    `$ virtualenv --no-site-packages django_project`

    这将创建一个新环境，您可以将其用于您的第一个项目。执行该命令后，键入以下内容：

    `$ source django_project/bin/activate`

    这将激活新的虚拟环境。您会注意到您的提示现在已`(django_project)`列出。这让您知道您在虚拟环境中。最后，你应该安装 django：

    `(django_project) $ pip install django`

现在 django 已安装，您可以从[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)开始。如果您关闭终端（或打开新选项卡或终端窗口），您可以通过执行`source django_project/bin/activate`. `deactivate`您可以通过在虚拟环境中键入来回到您的正常 shell 。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T09:59:00.050

你能发布你的wsgi.py吗？也许问题就在那里

我的 wsgi.py，也许可以帮助你。

```
import os
import sys

sys.path.append('/Applications/MAMP/htdocs/Django-1.4')
sys.path.append('/Applications/MAMP/htdocs/')
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "meishi.settings")
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler()

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T05:03:40.030

我遵循了相同的教程并遇到了同样的问题，但发现了一个[SO](https://stackoverflow.com/a/4750766/623735)和一些[wsgi 文档](http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango)让我走得更远。关键是在 wsgi 文件搜索路径列表中添加 2 个路径，但实际上只有一个会指向正确的`settings.py`，这取决于您在根据其他建议改组后的文件结构，...

```
base = os.path.dirname(os.path.dirname(__file__))
base_parent = os.path.dirname(base)
sys.path.append(base)
sys.path.append(base_parent) 
```

我的页面现在可以正常使用了……减去 css 和其他静态/媒体文件。但这应该很容易通过更多的挖掘来解决。

# javascript - 网格内计算

> ID：10496345
> 
> 赞同：0
> 
> 时间：2012-05-08T09:53:31.790
> 
> 标签：javascript, asp.net

我想在网格内计算，2个文本框值的倍数，按键或按键事件。你能为我提供一些javascript吗？我使用下面的代码它对我不起作用 javascript

```
var a = document.getElementById(txtlabchrgsNooflab);
    var b = document.getElementById(txtlabchrgsTotalCost);
    txtlabchrgsTotalCost=a*b;
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:28:15.030

首先 - 如果你想将两个东西相乘，它们必须是数字。

目前，您的`a`和`b`变量只是您识别的*HTML 元素*，您不能将它们相乘。（尽管注意 Carl 的评论；`txtlabchrgsNooflab`如果这是一个文字字符串而不是变量名，您可能需要引用。）

所以你需要获取这些元素的值，作为数值数据类型。获取值应该像调用`.value()`文本输入一样简单；但是，这会返回一个字符串。这*可能*会根据需要自动强制转换为数字类型，但我会更乐意（并且认为它更清楚）明确地调用`parseFloat`它。

一旦你有你的两个花车，你可以愉快地将它们相乘。因此，您的代码应如下所示：

```
var elemA = document.getElementById(txtlabchrgsNooflab);
var elemB = document.getElementById(txtlabchrgsTotalCost);
var a = parseFloat(elemA.value());
var b = parseFloat(elemB.value());

txtlabchrgsTotalCost = a * b; 
```

* * *

好的，所以使用上面的代码会导致：

> 错误：无法获取属性“值”的值：对象为空或未定义

我们可以从这个错误信息中推断出什么？好吧，运行时无法计算`value`，因为它被调用的东西是空的或未定义的。

如果您查看代码，就会清楚哪些变量可能为 null 或未定义 - 您应该能够检查您的 HTML 以了解原因，并进行必要的更正。

# javascript - ExtJS4 中嵌入式容器的 AutoWidth/Height

> ID：10496346
> 
> 赞同：0
> 
> 时间：2012-05-08T09:53:34.377
> 
> 标签：javascript, extjs4

我正在将 ExtJS 容器渲染为`<div>`. 这`<div>`在高度和宽度上有所不同。现在我不想让容器在调整大小时“实时”`<div>`调整大小。`<div>`但我只是在获得新尺寸后才设法调整容器的大小。这是丑陋的。当它变小时，这似乎有点奇怪`<div>`。

我读到了“fit”布局通常如何处理这个问题，但`<div>`不是 ExtJS 组件：\

有任何想法吗？

# salesforce - Salesforce 中记录的只读权限

> ID：10496351
> 
> 赞同：0
> 
> 时间：2012-05-08T09:53:59.327
> 
> 标签：salesforce

我必须在用户在 Salesforce 中输入值后才将字段设为只读，这样即使该特定用户在输入后也无法更改该值。我怎么能做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T19:33:29.447

据我所知，Salesforce 没有“仅允许此字段设置一次”设置。最简单的方法可能是一个验证规则，它只在字段更改并且字段的先前值不为空白时引发错误，例如：

```
AND(
    ISCHANGED(SomeField__c),
    NOT(ISBLANK(PRIORVALUE(SomeField__c)))
) 
```

或选择列表：

```
AND(
    ISCHANGED(SomeField__c),
    NOT(ISPICKVAL(PRIORVALUE(SomeField__c), ''))
) 
```

# asp.net-mvc-3 - 如何将 CheckBox 值返回到 VIEW

> ID：10496353
> 
> 赞同：0
> 
> 时间：2012-05-08T09:54:06.453
> 
> 标签：asp.net-mvc-3

我有完整的代码列表及其描述，数据库中有 24 条记录

我使用存储的 Proc 从数据库中进行选择，并将其输出到 VIEW()。

用户点击这些复选框，他希望有多少，然后它被发布到数据库到另一个用户表中。

我扫描此用户表以获取他检查过的数据.. 说在 24 个中他检查了 10 个复选框。

我希望能够输出所有带有用户选中的相关框的复选框。我有数据，所有复选框都在 VIEWBAG 中的列表中。而且我还有一个用户表，其中包含他也在一个单独的列表中检查的数据，在一个 VIEWBAG 中，以便我可以在 VIEW 中访问它。

我如何输出所有复选框，但还要检查用户使用从控制器传递的 VIEWBAG 所单击的复选框？

下面的代码只是遍历所有数据并输出所有复选框。我需要确保新的 VIEWBAG.USER 中的那些用于检查下面的相关框：

```
 @foreach (var item in ViewBag.Expertise)
    {
        l_count = l_count + 1;
        l_code = l_code + 1;

        if (l_count == 1)
        {                                                          
            <td class="tdcheckbox">
                <input type="checkbox" name="code@(l_code)" value="@item.expertiseCode" />
                <b>@item.expertiseDesc</b>
            </td> 
            else if (l_count < 3)
            {    
                <td class="tdcheckbox">
                    <input type="checkbox" name="code@(l_code)" value="@item.expertiseCode" />
                    <b>@item.expertiseDesc</b>
                </td>
            }
            else if (l_count == 3)
            {           
                <td class="tdcheckbox">
                    <input type="checkbox" name="code@(l_code)" value="@item.expertiseCode" />
                    <b>@item.expertiseDesc</b>
                </td>                                                            
            }
            else if (l_count % 2 == 0 && l_count == 4)
            {         
                <td class="tdcheckbox">
                    <input type="checkbox" name="code@(l_code)" value="@item.expertiseCode" />
                    <b>@item.expertiseDesc</b>

                @if (@item.expertiseCode == "OTHER")
                {
                    @Html.TextBox("@item.otherExpertise")
                    <br /><font color="red">Comma separate specific expertise</font>
                }
                </td>   

                @:<tr></tr>
                l_count = 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:30:53.260

如果我正确理解您的问题，您可以执行以下操作。

把它放在你的视图顶部

```
@{var ids = (List<int>)ViewBag.USERS); 
```

然后，当您遍历所有复选框时，您可以执行以下操作。

```
if (ids != null && ids.Contains(item.expertiseCode))
{
   <input type="checkbox" name="code@(l_code)" value="@item.expertiseCode" checked />
}
else
{
  <input type="checkbox" name="code@(l_code)" value="@item.expertiseCode" />
} 
```

# css - CSS 下拉菜单，嵌套列表 - 子列表项与父列表项重叠

> ID：10496357
> 
> 赞同：0
> 
> 时间：2012-05-08T09:54:33.157
> 
> 标签：css, drop-down-menu

我正在尝试制作一个 CSS 下拉菜单，但问题是子列表项与父列表项重叠，如图[所示](http://i48.tinypic.com/jku1qa.png)。

我发现问题的根源是**填充：10px 5px;** 在第 12 行 - 删除后，问题就解决了。但我需要填充的外观。我阅读了解决类似问题的[内联元素和填充，但即使是文章中提供的解决方案 - 使用](http://www.maxdesign.com.au/articles/inline)**float: left;** 而不是**显示：内联；**- 不能解决我的问题。

为什么会发生这种情况，解决方案是什么？

HTML 代码

```
<ul id="navigation_2">
  <li><a href="#">Home</a></li>
  <li><a href="#">About</a>
     <ul>
        <li>Who We Are</li>
        <li>Our Goal</li>
    </ul>
  </li>
</ul> 
```

CSS 代码

```
ul#navigation_2 
{
margin: 0;
padding: 0;
list-style: none;
font-family: "Century Gothic","HelveticaNeueLT Pro 45 Lt",sans-serif;
}
ul#navigation_2 li
{
float: left;
position: relative;
padding: 10px 5px;
font-size: 114%;
text-align: center;
width: 100px;
}
ul#navigation_2 li a
{
text-decoration: none;
}
ul#navigation_2 li a:link, a:visited, a:active
{
color: black;
}
ul#navigation_2 li:hover
{
background-color: red;
}
ul#navigation_2 li ul
{
margin: 0;
padding: 0;
list-style: none;
display: none;
}
ul#navigation_2 li ul li
{
display: block;
width: 150px;
text-align: left;
}
ul#navigation_2 li:hover ul
{
display: block;
position: absolute;
background-color: #CBD966;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:12:59.940

在这里，我有一个工作示例：

[http://jsfiddle.net/hzCZY/2/](http://jsfiddle.net/hzCZY/2/)

永远不要低估它的力量`inline-block`！基本上，您的列表与文本“关于”相冲突，而不是文本“关于”周围的红色框。我将实际`a`标签格式化为红色块，而不是 ，`inline-block`然后`ul`它与下面的正确碰撞。

如果您需要更多解释，我将非常乐意提供帮助。

# pdf - 使用 SSRS / ReportViewer 创建 PDF 时字体替换到 PDF 的规则？

> ID：10496360
> 
> 赞同：5
> 
> 时间：2012-05-08T09:54:52.167
> 
> 标签：pdf, reporting-services, reportviewer, filesize

为了[减小](https://stackoverflow.com/questions/15310/optimizing-the-pdf-export-of-huge-reports-in-sql-reporting-services-2005/10481764#10481764)从 SSRS 和 ReportViewer 控件导出的 PDF 文件的大小，影响 PDF 大小的主要因素之一是完整和子集字体嵌入。

最终，我们决定仅使用 Arial 和 Times New Roman 字体的变体（大小、粗体、斜体等）来标准化我们的报告 - 幸运的是，我们的大多数报告都是企业的电子表格费用，不需要美学吸引力。

在 PDF 创建期间，这些字体似乎会被 ReportViewer/SSRS 替换为 14 种 PDF [“标准允许字体”](http://www.pdf-tools.com/pdf/Support/FAQ/Article.aspx?name=PDF-Standard-Fonts)之一（因为标准字体通常不会安装在大多数 Windows 机器上）。

所以我的问题是，ReportViewer 上的 PDF 渲染器在字体替换期间使用的规则到底是什么，而不是在 PDF 中嵌入字体？

基于[此站点](http://www.aivosto.com/vbtips/pdf-optimize.html)，经过一些试验和错误，似乎确实进行了以下替换（从 RDL 到 PDF，列表不完整）：

*   时代新罗马=>时代
*   新信使 => 信使
*   宋体 => 黑体字

我曾认为由于字体嵌入合法性而强制替换，但 Times New Roman 和 Arial 都是“可编辑的”，我认为这是限制最少的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T10:51:00.983

呈现pdf时需要满足一些条件。

我怀疑[此处](http://technet.microsoft.com/en-us/library/ms159713%28SQL.100%29.aspx)列出的参数之一未得到满足，并将您的字体转换为最适合的字体。

1.  确保字体安装正确并且字体嵌入被授予字体；和

2.  字体必须是真字体。

# objective-c - 在 Objective C & IOS 5.1 中发布 UIImagePickerControl

> ID：10496363
> 
> 赞同：0
> 
> 时间：2012-05-08T09:55:01.007
> 
> 标签：objective-c, ipad, ios5

使用 use buttom 后尝试释放 UIImagePickerControl 时出现语法错误

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
 // Access the uncropped image from info dictionary
 UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

    [viewsavedimage setImage: image];

 [picker release];
} 
```

是[选择器释放]；对不对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:02:01.830

您不应该从 imagePickerController 中释放选择器，因为它是一个参数。您应该从调用 imagePickerController 的位置释放它。如果你使用 ARC（弱，强），你不需要这样做。内存管理器会为您完成。

# javascript - 复选框 onclick 在 IE8 中不起作用，但在 IE9 中起作用

> ID：10496365
> 
> 赞同：0
> 
> 时间：2012-05-08T09:55:08.823
> 
> 标签：javascript, jquery

我正在创建动态复选框并使用它附加 onclick 事件。下面是代码：

```
var table = document.getElementById(tableID);
var rowCount = table.rows.length;
var row = table.insertRow(rowCount);

var cell1 = row.insertCell(0);
var checkbox = document.createElement("input");
checkbox.type = 'checkbox';
checkbox.onclick = testClick();
cell1.appendChild(checkbox);

function testClick() {
            alert("Hello");
} 
```

上面的代码在 IE9 上运行良好，但在 IE8 上不行。我正在使用 Jquery 1.7.1。

任何帮助将不胜感激。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:56:14.200

您需要传递函数处理程序，而不是函数调用`onclick`属性：

```
checkbox.onclick = testClick; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T09:56:56.167

如果您使用的是 jQuery，为什么不使用它呢？这可以解决跨浏览器问题

```
$(domElement).click(function(){
    // do your thing here
}); 
```

# iphone - 设备 ID 和配置文件

> ID：10496379
> 
> 赞同：1
> 
> 时间：2012-05-08T09:55:44.787
> 
> 标签：iphone, provisioning-profile

是否可以在模拟器上测试启用了苹果推送通知服务 (APNS) 的应用程序？如果是这样，我在哪里可以获得设备 ID（UUID，它应该是 40 个十六进制字符）以便我可以创建配置文件？

简而言之，我无法创建配置文件，因为我无法获取 40 个十六进制字符的设备 ID。目前我有这个 uuid D1648548-6C35-511B-B0D0-258808BD2026，它只有 36 个，包括 4 个连字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:42:19.750

在模拟器上，推送通知不起作用。你需要一个设备。进入配置文件，设备 ID 和设备令牌都是 2 个不同的十六进制字符。如果您将设备与 mac 连接，您可以从管理器选项卡中的 xcode 获取设备 ID。这是需要添加到配置文件中的设备 ID。

当您实现推送通知并在设备上运行该应用程序时，您将获得设备令牌，该令牌用作与 APN 和设备的通信。

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:01:28.990

苹果在模拟器上未启用推送通知服务。你需要使用设备。请参阅有关推送通知的苹果指南。您将被详细告知

[http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

# sql - 子查询中的内连接

> ID：10496381
> 
> 赞同：2
> 
> 时间：2012-05-08T09:55:47.857
> 
> 标签：sql, oracle11g, oracle-sqldeveloper

有人可以解释以下查询之间的区别。子查询中的联接看起来相同，但第一个运行正常，第二个运行正常。在第二个查询中，子查询似乎无法访问别名表 e。

QUERY1

```
select    e.ename
          ,e.deptno
          ,(
                select count(*)
                from emp d
                where e.deptno = d.deptno
          ) dept_cnt
from      emp e
order by 2; 
```

查询 2

```
select    e.ename
          ,e.deptno
          ,(
                select count(*)
                from emp    d
                inner join  e
                    ON      d.deptno = e.deptno
           ) dept_cnt
from      emp e
order by 2; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T10:08:57.407

第二个查询语法错误：

```
inner join  e
                    ON      d.deptno = e.deptno 
```

无法使用表别名进行内部连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:12:02.947

查询 2 是无效的 sql。关键字`from`，并且`join`必须后跟一个表名和可选的别名。

查询 2 的可能修复（但查询 1 更好）

```
select  e.ename
       ,e.deptno
       ,(
           select count(*)
           from emp    d
           inner join emp e1
             ON  d.deptno = e1.deptno
             AND e1.deptno = e.deptno
        ) dept_cnt
from    emp e 
order by 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:12:34.677

子查询只能使用来自更高级别表的标量值，这些表本身不在范围内——您可以将子查询视为对更高级别表的每一行执行的循环。

# php - 在自定义 PHP CMS 中呈现头部元标记

> ID：10496385
> 
> 赞同：3
> 
> 时间：2012-05-08T09:56:01.887
> 
> 标签：php, html, content-management-system, seo, html-title

（我是一个完整的新手程序员）

我最近遇到了我的自定义 CMS 的问题。我想让它对 SEO 友好，所以我试图通过加载的页面来呼应标题，例如

`www.blaa.com/index.php?page=about //code here grabs the required page title from the mysql db $title = $row['title']; <title><?php echo $title; ?></title>`

我看不出这是否真的有效，因为当我查看源代码时它只显示以下代码：

`<table> <tr><td>Custom Module<br><br>`

我的自定义模块 cus 任何 html 都在这里

`</td></tr> <tr><td>Menu Body <br><br> <a href='home.html'> home</a><br><a href='about page.html'> about page</a><br><br><br> </td></tr> <tr><td>body<br> cant believe im so a<br></div> </td></tr> <tr><td>Footer<br> links go here to various pages<br></td></tr> </table>`

有没有办法让所有的 HTML 代码显示在视图源中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:03:31.000

你必须`echo`或`print`一个变量来显示它。你也可以做一个`var_dump`检查值是什么。

```
<?php
$title = isset($_GET['title'])? $_GET['title'] : "No title.";
?>
<!DOCTYPE html>
<html>
<head>
  <title><?php echo htmlspecialchars($title); ?></title>
</head> 
```

我添加`htmlspecialchars`以防止脚本注入，我不知道它是否可以在`title`标签中工作，但我添加它以防万一。另外，您应该知道，每当您将用户输入写入 HTML 页面时，您应该使用 htmlspecialchars 来取消任何 html 代码和脚本。

如果您的自定义模块是您想要显示的 HTML 负载，您应该使用以下`inlude`命令：

```
<body>
<?php include("path/to/custom_module.php"); ?>
</body>
</html>

# custom_module.php
<div>Hello, I'm the custom module.</div> 
```

# ravendb - 如何在 RavenDB 中实现非规范化引用

> ID：10496391
> 
> 赞同：8
> 
> 时间：2012-05-08T09:56:23.783
> 
> 标签：ravendb

我想在 RavenDB 文档数据库中存储的两个实体之间进行引用。由于这不是关系数据库，我知道我应该使用 RavenDBs 文档中描述的非规范化引用技术。虽然一开始这似乎很好，但一旦我开始创建一个包含双向引用的真实域“层次结构”，那么让所有这些引用保持最新的努力感觉不成比例。我觉得我可能在某个地方出错了。

您能否解释使用 RavenDB 对相当复杂的域层次结构建模的最佳/最简单方法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T10:23:14.440

我不确定这是否足以回答您的问题，但这是我在 RavenDB 中创建非规范化引用的方法（这取自真实代码，为清楚起见删除了非必需项）

**领域**

```
public class User : IUserIdentity
{
    public string UserName { get; set; }
    public IEnumerable<string> Claims { get; set; }
    public string Id { get; set; }
    public Guid FormsAuthenticationGuid { get; set; }
}

public class Assessment
{ 
    public string Id { get; set; }
    public UserReference User { get; set; }
    public AssessmentState State { get; set; }
} 
```

您可以看到我有一个`Assessment`引用`User`. 此用户参考使用以下`UserReference`类进行管理。

**非规范化参考**

```
public class UserReference
{
    public string Id { get; set; }
    public string UserName { get; set; }

    public static implicit operator UserReference(User user)
    {
        return new UserReference
                {
                        Id = user.Id,
                        UserName = user.UserName
                };
    }
} 
```

请注意参考类如何也带有`UserName`. 这个值不会经常改变，但它可能会改变，所以我们需要一种方法来更新类中保存的`UserName`属性中的`UserReference`属性`Assessment`。要进行更改，我们必须首先`Assessment`从 RavenDB 中找到正确的实例，为此我们需要一个索引。

**乌鸦指数**

```
public class Assessment_ByUserId : AbstractIndexCreationTask<Assessment>
{
    public Assessment_ByUserId()
    {
        Map = assessments => from assessment in assessments
                                select new
                                    {
                                            User_Id = assessment.User.Id
                                    };
    }
} 
```

`User`每当更新 a的`UserName`值时，都需要调用此索引。我有一个`UserService`类可以帮助我协调所有与用户相关的功能，所以这就是我放置此代码的地方。

我将此代码重用于其他参考，因此它被抽象了一点。这可以帮助您创建您想要的更复杂的层次结构（或者“域图”可能是更好的描述）。

**用户服务**

```
public static void SetUserName(IDocumentSession db, string userId, string userName)
{
    var user = db.Load<User>(userId);
    user.UserName = userName;
    db.Save(user);
    UpdateDenormalizedReferences(db, user, userName);
}

private static void UpdateDenormalizedReferences(IDocumentSession db, User user, string userName)
{
    db.Advanced.DatabaseCommands.UpdateByIndex(
            RavenIndexes.IndexAssessmentByUserId,
            GetQuery(user.Id),
            GetUserNamePatch(userName),
            allowStale: true);

}

private static IndexQuery GetQuery(string propertyValue, string propertyName = "User_Id")
{
    return new IndexQuery {Query = string.Format("{0}:{1}", propertyName, propertyValue)};
}

private static PatchRequest[] GetUserNamePatch(string referenceValue, string referenceName = "User")
{
    return new[]
            {
                    new PatchRequest
                    {
                            Type = PatchCommandType.Modify,
                            Name = referenceName,
                            Nested = new[]
                                    {
                                            new PatchRequest
                                            {
                                                    Type = PatchCommandType.Set,
                                                    Name = "UserName",
                                                    Value = referenceValue
                                            }
                                    }
                    }
            };
} 
```

这就对了。而且你知道，现在我把它全部列出来了，我明白你的意思了。*仅*更新参考就需要做很多工作。也许服务代码可以变得更加 DRY 并重用于不同的关系类型，但我不知道如何避免编写大量索引，每个引用类型一个。

# ios - 模式视图控制器的 UITabBarController 内存问题

> ID：10496392
> 
> 赞同：1
> 
> 时间：2012-05-08T09:56:30.660
> 
> 标签：ios, xcode, memory-management, uitabbarcontroller, modalviewcontroller

我的 ios 应用程序是基于 UITabBarController 的应用程序。在几种情况下，我需要在另一个模态视图控制器中呈现模态视图控制器。

一切正常，期待内存警告到达：如果我尝试关闭两个模态视图控制器以返回离开标签栏控制器的位置，这就是我所看到的： ![在此处输入图像描述](../Images/6ee3614c1967591b8a7e7984ee99e682.png)

选定的标签栏控制器视图不会显示在屏幕上。

这些是导致此问题的完整步骤：

*   用户打开第一个视图控制器（A），它从当前选择的标签栏控制器模态呈现。
*   用户打开另一个视图控制器 (B)，它从视图控制器 A 模态呈现。
*   内存警告到达，隐藏的视图被破坏。
*   用户关闭以模态方式关闭的 B（动画）。
*   用户关闭以模态方式关闭的 A（动画）。
*   不显示所选控制器的视图。

如果 B 从未显示并且内存警告从 A 到达，我没有问题。

我还尝试从选项卡栏控制器而不是从选定的视图控制器呈现 A，但没有任何改变。

我已经记录了我的标签栏和提要控制器（当前选择的控制器）的主视图事件入口点。结果令人惊讶：

```
// B is visible on the screen
2012-05-08 15:30:00.563 - Received memory warning.
2012-05-08 15:30:00.563 - viewDidUnload called on tab-bar controller
2012-05-08 15:30:00.564 - viewDidUnload called on feed controller

// user dismisses B controller and A is displayed
2012-05-08 15:30:30.267 - loadView called on feed controller
2012-05-08 15:30:30.268 - viewDidLoad called on feed controller
2012-05-08 15:30:30.274 - loadView called on tab-bar controller
2012-05-08 15:30:30.274 - viewDidLoad called on tab-bar controller

// user dimisses A controller and tab-bar is displayed
2012-05-08 15:30:40.273 - viewWillAppear: called on tab-bar controller 
```

如您所见，标签栏视图（以及提要）在 B 被关闭时恢复。这不是我期望看到的，确实在关闭 A 时应该恢复标签栏视图。

有任何想法吗？谢谢

# c++ - 如何通过远程日志库记录可能导致程序崩溃的分段错误和运行时错误？

> ID：10496394
> 
> 赞同：5
> 
> 时间：2012-05-08T09:56:31.847
> 
> 标签：c++, logging

通过远程日志库记录导致程序**崩溃**的分段错误和运行时错误的技术是什么？

语言是 C++。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T10:07:32.950

[这是打印回溯的解决方案，当您遇到 segfault](https://stackoverflow.com/a/77336/13767)时，例如当发生此类错误时您可以做什么。

这会给您留下将错误记录到远程库的问题。我建议保持信号处理程序尽可能简单并记录到本地文件，因为**你不能假设以前初始化的记录库**在发生分段错误时正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T11:07:48.090

我想给出一些解决方案：

1.  使用核心转储并启动守护程序来监视和收集核心转储并发送到您的主机。
2.  GDB（使用 GdbServer），您可以远程调试并在崩溃时查看回溯。 ![在此处输入图像描述](../Images/6d0e92be94465bbbeddc490ada478aa6.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:01:24.020

> 通过远程日志库记录导致程序崩溃的分段错误和运行时错误的技术是什么？

[根据我的经验](https://stackoverflow.com/questions/7592025/debugging-bypassing-bsod-without-source-code)，在程序崩溃时尝试记录（远程或文件）调试消息可能不是很可靠，特别是如果 APP 将系统随之关闭：

1.  使用 TCP 连接，您可能会在系统崩溃时丢失最后几条消息。（TCP维护数据包顺序并使用纠错，AFAIK。所以如果应用程序刚刚退出，一些数据可能会在传输之前丢失）
2.  使用 UDP 连接，由于 UDP 的性质，您可能会丢失消息并无序接收它们
3.  如果您正在写入文件，操作系统可能会丢弃最近的更改（缓冲区未刷新，日志文件系统恢复到文件的早期状态）。
4.  每次通过 TCP/UDP 写入或发送消息后刷新缓冲区可能会导致每秒产生数千条消息的程序的性能损失。

据我所知，一个好主意是维护内存中的纯文本日志文件，并在程序崩溃后编写核心转储。这样您就可以在核心转储中找到日志文件的内容。写入内存日志也比写入文件或通过网络发送消息要快得多。或者，您可以使用某种“双重日志记录” - 立即将每条调试消息写入内存日志，然后将它们异步（在另一个线程中）发送到日志文件或通过网络。

异常处理：

特定于平台。在 Windows 平台上，您可以使用[_set_se_handlers](http://msdn.microsoft.com/en-us/library/a45x8asx%28v=vs.80%29.aspx)并使用它来生成[回溯](https://stackoverflow.com/questions/77005/how-to-generate-a-stacktrace-when-my-gcc-c-app-crashes)或将平台异常转换为 c++ 异常。

在 linux 上，我认为您应该能够为 SIGSEGV 信号创建处理程序。

虽然捕获 segfault 听起来是一个不错的主意，但与其尝试从程序中处理它，不如生成核心转储和保释。在 Windows 上，您可以在程序中使用[MiniDumpWriteDump](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx)，在 linux 系统上可以配置为在 shell 中生成核心转储（`ulimit -c`我认为？）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T10:05:48.813

要捕获 segfault 信号并相应地发送日志，请阅读这篇文章：

[捕获“段错误”有什么意义吗？](https://stackoverflow.com/questions/1955347/is-there-a-point-to-trapping-segfault)

如果事实证明您无法从信号处理程序发送日志（可能在初始化记录器之前发生崩溃），那么您可能需要将信息写入文件并让外部实体远程发送。

**编辑**：放回一些原始信息以便能够远程发送核心文件

为了能够远程发送核心文件，您需要一个外部实体（与崩溃的进程不同的进程），它将“等待”核心文件并在它们出现时远程发送它们。（可能使用 scp）此外，崩溃进程可以捕获 segfault 信号并通知监控进程发生了崩溃，并且核心文件将很快可用。

# c# - Win8 应用程序中的计时器计数

> ID：10496396
> 
> 赞同：1
> 
> 时间：2012-05-08T09:56:39.793
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我正在构建一个具有 3 个按钮（Button1、Button2 和 StartButton）和计时器的 win8 应用程序。Button1 和 Button2 被禁用。如果单击 StartButton，则启用 Button1，并计算 20 秒内的单击次数并显示在 textblock1 中。计时器结束后，Button1 被禁用，Button2 被启用，点击计数并显示在 textblock2 中。我的问题是 Button1 而不是 Button2 的计时器正确计时。启用 button2 后，计时器会变得更快。有人能帮我吗？我的代码如下：

```
 private int count1=0;
    private int count2=0;
    private int clickCounter = 0;
    private int timeLeft;
    private DispatcherTimer timer;

    private void StartTimer()
    {
        if (this.timer != null)
        {
            this.StopTimer();
        }
        DispatcherTimer timer = new DispatcherTimer();
        timer.Interval = new TimeSpan(0,0,0,1);
        timer.Tick += timer_Tick;
        timer.Start();

    }

    private void StopTimer()
    {
        if (this.timer != null)
        {
            this.timer.Stop();
            this.timer = null;
        }
    }

    public void timer_Tick(object sender, object args)
    {

        if (timeLeft > 0)
        {
            timeLeft = timeLeft - 1;
            timerTextBlock.Text = Convert.ToString(timeLeft);
            this.StartButton.IsEnabled = false;
        }
        else
        {
            StopTimer();
            if (clickCounter==2)
            {
                ShowResult();
                this.Button2.IsEnabled = false;
                this.StartButton.IsEnabled = false;
            }
            else
            {
                myMsg.Text = "Time's up!";
                this.Button1.IsEnabled = false;
                this.StartButton.IsEnabled = true;
            }
        }
    }

    private void Button1_Click(object sender, Windows.UI.Xaml.RoutedEventArgs e)
    {
        // TODO: Add event handler implementation here.
        count1++;
        this.textblock1.Text=count1.ToString();

    }

    private void Button2_Click(object sender, Windows.UI.Xaml.RoutedEventArgs e)
    {
        count2++;
        this.textblock2.Text=count2.ToString();
    }
    public void ResetTimer()
    {
            timeLeft = 20;
    }
    private void StartButton_Click(object sender, RoutedEventArgs e)
    {
        clickCounter++;
        if (textblock1.Text == "0")
        {
            ResetTimer();
            StartTimer();
            this.Button1.IsEnabled = true;
        }
        else
        {
            ResetTimer();
            StartTimer();
            this.Button2.IsEnabled = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T11:18:46.910

每次调用`StartTimer`Method时`timer.Tick += timer_Tick;`都会执行。这意味着如果您`StartTimer`第二次调用，每个刻度都会调用两个事件。拆分您的代码，如：

```
private void InitTimer()
{
    timer = new DispatcherTimer();
    timer.Interval = new TimeSpan(0,0,0,1);
    timer.Tick += timer_Tick;
}

private void StartTimer()
{
    timer.Start();
} 
```

并只调用 InitTimer 。另一种选择是`if (this.timer != null)`使用代码注销您的事件`timer.Tick -= timer_Tick;` 我看到的第二点是命名冲突：您的`StartTimer`方法中有一个私有全局变量计时器和一个变量计时器。

// 编辑：完整更新的代码：

```
private int count1=0;
private int count2=0;
private int clickCounter = 0;
private int timeLeft;
private DispatcherTimer timer;

private void StartTimer() {
    if (timer == null) {
        timer = new DispatcherTimer();
        timer.Interval = new TimeSpan(0,0,0,1);
        timer.Tick += timer_Tick;
    }
    timer.Stop();
    timeLeft = 20;
    timer.Start();
}

public void timer_Tick(object sender, object args) {
    if (timeLeft > 0) {
        timeLeft = timeLeft - 1;
        timerTextBlock.Text = Convert.ToString(timeLeft);
    } else {
        timer.Stop();
        if (clickCounter==2) {
            ShowResult();
            Button2.IsEnabled = false;
            StartButton.IsEnabled = false;
        } else {
            myMsg.Text = "Time's up!";
            Button1.IsEnabled = false;
            StartButton.IsEnabled = true;
        }
    }
}

private void Button1_Click(object sender, Windows.UI.Xaml.RoutedEventArgs e) {
    count1++;
    textblock1.Text=count1.ToString();
}

private void Button2_Click(object sender, Windows.UI.Xaml.RoutedEventArgs e) {
    count2++;
    textblock2.Text=count2.ToString();
}

private void StartButton_Click(object sender, RoutedEventArgs e) {
    clickCounter++;
    StartButton.IsEnabled = false;
    if (textblock1.Text == "0"){
        Button1.IsEnabled = true;
        StartTimer();
    } else {
        Button2.IsEnabled = true;
        StartTimer();
    }
} 
```

# solid-principles - 需要 SOLID 编程原则的示例

> ID：10496400
> 
> 赞同：-1
> 
> 时间：2012-05-08T09:56:53.203
> 
> 标签：solid-principles

有人可以给我一些使用 SOLID（鲍勃·马丁叔叔）原则的完整应用程序的例子，最好是相关的测试？我目前正在学习 SOLID 原则，当我有一个很好的例子要学习时，我发现学习一些东西会更容易。我可以自己谷歌一下，但目前我可以判断哪些使用 SOLID 原则效果最好。

我主要是一名 C# 开发人员，但可以混淆许多其他语言

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:20:14.580

我刚刚写了一篇关于 SOLID 原则的[博客文章。](http://blog.gauffin.org/2012/05/solid-principles-with-real-world-examples/)C# 中的代码示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:04:30.920

买书：[http ://www.amazon.co.uk/Software-Development-Principles-Patterns-Practices/dp/0132760584/ref=sr_1_2?ie=UTF8&qid=13364714​​18&sr=8-2](http://www.amazon.co.uk/Software-Development-Principles-Patterns-Practices/dp/0132760584/ref=sr_1_2?ie=UTF8&qid=1336471418&sr=8-2)

写得好，代码示例等。

# facebook-graph-api - 如何将 Facebook 应用列入白名单以通过图形 API 发送私人收件箱消息

> ID：10496402
> 
> 赞同：4
> 
> 时间：2012-05-08T09:56:56.090
> 
> 标签：facebook-graph-api, message, whitelist, inbox

有很多人问如何通过graph api发送私人收件箱消息，我搜索了很长时间，答案是否定的。原因是“应用程序必须在白名单中”

替代解决方案是通过聊天 api (xampp) 发送。但这不是我的解决方案。聊天 api 不支持因为 html 消息。

我知道 dropbox 可以做到，请问如何在 Facebook 中将我的应用列入白名单以发送收件箱消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:23:22.127

我对正在开发的应用程序有相同的要求，但我无法找到任何关于如何进入“白名单”的明确指示。

但是，我怀疑您需要申请进入[首选营销开发人员计划](http://developers.facebook.com/preferredmarketingdevelopers/ "首选营销开发人员计划")

至少，这就是 Facebook 所说的你需要做的事情才能获得白名单以使用 Ads API：

Ads API 是一个受限平台，只能由列入白名单的应用程序访问。您可以了解有关该计划的更多信息并在线申请。您需要为每个应用单独申请。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:25:59.920

我现在也在为这个问题苦苦挣扎了一段时间。

我已经在 facebook.stackoverflow.com 网站上发布了我的问题：http: [//facebook.stackoverflow.com/questions/13587441/facebook-invite-friends-functionality-for-multiple-recipients-custom-message](http://facebook.stackoverflow.com/questions/13587441/facebook-invite-friends-functionality-for-multiple-recipients-custom-message)

没有办法处理这个问题吗？高度赞赏帮助！

# c++ - c++中的二维对象数组？

> ID：10496404
> 
> 赞同：0
> 
> 时间：2012-05-08T09:56:59.303
> 
> 标签：c++, arrays, pointers

二维数组，例如：`Cell **scoreTable`. 分配后：

```
scoreTable = new Ceil*[10]; 
for(int i = 0 ;i<10;i++) 
scoreTable[i] = new Ceil[9]; 
```

我想保存这样的值：`scoreTable[i][j]= new Ceil(i,j)`在堆中，这在 c++ 中不起作用。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:00:10.127

`scoreTable[i][j]= new Ceil(i,j)`. 您正在尝试放入`Cell*`Cell。

您必须创建二维指针数组：

```
auto scoreTable = new Ceil**[10]; 
for(int i = 0 ;i<10;i++) 
    scoreTable[i] = new Ceil*[9]; 
```

但更好的是使用`vector`：

```
std::vector< std::vector<Ceil*> > table;
table.resize(10);
for (int i = 0; i < 10; ++i)
{
    table[i].resize(9, NULL);
}
table[3][4] = new Ceil(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:02:35.697

一旦你像这样分配了你的数组，你就已经有了一个 2D 数组`Cell`，所以你不需要使用`new`关键字来更改值。

如果你给你的`Cell`类一个类似的方法`SetValue(i,j)`，那么你可以像这样使用它：`scoreTable[i][j].SetValue(i,j);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:25:28.447

我想建议`std::vector`改用。跟踪起来要容易得多。

您可以将上面的所有代码替换为

```
std::vector< std::vector< Cell> > scoreTable(10, std::vector<Cell>(9)); 
```

这将创建`scoreTable`，这是一个包含 10 个元素的向量`vector<Cell>`，每个元素包含 9 个单元格。换句话说，所需的 2D 表。

您以相同的方式访问元素。`scoreTable[i][j]`，其中 i 从 0 到 9，j 从 0 到 8。

如果你想扩展一个新行，只需说：

```
 scoreTable.push_bach(std::vector<Cell>(9)); 
```

对于新列：

```
for(size_t row = 0; row < scoreTable.size(); ++row) {
  scoreTable[row].push_back(Cell());
} 
```

不需要`new`or `delete`。

# maven - Eclipse插件开发：将插件项目转换为maven项目

> ID：10496405
> 
> 赞同：0
> 
> 时间：2012-05-08T09:57:01.473
> 
> 标签：maven, pom.xml, eclipse-plugin

我开发了一个 Eclipse 插件项目。现在我需要将其转换为 Maven 项目，以便可以使用 pom.xml 处理依赖项等。有没有办法将插件项目转换为 Maven 项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:39:00.563

右键单击您的项目 -> 配置 -> 转换为 Maven 项目

你需要[eclipse m2e](http://eclipse.org/m2e/)来做到这一点

顺便提一句。如果你不知道：如果你想使用 Maven 和 Eclipse 插件，你也需要 tycho。见[日食第谷](http://eclipse.org/tycho)

# macos - 在 osx-Lion 中创建并在 osx-snow-leopard 中访问的 postgres 9.1.3 数据的控制文件错误中的校验和不正确

> ID：10496408
> 
> 赞同：6
> 
> 时间：2012-05-08T09:57:11.510
> 
> 标签：macos, postgresql, postgresql-9.1

尝试使用在另一台 mac 机器中创建的数据启动 postgres 时出现以下错误。致命：控制文件中的校验和不正确

postgres 版本是 9.1.3，在雪豹中初始化的数据在 Lion 中不起作用，反之亦然。对于 postgres v9.0.1，我没有遇到这个问题。postgres 9.1.3 中是否有任何配置可以解决此问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T10:05:35.383

You can't move between systems with different operating systems. The compiled versions may have different alignment etc. Do a dump on the old and a restore on the new.

# networking - Java Servlet request.getRequestURL() 记录异常字符串

> ID：10496410
> 
> 赞同：2
> 
> 时间：2012-05-08T09:57:28.390
> 
> 标签：networking, servlets

在我的一个在公共域中运行的 servlet 中，我从 request.getRequestURL() 方法中得到了一个异常的字符串日志。我一直在记录详细信息，发现一个条目是“http://answers.yahoo.com”。有人可以帮助我分析这是如何发生的以及如何实现它。理想情况下，日志应该是用户或设备调用 servlet 所使用的浏览器中的 URL 地址。

例如，如果映射到 IP 的服务器的注册名称是[http://www.alphabeta.com/x_serv?a=2](http://www.alphabeta.com/x_serv?a=2)，则日志应该是 alphabeta.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:35:21.797

你到底想记录什么？

如果您只需要主机名，请使用`getServerName()`接口中的方法。`javax.servlet.ServletRequest`它返回请求发送到的服务器的主机名。

如果您想获取不带任何参数的 URL，该 URL 由您的 servlet 引起，请与`getServerName()`和 方法结合使用。接口中`getServletPath()`的方法返回此请求的 URL 中调用 servlet 的部分，但不包含任何额外的路径信息或查询字符串。`getServletPath()``javax.servlet.http.HttpServletRequest`

以下代码片段将确定您页面的绝对 URL：

```
String uri = request.getRequestURI();
if (request.getQueryString() != null) {
   uri += '?' + request.getQueryString();
}
URL reconstructedUrl = new URL(request.getScheme(),
                           request.getServerName(),
                           request.getServerPort(),
                           uri);
logger.info("The full URL: " + reconstructedUrl.toString()); 
```

哪里`URL`class 来自 package `java.net`。

# java - 为什么在 TreeSet 的 last-method 中，经验结果与理论数据不同？

> ID：10496411
> 
> 赞同：1
> 
> 时间：2012-05-08T09:57:30.927
> 
> 标签：java, algorithm, benchmarking

我们正在对 Java 数据结构进行一些实证测试，并且得到了一些我们无法正确解释的结果。

例如，当我们测试 TreeSet 的 last-method 的时间要求应该是恒定的时，在 TreeSet 的大小超过 30 000 后，我们会遇到运行时间的颠簸。我们运行 last-method 时，treeSet 中每个大小的元素数量都会增加 1000 次然后取结果的中值。

相关代码为：

```
import java.io.IOException;
import java.lang.management.ManagementFactory;
import java.lang.management.ThreadMXBean;
import java.util.ArrayList;
import java.util.Collections;
import jxl.write.WriteException;

public class TestRunner {

public void test(Testable testeCase, String outputFileName, Integer... initArgs){
    ExcelWriter excel = null;
    try {
        excel = new ExcelWriter(outputFileName);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    ThreadMXBean threadMxBean = ManagementFactory.getThreadMXBean();
    int measurementsPoints = 35;
    //calculate median to every dataset size

    for(int j = 0; j < measurementsPoints; j++){
        int testCount = 1000;
        long startTime; 
        long endTime; 
        //double sum = 0;
        ArrayList<Integer> results = new ArrayList<Integer>();

        for (int i = 0; i < testCount; i++) {

            //initialize tested data structure
            testeCase.initTestRun(initArgs);

            startTime = threadMxBean.getCurrentThreadCpuTime();
            // run tested method
            testeCase.runTestMethod();
            endTime = threadMxBean.getCurrentThreadCpuTime();

            results.add((int)(endTime - startTime));

        }
        Collections.sort(results);
        excel.addNumber(j, 5, new Double(initArgs[0]));
        excel.addNumber(j, 6, new Double(results.get(testCount / 2)));

        //increase the size of the data structure 10, 15, 20, 30, 40, 60, 80...
        if(j % 2 == 0){
            initArgs[0]  = (int)(initArgs[0]  * 1.5);
        }
        else{
            initArgs[0] = (int)(initArgs[0]  / 3 * 4);
        }

    }
    try {
        excel.write();
    } catch (WriteException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

import java.util.TreeSet;

public class TreeSetLastTest implements Testable {

private TreeSet<Integer> values;

@Override
public void initTestRun(Integer... integers) {
    Integer initialCapacity = integers[0];
    values = new TreeSet<Integer>();
    for(int i = Integer.MIN_VALUE; i < Integer.MIN_VALUE + initialCapacity; i++){
        values.add(i);
    }

}

@Override
public void runTestMethod() {
    values.last();
}

} 
```

当 treeSet 中的元素数量在 10-30 000 个元素之间时，测量的中位数为 3000 ns。当 treeSet 的大小增加到 120 000 个元素时，测量的中值增加到 13 000 ns，然后当元素数量增加到超过一百万时保持不变。那么导致增加的原因可能是什么，或者时间单位太小以至于差异在现实中毫无意义。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T10:08:34.333

Well I assume it's worth an answer.

Your assumption that a `TreeSet` has O(1) `last()` is erroneous. First the documentation doesn't state anything of this kind and in fact a `TreeSet` in java is implemented using a `TreeMap`which is an implementation of a red-black tree.

A red-black tree is similar to an AVL-tree which may be better known in that it guarantees `O(log n)` for lookups, i.e. makes sure the tree doesn't degenerate into a linked list. Basically your `last()` lookup has `O(log n)` complexity so will get worse as it gets larger.

Presumably because of caching, maybe even paging effects you don't see the `O(log n)` in your benchmark directly.

That's similar to LinkedLists and arrays - in theory linked lists have lots of things going for them, in practice linked lists are one of the worst data structures you can use on modern CPUs. Constant factors do matter after all and memory access patterns are *large* constant factors.

# php - 如何仅更新日期的月份和年份值？

> ID：10496414
> 
> 赞同：-1
> 
> 时间：2012-05-08T09:57:49.253
> 
> 标签：php, javascript, jquery

我有一个静态日期 28-04-2012，。我想更新日期到新月 28 日的唯一月份。因此，如果日期是`28-05-2012`，则`28-06-2012`，`28-07-2012`依此类推。

我也想更新我到 2013 年的年份。但总是保持日期为 28？有人可以告诉我如何使用 js 或 php 来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:01:29.613

```
<?php
$date = '28-04-2012';

echo date('j-m-Y', strtotime("1 month", strtotime($date))) . "\n";
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:03:58.723

```
$current_date = "28-04-2012";
$next_month = strtotime($current_date . "+1month");

echo date('Y-m-d', $next_month); 
```

我猜最简单的把戏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T10:02:09.583

见这里：[http ://www.roseindia.net/tutorial/php/phpdate/php-date-add-1-month.html](http://www.roseindia.net/tutorial/php/phpdate/php-date-add-1-month.html)

```
$todayDate = date("Y-m-d");// current date
echo "Today: ".$todayDate."<br>";

//Add one day to today
$dateOneMonthAdded = strtotime(date("Y-m-d", strtotime($todayDate)) . "+1 month");

echo "After adding one month: ".date('l dS \o\f F Y', $dateOneMonthAdded)."<br>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T20:35:20.400

人们在建议`strtotime()`，但我不得不说我非常不喜欢这个功能。它不是为日期算术而设计的，但它是旧版本 PHP 中唯一可用的选项，因此每个人都使用它。

[`DateTime`在 PHP5类](http://php.net/manual/en/class.datetime.php)中可以找到更好的解决方案，尤其是[`DateTime::Add`](http://www.php.net/manual/en/datetime.diff.php)方法（也称为`date_add()`函数）。

添加了使用`strtotime() instead of`DateTime::Add() `is if you're using a version of PHP older than 5.3, since this is when the`Add` 方法的唯一原因。但如果是这种情况，您的首要任务应该是升级您的 PHP。

# php - 连接到 ftp 服务器

> ID：10496421
> 
> 赞同：1
> 
> 时间：2012-05-08T09:58:13.330
> 
> 标签：php, codeigniter, ftp

我正在尝试使用`ftp_connect`and连接到多个 ftp 服务器`ftp_login`。我的代码很简单

```
 foreach ($ftp_accounts as $ftp_account) {
     $connect_id = $ftp_account['server'];
                $user = $ftp_account['user'];
                $pass = $ftp_account['password'];
                echo 'Ftp Server: '.$connect_id.'<br> Username: '.$user. '<br> Password: '.$pass.'<br>';
                if (ftp_login($connect_id, $user, $pass)){
                    echo "| Connected to server " . $connect_id . " as " . $user . '<br>';
                } else {
                    echo "Couldn't connect to $connect_id as $user \n";
                }
 } 
```

我的数据库中有一个表，其中包含多个服务器及其凭据。但我写的代码给了我以下错误（警告）信息

```
 ftp_login() expects parameter 1 to be resource, string given 
```

它转到每个服务器的 else 语句。

知道我做错了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:09:34.227

`ftp_connect()`在尝试登录之前，您需要使用连接到服务器。此外，您需要`ftp_connect()`在尝试登录之前检查结果以确保它能够连接。如果不是，那么它会返回`FALSE`，您不应**继续**尝试登录。

```
foreach ($ftp_accounts as $ftp_account) {
     $connect_id = ftp_connect($ftp_account['server']);

    if($connect_id !== false)
    {

       $user = $ftp_account['user'];
       $pass = $ftp_account['password'];
       echo 'Ftp Server: '.$connect_id.'<br> Username: '.$user. '<br> Password: '.$pass.'<br>';
       if (ftp_login($connect_id, $user, $pass)){
             echo "| Connected to server " . $connect_id . " as " . $user . '<br>';
          } else {
             echo "Couldn't connect to $connect_id as $user \n";
        } 
    } else {
       echo 'failed to connect to server';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:01:45.340

代替

```
<?php
$connect_id = $ftp_account['server'];
?> 
```

和

```
<?php
$connect_id = ftp_connect($ftp_account['server']);
?> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:47:24.963

让我回答我的问题。首先，我收到的所有回复都是要检查此类问题的所有正确选项，我非常感谢这些回复，但您还需要检查的一件事是您的服务器防火墙是否允许连接到任何传出的 ftp 服务器？如果它不允许您连接，那么即使您的代码中的所有内容都正确编写，您也将无法连接到服务器。因此，在测试您的代码之前，请检查您的服务器防火墙设置。

当我允许所有传出连接时，它对我有用。

再次感谢您的回复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T10:03:11.360

您忘记使用[`ftp_connect`](http://php.net/manual/en/function.ftp-connect.php)函数连接到服务器，假设在变量中`$ftp_account['server']`您有有效的 FTP 服务器主机地址。

```
foreach ($ftp_accounts as $ftp_account) {
    $connect_id = ftp_connect($ftp_account['server']);
    if ($connect_id === false) {
        echo "Failed to connect to FTP server";
        continue;
    }
    $user = $ftp_account['user'];
    $pass = $ftp_account['password'];
    echo 'Ftp Server: ' . $ftp_account['server'] . '<br> Username: ' . $user . '<br> Password: ' . $pass . '<br>';
    if (ftp_login($connect_id, $user, $pass)){
        echo "| Connected to server " . $ftp_account['server'] . " as " . $user . '<br>';
    } else {
        echo "Couldn't connect to " . $ftp_account['server'] . " as " . $user . "\n";
    }
} 
```

# macruby - MacRuby NSBeginAlertSheet 调用给出未知：[BUG] 未知 Objective-C 立即数：0x1 (nil)

> ID：10496423
> 
> 赞同：0
> 
> 时间：2012-05-08T09:58:32.407
> 
> 标签：macruby

作为 MacRuby 初学者，我正在学习本[教程](http://developer.apple.com/library/mac/#featuredarticles/UsingMacRuby/_index.html#//apple_ref/doc/uid/TP40010259)，并希望添加一个下拉表以在用户尝试从应用程序中删除条目时发出警告。

遵循[此处](http://macdevcenter.com/pub/a/mac/2001/10/05/cocoa.html?page=2)的代码，在 Obj-C 中是

```
- (IBAction)deleteRecord:(id)sender 
{
  NSString *title = @"Warning!";
  NSString *defaultButton = @"Delete";
  NSString *alternateButton = @"Don't Delete";
  NSString *otherButton = nil;
  NSString *message = @"Are you sure you want to delete the selected record(s)?";

  if ( [tableView numberOfSelectedRows] == 0 )
    return;

  NSBeep();
  NSBeginAlertSheet(title, defaultButton, alternateButton, otherButton, mainWindow, self, @selector(sheetDidEnd:returnCode:contextInfo:), nil, nil, message);
} 
```

我在 MacRuby 中有：

```
def removeFriend(sender)
  return if @friendsTableView.numberOfSelectedRows == 0
  title = 'Warning!'
  defaultButton = 'Delete'
  alternateButton = 'Don\'t Delete'
  otherButton = nil
  s = @friendsTableView.numberOfSelectedRows > 1 ? 's' : ''
  message = "Are you sure you want to delete the selected record#{s}?"
  NSBeginAlertSheet(title, defaultButton, alternateButton, otherButton, @mainWindow, self, :'alertDidEnd:returnCode:contextInfo:', nil, nil, message)
end 
```

和`alertDidEnd:returnCode:contextInfo`：

```
def alertDidEnd(sheet, returnCode:rCode, contextInfo:cInfo)
  <array handling code>
end 
```

当它运行时，当单击链接到的按钮时，我会得到一个下拉表`removeFriend`，但是如果我单击“删除”，我的应用程序会崩溃并出现以下错误：

```
unknown: [BUG] unknown Objective-C immediate: 0x1 (nil)

MacRuby 0.12 (ruby 1.9.2) [universal-darwin10.0, x86_64]

(lldb) 
```

我在实现方法的方式上做错了什么`didAlertEnd`，或者这实际上是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:40:18.963

显然是一个 MacRuby 错误： http: [//www.macruby.org/trac/ticket/1368](http://www.macruby.org/trac/ticket/1368)

# svn - 如何向 vss 用户销售颠覆主干/分支/标签结构？

> ID：10496424
> 
> 赞同：1
> 
> 时间：2012-05-08T09:58:34.583
> 
> 标签：svn, locking, visual-sourcesafe, labels

我正在尝试与两组开发人员管理相互冲突的要求。一组正在做 java 应用程序，其中项目有多个文件，另一组在单个文件上工作，例如 oracle 表单、报告等。这两个组目前都在 vss 上，java 人尝试了 git，但 oracle/vss 人讨厌它——主要是缺乏锁定. 因此，作为一种妥协，我尝试了 svn 并实现了 svn:needs-lock 以便处理该问题。但下一个障碍是销售标签/标签等价物，例如[像 SourceSafe 这样的 Subversion “标签”](https://stackoverflow.com/questions/879651/subversion-label-like-sourcesafe)

但是AFAIK至少没有这个结构我不能做标签：

*   我的独立文件项目/主干/我的独立文件
*   我的独立文件项目/标签

对于使用在大型 oracle 表单目录中查看他们的文件然后直接获取、签入和标记它的开发人员来说，这会造成痛苦。

关于如何处理这个问题的任何建议？我开发了一个小脚本来为任意文件设置上述结构，并且我已经考虑在 vss 到 svn 迁移期间创建它。

还有其他想法吗？不幸的是，颠覆**和**VSS 给我带来了管理问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:22:20.997

您不必*使用*标签/分支/主干结构运行 SVN，如果您的用户对旧的 VSS 样式布局感到满意并且他们的工作流程运行良好，那么没有真正的理由迁移到任何其他布局。

您可以以接近 VSS 的方式运行 SVN，所以我会从这样做开始。启用“需要锁定”自动道具，并让它们松动。然后，一旦他们习惯了 Tortoise 和稀疏目录检出（让他们成为描述如何比较常见 VSS 操作与 SVN 的文档），您就可以开始建议对他们的工作流程进行一些改进，例如将他们发布的代码分支到新分支，你把它放在恰好被称为“标签”的目录中......然后你可以建议在一个名为“分支”的单独目录中进行一些工作。然后，您可以告诉他们合并以及不必使用其他人签出的代码进行微小更改的好处。

人们不喜欢变化，这很公平，所以慢慢地引入它。更改为 SVN 并更改它们的工作方式并不好。只需两个简单的步骤就更有可能成功。

# ruby-on-rails - 如何将文本日期转换为 Rails 中的范围日期？

> ID：10496426
> 
> 赞同：1
> 
> 时间：2012-05-08T09:58:42.143
> 
> 标签：ruby-on-rails

抱歉，如果标题不清楚，我真的不知道如何解释清楚。

在 Rails 应用程序中，我从第三方提供商的 API 中提取用户数据。属性之一是用户的生日。

我将散列数据存储在我的数据库中，并且在某些情况下，需要在视图中显示用户的生日。

问题是生日没有格式化为日期。在散列中，它的格式为 mm/dd/yyyy。这意味着我通常的日期范围格式不适用于它。

鉴于我正在从散列数据列中提取生日，如下所示

```
<%= @user.hashed_data["info"]["birthday"] %> 
```

处理此问题的最佳/最有效方法是什么，以便我可以显示本地化日期格式？

我是否需要拆分`/`符号，然后将生成的字符串重新组合为日期？还是我过于复杂了？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:18:56.843

尝试：

```
Date.strptime('01/31/2011', '%m/%d/%Y') 
# => #<Date: 2011-01-31 (4911185/2,0,2299161)> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:13:41.320

将纯文本转换为日期或日期时间的最简单方法是使用[长期 gem](https://github.com/mojombo/chronic)。

可以传递给慢性解析器的一个非常有用的参数是`:endian_precedence`. 有关更多详细信息，请参阅[我的答案](https://stackoverflow.com/questions/2317569/does-chronic-have-any-options-of-date-format-it-parses-ruby/7931246#7931246)。

问候， 多里安

# objective-c - 指定初始化器并调用它

> ID：10496429
> 
> 赞同：1
> 
> 时间：2012-05-08T09:58:52.580
> 
> 标签：objective-c, ios

我对指定初始化程序有一般性问题。我有一个类，从那里我想调用一个初始化程序，但在我开始用传递数据填充我的@properties 之前，我想将数据设为默认值。例如：

```
-(id)initWithDefault:(NSDictionary*)defaultTemplate
{
    self = [super init];

    _fontColor = [defaultTemplate objectForKey:@"color"];
    _fontSize = [[defaultTemplate objectForKey:@"size"] intValue];

    return self;
}

-(id)initWithTemplate:(NSDictionary*)template
{
    self = [self initWithDefault:myDefaultTemplate];

    //now i doing something with my template

    return self;

} 
```

这是防止 null @properties 的一种方法吗？这是对指定初始化程序的正确使用吗？当然，您可以假设 myDefaultTemplates 不为空，并且键中没有空对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:02:19.690

这对我来说似乎很好。我会使用安全的方式（如下所示），但否则你的代码很好。

```
-(id)initWithTemplate:(NSDictionary*)template 
{
    if(self = [self initWithDefault:myDefaultTemplate]) {

        //now i doing something with my template

    }

    return self;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:33:20.663

鉴于 _fontColor 和 _fontSize 变量是您的属性的局部变量，您的实现非常好。

adig 的建议只是对您已经实施的内容的增强。当您的对象由于任何原因未分配时，此检查会处理这种情况。

# delphi - 如何使用 Delphi 将 Access 数据库导出到 Excel

> ID：10496430
> 
> 赞同：1
> 
> 时间：2012-05-08T09:58:55.277
> 
> 标签：delphi, excel-2007, delphi-xe2

我正在使用 Delphi 编写数据库应用程序，并且需要将数据从 access 数据库导出到 Excel 电子表格。我可以使用 docmd.spreadsheet 管理反向序列（导入 excel 以访问）。工作 100%。但是我不知道如何设置导出的参数。我需要帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:12:54.543

检查这个示例代码，我也推荐你阅读[`DoCmd.TransferSpreadsheet Method`](http://msdn.microsoft.com/en-us/library/bb214134%28office.12%29.aspx)文档。

```
{$APPTYPE CONSOLE}

uses
  SysUtils,
  ActiveX,
  ComObj;

procedure ExportDataAccess(const AccessDb, TableName, ExcelFileName:String);
Const
  acQuitSaveAll             = $00000001;
  acExport                  = $00000001;
  acSpreadsheetTypeExcel9   = $00000008;
  acSpreadsheetTypeExcel12  = $00000009;
var
 LAccess : OleVariant;
begin
 //create the COM Object
 LAccess := CreateOleObject('Access.Application');
 //open the access database
 LAccess.OpenCurrentDatabase(AccessDb);
 //export the data
 LAccess.DoCmd.TransferSpreadsheet( acExport, acSpreadsheetTypeExcel9, TableName, ExcelFileName, True);
 LAccess.CloseCurrentDatabase;
 LAccess.Quit(1);
end;

begin
 try
    CoInitialize(nil);
    try
      ExportDataAccess('C:\Datos\Database1.accdb','Sales','C:\Datos\MyExcelFile.xls');
      Writeln('Done');
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

# iphone - Aurasma 不释放音频资源

> ID：10496433
> 
> 赞同：3
> 
> 时间：2012-05-08T09:59:01.580
> 
> 标签：iphone, augmented-reality, android-audiomanager, aurasma

我正在编写一个 iphone 应用程序，其中我还使用 Aurasma sdk 来增强现实。其他事情的应用程序使用麦克风。一开始麦克风工作正常。如果我调用 Aurasma 然后返回，音频资源不会从 Aurasma 释放（并且麦克风无法正常工作）。你知道如何解决这个问题吗？当然，我们已经在启动 aurasma 之前调用了 [audioManager stopAudioRecording] 并在从 aurasma 返回时调用了 [audioManager startAudioRecording]。

# datamapper - 如何使用 Datamapper 将一个表中的一行用作另一个表中的属性？

> ID：10496437
> 
> 赞同：0
> 
> 时间：2012-05-08T09:59:21.390
> 
> 标签：datamapper, ruby-datamapper

我指的具体实例是here。我想使用 Grid 表中的一行作为 Driver 表中 Grid 属性的值。但是我无法在 Grid 表中获取更新以持续到 Driver 表上的 Grid 属性我想使用 Race 表中的一行作为 Driver 表中 Race 属性的值。

这是数据映射器的代码。

```
require "rubygems"
require "json"
require "sinatra"
require "sinatra/reloader"
require "sqlite3"
require "data_mapper"

DataMapper::setup(:default, "sqlite3://#{Dir.pwd}/season.db")

class Driver
    include DataMapper::Resource
    property :id, String, :key => true
    property :ptd, Integer
    property :races, Integer
    property :grid, Object
    property :race, Object
    property :hcScore, Integer
    property :domScore, Integer
end

class Grid
    include DataMapper::Resource
    property :id, String, :key => true
    property :AUS_Q, Integer
    property :MAL_Q, Integer
    property :CHI_Q, Integer
    property :BAH_Q, Integer
end

class Race
    include DataMapper::Resource
    property :id, String, :key => true
    property :AUS_R, Integer
    property :MAL_R, Integer
    property :CHI_R, Integer
    property :BAH_R, Integer
end

class Team

    include DataMapper::Resource
    property :id, String, :key =>  true
    property :domScore, Integer
    property :drivers, Object
end

DataMapper.finalize.auto_migrate! 
```

在 irb 我会做类似的事情

```
irb(main):001:0> require "./season.rb"
=> true
irb(main):002:0> v = Driver.create id: "VET"
=> #<Driver @id="VET" @ptd=nil @races=nil @grid=nil @race=nil @hcScore=nil @domScore=nil>
irb(main):003:0> g = Grid.create id: "VET"
=> #<Grid @id="VET" @AUS_Q=nil @MAL_Q=nil @CHI_Q=nil @BAH_Q=nil>
irb(main):004:0> v.grid = Grid.get "VET"
=> #<Grid @id="VET" @AUS_Q=nil @MAL_Q=nil @CHI_Q=nil @BAH_Q=nil>
irb(main):005:0> v.save
=> true
irb(main):006:0> g.update(:AUS_Q => 6)
=> true
irb(main):007:0> v
=> #<Driver @id="VET" @ptd=nil @races=nil @grid=#<Grid @id="VET" @AUS_Q=nil @MAL_Q=nil @CHI_Q=nil @BAH_Q=nil> @race=nil @hcScore=nil @domScore=nil>
irb(main):008:0> Grid.get "VET"
=> #<Grid @id="VET" @AUS_Q=6 @MAL_Q=nil @CHI_Q=nil @BAH_Q=nil>
irb(main):009:0> AUS_Q = 6 in the Grid table but in the Driver table it continues to be nil! 
```

如您所见 - Driver 表中的 AUS_Q 继续为零，即使我在 Grid 表中将其设置为 6。

我可能做错了，有一种更简单的方法可以做到这一点。我鼓励所有的更正和打击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:57:51.740

我建议您使用`belongs_to`来创建资源之间的关联，并使用身份映射，如下所示：

```
require "sqlite3"
require "data_mapper"

class Driver
    include DataMapper::Resource
    property :id, String, :key => true
    belongs_to :grid, :required => false
end

class Grid
    include DataMapper::Resource
    property :id, String, :key => true
    property :AUS_Q, Integer
end

DataMapper::setup(:default, "sqlite3://#{Dir.pwd}/season.db")
DataMapper.finalize.auto_migrate!

DataMapper.repository(:default) do
  v = Driver.create id: "VET"
  g = Grid.create id: "VET"
  v.grid = Grid.get "VET"
  v.save
  g.update(:AUS_Q => 6)
  puts v.grid.AUS_Q
  puts Grid.get("VET").AUS_Q
end 
```

您在由 发起的块中所做的一切都`DataMapper.repository(:default) do`将使用身份映射。因此，数据库中的相同对象将导致内存中的相同对象。

# processing - 如果 size() 小于 130 像素，处理避免帧灰色边框？

> ID：10496438
> 
> 赞同：0
> 
> 时间：2012-05-08T09:59:22.487
> 
> 标签：processing

我需要构建一个框架非常宽但高度压缩的草图，例如 1024x100 像素尺寸。但是，任何小于 130 像素的宽度或高度都会出现灰色边框。

例如下面的例子：

```
size(100,100);
background(#FF00FF); 
```

如附件示例所示，草图的紫色区域周围将有一个 15 像素的灰色边框。

请问有什么办法可以避免吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:55:39.493

找到了。问题源于`PApplet`每个草图都扩展，并且最小窗口高度和宽度被硬编码为值 128。

我发现的解决方法是不断调用`frame.setSize()`该`draw()`方法。

或者，另一种解决方案可能是扩展`PApplet`方法来克服硬编码，但对我来说，前面提到的解决方法效果很好。

# iphone - 如何隐藏按下音量增大/减小按钮时弹出的消息

> ID：10496441
> 
> 赞同：4
> 
> 时间：2012-05-08T09:59:33.983
> 
> 标签：iphone, objective-c, ios, ios5

我正在尝试制作一个在按下音量增大/减小按钮时使用事件的应用程序。我正在使用这样的事件：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(volumeChanged:) 
                                             name:@"AVSystemController_SystemVolumeDidChangeNotification" 
                                           object:nil]; 
```

当按下其中一个音量按钮时，会调用函数“volumeChanged：”。

我的问题是，当按下其中一个音量按钮时，我还会收到显示当前音量栏状态的默认通知。我想隐藏这条消息，所以当我按下音量按钮时不会出现任何内容。有人知道该怎么做吗？

ps 我不关心音量本身。我只关心按钮事件和按下其中一个时弹出的消息。

谢谢。

![此通知](../Images/d26aad4387c74ad1c7e85e1c1ce7d38b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:48:01.247

**编辑：**
现在我明白了。查看此[答案](https://stackoverflow.com/a/7888977/344036)及其评论。

~~文档是您的朋友，请查看[MPVolumeView 类参考](https://developer.apple.com/library/ios/DOCUMENTATION/MediaPlayer/Reference/MPVolumeView_Class/Reference/Reference.html)。
从 4.2 开始，您可以使用两个新属性来管理控件的可见性：`showsVolumeSlider`和`showsRouteButton`.~~

PS 欢迎来到 StackOverflow :) 记得使用搜索框并接受解决您问题的答案；）

# mysql - MySQL在存储过程中内存不足

> ID：10496444
> 
> 赞同：1
> 
> 时间：2012-05-08T09:59:57.133
> 
> 标签：mysql, stored-procedures, temp-tables

今天，我有一个 MySQL 存储过程，其中包含大约 20 条创建临时表语句并且没有其他任何内容。但是当我跑的时候，商店会抛出一条消息“内存不足”。
这里是商店代码：

```
CREATE DEFINER = 'thanhnt'@'192.168.6.31' PROCEDURE `test_out_of_memory`()
    NOT DETERMINISTIC
    CONTAINS SQL
    SQL SECURITY DEFINER
    COMMENT ''
BEGIN

SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;

#SET max tmp size
SET @@tmp_table_size = 1073741824; 

drop table if exists tbllogging;
create TABLE tbllogging(t TIMESTAMP, step int) ENGINE=INNODB;

DROP TABLE IF EXISTS norep_campaigntmp;
CREATE TEMPORARY TABLE `norep_campaigntmp` (
    `campaignid` MEDIUMINT(9)  NOT NULL DEFAULT '0' ,  
    `num` MEDIUMINT(9)  NOT NULL DEFAULT '0'          
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,0;
DROP TABLE IF EXISTS norep_campaign_NB_tmp;
CREATE TEMPORARY TABLE `norep_campaign_NB_tmp` (
    `campaignid` MEDIUMINT(9)  NOT NULL DEFAULT '0' ,  
    `num` MEDIUMINT(9)  NOT NULL DEFAULT '0'          
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,1;
DROP TABLE IF EXISTS norep_zonebannertmp;
CREATE TEMPORARY TABLE `norep_zonebannertmp` (
    `zoneid` SMALLINT(6)  NOT NULL DEFAULT '0' ,
    `block` TINYINT(4)  NOT NULL DEFAULT '0' ,
    `location` TINYINT(4)  NOT NULL DEFAULT '0' ,
    `bannerid` MEDIUMINT(9)  NOT NULL DEFAULT '0' ,
     KEY `location` (`location`),
     KEY `bannerid` (`bannerid`),
     KEY `block` (`block`),
     KEY `zoneid` (`zoneid`)             
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,2;
DROP TABLE IF EXISTS norep_zonebannertmp_bk;
CREATE TEMPORARY TABLE `norep_zonebannertmp_bk` (
    `zoneid` SMALLINT(6)  NOT NULL DEFAULT '0' ,
    `block` TINYINT(4)  NOT NULL DEFAULT '0' ,
    `location` TINYINT(4)  NOT NULL DEFAULT '0' ,
    `bannerid` MEDIUMINT(9)  NOT NULL DEFAULT '0' ,
     KEY `location` (`location`),
     KEY `bannerid` (`bannerid`),
     KEY `block` (`block`),
     KEY `zoneid` (`zoneid`)             
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,3;
DROP TABLE IF EXISTS norep_zonebanner_delete_tmp;
CREATE TEMPORARY TABLE `norep_zonebanner_delete_tmp` (
    `zoneid` SMALLINT(6)  NOT NULL DEFAULT '0' ,
    `block` TINYINT(4)  NOT NULL DEFAULT '0' ,
    `location` TINYINT(4)  NOT NULL DEFAULT '0' ,
    `bannerid` MEDIUMINT(9)  NOT NULL DEFAULT '0' ,
     KEY `location` (`location`),
     KEY `bannerid` (`bannerid`),
     KEY `block` (`block`),
     KEY `zoneid` (`zoneid`)             
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,4;
DROP TABLE IF EXISTS norep_zonebanner_cur_tmp;
CREATE TEMPORARY TABLE `norep_zonebanner_cur_tmp` (
    `zoneid` SMALLINT(6)  NOT NULL DEFAULT '0' ,
    `location` TINYINT(4)  NOT NULL DEFAULT '0' ,
    `bannerid` MEDIUMINT(9)  NOT NULL DEFAULT '0' ,
     KEY `location` (`location`),
     KEY `bannerid` (`bannerid`),
     KEY `zoneid` (`zoneid`)             
)ENGINE=INNODB;
INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,5;
DROP TABLE IF EXISTS norep_grouptmp;
CREATE TEMPORARY TABLE `norep_grouptmp` (
    `groupid` SMALLINT(6)  NOT NULL DEFAULT '0' ,  
    `w` MEDIUMINT(9)  NOT NULL DEFAULT '0'          
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,6;
DROP TABLE IF EXISTS norep_block_delete_tmp;
CREATE TEMPORARY TABLE `norep_block_delete_tmp` (
    `zoneid` INT(9)  NOT NULL DEFAULT '0' ,  
    `location` TINYINT(4)  NOT NULL DEFAULT '0' , 
    `block` TINYINT(4)  NOT NULL DEFAULT '0' ,
     KEY `zoneid` (`zoneid`),
     KEY `location` (`location`),
     KEY `block` (`block`)          
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,7;
DROP TABLE IF EXISTS norep_banner_channel_tmp;
CREATE TEMPORARY TABLE `norep_banner_channel_tmp` (
    `bannerid` INT(9)  NOT NULL DEFAULT '0' ,  
    `channelid` INT(9)  NOT NULL DEFAULT '0' ,  
    `location` TINYINT(4)  NOT NULL DEFAULT '0',
      KEY `channelid` (`channelid`)            
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,8;
DROP TABLE IF EXISTS norep_user_zone_tmp;
CREATE TEMPORARY TABLE `norep_user_zone_tmp` (
    `userid` INT(9)  NOT NULL DEFAULT '0' ,  
    `zoneid` INT(9)  NOT NULL DEFAULT '0' ,  
    `location` TINYINT(4)  NOT NULL DEFAULT '0' ,      
      KEY `userid` (`userid`) ,           
      KEY `zoneid` (`zoneid`) ,      
      KEY `location` (`location`)           
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,9;
DROP TABLE IF EXISTS norep_user_zone_loc_tmp;
CREATE TEMPORARY TABLE `norep_user_zone_loc_tmp` (
    `userid` INT(9)  NOT NULL DEFAULT '0' ,  
    `zoneid` INT(9)  NOT NULL DEFAULT '0' ,  
    `loc` TINYINT(4)  NOT NULL DEFAULT '0' ,  
    `num` TINYINT(4)  NOT NULL DEFAULT '0'          
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,10;
DROP TABLE IF EXISTS norep_bannertmp_KH;
CREATE TEMPORARY TABLE `norep_bannertmp_KH` (
    `campaignid` MEDIUMINT(6)  NOT NULL DEFAULT '0' , 
    `isexpire` MEDIUMINT(6)  NOT NULL DEFAULT '0' , 
    `bannerid` MEDIUMINT(6)  NOT NULL DEFAULT '0' ,
     KEY `bannerid` (`bannerid`) ,  
     KEY `campaignid` (`campaignid`)           
)ENGINE=INNODB;
INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,11;
DROP TABLE IF EXISTS norep_bannertmp_NB;
CREATE TEMPORARY TABLE `norep_bannertmp_NB` (
    `groupid` MEDIUMINT(6)  NOT NULL DEFAULT '0' ,
    `campaignid` MEDIUMINT(6)  NOT NULL DEFAULT '0' , 
    `bannerid` MEDIUMINT(6)  NOT NULL DEFAULT '0' ,
     `isexpire` MEDIUMINT(6)  NOT NULL DEFAULT '0' ,    
     KEY `bannerid` (`bannerid`) ,  
     KEY `campaignid` (`campaignid`)           
)ENGINE=INNODB;
INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,12;
DROP TABLE IF EXISTS norep_bannertmp1;
CREATE TEMPORARY TABLE `norep_bannertmp1` (
    `groupid` INT(9)  NOT NULL DEFAULT '0' , 
    `userid` INT(9)  NOT NULL DEFAULT '0' , 
    `campaignid` INT(9)  NOT NULL DEFAULT '0' , 
    `bannerid` INT(9)  NOT NULL DEFAULT '0' ,    
    `location` TINYINT(4)   ,
    `typegroup` TINYINT(4) DEFAULT 0 ,  
    `w` INT  DEFAULT 0 , 
     KEY `campaignid` (`campaignid`) ,         
     KEY `bannerid` (`bannerid`) ,  
     KEY `groupid` (`groupid`) , 
     KEY `userid` (`userid`) ,           
     KEY `location` (`location`) ,      
     KEY `typegroup` (`typegroup`) 

)ENGINE=INNODB;
INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,13;

DROP TABLE IF EXISTS norep_101_tmp;
CREATE TEMPORARY TABLE `norep_101_tmp` (
    `userid` INT , 
    `bannerid` INT ,
    `ctr` decimal(6,3) NOT NULL,
    `views` INT ,
     KEY `userid` (`userid`) ,  
     KEY `bannerid` (`bannerid`)            
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,14;
DROP TABLE IF EXISTS norep_banner_zone_in;
CREATE TEMPORARY TABLE `norep_banner_zone_in` (
    `channelid` INT , 
    `zoneid` INT , 
    `location` TINYINT(4) , 
    `bannerid` INT ,
    `CTR` DECIMAL(6,3) ,
    `money` INT,
     KEY `channelid` (`channelid`) ,  
     KEY `zoneid` (`zoneid`) ,  
     KEY `bannerid` (`bannerid`) ,  
     KEY `location` (`location`)           
)ENGINE=MYISAM;
INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,15;
DROP TABLE IF EXISTS norep_banner_zone_no_gen_tmp;
CREATE TEMPORARY TABLE `norep_banner_zone_no_gen_tmp` (
    `zoneid` INT , 
    `location` TINYINT(4) , 
    `bannerid` INT ,
    `userid` INT ,
     KEY `userid` (`userid`) ,  
     KEY `zoneid` (`zoneid`) ,  
     KEY `bannerid` (`bannerid`) ,  
     KEY `location` (`location`)           
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,16;
DROP TABLE IF EXISTS norep_banner_zone_no_gen_tmp1;
CREATE TEMPORARY TABLE `norep_banner_zone_no_gen_tmp1` (
    `zoneid` INT , 
    `location` TINYINT(4) , 
    `bannerid` INT ,
    `userid` INT ,
     KEY `userid` (`userid`) ,  
     KEY `zoneid` (`zoneid`) ,  
     KEY `bannerid` (`bannerid`) ,  
     KEY `location` (`location`)           
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,17;
DROP TABLE IF EXISTS norep_banner_zone_no_gen_today_tmp;
CREATE TEMPORARY TABLE `norep_banner_zone_no_gen_today_tmp` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `zoneid` INT , 
    `location` TINYINT(4) , 
    `bannerid` INT ,
    `userid` INT ,
     KEY `id` (`id`) , 
     KEY `userid` (`userid`) ,  
     KEY `zoneid` (`zoneid`) ,  
     KEY `bannerid` (`bannerid`) ,  
     KEY `location` (`location`)           
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,18;
DROP TABLE IF EXISTS norep_banner_zone_no_gen_today_tmp1;
CREATE TEMPORARY TABLE `norep_banner_zone_no_gen_today_tmp1` (
    `id` int(11) NOT NULL,
    `zoneid` INT , 
    `location` TINYINT(4) , 
    `bannerid` INT ,
    `userid` INT ,
     KEY `id` (`id`) ,  
     KEY `userid` (`userid`) ,  
     KEY `zoneid` (`zoneid`) ,  
     KEY `bannerid` (`bannerid`) ,  
     KEY `location` (`location`)           
)ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,19;
DROP TABLE IF EXISTS norep_ssv_tmp;
CREATE TEMPORARY TABLE `norep_ssv_tmp` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `userid` int(11) unsigned NOT NULL,
  `bannerid` int(11) unsigned NOT NULL,
  `money` int(11) unsigned NOT NULL,
  `ctr` decimal(6,3) NOT NULL,
  `createtime` datetime DEFAULT NULL,
  `typegroup` tinyint(4) NOT NULL DEFAULT '0'  ,
  KEY `id` (`id`) ,
  KEY `typegroup` (`typegroup`) ,  
  KEY `userid` (`userid`) 
) ENGINE=INNODB;
INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,20;
DROP TABLE IF EXISTS norep_ssv_tmp1;
CREATE TEMPORARY TABLE `norep_ssv_tmp1` (
   `id` int(11) NOT NULL,
  `userid` int(11) unsigned NOT NULL,
  `bannerid` int(11) unsigned NOT NULL,
  `money` int(11) unsigned NOT NULL,
  `ctr` decimal(6,3) NOT NULL,
  `createtime` datetime DEFAULT NULL,
  `typegroup` tinyint(4) NOT NULL DEFAULT '0'  ,
  KEY `typegroup` (`typegroup`) ,  
  KEY `userid` (`userid`) 
) ENGINE=INNODB;

INSERT INTO tbllogging SELECT CURRENT_TIMESTAMP,21; 

SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ; 
INSERT INTO tbllogging select CURRENT_TIMESTAMP, 22;

SELECT * FROM tbllogging;
END; 
```

[http://pastebin.com/q6sETytk](http://pastebin.com/q6sETytk)

MySQL 5.5 内存：48 GB

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:28:41.833

似乎您的所有存储过程都在删除并重新创建一些临时表。

如果是这种情况，那么您应该将所有`DROP`and`CREATE TABLE`语句`TRUNCATE TABLE`替换为（并在不存在的地方使用 create）。

您可能会从所有`DROP`被调用的语句中耗尽内存，因为`DROP`可以回滚

# ios - 如何从视频中提取图像？

> ID：10496445
> 
> 赞同：6
> 
> 时间：2012-05-08T09:59:59.943
> 
> 标签：ios, image, video, uiimagepickercontroller

谁能告诉我如何从视频中提取图像？到目前为止，我尝试过的是遵循这些：

*   [获取 iPhone 视频缩略图](https://stackoverflow.com/questions/2171086/getting-iphone-video-thumbnails)
*   [从 iPhone SDK 中的视频 url 或数据获取缩略图](https://stackoverflow.com/questions/1347562/getting-thumbnail-from-a-video-url-or-data-in-iphone-sdk)
*   [如何从 iPhone SDK 中的视频中提取屏幕截图？](https://stackoverflow.com/questions/2201399/how-do-i-extract-a-screenshot-from-a-video-in-the-iphone-sdk)
*   iPhone 使用 AVFoundation ，[iphone sdk > 3.0](https://stackoverflow.com/questions/1259316/iphone-sdk-3-0-video-thumbnail/1301311#1301311)[从视频中读取 UIimage（帧） 。](https://stackoverflow.com/questions/4199879/iphone-read-uiimage-frames-from-video-with-avfoundation)[视频缩略图？](https://stackoverflow.com/questions/1259316/iphone-sdk-3-0-video-thumbnail/1301311#1301311)

等等，然后我做了这个：

**源代码：**

```
- (void)viewDidLoad
{
    videoPicker = [[UIImagePickerController alloc] init];
    [videoPicker setDelegate:self];
    videoPicker.sourceType =  UIImagePickerControllerSourceTypePhotoLibrary;
    NSArray *mediaTypesAllowed = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    videoPicker.mediaTypes = mediaTypesAllowed;
    videoPicker.view.hidden = YES;
}

-(IBAction)imgPickerController
{
    [self presentModalViewController:videoPicker animated:YES];
    videoPicker.view.hidden = NO;
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    // e.g.
    NSString *tempFilePath = [(NSURL *)[info valueForKey:UIImagePickerControllerMediaURL] absoluteString];

    NSLog(@"didFinishPickingMediaWithInfo: %@",tempFilePath);

    // e.g. /private/var/mobile/Applications/D1E784A4-EC1A-402B-81BF-F36D3A08A332/tmp/capture/capturedvideo.MOV
    tempFilePath = [tempFilePath substringFromIndex:16];

    NSLog(@"didFinishPickingMediaWithInfo: %@",tempFilePath);
    NSLog(@"===Try to save video to camera roll.===");
    NSLog(@"UIVideoAtPathIsCompatibleWithSavedPhotosAlbum: %@",UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(tempFilePath)? @"YES":@"NO");

    // Check if the video file can be saved to camera roll.
    if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(tempFilePath))
    {
        // YES. Copy it to the camera roll.
        UISaveVideoAtPathToSavedPhotosAlbum(tempFilePath, self, @selector(video:didFinishSavingWithError:contextInfo:),(__bridge_retained void *)tempFilePath );
    }

    [self dismissModalViewControllerAnimated:YES];
}

- (void)video:(NSString *)videoPath didFinishSavingWithError:(NSError *)error contextInfo:(NSString *)contextInfo
{
    NSLog(@"didFinishSavingWithError--videoPath in camera roll:%@",videoPath);
    NSLog(@"didFinishSavingWithError--videoPath in temp directory:%@",contextInfo);

    // The thumbnail jpg should located in this directory.
    NSString *thumbnailDirectory = [[contextInfo stringByDeletingLastPathComponent] stringByDeletingLastPathComponent];

    // Debug info. list all files in the directory of the video file.
    // e.g. /private/var/mobile/Applications/D1E784A4-EC1A-402B-81BF-F36D3A08A332/tmp/capture
    NSLog(@"%@",[contextInfo stringByDeletingLastPathComponent]);
    NSLog(@"%@",[[[NSFileManager defaultManager] contentsOfDirectoryAtPath:[contextInfo stringByDeletingLastPathComponent] error:nil] description]);

    // Debug info. list all files in the parent directory of the video file, i.e. the "~/tmp" directory.
    // e.g. /private/var/mobile/Applications/D1E784A4-EC1A-402B-81BF-F36D3A08A332/tmp
    NSLog(@"%@",thumbnailDirectory);
    NSLog(@"%@",[[[NSFileManager defaultManager] contentsOfDirectoryAtPath:thumbnailDirectory error:nil] description]);
    ///////////////////

    // Find the thumbnail for the video just recorded.
    NSString *file,*latestFile;

    NSDate *latestDate = [NSDate distantPast];
    NSDirectoryEnumerator *dirEnum = [[NSFileManager defaultManager] enumeratorAtPath:[[contextInfo stringByDeletingLastPathComponent]stringByDeletingLastPathComponent]];

    // Enumerate all files in the ~/tmp directory
    while (file = [dirEnum nextObject])
    {
        // Only check files with jpg extension.
        if ([[file pathExtension] isEqualToString: @"jpg"]) 
        {
            NSLog(@"***latestDate:%@",latestDate);
            NSLog(@"***file name:%@",file);
            NSLog(@"***NSFileSize:%@", [[dirEnum fileAttributes] valueForKey:@"NSFileSize"]);
            NSLog(@"***NSFileModificationDate:%@", [[dirEnum fileAttributes] valueForKey:@"NSFileModificationDate"]);

            // Check if current jpg file is the latest one.
            if ([(NSDate *)[[dirEnum fileAttributes] valueForKey:@"NSFileModificationDate"] compare:latestDate] == NSOrderedDescending)
            {
                latestDate = [[dirEnum fileAttributes] valueForKey:@"NSFileModificationDate"];
                latestFile = file;
                NSLog(@"***latestFile changed:%@",latestFile);
            }
        }
    }

    // The thumbnail path.
    latestFile = [NSTemporaryDirectory() stringByAppendingPathComponent:latestFile];
    NSLog(@"****** The thumbnail file should be this one:%@",latestFile);

    UIImage *img = [[UIImage alloc] initWithContentsOfFile:latestFile];
    UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(150, 150, 100, 100)];
    [imgView setImage:img];
    imgView.layer.borderWidth = 2.0;
    [self.view addSubview:imgView];

    // Your code ...
    // Your code ...
    // Your code ...
} 
```

做完这一切之后，我仍然没有到达我想到达的地方。我仍然无法获取图像。我现在被卡住了。请任何人帮助我！！！谢谢 :)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T10:39:17.177

从电影中提取缩略图的简单方法是使用`MPMoviePlayerController`类及其`- thumbnailImageAtTime:timeOption:`方法。

例如，您有一个文件路径 url：

```
NSURL *tempFilePathURL = ...;
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL: tempFilePathURL];
UIImage *thumbnail = [player thumbnailImageAtTime:THUMBNAIL_TIME timeOption:MPMovieTimeOptionExact];
[player release]; 
```

我在我的代码中使用了它并且它有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-05T09:35:48.217

**thumbnailImageAtTime:timeOption**自 iOS 7.0 起被弃用。这是一个替代方案

```
+ (UIImage *)extractFirstFrameFromFilepath:(NSString *)filepath
{
    AVURLAsset *movieAsset = [[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:filepath] options:nil];
    AVAssetImageGenerator *assetImageGemerator = [[AVAssetImageGenerator alloc] initWithAsset:movieAsset];
    assetImageGemerator.appliesPreferredTrackTransform = YES;
    CGImageRef frameRef = [assetImageGemerator copyCGImageAtTime:CMTimeMake(1, 2) actualTime:nil error:nil];
    return [[UIImage alloc] initWithCGImage:frameRef];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-29T06:57:57.060

**斯威夫特版本**

```
 func getThumbOfVideo(fileURL: URL) -> UIImage? {
        let movieAsset = AVURLAsset(url: fileURL)
        let assetImageGenerator = AVAssetImageGenerator(asset: movieAsset)
        assetImageGenerator.appliesPreferredTrackTransform = true

        var thumbnail: UIImage?
        do {
            let cgImage = try assetImageGenerator.copyCGImage(at: CMTimeMake(value: 0, timescale: 1000), actualTime: nil)
            thumbnail = UIImage(cgImage: cgImage)
        } catch {
            print(error)
        }

        return thumbnail
    } 
```

如果您需要整个视频中的**缩略图数组，请使用***AVAssetImageGenerator*类的以下 API

```
func generateCGImagesAsynchronously(forTimes requestedTimes: [NSValue], 
                  completionHandler handler: @escaping AVAssetImageGeneratorCompletionHandler) 
```

对于所需的缩略图图像分辨率，请设置以下属性

> assetImageGenerator.maximumSize

# android - 根据图片大小改变图片分辨率

> ID：10496453
> 
> 赞同：2
> 
> 时间：2012-05-08T10:00:39.020
> 
> 标签：android, image, bitmap, resolution

我正在编写一个应用程序，它使用手机的相机拍照，然后显示它。问题是，对于具有高分辨率摄像头的手机，这会导致应用程序崩溃，因此我使用 isSampleSize 降低了分辨率，从而解决了这个问题。但是现在我遇到了具有较低分辨率相机的手机的问题-图片质量很差。有没有办法检查图像内存消耗是多少，并据此决定我是否要降低质量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:36:37.590

为了重新调整我的图片，因为我在图像高度上有限制，我使用下面的代码来调整它的大小。但我不想调整 bmp 的大小，除非它高于我的身高要求，希望你能使用它。（使用流来获取我的照片）

```
 if (stream != null) {
                img = BitmapFactory.decodeStream(stream, null, o);
                float imgHeight = (float) img.getHeight();
                Display display = ((WindowManager) ctx.getSystemService(
                        Context.WINDOW_SERVICE)).getDefaultDisplay();
                float displayHeight = (float) (display.getHeight()-50);
                if(imgHeight>displayHeight) {
                    float scaleFactor = displayHeight/imgHeight;
                    img = Bitmap.createScaledBitmap(img, (int)(img.getWidth()*scaleFactor), (int)(imgHeight*scaleFactor), false);
                }
                saveBitmap(new File(getSdPath() + location), img);
            } 
```

# android - Webview 无法通过 javascript 在 htc one x 上加载内容

> ID：10496463
> 
> 赞同：2
> 
> 时间：2012-05-08T10:01:42.313
> 
> 标签：android, webview, webkit

我已经构建了一个将数据发布到我的网络服务的应用程序。作为响应，我将获得页面的 html 代码。页面的真实内容将使用 javascript 加载。

通过 javascript 加载内容时，webview 停止加载，我收到以下消息：

标签：webcore 文本：[webViewCore::webkitDraw] 延迟消息 ====

我找不到有关此警告的任何解释。

在任何 Nexus 设备上，我的解决方案都很好用，但在这个 htc 设备上却不行......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:07:46.433

带有 HTC Sence 4.0 的 HTC 设备无法处理 web 视图中 javascript 的相对路径。

更改为绝对路径将解决该问题。

# .net - 两个 .net 应用程序之间的日期序列化

> ID：10496464
> 
> 赞同：1
> 
> 时间：2012-05-08T10:01:42.593
> 
> 标签：.net, json, serialization, nancy

我有一个使用以下序列化代码的 Nancy JSON REST 服务...

`FormatterExtensions.AsJson(this.Response, insightManager.CaseSummary(x.caseId));`

然后由...脱毒

```
 public static T ParseResponseForObject<T>(string response)
    {
        var javaScriptSerializer = new JavaScriptSerializer();
        try
        {
            return javaScriptSerializer.Deserialize<T>(response);
        }
        catch (Exception ex)
        {
            throw new Exception(response, ex);
        }
    } 
```

并且insightManager.CaseSummary(x.caseId) 代码返回一个包含可为空的日期时间的类的实例。

问题是在序列化/反序列化过程中，日期会损失一个小时，我认为这是某种 UTC 偏移量。这有点烦人，因为无论如何我只想要日期部分，所以看起来所有日期都是前一天。

我已经看到很多关于在 javascript 中修复 tis 的帖子，但是当我的代码的两个部分都使用“标准”序列激光器时，我不确定如何应用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:47:27.807

所以，我最终找到了答案。本质上，我只需要在反序列化日期后调用 .ToLocalTime() 以确保获得所需的结果。一个很好的解释为什么在这里[http://www.west-wind.com/weblog/posts/2008/Sep/03/Watch-out-for-Date-Kind-in-JSON-Deserialization](http://www.west-wind.com/weblog/posts/2008/Sep/03/Watch-out-for-Date-Kind-in-JSON-Deserialization)

但是，简而言之，当您序列化为 JSON 时，日期始终会转换为 UTC 时间，因此您从反序列化返回的日期将始终是 UTC 日期，因此您需要将其转换回本地时间。

以防万一其他人有这个问题，我已经调整了我的`ParseResponseForObject<T>`函数以始终将本地时间用于任何 DateTime 或 DateTime？...

```
 public static T ParseResponseForObject<T>(string response)
    {
        var javaScriptSerializer = new JavaScriptSerializer();
        try
        {
            var obj = javaScriptSerializer.Deserialize<T>(response);

            var props = obj
                .GetType()
                .GetProperties(BindingFlags.Instance | BindingFlags.Public);

            foreach (var pi in props)
            {
                if (pi.PropertyType == typeof(DateTime))
                {
                    var origDt = (DateTime)pi.GetValue(obj, null);
                    pi.SetValue(obj, origDt.ToLocalTime(), null);
                }
                else if (pi.PropertyType == typeof(DateTime?))
                {
                    var origDt = (DateTime?)pi.GetValue(obj, null);

                    if (origDt.HasValue)
                    {
                        pi.SetValue(obj, origDt.Value.ToLocalTime(), null);
                    }
                }
            }

            return obj;
        }
        catch (Exception ex)
        {
            throw new Exception(response, ex);
        }
    } 
```

# .net - 将 2 个列表相加并在 f# 中获得第 3 个，请更正我的语法

> ID：10496467
> 
> 赞同：0
> 
> 时间：2012-05-08T10:01:48.677
> 
> 标签：.net, f#

我正在努力实现这一目标：

```
7 2 3 5
10 12 20

res = 10 + max(7,2) ; 12 + max(2,3); 20 + max(3,5) 
```

到目前为止，这是我的代码：

```
//prevline.count is always currLine.count+1

let getResLine currLine prevLine =
   let rec loop resLine prevLine' = function
       |[] -> resLine
       |hd::tl -> loop (hd + (max (List.nth prevLine' 0) (List.nth prevLine' 1)))::resLine (List.tail prevLine') tl
   loop [] prevLine currLine 
```

但它不能编译，它告诉我一些类型不匹配的错误，可能更有经验的人可以看到我犯的一些明显的错误，请帮助

**编辑：**根据建议更新了我的代码，但它仍然无法正常工作

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T10:23:04.780

顺便说一句，您可能对另一种看待问题的方式感兴趣。从数字列表开始：

```
let nums1 = [7; 2; 3; 5]
let nums2 = [10; 12; 20] 
```

然后

```
let res = nums1 
          |> Seq.pairwise 
          |> Seq.map2 (fun a (b1, b2) -> a + max b1 b2) nums2 
```

这样做的好处是在语义上与您想要做的事情更加匹配。

**编辑：**使用`map2`而不是简化`zip`并`map`感谢@Daniel 和@JonHarrop。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T14:35:05.550

我不知道你的问题是什么，但衙役的回答可以简化为：

```
let res =
  Seq.pairwise nums1
  |> Seq.map2 (fun a (b1, b2) -> a + max b1 b2) nums2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T10:07:24.633

我想这就是你想要的

```
let getResLine currLine prevLine =
    let rec loop resLine prevLine = function
        |[] -> resLine
        |hd::tl -> loop (hd + max (List.nth prevLine 0) (List.nth prevLine 1)) (List.tail prevLine) tl
    loop 0 prevLine currLine 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T10:15:47.423

首先，如果要将列表拆分为头部和尾部，请使用 just `hd::tl`（不带括号）。

其次，您似乎并没有真正创建结果列表。而且我认为您在这里不需要蓄能器。

第三，我认为在两个函数中使用相同的变量名会令人困惑（因为您可以在内部函数中使用来自外部函数的变量）。

正因为如此，我会像这样重写你的函数：

```
let getResLine prevLine resLine =
    let rec loop prevLine' = function
        |[] -> []
        |hd::tl -> (hd + (max (List.nth prevLine' 0) (List.nth prevLine' 1)))::loop (List.tail prevLine') tl
    loop prevLine resLine 
```

尽管我认为使用高阶函数而不是显式递归会更具可读性：

```
let getResLine prevLine resLine =
    let maxes line = Seq.map2 (max) prevLine (List.tail prevLine)
    Seq.map2 (+) (maxes prevLine) resLine | Seq.toList 
```

我使用`Seq.map2`, insted of `List.map2`，因为后者不处理长度不等的列表。

# terminal - 如何在 Gnuplot 中启用 pngcairo 终端

> ID：10496469
> 
> 赞同：15
> 
> 时间：2012-05-08T10:02:05.480
> 
> 标签：terminal, png, gnuplot

我想将图形绘制为 PNG 格式（避免使用转换），但是我的 Gnuplot 发行版不提供 PNGCAIRO 终端。如何安装/启用它？我在 Mac OS X 10.6 上使用 Gnuplot 4.4，patchlevel 2。

```
[me]machine @ test $ gnuplot

G N U P L O T
Version 4.4 patchlevel 2
last modified Wed Sep 22 12:10:34 PDT 2010
System: Darwin 10.8.0

Copyright (C) 1986-1993, 1998, 2004, 2007-2010
Thomas Williams, Colin Kelley and many others

gnuplot home:     http://www.gnuplot.info
faq, bugs, etc:   type "help seeking-assistance"
immediate help:   type "help"
plot window:      hit 'h'

Terminal type set to 'x11'
gnuplot> set terminal pngcairo
                      ^
     unknown or ambiguous terminal type; type just 'set terminal' for a list 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-04T09:05:45.830

如果您正在运行[homebrew](http://mxcl.github.io/homebrew/)，则只需一个命令行即可安装所有内容

`brew install gnuplot --with-cairo`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T12:50:39.297

如果您的包管理器（例如`macports`或`fink`）没有合适的 gnuplot，那么您可能需要自己从源代码构建 gnuplot。Gnuplot 本身并不太难，但是如果您想要一个特定的终端（例如`pngcairo`），您需要在构建 gnuplot 之前自己下载并构建依赖项——在这种情况下`libcairo`。

Gnuplot 也有一个常规`png`终端，如果您的 gnuplot 发行版能够`libgd`在编译时找到或者您的包管理器包含它，则该终端应该存在。

判断您启用了哪些终端的简单方法是`set terminal`在交互式 gnuplot 窗口中输入。这将打印您的 gnuplot 能够使用的所有终端的列表（这取决于编译它的库）

对不起，如果这不是很多帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-27T21:34:32.763

我将 gnuplot 升级到 5.0.1 并遇到同样的问题。这就是我所做的。

要安装 gnuplot 5.0.1，请从[此处](http://sourceforge.net/projects/gnuplot/files/)下载源文件，然后：

```
#decompress it:
tar -xvf gnuplot-5.0.1.tar.gz

#install the dependency libraries for cairo-based terminals, like pdfcairo, pngcairo
sudo apt-get install libcairo2-dev
sudo apt-get install libpango1.0-dev

#build it:
cd gnuplot-5.0.1 
./configure 
make

#install it:
sudo make install 
```

# html - 多个重叠类中的 CSS 选择元素

> ID：10496472
> 
> 赞同：3
> 
> 时间：2012-05-08T10:02:10.393
> 
> 标签：html, css, css-selectors

我有一个包含如下结构的 html 页面：

```
<table class="pick">
    <tr>
        <td>
            <div class="class1">
                <div class="class2">
                    <div class="myClass"></div>
                </div>
            </div>
        </td>
        <td>
            <div class="class1">
                    <div class="myClass"></div>
            </div>
        </td>
    </tr>
</table> 
```

如何选择元素内的元素，`myClass`类在`pick`类内，但`div`元素的结构是可变的，如代码示例中所示？

我可能需要这样的东西：`.pick .something_else .myClass { /*style*/ }`但我不知道到底是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T10:04:01.607

`.pick .myClass { /* style */ }`将完成这项工作。无需添加所有类，直到您要选择的类。

# php - Jquery：如果表单为空白，则加载此查询

> ID：10496475
> 
> 赞同：1
> 
> 时间：2012-05-08T10:02:22.797
> 
> 标签：php, jquery

我有一些监控表单的 JQuery。基本上，对于每个 keyup，它都会调用一个 php 文件来搜索数据库。

```
$(document).ready(function() {
    $("#faq_search_input").watermark("Begin Typing to Search");

    $("#faq_search_input").keyup(function() {
        var faq_search_input = $(this).val();
        var dataString = 'keyword='+ faq_search_input;

        if (faq_search_input.length > 2) {
            $.ajax({
                type: "GET",
                url: "core/functions/searchdata.php",
                data: dataString,
                beforeSend: function() {
                    $('input#faq_search_input').addClass('loading');
                },
                success: function(server_response) {
                    $('#searchresultdata').empty();
                    $('#searchresultdata').append(server_response);
                    $('span#faq_category_title').html(faq_search_input);
                }
            });
        }

        return false;
    });
}); 
```

这很好用，但是它会`#searchresultdata`根据查询过滤结果。唯一的事情是，如果表单中没有任何内容，我希望它加载所有内容 - 用户不必单击表单来执行此操作，因此 a`.blur`不起作用。

PHP 文件很简单：

```
if(isset($_GET['keyword'])){} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:12:01.370

您应该在您的服务器上处理 [*] 搜索

```
$query = "SELECT Image, Manufacturer, Model FROM Device_tbl WHERE Manufacturer LIKE '%$keyword%' OR Model LIKE '%$keyword%";
if ($keyword=='*') $query = "SELECT Image, Manufacturer, Model FROM Device_tbl";

$(document).ready(function() {
    $("#faq_search_input").watermark("Begin Typing to Search");

    $("#faq_search_input").keyup(function() {
        var faq_search_input = $(this).val();
        if (faq_search_input =='') faq_search_input ='*';
        var dataString = 'keyword='+ faq_search_input;

        if (faq_search_input.length > 2 || faq_search_input=='*') {
            $.ajax({
                type: "GET",
                url: "core/functions/searchdata.php",
                data: dataString,
                beforeSend: function() {
                    $('input#faq_search_input').addClass('loading');
                },
                success: function(server_response) {
                    $('#searchresultdata').empty();
                    $('#searchresultdata').append(server_response);
                    $('span#faq_category_title').html(faq_search_input);
                }
            });
        }

        return false;
    });
    $("#faq_search_input").trigger('keyup');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:31:10.490

如果您最初加载*所有*结果，那么您是否可以不将其存储在 JavaScript 数组中并使用 JavaScript 过滤结果？这将在每次按键时为您节省一个 HTTP 请求，这只会有利于您网站的速度和资源使用。

编辑：样本。

```
<?php
    $sql = "SELECT `title` FROM `your_table`";
    $res = mysql_query($sql);
    $rows = array();
    while ($row = mysql_fetch_assoc($res)) {
        $rows[] = $row['title'];
    }
    echo '<script>var data = ' . json_encode($rows) . ';</script>';
?>
<form method="post" action="">
  <fieldset>
    <input type="text" name="search" id="faq_search_input" />
  </fieldset>
</form>
<script>
    // I presume you're using jQuery
    var searchInput = $('#faq_search_input');
    var searchResults = $('#searchresultdata');
    var tmpArray = data;

    // add all results to results div
    $.each(data, function(key, val) {
        searchResults.append('<li>' + val + '</li>');
    });

    searchInput.attr('placeholder', 'Begin typing to search');
    searchInput.keyup(function() {
        // hide any <li> in your #searchresultdata that don't match input
    });
</script> 
```

我不知道你的`serverresponse`变量中有什么，所以我只能猜测放入`searchresultdata` `<div>`. 您还需要修改 SQL 查询以匹配您的表名和列名。

**searchdata.php 的内容**

```
$query = "SELECT Image, Manufacturer, Model FROM Device_tbl WHERE Manufacturer LIKE '%$keyword%' OR Model LIKE '%$keyword%'";
if ($keyword=='*') $query = "SELECT Image, Manufacturer, Model FROM Device_tbl";
$result=mysql_query($query, $database_connection) or die(mysql_error());

if($result){
    if(mysql_affected_rows($database_connection)!=0){
          while($row = mysql_fetch_object($result)){
?>
     <div class="hold-cont">
        <div class="holder">
            <div class="image-hold" >
                <img class="image-icon" src="<? echo $deviceimg.($row->Image); ?>"/>
</div>
        </div>
        <div class="device-name devicename-txt"><? echo($row->Manufacturer. ' ' .$row->Model);  ?></div>
    </div>
     <?
    }
    }else {
        echo 'No Results for :"'.$_GET['keyword'].'"';
    }

}
}else {
    echo 'Parameter Missing';
} 
```

# javascript - 模糊事件处理程序被 jquery preventDefault() 方法阻止

> ID：10496477
> 
> 赞同：1
> 
> 时间：2012-05-08T10:02:38.240
> 
> 标签：javascript, jquery, html, onblur

我正在开发一个交互式 Web 应用程序，目前在[http://picselbocs.com/projects/goalcandy](http://picselbocs.com/projects/goalcandy)上设置（用户：demo@demo.com，密码：demo）。它允许您将包含图像和/或文本的项目从左侧边栏中拖到右侧的工作区，并调整它们的大小/编辑它们等等。

要编辑已创建对象的文本，您只需单击文本字段，标题或评论。该`<span>`元素被替换为`<textarea>`，然后您可以通过它编辑内容。当“blur”事件发生时，textarea 消失，它的值被添加到`<span>`元素中。*问题是单击对象的图像（如果它同时具有图像和文本字段）会阻止触发“模糊”事件。*

我使用以下代码段来防止图像与父对象分开拖动，并且刚刚发现这是导致问题的原因。但我不能不使用它，同时我必须不使用它：

```
$(document).on('mousedown dragstart', 'img', function(event) { event.preventDefault(); }); 
```

如何解决此问题并允许 onblur 事件处理程序在单击图像时运行，但同时保持默认的行为预防？

PS：`alert('blur')`调用允许我监控事件何时触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:13:18.063

你使用一些变量说

```
var locks = {}; 
locks.textarea_lock = false; 
```

然后点击 textarea set `locks.textarea_lock = true;`In image handler 检查这个锁：

```
$(document).on('mousedown dragstart', 'img', function(event) { 
    if (locks.textarea_lock) {
        return;
    }
    event.preventDefault(); 
}); 
```

在“模糊”处理程序中解锁变量`locks.textarea_lock = false;`。

# .net - 如何将托管的 .NET 程序集从内存中保存为 EXE/DLL 文件

> ID：10496478
> 
> 赞同：5
> 
> 时间：2012-05-08T10:02:44.870
> 
> 标签：.net, reflection, .net-assembly

我想知道是否有可能，如果有的话-如何将动态加载的.net程序集（它是从字节数组加载，而不是文件）保存到磁盘上的文件（exe / dll取决于程序集）并能够直接使用它（即，如果它是 exe，它将包含所有 exe 头文件并且是可运行的或至少是“可反射的”）。

加载的程序集实际上是否完全按照它们在文件中出现的方式存储在内存中，即所有 PE EXE 标头、资源等，即本质上是内存中的 exe/dll 文件，或者它们是否以不同的方式存储在内存中，所以它不会可以将某些内存区域保存为 dll/exe .net 程序集吗？也就是说，如果我可以使用图像的类比：您可以将 jpeg 文件作为位图加载到内存中，其中表示内存中图像的实际字节将与表示 jpeg 文件的实际字节完全不同。那么加载程序集也一样吗？

最后，我如何获得程序集实际位于进程内存中的内存地址（指针）？

澄清一下：我无法访问通过 Assembly.Load() 加载程序集的初始字节数组。

这是一个[相关的问题](https://stackoverflow.com/questions/2150913/is-it-possible-to-get-the-contents-of-a-loaded-net-assembly-as-a-byte-array-or)，但从答案中不清楚是否有办法将通过字节数组加载的程序集从内存转储到磁盘上的文件。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:36:55.290

首先，在 .NET 中，程序集可以由物理上位于不同位置的多个模块组成。所以只能在程序集中保存一个模块。大多数时候，您只需要主模块，因此您可以使用[`Assembly.ManifestModule`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.manifestmodule.aspx)它来获取它。

[`Marshal.GetHINSTANCE`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.gethinstance.aspx)[将返回模块的 HINSTANCE，即按照本文](http://blogs.msdn.com/b/oldnewthing/archive/2004/06/14/155107.aspx)的模块的基地址。尽管 MSDN 中的注释指出内存模块没有 HINSTANCE，但该方法似乎确实返回了内存模块的基地址。

所以现在我们有了模块的基地址。接下来要做的是确定模块的大小。最简单的方法是解析 PE 文件的[Section Headers](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680341%28v=vs.85%29.aspx)。例如：

```
Name   | Raw Size | Raw Address
.text  | 0x2000   | 0x400
.rsrc  | 0x400    | 0x2400
.reloc | 0x200    | 0x2800 
```

在这种情况下，模块的大小是最大的原始地址加上相应的原始大小，即 0x2A00。

# wpf - 使用 ScrollViewer 时 DataGrid 中的空列

> ID：10496481
> 
> 赞同：0
> 
> 时间：2012-05-08T10:02:52.013
> 
> 标签：wpf, scrollviewer

我有几个 tabitems，每个都有一个 DataGrid，我将 DataGrid 的属性“AutoGenerateColumns”设置为 false。TabControl 被 ScrollViewer 包围，这是问题所在，每个 TabItem 中的每个 DataGrid 最后都有一个空列。我用谷歌搜索，但得到的有用的东西很少。这是代码结构。

```
<ScrollViewer>
    <TabControl>
        <TabItem>
            <DataGrid AutoGenerateColumns="False">
            </DataGrid>
        </TabItem>
    </TabControl>
</ScrollViewer> 
```

谁能帮我 ？非常感谢。

**更新**

OK，其实情况是，我在一个TabControl里面有好几个TabItem，但是TabControl的宽度是有限的，所以我打算用ScrollViewer来“滚动”TabItem，这样我就可以清楚的看到这些TabItem，这就是导致它的原因当前的问题。我认为，ScrollViewer 会影响 TabItems 的**总**宽度，并间接影响每个 TabItem 中 DataGrid 的宽度，因此 DataGrid 中列的总宽度小于 DataGrid 的宽度，因此右侧有一个空列。

我尝试在 DataGrid 周围添加另一个 ScrollViewer，但失败了，右侧仍有空白部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:20:34.490

正如@ErenErsönmez 回答的那样，行为是DataGrid 的预期行为。要更改它，您需要设置列的宽度，其中至少一个设置为跨度。我使用以下方法使行跨越数据网格的宽度。

```
<TabControl>
    <TabItem Header="Tab Item 1">
        <DataGrid AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Column A" Width="Auto" />
                <!-- The following column grows to span the available area -->
                <DataGridTextColumn Header="Column B" Width="*" MinWidth="100" />
                <DataGridTextColumn Header="Column C" Width="Auto" />
            </DataGrid.Columns>
        </DataGrid>
    </TabItem>
<TabControl> 
```

就滚动 TabControl 本身而言，您能否发布一些有关您要执行的操作的详细信息。我相信，由于有大量选项卡，您正在尝试整个 TabControl 滚动。也许这样的事情（未经测试）会有所帮助[http://rickdoes.net/post/2009/11/06/WPF-Single-Row-Tab-Control.aspx](http://rickdoes.net/post/2009/11/06/WPF-Single-Row-Tab-Control.aspx)

# android - SQLiteDatabase.delete 中的 String[] whereArgs 格式是否正确？

> ID：10496485
> 
> 赞同：0
> 
> 时间：2012-05-08T10:03:15.537
> 
> 标签：android, sqlite, outofrangeexception

为什么这个代码：

```
String[] ids = {"5", "1", "3"};
db.delete(ACCOUNTS_TABLE, KEY_ROWID, ids); 
```

返回这个异常？

> android.database.sqlite.SQLiteBindOrColumnIndexOutOfRangeException：绑定或列索引超出范围：句柄 0x2069a88

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:16:49.160

尝试这个：

```
dbHelper.delete(ACCOUNT_TABLE, KEY_ROWID + "=?", ids); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:20:50.383

尝试删除单行。

```
String[] ids = {"5", "1", "3"};
for(int i=0; i<ids.length; i++)
{
    db.delete(ACCOUNTS_TABLE, ids[i], null);
} 
```

希望这可以帮助。

# matlab - “加载”的 Matlab 错误 - 知道可能导致它的原因吗？

> ID：10496492
> 
> 赞同：0
> 
> 时间：2012-05-08T10:03:54.917
> 
> 标签：matlab, file-io

我正在尝试将文本文件加载到 Matlab 中并收到一条对我来说没有意义的错误消息。该文件是一个非常大的文本文件，包含 8 列数字。错误消息说：

> ASCII 文件 [filename.txt] 的第 1308295 行的列数必须与前几行相同。

但据我所知，第 1308295 行并没有什么特别之处。事实上，该行已经在文件中存在了几个月，并且代码之前没有抱怨过。所以我想知道是否还有其他不相关的东西可能导致 Matlab 给出该错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:39:47.510

它是什么样的文本文件？如果是数据文件，可以试试“importdata”功能。

# android - 使用钛机器人的简单应用

> ID：10496498
> 
> 赞同：-1
> 
> 时间：2012-05-08T10:04:13.930
> 
> 标签：android, titanium

我是 android 新手，在钛平台上工作，但不知道如何以及在哪里编写代码。我想要在钛 android 中逐步执行“hello world”应用程序，也没有从 web 获得太多帮助。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:39:39.623

看一下快速入门：

[https://wiki.appcelerator.org/display/guides/Quick+Start](https://wiki.appcelerator.org/display/guides/Quick+Start)

这有一个在您创建项目时出现的 hello world 应用程序的示例。本页底部是示例应用程序“厨房水槽”的链接，其中包含钛的所有功能示例。还有一个指向 API 的链接。

一个可能为您指明正确方向的快速技能是钛项目有一个资源文件夹，默认情况下资源文件夹内是一个“app.js”文件，这是每个应用程序的起点。你在这里写你的第一页/安装数据库等，然后从那里链接到其他文件。一切都进入资源文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:50:51.980

您可以使用 Appcelerator 自己的[培训资源](http://training.appcelerator.com)开始使用 Titanium。

# excel - 我可以添加电子表格行然后格式化吗？

> ID：10496501
> 
> 赞同：1
> 
> 时间：2012-05-08T10:04:33.993
> 
> 标签：excel, coldfusion, format, cfspreadsheet

我正在使用 cfspreadsheet 生成一个 Excel 电子表格。我正在一一添加行。添加行后，我想立即对其进行格式化。像这样的东西：

```
<cfset SpreadsheetAddRow(mySpreadsheet, "hi,this,is,a,test") />
<cfset SpreadsheetFormatRow(mySpreadsheet, 
   {
      fgcolor:red;
   }) /> 
```

但是，对于 formatrow 函数，您必须提供行号。有什么方法可以格式化我刚刚添加的行，而无需保留我正在处理的行的运行计数器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T12:51:23.930

电子表格对象本身知道其中有多少行，类似于查询对象。

```
<cfset CurrentRow = mySpreadsheet.RowCount /> 
```

更新您的示例以使其在 ACF9 中工作：

```
<cfset SpreadsheetFormatRow(mySpreadsheet, 
   {
      fgcolor = 'red'
   }, mySpreadSheet.RowCount ) /> 
```

# git - 在 Symfony2 和资产管理中使用 deps 管理 Twitter Bootstrap 存储库

> ID：10496502
> 
> 赞同：1
> 
> 时间：2012-05-08T10:04:34.727
> 
> 标签：git, symfony, twitter-bootstrap, assetic

我想使用 Symfony2 中的 deps 文件管理[Twitter Bootstrap git 存储库。](https://github.com/twitter/bootstrap/)所以我添加了这些行：

```
[TwitterBootstrap]
    git=https://github.com/twitter/bootstrap.git
    target=/twitter
    version=v2.0.3 
```

并且存储库被克隆到`Symfony2\vendor\twitter\bootstrap`.

我卡住了这个广告：**我如何使用资产导入**相关的 css/js，以及**当**图像被放入`Symfony2\vendor\twitter\bootstrap\img`而不是`Symfony2\app\Resources\public\img`.

```
 {% stylesheets '????????????????' filter='cssrewrite' %}
     <link rel="stylesheet" type="text/css" href="{{ asset_url }}" />
 {% endstylesheets %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:13:57.630

下面是我如何将 Bootstrap 的 LESS 编译为 CSS：

```
{% block stylesheets %}
    {% stylesheets
        '../vendor/bootstrap/less/bootstrap.less'
        output='css/bootstrap.css'
    %}
        <link href="{{ asset_url }}" rel="stylesheet">
    {% endstylesheets %}
{% endblock %} 
```

我已经安装了[`lessphp`](https://github.com/leafo/lessphp)——你可以使用 Node.js——作为供应商并像这样激活它：

```
assetic:
    debug: %kernel.debug%
    use_controller: false
    filters:
        cssrewrite: ~
        lessphp:
            apply_to: "\.less$"
            file: %kernel.root_dir%/../vendor/lessphp/lessc.inc.php 
```

至于`cssrewrite`过滤器，在这种情况下您不需要它。如果您以某种方式将 Bootstrap 图像放入该`web/img`文件夹，它将起作用。我仍在寻找一个简洁的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:47:56.797

您是否尝试过使用 MopaBootstrapBundle 实现 twitter 捆绑到 symfony2？[https://github.com/phiamo/MopaBootstrapBundle](https://github.com/phiamo/MopaBootstrapBundle)

我还致力于在[https://github.com/nysander/MopaBootstrapBundle/tree/initializr](https://github.com/nysander/MopaBootstrapBundle/tree/initializr)分支上实现通过[http://Initializr.com生成的 HTML5Boilerplate + TwitterBundle](http://Initializr.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T11:19:21.400

正如@nysander 所说，MopaBootstrapBundle 似乎更灵活。

~~如果你想要一个 twitter-bootstrap 的原始实现，没有任何帮助，这个存储库旨在通过将 Twitter Bootstrap 封装在一个公共文件夹中，将其作为 Symfony 的资产：[https ://github.com/chasen/bootstrap](https://github.com/chasen/bootstrap)~~

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T10:47:30.560

我通过在我的 web 目录中创建指向 vendor/twitter-bootstrap 的符号链接来实现这一点（如果不这样做，图像将永远无法访问）。但我不记得使用 twitter-bootstrap 图像。

我不在我的树枝模板中导入引导程序，而是在我的项目的 less 文件中，如下所示：

```
@import "../../../twitter-bootstrap/less/bootstrap"; 
```

但是我对这种方法感到头疼。请参阅我写的这个错误报告：[https ://github.com/kriswallsmith/assetic/issues/202](https://github.com/kriswallsmith/assetic/issues/202)

# api - Twitter API - 快速总结

> ID：10496503
> 
> 赞同：0
> 
> 时间：2012-05-08T10:04:35.337
> 
> 标签：api, twitter

对于一个项目，我不想构建一个 webapp，它显示（半）实时的带有特定关键字的推文。我不知道如何开始。有人可以向我解释我需要如何开始。我的网站有一个 PHP 框架。

*   我需要用什么语言从 Twitter API 中检索数据。JSON？php？
*   我在哪里可以找到一个很好的教程？

我希望有人可以为我提供几行代码，只是为了帮助我走上正轨。

谢谢！- 萨米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:15:43.657

您可以将[Streaming API](https://dev.twitter.com/docs/streaming-apis)与[Phirehose](https://github.com/fennb/phirehose)库 (PHP) 一起使用。

该 API 的“过滤器”方法实时捕获所有具有指定关键字的推文。您可以查看[140dev](http://140dev.com/)以获取使用此库的应用程序示例。

# iphone - 从图像创建不规则图像

> ID：10496507
> 
> 赞同：2
> 
> 时间：2012-05-08T10:04:44.447
> 
> 标签：iphone, ios, xcode

我想从 iPhone 上的图像创建一个新的不规则图像

用户将从他的手指中选择不规则形状，我想创建一个新图像

选择不规则形状

任何想法用户将如何使用他的手指从图像中选择不规则形状

预先感谢您的宝贵回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:24:21.133

[您可以在 UIImage 中绘制用户（通过触摸）创建的（填充颜色）形状/多边形，然后按照此处](http://mobiledevelopertips.com/cocoa/how-to-mask-an-image.html)的说明使用该形状作为蒙版。

要允许用户“选择”他的不规则形状，您只需使用`- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event`......“触摸”是多边形所需的点。

# sql - 如何更改sybase查询中列的数据类型？

> ID：10496509
> 
> 赞同：1
> 
> 时间：2012-05-08T10:04:59.593
> 
> 标签：sql, sap-ase

我对 Sybase 服务器的查询之一是返回垃圾数据。经过一些调查，我发现其中一个数据类型为 double 的列导致了这个问题。如果我不选择该特定列，则查询将返回正确的结果。该列是问题是一个带有大量小数位数的双精度数。我尝试使用最多 4 位小数的舍入函数，但我仍然得到损坏的数据。如何正确指定查询中的列以获取正确的数据？

我正在使用 Windows 7 机器和 Sybase Adaptive Server 企业驱动程序。（Sybase 客户端 15.5）。我正在使用 32 位驱动程序。

样本结果：

在 Windows 7 机器上使用 sybase ASE 驱动程序的结果不正确

```
"select ric_code as ric, adjusted_weight as adjweight from v_temp_idx_comp where index_ric_code='.AXJO' and ric_code='AQG.AX'"

 ric adjweight
 1 AQG.AX        NA
 2   \020        NA
 3   <NA>        NA 
```

使用 Merant 驱动程序在 windows xp 盒子上的正确结果

```
 "select ric_code, adjusted_weight from v_temp_idx_comp where index_ric_code='.AXJO' and ric_code='AQG.AX'"

 ric_code adjusted_weight
 1   AQG.AX    0.3163873547 
```

问候， 阿洛克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:30:34.550

您可以尝试像这样转换为数字：

```
select ric_code as ric, weight, convert(numeric(16,4), adjusted_weight) as adjweight, currency as currency 
from v_temp_idx_comp 
where index_ric_code='.AXJO' 
```

# java - java web 应用程序中的长时间处理作业

> ID：10496516
> 
> 赞同：1
> 
> 时间：2012-05-08T10:05:19.267
> 
> 标签：java, asynchronous, web

在 Java Web 应用程序中执行长任务（由用户触发且仅针对该用户）的最佳方式是什么？我尝试使用 ejb @Asynchronous 和 jax-ws 异步（轮询）调用，但是它们返回的 Future<?> 是不可序列化的，并且无法存储在 HttpSession 中（以便稍后在完成后检索结果）。是否有一种简单的方法可以在 Java Web 环境中使用并发 Future<?> 或者我必须使用成熟的作业管理框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:38:59.607

迄今为止最好的解决方案是使用应用程序范围的 Map<SessionId, List<Future<?>>>。这适用于具有粘性会话的集群，并且不需要使用 JMS 队列和将结果存储在数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:11:59.207

最好是使用 JMS 。实现一个异步的消息传递解决方案，它将消息发送到队列/主题，其中 MDB 侦听该队列/主题以在消息到达时触发以离线方式执行长任务

[http://www.javablogging.com/simple-guide-to-java-message-service-jms-using-activemq/](http://www.javablogging.com/simple-guide-to-java-message-service-jms-using-activemq/)

[http://docs.oracle.com/javaee/1.3/jms/tutorial/](http://docs.oracle.com/javaee/1.3/jms/tutorial/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T10:46:52.527

如果您的流程应该生成结果并且您预计该流程需要很长时间，那么最好的方法可能是两个有 2 个单独的调用：

1.  第一个触发进程并返回唯一进程标识符
2.  第二个使用进程标识符检索结果

因此，您的整体流程将是：

1.  客户端调用后端服务。
2.  后端服务以唯一 ID 启动异步进程，并立即将唯一 ID 返回给客户端。
3.  异步进程将结果保存在会话或其他更持久的机制（数据库、文件等）中
4.  具有唯一 ID 的客户端轮询服务器
5.  检索方法存在时返回结果，否则返回*未完成*消息

# python - Python Tkinter 为列表框中的每个条目生成一个随机“密码”？

> ID：10496517
> 
> 赞同：0
> 
> 时间：2012-05-08T10:05:26.787
> 
> 标签：python, arrays, listbox, tkinter

我正在尝试创建一个密码生成器，它为列表框中的每一行创建一个新密码，我有一个填充了名称的列表框，我试图获得一个循环来计算列表中有多少个名称以及每个名称创建密码。我有密码生成器，我只是想弄清楚循环的外观。

这是我到目前为止所拥有的。

```
from tkinter import *
import os, random, string

appWin = Tk() #the main application window
lstBoxArray = [] #an atrray to hold all the listboxes

def passWord():
    length = 8
    chars = string.ascii_letters + string.digits
    random.seed = (os.urandom(1024))
    psword = ''.join(random.choice(chars) for i in range(length))
    print(psword)
    #this section generates a random 'code' which is the password
    #at the moment it is still a stub hence the print command at the end.

stdName = Listbox(frm) #listbox populated by names
stdUserName = Listbox(frm) #listbox where a login username is shown
stdPass = Listbox(frm) #listbox where the passwords will be placed
lstBoxArray = [stdName, stdUserName, stdPass]

scrBar.config(command=setlstBoxYview)          ##
stdName.config(yscrollcommand=scrBar.set)
stdUserName.config(yscrollcommand=scrBar.set)
stdPass.config(yscrollcommand=scrBar.set)
                                              # these are just configuring the listboxs
stdName.grid(column=1,row=0,sticky='NS')
stdUserName.grid(column=4,row=0,sticky='NS')
stdPass.grid(column=5,row=0,sticky='NS')
scrBar.grid(column=6,row=0,sticky='NS')
frm.rowconfigure(0,weight=1)                  ## 
```

所以基本上我的 stdName 列表框填充了大约 28 个名称，它与 stdUserName 列表框相同。我想创建一个循环来计算有多少个名字，并为每个名字创建一个密码。

像这样的东西。

```
def passGen():
    for i in range(stdName.size()): #this counts how many names there are
        'until there is the same number of pswords as there are i'
        loop the passWord and 
        stdPass.insert(END, passWord) each time it loops
        stop when stdPass == stdName 
```

^^这显然不是代码，但这是我想要得到的^^，我的目标是然后将 passGen 链接到一个按钮。我没有包含我所有的代码，因为它并不是真正相关的，但是对此的帮助将不胜感激。

ps 对不起，如果有任何拼写错误，我不是以英语为母语的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:47:39.063

假设您编辑最后一行`passWord`以返回密码（而不是打印它）， `passGen`那么简单如下：

```
def passGen():
     for i in range(stdName.size()):
        stdPass.insert(END, passWord()) 
```

创建与名称数量相同数量的密码足以保证您将拥有相同的数量。

如果您将其视为填充密码列以匹配名称列计数，则 while 循环可以更好地反映您的意图：

```
def passGen():
    while stdPass.size() < stdName.size():
        stdPass.insert(END, passWord()) 
```

# reporting-services - 报告服务：共享数据集“dsDataSetName”的执行失败

> ID：10496518
> 
> 赞同：1
> 
> 时间：2012-05-08T10:05:26.680
> 
> 标签：reporting-services, ssrs-2008

![在此处输入图像描述](../Images/6434dcdf92b51a720aae5746ac297073.png)当我单击 Microsoft Visual Studio 2008 的预览按钮（报告表单）时出现此错误。

```
An error occurred during local report processing. An error has occurred during report processing. The execution failed for the shared data set 'Dataset name'. Object reference not set to an instance of an object. 
```

任何想法？想知道它是否与共享数据集有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:08:56.057

就我而言，共享数据集仅在 R2 上可用。此外，它必须基于共享数据源。

无论如何，我认为这与数据集是共享的事实没有任何关系。它只是信息的一部分。如果您转到数据集的查询设计器并按 F5，您能看到查询的结果吗？

# vba - 在 excel 2010 中执行宏的运行时错误

> ID：10496520
> 
> 赞同：1
> 
> 时间：2012-05-08T10:05:32.170
> 
> 标签：vba, excel, excel-2010

我收到：

> 运行时错误“1004”：无法运行宏 Makros.xlm!MakroIni。该工作簿中的宏可能不可用，或者所有宏都可能被禁用。

...在某些 Excel 2010 实例中运行宏时。在某些 Excel 2010 安装和 Excel 2003 中，它工作正常。

涉及 2 个工作簿：Macro.xlm 和 Username.xls。这两个文件都存储在远程服务器上。

宏在执行时崩溃：

```
Workbooks.Open Makro_Path & Makro_Nam, ReadOnly:=True
Application.Run Makro_Nam & "!MakroIni", WbTyp 
```

第一行正确执行，所有宏都可见。Makro_Nam 定义为：

```
Public Const Makro_Nam As String = "Makros.xlm" 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:07:44.337

实际上原因是 Excel 64 位。

Makro.xlm 工作表包含以下函数定义：

```
Private Declare  Function FindFirstFile Lib "kernel32.dll" Alias "FindFirstFileA" ( _
ByVal lpFileName As String, _
ByRef lpFindFileData As WIN32_FIND_DATA) As Long
Private Declare  Function FindNextFile Lib "kernel32.dll" Alias "FindNextFileA" ( _
ByVal hFindFile As Long, _
ByRef lpFindFileData As WIN32_FIND_DATA) As Long
Private Declare  Function FindClose Lib "kernel32.dll" ( _
ByVal hFindFile As Long) As Long
Private Declare  Function FileTimeToLocalFileTime Lib "kernel32.dll" ( _
ByRef lpFileTime As FILETIME, _
ByRef lpLocalFileTime As FILETIME) As Long
Private Declare  Function FileTimeToSystemTime Lib "kernel32.dll" ( _
ByRef lpFileTime As FILETIME, _
ByRef lpSystemTime As SYSTEMTIME) As Long 
```

我将它们更改为 ptrsafe：

```
Private Declare PtrSafe Function FindFirstFile Lib "kernel32.dll" Alias "FindFirstFileA" ( _
ByVal lpFileName As String, _
ByRef lpFindFileData As WIN32_FIND_DATA) As Long
Private Declare PtrSafe Function FindNextFile Lib "kernel32.dll" Alias "FindNextFileA" ( _
ByVal hFindFile As Long, _
ByRef lpFindFileData As WIN32_FIND_DATA) As Long
Private Declare PtrSafe Function FindClose Lib "kernel32.dll" ( _
ByVal hFindFile As Long) As Long
Private Declare PtrSafe Function FileTimeToLocalFileTime Lib "kernel32.dll" ( _
ByRef lpFileTime As FILETIME, _
ByRef lpLocalFileTime As FILETIME) As Long
Private Declare PtrSafe Function FileTimeToSystemTime Lib "kernel32.dll" ( _
ByRef lpFileTime As FILETIME, _
ByRef lpSystemTime As SYSTEMTIME) As Long 
```

现在它似乎工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:54:44.250

根据您的宏的作用，显而易见的答案似乎是您需要设置

```
ReadOnly:=True 
```

成为

```
ReadOnly:=False 
```

这样您的宏就可以对数据进行更改。

# jquery - 没有回调的 jQuery 和 JSON URL

> ID：10496521
> 
> 赞同：0
> 
> 时间：2012-05-08T10:05:34.697
> 
> 标签：jquery

我有一个没有回调的 JSON 调用。我想解析数据。

```
$("button").click(function(){
    $.getJSON(
        "url",
        function(result){
            $.each(result, function(i, field){
                $("div").append(field + " ");
        });
    });
});​ 
```

和 HTML

```
<button>Get JSON data</button>
<div></div>​ 
```

但是没有任何获取的数据。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:22:02.890

一个建议，因为您尝试访问的站点似乎也不支持 JSONP，您可以尝试从某种服务器端语言（例如 PHP）获取内容，例如

```
<?php
echo file_get_contents(url);
?> 
```

并使用 jquery **getJson**，

```
$(document).ready(function(){
  $.getJSON('your_server-side_page.php', function(data){
    $.each(data, function(i, entry) {
      // Process your data here
    });
  });
}); 
```

希望有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:28:52.410

我同意萨弗拉兹的观点。这是因为它是基于远程的请求。过去我解决此问题的一种方法是使用服务器端文件（例如 .php 或 .aspx）加载 URL，然后在该本地可访问文件上执行 getJSON。

这是因为您的服务器端文件可以连接到远程主机。

例如，您可以创建 jquery 使用以下代码访问的示例 test.php 文件：

```
<?php
header('Content-type: application/xml');
//Get the remote content and output it for Jquery's Local use
echo file_get_contents(url);
?> 
```

然后只需调用（当然是相对的）：

```
$("button").click(function(){
    $.getJSON(
      "/test.php",
    function(result){
        $.each(result, function(i, field){
            $("div").append(field + " ");
        });
    });
});​ 
```

使用 JsonP 之类的东西很好，但有时它们有点矫枉过正。我希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T10:12:35.830

从外观上看，您遇到了[同源策略](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)的情况。这基本上表明，您不能使用从页面上的其他主机检索到的数据。

由于我找不到该服务的（英文）API 文档，我建议您检查[JSONP](http://en.wikipedia.org/wiki/JSONP)的 API并尝试使用该功能（如果存在）。

另一种选择是在您的服务器上编写一个脚本，该脚本充当数据的代理：从您的页面检索请求，将请求转发到`http://www.bigpara.com`，从中获取结果`http://www.bigpara.com`并将这些结果传递到您的页面。

# php - 如何使用 Facebook PHP-SDK 发送 CUSTOM 邀请？

> ID：10496524
> 
> 赞同：1
> 
> 时间：2012-05-08T10:05:45.867
> 
> 标签：php, facebook, facebook-apps

我正在开发一个简单的 Facebook 应用程序，现在我需要创建一个用户可以邀请朋友的页面。

关于它的两个问题：

1.  如何使用 PHP-SDK 发送邀请？

2.  我可以发送自定义邀请吗？对于“自定义”，我的意思是我必须知道用户邀请了多少用户。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:33:30.770

你有没有尝试过什么或者你有任何代码给我们看？听起来您只是在询问代码，尤其是因为它是自定义的。您可以尝试获取用户朋友列表，并为每个人设置一个复选框，然后您可以访问他们选择的人的数组。然后查看 publish_actions 权限——尽管我认为循环遍历每个朋友并代表用户向他们发布图表并不是最好的性能。我知道您想要一个自定义解决方案，但老实说，您最好的选择可能是使用本地朋友选择器和 js-sdk

[https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

然后使用回调和一些 ajax 来保存您需要的信息。也看看这里的请求示例

[https://developers.facebook.com/tools/console/](https://developers.facebook.com/tools/console/)

# .net - C# ASP.NET 否决不可强制执行的业务规则

> ID：10496526
> 
> 赞同：1
> 
> 时间：2012-05-08T10:05:56.287
> 
> 标签：.net, validation, business-rules

我试图找出处理业务规则的最佳通用方法，其中规则并不总是可执行的。
表单正在通过 stored_procedure 调用提交到数据库。目前，业务逻辑被写入stored_procedure，而不是单独的业务应用层。存储过程返回具有错误和错误级别（信息、建议、警告、错误和致命）的数据集

信息只是为了提供可能需要的更新。
建议允许用户中止更新/插入但默认操作是继续
警告允许用户中止更新/插入但默认操作是取消
错误违反强制性业务规则，通常与数据完整性有关，并将强制更新/插入被取消，但用户可以选择修改正在提交的数据并重试
致命是用户无法修复的问题（与数据库的连接丢失、用户权限被撤销、数据在填充表单后发生更改等）和将强制中止交易

这是我正在尝试做的一个例子。

设置季节代码的表格

*   代码
*   描述
*   开始日期
*   结束日期

需要两种类型的验证：

强制：例如代码和描述必须完整且必须是唯一的，开始日期必须早于结束日期

可选：开始和结束日期通常是连续的，即下一季的开始日期将是上一季结束日期的后一天，但情况并非总是如此。我想警告用户他们可能犯了一个错误，并让他们确认输入的数据是正确的。如果他们确实确认了，那么我需要在重新提交时忽略验证规则。

我正在考虑存储过程中的一个额外参数来忽略可选（信息和警告），如果用户确认问题正常，则仅在重新提交时设置。错误和致命仍然会导致更新失败。

任何人都可以提出更好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:21:28.173

您所需要的只是一个执行类型的业务规则，如果该规则评估为 True，则该规则会调用方法（规则操作）。该操作可以采用参数（例如，枚举 ErrorLevel）并相应地采取行动，记录错误、通知用户、保存用户的条目等）。就像是：

```
If UserRole is Admin and (StartDate is less than or equal to EndDate)
then Prosess(ErrorLevel.Info)
else Abort(ErrorLevel.Fatal) 
```

# android - 依次显示多个对话框？

> ID：10496528
> 
> 赞同：0
> 
> 时间：2012-05-08T10:05:59.660
> 
> 标签：android, android-layout, android-dialog

我是 Android 新手，我正在编写一个具有多个用户界面（窗口）的应用程序。我发现为每个窗口定义新活动有点困难，所以我最终使用对话框而不是活动。但是有一种情况**我需要顺序显示多个对话框**。
在 c# 中显示 Dialog 是阻塞操作。但我不知道如何在 Android 中做到这一点。
**如果有，我欢迎任何替代方案**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:12:24.597

好的，没有代码参考我会说最简单的方法是在每个对话框中使用[ondimiss 侦听](http://developer.android.com/reference/android/content/DialogInterface.OnDismissListener.html)器来调用下一个。你可以查看这个简短的例子来了解实现（注意他们正在使用 ondismiss 来做其他事情）。

[http://android-er.blogspot.com/2011/11/cancel-progressdialog.html](http://android-er.blogspot.com/2011/11/cancel-progressdialog.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:28:57.650

如果要显示一系列对话框，可以使用 onclick 侦听器。从一个对话框中，打开以下一个。（[监听器的对话框界面](http://developer.android.com/reference/android/content/DialogInterface.html)），如果你想阻止你的程序，所以用户必须点击对话框，设置对话框不可取消（[setCancelable](http://developer.android.com/reference/android/app/Dialog.html#setCancelable%28boolean%29)）

# ruby-on-rails-3 - 在 Rails 3 中使用带有多步骤表单的回形针附件时出现“无法转储文件”错误

> ID：10496530
> 
> 赞同：3
> 
> 时间：2012-05-08T10:06:13.917
> 
> 标签：ruby-on-rails-3, forms, paperclip, multiple-forms

我在这里提到了同样的问题： [Rails 3 中的 Multi-step form with Paperclip attachments](https://stackoverflow.com/questions/5876714/multi-step-form-in-rails-3-with-paperclip-attachments/8079113#8079113)

“TypeError in...” “无法转储文件”

但是，我似乎无法理解答案中提到的解决方案：

```
unless @model.valid?
  @model.image.clear
  @model.image.queued_for_write.clear
end 
```

我把上面的行放在哪里？

这是我的控制器代码：

```
 def new
    session[:member_params] ||= {}
    @member = Member.new(session[:member_params])
    @member.current_step = session[:member_step]
  end

  def create
    session[:member_params].deep_merge!(params[:member]) if params[:member]
    @member = Member.new(session[:member_params])

    @member.current_step = session[:member_step]
    if @member.valid?
      if params[:back_button]
        @member.previous_step
      elsif @member.last_step?
        @member.save if @member.all_valid?
      else
        @member.next_step
      end
      session[:member_step] = @member.current_step
    end

    if @member.new_record?
      render "new"
    else
      session[:member_step] = session[:member_params] = nil
      flash[:notice] = "Personal Data Sheet saved!"
      redirect_to @member
    end
  end 
```

我试着在声明之后把它放在这里`@member`，但没有用：

```
session[:member_params].deep_merge!(params[:member]) if params[:member]
@member = Member.new(session[:member_params])

unless @member.valid?
  @member.image.clear
  @member.image.queued_for_write.clear
end 
```

PS我想在这里将我的问题附加到问题中： [带有回形针附件的Rails 3中的多步骤表单](https://stackoverflow.com/questions/5876714/multi-step-form-in-rails-3-with-paperclip-attachments/8079113#8079113) 但我不确定是否可以就同一问题/问题提出后续问题。

# c++ - 当到达指定的日期/时间时，Linux 中的 C/C++ 是否可以得到通知？

> ID：10496531
> 
> 赞同：3
> 
> 时间：2012-05-08T10:06:38.313
> 
> 标签：c++, c, linux, timer

是否可以在 Linux 中使用标准 C++ 在系统时间到达指定的日期/时间时获得通知（当然假设我的进程已启动）？

我可以将计时器设置为我需要等待的时间，但是如果用户更改系统时间会发生什么？系统可以通知我用户更改了系统时间以重置我的计时器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T10:23:12.787

Linux 内核有这样的系统调用，尽管它们没有集成到 libc API 中。您可以创建一个计时器，从内核为其获取文件描述符，然后对描述符执行 select 或 epoll 调用，以便在计时器触发时得到通知。

它的手册页： http: [//www.kernel.org/doc/man-pages/online/pages/man2/timerfd_create.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/timerfd_create.2.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:10:39.000

当然，只需编写代码来做你想做的事。例如：您可以保留所有此类计时器的列表，它们应该被触发的日期/时间，以及它们发生时应该执行的代码。然后，您可以每隔一段时间检查一下时间，看看是否超过了您的任何计时器应该触发的时间。如果是这样，解雇他们，将他们从列表中删除，然后继续你的业务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:32:01.513

请参阅“at”命令的文档（man at）

例如，at 可以在给定时间（例如下午 2:35）向您发送电子邮件。

```
at 14:35
warning: commands will be executed using /bin/sh
at> mail -s "It is 2:35 PM" dbadmin < /dev/null
at><EOT> # After CTRL/D pressed.
job 9 at Tue May  8 14:35:00 2012 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-08T10:39:15.180

您可以计算从程序开始到事件发生的时间，并调用

```
sleep (difftime-1); 
```

然后你可以控制时间是否被重置，但这样你只能将时间更正到未来 - 如果时间被设置回来，你会跳过事件。

# html - Soundcloud API 仅返回 mp3 格式？

> ID：10496534
> 
> 赞同：2
> 
> 时间：2012-05-08T10:06:45.260
> 
> 标签：html, audio, soundcloud, ogg

我从 soundcloud 获取曲目信息，并使用 stream_url 属性初始化 html5 音频，但它仅适用于 chrome、safari 和 IE。如果可能的话，我如何获得歌剧和火狐的 .ogg 曲目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:26:19.343

128 kbp/s mp3 目前是 SoundCloud 上唯一可用于流的音频格式。

我们在[SoundManager 2](http://www.schillmania.com/projects/soundmanager2/ "声音管理器 2")上取得了一些不错的体验，因为它为原生不支持 mp3 的浏览器提供了 Flash 回退。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:51:43.533

Canvas.fm 使用 Node.js 处理 SoundCloud 的传入 MP3 流，然后将其通过管道传输到 ffmpeg，然后可以将 OGG 格式的音频流传输到 HTTP 响应中。

使用 Node.js 使这种流处理变得异常简单和高效。

参考：[http ://en.wikipedia.org/wiki/Nodejs](http://en.wikipedia.org/wiki/Nodejs)

[http://canvas.fm](http://canvas.fm)（下面评论中的新细节）

希望有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T07:16:01.230

我建议使用[node-lame将 mp3 流解码为原始 PCM 数据，然后使用](https://github.com/TooTallNate/node-lame)[node-ogg](https://github.com/TooTallNate/node-ogg)将该流编码为 ogg 流，然后将其提供给客户端。如果您不确定如何继续，我建议您真正阅读这篇博文：http: [//pedromtavares.wordpress.com/2012/12/28/streaming-audio-on-the-web-with-nodejs /](http://pedromtavares.wordpress.com/2012/12/28/streaming-audio-on-the-web-with-nodejs/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-06T15:18:12.570

Opera 和 Firefox 现在支持 MP3 HTML5 音频。

[https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats](https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats)

# javascript - 如何使用事件处理程序将元素复制到另一个元素

> ID：10496538
> 
> 赞同：-1
> 
> 时间：2012-05-08T10:07:04.057
> 
> 标签：javascript, jquery

如何将一个元素与附加的事件处理程序一起复制到另一个元素。通常，当我们将一个元素复制到另一个元素时，不会复制事件处理程序。这该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:09:00.483

使用`clone(true)`. `true`传递参数以指示应复制原始元素，包括其事件。

```
$("#myElement").clone(true).appendTo("#container"); 
```

[克隆（）](http://api.jquery.com/clone/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:08:24.227

尝试使用以 true 为参数的克隆函数。[有关更多详细信息，请在http://api.jquery.com/clone/](http://api.jquery.com/clone/)上阅读其 API

看看这个：- [http://jsfiddle.net/blunderboy/cRax2/5/](http://jsfiddle.net/blunderboy/cRax2/5/)

# php - 简单的 PDO php 建议

> ID：10496540
> 
> 赞同：1
> 
> 时间：2012-05-08T10:07:07.690
> 
> 标签：php, pdo

在 php.ini 中使用 PDO 时，何时使用准备和绑定，我有点困惑。

在下面的代码中，我应该改用 prepare 吗？如果我使用此代码，$name 会被转义，还是需要使用 mysql_real_escape_string？

```
$stmt = $db->query("UPDATE matches SET playerStatus = 4  WHERE name='$name' "); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:09:09.283

> 我有点困惑什么时候走很长的路并使用准备和绑定

这是一种健壮、难以搞砸、易于阅读、易于维护的方法。不要认为它是“漫长的道路”。

> 在下面的代码中，我应该改用 prepare 吗？

是的。始终使用允许绑定参数的东西。

> 如果我使用此代码，$name 是否会被转义，

所写的问题中的代码不会逃逸`$query`。您只是将字符串混合在一起。数据库代码无法知道您编写的 SQL 是什么以及不安全的外部数据是什么。

> 还是我需要使用 mysql_real_escape_string？

您需要使用允许绑定参数的东西。

# c++ - 如何组织插件的配置

> ID：10496541
> 
> 赞同：0
> 
> 时间：2012-05-08T10:07:08.253
> 
> 标签：c++, plugins, autotools

在“app/bin”目录中有一个名为“runner”的应用程序。并且有很多插件模块应该位于 'app/bin/modules/' 目录中。

主要是我们在开发插件模块并使用“runner”运行它们，“runner”没有太多工作，只有错误修复。

目前，要编译插件，我们使用“runner”编译整个项目并部署到运行环境。

现在我想重新组织它，所以只编译插件的源代码。问题是：编译模块需要修改“configure.ac”添加模块Makefile路径，然后运行“./configure”

（第二种方法）
为了避免修改主要的“configure.ac”，我可以为插件模块创建辅助“配置”文件。在这种情况下，我们将有很多“configure.ac”。一个模块最多实施 1-2 天。

我想听听专家对这种情况的意见。哪种方法更可取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:45:51.337

我会选择第二种方法。添加到系统比修改系统更好。

# php - 2个时间戳之间的日期和时间差？

> ID：10496542
> 
> 赞同：-3
> 
> 时间：2012-05-08T10:07:08.783
> 
> 标签：php, datetime

我想知道如何获取日期和时间差（以分钟为单位），据此我需要登录 1 小时到期，60 分钟到期后用户可以恢复登录。

```
$currentdate = 1336468008 
$storeddate = 1336464866 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:10:39.047

```
$timeDiff = $currentdate - $storeddate 
```

在几秒钟内为您带来差异

除以 60 分钟，再除以 60 小时。

您可以将结果除以 3600，如果答案 > 1 组过期。

```
if(($currentdate - $storeddate)/3600 > 1) doExpiryStuff(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:13:28.063

您可以使用`DateTime::diff`并且`DateInterval`课程可以格式化以准确地为您提供所需的内容，即总分钟数。

[http://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)

[http://www.php.net/manual/en/class.dateinterval.php](http://www.php.net/manual/en/class.dateinterval.php)

# javascript - 使用 CSS 的动态浮动布局

> ID：10496543
> 
> 赞同：7
> 
> 时间：2012-05-08T10:07:12.713
> 
> 标签：javascript, html, css, css-float

让我试着解释一下我想要达到的目标。我希望将具有特定宽度（250 像素）但动态高度的 X 框放置在正文中。但我希望它们尽可能紧凑，它们之间没有不必要的空白空间。

现在，如果所有框的宽度和高度都相同，这将很容易。例如，我可以穿上`float:left;`它们。但是当盒子高度是动态的，并且所有盒子都有随机高度时，我最终会在盒子之间留出空格。

**让我举两个例子：**

这就是我要的：

![这就是我要的](../Images/89c4b633e49450aa0eecb340f108e508.png)

这就是我最终的结果：

![这就是我最终得到的](../Images/395ac9cc2a7af72145fff71c46922eae.png)

**这是我的 CSS：**

```
<style type="text/css">
<!--
body {
    background:#CCCCCC;
}
.flowBox {
    background:#FFFFFF;
    margin:10px;
    float:left;
    padding:10px;
    width:250px;
    border:#999999 1px solid;
}
.clear {
    clear:both;
}
-->
</style> 
```

**盒子的 HTML 示例：**

```
<div class="flowBox">
   <h1>Header 0</h1>
   Erat volutpat. Sed rutr...
</div> 
```

***完整源代码：*** [http: //pastebin.com/UL1Nqyvm](http://pastebin.com/UL1Nqyvm)

有没有办法用 CSS 实现这一点？感谢您的任何帮助或指示！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T10:49:46.127

从我之前看到的情况来看，您想要实现的目标即使不是不可能仅使用 CSS 也几乎是不可能的。基本上，您想要的是类似于 Pinterest 的布局，如果您不确定我在说什么，可以查看他们的网站以获取参考。

从这里，您可以进一步研究 Pinterest 布局是如何完成的，以及是否有任何替代方案 - *CSS 框架*、*jQuery 插件*等。

**考虑到上述内容，我通过简短的搜索为您找到了什么：**

*   [书签 jQuery 插件](http://www.wookmark.com/jquery-plugin "例子")
*   [砌体jQuery插件](http://masonry.desandro.com/ "例子")

此外，以下是**Evan Sharp 的简短解释，他为 Pinterest 布局编写了代码：**

> 我编写了 Pinterest 脚本。这是它如何工作的基础：
> 
> 事先：绝对定位销容器 确定列宽 确定列之间的边距（装订线）
> 
> 设置数组：获取父容器的宽度；计算适合的列数 创建一个空数组，其长度等于列数。在构建布局时使用此数组存储每列的高度，例如第 1 列的高度存储为数组 [0]
> 
> 循环遍历每个引脚：将每个引脚放在添加时的最短列“左：”===列#（索引数组）乘以列宽+边距“顶部：”===数组中的值(height) 为当时最短的一列最后加上pin的高度到列高(数组值)
> 
> 结果是轻量级的。在 Chrome 中，布置一整页 50 多个图钉需要 <10ms>

您可以从这里开始，通过我提供的轻微指导进一步研究该主题，或者如果您正在编写代码，您甚至可以自己实现上述解释。

虽然使用 jQuery 插件会容易得多，但如果它们适合您的情况，那只能由您决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T10:18:05.783

我不确定，但我认为你可以通过“flexbox-layout”获得类似的东西[http://coding.smashingmagazine.com/2011/09/19/css3-flexible-box-layout-explained/](http://coding.smashingmagazine.com/2011/09/19/css3-flexible-box-layout-explained/)

问题是它是全新的东西，您可能需要更广泛的支持。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T10:18:52.007

你试过[http://masonry.desandro.com/](http://masonry.desandro.com/)吗？它基于 jQuery

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-08T10:16:58.983

你没有用纯 CSS 实现这一点，你必须使用这个 JS [http://masonry.desandro.com/](http://masonry.desandro.com/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-08T10:18:46.003

至少据我所知，这是不可能的。CSS 定位从左到右，然后从上到下。因此，您可以向左（或向右）浮动，但不能在顶部浮动。

所以可能最简单的是一些脚本，它不应该很复杂：

1.  你的结构应该由 div 块组成，每个 250 像素宽，并且尽可能多。然后我可能会在 window.resize 处理程序中创建：

    ```
    $(window).resize(function() 
    {
        // ... 
    } 
    ```

2.  您的原始 HTML 可以将所有块放入第一个垂直块中。然后在同一个调整大小处理程序中，您可以获取块并将它们从第一个移动到下一个。这本质上是一个两行，循环遍历元素，并执行以下操作：

    ```
    $("#FlowBox" + i)
        .appendTo("#VerticalBlock" + (i % number_of_vertical_blocks) ); 
    ```

CSS然后是这样的：

```
.verticalBlock {
    background:#CCCCCC;
    margin:10px;
    float:left;
    padding:10px;
    width:250px;
    border:#999999 1px solid;
}
.flowBox {
    background:#CCCCCC;
    padding-top:10px;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T10:11:57.643

好问题！我尝试了几次不同的成功，而仅使用 css 是不可能的。我能给你的唯一提示是：这是一个**打包问题**，有 jQuery 脚本可以解决这个问题！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-08T10:37:41.797

试试这个，它可能会帮助你

HTML

```
<div class="left"> 
    <div class="flowBox">
            <h1>Header 0</h1>
             erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
    </div>
    <div class="flowBox">
        <h1>Header 4</h1>
        am, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
    </div>
</div>
<div class="left">
    <div class="flowBox">
            <h1>Header 1</h1>
            es vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
    </div>
    <div class="flowBox">
        <h1>Header 5</h1>
        s eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
    </div>
</div>
<div class="left">
    <div class="flowBox">
            <h1>Header 2</h1>
            illa at tempor ac, sagittis eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
    </div>
    <div class="flowBox">
        <h1>Header 6</h1>
        eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
    </div>
</div>
<div class="left">
    <div class="flowBox">
            <h1>Header 3</h1>
            ngilla at tempor ac, sagittis eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
    </div>
    <div class="flowBox">
        <h1>Header 7</h1>
         dolor sit amet, consectetur adipiscing elit. Sed magna ligula, fringilla at tempor ac, sagittis eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
    </div>
</div>
<div class="clear"></div> 
```

CSS

```
body {
        background:#CCCCCC;
}
.flowBox {
        background:#FFFFFF;
        margin-bottom:10px;      
        padding:10px;
        width:250px;
        border:#999999 1px solid;
}
.left { float:left;  margin:10px;}
.clear {
        clear:both;
} 
```

等等……在这种情况下，您可以这样做，但这不是正确的方法。或者你必须为此使用 Javascript。以前其他人已经给你链接了

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-08T10:51:16.453

你可以用 CSS3 做到这一点：

```
body {
-moz-column-count: 4;
-moz-column-gap: 20px;
-webkit-column-count: 4;
-webkit-column-gap: 20px;
column-count: 4;
column-gap: 20px;
height: 800px; //breaks the column into new ones
} 
```

但它目前仅受 firefox、safari 和 chrome（较新版本）支持。

而且它不会按照您制作的顺序放置它，它会将 0->1->2->3 放在第一列而不是交叉。

使用 CSS 选择器，可以更改第 2 行和第 3 行 div，并且可以将它们设置为新位置，但无法分辨上述 div 的位置，因此您将无法除非您使用 javascript，否则将其移动到正确的位置。

考虑这个例子：

```
body>div.flowBox:nth-of-type(5n) {
    /* alter position of every 5th flowBox */
    position: relative;
    top: -200px; /* how can you tell how much? */
}
body>div.flowBox:nth-of-type(6n) {
    /* alter position of every 6th flowBox */
}
/* and so on */
... 
```

您可以设置位置，但不知道在哪里设置它，因为无法获取其他元素属性。因此，为此，您必须使用 javascript。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-10T14:51:46.237

```
body {
          background:#CCCCCC;
     }

.outer-div{
           width:800px;
         } 
```

你的innver div

```
.flowBox {
           background:#FFFFFF;
           margin-bottom:10px;      
           padding:10px;
           width:250px;
           border:#999999 1px solid;
          }

.left  { float:left;  margin:10px;}
.clear { clear:both;} 
```

html代码：

```
<div class="outer-div">
<div class="left flowBox">
    <h1>Header 1</h1>
    s eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
</div>
<div class="left flowBox">
    <h1>Header 2</h1>
    s eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
</div>
  <div class="left flowBox">
    <h1>Header 3</h1>
    s eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
</div>
  <div class="left flowBox">
    <h1>Header 4</h1>
    s eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
</div>
  <div class="left flowBox">
    <h1>Header 5</h1>
    s eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
</div>
  <div class="left flowBox">
    <h1>Header 6</h1>
    s eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
</div>
  <div class="left flowBox">
    <h1>Header 7</h1>
    s eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
</div>
  <div class="left flowBox">
    <h1>Header 8</h1>
    s eu metus. Duis tempus malesuada nisl ac molestie. Duis non quam et elit tempus rhoncus sed quis neque. Aliquam erat volutpat. Sed rutrum mollis pharetra. Nullam vel enim non risus imperdiet accumsan ut at est. Phasellus vel interdum diam. Praesent volutpat purus sed justo consequat ut faucibus est laoreet. Sed ultrices fringilla magna nec pellentesque. Aliquam mattis pretium nibh vel tincidunt. Vivamus tincidunt placerat diam, a iaculis sem ultricies vitae. Praesent vestibulum dignissim sem, eget bibendum dui sodales vitae.
</div>
</div> 
```

试试这个，它会帮助你！

# delphi - 在 Delphi 7 中停止事件传播

> ID：10496557
> 
> 赞同：6
> 
> 时间：2012-05-08T10:07:54.337
> 
> 标签：delphi, event-handling, mouseevent, delphi-7

我在 Delphi 7 中遇到了关于事件传播的问题（由于我的无知）。

我被要求`OnMouseUp`在表单上的某些控件上动态附加一个事件处理程序（我对此很好），但如果`OnMouseUp`存在，则`OnClick`不得处理该控件上的事件。

## 背景

如果你问这背后的原因，那么，我负责修改一个旧的生产监控应用程序（叹气），从现在开始，它必须适应某些控件的条件行为，以直接响应以前点击一个特殊功能按钮。

其中一些控件已经有一个`OnClick`事件处理程序；团队提出的第一个解决方案是准时干预每个`OnClick`处理程序并管理与特殊功能按钮状态相关的上下文操作。

我建议利用应用程序表单已经存在的面向对象设计：它们都继承自同一个自定义祖先对象，因此我计划在那里插入一个初始化方法，以将`OnMouseUp`事件动态附加到声明为支持的控件它在子类中。

## 需求

我不是在此要求对所有这些（可能缺乏）设计优点的验证或质疑（顺便说一句，经过大量思考和推理，这似乎是我们可以少痛苦走的道路）；我的问题是，要进行这样的设计，我必须让动态附加的事件处理程序停止事件传播到这些控件上`OnMouseUp`预先存在的事件。`OnClick`

Delphi 7可以吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T11:06:30.283

***请注意，以下内容并未明确回答此处的问题。这更像是对概念重新设计的提议（重定向 OnClick 事件而不是添加额外的 OnMouseUp）。它是关于如何将所有组件的 OnClick 事件处理程序（如果分配了一些）（如果需要，可能会被过滤）重定向到另一个（常见的）OnClick 事件处理程序。它还包括一种将它们恢复到原始状态的方法。***

在下面的示例中，我将尝试向您展示如何将 OnClick 事件处理程序（如果组件已经编写了一些）替换为特定的事件处理程序，然后有选择地恢复该事件处理程序。这是对所有发布了 OnClick 事件的组件执行的，因此您无需提前知道组件类是否具有可用的 OnClick 事件（但可以非常简单地对其进行修改以仅使用特定类）。

代码由以下部分组成：

*   ***OnSpecialClick*** - 它是当您调用 ReplaceOnClickEvents 过程时所有 OnClick 事件将被绑定的事件处理程序，请注意***它必须发布为对 RTTI 可见！！！***

*   ***Button1Click*** - 在这里代表应该替换的旧事件处理程序，它在设计时绑定到 Button1.OnClick 事件

*   ***ReplaceOnClickEvents*** - 方法，它遍历表单上的所有组件并检查
    当前迭代的组件是否分配了 OnClick 事件处理程序；如果是这样，它将其存储到备份集合中，并用 OnSpecialClick 替换此事件处理程序

*   ***RestoreOnClickEvents*** - 恢复原始 OnClick 事件处理程序的方法；它遍历备份集合并将事件方法分配给其存储的组件实例

*   ***CheckBox1Click*** - 这个复选框点击事件意味着在普通模式和特殊模式之间切换（CheckBox1 选中状态意味着是特殊模式），只有这个 OnClick 事件不会被 ReplaceOnClickEvents 调用替换（因为你不会能够将模式恢复正常）

这里是：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, TypInfo, StdCtrls, Contnrs;

type
  TEventBackup = class
    Component: TComponent;
    OnClickMethod: TMethod;
  end;

type
  TForm1 = class(TForm)
    Button1: TButton;
    CheckBox1: TCheckBox;
    procedure Button1Click(Sender: TObject);
    procedure CheckBox1Click(Sender: TObject);
  private
    procedure ReplaceOnClickEvents;
    procedure RestoreOnClickEvents;
  published
    procedure OnSpecialClick(Sender: TObject);
  end;

var
  Form1: TForm1;
  EventBackupList: TObjectList;

implementation

{$R *.dfm}

procedure TForm1.OnSpecialClick(Sender: TObject);
begin
  ShowMessage('Hi, I''m an OnSpecialClick event message!');
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowMessage('Hi, I''m just that boring original OnClick event message!');
end;

procedure TForm1.ReplaceOnClickEvents;
var
  I: Integer;
  Component: TComponent;
  EventMethod: TMethod;
  EventBackup: TEventBackup;
begin
  for I := 0 to ComponentCount - 1 do
  begin
    Component := Components[I];
    if Component = CheckBox1 then
      Continue;

    if IsPublishedProp(Component, 'OnClick') then
    begin
      EventMethod := GetMethodProp(Component, 'OnClick');
      if Assigned(EventMethod.Code) and Assigned(EventMethod.Data) then
      begin
        EventBackup := TEventBackup.Create;
        EventBackup.Component := Component;
        EventBackup.OnClickMethod := EventMethod;
        EventBackupList.Add(EventBackup);
        EventMethod.Code := MethodAddress('OnSpecialClick');
        EventMethod.Data := Pointer(Self);
        SetMethodProp(Component, 'OnClick', EventMethod);
      end;
    end;
  end;
end;

procedure TForm1.RestoreOnClickEvents;
var
  I: Integer;
  EventBackup: TEventBackup;
begin
  for I := 0 to EventBackupList.Count - 1 do
  begin
    EventBackup := TEventBackup(EventBackupList[I]);
    SetMethodProp(EventBackup.Component, 'OnClick', EventBackup.OnClickMethod);
  end;
  EventBackupList.Clear;
end;

procedure TForm1.CheckBox1Click(Sender: TObject);
begin
  if CheckBox1.Checked then
    ReplaceOnClickEvents
  else
    RestoreOnClickEvents;
end;

initialization
  EventBackupList := TObjectList.Create;
  EventBackupList.OwnsObjects := True;

finalization
  EventBackupList.Free;

end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:48:54.160

正如 TLama 和 TOndrej 所说，有几种方法可以完成您的尝试：

1.  `if Assigned(Control.OnMouseUp) then Exit;`在你的`OnClick`事件处理程序上做

2.  在分配时“取消分配”`OnClick`事件`OnMouseUp`（反之亦然）

这两种方法都将完成您详细说明的内容，尽管“取消分配”`OnClick`事件将最有利于性能（在无限小的程度上），因为您不会`if`重复执行该语句。

# c# - 66MB 制表符分隔文件

> ID：10496560
> 
> 赞同：0
> 
> 时间：2012-05-08T10:08:19.893
> 
> 标签：c#

我有一个大的制表符分隔文件，66MB，并且想知道提取数据的最佳方法是什么：

*   我使用文本解析器吗？它会导致任何内存问题吗？
*   我是否将其导入 SQL Server
*   我要把它分成更小的块吗？

以有效方式处理如此大文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:13:23.743

由于您永远无法确定文件不会随着时间的推移而增长，因此最方便的方法是逐行读取文件并处理内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T11:22:20.480

对于任何现代系统来说，66MB 应该是相对微不足道的。使用 File.ReadAllLines() 或使用加载到内存中的整个 66MB 文件将毫无问题。

真正要考虑的是 66mb 文件中有什么？这是一回事吗？一万件事情的清单？如果您可以一次处理单个“项目”（例如，一行），您可以一次阅读一行。如果一行是 66MB，您可以一次从文件中读取一定数量的字节。

当您想将数据插入到关系数据库中时；您打算如何使用它将决定如何插入它。如果它真的只是一个 66mb 的数据块，分解是没有意义的；大多数数据库都有一种可以毫无问题地容纳 66mb 的类型（IE BLOB）。

# c++ - C++ templates cross definition

> ID：10496561
> 
> 赞同：0
> 
> 时间：2012-05-08T10:08:21.093
> 
> 标签：c++, templates

I want to know if is it possible in C++ to do that :

```
 template <typename T> class A { T link;};
 template <typename U> class B { U link;};

 class AA : A<BB> {};
 class BB : B<AA> {}; 
```

because it generates the error :

```
 error: ‘BB’ was not declared in this scope
 error: template argument 1 is invalid 
```

i have tryed to use anticipate declaration :

```
 class AA;
 class BB;

 class AA : A<BB> {};
 class BB : B<AA> {}; 
```

but it didn't work :

```
 In instantiation of ‘A<AA>’:
 error: ‘A<T>::s’ has incomplete type
 error: forward declaration of ‘struct AA’ 
```

thank you for your help,

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T10:40:16.850

您的问题不是模板，而是无限嵌套（是的，从技术上讲，是使用不完整的类型来定义成员）。删除模板，你会遇到同样的问题：

```
struct A;
struct B;

struct A { B x; };

struct B { A y; }; 
```

从概念上讲，这是行不通的。因为，真的，你在这里得到的是一个`A`包含一个`B`包含一个`A`包含一个`B`......到无穷大的一个。乌龟一路下来。

然而，*真正*起作用的是使用*指针*成员。它们适用于不完整的类型，因此代码也适用——甚至适用于模板。

```
template <typename T> class A { T* link;};
template <typename U> class B { U* link;}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:13:04.100

看看我之前问过的这个问题。[如何转发声明模板类](https://stackoverflow.com/questions/3879162/how-to-forward-declare-a-template-class)

基本上，如果您正向声明模板类型，则必须指定所有模板参数。

# python - Is it possible to connect to several backends with one ipython-qtconsole frontend?

> ID：10496562
> 
> 赞同：2
> 
> 时间：2012-05-08T10:08:23.527
> 
> 标签：python, ipython

I am just discovering how great ipython-qtconsole is. I mainly like the block editing, but also syntax highlighting, inline graphs and how I can use it to connect to remote computers over ssh.

Since ipython-qtconsole has tabs, it seems like I should be able to connect one frontend to multiple existing backends, one for each tab, but I can't find any documentation for that. Is it possible?

EDIT: I understand that I can start new local kernels and that I can connect to one existing kernel on startup, but after I have started up, can I connect to other existing kernels? These kernels will be remote over ssh, so I assume that I need to start them outside of ipython-qtconsole.

# machine-learning - How to categorize continuous data?

> ID：10496566
> 
> 赞同：1
> 
> 时间：2012-05-08T10:08:41.670
> 
> 标签：machine-learning, classification

I have two dependent continuous variables and i want to use their combined values to predict the value of a third binary variable. How do i go about discretizing/categorizing the values? I am not looking for clustering algorithms, i'm specifically interested in obtaining 'meaningful' discrete categories i can subsequently use in in a Bayesian classifier. Pointers to papers, books, online courses, all very much appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:41:18.010

这是机器学习的本质，也是研究最多的问题之一。

最小二乘回归、逻辑回归、SVM、随机森林广泛用于这类问题，称为二元分类。

如果您的目标是对数据进行实用分类，可以使用多个库，例如 python 中的 Scikits-learn 和 java 中的 weka。他们有一个很棒的文档。

但是，如果您想了解机器学习的内在本质，只需搜索（此处或在 google 上）机器学习资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:11:07.197

如果您想成为真正的书呆子，请生成一堆不同的可能离散化，然后在其上训练分类器，然后通过特征表征离散化，然后在其上运行分类器，看看哪种离散化是最好的！？

一般来说，离散化的东西更像是一门艺术，并且对输入变量范围的含义有很好的理解。

# c# - 将分层列表投影到另一个具有匿名类型（或动态）的分层列表？

> ID：10496567
> 
> 赞同：2
> 
> 时间：2012-05-08T10:08:45.053
> 
> 标签：c#, json, dynamic, anonymous-types

我有一个**强类型**对象列表。说`List<Activity>`。每个`Activity`都有许多属性，比如`Title`, `Id`, `ParentActivity`, `ChildrenActivities`,`ActivityType`等。列表是分层的，也就是说，列表中的每个活动都可能有子活动，每个子活动可能仍然有自己的子活动，等等。

我需要将此列表转换为 JSON，以便可以将其与第三方 JavaScript UI 库一起使用。但是，目标列表只有原始列表的一部分属性，例如`Id`和`Title`。

因为我有许多类型和许多具有相同条件的地方，所以我不想定义目标列表类型，因此我没有**强类型的**目标。换句话说，我没有也`List<SubActivity>`不想创建这个`SubActivity`类。

如何即时进行这种分层转换，然后从目标列表中获取 JSON 字符串？是否有可能使用`dynamic`关键字、**匿名类型**？

**更新：**

想象一下`Activity`：

```
public class Activity
{
    public int Id { get; set; }

    public ActivityType Type { get; set; }

    public string ActivityTitle { get; set; }

    public string Description { get; set; }

    public Activity? Parent { get; set; }

    public List<Activity> Children { get; set; }
} 
```

我有这个类实例的分层列表：

```
List<Activity> activities = ActivityManager.GetActivitiesHierarchically(); 
```

现在，我需要将此分层列表转换为 JSON 字符串，但我不需要呈现某些属性，包括`Description`例如。因此，在将列表序列化为 JSON 之前，我需要进行**投影**（某种转换）。我可能会创建一个名为的类型`JsonActivity`，如下所示：

```
public class JsonActivity
{
    public int id { get; set; }

    public string title { get; set; }

    public List<JsonActivity> items { get; set; }
} 
```

但是因为这种模式在我的代码的许多地方针对不同类型重复，所以我不想定义`JsonEntity`DTO。

有没有办法通过动态投影进行分层转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:16:48.300

我认为你不能在 C# 中创建递归匿名类型，所以尝试使用它们是行不通的。

但是由于您要将结果序列化为 JSON，因此`Dictionary<string, object>`应该可以使用。

不过，lambda 必须是递归的。为了解决这个问题，您可以编写一个将自身作为参数的 lambda：

```
delegate IDictionary<string, object> RecursiveSelector<TSource>(
    RecursiveSelector<TSource> selector, TSource source);

static IEnumerable<IDictionary<string, object>> RecursiveSelect<TSource>(
    this IEnumerable<TSource> source,
    RecursiveSelector<TSource> selector)
{
    return source.Select(x => selector(selector, x));
} 
```

然后你可以像这样使用它：

```
List<Activity> activities = …;
var result = activities.RecursiveSelect(
    (s, a) =>
    new Dictionary<string, object>
    { 
        { "id", a.Id },
        { "title", a.ActivityTitle },
        { "children", a.Children.Select(c => s(s, c)).ToArray() }
    }); 
```

# css - Set a Grid next to another in a gwt Page

> ID：10496569
> 
> 赞同：0
> 
> 时间：2012-05-08T10:08:48.237
> 
> 标签：css, gwt, grid, alignment

What kind of styling should I set to two Grids in order the one to stand next to the other? In the way I have created them in the xml file, the second stands below the other and it does not comply with the style of the general Page:

```
<div>
      <z:StaticDataGrid  ui:field="staticDataGrid" />
      <z:DataGrid ui:field="displayedDataGrid" />
</div> 
```

StaticDataGrid and DataGrid are class representing Grid.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:06:48.043

将网格放置在 Horizo​​ntalPanel 中以将它们并排放置。

```
<z:HorizontalPanel>
  <z:StaticDataGrid  ui:field="staticDataGrid" />
  <z:DataGrid ui:field="displayedDataGrid" />
</z:HorizontalPanel> 
```

# http - What is the purpose of the "q" values in the HTTP "Accept" request header?

> ID：10496570
> 
> 赞同：28
> 
> 时间：2012-05-08T10:08:54.977
> 
> 标签：http, http-headers

I have made a http request using Firefox.Now the request header shows the following:

```
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

But curious to know what is `q=0.9,*/*;q=0.8`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-08T10:18:30.347

每个媒体范围可以后跟一个或多个接受参数，以“q”参数开头，用于指示相对质量因子。第一个“q”参数（如果有）将媒体范围参数与接受参数分开。质量因子允许用户或用户代理使用从 0 到 1 的 qvalue 标度来指示该媒体范围的相对偏好程度。默认值为 q=1

信息可[在此处获得](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

[在这里](http://www.gethifi.com/blog/browser-rest-http-accept-headers)也可以找到一个很好的解释。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-09-16T14:34:12.360

标题`Accept`列表首先拆分，`,`然后`;`为每个条目的附加参数。因此，您示例中的列表分为`text/html`、`application/xhtml+xml`和。每个条目上的参数向服务器指示该媒体类型的偏好程度。如果缺失（如前 2 个条目），则默认为其最大值。的最后一个条目向服务器表明，最终任何内容类型都是可以接受的，但不如列出的其他内容类型更可取。否则，服务器可能决定根本不发送任何内容，因为客户端无论如何都不会“接受”它。`application/xml;q=0.9``*/*;q=0.8``q=``1``*/*;q=0.8`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-31T10:29:01.703

Q 值始终是一个从零到一的数字，它代表相对质量值。默认 Q 值为 1.0。

所以 Q 值为 0.9 的东西比 Q 值为 0.6 的东西更受欢迎。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-28T16:52:55.513

要添加到@Robin479 的正确答案，问题中的接受标头等效于，

接受：
text/html;q=1,
application/xhtml+xml;q=1,
application/xml;q=0.9,
*/*;q=0.8

注意：换行符只是为了更好的可读性。

# android - Building Android on One Machine and Emulating it on Another

> ID：10496571
> 
> 赞同：0
> 
> 时间：2012-05-08T10:08:57.117
> 
> 标签：android, build, android-emulator

I haven't been able to find anything on this. Apologies if this duplicates anything in existence.

I'm currently have a virtual version of Ubuntu 10.10 accessing a shared folder in my main OS (Arch Linux) to build Android. I can successfully build it and run the emulator from my virtual machine. (The make file updates my shell appropriately, correct?) When I go to my actual OS and try to run the same emulator, I get an error that states:

```
$ ./out/host/linux-x86/bin/emulator
emulator: ERROR: You did not specify a virtual device name, and the system directory could not be found 
```

I have tried setting ANDROID_PRODUCT_OUT to the same value on my actual computer, but I still get the same error. Is this just a simple error, or should I just stick to running the emulator on my virtual machine?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:45:57.493

这不是一个完整的答案，但我能够通过在我的计算机上创建一个 Ubuntu 分区并进入它并转发 X 显示来做我想做的事情。

这样做的参考：

*   [http://source.android.com/source/initializing.html](http://source.android.com/source/initializing.html)
*   [https://wiki.archlinux.org/index.php/Change_Root](https://wiki.archlinux.org/index.php/Change_Root)

设置好我的 Ubuntu 环境后，我制作了以下脚本以 chroot 进入其中（这几乎直接取自第二个来源）：

```
xhost +

cd /mnt/ubuntu

mount           /dev/sda2 /mnt/ubuntu
mount -t proc   proc      proc/
mount -t sysfs  sys       sys/
mount -o bind   /dev      dev/
mount -t devpts pts       dev/pts/

mount -o bind   /mnt/data mnt/data/
mount -o bind   /home     home/

chroot /mnt/ubuntu /bin/sh -c "export DISPLAY=:0.0; /bin/bash -i"

umount {proc,sys,dev/pts,dev}
umount {mnt/data,home}
cd .. && umount ubuntu 
```

然后进入你的安卓根目录（$android），设置环境并构建它。启动模拟器然后应该在当前 X 会话中启动它。

```
cd $android
. build/envsetup.sh
lunch full-eng
make -j16
emulator 
```

# visual-studio-2010 - How to debug x64 COM dlls on Win7? Native COM dlls couldn't be found in Debug\Windows\Modules

> ID：10496576
> 
> 赞同：0
> 
> 时间：2012-05-08T10:09:11.187
> 
> 标签：visual-studio-2010, debugging, windows-7, com, 64-bit

I googled a lot but no answer found. My project is a plugin of a .Net application.

The project was started 2 years ago on WinXp 32bit platform. A 32bit COM component was used for some reasons. Because I have the source codes, I can debug into the COM component freely. Everything is fantastic at that time.

At the beginning of this year, my project is upgrading to x64 because of memory benefit. And the x64 version of the COM component is also ready. Everything works fine except debugging.

Now I can't debug into the COM dlls anymore. There is no any COM dll or interop dll listed in the Debug\Windows\Modules window. Thus, I can't specify the symbol directory for dll.

I know there is no mix mode support for debugging. So When I attach the exe, I select "Native".

I tried VS 2005, VS 2008 and VS 2010, all of them give me the same issue. Then I thought may be it is because x64\. So I use the old 32 bit code which was debugged fine on WinXP to try again. But I still can't debug either.

Any idea? Is this because of the win7 platform? Or if I need to add some entries in the exe's config file?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:23:00.153

或许，我应该这样问：

调试器决定哪个模块应该在模块列表中的规则是什么？如果你比较 ProcessExplorer 和 VS 的模块列表，你会发现这两者并不相同。

# c# - What is the advantage of adding namespace in web.config file?

> ID：10496580
> 
> 赞同：2
> 
> 时间：2012-05-08T10:09:26.350
> 
> 标签：c#, asp.net, .net, namespaces, web-config

What is the advantage of adding namespace in `web.config` file?

```
<configuration>
     <system.web>
              <pages>
                <namespaces>
                  <add namespace="System.Collections" />
                </namespaces>
              </pages>
          </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T10:11:10.767

这将允许添加您在视图中常用的项目的名称空间，因此您无需在需要使用它们时在每个页面/视图中添加引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:13:19.737

您在此处定义的命名空间会自动导入到应用程序的所有页面中。

# php - 如何在敏捷工具包 4.2 中使用文件上传

> ID：10496584
> 
> 赞同：1
> 
> 时间：2012-05-08T10:09:43.387
> 
> 标签：php, user-interface, frameworks, atk4

是否有工作 atk4.2 文件存储示例代码的完整示例？

我一直在搜索文档和 stackoverflow，我发现的几个例子对我不起作用。

我需要延长`Model_File`还是`Model_Filestore_File`？

首先给我错误

> 类未在文件中定义

第二个给

> 无法包含 filestore/lib/Model/Filestore/File.php

将文件上传添加到 CRUD 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:56:21.037

如果要上传文件，请在模型中使用以下内容：

```
$this->add('filestore/Field_File','file_id'); 
```

该字段应引用 filestore_file.id。如果您希望上传带有缩略图的图像，那么：

```
$this->add('filestore/Field_Image','picture_id'); 
```

上传图片并提交表单后，文件的“id”将在相应的字段中。对于 Field_Image，它还将调整缩略图的大小。您可以使用自己的图像模型进一步自定义：

```
 ->setModel('MyImage');

class Model_MyImage extends filestore\Model_Image {
    public $default_thumb_width=32;
    public $default_thumb_height=32;
} 
```

这应该适用于 4.2.0，但“开发”分支目前正在进行一些改进，允许每个图像有多个缩略图大小。

# html - Floating list beside an image

> ID：10496587
> 
> 赞同：4
> 
> 时间：2012-05-08T10:09:50.360
> 
> 标签：html, css

It it possible to achieve the following layout in CSS using a `<ul></ul>` and an `<img />` ?

```
|-------------| (li) (li) (li) (li) (li)
|             | (li) (li) (li) (li) (li) 
|             | (li) (li) (li) (li) (li) 
|             | (li) (li) (li) (li) (li) 
|    image    | (li) (li) (li) (li) (li) 
|             | (li) (li) (li) (li) (li) 
|             | (li) (li) (li) (li) (li) 
|-------------| (li) (li) (li) (li) (li) 
 (li) (li) (li) (li) (li) (li) (li) (li)
 (li) (li) (li) (li) (li) (li) (li) (li) 
```

[JSfiddle](http://jsfiddle.net/CFHru/); I have tried using `float`, `inline-block` and `display:table`, but whenever the number of `<li>` elements exceed the allowed space, the whole list is shifted below the image. This number is randomly generated every time. Can vary from 1 to 50.

My current HTML is:

```
<img src="" />
<ul>
    <li>a</li>
    <li>b</li>
    <li>c</li>
    <li>d</li>
    <!-- etc.. -->
</ul> 
```

The best layout I got was using `box-sizing` some `padding`:

```
|-------------| (li) (li) (li) (li) (li)
|             | (li) (li) (li) (li) (li) 
|             | (li) (li) (li) (li) (li) 
|             | (li) (li) (li) (li) (li) 
|    image    | (li) (li) (li) (li) (li) 
|             | (li) (li) (li) (li) (li) 
|             | (li) (li) (li) (li) (li) 
|-------------| (li) (li) (li) (li) (li) 
                (li) (li) (li) (li) (li)
                (li) (li) (li) (li) (li)
                (li) (li) (li) (li) (li) 
```

CSS3-based solutions are accepted. Javascript-based solutions are not.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T10:14:25.223

据我了解这样写：

```
img{
    float:left;
}

ul{
    display:inline;
} 
```

检查这个[http://jsfiddle.net/CFHru/1/](http://jsfiddle.net/CFHru/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:11:25.020

也许尝试将其`<img>`作为`<li>`元素之一？

# asp.net - Select Row from GridView

> ID：10496588
> 
> 赞同：0
> 
> 时间：2012-05-08T10:09:50.653
> 
> 标签：asp.net, list, gridview

how i can select Row from GridView without DataKey ?

I have a Grid view with data source from List and i need when press select select Get the selected row ?

```
List<string> RequestedMovie = new List<string>();
GridView3.Datasource = RequestedMovie; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:57:23.557

您可以使用以下代码行直接获取所选行

```
 GridViewRow objRow = GridView3.SelectedRow;
  ..
  .. 
```

我希望这能解决你的问题。

# iphone - Contact list on iPhone without using contact picker

> ID：10496589
> 
> 赞同：0
> 
> 时间：2012-05-08T10:09:51.843
> 
> 标签：iphone, ios, contacts

I am working on an iPhone application. Can someone tell me how can I display all my contact list in my mobile without using Contactpicker? How do I display all my contact list in iPhone application?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:12:01.823

您需要获取地址簿联系人并将其显示到 uitableview 中，请参阅此处的苹果地址簿编程指南

[http://developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html](http://developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)

# c# - C1Excel error on load excel file

> ID：10496591
> 
> 赞同：0
> 
> 时间：2012-05-08T10:09:56.443
> 
> 标签：c#, excel, componentone

I tried to load excel file using C1Excel. Everything works fine until I loaded excel file and had activex with it. The error said:

```
This file cannot be read because it is password-protected. 
```

But, It is no need password to open the file. The code is below.

```
C1XLBook book = new C1XLBook();
book.Load("excelfile.xls"); //Here is the error code appear
foreach (XLSheet loopSheet in book.Sheets)
{
    //code
} 
```

So, if anyone ever find this problem and solved it, please to share.

I have tried that file can be loaded by `Microsoft.Office.Interop.Excel`. Is there any method or something that C1Excel can load data from it. I wish I could use `Microsoft.Office.Interop.Excel` to replace C1Excel, but the project has code already with `C1Excel` every where.

Thank you

# android - Android C2DM，Push App 中的 Sender ID

> ID：10496598
> 
> 赞同：1
> 
> 时间：2012-05-08T10:10:31.230
> 
> 标签：android, push, android-c2dm, sender-id

我开发的 Android C2DM 推送应用程序在应用程序端代码中有我的发件人的引用（例如：“sender@gmail.com”）。案例 1：当我在 Android 设备上安装此应用程序时，该设备在帐户和同步设置中的 gmail id 为“personalid@gmail.com”。应用程序已成功注册到 C2DM，但它没有收到任何推送的消息。

案例 2：当我在 Android 设备的帐户和同步中使用相同的发件人 ID（“sender@gmail.com”）时。我收到我推送的所有消息。

为什么案例 1 失败而案例 2（发件人 ID 全部）成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:52:26.580

请确保您已从手机的内置 gtalk 应用程序中退出，如果您没有从 gtalk 应用程序中退出，那么它将在 gtalk 和您的个人应用程序之间产生歧义，以便从谷歌服务器推送消息，因此无法发送向任何应用程序发送消息并给出例外。

推送通知的详细信息，请查看[https://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

最好的 c2dm 教程，[http: //www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:45:54.253

这就是 C2DM 的工作方式。它以这种方式工作是有道理的，因为它需要 和 的电子邮件`registration id`地址`authentication token`。

发送推送消息时，您的第三方服务器使用基于（可能）“sender@gmail.com”的注册 ID，以及基于同一电子邮件的身份验证令牌。Google 的服务器会查看您的设备并尝试查找该特定电子邮件地址帐户。您可以在设备上拥有多个帐户，但其中至少一个必须是用于注册设备的帐户。

如果这无关紧要，为什么谷歌会要求提供电子邮件？直接使用设备的唯一 ID 会容易得多。

# javascript - 在 jqGrid 中以编程方式设置“操作”格式化程序

> ID：10496600
> 
> 赞同：1
> 
> 时间：2012-05-08T10:10:37.787
> 
> 标签：javascript, jquery, jqgrid

我想仅基于单元格内容以编程方式将自定义操作格式化程序添加到特定行。任何想法我该怎么做？

如果您查看以下示例，它使用 jGrid 预定义的操作格​​式化程序

*   [http://www.ok-soft-gmbh.com/jqGrid/ActionButtons.htm](http://www.ok-soft-gmbh.com/jqGrid/ActionButtons.htm)
*   [http://www.trirand.com/jqgridwiki/doku.php?id=wiki:predefined_formatter](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:predefined_formatter)

但这会在每一行上创建小的编辑/删除图标。我想编写一个 GUI 来使用 jqGrid 管理属性。就我而言，有些键不应该是可编辑的。

我从服务器获取的数据将如下所示：

```
var properties = [
        {key:"Key 1", value:"Value 1", editable: false},
        {key:"Key 2", value:"Value 2", editable: false},
        {key:"Key 3", value:"Value 3", editable: true},
        {key:"Key 4", value:"Value 4", editable: false},
        {key:"Key 5", value:"Value 5", editable: false},
        {key:"Key 6", value:"Value 6", editable: false},
        {key:"Key 7", value:"Value 7", editable: false},
        {key:"Key 8", value:"Value 8", editable: true},
        {key:"Key 9", value:"Value 9"}, editable: false},
        {key:"Key 10",value:"Value 10", editable: false},
        {key:"Key 11",value:"Value 11", editable: false},
        {key:"Key 12",value:"Value 12", editable: false}
], 
```

所以我想做的是仅当来自服务器的数据（Key3 和 Key8）中的可编辑属性为真时才显示小铅笔图标符号。这里的问题是是否有办法控制预定义的操作格​​式化程序仅在某些条件下呈现这些图标。

# c - 可以比较布尔运算的结果吗？

> ID：10496603
> 
> 赞同：3
> 
> 时间：2012-05-08T10:10:41.310
> 
> 标签：c, operators, standards

C 标准是否确保布尔运算（`==`、`!=`、`>`、`&&`、`||`等）始终具有相同的值来表示真实性？换句话说，如果为真，它们是否总是返回一些正常数，或者是唯一保证它将是一个正数？

我问这个的原因是要知道下面这样的陈述是否有效。如果两个指针都为 NULL 或两个指针都指向某个地方（不一定是同一个地方），则该表达式应该为真。

```
if ((ptr1 == NULL) == (ptr2 == NULL)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T10:13:45.557

是的，尽管C 将整数值*解释*为布尔值的规则声明`0`为 false 并且任何其他值为 true ^((a))，但比较运算符的结果始终为`1`or `0`。

因此，例如，表达式`(a == b)`永远不会给您。`42`

标准（C11）的相关位都在`6.5 Expressions`：

> `6.5.8/6: Each of the operators < (less than), > (greater than), <= (less than or equal to), and >= (greater than or equal to) shall yield 1 if the specified relation is true and 0 if it is false.`
> 
> `6.5.9/3: The == (equal to) and != (not equal to) operators are analogous to the relational operators except for their lower precedence. Each of the operators yields 1 if the specified relation is true and 0 if it is false.`
> 
> `6.5.13/3: The && operator shall yield 1 if both of its operands compare unequal to 0; otherwise, it yields 0.`
> 
> `6.5.14/3: The || operator shall yield 1 if either of its operands compare unequal to 0; otherwise, it yields 0.`

这涵盖了您在问题中明确提到的所有内容。我能想到的唯一其他布尔运算（在我脑海中）是逻辑 NOT 运算符`!`，它也被涵盖：

> `6.5.3.3/5: The result of the logical negation operator ! is 0 if the value of its operand compares unequal to 0, 1 if the value of its operand compares equal to 0.`

* * *

^((a))：参见 C11 中处理 、 和 的部分`if`，它们`while`都包含类似于 if/while 发生某些事情的语言。具体来说：`do``for``"the expression compares unequal to zero"`

> `6.8.4.1/2: In both forms [of the if statement, one with and one without an else clause], the first substatement is executed if the expression compares unequal to 0\. In the else form, the second substatement is executed if the expression compares equal to 0.`
> 
> `6.8.5/4: An iteration statement [while, do and for] causes a statement called the loop body to be executed repeatedly until the controlling expression compares equal to 0.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:11:40.480

是的。

运算符生成的值将始终为 1 表示真，0 表示假。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:19:28.620

结果

*   否定运算符 ( `!`)

*   关系运算符 ( `<`, `>`, `<=`, `>=`)

*   等式运算符 ( `==`, `!=`)

    逻辑运算符 ( `&&`,   `||`)

是(false) 或(true)的`int`值。`0``1`

# c++ - 从 std::vector 继承的这个类声明有什么问题吗？

> ID：10496610
> 
> 赞同：1
> 
> 时间：2012-05-08T10:11:11.590
> 
> 标签：c++, visual-studio, compiler-errors, class-design, stdvector

我意识到那里有更好的编译器，但我更喜欢坚持使用 vc6，每隔一段时间，我就会发现奇怪的侥幸，想知道这个是本地化到我的安装还是每个人的安装。

请记住，有问题的编译器是：
**Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 12.00.8168 for 80x86**
（链接器等不相关，因为这个问题似乎不涉及它们）

尝试声明一个从 std::vector 继承的类，它工作正常，除非您还尝试具体定义第二个模板参数：

```
10: class foo : public std::vector<LPTSTR,std::allocator<LPTSTR>>
11: {
12:   public:
13:   foo();
14:   ~foo();
15: }; 
```

不编译并给出此错误： c:\foo\foo.h(10) : error C2143: syntax error : missing '>' before '{'

现在，真正的问题是，为什么这是合法的：

```
10: class foo : public std::vector<LPTSTR,std::allocator<LPTSTR>>> 
11: {
12:   public:
13:   foo();
14:   ~foo();
15: }; 
```

`>`请注意第10 行末尾的额外内容......我想知道的是：

1.  我做错了什么吗*？*
2.  这只发生在我的安装中吗？
3.  我应该避免使用解决方法，因为它可能会在以后以某种方式导致问题吗？

我尝试尽可能多地对此进行研究，但大多数程序员都知道在线搜索并不那么容易，因为搜索引擎似乎远远受限，甚至没有正则表达式搜索，它就会成为命中或未命中和/或人气竞赛（是足够受欢迎的感兴趣的话题，可以在谷歌等上排名）。

我非常感谢您对此的提示（甚至不提示）回复。我尝试向他人回答问题，即使这对我来说似乎很容易，并尝试记住知识总是从缺乏知识开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T10:13:21.917

这可能意味着您的编译器没有`>>`按照您的预期解析符号，即在这方面它不支持 C++11。

试试这个

```
std::vector<LPTSTR,std::allocator<LPTSTR> >
                                         ^ note space 
```

并阅读[为什么从标准库容器继承可能不是一个好主意](https://stackoverflow.com/questions/4353203/thou-shalt-not-inherit-from-stdvector)。

至于“为什么 >>> 合法”的问题，嗯，它根本不合法，在 C++03 上不合法，在 C++11 上也不合法。我只能得出结论，这是您的编译器的一个功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T10:13:25.600

```
class foo : public std::vector<LPTSTR,std::allocator<LPTSTR>> 
```

不编译，因为`>>`被视为一个标记，您应该用空格分隔右括号。这是在 C++11 中修复的。

此外，**您不应该**从 std 容器继承，因为它们不是为此而设计的（例如，它们没有虚拟析构函数）。

# ios - Core Data 属性计数并在 TableView 中显示结果

> ID：10496611
> 
> 赞同：0
> 
> 时间：2012-05-08T10:11:16.427
> 
> 标签：ios, core-data, ios5, count, nsfetchrequest

我有一个名为**Car**的实体，它有**2 个属性**：**name**和**color**。

我在数据库中有几辆车：

> **名称**：本田思域
> 
> **颜色**: 蓝色
> 
> **名称**：大众高尔夫
> 
> **颜色**: 蓝色
> 
> **名称**：雷诺Twingo
> 
> **颜色**：红色
> 
> **名称**：雪佛兰科迈罗
> 
> **颜色**: 白色

现在我需要**计算每种颜色有多少辆车**，然后将**结果放在 UITableView 中。**

因此，例如，在 TableView 中会有：

> 蓝色 (2)
> 
> 红色 (1)
> 
> 白色 (1)

想象一下，大约有 70 种不同的颜色。

我搜索了许多Core Data的网站和书籍，但我仍然不知道这是否可能。

是否可以？如果可能，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:01:41.917

这些是简单的提取。实际上，您可以使用 NSFetchedResultsController，并将“颜色”设置为部分名称，它会返回给您一个包含所有对象的数组，并且它们将按颜色分组。

就像是...

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Car"];    
NSSortDescriptor *sectionSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"color" ascending:YES];
NSSortDescriptor *nameSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sectionSortDescriptor, nameSortDescriptor, nil];
[fetchRequest setSortDescriptors:sortDescriptors];

NSFetchedResultsController *fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"color" cacheName:@"CarCache"];
fetchedResultsController.delegate = self;
self.fetchedResultsController = fetchedResultsController;

NSError *error = nil;
if (![self.fetchedResultsController performFetch:&error]) {
    // Handle error...
} 
```

现在，您的数据将被分成多个部分，每种颜色一个部分，其中的值按名称排序。要获取数据，只需查看 FRC 的sections 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:20:24.607

我认为前面的答案不太正确。在您获取的结果控制器中，您执行通常的操作，但是

*   您获取实体`Color`
*   你排序`name`（这将是颜色的名称）

在`cellForRowAtIndexPath:`你构造适当的字符串来显示。

```
Color *color = [self.fetchedResultsController objectAtIndexPath:indexPath];
cell.textLabel.text = [NSString stringWithFormat:@"%@ (%d)", 
   color.name, color.cars.count]; 
```

`cars`从颜色到汽车的反比关系的名称在哪里。

# java - 如何从Java中包含.0的浮点数中删除小数部分

> ID：10496616
> 
> 赞同：14
> 
> 时间：2012-05-08T10:11:48.497
> 
> 标签：java, android

我只想删除包含**.0**的浮点数的小数部分。所有其他数字都是可以接受的。例如：

```
 I/P: 1.0, 2.2, 88.0, 3.56666, 4.1, 45.00 , 99.560
  O/P: 1 ,  2.2, 88,   3.567,   4.1, 45 ,    99.560 
```

除了“*将数字与“.0”进行比较并获取子字符串***之外**，还有什么方法可以做到这一点？

 *编辑：我不想要 ACTING FLOAT NUMBERs（比如 1.0、2.0 只不过是 1 2 对吗？）

我觉得我的问题有点令人困惑......
这是我的澄清：我只想向用户显示一系列浮点数。如果数字的小数部分为零，则仅显示整数部分，否则按原样显示数字。我希望现在很清楚..

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-07-18T19:45:22.657

如果安卓给你柠檬。不要扔。

```
YourFormatedStringNumber = NumberFormat.getInstance().format(myNumber);

makes -> "12.50" to "12.50"  and "12.00" to "12" 
```

[更多在文档中。](http://developer.android.com/reference/java/text/NumberFormat.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-08T10:16:25.520

您可以使用正则表达式，例如：`\\.0+$`. 如果小数点后只有 0，则此正则表达式将产生 true。

你可以做的另一件事是这样的：

```
float x = 12.5;
float result = x - (int)x;
if (result != 0)
{
    //If the value of `result` is not equal to zero, then, you have a decimal portion which is not equal to 0.
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-07-16T09:21:39.107

尝试：

```
String.format("%.0f",value); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-27T10:03:43.127

我还不能发表评论，所以请注意。数字值必须是双精度才能工作。

```
String.format("%.0f", number) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-08T10:15:51.247

尝试[NumberFormat](https://docs.oracle.com/javase/8/docs/api/java/text/NumberFormat.html)甚至[DecimalFormat](https://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html)：

> 如果您不想显示小数点后可能没有数字的小数点，请使用 setDecimalSeparatorAlwaysShown。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T10:16:55.597

好吧，从技术上讲，显示部分是文本，所以你可以用正则表达式来做。如果数字匹配，则使用组来提取正确的部分。（我稍后会用解决方案更新帖子。）

或者，你可以简单地去：

```
if ((int)Math.round(number) == number) {
   System.out.println((int) number)  
} else {
   System.out.println(number)  
} 
```

甚至：

```
System.out.println((int) Math.round(number) == number ? 
    String.valueOf((int) number) : String.valueOf(number)); 
```

小心， String.valueOf() 是必需的，因为这不起作用。System.out.println(double) 将始终被执行，即以下内容不起作用：

```
System.out.println((int)Math.round(number) == number ? (int) number : number); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-23T03:20:32.273

尝试在浮点数之前转换 int

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-23T18:16:58.007

我已经创建了这个扩展方法。如果金额包含小数（40.01），它将显示小数，否则它将仅显示金额（40.00）

1.  输入 2000.43，结果 = 2,000.43

2.  输入 2000.00，结果 = 2,000

    ```
     fun Double.FormattedAmount(): String {

        val otherSymbols = DecimalFormatSymbols(Locale.US)
        val decimalFormat = DecimalFormat("#,###,###.##", otherSymbols)
        return decimalFormat.format(this).toString()

     } 
    ```*

# android - 画廊中列表视图的 Coverflow 动画

> ID：10496617
> 
> 赞同：2
> 
> 时间：2012-05-08T10:11:51.370
> 
> 标签：android, listview, gallery, scrollable

我正在实现一个包含一系列垂直滚动列表视图的画廊。我已经用谷歌搜索了类似的实现，我在这里指定了coverflow小部件：http: [//www.inter-fuser.com/2010/01/android-coverflow-widget.html](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html)但它只处理转换为位图以进行缩放和旋转的图像在自定义画廊视图中。由于我的实现需要垂直滚动列表视图，我需要一些帮助。

我可以重复使用此代码用我的列表视图替换图像吗？或者有没有适合我要求的定制画廊。任何帮助，将不胜感激。

附上 Safari 书签页面供参考。我想要这样的视图，我应该能够将每一列滚动为垂直滚动的列表视图和水平滚动的画廊。![在此处输入图像描述](../Images/4699716837c7b67e0cc2293efc8bff00.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T10:51:12.880

看看我的回答

应该在您的活动包中添加三个类

1 **[CoverAbsSpinner.java](http://pastie.org/3878170)**

2 **[CoverAdapterView.java](http://pastie.org/3878173)**

3 **[覆盖流](http://pastie.org/3878165)**

从您的活动中调用这些课程。从activity调用CoverFlow的方式

```
import java.io.FileInputStream;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.LinearGradient;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.PorterDuffXfermode;
import android.graphics.Bitmap.Config;
import android.graphics.PorterDuff.Mode;
import android.graphics.Shader.TileMode;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.ImageView.ScaleType;

public class CoverFlowActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        CoverFlow coverFlow;
        coverFlow = new CoverFlow(this);

        coverFlow.setAdapter(new ImageAdapter(this));

        ImageAdapter coverImageAdapter =  new ImageAdapter(this);

        coverImageAdapter.createReflectedImages();

        coverFlow.setAdapter(coverImageAdapter);

        coverFlow.setSpacing(-15);
        coverFlow.setSelection(8, true);

        setContentView(coverFlow);

        //Use this if you want to use XML layout file
        //setContentView(R.layout.main);
        //coverFlow =  (CoverFlow) findViewById(R.id.coverflow);

    }

    public class ImageAdapter extends BaseAdapter {
        int mGalleryItemBackground;
        private Context mContext;

        private FileInputStream fis;

        private Integer[] mImageIds = {
                R.drawable.a,
                R.drawable.b,
                R.drawable.c,
                R.drawable.d,
                R.drawable.e,
                R.drawable.a,
                R.drawable.b,
                R.drawable.c,
                R.drawable.d
        };

        private ImageView[] mImages;

        public ImageAdapter(Context c) {
            mContext = c;
            mImages = new ImageView[mImageIds.length];
        }
        public boolean createReflectedImages() {
                //The gap we want between the reflection and the original image
                final int reflectionGap = 4;

                int index = 0;
                for (int imageId : mImageIds) {
                    Bitmap originalImage = BitmapFactory.decodeResource(getResources(), 
                            imageId);
                    int width = originalImage.getWidth();
                    int height = originalImage.getHeight();

                    //This will not scale but will flip on the Y axis
                    Matrix matrix = new Matrix();
                    matrix.preScale(1, -1);

                    //Create a Bitmap with the flip matrix applied to it.
                    //We only want the bottom half of the image
                    Bitmap reflectionImage = Bitmap.createBitmap(originalImage, 0, height/2, width, height/2, matrix, false);

                    //Create a new bitmap with same width but taller to fit reflection
                    Bitmap bitmapWithReflection = Bitmap.createBitmap(width 
                      , (height + height/2), Config.ARGB_8888);

                   //Create a new Canvas with the bitmap that's big enough for
                   //the image plus gap plus reflection
                   Canvas canvas = new Canvas(bitmapWithReflection);
                   //Draw in the original image
                   canvas.drawBitmap(originalImage, 0, 0, null);
                   //Draw in the gap
                   Paint deafaultPaint = new Paint();
                   canvas.drawRect(0, height, width, height + reflectionGap, deafaultPaint);
                   //Draw in the reflection
                   canvas.drawBitmap(reflectionImage,0, height + reflectionGap, null);

                   //Create a shader that is a linear gradient that covers the reflection
                   Paint paint = new Paint(); 
                   LinearGradient shader = new LinearGradient(0, originalImage.getHeight(), 0, 
                     bitmapWithReflection.getHeight() + reflectionGap, 0x70ffffff, 0x00ffffff, 
                     TileMode.CLAMP); 
                   //Set the paint to use this shader (linear gradient)
                   paint.setShader(shader); 
                   //Set the Transfer mode to be porter duff and destination in
                   paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN)); 
                   //Draw a rectangle using the paint with our linear gradient
                   canvas.drawRect(0, height, width, 
                     bitmapWithReflection.getHeight() + reflectionGap, paint); 

                   ImageView imageView = new ImageView(mContext);
                   imageView.setImageBitmap(bitmapWithReflection);
                   imageView.setLayoutParams(new CoverFlow.LayoutParams(120, 180));
                   imageView.setScaleType(ScaleType.MATRIX);
                   mImages[index++] = imageView;

                }
                return true;
        }

        public int getCount() {
            return mImageIds.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            //Use this code if you want to load from resources
            //ImageView i = new ImageView(mContext);
            //i.setImageResource(mImageIds[position]);
            //i.setLayoutParams(new CoverFlow.LayoutParams(130, 130));
            //i.setScaleType(ImageView.ScaleType.MATRIX);           
            //return i;

            return mImages[position];
        }
         /** Returns the size (0.0f to 1.0f) of the views 
         * depending on the 'offset' to the center. */ 
         public float getScale(boolean focused, int offset) { 
           /* Formula: 1 / (2 ^ offset) */ 
             return Math.max(0, 1.0f / (float)Math.pow(2, Math.abs(offset))); 
         } 

    }

} 
```

输出就像

![封面流预览](../Images/551f8c90fc0c90022487754c5d35bb74.png)

# variables - Symfony2，Twig：更好地使用块还是变量？

> ID：10496618
> 
> 赞同：8
> 
> 时间：2012-05-08T10:11:53.117
> 
> 标签：variables, symfony, block, twig

对于短字符串元素，哪种解决方案更好并推荐？定义块并让用户覆盖它的内容，如：

```
<title>{% block title %}{% endblock %}</title> 
```

或制作变量块，设置它们的默认值并让用户导入他想要的这个块重置变量，例如：

**基本模板：**

```
{% block variables %}
    {% set meta.title = '' %}
{% endblock %}
<title>{{ meta.title }}</title> 
```

**用户模板：**

```
{% block variables %}
    {{ parent() }}
    {% set meta.title = 'some title' %}
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T10:25:14.097

我会选择积木。另外，请记住，如果您想多次输出块的内容，可以使用以下[`block`](http://twig.sensiolabs.org/doc/functions/block.html)函数：

```
<title>{% block title %}{% endblock %}</title>

<h1>{{ block('title') }}</h1> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:01:27.353

我认为在设置变量后你必须调用 parent() 才能工作。

无论哪种方式，这都是个人喜好，只需使用使您的模板更清晰、更容易理解的任何东西。

# html - 如何更改 html 页面中的标题颜色？

> ID：10496633
> 
> 赞同：2
> 
> 时间：2012-05-08T10:12:54.553
> 
> 标签：html, css

```
<table>
    <tr>
        <td class="bgimg" valign="middle" width="10%" title="some title" nowrap>
            <img src="images/SomeLogo.gif"/>
        </td>
    </tr>
</table> 
```

如何将标题文本（“某些标题”）颜色格式化为红色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:30:40.947

您应该考虑将样式信息放入 CSS 文件中，并将您的 html 头链接到它：

```
<link rel="stylesheet" type="text/css" href="YourCSSFile.css" /> 
```

然后您的 css 文件可能包含以下内容：

```
td{
   font-size: 18px;
   font-weight:normal;
   color:#f7f7f7; //this is a hex value representing a light grey
} 
```

# jquery - 将网站转换为页面之间的 AJAX 转换（又名整页 AJAX）

> ID：10496637
> 
> 赞同：0
> 
> 时间：2012-05-08T10:13:09.297
> 
> 标签：jquery, ajax

我们有非常标准的网站，我的任务是将页面之间的链接转换为 AJAX 调用，但**保持直接链接**（例如来自搜索引擎）也能正常工作。

我的目标：

*   让直接链接像以前一样工作（以及旧 IE 的哈希回退），从直接链接到达平滑过渡，并使用 AJAX 进行进一步浏览
*   实现一些“垃圾收集”（以前查看过的页面的 DOM、脚本处理程序等）

我在 jQuery Mobile 中看到过类似的东西，但我正在寻找更通用的解决方案来从中获得灵感（或借用代码）:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:43:31.370

好的，首先您需要能够分离外部和内部链接。为此，我编写了以下 JQuery 选择器：

```
$.expr[':'].internal = function (obj) {
    return (obj.hostname == location.hostname);
};

$.expr[':'].external = function (obj) {
    return (obj.hostname != location.hostname);
}; 
```

这使您可以选择所有内部或外部链接`$("a:internal")....`

接下来，您需要覆盖所有内部链接上的点击事件，覆盖默认行为抓取 Href url 并对 href URL 执行 ajax 请求并将结果吐到正文中

```
 $("a:internal").click(ajaxLinkHandler);

    function ajaxLinkHandler() {
       $.get($(this).attr("href"), function(data) {
       $('body').html(data);
     });
} 
```

您还需要查看[history.js](https://github.com/balupton/History.js/)以启用浏览器历史记录/后退按钮和地址栏更新。您还需要在服务器端检测 AJAX 请求并仅返回`<body>`or 否则返回所有内容并将上面的示例更改为`$("html").html(data).`

您需要处理 onLoad/DOM 事件或使用新的 JQuery“On”处理`$(document).on("click", "a", ajaxLinkHandler)`程序这样，当点击事件冒泡到文档时，它将检查它是否是从锚标记启动的，因此不需要 onReady 事件。

浏览器为您管理 DOM 垃圾收集。打开任何 JQuery 页面，转到 firebug/chrome 开发工具 DOM 选项卡并检查文档。然后转到控制台选项卡并键入 $("html").remove() 回到 DOM 选项卡，您会看到它已被完全清理。您调用的是 replace() 而不是删除，因此旧的 DOM 元素将替换为来自 AJAX 调用的新元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:23:48.213

通过 AJAX 而不是自然的 HTTP 行为来加载页面相对容易实现。这只是劫持链接、停止默认点击行为和执行 AJAX 魔术的问题。

```
$(document).on('a', 'click', function (e) {
    e.preventDefault();
    // perform your AJAX
}); 
```

爬行有点让人头疼。您将需要编写客户端和服务器端代码才能为 Google 实现（这基本上是真正重要的，对吧？）。您将需要[阅读 Google 的开发人员文档，了解如何使用 Googlebot 进行这项工作。](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)

# php - 在codeIgniter中单击时突出显示的项目菜单

> ID：10496641
> 
> 赞同：0
> 
> 时间：2012-05-08T10:13:22.680
> 
> 标签：php, codeigniter

我如何在codeIgniter中创建活动菜单，它不是在悬停时，而是在单击时，例如，如果我们在某个类别中，菜单中的那个项目被突出显示，如何在CI中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:38:57.300

取决于您的路由和菜单生成脚本。最简单的方法是检查 uri 中的段。例如对于静态菜单你可以这样做：

```
<?php $class = $this->uri->segment(1)=="someController"?"highlighted":""; ?>
<a href="/index.php/someController/" class="<?php echo $class; ?>">Menu item</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:27:29.150

这里涉及几个步骤。

首先，您需要确定哪个是“当前”菜单项或类别。如果您可以构建您的网站，以便您的 URL 结构与您的顶级菜单项（和/或您的类别）之间存在直接关系，那么这将有很大帮助。

您需要一段通用的代码来生成您的主菜单。此代码可以遍历菜单项标题数组以生成菜单的 HTML。如果数组具有 URL 段的键和菜单项文本的值...

```
$menuItems = Array(
    "/home" => "Home",
    "/products" => "Products",
    "/faq" => "FAQ",
    "/aboutus" => "About Us"
); 
```

（为了清楚说明哪些是 URI 段和哪些只是菜单标题，包括前导斜杠 - 您通常会省略前导斜杠）

...然后，在您进行迭代时，您可以根据当前 URL 的相关段检查每个项目。

其次，在确定了当前项目之后，您可以将 css 类添加到相关的 HTML 元素中。

例如

```
$menuHtml = "<ul class='menu'>\r\n";
foreach($menuItems as $segment => $title) {
    if($segment == $this->uri->segment(1)) {
        $menuHTML .= "<li class='current'>$title</li>";
    } else {
        $menuHTML .= "<li>$title</li>\r\n";
    }
}
$menuHtml .= "</ul>"; 
```

然后，您需要将 CSS 中所需的高亮样式应用于`li.current`元素：

```
li.current {
    <your-highlight-css-styles-here>
} 
```

# c# - 以编程方式设置活跃的会员提供者

> ID：10496647
> 
> 赞同：0
> 
> 时间：2012-05-08T10:13:30.947
> 
> 标签：c#, asp.net, .net, asp.net-membership, membership-provider

我有一个带有自定义成员资格提供程序的 Web 应用程序。我要使用的提供程序连接到 Progress 数据库。

我有一个页面使用完全不同的会员提供商。我[尝试通过 web.config 进行设置，](https://stackoverflow.com/questions/10416027/forms-authentication-not-working-for-specific-page)但无法正常工作。

所以我想知道我是否可以为此页面以编程方式设置会员提供程序。我[在这里](http://jlchereau.blogspot.co.uk/2008/11/how-to-configure-membership-provider.html)看到它在某种程度上是可能的，尽管这看起来很老套。我希望有一种干净的方式来做这件事。SO 或更广泛的网络上的所有其他内容似乎都以[死胡同结束](https://stackoverflow.com/questions/10250941/set-membership-provider-to-use-a-specific-provider)。这向我表明，我正在尝试的事情是不可能的，但很高兴知道任何一种方式。

是否可以在运行时简单地切换 MembershipProvider？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T10:52:34.877

这不是一个理想的解决方案，但您可以在运行时[选择不同的提供程序。](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovidercollection.item.aspx)

```
var p = (ProgressMembershipProvider)Membership.Providers["ProgressProvider"];
var user = p.GetUser("Foo", true); 
```

# php - 如何使用 jquery 和 PHP 将带有字体的文本添加到图像中

> ID：10496648
> 
> 赞同：1
> 
> 时间：2012-05-08T10:13:33.723
> 
> 标签：php, jquery, imagemagick

我想使用 jquery 向图像添加可编辑文本（带有字体选择），并希望将其保存为新图像。

有人可以给我一些例子或开源工具吗？

为了进一步解释，jquery 将用于编写文本并在图像上选择字体，并且在服务器端 PHP 可用于保存新图像。我已经开发了一些服务器端编码来做同样的事情，但正在为前端寻找一个 jquery 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:17:43.630

您可以做到这一点的唯一方法是使用画布并“另存为图像”，但画布没有得到很好的支持 - 所以如果是公共网站，则不推荐。链接：[http ://www.html5canvastutorials.com/advanced/html5-canvas-save-drawing-as-an-image/](http://www.html5canvastutorials.com/advanced/html5-canvas-save-drawing-as-an-image/)

否则，您需要执行两个单独的操作 - 将要显示的文本编写为 jQuery，然后使用 PHP 中的 GD 库重新创建图像。您将很难使它们完全相同，但它们可以非常接近。

# python - 在 Django 中使用 wxSpellCheckerDialog 导致 C++“wxThread::IsMain()”断言失败

> ID：10496649
> 
> 赞同：0
> 
> 时间：2012-05-08T10:13:39.223
> 
> 标签：python, django, wxpython

续[如何在 Django 中使用 wxSpellCheckerDialog？](https://stackoverflow.com/questions/10474971/how-to-use-wxspellcheckerdialog-python-django/10476811#comment13562681_10476811)

我已经使用 pyenchant 向 Django 应用程序添加了拼写检查。

首次运行时它可以正常工作。但是当我再次调用它（或多次运行后）时，它会出现以下错误。

![在此处输入图像描述](../Images/7540d38e6888422412b9cd592845bf76.png)

> /quiz/submit/ 处的 PyAssertionError
> 
> C++ 断言“wxThread::IsMain()”在 wxEventLoop::Dispatch() 中 ....\src\msw\evtloop.cpp(244) 失败：只有主线程可以处理 Windows 消息

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:18:12.627

你不需要 wxPython 来使用 pyEnchant。你当然不应该在 django 中使用 wx 的东西。wxPython 用于桌面 GUI，而 django 是一个 Web 应用程序框架。正如“uhz”所指出的，你不能在 wxPython 运行的主线程之外调用 wxPython 方法，除非你使用它的线程安全方法，例如 wx.CallAfter。我不知道你为什么要从 Django 调用 wxPython。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:30:37.360

看来您正在尝试从 Django 代码中使用 wx 控件，对吗？如果是这样，您正在做一件非常奇怪的事情:)

当您使用 wxPython 编写 GUI 应用程序时，有一个可以处理窗口消息的主线程 - 主线程被定义为创建 wx.App 的线程。您正在尝试从非 UI 线程执行 UI 操作。所以可能在第一次运行时一切正常（一切都在 GUI 线程中执行），但在第二次尝试时，另一个 python 线程（由 django 产生？）正在执行一些非法的 GUI 操作。您可以尝试使用 wx.CallAfter ，它会从 GUI 线程中的参数执行一个函数，但这是非阻塞的。我还发现了一些你可能会考虑的东西： wxAnyThread [wxAnyThread](http://pypi.python.org/pypi/wxAnyThread)。但是我没有使用它，我不知道它是否适用于您的情况。

# algorithm - 快速确定数字是否除以集合中的任何元素

> ID：10496655
> 
> 赞同：0
> 
> 时间：2012-05-08T10:13:59.547
> 
> 标签：algorithm, math, language-agnostic

有没有一种算法可以快速确定一个数字是否是给定数字集的一个因子？

例如，`12`是一个因素，`[24,33,52]`而`5`不是。

有比线性搜索更好的方法`O(n)`吗？该集合将包含几百万个元素。我不需要找到数字，只需一个`true`或`false`结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:13:07.210

如果根据常量列表检查大量数字，一种可能的加速过程的方法是首先将列表中的数字分解为它们的素因子。然后将列表成员放入字典中，并将主要因素作为键。然后，当一个数字（潜在因子）出现时，您首先将其分解为其主要因子，然后使用构造的字典检查该数字是否是可能是给定数字的潜在倍数的数字的因子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:15:10.250

由于要搜索的集合是固定的，因此花费在组织搜索集合上的任何时间都是值得的。如果您可以在内存中获取该集合，那么我希望二叉树结构会适合。平均而言，在二叉树中搜索元素是一项`O(log n)`操作。

如果您有理由相信集合中的数字在整个范围内均匀分布，`[0..10^12]`那么对内存中排序集合的二进制搜索应该与搜索二叉树一样执行。另一方面，如果集合（或集合的任何子集）中的中间元素预计不会接近集合（或子集）所包含范围内的中间值，那么我认为二叉树会更好（实际）表现。

如果您无法将整个集合放在内存中，那么将其分解为适合内存的块并将这些块存储在磁盘上可能是可行的方法。您可以将集合的根分支和上分支存储在内存中，并使用它们在磁盘上建立索引。保存在内存中的树部分的深度是您应该自己决定的，但如果您需要的不仅仅是根和 2 级分支，在磁盘上提供 8 个块，我会感到惊讶。

当然，这只能解决您的部分问题，查找给定的数字是否在集合中；你真的想知道给定的数字是否是集合中任何数字的因数。正如我在评论中所建议的那样，我认为任何基于对集合中的数字进行因式分解的方法都是没有希望的，它给出了超出多项式时间的预期运行时间。

我会反过来处理这部分问题：生成给定数字的倍数并搜索它们中的每一个。如果你的集合有`10^7`元素，那么任何给定的数字在集合中`N`都会有大约`(10^7)/N`倍数。如果给定的数字是从范围中随机抽取的，`[0..10^12]`则平均值`N`是`0.5*10^12`，这表明（与直觉相反）在大多数情况下您只需搜索`N`自身。

是的，我知道在许多情况下您将不得不搜索更多的值。

这种方法相对容易并行化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T23:09:45.773

需要一些预计算的快速解决方案：

使用以下规则将您的集合组织在二叉树中：

*   集合的数字在叶子上。
*   树的根包含`r`所有素数中的最小值，这些素数除以集合中的一个数。
*   左子树对应于`r`（除以`r`，`r`不会无限重复）的倍数的子集。
*   右子树对应于数字的子集，而不是 的倍数`r`。

如果你想测试一个数是否能`N`整除集合中的某个元素，计算它的素数分解并遍历树直到你到达叶子。如果叶子包含一个数字，则`N`除以它，否则如果叶子为空，则不`N`除集合中的任何元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T10:58:57.137

我认为通常 O(n) 搜索是你最终会得到的。但是，根据一般数字的大小，您可以通过观察如果您正在搜索找到一个可被 D 整除的数字并且您有当前扫描的 x 和 x 不能被 D 整除，下一个可能的候选者显然在 floor([x + D] / D) * D。也就是说，如果 D = 12 并且列表为

```
5 11 13 19 22 25 27 
```

并且您正在扫描 13，下一个可能的候选编号将是 24。现在根据您输入的分布，您可以使用*二分搜索而不是线性搜索*向前扫描，因为您现在正在搜索不少于 24 的最小数字在列表中，并且列表已排序。如果 D 很大，那么您可以通过这种方式节省大量比较。

然而，从纯粹的计算复杂度的角度来看，排序然后搜索将是 O(n log n)，而线性扫描是 O(n)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T13:49:22.630

我不确定这个问题，所以让我再问一个问题：12 是 [6,33,52] 的因数吗？很明显，12 不能整除 6、33 或 52。但 12 的因数是 2*2*3，而 6、33 和 52 的因数是 2*2*2*3*3*11*13。12 的所有因子都存在于集合 [6,33,52] 中，具有足够的多重性，因此您可以说 12 是 [6,33,52] 的因子。

如果你说 12 不是 [6,33,52] 的因数，那么没有比测试每个数是否能被 12 整除更好的解决方案了；只需执行除法并检查余数。因此 6%12=6、33%12=9 和 52%12=4，所以 12 不是 [6.33.52] 的因数。但是如果你说 12*是*[6,33,52] 的因数，那么要确定数字*f*是否是集合*ns*的因数，只需将数字*ns*依次相乘，每次相乘后取余模*f*，如果余数曾经为 0，则立即报告*true* ，如果您到达数字列表的末尾而*没有余数 0，则报告**false*。

 *让我们举两个例子。首先，12 是 [6,33,52] 的因数吗？第一次（微不足道的）乘法结果为 6，余数为 6。现在 6*33=198，除以 12 余数为 6，我们继续。现在 6*52=312 和 312/12=26r0，所以余数为 0，结果为*true*。其次，5 是 [24,33,52] 的因数吗？乘法链为24%5=5，(5*33)%5=2，(2*52)%5=4，所以5不是[24,33,52]的因数。

该算法的一个变体最近被用于[攻击](http://www.nytimes.com/2012/02/15/technology/researchers-find-flaw-in-an-online-encryption-method.html?_r=1)RSA 密码系统；[您可以在此处](http://programmingpraxis.com/2012/03/20/factoring-multiple-rsa-keys/)了解攻击的工作原理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T11:36:16.260

为了针对一个常数集合测试许多潜在因素，您应该意识到，如果集合中的一个元素只是其他两个元素的倍数，则它是无关紧要的，可以删除。这种方法是一种称为[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)的古老算法的变体。测试大量候选人时，用启动时间换取运行时间：

1.  选择集合中>1的最小数字
2.  从集合中删除该数字的任何倍数，**除了它本身**
3.  对下一个最小的数字重复 2，进行一定次数的迭代。迭代次数将取决于与启动时间的权衡

你现在只剩下一个小得多的集合来进行详尽的测试。为了提高效率，您要么需要一个允许 O(1) 删除的集合的数据结构，如链表，要么只需将“已删除”元素替换为零，然后将非零元素复制到新容器中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-10T11:45:52.470

只需计算集合的乘积并使用测试因子对结果进行修正。在您的示例中 {24,33,52} P=41184

Tf 12：41184 mod 12 = 0 真 Tf 5：41184 mod 5 = 4 假

如果计算乘积会溢出计算器的算术，则可以将集合分成块，但是通过存储字符串可能会产生巨大的数字。*

# php - 构建正则表达式以将子 ul 放入 php 字符串中的 li 标记中？

> ID：10496658
> 
> 赞同：1
> 
> 时间：2012-05-08T10:14:17.690
> 
> 标签：php, regex

我是 RegEx 的新手，我正在寻找在另一个 ul 的一些子 ul 周围添加 li 的最简单方法。我得到的例子：

![](../Images/5551a90cfe26d0853622f7e920bc961d.png)

我想：

![](../Images/b4208f194b4df0947efe99ac576964f1.png)

我尝试了几种方法，但我的主要问题是将替换只发生在另一个 ul 的 ul 子项中的正则表达式中（我尝试使用 preg_replace）

你有什么想法或建议吗？

非常感谢您的帮助，

尼古拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:21:38.727

**尝试这个：**

```
$result = preg_replace('%(?s)(?<=</li>)(\s*<ul>.+?</ul>)%im', '<li>$1</li>', $subject); 
```

**正则表达式解释：**

```
<!--
(?is)(?<=</li>)(\s*<ul>.+?</ul>)

Options: case insensitive; ^ and $ match at line breaks

Match the remainder of the regex with the options: case insensitive (i); dot matches newline (s) «(?is)»
Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=</li>)»
   Match the characters “&lt;/li>” literally «</li>»
Match the regular expression below and capture its match into backreference number 1 «(\s*<ul>.+?</ul>)»
   Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s*»
      Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
   Match the characters “&lt;ul>” literally «<ul>»
   Match any single character «.+?»
      Between one and unlimited times, as few times as possible, expanding as needed (lazy) «+?»
   Match the characters “&lt;/ul>” literally «</ul>»
--> 
```

# java - 设置HTTPPOST android？

> ID：10496659
> 
> 赞同：0
> 
> 时间：2012-05-08T10:14:18.403
> 
> 标签：java, android

我想将 httppost 设置到我的服务器。现在我有模拟器的地址，但现在我想在线测试应用程序。这是代码：

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost("http://10.0.2.2/posloviPodaci/index.php"); 
```

如何为我在线的服务器设置地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:16:40.430

我觉得我可能误解了这个问题，但是您是否只需要更改传递给 HttpPost 对象的 URL 以使其指向您的服务器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:17:14.903

我相信您只需要更改`"http://10.0.2.2/posloviPodaci/index.php"`为类似`"http://your-site-name/posloviPodaci/index.php"`或取决于您在服务器上托管**index.php的方式。**

# jquery - 将多个变量发送到服务器 jQuery

> ID：10496662
> 
> 赞同：2
> 
> 时间：2012-05-08T10:14:42.227
> 
> 标签：jquery, mysql, post

如何使用`jQuery.ajax`. 我需要将变量中的值发送到更新 mySQL 的外部 PHP 文件。这是我现在使用的代码：

Javascript：

```
var number= localStorage.getItem("number")
var coords = {lat: "", lon: ""};

window.onload = function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.watchPosition(showPosition);
    }
    else{
        x.innerHTML="Geolocation is not supported by this browser.";
    }
}

function showPosition(position) {
    coords.lat = position.coords.latitude;
    coords.lon = position.coords.longitude;

    x.innerHTML="Latitude: " + coords.lat + "<br />Longitude: " + coords.lon;  
}

function sendToServer() {
    // here you can reuse the object to send to a server
    alert(coords.lon);
}

function Updatelocation() {
    jQuery.ajax({
        type: "POST",
        url: "location.php",
        data: 'x='+coords.lon, 'y='coords.lat, 'number'=number
        cache: false,
        success: function(response) {
            alert("Record successfully updated");
        }
    });
} 
```

和`location.php`：

```
<?php
  include 'config.php';

  // database connection
  $conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

  // new data

  $x = @$_POST['x'];
  $y = @$_POST['y'];
  $num = @$_POST['num'];
  // query
  $sql = "update table set 
  x=? , 
  y=? 
  where num='?'";
  $q = $conn->prepare($sql);
  $q->execute(array($x, $y, $num));
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T10:18:15.933

改变

```
data: 'x='+coords.lon, 'y='coords.lat, 'number'=number 
```

至

```
data: 'x='+coords.lon+'&y='+coords.lat+'&number='+number; 
```

顺便说一句，在您的 PHP 文件中，您引用的是`id`，但您没有发送一个名为 that 的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:25:48.057

我会使用 JSON：

```
data = {
  x: cords.lon,
  y: cords.lat,
  number:number
}
jQuery.ajax({
    type: "POST",
    url: "location.php",
    data: 'data='+JSON.stringify(data),
    cache: false,
    success: function(response) {
        alert("Record successfully updated");
    }
}); 
```

位置.php

```
<?php
    include 'config.php';

    // database connection
    $conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

    // data from javascript
    $data = json_decode($_POST['data']);

    // query
    $sql = "update table set 
    x=? , 
    y=? 
    where num='?'";
    $q = $conn->prepare($sql);
    $q->execute(array($data->{'x'}, $data->{'y'}, $data->{'number'}));
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:24:30.007

为了可读性，我会使用一个结构：

```
jQuery.ajax({
    type: "POST",
    url: "location.php",
    data: {
        x       : coords.lon,
        y       : coords.lat,
        num     : number
    },
    cache: false,
    success: function(response) {
        alert("Record successfully updated");
    }
}); 
```

另外：在您的 php 中，您使用“num”而不是“number”

**编辑**：并删除最后一个问号周围的引号

```
$sql = "update table set 
x=? , 
y=? 
where num=?"; 
```

代替

```
$sql = "update table set 
x=? , 
y=? 
where num='?'"; 
```

# ios - ios 5将导航控制器中后退按钮的背景更改为透明

> ID：10496666
> 
> 赞同：6
> 
> 时间：2012-05-08T10:14:57.923
> 
> 标签：ios, ios5, uinavigationcontroller, xcode4.2

我已经使用背景图像自定义了导航控制器标题栏，但我真的很难将后退按钮的背景颜色更改为透明，以便它与下方的绿色标题栏匹配。我对 iOS 开发相当陌生。有人可以建议可以做什么吗？

这是我用来更改导航控制器标题栏的代码，以防万一：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    if ([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {
        UIImage *image = [UIImage imageNamed:@"greenbar.png"];
        [self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
       // [[UIBarButtonItem appearance] setBackButtonBackgroundImage:image forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];

    } 

    //change back button image

} 
```

**编辑**：在做了一些研究之后，我设法得到了我想要的东西。这是更改后退按钮背景图像的代码：

```
 UIImage *image1 = [UIImage imageNamed:@"back-bt.png"];
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:image1 forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

上面的代码将图像添加到导航控制器中的所有后退按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T10:20:11.070

您无法更改默认后退按钮的外观，但您可以创建自己的按钮来替换它。

```
- (void)viewDidLoad {

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    if ([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {
        UIImage *image = [UIImage imageNamed:@"greenbar.png"];
        [self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
       // [[UIBarButtonItem appearance] setBackButtonBackgroundImage:image forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];

    } 

    //change back button image
    if(self.navigationController.viewControllers.count > 1) {
        UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];

        [backButton setTitle:@"Back" forState:UIControlStateNormal];
        [backButton addTarget:self action:@selector(didTapBackButton:) forControlEvents:UIControlEventTouchUpInside];
        backButton.frame = CGRectMake(0.0f, 0.0f, 64.0f, 41.0f);
        UIBarButtonItem *backButtonItem = [[UIBarButtonItem alloc] initWithCustomView:backButton];

        self.navigationItem.leftBarButtonItem = backButtonItem;
    }
}

- (void) didTapBackButton:(id)sender {
    if(self.navigationController.viewControllers.count > 1) {
        [self.navigationController popViewControllerAnimated:YES];
    }
} 
```

# download - NSURLConnection asynchronous downloaded data saving to local file for iPhone?

> ID：10496667
> 
> 赞同：0
> 
> 时间：2012-05-08T10:14:58.473
> 
> 标签：download, nsurlconnection, asynchronous

i need to download a mp3 file from internet through my application and i found a solution , to use NSURLConnection and connection request. here is my code (code from another faq)

```
 - (IBAction)downloadData:(id)sender
 {
    NSURL *myURL = [NSURL URLWithString:@"http://www.example.org/mp3song"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:myURL cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];

   [[NSURLConnection alloc] initWithRequest:request delegate:self];
 }

 - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
 {
   responseData = [[NSMutableData alloc] init];
 }

 - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
 {
   [responseData appendData:data];
 }

  - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
  {
   [responseData release];
   [connection release];

  }

 - (void)connectionDidFinishLoading:(NSURLConnection *)connection 
 {
    NSLog(@"Succeeded! Received %d bytes of data",[responseData
                                               length]);

    NSString *txt = [[[NSString alloc] initWithData:responseData encoding: NSASCIIStringEncoding] autorelease];
 } 
```

how will i save this response data mp3 file to my local file of iPhone?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T04:51:06.990

so i found the solution after a long googling which i forget to add the code

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString *fileName = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"myFile"];

   [responseData writeToFile:fileName atomically:YES]; 
```

thankyou

# sql - 在 SQL 中处理数字

> ID：10496668
> 
> 赞同：0
> 
> 时间：2012-05-08T10:15:06.510
> 
> 标签：sql, sql-server

我有一个问题，我必须根据列计算查询中应包含哪些记录。

我的表看起来像这样

```
Client_Id   Event   ProductID   Date            Cart

1           rem     28          2012-02-23      573473
1           add     28          2012-02-23      573473
1           rem     24          2012-02-23      573473 
```

正如您所看到的，在 Event 列中有一个 add 和 rem，这基本上意味着用户已经从他们的购物车中添加或删除了产品。

我需要得到的是只有当 productID 28 的值为正时的记录。

28 加一，删除 = 0 表示他们的购物车中没有该商品。

我为此写的查询是这样的：

```
SELECT Client_Id,
       Event,
       ProductID,
       Date,
       Cart
FROM   (SELECT *,
               'Include' = CASE
                             WHEN Total > 0 THEN 1
                             ELSE 0
                           END
        FROM   (SELECT *,
                       [ADD] + REM AS Total
                FROM   (SELECT *,
                               'ADD' = CASE
                                         WHEN Event = 'add' THEN 1
                                         ELSE 0
                                       END,
                               'REM' = CASE
                                         WHEN Event = 'rem' THEN -1
                                         ELSE 0
                                       END
                        FROM   Feed) a)b)c
WHERE  c.[Include] = 1 
```

但我不禁认为这是错误的，因为它只计算该行中的 productID 而不是总行数。

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:39:26.430

也许考虑使用以下组合：

*   使用 SELECT / UNION ALL 将 'add' 和 'rem' 分别转换为 +1 和 -1
*   使用 GROUP BY 和 SUM 聚合结果

这是说明上述概念的伪 SQL：

```
select sum(quantity), Client_Id, ProductId, Cart
from
(
select  1 quantity, *
from    feed
where  event = 'add'
union all
select  -1 quantity, *
from    feed
where  event = 'rem'
) temp
Group BY Client_Id, ProductId, Cart 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:42:13.730

试试这个：

```
 SELECT * 
      FROM (SELECT sum(CASE WHEN event = 'add'THEN 1 ELSE 0 END),
           productid
      FROM feed
     GROUP BY productid
     HAVING sum(DECODE(event,'rem', 0, 'add' ,1,0)) > 0
      ) A, feed
  WHERE A.productid = feed.productid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:29:08.400

考虑横向时间如果是删除操作，将 productid 乘以 -1，然后求和并选择 > 0。

但是，如果他们添加两个 28 会发生什么。那会给你56，这是另一回事....

就我个人而言，我会放弃事件列并添加一个数量列，将其设为负数。您可以添加 5 个 28s 并删除 4 个等...

# android - 警报管理器：如何在特定时间调用警报管理器？

> ID：10496670
> 
> 赞同：1
> 
> 时间：2012-05-08T10:15:15.750
> 
> 标签：android, alarmmanager

我想知道如何为特定时间设置闹钟。例如，我想每天早上 9 点设置闹钟。我用谷歌搜索了很多，但只找到了只为给定间隔设置警报的方法。比如 2 小时后或第二天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:39:35.660

希望这段代码可以帮助你

```
Calendar calendar = Calendar.getInstance();

//9 AM 
calendar.set(Calendar.HOUR_OF_DAY, 9);
calendar.set(Calendar.MINUTE, 0);
calendar.set(Calendar.SECOND, 0);
AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
PendingIntent pi = PendingIntent.getService(context, 0, new Intent(context, YourClass.class), PendingIntent.FLAG_UPDATE_CURRENT);
am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pi); 
```

您应该创建[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)来接收意图。

阅读[文档](http://developer.android.com/reference/android/app/AlarmManager.html)以获取更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:24:38.967

> 我用谷歌搜索了很多，但只找到了只为给定间隔设置警报的方法。比如 2 小时后或第二天。

`setRepeating()`on的第二个参数`AlarmManager`是您希望闹钟首先响起的时间。使用日历对象将其设置为明天上午 9 点，并使用`RTC`或`RTC_WAKEUP`闹钟。

# php - 贝宝订阅 PDT / IPN - 请

> ID：10496672
> 
> 赞同：5
> 
> 时间：2012-05-08T10:15:24.050
> 
> 标签：php, paypal, paypal-ipn, payment-processing

我很难理解这个贝宝付款的东西......

**如何确认用户已成功注册我的订阅？**

我对 IPN 的了解为 0，但例如：如果用户使用 example@e.com 注册我的网站，但使用 paypal 帐户 sample@s.com 付款，那么我如何匹配用户。

我读到 PDT 不会为经常性（订阅）付款发送交易 ID（tx），这是真的吗？

只需要这一切的帮助......诚实和容易:)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T11:35:19.147

是的，有时很难理解 Paypal 及其所有文档，但对于任何类型的订阅，我都会推荐 Paypal IPN。您在您的 paypal 帐户中设置 IPN URL，例如：[http://www.domain.com/ipn.php](http://www.domain.com/ipn.php)。然后您在贝宝帐户中创建一个订阅按钮，您可以在其中设置价格、定期价格等。

您可以在此处阅读有关 Paypal IPN 的更多信息： [https ://www.paypal.com/ipn](https://www.paypal.com/ipn)

创建 Paypal 按钮时，您还可以添加一些自定义字段，这些字段可以帮助您确定哪个客户真正付款。因此，例如，您有一个用户数据库，并且用户的用户 ID=100、用户名=昵称和注册电子邮件=xxx@gmail.com。现在您可以决定将 userid=100 添加为自定义字段并将其添加到 paypal 按钮。例如自定义=100。

在这种情况下，ipn.php 是一个处理所有逻辑的脚本。当用户付款时，Paypal 将任何状态发送到[http://www.domain.com/ipn.php](http://www.domain.com/ipn.php)（您在您的 paypal 帐户中将其设置为 IPN URL）。所以在这种情况下 ipn.php 需要检查支付是否完成并且状态是否正常。然后检索一个 CUSTOM 字段 ($_POST['custom'])，在本例中为 100（用户 ID）。然后用用户更新您的数据库，并以某种方式标记该用户当然在状态为 Completed 时已付款。

希望这有所帮助。但在这种情况下，用户从哪个 paypal 帐户付款以及哪个在您的数据库中注册并不重要。您所需要的只是以某种方式将其链接在一起。在这种情况下，使用 userid 或类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:22:31.820

如果您想实施 Paypal IPN 并且您的客户根据我的经验不使用相同的电子邮件，您可以使用表单来验证用户

*   用户使用 xxx@example.org 在您的网站上登录
*   用户点击您的商品并通过 yyy@example.org 付款
*   在他付款后，您可以将他重定向到他们可以将 Paypal 帐户与网站帐户合并的表格
*   每次该用户付款时，他提供的信息都会涵盖您的 IPN
*   您应该保存他的付款信息以备后用。

# asp-classic - 使用经典 ASP 从 URL 下载文件

> ID：10496675
> 
> 赞同：6
> 
> 时间：2012-05-08T10:15:39.887
> 
> 标签：asp-classic

我有几个链接到 pdf 示例的 url

abc.com/1.pdf abc.com/2g.pdf abc.com/i8.pdf

我想做的是使用 Classic ASP 在文件夹中自动下载 PDF

我尝试使用此代码[http://blog.netnerds.net/2007/01/classic-asp-push-file-downloads-from-directory-outside-of-the-web-root/](http://blog.netnerds.net/2007/01/classic-asp-push-file-downloads-from-directory-outside-of-the-web-root/) 但这不适用于 Http如果文件是本地的，它会很好用。

我想自动完成。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T05:17:49.230

我使用了 user580950 发布的代码和 AnthonyWJones 的评论，并创建了代码的函数版本。调用该函数，它返回下载文件的内容类型，如果未找到该文件，则返回一个空字符串。

```
public function SaveFileFromUrl(Url, FileName)
    dim objXMLHTTP, objADOStream, objFSO

    Set objXMLHTTP = CreateObject("MSXML2.ServerXMLHTTP.3.0")

    objXMLHTTP.open "GET", Url, false
    objXMLHTTP.send()

    If objXMLHTTP.Status = 200 Then 
        Set objADOStream = CreateObject("ADODB.Stream")
        objADOStream.Open
        objADOStream.Type = 1 'adTypeBinary

        objADOStream.Write objXMLHTTP.ResponseBody
        objADOStream.Position = 0 'Set the stream position to the start

        Set objFSO = Createobject("Scripting.FileSystemObject")
        If objFSO.Fileexists(FileName) Then objFSO.DeleteFile FileName
        Set objFSO = Nothing

        objADOStream.SaveToFile FileName
        objADOStream.Close
        Set objADOStream = Nothing

        SaveFileFromUrl = objXMLHTTP.getResponseHeader("Content-Type")
    else
        SaveFileFromUrl = ""
    End if

    Set objXMLHTTP = Nothing
end function 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-08T10:18:31.303

如果有人想使用它，我在互联网上的某个地方得到了这个代码。

```
<%
Server.ScriptTimeout = 60 * 20
' Set your settings
strFileURL = "http://pathtofile.zip"
strHDLocation = "c:\filename.zip"

' Fetch the file
Set objXMLHTTP = CreateObject("MSXML2.ServerXMLHTTP.3.0")

objXMLHTTP.Open "GET", strFileURL, False
objXMLHTTP.Send()

If objXMLHTTP.Status = 200 Then
    Set objADOStream = CreateObject("ADODB.Stream")
    objADOStream.Open
    objADOStream.Type = 1 'adTypeBinary

    objADOStream.Write objXMLHTTP.ResponseBody
    objADOStream.Position = 0 'Set the stream position to the start

    Set objFSO = CreateObject("Scripting.FileSystemObject")
    If objFSO.FileExists(strHDLocation) Then objFSO.DeleteFile strHDLocation
    Set objFSO = Nothing

    objADOStream.SaveToFile strHDLocation
    objADOStream.Close
    Set objADOStream = Nothing
End if

Set objXMLHTTP = Nothing
%> 
```

# c++ - QT插件编译问题

> ID：10496676
> 
> 赞同：1
> 
> 时间：2012-05-08T10:15:40.787
> 
> 标签：c++, qt, qt4

我对 QtPlugin 有一个严重的问题。我尝试从一个名为字典的接口构建一个插件：

```
class dictionary
{
private:
   ... some private members
public:
   ~dictionary();

   ... some no virtual methods

   virtual void collectData()=0;
   virtual void collectOperator()=0;
   virtual void collectControl()=0;
};

QT_BEGIN_NAMESPACE
Q_DECLARE_INTERFACE(CDictionnary, "shinoe.cameleon.dictionary/2.0")
QT_END_NAMESPACE 
```

我已经在一个空白字典项目中这样声明的空白字典类（blankdictionary.h）中实现了字典。

.pro 文件：

```
!include(../../../configuration.pri)

QT       += core gui

TARGET = blanktarget
TEMPLATE = lib
CONFIG += plugin

#dictionary interface includes
!include(../../../machine/kernel/includekernel.pri)

SOURCES += blankdictionary.cpp
HEADERS += blankdictionary.h 
```

空白字典.h 文件：

```
class blankdictionary : public dictionary {
   Q_OBJECT
   Q_INTERFACES(dictionary)
public:
   blankdictionary();
   void collectData();
   void collectOperator();
   void collectControl();
}; 
```

在我的 blankdictionary.cpp 文件的末尾，我有：

```
QT_BEGIN_NAMESPACE
Q_EXPORT_PLUGIN2(blanktarget, blankdictionary)
QT_END_NAMESPACE 
```

在编译时，它返回此错误：

```
blankdictionary.cpp: In function 'QObject* qt_plugin_instance()':
blankdictionary.cpp:20: error: no match for 'operator=' in '_instance = (operator new(44u), (<statement>, ((blankdictionary*)<anonymous>)))'
c:\QtSDK\Desktop\Qt\4.7.4\mingw\include/QtCore/qpointer.h:65: note: candidates are: QPointer<T>& QPointer<T>::operator=(const QPointer<T>&) [with T = QObject]
c:\QtSDK\Desktop\Qt\4.7.4\mingw\include/QtCore/qpointer.h:67: note:                 QPointer<T>& QPointer<T>::operator=(T*) [with T = QObject] 
```

任何的想法？

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:19:11.803

另一个问题（以及您在评论中提到的问题）是您已经`Q_OBJECT`在类中声明了宏`blankdictionary`，但没有从`QObject`.

# sql - 在两个正值之间添加所有负值

> ID：10496677
> 
> 赞同：0
> 
> 时间：2012-05-08T10:15:42.913
> 
> 标签：sql, sql-server-2008

这是我的桌子

```
 ID  account Value date
    0     Tom    10   6/7
    1     Tom    -9   6/8
    2     Tom    -5   6/9
    3     Tom    -4   6/10
    4     Tom    20   6/11
    5     Tom    30   6/12
    6     Tom    -4   6/13
    7     Tom    -5   6/14
    8     Tom     7   6/15
    9     Tom    -5   6/16
   10     Tom    -5   6/16
   11     Tom    10   6/16
   12     Tom    -2   6/17 
```

我必须在正值之间添加所有负值，并用以前的正值减去它们。以下是上述示例表的结果

```
 ID  account Value date
    0     Tom    10   6/7
    4     Tom     2   6/11
    5     Tom    30   6/12
    8     Tom    -2   6/15
   11     Tom     0   6/16
   12     Tom    -2   6/17 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:14:05.467

试试这个解决方案（警告：Sql Server 2012）：[http ://www.sqlfiddle.com/#!6/f5ce0/7](http://www.sqlfiddle.com/#!6/f5ce0/7)

```
with summary as
(
  select 
      *,
      -- if negative make it zero
      -- if positive make it 1

     grp = 
       sum((sign(value)+1) / 2)
       over(order by id desc) 

  from tbl
)
select 
  id = max(id),
  account = max(account),
  value = sum(value),
  date = max(date)
from summary
group by grp
order by grp desc 
```

输出：

```
ID  ACCOUNT VALUE   DATE
0   Tom     10      2001-06-07
4   Tom     2       2001-06-11
5   Tom     30      2001-06-12
8   Tom     -2      2001-06-15
11  Tom     0       2001-06-16
12  Tom     -2      2001-06-17 
```

* * *

第一步，为正数和负数创建一个标记，我们稍后将使用它来隔离组：

```
select 
    *,
    -- if negative make it zero
    -- if positive make it 1
    (sign(value)+1) / 2 as rn

from tbl; 
```

输出：

```
ID  ACCOUNT VALUE   DATE            RN
0   Tom     10      2001-06-07      1
1   Tom     -9      2001-06-08      0
2   Tom     -5      2001-06-09      0
3   Tom     -4      2001-06-10      0
4   Tom     20      2001-06-11      1
5   Tom     30      2001-06-12      1
6   Tom     -4      2001-06-13      0
7   Tom     -5      2001-06-14      0
8   Tom     7       2001-06-15      1
9   Tom     -5      2001-06-16      0
10  Tom     -5      2001-06-16      0
11  Tom     10      2001-06-16      1
12  Tom     -2      2001-06-17      0 
```

第二步，对那些 1 和 0 求和以创建分组，根据 OP 的问题，这是向后的：[http ://www.sqlfiddle.com/#!6/f5ce0/3](http://www.sqlfiddle.com/#!6/f5ce0/3)

```
select 
    *,
    -- if negative make it zero
    -- if positive make it 1

   grp = 
     sum((sign(value)+1) / 2)
     over(order by id desc) 

from tbl; 
```

输出：

```
ID  ACCOUNT VALUE   DATE            GRP
12  Tom     -2      2001-06-17      0
11  Tom     10      2001-06-16      1
10  Tom     -5      2001-06-16      1
9   Tom     -5      2001-06-16      1
8   Tom     7       2001-06-15      2
7   Tom     -5      2001-06-14      2
6   Tom     -4      2001-06-13      2
5   Tom     30      2001-06-12      3
4   Tom     20      2001-06-11      4
3   Tom     -4      2001-06-10      4
2   Tom     -5      2001-06-09      4
1   Tom     -9      2001-06-08      4
0   Tom     10      2001-06-07      5 
```

最后一步，将这些相关数字分组：[http ://www.sqlfiddle.com/#!6/f5ce0/7](http://www.sqlfiddle.com/#!6/f5ce0/7)

```
with summary as
(
  select 
      *,
      -- if negative make it zero
      -- if positive make it 1

     grp = 
       sum((sign(value)+1) / 2)
       over(order by id desc) 

  from tbl
)
select 
  id = max(id),
  account = max(account),
  value = sum(value),
  date = max(date)
from summary
group by grp
order by grp desc 
```

输出：

```
ID  ACCOUNT VALUE   DATE
0   Tom     10      2001-06-07
4   Tom     2       2001-06-11
5   Tom     30      2001-06-12
8   Tom     -2      2001-06-15
11  Tom     0       2001-06-16
12  Tom     -2      2001-06-17 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:16:39.293

适用于 Sql Server 2008：[http ://www.sqlfiddle.com/#!3/4b7cb/2](http://www.sqlfiddle.com/#!3/4b7cb/2)

```
with a as 
(
  select z.id,z.account,z.date, z.value, coalesce(x.id,-1) as grp
  from tbl z
  outer apply
  (
    select top 1 y.id
    from tbl y where y.id < z.id and y.value > 0
    order by y.id desc
  ) as x  
)
select 
  id = max(id), 
  account = max(account),
  value = sum(value),
  date = max(date)
from a 
group by grp
order by id 
```

数据样本：

```
CREATE TABLE [tbl]
    ([ID] int, [account] varchar(3), [Value] int, [date] date);

INSERT INTO [tbl]
    ([ID], [account], [Value], [date])
VALUES
    (0, 'Tom', 10, '2001-06-07 00:00:00'),
    (1, 'Tom', -9, '2001-06-08 00:00:00'),
    (2, 'Tom', -5, '2001-06-09 00:00:00'),
    (3, 'Tom', -4, '2001-06-10 00:00:00'),
    (4, 'Tom', 20, '2001-06-11 00:00:00'),
    (5, 'Tom', 30, '2001-06-12 00:00:00'),
    (6, 'Tom', -4, '2001-06-13 00:00:00'),
    (7, 'Tom', -5, '2001-06-14 00:00:00'),
    (8, 'Tom', 7, '2001-06-15 00:00:00'),
    (9, 'Tom', -5, '2001-06-16 00:00:00'),
    (10, 'Tom', -5, '2001-06-16 00:00:00'),
    (11, 'Tom', 10, '2001-06-16 00:00:00'),
    (12, 'Tom', -2, '2001-06-17 00:00:00'); 
```

输出：

```
ID      ACCOUNT VALUE   DATE
0       Tom     10      2001-06-07
4       Tom     2       2001-06-11
5       Tom     30      2001-06-12
8       Tom     -2      2001-06-15
11      Tom     0       2001-06-16
12      Tom     -2      2001-06-17 
```

* * *

这个怎么运作：

```
select *, coalesce(x.id,-1) as z_id
from tbl z
outer apply
(
  select top 1 y.id 
  from tbl y where y.id < z.id and y.value > 0
  order by y.id desc
) as x
order by z.id desc; 
```

输出：

```
ID      ACCOUNT VALUE   DATE            Z_ID
12      Tom     -2      2001-06-17      11
11      Tom     10      2001-06-16      8
10      Tom     -5      2001-06-16      8
9       Tom     -5      2001-06-16      8
8       Tom     7       2001-06-15      5
7       Tom     -5      2001-06-14      5
6       Tom     -4      2001-06-13      5
5       Tom     30      2001-06-12      4
4       Tom     20      2001-06-11      0
3       Tom     -4      2001-06-10      0
2       Tom     -5      2001-06-09      0
1       Tom     -9      2001-06-08      0
0       Tom     10      2001-06-07      -1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T02:07:26.877

使用 MySQL：[http ://www.sqlfiddle.com/#!2/61773/18](http://www.sqlfiddle.com/#!2/61773/18)

这里Mysqlism太多，选择的字段不需要在GROUP BY上：

```
select 
  id, account, sum(value), date
from
(  
  select *, @gn := @gn +  ( (sign(value)+1) / 2 ) as gn
  from (tbl, (select @gn := 0)) vars
  order by id desc
) as x
group by gn
order by id 
```

最好这样写，意图是明确的：

```
select 
  max(id) as id, max(account) as account, sum(value) as value, max(date) as date
from
(  
  select *, @gn := @gn +  ( (sign(value)+1) / 2 ) as gn
  from (tbl, (select @gn := 0) vars)
  order by id desc
) as x
group by gn
order by gn desc 
```

* * *

的逻辑解释`sign(value)`，见：[https ://stackoverflow.com/a/10514961](https://stackoverflow.com/a/10514961)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T09:00:22.827

在复制我的答案时，我意识到您需要 sql-server 或 plsql。我的解决方案是针对 MySQL 的。对于那个很抱歉。也许它无论如何都有帮助。

不使用[游标](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)我看不到任何办法。

所以它来了。

测试数据：

```
drop table if exists test;
create table test(id int, value int, c_date date);
insert into test values 
(    0     ,    10   ,'2012/6/7'),
(    1     ,    -9   ,'2012/6/8'),
(    2     ,    -5   ,'2012/6/9'),
(    3     ,    -4   ,'2012/6/10'),
(    4     ,    20   ,'2012/6/11'),
(    5     ,    30   ,'2012/6/12'),
(    6     ,    -4   ,'2012/6/13'),
(    7     ,    -5   ,'2012/6/14'),
(    8     ,     7   ,'2012/6/15'),
(    9     ,    -5   ,'2012/6/16'),
(   10     ,    -5   ,'2012/6/16'),
(   11     ,    10   ,'2012/6/16'),
(   12     ,    -2   ,'2012/6/17'); 
```

您需要的程序：

```
drop procedure if exists read_test;

create procedure read_test()
begin
declare done int default false;

declare v_id, v_value int;
declare v_date date;
declare adding_result int;

declare cur cursor for select id, value, c_date from test order by id;

declare continue handler for not found set done = true;

drop table if exists tmp_result;
create temporary table tmp_result as select * from test where 1 = 0;
set adding_result = 0;

open cur;

read_loop: LOOP
fetch cur into v_id, v_value, v_date;
if done then
leave read_loop;
end if;

if v_value >= 0 then

set adding_result = adding_result + v_value;
insert into tmp_result (id, value, c_date) values (v_id, adding_result, v_date);
set adding_result = 0;

else
set adding_result = adding_result + v_value;
end if;

end loop;
insert into tmp_result (id, value, c_date) values (v_id, adding_result, v_date);
close cur;

select * from tmp_result;

end; 
```

最后

```
call read_test(); 
```

而已。输出：

```
id  value   c_date
0   10  2012-06-07
4   2   2012-06-11
5   30  2012-06-12
8   -2  2012-06-15
11  0   2012-06-16
12  -2  2012-06-17 
```

# python - 没有类型库的python IDispatch客户端

> ID：10496681
> 
> 赞同：1
> 
> 时间：2012-05-08T10:16:00.980
> 
> 标签：python, automation, win32com, idispatch, typelib

我正在尝试与 Python 一起使用只公开 IDispatch 接口并且既没有 IDL 文件也没有类型库的 COM 服务器。我确实有关于不同方法以及如何使用它们的文档。

尝试使用 win32com 包对我来说失败了，因为似乎当没有可用的类型信息时 win32com 回退到假设任何属性访问是属性获取或设置，而不是方法调用。

也就是说，当我执行以下操作时：

```
 import win32com.client
  c = win32com.client.GetActiveObject(server_progid)
  c.someServerMethod(arg1, arg2) 
```

win32com 尝试获取服务器上的*someServerMethod*属性，完全忽略 arg1、arg2。挖掘代码似乎是因为 python 正在调用没有 arg1、arg2 的 self.__getattr__。

我正在寻找解决此问题的方法：

*   一些语法告诉 win32com 我实际上是在调用一个方法；
*   其他一些实际实现此行为的python COM客户端；
*   其他建议，除了明显的“手动将文档转换为类型库”。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:07:57.700

你应该可以使用

```
c._make_method_("someServerMethod") 
```

告诉 win32com 将其视为方法而不是属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:44:05.363

一个可能的解决方案（我目前正在实施）是将*win32com.client*的使用与一个代理包装起来，该代理使用一些逻辑为每个方法调用调用 _make_method_ 。使用[此处](http://code.activestate.com/recipes/519639-true-lieberman-style-delegation-in-python/)的代码配方，我更改为方法每个不以 get_ 或 set_ 开头的属性（只是一个示例，任何允许从方法中区分属性的启发式方法都可以）。

```
import new
from types import MethodType

class Proxy(object):

    def __init__(self, target):
        self._target = target

    def __getattr__(self, aname):
        target = self._target
        ### Beginning of special logic ###
        if aname[:4]!='set_' and aname[:4]!='get_':
        ### End of special logic ###
            # Rebind the method to the target.
            return new.instancemethod(f.im_func, self, target.__class__)
        else:
            return f 
```

# jquery - 老虎机式标识条纹

> ID：10496683
> 
> 赞同：0
> 
> 时间：2012-05-08T10:16:07.873
> 
> 标签：jquery, ticker, graphical-logo

我正在寻找一个组件来以页面宽度的条纹（例如：800x100px）显示附属公司的标识，最好是 jQuery，然后是 Flash。一种是完全自动化的，不参与用户操作，并且显示图像很像老虎机（单臂强盗）。因此，可能会连续出现 8 个标识，每个标识几乎同时发生变化。

请问有人可以推荐一个吗？

（或者也许我错过了一个行话，我的搜索是徒劳的......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:22:41.600

我认为您不太可能找到执行您想要的操作的第三方代码。如果你这样做了，我会争辩说，跟踪它然后配置或更改它以满足您的要求的时间和精力可能会更有建设性和令人满意地用于自己解决问题。如果您解决了它，并且可以将您的工作抽象为其他人可以使用的东西（例如[jquery 插件](http://docs.jquery.com/Plugins/Authoring)），您甚至可以在 github 上发布它，以便其他人可以从中受益（当然假设他们提出了正确的搜索词;))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:59:38.560

我想在这里你可以找到可以帮助你的脚本：

[http://matthewlein.com/experiments/slots.html](http://matthewlein.com/experiments/slots.html) http://www.eyecon.ro/slotmachine/

# wpf - 如何根据 WPF 中的选择类型启用/禁用按钮？

> ID：10496689
> 
> 赞同：0
> 
> 时间：2012-05-08T10:16:30.163
> 
> 标签：wpf, button, treeview, isenabled

我想根据当前选择的类型触发按钮的启用状态。

例如，我有一个显示父母和他们的孩子的树视图。如果选择在“父”项上，则启用按钮“btnShowParentData”。我已经通过 ValueConvertion 做到了这一点：

```
<Button name="btnShowParentData" IsEnabled="{Binding ElementName=tree, Path=SelectedValue, Converter={StaticResource ParentSelectedConv}}" /> 
```

我寻找一种更优雅的方式。我不想为每种选择类型创建一个 ConverterClass。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:40:49.220

> 我不想为每种选择类型创建一个 ConverterClass。

您可以在转换器上使用属性来对其进行参数化。

# java - Corss-Platform JSON 刻板印象/序列化器对类型属性做出反应？(Java/Objective-C)

> ID：10496691
> 
> 赞同：1
> 
> 时间：2012-05-08T10:16:32.720
> 
> 标签：java, objective-c, json, serialization, json.net

我们有一个 .NET 项目，想要在 .NET、Java 和 Objective-C 中序列化和反序列化 JSON。不幸的是，我们遇到了以下情况：数据模型中的一个属性映射到其他 4 个类，这些类都继承自同一个基类。因此，当接收到非定型的 JSON 格式时，我们不知道将这 4 个对象之一序列化为哪种类型。

作为一种解决方案，我们想要集成一个“类型”属性，告诉序列化器将对象序列化到哪个类。JSON.NET 实际上支持这个：http: [//json.codeplex.com/discussions/56031](http://json.codeplex.com/discussions/56031)

我们现在正在寻找其他开发人员在 Java 和 Objective-C 平台上使用序列化器/反序列化器的经验。是否有机会修改这些序列化程序以使其对类型属性做出反应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:28:34.693

Gson for java 也支持。我有同样的问题并使用自定义序列化器/反序列化解决它。您所要做的就是：实现您的序列化器/反序列化器并在 GsonBuilder 中注册它。[在这里](http://sites.google.com/site/gson/gson-user-guide#TOC-Custom-Serialization-and-Deserialization)阅读。

# c++ - 如何创建语音聊天应用程序（SIP 协议）

> ID：10496695
> 
> 赞同：1
> 
> 时间：2012-05-08T10:16:45.410
> 
> 标签：c++, qt, chat, sip

我需要创建一个语音聊天应用程序。我的偏好是使用 QT 来开发客户端程序以及服务器。客户由特定编号标识。因此，当每个客户端尝试与其他客户端进行通信时，他们应该首先从服务器获取需要连接的客户端的连接详细信息。服务器有一个数据库，它存储客户端的连接详细信息..

当我在 Google 中搜索时，我发现[SIP 协议](http://en.wikipedia.org/wiki/Session_Initiation_Protocol)可用于此目的。谁能给我一些想法，如何在这种情况下使用这个 sip 协议，以及我可以与 QT 一起使用的所有工具来轻松编码。

我对sip没有太多想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:22:17.980

只需看看[现有的应用程序](http://en.wikipedia.org/wiki/List_of_SIP_software#Free_and_open_source_license_2)之一。

# java - Spring下如何在Jetty服务器上发布CXF webservice？

> ID：10496697
> 
> 赞同：0
> 
> 时间：2012-05-08T10:16:48.950
> 
> 标签：java, spring, jetty, jax-ws, cxf

我目前正在开发一个独立的 spring 应用程序（不在容器中）。此应用程序需要提供 Servlet 和 WebService。所以我选择了apache cxf和jetty。

我设法让它工作，但我有两个独立的 Jetty 实例正在运行，一个用于 servlet，另一个用于 cxf。所以我的问题是，我如何指定 CXF 使用哪个 Jetty Server 实例？

以下是我的配置的摘录。

**http服务器的设置**

```
<bean id="http-server" class="org.eclipse.jetty.server.Server"
    init-method="start" destroy-method="stop">

    <property name="connectors">
        <list>
            <bean class="org.eclipse.jetty.server.nio.SelectChannelConnector">
                <property name="port" value="8080" />
            </bean>
        </list>
    </property>
    <property name="handler">
        <bean id="handlers" class="org.eclipse.jetty.server.handler.HandlerList">
            <property name="handlers">
                <list>
                    <ref bean="ServletContainer" />
                    <bean class="org.eclipse.jetty.server.handler.DefaultHandler" />
                </list>
            </property>
        </bean>
    </property>
</bean> 
```

以上适用于servlet...

**CXF 的设置**

```
<import resource="classpath:META-INF/cxf/cxf.xml" />
<import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

<jaxws:endpoint id="WebService" implementor="com.MyWebServiceImp"
    address="/ws">
    <jaxws:features>
        <bean class="org.apache.cxf.feature.LoggingFeature" />
    </jaxws:features>
    <jaxws:properties>
        <entry key="faultStackTraceEnabled" value="false" />
        <entry key="exceptionMessageCauseEnabled" value="false" />
        <entry key="schema-validation-enabled" value="true" />
    </jaxws:properties>
</jaxws:endpoint> 
```

使用上述配置，系统启动，但 Web 服务没有“发布”到码头服务器，并且日志中没有任何“异常”。

我几乎尝试了所有我能在谷歌上找到或找到的东西。任何信息或建议将不胜感激，因为我过去几天一直在这方面。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:37:24.853

这是一个有点不同的答案，你会像现在一样通过spring创建应用程序，但是使用maven你会发布你的应用程序，同时在这里构建它是如何，你的pom.xml插件配置：

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>7.0.2.v20100331</version>
    <configuration>
        <webAppConfig>
            <contextPath>/yourapplication</contextPath>
            <descriptor>
                ${basedir}/src/main/webapp/WEB-INF/jetty/jetty-web.xml
            </descriptor>
        </webAppConfig>
        <scanIntervalSeconds>5</scanIntervalSeconds>
        <stopPort>9966</stopPort>
        <stopKey>foo</stopKey>
        <connectors>
            <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                <port>9080</port>
                <maxIdleTime>60000</maxIdleTime>
            </connector>
        </connectors>
    </configuration>
    <executions>
        <execution>
            <id>start-jetty</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>run</goal>
            </goals>
            <configuration>
                <daemon>true</daemon>
            </configuration>
        </execution>
        <execution>
            <id>stop-jetty</id>
            <phase>post-integration-test</phase>
            <goals>
                <goal>stop</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

您的 web xml`jetty-web.xml`在上面的 pom 中指定。因此，将您的 cxf Web 服务发布到码头服务器会很容易。假设一切设置正确，只需`mvn clean install`将您的服务发布到码头。

# python - 灵活的滑动窗口（在 Python 中）

> ID：10496698
> 
> 赞同：3
> 
> 时间：2012-05-08T10:16:49.530
> 
> 标签：python, text, iterator, text-search, sliding-window

**问题描述：**我有兴趣查看文本窗口中的术语，例如左侧 3 个单词和右侧 3 个单词。基本情况的形式为 w-3 w-2 w-1 项 w+1 w+2 w+3。我想在我的文本上实现一个滑动窗口，我可以用它来记录每个术语的上下文单词。所以，每一个词都曾经被当作一个词条，但是当窗口移动时，它就变成了一个上下文词，等等。但是，当词条是第一个词时，左边没有上下文词（t w+1 w+2 w+3)，当它是第二个单词时，左边只有一个上下文单词，以此类推。因此，我对实现这个灵活的滑动窗口（在 Python 中）的任何提示感兴趣，而无需分别编写和指定每种可能的情况。

回顾一下：

**输入示例**：

[“w1”、“w2”、“w3”、“w4”、“w5”、“w6”、“w7”、“w8”、“w9”、“w10”]

**输出**：

*t1* w2 w3 w4

w1 *t2* w3 w4 w5

w1 w2 *t3* w4 w5 w6

w1 w2 w3 *t4* w5 w6 w7

__ w2 w3 w4 *t5* w6 w7 w8

__ __ ETC。

我目前的计划是为输出中的每一行设置一个单独的条件来实现这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T11:49:56.120

如果您想要`n`单词的滑动窗口，请使用最大长度的双端队列`n`来实现缓冲区。

这应该说明这个概念：

```
mystr = "StackOverflow"    
from collections import deque    
window = deque(maxlen=5)
for char in mystr:
    window.append(char)
    print ( ''.join(list(window)) ) 
```

输出：

```
S
St
Sta
Stac
Stack
tackO
ackOv
ckOve
kOver
Overf
verfl
erflo
rflow 
```

# msbuild - 如何在 ccnet 文件中使用动态参数值

> ID：10496699
> 
> 赞同：0
> 
> 时间：2012-05-08T10:16:52.063
> 
> 标签：msbuild, cruisecontrol.net

当他强制构建时，我正在使用动态参数从用户那里获取值。用户为我提供了发布目录路径，如果构建成功，我必须在其中发布解决方案，所以任何人都可以告诉我如何在 publishDir 部分中获取此值。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:57:05.177

您可以通过参数名称来引用您的参数，例如，如果您的参数名称是 pubdir，那么您可以使用以下代码调用它。$[pubdir] 在您的 publishdir 部分中。

# xcode - 使用 PC 的 iPhone 应用程序开发培训

> ID：10496700
> 
> 赞同：0
> 
> 时间：2012-05-08T10:16:53.973
> 
> 标签：xcode, cross-platform

> **可能的重复：**
> [Windows 上的 iPhone 开发](https://stackoverflow.com/questions/113547/iphone-development-on-windows)

我们想为学生进行 iPhone 应用程序开发培训。但是，所有人都拥有一台mac机器是非常昂贵的。我们希望在 PC 上设置一个虚拟环境来安装和运行 mac OS，以便可以运行 XCode 等开发工具并教授 iPhone 应用程序开发的基础知识。我们将投资几台 Mac、iPhone 和 iPad，以便想要在真机上尝试练习并部署到真机的学生。

我听说这种开发设置是可能的，但我不确定如何，所以想知道是否有人设置了这样的环境，如何做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:21:06.057

这是不可能的，除非你用它构建一个所谓的“Hackintosh”（在非 Mac 计算机上安装 OSX）但我怀疑[这](http://www.osx86.net/)是官方“组织”的解决方案，如果你希望将应用程序部署到应用商店，你**必须**有一个mac

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:24:57.573

我不知道PC上的基本xcode，但是要提交给appsotre，您需要MAC OSX，如果您没有mac机器或mac book，请尝试使用VMWare安装mac osx，但您的CPU应该有一个支持英特尔虚拟化技术，几乎所有新的 CPU 都有特别的核心系列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T22:12:06.803

这很容易。使用家庭许可证（每个副本 5 台机器）购买 OS X Lion（将在虚拟机中运行），安装 VirtualBox（它是免费的），然后就可以离开了。

这将是在预算内进行沙盒学习的最便宜的途径。

# iphone - iOS，选择哪个数据库？

> ID：10496703
> 
> 赞同：1
> 
> 时间：2012-05-08T10:17:02.570
> 
> 标签：iphone, ios, database, xcode, database-design

我需要一些建议。

我正在使用一些社交网络用户开发一个 iPhone 应用程序（后来也适用于 Android）。我需要将一些数据在线存储在数据库中。

更好地使用带有 XML 的 MySQL 还是直接使用 SQLite？我想要性能和稳定性，如果一切顺利，我可能需要处理 500,000 个或更多用户。

我研究了很多关于数据库的知识，但我什至不会照顾他的管理，因为我一个人。大多数 Web 服务不支持 SQLite，只支持 MySQL。

任何人都可以给我一些合理的建议吗？

感谢整个社区。再见，厄洛斯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T10:24:02.237

数据库将在设备（iPhone/Android）上运行还是在服务器上运行？在设备中，iPhone 和 Android 都很好地支持将 SQLite 作为嵌入式数据库运行。如果您正在考虑服务器端，那么兼容性方面并不重要，因为您很可能会添加一个易于兼容的应用程序层。

# c# - 无法使用 C# 在 Windows 7 中以编程方式编辑 FileZilla Server.xml 文件？

> ID：10496704
> 
> 赞同：2
> 
> 时间：2012-05-08T10:17:04.257
> 
> 标签：c#, c#-4.0, windows-7, filezilla

我在 Windows 7 中将 filezilla [版本 0.9.39 beta] 与我的 C# windows 窗体应用程序一起使用。因此，我以编程方式在 C:\Program Files\FileZilla Server\FileZilla Server.xml 文件中添加了用户和相应的共享目录。但是当我打开 Filezilla 服务器界面并在右侧框中查看用户列表，它从不显示上述文件中添加的用户列表。[见附图]

![在此处输入图像描述](../Images/01626c0ea7c2747c0aa572b719b4aa51.png)

我还关闭了 Windows 7 中的 UAC 设置。

如何在 filezilla server.xml 文件中以编程方式添加用户。

请指导我摆脱这个问题？

谢谢和问候， P.SARAVANAN

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:16:11.567

添加用户后执行此操作：

```
System.Diagnostics.Process.Start("CMD.exe","/C "+fileZillaPath + "\\\"FileZilla Server.exe\" /reload-config"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T10:01:17.153

这是一个小的更正：

```
string pathtofilezilla = @"C:\Program Files\FileZilla Server";
System.Diagnostics.Process.Start("CMD.exe", "/C \"" + pathtofilezilla + "\\FileZilla Server.exe\" /reload-config"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T16:00:15.130

确保您输入了正确的标签！我遇到了同样的问题，问题只是 " 字符。我将这种方法用于我的 SQL 数据库和 FileZilla 用户注册

```
SqlCommand command = new SqlCommand("UPDATE users SET status = 1 WHERE status=0;", kapcsolat);
        command.ExecuteNonQuery();
        //folyamat();
        string hely = @"C:\xampp\FileZillaFTP\FileZilla Server.xml";
        try
        {
            StreamWriter wr = new StreamWriter(hely, false);
            wr.WriteLine("<FileZillaServer>");
            wr.WriteLine("      <Settings>");
            wr.WriteLine("      <Item name=\"Admin port\" type=\"numeric\">14147</Item>");
            wr.WriteLine("    </Settings>");
            wr.WriteLine("  <Groups />");
            wr.WriteLine("  <Users>");
            for (int i = 0; i < dataGridView1.RowCount; i++)
            {
                DirectoryInfo di = Directory.CreateDirectory(@"C:\\FTPUsers\" + dataGridView1.Rows[i].Cells[0].Value);
                wr.WriteLine(" <User Name=\"" + dataGridView1.Rows[i].Cells[0].Value + "\">");
                wr.WriteLine("      <Option Name=\"Pass\">" + dataGridView1.Rows[i].Cells[1].Value + "</Option>");
                wr.WriteLine("      <Option Name=\"Group\"></Option>");
                wr.WriteLine("      <Option Name=\"Bypass server userlimit\">0</Option>");
                wr.WriteLine("       <Option Name=\"User Limit\">0</Option>");
                wr.WriteLine("      <Option Name=\"IP Limit\">0</Option>");
                wr.WriteLine("      <Option Name=\"Enabled\">1</Option>");
                wr.WriteLine("      <Option Name=\"Comments\"></Option>");
                wr.WriteLine("      <Option Name=\"ForceSsl\">0</Option>");
                wr.WriteLine("   <IpFilter>");
                wr.WriteLine("      <Disallowed />");
                wr.WriteLine("      <Allowed />");
                wr.WriteLine("  </IpFilter>");
                wr.WriteLine("  <Permissions>");
                wr.WriteLine("      <Permission Dir=\"C:\\FTPUsers\\" + dataGridView1.Rows[i].Cells[0].Value + "\">");
                wr.WriteLine("      <Option Name=\"FileRead\">1</Option>");
                wr.WriteLine("      <Option Name=\"FileWrite\">1</Option>");
                wr.WriteLine("      <Option Name=\"FileDelete\">1</Option>");
                wr.WriteLine("      <Option Name=\"FileAppend\">1</Option>");
                wr.WriteLine("      <Option Name=\"DirCreate\">1</Option>");
                wr.WriteLine("      <Option Name=\"DirDelete\">1</Option>");
                wr.WriteLine("      <Option Name=\"DirList\">1</Option>");
                wr.WriteLine("      <Option Name=\"DirSubdirs\">1</Option>");
                wr.WriteLine("      <Option Name=\"IsHome\">1</Option>");
                wr.WriteLine("      <Option Name=\"AutoCreate\">0</Option>");
                wr.WriteLine("    </Permission>");
                wr.WriteLine("  </Permissions>");
                wr.WriteLine("<SpeedLimits DlType=\"0\" DlLimit=\"10\" ServerDlLimitBypass=\"0\" UlType=\"0\" UlLimit=\"10\" ServerUlLimitBypass=\"0\">");
                wr.WriteLine("              <Download />");
                wr.WriteLine("          <Upload />");
                wr.WriteLine("      </SpeedLimits>");
                wr.WriteLine("</User>");
            }
            wr.WriteLine("  </Users>");
            wr.WriteLine("</FileZillaServer>");
            wr.Close(); 
```

# dojo - DOJO：无法正确显示 portlet

> ID：10496709
> 
> 赞同：0
> 
> 时间：2012-05-08T10:17:38.810
> 
> 标签：dojo, portlet

我想在 dojo 1.7 中的 mozilla 浏览器上显示基本的 portlet，但以下是显示为简单文本的数据，而实际上没有使用 dojo API 创建任何 portlet。谁能告诉我我做错了什么？

```
<!Doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="../lib/dijit/themes/claro/claro.css"/>
<style type = "text/css">
@import "../lib/dojox/widget/Portlet/Portlet.css"</style>
<script src = "../lib/dojo/dojo.js" data-dojo-config = "async: true, parseOnLoad:true" >
dojo.require("..lib/dojox/widget/Portlet");
dojo.require("..lib/dijit/dijit");
</script>
</head>
<body class="claro">
<div data-dojo-type="dojox.widget.Portlet" title="A Simple Portlet">
<div data-dojo-type="dojox.widget.PortletSettings">
    This is a simple setting widget.
    Put Whatever you like in here
</div>
<div style="height: 100px;">
The contents of the portlet go in here.
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:48:04.973

看看`dojox.widget.Portlet`源代码。它没有重写为[AMD](http://dojotoolkit.org/features/1.6/async-modules)格式，因此您无法解决依赖关系。即使是测试`dojox/widget/tests/test_Portlet.html`也不起作用。

要解决此问题，请将加载程序切换到定义`async: false`或完全省略定义的同步模式，如 Dojo 1.7 中的同步模式是默认的。

还有另一个未解决的依赖关系，我通过`dijit._Container`在 require 之前明确要求 AMD 模块来解决它`dojox.widget.Portlet`：

```
dojo.require("dijit._Container");
dojo.require("dojox.widget.Portlet"); 
```

请参阅 jsFiddle 的工作示例：http: [//jsfiddle.net/phusick/MWnYZ/](http://jsfiddle.net/phusick/MWnYZ/)

# api - 我们应该区分 POST 响应中的“回显”请求字段吗？

> ID：10496721
> 
> 赞同：0
> 
> 时间：2012-05-08T10:18:21.847
> 
> 标签：api, naming-conventions

我们正在开发的 Web 应用程序允许开发人员从（他们开发的）表单向我们的服务器执行 HTTP POST。我们为他们提供请求和响应字段名称的 API 参考。

我们的应用程序的一个特殊要求是响应必须包含最初提交的所有请求字段——有点像响应中请求字段的回显。

为了保持 API 的**直观性**和**明确性**，我建议在响应字段名称中，我们在那些“回显”请求字段前面加上一些东西（例如“req_”或“request_”），以将它们与真正的响应数据区分开来。但是，有些人对这种方法不太确定，他们建议我们保持名称不变。

我将不胜感激您对此的意见；我对定义 API 比较陌生，所以任何反馈都会很棒。

总而言之，桌面上的两个选项是：

# 选项 1 - 不要区分响应中的请求字段

**要求：**

```
name: 'Joe Bloggs'
address: '22 My Street, My City'
amount: '100.00' 
```

**回复：**

```
transaction_id: '384765'
transaction_time: '2011-12-31T11:59:59Z'
message: 'Your transaction was successful.'
name: 'Joe Bloggs'
address: '22 My Street, My City'
amount: '100.00' 
```

# 选项 2 - 在响应中区分请求字段

**要求：**

```
name: 'Joe Bloggs'
address: '22 My Street, My City'
amount: '100.00' 
```

**回复：**

```
transaction_id: '384765'
transaction_time: '2011-12-31T11:59:59Z'
message: 'Your transaction was successful.'
req_name: 'Joe Bloggs'
req_address: '22 My Street, My City'
req_amount: '100.00' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:23:11.507

就我个人而言，我不会区分请求字段，因为它可能会让开发人员感到困惑，它还需要您有一个正确的命名约定，以便您的字段名称不会发生冲突。

# iphone - 如何开发人脸识别 iPhone 应用程序？

> ID：10496724
> 
> 赞同：7
> 
> 时间：2012-05-08T10:18:31.790
> 
> 标签：iphone, ios, camera, face-recognition, autofocus

我正在尝试开发用于人脸识别/检测的 iPhone。在我的应用程序中，我想让我的 iPhone 相机应该自动对焦和自动捕捉。

如何从 iPhone 应用程序中识别人脸？

可以在我们的 iPhone 应用程序中自动对焦面部并自动捕捉。如果可能的话，任何人都可以帮忙吗？我只想要有关此的任何建议/想法和教程。

你能帮我么？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T10:31:49.490

Core Image 有一个新的 CIFaceDetector 来实时检测人脸；您可以从这些示例开始进行概述：
[SquareCam](http://developer.apple.com/library/ios/ipad/#samplecode/SquareCam/Introduction/Intro.html)
[iOS Facial Recognition](http://i.ndigo.com.br/2012/01/ios-facial-recognition/)
[Easy Face detection with Core Image](http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T10:40:13.557

检查此代码。您必须导入以下内容：- CoreImage/CoreImage.h CoreImage/CoreImage.h 之后使用代码：-

```
-(void)markFaces:(UIImageView *)facePicture
{
// draw a CI image with the previously loaded face detection picture
CIImage* image = [CIImage imageWithCGImage:facePicture.image.CGImage];

// create a face detector - since speed is not an issue we'll use a high accuracy
// detector
CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace 
                                          context:nil options:[NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]];

// create an array containing all the detected faces from the detector    
NSArray* features = [detector featuresInImage:image];

// we'll iterate through every detected face.  CIFaceFeature provides us
// with the width for the entire face, and the coordinates of each eye
// and the mouth if detected.  Also provided are BOOL's for the eye's and
// mouth so we can check if they already exist.
for(CIFaceFeature* faceFeature in features)
{
    // get the width of the face
    CGFloat faceWidth = faceFeature.bounds.size.width;

    // create a UIView using the bounds of the face
    UIView* faceView = [[UIView alloc] initWithFrame:faceFeature.bounds];

    // add a border around the newly created UIView
    faceView.layer.borderWidth = 1;
    faceView.layer.borderColor = [[UIColor redColor] CGColor];

    // add the new view to create a box around the face
    [self.window addSubview:faceView];

    if(faceFeature.hasLeftEyePosition)
    {
        // create a UIView with a size based on the width of the face
        UIView* leftEyeView = [[UIView alloc] initWithFrame:CGRectMake(faceFeature.leftEyePosition.x-faceWidth*0.15, faceFeature.leftEyePosition.y-faceWidth*0.15, faceWidth*0.3, faceWidth*0.3)];
        // change the background color of the eye view
        [leftEyeView setBackgroundColor:[[UIColor blueColor] colorWithAlphaComponent:0.3]];
        // set the position of the leftEyeView based on the face
        [leftEyeView setCenter:faceFeature.leftEyePosition];
        // round the corners
        leftEyeView.layer.cornerRadius = faceWidth*0.15;
        // add the view to the window
        [self.window addSubview:leftEyeView];
    }

    if(faceFeature.hasRightEyePosition)
    {
        // create a UIView with a size based on the width of the face
        UIView* leftEye = [[UIView alloc] initWithFrame:CGRectMake(faceFeature.rightEyePosition.x-faceWidth*0.15, faceFeature.rightEyePosition.y-faceWidth*0.15, faceWidth*0.3, faceWidth*0.3)];
        // change the background color of the eye view
        [leftEye setBackgroundColor:[[UIColor blueColor] colorWithAlphaComponent:0.3]];
        // set the position of the rightEyeView based on the face
        [leftEye setCenter:faceFeature.rightEyePosition];
        // round the corners
        leftEye.layer.cornerRadius = faceWidth*0.15;
        // add the new view to the window
        [self.window addSubview:leftEye];
    }

    if(faceFeature.hasMouthPosition)
    {
        // create a UIView with a size based on the width of the face
        UIView* mouth = [[UIView alloc] initWithFrame:CGRectMake(faceFeature.mouthPosition.x-faceWidth*0.2, faceFeature.mouthPosition.y-faceWidth*0.2, faceWidth*0.4, faceWidth*0.4)];
        // change the background color for the mouth to green
        [mouth setBackgroundColor:[[UIColor greenColor] colorWithAlphaComponent:0.3]];
        // set the position of the mouthView based on the face
        [mouth setCenter:faceFeature.mouthPosition];
        // round the corners
        mouth.layer.cornerRadius = faceWidth*0.2;
        // add the new view to the window
        [self.window addSubview:mouth];
    }
}
}

-(void)faceDetector
{
// Load the picture for face detection
UIImageView* image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"facedetectionpic.jpg"]];

// Draw the face detection image
[self.window addSubview:image];

// Execute the method used to markFaces in background
[self performSelectorInBackground:@selector(markFaces:) withObject:image];

// flip image on y-axis to match coordinate system used by core image
[image setTransform:CGAffineTransformMakeScale(1, -1)];

// flip the entire window to make everything right side up
[self.window setTransform:CGAffineTransformMakeScale(1, -1)];
}

 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
[self faceDetector]; // execute the faceDetector code

return YES;
} 
```

希望对你有帮助谢谢:)

# javascript - 如何从 asp.net 中的代码调用 javascript？

> ID：10496725
> 
> 赞同：0
> 
> 时间：2012-05-08T10:18:42.860
> 
> 标签：javascript, asp.net, vb.net

我的页面中有 java 脚本，我想从函数后面的 vb.net 代码中调用它，并且不想调用它（onload 或 onclick 或任何类似事件），但我想从执行 looping.so 的函数中调用它它会多运行一次

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T11:24:41.443

你需要这样做：

```
 ' Define the name and type of the client scripts on the page. 
    Dim csname1 As [String] = "PopupScript"
    Dim cstype As Type = Me.[GetType]()

    ' Get a ClientScriptManager reference from the Page class. 
    Dim cs As ClientScriptManager = Page.ClientScript

    ' Check to see if the startup script is already registered. 
    If Not cs.IsStartupScriptRegistered(cstype, csname1) Then
        Dim cstext1 As New StringBuilder()
        cstext1.Append("<script type=text/javascript> getval('elementid') </") 'Your javascript function
        cstext1.Append("script>")

        cs.RegisterStartupScript(cstype, csname1, cstext1.ToString())
    End If 
```

[资源。](http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx#Y878)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:24:53.960

这实际上可以使用 SignalR。

[https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)

很酷的东西。

持久连接听起来会满足您的需求。

[https://github.com/SignalR/SignalR/wiki/PersistentConnection](https://github.com/SignalR/SignalR/wiki/PersistentConnection)

# c++ - 控制 Internet Explorer 以输入用户名/密码

> ID：10496728
> 
> 赞同：3
> 
> 时间：2012-05-08T10:18:50.847
> 
> 标签：c++, internet-explorer, winapi, com

我正在考虑尝试让我的 C++ 应用程序执行以下操作：

1.  打开互联网浏览器
2.  打开网页
3.  在网页中的特定表单中输入名称和密码
4.  点击网页上的提交按钮打开一个新页面

从我在 Internet 上的搜索来看，使用 COM 似乎可以实现这一点，尽管我对此可能不正确。我目前正在尽我所能学习 COM，但一些帮助会很棒。我希望在不使用 MFC 的情况下做到这一点。

我注意到了[这个](https://stackoverflow.com/questions/9028894/automating-internet-explorer-using-c-c)问题，我正在寻找我正在寻找的东西，但我无法理解建议的解决方案。例如，我的工具箱中没有`IWebBrowser2`选项。

**编辑：**

为了让我的问题更清楚，我通过简单地运行编码的 UI 测试在 C# 版本中完成了这项任务，但这不适用于 C++。我正在寻找打开 IE（不是在应用程序本身中），找到用户名和密码表单，将它们传递给字符串，然后在页面上找到提交按钮并单击它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:51:58.847

这在 c++ 中是很有可能的。您将不得不深入到 winapi 来做一些按键操作以及窗口处理。

我不会深入研究所有代码，但您必须执行以下操作：

*   启动 ie（如果你给它一个带有网页的命令行参数，它将打开那个页面）。
*   确保 ie 窗口已聚焦（如果您想保持简单，请等待或使用窗口的 api 遍历每个打开`HANDLE`并找到您想要的窗口）
*   用于[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310.aspx)发送`Alt`+ `D`（以获取 url 栏的焦点，在 Firefox 中它将是 a `CTRL + L`）
*   根据需要使用`SendInput`和[javascript 注入](http://www.wikihow.com/Use-JavaScript-Injections)来修改 DOM
*   您还可以使用上述 JS 注入功能[提交表单（在一切如您所愿之后）。](https://stackoverflow.com/a/7172385/496405)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:54:00.650

是的，这是可能的，但是您必须在应用程序中嵌入 Web 浏览器控件，而且这并不简单（我认为您不能通过 COM 在 Internet Explorer 的外部实例中自动执行 DHTML）。

我看到您不想使用 MFC，这使问题更加复杂。也许您可以通过 ATL 来完成，我建议您不要尝试在没有框架的情况下进行。

如果您可以使用 MFC，那么您可以使用`CDHtmlDialog`表单并访问底层 COM 接口来自动执行操作。

过去，我开发了一个使用 HTML 作为其用户界面的 MFC 应用程序，但我使用了`CDHTMLView`您可以在此处找到的类：http: [//www.codeproject.com/Articles/1783/Integrating-DHTML-into-MFC-意见](http://www.codeproject.com/Articles/1783/Integrating-DHTML-into-MFC-Views)

您可以将其用作学习如何处理 DHTML 事件以及如何使用`IWebBrowser2`界面的入口点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:17:36.983

你真的应该看看 WebDriver 能够完全按照你的描述做。有关 InternetExplorerDriver 内部的更多信息，请参阅 (http://code.google.com/p/selenium/wiki/InternetExplorerDriverInternals)。即使您不能直接使用该项目，您当然可以浏览源代码以更好地了解如何实现您想要做的事情。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-08T10:40:21.150

你想做的事情没有多大意义。

有许多 API 可用于将浏览器视图嵌入到您的程序中。例如 Qt 提供了这个。

然后，您可以自己执行 HTTP POST 请求，并在浏览器视图中显示您得到的答案。

这是一个更清洁的解决方案。

**专业提示：不要使用 Internet Explorer。**

# android - 带有水平滚动条和重叠图像的android框架布局

> ID：10496732
> 
> 赞同：1
> 
> 时间：2012-05-08T10:19:04.310
> 
> 标签：android, android-layout, android-view, android-gui

我想创建一个框架布局来放置数据库中的一些图像，这些图像需要是一个水平滚动列表。图像视图是根据数据库值动态创建的。图片必须像附件一样重叠。这是我的xml

```
 <HorizontalScrollView
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:fillViewport="true" 
                android:layout_marginTop="20dp"
                >

            <FrameLayout
                android:id="@+id/frmLayout"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:scrollbars="horizontal"
                android:layout_weight="1"
                 >

            </FrameLayout>

        </HorizontalScrollView> 
```

这是java

```
public void getAllImages(){

        cursorImages = dbAdapter.fetchImages();
        if (cursorImages.moveToFirst()) {
           BitmapFactory.Options options=new BitmapFactory.Options();
        options.inSampleSize = 2;
        do {
            String filename = cursorImages.getString(cursorImages
                    .getColumnIndex("filename"));
            try {
                InputStream ims = getAssets().open("images/" + filename);
                Bitmap bm = BitmapFactory.decodeStream(ims,null,options);
                Matrix mat = new Matrix();
                mat.postRotate(30);
                Bitmap bMapRotate = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(), bm.getHeight(), mat, true);
                 ImageView im = new ImageView (this);
                 im.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));  
                 im.setImageBitmap(bMapRotate);
                 frmLayout.addView(im,new FrameLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));       
            } catch (IOException ex) {

            }
        } while (cursorImages.moveToNext());

    }
    cursorImages.close();

 } 
```

![屏幕一](../Images/a7db2303da53d375235814d3bcc7c888.png) ![屏幕 2](../Images/94da1a508cf56c4de283599745bcf953.png)

# html - 使用正则表达式从jmeter中的HTML响应中提取值

> ID：10496734
> 
> 赞同：0
> 
> 时间：2012-05-08T10:19:08.653
> 
> 标签：html, regex, xpath, response, jmeter

我在使用 jmeter 从 HTTP 请求的 HTML 响应中提取值时遇到问题。

要从中提取的此源 html 代码：

```
<input type="text" name="ifu" size="32" value="1600553" class="champ_texte"> 
```

我正在使用以下正则表达式：

```
name of reference = ifu 
regular expression = //input[@type="text"][@name="ifu"][@ size="32"][@value="1600553"][@class="champ_texte"] 
```

我的表达有问题。
注意：我的 html 响应是 Action struts 的响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:21:08.490

正则表达式可以是

```
input type=\"text\" name=\"ifu\" size=\"32\" value=\"(\\d+)\" class=\"champ_texte 
```

更详细地说，

```
String x  ="<input type=\"text\" name=\"ifu\" size=\"32\" value=\"1600553\" class=\"champ_texte\">";
Pattern p = Pattern.compile("input type=\"text\" name=\"ifu\" size=\"32\" value=\"(\\d+)\" class=\"champ_texte");
Matcher m = p.matcher(x);
if (m.find())
   System.out.println(m.group(1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T11:58:52.503

1.  如果您使用[XPath Extractor](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)解析 HTML 响应，请确保选中**Use Tidy（容错解析器）**选项。

2.  您的 xpath 查询应该返回您要提取的值。
    因此，要获取“输入”的“值”，您必须使用如下查询：
    `//input[@type="text"][@name="ifu"][@class="champ_texte"]/@value`
    提取的值（如果有）将存储在指向“参考名称”字段的 jmeter 变量中（在您的情况下为 ${ifu}）。

3.  您可以首先使用任何其他工具测试您的 xpath 查询 - 至少是 Firefox 插件：

    *   [XPath 检查器](https://addons.mozilla.org/en-US/firefox/addon/xpath-checker/)
    *   [XPather](https://addons.mozilla.org/en-US/firefox/addon/xpather/)
    *   [XPath 查找器](https://addons.mozilla.org/en-US/firefox/addon/xpath-finder/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-08T05:12:42.653

如果您要提取的是 value 属性，则使用 Css/Jquery Extractor 会更好：

*   [http://jmeter.apache.org/usermanual/component_reference.html#CSS/JQuery_Extractor](http://jmeter.apache.org/usermanual/component_reference.html#CSS/JQuery_Extractor)

使用配置：

*   Css/Jquery 表达式：输入[name=ifu]

*   属性：价值

# c++ - C++ 上的简单文件处理代码中的模糊错误

> ID：10496738
> 
> 赞同：0
> 
> 时间：2012-05-08T10:19:28.667
> 
> 标签：c++, visual-c++, file-io, compiler-errors, fstream

我正在尝试在 VS 2010 上用 C++ 运行一个简单的文件 I/O 处理程序。但是，当我尝试运行它时，我遇到了一个与 fstream 有关的错误。该程序相当简单，包括打开 2 个文本文件并将文本从第一个文件复制到第二个文件，并稍作改动。我很确定我的逻辑是正确的，但我不确定我做错了什么。任何帮助将非常感激。谢谢。这是代码：

```
#include<fstream>
#include<iostream>
#include<cstdlib>

using namespace std;

void file1(ifstream& in_stream, ofstream out_stream);

int main()
{
ifstream fin;
ofstream fout;
char name1[60];
cout<<"Enter the name of the input file: "<<endl;
cin>>name1;
fin.open(name1);
if(fin.fail())
{
    cout<<"Failed to open Input file"<<endl;
    exit(1);
}
else
{
    cout<<"Input file opened successfully"<<endl;
}
char name2[60];
cout<<"Enter the name of the output file: "<<endl;
cin>>name2;
fout.open(name2);
if(fout.fail())
{
    cout<<"Failed to open Output file"<<endl;
    exit(1);
}
else
{
    cout<<"Output file opened successfully"<<endl;
}
file1(fin, fout);
fin.close();
fout.close();
return 0;
}

void file1(ifstream& in_stream, ofstream out_stream)
{
char next;
in_stream.get(next);
while(!in_stream.eof())
{
    if(next=='A')
    {
        out_stream<<"ABC";
    }
    else
    {
        out_stream<<next;
    }
    in_stream.get(next);
}
} 
```

这是我在 VS 2010 上遇到的确切错误：

错误 1 ​​错误 C2248: 'std::basic_ios<_Elem,_Traits>::basic_ios' : 无法访问在类 'std::basic_ios<_Elem,_Traits>' c:\program files (x86)\microsoft visual studio 中声明的私有成员10.0\vc\include\fstream 1116 1 个文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T10:22:07.297

`out_stream`正在按值传递，这意味着正在尝试调用其复制构造函数，即`private`：使其成为引用：

```
void file1(ifstream& in_stream, ofstream& out_stream); 
```

# string - 在 MATLAB 中使用图例

> ID：10496739
> 
> 赞同：1
> 
> 时间：2012-05-08T10:19:29.310
> 
> 标签：string, matlab, legend

我在 for 循环中有一个情节，我需要使用 legend 命令来标记它们。我需要创建一个字符串数组来使用它。出于某种原因，它似乎不起作用。有人可以帮忙吗。我正在粘贴下面的代码。

```
 for i = 1:len
   for j = 1:C{i,1}/n
    cc = hsv(12);
    semilogx(w/pi,Same_psd{i,1}(:,j+1),'color',cc(j+1,:))
    str = num2str(Same_mean{i,j+1});
    srt_array = [str_array; str];
    legend(str_array);
   end 
   end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:29:35.300

尝试这个：

```
legend_labels = cell(10,1);

for i = 1:10

    h(i) = plot(randn(10,1));
    hold all
    legend_labels{i} = sprintf('This is label #%i', i);

end;

legend(h,legend_labels{:}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:26:42.247

尝试使用 DisplayName 属性。具有很好的副作用，您可以保证图例与您的线条同步。

例如：

```
clf
hold on
for i = 1:10
    col = rand(3,1);
    semilogx(1:10,rand(10,1),'DisplayName',sprintf('This is curve %i',i),...
    'color',col)
end 
legend('Location','best') 
```

# wcf - 无法序列化接口

> ID：10496740
> 
> 赞同：1
> 
> 时间：2012-05-08T10:19:31.320
> 
> 标签：wcf

这是我在服务器端的 ABC：

```
<endpoint address="msmq.formatname:DIRECT=OS:.\private$\imhmsgs" 
          binding="msmqIntegrationBinding" 
          bindingConfiguration="IncomingMessageHandlerBinding" 
         contract="TMC.Services.Contracts.Messages.IInboundMessageHandlerService"> 
```

一旦我做一个`.Open()`托管服务，我就会得到异常：

> 无法序列化接口 XYZ.Services.Contracts.Messages.Interfaces.IMyMessage。

我的 IMyMessage 界面：

```
[ServiceContract]
[ServiceKnownType(typeof(IMyMessage))]
[ServiceKnownType(typeof(ConcreteMessage))]
public interface IInboundMessageHandlerService
{
    [OperationContract(IsOneWay = true, Action = "*")]
    void ProcessIncomingMessage(MsmqMessage<IMyMessage> incomingMessage); 
} 
```

该接口的实现者：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, 
                 ReleaseServiceInstanceOnTransactionComplete = false)]
public class InboundMessageHandlerService : IInboundMessageHandlerService
{
    [OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = true)]
    public void ProcessIncomingMessage(MsmqMessage<IMyMessage> incomingMessage)
    {
    }
 } 
```

客户端创建的类型基本上是一个具体的类，它派生自一个基类和一个接口（IMyMessage），然后将它放在 MSMQ 上。

经过一些测试，如果我删除了服务已知类型属性，而改为使用说“字符串”，那么它似乎打开了主机但出现故障（因为消息类型不是它所期望的）。

我哪里错了？

在进一步的测试中，我发现如果我只指定具体类型，它就可以工作。

这不是我所期望的。我如何创建它以便服务可以采用该接口具有的已知接口和类？这个想法是让客户端（使用相同的合同和类）将消息作为“IMyMessage”发送，并让 WCF 服务将其作为“IMyMessage”接收并继续找出它的消息/对象的类型。

如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:00:54.700

你的合约是一个接口，但合约中的定义必须是具体的类。

在您的情况下，您似乎想要发送一个东西列表，这些东西可能会有所不同，但它们都支持相同的界面。

问题在于，当 WCF 反序列化通过网络发送的内容时，它需要将其反序列化为具体类型。如果它只是在定义中有一个接口和实现该定义的 20 种不同类型，它不知道如何处理它。

你可以做的是有一个实现接口的基类型，你的所有类都继承自基类型，并且你在你的联系人中使用基类型。

# ruby-on-rails - ArgumentError rails

> ID：10496742
> 
> 赞同：0
> 
> 时间：2012-05-08T10:19:45.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个返回数组的模块：

```
module Module1
  class Class1

    def self.get

      num << 1

      return num

    end

  end
end 
```

但是当我像这样从控制器调用它时：

```
 def index

    @trans = Module1::Class1.get()

    respond_to do |format|
      format.html # index.html.erb
      format.json { render @trans }
    end
  end 
```

显示以下错误：

```
'1' is not an ActiveModel-compatible object that returns a valid partial path. 
```

但是如果我在 json 中这样做：

```
 def index

    respond_to do |format|
      format.html # index.html.erb
      format.json { render Module1::Class1.get() }
    end
  end 
```

它返回正确的结果，在第一个示例中我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:24:58.970

试试这个

```
format.json { render :json => @trans } 
```

# android - 在 TimerTask 中启动 AsyncTask

> ID：10496744
> 
> 赞同：2
> 
> 时间：2012-05-08T10:20:16.437
> 
> 标签：android

我有一个计时器，我想在倒计时完成后启动 AsyncTask。如果我将它的执行放在一个处理程序中，它会循环它并多次启动它。如果我不把它放在处理程序中，我会遇到以下崩溃： **无法在未调用 looper.prepare() 的线程内创建处理程序**

```
timer.schedule(new ListUpdate(), helper.nextListUpdate.get(0));

class ListUpdate extends TimerTask {
    private Handler mHandler = new Handler(Looper.getMainLooper());
    public void run() {
        mHandler.post(new Runnable() {
            public void run() {
                AsyncTask<Integer, Void, Boolean> task = new updateList();
                task.execute();
            }
        });
    }
} 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T10:22:56.820

**AsyncTask**应该只在 UI 线程上运行。在您的情况下，您似乎没有在 UI 线程上正确运行它。

也许试试这样：

```
timer.schedule(new ListUpdate(), helper.nextListUpdate.get(0));

class ListUpdate extends TimerTask {
    Looper looper = Looper.getMainLooper();
    looper.prepareMainLooper();

    private Handler mHandler = new Handler(looper);
    public void run() {
        mHandler.post(new Runnable() {
            public void run() {
                AsyncTask<Integer, Void, Boolean> task = new updateList();
                task.execute();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:40:39.447

通过在我从 TimerTask 调用的 TimerTask 之外添加一个处理程序，我可以使它工作！

```
final Handler handler = new Handler() {
    public void handleMessage(Message msg) {
        RelativeLayout rl_header = (RelativeLayout)findViewById(R.id.rl_header);
        Desktop desktop = helper.getDesktop();
        try {
            desktop.inflate(ll, rl_header, banners, DesktopApp.this);
            Collections.sort(helper.nextListUpdate);
            helper.nextListUpdate.remove(0);
            timer = new Timer();
            if (helper.nextListUpdate.size() > 0) timer.schedule(new ListUpdate(), helper.nextListUpdate.get(0));
        } catch (Exception e) {
            e.printStackTrace();
        }
     }

};

class ListUpdate extends TimerTask {
    public void run() {
        DesktopApp.this.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                handler.sendEmptyMessage(0);
            }
        });
    }
} 
```

# sharepoint - 在 CAML 查询中按顺序添加条件

> ID：10496746
> 
> 赞同：1
> 
> 时间：2012-05-08T10:20:48.967
> 
> 标签：sharepoint, sharepoint-2010, caml

我正在使用 CAML 查询来查询共享点列表。在这里，我在一个列表列上使用按条件排序。订单列中可能存在空值，在这种情况下，我想使用另一个列表列（例如：标题列'）对列表进行排序。如何在 caml 查询中添加此 Order by 条件以获取共享点列表项。

我的代码是：

```
 query.ViewXml = "<View><Query>";
 query.ViewXml += "<OrderBy><FieldRef Name='" + orderBy + "'/></OrderBy>";

 query.ViewXml += "<Where><Eq><FieldRef Name='" + fieldRef + "'/><Value Type = '" + type + "'>" + value + "</Value></Eq></Where>";
            query.ViewXml += "</Query></View>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:32:30.833

OrderBy 部分可以有多个字段：

```
"<OrderBy><FieldRef Name='" + orderBy + "'/><FieldRef Name='" + orderBySecondary + "'/></OrderBy>" 
```

这相当于：按“orderBy”排序，然后按“orderBySecondary”排序

# python - 如何读取 Windows 环境变量值？

> ID：10496748
> 
> 赞同：36
> 
> 时间：2012-05-08T10:20:55.587
> 
> 标签：python, environment-variables

我试过这个：

```
os.environ['MyVar'] 
```

但它没有用！有没有适合所有操作系统的方法？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-08T10:24:24.187

尝试使用以下内容：

```
os.getenv('MyVar') 
```

从[文档](https://docs.python.org/2/library/os.html#os.getenv)中：

> os.getenv(varname[, value])
> 
> 如果存在则返回环境变量 varname 的值，如果不存在则返回值。值默认为无。
> 
> 可用性：大多数版本的 Unix、Windows

所以在测试之后：

```
>>> import os
>>> os.environ['MyVar'] = 'Hello World!'       # set the environment variable 'MyVar' to contain 'Hello World!'
>>> print os.getenv('MyVar')
Hello World!
>>> print os.getenv('not_existing_variable')
None
>>> print os.getenv('not_existing_variable', 'that variable does not exist')
that variable does not exist
>>> print os.environ['MyVar']
Hello World!
>>> print os.environ['not_existing_variable']
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
  File "/usr/lib/python2.4/UserDict.py", line 17, in __getitem__
    def __getitem__(self, key): return self.data[key]
KeyError: 'not_existing_variable 
```

如果环境变量存在，您的方法也可以工作。using 的区别`os.getenv`在于它返回`None`（或给定的值），而`os.environ['MyValue']`当变量不存在时会给出 KeyError 异常。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-06-05T12:59:26.540

您可能必须重新启动 Windows 才能读取通过控制面板设置的环境变量。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-08T10:54:18.493

```
os.getenv('PATH') 
```

您可以使用上面的代码行对其进行测试。它将列出所有设置的路径。

# c# - 如何使用 c# 和 .net 4 从 Excel 2003 更改图表标题？

> ID：10496749
> 
> 赞同：1
> 
> 时间：2012-05-08T10:21:01.407
> 
> 标签：c#, .net, excel, c#-4.0, excel-2003

在我的计算机中，我有 Excel 2007 并且一切正常，但是当我将它传递给生产计算机时，会出现定义图表标题的问题，因为它有 Excel 2003 而不是 2007。

我尝试了 2 种方法，使用图表向导：

```
chartPage.ChartWizard(Type.Missing,Type.Missing,Type.Missing,Type.Missing,Type.Missing,Type.Missing,Type.Missing,"",Type.Missing,Type.Missing,) 
```

和 HasTitle：

```
chartPage.HasTitle = true;
chartPage.ChartTitle.Text = xlWorkSheet.Name.Replace(" Month", ""); 
```

* * *

两者都可以在我的计算机上运行，​​但不能在生产环境中运行，但出现以下异常：

```
Unhandled Exception: System.Runtime.InteropServices.COMException: Exception from HRESULT: 0x800A03EC
   at Microsoft.Office.Interop.Excel._Chart.set_HasTitle(Boolean RHS)
   at DailyInfo.Program.cleanSheets(String inputExcelFile, String outputExcelFile)
   at DailyInfo.Program.Main(String[] args) 
```

* * *

如何使用 C# .net 4.0 更新 Excel 2003 文件的图表标题？

# php - php会话验证

> ID：10496752
> 
> 赞同：0
> 
> 时间：2012-05-08T10:21:09.960
> 
> 标签：php, validation, session

我想实现用户不能两次发送相同的输入。我使用 php 脚本来提交用户输入。

我的想法是将他的输入保存在一个会话数组中，每次他提交一些东西时，都会通过数组检查它是否与他之前已经提交的东西之一匹配。

代码如下所示：

```
 //Compare post with what user has posted so far; if the same, exit (spam protection)
    foreach($_SESSION['postarray'][] as $postarray) if($post=$postarray) exit;

    //Save post in session of all other posts
    $_SESSION['postarray'][]=$post; 
```

我收到以下错误：

致命错误：无法使用 [] 读取第 32 行的 /Applications/XAMPP/xamppfiles/htdocs/postish/action/post.php（指带有 foreach() 循环的行）

即使将函数更改为仅 $_SESSION['post array']，它也不起作用。

非常感谢任何帮助:)

丹尼斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T10:23:01.477

运算符`[]`向数组添加一个新元素。

要获取 foreach 循环的元素，您必须使用它而不使用`[]`：

```
foreach($_SESSION['postarray'] as $postarray)
    if ($post == $postarray) exit; 
```

并注意`==`用于检查变量相等性的比较运算符。

`$post`检查是否存在的更好选择`$_SESSION['postarray']`是使用[`in_array`](http://php.net/manual/en/function.in-array.php)函数：

```
if (in_array($post, $_SESSION['postarray'])) exit; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:24:07.077

您不小心使用了赋值运算符`=`而不是比较运算符`==`or `===`。

所以你需要替换`if($post=$postarray)`为`if($post == $postarray)`

您还需要删除仅在插入新数组元素时使用的`[]`in 。`foreach($_SESSION['postarray'][] as $postarray)``[]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T11:00:55.513

如果您想阻止用户两次发送相同的数据，您需要考虑使用`nonce`（使用一次的数字）

有几个例子：

*   [如何创建和使用随机数](https://stackoverflow.com/questions/4145531/how-to-create-and-use-nonces)
*   [http://en.wikipedia.org/wiki/Cryptographic_nonce](http://en.wikipedia.org/wiki/Cryptographic_nonce)
*   [http://fullthrottledevelopment.com/php-nonce-library](http://fullthrottledevelopment.com/php-nonce-library)

# erp - Opentaps ERP-运行期间出现ClassNotFoundException错误

> ID：10496754
> 
> 赞同：0
> 
> 时间：2012-05-08T10:21:37.713
> 
> 标签：erp, opentaps

嗨，我是 openTaps ERP 开发的新手，就在我开始它的前一天。我在我的 eclips 中安装了一个以前完成的项目。当我运行它时，它给了我以下错误。我不明白那个错误。

应该做什么？

（我在其中使用 Postgresql 数据库）

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
    at org.hibernate.cfg.Configuration.<clinit>(Configuration.java:152)
    at org.opentaps.foundation.infrastructure.Infrastructure.getSessionFactory(Infrastructure.java:120)
    at org.opentaps.common.container.HibernateContainer.start(HibernateContainer.java:109)
    at org.ofbiz.base.container.ContainerLoader.start(ContainerLoader.java:102)
    at org.ofbiz.base.start.Start.startStartLoaders(Start.java:264)
    at org.ofbiz.base.start.Start.startServer(Start.java:313)
    at org.ofbiz.base.start.Start.start(Start.java:317)
    at org.ofbiz.base.start.Start.main(Start.java:400)
Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 8 more 
```

有谁知道怎么解决？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:03:19.390

尝试下载[http://www.slf4j.org/download.html](http://www.slf4j.org/download.html)并将其解压缩到某个文件夹，然后将 jar 文件 (slf4j-api-1.6.4.jar) 添加到您的项目构建路径 ( [http://www .cs.duke.edu/courses/cps004g/fall05/assign/final/addlibrary.html](http://www.cs.duke.edu/courses/cps004g/fall05/assign/final/addlibrary.html)）或[http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java %29](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29) ，如果出现与 (slf4j) 相关的另一个异常，请尝试将所有 jar 文件添加到 (slf4j-1.6.4) 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:13:08.097

Ehcache jar 文件或配置似乎有问题。确保 (ehcache-1.6.1.jar) 在构建类路径中，如果没有，请尝试从[http://www.java2s.com/Code/Jar/e/Downloadehcache161jar 下载 ehcache-1.6.1.jar.zip。 htm](http://www.java2s.com/Code/Jar/e/Downloadehcache161jar.htm)然后提取它并将其添加到构建路径。[或从http://ehcache.org/downloads/catalog](http://ehcache.org/downloads/catalog)下载最新版本，

opentaps ERP似乎也使用了使用ehcache缓存提供程序的hibernate库，但是您必须根据此处提到的hibernate和ehcache版本正确配置它（[https://forum.hibernate.org/viewtopic.php? f=1&t=1003897&view=previous](https://forum.hibernate.org/viewtopic.php?f=1&t=1003897&view=previous) ) 或 [http://forums.terracotta.org/forums/posts/list/4932.page](http://forums.terracotta.org/forums/posts/list/4932.page) 或 [http://www.bonitasoft.org/forum/viewtopic.php?id=4783](http://www.bonitasoft.org/forum/viewtopic.php?id=4783)

# python - 如何使用机械化在 div 中获取表单

> ID：10496756
> 
> 赞同：1
> 
> 时间：2012-05-08T10:21:38.917
> 
> 标签：python, html, mechanize

在使用 python 机械化时，我发现了获取 div 中的表单的主要问题。

这种形式是不可见的。

```
>>> s = [f.id for f in br.forms()]
>>> s
>>> [] 
```

如何处理存在于 div 中的表单？

例如考虑以下链接：
[http ://www.world-exchanges.org/statistics/monthly-reports](http://www.world-exchanges.org/statistics/monthly-reports)

在此链接中，表单位于 div 内。因此 mechanize 能够获取表单名称。
在这种情况下，我们将如何处理表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:44:49.373

我无法重现这个问题，你能举一个具体的例子吗？*div*元素内的表单*：*

 *```
>>> br.open('http://realworldstyle.com/forms.html')
>>> print br.forms().next()

<GET http://realworldstyle.com/forms.html application/x-www-form-urlencoded
  <TextControl(<None>=)>
  <TextControl(<None>=)>
  <TextControl(<None>=)>
  <TextareaControl(<None>=Go ahead - write something...)>> 
```*

# linux - 使用 qsub 运行 shellscript 时出现“意外的文件结尾”和“错误导入函数定义”错误

> ID：10496758
> 
> 赞同：11
> 
> 时间：2012-05-08T10:21:50.163
> 
> 标签：linux, shell, cluster-computing, qsub

我有以下shellscript：

```
#!/bin/sh
cd /sw/local/bin/
export LD_LIBRARY_PATH=/sw/local/lib:/usr/local/Trolltech/Qt-4.7.2/lib:$LD_LIBRARY_PATH
./FeatureFinderRaw -in /homes/JG-C1-18.mzML -out /homes/test_remove_after_use.featureXML -threads 20 
```

当我从自己的命令行运行它时它工作正常，但是当我尝试这样做时：

```
qsub -q ningal.q -cwd -V -o /homes/queue.out -e /queue.err featureFind_C1-18_20t.sh 
```

我收到以下错误：

```
/bin/sh: module: line 1: syntax error: unexpected end of file
/bin/sh: error importing function definition for `module'
./FeatureFinderRaw: error while loading shared libraries: libOpenMS.so: cannot open shared object file: No such file or directory
/bin/sh: module: line 1: syntax error: unexpected end of file
/bin/sh: error importing function definition for `module'
./FeatureFinderRaw: error while loading shared libraries: libQtWebKit.so.4: cannot open shared object file: No such file or directory
/bin/sh: module: line 1: syntax error: unexpected end of file
/bin/sh: error importing function definition for `module'
./FeatureFinderRaw: error while loading shared libraries: libQtWebKit.so.4: cannot open shared object file: No such file or directory
/bin/bash: module: line 1: syntax error: unexpected end of file
/bin/bash: error importing function definition for `module'
./FeatureFinderRaw: error while loading shared libraries: libQtWebKit.so.4: cannot open shared object file: No such file or directory
/bin/sh: module: line 1: syntax error: unexpected end of file
/bin/sh: error importing function definition for `module'
./FeatureFinderRaw: error while loading shared libraries: libQtWebKit.so.4: cannot open shared object file: No such file or directory
/bin/sh: module: line 1: syntax error: unexpected end of file
/bin/sh: error importing function definition for `module' 
```

我不明白为什么在使用 qsub 时会出现此错误，但在同一集群机器上直接运行脚本时却没有。如何使用 qsub 运行脚本？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-11-25T15:30:14.513

在使用的包装脚本中也有这个问题

```
qsub -shell no -b yes -cwd -V somescript.bash arg1 arg2 etc 
```

如果您使用它来提交另一个 bash shell 脚本。它产生了令人讨厌的

```
/bin/sh: module: line 1: syntax error: unexpected end of file
/bin/sh: error importing function definition for `BASH_FUNC_module' 
```

（这是在 CentOS 6.6 上运行的 Sun Grid Engine 211.11）事实证明，只需将以下内容放在包装脚本（而不是包装脚本）的顶部即可解决问题：

```
unset module 
```

就这样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T10:37:19.743

在 /usr/share/Modules/init/bash 中注释掉了 'export -f module' 行。

在普通的登录 shell 中，modules.sh 将从 profile.d 中调用，因此 module 命令可用。在非登录 shell 中，就像应用程序包装脚本一样，它只是首先获取上述文件。

通常在采购上述文件后的应用程序脚本中，他们再次给出命令“模块加载应用程序/供应商/应用程序”，这意味着额外的采购。

参考::- [http://gridengine.org/pipermail/users/2011-November/002019.html](http://gridengine.org/pipermail/users/2011-November/002019.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T13:38:17.263

出于某种我不知道的原因，在每行末尾添加分号解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-09T02:29:46.940

将以下命令添加到 ~/.bash_profile 或 ~/.bashrc 文件，然后再次注销/登录。

```
unset module 
```

或者简单的运行快速命令：

```
echo "unset module" >> ~/.bash_profile && source ~/.bash_profile 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T15:54:47.663

最可能的原因是如果添加分号会有所不同，那么您使用 DOS 行尾 (\r\n) 而不是 POSIX 行尾 (\r) 保存了文件。

# android - 更改 android 应用程序以在使用 admob 的现有应用程序中使用 adsense

> ID：10496760
> 
> 赞同：0
> 
> 时间：2012-05-08T10:22:00.807
> 
> 标签：android

我在我的 android 应用程序中使用 admob。我是否需要更改我的代码才能接收来自 Google AdSense 的广告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:40:11.047

不。

如果您的应用符合 AdSense 广告的条件，您的 Admob 控制面板中的“管理”>“应用设置”下将提供一个选项，允许您使用 AdSense 广告回填广告资源。这不需要任何代码。

# php - 用户自定义样式是否适用于 document.ready + localStorage？

> ID：10496765
> 
> 赞同：0
> 
> 时间：2012-05-08T10:22:27.887
> 
> 标签：php, javascript, jquery, css, html

我运行并积极开发了一个论坛（它本身在经过大量修改的 SMF 1.1.16 上运行） - 我想添加的一个功能是用户能够从角落的小部件中选择自定义颜色（比如 2-4）的页面自定义论坛的颜色。

论坛的 HTML 输出的结构使得可以使用纯 CSS 来修改颜色，我想知道插入这个 CSS 的正确方法是什么。

我的想法是，一旦用户保存了他们的颜色信息，一段 javascript 将生成必要的 CSS 并使用 HTML5 localStorage（可能使用 polyfill 库）保存它。然后，在 $(document).ready() 上，我们检查此 CSS 是否存在，如果存在，我们将其注入页眉。

这种方法明智吗？它很容易开发，但是在应用自定义样式之前，它会导致通常样式的闪烁（鉴于页面相当重量级）吗？

如果是这样，是否有更好的方法可以完全在客户端执行此操作？如果可能的话，我宁愿不涉及服务器，但如果必须，我可以让服务器为每个保存自定义样式的用户生成 CSS 文件。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:30:55.963

我建议你先为页面设置一个基本样式，这样就不会有 FOUC。然后，让您的 JS 加载自定义样式，对其进行解析，然后将其应用于页面。您可以进行“淡入更改”（例如背景淡入等），这样样式就不会像快照一样加载。

您也可以先空白页面，例如`display:none`在加载样式之前将 body 设置为 ，然后在应用样式后，删除`display:none`

您还必须注意，本地存储有其大小限制。不要加载太多。考虑在 JS 中寻找[LZW 压缩](https://stackoverflow.com/a/294421/575527)。它可能会有所帮助。

# objective-c - 如何剥离字符串？

> ID：10496768
> 
> 赞同：3
> 
> 时间：2012-05-08T10:22:33.063
> 
> 标签：objective-c, nsstring, substring

我有一个很长的字符串，我只想在那个字符串中提取一些特定的字符串。我怎样才能做到这一点？

例如我有：

```
this is the image <img src="http://vnexpress.net/Files/Subject/3b/bd/67/6f/chungkhoan-xanhdiem2.jpg"> and it is very beautiful. 
```

是的，现在我想得到这个长字符串的子字符串并且只得到`http://vnexpress.net/Files/Subject/3b/bd/67/6f/chungkhoan-xanhdiem2.jpg`

请告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:27:07.557

您应该使用正则表达式，可能使用[NSRegularExpression](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)类。

这是一个完全符合您要求的示例（来自[此处](http://remarkablepixels.com/blog/2011/1/13/regular-expressions-on-ios-nsregularexpression.html)）：

```
- (NSString *)stripOutHttp:(NSString *)httpLine
{
    // Setup an NSError object to catch any failures
    NSError *error = NULL;  
    // create the NSRegularExpression object and initialize it with a pattern
    // the pattern will match any http or https url, with option case insensitive
    NSRegularExpression *regex = [NSRegularExpression
        regularExpressionWithPattern:@"https?://([-\\w\\.]+)+(:\\d+)?(/([\\w/_\\.]*(\\?\\S+)?)?)?" 
                             options:NSRegularExpressionCaseInsensitive
                               error:&error];
    // create an NSRange object using our regex object for the first match in the string httpline
    NSRange rangeOfFirstMatch = [regex rangeOfFirstMatchInString:httpLine
                                                         options:0
                                                           range:NSMakeRange(0, [httpLine length])];
    // check that our NSRange object is not equal to range of NSNotFound
    if (!NSEqualRanges(rangeOfFirstMatch, NSMakeRange(NSNotFound, 0)))
    {
        // Since we know that we found a match, get the substring from the parent
        // string by using our NSRange object
        NSString *substringForFirstMatch = [httpLine substringWithRange:rangeOfFirstMatch];
        NSLog(@"Extracted URL: %@",substringForFirstMatch);
        // return the matching string
        return substringForFirstMatch;
    }

    return NULL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:30:36.590

```
NSString *urlString = nil;
NSString *htmlString = //Your string;

NSScanner *scanner = [NSScanner scannerWithString:htmlString];

[scanner scanUpToString:@"<img" intoString:nil];
if (![scanner isAtEnd]) {
    [scanner scanUpToString:@"http" intoString:nil];
    NSCharacterSet *charset = [NSCharacterSet characterSetWithCharactersInString:@">"];
    [scanner scanUpToCharactersFromSet:charset intoString:&urlString];
}
NSLog(@"%@", urlString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:40:02.710

您可以为此使用正则表达式：

```
NSRegularExpression* regex = [[NSRegularExpression alloc] initWithPattern:@"src=\"([^\"]*)\"" options:NSRegularExpressionCaseInsensitive error:nil];
NSString *text = @"this is the image <img src=\"http://vnexpress.net/Files/Subject/3b/bd/67/6f/chungkhoan-xanhdiem2.jpg\"> and it is very beautiful.";
NSArray *imgs = [regex matchesInString:text options:0 range:NSMakeRange(0, [text length])];
if (imgs.count != 0) {
    NSTextCheckingResult* r = [imgs objectAtIndex:0];
    NSLog(@"%@", [text substringWithRange:[r rangeAtIndex:1]]);
} 
```

这个正则表达式是解决方案的核心：

```
src="([^"]*)" 
```

它匹配`src`属性的内容，并捕获引号之间的内容（注意一对括号）。然后在 中检索此标题`[r rangeAtIndex:1]`，并用于提取您要查找的字符串部分。

# image - 如何从大背景制作较小的平铺图像？

> ID：10496769
> 
> 赞同：0
> 
> 时间：2012-05-08T10:22:35.960
> 
> 标签：image, graphics, photoshop

我有这个更大的图像： http: [//imgur.com/henxc](http://imgur.com/henxc)，我需要创建一个较小的图块作为背景重复。但是我很难知道我需要裁剪哪一部分。有人能解释一下如何把它做成一个可以平铺的小块吗？Photoshop中是否有一种技术可以使这更容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:41:45.133

您应该使用偏移过滤器。您需要找到恰好是图像一半的值并输入这两个数字。要获得它，请转到过滤器 > 其他 > 偏移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T19:25:07.613

您可以通过将图像切成两半（将一半复制到另一层）并将左半部分移动到右侧来测试图像是否会“平铺”，反之亦然。然后您将看到瓷砖的边缘如何排列并可以进行调整。您可以将一半移到另一半上，直到它们匹配，标记它们，然后将该标记用作瓷砖的边缘。然后垂直重复该过程。

[从第 5 步开始，这个 tut](http://psd.tutsplus.com/articles/how-a-turn-a-texture-into-a-seamlessly-tiled-background/)比我能（和图片）更好地解释它。

# android - android数据库不能在多个活动中工作

> ID：10496771
> 
> 赞同：0
> 
> 时间：2012-05-08T10:22:47.357
> 
> 标签：android, database, sqlite, android-activity

我有一个 DatabaseHelper 类和 DatabaseAdapter 类。当我尝试从多个活动中选择数据时，我得到空数据库。我究竟做错了什么？我在调用数据库适配器并将当前活动作为上下文传递时正在读取或写入 dabase。

```
public class DatabaseHelper extends SQLiteOpenHelper {
    private static final String DATABASE_NAME = "MySampleDatabase";
    private static final int DATABASE_VERSION = 15;
    private final Context context;

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        this.context = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        AssetManager manager = context.getResources().getAssets();
        InputStream is;
        try {
            is = manager.open("SQLStatements");
            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            StringBuffer sb = new StringBuffer();
            String line;
            while((line = reader.readLine()) != null){
                sb.append(line);
            }
            String[] queries = (new String(sb)).split(";");
            is.close();
            for(int i = 0; i < queries.length; i++){
                db.execSQL(queries[i]);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS UserDrugs");
        db.execSQL("DROP TABLE IF EXISTS UserDrugsUsages");
        onCreate(db);
    }
}
public class DatabaseUserDrugsUsagesAdapter {
    public static final String KEY_USER_DRUG_ID = "UserDrugID";
    public static final String KEY_PACKAGE_ID = "PackageID";
    public static final String KEY_TIME_TO_USE = "TimeToUse";
    public static final String KEY_USED = "Used";
    public static final String KEY_PACKAGE_NAME = "PackageName";
    private static final String DATABASE_TABLE = "UserDrugsUsages";
    private Context context;
    private SQLiteDatabase database;
    private DatabaseHelper dbHelper;

    public DatabaseUserDrugsUsagesAdapter(Context context) {
        this.context = context;
    }

    public DatabaseUserDrugsUsagesAdapter open() throws SQLException {
        dbHelper = new DatabaseHelper(context);
        database = dbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        dbHelper.close();
    }

    public void clearDatabaseTable(){
        database.execSQL("DELETE FROM " + DATABASE_TABLE);
    }

    public Cursor selectUserDrugUsagesByDate(String date){
        return database.query(DATABASE_TABLE, new String[] {
                KEY_USER_DRUG_ID,
                KEY_PACKAGE_ID,
                KEY_TIME_TO_USE,
                KEY_USED,
                KEY_PACKAGE_NAME}, "TimeToUse like '" + date + "%'", null, null, null, null);
    }

    public long writeUserDrugUsage(int userDrugId, int packageId, String timeToUse, boolean used, String packageName) {
        ContentValues initialValues = createContentValues(userDrugId, packageId, timeToUse, used, packageName);

        return database.insert(DATABASE_TABLE, null, initialValues);
    }

    private ContentValues createContentValues(int userDrugId, int packageId, String timeToUse, boolean used, 
            String packageName) {

        ContentValues values = new ContentValues();
        values.put(KEY_USER_DRUG_ID, userDrugId);
        values.put(KEY_PACKAGE_ID, packageId);
        values.put(KEY_TIME_TO_USE, timeToUse);
        values.put(KEY_USED, used);
        values.put(KEY_PACKAGE_NAME, packageName);

        return values;
    }
} 
```

编辑：有我调用选择函数的代码。

```
Cursor c = null;
String name = null;
DatabaseUserDrugsUsagesAdapter db = new DatabaseUserDrugsUsagesAdapter(context);
db.open();
c = db.selectDrugNameById(id);
db.close();

if(c != null && c.getCount() > 0){
    c.moveToFirst();
    name = c.getString(4);
}
c.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:55:25.497

这是因为您在操作游标之前关闭了数据库。

**实际上 Cursor 就像从数据库资源创建的列表/指针。**

我改变了你的代码，它会工作得很好试一试

```
Cursor c = null;
String name = null;
DatabaseUserDrugsUsagesAdapter db = new DatabaseUserDrugsUsagesAdapter(context);
db.open();
c = db.selectDrugNameById(id);

if(c != null && c.getCount() > 0){
     c.moveToFirst();
     name = c.getString(4);
        }
    c.close();
    db.close(); 
```

# objective-c - 内存警告创建根视图控制器的新对象

> ID：10496780
> 
> 赞同：0
> 
> 时间：2012-05-08T10:23:28.477
> 
> 标签：objective-c, ios, memory-management, uinavigationcontroller

在我的项目中，我有一个导航控制器的出口。这通常工作得很好，但是每当我的应用程序收到内存警告时，它都会创建一个根视图控制器类的新对象，该对象通过界面构建​​器分配给导航控制器。在此事件之后，根视图控制器的两个对象驻留在内存中，并且事件被触发两次。这在我的情况下造成了混乱。你能建议我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:59:53.493

释放成员变量，在发生内存警告时调用的 viewDidUnload 方法中。未调用 dealloc，因此您需要在 viewDidUnload 中释放。

希望这有帮助..快乐编码:)

# sql - MySQL/Ms SQL 具有多个 id 的最新记录

> ID：10496781
> 
> 赞同：0
> 
> 时间：2012-05-08T10:23:39.853
> 
> 标签：sql, sql-server, select

我不是 sql 专家，但遇到了这个问题：

我必须从 Microsoft SQL 2008 服务器检索数据。它保存来自不同探头的不同测量数据，这些数据没有任何记录间隔。这意味着某些探针可以每周传输一次数据库中的数据，另一个可以每秒传输一次。探针由 id（不是唯一的）标识，重点是仅检索每个 id（探针）的最后一条记录。表如下所示（最后 5 个，按 SampleDateTime desc 排序）：

```
TagID   SampleDateTime  SampleValue     QualityID
13      634720670797944946      112     192
23      634720670797944946      38.1    192
17      634720670797944946      107.5   192
14      634720670748012090      110.6   192
19      634720670748012090      99.7    192 
```

我无法修改服务器甚至设置，只能进行查询。而且我需要以均匀的间隔（比如每分钟左右一次）检索请求的数据。有超过 100 个探针（具有不同的 id），其中大约 40 个需要读取。所以我猜测如果这可以在单个查询中完成，它可能比在单独的查询中获取每一行更有效。

使用 MySQL 和类似的表以这种方式获得了预期的结果（高度赞赏的更好方法的建议！）：

```
SELECT TagID,SampleDateTime,SampleValue FROM 
(
    SELECT TagID,SampleDateTime,SampleValue FROM measurements 
    WHERE TagID IN(101,102,103) ORDER BY SampleDateTime DESC
) 
AS table1 GROUP BY TagID; 
```

认为这可以解决问题（没有使用 MAX() 或 DISTINCT 或无论我尝试什么），即使使用正确的数据也是如此。但由于“GROUP BY”，它自然不能在 SQL 女士中工作。

```
Column 'table1.SampleValue' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause. 
```

我非常坚持这一点，因此任何见解都会受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:10:51.033

我有点困惑，因为您标记了 MySQL 和 SQL-Server。对于 SQL-Server，我会使用该`ROW_NUMBER`函数来协助：

```
SELECT  m.TagID, m.SampleDateTime, m.SampleValue, m.QualityID
FROM    (   SELECT  *, ROW_NUMBER() OVER(PARTITION BY TagID ORDER BY SampleDateTime DESC) [RowNumber]
            FROM    Measurements 
        ) m
WHERE   Rownumber = 1 
```

该`ROW_NUMBER`函数完全按照它在锡上所说的那样做，根据您提供的标准给每一行一个数字。因此，在上面的示例中，每次遇到新的 TagID 时都从 1 重新开始`PARTITION BY TagID`。告诉从最近的条目开始对每个 TagID 进行编号，然后向上工作到最早的条目。`ROW_NUMBER``ORDER BY SampleDateTime DESC``ROW_NUMBER`

您的查询失败的原因是因为 MySQL 允许隐式分组，这意味着因为您只指定`GROUP BY TagID`了选择列表中且未包含在聚合函数中的任何字段，将获得分配给它们的“随机”行的值（您的案例中的最新行，因为您`ORDER BY SampleDateTime DESC`在子查询中指定了。

以防万一需要以下内容应该在大多数 DBMS 中工作，并且是生成与您在 MySQL 中运行的查询类似的查询的更好方法：

```
SELECT  m.TagID, m.SampleDateTime, m.SampleValue, m.QualityID
FROM    Measurements m
        INNER JOIN
        (   SELECT  TagID, MAX(SampleDateTime) AS SampleDateTime
            FROM    Measurements
            GROUP BY TagID
        ) MaxTag
            ON MaxTag.TagID = m.TagID
            AND MaxTag.SampleDateTime = m.SampleDateTime 
```

# ruby - Chef-solo: deploy: 访问 release_path

> ID：10496782
> 
> 赞同：1
> 
> 时间：2012-05-08T10:23:44.220
> 
> 标签：ruby, deployment, chef-infra

我有以下厨师食谱：

```
deploy "/home/prj" do
  repo "https://path_to_repo"
  user node.project_owner
  group node.project_owner
  symlink_before_migrate({})
end 
```

如何访问提供者的发布路径？就我而言，将是： /home/prj/releases/20120506125222/ 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:26:01.600

这取决于您要访问发布路径的位置。“内部”资源，即回调，很容易使用类似的东西

```
deploy "/home/prj" do
  before_migrate do
    gemfile = File.read("#{release_path}/Gemfile")
  end
end 
```

在资源之外，您没有可用的 release_path 变量。但是，您可以使用`current`指向当前部署版本的符号链接，即最后一个版本：

```
current_path = "home/prj/current"
release_path = File.readlink(current_path) 
```

大多数时候，您可以直接在 中处理事物，`current_path`而无需求助于解析符号链接目标。

也就是说，您通常不想直接在那里实际做事。相反，我们鼓励您在共享目录（即`/home/prk/shared`）中生成其他文件，并在部署期间让厨师将这些文件符号链接到版本中。这正是`symlink_before_migrate`它的用途。这样，您实际上不需要自己知道发布路径，而是可以让厨师为您处理。

# android - 绑定 ViewHolder 以从我的光标中获取数据并显示它

> ID：10496785
> 
> 赞同：1
> 
> 时间：2012-05-08T10:23:51.473
> 
> 标签：android, sqlite, listview, cursor

伙计们，我是一个自学成才的 android 开发人员，很新，但我正在努力。我一直在寻找有关适配器和 ViewHolder 的帮助。我发现很难理解如何使用 ViewHolder 模式来缓存我的小部件然后显示它们。

基本上我有一个从我的 SQLite DB 读取数据的游标。我使用 SimpleCursorAdapter 将结果显示到列表视图，它工作正常。唯一的问题是滚动非常慢。

现在我正在尝试实现 ViewHolder 模式，但无法弄清楚如何将数据从我的数据库绑定到 ViewHolder，然后显示它。

拜托，请帮帮我！我找了2个月的答案！

代码（我在外面留下了不相关的代码以使其更简单）：

```
 public class Shifts extends ListActivity implements OnClickListener,
    SimpleGestureListener {

private Typeface tf = Entry.tf, tf2 = Entry.tf2, roboto = Entry.roboto;
public static int count = 1;
int dbHourTime = 0;
private SimpleGestureFilter detector;
public static DBAdapter DB;
public static Cursor cursor;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.shifts);

    detector = new SimpleGestureFilter(this, this);

    DB = new DBAdapter(this);
    DB.open();
    cursor = DB.getAllShifts();
    startManagingCursor(cursor);
    cursor.moveToLast();
    count = cursor.getPosition();
    int g = count;

    cursor.moveToNext();

    String[] columns = new String[] { DB.KEY_DATE, DB.KEY_HOURS,
            DB.KEY_DAY, DB.KEY_ROWID, DB.KEY_START, DB.KEY_END };

    int[] to = new int[] { R.id.dateDisp, R.id.shiftDisp, R.id.day,
            R.id.rawId, R.id.start, R.id.finish };

    TextView SF = (TextView) findViewById(R.id.total);
    SF.setTypeface(tf);

    TextView sum = (TextView) findViewById(R.id.sum);
    sum.setTypeface(tf);

    TextView empty = (TextView) findViewById(android.R.id.empty);
    empty.setTypeface(roboto);

    SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this,
            R.layout.list_entry, cursor, columns, to);
    this.setListAdapter(mAdapter);

} 
```

适配器的代码：

```
private static class EfficientAdapter extends BaseAdapter {

    private LayoutInflater mInflater;
    private Bitmap layoutBG;
    private Bitmap mIcon2;

    public EfficientAdapter(Context context) {
        mInflater = LayoutInflater.from(context);

        layoutBG = BitmapFactory.decodeResource(context.getResources(),
                R.drawable.li2);

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return cursor.getCount();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return cursor.getPosition();
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return cursor.getPosition();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        ViewHolder holder;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.list_entry, null);

            holder = new ViewHolder();
            holder.LL = (LinearLayout) convertView
                    .findViewById(R.id.layoutBG);
            holder.rowID = (TextView) convertView.findViewById(R.id.rawId);
            holder.info = (TextView) convertView.findViewById(R.id.Info);
            holder.dateDisp = (TextView) convertView
                    .findViewById(R.id.dateDisp);
            holder.day = (TextView) convertView.findViewById(R.id.day);
            holder.finish = (TextView) convertView
                    .findViewById(R.id.finish);
            holder.hourMin = (TextView) convertView
                    .findViewById(R.id.hourMin);
            holder.shiftDisp = (TextView) convertView
                    .findViewById(R.id.shiftDisp);
            holder.start = (TextView) convertView.findViewById(R.id.start);
            holder.timestarted = (TextView) convertView
                    .findViewById(R.id.timestarted);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        return null;
    }

} 
```

持有人类别代码：

```
 static class ViewHolder {

    TextView rowID;
    TextView info;
    TextView dateDisp;
    TextView day;
    TextView timestarted;
    TextView start;
    TextView finish;
    TextView hourMin;
    TextView shiftDisp;
    LinearLayout LL;

} 
```

# java - 网络服务 java 和 C#

> ID：10496789
> 
> 赞同：0
> 
> 时间：2012-05-08T10:24:15.860
> 
> 标签：java, .net, web-services

我正在从我的 java 代码中调用一个 .Net Web 服务。Web 服务创建一个 C# 对象并将其序列化为字节数组。因此，在 Java 端，我只收到一个字节数组。我需要在 Java 端构造原始对象（但作为 java 对象）。我怎样才能做到这一点？

# android - Android actionBar OnClick()

> ID：10496793
> 
> 赞同：1
> 
> 时间：2012-05-08T10:24:31.227
> 
> 标签：android, background, onclick, listener, android-actionbar

这可能是一个奇怪的问题，但我想要一个处理程序来处理对操作栏的点击，这是因为我使用背景来绘制图标/徽标组合，因为当我使用内置方法时它不适合。

这导致没有图标或徽标，您可以单击该图标或徽标转到主页活动，这是您单击操作栏时想要的。

我尝试了很多东西，使徽标/图标不可见和其他东西，但我不知道如何让它工作。有任何想法吗？

操作栏如下所示：

```
 final ActionBar actionBar = getActionBar(); 
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayShowHomeEnabled(false);

    Bitmap bm = UnscaledBitmapLoader.loadFromResource(getResources(), R.drawable.logo, null);
    BitmapDrawable background = new BitmapDrawable(this.getResources(), bm);
    background.setTileModeX(android.graphics.Shader.TileMode.CLAMP); 
    actionBar.setBackgroundDrawable(background); 
```

位图加载器没有做任何特殊的事情来阻止它。如何获得操作栏的 onclick 侦听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:18:26.393

> 如何获得操作栏的 onclick 侦听器？

不支持，抱歉。

> 这是因为我使用背景来绘制图标/徽标组合，因为当我使用内置方法时它不适合。

它适用于其他所有人。也许您应该考虑就这个主题提出一个关于 SO 的不同问题，并使用屏幕截图来说明您的问题。

# android - 在三星 Galaxy SII 上写入、读取和共享标签 NFC

> ID：10496795
> 
> 赞同：-1
> 
> 时间：2012-05-08T10:24:36.623
> 
> 标签：android, nfc

我有两个三星 Galaxy SII NFC，我想测试新技术 NFC。特别是，我想用设备编写标签并相互读取标签。

我确实做到了，但不像视频中那样工作。

[http://www.youtube.com/watch?v=-vpjg5SD0qM](http://www.youtube.com/watch?v=-vpjg5SD0qM)

我有两台三星 GT-I9100P，我的安卓版本是 2.3.6。你能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:16:35.103

你想对设备进行编程还是只是使用它？

对于第一种情况，我建议您检查以下链接：

[使用 Nexus S 编写 NFC 标签](https://stackoverflow.com/questions/6283393/writing-nfc-tags-using-a-nexus-s) [http://www.jessechen.net/blog/how-to-nfc-on-the-android-platform/](http://www.jessechen.net/blog/how-to-nfc-on-the-android-platform/)

否则，请从 Google Play 下载优秀的 NXP 应用程序。

不锈钢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:34:44.777

也许[NFC 介绍](http://developer.android.com/guide/topics/nfc/index.html)会对您有所帮助，并且还可以查看 NFC 的[API 参考](http://developer.android.com/reference/android/nfc/package-summary.html)。[NFC 基础知识](http://developer.android.com/guide/topics/nfc/nfc.html)也可能会有所帮助。

# mysql - Rails - 对三个表列的查询的索引

> ID：10496797
> 
> 赞同：3
> 
> 时间：2012-05-08T10:24:43.473
> 
> 标签：mysql, ruby-on-rails, indexing

我有一个经常使用的查询：

```
Site.where("mobile_visible = true AND (created_at > :date OR updated_at > :date)", :date => "12-04-30") 
```

它产生这个sql

```
SELECT `sites`.* FROM `sites` WHERE (mobile_visible = true AND (created_at > '12-04-30' OR updated_at > '12-04-30')) 
```

我想添加一个或多个索引以使此查询更有效。我应该分别为 3 列添加 3 个索引还是分别为所有三列添加 1 个索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:28:07.803

最好的方法是构建一个索引，该索引会命中 you're where 子句的所有元素——而不仅仅是一个。

对于查询的特定部分，数据库通常一次不能使用多个索引。如果添加三个索引，数据库将尝试确定哪一个提供最大的好处，然后选择那个。根据查询执行计划的确定方式，它可能会也可能不会选择最好的一个。

对于这种情况，我建议添加索引：

```
add_index :sites, [:mobile_visible, :created_at, :updated_at] 
```

# android - Android，如何将 ScrollView 添加到具有一些列表项的屏幕中？

> ID：10496804
> 
> 赞同：2
> 
> 时间：2012-05-08T10:25:22.783
> 
> 标签：android, scrollview

在我的活动中，我有三个列表。运行应用程序后，屏幕无法滚动。我可以滚动位于其他列表之上的列表，但我无法滚动整个页面。我试图添加`ScrollView`到我的 xml 布局中，但 lint 说“垂直滚动的 ScrollView 不应包含另一个垂直滚动的小部件（ListView）”。

如何使我的屏幕可滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:32:18.180

试试这个方法

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

    <LinearLayout android:id="@+id/GlobalLayout" 
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent"
                  android:orientation="vertical" >

        <ListView android:id="@+id/ListView1"
                  android:choiceMode="multipleChoice"
                  android:layout_height="100dip"
                  android:layout_width="fill_parent" />
       <ListView android:id="@+id/ListView2"
                  android:choiceMode="multipleChoice"
                  android:layout_height="100dip"
                  android:layout_width="fill_parent" />
       <ListView android:id="@+id/ListView3"
                  android:choiceMode="multipleChoice"
                  android:layout_height="100dip"
                  android:layout_width="fill_parent" />

    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T18:08:55.963

它不起作用，因为 android 不知道他应该滚动哪个视图，所以将 a`listview`放入`scrollview`它不是一个好主意。尝试使用`visibilty`属性，使用`HIDE`您完成的视图并设置`VISIBLE`新的。或使用一个`ListView`并在完成和开始指令后尝试填充和删除项目。希望对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T10:31:48.977

![在此处输入图像描述](../Images/ce2a5a4fc27e72372bf2a947330a7085.png)

```
<ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <ListView
                android:id="@+id/listView1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1" >
            </ListView>

        </LinearLayout>

    </ScrollView> 
```

Scrollview 支持一种子布局，因此请在滚动中创建列表视图，这样您就可以获得所需的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T10:40:48.330

您可以做的是，您可以通过膨胀将页眉和页脚添加到列表视图中。创建三个 xml 布局并使用页眉和页脚将它们添加到列表视图中。

```
 View headerView = View.inflate(this, R.layout.layout_name, null);
    lv.addHeaderView(headerView); 
```

在设置适配器之前使用它。lv 是列表视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-31T12:23:03.223

使用此方法，您的列表视图在滚动视图内变为可滚动：-

```
 ListView lstNewsOffer.setAdapter(new ViewOfferAdapter(
                            ViewNewsDetail.this, viewOfferList));
                    getListViewSize(lstNewsOffer);

void getListViewSize(ListView myListView) {
    ListAdapter myListAdapter = myListView.getAdapter();
    if (myListAdapter == null) {
        // do nothing return null
        return;
    }
    // set listAdapter in loop for getting final size
    int totalHeight = 0;
    for (int size = 0; size < myListAdapter.getCount(); size++) {
        View listItem = myListAdapter.getView(size, null, myListView);
        listItem.measure(0, 0);
        totalHeight += listItem.getMeasuredHeight();
    }
    // setting listview item in adapter
    ViewGroup.LayoutParams params = myListView.getLayoutParams();
    params.height = totalHeight
            + (myListView.getDividerHeight() * (myListAdapter.getCount() - 1));
    myListView.setLayoutParams(params);
    // print height of adapter on log
    Log.i("height of listItem:", String.valueOf(totalHeight));
} 
```

# c# - 无法显示

> ID：10496809
> 
> 赞同：0
> 
> 时间：2012-05-08T10:25:38.413
> 
> 标签：c#

我需要帮助获取此代码以显示数组，但代码结构必须保持不变。我创建了两个数组，我需要从单独的方法中显示它们，我还需要搜索并显示输入的学生的分数这是我完成的第一个代码，真的需要帮助，谢谢

```
class Program
{
    static void Main()
    {
        collectStudentDetails();
        promptForStudentQuery();
        printStudentsmarks();
        Console.ReadLine();
    }

    public static void collectStudentDetails()
    {
        Console.WriteLine("Please Specifiy How Many Student Details You Wish To     Enter");
        Console.WriteLine("");
        int n = SafeReadInteger(0);
        int[] StudentMarks = new int[n];
        string[] StudentNames = new string[n];

        for (int i = 0; i < StudentNames.Length; i++)
        {
            Console.WriteLine("Enter Name for student {0}", i + 1);
            StudentNames[i] = SafeReadString(null);
            Console.WriteLine("Enter Mark for Student {0}: ", i + 1);
            StudentMarks[i] = SafeReadInteger(0);
        }
    }

    static void findStudentmark()
    {
        bool foundStudent = false;
        Console.WriteLine("Please Enter The Students Name To Find Their Marks");
        Console.WriteLine("Please Press Enter To Continue");
        Console.ReadLine();
    }

    static void printStudentsmarks()
    {
        Console.WriteLine("\nStudent Mark List");
        Console.WriteLine("Please Press Enter To Continue");
        Console.ReadLine();
        promptForStudentQuery();
    }

    static bool promptForStudentQuery()
    {
        bool promptAgain = true;
        Console.WriteLine();
        Console.WriteLine(" 1\.  find a student's mark   ");
        Console.WriteLine(" 2\.  print all student marks");
        Console.WriteLine(" 3\.  exit    ");
        Console.WriteLine();
        int choice = SafeReadInteger(0);
        if (choice == 1)
        {
            findStudentmark();
        }
        else if (choice == 2)
        {
            printStudentsmarks();
        }
        else if (choice == 3)
        {
            Environment.Exit(0);
        }
        else if (choice == 0)
        {
            Console.WriteLine("you entered an invalid option try again");
        }
        return promptAgain;
    }

    public static int SafeReadInteger(int defaultVal)
    {
        try
        {
            return int.Parse(System.Console.ReadLine());
        }
        catch
        {
            return defaultVal;
        }
    }

    public static string SafeReadString(string defaultVal)
    {
        string temp = "";
        temp = Console.ReadLine();
        while (temp == "")
        {
            Console.WriteLine("You have entered nothing. Please enter a correct value.");
            temp = Console.ReadLine();
        }
        return temp;
    }

    static void DisplayArray(int[] inputarray)
    {
        foreach (int x in inputarray)
        {
            Console.Write(" {0} ", x);
        }
        Console.WriteLine("");
    }

    static void DisplayArray2(string[] inputarray)
    {
        foreach (string x in inputarray)
        {
            Console.Write(" {0} ", x);
        }
        Console.WriteLine("");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:48:07.547

下面可能是一个粗略的方法。首先在类级别定义`StudentName`and 。`StudentMarks`

```
class Program
{
    static int[] StudentMarks;
    static string[] StudentNames;
    static void Main()
    {

        collectStudentDetails();
        promptForStudentQuery();
        printStudentsmarks();
        Console.ReadLine();
    } 
```

您需要更新方法`printStudentsmarks()`并`findStudentmark()`作为：

```
static void findStudentmark()
{
    Console.WriteLine("Please Enter The Students Name To Find Their Marks");
    Console.WriteLine("Please Press Enter To Continue");
    string stdName = Console.ReadLine();
    int i = 0;
    for (i = 0; i < StudentNames.Length; i++)
    {
        if (string.Compare(stdName, StudentNames[i], true)==0)
        {
            break;
        }
    }
    Console.WriteLine(StudentNames[i]);
    Console.WriteLine(StudentMarks[i]);
}
    static void printStudentsmarks()
    {

        Console.WriteLine("\nStudent Mark List");

        for (int i = 0; i < StudentNames.Length; i++)
        {
            Console.Write("Name: ");
            Console.WriteLine(StudentNames[i]);
            Console.WriteLine("Marks: ");
            Console.WriteLine(StudentMarks[i]);
            Console.WriteLine("______________________________");
        }

        Console.WriteLine("Please Press Enter To Continue");
        Console.ReadLine();
        promptForStudentQuery();

    } 
```

# node.js - Heroku 应用程序的环境管理 Node.js 插件/方法？

> ID：10496812
> 
> 赞同：3
> 
> 时间：2012-05-08T10:25:48.993
> 
> 标签：node.js, heroku, workflow, environment-variables, development-environment

如果我有某种方法可以自动管理我的环境变量，我的工作流程似乎会得到改进，这样我就可以根据服务器是在本地运行还是在 Heroku 上运行来自动加载不同的集合。

我的选择是什么？Heroku 必须在他们的最后使用一些东西，因为有像 local.env.PORT 这样的变量。他们在用什么？我在想，也许如果我使用同样的东西会更容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:39:15.367

我相信即使您使用 Node.js 部署应用程序，您也可以将[Foreman ruby​​ gem与 Heroku 一起使用。](https://github.com/ddollar/foreman)

Foreman 允许您在本地和远程应用程序服务器上指定不同的应用程序配置。我用它来控制和管理我的工作人员，Heroku 上的 web 实例，用于我的 rails 应用程序。

这是 Heroku 页面的链接，显示如何使用工头管理环境变量：

[https://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T17:00:55.357

你正在寻找像[figaro](https://github.com/laserlemon/figaro)这样非常有用的东西。有一个受 figaro 启发的[node-figaro](https://github.com/cmanzana/node-figaro)项目，但文档不清楚如何实际使用该项目来初始化环境变量。

# php - 使用 php 构建复杂的 JSON

> ID：10496814
> 
> 赞同：3
> 
> 时间：2012-05-08T10:25:54.310
> 
> 标签：php, json

我需要从 PHP 构建一些 JSON。JSON 的结构并不简单：

```
{ 

    "new" : {
        "checkpoints" : 
            [
                { 
                    "id" : "businessidea",
                    "name" : "business idea",
                    "purpose" : "Form a business idea", 
                    "customer" : 
                        { "questions" : 
                            [

                                { "questionid" : "id1", "questiontitle": "Evaluate size of the market, likely growth vectors and estimate addressable size.", "answers" :
                                  [
                                      {"answertext" : "an answer here", "answerlink": "", "answers": [
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"}
                                      ]},
                                      {"answertext" : "an answer here", "answerlink": "", "answers": [
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"}
                                      ]},
                                      {"answertext" : "an answer here", "answerlink": "", "answers": [
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"}
                                      ]}
                                  ]
                                },
                                { "questionid" : "id2","questiontitle": "Define the needs of the customers and the value we will deliver to the customers - customer pain and our solution", "answers" :
                                  [
                                      {"answertext" : "an answer here", "answerlink": "", "answers": [
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"}
                                      ]},
                                      {"answertext" : "an answer here", "answerlink": "", "answers": [
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"}
                                      ]},
                                      {"answertext" : "an answer here", "answerlink": "", "answers": [
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"}
                                      ]}
                                  ]
                                 },
                                { "questionid" : "id3","questiontitle": "Define the competitor landscape" , "answers" :
                                  [
                                      {"answertext" : "an answer here", "answerlink": "", "answers": [
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"}
                                      ]},
                                      {"answertext" : "an answer here", "answerlink": "", "answers": [
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"}
                                      ]},
                                      {"answertext" : "an answer here", "answerlink": "", "answers": [
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"},
                                          {"answertext": "answer text here", "answerlink": "http://google.com"}
                                      ]}
                                  ]}
                            ]
                        }, 
```

实现这一目标的最佳方法是什么？我是通过使用大量字符串连接来构建这个 json，还是使用 PHP 内置的 JSON 工具可行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T10:27:31.473

> 我是否通过使用大量字符串连接来构建这个 json

不，永远不要通过将字符串混合在一起来构建 JSON。

> 或者使用PHP内置的JSON工具是否可行？

是的。

在 PHP 中构建数据结构。你如何做到这一点的细节取决于你首先从哪里获取数据。

完成后，通过[`json_encode`](http://php.net/json_encode).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:27:41.207

您**永远不会**使用字符串函数来构建 JSON！

创建一个数组（或 stdClass 对象）和[`json_encode()`](http://php.net/json_encode)它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T10:28:17.167

使用数组来构造数据，然后使用 json_encode 将其转换为 JSON。[JSON 编码文档](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T10:27:23.860

```
<?php echo json_encode($yourArray); ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T10:27:40.693

如果要将其作为数组使用`json_decode`，请添加为第二个参数。`true`

# sql-server - 使用 MS ODBC Driver 1.0 for Linux 在 Linux 上使用 pyodbc 重新连接到 SQL Server 数据库时出现分段错误

> ID：10496815
> 
> 赞同：1
> 
> 时间：2012-05-08T10:26:01.660
> 
> 标签：sql-server, linux, odbc, segmentation-fault, pyodbc

我编写了一个作业服务器，它同时运行 1 个或多个作业（或同时运行，具体取决于系统上的 CPU 数量）。许多创建的作业连接到 SQL Server 数据库、执行查询、获取结果并将结果写入 CSV 文件。对于这些类型的作业，我使用`pyodbc`Microsoft SQL Server ODBC Driver 1.0 for Linux 进行连接、运行查询，然后断开连接。

每个作业使用 python 多处理模块作为一个单独的进程运行。作业服务器本身作为双分叉后台进程启动。

这一切都运行良好，直到我今天注意到第一个 SQL Server 作业运行良好，但第二个似乎挂起（即看起来好像它一直在运行）。

在进一步调查中，我注意到第二份工作的流程已经变得僵化，所以我进行了如下手动测试：

```
[root@myserver jobserver]# python

Python 2.6.6 (r266:84292, Dec  7 2011, 20:48:22) 

[GCC 4.4.6 20110731 (Red Hat 4.4.6-3)] on linux2

Type "help", "copyright", "credits" or "license" for more information.

import pyodbc

conn = pyodbc.connect('DRIVER={SQL Server Native Client 11.0};SERVER=MY-DATABASE-SERVER;DATABASE=MY-DATABASE;UID=MY-ID;PWD=MY-PASSWORD')

c = conn.cursor()

c.execute('select * from my_table')

<pyodbc.Cursor object at 0x1d373f0>

r = c.fetchall()

len(r)

19012

c.close()

conn.close()

conn = pyodbc.connect('DRIVER={SQL Server Native Client 11.0};SERVER=MY-DATABASE-SERVER;DATABASE=MY-DATABASE;UID=MY-ID;PWD=MY-PASSWORD')

Segmentation fault 
```

因此，您可以看到与数据库的第一个连接工作正常，但任何后续连接尝试都会因分段错误而失败。

我一生都无法弄清楚为什么会发生这种情况或解决方案，在今天之前一切正常，并且没有更改任何代码。

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:52:13.177

我无法详细说明这个问题背后的基本机制的细节。但是，我可以说问题是由在 python 的多处理模块中使用 Queue 类引起的。我是否正确实现了这个队列仍未得到答复，但似乎队列在每个作业完成后没有正确终止子进程（和底层数据库连接），这导致了分段错误。

为了解决这个问题，我实现了我自己的队列系统，它基本上是一个 Process 对象列表，按照它们被放入列表的顺序执行。然后一个循环定期检查这些进程的状态，直到所有进程都完成。然后将检索并执行下一批作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:19:11.857

我有一个非常相似的问题，在我的情况下，解决方案是升级我试图建立连接的机器上的 ODBC 驱动程序。恐怕我不太了解为什么会解决这个问题。我怀疑我尝试连接的数据库服务器上发生了某些更改或升级。

这个答案对于 OP 来说可能为时已晚，但我还是想分享它，因为我在解决问题时发现了这个问题，并且当我没有看到任何答案时有点气馁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T11:25:11.883

我最近也遇到了这个问题。我的配置包括 unixODBC-2.3.0 和 MS ODBC Driver 1.0 for Linux。经过一些实验，我们推测问题可能是由于数据库升级（在我们的案例中升级到 SQLServer 2008 SP1）引起的，从而触发了 MS ODBC 驱动程序中的一些错误。这个问题也出现在这个线程中：

[http://social.technet.microsoft.com/Forums/sqlserver/en-US/23fafa84-d333-45ac-8bd0-4b76151e8bcc/sql-server-driver-for-linux-causes-segmentation-fault?forum=sqldataaccess](http://social.technet.microsoft.com/Forums/sqlserver/en-US/23fafa84-d333-45ac-8bd0-4b76151e8bcc/sql-server-driver-for-linux-causes-segmentation-fault?forum=sqldataaccess)

我还尝试将驱动程序管理器升级到 unixODBC-2.3.2，但没有成功。我的最终解决方案是使用 FreeTDS 0.82.6+ 和 unixODBC-2.3.2。此版本的 FreeTDS 驱动程序与 unixODBC-2.3.0 不兼容，因为经理一直抱怨驱动程序不支持功能。如果升级了 unixODBC，一切都会顺利进行。

# php - MongoDB 提示似乎不起作用

> ID：10496818
> 
> 赞同：1
> 
> 时间：2012-05-08T10:26:17.213
> 
> 标签：php, mongodb

这是一个有点奇怪的。我正在遍历一个相当大的数据库，使用检查某些元素是否存在的查询。在没有提示的情况下在数据库中运行此查询大约需要 137 秒，但有提示它会下降到 0（这是 obv 更可取的）。通过 php 使用它时

```
$collection->find($params)->hint(array("responses" => 1))->count(); 
```

并分析我得到的查询：

> {“ts”：ISODate（“2012-05-08T10：11：24.682Z”），“op”：“command”，“ns”：“ey_gsat.$cmd”，“command”：{“count”：“调查答案”，“查询”：{“responses.93”：{“$exists”：true}，“responses.96”：{“$exists”：true}，“responses.99”：{“$exists”：真}，“responses.102”：{“$exists”：真}，“responses.105”：{“$exists”：真}，“responses.108”：{“$exists”：真}，“responses .111" : { "$exists" : true }, "responses.114" : { "$exists" : true }, "responses.117" : { "$exists" : true }, "responses.120" : { "$exists" : 真 }, "response.1"：{"$exists"：true}}}，"ntoreturn"：1，"responseLength"：48，"millis"：137，"client"："127.0.0.1"，"user"："" }

通过 php 运行时，没有任何查询实际使用索引的迹象。我在这个站点上运行了很多这样的查询，所以 137 毫秒加起来，这就是我想优化它们的原因。任何想法可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:10:50.457

这是一个已知的计数限制：[https](https://jira.mongodb.org/browse/SERVER-2677) ://jira.mongodb.org/browse/SERVER-2677 。您可能想关注/投票支持该问题。不幸的是，没有解决方法。您可能希望尽可能缓存计数或估计总数。

# python - Pytables - 按某些标准从表中删除行

> ID：10496821
> 
> 赞同：1
> 
> 时间：2012-05-08T10:26:30.007
> 
> 标签：python, database, python-2.7, hdf5, pytables

我有一张包含 Time32 列和大量行的表。我的问题是下一个。

当我的表达到一万行时，我想开始归档每一行早于指定值。为了创建查询，我将使用 Time32 列，它代表行中收集的数据的时间戳。因此，使用此查询我想删除工作表中的旧行，并存储在为存储存档记录而保留的其他表中。可能吗？如果是，最有效的方法是什么？

我知道 whereAppend() 方法，但是这个方法只复制记录，而不是从实际表中删除。谢谢你的建议。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:16:52.790

将记录从给定数据库的一个表归档到另一个表的一般方法是将记录复制到目标表中，然后删除源表中的相同记录。

也就是说，根据您的数据库引擎和在此基础上构建的语言的功能，您可以编写原子查询命令，为您执行原子“复制然后删除”，但这取决于您的数据库引擎功能。

在您归档旧记录的情况下，一种强大的方法可以是通过复制 n 条记录的块（n 大小与您可以临时克隆的数据量）按块复制要归档的记录，这是临时额外的大小和复制删除操作的开销），然后删除这 n 条记录，依此类推，直到归档所有满足条件 Time32 字段早于给定时间戳阈值的记录。

# android - 创建空微调器

> ID：10496823
> 
> 赞同：0
> 
> 时间：2012-05-08T10:26:41.963
> 
> 标签：android

如何创建一个没有元素的空微调器并稍后添加它们？

```
ArrayAdapter<String> aSpin = ArrayAdapter.createFromResource(this, null , null); 
```

不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:32:21.080

我很好奇，在哪种情况下你想要一个空的微调器？

无论如何，带有空对象的微调器会给你一个烦人的异常。如果你真的想要一个“空的”微调器，我建议你用一个假对象创建一个普通的微调器。该对象将是一个类似“”的字符串。所以，它不会是空的，但它会看起来像。

-- 编辑 -- 为了对对象使用微调器，您需要一个适配器。所以，首先，如果你想要一个空的微调器，只需从你的布局中找到它的视图，仅此而已。您将有一个空的微调器：

```
mSpinner = (Spinner)findViewById(R.mLayout.mSpinnerID); 
```

然后，当您需要将项目添加到微调器时，使用这些项目创建一个数组，然后将它们添加到适配器，然后将适配器添加到微调器。例如，假设您将有字符串：

```
ArrayList<String> mList = new ArrayList<String>();
mList.add("item 1");
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, mList);
mList.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:31:31.080

An`Adapter`与 a 不同[`Spinner`](http://developer.android.com/reference/android/widget/Spinner.html)。如果您想创建一个空的`Spinner`，只需在布局文件中定义一个或以编程方式创建一个。如果您不设置`Adapter`on （或在 xml 声明中`Spinner`指定静态），它将不包含任何项目。`entries`

您可能想看看[Spinner 教程](http://developer.android.com/resources/tutorials/views/hello-spinner.html)。

# c++ - 如何定义 nullptr 以同时支持 C++03 和 C++11？

> ID：10496824
> 
> 赞同：11
> 
> 时间：2012-05-08T10:26:44.497
> 
> 标签：c++, c++11, c++03, nullptr

> **可能重复：**
> [将 nullptr“反向移植”到 C++-pre-C++0x 程序](https://stackoverflow.com/questions/8747005/backporting-nullptr-to-c-pre-c0x-programs)

如何定义`nullptr`同时支持 C++03 和 C++11？

下面的代码是否使用 C++03 和 C++11 编译而不改变 C++11 编译器中 nullptr 的含义？

```
#include <cstddef>

#if !defined(nullptr)
#define nullptr NULL
#endif 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T10:32:58.710

在 C++11 中，`nullptr`是`nullptr_t`. `NULL`与（或者`0`说 Bjarne，因为他不喜欢宏）相比，它的一大优势在于这两个函数之间：

```
void foo(char*);
void foo(int); 
```

`foo(nullptr)`将调用`char*`重载，但`foo(NULL)`将调用`int`重载。因此，您的解决方案可能在大多数情况下都有效，但您可能会遇到函数过载的错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-08T10:45:47.610

AFAIK，您无法*从代码*中自动检测`nullptr`支持。

在实践中，您可以将其解读为“不可能”，这是一个非常强大的“AFAIK”。

因此要做的是使用编译器特定的代码和/或构建命令。例如，在每个相关来源中添加一个

```
#include <cpp/nullptr.h> 
```

并在构建命令中调整包含路径，以便对于`nullptr`支持的编译器，这会选择一个空头文件，而对于缺少的旧编译器`nullptr`，它会选择一个定义它的头文件 à la Meyers（比如说）。

然后非常彻底地测试！

**我将具有多个版本的标头的一般概念称为虚拟标**头，只有一个由构建命令选择。可以围绕它构建很多机器，包括只在更一般的情况下才有意义的约定。令人高兴的是，这种特殊情况没有必要，但也许值得注意。

总结：让 C++ 源代码神奇地做事不是这里的路。在构建级别添加一些帮助似乎是正确的。:-)

# entity-framework - Firebird .NET Provider 2.7.5：值不能为空。参数名称：key

> ID：10496826
> 
> 赞同：0
> 
> 时间：2012-05-08T10:26:59.507
> 
> 标签：entity-framework, firebird

这适用于 Firebird .NET Provider 2.6.5：

```
using (var context = new SetupContext())
{
    _maxApplicationID = context.Application.Max(a => (int?)a.ID) ?? 0;
} 
```

表映射：

```
<!-- SSDL content -->
<edmx:StorageModels>
  <Schema Namespace="Model1.Store" Alias="Self" Provider="FirebirdSql.Data.FirebirdClient" ProviderManifestToken="2.5" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl">
    <EntityContainer Name="Model1StoreContainer">
      <EntitySet Name="APPLICATION" EntityType="Model1.Store.APPLICATION" store:Type="Tables" Schema="Firebird" />
    </EntityContainer>
    <EntityType Name="APPLICATION">
      <Key>
        <PropertyRef Name="ID" />
      </Key>
      <Property Name="ID" Type="int" Nullable="false" />
      <Property Name="NAME" Type="varchar" Nullable="false" MaxLength="50" />
      <Property Name="DISPLAY_TEXT" Type="varchar" MaxLength="255" />
      <Property Name="ARGUMENTS" Type="varchar" MaxLength="255" />
      <Property Name="PATH" Type="varchar" MaxLength="255" />
      <Property Name="TYPE" Type="char" MaxLength="1" />
    </EntityType>
  </Schema>
</edmx:StorageModels>
<!-- CSDL content -->
<edmx:ConceptualModels>
  <Schema Namespace="Model1" Alias="Self" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns="http://schemas.microsoft.com/ado/2008/09/edm">
    <EntityContainer Name="Entities" annotation:LazyLoadingEnabled="true">
      <EntitySet Name="Application" EntityType="Model1.Application" />
    </EntityContainer>
    <EntityType Name="Application">
      <Key>
        <PropertyRef Name="ID" />
      </Key>
      <Property Name="ID" Type="Int32" Nullable="false" />
      <Property Name="Name" Type="String" Nullable="false" MaxLength="50" Unicode="true" FixedLength="false" />
      <Property Name="DisplayText" Type="String" MaxLength="255" Unicode="true" FixedLength="false" />
      <Property Name="Arguments" Type="String" MaxLength="255" Unicode="true" FixedLength="false" />
      <Property Name="Path" Type="String" MaxLength="255" Unicode="true" FixedLength="false" />
      <Property Name="Type" Type="String" MaxLength="1" Unicode="true" FixedLength="true" />
    </EntityType>
  </Schema>
</edmx:ConceptualModels>
<!-- C-S mapping content -->
<edmx:Mappings>
  <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2008/09/mapping/cs">
    <EntityContainerMapping StorageEntityContainer="Model1StoreContainer" CdmEntityContainer="Entities">
      <EntitySetMapping Name="Application"><EntityTypeMapping TypeName="Model1.Application"><MappingFragment StoreEntitySet="APPLICATION">
        <ScalarProperty Name="ID" ColumnName="ID" />
        <ScalarProperty Name="Name" ColumnName="NAME" />
        <ScalarProperty Name="DisplayText" ColumnName="DISPLAY_TEXT" />
        <ScalarProperty Name="Arguments" ColumnName="ARGUMENTS" />
        <ScalarProperty Name="Path" ColumnName="PATH" />
        <ScalarProperty Name="Type" ColumnName="TYPE" />
      </MappingFragment></EntityTypeMapping></EntitySetMapping>
    </EntityContainerMapping>
  </Mapping>
</edmx:Mappings> 
```

现在我已经升级到 Firebird .NET Provider 2.7.5 版本，我收到一个 ArgumentNullException 说“值不能为空。参数名称：键”。

这是 2.7.5 中的更改行为还是更新出了问题。如果这是一种改变的行为：如何获得一列的最大值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:05:29.690

如果按照 Mark Rotteveel 的建议完成。这是 firebird 错误数据库中的票据链接：http: [//tracker.firebirdsql.org/browse/DNET-429](http://tracker.firebirdsql.org/browse/DNET-429)

# java - JTextField 边距不适用于边框

> ID：10496828
> 
> 赞同：9
> 
> 时间：2012-05-08T10:27:09.240
> 
> 标签：java, swing, margin, jtextfield, insets

我有一个`JTextField`并且我想设置保证金。但是当我设置任何边框时，它就无法正常工作。它的边距功能不起作用。这是我的代码；

```
import java.awt.Color;
import java.awt.Insets;
import java.io.IOException;

import javax.swing.BorderFactory;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

public class ImageField {

public static void main(String[] args) throws IOException {

    JTextField textField = new JTextField();
    textField.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY));
    textField.setMargin(new Insets(0, 20, 0, 0));
    JOptionPane.showMessageDialog(null, textField, "",
            JOptionPane.PLAIN_MESSAGE);
    }
} 
```

如果我commant这条线，它的工作原理

```
 //textField.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY)); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-08T10:38:48.240

边距与边框有一些问题，要解决此问题，您可以尝试使用[CompoundBorder](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/border/CompoundBorder.html)将 EmptyBorder 设置为内边框，并将所需的边框（在您的情况下为 lineBorder）作为外边框。

像这样的东西应该工作：

```
Border line = BorderFactory.createLineBorder(Color.DARK_GRAY);
Border empty = new EmptyBorder(0, 20, 0, 0);
CompoundBorder border = new CompoundBorder(line, empty);
textField.setBorder(border); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T10:34:26.323

从[JavaDoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#setMargin%28java.awt.Insets%29)中阅读它。

> 设置文本组件的边框与其文本之间的边距。文本组件的默认 Border 对象将使用此值来创建适当的边距。但是，如果在文本组件上设置了非默认边框，则 Border 对象负责创建适当的边距空间（否则此属性将被有效忽略）。这会导致组件的重绘。将 PropertyChange 事件（“margin”）发送给所有侦听器。

您可能正在寻找复合边框：

```
BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.DARK_GRAY),
                BorderFactory.createEmptyBorder(0, 20, 0, 0)); 
```

# ios - 为什么 CSS3 转换后 input[type=range] 不起作用？

> ID：10496829
> 
> 赞同：2
> 
> 时间：2012-05-08T10:27:11.847
> 
> 标签：ios, css, input, mobile-safari, transform

**必须在 iOS 上使用 JSFiddle 才能看到问题 :)**

开发一个 iOS 网络应用程序，并有多个面板，点击时翻译 -480 像素（通过添加一个带有 JQuery 的类）。

当我`-webkit-transform: translate: (480px,0);`在第一个导航按钮上使用时，一切都很好，除了 input[type=range] 变得无响应。

我最初有这个：http: [//jsfiddle.net/b4ung/2/](http://jsfiddle.net/b4ung/2/)

后来我添加`-webkit-perspective: 1;`到正文中。这在 Safari 上修复但在**iOS上*****没有***：http : [//jsfiddle.net/RLywz/2/embedded/result/](http://jsfiddle.net/RLywz/2/embedded/result/)

 **有人可以告诉我如何让范围功能在 iOS 上工作，以及为什么它在翻译后没有注册？

* * *

只是为了进一步说明，如果我将变换更改为“左：-480px”，则范围有效，但在制作动画时会变得块状。

任何灯都会是最重要的，因为它很烦人（如果它是一个错误，有人可以提交它，因为我不是开发人员）

* * *

***编辑以使问题更清晰，并显示更新的 JSFiddle***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T03:50:46.170

我遇到了同样的问题，当它需要范围工作时，我可以通过将面板的 css 属性设置为 translate(0,0) 来破解它。为了使动画/位置正确，我用 div 包裹元素并根据需要设置 x 位置，并在不需要激活范围时移动面板的 translate 属性。希望它适用于您的结构。**

# c# - 使用计时器时如何创建 TEMP 文件以保存 int 值

> ID：10496833
> 
> 赞同：0
> 
> 时间：2012-05-08T10:27:30.760
> 
> 标签：c#, winforms, .net

就像主题声称我需要在每次程序计时器执行时保存一个值。

这是代码和我的程序。

```
using (StreamReader r = new StreamReader("counter.txt"))
{
    String line;

    while ((line = r.ReadLine()) != null)
    {
        Double coilVerdi = Convert.ToInt32(line);
        Int32 breddePlate = Convert.ToInt32(PlateBredde.Text);

        Double plateVekt = (breddePlate * 0.0016);
        Double svar = plateVekt += coilVerdi;
        coil.Text = svar.ToString();
        coil.Refresh();
    }

    r.Close();
}

Double t = Convert.ToDouble(coil.Text);
using (StreamWriter writer = new StreamWriter("counter.txt"))
{
    writer.Write(t);
    writer.Close();

} 
```

当向程序添加新值时，将执行此代码。它的作用是计算一个 int 值。但是每次我运行代码时，所有值都会丢失。因此，我将值保存到文件中。当计时器下次运行时，它会从文件中获取值并将新值添加到旧值中，一段时间后我得到正确的计数器值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T11:08:33.253

您可以在项目的设置中声明一个整数值：

![在此处输入图像描述](../Images/a6dfc1c13f97809d70cfd8c7df9294a5.png)

而不是在你的代码中使用它：

```
private void btn1_Click(object sender, RoutedEventArgs e)
    {
        Settings.Default.Counter = 123;
        Settings.Default.Save();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:58:49.900

您可以将值存储为二进制数据，这样您就不必将其转换为文本并返回。

```
using System;
using System.Collections;
using System.Runtime.Remoting;
using System.Runtime.Remoting.Channels;
using System.Runtime.Remoting.Channels.Tcp;
using System.IO;

 class Program
 {
   static void Main(string[] args)
   {
    AddCounter(5);
    Console.WriteLine(GetCounter());
    AddCounter(3);
    Console.WriteLine(GetCounter());
    AddCounter(7);
    Console.WriteLine(GetCounter());
  }

static void AddCounter(int nCounter)
{
    SetCounter(GetCounter() + nCounter);
}

static void SetCounter(int nValue)
{
    using (FileStream fs = new FileStream("counter.txt", FileMode.OpenOrCreate, FileAccess.ReadWrite))
    {
        using (BinaryWriter bw = new BinaryWriter(fs))
        {
            bw.Write(nValue);
        }
    }
}

static int GetCounter()
{
    int nRes = 0;
    using (FileStream fs = new FileStream("counter.txt", FileMode.OpenOrCreate, FileAccess.ReadWrite))
    {
        using (BinaryReader br = new BinaryReader(fs))
        {
            if (br.PeekChar() != -1)
            {
                nRes = br.ReadInt32();
            }
        }
    }
    return nRes;
}
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:09:51.600

> “但每次我运行代码时，所有值都会丢失。”

如果您希望保留原始值，则需要附加现有文件：

```
 using (StreamWriter writer = new StreamWriter("counter.txt", true)) {
    writer.Write(t);
    writer.Close();
  } 
```

# zend-framework - Zend 日志：页面请求上出现无法解释的错误

> ID：10496838
> 
> 赞同：1
> 
> 时间：2012-05-08T10:27:49.367
> 
> 标签：zend-framework

我正在使用 Zend 框架开发一个非常自定义的项目，其中应用程序使用数据库驱动的路由、默认禁用的默认路由和模块设置。

我刚刚创建了一个 Zend_Log 编写器，它在数据库中记录应用程序错误。

问题是，我有两个无法解释的错误：

```
5 NOTICE M:\Zend_Framework\library\Zend\Controller\Action.php Line 516 Page not found
5 NOTICE M:\Zend_Framework\library\Zend\Controller\Action.php Line 516 Request Parameters 
```

我看过有问题的行，它只是有`$this->$action();`，这对我没有帮助！

谁能告诉我如何进一步调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:01:30.960

这些不是完全错误。您的日志记录以某种方式损坏。我们之前为我们的项目做了类似的事情——你也可以记录 get/post 参数、堆栈跟踪等。

这看起来像有人请求不存在的操作 - 例如 /index/does-not-exist

# javascript - 通过 HTML5、JS 或 jQuery 访问 iPad 中的缓存

> ID：10496842
> 
> 赞同：0
> 
> 时间：2012-05-08T10:28:09.040
> 
> 标签：javascript, jquery, html, jquery-ui, caching

我使用 HTML 和 javascript 创建了一个基于浏览器的应用程序，其中嵌入了一些视频。现在为了更快地访问应用程序，我们希望从缓存（如果可用）中访问视频，以避免最终用户访问时缓冲。

限制是：应用程序主要通过默认的 Safari 浏览器在 iPhone / iPad 上使用，并且需要 javascript/jQuery 解决方案，以便尽快达到要求。视频大小也高达 22MB。

是否可以访问由 iPad 上的缓存管理的大视频，可以从 javascript 或 jQuery 访问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:32:03.730

文件缓存是浏览器（或服务器/应用程序）的职责。您可以使用缓存控制 HTTP 标头进行一些控制： [http ://condor.depaul.edu/dmumaugh/readings/handouts/SE435/HTTP/node24.html](http://condor.depaul.edu/dmumaugh/readings/handouts/SE435/HTTP/node24.html)

但最终它高度依赖于您使用的浏览器。我建议在 iPad 中查找“最常用”的浏览器，并研究它们的文件缓存是如何工作的。

另一种建议，也许您应该使用 HTML5“客户端存储”？ [http://www.webreference.com/authoring/languages/html/HTML5-Client-Side/index.html](http://www.webreference.com/authoring/languages/html/HTML5-Client-Side/index.html)

# maven - 使用 Maven Surefire 运行包含在依赖项 jar 中的 JUnit 测试

> ID：10496846
> 
> 赞同：26
> 
> 时间：2012-05-08T10:28:32.020
> 
> 标签：maven, jar, junit, surefire

我的 maven 存储库中有一个 jar，其中包含 junit 测试，它应该在不同的项目中运行，因为它能够检查项目并测试它的某些功能。不幸的是，surefire 不会提取包含在 jar 中的测试，正如此[Feature Request 所示](http://jira.codehaus.org/browse/SUREFIRE-569)。

在功能请求中，他们建议解压 jar，然后由 surefire 执行。

我使用 maven-dependency-plugin 成功解压缩了 jar，但无论如何都不会执行包含的测试。这就是我配置 maven-dependency-plugin 以解压缩我的 jar 的方式：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
        <execution>
            <id>unpack</id>
            <phase>process-test-classes</phase>
            <goals>
                <goal>unpack</goal>
            </goals>
            <configuration>
                <artifactItems>
                    <artifactItem>
                        <groupId>de.mwx.test</groupId>
                        <artifactId>selenium-test-base</artifactId>
                        <version>0.1</version>
                        <overWrite>true</overWrite>
                          <outputDirectory>
                              ${project.build.directory}/classes
                          </outputDirectory>
                    </artifactItem>
                </artifactItems>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-06-12T09:12:27.247

有一种方法可以从另一个 jar 中在 Maven 中运行测试。从 maven-surefire-plugin 2.15 版开始，您可以告诉 maven 扫描您的测试 jar 以进行测试并运行它们。您不需要提取测试 jar。只需向您的测试 jar 添加一个依赖项，然后：

```
<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
            <dependenciesToScan>
                <dependency>test.jar.group:test.jar.artifact.id</dependency>
            </dependenciesToScan>
        </configuration>
    </plugin> 
```

[从https://gist.github.com/aslakknutsen/4520226](https://gist.github.com/aslakknutsen/4520226) 和[https://issues.apache.org/jira/browse/SUREFIRE-569](https://issues.apache.org/jira/browse/SUREFIRE-569)拿了这些东西

正如预期的那样，这适用于 JUnit 和 Testng。可能适用于surefire可以运行的任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T21:48:27.077

（这只是重申上面来自 khmarbaise 的评论中的内容，但由于没有澄清，我认为值得重申）：

使用 test-classes 目录而不是 classes 文件夹作为 outputDirectory：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
        <execution>
            <id>unpack</id>
            <phase>process-test-classes</phase>
            <goals>
                <goal>unpack</goal>
            </goals>
            <configuration>
                <artifactItems>
                    <artifactItem>
                        <groupId>de.mwx.test</groupId>
                        <artifactId>selenium-test-base</artifactId>
                        <version>0.1</version>
                        <overWrite>true</overWrite>
                          <outputDirectory>
                              ${project.build.directory}/test-classes
                          </outputDirectory>
                    </artifactItem>
                </artifactItems>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T10:46:25.223

如问题中所述，您需要有一个包含在项目中的套件，该套件不位于测试 jar 中。

# java - java中的时间戳转换（windows 128位系统结构到人类可读格式

> ID：10496861
> 
> 赞同：-1
> 
> 时间：2012-05-08T10:29:11.613
> 
> 标签：java, android

我想将 Windows：128 位系统结构，即..，“D9070B00010002000600090013000000”转换为人类可读的格式，即..，星期一，2009 年 11 月 2 日 06:09:19，所以有算法可以转换它，我没有得到。供参考[http://www.digital-detective.co.uk/freetools/decode.asp](http://www.digital-detective.co.uk/freetools/decode.asp)其中示例时间和 java 中的转换时间。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:11:00.007

您包含的格式是某种小端十六进制编码的单词混乱。看起来非常低效。

但是，它可以这样解码：

```
long getSystemStructureTime(String enc) {
    long result = -1L;
    // system time is typically a set of WORDs encoded, little-endian
    if (!TextUtils.isEmpty(enc)) {
        final int length = enc.length();
        ByteBuffer b = ByteBuffer.allocate(length / 2);
        b.order(ByteOrder.BIG_ENDIAN);
        for (int i = 0; i < enc.length(); i+=2) {
            b.put((byte) Integer.parseInt(enc.substring(i, i + 2), 16));
        }
        b.flip();
        b.order(ByteOrder.LITTLE_ENDIAN);
        try {
            int year = b.getShort();
            int month = b.getShort();
            int day = b.getShort();
            int dayOfMonth = b.getShort();
            int hourOfDay = b.getShort();
            int minuteOfHour = b.getShort();
            int secondsOfMinute = b.getShort();
            int millisOfSecond = b.getShort();

            Calendar c = Calendar.getInstance();
            c.set(Calendar.YEAR, year);
            c.set(Calendar.MONTH, month - 1); // months in calendar are base 0
            c.set(Calendar.DAY_OF_MONTH, dayOfMonth);
            c.set(Calendar.HOUR_OF_DAY, hourOfDay);
            c.set(Calendar.MINUTE, minuteOfHour);
            c.set(Calendar.SECOND, secondsOfMinute);
            c.set(Calendar.MILLISECOND, millisOfSecond);

            result = c.getTimeInMillis();
        } catch (BufferUnderflowException e) {
            // This wasn't a proper time..
        }
    }
    return result;
} 
```

塞进你发布的内容：

```
System.out.println(new Date(getSystemStructureTime("D9070B00010002000600090013000000"))); 
```

产量：

```
Mon Nov 02 06:09:19 GMT+00:00 2009 
```

`Calendar`此版本以毫秒为单位返回时间，根据您的喜好，返回解析期间创建的实例可能会更好。

# .net - 窗体事件处理

> ID：10496864
> 
> 赞同：0
> 
> 时间：2012-05-08T10:29:34.110
> 
> 标签：.net, windows, c++-cli

我完全是 Windows 编程的新手，我有一个文本框，用于在调整主 gui*即 form1*的大小但事件未触发时显示文本。任何关于为什么会发生这种情况的指针将不胜感激。

```
private: System::Void Form1_Resize(System::Object^ sender, System::EventArgs^ e) {

             //int newFormWidth = this->Width;
             textBox1->Text = "Obi";
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:37:17.263

如果您查看具有 Windows 窗体设计器生成的代码的区域，则您有一个 InitializeComponent 方法。检查您是否将处理程序连接到您的事件。它应该看起来像这样。

```
this->SizeChanged += gcnew System::EventHandler(this, &Form1::Form1_SizeChanged); 
```

# actionscript-3 - 如何从as3中的给定字符串中拆分数字？

> ID：10496866
> 
> 赞同：0
> 
> 时间：2012-05-08T10:29:37.247
> 
> 标签：actionscript-3, flash, actionscript

我创建了两个组合框。我必须创建一个匹配以下程序，以便

```
function changeHandler(e:Event)
{
    trace(ComboBox(e.target).selectedItem.label+ComboBox(a1).selectedItem.label);
} 
```

如果 e.target 检索到`a1`. 我必须把它分成`1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:45:45.067

这确实有效

假设您的 ComboBox 实例名称是 a0

```
import fl.controls.ComboBox;
a0.addEventListener(Event.CHANGE, changeHandler);
function changeHandler(e:Event) {
    trace(e.target.selectedItem.label);
    trace(e.target.selectedItem.label.substring(1));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:05:52.850

**对于一般字符串`"a1"`：**

```
function changeHandler(e:Event)
{
    var tempStr:String = "a1";
    var intValue:int = int(tempStr.substr(1));
} 
```

**对于`ComboBox(e.target).selectedItem.label`：**

```
 function changeHandler(e:Event)
    {
        var tempStr:String = ComboBox(e.target).selectedItem.label;
        var intValue:int = int(tempStr.substr(1));
    } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-08T10:40:38.097

这里没有Flash，但我想你可以试试

```
trace(ComboBox(e.target).selectedItem.label+substring(1,ComboBox(a1).selectedItem.label)); 
```

它有效吗？

# facebook - Fql，获取“我的照片”

> ID：10496869
> 
> 赞同：1
> 
> 时间：2012-05-08T10:29:51.237
> 
> 标签：facebook, facebook-fql

在我的 facebook 页面中，当不是管理员的人发布照片时，它会进入一个名为“我的照片”的相册，这与我制作的其他相册不同。它没有“援助”......它的网址是： [http ://www.facebook.com/photo.php?fbid=1760432628996&set=o.373236069382570&type=1&permPage=1](http://www.facebook.com/photo.php?fbid=1760432628996&set=o.373236069382570&type=1&permPage=1)

照片是公开的，即使您没有在 Facebook 上注册，您也可以看到它们。

我可以使用此 FQL 在我的页面的其他相册中获取照片：

```
SELECT pid, src, caption FROM photo WHERE aid = 'MY_ALBUM_ID' ORDER BY created DESC 
```

但我无法在“我的照片”相册中获取照片，因为没有“帮助”。我试图查询流，但我只得到了我贴在墙上的照片。

有人可以粘贴我正确的 FQL 以获取上面相册中的照片吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:03:34.160

这些是您被标记的照片，因此它们不是您的照片。这就是为什么它们不会出现在您的任何专辑中的原因。

此查询获取它们：

```
SELECT pid, object_id, src, caption FROM photo WHERE object_id IN 
   (SELECT object_id FROM photo_tag WHERE subject='373236069382570') 
```

根据开发者参考，FB 更喜欢`object_id`现在`pid`。如果 FB 不推荐使用，您可能希望使用 object_ids 以防止破坏您的代码`pid`。

# android - Android：以编程方式获取硬件信息

> ID：10496872
> 
> 赞同：57
> 
> 时间：2012-05-08T10:30:05.433
> 
> 标签：android, android-hardware

我需要在运行我的应用程序的 Android 设备上获取硬件相关信息。我需要以下类型的信息。

*   CPU 制造商、型号和序列号
*   SD 卡制造商和序列号
*   相机制造商和其他相关规格
*   蓝牙相关硬件信息
*   WiFi相关硬件信息
*   RAM 供应商/型号
*   显示供应商和型号

对此主题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2016-05-18T11:23:43.523

```
 Log.i("TAG", "SERIAL: " + Build.SERIAL);
    Log.i("TAG","MODEL: " + Build.MODEL);
    Log.i("TAG","ID: " + Build.ID);
    Log.i("TAG","Manufacture: " + Build.MANUFACTURER);
    Log.i("TAG","brand: " + Build.BRAND);
    Log.i("TAG","type: " + Build.TYPE);
    Log.i("TAG","user: " + Build.USER);
    Log.i("TAG","BASE: " + Build.VERSION_CODES.BASE);
    Log.i("TAG","INCREMENTAL " + Build.VERSION.INCREMENTAL);
    Log.i("TAG","SDK  " + Build.VERSION.SDK);
    Log.i("TAG","BOARD: " + Build.BOARD);
    Log.i("TAG","BRAND " + Build.BRAND);
    Log.i("TAG","HOST " + Build.HOST);
    Log.i("TAG","FINGERPRINT: "+Build.FINGERPRINT);
    Log.i("TAG","Version Code: " + Build.VERSION.RELEASE); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-05-08T10:35:18.963

```
Log.i("ManuFacturer :", Build.MANUFACTURER);
Log.i("Board : ", Build.BOARD);
Log.i("Display : ", Build.DISPLAY); 
```

更多信息可以在[http://developer.android.com/reference/android/os/Build.html找到](http://developer.android.com/reference/android/os/Build.html)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-05-17T09:52:42.967

**此代码为您提供以下信息**

1.  设备制造商
2.  牌
3.  模型
4.  木板
5.  硬件
6.  序列号。
7.  Android_ID
8.  屏幕分辨率
9.  屏幕密度
10.  引导加载程序
11.  用户
12.  主持人
13.  API 级别
14.  构建 ID
15.  构建时间
16.  指纹

    ```
     DisplayMetrics dm = new DisplayMetrics();
        getActivity().getWindowManager().getDefaultDisplay().getMetrics(dm);
        double x = Math.pow(mWidthPixels / dm.xdpi, 2);
        double y = Math.pow(mHeightPixels / dm.ydpi, 2);
        screenInches = Math.sqrt(x + y);
        rounded = df2.format(screenInches);
        densityDpi = (int) (dm.density * 160f);

    Manufacturer_value = Build.MANUFACTURER;
    Brand_value = Build.BRAND;
    Model_value = Build.MODEL;
    Board_value = Build.BOARD;
    Hardware_value = Build.HARDWARE;
    Serial_nO_value = Build.SERIAL;
    UID_value = tManager.getDeviceId();
    android_id = 
    Settings.Secure.getString(getContext().getContentResolver(), 
    Settings.Secure.ANDROID_ID);
    ScreenResolution_value = mHeightPixels + " * " + mWidthPixels + " Pixels";
    screen_size = rounded + " Inches";
    screen_density = String.valueOf(densityDpi) + " dpi";
    BootLoader_value = Build.BOOTLOADER;
    User_value = Build.USER;
    Host_value = Build.HOST;
    Version = Build.VERSION.RELEASE;
    API_level = Build.VERSION.SDK_INT + "";
    Build_ID = Build.ID;
    Build_Time = Build.TIME + "";
    Fingerprint = Build.FINGERPRINT; 
    ```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-15T08:34:59.500

您还可以获得实时硬件信息。Build.* 参数在 Android 编译期间设置，甚至在将其部署到硬件本身之前。

您可以通过读取 /proc/* "files" 访问 Linux 实时硬件信息。

您可以使用 [https://stackoverflow.com/a/3528239/997381做到这一点](https://stackoverflow.com/a/3528239/997381)

就像命令一样`cat /proc/cpuinfo`。

您可以使用 进行测试`adb shell`，并且不需要 root 权限。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-11-07T12:02:44.293

也许有人需要 kotlin 解决方案

[![例子](../Images/05aadfe633a7e94b5707dabd5eafec54.png)](https://i.stack.imgur.com/1c0SG.png)

```
class DeviceInfoHelper constructor(val context: Context) {

    val model = deviceModel

    val imei = context.imei

    val hardware: String? = HARDWARE

    val board: String? = BOARD

    val bootloader: String? = BOOTLOADER

    val user: String? = USER

    val host: String? = HOST

    val version: String? = RELEASE

    val apiLevel = SDK_INT

    val id: String? = ID

    val time = TIME

    val fingerPrint: String? = FINGERPRINT

    val display: String? = DISPLAY

    private val deviceModel
        @SuppressLint("DefaultLocale")
        get() = capitalize(
                if (MODEL.toLowerCase().startsWith(MANUFACTURER.toLowerCase())) {
                    MODEL
                } else {
                    "$MANUFACTURER $MODEL"
                })

    private fun capitalize(str: String) = str.apply {
        if (isNotEmpty()) {
            first().run { if (isLowerCase()) toUpperCase() }
        }
    }

    private val Context.imei
        @SuppressLint("HardwareIds", "MissingPermission")
        get() = telephonyManager?.run {
            if (isReadPhoneStatePermissionGranted()) {
                if (SDK_INT >= VERSION_CODES.O) {
                    imei
                } else {
                    deviceId
                }
            } else DEFAULT_DEVICE_ID
        } ?: DEFAULT_DEVICE_ID

    private fun Context.isReadPhoneStatePermissionGranted() =
            ContextCompat.checkSelfPermission(
                    this,
                    Manifest.permission.READ_PHONE_STATE
            ) == PackageManager.PERMISSION_GRANTED

    private val Context.telephonyManager
        get() = getSystemService(Context.TELEPHONY_SERVICE) as TelephonyManager?
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T10:36:15.290

android.os 中的“Build”类看起来会包含一些您需要的信息

用它作为

```
string build = Build.VERSION.DEVICE; 
```

[安卓硬件信息](http://developer.android.com/reference/android/os/Build.html)

# ruby - 为什么 OpenURI 将 10kb 以下的文件视为 StringIO？

> ID：10496874
> 
> 赞同：23
> 
> 时间：2012-05-08T10:30:14.220
> 
> 标签：ruby, standard-library

我从远程网站获取带有 open-uri 的图像，并将它们保存在我的 Ruby on Rails 应用程序中的本地服务器上。大多数图像显示没有问题，但有些图像没有显示。

经过很长的调试会话后，我终于发现（感谢[这篇博](http://adayinthepit.com/2011/06/03/ruby-openuri-open-returns-stringio-fileio/)文），原因是`class Buffer`open [-uri-libary](http://svn.ruby-lang.org/repos/ruby/branches/ruby_1_9_3/lib/open-uri.rb)中的将大小小于 10kb 的文件视为 IO 对象而不是临时文件。

[我按照 Micah Winkelspecht 对这个 StackOverflow question](https://stackoverflow.com/questions/694115/why-does-ruby-open-uris-open-return-a-stringio-in-my-unit-test-but-a-fileio-in)的回答设法解决了这个问题，我将以下代码放在我的初始化程序的文件中：

```
require 'open-uri'
# Don't allow downloaded files to be created as StringIO. Force a tempfile to be created.
OpenURI::Buffer.send :remove_const, 'StringMax' if OpenURI::Buffer.const_defined?('StringMax')
OpenURI::Buffer.const_set 'StringMax', 0 
```

到目前为止，这按预期工作，但我一直想知道，为什么他们首先将这段代码放入库中？有人知道具体原因，**为什么 10kb 以下的文件会被视为 StringIO ？**

由于上面的代码实际上为我的整个应用程序全局重置了这种行为，我只想确保我没有破坏其他任何东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T11:07:24.980

在进行网络编程时，您分配一个相当大的缓冲区并发送和读取适合该缓冲区的数据单元。但是，在处理文件（或有时称为 BLOB 的东西）时，您不能假设数据将适合您的缓冲区。因此，您需要对这些大型数据流进行特殊处理。

（有时，适合缓冲区的数据单元称为数据包。但是，数据包实际上是第 4 层的东西，就像帧位于第 2 层一样。由于这是在第 7 层发生的，因此最好将它们称为消息。）

对于大于 10K 的回复，open-uri 库会设置额外的开销来写入流对象。当小于 StringMax 大小时，它只包含消息中的字符串，因为它知道它可以容纳在缓冲区中。

# asp.net - 无法加载文件或程序集 'file:///C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\ asp.net vs2010

> ID：10496875
> 
> 赞同：3
> 
> 时间：2012-05-08T10:30:15.933
> 
> 标签：asp.net, .net-assembly, .net-framework-version

昨天我的项目运行顺利，但今天我遇到了错误。以下是详细信息：

> 无法加载文件或程序集 'file:///C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\parktms\c8392404\1ba3bab5\App_Web_login.aspx.6cc23264.lmj8uym6.dll' 或它的依赖项之一。句柄无效。（来自 HRESULT 的异常：0x80070006 (E_HANDLE)） 描述：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详情：

> System.IO.FileLoadException：无法加载文件或程序集 'file:///C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\parktms\c8392404\1ba3bab5\App_Web_login.aspx.6cc23264 .lmj8uym6.dll' 或其依赖项之一。句柄无效。（来自 HRESULT 的异常：0x80070006 (E_HANDLE)）

源错误：

> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

> [FileLoadException: 无法加载文件或程序集 'file:///C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\parktms\c8392404\1ba3bab5\App_Web_login.aspx.6cc23264.lmj8uym6。 dll' 或其依赖项之一。句柄无效。（HRESULT 异常：0x80070006 (E_HANDLE)）] System.Reflection.RuntimeAssembly._nLoad（AssemblyName 文件名，字符串代码库，证据 assemblySecurity，RuntimeAssembly locationHint，StackCrawlMark 和 stackMark，布尔 throwOnFileNotFound，布尔 forIntrospection，布尔 suppressSecurityChecks）+0 System.Reflection.RuntimeAssembly .nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39 System.

版本信息：

> Microsoft .NET 框架版本：4.0.30319；ASP.NET 版本：4.0.30319.225

为什么我有这个问题，我该如何摆脱它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-08T10:34:22.670

尝试执行完整的解决方案构建。如果这不起作用，请单击`Build -> Clean Solution`。如果错误仍然存​​在，请删除`C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\parktms`文件夹中的所有内容并重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-12T07:09:19.953

当你看到它有临时文件夹时，你应该猜到清理和构建后一切都会好起来的

# objective-c - 将文本转换为 Unicode 字符

> ID：10496882
> 
> 赞同：0
> 
> 时间：2012-05-08T10:30:54.277
> 
> 标签：objective-c

我有一些文字

```
\u652f\u6301\u3002 
```

我希望它可以显示相关的 unicode 字符

我尝试使用

```
[s   stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding] 
```

解码但没有结果

欢迎任何评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:54:46.683

```
NSString *str =@"\u652f\u6301\u3002";
NSLog(@"%@",str);  // Output: 支持。

NSString *str =@"\\u652f\\u6301\\u3002";
NSLog(@"%@",str);    // Output: \u652f\u6301\u3002 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:47:54.847

我不完全确定您要做什么。但在 Ruby 中，我可以执行以下操作。

```
ruby> a = Iconv.iconv( "UTF-8", "UTF-16LE","\\u652f\\u6301\\u3002")
=> ["\347\225\234\343\224\266\346\230\262\347\225\234\343\214\266\343\204\260\347\225\234\343\200\263\343\210\260"]
ruby> puts a
畜㔶昲畜㌶㄰畜〳㈰ 
```

希望这可以帮助。

# powershell - Powershell 错误处理：如果没有发生错误，则执行某些操作

> ID：10496885
> 
> 赞同：13
> 
> 时间：2012-05-08T10:31:09.273
> 
> 标签：powershell, try-catch

我一直在寻找这个，但似乎找不到它。我有一个带有 try {} catch {} 语句的脚本。如果没有发生错误，我想添加一个操作。

例如

```
try { something }
catch { "Error occured" }
if (!error) {
"No Error Occured"
} 
```

如何测试语句中是否没有发生错误？

提前致谢

沃尔特

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-08T10:41:11.327

`$error`清除后检查自动变量。

```
$error.clear()
try { something }
catch { "Error occured" }
if (!$error) { "No Error Occured" } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-08T11:00:14.797

其他方式：

```
$ErrorOccured = $false

try 
{ 
   $ErrorActionPreference = 'Stop'
   ...something...
}
catch
{
   "Error occured"
   $ErrorOccured=$true
}

if(!$ErrorOccured) {"No Error Occured"} 
```

.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-07T02:12:56.207

关于什么，

```
something
If ($?)
{
    "No error"
}
Else
{
    "Error"
} 
```

这也适用于非终止错误。

# c# - 从 Oracle 到 MySql 数据库的 DateTime 值

> ID：10496891
> 
> 赞同：1
> 
> 时间：2012-05-08T10:31:44.747
> 
> 标签：c#, mysql, oracle

我有一个问题，如何将`datetime`值从 Oracle 解析到 MySQL 数据库。

我写这个是为了从 Oracle 中提取日期时间：

```
SELECT TO_CHAR(p1.creation_date,'DD.MM.RRRR HH24:mi:ss') AS dat_pot 
FROM TABLE 
```

然后我将结果放入数据集中，然后从数据集中提取日期的值，如下所示：

```
string lDat_otp = null;        

if (rw_mat["dat_otp"].ToString().Length <= 0)
{
   lDat_otp = "0";
}
else
{
   lDat_otp = "convert(datetime,'" + rw_mat["dat_otp"] + "',4)";
} 
```

然后我`lDat_otp`在`INSERT`语句中使用其他一些值，如下所示：

```
myQuery = " INSERT INTO ordersstavke (BrDok, " +
          " SifParFil, SifParIsp, DatPriOtpr, SifPodKla, Masa, Paketa) " +
          " VALUES ('" + rw_mat["brdok"] + "', '" +
                         rw_mat["sifskl_kor"] + "','" +
                         rw_mat["partner"] + "'," +
                         lDat_otp + ",'" +
                         rw_det["ibrmat"] + "', '" +
                         rw_det["izlaz_tez"] + "', '" +
                         rw_det["izlaz_kol"] + "')"; 
```

但是执行时出现错误，它会：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '26.01.2012 13:48:41',4)','100654', '0', '10')' 附近使用正确的语法

所以帮忙！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:45:22.853

您可以将 datetime 字段解析为[DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)结构，然后使用参数创建`insert into`查询并将日期作为参数传递：

```
DateTime time = //Some value ...
String myQuery = " INSERT INTO ordersstavke (BrDok, " +
          " SifParFil, SifParIsp, DatPriOtpr, SifPodKla, Masa, Paketa) " +
          " VALUES ('" + rw_mat["brdok"] + "', '" +
                         rw_mat["sifskl_kor"] + "','" +
                         rw_mat["partner"] + "'," +
                         "?date ,'" +
                         rw_det["ibrmat"] + "', '" +
                         rw_det["izlaz_tez"] + "', '" +
                         rw_det["izlaz_kol"] + "')";
MysqlCommand command = new MysqlCommand(query, connection);
command.Parameters.AddWithValue("?date", time); 
```

这样做你应该不会遇到日期格式的问题。 *我强烈建议使用参数而不是字符串连接，即使对于查询的其他参数...*

# android - 带有 3 个按钮的 Android 小部件。和不同的意图

> ID：10496892
> 
> 赞同：1
> 
> 时间：2012-05-08T10:31:45.323
> 
> 标签：android, android-intent, android-widget

我正在尝试创建的小部件有一个奇怪的问题。该小部件是一个带有 3 个答案选项（按钮）的随机问题。我从互联网上加载问题并且有效。

我混淆了答案，所以答案并不总是在同一个位置。此外，可能有多个正确答案。

```
public RemoteViews setAnswers(JSONObject questionObj, RemoteViews views) throws JSONException {
    // Get the Answers
    String answerA = questionObj.getString("Ans1");
    String answerB = questionObj.getString("Ans2");
    String answerC = questionObj.getString("Ans3");

    // Get the Answers that is correct (1 = Correct, 0 = Wrong)
    int correctA = Integer.parseInt(questionObj.getString("correct1"));
    int correctB = Integer.parseInt(questionObj.getString("correct2"));
    int correctC = Integer.parseInt(questionObj.getString("correct3"));

    // Get help text for correct or wrong answer (HTML)
    String HTTPcor = questionObj.getString("HTTPcor")+" - Correct";
    String HTTPwro = questionObj.getString("HTTPwro")+" - Wrong";

    // Create the Intent for the answers that is correct
    Intent correctIntent = new Intent(maincontext, AdMain.class);
    correctIntent.putExtra("appWidID", appWidId);
    correctIntent.putExtra("correct", 1); // Answer is correct.
    correctIntent.putExtra("HTTP", HTTPcor); // Help text.
    PendingIntent correctIntentPending = PendingIntent.getActivity(maincontext, 0, correctIntent, PendingIntent.FLAG_UPDATE_CURRENT);

    // Create the Intent for the answers that is wrong
    Intent wrongIntent = new Intent(maincontext, AdMain.class);
    wrongIntent.putExtra("appWidID", appWidId);
    wrongIntent.putExtra("correct", 0); // Answer is wrong.
    wrongIntent.putExtra("HTTP", HTTPwro); // Help text.
    PendingIntent wrongIntentPending = PendingIntent.getActivity(maincontext, 0, wrongIntent, PendingIntent.FLAG_UPDATE_CURRENT);

    // Create a random number between 1 and 6 (6 different ways to mix up 3 buttons)
    Random generator = new Random();
    int mix = generator.nextInt(6) + 1;
    Log.v("JapanWidget", "AnswerMix - "+mix+" - appWidId = "+appWidId);

    // DEBUG Set mix to 1 Until i get the Intent fixed.
    mix = 1;

    // Mix the buttons.
    switch(mix) {
      case 1:
          views.setTextViewText(R.id.Answer1, answerA); // Button 1 answer A
          // If correctA = 1 THEN set correctIntentPending ELSE set wrongIntentPending
          if (correctA == 1) { views.setOnClickPendingIntent(R.id.Answer1, correctIntentPending); } else { views.setOnClickPendingIntent(R.id.Answer1, wrongIntentPending); }
          views.setTextViewText(R.id.Answer2, answerB); // Button 2 answer B
          // If correctB = 1 THEN set correctIntentPending ELSE set wrongIntentPending
          if (correctB == 1) { views.setOnClickPendingIntent(R.id.Answer2, correctIntentPending); } else { views.setOnClickPendingIntent(R.id.Answer2, wrongIntentPending); }
          views.setTextViewText(R.id.Answer3, answerC); // Button 3 answer C
          // If correctB = 1 THEN set correctIntentPending ELSE set wrongIntentPending
          if (correctC == 1) { views.setOnClickPendingIntent(R.id.Answer3, correctIntentPending); } else { views.setOnClickPendingIntent(R.id.Answer3, wrongIntentPending); }
          break;
      default:  
          views.setTextViewText(R.id.Answer1, answerA);
          if (correctA == 1) { views.setOnClickPendingIntent(R.id.Answer1, correctIntentPending); } else { views.setOnClickPendingIntent(R.id.Answer1, wrongIntentPending); }
          views.setTextViewText(R.id.Answer2, answerB);
          if (correctB == 1) { views.setOnClickPendingIntent(R.id.Answer2, correctIntentPending); } else { views.setOnClickPendingIntent(R.id.Answer2, wrongIntentPending); }
          views.setTextViewText(R.id.Answer3, answerC);
          if (correctC == 1) { views.setOnClickPendingIntent(R.id.Answer3, correctIntentPending); } else { views.setOnClickPendingIntent(R.id.Answer3, wrongIntentPending); }
          break;
    }

    return views;
} 
```

问题是，当我从新 Activity 中执行 GetExtra 时，它将始终是在 wrongIntentPending 中设置的额外内容。这里出了点问题。但我确实看到“if (correctA == 1) { } else { }” 工作正常。即使我将其设置为“if (correctA == 1) { } else { }”，我也会从 wrongIntentPending 中获得 Extra。

出了什么问题？或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:57:37.307

阅读此页面后，我发现了问题：http: [//www.bogdanirimia.ro/android-widget-click-event-multiple-instances/269](http://www.bogdanirimia.ro/android-widget-click-event-multiple-instances/269)

**工作代码：**

```
// Create the Intent for the answers that is correct
Intent correctIntent = new Intent(maincontext, AdMain.class);
correctIntent.putExtra("appWidID", appWidId);
correctIntent.putExtra("correct", 1); // Answer is correct.
correctIntent.putExtra("HTTP", HTTPcor); // Help text.
PendingIntent correctIntentPending = PendingIntent.getActivity(maincontext, 0, correctIntent, PendingIntent.FLAG_UPDATE_CURRENT);

// Create the Intent for the answers that is wrong
Intent wrongIntent = new Intent(maincontext, AdMain.class);
wrongIntent.putExtra("appWidID", appWidId);
wrongIntent.putExtra("correct", 0); // Answer is wrong.
wrongIntent.putExtra("HTTP", HTTPwro); // Help text.
PendingIntent wrongIntentPending = PendingIntent.getActivity(maincontext, 1, wrongIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

在“PendingIntent getActivity (Context context, int requestCode, Intent intent, int flags)”中，我需要设置 2 个不同的 requestCodes。甚至是谷歌开发者页面说它目前没有使用。

*   context：这个 PendingIntent 应该在其中启动活动的上下文。
*   requestCode：发件人的私人请求代码（当前未使用）。
*   意图：要启动的活动的意图。
*   flags：可以是 FLAG_ONE_SHOT、FLAG_NO_CREATE、FLAG_CANCEL_CURRENT、FLAG_UPDATE_CURRENT 或 Intent.fillIn() 支持的任何标志，以控制在实际发送发生时可以提供的意图的哪些未指定部分。

所以我改变了这一行：

PendingIntent wrongIntentPending = PendingIntent.getActivity(maincontext, **1** , wrongIntent, PendingIntent.FLAG_UPDATE_CURRENT);

现在它可以工作了。

# php - graph api facebook 用户上传视频

> ID：10496895
> 
> 赞同：0
> 
> 时间：2012-05-08T10:32:01.033
> 
> 标签：php, facebook, facebook-graph-api

我刚刚创建了一个 Facebook 应用程序，我想： 1\. 用户登录 --> 浏览并选择视频 --> 上传到自己的墙。

我有一些来自 Facebook Dev 的代码。示例，但我得到一个错误。在阅读和错误性质之后，我可以想象我的问题出在此处：

代码：

`$token_url = "https://graph.facebook.com/oauth/access_token?client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url) . "&client_secret=" . $app_secret . "&code=" . $code . "&type=client_cred";`

`$access_token = file_get_contents($token_url);`

ERORR：{“错误”：{“消息”：“必须使用活动访问令牌来查询有关当前用户的信息。”，“类型”：“OAuthException”，“代码”：2500 } }

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:50:13.850

您拥有的访问令牌似乎对当前用户无效。

必须首先重定向到 FB 以使用您的应用程序 ID 获取令牌：

```
$dialog_url = "http://www.facebook.com/dialog/oauth?client_id=".YOUR APP ID."&redirect_uri=".urlencode(YOUR CALLBACK URL).'&scope=email,publish_stream'; 
```

**更新**

您可能没有请求足够的权限，请参阅范围参数，您需要获得 publish_stream 的权限才能发布用户故事。

获得此代码后，您需要通过将请求发送到类似于以下内容的 URL 来获取实际的应用程序访问令牌：

```
$token_url="https://graph.facebook.com/oauth/access_token?client_id={APP ID}&redirect_uri=".urlencode(CALLBACK)."&client_secret={SECRET}&code=$code"; 
```

# ios - addSubview 不释放内存

> ID：10496899
> 
> 赞同：1
> 
> 时间：2012-05-08T10:32:21.770
> 
> 标签：ios, uiview, uiviewcontroller

当我使用`addSubview`方法然后`removeFromSubview`加载下一个 ViewController 然后加载视图几次后，我的应用程序崩溃了。我有很多关于视图的图像。

尽管我使用了 ARC，但我认为我的记忆没有被释放。

我应该用什么让它工作？我试过`addChildViewController`了，但是我的视图没有加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:41:19.120

根据内存管理指南，每当您说 addSubview 时，引用计数就会增加 1，而每当您说 removeFromSuperview 时，引用计数就会减少 1。因此，如果您要删除已添加到任何视图的任何视图，则应调整引用计数并且不应导致内存泄漏。

我可以预见的问题是您在添加的视图（您要添加多次的视图）中存在内存泄漏，这是为了溢出您的内存。尝试维护引用计数，它将完美运行。作为替代解决方案，您还可以使用仪器工具跟踪内存泄漏。

# python - 使用 Python 对多部分电子邮件进行 PGP 签名

> ID：10496902
> 
> 赞同：10
> 
> 时间：2012-05-08T10:32:33.457
> 
> 标签：python, email, digital-signature, gnupg, pgp

我目前正在尝试将 PGP 签名支持添加到[我的小型电子邮件发送脚本](https://launchpad.net/~mitya57/+junk/mailsender)（它使用 Python 3.x 和[python-gnupg](http://code.google.com/p/python-gnupg/)模块）。

签署消息的代码是：

```
gpg = gnupg.GPG()
basetext = basemsg.as_string().replace('\n', '\r\n')
signature = str(gpg.sign(basetext, detach=True))
if signature:
    signmsg = messageFromSignature(signature)
    msg = MIMEMultipart(_subtype="signed", micalg="pgp-sha1",
    protocol="application/pgp-signature")
    msg.attach(basemsg)
    msg.attach(signmsg)
else:
    print('Warning: failed to sign the message!') 
```

（这里`basemsg`是[`email.message.Message`](http://docs.python.org/py3k/library/email.message.html)类型。）

`messageFromSignature`功能是：

```
def messageFromSignature(signature):
    message = Message()
    message['Content-Type'] = 'application/pgp-signature; name="signature.asc"'
    message['Content-Description'] = 'OpenPGP digital signature'
    message.set_payload(signature)
    return message 
```

然后我将所有需要的标头添加到消息 ( `msg`) 中并发送。

这适用于非多部分消息，但当`basemsg`是多部分（`multipart/alternative`或`multipart/mixed`）时失败。

根据相应的文本手动验证签名有效，但 Evolution 和 Mutt 报告签名错误。

谁能指出我的错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T08:31:01.483

问题是 Python 的`email.generator`模块没有在签名部分之前添加换行符。我已将上游报告为[http://bugs.python.org/issue14983](http://bugs.python.org/issue14983)。

（该错误已在 2014 年的 Python2.7 和 3.3+ 中修复）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T09:15:03.450

的 MIME 结构实际上是什么`basemsg`？它似乎有太多的嵌套部分。如果您从例如 Evolution 导出签名消息，您会看到它只有两部分：正文和签名。

这是一个示例，它在标准输出上生成一条可以读取的消息，并在 mutt ( `mutt -f test.mbox`) 和 Evolution（文件 -> 导入）上验证签名。

```
import gnupg
from email.message import Message
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart

body = """
This is the original message text.

:)
"""

gpg_passphrase = "xxxx"

basemsg = MIMEText(body)

def messageFromSignature(signature):
    message = Message()
    message['Content-Type'] = 'application/pgp-signature; name="signature.asc"'
    message['Content-Description'] = 'OpenPGP digital signature'
    message.set_payload(signature)
    return message

gpg = gnupg.GPG()
basetext = basemsg.as_string().replace('\n', '\r\n')
signature = str(gpg.sign(basetext, detach=True, passphrase=gpg_passphrase))
if signature:
    signmsg = messageFromSignature(signature)
    msg = MIMEMultipart(_subtype="signed", micalg="pgp-sha1",
    protocol="application/pgp-signature")
    msg.attach(basemsg)
    msg.attach(signmsg)
    msg['Subject'] = "Test message"
    msg['From'] = "sender@example.com"
    msg['To'] = "recipient@example.com"
    print(msg.as_string(unixfrom=True)) # or send
else:
    print('Warning: failed to sign the message!') 
```

请注意，在这里，我假设一个带有密码的密钥环，但您可能不需要它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-03-20T13:02:46.707

python内置`email`库还有更多问题。如果您调用该过程，则只会在当前类中`as_string`扫描标题，而不会在子类 ( ) 中扫描！像这样：`maxlinelength``_payload`

```
msgRoot (You call `to_string` during sending to smtp and headers will be checked)
->msgMix (headers will be not checked for maxlinelength)
-->msgAlt (headers will be not checked for maxlinelength)
--->msgText (headers will be not checked for maxlinelength)
--->msgHtml (headers will be not checked for maxlinelength)
-->msgSign (headers will be not checked for maxlinelength) 
```

我已经签名`msgMix.to_string()`，然后将签名的消息附加到`msgRoot`. 但是在发送到 SMTP 的过程中，这`msgMix`部分是不同的，其中的标头`msgMix`没有被卡住。Ofc，该标志无效。

我花了两天时间才理解一切。这是我的代码，我用它来发送自动电子邮件：

```
#imports
import smtplib, gnupg
from email import Charset, Encoders
from email.mime.base import MIMEBase
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
from email.header import Header
from email.message import Message
from email.generator import _make_boundary
#constants
EMAIL_SMTP = "localhost"
EMAIL_FROM = "Fusion Wallet <no-reply@fusionwallet.io>"
EMAIL_RETURN = "Fusion Wallet Support <support@fusionwallet.io>"
addr = 'some_target_email@gmail.com'
subject = 'test'
html = '<b>test</b>'
txt = 'test'
#character set
Charset.add_charset('utf-8', Charset.QP, Charset.QP, 'utf-8')
#MIME handlers
msgTEXT = MIMEText(txt, 'plain', 'UTF-8')
msgHTML = MIMEText(html, 'html', 'UTF-8')
msgRoot = MIMEMultipart(_subtype="signed", micalg="pgp-sha512", protocol="application/pgp-signature")
msgMix = MIMEMultipart('mixed')
msgAlt = MIMEMultipart('alternative')
msgSIGN = Message()
msgOWNKEY = MIMEBase('application', "octet-stream")
#Data
msgRoot.add_header('From', EMAIL_FROM)
msgRoot.add_header('To', addr)
msgRoot.add_header('Reply-To', EMAIL_FROM)
msgRoot.add_header('Reply-Path', EMAIL_RETURN)
msgRoot.add_header('Subject', subject)
msgMix.add_header('From', EMAIL_FROM)
msgMix.add_header('To', addr)
msgMix.add_header('Reply-To', EMAIL_FROM)
msgMix.add_header('Reply-Path', EMAIL_RETURN)
msgMix.add_header('Subject', subject)
msgMix.add_header('protected-headers', 'v1')
#Attach own key
ownKey = gpg.export_keys('6B6C0EBB6DC42AA4')
if ownKey:
    msgOWNKEY.add_header("Content-ID", "<0x6B6C0EBB.asc>")
    msgOWNKEY.add_header("Content-Disposition", "attachment", filename='0x6B6C0EBB.asc')
    msgOWNKEY.set_payload(ownKey)
#Attaching
msgAlt.attach(msgTEXT)
msgAlt.attach(msgHTML)
msgMix.attach(msgAlt)
if ownKey:
    msgMix.attach(msgOWNKEY)
#Sign
gpg = gnupg.GPG()
msgSIGN.add_header('Content-Type', 'application/pgp-signature; name="signature.asc"')
msgSIGN.add_header('Content-Description', 'OpenPGP digital signature')
msgSIGN.add_header("Content-Disposition", "attachment", filename='signature.asc')
originalSign = gpg.sign(msgMix.as_string().replace('\n', '\r\n').strip()).data
spos = originalSign.index('-----BEGIN PGP SIGNATURE-----')
sign = originalSign[spos:]
msgSIGN.set_payload(sign)
#Create new boundary
msgRoot.set_boundary(_make_boundary(msgMix.as_string()))
#Set the payload
msgRoot.set_payload(
    "--%(boundary)s\n%(mix)s--%(boundary)s\n%(sign)s\n--%(boundary)s--\n" % {
        'boundary':msgRoot.get_boundary(),
        'mix':msgMix.as_string(),
        'sign':msgSIGN.as_string(),
    }
)
#Send to SMTP
s = smtplib.SMTP(EMAIL_SMTP)
s.sendmail(EMAIL_FROM, addr, msgRoot.as_string())
s.quit() 
```

# php - php + mysql：在没有 addlashes() 的情况下使用 serialize() 是否安全？

> ID：10496903
> 
> 赞同：1
> 
> 时间：2012-05-08T10:32:40.440
> 
> 标签：php, mysql, serialization

将序列化的数组插入数据库是否完全安全`serialize()`，或者我应该这样做`addslashes(serialize($array))`？或者可以有一些mysql特定的字符？我可以使用插入删除数据或其他内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T10:34:50.517

不，这**根本不安全**。

你不应该使用`addslashes`，而是`mysql_real_escape_string`。或者更好的是，使用带有准备好的语句而不是转义的 PDO。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T10:35:17.053

在没有特定于数据库的处理的情况下将序列化数据插入数据库是*完全****不安全的*。

您应该使用推荐的任何机制来防止您选择的数据库访问层的 SQL 注入；使查询安全免受注入还包括正确转义数据，因此您将用一块石头击中两只鸟。

请参阅[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-stop-sql-injection-in-php)具体例子。

# javascript - 如何创建垂直图像滚动条？

> ID：10496908
> 
> 赞同：1
> 
> 时间：2012-05-08T10:33:22.780
> 
> 标签：javascript, jquery

我在一个网站上有一个页面，该页面应该显示建筑物每一层的图像。目前我有一个左右面板，左侧面板包含楼层列表。然后，我需要用户能够单击其中一个链接，并在右侧有一个图像滑块，该滑块在图像之间循环，从地面到顶层，直到它碰到相应的图像。

通常在这种情况下，我会使用[jquery 循环](http://jquery.malsup.com/cycle/pager9.html)，但我需要旋转器快速浏览其间的所有图像。

例如：我有一栋有 10 层的建筑物，我目前正在查看一楼。我点击了 9 楼，这意味着我需要滑块快速浏览 1-9 楼并最终在 10 楼结束。我该怎么做？上面的链接可以让我去 10 楼，但它不会浏览中间的所有楼层。有谁知道我怎样才能达到这个效果？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:50:07.780

其实很简单：

## *[jsBin 演示](http://jsbin.com/enoros/edit#javascript,html,live)*

假设你有这个 HTML：

```
<div id="thumbs">
  <!-- ... more images here -->
  <img src="thumb/image_4.jpg" />
  <img src="thumb/image_3.jpg" />
  <img src="thumb/image_2.jpg" />
  <img src="thumb/image_1.jpg" />  
</div>

<div id="gallery">  <!-- overflow hidden -->
  <div id="slider">  <!-- position absolute -->
    <!-- ... more images here -->
    <img src="image_4.jpg" />
    <img src="image_3.jpg" />
    <img src="image_2.jpg" />
    <img src="image_1.jpg" />            
  </div>  
</div> 
```

jQuery 可能如下所示：

```
var galH = 320; // SET HERE THE GALLERY HEIGHT

var N = $('#slider img').length;

$('#slider').css({ top: -galH*(N-1) }); // initial kick to bring the #slider to the first image

$('#thumbs img').on('click',function(){
  N = $(this).index();
  $('#slider').stop(1).animate({top: -galH*N},1000);
}); 
```

# sencha-touch - 将日期从json格式转换为sencha中的其他格式

> ID：10496912
> 
> 赞同：2
> 
> 时间：2012-05-08T10:33:51.017
> 
> 标签：sencha-touch, extjs

谁能告诉我如何将日期从 Json 数据转换为 sencha 中的正常日期格式。

```
var df = this.dateFormat;

if (!v) {
    return v;
}
if (Ext.isDate(v)) {
    return v;
}
if (df) {
    if (df == 'timestamp') {
        return new Date(v * 1000);
    }
    if (df == 'time') {
        return new Date(parseInt(v, 10));
    }
    return Date.parseDate(v, df);
}
var parsed = Date.parse(v);
return parsed ? new Date(parsed) : null; 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T11:16:28.330

Ext.Date 类是您正在寻找的。尝试类似：

```
 var parsed = Ext.Date.parse(valueFromJSON, "Y-m-d g:i:s A"); 
```

Ext.Date.parse[方法](http://docs.sencha.com/touch/2-0/#!/api/Ext.Date)返回一个日期。

# visual-studio-2008 - VS2008 需要很长时间才能关闭

> ID：10496916
> 
> 赞同：0
> 
> 时间：2012-05-08T10:34:02.700
> 
> 标签：visual-studio-2008

用于 VC++。它运行得非常快并且通常很棒，但是在退出时它经常锁定（Visual Studio 没有响应）很长一段时间。它似乎总是成功退出，但它一直在做什么？这是另一个 NCB/Intellisense 问题吗？

我有 2 个 VS 插件：

*   视觉辅助 X
*   视觉SVN

# udp - UDP 校验和是否检测到所有错误？

> ID：10496917
> 
> 赞同：2
> 
> 时间：2012-05-08T10:34:09.693
> 
> 标签：udp, checksum

我刚刚了解了 udp 校验和计算。但我很困惑算法是否检测到所有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:38:47.520

当然不是。没有校验和可以检测到所有错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-28T17:23:33.890

UDP 校验和无法检测到所有错误，但确实可以检测到很多错误。它将检测任何单个位翻转，但如果更改数据包以使所有数据作为 16 位值的总和保持不变，则校验和将不会检测到错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:53:01.477

通常校验和只能检测到最常见的错误，而不是全部。实际上，UDP 校验和与 IPv4 结合是可选的，因为 UDP 被设计为不可靠的服务。

# facebook-graph-api - 维基百科 - 到 - Facebook 链接数据

> ID：10496919
> 
> 赞同：2
> 
> 时间：2012-05-08T10:34:23.877
> 
> 标签：facebook-graph-api, wikipedia, semantic-web

我正在尝试在链接数据应用程序中包含 Facebook 页面，

喜欢，页面：

[facebook.com/pages/Friendship/105625816137032](http://www.facebook.com/pages/Friendship/105625816137032)

连接到：

[en.wikipedia.org/wiki/Friendship](http://en.wikipedia.org/wiki/Friendship)

毫不含糊，

某处是否有“ **105625816137032** ”=>“**友谊**”数据集？或者不是*屏幕刮脸*的方法？

facebook 会故意尝试避免此类链接似乎很疯狂，如果这是正在发生的事情，或者我只是想念它们。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:52:39.453

我不知道任何将 Facebook id 与 dbpedia id 映射的预编译资源——它肯定是一个非常好的项目。有几个选项：

1.) 很好地询问 Facebook - 你永远不会知道......最终，它应该使每个人都受益。

2.) 刮脸Facebook——伦理可能是粗略的，很多有趣的页面都没有链接到维基百科。例如。[http://www.facebook.com/PulpFiction](http://www.facebook.com/PulpFiction)

3.）猜测例如。维基百科名称 - 例如。为空格加下划线

可以通过比较匹配的类型来测试生成的映射集（我认为映射必须手动完成，并且可能没有太多用处）

Facebook 似乎并没有在图表上考虑太多——据我所知，这些数据都是非常非结构化的，难以处理。

# c64 - C64 CIA 定时器的定时器频率？

> ID：10496921
> 
> 赞同：5
> 
> 时间：2012-05-08T10:34:28.973
> 
> 标签：c64

谁能确认 C64 CIA 16 位计时器每秒滴答的频率？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T10:54:54.257

在 C64 中，6526/8521 CIA 芯片以阶段 2 系统时钟速率运行，设置为 0.985248MHz (PAL) 或 1.022727Mhz (NTSC)。

# java - 从 Tomcat servlet 使用 MySQL JDBC 的样板是什么？

> ID：10496923
> 
> 赞同：-4
> 
> 时间：2012-05-08T10:34:40.320
> 
> 标签：java, mysql, eclipse, jdbc

我想使用 Tomcat servlet 中的 JDBC 连接到 MySQL 数据库

这是我尝试过的：

```
 Class.forName("com.mysql.jdbc.Driver");
        Connection connection = DriverManager.getConnection(
                "jdbc:mysql://DatabaseURL",
                "username", "password");
        Statement statement = connection.createStatement();

        String sqlQuery = "use db name;";
        statement.executeUpdate(sqlQuery); 
```

我在 Eclipse 中导入了 JDBC 并将其放在 src 文件夹中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:09:53.603

`Class.forName("com.mysql.jdbc.Driver");
Connection connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/", "root", "");
Statement statement = connection.createStatement();`

 ````
 String sqlQuery = "use onlinebidding;"; //databasename is onlinebidding
    statement.executeUpdate(sqlQuery); 
````  `刚刚编译了这段代码，它工作得很好。`

# c# - 以编程方式在浏览器的新标签页中打开

> ID：10496928
> 
> 赞同：0
> 
> 时间：2012-05-08T10:34:52.317
> 
> 标签：c#, asp.net

我在花哨的框中有一个登录页面，单击登录时我希望在新选项卡中打开安全页面并使用此代码

// 在 btnlogin_click 的代码上

```
FormsAuthentication.RedirectFromLoginPage(loginID, false);
   string redirectTo = GetResPath("/webPages/Default.aspx");
                ScriptManager.RegisterStartupScript(this.Page, typeof(Page), "add2", "parent.jQuery.redirTo='" + redirectTo + "'; parent.jQuery.fancybox.close();", true); 
```

//在aspx页面上

```
 <script type="text/javascript">
    $(document).ready(function () {
        $('[id*=logn_btn_new]').fancybox({
            'width': 480,
            'height': 280,
            'padding': 10,
            'margin': 10,
            'hideOnOverlayClick': false,
            'scrolling': 'no',
            'autoScale': false,
            'transitionIn': 'none',
            'transitionOut': 'none',
            'type': 'iframe',
            'onClosed': function () {
                try {

                    if ($.redirTo != null && $.redirTo.length > 0) {
                        var pop = window.open($.redirTo, '_newtab');

                        if (pop == null) {
                            alert("Please allow popups.");
                        }

                    }
                }
                catch (err) {
                    alert(err);
                }
            }
        });
    });
</script> 
```

并且 redirTo 是隐藏字段。

我无法在新标签中打开页面有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:39:06.667

这是一个困难的问题，因为它是由用户的网络浏览器设置控制的。

您使用的方法特定于 FireFox，并且确实会打开一个新选项卡。但这仍然可以被用户的设置覆盖。

然而，为了在其他浏览器中获得相同的效果，这里有一篇关于 IE 的文章[Open a new tab in IE through Javascript](http://social.msdn.microsoft.com/forums/en-US/ieextensiondevelopment/thread/951b04e4-db0d-4789-ac51-82599dc60405/)

值得考虑为什么需要这样做。如果您在未通知用户的情况下打开新选项卡/窗口，用户可能会感到困惑。是否可以不打开新窗口并将所有内容保留在同一页面中？然后你知道人们在逻辑上会在一定程度上得到相同的结果。

我希望这有帮助！

# actionscript-3 - AS3：从文档类调用 MainTimeline 上的 gotoAndStop()

> ID：10496929
> 
> 赞同：2
> 
> 时间：2012-05-08T10:34:52.763
> 
> 标签：actionscript-3

我不得不问这个问题，我觉得很麻烦，这是我项目的最后一部分，它应该非常容易解决：/但是，在这里访问了许多类似的问题，我可以报告没有经过验证的答案可以解决我的问题问题。

基本上，我想从我的文档类中转到主时间轴上的 gotoAndStop(3)。但是，我似乎无法做到这一点..我尝试了以下两种方法，但都不起作用（都抛出不同的错误）..

```
var stageRef:Stage;
stageRef = stage;
stageRef.gotoAndStop(3) 
```

错误：

```
Line 148    1061: Call to a possibly undefined method gotoAndStop through a reference with static type flash.display:Stage. 
```

第二种方法：

```
var MainTimeline:MovieClip = this.parent as MovieClip;
MainTimeline.gotoAndStop(3); 
```

错误：

```
Line 148    1042: The this keyword can not be used in static methods. It can only be used in instance methods, function closures, and global code. 
```

这两种解决方案都被其他用户标记为工作/正确，但我似乎无法让它们工作..我觉得很傻。任何帮助将不胜感激！干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:47:44.457

```
MovieClip(root).gotoAndStop(3); 
```

# jquery - jQuery是一个单子吗

> ID：10496932
> 
> 赞同：33
> 
> 时间：2012-05-08T10:35:04.950
> 
> 标签：jquery, functional-programming, monads

我在某处读到 jQuery 是一个单子，[这个答案](https://stackoverflow.com/questions/10431999/does-the-chain-function-in-underscore-js-create-a-monad)表明 underscore.js 库中的链函数不是单子（而是comonad）。并且对此类似的[答案](https://stackoverflow.com/questions/5058124/is-this-a-monad)表明这是幺半群。

那么，jQuery 是一个单子吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-08T13:33:23.790

大多数 API 不满足单子定律。`jQuery`是一个很大的`API`，因此在统计上，它不太可能是“偶然”的单子。因此，我非常怀疑`jQuery`整个 API 能否满足单子定律（即“jQuery 是单子”）。

这并不意味着给定的（非常受限的）子集可能无法满足它们，但整个 API 可能包含“不安全”的操作，这些操作在使用时会违反法律，从而破坏抽象。

由于似乎没有人提供证据证明 API 全部或部分满足法律，我建议我们应该假设它不满足，直到提供证据。

必须显示：

*   jQuery 操作对应于什么`return`（将值提升到 jQuery monad）？
*   jQuery 操作对应于什么`bind`，用于将计算粘合在一起？
*   左、右和结合律如何适用于这些操作？

然后，考虑到 jQuery API 的其余部分，哪些违法行为是可能的？例如，我可以`bind`通过调用其他 API 函数之一来破坏吗？

参考：

*   [jQuery 不是单子](http://coder.cl/2011/12/jquery-is-not-a-monad/)
*   [jQuery 仍然不是 monad](http://www.quora.com/Is-jQuery-a-monad)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-08T14:44:50.877

我认为您指的是 jQuery 的隐式循环行为。在这方面，jQuery 类似于在 list monad 中工作，其中链接相当于`bind`，并且将元素包装在其中`$()`类似于`return`（我猜）。

因此，在 jquery 中，您可以将一个新的列表元素附加到一堆 div 列表中：

```
$('div').children().append("<li>New list element</li>"); 
```

...在哈斯克尔你可能有：

```
appendToEachList divs = divs >>= children >>= append "<li>New list element</li>" 
```

以上来自记忆，应该被认为是伪代码废话。

无论如何，我认为说“jQuery 是一个 Monad”有点牵强。

# c# - 为什么要在一行声明一个变量，然后在下一行赋值？

> ID：10496938
> 
> 赞同：5
> 
> 时间：2012-05-08T10:35:22.443
> 
> 标签：c#, .net, coding-style

我经常在 C# 代码中看到以下约定：

```
some_type val;
val = something; 
```

像

```
DataTable dt;
dt = some_function_returning_datatable(); 
```

或者

```
DataTable dt = new DataTable();
dt = some_function_returning_datatable(); 
```

代替

```
some_type val = something;
DataTable dt = some_function_returning_datatable(); 
```

我最初认为这是您必须在作用域顶部声明所有局部变量时遗留下来的习惯。但我已经学会了不要这么快就抛弃资深开发者的习惯。

`dt`（在我的第三个代码部分中，当我们首先分配`new`函数然后从函数分配时不会浪费内存）

那么，是否有充分的理由在一行中声明，然后再分配？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T10:38:19.500

> 在我的第三个代码部分中，当我们首先将 dt 分配给 new 然后从函数分配时，它不会浪费内存

是的，确实会。只是相对较小 - 创建一个无用的`DataTable`对象 - 但仍然是浪费*和*不清楚的。

> 那么，是否有充分的理由在一行中声明，然后再分配？

仅当您没有立即获得价值时。例如：

```
string x;
if (someCondition) {
    // Do some work
    x = someResult;
} else {
    // Do some other work
    x = someOtherResult;
} 
```

通常可以使用条件运算符或将该代码提取到方法中来改进这一点。有时它不会那样工作。

对于以下*简单*情况：

```
Foo x = SomeInitializationWithNoUsefulSideEffects();
x = SomeUsefulValue(); 
```

或者

```
Foo x;
x = SomeUsefulValue(); 
```

您*绝对*应该重构为

```
Foo x = SomeUsefulValue(); 
```

*声明点确实*产生影响的另一种有趣情况是在捕获的变量中，尽管通常不是预期的方式：

```
int x;
for (int i = 0; i < 10; i++) {
    x = SomeFunction();
    actions.Add(() => Console.WriteLine(x));
} 
```

对比

```
for (int i = 0; i < 10; i++) {
    int x = SomeFunction();
    actions.Add(() => Console.WriteLine(x));
} 
```

在第一个片段中，每个委托都将捕获*相同的变量*，因此他们都可以有效地看到从`SomeFunction`. 在第二个片段中，每个委托都将捕获一个*单独*的“实例” `x`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-08T10:37:03.997

> 但我已经学会了不要这么快就抛弃资深开发者的习惯。

迅速解雇他们，不要担心或犹豫。用 C# 编写完全没有意义：

```
some_type val;
val = something; 
```

代替：

```
some_type val = something; 
```

或者：

```
DataTable dt = new DataTable();
dt = some_function_returning_datatable(); 
```

代替：

```
DataTable dt = some_function_returning_datatable(); 
```

无论如何，如果您不在代码中解除它们，C# 编译器将在发出生成的 IL 时解除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:40:57.707

这是每个人自己的愿望。不存在性能问题。由于 CLR 会做出自己的声明，无论您如何声明，无论是一行还是两行。

我总是跟着

```
int i=5; 
```

尽可能。

但可以肯定，因为当你声明 int i=5; 在单行中，CLR 必须创建一个新的整数实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T11:02:14.727

```
SomeType someVar;
someVar = new(SomeType); 
```

和

```
SomeType someVar = new(SomeType); 
```

是等价物。可能是开发人员的习惯，可能是拆分是必要的，但已被重新考虑，但并不完全。

```
SomeType someVar = new(SomeType);
someVar = GetSomeTypeFromSomewhereElse(); 
```

充其量是低效的编码，因为第一个实例显然什么也没做，就会超出范围。取决于构造函数中的任何副作用的课程。如果有的话，那么在您的同行评审期间，我们将进行一次漫长而痛苦的交谈。:D

在那之后，正如其他人所说，这是因为`someVar`必须声明它，以便可以通过一些进一步的逻辑对其进行分配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T17:41:14.230

阅读代码时，了解哪些变量会在其范围内发生变化以及哪些不会发生变化是非常有用的。粗略表明这一点的一个有用约定是，如果变量的值在其范围内保持不变，则在其声明的同一行初始化一个变量，如果两者都在其声明之外的行上初始化它：

1.  它的值将在其范围内重新分配，并且
2.  这个事实不会立即显而易见

关于某事是否“立即显而易见”，有一些判断空间；一些符合条件的情况是：

1.  将变量初始化为显然是常量值的东西（特别是如果它是类型的默认值）
2.  在其定义的几行内重新分配值
3.  The names of the variable and the initialization expression suggest loop initialization (e.g. "var currentFoo = firstFoo;")

The longer the scope of a variable, the more likely I am to use separate initialization and declaration if the value will ever change.

# javascript - ClassCastException - JavaScriptObject 无法转换为 java.lang.String

> ID：10496939
> 
> 赞同：1
> 
> 时间：2012-05-08T10:35:22.810
> 
> 标签：javascript, gwt

我的 GWT 应用程序抛出此异常：

```
Caused by: java.lang.ClassCastException: com.google.gwt.core.client.JavaScriptObject$ cannot be cast to java.lang.String 
```

通过 JSNI 获取该函数的 String 响应时：

```
public final native String data()/*-{
    return $wnd.getdata();
}-*/; 
```

}

这是Javascript代码：

```
 function getdata(){
    var data = MyObject.data();
    console.log(data);
    return data;
  } 
```

我正在记录 Firebug 的数据输出，这是输出（检查 js 函数是否真的返回了一些东西）：

> -0.00030517578125,0.00006103515625,0.00115966796875,0.00146484375,-0.00091552734375,-0.000946044921875,-0.001983642578125,-0.003997802734375,-0.005126953125,-0.00360107421875,-0.0032958984375,-0.004119873046875,-0.00433349609375,-0.0023193359375,-0.0008544921875,-0.003448486328125,-0.00347900390625,-0.0054931640625 ,-0.0067138671875,-0.005279541015625,-0.006072998046875,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:39:43.947

可能是一个简单的解决方案，`$wnd.getdata().toString();`但也许您应该尝试`typeof $wnd.getdata()`查看该类型的真正含义——也许它是潜伏在其他地方的错误。

# wordpress - wordpress 3.3.1中的权限被拒绝错误

> ID：10496940
> 
> 赞同：0
> 
> 时间：2012-05-08T10:35:25.663
> 
> 标签：wordpress, permission-denied

我曾经将我的 wordpress 目录在我的服务器上移动了一级（它现在在根目录中）。一切似乎都可以正常工作一段时间，但现在我开始在上传图片时遇到麻烦。

当我尝试通过从我的计算机上传图像来包含图像时，wordpress 会引发“权限被拒绝”错误：

```
copy(/home/bram/domains/dutchmountaineer.com/public_html/wp-content/uploads/2012/05/Costa-Rican-Frog.jpg)

[function.copy]: failed to open stream: Permission denied in 
/home/bram/domains/dutchmountaineer.com/public_html/wp-admin/includes/file.php on line 348
    618 
```

我尝试将上传和包含文件夹设置为 777，但没有效果。我已将它们设置回 755。

请提供任何帮助！

约里特

编辑：

我尝试更改完整路径（在媒体设置中），但它现在有帮助。我认为是因为我将 wp 安装从 /wp/ 移动到服务器的根目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:23:05.300

检查谁拥有该目录。您可能需要将 www-data 添加到组中。很奇怪，是的，但我有时会遇到这样的情况，如果我不将我的用户添加到所有者组，即使是 777 的文件和目录也会拒绝我访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:50:19.857

这意味着您在此代码附近遇到错误

```
 // Copy the temporary file into its destination
$new_file = $uploads['path'] . "/$filename";
copy( $tmp_file, $new_file );
unlink($tmp_file); 
```

在管理面板的设置->媒体选项卡下检查您的设置，并检查您对该文件夹具有适当的权限，您也可以更改上传路径。让我知道问题是否仍然存在。

![图片](../Images/b58828a9e0cea225fa5124af4a1fb87d.png)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-08T10:43:39.453

您必须允许上传目录 777 权限并检查您的文件夹用户和 ftp 用户是否相同。

# git - 有一个远程git分支但没有匹配本地分支，如何删除远程分支

> ID：10496943
> 
> 赞同：0
> 
> 时间：2012-05-08T10:35:46.213
> 
> 标签：git

以下命令：

`$ git branch -a`

产量

```
* develop
  master
  remotes/origin/HEAD -> origin/develop
  remotes/origin/develop
  remotes/origin/feature/foo
  remotes/origin/master 
```

但我不想要`remotes/origin/feature/foo`分支。我能做些什么来得到这个？我该如何删除它？

我试过这个：

`git push origin --delete origin/feature/foo`

但我明白了：

```
error: unable to push to unqualified destination: origin/feature/foo
The destination refspec neither matches an existing ref on the remote nor
begins with refs/, and we are unable to guess a prefix based on the source ref.
error: failed to push some refs to '...my remote repo...' 
```

有任何想法吗？非常感谢 ：）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:37:32.163

你打电话时

```
git push origin feature/foo 
```

`git`真的看到

```
git push origin feature/foo:feature/foo 
```

什么意思是“将`feature/foo`（左侧）推到遥控器`feature/foo`（右侧）。

和

```
git push origin :feature/foo 
```

你把“无”推到`feature/foo`

# nsis - 如何获取系统驱动器卷序列号

> ID：10496946
> 
> 赞同：0
> 
> 时间：2012-05-08T10:36:08.457
> 
> 标签：nsis

我正在构建一个需要检索安装操作系统的驱动器的磁盘卷的设置。我尝试了以下代码：

```
Function ShowDiskVolumeSerialNumber
  !define GetVolumeInformation "Kernel32::GetVolumeInformation(t,t,i,*i,*i,*i,t,i) i"
  System::Call '${GetVolumeInformation ("$0",,${NSIS_MAX_STRLEN},.r0,,,,${NSIS_MAX_STRLEN})'
  IntFmt $0 "%08X" $0
  MessageBox MB_OK $0
FunctionEnd 
```

我通过指定所需的驱动器来调用上述函数：

```
StrCpy $0 "C:\"
Call ShowDiskVolumeSerialNumber 
```

以上给出了`c:\`驱动器的卷号。但是，如果我的操作系统已安装，`d:\`否则`e:\`它将无法工作。我想要一个功能，它会自动检测安装操作系统的驱动器并检索其卷号。

其次，检索到的卷号没有连字符（例如`349620C1`）。我需要将卷序列号检索为`3496-20C1`.

有人可以提供一个完整的 NSIS 功能什么时候会做这两件事，即：

1.  自动检测安装操作系统的驱动器并检索其序列号，并在其间使用连字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:34:01.037

要获得操作系统驱动器，`StrCpy $0 $windir 3`可能就足够了（您没有指定是否需要[启动卷或系统卷](http://support.microsoft.com/kb/314470)，在大多数系统上它们是相同的，因此 $windir 是一个很好的起点）

要编辑序列号：

```
StrCpy $0 $serial 4
StrCpy $serial $serial "" 4
StrCpy $serial "$0-$serial" 
```

# google-maps - 样式自定义控件，如标准控件

> ID：10496947
> 
> 赞同：0
> 
> 时间：2012-05-08T10:36:09.300
> 
> 标签：google-maps, google-maps-api-3

如何获取标准控件（地图、卫星等）的样式设置，以便使我的自定义控件始终看起来像标准控件？我希望我的控件看起来像 API 的一部分，并且无论平台如何都始终匹配，而不是事后添加的东西。谢谢，帕帕德尔塔谢拉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:57:42.173

Chrome 开发人员工具、Firefox 的 Firebug、Internet Explorer 中的开发人员工具等。所有这些选项都允许您检查地图控件的样式。

# jquery - Validating File Upload - Jquery and "Accept" attribute

> ID：10496952
> 
> 赞同：8
> 
> 时间：2012-05-08T10:36:41.053
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate, asp.net-mvc-validation

I am using a form to upload a file. I want only PDF files to be uploaded. This is my code:

A input box to allow the user to choose a file:

```
@Html.FileBox(m => m.FileName, new { id = "FileName", accept = "application/pdf" }) 
```

and a place to display error message(s):

```
@Html.ValidationMessageFor(m=>m.FileName) 
```

The code generated for the input field is:

```
 <input id="FileName" type="file" name="FileName" data-val-required="The File Name field is required." data-val-length-max="512" data-val-length="The field File Name must be a string with a maximum length of 512." data-val="true" accept="application/pdf"> 
```

Now even if I choose a PDF file, I get an error `Please enter a value with a valid extension.`

I am using MVC 3, and unobstrusive jquery to validate the form.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T17:35:42.213

I had the same problem and had to resort to disable the validation for the accept attribute entirely. I added the following line to my page and it worked:

> $.validator.addMethod('accept', function () { return true; });

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-23T21:38:30.097

The "accept" rule-method that's built into jQuery Validation takes values in a format resembling "jpg|png".

The "accept" HTML attribute takes a format resembling "image/jpeg,image/png".

It would appear that jQuery Validation and the HTML standard are incompatible in this regard.

Here, you can read more about [jQuery Validation's "accept" rule](http://docs.jquery.com/Plugins/Validation/Methods/accept) and the [HTML5 "accept" attribute](http://www.w3.org/TR/html-markup/input.file.html).

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-25T17:21:37.897

They changed the behavior of the "accept" method with version 1.10.0\. Instead of checking the file extension, it now looks at the mime type. The old behaviour is now available as the "extension" method. So you just have to update your version of jquery validation plugin and you are done. I replaced my current version 1.9.0 with 1.11.0 and set valid mime-types as accept-attribut. It's now working as expected:

```
accept="image/*, application/pdf" 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-05T16:57:15.460

If you put both formats in as your accept attribute it should work

```
accept="image/jpeg,image/png,jpg|png" 
```

# php - 只允许某些字母，禁止特殊字符（$% 等）除其他字符（' -）

> ID：10496953
> 
> 赞同：6
> 
> 时间：2012-05-08T10:36:42.810
> 
> 标签：php, regex, unicode, utf-8

我需要一个用于**PHP的正则****表达式**来执行以下操作：

 **我想允许**[a-zα-ωá-źа-яա-ֆა-ჰא-ת]**和中文、日文（更多 utf-8）字母；我想禁止**[^٩٨٧٦٥٤٣٢١٠۰۱۲۳۴۵۶۷۸۹]**（阿拉伯数字）；

这就是我所做的：

```
function isValidFirstName($first_name) {
    return preg_match("/^(?=[a-zα-ωá-źа-яա-ֆა-ჰא-ת]+([a-zα-ωá-źа-яա-ֆა-ჰא-ת' -]+)?\z)[a-zα-ωá-źа-яա-ֆა-ჰא-ת' -]+$/i", $first_name);
} 
```

看起来它可以工作，但如果我输入超过 1 种语言的字母，它就不会生效。

示例：Авпа Вапапва á-ź John - 不验证。John Gger - 验证，á-ź á-ź - 验证。

我想要这一切。

或者，如果有办法，如果用户输入了更多语言字符串，则可以回显一条消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:56:59.913

您可以通过使用 RegEx 检查以下方式来过滤掉阿拉伯字符：

```
if (preg_match('/(?:[\p{Hebrew}]+)/imu', $subject)) {
    # Successful match
} else {
    # Match attempt failed
} 
```

**正则表达式解释**

```
<!--
(?i)(?:[\p{IsHebrew}]+)

Options: case insensitive; ^ and $ match at line breaks

Match the remainder of the regex with the options: case insensitive (i) «(?i)»
Match the regular expression below «(?:[\p{IsHebrew}]+)»
   A character in the Unicode block “Hebrew” (U+0590..U+05FF) «[\p{IsHebrew}]+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
--> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T11:04:52.250

我无法在这里重现失败案例（`Авпа Вапапва á-ź John`验证得很好），但是您可以大大简化正则表达式 - 您不需要那个前瞻断言：

```
preg_match('/^[a-zα-ωá-źа-яա-ֆა-ჰא-ת][a-zα-ωá-źа-яա-ֆა-ჰא-ת\' -]*$/i', $first_name) 
```

据我从您给出的字符范围中可以看出，您不需要排除数字，因为这些字符类之外的任何内容都会导致正则表达式失败。

另一个考虑因素：如果您的目标是允许来自任何语言/脚本的任何字母（加上一些标点符号和空格），您可以（如果您使用 Unicode 字符串）进一步简化为：

```
preg_match('/^\pL[\pL\' -]*$/iu', $first_name) 
```

但一般来说，我不会尝试通过正则表达式（或任何其他方式）来验证名称：[程序员相信名称](http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/)是虚假的。**

# php - 如何在移动网络应用程序中隐藏地址栏？

> ID：10496954
> 
> 赞同：0
> 
> 时间：2012-05-08T10:36:44.527
> 
> 标签：php, javascript, jquery, html, css

我正在创建一个移动网络应用程序（非本机），我想为我的应用程序使用完整的屏幕高度。问题是浏览器的地址栏占了很大的空间，给我留下了整个屏幕的4/5左右。

我已经制作了我的应用程序，因此永远不会有任何滚动，该网站始终适合用户屏幕的高度。我真正追求的是 facebook 移动网站的功能。它向下滚动以隐藏地址栏。

对于 Android 设备和 Iphone 以及不同的移动浏览器（不同的地址栏大小），是否有任何通用的方法？

顺便说一句：我正在使用 Iscroll4 来获取固定的页脚和页眉。

**编辑：这是我最终得到的代码。我添加了两个按钮让用户选择是否使用全屏模式。此代码与 Iscroll4 和 Jquery 结合使用。**

```
<script type="text/javascript">
$(document).ready(function() {
    var fullscreen = false;

    if(fullscreen==false)
    {
        window.removeEventListener("orientationchange", function(){ hideAddressBar(); } );
        window.addEventListener("orientationchange", function(){ showAddressBar(); } );
    }
    else
    {
        window.removeEventListener("orientationchange", function(){ showAddressBar(); } );
        window.addEventListener("orientationchange", function(){ hideAddressBar(); } );
    }

    $('#fullscreen').click(function(){
       hideAddressBar();
       fullscreen = true;
    });
    $('#normalscreen').click(function(){
       showAddressBar();
       fullscreen = false;
    });

});
function hideAddressBar()
{
    document.body.style.height = (window.outerHeight + 20) + 'px';
    window.scrollTo(0, 1);
}
function showAddressBar()
{
    document.body.style.height = (window.outerHeight - 20) + 'px';
    window.scrollTo(0, 0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:43:09.237

“向下滚动” javascript 技巧应该适用于 iPhone 和 Android：

[http://mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/)

虽然很抱歉，但不确定其他移动浏览器。您是在谈论黑莓、Windows phone 等还是更基本的手机？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:44:13.740

你可以在这里找到一篇关于如何实现这一点的好文章[http://mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/)

**示例脚本**

```
function hideAddressBar()
{
  if(!window.location.hash)
  {
      if(document.height < window.outerHeight)
      {
          document.body.style.height = (window.outerHeight + 50) + 'px';
      }

      setTimeout( function(){ window.scrollTo(0, 1); }, 50 );
  }
}

window.addEventListener("load", function(){ if(!window.pageYOffset){ hideAddressBar(); } } );
window.addEventListener("orientationchange", hideAddressBar ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T10:41:54.973

我通常这样做的方式是：

```
window.addEventListener("load",function() {
  setTimeout(function(){
    window.scrollTo(0, 1);
  }, 0);
}); 
```

但它只有在页面足够长以向下滚动一点时才会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T10:43:22.917

试试这个，

对于安卓：

```
if(navigator.userAgent.match(/Android/i)){
    window.scrollTo(0,1);
 } 
```

对于 iPhone：

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

# android - Android - 如何从 Android 设备打印？

> ID：10496958
> 
> 赞同：9
> 
> 时间：2012-05-08T10:37:13.837
> 
> 标签：android

我想在我的 Android 应用程序中具有打印功能。此外，我的应用程序可能会迎合不同的用户，我不希望他们为相同的用户进行任何 pc 配置。另外，我不知道他们可能使用哪种类型的打印机。请向我提供这方面的一些知识或如何实施。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T10:59:36.880

Android SDK 仍然没有 Printer Api。我们必须使用第三方 api，其中最好的是 Google Cloud Print。

您可以简单地将 pdf 文件传递​​给示例中的 PrintDialogActivity...，它将从任何地方打印，但在此之前您的打印机必须在 Google Cloud Servers 中注册。

浏览以下链接

谷歌云打印示例：

[https://developers.google.com/cloud-print/docs/android](https://developers.google.com/cloud-print/docs/android)

如何注册： http: [//support.google.com/cloudprint/bin/answer.py ?hl=en&answer=1686197&p=mgmt_classic](http://support.google.com/cloudprint/bin/answer.py?hl=en&answer=1686197&p=mgmt_classic)

它是如何工作的： [http ://www.google.com/cloudprint/learn/howitworks.html](http://www.google.com/cloudprint/learn/howitworks.html)

帮助： http: [//support.google.com/cloudprint/ ?hl=en&p=mkt_support_faq](http://support.google.com/cloudprint/?hl=en&p=mkt_support_faq)

[https://developers.google.com/cloud-print/docs/android](https://developers.google.com/cloud-print/docs/android)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-24T10:58:45.133

好消息！

> 在 Android 4.4（API 级别 19）及更高版本中，该框架提供了直接从 Android 应用程序打印图像和文档的服务。

[https://developer.android.com/training/printing/index.html](https://developer.android.com/training/printing/index.html)

# handlebars.js - 如何使用 Sublime Text 2 在 Handlebars 模板中激活 Zen Coding 完成

> ID：10496961
> 
> 赞同：2
> 
> 时间：2012-05-08T10:37:25.573
> 
> 标签：handlebars.js, emmet, sublimetext2

我已经为 Sublime Text 2 安装了 Zen Coding。它在扩展标签之外的缩写时工作，但它不在那些脚本标签内（这是有道理的，因为那里需要 js）。但是，它在编辑 Handlebars 模板时会很有用。

有谁知道，如何配置/修改 Zen Coding ST2 插件来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-22T06:20:17.673

它现在称为命令`expand_abbreviation_by_tab`（我使用的是 Sublime Text 3）。

为了在嵌入式 js（x-handlebars 脚本范围）中使用 Emmet，只需将此命令粘贴到您的键盘映射文件中`Key Bindings — User`：

```
{
    "keys": [
        "tab"
    ],
    "command": "expand_abbreviation_by_tab",
    "context": [
        {
            "operand": "source.js.embedded.html",
            "operator": "equal",
            "match_all": true,
            "key": "selector"
        }
    ]
} 
```

添加您需要 Emmet 工作的任何范围作为键的*值***`operand`**。

*最重要的是你不需要重新启动 Sublime。它立即开始工作！*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T23:03:01.850

其中`./ZenCoding/Default.sublime-keymap`有一组上下文范围选择器，它们定义了在编辑文件的不同部分时哪些操作是活动的。这些与[TextMate 使用的范围选择器](http://manual.macromates.com/en/scope_selectors)相同。

命令的默认范围`expand_zen_abbreviation_on_tab`（在撰写本文时，它是文件中的最后一个条目）不包括`<script>`标签选择器。我们需要添加它。

为了找到正确的范围，请将光标放在 ST2 文档中的某处并点击`ctrl+shift+p`. 状态栏将显示您所在区域的选择器。对于保存在 .html 文件中的脚本标记，它会返回：

```
text.html.basic source.js.embedded.html 
```

鉴于此信息，我们将`source.js.embedded.html`条目添加到命令的`operand`属性中`expand_zen_abbreviation_on_tab`，瞧，禅编码将在脚本标签内工作。

**这是我`expand_zen_abbreviation_on_tab`添加的上下文...**

```
 {"command": "expand_zen_abbreviation_on_tab",
  "context": [{"key": "selector",
               "match_all": true,
               "operand": "source.css - source.css.embedded, text.xml, text.html -source -meta.tag, meta.scope.between-tag-pair.html -source, source.js.embedded.html",
               "operator": "equal"},
              {"key": "selection_empty",
               "match_all": true,
               "operand": true,
               "operator": "equal"},
              {"key": "is_zen", "match_all": true}],
  "keys": ["tab"]}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:27:59.517

在“zencoding/zen_settings.py”的第 31 行，将 'filters': 'html,css' 更改为 'filters': 'html,css,hbs' 还可以在此处添加其他文件类型，例如 erb，如果您正在使用铁轨。

# oracle-adf - 删除/隐藏滚动条 在 ADF 中

> ID：10496963
> 
> 赞同：0
> 
> 时间：2012-05-08T10:37:38.800
> 
> 标签：oracle-adf

我用来显示 servlet 输出，但我在右侧得到滚动条。如何摆脱这个滚动条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T01:49:56.397

将高度设置为 iframe 中内容的高度

# python - Python gzip 在 Ubuntu 11.04 上失败

> ID：10496966
> 
> 赞同：2
> 
> 时间：2012-05-08T10:38:01.797
> 
> 标签：python, gzip

下面的函数基于[Python gzip 模块文档](http://docs.python.org/library/gzip.html)中的 Python 示例代码。它在带有默认 Python 2.6.x 的 Ubuntu 10.04 上可靠地运行。但是，在 Ubuntu 11.04 上，代码失败 @ `writelines()`。

在一台 11.04 机器上，报告了失败消息`'module' object has no attribute 'BufferedIOBase'`。另一台 11.04 机器报告了不同的消息`No module named numpy`。然而，两台机器上都安装了 numpy 包。

有谁知道 11.04 上任何丢失的 Python 依赖项或其他问题会导致这种情况？

```
def _compress(inp,out):
    import gzip
    f_out = gzip.open(out,'wb')
    f_in = open(inp,'rb')
    f_out.writelines(f_in)
    f_out.close()
    f_in.close()
    os.unlink(inp) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:46:38.093

错误信息`No module named numpy`与此问题无关；其他一些错误导致了这种情况。要跟踪这一点，请打印 的值`sys.path`以查看 Python 将搜索模块的路径。Numpy 可能已安装，但可能不在`sys.path`. 顺便说一句，回到你的主要问题。

1.  检查 Python 版本。我的猜测是 11.04 附带 2.7.x。

2.  `writelines()`是一种调用二进制数据的奇怪方法。更糟糕的是，参数应该是字符串序列，而不是文件对象。试试这个代码：

    ```
    f_out.write( f_in.read() ) 
    ```

3.  根据文件大小，这会占用大量内存。尝试循环：

    ```
    while True:
        data = f_in.read( 10240 )
        if not data: break
        f_out.write( data ) 
    ```

# android - Android MediaRecorder - “启动失败：-19”

> ID：10496969
> 
> 赞同：7
> 
> 时间：2012-05-08T10:38:20.277
> 
> 标签：android, android-camera, android-mediarecorder

我正在尝试在 Android 上创建一个录像机，并且我已经准备了应该可以工作的代码 - 但我经常收到一条错误消息`start failed: -19`。

这是我的代码：

```
public boolean startRecording() {
    try {
        camera.unlock();
        mediaRecorder = new MediaRecorder();
        mediaRecorder.setOnErrorListener(new MediaRecorder.OnErrorListener() {

                @Override
                public void onError(MediaRecorder mr, int what, int extra) {
                Log.i(TAG, "Error");
            }
        });

        mediaRecorder.setCamera(camera);
        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        Log.i(TAG, "a");

        mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
        mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H263);
        Log.i(TAG, "b");

        mediaRecorder.setMaxDuration(maxDurationInMs); // set to 20000

        String uniqueOutFile = OUTPUT_FILE + System.currentTimeMillis() + ".3gp";
        File outFile = new File(uniqueOutFile);
        if (outFile.exists()) {
            outFile.delete();
        }
        mediaRecorder.setOutputFile(uniqueOutFile);
        mediaRecorder.setVideoFrameRate(videoFramesPerSecond); // set to 20
        mediaRecorder.setVideoSize(sView.getWidth(), sView.getHeight());
        Log.i(TAG, "c");

        mediaRecorder.setPreviewDisplay(holder.getSurface());
        mediaRecorder.setMaxFileSize(maxFileSizeInBytes); // set to 50000
        mediaRecorder.prepare();
        Log.i(TAG, "d");

        mediaRecorder.start();
        Log.i(TAG, "e");

        return true;
        } catch (IllegalStateException e) {
            Log.i(TAG, "f");
            Log.e(TAG, e.getMessage());
            e.printStackTrace();
            camera.lock();
            return false;
        } catch (IOException e) {
            Log.i(TAG, "g");
            Log.e(TAG, e.getMessage());
            e.printStackTrace();
            camera.lock();
            return false;
        } catch (RuntimeException e) {
            Log.i(TAG, "h");
            Log.e(TAG, e.getMessage());
            camera.lock();
            return false;
        }
    } 
```

所有调试日志（从“a”到“d”）都打印在日志中，因此似乎所有步骤`mediaRecorder.prepare()`都已正确完成。然后它会捕获一条`RuntimeException`with 消息`start failed: -19`。有一个类似的[问题](https://stackoverflow.com/questions/9098216/error-opening-android-camera-for-streaming-video)，但这并不能解决我的问题。

还有其他原因会出现这样的错误吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-08T11:39:54.473

刚刚发现了这个错误，在这一行：

```
mediaRecorder.setVideoSize(sView.getWidth(), sView.getHeight()); 
```

注释掉这一行后，代码运行完美！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-21T12:46:51.180

一旦我添加了这个用于视频录制，我就解决了我的问题

```
/**
 * Start video recording by cleaning the old camera preview
 */
private void startVideoRecorder() {
    // THIS IS NEEDED BECAUSE THE GLASS CURRENTLY THROWS AN ERROR OF
    // "MediaRecorder start failed: -19"
    // THIS WONT BE NEEDED INCASE OF PHONE AND TABLET
    // This causes crash in glass kitkat version so remove it
    // try {
    // mCamera.setPreviewDisplay(null);
    // } catch (java.io.IOException ioe) {
    // Log.d(TAG,
    // "IOException nullifying preview display: "
    // + ioe.getMessage());
    // }
    // mCamera.stopPreview();
    // mCamera.unlock();
    recorder = new MediaRecorder();
    // Let's initRecorder so we can record again
    initRecorder();
}

/**
 * Initialize video recorder to record video
 */
private void initRecorder() {
    try {
        File dir = new File(folderPath);
        if (!dir.exists()) {
            dir.mkdirs();
        }
        mCamera.stopPreview();
        mCamera.unlock();
        videofile = new File(dir, fileName + ".mp4");
        recorder.setCamera(mCamera);

        // Step 2: Set sources
        recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)
        recorder.setProfile(CamcorderProfile
                .get(CamcorderProfile.QUALITY_HIGH));

        // Step 4: Set output file
        recorder.setOutputFile(videofile.getAbsolutePath());
        // Step 5: Set the preview output
        recorder.setPreviewDisplay(mPreview.getHolder().getSurface());
        // Step 6: Prepare configured MediaRecorder
        recorder.setMaxDuration(video_duration * 1000);
        recorder.setOnInfoListener(new OnInfoListener() {

            @Override
            public void onInfo(MediaRecorder mr, int what, int extra) {
                if (what == MediaRecorder.MEDIA_RECORDER_INFO_MAX_DURATION_REACHED) {

                    mCamera.stopPreview();
                    releaseMediaRecorder();

                    /*
                     * initiate media scan and put the new things into the
                     * path array to make the scanner aware of the location
                     * and the files you want to see
                     */MediaScannerConnection.scanFile(
                            CuxtomCamActivity.this,
                            new String[] { videofile.getPath() }, null,
                            null);

                    Intent intent = new Intent();
                    intent.putExtra(CuxtomIntent.FILE_PATH,
                            videofile.getPath());
                    intent.putExtra(CuxtomIntent.FILE_TYPE, FILE_TYPE.VIDEO);
                    setResult(RESULT_OK, intent);
                    finish();
                }

            }
        });
        recorder.prepare();
        recorder.start();
    } catch (Exception e) {
        Log.e("Error Stating CuXtom Camera", e.getMessage());
    }
}
private void releaseMediaRecorder() {
    if (recorder != null) {
        recorder.reset(); // clear recorder configuration
        recorder.release(); // release the recorder object
        recorder = null;
    }
} 
```

有关详细指南，请参阅此[Open Source Cuxtom Cam](https://github.com/krazykira/CuXtomCam/blob/master/CuXtom%20Cam%20Library/src/com/glass/cuxtomcam/CuxtomCamActivity.java#L372)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T06:34:28.503

问题出在您的`setVideoSize()`代码中。

以及为什么此代码错误...

根据我所做的研究，错误代码 -19 出现在由设置的视频大小出现问题时`MediaRecorder#setVideoSize()`

运行此代码，并查看您的设备中的相机可以支持的屏幕：

```
final List<Camera.Size> mSupportedVideoSizes = getSupportedVideoSizes(mCamera);
        for (Camera.Size str : mSupportedVideoSizes)
            Log.e(TAG, "mSupportedVideoSizes "+str.width + ":" + str.height + " ... "
                    + ((float) str.width / str.height)); 
```

方法是：

```
public List<Size> getSupportedVideoSizes(Camera camera) {
        if (camera.getParameters().getSupportedVideoSizes() != null) {
            return camera.getParameters().getSupportedVideoSizes();
        } else {
            // Video sizes may be null, which indicates that all the supported 
            // preview sizes are supported for video recording.
            return camera.getParameters().getSupportedPreviewSizes();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-08T13:17:35.683

我在某些特定手机上遇到了这个问题，我发现我无法在其中一些手机中设置 camcoder 配置文件大小。但是当这适用于有问题的机器人时，它停止在以前的工作设备上工作。

所以最后我实现的逻辑是这样的：

*   设置宽度/高度
*   尝试启动媒体录音机
*   如果出现异常，请在不设置宽度/高度的情况下重试

有点垃圾逻辑，但那行得通。

我已经使用该实现设置了一个 github 项目，请尝试一下：[https ://github.com/rafaelsilverio/MediaRecorder](https://github.com/rafaelsilverio/MediaRecorder)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-21T05:19:45.987

我也遇到了这个问题，注释了以下两种方式，因为硬件不支持这两种配置。

```
MediaRecorder .setVideoSize（）
MediaRecorder .setVideoFrameRate（） 
```

# css - 具有自动完成功能的文本框在 MVC 4 中不显示布局

> ID：10496973
> 
> 赞同：2
> 
> 时间：2012-05-08T10:38:36.127
> 
> 标签：css, json, jquery-ui, c#-4.0, asp.net-mvc-4

我在 ASP.NET MVC 4、Javascript 和 JSON 中制作了一个带有自动完成功能的文本框。我想给自动完成一个不错的布局，但它不起作用。项目中自动有一个css文件jquery.ui-autocomplete.css。

*这是我填写清单的地方*

```
<li data-role="list-divider">Gemeente</li>
        <li data-role="fieldcontain">
            <div class="ui-widget">
                <input type="text" name="Gemeente" class="ui-autocomplete"/>
            </div>
        </li> 
```

*这是我使用的脚本：*

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        $('.ui-autocomplete').autocomplete({
            source: '@Url.Action("AutocompleteGemeenten")'
            });
</script> 
```

*这是我使用的 JSON 代码：*

```
public ActionResult AutocompleteGemeenten(string term)
        {
            List<string> items = new List<string>();

            items = _zoekClient.GetGemeenten();

            List<string> filteredItems = new List<string>();

            filteredItems = items.Where(test => test != null && test.ToLower().Contains(term.ToLower())).ToList();

            return Json(filteredItems, JsonRequestBehavior.AllowGet);
        } 
```

*这是css文件*

```
.ui-autocomplete { position: absolute; cursor: default; }   
* html .ui-autocomplete { width:1px; } /* without this, the menu expands to 100% in IE6 */

.ui-menu {
    list-style:none;
    padding: 2px;
    margin: 0;
    display:block;
    float: left;
}
.ui-menu .ui-menu {
    margin-top: -3px;
}
.ui-menu .ui-menu-item {
    margin:0;
    padding: 0;
    zoom: 1;
    float: left;
    clear: left;
    width: 100%;
}
.ui-menu .ui-menu-item a {
    text-decoration:none;
    display:block;
    padding:.2em .4em;
    line-height:1.5;
    zoom:1;
}
.ui-menu .ui-menu-item a.ui-state-hover,
.ui-menu .ui-menu-item a.ui-state-active {
    font-weight: normal;
    margin: -1px;
} 
```

谁能帮我更改自动完成的布局？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:09:33.043

如果你想改变 jQuery UI 的默认样式，你有几个选择。

**1.覆盖默认css**

CSS 按最后声明的顺序进行评估，这意味着最后定义的规则获胜。您添加的规则覆盖 jQuery UI 样式表中定义的样式。在另一个 CSS 文件中添加您的规则，并在指向 jQuery UI CSS 文件的链接之后放置一个指向该文件的链接

```
<link href="~/Content/jquery.css" rel="stylesheet" type="text/css" />
<link href="~/Content/overrides.css" rel="stylesheet" type="text/css" /> 
```

**2\. 向生成的 jQuery 小部件添加类**

jQuery 有一个名为[addClass](http://goo.gl/pKirr)的方法。您可以使用您的样式规则定义一个 CSS 类，然后将该类添加到 jQuery 小部件

*定义：*

```
.myClass {      
  display:block;
  float: left;
} 
```

*添加：*

```
<script type="text/javascript" language="javascript">
$(document).ready(function () {
    $('.ui-autocomplete').addClass('myClass');
    $('.ui-autocomplete').autocomplete({
        source: '@Url.Action("AutocompleteGemeenten")'
    });
}); 
```

# sql-server - SQL Server CTE - 查找每个 childID 的顶级 parentID？

> ID：10496979
> 
> 赞同：16
> 
> 时间：2012-05-08T10:38:55.813
> 
> 标签：sql-server, sql-server-2008, tsql, common-table-expression

我有一个包含层次结构数据的表 - 例如：

```
childID  |  parentID
____________________
  1      |     5
  5      |     9
  9      |     20
  2      |     4
  3      |     7
  7      |     8
  8      |     8
 20      |     20
  4      |     4
  8      |     8 
```

所需的输出：

![在此处输入图像描述](../Images/da2c44f0ee6c362e7c2958c1f0495312.png)

我创建了一个递归 CTE，它发现我是 top `fatherID`。

就像是：

```
;WITH cte AS (
                 SELECT a.childID
                       ,a.parentID
                       ,1 AS lvl
                 FROM   [Agent_Agents] a
                 WHERE   a.childID = 214 //<==== value to begin with !! - thats part the problem
                 UNION ALL
                 SELECT tmp.childID
                       ,tmp.parentID
                       ,cte.lvl+1
                 FROM   [Agent_Agents] tmp
                         INNER JOIN cte  ON  tmp.childID = cte.parentID
                 WHERE   cte.childID<>cte.parentID
             )
SELECT *
FROM   cte
WHERE   lvl = (
            SELECT MAX(lvl)
            FROM   cte
        ) 
```

**问题：**

我以 (214) 开头的**显式** 值执行了 CTE ！`childID`所以它只给了我 214 的值。CTE 执行递归部分并为 childID 找到 topParent。

**但** 我想`ForEach row in the Table`- 用`childID`价值执行 CTE！

我尝试过这样做`CROSS APPLY`：

就像是：

```
select * from myTable Cross Apply (
                                     ;WITH cte AS (....)
                                  ) 
```

但是恕我直言（根据我的测试！！）-这是不可能的。

将递归 CTE 放在 UDF 中的另一个想法有性能损失（我们知道 udf 的问题）。

如何创建此查询以使其真正起作用？（或一些接近的解决方案）？

这是我尝试过的

[https://data.stackexchange.com/stackoverflow/query/edit/69458](https://data.stackexchange.com/stackoverflow/query/edit/69458)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-08T10:45:18.750

你不能做这样的事情吗？

```
;WITH cte AS (....)
SELECT
    * 
FROM 
    cte
CROSS APPLY 
    dbo.myTable tbl ON cte.XXX = tbl.XXX 
```

将CTE 定义`CROSS APPLY` **之后**的 - 放入指向 CTE 的一个 SQL 语句中。那不行吗？？

**或者：** - 翻转你的逻辑 - 做一个“自上而下”的 CTE，首先选择顶级节点，然后遍历层次结构。这样，您可以轻松确定递归 CTE 第一部分中的“顶级父亲”——如下所示：

```
;WITH ChildParent AS
(
    SELECT
        ID,
        ParentID = ISNULL(ParentID, -1),
        SomeName, 
        PLevel = 1,   -- defines level, 1 = TOP, 2 = immediate child nodes etc.
        TopLevelFather = ID  -- define "top-level" parent node
    FROM dbo.[Agent_Agents] 
    WHERE ParentID IS NULL

    UNION ALL

    SELECT
        a.ID,
        ParentID = ISNULL(a.ParentID, -1),
        a.SomeName, 
        PLevel = cp.PLevel + 1,
        cp.TopLevelFather   -- keep selecting the same value for all child nodes
    FROM dbo.[Agent_Agents] a
    INNER JOIN ChildParent cp ON r.ParentID = cp.ID
)
SELECT  
   ID,
   ParentID,
   SomeName,
   PLevel,
   TopLevelFather   
FROM ChildParent 
```

这将为您提供类似这样的节点（基于您的示例数据，稍微扩展）：

```
ID  ParentID  SomeName      PLevel  TopLevelFather
20    -1      Top#20           1          20
 4    -1      TOP#4            1           4
 8    -1      TOP#8            1           8
 7     8      ChildID = 7      2           8
 3     7      ChildID = 3      3           8
 2     4      ChildID = 2      2           4
 9    20      ChildID = 9      2          20
 5     9      ChildID = 5      3          20
 1     5      ChildID = 1      4          20 
```

现在，如果您从此 CTE 输出中选择特定的子节点，您将始终获得所需的所有信息 - 包括子节点的“级别”及其顶级父节点。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-08T13:28:38.970

不确定我是否了解您要查找的内容，但可能是这样。

```
;WITH c 
     AS (SELECT childid, 
                parentid, 
                parentid AS topParentID 
         FROM   @myTable 
         WHERE  childid = parentid 
         UNION ALL 
         SELECT T.childid, 
                T.parentid, 
                c.topparentid 
         FROM   @myTable AS T 
                INNER JOIN c 
                        ON T.parentid = c.childid 
         WHERE  T.childid <> T.parentid) 
SELECT childid, 
       topparentid 
FROM   c 
ORDER  BY childid 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/69460)

它与[marc_s](https://stackoverflow.com/users/13302/marc-s)的[答案](https://stackoverflow.com/a/10497082/569436)相同，不同之处在于我使用您的表变量以及您对根节点具有的事实，而 marc_s 的答案针对根节点。在我看来，最好有根节点。`childID = parentID``parent_ID = null``parent_ID = null`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:25:03.630

我还没有时间进一步研究您的问题，并且不确定我是否理解您的问题，但是您不能使用此 svf 来获取最高父亲的身份吗？

```
CREATE FUNCTION [dbo].[getTopParent] (
    @ChildID INT
)

RETURNS int
AS
BEGIN
    DECLARE @result int;
    DECLARE @ParentID int;

    SET @ParentID=(
        SELECT ParentID FROM ChildParent
        WHERE ChildID = @ChildID 
    )

    IF(@ParentID IS NULL)
        SET @result = @ChildID 
    ELSE
        SET @result = [dbo].[getTopParent](@ParentID)

    RETURN @result    
END 
```

然后你应该能够以这种方式找到每个顶级父级：

```
SELECT ChildID
    ,  [dbo].[getTopParent](ChildID) AS TopParentID
FROM ChildParent 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T13:44:20.340

```
select distinct 
       a.ChildID,a.ParentID,
       --isnull(nullif(c.parentID,b.parentID),a.parentID) as toppa,
       B.parentID
       --,c.parentID
      ,isnull(nullif(d.parentID,a.parentID),c.parentID) as toppa1,a.name
from myTable a
   inner join myTable c
       on a.parentID=c.parentID
   inner join myTable b
       on b.childID=a.parentID
   inner join myTable d
       on d.childID=b.parentID 
```

我使用了无 CTE 表达式，然后使用联接来获取子级父级的步骤，然后在 SQL Server 2005 中而不是在服务器 2000 中引入了更重要的公用表表达式，因此使用联接来获取值这是获取的基本方法子值的 parentid

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-07T08:29:29.303

考虑这个示例数据和相应的 SQL 来访问子记录及其顶级父记录。

[样本数据](https://i.stack.imgur.com/MP5aP.png)

SQL 代码：

```
;WITH c AS (
   SELECT Id, Name, ParentId as CategoryId, 
          Id as MainCategoryId, Name AS MainCategory 
     FROM   pmsItemCategory 
     WHERE  ParentId is null

     UNION ALL 

     SELECT T.Id, T.Name, T.ParentId,  MainCategoryId, MainCategory 
     FROM   pmsItemCategory AS T 
            INNER JOIN c  ON T.ParentId = c.Id 
     WHERE  T.ParentId is not null
    ) 

SELECT Id, Name, CategoryId, MainCategoryId, MainCategory 
FROM   c 
order by Id 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-14T09:35:13.143

[![在此处输入图像描述](../Images/135f7fd7cc2ed5d5b1f7fd570478cdb9.png)](https://i.stack.imgur.com/B3Yea.png)

```
select dbo.[fn_getIMCatPath](8)
select Cat_id,Cat_name,dbo.[fn_getIMCatPath](cat_id) from im_category_master

Create FUNCTION [dbo].[fn_getIMCatPath] (@ID INT) 
returns NVARCHAR(1000) 
AS 
BEGIN 
  DECLARE @Return   NVARCHAR(1000), 
          @parentID INT, 
          @iCount   INT 

  SET @iCount = 0 

  SELECT @Return = Cat_name, 
         @parentID = parent_id 
  FROM   im_category_master 
  WHERE  [cat_id] = @ID 

  WHILE @parentID IS NOT NULL 
    BEGIN 
        SELECT @Return = cat_name + '>' + @Return, 
               @parentID = parent_id 
        FROM   im_category_master 
        WHERE  [cat_id] = @parentID 

        SET @iCount = @iCount + 1 
        IF @parentID = -1
        BEGIN
        SET @parentID = NULL 
        END
        IF @iCount > 10 
          BEGIN 
              SET @parentID = NULL 
              SET @Return = '' 
          END 
    END 

  RETURN @Return 
END 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-03-13T11:23:34.620

```
With cte as 
(
Select ChileId,Name,ParentId from tblHerarchy
where ParentId is null 
union ALL
Select h.ChileId,h.Name,h.ParentId  from cte
inner join tblHerarchy h on h.ParentId=cte.ChileId
) 
Select * from cte 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-03-13T11:28:07.647

```
With cteherarchy as 
(
Select ChileId,Name,ParentId from tblHerarchy
where ParentId is null 
union ALL
Select h.ChileId,h.Name,h.ParentId  from cte
inner join tblHerarchy h on h.ParentId=cte.ChileId
) 
Select * from cteherarchy 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-22T13:09:31.300

```
select distinct 
       a.ChildID,a.ParentID,
       --isnull(nullif(c.parentID,b.parentID),a.parentID) as toppa,
       B.parentID
       --,c.parentID
      ,isnull(nullif(d.parentID,a.parentID),c.parentID) as toppa1,a.name
from myTable a
   inner join myTable c
       on a.parentID=c.parentID
   inner join myTable b
       on b.childID=a.parentID
   inner join myTable d
       on d.childID=b.parentID 
```

# javascript - 使用并返回动态参数是否安全？

> ID：10496981
> 
> 赞同：0
> 
> 时间：2012-05-08T10:38:58.287
> 
> 标签：javascript, function, arguments

```
/*
 * Example function for operating with dynamic arguments
 */
function something(){
    for(var i in arguments){
        arguments[i] = arguments[i] + Math.random() * 25;
    }

    return arguments;
} 
```

没有错误，没有注意到性能下降，并且值已更改。

那么，对动态参数进行此类操作是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:41:20.843

我永远不会返回它，因为它不是一个真正的数组（有关该对象特殊行为的一些信息，请参见[http://javascriptweblog.wordpress.com/2011/01/18/javascripts-arguments-object-and-beyond/](http://javascriptweblog.wordpress.com/2011/01/18/javascripts-arguments-object-and-beyond/) ） -所以根据调用代码对它的作用，它会失败。

但是，您可以轻松地将其转换为数组：

```
var args = Array.prototype.slice.call(arguments); 
```

我不会修改原始对象，因为如果您的函数接受任何更改，也会更改相应的命名参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:41:43.993

`arguments`是一个“伪数组”。与返回数组有何不同？唯一的缺点是它`arguments`不是数组，因此您没有所需的数组属性和方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:46:17.830

是的，它是安全的。但是，您应该注意`arguments`对象的功能，这在 Ecmascript 实现和版本之间有所不同。它可以是一个与参数变量绝对链接的伪数组，也可以是一个独立的 Array 实例。

如果您知道您的环境就可以，否则最好编写代码

```
function something() {
    var l = arguments.length,
        res = new Array(l);
    for(var i=0; i<l; i++) {
        res[i] = arguments[i] + Math.random() * 25;
    }
    return res;
} 
```

# android - 推荐的移动设备和平板设备之间的文本大小比例？

> ID：10496983
> 
> 赞同：8
> 
> 时间：2012-05-08T10:39:12.203
> 
> 标签：android

移动设备和平板设备之间推荐的文本大小**比例是多少？**

有一个适用于移动设备的应用程序，我需要为平板设备制作同样的应用程序。如果移动应用中的字体大小是 16dp，那么平板应用中应该是什么？

一定有一些乘法比率，我可以使用它来最好地决定平板电脑应用程序的文本大小。Android设计网站对此并没有多说。

PS。我知道我可以通过在设备上测试来调整每个文本，但我正在寻找推荐的比率。

**编辑**

不是16dp，而是16sp。对不起！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T11:57:03.990

其实我们开发者不用担心这个比例。我只是将字体大小值外部化为 res/values/dimensions.xml 并使用 sp 作为一个单位。

```
<resources>
    <dimen name="my_font_size">16sp</dimen>
... 
```

> Scale-independent Pixels - 这类似于 dp 单位，但它也根据用户的字体大小偏好进行缩放。建议您在指定字体大小时使用此单位，以便根据屏幕密度和用户偏好进行调整。

* * *

刚刚看到您的编辑：由于 sp 已经将用户首选项和 dpi 考虑在内，您所能做的就是通过资源系统分配不同的字体大小。据我所知，平板电脑到手机没有单一的神奇转换数字。想想那里有许多不同的屏幕尺寸。
但是，您可以使用自定义样式，该样式使用主题定义的文本大小值之一。

我希望设备制造商知道哪种字体大小在他们的设备上具有良好的可读性。

> ```
> <style  
> name="MyTextStyle"
> parent="@android:style/TextAppearance.Medium">
> </style> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:16:01.827

如果您使用 dip 代替像素，它应该会自动适合手机和平板电脑。平板电脑通常是 mdpi 设备（比例因子 1）。

如果您有兴趣，可以在此处找到有关不同密度屏幕的缩放因子的更多信息：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# asp.net-mvc - 部分剃刀形式的多个实例

> ID：10496986
> 
> 赞同：1
> 
> 时间：2012-05-08T10:39:16.670
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有 2 个嵌套的部分控件

用户控制1：

```
Html.BeginRouteForm
(
   Html.RenderPartial (path of child form)
) 
```

子控件：

```
Html.LabelFor(x=>x.FirstName,"First Name")
Html.TextBoxFor(x=>x.FirstName)
... 
```

**问题：**

我在主页上有 2 个此部分控件的实例。当我单击第二个实例的提交按钮时，使用 AJAX 和 JQuery 发布表单。由于 FirstName 具有必需的约束，因此表单会返回并触发 FirstName 所需的验证。问题来了：当我单击标签“名字”时，光标将焦点集中在部分表单的第一个实例的名字文本框上，而不是触发验证的第二个实例。

关于如何解决这个问题的任何建议？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:28:16.340

猜测一下，我会说您是重复 ID 的受害者，因为 ChildControl 的两个实例可能会生成相同的 ID 字符串。

与 ASPNET 不同，MVC 似乎在“本地”生成 ID。换句话说，幕后没有任何东西可以跟踪生成了多少“控件”，这就是允许 ASPNET 生成唯一 ID 的原因。

如果是这样，这是一个很容易解决的问题。只需将您自己的 ID 添加到 ChildControl 的每个实例，执行以下操作：

```
@Html.TextBox("rel_date", Model.Value.rel_date.ToSiteString(), new { @class = "date-picker", style = "width: 75px;", id = "" }) 
```

在这里，我实际上是通过在 TextBox 帮助程序调用的 html 属性参数中传入一个空 ID 值来抑制我正在生成的文本框上的 ID。您将插入一些您知道该页面唯一的 ID。

顺便说一句，您可以通过检查为页面生成的 html 来快速检查我对重复 ID 的看法是否正确。当它在 IE 中启动时，只需按 F12（无论如何在 IE9 中）。这将打开一个窗口，允许您浏览生成页面的 html。您可以阅读它来查看两个文本框的 ID 属性是否相同，这将支持我的理论。

祝你好运！

# internet-explorer-7 - 原生 IE7 可以处理 IE8 文档模式吗？

> ID：10496989
> 
> 赞同：1
> 
> 时间：2012-05-08T10:39:25.347
> 
> 标签：internet-explorer-7

像往常一样，我在让我的 html 和 jquery 在 IE7 上工作时遇到了一些麻烦。当我将开发人员工具中的文档模式设置为 IE8-Standards，使用 IE7 作为浏览器模式时，我没有遇到任何问题，但我不知道原生 IE7 是否可以做到这一点。有没有人有使用这种模式的经验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T10:41:10.447

不，IE 7 不支持像 IE 8 这样的渲染页面。

那将需要一台时间机器。IE 8 及其“标准模式”在 IE 7 发布时尚未发明。

# r - 如何在数据框R的顶部添加行

> ID：10496992
> 
> 赞同：12
> 
> 时间：2012-05-08T10:39:34.690
> 
> 标签：r, dataframe

我有以下数据框：

```
> dat

  V1   V2
1  1 6868
2  2  954
3  3   88 
```

我想要做的是在当前结果的顶部添加另一行：

```
 V1   V2
1  0 10000
2  1 6868
3  2  954
4  3   88 
```

为什么这不起作用：

```
new_dat <- rbind(dat,c(0,10000)) 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-08T10:44:39.920

先把你想要的向量放在上面：

```
new_dat <- rbind(c(0,10000), dat) 
```

但是，在这里使用 rbind 假设您的所有列都是数字的，并且您假设列顺序与向量相同。一般来说，您应该将 data.frames 绑定在一起，如下所示，如果需要，您可以在其中混合列类型：

```
rbind(data.frame(V1 = 0, V2 = 10000), dat) 
```

对于像这样的更一般的数据合并，还有许多其他选项。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-08T10:44:34.570

> 为什么这不起作用：new_dat <- rbind(dat,c(0,10000))

它的顺序错误，只需查看输出：

```
R> rbind(dat, c(0, 1000))
  V1   V2
1  1 6868
2  2  954
3  3   88
4  0 1000 
```

相反，交换参数的顺序：

```
rbind(c(0,10000), dat) 
```

得到你想要的。或者，你可以有

```
rbind(data.frame(V1 = 0, V2 = 10000), dat) 
```