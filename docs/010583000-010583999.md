# StackOverflow 问答 10583000-10583999

# c# - 在 C# 中格式化日期时间

> ID：10583009
> 
> 赞同：3
> 
> 时间：2012-05-14T12:08:07.560
> 
> 标签：c#, formatting, date-formatting

我只是想将一串日期更改为 DateTime。

但是，当我尝试打印时，它总是说结果是`5/31/2009`**`8:00:00 AM`**

知道为什么会发生这种情况吗？

```
namespace Test
{
    class Test
    {
        static void Main()
        {
            Parse("5/31/2009 12:00:00 AM" );
        }

        static readonly string ShortFormat = "M/d/yyyy hh:mm:ss tt";

        static readonly string[] Formats = { ShortFormat };

        static void Parse(string text)
        {
            // Adjust styles as per requirements
            DateTime result = DateTime.ParseExact(text, ShortFormat,
                                                  CultureInfo.InvariantCulture,
                                                  DateTimeStyles.AssumeUniversal);
            Console.WriteLine(result);
            Console.WriteLine(result);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:22:30.363

您需要使用`DateTimeStyles.None`或者`DateTimeStyles.AssumeLocal`如果您希望`DateTime`解析不考虑时区：

```
DateTime result = DateTime.ParseExact(text, ShortFormat,
                                      CultureInfo.InvariantCulture,
                                      DateTimeStyles.None); 
```

当您使用`DateTimeStyles.AssumeUniversal`自动时区转换时，会针对计算机时区进行。

请参阅[文档](http://msdn.microsoft.com/en-us/library/91hfhz89.aspx)：

> AssumeUniversal - 如果在解析的字符串中未指定时区，则假定该字符串表示 UTC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:09:57.540

我认为您需要编写`MM/dd/yyyy hh:mm:ss tt`日期格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T12:11:11.633

为了以`DateTime`指定的格式打印 a，您需要使用该`ToString`方法。像这样。

```
result.ToString("M/d/yyyy hh:mm:ss tt"); 
```

第二个参数 ( `format`) 定义了字符串 ( `S`) 必须采用的格式才能对其进行解析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:10:17.277

所有 DateTime 格式都在[此处](http://www.dotnetperls.com/datetime-format)和[此处](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)进行了描述。你应该改用

```
static readonly string ShortFormat = "MM/dd/yyyy hh:mm:ss tt"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T12:10:32.033

将短格式更改为

```
static readonly string ShortFormat = "MM/dd/yyyy hh:mm:ss tt"; 
```

你的字符串代表这个

```
"05/31/2009 12:00:00 AM"
"MM/dd/yyyy hh:mm:ss tt" 
```

上面的数字对应下面的格式

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T12:30:00.000

这取决于您的时区，我认为您的时区是 GMT+4 而不是 bukko 回答的 GMT-4。无论如何，只需使用：

```
DateTimeStyles.AssumeLocal 
```

代替：

```
DateTimeStyles.AssumeUniversal 
```

# android - 在 Android 的 WebChromeClient 中打开静态 html 页面会在 url 中添加更多字符

> ID：10583010
> 
> 赞同：0
> 
> 时间：2012-05-14T12:08:11.470
> 
> 标签：android, android-webview

我`The Web Page at file:///#/android_asset/webpage.htm could not be loaded as: Is a directory.`在模拟器中遇到错误。

但我的代码是`webView.loadUrl("file:///android_asset/webpage.htm");`

首先页面完美呈现，但在渲染后再次刷新页面并且没有被加载并且将使网页不可用。如果我们仔细看android模拟器给出的url，在android_asset之前有两个额外的字符。

下面是代码。

```
public class Catalog extends Activity {
final Activity activity = this;
WebView webView;
 ProgressDialog progressDialog;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
this.getWindow().requestFeature(Window.FEATURE_PROGRESS);//used for rendering percentage of loading 
setContentView(R.layout.catalog_layout);

try{

    webView = (WebView) findViewById(R.id.browserwebview);
    webView.getSettings().setJavaScriptEnabled(true);

     webView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress)
            {
                activity.setTitle("Loading...");
                activity.setProgressBarVisibility(true);
                activity.setProgress(progress * 100);

                if(progress == 100){
                    activity.setTitle(R.string.app_name);

                }

            }

        });

        webView.setWebViewClient(new WebViewClient() {
            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
            {
                Toast.makeText(activity, "Oh no!"+ description, Toast.LENGTH_SHORT).show();

            }

            @Override
            public void onLoadResource (WebView view, String url) {

            }

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url)
            {

                return true;
            }

        });

        webView.loadUrl("file:/android_asset/web/webpage.html");

}
catch (Exception e) {
    e.printStackTrace();
}

ImageButton btnBack = (ImageButton)this.findViewById(R.id.buttonBackCatalog);
btnBack.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View view) {
        if(webView.canGoBack()){
             webView.goBack();
        }else{
            Intent myIntent = new Intent(view.getContext(), FCFActivity.class);`
           `startActivityForResult(myIntent, 0);
        }

    }

});

/*
 * Actions for footer Buttons
 * 
 */

ImageButton buttonFooterMainHome = (ImageButton)findViewById(R.id.footerMainBtnHome);
buttonFooterMainHome.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View view) {
        Intent myIntent = new Intent(view.getContext(), FCFActivity.class);
        startActivityForResult(myIntent, 0);

    }
});

LinearLayout homeLinearLayout=(LinearLayout)this.findViewById(R.id.footerLayoutHome);
homeLinearLayout.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View view) {
        Intent myIntent = new Intent(view.getContext(), FCFActivity.class);
        startActivityForResult(myIntent, 0);

    }
});

}
     @Override
    public void onConfigurationChanged(final Configuration newConfig)
    {
        // Ignore orientation change to keep activity from restarting
        super.onConfigurationChanged(newConfig);

        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {

        } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){

        }

    }
} 
```

期待你的答复。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:03:11.720

哦，这让我头疼，他们改变了其中一个 android 版本的工作方式，但不记得是哪个。这是我所做的：

```
webView.loadUrl("file:/android_asset/webpage.html"); 
```

如果您的静态网页有图片，请使用此链接：

```
file:///android_asset/yourimage.png 
```

编辑试试这个：[https](https://stackoverflow.com/a/8737547/969325) ://stackoverflow.com/a/8737547/969325 ，清理项目并检查资产文件是否在路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:05:20.433

```
- `You are using only htm use html` 

webview.getSettings().setJavaScriptEnabled(true);
webview.setWebViewClient(new myWebClient());
webview.loadurl();
and

 public class myWebClient extends WebViewClient  
         {  
             @Override  
             public void onPageStarted(WebView view, String url, Bitmap favicon) {  
                 // TODO Auto-generated method stub  
                 super.onPageStarted(view, url, favicon);  
             }  

             @Override  
             public boolean shouldOverrideUrlLoading(WebView view, String url) {  
                 // TODO Auto-generated method stub  

                 view.loadUrl(url);  
                 return true;  

             }  
         } 
```

# elasticsearch - 为什么 Elasticsearch “not_analyzed” 字段被拆分成术语？

> ID：10583013
> 
> 赞同：21
> 
> 时间：2012-05-14T12:08:28.330
> 
> 标签：elasticsearch

我的映射定义中有以下字段：

```
...
"my_field": {
  "type": "string",
  "index":"not_analyzed"
}
... 
```

当我索引具有该值的文档时，`my_field = 'test-some-another'`该值被拆分为 3 个术语：`test`, `some`, `another`.

我究竟做错了什么？

我创建了以下索引：

```
curl -XPUT localhost:9200/my_index -d '{
   "index": {
    "settings": {
      "number_of_shards": 5,
      "number_of_replicas": 2
    },
    "mappings": {
      "my_type": {
        "_all": {
          "enabled": false
        },
        "_source": {
          "compressed": true
        },
        "properties": {
          "my_field": {
            "type": "string",
            "index": "not_analyzed"
          }
        }
      }
    }
  }
}' 
```

然后我索引以下文档：

```
curl -XPOST localhost:9200/my_index/my_type -d '{
  "my_field": "test-some-another"
}' 
```

然后我将插件[https://github.com/jprante/elasticsearch-index-termlist](https://github.com/jprante/elasticsearch-index-termlist)与以下 API 一起使用： `curl -XGET localhost:9200/my_index/_termlist` 这给了我以下响应：

 `````
{"ok":true,"_shards":{"total":5,"successful":5,"failed":0},"terms": ["test","some","another"]} 
````  `* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-14T13:34:28.033

通过运行验证映射是否实际设置：

`curl localhost:9200/my_index/_mapping?pretty=true`

创建索引的命令似乎不正确。它不应该包含`"index" : {`作为根元素。试试这个：

```
curl -XPUT localhost:9200/my_index -d '{
  "settings": {
    "number_of_shards": 5,
    "number_of_replicas": 2
  },
  "mappings": {
    "my_type": {
      "_all": {
        "enabled": false
      },
      "_source": {
        "compressed": true
      },
      "properties": {
        "my_field": {
          "type": "string",
          "index": "not_analyzed"
        }
      }
    }
  }
}' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-22T10:50:26.377

在 ElasticSearch 中，当字段进入倒排索引时，它就会被索引，lucene 使用这种数据结构来提供其强大而快速的全文搜索功能。如果要搜索某个字段，则必须对其进行索引。当你索引一个字段时，你可以决定是要按原样索引它，还是要分析它，这意味着决定一个标记器应用到它，这将生成一个标记列表（单词）和一个标记列表可以修改生成的令牌（甚至添加或删除一些）的过滤器。索引字段的方式会影响您对其进行搜索的方式。如果您索引一个字段但不对其进行分析，并且其文本由多个单词组成，您将能够找到该文档仅搜索该确切的特定文本，包括空格。

You can have fields that you only want to search on, and never show: indexed and not stored (default in lucene). You can have fields that you want to search on and also retrieve: indexed and stored. You can have fields that you don't want to search on, but you do want to retrieve to show them.``

# java - 带有 JSF 和 primefaces 的无序列表 (ul)

> ID：10583015
> 
> 赞同：1
> 
> 时间：2012-05-14T12:08:32.150
> 
> 标签：java, jsf-2, primefaces

我的 JSF 2.0 页面中有一个使用基本 HTML 的列表，如下所示：

```
<ul>
    <li><h:outputText value="Item1" /></li>
    <li><h:outputText value="Item2" /></li>
    <li><h:outputText value="Item3" /></li>
    <li><h:outputText value="Item4" /></li>
</ul> 
```

但我不想在某些条件下显示某些项目，所以我可以使用：

```
<ul>
    <li><h:outputText value="Item1" rendered="true"/></li>
    <li><h:outputText value="Item2" rendered="true"/></li>
    <li><h:outputText value="Item3" rendered="false"/></li>
    <li><h:outputText value="Item4" rendered="false"/></li>
</ul> 
```

但是，列表项仍在呈现并且正在破坏我的页面，所以我正在寻找替换普通`<li>`项目的东西，所以我可以使用该`rendered`选项，或者可能是其他一些想法。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-14T12:11:37.050

您还需要有条件地渲染`<li>`。将它们中的每一个包裹在`<h:panelGroup>`or中`<ui:fragment>`。

```
<ul>
    <ui:fragment rendered="true"><li>Item1</li></ui:fragment>
    <ui:fragment rendered="true"><li>Item2</li></ui:fragment>
    <ui:fragment rendered="false"><li>Item3</li></ui:fragment>
    <ui:fragment rendered="false"><li>Item4</li></ui:fragment>
</ul> 
```

# javascript - twitter 主题标签查询不返回媒体实体，为什么？

> ID：10583016
> 
> 赞同：0
> 
> 时间：2012-05-14T12:08:35.280
> 
> 标签：javascript, json, twitter

我有一个问题，我正在尝试从 twitter 检索一个 json 结构，如果从 hashtag 检索推文，那么 media_entities 将不起作用......如果我根据用户检索推文，那么媒体实体将出现......

让我解释一下，如果我插入：

[https://search.twitter.com/search.json?q=alessandronoe&include_entities=true](https://search.twitter.com/search.json?q=alessandronoe&include_entities=true)（它有效，我看到了 media_url 链接）

如果我插入：[https](https://search.twitter.com/search.json?q=%23wearetwo&include_entities=true) ://search.twitter.com/search.json?q=%23wearetwo&include_entities=true （媒体实体不会出现）

这与推特有关还是我做错了什么？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:24:38.070

搜索查询应该是 url 编码的

你应该像[https://search.twitter.com/search.json?q=@wearetwo&include_entities=true这样的查询](https://search.twitter.com/search.json?q=@wearetwo&include_entities=true)

参考文档 [https://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search)

# javascript - 修复 ie7&8 中组合框的最小宽度

> ID：10583021
> 
> 赞同：0
> 
> 时间：2012-05-14T12:08:47.857
> 
> 标签：javascript, jquery, css, internet-explorer, struts2

下面的 min_width 属性在 mozilla 中运行良好，但在 ie 7 和 8 中则不行。有什么建议么？

```
 <s:select theme="simple" key="" id="availLocation" list="" listValue="" listKey="" 
    size="8" multiple="true" style="min-width:130px"/> 
```

# c - 在“C”程序中，如何将十六进制值存储在字符串变量中？

> ID：10583023
> 
> 赞同：0
> 
> 时间：2012-05-14T12:08:52.063
> 
> 标签：c, encryption, des

我有一个程序，它将输入数据作为明文，然后在 CBC 模式下使用 3DES 方法解密消息。但是这些值在程序中是硬编码的，我想自己提供应该解密的加密值。如何在以下程序中执行此操作？

```
int main(void)
{
    unsigned char in[BUFSIZE], out[BUFSIZE], back[BUFSIZE];
    unsigned char *e = out;
    int len;

    DES_cblock key;
    DES_cblock seed = {0xFE, 0xDC, 0xBA, 0x98, 0x76, 0x54, 0x32, 0x10};
    DES_cblock ivsetup = {0xE1, 0xE2, 0xE3, 0xD4, 0xD5, 0xC6, 0xC7, 0xA8};
    DES_key_schedule keysched;
    DES_cblock ivec;

    memset(in, 0, sizeof(in));
    memset(out, 0, sizeof(out));
    memset(back, 0, sizeof(back));

    RAND_seed(seed, sizeof(DES_cblock));

    DES_random_key(&key);
    DES_set_odd_parity(&key);
    if (DES_set_key_checked((C_Block *)key, &keysched))
    {
        fprintf(stderr, "ERROR: Unable to set key schedule\n");
        exit(1);
    }

    /* 64 bytes of plaintext */

    /* From here, encryption starts for the plaintext below. */

    strcpy(in, "Now is the time for all men to stand up and be counted");

    printf("Plaintext: [%s]\n", in);

    len = strlen(in);
    memcpy(ivec, ivsetup, sizeof(ivsetup));
    DES_ncbc_encrypt(in, out, len, &keysched, &ivec, DES_ENCRYPT);

    printf("Ciphertext:");
    while (*e) printf(" [%02x]", *e++);
    printf("\n");

    /* Till here, encryption is over. After this we have to decrypt
     * the value which has been encoded, but I want to remove all this
     * part and to provide my own encrypted message, and get the
     * proper output.
     */

    memcpy(ivec, ivsetup, sizeof(ivsetup));

    /* The problem I am facing is how to provide the value properly
     * to the parameter "out" and "keysched", which should be of my
     * choice. For "out" I want to provide THIS value:
     * "2DC39619B4450A8C27A3976C50DE5799".
     */

    DES_ncbc_encrypt(out, back, len, &keysched, &ivec, DES_DECRYPT);

    printf("Decrypted Text: [%s]\n", back);

    exit(0);
} 
```

阅读更多：[http ://blog.fpmurphy.com/2010/04/openssl-des-api.html#ixzz1uqOp1Yhv](http://blog.fpmurphy.com/2010/04/openssl-des-api.html#ixzz1uqOp1Yhv)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:18:33.750

阅读[C 常见问题解答 20.10](http://c-faq.com/misc/hexio.html)。十六进制是一种表示。所有数字都在内部以二进制形式存储。你`DES_cblock`可能是`typedef`一个（无符号，也许！）整数类型。所以，你实际上是一个整数数组。你可以用十进制、十六进制或二进制输入数字——但它们都可以。[十六进制通常用于](https://stackoverflow.com/questions/9800675/use-of-byte-arrays-and-hex-values-in-cryptography)密码学，因为它具有一些符号优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:07:40.643

我搞定了。我暂时以一种幼稚的方式做到了这一点，但它现在正在发挥作用。我是这样做的。

```
out[0]=0xA0; out[1]=0x69; out[2]=0x57; out[3]=0x3B;
out[4]=0x70; out[5]=0x26; out[6]=0x1C; out[7]=0xE8;
out[8]=0xEF; out[9]=0xF2; out[10]=0x9F;out[11]=0x60;
out[12]=0x80;out[13]=0x60;out[14]=0xB2;out[15]=0xE5; 
```

稍后我将在 for 循环中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:14:12.797

使用将值存储为字符串的非标准`itoa`函数，您可以执行以下操作：

```
char* hexstr = itoa(back,16); 

// print out a string
printf("Decrypted Text: [%X]\n", back); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:15:38.900

像这样创建一个转储函数：

```
hexdump(char *buff, int len) { 
  int i,tmp;
  for(i=0; i < len; i++) {
    tmp = buff[i] & 0xff; /** to avoid sign extension */
    printf("%02x",tmp);
  }
} 
```

并使用它。

```
hexdump(back,len); 
```

如果必须在内存中写入，可以使用 sprintf，但可能需要自己编写二进制转十六进制函数。

# javascript - jquery 初学者 - 按时间启动的功能

> ID：10583032
> 
> 赞同：5
> 
> 时间：2012-05-14T12:09:22.967
> 
> 标签：javascript, jquery, validation, function

我是 JS 的菜鸟，理解 JQUERY 语义有问题。

我有一个用于检查单元格内容的函数。

问题：该功能刚刚在单元格失去焦点时启动，如果我单击提交，首先显示错误，然后它将运行该功能。

即使我在单元格内，我也希望该函数运行。怎么做？

由此发起：

```
$(".user_id").blur(function(){ validateUserId($('.user_id')); }); 
```

功能：

```
function validateUserId(reference) {
    if ( 5 == $(reference).val().length ) {
        $.get('index.php?user=' + $(reference).val(), function(data) {
            if ( "error" == data ) {
                $(reference).parent().parent().addClass('error');
                alert('error');
            } else {
                $(reference).parent().parent().removeClass('error');
                $(reference).addClass('valid');
                $(reference).parent().parent().addClass('success');
            }
        });
    } else {
        alert('short');
        $(reference).parent().parent().addClass('error');
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:12:37.947

```
$(".user_id").on('keyup', function(){
   validateUserId($(this)); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:14:16.540

我会使用 keyup 事件。因此，每当有人在您的输入单元格中键入一个键时，该函数就会被执行。

```
 $(".user_id").on("keyup", function(){ validateUserId($(this)); }); 
```

我更改了 $(".user_id")，您将值从 , 更改为 $(this)。因为你想要你做了 keyup 事件的字段的值。（而不是其他字段，如果有 2 个具有相同 .user_id 类的字段。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T16:07:05.213

这是一个工作演示[http://jsfiddle.net/pomeh/GwswM/](http://jsfiddle.net/pomeh/GwswM/)。我已经将代码改写为：

*   将 DOM 选择缓存到变量中，
*   使用 jQuery 方法链接，
*   `if`用三重等号改善条件，
*   分离 AJAX 调用和应用程序逻辑，
*   缓存相同的 AJAX 调用，
*   使用jQuery`deferred`隐藏验证的异步方面（链接到AJAX）

希望这会有所帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:11:54.003

尝试在焦点事件上绑定功能

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T12:17:32.953

```
$("input[submit]").click(function(e){
    e.preventDefault();
    var valid = validateUserId($('.user_id')); // maybe the function could return a boolean value too instead of just adding classes to the HTML part
    if (valid) {
        $("#your_form_id").submit(); // only if the input is valid, submit it
    }
}); 
```

关于您的问题的旁注：如果您单击提交按钮，它将首先触发提交操作，这可能会给您一个错误，*然后*执行`blur()`代码块

# javascript - 为什么这个数据网格以奇怪的顺序排序？

> ID：10583034
> 
> 赞同：1
> 
> 时间：2012-05-14T12:09:39.493
> 
> 标签：javascript, datagrid, dojo

我有一个数据网格，其中每一行都有一个列，我在其中定义了一个格式化程序来格式化显示结果，具体取决于它在数据库中所说的内容，并根据数据库创建`div`一个背景颜色。

我的数据网格有这个结构：

```
structure: [
  {
    name: "Name",
    field: "name",
    width: "auto"
  },
  {
    name: "Initials",
    field: "initials"
  },
  {
    name: "E-mail",
    field: "email",
    width: "auto"
  },
  {
    name: "Kerberos",
    field: "kerberos",
    width: "120px",
    formatter: function(kerberos){
      var format = "";

      if(kerberos == "password expired" || kerberos == "account expired"){
        format = '<div class="yellow" title="'+kerberos+'">'+kerberos+'</div>';
      }else if(kerberos == "ok"){
        format = '<div class="green" title="'+kerberos+'">'+kerberos+'</div>';
      }else{
        format = '<div class="red" title="Has no kerberos account">not available</div>';
      }

      return format;
    }
}, 
```

当我按列标题进行排序时，它对行进行排序，放置不一致，所以我不知道它是否正确排序（见下图）。如何定义数据网格必须对该列进行排序的方式？

![它是如何排序的](../Images/951ab6ee33720c2d2500525e052c8cd9.png)

`<div...>`由于字符的原因，我认为这是我在格式化程序中执行的 HTML部分`<>`，但如果我只输出文本（根据我的理解，应该按字母顺序排序），它仍然很奇怪。有谁知道为什么会发生这种情况以及我该如何解决？

***编辑：*** 忘记添加我如何获取/分配数据。我从 JSON 格式的 xhr.post 中获取大量数据，然后执行以下操作：

```
dojo.xhr.post({
    url: "/cgi-bin/users.cgi",
    handleAs: "json",
    content: {
      psearch: "dojoXhrBlank"
    },
    load: function(jsondata){
      // Creating a store for the datagrid
      var personStore = new Memory({ data: jsondata });

      // Create datastore for datagrid
      var gridStore = ObjectStore({objectStore: personStore});
      ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:48:30.677

我找到了答案。问题在于`ObjectStore`。该商店（出于某种原因）无法正确排序，并且在将商店类型更改为正确排序后`ItemFileReadStore`。切换存储的另一个原因是`ItemFileReadStore`它还支持`comparatorMap`允许自定义排序的属性，`ObjectStore`不支持此属性。

解决方案：

```
load: function(jsondata){      
      var store = new ItemFileReadStore({
        data: { identifier: "id", items: jsondata }
      });

      pgrid = new DataGrid({
        store: store,
        ... 
```

# php - 帮助将字符串放入数组中，以便我可以将其列为列表

> ID：10583038
> 
> 赞同：2
> 
> 时间：2012-05-14T12:10:02.443
> 
> 标签：php

我有一个字符串中的项目列表，例如

```
$string=Digital SLR & Batteries (Spares if possible), Memory Cards (& Spares), Strong Walking Boots (No Trainers), Warm waterproof clothing, Packed lunch/evening meal (Or both) depending on workshop time, Drinks 
```

我想要一个数组中的所有项目，这样我就可以使用 for 循环将它们输出到一个 html 列表中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:11:05.280

我看到您的数据用逗号分隔，使用[explode()](http://php.net/manual/en/function.explode.php)：

```
$string_array = explode(",", $string); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:14:21.600

```
$myArray = explode(',', $string); 
```

您可以使用它来将字符串拆分为数组

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T12:15:33.313

采用：

```
 $pieces = explode(",", $string); 
```

这里 $pieces 将是一个类似的数组

```
 $pieces[0]="Digital SLR & Batteries (Spares if possible)"; 
```

等等

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T12:16:58.183

您可以使用 exlode() 函数：

```
<?
$string="Digital SLR & Batteries (Spares if possible), Memory Cards (& Spares), Strong Walking Boots (No Trainers), Warm waterproof clothing, Packed lunch/evening meal (Or both) depending on workshop time, Drinks";

$arr = explode(", ", $string);
foreach ($arr as $element) {
   print $element . "\n";
}
?> 
```

# usb - 我正在尝试使用 PS2 鼠标草图将 Genius 鼠标连接到 Arduino，但它不会初始化鼠标

> ID：10583050
> 
> 赞同：2
> 
> 时间：2012-05-14T12:10:57.697
> 
> 标签：usb, arduino, usbserial, ps2

我一直在使用此消息底部的鼠标草图（由其他人编写）来尝试从 PS/2 鼠标中获取运动数据。我检查了这款鼠标的规格，上面说它是 PS/2 兼容的。但是，当我运行它时，它似乎停在 mouse_init 的第一行，上面写着“mouse.write(0xff); // reset”。这是对 ps2.h 中函数的调用。ps2.h 自 2008 年以来一直存在，并已在许多项目中使用，所以我认为它没问题，但我想知道 USB 鼠标连接为 PS/2 鼠标时是否有一些特殊的功能，而这个库从来没有旨在应对。有没有人有任何经验可以说明这一点？

我已经能够确定 mouse.write 正在改变我的 Genius 鼠标的状态，但它卡在了鼠标应该将时钟状态拉低以便主机可以继续传输数据的点。在 mouse.write 开始之前，时钟状态是低的，但是它被主机推高了几行到 mouse.write 并停留在那里。鼠标再也不会把它拉低了。任何关于问题可能是什么的想法将不胜感激。

```
#include <ps2.h>

/*
 * an arduino sketch to interface with a ps/2 mouse.
 * Also uses serial protocol to talk back to the host
 * and report what it finds.
 */

/*
 * Pin 5 is the mouse data pin, pin 6 is the clock pin
 * Feel free to use whatever pins are convenient.
 */
PS2 mouse(6, 5);

/*
 * initialize the mouse. Reset it, and place it into remote
 * mode, so we can get the encoder data on demand.
 */
void mouse_init()
{
  mouse.write(0xff);  // reset
  mouse.read();  // ack byte
  mouse.read();  // blank */
  mouse.read();  // blank */
  mouse.write(0xf0);  // remote mode
  mouse.read();  // ack
  delayMicroseconds(100);
}

void setup()
{
  Serial.begin(9600);
  mouse_init();
}

/*
 * get a reading from the mouse and report it back to the
 * host via the serial line.
 */
void loop()
{
  char mstat;
  char mx;
  char my;

  /* get a reading from the mouse */
  mouse.write(0xeb);  // give me data!
  mouse.read();      // ignore ack
  mstat = mouse.read();
  mx = mouse.read();
  my = mouse.read();

  /* send the data back up */
  Serial.print(mstat, BIN);
  Serial.print("\tX=");
  Serial.print(mx, DEC);
  Serial.print("\tY=");
  Serial.print(my, DEC);
  Serial.println();
//  delay(20);  /* twiddle */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T07:28:12.500

解决了。事实证明，我带来的 Genius 鼠标并不向后兼容 PS/2，尽管规范说是向后兼容。他们一定是把传感器芯片换成了 PS/2 功能在某个时候不存在的芯片。我现在有另一个 USB 鼠标，它可以完美地完成我想要的工作。

# mysql - 结合两个查询，其中一个需要特定的 SORT 和 LIMIT

> ID：10583052
> 
> 赞同：3
> 
> 时间：2012-05-14T12:11:06.143
> 
> 标签：mysql

我有一个表，其中有一个日期字段（schedule_date）和一个 varchar 字段（调度时间），其中包含一个小时数（0..23）作为字符串。

我有两个查询：

**查询 1) 返回任何即将到来的时间表**：
a) 任何日期 > 今天
b) 以及日期与当前日期匹配但小时 > 当前小时的任何内容

**查询 2) 返回 1 条记录**- 上次运行计划时间

我一直在试图弄清楚如何将两者结合起来，但我不确定如何处理通过简单联合所涉及的两个问题。我猜会涉及子查询，但我在这里的 SQL 技能有限。

**问题1）：** 只有第二个查询需要“LIMIT 1” - 如何仅应用于查询2？

**问题 2）：**第二个查询需要一个 DESC 顺序才能使 LIMIT 1 正常工作，但我需要两个查询的结果以 ASC 顺序组合

注意：将 + 1 小时添加到下面的当前时间（存储日期为 EST，服务器现在返回 CST）

**QUERY 1：返回任何即将到来的时间表**

```
SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
FROM special_schedules
WHERE schedule_date > DATE(NOW())
UNION 
SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
FROM special_schedules
WHERE schedule_date = DATE(NOW())
AND CONVERT(schedule_time, DECIMAL) > (HOUR(CURRENT_TIME()) + 1) 
```

**QUERY 2：返回最后一个回合的时间表** （需要 DESC 顺序才能将 LIMIT 1 定位在最后一个时间表上）

```
SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
FROM special_schedules
WHERE schedule_date = DATE(NOW())
AND CONVERT(schedule_time, DECIMAL) < (HOUR(CURRENT_TIME()) + 1)
UNION
SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
FROM special_schedules
WHERE schedule_date < DATE(NOW())
ORDER BY schedule_date DESC, schedule_time DESC
LIMIT 1 
```

编辑：更正上面的订单（应该是 DESC）

**如果合并，需要将两者合并的结果排序成ASC：**

```
ORDER BY schedule_date ASC, schedule_time ASC 
```

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:36:20.743

```
SELECT schedule_date, schedule_time
FROM (( SELECT schedule_date, CONVERT(schedule_time, DECIMAL) AS schedule_time
        FROM special_schedules
        WHERE schedule_date = DATE(NOW())
            AND CONVERT(schedule_time, DECIMAL) < (HOUR(CURRENT_TIME()) + 1))
        UNION
    (   SELECT schedule_date, CONVERT(schedule_time, DECIMAL)
        FROM special_schedules
        WHERE schedule_date < DATE(NOW())
        ORDER BY schedule_date DESC
        LIMIT 1)) AS h
ORDER BY schedule_date DESC 
```

这应该做你所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T15:13:10.907

首先，您可以简单地将两个查询联合起来，只有第二个需要用括号括起来：

```
SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
FROM special_schedules
WHERE schedule_date > DATE(NOW())
UNION 
SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
FROM special_schedules
WHERE schedule_date = DATE(NOW())
AND CONVERT(schedule_time, DECIMAL) > (HOUR(CURRENT_TIME()) + 1)
**UNION ALL
(**
SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
FROM special_schedules
WHERE schedule_date = DATE(NOW())
AND CONVERT(schedule_time, DECIMAL) < (HOUR(CURRENT_TIME()) + 1)
UNION
SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
FROM special_schedules
WHERE schedule_date < DATE(NOW())
ORDER BY schedule_date DESC, schedule_time DESC
LIMIT 1
**)
ORDER BY schedule_date ASC, schedule_time ASC** 
```

但是您可以通过将您的 UNION 转换为使用`OR`-ed 条件的单个 SELECT 来简化这两个查询，如下所示：

1.  ```
    SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
    FROM special_schedules
    WHERE schedule_date > DATE(NOW())
       OR schedule_date = DATE(NOW()) AND CONVERT(schedule_time, DECIMAL) > HOUR(CURRENT_TIME()) 
    ```

2.  ```
    SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
    FROM special_schedules
    WHERE schedule_date < DATE(NOW())
       OR schedule_date = DATE(NOW()) AND CONVERT(schedule_time, DECIMAL) < HOUR(CURRENT_TIME())
    ORDER BY schedule_date DESC, schedule_time DESC
    LIMIT 1 
    ```

然后组合查询将是这样的：

```
SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
FROM special_schedules
WHERE schedule_date > DATE(NOW())
   OR schedule_date = DATE(NOW()) AND CONVERT(schedule_time, DECIMAL) > HOUR(CURRENT_TIME())
**UNION ALL
(**
SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
FROM special_schedules
WHERE schedule_date < DATE(NOW())
   OR schedule_date = DATE(NOW()) AND CONVERT(schedule_time, DECIMAL) < HOUR(CURRENT_TIME())
ORDER BY schedule_date DESC, schedule_time DESC
LIMIT 1
**)
ORDER BY schedule_date ASC, schedule_time ASC** 
```

还有另一种选择，它涉及将`schedule_date`和`schedule_time`转换为单一`DATETIME`外观的值，如下所示：

```
CONCAT(schedule_date, ' ', schedule_time, ':00') 
```

在这种情况下，生成的查询可能如下所示：

```
SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
FROM special_schedules
WHERE **CONCAT(schedule_date, ' ', schedule_time, ':00') > (NOW() + INTERVAL 1 HOUR)**

UNION ALL

(
SELECT schedule_date,  CONVERT(schedule_time, DECIMAL) AS schedule_time
FROM special_schedules
WHERE **CONCAT(schedule_date, ' ', schedule_time, ':00') < (NOW() + INTERVAL 1 HOUR)**
ORDER BY schedule_date DESC, schedule_time DESC
LIMIT 1
)

ORDER BY schedule_date ASC, schedule_time ASC 
```

# javascript - Javascript拆分不是函数

> ID：10583055
> 
> 赞同：6
> 
> 时间：2012-05-14T12:11:11.603
> 
> 标签：javascript, jquery, facebook, string, split

嘿朋友们，我正在使用 javascript sdk 使用 jQuery facebook 多朋友选择器在用户朋友墙上发布，但是我收到此错误，friendId.split is not a function。这是我的代码

```
function recommendToFriend(pic, url, friendId, fromName)
{
    alert(friendId);
    var friendList ;
    pFriend = new Array();
    pFriend = friendId.split(',');
    for( x in pFriend )
    {
        alert(pFriend[x]);
        var publish = {
            method:'feed',
            picture:pic,
            link:url,
            name:'SHARP Product Recommend',
            caption: fromName + 'has recommend a product to you via Sharp Expert lounge',
        };

        FB.api('/'+pFriend[x]+'/feed', 'post', publish, function(resp) {
            if( !response || response.error )
                alert('Unable to share');
            else
                alert('Successfully posted to firends wall');
        });
    }
} 
```

在警告框中，我得到了逗号分隔的朋友 ID，所以我在每个用户墙上分别使用拆分功能帖子我不知道这里有什么问题请帮助我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T12:15:39.503

很可能`friendID`已经是一个数组。如果调用`alert`该数组，则将其转换为字符串并变为逗号分隔的值列表。

请注意，将数组转换为字符串与调用不同`JSON.stringify`（当元素是字符串时，您还会在元素周围得到括号和双引号）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T12:23:59.830

JavaScript`split()`函数用于字符串类型，例如。

```
var friendid='1,34,67'; 
```

正如 VisioN 所说，当您提醒数组时，您会得到逗号分隔的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T12:37:37.363

你可以像这样遍历 JS 对象

```
for (var key in friendid) {
   var obj = friendid[key];
   for (var prop in obj) {
      alert(prop + " = " + obj[prop]);
   }
} 
```

希望这可以帮助

**备用**

```
for( var x in friendId )
 {
  alert(friendId[x]); // this would be your desired value
 } 
```

# android - 位置提供者 SAMSUNG 始终返回 true

> ID：10583058
> 
> 赞同：1
> 
> 时间：2012-05-14T12:11:29.007
> 
> 标签：android, location, locationmanager, samsung-mobile

我正在尝试使用以下过程检查是否可以使用位置管理器获取位置

LocationManager 服务 = (LocationManager).getSystemService(Context.LOCATION_SERVICE); 布尔网络 = service.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

上述逻辑在 Sony Ericsson 中运行良好，但对于三星，'service.isProviderEnabled(LocationManager.NETWORK_PROVIDER)' 总是返回 true。，即使 GPS、WiFi 关闭，甚至没有插入 SIM 卡。

有人遇到过这个吗？任何帮助，将不胜感激。提前致谢。

# iphone - OpenCV IOS 实时模板匹配

> ID：10583062
> 
> 赞同：2
> 
> 时间：2012-05-14T12:11:38.710
> 
> 标签：iphone, ios, opencv, augmented-reality

我想创建一个应用程序（在 iPhone 上）执行此操作：

我有一个模板图像（徽标或任何对象），我想在相机视图中找到它并在找到它的位置放置一个图层并跟踪它！

这是一个带有 OpenCV 的无标记 AR！

我在这里阅读了一些文档、书籍和问答，但遗憾的是

实际上我想创建[类似](http://www.youtube.com/watch?v=V8qoaDbOr2U&feature=related)[这样](http://www.youtube.com/watch?v=sKC9y1Jab6c)或类似的东西。

如果有人可以向我发送一些源代码或真正有用的教程（一步一步），我真的很高兴！！！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T04:18:04.320

实现这一点并非易事——它涉及将增强现实与模板匹配和 3D 渲染相结合。

粗略的大纲：

1.  使用某种稳定的特征提取从输入视频流中获取特征。（例如，参见[OpenCV 中的 FAST](http://opencv.willowgarage.com/documentation/cpp/features2d_feature_detection_and_description.html)）。
2.  结合这些特征和反向投影来估计相机参数和姿势。（有关讨论，请参阅[相机校准](http://opencv.willowgarage.com/documentation/cpp/calib3d_camera_calibration_and_3d_reconstruction.html)，但请注意，这些通常需要校准图案，例如棋盘格。）
3.  使用模板匹配扫描图像以查找目标图像的补丁，然后使用特征和相机参数来确定对象的姿势。
4.  向前应用相机和对象变换并将替换图像渲染到场景中。

实现这一切需要大量的研究和努力！

网上有几篇文章可能对您有用：

*   [OpenCV 的简单增强现实](http://dsynflo.blogspot.com.au/2010/06/simplar-augmented-reality-for-opencv.html)
*   [增强现实的最小库](http://www.uco.es/investiga/grupos/ava/node/26)
*   [带有 NyartToolkit 的 AR](http://www.morethantechnical.com/2009/06/28/augmented-reality-with-nyartoolkit-opencv-opengl/)

您可能想研究一些可用的 AR 库和框架。维基百科有一个很好的列表：

*   [增强现实软件](http://en.wikipedia.org/wiki/Augmented_reality#Software)

值得注意的是高通的工具包，它不是 FLOSS，但似乎功能强大。

# c# - LinqToXml：解析和格式化

> ID：10583063
> 
> 赞同：1
> 
> 时间：2012-05-14T12:11:39.070
> 
> 标签：c#, linq

我有以下xml：

```
<Places Count='50'>
<Place ID='1' Row='1' Place='1' Status='10' Fragment='0'></Place>
<Place ID='2' Row='1' Place='2' Status='10' Fragment='0'></Place>
<Place ID='3' Row='1' Place='3' Status='10' Fragment='0'></Place>
<Place ID='4' Row='1' Place='4' Status='10' Fragment='0'></Place>
//other tags
</Places> 
```

这是我的方法：

```
public static List<string> ParseFreePlace(string response, string level)
{
   if (string.IsNullOrWhiteSpace(response)) return new List<string>();

   return XDocument.Parse(response).Descendants("Place")
         .Select(element => (string) element.Attribute("Row")).ToList();
} 
```

我想获得`List<string>`以下内容：

```
r=1;p=1;f=0;l=54; // 0 element in the List
r=1;p=2;f=0;l=54; // 1 element in the List
r=1;p=3;f=0;l=54; // 2 element in the List
r=1;p=4;f=0;l=54; // 3 element in the List 
```

`l`内容是`level`可变的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:16:26.387

试试这个：

```
public static List<string> ParseFreePlace(string response, string level)
{
   if (string.IsNullOrWhiteSpace(response)) return new List<string>();

   return 
        XDocument.Parse(response)
                 .Descendants("Place")
                 .Select(e =>
                    String.Format("r={0};p={1};f={2};l={3};",
                                   e.Attribute("Row").Value,
                                   e.Attribute("Place").Value,
                                   e.Attribute("Fragment").Value,
                                   level)
                 ).ToList();
} 
```

当这样调用时（假设`input`是 XML 字符串）：

```
var lines = ParseFreePlace(input, "54");
foreach (var line in lines) Console.WriteLine(line); 
```

它为我返回了这个：

```
r=1;p=1;f=0;l=54;
r=1;p=2;f=0;l=54;
r=1;p=3;f=0;l=54;
r=1;p=4;f=0;l=54; 
```

# java - 使用 FFT 进行频谱分析，基频推导

> ID：10583067
> 
> 赞同：1
> 
> 时间：2012-05-14T12:11:59.417
> 
> 标签：java, signal-processing, fft, analysis, spectrum

我需要对一个简单的 wav 文件进行光谱分析。我已经做过的事情：

将文件读入字节数组：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
byte[] buffer = new byte[1024];
int bytesRead = 0;

while ((bytesRead = audioStream.read(buffer)) != -1) {
    baos.write(buffer, 0, bytesRead);
}

fileByteArray = baos.toByteArray(); 
```

然后我将其转换为真实值（双打）。我已经将样本值存储在 double[] 数组中。

如何对这些样本进行 FFT + 估计基频？

使用[JTranforms](https://sites.google.com/site/piotrwendykier/software/jtransforms)库我尝试了这样的事情：

```
DoubleFFT_1D fft = new DoubleFFT_1D(reader.getSpectrum().getYvalues().length);
double[] x = reader.getSpectrum().getYvalues();
double[] frequencyArray = new double[x.lenght/2];
double[] amplitudeArray = new double[x.lenght/2];
fft.realForward(x);
int i=0;
for (int j = 0; j < x.length-2; j += 2) {
    i++;
    this.frequencyArray[i] = i;
    this.amplitudeArray[i] = Math.sqrt(Math.pow(doub[j],2) + Math.pow(doub[j + 1],2));
} 
```

这是对的吗？

感谢所有建议；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:36:18.653

您应该使用可以通过 FFT 有效计算的**自相关：**

```
DoubleFFT_1D fft = new DoubleFFT_1D(reader.getSpectrum().getYvalues().length);
DoubleFFT_1D ifft = new DoubleFFT_1D(reader.getSpectrum().getYvalues().length);

fft.realForward(x);
for (int i = 0; i < x.length/2; i++) {
    x[2*i] = Math.sqrt(Math.pow(x[2*i],2) + Math.pow(x[2*i+1],2));
    x[2*i+1] = 0;
}
ifft.realInverse(x);
for (int i = 1; i < x.length; i++)
    x[i] /= x[0];
x[0] = 1.0; 
```

此代码为您提供了一个值列表，其中：

`x[i]`: 与 i 班次的相关性

因此，例如，如果 的值很高（接近 1）`x[n]`，则意味着您有一个基本信号周期，即：`n*(1000/sampleRateHz)`毫秒。这相当于频率：`sampleRateHz/(1000*n)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:24:29.200

频率数组中的值需要与采样率和 FFT 的长度相关。

您仍然需要解决确定基频与峰值频率的问题。为此，您可能想要使用音高检测/估计算法，其中有很多（查找有关该主题的研究论文）。

# liferay - Liferay 6.1 Zenlike 主题

> ID：10583071
> 
> 赞同：1
> 
> 时间：2012-05-14T12:12:27.043
> 
> 标签：liferay, liferay-6, breadcrumbs, liferay-velocity, liferay-theme

我正在使用与 tomcat 捆绑的 Liferay 6.1 CE，我部署了 Zenlike 主题 (http://sourceforge.net/projects/lportal/files/Liferay%20Plugins/6.1.0%20GA1/zenlike-theme-6.1.0.1-ce- ga1-20120106155615760.war/download) 在我的门户中使用它。

我的问题是：

1) 我不能像在经典主题中那样添加面包屑导航。

2) 当我添加子页面时，它不会显示在导航菜单中。

3）我还想更改当前页面（用户正在导航的地方）的样式和css修改以使其滚动（与其他样式不同并且在我点击它之前仍然存在）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:54:21.287

1）是由main.css中的以下css引起的

```
#breadcrumbs {
    display: none;
} 
```

2) 菜单不是下拉菜单，因此不会显示子页面。

3）创建一个扩展zen-theme的新主题

[http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/creating-liferay-them-7](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/creating-liferay-them-7)

[如果您之前已经制作过主题，请跳至第 9 点]

# yacc - 使用 lex 和 yacc 生成的代码中的函数

> ID：10583072
> 
> 赞同：0
> 
> 时间：2012-05-14T12:12:27.383
> 
> 标签：yacc, lex

我想为我的时间表应用程序编写一个简约的 XML 解析器。我不想使用任何支持 XML 解析的库或解析器，因为它们对我的使用效率较低（因为我只需要识别几个标签）。因此，我决定使用 lex 和 yacc 编写一个解析器。有什么方法可以直接在我的代码中使用由 lex 和 yacc 创建的 .h 文件中的函数，而不是在 yacc 本身中编写应用程序代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:22:08.437

由您的 lex 和 yacc 生成的程序导出的函数很少。解析器通过调用来调用`yyparse`。它调用`yylex`词法分析器。其他一切都可以在外面。

在 lex 和 yacc 文件本身中有一些解析支持例程是方便和习惯的（由词法分析和解析操作调用的帮助程序，而不是由其他任何东西调用）。但不是应用程序逻辑。（除了非常琐碎的 Yacc 教科书示例。）

# sql - 模拟不同的 SQL 查询

> ID：10583073
> 
> 赞同：3
> 
> 时间：2012-05-14T12:12:27.663
> 
> 标签：sql, oracle

```
SELECT DISTINCT col1, col2 FROM table t ORDER BY col1; 
```

这给了我独特的`col1`&组合`col2`。是否有另一种编写 Oracle SQL 查询的方法来获得`col1`&`col2`记录的唯一组合，而不使用关键字 distinct？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T12:28:12.573

使用作为 DISTINCT 同义词的 UNIQUE 关键字：

```
SELECT UNIQUE col1, col2 FROM table t ORDER BY col1; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T12:15:48.070

我不明白你为什么想要，但你可以做到

```
SELECT col1, col2 FROM table_t GROUP BY col1, col2 ORDER BY col1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T12:38:46.487

Yet another ...

```
select
  col1,
  col2
from
  table t1
where
  not exists (select *
                from table t2
               where t2.col1  = t1.col1 and
                     t2.col2  = t1.col2 and
                     t2.rowid > t1.rowid)
order by
  col1; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-14T12:20:34.387

另一个 - 但过于复杂且有点无用 - 解决方案：

```
select *
from (
   select col1, 
          col2, 
          row_number() over (partition by col1, col2 order by col1, col2) as rn
   from the_table
)
where rn = 1
order by col1 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-14T12:17:08.487

```
select col1, col2
from table
group by col1, col2
order by col1 
```

**或**更不优雅的方式：

```
select col1,col2 from table
UNION
select col1,col2 from table
order by col1; 
```

或者更不优雅的方式：

```
select a.col1, a.col2
from (select col1, col2 from table
UNION
select NULL, NULL) a
where a.col1 is not null
order by a.col1 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-14T12:43:26.653

`UNION`@aF 解决方案的变体。：

**`INTERSECT`**

```
SELECT col1, col2 FROM tableX
INTERSECT
SELECT col1, col2 FROM tableX
ORDER BY col1; 
```

**`MINUS`**

```
SELECT col1, col2 FROM tableX
MINUS
SELECT col1, col2 FROM tableX WHERE 0 = 1
ORDER BY col1; 
```

**`MINUS`**（第二个版本，如果有组，它会比其他版本少返回一行`(NULL, NULL)`）

```
SELECT col1, col2 FROM tableX
MINUS
SELECT NULL, NULL FROM dual
ORDER BY col1; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-14T13:19:02.007

其他 ...

```
select   col1,
         col2
from     (
         select col1,
                col2,
                rowid,
                min(rowid) over (partition by col1, col2) min_rowid
         from   table)
where    rowid = min_rowid
order by col1; 
```

# c# - 使用 ImageMagick.NET 比较图像

> ID：10583075
> 
> 赞同：1
> 
> 时间：2012-05-14T12:12:30.147
> 
> 标签：c#, imagemagick, image-comparison, imagemagick.net

我需要在 c# 中进行“模糊”图像比较 - 我过去曾使用 ImageMagick.NET 进行处理，并且知道它对这项工作有好处。

Image Magick 中有一个比较命令：[http ://www.imagemagick.org/script/compare.php](http://www.imagemagick.org/script/compare.php)

ImageMagick.NET 中有一个 Compare(Image reference) 方法，但它似乎已被大大简化，因此无法获得详细的输出。

我需要能够做到这一点，这样我才能使用阈值匹配图像。我错过了什么 - 如果还没有的话，有没有办法将这些东西放入 ImageMagick.NET 中？（我绝对不是 C++ 开发人员）还是我找错了树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:46:21.560

如果我没有得到您的问题，请原谅我，但[IsImagesEqual](http://www.imagemagick.org/api/compare.php#IsImagesEqual)或[SimilarityImage](http://www.imagemagick.org/api/compare.php#SimilarityImage)不起作用吗？

IsImagesEqual 返回“图像中任何单个像素的标准化最大量化误差。此距离度量标准化为 0 到 1 之间的范围。它与图像中红色、绿色和蓝色值的范围无关。

一个小的归一化均方误差，访问为 image->normalized_mean_error，表明图像在空间布局和颜色上非常相似。”

.NET 绑定中的相应方法是**Image.Compare**，它获取图像并返回布尔值。但是，如果结果为假，则在当前实例的 meanErrorPerPixel、normalizedMaxError 和 normalizedMeanError 上设置平均误差（根据上述指标）。

这三个指标还不足以为您提供“模糊”比较的结果吗？

# java - 3D：什么是硬编码，什么不是

> ID：10583077
> 
> 赞同：-2
> 
> 时间：2012-05-14T12:12:35.403
> 
> 标签：java, 3d, hardcode

我只是想知道我在游戏中硬编码了什么？例如，我是否有每个`Enemy`属性的外部文件等等，或者我是否创建了一个类？

那么我应该编码什么信息/东西，我应该有什么作为.file？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:29:18.787

创建一个属性文件，并在需要该类型的属性时实例化一个 bean。对事物进行硬编码的充分理由并不多。至少，将硬编码的项目变成常量：`public static final int XYZZY = 0;`

话虽如此，我将硬编码以使某些东西工作或进行原型设计。然后我会回过头来概括一下。

# html - document.execCommand() 在 IE 中不起作用

> ID：10583079
> 
> 赞同：0
> 
> 时间：2012-05-14T12:12:47.757
> 
> 标签：html, css

document.execCommand('bold',null,false);

当我在 IE 中尝试时这不起作用，但在 mozilla 中可以正常工作。对于演示打开[http://jsfiddle.net/hqvDT/1/](http://jsfiddle.net/hqvDT/1/)这个链接在 mozilla 中（粗体功能有效）但在 IE 中（粗体功能不起作用）......我猜这个 document.execCommand() 是问题。如果我猜错了，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:15:41.580

仅适用于 IE 的 Win32 平台 试试这个。

[http://goo.gl/FJXGM](http://goo.gl/FJXGM)

# jquery - 如何使用jquery在没有时间间隔的悬停期间停止所有图像的旋转

> ID：10583081
> 
> 赞同：0
> 
> 时间：2012-05-14T12:12:53.163
> 
> 标签：jquery, hover

我需要在不指定时间间隔的情况下使用 jquery 在鼠标悬停中停止多个图像在圆圈中的旋转。我尝试了两种方式。

```
1\. stops the one image using the div id in hover.   
$(document).ready(function() {
    $('#friends2').hover(function() {
                   $(this).stop();  
                     }, function() {
                       moveit(); 
                   });

2\. created a common class id 'a' for images and the stops in hover.  
$(document).ready(function() {
$('.a').hover(function() {
               $(this).stop();  
               }, function() {
                   moveit();
               });
my script as 

  <script type="text/javascript">
    var p = 0;     

    function moveit() {
    p += .01;

    var r = 165;
    var xcenter = 550;
    var ycenter = 300;

    var newLeft = Math.floor(xcenter + (r* Math.cos(p+90)));
    var newTop = Math.floor(ycenter + (r * Math.sin(p+90)));

    var newLeft1 = Math.floor(xcenter + -(r* Math.cos(p+120)));
    var newTop1 = Math.floor(ycenter + -(r * Math.sin(p+120)));

    var newLeft2 = Math.floor(xcenter + (r* Math.cos(p+390)));
    var newTop2 = Math.floor(ycenter + (r * Math.sin(p+390)));

    $('#friends').animate({  
            top: newTop,
            left: newLeft,
        }, 10, function() {
            moveit();
           });
    $('#friends2').animate({
        top: newTop1,
        left: newLeft1,
    },10, function() {
        moveit();
    });
    $('#friends3').animate({
        top: newTop2,
        left: newLeft2,
    },10, function() {
        moveit();
    });
 } 
```

问题是悬停不适用于所有图像..还有其他方法..建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:25:16.273

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            setInterval(function () { moveit(); }, 10);

            $('[id^=friends]').hover(function () {
                $(this).addClass('Stop');
            }, function () {
                $(this).removeClass('Stop');
            });

            var p = 0;

            function moveit() {
                if ($('img.a.Stop').length === 0) {
                    p += .01;
                    var r = 165;
                    var xcenter = 550;
                    var ycenter = 300;

                    var newLeft = Math.floor(xcenter + (r * Math.cos(p + 90)));
                    var newTop = Math.floor(ycenter + (r * Math.sin(p + 90)));

                    var newLeft1 = Math.floor(xcenter + -(r * Math.cos(p + 120)));
                    var newTop1 = Math.floor(ycenter + -(r * Math.sin(p + 120)));

                    var newLeft2 = Math.floor(xcenter + (r * Math.cos(p + 390)));
                    var newTop2 = Math.floor(ycenter + (r * Math.sin(p + 390)));

                    $('#friends1').animate({
                        top: newTop,
                        left: newLeft
                    }, 10);

                    $('#friends2').animate({
                        top: newTop1,
                        left: newLeft1
                    }, 10);

                    $('#friends3').animate({
                        top: newTop2,
                        left: newLeft2
                    }, 10);
                }
            }
        });
    </script>
    <style type="text/css">
    .a
        {
        width:100px; 
        heigth:100px;
        position: relative;
    }
    </style>
</head>
<body>
    <img alt="" class="a" id="friends1" src="http://www.imageurlhost.com/images/uffodkj65ykm87t1twcn.jpg" />
    <br />
    <img alt="" class="a" id="friends2" src="http://www.imageurlhost.com/images/w6ozdx840xmlvgzo6mt4.jpg" />
    <br />
    <img alt="" class="a" id="friends3" src="http://www.imageurlhost.com/images/i0ndbnhlg0zfvnyxrgd.jpg" />
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:23:05.307

```
$("[id^='friends']").on({
    mouseenter: function() {
       $(this).stop();
    },
    mouseleave: function() {
       moveit();
    }
}); 
```

# c# - 如何将一个属性从一个类复制到另一个？

> ID：10583082
> 
> 赞同：0
> 
> 时间：2012-05-14T12:13:02.617
> 
> 标签：c#

```
class person
{
[Required(ErrorMessage = "Please enter the FirstName of person")]
string FirstName{get; set ;}

[Required(ErrorMessage = "Please enter the LastName of person")]
string LastName{get; set ;}
}

class Student
{
string FirstName{get; set ;}
string LastName{get; set ;}
}

Person p = new Person();
Student s = new Student(); 
```

我想将属性从复制`person`到`Student`；怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:15:16.580

您可以使用继承来简化此操作。

```
class Student : Person
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:14:40.337

我假设“属性”实际上是指“财产”......

没有“自动”的方法可以做到这一点，您需要手动复制这些值。

```
Person p = ...
Student s = new Student { FirstName  = p.FirstName, LastName = p.LastName }; 
```

根据上下文，您还可以使用像[AutoMapper这样的对象映射器](https://github.com/AutoMapper/AutoMapper)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:15:19.730

如果`Student`继承`Person`，它将同时具有属性和它们的属性。

```
class Person
{
    [Required(ErrorMessage = "Please enter the FirstName of person")]
    string FirstName { get; set; }

    [Required(ErrorMessage = "Please enter the LastName of person")]
    string LastName { get; set; }
}

class Student : Person
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:18:19.350

你可以像这样使用反射：

```
foreach (var getter in s.GetType().GetProperties())
{
    var newData = getter.GetValue(newProject, null);
    var setter = p.GetType().GetProperty(prop.Name)
    setter.SetValue(p, newData, null);
} 
```

# c++ - C++ 模板和 ODR 规则

> ID：10583085
> 
> 赞同：2
> 
> 时间：2012-05-14T12:13:15.417
> 
> 标签：c++

为什么以下工作`C++`，我认为`ODR`规则会出现在以下代码中

```
typedef char      int8; 
class Sample {
public:
  template <typename T>
  void test( T param){
  }
};

int main() {
  Sample s;
  s.test<char>('a');
  s.test<int8>((int8)'b');
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:21:50.277

因为当模板实例化完成并且编译器摆脱了 typedef 和不必要的强制转换时，您的代码与以下内容完全相同：

```
class Sample {
public:
  void test(char param){
  }
};

int main() {
  Sample s;
  s.test('a');
  s.test('b');
  return 0;
} 
```

您似乎认为 a`typedef`声明了另一种不同的类型，但事实并非如此。它只是一个别名（通常是为了您的方便）。OTOH，当您调用具有不同模板参数的函数模板时，会生成具有不同签名的函数。在这两种情况下都没有违反 ODR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:16:35.247

它两次都在做同样的事情。只是看起来他们不一样。

第一个说它将使用该`char`版本，因此 T 变为`char`.

第二个说它将使用该`int8`版本，因此 T 将成为 an `int8`，这实际上只是 a`char`变相。因此， T 仍然是一个字符，并且在这两种情况下你都传递了一个字符，所以一切都很好。

# iphone - iphone无法删除coredata中的数据

> ID：10583086
> 
> 赞同：0
> 
> 时间：2012-05-14T12:13:26.673
> 
> 标签：iphone, ipad, core-data

在 [managedObjectContext deleteObject:device] 之后；仍在设备对象中显示数据。无法从数据库中删除数据。如何删除数据

```
if (managedObjectContext == nil) 
{ 
    managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
    NSLog(@"After managedObjectContext: %@",  managedObjectContext);
}

NSError *error;

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Reserve" inManagedObjectContext:self.managedObjectContext]; 
[fetchRequest setEntity:entity]; 

//    NSSortDescriptor tells defines how to sort the fetched results
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"number" ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[fetchRequest setSortDescriptors:sortDescriptors];
NSLog(@"sort count%d",[sortDescriptors count]);

fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Root"];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(number = %d)", [sender tag]];

// [fetchRequest setPredicate:predicate];
[fetchedResultsController.fetchRequest setPredicate:predicate];
self.fetchedObjects = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];      
NSLog(@"Count of array::::%d",[fetchedObjects count]);
NSManagedObject *device = [fetchedObjects lastObject];  
NSLog(@"device::::%@",device);

[managedObjectContext deleteObject:device];

 NSLog(@"device::::%@",[fetchedObjects lastObject]); 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:19:59.947

从上下文中删除对象 ( `device`) 不会导致它从前一个结果集 ( `fetchedObjects`) 的末尾自动消失。您获取的数组将包含在获取时存在的任何对象。它不会自动更新自身。

您是否尝试在从上下文中删除对象后再次运行获取请求，然后检查设备是否仍出现在结果集中？此外，如果您真的希望该对象保持被删除状态，那么`save`您的上下文也是一个好主意。

如果需要，您可以向 中添加一个委托，`NSFetchedResultsController`当结果集更改时，它将回调到您的代码中。然后，您可以使用通知作为重新加载阵列的提示。

# primefaces - rowExpansion 中的可滚动数据表 - 搞砸了列宽

> ID：10583088
> 
> 赞同：2
> 
> 时间：2012-05-14T12:13:35.173
> 
> 标签：primefaces

我试图在 rowExpansion 标记内放置一个可滚动的数据表，但生成的数据表很奇怪，如下所示： ![](../Images/de8dfb749b8fc21f0780bad933689ddb.png)

代码：

```
<p:rowExpansion>
<h:panelGrid id="display" columns="2" cellpadding="4"
             styleClass="ui-widget-content"
             columnClasses="label, value">
    <h:outputText value="Registrerad:"/>
    <h:outputText id="registered" value="#{campaignOfferGroupView.formatDate(offerGroup.registerDate)}"/>

    <h:outputText value="Senast ändrad:"/>
    <h:outputText id="changeDate" value="#{campaignOfferGroupView.formatDate(offerGroup.changeDate)}"/>

    <h:outputText value="Ändrad av:"/>
    <h:outputText id="changedBy" value="#{offerGroup.changedBy}"/>
</h:panelGrid>

<p:dataTable var="campaignCode" value="#{campaignOfferGroupView.getCampaignCodesForGroup(offerGroup.id)}"
             scrollable="true" scrollHeight="120">
    <f:facet name="header">
        Kampanjkoder tillhörande kampanjerbjudandegruppen
    </f:facet>

    <p:column headerText="ID">
        #{campaignCode.id}
    </p:column>

    <p:column headerText="Namn">
        #{campaignCode.description}
    </p:column>

    <p:column headerText="Start">
        #{campaignCode.startDate}
    </p:column>

    <p:column headerText="Stop">
        #{campaignCode.stopDate}
    </p:column>
</p:dataTable> 
```

有人知道这是为什么吗？如果我删除可滚动属性，表格看起来很好： ![在此处输入图像描述](../Images/f6dfe9a838aa4901cc20205ba1666c02.png)

顺便说一句，有什么方法可以删除由可滚动 DataTable 创建的灰色空列，如[http://www.primefaces.org/showcase/ui/datatableScrolling.jsf](http://www.primefaces.org/showcase/ui/datatableScrolling.jsf)所示？

编辑：我注意到 ShowCase 使用 style 属性固定了列大小。如果可能的话，我宁愿避免这种情况。

# html - Outlook 2007/2010 中的垂直对齐

> ID：10583090
> 
> 赞同：1
> 
> 时间：2012-05-14T12:13:38.857
> 
> 标签：html, email, outlook, vertical-alignment

我有一个适用于大多数电子邮件运营商的 html 时事通讯，但格式在 Outlook 中被弄乱了。这是电子邮件的一个片段，因为这是唯一正在播放的部分：

```
<td align="left" valign="top" bgcolor="#666f87" style="background: #666f87;">
                                                    <div style="color: #cccccc;">
                                                        <p style="color: #cccccc; font-size: 11px; font-family: arial; font-weight: normal; margin-bottom: 10px; margin-top: 0;"><strong>Social Media:</strong></p>
                                                        <p style="color: #cccccc; font-size: 11px; font-family: arial; font-weight: normal; margin-top: 0; margin-bottom: 5px;">
                                                            <img style="border:0; display: inline-block; margin-right: 5px; vertical-align: middle;" src="facebook.png" alt="Facebook" /><span style="color: #cccccc; font-size: 11px; font-family: arial; font-weight: normal; margin-top: 0;"><a style="color: #cccccc;" href="#" title="Facebook" >Become a fan on Facebook</a></span>    
                                                        </p>
                                                        <p style="color: #cccccc; font-size: 11px; font-family: arial; font-weight: normal; margin-top: 0; margin-bottom: 5px;">
                                                            <img style="border:0; display: inline-block; margin-right: 5px; vertical-align: middle;" src="twitter.png" alt="Twitter" /><span style="color: #cccccc; font-size: 11px; font-family: arial; font-weight: normal; margin-top: 0;"><a style="color: #cccccc;" href="#" title="Twitter" >Follow us on Twitter</a></span>    
                                                        </p>
                                                        <p style="color: #cccccc; font-size: 11px; font-family: arial; font-weight: normal; margin-top: 0; margin-bottom: 5px;">
                                                            <img style="border:0; display: inline-block; margin-right: 5px; vertical-align: middle;" src="youtube.png" alt="Youtube" /><span style="color: #cccccc; font-size: 11px; font-family: arial; font-weight: normal; margin-top: 0;"><a style="color: #cccccc;" href="https://www.google.co.uk/" title="Youtube" >Watch us on Youtube</a></span>    
                                                        </p>
                                                    </div>
                                                </td> 
```

“垂直对齐：中间；” 样式在 Outlook 2007/2010 中不起作用，并且图像旁边的文本显示在图像下方。有谁知道使文本与图像中间对齐的解决方法？它在其他电子邮件客户端中运行良好。只是 Outlook 引起了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:22:20.790

我从来没有成功在 Outlook 中使用“垂直对齐”语句。我为破解这个做了表，但这并不容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T13:02:55.410

尝试这个

```
<td align="left" valign="top" bgcolor="#666f87" style="background: #666f87;">
<table border="0" cellpadding="0" cellspacing="0" align="left" >
    <tr>
        <td align="left" colspan="3">
            <font style="color: #cccccc; font-size: 11px; font-family: arial; font-weight: normal; margin-bottom: 10px; margin-top: 0;">
                <strong>Social Media:</strong>
            </font>
        </td>
    </tr>
    <tr>
        <td align="left">
            <img style="border:0; display: inline-block;" src="facebook.png" alt="Facebook" />
        </td>
        <td width="5" />
        <td align="left">
            <span style="color: #cccccc; font-size: 11px; font-family: arial; font-weight: normal; margin-top: 0;">
                <a style="color: #cccccc;" href="#" title="Facebook" >
                Become a fan on Facebook
              </a>
        </span>
        </td>
    </tr>
    <tr>
        <td align="left" colspan="3" height="5" />
    </tr>
    <tr>
        <td align="left" valign="middle">
             <img style="border:0; display: inline-block;" src="twitter.png" alt="Twitter" />
        </td>
        <td width="5" />
        <td align="left">
            <span style="color: #cccccc; font-size: 11px; font-family: arial; font-weight: normal; margin-top: 0;">
                <a style="color: #cccccc;" href="#" title="Twitterk" >
                    Follow us on Twitter
                </a>
            </span>
        </td>
    </tr>
    <tr>
        <td align="left" colspan="3" height="5" />
    </tr>
    <tr>
        <td align="left" valign="middle">
             <img style="border:0; display: inline-block;" src="youtube.png" alt="Youtube" />
        </td>
        <td width="5" />
        <td align="left">
            <span style="color: #cccccc; font-size: 11px; font-family: arial; font-weight: normal; margin-top: 0;">
                <a style="color: #cccccc;" href="https://www.google.co.uk/" title="Youtube" >
                   Watch us on Youtube
                </a>
            </span>
        </td>
    </tr>
</table> 
```

# .net - typeof(TModels) 返回 RuntimeType

> ID：10583094
> 
> 赞同：2
> 
> 时间：2012-05-14T12:13:46.947
> 
> 标签：.net, generics, reflection, types, system.type

我需要一种获取对象或类（在本例中为泛型类）的“真实类型”的方法。现在我得到的只是一个 RuntimeType 。我已经阅读了整个互联网，但我就是不能找到不只是返回 RuntimeType 的答案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:55:39.763

`System.RuntimeType`是实现抽象类的内部具体`System.Type`类。请参阅C# 中 System.Type 和 System.RuntimeType 之间有[什么区别](https://stackoverflow.com/q/5737840/385844)[？](https://stackoverflow.com/a/5737947/385844)进行良好的讨论。所以，你看，正如 svick 在他的评论中所说，*是*真正的类型。`RuntimeType`

 *你找不到不返回`RuntimeType`对象的方法，因为`GetType()`总是返回一个`RuntimeType`对象。您将永远无法获得`Type`不是某个派生类的实例的对象，因为`Type`它是抽象的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:25:35.377

propertyinfo.PropertyType.GetGenericArguments() 应该给你一个通用参数的列表。
这是一个列表，因为一个类可以有超过 1 个泛型。
更多信息在这里：http:
[//msdn.microsoft.com/en-us/library/ms173128.aspx](http://msdn.microsoft.com/en-us/library/ms173128.aspx)
和这里
[http://msdn.microsoft.com/en-us/library/b8ytshk6.aspx](http://msdn.microsoft.com/en-us/library/b8ytshk6.aspx)*

# xcode - Xcode - 在所有文件中搜索文本

> ID：10583099
> 
> 赞同：99
> 
> 时间：2012-05-14T12:14:04.330
> 
> 标签：xcode

有没有办法搜索所有 Xcode 项目文件？我知道我可以用 finder 在文件中找到一些文本，但是用 Xcode 找到一些东西会很有帮助。当我按`cmd`+时`f`，我只能在当前显示文件中***查找***或***查找和替换。***

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-05-14T12:17:48.097

使用 `cmd` ++进行完整的`shift`Xcode`f`搜索。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-14T12:17:47.663

在编辑器的左侧，您有一个放大镜。那里有一个搜索框。这应该够了吧。（它被称为`search navigator`）

`cmd + shift + f`也打开它。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-10-24T15:35:09.080

# 只需从 UI 中执行此操作，只需单击一下

默认情况下，这将在整个项目中搜索包含您输入的特定字符串的任何文件。

[![在此处输入图像描述](../Images/c6c5410b4e13ce5829552d39f2fad9a2.png)](https://i.stack.imgur.com/C4Nxj.gif)

# 从这一点开始，你可以开始做更多的事情，比如全部替换，等等，像这样

[![在此处输入图像描述](../Images/2f431a2fada3931853652c99964d879e.png)](https://i.stack.imgur.com/y2dUr.gif)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-25T08:24:52.817

cmd + shift + f

然后按键盘的返回键。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-03T10:01:47.967

使用`Command + 3`最少的键盘快捷键或`Command + Shift + f`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-07T17:22:07.860

在查找使用中：查找 > 文本 > 包含

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-20T16:52:36.067

右键单击任何文本并选择“在工作区中查找选定文本”

根据我的经验， **cmd + shift + f**需要**cmd + c**事先填充搜索词。所以，我去搜索所有文件中的文本就是执行上述操作。

# asp.net - 按客户请求管理 Web 软件版本

> ID：10583101
> 
> 赞同：0
> 
> 时间：2012-05-14T12:14:11.757
> 
> 标签：asp.net, wcf, iis, iis-7, web

我需要一些关于 Web 应用程序部署问题的咨询。假设我的 Web 服务器上安装了许多 Web 应用程序（WCF 服务、ASP.NET 站点、Silverlight 应用程序、静态 Web 应用程序以及可以在 IIS 上托管的东西）。

我的主要问题是，我需要为我的客户管理这些应用程序版本。示例：今天我有版本 1 的 Wcf 服务，所有客户端都可以使用，下个月后我发布版本 2，我需要在 IIS 上单独安装它并开始将客户端一个一个移动到它。我拥有的任何应用程序类型都可能发生同样的事情。

有没有一种现代的方法可以做到这一点。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:18:02.533

查看 Nuget 并设置您的客户可以使用的提要。完整的版本控制功能包括：

[http://nuget.codeplex.com/](http://nuget.codeplex.com/)

[http://www.codersbarn.com/post/2012/05/09/An-Introduction-to-Nuget.aspx](http://www.codersbarn.com/post/2012/05/09/An-Introduction-to-Nuget.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:18:39.710

如果您部署您的 WCF 服务版本（这样 2 个版本可以共存），您可以利用应用程序配置文件来管理每个单独的应用程序指向的服务。因此，在部署新版本的服务后，您只需浏览每个应用程序的 web.config 文件并在需要时修改它以指向新服务。

# c# - 逐个文件读取目录文件

> ID：10583105
> 
> 赞同：0
> 
> 时间：2012-05-14T12:14:19.197
> 
> 标签：c#, .net-2.0

是否可以一个接一个地从目录中读取文件？

我寻找类似的东西：

```
while (File file = Directory.GetFile(path)) {
    //
    // Do something with file
    //
} 
```

**[更新]**

我已经知道 GetFiles() 但我正在寻找一个一次返回一个文件的函数。

EnumerateFiles() 是 .Net4.x，如果有就好了，但我使用的是 .Net2.0。对不起，我没有提到。

**（标签已更新）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:17:11.677

您可以枚举文件名：

```
foreach(string fileName in Directory.EnumerateFiles(path)) {

    // Do something with fileName - using `FileInfo` or `File`

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:20:19.993

试试这个...

```
 foreach (var filePath in Directory.GetFiles(path))
            {
                var text = File.ReadAllText(filePath);
                // Further processing
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:17:13.620

```
string[] arFiles = Directory.GetFiles(@"C:\");

foreach (var sFilename in arfiles)
{
    // Open file named sFilename for reading, do whatever
    using (StreamReader sr = File.OpenText(sFilename )) 
    {
        string s = "";
        while ((s = sr.ReadLine()) != null) 
        {
            Console.WriteLine(s);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:17:43.923

```
foreach (var file in Directory.EnumerateFiles(path))
{
    var currFileText = File.ReadAllText(file);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T12:18:10.583

[`Directory.GetFiles(path)`](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)方法呢？

```
foreach(String fileName in Directory.GetFiles(path))
{
    FileInfo file = new FileInfo(fileName);
} 
```

# java - java随机生成器

> ID：10583111
> 
> 赞同：0
> 
> 时间：2012-05-14T12:14:32.943
> 
> 标签：java, random

我想生成一些随机双精度并将它们添加到 ArrayList 中，但似乎 nextDouble() 函数每次都返回一个唯一的双精度，而不是一个新的

```
Random r = new Random();
ArrayList<Pair> centers = new ArrayList<Pair>();  
ArrayList<ArrayList<Pair>> classes = new ArrayList<ArrayList<Pair>>();  
for (int i=0 ; i < 100; i++) {
    // Random r = new Random ();
    // System.out.println (r.nextDouble ()) ;
    double a = r.nextDouble () * 10;
    double b = r.nextDouble () * 10;
    centers.add (new Pair (a, b ));
    System.out.println (centers);
} 
```

谁能帮我这个？这是优化错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:22:27.763

我运行了这段代码：

```
public static void main(String[] args) {
  Random r = new Random();
  ArrayList<Pair> centers = new ArrayList<Pair>();
  for(int i = 0; i < 100; i++ ) {
    double a = r.nextDouble() * 10;
    double b = r.nextDouble() * 10;
    centers.add( new Pair(a, b) );
  }
  System.out.println(centers);
} 
```

这是输出：

```
[(8.08, 8.06), (9.97, 1.83), (3.83, 3.19), (2.97, 2.51), (9.40, 2.88), (7.78, 2.59), (1.67, 9.07) ... 
```

这不是你想要的吗？仅供参考，这是`Pair`我使用的课程：

```
class Pair {
  private final double a, b;
  Pair(double a, double b) { this.a = a; this.b = b; }
  @Override public String toString() { return String.format("(%.2f, %.2f)", a, b); }
} 
```

# c# - 是否有 LINQ 扩展或（一组合理/有效的 LINQ 扩展）确定集合是否至少具有“x”元素？

> ID：10583115
> 
> 赞同：8
> 
> 时间：2012-05-14T12:14:50.087
> 
> 标签：c#, .net, linq, enumeration, performance

我的代码需要知道集合不应为空或仅包含一项。

一般来说，我想要表单的扩展：

`bool collectionHasAtLeast2Items = collection.AtLeast(2);`

我可以轻松编写扩展，枚举集合并递增索引器，直到达到请求的大小或用完元素，但是 LINQ 框架中是否已经存在可以执行此操作的内容？我的想法（按我想到的顺序）是：

`bool collectionHasAtLeast2Items = collection.Take(2).Count() == 2;`或者

`bool collectionHasAtLeast2Items = collection.Take(2).ToList().Count == 2;`

这似乎可行，尽管没有定义（在文档中）[Enumerable.Take Method](http://msdn.microsoft.com/en-us/library/bb503062.aspx)，但它似乎符合人们的预期。

这不是最有效的解决方案，要么枚举一次以获取元素，然后再次枚举以计算它们，这是不必要的，或者枚举一次以获取元素，然后构造一个列表以获得不是枚举器的计数属性-y，因为我实际上并不想要该列表。

这并不漂亮，因为我总是要做出两个断言，首先是“x”，然后检查我是否真的收到了“x”，这取决于未记录的行为。

或者我可以使用：

`bool collectionHasAtLeast2Items = collection.ElementAtOrDefault(2) != null;`

但是，这在语义上并不明确。也许最好的办法是用一个方法名来包装它，这意味着我想要的。我假设这将是有效的，我没有反映在代码上。

其他一些想法正在使用`Last()`，但我明确不想枚举整个集合。

或者也许`Skip(2).Any()`，在语义上也不完全明显，但比 更好`ElementAtOrDefault(2) != null`，尽管我认为它们会产生相同的结果？

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:16:47.917

你可以使用`Count() >= 2`，如果你序列实现`ICollection`？

* * *

在幕后，`Enumerable.Count()`扩展方法检查循环执行下的序列`ICollection`。如果确实如此，则`Count`返回属性，因此目标性能应该是 O(1)。

因此`((IEnumerable<T>)((ICollection)sequence)).Count() >= x`也应该有 O(1)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T12:31:16.910

```
public static bool AtLeast<T>(this IEnumerable<T> source, int count)
{
    // Optimization for ICollection<T>
    var genericCollection = source as ICollection<T>;
    if (genericCollection != null)
        return genericCollection.Count >= count;

    // Optimization for ICollection
    var collection = source as ICollection;
    if (collection != null)
        return collection.Count >= count;

    // General case
    using (var en = source.GetEnumerator())
    {
        int n = 0;
        while (n < count && en.MoveNext()) n++;
        return n == count;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T12:27:48.877

您可以使用`Count`，但如果性能是一个问题，使用 . 会更好`Take`。

```
bool atLeastX = collection.Take(x).Count() == x; 
```

由于`Take`（我相信）使用延迟执行，它只会遍历一次集合。

abatishchev 提到这`Count`是 O(1) with `ICollection`，所以你可以做这样的事情并获得两全其美。

```
IEnumerable<int> col;
// set col
int x;
// set x
bool atLeastX;
if (col is ICollection<int>)
{
    atLeastX = col.Count() >= x;
}
else
{
    atLeastX = col.Take(x).Count() == x;
} 
```

你也可以使用`Skip/Any`，事实上我敢打赌它会比`Take/Count`.

# java - DB2 和 Jasper 报告中的 COALESCE 问题

> ID：10583118
> 
> 赞同：0
> 
> 时间：2012-05-14T12:14:53.157
> 
> 标签：java, sql, jasper-reports, db2, coalesce

我有一个查询，其中我从通过子查询形成的表中提取列的总和。

行中的一些东西：

```
select temp.mySum as MySum from (select sum(myColumn) from mySchema.myTable) temp; 
```

但是，当 temp.mySum 为空时，我不希望 MySum 为空。相反，当 temp.mySum 为空时，我希望 MySum 携带字符串“值不可用”。

因此，我尝试以下列方式使用合并：

```
select coalesce(temp.mySum, 'value not available') as MySum from (select sum(myColumn) from mySchema.myTable) temp; 
```

但是上面的查询抛出错误消息：

```
Message: The data type, length or value of argument "2" of routine "SYSIBM.COALESCE" is incorrect. 
```

此消息是由于下面第一个答案中提到的 coalesce 函数的参数 1 和 2 之间的数据类型不兼容。

但是，我在 Jasper 中直接使用此查询将值发送到 Excel 工作表报告：

```
hashmap.put("myQuery", this.myQuery);
JasperReport jasperReportOne = JasperCompileManager.compileReport(this.reportJRXML);
JasperPrint jasperPrintBranchCd = JasperFillManager.fillReport(jasperReportOne , hashmap, con);
jprintList.add(jasperPrintOne);
JRXlsExporter exporterXLS = new JRXlsExporter();
exporterXLS.setParameter(JRExporterParameter.JASPER_PRINT_LIST, jprintList);
exporterXLS.exportReport(); 
```

在 Excel 工作表中，当值不可用时，我将值设为 null。我想在报告中显示“价值不可用”。

这怎么可能实现？

谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:17:17.327

合并的论点必须兼容。如果第一个是数字（`mySum`可能是）而第二个是字符串，则情况并非如此。

例如，下面的[PubLib doco](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2.doc.sqlref/rch2bas.htm)有一个表格，表明各种类型之间的兼容性，至少对于我使用的 DB2（大型机）而言 - 毫无疑问，iSeries 和 LUW 变体也有类似的限制。

您可以尝试类似的方法`coalesce(temp.mySum, 0)`，或者将第一个参数转换为带有类似`char()`. 这些中的任何一个都应该起作用，因为它们使两个参数兼容。

# iphone - UIImageView 只能旋转一次

> ID：10583119
> 
> 赞同：1
> 
> 时间：2012-05-14T12:14:55.933
> 
> 标签：iphone, ios, uiimageview, rotation

我有一些代码会在用户触摸图像时导致 a`UIImageView`旋转 180 度。不幸的是，当用户再次触摸它时，什么也没有发生。我假设确定图像已经旋转了 180 度，这可能就是它不再移动的原因。我该如何解决这个问题，谢谢。

```
-(void) spinSun
{
    [UIView animateWithDuration:2.0f animations:^{
        imgSun.transform = CGAffineTransformMakeRotation(-3.142);
    } completion:^(BOOL finished) {

    }];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T12:18:41.893

您必须创建一个新的转换矩阵：

```
imgSun.transform = CGAffineTransformRotate(imgSun.transform, -3.142) 
```

# linux - 在 redhat 5 机器上构建 Python3

> ID：10583124
> 
> 赞同：1
> 
> 时间：2012-05-14T12:15:18.677
> 
> 标签：linux, python-3.x, redhat

我正在尝试在 RHEL 5.7 机器上构建 Python3，我成功地构建了 Python 3.2.2，其中：

```
# Install required build dependencies
yum install openssl-devel bzip2-devel expat-devel gdbm-devel readline-devel sqlite-devel

# Fetch and extract source. Please refer to http://www.python.org/download/releases
# to ensure the latest source is used.
wget http://www.python.org/ftp/python/3.2/Python-3.2.tar.bz2
tar -xjf Python-3.2.tar.bz2
cd Python-3.2

# Configure the build with a prefix (install dir) of /opt/python3, compile, and install.
./configure --prefix=/opt/python3
make 
```

但我在 Python 3.2.3 上失败了（？）：

```
Failed to build these modules:
_posixsubprocess 
```

这是一个应该困扰我的问题吗？我该如何构建它？我找到[了这个补丁](http://python.6.n6.nabble.com/issue14359-posixsubprocess-o-compilation-error-on-CentOS-5-8-td4629652.html)，但它没有包含在我从网站上获得的 Python 3.2.3 的源代码中......
在我的源代码上应用这个补丁，并没有解决问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:20:13.487

好吧，我已经在 serverfault.com 上回答了我自己的问题：[在 Red Hat 5 机器上构建 python 3.2.2](https://serverfault.com/questions/388865/building-python3-on-a-redhat-5-machine/389622#389622)

您需要应用[此处找到的补丁](http://python.6.n6.nabble.com/issue14359-posixsubprocess-o-compilation-error-on-CentOS-5-8-td4629652.html)。

然后你就可以成功构建 Python 3。

# c# - 避免 C# 数组中重复操作的最有效方法是什么？

> ID：10583128
> 
> 赞同：11
> 
> 时间：2012-05-14T12:15:20.973
> 
> 标签：c#, arrays

我需要计算数组中每对点之间的距离，并且每对只需要计算一次。我想出的方法是否足够有效或有更好的方法？这是一个示例，以及解释我想要获得的内容的视觉效果：

![代码用途图](../Images/eda05908dde1f39098de1c15c0416d23.png)

例如，首先获取分段 AB、AC、AD；然后是 BC、BD；最后，CD。换句话说，我们希望 AB 在我们的新数组中，但不是 BA，因为它会是重复的。

```
var pointsArray = new Point[4];

pointsArray[0] = new Point(0, 0);
pointsArray[1] = new Point(10, 0);
pointsArray[2] = new Point(10, 10);
pointsArray[3] = new Point(0, 10);

// using (n * (n-1)) / 2 to determine array size
int distArraySize = (pointsArray.Length*(pointsArray.Length - 1))/2;

var distanceArray = new double[distArraySize];

int distanceArrayIndex = 0;

// Loop through points and get distances, never using same point pair twice
for (int currentPointIndex = 0; currentPointIndex < pointsArray.Length - 1; currentPointIndex++)
{
    for (int otherPointIndex = currentPointIndex + 1;
            otherPointIndex < pointsArray.Length;
            otherPointIndex++)
    {
        double xDistance = pointsArray[otherPointIndex].X - pointsArray[currentPointIndex].X;
        double yDistance = pointsArray[otherPointIndex].Y - pointsArray[currentPointIndex].Y;

        double distance = Math.Sqrt(Math.Pow(xDistance, 2) + Math.Pow(yDistance, 2));

        // Add distance to distanceArray
        distanceArray[distanceArrayIndex] = distance;

        distanceArrayIndex++;
    }
} 
```

由于这将用于数千个点，我认为一个精确尺寸的数组会比使用任何类型的 IEnumerable 更有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:24:14.080

如果您有 n 个点，则所有点对的集合包含 n * (n-1) / 2 个元素。这就是您正在执行的操作的数量。我要做的唯一更改是使用 Parallel.ForEach() 并行执行操作。

像这样的东西（需要调试）

```
 int distArraySize = (pointsArray.Length * (pointsArray.Length - 1)) / 2;

        var distanceArray = new double[distArraySize];

        int numPoints = pointsArray.Length;

        Parallel.ForEach<int>(Enumerable.Range(0, numPoints - 2),
            currentPointIndex =>
            {
                Parallel.ForEach<int>(Enumerable.Range(currentPointIndex + 1, numPoints - 2),
                    otherPointIndex =>
                    {
                        double xDistance = pointsArray[otherPointIndex].X - pointsArray[currentPointIndex].X;
                        double yDistance = pointsArray[otherPointIndex].Y - pointsArray[currentPointIndex].Y;
                        double distance = Math.Sqrt(xDistance * xDistance + yDistance * yDistance);
                        int distanceArrayIndex = currentPointIndex * numPoints - (currentPointIndex * (currentPointIndex + 1) / 2) + otherPointIndex - 1;
                        distanceArray[distanceArrayIndex] = distance;
                    });
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:30:12.570

过去我不得不执行这样的操作，我认为您对大量紧缩操作​​的直接反应是“必须有更快或更有效的方法来执行此操作”。我能想到的唯一其他甚至远程可行的解决方案是散列这对并将这个散列放在一个 HashSet 中，然后在进行距离计算之前检查 HashSet。但是，这最终可能会导致性能更差。

你的解决方案很好。正如 j0aqu1n 指出的那样，您可能不得不以一种或另一种方式处理数字，在这种情况下，您永远不会两次执行相同的计算。

看看是否有其他解决方案将会很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:34:59.907

对我来说看起来不错，但你没有错误吗？

每个内部迭代都将几乎完全覆盖前一个迭代，除了它的第一个位置。不会吗？

也就是说，在`distanceArray[otherPointIndex]`otherPointIndex 中从`currentPointIndex + 1`to获取值`pointsArray.Length - 1`。
在您的示例中，这将在 [0-3] 而不是 [0-6] 范围内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:42:33.740

我认为，使用它`xDistance*xDistance`而不是`Math.Pow(xDistance, 2)`. 除此之外，如果你真的总是需要计算所有的距离，那就没有太大的改进空间了。如果，OTOH，您有时不需要计算全部，您可以在需要时懒惰地计算距离。

# java - LWGJL。图形闪烁

> ID：10583129
> 
> 赞同：0
> 
> 时间：2012-05-14T12:15:23.127
> 
> 标签：java, opengl, lwjgl

`lwgjl`我以这种方式在我的应用程序中初始化 OpenGL ：

```
glEnable(GL_TEXTURE_2D)
glMatrixMode(GL_PROJECTION)
glLoadIdentity()
glOrtho(0, displayWidth, 0, displayHeight, -1, 1)
glMatrixMode(GL_MODELVIEW)
glClearColor(clearColor.r, clearColor.g, clearColor.b, clearColor.a) 
```

当我使用`slick`库和`UnicodeFont`或`AngelCodeFont`（按`font.drawString(...)`）绘制文本时。文本正在绘制（翻转垂直），但文本后面的其他图像正在闪烁。

如何避免闪烁并正确绘制文字？OpenGL初始化可能有问题吗？`glDisable(GL_LIGHTING)`我也试过`glEnable(GL_BLEND)`了`glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)`。没有改变。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:14:36.047

解决了！下一个代码对我有用：

初始化 OpenGL：

```
 glDisable(GL_DEPTH_TEST)
    glDisable(GL_LIGHTING)

    glEnable(GL_BLEND)
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA) 
```

绘制文字：

```
 glEnable(GL_TEXTURE_2D)
    font.drawString(x, y, text, color)
    glDisable(GL_TEXTURE_2D) 
```

# php - $_GET['variable'] 转换成数组变量

> ID：10583139
> 
> 赞同：2
> 
> 时间：2012-05-14T12:15:45.703
> 
> 标签：php, arrays, get

好的，所以我有一个以三个值命名的数组：

```
$tutorials = array('introduction', 'get_started', 'basics') 
```

我也有一个链接，例如：

```
mysite.com/?tutorials=get_started 
```

所以上面的链接似乎是 $tutorials 的第一个值，但是如果我希望我的锚的 href 像下一个值一样呢？

```
<a href="?tutorials=basics">Next</a> 
```

这有什么捷径吗？因为我的数组不仅是 3，而且是 20，我不想一个一个地编辑它们。

我在这里要做的是下一个和上一个链接。请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:18:11.823

获取数组中当前项的索引，加 1 得到下面教程的索引。

不要忘记检查您是否已经在阵列的最新项目上。

```
<?php

$tutorials = array('introduction', 'get_started', 'basics');

$index = array_search($_GET['tutorials'], $tutorials);

if ($index === FALSE) {
    echo 'Current tutorial not found';
} else if ($index < count($tutorials) - 1) {
    echo '<a href="?tutorials=' . $tutorials[$index+1] . '">Next</a>';
} else {
    echo 'You are already on the latest tutorial available';
} 
```

[手动的](http://us.php.net/manual/en/function.array-search.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:21:25.890

像这样的东西应该工作：

```
<?php

   $value = $_GET['tutorials']; // get the current

   // find it's position in the array
   $key = array_search( $value, $tutorials );

   if( $key !== false ) {
      if( $key > 0 ) // make sure previous doesn't try to search below 0
          $prev_link = '?tutorials=' . $tutorials[$key-1];

      if( $key < count( $tutorials ) ) // Make sure we dont go beyond the end of the array
          $next_link = '?tutorials=' . $tutorials[$key+1];
   } else {
      // Some logic to handle an invalid key (not in the array)
   }

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:21:27.107

使用[array_search()](http://php.net/manual/en/function.array-search.php)获取密钥并将密钥加/减一以获取下一个/上一个链接：

```
$key = array_search($_GET['tutorials'], $tutorials); 
```

# php - 同时搜索和替换两次

> ID：10583141
> 
> 赞同：0
> 
> 时间：2012-05-14T12:15:50.740
> 
> 标签：php, str-replace

这是我的代码：

```
$css = ".block{float:right; text-align:right;padding:0 20px 0 0; margin:0 0 0 0;}.block h2{font-size:24px; color:#2b7538; font-weight:normal; text-align:right; padding:10px; margin:10px 0 0 0; text-align:left}.block  p{line-height:30px;margin-top:20px; float:left}";

$search = array("float:left","text-align:left","float:right","text-align:right");
$replace = array("float:right","text-align:right","float:left","text-align:left");

echo str_replace($search, $replace, $css); 
```

如何同时替换从左到右和从右到左？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:19:33.220

您需要暂时使用不同的值。在这个例子中，我使用了“xyz”，使用一些更明显的东西。

*   将左替换为 xyz
*   用左替换右
*   用右替换 xyz

这是一些代码，在一个循环中以便于重复，应该（我没有测试过）相互替换左右值。

```
$css = ".block{float:right; text-align:right;padding:0 20px 0 0; margin:0 0 0 0;}.block h2{font-size:24px; color:#2b7538; font-weight:normal; text-align:right; padding:10px; margin:10px 0 0 0; text-align:left}.block  p{line-height:30px;margin-top:20px; float:left}";

$from_to = array(
    'left'  => 'xyz',
    'right' => 'left',
    'xyz'   => 'right'
);

foreach ($from_to as $from => $to)
{

    $search = array("float:" . $from, "text-align:" . $from);
    $replace = array("float:" . $to, "text-align:" . $to);

    $css = str_replace($search, $replace, $css);

}

echo $css; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:37:18.360

```
$search  = array('right', 'left', 'xxx');
$replace = array('xxx', 'right', 'left');
$subject = 'right then left then right';
$return = str_replace($search, $replace, $subject); 
```

返回：

> $subject : 从右到左再到右
> 
> $return : 左然后右然后左

# wpf - ViewModel 属于哪个程序集？

> ID：10583145
> 
> 赞同：1
> 
> 时间：2012-05-14T12:16:19.927
> 
> 标签：wpf, mvvm

我只是在 WPF 应用程序中学习 MVVM 模式的基本原理，我可以想象这听起来像是一个非常愚蠢的问题，但无论如何这里都是：

我已经在一个程序集中有一个模型，这是一个简单的类库。在另一个程序集中，我在 xaml 中创建了一个简单的视图。现在所有的书都说了同样的话：用视图模型将它们链接在一起。我的问题是，这个视图模型属于哪里：

*   它或多或少是视图的一部分，是否应该在该组件中？
*   视图模型是否意味着通用，因此它与模型组件一起属于？
*   视图模型是否有自己的程序集？

我知道 MVVM 模式只是一个设计指南，而不是一套严格的规则，但我觉得以正确的方式学习东西会更好。

**编辑**

后续问题：视图模型是否意味着可重用？我可以想象一个场景，如果您可以为 WPF 桌面应用程序和 Silverlight Web 应用程序使用相同的视图模型，那将会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:20:22.660

它有助于构建视图，因此它属于视图程序集。

可以这样想：你能把你的模型组件用在不同风格的应用程序中，例如 Windows 服务或 Web 应用程序吗？是否有任何与该程序集中的应用程序风格无关的内容？如果答案是肯定的和否定的，那么您已经为自己构建了一个独立于用户界面类型的有用的可重用组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:18:56.917

根据项目的大小，我将 ViewModel 放在与视图相同的程序集中，或者放在它们自己的程序集中，但从不放在模型程序集中。该模型不应包含与 UI 相关的任何内容。

# python - 获取具有 0 或 1 序列的二进制列表的开始和结束 1 的索引

> ID：10583153
> 
> 赞同：1
> 
> 时间：2012-05-14T12:16:37.467
> 
> 标签：python

我有一个带有二进制信息的 python 列表，该列表具有 1 序列或 0 序列，例如：

```
event = [0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1] 
```

如何存储开始 1 和结束 1 的索引值？

例如：

如果`event = [0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1]`那么`result = [2,5,8,11]`

**EDIT2**我意识到理想情况下结果应该是 result_start=[2,8] result_end=[5,11]，就像lazr 解决方案一样，这样我们就可以了解只有一个 1 所在的位置。例如。event=[0,0,1,1,0,1]，会为最后一个 1 生成错误的列表。感谢您尝试所有！

**EDIT1：**我需要第一个和最后一个 1 的索引，但从第一个到最后一个 1。

我尝试将其编码如下：

```
k=False
j=0
result=[]
for i in event:
   if i==1:
       k=True
       result.append(k)
   else:
       k=False 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:47:08.440

```
event = [0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1,
    1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1]
from itertools import izip_longest

def pair_iterator(event):
    event = [0] + event
    return enumerate(izip_longest(event, event[1:], fillvalue=0), -1)

def one_ranges(event):
    start = [i + 1 for i, pair in pair_iterator(event) if pair == (0, 1)]
    end = [i for i, pair in pair_iterator(event) if pair == (1, 0)]
    return zip(start, end)

print one_ranges(event) 
```

**编辑：**

还要找到从索引 0 开始的范围。

创建`one_ranges`返回`(start, end)`元组列表的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:19:33.720

正如我看到你真正想要的，你可以做这样的事情：

```
result = []
is_one = False
for i in range(len(event)):
    if not is_one and event[i] == 1: #Starting chain of ones
        is_one = True
        result.append(i)
    elif is_one and event[i] == 0: #Finished a chain of ones
        is_one = False
        result.append(i-1)
if is_one: #The list finished with a chain of ones
    result.append(len(event)-1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T12:53:54.780

```
>>> event = [0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1]
>>> event = [0] + event + [0]
>>> [i-1 for i in xrange(1,len(event)-1) if event[i]==1 and (event[i+1]==0 or event[i-1]==0)]
[2, 5, 8, 11] 
```

我们在列表前添加和附加，以确保我们找到列表`ones`开头和/或结尾的极端情况。

# c# - 访问 OTF 字体

> ID：10583155
> 
> 赞同：8
> 
> 时间：2012-05-14T12:16:49.587
> 
> 标签：c#, fonts, truetype

我尝试使用系统上安装的**OTF**字体，但失败了：

```
FontFamily family = new FontFamily(name_for_my_font); 
```

我试图在系统中列出我所有的字体，实际上我还没有看到需要的字体：

```
foreach (FontFamily font in System.Drawing.FontFamily.Families)
{
Console.WriteLine(font);
} 
```

**但我可以在Fonts**文件夹中看到我的字体。它具有**OTF**扩展名。也许这就是问题所在？我只能看到**TTF**字体。但为什么？如何从我的程序中访问 OTF 字体？

更新：抱歉问题出在**OTF**访问而不是**TTF**！我已在回答中进行了更正

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T13:00:34.107

问题是 OpenType 字体有多种风格，一种基于 TrueType 轮廓，另一种基于 PostScript Type 1 轮廓。Windows GDI+ 图形 API 不支持 PostScript 类型 1 轮廓。这有点讽刺，因为 OpenType 字体格式是由微软创建的，因为无法从 Apple 获得某些字体技术的许可。

因此，如果 Windows 应用程序基于 GDI+，它将无法渲染具有 PostScript 类型 1 轮廓或 PostScript 类型 1 字体的 OpenType 字体。不幸`System.Drawing`的是使用 GDI+ 实现。您唯一的选择是坚持使用 TrueType 轮廓的字体。

（或者，如果你真的很绝望，你可以 P/Invoke 到“经典”GDI 并将字体渲染为位图。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:30:05.523

尝试使用 System.Drawing.Text.InstalledFontCollection [http://msdn.microsoft.com/en-us/library/system.drawing.text.installedfontcollection.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.text.installedfontcollection.aspx)

# android - 如何始终在列表视图中突出显示当前项目？

> ID：10583163
> 
> 赞同：0
> 
> 时间：2012-05-14T12:17:17.983
> 
> 标签：android, android-listview

现在我正在使用：

```
android:listSelector="@drawable/bg_list_item"
android:drawSelectorOnTop="true" 
```

其中 bg_list_item.xml：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item android:state_selected="true">
    <shape android:shape="rectangle">
        <gradient android:startColor="#0000ff"/>
    </shape>
</item>

<item android:state_focused="false"
      android:state_pressed="false"
      android:state_selected="false">
    <shape android:shape="rectangle">
        <gradient android:startColor="#ff0000"/>
    </shape>
</item> 
```

但是第一个项目不起作用，并且有时在滚动时（当我靠近列表视图的顶部/底部时）并且从不在 listView.setSelection(index) 上突出显示选定的项目。

我是否必须以编程方式突出显示当前项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:28:33.670

这是因为在触摸模式下没有选定的项目。请参阅[此处](http://android-developers.blogspot.com/2008/12/touch-mode.html)以获取解释。

你可以用选择器来做，但它需要三件事......

1）您必须使列表行可选择

```
getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

2) 将激活状态的条件添加到您的选择器文件中：

```
 <item android:state_activated="true" >
        <shape android:shape="rectangle"> 
        <gradient android:startColor="#0000ff"/> 
```

3）您需要创建一个自定义适配器来跟踪列表中每个位置的状态，以便在滚动时保持正确的状态。

**编辑**

breceivemail 的答案更适合您的需求。我的，虽然它可以工作，但对于多次检查的项目类型列表（通过将其更改为 CHOICE_MODE_MULTIPLE）会更好，并且对于您需要的工作比必要的工作更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:23:35.617

定义一个自定义适配器并在其 getView() 方法中：

```
private int selectedItem;

// is used outside the adapter for example OnItemClickListener
public void setSelectedItem(int position) {
    selectedItem = position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
   //...
   // set selected item
    LinearLayout activeItem = (LinearLayout) rowView;
    if (position == selectedItem)
    {
       activeItem.setBackgroundResource(R.drawable.background_dark_blue);
    }
    else
    {
       activeItem.setBackgroundResource(R.drawable.border02);
    }
   //...
} 
```

background_dark_blue.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
<shape android:shape="rectangle" >

            <solid android:color="@color/lightBlue6" />
            <!-- border width and color -->

            <stroke
                android:width="2dp"
                android:color="#FF0404B4" />

            <padding
                android:bottom="2dp"
                android:left="2dp"
                android:right="2dp"
                android:top="2dp" />
        </shape></item>

</layer-list> 
```

边框02.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle" android:layout_width="wrap_content">
            <stroke android:width="0.5dp" android:color="#FF000000" />
            <solid android:color="#FFFFFFFF" />
            <padding android:left="0dp" android:top="0dp" android:right="0dp"
                android:bottom="0dp" />
            <corners android:radius="0dp" />
        </shape>
    </item>

</layer-list> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T12:25:59.100

“android:listSelector”属性用于指定项目被点击时的背景。要突出显示第一项或单击后选择的一项，您需要以编程方式进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:28:58.973

ListViews 默认没有`chioceMode`集合（它被设置为`none`），因此当前的选择不会在视觉上显示出来。使用该`choiceMode`属性将使您达到所需的方面。

你也可以看看[这个解决方案](https://stackoverflow.com/questions/5853719/highlighting-the-selected-item-in-the-listview-in-android/5854783#5854783)，也许它也对你有用。

# c# - 如何从给定日期获取下个月的结束日期

> ID：10583170
> 
> 赞同：1
> 
> 时间：2012-05-14T12:17:45.827
> 
> 标签：c#

我正在实施一个代码来查找季度开始日期和结束日期，每件事都实施得很好，但是如果用户输入一个日期，`2011,2,1`我想`quarter`根据这个日期获得结束日期

```
DateTime dtTempStartDate = new DateTime(2011, 2, 1);
var qrtrDate = DateTime.ParseExact(dtTempStartDate.ToString("MM-dd-yyyy"), "MM-dd-yyyy", System.Globalization.CultureInfo.InvariantCulture);
var dtMnthEnd = qrtrDate.AddMonths(1);` 
```

我应该添加`days`还是`add milliseconds`有人可以帮助我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:20:28.227

```
int quarter = (int)Math.Ceiling(qrtrDate.Month / 3.0);
int lastMonthInQuarter = 3 * quarter;
DateTime lastDayOfQuarter = new DateTime(qrtrDate.Year, lastMonthInQuarter, DateTime.DaysInMonth(qrtrDate.Year, lastMonthInQuarter)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:47:53.610

如果您想知道下个月的结束日期，可以使用以下公式：

`=DATE((YEAR(A1)),(MONTH(A1)+1),(DAY(A1)))`

# c - 使用 pcap 库检测 eap pakets (802.1X auth)

> ID：10583173
> 
> 赞同：1
> 
> 时间：2012-05-14T12:17:49.070
> 
> 标签：c, protocols, pcap, packet-sniffers

我正在用 pcap 编写 ac 嗅探器（在我自己录制的 .cap 流上）。我需要检测带有 802.1X 身份验证的 eap 数据包，但我不知道如何将它们与其他数据包区分开来。使用wireshark它似乎是LLC层中的一个字段（值888e），但我不知道如何找到llc是否存在。

这是一个eap数据包的例子

```
 000018006e48000000169e09a000cd8103000000000000000802d50074f06d40a6a3000cf635dfab000cf635dfab90a6aaaa03000000888e0103005f02008a001000000000000000cbd5c0958cc32b7b3ae762c43b41436059e54cb48f224d35718613838d9640644d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 
```

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:28:08.263

准确地说，在以太网上，EAP-over-LAN (EAPOL) 数据包的以太网类型字段为 0x888e（根据 IEEE 标准 802.1X-2004 的第 7.2 节“用于 IEEE 802.3/以太网的 EAPOL MPDU 格式”），以及在使用 IEEE 802.2 LLC（例如 802.11）的网络上，EAPOL 数据包的 LLC 标头的 DSAP 为 0xAA，表示 SNAP，后跟一个 OUI 为 0x000000 的 SNAP 标头（表示“协议 ID 是以太网类型”）和 0x888e 的协议 ID（因为这是 EAPOL 的以太网类型值）。

因此，对于 802.11 上的数据包，检查数据帧（而不是管理或控制帧），然后查看 802.11 标头之后的 802.2 LLC 标头（所有 802.11 数据帧都有一个 802.2 LLC 标头），然后检查 DSAP 0xAA，如果您看到，请检查 802.2 标头后面的 SNAP 标头，以获取 0x000000 的 OUI 和 0x888e 的协议 ID。

# perl - 如何在 Perl 中将字符串转换为数字（浮点数）

> ID：10583177
> 
> 赞同：7
> 
> 时间：2012-05-14T12:18:03.250
> 
> 标签：perl

如何在 Perl 中将字符串转换为数字？

例子：

```
$str = '10.0500000';
$number = $str * 1;  # 10.05 
```

是否有另一种标准方法可以从 '10.0500000' 获得 10.05 而不是乘以 1？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T12:41:51.010

编辑 2020：答案是错误的，请参阅下面的评论。我无权删除已接受的答案。

* * *

我正在回答字面问题。也许您想[格式化数字](http://p3rl.org/sprintf)以供显示。

两种表达方式

```
sprintf '%.2f', '10.0500000'
sprintf '%.2f', 10.0500000 
```

返回字符串`10.05`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-14T12:32:28.177

在 Perl 中，标量没有类型。相反，运营商是。因此，当您`$a . "1"`使用时，您将`$a`其用作字符串，而当您`$a + 1`使用时，则将`$a`其用作数字。Perl 将尽最大努力弄清楚标量对于给定操作的含义。因此，在大多数情况下，“转换”是为您隐式完成的。

如果您需要验证您的字符串确实可以转换，请使用正则表达式。

这是关于如何做到这一点的一篇论述：[http ://www.regular-expressions.info/floatingpoint.html](http://www.regular-expressions.info/floatingpoint.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-14T12:30:57.890

好吧，您也可以添加 0 :-)

你不应该太在意 Perl 中标量的内部表示，除非你在做一些奇怪的事情（如果你在做，请告诉我们）。任何看起来像数字的东西都是数字。

还是您需要检查字符串是否为“真实”数字？好吧，实际上，任何字符串都是。有一篇不错的文章[***Is it a Number***](http://web.archive.org/web/20171023025605/http://www.perl.com/doc/FMTEYEWTK/is_numeric.html) on this topic。该链接指向*Wayback Machine*，因为原件已从`perl.com`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-14T15:40:37.693

`0+`有点惯用语。它通常用于区分对偶变量的组件。

```
$ perl -E'
   system({ "nonexistant" } "nonexistant");
   say 0+$!, ": ", $!;
'
2: No such file or directory 
```

这看起来很奇怪，因为这不是您通常必须做的事情。数字是一个数字，无论它在内部存储为 PV、IV、UV 还是 NV。没有必要强制将其存储为 NV（浮点数），并且通常表明其他地方的设计存在错误。

# c# - 如何使用编辑网格列明智地创建 GridView/DataList

> ID：10583181
> 
> 赞同：0
> 
> 时间：2012-05-14T12:18:14.673
> 
> 标签：c#, asp.net

在网格上创建，可以按列编辑而不是按行编辑。我想在网格中动态添加列（不是固定列），它可以是可编辑的。当编辑按钮单击将出现在每列标题时。

## 喜欢

## 编辑 编辑 编辑

```
 |Original | MOD1 | MOD2 | MOD3    ... 
```

成本1 | 500.00 | 550.0|550.0 | 1000.00 ... 成本2 | 100.00 | 50.0 |150.0 | 500.00 ...

## 成本3 | 50.00 | 50.0 |50.0 | 100.00 ...

在这里单击第一个编辑链接时，原始列应该是可编辑的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:03:22.153

只需在单击“编辑”标签/按钮时更改您希望使其可编辑的列的 ReadOnly 属性，其中 column->Index 是列数范围内的整数值：

```
dataGridView->Columns[column->Index]->ReadOnly = false; 
```

请记住，您可能必须`true`在添加列时指定 ReadOnly ，因为默认情况下它设置为`false`，除非您专门以不同的方式处理它。

# echo - 如何在 Bourne shell 中回显多行字符串

> ID：10583183
> 
> 赞同：13
> 
> 时间：2012-05-14T12:18:20.460
> 
> 标签：echo, sh, multiline

我想创建一些脚本来填充一些模板并将它们插入到我的项目文件夹中。我想为此使用一个 shell 脚本，并且模板非常小，所以我想将它们嵌入到 shell 脚本中。问题是`echo`似乎忽略了我的字符串中的换行符。要么，要么字符串不包含开头的换行符。这是一个例子：

```
MY_STRING="
Hello, world! This
Is
A
Multi lined
String."

echo -e $MY_STRING 
```

这输出：

```
你好世界！这是一个多行字符串。
```

我假设`echo`是这里的罪魁祸首。我怎样才能让它承认换行符？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-14T12:20:10.243

您需要在变量插值周围加上双引号。

```
 echo -e "$MY_STRING" 
```

这是一个非常常见的错误。您应该养成始终引用字符串的习惯，除非您特别需要拆分为空格分隔的标记或扩展通配符。

所以明确地说，shell 在解析你的命令行时会规范化空格。如果您编写一个打印出其`argv`数组的简单 C 程序，您可以看到这一点。

```
argv[0]='Hello,'
argv[1]='world!'
argv[2]='This'
argv[3]='Is'
argv[4]='A'
argv[5]='Multi'
argv[6]='lined'
argv[7]='String.' 
```

相比之下，使用引用，整个字符串在`argv[0]`、 换行符和所有内容中。

对于它的价值，还请考虑此处的文档（带`cat`，不`echo`）：

```
cat <<"HERE"
foo
Bar
HERE 
```

您还可以在此处的文档中插入变量。

```
cat <<HERE
$MY_STRING
HERE 
```

...尽管在这种特殊情况下，这几乎不是您想要的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-14T12:26:00.617

`echo`就是这么九十年代。[新的（POSIX）孩子是`printf`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/printf.html).

```
 printf '%s\n' "$MY_STRING" 
```

没有`-e`或 SYSV 与 BSD 回声疯狂，完全控制打印的内容和宽度，像 C 中的转义序列。每个人都请立即开始使用`printf`，永远不要回头。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T12:21:11.113

尝试这个 ：

```
echo  "$MY_STRING" 
```

# python - 如何动态生成具有从 Python 中的平面文件读取的单个属性的类实例？

> ID：10583195
> 
> 赞同：0
> 
> 时间：2012-05-14T12:19:04.227
> 
> 标签：python, oop

如果这个问题已经被问过，我很抱歉。

我对 Python 编程真的很陌生，我需要做的是：我有一个 .csv 文件，其中每一行代表一个人，每一列代表一个变量。这个 .csv 文件来自我所做的基于代理的 C++ 模拟。现在，我需要读取该文件的每一行，并为每一行生成一个 Person() 类的新实例，将每个变量作为参数逐行传递。

我的问题是：在保持其唯一 ID（这是我想从文件中读取的属性之一）的同时生成这些代理的最 Pythonic 方式是什么？您是否建议创建一个类字典来访问每个实例？但是我仍然需要为每个实例提供一个名称，对吗？我怎样才能动态地做到这一点？可能最好的办法是使用从文件中读取的唯一 ID 作为实例名称，但我认为数字不能用作实例名称，可以吗？我想念指针！:(

我确信有一个我看不到的pythonic解决方案，因为我仍然需要重新思考一下以pythonic方式思考......非常感谢你，任何帮助将不胜感激！请记住，这是我在 python 中的第一个项目，所以放轻松！;)

编辑：非常感谢您的回答，但我仍然没有得到主要问题的答案：如何为我的 csv 文件中的每一行创建我的类 Person() 的实例。我想自动做到这一点！是否可以？为什么我需要这个？因为我需要使用 networkx 创建这些人的网络，并且我希望在网络结构中链接“代理”，而不仅仅是字典项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:26:41.777

要读取 csv 文件并从中生成 dict 文件，您应该明确查看[http://docs.python.org/library/csv.html#csv.DictReader](http://docs.python.org/library/csv.html#csv.DictReader)。

如果您有一个 csv 文件，其中第一行包含字段名称和其余行的数据，DictReader 将生成一个字典，以第一行中定义的字段名称作为键。举个例子，如果你给它下面的 csv 文件：

```
Field1,Field2,Field3
1,2,3
4,5,6 
```

它将返回以下列表：

```
[{'Field1':1,'Field2':2,'Field3':3} , {'Field1':4,'Field2':5,'Field3':6} ] 
```

**添加：**

关于基于字典创建实例，您可能应该查看以下内容：

[在 Python 中从字典创建类实例属性](https://stackoverflow.com/questions/1639174/creating-class-instance-properties-from-a-dictionary-in-python)

或从以下[链接](http://code.activestate.com/recipes/52308-the-simple-but-handy-collector-of-a-bunch-of-named/?in=user-97991)获取，您可以执行以下操作：

```
class Person:
    def __init__(self, **kwds):
        self.__dict__.update(kwds)

# that's it!  Now, you can create a Bunch
# whenever you want to group a few variables:

person = Person(field1=1, field2=2, field3=3) 
```

您可以使用 dictReader 返回的字典的每个条目来创建一个新实例：

```
reader = csv.DictReader(open('yourfile.csv', 'rU'), delimiter=',')
entries = [Person(**entry) for entry in reader] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:56:21.283

> 我有一个 .csv 文件

你很幸运；`csv`CSV 支持是通过模块内置的。

> 您是否建议创建一个类字典来访问每个实例？

我不知道您认为“类词典”是什么意思。有类，有字典。

> 但是我仍然需要为每个实例提供一个名称，对吗？我怎样才能动态地做到这一点？可能最好的办法是使用从文件中读取的唯一 ID 作为实例名称，但我认为数字不能用作实例名称，可以吗？

数字不能是实例名称，但它们当然可以是字典键。

无论如何，您都不想动态创建“实例名称”（假设您正在考虑将每个实例名称放在单独的变量中或类似的东西中）。你想要一本字典。所以让 ID 成为键。

> 我想念指针！:(

老实说，我真的无法想象您希望指针如何提供帮助，而且我在 C++ 方面有多年的经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:36:12.150

再会。你可以这样做：

```
 >>> class person(object):
    ...     def __init__(self, name):
    ...             self.name = name
    ...
    >>> d = dict()
    >>> names = ['1','2','3','4','5']
    #fill dict with any value. for example with hash of name        
        >>> for name in names:      
    ...     d[person(name)] = hash(name)
    ...
    >>>
    >>> d
    {<__main__.person object at 0x000000000236BC18>: 1977051568, <__main__.person ob
    ject at 0x0000000002372198>: -1933914571, <__main__.person object at 0x000000000
    1E95FD0>: 2105051955, <__main__.person object at 0x0000000002372160>: -180591418
    8, <__main__.person object at 0x00000000023721D0>: -2061914958}
    >>>

    >>> for key in d.keys():
    ...     key.name
    ...
    '1'
    '4'
    '2'
    '5'
    '3' 
```

现在我们有 5 个对象。

# ms-access - 无 DSN 的 ODBC 访问-VBA

> ID：10583196
> 
> 赞同：1
> 
> 时间：2012-05-14T12:19:13.907
> 
> 标签：ms-access, odbc, vba, dsn

（在 Sage Line 100 和 MS Access 之间）

我试图从 Sage Line 100 将表导入 MS Access 中做到万无一失。由于必须导入来自多个来源的多个表并且查询以特定顺序运行，因此我想一键自动执行此操作（表单按钮将运行一个宏来导入数据库运行查询和导出）

有几个源位置可以从中导入表，并且并非所有用户都设置了系统 DSN（我也不想为每个人设置它们 - 我不是 IT 人员（没有 IT 人员））。

这是我正在尝试的代码：

```
DoCmd.TransferDatabase acImport, "ODBC Database", _<br>
    "ODBC;DRIVER={SAGE Line 100}; LOG=S:\apps\L100;" & _ 
    "SCH=S:\apps\svnp;DIR=S:\data\svnd\mfg;" & _
    "UID=abcd;PWD=defg;LANGUAGE=us_english;" & _
    "DATABASE=ACCOUNTING_SYSTEM.STOCK_CONTROL_FILE", _
    acTable, "ACCOUNTING_SYSTEM.STOCK_CONTROL_FILE", "ASSCF" 
```

以上导致：

![第一个窗口](../Images/19deeb5f4dd2c521a77674a1328f41e5.png)

单击“确定”时：

![错误窗口](../Images/fae8839de869a169d1be0a1fb42b10bc.png)

相同的结果来自：

```
Dim strSQL As String
    strSQL = "SELECT * INTO ASSCF" & _
             " FROM [ODBC;DRIVER={SAGE Line 100};" & _
             "LOG=S:\apps\L100;SCH=S:\apps\svnp;DIR=S:\data\svnd\mfg;" & _
             " UID=ajay;PWD=ajoo].ACCOUNTING_SYSTEM.STOCK_CONTROL_FILE;"
CurrentDb.Execute strSQL, dbFailOnError 
```

笔记：

当我使用我在系统上设置的 DSN 时，我可以成功导入数据：

```
Dim strSQL As String
    strSQL = "SELECT * INTO ASSCF" & _
             " FROM [ODBC;DSN=SAGE-mfg" & _
             " UID=ajay;PWD=ajoo].ACCOUNTING_SYSTEM.STOCK_CONTROL_FILE;"
CurrentDb.Execute strSQL, dbFailOnError 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:42:53.983

与其将DRIVER嵌入到你的sql语句中，不如设置一个odbc连接字符串，然后通过连接字符串打开连接并执行sql。我认为你的sql语句中“DRIVER”前面的“ODBC”导致了错误。

# c++ - 为什么模板试图用'int&'而不是'int'来实例化？

> ID：10583198
> 
> 赞同：2
> 
> 时间：2012-05-14T12:19:19.553
> 
> 标签：c++, templates

我正在尝试编写一个简单的函数，它将从用户输入中获取一个范围内的数字。

当实例化这个函数时，我明确告诉它我希望它实例化，`int`但我仍然得到错误：

```
thermo.cpp:105:31: error: no matching function for call to ‘getInput(int&)’ 
```

为什么要试图找到一个`int&`作为参数的函数？

```
template<class T, T min = std::numeric_limits<T>::min, T max = std::numeric_limits<T>::max>
T getInput(T default_value = T()){
  std::string input;
  T myNumber = T(); //default inits
  while(true){
    getline(cin, input);

    if(input.length() == 0){
      return default_value;
    }

    // This code converts from string to number safely.
    stringstream myStream(input);
    if (myStream >> myNumber){
      if(myNumber > max || myNumber < min){
        stringstream ss;
        ss << "Input out of bounds. Received " << myNumber << " expected between " << min << " and " << max << ".";
        throw invalid_argument(ss.str());
      }
      return myNumber;
    }

    cout << "Invalid number, please try again" << endl;
  }
}

void get(const std::string& prompt, int& param){
  cout << prompt << " [" << param << "]:";
  param = getInput<int,0>(param); // i specifically tell it i want 'int', why am i getting 'int&'?
} 
```

**更新**

如果我尝试 CharlesB 的建议：

```
void get(const std::string& prompt, int& param){
  cout << prompt << " [" << param << "]:";
  param = getInput<int,0>(int(param));
} 
```

我明白了

> thermo.cpp:105:36: 错误：没有匹配函数调用'getInput(int)'</p>

忘记：

> cygwin下的g++ 4.5.3

命令行：

> $ g++ thermo.cpp -o thermo.exe -Wall -pedantic -std=c++0x

**更新 2**

如果我这样称呼它

```
void get(const std::string& prompt, int& param){
  cout << prompt << " [" << param << "]:";
  param = getInput<int,0,15>(int(param)); // fully parameterized
} 
```

`numeric_limits`它有效......但我宁愿不在每次调用中指定上限（甚至不指定）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:44:03.333

不要为`min`and使用模板`max`：

```
template<class T>
T getInput(T default_value = T(), T min = std::numeric_limits<T>::min(), T max = std::numeric_limits<T>::max()); 
```

没有理由为这些参数使用模板（除了它不起作用的事实）。

**编辑**：您不能将这些参数用作模板值，因为`std::numeric_limits<T>::min()`它是一个函数，它的值在运行时是已知的，并且模板值参数必须在编译时绑定到一个值。这是有效的：

```
template<class T, T min = 0, T max = 5>
T getInput(T default_value); 
```

因为 0 和 5 在编译期间是已知的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:45:35.467

我不知道这是否**是**问题所在，但我无法想象它会有所帮助。这一行：

```
template<class T, T min = std::numeric_limits<T>::min, T max = std::numeric_limits<T>::max> 
```

...使用 min/max 作为值，[当它们真的是函数时](http://www.cplusplus.com/reference/std/limits/numeric_limits/)。也许这会混淆模板参数？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T13:17:43.657

错误代码并不代表您的想法。错误代码是以下内容的简写：

*没有匹配的函数调用`getInput`将`int`可修改的左值表达式作为单个参数*

在这种情况下，*`int`可修改的左值表达式*是您用来进行**调用**`param`的表达式的类型。现在的问题是，这种格式的错误代码输出非常冗长，仅使用两三个非平凡类型的参数就会变得非常难以阅读，因此编译器会压缩错误报告并告诉您：

*没有匹配的函数调用`getInput(int&)`*，请注意这里`int&`不是将被调用的函数的类型，因为编译器无法找到这样的函数，而是调用中使用的参数的类型。

如果您执行 CharlesB 建议的更改，那么您将收到一条不同的错误消息，指出它 cannot find `getInput(int)`。这里的区别是`int(param)`创建了一个临时的（*右值表达式*），所以现在错误反映了它。需要一个不同的错误代码是因为如果你有一个`getInput(int&)`函数，在第二种情况下，这个重载就不能使用。

关于您收到该错误代码的原因，基本问题是`std::numeric_limits<T>::max`不是 type `T`。您的问题是 SFINAE 的基础：您已经定义了一个模板，该模板将作为第二个和第三个参数`T`，并且`T`应该使用`std::numeric_limits<T>::min`(and `max`) 进行初始化。现在，当编译器尝试确定要调用的函数时，它会找到该模板，使用`T`for `int`（您提供了确切的类型），`0`用于 min，然后尝试推断最后一个参数。此时它将尝试`T`通过默认模板参数获取一个值（最后一个模板参数），方法是将已知模板参数替换为：`std::numeric_limits<T>::max`。问题是这`std::numeric_limits<int>::max`不是一个`int`，而是静态成员函数，因此类型不匹配，导致替换失败。该语言确定*替换失败不是错误*（**SFINAE**），它仅意味着此模板将从函数调用的候选列表中删除。因为没有其他匹配的重载，编译器放弃并告诉您它找不到匹配的调用函数。

在 C++11 中，您可以使用`std::numeric_limits<T>::max()`，因为该函数被标记为 a `const_expr`，因此可以*调用*以获得`T`可用作模板参数的类型的常量表达式，但如果您使用的是 C++03 编译器，您将需要以不同的方式解决该问题，例如将`min`and移动`max`到函数的默认参数，或者提供从用户获取值或将调用函数的不同重载（`std::numeric_limist<T>::max`如果参数不存在，则默认为，但后一种选择更麻烦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T12:22:13.173

模板函数用参数类型实例化，并且`param`是一个`int&`.

宁可做

```
 param = getInput(int(param)); 
```

min 和 max 也不能是模板参数，模板参数是类、类型名或 POD。

# c++ - 为什么在应用服务器项目中使用不止一种语言？

> ID：10583201
> 
> 赞同：0
> 
> 时间：2012-05-14T12:19:26.653
> 
> 标签：c++, python, application-server

在浏览了大型项目的源代码后，尤其是像[这样](http://www.cherokee-project.com/contribute.html)的应用程序服务器，我了解到这些项目不是用一种语言开发的。他们中的许多人使用 python 作为辅助语言。

现在我有四个问题：

1.  为什么使用不止一种语言？
2.  为什么python经常被用于次要？
3.  为什么不使用 python 来开发项目的所有部分，他们仍然使用 c/c++？
4.  哪些项目应该使用python开发，哪些项目使用c/c++？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:33:49.407

# 硬层和软层

编程语言设计倾向于在“高级”特性和“低级”特性之间进行权衡，“高级”特性以速度为代价提高了程序员的生产力，而“低级”特性需要程序员付出大量努力，但生成的代码非常快。

因此，有时在一个项目中使用两种语言是有意义的：

1.  用易于编写和维护的富有表现力的高级语言编写 90% 的代码。
2.  用更难编写但允许全面优化的低级语言编写 10% 的***性能关键代码。***

c2wiki 将此称为[HardAndSoftLayers](http://c2.com/cgi/wiki?AlternateHardAndSoftLayers)模式：

> 凭借第一条优化规则，继续用你能找到的最高级语言编写大部分代码。
> 
> 凭借优化的第三条规则，当你必须的时候，使用探查器并找到程序的慢部分。取出这些部分，并用较低级别的语言编写它们。

作为参考，[优化的规则](http://c2.com/cgi/wiki?RulesOfOptimization)是：

> 1.  优化的第一条规则——**不要。**
> 2.  优化的第二条规则 - **不要**……暂时*。*
> 3.  **优化前的**配置文件****

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:39:18.603

The rule is pretty simple: the developers choose the language(s) based more or less on the following criterias:

1.  their familiarity with it
2.  how easily you can do the task using that language
3.  how well is suited the language to the specific task

Today most of the development done in this multilingual environments are huge solutions, where different components need to communicate, exchange data or simply do work which is comprised of more than one step. It is easier to write the communication/data interpretation/whatever wrapping necessary part in a language such as python and then leave the real time and speed needy work to be done by some lower level language which compiles directly without the need for an interpreter.

Let's dig a little bit deeper.

1.  How familiar are the developers with the programming language depends on the background of each developer. If they are given a free choice, obviously they will pick the language they know the best, unless there is a lobby from someone else... usually higher in the management chain. Python is not necessarily the language of choice, python is simply an easy to use and learn language, which is well suited for most tasks. Our project has no bit of python in it, only tons of ruby code. Because the main developer liked ruby at that time, so we're stuck with it.

2.  If you know more than one programming language you know that each of them is doing the same thing differently. For example, creating a socket, connecting to a server, reading the stuff and printing it out is just a few lines of Erlang code, but it takes a lot more to do it in C++ (for example...) So again, if you have a task you know how to solve easily in a specific language you are going to stuck to it. People are lazy, they don't necessarily learn new stuff unless needed.

3.  Obviously you are not going to write a device driver in python, and it is much easier to create a complete web service with java than with plain C... but you still would need the part of the solution that does the hardware close thing. When you have a task you carefully measure the requirements and implications and wisely choose the language you will do it in. Because it will stuck to it forever.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:40:04.630

不提及你发送的项目，我会给你我的 50c，为什么我工作的公司，为什么我们在项目中经常使用 python。

首先，我们没有与软件解决方案本身相关的 python 代码。所有 python 代码要么与开发协助、机器设置、用于测试的通用框架工具部署有关，要么与代码生成有关。

> 1.  为什么使用不止一种语言？

在查看我们所有的企业级解决方案或大规模实施时，我们从事的任何项目都没有只有一种语言。

这主要是因为我们的层是用在每个级别分别提供最佳性能和可用性的语言编写的。

例如，C++ 用于快速核心后端服务，C#.NET 用于快速开发并为前端提供良好的 UI。

> 1.  为什么python经常被用于次要？

就个人而言，除了我上面解释的原因之外，我们不使用 python 'secondary often'。我们使用 C++/C# 作为最常见的对，但取决于平台，可能是其他对。

> 1.  为什么不使用 python 来开发项目的所有部分，他们仍然使用 c/c++？

Python 非常适合快速解决方案和做你希望你的 shell 可以做的事情。这主要涉及文件管理等。

C++ 可能是最快的编译语言，为核心和大量使用的操作提供最佳使用。

基于此，以及市场在 C++ 方面拥有更多知识和经验的事实（出于多种原因），C++ 是更受欢迎的选择。

> 1.  哪些项目应该使用python开发，哪些项目使用c/c++？

我相信我可能已经在上面解决了这个问题。

-

我希望我能帮上忙，请记住这只是我的个人观点，绝不应将其视为事实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:33:22.680

1.  有时python不够好。

    处理计算机视觉、图像或声音处理、计算数据的色调并不是 Python 真正擅长的。C 或 C++ 等其他语言在这些领域非常擅长。

2.  支持您的主要语言是 java，并且您希望将其他语言粘合到一个项目中。那就是我们需要 Python 的地方。Python 是众所周知的胶水语言。您可以使用 ctype、SWIG、Jython、ironPython 或其他方法来绑定多种语言。

3.  猜猜我在1回答了这个问题。

4.  需要速度。选择 C ​​或 C++ 。更关心生产力，使用 Python。**

# java - PowerMockito 模拟单个静态方法并返回对象

> ID：10583202
> 
> 赞同：115
> 
> 时间：2012-05-14T12:19:31.757
> 
> 标签：java, jakarta-ee, mockito, easymock, powermock

我想从一个包含 2 个静态方法 m1 和 m2 的类中模拟一个静态方法 m1。我希望方法 m1 返回一个对象。

我尝试了以下

1)

```
PowerMockito.mockStatic(Static.class, new Answer<Long>() {
         @Override
         public Long answer(InvocationOnMock invocation) throws Throwable {
            return 1000l;
         }
      }); 
```

这同时调用了具有不同返回类型的 m1 和 m2，因此它给出了返回类型不匹配错误。

2)`PowerMockito.when(Static.m1(param1, param2)).thenReturn(1000l);` 但是在执行 m1 时不会调用它。

3)`PowerMockito.mockPartial(Static.class, "m1");` 给出 mockPartial 不可用的编译器错误，这是我从[http://code.google.com/p/powermock/wiki/MockitoUsage 获得](http://code.google.com/p/powermock/wiki/MockitoUsage)的。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-05-18T12:21:53.127

您想要做的是 1 的一部分和 2 的全部组合。

您需要使用 PowerMockito.mockStatic 为类的所有静态方法**启用静态模拟。**这意味着**可以**使用 when-thenReturn 语法对它们进行存根。

但是，您使用的 mockStatic 的 2 参数重载为 Mockito/PowerMock 在调用未在模拟实例上显式存根的方法时应该执行的操作提供了默认策略。

从[javadoc](http://powermock.googlecode.com/svn/docs/powermock-1.4.12/apidocs/index.html)：

> 创建具有指定策略的类模拟，以响应其交互。这是相当高级的功能，通常你不需要它来编写体面的测试。但是，在使用遗留系统时它会很有帮助。这是默认答案，因此仅当您不存根方法调用时才会使用它。

**默认**的默认存根策略是只为对象、数字和布尔值方法返回 null、0 或 false。通过使用 2-arg 重载，您是在说“不，不，不，默认情况下使用这个 Answer 子类的回答方法来获取默认值。它返回一个 Long，所以如果你有静态方法返回不兼容的东西长，有问题。

相反，使用 1-arg 版本的 mockStatic 来启用静态方法的存根，然后使用 when-thenReturn 来指定对特定方法执行的操作。例如：

```
import static org.mockito.Mockito.*;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.invocation.InvocationOnMock;
import org.mockito.stubbing.Answer;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

class ClassWithStatics {
  public static String getString() {
    return "String";
  }

  public static int getInt() {
    return 1;
  }
}

@RunWith(PowerMockRunner.class)
@PrepareForTest(ClassWithStatics.class)
public class StubJustOneStatic {
  @Test
  public void test() {
    PowerMockito.mockStatic(ClassWithStatics.class);

    when(ClassWithStatics.getString()).thenReturn("Hello!");

    System.out.println("String: " + ClassWithStatics.getString());
    System.out.println("Int: " + ClassWithStatics.getInt());
  }
} 
```

String 值静态方法被存根返回“Hello！”，而 int 值静态方法使用默认存根，返回 0。

# c# - 如何在 SQL Server 的 IN 子句中使用存储过程输出

> ID：10583209
> 
> 赞同：1
> 
> 时间：2012-05-14T12:19:48.430
> 
> 标签：c#, sql-server, sql-server-2008, stored-procedures, views

我的应用程序中有一个视图，它与另一个视图和一个表有一个 INNER JOIN。

```
view ViewName
select * from AnotherView inner join TableName ON conditions 
```

使用 INNER JOIN 语句专门执行此视图需要太多时间。所以我正在尝试使用 SP 来提高性能。我正在尝试删除物理表上的 INNER JOIN。

我的 SP 将获取更多子句所需的数据。

所以代码看起来像这样，

```
view ViewName
select * from AnotherView where columnName in (result of SP) 
```

我尝试了表变量，在视图中调用视图。但是执行时间似乎每次都有些细微的差别。

谁能帮我理解这一点？有可能吗？有没有其他更好的方法来实现这一点。我不想使用 openrowset。

在此先感谢，
维杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:45:04.693

将以下查询放在您的视图中，它将使用 sp 的结果创建一个内部联接。

您可以在 View 中使用 OpenRowSet 访问 sp。

```
SELECT * 
FROM   AnotherView 
       INNER JOIN (SELECT a.* 
                   FROM   OPENROWSET('SQLNCLI', 
                                     'Server=(local);TRUSTED_CONNECTION=YES;', 
                                     'EXEC database.dbo.Spname') AS a) AS b 
         ON AnotherView.columnName = b.columnname 
```

如果凭据不受开发人员的控制，那么您可以创建一个链接服务器并在 openrowset 中传递服务器的名称。无需通过凭据。

如何创建链接服务器到数据库：

```
 EXEC master.dbo.sp_addlinkedserver
@server = N'LinkServerName',
@srvproduct=N'MSSQL',
@provider=N'SQLNCLI',
@provstr=N'PROVIDER=SQLOLEDB;SERVER=.\SQLEXPRESS;Database=DbName'

EXEC master.dbo.sp_addlinkedsrvlogin @rmtsrvname=N'LinkServerName',
@useself=N'True',
@locallogin=NULL 
```

如何在视图中执行sp：

```
SELECT * From OPENQUERY([LinkServerName],DbName.dbo.spname) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:22:24.643

将结果放在临时表中并与之进行内部连接。

**或者**

将结果放入一个变量（或输出变量）中，并使用动态 SQL 来使用它。

* * *

要提高性能，请对条件中使用的列使用索引。

# javascript - 使用 XMLHttpRequest 发送带有数据的文件

> ID：10583210
> 
> 赞同：6
> 
> 时间：2012-05-14T12:19:53.173
> 
> 标签：javascript, xmlhttprequest

我正在尝试 ajaxlly 上传一个文件，包括我想用它添加一个帖子数据

```
var xhr = this._xhrs[id] = new XMLHttpRequest();
var queryString = qq.obj2url(params, this._options.action);
        xhr.open("POST", queryString, true);
        xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
        xhr.setRequestHeader("X-File-Name", encodeURIComponent(name));
        xhr.setRequestHeader("Content-Type", "application/octet-stream");
        xhr.send(file); 
```

如何添加`x=y`为帖子数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-17T15:25:01.510

```
var file = $("#file_input")[0].files[0];
//for pure javascript use
var file = document.querySelector('input[type=file]')[0].files[0];

var formData = new FormData();
formData.append("myfile", file);
formData.append("text_unput", "Hello");

var xhr = new XMLHttpRequest();
xhr.open('POST', '/url', true);
xhr.send(formData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:37:36.830

**CORRECT NEW ANSWER**

Look at the [@habibutsu's answer below](https://stackoverflow.com/a/32054118/916784)

**WRONG OLD ANSWER**

You can't post a file **and** a form data as x=y&w=z. They are two different Content Types.

For x=y you should use a content-type like this: application/x-www-form-urlencoded

I suggest you to split your AJAX request in two different or insert these data into the url: myUrl + 'query.php?x=y'.

Ciao

Wilk

# algorithm - 优雅的折线“Left-of”测试

> ID：10583212
> 
> 赞同：13
> 
> 时间：2012-05-14T12:20:03.190
> 
> 标签：algorithm, math, geometry

**鉴于：**

*   (X,Y) 坐标，即车辆的位置。
*   (X,Y) 的数组，它们是折线中的顶点。请注意，折线仅由直线段组成，没有弧线。

**我想要的是：**

*   计算车辆是在折线的左侧还是右侧（当然，还是在顶部）。

**我的做法：**

*   遍历所有线段，并计算到每个线段的距离。然后，对于最近的段，您进行简单的左侧测试（例如，如此处所述[）](https://stackoverflow.com/questions/1560492/how-to-tell-whether-a-point-is-to-the-right-or-left-of-a-line)。

**可能的问题：**

*   当三个点形成小于 90 度的角度时（如图所示），就会出现更复杂的情况。当车辆处于如下图的红色路段时，最近的路段可以是两者之一。但是，如果第一段被选为最接近的段，则*左侧*测试将产生*正确的结果，否则将产生**左侧*。我们可以很容易地看到（至少，我希望如此），正确的结果应该是车辆位于折线的*左侧*。

![错误场景](../Images/c60bf30054956f1dee4e4d6ab3db303a.png)

**我的问题：**

*   我怎样才能*优雅地*，但最*有效*地处理这种特定情况？

**到目前为止我的修复：**

*   从顶点开始为这两个段计算该段上的一个点。
*   使用欧几里得距离计算从车辆到两个点的距离
*   保留计算点最接近的线段。

我对这个修复不太满意，因为我觉得我错过了一个更优雅的解决方案，我的修复感觉相当“hacky”。效率是关键，因为它用于实时嵌入式系统。

现有的代码库是 C++，所以如果你想用特定的语言编写，C++ 有我的偏好。谢谢！

**[编辑]** 我将**我的 fix**从垂直点更改为平行点，因为我认为跟随线段比计算向外法线更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-16T07:28:45.920

This topic has been inactive for so long that I believe it's dead. I have a solution though.

> However, the *left-of* test will yield *right* if the first segment is chosen as the closest segment, and *left* otherwise.

You've used slightly ambiguous language. I'm gonna use *segments* to speak of the line segments in the polyline and *quadrants* to speak of the areas delimited by them. So in your case, you'd have a red *quadrant* which seems to be on the right of one *segment* and on the left of the other.

If the left-of test yields different answers for different segments, you should redo the test on the segments themselves. In your case, you'd have:

*   The quadrant is on the RIGHT of the first segment
*   The quadrant is on the LEFT of the second segment

Both segments disagree on where the quadrant lies, so you do two further disambiguation tests:

*   The second segment is on the RIGHT of the first segment
*   The first segment is on the RIGHT of the second segment

This allows us to conclude that the second segment is **in between** the first segment and the quadrant—since each of those two lies on a different side of the second segment. Therefore, the second segment is "closer" to the quadrant than the first and it's answer to the left-right test should be used as the correct one.

(I'm almost sure you can do with only one of the two disambiguation tests, I've put both in for clarity)

For the sake of completeness: I believe this solution also accounts for your demands of efficiency and elegance, since it uses the same method you've been using from the start (the left-of test), so it meets all the conditions specified: it's elegant, it's efficient and it takes care of the problem.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T13:13:29.170

让无穷大 = M 其中 M 足够大。您可以认为一切都在正方形 [-M,M]x[-M,M] 中，用折线分割正方形，您现在有两个多边形。然后检查汽车是否在给定的多边形中可以非常简单地用角度来完成。

我认为你的第一个点和你的最后一个点在那里有 M 坐标。您可能需要添加其中一些点来获得多边形：(-M,-M)、(M,-M)、(M,M) 和 (-M,M)。

一旦你有一个折线左侧的多边形，求和 OĈP 的角度，其中 O 是一个固定点，C 是汽车，P 是多边形的一个点。如果总和为 0，则汽车在多边形外部，否则在多边形内部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T13:14:14.843

这是计算几何中的标准问题。由于您要测试点 (x0, y0) 是否位于给定曲面（您的折线）的左侧，因此您需要通过其高度确定要测试的线段。一种简单的方法是构建每个段的较低点的树，并在其中搜索测试点的前身。一旦你有了那个段，你就可以直接做你的左边测试：如果它在两个端点的左边，或者在它们之间的适当一侧，那么你返回 true。

我在这里假设您保证折线的垂直范围大于您可能找到查询点的位置，并且该线不会垂直重叠。后一种假设可能很差。

响应 OP 的评论进行扩展：

请注意，问题中的角度示例与第一个假设相矛盾 - 折线未达到搜索点的高度。

将我的方法概念化的一种方法是对您的线段进行垂直排序，然后遍历它们，将您的点的 y 坐标与线段进行比较，直到您的点位于较低端点之上和较高端点之下。然后，使用线段的端点计算给定 y 处的 x 截距。如果该点的 x 坐标较低，则位于左侧，如果该点的 x 坐标较大，则位于右侧。

在实际实现中，有两种方法可以改进这种解释，其中一种我提到过：

1.  使用平衡搜索树来找到正确的段，而不是遍历排序列表，以将时间从`O(n)`到`O(log n)`
2.  将搜索重新概念化为通过搜索点找到折线和水平线 y = y0 的交点。然后只需将交点的 x 值与搜索点进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:57:20.517

一个快速的想法：是否可以连接多段线的最后一个顶点和第一个顶点，使其成为多边形？然后，您可以进行简单的内部/外部检查以确定车辆是否位于线的左侧/右侧（这当然取决于多边形的方向）。

但是，这种方法确实假设多边形在连接最后一个和第一个顶点后仍然不是自相交的。

# .net - 格式化 json 文档

> ID：10583214
> 
> 赞同：7
> 
> 时间：2012-05-14T12:20:09.790
> 
> 标签：.net, json, formatting

. 我正在构建一个实用程序来管理 mongo 数据库。我正在使用 Visual Studio 2010 和框架 4.0。现在，当显示文档时，它们没有格式化，因此无法理解。我只是想用缩进和换行来美化它而不序列化它；因为我不使用对象。我刚拿到文件，我想格式化它们。为此，我尝试了 JsonPrettyPrinter.dll，但它使用框架 3.5。我有 json.net，但我不知道如何使用它进行格式化。请告诉我这样做的方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-14T13:54:41.163

如果您使用的是 JSON.NET，则可以使用此代码来格式化（漂亮打印）JSON 文档：

```
string json = "...";
JToken jt = JToken.Parse(json);
string formatted = jt.ToString(Newtonsoft.Json.Formatting.Indented); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:54:31.370

如果可以的话，Chrome 和 Firefox 都有一个有用的插件，叫做 JSONView，可以做你想做的事。

*   [Firefox 的 JSON 视图](https://addons.mozilla.org/en-US/firefox/addon/jsonview/)
*   [适用于 Chrome 的 JSONView](https://chrome.google.com/webstore/detail/chklaanhfefbnpoihckbnefhakgolnmc)

# c# - 在 c# 中将 int 添加到 char 以将其 ascii 值向上移动（就像在 c++ 中一样）

> ID：10583215
> 
> 赞同：18
> 
> 时间：2012-05-14T12:20:09.947
> 
> 标签：c#, c++, integer, character

在 c++ 中，这段代码可以工作：

```
char c='a'; 
int r=2;
c+=r; 
```

这将与`c='c'`. 我怎样才能在 c# 中做同样的事情？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-14T12:22:17.497

`char`在添加之前将其投射到`c`

```
char c='a'; 
int r=2;
c += (char) r; 
```

# ios - 通过代码获取 MSISDN 号码

> ID：10583224
> 
> 赞同：2
> 
> 时间：2012-05-14T12:20:48.037
> 
> 标签：ios, msisdn

有没有办法通过代码获取 MSISDN（移动用户综合服务数字网络号码）号码。

我也导航到其他问题，但没有一个问题得到回答。

对这条道路的任何帮助将不胜感激。

**注意：我需要 MSISDN 号码（在 GSM 中唯一标识订阅的号码）而不是 iPhone 的 UDID。目的是获取该 MSISDN 的语音邮件**

**附加信息：**我刚刚发现 MSISDN 号码是您的**国家代码**和**电话号码**的组合。

MSISDN = CC + NPA + SN

CC - 国家代码

NPA - 号码规划区

SN - 电话号码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:32:12.233

抱歉，您无法使用 iOS SDK 中的公共方法检索用户 MSISDN（我不确定私有方法）。如果苹果公司批准了这一点，我会感到非常惊讶。

你*曾经*能够得到这个号码

```
[[NSUserDefaults standardUserDefaults] objectForKey:@"SBFormattedPhoneNumber"] 
```

但我认为这已在 iOS 4.0 中删除。

# playframework - 是否可以减慢分块响应？

> ID：10583236
> 
> 赞同：0
> 
> 时间：2012-05-14T12:21:39.430
> 
> 标签：playframework

我正在从 Play 1.2.x 应用程序提供二进制数据。由于客户端的硬件限制（较慢的处理器和少量 RAM），仅一个接一个地写入 256 字节的块是行不通的。天真的解决方案是在块之间使用超时，如下所示：

```
while(we have chunks to write) {
   response.writeChunk(aChunk);
   Thread.sleep(250);
} 
```

这工作正常，但显然是一个坏主意，因为我们通过调用睡眠来占用整个服务器。

在 Play 1.2.x 中有正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:43:17.000

如果您的代码在控制器中执行，则可以使用 await() 函数。

```
while(we have chunks to write) {
   response.writeChunk(aChunk);
   await(250);
} 
```

这不会阻塞主播放线程。

# javascript - 使用 css 或 javascript(jquery) 使段落的第一行成为链接

> ID：10583238
> 
> 赞同：0
> 
> 时间：2012-05-14T12:21:50.113
> 
> 标签：javascript, jquery, css, hyperlink, line

我有这个片段：

```
 <div>
       <p class="one">
          a long text that wrap in multiple rows. Lorem ipsum dolor sit amet, 
          consectetur adipisici elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
          ut aliquid ex ea commodi consequat. Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint 
          obcaecat cupiditat non proident, sunt in 
          culpa qui officia deserunt mollit anim id est laborum.
       </p>
    </div> 
```

长文本包裹在 div 中。Div 标签为 565px 宽。因此，div 中的文本在多行（行）中可见，因为它包含文本。

我希望只有第一行成为超链接。

所以，我想得到这个：

```
 <div>
       <p class="one">
          <a href="#">a long text that wrap in multiple rows. Lorem ipsum dolor sit amet, </a>
          consectetur adipisici elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
          ut aliquid ex ea commodi consequat. Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint 
          obcaecat cupiditat non proident, sunt in 
          culpa qui officia deserunt mollit anim id est laborum.
       </p>
    </div> 
```

**更新** 我正在测试这个：

```
<html>
<head>
<style type="text/css">
a:first-line
{
    color:yellow;
}
</style>
</head>

<body>
<h1>WWF's Mission Statement</h1>
<a href="#">a long text that wrap in multiple rows. Lorem ipsum dolor sit amet,
              consectetur adipisici elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
              ut aliquid ex ea commodi consequat. Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint 
              obcaecat cupiditat non proident, sunt in 
              culpa qui officia deserunt mollit anim id est laborum.</a>
</body>
</html> 
```

来自[http://www.w3schools.com/cssref/tryit.asp?filename=trycss_sel_firstline](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_sel_firstline)

但这似乎行不通。为什么伪选择器第一行不适用于超链接标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:36:08.437

div 内的文本会根据浏览器宽度自动换行。您可以获得对 DOM 元素的引用并使用“clientWidth”属性来评估段落中第一行的长度。遍历段落中的每个单词并评估 clientWidth 超过 div 宽度的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:40:10.117

由于我猜您只想出于演示目的而获得它，因此您可以将所有文本包装在链接中，并仅使用 CSS 给出第一行链接外观。您不能使用 CSS 将某些内容转换为链接。

# java - SkyDrive / Dropbox 同步 Android 中的文件/数据库

> ID：10583242
> 
> 赞同：1
> 
> 时间：2012-05-14T12:22:01.860
> 
> 标签：java, android, dropbox, onedrive

我想将 Android 应用程序中的本地数据库文件与用户的 DropBox 或 SkyDrive 帐户同步。什么都行。我无法获得正在运行的代码。请帮忙。

这是我从官方 DropBox 网站获得的代码，但在“final static private AccessType ACCESS_TYPE = AccessType.APP_FOLDER;”处显示错误 作为 NoClassDefFoundError

```
public class DBRoulette extends Activity {
private static final String TAG = "DBRoulette";

///////////////////////////////////////////////////////////////////////////
//                      Your app-specific settings.                      //
///////////////////////////////////////////////////////////////////////////

// Replace this with your app key and secret assigned by Dropbox.
// Note that this is a really insecure way to do this, and you shouldn't
// ship code which contains your key & secret in such an obvious way.
// Obfuscation is good.
final static private String APP_KEY = "5gqlcpeirbe9kju";
final static private String APP_SECRET = "zs9bi3nwqf4arn2";

// If you'd like to change the access type to the full Dropbox instead of
// an app folder, change this value.
final static private AccessType ACCESS_TYPE = AccessType.APP_FOLDER;

///////////////////////////////////////////////////////////////////////////
//                      End app-specific settings.                       //
///////////////////////////////////////////////////////////////////////////

// You don't need to change these, leave them alone.
final static private String ACCOUNT_PREFS_NAME = "prefs";
final static private String ACCESS_KEY_NAME = "ACCESS_KEY";
final static private String ACCESS_SECRET_NAME = "ACCESS_SECRET";

DropboxAPI<AndroidAuthSession> mApi;

private boolean mLoggedIn;

// Android widgets
private Button mSubmit;
private LinearLayout mDisplay;
private Button mPhoto;
private Button mRoulette;

private ImageView mImage;

private final String PHOTO_DIR = "/Photos/";

final static private int NEW_PICTURE = 1;
private String mCameraFileName;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (savedInstanceState != null) {
        mCameraFileName = savedInstanceState.getString("mCameraFileName");
    }

    // We create a new AuthSession so that we can use the Dropbox API.
    AndroidAuthSession session = buildSession();
    mApi = new DropboxAPI<AndroidAuthSession>(session);

    // Basic Android widgets
    setContentView(R.layout.main);

    checkAppKeySetup();

    mSubmit = (Button)findViewById(R.id.auth_button);

    mSubmit.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // This logs you out if you're logged in, or vice versa
            if (mLoggedIn) {
                logOut();
            } else {
                // Start the remote authentication
                mApi.getSession().startAuthentication(DBRoulette.this);
            }
        }
    });

    mDisplay = (LinearLayout)findViewById(R.id.logged_in_display);

    // This is where a photo is displayed
    mImage = (ImageView)findViewById(R.id.image_view);

    // This is the button to take a photo
    mPhoto = (Button)findViewById(R.id.photo_button);

    mPhoto.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent intent = new Intent();
            // Picture from camera
            intent.setAction(MediaStore.ACTION_IMAGE_CAPTURE);

            // This is not the right way to do this, but for some reason, having
            // it store it in
            // MediaStore.Images.Media.EXTERNAL_CONTENT_URI isn't working right.

            Date date = new Date();
            DateFormat df = new SimpleDateFormat("yyyy-MM-dd-kk-mm-ss");

            String newPicFile = df.format(date) + ".jpg";
            String outPath = "/sdcard/" + newPicFile;
            File outFile = new File(outPath);

            mCameraFileName = outFile.toString();
            Uri outuri = Uri.fromFile(outFile);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, outuri);
            Log.i(TAG, "Importing New Picture: " + mCameraFileName);
            try {
                startActivityForResult(intent, NEW_PICTURE);
            } catch (ActivityNotFoundException e) {
                showToast("There doesn't seem to be a camera.");
            }
        }
    });

    // This is the button to take a photo
    mRoulette = (Button)findViewById(R.id.roulette_button);

    mRoulette.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            DownloadRandomPicture download = new DownloadRandomPicture(DBRoulette.this, mApi, PHOTO_DIR, mImage);
            download.execute();
        }
    });

    // Display the proper UI state if logged in or not
    setLoggedIn(mApi.getSession().isLinked());

}

@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putString("mCameraFileName", mCameraFileName);
    super.onSaveInstanceState(outState);
}

@Override
protected void onResume() {
    super.onResume();
    AndroidAuthSession session = mApi.getSession();

    // The next part must be inserted in the onResume() method of the
    // activity from which session.startAuthentication() was called, so
    // that Dropbox authentication completes properly.
    if (session.authenticationSuccessful()) {
        try {
            // Mandatory call to complete the auth
            session.finishAuthentication();

            // Store it locally in our app for later use
            TokenPair tokens = session.getAccessTokenPair();
            storeKeys(tokens.key, tokens.secret);
            setLoggedIn(true);
        } catch (IllegalStateException e) {
            showToast("Couldn't authenticate with Dropbox:" + e.getLocalizedMessage());
            Log.i(TAG, "Error authenticating", e);
        }
    }
}

// This is what gets called on finishing a media piece to import
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == NEW_PICTURE) {
        // return from file upload
        if (resultCode == Activity.RESULT_OK) {
            Uri uri = null;
            if (data != null) {
                uri = data.getData();
            }
            if (uri == null && mCameraFileName != null) {
                uri = Uri.fromFile(new File(mCameraFileName));
            }
            File file = new File(mCameraFileName);

            if (uri != null) {
                UploadPicture upload = new UploadPicture(this, mApi, PHOTO_DIR, file);
                upload.execute();
            }
        } else {
            Log.w(TAG, "Unknown Activity Result from mediaImport: "
                    + resultCode);
        }
    }
}

private void logOut() {
    // Remove credentials from the session
    mApi.getSession().unlink();

    // Clear our stored keys
    clearKeys();
    // Change UI state to display logged out version
    setLoggedIn(false);
}

/**
 * Convenience function to change UI state based on being logged in
 */
private void setLoggedIn(boolean loggedIn) {
    mLoggedIn = loggedIn;
    if (loggedIn) {
        mSubmit.setText("Unlink from Dropbox");
        mDisplay.setVisibility(View.VISIBLE);
    } else {
        mSubmit.setText("Link with Dropbox");
        mDisplay.setVisibility(View.GONE);
        mImage.setImageDrawable(null);
    }
}

private void checkAppKeySetup() {
    // Check to make sure that we have a valid app key
    if (APP_KEY.startsWith("CHANGE") ||
            APP_SECRET.startsWith("CHANGE")) {
        showToast("You must apply for an app key and secret from developers.dropbox.com, and add them to the DBRoulette ap before trying it.");
        finish();
        return;
    }

    // Check if the app has set up its manifest properly.
    Intent testIntent = new Intent(Intent.ACTION_VIEW);
    String scheme = "db-" + APP_KEY;
    String uri = scheme + "://" + AuthActivity.AUTH_VERSION + "/test";
    testIntent.setData(Uri.parse(uri));
    PackageManager pm = getPackageManager();
    if (0 == pm.queryIntentActivities(testIntent, 0).size()) {
        showToast("URL scheme in your app's " +
                "manifest is not set up correctly. You should have a " +
                "com.dropbox.client2.android.AuthActivity with the " +
                "scheme: " + scheme);
        finish();
    }
}

private void showToast(String msg) {
    Toast error = Toast.makeText(this, msg, Toast.LENGTH_LONG);
    error.show();
}

/**
 * Shows keeping the access keys returned from Trusted Authenticator in a local
 * store, rather than storing user name & password, and re-authenticating each
 * time (which is not to be done, ever).
 *
 * @return Array of [access_key, access_secret], or null if none stored
 */
private String[] getKeys() {
    SharedPreferences prefs = getSharedPreferences(ACCOUNT_PREFS_NAME, 0);
    String key = prefs.getString(ACCESS_KEY_NAME, null);
    String secret = prefs.getString(ACCESS_SECRET_NAME, null);
    if (key != null && secret != null) {
        String[] ret = new String[2];
        ret[0] = key;
        ret[1] = secret;
        return ret;
    } else {
        return null;
    }
}

/**
 * Shows keeping the access keys returned from Trusted Authenticator in a local
 * store, rather than storing user name & password, and re-authenticating each
 * time (which is not to be done, ever).
 */
private void storeKeys(String key, String secret) {
    // Save the access key for later
    SharedPreferences prefs = getSharedPreferences(ACCOUNT_PREFS_NAME, 0);
    Editor edit = prefs.edit();
    edit.putString(ACCESS_KEY_NAME, key);
    edit.putString(ACCESS_SECRET_NAME, secret);
    edit.commit();
}

private void clearKeys() {
    SharedPreferences prefs = getSharedPreferences(ACCOUNT_PREFS_NAME, 0);
    Editor edit = prefs.edit();
    edit.clear();
    edit.commit();
}

private AndroidAuthSession buildSession() {
    AppKeyPair appKeyPair = new AppKeyPair(APP_KEY, APP_SECRET);
    AndroidAuthSession session;

    String[] stored = getKeys();
    if (stored != null) {
        AccessTokenPair accessToken = new AccessTokenPair(stored[0], stored[1]);
        session = new AndroidAuthSession(appKeyPair, ACCESS_TYPE, accessToken);
    } else {
        session = new AndroidAuthSession(appKeyPair, ACCESS_TYPE);
    }

    return session;
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:15:26.877

您是否以正确的方式添加到`dropbox-android-sdk.jar`您的 buildPath 中？

DropboxAPI JAR 文件应该在 libs/ 文件夹中，而不是 lib/ 中。

试试这个，告诉我它现在是否有效......

PS：我正在使用 DropboxAPI for android，他们的代码对我来说效果很好，他们的文档非常适合做你自己的应用程序。

# localization - Metro 应用程序本地化问题 (Windows 8)

> ID：10583243
> 
> 赞同：0
> 
> 时间：2012-05-14T12:22:06.763
> 
> 标签：localization, windows-8, microsoft-metro

我有一个从 Visual Studio 11 模板创建的 Metro 风格应用程序。我创建了`strings\en\Resources.resx`和`string\cs\Resources.resx`. 我有一个英语 Windows 8 安装设置为捷克 (cs) 语言环境。当我运行该应用程序时，`strings\en\Resources.resx`总是会从中获取英语资源。日期格式也是英文语言环境（`DateTime.ToString()`显示英文月份名称）。当我删除`strings\en\Resources.resx`获取`string\cs\Resources.resx`时，一切正常。

任何人都可以帮忙吗？我还尝试将程序集设置中的中性语言设置为捷克语并进行编辑`DefaultLang`，`.csproj`但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:36:02.883

我在 MSDN 上找到了这个：

测试其他语言的应用程序。

1.  打开**控制面板**，然后选择**时钟**、**语言**和**区域**> 更改**显示语言**。
2.  请注意，运行应用程序时显示的语言是列出的最上面的语言，即英语、德语或法语。如果您最常用的语言不是这三种语言之一，则该应用程序会退回到该应用程序支持的列表中的下一种语言。
3.  如果您的计算机上没有所有这三种语言，请通过单击添加语言并将它们添加到列表中来添加缺少的语言。
4.  要使用其他语言测试应用程序，请在列表中选择语言并单击上移，直到它位于顶部。然后运行应用程序。

希望这可以帮助？

# java - 正确结束java中的线程

> ID：10583256
> 
> 赞同：-1
> 
> 时间：2012-05-14T12:22:34.580
> 
> 标签：java, multithreading

我对 Java 中的线程有疑问。我想编写一个程序，其中有一个类 Main，它有一些类（类任务）的线程的 ArrayList，它只写一个字母和数字。Object Main 只是从 ArrayList 中唤醒一个线程，并让它在同一个对象（Main）休眠另一个线程时做某事。但是即使我将 Main.ACTIVE 更改为 false 也存在一个问题，它并没有结束所有线程，而且它是随机的，我只想让它们结束并写下：

我说的是goodbay + character - 那样的

```
public class Main extends Thread {
    ArrayList<Thread> threads;
    static boolean ACTIVE = true;
    public Main() {
        super();
        threads = new ArrayList<Thread>();
    }

    public void run(){

        Object monitor = new Object();
        for (int i = 0; i <= 5; i++) {
            threads.add(new Thread(new Task(i + 65, monitor)));
        }

        long cT = System.currentTimeMillis();
        for (int i = 0; i < threads.size(); i++) {
            threads.get(i).start();
        }
        System.out.println("BEFORE synchronized(monitor)");
        synchronized(monitor){
            while (System.currentTimeMillis() - cT < 1000) {
                try{
                    monitor.notify();
                    Thread.sleep(50);
                    monitor.wait();
                } catch(Exception e){
                    e.printStackTrace();}
                }
                System.out.println("BEFORE ACTIVE= FALSE and after WHILE in Main");
                ACTIVE = false;
                for(int i  = 0; i < threads.size(); i++){
                    System.out.println(threads.get(i).getState());
                }
            }
            System.out.println("LAST COMMAND IN MAIN");
        }
    }

    public static void main(String[] args) {
        new Main().start();
        //new Thread(new Task(65)).start();
    }
} 
```

和任务类

```
public class Task implements Runnable {
    int nr;
    char character;
    Object monitor;

    public Task(int literaASCII, Object monitor) {
        this.nr = 0;
        this.monitor = monitor;
        character = (char) (literaASCII);
    }

    @Override
    public void run() {
        synchronized (monitor) {
            while (Main.ACTIVE) {
                try {
                     System.out.println("ENTERING WHILE IN TASK");
                    monitor.wait();
                    System.out.print(nr + "" + character + ", ");
                    nr++;
                    int r = (int) ((Math.random() * 50) + 50); // <500ms,1000ms)
                    Thread.sleep(r);
                } catch (Exception e) {e.printStackTrace();}
                monitor.notify();
                 System.out.println("YYYYYYYYY");
            }
             System.out.println("AFTER WHILE IN Task");
        }
        System.out.println("I am saying goodbye " + character);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:24:35.367

我建议您查看`java.util.concurrent`包中更现代的并发类，尤其是`ExecutorService`. 并阅读“Java 并发实践”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T12:24:27.993

您的问题是针对`ACTIVE`应标记为的初学者`volatile`。任何由多个线程共享的变量都需要以某种方式进行`synchronized`标记或标记，`volatile`以便在其读写周围具有内存屏障。

从布尔的角度来看，您可以做的另一件事是使用`AtomicBoolean`类而不是`volatile boolean`.

而不是 a `static volatile boolean`，您可能会考虑`volatile boolean`为每个`Task`对象设置 a ，以便`Main`对各个任务进行更细粒度的控制，并且您正在使用`static`“全局”变量。您甚至可以添加一种`task.shutdown()`方法来设置活动标志。

最后，正如@duffmo 提到的，`ExecutorService`如果您总是只想让一个线程运行，您应该始终考虑使用其中一个线程池。类似的东西`Executors.newFixedThreadPool(1)`。但是我不能完全确定您是否一直只想要一个线程。如果您使用 an `ExecutorService`then`main`就可以了：

```
ExecutorService threadPool = Executors.newFixedThreadPool(1);
List<Future> futures = new ArrayList<Future>();
for (int i = 0; i <= 5; i++) {
    // the monitor would not be needed
    threadPool.submit(new Task(i + 65));
}
threadPool.shutdown();
for (Future future : futures) {
    // this waits for the working task to finish
    future.get();
} 
```

但是，如果您需要您的后台任务像当前正在使用的那样停止和启动，`monitor`那么此模型可能无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T00:30:13.093

现在纳斯维尔是

0A, 0B, 0C, 0D, 0E, 0F, 1A, 1B, 1C, 1D, 1E, 1F, 等待等待等待等待等待等待等待最后一个命令在主

我在启动线程后添加了睡眠

```
import java.util.ArrayList;

public class Main extends Thread {
ArrayList<Thread> threads;
volatile static boolean ACTIVE = true;
public Main() {
    super();
    threads = new ArrayList<Thread>();
}

 public void run(){

Object monitor = new Object();
for (int i = 0; i <= 5; i++) {
  threads.add(new Thread(new Task(i + 65, monitor)));
}

long cT = System.currentTimeMillis();
for (int i = 0; i < threads.size(); i++) {
  threads.get(i).start();
}
try{Thread.sleep(50);}catch(Exception e){e.printStackTrace();}
 //   System.out.println("BEFORE synchronized(monitor)");
synchronized(monitor){
  while (System.currentTimeMillis() - cT < 1000) {
      try{

    monitor.notify();
    Thread.sleep(500);

    monitor.wait();}catch(Exception e){e.printStackTrace();}
  }
   //    System.out.println("BEFORE ACTIVE= FALSE and after WHILE in Main");
  ACTIVE = false;
  for(int i  = 0; i < threads.size(); i++){
      System.out.println(threads.get(i).getState());
  }

}
System.out.println("LAST COMMAND IN MAIN");

  }

  public static void main(String[] args) {
     new Main().start();
    //new Thread(new Task(65)).start();

}

} 
```

和任务

```
public class Task implements Runnable {
int nr;
char character;
Object monitor;

public Task(int literaASCII, Object monitor) {
    this.nr = 0;
    this.monitor = monitor;
    character = (char) (literaASCII);
}

@Override
public void run() {
    synchronized (monitor) {
        while (Main.ACTIVE) {
            try {
//               System.out.println("ENTERING WHILE IN TASK");
                monitor.wait();
                System.out.print(nr + "" + character + ", ");
                nr++;
                int r = (int) ((Math.random() * 50) + 50); // <500ms,1000ms)

                Thread.sleep(r);
            } catch (Exception e) {e.printStackTrace();}
            monitor.notify();
    //       System.out.println("YYYYYYYYY");
        }
         System.out.println("AFTER WHILE IN Task");
    }
    System.out.println("I am saying goodbye " + character);
} 
```

}

# c# - 使用 TPL 的多线程跨类取消

> ID：10583258
> 
> 赞同：1
> 
> 时间：2012-05-14T12:22:40.287
> 
> 标签：c#, multithreading, task-parallel-library, cancellation

总之，我有一个长时间运行的进程，我使用任务并行库 (TPL) 在后台线程（支持取消）上运行。这个长期运行的任务的代码包含在`Class Validation`, 当方法

```
public bool AsyncRunValidationProcess(TaskScheduler _uiScheduler, 
    CancellationToken _token, dynamic _dynamic = null)
{
    try
    {

        // Note: _uiScheduler is used to update the UI thread with progress infor etc.

        for (int i = 0; i < someLargeLoopNumber; i++)
        {
            // Cancellation requested from UI Thread.
            if (_token.IsCancellationRequested) 
                _token.ThrowIfCancellationRequested();
        }
        return true;
    }
    catch (Exception eX)
    {
        // Do stuff. Display `eX` if cancellation requested.
        return false;
    }
} 
```

从运行`Class Validation`我可以很好地取消该过程。取消请求由适当的`delegate`（如下所示）处理，并且工作正常（我不相信这是我的问题的原因）。

当我从另一个类运行此方法时`Class Batch`，我通过“控制器”方法执行此操作

```
asyncTask = Task.Factory.StartNew<bool>(() => asyncControlMethod(), token); 
```

进而调用该方法

```
valForm.AsyncRunValidationProcess(uiScheduler, token, 
    new List<string>() { strCurrentSiteRelPath })); 
```

`valForm`我的访问者在哪里`Class Validation`，该方法运行良好，但是当我尝试取消时`delegate`

```
cancelHandler = delegate 
{
    UtilsTPL.CancelRunningProcess(asyncTask, cancelSource);
}; 
```

在哪里

```
public static void CancelRunningProcess(Task _task, 
    CancellationTokenSource _cancelSource)
{
    try
    {
        _cancelSource.Cancel();
        _task.Wait(); // On cross-class call it freezes here.
    }
    catch (AggregateException aggEx)
    {
        if (aggEx.InnerException is OperationCanceledException)
            Utils.InfoMsg("Operation cancelled at users request.");
        if (aggEx.InnerException is SqlException)
            Utils.ErrMsg(aggEx.Message);
    }
} 
```

冻结/挂起（没有未处理的异常等）`_task.Wait()`。这（我相信 - 通过测试）与我正在取消`asyncControlMethod()`已调用的事实有关`valForm.AsyncRunValidationProcess(...)`，因此它正在取消`asyncControlMethod()`导致当前进程挂起。问题似乎在于将`CancellationTokenSource`等传递给子方法。该`IsCancellationPending`事件触发并终止控制方法，从而导致子方法挂起。

**谁能告诉我我做错了什么或者（更相关地），我应该怎么做才能允许这样的取消程序？**

*注意：我试图生成一个子任务来运行`valForm.AsyncRunValidationProcess(...)`，`CancellationToken`但它没有奏效。*

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:44:29.123

这个问题的答案（由 Jiaji Wu 的评论和链接提供了大量帮助）是您不能将 声明`CancellationToken`为传递给级联方法的全局变量；也就是说，你不能拥有

```
public class MainClass
{
    private CancellationTokenSource = source;
    private CancellationToken token;

    public MainClass()
    {
        source = new CancellationtokenSource();
        token = source.Token;
    }

    private void buttonProcessSel_Click(object sender, EventArgs e)
    {
        // Spin-off MyMethod on background thread.
        Task<bool> asyncControllerTask = null;
        TaskSpin(asyncControllerTask, cancelSource, token, MyMethod);
    }

    private void method()
    {
        // Use the global token DOES NOT work!
        if (token.IsCancellationRequested)      
            token.ThrowIfCancellationRequested();
    }

    private void TaskSpin(Task<bool> asyncTask, CancellationTokenSource cancelSource,
        CancellationToken token, Func<bool> asyncMethod)
    {
        try
        {
            token = cancelSource.Token;
            asyncTask = Task.Factory.StartNew<bool>(() => asyncMethod(token), token);

            // To facilitate multitasking the cancelTask ToolStripButton
            EventHandler cancelHandler = null;
            if (cancelSource != null)
            {
                cancelHandler = delegate
                {
                    UtilsTPL.CancelRunningProcess(mainForm, uiScheduler, asyncTask, cancelSource, true);
                };
            }

        // Callback for finish/cancellation.
            asyncTask.ContinueWith(task =>
            {
                // Handle cancellation etc.
            }

            // Other stuff...
        }
    }
} 
```

在后台线程上运行的方法中使用全局令牌不起作用！该方法必须显式传递`token`才能注册它。我不确定为什么会这样的确切原因，但我以后会知道，现在你需要传递令牌来`MyMethod()`喜欢这个

```
 private void method(CancellationToken token)
    {
        // Use the global token DOES NOT work!
        if (token.IsCancellationRequested)      
            token.ThrowIfCancellationRequested();
    } 
```

我希望这对其他人有帮助。

# mercurial - 如何使用 mercurial 内置模板？

> ID：10583260
> 
> 赞同：2
> 
> 时间：2012-05-14T12:22:51.737
> 
> 标签：mercurial, hgserve

Mercurial 捆绑了一些模板。它们可以存储在`/usr/local/lib/python2.7/dist-packages/mercurial/templates/`或`/usr/share/mercurial/templates`.

在这个文件夹中有几个文件：

```
map-cmdline.bisect
map-cmdline.changelog
map-cmdline.compact
map-cmdline.default
map-cmdline.xml 
```

它们是在命令行中使用的样式，例如`hg log -l 10 --style changelog`.

还有文件夹：

```
atom
coal
gitweb
monoblue
paper
raw
rss
spartan 
```

它们中的每一个都包含如下文件：

```
bookmarkentry.tmpl
bookmarks.tmpl
changelogentry.tmpl
changelog.tmpl
error.tmpl
filelog.tmpl
header.tmpl
map
tagentry.tmpl
tags.tmpl 
```

我猜这些是与`hg serve`. 尝试使用选项运行 hgweb 时，`-t`出现以下错误：

```
$ hg serve -t paper
listening at http://127.0.0.1:8000/ (bound to *:8000)
127.0.0.1 - - [14/May/2012 14:16:38] "GET / HTTP/1.1" 500 -
127.0.0.1 - - [14/May/2012 14:16:38] Exception happened during processing request '/':
Traceback (most recent call last):
   [traceback here]
RuntimeError: No hgweb templates found in ['paper'] 
```

有谁知道这个文件夹/文件是什么以及如何`hg serve`使用不同的模板运行？

ps.：我使用 Mercurial 2.1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:03:22.357

您需要使用该`--style`标志来指定模板样式，例如 gitweb 或 paper。

```
hg serve --style paper 
```

这将在共享模板文件夹中查找并使用那里的模板集。该`-t`选项需要一个指向一组模板的路径。

# python - Python 图像库错误 - 渲染时捕获 IOError：没有足够的数据

> ID：10583265
> 
> 赞同：1
> 
> 时间：2012-05-14T12:23:14.187
> 
> 标签：python, django, python-imaging-library, sorl-thumbnail

我创建了一个网站，它使用 sorl-thumbnail 来调整上传的图像大小。大多数图像都在调整大小时没有任何问题，但很少有人收到以下错误：

```
Caught IOError while rendering: not enough data
Request Method: GET
Request URL:    http://localhost:8000/user/nash22/photographs/
Django Version: 1.3.1
Exception Type: TemplateSyntaxError
Exception Value:    
Caught IOError while rendering: not enough data
Exception Location: /usr/local/lib/python2.7/site-packages/PIL/TiffImagePlugin.py in load, line 382
Python Executable:  /usr/local/bin/python
Python Version: 2.7.1 
```

我在谷歌上搜索，但找不到任何相关答案。有人可以帮助我发生了什么，我该如何解决？谢谢你。

## 编辑

完整的追溯

> 回溯（最近一次通话最后）：
> 
> 文件“/lib/python2.7/django/core/handlers/base.py”，第 111 行，在 get_response response = callback(request, *callback_args, **callback_kwargs)
> 
> 文件“/home/swaroop/project/apps/photography/views.py”，第 702 行，在 showPhoto context_instance=RequestContext(request))
> 
> 文件“/lib/python2.7/django/shortcuts/init **.py** ”，第 20 行，在 render_to_response 返回 HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
> 
> 文件“/lib/python2.7/django/template/loader.py”，第 188 行，在 render_to_string 返回 t.render(context_instance)
> 
> 文件“/lib/python2.7/django/template/base.py”，第 123 行，在渲染中返回 self._render(context)
> 
> _render 中的文件“/lib/python2.7/django/template/base.py”，第 117 行 return self.nodelist.render(context)
> 
> 文件“/lib/python2.7/django/template/base.py”，第 744 行，在渲染 bits.append(self.render_node(node, context))
> 
> 文件“/lib/python2.7/django/template/base.py”，第 757 行，在 render_node 返回 node.render(context)
> 
> 文件“/lib/python2.7/django/template/loader_tags.py”，第 127 行，在渲染中返回已编译_parent._render(context)
> 
> _render 中的文件“/lib/python2.7/django/template/base.py”，第 117 行 return self.nodelist.render(context)
> 
> 文件“/lib/python2.7/django/template/base.py”，第 744 行，在渲染 bits.append(self.render_node(node, context))
> 
> 文件“/lib/python2.7/django/template/base.py”，第 757 行，在 render_node 返回 node.render(context)
> 
> 文件“/lib/python2.7/django/template/loader_tags.py”，第 64 行，在渲染结果 = block.nodelist.render(context)
> 
> 文件“/lib/python2.7/django/template/base.py”，第 744 行，在渲染 bits.append(self.render_node(node, context))
> 
> 文件“/lib/python2.7/django/template/base.py”，第 757 行，在 render_node 返回 node.render(context)
> 
> 文件“/lib/python2.7/sorl/thumbnail/templatetags/thumbnail.py”，第 45 行，在渲染中返回 self._render(context)
> 
> 文件“/lib/python2.7/sorl/thumbnail/templatetags/thumbnail.py”，第 97 行，在*渲染文件*，几何，**选项中
> 
> 文件“/lib/python2.7/sorl/thumbnail/base.py”，第 61 行，在 get_thumbnail 缩略图中）
> 
> 文件“/lib/python2.7/sorl/thumbnail/base.py”，第 86 行，在 _create_thumbnail image = default.engine.create(source_image, geometry, options)
> 
> 文件“/lib/python2.7/sorl/thumbnail/engines/base.py”，第 15 行，在 create image = self.orientation(image, geometry, options)
> 
> 文件“/lib/python2.7/sorl/thumbnail/engines/base.py”，第 26 行，方向返回 self._orientation(image)
> 
> 文件“/lib/python2.7/sorl/thumbnail/engines/pil_engine.py”，第 29 行，在 _orientation exif = image._getexif()
> 
> _getexif info.load(file) 中的文件“/usr/local/lib/python2.7/site-packages/PIL/JpegImagePlugin.py”，第 381 行
> 
> 文件“/usr/local/lib/python2.7/site-packages/PIL/TiffImagePlugin.py”，第 382 行，加载引发 IOError，“数据不足”
> 
> IOError：没有足够的数据

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T12:41:50.150

*更新*

`image._getexif`据称是高度实验性的。参考 sorl [-thumbnail](https://github.com/sorl/sorl-thumbnail/blob/master/sorl/thumbnail/engines/pil_engine.py#L27)和[issue #98](https://github.com/sorl/sorl-thumbnail/issues/98)，您可以将代码更新为

```
def _orientation(self, image):
    try:
        exif = image._getexif()
    except (AttributeError, IOError):
        exif = None 
```

* * *

这是由 PIL 尝试加载损坏或可能不受支持的 TIFF 文件引起的。
通常当你使用Django 时`forms.ImageField`，Django 会检查上传图片的正确性。
因此，您需要：

*   确保您使用`forms.ImageField`（默认为`models.ImageField`）来处理视图中的上传
*   检查上传的图片

    ```
    from PIL import Image
    Image.open(path).load() 
    ```

*   使用处理 TIFF 的工具包打开图像，如果可以打开，将其保存为 Jpeg 或 Png 并更新模型实例的字段以指向新文件。

您也可以限制用户上传普通格式，例如 jpeg/png/gif 而不是 TIFF

# php - 创建错误页面并修改htaccess？

> ID：10583267
> 
> 赞同：0
> 
> 时间：2012-05-14T12:23:18.970
> 
> 标签：php, html, apache, .htaccess

我正在尝试为我的网站创建错误页面，我使用以下代码创建了一个**.htaccess文件：**

`ErrorDocument 403 /403.htm``

`ErrorDocument 404 /404.htm`

我还创建了 html 文件，我将它上传到了根目录，但它不起作用。

如果我做错了什么，谁能告诉我？

提前致谢

> 块引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:43:18.217

首先，我会尝试添加此指令，并测试 404 以查看它是否有效：

```
ErrorDocument 404 "Sorry, no file here" 
```

如果您没有收到该错误，那么很可能您的 .htaccess 文件没有被处理。您需要确保它已在您的服务器上启用，等等。您的 ErrorDocument 指令也可能在某个地方指定，而您正在测试的上下文没有读取它。

如果您确实遇到了该错误，我接下来要做的就是确保您的错误文档在您认为的位置。您提到您将它们上传到项目的根目录，所以我会尝试浏览它们并看看会发生什么。

# wkhtmltopdf - 每个页面上的 wkhtmltopdf 标题

> ID：10583272
> 
> 赞同：8
> 
> 时间：2012-05-14T12:23:34.377
> 
> 标签：wkhtmltopdf

我正在使用 wkhtmltopdf 将 html 转换为 pdf。

我想在每一页中添加页眉，但它只显示在第一页（目录）中。我正在使用的命令是`"C:\Program Files\wkhtmltopdf\wkhtmltopdf.exe" toc --xsl-style-sheet default.xsl --header-html header.html http://a-url-to-a-page.com "some\folder\outputs\output-%time:~0,2%-%time:~3,2%-%time:~6,2%.pdf"`

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-27T14:11:18.780

（由 OP 解决并由问题编辑回答。在此处转录为社区 wiki 答案 - 虽然它有点简洁。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 终于解决了，问题是`--header-html`应该在目录相关的东西之前......

@Nenotlep 写道：

> `wkhtmltopdf`特别关注给定参数的顺序。

# jmeter - 摘要报告中如何测量吞吐量、Kb/sec 和平均字节数？

> ID：10583275
> 
> 赞同：2
> 
> 时间：2012-05-14T12:23:38.277
> 
> 标签：jmeter

谁能解释一下摘要报告中如何测量吞吐量、Kb/sec 和平均字节？

我得到以下登录操作的摘要报告。

```
Label : Login Action(sampler)
Sample# : 1
average: 104    
min : 104
max : 104
stddev : 0
error% : 0
Throughput : 9.615384615
Kb/Sec : 91.74053486
Average Bytes : 9770 
```

你能给我详细的解释吗？通过谷歌时我无法清除。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:07:51.583

**以 KB/s 为单位的吞吐量 =（事务吞吐量 * 平均字节数）/1024**

例如：

```
91.74053486  = (9.615384615 X 9770) / 1024 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:40:14.957

这些值在[此处](http://jmeter.apache.org/usermanual/component_reference.html#Summary_Report)详述。它们是不言自明的。

# java - Android 密度和分辨率及其布局

> ID：10583276
> 
> 赞同：2
> 
> 时间：2012-05-14T12:23:45.623
> 
> 标签：java, android

您如何区分 320x480（180dpi 密度）分辨率和 480x800（233 dpi 密度）分辨率的布局实现？似乎当我创建 layout-mdpi 和 layout-hdpi 时，它们都从第一个读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:30:21.447

您好，您制作了错误的文件夹您可以为布局（xml）制作 4 个文件夹和为图像制作 3 个文件夹

```
 For layout 4 Folders are :
    i) layout-small
    ii) layout
    iii) layout-large
    iv) layout-xlarge
 For Images 3 Folders 
   i) drawable-ldpi
   ii) drawable-mdpi
   iii) drawable-hdpi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:33:06.977

对于 320X480 分辨率，使 Layout-normal ,drawable-mdpi

并为 480X800 分辨率制作 Layout-large,drawable-mdpi 文件夹

# php - 我的会话代码有什么问题

> ID：10583277
> 
> 赞同：0
> 
> 时间：2012-05-14T12:23:46.343
> 
> 标签：php, html, session, syntax

你能帮帮我吗，我正在学习会话的概念，它可以帮助我用户登录。我做了以下 php 代码，但收到了这个错误：解析错误：语法错误，意外的 T_STRING，期待'，'或' ;' 在第 12 行的 C:\wamp\www\w3\login.php 中。

```
<?php
    session_start();
        echo "      <html>
                    <body>
                    <br/>
                    <table border = '0'  width = '100%' height = '100%'><tr>
                    <td width = '30%' height = '100%'>&nbsp;</td><td valign = 'top'>    
                    <a href='display.html'>Display</a>";
    if(!isset($_SESSION['loged'])){     
        echo "      <fieldset><legend>Log In</legend>
                    <center><table border = '0'>
                    <form action="log.php" method="post">
                    <tr><td>Username:</td><td><input type="text" name="username" /></td></tr>   
                    <tr><td>Password:</td><td><input type="password" name="pwd" /></td></tr>
                    <tr><td colspan = '2' align = 'center'><input type="submit" value="submit" /></td></tr>
                    </form>
                    </table></center>
                    </fieldset> ";
    }

    else{
        header(location:index.html);
        die();
    }
        echo "      </td><td width = '30%' height = '100%'>&nbsp;</td>  
                    </tr></table>       
    </body>
    </html>";
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:25:27.713

您需要`"`在字符串中转义。

它需要是

```
<form action=\"log.php\" method=\"post\"> 
```

或更好：

```
<form action='log.php' method='post'> 
```

更好：

```
echo ' .... action="..." ' 
```

最好的：

```
 <?php php-code... ?>
 HTML-Code 
 <?php php-code... ?> 
```

这当然对于您的所有代码行都是必要的。

编辑：

另外，你需要写：

```
header('location:index.html'); 
```

（蒂@保罗）

如评论中所述，最好不要回显如此大的 html 段。尤其是在使用双引号时，php-parser 做了很多不必要的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:27:04.547

在这部分使用单引号或转义双引号：

```
<form action="log.php" method="post">
   <tr><td>Username:</td><td><input type="text" name="username" /></td></tr>   
   <tr><td>Password:</td><td><input type="password" name="pwd" /></td></tr>
   <tr><td colspan = '2' align = 'center'><input type="submit" value="submit" /></td></tr>
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T12:27:11.097

```
echo "      <fieldset><legend>Log In</legend>
                    <center><table border = '0'>
                    <form action="log.php" method="post">
                    <tr><td>Username:</td><td><input type="text" name="username" /></td></tr>   
                    <tr><td>Password:</td><td><input type="password" name="pwd" /></td></tr>
                    <tr><td colspan = '2' align = 'center'><input type="submit" value="submit" /></td></tr>
                    </form>
                    </table></center>
                    </fieldset> "; 
```

有引用问题。

尝试

```
echo "      <fieldset><legend>Log In</legend>
                        <center><table border = '0'>
                        <form action='log.php' method='post'>
                        <tr><td>Username:</td><td><input type='text' name='username' /></td></tr>   
                        <tr><td>Password:</td><td><input type='password' name='pwd' /></td></tr>
                        <tr><td colspan = '2' align = 'center'><input type='submit' value='submit' /></td></tr>
                        </form>
                        </table></center>
                        </fieldset> "; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T12:27:20.287

将其更改为

```
<form action='log.php' method='post'> 
```

之后您还会在以下几行中多次使用它 - 将双引号更改为单引号。

并改变：

```
header("location: index.html"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T12:28:32.187

我认为你的第一个问题是一个逃避问题。当你做你的回声时，你必须为每个 " 字符添加一个 \

# asp.net - 如何从正在使用的 REST API (ServiceStack) 获取 URI

> ID：10583278
> 
> 赞同：3
> 
> 时间：2012-05-14T12:23:49.587
> 
> 标签：asp.net, c#-4.0, rest, servicestack

我有一些关于我使用 servicestack 构建的 REST API 的问题。最终用户将从托管在其服务器上的应用程序中使用此 API。我想获取使用此 REST API 的绝对 uri 和 IP 地址。

当我按照下面的方法在本地进行测试时，它会给我 REST API 本身的 URL，而不是使用它的应用程序。

```
 string str = RequestContext.AbsoluteUri.ToString(); 
```

请我如何获取有关我的 REST API 正在使用的源的详细信息。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:50:47.957

我不确定我是否正确理解了这个问题，你想要引荐网址吗？还是物理位置路径？无论哪种方式，原始 ASP.NET 请求对象都应该包含您可以在 Web 服务中访问的所有信息：

```
var aspnetReq = (HttpRequest)RequestContext.Get<IHttpRequest>().OriginalRequest; 
```

您可以使用它来访问有关请求的所有信息。

# jquery - jquery 执行某些代码后的绑定操作或阻止执行某些代码行的绑定操作

> ID：10583279
> 
> 赞同：0
> 
> 时间：2012-05-14T12:23:49.330
> 
> 标签：jquery, html, jquery-animate

刷新（F5）后，文档将位于上一个视点位置。我希望始终在负载时将其置于首位。如果我们不在顶部，我用 jquery 编写了一些代码来滚动到文档的顶部。

但是当页面刷新并且`scrollTo(0,0);`- 绑定动作也执行了。如何预防？这不是用户操作...换句话说：我需要在之后绑定（'scroll'）`scrollTo(0,0);`

```
$(document).ready(function(){
var DisableSomeFunctionFlag == false;

scrollTo(0,0); // when auto scrolled - bind executed. how to prevent?

$(window).bind("scroll", function() {
if ( DisableSomeFunctionFlag != false ) 
{
  alert('scrolling');  
}
});

}); 
```

# scala - 在 Scala 中动态生成案例类

> ID：10583283
> 
> 赞同：2
> 
> 时间：2012-05-14T12:23:58.213
> 
> 标签：scala, macros, squeryl

我想读取一个相当大的 csv 文件并对其进行处理（切片、骰子、汇总等）`interactively`（数据探索）。我的想法是将文件读入数据库（H2）并使用 SQL 来处理它：

1.  阅读文件：我使用[Ostermiller csv 解析器](http://ostermiller.org/utils/CSV.html)

2.  确定每一列的类型：我随机选择50行，导出每一列的类型（int、long、double、date、string）

3.  我想用[Squeryl](http://squeryl.org/)来处理。为此，我需要动态创建一个案例类。这就是目前为止的瓶颈！

4.  我将文件上传到 H2 并使用任何 SQL 命令。

我的问题：

*   在 Scala 中有更好的通用交互方式吗？
*   有没有办法解决第三点？换一种说法，给定一个类型列表（对应于 csv 文件中的列），是否可以动态创建对应于 Squeryl 中的表的案例类？据我了解，我可以使用宏来做到这一点，但我没有足够的曝光率来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:39:36.330

我认为你对第一个问题的态度听起来很合理。

关于您的第二个问题 - 作为 drexin 答案的补充 - 可以使用[ASM](http://asm.ow2.org/)等库生成字节码。使用这样的库，您可以生成与案例类相同的字节码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:34:44.387

由于 scala 是一种静态类型语言，除了反射之外没有其他方法可以动态创建类，反射是缓慢而危险的，因此应该避免。即使使用宏，您也无法做到这一点。宏在编译时评估，而不是在运行时评估，因此您需要在编译时了解数据的结构。如果您甚至不知道您的数据是什么样的，您需要案例类做什么？与使用 a 相比，您期望从中获得什么好处`Map[String,Any]`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T21:01:55.000

我认为您想创建一个密封的基类，然后创建一系列案例类作为它的子类。每个子类将包装您支持的不同类型。

然后，您可以使用匹配语句和解构来处理各个类型，并通过基类在无关紧要的地方对它们进行通用处理。

你不能为整行创建一个类，因为你在编译时对它的了解不够。即使您可以动态生成一个类（可能通过在运行时调用编译器），您也无法从类型安全中受益，并且您的大多数代码无论如何都必须对其进行通用处理。

# windows-phone-7 - System.Windows.Navigation.NavigationService.Navigate 抛出无效操作异常

> ID：10583284
> 
> 赞同：3
> 
> 时间：2012-05-14T12:23:59.300
> 
> 标签：windows-phone-7

```
Frame    Image             Function                                                Offset    
0        coredll.dll       xxx_RaiseException                                      19        
1        mscoree3_7.dll                                                            436488    
2        mscoree3_7.dll                                                            386545    
3        mscoree3_7.dll                                                            540936    
4                          TransitionStub                                          0         
5                          System.Windows.Navigation.NavigationService.Navigate    1652      
6                          XXX.Components.pushScreen        172       
7                          XXX.pushHomeScr                                 996       
8                          XXX.update                                      1488      
9                          .__c__DisplayClass3._ResponseReady_b__0                 700       
10       mscoree3_7.dll                                                            429164    
11       mscoree3_7.dll                                                            185803    
12       mscoree3_7.dll                                                            184423    
13                         System.Reflection.RuntimeMethodInfo.InternalInvoke      112       
14                         System.Reflection.RuntimeMethodInfo.InternalInvoke      1556      
15                         System.Reflection.MethodBase.Invoke                     104       
16                         System.Delegate.DynamicInvokeOne                        476       
17                         System.MulticastDelegate.DynamicInvokeImpl              84        
18                         System.Windows.Threading.DispatcherOperation.Invoke     80        
19                         System.Windows.Threading.Dispatcher.Dispatch            404 
```

我正在使用以下代码推送新页面

```
Uri navigateUritemp = new Uri(url, UriKind.RelativeOrAbsolute);
if(scrObj.NavigationService.CurrentSource != navigateUritemp)
{
scrObj.NavigationService.Navigate(navigateUritemp);
} 
```

看起来以下行正在引发 invalidoperationexception

```
scrObj.NavigationService.Navigate(navigateUritemp); 
```

有人能说出这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T16:03:53.647

我看到`InvalidOperationException`发生这种情况的一种常见情况是，如果同时尝试多个导航，或者在应用程序不在前台时发生导航尝试。

例如，如果用户在缓慢导航发生时设法再次点击应用栏按钮，则可能会发生这种情况。

快速搜索显示其他人也看到过同样的事情 - 例如[http://www.nickharris.net/2011/01/windows-phone-7-navigation-is-not-allowed-when-the-task-is-不在前台/](http://www.nickharris.net/2011/01/windows-phone-7-navigation-is-not-allowed-when-the-task-is-not-in-the-foreground/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:48:36.647

尝试使用`if (scrObj.NavigationService.CurrentSource.equals(navigateUritemp))`也许这会有所帮助。您是否一直遇到此异常？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T13:05:01.393

尝试执行以下操作：

1.  创建一个新项目并删除其余代码并保留与 NavigationService 相关的代码。
2.  创建一个文件夹（将文件夹命名为主屏幕）
3.  添加 2 个 XAML 页面（例如：Page1.xaml、Page2.xaml）
4.  从 MainPage.xaml 测试 NavigationService 代码

    **试试这个：**

    NavigationService.Navigate(new Uri("/homescreen/Page1.xaml", UriKind.Relative));
    **或**
    NavigationService.Navigate(new Uri("/homescreen/Page2.xaml", UriKind.Relative));

如果您使用 UriKind.Relative 确保指定正确的路径，例如：如果您使用“homescreen/Page2.xaml”它想要工作，您必须使用“/homescreen/Page2.xaml”、“/”开头你的路径就像 ASP.NET 中的“root”或“~”

# ruby - 在 RUBY 上的 PADRINO 框架上使用 RSPEC 进行测试的教程

> ID：10583286
> 
> 赞同：5
> 
> 时间：2012-05-14T12:24:07.943
> 
> 标签：ruby, rspec, sinatra, rspec2, padrino

我`new to Ruby`被要求在我们的新项目中使用它。我们还被要求`Padrino (Sinatra)`用作后端/框架。对于测试，我们被要求使用`Rspec`. 我一直在寻找可以指导`using Rspec for Ruby on Padrino`. 我得到的主要是参考 RoR。但是，我需要 Ruby on Padrino。

请指导我与任何初学者/指南/参考/讨论等相同。

请纠正我，如果我在任何地方错了。可能是我没有针对我的问题使用正确的单词/短语组合进行搜索。

我正在使用`Ruby 1.9.3`和`Padrino v.0.10.6`。

注意：我也提到了[SO question](https://stackoverflow.com/questions/201385/getting-started-with-rspec-looking-for-tutorials)，但没有帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T15:02:58.260

我从未使用过Padrino，但它似乎与Sinatra 没有太大区别。

我建议阅读 Sinatra 和 RSpec 资源。您可以开始使用：

*   [如何在 Sinatra 应用程序中使用 rspec](http://net.tutsplus.com/tutorials/ruby/how-to-integrate-rspec-into-a-sinatra-app/)
*   [Sinatra、RSpec 和 DataMapper：配置和使用数据库进行测试](http://www.dinduks.com/sinatra-rspec-and-datamapper-configuring-and-using-a-database-for-tests)

通过阅读其他人在 GitHub 上编写的规范。[这些是我的一些](https://github.com/Dinduks/furry-octo-ninja/tree/master/spec)，但它们不是最干净的东西。

* * *

**编辑：一个简短的教程**

开始使用这个框架比使用 Sinatra 更快、更容易。:)

安装帕德里诺：`gem install padrino`

创建应用程序：`padrino g project myapp -d datamapper -t rspec`
命令不言自明。:)

运行测试：`rspec --color`
显然没有找到测试。让我们创建一个`spec/hello/hello_spec.rb`：

```
require File.dirname(__FILE__) + "/../spec_helper.rb"

describe "get '/'" do
  it "should display hello world" do
    get '/'
    last_response.body.should == "Hello world!"
  end
end 
```

再次运行测试。
他们失败了，因为没有路线`get '/'`存在。让我们创建它。

在`app/controllers/hello.rb`：

```
Myapp.controller do
  get '/' do
    "Hello world!"
  end
end 
```

运行测试：它通过了！

查看[Padrino 的文档](http://www.padrinorb.com/guides)以获取更多信息和很酷的功能，例如控制器生成器和管理界面。

祝你好运！

# linux - iostat 与 /proc/diskstats

> ID：10583288
> 
> 赞同：0
> 
> 时间：2012-05-14T12:24:28.040
> 
> 标签：linux, performance, iostat

我想监控 linux 系统的 io 性能，尤其是读取性能。iostat 命令为读取和写入组合提供了 await 和 svctim，这不适合我。

文件 /proc/diskstats 在第 1 列中给出了已完成的读取次数，在第 4 列中给出了读取所花费的毫秒数。列 我认为第 4 列除以第 1 列会给我平均阅读时间。我的想法是每 x 秒采样一次并进行计算。

对于写入，我将采用第 5 和第 8 列。

这是正确的方法吗？有任何警告吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:34:54.630

你读过 iostat 的手册页吗？有 r_await 和 w_await 列。svctim 已弃用

# c# - ajax文件上传后如何从部分更新模型？

> ID：10583293
> 
> 赞同：1
> 
> 时间：2012-05-14T12:24:44.513
> 
> 标签：c#, jquery, asp.net, ajax, asp.net-mvc

所以我有 ajax 文件上传部分（使用[Jquery Form](http://jquery.malsup.com/form/)插件），它工作得很好，但我不知道在文件上传后更新模型值

```
<div>
   @Html.Partial("PhotoUpload", Model.Place)
</div> 
```

在这里，我称其为 partial 并将其作为模型的一部分。

```
@model PlaceMap.DAL.Entities.Place
@using (Html.BeginForm("PhotoUpload", "Place", FormMethod.Post, new { @id = "photoUpload", enctype = "multipart/form-data" }))
{
    {
        @Html.ValidationSummary(true, "Image upload was unsuccessful")
        @Html.HiddenFor(m => m.Photo)                                                                                                                                                                                  
        <input type="file" id="file" name="file"/>
        <input type="submit" id="sbm" />
    }
} 
```

这是部分视图代码，接受模型和上传表单

```
var options = {
    url: "/Place/PhotoUpload",
    dataType: "json",
    clearForm: true,
    resetForm: true,
    success: showResponse
};

function showResponse(responseText, statusText, xhr, $form)
{
    $('#photo').append('<img src="/Images/Places/' + responseText.Photo + '" />');
}

$('#photoUpload').submit(function ()
{
    $('#photoUpload').ajaxSubmit(options);
    return false;
}); 
```

插件的Javascript代码

```
 [Authorize]
    [HttpPost]
    public ActionResult PhotoUpload(string Photo, HttpPostedFileBase file)
    {
        try
        {
            using (var ms = new MemoryStream())
            {
                //some logic here
                return Json(new { Photo = filename });
            }

        }
        catch (ArgumentException)
        {

        }

        return PartialView();
    } 
```

控制器操作代码。它返回文件名，它将转到 js 函数“showResponse”并将图像附加到 div。这一切都很好，但我必须将文件名写入这个部分的@Model.Photo，我不知道该怎么做。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:36:06.990

一种可能性是`text/plain`从服务器使用：

```
return Json(new { Photo = filename }, "text/plain"); 
```

并在客户端手动解析：

```
function showResponse(responseText, statusText, xhr, $form) {
    var data = $.parseJSON(responseText);
    $('#photo').append('<img src="/Images/Places/' + data.Photo + '" />');
} 
```

显然，您希望删除此`dataType: 'json'`选项。

另一种可能性是遵循文档中的[说明](http://jquery.malsup.com/form/#file-upload)`<textarea>`并编写自定义操作结果，该结果将使用标签包装您的 JSON 响应：

> 支持 XMLHttpRequest Level 2 的浏览器将能够无缝上传文件，甚至在上传过程中获得进度更新。对于较旧的浏览器，使用涉及 iframe 的后备技术，因为无法使用 XMLHttpRequest 对象的 1 级实现来上传文件。这是一种常见的后备技术，但它具有固有的局限性。iframe 元素用作表单提交操作的目标，这意味着将服务器响应写入 iframe。如果响应类型是 HTML 或 XML，这很好，但如果响应类型是脚本或 JSON，则效果不佳，这两种类型通常都包含在 HTML 标记中找到时需要使用实体引用来表示的字符。
> 
> 为了解决使用 iframe 模式时脚本和 JSON 响应的挑战，Form Plugin 允许将这些响应嵌入到 textarea 元素中，建议您在与文件上传和旧版本结合使用时对这些响应类型这样做浏览器。但是请注意，如果表单中没有文件输入，则请求使用普通 XHR 提交表单（不是 iframe）。这给你的服务器代码增加了知道什么时候使用 textarea 什么时候不使用的负担。如果您愿意，您可以使用插件的 iframe 选项强制它始终使用 iframe 模式，然后您的服务器始终可以将响应嵌入到 textarea 中。但推荐的解决方案是测试“X-Requested-With”请求标头。如果该标头的值为“XMLHttpRequest”

# android - AndroidPlot，设置不同的 DomainValueFormats

> ID：10583297
> 
> 赞同：3
> 
> 时间：2012-05-14T12:25:04.720
> 
> 标签：android, androidplot

我正在尝试对图表中的 x 标签执行以下操作。

第一个标签应该有格式：

```
plot.getGraphWidget()
        .setDomainValueFormat(new SimpleDateFormat("dd/MM/yyyy hh:mm:ss")); 
```

所有其他标签应该只显示分钟和秒：

```
plot.getGraphWidget()
        .setDomainValueFormat(new SimpleDateFormat("mm:ss")); 
```

我可以为所有标签设置格式，但我不知道如何仅为第一个标签更改它。我的图表是动态的，并且每秒都在变化（传入的数据每秒都会更新一个新值）。

是否有可以帮助我的功能？（网站关闭时很难找到...）或任何其他提示？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T17:13:38.413

假设您的域模型中没有重复值，您可以跟踪您的第一个值并在自定义 Formatter 实现中测试相等性。这并不漂亮，但因为没有办法将被绘制的项目的索引传递给格式化程序，这是我能看到的唯一方法。

# events - 在 VBA 中运行宏之前检查工作表是否已更新

> ID：10583298
> 
> 赞同：2
> 
> 时间：2012-05-14T12:25:09.393
> 
> 标签：events, vba, excel

我正在编写一个宏，其中有一个中央输入表-让我们将此表称为-“主输入表”，用户在其中输入相关变量。在“主要输入表”中有一些输入说 - “还有输入表吗？” - 当“是”时，将显示与输入相对应的工作表（它以前被隐藏） - 我们称之为“关联输入表”。现在，我想确保用户在运行宏之前更新“关联输入表”。有没有办法可以做到这一点 - 使用 VBA 提供的事件处理程序或使用任何其他方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:08:11.860

Worksheet_Change 事件过程可能是要走的路，除非您在工作表的其他地方发生了其他事情，从而进行了大量更改。

那时，您的问题可以改写为：“自从我上次检查以来，我的范围有变化吗？”

抓取范围的副本并将其存储在某处，并逐个单元格地检查缓存副本的当前范围是一种蛮力方法：如果你只做一次也没关系，但如果你正在做它反复存储哈希更有效 - 由某种校验和函数生成的短代码或数字。

校验和算法各不相同。Adler32 简单快速，但性能很差——你会得到“哈希冲突”或无法为不同的数据输入返回不同的哈希值——比较（比如）一对 6-10 个字母的单词。但是，当被要求检测对 24 个 8 字母单词的列或数千个日期和数字的表的更改时，它确实表现得非常好。

查找其他哈希 - 并保持最新状态：您的 PC 将拥有多个带有 MD5 和 sha1 等哈希的库，它们的性能应该比 VBA 中的手动哈希更好。

这是一些使用 Adler-32 校验和的演示代码。阅读代码注释，您需要了解其中的一些内容才能使其适应您的项目：

```
Public Function RangeHasChanged() As Boolean

' Demonstration function for use of the Checksum() function below.

' For more advanced users, I have a 'Watched Range' class on the website:
'   http://excellerando.blogspot.com

' Author: Nigel Heffernan, May 2006  http://excellerando.blogspot.com

' Please note that this code is in the public domain. Mark it clearly, with
' the author's name, and segregate it from any proprietary code if you need
' to assert ownership & commercial confidentiality on that proprietary code

' Coding Notes:

' It is expected that this function will be saved in the host worksheet's
' module and renamed to indicate the range or table being monitored. It's a
' good idea to use a named range rather than a hardcoded address.

' You might also choose to edit the '1 To 255' to the width of your range.

' Initialising the static values so that the first check in your VBA session
' does not automatically register a 'change' is left as an exercise for the
' reader: but calling the function on opening the workbook works well enough

' This is intended for use in VBA, not for use on the worksheet. Use the
' setting 'Option Private Module' to hide this from the function wizard.

    Dim rngData As Excel.Range
    Dim arrData As Variant

    Dim lngChecksum As Long
    Static lngExisting As Long

    ' Note that we capture the entire range in an Array, then work on the array:
    ' this is a single 'hit' to the sheet (the slow operation in any interaction
    ' with worksheet data) with all subsequent processing in VBA.

    ' BS 10/11/2021:  Modified to look at the current selection if the hard-coded worksheet does not exist.
    If Evaluate("ISREF('DataEntryMain'!A1)") Then
        Set rngData = ThisWorkbook.Names("DataEntryMain").RefersToRange
    Else
        Set rngData = Intersect(Selection, Selection.parent.UsedRange) ' Reduce the range so it is never bigger than the UsedRange.
    End If

    arrData = rngData.Value2

    RangeHasChanged = False

    lngChecksum = CheckSum(arrData)

    If rngData.count > 1 Then
        ' The passed range is more than one cell.  Release the dynamic-array storage space.
        Erase arrData
    End If

    ' lngExisting is zero when the file opens, and whenever the
    ' VBA project is reinitialised, clearing all the variables.
    ' Neither of these events should be reported as a 'change'.

    If lngExisting <> lngChecksum And lngExisting <> 0 Then
        RangeHasChanged = True
    End If

    lngExisting = lngChecksum

    Debug.Print RangeHasChanged, "The Adler-32 for " & rngData.Address & " is " & lngChecksum, Hex(lngChecksum)

End Function

' I could've sworn I posted this here, years ago, but here's an implementation of Adler-32 in
' 32-bit VBA.
'
' There 's a horrible hack in it: Adler-32 returns a 32-bit integer, and the VBA Long is a signed
' integer with a range ± (2^31) -1, so I've implemented a 'wrap around' of the overflow at +2^31,
' restarting at -2^31 +1\. And done something I really, really shouldn't have done with a
' floating-point variable. Eventually everyone, everywhere, will have 64-bit Office and this'll
' be kind of quaint and unnecessary... Right?
'
' Of course, the real question is: why bother?
'
' It boils down to the common question of checking for changes: if you don't want to use the 'on
' change' event, or you're dealing with data directly in VBA before it hits the sheet, large data
' sets need something better than an item-by-item brute force approach. At least, if you're doing
' it more than once: the cost of rolling each item into your hash is always more than the cost of
' the one-by-one comparison...
'
' ...And that's still true if you're importing a fast hashing algorithm from MySQL or one of the
' web API libraries (try MDA5, if you can get at an exposed function), unless you can find
' something that reads VBA variant arrays directly and relieve your VBA thread of the task of
' enumerating the list values into the imported function.
'
' Meanwhile, here's a hash algorithm that's within reach of VBA: Adler32\.  The details are in
' Wikipedia’s article on Adler32: http://en.wikipedia.org/wiki/Adler-32 and an hour's testing
' will teach you some lessons about hashing:
'
' 'Hash collisions' (differing data sets returning the same hash code) are more common than you
' expected, especially with data containing repeated patterns (like dates);>
' Choice of hashing algorithm is important;
' ...And that choice is more of an art than a science;
' Admitting that you really shouldn't have bothered and resorting to brute force is often the
' better part of valour.
'
' Adler-32 is actually more useful as a tool to teach those lessons, than as a workaday checksum.
' It's great for detecting changes in lists of more than 100 distinct items; it's tolerable, on a
' list of 24 randomly-generated 8-letter words (hash collisions at 1 in 1800 attempts) and it
' starts giving you single-digit percentage occurrences of the hash collision error in a list of
' 50 not-so-distinct option maturities, where the differences are mostly in the last 10 chars and
' those ten chars are recurring 3-month maturity dates.
'
' By the time you're comparing pairs of 6-letter strings, more than 10% of your changes will be
' missed by the checksum in a non-random data set. And then you realise that might as well be
' using string comparison for that kind of trivial computation anyway.
'
' So the answer is always: test it.
'
' Meanwhile, here 's the algorithm, horrible hacks and all:

Public Function CheckSum(ByRef ColArray As Variant) As Long
    Application.Volatile False

    ' Returns an Adler32 checksum of all the numeric and text values in a column

    ' Capture data from cells as myRange.Value2 and use a 32-bit checksum to see
    ' if any value in the range subsequently changes. You can run this on multi-
    ' column ranges, but it's MUCH faster to run this separately for each column
    '
    ' Note that the VBA Long Integer data type is not a 32-bit integer, it's a
    ' signed integer with a range of  ± (2^31) -1\. So our return value is signed
    ' and return values exceeding +2^31 -1 'wraparound' and restart at -2^31 +1.

    ' Coding Notes:

    ' This is intended for use in VBA, and not for use on the worksheet. Use the
    ' setting  'Option Private Module' to hide CheckSum from the function wizard

    ' Author: Nigel Heffernan, May 2006  http://excellerando.blogspot.com
    ' Acknowledgements and thanks to Paul Crowley, who recommended Adler-32

    ' Please note that this code is in the public domain. Mark it clearly, with
    ' the author's name, and segregate it from any proprietary code if you need
    ' to assert ownership & commercial confidentiality on your proprietary code

    Const LONG_LIMIT As Long = (2 ^ 31) - 1
    Const MOD_ADLER As Long = 65521

    Dim a As Long
    Dim b As Long

    Dim i As Long
    Dim j As Long
    Dim k As Long

    Dim arrByte() As Byte

    Dim dblOverflow As Double

    If TypeName(ColArray) = "Range" Then
        ColArray = ColArray.Value2
    End If

    If IsEmpty(ColArray) Then
        CheckSum = 0
        Exit Function
    End If

    If (VarType(ColArray) And vbArray) = 0 Then
        ' single-cell range, or a scalar data type
        ReDim arrData(0 To 0, 0 To 0)
        arrData(0, 0) = CStr(ColArray)
    Else
        arrData = ColArray
    End If

    a = 1
    b = 0

    For j = LBound(arrData, 2) To UBound(arrData, 2)
        For i = LBound(arrData, 1) To UBound(arrData, 1)

            ' VBA Strings are byte arrays: arrByte(n) is faster than Mid$(s, n)

            arrByte = CStr(arrData(i, j))  ' Is this type conversion efficient?

            For k = LBound(arrByte) To UBound(arrByte)
                a = (a + arrByte(k)) Mod MOD_ADLER
                b = (b + a) Mod MOD_ADLER
            Next k

            ' Terminating each item with a 'vTab' char constructs a better hash
            ' than vbNullString which, being equal to zero, adds no information
            ' to the hash and therefore permits the clash ABCD+EFGH = ABC+DEFGH
            ' However, we wish to avoid inefficient string concatenation, so we
            ' roll the terminating character's bytecode directly into the hash:

            a = (a + 11) Mod MOD_ADLER                ' vbVerticalTab = Chr(11)
            b = (b + a) Mod MOD_ADLER

        Next i

        ' Roll the column into the hash with a terminating horizontal tab char:

        a = (a + 9) Mod MOD_ADLER                     ' Horizontal Tab = Chr(9)
        b = (b + a) Mod MOD_ADLER

    Next j

    ' Using a float in an integer calculation? We can get away with it, because
    ' the float error for a VBA double is < ±0.5 with numbers smaller than 2^32

    dblOverflow = (1# * b * MOD_ADLER) + a

    If dblOverflow > LONG_LIMIT Then  ' wraparound 2^31 to 1-(2^31)    
        Do Until dblOverflow < LONG_LIMIT
            dblOverflow = dblOverflow - LONG_LIMIT
        Loop
        CheckSum = 1 + dblOverflow - LONG_LIMIT
    Else
        CheckSum = b * MOD_ADLER + a
    End If

End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:36:25.053

有一个 Worksheet_change 事件可能会做你想做的事：

```
Private Sub Worksheet_Change(ByVal Target As Range)

End Sub 
```

将其放在“主要信息表”的代码中，每次更改工作表时都会运行。

但是，如果您不希望每次更新工作表时都运行电子表格，而只想检查它是否已更新......您可以做的是创建一个这样的全局变量（必须放置声明在标准模块中：

```
Global MainSheetHasChanged as Boolean 
```

然后，您只需将这行代码放在 worksheet_changed 宏中：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    MainSheetHasChanged = True
End Sub 
```

只需确保在运行其他宏后始终将变量设置回 false。这是你要找的吗？

# c# - 什么 WPF 控件适合在对话框表中模拟 MS Excel 类型的工作表过滤？

> ID：10583299
> 
> 赞同：1
> 
> 时间：2012-05-14T12:25:12.113
> 
> 标签：c#, wpf, wpf-controls

要求：

1.  行必须分组到组
2.  这些组将有小计行=实际数据行的数据源中没有的标题行。
3.  排序和过滤应该使行保持在其组/标题下
4.  每列可用于排序和过滤
5.  可以添加和删除列
6.  过滤就像在 Excel 中一样 -> 按多列，并且可以选择每列的许多值作为过滤条件。
7.  过滤掉的行不在小计行中计算。
8.  可能其他非数据行可以在表中，自然它们不受小计计算/过滤的影响。

我特别想知道是否支持这样的过滤： http: [//cybersavvyservices.files.wordpress.com/2011/04/excel-filter-drop-down.png](http://cybersavvyservices.files.wordpress.com/2011/04/excel-filter-drop-down.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T18:17:29.327

似乎 DataGridView 可能是控件。不支持半 Excel 过滤，但可以使用

[http://msdn.microsoft.com/en-us/library/aa480727.aspx](http://msdn.microsoft.com/en-us/library/aa480727.aspx)

但是文章中描述的方法并不完美：

*   它依赖于绑定的数据源，当我的行不属于数据源时可能会出现问题。
*   似乎选择过滤值仅支持单选。
*   将非数据标题行下的实际数据行分组完全不清楚
*   使用非数据标题行的排序和过滤功能可能是一个问题

然而，这可能是一个起点，因为不存在现成的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:22:49.747

添加第二个答案可能会导致百万票反对，但必须添加它，因为我之前的答案似乎没有意义。

我发现一篇文章或多或少地描述了我的原始文件中所述的要求。问题：

[http://msdn.microsoft.com/en-us/library/ff407126.aspx](http://msdn.microsoft.com/en-us/library/ff407126.aspx)

要求：

1.  -> 文章解释了这一点
2.  -> 这些可以通过使其更复杂来添加到组标题中。可以像文章中的行总和一样获取列的总和
3.  -> 默认功能
4.  -> 排序适用于文章中的所有列。过滤示例可以扩展
5.  -> 这必须实施。列标题可以具有用于隐藏列的控件（请参阅我[在定义和绑定 CollectionView 时是否可以在 WPF DataGrid 中隐藏列？](https://stackoverflow.com/questions/10605910/is-it-possible-to-hide-columns-in-wpf-datagrid-when-defined-and-bound-with-colle)）
6.  -> 为列标题实现弹出窗口并用该列中的值动态填充它
7.  -> 使用转换器和绑定显示组标题中值的 ui 元素很容易实现。
8.  -> 它可以作为额外的行添加到绑定的数据源，或者如果每个组的数据很少，数据可以显示在 groupheader 中。

# c# - 依赖属性重入（或：为什么会这样？）

> ID：10583307
> 
> 赞同：6
> 
> 时间：2012-05-14T12:25:33.237
> 
> 标签：c#, wpf, dependency-properties

简而言之，我可以在 WPF 控件中创建 2 个依赖属性，并在每个属性更改通知中放置代码以更改其他属性（即`PropA`更改集`PropB`和`PropB`更改集`PropA`）。

我希望这会消失在它自己的背面，但 WPF 似乎可以很好地处理它。对于我的目的来说，这实际上非常方便，但我在任何地方都找不到这种行为记录。

发生什么了？WPF 依赖属性更改通知系统是否可以防止重入？

代表代码如下：

**XAML**：

```
<Window x:Class="WPFReentrancy1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TextBox Text="{Binding PropB, UpdateSourceTrigger=PropertyChanged}"/>

    </Grid>
</Window> 
```

**后面的代码：**

```
 public partial class MainWindow : Window
    {

        public string PropA
        {
            get { return (string)GetValue(PropAProperty); }
            set { SetValue(PropAProperty, value); }
        }
        public static readonly DependencyProperty PropAProperty =
                        DependencyProperty.Register("PropA", typeof (string), typeof (MainWindow),new UIPropertyMetadata("0", PropAChanged));

        public string PropB
        {
            get { return (string)GetValue(PropBProperty); }
            set { SetValue(PropBProperty, value); }
        }

        public static readonly DependencyProperty PropBProperty =
            DependencyProperty.Register("PropB", typeof (string), typeof (MainWindow), new UIPropertyMetadata("", PropBChanged));

        private static void PropBChanged(DependencyObject lDependencyObject, DependencyPropertyChangedEventArgs lDependencyPropertyChangedEventArgs)
        {
            ((MainWindow) lDependencyObject).PropA = (string) lDependencyPropertyChangedEventArgs.NewValue;
        }

        private static void PropAChanged(DependencyObject lDependencyObject, DependencyPropertyChangedEventArgs lDependencyPropertyChangedEventArgs)
        {
            ((MainWindow) lDependencyObject).PropB =
                double.Parse((string) lDependencyPropertyChangedEventArgs.NewValue).ToString("0.000");
        }

        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;
            PropA = "1.123";
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:41:14.833

*只有在属性发生更改*时才会触发这些回调，您的代码不会创建*不同值*的无限循环。

试试这个，你会得到一个 SO 异常：

```
private static readonly Random _random = new Random();
private static void PropBChanged(DependencyObject lDependencyObject, DependencyPropertyChangedEventArgs lDependencyPropertyChangedEventArgs)
{
    ((MainWindow)lDependencyObject).PropA = _random.Next().ToString();
}
private static void PropAChanged(DependencyObject lDependencyObject, DependencyPropertyChangedEventArgs lDependencyPropertyChangedEventArgs)
{
    ((MainWindow)lDependencyObject).PropB = _random.Next().ToString();
} 
```

# python - 使用opencv编写pgms时如何更改最大灰度的默认值？

> ID：10583311
> 
> 赞同：1
> 
> 时间：2012-05-14T12:25:48.293
> 
> 标签：python, image, opencv, pgm

我正在使用 python 使用 opencv 编写 pgm，如下所示...

```
 cv.SaveImage("a.pgm",np.array(image.astype(np.uint16))) 
```

所以，我将我的数据转换为无符号 16 位。问题是在写入pgm时灰度级的最大值设置为65535，我的数据最大值为1103。

我的猜测是，当我们在 opencv 中保存 pgms 时，该值由数据类型计算并设置为最大值，而不是基于实际数据。

有人可以帮忙告诉如何做到这一点，以便写入最大灰度的正确值。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:36:46.850

在保存之前，您只需要将图像乘以转换因子。在您的情况下，因素将是`65535 / 1103`. 您可以使用[ConvertScale](http://opencv.willowgarage.com/documentation/python/core_operations_on_arrays.html#ConvertScale)来执行此操作，它允许您通过一个标量来倍增一个数组。像这样：

```
cv.ConvertScale(im, im, scale=65535 / 1103.0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-08T09:48:40.843

这有点hacky，使用风险自负。如果 OpenCV 可以本地解决这个问题，我会更喜欢。如果您没有完全填充 16 位范围（Irfanview 中的低对比度等），默认实现会导致各种麻烦。

```
def write_pgm_realmax(path, img):
    maxval = img.max()
    cv2.imwrite(path, img)
    with open(path, 'rb') as fid:
        s = fid.read()
    # the 1 makes sure we replace only the first occurrence.
    s = s.replace(b'\n65535\n', b"\n" + str(maxval) + "\n", 1)
    with open(path, 'wb') as fid:
        fid.write(s) 
```

该代码可能不是超级健壮，也不是非常高性能，但它是一个开始的地方。它使用 OpenCV 保存 pgm，然后再次打开文件并将第一个单行字符串“65535”（最大可能的 uint16 值）替换为实际最大值。

# jquery - JQuery - 动态选择和选项在 IE9 中不起作用

> ID：10583316
> 
> 赞同：1
> 
> 时间：2012-05-14T12:26:33.860
> 
> 标签：jquery, internet-explorer, html-select

我有一个需要从另一个选择中驱动的动态选择，但我似乎无法让它在 IE 中工作（使用 IE9）。我在这里看过这篇文章，但是（除非我不理解）这似乎没有帮助：[Dynamic Related Selects with jQuery, not work in IE](https://stackoverflow.com/questions/8004365/dynamic-related-selects-with-jquery-not-work-in-ie)。

我真的把它简化了，所以很容易理解这个问题。我有 2 个选择，1 个驱动另一个。因此，当您在第一个中选择某些内容时，第二个会更改。对于这个例子，我只是在选择中添加一个新项目，即使这在 IE 中也不起作用：

```
var mydiv = $("#testdiv");
$("<select id='f1'>").appendTo(mydiv);
$("<select id='f2'>").appendTo(mydiv);
$("#f1").append("<option value='1'>1</option>");
$("#f1").append("<option value='2'>2</option>");
$("#f2").append($("<option>").attr("value", "n"));
$("#f1").change(function () {
    $("#f2").append("<option value='t1'>t1</option>");
});

<div id="testdiv"></div> 
```

因此，理论上我们应该从 2 个选择列表开始，“f2”将在其中包含 1 个空白选项。

接下来，从“f1”中选择一个项目，它将为“f2”添加一个新选项。

这完全符合我在 Firefox 和 chrome 中的要求。在 IE 中，它的行为很奇怪。以 IE 为例：

方案 1

1.  我打开页面并检查“f2”选择。它有 1 个空白值
2.  我在“f1”中选择一个项目
3.  我检查“f2”，它仍然有 1 个空白值

方案 2

1.  我打开页面并没有触摸“f2”选择。
2.  我在“f1”中选择一个项目
3.  我检查了“f2”，它有 2 个项目！
4.  我在“f1”中选择了另一个项目
5.  我检查了“f2”，它仍然有 2 个项目？！？

所以看起来我第一次激活选择控件时它必须对现有的 HTML 做一些事情......现在这就是它要从这里呈现的全部......

这让我发疯，我做错了什么？！？

注意：不确定是否重要，但两个选择都是使用 javascript/jquery 动态生成的，因为在异步调用完成之前我不知道它们的值。

***由于通过评论进行调查而更新了问题......似乎我关于动态创建对象的最后一个注释对于重新创建问题至关重要***

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T14:05:24.777

我发现了另一种更简单的解决方法。

使用 append() 或 html() 设置动态创建的选择的选项，然后简单地隐藏（）和显示（）选择。

```
var mydiv = $("#testdiv");
$("<select id='f1'>").appendTo(mydiv);
$("<select id='f2'>").appendTo(mydiv);
$("#f1").append("<option value='1'>1</option>");
$("#f1").append("<option value='2'>2</option>");
$("#f2").append($("<option>").attr("value", "n"));
$("#f1").change(function () {
    $("#f2").append("<option value='t1'>t1</option>").hide().show();
});

<div id="testdiv"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T14:58:31.400

弄清楚了。在一些网站上阅读有关 IE 中选择的一些错误以及必须使用 div 作为解决方法的信息。所以解决方案是每次要刷新列表时重新发布 div 中的 html。像这样的东西：

```
var mydiv = $("#testdiv");
var mydiv2 = $("#testdiv2");
$("<select id='f1'>").appendTo(mydiv);
$("<select id='f2'>").appendTo(mydiv2);
$("#f1").append("<option value='1'>1</option>");
$("#f1").append("<option value='2'>2</option>");
$("#f2").append($("<option>").attr("value", "n"));
$("#f1").change(function () {
    var tempdiv = $("<div>");
    $("#f2").append("<option value='t1'>t1</option>");
    $("#f2").appendTo(tempdiv);
    $("#testdiv2").html($(tempdiv).html());
});

...

<div id="testdiv"></div>
<div id="testdiv2"></div> 
```

重要的部分是“testdiv2”并使用“tempdiv”中的 html 填充它。可能是一种更简洁的方法，但同时上述方法对我有用。这是 jsfiddler 中的一个有效解决方案：http: [//jsfiddle.net/VHPt5/4/](http://jsfiddle.net/VHPt5/4/)

**更新**

此外，实现与@Ingenator 在下面不同答案中的评论中发布的相同内容的方式略有不同。而不是像这样替换 HTML：

```
$("#f2").appendTo(tempdiv);
$("#testdiv2").html($(tempdiv).html()); 
```

您可以清除原始 div 并重新附加它：

```
$("#testdiv2").clear();
$("#f2").appendTo($("#testdiv2")); 
```

最终，相同的解决方案，但无需生成 tempdiv 以替换第一个 div 的 html。

解决方案：http: [//jsfiddle.net/cAr57/3/](http://jsfiddle.net/cAr57/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:49:33.563

```
 $(document).ready(function () {
        $("#fieldtype1").append($('<option />', { 'text': 'n', 'value': 'n' }));

        $("#field1").on('change', function () {
            $("#fieldtype1").html('');

            var data = [{ 'name': '1', 'value': '1' }, { 'name': '2', 'value': '2' }, { 'name': '3', 'value': '3' }, { 'name': '4', 'value': '4'}]

            $.each(data, function (i, entity) {
                $("#fieldtype1").append($('<option />', { 'text': entity.name, 'value': entity.value }));
            });

            $("#fieldtype1").trigger('change');
        });
    });

<select id="field1">
    <option value="2">2</option>
    <option value="4">4</option>
</select>
<select id="fieldtype1">
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-11T00:56:29.463

我使用 jquery clone 让它工作：

```
$("#f2").append("<option value='t1'>t1</option>");
var $temp = $("#f2").clone();
$("#f2").html($temp.html()); 
```

你的回答对我有帮助，但我认为因为我的选择是在一个模式中它表现得很奇怪，这是我可以让它在 IE 中工作的唯一方法。希望这对其他人有帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-05T17:48:10.237

它在 IE 上不起作用的原因是因为您试图将选择元素插入到选择元素中，这是有道理的，尽量不要只添加新选项的选择标签。

```
<td>
<select id='dinamicSelect'>
    <option value='2'>dinamicOption1</option>
    <option value='4'>dinamicOption2</option>
</select>
</td> 
```

和jQuery

```
$('#dinamicSelect').html("<select><option value='123'>newOption</option></select>"); //won't work on IE

$('#dinamicSelect').html("<option value='123'>newOption</option>"); //Works 
```

希望这可以帮助。

# php - Wordpress/PHP 中的持久对象

> ID：10583319
> 
> 赞同：0
> 
> 时间：2012-05-14T12:26:48.167
> 
> 标签：php, performance, wordpress, caching, object-persistence

我想创建一组持久对象，它们从数据库加载它们的状态，然后持久保存在内存中，以便 Wordpress/PHP 页面加载用作缓存的内存对象。我会想象这些对象的接口包括：

*   initialise() - 从数据库加载状态并在服务请求之前执行所需的任何其他初始化功能
*   getter_foo() - PHP 代码调用内存缓存响应的一系列 getter 方法
*   getter_bar() - PHP 代码调用内存缓存响应的一系列 getter 方法
*   update() - 由时间或事件驱动的进程调用，要求对象返回数据库并刷新其状态

我怀疑的两个技巧是：

1.  让主 PHP 进程分配并保存这些对象的内存引用，以便它们在 Web 事务/请求中保持固定到内存，而无需每次针对数据库重新初始化
2.  具有允许事务进程获得指向此对象的指针的机制。

有没有这样做的解决方案示例？我已经编程多年，但对 Wordpress 和 PHP 都很陌生，所以也许这很简单。没有把握。无论如何，我确实认识到像*redis*和*memcached*这样的技术解决方案可能会实现类似的目标，但会以不那么优雅和非上下文的方式实现。也就是说，如果没有简单的方法可以做到这一点，我很乐意使用 80/20 规则。:^)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:41:59.407

不可能在 1 个请求期间将数据存储在内存中，然后在另一个请求期间仅使用纯 PHP 将其从内存中读回。当然 PHP 进程使用内存，但是一旦你的请求完成，那部分内存就会被垃圾收集。这意味着第二个请求无法再次访问内存的前一部分。

您所暗示的称为缓存。简而言之，缓存意味着您可以保存昂贵交易的输出以供以后重复使用，以节省该交易的成本。然后，您使用什么作为后端来存储该输出取决于您或您有什么可用的。如果要将其保存到 RAM，则需要 Memcached 之类的东西。您也可以将其存储在常规文件中，但由于正在访问硬盘驱动器，因此速度较慢。

# floating-point - 非规范化什么时候真正有用？

> ID：10583321
> 
> 赞同：6
> 
> 时间：2012-05-14T12:27:00.710
> 
> 标签：floating-point, ieee-754

每当我搜索术语“非正规数”或“非正规数”时，我只能找到如何检测它们并将它们四舍五入的方法。显然，没有人真正喜欢它们，因为与它们打交道会导致性能损失。

然而，它们无处不在。为什么？如果是为了精确，我会说你需要一个更大的浮点数，或者改变你的操作顺序，这样你就可以避免非常小的中间值。我很难相信一点点额外的精度真的值得宝贵的时钟周期。

有什么好的理由仍然使用非正规数吗？如果没有重要的理由产生非正规数，为什么要实施它们呢？只是为了符合 IEEE754 标准？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T12:59:29.143

简而言之，因为逐渐下溢保留了一些有用的数学恒等式（例如 xy == 0 意味着 x == y）。关于为什么逐渐下溢可能有用的一些解释：

[http://grouper.ieee.org/groups/754/faq.html#underflow](http://grouper.ieee.org/groups/754/faq.html#underflow)

[http://www.cs.berkeley.edu/~wkahan/ARITH_17U.pdf](http://www.cs.berkeley.edu/~wkahan/ARITH_17U.pdf)

是的，在某些情况下，由于糟糕的应用程序设计会遇到下溢，正确的措施是修复应用程序。在其他情况下，在逐渐下溢下正常工作的应用程序会在突然下溢下失败。

此外，

*   在许多情况下，慢但正确被认为比快速但危险更好的默认设置。

*   由于逐渐下溢是默认设置，谷歌发现人们对此抱怨并希望将其关闭。如果 OTOH 突然下溢是默认设置，也许您会看到更多人抱怨神秘的数字问题？数值编程已经够难了！

*   现代硬件减少了使用次正规数的惩罚。参见例如[http://www.agner.org/optimize/blog/read.php?i=142&v=t](http://www.agner.org/optimize/blog/read.php?i=142&v=t)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T13:03:33.003

非正规非常有用；浮点计算中有许多有用的错误界限，如果您删除非正规（最重要的是`x-y == 0`当且仅当`x == y`），这些错误界限将不再正确。

同样重要的是要记住（a）非规范化不会对*所有*硬件造成惩罚；存在可以快速（或非常接近）处理非规范化的系统，并且（b）非规范化只会在您实际遇到非规范化时减慢您的计算速度。如果您不使用它们，则无需为它们付费（如果您*最终*使用它们，那么如果没有它们，您的结果可能会是错误的——如果您只是想尽快得到错误的答案，您可以用 ) 替换整个计算`return 0`。

# ios - For循环忽略滚动视图中uibuttons的isKindOfClass

> ID：10583325
> 
> 赞同：3
> 
> 时间：2012-05-14T12:27:07.430
> 
> 标签：ios, for-loop, tags

我有在 uiview 中创建、添加和标记取消按钮的代码，该 uiview 本身位于 uiscrollview 中。在某个时刻，我尝试更改（背景颜色和图像）一些带有某些标签的取消按钮。问题是如果我选择第一个带有标签 0 的按钮，for 循环会因为 uiscrollview 或 uiview 没有该方法可用而导致图像更改。但我试图只针对视图中的取消按钮（全部同步）。如果我选择任何其他按钮，它会按预期工作。我可以将标签从 0 偏移到 1，但我想知道为什么我的 for 循环不起作用。

```
for (int i=0; i<[devicesArray count]; i++) {
    NSLog(@"red %i", i);

    for (UIView *subview in [uiv_ButtonsView subviews]) {
        if([subview isKindOfClass:[UIButton class]]) {
            int number = [[devicesArray objectAtIndex:i] intValue];
            subview.alpha=1.0;
            [[subview viewWithTag:number] setBackgroundColor:[UIColor redColor]];
            UIButton *btttn = (UIButton *)[subview viewWithTag:number];
            [btttn setBackgroundImage:nil forState:UIControlStateNormal];
        }
    }
} 
```

谢谢 - 这是现在工作的代码：

```
for (int i=0; i<[devicesArray count]; i++) {
    int number = [[devicesArray objectAtIndex:i] intValue];
    [[uiv_Quilt viewWithTag:number] setBackgroundColor:[UIColor redColor]];
    [[uiv_Quilt viewWithTag:number] setBackgroundImage:nil forState:UIControlStateNormal];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T12:39:03.163

```
for (UIView *subview in [uiv_ButtonsView subviews]) { 
```

`subView`是 uiv_ButtonsView 的子视图

```
if([subview isKindOfClass:[UIButton class]]) { 
```

`subView`是一个`UIButton`

```
[[subview viewWithTag:number] setBackgroundColor:[UIColor redColor]]; 
```

嗯。现在你得到了 UIButton 的子视图*，*标签为 0 - 这是所有视图的默认标签。你在 UIButton 的私有视图层次结构中，我们不知道这是什么。

```
UIButton *btttn = (UIButton *)[subview viewWithTag:number]; 
```

再次相同——你已经告诉编译器你从这个调用中得到了一个按钮，但你不会。`subView`已经是一个按钮，按钮没有其他按钮作为子视图。

```
[btttn setBackgroundImage:nil forState:UIControlStateNormal]; 
```

所以这行代码是行不通的。

我不明白您为什么要在 上进行所有操作`subView`，或者使用`[uiv_ButtonsView viewWithTag:xx]`来获取按钮。在后一种情况下，您需要从 1 开始标记，因为所有视图的默认标记都是 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:54:13.453

对`[subview viewWithTag:number]`我来说没有意义（你的按钮，子视图，大概没有更多的子视图）。并且通过您的 devicesArray 进行迭代并通过 uiv_ButtonsView 进行嵌套迭代也没有任何意义。如果您使用标签，则不需要遍历 uiv_ButtonsView 的子视图，而是可以使用`[uiv_ButtonsView viewWithTag:number]`.

# php - Facebook 从外部站点登录

> ID：10583326
> 
> 赞同：3
> 
> 时间：2012-05-14T12:27:08.210
> 
> 标签：php, facebook, curl, facebook-login

我的网站中有 Facebook 应用程序。当我们集成 Facebook 时，它每次都会导致 facebook 登录页面，但我想从 mysite 登录 facebook。我将为 facebook 提供单独的登录表单，当我们在 mysite login 中输入 facebook 凭据时，它将登录到 facebook 而无需询问 facebook 登录页面。有可能吗？我尝试了以下 curl 功能但没有成功

```
<?php

$EMAIL      = "fb_user_email";
 $PASSWORD   = "password";

  function cURL($url, $header=NULL, $cookie=NULL, $p=NULL)
  {
      $ch = curl_init();
      curl_setopt($ch, CURLOPT_HEADER, $header);
      curl_setopt($ch, CURLOPT_NOBODY, $header);
      curl_setopt($ch, CURLOPT_URL, $url);
      curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
      curl_setopt($ch, CURLOPT_COOKIE, $cookie);
      curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
      curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
      curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
      if ($p) {
         curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
         curl_setopt($ch, CURLOPT_POST, 1);
         curl_setopt($ch, CURLOPT_POSTFIELDS, $p);
       }
       $result = curl_exec($ch);
       if ($result) {
          return $result;
        }
        else {
          return curl_error($ch);
        }
        curl_close($ch);
    }

$a = cURL("https://login.facebook.com/login.php?login_attempt=1",true,null,"email=$EMAIL&pass=$PASSWORD");
preg_match('%Set-Cookie: ([^;]+);%',$a,$b);
$c = cURL("https://login.facebook.com/login.php?login_attempt=1",true,$b[1],"email=$EMAIL&pass=$PASSWORD");
preg_match_all('%Set-Cookie: ([^;]+);%',$c,$d);
for($i=0;$i<count($d[0]);$i++)
$cookie.=$d[1][$i].";";

echo cURL("http://graph.facebook.com/oauth/authorize?client_id=APP_IDredirect_uri=APP_REDIRECT_URL&display=touch&scope=publish_stream, user_checkins, publish_checkins, offline_access",null,$cookie,null);
?> 
```

请帮我做。这是我的任务

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:29:37.893

Facebook 不允许从第三方应用程序直接登录。必须使用 facebook 网站进行身份验证。

它提供了额外的安全性，因为用户凭据不与第三方应用程序共享，而仅与 facebook 共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:33:02.027

不，这是不可能的。

浏览 Facebook 网站可以发现登录表单的源代码中似乎有 CSRF 保护。所以你不能在你自己的网站上有一个指向他们的表格。

以您似乎尝试的方式使用 cURL 也不起作用，因为您无法设置 Facebook 在用户浏览器上发送的 cookie，因为您无法将它们与不同的域相关联。

在任何一种情况下，期望人们为您的另一个站点输入他们的登录凭据，充其量只能训练他们使用密码不安全。（并不是说 facebook 会更好，因为他们不断尝试通过“朋友查找器”获取我的电子邮件密码）。

# c# - 将图像保存到目录c#

> ID：10583329
> 
> 赞同：2
> 
> 时间：2012-05-14T12:27:17.253
> 
> 标签：c#, asp.net

我试图使用 c# 将图像添加到目录中。我将使用此图像在网格视图中显示。我写了代码，但我遇到了一个错误，我无法解决它。我有一个名为图像的目录。这是我收到错误 FileUpload1.SaveAs (Server.MapPath("images/" + FileName). 它说 C:\Users\user\Documents\Visual Studio 2008\WebSites\WebSite1\images\im1.jpg' 部分找不到路径。这是我的代码：

```
string FileName = Path.GetFileName(FileUpload1.PostedFile.FileName);
FileUpload1.SaveAs(Server.MapPath("images/" + FileName));
String strConnString = System.Configuration.ConfigurationManager.ConnectionStrings["conString"].ConnectionString;
SqlConnection con = new SqlConnection(strConnString);
string strQuery = "INSERT INTO Books (Book_Name,Author_Name,FileName, FilePath, In_Lib) VALUES (@BN,@AN,@FileName, @FilePath,@LIB)";
SqlCommand cmd = new SqlCommand(strQuery);
cmd.Parameters.AddWithValue("@BN", TextBox1.Text);
cmd.Parameters.AddWithValue("@AN", TextBox2.Text);
cmd.Parameters.AddWithValue("@FileName", FileName);
cmd.Parameters.AddWithValue("@FilePath", "images/" + FileName);
cmd.Parameters.AddWithValue("@LIB", "YES");
cmd.CommandType = CommandType.Text;
cmd.Connection = con; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:32:29.983

您正在尝试保存到不存在的目录中。

您需要先创建目录层次结构，然后才能保存到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:38:58.387

```
string cntPath = System.IO.Directory.GetCurrentDirectory();
FileUpload1.SaveAs(cntPath + "\\images\\" + FileName); 
```

I do this in one of my C# apps and it works alright.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:36:50.187

可能您的路径中有问题。

检查您的网站中是否有文件夹名称`images`。

如果是尝试类似`Server.MapPath("~/images/"+FileName);`

也看看这篇关于[ASP.NET Web 项目路径的文章](http://msdn.microsoft.com/en-us/library/ms178116.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:34:06.303

利用`FileUpload1.SaveAs(Server.MapPath("/") + "\\images\\" + FileName);`

示例代码

```
Server.MapPath(".") returns D:\WebApps\shop\products
Server.MapPath("..") returns D:\WebApps\shop
Server.MapPath("~") returns D:\WebApps\shop
Server.MapPath("/") returns C:\Inetpub\wwwroot
Server.MapPath("/shop") returns D:\WebApps\shop 
```

# c# - 如何为共享存储在另一个表中的数据的 2 个实体设置 NHibernate 映射？

> ID：10583330
> 
> 赞同：1
> 
> 时间：2012-05-14T12:27:19.117
> 
> 标签：c#, nhibernate, fluent-nhibernate, nhibernate-mapping

给定的是以下类层次结构：

[类图 http://img535.imageshack.us/img535/4802/personusermanager.jpg](http://img535.imageshack.us/img535/4802/personusermanager.jpg)

附加信息：

*   Person 类不是抽象的。
*   一个人可以是用户、经理或其他实现 IPerson 接口的东西。
*   Person 类不得对其子类有任何了解。
*   子类可以驻留在另一个程序集中。
*   一个人也有可能是一个用户和一个经理。在这种情况下，UserRepository 必须为给定的 PersonId 返回一个 User 对象，ManagerRepository 必须为相同的 PersonId 返回一个 Manager。
*   还必须可以通过 PersonRepository 获取实现 IPerson 接口的所有对象的 Person（基础）部分。

这如何在 NHibernate 中映射？

我们正在使用 FluentNHibernate 1.2 和 NHibernate 3.1。

在我们目前的情况下，每个类都有自己的表。所以我们有一个 Person 表、一个 User 表和一个 Manager 表。

我已经尝试了以下选项但没有成功：

*   用继承映射映射它（每个子类一个表）；
*   在 User 和 Manager 的映射中加入 Person（无继承映射）；
*   在 User 和 Manager 映射中带有 Person 的 HasOne 映射（没有连接和继承映射）；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T17:43:43.987

正如您无疑发现的那样，像这样映射继承很容易：Person -> User，或 Person -> Manager，或 Person -> Manager -> User（或者，Person -> Manager -> User）。

NHibernate 不允许您从子类升级/降级。您必须运行本机 SQL 才能升级或降级。

但是，如果您遵循我最初的继承“地图”，您应该有一个顿悟，即使用子类来做您正在尝试做的事情对于您要建模的事情是不合适的解决方案。这只是两个子类！当您添加更多角色时会发生什么？

你所拥有的是一个 Person，他可以是任意数量的角色的成员，其中角色是可扩展的。考虑这个解决方案（github上的来源：[https](https://github.com/HackedByChinese/NHibernateComposition) ://github.com/HackedByChinese/NHibernateComposition ）：

（假设我们有一个处理相等性的实体抽象类，其中具有相同 ID 的相同类型的对象被认为是相等的）

**项目：模型**

```
public class Person : Entity, IPerson
{
    public virtual string FirstName { get; set; }

    public virtual string LastName { get; set; }

    public virtual IList<Role> Roles { get; protected set; }

    public Person()
    {
        Roles = new List<Role>();
    }

    public virtual void AddRole(Role role)
    {
        if (Roles.Contains(role)) return;

        role.Person = this;

        Roles.Add(role);
    }

    public virtual void RemoveRole(Role role)
    {
        if (!Roles.Contains(role)) return;

        role.Person = null;

        Roles.Remove(role);
    }
}

public interface IPerson
{
    string FirstName { get; set; }

    string LastName { get; set; }

    Int32 Id { get; }
}

public abstract class Role : Entity
{
    public virtual Person Person { get; set; }

    public virtual string RoleName { get; protected set; }
}

public class User : Role
{
    public virtual string LoginName { get; set; }

    public virtual string Password { get; set; }
} 
```

**项目：Models.B**

```
public class Manager : Role
{
    public virtual string Division { get; set; }

    public virtual string Status { get; set; }
} 
```

**项目：Models.Impl**

*我将两个项目的流利映射合二为一以节省时间。可以很容易地为模型和模型建立单独的映射程序集。B*

```
public class PersonMap : ClassMap<Person>
{
    public PersonMap()
    {
        Id(c => c.Id)
            .GeneratedBy.HiLo("100");

        Map(c => c.FirstName);
        Map(c => c.LastName);

        HasMany(c => c.Roles)
            .Inverse()
            .Cascade.AllDeleteOrphan();
    }
}

public class RoleMap : ClassMap<Role>
{
    public RoleMap()
    {
        Id(c => c.Id)
            .GeneratedBy.HiLo("100");

        DiscriminateSubClassesOnColumn<string>("RoleName");

        References(c => c.Person);
    }
}

public class UserMap : SubclassMap<User>
{
    public UserMap()
    {
        DiscriminatorValue("User");

        Join("User", joined =>
                         {
                             joined.Map(c => c.LoginName);
                             joined.Map(c => c.Password);
                         });
    }
} 
```

**项目：Models.Impl.Tests**

```
[TestFixture]
public class MappingTests
{
    private ISessionFactory _factory;

    #region Setup/Teardown for fixture

    [TestFixtureSetUp]
    public void SetUpFixture()
    {
        if (File.Exists("test.db")) File.Delete("test.db");

        _factory = Fluently.Configure()
            .Database(() => SQLiteConfiguration.Standard
                                .UsingFile("test.db")
                                .ShowSql()
                                .FormatSql())
            .Mappings(mappings => mappings.FluentMappings
                                      .AddFromAssemblyOf<PersonMap>())
            .ExposeConfiguration(config =>
                                     {
                                         var exporter = new SchemaExport(config);
                                         exporter.Execute(true, true, false);
                                     })
            .BuildSessionFactory();
    }

    [TestFixtureTearDown]
    public void TearDownFixture()
    {
        _factory.Close();
    }

    #endregion

    #region Setup/Teardown for each test

    [SetUp]
    public void SetUpTest()
    {
    }

    [TearDown]
    public void TearDownTest()
    {
    }

    #endregion

    [Test]
    public void Should_create_and_retrieve_Person()
    {
        var expected = new Person
        {
            FirstName = "Mike",
            LastName = "G"
        };

        using (var session = _factory.OpenSession())
        using (var tx = session.BeginTransaction())
        {
            session.SaveOrUpdate(expected);

            tx.Commit();
        }

        expected.Id.Should().BeGreaterThan(0);

        using (var session = _factory.OpenSession())
        using (var tx = session.BeginTransaction())
        {
            var actual = session.Get<Person>(expected.Id);

            actual.Should().NotBeNull();
            actual.ShouldHave().AllProperties().EqualTo(expected);
        }

    }

    [Test]
    public void Should_create_and_retrieve_Roles()
    {
        // Arrange
        var expected = new Person
                         {
                             FirstName = "Mike",
                             LastName = "G"
                         };

        var expectedManager = new Manager
                           {
                               Division = "One",
                               Status = "Active"
                           };
        var expectedUser = new User
                               {
                                   LoginName = "mikeg",
                                   Password = "test123"
                               };

        Person actual;

        // Act
        expected.AddRole(expectedManager);
        expected.AddRole(expectedUser);

        using (var session = _factory.OpenSession())
        using (var tx = session.BeginTransaction())
        {
            session.SaveOrUpdate(expected);

            tx.Commit();
        }

        using (var session = _factory.OpenSession())
        using (var tx = session.BeginTransaction())
        {
            actual = session.Get<Person>(expected.Id);

            // ignore this; just forcing the Roles collection to be lazy loaded before I kill the session.
            actual.Roles.Count();
        }

        // Assert
        actual.Roles.OfType<Manager>().First().Should().Be(expectedManager);
        actual.Roles.OfType<Manager>().First().ShouldHave().AllProperties().But(c => c.Person).EqualTo(expectedManager);

        actual.Roles.OfType<User>().First().Should().Be(expectedUser);
        actual.Roles.OfType<User>().First().ShouldHave().AllProperties().But(c => c.Person).EqualTo(expectedUser);
    }
} 
```

如果您想将 Person 限制为特定角色的一个实例，只需放置一个唯一索引并使用 Equals 方法来检查是否`Id`相同 OR`RoleName`是否相同。

您可以轻松获取或检查任何类型的用户角色：

```
if (person.Roles.OfType<User>().Any())
{
   var user = person.Roles.OfType<User>().FirstOrDefault();
} 
```

您还可以直接查询角色以查找其人员：

```
var peopleWhoAreManagersInDistrictOne = (from role in session.Query<Manager>()
                                         where role.District == "One"
                                         select role.Person); 
```

您还可以看到其他程序集可以定义其他角色。经理与模型在不同的装配中。

所以，你可以看到它会做你想做的一切以及更多，尽管它使用了不同的方法。

# c - 两个负数的按位和

> ID：10583333
> 
> 赞同：1
> 
> 时间：2012-05-14T12:27:42.013
> 
> 标签：c, numbers, sum, bit-manipulation

我希望有人能够帮助我。

如果我有两个正数或一个正数和一个负数，我有以下算法。但是，如果两个数字都是负数，它就不起作用。

有人可以解释我怎么可能吗？

```
void sum (int p, int q) {

int sum, carry;

carry = 1;

while (carry > 0) {
    sum = p ^ q;
    carry = p & q;
    carry = carry << 1;
    p = sum;
    q = carry;
}

p = p << 1;
p = p >> 1;

printf("The result equals to %d", p);

} 
```

在此先感谢大家:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T12:29:49.763

两个负数之和为负（除非发生溢出，如评论中指出的那样）。但是这段代码：

```
p = p << 1;
p = p >> 1; 
```

本质上是清除最高位，即符号位，因此结果永远不会为负。

# mule - mule 注册表中的对象在应用程序启动时无法转换为 org.mule.construct.AbstractFlowConstruct

> ID：10583336
> 
> 赞同：0
> 
> 时间：2012-05-14T12:27:58.043
> 
> 标签：mule

我正在尝试在流应用程序启动时将某个类的实例存储在 mule 注册表中。下面你可以看到我的 java 代码和流程片段。我的问题是**有时**应用程序部署失败并出现以下错误：

```
Caused by: java.lang.ClassCastException: com.company.test.sorter.model.Config cannot be cast to org.mule.construct.AbstractFlowConstruct
    at org.mule.module.management.mbean.FlowConstructService.postRegister(FlowConstructService.java:139)
    at org.mule.module.management.agent.ClassloaderSwitchingMBeanWrapper.postRegister(ClassloaderSwitchingMBeanWrapper.java:101) 
```

您可以在下面找到整个堆栈跟踪。我必须重复一遍：这个异常只在某些时候引发，大约每五次部署未更改的应用程序。在大多数情况下，应用程序运行得非常好。我用谷歌搜索了这个异常和类，但没有找到任何解决方案。我正在使用 Mule 3.2.1（独立）。这是一个错误还是我做错了什么？

```
@XmlRootElement(name = "config")
public class Config  {
    private String x2Regex;
    private String x3Regex;
    private String x2QueueName;
    private String x3QueueName;
    // constructors, getters and setters
} 
```

```
public class Initializer implements
    MuleContextNotificationListener<MuleContextNotification> {
    @Override
    public void onNotification(MuleContextNotification notification) {
        if (notification.getAction() == MuleContextNotification.CONTEXT_STARTED) {
            try {
                notification.getMuleContext().getRegistry().registerObject("config", new Config());
            } catch (RegistrationException e) {
                // cut
            }
        }
    }
} 
```

```
<notifications>  
    <notification event="CONTEXT"/>  
    <notification-listener ref="Initializer"/> 
</notifications>
<spring:beans>
    <spring:bean id="Initializer" name="Initializer" class="com.company.test.sorter.Initializer" doc:name="Bean"/>
</spring:beans> 
```

以下是 mule 日志的片段，但有异常：

```
+ Failed to deploy app 'number-sorter', see below          +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    org.mule.module.launcher.DeploymentException: Failed to deploy application [number-sorter]
    at org.mule.module.launcher.DefaultMuleDeployer.deploy(DefaultMuleDeployer.java:68)
    at org.mule.module.launcher.DeploymentService.start(DeploymentService.java:175)
    at org.mule.module.launcher.MuleContainer.start(MuleContainer.java:157)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.mule.module.reboot.MuleContainerWrapper.start(MuleContainerWrapper.java:56)
    at org.tanukisoftware.wrapper.WrapperManager$12.run(WrapperManager.java:2788)
Caused by: org.mule.api.MuleRuntimeException: MBeans Failed to initialise
    at org.mule.module.management.agent.JmxAgent$MuleContextStartedListener.onNotification(JmxAgent.java:707)
    at org.mule.module.management.agent.JmxAgent$MuleContextStartedListener.onNotification(JmxAgent.java:685)
    at org.mule.context.notification.Sender.dispatch(Sender.java:40)
    at org.mule.context.notification.Policy.dispatch(Policy.java:122)
    at org.mule.context.notification.ServerNotificationManager.notifyListeners(ServerNotificationManager.java:244)
    at org.mule.context.notification.ServerNotificationManager.fireNotification(ServerNotificationManager.java:197)
    at org.mule.DefaultMuleContext.fireNotification(DefaultMuleContext.java:404)
    at org.mule.DefaultMuleContext.start(DefaultMuleContext.java:226)
    at org.mule.module.launcher.application.DefaultMuleApplication.start(DefaultMuleApplication.java:146)
    at org.mule.module.launcher.application.ApplicationWrapper.start(ApplicationWrapper.java:107)
    at org.mule.module.launcher.DefaultMuleDeployer.deploy(DefaultMuleDeployer.java:52)
    ... 8 more
Caused by: javax.management.RuntimeMBeanException: RuntimeException thrown in postRegister method
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.postRegisterInvoke(Unknown Source)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(Unknown Source)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(Unknown Source)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(Unknown Source)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(Unknown Source)
    at org.mule.module.management.agent.JmxAgent.registerFlowConstructServices(JmxAgent.java:428)
    at org.mule.module.management.agent.JmxAgent$MuleContextStartedListener.onNotification(JmxAgent.java:700)
    ... 18 more
Caused by: java.lang.ClassCastException: com.company.test.sorter.model.Config cannot be cast to org.mule.construct.AbstractFlowConstruct
    at org.mule.module.management.mbean.FlowConstructService.postRegister(FlowConstructService.java:139)
    at org.mule.module.management.agent.ClassloaderSwitchingMBeanWrapper.postRegister(ClassloaderSwitchingMBeanWrapper.java:101)
    ... 25 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T16:33:02.260

感觉像一个错误：阅读源代码后，我找不到任何合理的解释来解释为什么 Mule 会尝试在 JMX 中注册您的自定义对象，同时将其误认为是 Flow！

附带说明一下，当您可以使用 Spring 构建对象时，为什么还要使用通知侦听器和 Mule 注册表？

# java - ViewScoped bean 中未设置 viewParam 值

> ID：10583337
> 
> 赞同：3
> 
> 时间：2012-05-14T12:27:58.773
> 
> 标签：java, jsf, jsf-2

抱歉，可能是另一个非常基本的问题。在我的 ViewScoped bean 中，'viewParam' 看起来已经设置好了，但是当我开始使用它时，它的值为 null。我在设置器 (setEventId()) 中放置了一个断点，它获取了值，但是在我的 preRenderView 指定的方法中，它消失了，所以我无法加载我试图检索的事件对象。

当我的 bean 是 RequestScoped 时，这工作正常，但我发现在 POST 和后续验证错误中，我的所有详细信息都丢失了，并读到 ViewScoped 是解决这个问题的方法。

我已经升级到 Mojarra 2.1.7，因为我认为它可能是一个错误，并且确实在他们的 JIRA 中列出了一个“严重错误”，在 2.1.7 中修复，但我在 Glassfish 日志中验证它使用的是较新的版本，我仍然遇到同样的问题：http: [//java.net/jira/browse/JAVASERVERFACES-2266](http://java.net/jira/browse/JAVASERVERFACES-2266)

请帮忙，这是我的 bean（我尝试过使用和不使用 'ManagedProperty' 注释）

```
@ViewScoped
@Named
public class EventController extends AbstractController {

    private static final Logger logger = Logger.getLogger("EventController");

    /**
     * Request param managed property
     */
    @ManagedProperty(value="#{param.eventId}")
    private Long eventId;                

    private Event event = new Event();

    /**
     * The event dao
     */
    @Inject
    private EventDao eventDao;    

    /**
     * Load the event (requires eventId has a value)
     * @return 
     */
    public void loadEvent() {
        event = eventDao.find(eventId);
    }    

    /**
     * @return the eventId
     */
    public Long getEventId() {
        return eventId;
    }

    /**
     * @param eventId the eventId to set
     */
    public void setEventId(Long eventId) {
        this.eventId = eventId;
    }   
} 
```

这是我在“listEvents”页面中构建链接的方式

```
<h:link value="Full details" outcome="/calendar/viewEvent" includeViewParams="true">
<f:param name="eventId" value="#{calendarController.event.eventId}" />
</h:link> 
```

这是需要 eventId 属性的页面

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

    <body>

        <ui:composition template="/WEB-INF/templates/standardTemplate.xhtml">

    <f:metadata>
        <f:viewParam name="eventId" value="#{eventController.eventId}"/>
        <f:event type="preRenderView" listener="#{eventController.loadEvent}" />
    </f:metadata>            

            <ui:define name="content">      

                <h1>Event details for: #{eventController.event.title}</h1>
                <h:form>
                    <p:messages/>                                               

                    <p:panelGrid style="margin-top:20px">  
                        <f:facet name="header">  
                            <p:row>  
                                <p:column colspan="4">Event details</p:column>  
                            </p:row>  
                        </f:facet>  

                        <p:row>  
                            <p:column>
                                Title
                            </p:column>  
                            <p:column colspan="3">
                                <p:inputText value="#{eventController.event.title}" size="49"/>
                                <h:inputHidden id="eventId" value="#{eventController.event.eventId}"/>
                            </p:column>   
                        </p:row>                                                                                                   
                </h:form>                                
            </ui:define>
        </ui:composition>            
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:29:00.363

您是通过 CDI 而不是 JSF 管理 bean。JSF`@ViewScoped`注释`@ManagedBean`仅适用于 JSF ，不适用于 CDI `@Named`。在 CDI 上`@Named`，您只能使用 CDI 范围，而不是 JSF 范围。CDI 提供的最接近的是[`@ConversationScoped`](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/ConversationScoped.html). 但是您必须使用一些额外的样板代码自己管理对话的开始和结束。

同样的故事也适用于 JSF`@ManagedProperty`注释。它仅适用于 JSF `@ManagedBean`，不适用于 CDI `@Named`。对于 CDI，您应该使用`@Inject`或[自定义 HTTP 参数注释](http://www.glxn.net/?p=141)。

JSF issue 2266与这一切**无关。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T10:50:29.663

我有一个非常相似（如果不准确）的问题。我在 Glassfish 4.0 build 89 和 Primefaces 4.0 上使用 Java EE 7。Glassfish 报告说它正在使用 Mojarra 2.2.0。我使用的是 CDI 类型注释，即 @Named 和 @javax.faces.view.Viewscoped。我的 *.xhtml 文件是这样开始的

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

<f:metadata>
    <f:viewAction action="#{personController.initialise}" />
    <f:viewParam name="id" value="#{personController.id}" />
</f:metadata>
... 
```

无论我尝试了什么，它都不会设置我的视图参数。我读到 Mojarra 2.2.1 存在问题，并认为 Mojarra 2.2.0 可能相同。Updatetool 并没有比我所拥有的更进一步更新 Mojarra，所以我手动进行了更新。[我将来自http://repo1.maven.org/maven2/org/glassfish/javax.faces/2.2.5/](http://repo1.maven.org/maven2/org/glassfish/javax.faces/2.2.5/)的最新 Mojarra 实现的副本放入 $GLASSFISH_HOME/glassfish/modules 目录，将其重命名为 javax.faces.jar并备份现有的 javax.faces.jar 文件。重新启动 Glassfish，它报告它现在正在使用 Mojarra 2.2.5。问题消失了，代码运行良好。

# java - Struts2 验证框架如何工作

> ID：10583340
> 
> 赞同：2
> 
> 时间：2012-05-14T12:28:27.197
> 
> 标签：java, http, struts2, httpclient

我正在为我的项目使用 struts2。现在我有一个用于获取业务详细信息的业务信息填写表。在表单中，我有一些基本项目，例如电子邮件、用户名、密码、确认密码和 Facebook twitter 链接（FB 和 tweeter 链接是可选的，但如果用户输入我想检查它们是否真实）对于基本项目，我正在使用 xml 文件验证作为：

```
<validators>
    <field name="companyname">
        <field-validator type="requiredstring">
            <param name="trim">true</param>
            <message>Company name is required.</message>
        </field-validator>
    </field>        
    <field name="fblink">
        <field-validator type="url">
        <message>Please enter a valid url</message>
        </field-validator>
    </field>
    <field name="tweetlink">
        <field-validator type="url">
        <message>Please enter a valid url</message>
        </field-validator>
    </field>
</validators> 
```

& 如果用户输入 Facebook 或 twitter url 的值，我正在 Action 类的 Validate() 方法中编写验证，以检查这些是否真实（意味着 HTTP_STATUS_CODE=200）：

```
 public void validate()
    {
if(getFblink()!=null && !getFblink().isEmpty())
        {
            if(URLValidation.validate(getFblink())== false)
            {
                addFieldError("fblink", getText("Enter valid facebook page link"));
            }
        }       
        if(getTweetlink()!=null && !getTweetlink().isEmpty())
        {
            if(URLValidation.validate(getTweetlink())== false)
            {
                addFieldError("tweetlink", getText("Enter valid tweeter link"));
            }
        }
    } 
```

这里 URLValidation 是我的类，它包含静态方法 validate，它采用 URL 并使用我正在点击的 Httpclient 库并检查其状态代码。根据它的返回值，即布尔值，我正在设置错误消息。

它的工作。但我想知道我的方法是否正确？我也想使用 shor-circcuit 验证，所以我如何在 xml & validate() 验证代码中进行通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:05:47.000

您想要验证链接并想要使用您的代码（来自验证 xml）。这可以通过编写自定义验证器来实现。编写自定义验证器并通过 XML 文件将其用于您的字段。

例如，您可以查看[本教程](http://www.javabeat.net/articles/print.php?article_id=275)以获取想法。

# regex - 用于提取多行块的 perl 正则表达式

> ID：10583341
> 
> 赞同：8
> 
> 时间：2012-05-14T12:28:31.373
> 
> 标签：regex, perl

我有这样的文字：

> ```
> 00:00 stuff
> 00:01 more stuff
> multi line
>   and going
> 00:02 still 
>     have 
> ```

所以，我没有一个块结束，只是一个新的块开始。

我想递归地获取所有块：

> ```
> 1 = 00:00 stuff
> 2 = 00:01 more stuff
> multi line
>   and going 
> ```

ETC

下面的代码只给了我这个：

```
$VAR1 = '00:00';
$VAR2 = '';
$VAR3 = '00:01';
$VAR4 = '';
$VAR5 = '00:02';
$VAR6 = ''; 
```

我究竟做错了什么？

```
my $text = '00:00 stuff
00:01 more stuff
multi line
 and going
00:02 still 
have
    ';
my @array = $text =~ m/^([0-9]{2}:[0-9]{2})(.*?)/gms;
print Dumper(@array); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:26:31.330

5.10.0 版引入了[命名捕获组](http://perldoc.perl.org/perlre.html#%28?%27NAME%27pattern%29)，可用于匹配非平凡模式。

> **`(?'NAME'pattern)`**
> **`(?<NAME>pattern)`**
> 
> 一个命名的捕获组。在每个方面都与普通的捕获括号相同，`()`但另外一个事实是该组可以在各种正则表达式构造（例如`\g{NAME}`）中按名称引用，并且可以在成功匹配后通过名称访问[`%+`](http://perldoc.perl.org/perlvar.html#%LAST_PAREN_MATCH)or [`%-`](http://perldoc.perl.org/perlvar.html#%LAST_MATCH_START)。有关和哈希的更多详细信息，请参见[perlvar 。](http://perldoc.perl.org/perlvar.html)[`%+`](http://perldoc.perl.org/perlvar.html#%LAST_PAREN_MATCH)[`%-`](http://perldoc.perl.org/perlvar.html#%LAST_MATCH_START)
> 
> 如果多个不同的捕获组具有相同的名称，则`$+{NAME}`将引用匹配中最左侧定义的组。
> 
> 形式`(?'NAME'pattern)`和`(?<NAME>pattern)`是等价的。

命名捕获组允许我们在正则表达式中命名子模式，如下所示。

```
use 5.10.0;  # named capture buffers

my $block_pattern = qr/
  (?<time>(?&_time)) (?&_sp) (?<desc>(?&_desc))

  (?(DEFINE)
    # timestamp at logical beginning-of-line
    (?<_time> (?m:^) [0-9][0-9]:[0-9][0-9])

    # runs of spaces or tabs
    (?<_sp> [ \t]+)

    # description is everything through the end of the record
    (?<_desc>
      # s switch makes . match newline too
      (?s: .+?)

      # terminate before optional whitespace (which we remove) followed
      # by either end-of-string or the start of another block
      (?= (?&_sp)? (?: $ | (?&_time)))
    )
  )
/x; 
```

像这样使用它

```
my $text = '00:00 stuff
00:01 more stuff
multi line
 and going
00:02 still
have
    ';

while ($text =~ /$block_pattern/g) {
  print "time=[$+{time}]\n",
        "desc=[[[\n",
        $+{desc},
        "]]]\n\n";
} 
```

输出：

```
$ ./blocks-demo
时间=[00:00]
描述=[[[
东西
]]]

时间=[00:01]
描述=[[[
更多东西
多线
 去
]]]

时间=[00:02]
描述=[[[
仍然
有
]]]
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T12:42:41.303

这应该可以解决问题。下一个**\d\d​​:\d\d**的开头被视为块结束。

```
use strict;

my $Str = '00:00 stuff
00:01 more stuff
multi line
  and going
00:02 still 
    have
00:03 still 
    have' ;

my @Blocks = ($Str =~ m#(\d\d:\d\d.+?(?:(?=\d\d:\d\d)|$))#gs);

print join "--\n", @Blocks; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:42:09.200

你的问题`.*?`是非贪婪的方式与贪婪的方式相同`.*`。当它不被强制时，它会尽可能少地匹配，在这种情况下是空字符串。

所以，在非贪婪比赛之后，你需要一些东西来巩固你的捕获。我想出了这个正则表达式：

```
my @array = $text =~ m/\n?([0-9]{2}:[0-9]{2}.*?)(?=\n[0-9]{2}:|$)/gs; 
```

如您所见，我删除了`/m`能够在前瞻断言中准确匹配字符串结尾的选项。

你也可以考虑这个解决方案：

```
my @array = split /(?=[0-9]{2}:[0-9]{2})/, $text; 
```

# bluetooth - python 3的蓝牙库

> ID：10583362
> 
> 赞同：20
> 
> 时间：2012-05-14T12:29:40.817
> 
> 标签：bluetooth, python-3.x

我在 python 中搜索了用于蓝牙编程的 lib，`PyBluez`但发现它与 Python 3 不兼容。那么还有其他与 Python 3 兼容的蓝牙编程免费库吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-21T09:25:48.453

[PyBluez](http://code.google.com/p/pybluez/downloads/list)现在支持 Python 3。

[与其他答案状态一样， Python 套接字](http://docs.python.org/3.3/library/socket.html)（Python 3.3 及更高版本）中内置了对蓝牙的支持。但是，几乎没有关于如何将套接字与蓝牙实际结合使用的文档。我写了一个[简短的教程](http://blog.kevindoran.co/bluetooth-programming-with-python-3/)，以便在我忘记时可以参考它。你可能会发现它很有用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T10:53:40.540

在 python 3.3 上有本机支持！！您可以像使用套接字对象一样使用蓝牙

[http://docs.python.org/3.3/library/socket.html](http://docs.python.org/3.3/library/socket.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-19T21:28:26.200

pybluez 现在移植到 python 3： [http ://code.google.com/p/pybluez/downloads/list](http://code.google.com/p/pybluez/downloads/list)

兄弟，

# c# - 带有多媒体视频标签的 facebook 分享按钮

> ID：10583363
> 
> 赞同：1
> 
> 时间：2012-05-14T12:29:47.070
> 
> 标签：c#, asp.net, facebook

我有一个 html 页面来分享一个 html 5 视频，我想创建一个分享按钮。

到目前为止，我有这个...

```
 <a name="fb_share" share_url = " @Url.Action("Details", "Player", new { area = "Multimedia", id = item.Id }, "http")" ></a> 
```

...生成 url `http://host/Multimedia/Composer/Player/Details/{Id}` ，它的工作方式就像你在这张图片中看到的那样。

![在此处输入图像描述](../Images/09e24290f6cf39089b4e9d2be502d0ff.png)

我正在使用这个 facebook 库：

```
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share"  
    type="text/javascript"> 
```

我想知道显示页面或视频预览的简单方法是什么？

与 YouTube 主播相同的链接显示如下内容：

![在此处输入图像描述](../Images/3fd192bd88aeb3e9ab4fffb140003a8e.png)

我从这个页面得到它： [https ://developers.facebook.com/docs/share/](https://developers.facebook.com/docs/share/)

我看到有一些元标记，但用于`.fla`或`.swf`视频，我的是 html5。我想知道是否有类似的方法来传递元数据以像第二个链接一样显示它。

# apache - 我如何处理 apache 上的码头抛出的 500 错误

> ID：10583368
> 
> 赞同：1
> 
> 时间：2012-05-14T12:29:55.183
> 
> 标签：apache, jetty

我使用码头作为我的应用服务器和 apache 作为网络服务器来代理对码头的请求。在某些情况下，jetty 会通过堆栈跟踪抛出 500 内部服务器错误。我想在 apache 上处理这个 500 错误，即我想配置 apache 来抑制这个 500 错误并显示一个 html 页面。

我用 ErrorDocument 500 [http://abc.com/errorpage.html配置了 apache](http://abc.com/errorpage.html)

但我仍然从码头收到 500 错误，HTTP ERROR 500 后跟堆栈跟踪和页脚为“由码头提供支持：//”

我如何在 apache 上抑制这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:39:21.937

ProxyErrorOverride 指令应该适合您：

```
# Let mod_proxy serve error pages.
ProxyErrorOverride On

# This also allows for SSI, so you can trap the error code and act accordingly.
ErrorDocument 500 /static/500.shtml 
```

# ant - 解压后如何自动删除 zip/jar 文件

> ID：10583372
> 
> 赞同：2
> 
> 时间：2012-05-14T12:30:10.543
> 
> 标签：ant

解压 zip 或 jar 文件后，有没有办法在 ant 中自动删除源 zip/jar 文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:32:40.697

不是我所知道的，但您应该能够使用删除任务：

```
<unzip src="thefile.zip" dest="somedir"/>
<delete file="thefile.zip"/> 
```

# javascript - innerHtml 中的 onBlur 阻塞了函数

> ID：10583378
> 
> 赞同：-1
> 
> 时间：2012-05-14T12:30:42.623
> 
> 标签：javascript

我有 2 个函数，一个是动态创建一个带有输入字段的表，其维度基于用户插入的变量 k，另一个是读取用户在表的每个字段中再次插入的值并插入它们在我可以稍后调用的二维数组中。问题是 create table 函数不适用于在其代码中插入的 onBlur。代码如下：

```
<head>
    <script>
        var k;

            function genArray () {
                var A = [];
                    for (var i = 0; i < k; i++) {
                        A[i] = [];
                        for (var j = 0; j < k; j++) {
                            var id = "A" + (i + 1) + (j + 1);
                            A[i][j] = parseFloat(document.getElementById(id).value);
if (isNaN (A[i][j])) { 
                            alert ('Valoarea 'A[i][j]' nu este un numar. Reintroduceti valoarea');
}
                        }
                    }                       
            }

            function readGrad() {               
                k = parseInt(document.getElementById("grad").value);            
                if (isNaN(k)) {
                    alert('Gradul introdus nu este intreg, reintroduceti gradul matricii');
                }
                if (k == 0) {
                    alert ('Determinantul trebuie sa fie mai mare ca 1');
                }
                if (k == 1) {
                    alert ('Determinantul trebuie sa fie mai mare ca 1');
                }
                return k;
            }       

            function genTable(i,j) {            
                //var i,j = parseInt(document.getElementById("grad").value);
                var myTable = '<TABLE BORDER="1" BORDERCOLOR="BLACK">\n <TBODY>\n';
                for (i = 0; i < 1; i++) {
                    myTable += '  <TR>\n';
                    for (j = 0; j < k+1; j++) {
                        myTable += '    <TD>'+j+'</TD>\n';
                    }
                    myTable += '  </TR>\n';
                }
                for (i = 1; i < k+1; i++) {
                    myTable += '  <TR>\n';
                    for (j = 0; j < 1; j++) {
                        myTable += '    <TD>'+i+'</TD>\n';
                    }
                    for (j = 1; j < k+1; j++) {
                    myTable += '    <TD><input class="element" id="A' + i + j + '" onblur="genArray()"></TD>\n';
                    } 
                    myTable += '  </TR>\n';
                }
                myTable += ' </TBODY>\n</TABLE>\n';
                document.getElementById('container').innerHTML = myTable;
            }
    </script>
</head>

<body style="background-color: #777; color: ddd;">
    <div style="margin: 20px;">
        <h1>Program de calculare determinant matrice de orice grad.</h1>
    </div>
    <div>
        Introduceti gradul matricei
        <input id="grad" type="text" value="" style="width: 50px;" onChange="readGrad()">           
        <input style="margin-top: 20px;" type="button" name="Calculate determinant" value="Generati tabel" onClick="genTable()"> 
    </div>
    <form name="Det Matrice">
        <div style="margin-top: 100px; float: left; width: 100%;">
            Introduceti valorile: 
            <table style="text-align: center;">
                <div id="container"></div>
            </table>
            <br>
        </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:38:41.587

尝试`onblur="genArray()"`代替`onBlur="genArray()"`

请注意，它都是小写字母！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T13:19:15.953

您的代码工作正常。只需更正第 15 行中的语法错误，就像 jbabey 在评论中描述的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T14:14:25.677

更正警报的语法错误后， genTable() 工作。但是您的代码中有逻辑问题。您将 onblur 事件处理程序添加到生成的表格单元格中的每个文本字段。因此，每个单元格输入都会触发对 onblur 事件处理程序的调用，该处理程序将迭代整个表格。我不认为这是你想要的。此外，在迭代期间，您的 parseFloat 函数将在所有空单元格上失败。您应该只触发一次对 genArray() 的调用，或许可以使用一个按钮。

# java - gwt-visualization依赖不起作用？

> ID：10583382
> 
> 赞同：3
> 
> 时间：2012-05-14T12:31:07.053
> 
> 标签：java, gwt, jakarta-ee, vaadin

我想使用visualizationsforvaadin，为了使用它，我添加了可视化和gwt-visualization依赖项：

```
<dependency>
        <groupId>org.vaadin.addons</groupId>
        <artifactId>visualizationsforvaadin</artifactId>
        <version>1.1.2</version>
    </dependency>
    <dependency>
        <groupId>com.google.gwt.google-apis</groupId>
        <artifactId>gwt-visualization</artifactId>
        <version>1.1.2</version>
    </dependency> 
```

但我收到错误：缺少工件 com.google.gwt.google-apis:gwt-visualization:jar:1.1.2

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-12T11:18:06.893

您可以通过添加以下存储库来找到该 jar：

```
<repository>
  <id>Activiti</id>
  <url>http://maven.alfresco.com/nexus/content/repositories/activiti-thirdparty</url> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T10:38:45.417

我记得有同样的问题。我只是无法从存储库中找到工件，所以我手动下载了它并将其添加到我的本地存储库中。试试这个：

```
mvn install:install-file -Dfile=gwt-visualization.jar \
-DgroupId=com.google.gwt.google-apis -DartifactId=gwt-visualization \
-Dversion=1.1.2 -Dpackaging=jar -Djavadoc=gwt-visualization-javadoc.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T13:27:04.280

完整的 POM 说：

```
<dependency>
   <groupId>org.vaadin.addons</groupId>
   <artifactId>visualizationsforvaadin</artifactId>
   <version>1.1.2</version>
</dependency>

<repository>
   <id>vaadin-addons</id>
   <url>http://maven.vaadin.com/vaadin-addons</url>
</repository> 
```

对于 gwt 可视化，我可以在 mvnrepository 上看到的最新版本是

```
<dependency>
    <groupId>com.google.gwt.google-apis</groupId>
    <artifactId>gwt-visualization</artifactId>
    <version>1.0.2</version>
</dependency> 
```

另外，您使用的是哪个版本的 GWT？

# cuda - 如何检查 cuda 可用性（C++）？

> ID：10583388
> 
> 赞同：1
> 
> 时间：2012-05-14T12:31:20.470
> 
> 标签：cuda

是否可以在调用所有 cudaMalloc... 命令之前检查是否存在任何 CUDA 设备？

我正在使用 C++，我只想在程序启动之前打印一条错误消息，以防用户不支持 cuda 技术。

编辑：如果我可以从 C# 检查它，它会更好。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:36:17.003

您可以使用`cudaGetDeviceCount`获取 cuda 设备的数量并使用 cuda 设备属性来检索您必要的计算能力。

`cudaGetDeviceCount`可以在[此处](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__DEVICE_g665468e8cb33be42434f11bee2684ec9.html)找到相当旧版本的 API 文档。

# javascript - 如何为单选按钮和复选框设置禁用/只读功能

> ID：10583392
> 
> 赞同：12
> 
> 时间：2012-05-14T12:31:45.807
> 
> 标签：javascript, jquery, html, css

我知道我们不能制作***只读***单选按钮和复选框。我试图禁用单选按钮和复选框，但在 IE 中它不可见。

是否有任何替代方法可以使用 jQuery、CSS、JavaScript 来***禁用***/***只读？***

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-14T12:39:43.960

您可以使用以下代码来避免点击您不希望用户更改的元素

```
$(':radio,:checkbox').click(function(){
    return false;
}); 
```

您可以使用适当的选择器来限制点击次数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-14T12:39:50.793

Yon可以这样写：-

在你的脚本中：

```
 jQuery('#radio').attr('disabled','disabled'); 
```

或者你可以根据你添加类..

如果它与 IE 不兼容，也提供兼容性..

```
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<meta http-equiv="X-UA-Compatible" content="IE=7" /> 
```

然后检查..

你也可以试试这个：

```
jQuery("#youridname input:radio").attr('disabled',true); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T00:45:27.163

```
selectedRow
    .find('input[type="radio"]:not(:checked)')
    .each(function(){
        $(this).attr('disabled', true);
}); 
```

选定的行只是我想要在其下方找到我感兴趣的单选按钮的 HTML 元素。
只有在选择了单选按钮后才会调用整个脚本。
执行时，它会定位未选中的单选按钮并禁用它们。

因此，给了我禁用未选择的单选按钮的期望结果，同时保持选定的选项。

这个结果似乎是一个更好的选择，然后
1\. 将图像放在单选按钮上，以避免用户选择另一个选项。
2\. `.click(function(){ return false; })`，它只是在选择未选择的选项时隐藏选择 3\. 禁用所有单选按钮，其中选择丢失。

希望这对你有帮助，
干杯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T09:23:41.523

如果单选按钮已经被选中，并且如果您单击选中的单选按钮，它会将值从 true 更改为 false。对于这种情况，以下代码有效

```
$(document).ready(function () {
    $('input[type = "radio"]').change(function () {
        this.checked = false;
    });
}); 
```

# sdk - 使用 Indesign SDK 打包文档

> ID：10583393
> 
> 赞同：1
> 
> 时间：2012-05-14T12:31:47.693
> 
> 标签：sdk, adobe-indesign

我想通过 SDK 打包一个 indesign 文档，但似乎没有任何关于它的文档。有谁知道这是否可能，如果可以，请帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T16:08:04.870

查看这些文章，我认为它们可能会有所帮助：

[打包用于印刷的 Adob​​e InDesign 文件](http://kevin-randall.hubpages.com/hub/Packaging-Adobe-InDesign-Files-for-Press)

[打包 ID 文件](http://www.gomediazine.com/tutorials/tools-tips/preparing-indesign-files-for-your-print-service/)

如果没有，也许可以进一步详细说明您的问题？祝你好运！

# nhibernate - NHibernate 一对一：为 AccountDetail 生成 null id

> ID：10583395
> 
> 赞同：0
> 
> 时间：2012-05-14T12:31:55.977
> 
> 标签：nhibernate, one-to-one, mapping-by-code

使用具有唯一约束的多对一映射一对一关系时，出现异常“**为 AccountDetail 生成空 id ”。**

**这是我的 SQL 表：**

```
Account(Id, Name)
AccountDetail(AccountId, Remark) 
```

AccountId 是主键和外键。

**这是我的域模型（Account 和 AccountDetail）：**

```
public class Account
{
    public virtual int Id { get; set; }

    public virtual string Name { get; set; }

    public virtual AccountDetail Detail { get; set; }

    public Account()
    {
        Detail = new AccountDetail
        {
            Account = this
        };
    }
}

public class AccountDetail
{
    public virtual int AccountId { get; set; }

    public virtual Account Account { get; set; }

    public virtual string Remark { get; set; }
} 
```

**映射（NHibenrate 3.3 代码映射）：**

```
class AccountMap : ClassMapping<Account>
{
    public AccountMap()
    {
        Table(typeof(Account).Name);

        Id(c => c.Id, m => m.Generator(Generators.Native));

        Property(c => c.Name);

        OneToOne(c => c.Detail, m =>
        {
            m.Constrained(true);
            m.Cascade(Cascade.All);
          m.PropertyReference(typeof(AccountDetail).GetPropertyOrFieldMatchingName("Account"));
        });
    }
}

class AccountDetailMap : ClassMapping<AccountDetail>
{
    public AccountDetailMap()
    {
        Table(typeof(AccountDetail).Name);

        Id(c => c.AccountId, m =>
        {
            m.Column("AccountId");
            m.Generator(Generators.Foreign<AccountDetail>(x => x.Account));
        });

        Property(c => c.Remark);

        ManyToOne(c => c.Account, m =>
        {
            m.Column("AccountId");
            m.Unique(true);
        });
    }
} 
```

**顺便说一句：**我可以删除 AccountDetail 中的 AccountId 属性吗？也就是说，仅使用 Account 属性。在 AccountDetail 类中同时使用 AccountId 和 Account 属性看起来并不那么面向对象。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:43:06.047

我不能说实际上出了什么问题，但与我的工作一对一关系相比，我会这样映射它：

```
class AccountMap : ClassMapping<Account>
{
    public AccountMap()
    {
        Table(typeof(Account).Name);

        // creates a auto-counter column "id"
        Id(c => c.Id, m => m.Generator(Generators.Native));

        // doesn't require a column, one-to-one always means to couple primary keys.
        OneToOne(c => c.Detail, m =>
        {
            // don't know if this has any effect
            m.Constrained(true);

            // cascade should be fine
            m.Cascade(Cascade.All);
        });
    }
}

class AccountDetailMap : ClassMapping<AccountDetail>
{
    public AccountDetailMap()
    {
        Id(c => c.AccountId, m =>
        {
            // creates an id column called "AccountId" with the value from
            // the Account property.
            m.Column("AccountId");
            m.Generator(Generators.Foreign(x => x.Account));
        });

        // should be one-to-one because you don't use another foreign-key.
        OneToOne(c => c.Account);
    }
} 
```

# c# - 使用 try-finally 只是为了确保在方法完成时执行某些操作是否很好？

> ID：10583396
> 
> 赞同：5
> 
> 时间：2012-05-14T12:31:58.357
> 
> 标签：c#

我的方法在很多方面返回。我在执行过程中也在很多方面构造了 newData。无论我返回哪里，我都需要保存和存储构造结果。不要错过“返回”我只是用 try-finally 块包围了代码，所以现在我确定 newData 将被存储。

```
List<X> newData = new List<X>();
try
{
    ....
    update newData
    .....
    return;
    .....
    ....
    update newData
    ....
    update newData
    return;
    .....
    return;
} finally
{
    // copy newData to data    
} 
```

但我没有捕捉到任何异常，而且这段代码不适用于异常。一般情况下是否可以接受，或者您可以建议另一种更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T12:33:47.873

我建议将`try`块中的代码重构为新方法：

```
data = CreateList();

...

private List<X> CreateList()
{
    List<X> list = new List<X>();
    // It's fine to return list from any point here...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:36:21.357

finally 的使用旨在作为失败时的备份（将其视为故障安全机制），包括原子性等。

通常，您的方法的整个构造都是错误的，您可以对其进行重构，因为获得所有这些回报通常意味着您可以采用另一种方法来处理事情（例如在建议的评论中使用开关）。

# postgresql - Heroku dev Postgres 数据库行限制/最大行

> ID：10583398
> 
> 赞同：3
> 
> 时间：2012-05-14T12:32:17.440
> 
> 标签：postgresql, heroku, row

Heroku 刚刚推出了几个新的数据库计划，其中一个计划是开发计划。[在 heroku 的 Postgres 博客](https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/)中，开发计划被描述为计划替换当前 5MB 免费数据库计划的计划。

那篇博文中有趣的是开发计划使用行限制而不是大小限制。我已经使用不同的方法进行了几次实验，但似乎没有限制。***只是好奇，有人知道硬限制吗？***

* * *

***第一个实验：***

第一个实验是`INSERT INTO`在我的 Mac 上使用 Navicat 的手册，并通过复制粘贴执行了数十万次：

```
INSERT INTO table_name VALUES ('x'); 
```

结果，它运行了大约 2 天来获得近 200.000 行。好吧，它还没有达到硬性限制。

***第二个实验：***

第二个实验正在使用`psql`，插入的记录数增加到 100 万：

```
INSERT INTO table_name SELECT * FROM generate_series(1, 1000000); 
```

一切运行良好，记录已插入，开发计划中有超过一百万行，Heroku 的 postgres 中似乎没有行限制。

另一个测试被抛出，它被撞到了 1000 万条记录：

```
INSERT INTO table_name SELECT * FROM generate_series(1, 10000000); 
```

* * *

看到我的数据大小达到 4GB 让我停止了测试。我想可以肯定地假设开发计划有利于测试海量数据，并且不要忘记它仍处于公开测试阶段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:53:42.030

[Heroku 宣布](http://blog.heroku.com/archives/2012/7/16/heroku_postgres_basic_plan_and_row_limits)开发者的行数限制为 10,000 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:50:01.207

据我所知，目前还没有设置限制，但我确实在 HackerNews 上看到了一段引述，说它会在 10^3 区域内的某个地方。

[http://news.ycombinator.com/item?id=3916369](http://news.ycombinator.com/item?id=3916369)

# javascript - svg:svg 是什么意思？

> ID：10583400
> 
> 赞同：26
> 
> 时间：2012-05-14T12:32:26.087
> 
> 标签：javascript, xml, svg, d3.js

这是什么意思？

```
.append("svg:svg") 
```

我在 HTML 和 D3 代码中看到了它。它是否添加了SVG插件？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-14T12:41:03.337

在 XHTML 代码中，可以使用名称空间来区分网页中包含的其他基于 XML 的语言。这里，命名空间“svg”在标签“svg”之前使用。

```
namespace:tagname 
```

这在两个标签（例如，在 XHTML 和 SVG 中）具有相同名称并且您想准确指定您引用的标签的情况下很有用。可以使用`xmlns`属性指定标签。如您所知，XHTML 文档以

```
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

您可以将前缀指定为

```
<html xmlns:prefix="http://www.w3.org/1999/xhtml"> 
```

然后你会使用

```
<prefix:head>
    <prefix:title></prefix:title>
</prefix:head> 
```

同样，您可以使用

```
<svg xmlns="http://www.w3.org/2000/svg"> 
```

而不仅仅是`<svg>`在包含您的 svg 图形时。然后所有 svg 标签都以`svgprefix`前缀开头。但是，如果您有子 SVG 节点，它们也需要`xmlns`定义此属性。在这种情况下，定义前缀可能会更容易。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-14T19:58:05.677

来自[D3.js`append()`方法](https://github.com/mbostock/d3/wiki/Selections#wiki-append)的文档：

> *元素的标签名称可能有一个命名空间前缀，例如“svg:text”以在 SVG 命名空间中创建一个“text”元素。默认情况下，D3 支持 svg、xhtml、xlink、xml 和 xmlns 命名空间。可以通过添加来注册额外的命名空间[`d3.ns.prefix`](https://github.com/mbostock/d3/wiki/Namespaces#wiki-prefix)。*

**请特别注意，D3.js 中的命名空间前缀*不是*基于您的文档，而是公共前缀到实际命名空间 URL 的预定义映射。**

命名空间是 XML 文档（包括 XHTML**但不包括 HTML**）可以包含两个具有相同名称的属性或元素的方式（例如，数学正弦计算中的“sin”与道德失败中的“sin”）没有冲突。`<svg>`除非 SVG 元素位于[SVG 命名空间](http://www.w3.org/2000/svg)中，否则将元素放入 XHTML 文档中没有任何意义。

有关更多信息，请阅读[XML 中的命名空间](http://www.w3.org/TR/REC-xml-names/)。

# xml - XML 错误：无法在 Zend Framework 中加载外部实体

> ID：10583402
> 
> 赞同：0
> 
> 时间：2012-05-14T12:32:26.927
> 
> 标签：xml, zend-framework

我想从 XML 文件中读取数据，但它显示以下错误：

异常信息：消息：simplexml_load_file()：I/O 警告：未能加载外部实体“/common/xml/demo.xml”

以下是我的代码：

```
public function init() {
    require_once 'Zend/Config/Xml.php';
    $xml = new Zend_Config_Xml('/common/xml/demo.xml');        
    echo $xml;
} 
```

任何解决方案...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:42:49.950

看起来您正在尝试访问 /common/xml/demo.xml 作为文件的绝对路径。您的根目录中有 /common 目录吗？如果您的意思是相对路径，请尝试摆脱第一个斜杠。如果它应该是一个 URL，请添加完整的域和 http://...

如果你真的有一个绝对 /common/xml/demo.xml 的文件，你必须确保 apache 在系统文件权限级别和 apache 配置级别都具有对该文件的适当访问权限（假设你没有运行这个作为 CLI 脚本，但将其作为站点提供服务）。

# java - 如何实现 Hashmap/ArrayList 的列表

> ID：10583405
> 
> 赞同：0
> 
> 时间：2012-05-14T12:32:28.800
> 
> 标签：java, list, maps, character, frequency

大家好，我在尝试使其正常工作时遇到问题。基本上我想做的是读取一个包含这种数据的文本文件，但不是完全相似，而是相似，并计算每个字母出现在每一行的频率。真实数据还包含 0-255 之间的任何随机 ASCII。

一个例子是：

嗨，这是约翰。
我们要 .4%2) &,.! 米@ll

我想要的是在地图列表中实现的类似的东西

{H=3, i=3, ' '=3, t=1, h=2, s=2,... 直到行尾 },
{W=1, e=2, ' '=4 , a=1, r=1, g=2, o=1, i=1, n=1, .=2, 4=1, %=1....直到行尾},

所以它是一个地图列表

我曾尝试研究类似的问题，但在编码方面我能做的最接近的是这个。

```
List <Map<String, Integer>> storeListsofMaps = new ArrayList<Map<String, Integer>>();
ArrayList <String> storePerLine = new ArrayList<String>();
String getBuf;

try {
FileReader rf = new FileReader("simpleTextCharDist.txt");
BufferedReader encapRF = new BufferedReader(rf);

getBuf = encapRF.readLine();

while (getBuf!=null){
storePerLine.add(getBuf);

getBuf = encapRF.readLine();
}

for (String index: storePerLine){
Map<String, Integer> storeCharAndCount = new HashMap<String, Integer>();

Integer count = storeCharAndCount.get(index);
storeCharAndCount.put(index, (count==null)?count = 1:count+1);

storeListsofMaps.add(storeCharAndCount);
}

System.out.println("StoreListsofMaps: "+ storeListsofMaps);

encapRF.close();
} 
```

我知道这段代码不会执行我描述的代码，但一直坚持到这一部分。我显示的代码只会计算单词本身而不是字符串中的每个字母。我尝试通过将字符串转换为 char [] 并再次将其转换回字符串来计算对字符串中每个元素的迭代，但它的效率非常低并且会产生很多错误。希望有人愿意提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:51:30.423

这是实现此目的的伪算法-

1.  使用文件 I/O 创建一个列表，其中包含 1 行作为列表中的 1 个元素
2.  编写一个小的辅助函数，它将：
    1.  取字符串（表示步骤 1 中创建的列表中的元素）
    2.  遍历该行
    3.  创建一个 char 和 count 的映射。这个映射应该是返回类型。
3.  创建一个`Map<String,Map<String,Int>>`其中第一个字符串是“Line1”、“Line2”等。第二个字符串是 char 值。内联写入的 Map 是从第 2 步返回的映射。

这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:57:35.323

想想你想要做什么。以文本形式写下你的算法。考虑一下何时必须创建变量，以及变量需要具有哪些类型。将您编写的算法与您的实际代码进行比较。

示例算法：

1.  打开文件
2.  创建字符到整数的映射列表 (ArrayList>)
3.  阅读所有行；对于每一行：
    1.  为该行创建一个映射 char -> int (HashMap)
    2.  对于行中的每个字符 c：
        1.  更新地图中的计数
    3.  将地图存储在地图列表中的一行

# objective-c - 在目标 c 中用空格替换单词

> ID：10583408
> 
> 赞同：0
> 
> 时间：2012-05-14T12:32:30.167
> 
> 标签：objective-c, replace, nsstring

我有一个这样的字符串：

`NSString *test = @"This is a test string";`

我想用空格替换“测试”字，如下所示：

“这是一个字符串”

我怎么能做这样的事情？

我试过使用这个功能

```
test = [test stringByReplacingOccurrencesOfString:@"test" withString:@"    "]; 
```

并没有正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:37:44.103

```
NSString *test = @"This is a test string";
test = [test stringByReplacingOccurrencesOfString:@" test" withString:@""];
NSLog(@"%@",test); 
```

it should work, hope it helps. happy coding :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:36:14.460

```
NSString *test = @"This is a test string";
test = [test stringByReplacingOccurrencesOfString:@"test" withString:@""];
NSLog(@"%@",test);

Use this. No need to give space. it will replace that word with empty space. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:41:29.920

使用 NSMutableString 代替 NSString.Repalce NSString *test = @"This is a test string" with NSMutableString *test = @"This is a test string";

# eclipse - Eclipse：切换透视时选择丢失使工具栏条目消失

> ID：10583409
> 
> 赞同：0
> 
> 时间：2012-05-14T12:32:38.003
> 
> 标签：eclipse, plugin.xml

我有一个条件，我使用它在工具栏中显示一个条目。我使用 menuContribution + command + visibleWhen 来显示这个条目。一旦我切换到另一个视角，我在工具栏中的条目就会消失，即使我在项目资源管理器中选择了该项目/项目节点。

是不是因为我用

```
<visibleWhen> <with variable="selection">  in my plugin.xml ? 
```

即使切换了透视图，我如何才能使工具栏条目保持可见，至少它应该以某些固定透视图显示，如果不是全部的话....

我想避免使用 actionSets 在工具栏中显示我的条目，因为它们与我正在使用的 propertyTester 不友好。

在这方面的任何帮助将不胜感激，

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:04:43.987

我猜当你改变观点时，选择会丢失，这就是你的贡献不可见的原因。即使在项目资源管理器视图（或其他东西）中存在选择，它有时也会显示为灰色阴影，表示没有选择。您需要通过代码而不是扩展点来处理选择。

# desktop - 独立桌面应用程序

> ID：10583410
> 
> 赞同：1
> 
> 时间：2012-05-14T12:32:38.310
> 
> 标签：desktop, embedded-database

我的任务是在一些非常严格的约束下创建桌面应用程序。该应用程序的第一个版本很小，仅用于某些特定任务，但似乎该应用程序很受欢迎，因此我被要求对其*进行大量*改进。

我创建的初始应用程序是使用大量 javascript 和 jquery 制作的 hta，使用 XML 存储信息（通过 MSXML2.3.0），但增加的数据量让我认为它无法跟上要求，所以我想在更坚实的基础上重新制作应用程序。当然，我宁愿保持界面与我已经展示的内容或多或少保持一致，而且我宁愿不必重写所有代码。

限制如下：

- 桌面应用程序。我无法开发 Web 应用程序，因为没有一台目标计算机具有可靠的 Internet 连接。

-无需安装（复制和粘贴文件夹应该可以工作，并且应该保持所有数据一致）。

- 应该是相对多平台。我所掌握的关于目标机器的唯一信息是它们都具有 Windows XP 操作系统或更新版本、MS Office 2003 套件或更新版本，以及某种 PDF 阅读器。

- 应该能够嵌入和显示不同的文件类型，例如不同的图像格式、pdf 和办公文档。也就是说，对于办公文档，只要我可以链接到文档并通过实例化一个常见的 MS Word/Excel/wathever 应用程序打开它，它就足够了，尽管与套件的互操作性会很好。

我一直在网上搜索，我发现了一些有趣的选项，但我不确定它们。

一方面，我认为 XML 将无法跟上，尽管我想如果我通过几个 xml 文件分发数据，我可以让它工作。我一直在阅读有关开源嵌入式数据库（例如 SQLite）的信息，看起来这可以工作。

另一方面，我觉得如果应用程序不断增长，我正在使用的 hta 基础将无法正常工作。我检查了很多替代方案，但它们都给我带来了一些问题。

Cappuccino 或 Chromeless 看起来不错，但它们都需要一定程度的 HTML5，我不能确定机器的浏览器是否支持足够。此外，Cappuccino 的 NativeHost 似乎仅适用于 Mac OSX。Xul 看起来很有趣，但无法使用。

我发现的另一个选择是将应用程序移植到 Qt，但我不知道将应用程序移植到 Qts 有多难，而且看起来我只能使用嵌入 MS Office 应用程序所需的 ActiveX 和专有执照。虽然这相对不那么重要，但我确信将来我会想要包含这些功能。

这就是我的立场。你认为保持 hta + XML 架构（或其任何变体）仍然可以工作吗？我提到的任何替代方案是否可行？你知道还有其他选择吗？

# windows - 为 Windows .bat 文件中的命令设置超时

> ID：10583411
> 
> 赞同：4
> 
> 时间：2012-05-14T12:32:38.427
> 
> 标签：windows, batch-file

我写了一个 Windows .bat 脚本。运行命令列表，然后关闭计算机。

如：

```
c:\someapplication.exe
c:\someapplication2.exe
Shutdown -s -t 0 
```

有时，“c:\someapplication.exe”会冻结并且没有响应。如何为命令“c:\someapplication.exe”设置超时，以便在一定时间后，我希望 Windows 强制关闭应用程序并继续执行其余命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:47:50.803

如果你能负担得起所有一些应用程序并行运行试试这个

```
 start someapplication
 start someapplication2
 wait n secons
 shutdown 
```

选择您的 n 值，以便在某些应用程序仍然运行合法时它不会继续关闭

或者

```
 start someapplication
 wait n seconds
 start someapplication2
 wait m seconds
 shutdown 
```

因为`wait`周围有很多解决方案，谷歌一些*蝙蝠等待超时*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T08:36:54.700

您可以使用`ping`和的组合`taskkill`来执行此操作。

```
start c:\someapplication.exe
ping 127.0.0.1 -n seconds
taskkill /im someapplication.exe /f 
start c:\someapplication2.exe
ping 127.0.0.1 -n seconds
taskkill /im someapplication2.exe /f 
Shutdown -s -t 0 /f 
```

只需`seconds`在`ping`命令中替换为在尝试关闭进程之前要等待的秒数（足够的时间，如果它仍在运行，它一定已经崩溃）。然后应用程序的其余部分可以继续运行，直到它被强制关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T13:03:57.817

您可以一次运行您的 exe 程序和关闭命令，并将超时设置在关闭选项 [-t] 中。要一次运行多个命令，请使用“start”命令（“start [yourProgram.exe]”）。要强制关机，请使用 [-f] 选项。

祝你好运

# ios - iOS 应用程序可以使用 wsHttpBinding 使用 WCF 服务吗？

> ID：10583414
> 
> 赞同：1
> 
> 时间：2012-05-14T12:33:01.623
> 
> 标签：ios, wcf, wshttpbinding

我现在正在构建一个 WCF 服务，它有一个 wsHttpBinding 端点。

目前的客户端是 WPF。

我想知道将来是否有可能开发一个能够连接到我的 WCF 服务端点的 iOS 应用程序（它必须是 wsHttpBinding，因为我需要安全性、可靠性和有序的消息传递）。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:47:27.667

我研究了一下，根据我的发现，这是不可能的（至少不容易），如果有办法请告诉我

为了安全起见，我遵循了以下解决方案，它满足了我的需求： [Building .NET WCF service for iPhone with authentication](https://stackoverflow.com/questions/10221399/building-net-wcf-service-for-iphone-with-authentication)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T14:04:41.533

通常不会，但这取决于您如何配置 WSHttpBinding。如果您使用任何类型的消息级别安全性几乎可以肯定您将无法从 iOS 调用它。我是说几乎 b/c iOS 通过 http 支持 sendins soap，并且一些场景（useranme）并不复杂，所以理论上你可以手动将它们推送到 soap。但在大多数情况下，basicHttpBinding 更好（并且更喜欢传输安全性）。

# haskell - 如何从 HackageDB 中删除一个包？

> ID：10583417
> 
> 赞同：6
> 
> 时间：2012-05-14T12:33:07.397
> 
> 标签：haskell, hackage

我已将名称不正确（错字）的包上传到[http://hackage.haskell.org/](http://hackage.haskell.org/)

为了不弄乱 HackageDB，我想知道是否有任何方法可以删除该包。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T12:35:30.480

这只有在非常特殊的情况下才有可能——联系 Ross Paterson（HackageDB 的维护者）提出您的请求，并提供足够的身份证明以确认您是包的作者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:35:32.560

从 hackage 中删除包的唯一方法是通过管理员。您可以发送电子邮件并要求删除该包裹。但这值得麻烦吗？如果一个名字打错了的包被hackage了，那有什么可怕的呢？

# android - Android：如何组织布局

> ID：10583418
> 
> 赞同：1
> 
> 时间：2012-05-14T12:33:13.853
> 
> 标签：android, android-layout

我需要组织复杂的活动，里面有很多视图。

布局也应取决于屏幕方向。

![在此处输入图像描述](../Images/a33f22021febbf2e585f8bbc0c5ade95.png)

内部元素 - 它实际上是一些模板。

请帮我找出组织这个的最佳方式是什么？我应该动态创建布局还是可以创建一些 xml 模板并使用它们？如果我想将 Template3 实现为可点击元素，是否为 ListView 定义 onListItemClick 就足够了（ListItem 有一个 xml 声明，因此所有元素的 id 都相同）。并且所有模板元素都应该具有相同的宽度和高度。ListView 没问题，但是 Template1 怎么办？我希望每个项目具有相同的高度，并匹配父视图。

如何组织 onConfigurationChanged() ？我可以在哪里以及如何实现添加或删除 3 个额外的 Template1 元素？动态的？还是创建 2 个 xml？

什么是最好的性能？

也许有人可以给我一个“复杂布局示例”或类似内容的链接？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:49:59.193

尝试搜索碎片化的概念，它会解决问题。

# iphone - 从右侧显示模态视图控制器

> ID：10583419
> 
> 赞同：1
> 
> 时间：2012-05-14T12:33:16.237
> 
> 标签：iphone, ios5, transition, presentmodalviewcontroller

我想以模态方式呈现一个视图控制器，从右到左转换（就像导航控制器一样）。但我根本不想使用任何导航控制器。此外，当我关闭呈现的视图控制器时，我希望动画从左到右。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:39:16.177

I have done it using **IIViewDeckController**: [https://github.com/Inferis/ViewDeck](https://github.com/Inferis/ViewDeck)

You can use it the way, you set **centerController** to you "modal controller" you want to present, your **leftController** to your current controller and at the start you show left controller by default. When you want to show your modal controller, just show the center one.

That is what you want

# java - 列出android中一种类型的所有文件

> ID：10583422
> 
> 赞同：1
> 
> 时间：2012-05-14T12:33:26.100
> 
> 标签：java, android, file

我需要在我的内部和外部存储中检索某种类型的所有文件的列表。我找到了这个（->[列出 Android 设备上的所有一种文件类型？](https://stackoverflow.com/questions/5298858/list-all-of-one-file-type-on-android-device)）示例，但它非常特定于 mp3。

我的应用程序创建了一个 .zip 文件，该文件被重命名为扩展名 *.message

另一个活动应该显示所有可用 .message 文件的列表，用户可以从中选择一个来打开它。

有谁知道如何开始？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:36:34.427

要获取具有特定扩展名的文件列表，您可以`File.list()`使用`FilenameFilter`. 例如：

```
File dir = new File(".");

String[] names = dir.list(
    new FilenameFilter()
    {
        public boolean accept(File dir, String name)
        {
            return name.endsWith(".message");
        }
    }); 
```

请注意，返回的字符串只是文件名，它们不包含完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:01:34.930

这里是

```
File root = new File(globalVar.recordDir);

{
    try {
        if (root.listFiles().length > 0) {
            for (File file : root.listFiles()) {
                if (file.getName().endsWith(".mp3")) {
                    //DO somthings with it
                } 
                }
            }
        } else {
        }
    } catch (Exception e) {
    }
} 
```

# symfony - 是否有会话超时的 symfony2 事件/处理程序，即未登录

> ID：10583428
> 
> 赞同：6
> 
> 时间：2012-05-14T12:33:56.133
> 
> 标签：symfony

我使用 FOSRestBundle 在防火墙内进行 ajax json 调用。一切似乎都很好，除了当会话超时发生时我无法处理。现在它在这种情况下重定向到 login_check，向客户端返回 html 而不是 json。

我知道，并在我的应用程序中使用 success_handler 和 failure_handler。我找不到用于处理授权失败的内置处理程序，例如会话超时。

FOSRestBundle 中有什么东西可以帮助解决这个问题，还是我在 Symfony2 中没有看到的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-17T09:00:45.197

是的，Symfony 提供了处理异常的可能性。您必须创建一个事件侦听器，它`kernel.exception`以高优先级观察事件。像这样创建一个事件处理程序：

```
<?php
namespace Acme\Bundle\MyBundle\EventListener;

use Symfony\Component\HttpKernel\Event\GetResponseForExceptionEvent;
use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\Security\Core\Exception\AccessDeniedException;
use Symfony\Component\Security\Core\Exception\AuthenticationException;

class AjaxAuthenticationListener
{
    public function onKernelException(GetResponseForExceptionEvent $event)
    {
        $request = $event->getRequest();

        $format = $request->getRequestFormat();
        $exception = $event->getException();
        if ('json' !== $format || (!$exception instanceof AuthenticationException && !$exception instanceof AccessDeniedException)) {
            return;
        }

        $response = new JsonResponse($this->translator->trans($exception->getMessage()), $exception->getCode());
        $event->setResponse($response);
        $event->stopPropagation();
    }
} 
```

*现在您必须在其中一个service.yml*中注册您的事件处理程序，如下所示：

```
kernel.listener.ajax_authentication_listener:
    class: Acme\Bundle\MyBundle\EventListener\AjaxAuthenticationListener
    tags:
        - { name: kernel.event_listener, event: kernel.exception, method: onKernelException, priority: 250 } 
```

注意这个`priority`参数，用于告诉 Symfony 在其自己的处理程序之前执行处理程序，这些处理程序具有较低的优先级。

在您的前端，您可以为 jQuery 注册一个事件处理程序，它会在出现此类错误时重新加载页面。

```
$(document).ready(function() {
    $(document).ajaxError(function (event, jqXHR) {
        if (403 === jqXHR.status) {
            window.location.reload();
        }
    });
}); 
```

请参阅[此要点](https://gist.github.com/xanf/1015146)以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T14:41:34.017

我不确定 FOSRest 包中是否有任何明确的内容，但 Symfony2 本身能够处理会话超时。

你试过看这里吗？[http://symfony.com/doc/current/components/http_foundation/session_configuration.html](http://symfony.com/doc/current/components/http_foundation/session_configuration.html)

# google-apps-script - Google Apps 脚本错误

> ID：10583431
> 
> 赞同：0
> 
> 时间：2012-05-14T12:34:05.240
> 
> 标签：google-apps-script

我在我的一个 Google 管理员组中提出了这个问题，并被推荐到这里，所以希望我是我应该去的地方！

这是我的问题。如果我包含在我的管理站点页面（在站点下）中的应用程序脚本，我会进入项目页面，在那里我可以选择从模板中打开一个新脚本。在脚本库中，无论我选择“安装”哪个脚本，我都会收到“文件名不能为空”的错误消息。我确定我犯了某种愚蠢的错误，但我无法弄清楚我做错了什么。不幸的是，我不能具体说明它是什么时候开始的。如果有人能引导我朝着正确的方向前进，我将不胜感激。我打算附上一张图片，但我没有10个帖子......

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:07:56.203

我相信脚本库应该只能通过 Google 电子表格访问，而不是在 Google 协作平台中。如果您在 Google 协作平台中看到该选项，请发布屏幕截图以便我们查看（如果您没有足够的声誉，请使用其他图像托管服务）。

# math - 自动将括号随机添加到数学运算字符串？

> ID：10583433
> 
> 赞同：0
> 
> 时间：2012-05-14T12:34:09.127
> 
> 标签：math

您是否有任何想法自动随机地将括号添加到数学运算字符串？

例如。

给定的操作字符串：

57 x 40 - 14 + 84 ÷ 19

我需要在上面的字符串中随机自动添加括号。

所以它变成：

(57 x 40) - 14 + (84 ÷ 19) 或

(57 x 40) - (14 + 84 ÷ 19) 或

57 x (40 - 14) + (84 ÷ 19) 或

57 x (40 - 14 + 84 ÷ 19) 或

57 x (40 - (14 + 84) ÷ 19)

非常感谢您的帮助！

米克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:57:46.633

我假设了三件事：

1.  数字和运算符之间总是有空格字符
2.  所有数字都是整数（您可以轻松地将其更改为其他类型）
3.  所有不是数字的都是运算符

C# 中的示例：

```
Math m = new Math(); 
string p = m.DoStuff("57 x 40 - 14 + 84 ÷ 19");
Console.WriteLine(p);

class Math
{       
    internal string DoStuff(string p)
    {
        bool isParOpen = false;
        Random rnd = new Random();
        StringBuilder result = new StringBuilder();
        int i;

        string[] stack = p.Split(' ');
        foreach (var item in stack)
        {
            if (int.TryParse(item, out i))
            {
                if (rnd.Next(2) == 1)
                {
                    result.Append(isParOpen ? string.Format("{0}) ", item) : string.Format("({0} ", item));
                    isParOpen = !isParOpen;
                }
                else
                {
                    result.Append(item).Append(" ");
                }
            }
            else
            {
                result.Append(item).Append(" ");
            }
        }

        if (isParOpen)
        {
            result.Append(")");
        }

        return result.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:42:24.600

如果您将数学表达式作为字符串处理，您可以随机添加括号（例如，[将随机字符添加到字符串](https://stackoverflow.com/questions/7091436/take-chars-from-array-and-place-them-randomly-to-create-string)），然后[使用脚本引擎，您可以评估表达式](https://stackoverflow.com/questions/3422673/java-evaluate-string-to-math-expression)。

# maven - 在 maven 发布时提交一些文件：prepare

> ID：10583434
> 
> 赞同：6
> 
> 时间：2012-05-14T12:34:29.970
> 
> 标签：maven, release, commit, prepare

是否可以在 mvn release:prepare 时提交一些文件（没有 pom.xml）？

在我的 MultiModul 项目中，我使用 prepareGoals 配置了发布插件，以更改 sql 文件中的版本。

```
<preparationGoals>clean verify org.codehaus.mojo:build-helper-maven-plugin:1.5:parse-version com.google.code.maven-replacer-plugin:replacer:1.5.0:replace</preparationGoals> 
```

一切正常，但不会提交更改的 sql 文件。

sql 文件位于父文件夹的子目录中。没有 pom.xml

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:41:28.663

我现在使用 scm:checkin 在preparationGoals

清理验证 org.codehaus.mojo:build-helper-maven-plugin:1.5:parse-version com.google.code.maven-replacer-plugin:replacer:1.5.0:replace scm:checkin -Dmessage="... " -DworkingDirectory=./.../...

但这与 pom.xml 的提交不同。这导致 mvn rellease:rollback 不会回滚准备目标中的第一个提交！

现在看起来像这样：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-release-plugin</artifactId>
            <configuration>
                <tagBase>
                    ......
                </tagBase>
                <autoVersionSubmodules>true</autoVersionSubmodules>
                <arguments>-Dtest='*IT,*Test' -DfailIfNoTests=false</arguments>
                <tagNameFormat>@{project.version}</tagNameFormat>
                <preparationGoals>clean verify org.codehaus.mojo:build-helper-maven-plugin:parse-version com.google.code.maven-replacer-plugin:replacer:replace scm:checkin -Dmessage="Version in Komponentenversion.sql incrementiert" -DworkingDirectory=./db/include</preparationGoals>
            </configuration>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:49:54.243

尝试使用`scm:add`目标。应该管用。

更多信息：[http :](http://maven.apache.org/scm/plugins/usage.html)
[//maven.apache.org/scm/plugins/add-mojo.html http://maven.apache.org/scm/plugins/usage.html](http://maven.apache.org/scm/plugins/add-mojo.html)

# iphone - NSFetchRequest 以特定顺序显示结果

> ID：10583437
> 
> 赞同：0
> 
> 时间：2012-05-14T12:34:59.043
> 
> 标签：iphone, ios, core-data, nsfetchedresultscontroller, nsfetchrequest

假设我在核心数据中有一个实体“人”。现在我想搜索所有人。名字开头匹配或姓氏开头匹配。例如：1) Amit Gupta 2) Ajay Gulati 3) Gunjan Aggarwal

搜索“Gu”会首先显示与 firstname 匹配的名称，然后是与 lastname 匹配的名称，因此结果为：

Gunjan Aggarwal Ajay Gulati Amit Gupta

一种选择：获取所有对象，将它们存储在数组中，然后排序。但是如果搜索结果的数量很大怎么办

第二个选项：使用 NSFetchedResultsController 这将获取所有匹配但不是以所需方式（姓氏之前的名字）。不能使用排序描述符，因为它不是在任何键上排序，而是在匹配时排序。

有人可以帮忙吗？

编辑：名字和姓氏是“人”实体的两个不同属性。Firstname 匹配或 Lastname 匹配。

我想要“名字”匹配的结果，而不是“姓氏”匹配的结果。

如果你使用排序描述符，你会提到哪个“键”或“属性”？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:40:40.573

尝试在获取之前设置**排序描述符**：

```
NSSortDescriptor * firstNameDescriptor;
firstNameDescriptor = [[NSSortDescriptor alloc] initWithKey:@"firstName"
                                                  ascending:YES
                                                   selector:@selector(localizedCaseInsensitiveCompare:)];
NSSortDescriptor * lastNameDescriptor;
lastNameDescriptor = [[NSSortDescriptor alloc] initWithKey:@"lastName"
                                                 ascending:YES
                                                  selector:@selector(localizedCaseInsensitiveCompare:)];
[firstNameDescriptor release];
[lastNameDescriptor release];

[fetchRequest setSortDescriptors:[NSArray arrayWithObjects:firstNameDescriptor, lastNameDescriptor, nil]]; 
```

然后获取您想要的人。

* * *

获得排序结果后，为了匹配您的搜索，您可能需要使用它：

```
- (NSComparisonResult)compare:(id)anotherOne {
  // if the first name matches the searching key word, return NSOrderedAscending;
  // else return [self.firstName localizedCaseInsensitiveCompare:anotherOne.firstName];
} 
```

然后只需使用方法将其应用于您的搜索结果数组`sortedArrayUsingSelector:`。没有可用的测试代码，但我想你可以自己弄清楚。;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T17:11:33.180

在 Core Data 对象中使用瞬态属性`sortName`，使其比较`firstName`和`lastName`属性，然后返回按字母顺序先出现的那个。

现在只需使用这个属性作为你的`sortDescriptor`，你应该得到你想要的结果。

像这样的东西...

```
- (NSString *)sortName
{
    [self willAccessValueForKey:@"sortName"];

    NSString *string = nil;

    if ([self.firstName compare:self.lastName] == NSOrderedAscending) {
        string = self.firstName;
    } else {
        string = self.lasttName;
    }

    [self didAccessValueForKey:@"sortName"];

    return string;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T23:25:53.273

使用两个获取请求。当您向视图提供数据时，显示第一个获取请求的结果，然后显示第二个请求的结果。

# android - 活动之间的过渡。从列表视图

> ID：10583441
> 
> 赞同：2
> 
> 时间：2012-05-14T12:35:05.923
> 
> 标签：android, listview, animation, expandablelistview

所以，我想要做的是，当我单击某个项目时，`ListView`该项目将出现在屏幕顶部，并且下面的项目将“滑动”下来，显示我想要显示的活动。我希望它看起来像这样：

![原谅丑陋的切割和东西](../Images/f1921ef114e9b86e9becc45afe8403cf.png)

因为我对 GIMP 的技能不是很好，所以我会尝试更好地解释。我想要类似图像的东西，但是用户点击了屏幕顶部的行，并且活动填充了（现在）黑色空间。当用户返回（通过所述活动上的键或某个按钮）时，我希望发生反向动画。

我已经尝试过使用这个[SO Thread](https://stackoverflow.com/questions/3693702/slide-down-view-in-android)，但它并不是我想要的，而且它似乎是一种资源密集型（对于我的要求）。

所以，如果有人想指出我正确的方向，或者告诉我一种方法，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:25:26.447

为什么你不能使用[android-accordion-view](https://github.com/hamsterready/android-accordion-view)

**示例代码**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:accordion="http://schemas.android.com/apk/res-auto/com.sentaca.android.accordion"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:orientation="vertical" >

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <com.sentaca.android.accordion.widget.AccordionView
            android:id="@+id/accordion_view"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            accordion:header_layout_fold_button_id="@id/foldButton"
            accordion:header_layout_id="@layout/accordion_header"
            accordion:header_layout_label_id="@id/foldText"
            accordion:section_bottom="@layout/accordion_footer"
            accordion:section_container="@layout/accordion_section"
            accordion:section_container_parent="@id/section_content"
            accordion:section_headers="@array/accordion_sections"
            android:background="#fff5f5f5"
            android:orientation="vertical" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Item 1" />

            <LinearLayout
                android:id="@+id/example_get_by_id"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Item 2" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Item 3" />
            </LinearLayout>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Item 4" />

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <RatingBar
                    android:id="@+id/ratingBar1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <EditText
                    android:id="@+id/editText1"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" />

                <SeekBar
                    android:id="@+id/seekBar1"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" />
            </LinearLayout>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Item 4" />
        </com.sentaca.android.accordion.widget.AccordionView>
    </ScrollView>

</LinearLayout> 
```

这是样本的[样子](https://github.com/hamsterready/android-accordion-view/raw/master/screenshot.png)

# java - 从 Java 3D 中的 Point3f 数组中绘制 Lorenz 吸引子

> ID：10583443
> 
> 赞同：1
> 
> 时间：2012-05-14T12:35:18.830
> 
> 标签：java, graphics, 3d, drawing, java-3d

我已经计算了需要绘制的点的值，并将它们放入 Point3f 数组中。我有 526 435 分。下一步是一个接一个地绘制点，使其看起来像一条连续的线，或者使用 LineStripArray 在点之间绘制线。因为我没有找到如何逐点绘制，所以我尝试使用 LineStripArray。

我从[这里](http://www.java-tips.org/other-api-tips/java3d/how-to-draw-lines-with-java3d.html)获取了代码，并使用以下代码更改了方法“createLineTypes”的内容：

```
 Group lineGroup = new Group();

    Appearance app = new Appearance();
    ColoringAttributes ca = new ColoringAttributes(black, ColoringAttributes.SHADE_FLAT);
    app.setColoringAttributes(ca);

    Computing comp = new Computing();

    //the following row computes the values of the points I want to draw 
    //and it works alright; the points are saved into 
    //**static List<Vector3> computed_values** from  class Computing,
    // where Vector3 class defines a 3D point actually
    comp.do_the_job();    

    Point3f[] dashPts = new Point3f[Computing.computed_values.size()];
    for(int i = 0; i < Computing.computed_values.size(); i++)
    {
        dashPts[i] = new Point3f((int)Computing.computed_values.get(i).getX(), (int)Computing.computed_values.get(i).getY(), (int)Computing.computed_values.get(i).getZ());

    }
    System.out.print(Computing.computed_values.size());
    int[] a = {Computing.computed_values.size()};
    LineStripArray dash = new LineStripArray(Computing.computed_values.size(), LineArray.COORDINATES, a);
    dash.setCoordinates(0, dashPts);
    LineAttributes dashLa = new LineAttributes();
    dashLa.setLineWidth(1.0f);
    dashLa.setLinePattern(LineAttributes.PATTERN_SOLID);
    Shape3D dashShape = new Shape3D(dash, app);
    lineGroup.addChild(dashShape);

    return lineGroup; 
```

问题是它只画了1条垂直线。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:35:45.360

我找到了一个解决方案，它与 PointArray 一起使用。这里是

```
 Group lineGroup = new Group();

    Appearance app = new Appearance();
    ColoringAttributes ca = new ColoringAttributes(black, ColoringAttributes.SHADE_FLAT);
    app.setColoringAttributes(ca);

    Computing comp = new Computing();
    comp.do_the_job();

    Point3f[] plaPts = new Point3f[Computing.computed_values.size()];
    for(int i = 0; i < Computing.computed_values.size(); i++)
    {           
        plaPts[i] = new Point3f((float)Computing.computed_values.get(i).getX(), (float)Computing.computed_values.get(i).getY(), (float)Computing.computed_values.get(i).getZ());            
    }

    PointArray pla = new PointArray(Computing.computed_values.size(), GeometryArray.COORDINATES);
    pla.setCoordinates(0, plaPts);
    Shape3D plShape = new Shape3D(pla, app);
    lineGroup.addChild(plShape);

    return lineGroup; 
```

**重要提示：对于我的应用程序，我必须将值转换为 float，而不是像最初那样转换为 int。**

# iphone - Xcode：如何显示 GPS 强度值？

> ID：10583449
> 
> 赞同：14
> 
> 时间：2012-05-14T12:35:34.927
> 
> 标签：iphone, ios, xcode, gps

我正在尝试获取 GPS 强度值以显示信号是强还是弱。有谁知道如何获得价值。

提前致谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-14T12:49:29.150

使用[CLLocation](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)之类的属性`horizontalAccuracy`，这些属性`verticalAccuracy`指示设备认为该位置修复的准确程度。

你可以使用

```
 if (someLocation.horizontalAccuracy < 0)
{
    // No Signal
}
else if (someLocation.horizontalAccuracy > 163)
{
    // Poor Signal
}
else if (someLocation.horizontalAccuracy > 48)
{
    // Average Signal
}
else
{
    // Full Signal
} 
```

取自[链接](https://stackoverflow.com/questions/10246662/how-can-i-evaluate-the-gps-signal-strength-iphone) 希望它有帮助。快乐编码:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T12:46:57.073

您可以使用 stackoverflow 的出色搜索功能并[找到此解决方案：](https://stackoverflow.com/questions/4632940/finding-gps-signal-strength)

[查找 GPS 信号强度](https://stackoverflow.com/questions/4632940/finding-gps-signal-strength)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T12:46:48.283

您无法直接访问可见卫星的数量或信号强度。

但是，您可以根据准确性计算假信号强度。

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
   NSLog (@"accuracy: H:%.2f, V:%.2f", newLocation.horizontalAccuracy, newLocation.verticalAccuracy);
} 
```

# entity-framework - EF/Silverlight 应用程序的项目结构

> ID：10583451
> 
> 赞同：3
> 
> 时间：2012-05-14T12:35:43.743
> 
> 标签：entity-framework, xaml, design-patterns, project-structure

我目前正在为 3 层解决方案寻找一个好的项目结构，以避免在新项目中进行不必要的工作。

该项目将包括一个核心产品，该产品具有

*   包含 EF 代码优先模型的模型项目
*   在服务器上有业务逻辑和通信逻辑的项目
*   客户端上的存储库项目
*   带有视图和视图模型的 silverlight 项目（想在这里使用 caliburn.micro）

现在的问题是客户可能有一些特殊要求，这可能导致上述所有项目发生变化。所以我的想法是我可以只使用基本结构并为客户创建相同的结构。如果没有更改，我将只有空类，它们只是扩展基类并且什么都不添加。

这给我带来了以下问题：

*   实体框架（代码优先）中的一个问题是在一个项目中拥有基类（已经功能齐全）并且有另一个项目可以使用新字段扩展模型类吗？
*   更改用户控件是否存在 XAML 中的问题？例如，如果我的核心中有一个由五个文本框组成的用户控件，并且我想将第二个框更改为单选按钮，但没有别的。

如果有更好的方法来处理客户特定的更改，我也会接受对项目结构的更改。

**编辑：我可能会使用以下方法来解决问题。**

**实体框架：**

首先使用代码，似乎可以让一个模型项目扩展另一个项目。这意味着我可以写如下内容：

```
public class CoreAddress{
  [Key]
  public int AdrId{get; set;}
  public string Street {get;set;}
}

public class CustomerAddress : CoreAddress{
  public string StreetNumber {get; set;}
} 
```

为了完成这项工作，唯一需要的是 DbContext 中的一行：

```
(this as IObjectContextAdapter).ObjectContext.MetadataWorkspace.LoadFromAssembly(typeof(<entity from other assembly>).Assembly); 
```

**XAML**

为了在 XAML 中获得类似的行为，我必须使用 Caliburn.Micro（与 MEF 结合使用），这在这里很有帮助。

我将创建包含 ContentControl 元素的 UserControl，这些元素是使用 MEF 动态获取的。这意味着我又拥有了一个包含所有视图和 ViewModel 的核心项目。如果我需要在某处为客户交换特殊控件，我将控件更改为 ContentControl 并为其创建核心视图和 ViewModel（与更改请求之前相同）。ContentControl 的这个 ViewModel 带有一个导出接口和 ExportMetadata 以将优先级设置为 1。现在我使用另一个 UserControl 创建另一个项目，该项目具有一些其他控件而不是核心控件，并将其再次注释为具有相同接口的导出但将我的优先级设置得更高，因此加载了客户特定的控件。

简短的例子：

主要用户控件和视图模型：

```
<UserControl x:Class="SilverlightApplication5.TestView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">
        <StackPanel>
            <ContentControl x:Name="Item"/>
            <TextBox x:Name="TextItem" Text="asdf"/>
        </StackPanel>

    </Grid>
</UserControl>

public class TestViewModel : Screen
    {
        private object viewModel;
        private Lazy<IMyViewModel, IPluginMetadata>[] _orderEditorFactory;

        [ImportMany(typeof(IMyViewModel), AllowRecomposition = true)]
        public Lazy<IMyViewModel, IPluginMetadata>[] OrderEditorFactory
        {
            get { return _orderEditorFactory; }
            set
            {
                _orderEditorFactory = value;
                Item = _orderEditorFactory.OrderByDescending(lazy => lazy.Metadata.Priority).First().Value;

            }
        }
    private object _item;

        public object Item
        {
            get { return _item; }
            set
            {
                _item = value;
                NotifyOfPropertyChange(() => Item);
            }
        }
    } 
```

核心控制：

```
<UserControl x:Class="SilverlightClassLibrary2.MainControlView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">
    <StackPanel>
        <TextBlock x:Name="Test" Text="Text from Core control"/>
    </StackPanel>
</UserControl>

[Export(typeof (IMyViewModel))]
[ExportMetadata("Name", "Pluginc")]
[ExportMetadata("Priority", 30)]
public class MainControlViewModel : Screen, IHarnessAware, IMyViewModel
{

} 
```

客户特定控制：

```
<UserControl x:Class="SilverlightClassLibrary1.CustomView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">
        <RadioButton x:Name="Test" Content="{Binding Path=Test}"/>
    </Grid>
</UserControl>

[Export(typeof(IMyViewModel))]
[ExportMetadata("Name", "Plugind")]
[ExportMetadata("Priority", 2)]
public class CustomViewModel : MainControlViewModel, IHarnessAware, IMyViewModel
{
} 
```

导出界面：

```
public interface IMyViewModel
{

} 
```

导出元数据接口：

```
 public interface 
        IPluginMetadata
    {
        string Name { get; }
        [DefaultValue(0)]
        int Priority { get; }
    } 
```

**我确实用它来回答这个问题，因为我仍然对可能已经解决了类似问题的其他人的意见感兴趣。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:47:46.107

**关于项目结构：** 您可以创建一个基础项目，其中包含您需要的每个关注层。模型、业务、视图、存储库等。

还要创建一些基本流程，例如，将其控制器连接到存储库的单个视图。将其保存在您的代码库中，然后在需要创建新项目时将其分叉。

现在，您无需花费时间进行设置，而是需要一些时间来根据项目需要进行自定义。

**关于 XAML：**恕我直言，如果您更改组件，您应该确保它返回与您的控件期望的相同的数据类型。如果您将文本框换成复选框，请确保该检查将字符串返回给控制器。

# opengl - 现代 Opengl 中不推荐使用的枚举列表？

> ID：10583452
> 
> 赞同：2
> 
> 时间：2012-05-14T12:35:54.960
> 
> 标签：opengl, enums, deprecated

当我使用 编写`OpenGL`程序`Opengl version 4.0 core profile`时，我发现它`GL_QUADS`已被弃用。我在不推荐使用的函数中找到了一个问题和答案，但是在哪里可以找到 OpenGL 4.0 中不推荐使用的枚举列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T13:05:34.307

在*[www.opengl.org/registry](http://www.opengl.org/registry/)*上，您可以找到*[enumext.spec](http://www.opengl.org/registry/api/enumext.spec)*文件，这是一个包含 OpenGL 枚举符号列表的文本文件。

在 VERSION__DEPRECATED 类别中标记的枚举数（即 VERSION_1_1_DEPRECATED 枚举：）您可以找到该列表。

# scala - Scala curried 函数在 Map 的隐式扩展中失败

> ID：10583453
> 
> 赞同：0
> 
> 时间：2012-05-14T12:35:58.437
> 
> 标签：scala, map, implicit

我有以下地图扩展

```
object ImplicitMap {
  implicit def extendMap(m : Map[String,Any]) = new MapExtension(m)
}
class MapExtension(m : Map[String,Any]) {
  def +?(conditional:Boolean)(pair:(String,Any)):Map[String,Any] = 
    if (conditional) m + pair
    else m
} 
```

此函数在使用时会给出**Boolean does not take parameters**的编译时错误，但是书面显式测试（如下）可以正常工作

```
 test ("Map +?") {

    def +?(conditional:Boolean)(pair:(String,Any)):Map[String,Any] = if (conditional)   Map.empty + pair else Map.empty

    +?(true)("hi" -> 2) should equal (Map("hi" -> 2))
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:42:03.977

我假设您正在尝试编写`someMap +? (cond)(pair)`，但这不起作用，因为它将被评估为`someMap.+?(cond(pair))`，您必须将其用作普通方法，而不是用作运算符。`someMap.+?(cond)(pair)`为我工作。

```
scala> Map("Foo" -> "bar")
res2: scala.collection.immutable.Map[java.lang.String,java.lang.String] = Map(Foo -> bar)

scala> res2.+?(true)(("foo", "bar"))
res3: Map[String,Any] = Map(Foo -> bar, foo -> bar)

scala> res2 +? (true)(("foo", "bar"))
<console>:13: error: Boolean(true) does not take parameters
              res2 +? (true)(("foo", "bar")) 
```

# vim - win7下make后如何查看输出？

> ID：10583455
> 
> 赞同：2
> 
> 时间：2012-05-14T12:36:03.917
> 
> 标签：vim, windows-7

我正在尝试在windows 7下开发。安装最新版本的vim后，我发现它不会在make后打印输出。我用 :make 命令制作 cpp 文件。但它只是将输出重定向到 AppData 下的临时文件。以前满足过这个条件吗？我试图将 makeprg 设置为其他命令，但我总是重定向标准输出流。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:47:00.983

我不太清楚你的意思，但我想你正在寻找

```
:copen 
```

（打开`quickfix window`）

看

*   [`:he quickfix`](http://vimdoc.sourceforge.net/htmldoc/quickfix.html)

# jquery - Jquery 幻灯片动画 UI - 最小化/最大化时的 Chrome 错误

> ID：10583456
> 
> 赞同：1
> 
> 时间：2012-05-14T12:36:06.897
> 
> 标签：jquery, google-chrome

关于我之前的问题；[jQuery幻灯片动画](https://stackoverflow.com/questions/8116792/jquery-slide-animation)。为了有一个滑块，我使用了这个解决方案：

HTML

```
<div class="bigBox">
     <div class="try2">
          <h3 id="test2">CLICK THIS</h3>
          <p>This is a demonstration of jQuery SimpleDialog.</p>
      </div> 
      <div class="try">
          <p id="haha">CLICK THIS</p>
          <p>This is a demonstration of jQuery SimpleDialog.</p>
      </div>          
</div> 
```

​ JS

```
$('#haha').click(function() {
    $('.try').hide("slide", {
        direction: "left"
    }, 1000);
    $('.try2').show("slide", {
        direction: "right"
    }, 1000);
});​ 
```

CSS

```
div.bigBox {
  background-color:transparent;
  width:100px;
  height:125px;
  position: relative;
}

.try, .try2{
  width:100px;
  height:125px;
  position: absolute;
}

.try {
  background-color:green; 
}

.try2{
  background-color:yellow;
} ​ 
```

[演示](http://jsfiddle.net/GregP/CV7fd/1/ "jsFiddle 演示")

问题是当您在谷歌浏览器中最小化/最大化页面（缩放不是 100%）时，滑块不再平滑滑动。但如果我在 Firefox/IE 中测试它，它运行良好。

是什么导致谷歌浏览器中滑块之间的空间？这是谷歌浏览器的错误吗？我该如何解决？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:14:31.163

诚然，我不确定为什么它在 chrome 中这样做，但这里有一种稍微不同的方法，在放大一点​​时对我有用。

[http://jsfiddle.net/CV7fd/20/](http://jsfiddle.net/CV7fd/20/)

基本概念是将两个子元素“try”和“try2”包装在另一个div中（称为“overflowDiv”）。然后我们将“bigBox”div 的大小限制为 100 像素，并将其 CSS 溢出属性设置为“隐藏”。“overflowDiv”的宽度与“try”和“try2”的宽度一样宽，这样它们就不会换行（200px - 请记住在此计算中包括填充、边框、宽度和边距）。“bigBox”然后有效地成为“overflowDiv”内容的窗口。然后动画简单地调整“overflowDiv”的左侧位置。

结果是我们最终只为一个元素而不是两个元素设置动画，因此它们更有可能彼此齐平。

# visual-studio-2010 - 将 Web 应用程序发布到 Web 服务器后出现 Http 404 错误

> ID：10583458
> 
> 赞同：0
> 
> 时间：2012-05-14T12:36:07.613
> 
> 标签：visual-studio-2010, webserver

我有一个在本地系统上运行良好的 Web 应用程序。我已经使用 Visual Studio 一键发布的方法将其部署到服务器上。发布显示成功，但是当我尝试使用 http:\servername\application 浏览网站时，它给了我 HTTP 404 web page not found 错误消息。

我是否缺少 IIS 中的任何类型的设置，或者请让我知道如何解决此问题并让应用程序从服务器运行。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:40:30.903

尝试将您用作默认页面的 .aspx 或 .html 页面提供给您。在您提供的 url 之后..看看问题是否仍然存在

# excel - VLOOKUP 有两个标准？

> ID：10583461
> 
> 赞同：6
> 
> 时间：2012-05-14T12:36:10.467
> 
> 标签：excel, excel-formula

是否有一个公式可以从匹配两个或多个条件的第一行返回一个值？例如，“从第一行返回 C 列，其中列 A = x AND 列 B = y”。我想在不连接 A 列和 B 列的情况下做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T12:48:59.650

真 = 1，假 = 0

D1 返回 0，因为 0 * 1 * 8 = 0

D2 返回 9 因为 1 * 1 * 9= 9

![在此处输入图像描述](../Images/d564f0c1c18e10f140e2abb5ac4c60d4.png)

这应该让您更改标准： ![在此处输入图像描述](../Images/dfb00b536f131785e16227eaaae1bac3.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T18:49:16.013

我为此使用 INDEX/MATCH。前任：

我有一个数据表，想要返回 C 列中的值，其中 A 列中的值为“c”，B 列中的值为“h”。

![样本布局](../Images/aa85cd2ede009b9312b9487b5aed0322.png)

我将使用以下数组公式：

`=INDEX($C$1:$C$5,MATCH(1,(($A$1:$A$5="c")*($B$1:$B$5="h")),0))`

按`Ctrl`+ `Shift`+提交公式`Enter`

输入公式后，您可以使用 Excel 的公式审核工具逐步进行评估，看看它是如何计算的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T23:25:58.993

`SUMPRODUCT`当需要多个条件匹配的总和时，绝对有价值。但是按照我阅读你的问题的方式，你想要这样的东西`VLOOKUP`返回第一场比赛。尝试这个：

![多标准索引匹配](../Images/c036448c7bbe476cffba8b157c86977f.png)

为方便起见，公式`G2`如下 - 需要数组条目 ( `Ctrl+Shift+Enter`)

[编辑：我在这里更新了公式，但没有在屏幕截图中] `=INDEX($C$1:$C$6,MATCH(E2&"|"&F2,$A$1:$A$6&"|"&$B$1:$B$6,0))`

有两点需要注意：

1.  `SUMPRODUCT`如果结果类型不是数字，则不起作用
2.  `SUMPRODUCT`将返回`SUM`匹配条件的结果，而不是第一个匹配项（就像`VLOOKUP`那样）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T08:11:22.513

实际上，我认为他要问的是 excel 中典型的多结果显示选项。可以[使用数组中的 Small 和 row 函数](http://office.microsoft.com/en-us/excel-help/how-to-look-up-a-value-in-a-list-and-return-multiple-corresponding-values-HA001226038.aspx)来完成。

这将显示与不同条件匹配的所有结果

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T12:41:21.900

显然你可以使用[SUMPRODUCT 函数](http://www.dailydoseofexcel.com/archives/2009/04/21/vlookup-on-two-columns/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-06T18:19:07.233

这是一个答案，显示了如何使用 SUMPRODUCT 和表头查找来做到这一点。这样做的主要优点：它适用于任何值，数字或其他值。

因此，假设我们在某个名为 MyTable 的表上有标题 H1、H2 和 H3。假设我们将其输入到第 1 行，可能在另一张纸上。我们希望将 H1、H2 分别匹配到该工作表上的 x、y，同时返回 H3 中的匹配值。那么公式如下：

```
=INDEX(MyTable[H3], ROUND(SUMPRODUCT(MATCH(TRUE, (MyTable[H1] & MyTable[H2]) = ($x1 & $y1),0)),0),1) 
```

它有什么作用？sum-product 确保所有内容都被视为数组。因此，您可以将整个表列连接在一起，以创建一个连接值的数组，动态计算。然后您可以将它们与 x 和 y 中的现有值进行比较——您可以神奇地将表中的串联数组与 x 和 y 的单独串联进行比较。这为您提供了一组真假值。将其与 true 匹配会产生查找的第一个匹配项。然后我们需要做的就是返回并在原始表中建立索引。

## 笔记

舍入只是为了确保 Index 函数返回一个整数。在四舍五入之前，我得到了 #N/A 值。

通过评估器运行它以查看发生了什么可能更具启发性......

这可以很容易地修改为使用非表 - 只需将表引用替换为原始范围。不过，表格更清晰，因此请尽可能使用它们。我在这里找到了原始来源：http: [//dailydoseofexcel.com/archives/2009/04/21/vlookup-on-two-columns/](http://dailydoseofexcel.com/archives/2009/04/21/vlookup-on-two-columns/)。但是 INT 的路由值存在一个错误，所以我修复了它。

# php - 存储客户付款详细信息 - PCI 合规性

> ID：10583465
> 
> 赞同：1
> 
> 时间：2012-05-14T12:36:14.940
> 
> 标签：php, mysql, payment-processing, pci-dss, pci-compliance

我正在与一个新客户合作一个项目，由于业务类型，他们在获取商家帐户来处理他们的在线支付时遇到了一些问题。该系统的工作方式与 Just Eat/Expedia 等类似，客户在网站上下订单，然后将订单传递到场地，网站收取佣金。

客户询问我们是否可以将客户付款详细信息存储在我们的数据库中（加密），然后将它们传递到场所，以便使用他们内部的卡系统自行处理。我知道这存在 PCI 合规性问题，但我无法直接回答我们需要做什么。我已经和几家托管公司谈过了，其中一家说我们需要一个具有独立 Web 和数据库服务器的集群，而另一家则说我们不会。我以前从未做过这样的事情，我通常只是将付款处理外包给 SagePay 等人。

这是建议的付款流程：

*   客户在网站下订单
*   付款详情存储在数据库中
*   客户通过电子邮件收到订单确认。地点通过电子邮件发送订单通知。如果场地接受订单，订单和付款细节将被传输到内部离线处理
*   场地在内部完成付款后，确认订单并从网站数据库中删除付款详细信息
*   客户通过电子邮件收到最终订单确认

我想确保任何流程都是正确的，我最不想做的就是让网站受到攻击，支付详细信息，并对任何损失负责！

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:55:20.530

You failed to include an actual question....

However: PCI compliance is non-trivial; there are multiple levels of compliance, and the [standards](https://www.pcisecuritystandards.org/merchants/) are a little dense...in general, as long as you don't store payment details, it's relatively easy to comply. If you do store payment details, your compliance requirements become a lot more complex, and may include processes such as vetting employees.

Your intention to transfer payment details to the venues looks like a huge red flag - you're basically giving credit card details to third parties, which I as a consumer would not be happy about, and is almost certainly not allowed within any of the PCI standards.

It's worth talking to a specialist payment gateway provider about the options you have - for instance, most credit card transactions consist of an "authorisation" call, which submits the card details and amount; the service checks the card is good for the money, and "ring fences" the amount on the account, and issues back an authorization code. The actual "settlement" can occur later - up to 10 days for some cards, and can use just the authorization code, rather than the full card details. A specialist payment provider will know what options you have.

It may be possible for you to share the authorization code with your venues, to allow them to take payment (though this would almost certainly require you all to use the same gateway provider).

It would be straightforward to change the flow you mention to include auth/settle logic:

*   Customer places order on website
*   Your site issues "auth" using credit card details, store auth code.
*   Customer is emailed an order acknoledgement.
*   Venue is emailed an order notification.
*   If venue accepts the order, you execute the "settle" transaction
*   You confirm order details to venue
*   Customer is emailed a final order confirmation
*   Weekly/monthly/whatever you issue a report to each venue showing amount outstanding and send them a cheque or whatever.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:02:57.243

另一种方法是完全将信用卡信息的存储从您手中拿走，并将负担交给有能力和专业知识的其他人，同时让您在必要时轻松向客户收费。Authorize.Net 提供他们的[客户信息管理器 API](http://developer.authorize.net/api/cim/)，允许您为客户创建付款配置文件。他们处理信用卡信息的存储，并为您提供支付 ID。然后，您可以在必要时根据该付款 ID 收费，而无需访问实际的付款详细信息。

# gcc - 调试器在具有浮点参数的数学函数内停止

> ID：10583470
> 
> 赞同：0
> 
> 时间：2012-05-14T12:36:26.597
> 
> 标签：gcc, arm, stm32, fpu, keil

我正在使用`Keil uVision`编译`gcc`器（ARM EABI 的 Sourcery Codebenchlite ）对`STM32F4 cortex M4`芯片进行编程。

我设置的编译器控制字符串是：

```
-march=armv7e-m -mfpu=fpv4-sp-d16  -mfloat-abi=softfp -std=gnu99 -fsingle-precision-constant 
```

当调试器遇到一些数学函数（例如`asinf()`，`atan2f()`等）时，它会停止。

我检查过这些函数的参数也是单精度的。

我认为这是因为缺少一些使用`VFP`浮点的编译器指令，但无法识别它。

有什么我错过了吗？

我做的一个例子的反汇编代码：

调试器可以评估 atan2f(0.3,0.4)，但在评估 atan2f(a,b) 时会在 0x0803B9CA 处停止。不知道为什么数字有效但变量无效。

```
 377:         float a = 0.3; 
0x0803B9BA 4B1E      LDR           r3,[pc,#120]  ; @0x0803BA34
0x0803B9BC 63BB      STR           r3,[r7,#0x38]
   378:         float b = 0.4; 
   379:  
0x0803B9BE 4B1E      LDR           r3,[pc,#120]  ; @0x0803BA38
0x0803B9C0 637B      STR           r3,[r7,#0x34]
   380:         float c = atan2f(0.3,0.4); 
0x0803B9C2 4B1E      LDR           r3,[pc,#120]  ; @0x0803BA3C
0x0803B9C4 633B      STR           r3,[r7,#0x30]
   381:         float d = atan2f(a,b); 
   382:          
0x0803B9C6 6BB8      LDR           r0,[r7,#0x38]
0x0803B9C8 6B79      LDR           r1,[r7,#0x34]
0x0803B9CA F004F993  BL.W          atan2f (0x0803FCF4)
0x0803B9CE 62F8      STR           r0,[r7,#0x2C] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:46:31.880

在 STM32F4 上，您首先需要启用 FPU - 否则 CPU 将跳转到 HardFault_Handler 或 BusFault_Handler（我不知道是哪一个）。

在使用浮点指令之前（可能在 main() 的开头？），您可以在 C/C++ 中的任何地方执行此操作。假设您使用 CMSIS 库并包含 core_m4.h（可能通过 stm32f4xx.h）：

```
void cortexm4f_enable_fpu() {
    /* set CP10 and CP11 Full Access */
    SCB->CPACR |= ((3UL << 10*2)|(3UL << 11*2));
} 
```

另一种方法是启动文件中的汇编代码：

```
/*enable fpu begin*/
ldr     r0, =0xe000ed88           /*; enable cp10,cp11 */
ldr     r1,[r0]
ldr     r2, =0xf00000
orr     r1,r1,r2
str     r1,[r0]
/*enable fpu end*/ 
```

（我在互联网上的某个地方找到了代码，但不知道在哪里。我自己使用它，它有效）。

也许您的问题出在那儿？

# iphone - 如何在 iPhone 中创建自定义时间栏？

> ID：10583474
> 
> 赞同：1
> 
> 时间：2012-05-14T12:36:58.160
> 
> 标签：iphone, objective-c, ios, customization, quartz-graphics

我需要创建一个时间栏，如所附图像。蓝线是指示某些操作的日期。大红色箭头标记用于滑动以选择任何蓝线。在背景栏分为年份。红色小圆圈表示年份。

任何想法，我该如何开始？

谢谢

![演示视图](../Images/61d8a1d05ed6a25d02a88b77ea477a6e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:51:52.233

如果蓝条移动不多，并且您不需要经常调整此视图的大小（这通常是 iPhone 上的情况），那么我建议继承 UIControl（或 UIView）并自己实现它。

有一个 NSArray 属性存储 NSDate 对象和方法，如`addDate:`, `removeDate:`，`removeDateAtIndex:`以从其他对象（如您的视图控制器）更改其内容。在这些方法中，您可以添加或删除传递的日期并调用`[self setNeedsDisplay];`以重绘线条。

您将需要一些方法来计算滑块上日期的位置（以像素为单位）并计算特定坐标处的日期。这应该很容易（基本线性插值）。

并假设红色滑块只能指向蓝线（但不能指向蓝线），将 NSDate 指针变量添加到当前选定的日期。在里面

在 drawRect: 方法中，您需要使用 CoreGraphics 函数绘制所有线条。如果您需要这方面的帮助，请查阅文档。Apple 也有一些很棒的示例应用程序。

要显示红色滑块，您可以使用 UIPanGestureRecognizer 添加自定义 UIImageView，并确保它仅在手势处理程序中垂直移动。或者可以添加一个没有轨道图像的 UISlider（我对此不是 100% 确定）。无论哪种情况，您都需要在用户离开后调整滑块的位置，使其跳到最近的蓝线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:55:06.180

一个粗略的思路，1.获取整个TimeBar的长度。让它为t。2.除以x=numberofYears*365.设t_eachday_pos=t/x 3.得到每一天的位置，计算其偏移量为daycount*t_eachday_pos；4\. 将您的 blueLine 添加为 customButton。5\. 要执行一些操作，请传递 x 天数（例如，第 2 年的第 245 天等）

试试这个，我在我的一个应用程序中使用了同样的东西，它正在工作

# java - 如何与不同类的swing组件交互

> ID：10583477
> 
> 赞同：3
> 
> 时间：2012-05-14T12:37:17.160
> 
> 标签：java, swing

我只是想在脑海中想出一些关于从其他类的摆动组件中获取信息的事情。

我有一个主类，它使用几个类来构建一个摆动 gui。如何从另一个类向这些组件写入信息。据我了解，我需要使用数组列表来存储对这些组件的引用，但我不确定如何执行此操作，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:40:42.837

我建议您尝试将*模型*与*视图*分开。不要在实际的 GUI 组件中存储与应用程序逻辑相关的数据。

在数组列表中存储对组件的引用，然后通过数组列表和各种`getText`方法访问数据对我来说似乎是个坏主意。

将值存储在表示某个模型的对象中，并让 GUI 反映模型的状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:40:36.157

这是访问另一个类的方法的一种方式：

```
public class MyFrame extends JFrame implements ActionListener 
{
  private final MyBusinessClass bc = new MyBusnessClass();

  @Override public void actionPerformed(ActionEvent e) {
    this.bc.someBusinessMethod();
  }
} 
```

# c# - 公开个人资料的公开可见用户 ID

> ID：10583479
> 
> 赞同：2
> 
> 时间：2012-05-14T12:37:18.687
> 
> 标签：c#, asp.net, database, asp.net-mvc-3, security

我想为我网站上的每个用户创建一个公共个人资料页面。与 SO 用户配置文件非常相似的东西。但我不想公开我用作 PK 的 Guid。我也不知道用户名在网站的整个生命周期中在 url 中使用它的唯一性。

问题是 SO 本身如何在 url [https://stackoverflow.com/users/242506/nubm](https://stackoverflow.com/users/242506/nubm)中执行此操作？可以删除用户名并且 url 仍然有效，但我是否应该在我的 Guid 旁边生成一些可公开查看的 UserId，我可以在指向个人资料页面的链接中使用它并在 url 中显示它？

我发现了类似的问题[我应该将用户 ID 公开吗？](https://stackoverflow.com/questions/3629134/should-i-expose-a-user-id-to-public)或[如何在 ASP.NET (3.5) 中创建“公共”用户配置文件页面，](https://stackoverflow.com/questions/4446969/how-do-i-create-a-public-user-profile-page-in-asp-net-3-5)但它们并不是我想知道的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:52:32.950

你可以做两件事。

首先，您可以在数据库上创建一个额外的增量 ID，无论是在 ASP.NET 表上还是在新的映射表上，并提供一个连接到 Guid 的较小数字。为什么要小一些？因为 Guid 是 128 位，并且太大而无法在 url 上使用。

然后，您可以在 url 上使用这个与 Guid 相连的较小数字。这里唯一的漏洞利用问题是任何人都可以找到您的所有用户列表。所以有这个公开所以如果你也公开它们不是问题。所以使用他们的 URL 中的数字来查找用户，用户名是为了更好的 SEO。号码保持不变，但名称可以更改，因此仅使用号码来定位用户。

第二种解决方案是将 128 位 Guid 编号压缩和编码为 73 个基本字符串。我选择了 73 个基本字符，因为 73 是 url 上允许的非转义字符。

以下是我找到的一些用于进行此转换的示例：

[http://www.singular.co.nz/blog/archive/2007/12/20/shortguid-a-shorter-and-url-friendly-guid-in-c-sharp.aspx](http://www.singular.co.nz/blog/archive/2007/12/20/shortguid-a-shorter-and-url-friendly-guid-in-c-sharp.aspx)

[http://jopinblog.wordpress.com/2009/02/04/a-shorter-friendlier-guiduuid-in-net/](http://jopinblog.wordpress.com/2009/02/04/a-shorter-friendlier-guiduuid-in-net/)

[http://buildmaestro.wordpress.com/2011/04/27/installscript-to-transform-guid-into-compressed-guid/](http://buildmaestro.wordpress.com/2011/04/27/installscript-to-transform-guid-into-compressed-guid/)

一个简单的转换为 base64（来自[Dave Transoms](http://www.singular.co.nz/blog/archive/2007/12/20/shortguid-a-shorter-and-url-friendly-guid-in-c-sharp.aspx)）

```
public static string Encode(Guid guid)
{
  string encoded = Convert.ToBase64String(guid.ToByteArray());
  encoded = encoded
    .Replace("/", "_")
    .Replace("+", "-");
  return encoded.Substring(0, 22);
}

public static Guid Decode(string value)
{
  value = value
    .Replace("_", "/")
    .Replace("-", "+");
  byte[] buffer = Convert.FromBase64String(value + "==");
  return new Guid(buffer);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:53:01.007

在 SO 的情况下，使用 PK。url 的用户名部分是可选的并且被忽略。

# jquery - jquery：如何检查页面是否正在执行 ajax 请求？

> ID：10583480
> 
> 赞同：4
> 
> 时间：2012-05-14T12:37:22.060
> 
> 标签：jquery, ajax

我想构建一个随每个 ajax 请求触发的函数。就像显示“正在加载...”一样。我正在使用 Jquery 这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T12:41:02.943

`jQuery.active`包含活动的 jQuery AJAX 连接数。但是，您必须不断地轮询该 var，以便在新连接出现时触发事件。

无论如何，你为什么要用它作为“加载”指标？每当您提出请求时，只需设置指标即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T12:39:31.677

Yes:

[http://api.jquery.com/ajaxStart/](http://api.jquery.com/ajaxStart/)

[http://api.jquery.com/ajaxStop/](http://api.jquery.com/ajaxStop/)

HTML:

```
<div id="loadingDiv">Loading ajax stuff...</div> 
```

jQuery:

```
$('#loadingDiv')
.hide() 
.ajaxStart(function() {
    $(this).show();
})
.ajaxStop(function() {
    $(this).hide();
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T12:39:43.727

Yes, this is totally possible. Start with the global ajax handlers here [http://api.jquery.com/category/ajax/global-ajax-event-handlers/](http://api.jquery.com/category/ajax/global-ajax-event-handlers/) .ajaxStart() and .ajaxStop() events are the most likely candidate to show your status indicator.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-17T14:11:30.757

如前所述，$.active 包含活动的 jQuery AJAX 连接数。当 $.active 达到 0 时，所有的 AJAX 都已经加载完毕。因此，您可以设置一个 bucle 并等待所有处决。我在这里找到了解决方案，“etgregor”答案

[我如何知道 jQuery 是否有待处理的 Ajax 请求？](https://stackoverflow.com/questions/1822913/how-do-i-know-if-jquery-has-an-ajax-request-pending)

# c++ - 以起始值作为函数中的默认值打印链表中的值

> ID：10583482
> 
> 赞同：0
> 
> 时间：2012-05-14T12:37:35.580
> 
> 标签：c++, singly-linked-list

我正在尝试创建一个递归函数，它将向后打印链表中的所有元素。

这是我所做的功能：

```
void lista::printBack(node *pocetak) {
    if (pocetak==NULL) {
        return ;
    }    
    printBack(pocetak->sljedeci);
    cout<<pocetak->podatak<<" ";
} 
```

现在来回答这个问题。我想设置参数 pocetak 的默认值，以便函数可以打印没有起始值的列表。

但是当我这样做时：

```
void lista::printBack(node *pocetak = head) 
{
    if (pocetak==NULL) {
        return ;
    }

    printBack(pocetak->sljedeci);

    cout<<pocetak->podatak<<" ";
} 
```

我总是收到一条错误消息：main.cpp:17:19：错误：没有匹配函数调用'lista::printBack()' main.cpp:17:19：注意：候选人是：lista.h:20： 10：注意：void lista::printBack(node*) lista.h:20:10：注意：候选人需要 1 个参数，提供 0

这是我能做到的吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:40:19.730

需要在头文件中指定默认参数（实现`lista::printBack(node* pocetak=head)`不够）

```
// lista.h
struct node;
node* head;

struct lista
{
  void printBack(node* pocetak=head);
}; 
```

请注意，这意味着您需要在定义类型`node* head`之前进行有效声明`lista`，最好的方法是不使用前向声明（见上文）。此外，`head`将是一个全局变量，这通常不是一个好主意。

编辑：固定类型名称

# concurrency - 从 erlang 进程中获取响应

> ID：10583490
> 
> 赞同：0
> 
> 时间：2012-05-14T12:37:59.777
> 
> 标签：concurrency, erlang, distributed-computing

我有一个 erlang 项目，它向我的应用程序发出大量并发 SOAP 请求。目前，它受到可用节点数量的限制，但我想对其进行调整，以便每个节点一次可以发送多个消息。

我已经解决了这个问题，但我不知道如何从运行 SOAP 请求的进程中获取响应。

这是我试图用来执行多个线程的函数：

```
batch(Url, Message, BatchSize) ->
    inets:start(),

    Threads = for(1, BatchSize, fun() -> spawn(fun() -> attack_thread() end) end),
    lists:map(fun(Pid) -> Pid ! {Url, Message, self()} end, Threads). 
```

这个函数由启动压力测试器的人调用，它在我们网络中的每个节点上调用。它会持续调用，直到所有请求数量的 SOAP 请求都已发送并计时。

这是通过批处理方法发送消息的攻击线程：

```
attack_thread() ->
 receive
    {Url, Message, FromPID} ->
        {TimeTaken, {ok, {{_, 200, _}, _, _}}} = timer:tc(httpc, request, [post, {Url, [{"connection", "close"}, {"charset", "utf-8"}], "text/xml", Message}, [], []]),
        TimeTaken/1000/1000.
 end 
```

如您所见，我希望它返回 SOAP 请求所用的秒数。但是，erlang 的消息传递 ( `Pid ! Message`) 不会返回任何有用的信息。

我怎样才能得到结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T17:21:57.140

您的每个`attack_thread()`线程都可以简单地在运行该`batch/3`函数的进程的邮箱中投递一条消息：

```
 FromPid ! {time_taken, self(), TimeTaken / 1000 / 1000}. 
```

但随后您需要收集结果：

```
 batch(Url, Message, BatchSize) ->
  inets:start(),

  Pids = [spawn_link(fun attack_thread/0) || _ <- lists:seq(1, BatchSize],
  [Pid ! {Url, Message, self()} || Pid <- Pids],
  collect(Pids).

 collect([]) -> [];
 collect(Pids) ->
   receive
     {time_taken, P, Time} ->
       [Time | collect(Pids -- [P])]
   end. 
```

其他一些评论：你可能想要 spawn_link/1 这里。如果有什么东西在途中死掉，你希望整个东西都死掉。另外，一定要稍微调整一下 inets httpc 以使其更有效。您可能还想查看 basho_bench 或 tsung。

最后，您可以直接使用闭包，而不是传递 url 和消息：

```
 attack_thread(Url, Message, From) -> ... 
```

所以你的产卵是：

```
 Self = self(),
 Pids = [spawn_link(fun() -> attack_thread(Url, Message, Self) end) || _ <- ...] 
```

它避免在一开始就传递消息。

# java - writing Operation logs using the Servlet Filters

> ID：10583493
> 
> 赞同：0
> 
> 时间：2012-05-14T12:38:04.943
> 
> 标签：java, logging, servlets, servlet-filters, operation

We want to write operation logs in our application for all the operation being made to DataBase. The operation log should contain the operation info(the data being "add/modify/delete") and the result of the operation(success/failure). Since there are more number of action classees, adding the code to write operation log in each action class looks difficult. So I thought of writing this part of code in the Servlet Filter. But I have a problem here, I need to know the operation status(success/failure) but this is not possible in the filter with out parsing the response object. But parsing the response object looks difficult. Can you suggest any alternative way to do this?

Thanks,

Chandra

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:42:14.873

如果您的应用程序像 Spring 一样基于 AOP，那么您可以定义可以检查标准的方面，例如特定包的类、特定类型的方法（get/set/both）。使用这些方面，您可以添加日志记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:44:24.007

我认为实现这一点的最佳方法是向 JDBC 驱动程序添加一些额外的日志记录。过去我使用过[Log4JDBC](http://code.google.com/p/log4jdbc/)项目。

# python - Average network statistics in Python

> ID：10583495
> 
> 赞同：4
> 
> 时间：2012-05-14T12:38:06.800
> 
> 标签：python

I'm new to python and I need to calculate the 'average speed' of my network interface(like the tool nload) on a linux machine. The below code is telling me how much bytes have been sent and received. I would appreciate if someone could help me print the average speed of my network interface.

```
def main():
    rx_bytes, tx_bytes = get_network_bytes('eth0')
    print '%i bytes received' % rx_bytes
    print '%i bytes sent' % tx_bytes

def get_network_bytes(interface):
    for line in open('/proc/net/dev', 'r'):
        if interface in line:
            data = line.split('%s:' % interface)[1].split()
            rx_bytes, tx_bytes = (data[0], data[8])
            return (int(rx_bytes), int(tx_bytes))

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:53:16.520

拿你的 main() 和 get_network_bytes() 并将它们包装在一个 python 进程中：

```
import subprocess
import time
from daemon import runner
import datetime

class App():
    def __init__(self):
        self.stdin_path = '/dev/null'
        self.stdout_path = '/dev/tty'
        self.stderr_path = '/dev/tty'
        self.pidfile_path =  '/tmp/YOUR_PROCESS_NAME.pid'
        self.pidfile_timeout = 5
    def run(self):

        counter1 = 0
        counter_log = 0
        try:
            while True:

                # INSERT YOUR FUNCTIONS HERE

                # SET YOUR LOOP SLEEP TIMER (IN SECONDS) HERE
                time.sleep(60)

        except Exception, e:
            raise

app = App()
daemon_runner = runner.DaemonRunner(app)
daemon_runner.do_action() 
```

然后用“python myscript.py start”运行或停止或重新启动，进程ID将打印在屏幕上。在后台运行时，您需要将该脚本作为其他程序的一部分导入以对其进行查询，或者您始终可以在每次循环时将结果打印到临时文件，然后让其他程序查询那个临时文件。“有很多不同的方法可以做到这一点”

编辑：

从这样的东西开始并自定义，这实际上只是一种方法，我建议使用另一个库，如 psutil，而不是只在 linux 中使用的 ifconfig 的混乱解析：

“请务必更改接口，我使用的是 WLAN0，您可能使用的是不同的接口”

以下脚本将每 60 秒在屏幕上打印最后一分钟的平均 TX 和 RX 速率。

```
import os
import subprocess
import time
from daemon import runner
import datetime
import re 

class App():
    def __init__(self):
        self.stdin_path = '/dev/null'
        self.stdout_path = '/dev/tty'
        self.stderr_path = '/dev/tty'
        self.pidfile_path =  '/tmp/bandwidth_counter.pid'
        self.pidfile_timeout = 5
    def run(self):
        rx_megabits_new = 0
        tx_megabits_new = 0
        try:
                while True:
                        output = subprocess.Popen(['ifconfig', "wlan0"], stdout=subprocess.PIPE).communicate()[0]
                        rx_bytes = re.findall('RX bytes:([0-9]*) ', output)[0]
                        tx_bytes = re.findall('TX bytes:([0-9]*) ', output)[0]
                        rx_megabits = (((int(rx_bytes) * 8) / 1024) / 1024)
                        tx_megabits = (((int(tx_bytes) * 8) / 1024) / 1024)
                        current_rx_usage = rx_megabits - rx_megabits_new
                        current_tx_usage = tx_megabits - tx_megabits_new
                        rx_megabits_new = rx_megabits
                        tx_megabits_new = tx_megabits 
                        print 'average megabits received', current_rx_usage / 60
                        print 'average kilobits received', (current_rx_usage * 1024) / 60
                        print 'average megabits sent', current_tx_usage / 60
                        print 'average kilobits sent', (current_tx_usage * 1024) / 60
                        time.sleep(60)

        except Exception, e:
            raise

app = App()
daemon_runner = runner.DaemonRunner(app)
daemon_runner.do_action() 
```

这同样适用于：“python myscript.py start”并停止并重新启动。您需要添加一些打开并写入的文件，而不是打印到屏幕上。我还建议您使用 gzip.open() 打开文件进行编写以节省一些空间，因为它们会迅速变大。

编辑：

这次是同一个守护进程写入文件 /tmp/netstats_counter.log，它是一个 csv，包含“1 分钟间隔内以 KB/s 为单位的 tx 速率，1 分钟间隔内以 KB/s 为单位的平均 rx 速率，unix 时间戳”

```
import os
import subprocess
import time
from daemon import runner
import datetime
import re 

class App():
    def __init__(self):
        self.stdin_path = '/dev/null'
        self.stdout_path = '/dev/tty'
        self.stderr_path = '/dev/tty'
        self.pidfile_path =  '/tmp/twitter_counter.pid'
        self.pidfile_timeout = 5
    def run(self):
        rx_megabits_new = 0
        tx_megabits_new = 0
        try:
                while True:
                        output_csv = open("/tmp/netstats_counter.log", 'a')
                        output = subprocess.Popen(['ifconfig', "wlan0"], stdout=subprocess.PIPE).communicate()[0]

                        rx_bytes = re.findall('RX bytes:([0-9]*) ', output)[0]
                        tx_bytes = re.findall('TX bytes:([0-9]*) ', output)[0]
                        rx_megabits = (((int(rx_bytes) * 8) / 1024) / 1024)
                        tx_megabits = (((int(tx_bytes) * 8) / 1024) / 1024)

                        current_rx_usage = (rx_megabits - rx_megabits_new) / 60
                        current_tx_usage = (tx_megabits - tx_megabits_new) / 60
                        current_rx_usage_kb = current_rx_usage * 1024
                        current_tx_usage_kb = current_tx_usage * 1024

                        rx_megabits_new = rx_megabits
                        tx_megabits_new = tx_megabits 

                        now = str(datetime.datetime.now())

                        col1 = str(current_tx_usage_kb) 
                        col2 = str(current_rx_usage_kb)
                        output_csv.write(col1)
                        output_csv.write(", ")
                        output_csv.write(col2)
                        output_csv.write(", ")
                        output_csv.write(now)
                        output_csv.write("\n")

                        output_csv.close( )

#                       print 'average megabits received', current_rx_usage / 60
#                       print 'average kilobits received', (current_rx_usage * 1024) / 60
#                       print 'average megabits sent', current_tx_usage / 60
#                       print 'average kilobits sent', (current_tx_usage * 1024) / 60

                        time.sleep(60)

        except Exception, e:
            raise

app = App()
daemon_runner = runner.DaemonRunner(app)
daemon_runner.do_action() 
```

# ruby-on-rails - Rails 视图中的 Unicode 符号

> ID：10583506
> 
> 赞同：2
> 
> 时间：2012-05-14T12:38:54.630
> 
> 标签：ruby-on-rails, model-view-controller, unicode, utf-8

我试图在我的 Rails 视图中包含一个度数符号。如果我将度数符号（°）直接放入 .html.erb 文件中，浏览器会以正常方式显示它。

但是这个符号应该通过字符串转移到视图中。问题就从这里开始了。

如果我把这个：

```
<%= 176.chr %> 
```

进入视野，或将

```
.... + 176.chr 
```

进入红宝石源，我得到

```
incompatible character encodings: UTF-8 and ASCII-8BIT 
```

如何让 Rails 默认将所有视图识别为 UTF-8？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:00:27.180

您可以在 HTML 中对此符号使用特殊替换：`&deg;`。

[http://www.w3schools.com/charsets/ref_html_entities_4.asp](http://www.w3schools.com/charsets/ref_html_entities_4.asp)

你必须把它放在 HTML 中，在 <%= %> 之外。或使用原始助手。或者将其标记为 html_safe。顺便说一句，您是否尝试在您的 chr 中提供编码？就像`176.chr(__ENCODING__)`（`__ENCODING__`这里不是占位符，它是 Ruby 的东西）或 176.chr(Encoding::UTF_8)。所有这些方法都应该有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:53:44.360

这应该已经在您的`application.rb`inside中指定了`/config/`。

相关部分应如下所示：

```
module App
  class Application < Rails::Application
    # Configure the default encoding used in templates for Ruby 1.9\.                                                                                                                                     
    config.encoding = "utf-8"    
  end
end 
```

我认为这里的问题是您正在生成一个应该插入 UTF-8 正文的 ASCII-8BIT 字符。

如果你想在你的 Ruby 代码中使用 UTF-8 字符串，你必须把这个神奇的字符串放到你的 ruby​​ 文件的第一行：

```
# encoding: UTF-8 
```

可以在[此处找到有关 Ruby 1.9 中编码的详细信息](http://yehudakatz.com/2010/05/05/ruby-1-9-encodings-a-primer-and-the-solution-for-rails/)

# jquery - How to verify onclick jQuery div handler

> ID：10583507
> 
> 赞同：0
> 
> 时间：2012-05-14T12:38:58.593
> 
> 标签：jquery, onclick

I'm trying to add a javascript onclick event to an expandable jQuery list tag.

[http://screencast.com/t/bbu2fQnqP0rs](http://screencast.com/t/bbu2fQnqP0rs)

My jQuery looks like:

```
jQuery('ul.childpages li.expandable div.expandable-hitarea').click(function() {
    piwiTracker.trackPageView('TreeClick');
    alert("Handler for .click() called.");
}); 
```

How can I verify whether a click on the hitarea div (heavily nested) will trigger the function?

**Edit** : I added the alert handler above but I'm not getting an alert when I select the div.

By the way, the Piwik documentation to track JS events:

```
<a href="#" onclick="javascript:piwikTracker.trackPageView('Menu/Freedom');">Freedom page</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:56:26.473

以下将解决问题：

```
$('ul.childpages li.expandable div.expandable-hitarea').click(function() {
    console.log("Clicked it!");
    piwiTracker.trackPageView('TreeClick');
}); 
```

然后，您可以右键单击浏览器（如果您有 Firefox、Google Chrome 或 Safari）并选择“检查元素”。然后选择“控制台”或“日志”选项。

* * *

*重要提示：*当您没有看到任何日志记录时，您应该检查您的元素路径（“ul.childpages ...”字符串）。***您还可以检查此日志中可能会破坏您的代码的任何错误。***

* * *

最后，您可以通过为您的元素提供一个唯一 ID 并仅使用该 ID 调用它来调试它，例如：

```
$('#uniqueId').click(function() {
   console.log("Clicked it!");
   piwiTracker.trackPageView('TreeClick');
}); 
```

# c - replace bytes in file c

> ID：10583510
> 
> 赞同：1
> 
> 时间：2012-05-14T12:39:09.717
> 
> 标签：c, file-io

I got some code and I want improve it to find and replace bytes in file so I want to find all origbytes in FILE and then replace it with newbytes then save file, I know how to open, write and save, but hot I can find bytes in char?

```
 FILE* file;
 file = fopen("/Users/Awesome/Desktop/test", "r+b");
 int size = sizeof(file)+1;
 char bytes [size];
 fgets(bytes, size, file);
 for (int i=0; i<size; i++){ 
     char origbytes  []  = {0x00, 0x00};
     char newbytes   []  = {0x11, 0x11};
     if (strcmp(bytes[i], origbytes)) //Here the problem
     {
         fseek(file, i, SEEK_SET);
         fwrite(newbytes, sizeof(newbytes), 1, file);
     }
 }
 fclose(file); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T12:41:09.040

[`strcmp()`](http://pubs.opengroup.org/onlinepubs/007904875/functions/strcmp.html)用于字符串比较而不是字符比较。两个字符可以直接比较

```
if ( bytes[i] == origbytes[something] ) 
```

此外，您不应该应用`sizeof()`文件指针来确定文件大小。您应该使用搜索到文件末尾，`fseek`然后查询`ftell` [二进制文件](https://www.securecoding.cert.org/confluence/display/seccode/FIO19-C.+Do+not+use+fseek%28%29+and+ftell%28%29+to+compute+the+size+of+a+file)。对于二进制文件，使用类似[`fstat`](http://pubs.opengroup.org/onlinepubs/009695399/functions/fstat.html)

还有一点需要注意的是，`fgets`如果它看到换行符，它会在 EOF 之前返回很多。因此，在您的代码中，即使进行了我们建议的更改，您也可能无法读取整个文件内容。你需要`fread` [适当地使用](https://stackoverflow.com/questions/174531/easiest-way-to-get-files-contents-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:41:48.947

字符串在 C 标准库中以 null 结尾。您的搜索数据实际上是零长度字符串。你想要`memcmp`。

```
memcmp (&bytes [i], origBytes, 2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T12:42:20.723

首先 sizeof(file) + 1 只是返回指针的大小 + 1。我认为文件大小不需要这个。使用这个：[你如何确定 C 中文件的大小？](https://stackoverflow.com/questions/8236/how-do-you-determine-the-size-of-a-file-in-c) 然后，由于您比较字节（或多或少 smae 为 char），您只需使用 = 进行比较

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T14:59:47.323

您可以使用 fseek 然后 ftell 函数来获取文件大小，而不是 sizeof。

# c - Atoi(char *p) function

> ID：10583513
> 
> 赞同：3
> 
> 时间：2012-05-14T12:39:29.283
> 
> 标签：c, xcode, macos

I need to convert my string into int array. so i make a loop over string, and call `int atoi(char *p)` function from `stdlib.h`, but it doesn`t working on mac (some times ago i tryed it on Windows, and it workong well). simple loop:

```
 for(p = buff; *p; p++)
    printf("%d", atoi(p)); 
```

whats the problem with work of this function, u think?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T12:43:29.887

该功能运行良好。例如，如果`buff`包含`"123"`，您的代码将打印`123233`。

但是，您似乎只想打印单个数字的值，在这种情况下`atoi`与您的问题无关。尝试：

```
for(p = buff; *p; p++)
    printf("%d", *p-'0'); 
```

# c++ - A library for Extraction of an archive file

> ID：10583516
> 
> 赞同：1
> 
> 时间：2012-05-14T12:39:38.967
> 
> 标签：c++, c, linux, freebsd

I need a library to list files in archives and to extract archive files. The library should support archive types as much as possible. Do you have any suggestion ?

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:15:01.497

这听起来像您正在寻找 libarchive [http://libarchive.github.com/](http://libarchive.github.com/)

# http - 为什么 IE 会导致来自 LAMP 服务器的 HTTP 500 响应？

> ID：10583524
> 
> 赞同：1
> 
> 时间：2012-05-14T12:39:53.993
> 
> 标签：http, internet-explorer, response

我有一个使用 (jQuery) AJAX 将产品添加到购物车、显示购物车和更新购物车数量的购物车系统。

在 IE (8/9) 中，来自服务器的响应率约为 50%。50% HTTP 200 OK 没有问题，50% HTTP 500 内部服务器错误。500 响应通常在大约 15 秒的某种超时之后出现，但并非总是如此。到目前为止，所有其他浏览器的成功率都是 100%。

访问日志示例如下（IE8 和 IE9）：

```
<ip> - <user> [13/May/2012:01:38:03 +1000] "POST /cart/process/cart.php HTTP/1.1" 500 - "<domain>/cart/process/cart.php?summaryOnly" "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0)"

<ip> - <user> [13/May/2012:00:35:11 +1000] "POST /cart/process/cart.php HTTP/1.1" 500 - "<domain>/cart/process/cart.php?summaryOnly" "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)" 
```

到目前为止，我的假设是 cookie 使用（设置/删除）对于 IE 来说太大（或超过顶部）并触发某种安全标志。到目前为止，这绝对是我最好的猜测。

当前设置位于 .htaccess 密码提示后面的子域上。购物车摘要加载到一个花式框 (JS) iFrame 中。在 iFrame 之外进行测试没有任何区别。

我不认为问题出在前端开发方面，但我完全迷失了。服务器团队说一定是浏览器问题。

我讨厌 IE。有人有什么想法吗？

* * *

编辑：我相信我至少能够减少可能暗示最大 cookie 长度问题的问题。我相信 IE 中的 Cookie 应该小于 2Kb 或 4Kb/4096。我也可能有这个问题：[http ://adamyoung.net/IE-Blocking-iFrame-Cookies](http://adamyoung.net/IE-Blocking-iFrame-Cookies)

一个类似的问题，提示长 cookie 出现 500 个错误：http: [//datatables.net/forums/discussion/576/cookie-limit-long-cookie-fails/p1](http://datatables.net/forums/discussion/576/cookie-limit-long-cookie-fails/p1)

* * *

# sharepoint-2007 - 此网站不支持 SharePoint Designer 创建的工作流

> ID：10583527
> 
> 赞同：0
> 
> 时间：2012-05-14T12:40:10.197
> 
> 标签：sharepoint-2007, sharepoint-designer

使用 SharePoint 2007 和 Designer 2007，我正在尝试编辑现有工作流。我知道它们存在于我的列表中，但在使用 SharePoint Designer 浏览时看不到它们。当我尝试创建新的时，我收到错误“此网站不支持 SharePoint Designer 创建的工作流”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:47:41.413

此网站不支持 SharePoint Designer 创建的工作流原因

```
Office SharePoint Designer 2007 is unable to detect that the server for your site is running either Microsoft Office SharePoint Server 2007 or Windows SharePoint Services 3.0.
You do not have the permissions necessary to create workflows. 
```

解析度

```
Exit and then start Office SharePoint Designer 2007\. If you are still unable to create workflows, it is possible either that the server is unavailable, or that the server is not running Office SharePoint Server 2007 or Windows SharePoint Services 3.0\. Contact your server administrator for assistance.
The site owner should verify that the affected user has been added to the list of users who have permissions to the Workflows library. If not, add the user to the list:
    In Office SharePoint Designer 2007, in the Folder List, right-click the Workflows library, and then click Properties.
    Click the Security tab.
    Click Manage permissions using the browser.
    In the browser, on the Permissions: Workflows page, click New, and then click Add Users.
    Add the user to the list. 
```

来源： http: [//office.microsoft.com/en-us/sharepoint-designer-help/troubleshoot-workflow-errors-HA010237912.aspx#BM18](http://office.microsoft.com/en-us/sharepoint-designer-help/troubleshoot-workflow-errors-HA010237912.aspx#BM18)

# c# - 将 LoaderOptimization 应用于进程内 COM 服务器

> ID：10583530
> 
> 赞同：0
> 
> 时间：2012-05-14T12:40:17.067
> 
> 标签：c#, performance, c#-4.0, com, apartment-state

我需要在我的 .NET 进程内 COM 服务器中创建多个 AppDomain（它是 Windows 资源管理器命名空间扩展）。

在我的测试控制台应用程序中，我能够在 40 秒内创建 10 个域 + WPF 窗口，这是不可接受的。添加`LoaderOptimization.MultiDomainHost`速度最多 2-5 秒，这没关系。

但是，COM 服务器中没有`Main`方法，并且指定 LoaderOptimization`AppDomainSetup`仅影响加载 2 个或更多附加域（即第一个附加 AppDomain 启动 3-4 秒，其他在 0.1-0.3 秒内）

那么，**我可以指定`LoaderOptimization`进程内 COM 服务器吗？如果可以，如何指定？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:42:15.740

只要您用 C# 编写代码，就无法设置此选项。您需要自己托管 CLR，以便配置 appdomain，这需要 C++ 代码。核心 MSDN 库文章集[从这里开始](http://msdn.microsoft.com/en-us/library/dd380850.aspx)。

试图弄清楚为什么要花这么长时间应该会产生一些结果。这听起来当然不像是一个冷启动问题，与第一次在磁盘上查找程序集的成本有关。该性能命中仅与第一个应用程序域相关，以后的应用程序域应该很快，因为它们会在文件系统缓存中找到程序集。

这留下了一个热启动问题，与将 IL 即时编译为机器代码有关。对此的快速修复是在您的程序集上运行 ngen.exe。

# networking - 从计算机/服务器获取有线 MAC 地址

> ID：10583535
> 
> 赞同：-1
> 
> 时间：2012-05-14T12:40:35.283
> 
> 标签：networking, powershell, mac-address

我正在考虑使用有线 MAC-adr 作为程序中的唯一值。所以我需要确保 MAC-adr 是有线的，而不是无线的。

```
$mac = gwmi -computer $compname win32_NetworkAdapterConfiguration | select MACAddress 
```

这是我开始的，但它给了我两个地址。第一个是我想要的：00:00:11:11:22:22 最后一个是无线地址：00:1F:3C:8E:61:D8

我不能只是这样排序：选择-first 1。因为我不知道这会给我在其他计算机上带来什么..顺便说一句，这对ipV6和ipV4都有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:48:07.043

试试这个方法：

```
$mac = gwmi -computer $compname win32_NetworkAdapter | ? { $_.AdapterType -match "802.3" } |  select MACAddress 
```

如果有多个，则需要进行选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:50:48.040

尝试更具体，例如：

```
(gwmi win32_NetworkAdapter -computer $compname -filter "NetConnectionID='Local Area Connection'").MACAddress 
```

# java - 区别 SAXParserFactory XMLReaderFactory。选择哪一个？

> ID：10583536
> 
> 赞同：8
> 
> 时间：2012-05-14T12:40:35.327
> 
> 标签：java, xml, sax, jaxp

它们似乎都有相同的目的（创建一个 XMLReader）。一些教程包含一个，一些包含另一个。

**SAXParserFactory：**

*   [http://docs.oracle.com/javase/7/docs/api/javax/xml/parsers/SAXParserFactory.html](http://docs.oracle.com/javase/7/docs/api/javax/xml/parsers/SAXParserFactory.html)
*   似乎更可配置
*   更多样板代码
*   官方支持的api

示例代码：

```
// SAXParserFactory
SAXParserFactory factory = SAXParserFactory.newInstance();
SAXParser parser = factory.newSAXParser();
XMLReader reader = parser.getXMLReader();
reader.parse(new InputSource("document.xml")); 
```

**XMLReaderFactory：**

*   [http://docs.oracle.com/javase/7/docs/api/org/xml/sax/helpers/XMLReaderFactory.html](http://docs.oracle.com/javase/7/docs/api/org/xml/sax/helpers/XMLReaderFactory.html)
*   少两行代码
*   可配置性较低
*   社区支持，没有保修

示例代码：

```
// XMLReaderFactory
XMLReader xmlReader = XMLReaderFactory.createXMLReader();
xmlReader.parse(new InputSource("document.xml")); 
```

**问题：**

这些是主要区别还是我监督过的一些区别。

你应该选择哪一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T14:28:42.040

主要`JAXP APIs`在`javax.xml.parsers`包中定义。该包包含供应商中立的工厂类，例如`SAXParserFactory`给你一个 S `AXParser`。

它`SAXParserFactory`定义了一个工厂 API，使应用程序能够配置和获取基于 SAX 的解析器来解析 XML 文档。

*   `SAXParser`定义了包装 XMLReader 实现类的 API 。

*   包`org.xml.sax`定义了基本的 SAX API。

*   Java 运行时带有一个默认实现`XMLReader`

向`SAXParserFactory`您隐藏 (SAX1) ParserFactory / (SAX2) XMLReaderFactory, ... 的详细信息。

如果您希望能够用`JAXP`不同的解析器替换默认解析器`JAXP`（默认实现中可能存在已知的不兼容/错误）实现，您应该使用供应商中立`SAXParserFactory`。

如果您知道您的应用程序将始终使用 a`SAX2` `XMLReader`您可以使用`XMLReaderFactory`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T16:25:17.770

Elliotte Rusty Harold 曾写过一本关于用 Java 处理 XML 的书，他曾经写道：

```
SAXParserFactory [is] a hideous, evil monstrosity of a class that should 
be hung, shot, beheaded, drawn and quartered, burned at the stake, 
buried in unconsecrated ground, dug up, cremated, and the ashes tossed 
in the Tiber while the complete cast of Wicked sings "Ding dong, the 
witch is dead."  --Elliotte Rusty Harold on xml-dev 
```

我实际上不会走那么远（如果我这样做了，我会尝试使其符合语法）。像很多 JAXP 一样，它不是最美妙的设计；但我确实使用它作为获取解析器实例的默认方式，只是因为它与 JAXP 的其他部分一致。

从历史上看，两者是并行发展的。JAXP 最初试图向 SAX1 添加缺少的功能，但与此同时，SAX2 出现并填补了一些空白，因此这个特殊的空白被填补了两次。

# javascript - Javascript 中的 x+=y+=z

> ID：10583539
> 
> 赞同：7
> 
> 时间：2012-05-14T12:40:42.293
> 
> 标签：javascript

我知道在 javascript

`x = y = z`手段`x = z`和`y = z`

`x+=z`手段`x=x+z`；

所以如果我想要`x=x+z`and `y=y+z`，我试着`x+=y+=z`不工作

任何人都有更好的主意来编写短代码`x+=z;y+=z`

**编辑**

首先感谢所有参与我的问题的人。在这里，我想解释一下为什么我首先提出这个问题。

我试着写一些类似的代码`x+='some html code'`，我需要`y+='the same html code'`。所以自然我不想先创建另一个`var z='the html code`然后`x+=z`做`y+=z`

希望我的解释有意义。无论如何，我现在要结束这个问题。再次感谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-14T12:47:59.897

*假设 add* **，**而**不是 concatenation**，这有效：

```
x -= y - (y += z); 
```

但说真的，**不要使用它**！

* * *

对于那些想弄清楚*如何*，评估顺序（我`n`用来显示当前中间结果的地方）大约是：

```
n = y1 = y0 + z  //    n = y = (y + z)
n = y0 - y1      // -> n == -z  [uses the original value of y]
x -= n           // -> x += z 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-14T12:43:55.810

只需使用这个：

```
x+=z;y+=z 
```

老实说，其他任何事情都会导致其他维护您的代码的人停下来挠头几分钟。这段代码也不是很长......

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-14T12:52:28.770

那么，x += y += z 的意思是：

1.  x = x + y + z
2.  y = y + z

所以，用 x += y += z 来做 x = x + z 和 y = y + z 是不可能的，因为这意味着：

```
x += (y = y + z) -> x = x + (y = y + z) 
```

举个例子：

```
function sum () {
  var x = 5, y = 7, z = 3;
  x += y += z;
  console.log (x); // it shows 15 --> x = 5 + 7 + 3
  console.log (y); // it shows 10 --> y = 7 + 3
  console.log (z); // it shows 3
} 
```

所以，你必须这样做：

```
x += z;
y += z; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-14T12:51:21.333

实际上`x = y = z`并不意味着`x = z`and `y = z`。这意味着计算表达式的值`y = z`，然后将 x 分配给该表达式的值。这是你错的地方。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-14T13:31:09.287

你也可以这样做.. x = 1, y= 2, z=3

```
x+=(y+=z)-(y-z) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-14T13:38:24.683

您可以使用[逗号](http://javascriptweblog.wordpress.com/2011/04/04/the-javascript-comma-operator/)运算符：

```
x += (y+=z,z); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-14T12:46:05.863

它不起作用，因为在作业中做了什么

```
x += y += z; 
```

是：

```
y += z 
```

首先被评估。除了添加`z`to之外`x`，此赋值还返回 的新值`y`作为其返回值。然后，这个新值`y`成为 other 的操作数`+=`。

```
x += y 
```

好吧，写你想要的东西可能没有比简单的更短的方法了

```
x += z; y += z; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-14T13:50:13.473

FWIW，在 Firefox 中，您可以使用解构赋值来执行您想要的操作。

```
Array.prototype.addToEach = function(x) { 
    for (var i = 0; i < this.length; i++) 
        this[i] += x; 
    return this; 
};

var x = "foo", y = "bar";

[x,y] = [x,y].addToEach("baz");

console.log(x,y); // "foobaz" "barbaz" 
```

[http://jsfiddle.net/uPzNx/（spidermonkey](http://jsfiddle.net/uPzNx/) *实现的演示）*

* * *

并不是说它与解决方案有很大关系，但是对于那些不喜欢原生`.prototype`扩展的人，您可以这样做。

```
function addToEach(s) { 
    var args = Array.prototype.slice.call(arguments, 1); 
    for (var i = 0; i < args.length; i++) 
        args[i] += s;
    return args;
};

var x = "foo", y = "bar";

[x,y] = addToEach("baz", x, y);

console.log(x,y); // "foobaz" "barbaz" 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-05-14T12:44:26.327

这适用于jsfiddle，所以它一定是你正在做的其他事情......

```
x = 1, y = 2, z = 3;
x += y += z;
alert(x); 
```

# entity-framework - 使用实体框架时如何排除相关表

> ID：10583545
> 
> 赞同：0
> 
> 时间：2012-05-14T12:40:52.743
> 
> 标签：entity-framework

```
db.UploadFileSet.Where(f => f.Article.ID == id).ToList(); 
```

ef 会自动加载文章。但我不需要它！我怎样才能阻止它？

我知道我可以这样写：

```
Select new XXX{Id = xxx ,Name = xxx}; 
```

但这很麻烦。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T12:43:47.737

提到的查询不会加载相关文章。当您第一次访问已加载文件集中的属性时，将加载这些文章`Article`（这包括调试器的访问）。如果要确保`Article`永远不会延迟加载，则必须关闭上下文的延迟加载 - 您可以通过在上下文配置中设置属性在代码中执行此操作：

*   对象上下文 API：`db.ContextOptions.LazyLoadingEnabled = false;`
*   数据库上下文 API：`db.Configuration.LazyLoadingEnabled = false;`

# c# - 光标未在 Windows 窗体中更新

> ID：10583552
> 
> 赞同：1
> 
> 时间：2012-05-14T12:41:15.740
> 
> 标签：c#, winforms, cursor

我有一个带有用户控件的 WinForms 应用程序，我在其中根据光标的位置动态更改光标。我将自定义光标创建为用户控件的静态成员，如下所示：

```
private static Cursor _openHandCursor = new Cursor( Properties.Resources.openHand.Handle ); 
```

然后在`OnMouseMove`覆盖中设置适当的光标，如下所示：

```
this.Cursor = <some condition> ? _openHandCursor : Cursors.Default; 
```

当我启动应用程序时，它可以正常工作。但是，经过几次光标更改（大约 20 次）后，它仍然使用默认（箭头）位图并且不再更改。但最奇怪的是，发生这种情况后，我检查了`Handle`当前`Cursor`值的属性，它等于`_openHandCursor`对象的句柄！因此，似乎该属性的值仍在正确设置，但屏幕上的光标位图没有得到更新。关于这种奇怪的行为有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:16:00.930

改变

```
private static Cursor _openHandCursor = new Cursor( Properties.Resources.openHand.Handle ); 
```

到

```
private static Cursor _openHandCursor = Properties.Resources.openHand; 
```

当您创建`Cursor`对象 ( `new Cursor (<Handle>)`) 时，它只是从资源中重用与游标相同的句柄。由于您不存储对原始游标（由`Properties.Resources.openHand.Handle`属性 getter 创建）的引用，它将被垃圾收集。 `Cursor`类定义了终结器，它通过调用销毁句柄`DestroyCursor()`，使其无效。您创建的Now`Cursor`具有相同的句柄，但它不知道该句柄不再有效。当您尝试设置无效光标时，操作系统仅使用默认光标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:14:33.117

尝试更改用户控件的`MouseEnter`和`MouseLeave`事件中的光标。

伪代码：

`MouseEnter Event`

`Change mouse cursor to hand`

`MouseLeave Event`

`Change mouse cursor to normal`

看[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseenter.aspx)

# javascript - Sencha Touch 2 Store - 在创建模型之前修改响应

> ID：10583554
> 
> 赞同：0
> 
> 时间：2012-05-14T12:41:23.057
> 
> 标签：javascript, extjs, sencha-touch

在 Backbone.js 中，您可以在“集合”中添加“解析”方法，以在创建模型之前修改响应对象。Sencha Touch Store 可以做到这一点吗？我已经浏览了文档，但似乎无法弄清楚这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:28:05.273

您可能可以覆盖读取的 Ext.data.data.Reader

[http://docs.sencha.com/touch/2-0/source/Reader.html#Ext-data-reader-Reader](http://docs.sencha.com/touch/2-0/source/Reader.html#Ext-data-reader-Reader)

这是它处理原始数据并使用它的地方（最后返回一个模型）

# ocaml - Ocaml 变量作用域如何工作？

> ID：10583556
> 
> 赞同：5
> 
> 时间：2012-05-14T12:41:24.880
> 
> 标签：ocaml

我开始学习 Ocaml，使用[hickey book](http://courses.cms.caltech.edu/cs134/cs134b/book.pdf)，我被困在练习 3.4，第 9 部分

```
让 xx = x + 1 在 x 2

```

操作的结果是`3`，但我不明白为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T12:45:09.017

当您编写时，`let x x = ...`您正在定义一个名为的函数，该函数`x`将名称绑定`x`到其参数。

由于您使用`let`了而不是`let rec`，该函数不知道自己的名称，因此据它所知，唯一`x`值得了解的是作为参数传入的函数。

因此，当您使用 调用函数时`x 2`，它会将值绑定`2`到名称`x`并计算`x+1`，得到`3`结果。

# gwt - chrome的gwt插件

> ID：10583558
> 
> 赞同：2
> 
> 时间：2012-05-14T12:41:29.640
> 
> 标签：gwt, google-chrome

我正在开发 GWT 应用程序。在开发模式下，我可以在 FF 和 IE 中成功打开应用程序。但是，当我尝试在 chrome 中打开它时，我得到了缺少的插件窗口。单击它后，它会下载我用来安装的 .crx（我得到了成功安装的对话框）但是，当我刷新浏览器时，我得到了相同的结果。有人遇到过类似情况吗？任何解决方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:38:13.953

任何对 gwt-chrome 插件有问题（提示安装插件）的人，下载[http://www.microsoft.com/en-us/download/details.aspx?id=5582](http://www.microsoft.com/en-us/download/details.aspx?id=5582) 并运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:44:22.397

您在多功能框中看到 GWT 工具箱了吗？（地址栏）

在这里查看更多故障排除提示：[http ://code.google.com/p/google-web-toolkit/wiki/TroubleshootingOOPHM](http://code.google.com/p/google-web-toolkit/wiki/TroubleshootingOOPHM)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T14:26:05.347

你有禁用插件吗？铬：//铬/设置/内容

您在插件页面上看到了什么？chrome://plugins/ 您应该在寻找“GWT DevMode 插件 - 版本：1.0”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T01:11:04.427

如果您将有关插件的 Chrome 隐私设置设置为“自动运行”以外的任何设置，也会发生这种情况。您可以在设置 -> 隐私 -> 内容设置... -> 插件中访问这些设置。我将我的设置为“点击播放”并且得到了完全相同的行为。

# java - 如何将 Jersey 与 TomEE / openEJB 集成

> ID：10583563
> 
> 赞同：10
> 
> 时间：2012-05-14T12:41:43.163
> 
> 标签：java, jakarta-ee, jersey, openejb, apache-tomee

我正在升级使用 Jersey JAX-RS 在 Apache TomEE 服务器上运行的代码。不幸的是，当我尝试将 Jersey 与 TomEE 一起使用时，它会引发错误。

我正在使用 eclipse 并打开了 JAX-RS 项目方面。它指向泽西图书馆。我也将 Jersey 库移到 /lib/ 目录中，试图解决问题，但无济于事。服务器抛出以下错误：

```
May 14, 2012 6:26:44 AM com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Provider classes found:
class org.codehaus.jackson.jaxrs.JsonParseExceptionMapper
class org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider
class org.codehaus.jackson.jaxrs.JsonMappingExceptionMapper
class org.codehaus.jackson.jaxrs.JacksonJsonProvider
May 14, 2012 6:26:44 AM org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
java.lang.RuntimeException: javax.naming.NameNotFoundException: Name [com] is not bound in this Context. Unable to find [com].
at com.sun.jersey.server.impl.cdi.CDIExtension.getInitializedExtension(CDIExtension.java:177)
at com.sun.jersey.server.impl.cdi.CDIComponentProviderFactory.<init>(CDIComponentProviderFactory.java:92)
at com.sun.jersey.server.impl.cdi.CDIComponentProviderFactoryInitializer.initialize(CDIComponentProviderFactoryInitializer.java:75)
at com.sun.jersey.spi.container.servlet.WebComponent.configure(WebComponent.java:576)
at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.configure(ServletContainer.java:311)
at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:608)
at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
at javax.servlet.GenericServlet.init(GenericServlet.java:160)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: javax.naming.NameNotFoundException: Name [com] is not bound in this Context. Unable to find [com].
at org.apache.naming.NamingContext.lookup(NamingContext.java:820)
at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)
at javax.naming.InitialContext.lookup(Unknown Source)
at com.sun.jersey.server.impl.cdi.CDIExtension$2.stepInto(CDIExtension.java:290)
at com.sun.jersey.server.impl.cdi.CDIExtension.diveIntoJNDIContext(CDIExtension.java:267)
at com.sun.jersey.server.impl.cdi.CDIExtension.lookupJerseyConfigJNDIContext(CDIExtension.java:287)
at com.sun.jersey.server.impl.cdi.CDIExtension.getInitializedExtension(CDIExtension.java:175)
... 22 more 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>tomeeTest3</display-name>

  <servlet>
    <description>JAX-RS Tools Generated - Do not modify</description>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <url-pattern>/jaxrs/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

有谁知道我如何使这项工作？我还考虑使用 tomEE+ Jax-rs 服务器，但它似乎无法识别 Jackson 注释。

编辑：我认为问题在于 openEJB CDI 与 Jersey 附带的 CDI 冲突。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T16:30:27.940

复活！以防万一有人仍然遇到这个问题。

我有一个在 Tomcat 中运行的 Jersey 应用程序，当我将它移动到 TomEE 时，它就以这种方式爆炸。问题是 TomEE 已经有自己的 JAX-RS 实现（在撰写本文时是 tomee-jaxrs-1.5.0），它与 jersey-bundle jar 冲突。

为了摆脱这个问题，我所要做的就是删除球衣罐子并注释掉 web.xml 中的 servlet 声明和映射

重新启动它，中提琴！请记住，URL 会略有不同。例如，在您可能拥有的默认球衣安装中`http://localhost/rest/represent/me`，当您将同一个应用程序移至 TomEE 时，它将是`http://localhost/represent/me`

如果您使用的是像 eclipse 这样的 IDE，它可能会因为找不到 jars 而对您咆哮，只需进入项目属性并将目标运行时设置为 TomEE（您必须添加一个服务器实例），您应该是很好走。

分享和享受。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-22T20:19:39.457

我也遇到了这个确切例外的问题，不幸的是，grauwulf 的回答对我不起作用。

就我而言，我有 Tomee+ 1.5.2、Jersey 1.1x，并且我也在使用 Spring 3.x。

修复实际上非常简单：

1.  找到 Tomee`system.properties`文件（`{tomee}/conf/system.properties`默认情况下）。
2.  添加`com.sun.jersey.server.impl.cdi.lookupExtensionInBeanManager=true`

从那里开始，它对我有用。为了给予应有的荣誉，我在这篇[博](http://www.fdmtech.org/2012/07/tomee-1-0-jersey-jax-rs-cdi/)文中找到了它。

有趣的是，我还希望避免将我`{tomee}/lib`的文件夹与我的战争依赖项弄乱，所以我还发现您可以通过修改轻松添加额外的库`{tomee}/conf/tomee.xml`，并添加以下节点（在根节点内`<tomee />`）：

```
<tomee>
  <Service
    id="extra-libs-enricher"
    class-name="org.apache.openejb.assembler.classic.enricher.AdditionalLibClassLoaderEnricherObserver">
      path = /path/to/your/libs
  </Service>
</tomee> 
```

有了它`Service`，它的名字是任意的，你*不能*传递 a `path`，此时它默认为`"additional-lib"`. 默认使用传入的路径，但如果不是目录，则会回退到系统属性，可以将其添加到`system.properties`文件中。系统属性为：`openejb.enricher.additional-lib`。

```
openejb.enricher.additional-lib=/fallback/path/to/your/libs 
```

`Service`仅当传递给 的路径或其默认值不起作用*并且*仅当将 a`Service`放置在`tomee.xml`文件中时，才检查此系统属性。它`id`是无关紧要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-04T20:44:17.217

刚刚遇到这个问题：TomEE + Jersey ......问题是我在 Eclipse 中使用 TomEE“使用工作区元数据”......并且不知何故，当这样配置时，服务器配置错过了 TomEE 配置的几个细节（即conf/system.properties - 我们声明：“com.sun.jersey.server.impl.cdi.lookupExtensionInBeanManager=true”）。当我将其更改为“使用 Tomcat 安装”时，问题就消失了。您可以通过在 Eclipse 中双击 TomEE 服务器并选择“使用 Tomcat 安装”来进行配置，如下图所示：

![在此处输入图像描述](../Images/5f0032a2979e3a541fcda956897fe14f.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T14:32:28.753

您应该将 Provider 类的包作为参数添加到 servlet：

```
<servlet>
 <servlet-name>ServletAdaptor</servlet-name>
 <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
  <init-param>
   <param-name>com.sun.jersey.config.property.packages</param-name>
   <param-value>your.package.name</param-value>
  </init-param>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
 <servlet-name>ServletAdaptor</servlet-name>
 <url-pattern>/jaxrs/*</url-pattern>
</servlet-mapping> 
```

您的提供程序类应如下所示：

```
package your.package.name;

@Path("/test")
public class StatsServlet {
    @PUT
    @Produces(MediaType.TEXT_HTML)
    public String doPutHtml() {
        return "Hello!";
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-06T23:31:37.827

我追查了它，pickypg是正确的。我能够使用 tomee-maven-plugin 使其与 TomEE 1.5.2 一起使用。我还没有完全弄清楚，但是在球衣发现 java:comp/BeanManager 有一个 bean 管理器并尝试查找上下文之后，就会出现这个问题。

```
<plugin>
    <groupId>org.apache.openejb.maven</groupId>
    <artifactId>tomee-maven-plugin</artifactId>
    <version>1.0.1</version>
    <configuration>
        <tomeeHttpPort>${http.port}</tomeeHttpPort>
        <tomeeVersion>1.5.2</tomeeVersion>
        <args>-Dcom.sun.jersey.server.impl.cdi.lookupExtensionInBeanManager=true</args>
    </configuration>
</plugin> 
```

这是遇到问题的球衣的摘录。

```
 public CDIComponentProviderFactory(Object bm, ResourceConfig rc, WebApplication wa) {
        beanManager = (BeanManager)bm;
        // work around proxying bug in Weld
        if (CDIExtension.lookupExtensionInBeanManager) {
            extension = Utils.getInstance(beanManager, CDIExtension.class);
        }
        else {
            // NOTE THIS IS WHAT IS BEING EXECUTED WHEN FLAG IS SET TO FALSE
            extension = CDIExtension.getInitializedExtension();
        }
        extension.setWebApplication(wa);
        extension.setResourceConfig(rc);
    }

/*
 * Returns the instance of CDIExtension that was initialized previously in this same thread, if any.
 */
public static CDIExtension getInitializedExtension() {
    try {
        InitialContext ic = InitialContextHelper.getInitialContext();
        if (ic == null) {
            throw new RuntimeException();
        }
        return (CDIExtension)lookupJerseyConfigJNDIContext(ic).lookup(JNDI_CDIEXTENSION_NAME);
    } catch (NamingException ex) {
        throw new RuntimeException(ex);
    }
} 
```

...

```
/*
 * Setting this system property to "true" will force use of the BeanManager to look up the bean for the active CDIExtension,
 * rather than going through a thread local.
 */
private static final String LOOKUP_EXTENSION_IN_BEAN_MANAGER_SYSTEM_PROPERTY = "com.sun.jersey.server.impl.cdi.lookupExtensionInBeanManager";

public static final boolean lookupExtensionInBeanManager = getLookupExtensionInBeanManager();

private static boolean getLookupExtensionInBeanManager() {
    return Boolean.parseBoolean(System.getProperty(LOOKUP_EXTENSION_IN_BEAN_MANAGER_SYSTEM_PROPERTY, "false"));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-20T20:24:46.317

我能够做到这一点，如果有人正在寻找我所做的解决方案

这就是我所做的： * 我使用的是 NetBeans 7.3.1 * 我在 Tomee\conf\system.properties 中添加了以下几行 –>com.sun.jersey.server.impl.cdi.lookupExtensionInBeanManager= true * 我添加了球衣库来自 NetBeans 仅此而已 * 请注意，这些库位于我的应用程序的 WEB-INF\lib 中 * 附加信息如果有人感兴趣，我什至可以将 Mojarra 用于 JSF，我可以告诉你如何

# xml - 没有文本子元素的元素

> ID：10583567
> 
> 赞同：2
> 
> 时间：2012-05-14T12:41:55.267
> 
> 标签：xml, xpath

我如何编写一个 XPath 表达式来选择那些没有文本子元素的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:56:28.460

您可以使用 ：

```
//xmlelement[not(node())] 
```

或者

```
//xmlelement[not(text())] 
```

# ruby - 使用正则表达式从字符串中删除括号和数字

> ID：10583571
> 
> 赞同：0
> 
> 时间：2012-05-14T12:42:14.237
> 
> 标签：ruby, regex, rubular

我有看起来像这样的字符串：

执行制片人 (3)

制片人 (0)

第一助理相机 (12)

我想使用正则表达式来匹配字符串的第一部分并删除“（num）”部分（括号前面的空格和括号中的括号/数字）。使用正则表达式后，我想让我的变量等于：“Executive Producer”、“Producer”、“1st Assistant Camera”

如果您知道任何学习正则表达式的资源，那也很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:44:51.503

也许`s/([\s\w]+\w)\s*\(\d+\)/\1/`？我不知道 Ruby，所以你必须将它翻译成它自己的正则表达式语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:46:00.380

您只需选择除最后一个括号及其数字​​内容之外的所有字符：

```
(.+) \(\d+\) 
```

前两个括号捕获内容（这里是所有内容，由点声明）。然后，您需要两个括号（注意斜杠），这意味着我们不希望这些括号捕获“\d+”表达式，它是一个数字。

我最喜欢的正则表达式网站之一：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

# c - 当被询问时，C 在运行时将数组初始化并重新初始化为零

> ID：10583581
> 
> 赞同：0
> 
> 时间：2012-05-14T12:42:38.140
> 
> 标签：c, arrays, loops, initialization, runtime

```
#include <stdio.h>

int main(void) {
    for (int i = 0; i < 5; i++) {
        int arr[5] = {0};
        // arr gets zeroed at runtime, and on every loop iteration!
        printf("%d %d %d %d %d\n", arr[0], arr[1], arr[2], arr[3], arr[4]);
        // overwrite arr with non-zero crap!
        arr[0] = 3;
        arr[1] = 5;
        arr[2] = 2;
        arr[3] = 4;
        arr[4] = 1;
    }
    return 0;
} 
```

显然这有效：

```
> gcc -Wall -Wextra -pedantic -std=c99 -o test test.c;./test
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0 
```

但：

*   引擎盖下发生了什么？
*   这是否保证适用于任何大小的数组？
*   我是否找到了在循环的每次迭代中将数组归零的最优雅方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T12:46:15.273

您在每次迭代时创建一个***新***数组，因此无需重新初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T12:46:42.567

根据我的说法，每当您迭代循环时，您在循环内声明的任何变量都是该循环的本地变量。因此，在循环结束时它们会被破坏，当循环再次开始时，它们会再次被创建。所以，1.上面回答了；2.是的，这应该适用于任何大小的数组；3.不...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T12:48:07.623

该变量`arr`是在循环的每次迭代中创建和初始化的，因为那是您编写的。在您的示例中，代码执行类似于`memset()`将数组设置为零的操作，但可能更有效且内联。您也可以编写一个非零初始化程序。

是的，它适用于“任何”大小的数组。如果数组更大，循环会更慢。

这是实现效果的一种非常优雅的方式。编译器将尽可能快地完成它。如果您可以编写更快的函数调用，那么编译器编写者就犯了错误。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-14T12:51:20.460

之前已经回答过：

*   [array[100] = {0} 如何将整个数组设置为 0？](https://stackoverflow.com/questions/629017/how-does-array100-0-set-the-entire-array-to-0)

> 引擎盖下发生了什么？

编译器将生成与 memset 等效的代码（有关完整详细信息，请参阅[来自数组 0 初始化的奇怪程序集](https://stackoverflow.com/questions/531477/strange-assembly-from-array-0-initialization/531490)）。

> 这是否保证适用于任何大小的数组？

不超过可用堆栈大小的限制，是的。

> 我是否找到了在循环的每次迭代中将数组归零的最优雅方法？

我想是这样。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T12:46:37.510

是的，C 标准保证您的数组元素在每次循环迭代时都归零。如果您只希望它们在第一次迭代时归零，请将数组设为静态，即使用

```
static int arr[5] = {0}; 
```

在这种情况下，您可以省略`= { 0 }`，因为需要初始化静态数据，就好像在没有初始化程序的情况下所有元素都被分配了 0（或 NULL 用于指针，或 0.0 用于浮点值，递归地用于结构）。

另请注意，如果您使用*的*初始值设定项少于数组维度指定的数量，则剩余元素将分配为零。所以

```
int arr[5] = {42, 0xdead}; 
```

相当于

```
int arr[5] = {42, 0xdead, 0, 0, 0}; 
```

并且使用单个 0 只是此规则的一个特例。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-14T12:52:57.697

不要忽略代码的逻辑错误（在每次迭代时重新初始化）我会建议在你想分配数组的所有元素时使用 memcpy 或 memset。这是经过验证的方法，幸运的是它在几乎所有的编译器实现。

[Memset 示例](http://www.cplusplus.com/reference/clibrary/cstring/memset/)

[MemCpy 示例](http://www.cplusplus.com/reference/clibrary/cstring/memcpy/)

因此，使用 Memset 您的代码将变为；；

```
int a[5]; 
memset(a,0,<number of bytes to be set to> sizeof(int)*5); 
```

请阅读文档以了解为什么它很快，您会喜欢...

**编辑** 对不起，感谢所有反对的选民/评论者......我更正了答案......

# quartz-scheduler - Quartz Scheduler 多次发送电子邮件通知

> ID：10583583
> 
> 赞同：2
> 
> 时间：2012-05-14T12:42:39.997
> 
> 标签：quartz-scheduler

我正在使用 Quartz 来安排工作。工作是每天在某个特定时间（例如上午 11:00）发送提醒电子邮件。我能够成功发送提醒邮件，但问题是它同时发送超过 1 封邮件。有时它为 1 个提醒请求发送 8 封邮件，有时它发送 5 封邮件。似乎同一个作业被多次执行。

以下是我的代码，

```
JobDetail job = JobBuilder.newJob(LmsJob.class)
                .withIdentity("lmsJob", org.quartz.Scheduler.DEFAULT_GROUP)
                .build();

        JobDataMap map = job.getJobDataMap();
        map.put("creditMonthlyLeaveBalance", creditMonthlyLeaveBalance);
        map.put("dailyUpdationTask", dailyUpdation);
        map.put("monthlyPayrollGenerationTask",
                monthlyPayrollGenerationTask);
        map.put("yearlyMaintenanceOfLeaveBalance",
                yearlyMaintenanceOfLeaveBalance);
        map.put("emailNotifier", emailNotifier);
        try {
            CronTrigger trigger = TriggerBuilder
                    .newTrigger()
                    .withIdentity("lmsJob", "lmsJobGroup")
                    .forJob(job)
                    .startAt(new Date(System.currentTimeMillis()))
                    .withSchedule(
                            CronScheduleBuilder
                                    .cronSchedule("00 00 00 ? * *")).build();

            scheduler.scheduleJob(job, trigger);
            scheduler.start();

            // scheduler.shutdown();

        } catch (ParseException e) {
            e.printStackTrace();
        } 
```

请帮助我，让我知道我是否需要其他任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-06T11:25:45.187

我不知道你的整个代码，你给出的注释和东西。所以，我猜你给出了像@QuartzEvery（“3h”）这样的注释。据我猜测，你的工作安排错了。要让它在每天的特定时间运行，试试这个......

```
QuartzManager implements Managed {
.
.
public void start() throws Exception {
.
.
QuartzDailyAt dailyAt = jobType.getAnnotation(QuartzDailyAt.class);
int hours[] = dailyAt.hours();
String hourString = 
Arrays.stream(hours).mapToObj(String::valueOf).collect(joining(","));
String cronExpression = String.format("0 0 %s * * ?", hourString);
Trigger trigger = TriggerBuilder.
                    newTrigger().
                    startNow().
                    withSchedule(CronScheduleBuilder.cronSchedule(cronExpression).
                            inTimeZone(TimeZone.getTimeZone("IST"))).
                    build();
scheduler.scheduleJob(JobBuilder.newJob(jobType).build(), trigger);
scheduler.start();
.
. 
}
.
} 
```

和接口为

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface QuartzDailyAt {
    int[] hours(); 
} 
```

在运行你的工作时，在类的顶部添加一个注释，比如

```
@QuartzDailyAt(hours = {7,8,9,15,16,17})
public class SomeJob extends QuartzJob {.....} 
```

这使您可以在特定时区的每个特定间隔运行......（上面是 IST）

# properties - 在 WIX 安装期间根据命令行参数有条件地安装文件

> ID：10583590
> 
> 赞同：2
> 
> 时间：2012-05-14T12:43:06.730
> 
> 标签：properties, wix, installation, command-line-arguments, conditional-statements

我想在 wix 安装期间有条件地安装文件是否已设置命令行参数

例如，我有以下文件，仅在设置了 DEBUG 标志时安装

```
 <Component Id="file.pdb" Guid="SOME-GUID">
       <Condition>DEBUG</Condition>
       <File Id="file.pdb" Source="file.pdb" KeyPath="yes" Vital="no" />
    </Component> 
```

我已经添加了 DEBUG 属性并从命令行读取它。该文件从不安装，但我很困惑为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T16:25:14.463

解决了这个问题。以下是我做错了什么以及我为解决它所做的解释

我创建了一个安装程序 (.msi) 并使用以下 cmd 行 args 启动它

> msiexec -i prog.msi DEBUGPROPERTY=True

我有几个带有组件的合并模块，这些模块将根据是否设置了这个属性来安装，这些属性像这样将属性注入到它们中......

```
<Merge
    Id="SomeID"
    Language="1033"
    SourceFile="Module.msm"
    DiskId="1">
    <ConfigurationData
      Name="debugProperty"
      Value="[DEBUGPROPERTY]" /> 
```

我缺少的是在合并模块（.msm）中我需要以下代码

```
 <Configuration Name='debugProperty' Format='Text' DefaultValue='[DEBUGPROPERTY]'/>
    <Substitution Table='CustomAction' Row='setDebugProperty' Column='Target' Value='[=debugProperty]'/>
    <CustomAction Id='setDebugProperty' Property='DEBUGPROPERTY' Value='[DEBUGPROPERTY]'/>

    <InstallExecuteSequence>
            <Custom Action='setDebugProperty' Before="LaunchConditions">1</Custom>
    </InstallExecuteSequence> 
```

这使我可以访问此模块内的属性 DEBUGPROPERTY 以便我可以限制文件是否在安装时安装，就像这样

```
<Component Id="File.pdb" Guid="SOME-GUID">
    <Condition>DEBUGPROPERTY</Condition>
    <File Id="File.pdb" Source="File.pdb" KeyPath="yes" Vital="no" />
</Component> 
```

这现在有效，如果我包含此参数，则允许我在安装期间安装 .pdb 文件。

# php - 如何使用以前缀开头的键获取 $_POST 数组的子集

> ID：10583591
> 
> 赞同：10
> 
> 时间：2012-05-14T12:43:11.083
> 
> 标签：php, arrays, array-key

假设我的`$_POST`变量如下所示：

```
<?php

Array
(
    [user_ID] => 65
    [action] => editpost
    [originalaction] => editpost
    [post_author] => 154
    [empl_bd_dd] => 6
    [empl_bd_mm] => 5
    [empl_bd_yy] => 1987
    [empl_gen] => 1
    [empl_height] => 155
    [empl_weight] => 61
    [empl_arra] => 2
    [save] => Update
    [post_it] => 2
    [empl_pay] => J77
    [empl_cust] => Married
    [empl_lang] => Array
        (
            [0] => EN
            [1] => FR
        )
    [empl_rent] => 1
    [name] => Jimmy Nathan
    [empl_text] => Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sed interdum leo. Sed et elit quam, tempor placerat neque. Nullam sapien odio, egestas iaculis dictum ut, congue ullamcorper tellus.
    [empl_sk_0] => 6
    [empl_sk_1] => 7
    [empl_sk_2] => 5
)

?> 
```

如您所见，我在所有表单变量前面都加上了`empl_`. 不必一一指定所有这些，我如何`$_POST`以最低成本希望优雅的方式将所有表单变量从数组中获取？有没有我可以使用的 PHP 数组函数或它们的组合？

就像你可以选择一个以using`CSS`开头的类的所有元素一样，有没有一种方法可以用 PHP 中的数组键来做到这一点，例如`empl``[class*="empl_"]`

```
$empl_post = $_POST['empl_*'] 
```

* * *

**已编辑的答案**- 对@chris 答案的暗示更正：`$_POST`必须是 的第一个参数`array_intersect_key`，例如：

```
$empl_POST = array_intersect_key($_POST, array_flip(preg_grep('/^empl_/', array_keys($_POST)))); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-14T13:17:06.220

```
$r = array_intersect_key($_POST, array_flip(preg_grep('/^empl_/', array_keys($_POST)))); 
```

[他们真的需要添加一个`PREG_GREP_KEYS`标志，`preg_grep()`这样我们就不必做那些乱七八糟的事情了......]

作为一个函数：

```
function preg_grep_keys($pattern, $input, $flags = 0) {
    return array_intersect_key(
        $input,
        array_flip(preg_grep(
           $pattern,
           array_keys($input),
           $flags
        ))
    );
} 
```

编辑 - 由于 php 5.6`array_filter`现在有一些新标志，可让您在过滤器回调中访问数组键。

```
function preg_grep_keys($pattern, $input, $flags = 0) {
    return array_filter($input, function($key) use ($pattern, $flags) {
           return preg_match($pattern, $key, $flags);
    }, ARRAY_FILTER_USE_KEY);
} 
```

采用

```
$filtered = preg_grep_keys('/^empl_/', $_POST); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T12:47:34.613

```
function GetPrefixedItemsFromArray($array, $prefix)
{
    $keys = array_keys($array);
    $result = array();

    foreach ($keys as $key)
    {
        if (strpos($key, $prefix) === 0)
        {
            $result[$key] = $array[$key];
        }
    }

    return $result;
} 
```

然后只需调用`$myArray = GetPrefixedItemsFromArray($_POST, "empl_");`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T12:45:38.273

```
$empl_post = array();
foreach ($_POST as $k => $v) {
    if (strpos($k, 'empl_') !== 0) continue;
    $empl_post[substr($k, 5)] = $v
}

print_r($empl_post); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T13:04:33.313

另一种方法：

```
$formVars = $_POST;
foreach ($formVars as $key=>$value) {
    if (strpos($key, 'empl_')===false) 
        unset($formVars[$key]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T13:06:17.973

如果你想要这样的东西

```
$keyPattern = '/^empl_*/';
$matching_array = getArrayElementsWithMatchingKeyPattern($_POST,$keyPattern); 
```

然后我不认为有一个内置的方法。最好的方法是使用正则表达式匹配的 foreach 循环。

```
function getArrayElementsWithMatchingKeyPattern($array,$keyPattern){
    $matching_array = array();

    foreach ($keyPattern as $k => $v) {
       if (preg_match($array[$k],$keyPattern) > 0)
             $matching_array[$k] = $v;
    }

    return ($matching_array);

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T13:18:33.350

这是使用 php array_walk 指定要删除的通用前缀的一种很酷的超 php-neat 方法：

```
$foo = array('k_foo' =>"bar", 
              'k_bar' =>"b0r", 
              'y_foo' =>"b5r",
              'y_not' =>"b7r", 
             'k_not' =>"b1r");

$subsetArray = $foo;
$key_prefix = "k_";

array_walk($foo, 'removeUnwanted', array(&$subsetArray, $key_prefix));
var_dump ($subsetArray);

function removeUnwanted($value, $key, $array){
    $prefix = $array[1];
    $testArray = &$array[0];
    if(strpos($key,$prefix) ===0){
        unset($testArray[$key]); 
    } 
} 
```

现在您可以使用数组值的副本和前缀字符串调用数组 walk。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-17T10:48:04.610

```
function GetPrefixedItemsFromArray($array, $prefix, $remplacePref=FALSE)    {
    $keys = array_keys($array);
    $result = array();

    foreach ($keys as $key) {
        if (strpos($key,$prefix) === 0) {
            if($remplacePref===TRUE){
                $result[str_replace($prefix, "", $key)] = $array[$key];
            }
            elseif($remplacePref!==FALSE && $remplacePref!==""){
                $result[str_replace($prefix, $remplacePref, $key)] = $array[$key];
            }
            else{
                $result[$key] = $array[$key];
            }               
        }
    }
    return $result;
} 
```

然后只需调用 $myArray = GetPrefixedItemsFromArray($ *POST, "empl* ");。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-04T08:54:38.613

从 PHP 5.6 开始，您可以使用 array_filter 和选项 ARRAY_FILTER_USE_KEY。

```
$employee = array_filter(filter_input_array(INPUT_POST), function($key) {
  return strpos($key, 'empl_') === 0;
}, ARRAY_FILTER_USE_KEY); 
```

出于安全考虑，您可以根据需要将 FILTER_SANITIZE_* 添加到 filter_input_array 函数中，不建议直接访问 $_POST 并且没有第二个参数的 filter_input_array 会退回到 FILTER_UNSAFE_RAW。

# xcode - 在 Xcode 4.3 中添加自定义对象

> ID：10583592
> 
> 赞同：1
> 
> 时间：2012-05-14T12:43:14.983
> 
> 标签：xcode, cocoa, view, interface-builder, xcode4.2

我正在使用 Objective-C 和 Xcode 大约一年。我定制了很多通用对象。前几天我的一个朋友问了我一个问题，但我无法回答他。所以我试着做一些我自己的事情。

**例如：**
*我创建了这个自定义视图：*
![在此处输入图像描述](../Images/6436c9bacae0a3eb16c2929d1842f89e.png)

如何将此视图添加到**对象库**？这里：

![在此处输入图像描述](../Images/50f5a496b6886de9e46823e22332434b.png)

我真的不知道我为什么需要这个。但我决定弄清楚如何做到这一点。我希望你能帮我解决这个问题。

**提前致谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:28:23.130

我认为这行不通。您将按钮放在自定义视图占位符的“顶部”。自定义视图占位符用于能够使用 - 是的，你猜对了 - 自定义用户定义的视图。

那么您的顶部视图带有 5 个按钮的视图属于哪一类？我认为您正在陷入死胡同，因为这不是在 Xcode 中执行此操作的方式。如果您想以图形方式设计自定义视图，只需为其创建一个 NIB 文件。

我不认为您可以将自己的视图对象添加到对象库中。我所知道的一切都是用户定义的代码片段，它们将显示在右侧。

* * *

**编辑**

Interface Builder 和 Xcode 4 之前的版本中有一些称为 IB 插件的东西。这些在 Xcode 4 中已停产，可以在此处阅读，例如：http: [//xcodebook.com/2011/03/no-interface-builder-plugin-支持-in-xcode-4/](http://xcodebook.com/2011/03/no-interface-builder-plugin-support-in-xcode-4/)

对 IB 插件的进一步搜索可以让更多人说出同样的话。

最好的，

弗洛

# iphone - 在临时文件 Iphone 中保存 96 张图像

> ID：10583597
> 
> 赞同：0
> 
> 时间：2012-05-14T12:43:46.223
> 
> 标签：iphone, objective-c, xcode

我实际上需要在临时文件 Iphone 中保存 96 张图像。实际上，我有一个具有 96 个值的滑块，并且对于每个值，我都有不同的图像，如果我想这样做，那就是制作一部带有 96 个图像的电影，当我移动滑块时会滚动。

感谢您的帮助，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:15:24.170

您可能最好将它们存储在[NSArray](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)中。

这样做的原因是更容易动画（稍后，如果需要），因为[UIImage](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)还拥有一个名为type`images`的属性。`NSArray`

有许多关于如何将数组读/写到文件的示例。例如：http: [//mobiledevelopertips.com/data-file-management/read-and-write-array-dictionary-and-other-collections-to-files.html](http://mobiledevelopertips.com/data-file-management/read-and-write-array-dictionary-and-other-collections-to-files.html)

编辑：如果你的所有图像在编译时都是已知的，那么你应该简单地将它们命名为 frame_0.png 到 frame_95.png。`NSArray`在应用程序启动时加载它们并简单地使用图像：

`(UIImage *)[array objectAtIndex: x]`

# r - 从 xts 对象列表的最后几行生成一个表

> ID：10583600
> 
> 赞同：3
> 
> 时间：2012-05-14T12:43:58.670
> 
> 标签：r, xts

我有一个 xts 对象列表。我想获得一个 data.frame，其中包含列表每个级别的最后几行。

我的清单如下所示：

```
a <- xts(matrix(1:4,2),as.Date("2012-01-01")+0:1)
b <-list(a,a*5)
> b
[[1]]
           [,1] [,2]
2012-01-01    1    3
2012-01-02    2    4

[[2]]
           [,1] [,2]
2012-01-01    5   15
2012-01-02   10   20 
```

我想得到：

```
[,1] [,2]
2    4
10   20 
```

列表的每个级别中的列名称都相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:22:50.137

除了@Henrik 的[回答](https://stackoverflow.com/a/10583645/271616)之外，您还可以使用`lapply`、`do.call`和的组合`last`：

```
do.call(rbind,lapply(b,last)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:47:00.260

作为`b`一个列表，您可以使用任何`*apply`家庭成员，例如：

```
vapply(b, "[", i = 2, rep(0,2)) 
```

如果中的对象`b`具有不同的行数，则以下内容应该有效：

```
vapply(b, function(x) x[nrow(x),], rep(0,ncol(b[[1]]))) 
```

请注意，在第一个版本中，如果您的对象有更多列，或者您使用第二个示例中的结构，您必须调整`2`in 。`rep(0,2)`

请注意，您必须使用`t`结果来获得所需的格式：

```
t(vapply(b, "[", i = 2, rep(0,2))) 
```

# python - Python tornado redis - 如何做一个管道

> ID：10583602
> 
> 赞同：1
> 
> 时间：2012-05-14T12:44:01.753
> 
> 标签：python, redis, tornado

在 tornadoredis 中，管道的正确方法是什么？文档不清楚。我正在使用 tornadoredis 库。

```
 import tornadoredis

    @tornado.web.asynchronous
    @tornado.gen.engine
    def get(self):
        self.pipe_threads = []
        sw = stopwatch.Timer()
        if not self.get_cookie('rtbhui'):
            self.cookie_id=str(uuid4())
            self.set_cookie('test', self.cookie_id, domain='rtb.rtbhui.com',expires_days=365*2)
        else:
            self.cookie_id = self.get_cookie('test')

        t = yield tornado.gen.Task(c.pipeline)
        yield tornado.gen.Task(t.set,'key', 'value')
        yield tornado.gen.Task(t.execute)

starting
ERROR:root:Uncaught exception GET /apixel?bid=eydhdmlkJzogJ2luZm9AYWRtYWdpYy5jby5qcCcsICdjcmlkJzogJzIwNzY3MDczNTE1JywgJ21hYmlkJzogeydub2RlJzogTm9uZSwgJ2hvZCc6ICcxMycsICdjaWQnOiAnMzYnLCAnaW5kdXN0cnknOiBOb25lLCAnZXgnOiAnMScsICd2aWQxJzogJzI5JywgJ2Rvdyc6ICczJ30sICdwcmlkJzogeydob2QnOiAnMTMnLCAnd295JzogJzE4JywgJ2NpZCc6ICczNicsICdkb3cnOiAnMycsICdzc3AnOiAnYWR4JywgJ3N0JzogTm9uZSwgJ2J0JzogJ2ZpcmVmb3gnLCAnY3R5JzogJ3Rva3lvJywgJ2V4JzogJzEnLCAndmlkMic6ICcyMjInLCAnZHQnOiAnMScsICdvcyc6ICdtYWMnLCAndmlkMSc6ICcyOSd9LCAnYWdpZCc6ICc0NTQ3OTE3Nzk1JywgJ2Nvb2tpZWlkJzogJ3JldGFnZXRpbmc6Y29va2llJywgJ2RpZCc6ICd5YWhvby5jb20nLCAndmFsaWRhdGlvbic6IFRydWV9 (127.0.0.1)
HTTPRequest(protocol='http', host='127.0.0.1:8055', method='GET', uri='/apixel?bid=eydhdmlkJzogJ2luZm9AYWRtYWdpYy5jby5qcCcsICdjcmlkJzogJzIwNzY3MDczNTE1JywgJ21hYmlkJzogeydub2RlJzogTm9uZSwgJ2hvZCc6ICcxMycsICdjaWQnOiAnMzYnLCAnaW5kdXN0cnknOiBOb25lLCAnZXgnOiAnMScsICd2aWQxJzogJzI5JywgJ2Rvdyc6ICczJ30sICdwcmlkJzogeydob2QnOiAnMTMnLCAnd295JzogJzE4JywgJ2NpZCc6ICczNicsICdkb3cnOiAnMycsICdzc3AnOiAnYWR4JywgJ3N0JzogTm9uZSwgJ2J0JzogJ2ZpcmVmb3gnLCAnY3R5JzogJ3Rva3lvJywgJ2V4JzogJzEnLCAndmlkMic6ICcyMjInLCAnZHQnOiAnMScsICdvcyc6ICdtYWMnLCAndmlkMSc6ICcyOSd9LCAnYWdpZCc6ICc0NTQ3OTE3Nzk1JywgJ2Nvb2tpZWlkJzogJ3JldGFnZXRpbmc6Y29va2llJywgJ2RpZCc6ICd5YWhvby5jb20nLCAndmFsaWRhdGlvbic6IFRydWV9', version='HTTP/1.1', remote_ip='127.0.0.1', body='', headers={'Connection': 'keep-alive', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip, deflate', 'Cache-Control': 'max-age=0', 'Host': '127.0.0.1:8055', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:11.0) Gecko/20100101 Firefox/11.0'})
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.2.1-py2.7.egg/tornado/web.py", line 1074, in wrapper
    return method(self, *args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.2.1-py2.7.egg/tornado/gen.py", line 107, in wrapper
    runner.run()
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.2.1-py2.7.egg/tornado/gen.py", line 319, in run
    yielded = self.gen.throw(*exc_info)
  File "/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbTornadoServer/tornadoServer.py", line 81, in get
    t = yield tornado.gen.Task(c.pipeline)
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.2.1-py2.7.egg/tornado/gen.py", line 341, in run
    self.yield_point.start(self)
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.2.1-py2.7.egg/tornado/gen.py", line 223, in start
    self.func(*self.args, **self.kwargs)
TypeError: pipeline() got an unexpected keyword argument 'callback'
ERROR:root:500 GET /apixel?bid=eydhdmlkJzogJ2luZm9AYWRtYWdpYy5jby5qcCcsICdjcmlkJzogJzIwNzY3MDczNTE1JywgJ21hYmlkJzogeydub2RlJzogTm9uZSwgJ2hvZCc6ICcxMycsICdjaWQnOiAnMzYnLCAnaW5kdXN0cnknOiBOb25lLCAnZXgnOiAnMScsICd2aWQxJzogJzI5JywgJ2Rvdyc6ICczJ30sICdwcmlkJzogeydob2QnOiAnMTMnLCAnd295JzogJzE4JywgJ2NpZCc6ICczNicsICdkb3cnOiAnMycsICdzc3AnOiAnYWR4JywgJ3N0JzogTm9uZSwgJ2J0JzogJ2ZpcmVmb3gnLCAnY3R5JzogJ3Rva3lvJywgJ2V4JzogJzEnLCAndmlkMic6ICcyMjInLCAnZHQnOiAnMScsICdvcyc6ICdtYWMnLCAndmlkMSc6ICcyOSd9LCAnYWdpZCc6ICc0NTQ3OTE3Nzk1JywgJ2Nvb2tpZWlkJzogJ3JldGFnZXRpbmc6Y29va2llJywgJ2RpZCc6ICd5YWhvby5jb20nLCAndmFsaWRhdGlvbic6IFRydWV9 (127.0.0.1) 6.69ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:28:28.210

Mybe有点太晚了，但仍然有人可能会偶然发现这个问题。

当您使用带有和包装器的`yield`语句时，您会将代码的执行延迟到屈服点以下，直到操作（您在语句中开始）完成。在大多数情况下，您将使用语句来等待数据传输完成。`tornado.gen.engine``tornado.gen.Task``yield gen.Task(..)``yield`

使用管道的要点是将多个redis命令打包到一个请求中，以减少对Redis服务器的请求数。因此，当您向管道添加命令时，不会向服务器发送任何内容。此时无需使用`yield`语句。

调用该`execute`方法时，之前打包到管道中的所有命令都将发送到 Redis 服务器。即使您不想等待请求完成来检查结果，也最好用包装`execute`方法调用。`yield gen.Task()`

使用该`tornado-redis.Client.pipeline`方法的代码可能如下所示：

```
client = Client()
pipe = client.pipeline()
pipe.hset('foo', 'bar', 1)
pipe.expire('foo', 60)

re1, res2 = yield gen.Task(pipe.execute) 
```

或者你可以使用'with'语句：

```
client = Client()
with client.pipeline() as pipe:
    pipe.hset('foo', 'bar', 1)
    pipe.expire('foo', 60)

    res1, res2 = yield gen.Task(pipe.execute) 
```

管道功能使用 Redis 事务功能。你可以在这篇文章中读到它们：[http ://redis.io/topics/transactions](http://redis.io/topics/transactions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:11:26.723

在您的情况下，它看起来像`pipeline`函数不能与`gen.engine`.

您是否尝试过使用`t = c.pipeline()`而不是`t = yield tornado.gen.Task(c.pipeline)`？

# objective-c - 如何动态设置属性

> ID：10583604
> 
> 赞同：0
> 
> 时间：2012-05-14T12:44:05.973
> 
> 标签：objective-c, ios

我正在使用以下代码为一系列视图设置数组。bunnyView1 到 bunnyView7 是在情节提要中创建的 UIImageView 的实例，但我想自动化该过程，以便我可以使用代码生成连接。我将如何设置循环内的值？

```
- (void)viewDidLoad
{   
NSMutableArray *hopAnimation = [[NSMutableArray alloc] initWithCapacity:20];
for (int i = 1; i <= 20; i++) {
    [hopAnimation addObject:[UIImage imageNamed:[NSString stringWithFormat:@"frame-%i.png", i]]];
}
self.bunnyView1.animationImages=hopAnimation;
self.bunnyView2.animationImages=hopAnimation;
self.bunnyView3.animationImages=hopAnimation;
self.bunnyView4.animationImages=hopAnimation;
self.bunnyView5.animationImages=hopAnimation;
self.bunnyView6.animationImages=hopAnimation;
self.bunnyView7.animationImages=hopAnimation;
self.bunnyView1.animationDuration=1;
self.bunnyView2.animationDuration=1;
self.bunnyView3.animationDuration=1;
self.bunnyView4.animationDuration=1;
self.bunnyView5.animationDuration=1;
self.bunnyView6.animationDuration=1;
self.bunnyView7.animationDuration=1;                             
[super viewDidLoad]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:10:38.837

将变量添加到数组中。并迭代数组并设置值。例如，

```
NSArray *collection = [[NSArray    alloc]initWithObjects:@"object1",@"object2",@"object3",@"object4",nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T14:06:51.257

您应该使用每个 bunnyView 都应该链接到的 UIImageView 的 IBOutletCollection。声明是这样的：

```
@property (nonatomic,retain) IBOutletCollection(UIImageView) NSArray * bunnyViews; 
```

# silverlight - 将属性添加到仅在运行时才知道属性名称的动态对象

> ID：10583605
> 
> 赞同：0
> 
> 时间：2012-05-14T12:44:19.197
> 
> 标签：silverlight, gridview, dynamic

我查看了动态对象的文档，但我无法找到解决当前问题的方法。

我有这个代码：

```
dynamic sampleObject = new ExpandoObject();

string columnName = checkBox.Content.ToString();

sampleObject.columName = myObservableCollection; 
```

现在，我添加的属性的名称将是 columnName，但我希望它是我的复选框的内容。

我应该如何实施？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:31:23.760

使用命名值字典而不是动态属性。

您可以使用字典转换器绑定到字典中的特定条目（使用转换器参数值作为键）。[来自此链接的以下代码](http://forums.silverlight.net/t/51864.aspx)

```
public class DictionaryItemConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var dict = value as Dictionary<string, string>;
        if (dict != null)
        {
            return dict[parameter as string];
        }
        throw new NotImplementedException();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

在通过代码向网格添加列的地方，您需要使用正确的转换器和名称转换器参数创建绑定。

# actionscript-3 - 当我更改系列名称和数据提供者时，Barchsrt 系列不显示数据？

> ID：10583618
> 
> 赞同：1
> 
> 时间：2012-05-14T12:45:21.490
> 
> 标签：actionscript-3, data-binding, mxml, dataprovider, arraycollection

我创建我的条形图如下： {axisStroke} {axisStroke} {axisStroke}

```
 <!-- horizontal axis -->
        <mx:horizontalAxis>
            <mx:LinearAxis id="ac" baseAtZero="true"/>
        </mx:horizontalAxis>
        <!-- horizontal axis renderer -->
        <mx:horizontalAxisRenderers>
            <mx:AxisRenderer axis="{ac}" 
                             canDropLabels="true" 
                             styleName="wsViewAxisLabel"
                             minorTickPlacement="none" 
                             tickPlacement="none" 
                             labelGap="0" 
                             showLabels="false" 
                             showLine="false">
                <mx:axisStroke>{axisStroke}</mx:axisStroke>
                <mx:tickStroke>{axisStroke}</mx:tickStroke>
                <mx:minorTickStroke>{axisStroke}</mx:minorTickStroke>
            </mx:AxisRenderer>
        </mx:horizontalAxisRenderers>
        <mx:series>
            <mx:BarSeries id="barSeries" color="#FFFFFF" labelAlign="right"
                          displayName="{seriesName}"
                          filters="{[new DropShadowFilter(2,45,0,.3)]}" fontSize="11"
                          fontWeight="bold" labelField="{valueName}"
                          xField="{seriesName}"
                          showDataEffect="{interpolateIn}"
                          yField="{categoryName}">
                <mx:fill>
                    <mx:LinearGradient id="linearGradient">
                        <mx:entries>
                            <fx:Array>
                                <mx:GradientEntry color="0x99ffcc"
                                                  ratio="0.0"
                                                  alpha="0.1" />
                                <mx:GradientEntry color="0x99ffcc"
                                                  ratio="1.0"
                                                  alpha="1.0"/>
                            </fx:Array>
                        </mx:entries>
                    </mx:LinearGradient>
                </mx:fill>
            </mx:BarSeries>
        </mx:series>
        <mx:annotationElements>
            <mx:CartesianDataCanvas id="mCanvas"/>
        </mx:annotationElements>
    </mx:BarChart> 
```

但是当我更改系列名称和数据收集时。条形图没有显示数据。

我尝试调试代码并发现barseries的项目长度为0。它的dataprovider和系列名称，xfield，yfield是正确的。不知道为什么barseries 没有创建barseriesitems。

非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:53:21.370

`dataProvider`绑定到原始名称，因此需要更新对 ID 的分配`dataProvider`。与`dataProvider`绑定`ArrayCollection`，因此对 的`ArrayCollection`分配也`dataProvider`需要更新。

**参考**

*   [Flex 移动性能检查表](http://www.adobe.com/devnet/flex/articles/flex-mobile-performance-checklist.html)

# java - 执行核心java程序时出现com.google.zxing.NotFoundException异常？

> ID：10583622
> 
> 赞同：15
> 
> 时间：2012-05-14T12:45:32.117
> 
> 标签：java, exception, barcode, zxing

我有一个带有二维条码的 jpeg 文件。图像分辨率为 1593X1212。我正在使用 xing 库从图像中解码此条形码。我在网上得到了以下代码。

```
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import javax.imageio.ImageIO;
import com.google.zxing.BinaryBitmap;
import com.google.zxing.ChecksumException;
import com.google.zxing.FormatException;
import com.google.zxing.LuminanceSource;
import com.google.zxing.MultiFormatReader;
import com.google.zxing.NotFoundException;
    import com.google.zxing.Reader;
import com.google.zxing.Result;
import com.google.zxing.client.j2se.BufferedImageLuminanceSource;
import com.google.zxing.common.HybridBinarizer;

public class NewLibTest {
    public static void main(String args[]){
    System.out.println(decode(new File("E:\\xyz.jpg")));
    }

    /**
      * Decode method used to read image or barcode itself, and recognize the barcode,
      * get the encoded contents and returns it.
     * @param <DecodeHintType>
      * @param file image that need to be read.
      * @param config configuration used when reading the barcode.
      * @return decoded results from barcode.
      */
     public static String decode(File file){//, Map<DecodeHintType, Object> hints) throws Exception {
         // check the required parameters
         if (file == null || file.getName().trim().isEmpty())
             throw new IllegalArgumentException("File not found, or invalid file name.");
         BufferedImage image = null;
         try {
             image = ImageIO.read(file);
         } catch (IOException ioe) {
             try {
                throw new Exception(ioe.getMessage());
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
         }
         if (image == null)
             throw new IllegalArgumentException("Could not decode image.");
         LuminanceSource source = new BufferedImageLuminanceSource(image);
         BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
         MultiFormatReader barcodeReader = new MultiFormatReader();
         Result result;
         String finalResult = null;
         try {
             //if (hints != null && ! hints.isEmpty())
               //  result = barcodeReader.decode(bitmap, hints);
             //else
                 result = barcodeReader.decode(bitmap);
             // setting results.
             finalResult = String.valueOf(result.getText());
         } catch (Exception e) {
             e.printStackTrace();
           //  throw new BarcodeEngine().new BarcodeEngineException(e.getMessage());
         }
         return finalResult;
    } 
```

}

当我执行这个简单的核心 java 程序时，我给出了异常

```
com.google.zxing.NotFoundException 
```

它甚至没有给出任何堆栈跟踪。

我想请教专家，为什么会出现这种异常。感谢您！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T12:04:07.757

我有同样的问题。我使用了一张我知道有有效 QR 码的图像，而且我还得到了 com.google.zxing.NotFoundException。

问题是您用作源的图像对于库解码来说太大了。在我减小图像的大小后，二维码解码器工作了。

就我的应用而言，图像上的二维码总是或多或少在同一个区域，所以我使用了 BufferedImage 类的 getSubimage 函数来隔离二维码。

```
 BufferedImage image;
     image = ImageIO.read(imageFile);
     BufferedImage cropedImage = image.getSubimage(0, 0, 914, 400);
     // using the cropedImage instead of image
     LuminanceSource source = new BufferedImageLuminanceSource(cropedImage);
     BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
     // barcode decoding
     QRCodeReader reader = new QRCodeReader();
     Result result = null;
     try 
     {
         result = reader.decode(bitmap);
     } 
     catch (ReaderException e) 
     {
         return "reader error";
     } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-05-08T17:17:54.100

我有同样的问题。当我在 Java SE 库上运行几乎完全相同的代码时，它就可以工作了。当我使用同一张图片运行 Android 代码时，它不起作用。花了很多时间试图找出...

1.  问题：您必须将图片调整为更小。您不能直接使用智能手机图片。它太大了。在我的测试中，它适用于大约 200KB 的图片。

您可以使用缩放位图

`Bitmap resize = Bitmap.createScaledBitmap(srcBitmap, dstWidth,dstHeight,false);`

2.  问题：你必须打开一些标志。玩弄几乎所有的标志，这个解决方案对我有用：

    ```
    Map<DecodeHintType, Object> tmpHintsMap = new EnumMap<DecodeHintType, Object>(
            DecodeHintType.class);
    tmpHintsMap.put(DecodeHintType.TRY_HARDER, Boolean.TRUE);
    tmpHintsMap.put(DecodeHintType.POSSIBLE_FORMATS,
            EnumSet.allOf(BarcodeFormat.class));
    tmpHintsMap.put(DecodeHintType.PURE_BARCODE, Boolean.FALSE); 
    ```

    ...

    ```
    MultiFormatReader mfr = null;
    mfr = new MultiFormatReader();
    result = mfr.decode(binaryBitmap, tmpHintsMap); 
    ```

3.  问题：ZXing的Android库运行一次条码扫描，假设图片上的条码已经有正确的方向。如果不是这种情况，您必须运行它四次，每次将图片旋转 90 度左右！

对于旋转，您可以使用此方法。角度是以度为单位的角度。

```
 public Bitmap rotateBitmap(Bitmap source, float angle)
    {
          Matrix matrix = new Matrix();
          matrix.postRotate(angle);
          return Bitmap.createBitmap(source, 0, 0, source.getWidth(), source.getHeight(), matrix, true);
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T12:55:03.313

That exception is thrown when no barcode is found in the image:

[http://zxing.org/w/docs/javadoc/com/google/zxing/NotFoundException.html](http://zxing.org/w/docs/javadoc/com/google/zxing/NotFoundException.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T13:59:58.493

这是正常的; 它只是意味着没有找到条形码。你没有提供图片，所以我不能说你的图片是否可读，更不用说支持的条形码格式了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-23T12:16:59.310

我已经在 ImageAnalysis 中调整了目标分辨率，它开始工作了。

从

```
ImageAnalysis imageAnalysis =
        new ImageAnalysis.Builder()
                .setTargetResolution(new Size(mySurfaceView.getWidth(), mySurfaceView.getHeight()))
                .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)
                .build(); 
```

对这个

```
 ImageAnalysis imageAnalysis =
            new ImageAnalysis.Builder()
                    .setTargetResolution(new Size(700, 500))
                    .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)
                    .build(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-27T10:24:09.617

```
try {
                String a = textField_1.getText(); //my image path
                InputStream barCodeInputStream = new FileInputStream(""+a);
                BufferedImage barCodeBufferedImage = ImageIO.read(barCodeInputStream);

                LuminanceSource source = new BufferedImageLuminanceSource(barCodeBufferedImage);
                BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
                MultiFormatReader reader = new MultiFormatReader();
                com.google.zxing.Result result = reader.decode(bitmap);

                System.out.println("Barcode text is " + result.getText());
                textField.setText(""+result.getText());
            } catch (Exception e) {
                // TODO: handle exception
                JOptionPane.showMessageDialog(null, "This image does not contain barcode", "Warning", JOptionPane.WARNING_MESSAGE);
                e.printStackTrace();
            } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-27T15:15:53.027

我有同样的问题，我正在调用 readQRCode(filePath, charset, hintMap); 并且得到了同样的信息。我正在调用我使用 zxing 库编写的库。要修复它，只需将 (zxing) jar 添加到您的顶级代码中，即使那里没有访问这些库。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-02T05:32:06.637

如果你使用这个代码，

```
public static String readQRCode(String filePath, String charset, Map hintMap)
throws FileNotFoundException, IOException, NotFoundException {

    BinaryBitmap binaryBitmap = new BinaryBitmap(new HybridBinarizer(
        new BufferedImageLuminanceSource(
            ImageIO.read(new FileInputStream(filePath)))));

    Result qrCodeResult = new MultiFormatReader().decode(binaryBitmap, tmpHintsMap);

    return qrCodeResult.getText();
}

public static String readQRCode(String filePath, String charset, Map hintMap)
throws FileNotFoundException, IOException, NotFoundException {

    BinaryBitmap binaryBitmap = new BinaryBitmap(new HybridBinarizer(
        new BufferedImageLuminanceSource(
            ImageIO.read(new FileInputStream(filePath)))));

    Result qrCodeResult = new MultiFormatReader().decode(binaryBitmap, tmpHintsMap);

    return qrCodeResult.getText();
} 
```

更改此代码。其正常工作，

```
public static String readQRCode(String filePath, String charset, Map hintMap)
throws FileNotFoundException, IOException, NotFoundException {
    Map < DecodeHintType, Object > tmpHintsMap = new EnumMap < DecodeHintType, Object > (
        DecodeHintType.class);

    //tmpHintsMap.put(DecodeHintType.TRY_HARDER, Boolean.FALSE);
    //tmpHintsMap.put(DecodeHintType.POSSIBLE_FORMATS, EnumSet.allOf(BarcodeFormat.class));
    tmpHintsMap.put(DecodeHintType.PURE_BARCODE, Boolean.TRUE);

    BinaryBitmap binaryBitmap = new BinaryBitmap(new HybridBinarizer(
        new BufferedImageLuminanceSource(
            ImageIO.read(new FileInputStream(filePath)))));

    Result qrCodeResult = new MultiFormatReader().decode(binaryBitmap, tmpHintsMap);

    return qrCodeResult.getText();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-18T09:15:13.940

这个解决方案对我有用。我希望这对你有帮助。我替换`reader.decode(...)`为`reader.decodeWithState(...)`

```
 MultiFormatReader reader = new MultiFormatReader();// use this otherwise

        Result result = reader.decodeWithState(bitmap); 
```

# xcode - 如何计算可可触摸中特定时间范围内的值

> ID：10583625
> 
> 赞同：0
> 
> 时间：2012-05-14T12:45:41.540
> 
> 标签：xcode, cocoa-touch, datetime

我需要一些帮助才能使我的静态工作...我使用核心数据来存储来自用户输入的值，并且每条“行”都有一个时间值。

现在我需要计算其中一些特定时间范围内的值，比如说过去 30 天。但我不知道该怎么做，我对使用日期和时间游侠有点陌生。

有人可以帮帮我吗？

亲切的问候，英格玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:03:40.740

您需要使用谓词来过滤数据。

```
NSManagedObjectContext *context; // Assume this exists.
NSEntityDescription *entityDescription; // Assume this exists.
NSDate minDate, maxDate; // Assume these exist.

NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDescription];

NSPredicate *setPredicate:predicate = [NSPredicate predicateWithFormat:@"date BETWEEN %@",
                                     [NSArray arrayWithObjects:minDate, maxDate, nil]];
[request setPredicate:predicate];

NSError *error;
NSArray *filteredResult = [context executeFetchRequest:request error:&error];
// Handle error.

[request release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:34:08.913

感谢您的回答。我会试试你的方法。

我自己找到了这个解决方案，有什么担心吗？

```
NSTimeInterval aktuellesDatumInSekunden = [aktuellesDatum timeIntervalSinceReferenceDate];
    NSTimeInterval vordreissigTagen = [letztedreizigTage timeIntervalSinceReferenceDate];

    double dBoluse = 0;
    double dWerteKleinerSechzig = 0; 

    for (TblBolusWerte *ausgabeBoliTag in statistikDataWithPredicate){
        NSTimeInterval DatumAusDB = [ausgabeBoliTag.creationTime timeIntervalSinceReferenceDate];

        if (DatumAusDB >= vordreissigTagen && DatumAusDB <= aktuellesDatumInSekunden){ 
```

# reporting-services - 从功能区按钮触发报告

> ID：10583628
> 
> 赞同：5
> 
> 时间：2012-05-14T12:46:05.330
> 
> 标签：reporting-services, dynamics-crm-2011

我有几个自定义报告，我希望能够将按钮添加到触发它们的功能区。

可能吗？如果是这样，任何例子都会很棒！

提前致谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T07:13:54.473

要从功能区按钮运行报告，您需要创建一个 js 文件，其中包含您将从按钮调用的函数。

你需要4样东西：

1.  rdlName - rdl 文件名。
2.  reportGuid 报告的 GUID。
3.  entityGuid = 您为其运行报告的实体 GUID。
4.  entityType = 实体对象类型代码。

这是示例。

```
function printOutOnClick() {
    // This function generates a Print out
    var rdlName = "SomeReport.rdl";
    var reportGuid = "9A984A27-34E5-E011-B68F-005056AC478A";
    var entityGuid = Xrm.Page.data.entity.getId();//Here I am getting Entity GUID it from it's form
    var entityType = "4214";
    var link = serverUrl + "/" + organizationName + "/crmreports/viewer/viewer.aspx?action=run&context=records&helpID=" + rdlName  + "&id={" + reportGuid + "}&records=" + entityGuid + "&recordstype=" + entityType;
    openStdDlg(link, null, 800, 600, true, false, null);
} 
```

openStdDlg() 是 window.open() 的包装，MS Dynamics CRM 自己使用它，我也是。

要将其添加到功能区按钮，您需要像这篇文章[如何从应用程序功能区（CRM 2011）启动对话框](http://mscrmshop.blogspot.com/2011/06/how-to-start-dialog-from-application_08.html)一样，除非您需要调用报告而不是对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:04:26.390

在 RDL 名称之后，Guid 应该是 RecordGuid 而不是 EntityGuid

# ruby-on-rails - 在 Mac 上安装 rails 后出现的问题

> ID：10583632
> 
> 赞同：1
> 
> 时间：2012-05-14T12:46:16.307
> 
> 标签：ruby-on-rails

一旦我安装了rails，如果我启动一个新应用程序，我就会收到这个错误：

```
nicolamac:app2 n$ rails new app
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
/Library/Ruby/Gems/1.8/gems/bundler-1.0.21/lib/bundler/spec_set.rb:88:in `materialize': Could not find multi_json-1.2.0 in any of the sources (Bundler::GemNotFound)
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.21/lib/bundler/spec_set.rb:82:in `map!'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.21/lib/bundler/spec_set.rb:82:in `materialize'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.21/lib/bundler/definition.rb:90:in `specs'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.21/lib/bundler/definition.rb:135:in `specs_for'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.21/lib/bundler/definition.rb:124:in `requested_specs'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.21/lib/bundler/environment.rb:23:in `requested_specs'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.21/lib/bundler/runtime.rb:11:in `setup'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.21/lib/bundler.rb:110:in `setup'
    from /Users/n/Downloads/berk-platform-0e35856/test/dummy/config/boot.rb:7
    from /Users/n/Downloads/berk-platform-0e35856/test/dummy/script/rails:5:in `require'
    from /Users/n/Downloads/berk-platform-0e35856/test/dummy/script/rails:5
    from script/rails:6:in `load'
    from script/rails:6 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:48:18.240

看起来它试图在系统文件夹中初始化一个 git repo。查看[rbenv](https://github.com/sstephenson/rbenv/)，您的设置压力会更小。

# ios - iOS/Cocoa multipleTouchEnabled = true 如果框架被移动则不起作用

> ID：10583637
> 
> 赞同：1
> 
> 时间：2012-05-14T12:46:37.540
> 
> 标签：ios, cocoa, frame, move, multi-touch

我有以下问题：

创建 UIView，添加到屏幕。在这个 UIView 的代码中，我说要移动框架本身，这里是代码：

```
self.frame = CGRectMake(myLeft, myTop, myWidth, myHeight); 
```

但随后多点触控不起作用，在 beginTouch 事件中我得到 [touches count] = 0; 当我不移动框架时，多点触控工作。问题是什么 ？

multipleTouchEnabled = true - 没有帮助我，它仍然无法正常工作。

# python - 这是 curried operator.add 函数的正确实现吗？

> ID：10583640
> 
> 赞同：-1
> 
> 时间：2012-05-14T12:46:49.947
> 
> 标签：python, functional-programming

这篇[博](http://www.uncarved.com/blog/not_currying.mrk)文提出了一个柯里化加法函数的实现：

```
def addN(n):
    return lambda x: x + n

def plus(a, b):
    addA=addN(a)
    return addA(b) 
```

我相信我的版本更正确，因为它一直使用一元函数。

```
from operator import add
plus = lambda a: lambda b: add(a, b) 
plus(1)(2) 
```

你怎么看 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T12:56:38.897

您的功能与博客文章`plus`中的功能相同。`addN`唯一的区别是：

1.  您使用了`lambda`博客文章使用`def`.
2.  出于某种原因，您使用`operator.add(a,b)`而不是简单地使用`a+b`.

使用`plus`and`addN`将给出相同的结果，因此没有一个更“正确”。

请注意，您选择的函数命名令人困惑，因为您的`plus`函数对应于博客文章中的`addN`函数（而不是函数）。`plus`

# android - 当我在搜索时在edittext搜索框中键入空格键时，搜索结果在Android中不显示任何内容？

> ID：10583643
> 
> 赞同：0
> 
> 时间：2012-05-14T12:46:57.707
> 
> 标签：android, android-edittext

我正在使用 xml 解析从 web 服务中获取名称。我正在使用 edittextbox 搜索名称。现在，当我输入名字或姓氏的第一个字母时，它会完美地检索并显示名称列表。

但是，当我输入名字并在输入姓氏之前留了一个空格时，名字列表什么也没有显示。但实际上，相关的搜索结果应该根据输入的名字显示。

我正在使用的代码：

HashMap map = new HashMap(); map.put("Name",String.valueOf(XMLfuncts.getValue(e, "Name")));

mylist.add(地图);

adapter = new SimpleAdapter(ViewList.this, mylist,R.layout.userdetails_row, new String[] { "Name", "Moblie", "CompName" }, new int[] { R.id.TextViewName, R.id.编号，R.id.compname });

```
 searchname.addTextChangedListener(new TextWatcher() {

                                 public void onTextChanged(CharSequence s, int start, int before,
                                                      int count) {

                                          // onTextChanged
                                 }

                                 public void beforeTextChanged(CharSequence s, int start, int count,
                                                      int after) {
                                            // beforeTextChanged

                                }

                                 public void afterTextChanged(Editable s) {

                                            // afterTextChanged

                            adapter.getFilter().filter(s);

                                            adapter.notifyDataSetChanged();
                                }

                    }); 
```

我需要的是即使我在编辑文本框中输入名字和姓氏之间的空格，搜索结果也应该保持活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:08:30.953

```
map.put("Name",String.valueOf(XMLfuncts.getValue(e, "Name"))); 
```

尝试将此行替换为

```
String str = String.valueOf(XMLfuncts.getValue(e, "Name"));
str =str.trim(); // will remove space between names
map.put("Name",str); 
```

希望这会奏效..！

# java - 如何在eclipse上用我的java类文件更新外部jar

> ID：10583644
> 
> 赞同：1
> 
> 时间：2012-05-14T12:46:57.770
> 
> 标签：java, eclipse, jar

在我的 java 项目中，我添加了一些外部 jar。我想用我的 java 类文件更新一个特定的 jar。请帮助我如何做到这一点。

问候 Rajasekaran.G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:52:55.850

如果您要向其中添加类的 jar 是 3r 方库，我建议您不要执行您所描述的操作（它可能会导致微妙的意外和意外的副作用）。

如果您要更新的 jar 是您自己的，我会将类的源代码放入生成该 jar 的项目中，并且它应该在生成 jar 期间自动添加。

如果你*真的*想手动完成，你可以解压外部 jar，将你的 .class 文件添加到生成的目录结构中，然后再次 jar 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:54:04.760

您需要独立更新 jar 试试这个，

```
jar -uvf <existingjar> <class file in appropriate folder structure as per package> 
```

例如

```
jar -uvf current.jar  NewClass.class 
```

或者如果您的课程在某个包中，例如`com.my.util`，将您的课程文件放入`com/my/util/NewClass.class`并从提示符执行以下命令

```
jar -uvf current.jar  com 
```

这将更新`current.jar`文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:54:58.613

如果它是一个外部罐子，我想知道你是否可以这样做？如果它是你自己的罐子，请按照 Attila 给出的选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:55:05.603

尝试打开您的 .jar 文件 winrar 并将您的 java 类放在 jar 上您想要的任何位置。

# apache - http 范围请求的 MD-5 校验和

> ID：10583647
> 
> 赞同：1
> 
> 时间：2012-05-14T12:47:06.683
> 
> 标签：apache, md5

我正在使用 apache 服务器来服务器静态文件。文件可能很大。我已经编写了 c++ 程序来使用 http 范围请求下载文件。（我创建了 3 个线程，它们向同一个文件触发 3 个范围请求）。如何确保每个范围请求的完整性？Apache 不会为范围请求发送 md5 标头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:56:34.963

您可以对静态文件执行 HEAD 请求，以获取没有该文件的所有标题。也许这也包含 MD5 校验和。

此外，一些 FTP 站点将文件的 md5sum 与文件一起放在[文本文件](http://na.apachecon.com/downloads/acna_2011_slides.md5)中。

不一定要检查文件的 MD5。TCP 具有内置的校验和，文件在传输时损坏的情况很少见。

# iphone - 编辑topViewController的toobarItems

> ID：10583651
> 
> 赞同：0
> 
> 时间：2012-05-14T12:47:11.917
> 
> 标签：iphone, objective-c

我想动态更改我的 topviewcontroller 的 ToolbarItems。

我有一个执行我的业务逻辑的类，因此返回一个 uibarbuttonitem 数组。所以，我得到了 topviewcontroller 的参考，如下所示：

```
ViewController *topVC = [appDelegate.navController topViewController]; 
```

现在，如果我尝试这样做：

```
[topVc setToolbarItems: myArrayofUibarbuttonItems]; 
```

但什么也没有发生。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:48:48.747

猜猜你可以用 setItems 函数做到这一点

```
[topVc.toolbar setItems:theArray]; 
```

只是打字，没有测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:56:49.273

```
[topVc.navigationController setToolbarItems:myArrayofUibarbuttonItems]; 
```

这应该可以帮助你..快乐编码:)

# javascript - 未捕获的 ReferenceError：django 未定义

> ID：10583652
> 
> 赞同：17
> 
> 时间：2012-05-14T12:47:19.630
> 
> 标签：javascript, python, django, forms, widget

我正在尝试在我的公式中使用带有几个 DateField 的管理小部件，但只有第一个可以正确显示小部件，对于另一个我收到错误：

> DateTimeShortcuts.js:205 Uncaught ReferenceError: django is not defined

（指示的行是：

```
django.jQuery(document).bind('keyup', function(event) { 
```

)

这是我的模板头：

```
<head>
{% load adminmedia  %}
<link rel="stylesheet" href="/static/css/main.css" />
<script type="text/javascript" src="/admin/jsi18n/"></script>
<script type="text/javascript" src="/static/admin/js/core.js"></script>
<script type="text/javascript">
    window.__admin_media_prefix__ = "{% filter escapejs %}{% admin_media_prefix %}{% endfilter %}";
</script>
<link rel="stylesheet" type="text/css" href="/static/admin/css/forms.css"/>
<link rel="stylesheet" type="text/css" href="/static/admin/css/base.css"/>
<!-- <link rel="stylesheet" type="text/css" href="/static/admin/css/global.css"/> -->
<link rel="stylesheet" type="text/css" href="/static/admin/css/widgets.css"/>
{{ form.media }}... 
```

我的模型字段：

```
start_date = models.DateField()
end_date = models.DateField() 
```

我的表单类：

```
class UserForm(ModelForm):
    start_date = forms.DateField(
        widget=widgets.AdminDateWidget
        )
    end_date = forms.DateField(
        widget=widgets.AdminDateWidget
        )
    class Meta:
        model = User 
```

我猜这是某种渲染规则，但我完全糊涂了。欢迎任何帮助！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-14T13:43:45.830

`django.jQuery`在 中定义`django/contrib/admin/static/admin/js/jquery.init.js`并依赖于`django/contrib/admin/static/admin/js/jquery.js`。您需要直接在模板中加载这些js文件

```
<script type="text/javascript" src="/static/admin/js/jquery.min.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery.init.js"></script> 
```

或将这些文件包含在[您的表单媒体中](https://docs.djangoproject.com/en/dev/topics/forms/media/#media-on-forms)

还要检查 的`media`属性`ModelAdmin`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-14T09:32:54.557

我通过这种方式解决它：

```
class CustomIndexDashboard(Dashboard):
    class Media:
        js = ('admin/js/vendor/jquery/jquery.min.js', 'admin/js/jquery.init.js') 
```

# winapi - x86 程序集 (masm32) - 我可以在 windows xp 上使用 int 21h 来打印东西吗？

> ID：10583657
> 
> 赞同：2
> 
> 时间：2012-05-14T12:47:35.393
> 
> 标签：winapi, assembly, x86, masm, masm32

只是想知道，关于我的帖子**Alternatives to built-in Macros**，是否可以通过使用**int 21h** windows API来避免使用*StdOut*宏？如：

 **```
.data
       msg dd 'This will be displayed'
;original macro usage:
invoke StdOut, addr msg
;what I want to know will work
push msg 
int 21h ; If this does what I think it does, it should print msg 
```

是否存在这样的事情（如使用 int 21h 打印东西），或者确实存在类似的事情，但不完全是 int 21h。还是我完全错了。

有人可以为我澄清一下吗？

谢谢，

程序

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T12:49:08.033

中断 21h 是**MS-DOS**函数的入口点。

例如，要在标准输出上打印某些内容，您必须：

```
mov ah, 09h  ; Required ms-dos function
mov dx, msg  ; Address of the text to print
int 21h      ; Call the MS-DOS API entry-point 
```

字符串必须以“$”字符结尾。

但：

*   您不能在 Windows 桌面应用程序中使用中断（它们仅适用于设备驱动程序）。
*   如果您需要调用 MS-DOS 函数，您必须编写一个**16 位应用程序。**

然后......是的，你不能用它来打印消息，不存在这样的东西：你必须调用操作系统函数来打印你的消息，并且它们不能通过中断获得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:51:20.257

DOS 中断不能在 Windows 的保护模式下使用。

您可以使用[`WriteFile`](https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-writefile)Win32 API 函数写入控制台，或改用 MASM 宏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-17T09:47:53.710

其他说您不能在 Windows 中使用中断的答案是完全错误的。如果你*真的*想要，你可以（不推荐）。至少在 32 位 x86 Windows 上存在`int 2Eh`基于 legacy 的系统调用接口。有关 x86 和 x86_64 Windows 上的系统调用机制的一些讨论，请参见此[页面](https://www.codemachine.com/article_syscall.html)。

这是一个非常简单的程序示例（使用 FASM 编译），该程序在 Windows 7 上使用`int 0x2e`（并在大多数其他版本上崩溃）立即退出：

```
format PE
NtTerminateProcess_Wind7=0x172
entry $
    ; First call terminates all threads except caller thread, see for details:
    ; http://www.rohitab.com/discuss/topic/41523-windows-process-termination/
    mov eax, NtTerminateProcess_Wind7
    mov edx, terminateParams
    int 0x2e
    ; Second call terminates current process
    mov eax, NtTerminateProcess_Wind7
    mov edx, terminateParams
    int 0x2e
    ud2    ; crash if we failed to terminate
terminateParams:
    dd 0, 0 ; processHandle, exitStatus 
```

但请注意，这是使用 Windows 的一种不受支持的方式：系统调用号经常更改，通常不能依赖。在[此页面上](http://j00ru.vexillium.org/syscalls/nt/32/)，您可以看到例如`NtCreateFile`在 Windows XP 上调用系统调用号`0x25`，而在 Windows Server 2003 上已经对应于`NtCreateEvent`，而在 Vista 上它是`NtAlpcRevokeSecurityContext`。

进行系统调用的受支持（尽管文档不多）方式是通过[Native API](https://social.technet.microsoft.com/wiki/contents/articles/11831.the-windows-native-api.aspx)库的函数，`ntdll.dll`.

But even if you use the Native API, "printing things" is still very version-dependent. Namely, if you have a redirect to file, you must use `NtWriteFile`, but when writing to a true console window, you [have to use LPC](https://stackoverflow.com/a/45460961/673852), where the target process depends on Windows version.**

# c# - 如何将包含 UDT 的 SAFEARRAY 的 IDL 结构编组到托管代码

> ID：10583661
> 
> 赞同：0
> 
> 时间：2012-05-14T12:47:56.677
> 
> 标签：c#, c++, com, marshalling, atl

我有一个用这个 IDL 代码定义的 COM 库：

```
struct T_GPSParamsMap
{
  BSTR  Key;
  BSTR  Value;    
}T_GPSParamsMap;

struct T_FwClient
{
  BSTR                      Alias;
  SMSFilterActionEnum       Action;
  BSTR                      Text;
  int                       ToCall;
  int                       ToState;
  SAFEARRAY(T_GPSParamsMap) GpsData;
} T_FwClient;

struct T_SMSAction
{
  int                       ActionID;
  SMSFilterActionEnum       Action;
  BSTR                      Text;
  BSTR                      Folder;
  BSTR                      DestAddress;
  int                       ToCall;
  int                       ToState;
  SAFEARRAY(T_GPSParamsMap) GpsData;

  VARIANT_BOOL          forwardToNotListed;
  SAFEARRAY(T_FwClient) FwClients;

} T_SMSAction;

[
object,
uuid(F7942BCA-5122-46BB-94DB-89F5071842E4),
dual,
oleautomation,
nonextensible,
helpstring("ISMSFilter Interface"),
pointer_default(unique)
]
interface ISMSFilterWrapper : IDispatch{
  [id(1), helpstring("method GetFilterResult")] 
  HRESULT Init([in] BSTR schema_file_path, [out, retval] long* pVal);

  [id(2), helpstring("method GetFilterResult")] 
  HRESULT ApplyFilter([in] T_SMS* sms, [out, retval] long* pVal);

  [id(3), helpstring("method GetFilterResult")] 
  HRESULT GetFilterResult([in, out] T_SMSAction* ret_val, [out, retval] long* pVal);
}; 
```

现在，我以这种方式在 c# 中使用它：

```
SMSFilterLib.T_SMS smsFilter = new SMSFilterLib.T_SMS();
SMSFilterLib.T_SMSAction smsRule = new SMSFilterLib.T_SMSAction();

smsFilter.CalledParty = Convert.ToString(RadioID);
smsFilter.CallingParty = "1";
smsFilter.Text = Text;

m_smsFilter.ApplyFilter(ref smsFilter);

int RV = m_smsFilter.GetFilterResult(ref smsRule); 
```

最后一行引发异常（从意大利语翻译）：

> HResult = -2146233054
> 
> “System.TypeLoadException”类型的第一次机会异常无法编组“SMSFilterLib.T_SMSAction”类型的归档 GpsData：不支持此类型的编组。

这个 COM 库用于旧的 VB6 应用程序并且运行良好..

我已经使用 Visual Studio 的标准 CCW 将它导入到 c# 中（通过引用添加它），但它可能需要自定义 CCW。

有人可以给我一些建议如何使用它吗？

问候，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:28:18.557

而不是使用 Visual Studio“添加引用窗口”添加 COM 引用，而是使用 tlbimp.exe 创建一个互操作程序集

当通过 Visual Studio 添加 COM 库时，它会通过 tlbimp 创建其定义，并将“将 SAFEARRAY 导入为 System.Array”的开关 /sysarray 传递给它。

不要使用 VS，而是手动使用 tlbimp 而不通过该开关：

tlbimp.exe COM_DLL_NAME.dll /out:INTEROP_ASSEMBLY_NAME.dll

它将创建专门的类型数组：

```
 [Guid("4162E179-7E99-4783-95D9-DA9A0B3BE568")]
  public struct T_SMSAction
  {
    public SMSFilterActionEnum Action;
    public int ActionID;
    public string DestAddress;
    public string Folder;
    public short forwardToNotListed;
    public T_FwClient[] FwClients;
    public T_GPSParamsMap[] GpsData;
    public string Text;
    public int ToCall;
    public int ToState;
  } 
```

问候。

# ruby-on-rails - 用于 Rails 的 Twitter Bootstrap Gems 之间的比较

> ID：10583662
> 
> 赞同：22
> 
> 时间：2012-05-14T12:47:58.650
> 
> 标签：ruby-on-rails, css, comparison, twitter-bootstrap

为 Rails 提供 Twitter Bootstrap 功能的不同 gem 的优点和/或缺点是什么？在撰写此问题时，Ruby Toolbox[列出了以下项目](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=twitter+bootstrap)：

*   [twitter-bootstrap-rails](https://www.ruby-toolbox.com/projects/twitter-bootstrap-rails)
*   [引导程序](https://www.ruby-toolbox.com/projects/bootstrap-sass)
*   [bootstrap_form](https://www.ruby-toolbox.com/projects/bootstrap_form)
*   [少导轨引导](https://www.ruby-toolbox.com/gems/less-rails-bootstrap)
*   [anjlab-bootstrap-rails](https://www.ruby-toolbox.com/gems/anjlab-bootstrap-rails)
*   [compass_twitter_bootstrap](https://www.ruby-toolbox.com/gems/compass_twitter_bootstrap)
*   [自举轨道](https://www.ruby-toolbox.com/gems/bootstrapped-rails)
*   [引导-sass-rails](https://www.ruby-toolbox.com/gems/bootstrap-sass-rails)
*   [引导生成器](https://www.ruby-toolbox.com/gems/bootstrap-generators)
*   [css-bootstrap-rails](https://www.ruby-toolbox.com/gems/css-bootstrap-rails)
*   [twitter-bootstrap-markup-rails](https://www.ruby-toolbox.com/gems/twitter-bootstrap-markup-rails)
*   [耳廓](https://www.ruby-toolbox.com/gems/fennec)
*   [引导导轨](https://www.ruby-toolbox.com/gems/bootstrap-rails)
*   [指南针引导](https://www.ruby-toolbox.com/gems/compass-bootstrap)
*   [自举](https://www.ruby-toolbox.com/gems/bootstrapped)

甚至其他一些提供部分功能（例如生成表单）。这些宝石有何不同？

PS 如果合适，请在单独的答案中写下每颗宝石，以便为每颗宝石投票。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T04:04:57.127

这些 gem 使用各种方法将 twitter 引导程序引入到您的 Rails 应用程序中。

引自一篇关于该主题的优秀博客文章[Twitter Bootstrap、Less 和 Sass：了解 Rails 3.1 的选项](http://rubysource.com/twitter-bootstrap-less-and-sass-understanding-your-options-for-rails-3-1/)：

> *   通过 Rails 引擎使用原始的 Less 代码（less-rails-bootstrap 或 twitter-bootstrap-rails）
> *   将翻译后的 Sass 代码直接复制到您的应用程序中（sass-twitter-bootstrap），或者
> *   通过 Rails 引擎（bootstrap-sass 或 bootstrap-rails）使用翻译后的 Sass 版本。

确定您最喜欢哪种方法，将帮助您决定使用哪种宝石。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-17T08:44:20.413

我使用 anjlab-bootstrap-rails。

*   它有这些好处： 它的发展非常活跃。
*   他们最近发布了第三个版本，其中包括最新的 twitter bootstrap 3。
*   它也适用于 rails4。
*   bootstrap3 的一个重要方面是图标从 .png 迁移到了很棒的字体文件。

总的来说，我对此感到满意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-14T20:31:05.133

我试过***anjlab-bootstrap-rails***，因为我想用**Bootstrap 3.0 RC1**和**Rails 4**开始一个新的原型项目。

我对 turbolinks 有一些问题，并且引导 javascript 不适用于导航栏中使用的下拉组件。

经过一些搜索和一些调试后，我可以*将 javascript include 标签移动到*html 布局页面的 head 部分。

这个 gem 的一个优点是它不包含图标，您可以选择任何您想要的集合，例如 glyphicons 或 awesome-font。

# spring - spring security - 如何在自定义 SPEL 方法中修改 @PostAuthorize 的返回对象？

> ID：10583668
> 
> 赞同：2
> 
> 时间：2012-05-14T12:48:20.487
> 
> 标签：spring, spring-security, spring-3

我希望过滤服务方法返回的集合。此过滤将涉及调用另一个服务方法，因此我不打算这样做，因为它会为集合的每个元素`@PostFilter`调用注释内的表达式。`SPEL`相反，我使用`@PostAuthorize`如下：

```
@PostAuthorize("canAssignToUser(returnObject)")
List<UserInfo> getUsers(int userId); 
```

在 中`canAssignToUser`，我试图从传递给它的返回列表中删除用户。显然，这是一个问题，修改返回的列表有一些限制。如何使用方法级注释修改从方法返回的列表，并且不对列表的每个元素调用 SPEL 表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:44:53.180

`@PostAuthorize`用于评估值，因此`boolean`拦截器不会将返回值传递给表达式，（看[这里](https://github.com/SpringSource/spring-security/blob/master/core/src/main/java/org/springframework/security/access/expression/method/ExpressionBasedPostInvocationAdvice.java#L28)）。您在不检查每个元素的情况下删除元素的方法是什么？（就像`@PostFilter`那样）

如果您想使用 Spring Security 进行过滤，我认为您别无选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T05:17:06.790

您可以根据需要修改返回的对象。即使拦截器没有返回您传递的对象，它也会收到有关对象更改的通知。最终返回的对象被修改。（注意：里面的自定义安全方法`@PostAuthorize`只能返回布尔值。）

```
public class CustomMethodSecurityExpressionRoot extends SecurityExpressionRoot implements MethodSecurityExpressionOperations {

    public CustomMethodSecurityExpressionRoot(Authentication authentication) {
        super(authentication);
    }

    public boolean canAssignToUser(Object returnObject) {
        // do modifications to returnObject
        return true;
    } 
```

getUsers() 方法在评估后返回修改后的列表`@PostAuthorize("canAssignToUser(returnObject)")`。

# ubuntu - 安装 Ubuntu 12.04 后，Rspec 速度非常慢

> ID：10583669
> 
> 赞同：14
> 
> 时间：2012-05-14T12:48:24.127
> 
> 标签：ubuntu, rspec

在我的机器上安装最新的 Ubuntu 12.04 后，我所有的 rails 应用程序的所有 rspec 测试都运行得非常慢。我的一个同事也有同样的问题。

有人知道它可能是什么吗？真的很烦...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T18:38:01.717

我的规格比在 Mac OSX 上运行 Vagrant 的同事要长 4 倍。我发现[这篇文章](http://adamthedeveloper.blogspot.com/2011/12/ubuntu-mysql-slow-rspec-tests.html)似乎解决了这个问题。显然任何使用 ext4 的人都会遇到这种情况，除非他们按照博客文章中的说明进行操作：

> 在您喜欢的编辑器中打开您的 /etc/fstab 文件（作为 sudo）。
> 
> 查找描述您正在运行 Ubuntu 的分区的行。例如：
> 
> UUID=f54ae48f-7525-4b18-92bf-dbe5b1fb9be6 / ext4 错误=remount-ro 0 1
> 
> 添加一个 barrier=0 选项，所以它现在看起来像这样：
> 
> UUID=f54ae48f-7525-4b18-92bf-dbe5b1fb9be6 / ext4 屏障=0,errors=remount-ro 0 1

# python - 如何在python中导入sikuli模块？

> ID：10583682
> 
> 赞同：4
> 
> 时间：2012-05-14T12:49:25.157
> 
> 标签：python, sikuli

我无法让 sikuli+python 单元测试正常工作，我很乐意提供帮助。我在互联网上进行了广泛搜索，但没有任何有用的东西。我的python知识非常有限，我想这无济于事......

我正在使用 win7 32、sikuli 1.0 rc3 (r905)、python 2.7.3

我正在尝试通过 python 开始运行 sikuli 单元测试（不使用命令行，就像使用 python gui 运行的 python 脚本）。除其他外，我已遵循此处显示的说明：http: [//sikuli.org/docx/globals.html](http://sikuli.org/docx/globals.html) 和此处：[https ://answers.launchpad.net/sikuli/+faq/1804](https://answers.launchpad.net/sikuli/+faq/1804)

我的 sikuli 脚本（名称：**slidelyChromeUnitTest2.sikuli**）是这样开始的（剩下的没关系，因为它卡在第一行）：

```
from sikuli import *
import unittest 
```

我的 python 脚本（名称：**SikuliTestRunner.py**）看起来像这样：

```
import sys

mySikuliPath = "D:\\Program Files\\Sikuli X\\slidelyChromeUnitTest2.sikuli"
if not mySikuliPath in sys.path: sys.path.append(mySikuliPath)

import slidelyChromeUnitTest2 
```

当我运行 python 脚本时，我得到的是：

> 回溯（最后一次调用）：文件“D:\Python27\SikuliTestRunner.py”，第 6 行，在 import slidelyChromeUnitTest2 文件“D:\Program Files\Sikuli X\slidelyChromeUnitTest2.sikuli\slidelyChromeUnitTest2.py”，第 1 行，在从 sikuli 导入 * ImportError：没有名为 sikuli 的模块

而且我无法克服那个错误......我做错了什么？

谢谢你，伊兰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T16:22:51.303

这是你不能的 Jython。 [http://doc.sikuli.org/devs/system-design.html](http://doc.sikuli.org/devs/system-design.html)

编辑：更新了链接，删除了死帖参考。

# ruby-on-rails - 为什么 Heroku 不使用“Heroku db: pull”下载数据库更新？

> ID：10583691
> 
> 赞同：0
> 
> 时间：2012-05-14T12:50:07.710
> 
> 标签：ruby-on-rails, ruby, sqlite, postgresql, heroku

我已经运行 'heroku db:push' 来下载 heroku db 更新，它显示错误：

taps load error: no such file to load --sqlite3
您可能需要安装或更新 taps gem 才能使用 db 命令。
在大多数系统上，这将是：
sudo gem install taps

我已经安装了 heroku 2.25.0，点击 0.3.24 并更改了 Gemfile，将 gem sqlite3 替换为：

组：开发，：测试做
gem'sqlite3'
结束
组：生产做
gem'pg'
结束

我认为这是 sqlite e postgresql 之间的兼容性数据库问题。

是否可以？或者可以是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:05:31.500

首先，通过运行确保你的 gem 是最新的`bundle install`。如果一切都很好，那不会有什么坏处，所以你不妨确定一下。

之后，您应该能够`db:pull`使用以下代码段将副本拉取到本地计算机：

```
bundle exec heroku db:pull sqlite://local.db --app my_app 
```

如果由于某种原因这不起作用，您可以在下拉数据库的同时更改您的 Gemfile——然后您可以根据需要将其更改回来。

```
group :development, :test do
  gem 'sqlite3'
  # add this next line and run 'bundle install' until you get db:pull to work
  gem 'pg'
end
group :production do
  gem 'pg'
end 
```

（我相信这会起作用，虽然我个人没有尝试过。如果有问题，请回复。）

*最后，如果您在本地计算机上*运行 ruby​​ 1.9.3，那么在拉取和推送数据库时会出现一些问题——但只有在您使用`db:push`. [如果您对此有疑问，请点击此处的解决方案链接。](https://stackoverflow.com/questions/8151571/error-when-pushing-data-to-heroku-time-zone-displacement-out-of-range/10129060#10129060)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:58:52.097

当您运行该`heroku`命令时，它会在您的开发机器上本地运行。所以`development`你的 Gemfile 的组被使用：

```
group :development, :test do
  gem 'sqlite3'
end 
```

由于它包含`sqlite3`，因此您需要将`sqlite3`gem 安装在您的开发机器上。您是否已运行`bundle install`在本地安装此 gem？您可能需要`heroku`在调用中运行该命令`bundle exec`以确保加载 gem：

`bundle exec heroku db:pull`.

最后，如果你想下载 Heroku DB，你应该使用`db:pull`. 而不是`db:push`.

# python - 将具有相同字段值的对象分组

> ID：10583697
> 
> 赞同：3
> 
> 时间：2012-05-14T12:50:42.377
> 
> 标签：python, django, django-queryset

我有两个这样的模型：

```
class Schedule(models.Model):
    name = models.CharField(_('name'), blank=True, max_length=15)

class Day(models.Model):
    DAYS_OF_THE_WEEK = (
        (0, _('Monday')),
        (1, _('Tuesday')),
        (2, _('Wednesday')),
        (3, _('Thursday')),
        (4, _('Friday')),
        (5, _('Saturday')),
        (6, _('Sunday')),
    )
    schedule = models.ForeignKey(Schedule, blank=True, null=True, verbose_name=_('schedule'))
    day = models.SmallIntegerField(_('day'), choices=DAYS_OF_THE_WEEK)
    opening = models.TimeField(_('opening'), blank=True)
    closing = models.TimeField(_('closing'), blank=True) 
```

时间表可能有两个 Day 对象，如下所示：

天(schedule=1, day=0, opening=datetime.time(7, 30), close=datetime.time(10, 30)) Day(schedule=1, day=0, opening=datetime.time(12, 30), 关闭=datetime.time(15, 30))

就像同一天的不同班次一样。

如果我现在迭代它们，我将得到第 0 天的两个条目，就像这样 [日程中的每一天] [0, 0, 1, 2, 3, 4, 5, 6]

如何创建一个查询集，以便将同一天组合在一起并保留它们的属性？

```
[day for day in schedule]
[0 (two entries), 1, 3, 4, 5, 6] 
```

也许像

```
[id: [day], id: [day]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T07:48:25.547

我最终使用的代码是这样的：

```
from itertools import groupby

day_set = store.schedule_set.all()[0].day_set.all()
    schedule = dict()
    for k, v in groupby(day_set, lambda x: x.day):
        schedule[k] = list(v) 
```

并将时间表发送到模板进行渲染，这就像一个魅力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T12:58:54.590

[您可以使用{% regroup %}](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#regroup)或`{% for %}`带有[{% ifchanged %}](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#ifchanged)标签的-loop在模板级别对它们进行分组。

在 Python 代码中使用[groupby](http://docs.python.org/library/itertools.html#itertools.groupby)。

# jakarta-ee - Java EE 会话问题 - IE/Chrome 和 Firefox 上的不同行为

> ID：10583698
> 
> 赞同：1
> 
> 时间：2012-05-14T12:50:46.170
> 
> 标签：jakarta-ee, session-variables

我目前正在开发一个部署在 OracleAS 服务器上的 Java EE 应用程序（Struts 1.1）（相当古老的技术......）

从页面上的会话重新加载的数据存在问题。

简而言之，根据浏览器的不同，会话的行为是不一样的。我一直在尝试在 Eclipse + Tomcat 上调试它，并且我看到了这种行为（假设也有相同的错误，我猜 OracleAS 上的行为是相同的）：

在 Firefox 上，我第一次打电话

```
session.setAttribute("myobject",myform); 
```

我检查时指出的参考是：

**com.project.ObjectForm@1a0e2d1[.....]**

在下一页上，当我加载相同的对象（从未再次使用 setAttribute 修改过）时：

```
ObjectForm myform = session.getAttribute("myobject"); 
```

参考现在

**com.project.ObjectForm@1a0e2d1[.....]**

值相同，子对象的引用也一样，一切正常。

在 IE 和 Chrome 上，当我 setAttribute(...) 和**com.project.ObjectForm@1ee2c5**当我使用 getAttribute(...) 在下一页再次加载时，引用更改（ **com.project.ObjectForm@ad8e84** ），页面测试结果与具有相同用户数据等的 Firefox 完全相同...），更糟糕的是，一些数据实际上丢失了！ObjectForm 的字符串示例之一从*forward=success*到*forward=*，因此存在错误！

 ****我的第一个问题是：这一切正常吗？为什么哦，为什么会话（服务器端）的行为会因浏览器而异，我不是会话专家，所以我假设我在这里缺乏知识？

第二个是：除了我自己的 setAttribute 和 getAttribute 之外，我的数据是否真的有可能被更改（因为在 Firefox 上的引用似乎是相同的，如果我要更改对象，它会在我的会话中直接更改吗？ )?

我检查了通过的浏览器数据，jsessionid 在这两种情况下都很好，所以它似乎不是来自这里。****

# python - FPS 与 Pyglet 显示器刷新率的一半

> ID：10583701
> 
> 赞同：3
> 
> 时间：2012-05-14T12:50:58.730
> 
> 标签：python, pyglet

我是使用 Pyglet 的新手，我编写了一个小程序，可以在屏幕上移动一个球。现在我很难建立 60 fps 的稳定帧速率。虽然 Pyglet 应该与我的显示器的 60Hz 刷新率同步，但 Pyglet 将我的 fps 设置为我刷新率的一半（例如，当 60Hz、30 fps 时）。我的代码中是否有问题导致这种情况？

```
import pyglet
import physicalobject
import random
from pyglet.window import mouse

pyglet.resource.path = ['./resources']
pyglet.resource.reindex()

ball_image = pyglet.resource.image("ball2.png")

#sets clock format
fps_display = pyglet.clock.ClockDisplay(format='%(fps).2f fps')

def center_image(image):
    image.anchor_x = image.width/2
    image.anchor_y = image.height/2

center_image(ball_image)
ball = physicalobject.PhysicalObject(img=ball_image, x = 400, y = 300)
ball.scale = .2
ball.velocity_x = random.randint(-4,4)*150
ball.velocity_y = random.randint(-4,4)*150

#Calls update function to set new ball position based on velocity
def update(dt):
     ball.update(dt)

@window.event
def on_mouse_drag(x, y, dx, dy, button, modifiers):
     ball.x = x
     ball.y = y
     ball.velocity_x = dx * 20
     ball.velocity_y = dy * 20

@window.event
def on_draw():
     window.clear()
     ball.draw()
     fps_display.draw()

def main():
     pyglet.clock.schedule_interval(update, 1/120.0)
     pyglet.app.run()

if __name__ == '__main__':
     main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:06:14.343

```
import pyglet
from time import time, sleep

class Window(pyglet.window.Window):
    def __init__(self, refreshrate):
        super(Window, self).__init__(vsync = False)
        self.frames = 0
        self.framerate = pyglet.text.Label(text='Unknown', font_name='Verdana', font_size=8, x=10, y=10, color=(255,255,255,255))
        self.last = time()
        self.alive = 1
        self.refreshrate = refreshrate

    def on_draw(self):
        self.render()

    def render(self):
        self.clear()
        if time() - self.last >= 1:
            self.framerate.text = str(self.frames)
            self.frames = 0
            self.last = time()
        else:
            self.frames += 1
        self.framerate.draw()
        self.flip()

    def on_close(self):
        self.alive = 0

    def run(self):
        while self.alive:
            self.render()
            event = self.dispatch_events()
            sleep(1.0/self.refreshrate)

win = Window(23) # set the fps
win.run() 
```

请注意缺少时钟功能。另外，尝试设置`vsync = True`和删除`sleep(1.0/self.refreshrate)`，这会将刷新率锁定到您的显示器。

另外，请注意，我不使用`pyglet.app.run()`锁定渲染过程，`self.dispatch_events()`而是调用..它实际上并没有做任何事情，除了让图形“轮询”并继续前进，没有它.. pyglet 等待轮询发生，这`pyglet.app.run()`通常会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:38:06.790

Pyglet 在某些系统上根本无法正确处理它，您必须禁用应用程序窗口的 vsync 才能使其工作。这是一个示例脚本，您可以运行它来了解它的工作原理：

```
import pyglet

# Show FPS
fps = pyglet.clock.ClockDisplay()

# The game window
class Window(pyglet.window.Window):
    def __init__(self):
        super(Window, self).__init__(vsync = False)
        # Run "self.update" 128 frames a second and set FPS limit to 128.
        pyglet.clock.schedule_interval(self.update, 1.0/128.0)
        pyglet.clock.set_fps_limit(128)

    # You need the dt argument there to prevent errors,
    # it does nothing as far as I know.
    def update(self, dt): 
        pass

    def on_draw(self):
        pyglet.clock.tick() # Make sure you tick the clock!
        self.clear()
        fps.draw()

# Create a window and run
win = Window()
pyglet.app.run() 
```

# php - JavaScript 关联数组到 PHP

> ID：10583709
> 
> 赞同：1
> 
> 时间：2012-05-14T12:51:29.540
> 
> 标签：php, javascript, jquery, arrays, codeigniter

'我有 JavaScript 关联数组名称'选项'

```
<script>
options[dynamickey] = Number; 
</script> 
```

我只想使用jQuery post将此数组发送到codeigniter模型

```
<script>
$.('link',options);
</script> 
```

但问题是我不知道如何提取这个数组的每个键和值（选项）。我的带有数据的 JavaScript 数组看起来像这样

```
 <script>
  options { 
     id => 135,
     'Chestnut' => 11,
     'Cinamon' => 1
   }
</script> 
```

在codeigniter（PHP）模型中我只想像这样提取这个数组

```
<?php
 $id = $this->input->post('id');
//below variable names and data should be dynamic from that javascript array
$chesnut= $this->input->post('dynamic value');
?> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:59:26.617

在你的 jQuery 中，你做一个帖子：

```
var options = { 
    'id' : 135,
    'Chestnut' : 11,
    'Cinamon' : 1
}

$.post('example.com/index.php/firstsegment/secondsegment',options,function(data){...}); 
```

在接收此帖子的 CodeIgniter 控制器中：

```
public firstsegment extends CI_Controller {

    public function secondsegment(){
        $data = $this->input->post();

        if($data){
            /*
            $data will contain this:
            $data = array(
                'id' => '135',
                'Chestnit' => '11',
                'Cinamon' => '1'
            );
            */
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:55:02.857

有点罕见的要求坦率。您想要将可能由您的系统呈现的内容发送到您的系统吗？

尽管如此。[在jQuery ajax](http://api.jquery.com/jQuery.ajax/)中添加 a`{ data : options }`以及现有的常用值。

**例子：**

```
var options = { 
    'id' : 135,
    'Chestnut' : 11,
    'Cinamon' : 1
}

$.ajax({
  type: "POST",
  url: "some.php",
  data: options
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

# asp.net - 避免在 ValidationSummary 中出现相同的消息

> ID：10583712
> 
> 赞同：0
> 
> 时间：2012-05-14T12:51:39.853
> 
> 标签：asp.net, requiredfieldvalidator

我有一个包含几个`RequiredFieldValidators`.

目前，当未填写必填字段时，文本框旁边会出现一个“*”，然后是`ValidationSummary`. 但是，例如，当有 3 个必填字段未完成时，我的`ValidationSummary`外观如下：

*   必需的
*   必需的
*   必需的

我怎么能只有一个-required？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:19:37.577

你不能。对此的最佳解决方案是为错误消息属性设置输入名称（名称、网站等）。然后用户可以直观地确定需要填写哪个字段。

# android - Android：使用 NDK 构建原生 GUI 应用程序？

> ID：10583713
> 
> 赞同：13
> 
> 时间：2012-05-14T12:51:46.553
> 
> 标签：android, c++, user-interface, native

独立于它是否有意义，它是否是创建 Android 应用程序的好方法：出于（教育/个人/其他）原因，我想使用 NDK 在 C++ 中创建一个具有图形用户界面的 Android 应用程序。

到目前为止，我发现了一些关于 NDK、如何创建本机库以及如何从 Java 应用程序中访问它们的信息。但我真正要寻找的是一些信息，如何从我的 C++ NDK 应用程序中创建视图并将图形用户界面元素添加到该视图。

有什么想法和提示可以做到这一点，或者在哪里可以找到更多关于此的信息/HOWTO？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-29T16:39:48.013

[Juce](http://www.juce.com/)是一个出色的 C++ UI 框架，在 Android 上运行良好。

它可以在 GPL 或付费商业许可下使用。社区相当活跃，作者非常友好和乐于助人。我发现在 Windows 上使用 NDK 工具构建起来相对容易。

警告 - 似乎 Android 对他们来说不是一个高优先级的平台，所以在撰写本文时缺少一些东西（例如对硬件按钮的支持）。不过，根据我的经验，UI 框架在 Android 上运行良好，这就是您的问题所在。

# iphone - Instagram 等应用中使用的存储类型

> ID：10583716
> 
> 赞同：0
> 
> 时间：2012-05-14T12:52:05.773
> 
> 标签：iphone, ios, xcode, instagram

我想制作一个像 Instagram 这样的应用程序，但问题是在哪里存储所有文本和图像数据，我在没有可用连接时使用 Instagram，然后应用程序将显示最后的提要，即使应用程序是新打开的（不是来自后台）。它使用核心数据或 sqlite。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:10:07.947

不久前，我在 instagram 上看到了一个扩展演示文稿，他们谈论了他们是如何开始的，使用了什么以及他们如何应对挑战。

请参阅链接：[http ://www.scribd.com/doc/89025069/Mike-Krieger-Instagram-at-the-Airbnb-tech-talk-on-Scaling-Instagram](http://www.scribd.com/doc/89025069/Mike-Krieger-Instagram-at-the-Airbnb-tech-talk-on-Scaling-Instagram)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:38:49.047

目前尚不清楚 Instagram 使用什么。使用你觉得最舒服的任何东西。使用任何存储技术，一切皆有可能，尽管有些技术可能比其他技术更适合。此外，关于您关于“核心数据或 sqlite”的问题，您可以使用带有 SQLite 数据库的核心数据作为后端（比访问原始 SQL 更容易）。您还可以将其他后端与 Core Data 一起使用：二进制和 XML。

# java - 为什么我得到 Class not found 异常

> ID：10583717
> 
> 赞同：1
> 
> 时间：2012-05-14T12:52:18.083
> 
> 标签：java, classpath, classnotfoundexception

我正在使用`DeferredTextImpl`Class 并且 eclipse 似乎没有抱怨它但是当我运行我的项目时我得到运行时异常`.... Class not found exception for DeferredTextImpl ..`

当我搜索类文件时，我发现它`rt.jar`肯定应该在类路径上。我还检查了项目中的构建路径，`properties->Java build path`可以在最底部看到 JRE 系统库。当我扩展它时。我可以看到`rt.jar`。这意味着它在类路径上，对吗？

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:56:19.877

运行代码时，Eclipse 中的*构建路径与**类*路径之间存在差异。构建路径用于编译您的代码。类路径是您的应用程序在运行时所拥有的。

构建路径配置为*Project -> Properties -> Java Build Path*

类路径配置为*Run -> Run Configurations -> Classpath*

在您的情况下，您还应该检查（如其他人所提到的），*运行配置下的**JRE*选项卡是否指向与构建路径中相同的 JRE。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:56:09.220

检查运行时与编译时类的 Xerces jar 版本。确保在运行时有一个 Xerces2 jar。我怀疑 rt.jar 中的类与您的应用程序正在寻找的类相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T12:56:48.970

此类是特定 DOM 实现 (Apache Xerces) 的一部分。它不是公共 Java API 的一部分，如果您确实在一个 JVM 的运行时类库中找到了它，这并不能保证它会在其他的。如果需要显式使用 Xerces，则需要在运行时类路径中显式包含 Xerces 库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T12:58:39.890

您可以在运行代码时通过显式添加带有 -jar 选项的 rt.jar 来尝试运行代码吗？如果这可行，则意味着 Eclipse 中的 rt.jar 不在类路径中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-19T16:38:01.313

右键单击项目 > java 构建路径 > 库删除 JRE 并添加指向 JDK 文件夹的库，在我的例子中是 C:\Program Files\Java\jdk1.7.0_55。但在此之前，也对安装了 java 的 JRE 做同样的事情。Windows > java > 安装的 JRE 。希望这会有所帮助*

# php - 将多个正则表达式（匹配和替换）组合成一个正则表达式；优化速度

> ID：10583718
> 
> 赞同：1
> 
> 时间：2012-05-14T12:52:20.710
> 
> 标签：php, regex, preg-replace, preg-match

我有一个 PHP preg_match 函数实现，我将一个已知的 RegEx 与另一个变量的清理版本进行比较。我正在使用多个 preg_replace 等命令进行清理。我想知道是否有另一种方法来执行相同的逻辑，它更小（可能只涉及一个 reg 匹配）和更快（匹配几次比只做一次更复杂）。

这是我当前的代码：

```
$url_regex_to_match = /SOME_REGEX/; //I will pick this from DB

$matches = array();

//Following to replace http://www.google.com into http://google.com
preg_match('/(http.?):\/\/(www\.)?(.*)/i', $url, $matches);
if(sizeof($matches)==4) {
    $url = $matches[1]."://".$matches[3]; 
}
//Incase the preg_match is false (http is missing), we still need to remove www.
$url = preg_replace("/(^\*?|\/\/)www\./i","$1",$url);

//It converts google.com/a#mno into google.com/a
$url = preg_replace('/^(.*)(#.*)$/', '$1', $url);
//It converts pages like google.com/index.htm into google.com/
$url = preg_replace('/^(.*\/)((home|default|index)\..{3,4})(\?.*)*$/', '$1$4', $url);
//This will replace google.com/ into google.com
if(substr($url, -1) == "/") {
    $url = substr($url, 0, -1);
}

//This is just to match the new URLs with the pattern I have
$boolean = preg_match($url_regex_to_match , $url); 
```

Boolean 的期望值当然是真/假。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:13:05.573

我想知道你到底想要什么。我的意思是提取域可以在一个新的正则表达式中完成，如下所示：

```
preg_replace/http[s]*:\/\/[\w\d\.-]*\.([\d\w-]*)\..+\/(.*)/i,"$1") 
```

所以基本上我的回答是：为您的问题构建*一个*正则表达式而不是多个。我看不出还有什么办法，因为另一种方式基本上需要计算机理解正则表达式搜索的内容并将其放在一起（这很可能会导致正则表达式变慢）。如果我的解决方案对您没有帮助，请在评论中告诉我。

编辑：对不起，我澄清了我的正则表达式。

# image-processing - 并行计算图像的直方图

> ID：10583719
> 
> 赞同：2
> 
> 时间：2012-05-14T12:52:21.630
> 
> 标签：image-processing, mpi, parallel-processing

如何使用并行计算计算图像的直方图？串行图像的直方图很容易，但我对并行计算它一无所知。

任何想法、算法、源代码或有用的链接将不胜感激。

我正在使用 MPI。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T16:19:42.287

这是想法：

`MPI_Scatter()`首先，使用or `MPI_Scatterv()`（使用 scatterv 可以将图像分发到不是行数/列数的整数除数的多个进程）按行（如果您在 C 中编程）或按列（如果您在 Fortran 中编程）分散图像）。

然后每个进程计算其图像部分的直方图。`local_histogram`让直方图存储在256 个元素的整数数组中（我假设图像是灰度的）。

在最后一步，使用求和进行全局归约`MPI_Reduce()`：

```
MPI_Reduce(local_histogram, histogram, 256, MPI_INT, MPI_SUM, 0, MPI_COMM_WORLD); 
```

之后，完整的全局直方图将在`histogram`0 级进程的数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:54:53.043

[我只能猜测你在寻找什么。让我给你一个算法的简要概述：]

每个节点计算一个直方图。在最后一步中，通过将它们加在一起来减少它们。最终的总和可以根据工作量一次又一次地拆分。

这种方法类似于[map/reduce](http://en.wikipedia.org/wiki/Map_reduce)。

# iphone - 检测移动的 UIImageView 是否被触摸

> ID：10583722
> 
> 赞同：2
> 
> 时间：2012-05-14T12:52:35.040
> 
> 标签：iphone, ios, uiimageview, touchesbegan

我有一个`UIImageView`在动画循环中。我想检测它是否被触摸并打印出一条消息`NSLog`。如果它被触摸，这个想法将是执行另一个动画，但目前我无法检测到它是否已经被触摸。已启用用户交互。这是代码：

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    UIView *touchedView = [touch view];
    if (touchedView == imgSun) {
        NSLog(@"Sun touched");
        [self spinSun];
    } else if (touchedView == imgBee) {
        NSLog(@"Bee touched");
    } else if (touchedView == imgClouds) {
        NSLog(@"Clouds touched");
    }
} 
```

动画方法：

```
-(void) beeBobbing
{
    [UIView animateWithDuration:1.0f delay:0 options:(UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeat) animations:^{
        CGPoint bottomPoint = CGPointMake(215.0, 380.0);
        imgBee.center = bottomPoint;
    } completion:^(BOOL finished) {

    }];    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:14:05.873

这可能是因为在动画期间默认禁用用户集成。

请参阅 animateWithDuration:delay:options:animations:completion: 文档：

在动画期间，对于正在动画的视图，用户交互暂时被禁用。（在 iOS 5 之前，整个应用程序都禁用了用户交互。）如果您希望用户能够与视图交互，请在 options 参数中包含 UIViewAnimationOptionAllowUserInteraction 常量。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html) [1](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

您可能只需将 UIViewAnimationOptionAllowUserInteraction 添加到传递给您的方法“beeBobbing”中的选项的值。

# ios - 如何使用 prepareForSegue 方法从视图控制器推送到导航视图控制器？

> ID：10583724
> 
> 赞同：3
> 
> 时间：2012-05-14T12:52:40.490
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, segue, ios5.1

我有一个项目，它有一个视图控制器作为初始屏幕，然后是一个嵌入在导航视图控制器中的视图控制器。我在第一个屏幕上还有一个按钮，我希望打开导航控制器屏幕。

我单击按钮，然后单击“连接检查器”，我将推送事件添加到该导航控制器，但没有发生 segue。请问我怎样才能实现它？

# 解决方案

最后经过一番研究，我设法让这件事发挥作用。这是我正在使用的代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSLog(@"Source Controller = %@", [segue sourceViewController]);
    NSLog(@"Destination Controller = %@", [segue destinationViewController]);
    NSLog(@"Segue Identifier = %@", [segue identifier]);

    if ([segue.identifier isEqualToString:@"mysegue"])
    {
        NSLog(@"coming here");

     SecondViewController *loginViewController = (SecondViewController *)segue.destinationViewController;

       //SecondViewController *navigationController = [[UINavigationController alloc]init];

        [self presentModalViewController:loginViewController animated:YES];

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:14:54.587

您确定导航控制器与嵌入式视图控制器的连接设置正确吗？第一个视图控制器应该连接到导航控制器，带有`Push`样式segue，导航控制器应该连接到第二个视图控制器，带有`Relationship`样式segue。

无论如何，Apple 的官方教程之一就是这样做的，因此您可以将您的代码与它进行比较，看看是否有区别：[您的第二个 iOS 应用程序](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/CreatingAddView/CreatingAddView.html#//apple_ref/doc/uid/TP40011318-CH6-SW1)。该`prepareForSegue`方法本身并不真正涉及触发segue。它只是在 segue 运行之前调用以准备新的视图控制器。

# javascript - 引用对象内的父变量

> ID：10583728
> 
> 赞同：2
> 
> 时间：2012-05-14T12:53:00.817
> 
> 标签：javascript, object

我正在处理一个 JavaScript 对象，其中声明了很多变量。我想要做的是引用父对象的另一个子对象。给定以下对象：

```
var clusters = {

    auxiliars: {
        environment         : "Development",
        local_storage_key   : "Cluster",

        iqns_class          : ".iqn",
        iqn                 : this.iqns_class.parent(),

        viewport            : $(window),

        viewport_width      : this.viewport.width(),
        viewport_height     : this.viewport.height(),

        plugin              : {
            containerID : "",
            first       : false,
            previous    : false,
            next        : false,
            last        : false,
            startPage   : 1,
            perPage     : 6,
            midRange    : 6,
            startRange  : 1,
            endRange    : 1,
            keyBrowse   : false,
            scrollBrowse: false,
            pause       : 0,
            clickStop   : true,
            delay       : 50,
            direction   : "auto",
            animation   : "fadeIn",
            links       : "title",
            fallback    : 1000,
            minHeight   : true,
            callback    : function(pages, items) {}
        }
    },

    set_local_storage_data: function(data_val) {
        return localStorage.setItem(auxiliars.local_storage_key, data_val);
    },

    get_local_storage_data: function() {
        return +(localStorage.getItem(auxiliars.local_storage_key) || 1);
    },

    set_environment: function(environment) {
        if(auxiliars.environment == "Development") {
            less.env = "development";
            less.watch();
        }
    },

    shop_iqns_selected_class: function() {
        if (auxiliars.viewport_width < 980) {
            $(auxiliars.iqns_class).each(function(index, element) {
                var element = $(element);
                $(auxiliars.iqn).on('click', function() {
                    if (element.hasClass('selected')) {
                        element.removeClass('selected');
                    } else {
                        element.addClass('selected');
                    }
                });
            });
        }
    },

    initiate_plugin: function(plugin_navigation, plugin_options) {
        var options = $.extend({}, auxiliars.plugin, plugin_options);
        return $(plugin_navigation).jPages(options);
    }

} 
```

你会注意到`this.viewport.width()`，我想指向`viewport`在同一个`auxiliars`对象中声明的变量。显然我得到了一个错误，但是我怎么能指向同一个对象的那个子值呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:56:58.400

在 JavaScript 中没有办法做到这一点。也就是说，无法引用使用对象字面量构建的“进行中”元素。

但是，您可以在后续的赋值语句中引用属性（和子属性）。

```
var clusters = {

    auxiliars: {
        environment         : "Development",
        local_storage_key   : "Cluster",

        iqns_class          : ".iqn",
        iqn                 : this.iqns_class.parent(),

        viewport            : $(window),
        // ...

clusters.auxiliars.viewport_width = clusters.auxiliars.viewport.width();
clusters.auxiliars.viewport_height = clusters.auxiliars.viewport.height(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T13:07:45.963

我认为最简单的方法是在方法中转换您的自动引用属性：

```
var clusters = {
  auxiliars: {
    viewport        : $(window),
    viewport_width  : function(){ return this.viewport.width() },
  }
}

clusters.auxiliars.viewport_width(); 
```

[检查 jsFiddle](http://jsfiddle.net/fguillen/A628S/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T13:01:33.493

您不能在同一对象文字的其他部分中引用新对象文字的一部分。您可以改为在单独的语句中构建这些部分：

```
var clusters = ...;
clusters.auxiliars.viewport_height = clusters.auxiliars.viewport.height();
clusters.auxiliars.viewport_width = clusters.auxiliars.viewport.width(); 
```

它不那么优雅，但我认为这是唯一的方法。

# java - 基于 xml 标签对值进行分组

> ID：10583731
> 
> 赞同：0
> 
> 时间：2012-05-14T12:53:08.150
> 
> 标签：java, xml, xml-parsing

我有一个带有标签的 xml 文件。

```
<ENVELOPE>
    <A>Hi
    </A>

    <A1>
        <A12>groupA</A12>
        <A13></A13>
    </A1>
    <B>
        <A>xxx</A>
    </B>
    <C>
        <A11>100</A11>
        <A13></A13>
    </C>
    <B>
        <A>yyy</A>
    </B>
    <C>
        <A11>1000</A11>
        <A13></A13>
    </C>
    <B>
        <A>zzz</A>
    </B>
    <C>
        <A11>100</A11>
        <A13></A13>
    </C>
    <A>Hello</A>
    <A1>
        <A12>groupC</A12>
        <A13></A13>
    </A1>
    <B>
        <A>rrr</A>
    </B>
    <C>
        <A11>10000</A11>
        <A13></A13>
    </C>
</ENVELOPE> 
```

我想以以下格式存储这些数据

```
Col Header A    A1         B   C-A11
           Hi   groupA    xxx   100   
           Hi   groupA    yyy   1000    
           Hi   groupA    zzz   100     
          Hello groupB    rrr   10000 
```

试过源代码：

```
 DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
  domFactory.setNamespaceAware(true); 
  DocumentBuilder builder = domFactory.newDocumentBuilder();
  Document doc = builder.parse("Response.xml");
  XPath xpath = XPathFactory.newInstance().newXPath();
  // XPath Query for showing all nodes value

  ArrayList names = new ArrayList();

  XPathExpression expr1 = xpath.compile("//A/text()");

  Object res = expr1.evaluate(doc, XPathConstants.NODESET);
  NodeList nod = (NodeList) res;

  for (int i = 0; i < nod.getLength(); i++) {
      System.out.print(i+":");
        System.out.println(nod.item(i).getNodeValue()); 
        if(!names.contains(nod.item(i).getTextContent().trim()))
            names.add(nod.item(i).getTextContent().trim());
 }

  NodeList nodeLst = doc.getElementsByTagName("C");

   int coun = nodeLst.getLength();
   String val[][] = new String[coun][2];
  for (int s = 0; s < nodeLst.getLength(); s++) {
     Node secNode = nodeLst.item(s);

     if (secNode.getNodeType() == Node.ELEMENT_NODE) {
       try
              {
                Element amtval = (Element) secNode;
                NodeList secval = amtval.getElementsByTagName("A11");
                val[s][0] = secval.item(0).getTextContent();
                    System.out.println("A11 :" + val[s][0]);

                NodeList lstNmElmntLst = amtval.getElementsByTagName("A13");
                val[s][1] = lstNmElmntLst.item(0).getTextContent();
                    System.out.println("A13 : " +val[s][1]);
              }
              catch(Exception ex){
                  ex.printStackTrace();
             }
     }
  }

   NodeList plamt = doc.getElementsByTagName("A1");

   int count = plamt.getLength();
   String val1[][] = new String[count][2];
  for (int s = 0; s < plamt.getLength(); s++) {
      Node secNode = plamt.item(s);

     //if (secNode.getNodeType() == Node.ELEMENT_NODE)
     {
       try
              {
                Element amtval = (Element) secNode;
                NodeList secval = amtval.getElementsByTagName("A12");
                val1[s][0] = secval.item(0).getTextContent();
                    System.out.println("A12 :" + val1[s][0]);

                NodeList lstNmElmntLst = amtval.getElementsByTagName("A13");
                val1[s][1] = lstNmElmntLst.item(0).getTextContent();
                    System.out.println("A13: " +val1[s][1]);
              }
              catch(Exception ex){
                  ex.getMessage();
             }
     } 
```

我得到低于输出

```
Hi      100     100
xxx     100         100
yyy     100         100
zzz     100         100
Hello   groupA  groupB
rrr     groupC  groupD 
```

1.  怎样才能得到上述格式。
2.  有没有可用于分组的参考资料？
3.  请提供任何逻辑来帮助我。在此先感谢， 中国 P.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T16:04:58.513

我当然不会在导航 Java 代码中尝试这样做——XSLT 解决方案会容易得多。我认为是这样的：

```
<xsl:for-each select="B">
  <tr>
    <td><xsl:value-of select="preceding-sibling::A[1]"/></td>
    <td><xsl:value-of select="preceding-sibling::A1[1]"/></td>
    <td><xsl:value-of select="child::A"/></td>
    <td><xsl:value-of select="following-sibling::C[1]/A11"></td>
  </tr>
</xsl:for-each> 
```

# iphone - 如何在类之间传输 NSManagedObject 子类？

> ID：10583736
> 
> 赞同：5
> 
> 时间：2012-05-14T12:53:20.670
> 
> 标签：iphone, objective-c, ios, core-data

我们已经创建了一个存储库层，用于与 Core Data 进行交互，它具有诸如 的方法`allItems()`，`addItem:(Item*)item`其中 item 是 NSManagedObject 子类。当我们需要保存一个项目时，我们调用存储库上的方法，将子类实例作为参数传递。但是，这不起作用，因为我们不能使用`init`初始化程序并且上下文隐藏在存储库中。

当您拥有这样的架构时，传输对象的最佳方式是什么？让 ItemDTO 绕过一个选项？或者有没有更好的方法来解决这个问题，比如根本不使用子类 NSManagedObject 而只使用有效的键/值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T20:55:47.577

我想说您使用的架构不适合核心数据。要继续使用它（你应该这样做），你必须做两件事之一。我假设您的“存储库层”是作为单例实现的，或者至少创建新托管对象的对象可以访问它。

*   将托管对象上下文公开给其他对象，通常作为存储库层上的属性。
*   让您的存储库层初始化并为您返回对象。这将涉及传入实体名称并取回适当实体类型或类的新托管对象。

如果您发现自己在与框架作斗争并提出过多的抽象，那么您做错了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T19:14:49.683

通常，您希望创建`NSManagedObject`子类的控制器具有指向`NSManagedObjectContext`. 这样，您确实可以调用初始化程序。

您尝试做的问题是，如果没有上下文，这些项目就无法存在。这是故意这样做的，以便 Core Data 知道您是在谈论新对象还是已经在持久存储中的对象。

您可以使用 DTO，但最终会产生大量重复，因此很快就会变得丑陋。在我看来，您应该考虑让您的控制器了解 Core Data 上下文，以便它可以正确地检索或初始化项目（托管对象）并基本上将其`NSManagedObjectContext`用作您的存储库层。

请记住，`NSManagedObjectContext`IS 是一个持久性抽象层，如果需要，您可以使用其他持久性存储实现来备份它，包括您自己的[自定义](https://developer.apple.com/library/mac/#samplecode/HTMLStore/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004009)实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T18:38:20.803

我~~编写了~~复制粘贴的示例项目，该项目从模型自定义类中隐藏了上下文：[分支 10583736](https://github.com/madmw/CoreDataQuestions/tree/10583736)。

*（这不是最终的生产代码，只是一个简单的例子，不要指望它会处理多线程或奇怪的错误）*

将上下文隐藏到自定义类只是定义自定义方法以处理您通常会请求上下文并使用它的每种情况。

**您可以在不暴露上下文的情况下**为 store 层定义一个类：

```
@interface DataStore : NSObject

+ (id)shared;

- (void)saveAll;
- (NSEntityDescription *)entityNamed:(NSString *)name;
/* more custom methods ... */
- (NSManagedObject *)fetchEntity:(NSEntityDescription *)entity withPredicate:(NSPredicate *)predicate;

@end 
```

我建议为所有自定义模型类使用一个共同的祖先来节省一些输入。这个类可以是唯一`DataStore`直接与之交互的类。它无权访问上下文。

```
@interface DataObject : NSManagedObject

+ (NSString *)entityName;
+ (NSEntityDescription *)entity;
- (void)save;
/* more custom methods ... */

@end 
```

最后，您的模型自定义类定义了您可能需要利用超类提供的任何方法的任何方法：

```
@interface Card : DataObject

@property (nonatomic, retain) NSString * question;
@property (nonatomic, retain) NSString * answer;
@property (nonatomic, retain) Deck *deck;

/* return a new card */
+ (Card *)card; 

/* more custom methods ... */

@end 
```

*master*分支有一种更常用的方法，模型类获取上下文并使用它。

# android - .jss 功能如何在 Titanium 移动 SDK 中真正发挥作用？

> ID：10583738
> 
> 赞同：3
> 
> 时间：2012-05-14T12:53:26.497
> 
> 标签：android, android-layout, titanium, titanium-mobile

我[在 stackoverflow](https://stackoverflow.com/questions/9496233/does-jss-feature-is-not-supported-in-titanium-mobile-sdk)和其他一些博客和帖子上找到了这个相关的问题。他们都没有阐明这个 JSS 的东西是如何真正起作用的......

我正在尝试做一个简单的 JSS 实现，只是为了检查这个东西是如何工作的，并为各种 android 设备实现它。

**应用程序.js**

```
var window = Ti.UI.createWindow({
    className : "winodow"
});
user_window.open(); 
```

**-------------------------**

**app.android.jss**

```
.window {
    background-color: #fff;
} 
```

**这工作得很好，但将其更改为：**

**-------------------------**

**app.android.high.jss**

```
.window {
    background-color: #333;
} 
```

**app.android.medium.jss**

```
.window {
    background-color: #666;
} 
```

**app.android.low.jss**

```
.window {
    background-color: #999;
} 
```

对窗口视图没有影响。

甚至声明

这似乎他们没有以预期的方式工作。

我正在使用钛

```
<sdk-version>1.7.6.v20120320183239</sdk-version> 
```

模拟器是

```
 Android-2.3.3, API Level 10, HVGA 
```

找不到在钛金属中实施 JSS 的任何明确文档。

无法添加新标签**---JSS---**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:04:38.700

我认为它从未完全实施过。有了新的[Alloy MVC](https://github.com/appcelerator/alloy)可用，现在这是一个有争议的问题。

# git - git合并提示“致命：空标识”

> ID：10583746
> 
> 赞同：-3
> 
> 时间：2012-05-14T12:54:14.033
> 
> 标签：git, merge

当我想使用 git 从“cl”分支合并更改时，我输入：

```
git merge "merge" HEAD cl 
```

我得到了以下答案：

> ***请告诉我你是谁。
> 
> 跑
> 
> git config --global user.email "you@example.com"
> git config --global user.name "你的名字"
> 
> 设置您帐户的默认身份。省略 --global 以仅在此存储库中设置身份。
> 
> 致命：不允许空标识

所以，我输入：

```
git config  chandler.chen "chen lei" 
```

但是，配置好账户信息后，merge 还是得到原来的结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T12:58:17.647

```
git config --global user.email "you@example.com"
git config --global user.name "Your Name" 
```

这对你来说到底是怎么回事`git config chandler.chen "chen lei"`？！

这是您需要运行的内容：

```
git config --global user.email "put@your.email.address.here"
git config --global user.name "put your name or nickname here" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:07:09.873

即使修复了身份问题，我也不知道该合并命令要做什么。应该只是`git merge cl`

# java - 使用 Java 连接到 Azure 中的 MongoDB

> ID：10583747
> 
> 赞同：1
> 
> 时间：2012-05-14T12:54:15.663
> 
> 标签：java, mongodb, azure

第一：我是 azure 的新手。好的，我想要一个天蓝色的 MongoDb 副本集。我使用了这些网站： [http](http://www.mongodb.org/display/DOCS/Azure+Deployment) ://www.mongodb.org/display/DOCS/Azure+Deployment和 [https://github.com/mongodb/mongo-azure](https://github.com/mongodb/mongo-azure) 这很好用。但是如何从我的 java 应用程序访问这个 mongo 副本集？Java 应用程序不在云中运行。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:31:10.077

你可以做的几件事：

*   在您的副本集节点上运行 mongos（分片路由器），并创建一个代表整个数据库的单个分片。Mongos 将对每个副本集节点的 ip/port 具有内部可见性。然后，您的外部 java 应用程序将直接连接到 mongos。注意：使用 mongos 不是 10gen 提供的脚手架项目的一部分。你需要自己添加这个。
*   设置 Azure Connect，在 Java 应用和 MongoDB 副本集部署之间架起桥梁。您需要将 --ipv6 标志添加到 mongod 的命令行中（因为 Azure Connect 仅支持隧道上的 ipv6 流量）。我不记得是否在 10gen 提供的脚手架中设置了此标志，并且默认情况下禁用了 ipv6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T13:06:30.190

默认情况下，MongoDB 将在端口 27017 上运行（请参阅[TCP 端口号](http://www.mongodb.org/display/DOCS/Production+Notes "TCP 端口号")）。只需创建一个[输入端点](http://msdn.microsoft.com/en-us/library/windowsazure/gg433020.aspx)以允许您的本地 Java 应用程序连接到 MongoDB，并确保您选择**tcp**作为协议。

这是[David 博客](http://www.davidmakogon.com/2011/02/azure-tip-overload-your-web-role-for.html)中此类端点的屏幕截图：

![MongoDB](../Images/b697bd42bfcfaf9f252927b589f75a63.png)

请记住，这将为 Internet 上的每个人打开端口，这可能存在安全风险。

或者，您可以考虑使用[Windows Azure Connect](https://www.windowsazure.com/en-us/home/features/virtual-network/)在您的本地系统和您的角色之间创建一个安全的 IPSEC 连接。

# maven - maven 运行的 Groovy 测试不显示非 ASCI 符号

ID：10583748

赞同：1

时间：2012-05-14T12:54:16.997

标签：maven, groovy, gmaven-plugin

# connection - vmware host and guest static ip address

> ID：10583750
> 
> 赞同：2
> 
> 时间：2012-05-14T12:54:27.900
> 
> 标签：connection, ip, vmware

i am new with networking. I have problem with the internet connection between the host system and guest os.(workstation 8)

I have laptop with win 7, which needs to have the static public IP(already working, internet connection OK). Guest OS is win server 2008 r2 sp1\. I need to set static IP with the internet connection.(here is the problem i can't get it.)

i tried to set the NAT to share the host IP address, but the guest ip is always obtained from DHCP(but it must be static for example 192.168.1.22). When i set the same IP on the both machines, it will resolve to the IP conflict.

The problem can by that host ip is : 195.x.x.x(public) and guest ip is 192.x.x.x.

I appreciate any advice.

Thank you for your time.

S.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:44:24.500

您需要将 VM 的网络接口设置为“桥接”模式，这样 VM 就会像您的计算机旁边的网络机器一样工作。

然后，在虚拟化操作系统中，您需要使用您想要的地址将网络接口设置为“静态 IP 模式”。

这样它应该可以工作。（ping 是您诊断的朋友）

注意：仍然要小心您的访客防火墙。可能会觉得奇怪的是，来自另一台机器的数据包从您的机器发出并阻止它们（我见过）。在这种情况下，请与 WireShark 联系。

# asp.net - Add Button in TabContainer for header Template[Make Visible as OutSide TabContainer]

> ID：10583753
> 
> 赞同：1
> 
> 时间：2012-05-14T12:54:41.067
> 
> 标签：asp.net, .net, css

i Trying to display a Button Just above a Tab Container.Like this ![DemoTab](../Images/b0e1bfeb9ae80a14c085bc133f53a5e0.png)

To Achieve this i need to do like this. Correct me when i am wrong.

There are two possible solution for this

1.  Set the Absolute positioning for Button so i fit just above the Tab Container.

2.  For Tab Container

    2.  Add CSS for Header Template so it invisible,

    3.  Calculate Width of Client Screen.

    4.  Stretch the Header Width till First visible Tab

    5.  Set Content Template Visible false.

    6.  And Align Button to Left

but so far i am not succeeded in any of one.

# android - Image caching and loading in Linear layout

> ID：10583759
> 
> 赞同：-1
> 
> 时间：2012-05-14T12:55:01.527
> 
> 标签：android

I am searching for fast solution how to cash images.

I found many done this in loading in ListView images.

However i need to load images into ImageButton which is subview of Linear layout.

Maybe someone saw this implemented or could give me some tips how to do this ?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:58:08.543

您可以使用应用程序缓存目录来缓存图像。使用`Context's` `getCacheDir()`api 获取您的缓存目录路径。

# c++ - Copying List to Map in C++

> ID：10583770
> 
> 赞同：-1
> 
> 时间：2012-05-14T12:55:28.147
> 
> 标签：c++

I am new to C++. I need to know how to copy from a `list` to a `map` in C++. A code sample would be great.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:05:26.220

您可以使用构造函数：

```
std::list<std::pair<int, std::string>> thelist = /* ... */ ;
std::map<int, std::string> themap(thelist.begin(), thelist.end()); 
```

您的列表需要包含适合地图的键值对。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T12:58:31.830

[std::map](http://en.cppreference.com/w/cpp/container/map)是一个关联容器，包含键值对。std [::list](http://en.cppreference.com/w/cpp/container/list)只保存值。因此，除非列表包含正确类型的键值对，否则这个问题毫无意义。

*如果*您的列表恰好包含`std::pairs`匹配目标映射的值类型，您可以使用迭代器构造函数初始化映射：

```
std::list<std::pair<std::string, int>> = ....;
std::map<std::string, int> m(l.begin(), l.end()); 
```

或者您可以使用该`std::copy`算法，如其他地方所建议的那样：

```
std::map<std::string, int> m1;
std::copy(l.begin(), l.end(), std::inserter(m1, m1.begin())); 
```

但请注意，“副本”可能没有按照您的预期进行，因为地图不能保存具有相同键的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T12:56:53.527

您不能[`copy`](http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi/0650/bks/SGI_Developer/books/STL_PG/sgi_html/copy.html)用于源`list`和目标`map`，因为与和`copy`不直接兼容。`list``map`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T13:13:05.647

网上有很多关于如何从列表中输出值以及如何向地图添加值的示例。所以我不会在这里重复。看看 cplusplus.com（虽然它不是每个人的一杯茶。）

**警告**：地图只会存储唯一键值，因此您可能会发现地图项和列表项之间没有 1:1 映射（即，您将在地图中获得相同或更少的映射）所以首先要清楚为什么您正在使用每个容器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T13:00:04.620

列表类，顾名思义，是一个对象列表。然而，地图是对的列表。因此，如果您有一个水果列表“苹果”、“梨”、“西瓜”，您可以将它们放入地图中，但必须将它们映射到某些东西（希望是有意义的东西）。

前任：

```
map<string, string> mapFruits;
mapFruits["apple"] = "red";
mapFruits["pear"] = "yellow";
mapFruits["watermelon"] = "green"; 
```

等等

# android - Enabling copy and paste in webview android

> ID：10583771
> 
> 赞同：7
> 
> 时间：2012-05-14T12:55:28.443
> 
> 标签：android

Is it possible to select the text from a webview then to copy and paste. Is there any special method to do this??Please help me..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:38:47.333

希望对你有帮助...

```
public void selectAndCopyText() {
     try {
         Method m = WebView.class.getMethod("emulateShiftHeld", Boolean.TYPE); 
            m.invoke(BookView.mWebView, false); 
        } catch (Exception e) {
            e.printStackTrace();
            // fallback
            KeyEvent shiftPressEvent = new KeyEvent(0,0,
                 KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_SHIFT_LEFT,0,0);
            shiftPressEvent.dispatch(this);
        }

} 
```

覆盖触摸事件

```
private void emulateShiftHeld(WebView view)
    {
        try
        {
            KeyEvent shiftPressEvent = new KeyEvent(0, 0, KeyEvent.ACTION_DOWN,
                                                    KeyEvent.KEYCODE_SHIFT_LEFT, 0, 0);
            shiftPressEvent.dispatch(view);
            Toast.makeText(this, "select_text_now", Toast.LENGTH_SHORT).show();
        }
        catch (Exception e)
        {
            Log.e("dd", "Exception in emulateShiftHeld()", e);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T12:08:21.560

根据某人博客的这个[网站](http://android-ed.blogspot.com/2012/10/copy-text-in-webview-in-android-23-and.html?m=1)说“在Android 3.0及更高版本中默认情况下可以使用WebView中的复制功能”，并且可能这些信息可能会有所帮助，[Android：如何从webview中选择文本](https://stackoverflow.com/questions/6058843/android-how-to-select-texts-from-webview)

# php - RewriteCond %{REQUEST_FILENAME} !-f 不适用于 .php 文件

> ID：10583772
> 
> 赞同：2
> 
> 时间：2012-05-14T12:55:31.640
> 
> 标签：php, apache, mod-rewrite

我有一个 symfony 2 网站，它要求将所有 url 重新写入文档索引。

此外，还有许多完全独立的“微型站点”，它们只是在 web 目录中用尽了它们自己的子文件夹。我需要为指向微型站点子文件夹的任何 url 添加重写异常

这是我的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_URI} !^/(microsite1|microsite2|microsite3)(.*)$
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ %{document_index} [QSA,L]
</IfModule> 
```

这适用于微型站点文件夹中的 .php 文件以外的所有内容，即：

*   www.domain.com/microsite1/index.html ---有效（显示 index.html）
*   www.domain.com/microsite2/ --- 有效（显示 index.php）
*   www.domain.com/microsite2/contact.php ---**不起作用**（显示 symfony route not found 错误）

另外：

*   www.domain.com/microsite2/images/ ---成功显示目录列表
*   www.domain.com/microsite2/images/image.jpg ---成功显示图片

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:44:01.530

您可能需要将 apache 配置更改为以下内容：

```
<VirtualHost *:80>
    ServerName server-name
    DocumentRoot /var/www/path/to/document/root
    <Location />
            RewriteEngine on
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteCond %{REQUEST_FILENAME} !-d
            RewriteRule !\.(js|ico|gif|jpg|png|css)$ /index.php
    </Location>
</VirtualHost> 
```

密切关注最后一个 RewriteRule ......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:51:50.783

保持简单 - 将此规则添加到您的 .htaccess 中：

```
RewriteCond %{REQUEST_URI} ^/microsite1 [OR]
RewriteCond %{REQUEST_URI} ^/microsite2 [OR]
RewriteCond %{REQUEST_URI} ^/microsite3
RewriteRule ^.*$ - [NC,L] 
```

# ios - 持久存储条目仍然存在，但重建时数据为空

> ID：10583773
> 
> 赞同：0
> 
> 时间：2012-05-14T12:55:36.247
> 
> 标签：ios, core-data, persistent

我正在开发一个使用持久存储来保存和检索数据的应用程序。我一切正常，但有一些奇怪的行为让我非常怀疑我所做的是否正确。

当我构建我的应用程序时，一些值被加载到持久存储中并且可以访问。当我在界面构建器中关闭应用程序然后重新加载它时，这仍然是正确的。

加载的数据在记录时看起来像：

> 实体：任命；数据：{天=星期一；小时 = 8; 项目=项目1；任务=任务1；}

现在，在重建应用程序时，商店中的条目仍然存在，但是，这些条目中应该存在的数据似乎已被破坏。

加载的数据现在看起来像：

> 实体：任命；数据：故障

我会假设商店要么完全重建，因此不会留下任何条目，要么它会保持重建前的原样。

约会是`NSManagedObject`在我的 xcdatamodel 中定义的类，具有四个字符串属性（天、小时、项目和任务）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:47:24.357

没有代码，很难看到发生了什么。你收到错误了吗？

**data:fault**并不意味着你做错了什么。每次执行请求时，Core Data 都不会检索整个对象，而是检索它的**骨架**。对象内的数据不会立即填充，而只会在您触发错误时填充（例如访问该实体的属性）。

因此，如果您以这种方式记录该对象：

```
NSLog(@"%@", managedObject); 
```

这可能是这样做的动机。

有关故障的更多信息，我建议您阅读[Faulting](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html)。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:24:16.323

1.  运行你的模拟器，然后在顶部菜单栏中，选择`iOS Simulator`-> `Reset Content & Settings...`。它将重置您的应用程序的所有数据，包括 CoreData。

2.  或者你可以去`~/Library/Application\ Support/iPhone\ Simulator/5.0/Applications`，删除App bundle。

3.  或者只是删除`xxx.sqlite`.`~/Library/Application\ Support/iPhone\ Simulator/5.0/Applications/E88E378D-14A9-4900-A613-BF9082D4B2C1(YourAppBundle)/Documents/`

然后重建您的项目并运行它，现在清理数据。;)

# c# - 绑定：使用 DataTemplate 和绑定可视化未命名布尔值列表

> ID：10583775
> 
> 赞同：1
> 
> 时间：2012-05-14T12:55:54.110
> 
> 标签：c#, windows-phone-7, xaml, data-binding

我有一个 ViewModel，它包含一个 ObservableCollection 的布尔值。我有一个控制。想要将我的布尔值列表可视化为具有两种不同颜色的矩形列表。我不能声明这样的绑定。这是我的代码：

```
<UserControl.Resources>
    <DataTemplate x:Key="DataTemplateName">
        <Grid Margin="12,0,0,0">
            <Rectangle Fill="{Binding ***PROBLEM***   
                                       , Converter={StaticResource BoolToSelectionBrushConverter}"} 
                                       HorizontalAlignment="Right" 
                                       Margin="0" Width="25" 
                                       Height="25" VerticalAlignment="Top" 
                                       StrokeThickness="0"/>
        </Grid>
    </DataTemplate>
</UserControl.Resources>

 <Grid x:Name="LayoutRoot">
<ItemsControl 
        ItemsSource="{Binding Statuses}" 
                    ItemTemplate="{StaticResource DataTemplateName}" 
                    Margin="0,0,8,0">
    <ItemsControl.ItemsPanel>
          <ItemsPanelTemplate>
                     <VirtualizingStackPanel Orientation="Horizontal" />
          </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
</ItemsControl> 
```

我可以在不创建包装器的情况下实现它吗？

```
public class Value 
{
   public bool IsOk{get;set;}
} 
```

并绑定到命名属性：

```
 <Grid Margin="12,0,0,0">
    <Rectangle Fill="{Binding IsOk 
                       , Converter={StaticResource BoolToSelectionBrushConverter}}" 
                       HorizontalAlignment="Right" 
                       Margin="0" Width="25" 
                       Height="25" VerticalAlignment="Top" 
                       StrokeThickness="0"/>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:04:58.410

我目前没有方便的 WP7 开发环境，所以它未经测试，但我认为以下应该可以工作：

```
 <Rectangle Fill="{Binding BindsDirectlyToSource=True,
                              Converter=BoolToSelectionBrushConverter}" 
                               HorizontalAlignment="Right" 
                               Margin="0" Width="25" 
                               Height="25" VerticalAlignment="Top" 
                               StrokeThickness="0"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T13:05:04.427

你可以使用这个：

```
<Rectangle Fill="{Binding .,Converter=BoolToSelectionBrushConverter}"... /> 
```

# java - Solr 总是返回 10 行

> ID：10583776
> 
> 赞同：0
> 
> 时间：2012-05-14T12:55:54.193
> 
> 标签：java, solr

```
SolrQuery query = new SolrQuery();
query.setQuery("num:[20 TO 30]&fl=num&rows=50&start=10&sort=num desc");
QueryResponse rsp;
rsp = server.query(query);
SolrDocumentList returned = rsp.getResults();
System.out.println(returned.size()); 
```

为什么我总是得到 10 个文件？（当我在网络浏览器中通过 GET 尝试此操作时，我得到了我想要的）

编辑我实际上发现它在以这种方式创建查询时起作用：

```
SolrQuery query = new SolrQuery().setQuery(
            "num:[20 TO 30]").setSortField("num", ORDER.desc).setRows(5); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:34:45.413

您可以更改`requestHandler`. 默认情况下，它返回 10 行。`rows`将in的设置更改`defaults`为另一个值。

```
<requestHandler name="..." class="...">

 <lst name="defaults">
   <str name="echoParams">explicit</str>
   <int name="rows">10</int>
   <str name="df">text</str>
 </lst>

</requestHandler> 
```

在客户端，您正在寻找的参数是`rows`：`...&start=0&rows=10...`

**编辑**

正如我所假设的，您正在使用 solrj 作为客户端。实施`setQuery`

```
public SolrQuery setQuery(String query) {
    this.set(CommonParams.Q, query); // whereas CommonParam.Q is 'q'
    return this;
} 
```

这意味着您必须调用显式`setRows`并且不能像在 URL 中那样使用参数。

# jquery - $.将背景颜色淡化为当前设置的颜色

> ID：10583777
> 
> 赞同：0
> 
> 时间：2012-05-14T12:55:56.227
> 
> 标签：jquery, animation, colors

我正在尝试对使用 $.ajax 插入到表中的表条目创建脉动效果。

表格行具有奇数/偶数类，使表格看起来像斑马（奇数行具有较浅的背景）。

添加新表行时，它将被附加到表中，因此我只是检查最后一行 ( `table tr:last`) 是否具有“奇数”类。如果是这样，那么我将“偶数”类添加到新附加的行中，否则我将“奇数”类添加到它。

无论如何，我怎样才能使新行从红色淡化为适用于它的奇数/偶数类的任何背景颜色。

我试过：

```
new_row.addClass(odd_or_even_class); // here the class is decided
var currentColor = new_row.css('background-color'); 
new_row.css('background-color', '#FF99CC')
       .animate({backgroundColor: currentColor}, 1000); 
```

但由于某种奇怪的原因，它会变成白色......

我认为这与“currentColor”变量的值有关，它看起来不像`rgba(...)`是十六进制值。也许 $.animate 只接受十六进制值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:00:46.690

默认情况下，动画不支持 RGBA。

这是一个替代解决方案：http: [//pioupioum.fr/sandbox/jquery-color/](http://pioupioum.fr/sandbox/jquery-color/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T13:11:59.367

来自 jQuery 动画文档：

> 所有动画属性都应动画为单个数值，除非以下说明；大多数非数字属性无法使用基本的 jQuery 功能进行动画处理（**例如，宽度、高度或左侧可以进行动画处理，但背景颜色不能进行动画处理，除非使用了 jQuery.Color() 插件**）。除非另有说明，否则属性值被视为像素数。可以在适用的情况下指定单位 em 和 %。 [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

所以 Johan 的回答是对的，你需要使用[jQuery Color plugin](https://github.com/jquery/jquery-color)之类的东西。我只是将其添加为对他的回答的评论，但我认为我还没有代表。

# python - Python/Django 日期时间比较

> ID：10583778
> 
> 赞同：1
> 
> 时间：2012-05-14T12:56:00.423
> 
> 标签：python, django, datetime

我对与 Django 日期时间字段的日期时间比较感到困惑，这是代码

```
now = datetime.now()
delta = talk.when + timedelta(minutes=(talk.duration + 10))
if now > delta:
    return True
return False 
```

`talk`只是日期时间字段， `duration`是整数字段

`now`- 应该有时间等于`17:43`但我有`5:43`( `datetime.datetime(2012, 5, 14, 5, 43, 24, 228401)`)

有什么问题，代码有什么问题？

**现在它可以工作了**

我刚刚在本地时区中添加了 USER_ENV_TZ 变量并使用了`utcnow`

```
if os.getenv('ENV_USER_TZ', None):
    TIME_ZONE = os.getenv('ENV_USER_TZ') # changed to UTC 
```

谢谢， 苏丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:26:57.613

**现在它可以工作了**

我刚刚在本地时区中添加了 USER_ENV_TZ 变量，`utcnow`并由@BluePeppers 建议使用

```
if os.getenv('ENV_USER_TZ', None):
    TIME_ZONE = os.getenv('ENV_USER_TZ') # changed to UTC 
```

谢谢你们

# mongodb - 插入 MongoDB 时建议何时/如何将数据保存到数据库

> ID：10583780
> 
> 赞同：1
> 
> 时间：2012-05-14T12:56:04.017
> 
> 标签：mongodb, database

我正在开发一个应用程序架构，它允许用户添加一些数据，比如对某些产品的评论，以及注册/登录功能。为了快速插入和获取，我正在考虑使用 MongoDB，对于持久性存储（以防 mongodb 损坏或失败），我想将其保存到数据库（postgre/msql）。同样对于注册/登录，我也会这样做。

我需要一些建议，我应该在什么级别/层将数据保存到数据库？它应该在一个线程中吗？还是我低估了 MongoDB？是不是非常安全！

提前致谢。干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:07:59.433

MongoDB 与 MySQL 一样（至少）具有很强的故障安全性，只要您使用日志并使用驱动程序的功能来确保在返回之前将插入和更新提交到日志。

MongoDB 让用户决定数据的重要性，并且有各种不同的级别：

*   “safemode = off”：你真的不在乎你的插入或更新是否有效
*   “safemode = on”：MongoDB 承认您的插入/更新已进入其内存
*   “安全模式 = 开启”+“日志 = 开启”
*   "fsync = on" ：真的很慢，但它确保在驱动程序返回之前将数据提交到磁盘
*   "w= 2" ：如果您使用的是副本集，那么这可以与其他选项结合使用，以保证插入/更新已针对您的集合中的“至少 2”台机器运行。

有关更多背景信息，请查看[http://mongly.com/Demystifying-Write-Durability/](http://mongly.com/Demystifying-Write-Durability/)

# mysql - SQL 在数据库中搜索数字/货币值

> ID：10583789
> 
> 赞同：0
> 
> 时间：2012-05-14T12:56:29.200
> 
> 标签：mysql, sql, search, decimal

我已经构建了一个具有小型搜索功能的 Web 应用程序。作为搜索的一部分，我为用户提供了按金额搜索的选项。我做了一些搜索，除了“LIKE”子句对 SQL 中的数字不起作用之外，没有找到任何可靠的示例或建议，所以我的问题是：

有人可以提供一个正确的 SQL 语句示例来搜索数据库中带小数的数字。例如，如果某些输入 5234.32 作为货币搜索，我希望结果返回“金额”列为 5xxx.xx 的任何记录。如果用户输入 64.58，我想返回“金额”列为 6x.xx 的任何记录

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:03:51.880

搜索`5xxx.xx`与搜索相同`5000 <= field AND field < 6000`。

我建议不要截断该字段，因为它会阻止 DBMS 使用任何现有索引。假设有一个索引，上面显示的范围扫描应该非常有效`field`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:01:01.003

根据您的数据库，您可能可以这样做：

```
-- Oracle
WHERE TRUNC(amount, -decimals) = TRUNC(:user_input, -decimals)

-- MySQL
WHERE TRUNCATE(amount, -decimals) = TRUNCATE(:user_input, -decimals) 
```

`decimals`我的意思是您要保留的小数点左侧的位数，即

```
TRUNC(5234.32, -3) = 5000.00
TRUNC(64.58, -1)   = 60.00 
```

在 SQL 中发现小数的一种愚蠢方法是：

```
-- Oracle
LENGTH(TO_CHAR(TRUNC(amount)))

-- MySQL
LENGTH(CAST(TRUNCATE(amount) AS CHAR)) 
```

当然，正如[布兰科](https://stackoverflow.com/a/10583898/521799)在回答中提到的那样，这可能会很慢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T13:02:00.787

您可以转换为 varchar 并使用之类的吗？

否则，您可以使用像 @ypercube 所述的算术运算。

# c# - HttpWebRequest 虚拟按钮点击

> ID：10583794
> 
> 赞同：4
> 
> 时间：2012-05-14T12:56:46.897
> 
> 标签：c#, .net, httpwebrequest

我有我的 html-php 网页，其中包含表单、输入和 sumbit 按钮。使用 html 请求，我试图填写一些字段并按下按钮，但我不能。这是C#代码：

```
public static string PostData(string data)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://localhost/request.php"); //http://businesslist.com/search/clients/?m=userspace&d=addclassified
    request.Method = "POST";
    request.AllowAutoRedirect = true;
    request.ContentType = "application/x-www-form-urlencoded";
    byte[] EncodedPostParams = Encoding.UTF8.GetBytes(data);
    request.ContentLength = EncodedPostParams.Length;
    request.GetRequestStream().Write(EncodedPostParams, 0, EncodedPostParams.Length);
    request.GetRequestStream().Close();
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    string str = new StreamReader(response.GetResponseStream(), Encoding.UTF8).ReadToEnd();
    return str;
}
static void Main(string[] args)
{
    string data = PostData("name=" + HttpUtility.UrlEncode("lol") + "&btn=Clicked");

    Console.WriteLine(data);
    Console.ReadLine();
} 
```

和 2 个 php 文件：request.php

```
<html>
<head>
<title>HTTP Request</title>
</head>
<body>
<form action ="http://localhost/response.php" method ="POST">
<input type="text" name="name">
<input type="password" name="pass">
<select name="country">
<option value="-1" selected="selected">Select State/Country</option>
<option value="82">Select 1</option>
<option value="83">Select 2</option>
</select>
<input type="submit" name="btn">
</form>
</body>
</html> 
```

响应.php

```
<?php
   $data = $_POST["name"];
   echo $data;
?> 
```

[这](http://bit.ly/Jv7iDR)是我网站的链接

那么，我怎样才能按下这个按钮呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:16:39.683

我已经在[LINQPad](http://linqpad.net)中尝试过它并且它有效：

```
void Main()
{
    var request = (HttpWebRequest)WebRequest.Create("http://128.75.49.209/response.php");
    request.Method = WebRequestMethods.Http.Post;
    request.ContentType = "application/x-www-form-urlencoded";
    using (var stream = request.GetRequestStream())
    {
        var buffer = Encoding.UTF8.GetBytes("name=asd&pass=asd&country=82&btn=Submit+Query");
        stream.Write(buffer,0,buffer.Length);
    }
    var response = (HttpWebResponse)request.GetResponse();
    string result = String.Empty;
    using (var reader = new StreamReader( response.GetResponseStream()))
    {
        result = reader.ReadToEnd();
    }
    Console.WriteLine(result);
} 
```

问题是您在代码中使用`request.php`而不是。`response.php`

# biztalk - 在管道组件中动态设置属性

> ID：10583798
> 
> 赞同：1
> 
> 时间：2012-05-14T12:56:56.507
> 
> 标签：biztalk, biztalk-2010

我有一个自定义管道组件，它在发送电子邮件之前加密、ZIP 和密码保护消息。我需要从编排中动态设置密码。尽管我看到有 BTS.SendPipelineConfig，但我找不到任何有关如何执行此操作的示例。我想我将更改后的配置传递给它，但我不知道如何访问管道的现有 xml 配置。

是否有任何可用的教程或示例？我已经搜索无济于事。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:04:19.130

我认为您最好为编排中设置的消息添加上下文属性。您的管道组件可以读取此上下文属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:38:32.093

经过深思熟虑，我决定在我的自定义组件中编写代码。我宁愿保持这个组件通用，但在其中写入密码使其更安全，开发速度更快。

# android - 编辑位于另一个 XML 文件中的 CheckBox 和 EditText

> ID：10583799
> 
> 赞同：1
> 
> 时间：2012-05-14T12:56:58.317
> 
> 标签：android, xml

所以我在活动 Home 中有：

```
setContentView(R.layout.home); 
```

现在，从 Home 活动中，可以转到 Settings 活动，该活动具有：

```
setContentView(R.layout.settings); 
```

它有几个 CheckBoxes 和 EditTexts。

是否可以从 Home 活动中编辑这些复选框的状态？

我已经像这样在 Home 中声明了它们：

```
CheckBox checkBox1 = (CheckBox) findViewById(R.id.checkBox1); 
```

哪个发现ID很好，但应用程序在我尝试的那一行崩溃

```
checkBox1.setChecked(true); 
```

不能从其他活动中访问它吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:59:27.600

一般来说，一个活动不能直接修改另一个活动的视图元素，因为 Android 不保证每个活动的生命周期。活动 A 可能会调用活动 B，但如果在显示 B 时内存不足，则可能会破坏 A。

您将需要使用意图将数据从一个活动传递到另一个活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T13:00:20.290

在活动之间传递数据

例如：**Main.java**

```
Intent i = new Intent(Home.this,Setting.class);
i.putExtra("check","true"); <-------- set valuse here
            ^^^^    ^^^^
startActivity(i); 
```

并在**Setting.java**

```
String str = getIntent().getExtras().getString("check");
                                                 ^^^^ 
```

# boost - 使用 boost::asio 创建一个异步 udp 客户端

> ID：10583806
> 
> 赞同：2
> 
> 时间：2012-05-14T12:57:20.993
> 
> 标签：boost, asynchronous, udp, client, boost-asio

我正在尝试使用 boost::asio 创建一个异步 UDP 客户端，服务器来自 asio[示例](http://www.boost.org/doc/libs/release/doc/html/boost_asio/example/echo/async_udp_echo_server.cpp)。

当我创建 3 个客户端（c1、c2、c3）并向服务器发送三个不同的消息时，

但是在服务器端收到的消息有问题:(

UDP客户端：

```
#include <cstdlib>
#include <iostream>
#include <deque>
#include <boost/bind.hpp>
#include "asio.hpp"
#include "message.hpp"

std::string show_hex(const char* data, size_t size)
{
    std::string hex;
    char buf[16];
    const char* p = data;
    for (size_t i = 0; i < size; ++i) {
        std::sprintf(buf, "%02X ", static_cast<unsigned>(p[i]) & 0xFF);
        hex += buf;
    }
    return hex;
}
std::string show_str(const char* data, size_t size)
{
    std::string str;
    char buf[16];
    const char* p = data;
    for (size_t i = 0; i < size; ++i) {
        std::sprintf(buf, "%c", p[i]);
        str += buf;
    }
    return str;
}
using asio::ip::udp;
class udp_client{ 
public: 
    udp_client (asio::io_service& io_service, const std::string& host, const std::string& port) 
    :io_service_(io_service), socket_(io_service, udp::endpoint (udp::v4(), 0)) { 
        udp::resolver resolver(io_service_); 
        udp::resolver::query query(udp::v4(), host, port); 
        udp::resolver::iterator itr = resolver.resolve(query);

        sender_endpoint_ = *itr; 
    }

    ~udp_client(){ 
        socket_.close();
    }
    void send_message(const message& msg){
        io_service_.post(boost::bind(&udp_client::do_write, this, msg));
    }

    void do_write(const message& msg){
        send_msg_queue_.push_back(msg);

        if (!send_msg_queue_.empty()){
            socket_.async_send_to(
                asio::buffer(send_msg_queue_.front().data(), send_msg_queue_.front().length()),
                sender_endpoint_,
                boost::bind(&udp_client::handle_send_to, this, 
                asio::placeholders::error,
                asio::placeholders::bytes_transferred));

            std::cout<<"send data(str):"<<show_str(send_msg_queue_.front().data(), send_msg_queue_.front().length())<<std::endl;
        }
    }

    void handle_send_to(const asio::error_code& error, size_t s/*bytes_sent*/){
        std:: cout <<"bytes_sent = "<<s<<"." <<std:: endl; 

        if (!error){
            // send success, remove from the queue
            send_msg_queue_.pop_front(); 

            // recv response after send a message
            recv_message();

            if (!send_msg_queue_.empty()){
                socket_.async_send_to(
                    asio::buffer(send_msg_queue_.front().data(), send_msg_queue_.front().length()),
                    sender_endpoint_,
                    boost::bind(&udp_client::handle_send_to, this, 
                    asio::placeholders::error,
                    asio::placeholders::bytes_transferred));
            }
        }
        else{
            std::cerr<<"error in handle_send_to:"<<error<<std::endl;
            socket_.close();
        }

    }

    void recv_message(){
        socket_.async_receive_from(
            asio::buffer(data_.data(), data_.max_length()), sender_endpoint_,
            boost::bind(&udp_client::handle_receive_from, this,
            asio::placeholders::error,
            asio::placeholders::bytes_transferred));
    }

    void handle_receive_from(const asio::error_code& error, size_t bytes_recvd)
    {
        if(!error){
            std::cout<<"handle_receive_from "<<std::endl;
            std::cout<<"recv data(str):"<<show_str(data_.data(), bytes_recvd)<<std::endl;
            if(bytes_recvd > message::header_length)
                data_.body_length(bytes_recvd-message::header_length);
            //std::cout<<"message.lenght()="<<data_.length()<<"bytes_recvd="<<bytes_recvd<<std::endl;
        }
        else{
            std::cerr<<"error in handle_receive_from:"<<error<<std::endl;
            socket_.close();
        }
    }
private: 
    //enum {max_length = 1024};
    //char data_[max_length];
    message data_;
    asio::io_service& io_service_; 
    udp::socket socket_; 
    udp::endpoint sender_endpoint_;
    std::deque<message> send_msg_queue_;
};

int main (int argc, char* argv []) { 

    asio::io_service is; 

    udp_client c1(is, "localhost", "8886");
    udp_client c2(is, "localhost", "8887");
    udp_client c3(is, "localhost", "8888");
    std::string msg1 = "This is Request seq1 from c1.";
    std::string msg2 = "This is Request seq1 from c2.";
    std::string msg3 = "This is Request seq1 from c3.";

    message msg;
    msg.body_length(msg1.length());
    memcpy(msg.data(), "1234567890123456789021", message::header_length);
    memcpy(msg.body(), "This is Request seq1 from c1.", msg.body_length());

    c1.send_message(msg);

    msg.body_length(msg2.length());
    memcpy(msg.data(), "1234567890123456789022", message::header_length);
    memcpy(msg.body(), "This is Request seq1 from c2.", msg.body_length());
    c2.send_message(msg);

    msg.body_length(msg3.length());
    memcpy(msg.data(), "1234567890123456789023", message::header_length);
    memcpy(msg.body(), "This is Request seq1 from c3.", msg.body_length());
    c3.send_message(msg);

    is.run (); 

    return 0; 
} 
```

udp 服务器代码：

```
// async_udp_echo_server.cpp
// ~~~~~~~~~~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2011 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0\. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#include <cstdlib>
#include <iostream>
#include <boost/bind.hpp>
#include "asio.hpp"
std::string show_hex(const char* data, size_t size)
{
    std::string hex;
    char buf[16];
    const char* p = data;
    for (size_t i = 0; i < size; ++i) {
        std::sprintf(buf, "%02X ", static_cast<unsigned>(p[i]) & 0xFF);
        hex += buf;
    }
    return hex;
}
std::string show_str(const char* data, size_t size)
{
    std::string str;
    char buf[16];
    const char* p = data;
    for (size_t i = 0; i < size; ++i) {
        std::sprintf(buf, "%c", p[i]);
        str += buf;
    }
    return str;
}
using asio::ip::udp;

class udp_server
{
public:
  udp_server(asio::io_service& io_service, short port)
    : io_service_(io_service),
      socket_(io_service, udp::endpoint(udp::v4(), port))
  {
    memset(data_, 0, max_length);

    socket_.async_receive_from(
        asio::buffer(data_, max_length), sender_endpoint_, 
        boost::bind(&udp_server::handle_receive_from, this, 
          asio::placeholders::error,
          asio::placeholders::bytes_transferred));
  }

  void handle_receive_from(const asio::error_code& error,
      size_t bytes_recvd)
  {
    if (!error && bytes_recvd > 0)
    {
        std::cout<<"recv data(size="<<bytes_recvd<<"):"
            <<show_str(data_, bytes_recvd)<<endl
            <<"["<<show_hex(data_, bytes_recvd)<<"]"<<std::endl;

        socket_.async_send_to(
            asio::buffer(data_, bytes_recvd), sender_endpoint_, 
            boost::bind(&udp_server::handle_send_to, this,
            asio::placeholders::error,
            asio::placeholders::bytes_transferred));
    }
    else
    {
      socket_.async_receive_from(
          asio::buffer(data_, max_length), sender_endpoint_,
          boost::bind(&udp_server::handle_receive_from, this,
            asio::placeholders::error,
            asio::placeholders::bytes_transferred));
    }
  }

  void handle_send_to(const asio::error_code& /*error*/,
      size_t s/*bytes_sent*/)
  {
    socket_.async_receive_from(
        asio::buffer(data_, max_length), sender_endpoint_,
        boost::bind(&udp_server::handle_receive_from, this,
        asio::placeholders::error,
        asio::placeholders::bytes_transferred));
    memset(data_, 0, max_length);
  }

private:
  asio::io_service& io_service_;
  udp::socket socket_;
  udp::endpoint sender_endpoint_;
  enum { max_length = 1024 };
  char data_[max_length];
};

int main(int argc, char* argv[])
{
  try
  {
    if (argc != 2)
    {
      std::cerr << "Usage: async_udp_echo_server <port>\n";
      return 1;
    }

    asio::io_service io_service;

    using namespace std; // For atoi.
    udp_server s(io_service, atoi(argv[1]));

    io_service.run();
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }

  return 0;
} 
```

消息类：

```
// message.hpp
// ~~~~~~~~~~~~~~~~
//
// Copyright (c) 2003-2011 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0\. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#ifndef MESSAGE_HPP
#define MESSAGE_HPP

#include <cstdio>
#include <cstdlib>
#include <cstring>

class message
{
public:
  enum { header_length = 22 };
  enum { max_body_length = 1024 };

  message()
    : body_length_(0)
  {
  }

  const char* data() const
  {
    return data_;
  }

  char* data()
  {
    return data_;
  }
  size_t max_length()
  {
    return header_length + max_body_length;
  }
  size_t length() const
  {
    return header_length + body_length_;
  }

  const char* body() const
  {
    return data_ + header_length;
  }

  char* body()
  {
    return data_ + header_length;
  }

  size_t body_length() const
  {
    return body_length_;
  }

  void body_length(size_t length)
  {
    body_length_ = length;
    if (body_length_ > max_body_length)
      body_length_ = max_body_length;
  }

  bool decode_header()// 头 4个字节存放的是body长度
  {
    using namespace std; // For strncat and atoi.
    char header[header_length + 1] = "";
    strncat(header, data_, header_length);
    body_length_ = atoi(header);
    if (body_length_ > max_body_length)
    {
      body_length_ = 0;
      return false;
    }
    return true;
  }

  void encode_header()
  {
    using namespace std; // For sprintf and memcpy.
    char header[header_length + 1] = "";
    sprintf(header, "%4d", body_length_);
    memcpy(data_, header, header_length);
  }

private:
  char data_[header_length + max_body_length];
  size_t body_length_;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:43:55.397

您的客户端代码的`do_write`方法不正确`const_buffer`。[缓冲区](http://www.boost.org/doc/libs/1_35_0/doc/html/boost_asio/reference/const_buffer/const_buffer.html)不保存数据，它是将指针和长度保存在一起的包装器。该`c_str`方法在堆栈上分配数据，当函数返回时，指针变为无效。正确的方法是传递数据指针，或者[更正重载](http://www.boost.org/doc/libs/1_35_0/doc/html/boost_asio/reference/buffer/overload21.html)：

```
asio::buffer(msg.data(), msg.length()); 
```

但是在调用 &udp_client::handle_send_to 之前，您不得在 msg 上调用任何非成本方法。如果没有，您应该将字符串复制到`data_`缓冲区。

如果这不是最后一个错误，请更新您的问题。

# .net - 为什么 WPF 不使用 IDisposable，其后果是什么？

> ID：10583810
> 
> 赞同：1
> 
> 时间：2012-05-14T12:57:35.647
> 
> 标签：.net, wpf, idisposable

所以，我以前从来没有做过一个大型的 WPF 项目，但是这个让我想知道；WPF 类没有实现是`IDisposable`怎么回事？相比之下，Windows 窗体中的所有 UI 元素都实现了`IDisposable`，以确保它们摆脱底层句柄等。

我认为相同的 Windows 对象在那里隐藏，并且必须释放这些资源；那么，WPF 是如何做到的呢？

除了对它们进行处理之外，我还需要对我的 WPF Window 对象做些什么`Close()`吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-14T12:59:34.200

WinForms 控件具有句柄，因为它们是 Win32 控件的包装器。WPF 控件不是（好吧，windows 是，但它们托管的控件不是）。原因在于，WPF 窗口毕竟只是一个 Direct3D 渲染上下文，所有控件都只是一堆三角形。因此，它们不需要实际注册到操作系统，因此，它们没有句柄（除了 windows 和任何继承自的东西`HwndHost`，当然，它们*是*Win32 对象）。

这就是 WPF 和 WinForms 之间存在如此大的互操作层的原因：WPF 控件根本不是 Windows 对象。

# matlab - 蒙特卡罗模拟的模拟结果

> ID：10583812
> 
> 赞同：0
> 
> 时间：2012-05-14T12:57:52.120
> 
> 标签：matlab

我有三个变量，比如说 a、b 和 c，我通过正态分布生成了 10,000 个这些变量的随机数。现在我想运行蒙特卡罗模拟以得到 1000 次的结果。
我的模型是，Y=0.5*a+0.4*b+0.6*c。
任何人都可以帮助matlab代码吗？
提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:10:20.173

```
v = randn(1000,3);
y = 0.5*v(:,1)+0.4*v(:,2)+0.6*v(:,3); 
```

其中的列`v`是`a,b,c`和`y`是结果。

**编辑：**给定一个 10000x3 矩阵`v`，计算`y`从 中随机选择的 1000 个样本`v`。

```
ind = randperm(10000);
y = 0.5*v(ind(1:1000),1) + 0.4*v(ind(1:1000),2) + 0.6*v(ind(1:1000),3); 
```

我认为随机选择随机数据只会使事情复杂化。如果`v`是随机生成的，那么任何一组 1000 个样本都应该没问题。

# c# - 使用 QueryOver 如何针对“在”中编写 Where 语句

> ID：10583815
> 
> 赞同：1
> 
> 时间：2012-05-14T12:58:11.110
> 
> 标签：c#, nhibernate, where-clause, queryover

使用 QueryOver 时，我通常会编写一个 Where 子句，其中字段与值完全匹配：

```
var subset = _session.QueryOver<ProviderOrganisation>()
.Where(x => x.Type == "Hospital")
.List<ProviderOrganisation>(); 
```

但是现在我想将该字段与值列表进行匹配，因此在 SQL 中类似于“x 在 () 中的位置：”

```
var subset = _session.QueryOver<ProviderOrganisation>()
.Where(x => x.Code is In (ListOfSubsetCodes))
.List<ProviderOrganisation>(); 
```

请问我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:01:55.510

您可以使用 contains 执行以下操作：

```
.Where(x => ListOfSubsetCodes.Contains (x.Code)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T20:35:35.950

您已经使用了 QueryOver，以及执行此操作的另一种方式：

```
.WhereRestrictionOn(x => x.Code).IsIn(ListOfSubsetCodes) 
```

我认为`x => ListOfSubsetCodes.Contains()`它适用于 LINQ，但不适用于 QueryOver。

# oracle9i - Oracle CLOB 列数据未更新

> ID：10583817
> 
> 赞同：0
> 
> 时间：2012-05-14T12:58:12.640
> 
> 标签：oracle9i, clob

我在 oracle 9i 数据库中创建了一个包含一列 CLOB 类型的表，然后我在该表中输入了大约 30 行，在 CLOB 列中我输入了 1500 到 3000 个字符。

问题：当我更新 CLOB 列的数据时，sqldeveloper 会无限期地停止/卡住。

以下是一些sql语句

```
CREATE TABLE "SLATEISB_EXAM"."SAM_ITEMGRADING_T"
  (
ANSWERTEXT CLOB
)
  TABLESPACE "MYTEST" LOB
  (
    "ANSWERTEXT"
  )
  STORE AS
  (
    TABLESPACE "MYTEST" ENABLE STORAGE IN ROW CHUNK 8192 PCTVERSION 10 NOCACHE STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  ) ; 
```

# php - 从 php 搜索表单中提取 $keyword

> ID：10583818
> 
> 赞同：2
> 
> 时间：2012-05-14T12:58:17.577
> 
> 标签：php, codeigniter, search, echo, keyword

这是我的搜索功能：

```
class Ads extends Controller
{
    public function search($format='velos', $cat='occasion', $location='france', $keyword, $page=1)
    {
        if($format == 'velos')
        {
            $query = '`private`=0';
        } else
        {
            $query = '`private`=1';
        }
    $this->images($query, $cat, $location,'MATCH(title) AGAINST ("'.db::escape($keyword).'" IN BOOLEAN MODE)', $page, '%s/%s/%s/'.$keyword.'/%d/', $row[0], $keyword);
    }
} 
```

它工作正常，当我更改 URL 中的关键字时，一切正常但我想在页面中回显该关键字，我不知道如何？我试过

```
<?php echo $keyword; ?> 
```

但回声不返回任何东西。可能存在范围问题，但我不确定。

编辑实际上 $keyword 来自搜索字段，但来自另一个类，这可能是我考虑范围问题的原因

```
class UserModel extends Model
{
    public function search_form()
    {
    $form = new Form('search_form');

    $form->field('keyword', 'text', array
    (           
        'optional'      =>  true
    )); 
    if($data = $form->validate())
    {
        header('Location: '.WEB.sprintf($data['parts_search'].'/'.$data['category_search'].'/'.$data['location_search'].'/'.$data['keyword'].'/1/'));
    }
    return $form;
    }   
} 
```

解决方案 ：

它可能不是最好的解决方案，但实际上是我发现的唯一一个：

```
$url = 'http://'. $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
$parts = parse_url($url);
$path = $parts['path'];
$keys = explode('/', $path);
echo $keys[4]; // `corresponding to the 4th url word` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:56:34.283

我在理解问题所在时遇到了一些麻烦，但是根据您提出的解决方案，有一个自动加载的 CI 类可以执行您提出的操作。

[http://codeigniter.com/user_guide/libraries/uri.html](http://codeigniter.com/user_guide/libraries/uri.html)

所以，对于 [http://yoursite.com/format/cat/location/yourKeyword](http://yoursite.com/format/cat/location/yourKeyword)

```
$keyword = $this->uri->segment(4); // get the 4th segment of my CI URI
echo $keyword; // prints yourKeyword 
```

希望这可以帮助。

# google-apps-script - 错误消息：“无法连接到 Gmail”

> ID：10583820
> 
> 赞同：3
> 
> 时间：2012-05-14T12:58:19.543
> 
> 标签：google-apps-script

有时我会从许多脚本的基于时间的触发器中收到此错误消息......我可以做些什么或者只是服务器端问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:04:57.173

这似乎确实是一个服务器端。但预计它有时会失败。我想你应该实施[指数退避](http://googleappsdeveloper.blogspot.com.br/2011/12/documents-list-api-best-practices.html)。[这](https://gist.github.com/2700284)是[Peter Herrmann](https://stackoverflow.com/users/298650)的 Apps Script 实现。

# c# - 确定哪个文本框触发了文本更改事件

> ID：10583824
> 
> 赞同：4
> 
> 时间：2012-05-14T12:58:47.530
> 
> 标签：c#, wpf, event-handling

我有许多通过代码动态创建的文本框。

我希望能够为文本更改的所有文本框分配一个通用事件处理程序，然后在处理程序中确定哪个文本框触发了事件。

我的代码是：

```
txtStringProperty.TextChanged += TextBoxValueChanged;

private void TextBoxValueChanged(object sender, RoutedEventArgs e)
{
    string propertyName = // I would like the name attribute of the textbox here
} 
```

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T13:00:34.370

该`sender`参数包含触发事件的控件。您可以将其转换为 TextBox 并从中获取 name 属性：

```
string propertyName = ((TextBox)sender).Name; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T13:01:14.323

将`object sender`（触发事件的文本框）转换为`TextBox`.

如果只有一个属性是你想要的，那么写

```
string propertyName = ((TextBox)sender).Name; 
```

但是当需要多个属性时，最好创建一个 Textbox 变量并像使用它一样使用它。

```
TextBox txtbox =  (TextBox)sender; 
```

然后你可以使用它的任何属性，比如

```
string propertyName = txtbox.Name; 

MessageBox.Show(proptertyName);
MessageBox.Show(txtbox.Content.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T09:59:07.433

我的建议是查看[MSDN](https://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol(v=vs.110).aspx)上的基类层次结构， 然后将控件转换为它并提取其上定义的属性：

```
var name = ((ContentControl) sender).Name; 
```

这对于更通用的实现也是一个很好的做法，因为将其转换为“TextBox”意味着您只能将处理逻辑应用于该类型的控件。

# flash - Safari 中的 Ogg 音频

> ID：10583827
> 
> 赞同：4
> 
> 时间：2012-05-14T12:59:09.910
> 
> 标签：flash, html, audio, mediaelement.js, ogg

如何在 safari 中播放 .ogg 音频文件而不将其转换为 mp3？我使用[mediaelements.js](http://www.mediaelementjs.com/)库来闪回后备，它在 chrome 和 firefox 中运行良好，并且可以播放 mp3 和 ogg 文件，但在 safari 中它只播放 mp3。看起来这个库的闪存后备无法播放音频/ogg。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T13:03:52.807

现代桌面浏览器中的编解码器支持

```
Browser                      Ogg Vorbis     MP3     WAV

Firefox 3.6+                    ✓                   ✓

Safari 5+                                   ✓       ✓

Chrome 6                        ✓           ✓   

Opera 10.5+                     ✓                   ✓

Internet Explorer 9+                        ✓       ✓ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:28:51.493

AFAIK，Safari直接不做OGG。他们说，除非你安装[插件。](http://hints.macworld.com/article.php?story=2006061000542563)

# android - 如何在android的列表视图中实现分页

> ID：10583835
> 
> 赞同：0
> 
> 时间：2012-05-14T12:59:40.393
> 
> 标签：android

如何在android的列表视图中实现分页？我必须每页显示 10 条记录。如果用户单击下一个按钮，我必须显示另外 10 条记录，依此类推。谁能告诉我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:57:24.390

尝试执行以下步骤：-

首先，您必须在 listView 中提供按钮，用户使用它来加载接下来的 10 条记录，如下所示：-

```
//LoadMore Button
         Button btnLoadMore = new Button(this);
         btnLoadMore.setText("Load More");

         //Adding Load More button to listview at bottom
         lview.addFooterView(btnLoadMore); 
```

并使用自定义采用者：-

```
adapter = new myAdapter(this, record1, record2, stringArray);
         lview.setAdapter(adapter); 
```

现在

```
/**
          * Listening to Load More button click event
          * */
         btnLoadMore.setOnClickListener(new View.OnClickListener() {

             public void onClick(View arg0) {
                 // Starting a new async task
                 new loadMoreListView().execute();
             }
         } 
```

然后使用

```
 /**
             * Async Task that send a request to url
             * Gets new list view data
             * Appends to list view
             * */
            private class loadMoreListView extends AsyncTask<Void, Void, Void> {

                       protected Void doInBackground(Void... unused) {
                runOnUiThread(new Runnable() {
                    public void run() {

                                 (put your logic for load data)

                //get listview current position - used to maintain scroll position
                        int currentPosition = lview.getFirstVisiblePosition();

    adapter = new myAdapter(NewsActivity.this, record1, record2, stringArray);
                      lview.setAdapter(adapter);

        // Setting new scroll position
         lview.setSelectionFromTop(currentPosition + 1, 0);

        }               
    });

    return (null);
} 
```

希望这会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:05:05.107

只需将前 10 个项目添加到您的适配器中并显示它。如果您的用户单击下一步，请更改适配器内的数据并调用 notifydatasetchanged()。这将使用新项目重新加载列表。但我认为只显示几个项目而不是所有可能的项目并不是一个很好的设计。就个人而言，这会让我发疯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T13:10:04.877

制作一个自定义适配器。填充然后将十个项目添加到`Listview`并调用. 当用户单击下一步按钮时，从中删除前十项并添加下十项，然后再次调用。`ArrayList``ArrrayList``adapter.notfiyDataSetChange()``ArrrayList``adapter.notfiyDataSetChange()`

# cakephp - 在cakephp分页中设置页码

> ID：10583837
> 
> 赞同：1
> 
> 时间：2012-05-14T12:59:56.227
> 
> 标签：cakephp, cakephp-2.0

我想在同一个模板上获得多个分页。我正在查询 2 个不同的模型以在模板文件文件的 2 个不同位置进行分页。正如您已经猜到的，如果我单击两个分页之一的下一页，两个模型都会获取下一页值。我已经做了足够的研究并尝试了各种在线可用的解决方案，但没有一个奏效。可能是我正确地使用了它们。

我发现如果我能够静态设置页面，我就可以让它工作。

我想设置它

> '页面'=> 1

我知道我们可以这样设置。但是如果 url 中有一个参数，比如

> ...../第2页/....

它覆盖了我指定的值。无论通过 URL 发送什么，有没有办法获取我们提供的数字页面？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T16:51:37.380

**2 建议**

首先，你可以覆盖 URL 参数中的页码，像这样

```
$this->request->params['named']['page'] = YOUR_FAVORITE_INTEGER; 
```

这样做的问题是页面上的 URL 仍将`:page`设置旧值，所以......

另一种方法是重定向到相同的控制器操作，但设置了不同的页码（如果您愿意，也可以不设置页码）。

```
$this->redirect(array('action' => 'whatever', 'page' => YOUR_FAVORITE_INTEGER)); 
```

以下是有关构建重定向的文档，以防您需要它们： [http ://api.cakephp.org/class/router#method-Routerurl](http://api.cakephp.org/class/router#method-Routerurl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-16T09:16:06.093

更好更简单的是，我使用它并在 Cake 1.3 中工作。不确定它是否适用于 2.x

在控制器中：

```
$this->paginator['page']= YOUR_FAVORITE_INTEGER; 
```

到目前为止，没有发现任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-28T22:06:48.970

尝试添加：

```
$this->Paginator->settings['Model1']['page']=YourFavInteger;
$this->Paginator->settings['Model2']['page']=YourFavInteger;

$this->Paginator->paginate('Model1');
$this->Paginator->paginate('Model2'); 
```

到您的控制器。

# iphone - iPhone 应用水平滚动条

> ID：10583840
> 
> 赞同：-1
> 
> 时间：2012-05-14T13:00:15.903
> 
> 标签：iphone, objective-c

我想实现一个水平滚动条，其数值类似于 te LevelUp 应用程序中的提示栏。任何提示或建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:34:08.023

在视图控制器底部查看。在上面添加 UIScrollview。将内容大小设置为滚动视图，其中滚动视图的宽度应大于当前宽度。对于数值，您可以使用按钮并将其标签设置为数字，因此您可以为它们设置操作。如果您想以按钮的形式放置有限的数值，那么您可以在视图上静态设置按钮。或者，如果您想设置较大的数值，那么您可以动态创建按钮并将其添加到视图中。

# hibernate - Hibernate Query Language (HQL) - 延迟/非延迟加载的查询

> ID：10583845
> 
> 赞同：8
> 
> 时间：2012-05-14T13:00:32.310
> 
> 标签：hibernate, hql

我有这样的结构：

*   A 包含 B 的集合（映射为非惰性）
*   B 包含 C 的集合（映射为非惰性）

我想做一个查询，检索 A 对象，其中包含 B 对象，其中没有 C 对象。那可能吗？另一种方法也适用于我（如果 BC 关系被映射为惰性并且查询检索 A，包含 B 和 C）。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T13:09:59.803

不，这是不可能的。由于您将关联本身标记为急切加载，Hibernate 将始终急切地加载此关联。

如果您将关联标记为惰性（toMany 关联的默认设置），那么您可以选择在查询中急切地获取它们，使用`join fetch`：

```
select a from A a left join fetch a.bs b left join fetch b.cs 
```

请注意，如果两个集合都是袋子（即没有索引列的列表），这将不起作用。

# jquery - HTML5 地理位置 iPhone UIWebView

> ID：10583846
> 
> 赞同：0
> 
> 时间：2012-05-14T13:00:33.810
> 
> 标签：jquery, ios, html, uiwebview, gps

我有一个带有查询的 HTML5 页面，我将其嵌入到 iPhone 的 UIWebView 中。本网站使用 Javascript 使用用户当前位置。这很好用。但是，每次用户启动应用程序时都会弹出使用用户位置的警报对话框。问题是允许 GPS 访问的通常弹出窗口只弹出一次，但在此之后会弹出来自 UIWebview 的另一个弹出窗口，并且每次启动应用程序时都会弹出这个弹出窗口。

无论如何存储用户选择并在第一次启动后自动允许 GPS。

//ObjectiveCoder

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:17:18.857

如果您想在您的应用程序中嵌入 HTML5 页面，我建议您使用[PhoneGap](https://phonegap.com/)。
它还具有[用于本地获取位置的内置语法，](http://docs.phonegap.com/en/1.7.0/cordova_geolocation_geolocation.md.html#Geolocation)因此浏览器生成的弹出窗口将被阻止。

# sql - 为什么SA账号不能再访问master数据库了？

> ID：10583850
> 
> 赞同：3
> 
> 时间：2012-05-14T13:00:45.840
> 
> 标签：sql, sql-server, database, sql-server-2005

我有点卡住了。我们有一个由第三方设置和配置的数据库服务器。它是针对第三方产品的，所以不幸的是我们被他们的配置方式所困扰。

他们出色的配置包括使用 sa 帐户建立多个连接。大约一个星期以来，我们所有的事件日志都出现了连接故障，每十秒就有两个。我已经设法确定这是此登录失败的主数据库。

肯定是访问master数据库的sa账号。这不是一个错误的密码（这很好，因为我们不知道 sa 密码 - 供应商似乎也不知道。耶...）因为我们收到错误状态 16，所以我相信 sa 帐户有主数据库的一些问题。

它可以毫无问题地连接到其他所有东西 - 我可以看到成功连接到所有其他数据库。我检查了sa帐户权限，我真的看不出有什么问题。我正准备从两周前的备份中恢复主数据库，并希望向你们这些很棒的人开放，以防你们中的任何人以前遇到过这种情况并有任何替代建议......

希望你的...

夏天

* * *

编辑：在下面添加了我的错误的屏幕截图：

![SQL 错误日志的屏幕截图](../Images/c959013d1889334974f99430949358d0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:36:58.047

那么我的第一个建议是让第三方供应商在那里重新配置和修复。他们弄得一团糟，让他们收拾干净。

恢复备份可能有效，但您 1\. 更改 sa 密码和 2\. 不允许软件使用 sa 连接至关重要。我会将此作为与供应商的无交易项目。但是，如果他们这样做，供应商将最终无能，我会认真考虑他们的竞争，以取代这个设计糟糕的系统。

# ant - 如何在没有名称的情况下从目录中解压缩所有文件

> ID：10583857
> 
> 赞同：0
> 
> 时间：2012-05-14T13:01:25.600
> 
> 标签：ant

我想在我的目录（让我们称之为 src）中搜索模式并将所有 jar 复制到某个特定位置（让我们称之为 dest）。

从dest我需要一个一个地获取jar文件并解压缩并在解压缩后删除它们。

我可以将 jar 文件复制到目的地，但是我将如何解压缩它们，因为我不知道它们的名称，因为我只想提供模式作为输入，其余所有都应该由程序完成。

那么如何在没有名称的情况下从目录中解压缩所有文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:26:13.943

您是否创建文件集来复制 JAR？如果是这样，您可以将相同的文件集传递给[Unzip](http://ant.apache.org/manual/Tasks/unzip.html)任务。

```
<copy todir="dest_dir">
  <fileset dir="src_dir">
    <exclude name="**/*.jar"/>
  </fileset>
</copy>

<unzip dest="dest_dir">
  <fileset dir="dest_dir">
    <include name="**/*.jar"/>
  </fileset>
</unzip> 
```

# c# - 自动创建 SQL Server CREATE ASSEMBLY 脚本

> ID：10583862
> 
> 赞同：3
> 
> 时间：2012-05-14T13:01:39.930
> 
> 标签：c#, sql-server, sql-server-2008, sql-server-2005

当我使用 SSMS 创建程序集 dll 时，它会生成如下脚本：

```
CREATE ASSEMBLY [SqlFunctions]
AUTHORIZATION [dbo]
FROM 0x4D5A9...
WITH PERMISSION_SET = UNSAFE 
```

要自动生成这个脚本，我必须生成`FROM 0x4D5A9...`部分，它是 dll 的十六进制转储吗？

是否可以使用 SQL 函数或者我应该使用 ac# 函数生成这个十六进制转储？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:23:32.227

没有 SQL 函数。您可以使用一些 C# 来创建它，如下所示：

```
Assembly clrAssembly = ...;
const string createTemplate = @"CREATE ASSEMBLY [{0}] AUTHORIZATION [dbo] FROM 0x{1};";

var bytes = new StringBuilder();
using (var dll = File.OpenRead(clrAssembly.Location))
{
int @byte;
while ((@byte = dll.ReadByte()) >= 0)
    bytes.AppendFormat("{0:X2}", @byte);
}

var sql = string.Format(createTemplate, clrAssembly.GetName().Name, bytes); 
```

# c++ - 如何获得枚举的下一个值

> ID：10583863
> 
> 赞同：3
> 
> 时间：2012-05-14T13:01:44.793
> 
> 标签：c++, enums

我有以下问题：

```
 enum Language { English, French, German, Italian, Spanish };

    int main() {

    Language tongue = German;
    tongue = static_cast<Language>(tongue + 1);

      cout << tongue;                  

} 
```

//它返回 3 .....但我想获取索引 3 上的语言名称.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:09:12.933

您必须创建一个与您的枚举匹配的字符串数组，例如

```
std::string[] LangTxt = { "English", "French", "German", "Italian", "Spanish" }; 
```

那么您可以按如下方式引用它们：

```
cout << LangTxt[tongue]; 
```

请注意将定义保持在一起，以便它们并排更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T13:41:34.353

我发现显式查找表最适合从枚举转换为文本和将文本转换为枚举：

```
enum Language_Enum
{
    LANGUAGE_FIRST = 0,
    LANGUAGE_GERMAN = LANGUAGE_FIRST,
    LANGUAGE_ENGLISH,
    LANGUAGE_HOPI,
    LANGUAGE_WELSH,
    LANGUAGE_TEXAN,
    LANGUAGE_DUTCH,
    LANGUAGE_LAST
};

struct Language_Entry
{
    Language_Enum   id;
    const char *    text;
};

const Language Entry  language_table[] =
{
    {LANGUAGE_GERMAN, "German"},
    {LANGUAGE_HOPI, "Hopi"},
    {LANGUAGE_DUTCH, "Dutch"},
    // ...
};
const unsigned int language_table_size =
    sizeof(language_table) / sizeof(language_table[0]); 
```

与文本一起指定`enum`，允许更改枚举顺序，而对搜索引擎的影响最小。

`LANGUAGE_FIRST`和`LANGUAGE_LAST`标识符允许枚举的迭代：

```
Language_Enum l;
for (l = LANGUAGE_FIRST; l < LANGUAGE_LAST; ++l)
{
    // ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T13:05:30.407

在 C++ 中打印给定枚举值的枚举名称并不是那么简单。相反，您可以使用映射或字符串数​​组来保存值，这样您就可以同时获取索引和字符串值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T13:14:58.243

使用枚举的最佳方法是首先为您的枚举赋予初始值。enum TestEnum { Zero=0, One, Two } 即使您不指定任何内容，默认起始索引也为零。要获得特定索引处的值，只需这样做

```
TestEnum(index); 
```

# iphone - 从右侧动画 UINavigationBar

> ID：10583870
> 
> 赞同：0
> 
> 时间：2012-05-14T13:02:01.153
> 
> 标签：iphone, ios5, uinavigationcontroller, uinavigationbar

在 UINavigationController 中的 rootViewController 上，我将 UINavigationBar 设置为隐藏。当我从右侧推送一个新的视图控制器时，我希望导航栏也从右侧“推送”（动画，无论如何）。就像在电子邮件应用程序中搜索电子邮件时一样，隐藏导航栏，选择电子邮件，推送的视图控制器顶部已经有导航栏，当它从右侧动画时，它们会一起动画。

# android - 根据屏幕大小设置 WebView 缩放

> ID：10583871
> 
> 赞同：2
> 
> 时间：2012-05-14T13:02:06.153
> 
> 标签：android, webview, scale

我正在尝试根据正在使用的屏幕类型（ldpi、mdpi、hdpi、xlarge 等）设置 webview 的默认放大百分比。我可以在java代码中做到这一点吗？我该怎么做？我知道我可以将缩放设置为 true，这非常有用（wv.getSettings().setBuiltInZoomControls(true);），但是如何设置默认缩放大小。任何帮助都会很棒！谢谢..

这是一些伪代码，向您展示我的意思：

```
if(screenSize == xlarge){
setWebViewZoomScale(400);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:05:13.530

试试这个：

```
webView.getSettings().setLoadWithOverviewMode(true);
webView.getSettings().setUseWideViewPort(true);
webView.getSettings().setBuiltInZoomControls(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T13:51:15.703

您可以在“dimen.xml”文件中添加一个值，例如：

```
<integer name="WebViewDefaultZoom">10</integer> 
```

然后，您可以在“values-mdpi”、“values-hdpi”、“values-xhdpi”...中添加一个维度文件，其中包含每个分辨率所需的值...

然后在您的代码中，您将能够执行以下操作：

```
setWebViewZoomScale(getResources().getInteger(R.integer.WebViewHeight)); 
```

# c# - 如何在列表视图中显示对象的列表属性

> ID：10583873
> 
> 赞同：2
> 
> 时间：2012-05-14T13:02:14.560
> 
> 标签：c#, asp.net, listview

我目前在`ListView`. 我有一个普通的 C#`Student`类和一个`Classroom`类。在`Classroom`类中包含一个`Student`类列表，如下所示：

```
public class Classroom
{
    int classroomid {set;get;}
    List<Students> students{set;get;}
} 
```

我的问题是，如果我将我`DataSource`的绑定`ListView`到 的对象列表，`Classroom`我如何在 中呈现`Student`列表`ListView`？

```
<ListView>
    <ItemTemplate>
        <asp:Label Text='<%# Eval("classroomid") %>'></asp:Label>
        <asp:Label Text='<%# Eval("students") %>'</asp:Label>
        <asp:Label Text='<%# Eval("students.name") %>'</asp:Label>
    </ItemTemplate>
</ListView> 
```

上面的代码基本上解释了我想要实现的目标，或者可能显示学生的详细信息，例如姓名等。有什么方法可以实现吗？我确实了解嵌套的`ListView`作品，但我不确定实施如何。提前谢谢你的帮助。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:04:54.747

你可以使用`string.Join`：

```
<asp:Label runat="server" ID="LblStudents"
    Text='<%# string.Join(",", (List<string>)Eval("students")) %>'>
</asp:Label> 
```

**编辑**：我错过了这`Student`是一种自定义类型。因此，为了便于阅读，您最好在 ListView 的[`ItemDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound.aspx)事件中执行此操作。

但它也应该适用于 aspx：

```
<asp:Label runat="server" ID="LblStudents"
    Text='<%# string.Join(",", ((List<Student>)Eval("students")).Select(s=>s.Name)) %>'>
</asp:Label> 
```

在代码隐藏中：

```
protected void ListView1_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        Label LblStudents = (Label)e.Item.FindControl("LblStudents");

        Classroom cr = e.Item.DataItem as Classroom;
        if (cr != null && cr.students != null && cr.students.Count > 0)   
        {
            LblStudents.Text = string.Join(",", cr.students.Select(s => s.Name));
        }
    }
} 
```

# .net - 如何知道 SqlException 错误号？

> ID：10583875
> 
> 赞同：0
> 
> 时间：2012-05-14T13:02:25.837
> 
> 标签：.net, ado.net

我遇到了 SqlException 的问题。在我的 c# 代码中，当我尝试在数据库中插入数据时，出现下一个错误：无法在对象错误号中插入重复键我在 Sql Server 中进行了约束。但我需要知道这个异常的错误代码？我应该做什么？

```
 try{
      connect c = new connection();
      DataTable d = c.query("INSERT INTO User (code, name, surname) VALUES ('"+code+"',           '"+name+"', '"+surname+"')");
      }
      catch(SqlException e)
      {
     if(e.Number == ???)
      {
       MessageBox.Show("Sorry, you can't add duplicate data");
       } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:05:39.817

一个简单的解决方案是`switch`在*错误号*上：

```
switch (exc.Errors[0].Number){
    case 17:
    case 4060:
    case 18456:
    case 547:
        break;
} 
```

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.number.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.number.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T13:05:44.103

试试这个，看看你得到了什么错误号：

```
try
{
    connect c = new connection();
    DataTable d = c.query("INSERT INTO User (code, name, surname) VALUES ('"+code+"',           '"+name+"', '"+surname+"')");
}
catch(SqlException e)
{
    MessageBox.Show(e.Number.ToString());
} 
```

# android - 如何使用应用内结算来禁用应用程序中的广告？

> ID：10583882
> 
> 赞同：1
> 
> 时间：2012-05-14T13:02:55.640
> 
> 标签：android, in-app-purchase

我想使用应用内计费来控制一些应用功能，

实际上，我想从决定支持我的应用程序的用户那里删除广告。

问题不在于如何使用应用内计费进行购买，而是如何管理用户将卸载应用程序并稍后重新安装的情况。

在那种情况下，应用程序应该如何知道升级是否已购买？

我必须实施外部服务吗？或者还支持特定用户跟踪订单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:20:39.887

您不需要外部服务。您可以在 Google Play (Android Market)上将您的 InApp 购买项目设置为[“托管购买” 。](http://developer.android.com/guide/market/billing/billing_admin.html#billing-purchase-type)在应用启动时，向 Google Play 发送[RESTORE_TRANSACTIONS](http://developer.android.com/guide/market/billing/billing_overview.html#billing-request) BillingRequest。此请求检索受管购买的用户交易状态。仅当您需要检索用户的事务状态时才应发送此请求，这通常仅在您的应用程序重新安装或首次安装在设备上时。

# windows - 我们可以在单个 CPU 的两个操作系统中同时运行程序吗？

> ID：10583883
> 
> 赞同：-4
> 
> 时间：2012-05-14T13:02:57.060
> 
> 标签：windows, linux, compatibility

我的系统有两个操作系统——Windows 7 和 Ubuntu。现在我想在 Ubuntu 和 Windows 中运行一个程序。

为了更好地解释，我想在 Ubuntu 中运行 Windows 程序。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:09:29.063

您通常不能同时运行两个操作系统，因为它们都想接管所有硬件。

基本上有两种选择：

1.  使用虚拟化在另一个操作系统中运行一个操作系统
2.  使用某种兼容层运行“外部”应用程序，例如 Cygwin（用于在 Windows 上运行 Linux 应用程序）或 Wine（用于在 Linux 上运行 Windows 应用程序）

# c - syscall 是 x86_64 上的指令吗？

> ID：10583891
> 
> 赞同：23
> 
> 时间：2012-05-14T13:03:32.767
> 
> 标签：c, linux, gcc, x86-64, machine-instruction

我想检查在 glibc 中执行系统调用的代码。我发现了这样的东西。

```
ENTRY (syscall)
    movq %rdi, %rax     /* Syscall number -> rax.  */
    movq %rsi, %rdi     /* shift arg1 - arg5\.  */
    movq %rdx, %rsi
    movq %rcx, %rdx
    movq %r8, %r10
    movq %r9, %r8
    movq 8(%rsp),%r9    /* arg6 is on the stack.  */
    syscall         /* Do the system call.  */
    cmpq $-4095, %rax   /* Check %rax for error.  */
    jae SYSCALL_ERROR_LABEL /* Jump to error handler if error.  */
L(pseudo_end):
    ret         /* Return to caller.  */ 
```

现在我的问题是系统调用（在`cmpq`指令之前）是否是指令？其次，如果是指令，ENTRY(syscall)是什么意思？ENTRY（我不知道 ENTRY 是什么）和指令的名称相同？其次，什么是L(pseudo_end)？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-14T13:14:11.573

[`syscall`](http://felixcloutier.com/x86/SYSCALL.html)是 x86-64 中的一条指令，用作[进行系统调用的 ABI 的](https://stackoverflow.com/questions/2535989/what-are-the-calling-conventions-for-unix-linux-system-calls-on-x86-64)一部分。（32 位 ABI 使用`int 80h`or `sysenter`，并且在 64 位模式下也可用，但在 64 位代码中使用 32 位 ABI 是个坏主意，尤其是对于带有指针参数的调用。）

但是还有一个[名为 的 C 库函数`syscall(2)`](http://man7.org/linux/man-pages/man2/syscall.2.html)，它是系统调用 ABI 的通用包装器。您的代码显示了该函数的转储，包括将返回值解码为`errno`-setting。`ENTRY(syscall)`只是意味着该功能从那里开始。

`L()`并且`ENTRY()`是 CPP 宏。

`L(pseudo_end)`只是一个可以作为跳转目标的标签。也许代码会`SYSCALL_ERROR_LABEL`跳回到那里，尽管对于那个代码块来说它会更有效`ret`，所以它可能是以前版本的遗物，或者用于其他东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T13:09:50.490

是的，`syscall`是关于 x86-64 的指令。`sysenter`在 i686 上有类似的指令。

`ENTRY(syscall)`将是一个宏。可能会扩展到符号定义，您必须为此使用 grep。

# android - 如何使用 ContactsContract URI 在 android 中更新联系人的星标值

> ID：10583893
> 
> 赞同：0
> 
> 时间：2012-05-14T13:03:34.610
> 
> 标签：android, contacts

我有个问题。如果我们有特定联系人的姓名或号码，如何更新联系人的星标值。请注意，这应该使用 ContactsContract URI 来完成，因为不推荐使用 PEOPLE URI。我尝试了不同的解决方案，但似乎没有任何效果。需要帮忙。寻找可能的最佳解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T12:01:05.223

最后我得到了一个解决方案:)

使用联系人 URI，我们可以更新联系人的星标值。

values.put(Contacts.STARRED, 1);

getContentResolver().update(Contacts.CONTENT_URI, values, Contacts.DISPLAY_NAME + "= ?", strNamevalue);

它会起作用的

# javascript - 使用 knockoutjs 验证非英文字符的输入文本框的自定义规则

> ID：10583896
> 
> 赞同：2
> 
> 时间：2012-05-14T13:03:40.443
> 
> 标签：javascript, knockout.js

我正在使用 MVC 3 和 knockoutjs 库开发应用程序。另外我正在研究淘汰赛验证插件。我需要验证允许符号的输入文本值。据我所知，这些没有本地规则，所以我必须创建一个自定义规则。不好的是我对正则表达式和javascript的了解很差。我需要编写一个自定义函数来验证文本框输入字段并且不允许非英文字符。允许使用所有其他符号。我想我将能够创建自定义规则，但我需要验证输入字段的正则表达式。任何有关工作示例的帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:58:38.400

> 不允许非英文字符

和

> 允许使用所有其他符号

似乎与我相矛盾，但我会尽力帮助:)

首先，您应该**考虑使用 Ajax 进行验证，因为服务器端语言通常对 Unicode 有更好的支持**。如果这不是一个选项，那么首先将带有[Unicode 插件的](http://xregexp.com/plugins/)[XRegExp](http://xregexp.com/)库添加到您的页面。

要创建可识别 Unicode 的正则表达式，请使用以下形式：

```
var englishLettersOrSymbols = XRegExp('[\\p{^Letter}\\p{Latin}]*'); 
```

这里我们说我们接受零个或多个 ( `... *`) 符号，每个符号是 ( `[ ... ]`) 非字母 ( `\\p{^Letter}`) 或来自基本拉丁字母 ( `\\p{Latin}`) 的字母。

现在您的自定义验证规则将如下所示：

```
ko.validation.rules['englishLettersOrSymbols'] = {
    validator: function(value){
        var rule= XRegExp('[\\p{^Letter}\\p{Latin}]*');
        return rule.test(value);
    },
    message: 'Sorry, {0} this is not valid'
}; 
```

你会像这样在你的代码中使用它：

```
var vewModel = {
    // ...
    myField: ko.observable().extend({englishLettersOrSymbols: true}),
    // ...
}; 
```

* * *

**编辑：**`|`从正则表达式中删除。谢谢，[@slevthan](https://stackoverflow.com/users/1421022/)。*这本身*不是错误，因为`\\p{^Letter}`已经包含`|`符号，因此，正则表达式仍然可以工作。然而，这非常具有误导性。

# c# - Parallel.ForEach 最后没有线程

> ID：10583901
> 
> 赞同：3
> 
> 时间：2012-05-14T13:04:12.620
> 
> 标签：c#, multithreading, parallel.foreach

我正在测试一个应该编译很多项目/文件的应用程序。

我有一个 ConucrrentBag，应该与 Parallel 一起使用。

```
private readonly ConcurrentBag<string> m_files; 
```

我对并行的呼吁是这样的：

```
Parallel.ForEach(m_files, new ParallelOptions
            {
                MaxDegreeOfParallelism = MaxProcesses,

            }, currFile => ProcessSingle(currFile.ToString())); 
```

MaxProcess 的数量是LogicalCpu*2。

当我编译 140 个项目时，到最后 Parallel 将启动线性较少的线程。至少最后 4 个项目只有一个线程在运行。这不是很好，但没关系。

现在我的问题：

当我编译大约 14000 多个项目时（它是 COBOL-SOURCE ;-) 和一个非常大的系统）最后一个模块不会被编译，因为 Parallel.ForEach 没有为此启动新线程。此时没有有效的工作线程。但是concurrentBag 中仍然有140 个项目。

有人知道如何解决这个问题吗？

**编辑：**该问题仅在我运行编译器时发生。不运行编译器（为了更快的测试）它工作得很好......

**编辑：**

当我启动 Parallel.ForEach 进程时，ConcurrentBag 已经完全填充。

有关详细信息，SingleProcess 中的代码：

```
private void ProcessSingle(string item)
        {
            Monitor.Enter(lockingObj);
            if (m_files.TryTake(out item))
            {
                if (CompilingModules <= 0)
                {
                    OnQueueStarted(new EventArgs());
                }
                CompilingModules++;
                Monitor.Exit(lockingObj);
                OnQueueItemStateChanged(new ItemQueueEventArgs(item, null, ItemQueueType.Done, ItemQueueObject.String));

                OnQueueItemStateChanged(new ItemQueueEventArgs(item, null, ItemQueueType.Dequeued, ItemQueueObject.String));
                using (CobolCompiler compiler = new CobolCompiler())
                {
                    compiler.OutputDataReceived += (sender, e) => OnOutputDataReceived(e);
                    compiler.Compile(item);
                    Thread.Sleep(2000);
                    if (compiler.LinkFailure)
                    {
                        if (ObjWithoutDll.ContainsKey(item))
                        {
                            if (ObjWithoutDll[item] <= 2)
                            {
                                m_files.Add(item);
                                OnQueueItemStateChanged(new ItemQueueEventArgs(item, null, ItemQueueType.Enqueued, ItemQueueObject.String));
                                ObjWithoutDll[item]++;
                            }
                            else
                            {
                                OnQueueItemStateChanged(new ItemQueueEventArgs(item, null, ItemQueueType.LinkError, ItemQueueObject.String));
                                ObjWithoutDll.Remove(item);
                            }
                        }
                        else
                        {
                            ObjWithoutDll.Add(item, 0);
                            m_files.Add(item);
                            OnQueueItemStateChanged(new ItemQueueEventArgs(item, null, ItemQueueType.Enqueued, ItemQueueObject.String));
                        }
                    }
                    else
                    {
                        if (compiler.DllExisting)
                        {
                            ObjWithoutDll.Remove(item);
                        }
                        OnQueueItemStateChanged(compiler.DllExisting ? new ItemQueueEventArgs(item, null, ItemQueueType.Done, ItemQueueObject.String) : new ItemQueueEventArgs(item, null, ItemQueueType.Failed, ItemQueueObject.String));
                    }

                }

                Monitor.Enter(lockingObj);
                CompiledModules++;
                if (CompiledModules % 300 == 0)
                {
                    Thread.Sleep(60000);
                }
                CompilingModules--;
                if (CompilingModules <= 0 && m_files.Count <= 0)
                {

                    try
                    {
                        Process prReschk = new Process();
                        FileInfo batch = new FileInfo(@"batches\reschkdlg.cmd");
                        if (!batch.Exists)
                        {
                            Assembly _assembly = Assembly.GetExecutingAssembly();
                            StreamReader _textStreamReader = new StreamReader(_assembly.GetManifestResourceStream(@"Batches\reschkdlg.cmd"));
                        }

                        if (!File.Exists(Config.Instance.WorkingDir + @"reschkdlg.exe"))
                        {
                            File.Copy(Config.Instance.VersionExeDirectory + @"reschkdlg.exe", Config.Instance.WorkingDir + @"reschkdlg.exe");
                        }

                        prReschk.StartInfo.FileName = @"cmd.exe";
                        prReschk.StartInfo.Arguments = @"/c " + batch.FullName + " " + Config.Instance.Version.Replace(".", "") + " " + @"*" + " " + Config.Instance.WorkingDir;
                        prReschk.StartInfo.CreateNoWindow = true;
                        prReschk.StartInfo.UseShellExecute = false;
                        prReschk.Start();
                        prReschk.Close();
                        prReschk.Dispose();
                    }
                    catch
                    {
                    }

                    OnQueueFinished(new EventArgs());
                }
            }
            Monitor.Exit(lockingObj);
        } 
```

这里是 CobolCompiler 类的代码片段：

公共无效编译（字符串文件）{

```
 file = file.ToLower();

        Process prCompile = new Process();
        Dir = Directory.CreateDirectory(c.WorkingDir + random.Next() + "\\");

        try
        {
            // First clean up the folder
            CleanUpFolder(true, file);

            // First set lock and copy all sources
            Monitor.Enter(lockingObj);
            if (filesToCopy == null)
            {
                CopySource(Dir.FullName);
            }
            Monitor.Exit(lockingObj);

            FileInfo batch = new FileInfo(@"batches\compile.cmd");
            if (!batch.Exists)
            {
                Assembly _assembly = Assembly.GetExecutingAssembly();
                StreamReader _textStreamReader = new StreamReader(_assembly.GetManifestResourceStream(@"Batches\compile.cmd"));
                _textStreamReader.Dispose();
            }

            prCompile.StartInfo.FileName = @"cmd.exe";
            prCompile.StartInfo.Arguments = @"/c " + batch.FullName + " " + c.Version.Replace(".", "") + " " + file.Remove(file.LastIndexOf('.')) + " " + Dir.FullName + " " + Dir.FullName.Remove(Dir.FullName.IndexOf(@"\"));
            prCompile.StartInfo.CreateNoWindow = true;
            prCompile.StartInfo.UseShellExecute = false;
            prCompile.StartInfo.RedirectStandardOutput = true;
            prCompile.StartInfo.RedirectStandardError = true;
            prCompile.StartInfo.WorkingDirectory = Assembly.GetExecutingAssembly().Location.Remove(Assembly.GetExecutingAssembly().Location.LastIndexOf("\\") + 1);
            prCompile.EnableRaisingEvents = true;
            prCompile.OutputDataReceived += prCompile_OutputDataReceived;
            prCompile.ErrorDataReceived += prCompile_OutputDataReceived;
            prCompile.Start();
            prCompile.BeginErrorReadLine();
            prCompile.BeginOutputReadLine();
            prCompile.WaitForExit();
            prCompile.Close();
            prCompile.Dispose();

            CleanUpFolder(false, file);

            if (File.Exists(Config.Instance.WorkingDir + file.Remove(file.LastIndexOf('.')) + ".dll") || File.Exists(Config.Instance.WorkingDir + file.Remove(file.LastIndexOf('.')) + ".exe"))
            {
                dllExisting = true;
                linkFailure = false;
            }
            else
            {
                if (File.Exists(Config.Instance.WorkingDir + file.Remove(file.LastIndexOf('.')) + ".obj"))
                {
                    linkFailure = true;
                }
                dllExisting = false;
            }

        }
        catch (ThreadAbortException)
        {
            if (prCompile != null)
            {
                // On Error kill process
                prCompile.Kill();
                prCompile.Dispose();
            }
        }
        catch (Win32Exception)
        {
        }
        catch (Exception)
        {
            dllExisting = false;
        }

        while (true)
        {
            try
            {
                if (Directory.Exists(Dir.FullName))
                {
                    Directory.Delete(Dir.FullName, true);
                    break;
                }
                else
                {
                    break;
                }
            }
            catch
            {
            }
        }

    }
private void CopySource(string Destination)
{
    filesToCopy = new StringCollection();
    foreach (string strFile in Directory.GetFiles(c.WorkingDir))
    {
        string tmpStrFile = strFile.ToLower();

        foreach (string Extension in c.Extensions)
        {
            if (tmpStrFile.Contains(Extension))
            {
                filesToCopy.Add(tmpStrFile);
            }
        }
    }

    if (filesToCopy.Count > 0)
    {
        foreach (string strFile in filesToCopy)
        {
            File.Copy(strFile, Destination + strFile.Remove(0, strFile.LastIndexOf("\\")));
        }
    }
}

private void CleanUpFolder(bool PreCleanup, string Filename)
{
    //Copy all files from compilationfolder to working directory
    if (!PreCleanup)
    {
        foreach (string strFile in Directory.GetFiles(Dir.FullName, Filename.Remove(Filename.LastIndexOf(".") + 1) + "*"))
        {
            FileInfo fileToMove = new FileInfo(strFile);

            if (fileToMove.Name.ToLower().Contains(Filename.Remove(Filename.LastIndexOf("."))))
            {
                File.Copy(strFile, c.WorkingDir + fileToMove.Name, true);
            }
        }
    }

    //Delete useless files
    foreach (string filename in Directory.GetFiles(Config.Instance.WorkingDir, Filename.Remove(Filename.LastIndexOf("."))+".*"))
    {
        bool foundExt = c.Extensions.Contains(filename.Remove(0, filename.LastIndexOf(".") + 1));
        if (PreCleanup)
        {
            // Only delete files, which are not won't be compiled
            if(!foundExt)
            {
                File.Delete(filename);
            }
        }
        else
        {
            if (!Config.Instance.SaveLspFile && filename.Contains(".lsp"))
            {
                File.Delete(filename);
            }

            if (!Config.Instance.SaveLstFile && filename.Contains(".lst"))
            {
                File.Delete(filename);
            }
        }
    }
}

public void Dispose()
{
    Dispose(true);
    GC.SuppressFinalize(this);
}

protected virtual void Dispose(bool disposing)
{
    if (!disposed)
    {
        if (disposing)
        {
            Dir = null;
        }
        disposed = true;
    }
}

~CobolCompiler()
{
    Dispose (false);
} 
```

我只是在每次编译过程后睡了两秒钟就试过了。但这不会改变任何事情。

在编译过程中，CPU 为 100%。该应用程序正在收集 270 MB RAM。开始时只有 35MB。

不要害怕，我必须将所有源复制到临时文件夹，因为编译器无法在同一个工作目录中同时编译多个文件。

**编辑：** 我已经解决了没有线程但仍然有项目的问题。

在 ProcessSingle 中，当它未链接到 dll 时，我添加了我尝试再次编译的项目。

所以我从 14000 个项目开始，并在处理 Parallel.ForEach 时再次将项目（如果它们无法链接）添加到这个 concurrentBag。所以我以 14000 次 ForEach 运行结束，并且有 xxx 模块必须再次编译。:-(

我没看到。没有 WaitForExit 的 prReschk 的运行是有意的。因为检查超过 14000 个项目的资源需要很长时间，并且不应妨碍新的编译。

但是 ConcurrentBag 结束时线程较少的问题仍然存在 :( 但它只是在大量循环时才注意到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:24:29.693

Parallel.ForEach 方法将使用 .Net ThreadPool 来分配线程。并行运行的实际线程数将由 ThreadPool 控制，具体取决于系统 CPU 的负载。因此，您可能已指定 MaxDegreeOfParallelism 但这只是最大值，ThreadPool 可能会决定分配比该最大值更少的线程。

根据您在问题中提供的证据，在我看来，编译过程正在耗尽系统资源而不是事后清理。这可以解释为什么 140 次编译最终导致分配的线程数量逐渐减少 - ThreadPool 没有分配新线程，因为它认为 CPU 负载很重。

我会更仔细地研究编译过程是如何终止的。ProcessSingle 方法是否在编译完全完成之前返回？编译过程中是否存在内存泄漏？

作为一个实验，如果您在调用 ProcessSingle 后添加以下行，我很想知道它的行为是否有所不同：

```
 System.Threading.Thread.Sleep(2000); 
```

这将暂停线程两秒钟，然后将控制权传回 ThreadPool 以分配下一个任务。如果它改善了您的应用程序的行为，那么它强烈表明我的理论是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-23T12:28:16.657

如果`CopySource`抛出，那么您有一个未释放的锁`lockingObj`，并且无法取得进一步的进展。use`lock (lockingObj)`使用`finally`块来释放锁。

# linux - 将 mmap 的区域传回内核空间

> ID：10583903
> 
> 赞同：1
> 
> 时间：2012-05-14T13:04:24.620
> 
> 标签：linux, linux-kernel, linux-device-driver

我的问题是我们如何将 mmap'd 区域传回给模块，以便它可以操纵该内存。

我正在寻找的是：

1.  我的用户空间应用程序使用数百个线程运行（因此很难跟踪内核已将哪个缓冲区分配给哪个用户空间线程）。
2.  用户线程调用模块的 mmap 函数，得到它后，它用数据填充缓冲区。
3.  然后它必须使用 ioctl() 将此缓冲区传递给模块，以便模块进行一些处理并修改缓冲区。
4.  用户空间线程读取新数据

我不确定如何实施“步骤 3”。无论如何要将此用户缓冲区传递给模块，以便它知道它在内核空间中的哪个地址？

（我不能使用 malloc 或 copy_from_user）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:44:53.613

检查是否[**`virt_to_phys()`**](http://mirror.linux.org.au/linux-mandocs/2.6.12.6/virt_to_phys.html)适合您。

1.  用户空间线程调用**mmap()**。
2.  获取缓冲区地址，用数据填充缓冲区。
3.  **使用ioctl()**将缓冲区地址传递回模块。
4.  模块调用**virt_to_phys(addr)**，对缓冲区进行处理。
5.  稍后，用户空间线程读取处理后的数据。

# java - 当立即序列不可匹配时，Java 使用 Matcher 失败

> ID：10583909
> 
> 赞同：0
> 
> 时间：2012-05-14T13:04:54.340
> 
> 标签：java, regex

Matcher.find 查找下一个子序列，从给定的索引开始，该索引符合正则表达式。

如果下一个字符序列不符合要求，我该如何让它失败？

前任：

```
 String input = "123456text123";
    Matcher mat1 = Pattern.compile("\\d+").matcher(input);

    mat1.find();
    System.out.println(mat1.group()); //123456
    mat1.find(mat1.end());
    System.out.println(mat1.group()); //123 
```

我想知道是否有办法使第二次查找失败，因为下一个序列与 mat1 模式不匹配。

我希望能够以必须始终按顺序找到它们的方式“组合”匹配器。

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:07:54.983

您可以检查 previous 是否`mat1.end()`等于 next `mat1.start()`。

```
int lastEnd = -1;
while (mat1.find()) {

    // Was there any junk between last two matches?
    if (mat1.start() != lastEnd+1) {
        System.out.println("Fail.");
        break;
    }

    System.out.println(mat1.group());
    lastEnd = mat1.end();

} 
```

# ios - Frank 自动化框架是否为故障场景提供屏幕截图选项？

> ID：10583917
> 
> 赞同：2
> 
> 时间：2012-05-14T13:05:05.887
> 
> 标签：ios, cucumber, automated-tests

我知道 Frank 工具提供了用于捕获屏幕截图的选项。但这是用户定义的步骤。

截取应用程序的屏幕截图：

```
Then /^I save a screenshot with prefix (\w+)$/ do |prefix|
 filename = prefix + Time.now.to_i.to_s
 %x[screencapture #{filename}.png]
end 
```

但是在意外测试失败的情况下，是否有任何其他默认保存屏幕截图的可能性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:14:55.633

假设应用程序仍处于打开状态，您可以使用 After 挂钩调用 Frank 步骤，如果测试失败，该步骤会截屏。

试试这个：

```
After do |scenario|
    if scenario.failed?
        steps %Q{
            Then I save a screenshot with prefix test
        }
    end 
end 
```

# html - 如何使 div 为 100% 高度工作，而不仅仅是 iframe？

> ID：10583925
> 
> 赞同：1
> 
> 时间：2012-05-14T13:05:31.800
> 
> 标签：html, css, height, stylesheet

我有一个内容区域高度为 100% 的布局。问题是它使 iframe 在 100% 高度下完美工作，但我无法让它为常规 div 工作。有没有办法让 div 的高度为 100%？白色区域应填充黑色区域，但事实并非如此。任何帮助将不胜感激。

[http://jsfiddle.net/mp8nr/1/](http://jsfiddle.net/mp8nr/1/)

![在此处输入图像描述](../Images/3450f1f42a82321672b5c5cc8a379217.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:15:29.353

如果您也将高度设置`.inner-content`为 100%，它会起作用：

```
.inner-content {
    margin-bottom: -109px;
    padding-top: 109px;
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T13:20:43.020

将您的内容类设置为

```
height: 100%; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T13:13:19.577

使用位置：绝对

[http://jsfiddle.net/adrianjmartin/mp8nr/27/](http://jsfiddle.net/adrianjmartin/mp8nr/27/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T13:17:57.280

您还必须设置父元素高度：

```
<section role="main" id="content">
  <div class="inner-content" style="height: 100%"> 
```

（这当然应该以某种方式进入样式表......您将该类用于页面中的其他元素，这就是我没有把它放在那里的原因......）

# c# - Html Agility Pack，从节点中选择节点

> ID：10583926
> 
> 赞同：19
> 
> 时间：2012-05-14T13:05:32.793
> 
> 标签：c#, .net, html-agility-pack

为什么这会选择`<li>`我文档中的所有元素？

```
HtmlWeb web = new HtmlWeb();
HtmlDocument doc = web.Load(url);

var travelList = new List<Page>();
var liOfTravels = doc.DocumentNode.SelectSingleNode("//div[@id='myTrips']")
                     .SelectNodes("//li"); 
```

我想要的是使用“myTrips”获取所有`<li>`元素。`<div>``id`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-14T13:32:01.683

这有点令人困惑，因为您希望它只会在 id 为“myTrips”的 div 上执行 selectNodes，但是如果您执行另一个 SelectNodes("//li")，它将从文档顶部执行另一个搜索。

我通过将语句合并为一个来解决此问题，但这仅适用于您只有一个 id 为“mytrips”的 div 的网页。查询将如下所示：

> doc.DocumentNode.SelectNodes("//div[@id='myTrips'] //li");

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-20T12:24:26.847

```
var liOfTravels = doc.DocumentNode.SelectSingleNode("//div[@id='myTrips']")
                 .SelectNodes(".//li"); 
```

注意第二行中的点。基本上在这方面 HTMLAgitilityPack 完全依赖于 XPath 语法，但是结果并不直观，因为这些查询实际上是相同的：

```
doc.DocumentNode.SelectNodes("//li");
some_deeper_node.SelectNodes("//li"); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-02T15:57:49.420

在某些情况下，创建新节点可能是有益的，并且可以让您更直观地使用 xpath。我发现这在几个地方很有用。

```
var myTripsDiv = doc.DocumentNode.SelectSingleNode("//div[@id='myTrips']");
var myTripsNode = HtmlNode.CreateNode(myTripsDiv.InnerHtml);
var liOfTravels = myTripsNode.SelectNodes("//li"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-14T14:28:29.340

您可以使用 Linq 查询执行此操作：

```
HtmlWeb web = new HtmlWeb();
HtmlDocument doc = web.Load(url);

var travelList = new List<HtmlNode>();
foreach (var matchingDiv in doc.DocumentNode.DescendantNodes().Where(n=>n.Name == "div" && n.Id == "myTrips"))
{
    travelList.AddRange(matchingDiv.DescendantNodes().Where(n=> n.Name == "li"));
} 
```

我希望它有帮助

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-12T22:53:54.673

这对我来说似乎也违反直觉，如果您`selectNodes`在特定节点上运行一个方法，我认为它只会搜索该节点下的内容，而不是一般文档中的内容。

无论如何，如果你改变这一行：

```
var liOfTravels = 
doc.DocumentNode.SelectSingleNode("//div[@id='myTrips']").SelectNodes("//li"); 
```

到：

```
var liOfTravels = 
doc.DocumentNode.SelectSingleNode("//div[@id='myTrips']").SelectNodes("li"); 
```

我想你会没事的，我刚刚遇到了同样的问题，并且为我解决了这个问题。我不确定 li 是否必须是您拥有的节点的直接子节点。

# html - 无法在 chrome 中寻找 html5 视频或音频

> ID：10583931
> 
> 赞同：41
> 
> 时间：2012-05-14T13:05:47.910
> 
> 标签：html, google-chrome, html5-video, html5-audio

几个星期以来，我一直在摆弄 HTML5 视频/音频的地狱。通常会在一段时间后弹出某些失败的原因，但我一直无法找到为什么我在 chrome 中遇到转发和倒带问题。

无论如何...

请求视频或音频文件时，将在 extjs 面板中加载视频或音频标签。这些文件作为流发送，它们在 IE 和 firefox 中运行良好（在向响应标头添加持续时间后） safari 存在问题，但显然整个站点在 HTTPS 中运行（目前正在处理）。

在 chrome 中（这是我的问题并且是最新版本），视频和音频加载得很好，但我无法倒带或前进。当试图寻找视频时，只需前进几秒钟，直到它到达流的末尾。音频也可以正常播放，但尝试多次倒带（或快进）只会破坏进度条并停止播放音频。

我不完全确定服务器发送了什么，但我想知道这是否可能是由于响应中缺少数据造成的。如果不是其他任何事情都可以让我找到解决办法，那也是同样受欢迎的。我想我已经涵盖了几乎整个设置，并且我确保每个浏览器都有一个源标签。

**编辑：**这是 javascript 为其中一个文件生成的代码：

```
<video width="1889" height="2" preload="auto" autoplay="1" controls="1" id="videoPlayer" style="width: 1889px; height: 233px; ">
<source src="http://localhost:8080/epaServer/epa/documents/496.ds_webm?sessionId=5616fde4-50af-43d6-a57c-f06540b64fcb" type="video/webm">
<source src="http://localhost:8080/epaServer/epa/documents/496.ds_mp4?sessionId=5616fde4-50af-43d6-a57c-f06540b64fcb" type="video/mp4">
<div>Your browser doesn't support html5 video. <a>Upgrade Chrome</a></div>
</video> 
```

我还发现，即使我将它们与应用程序分开打开，我也无法查找任何文件。

我试图自己查找更多信息，这些是网络选项卡中显示的标题 chrome：

> 请求网址：https://localhost:8443/epaServer/epa/documents/496.ds_webm?sessionId=5616fde4-50af-43d6-a57c-f06540​​b64fcb
> 
> 请求方法：GET
> 
> 状态码：200 OK
> 
> **请求标头**
> 
> Accept: */* Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
> 
> 接受编码：身份；q=1，*；q=0
> 
> 接受语言：en-US,en;q=0.8
> 
> 连接：保持活动
> 
> Cookie:sessionId=5616fde4-50af-43d6-a57c-f06540​​b64fcb
> 
> 主机：本地主机：8443
> 
> 用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19
> 
> 查询字符串参数查看 URL 编码
> 
> sessionId:5616fde4-50af-43d6-a57c-f06540​​b64fcb
> 
> **响应标头**
> 
> 缓存控制：私有
> 
> 内容长度：1588816
> 
> 内容类型：video/webm
> 
> 日期：2012 年 5 月 14 日星期一 14:23:02 GMT
> 
> 过期时间：周四，1970 年 1 月 1 日 01:00:00 CET
> 
> 服务器：Apache-Coyote/1.1
> 
> X 内容持续时间：17.31

>

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-16T13:20:26.140

我找到了它不能解决这个问题的原因：

[HTML5 视频不会循环播放](https://stackoverflow.com/questions/8088364/html5-video-will-not-loop)

我们的服务器现在不理解*部分内容。*因此，chrome 正在发送对未得到答复的内容的请求，这反过来又使我们的视频和音频无法搜索（并且无法循环）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-15T12:55:04.387

您必须处理 Chrome 将发送到您的流媒体服务器的 req.headers['range'] 。

请参考我下面的代码。它在 Chrome、Firefox、Edge 和 IE 上运行良好。我还没有在 Safari 上测试它，但希望它也可以工作。

我使用 Sails/Nodejs 后端和 gridFS/mongodb 数据库将视频文件存储为块。

```
try {
        let foundMetaFile = await GridFS.findOne({id: fileId});

        if (!foundMetaFile) return res.status(400).json(Res.error(undefined, {message: `invalid ${fileId} file`}));

        let fileLength  = foundMetaFile['length'];
        let contentType = foundMetaFile['contentType'];
        // let chunkSize   = foundMetaFile['chunkSize'];
        if(req.headers['range']) {

            // Range request, partialle stream the file
            console.log('Range Reuqest');
            var parts = req.headers['range'].replace(/bytes=/, "").split("-");
            var partialStart = parts[0];
            var partialEnd = parts[1];

            var start = parseInt(partialStart, 10);
            var end = partialEnd ? parseInt(partialEnd, 10) : fileLength - 1;
            var chunkSize = (end - start) + 1;

            console.log('Range ', start, '-', end);

            res.writeHead(206, {
                'Content-Range': 'bytes ' + start + '-' + end + '/' + fileLength,
                'Accept-Ranges': 'bytes',
                'Content-Length': chunkSize,
                'Content-Type': contentType
            });
        }

        let { mongodbConnection } = global;
        let bucket = new GridFSBucket(mongodbConnection, { bucketName: 'fs' });

        return new Promise ((resolve, reject) => {
            let downloadStream  = bucket.openDownloadStream(fileId);
            downloadStream.on('error', (err) => {
                console.log("Received Error stream")
                res.end();
                reject(err);
            })

            downloadStream.on('end', () => {
                console.log("Received End stream");
                res.end();
                resolve(true);
            })
            console.log("start streaming");
            downloadStream.pipe(res);
        })

    } catch (error) {
        switch (error.name) {
            case 'UsageError':
                return res.status(400).json(Res.error(undefined, {message: 'invalid Input'}));
            case 'AdapterError':
                return res.status(400).json(Res.error(undefined, {message: 'adapter Error'}));
            default:
                return res.serverError(error);
        } 
```

# c#-4.0 - 无法从 C# 中保存 Gnuplot png

> ID：10583932
> 
> 赞同：2
> 
> 时间：2012-05-14T13:05:49.423
> 
> 标签：c#-4.0, gnuplot

我试图从 c# 中打开 gnuplot 并让它保存图表的 png。我有两个问题

1) gnuplot 的黑色命令行框和实际绘图都会出现。我希望这两个都不要出现。

2) 将终端设置为 png 并绘制 sin(x) 后，它实际上并没有保存文件。不过，这些相同的命令在 gnuplot 中也可以使用。

任何提示将不胜感激

谢谢

```
 private void button1_Click(object sender, EventArgs e)
    {
        string Pgm = @"C:\Program Files\gnuplot\bin\gnuplot.exe";
        Process extPro = new Process();
        extPro.StartInfo.FileName = Pgm;
        extPro.StartInfo.UseShellExecute = false;
        extPro.StartInfo.RedirectStandardInput = true;
        extPro.Start();

        StreamWriter gnupStWr = extPro.StandardInput;

        gnupStWr.WriteLine("Set terminal png");
        gnupStWr.WriteLine(@"set output 'c:\Users\FrazMan\Desktop\sinxplot2.png'");
        gnupStWr.WriteLine("plot sin(x)");
        gnupStWr.WriteLine("set terminal wxt enhanced");
        gnupStWr.WriteLine("set output");
        gnupStWr.Flush();
    } 
```

![这就是图像形式发生的事情](../Images/45d7b4b798a3961e7ec9773a5288aa8d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:53:45.600

在我看来，您的 GNUPLOT 脚本可能有问题

尝试更简单的

我认为以下脚本应该可以工作

```
gnupStWr.WriteLine("set terminal png");
gnupStWr.WriteLine(@"set output 'c:\Users\FrazMan\Desktop\sinxplot2.png'");
gnupStWr.WriteLine("plot sin(x)"); 
```

尽量避免使用大写字母`"set terminal png"`

我希望它会帮助你

# java - 使用 jaxb 生成大型 xml

> ID：10583934
> 
> 赞同：1
> 
> 时间：2012-05-14T13:06:02.013
> 
> 标签：java, xml, jaxb2

我需要生成一个大的 xml。我目前正在使用 JAXB 2.0 。

问题是如果我将所有对象都保存在内存中并生成堆空间不足的概率非常高。

我想知道如何做到这一点的最佳方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T15:12:53.400

您可以使用 StAX 来编组 XML 的外部主体，然后使用 JAXB 来编组重复的对象，而不必将它们全部放在内存中。

看到这个线程： http: [//glassfish.10926.n7.nabble.com/Marshalling-Large-data-into-xml-td55636.html](http://glassfish.10926.n7.nabble.com/Marshalling-Large-data-into-xml-td55636.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:35:02.327

我建议你以下。

如何创建 XML？我猜你首先创建你的对象图，即创建所有对象和它们之间的依赖关系。然后你调用这样的东西：

`JAXBContext.newInstance("YOUR PACKAGES LIST").marshal(rootObject, out);`

JAXB 将您的对象作为 bean 访问，即使用 getter。因此，您实际上不必在编组之前创建完整的对象图。您只需提供 getter 的按需实现，以便他们能够根据请求获取对象。我相信它会帮助你减少内存消耗。

如果您不想在类中实现这种按需机制，您可以使用 AspectJ 或其他面向方面的库（或直接字节码修改库，如 cglib 或 javassist）将按需检索代码注入模型对象。

# c# - GetLastWriteTime 返回 12/31/1600 7:00:00 PM

> ID：10583938
> 
> 赞同：17
> 
> 时间：2012-05-14T13:06:11.873
> 
> 标签：c#, directory, .net-3.5, label

我正在使用以下代码将目录的日期修改时间写入标签

```
string selectedPath = comboBox1.SelectedItem.ToString();
DateTime lastdate = Directory.GetLastWriteTime(selectedPath);
datemodified.Text = lastdate.ToString(); 
```

它返回日期 12/31/1600 7:00:00 PM，我不知道它是从哪里获得该日期的。谁能帮我理解为什么它会返回那个日期以及我该如何解决它？我正在使用 .NET 3.5

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-14T13:08:45.877

从[文档中](http://msdn.microsoft.com/en-us/library/system.io.directory.getlastwritetime.aspx)：

> 如果 path 参数中描述的目录不存在，则此方法返回 1601 年 1 月 1 日午夜 12:00，协调世界时 (UTC)，调整为本地时间。

所以大概你的时区是UTC-5（一月），并且目录不存在......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:10:31.113

首先想到的是你的时间设置是否正确。第二个想法是右键单击该文件夹并查看它在属性中的内容。最后，我会创建新的测试文件夹并在其上运行一些 GetLastWriteTime 测试，这样你就知道你得到了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-05T17:30:31.503

`GetLastWriteTime`并不总是返回可靠的日期时间，使用这个

```
string selectedPath = comboBox1.SelectedItem.ToString();
DateTime now = DateTime.Now;
TimeSpan localOffset = now - now.ToUniversalTime();
DateTime lastdate = File.GetLastWriteTimeUtc(selectedPath) + localOffset;
datemodified.Text = lastdate.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-27T13:06:30.620

老问题，但今天我遇到了这个问题。当您的路径无效或文件不存在时，也会返回该特定日期，因为在任何这些情况下都没有内置异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-14T19:20:51.820

`GetLastWriteTime()`使用/结果测试未找到文件的简单方法`GetLastWriteTimeUtc()`如下：

```
// ##### Local file time version #####
DateTime fileTimeEpochLocal=DateTime.FromFileTime(0);
// Use File.GetLastWriteTime(pathname) for files
// and Directory.GetLastWriteTime(pathname) for directories
DateTime lastWriteTime=Directory.GetLastWriteTime(selectedPath); 

// Check for a valid last write time
if (lastWriteTime!=fileTimeEpochLocal) // File found
    DoSomethingWith(selectedPath,lastWriteTime);
else // File not found
    HandleFileNotFound(selectedPath);

// ##### UTC file time version #####
DateTime fileTimeEpochUtc=DateTime.FromFileTimeUtc(0);
// Use File.GetLastWriteTimeUtc(pathname) for files
// and Directory.GetLastWriteTimeUtc(pathname) for directories
DateTime lastWriteTimeUtc=Directory.GetLastWriteTimeUtc(selectedPath);

// Check for a valid last write time
if (lastWriteTimeUtc!=fileTimeEpochUtc) // File found
    DoSomethingWith(selectedPath,lastWriteTimeUtc);
else // File not found
    HandleFileNotFound(selectedPath); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-01T17:42:25.670

在 .net core 中，您需要获取文件的绝对路径。添加对的引用`Microsoft.Extensions.Hosting`并将其注入到您的构造函数中。该`ContentRootPath`属性将是您的网络根目录。

获取您的服务器路径

```
var Files = FIO.Directory.GetFiles("Unzipped"); 
```

这将是您的实际路径

```
var Path = string.Format(@"{0}\{1}",WebRootPath, Files[0]);

var CreationDate = File.GetLastWriteTime(Path); 
```

# flex-lexer - (?rs:pattern) 的弹性使用

> ID：10583939
> 
> 赞同：1
> 
> 时间：2012-05-14T13:06:12.230
> 
> 标签：flex-lexer

我正在尝试使用[Flex 手册](http://westes.github.io/flex/manual/Patterns.html#Patterns)中提到的正则表达式 (?rs:pattern) 。

以下代码仅在我输入小写字母“a”而不是大写字母“A”时有效

```
%%
[(?i:a)] { printf("color"); }
\n { printf("NEWLINE\n"); return EOL;}
. { printf("Mystery character %s\n", yytext); }
%% 
```

输出

```
a
colorNEWLINE
A
Mystery character A
NEWLINE 
```

反向也是如此，即如果我将行 (?i:a) 更改为 (?i:A)，它只将“A”视为有效输入，而不是“a”。如果我删除方括号，即 [] 它会给出错误

```
"ex1.lex", line 2: unrecognized rule 
```

如果我附上“（？i：a）”，那么它会编译，但在执行后它总是会进入最后一条规则，即“神秘角色......”

请让我知道如何正确使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:12:47.810

按照我阅读手册的方式，没有方括号的规则应该执行您正在寻找的不区分大小写的匹配——我无法解释为什么您在编译时会出错。但是您可以通过以下两种方式之一实现相同的行为。一、可以枚举字符类中的大小写字符：

```
%%
[Aa] { printf("color"); }
%% 
```

`-i`第二，您可以在命令行或`--case-insensitive`.l 文件中指定不区分大小写的扫描仪选项：

```
%%
%option case-insensitive
[a] {printf("color"); }
%% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:16:17.763

我想我迟到了.. :) 无论如何，`flex`您使用的是哪个版本，我已经`2.5.35`安装了版本并正确识别了上述模式。可能你用的是旧版本！！！

现在关于用`[`] 括号括起来的内容。它之所以有效，是因为根据`[]`正则表达式规则，它将尝试匹配任何个人`(`, `?`, `i`, `:`,`a`或`)`. 这就是为什么`a`得到认可而不是`A`（因为它不在列表中）。

# c# - 为选项卡控件设置 HotTracking

> ID：10583944
> 
> 赞同：1
> 
> 时间：2012-05-14T13:06:25.413
> 
> 标签：c#, wpf, xaml

我正在尝试为 Wpf 中的选项卡控件实现 HotTracking。我的理解是这不包含在 wpf tabcontrol 中，我想使用它。

为了我的利益 HotTracking = 当鼠标悬停在未选择的选项卡上时，选项卡将改变颜色（通常在选中和未选中之间）

我使用了一些我自己的知识和这篇文章[如何在 XAML 中为边框设置 MouseOver 事件/触发器？](https://stackoverflow.com/questions/2388429/how-to-set-mouseover-event-trigger-for-border-in-xaml)但我似乎无法让它发挥作用。

这就是一切。

```
<Window x:Class="TestingWpF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="1024" Width="1280">
<Window.Resources>
    <Style TargetType="{x:Type TabItem}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabItem}">
                    <Grid>
                        <Border 
                            Name="Border"
                            CornerRadius="6,6,0,0" >
                            <ContentPresenter x:Name="ContentSite"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            ContentSource="Header"
                            Margin="12,2,12,2"/>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="Border" Property="Background" Value="LightBlue" />
                        </Trigger>
                        <Trigger Property="IsSelected" Value="False">
                            <Setter TargetName="Border" Property="Background" Value="AliceBlue" />
                        </Trigger>
                        <Trigger Property=" Border.IsMouseOver" Value="True">
                            <Setter Property="Border.Background" Value="Green" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>

<Grid>
    <TabControl Grid.ColumnSpan="2" Grid.RowSpan="2" Height="309" HorizontalAlignment="Left" Name="tabControl1" VerticalAlignment="Top" Width="781" Padding="0">
        <TabItem Header="tabItem1" >

        </TabItem>
        <TabItem Header="tabItem2" >

            </TabItem>
     </TabControl>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:20:11.677

我想通了，我的问题是这个部分

```
<Trigger Property="IsSelected" Value="True">
   <Setter TargetName="Border" Property="Background" Value="LightBlue" />
</Trigger>
<Trigger Property="IsSelected" Value="False">
  <Setter TargetName="Border" Property="Background" Value="AliceBlue" />
</Trigger>
<Trigger Property=" Border.IsMouseOver" Value="True">
//Change this line 
//<Setter Property="Border.Background" Value="Green" />    
//To This
  <Setter TargetName="Border" Property="Background" Value="Green" />
</Trigger> 
```

最后一个触发器是不工作的。如果你注意到我在 setter 中使用了不同的属性。我改变了它以匹配其他两个并且它有效

# .net - MSMQ 和 WF 有什么区别？

> ID：10583948
> 
> 赞同：-1
> 
> 时间：2012-05-14T13:06:36.053
> 
> 标签：.net, workflow, msmq, workflow-foundation

什么时候应该使用消息队列 (MSMQ) 或工作流基金 (WF)？这两种产品到底是什么？你怎么能定义它们？它们的属性是什么？它们的效用是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T13:18:39.120

[MSMQ](http://en.wikipedia.org/wiki/Microsoft_Message_Queuing)是一种消息队列实现，有时也用作进程间通信的一种形式。

[Windows Workflow Foundation](http://en.wikipedia.org/wiki/Windows_Workflow_Foundation)是基于工作流引擎的 API。

尽管您可以使用 MSMQ 实现（部分）工作流引擎，但这两种技术实际上彼此之间几乎没有关系。如果您需要消息队列实现，请考虑使用 MSMQ，有关其工作原理的详细信息，请参阅[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx)。如果您需要工作流引擎，请考虑使用 WF。有关详细信息，请再次参阅[文档](http://msdn.microsoft.com/en-us/netframework/aa663328)

# javascript - 向我推荐一个图形化的 JavaScript 库

> ID：10583950
> 
> 赞同：0
> 
> 时间：2012-05-14T13:06:38.873
> 
> 标签：javascript, jquery

有人可以指点我一个好的 jquery / javascript 图形库的方向。它需要能够处理条形图和散点图。

具体来说，我需要能够捕获散点图上某个点的点击事件，以便我可以加载相关的外部数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:10:19.283

试试[flot](http://code.google.com/p/flot/)和[jqPlot](http://www.jqplot.com/)插件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T13:10:18.023

[gRaphael](http://g.raphaeljs.com/)是一个很好的图形库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T13:44:58.870

[**D3.JS**](http://mbostock.github.com/d3/)太棒了！试试看：）这里有一些很好的例子： [https ://github.com/mbostock/d3/wiki/Gallery](https://github.com/mbostock/d3/wiki/Gallery)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T13:11:47.703

**[谷歌图表](https://developers.google.com/chart/)**对您来说也是一个不错的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T13:12:03.833

您还可以查看[CanvasXpress](http://canvasxpress.org/)。到目前为止，我只将它用于网络表示，但它似乎很有能力。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T13:19:49.680

去[highcharts](http://highcharts.com)。它为您提供独立性和灵活性。

# theory - 最优解——规划理论

> ID：10583953
> 
> 赞同：0
> 
> 时间：2012-05-14T13:07:01.057
> 
> 标签：theory, game-theory

我希望有人解释一个简单问题的不同方法，然后我将尝试在 PHP 中实现它以用于更广泛的应用程序。

我有五个人在选择谁得到什么房间，有五个房间，大、大、中、中和小。

```
Person 1 orders the rooms Grand, Large
Person 2 orders the rooms Large, Medium
Person 3 orders the rooms Large, Small
Person 4 orders the room Medium
Person 5 orders the rooms Large, Medium 
```

缺少的房间是他们不感兴趣的房间。

选择谁得到每个房间最公平的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:12:15.783

使用启发式计算每种情况的匹配值。例如，如果一个人没有房间，则价值会很低或为负。如果每个人都留在他们订购的最大房间里，那么价值将是最高的。

计算每种情况的这个值，然后取最高值的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T17:47:04.183

公平并不总是被很好地定义。

但是，在这种情况下，一个人似乎可以得到他要求的房间，也可以不得到。因此，人们可以提出一个强有力的论点，即相同数量的人得到他们想要的房间的所有解决方案都是同样公平的，而更多人得到他们想要的房间的解决方案比那些得到他们想要的房间的人更少的解决方案更公平（我们是因此不给予任何人偏好）。

在您的示例中，似乎只有一种解决方案可以让每个人都得到他想要的房间。因此，这是“最公平”的解决方案。

找到这个的算法只是一个深度优先搜索（或者，如果你需要加速，则为分支定界），它考虑所有可能的分配并找到一个最大的。

# jquery - 来自thickbox的Ajax更新

> ID：10583956
> 
> 赞同：0
> 
> 时间：2012-05-14T13:07:30.580
> 
> 标签：jquery, thickbox

我需要知道你的想法和实现我目标的方法。我正在使用 ajax，上传视频或图片后，我使用thickbox ajax 面板询问用户标题和描述。但正如您所知，用户可以通过转义或关闭网页来逃避它，但他/她的视频已经上传，没有标题和描述。我怎样才能使这两个输入框成为必需的输入框？

还有一个问题：当您使用带 modal=false 的厚框时，我可以控制 (x) 符号。我可以判断是否有人单击关闭然后去某个地方但是如果他/她在弹出窗口之外单击怎么办？然后它在同一个面板中，他/她可能认为她的过程没有发生。

谢谢你的帮助。

# excel - 比较excel中两个单元格的日期

> ID：10583970
> 
> 赞同：0
> 
> 时间：2012-05-14T13:08:39.913
> 
> 标签：excel, office-2007

我在 excel 的 E2 和 F2 单元格中有日期。日期在 MM/DD/YYYY fromat 中。我想以这样的方式应用验证，即 F2 中的日期必须大于 E2 中的日期。如果失败，我们应该显示一个错误。我正在使用 Microsoft Office 2007。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:14:09.570

你可以使用条件格式吗？在您的情况下，如果日期与另一个日期相比太低，则其中一个日期的背景可能会变成红色。

快速谷歌： http: [//www.homeandlearn.co.uk/excel2007/excel2007s6p2.html](http://www.homeandlearn.co.uk/excel2007/excel2007s6p2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:14:18.603

应该很容易做到`=IF(F2>E2;"SUCCESS";"ERROR")`

您可以省略“SUCCESS”，仅在失败时显示错误。只要字段实际格式化为正确的日期，这将起作用。

更新代码：

```
=IF(AND(NUMBERBLANK(E2:F2)=0;F2<E2);"ERROR";"") 
```

它的作用是：检查两个单元格是否都已填充，如果 E 小于 F，则检查它们是否已填充，如果是则写入 ERROR。

要对整个列执行此操作，您需要复制公式。对于现有日期，只需双击公式所在单元格中的右下角旋钮，它应该向下复制到行尾（如果行在日期旁边）。除此之外，只需将旋钮拉到需要的位置即可。

# css - 如何设置竖线的样式，即“|”？

> ID：10583971
> 
> 赞同：9
> 
> 时间：2012-05-14T13:08:45.607
> 
> 标签：css

如何设置垂直条的样式，即“|”？我需要改变“|”的宽度和高度。

这就是我想要做的。

```
<a href="link1"> Link 1 </a> | <a href="link2"> Link 2 </a> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-14T13:10:48.670

把它放在一个元素中，并设置元素的样式：

```
<span class="bar">|</span> 
```

例如，在您的样式表中：

```
.bar { font-size: 20px; } 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-14T13:25:55.423

您不应该使用管道 ( `|`) 作为分隔符，而是使用 css。

假设锚点在一个 div 中，id 等于`breadcrumbs`，如下所示：

```
<div id="breadcrumbs">
    <a href="#">One</a>
    <a href="#">Two</a>
    <a href="#">Three</a>
</div>​ 
```

然后，您可以使用几个 CSS 规则在它们之间添加分隔符，如下所示：

```
#breadcrumbs a {
    padding: 0.5em;
    border-right: 5px solid green;
}

#breadcrumbs a:last-child {
    border-right: none;
}​ 
```

您可以使用规则改变分隔符的大小、样式和颜色`border-right: 5px solid green`。 [这是一个正在运行的示例](http://jsfiddle.net/kQTZA/2/)（更新）。 [这是一些](http://www.w3schools.com/cssref/pr_border-style.asp)关于边框样式的文档。

第二条规则`:last-child`防止在最后一个元素之后出现额外的分隔符。

要改变分隔符的高度，您可以更改`padding`第一条规则。

**应大众需求，列表版本：**

如果将链接放在列表中：

```
<ul id="breadcrumb-list">
    <li><a href="#">One</a></li>
    <li><a href="#">Two</a></li>
    <li><a href="#">Three</a></li>
</ul>​ 
```

并使用这样的规则：

```
ul#breadcrumb-list li {
    display: inline-block;
    margin: 0;
    padding: 1em 1em 0 1em;
    border-right: 1px dotted blue;
}

ul#breadcrumb-list li:last-child {
    border-right: none;
} 
```

您可以使用 a`ul`标记链接列表以获得更好的语义。您必须添加`inline-block`才能将它们放在一行`li`上，默认情况下是块级元素。

我还展示了一种不同的风格，你可以通过改变填充和边框规则来实现。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-14T13:13:03.430

`|`是一个字符，因此，它采用您可能应用于文本的任何样式。不过，我得到的印象是，您可能正在尝试使用它`|`来构建框边框。如果是这种情况，最好将块级元素设置为具有尝试使用字符的边框。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T13:10:19.720

除非这是元素中唯一的字符，否则您无法使用 css 轻松地为单个字符设置样式。如果它在文本区域中，您就没有希望了。如果不是，您有希望：`<span class="specialBar">...</span>`每当它出现在您想要设置样式的文本中时，您必须手动使用标签对其进行扩充。

您也可以只使用另一个更符合您喜好的 unicode 竖线字符。

* * *

> *编辑*，回应：
> 
> “我基本上想要链接之间的分隔符。我走错方向了吗？ - 原始海报”

理想情况下，您会使用跨度，您可以使用 CSS 对其进行整形以模拟一条细垂直线：

**emulate-with-a-span 技术 - （[现场演示](http://jsfiddle.net/cs3Mc/)）：**

```
.linkSeparator {
    display:inline-block;
    margin-bottom:-1em; /*value should be (height-1em)/2*/
    height:3em; width:0.25em;
    background-color:grey;
    margin-left:0.5em; margin-right:0.5em;
}​

link1<span class="linkSeparator"></span>link2<span class="linkSeparator">... 
```

**图像技术：**

您还可以使用图像（不太优雅，不会详细说明）。

**兄弟选择器技术 - （[现场演示](http://jsfiddle.net/XfZ62/)）：**

您还可以`border-left`在不是第一个的所有链接上设置。根据[CSS2 邻接选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)的 w3c 规范，“`E + F`匹配任何紧跟在同级元素 E 之前的 F 元素。” 所以：

```
.separatedLinks a+a {
    border-left: 2px solid black;
}

<??? class="separatedLinks">
    <a href="...">link1</a>
    <a href="...">link2</a>
    <a href="...">link3</a>
</???> 
```

您可能可以在此 google 搜索中找到更多示例：http: [//meyerweb.com/eric/articles/webrev/200007a.html](http://meyerweb.com/eric/articles/webrev/200007a.html)

# java - HttpConnection 上的默认接受标头，是否涉及一些风险？

> ID：10583973
> 
> 赞同：0
> 
> 时间：2012-05-14T13:08:46.537
> 
> 标签：java, security, httpconnection

我想知道在默认情况下将 HttpConnection 对象与接受 mime 类型连接是否存在一些风险。这就是根据[RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)不设置任何标头。这是否意味着任何风险或未来的问题？

# mysql - 将 XML 加载到 MySQL

> ID：10583984
> 
> 赞同：0
> 
> 时间：2012-05-14T13:09:28.630
> 
> 标签：mysql, xml, mysqldump

设法获得包含数据库信息和数据的完整 XML 文件。

```
<?xml version="1.0"?>
<mysqldump xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<database name="bbdb">
... 
```

它是用 mysqldump 创建的。但我找不到将 xml 文件加载到空数据库中的方法。我查看并尝试了很多，但到目前为止它没有产生任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:14:33.627

您是否尝试[过 LOAD XML](http://dev.mysql.com/doc/refman/5.5/en/load-xml.html)语句？自 MySQL 5.2 起可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:15:30.073

你检查[LOAD XML](http://dev.mysql.com/doc/refman/5.5/en/load-xml.html)了吗？根据手册： LOAD XML 语句将数据从 XML 文件读取到表中

# powershell - 在PowerShell中发布一个整数初始化为负值

> ID：10583986
> 
> 赞同：4
> 
> 时间：2012-05-14T13:09:31.923
> 
> 标签：powershell, powershell-2.0

我有以下代码将值初始化为-1：

```
Set-Variable -Name ID -Value -1 -Scope local 
```

当我这样做时，

```
$local:ID++ 
```

我收到以下错误：

> '++' 运算符仅适用于数字。操作数是“System.String”。

我认为它会隐含地将其视为 int。但是，我必须使用一个不整洁的解决方法：

**解决方法：**

```
$intVal = [int]$local:ID
$intval ++ 
```

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:14:11.557

$id 是一个字符串（输入 $id.gettype() 来查找它的类型）。为了将其初始化为整数，请将其放在括号中：

```
PS> Set-Variable -Name ID -Value (-1) -Scope local
PS> ($local:ID++) #increment and print the variable 
0 
```

# java - ant：编译尽可能多的类以防编译错误

> ID：10583988
> 
> 赞同：4
> 
> 时间：2012-05-14T13:09:34.570
> 
> 标签：java, ant, compilation, build-automation

如果出现编译错误，ant `javac`task 不会编译所有可以编译的类。似乎`javac`一旦遇到第一个错误，任务（或编译器本身）就会停止。

该`failonerror`属性对此行为没有任何影响。我没有设置`compile`属性（因此，使用了 Oracle JDK 的编译器）。

**如果出现编译错误，是否可以编译尽可能多的类？**
（最好不依赖任何特定的编译器）

***一个用例是在开发过程中：***
假设您正在实现一些新功能，但您还没有完成并且编译错误仍然存​​在。
同时，您需要修复一些其他错误并确保没有损坏，您需要执行由 IDE 项目工作区中的 ant 任务调用的标准测试套件。ant 任务尝试编译所有类/测试类，但由于您正在开发的类中的编译错误而失败。

告诉 ant/javac 不要因编译错误而失败，以便能够执行尽可能多的测试用例，这将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:20:42.663

这与 无关`ant`，它`javac`会在出错时停止并且永远不会给你任何类文件。该`failonerror`属性只是说明如果编译发回错误，构建应该继续还是停止。

从 1.3 开始： http: [//docs.oracle.com/javase/1.3/docs/tooldocs/tools-changes.html](http://docs.oracle.com/javase/1.3/docs/tooldocs/tools-changes.html)

“当新的 1.3 编译器在编译过程中检测到源文件中的错误时，它会继续解析剩余的源文件并尝试识别它们可能包含的任何进一步的错误。在编译的其余部分中完全禁止代码生成，但是，**并且不会生成任何类文件，即使对于不包含错误的编译单元也是如此**。”

您可能想使用其他一些编译器，例如 jikes。但实际上，谁会希望运行部分编译的类？

# jasper-reports - 在 Excel 公式中使用分号

> ID：10583991
> 
> 赞同：0
> 
> 时间：2012-05-14T13:09:46.143
> 
> 标签：jasper-reports

我正在尝试生成一个包含公式的 Excel 报告。问题是当公式包含分号“;”时 Jasper 报告只是忽略了完整的公式。

所以使用以下作品：

```
<propertyExpression name="net.sf.jasperreports.export.xls.formula"><![CDATA["SUM(J4:J"+($V{REPORT_COUNT}.intValue()+3)+")"]]></propertyExpression> 
```

但以下没有：

```
<propertyExpression name="net.sf.jasperreports.export.xls.formula"><![CDATA["TIME(8;30;12)"]]></propertyExpression> 
```

有没有办法告诉 Jasper 停止对这些分号做的任何事情？

谢谢

# class - Puppet：命名空间如何与虚拟资源、类和定义一起工作？

> ID：10583992
> 
> 赞同：3
> 
> 时间：2012-05-14T13:09:47.113
> 
> 标签：class, namespaces, virtual, puppet, definitions

新的 puppet 用户，试图围绕名称空间等等。

我目前正在开发一个名为`user`. 它在 and 中有一个类`unixuser`和一个`unixgroup`类。我将把我的问题限制在创建用户上。`unixuser.pp``unixgroup.pp`

`init.pp`目前仅包含：

```
class user {
  class {'user::unixuser': }
  class {'user::unixgroup': }

  # Create groups before creating users
  Class['user::unixgroup'] -> ['user::unixuser']
} 
```

而我只想定义虚拟资源`unixuser.pp`。`unixgroup.pp`这样做的功能应该是`functions.pp`为了可读性。

问题 1：`functions.pp`应该只包含定义还是应该将定义放在一个类中？所以在代码中，应该`functions.pp`包含这个：

```
class user::functions {
  define login ($uid, $gid) {
    user { $title:
      ensure  => present,
      uid     => $uid,
      gid     => $gid,
    }
  }
} 
```

或者`define login`不应该在 user::functions 类中？如果是这样，该`define`行应该是`define user::login`还是其他？

更进一步，`unixuser.pp`将包含类似于以下（不完整）节的内容：

```
class user::unixuser {
  @something { 'admin':
    uid => 1000,
    gid => 1000,
  }
} 
```

如果所有这些都完成了，那么我将`realize`使用`nodes.pp`类似`realize User::Something['admin']`.

问题 2：应该如何让类`user::unixuser`知道该`login`功能？这是通过拥有`class user::unixuser inherits user::functions`或应该拥有`include user::functions`或`class {'user::functions': }`或......来完成的吗？

问题 3：基于问题 2，`@something`当`user::unixuser`班级与`functions.pp`.

我试图尽我所能提出这个问题，但如果它仍然有点混乱，我道歉。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:00:26.040

首先，如果将用户分配到组，则该组是自动需要的，因此您不需要以下内容：

```
 # Create groups before creating users
  Class['user::unixgroup'] -> ['user::unixuser'] 
```

functions.pp 看起来不错在 init.pp 中尝试以下操作：

```
class user {
  include user::functions
  include user::unixgroup
  include user::unixuser
} 
```

和 unixuser.pp：

```
class user::unixuser {
  login { 'admin':
    uid => 1000,
    gid => 1000,
  }
  ...
} 
```

# sql-server - System.Data.SqlClient.SqlError：数据库中已经有一个名为“sysnsobjs”的对象。(Microsoft.SqlServer.Express.Smo)

> ID：10583993
> 
> 赞同：2
> 
> 时间：2012-05-14T13:09:50.153
> 
> 标签：sql-server

我收到 SQL 恢复错误，请帮忙。

我正在使用管理工作室。我试图恢复我的数据库（例如数据库名称 XYZ）从 SQL 2000 服务器备份并尝试恢复到 2008 R2 数据库 XYZ。恢复失败期间的确切错误字符串是

服务器“MACHINENAME\INSTANCENAME”的还原失败。(Microsoft.SqlServer.SmoExtended)

* * *

如需帮助，请点击：http: [//go.microsoft.com/fwlink ?ProdName=Microsoft+SQL+Server&ProdVer=10.50.1617.0+((KJ_RTM_GDR).110422-1125+)&EvtSrc=Microsoft.SqlServer.Management.Smo.ExceptionTemplates .FailedOperationExceptionText&EvtID=Restore+Server&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=10.50.1617.0+((KJ_RTM_GDR).110422-1125+)&EvtSrc=Microsoft.SqlServer.Management.Smo.ExceptionTemplates.FailedOperationExceptionText&EvtID=Restore+Server&LinkId=20476)

* * *

节目地点：

在 Microsoft.SqlServer.Management.Smo.Restore.SqlRestore(Server srv) 在 Microsoft.SqlServer.Management.SqlManagerUI.SqlRestoreDatabaseOptions.RunRestore()

====================================

**System.Data.SqlClient.SqlError：数据库中已经有一个名为“sysnsobjs”的对象。(Microsoft.SqlServer.Smo)**

* * *

如需帮助，请单击： http: [//go.microsoft.com/fwlink ?ProdName=Microsoft+SQL+Server&ProdVer=10.50.1617.0+((KJ_RTM_GDR).110422-1125+)&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=10.50.1617.0+((KJ_RTM_GDR).110422-1125+)&LinkId=20476)

* * *

节目地点：

在 Microsoft.SqlServer.Management.Smo.BackupRestoreBase.ExecuteSql（服务器服务器，StringCollection 查询）在 Microsoft.SqlServer.Management.Smo 的 Microsoft.SqlServer.Management.Smo.ExecutionManager.ExecuteNonQueryWithMessage（StringCollection 查询，ServerMessageEventHandler dbccMessageHandler，布尔错误AsMessages）。 Restore.SqlRestore（服务器 srv

> ODBC SQL 服务器驱动程序错误 数据库中已经有一个名为“sysnobjs”的对象

在将 SQL Server 2000 用户数据库恢复到 SQL Server 2008 R2 版本时。

请让我知道是否允许 Microsoft SQL Server 2000 数据库备份并将其还原到 SQL Server 2008？

如果不是这样，是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:08:40.067

在选项中，当您在选择要还原备份的位置的框中时，选择覆盖现有数据库选项。那应该可以消除该错误并允许您恢复该备份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T08:59:28.337

在常规选项卡中选择要恢复的备份文件后，转到选项选项卡。

选择“Överwrite the existing database (WITH REPLACE)”

然后，在“将数据库文件还原为：”表中，转到[还原为]列

请注意，第一行中的字符串（用于数据）和第二行中的字符串（用于图像）完全相同。这会导致一些错误。

例如，将第一行中的字符串更改为其他内容（例如添加日期）

C:.................\你的文件名.mdf

C:................\YourFileName20151124.mdf

问题解决了

这是我的完整脚本：

```
RESTORE DATABASE [Makhado_Indigents] FROM  DISK = N'C:\IndiCheck\Makhado_Indigents.bak' 
WITH  FILE = 1,  MOVE N'New_Indigents' 
TO N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.INDICHECK\MSSQL\DATA\Makhado_Indigents.mdf',  
MOVE N'New_Indigents_Images' 
TO N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.INDICHECK\MSSQL\DATA\Makhado_Indigents1.mdf',  
MOVE N'New_Indigents_log' 
TO N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.INDICHECK\MSSQL\DATA\Makhado_Indigents.ldf',  
MOVE N'New_Indigents_Docs' 
TO N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.INDICHECK\MSSQL\DATA\Makhado_Indigents.New_Indigents_Docs',  
NOUNLOAD,  REPLACE,  STATS = 10
GO 
```

您可能还需要通过运行以下脚本来打开文件流：

```
EXEC sp_configure filestream_access_level, 2 RECONFIGURE 
```

重启服务器：

开始 > 所有程序 > Microsoft SQL Server 2008 R2 > 配置工具 > SQL Server 配置管理器

右键单击服务器并选择重新启动