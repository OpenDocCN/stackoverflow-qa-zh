# StackOverflow 问答 11831000-11831999

# wpf - 带有图标的按钮控件

> ID：11831003
> 
> 赞同：1
> 
> 时间：2012-08-06T15:12:41.843
> 
> 标签：wpf, xaml, user-controls

我想在我的一些按钮中显示一个图标。由于在按钮内对齐图像并非易事，我认为用户控件、派生控件或其他东西会派上用场。所以我用谷歌搜索、尝试、编译，现在我想出了以下代码。

不幸的是，我的属性没有绑定任何东西，我看不到文字或图像。我怎样才能使这项工作？缺少什么？我正在使用 VS2010 和 .NET 4.0。

XAML：

```
<Button
  x:Class="MyNS.IconButton"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006">

  <Button.Template>
    <ControlTemplate>
      <StackPanel Orientation="Horizontal">
        <Image Source="{Binding IconSource}" Name="Icon" Width="{Binding IconSize}" Height="{Binding IconSize}" Margin="0,0,4,0"/>
        <ContentPresenter/>
      </StackPanel>

      <ControlTemplate.Triggers>
        <Trigger Property="Button.IsEnabled" Value="False">
          <Setter Property="Image.Opacity" Value="0.5"/>
        </Trigger>
      </ControlTemplate.Triggers>
    </ControlTemplate>
  </Button.Template>
</Button> 
```

代码文件：

```
public partial class IconButton : Button
{
    public static DependencyProperty IconSourceProperty = DependencyProperty.Register(
        "IconSource",
        typeof(ImageSource),
        typeof(IconButton));

    public static DependencyProperty IconSizeProperty = DependencyProperty.Register(
        "IconSize",
        typeof(int),
        typeof(IconButton),
        new PropertyMetadata(11));

    public ImageSource IconSource
    {
        get { return (ImageSource) GetValue(IconSourceProperty); }
        set { SetValue(IconSourceProperty, value); }
    }

    public int IconSize
    {
        get { return (int) GetValue(IconSizeProperty); }
        set { SetValue(IconSizeProperty, value); }
    }

    public IconButton()
    {
        InitializeComponent();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:50:54.153

看起来您的数据绑定可能是问题的根源。通过这些更改，我能够使用您的 IconButton 在另一个页面中显示图像。

我做了以下更改：

```
<!-- Added x:Name="_this" -->
<Button x:Class="ButtonTest.IconButton"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300"
    x:Name="_this">
<Button.Template>
    <ControlTemplate>
        <StackPanel Orientation="Horizontal"
                    Background="Red">

            <!-- Bindings Changed Here -->
            <Image Source="{Binding ElementName=_this, Path=IconSource}"
                 Name="Icon"
                 Width="{Binding ElementName=_this, Path=IconSize}"
                 Height="{Binding ElementName=_this, Path=IconSize}" Margin="0,0,4,0"/>
            <ContentPresenter />
        </StackPanel>
        <ControlTemplate.Triggers>
            <Trigger Property="Button.IsEnabled" Value="False">
                <Setter Property="Image.Opacity" Value="0.5"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</Button.Template> 
```

# java - Java 对象类型

> ID：11831004
> 
> 赞同：0
> 
> 时间：2012-08-06T15:12:47.270
> 
> 标签：java, object, autoboxing

我已经看到这个问题发布了几次，但答案似乎对我不起作用。

我有一个对象，需要知道这是什么类型

即（对象对象）

当我运行代码并观察对象时，object.typeName 显示为`Java.lang.Long`但使用`object.getClass().getName()`return as simpleType。

我如何知道对象是 Long 的事实？

# ftp - 如何将批处理文件连接到 FTP 服务器以自动删除文件

> ID：11831005
> 
> 赞同：0
> 
> 时间：2012-08-06T15:12:48.817
> 
> 标签：ftp, batch-file

我被要求使用服务器 IP 地址和管理员密码登录 Web 服务器，并创建一个 bat 文件或 vb 脚本来运行和删除子文件夹中日期为今天前一个月的文件。这需要设置为服务器上的计划任务以每晚运行。

我是一个新程序员，在我的第一份工作中学习东西，我该怎么做？任何人都可以帮我解决这个问题，拜托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:05:37.733

经过简短的（一次搜索）后，我在 SO 上发现了以下问题：[Batch file to delete files older than N days](https://stackoverflow.com/questions/51054/batch-file-to-delete-files-older-than-n-days)。

我建议使用[这个答案](https://stackoverflow.com/a/51069/863122)。

将来，也许在提问之前先看看其他人是否向您提出了相同/非常相似的问题。

所以在你的情况下你会想要

`forfiles -p "C:\what\ever" -s -m *.* -d "-30" -c "cmd /c del @path"`

如果它回答了您的问题，请记住接受此答案。

# jasper-reports - 表达式中使用 print 时不需要的换行符

> ID：11831008
> 
> 赞同：1
> 
> 时间：2012-08-06T15:13:08.973
> 
> 标签：jasper-reports, ireport

我目前正在`Print When Expression`我的字段上使用该功能，并且每当一个字段由于打印时条件而被排除时，它会留下一个空白空间，而不是仅仅跳过它并继续下一个。这是一张显示正在发生的事情的图片：

![在此处输入图像描述](../Images/e8fe2a084f41b7411c95b146c835dd1f.png)

所以我试图找到一种方法来忽略该换行符并保持整个列表统一。

这是我的`Print When Expression`情况（这可能会或可能不会帮助您回答我的问题）：`$F{clicks} < 1`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T17:02:52.393

将 Print When 表达式应用于整个波段，而不是字段。

# html - 响应式图像最大高度 100% 在 Firefox 中不起作用

> ID：11831010
> 
> 赞同：8
> 
> 时间：2012-08-06T15:13:17.537
> 
> 标签：html, css, firefox, google-chrome, responsive-design

我目前正在尝试根据浏览器尺寸调整图像大小。我已经设法让图像水平调整大小，如果我让浏览器窗口变窄，图像将按比例调整大小就好了。但是，当我垂直调整窗口大小时，Firefox 似乎不想这样做！代码很简单

```
<body>

    <div id="content">
        <img src="images/abc.jpg">
    </div>      

</body> 
```

和CSS：

```
#content {  
    height: 100%;
    padding: 50px;
}

#content img{
    max-height:100%;
    max-width: 100%;
} 
```

另一个问题是图像似乎*确实*在 chrome 中垂直调整大小，但我必须在开始执行此操作之前将浏览器的底部拖到图像上方。可以说，一旦底部内容填充“击中”图像底部，我宁愿图像开始调整。希望这是有道理的。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:32:37.740

试试这个，取自 Twitter bootstrap 2

```
html,body{height:100%;}
#content {padding: 5%;}
#content img {
max-height: 100%;/* Part 1: Set a maxium relative to the parent */
width: auto\9;
/* IE7-8 need help adjusting responsive images */
max-width: auto; 
/* Part 2: Scale the height according to the width, otherwise you get stretching */
vertical-align: middle;
border: 0;
-ms-interpolation-mode: bicubic;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:20:37.777

因为高度可能永远持续下去，所以您不能将任何相对于浏览器窗口的高度设置为百分比的函数。我的意思是你需要把它放在一个固定高度的东西里面才能使用百分比值。祝你好运！

-b

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:20:59.933

您只指定了“最大高度”和“最大宽度”属性。如果您没有指定实际的“宽度”或“高度”属性，则图像最初会采用其物理尺寸的宽度和高度（如果不大于指定的最大高度和最大宽度）。

说，你注意到的行为是正确的。答案是，如前所述，还要指定初始宽度或高度属性，这取决于您的图像是纵向还是横向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T08:43:04.517

[那](http://jsfiddle.net/nk9cU/)是你想要的吗？

我实际上只是为 html 和 body 添加了一个高度，因此 #contents 高度不会太高。

```
body, html {
    height: 100%;
    margin: 0;
    padding: 0;
} 
```

（和 box-sizing:border-box 到#content，因为看起来你想要那个）

# c# - 按空格分割字符串，但忽略引号内的空格

> ID：11831011
> 
> 赞同：1
> 
> 时间：2012-08-06T15:13:23.400
> 
> 标签：c#, regex, csv, split

我有一个大字符串，它从 csv 文件中获取数据，但是当使用正则表达式时，例如：

```
Regex regex = new Regex(@"\w+|""[\w\s]*"""); 
```

它会拆分每个字母吗？每行没有空格，只有在行尾 - 但不应该在双引号中有空格的地方剪断行。

> 例如：test1,test2,test3,test4,test5,"test 6",test7（新行）test8,test9等。

有人可以指导我正确的方向吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:17:16.020

我建议参考[现有的解决方案](https://stackoverflow.com/questions/1441556/parsing-csv-input-with-a-regex-in-java)，而不是重新发明自己的解决方案（除非你想要学习经验！）解析 CSV 比看起来更棘手。

**编辑：**没看到你在使用 C#。 [这里](https://stackoverflow.com/questions/1189416/c-regular-expressions-how-to-parse-comma-separated-values-where-some-values) [有](https://stackoverflow.com/questions/3268622/regex-to-split-line-csv-file) [更多](https://stackoverflow.com/questions/6542996/how-to-split-csv-whose-columns-may-contain) [链接](https://stackoverflow.com/questions/7833088/csv-regular-expression)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:20:09.883

使用现有的 CSV 解析器而不是尝试使用`Regex`- 正如您所见，格式很微妙。

[FileHelpers](http://filehelpers.sourceforge.net/)是一个流行的库，并且存在[`TextFieldParser`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)于`Microsoft.VisualBasic.FileIO`命名空间中。

# wix - 如何包含使用 WMI 安装 MSI 的参数

> ID：11831015
> 
> 赞同：0
> 
> 时间：2012-08-06T15:13:56.237
> 
> 标签：wix, windows-installer, wmi

我正在使用 wmi 和 'call install tr​​ue...' 格式远程安装 msi：

```
wmic /node:"[host]" /user:"[user]" /password:"[password]" ENVIRONMENT="RELEASE" product call install true, "", "\\[host]\D$\WebsitesDirectory\[name].msi" 
```

这很好用，只是我无法获得正确的格式来包含我通常与 msiexec 一起使用的命令行参数。我在 Wix 中声明了一个名为“ENVIRONMENT”的变量。在这种情况下，它应该是 ENVIRONMENT="RELEASE"。谁能告诉我正确的格式或指向显示它的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:27:28.650

我想我找到了答案。看来参数进入“真”之后的第一对引号：

```
... product call install true, "ENVIRONMENT=RELEASE", ... 
```

# python - (Un)Pickle 类具有 Instancemethod 对象

> ID：11831020
> 
> 赞同：2
> 
> 时间：2012-08-06T15:14:00.033
> 
> 标签：python, pickle

我有一个类 ( `Bar`)，它实际上有自己的状态和回调，并被另一个类 ( `Foo`) 使用：

```
 class Foo(object):

     def __init__(self):
         self._bar = Bar(self.say, 10)
         self._bar.work()

     def say(self, msg):
         print msg

 class Bar(object):
     def __init__(self, callback, value):
         self._callback = callback
         self._value = value
         self._more = { 'foo' : 1, 'bar': 3, 'baz': 'fubar'}

     def work(self):
         # Do some work
         self._more['foo'] = 5
         self._value = 10
         self._callback('FooBarBaz')

 Foo() 
```

显然我不能腌制类，`Foo`因为`Bar`有一个实例方法，所以我留下了以下实现`__getstate__`& `__setstate__`in`Bar`以保存`self._value`&的解决方案`self._more`，但我也必须实例化该`self._callback`方法（即`__init__()`从外部类调用`Foo`传递回调函数.

但我无法弄清楚如何实现这一目标。

任何帮助深表感谢。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:46:42.563

我认为如果你需要序列化这样的东西，你需要能够将你的回调定义为一个字符串。例如，您可能会说`callback = 'myproject.callbacks.foo_callback'`.

基本上，`__getstate__`您可以将函数替换为`_callback`以后可以用来查找函数的东西，例如`self._callback.__name__`.

`__setstate__`你会用`_callback`一个函数替换。

这取决于您的函数都具有真实名称，因此您不能使用 lambda 作为回调并期望它被序列化。您还需要一种合理的机制来按名称查找函数。

您可能会使用`__import__`（类似：'myproject.somemodule.somefunc'点名称语法可以支持这种方式，请参阅[http://code.google.com/p/mock/source/browse/mock.py#1076](http://code.google.com/p/mock/source/browse/mock.py#1076)）或只需在您的代码中定义一个查找表。

假设您在查找表中定义了一小组可能的回调，只是一个快速（未经测试，抱歉！）示例：

```
def a():
    pass

callbacks_to_name = {a: 'a'
                     # ...
                     }

callbacks_by_name = {'a': a,
             # ...
             }

class C:
    def __init__(self, cb):
        self._callback = cb

    def __getstate__(self):
        self._callback = callbacks_to_name[self._callback]
        return self.__dict__

    def __setstate__(self, state):
        state[_callback] = callbacks_by_name[self._callback] 
```

我不确定您的用例是什么，但我建议您通过将工作项序列化为 JSON 或 XML 并编写一组简单的函数来自己序列化和反序列化它们。

好处是序列化格式可以被人类阅读和理解，并在您升级软件时进行修改。Pickle 很诱人，因为它看起来足够接近，但是当你有大量的时候`__getstate__`，`__setstate__`你并没有真正为自己节省很多精力或头痛，因为它专门为你的应用程序构建了自己的方案。

# ruby-on-rails - Rails：下载 .to_pdf 卡在对象的旧版本上

> ID：11831024
> 
> 赞同：0
> 
> 时间：2012-08-06T15:14:15.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, thin

我有一个 Rails 应用程序，但在尝试创建指向某些动态生成数据的下载链接时遇到了问题。我在我的模型中放置了一个`.to_pdf`方法。`Folha`在控制器上`folhas_controller.rb`：

```
def show
    nome = "#{@folha.nome_do_mes}-#{@folha.ano}-#{DateTime.now.to_i}"
    @folha = Folha.find(params[:id])
    respond_to do |format|
      format.pdf do
        pdf = @folha.to_pdf(view_context)
        send_data pdf.render, filename: "#{nome}.pdf", type: "application/pdf"
      end
    end
  end 
```

问题是该`.to_pdf`方法仅在我第一次单击链接时执行。对于所有其他点击，无论我的对象是否已更新，它都会给我相同的文件。我不知道这是在我的堆栈中发生的。它只发生在生产中。我在部署到 heroku 的 Thin 1.4.1 上使用 Rails 3.2.6。请帮忙=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T01:35:56.783

我使用了一种解决方法，很确定它不是正确的方法： `routes.rb`

```
 resources :folhas do
    resources :servicos
  end

  match 'exportar/:id/:dummy' => 'folhas#show', as: "exportar" 
```

然后在视图上：

```
<%= link_to image_tag('pdf_small.png'), exportar_path(id: folha.id, dummy: DateTime.now.to_i, format: 'pdf'), class: 'item' %> 
```

这样每次渲染视图时都会放置一个不同的链接。

# java - 子组件中的 MouseMotionListener 禁用父组件中的 MouseListener

> ID：11831029
> 
> 赞同：9
> 
> 时间：2012-08-06T15:14:29.940
> 
> 标签：java, swing, events, mouse-listeners

我需要帮助来理解 Swing 中的事件传播。我知道每个事件仅由一个组件处理。因此，当我有一个`outside`带有一些子面板的面板`inside`并向它们添加 mouseListeners 时，`inside`将调用其中的一个。这很好，这是预期的行为。

但是我不明白以下情况下的行为： `inside`注册一个MouseMotionListener并`outside`注册一个MouseListener。我希望`inside`消耗所有 MouseMotionEvents 并`outside`接收 MouseEvents，因为在`inside`. 但事实并非如此，`inside`以某种方式消耗所有 MouseEvents，而不仅仅是 MouseMotionEvents。

下面的代码说明了这个问题：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class EventTest {
public static void main(String... args) {
    SwingUtilities.invokeLater(new Runnable(){
        @Override
        public void run() {
            JComponent inside = new JPanel(); 
            inside.setBackground(Color.red);
            inside.setPreferredSize(new Dimension(200,200));
            MouseMotionListener mm = new MouseMotionListener() {
                @Override
                public void mouseDragged(MouseEvent arg0) {
                    System.err.println("dragged");                      
                }
                @Override
                public void mouseMoved(MouseEvent arg0) {
                    System.err.println("moved");
                }
            };
            // next line disables handling of mouse clicked events in outside 
            inside.addMouseMotionListener(mm); 

            JComponent outside = new JPanel();
            outside.add(inside);
            outside.setPreferredSize(new Dimension(300,300));
            outside.addMouseListener( new MouseAdapter() {
                public void mouseClicked(MouseEvent e) {
                    System.err.println("clicked");
                }
            });

            JFrame frame = new JFrame();
            frame.add(outside);
            frame.pack();
            frame.setVisible(true);
        }
    });
    }
} 
```

`inside`我可以通过为父组件可能感兴趣的所有事件注册一个侦听器来解决此问题，然后调用 dispatchEvent 将事件转发给父组件。

a) 有人可以指点我一些文档，其中描述了这种行为吗？MouseEvent 的 javadocs 让我觉得我的期望是正确的。所以，我需要一个不同的描述来理解它。

b) 有没有比上面概述的更好的解决方案？

谢谢，凯瑟琳

编辑：目前还不清楚为什么 Swing 会这样。但看起来，让这些东西正常工作的唯一方法是手动转发事件，我会这样做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T17:58:54.460

a) 按照[设计](https://stackoverflow.com/a/3605346/230513)，Java 鼠标事件只有在子组件上没有鼠标侦听器时才会“冒泡”。

b) 您可以*将*事件转发到另一个组件，如下[所示](https://stackoverflow.com/a/3605990/230513)。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class EventTest {

    public static void main(String... args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                final JComponent outside = new JPanel();
                JComponent inside = new JPanel();
                inside.setBackground(Color.red);
                inside.setPreferredSize(new Dimension(200, 200));
                inside.addMouseMotionListener(new MouseAdapter() {

                    @Override
                    public void mouseDragged(MouseEvent e) {
                        System.err.println("dragged");
                    }

                    @Override
                    public void mouseMoved(MouseEvent e) {
                        System.err.println("moved inside");
                        outside.dispatchEvent(e);
                    }
                });

                outside.add(inside);
                outside.setPreferredSize(new Dimension(300, 300));
                outside.addMouseMotionListener(new MouseAdapter() {

                    @Override
                    public void mouseMoved(MouseEvent arg0) {
                        System.err.println("moved outside");
                    }
                });

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(outside);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T18:13:57.040

与trashgod 的回答非常相似 - 您可以使用 a`MouseAdapter`作为您的运动侦听器，并覆盖它以转发您希望由父级处理的任何事件。这应该只会为您的代码添加最少的数量。

```
 MouseAdapter mm = new MouseAdapter() {
            @Override
            public void mouseDragged(MouseEvent arg0) {
                System.err.println("dragged");                      
            }
            @Override
            public void mouseMoved(MouseEvent arg0) {
                System.err.println("moved");
            }
            @Override
            public void mouseClicked(MouseEvent e) {
                outside.dispatchEvent(e);
            }
        };
        // For forwarding events
        inside.addMouseListener(mm); 
        // For consuming events you care about
        inside.addMouseMotionListener(mm); 
```

我也找不到使用该方法的任何`dispatchEvent(e)`方法。我想你被那条路线困住了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T02:37:30.657

这对我有用：

```
 Ellipse2D mCircle = new Ellipse2D.Double(x,y,size,size);

  void PassMouseEvent(MouseEvent e) {
    getParent().dispatchEvent(e);
  }

  public void mousePressed(MouseEvent arg0) {
    if(mCircle.contains(arg0.getX(), arg0.getY())) {
      // Do stuff if we click on this object
    } else {
      // Pass to the underlying object to deal with the mouse event
      PassMouseEvent(arg0);
    }
  } 
```

# apache - apache tomcat 7角色名中的字符无效

> ID：11831038
> 
> 赞同：0
> 
> 时间：2012-08-06T15:14:59.440
> 
> 标签：apache, authentication, tomcat, tomcat7

我正在尝试在角色名称中使用完全可分辨的名称`Apache tomcat`。角色名称将包括`"=" chars`.

**例如：**

```
 <tomcat-users>
            <role rolename="cn=tomcat,dc=com"/>
            <user username="tomcat" password="tomcat" roles="cn=tomcat,dc=com"/>
    </tomcat-users> 
```

**当我尝试启动tomcat时，我得到：**

> 严重：为 UserDatabase javax.management.MalformedObjectNameException 创建 UserDatabase MBean 时出现异常：在 javax.management.ObjectName.(Unknown Source) at org. apache.catalina.mbeans.MBeanUtils.createObjectName(MBeanUtils.java:870) 在 org.apache.catalina.mbeans.MBeanUtils.createMBean(MBeanUtils.java:379) 在 org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener. java:194) 在 org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:150) 在 org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:112) 在 org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119) 在 org.apache.catalina.util.LifecycleBase 的 org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.lifecycleEvent(GlobalResourcesLifecycleListener.java:84) .fireLifecycleEvent(LifecycleBase.java:90) 在 org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:401) 在 org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:346) 在 org. apache.catalina.core.StandardServer.startInternal(StandardServer.java:725) 在 org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) 在 org.apache.catalina.startup.Catalina.start(Catalina. java:675) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect。NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java: 322）在 org.apache.catalina.startup.Bootstrap.main（Bootstrap.java:451）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:25:10.580

如果要将 Tomcat 配置为使用 LDAP 身份验证，请使用 JNDIRealm：

[http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html#JNDIRealm](http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html#JNDIRealm)

# java - Restful：如何访问 Service 类中的 Httpsession？

> ID：11831042
> 
> 赞同：32
> 
> 时间：2012-08-06T15:15:20.233
> 
> 标签：java, rest, jersey

我正在使用 Jersey 宁静的网络服务。这是我下面的代码

```
@Path(/test)
public class testService  {
    @POST
    public String getData(Postdata postdata) {

    }

} 
```

我的问题是，是否可以在此类中访问 httpSession 对象？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-06T17:53:58.897

尝试：

```
@POST
public String getData(Postdata postdata, @Context HttpServletRequest request) {
  HttpSession session = request.getSession();
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-02-17T17:48:19.243

如果您的服务不是单例的，您可以使用：

```
@Path("/test")
public class TestResource  {

    @Context
    private HttpServletRequest request;

    @POST
    public String getData(Postdata postdata) {
        HttpSession session = request.getSession();
    }

} 
```

# c# - 通过控制台界面访问编译器时包含库

> ID：11831043
> 
> 赞同：2
> 
> 时间：2012-08-06T15:15:22.727
> 
> 标签：c#, windows, visual-studio, console

受[这个](https://msdn.microsoft.com/en-us/library/aa288466%28v=vs.71%29)例子的启发，我决定扩展 Factorial 类。

```
using System;
using System.Numerics;

namespace Functions
{
    public class Factorial
    {
        public static BigInteger CalcRecursively(int number)
        {
            if (number > 1)
                return (BigInteger)number * CalcRecursively(number - 1);
            if (number <= 1)
                return 1;

            return 0;
        }

        public static BigInteger Calc(int number)
        {
            BigInteger rValue=1;

            for (int i = 0; i < number; i++)
            {
                rValue = rValue * (BigInteger)(number - i);                
            }

            return rValue;

        }      
    }
} 
```

我使用了 System.Numerics，默认情况下不包括在内。因此，命令
`csc /target:library /out:Functions.dll Factorial.cs DigitCounter.cs`输出：

```
Microsoft (R) Visual C# 2010 Compiler version 4.0.30319.1
Copyright (C) Microsoft Corporation. All rights reserved.

Factorial.cs(2,14): error CS0234: The type or namespace name 'Numerics' does not
        exist in the namespace 'System' (are you missing an assembly reference?)
DigitCounter.cs(2,14): error CS0234: The type or namespace name 'Numerics' does
        not exist in the namespace 'System' (are you missing an assembly
        reference?)
Factorial.cs(8,23): error CS0246: The type or namespace name 'BigInteger' could
        not be found (are you missing a using directive or an assembly
        reference?)
Factorial.cs(18,23): error CS0246: The type or namespace name 'BigInteger' could
        not be found (are you missing a using directive or an assembly
        reference?)
DigitCounter.cs(8,42): error CS0246: The type or namespace name 'BigInteger'
        could not be found (are you missing a using directive or an assembly
        reference?) 
```

好的。我缺少一个程序集参考。我想“一定很简单。在整个系统上应该有两个 System.Numerics.dll 文件 - 我需要添加到命令 /link:[Path to the x86 version of System.Numerics.dll]”。搜索结果冻结了我的灵魂：![在此处输入图像描述](../Images/3ca28949831c32c17b9b8434c4bc34d2.png)

如您所见（或没有），文件比我预期的要多得多！此外，它们的大小和内容不同。我应该包括哪一个？为什么有五个文件，虽然只有两个有存在的意义？/link: 命令是否正确？或者，也许我的思维轨迹完全错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T15:18:35.800

我通常发现使用

```
/r:System.Numerics.dll 
```

让编译器只在 GAC 中找到程序集，这通常是您想要的方式。（当然，前几天我正好需要 System.Numerics 用于控制台应用程序...）

# c# - 为什么图像在 UpdatePanel 中时不显示？

> ID：11831047
> 
> 赞同：0
> 
> 时间：2012-08-06T15:15:38.033
> 
> 标签：c#, asp.net, image

我有一张放在 UpdatePanel 中的图片。我在 button_click 事件中设置了它的 ImageUrl。图像在 App_Data/imagesDirectory 中。为什么网页中没有显示图像？

```
<asp:Panel ID="Panel1" runat="server" style="direction: ltr">
<asp:ListBox ID="photosListBox" runat="server" Rows="1"></asp:ListBox>
<asp:Button ID="selectButton" runat="server" Text="select" 
    onclick="selectButton_Click" />
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
<br />
<asp:UpdatePanel ID="UpdatePanel2" runat="server">
    <ContentTemplate>
        <asp:Image ID="ph" runat="server" />
        <br />
        <br />
        <asp:Button ID="submit" runat="server" onclick="submit_Click" 
            Text="submit" />
        <br />
        <br />
    </ContentTemplate>
</asp:UpdatePanel>
</asp:Panel> 
```

我只是在其中设置了与图像控件相关的 ImageUrl 属性。但是，按钮代码：

```
UpdatePanel2.Visible = true;
        submit.Visible = true;
        photosListBox.Visible = false;
        selectButton.Visible = false;

        Users sentUser = (Users)Session["user"];
        Gallery sentGallery = (Gallery)Session["gallery"];
        string selectedName = photosListBox.SelectedItem.ToString();
        int selectedId = Convert.ToInt32(photosListBox.SelectedItem.Value);

        ModelContainer ml = new ModelContainer();
        Users u = ml.UsersSet.Where(t => t.Username == sentUser.Username).First();
        Gallery g = u.Gallery.Where(t => t.Name == sentGallery.Name && t.Id == sentGallery.Id).First();
        Photo p = g.Photo.Where(t => t.Name == selectedName && t.Id == selectedId).First();

        ph.ImageUrl = MapPath(p.PhotoAdd);
        nameTextBox.Text = p.Name;
        descriptionTextBox.Text = p.Description;
        uploadDateTimeLabel.Text = p.UploadDateTime.ToString(); 
```

我还在页面的 PreRender 事件中设置了 ImageUrl 属性。但它不起作用：

```
protected void Page_PreRender(object sender, EventArgs e) 
    {
        ph.ImageUrl = imageU;
    } 
```

imageU 是页面类的受保护字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:33:21.873

`PreRender`您必须在页面事件中定义 ImageUrl

1 在事件中找到我们的数据

2 将数据保存在页面的变量中

3 在 PreRender 上设置 Image 的属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:02:34.237

您的 photosListBox 不在更新面板中，因此在执行 submit_Click() 时不会将所选值发送回服务器。

# sql - 光标延迟结果集，如何使其高效

> ID：11831049
> 
> 赞同：1
> 
> 时间：2012-08-06T15:15:43.880
> 
> 标签：sql, sql-server, sql-server-2008, cursor

我有一个包含数据的表变量：

```
SiteID  DatabaseYear  CreationDate
1       2011          2012.01.01
2       2012          2012.06.06
3       2010          2010.10.10
1       2012          2012.07.07
3       2012          2012.07.27
4       2012          2012.08.31 
```

在一个完美的世界里，我想像这样对结果进行排序：

```
SiteID  DatabaseYear  CreationDate
4       2012          2012.08.31
3       2012          2012.07.27
3       2010          2010.10.10
1       2012          2012.07.07
1       2011          2012.01.01
2       2012          2012.06.06 
```

排序是这样的：获取最近创建日期的站点并首先显示它（按 CreationDate desc 排序），然后获取该站点的所有其他记录并按 DatabaseYear 显示它们（按 DatabaseYear desc 排序）。

当然，以下内容根本不起作用：

```
order by CreationDate desc, DatabaseYear desc 
```

因为它将首先对整个结果集应用“CreationDate desc”，然后是“DatabaseYear desc”。

所以，我想出了一个光标，它执行以下操作：

1.  获取最新的 SiteID
2.  把它放在另一个表中（准确地说是表变量）
3.  获取该 SiteID 的所有其他记录，按 DatabaseYear 降序排列
4.  从第一个表中删除所有记录

问题：

如果第一个表有几千条记录，这个逻辑很有效，但是当有超过 5000 条左右时，它需要更长的时间。由于这是在网页上填充网格，我不能让用户等待超过 15-20 秒。在最坏的情况下（超过 40,000 条记录），执行需要 2-3 分钟。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:43:13.653

你需要更多地考虑集合，游标几乎*永远不是*正确的答案。您似乎更多地按照命令式程序员的思路思考。

这比最初看起来要简单得多：

```
WITH Most_Recent_Site (siteId, createdOn) as (SELECT id, MAX(createdOn)
                                              FROM Site_Data
                                              GROUP BY id)

SELECT Site_Data.id, Site_Data.createdOn
FROM Site_Data
JOIN Most_Recent_Site
ON Most_Recent_Site.siteId = Site_Data.id
ORDER BY Most_Recent_Site.createdOn DESC, Site_Data.createdOn DESC 
```

我故意省略了“数据库年份”列，因为它似乎没有增加任何价值。

（而且我有一个有效的[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/6b2e4/4/0)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:34:19.673

```
DECLARE @t TABLE  
(
  SiteID INT,  
  DatabaseYear INT,  
  CreationDate DATE
);

INSERT @t VALUES
(1,2011,'2012-01-01'),
(2,2012,'2012-06-06'),
(3,2010,'2010-10-10'),
(1,2012,'2012-07-07'),
(3,2012,'2012-07-27'),
(4,2012,'2012-08-31');

;WITH x AS 
(
  SELECT SiteID, d = MAX(CreationDate) 
     FROM @t
     GROUP BY SiteID
)
SELECT t.SiteID, t.DatabaseYear, t.CreationDate 
FROM @t AS t
INNER JOIN x 
ON t.SiteID = x.SiteID
ORDER BY x.d DESC, t.CreationDate DESC; 
```

# sql - 查找特定时间范围内的所有 DATEDIFF

> ID：11831054
> 
> 赞同：0
> 
> 时间：2012-08-06T15:16:00.747
> 
> 标签：sql, sql-server-2008

我有一张像![在此处输入图像描述](../Images/323074a150c1695a504de3407b471071.png)

具有 的复合键`patientid, admissiondate, dischargedate`。

请注意，它`patientID 6`具有`dischargedate`10/21 和`admissiondate`10/22 的 a。

也`patientID 11`有一个`dischargedate`2/20 和一个`admissiondate`6/14。

`patientID`a可以在数据库中 的次数没有限制。

如何获得所有实例的列表，其中 an`admissiondate`比前一个多 3 天或更少天`dischargedate`？（`patientid 6`符合这个法案）。它不可能是正确的自我加入多次。我有

```
select  patientid, p.admissiondate, p.dischargedate
    from Patient as p
    where patientid in
    (
        select patientid
            from Patient p2
            group by patientid
            having count(*) > 1
    )
    order by patientid, admissiondate 
```

获取不止一次见过的所有人的列表。我怎样才能确保`admissionDate`在三天后`dischargedate`？（来自本示例中的上一行）。

我不能做一个简单的`datediff(dd,admissiondate, dischargedate)`，因为我不担心`datediff`任何一次访问，只是 NEXT`admissiondate`在前一次的三天内到来`dischargedate`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:18:12.367

```
;with cte as
(
     -- get admission dates by patient in order
select *, ROW_NUMBER() over (partition by PatientID order by AdmissionDate) as AdOrd 
from patient
)
     -- find the gaps between adjacent admissions
    select admissions.patientid, discharges.dischargedate, admissions.admissiondate     
    from cte admissions
        inner join cte discharges on discharges.patientid=admissions.patientid
            and discharges.AdOrd = admissions.AdOrd-1
    where DATEDIFF(D,discharges.dischargedate,admissions.admissiondate )<=3 
```

# caching - Apache2 响应标头 http

> ID：11831055
> 
> 赞同：1
> 
> 时间：2012-08-06T15:16:02.820
> 
> 标签：caching, http-headers, apache2

再会。

我正在尝试找出缓存问题。我们目前正在使用带有内置缓存的 CMS。然后我们可以通过控制面板删除缓存的副本，并且将提供未缓存的页面，直到我们再次缓存该页面。

长话短说，我们知道代理服务器或负载平衡器已经到位，我们认为它正在缓存页面以及 CMS。我们的具体问题是，当我们在 CMS 中取消缓存页面时，在网络之前需要 15 分钟（定时）才能显示未缓存（即使在使用不同的浏览器、清除浏览器缓存等之后）引入设备后，未缓存的页面将立即显示。不幸的是，我们没有在任何地方保存任何历史响应标头。

当我们认为该页面正在被代理/lb 缓存时，响应标头正在返回：

```
HTTP/1.1 304 Not Modified
Server: Apache/2.0.59 (Unix) JRun/4.0 mod_ssl/2.0.59 OpenSSL/0.9.8k PHP/5.2.6
Last-Modified: Fri, 03 Aug 2012 13:29:12 GMT
Etag: "92fe-18f7-837ada00"
Accept-Ranges: bytes
Keep-Alive: timeout=5, max=100
Content-Type: text/html
Content-Encoding: gzip
Connection: Keep-Alive
Date: Mon, 06 Aug 2012 13:49:40 GMT
X-Cntnt-Length: 6391 
```

当它没有被 CMS 缓存时，响应头是：

```
HTTP/1.0 200 OK
Date: Mon, 06 Aug 2012 14:03:59 GMT
Server: Apache/2.0.59 (Unix) JRun/4.0 mod_ssl/2.0.59 OpenSSL/0.9.8k PHP/5.2.6
X-Powered-By: PHP/5.2.6
Set-Cookie: blah-blah-blah
Expires: Mon, 26 Jul 1997 05:00:00 GMT
Last-Modified: Mon, 06 Aug 2012 14:04:04 GMT
Pragma: no-cache
Connection: close
Content-Type: text/html 
```

我想我的问题是，可以将 Apache2 配置为返回 HTTP 1.0 和 1.1 吗？我知道 Etag 表示缓存页面，并且相信它在 HTTP/1.0 中不可用。

感谢您的任何见解。

# java - Java 2 列号格式

> ID：11831057
> 
> 赞同：1
> 
> 时间：2012-08-06T15:16:03.973
> 
> 标签：java, formatting

我正在尝试将数字格式的 C# 示例翻译成 Java。这个想法是将数字输出格式化为 2 个“列”（或 2 个字符）以保持整洁。

使用 C#，这是由

```
Console.WriteLine("{0:00;-0;00}", theInt); 
```

所以 25, 7, -1, 0 打印如下：

```
25
07
-1
00 
```

在Java中有什么好的方法吗？（除了写我自己的功能）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:23:05.190

我相信这就是您正在寻找的。

```
 String.format("%02d", yournumber); 
```

**[==> 在这里查看演示](http://compilr.com/johntotetwoo/sampleformat/Program.java)**

![在此处输入图像描述](../Images/d61b97641e86c510fdbe10388dae7b94.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:24:18.853

你已经在java中格式化了打印

```
System.out.printf("%02d %02d %02d %02d",25,7,-1,0); 
```

如果你输入 \n，它将在下一行打印每个数字。

```
System.out.printf("%02d\n%02d\n%02d\n%02d",25,7,-1,0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:18:18.263

我想您可能正在寻找类似[java.util.Formatter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)的东西，它提供了格式化文本输出、指定列宽以及智能格式化浮点数和日期等常见内容的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:18:38.107

```
String.format(...) 
```

使用[格式](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)

# javascript - 在 Dojo 中定义类

> ID：11831064
> 
> 赞同：1
> 
> 时间：2012-08-06T15:16:24.303
> 
> 标签：javascript, dojo

我正在尝试定义以下类，但它给了我一个错误：

**错误：声明仪表板FloatingPane：mixin #0 不是可调用的构造函数。**

```
define(["dojo/_base/declare", "dojo/dnd/move", "dojox/layout/FloatingPane"],
  function(declare, move, FloatingPane){
    return declare("dashboardFloatingPane", [move, FloatingPane], {

    constructor: function() {
            this.inherited(arguments);
            this.moveable = new dojo.dnd.move.constrainedMoveable(
                this.domNode, {
                    handle: this.focusNode,
                    constraints: function() {
                        var coordsWindow = {
                            l: 0,
                            t: 20,
                            w: window.innerWidth,
                            h: window.innerHeight                            
                        };
                        return coordsWindow;
                    }, within: true
                }
            );                            
        } 
    });
}); 
```

我错过了什么？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:22:47.170

在示例 #1 中，您尝试将`dojo/dnd/move`模块用作类的父级，而在示例 #2 中，您不是。

```
return declare("dashboardFloatingPane", [move, FloatingPane], { 
```

对比

```
dojo.declare("dashboardFloatingPane", dojox.layout.FloatingPane, { 
```

我不相信该`dojo/dnd/move`模块不是要继承的有效类，因此它不是可调用构造函数的错误。

# coldfusion - ColdFusion 会话没有超时？为什么不？

> ID：11831065
> 
> 赞同：0
> 
> 时间：2012-08-06T15:16:27.547
> 
> 标签：coldfusion, session-timeout, coldfusion-8

我正在使用 ColdFusion 8。我正在使用这一行来超时会话：

```
<CFAPPLICATION NAME="XXX" 
CLIENTMANAGEMENT="NO" 
SESSIONMANAGEMENT="Yes" 
sessionTimeout="#CreateTimeSpan(0,0,1,0)#"> 
```

我正在创建一个这样的会话：

```
if (not structKeyExists(SESSION, "UserInfo")) {
    SESSION.UserInfo = structNew();
} 
```

我希望我的会话会在一分钟后超时。这无法正常工作。我已经尝试了所有数字组合，但我的会话永远不会超时。即使整个周末都没有工作（并关闭了我的浏览器），我的会话仍然正常运行。

为什么我的会话不会超时？

编辑〜我的会话没有超时的证据是，我可以访问具有会话范围内特定信息的站点，并且即使在几周不使用该浏览器之后，它也永远不会消失。

我们有三个具有三个不同名称的站点：1) XXXProd、2) XXXStage 和 3) XXXDev。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:33:44.200

您是否考虑过切换到 J2EE 会话？

```
<cfscript>
    session.setMaxInactiveInterval(1);
    getPageContext().getSession().invalidate();
</cfscript>
<cfcookie name="jsessionid" expires="now">
<cflocaton url="/" addtoken="false"> 
```

这不仅会杀死会话的 cookie 和 ColdFusions 知识，还会杀死底层会话。您也不需要以这种方式进行“无会话”页面请求。

根据您目前的情况，在 Server Monitor 中您可以看到正在创建和销毁的会话吗？

# python - 实现附加参数的 functools.partial

> ID：11831070
> 
> 赞同：9
> 
> 时间：2012-08-06T15:16:36.053
> 
> 标签：python, functools

[functools.partial](http://docs.python.org/library/functools.html?highlight=functools#functools.partial)的文档说它“大致相当于”：

```
def partial(func, *args, **keywords):
    def newfunc(*fargs, **fkeywords):
        newkeywords = keywords.copy()
        newkeywords.update(fkeywords)
        return func(*(args + fargs), **newkeywords)  # line to change
    newfunc.func = func
    newfunc.args = args
    newfunc.keywords = keywords
    return newfunc 
```

如果我想实现一个预先添加附加参数的版本，*似乎*我只需要更改指示的行。

仅复制此代码时，是否还有其他我应该担心的功能/陷阱？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T15:50:51.770

查看 的源代码[`_functoolsmodule.c`](http://hg.python.org/cpython/file/tip/Modules/_functoolsmodule.c)，我认为没什么好担心的。

`partial`处理**pickling**和的模块实现`repr`，但其他一切看起来都像文档中的那样工作，所以大概它在 C 中实现的原因只是为了提高效率。还有一个事实是它是一种类型，而不仅仅是一个函数闭包。

但是请注意，在文档示例`func`中`args`， 和`keywords`纯粹是装饰性的；即它们不能像实际`functools.partial`实例那样被覆盖。一种替代方法是 subclass `functools.partial`：

```
class rpartial(partial):
    def __call__(self, *args, **kwargs):
        kw = self.keywords.copy()
        kw.update(kwargs)
        return self.func(*(args + self.args), **kw) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:41:26.267

一个陷阱是您的部分赋值将如何处理任意参数，例如在以下示例中：

```
def f(a,b, *args):
    pass 
```

现在部分适用`f`于参数 1 和 2：

```
g = partial(f, 1, 2) 
```

中的参数值是`b`多少`g`？是 1，还是仍在等待值？就此而言， 的价值是`a`多少？换句话说，提供的参数中有多少（如果有）应该被视为附加参数。

# email - mutt config：回复邮件发送到的地址

> ID：11831077
> 
> 赞同：10
> 
> 时间：2012-08-06T15:16:44.613
> 
> 标签：email, gmail, mutt

好的，这就是交易。我有一个`romeo@school.com`保存在 Outlook 服务器上的学校电子邮件地址（比如 ）。因为我真的不喜欢 Outlook，所以我把这封邮件转发到了一个 gmail 地址（比如`romeo@gmail.com`）。

我已经设法设置了 mutt 和 gmail，这样当我从 gmail 帐户发送邮件时，就好像它是从学校帐户发送的一样（“发件人”和“回复收件人”字段显示`romeo@school.com`而不是`romeo@gmail.com`）。

现在，我也开始将 gmail 帐户用作普通电子邮件地址（将其放在联系信息中），所以人们开始给我发邮件`romeo@gmail.com`，但有些人仍然给我发电子邮件`romeo@school.com`。

有没有办法设置 mutt 和 gmail 以便它使用正确的电子邮件地址自动回复（例如，邮件最初也是发送的那个）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T16:11:08.040

首先，您还必须设置您的 gmail，以便它从两个地址发送电子邮件。

然后您可以添加到 .muttrc 中的行：

```
alternates "romeo@school.com|romeo@gmail.com"
set reverse_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T14:12:16.943

如果您将邮件存储在文件夹中，则可以使用[文件夹挂钩指令。](http://www.mutt.org/doc/manual/manual-3.html#folder-hook)

```
folder-hook .      "set from=romeo@gmail.com"
folder-hook school "set from=romeo@school.com" 
```

否则你可以使用[send-hook](http://www.mutt.org/doc/manual/manual-3.html#send-hook)

```
send-hook '~t ^romeo@school\.com$' 'my_hdr From: romeo@school.com' 
```

看看这个[页面](http://www.mutt.org/doc/manual/manual-4.html#pattern_hook)的钩子。

# c# - 确定 DevExpress GridControl 中单击的行

> ID：11831079
> 
> 赞同：1
> 
> 时间：2012-08-06T15:16:49.627
> 
> 标签：c#, wpf, devexpress

我有一个 DevExpress GridControl：

```
<dxg:GridControl ItemsSource="{Binding Path=MyData}" MouseDoubleClick="GridControl_MouseDoubleClick" /> 
```

在事件处理程序中，我可以通过调用很好地确定焦点行`GetFocusedRow()`。但是，当滚动条被快速连续单击两次时，也会调用处理程序。

如何确定用户是否真的双击了一行？或者我可以轻松地将事件处理程序附加到行而不需要重新设置样式吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:12:57.500

这就是你所需要的：

```
TableViewHitInfo hi = ((TableView)gridControl.View).CalcHitInfo(e.OriginalSource as DependencyObject);

if (hi.InRow)
{
    //Do work...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T18:28:46.973

在这里 -> [Wpf datagrid 行双击](http://dotnet-experience.blogspot.de/2011/01/wpf-datagrid-row-double-click.html)您可以找到该主题的好文章。

# asp.net-mvc - Orchard CMS 和控制器与驱动程序

> ID：11831081
> 
> 赞同：1
> 
> 时间：2012-08-06T15:17:07.517
> 
> 标签：asp.net-mvc, orchardcms

问了这么多问题我有点惭愧，但我真的很想学习。在[Sipke 的博客](http://skywalkersoftwaredevelopment.net/blog/writing-an-orchard-webshop-module-from-scratch-part-1 "西普克的博客")中创建了一个网上商店。在尝试做类似的事情时，有一个特定的问题让我难以置信。

先说一下基本要求：

*   用户注册表单和登录等。这个被博客覆盖了，效果很好。
*   创建产品零件等。这个被覆盖了，没有问题。
*   通过填写订购单并付款进行订购。向下看
*   让客户可以维护订单页面。往下看。
*   查看您自己的订单及其状态。向下看
*   维护来自后端系统的客户和订单。这个在博客中有介绍，我还需要在那里做一些工作。

至于有关创建订单和查看订单的项目。我遵循了创建记录和使用标准 MVC 控制器的方法。但是后来我遇到了问题：

1.  订单页面的菜单。这是我在安装模块后必须手动完成的。
2.  订单页面本身。我必须创建包含标题等的视图。但我可以想象一个客户想要另一个菜单上的订单页面和不同的标题。甚至可能在订购页面中添加一些自己的内容。这是我无法通过使用标准 MVC 方法实现的。所以也许我在这里使用了错误的方法。所以我正在考虑使用 contentparts 来创建订单并显示它们，并为此使用驱动程序和处理程序。但在我走这条路并重构一切之前，我想知道这是否是正确的方法。不利的一面可能是，一旦模块遵循该路线，它就不能轻易地被具有其他 cms 能够托管 MVC3 模块的客户重用。

因此，何时使用驱动程序、处理程序和内容部分以及何时使用标准控制器和视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:42:31.933

当您想要为内容项创建功能时，您应该使用驱动程序和部件（如果需要，可以使用处理程序）。例如，如果您想显示包含所有产品的自定义媒体，您可以创建一个部件（连同其驱动程序等）来处理它。阅读[有关部件的文档](http://docs.orchardproject.net/Documentation/Writing-a-content-part)。

如果该功能不与内容项绑定，那么您最有可能使用标准 MVC 工具箱，这很好。看看内置模块是如何做到的。例如，Blog 模块使用控制器和视图来显示管理 UI，但有一些部分可以增强功能，例如 Blog 内容类型。

为了使事情变得更复杂[，您可以使用临时内容项](http://english.orchardproject.hu/blog/the-orchard-dynamic-page-pattern)来构建通常使用简单视图的页面，但这是一个高级主题:-)。

# c++ - Kinect SDK 在后台线程上无缘无故崩溃

> ID：11831088
> 
> 赞同：1
> 
> 时间：2012-08-06T15:17:14.603
> 
> 标签：c++, kinect

Kinect SDK 在打开 NuiImageStream 时抛出访问冲突异常。我已经检查并且所有指针都有效；异常不是在我的线程上引发的；但在 Kinect SDK 运行的后台线程上。有任何想法吗？

```
 int _tmain(int argc, _TCHAR* argv[])
{
    INuiSensor* sensor;
    NuiCreateSensorByIndex(0,&sensor);
    HRESULT ps = sensor->NuiInitialize(NUI_INITIALIZE_FLAG_USES_DEPTH_AND_PLAYER_INDEX|NUI_INITIALIZE_FLAG_USES_COLOR|NUI_INITIALIZE_FLAG_USES_SKELETON);
    HANDLE mvent = CreateEvent(NULL,FALSE,FALSE,NULL);
    HANDLE streamHandle;
    HRESULT ur = sensor->NuiImageStreamOpen(NUI_IMAGE_TYPE_COLOR,NUI_IMAGE_RESOLUTION_640x480,0,2,mvent,&streamHandle); 

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:38:56.080

重新安装 SDK 解决了这个问题。

# arrays - perl 使用 Tie::IxHash 的哈希数组

> ID：11831091
> 
> 赞同：1
> 
> 时间：2012-08-06T15:17:17.893
> 
> 标签：arrays, perl, hash

我正在尝试创建一个散列数组，每个散列都是一个并列的有序 IxHash。当遍历我的初始哈希时，键确实是有序的。但是，一旦我将它们推送到数组上，排序就会消失。我知道这是我对将哈希推送到数组时发生的情况的了解不足，但是如果有人可以启发我，将不胜感激。

```
#! /usr/bin/perl -w

use strict;
use Data::Dumper;
use Tie::IxHash;

my @portinfo;

tie (my %portconfig, 'Tie::IxHash',
      'name' => [ 'Name', 'whatever' ],
      'port' => [ 'Port', '12345' ],
      'secure' => [ 'Secure', 'N' ]
      );

print "Dump of hash\n";
print Dumper(%portconfig);

print "\nDump of array\n";
push @portinfo, {%portconfig}; 
print Dumper(@portinfo); 
```

这个的输出： -

```
Dump of hash
$VAR1 = 'name';
$VAR2 = [
          'Name',
          'whatever'
        ];
$VAR3 = 'port';
$VAR4 = [
          'Port',
          '12345'
        ];
$VAR5 = 'secure';
$VAR6 = [
          'Secure',
          'N'
        ];

Dump of array
$VAR1 = {
          'secure' => [
                        'Secure',
                        'N'
                      ],
          'name' => [
                      'Name',
                      'whatever'
                    ],
          'port' => [
                      'Port',
                      '12345'
                    ]
        }; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T15:21:49.137

你的代码：

```
push @portinfo, {%portconfig}; 
print Dumper(@portinfo); 
```

获取绑定的哈希`%portconfig`并将其内容放入一个新的匿名哈希中，然后将其推入`@portinfo`. 因此，您的数组中有一个匿名的、无序的散列。

你可能想要做的是

```
push @portinfo, \%portconfig; 
print Dumper(@portinfo); 
```

这会将**引用**推`%portconfig`入`@portinfo`，从而保留您所需的顺序。

因此：

```
#! /usr/bin/perl -w

use strict;
use Data::Dumper;
use Tie::IxHash;

my @portinfo;

tie (my %portconfig, 'Tie::IxHash',
      'name' => [ 'Name', 'whatever' ],
      'port' => [ 'Port', '12345' ],
      'secure' => [ 'Secure', 'N' ]
      );

print "Dump of hash\n";
print Dumper(%portconfig);

print "\nDump of array\n";
push @portinfo, \%portconfig; 
print Dumper(@portinfo); 
```

给

```
C:\demos>perl demo.pl
Dump of hash
$VAR1 = 'name';
$VAR2 = [
          'Name',
          'whatever'
        ];
$VAR3 = 'port';
$VAR4 = [
          'Port',
          '12345'
        ];
$VAR5 = 'secure';
$VAR6 = [
          'Secure',
          'N'
        ];

Dump of array
$VAR1 = {
          'name' => [
                      'Name',
                      'whatever'
                    ],
          'port' => [
                      'Port',
                      '12345'
                    ],
          'secure' => [
                        'Secure',
                        'N'
                      ]
        }; 
```

# python - Django ORM - 通过 user_id 加入很多表

> ID：11831092
> 
> 赞同：0
> 
> 时间：2012-08-06T15:17:19.453
> 
> 标签：python, django, join, orm

我有大约 5 个带有用户外键的表，即：

```
class Passport(models.Model):
    user = models.OneToOneField(User)
    ... 
```

此外，像 UserProfile、Company、UserOptions、NotifySettings 等类。我需要获取带有用户摘要页面连接值的 dict。我还需要加入这个联盟这个汇总统计：

```
rent_sums = WriteOff.objects.filter(created_at__range=(rent_start, rent_finish), write_off_type='rent').values('user').\
                annotate(rent_amount=Sum('amount')).order_by() 
```

如果不手动更新结果字典，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:44:05.497

您可以通过从 django 执行[自定义 SQL](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly)来做到这一点，但我在这里看到的主要问题是模型的处理方式，如果您将所有这些用户外键混合到 UserProfile 中会容易得多，例如：

```
class UserProfile(models.Model):
    user = fields.OneToOneField(User)
    company = fields.ForeignKey(Company)
    options = fields.ForeignKey(Options)
    notification_settings = fields.ForeignKey(NotifySettings)
    ... 
```

这样你就可以更轻松地使用 django 带来的 ORM。在我看来，创建迁移而不是这个庞大的查询会更快。

# php - 具有无限参数的wsdl操作

> ID：11831093
> 
> 赞同：2
> 
> 时间：2012-08-06T15:17:22.057
> 
> 标签：php, wsdl, soapserver

我必须为从另一个服务传递数据的 SoapServer 创建 WSDL。提供给我的数据具有以下结构：

```
<operationName>
    <parameterHeader></parameterHeader>
    <parameterData1></parameterData1>
    <parameterData2></parameterData2>
    ...
    <parameterDataN></parameterDataN>
</operationName> 
```

这意味着我必须创建方法

```
function operationName(parameterHeader, parameterData1, parameterData2, ... parameterDataN){
  ...
} 
```

不可能知道有多少参数将提供给我的操作。

作为一种解决方案，我正在尝试为不带参数的方法创建 WSDL，但在此方法内部使用该函数`func_get_args()`来获取所有参数。

不幸的是，我仍然无法创建正确的 WSDL，而且我不确定这是否可行。

我的网络服务应接收的精确数据（示例）如下：

```
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <env:Header/>
    <env:Body>
        <tns:operationResponse xmlns:tns="http://somedomain.com/demo" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                              xmlns="http://anotherdomain.com/anotherdemo">
            <tns:ResponseHeader attrName1="data1" attrName2="data2" attrName3="data3" />
            <tns:ObjectData>
                <tns:ElementData ElementAttr1="data1" ElementAttr2="data2" ElementAttr3="data3"/>
            </tns:ObjectData>
            <tns:ObjectData>
                <tns:ElementData ElementAttr1="data21" ElementAttr2="data22" ElementAttr3="data23"/>
            </tns:ObjectData>
            <tns:ObjectData>
                <tns:ElementData ElementAttr1="data31" ElementAttr2="data32" ElementAttr3="data33"/>
            </tns:ObjectData>
            <tns:ObjectData>
                <tns:ElementData ElementAttr1="data41" ElementAttr2="data42" ElementAttr3="data43"/>
            </tns:ObjectData>
        </tns:operationResponse>
    </env:Body>
</env:Envelope> 
```

您是否对此类 WSDL 有任何经验，或者对如何获得提供的数据结构有一些想法？

我虽然考虑考虑作为参数名称的可能性，所以其他数据可以用作复杂类型。也许 WSDL 提供了一些技巧......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:34:55.740

和 Mike 一样，我的第一种方法是使用数组参数。虽然可以想象一个过程中有无限的参数，但我很确定 WSDL 中的这种定义只是枚举的，因此您必须明确列出您的参数。还要考虑一些 Web 服务实现可能无法管理无限的参数（在这种情况下，在请求方，所以这是他们的问题，而不是你的问题）。

# javascript - Jquery $.get() 处理由 javascript 中的查询产生的数据

> ID：11831094
> 
> 赞同：2
> 
> 时间：2012-08-06T15:17:21.353
> 
> 标签：javascript, php, jquery, arrays, http-get

我有一个`$.get()`声明，它返回这个（来自 a 的结果`console.log()`）：

`{"desc":"asdasda","dateD":"2012-08-31","dateE":"2012-09- 01","image":"fasdasdasd","categorie":"3"}`

现在，当我尝试在 Javascript 中操作数组时，所有内容都包含一个`undefined`或`null`值：

```
var image = data.image;
desc = data.desc;
dateD = data.dateD;
dateF = data.dateE;
image = data.image;
categorie = data.categorie; 
```

注意：`DateF= data.dateE`不是错误。

注意 2：这些语句都`function (data){}`包含在`$.get()`.

所有这些任务都返回`undefined`。我究竟做错了什么？我已经阅读并重新阅读了[官方的 jQuery 文档](http://api.jquery.com/jQuery.get/)，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:22:33.663

确保`dataType`将返回的 设置为`json`。

如果你不这样做，结果数据可能是一个**字符串**，你需要使用`JSON.parse(data)`它来把它变成一个可用的对象。

* * *

例如：

```
$.get(url, getData, function(data){
    //your fn...
}, 'json'); 
```

# java - Java/Android 静态私有变量的垃圾收集

> ID：11831099
> 
> 赞同：3
> 
> 时间：2012-08-06T15:18:04.163
> 
> 标签：java, android, garbage-collection

假设我有一个这样定义的片段：

```
public class MyFragment extends Fragment {
   private static String sample = "";

   public static void setSample(String s) {
      sample = s;
   }
} 
```

在应用程序的生命周期内，是否会收集垃圾样本（无论是否存在对 MyFragment 的任何引用——我认为这无关紧要）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:20:22.087

你是对的，实例的数量`MyFragment`无关紧要。

`sample`只要加载的类加载器处于活动状态，该变量就会有效地成为 GC 根`MyFragment`。

重要的是要注意*变量*永远不会被垃圾收集 -*对象*是。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T15:21:12.353

只要类没有被[卸载](http://docs.oracle.com/javase/specs/jls/se5.0/html/execution.html#12.7)，样本变量就不会被垃圾回收。

> 当且仅当其定义的类加载器可以被垃圾收集器回收时，类或接口才能被卸载，如第 12.6 节中所讨论的。引导加载程序加载的类和接口可能不会被卸载

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T15:23:05.833

`private static String sample`

当它在你的代码中第一次被引用（类加载器加载它）时将开始存在，并且将独立于现有的对象引用而保持活动状态。

# ajax - 警报在响应之前到来

> ID：11831103
> 
> 赞同：0
> 
> 时间：2012-08-06T15:18:21.120
> 
> 标签：ajax, jquery

我有这个验证用户提供的密钥的 ajax 函数。但是警报出现在 ajax 响应之前，因此如果用户提供了错误的密钥，甚至可以访问

```
$(document).ready(function() {
    $('#submit').click(function(e) {
        e.preventDefault();
        var key = $('#downloadkey').val();
        var dataString = {KEY:key};
        $.ajax({
            url: "/mediabox/home/validate_key",
            type: 'POST',
            data: dataString,

            success: function(msg) {
                if(msg=="true") 
                {
                   alert("do something");
                }
                else
                {
                   alert("Your download key is either wrong or you didn't provide it.");
                   return false;
                }                        

            }
        });

    });
}); 
```

![在此处输入图像描述](../Images/1a07b3dadb05ee3a47a6abfb45becc9f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:21:09.887

是什么让您相信警报会在响应之前到来？只有在客户端成功接收到响应后才会调用成功处理程序。

要确认，您可以编辑成功处理程序以记录响应：

```
success: function(msg) {
   console.log(msg);
   if(msg=="true") 
   {
      alert("do something");
   }
   else
   {
       alert("Your download key is either wrong or you didn't provide it.");
       return false;
   }                        
} 
```

此外，如果您`return false`通过阻止 HTML 操作来拒绝用户访问，由于 AJAX 的异步特性，该操作将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:21:28.030

[请求完成时调用success](http://api.jquery.com/jQuery.ajax/)函数。

> 成功（数据，文本状态，jqXHR）函数，数组
> 
> 请求成功时调用的函数。该函数获得三个参数： 从服务器返回的数据，根据 dataType 参数格式化；描述状态的字符串；和 jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象。从 jQuery 1.5 开始，success 设置可以接受一个函数数组。每个函数都会被依次调用。这是一个 Ajax 事件。

成功处理程序中的代码只会在 AJAX 请求完成后执行。如果您事先收到警报，则表明请求已正确完成。

# ruby-on-rails - Javascript 嵌套表单 Railcast

> ID：11831104
> 
> 赞同：0
> 
> 时间：2012-08-06T15:18:22.743
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

嗨，我正在尝试做 railcasts 嵌套形式，第 1 部分和第 2 部分。看来我有几个问题，我不明白为什么。

```
Question 1: The add and remove links don't works, they show up but don't actually execute anything
Question 2: I get the following error code and don't understand why? The error is regarding the f.error_messages is not recognized
Question 3: When trying to create a surveys i get: Can't mass-assign protected attributes: answer 
```

谢谢你，我的代码类似于 railcasts 196,197

模型题

```
class Question < ActiveRecord::Base
  belongs_to :survey
  attr_accessible :content, :question_id, :name, :answers_attributes
  has_many :answers, :dependent => :destroy
  accepts_nested_attributes_for :answers , :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true
end 
```

模型答案

```
class Answer < ActiveRecord::Base
  belongs_to :question
  attr_accessible :content, :question_id
end 
```

模型调查

```
class Survey < ActiveRecord::Base
  has_many :questions, :dependent => :destroy
  accepts_nested_attributes_for :questions , :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true
  attr_accessible :name, :questions_attributes
end 
```

意见表格

```
<%= form_for(@survey) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <p><%= link_to_add_fields "Add Question", f, :questions %></p>
  <%= f.fields_for :questions do |bf|%>
    <% render 'question_fields', :f => bf %>
  <% end %>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

问题字段

```
<p>
  <%= f.label :content, "Question" %><br />
  <%= f.text_area :content, :rows=> 3 %>
  <%= f.check_box :_destroy %>
  <%= link_to_remove_fields "remove", f %>
</p>
<p><%= link_to_add_fields "Add Answer", f, :answers %></p>
<%= f.fields_for :answer do |form| %>
  <%= render 'answer_fields', :f => form %>
<% end %> 
```

answer_fields

```
<p class="fields">
  <%= f.label :content, "Answer" %>
  <%= f.text_field :content %>
  <%= link_to_remove_fields "remove", f %>
</p> 
```

控制器

javascript 应用程序.js

```
function remove_fields(link) {
  $(link).previous("input[type=hidden]").value = "1";
  $(link).up(".fields").hide();
}

function add_fields(link, association, content) {
  var new_id = new Date().getTime();
  var regexp = new RegExp("new_" + association, "g")
  $(link).up().insert({
    before: content.replace(regexp, new_id)
  });
} 
```

application_jquery.js

```
function remove_fields(link) {
  $(link).prev("input[type=hidden]").val("1");
  $(link).closest(".fields").hide();
}

function add_fields(link, association, content) {
  var new_id = new Date().getTime();
  var regexp = new RegExp("new_" + association, "g")
  $(link).parent().before(content.replace(regexp, new_id));
} 
```

任何帮助表示赞赏。

这里是教程的链接 [http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1) http://railscasts.com/episodes/197-nested-model-form-part-2

而且路线不确定您的意思。

```
Surveysays::Application.routes.draw do
  resources :surveys
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:10:27.703

问题1：按下按钮时没有调用这些函数。在 railscast 中，他将 link_to_remove 和 link_to_add 添加到应用程序助手中。

```
module ApplicationHelper
  def link_to_remove_fields(name, f)
    f.hidden_field(:_destroy) + link_to_function(name, "remove_fields(this)")
  end

 def link_to_add_fields(name, f, association)
   new_object = f.object.class.reflect_on_association(association).klass.new
   fields = f.fields_for(association, new_object, :child_index => "new_#{association}")    do |builder|
      render(association.to_s.singularize + "_fields", :f => builder)
   end
    link_to_function(name, "add_fields(this, \"#{association}\", \"#{escape_javascript(fields)}\")")
  end
end 
```

问题 2：不确定，但可能会通过其他一些修复来解决

问题3：您在这里有一个类型：

```
<%= f.fields_for :answer do |form| %>
  <%= render 'answer_fields', :f => form %>
<% end %> 
```

应该

```
<%= f.fields_for :answers do |form| %>
  <%= render 'answer_fields', :f => form %>
<% end %> 
```

这是答案，因为您有一艘 has_many 关系船。属性 answer 不存在，默认情况下也被列入白名单。这就是为什么你会得到批量分配错误。

在他的修订版中还有一个更简单的版本：

[http://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

# asp.net - 部署时包括版本号（一般为程序集版本号）

> ID：11831105
> 
> 赞同：0
> 
> 时间：2012-08-06T15:18:30.543
> 
> 标签：asp.net, .net, version, assemblyinfo

如何在我的网站页面上包含项目的版本号，尤其是在错误页面上？有一个名为 AssemblyInfo.cs 的文件，所以我想我可以使用反射从那里获取信息。我必须在那里手动增加版本号吗？该文件告诉您可以使用 *.

```
[assembly: AssemblyVersion("1.0.*")] 
```

这样，版本号似乎会自动增加，但是他什么时候这样做并且建议使用星号？是否有手动增加数字的指南？我的意思是有四个数字，例如 1.0.0.0。这些数字中的每一个都有什么作用？因此，当我使用反射显示版本号时，我可以在运行时显示它。但是是否可以自动将数字包含在文件中，这样您甚至可以在不运行项目的情况下找出它（如果失败，这可能是不可能的）。

# iphone - 标签栏和情节提要：更改默认标签

> ID：11831110
> 
> 赞同：4
> 
> 时间：2012-08-06T15:18:55.407
> 
> 标签：iphone, xcode, storyboard, tabbar

我的故事板中有一个标签栏和 5 个标签。

我希望我的应用程序加载到中间选项卡上，但我找不到如何做以及在哪里做。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T12:32:54.850

我找到了答案！

在 appDelegate.m 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
UITabBarController *tabBar = (UITabBarController *)self.window.rootViewController;
tabBar.selectedIndex = 2;
return YES;
} 
```

希望它会有所帮助！

# javascript - 链接内的 Contenteditable 块，如何防止重定向但让文本选择\插入符号位置发生变化？

> ID：11831112
> 
> 赞同：0
> 
> 时间：2012-08-06T15:19:04.007
> 
> 标签：javascript, hyperlink, contenteditable, event-bubbling

这是演示：http: [//jsfiddle.net/qh7Sq/](http://jsfiddle.net/qh7Sq/)

我希望能够编辑链接内的跨度，实际上我可以通过防止冒泡传播阻止插入符号更改操作的某些部分。

请不要建议不同的标记，只有 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:41:55.450

如果不使整个链接可编辑，我认为不会有这样做的好方法：

```
$('a').prop("contentEditable", "true"); 
```

演示：http: [//jsfiddle.net/qh7Sq/1/](http://jsfiddle.net/qh7Sq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-05T21:38:39.193

我就是这样做的：

1.  防止在 contenteditables 内点击默认
2.  对于 firefox，删除并添加 href-attribute 以防止将光标放在 contenteditable-element 的开头

[https://jsfiddle.net/e15j8oq9/1/](https://jsfiddle.net/e15j8oq9/1/)

```
// if contenteditable inside a link
document.addEventListener('click', e=>{
    if (e.button !== 0) return;
    if (e.target.isContentEditable) {
        e.preventDefault();
    }
    if (e.explicitOriginalTarget && e.explicitOriginalTarget.isContentEditable) { // keyboard click firefox
        e.preventDefault();
    }
});

// prevent (Firefox) placing cursor incorrectly
document.addEventListener('mousedown', e=>{
    if (!e.target.isContentEditable) return;
    var link = e.target.closest('a');
    if (link) {
        const href = link.getAttribute('href')
        link.removeAttribute('href');
        setTimeout(()=>link.setAttribute('href', href))
    }
}); 
```

# css - CSS浮动像素和混合百分比

> ID：11831113
> 
> 赞同：2
> 
> 时间：2012-08-06T15:19:11.493
> 
> 标签：css, layout, percentage

好的，我想要这个：

![以浏览器窗口为中心的正确布局。](../Images/3359d292fd5b58a042f2f15aebd0ad3b.png)

为此，我有这个 HTML 代码：

```
<div id="wrapForCenter">
    <div id="title">
        title
    </div>
    <div id="contentFrame">
        <div id="imagePlaceholder">
            image
        </div>
        <div id="content">
            content
        </div>
    </div>            
    <div id="buttonsBar">
        buttonsBar
    </div>      
</div> 
```

我有这个 CSS 代码：

```
#wrapForCenter
{
    position: absolute;
    top:50%;
    left: 50%;
    margin-top: -160px;
    margin-left: -240px;
    width: 480px;
    height: 320px;
    border: 1px solid black;
}

#title
{        
    width: 100%;
    height: 40px;
    background-color: Blue;
}

#contentFrame
{
    height: 240px;
    width: 480px;
}

#imagePlaceholder
{
    float: left;
    width: 100px;
    height: 100%;
    background-color: Green;
}

#content
{
    float: left;
    width: 380px; /*<-- look at this*/
    height: 100%;
    background-color: Yellow;
    overflow: auto;
}

#buttonsBar
{
    clear: left;
    width: 100%;
    height: 40px;    
    background-color: Silver;
} 
```

如果我将内容宽度更改为 100%，为什么会发生这种情况？

![内容获得 100% 的容器，但它不尊重图像宽度](../Images/7985f1bd6c47652dc1e7bb9521e98ed4.png)

我预计内容宽度将是 contentFrame 减去 imagePlacehoder 宽度（以像素为单位），但是当我为 imagePlacehoder 和内容指定 float:left 时，内容获取其父容器宽度。为什么？

是否有另一种方法可以在不使用浮点数的情况下获得相同的结果（可能是显示：内联）？并使用 width:100% 作为内容？

非常感谢。CSS 不是我的强项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:23:05.987

这称为浮动下降。浮子的工作原理是只要每个都有足够的空间，它们就可以并排放置，但是如果没有足够的空间来容纳，浮子会撞到前一个的下方。

`width:100%`意味着使其 100% 与其容器一样宽 (#wrapForCenter)。自然地，如果你告诉某个东西是它的容器的*整个*宽度，那么任何东西都不能放在那个容器的任何一侧，所以作为一个浮动它必须向下移动到它之前的任何东西（更早的“兄弟”）下面才能适应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T16:33:35.037

我自己之前在stackoverflow中问过一个类似的问题。

[如何使用 jQuery 或 CSS 自动调整（拉伸）div 的高度和宽度](https://stackoverflow.com/questions/5566798/auto-adjust-div-height-and-width-stretch)

您可以设置**HTML 之**类的；

```
<div id="container">
    <div id="top"></div>
    <div id="left"></div>
    <div id="right"></div>
    <div id="bottom"></div>
</div> 
```

和**CSS**一样；

```
#container {
    position: relative;
    width: 300px;
    height: 200px;
}
#top, #left, #right, #bottom {
    position: absolute
}
#top {
    top: 0;
    width: 100%;
    height: 50px;
    background: #00b7f0
}
#left {
    top: 50px;
    width: 50px;
    bottom: 50px;
    background: #787878
}
#right {
    top: 50px;
    left: 50px;
    right: 0;
    bottom: 50px;
    background: #ff7e00
}
#bottom {
    bottom: 0;
    width: 100%;
    height: 50px;
    background: #9dbb61
} 
```

***[这](http://jsfiddle.net/thirtydot/4BR9s/)***是工作演示。

希望这可以帮助..

*注意：*我建议（不强迫）您在提问之前在 stackoverflow 中进行搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:24:54.483

您应该将图像保持器设置为 25%，将内容设置为 75%，或者如果您知道为整个内容区域（图片和内容）分配了多少空间，则从中减去 100 并使用那么多像素。但总的来说这应该有效

```
#wrapForCenter {
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -160px;
    margin-left: -240px;
    width: 480px;
    height: 320px;
    border: 1px solid black;
}

#title {        
    width: 100%;
    height: 40px;
    background-color: Blue;
}

#contentFrame {
    height: 240px;
    width: 480px;
}

#imagePlaceholder {
    float: left;
    width: 25%;    /* See Here */
    height: 100%;
    background-color: Green;
}
#content {
    float:right;
    width: 75%;  /* And here */
    height: 100%;
    background-color:Yellow;
  } 
```

# php - SugarCRM 将数据库数据保存到文件

> ID：11831118
> 
> 赞同：-2
> 
> 时间：2012-08-06T15:19:18.827
> 
> 标签：php, mysql, sugarcrm

有什么方法可以将 Sugarcrm 数据库的特定表的数据保存到 doc 文件中？

我有一个带有用户名、一些注释和日期的自定义模块。我想将其写入数据库和文件中。

它不仅仅是一个 php 文件。我想使用逻辑钩子并编写代码。我想使用逻辑挂钩来访问数据库，然后将数据写入文件。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:01:58.930

保存为 DOC 文件可能不是最好的主意，因为它主要用于格式化信息。标准 .txt 文件通常是您用于此类过程的文件。

话虽如此，糖中没有任何内置方法可以让你做到这一点。您需要将功能构建到模块中。

你到底想完成什么？有一个非常强大的审计工具集，可以很好地查看对模块对象的修订。如果您只想监视对表的更改，您可以在 SQL 中为该表/数据库设置日志记录。

+++好的，如果您只是想在保存后写入文件，请按照以下说明操作：[http](http://cheleguanaco.blogspot.com/2009/06/simple-sugarcrm-logic-hook-example.html) : //cheleguanaco.blogspot.com/2009/06/simple-sugarcrm-logic-hook-example.html让逻辑钩子工作的快速方法。您将要创建一个 php 文件，该文件仅使用通过 bean 类传递给它的数据，并直接从 bean 中的数据写入文件，或使用 bean->id 参数执行 SQL 查询和从该数据写入文件。

另外，这是一个将立即生成然后在事务结束时销毁的 DOC 文件吗？或者它更像是一个持久的日志文件？

++++这很简单，那么在您现在拥有查询的地方，将其替换为：

```
$file = fopen($pathAndNameOfFile, 'a+') or die('Could not open file.');
$query = "SELECT * FROM data_base.table";
$result = $bean->db->query($query,true);
$dbRowData = $bean->db->mysql_fetch_assoc($result);
$printedArray = print_r($dbRowData);     
fwrite($file, $printedArray) or die('Could not write to file.');
fclose($file); 
```

*快速说明，您可能需要设置权限才能读取/写入文件，但这些是特定于机器类型的，因此如果您遇到错误，请搜索为您的特定服务器设置权限类型。

**此外，'SELECT * FROM database.table' 将返回整个表中的所有行。这将生成一个非常大的文件，并且随着表的增长成为性能障碍。您应该使用 bean 类来更新最后保存的元组：

```
$file = fopen($pathAndNameOfFile, 'a+') or die('Could not open file.');
$query = "SELECT * FROM data_base.table WHERE id = '".$focus->id."';";
$result = $bean->db->query($query,true);
$dbRowData = $bean->db->mysql_fetch_assoc($result);
$printedArray = print_r($dbRowData);     
fwrite($file, $printedArray) or die('Could not write to file.');
fclose($file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:24:45.530

您可以使用 mysqldump 将 mysql 数据库导出/转储到 SQL 文件中

```
mysqldump -u userName -p databaseName tableName > fileName.sql 
```

# json - 在 JBoss 7.1.1 上的 RESTEasy 中设置 JSON 提供程序

> ID：11831119
> 
> 赞同：8
> 
> 时间：2012-08-06T15:19:19.263
> 
> 标签：json, jboss7.x, resteasy

如何在 JBoss 7.1.1 为 RestEasy 设置 JSON 提供程序？

RestEasy 文档说：

> RESTEasy 允许您将带有 JAXB 注释的 POJO 编组到 JSON 或从 JSON 编组。此提供程序包装了 Jettison JSON 库来完成此操作。

但我发现似乎在 JBoss 7.1.1 上 Resteasy 使用 Jackson 提供程序，因为我的类字段上的 @XmlTransient 被忽略了，但 @JsonIgnore 被处理了。

我如何告诉 Resteasy 使用 Jettison 而不是 Jackson？

在 Jboss 上，我找到了这两个提供商。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T17:09:04.800

如果您只想拉取与标准不同的模块，您可以在 jboss 特定的部署描述符中提供它。

阅读[https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7)了解详情，阅读[https://docs.jboss.org/author/display/AS7/Implicit+module +dependencies+for+deployments](https://docs.jboss.org/author/display/AS7/Implicit+module+dependencies+for+deployments)了解 JBoss 默认使用的模块。

要交换这两个提供程序，请提供`META-INF/jboss-deployment-structure.xml`以下内容。

这为我切换了提供商。

亚历山大兄弟。

```
<jboss-deployment-structure>
  <deployment>
    <exclusions>
      <module name="org.jboss.resteasy.resteasy-jackson-provider" />
    </exclusions>
    <dependencies>
      <module name="org.jboss.resteasy.resteasy-jettison-provider" />
    </dependencies>
  </deployment>
</jboss-deployment-structure> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:46:33.770

**作为ahus1**回答的后续：如果您有一个多级部署档案（即包含 EJB jar 和 war 文件的顶级 EAR 文件），您将需要在任何子`org.jboss.resteasy.resteasy-jackson-provider`上配置排除部署包含 RESTEasy/JAX-RS 组件。

例如，在我的部署中，我的 REST 端点在我的 EJB jar 文件中的 EJB 之上进行了注释，而激活 RESTEasy 的`@ApplicationPath`-annotated子类在我的 war 文件中。`javax.ws.rs.core.Application`我发现仅将排除项放在顶级 (EAR) 部署（如 ahus1 的示例中）或 EJB-jar 级别部署的方法是无效的，但我最终让 RESTEasy 使用 Jettison 而不是 Jackson 将所有 3 个级别（EAR、EJB、Web）的排除项：

```
<?xml version="1.0" encoding="UTF-8" ?>
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.2">
    <deployment>
        <exclusions>
            <module name="org.jboss.resteasy.resteasy-jackson-provider" />
        </exclusions>
        <dependencies>
            <module name="org.jboss.resteasy.resteasy-jettison-provider" />
        </dependencies>
    </deployment>
    <sub-deployment name="MyApp-ejb.jar">
        <exclusions>
            <module name="org.jboss.resteasy.resteasy-jackson-provider" />
        </exclusions>
        <dependencies>
            <module name="org.jboss.resteasy.resteasy-jettison-provider" />
        </dependencies>
    </sub-deployment>
    <sub-deployment name="MyApp.war">
        <exclusions>
            <module name="org.jboss.resteasy.resteasy-jackson-provider" />
        </exclusions>
        <dependencies>
            <module name="org.jboss.resteasy.resteasy-jettison-provider" />
        </dependencies>
    </sub-deployment>
</jboss-deployment-structure> 
```

很可能我只需要子部署上的排除项，而将其放在主 EAR 部署中是多余的；我没有那样尝试，因为现在把它放在所有三个上似乎效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T10:34:06.037

从我现在观察到的，Jackson 是 JBoss AS 7.1.2 中的默认设置。

**首先**，RestEasy 模块从应用程序的类加载器中隐藏，IMO 不应该这样做。所以我刚刚提交了[https://issues.jboss.org/browse/AS7-5605](https://issues.jboss.org/browse/AS7-5605)。

**其次**，对于您的问题：要设置特定的提供者，您需要将其从 AS 中的类加载器的位置中删除 - 再次，去`module.xml`注释掉那些您不想使用的提供者 - 如果 Jackson 可用，RestEasy使用它；否则它使用 Jettison。

此外，将它们添加为您的项目作为编译时依赖项，以便您可以使用它们的特定注释。例子：

```
 <!-- RestEasy -->
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>jaxrs-api</artifactId>
        <version>2.3.4.Final</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-asl</artifactId>
        <version>1.9.2</version>
        <scope>provided</scope>
    </dependency> 
```

注意：在完成 AS7-5605 之前，您需要手动设置版本。之后（在更高版本的 AS 中），您必须删除这些版本并使用 JBoss BOM 中定义的版本。例如，参见[JBoss AS QuckStarts](https://github.com/jboss-jdf/jboss-as-quickstart#readme)。

随意使用替代提供者[创建和贡献](http://www.jboss.org/jdf/about/contributing/)RestEasy 的快速入门。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-16T13:55:26.927

我将此行添加到standalone.conf.bat/sh，它解决了我的问题。

设置“JAVA_OPTS=%JAVA_OPTS%-Dcom.sun.jersey.server.impl.cdi.lookupExtensionInBeanManager=true”

# ios - iOS 视频播放

> ID：11831120
> 
> 赞同：2
> 
> 时间：2012-08-06T15:19:22.633
> 
> 标签：ios, performance, ipad, video, opengl-es

在我的应用程序中，我应该以不寻常的方式播放视频。诸如用于特殊目的的交互式播放器之类的东西。

这里的主要问题：

*   视频分辨率可以从 200*200px 到 1024*1024 px
*   我应该能够将速度从 -60 FPS 更改为 60 PFS（在这种情况下，视频应该根据所选速度播放得更慢或更快，负数意味着视频应该向后播放）
*   我应该在视频上画线和对象并用图像缩放它。
*   如果内容超过屏幕尺寸，我应该有能力缩放图像并平移它
*   我应该有能力改变这个视频的亮度、对比度和反转颜色

现在我在做下一件事：

*   我将视频拆分为 JPG 帧
*   每秒创建 N 次计时器（播放速度控制）
*   每个计时器滴答我用 OpenGL 绘制新纹理（下一个 JPG 帧）
*   使用 OpenGL ES 转换（平移、缩放）进行缩放和平移

在我使用 320*240 像素之前，一切看起来都很好，但如果我使用 512*512 像素，我的播放率就会下降。也许是计时器行为问题，也许是 OpenGL。有时，如果我试图以高播放率（超过 10-15 FPS）打开大纹理，应用程序会因内存警告而崩溃。

解决此问题的最佳做法是什么？我应该挖什么方向？也许 cocos2d 或其他游戏引擎对我有帮助？Mb JPG 不是纹理的最佳解决方案，我应该使用 PNG 或 PVR 还是其他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:57:41.370

将视频数据保留为视频并用于`AVAssetReader`获取原始帧。用作色彩空间，并在GLES`kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange`中进行 YUV->RGB 色彩空间转换。这将意味着在内存中保留更少的数据，并使您的大部分图像处理更加简单（因为您将使用亮度和色度数据而不是 RGB 值）。

您无需为此烦恼 Cocos 2d 或任何游戏引擎。我强烈建议对 OpenGL ES 2.0 和着色器进行一些试验。将 OpenGL 用于视频非常简单直接，将游戏引擎添加到混合中是不必要的开销和抽象。

当您将图像数据上传到纹理时，不要每帧都创建一个新纹理。相反，创建两个纹理：一个用于亮度数据，一个用于色度数据，并简单地在每一帧重复使用这些纹理。我怀疑您的内存问题是由于每帧使用许多图像和新纹理而可能没有删除旧纹理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:20:44.013

JPEG 帧的解压缩成本非常高。第一步：使用PNG。

可是等等！还有更多。

Cocos2D 可以通过它对[精灵表的强大支持来](http://www.raywenderlich.com/2361/how-to-create-and-optimize-sprite-sheets-in-cocos2d-with-texture-packer-and-pixel-formats)帮助你。

然而，最大的帮助可能来自于[TexturePacker](http://www.codeandweb.com/texturepacker/)的打包纹理。使用 PVR.CCZ 压缩可以以惊人的速度加快速度，足以让您在更大的视频尺寸下获得更好的帧速率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T03:58:25.593

弗拉德，简短的回答是，您可能永远无法同时使用列出的所有这些功能。以 60 FPS 播放视频 1024 x 1024 视频真的会很费力，我非常怀疑 iOS 硬件是否能够跟上 60 FPS 的数据传输速率。即使是设备上的 h.264 硬件，在 1080p 下也只能做到 30FPS。这可能是可能的，但是然后在视频上分层图形渲染并期望能够同时编辑亮度/对比度，同时做的事情太多了。

您应该专注于实际可能的事情，而不是尝试完成所有功能。如果您想查看将 iPad 硬件推向极限的示例 Xcode 应用程序，请查看我的[Fireworks](http://www.modejong.com/AVAnimator/examples.html#Fireworks)示例项目。此代码同时在屏幕上显示多个已解码的 h.264 视频。该实现是围绕 CoreGraphics API 构建的，但关键是由于零复制优化，Apple 将纹理上传到 OpenGL 的 impl 非常快。使用这种方法，可以将大量视频流式传输到设备。

# c - 结构和字符串的问题

> ID：11831122
> 
> 赞同：0
> 
> 时间：2012-08-06T15:19:51.603
> 
> 标签：c

这是我的代码：

```
typedef struct{
  char name[64];
} Cat;

Cat createCat(char name[64]) {
  Cat newCat;

  newCat.name = name;

  return newCat;
} 
```

它编译时出现以下错误消息：

> 从类型'char *'分配给类型'char [64]'时不兼容的类型

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T15:23:46.863

数组在传递给函数时衰减为指针。所以：

```
Cat createCat(char name[64]) { 
```

是相同的：

```
Cat createCat(char* name) { 
```

和行：

```
newCat.name = name; 
```

正试图将 a 分配`char*`给 a `char[]`，因为错误状态。正如[Mystical](https://stackoverflow.com/users/922184/mysticial)已经评论的那样，您需要使用[`memcpy()`](http://en.cppreference.com/w/c/string/byte/memcpy)or [`strcpy()`](http://en.cppreference.com/w/c/string/byte/strcpy)(or [`strncpy()`](http://en.cppreference.com/w/c/string/byte/strncpy)) 复制`name`到`newCat.name`. 如果你使用`memcpy()`你*必须*记住 null terminate `newCat.name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:26:46.530

哎呀。您正在从函数返回一个自动（基于堆栈的）变量。当堆栈帧被弹出并且内存消失时，这将可怕地消失。您需要动态分配`Cat`结构并将`name`数据复制到其中。`free()`当你完成记忆时， 别忘了打电话。

```
Cat *createCat(char name[64])
{
Cat *tmpCat;
tmpCat=malloc(sizeof(Cat));
strncpy(Cat.name,name,64); // <- or 63 to make sure name is NULL-terminated
return tmpCat;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:38:14.883

您的代码有两个错误。首先是您在堆栈上分配内存。每当您声明这样的变量时：

```
int hello = 5;
char test;
Cat newCat; 
```

您正在堆栈上分配内存。一旦函数返回，该内存就会被释放。为了使某些东西更永久，您需要使用 malloc 函数在堆中手动分配内存。此内存将保持有效，直到您稍后通过调用释放它`free()`。另外，你需要用来`strncpy()`复制字符串，不能简单地复制指针。

```
Cat* createCat(char* name)
{
     Cat* newCat = malloc(sizeof(Cat));
     if(!newCat)
     {
            printf("Error allocating memory for cat\n");
            exit(-1);
     }
     //copy in the string, leave a null terminator on the string
     strncpy(newCat.name, name, 63);
     newCat.name[63] = '\0'; 
     return newCat;
} 
```

# android - API 级别 > 3.0 但仍支持 API < 3.0 的操作栏

> ID：11831124
> 
> 赞同：1
> 
> 时间：2012-08-06T15:19:59.297
> 
> 标签：android, android-fragments, android-actionbar, android-maps, android-compatibility

还有一个兼容性问题。

**问题**

我需要使用`tabbed action bar`api 级别 3.0 及更高版本在`fragments`. 但是，我还需要能够`fragments`在 api 级别 < 3.0 中以某种方式在这些之间切换。

工作中的扳手是我已经下载了一个允许我使用的自定义兼容性库，`google maps`因此`fragments`我不能使用库。

**问题**

如何`ActionBar`在 3.0 及更高版本中实施选项卡式解决方案，同时满足 3.0 及更低版本的更大市场？

任何帮助都会很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:24:24.053

你想要的是[ActionBarSherlock](http://actionbarsherlock.com/)。它使用 API >= 3 的本机操作栏，并为 API 级别 2.x 提供向后兼容性。还有 Action Bar Compatibility 示例项目（我相信列为 SupportAppNavigation）。我认为这本质上是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:46:58.587

所以我不久前设法想出了一个解决方案，我花了一段时间才把它贴在这里。

这是对我有用的解决方案。我需要使用 ActionBar，但我还需要使用 MapActivity 和 FragmentActivity，因此无法使用 ActionBarSherlock。

我所做的是以下内容：

*   创建了一个名为 CCActionBar 的片段，它通过将自身添加为侦听器来处理 CCTab 的触摸（解释如下）。它还扩展了一个名为 action barlayout 的布局，其中排列了选项卡和图像，只需在运行时引用选项卡。

*   创建了一个名为 CCTab 的自定义视图，它表示操作栏的选项卡。当它被触摸时，它告诉它的侦听器（CCActionBar）它被触摸了。

*   在我的主布局 xml 文件中有一个操作栏容器，我根据 API 级别在运行时显示或隐藏它。

*   现在，在我的 OnCreate 方法的主要活动中，我检查我的 API 级别是否大于 3.0。如果是我只是实现标准的 ActionBar 确保我的自定义操作栏容器是不可见的。如果不是，我设置我的自定义操作栏并确保我的 xml 布局中的操作栏容器可见。

    *   然后我确保在使用任一方法时按下选项卡时，它的处理方式相同，因此一旦设置好，您就不必以任何不同的方式处理它。

我希望这可以帮助某个地方的人，或者至少让您知道如何进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:35:04.590

我建议使用[ActionBarSherlock](http://actionbarsherlock.com/)来获得选项卡式操作栏功能。

我假设您还需要`MapView`. `Fragment`为此，我会推荐[MapView in a Fragment (Honeycomb) 的](https://stackoverflow.com/questions/5109336/mapview-in-a-fragment-honeycomb)解决方案 （查看带有示例代码的 user1414726 答案）。

我认为这是一个比使用库更好的解决方案，尽管它正在使用 deprecated `LocalActivityManger`。但在我看来，这比使用每个都是我假设您正在使用 `Activity`的子类的库更好。`MapViewActivity`

# sql-server - 如何从 SQL Server 表中读取 XMLColumn 的值

> ID：11831127
> 
> 赞同：0
> 
> 时间：2012-08-06T15:20:11.727
> 
> 标签：sql-server, xml, xquery, xquery-sql

我是 SQL Server 中的 xquery 新手。这是**ReponseRecord表中****ErrorXml**列中的值。这就是 ErrorXML 列的示例数据。

 ****第 1 行：**

```
<Data>
  <Error PropertyName="CaseDisplayID">
    <ErrorMessage Type="Database">Claim is not in awaiting reprice response state. Current case state is ** Closed (Cancelled) **</ErrorMessage>
  </Error>
</Data> 
```

**第 2 行：**

```
<Data><Error PropertyName="CaseDisplayID" /></Data> 
```

**第 3 行：**

```
<Data /> 
```

如果该属性存在，我想在这里读取**Error的值。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:36:11.347

使用[.value](http://msdn.microsoft.com/en-us/library/ms178030)从您的 XML 中获取特定值，并使用[.exist](http://msdn.microsoft.com/en-us/library/ms189869)`/Data/Error`检查节点是否存在。

```
select T.ErrorXML.value('(/Data/Error/@PropertyName)[1]', 'nvarchar(50)') as PropertyName,
       T.ErrorXML.value('(/Data/Error/ErrorMessage/@Type)[1]', 'nvarchar(50)') as ErrorType,
       T.ErrorXML.value('(/Data/Error/ErrorMessage)[1]', 'nvarchar(max)') as ErrorMessage
from ReponseRecord as T
where T.ErrorXML.exist('/Data/Error') = 1 
```

结果：

```
PropertyName    ErrorType       ErrorMessage
--------------- --------------- ----------------------------------------------------------------------------------------------------
CaseDisplayID   Database        Claim is not in awaiting reprice response state. Current case state is ** Closed (Cancelled) **
CaseDisplayID   NULL            NULL 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/76598)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:25:39.523

看看这是否有帮助

• 检查 XML 文档中是否存在某个 XML 节点：

```
SELECT xmlColumn.exist('declare namespace x="1"; (/x:ParentNode/x:ChildNode)') AS test
FROM dbo.Table
WHERE Column1=22 
```

• 查询 XML 数据：

```
SELECT xmlColumn.query('declare namespace x="1"; (/x:ParentNode/x:ChildNode)') AS test
FROM dbo.Table
WHERE Column1=22 
```

我认为在您的情况下您不需要命名空间，在这种情况下只需删除它们

```
SELECT xmlColumn.exist('/ParentNode/ChildNode') AS test
FROM dbo.Table
WHERE Column1=22 
```

对不起，我没有任何删除的例子，但它是相同的方法，你可以在这里检查，而不是“查询”或“存在”只使用删除。您可以在此处查看更多信息 [http://msdn.microsoft.com/en-us/library/ms190254.aspx](http://msdn.microsoft.com/en-us/library/ms190254.aspx)

干杯**

# .net - 使用 vb.net 比较 tiff 和 pdf 文件

> ID：11831134
> 
> 赞同：1
> 
> 时间：2012-08-06T15:20:48.920
> 
> 标签：.net, vb.net, pdf, tiff

我正在寻找 VB、.Net 环境下的示例代码或第三方工具，它可以比较 tiff 和 pdf 文件（视觉比较）并返回 true 或 false。

我的要求是将 tiff 文件转换为我使用 iTextSharp 所做的 pdf，但我现在需要证明转换后，使用 vb.net 程序没有任何改变（为什么？我不知道，但我需要向他们提供这样的服务）。

让我知道你们是否知道任何这样的工具，我正在搜索，但我得到的只是将一种格式转换为另一种格式或比较相同格式文件的工具

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T22:20:05.897

ImageMagick 的`compare`命令可以很容易地做到这一点。

```
 compare file.tif file.pdf -compose src delta.pdf 
```

或者，假设多页 TIFF 和多页 PDF，逐页比较：

```
 compare file.tif[0] file.pdf[0] -compose src delta_page1.pdf
 compare file.tif[1] file.pdf[1] -compose src delta_page2.pdf
 compare file.tif[2] file.pdf[2] -compose src delta_page3.pdf
 [....] 
```

（ImageMagick 的页面/图像索引从 [0] 开始，而不是 [1]！）。

**了解 delta.pdf：**

1.  如果没有视觉差异，生成的 delta.pdf 将是完全白色的。
2.  不同的像素将是红色的。
3.  生成的文件将使用默认的 72dpi 分辨率，这往往不会发现非常小的像素差异。

您甚至可以像这样简化命令：

```
 compare file.tif file.pdf delta.pdf 
```

生成的 delta.pdf 将命令行中的第一个文件（作为上下文）显示为浅灰色背景图像，并将差异覆盖为红色像素。当然，理论上你也可以颠倒每个命令的顺序：

```
 compare file.pdf file.tif delta.pdf 
```

但是，您应该知道，现实中出现的 PDF“白色”背景通常是透明的，而 TIFF 是真正的白色。这将导致出现很多像素差异。最好坚持我首先命名的顺序:-)

**注意 1：**所有这些比较都假设（当然）相同的页面图像尺寸和纵横比。（否则，您可能需要先缩放两个页面图像之一。）

**注意 2：**您几乎*总是*会发现细微的像素差异，具体取决于您的整体处理链。这完全取决于您想通过这种比较发现什么样的错误。有很多方法可以微调这个......

**注意 3：**如果这种方法原则上适用于您，您可以修改输出格式：您不需要真正使用“红色像素图像”中的视觉差异。您可以改为计算唯一的白色（相等）和红色（不同）像素，然后根据红色与白色的百分比来决定这是“好”还是“坏”，最后返回“真”或“假” ' 因此（显示 2 个 PDF 而不是 1/1 PDF/TIFF 的示例命令）：

*示例命令：*

```
compare \
   http://qtrac.eu/boson1.pdf[1] http://qtrac.eu/boson2.pdf[1] -compose src \
  -define histogram:unique-colors=true \
  -format %c \
   histogram:info:- 
```

*样本输出：*

```
 56934: (61937,    0, 7710,52428) #F1F100001E1ECCCC srgba(241,0,30,0.8)
444056: (65535,65535,65535,52428) #FFFFFFFFFFFFCCCC srgba(255,255,255,0.8) 
```

该输出非常适合自动单元测试。您可以评估这两个数字，轻松计算“红色像素”与“白色像素”的比率，然后根据某个阈值决定返回*PASSED*或*FAILED*（如果您不严格需要“零红色”像素）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T15:24:48.670

您可以尝试从 PDF 中重新提取 tiff，并将此图像的原始数据与原始 tiff 文件的原始数据进行比较。

由于 PDF 格式支持嵌入 TIFF 文件，您的客户可能只是想确保您没有将图像重新压缩为其他格式并且在此过程中存在一些质量损失。这是一个合理的担忧。

从图像文件中获取原始数据：

由于您使用的是 iText，因此对于 1 页 tiff 文件，您可以使用`Image.rawData()`. 您可以使用[TiffImage.getTiffImage](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/codec/TiffImage.html#getTiffImage)`Image`方法从 TIFF 文件创建此类的实例

从您的 PDF 文件中获取原始数据：

您可以按照[这里](https://stackoverflow.com/a/832510/501196)解释的过程，然后您可以使用方法[PdfReader.GetStreamBytes获取原始数据](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfReader.html#getStreamBytes(com.itextpdf.text.pdf.PRStream))

您可以逐字节比较流，也可以在创建 PDF 时将它们保存到文件中，以便稍后使用命令行工具进行比较，或者您可以计算 MD5 哈希值并改用它。

我没有测试过这种方法，但我相信它会起作用，因为不涉及 TIFF 元数据。

# jersey - 泽西客户端 java.util.List 自动转换器

> ID：11831143
> 
> 赞同：1
> 
> 时间：2012-08-06T15:21:17.300
> 
> 标签：jersey

我有这样的资源：

```
@GET
@Path("/todos") 
@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
public List<Cliente> getListagem() { 
```

我的球衣客户是：

```
ClientResponse response1 = wr.accept(MediaType.APPLICATION_XML).get(ClientResponse.class);
List<Cliente> colecao = response1.getEntity(List.class); 
```

生成错误 **Grave：找不到 Java 类 java.util.List 和 Java 类型接口 java.util.List 和 MIME 媒体类型 application/xml 的消息正文阅读器**

我想知道为什么球衣变成了 XML 中的 List 而客户端不能自动转换呢？解决此问题的最佳方法是什么？问候..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T18:16:41.610

在服务器上试试这个：

```
public JResponse<List<Cliente>> getListagem() {
  List<Cliente> response = ......;
  return JResponse.ok(response).build();
} 
```

这在客户端：

```
Client client = Client.create();
WebResource resource = client.resource("http://localhost:8080/service");
List<Cliente> colecao = resource.accept(MediaType.APPLICATION_XML).get( new GenericType<List<Cliente>>() {} ); 
```

# zeromq - 在pypy下安装zeromq

> ID：11831145
> 
> 赞同：6
> 
> 时间：2012-08-06T15:21:25.893
> 
> 标签：zeromq, pypy

我已经在 CPython 下安装了 zeromq。我怎样才能安装它，它也在pypy下运行？

www.zeromq.org/

问题是 zeromq 需要 Cython。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T20:51:34.357

要使用 pypy，您需要使用基于 ctypes 的绑定，例如[pyzmq-ctypes](https://github.com/svpcom/pyzmq-ctypes)或[zmqpy](https://github.com/felipecruz/zmqpy)。

**2013 更新：** pyzmq 现在可以与 pypy 一起使用，因此您可以只`pip install pyzmq`使用 pypy。

# android - 将屏幕方向固定为纵向

> ID：11831148
> 
> 赞同：1
> 
> 时间：2012-08-06T15:21:32.837
> 
> 标签：android, android-manifest, screen-orientation

我知道这听起来像是一千次回答的问题，但我真的很困惑，因为这应该很容易，以至于我不明白发生了什么。

我希望我的一项活动仅以纵向模式显示。我想，好吧，只需在 AndroidManifest.xml 中编写如下内容：

```
<activity android:name="Control" android:screenOrientation="nosensor">
    </activity> 
```

就这样。

但是应用程序忽略了它。当我转动设备时，它会切换到横向。我正在使用 ActionBarSherlock、Fragments 和 ViewPager。

如何修复 Activity 的方向？非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:26:19.663

我们这样修复

```
<activity android:name=".Control" android:screenOrientation="portrait">
   </activity> 
```

你的活动名称必须是

```
 android:name=".Control" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T17:28:54.833

好的，这是我的另一个典型的逻辑错误。

如果您有一个带有 ViewPager 的 Fragment，其中包含另外三个 Fragment，那么您尝试更改任何嵌入式 Fragment 的行为都没有关系，因为从逻辑上讲它不起作用。如果您在主 Fragment 上将 screenOrientation 设置为纵向，并且 ViewPager 包含另一个，那么现在是的，您将阻止应用程序更改方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:23:27.627

你试过`android:screenOrientation="portrait"`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:24:08.640

添加`android:screenOrientation="portrait"`您的清单。

# sql - 有限树与实例的关系映射

> ID：11831149
> 
> 赞同：2
> 
> 时间：2012-08-06T15:21:38.640
> 
> 标签：sql, oracle, oracle10g, data-modeling, hierarchical-data

我必须在关系数据库中表示以下结构。有五个层次结构级别：*A*、*B*、*C*、*D*。层级之间的关系总是一对多的，所以*A*有很多*B*，但是每个*B*都属于某个*A*。这同样适用于*B*，*C*，*D*，*E*。到目前为止， *B*有*A*作为外键，*C*有*B*作为外键，依此类推。

```
A          1
         / |
B       1  2
      / |  |
C    1  2  3 
    /|  |  |
D  1 2  3  4 
```

事情变得复杂的地方是我必须从*B*向下表示实例。对于某个*B*，我可以有许多不同的实例。所有实例都有不同的数据，但下面的树结构相同。

假设我有`MyB`instance`fo`和 instance `ba`。现在`fo`并且`ba`必须有相同数量的孩子，他们的孩子也必须有相同数量的孩子。在一种情况下，子树将具有某些值，而在另一种情况下，子树将具有不同的值，但子树具有相同的结构。

因为可以有很多*B*，所以可以有很多子树结构，但是树的深度总是限制为四个。

```
A          1
         / |  \
B       1  2fo 2ba 
      / |   |   |
C    1  2   3   4 
    /|  |   |\  |\
D  1 2  3   4 5 6 7 
```

如果`2fo`有一个孩子和两个孙子`2ba`也必须有一个孩子和两个孙子。

**如何在关系数据库中干净地映射此结构？**

**编辑**

比评论中更详细地回答[X-Zeros 问题。](https://stackoverflow.com/questions/11831149/relational-mapping-of-finite-tree-with-instances#comment15730341_11831149)如果有人将一个节点添加到 C2，然后再添加到 C3，则结果必须如下所示：

```
A          1--------
         / |       |
B       1  2fo    2ba 
      / |   |      |
C    1  2   3----  4----
    /|  |   |\  |  |\  |
D  1 2  3   4 5 9  6 7 10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T00:43:29.167

层次结构将通过 parentId 在表中表示。ParentId 是自引用外键。

您可以编写递归查询来选择级别 B。

级别 2 将有多个节点，在您的示例中，您将每个节点中的节点枚举为 (1,2,4,etc )。在真实的数据库示例中，您将知道 nodeId。即：表可以像 table_ABCDE ( nodeId, letterRep, parentId )

如何表示 B 级下的实例：创建另一个表以保持实例的根从概念。创建表实例（ id ， instance_from_node ， name ）即： (444, B2, 2fo ) instance_from_node 是 table_ABCDE nodeId 的外键

算法如何添加一个新实例： 0- 在主树（table_ABCDE）中标记 B2 作为模板。

1-检查给定节点的表实例表，即：2fo；如果 2fo 不在实例表中，首先添加 2fo (444, B2, 2fo )，然后添加 2ba (445, B2, 2Ba )

2- 将所有新节点插入 table_ABCDE。所有新节点均指节点 2fo 和下面的所有节点。

如果有任何添加/删除，请找到 B 级父级，并将相同的更改应用于该级别的所有实例。要查找 B 级父级，还可以使用实例表来查看 2fo 和 2ba 都从 B2 驱动。

如果你从 2fo 创建一个实例，你需要检查实例表，你会看到 2fo 是 B2 的实例，你实际上是从 B2 创建一个实例。您还将将该实例作为 B2 的实例输入。

# jquery - 似乎无法让 Prettyphoto 工作

> ID：11831151
> 
> 赞同：1
> 
> 时间：2012-08-06T15:21:47.950
> 
> 标签：jquery, html, prettyphoto

现在已经尝试了几个小时，似乎无法找到问题所在。 [http://sabinequardon.dk/poooort/index.html](http://sabinequardon.dk/poooort/index.html)

我已经确保它链接到正确的文件等，但它只是没有在 prettyphoto 中打开。这是概率 一个非常简单的问题，也许是我已经主演了太久了:-(

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:24:21.037

你永远不会调用 prettyPhoto...

```
$(document).ready(function(){
  $("a[rel^='prettyPhoto']").prettyPhoto();
}); 
```

您首先要加载 jQuery 两次。而且这种开销是不必要的。其次，您需要将除我上面放置的脚本之外的所有脚本移动到该区域中。

```
...
<head>
  <script src="assets/js/jquery-1.6.1.min.js" type="text/javascript"></script> 
  <script src="assets/js/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script>
  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script src="assets/js/jquery.quicksand.js"></script>
  <script src="assets/js/script.js"></script>
</head>

<body>
  ...
  <!---end of the body-->
  <script type="text/javascript">
  $(document).ready(function(){
$("a[rel^='prettyPhoto']").prettyPhoto();
  });
  </script>
</body> 
```

# eclipse - 让 Eclipse 默认在文本编辑器中打开 .html？

> ID：11831153
> 
> 赞同：30
> 
> 时间：2012-08-06T15:22:12.707
> 
> 标签：eclipse, django-templates, html-editor, eclipse-juno, default-parameters

Eclipse Juno 一直在嵌入式 Web 浏览器中打开我的 HTML 文件，而不是在嵌入式语法高亮编辑器中。

我已经安装了：

*   网页编辑器
*   Eclipse Web 开发人员工具
*   Eclipse 的 PyDev

具体看我的安装应用[截图](http://i.imgur.com/3poGp.png)。

我需要它来处理 Django 模板 + 任何其他带有 HTML + 普通 HTML + JS 文件的 Python 模板。

**我如何找到这个编辑器，并选择它作为默认值？**

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-06T15:49:17.563

从 Eclipse 主菜单中选择 Window -> Preferences。

从首选项菜单中选择常规 -> 编辑器 -> 文件关联。

![在此处输入图像描述](../Images/50d64ae78d72b0030c10ba092f0e9d85.png)

对于 .htm 和 .html，左键单击上方视图中的扩展名。左键单击下方视图右侧的添加按钮以添加一个或多个 HTML 编辑器。左键单击您最喜欢的 HTML 编辑器，然后左键单击默认按钮，使其成为默认编辑器。

如果缺少所需的扩展名，请左键单击上视图右侧的添加按钮以添加扩展名。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-24T18:44:14.167

如果要向**Eclipse 添加 HTML 编辑器**：

1.  转到帮助 -> 安装新软件
2.  选择站点`http://download.eclipse.org/releases/your_eclipse_version`
3.  输入过滤器文本`Web Page Editor`
4.  应该有一个结果。选中该框，然后按完成按钮。

![安装网页编辑器](../Images/829ef10cbe09d698630761f6e6af1cc0.png)

现在，您应该可以在通过右键单击打开文件时选择 HTML 编辑器，打开方式 -> HTML 编辑器。

如果您想**始终使用 HTML 编辑器**打开 HTML 文件，请转到 Eclipse 首选项 -> 常规 -> 编辑器 -> 文件关联。选择顶部的扩展名（例如 *.htm、*.html），然后在底部窗格中选择 HTML 编辑器并按下`Default`按钮。

![将 HTML 编辑器设为默认值](../Images/c632a176e43a0004ccd9d5d8328938ce.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T20:12:37.663

我有一个类似的问题。一旦我安装了 html 编辑器（感谢 CgodLEY），我的 html 文件仍然不会显示在那个编辑器中。解决方案？**右键单击**html/htm 文件，转到“**打开方式**”并选择“ **HTML 编辑器**”。幸运的是，解决了一切......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-12T15:15:10.707

对于那些仍然在这里找到自己的方式的人，是的，如果您遇到此问题，请按照 CgodLEY 的建议将 HTML 编辑器添加到 Eclipse。但是，即使您的 Eclipse 安装中已经有 HTML 编辑器，也请考虑安装[CodeMix](https://www.genuitec.com/box/products/codemix/)以获得最高级的 HTML 编辑体验 - 看看[这里](https://www.genuitec.com/tech/html5-with-codemix/)的区别。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-13T15:40:33.240

Now, there's a Django-aware template editor available for free:

[http://eclipse.kacprzak.org/](http://eclipse.kacprzak.org/)

I installed it in Eclipse Kepler / Django 1.6, it's working fine for me.

Note: if you previously opened a specific .HTML file with some other editor, you need to go back to the project view, right click on the .HTML file, select 'open with...' and explicitly select Django editor.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-18T16:33:14.917

*要回答您的问题的开头：请注意，如果您在项目之外*打开 html 文件，Eclipse 将使用内置的网络浏览器来查看它们，如“文件->打开文件...”，当该文件不是项目的一部分。

我刚刚创建了一个虚拟项目，现在可以使用在我的首选项中选择的编辑器正确打开 html 文件。成功！

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-08-25T16:48:18.587

没有任何效果，我开始在启动时遇到一个不相关的错误，需要重新安装故障排除步骤。

这次我下载[了 Eclipse for Mobile Developers](http://www.eclipse.org/downloads/packages/eclipse-mobile-developers/junor)，从那以后我添加了我的其他包，一切正常 =)。

虽然没有一个编辑器按照我希望的方式工作，但是我最终使用了[Django-Editor](http://eclipse.kacprzak.org/)（它比 Aptana 的稍微好一点）。

# java - 安卓图片大小调整

> ID：11831154
> 
> 赞同：2
> 
> 时间：2012-08-06T15:22:15.600
> 
> 标签：java, android

我将图像存储在 sd 卡上（每个大小约为 4MB）。

我想调整每个的大小，而不是将其设置为 ImageView。

但我不能这样做，因为出现了`BitmapFactory.decodeFile(path)`异常
`java.lang.OutOfMemoryError`。

如何在不将图像加载到内存的情况下调整图像大小。这是真的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:26:27.760

使用位图选项：

```
final BitmapFactory.Options options = new BitmapFactory.Options();
options.inPreferredConfig = Bitmap.Config.RGB_565; //Use this if you dont require Alpha channel
options.inSampleSize = 4; // The higher, the smaller the image size and resolution read in 
```

然后在解码中设置选项

```
BitmapFactory.decodeFile(path, options) 
```

[这是一个很好的阅读链接，关于如何有效地显示位图。](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

您甚至可以编写这样的方法来获得所需分辨率的大小图像。

以下方法检查图像大小，然后从文件中解码，使用样本内大小相应地从 sdcard 调整图像大小，同时保持较低的内存使用率。

```
 public static Bitmap decodeSampledBitmapFromFile(string path,
        int reqWidth, int reqHeight) { // BEST QUALITY MATCH

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(path, options);

    // Calculate inSampleSize
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        options.inPreferredConfig = Bitmap.Config.RGB_565;
        int inSampleSize = 1;

        if (height > reqHeight) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        }

        int expectedWidth = width / inSampleSize;

        if (expectedWidth > reqWidth) {
            //if(Math.round((float)width / (float)reqWidth) > inSampleSize) // If bigger SampSize..
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }

    options.inSampleSize = inSampleSize;

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;

        return BitmapFactory.decodeFile(path, options);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:32:27.023

您必须`Bitmap`在使用之前对其进行扩展，这样可以减少内存消耗。

看看[这个](https://stackoverflow.com/q/11785179/828728)，它可能对你有帮助。

而且，如果你不再需要他，请确保你`recycle`这样做。`Bitmap`

# haskell - Control.Parallel.Strategies 中 Eval 的绑定运算符如何严格评估其参数？

> ID：11831156
> 
> 赞同：2
> 
> 时间：2012-08-06T15:22:26.547
> 
> 标签：haskell, strictness

Control.Parallel.Strategies 的源代码 ( [http://hackage.haskell.org/packages/archive/parallel/3.1.0.1/doc/html/src/Control-Parallel-Strategies.html#Eval](http://hackage.haskell.org/packages/archive/parallel/3.1.0.1/doc/html/src/Control-Parallel-Strategies.html#Eval) ) 包含一个类型 Eval定义为：

```
data Eval a = Done a 
```

它具有以下 Monad 实例：

```
instance Monad Eval where
  return x = Done x
  Done x >>= k = k x   -- Note: pattern 'Done x' makes '>>=' strict 
```

注意绑定定义中的注释。为什么这个评论是真的？我对严格性的理解是，一个函数只有在它必须“了解”它的参数时才是严格的。在这里，bind 只是将 k 应用于 x，因此（对我而言）似乎不需要了解有关 x 的任何信息。此外，评论表明在模式匹配中“诱导”了严格性，甚至在定义函数之前。有人可以帮我理解*为什么*绑定是严格的吗？

此外，看起来 Eval 只是身份 Monad，并且鉴于 bind 定义中的注释，对于几乎所有 Monad，bind 都是严格的。是这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T15:56:03.800

与 Identity Monad 不同的`m >> n`是，它是严格的：`m`

```
Prelude Control.Parallel.Strategies Control.Monad.Identity> runIdentity (undefined >> return "end") 
"end"
Prelude Control.Parallel.Strategies Control.Monad.Identity> runEval (undefined >> return "end") 
"*** Exception: Prelude.undefined 
```

产生的值并不严格`m`，w 这就是您所指出的：

```
Prelude Control.Parallel.Strategies Control.Monad.Identity> runEval (return undefined >> return "end") 
"end" 
```

# jquery - 在选择时更改输入字段的值

> ID：11831157
> 
> 赞同：1
> 
> 时间：2012-08-06T15:22:27.560
> 
> 标签：jquery, html, css

我正在使用 javascript 购物车创建这个在线商店。有些产品有选项，选项会改变商品的价格。一个项目的价格曾经是一个跨度，但我认为禁用的输入字段看起来更好。我的问题是我的代码没有改变输入字段的值，但是当价格写成 span 时它确实改变了它。

jQuery：

```
$(".item_lenght").change(function() {
        $('.item_price').html($('option:selected', this).data('price'));
    }); 
```

和html：

```
<table style="border:1px solid black; border-radius: 6px;">
    <tr>
        <td>
        <select class="item_lenght" name="size">
        <option value="Tyhjä">Valitse koko</option>
        <option data-price="47.00€" value="25cm"> 25cm x 150cm </option>
        <option data-price="48.00€" value="50cm"> 50cm x 150xm</option>
        <option data-price="49.00€" value="100cm"> 100cm x 150cm </option>
        </select>
        </td>
        <td>
        <select class="item_type" name="type">
        <option value="Ei valintaa">Valitse väri</option>
        <option data-name="Teipit (Harjattu Alumiini)" value="Harjattu Alumiini"> Harjattu Alumiini </option>
        <option data-name="Teipit (Musta hiilikuitu)" value="Musta hiilikuitu"> Musta hiilikuitu </option>
        <option data-name="Teipit (Valkoinen hiilikuitu)" value="Valkoinen hiilikuitu"> Valkoinen hiilikuitu </option>
        <option data-name="Teipit (Mattamusta)" value="Mattamusta"> Mattamusta </option>
        </select>
        </td>
    </tr>
    <tr>
        <td>Määrä:
        </td>
        <td>
        <input type="text" value="1" class="item_Quantity" style="width:30px;">
        </td>
    </tr>
    <tr>
        <td>Hinta
        </td>
        <td>
        <input type="text" readonly="readonly" class="item_price" value="0.00€">
        </td>
    </tr>
    </table>

        <a class="item_add" href="javascript:;"> Osta prkl </a> 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:24:16.630

用于`readonly="readonly"`输入而不是禁用它。

也`val()`用于文本字段而不是`text()`为`textfield`

**[现场演示](http://jsfiddle.net/rajaadil/gjbKY/)**

```
<input type="text" readonly="readonly" class="item_price" value="0.00€">

$(".item_lenght").change(function() {
    $('.item_price').val($('option:selected', this).data('price'));
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:25:52.100

使用[.val()](http://api.jquery.com/val/)修改并获取它的内容

```
$('.item_price').val($('option:selected', this).data('price')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:26:54.343

如果您使用 jQuery，则需要使用 DOM Ready。

```
$(document).ready(function(){
// JQuery goes inside here
}); 
```

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:27:54.403

从输入框中检索值和修改输入框时，您必须使用 jQuery [.val()](http://api.jquery.com/val/)函数而不是`.text()`or`.html()`函数。你的 jQuery 应该是这样的：

```
$('.item_price').val($('option:selected', this).data('price')); 
```

# php - 如何从 FOSUserBundle 覆盖 layout.html.twig

> ID：11831160
> 
> 赞同：1
> 
> 时间：2012-08-06T15:22:33.257
> 
> 标签：php, symfony, fosuserbundle

我知道这个问题在 FOSUserBundle 文档中得到了完美的回答，但我无法解决我的问题。

我正在尝试使用 FOSUserBundle 制作自己的登录页面。

我有一个`main.html.twig`与`login.html.twig`FOSUserBundle 源中包含的完全相同。

唯一的区别是 main.html.twig 在我自己的包结构中，而 login.html.twig 在 FOSUserBundle 文件夹结构中。

我达到了`/login`和`/main`。我解决了它们并开始渲染。

但是在访问时`/main`，我收到以下错误：

> Twig_Error_Runtime：第 5 行的“AcmeStoreBundle:Main:main.html.twig”中不存在变量“csrf_token”

FOSUserBundle 用户知道该代码，但无论如何我将其粘贴在这里：

```
<form action="{{ path("fos_user_security_check") }}" method="post">
<input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />

<label for="username">{{ 'security.login.username'|trans({}, 'FOSUserBundle') }}</label>
<input type="text" id="username" name="_username" value="" />

<label for="password">{{ 'security.login.password'|trans({}, 'FOSUserBundle') }}</label>
<input type="password" id="password" name="_password" />

<input type="checkbox" id="remember_me" name="_remember_me" value="on" />
<label for="remember_me">{{ 'security.login.remember_me'|trans({}, 'FOSUserBundle') }}</label>

<input type="submit" id="_submit" name="_submit" value="{{ 'security.login.submit'|trans({}, 'FOSUserBundle') }}" /> 
```

FOSUserBundle 外部无法识别变量“csrf_token”。或者我没有得到的其他东西。

那边有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:25:53.877

由于您没有使用`FormBuilder`，因此在您负责渲染的操作中，`main.html.twig`您应该生成此令牌并将其传递给视图。

```
$csrf = $this->get('form.csrf_provider'); //Symfony\Component\Form\Extension\Csrf\CsrfProvider\SessionCsrfProvider by default
$token = $csrf->generateCsrfToken($intention); //Intention should be empty string, if you did not define it in parameters 
```

您应该将变量`$token`作为`csrf_token`变量传递给您的视图

还要检查[我](https://stackoverflow.com/a/11632713/970721)对类似问题的回答

# objective-c - 使用 RestKit 进行 CoreData 搜索

> ID：11831166
> 
> 赞同：0
> 
> 时间：2012-08-06T15:22:52.990
> 
> 标签：objective-c, ios, search, core-data, restkit

我正在开发一个有两个模型的应用程序，在视图控制器中，我想进行搜索并从两个模型中查找与搜索关键字匹配的实例，并将它们列出在表格视图中。我还使用 RestKit 将对象存储在核心数据中。在我第一次进行本地搜索之后，我稍后还想用服务器结果更新搜索结果。

我目前的 - 可能是幼稚的 - 尝试看起来像这样：

```
- (void)search
{

    if (self.searchField.text !=nil) {
        NSPredicate *predicate =[NSPredicate predicateWithFormat:@"post contains[cd] %@", self.searchField.text];
        self.posts = [[Post findAllWithPredicate:predicate] mutableCopy];

        // reload the table view
        [self.tableView reloadData];

    }    

    [self hideKeyboard];

} 
```

这会导致错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'unimplemented SQL generation for predicate : (post CONTAINS[cd] "t")' 
```

tableView 的`cellForRowAtIndexPath`委托方法如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";

    CustomTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil) {
        cell = [[CustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

    Post *post = [self.posts objectAtIndex:indexPath.row];
    cell.titleLabel.text = post.title;
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    return cell;
} 
```

任何关于这样的搜索应该看起来如何的想法都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:59:56.453

您可能想查看[RKGitHub](https://github.com/RestKit/RKGitHub)示例项目，它展示了 RKTableController 类的功能。

至于错误，我认为它与您的问题无关。

# javascript - Javascript 日期 - 指定传入日期格式 (jQuery UI DateTimepicker)

> ID：11831169
> 
> 赞同：0
> 
> 时间：2012-08-06T15:22:52.677
> 
> 标签：javascript, jquery, jquery-ui, datepicker, date-format

我正在为 jQuery UI datepicker 使用自定义插件 - [Timepicker](http://trentrichardson.com/examples/timepicker/)

我有两个字段，**from**和**to**输入字段，需要检查**to 是否“大于” from**。我有我的自定义 onClose 函数（*onClose: function(dateText, inst) {}*），但第一个参数是输入值 - 日期字符串。但是我的日期字符串不是“有效”的 JS 日期时间格式，所以我无法获取 Date 对象实例并进行比较。

它是**dd.mm.yyyy hh:mm**，例如 06.08.2012 12:00

我想知道是否有任何方法可以指定输入字符串格式，例如：

```
var date = new Date('dd.mm.yyyy hh:mm', dateText); 
```

如果不是，我会让你以某种方式解析它......

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:27:53.427

JavaScript 中没有内置这样的实用程序。如果我是你，我会将日期格式与正则表达式匹配，并使用[接受日期部分的 Date 构造函数的形式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)：

```
function parseDate(str) {
  var m = str.match(/^(\d\d)\.(\d\d)\.(\d{4}) (\d\d):(\d\d)$/);
  return (m) ? new Date(m[3], m[2]-1, m[1], m[4], m[5]) : null;
} 
```

请注意，月份部分是从零开始的（而不是从一开始，所以一月 = 0，因此是 minux 一）。另外，请注意，[`Number`构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)用于将字符串转换为数字，因此您不必担心可能以零为前缀的数字被解释为八进制，就像[`parseInt(...)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt).

# javascript - 表示可用产品的所有组合的数据结构？

> ID：11831170
> 
> 赞同：0
> 
> 时间：2012-08-06T15:22:55.847
> 
> 标签：javascript, jquery, data-structures, combinatorics

用户可以从最多三个维度的产品数据中选择自己想要的产品。例如，对于一条裤子，我可能知道：

```
colors = ["red", "blue", "soylent green"]
waists = ["28W", "30W", "omg random description", "32W"] // The values are not always numeric
lengths = ["26L", "27L", "28L", "29L"] 
```

在 DOM 中表示为：

```
<ul class="colors">
  <li><button name="red" value="red"/></li>
  <li><button name="blue" value="blue/></li>
  …
</ul>
<ul class="waists">
  <li><button name="28W" value="28W"/></li>
  <li><button name="30W" value="30W"/></li>
  …
</ul>
<!-- you get the picture --> 
```

我们也知道，您无法获得所有颜色、腰围和长度的组合。选择部分配置时，我们标记HTML以指示可提供哪些配置可用。为我提供可用组合的数据必须以 JSON 格式交付，并且必须交付产品配置的*sku*（字符串），但它可以采用任何有意义的形式。应该采取什么形式？

我已经尝试了一个 3 维数组，其中定义的值是 skus，`null`或者未定义的值是不可用的配置：

```
[ // Arrays of colors
  [ // Arrays of waists
    [ // Array of lengths
      "sku-1", "sku-2", "sku-3", null, "sku-4"
    ], [
      "sku-abc", null, "sku-def"
    ]
  ], [
    [ … ], …
  ] …
] 
```

这是最紧凑的，但会导致代码缓慢、不可读。当客户将鼠标悬停在腰围尺寸按钮上时，我必须在腰围数组中找到该值的索引并消除腰围的所有其他尺寸，然后获取`null`值的索引并将它们标记为不可用。这里有很多`for`循环。

我尝试的另一种方法是使用嵌套对象。不可用的组合只是未定义的：

```
{
  "red": {
    "28W": {
      "28L": "sku-123",
      "30L": "sku-456"
…
}}} 
```

但是，如果用户将鼠标悬停在 上，例如`"28L"`，我必须遍历所有外部对象以找到那些*不*具有`28L`.

如果我只需要知道哪些配置不可用，我可以列出这些配置，但由于我还需要`sku`，所以它变得复杂了。什么数据结构在大小和速度（以及可读代码，如果可能的话）之间做出了最好的权衡，记住它将在客户端运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:51:18.130

你真的确定速度是个问题吗？您的目录是否非常非常大（数以万计的项目）？

为什么不使用扁平结构？

```
{
"sku-123" : ["purple", "28W", "32L"],
"sku-998" : ["orange", "44W", "10L"]
} 
```

或者用钥匙

```
{
"sku-123" : {color: "purple", w: "28W", l: "32L"},
"sku-998" : {color: "orange", w: "44W", l: "10L"}
} 
```

当然这不是最快的，您必须遍历所有产品才能将它们过滤掉。但它会使代码更具可读性（您可以使用谓词），并且更容易适应其他情况（例如添加新字段）。

除非您已经确认速度是一个问题，否则我不会拒绝这种简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:38:18.623

这里有两个问题。1\. 信息向浏览器的有效传播 2\. 信息的有效搜索。我建议尽可能高效地将这些信息发送到浏览器，同时将其保存在 JSON 中，这样至少数据应该在本地解析，然后从中索引废话，制作有效执行搜索所需的任何字典。我可能会从三个字典开始，每个字典用于选择的类别，然后对于值使用与键匹配的那些 sku 的数组（具有 sku 的其他两个属性）。至于如果用户做出了多项选择，使用哪个字典，这取决于你，

你有很多选择，我只给你几个。此外，请记住，这些都是优化，你做的越多，改变新行为的难度就越大。

# linux - 如何指定可执行文件作为命令行参数接受的文件类型？

> ID：11831174
> 
> 赞同：0
> 
> 时间：2012-08-06T15:23:04.360
> 
> 标签：linux, command-line-arguments

当我输入 acroread 和我想打开的 PDF 的前几个字母并点击 [Tab] 时，它会使用 .pdf 文件自动完成文件名。即使有其他匹配的文件名，其起始字母与我输入的相同，但扩展名不同，如 .ps。我的 C++ 代码接受带有自定义扩展名 .tk3 的文本文件名作为输入参数。如何设置我的代码以执行 acroread 所做的相同操作？

# python - Python：如何使用 lambda 或 partial 来绑定第一个位置参数以外的参数

> ID：11831177
> 
> 赞同：6
> 
> 时间：2012-08-06T15:23:15.327
> 
> 标签：python, lambda, arguments, partial

`lambda`在尝试使用 a或`functools.partial`使用现有函数的绑定位置参数创建新函数时，我有很多困惑。

我想做这样的事情（表现不理想）：

```
def addFunction(self, name, in_function, secondary_args=None, secondary_kwargs=None):

        # Assign the function with optional args based on whether any
        # optional args are not None

        if secondary_args is not None and secondary_kwargs is not None:
            func = lambda x: in_function(x, *secondary_args, **secondary_kwargs)
        elif secondary_args is None and secondary_kwargs is not None:
            func = lambda x: in_function(x, **secondary_kwargs)
        elif secondary_args is not None and secondary_kwargs is None:
            func = lambda x: in_function(x, *secondary_args)
        else:
            func = in_function
        ###

        func.__doc__ = in_function.__doc__
        self[name] = func # <-- This method is a class method for something deriving dict. 
```

我还尝试用`lambda`等效语句替换所有`functools.partial`语句。

问题是，如果我像这样使用这个函数：

```
# Assume some_function takes 3 arguments, a float, a Bool, and a String,
# in that order.

someObject.addFunction("my_f", some_function, secondary_args=[True, "Option_A"]) 
```

现在当我尝试使用（例如）`someObject["my_f"](5.0)`它报告第一个参数是`True`我调试它时。

看起来绑定，无论是使用`lambda`或`partial`简单地推入位置参数，要么只在末尾接受你额外的位置参数，要么`*args`只是放弃它（我不确定是哪个）。

对于我的应用程序，由于许多函数将存储在这样的特定对象中，并且用户选择了不同数量的可选参数，重要的是我返回的带有绑定参数的函数仍然接受用户的参数作为第一个位置参数，而不是强制所有参数都是关键字参数。

这似乎应该很简单。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:13:26.600

你能发布一个完整的脚本来重现错误吗？因为以下脚本按预期工作：

```
class C(dict):                                                               
    def addFunction(self, name, in_function, secondary_args=None, secondary_kwargs=None):

        # Assign the function with optional args based on whether any        
        # optional args are not None                                         

        if secondary_args is not None and secondary_kwargs is not None:      
            func = lambda x, *secondary: in_function(x, *secondary_args, **secondary_kwargs)
        elif secondary_args is None and secondary_kwargs is not None:        
            func = lambda x: in_function(x, **secondary_kwargs)              
        elif secondary_args is not None and secondary_kwargs is None:        
            func = lambda x: in_function(x, *secondary_args)                 
        else:                                                                
            func = in_function                                               
        ###                                                                  

        func.__doc__ = in_function.__doc__                                   
        self[name] = func  # <-- This method is a class method for something deriving dict.

def f(x, y=0, z=1):                                                          
    print x, y, z                                                            

c = C()                                                                      
c.addFunction('my_f', f, secondary_args=[-1])                                
c['my_f'](0)                                                                 

# output is 0 -1 1, as expected 
```

也许问题在于你如何将函数“附加”到你的对象上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:45:03.750

听起来你只想要一些自定义类型的函数包装器：

```
class Caller(object):

    def __init__(self, fn, *args, **kwargs):
        self._fn = fn
        self._args = args 
        self._kwargs = kwargs

    def __call__(self, *uargs, **ukwargs):
        arg = uargs + self._args
        kw =  dict(ukwargs.items() + self._kwargs.items())
        self._fn(*arg, **kw) 
```

然后包装一些东西：

```
def test(a,b,c=None):
    print a,b,c

c = Caller(test, 2,c=True)
c(1)
# 1 2 True 
```

我确信`Caller`可以清理它，但这只是一个快速示例，说明如何存储原始 fn 和参数，然后控制何时调用它。

# jquery - 返回 JSON 以查看导致 Jquery 不触发

> ID：11831179
> 
> 赞同：0
> 
> 时间：2012-08-06T15:23:19.493
> 
> 标签：jquery, asp.net-mvc-3

我正在尝试使用 json 数据填充 jquery 网格：

```
 public ActionResult DataHandler()
        {
            List<Employee> employees = EmployeeRepository.GetEmployees();

            return Json(new
            {
                employees
            },
            JsonRequestBehavior.AllowGet);

        } 
```

我的客户端代码：

```
$(document).ready(function () {
    alert("Code Fired!");
    var source =
            {
                url: '@Url.Action("DataHandler", "Home")',
                datatype: "json",
                datafields: [{ name: "FirstName" }, { name: "LastName" }, { name: "Product" }, { name: "Price", type: "float" }, { name: "Quantity", type: "int" }, { name: "Total", type: "float"}]
            };

    var dataAdapter = new $.jqx.dataAdapter(source);

    $("#jqxgrid").jqxGrid(
            {
                source: dataAdapter,
                columns: [
                  { text: 'First Name', dataField: 'FirstName', width: 100 },
                  { text: 'Last Name', dataField: 'LastName', width: 100 },
                  { text: 'Product', dataField: 'Product', width: 180 },
                  { text: 'Quantity', dataField: 'Quantity', width: 80, cellsalign: 'right' },
                  { text: 'Unit Price', dataField: 'Price', width: 90, cellsalign: 'right', cellsformat: 'c2' },
                  { text: 'Total', dataField: 'Total', cellsalign: 'right', minwidth: 100, cellsformat: 'c2' }
                ]
            });

}); 
```

这是我的观点：

```
@{
    ViewBag.Title = "DataHandler";
}

@section scripts
{
    @Content.Script("GetGridData.js",Url)
}

<h2>DataHandler</h2>

<div id="jqxgrid"></div> 
```

如果我有这样的代码设置，它会将填充的 JSON 数据返回给浏览器，永远不会触发 iquery 代码如果我有控制器，只需返回 View(); 我可以看到 jquery 代码至少会触发。

如何设置页面以从控制器代码中处理我的 json 数据并将其显示在网格中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:44:55.467

以下对我来说很好。

模型：

```
public class Employee
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Product { get; set; }
    public decimal Price { get; set; }
    public int Quantity { get; set; }
    public decimal Total { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult DataHandler()
    {
        List<Employee> employees = Enumerable
            .Range(1, 5)
            .Select(x => new Employee
            {
                FirstName = "fn " + x,
                LastName = "ln " + x,
                Price = 0.7m * x,
                Product = "prod",
                Quantity = x,
                Total = 7.2m * x
            })
            .ToList();

        return Json(new
        {
            employees
        },
        JsonRequestBehavior.AllowGet);
    }
} 
```

查看 ( `~/Views/Home/Index.cshtml`):

```
<script src="@Url.Content("~/Scripts/jqwidgets/jqxcore.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jqwidgets/jqx-all.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        var source =
            {
                url: '@Url.Action("DataHandler", "Home")',
                datatype: "json",
                datafields: [{ name: "FirstName" }, { name: "LastName" }, { name: "Product" }, { name: "Price", type: "float" }, { name: "Quantity", type: "int" }, { name: "Total", type: "float"}]
            };

        var dataAdapter = new $.jqx.dataAdapter(source);

        $("#jqxgrid").jqxGrid(
            {
                source: dataAdapter,
                columns: [
                  { text: 'First Name', dataField: 'FirstName', width: 100 },
                  { text: 'Last Name', dataField: 'LastName', width: 100 },
                  { text: 'Product', dataField: 'Product', width: 180 },
                  { text: 'Quantity', dataField: 'Quantity', width: 80, cellsalign: 'right' },
                  { text: 'Unit Price', dataField: 'Price', width: 90, cellsalign: 'right', cellsformat: 'c2' },
                  { text: 'Total', dataField: 'Total', cellsalign: 'right', minwidth: 100, cellsformat: 'c2' }
                ]
            });
    });
</script>

<div id="jqxgrid"></div> 
```

所以我猜你可能在脚本包含或服务器端操作引发异常或检索员工列表时遇到了一些问题。

# c# - 如何使 PHP 5.4 允许调用时通过引用传递？

> ID：11831184
> 
> 赞同：0
> 
> 时间：2012-08-06T15:23:32.417
> 
> 标签：c#, php, pass-by-reference

*简短的问题：*

```
function Foo(&$FooParam)
{
...
}

Foo(&$Bar); 
```

如何保留此代码并使其在 PHP 5.4 中工作？

*更长的描述：*

我有很多 PHP 代码，其中我使用了 C# 中的符号模式 - 在声明*和*函数调用时标记引用参数。它使代码更具可读性并在重构代码时防止错误。现在 5.4 的 PHP 将此报告为不支持的调用时通过引用传递，我认为这是不正确的（根据 php.net，5.4 中禁止此功能是为了防止调用者更改函数参数的语义。它显然不适用在这种情况下）。

我仍然在函数声明中看到带有 & 的代码，并且调用它更具可读性并希望使用它。有什么办法让它在 PHP 5.4 中工作？如果不是，请随意添加一些推理，让我相信这种 C# 做法是错误的，我应该重写所有代码，使其与 5.4 兼容。

*编辑：*我已经阅读了关于类似主题的八到十个问题，不同之处在于我不是在问“如何修复代码”而是“如何不修复代码”。如果真的没有办法让它工作，请说明您对为什么决定采用这种方式或为什么我应该更喜欢这种（我认为）比“旧”更糟糕的“新”编写代码方式的意见方法。

# c# - 如何将 C# 中的文件内容直接流式传输到 args？

> ID：11831187
> 
> 赞同：2
> 
> 时间：2012-08-06T15:23:46.830
> 
> 标签：c#

我有一个解决方案，可以读取文件名的命令行并读取其内容。我才意识到如果我能去就好了

```
c:\MyReader.exe < text.txt 
```

代替

```
c:\MyReader.exe text.txt 
```

如果文件的内容作为`args`输入放置在`Main(String[] args)`. 它是可行的还是我必须解析文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:26:54.733

这不会将内容放入`args`中，而是[将其重定向到标准输入](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx?mfr=true)，以便`Console.Read`方法从文件而不是键盘读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:31:46.570

正如您无疑发现的那样，重定向是行不通的。做你想要达到的目标的能力取决于你的 shell 解释器的能力。您几乎可以肯定地编写一个执行您想要的批处理文件，但您也可以将其作为您自己程序的功能，而不是依赖批处理文件。

```
public static Main(String[] args) {
    if (args.Length >= 2 && args[0] == "/args") {
        args = File.ReadAllText(args[1]).Split(' ');
    }
    ...
} 
```

如果你的程序是这样启动的：

```
c:\MyReader.exe /args text.txt 
```

论据将取自`text.txt`；如果你的程序是这样启动的：

```
c:\MyReader.exe param1 param2 param3 
```

那么参数将是命令行上传递的任何内容。

# android - 如何从android中的url获取位图？

> ID：11831188
> 
> 赞同：48
> 
> 时间：2012-08-06T15:23:51.320
> 
> 标签：android

我有一个类似图片的uri

```
file:///mnt/............... 
```

如何使用此 uri 获取图像但它返回 null，请告诉我我哪里错了。

```
Bitmap bitmap = BitmapFactory.decodeFile(uri.getPath());
Bitmap bitmap = BitmapFactory.decodeFile(uri.toString()); 
```

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-08-06T15:30:46.793

这是一种简单的单行方法：

```
 try {
        URL url = new URL("http://....");
        Bitmap image = BitmapFactory.decodeStream(url.openConnection().getInputStream());
    } catch(IOException e) {
        System.out.println(e);
    } 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-06T15:26:39.283

这应该可以解决问题：

```
public static Bitmap getBitmapFromURL(String src) {
    try {
        URL url = new URL(src);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap myBitmap = BitmapFactory.decodeStream(input);
        return myBitmap;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} // Author: silentnuke 
```

不要忘记在清单中添加互联网权限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T20:57:36.050

好的，所以您正在尝试从文件中获取位图？标题说网址。无论如何，当您从 Android 的外部存储中获取文件时，您永远不应该使用直接路径。而是像这样调用 getExternalStorageDirectory() ：

```
File bitmapFile = new File(Environment.getExternalStorageDirectory() + "/" + PATH_TO_IMAGE);
Bitmap bitmap = BitmapFactory.decodeFile(bitmapFile); 
```

getExternalStorageDirectory() 为您提供 SD 卡的路径。您还需要在 Manifest 中声明 WRITE_EXTERNAL_STORAGE 权限。

# xml - 通过 XSLT 映射 XML 值

> ID：11831189
> 
> 赞同：1
> 
> 时间：2012-08-06T15:23:53.410
> 
> 标签：xml, xslt, map

环顾了所有 xslt 映射问题，但似乎无法找到以下具体案例的帮助：

例如，我有一个带有以下值的 xml 文件

```
<rate>
<code>AB</code>
<code>CD</code>
<code>EF</code>
</rate> 
```

这些代码出现在我通过 xslt 输出的整个 xml 中。然而，每当 xslt 输出这些特定代码时，它需要首先将它们映射到新值。例如，映射如下：

```
Code AB -> YZ
Code CD -> WX
Code EF -> QR 
```

请有人告诉我是否以及如何在整个 xslt 中执行此映射，再次记住这些速率代码可以出现在整个 xml 中的各个位置，并且 xslt 所做的不仅仅是此映射。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:00:13.987

使用推送式、基于模板的处理，您应该能够编写模板来进行映射，例如

```
<xsl:template match="rate/code[. = 'AB']">
  <xsl:copy>
   <xsl:text>YZ</xsl:text>
  </xsl:copy>
</xsl:template>

<xsl:template match="rate/code[. = 'CD']">
  <xsl:copy>
   <xsl:text>WX</xsl:text>
  </xsl:copy>
</xsl:template>

<xsl:template match="rate/code[. = 'EF']">
  <xsl:copy>
   <xsl:text>QR</xsl:text>
  </xsl:copy>
</xsl:template> 
```

然后如果你确保你`apply-templates`为任何`rate`父元素做，例如一个特定的模板作为

```
<xsl:template match="rate[code]">
  <xsl:copy>
    <xsl:apply-templates/>
  </xsl:copy>
</xsl:template> 
```

或者如果您不想更改任何内容，那么身份转换模板就足以完成这项工作，例如

```
<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template> 
```

我还会考虑在自己的文件中定义映射并从该文件中提取值，至少使用 XSLT 2.0 你可以这样做，例如

```
<xsl:param name="mapping-url" select="'mapping.xml'"/>
<xsl:variable name="mapping-doc" select="document($mapping-url)"/> 
```

然后文件定义例如

```
<mapping>
  <map in="AB" out="YZ"/>
  <map in="CD" out="WX"/>
  <map in="EF" out="QR"/>
</mapping> 
```

然后你可以使用例如

```
<xsl:key name="mk" match="mapping/map" use="@in"/>

<xsl:template match="rate/code[key('mk', ., $mapping-doc)]">
  <xsl:copy>
    <xsl:value-of select="key('mk', ., $mapping-doc)/@out"/>
  </xsl:copy>
</xsl:template> 
```

而不是为您需要映射的每个值编写模板。

# .htaccess - htaccess 将子域重定向到 $_GET

> ID：11831192
> 
> 赞同：1
> 
> 时间：2012-08-06T15:24:05.687
> 
> 标签：.htaccess

在 htaccess 方面需要一些帮助

对于某种图像存储站点，我需要这个：”

如果用户访问 http://subdomain.mysite.com/#RANDOMSTRING/，服务器必须像 url：http://subdomain.mysite.com/index.php?image=#RANDOMSTRING，但是访客不必看到这个。

此外，在 www. mysite.com（所以不在子域中）有一个带有 htaccess 的 wordpress 用于 seo 友好的 url。（不知道这是否与它有关，但因为我需要将 http://subdomain.mysite.com 的文件上传到 ftp://www.mysite.com/subdomain）

希望收到您的来信，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:39:23.327

在 subdomain.mysite.com 文档根目录的 htaccess 文件中添加：

```
RewriteEngine On
RewriteRule index\.php - [L]
RewriteCond %{HTTP_HOST} ^subdomain.mysite.com$ [NC]
RewriteRule ^(.+?)/?$ /index.php?image=$1 [L] 
```

您可能根本不需要`RewriteCond`，因为您的 2 个域（子域和 www）似乎位于不同的文档根目录中。

# powershell - 如何更新 PsRemotingJob 中的进度？

> ID：11831197
> 
> 赞同：3
> 
> 时间：2012-08-06T15:24:19.527
> 
> 标签：powershell

在 powershell 中使用 start-job 启动作业时，会返回一个对象 psremotingjob。PsRemotingJob 上的 get-member 为我们提供：

```
 TypeName: System.Management.Automation.PSRemotingJob

Name          MemberType     Definition                                       
----          ----------     ----------                                       
[...]
Progress      Property       System.Management.Automation.PSDataCollection`...
StatusMessage Property       System.String StatusMessage {get;}               
Verbose       Property       System.Management.Automation.PSDataCollection`...
Warning       Property       System.Management.Automation.PSDataCollection`...
State         ScriptProperty System.Object State {get=$this.JobStateInfo.St... 
```

所以我想知道我是否可以从工作本身更新属性“进度”？我建立了 progressRecord 集合，但我不知道如何从内部获取作业的属性。

```
$VMlist  = @("VM1","VM2")

foreach($VM in $VMlist)
{
    $j = start-job -name $VM -argumentlist @($path,$VM)  -ScriptBlock {
        $psdatacollectionExample = New-Object 'System.Management.Automation.PSDataCollection`1[System.Management.Automation.ProgressRecord]'
        $progressRecord = New-Object System.Management.Automation.ProgressRecord(1,"Task1","Installing")
        for($i=0;$i -lt 5; $i++)
        {
            $progressRecord.PercentComplete = $i * 20
            $psdatacollectionExample.Add($progressRecord)   
            #something like super.Progess = $psdatacollectionExample

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:51:56.540

您从服务器端作业脚本内部调用 write-progress，就像它是本地脚本一样。然后，在客户端，您使用 receive-job 像任何其他记录（警告、错误等）一样检索进度记录。如果您将它们写入本地控制台输出流，它将为您呈现进度条。

所以：

```
for($i=0;$i -lt 5; $i++)
{
    $progressRecord.PercentComplete = $i * 20
    write-progress $progressRecord
} 
```

就如此容易！

**更新：**

这是一个简单的示例，演示远程作业的进度报告。`Start-Job`作业使用远程协议，因此它们有效地“远程”到 localhost - 相同的代码适用于`Invoke-Command`.

```
PS> $job = start-job { 0..10 | % {
        write-progress -Id 1 -Activity "remote job" -Status "working..." `
          -PercentComplete ($_ * 10); sleep -seconds 2 } }
PS> receive-job $job -Wait 
```

上述脚本将以 10% 的增量显示进度条，直到作业完成。

# android - Android：在未连接到预配置网络的情况下检查 wifi 密码有效性

> ID：11831198
> 
> 赞同：4
> 
> 时间：2012-08-06T15:24:20.337
> 
> 标签：android, passwords, wifi

我正在寻找一种方法来检查预配置的 wifi 网络的密码有效性而不激活它。有什么解决办法吗？

我的情况：

1.  Android 已连接到用作 Wifi 接入点的外部设备
2.  我需要使用我预先配置的 wifi 网络之一配置此外部设备
3.  我向用户询问预配置的密码（使用对话框）
4.  我将它传递给外部设备

所以，我想在将密码传递给外部设备之前检查密码的有效性。

WifiConfiguration 返回“*”作为密码，因此我无法直接将用户提供的密码与当前预配置的密码进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-27T09:19:38.537

据我所知，没有“优雅”的方式。

如果您将从对话框获取的密码设置为：`wifiConfig.preSharedKey`并且使用方法：`wifiManager.addNetwork(wifiConfig)`给定 SSID 的配置不会被添加但会被覆盖。比你打电话`wifiManager.reconnect()`来检查你是否可以连接到你的网络（使用`BroadcastReceiver`过滤器`WifiManager.NETWORK_STATE_CHANGED_ACTION`）。

现在，如果密码正确，你就很好了。但如果不是，您的 Android 设备将断开连接并要求您提供正确的密码，以便能够连接到您更改了配置的网络。

# php - PHP 共轭规则动词

> ID：11831202
> 
> 赞同：0
> 
> 时间：2012-08-06T15:24:28.237
> 
> 标签：php

有谁知道（如果）我可以在哪里获得一个 PHP 脚本来结合常规英语动词？我处理了不规则动词（通过 MySQL 表），只是想知道是否有人已经弄清楚如何做常规动词。类似于这个用于复数名词的[变形脚本。](http://kuwamoto.org/2007/12/17/improved-pluralizing-in-php-actionscript-and-ror/)

# ruby-on-rails - 使用acts_as_list 并将浮点数转换为int 值

> ID：11831205
> 
> 赞同：0
> 
> 时间：2012-08-06T15:24:33.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, acts-as-list

我想在最初用 php 编写并正在移动到 rails 的应用程序中使用acts_as_list。我们使用了一个浮动的“位置”值，这样如果用户想在位置 1 和 2 之间放置一些东西，他们只需在表单中输入 1.5。看起来acts_as_list 只使用整数。act_as_list 中有没有办法让它使用浮点数而不是整数？或者可能将一组浮点数转换为整数以进行插入？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:43:51.117

您可以修改它，但使用整数更容易，只需重新排序列表中出现**在**您移动的项目之后的所有项目。

使用浮点数时，每次移动列表时，您都被迫将数字拆分为越来越高的精度，如果列表在其中得到足够的重新排序，您最终可能会遇到与浮点数存储方式相关的问题，然后你会得到一个列表，它的排序以微妙的方式中断，不会立即显而易见。使用浮点数的另一个问题实际上与将位置（本质上是一个整数）存储为浮点数有关。当你站在一条线上时，你不会认为自己处于 1.5 的位置——你要么处于 1 的位置，要么处于 2 的位置。唯一的情况下，像 1.5 这样的测量值在像人们站成一排的情况下是有意义的是如果您正在测量距离（例如以英尺/米为单位的物理距离），例如，线的前面。然而，

如果您尝试保存所需的查询/数据库更改的数量（浮点数将允许您只更新一条记录上的一列，而不是多条记录上的一列），那么您可能会错过gem 为您做这件事的便利性，如果出于某种原因您**确实**需要支持浮点数，您可能想自己动手做。

但是，鉴于上述关于位置本质上是一个整数的观点，我建议不要仅仅为了节省数据库时间而进行浮点运算。人们多久重新排序一次列表，它会给你的应用带来多少实际负载？

如果相反，由于与旧系统的某些集成点，您必须支持浮点数，那么请告诉我们更多相关信息。

# c# - 简化我的 C# Linq 语句？

> ID：11831207
> 
> 赞同：2
> 
> 时间：2012-08-06T15:24:34.977
> 
> 标签：c#, linq, linq-to-dataset

班级 ：

```
class Foo
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

列表

```
List<Foo> lst = new List<Foo>(); 
```

数据表：

```
 DataTable dt = GetFromDb ().... 
```

我想填写`lst`来自`dt`.

我已经做到了：

```
Array.ForEach(dt.AsEnumerable().ToArray(), y = > lst.Add(new Foo()
{
    Id = int.Parse(y["id"].ToString()), Name = y["name"].ToString()
})); 
```

问题 ：

1.  我不能做点别的 `dt.AsEnumerable().Select(_ => fill lst )`吗？

*我**知道**选择签名的一部分（在这种情况下）是`Func<datarow,void>`不会编译的*

但是，除了我的丑陋方式*之外*，还有其他方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T15:29:56.123

尝试这个

```
var fooList = (from t in dt.AsEnumerable() 
         select new Foo { Id = t.Field<int>("Id"), 
                          Name= t.Field<string>("Name") }).ToList(); 
```

DataTable 上的[AsEnumerable](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx)扩展方法将返回 DataRows 的集合。然后您使用必填字段从您的 Linq 结果中进行投影。由于它是 dataRow 类型，因此您需要指定每个列的类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-06T15:31:43.573

使用[LINQ 到数据集](http://msdn.microsoft.com/en-us/library/bb386977)：

```
var foos = from row in dt.AsEnumerable()
           select new Foo()
           {
              Id = row.Field<int>("id"),
              Name = row.Field<string>("name")
           };

// create a new list
List<Foo> lst = foos.ToList();

// update: add items to an exisiting list
fooList.AddRange(foos); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-06T15:28:29.267

您走在正确的轨道上，您可以执行以下操作：

```
lst = dt.AsEnumerable().Select(y = > new Foo()
{
    Id = Convert.ToInt32(y["id"]), Name = y["name"] as string
}).ToList(); 
```

编辑：**添加到现有列表**

我通常只会连接两个列表：

```
lst = lst.Concat(dt.AsEnumerable().Select(...)).ToList(); 
```

但是看到 ken2k 的答案后，我想我现在将开始使用`AddRange`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T15:28:35.887

你可以这样做：

```
List<Foo> lst = dt.AsEnumerable().Select(z => new Foo
{
    Id = int.Parse(z["id"].ToString()),
    Name = z["name"].ToString()
}).ToList(); 
```

编辑：

如果要附加到现有`List<Foo>`实例：

```
lst.AddRange(dt.AsEnumerable().Select(z => new Foo
{
    Id = int.Parse(z["id"].ToString()),
    Name = z["name"].ToString()
})); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T19:21:14.470

我通过 Rows 属性得到了另一个解决方案：

```
 List<Foo> results = (from DataRow myRow in dt.Rows
                               select new Foo()
                            {
                              Id =int.Parse( row["id"].ToString()),
                              Name = row["name"].ToString()
                             }).ToList(); 
```

# ffmpeg - 如何将 ffplay 作为无窗口进程运行？

> ID：11831214
> 
> 赞同：17
> 
> 时间：2012-08-06T15:25:01.303
> 
> 标签：ffmpeg, sdl

我将 ffplay 作为后台进程运行，它为我的主 UI 进程提供图像数据。我已设置“ `SDL_VIDEODRIVER = dummy`”来禁止在 SDL 窗口中显示 ffplay 视频。

问题是即使没有显示视频输出窗口，ffplay 进程仍然显示为应用程序窗口（停靠、CMD+TAB 条目等）。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2018-11-14T08:38:45.630

该选项`-nodisp`对我来说效果很好（与 一起`-autoexit`）。

在 Ubuntu 18.04、ffmpeg 3.4.6 中测试：

```
ffplay -f lavfi -i "sine=frequency=1000:duration=5" -autoexit -nodisp 
```

来源：[[FFmpeg-user] ffplay 仅用于音频](https://lists.ffmpeg.org/pipermail/ffmpeg-user/2011-March/000044.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:38:05.107

SDLMain.m 添加了停靠条目，[需要将其编译](https://stackoverflow.com/questions/4019892/compiling-sdl-on-a-mac)到`ffplay`它才能在 Mac 上播放。在 SDLMain.m 中注释以下行后，ffplay 正在作为无窗口进程运行。

```
//#ifdef SDL_USE_CPS
//    {
//        CPSProcessSerNum PSN;
//        /* Tell the dock about us */
//        if (!CPSGetCurrentProcess(&PSN))
//            if (!CPSEnableForegroundOperation(&PSN,0x03,0x3C,0x2C,0x1103))
//                if (!CPSSetFrontProcess(&PSN))
//                    [NSApplication sharedApplication];
//    }
//#endif /* SDL_USE_CPS */

/* Set up the menubar */
//[NSApp setMainMenu:[[NSMenu alloc] init]];
//setApplicationMenu();
//setupWindowMenu(); 
```

**编辑**这只影响Mac，因为我们不需要其他平台上的`SDLMain.m`包装器`int main()`

# python - 将csv中的选定列转换为字典

> ID：11831216
> 
> 赞同：2
> 
> 时间：2012-08-06T15:25:06.590
> 
> 标签：python, csv, dictionary

我有一个名为“存档”的 csv 文件。它作为阅读器打开。我希望创建一个字典，其值`(k,v)`来自`{row[0]+row[2]:row[7]}`csv 文件中的每一行。必须有一种简单直接的方法将此 csv 转换为字典 where`k = row[0]+row[2]`和`v = row[7]`.

```
# open archive reader
farchive = open ("wv5archive.csv","rb")
archive = csv.reader(farchive, delimiter=',')

for rows in archive: 
    arch_dict = {rows[0]+rows[2]:rows[7]} 

print arch_dict 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:43:23.770

最简单的方法是使用字典理解：

```
arch_dict = {row[0]+row[2]: row[7] for row in archive} 
```

如果您使用的是旧版本的 Python：

```
arch_dict = {}
for row in archive: 
    arch_dict[row[0]+row[2]] = rows[7] 
```

# c# - 将视频推送到 Windows Media Services 2008

> ID：11831218
> 
> 赞同：3
> 
> 时间：2012-08-06T15:25:13.383
> 
> 标签：c#, visual-studio-2010, windows-media-encoder, windows-media-server, windows-media-services

我有一个 Windows Media Services 2008 服务器（不是 IIS 平滑流），我需要将视频推送到发布点。得到这个的 C# 代码（VS2010）是什么？我需要安装什么SDK？文档在哪里？

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T14:39:03.550

WMS API 与语言无关，因此您可以使用您选择的语言。大多数示例代码将使用 C++。你需要做翻译。

# html - 确保 div 是 100% 宽度，而不破坏菜单

> ID：11831219
> 
> 赞同：0
> 
> 时间：2012-08-06T15:25:17.530
> 
> 标签：html, css

首先，我对此很陌生，所以请多多包涵。

我在[我的网站上实现了一个非常酷的“滚动脚本淡入淡出”。](http://cargocollective.com/btatest)

但是，我想做的是让图像在顶部跨度为 100% 宽度，就像[fastcocreate 的](http://www.fastcocreate.com/)网站一样。

这是我正在使用的 div：

```
<div class="home" style="background-image: url(http://payload51.cargocollective.com/1/7/237315/3336908/HomeImage_o.jpg); background-attachment: fixed; height: 560px; width: 100%; opacity: 1; background-position-y: 0px; background-position-x: center; background-repeat: no-repeat no-repeat; background-size: 100% 560px;"> 
</div> 
```

现在我尝试添加“背景尺寸：100% 自动；” 到 div，它可以解决问题，除了这对我的文本做了奇怪的事情。例如，如果我让浏览器更苗条，文本不会随之移动——所以我放弃了这个想法。

接下来我将其更改为“背景尺寸：100% 560px;” 这解决了这个问题。但是另一种情况是，当您将浏览器缩小时，图像会被挤压，或者当我将浏览器变宽时，图像会被拉伸。

我觉得我更接近上面的那个，但我正在寻找拉伸图像问题的解决方案。我需要上传比当前尺寸更大的图片吗？

正如我之前所说，[这些人](http://www.fastcocreate.com/)做得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:33:14.840

似乎 fastocreate 为其图像设置了最小宽度，您是否尝试过

```
min-width: 100%;
height: auto; 
```

?

我很确定这就是 fastocreate 所做的

最好的，-b

*另外，请尝试在您的浏览器上启用“检查元素”。在尝试反映某人的风格时，它非常有用。

编辑：

作为对您的评论的回应，您可以尝试制作一个 jQuery 函数来调整它的大小。

例如

```
function resize(){
  var height = $('img').width / 2; //sets variable height to the width divided by 2
  $('img').height(height); // sets the value of the height to the variable height
}; 
```

或类似的东西。

# android - Android/SQLite - 文件的存储位置

> ID：11831220
> 
> 赞同：0
> 
> 时间：2012-08-06T15:25:19.497
> 
> 标签：android, sqlite, android-source, gcov

我正在测试一个在 Android API 中运行 SQLite 方法的 Android 应用程序。我想获得 Android 开源项目 (AOSP) 中 SQLite 代码的代码覆盖率，并且我将其设置为运行 G-Cov 并在运行测试时保存该覆盖率信息。但是，我不知道这个覆盖信息存储在哪里。我以为它会在 中`data/data/package-name`，但我什么也没看到，而且我无法成功地将我的所有文件从 Android 模拟器中拉出。

有谁知道这个文件将存储在哪里？我不确定它是存储在 SQLite 中还是在模拟器上（这是我假设的，因为我在 SQLite 目录中没有看到它）。

谢谢。

编辑：具体来说，我正在寻找 *.gcno 和 *.gcda 文件。

编辑：现在我认为他们必须在模拟器上的共享库中，尽管在文件资源管理器中（我使用带有 ADT 的 Eclipse Juno），我看不到任何接近`/lib/*`并且`/data/data/package-name/lib`是空的。有谁知道那个位置可能在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:30:42.987

在数据/数据/什么都没有？

当此文件夹为空时，可以尝试使用 sqlite manager for eclipse

# ios - UIViewController pushViewController，显示导航栏

> ID：11831224
> 
> 赞同：4
> 
> 时间：2012-08-06T15:25:43.567
> 
> 标签：ios, iphone, uiviewcontroller, uinavigationbar

我有没有导航栏的 UIViewController(1)，我需要推送另一个有导航栏的 UIViewController(2)，当我点击返回时，导航栏必须隐藏在 1 个控制器上。我试过 uiviewcontroller 代表。但没有任何工作..

请帮忙..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T16:36:20.633

这将在第二个屏幕上显示导航栏：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];        
    self.navigationController.navigationBarHidden = NO;
} 
```

当您返回第一个屏幕时，您还需要隐藏导航栏：

```
- (void)viewDidDisappear:(BOOL)animated {
    [super viewDidDisappear:animated];        
    self.navigationController.navigationBarHidden = YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-26T16:50:27.960

我想你想要动画选项。如果你使用上面的方法 ( `self.navigationController.navigationBarHidden = value`) 你会得到一些不受欢迎的视觉碎片。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self.navigationController setNavigationBarHidden:NO animated:YES];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    [self.navigationController setNavigationBarHidden:YES animated:YES];
} 
```

这将推动/弹出与导航栏牢固地连接到出现/消失的视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:58:04.813

将此代码放在第一个视图控制器中

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];        
    self.navigationController.navigationBarHidden = YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-27T01:35:52.757

如果您要管理许多视图控制器的导航栏隐藏/显示状态，那么来自 Alfie 或 Ader 的回答将是一场灾难。

我刚刚在 github 上发布了专门用于 UINavigationBar 外观管理的代码。查看[RRViewControllerExtension](https://github.com/Roen-Ro/RRViewControllerExtension)，它将优雅地解决您的问题。

使用[RRViewControllerExtension](https://github.com/Roen-Ro/RRViewControllerExtension)，您甚至不必#import 头文件，您只需在视图控制器中覆盖下面的任何所需方法。

```
//override any of the methods below in your viewcontroller's .m file to make specific navigation bar appearance

-(BOOL)prefersNavigationBarHidden;
-(BOOL)prefersNavigationBarTransparent;

-(nullable UIColor *)preferredNavatationBarColor;
-(nullable UIColor *)preferredNavigationItemColor;
-(nullable UIImage *)preferredNavigationBarBackgroundImage;
-(nullable NSDictionary *)preferredNavigationTitleTextAttributes; 
```

# iphone - 单选按钮显示不正确

> ID：11831233
> 
> 赞同：0
> 
> 时间：2012-08-06T15:26:02.900
> 
> 标签：iphone, html, css, ipad, radio-button

我有几个像常规按钮一样显示的单选按钮，它们看起来像这样：

```
 <div class="buttoncontainer" style="position:relative; left: 80px;">
                <label><input type="radio" name="toggle" checked="checked" class="_today">          <span class="css3button-left">Today</span></label>
                <label><input type="radio" name="toggle" class="_tomorrow"><span class="css3button">Tomorrow</span></label>
                <label><input type="radio" name="toggle" class="_weekend"><span class="css3button">This Weekend</span></label>
                <label><input type="radio" name="toggle" class="_nextmonth"><span class="css3button-right">Next Month</span></label>
            </div> 
```

像这样选择时，我会更改按钮的外观：

```
 .buttoncontainer  input:checked + span
     { 
        ...
     } 
```

这适用于我测试过的所有浏览器——IE、FireFox、Chrome，甚至是我电脑上的 Safari，但外观永远不会改变为 :checked on the Ipad or Iphone using Safari 。有谁知道为什么这些按钮只在 ipad 上不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:59:56.847

我想你的意思是标签不可点击？

由于某些原因，该`label`元素的通常行为不适用于开箱即用的移动 WebKit。

添加`label { cursor: pointer; }`到 CSS 解决了这个问题。

# url - 接受干净 URL 参数的 Drupal php 页面

> ID：11831236
> 
> 赞同：0
> 
> 时间：2012-08-06T15:26:10.010
> 
> 标签：url, drupal, drupal-6, clean-urls

我正在使用 Drupal 6，并且有自己的节点正在拉入我的自定义 php 页面。网址是`domain.com/blogs`。我想使用干净的 URL 作为参数。例如，`domain.com/blogs/1`将从数据库中提取关于第一篇博文的信息。

我试过了：

`domain.com/blogs/1`并且在 php 代码中使用`arg(0)`但我什至从未运行代码，因为 Drupal 出现`Page Not Found`错误。

有什么方法可以让 Drupal 知道`domain.com/blogs`允许之后的任何参数并加载节点以`/blogs`发送参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:26:12.650

别名并不意味着您可以控制菜单路由器项目的其余部分`node/1234`。`blogs`

例如，如果您的非别名节点路径是 "node/1234" ，那么您“拥有”其余的参数。即您可以像这样`567`从`node/1234/567`PHP 访问：

```
<?php print arg(2); ?> 
```

如果你想“拥有” `/blogs`URL 部分，你必须使用[hook_menu](http://api.drupal.org/api/drupal/developer!hooks!core.php/function/hook_menu/6)来定义它。由于您已经接触过 php，我认为最好的方法是制作模块。但是，您可以为此使用视图或面板模块。

```
<?php
function MYMODULE_menu() {
  $items = array();

  $items['blogs'] = array(
    'title' => 'Main Blogs page', 
    'page callback' => 'MYMODULE_page', 
    'access arguments' => array('access content'), 
    'type' => MENU_SUGGESTED_ITEM,
  );
  $items['blogs/%'] = array(
    'page callback' => 'MYMODULE_blog_view', 
    'page arguments' => array(1),
    'access arguments' => array('access content'), 
    'type' => MENU_CALLBACK,
  );

  return $items;
}
function MYMODULE_blog_view($blog_id){
// $node = node_load($blog_id);
// return print_r($node, TRUE);
}
?> 
```

现在，在 MYMODULE_blog_view 函数中，您也可以从 arg(1) 获取参数。您也可以通过组合两个菜单路由器项在单页回调中实现，但我建议使用单独的路由器项。

更新（8 月 8 日）：我之所以使用 node_load($blog_id) 和其他评论垃圾的原因是假设您需要节点中的部分（例如：您想要显示带有节点 ID 参数的视图，或者需要特定的类似内容节点的数据）。但是***永远不要***让用户查看从 node_load() 加载的节点，因为它就像上帝一样给予用户要求的任何东西。

对于节点，让我解释一下噱头。把它放在回调函数中。

```
 $node = node_load($blog_id);
  if ($node && $node->type == 'blog'){
    $_GET['q'] = 'node/' . $node->nid;
    return menu_execute_active_handler('node/' . $node->nid, FALSE);
   }
   drupal_not_found(); // important! 
```

这将从博客 ID（来自 URL）加载节点 ID，检查它是否为“博客”类型并将菜单处理程序设置为相关的节点 ID 路径。现在，当您访问 blog/123 时，如果它是博客节点，您将看到 node/123 的内容。但这不是重定向。它不能作为完全别名的 URL，但有时会很有帮助。

[或者，您可以检查用户是否可以从node_access](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_access/7) ()访问节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:46:40.217

这里有一些链接，您可以阅读有关定义和发送视图参数 [drupal.org/1](http://drupal.org/node/129532)

[drupal.org/2](http://drupal.org/node/70145)

# image - 使用 MATLAB 计算和平均图像中的某些像素

> ID：11831245
> 
> 赞同：1
> 
> 时间：2012-08-06T15:26:25.233
> 
> 标签：image, matlab, image-processing, for-loop, count

我有一张 bmp 格式的图片，大小为 512*512。我想计算值大于 11 的像素数，然后找到这些像素的平均值。这是我的代码。我不知道是什么问题，但像素值的总和是错误的，它总是 255。我尝试了不同的图像。

你能帮我弄清楚吗？

```
A=imread('....bmp');

sum=0; count=0;

for i=1:512    
   for j=1:512
      if (A(i,j)>=11)
        sum=sum+A(i,j);
        count=count+1;
      end
   end
end

disp('Number of pixels grater than or equal to 11')
disp(count)

disp('sum')
disp(sum)

disp('Average')
Avrg=sum/count;
disp(Avrg) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T16:03:14.733

**为什么你的代码不起作用**

很难说，你能用类似的东西显示你的矩阵的一部分和大小吗

```
disp(A(1:10,1:10))
disp(size(A))
% possibly also the min and max...
disp(min(A(:))
disp(max(A(:)) 
```

只是为了确保 的格式`A`如您所愿 -如果图像以彩色读取，或者图像可能在 [0,1] 区间内，则`imread`可能会给您一个矩阵。`512x512x3`

**更好的方法**

一旦你确定矩阵确实是 512x512，并且值大于 11，你最好生成一个掩码，即

```
mask = A > 11;
numabove11 = sum(mask(:));
avabove11 = mean(A(mask)); 
```

同样在您的代码中，您使用`>=`ie 大于或等于，但您说“大于” - 选择您想要的并保持一致。

**解释**

那么这3行有什么作用呢？

1.  生成一个与 where 大小相同的逻辑`A`矩阵`true`，`A > 11`else `false`。
2.  对逻辑矩阵求和，这意味着在`1`处处的求和值`A > 11`，否则为 0（布尔值转换为浮点数以进行求和）。
3.  [使用逻辑索引](http://www.mathworks.com/help/techdoc/math/f1-85462.html#bq7egb6-1)对矩阵 A 进行索引，并取这些值的平均值。

**避免遮蔽内置函数**

在您的代码中使用变量`sum`- 这是不好的做法，因为有一个同名的内置 matlab 函数，如果您使用同名的变量，它将变得不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T07:52:11.777

我也遇到了类似的问题，实际上解决办法在于matlab`A(i,j)`以最大值为255的uint8格式存储，所以，只需更改语句：

```
sum=sum+A(i,j); 
```

到

```
sum=sum+double(A(i,j)); 
```

我希望这有帮助。

# javascript - 为什么modernizr 会在ie7 中检测生成的内容？

> ID：11831248
> 
> 赞同：1
> 
> 时间：2012-08-06T15:26:32.910
> 
> 标签：javascript, css, modernizr

我认为ie7不支持css psudo元素：之前和：之后？那么为什么modernizr 检测到生成的内容== true？

我错过了什么吗？

# c# - UInt 抛出溢出异常

> ID：11831250
> 
> 赞同：1
> 
> 时间：2012-08-06T15:26:39.477
> 
> 标签：c#

在文本框中输入负值时，我收到一条错误消息`Unhandled Exception: System.OverflowException: Value was either too large or too small for a UInt32.`

这是我的代码：

```
 UInt32 n = Convert.ToUInt32(textBox2.Text);    
         if (n > 0)
          //code 
         else
         //code 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T15:28:47.027

发生这种情况是因为`UInt32`未签名。您应该改用`Int32`（未签名）。

所以你的代码应该是这样的：

```
Int32 n = Convert.ToInt32(textBox2.Text);
if (n > 0)
  //code 
else
  //code 
```

但是，我宁愿这样说：

```
int n;
// TryParse method tries parsing and returns true on successful parsing
if (int.TryParse(textBox2.Text, out n))
{
    if (n > 0)
         // code for positive n
    else
         // code for negative n
}
else
     // handle parsing error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:30:29.507

输入负值意味着您正在尝试将负符号值转换为无符号值，这会导致溢出异常。使用 Int32 或检查负数并采取措施防止错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:30:29.830

您不能将负值转换为无符号值。[MSDN](http://msdn.microsoft.com/en-us/library/s1a7zd61.aspx)特别声明你会得到一个例外。而是执行以下操作：

```
Int32 n= Convert.ToInt32(textBox2.Text);
UInt32 m = (UInt32) n; 
```

# sql - 从sql导出到excel

> ID：11831254
> 
> 赞同：2
> 
> 时间：2012-08-06T15:26:50.343
> 
> 标签：sql, excel, csv, export-to-excel, sqlplus

我使用 sqlplus 命令行界面运行查询。该查询将获取大约 3000 万条记录。我需要将结果导出为 csv 或 xls 格式。谁能让我知道这是否可能？任何帮助深表感谢。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:30:21.563

在您的 select 语句之前尝试`spool myresults.csv`，Excel 可以轻松打开该语句。

### 编辑

像这样：

```
SET UNDERLINE OFF
SET COLSEP ','
--That's the separator used by excel later to parse the data to columns
SET LINES 100 PAGES 100
SET FEEDBACK off
--If you don't want column headings in CSV file
SET HEADING off 
Spool ~\myresults.csv
--Now the actual query
SELECT * FROM YOUR_TABLE;
Spool OFF 
```

### 编辑 2

如果您要查询 30M 条记录，您可能需要对结果进行批处理。我从来没有在 excel 文件中走那么远，但限制是 65535 行（对于 30M 记录来说，这将是 458 个文件）。

我会将您的查询切割成 60K 块的块并将每个选择假脱机到不同的 excel 文件，可能通过循环一个整数并将其连接到每个文件名的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T09:55:39.623

```
SET PAGESIZE 50000
SET FEEDBACK OFF
SET MARKUP HTML ON SPOOL ON
SET NUM 24
SPOOL sample.xls
SELECT * from users;
SPOOL OFF
SET MARKUP HTML OFF SPOOL OFF 
```

此选项将帮助您直接导出到 Excel 文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-07T12:07:08.187

```
SET PAGESIZE 40000

SET FEEDBACK OFF

SET MARKUP HTML ON

SET NUM 24

SPOOL file_name.xls

---- Execute your query

SPOOL OFF

SET MARKUP HTML OFF

SPOOL OFF 
```

[将 sqlplus 假脱机为 xls 格式](https://www.orahow.com/2015/09/spool-sqlplus-output-to-excel-format.html)

# java - 在 Java 中覆盖 equals - getClass() 方法

> ID：11831260
> 
> 赞同：2
> 
> 时间：2012-08-06T15:27:24.850
> 
> 标签：java, overriding, equals, equality

在帖子[中，在 Java 中覆盖 equals 和 hashCode 时应该考虑哪些问题？](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)其中一个非常详细地解释了如何在 Java 中使用 getClass 编写适当的相等方法来比较我们相等的两个对象的运行时类型。我知道我们这样做的原因是确保如果 B 扩展 A 我们想要 a.equals(b) = b.equals(a) （自反性）。

在我看来，它确实提供了一个很大的限制。如果你有一个对象 A 的集合，插入几个 B 对象，因为它们是 A 的子类，那么 a.equals(b) 总是错误的......也许，在某些时候，我们应该坚持使用旧的`instanceof`运算符来提供多态性并允许子类型的平等？你怎么认为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:31:08.917

您只需要查看如何重新定义以仅关心接口`java.util`的示例。`.equals()`例如，[`java.util.List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#equals%28java.lang.Object%29)，其中定义了相关特征相等性，并且明确记录了计算哈希码的公式。

所以回答你的问题，是的——在某些情况下忽略子类型是有意义的。但我喜欢 Josh Bloch 的方法，即让接口成为等价的方面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:31:42.240

不一定是这样。例如，如果您查看 JDK 中的集合，它们会使用不那么严格的相等定义。下面的代码两次输出“true”。最后，这是合同和文件的问题。

[`equals`List 中的合同](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#equals%28java.lang.Object%29)（重点是我的）：

> 比较指定对象与此列表是否相等。当且仅当指定对象也是一个列表时返回 true，两个列表具有相同的大小，并且两个列表中所有对应的元素对都相等。（如果 (e1==null ? e2==null : e1.equals(e2)) 两个元素 e1 和 e2 相等。）换句话说，如果两个列表以相同的顺序包含相同的元素，则它们被定义为相等. **此定义确保 equals 方法在 List 接口的不同实现中正常工作。**

请注意，只要**所有**实现的类都`List`遵守该合同，它就不会违反反身性要求。

```
public static void main(String[] args) {
    List<String> list1 = new ArrayList<String>();
    list1.add("a");

    List<String> list2 = new LinkedList<String>();
    list2.add("a");

    List<String> list3 = Arrays.asList("a");

    System.out.println("arraylist = linkedlist? " + list1.equals(list2));
    System.out.println("arraylist = Arrays.aslit? " + list1.equals(list3));
} 
```

# spring - 使用注释按名称自动装配spring bean

> ID：11831261
> 
> 赞同：53
> 
> 时间：2012-08-06T15:27:29.990
> 
> 标签：spring, autowired

在 Springs 最新版本中，我们可以使用注解 as 自动装配 bean `@Autowired`。这将使用 bean 的类型（或构造函数，如果应用于它）自动装配 bean。有什么方法可以使用`@Autowired`基于我们在 Spring 的 XML 文件中没有注释的 bean 名称的注释作为**autowire="byName"**？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-08-06T15:33:10.050

您可以使用：

```
@Autowired
@Qualifier("beanname") 
```

根据[@Qualifier javadoc](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Qualifier.html)

> 自动装配时，可以在字段或参数上使用此注释作为候选 bean 的限定符

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-08-06T15:35:44.587

您可以使用 JSR-250`@Resource`进行按名称 bean 自动装配，除非您需要构造函数注入或多参数方法注入。

从文档：

> 如果您打算通过名称来表达注解驱动的注入，请不要主要使用@Autowired，即使在技术上能够通过@Qualifier 值引用bean 名称。相反，使用 JSR-250 @Resource 注释，它在语义上定义为通过其唯一名称标识特定目标组件，声明的类型与匹配过程无关。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-07T07:00:15.453

如果您想定义将在 DI 容器中注册的 bean 的名称，您可以在注释本身中传递名称，例如**@Service (“employeeManager”)。**

然后使用下面的代码，您可以按名称启用自动装配

```
@Autowired
@Qualifier("employeeManager")
private EmployeeManagerService employeeManagerService; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T14:44:22.233

我正在使用 bean 名称代理，它按名称弄乱了自动装配。@Resource 没有这个问题，因为它不关心类型。所以现在我知道 Spring 开发人员推荐这一建议的一个原因 :-) 仅供参考

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-16T08:29:45.123

在 bean 的 java 类定义中使用 @Component("beanname")

然后在自动装配时使用 JSR 330

@Inject @Named(Value="beanname")

# c# - StringBuilder ReplaceAt 功能

> ID：11831262
> 
> 赞同：0
> 
> 时间：2012-08-06T15:27:36.543
> 
> 标签：c#, stringbuilder

我有一个要多次操作的字符串生成器，我需要用不同长度的字符串替换其中的字符串。

```
sb = new StringBuilder("This has {Count} Values.  Your search was '{SearchText}'.  Did you mean '{DidYouMean}'?")
//get the replacement areas, this would search for the field names within {}
MatchCollection matches = GetReplacementAreas(sb);

int indexOffset=0;
foreach(Match m in matches)
{
   //fields is a dictionary containing keys that match the fields
   sb.ReplaceAt(m.Index,m.Length,fields[m.Value]); 
} 
```

显然 ReplaceAt 不存在。我要自己写了。其他人已经这样做了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:27:36.543

```
public static class StringBuilderExtensions
{
#if EXTENSIONS_SUPPORTED
    public static StringBuilder ReplaceAt(this StringBuilder sb, string value, int index, int count)
    {
        return StringBuilderExtensions.ReplaceAt(sb, value, index, count);
    }
#endif

    public static StringBuilder ReplaceAt(StringBuilder sb, string value, int index, int count)
    {
        if (value == null)
        {
            sb.Remove(index, count);
        }
        else
        {
            int lengthOfValue = value.Length;

            if (lengthOfValue > count)
            {
                string valueToInsert = value.Substring(count);
                sb.Insert(index + count, valueToInsert);
            }
            if (lengthOfValue < count)
            {
                sb.Remove(index + count, lengthOfValue - count);
            }

            char[] valueChars = value.ToCharArray();
            for (int i = 0; i < lengthOfValue; i++)
            {
                sb[index + i] = valueChars[i];
            }
        }

        return sb;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-20T16:54:53.340

为了准确起见，enorl76 答案看起来很有希望，但不适用于 Unicode 字符串，特别是 2 字节宽度的 Unicode 字符。[这是在.Net Fiddle](https://dotnetfiddle.net/y0JdZt)中模拟的 enorl76 答案以供考试。

这是解决此问题的一个实现，[此处](https://dotnetfiddle.net/DdiKZl)为 .Net Fiddle 。

```
using System.Linq;
using System.Diagnostics;
using System;
using System.Text;
using System.Globalization;

//Created for 
//http://metadataconsulting.blogspot.com/2019/03/A-Unicode-ReplaceAt-string-extension-method-handles-Unicode-string-properly.html

public static class Program
{

 const char cEMPTY = '\0'; 
    static readonly string EMPTY = cEMPTY.ToString(); 

    public static string UnicodeReplaceAt(this string str, int offset, char replaceChar)
    {
        int count = 1; //number of times to replace
        string replaceBy = replaceChar.ToString();
        return new StringInfo(str).ReplaceByPosition(replaceBy, offset, count).String;
    }

    public static StringInfo ReplaceByPosition(this StringInfo str, string replaceBy, int offset, int count)
    {
        if (replaceBy != EMPTY)
            return str.RemoveByTextElements(offset, count).InsertByTextElements(offset, replaceBy);
        else
            return str.RemoveByTextElements(offset, count);
    }

    public static StringInfo RemoveByTextElements(this StringInfo str, int offset, int count)
    { 
  //Tue 20-Aug-19 11:32am metadataconsulting.ca - replaceat index > string.len return orginal string
  if (offset > str.LengthInTextElements)
   return str;

        return new StringInfo(string.Concat(
            str.SubstringByTextElements(0, offset),
            offset + count < str.LengthInTextElements
                ? str.SubstringByTextElements(offset + count, str.LengthInTextElements - count - offset)
                : string.Empty
            ));
    }
    public static StringInfo InsertByTextElements(this StringInfo str, int offset, string insertStr)
    {
        //Tue 20-Aug-19 11:32am metadataconsulting.ca - replaceat index > string.len return orginal string
  if (offset > str.LengthInTextElements)
   return str;

  if (string.IsNullOrEmpty(str.String))
            return new StringInfo(insertStr);

        return new StringInfo(string.Concat(
            str.SubstringByTextElements(0, offset),
            insertStr,
            str.LengthInTextElements - offset > 0 ? str.SubstringByTextElements(offset, str.LengthInTextElements - offset) : ""
        ));
    }

    public static string SubsituteStringStringBuilder(this string s, int idx, char replaceChar)
    {
        if (string.IsNullOrEmpty(s) || idx >= s.Length || idx < 0)
            return s;

        return new StringBuilder(s).Remove(idx, 1).Insert(idx, replaceChar.ToString()).ToString();
    }

    public static string ReplaceAtSubstring(this string s, int idx, char replaceChar)
    {
        if (string.IsNullOrEmpty(s) || idx >= s.Length || idx < 0)
            return s;

        return s.Substring(0, idx) + replaceChar.ToString() + s.Substring(idx + replaceChar.ToString().Length, s.Length - (idx + replaceChar.ToString().Length));

    }

    public static string ReplaceAtStringManipulation(this string s, int idx, char replaceChar)
    {
        if (string.IsNullOrEmpty(s) || idx >= s.Length || idx < 0)
            return s;

        return s.Remove(idx, 1).Insert(idx, replaceChar.ToString());
    }

    public static string ReplaceAtLinq(this string value, int index, char newchar)
    {
        if (value.Length <= index)
            return value;
        else
            return string.Concat(value.Select((c, i) => i == index ? newchar : c));
    }

    public static string ReplaceAtCharArray(this string input, uint index, char newChar)
    {
        if (string.IsNullOrEmpty(input) || index >= input.Length)
            return input;

        char[] chars = input.ToCharArray();
        chars[index] = newChar;
        return new string(chars);
    }

    public static void Main()
    {
        //In .NET 4.5 and later also UTF-16 is supported
        //Console.OutputEncoding = System.Text.Encoding.Unicode;  

  //é  Latin Small Letter e with Acute U+00E9 - single byte Unicode character
  // Smiling Face with Smiling Eyes Emoji U+1F60A - double byte Unicode character
  // Multiple Musical Notes Emoji U+1F3B6 - - double byte Unicode character
  // Fire Emoji U+1F525 -- double byte Unicode character

  Console.WriteLine("Unicode String Replace At Issue");
  Console.WriteLine("Lets examine string \"é-\"");  
        Console.WriteLine("é- is length of " + "é-".Length + ", but there are ONLY 4 characters! Why not len=4?"); 
  Console.WriteLine(" are double byte UNICODE characters (> \\u10000) of width or len 2 each ");
  Console.WriteLine("é- below will replace space after lasting character '-' (position 4) with a sub using most common techniques seen online"); 

  Console.WriteLine(); 

  Stopwatch sw = new Stopwatch();
        sw.Start();
        Console.WriteLine("é- using ReplaceAtCharArray".ReplaceAtCharArray(4, 'X'));
        sw.Stop();
        Console.WriteLine("in {0} ticks.", sw.ElapsedTicks.ToString("N0"));

        sw.Restart();
        Console.WriteLine("é- using ReplaceAtLinq".ReplaceAtLinq(4, 'Y'));
        sw.Stop();
        Console.WriteLine("in {0} ticks.", sw.ElapsedTicks.ToString("N0"));

        sw.Restart();
        Console.WriteLine("é- using ReplaceAtStringManipulation".ReplaceAtStringManipulation(4, 'Z'));
        sw.Stop();
        Console.WriteLine("in {0} ticks.", sw.ElapsedTicks.ToString("N0"));

        sw.Restart();
        Console.WriteLine("é- using ReplaceAtSubstring".ReplaceAtSubstring(4, 'A'));
        sw.Stop();
        Console.WriteLine("in {0} ticks.", sw.ElapsedTicks.ToString("N0"));

        sw.Restart();
        Console.WriteLine("é- using SubsituteStringStringBuilder".SubsituteStringStringBuilder(4, 'W'));
        sw.Stop();
        Console.WriteLine("in {0} ticks.", sw.ElapsedTicks.ToString("N0"));

  sw.Restart();
        Console.WriteLine("é- using UnicodeReplaceAt".UnicodeReplaceAt(4, '4'));
        sw.Stop();
        Console.WriteLine("in {0} ticks.", sw.ElapsedTicks.ToString("N0"));

  Console.WriteLine(); 
  Console.WriteLine("UnicodeReplaceAt replaces properly at position 4 in zero based index string");
        Console.WriteLine(); 
  sw.Restart();
        Console.Write("é- using UnicodeReplaceAt(0, '0')".UnicodeReplaceAt(0, '0'));
        sw.Stop();
  Console.WriteLine(" in {0} ticks.", sw.ElapsedTicks.ToString("N0"));
  sw.Restart();
        Console.Write("é- using UnicodeReplaceAt(1, '1')".UnicodeReplaceAt(1, '1'));
        sw.Stop();
  Console.WriteLine(" in {0} ticks.", sw.ElapsedTicks.ToString("N0"));
  sw.Restart();
        Console.Write("é- using UnicodeReplaceAt(2, '2')".UnicodeReplaceAt(2, '2'));
        sw.Stop();
  Console.WriteLine(" in {0} ticks.", sw.ElapsedTicks.ToString("N0"));
  sw.Restart();
        Console.Write("é- using UnicodeReplaceAt(3, '3')".UnicodeReplaceAt(3, '3'));
        sw.Stop();
  Console.WriteLine(" in {0} ticks.", sw.ElapsedTicks.ToString("N0"));
  sw.Restart();
        Console.Write("é- using UnicodeReplaceAt(4, '4')".UnicodeReplaceAt(4, '4'));
        sw.Stop();
        Console.WriteLine(" in {0} ticks.", sw.ElapsedTicks.ToString("N0"));
     Console.Write("é-".UnicodeReplaceAt(5, '5')+" using UnicodeReplaceAt(5, '5') - this is beyond end of string, so return orginal string");
        sw.Stop();
        Console.WriteLine(" in {0} ticks.", sw.ElapsedTicks.ToString("N0"));

  Console.WriteLine(); 
  Console.WriteLine("String.Replace works, but replaces all characters, not at specific location as above functions");
        Console.WriteLine(); 
  Console.Write("é- using String.Replace".Replace("", "+") + "('', '+')");

    }
} 
```

# nservicebus - NServiceBus ConfigureComponent 已过时

> ID：11831265
> 
> 赞同：2
> 
> 时间：2012-08-06T15:27:41.293
> 
> 标签：nservicebus

我们的代码有很多以下内容：

```
EndpointConfig.cs: 
Configure.Instance.Configurer.ConfigureComponent<Foo>(ComponentCallModelEnum.None);
Configure.Instance.Configurer.ConfigureComponent<Bar>(ComponentCallModelEnum.None); 
```

等，这会向编译器发出 ConfigureComponent 方法已过时的警告。

这样做的非过时方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:59:24.233

将 ComponentCallModelEnum 替换为适当的 DependencyLifecycle.X

# html - 在网页的滚动内容中打印页面视图

> ID：11831266
> 
> 赞同：0
> 
> 时间：2012-08-06T15:27:43.343
> 
> 标签：html, printing

我在一个窗格中有一个包含多个滚动幻灯片的页面。每当我尝试打印第二张幻灯片时，它总是会打印用户第一次访问该网站时加载的第一张幻灯片。Javascript 或 JQuery 中是否有任何打印功能，它允许我打印未首先加载的幻灯片，甚至是用户可见的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:32:37.540

你看过`@media print { }`CSS`@media screen { }`吗？

第一个将在打印时执行，第二个将在屏幕上执行。

纯粹作为一个例子...

```
@media print {
   #myDiv { overflow : auto; }
}

@media screen {
   #myDiv { overflow : scroll; }
} 
```

# android - 如何在 Android Root 上使用我的应用程序名称创建文件夹

> ID：11831267
> 
> 赞同：1
> 
> 时间：2012-08-06T15:27:43.640
> 
> 标签：android, file, directory

如何使用我的应用程序名称在 android 内存**而不是 SD 卡**上创建文件夹，并在其上创建文件，如 whatsapp 和 viber 任何想法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:31:54.207

```
File storagePath = new File(Environment.getExternalStorageDirectory()+ "/foldername");
storagePath.mkdirs(); 
```

不要忘记在清单文件中添加权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:40:57.757

您可以使用例如：

```
private MainActivity activity;
[...]
File fileDir = this.activity.getFilesDir(); 
```

我在 AsynTask 中使用了这个解决方案。您还可以使用上下文。

获取文件目录（）

> 返回文件系统上存储使用 openFileOutput(String, int) 创建的文件的目录的绝对路径。
> 
> 返回包含应用程序文件的目录的路径。

# xcode - Xcode：搜索栏结果已加载到搜索数组中但未显示在表格视图中

> ID：11831272
> 
> 赞同：0
> 
> 时间：2012-08-06T15:28:01.833
> 
> 标签：xcode, nsmutablearray, uisearchbar

我在 Xcode 项目中实现了一个搜索栏来过滤核心数据记录。问题是 Seach 接缝工作（搜索数组正确填充，tableview 的行数显示正确）但 Cell 为空。这是我的代码：

h 文件：

```
#import <UIKit/UIKit.h>
#import <CoreData/CoreData.h>

@interface iDataTable : UITableViewController <UISearchBarDelegate, UISearchDisplayDelegate> {
int nonume;
NSString *nume;
NSArray *arrTitle;
}
@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (nonatomic, retain) NSString *nume;
@property (nonatomic) int nonume;
@property (nonatomic, retain) NSMutableArray *arrSearchRes;

@end 
```

.m 文件：

```
#import "iDataTable.h"
#import "AppDelegate.h"

@interface iDataTable ()

@end

@implementation iDataTable
@synthesize fetchedResultsController = __fetchedResultsController;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize nume, nonume;
@synthesize arrSearchRes;

- (void)viewDidLoad{
[super viewDidLoad];

self.arrSearchRes = [NSMutableArray arrayWithCapacity:[[self.fetchedResultsController fetchedObjects] count]];

AppDelegate *appDelegate = 
[[UIApplication sharedApplication] delegate];
NSManagedObjectContext *context = 
[appDelegate managedObjectContext];
NSEntityDescription *entityDesc = 
[NSEntityDescription entityForName:nume                   ///// language
            inManagedObjectContext:context];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDesc];

NSPredicate *pred = 
[NSPredicate predicateWithFormat:@"(nume != '')"];

request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"data" ascending:NO]];

[request setPredicate:pred];
NSError *error;
arrTitle = [context executeFetchRequest:request 
                                  error:&error];

[self.tableView reloadData];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
if (tableView == self.searchDisplayController.searchResultsTableView) {
    return [self.arrSearchRes count];
}
else {
    return [arrTitle count];
             }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell != nil)
{

NSManagedObject* matches = nil;

     if (tableView == self.searchDisplayController.searchResultsTableView) {
        matches = [arrSearchRes objectAtIndex:indexPath.row];  // get search data
    }
    else {
        matches = [arrTitle objectAtIndex:indexPath.row];  // get general data            
    }

UILabel *cellLabel = (UILabel *)[cell viewWithTag:1];
[cellLabel setText:[matches valueForKey:@"nume"]];

}
else {
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
}

return cell;
}

-(void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope {

AppDelegate *appDelegate = 
[[UIApplication sharedApplication] delegate];
NSManagedObjectContext *context = 
[appDelegate managedObjectContext];
NSEntityDescription *entityDesc = 
[NSEntityDescription entityForName:nume                   ///// language
            inManagedObjectContext:context];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDesc];

NSPredicate *pred = 
[NSPredicate predicateWithFormat:@"(nume != %@)", searchText];

request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"data" ascending:NO]];

[self.arrSearchRes removeAllObjects];

[request setPredicate:pred];
NSError *error;

NSArray *arr = [context executeFetchRequest:request error:&error];

self.arrSearchRes = [[NSMutableArray alloc] initWithArray:arr];

NSLog(@"%@, %@", arrSearchRes, searchText); // ok - arrSearchRes looks ok

}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString {
[self filterContentForSearchText:searchString scope:[[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:[self.searchDisplayController.searchBar selectedScopeButtonIndex]]];

return YES;
}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption {
[self filterContentForSearchText:[self.searchDisplayController.searchBar text] scope:[[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:searchOption]];

return YES;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:38:08.487

这对我有用：

```
[self.searchDisplayController.searchResultsTableView reloadData]; 
```

# java - 如何显示执行的命令行程序的输出？

> ID：11831273
> 
> 赞同：0
> 
> 时间：2012-08-06T15:28:04.560
> 
> 标签：java

我有一个命令行 Java 程序，很遗憾由于某些完整性原因我无法修改它，我正在为这个程序提供一个 GUI，我得到了所有内容，除了我无法在程序打印时向用户提供有关进程完成的通知使用 System.out.println() 将数据传输到命令行，我使用 net beans 设计了 ​​UI，它驻留在一个单独的文件中，所以我该怎么做..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:31:29.430

您是否使用[Runtime.exec](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)来执行程序？然后你可以像这样得到输出流：

```
Runtime rt = Runtime.getRuntime();
Process proc = rt.exec("java yourOtherProgram.jar");
InputStream stdin = proc.getInputStream(); 
```

如果您直接调用某个方法，则可以像这样重定向 System.out：

```
PrintStream out = ...;
PrintStream err = ...;

System.setOut(out);
System.setErr(err);

ThatOtherProgram foo = new ThatOtherProgram();
foo.main(new String[0]); 
```

**编辑**

然后，您可以使用[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)扫描输入并对其进行处理。

# model-view-controller - 在淘汰赛中映射复杂的 MVC ViewModel

> ID：11831280
> 
> 赞同：0
> 
> 时间：2012-08-06T15:28:34.580
> 
> 标签：model-view-controller, knockout.js, knockout-mapping-plugin

我有一个包含 observables 和 observablearrays 的 MVC 视图。映射的正确方法是什么？

我的 MVC ViewModel 与此类似：

```
public class CategorysEditViewModel
{
    public Category Categorys { get; set; }
    public IEnumerable<Expert> candidates { get; set; }
    public IEnumerable<Expert> experts { get; set; }
}

public class Category
{
    public int CategoryID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public string Policy { get; set; }
}

public class Expert
{
    public int ExpertID { get; set; }
    public int CategoryID { get; set; }
    public string Name { get; set; }
    public string ExpertGUID { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T18:19:33.477

假设 cshtml 文件对 CategorysEditViewModel 进行了强类型化，您可以将视图模型对象序列化为 JSON，然后使用 ko.mapping 工具将其映射到敲除视图模型。

查看这篇文章：[将 Mvc 模型传递给 KnockoutJS 的最佳实践](https://stackoverflow.com/questions/11628938/best-practice-on-passing-mvc-model-to-knockoutjs/11636746#11636746)

# eclipse-emf - Acceleo 调用包装 OCLHelper 的 Java 服务

> ID：11831282
> 
> 赞同：1
> 
> 时间：2012-08-06T15:28:40.400
> 
> 标签：eclipse-emf, acceleo, ocl

我需要从导航主 UML 模型的 ACCELEO 脚本中获取包含在 UML 边缘中的条件的 OCL 模型。为此，我定义了以下 Java 类：

```
public class GetOCLModel {
public Constraint getOCLModel(Classifier context, String expression){

    OCL<Package, Classifier, Operation, Property, EnumerationLiteral, Parameter, 
    State, CallOperationAction, SendSignalAction, Constraint, Class, EObject> ocl;
    //CL.newInstance(EcoreEnvironmentFactory.INSTANCE);
    UMLEnvironmentFactory uef = new UMLEnvironmentFactory();
    ocl = OCL.newInstance(uef.createEnvironment());
    OCLHelper<Classifier, Operation, Property, Constraint> helper = ocl.createOCLHelper();
    helper.setContext(context);
    Constraint expr= null;
    try {
        expr= (Constraint) helper.createInvariant(expression);
        System.out.println("Hunky Dory!");

    } catch (ParserException e) {
        e.printStackTrace();
    }
    return expr;
} 
```

}

这是包装它的 ACCELEO 模块：

```
[module     generateOclModel('http://www.eclipse.org/ocl/1.1.0/UML','http://www.eclipse.org/uml2/2.1.0/UML')/]

[query public getOclModel(cl:Classifier, str:String): Constraint = invoke('sfg.baleno.src.services.GetOCLModel',
                      'getOCLModel(org.eclipse.uml2.uml.Classifier, java.lang.String)',Sequence{cl,str}) /] 
```

以下是我尝试从主 ACCELEO 模块调用它的方式：

```
[c.getOclModel('self.name=\'Testclass\'')._context.name/] 
```

它不起作用，我不明白为什么，知道吗？

**更新**

我意识到助手实际上是在输出这个异常

```
 org.eclipse.ocl.SemanticException: Unrecognized variable: (name) 
```

我究竟做错了什么？

# c++ - 枚举值（int）到类型的动态映射

> ID：11831284
> 
> 赞同：4
> 
> 时间：2012-08-06T15:28:47.370
> 
> 标签：c++, enums, mapping

看来这个问题在我们的工作中很常见。

我们通过网络发送一个 int 或 enum 值，然后我们收到它，我们想创建/调用一个特定的对象/函数。

最简单的解决方案是使用 switch 语句，如下所示：

```
switch (value) {
    case FANCY_TYPE_VALUE: return new FancyType();
} 
```

它工作得很好，但是我们会有很多这样的开关块，当我们创建新的值和类型时，我们需要改变所有这些。这似乎是对的。

其他可能性是使用模板。但我们不能，因为枚举的值是在运行时定义的。

是否有任何正确的设计模式或任何正确的方法？

在日常编码中，这似乎是一个非常普遍和常见的问题......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T15:33:50.913

试试地图：

```
struct Base { };
struct Der1 : Base { static Base * create() { return new Der1; } };
struct Der2 : Base { static Base * create() { return new Der2; } };
struct Der3 : Base { static Base * create() { return new Der3; } };

std::map<int, Base * (*)()> creators;

creators[12] = &Der1::create;
creators[29] = &Der2::create;
creators[85] = &Der3::create;

Base * p = creators[get_id_from_network()](); 
```

（这当然很粗略；至少你会有错误检查，以及每类自注册方案，这样你就不会忘记注册一个类。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T15:43:36.013

一种选择是维护可以创建具体类型的创建者字典（具有相同的接口）。现在，创建代码将在字典中搜索一个 int 值（来自客户端发送的枚举）并调用 create 方法，该方法通过基类指针返回具体对象。

字典可以在一个地方初始化，具体创建者对应于每个可能的枚举值。

这里的问题是，当您添加新类型的对象时，您必须扩展此字典初始化代码。一种避免的方法如下。

1.  让创建者寻找一个单例工厂实例，并在构造函数中注册自己，使用它可以创建具体对象的类型 enums(integers)。
2.  为一个/一组创建者创建一个 DLL，并拥有一个创建者的全局实例。
3.  DLL 的名称可以输入到一个配置文件中，该文件由工厂在初始化时读取。工厂加载此文件中的所有 DLL，这导致创建向工厂注册自身的静态对象。
4.  现在，工厂拥有了它可以使用具体对象创建者创建的所有类型枚举的映射。
5.  实现相同的对象创建者查找机制来创建对象。

现在，工厂根本不需要扩展，因为步骤 3,4 和 5 不会因为引入的新对象而改变。步骤 1 可以在一个地方实施。

您唯一需要做的就是为每个应该存在的新具体类型添加一个全局对象，因为 C++ 本身不支持反射。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T18:32:09.420

您实际上可以使用一些模板技巧来做到这一点：

```
#include <map>

template <typename Enum, typename Base>
class EnumFactory {
  public:
    static Base* create(Enum e) {
      typename std::map<Enum,EnumFactory<Enum,Base>*>::const_iterator const it = lookup().find(e);
      if (it == lookup().end())
        return 0;
      return it->second->create();
    }
  protected:
    static std::map<Enum,EnumFactory<Enum,Base>*>& lookup() {
      static std::map<Enum,EnumFactory<Enum,Base>*> l;
      return l;
    }
  private:
    virtual Base* create() = 0;
};

template <typename Enum, typename Base, typename Der>
class EnumFactoryImpl : public EnumFactory<Enum,Base> {
  public:
    EnumFactoryImpl(Enum key)
      : position(this->lookup().insert(std::make_pair<Enum,EnumFactory<Enum,Base>*>(key,this)).first) {
    }
    ~EnumFactoryImpl() {
      this->lookup().erase(position);
    }
  private:
    virtual Base* create() {
      return new Der();
    }
    typename std::map<Enum,EnumFactory<Enum,Base>*>::iterator position;
}; 
```

这允许您从给定创建一个新的派生对象`enum`，通过说

```
// will create a new `FancyType` object if `value` evaluates to `FANCY_TYPE_VALUE` at runtime
EnumFactory<MyEnum,MyBase>::create(value) 
```

但是，您必须有一些 EnumFactoryImpl 对象，这些对象在某些函数或命名空间中可能是静态的。

```
namespace {
  EnumFactoryImpl<MyEnum,MyBase,Derived1> const fi1(ENUM_VALUE_1);
  EnumFactoryImpl<MyEnum,MyBase,Derived2> const fi2(ENUM_VALUE_2);
  EnumFactoryImpl<MyEnum,MyBase,Derived3> const fi3(ENUM_VALUE_3);
  EnumFactoryImpl<MyEnum,MyBase,FancyType> const fi1(FANCY_TYPE_VALUE); // your example
} 
```

这些行是源代码将`enum`值映射到派生类型的单点。因此，您将所有内容都放在同一个位置，并且没有冗余（这消除了在添加新派生类型时忘记在*某些地方更改它的问题）。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T09:12:21.950

kogut，我不建议将其作为答案，但是由于您要求我扩展我对原始问题的评论，因此这里是.net 环境为您提供的内容的非常简短的摘要...

```
public enum MyEnum
{
    [MyAttribute(typeof(ClassNone))]
    None,
    [MyAttribute(typeof(ClassOne))]
    One,
    [MyAttribute(typeof(ClassTwo))]
    Two,
    [MyAttribute(typeof(ClassThree))]
    Three
} 
```

所以你有你的基本枚举一、二、三等，它的工作原理就像....呃....一个枚举！

但是您还编写了一个名为 MyAttribute 的类（事实上，要了解这方面的更多信息，只需搜索 Attributes）。但是正如您所看到的，这允许您在设计时说，某某枚举值与某某类相关联。

此信息存储在枚举的元数据中（托管环境的值！），并且可以在运行时查询（使用反射）。不用说这非常强大，我已经使用这种机制系统地删除了您问题的其他答案中提出的那种地图的负载。

有用性的一个例子是……在我与之合作的一个客户中，约定是将状态作为字符串存储在数据库中，因为它们对于需要运行表查询的人来说更具可读性。但这在应用程序中毫无意义，其中状态作为枚举推送。采用上述方法（使用字符串而不是类型），当数据被读取和写入时，这种转换发生在一行代码中。另外，当然，一旦您定义了 MyAttribute，它就可以被标记到您喜欢的任何枚举上。

如果这些天我选择的语言是 c#，但这在（托管）c++ 中也很好。

# java - 如何确定以前使用 JAXB 解组的数据已更改？

> ID：11831286
> 
> 赞同：0
> 
> 时间：2012-08-06T15:28:51.600
> 
> 标签：java, jaxb, marshalling, unmarshalling

如果用户更改了先前未编组的数据，我只想使用 JAXB 将数据编组到文件中。我知道 JAXB 生成的类没有`equals()`方法。有没有简单的方法来确定解组后数据是否已更改？

例如，有用于此目的`org.w3c.dom.Document`的`isEqualNode()`方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:53:14.287

因此，JAXB 不会生成类，它会从类的实例中编组数据或通过解组 xml 来填充实例。通常这些类是在 XJC 编译之前生成的。一种选择是更新类以包含 equals 方法。这不是一个好主意，因为您通常不想更新生成的代码，以防以后需要重新生成。因此，您可以编写一个实用程序类，该类接受两个类的实例并比较它们。

这是为了在解组后进行比较。另一种选择是在解组之前通过对文件进行校验和来执行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:04:48.773

最好的可能是实现比较器或实用程序类来检查相等性。例如，您可以依赖 commons-lang [EqualsBuilder](http://commons.apache.org/lang/api/org/apache/commons/lang3/builder/EqualsBuilder.html)和[CompareToBuilder](http://commons.apache.org/lang/api/org/apache/commons/lang3/builder/CompareToBuilder.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:40:54.797

一种相当标准的方法是将 a 添加`transient boolean`到类中`isDirty`，然后您的 setter 方法会将其设置为 true。（或者，如果您愿意，可以添加一个`dateModified`）

显然，这需要更改您可能不合适的内部类代码。

您还可以保留`Set`所有已修改的对象中的一些。但是，根据代码的组织方式，使这个逻辑正确也可能很棘手或不可能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T23:10:48.290

您可以使用 JAXB2 Basics Plug-in 在模型类中生成 equals 方法：

*   [http://confluence.highsource.org/display/J2B/JAXB2+Basics+Plugins](http://confluence.highsource.org/display/J2B/JAXB2+Basics+Plugins)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T06:52:16.853

我决定编组到 org.w3c.dom.Document 并使用它的 isEqualNode() 方法。如果原始文档与新文档不同，那么我会编组到一个文件。因为我没有太多的 XML 数据，所以它对我有用。

# java - 如何使用android中的共享首选项在editText中保存数据

> ID：11831287
> 
> 赞同：1
> 
> 时间：2012-08-06T15:28:51.847
> 
> 标签：java, android

我有简单的editText，用户在其中输入数字或字符串。当用户再次进入应用程序时，我想保留该数字或字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:40:24.977

1.先保存成`preference`这样

```
 SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        SharedPreferences.Editor prefsEditor = myPrefs.edit();
        prefsEditor.putString(MY_NAME, edittext.getText().toString());
        prefsEditor.putString(MY_WALLPAPER, "f664.PNG");
        prefsEditor.commit(); 
```

2.现在第二次你会通过每当你使用这个

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        String prefName = myPrefs.getString(MY_NAME, 0);
        String wallPaper = myPrefs.getString(MY_WALLPAPER, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:38:52.127

看起来你可以做类似的事情：[Counting Chars in EditText Changed Listener](https://stackoverflow.com/questions/4310525/android-on-edittext-changed-listener)

然后，一旦您检测到文本已更改，您可以将其保存到您的`SharedPreferences`.

或者，如果您只想在用户离开/进入应用程序时保留，那么您可以覆盖`onPause()`Activity 的方法以保存到您的`SharedPreferences`. 只需使用`<EditText>.getText()`输入字符串然后保存即可。在进入您的应用程序时覆盖`onResume()`并使用它来恢复它。`<EditText>.setText(<String from SharedPreference>)`

我假设您知道如何使用 SharedPreferences，但如果您不知道，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:40:24.200

当用户使用 OnFocusChangeListener 从 EditText 框中移除焦点时，此代码将保留数据；

```
EditText userInput = (EditText)findViewById(R.id.ID_HERE);
SharedPreferences pref = this.getPreferences(this.MODE_PRIVATE);

String data_key = "data";

View.OnFocusChangeListener persistData = new View.OnFocusChangeListener(){

    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        // TODO Auto-generated method stub
        if(!hasFocus){
            EditText e = (EditText)v;
            SharedPreferences.Editor edit = pref.edit();
            edit.putString(data_key,e.getText().toString());
            edit.commit();
        }
    }

};

userInput.setOnFocusChangeListener(persistData); 
```

# batch-file - 禁止bat文件自动输入

> ID：11831289
> 
> 赞同：0
> 
> 时间：2012-08-06T15:28:58.113
> 
> 标签：batch-file

我正在使用[此处](https://stackoverflow.com/questions/3018289/xcopy-file-rename-suppress-does-xxx-specify-a-file-name-message)`echo f | xcopy /f /y srcfile destfile`找到的命令，它工作得很好，但它仍然出现。 我尝试过预先设置并完全抑制它，但这产生了不希望的结果。我确实需要使用 xcopy 并且确实需要指定目标文件名。
`1>nul``2>nul`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:05:09.913

尝试使用

```
@echo off
echo f | xcopy /f /y srcfile destfile >nul 
```

# php - 如何在 wordpress 钩子中调用带有参数的回调方法？

> ID：11831291
> 
> 赞同：0
> 
> 时间：2012-08-06T15:29:00.643
> 
> 标签：php, wordpress

我希望能够使用带有`hook`.

我已经实现了以下脚本，但它仍然无法工作：

```
class media{
    public function loadScripts($scripts){var_dump($scripts);
        foreach($scripts as $script){var_dump($script);
            wp_enqueue_script( $script['name'], plugins_url().$script['path'] ); 
        }
    }

    public function loadStyles($styles){
        foreach($styles as $style){
            wp_register_style($style['name'], plugins_url().$style['path']);
            wp_enqueue_style($style['name'], plugins_url().$style['path']);
        }
    }
}

$media = new media();
$scripts = array(
    array('name' => 'jquery1', 'path' => '/content-type/js/jquery.min.js'),
    array('name' => 'videos_js', 'path' => '/content-type/js/videos.js')
);

add_action('wp_print_scripts', 'loadScripts',10,1);
do_action('wp_print_scripts',$scripts); 
```

我该如何解决 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:35:21.597

尝试这个

```
 add_action('wp_print_scripts', array('media','loadScripts'),10,1); 
```

# macos - OS X 终端文本堆叠在自身之上

> ID：11831296
> 
> 赞同：46
> 
> 时间：2012-08-06T15:29:11.873
> 
> 标签：macos, terminal, osx-lion

我在 Mac OS X Lion 的终端应用程序中遇到了一个奇怪的问题。当我输入一长行文本时，它应该在到达终端窗口的边缘时换行到下一行，它会继续在其上一行的文本顶部键入。

**以下是一些屏幕截图以帮助说明问题：**

**在我的文字到达窗口边缘之前：**

![前](../Images/6933cfb44eac608f5c3d6f8bf574a0e6.png)

**文本到达窗口边缘后：**

![后](../Images/8e356e6d96ee6f430dcaa8a6fbd9c0a1.png)

我还提供了我的文本和窗口设置的屏幕截图，以备不时之需。

**文字设置：**

![文本](../Images/132c2ddaf8c32a2da24cb574ff06f587.png)

**窗口设置：**

![窗户](../Images/15e526c343f3a14343b47c19893df951.png)

提前感谢您提供的任何帮助。我有这个问题有一段时间了，只是从来没有解决过。当我遇到需要大 grep 命令和长路径名的事情时，它现在真的变得很痛苦。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-06T17:18:27.027

`PS1`环境变量决定了 shell 的提示符是什么样的。`man bash`提供完整的文档。（实际上有几个，用于不同的模式）。

有许多文件可以设置它，通常是`~/.profile`、或.`~/.bashrc``/etc/profile``/etc/bashrc`

如果您要在其中包含颜色代码或其他控制序列，则必须正确地将它们包装起来（`\[`而`\]`不是包装普通文本），否则行编辑可能会像您的情况一样混乱。我建议重置`PS1`为默认值，然后仔细逐项添加着色。

例如：

```
PS1='\[\033[1m\033[32m\]\u@\h \w\[\033[0m\]\$ '
       ^^^^^^^^^^^^^^^            ^^^^^^^ 
```

着色命令带有下划线。注意它们是如何被包围的`\[ \]`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-11T10:53:48.627

我有同样的问题，我发现如果你改变

高级 >**仿真**> 将终端声明为：ANSI。

**这解决了彩色 PS1 问题。使用 Mac 终端**

**但是**会产生一种奇怪的行为：我找到了@koiyu 答案的解决方案。

[https://apple.stackexchange.com/questions/37001/strange-behavior-in-terminal-with-custom-bash-profile/37036#37036](https://apple.stackexchange.com/questions/37001/strange-behavior-in-terminal-with-custom-bash-profile/37036#37036)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-13T16:38:42.693

由于不正确地使用颜色代码，我曾经遇到过同样的问题。这是我的PS1，它解决了这个问题。此外，如果您使用 GIT，那么这也有助于显示您正在处理的 git 分支以及您的工作树是否脏。把它放在你的 .profile 或 .bash_profile

```
# Git branch in prompt.
parse_git_branch() {
    git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'
}

parse_git_dirty() {
    st=$(git status 2>/dev/null | tail -n 1)
    if [[ $st == "" ]]; then
        echo ''
    elif [[ $st == "nothing to commit (working directory clean)" ]]; then
        echo ''
    elif [[ $st == 'nothing added to commit but untracked files present (use "git add" to track)' ]]; then
        echo '?'
    else
        echo '*'
    fi
}

# coloring the terminal comman line
SB_GREEN="\[\033[1;32m\]"
SB_BLUE="\[\033[1;34m\]"
SB_RED="\[\033[1;31m\]"
SB_NOCOLOR="\[\033[0m\]"
export PS1="$SB_GREEN\u@\h$SB_NOCOLOR: $SB_BLUE\w$SB_GREEN\$(parse_git_branch)$SB_RED\$(parse_git_dirty)$SB_NOCOLOR $ " 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T17:15:52.123

[在hamstergene](https://stackoverflow.com/users/544621/hamstergene)的指导下，我能够弄清楚如何让它发挥得更好。使用[这个 Geek Stuff 指南](http://www.thegeekstuff.com/2008/09/bash-shell-ps1-10-examples-to-make-your-linux-prompt-like-angelina-jolie/)和[这个 It's Me Tommy 教程](http://itsmetommy.com/2011/02/09/mac-changing-your-shell-prompt/)，我能够定义我希望我的 PS1 文本如何显示。将其更改为更简化的内容消除了我遇到的奇怪的重叠文本问题。

**前：**

![前](../Images/6933cfb44eac608f5c3d6f8bf574a0e6.png)

**后：**

![后](../Images/ec0a0c3baa7309813e862f9596e5f14f.png)

我只是编辑了我的`.bash_profile`并添加了以下行：

```
export PS1="[\u@\h] > "; 
```

然后我去改变了窗户的颜色，因为我可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-11T19:44:00.557

最初的问题是 PS1 中有一条新线（仅供参考）

通常它不正确地转义颜色代码，但如果不是这样，你的 ps1 中有一个新行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-08T19:11:20.900

正如其他人所说，您必须将颜色命令正确包装在转义方括号中。然而，对我来说，这让字符串看起来非常非常令人困惑！

因此，这是我用来始终正确并使其更具可读性的技巧。

我首先创建了一个`setColor`这样的shell函数......

```
setColor(){
    echo "\[\033[${1}m\]"
} 
```

然后我像这样使用它...

```
PS1="$(setColor 92)\u$(setColor 37):$(setColor 96)\w $(setColor)\$ " 
```

这和写这篇文章是一样的……

```
\[\033[92m\]\u\[\033[37m\]:\[\033[96m\]\w \[\033[m\]$ 
```

...但正如您所看到的，前者更清晰，并且还保证一切都正确逃脱。

请注意，您也可以使用`;`字符指定多种颜色。唯一的事情是你必须明确地逃避它，所以`92;41`变成了`92\;41`，就像这样......

```
PS1="$(setColor 92\;41)\u$(setColor 37):$(setColor 96)\w $(setColor)\$ " 
```

同样，仍然比这更容易阅读......

```
\[\033[92;41m\]\u\[\033[37m\]:\[\033[96m\]\w \[\033[m\]$ 
```

您可以通过定义颜色的常量，甚至使用您最常用的颜色名称的“包装器”函数来更进一步，这样您就可以编写这个......

```
PS1="$(setRed)\u$(setBlue):$(setGreen)\w $(resetColor)\$ " 
```

希望这可以帮助！

# delphi - 如何在 Delphi XE2/Firemonkey 中获取 ChromiumEmbedded 浏览器的截图？

> ID：11831297
> 
> 赞同：4
> 
> 时间：2012-08-06T15:29:12.870
> 
> 标签：delphi, chromium, firemonkey

已尝试从 ChromiumEmbedded 浏览器获取 Delphi XE2/Firemonkey 的屏幕截图，但 ChromiumFMX.MakeScreenshot 方法仅返回空位图。

有人知道如何获取位图吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T22:25:00.063

相反，请使用以下内容（确保`YourBitmap`在此调用之前实例化）：

```
CefGetBitmap(ChromiumFMX.Browser, PET_VIEW, YourBitmap); 
```

# jmeter - Jmeter方法“补丁”

> ID：11831298
> 
> 赞同：2
> 
> 时间：2012-08-06T15:29:16.287
> 
> 标签：jmeter, httpverbs

我正在对 API 进行负载测试，其中我们使用的动词之一是[PATCH](https://www.rfc-editor.org/rfc/rfc5789)。在 JMeter 中，当我创建我的 HTTP 请求时，我没有列出补丁作为方法。谁能告诉我 JMeter 是否支持 PATCH？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:39:28.717

从 JMeter 2.7 开始不支持任何补丁。

看：

*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=53675](https://issues.apache.org/bugzilla/show_bug.cgi?id=53675)

它已在今晚（08/23/2012）实施，因此现在可以在夜间构建中使用：

*   [https://builds.apache.org/job/JMeter-trunk/build?token=OnDemand](https://builds.apache.org/job/JMeter-trunk/build?token=OnDemand)

随意测试它并就 jmeter 用户列表或 bugzilla 提供反馈。编辑（2012 年 10 月 6 日）：它在 Jmeter 2.8 版本中正式可用，现已推出：

*   [http://jmeter.apache.org/changes.html](http://jmeter.apache.org/changes.html)

问候

菲利普·M。

[http://www.ubik-ingenierie.com](http://www.ubik-ingenierie.com)

# php - 有没有办法在加载按钮时将 button() jquery ui 函数应用于按钮？

> ID：11831300
> 
> 赞同：0
> 
> 时间：2012-08-06T15:29:22.470
> 
> 标签：php, javascript, jquery, jquery-ui

基本上。我有一个发布到 php 脚本的 javascript 循环。将响应附加到日志中的 DIV。响应里面有一个按钮。问题是，当做出并附加新的响应时，jquery 按钮功能会使所有先前附加的按钮变大。（可能是因为它在相同的 DIV 元素上再次调用 jquery button() 函数。）

有没有办法在加载按钮时将 button() jquery ui 函数应用于按钮？（而不是将其应用于具有相同名称的每个元素？）

这个 php 与下面的非常相似（但它被缩短了。）只是为了让您了解 php 脚本的作用。

```
<?php

    echo "<script type='text/javascript'>
        function addButton(x) {
            x = this;
            $(x).button({            
                icons: {                
                    primary: 'ui-icon-alert'                    
                }
            });
        }
        </script><div id='chat_wrap' class='message".$id."' hidden='true'>";

if ($query_run = mysql_query($finalchatq)) {
    if (mysql_num_rows(mysql_query($finalchatq)) > 0) {
        $counter = 0;
        $amount = array();
        while ($query_rows = mysql_fetch_assoc($query_run)) {
            $time1 = $query_rows['time'];
            $time2 = substr_replace($time1, " : ", 10, 1);
            $time = str_ireplace('.', '/', $time2);
            $text = str_ireplace('removem', '', $query_rows['text']);
            $id = $query_rows['id'];

            if($query_rows['type']=='notice') {

            echo "<div  selectable='false'><div id='date'><div id='notice'>NOTICE:</div>Sent At: ".$time."</div><div id='Nchat_message'><div id='chat_text'>".$text."</div><img id='charhead' src='camperhead.php?id=".$query_rows['who']."' id='charhead'></img></div>";
            echo "<div id='controls'>";

            if(userIsA('admin')||userIsA('mod')) {
                echo "<input hidden='hidden' name='idtodel' value='".$id."'></input><input type='button' value='DELETE' id='delete_button'></input>";
            } else {

            }

            echo "</div></div></div><br/><br/>";         
        }
        if($query_rows['type']=='normal'){      
            echo "<div selectable='false'><div id='date'><div id='by'>".getUserFieldById($query_rows['who'], 'camper_name').":</div>Sent At: ".$time."</div><div id='chat_message'><div id='chat_text'>".$text."</div><img id='charhead' src='camperhead.php?id=".$query_rows['who']."' id='charhead'></img>";
            echo "<div id='controls'>";

            if(userIsA('admn')||userIsA('md')) {
                echo "<button id='delete_button' class='dpp2'  onclick='delCom(".$id.")'>Delete</button>";
            } else {
                echo "<button id='report_button' onload='addButton(this)' onclick='reportCom(".$id.")'>REPORT</button>";
            }
    echo "</div></div></div></div></div><br/><br/>";
        }
    }
    echo "</div>";
}
}
}

?> 
```

我希望我的问题已经足够清楚了，如果您有任何疑问，请发表评论，我会尽快回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:04:27.463

[在创建http://api.jquery.com/on/](http://api.jquery.com/on/)时尝试使用 jQuery 中的 .on() 函数来定义它

# event-handling - Chrome 扩展 - 事件监听器的重复？

> ID：11831302
> 
> 赞同：2
> 
> 时间：2012-08-06T15:29:24.700
> 
> 标签：event-handling, google-chrome-extension

**介绍**

我的 Chrome 扩展程序有问题。它应该显示一个小的覆盖弹出窗口（在 jQuery 中创建），其中包含基于您的文本选择的来自谷歌的搜索结果。基本上，您应该能够突出显示任何页面上的文本，右键单击它（上下文菜单），单击“搜索'选定的关键字'”，然后在同一选项卡中弹出一个小窗口作为覆盖所有搜索结果来自谷歌或其他搜索引擎。

**问题**

现在扩展程序运行得非常好并且没有问题，但是在广泛使用此扩展程序（假设 1 小时）之后，当我将突出显示另一个关键字并搜索它时，扩展程序记住最后一个关键字并显示错误的搜索结果。再说一次，当我突出显示另一个关键字时，它会记住我刚刚突出显示但以前没有得到结果的关键字。这就像一个链接过程，我总是落后一个关键字。

**我的想法**

我认为这个问题的原因可能是事件监听器，因为当这个问题发生时，我有一个来自 console.log(chrome.extension.onRequest.hasListeners()); 的日志。这说的是真的。这意味着附加了 2 个或更多事件侦听器，它们不应该，因为我正在通过 chrome.extension.onRequest.removeListener(listener1); 删除它们；

也许它发生在实际网页仍在加载并且我正在突出显示关键字，单击上下文菜单和扩展无法加载但不知何故事件监听器触发......我真的无法完全复制这个问题......和是什么导致了这个问题。

**清单文件**

```
{
  "name": "Search Accelerator",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Search Accelerator extension",
  "icons": {
    "16": "icon19.png",
    "48": "icon48.png",
    "128": "icon128.png"
  },
  "background": {
    "scripts": ["content_script.js"]
  },
  "minimum_chrome_version": "18",
  "permissions": [
    "contextMenus",
    "tabs",
    "http://*/*",
    "https://*/*",
    "management",
    "webRequest"
  ]
} 
```

**内容脚本**

> chrome.contextMenus.create({ "title": '搜索 "%s"',
> "contexts":['selection'], "onclick": getClickHandler() });
> 
> function getClickHandler() { return function(info, tab) {
> console.log(chrome.extension.onRequest.hasListeners());
> 
> ```
> chrome.extension.onRequest.addListener(function listener1 (request, sender, sendResponse) {
>   var url = "http://www.google.com/?s=" + info.selectionText;
>   console.log(url);       var keywordObj = {keyword: url};
>   if (request.keywordRequest == "Yes") {
>     console.log(keywordObj);
>     sendResponse(keywordObj);
>   };
>   chrome.extension.onRequest.removeListener(listener1);     }     );
> 
> chrome.tabs.executeScript(null, { file: "jquery.js" }, function() {
> chrome.tabs.executeScript(null, { file: "popup.js" });
> });   }; }; 
> ```

**弹出js**

```
chrome.extension.sendRequest({keywordRequest: "Yes"}, function(response) {
$(document).ready(function() {
    if($("#e14_accelerator")) {
        $("#e14_accelerator").remove();
    }
    var rkeyword = response.keyword;

    $("body").append("<div id=\"e14_accelerator\" style=\"position: fixed;top: 30px;right: -330px;z-index: 999999; \"><iframe style=\"border:5px solid #c9c9c9;-webkit-box-shadow: 1px 1px 15px 1px rgba(0, 0, 0, 0.2);\" src=\""+ rkeyword +"\" width=\"328\" height=\"240\"></iframe></div>");
    $("#e14_accelerator").animate({right:-13},500);

    $(document).click(function() {
            $("#e14_accelerator").remove();
    });
    $("#e14_accelerator").click(function() {
        return false;
    });
 });
}); 
```

**出现此问题时出现的错误消息：**

```
Error during tabs.executeScript: Cannot access contents of url "chrome-devtools://devtools/devtools.html?docked=true&dockSide=bottom&toolbarColor=rgba(230,230,230,1)&textColor=rgba(0,0,0,1)". Extension manifest must request permission to access this host. sendRequest:21
chromeHidden.handleResponse sendRequest:21
Error during tabs.executeScript: Cannot access contents of url "chrome-devtools://devtools/devtools.html?docked=true&dockSide=bottom&toolbarColor=rgba(230,230,230,1)&textColor=rgba(0,0,0,1)". Extension manifest must request permission to access this host. sendRequest:21
chromeHidden.handleResponse 
```

# windows - 如何从 Windows 的命令行暂停/恢复正在运行的程序？

> ID：11831308
> 
> 赞同：2
> 
> 时间：2012-08-06T15:29:52.027
> 
> 标签：windows, operating-system, mingw, process

我正在尝试使用 Windows 7 中的操作系统命令脚本暂停正在运行的程序。

在搜索 StackOverflow/Search-Engines 之后，似乎大多数建议都涉及使用 sysinternals 进程浏览器，其中可以使用鼠标轻松暂停和恢复程序。但是，我想使用命令行来做同样的事情，但不知道怎么做。

谁能告诉我如何从命令行暂停/恢复程序？

笔记。我正在使用 Windows 7 和 MinGW。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T15:33:13.760

查看 SysInternals PsSuspend：
[https ://docs.microsoft.com/en-us/sysinternals/downloads/pssuspend](https://docs.microsoft.com/en-us/sysinternals/downloads/pssuspend)

要暂停，请使用它。

```
PsSuspend ProcessImageName.exe 
```

要恢复该过程，请使用此命令。

```
PsSuspend -r ProcessImageName.exe 
```

# c# - 将项目添加到天蓝色表期间的高延迟

> ID：11831310
> 
> 赞同：0
> 
> 时间：2012-08-06T15:29:56.603
> 
> 标签：c#, azure, task, task-parallel-library, azure-table-storage

使用以下代码，我尝试将实体插入到 azure 表中。

```
 public void AddItems<T>(T[] entitis, string tableName) where T : TableServiceEntity
    {
        using (new TimeLogger(_logger, "save items in table " + tableName + ", count: " + entitis.Length + ", duration: {0}"))
        {
            tableName = GetSafeTableName(tableName);
            var items = RemoveDuplicates(entitis).ToArray();

            var tasks = new List<Task>();

            var context = _tableStorage.GetDataServiceContext();

            for (int i = 0; i < items.Length; i++)
            {
                context.AttachTo(tableName, items[i]);
                context.UpdateObject(items[i]);

                if (i % 10 == 0 || i == items.Length - 1)
                {
                    var context1 = context;

                    var task = Task.Factory.FromAsync<DataServiceResponse>(
                        context1.BeginSaveChangesWithRetries,
                        context1.EndSaveChangesWithRetries,
                        context1);

                    tasks.Add(task);

                    context = _tableStorage.GetDataServiceContext();
                }
            }

            Task.WaitAll(tasks.ToArray());
        }
    } 
```

此方法的调用者在多个分区中传递项目。在我的测试中，我发现不同分区中的 450 个项目大约有 7 到 8 秒的延迟。我认为我在这里做错了什么。任何评论都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:06:39.790

一定有什么事情发生。我已经运行测试，在 5 秒内插入 2000 个实体，完全没有问题。

正如@smarx 已经提到的，您可以设置一些影响性能的网络参数。所有这些都有/曾经有[一篇博客文章](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/11/06/how-to-get-most-out-of-windows-azure-tables.aspx)。它似乎在这一刻下降，但希望它会回来。以下配置片段体现了该文章中的一些建议，可能会对您有所帮助：

```
<system.net>
    <connectionManagement>
      <add address="*" maxconnection="45"/>
    </connectionManagement>
    <settings>
      <servicePointManager useNagleAlgorithm="true" expect100Continue="false" />
  </settings>
</system.net> 
```

由于您使用的是任务，因此您还可以检查是否耗尽了线程池。使用 Perfmon 检查测试运行时有多少线程处于活动状态。如果计数不断攀升，或达到一个非常大的数字，那么这可能是您的问题。在这种情况下，您可以尝试跳过任务的使用，并自己跟踪 Begin/End 调用的异步结果。

# jquery - JavaScript中鼠标事件的坐标

> ID：11831311
> 
> 赞同：2
> 
> 时间：2012-08-06T15:30:05.340
> 
> 标签：jquery, mousedown

我想在一个点上手动创建一个鼠标事件，知道它的坐标。我使用这个功能：

```
$(document.elementFromPoint(x, y)).mousedown(); 
```

click 由需要事件的`pageX`和`pageY`属性的函数使用，但它不起作用，因为创建的事件没有这些属性。有人知道为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:38:12.277

只需创建一个具有所需属性的 jQuery 事件，并将其传递给“触发函数”：

```
var event = jQuery.Event("mousedown", {pageX: x, pageY: y});
$(document.elementFromPoint(x, y)).trigger(event); 
```

那应该行得通。

# firefox - 在添加到 XUL 的 Html 文档中动态添加 Html 元素

> ID：11831312
> 
> 赞同：0
> 
> 时间：2012-08-06T15:30:07.187
> 
> 标签：firefox, firefox-addon, xul

我正在尝试使用与 chrome 扩展相同的 html 文件创建 Firefox 扩展。通过一些谷歌搜索，我找到了一种使用方法

```
xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
      xmlns="http://www.w3.org/1999/xhtml" 
```

作为命名空间并使用我在 chrome 中使用的 html 文件，它工作正常。现在，我想使用 JavaScript 将元素动态添加到该 html 文件中。例如

```
var testdiv=document.getElementById('test');
var a = document.createElement('a');
a.setAttribute("innerText", "test");
testdiv.appendChild(a); 
```

但这并没有给出预期的输出。关于这个或任何其他方式的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T03:47:28.083

如果要在命名空间中创建元素，则必须使用[`document.createElementNS`](https://developer.mozilla.org/en-US/docs/DOM/document.createElementNS)方法。因此，在您的情况下，创建 A 元素将如下所示：

```
var a = document.createElementNS('http://www.w3.org/1999/xhtml', 'a'); 
```

# android - LibGDX 中的纹理渲染顺序

> ID：11831313
> 
> 赞同：3
> 
> 时间：2012-08-06T15:30:13.890
> 
> 标签：android, libgdx

我正在将游戏从 iOS 和 Windows Phone 移植到 Android。我为移植所遵循的大部分代码都来自 Windows Phone 版本，只是因为它与 Java 最相似。我的问题与 LibGDX 中的 OrthographicCamera 类有关。

我使用游戏对象作为这个游戏的组件容器方法。这可以在这里阅读：http: [//cowboyprogramming.com/2007/01/05/evolve-your-heirachy/](http://cowboyprogramming.com/2007/01/05/evolve-your-heirachy/) 只是让你知道我在说什么。因此，游戏中的几乎所有内容都扩展了 Component 组件类。每个游戏对象，即一个球，都是一个由组件组成的游戏对象，即 Sprite、RigidBody（用于物理）、Transform2（位置、旋转等）。这包括 Camera2 类，它只是包装了一个 OrthographicCamera 成员。

我有两个问题，我一直在研究它。我无法弄清楚如何进行分层。游戏有一个抽屉，用户可以向下滑动以拖动打开。这应该在游戏中的任何其他内容之上。开发 XNA 版本的人实现这一点的方法是拥有多个 SpriteBatch，并且基本上将每个 SpriteBatch 视为一个层。这在 LibGDX 中不起作用，并且使用多个 SpriteBatches 是不好的做法。问题是，游戏对象被组织成一棵树，它们是根据树的遍历进行渲染的，因此最终排序是基于对象插入树的时间。我已经研究了 DecalBatch 以便我可以使用 Z 排序，但由于游戏快完成了，它需要分配重构。

由于这已经是一个很长的帖子，我将在另一个帖子中询问我的第二个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:29:30.663

我想通了。我从 LibGDX 向 Mario 发送了一条消息，他建议我在渲染对象之前对它们进行排序。我真的不知道该怎么做，因为它在一棵树上，我知道如何对一棵树进行排序，但排序不存在。我为层添加了一个字段，并使 GameObject 类实现了 Comparable，然后，在访问者模式接受方法中，我根据它们的层对所有节点子节点进行排序。它现在运行良好。

# javascript - 响应 javascript 中的单个触摸事件

> ID：11831314
> 
> 赞同：0
> 
> 时间：2012-08-06T15:30:15.860
> 
> 标签：javascript, iphone, webkit

考虑用户触摸屏幕并按住第一根手指的场景。然后，用户用第二根手指在两个不同的位置依次点击屏幕。我想将其作为三个独立的水龙头来回应，而我真正关心的是最初的水龙头位置。

我曾尝试使用 touchstart，但我不知道如何不重用第一次触摸。如果我寻找 event.touches 长度的变化，我不会选择第二次（最后一次）点击。

有人可以建议一个单独响应每个触摸的策略吗？我猜这很简单，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:41:57.557

如果您使用的是 JQuery 或 Zepto ， [JQTouch](http://www.jqtouch.com/)是一个很好的插件，可以很好地为您包装触摸事件。如果您有兴趣在较低级别执行此操作，您可以随时查看他们是如何完成的。

# eclipse - 如何将当前的 Eclipse 文本编辑器光标位置传递给外部工具？

> ID：11831316
> 
> 赞同：2
> 
> 时间：2012-08-06T15:30:26.760
> 
> 标签：eclipse, textpad

我工作的公司正在采用 Eclipse 来处理我们的专有语言。我正在编写一个外部工具来替换我们专有编辑器中的功能，允许程序员从我们的软件中选择一个项目以插入光标的当前位置。

我已经查看了外部工具文档，并且似乎没有返回当前光标位置的变量：

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fconcepts-exttools.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fconcepts-exttools.htm)

我发现显示 Java 方法的稍微相似的问题： [Eclipse-plugin how to get current text editor corsor position](https://stackoverflow.com/questions/1619623/eclipse-plugin-how-to-get-current-text-editor-corsor-position)

不幸的是，我不懂 Java，即使我懂 Java，我也不知道是否可以从外部工具参数访问 Java 方法。我可以使用未记录的或非标准的外部工具变量吗？

在 TextPad 中，我会使用 $Line 和 $Col 来确定工具参数中的当前光标位置。我在 Eclipse 中做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:14:14.447

[这里](http://www.eclipse.org/forums/index.php/t/162908/)的讨论似乎提供了一个解决方案来让你了解当前的路线。

# asp.net - 将 HTML 标记嵌入 ASP.Net 页面

> ID：11831320
> 
> 赞同：0
> 
> 时间：2012-08-06T15:30:33.017
> 
> 标签：asp.net

我正在尝试将一些旧的 ASP 页面转换为 ASP.Net 并遇到了问题。在其中一个页面中，之前的编码人员设置了一种方法来列出用户使用 HTML 标记搜索的数据库中的项目。我知道在 ASP HTML 中可以通过使用 <% 运算符来区分函数。我想知道：在 ASP.Net 中是否有类似的东西可以用来设置相同的列表功能？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-06T16:02:33.283

我对 ASP.NET 很陌生，但我认为 <% 运算符可以区分 ASP.NET 中的代码。

# r - 了解 R 中的 switch() 函数？

> ID：11831321
> 
> 赞同：2
> 
> 时间：2012-08-06T15:30:34.967
> 
> 标签：r, function, generics, s4

由 Venables 和 Ripley 编写的《统计与计算》一书有一个示例，说明在通用群函数 Math 的“多项式”类的对象上定义方法函数。数学是一个组函数，包含一些组件函数，包括 abs、acos、acosh、...

下面是书中提到的为组泛型函数Math定义方法函数的代码（注意代码是针对S4类（新式R/S类））：

```
setMethod("Math", "polynomial", 
           function(x) {
            switch(.Generic, ceiling = , floor = , 
            trunc = polynomial(callGeneric(x@coef), rat = x@rat),
            stop(paste(.Generic, "not allowed on polynomials"))
            )}
         ) 
```

我知道使用 setMethod() 我们正在为通用函数 Math 定义一个方法函数，当它在“多项式”类的对象上调用时。你能解释一下 switch 在这里做什么吗？我阅读了有关开关的 R 帮助，但仍然难以理解以下部分：

```
 switch(.Generic, ceiling = , floor = , 
            trunc = polynomial(callGeneric(x@coef), rat = x@rat),
            stop(paste(.Generic, "not allowed on polynomials"))
            )} 
```

请注意，上面的多项式函数是一个构造函数，用于创建“多项式”类的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:49:49.847

我认为使用代码可以提供丰富的信息（我即将传播的这种理解完全来自我刚刚观察到的内容；我什至不知道您可以以这种方式使用 switch）：

您的代码经过调整以在函数之外运行：

```
test <- "ceiling"
test <- "floor"
test <- "trunc"

switch(test, 
    ceiling = , 
    floor = , 
    trunc = mean(1:10),
    stop(paste(test, "not allowed on polynomials"))
) 
```

尝试每个测试条件，您会看到如果天花板、地板或 trunc 它返回什么 trunc `=`。如果你把东西放在地板上：

```
test <- "floor"

switch(test, 
    ceiling = , 
    floor = 5, 
    trunc = mean(1:10),
    stop(paste(test, "not allowed on polynomials"))
) 
```

你会得到不同的回应。

我可能错了，但我认为这可能是这样写的：

```
if (.Generic %in% c(ceiling, "floor", "trunc"){
    polynomial(callGeneric(x@coef), rat = x@rat)
} else {
    stop(paste(.Generic, "not allowed on polynomials"))
} 
```

感兴趣的是这种解释是否正确，但不熟悉这个特定的上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:52:00.063

`.Generic`标识用于调用当前函数的名称。你可以这样想：如果函数被调用为`ceiling`,`floor`或`trunc`，则调用给定的实现`polynomial(callGeneric(x@coef), rat = x@rat)`，否则会打印错误。在 an 之后的空参数，如and`=`所见，意味着失败：实际包含任何代码的下一个参数将是执行的。`ceiling``floor`

# macos - 未找到 sdef 命令 - OSX 10.8

> ID：11831326
> 
> 赞同：1
> 
> 时间：2012-08-06T15:30:58.740
> 
> 标签：macos, osx-mountain-lion, scripting-bridge

我正在尝试按照此处的说明进行操作：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/UsingScriptingBridge/UsingScriptingBridge.html#//apple_ref/doc/uid/TP40006104-CH4-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/UsingScriptingBridge/UsingScriptingBridge.html#//apple_ref/doc/uid/TP40006104-CH4-SW1)

每当我尝试使用“sdef”命令时，都会收到“找不到命令”错误。这在 10.7 下运行良好。我正在尝试在 10.8 下使用它，但它不再起作用了。

10.8 中是否删除了 sdef 命令？我应该改用什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T15:40:27.030

试试`xcrun sdef`；`sdef`这将使用Xcode 应用程序包中的副本。在最近的 Xcode 版本中，大多数开发人员工具都已移至捆绑包中。您还可以尝试从 Xcode 的首选项中安装命令行工具。

# c# - 对多维数组中的第一个元素进行二分查找

> ID：11831329
> 
> 赞同：1
> 
> 时间：2012-08-06T15:31:17.450
> 
> 标签：c#, .net, binary-search

我的目标是只对二维数组中的第一个元素执行二进制搜索。我整天都在寻找是否可以在 .NET 中使用 BinarySearch() 但我找不到任何东西。

为了更清楚地说明这一点。想象一下，我有一个未排序的一维数组。如果我对数组进行排序，我会丢失原始索引。我想创建数组的第二个元素来保存原始索引（我可以这样做），然后按第一个元素排序，然后对第一个元素进行二进制搜索。

如果有人能把我推向正确的方向，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:57:06.873

好吧，如果我理解正确的话，你需要这样的东西：

```
// initialize the array and the indexes array
var a2D = new int[2][];
a2D[0] = new[] { 3, 14, 15, 92, 65, 35 }; // <-- your array (fake data here)
a2D[1] = Enumerable.Range(0, a2D[0].Length).ToArray(); // create the indexes row

// sort the first row and the second one containing the indexes
Array.Sort(a2D[0], a2D[1]);

// now a2D array contains:
//  row 0: 3, 14, 15, 35, 65, 92
//  row 1: 0,  1,  2,  5,  4,  3

// and you can perform binary search on the first row:
int columnIndexOf35 = Array.BinarySearch(a2D[0], 35);
// columnIndexOf35 = 3
// 
// a2D[0][columnIndexOf35] = 35 <- value
// a2D[1][columnIndexOf35] = 5  <- original index 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:45:16.333

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.array.binarysearch.aspx)，`Array.BinarySearch`方法仅对一维数组进行操作，因此在您的情况下无法直接使用它。您拥有的一些选项是：

1.  将第一列提取到一个单独的数组中并调用`Array.BinarySearch`它。
2.  定义实现接口的自定义类 Pair`IComparable`并使用此类的实例构造您的数组。
3.  自己实现二维数组的二分查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T17:02:35.417

根据您之后计划对数组执行的操作，另一种解决方案可能是使用 LINQ。

```
var unsortedStartingArray = new[] {3, 6, 2, 1, 20, 20};
var q = unsortedStartingArray
        .Select((item, index) => new {item, index})
        .ToLookup(x => x.item, x => x.index);

var notFound = q[30]; // An empty array. Nothing found
var indexOf1 = q[1].First(); // returns 3
var multipleIndexsOf20 = q[20]; // Returns an array with 4, 5 
```

查找的索引将是您正在搜索的值。性能方面，我估计这比我的粗略测试要~~快~~约 5 倍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:50:57.170

看起来您想要拥有包含数据和“原始索引”的对象，而不是按数据排序/搜索对象数组。

（这个答案显示了安德烈的选项 2）

```
class IndexedData:IComparable
{
  public MyType Data;
  public int OriginalIndex;

  public int CompareTo(object obj) {
    // add correct checks for null,.. here
    // and return correct comparison result. 
    // I.e. if MyType is IComparable - just delegate.
    return Data.CompareTo(obj);
} 
```

检查MSDN 上的[IComparable](http://msdn.microsoft.com/en-us/library/system.icomparable%28v=vs.100%29.aspx)以了解实现/使用细节。

# javascript - isNaN 给出令人困惑的结果

> ID：11831330
> 
> 赞同：0
> 
> 时间：2012-08-06T15:31:22.173
> 
> 标签：javascript, html

我正在编写一个 HTML 表单，如果输入是一个数字，它会进行一些简单的计算。但是，javascript 函数不会将我的数字输入视为数字。我很困惑为什么会这样，并使用以下代码对[jsFiddle进行了一些测试](http://jsfiddle.net/4vS8P/)

**HTML**

```
<form>
 <input name=a type=number value='' oninput='checka();'>
 <input name=b type=number value='' oninput='checkb(this);'>
</form> 
```

**Javascript**

```
function checka() {
 alert(isNaN(document.forms[0].a.value));
}

function checkb(A) {
 alert(isNaN(this.value));
} 
```

我对结果感到目瞪口呆。该`checka`函数正常工作时输入“5”时为假，输入“a”时为真。但是，该`checkb`函数对这两种情况都成立。

我从[Mozilla 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN)中了解到，`isNaN`函数可能会在检查输入是否为数字之前先进行类型转换：

> 令人困惑的特殊情况行为
> 
> 自 isNaN 函数规范的最早版本以来，它对非数字参数的行为一直令人困惑。当 isNaN 函数的参数不是数字时，首先将值强制转换为数字。然后测试结果值以确定它是否为 NaN。因此，对于非数字，当强制转换为数字类型时会产生有效的非 NaN 数值（尤其是空字符串和布尔基元，当强制转换为数字值 0 或 1）时，“false”返回值可能是意料之外的；例如，空字符串肯定是“不是数字”。混淆源于这样一个事实，即“不是数字”一词对于表示为 IEEE-794 浮点值的数字具有特定含义。该功能应解释为回答问题，

这如何帮助解释我所看到的现象？或者这是与类型转换无关的另一种混淆形式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T15:34:42.263

`this`（当你打电话时`checkb`）是`window`……</p>

（您`checkb(this)`在没有父对象 ( `foo.checkb`) 的情况下调用，因此上下文是`window`自动的。有关进一步阅读，请参阅[“this”关键字在 JavaScript 对象文字中如何工作？](https://stackoverflow.com/questions/133973/how-does-this-keyword-work-within-a-javascript-object-literal)。）

......所以`this.value`是`window.value`（大概）`undefined`，因此不是一个数字。

你不会对`this`你传递给的那个做任何事情`checkb()`——这个函数不会对它的任何参数做任何事情。

你可能的意思是：

```
function checkb(A) {
 alert(isNaN(A.value));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:35:21.050

`this.value`未定义，这是窗口对象，而不是输入。

如果要使用它来指向输入，则需要以不显眼的方式分配事件处理程序。

```
<form>
 <input name=b type=number value='' id="b">
</form>

<script>    
 function checkb(A) {
  alert(isNaN(this.value));
 }    
 document.getElementById("b").oninput = checkb;  //better to use an addEventListener
</script> 
```

# ant - ant中如何删除EMMA过程中产生的中间文件

> ID：11831332
> 
> 赞同：0
> 
> 时间：2012-08-06T15:31:39.923
> 
> 标签：ant, emma

我有一个 emma 的 ant 任务，它以 HTML 格式生成代码覆盖率报告。到目前为止，一切都很好。但我看到正在生成中间文件。现在我需要删除它。虽然我已经给任务 emma clean 了，但我无法删除名称为 ${instr.dir.out} 的文件夹。该文件夹是在所有组件中创建的，我不知道如何删除它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:10:15.763

我所有的 ANT 构建都有一个标准的“干净”目标，旨在清理由构建创建的任何文件或目录：

```
<target name="clean" description="Cleanup after build">
    <delete dir="${build.dir}"/>
    <delete file="${emma.runtime.file"/>
    <delete file="${any.other.file.that.needs.to.be.deleted"/>
</target> 
```

如果您是[ivy](http://ant.apache.org/ivy/)用户，最好创建一个额外的目标来清除下载缓存：

```
<target name="clean-all" depends="clean" description="Additionally purge ivy cache">
    <ivy:cleancache/>
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T03:59:49.827

@Mike，我得到了解决方案。问题在于我提供的目录名称。我创建了一个名为 outinstr_ 的目录（_ 是一个空格），然后我实际上为 dir instr.dir.out ,value = "outinstr" 分配了一个目录，这是有趣的部分..值 "outinstr" 没有空间它:)...感谢您帮助迈克....非常感谢

# c# - 联系表格不起作用

> ID：11831335
> 
> 赞同：0
> 
> 时间：2012-08-06T15:31:43.097
> 
> 标签：c#, asp.net

我的表格有问题，我无法发送。如果我输入了错误的详细信息（安全代码、电子邮件、空白字段等），我会在屏幕上看到错误，这是正确的。

但是当我输入所有正确的数据时，我无法发送表单，我收到此错误：

> 提交您的表单时出错。请检查以下内容：

但是列表是空的。

```
 SmtpClient smtpClient = new SmtpClient();
    MailMessage message = new MailMessage();
    try
    {
        MailAddress fromAddress = new MailAddress("noreply@domain.com", "string1");
        // decide who message goes to
        string emailGoesTo = "person1@domain.com";

        MailAddress toAddress = new MailAddress(emailGoesTo.ToString(), "string1");

        message.From = fromAddress;
        message.To.Add(toAddress);
        message.To.Add("person2@domain.com");
        message.Subject = "string2";
        message.Body = "New Website Contact Request";
        message.Body += "------------------------------------------\r\n";
        message.Body += "Name: " + your_name.Text + "\r\n";
        message.Body += "Email: " + your_email.Text + "\r\n";
        message.Body += "Telephone: " + your_telephone.Text + "\r\n";
        message.Body += "Company: " + your_company.Text + "\r\n";
        message.Body += "Address: " + your_address.Text + "\r\n";
        message.Body += "Postcode: " + your_zip.Text + "\r\n";
        message.Body += "Enquiry: " + your_enquiry.Text + "\r\n";

        // smtpClient.Host = "string3";
        smtpClient.Host = "string4";
        smtpClient.Credentials = new System.Net.NetworkCredential("string5", "string6");
        smtpClient.Send(message);
        Response.Redirect("thankyou.aspx");
    }
    catch (Exception ex)
    {
        statusLabel.Text = "Coudn't send the message!";
    } 
```

我是noobie，请问有`string5`没有`string6`？

还有什么问题？如何使这种形式工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:42:53.467

从未尝试过使用 smtpclient.host 但下面的作品。只需添加邮件服务器的 IP/主机名，并确保将其设置为允许从调用代码的机器中继。并用您想要的文本替换字符串。我建议从简单的事情开始，而不是从表单字段中输入以消除任何外部问题。一旦邮件发送，然后开始添加额外的部分。

```
 public static string mailServer = 'IP address or host name of mail server'
    public static void Send()
    {
        string subject = "test subject";
        string address =  "test@somedomain.com";
        string body = "some mail body";
        MailMessage mm = new MailMessage();
        mm.From = new MailAddress("no-reply@domain.net"); //on behalf of
        mm.To.Add(new MailAddress(address));

        mm.IsBodyHtml = true;
        mm.Subject = subject;
        mm.Body = body;
        SmtpClient server = new SmtpClient(mailServer);
        server.Send(mm);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T15:44:23.470

string5 和 string6 是邮件服务器上的电子邮件凭据（用户名和密码）。你应该更了解我们 ;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:43:52.577

您需要使用您的邮件服务器的名称/域信息更新您的 smtpClinet.Host。凭据需要使用可以访问您的邮件服务器的用户的用户名和密码进行更新。有时可以忽略这一点。

# php - 如何在使用 CodeIgniter 制作的应用程序中只允许一种方法？

> ID：11831339
> 
> 赞同：0
> 
> 时间：2012-08-06T15:32:04.183
> 
> 标签：php, codeigniter, limit, restriction

我做了一个比赛，会员可以注册赢取奖品。现在，是时候展示比赛的结果和获胜者了。我只想允许一个控制器和一种方法，以禁用仍然注册参加比赛的可能性。

我认为重定向可能是一个很好的解决方案，但是如何在整个应用程序上执行此操作而不在每个控制器的每个方法中复制和粘贴代码？

欢迎任何想法/建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:41:09.520

`uri_string()`在控制器的构造函数中，您可以通过匹配您所需的方法添加检查用户是否正在调用特定函数`uri`，然后使用重定向他`redirect()`。这是有效的，因为检查控制器的构造函数意味着，当检查发生时，用户甚至无法访问方法。所以他/她无法执行它们。

编辑：它有效。

```
public function __construct(){
    parent::__construct();
    $this->load->helper('url');
    if(uri_string() !== "controller_name/allowed_method_name"){
        redirect("/"); // some where
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:58:46.097

最简单的方法是捕获路由文件 ( `config/routes.php`) 中的任何 url，并将其分配给您要显示的控制器操作：

```
$route['default_controller'] = 'controller';
$route['(:any)'] = "controller/action"; 
```

这也比使用重定向更快。

# hibernate - 为什么 Hibernate 不能在我的 JAR 文件中加载在 hibernate.cfg.xml 文件中声明的类？

> ID：11831340
> 
> 赞同：0
> 
> 时间：2012-08-06T15:32:05.633
> 
> 标签：hibernate, maven, classnotfoundexception, maven-assembly-plugin

我正在使用 Hibernate 4.0.1.Final。我正在使用 Assemby 插件将我的所有依赖项包含在我的 JAR 项目中。但是，Hibernate 无法找到我的一门课程，而且拼写正确。在我的 hibernate.cfg.xml 文件（位于我的 JAR 的根目录）中，我有

```
<mapping class="com.myco.fdr.myproject.model.UserRole" /> 
```

我像这样加载文件

```
final Configuration configuration = new AnnotationConfiguration();  
configuration.configure("hibernate.cfg.xml"); 
```

但是当执行上面的代码时，我得到了这个异常......</p>

```
javax.ejb.EJBTransactionRolledbackException: Unable to load class declared as <mapping class="com.mainco.fdr.myco.model.UserRole"/> in the configuration:
    at org.jboss.ejb3.tx.Ejb3TxPolicy.handleInCallerTx(Ejb3TxPolicy.java:87)
    at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:130)
    at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:195)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.mdb.MessagingContainer.localInvoke(MessagingContainer.java:249)
    at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.delivery(MessageInflowLocalProxy.java:268)
    at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:138)
    at $Proxy84.execute(Unknown Source)
    at org.jboss.resource.adapter.quartz.inflow.QuartzJob.execute(QuartzJob.java:57)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:203)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520)
Caused by: org.hibernate.MappingException: Unable to load class declared as <mapping class="com.mainco.fdr.myco.model.UserRole"/> in the configuration:
    at org.hibernate.cfg.AnnotationConfiguration.parseMappingElement(AnnotationConfiguration.java:545)
    at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1555)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1534)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1508)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1428)
    at org.cbco.subco.dido.service.AbstractServiceProvider.getSessionFactory(AbstractServiceProvider.java:66)
    at org.cbco.subco.dido.service.AbstractServiceProvider.initServices(AbstractServiceProvider.java:118)
    at org.cbco.subco.dido.quartz.ProcessOrdersJob.execute(ProcessOrdersJob.java:44)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112)
    at org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166)
    at org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126)
    ... 11 more
Caused by: java.lang.ClassNotFoundException: No ClassLoaders found for: com.mainco.fdr.myco.model.UserRole
    at org.jboss.mx.loading.LoadMgr3.beginLoadTask(LoadMgr3.java:212)
    at org.jboss.mx.loading.RepositoryClassLoader.loadClassImpl(RepositoryClassLoader.java:521)
    at org.jboss.mx.loading.RepositoryClassLoader.loadClass(RepositoryClassLoader.java:415)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at org.hibernate.util.ReflectHelper.classForName(ReflectHelper.java:100)
    at org.hibernate.cfg.AnnotationConfiguration.parseMappingElement(AnnotationConfiguration.java:542)
    ... 31 more 
```

有问题的类出现在我的 JAR 文件的根目录中（也许它应该出现在“类”目录中？）。无论如何，这就是我如何使用 Assembler 插件...</p>

```
 <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.2.1</version>
            <configuration>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id>
                    <phase>package</phase> <!-- bind to the packaging phase -->
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

如何解决这个 ClassNotFoundException？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:05:23.823

你有`persistence.xml`吗？
添加到您的`persistence.xml` 财产

```
 <property name="hibernate.ejb.cfgfile" value="META-INF/hibernate.cfg.xml"/> 
```

# forms - symfony 2 表单显示默认值

> ID：11831342
> 
> 赞同：1
> 
> 时间：2012-08-06T15:32:06.797
> 
> 标签：forms, symfony, default-value

我正在使用 Symfony 2.0.14，我想在我的表单模板中显示默认值。

好吧，FormType 绑定到一个实体，当我想添加额外的字段时，我知道选项 property_path = false 允许添加非实体字段，对吗？

当我在相反的情况下，我想设置一个没有表单字段的实体字段。好的，我只需要为“createForm”提供一个默认实体。

Howewver 如何在我的模板表单中呈现它？

* * *

控制器代码：

```
public function newAction(Request $request)
{
    $game = new Game();

    $local = new Role();
    $visitor = new Role();
    $local->setType('LOCAL');
    $visitor->setType('VISITOR');
    $game->addRole($local);
    $game->addRole($visitor);

    $form = $this->createForm(new GameType(), $game); 
```

游戏类型代码：

```
public function buildForm(FormBuilder $builder, array $options){
    $builder->add('teams', 'collection', array( 'type' => new RoleType()));
} 
```

角色类型代码：

```
public function buildForm(FormBuilder $builder, array $options){
   $builder->add('type', 'text');  // <= I would like read only for end-User 
   $builder->add('score', 'integer'); 
```

表单模板：

```
{% for role in form.teams %}
        <li>
            <div class="role-team">
                {{ role.type }} {# WRONG way, how to do ?  #}
                {{ form_row(role.score) }}
            </div>
        </li>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:18:50.553

如果您只想显示您的实体字段值（而不将整个实体传递给视图），您可以使用以下命令打印它：

```
{{ form.vars.value.type }} 
```

（假设您的角色实体具有类型属性）。

**编辑**：我意识到你在循环中。尝试使用以下方法找出正确的属性路径：

```
{% for role in form.teams %}
    {% debug role %}
{% endfor %} 
```

# objective-c - 如何为与 sudzc.com 一起工作的 WSDL 文件生成 Java Web 服务类以创建 Objective-C 代码？

> ID：11831343
> 
> 赞同：1
> 
> 时间：2012-08-06T15:32:09.427
> 
> 标签：objective-c, web-services, soap, wsdl, sudzc

如何从 Java Web 服务类生成 WSDL 文件，Sudzc.com 支持该文件生成 Objective-C 代码？

我用一个简单的例子试了一下。

**我的 Java Web 服务类：**

```
package main;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebResult;
import javax.jws.WebService;

@WebService(name="RectangleWebService", serviceName = "RectangleWebService", portName = "RectangleWebServicePort", targetNamespace = "http://www.mywstest.com/ws/rectangle")
public class RectangleService {
    @WebMethod(action="calculateValueOne")
    public @WebResult(name="ValueOne") float calculateValueOne(@WebParam(name="Length") float length, @WebParam(name="Width")float width){
        return 2*(length+width);
    }
    @WebMethod(action="calculateValueTwo")
    public @WebResult(name="ValueTwo") float calculateValueTwo(@WebParam(name="Length") float length, @WebParam(name="Width")float width){
        return (length*width);
    }

} 
```

我使用 ant-script 和 wsgen 创建了一个 WSDL 文件，然后将其上传到[http://sudzc.com](http://sudzc.com)以创建 Objective-C 代码（Objective-C for iOS with ARC）。我的问题是从 Sudzc.com 创建的 Objective-C 代码没有实例方法......

**这是我的 WSDL 文件：**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.1.6 in JDK 6\. -->
<definitions targetNamespace="http://www.mywstest.com" name="RectangleWebService" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://www.mywstest.com" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
  <import namespace="http://www.mywstest.com/ws/rectangle" location="RectangleWebServicePortType.wsdl"/>
  <binding name="RectangleWebServicePortBinding" type="ns1:RectangleWebService" xmlns:ns1="http://www.mywstest.com/ws/rectangle">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <operation name="calculateValueOne">
      <soap:operation soapAction="calculateValueOne"/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
    <operation name="calculateValueTwo">
      <soap:operation soapAction="calculateValueTwo"/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
  </binding>
  <service name="RectangleWebService">
    <port name="RectangleWebServicePort" binding="tns:RectangleWebServicePortBinding">
      <soap:address location="REPLACE_WITH_ACTUAL_URL"/>
    </port>
  </service>
</definitions> 
```

当我使用来自[http://www.w3schools.com/webservices/tempconvert.asmx?WSDL](http://www.w3schools.com/webservices/tempconvert.asmx?WSDL)的 WSDL 文件通过 sudzc.com 生成 Objective-C 代码时，它工作正常，我可以使用 web 的实例方法在我的 Objective-C 项目中服务... !!!

也许有人可以帮忙？

PS对不起我的英语不好，我是网络服务的绝对初学者......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:17:05.193

那个 sudzC 有很多内存问题，我使用 WSClient++ 来生成类并且从来没有遇到过问题。

[http://wsclient.neurospeech.com/](http://wsclient.neurospeech.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T12:16:41.477

问题是生成的 RectangleWebService.wsdl 文件具有从外部 schema1.xsd 文件导入的模式...

所以我必须创建一个 wsdl 文件，然后它应该与 sudzc.com 一起工作......

我的猜测对吗？

# c++ - C++：使用 cin.getline()

> ID：11831344
> 
> 赞同：1
> 
> 时间：2012-08-06T15:32:11.953
> 
> 标签：c++, arrays, string, cin

现在我了解到它`cin.getline`是这样工作的。

`cin.getline(dest string, number of charecters to put into string);`

所以假设这个程序。

```
char s1[8]="Hellopo";
cin.getline(s1,5);
cout<<s1<<endl; 
```

这是通过输入：`hhhhhhhhhhhhh`

这是程序输出：`hhhh`

我在这个程序中有两个问题。

1-) 我将程序设置为从用户输入的内容中获取 5 个字符并存储在 s1 中。当我运行程序时，它只打印出 4 个字符。

2-) 此外，我希望程序在打印出从用户那里得到的内容后，继续打印出 s1 的其余部分。但之后就停止了`hhhh`

请向我解释我的两个担忧。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T15:36:10.050

[在这种情况下， std::cin::getline](http://en.cppreference.com/w/cpp/io/basic_istream/getline)将存储四个字符加上一个空终止符（总共五个字符）。并将`std::cout`在它找到的第一个空终止符处停止打印。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T15:36:51.233

来自[`istream::getline()`](http://en.cppreference.com/w/cpp/io/basic_istream/getline)：

> count-1 个字符已被提取（在这种情况下 setstate(failbit) 被执行）。

这意味着如果您指定`5`，则只会`4`读取字符。和：

> ...然后它将一个空字符 CharT() 存储到数组的下一个连续位置

因此将在第四个字符之后插入一个空字符。所以数组`s`将有内容：

```
'h' == s[0]
'h' == s[1]
'h' == s[2]
'h' == s[3]
0   == s[4] 
```

当找到第一个空字符时，`operator<<`将停止打印 a 。`char*`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T15:34:45.570

第五个字符是 0 终止符。`getline(buffer,n)`在缓冲区中最多存储`n`字节，包括 0 终止符。然后`cout << s1;`在 0 终止符处停止。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T15:34:48.270

第五个字符是空终止符，它标志着字符串的结束。

# css - 仅将 CSS 样式应用于某些元素

> ID：11831346
> 
> 赞同：61
> 
> 时间：2012-08-06T15:32:25.187
> 
> 标签：css, twitter-bootstrap

我有一个现有的网站，其中有很多旧页面和表格，我正试图逐步过渡到 CSS。我想使用 Twitter Bootstrap 样式表——尤其是表单的样式——但仅限于我明确要求它们的页面部分。例如，我可能将整个表单包围在一个 div 中，如下所示：

```
<div class="bootstrap">
 <!-- everything in here should have the Bootstrap CSS applied -->
 <form>
   <p><label for="text_input">Label</label><input type="text" id="text_input" /></p>
 </form>
</div> 
```

我希望所有其他形式保持与现在相同，因为我无法同时更改它们。有没有一种简单的方法可以做到这一点？我可以检查 Bootstrap CSS 中的每一个样式并添加一个父选择器（例如，'p' 会变成'div.bootstrap p'），但这需要很长时间，而且很容易错过样式。

编辑：如果这样的事情是不可能的，是否有一个免费工具可以从文件中提取所有样式，添加前缀然后再次保存它们？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-27T14:55:15.343

对于 Bootstrap 3，如果你使用它会更容易`less`：

下载 Bootstrap 源代码并制作`style.less`如下文件：

```
.bootstrap {
    @import "/path-to-bootstrap-less.less";
    @import "/path-to-bootstrap-responsive-less.less";
} 
```

最后，你必须编译less文件；有很多选择

[https://github.com/cloudhead/less.js/wiki/Command-Line-use-of-LESS](https://github.com/cloudhead/less.js/wiki/Command-Line-use-of-LESS) [https://github.com/cloudhead/less.js/wiki/GUI-compilers-that-use-LESS .js](https://github.com/cloudhead/less.js/wiki/GUI-compilers-that-use-LESS.js)

或使用`npm`安装然后将文件`less`编译为：`style.less``style.css`

```
npm install -g less
lessc style.less style.css 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-07T08:25:34.640

最后的解决方法是使用[SASS](http://sass-lang.com)（由场外人员推荐），因为它允许您嵌套元素，然后自动生成最终的 CSS。一步一步的过程是：

1.  将两个 Bootstrap 文件（`bootstrap.css`和`bootstrap-responsive.css`）连接到`bootstrap-all.css`.
2.  创建一个新的 SASS 文件，`bootstrap-all.scss`，内容为`div.bootstrap {`.
3.  附加`bootstrap-all.css`到`bootstrap-all.scss`.
4.  `div.bootstrap`通过附加`}`到关闭选择器`bootstrap-all.scss`。
5.  运行 SASS`bootstrap-all.scss`以生成最终的 CSS 文件。
6.  在最终文件上运行[YUI Compressor](http://developer.yahoo.com/yui/compressor/)以生成最小化版本。
7.  将最小化版本添加到 head 元素并将我希望样式应用于的所有内容都包含在`<div class="bootstrap"></div>`.

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-06-25T20:56:52.773

如果你因为工作/其他原因不能使用 LESS/SASS，我想出了一个 CSS 解决方案。

1.  我使用了这个网站[http://www.css-prefix.com/](http://www.css-prefix.com/)，并将 bootstrap.min.css 复制/粘贴到那里。我设置前缀='.bootstrap'和间隔=''。除了不完美之外，它将在所有内容前面加上 .bootstrap。
2.  如果你对 '.bootstrap @media' 执行 grep，你会发现左括号右边的第一个类没有 .bootstrap 作为父类。将 .bootstrap 添加到所有这些事件中，对我来说大约是 68 个。
3.  然后用“@media”替换所有“.bootstrap @media”。
4.  最后一步是将所有 '.bootstrap @' 替换为 '@' （应该大约出现 5 次）。

例子：

```
.bootstrap @media (min-width:768px){.lead{font-size:21px}} 
```

需要更换为

```
@media (min-width:768px){.bootstrap .lead{font-size:21px}} 
```

一种蛮力方法，所以一定要先尝试上面的 LESS/SASS 方法。

```
<div>
  No Bootstrap
</div>
<div class="bootstrap">
  Yes Bootstrap
</div> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-12-08T10:51:20.610

我有一个简单的解决方案。

1.  将引导 css 内容复制到此 ( [http://css2sass.herokuapp.com/](http://css2sass.herokuapp.com/) ) 在线 css 到 scss/sass 转换器。

2.  将您的标签信息（例如`div.bootstrap{`）添加到 scss 内容的开头并在末尾关闭标签。

3.  将整个 scss 内容复制到这个 scss 到 css 转换器 ( [https://www.sassmeister.com/](https://www.sassmeister.com/) ) 并转换它:)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-01-25T21:21:13.933

我对这些答案中的任何一个都不满意。使用 Less 来确定规则的范围会产生各种缺陷。例如，Clearfix 就一团糟。像这样的规则`button.close`变成`button.bootstrap close`了我真正想要的：`.bootstrap button.close`.

我采取了不同的方法。我正在使用[PostCSS](https://github.com/postcss/postcss)处理随 Bootstrap 提供的开箱即用的 CSS。我正在使用[Scopify](https://github.com/pazams/postcss-scopify)插件来使用`.bootstrap`.

这*主要*到达那里。当然，有些`html`规则`body`变得`.bootstrap html`毫无`.bootstrap body`意义。不用担心...我可以编写一个 PostCSS 转换来清理它们：

```
var elevateGlobalsPlugin = postcss.plugin('elevateGlobals', function(opts) {
    return function(css, result) {
        css.walkRules(function(rule) {
            rule.selector = rule.selector.replace('.bootstrap html', '.bootstrap');
            rule.selector = rule.selector.replace('.bootstrap body', '.bootstrap');
        });
    }
}); 
```

`class="bootstrap"`现在，我可以通过在顶层添加 a 来隔离所有 Bootstrap 样式。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-06T15:46:49.257

这很难。您不能[为同一网页的不同部分应用不同的 css 样式表](https://stackoverflow.com/questions/3298746/apply-different-css-stylesheet-for-different-parts-of-the-same-web-page)。

我怀疑这样做的唯一方法是为您的内容制作一个单独的文件以采用引导样式，并将其 i-frame 放入页面中，如下所示：

```
<iframe src="/content-to-take-bootstrap-styles.html" ></iframe> 
```

然后在`content-to-take-bootstrap-styles.html` 标题中引用引导样式表。但是你有 iframe 的所有复杂性——例如：iframe 元素不会增长以适应你的内容的长度。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-16T17:22:52.290

您可以使用现成的用于 Bootstrap 4.1 的隔离 css（使用 LESS 编译）-

[https://github.com/cryptoapi/Isolate-Bootstrap-4.1-CSS-Themes](https://github.com/cryptoapi/Isolate-Bootstrap-4.1-CSS-Themes)

它为主题提供了独立的 css -

*   bootstrapcustom.min.css - 默认 bootstrap 4.1 隔离样式
*   [https://bootswatch.com/cerulean/darkly.min.css](https://bootswatch.com/cerulean/) - 隔离 css
*   [https://bootswatch.com/darkly/flatly.min.css](https://bootswatch.com/darkly/) - 隔离 css
*   [https://bootswatch.com/flatly/litera.min.css](https://bootswatch.com/flatly/) - 隔离css
*   [https://bootswatch.com/litera/lux.min.css](https://bootswatch.com/litera/) - 隔离css
*   [https://bootswatch.com/lux/minty.min.css](https://bootswatch.com/lux/) - 隔离 css
*   ...

要使用 Bootstrap CSS，只需使用类 bootstrapiso 将 HTML 包装在一个 div 中，如下所示：

```
<div class="bootstrapiso">
<!-- Any HTML here will be styled with Bootstrap CSS -->
</div> 
```

并使用文件夹 css4.1 中的任何 css 样式，如下所示：

```
<head>
<link rel="stylesheet" href="css4.1/bootstrapcustom.min.css" crossorigin="anonymous">
...
</head> 
```

// [https://github.com/cryptoapi/Isolate-Bootstrap-4.1-CSS-Themes](https://github.com/cryptoapi/Isolate-Bootstrap-4.1-CSS-Themes)

完毕！

# database - SSAS OLAP多维数据集在技术上是如何解决的？

> ID：11831350
> 
> 赞同：0
> 
> 时间：2012-08-06T15:32:51.390
> 
> 标签：database, ssas, olap

我是 SSAS 平台的新手。我很好奇它是如何从技术上解决的。

我听说 SQL 查询不适用于此 OLAP (MOLAP)。这是真的吗？

我想象它在技术上只是一些标准的事实数据库表，带有指向维度数据库表的链接。

我错了吗？

那些数据在哪里？

在 RAM 中还是在硬盘上？

它们是采用经典数据库模型还是其他方式构建的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:49:20.077

Analysis Services 将 MOLAP 数据存储在与关系数据库完全不同的结构中。您使用关系数据库作为源，但数据被复制、压缩、索引和重组以优化存储和检索。需要物理存储。SSAS 还利用 RAM 并保留它可以更好地响应查询的内容。如果您将分区设置为使用 ROLAP 存储，则可以将源数据保存在关系数据库中，但通常使用 MOLAP 存储可以获得更好的性能。

有关更多信息，请参阅：

[http://technet.microsoft.com/en-us/library/ms174915.aspx](http://technet.microsoft.com/en-us/library/ms174915.aspx)

[http://www.sql-server-performance.com/2009/ssas-storage-modes/](http://www.sql-server-performance.com/2009/ssas-storage-modes/)

[http://www.bidn.com/blogs/dustinryan/ssis/872/ssas-2008-storage-modes](http://www.bidn.com/blogs/dustinryan/ssis/872/ssas-2008-storage-modes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:41:32.913

不，您不能在 SSAS 数据库上运行标准 T-SQl 查询，您必须运行 MDX 查询（语法不同，但它会记住 T-SQl 查询）

你提到了 MOLAP。MOLAP 是 SSAS 数据库可以存储数据的 3 种方式之一，其他的是 HOLAP 和 ROLAP。无论您选择哪种存储模式，我的第一条陈述都是有效的，您必须使用 MDX 查询您的数据库，而不是 T-SQL。

数据位于文件共享上的文件中，就像位于 OLTP 数据库中一样。如果您转到您的实例文件夹，则会有一个名为 data 的文件夹，其中所有数据都在其中。

# arrays - Codeigniter 上传：从 $this->upload->data() 获取 image_width

> ID：11831351
> 
> 赞同：0
> 
> 时间：2012-08-06T15:32:53.153
> 
> 标签：arrays, codeigniter, multidimensional-array, image-upload

我是一个 CI 新手，我无法集中精力尝试访问数组中的单个元素；我已经上传了一张图片，并且想在额外处理之前知道尺寸。

```
$imgOriginalData = array('upload_data' => $this->upload->data());

print_r ($imgOriginalData); // shows that [image_width] is a property that exists
echo element('image_width', $imgOriginalData); // returns "Array"

if ($imgOriginalData['image_width'] > 800){ // throws error Undefined index: image_width

echo "<p>Greater than 800</p>";
}else{
    echo "<p>less than 800</p>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:37:37.330

根据您的代码片段：

```
$imgOriginalData = array('upload_data' => $this->upload->data()); 
```

您正在寻找的所需密钥应该是：

```
echo $imgOriginalData[ 'upload_data' ][ 'image_width' ] 
```

**编辑**：您基本上是在索引处创建一个新的子数组，`upload_data`因此您需要`$this->upload->data()`通过键来处理上传库 ()返回的数据数组`upload_data`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:46:25.583

而不是做`$imgOriginalData = array('upload_data' => $this->upload->data());`

做就是了`$imgOriginalData = $this->upload->data();`

然后要获得宽度，`$imgOriginalData['image_width']`就像在 if 语句中一样使用。

# cocoa - 将数据从一个 uiview 传递到另一个

> ID：11831352
> 
> 赞同：0
> 
> 时间：2012-08-06T15:32:55.430
> 
> 标签：cocoa, uiview, xcode4.2

我有一个表格，我希望用户填写。一旦他们完成表格，他们将点击保存或提交。我有所有的编码。接下来我需要的是从完成的表单中传递到另一个视图中的数据。

需要帮忙

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-07T11:42:46.587

只需重载 inithWith.... 函数即可将所需的详细信息作为单个变量、NSArray 或 NSDictionary 传递

# php - PHP密码保护

> ID：11831361
> 
> 赞同：-2
> 
> 时间：2012-08-06T15:33:16.307
> 
> 标签：php, header, md5, setcookie

我在尝试对我网站的某个部分进行密码保护时遇到了困难。我对 php 不太熟悉，所以我使用来自 zubrag.com 的代码作为起点。我遇到的问题是当前代码出现错误，指出：

`cannot modify header information - headers already sent by (output started at /var/www/index.php:78) in /var/www/index.php on line 333`

我看过 78，我明白了，我的输出从那里开始，因为那是 php 括号所在的第一行。

第 333 行是我的`setcookie`命令。我也明白，为了设置 cookie，需要在标题中完成。不幸的是，我不确定如何用我的代码做到这一点。我在网上查看过，发现通常解决此问题的最佳方法是使用`ob_start()`and `ob_end_flush()`。好吧，我尝试将这些命令放在很多地方，但到目前为止还没有运气。

我已经`ob_start`在文件的开头设置了，在其他所有内容之前。我也在案件开始时尝试过，但没有运气。

我已经`ob_end_flush`在文件末尾和案例末尾设置了，我也没有运气。

```
<html lang="en">
    <head>
        <title>DVR Controls</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <link rel="stylesheet" type="text/css" href="css/superfish.css">
        <link rel="stylesheet" media="screen" href="css/superfish-navbar.css" /> 
        <script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>
        <script type="text/javascript" src="js/hoverIntent.js"></script>
        <script type="text/javascript" src="js/superfish.js"></script>
        <script type="text/javascript">

        // initialise plugins
        jQuery(function(){
            jQuery('ul.sf-menu').superfish();
        });

        </script>
        <script>
        $(document).ready(function(){ 
                $("ul.sf-menu").superfish({ 
                    pathClass:  'current' 
                }); 
        });

        </script>

        <center><b><font size="36">The Radeus DVR Prototype</font></b></center>
    </head>
    <body>
        <ul class="sf-menu sf-navbar">
            <li class="current">
                <a>Configuration</a>
                <ul>

                    <li>
                        <a href="index.php?page=SysConfig">System Configuration</a>
                    </li>

                    <li>
                        <a href="index.php?page=FileConfig">File Configuration</a>
                    </li>

                    <li>
                        <a href="index.php?page=NetworkConfig">Network Configuration</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.php?page=Files">Files</a>
            </li>
            <li>
                <a href="index.php?page=Maintenance">Maintenance Mode</a>
            </li>
            <li>
                <a href="index.php?page=IETM">IETM</a>
            </li>   
            <li>
                <a>Power Options</a>
                <ul>
                    <li>
                        <a href="index.php?page=Shutdown">Shutdown</a>
                    </li>

                    <li>
                        <a href="index.php?page=Reboot">Reboot</a>
                    </li>
                </ul>
            </li>
        </ul>

    </body>
<br><br><br><br><br>
<body>
<br>
<?php
ob_start();
$currentdir = '/data/'; //Location of Hard Drive

/**
 * @func: Executes the command passed to it as argument and prints the
 * command console output line by line onto the html output stream hence
* giving the illusion of having the command executing in the html window itself.
 */

function html_exec_cmd($cmd)    {
    $proc = popen("($cmd)2>&1", "r");
    echo '<pre>';
    while(!feof($proc)) {
        $result = fgets($proc, 100);
        echo htmlspecialchars($result);
        flush();
    }
    pclose($proc);
    echo '</pre>';
}

switch ($_GET['page'])
{

    case 'SysConfig':
          echo "Welcome to System Config!";
    break;

    case 'FileConfig':
          echo "Welcome to File Config!";
    break;

    case 'NetworkConfig':

?>
<b><fontsize="16">Current Settings:</b></font>

<?php

html_exec_cmd('ifconfig eth0'); 

     break;

     case 'Files':

    $FileCount = 0;
    $dir = opendir($currentdir);
    $array = array();
    echo '<ul>';

echo '<form method = "post" action = "">';

while ($File = readdir($dir)){

echo '<form action="test.php" method = "post">';

//if (is_file($file))

    $ext = pathinfo($File, PATHINFO_EXTENSION);
    if ($ext == '264'){

    $array[] = "$File";

    echo "<INPUT class='radio' type='radio' name='FileName' value='$File' /> <span>$File</span><p>";    

    $FileCount++;   
    }

    }

    echo "<INPUT TYPE = 'Submit' name = 'FormSubmit' value = 'Submit'>";

    echo '</form>';

    if ($_POST['FormSubmit'] == "Submit")
    {
    $FileParameters = $_POST['FileName'];

    $FileExecuteCommand = "cd //; /etc/init.d/matrix-gui-e stop;echo 0 > /sys/devices/platform/vpss/graphics0/enabled;./usr/share/ti/ti-omx/    decode_display_a8host_debug.xv5T -w 1920 -h 1080 -f 60 -c h264 -g 0 -d 0 -i $currentdir$FileParameters;/etc/init.d/matrix-gui-e start";

    echo exec($FileExecuteCommand);

     }

     break;

     case 'Maintenance':

###############################################################
# Page Password Protect 2.13
###############################################################
# Visit http://www.zubrag.com/scripts/ for updates
############################################################### 
#
# Usage:
# Set usernames / passwords below between SETTINGS START and SETTINGS END.
# Open it in browser with "help" parameter to get the code
# to add to all files being protected. 
#    Example: password_protect.php?help
# Include protection string which it gave you into every file that needs to be protected
#
# Add following HTML code to your page where you want to have logout link
# <a href="http://www.example.com/path/to/protected/page.php?logout=1">Logout</a>
#
###############################################################

/*
-------------------------------------------------------------------
SAMPLE if you only want to request login and password on login form.
Each row represents different user.

$LOGIN_INFORMATION = array(
  'zubrag' => 'root',
  'test' => 'testpass',
  'admin' => 'passwd'
);

--------------------------------------------------------------------
SAMPLE if you only want to request only password on login form.
Note: only passwords are listed

$LOGIN_INFORMATION = array(
  'root',
  'testpass',
  'passwd'
);

--------------------------------------------------------------------
*/

##################################################################
#  SETTINGS START
##################################################################

// Add login/password pairs below, like described above
// NOTE: all rows except last must have comma "," at the end of line
$LOGIN_INFORMATION = array(
  'admin' => 'adminpass'
);

// request login? true - show login and password boxes, false - password box only
define('USE_USERNAME', true);

// User will be redirected to this page after logout
define('LOGOUT_URL', 'http://www.example.com/');

// time out after NN minutes of inactivity. Set to 0 to not timeout
define('TIMEOUT_MINUTES', 3);

// This parameter is only useful when TIMEOUT_MINUTES is not zero
// true - timeout time from last activity, false - timeout time from login
define('TIMEOUT_CHECK_ACTIVITY', true);

##################################################################
#  SETTINGS END
##################################################################

///////////////////////////////////////////////////////
// do not change code below
///////////////////////////////////////////////////////

// show usage example
if(isset($_GET['help'])) {
  die('Include following code into every page you would like to protect, at the very beginning (first line):<br>&lt;?php include("' . str_replace('\\','\\\\',__FILE__) . '"); ?&gt;');
}

// timeout in seconds
$timeout = (TIMEOUT_MINUTES == 0 ? 0 : time() + TIMEOUT_MINUTES * 60);

// logout?
if(isset($_GET['logout'])) {
  setcookie("verify", '', $timeout, '/'); // clear password;
  header('Location: ' . LOGOUT_URL);
  exit();
}

if(!function_exists('showLoginPasswordProtect')) {

// show login form
function showLoginPasswordProtect($error_msg) {
?>
<html>
<head>
  <title>Please enter password to access this page</title>
  <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
  <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
</head>
<body>
  <style>
    input { border: 1px solid black; }
  </style>
  <div style="width:500px; margin-left:auto; margin-right:auto; text-align:center">
  <form method="post">
    <h3>Please enter password to access this page</h3>
    <font color="red"><?php echo $error_msg; ?></font><br />
<?php if (USE_USERNAME) echo 'Login:<br /><input type="input" name="access_login" /><br />Password:<br />'; ?>
    <input type="password" name="access_password" /><p></p><input type="submit" name="Submit" value="Submit" />
  </form>
  <br />
  </div>
</body>
</html>

<?php
  // stop at this point
  die();
}
}

// user provided password

if (isset($_POST['access_password'])) {

  $login = isset($_POST['access_login']) ? $_POST['access_login'] : '';
  $pass = $_POST['access_password'];
  if (!USE_USERNAME && !in_array($pass, $LOGIN_INFORMATION)
  || (USE_USERNAME && ( !array_key_exists($login, $LOGIN_INFORMATION) || $LOGIN_INFORMATION[$login] != $pass ) ) 
  ) {
    showLoginPasswordProtect("Incorrect password.");
  }
  else {
    // set cookie if password was validated
    setcookie("verify", md5($login.'%'.$pass), $timeout, '/');

    // Some programs (like Form1 Bilder) check $_POST array to see if parameters passed
    // So need to clear password protector variables
    unset($_POST['access_login']);
    unset($_POST['access_password']);
    unset($_POST['Submit']);
  }

}

else {

  // check if password cookie is set
  if (!isset($_COOKIE['verify'])) {
    showLoginPasswordProtect("");
  }

  // check if cookie is good
  $found = false;
  foreach($LOGIN_INFORMATION as $key=>$val) {
    $lp = (USE_USERNAME ? $key : '') .'%'.$val;
    if ($_COOKIE['verify'] == md5($lp)) {
      $found = true;
      // prolong timeout
      if (TIMEOUT_CHECK_ACTIVITY) {
        setcookie("verify", md5($lp), $timeout, '/');
      }
      break;
    }
  }
  if (!$found) {
    showLoginPasswordProtect("");
  }

}

?>

<B><fontsize=16>Are you sure you want to Format the data disk?</b></font><br><br>

<?php
echo '<form method = "post">';

echo "<INPUT TYPE = 'Submit' name = 'FormatSubmit' value = 'Submit'>";

?>
<br><br><br>
Please check the box to verify you want to Format the data disk.

<Input type = 'Checkbox' Name ='FormatCheck' value ="checked">

<?php
echo '</form>';
if (($_POST['FormatSubmit'] == "Submit") & ($_POST['FormatCheck'] == "checked"))
    {
    html_exec_cmd('echo -e "o\nn\np\n1\n\n\nw\n" | fdisk /dev/sda;sleep 1;mkfs.ext3 /dev/sda1;mount /dev/sda1 /data/');
     }

ob_end_flush();
     break;

     case 'IETM':
          echo "Welcome to IETM";
     break;

        case 'Shutdown':
          //echo "Welcome to Shutdown";

?>

<B><fontsize=16>Are you sure you want to shutdown the DVR?</b></font><br><br>

<?php
echo '<form method = "post">';

echo "<INPUT TYPE = 'Submit' name = 'ShutDownSubmit' value = 'Submit'>";

?>
<br><br><br>
Please check the box to verify you want to shutdown the DVR.

<Input type = 'Checkbox' Name ='ShutDownCheck' value ="checked">

<?php
echo '</form>';
if (($_POST['ShutDownSubmit'] == "Submit") & ($_POST['ShutDownCheck'] == "checked"))
    {
    $ShutDownCommand = "init 0";
    echo exec($ShutDownCommand);

     }

     break;

     case 'Reboot':
          //echo "Welcome to Reboot";

?>

<B><fontsize=16>Are you sure you want to reboot the DVR?</b></font><br>
<br>
<?php

echo '<form method = "post">';
echo "<INPUT TYPE = 'Submit' name = 'RebootSubmit' value = 'Submit'>";
?>
<br><br><br>
Please check the box to verify you want to reboot the DVR.

<Input type = 'Checkbox' Name ='RebootCheck' value ="checked">

<?php

if (($_POST['RebootSubmit'] == "Submit")& ($_POST['RebootCheck'] == "checked"))
{
    $RebootCommand = "reboot";
    echo exec($RebootCommand);

     }

echo '</form>';
     break;  

    default :
           echo "The Radeus DVR";

}  
?>
</body>

</html>
<?php ob_end_flush(); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:35:14.347

如果您要使用 PHP 的`header`函数，则必须在将任何响应发送给用户之前调用它。在这种情况下，阻止此操作的响应是位于您的 PHP 代码之前的页面顶部的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:56:38.227

您可以在 PHP 回显语句中使用一些 javascript 来执行重定向并完全避免 PHP 标头问题。例如：

```
echo '<script type="text/javascript"> window.location = "login.php"; </script>'; 
```

# c++ - bool 冒号初始化

> ID：11831362
> 
> 赞同：4
> 
> 时间：2012-08-06T15:33:18.853
> 
> 标签：c++, boolean, colon

在阅读一些 C++ 代码时，我在一个类中看到并被这行代码弄糊涂了：

```
bool x:1; 
```

在调试版本中，我注意到“x”被初始化为“假”，但我找不到任何关于它的文档。谁能告诉我这个语法是做什么的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T15:34:11.780

这是一个**位领域**。阅读 C++ 教科书中的位域。

的初始化`false`独立于声明。您的代码是否保证取决于您的代码（未给出）。

c++ 标准为编译器为大小为 1 的整数和枚举位域提供了一些余地：将值存储`1`在这样的字段中，您可能会得到值`-1`。幸运的是，这仅适用于大小为 1 的字段，不适用于类型为 的字段`bool`。

# javascript - 在基于焦点的坐标系上画一条椭圆线？

> ID：11831363
> 
> 赞同：1
> 
> 时间：2012-08-06T15:33:21.483
> 
> 标签：javascript, google-maps, math, google-maps-api-3, coordinate-systems

我试图在谷歌地图上画一条虚线，所以我不能使用 eshape.js。我需要在坐标系中创建一个近似椭圆的点数组。它只是为了显示，所以它不必那么精确。

如果有人能解释一下数学就好了。如果您在 javascript 中应用它，将获得额外的积分；)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T18:14:56.213

现在，您可以在 Google Maps API 中执行此操作。最近，Google 为折线添加了符号，允许您使用 SVG 来设置线条样式： [https ://developers.google.com/maps/documentation/javascript/overlays#Symbols](https://developers.google.com/maps/documentation/javascript/overlays#Symbols)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:32:13.977

试一试（创建一个名为 blackpixel.bmp 的 1x1 bmp 并将其添加到您将创建的包含以下代码的 htm 文件旁边，应该可以帮助您获得所需的内容。我在[这里](http://answers.google.com/answers/threadview?id=96923)找到了它：

```
<HTML>
<HEAD>
<TITLE>
Ellipse example drawn to the screen, using a one-pixel black .bmp
image, for jackshu-ga
</TITLE>
<script type="text/javascript">

function draw()
{
coords=ellipseMaker(dataIn.foci1Top.value,dataIn.foci1Left.value,dataIn.foci2Top.value,dataIn.foci2Left.value,dataIn.semiMinor.value)

for(i=0;i<coords.length;i++)
   {
   document.write("<img src='blackpixel.bmp' id='pixel"+i+"' style='container: positioned; position: absolute; top: 50; left: 800'>")
   }

for(j=1;j<coords.length;j++)
   {
   document.images[j].style.top=coords[j][0]
   document.images[j].style.left=coords[j][1]
   }
}

function ellipseMaker(foci1Top, foci1Left, foci2Top, foci2Left,
semiMinor, jumpBy, streamline, increaseUnit, dontPopOutLast){
/* Requires gen 4 browsers: using concat(), shift(), pop()
* My thanks to G.E. Ivey from the sci/sci.math newsgroup 
* who helped with the (for me) complex ellipse translation/rotation
formula.
*/
//validate:
semiMinor=(semiMinor && !isNaN(parseFloat(semiMinor)) &&
parseFloat(semiMinor)>0)?
parseFloat(semiMinor):0.5;
foci1Top=(foci1Top && !isNaN(parseFloat(foci1Top)))?
parseFloat(foci1Top):0;
foci1Left=(foci1Left && !isNaN(parseFloat(foci1Left)))?
parseFloat(foci1Left):0;
foci2Top=(foci2Top && !isNaN(parseFloat(foci2Top)))?
parseFloat(foci2Top):0;
foci2Left=(foci2Left && !isNaN(parseFloat(foci2Left)))?
parseFloat(foci2Left):0;
increaseUnit=(increaseUnit && !isNaN(parseFloat(increaseUnit)))?
Math.abs( parseFloat(increaseUnit) ):0.5;
jumpBy=(jumpBy && !isNaN(parseFloat(jumpBy)))? parseFloat(jumpBy):0;
streamline= (streamline+""=="0")?0:1;
//initialize:
var major=Math.round( (Math.sqrt(
Math.pow(
(Math.max(foci1Top, foci2Top)-Math.min(foci1Top, foci2Top))
,2)+
Math.pow(
(Math.max(foci1Left, foci2Left)-Math.min(foci1Left, foci2Left))
,2)
))*1000 )/1000;
  /* an exception: no major axis length! : */
  var noMajor=0;
  if(!major){major=Math.round( (semiMinor*2)*100 )/100;
  noMajor=1;};
var center=new Array(
Math.round( (((foci1Top+foci2Top)*0.5)) *100)/100,
Math.round( (((foci1Left+foci2Left)*0.5)) *100)/100
);
var semiMajor=Math.round((major/2)*1000)/1000;
while(increaseUnit>semiMajor){/*validate more*/
increaseUnit-=semiMajor;
increaseUnit=Math.round( increaseUnit*10 )/10;
};
var quadrant1=new Array(0);
var quadrant2=new Array(0);
var quadrant3=new Array(0);
var quadrant4=new Array(0);
var output=new Array(0);
//sine, cosine: are ratios/a side length:
var thetaCos=(Math.max(foci1Left,foci2Left) -
Math.min(foci1Left,foci2Left))/major;
var thetaSin=(Math.max(foci1Top,foci2Top) -
Math.min(foci1Top,foci2Top))/major;
var SMsm=semiMajor/semiMinor;
var smSM=semiMinor/semiMajor;
var prevY=0;
//run:
for(var x=semiMajor, y=0; x>=0; x-=increaseUnit, y+=increaseUnit){
if(x<0){x=0;};
if(y>semiMinor){y=semiMinor;};
  /* used formula for Y: | (b/h) * SQRT( POW(h)-POW(x) ) | */
  var Y=Math.round(
Math.abs(
(smSM)*(Math.sqrt( Math.pow(semiMajor,2) - Math.pow(x,2) ))
)*1000
)/1000;
  var X=Math.round((x*1000))/1000;
  //streamline?  
  if(!noMajor && streamline && ( (Y-prevY)>increaseUnit) ){
  Y=Math.round((y*1000))/1000;
  X=Math.round(
Math.abs(
(SMsm)*(Math.sqrt( Math.pow(semiMinor,2) - Math.pow(y,2) ))
)*1000
)/1000;
x=X;
  }
  prevY=Y;
  //build path:
var q1=++quadrant1.length-1;
var q2=++quadrant2.length-1;
var q3=++quadrant3.length-1;
var q4=++quadrant4.length-1;
  /* formulas used below for ellipse position translation from center
in Origin (G.E. Ivey):
     x'= x*cos(theta)+ y*sin(theta)
  y'= -x*sin(theta)+ y*cos (theta)
   then, I reversed signs accordingly to the 4 quadrants.
  */
var xSin=X*thetaSin;
var ySin=Y*thetaSin;
var xCos=X*thetaCos;
var yCos=Y*thetaCos;
quadrant1[q1]=new Array(2);
  quadrant1[q1][0]= Math.round( (( (-xSin) + yCos) + center[0])
*10)/10;
  quadrant1[q1][1]= Math.round( ((xCos + ySin) + center[1]) *10)/10;
quadrant2[q2]=new Array(2);
  quadrant2[q2][0]= Math.round( ( ( xSin + yCos) + center[0]) *10)/10;
  quadrant2[q2][1]= Math.round( (( (-xCos) + ySin) + center[1])
*10)/10;
quadrant3[q3]=new Array(2);
  quadrant3[q3][0]= Math.round( (( xSin + (-yCos)) + center[0])
*10)/10;
  quadrant3[q3][1]= Math.round( (( (-xCos) + (-ySin)) + center[1])
*10)/10;
quadrant4[q4]=new Array(2);
  quadrant4[q4][0]= Math.round( (( (-xSin) + (-yCos)) + center[0])
*10)/10;
  quadrant4[q4][1]= Math.round( ((xCos + (-ySin)) + center[1])
*10)/10;
}
quadrant2=quadrant2.reverse();
quadrant2.shift();
quadrant3.shift();
quadrant4=quadrant4.reverse();
quadrant4.shift();
output=output.concat(quadrant1, quadrant2, quadrant3, quadrant4);
if(!dontPopOutLast){output.pop();};
if(jumpBy){
  if(jumpBy>output.length){
  var fakeOutput=new Array(0);
  fakeOutput[++fakeOutput.length-1]=output[output.length-1];
  return fakeOutput;};
var jumpedOutput=new Array(0);
  for(var j=0; j<output.length; j+=jumpBy){
    if((j+jumpBy) > output.length-1){
    jumpedOutput[++jumpedOutput.length-1]=output[output.length-1];
    break;
    }
  jumpedOutput[++jumpedOutput.length-1]=output[j];
  }
return jumpedOutput;}
return output;
/*keep this comment to reuse freely
http://www.unitedscripters.com */} 
</script>

</HEAD>
<BODY>
<H3>Fill out the information in the boxes, then click 'draw'</H3>
Note: you need a 1 x 1 pixel black bitmap (.bmp) image in the same
directory as this file, for it to work.<p>
<FORM id="dataIn">
<table cellspacing="0" cellpadding="0">
<tr><td>Pixels down the screen, leftmost ellipse tip:  </td><td><input
type="text" length=5 value="200" id="foci2Top"></td>
<tr><td>Pixels across the screen, leftmost ellipse tip: 
</td><td><input type="text" length=5 value="100" id="foci2Left"></td>
<tr><td>Pixels down the screen, rightmost ellipse tip: 
</td><td><input type="text" length=5 value="200" id="foci1Top"></td>
<tr><td>Pixels across the screen, rightmost ellipse tip: 
</td><td><input type="text" length=5 value="300" id="foci1Left"></td>
<tr><td>Enter half the 'squashed' width of the ellipse: 
</td><td><input type="text" length=5 value="130"id="semiMinor"></td>
<tr><td><input type=button value="Draw the ellipse" onClick =
"draw()"></td><td></td>
</tr>
</form>

</body>
</html> 
```

# c# - 为 XML 元素创建命名空间

> ID：11831365
> 
> 赞同：0
> 
> 时间：2012-08-06T15:33:29.847
> 
> 标签：c#, xml, xaml, windows-8

我在将新节点（带有命名空间）添加到用于生成 xaml 的 xml 文档时遇到问题。我这样做是这样的：

```
XmlElement richTextColumns = xmlDoc.CreateElement("local2:RichTextColumns"); 
```

但我收到错误 0xC00CE01D（在调用 xmlDoc.getxml 时）。我尝试将属性 xmlns:local2="using:App2.Common" 添加到 xmlDoc：

```
var att = xmlDoc.CreateAttribute("xmlns:local2");
att.InnerText = "using:Dictionary.Common";
xmlDoc.Attributes.SetNamedItem(att); 
```

它导致此错误

你调用的对象是空的。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:52:22.070

如果您想创建具有特定命名空间的元素，请使用[此调用](http://msdn.microsoft.com/en-us/library/windows/apps/windows.data.xml.dom.xmldocument.createelementns)：

```
xmlDoc.CreateElementNS("using:Dictionary.Common", "local2:elementName") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:36:59.843

根据[http://msdn.microsoft.com/en-us/library/aa335908(v=vs.71)](http://msdn.microsoft.com/en-us/library/aa335908%28v=vs.71%29)，带有单个参数的 CreateAttribute 方法不设置命名空间，而是设置元素的名称。尝试使用此方法的其他排列之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:49:43.467

您可以像通常那样创建一个元素，然后重新加载文档并添加您要添加​​的命名空间属性。

```
 XmlDocument doc = new XmlDocument();
    doc.LoadXml("link to yuor xml");
    XNamespace xmlns = "local2";
    public static void SetDefaultXmlNamespace(XElement xelem, XNamespace xmlns)
    {

        foreach(var e in xelem.Elements())
            e.SetDefaultXmlNamespace(xmlns);
    }

    doc.Root.SetDefaultXmlNamespace("local2") 
```

# jquery - 彩盒中有多个视频？第一次加载但其他失败

> ID：11831366
> 
> 赞同：1
> 
> 时间：2012-08-06T15:33:37.737
> 
> 标签：jquery, colorbox

我正在使用 Colorbox 的“rel 功能”在 1 个灯箱中显示本地图像和 YouTube 视频的混合，我已经设法实现了这一点。问题是我需要插入多个视频，但是当我这样做时，我无法在彩盒中加载多个视频，并显示“请求不成功：错误”。我已将视频设置为在具有设定宽度和高度的 iframe 中显示，并且无法理解为什么 1 有效但不超过 1。（如果我切换它们显示第一个显示的始终显示但没有其他显示的顺序，所以我知道源视频是好的。

这是我的代码：

```
<script>
    jQuery(document).ready(function () {
        jQuery('a.gallery1').colorbox({ rel:'group1' });
        jQuery('a.gallery2').colorbox({ rel:'group2' });
        jQuery('a.gallery3').colorbox({ rel:'group3' });
        jQuery('a.gallery4').colorbox({ rel:'group4' });
        jQuery('a.gallery5').colorbox({ rel:'group5' });
        jQuery('a.gallery6').colorbox({ rel:'group6' });
        jQuery('a.gallery7').colorbox({ rel:'group7' });
        jQuery('a.gallery8').colorbox({ rel:'group8' });
        jQuery('a.gallery9').colorbox({ rel:'group9' });
        jQuery('a.gallery10').colorbox({ rel:'group10' });
        jQuery('#video').colorbox({iframe:true, innerWidth:493, innerHeight:370});

    }); 
</script>

<a class="gallery1" href="images/content/cosmos1Full.jpg" title="Salvatore Arancio, title of work, year">
                    <img src="images/content/cosmos1.jpg"  alt="cosmos1" width="484" height="370" />
                    <a class="gallery1" href="images/content/ohoopee2.jpg" title="Salvatore Arancio, title of work, year">
                    <a class="gallery1" href="images/content/ohoopee3.jpg" title="Salvatore Arancio, title of work, year">
                    <a class='gallery1' href="http://vimeo.com/moogaloop.swf?clip_id=29956704&server=vimeo.com&show_title=1&show_byline=1&show_portrait=0&color=00ADEF&fullscreen=1&" title="Ed Atkins, 'Death Mask 3', 2011\. Extract." id="video">
                    <a class='gallery1' href="http://www.youtube.com/v/rhCssm8BMNM?version=3" title="A Tumour (Ed Atkins)" id="video"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:42:09.540

我的猜测是您正在重用视频 id，即使 HTML 规范要求 id 是唯一的。如果您打算将其应用于多个元素，请将其更改为一个类。

# .net - 如何使用 c# 在 windows 应用程序中使用提交和回滚事务

> ID：11831369
> 
> 赞同：0
> 
> 时间：2012-08-06T15:33:48.223
> 
> 标签：.net, winforms, sql-server-2008, stored-procedures

我正在使用 Windows 应用程序。我有一个数据集。从那我正在使用 for 循环逐行读取数据。在 for 循环中，我使用存储过程将数据插入数据库。（此过程在内部 for 循环中进行）。

但我怀疑我正在逐行阅读并正在执行存储过程。如果在第 3 行中如果有错误的数据......我会遇到异常。但在将 2 行插入数据库之前。所以如果所有数据都是正确的，我就必须提交。如果不是，我必须回滚。

你能请任何人给我一个想法......

```
for (i = 0; i < Passdataset.Tables[0].Rows.Count - 2; i++)
{
    currentRow = Passdataset.Tables[0].Rows[i];
    if (currentRow == null)
        continue;
    GLItem1 = new taGLTransactionLineInsert_ItemsTaGLTransactionLineInsert();
    GLTrans = new GLTransactionType();
    if (rdoDateFromFile.Checked == true)
    {
        trxdate = currentRow[mapdate].ToString();
    }

    if (singleORdouble != "")
    {
        decimal amount = Convert.ToDecimal(currentRow[amount1].ToString());
        if (amount < 0)
        {
            decimal amt = Math.Abs(amount);
            GLItem1.CRDTAMNT = amt;
        }
        else
        {
            decimal amt1 = Math.Abs(amount);
            GLItem1.DEBITAMT = amt1;
        }
    }

    string con2 = String.Format(@"data source=localhost;initial catalog=TWO;integrated security=SSPI;persist security info=False;packet size=4096");
    SqlConnection strcon = new SqlConnection(con2);

    SqlCommand NextJourna = new SqlCommand("taGetNextJournalEntry", strcon);
    NextJourna.CommandType = CommandType.StoredProcedure;
    NextJourna.CommandText = "taGetNextJournalEntry";
    NextJourna.Parameters.Add("@O_vJournalEntryNumber", SqlDbType.Char, 13);
    NextJourna.Parameters["@O_vJournalEntryNumber"].Direction = ParameterDirection.Output;
    NextJourna.Parameters.Add("@O_iErrorState", SqlDbType.Int, 250);
    NextJourna.Parameters["@O_iErrorState"].Direction = ParameterDirection.Output;
    strcon.Open();

    NextJourna.ExecuteNonQuery();

    foreach (taGLTransactionLineInsert_ItemsTaGLTransactionLineInsert items in LineItems)
    {
        if (items != null)
        {
            SqlCommand myCommand = new SqlCommand("taGLTransactionLineInsert", strcon);
            myCommand.CommandType = CommandType.StoredProcedure;
            myCommand.CommandText = "taGLTransactionLineInsert";
            myCommand.Parameters.Add("@I_vBACHNUMB", SqlDbType.Char).Value = items.BACHNUMB;
            myCommand.Parameters.Add("@I_vCRDTAMNT", SqlDbType.Decimal).Value = items.CRDTAMNT;
            myCommand.Parameters.Add("@I_vDEBITAMT", SqlDbType.Decimal).Value = items.DEBITAMT;
            myCommand.Parameters.Add("@I_vSQNCLINE", SqlDbType.Int).Value = SQNCLINE;
            myCommand.Parameters.Add("@I_vACTNUMST", SqlDbType.Char).Value = items.ACTNUMST;
            myCommand.Parameters.Add("@I_vDSCRIPTN", SqlDbType.Char).Value = items.DSCRIPTN;
            myCommand.Parameters.Add("@I_vJRNENTRY", SqlDbType.Int).Value = nextjournl.Trim();
            myCommand.Parameters.Add("@O_iErrorState", SqlDbType.Int, 250);
            myCommand.Parameters["@O_iErrorState"].Direction = ParameterDirection.Output;
            myCommand.Parameters.Add("@oErrString", SqlDbType.VarChar, 255);
            myCommand.Parameters["@oErrString"].Direction = ParameterDirection.Output;
            SQNCLINE = SQNCLINE + 16384;
            strcon.Open();
            myCommand.ExecuteNonQuery();
        }
    }

    SqlCommand myCommand1 = new SqlCommand("taGLTransactionHeaderInsert", strcon);
    myCommand1.CommandType = CommandType.StoredProcedure;
    myCommand1.CommandText = "taGLTransactionHeaderInsert";

    myCommand1.Parameters.Add("@I_vBACHNUMB", SqlDbType.Char).Value = GLHdr.BACHNUMB;
    myCommand1.Parameters.Add("@I_vREFRENCE", SqlDbType.Char).Value = GLHdr.REFRENCE;
    myCommand1.Parameters.Add("@I_vJRNENTRY", SqlDbType.Int).Value = nextjournl.Trim();
    strcon.Open();
    myCommand1.ExecuteNonQuery();
} 
```

# sharepoint - 通过 SOAP 访问 Sharepoint excelservice.asmx 时出现 HTTP 503 错误

> ID：11831370
> 
> 赞同：0
> 
> 时间：2012-08-06T15:33:49.480
> 
> 标签：sharepoint, soap, sharepoint-2010, http-status-code-503

我在宾夕法尼亚州立大学的 Smeal 商学院工作。我正在为供应链计划做一个项目，我正在 Sharepoint 中创建一个使用大量 UDF 的 excel 工作簿。我访问工作簿或使用其他 UDF 没有问题，但是当我尝试使用 OpenWorkbookForEditing() 时，我得到以下堆栈跟踪：

System.Net.WebException：请求失败，HTTP 状态为 503：服务不可用。在 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall) 在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) 在 ClassName.ExcelWebService .ExcelService.OpenWorkbookForEditing(String workbookPath, String uiCultureName, String dataCultureName, Status[]& status) 在 ClassName.ClassNameFunctions.testWriteCell()

此外，我尝试通过 PHP SOAP 访问 excelservice.asmx 并没有收到响应。每次连接到此服务的尝试都会在 IIS 日志中提供类似于以下内容的 503 错误：

2012-08-06 15:14:58 xxxx::xxx:xxxx:xxxx:xxxxxxx POST /_vti_bin/excelservice.asmx - 80 - xxxx::xxx:xxxx:xxxx:xxxxxxx Mozilla/4.0+（兼容；+MSIE+ 6.0;+MS+Web+服务+客户端+协议+2.0.50727.5456) 503 0 0 59

我已经尝试更改 Sharepoint Central Administration 中的大部分设置，以及 IIS 中的一些设置。有谁知道是什么导致了这个问题？谢谢。

我在 Windows Server 2008 上运行 Sharepoint 2010 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:14:35.363

可以看看这篇文章也许会有所帮助。

[http://technet.microsoft.com/en-us/library/ee513104.aspx](http://technet.microsoft.com/en-us/library/ee513104.aspx)

这里建议的解决方案是重新启动。如果这是一台开发机器，那应该没什么大不了的。

还要确保没有应用程序池停止，因为这可能使服务不可用。

# darcs - 编写 darcs 脚本的正确方法是什么？

> ID：11831372
> 
> 赞同：5
> 
> 时间：2012-08-06T15:33:54.487
> 
> 标签：darcs

我有几个不同的 darcs 存储库，我想编写一个脚本，以便在一天结束时自动从这些存储库推送更改。[我在这个线程](http://comments.gmane.org/gmane.comp.version-control.darcs.user/26215)上读到，编写 darcs 脚本的“正确”方法是使用该库。但是在这里[http://darcs.net/Library](http://darcs.net/Library)它说“这是一项正在进行中的工作”并且缺乏稳定的 API。编写 darcs 的“正确”方法是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T17:26:04.253

像任何其他命令行程序一样，编写日常 darcs 命令的脚本非常好。编写交互式 darcs 命令的脚本也很好，但这就是它变得脆弱的地方，因为这些交互式提示在新的 darcs 版本中经常得到改进和更改。因此，如果可能的话，使命令成为非交互式的，例如使用 -a/--all 标志。推拉很容易，这是我从 /etc/crontab 运行的常规拉取：

```
*/15 * * * * darcsden  cd /home/darcsden/darcs/darcs-reviewed; darcs pull -a http://darcs.net/reviewed >/dev/null # 2>&1 
```

但要注意可能会阻止成功的非交互式推送或拉取的事情：

*   冲突，尤其是未记录的更改
*   错误的用户/文件所有权/文件权限
*   异常终止留下的流浪 _darcs/lock 文件

# jsf - JSF：根据用户输入文本创建数据表并从单选按钮选择的特定行收集信息

> ID：11831375
> 
> 赞同：0
> 
> 时间：2012-08-06T15:34:14.460
> 
> 标签：jsf, datatable, rendering, valuechangelistener, htmldatatable

我有一个页面，我要求用户在 inputText 框中输入一个值。根据输入的值，我使用数据库中的信息创建一个日期表。数据表中的一列是 selectOneRadio，因此每一行都有自己的单选按钮。然后，用户应该能够选择其中一个单选按钮，然后单击命令按钮（它是数据表的页脚），该按钮将根据选择的单选按钮获得选择了哪一行。我遇到的问题是按钮单击后没有调用支持 bean 方法。此问题仅在我转到页面后创建表时发生。如果我硬编码一个值以导致数据表在页面创建时存在，则不会发生此问题。一世'

> 这是jsf

```
<h:panelGrid columns="3">
   <h:outputLabel for="searchByContrId" value="Company Code: " />
   <h:inputText id="searchByContrId" value="#{applContAdminB.searchContrId}">
   </h:inputText>
   <h:commandButton type="submit" value="Search" id="submitSearch" action="#{applContAdminB.getEmployeesByContrId}" />
</h:panelGrid>
<br />
<h:outputText rendered="#{applContAdminB.contrIdEntered}" value="Current Administrator: " />
<h:outputText value="#{applContAdminB.adminName}" />
<h:dataTable id="empTable" var="loc" rendered="#{applContAdminB.contrIdEntered}" value="#{applContAdminB.employeesListModel}" binding="#{applContAdminB.htmlDataTable}">
    <h:column>
       <h:selectOneRadio onclick="updateRadioButtons(this);" valueChangeListener="#{applContAdminB.setSelectedRow}">
          <f:selectItem itemValue="null" itemLabel="" />
       </h:selectOneRadio>
    </h:column>
    <h:column>
       <f:facet name="header">Employee Name</f:facet>
       <h:outputText value="#{loc.empName}" />
    </h:column>
    <h:column>
       <f:facet name="header">Employee Email</f:facet>
       <h:outputText value="#{loc.empEmail}" />
    </h:column>
    <h:column>
       <f:facet name="header">Status</f:facet>
       <h:outputText value="#{loc.userStatus}" />
    </h:column>
    <f:facet name="footer">
       <h:panelGrid columns="2">
          <h:commandButton type="submit" id="transferRights-submit" value="Transfer Rights" action="#{applContAdminB.adjustAdminUser}" />
       </h:panelGrid>
    </facet>
 </h:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:45:40.830

你是在自问自答。这是使用 ajax 渲染的一个弱点。我有一个导航小部件有类似的问题，我通过 ajax 切换了渲染绑定到的属性。在隐藏最初渲染的面板的同时，我无法使用任何魔法来渲染不可见的面板。您可以尝试通过 javascript 隐藏 div，并且当您的 ajax 返回时相应地旋转 div(s) 的“显示”属性。我就是这样解决的。很不幸，但我找不到理想的替代解决方案。- 他

# html - 使 Flash 文件缩放到 div 宽度并根据其纵横比保持高度

> ID：11831379
> 
> 赞同：2
> 
> 时间：2012-08-06T15:34:26.090
> 
> 标签：html, css, flash, height, swfobject

我们在根据父 div 宽度使 Flash 文件缩放 100%，同时仍根据其纵横比保持高度时遇到问题。

请查看 jsFiddle (http://jsfiddle.net/LgegF) 上的代码或将以下代码粘贴到空的 html 页面中：

```
<!doctype html>

<html>
<head>
    <meta charset="utf-8">

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>

    <script type="text/javascript">
        swfobject.embedSWF("http://www.diescon.net/yellowfestival/400x400.swf", "flash-content", "100%", "100%", "9.0.0", '', null, {wmode: 'transparent'});
    </script>

    <style type="text/css">
        body {
            background-color: #ccc;
            margin: 0;
        }
        #container {
            width: 400px; /* Fixed width according to page template */
            height: auto; /* Container height should adapt to the content, we do not want to set a fixed height here */
            background-color: pink; /* Background of container */
            position: absolute;
            top: 0;
            left: 0;
        }
        #flash-content {
            width: 400px; /* Fill the width of the parent, could be fixed but ideally 100% */
            height: 100%; /* We want the height of the flash object/flash content to scale according to the aspect ratio of the swf, we do not want to set a fixed height here */
        }

        /* This is what we really want */
        #what-we {
            width: 400px;
            height: auto;
            background-color: pink;
            position: absolute;
            top: 0;
            right: 0;
        }
        #really-want {
            width: 100%;
            height: 400px; /* This is what we really want, but without setting this height fixed */
            background-color: yellow;
        }
    </style>
</head>
    <div id="container">
        <div id="flash-content"></div>
    </div>
    <div id="what-we">
        <div id="really-want">
            <span>This is what we really want</span>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T21:04:29.237

我有一个类似的问题，我发现这个页面非常有用： [http ://css-tricks.com/NetMag/FluidWidthVideo/Article-FluidWidthVideo.php](http://css-tricks.com/NetMag/FluidWidthVideo/Article-FluidWidthVideo.php)

根据我在本文中学到的知识，我建议将您的 HTML 代码更改为：

```
<div id="container">
    <div class="videoWrapper">
        <div id="flash-content"></div>
    </div>
</div> 
```

并通过添加更改您的 CSS 代码：

```
.videoWrapper {
    position: relative;
    padding-bottom: 100%;  /* 1:1 */
    padding-top: 0px;
    height: 0;
}
.videoWrapper object, .videoWrapper embed, {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
} 
```

你可以在这里看到结果：http: [//jsfiddle.net/LgegF/56/](http://jsfiddle.net/LgegF/56/)

希望这有帮助。

帕特布里佩索

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:15:43.393

一起省略 flash 容器的 css 高度声明。Swf 通常会进行缩放（或者您可以在嵌入/swfobject 选项中设置它们的缩放行为），因此如果您只是限制宽度，则 swf 本身的高度也会相应地缩放。

[编辑：] 工作小提琴（带有非常基本的 swf 嵌入代码）：http: [//jsfiddle.net/LgegF/1/](http://jsfiddle.net/LgegF/1/) 您注意到缩放浏览器时 swf 是如何缩放的。swf 顶部和底部的白色是由于包含对象、swfobject 或标签，您可以控制 swf 本身的缩放方式（缩放模式、对齐、valign 等）。不过，您注意到的是 swf 如何使用容器的宽度来确定其大小，即适合宽度并相应地缩放高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:09:50.223

看来您正在寻找的是

```
width: 100%;
height: auto; 
```

让我知道结果如何。

-布赖恩

# jquery - jQuery Mobile 使用 .changePage() 切换到已经在 dom 中的“页面”

> ID：11831385
> 
> 赞同：2
> 
> 时间：2012-08-06T15:34:47.083
> 
> 标签：jquery, dom, jquery-mobile, swipe

现在我的 DOM 有三个 div `data-roll="page"`，它们都有唯一的 id。如果我使用以下代码，它可以工作，但 jQuery Mobile 正在创建一个新节点，而不是切换到已经存在的节点。

```
$('div.ui-page').live("swipeleft", function(){
    var nextpage = $(this).next('div[data-role="page"]');
    // swipe using id of next page if exists
    if (nextpage.length > 0) {
        console.log(nextpage);
        $.mobile.changePage(nextpage.attr('id'), {transition: 'slide'});
    }
}); 
```

我也尝试将 nextpage 传递给该`.chagePage`方法，但是当页面设置了 id 时，我会收到以下错误。

```
TypeError: b.split is not a function 
```

所以我希望直接切换到 DOM 中已经存在的“页面”，而不是从我的 swipeleft 处理程序创建一个新页面。

我正在使用 jQuery 1.7.1 和 jQuery Mobile 1.1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:43:30.753

您是否尝试过传入 jQuery 对象而不是字符串？

```
$(document).delegate('.ui-page', "swipeleft", function(){
    var $nextPage = $(this).next('[data-role="page"]');
    // swipe using id of next page if exists
    if ($nextPage.length > 0) {
        $.mobile.changePage($nextPage, { transition: 'slide' });
    }
}).delegate('.ui-page', "swiperight", function(){
    var $prevPage = $(this).prev('[data-role="page"]');
    // swipe using id of next page if exists
    if ($prevPage .length > 0) {
        $.mobile.changePage($prevPage, { transition: 'slide', reverse : true });
    }
});​ 
```

这是一个演示：http: [//jsfiddle.net/V3CXF/](http://jsfiddle.net/V3CXF/)

否则我认为你必须在你的字符串 ID 前面加上一个哈希标记才能使它成为一个有效的选择器：

```
$(document).delegate('.ui-page', "swipeleft", function(){
    var $nextPage = $(this).next('[data-role="page"]');
    // swipe using id of next page if exists
    if ($nextPage.length > 0) {
        $.mobile.changePage('#' + $nextPage[0].id, { transition: 'slide' });
    }
}).delegate('.ui-page', "swiperight", function(){
    var $prevPage = $(this).prev('[data-role="page"]');
    // swipe using id of next page if exists
    if ($prevPage .length > 0) {
        $.mobile.changePage('#' + $prevPage[0].id, { transition: 'slide', reverse : true });
    }
});​ 
```

这是一个演示：http: [//jsfiddle.net/V3CXF/1/](http://jsfiddle.net/V3CXF/1/)

请注意，我换成`.live()`了现在已贬值的（从 jQuery Core 1.7 开始）`.delegate()`。`.live`如果您使用的是 jQuery Core 1.7 或更新版本，则可以`.on()`改用。

文档`.live()`：[http ://api.jquery.com/live](http://api.jquery.com/live)

# php - 从源代码安装 php json 扩展时出错

> ID：11831387
> 
> 赞同：1
> 
> 时间：2012-08-06T15:34:48.243
> 
> 标签：php, json, fedora, php-extension

我正在尝试在 Fedora 17 上为我的 php 安装 json 扩展。

我从这里下载了包

[http://pecl.php.net/get/json-1.2.1.tgz](http://pecl.php.net/get/json-1.2.1.tgz)

并`phpize`在目录中运行，然后配置，一切正常。

但是当我运行make时，会出现这个错误。

我已经搜索了错误，但没有出现任何解决方案。

有什么建议吗？

我必须这样做，因为在我的 php.ini 配置中我得到了“--disable-json”

当我运行 pecl install json 以启用扩展时，请向我显示 pecl 的其他错误。我想从 pecl 手动编译包！

谢谢！

谢谢

```
[juan@fedoris json-1.2.1]$ sudo make
[sudo] password for juan: 
/bin/sh /home/juan/recursos/json-php/json-1.2.1/libtool --mode=compile cc  -I. -I/home/juan/recursos/json-php/json-1.2.1 -DPHP_ATOM_INC -I/home/juan/recursos/json-php/json-1.2.1/include -I/home/juan/recursos/json-php/json-1.2.1/main -I/home/juan/recursos/json-php/json-1.2.1 -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -DHAVE_CONFIG_H  -g -O2   -c /home/juan/recursos/json-php/json-1.2.1/json.c -o json.lo 
 cc -I. -I/home/juan/recursos/json-php/json-1.2.1 -DPHP_ATOM_INC -I/home/juan/recursos/json-php/json-1.2.1/include -I/home/juan/recursos/json-php/json-1.2.1/main -I/home/juan/recursos/json-php/json-1.2.1 -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib -DHAVE_CONFIG_H -g -O2 -c /home/juan/recursos/json-php/json-1.2.1/json.c  -fPIC -DPIC -o .libs/json.o
/home/juan/recursos/json-php/json-1.2.1/json.c:44:1: error: unknown type name ‘function_entry’
/home/juan/recursos/json-php/json-1.2.1/json.c:45:5: warning: braces around scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:45:5: warning: (near initialization for ‘json_functions[0]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:45:5: warning: initialization makes integer from pointer without a cast [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:45:5: warning: (near initialization for ‘json_functions[0]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:45:5: warning: excess elements in scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:45:5: warning: (near initialization for ‘json_functions[0]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:45:5: warning: excess elements in scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:45:5: warning: (near initialization for ‘json_functions[0]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:45:5: warning: excess elements in scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:45:5: warning: (near initialization for ‘json_functions[0]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:45:5: warning: excess elements in scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:45:5: warning: (near initialization for ‘json_functions[0]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:46:5: warning: braces around scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:46:5: warning: (near initialization for ‘json_functions[1]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:46:5: warning: initialization makes integer from pointer without a cast [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:46:5: warning: (near initialization for ‘json_functions[1]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:46:5: warning: excess elements in scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:46:5: warning: (near initialization for ‘json_functions[1]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:46:5: warning: excess elements in scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:46:5: warning: (near initialization for ‘json_functions[1]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:46:5: warning: excess elements in scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:46:5: warning: (near initialization for ‘json_functions[1]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:46:5: warning: excess elements in scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:46:5: warning: (near initialization for ‘json_functions[1]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:47:5: warning: braces around scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:47:5: warning: (near initialization for ‘json_functions[2]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:47:5: warning: initialization makes integer from pointer without a cast [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:47:5: warning: (near initialization for ‘json_functions[2]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:47:5: warning: excess elements in scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:47:5: warning: (near initialization for ‘json_functions[2]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:47:5: warning: excess elements in scalar initializer [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:47:5: warning: (near initialization for ‘json_functions[2]’) [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:58:5: warning: initialization from incompatible pointer type [enabled by default]
/home/juan/recursos/json-php/json-1.2.1/json.c:58:5: warning: (near initialization for ‘json_module_entry.functions’) [enabled by default]
make: *** [json.lo] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:58:37.543

您下载的软件包于 2006 年发布，适用于 php 4。您不太可能将其编译为 php 5.4.5 的扩展。`--disable-json`正如指出的那样，在从 phpinfo() 中删除后，最好使用“配置命令”重新编译 php 。

# mysql - LEFT JOIN 语法错误

> ID：11831389
> 
> 赞同：0
> 
> 时间：2012-08-06T15:34:51.903
> 
> 标签：mysql, join, left-join

这里有什么问题？

```
SELECT u.id
FROM user u
LEFT JOIN group g ON g.id=u.group_id 
```

返回以下错误

```
#1064 - You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to
use near 'group g ON g.id=u.group_id LIMIT 0, 30' at line 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:37:18.543

`GROUP`由于该`GROUP BY`子句，是 SQL 标准中的保留字。甚至 Stack Overflow 也用蓝色突出显示它；）

如果要`group`用作标识符，则必须像这样引用它：

```
`group` 
```

您也可以将表格重命名为更有意义的名称，例如`UserGroup`. 这也将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:38:02.797

“组”是 MySQL 的保留关键字。

您可以通过下一个查询避免此错误：

```
SELECT u.id
FROM user u
LEFT JOIN `group` g ON g.id=u.group_id 
```

建议避免使用“组”作为表名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:38:36.857

'group' 是 SQL 的关键字。你可以试试这个：

```
SELECT u.id
FROM 'user' u
LEFT JOIN 'group' g ON u.group_id = g.id 
```

# cocoa - Cocoa：从“Æ”中提取“A”

> ID：11831392
> 
> 赞同：0
> 
> 时间：2012-08-06T15:34:58.863
> 
> 标签：cocoa, nsstring

我有一堆 NSStrings，我想从中获取第一个字符并将它们匹配在 AZ 和 # 范围内，作为不适用的东西的全部捕获。

不同的字素（我相信在一些维基百科之后这是正确的词）一直给我带来麻烦。例如，我想从“Æ”中提取 A。

我查看了 CFStringTransform、规范化和折叠，但都没有达到预期的效果。

有没有可靠的方法来做到这一点？我正在使用的所有字符串都是 UTF8，如果这有所作为的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:41:49.873

Æ 不能分解成组件。它不是 A+E 的复合字形，而是一个单独的字形。复合字形类似于 a+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:40:53.723

你想摆脱所有的æ？

如果你这样做，这应该有效。

```
NSString *string = @"Æaæbcdef";
string = [string stringByReplacingOccurrencesOfString:@"æ" withString:@"a"];
string = [string stringByReplacingOccurrencesOfString:@"Æ" withString:@"A"]; 
```

## 编辑

重读，你似乎只想要第一个字符：

```
NSString *string = @"Æaæbcdef";
NSString *firstChar = [string substringToIndex:1];
firstChar = [firstChar stringByReplacingOccurrencesOfString:@"æ" withString:@"a"];
firstChar = [firstChar stringByReplacingOccurrencesOfString:@"Æ" withString:@"A"];

NSString *finalString = [NSString stringWithFormat:@"%@%@", firstChar, [string substringFromIndex:1]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:37:31.687

关于“Æ”的事情是它本身就是一个ascii字符。不是两个不同字符的组合，因此您无法从中提取 A，因为它只有 1 个字符。

编辑：

尽管您可以执行检查以查看字符串是否等于“Æ”，并且如果它确实告诉它用“A”切换它或将其转换为它的 dec，形成并减去 81，这将给您一个“A”。

# c# - gridview e.CommandArgument 字符串格式不正确

> ID：11831394
> 
> 赞同：4
> 
> 时间：2012-08-06T15:35:07.910
> 
> 标签：c#, asp.net, gridview

我正在尝试将 pdf 从我的数据库中带到我的 gridview 并允许用户单击它并下载 pdf。我正在尝试关注此处已解决的问题：

[从 Gridview 的 BoundField 访问数据](https://stackoverflow.com/questions/4014758/accessing-data-from-a-boundfield-of-gridview)

但是，我收到以下错误：

```
Input string was not in a correct format. 
```

这是我的 asp.net 代码：

```
 <Columns>
         <asp:CommandField ShowEditButton="True" ControlStyle-CssClass="savefile"/>
         <asp:BoundField DataField="ID" HeaderText="ID" InsertVisible="False" 
             ReadOnly="True" SortExpression="ID" />
         <asp:BoundField DataField="event_name" HeaderText="event_name" 
             SortExpression="event_name" />

         <asp:TemplateField HeaderText="PDF">

   <ItemTemplate>
       <asp:Button ID="Button1" ButtonType="Link" CommandName="DownloadFile" HeaderText="Download"  runat="server" Text="Button" />

    </ItemTemplate>

   <EditItemTemplate>

       <asp:FileUpload ID="FileUpload1" runat="server" /> // shown only in edit mode

   </EditItemTemplate>

  </asp:TemplateField>

     </Columns>
 </asp:GridView> 
```

和相应的c#代码：

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
    {

    if (e.CommandName == "DownloadFile")
    {

        int index = Convert.ToInt32(e.CommandArgument);
        string id = GridView1.DataKeys[index].Value.ToString();
        SqlConnection con = new SqlConnection(strcon);
        string command = "Select pdf from table where id = @id";
        SqlCommand cmd = new SqlCommand(command, con);

        cmd.Parameters.AddWithValue(id, "id");
        SqlDataReader reader = cmd.ExecuteReader();
        reader.Read();
        Response.Clear();
        Response.ContentType = "application/pdf";
        Response.BinaryWrite((Byte[])reader[0]);

        Response.Flush();

        Response.End(); 
    }

} 
```

我的 c# 代码中的错误行是这样的：

```
int index = Convert.ToInt32(e.CommandArgument); 
```

提前感谢您的帮助！

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - -

我的按钮字段现在看起来像这样：

```
<asp:Button ID="Button1" ButtonType="Link" CommandName="DownloadFile" CommandArgument='<%#Container.DataItemIndex%>' HeaderText="Download"  runat="server" Text="Button" /> 
```

和我的 c# 错误代码行：

```
int index = Convert.ToInt32(e.CommandArgument); 
```

我仍然收到同样的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:39:25.353

您没有指定`CommandArgument`. 因此，您的错误正在发生，因为您试图将空白字符串转换为整数。

将行索引添加为您的`CommandArgument`：

尝试将此添加到您的`Button`控件中：

```
<asp:Button ID="Button1"
            ButtonType="Link"
            CommandName="DownloadFile"
            CommandArgument='<%#Container.DataItemIndex%>'
            HeaderText="Download"
            runat="server"
            Text="Button" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T15:41:05.917

您不是在为它们分配值，`CommandArgument`而是在访问它们，`RowCommand`这是导致错误的原因。

```
 <asp:Button ID="Button1" ButtonType="Link" CommandName="DownloadFile" HeaderText="Download"  runat="server" Text="Button" CommandArgument="1" /> 
```

正如@Curt 所说，您可以将硬编码的 CommandArgument 值替换为绑定值。

```
CommandArgument='<%#eval("DataField")' 
```

使用 ToString

```
int index = Convert.ToInt32(e.CommandArgument.ToString()); 
```

# macos - NSUserNotification 的样式

> ID：11831395
> 
> 赞同：13
> 
> 时间：2012-08-06T15:35:12.543
> 
> 标签：macos, osx-mountain-lion, nsusernotification

仅当`NSUserNotification`用户在系统偏好设置中将我的应用程序的通知样式设置为“警报”时，才会显示操作按钮。我可以以某种方式将我的应用程序的这种样式设置为默认值，而不是依靠用户手动选择它吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T20:39:50.167

我花了一段时间才找到如何在我自己的应用程序中实现这一点。
根据 Apple 的[info.plist 键参考](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW1 "info.plist 键参考")：

> **NSUserNotificationAlertStyle**指定通知样式是**横幅**、**警报**还是**无**。默认值为横幅，这是推荐的样式。

在您的情况下，您需要在 info.plist 中使用值**alert定义键****NSUserNotificationAlertStyle**。

# jsf-2 - JSF 2.X UI Component 使用 ValueExpression

> ID：11831401
> 
> 赞同：0
> 
> 时间：2012-08-06T15:35:21.017
> 
> 标签：jsf-2

我正在尝试构建一个简单的组件来了解 JSF 2.X 如何以及为什么会以它的方式工作。我一直在使用较新的注释，并试图拼凑出一个清晰的例子。

所以我已经构建了我的组件并将其部署在一个 xhtml 文件中，如下所示：

```
<kal:day value="K.Day" title="Kalendar" model="#{kalendarDay}"/> 
```

在 UIComponent 中，我执行以下操作：

```
ValueExpression ve      = getValueExpression("model");
if (ve != null) 
{
    System.out.println("model expression "+ve.getExpressionString());
    model = (KalendarDay) ve.getValue(getFacesContext().getELContext());
    System.out.println("model "+model);
} 
```

表达式“#{kalendarDay}”正确显示，表明该值已在页面和组件之间成功传输。但是，表达式的评估结果为“null”。

这似乎表明此时支持 bean 不可用，尽管页面正确验证和部署。所以我有 95% 的把握 bean 在运行时就在那里。

所以也许这是一个阶段的事情？我应该在渲染器的解码中对此进行评估并在属性映射中设置值吗？对于实际值和值表达式的组合，我仍然有些困惑。

所以我的问题是我应该在哪里获取和评估模型的 valueExpression，我应该将评估结果存储在 UIComponent 中还是应该每次都简单地评估它？

下面的 SSCCE 文件我认为这些是演示问题所需的唯一文件

Bean接口-----

```
/**
 * 
 */
package com.istana.kalendar.fixture;

import java.util.Date;

/**
 * @author User
 *
 */
public interface KalendarDay
{
    public      Date        getDate();
} 
```

Bean 实现 ---

```
/**
 * 
 */
package com.istana.kalendar.session.wui;

import java.util.Calendar;
import java.util.Date;

import javax.ejb.Stateful;
import javax.inject.Named;

import com.istana.kalendar.fixture.KalendarDay;

/**
 * @author User
 *
 */
@Named      ("kalendarDay")
@Stateful
public class KalKalendarDay
    implements KalendarDay
{

    private     Calendar        m_date  =   Calendar.getInstance();

    /* (non-Javadoc)
     * @see com.istana.kalendar.fixture.KalendarDay#getDate()
     */
    @Override
    public      Date            getDate()
    {
        return m_date.getTime();
    }

} 
```

界面组件 ---

```
/**
 * 
 */
package com.istana.kalendar.fixture.jsf;

import javax.el.ValueExpression;
import javax.faces.component.FacesComponent;
import javax.faces.component.UIOutput;

import com.istana.kalendar.fixture.KalendarDay;

/**
 * @author User
 *
 */
@FacesComponent     (value=UIDay.COMPONENT_TYPE)
public class UIDay  extends UIOutput
{
    static      final
    public      String          COMPONENT_TYPE      =   "com.istana.kalendar.fixture.jsf.Day";

    static      final
    public      String          COMPONENT_FAMILY    =   "com.istana.kalendar.fixture.jsf.Day";

    private     KalendarDay     m_model;

    private     String          m_title;

    @Override
    public      String          getRendererType() 
    {
        return UIDayRenderer.RENDERER_TYPE;
    }

    @Override
    public      String          getFamily() 
    {
        return COMPONENT_FAMILY;
    }

    public      KalendarDay     getModel()
    {
        KalendarDay     model = (KalendarDay) getStateHelper().eval("model");

        System.out.println("model "+model);

        return model;
    }

    public      void            setModel(KalendarDay model)
    {
        getStateHelper().put("model",model);
    }

    public      String          getTitle()
    {
        return (String) getStateHelper().eval("title");
    }

    public      void            setTitle(String title)
    {
        getStateHelper().put("title",title);
    }
} 
```

UIComponentRenderer ---

```
/**
 * 
 */
package com.istana.kalendar.fixture.jsf;

import java.io.IOException;

import javax.el.ValueExpression;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.context.ResponseWriter;
import javax.faces.render.FacesRenderer;
import javax.faces.render.Renderer;

import com.istana.kalendar.fixture.KalendarDay;

/**
 * @author User
 *
 */
@FacesRenderer  (componentFamily    = UIDay.COMPONENT_FAMILY
                ,rendererType       = UIDayRenderer.RENDERER_TYPE
                )
public class UIDayRenderer extends Renderer
{
    static      final
    public      String      RENDERER_TYPE   =   "com.istana.kalendar.fixture.jsf.DayRenderer";

    @Override
    public      void        encodeBegin (FacesContext context,UIComponent component) 
        throws IOException 
    {
        UIDay uic = (UIDay) component;

        ResponseWriter writer = context.getResponseWriter();
        writer.startElement("p", uic);
        /*
         * This is the call that triggers the println
         */
        writer.write("Day - "+uic.getModel().getDate());
    }

    @Override
    public      void        encodeEnd   (FacesContext context,UIComponent component) 
            throws IOException 
    {
        ResponseWriter writer = context.getResponseWriter();
        writer.endElement("p");
        writer.flush();
    }
} 
```

kalendar.taglib.xml ---

```
<facelet-taglib 
    id="kalendar"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
    version="2.0"
>

    <namespace>http://istana.com/kalendar</namespace>
    <tag>
        <tag-name>day</tag-name>
        <component>
            <component-type>com.istana.kalendar.fixture.jsf.Day</component-type>
        </component>
    </tag>

</facelet-taglib> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:55:25.843

我不确定为什么会这样`null`，但症状表明`#{kalendarDay}`是在视图渲染期间指定的，而您试图在视图构建期间对其进行评估。

* * *

> *所以也许这是一个阶段的事情？我应该在渲染器的解码中对此进行评估并在属性映射中设置值吗？对于实际值和值表达式的组合，我仍然有些困惑。*

您应该使用`encodeXxx()`组件的方法或关联的渲染器（如果有）根据组件的属性/属性生成 HTML。

您应该使用`decode()`组件的方法或相关的渲染器（如果有的话）根据与 HTML 表单提交一起发送的 HTTP 请求参数来设置组件的属性/属性。

* * *

> *所以我的问题是我应该在哪里获取和评估模型的 valueExpression，我应该将评估结果存储在 UIComponent 中还是应该每次都简单地评估它？*

从 JSF 2.x 开始，建议显式指定组件属性的 getter 和 setter，这些属性依次委托给[`UIComponent#getStateHelper()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getStateHelper%28%29).

```
public String getValue() {
    return (String) getStateHelper().eval("value");
}

public void setValue(String value) {
    getStateHelper().put("value", value);
}

public String getTitle() {
    return (String) getStateHelper().eval("title");
}

public void setTitle(String title) {
    getStateHelper().put("title", title);
}

public Object getModel() {
    return getStateHelper().eval("model");
}

public void setModel(Object model) {
    getStateHelper().put("model", model);
} 
```

这就是您基本上所需要的（请注意，getter 和 setter 必须与 Javabeans 规范中的属性名称完全匹配）。然后在`encodeXxx()`方法中调用`getModel()`来获取（和评估）`model`属性的值。

# outlook-addin - 如果进程被终止，用于保存约会的 MAPI API 不会保存更改

> ID：11831404
> 
> 赞同：0
> 
> 时间：2012-08-06T15:35:32.310
> 
> 标签：outlook-addin, mapi

我正在尝试为 Outlook 开发一个带有 vc++ 的 COM 插件，它从非交换服务器接收数据并将它们保存到 Outlook PST 文件。

我正在使用 Outlook 对象模型和 MAPI API 将约会对象保存在消息存储中。我使用 Outlook::_AppointmentItem::save() 方法保存项目。在此之后，我通过 IMessage 接口为此设置了一些属性并在其上调用 savechanges()。

它在正常情况下工作正常。但是，如果在添加事件后立即终止 Outlook 进程，则重新启动时所做的更改将丢失。看起来 Outlook 需要一些时间来保存对磁盘的更改。这种行为会产生一些其他问题。

有什么方法可以在保存后立即将更改刷新到磁盘。在这方面需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:09:49.820

PST 提供程序会在它认为合适的时候刷新更改。强制刷新的唯一方法是使用[IMAPIClientShutdown](http://msdn.microsoft.com/en-us/library/office/dd941348)接口，但在你这样做之后，整个 MAPI 系统将关闭，因此在进程重新启动之前什么都不会工作。

# c# - 从 SQL Server 更改为 Oracle 数据库

> ID：11831407
> 
> 赞同：0
> 
> 时间：2012-08-06T15:35:58.270
> 
> 标签：c#, asp.net, sql-server, oracle

我被要求将我的应用程序从使用 SQL Server 数据库迁移到 Oracle 数据库。

我收到此错误：

> ORA-00942: 表或视图不存在

我可能是错的，但我相信这是我的陈述的问题。我需要遵循通过 SQL Server 连接到 oracle 数据库的特定格式吗？

我将包括我的查询语句：

```
namespace project1
{
    public class dbqry
    {
        private static string qry = "";

        public static DataTable gProjectCIS(string BSA_CD)
        {
            qry = string.Format(@"SELECT *
                    FROM CIS_TRANS
                    WHERE BSA_CD like '%{0}%'", BSA_CD);

            return dbcon.GetDataTable(qry, "ProjectCISConnectionString");
        }

        public static DataTable gProjectCIS()
        {
            qry = @"SELECT *
                    FROM CIS_TRANS";

            return dbcon.GetDataTable(qry, "ProjectCISConnectionString");
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:39:13.680

您好，您必须在表前加上架构

```
 qry = string.Format(@"SELECT *
         FROM YourSchemaUser.CIS_TRANS <-- Fix your schema user name
         WHERE BSA_CD like '%{0}%'", BSA_CD);

  qry = @"SELECT * FROM YourSchemaUser.CIS_TRANS"; <-- Fix your schema user name 
```

并在存储过程上修复包。

您更改声明和正文，在使用前第一次编译您的包

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:38:47.413

Oracle 在区分大小写方面很挑剔。如果表是用“QUOTES”声明的，您需要在查询和匹配大小写中包含引号。这可能是一个好的开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:44:49.860

检查对象名称。还要检查它们的大小写是否正确。

检查您用于连接数据库的用户名是否对您尝试使用的表/视图具有权限。当您没有正确的权限时，Oracle 通常会说该表不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T16:00:05.187

您确定您正在登录正确的架构吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T19:03:01.573

您应该检查 CIS_TRANS 表是否具有适当的公共同义词，例如：

```
create or replace public synonym CIS_TRANS for some_user.CIS_TRANS 
```

其中 some_user 是创建 CIS_TRANS 对象的用户。

# iphone - 在 iOS 上使用后台任务进行 UI 更新

> ID：11831412
> 
> 赞同：1
> 
> 时间：2012-08-06T15:36:17.257
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我有一个同步过程，有时（甚至很少）需要 20 秒。我曾经在后台调用选择器。有一个进度指示器会在同步完成的通知上停止动画，并且下面的代码会立即更改：

```
[self performSelectorInBackground:@selector(updateFunction) withObject:nil]; 
```

但为了让进度继续下去，我决定使用后台任务：

```
 UIApplication *application = [UIApplication sharedApplication]; //Get the shared application instance

    __block UIBackgroundTaskIdentifier background_task; //Create a task object

    background_task = [application beginBackgroundTaskWithExpirationHandler: ^ {
        [application endBackgroundTask: background_task]; //Tell the system that we are done with the tasks
        background_task = UIBackgroundTaskInvalid; //Set the task to be invalid

        //System will be shutting down the app at any point in time now
    }];

    //Background tasks require you to use asyncrous tasks

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //Perform your tasks that your application requires

        NSLog(@"\n\nRunning in the background!\n\n");
        [self updateFunction];

        [application endBackgroundTask: background_task]; //End the task so the system knows that you are done with what you need to perform
        background_task = UIBackgroundTaskInvalid; //Invalidate the background_task
        NSLog(@"Finished in the background!");
    }); 
```

但是现在，当任务完成时，通知会被发送（并执行），但表格中的单元格直到（有时）很长一段时间才会更新。因此，在我看来，“需求显示”在来自后台任务左右时不会触发，并且仅在定期刷新间隔左右更新。

有没有办法使用后台任务更新表格单元格，或者我错过了什么？

编辑：通知监听器是：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(refreshBttn)
                                             name:@"finishedUpdate"
                                           object:nil]; 
```

代码是：

```
- (void) refreshBttn {
    NSLog(@"Refresh Buttun action");
    iDomsAppDelegate *delegate = (iDomsAppDelegate *)[[UIApplication sharedApplication] delegate];
    if([delegate updating]){
        [_updateBttn setHidden:TRUE];
        [_activityIndicator startAnimating];         
    } else {
        [_updateBttn setHidden:FALSE];
        [_activityIndicator stopAnimating];        
    }
    [self setNeedsDisplay];
    [self setNeedsLayout];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:55:12.893

为了更新 UI，您必须从后台线程调用主线程上的函数，如下所示：

```
[self performSelectorOnMainThread:@selector(updateFunction) withObject:nil waitUntilDone:NO]; 
```

如果您需要传递任何变量，您可以继续并将它们添加到`-withObject`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T17:57:50.097

您可以确保从您想要的任何队列接收到通知...

```
[[NSNotificationCenter defaultCenter] addObserverForName:SomeNotification
                                                  object:sender
                                                   queue:operationQueue
                                              usingBlock:^(NSNotification *){
    // Your notification will be processed in this block, and it will be
    // received on the notification queue you specify, regardless of what
    // thread the sender was running when the notification was posted.
}]; 
```

如果要确保在主线程上收到它，可以使用

```
[NSOperationQueue mainQueue] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:19:29.250

您需要在后台线程和前台线程之间拆分逻辑。您发送的通知应该从主线程发送，以便您的 UI 对象监听它可以安全地更新自己。所以，`updateFunction`分成两块。也许是这样的：

```
NSLog(@"\n\nRunning in the background!\n\n");
[self updateFunctionBackground];
dispatch_async(dispatch_get_main_queue(), ^{
    // send your notification here instead of in updateFunction
    [[NSNotificationCenter defaultCenter] post...];
}); 
```

# xquery - xquery 初学者 - 如何在 FLWOR 语句中使用 if-then-else

> ID：11831413
> 
> 赞同：3
> 
> 时间：2012-08-06T15:36:28.500
> 
> 标签：xquery, flwor

我想使用 XQuery 从网页的 XML 等效项中提取一些内容。

在这里，我想使用 if-then-else -- 如果满足特定条件，则 xquery 表达式返回一个值，否则返回不同的值。

这是我的表情——

我正在努力从网页中提取一些内容。

下面给出的是我正在使用的 Xquery 代码——我正在使用 XQuery 库来解析 XML，该 XML 是通过将 HTML 网页转换为 XML 获得的......之后我从那个 XML 页面中提取一些特定的内容......

```
 declare variable $doc as node() external;

                    let $select_block := $doc//div[@class="randomclass" and contains(.,'MatchingText')]
                    for $select_link in $select_block/a 
                    for $select_link_url in $select_link/@href
                        where  contains($assignee_link_url,'inassignee')  
                     return data($select_link) 
```

现在如何在这个表达式中使用 if-then-else？

我试图在'return'关键字之后立即添加一个if-then，但我收到错误......基本上，如果为上面的$select_block找到了一些内容，那么应该返回data（$select_link），否则静态文本'Missing应该返回值'。

将 if-then-else 与上述 xquery 表达式一起使用的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:56:28.727

如果我理解您要正确实现的目标，那么以下内容应该有效：

```
declare variable $doc as node() external;
let $select_block := $doc//div[@class="randomclass" and contains(.,'MatchingText')]
return 
    if ($select_block) then
     for $select_link in $select_block/a 
        for $select_link_url in $select_link/@href
            where  contains($select_link_url,'inassignee') 
                return data($select_link)
    else 'Missing Value' 
```

您可以稍微简化一些事情，并使用谓词过滤器选择锚元素来消除嵌套的 for 循环：

```
declare variable $doc as node() external; 
let $select_block := $doc//div[@class="randomclass" and contains(.,'MatchingText')]
return 
    if ($select_block) then
     for $select_link in $select_block/a[@href[contains(., 'inassignee')]]
         return data($select_link)
    else 'Missing Value' 
```

# mysql - sum sql 与不同的列

> ID：11831415
> 
> 赞同：0
> 
> 时间：2012-08-06T15:36:45.537
> 
> 标签：mysql

我有一张桌子：

```
CREATE TABLE EXAMPLE
(
    ID          BIGINT(20),
    REPORTED_0      INTEGER(11),
    REPORTED_1      INTEGER(11),
    REPORTED_2      INTEGER(11),
    REPORTED_3      INTEGER(11),
    REPORTED_4      INTEGER(11),
    REPORTED_5      INTEGER(11),
    REPORTED_6      INTEGER(11),
    REPORTED_7      INTEGER(11),
    REPORTED_8      INTEGER(11),
    REPORTED_9      INTEGER(11),
    REPORTED_10     INTEGER(11)
 ); 
```

我需要按 id 求和。我这样做：

```
SELECT(ID, SUM)
        a.ID,
        (a.REPORTED_0 + a.REPORTED_2 + a.REPORTED_3 + a.REPORTED_4 +
        a.REPORTED_5 + a.REPORTED_6 + a.REPORTED_7 + a.REPORTED_8 +
        a.REPORTED_9 + a.REPORTED_10)
FROM EXAMPLE a
GROUP BY a.ID; 
```

有没有更有效的方法来做这个总和？

对不起，但我对 sql 很菜鸟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T18:23:35.330

鉴于您现有的架构，您的查询没有什么低效的。如果您正在寻找一些语法快捷方式来添加除一列之外的所有列而不命名列，您将找不到它。该`SUM()`函数用于汇总行，而不是列。

由于您从单个表中进行选择，因此不需要表别名，并且您错过了原始查询中的一列。此外，您的查询也不能很好地处理 NULL。您可能希望将它们视为 0。这是一个重写的查询，应该可以满足您的需求：

```
SELECT ID,
  (
    COALESCE(REPORTED_0,0) + COALESCE(REPORTED_1,0) + COALESCE(REPORTED_2,0) + 
    COALESCE(REPORTED_3,0) + COALESCE(REPORTED_4,0) + COALESCE(REPORTED_5,0) + 
    COALESCE(REPORTED_6,0) + COALESCE(REPORTED_7,0) + COALESCE(REPORTED_8,0) + 
    COALESCE(REPORTED_9,0) + COALESCE(REPORTED_10,0)
  ) AS REPORTED_TOTAL
FROM EXAMPLE
GROUP BY ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:43:26.327

我认为这只是最有效的解决方案。你的表结构很差。如果我是你，你必须这样做表的结构是这样的：

```
Create Table Example
(
    ID              BigInt(20),
    ReportValue     Int(11),
    ReportIndex     Int(5)
) 
```

所以这将是结构的查询：

```
SELECT  ID, SUM(ReportValue)
From    Example
GROUP BY    ID 
```

好吧，这只是一个建议:)

# jquery - 在 Google 地图上启用拖放的准确标记位置

> ID：11831419
> 
> 赞同：3
> 
> 时间：2012-08-06T15:37:03.257
> 
> 标签：jquery, google-maps-api-3

我有一个页面，其中包含建筑物的卫星视图和对齐的平面图叠加层。有些图像需要与建筑物内的特定位置相关联，因此我想拖动图像，将其放在地图上并将位置数据用于其他任务。

我有这个概念

```
http://130.111.148.131/JMCTour/admin/setCoordinates.php?floor=1, 
```

但是标记的准确性还有很多不足之处。如果您访问该站点并放置一个标记，您会发现该位置差异很大。这是真的，不管使用

```
point = (pageX, pageY),
point = (screenX, screenY),
location = overlay.getProjection().fromDivPixelToLatLng(point),
location = overlay.getProjection().fromcontainerPixelToLatLng(point) 
```

我的代码是

```
//draggable handler of each photo
$(".photo").draggable({
  helper: "clone",
  cursor: "move",
  containment: $("#photosGallery") ? $("#container") : "document"

});

//droppable handler of the map div
$("#map").droppable({
  drop: function(e){
    var point = new google.maps.Point(e.pageX, e.pageY);
    var data = {
      "location": overlay.getProjection().fromDivPixelToLatLng(point)
    };

    placeMarker(data);
  }
});

//create a new marker overlay at point
function placeMarker(location){
  var marker = new google.maps.Marker({
    position: location.location,
    map: map,
    zIndex: 1000,
    draggable: true
  });
} 
```

我想让准确性工作。虽然我确实可以放置一个位置并将其拖动到正确的位置，但在第一次放置时有一个准确的位置会非常有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:24:35.107

我在[**这里有一个旧的 V2 演示**](http://maps.forum.nu/gm_user_defined_marker.html)，它可能会对您有所帮助。当您放下标记时，它会获得精确的纬度/经度，精度为 6 位小数。您的代码的问题在于**e.pageX、e.pageY**与整个页面相关，而不仅仅是与包含地图的 div 相关。

# php - CodeIgniter - 将数据保存在模型中

> ID：11831423
> 
> 赞同：1
> 
> 时间：2012-08-06T15:37:11.250
> 
> 标签：php, codeigniter, model, static

基本上，我所拥有的是：

```
class Database extends CI_Model
{
    function __construct()
    {
        parent::__construct();
    }

    function connect($connection_infos)
    {
        $db = @new mysqli($connection_infos['host'], $connection_infos['username'],
                $connection_infos['password'], $connection_infos['database']);
        if (mysqli_connect_errno())
            return FALSE;
        else
            return TRUE;
    }
} 
```

该模型加载到控制器的功能中：

```
class Management extends CI_Controller
{

    static $dbs = array(
                'ref' => array(
                    'connected' => FALSE,
                ),
                'dest' => array(
                    'connected' => FALSE,
                )
            );

    function connection()
    {
        $this->load->library('form_validation');
        $data = array();

        $this->form_validation->set_rules('host', 'Hostname', 'required');
        $this->form_validation->set_rules('username', 'Username', 'required');
        $this->form_validation->set_rules('database', 'Database', 'required');
        if (!$this->form_validation->run()) {
            $data['dbs'] = self::$dbs;
        } else {
            $this->load->model('database'); // Here I load the model
            $connection_infos = array(
                    'host' => $this->input->post('host'),
                    'username' => $this->input->post('username'),
                    'password' => $this->input->post('password'),
                    'database' => $this->input->post('database'),
                );
            if ($this->database->connect($connection_infos)) {
                self::$dbs['ref']['connected'] = TRUE;
                $data['dbs'] = self::$dbs;
            }
        }
        $this->load->view('dashboard', $data);
    }
} 
```

所以这就是我所做的：

在我看来，在表单验证中，我`connection`从 Controller 调用该函数。该函数加载`Database`模型，并调用模型的函数`connect`。

我的问题是：如果我想在我的模型中创建其他功能来提出其他人的请求，我会每次都被迫打开一个连接吗？如果是，我如何“存储”连接凭据？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T17:01:21.743

根据我所看到的，您需要访问 CI 文档并阅读*大量*关于[数据库库](http://codeigniter.com/user_guide/database/index.html)的内容。

除了本教程中介绍的基本语法/语义之外，名为“数据库”的模型是不合逻辑的，也不是一个很好的命名选择。在 CodeIgniter 的范围内，您应该尝试使模型仅与一个数据库表专门相关。

至于实际的数据库连接，它在 CI_Model 类中作为成员对象自动处理，`$db`. 我建议阅读有关[模型](http://codeigniter.com/user_guide/general/models.html)的文档，以及CI 中的[数据库连接](http://codeigniter.com/user_guide/database/connecting.html)。

因此，当您正确设置所有内容时，加载正确编码的模型将为您提供模型内的自动数据库连接，该模型可以在您想要的任何时候重复使用。

# plone - 原型语言环境感知 DateTime 字段

> ID：11831424
> 
> 赞同：0
> 
> 时间：2012-08-06T15:37:14.070
> 
> 标签：plone

将西班牙日期字符串值保存到 Archetypes DateTimeField 时，该字段以 None 值结束。我已经阅读了 DateTimeField 代码，那里根本没有语言环境代码。我确信这和大多数事情一样，已经在 Plone 的某个地方完成了，我想知道在哪里，请。

如果尚未完成，那么我将不胜感激您对我的计划提出的任何意见。我从谷歌和 SO 收集了一些信息，这就是我想出的：

1) 我将在我自己的源代码中继承 Archetypes/Field.py/DateTimeField()。

2）我将`@@plone_portal_state/language()`用来获取当前的语言代码。

3) 然后设置语言环境，使用`locale.setlocale(local.LC_TIME, LANG_CODE)`.

4) 我会将字符串值转换为 python`datetime`对象。

5）我将使用`dt2DT`将值转换为zope DateTime。

6）然后我将写入值。

这是一个愚蠢的计划，但这是我所知道的，我希望得到一些线索。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:22:04.213

我有类似的问题，但我想要的是在西班牙语语言环境中以法语显示当地时间，例如 **2012 年 1 月 1 日**，但是通过研究我发现**locale.setlocale**在大多数系统上都不是线程安全的，所以它不是继续设置/取消设置它是个好主意，因为它可能会为使用该站点的每个人设置特定的语言环境。

您仍然可以为所选语言安装所需的语言环境，在 Debian 中您可以这样做：

***#aptitude 安装语言环境***

然后

***#dpkg-重新配置语言环境***

选择您需要的所有区域设置语言，系统就会拥有它们。应该有一种翻译月份名称格式的方法，但我还没有找到。

资料来源：

克隆讨论——http: [//plone.293351.n2.nabble.com/Plone-strftime-and-locales-question-td6602394.html](http://plone.293351.n2.nabble.com/Plone-strftime-and-locales-question-td6602394.html)

Python 语言环境文档页面，向下滚动到 locale.setlocale -- [http://docs.python.org/library/locale.html](http://docs.python.org/library/locale.html)

**编辑**：您可能还想使用 babel 包而不是 locale.setlocale，因为它似乎是线程安全的，我目前正在为我自己的项目调查这种可能性。

堆栈溢出讨论——https: [//stackoverflow.com/a/225106/86294](https://stackoverflow.com/a/225106/86294)

Pypi 上的 Babel -- [http://pypi.python.org/pypi/Babel](http://pypi.python.org/pypi/Babel)

# ios - 预处理器设置混乱

> ID：11831425
> 
> 赞同：0
> 
> 时间：2012-08-06T15:37:16.040
> 
> 标签：ios, preprocessor-directive

当我处于 DEV 模式或使用预处理器设置处于 RELEASE 模式时，我正在尝试做一个简单的测试。我的设置如下：

![预处理器设置](../Images/8fa2f2d2d789663ec08ed3dca7626545.png)

我还有一个包含在 App-prefix.pch 文件中的 constant.h 文件。

该文件的内容如下：

```
#ifndef myapp_Constants_h
#define myapp_Constants_h

    #pragma mark - Instances
    #ifdef DEBUG
    #define WEB_SERVICE_BASE_URL @"http://local.someurl.com/"
    #define LOGIN_PATH @"app_dev.php/user/login/"
    #define REGISTER_PATH @"app_dev.php/user/register/"
    #endif

    #ifdef RELEASE
    #define WEB_SERVICE_BASE_URL @"http://www.someurl.com/"
    #define LOGIN_PATH @"user/login/"
    #define REGISTER_PATH @"user/register/"
    #endif

#endif 
```

当我在连接到 mac 的 iphone 上运行应用程序时，我似乎总是获得 DEBUG 模式设置，即使我应该获得 RELEASE 设置。

为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:06:05.467

Xcode 的默认配置是在 Debug 中运行，即使在设备上也是如此。如果您想在发布版中运行您的应用程序，您可以：

*   使用“配置文件”（Command-I）或“存档”（然后安装生成的应用程序）。
*   通过选择“产品 -> 编辑方案”来修改您的方案。（或使用 Command-Option-R。）单击“运行”方案，并将“构建配置”更改为“发布”。（它在“信息”面板中。）

如果您想频繁地来回切换，您可以制作另一个方案（在“管理方案”中）并修改它以使用发布构建配置。然后，您可以使用 Xcode 左上角的方案选择器轻松地在它们之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:52:18.970

在我看来，当您附加到 Xcode 运行时，总是会定义 DEBUG。

一种解决方案是

```
#ifdef RELEASE
    // release constants

#else
    // debug constants

#endif 
```

这样，您的 RELEASE 定义将覆盖 DEBUG。

编辑：在没有设置 DEBUG 和 RELEASE 的任何情况下，你仍然有一个可行的环境。它可能会发生。

# javascript - 添加 jquery Datepicker 后，文本框的初始值不显示

> ID：11831427
> 
> 赞同：0
> 
> 时间：2012-08-06T15:37:18.673
> 
> 标签：javascript, jquery, html

我需要显示从数据库中为日期文本字段选择的初始值。我从 jquery 日期选择器中添加一个日期。在我添加 jquery 代码后初始值不显示..有人可以建议我一个答案吗？谢谢 ！

这是我的jQuery代码

```
<script src="JDate/ui/jquery.ui.core.js"></script>
    <script src="JDate/ui/jquery.ui.widget.js"></script>
    <script src="JDate/ui/jquery.ui.datepicker.js"></script>
    <link rel="stylesheet" href="JDate/demos/demos.css">
    <script>
    $(function() {
        $( "#birthday_text" ).datepicker();

        $( "#birthday_text" ).datepicker( "option", "dateFormat", "yy-mm-dd" );

    });

</script> 
```

这是我的文本框代码

```
<input name="birthday_text" type="text" class="textfield" id="birthday_text" autocomplete="off" value="0000-00-00" readonly="readonly"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:42:18.777

附加日期选择器时初始化默认日期，如下所示：

```
$(function() {
  $( "#birthday_text" ).datepicker( {defaultDate:"0000-00-00",dateFormat: "yy-mm-dd" });

});​ 
```

带有演示的[jsfiddle](http://jsfiddle.net/7HTcS/)

**更新**：既然你说“defaultDate”参数给你带来了问题，试试这个替代方案：

```
 $( "#birthday_text" ).datepicker({dateFormat: "yy-mm-dd" } );
  $( "#birthday_text" ).val('0000-00-00'); 
```

[jsfiddle](http://jsfiddle.net/4qZKj/)替代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:40:47.753

在设置日期选择器时，您需要使用选项设置默认日期。在默认日期查看他们的文档：http: [//jqueryui.com/demos/datepicker/#option-defaultDate](http://jqueryui.com/demos/datepicker/#option-defaultDate)。此外，datepicker 控件可能不允许您使用 0000-00-00，因为它不是有效日期。您是否尝试过除全零以外的其他内容？

# javascript - iOS 上的移动 Safari 在大页面上崩溃

> ID：11831429
> 
> 赞同：39
> 
> 时间：2012-08-06T15:37:21.953
> 
> 标签：javascript, css, debugging, mobile-safari

我有一个问题，当页面变得太大时，Mobile Safari 在使用 jQuery 加载和操作 DOM 时崩溃。

我在 iPhone 和 iPad 上都遇到了同样的问题。

对移动页面进行故障排除以查找错误的最佳方法是什么？是否存在任何可能导致 Mobile Safari 崩溃的已知问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-06T17:46:55.083

我确实发现了问题。我想的不是 JS，而是 CSS。我添加了类以使 CSS 过渡以淡入某些元素。对于匿名用户，这些元素已经`display: none;`并且可能从未运行过不透明度转换。

奇怪的是，转换正好在两个元素上。那么为什么这只会在有 100 多条评论的长线程上崩溃呢？

所以底线是：-webkit-transition 在移动 safari 上崩溃了页面。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-29T10:24:44.643

有同样的问题，对我来说是`-webkit-transform: translateZ(0);`导致 Safari 崩溃的原因。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-02-14T01:45:12.450

我知道这个问题已经得到了成功的回答，但我也只是想投入我的五分钱，因为我已经多次将头撞在墙上了：

正如大多数答案已经指出的那样，它通常归结为内存问题。几乎任何东西都可能是最终翻过“内存堆”的最后一点，就像 a`translateZ`或其他任何东西一样。

然而，根据我的经验，它与具体的实际 CSS（或 JS）命令无关。只是碰巧最后一次过渡太多了。

对我有很大帮助的是将此时不可见的任何内容保留在`display: none`. 这听起来可能很原始，但实际上可以解决问题。这是告诉浏览器的渲染器您此时不需要此元素并因此释放内存的简单方法。这允许您创建具有各种 3d 效果的一英里长的垂直滚动条，只要您隐藏您目前不使用的元素。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-08-06T15:41:15.960

任何 iOS 应用程序的主要问题是内存使用。因此，您的页面很可能使用了过多的内存。

Mobile Safari 使用了一些巧妙的技术，因此在任何给定时间都不必将整个页面都驻留在内存中，而只是其中的一部分。也许您可以检查页面中是否有任何内容破坏了这种机制或降低了它的效率。

无论如何，要给出更多中肯的建议，有关您的页面的更多信息将非常棒。

顺便说一句，您可以从设备存储的崩溃日志中获得一些提示。检查是否可以在“设置”下找到它：

1.  一般的
2.  关于
3.  诊断和使用
4.  诊断和使用数据

如果是内存问题，你应该找到类似“信号（0）”的东西；不确定这是否仅意味着“由于内存使用而被杀死”，但是当我发现信号（0）时，我通常认为这是理所当然的。

否则，它可能会告诉你什么是错的......

希望这可以帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-06T15:42:21.483

内存限制和 Javascript 执行时间限制都存在，尽管您实际上如何达到这些限制有点模糊。常见的报告是，大小大于 10MB 的页面会出现问题，并且 Javascript 的执行时间限制为 10 秒。

有关详细信息，请参阅[Apple 的文档](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/CreatingContentforSafarioniPhone/CreatingContentforSafarioniPhone.html#//apple_ref/doc/uid/TP40006482-SW15 "苹果的文档")。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-27T21:38:41.093

我最近遇到了一个问题，移动 safari 在包含大量图像（30 多个就足够了）和一些菜单转换的 web 应用程序页面上崩溃。[经过大量试验和错误后，我采用了类似于LinkedIn](http://engineering.linkedin.com/linkedin-ipad-5-techniques-smooth-infinite-scrolling-html5)所做的解决方案，但使用 angularjs 进行无限滚动。我在列表的顶部和底部使用**requestAnimFrame**和两个**扩展/收缩 div**（具有 js 样式属性）来删除所有图像容器（顶部覆盖有其他东西），除了靠近视口的一些容器。滚动性能（本机，无 js）很好，内存消耗也在检查中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-04T17:12:27.033

我有一个类似的问题，网页在 android 设备上运行起来就像一个魅力，在 IOS（iphone 和模拟器）上崩溃了。

经过大量研究（也使用 ios_webkit_debug_proxy），我发现问题与 jQuery 就绪事件有关。

添加一点超时解决了这个问题。我的应用程序也在使用 iframe。

```
$(document).ready(function () {
    window.setTimeout(function () { ready(); }, 10);
}); 
```

# .net - 为什么 printf 可以与托管字符串一起使用？

> ID：11831430
> 
> 赞同：6
> 
> 时间：2012-08-06T15:37:23.183
> 
> 标签：.net, visual-studio-2010, c++-cli, marshalling, printf

我们目前正在研究一些非常古老的 C++/CLI 代码（Old Syntax .NET Beta），看到这样的东西有点惊讶：

```
System::String ^source("Test-String");
printf("%s", source); 
```

程序正确输出

```
Test-String 
```

我们想知道，为什么可以将托管字符串源传递给`printf`- 更重要的是：*它为什么有效*？我不希望它成为编译器的一些便利功能，因为以下内容不起作用：

```
System::String ^source("Test-String");
char pDest[256];
strcpy(pDest, source); 
```

这会产生一个（以某种方式预期的）编译错误，指出`System::String^`无法转换为`const char*`. 所以我唯一真正的解释是，将托管引用传递给 va_list 会超越所有编译器检查，并欺骗本机代码使用指向托管堆的指针。由于在内存`System::String`中表示类似于`char`-Array，因此`printf`可能会起作用。或者编译器转换为 a`pin_ptr`并将其传递给`printf`.

我不希望它自动编组`String^`to `char*`，因为这会导致严重的内存泄漏，而没有任何对实际内存地址的引用。

我们知道这不是一个好的解决方案，后来的 Visual Studio 版本引入的各种编组方法提供了一种更好的方法，但了解这里实际发生的事情会非常有趣。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:51:54.837

我相信这是因为编译器正在把它变成这个 IL：

```
call vararg int32 modopt([mscorlib]System.Runtime.CompilerServices.CallConvCdecl) printf(int8 modopt([mscorlib]System.Runtime.CompilerServices.IsSignUnspecifiedByte) modopt([mscorlib]System.Runtime.CompilerServices.IsConst)*, ..., string) 
```

最终作为对 的 pinvoke 调用`printf`，因此运行时为您编组它有点偷偷摸摸。您仍处于托管运行时中，并且运行时将在需要时将编组作为服务提供。

* * *

一些注意事项：

似乎这`clr!GenericPInvokeCalliHelper`是在 x86 .NET 4 Workstation CLR 上进行的。

> 以下不起作用

那是因为那是直接的 C++。它没有机会通过编组，因为它不是必需的。

# c++ - 使用 *void 作为 static_cast 的缓冲区

> ID：11831431
> 
> 赞同：0
> 
> 时间：2012-08-06T15:37:25.380
> 
> 标签：c++, void-pointers, downcast

所以我这样做：

```
class A;

class B : public A;

class C : public B;

vector<A*> *vecA;

vector<C*> *vecC; 
```

我想将一个vectC转换成一个vecA。

```
vector<A*> *_newA = static_cast< vector<A*>* >(vecC); //gives an error 
```

所以我使用 void 指针作为缓冲区和强制转换：

```
void *buffer = vecC;

vector<A*> *_newA = static_cast< vector<A*>* >(buffer); //works 
```

这是有效的吗？还有另一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:42:33.323

你应该只有一个`std::vector<A*>`，然后当你想在里面放一个`B`或时`C`，你可以这样做：

```
 std::vector<A*> vec;
 vec.push_back(b); 
```

这将比您目前正在做的任何事情都要好得多。

此外，您应该使用`std::unique_ptr`or `std::shared_ptr`，具体取决于指针的所有权语义。拥有原始指针是禁忌！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T15:48:47.323

> 这是有效的吗？

不，这不对。如果您访问它会发生什么，这是完全未定义的。

> 还有另一种方法吗？

是的。这取决于你想做什么：

1.  复制内容：`std::copy(vecC.begin(), vecC.end(), std::back_inserter(vecA));`

2.  `A*`如果给定容器或迭代器`C*`或任何其他派生类型，则创建一个充当随机访问容器的适配器

3.  我相信还有其他解决方案，只需告诉我们您想要做什么

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:52:10.527

您可能需要知道的神奇词汇是“协变”和“逆变”。[在这里](https://stackoverflow.com/questions/114819/how-get-a-vectorderived-into-a-function-that-expects-a-vectorbase-as-argum)查看一个非常密切相关的问题。

简短的回答：没有简洁、明智的方法来进行您只想使用强制转换进行的转换。您需要将旧向量的内容复制到新向量中。

但更重要的是： 1\. 永远不要`new`在标准容器类型上使用。2\. 不要传递指向标准容器类型的指针。3\. 不要将原始指针传递给您自己的对象，`std::shared_ptr`而是使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T15:53:21.333

而不是绕道 via `void*`，使用 C++11 只需使用`reinterpret_cast`.

但是，您想要的转换*允许非常不利的事情*：

```
#include <iostream>
#include <vector>
using namespace std;

class Base {};

class Derived: public Base
{ public: int x; Derived(): x(42) {} };

int main()
{
    vector< Derived* >  v;
    Derived             d;

    v.push_back( &d );
    cout << v.back()->x << endl;        // 42

    vector< Base* >*    pbv =
        reinterpret_cast< vector< Base* >* >( &v );
    Base                b;

    pbv->push_back( &b );
    cout << v.back()->x << endl;        // indeterminate value
} 
```

这与您在转换为时遇到的问题大致相同`T**`（`T const**`不允许，可能会出现不好的事情）。简而言之，除非您确切知道自己在做什么，否则不要这样做。越长，嗯，好吧，这里没有讨论的余地，但它涉及到区分可变和不可变集合，并且非常非常小心。

* * *

编辑：正如其他人（没有解决转换问题）已经说过的那样，一个实际的解决方案是指针向量`A`或智能指针，然后使用 C++ 多态性（即虚拟成员函数）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T15:51:39.170

在我看来，好像您正在寻找对泛型（模板）类型的[协变](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)支持。C++ 根本不支持这一点。它受[CLR 和 C#/VB](http://msdn.microsoft.com/en-us/library/dd799517.aspx)支持，但仅在最新版本中。

尽管如此，为了回应其他人的回应，你很可能找错了人。我的预感是你想要一个指向 A 类型对象的指针向量......并且这种类型应该包括虚拟方法和虚拟析构函数 - 根据需要。如果没有更好地了解您要解决的高级问题，就不可能更具体地了解合适的替代方法 - 这在您的问题中并不明显。

# jsp - 在 jsp 页面中预置电子邮件可视化

> ID：11831437
> 
> 赞同：0
> 
> 时间：2012-08-06T15:37:42.930
> 
> 标签：jsp, email, visualization, prefuse

我们正在开发一个 Web 应用程序（dojo/jsf/spring/ibatis 框架），我们的一个 jsp 页面应该显示一个强制导向的电子邮件通信图。该图也应该是交互式的。例如，当用户点击一个节点（前人对象）时，所有与感兴趣的节点（人）有直接关系的节点都应该用某种颜色突出显示。

经过大量研究后，我发现 prefuse 是一个基于 java 的工具，具有电子邮件可视化功能，它建立在 swing 和 java2D 之上。我浏览了一个教程，在继续开始使用该教程之前我有一个问题。

是否可以使用 prefuse 在 jsp 页面中进行电子邮件可视化？任何人都可以给我高层次的看法吗？例如，它会是来自 jsp 中显示的服务器的图像吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:12:01.133

虽然可以将 prefuse 可视化作为 Java 小程序包含在 JSP 页面中，但我宁愿建议使用**D3**或**ProtoVis**进行基于 Web 的可视化。

强制导向布局的示例：

*   [http://mbostock.github.com/d3/talk/20111116/force-collapsible.html](http://mbostock.github.com/d3/talk/20111116/force-collapsible.html)

![在此处输入图像描述](../Images/96e13a99bd482b890402fe77c1c34abc.png)

*   [http://mbostock.github.com/protovis/ex/force.html](http://mbostock.github.com/protovis/ex/force.html)

# c# - C# Winforms - 在同一行中具有多种颜色的所有者绘制的列表框

> ID：11831438
> 
> 赞同：0
> 
> 时间：2012-08-06T15:38:01.987
> 
> 标签：c#, vb.net, winforms, listbox, controls

我找到了一篇完全符合我需要的文章。它在文本框的同一行上绘制多种颜色。但问题是它是用 VB.NET 编写的，而我正在用 C# 编写程序。如果可能的话，任何优秀的灵魂都可以将其转换为 C#，如果不是，你能给我其他选择吗？谢谢。

这是文章：[http](http://www.vbrad.com/article.aspx?id=34) ://www.vbrad.com/article.aspx?id=34 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:48:02.780

这是您发布的内容的转换 Nicolas

如果您需要更改/让其他任何工作正常工作，您将需要最终对其进行测试..

快乐编码

```
private void  MeasureItemHandler(object sender, MeasureItemEventArgs e)
{
    Graphics g = Graphics.FromHwnd(lstColor.Handle);
    StringFormat sf = new StringFormat(StringFormat.GenericTypographic);
    SizeF size = default(SizeF);
    float height = 0;
    Font oFont = new Font("Arial", 10);

    //measure the height of what you are about to draw
    //and let the listbox know this
    size = g.MeasureString(data(e.Index), oFont, 500, sf);
    height = size.Height + 5;
    e.ItemHeight = height;
}

private void  DrawItemHandler(object sender, DrawItemEventArgs e)
{

    Graphics g = Graphics.FromHwnd(lstColor.Handle);
    StringFormat sf = new StringFormat(StringFormat.GenericTypographic);
    SizeF size = default(SizeF);
    float width = 0;
    Font oFont = new Font("Arial", 10);

    //get the width of the string you are about to write
    //this info is needed so that we can offset the next 
    //string that will be drawn in a different color.
    size = g.MeasureString(data(e.Index), oFont, 500, sf);
    width = size.Width + 16;

    //prepare the list for drawing
    e.DrawBackground();
    e.DrawFocusRectangle();

    //draw the first string in a certain color
    e.Graphics.DrawString(data(e.Index), oFont, new SolidBrush(color(e.Index)), e.Bounds.X, e.Bounds.Y);

    //draw the second string in a different color
    e.Graphics.DrawString(data(data.Length - 1 - e.Index), oFont, new SolidBrush(color(color.Length - 1 - e.Index)), width, e.Bounds.Y);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:21:30.410

首先，他们在本文中没有使用文本框，他们使用的是列表框，但接下来是您所问的从 VB.Net 到 C# 的代码转换。它需要整理一下，但它可以完成工作。

只需创建一个新的 Windows 窗体，在此窗体上放置一个名为 lstColor 的列表框，在属性窗口中将属性更改`DrawMode`为**OwnerDrawFixed**，然后为**DrawItem**和**MeasureItem**添加事件处理程序（您可以通过单击属性窗口中的闪电来添加事件处理程序，然后双击列表中这两个单词旁边的空格）。

在**DrawItem**事件处理程序中，添加以下内容：

```
private void lstColor_DrawItem(object sender, System.Windows.Forms.DrawItemEventArgs e)
{
    var size = g.MeasureString(data[e.Index], oFont, 500, sf);
    var width = size.Width + 16;

    e.DrawBackground();
    e.DrawFocusRectangle();
    e.Graphics.DrawString(data[e.Index], oFont, new SolidBrush(color[e.Index]), e.Bounds.X, e.Bounds.Y);
    e.Graphics.DrawString(data[data.Length - 1 - e.Index], oFont, new SolidBrush(color[color.Length - 1 - e.Index]), width, e.Bounds.Y);
} 
```

在**MeasureItem**事件处理程序中，添加以下内容：

```
private void lstColor_MeasureItem(object sender, MeasureItemEventArgs e)
{
    var size = g.MeasureString(data[e.Index], oFont, 500, sf);
    var height = size.Height;

    e.ItemHeight = Convert.ToInt32(height);
} 
```

在任何方法的范围之外添加五个私有字段，但在您的**Form1**（或您称之为表单的任何内容）类中，如下所示：

```
private string[] data;
private Color[] color;
private Font oFont;
private Graphics g;
private StringFormat sf; 
```

将以下三行放入**Form1_Load**事件中：

```
private void Form1_Load(object sender, EventArgs e)
{
    oFont = new Font("Arial", 10);

    data = new string[] { "This is Red", "This is Blue", "This is Green", "This is Yellow", "This is Black", "This is Aqua", "This is Brown", "This is Cyan", "This is Gray", "This is Pink" };
    color = new Color[] {Color.Red, Color.Blue, Color.Green, Color.Yellow, Color.Black, Color.Aqua, Color.Brown, Color.Cyan, Color.Gray,Color.Pink};
    lstColor.DataSource = data;
    g = Graphics.FromHwnd(lstColor.Handle);
    sf = new StringFormat(StringFormat.GenericTypographic);
} 
```

你都准备好了。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T18:21:13.370

查看[http://converter.telerik.com/](http://converter.telerik.com/) 它将代码从 VB.NET 转换为 C#，将 C# 转换为 VB.NET。它不适用于复杂的代码，但可能对您有用。

# find - 我如何找到我的“openid”

> ID：11831440
> 
> 赞同：1
> 
> 时间：2012-08-06T15:38:10.317
> 
> 标签：find, openid

我现在无法登录，而不必使用像谷歌这样的其他网站，因为它现在不需要我的电子邮件和密码，而是要求我的“openid”并给出一个长而神秘的网站地址作为例子。我在我的帐户区域中没有看到适合我的“openid”。越来越多的我被迫通过谷歌登录我在各个网站上的帐户，我讨厌这样做。堆栈溢出“联系人”链接实际上并没有联系任何人，它只是将您带到一个页面来发布您的问题。我如何找到我的“openid”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T05:47:50.523

我认为您误解了**OpenID**。如果您有一个 OpenID 提供商的帐户，例如[Google、Yahoo!、PayPal、BBC、AOL、LiveJournal、MySpace、IBM、Steam、Sherdog、Orange 和 VeriSign，](http://en.wikipedia.org/wiki/OpenID)那么您就有一个“openid” 。

它的工作原理是让您登录到您的提供商的帐户，然后使用另一个请求身份验证的服务（如 stackoverflow）验证您的身份。**所以 stackoverflow 不知道你是“迈克尔”，但它确实知道谷歌说你是迈克尔——这就是你需要登录谷歌的原因。**

如果你想要一个 stackoverflow 用户名/密码，你可以从你的个人资料页面——>**我的登录**——>添加更多登录——> **“创建一个新的 Stack Exchange 帐户”...点击这里**。

# ios - 如何在 UITableViewCell 上选择editingAccessoryView？

> ID：11831443
> 
> 赞同：0
> 
> 时间：2012-08-06T15:38:24.603
> 
> 标签：ios, uitableview

我将表格视图置于编辑模式，使用`allowMultipleSelection = YES`. 所以，它把那些大圆圈放在左边，表示一行被选中或未被选中。

按下单元格会选择行。但是按圆圈什么也没做。

我已经设置`cell.editingAccessoryView.userInteractionEnabled = YES;`没有结果。

是否有我缺少的属性或者我们只是不应该按下editingAccessoryView？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:49:26.263

如果左边的“小圆圈”是指右边的附件视图按钮，那么你需要实现该方法

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath 
```

否则，如果您指的是 + 和 - 图标，请查看[UITableView ：在编辑模式下检测单击“-”按钮](https://stackoverflow.com/questions/2448583/uitableview-detecting-click-on-button-in-edit-mode)

# android - onSaveInstanceState 和片段？

> ID：11831444
> 
> 赞同：11
> 
> 时间：2012-08-06T15:38:33.103
> 
> 标签：android

我怎样才能得到一个片段来保存它的状态？我已经尝试了一切，但没有运气，没有任何效果。

我试过添加：

```
public void onSaveInstanceState(Bundle outState) {
   super.onSaveInstanceState(outState);
   myWebView.saveState(outState);
   Log.w("///////", "onSaveInstanceState");

} 
```

但这永远不会被调用。

有任何想法吗？

* * *

我现在正在尝试恢复 Web 视图的状态：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

     View mainView = (View) inflater.inflate(R.layout.frag_b, container, false);
     myWebView = (WebView) mainView.findViewById(R.id.webviewtest);
     myWebView.setWebViewClient(new MyWebViewClient());
     myWebView.getSettings().setPluginsEnabled(true);
     myWebView.getSettings().setBuiltInZoomControls(false); 
     myWebView.getSettings().setSupportZoom(false);
     myWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);   
     myWebView.getSettings().setAllowFileAccess(true); 
     myWebView.getSettings().setDomStorageEnabled(true);
     myWebView.loadUrl("http://www.google.com");   
     myWebView.setId(1);
     myWebView.restoreState(savedInstanceState);
     Log.w("///////", "onCreateView");

    return mainView;
} 
```

但以上不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T15:42:55.913

你有没有看过这个：[片段的 onSaveInstanceState() 永远不会被调用](https://stackoverflow.com/questions/8503629/fragments-onsaveinstancestate-never-called)

您需要确保调用`super.onSaveInstanceState(Bundle)`您的`FragmentActivity`.

# bash - 如何按字母顺序对主要列进行排序，然后按数字顺序对次要列进行排序？

> ID：11831452
> 
> 赞同：5
> 
> 时间：2012-08-06T15:38:59.737
> 
> 标签：bash, shell, sorting

假设有一个文本文件：

```
10  A   QAZ
5   A   EDC
14  B   RFV
3   A   WSX
7   B   TGB 
```

我想将第二列作为具有字母顺序的主列，将第一列作为具有数字顺序的次要列对其进行排序。以下是预期的结果：

```
3   A   WSX
5   A   EDC
10  A   QAZ
7   B   TGB
14  B   RFV 
```

我试过了`sort -k 2,2 -k 1,1 a.txt -n`，`sort -k 2,2 -k 1,1 a.txt`但都给出了错误的结果。我应该怎么解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T15:57:31.227

这应该有效：

```
sort -b -k2,2 -k1,1n 
```

这`-b`是必不可少的，没有它，输出是错误的，因为`sort`错误地确定了第二列的位置。有关详细信息，请参阅`man sort` （或[此处](http://linux.die.net/man/1/sort)）。

另外，检查您的`locale`. 他们可以影响`sort`工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T17:24:54.210

这可能对您有用：

```
sort -k1.5,1.8 -k1.1,1.4n file 
```

# jquery - 如何删除jQuery循环中的幻灯片？

> ID：11831457
> 
> 赞同：2
> 
> 时间：2012-08-06T15:39:18.887
> 
> 标签：jquery, jquery-cycle

我正在使用这个插件：[jquery 循环](http://jquery.malsup.com/cycle/)

我有几张幻灯片同时运行，每张幻灯片都以客户的标志开头，其余的图片是他们工作的图片。

一旦开始查看其余幻灯片，我想删除徽标幻灯片，因此当幻灯片循环播放时，我将不再看到徽标幻灯片并继续图片集中的第一个

我怎样才能做到这一点？

我当前的代码：

```
var $li = $("#somediv ul li");

$li.each(function(i)
{
    var random_ms = randomFromInterval(5, 10) * 1000;

    $(this).cycle({
        fx: "fade, scrollUp, scrollDown, scrollLeft, scrollRight",
        timeout: random_ms,
        delay: -3500
    }); 
}); 
```

这个[解决方案](http://forum.jquery.com/topic/jquery-jquery-cycle-remove-slide)对我不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T22:45:35.170

好的，最后这就是我所做的：在版本 2.9999.5 中的 go() -line 623 中，第一条指令必须是

```
if(opts.nextSlide == 0)
{
    opts.nextSlide++;
} 
```

在此行之前：

```
var p = opts.$cont[0], curr = els[opts.currSlide], next = els[opts.nextSlide]; 
```

# c - 初始化结构的问题

> ID：11831458
> 
> 赞同：3
> 
> 时间：2012-08-06T15:39:22.967
> 
> 标签：c

这是我的代码：

```
typedef struct{
  char name[64];
} Cat;

Cat createCat(char name[64]) {
  Cat newCat;

  int i;

  for(i = 0; i < 64; i += 1) {
    newCat.name[i] = name[i];
  }

  return newCat;
}

Cat exampleCat = createCat("Bob"); 
```

它编译时出现以下错误：

> 初始化元素不是常量

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T15:41:35.910

```
Cat exampleCat = createCat("Bob"); 
```

您不能在这里进行方法调用。`exampleCat`在其他地方初始化。

这在规范第 6.7.8/4 节中进行了解释：

> 具有静态存储持续时间的对象的初始化程序中的所有表达式都应为常量表达式或字符串文字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T16:30:03.523

您真的不需要编写函数来初始化结构。您可以只使用一个初始化器，在其中为每个成员赋值（这里只有一个）。

```
Cat exampleCat = {"Bob"}; 
```

另请注意，如果您改为使用 C++，则可以选择使用动态初始化程序，并且代码就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:44:40.207

请尝试：

```
void createCat(Cat * kitty, char name[64]) {
  int i;

  for(i = 0; i < 64; i += 1) {
    kitty->name[i] = name[i];
  }
}

Cat exampleCat;
createCat(&exampleCat, "Bob"); 
```

# extjs - ExtJS2.2 expand() 组合但不关注它

> ID：11831464
> 
> 赞同：0
> 
> 时间：2012-08-06T15:39:53.293
> 
> 标签：extjs, extjs2

我正在开发 ExtJS 2.2 中的“旧”应用程序，Ext.form.ComboBox 的方法 expand 在我的情况下不起作用。

我只是做

```
Ext.getCmp('adresse_field_ville').expand(); 
```

但是什么都没有发生，甚至在控制台中也没有任何痕迹。

我肯定会使用好的对象，因为在我做之前

```
Ext.getCmp('adresse_field_ville').setValue(''); 
```

它有效。

通过谷歌搜索，我找到了 onTriggerClick 方法。此方法扩展了组合并对其进行了重点关注，但我需要将重点放在其他领域。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:15:10.413

尝试将焦点进行扩展，在侦听器中添加焦点事件

听众：{焦点：函数（fld）{this.onTriggerClick（）；} }

执行焦点事件：Ext.getCmp('adresse_field_ville').focus(false,100);

# php - phpbb 两个论坛上分享的话题

> ID：11831465
> 
> 赞同：0
> 
> 时间：2012-08-06T15:40:02.500
> 
> 标签：php, mysql, database, phpbb

我正在寻找如何加入处理两个不同数据库的两个论坛的解决方案。问题是，这些论坛仍然需要在自己的数据库上工作，但要共享一个共同的主题。

两个论坛都是 3.0.10 并且在同一台服务器上工作，

我不知道如何开始。

我确切地知道，这可以创建数据库连接，例如：$db2 和会话同时在 $db1 和 $db2 上工作。但不知道接下来会发生什么？...

# cocoa - NSTableView 的委托在创建行时收到 awakeFromNib 消息

> ID：11831473
> 
> 赞同：1
> 
> 时间：2012-08-06T15:40:31.360
> 
> 标签：cocoa

在我的项目中有一个 xib 文件，其文件所有者设置为**NSViewController**的子类。这个 xib 文件有一个 NSView，里面有一个**基于视图的 NSTableView**。NSViewController 子类实现了**NSTableViewDelegate**协议，并且在 IB 中，NSTableView 的委托连接到文件的所有者。当一个视图被绑定创建时，viewController 的**awakeFromNib**方法被这个调用栈调用：

```
#0  0x000000010000584b in -[TheViewController awakeFromNib] 
#1  0x00007fff890f9bd8 in -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] ()
#2  0x00007fff893101d6 in -[NSNib _instantiateNibWithExternalNameTable:] ()
#3  0x00007fff89310c7a in -[NSNib instantiateNibWithExternalNameTable:] ()
#4  0x00007fff892bcac4 in -[NSTableRowData _unarchiveViewWithIdentifier:owner:] ()
#5  0x00007fff892be57b in -[NSTableView(NSTableViewViewBased) makeViewForTableColumn:row:] ()
#6  0x00007fff892be1b2 in -[NSTableRowData _addViewToRowView:atColumn:row:] ()
#7  0x00007fff892bde7f in -[NSTableRowData _addViewsToRowView:atRow:] ()
#8  0x00007fff892bc415 in -[NSTableRowData _addRowViewForVisibleRow:withPriorView:] ()
#9  0x00007fff892bc19a in -[NSTableRowData _addRowViewForVisibleRow:withPriorRowIndex:inDictionary:withRowAnimation:] ()
#10 0x00007fff892bb469 in -[NSTableRowData _unsafeUpdateVisibleRowEntries] ()
#11 0x00007fff892bb001 in -[NSTableRowData updateVisibleRowViews] ()
#12 0x00007fff892930fb in -[NSTableView viewWillDraw] ()
#13 0x00007fff89170bed in __22-[NSView viewWillDraw]_block_invoke_0 ()
#14 0x00007fff884d50b6 in __NSArrayEnumerate ()
#15 0x00007fff8917092d in -[NSView viewWillDraw] ()
#16 0x00007fff89170bed in __22-[NSView viewWillDraw]_block_invoke_0 ()
#17 0x00007fff884d50b6 in __NSArrayEnumerate ()
#18 0x00007fff8917092d in -[NSView viewWillDraw] ()
#19 0x00007fff891fb455 in -[NSScrollView viewWillDraw] ()
#20 0x00007fff89170bed in __22-[NSView viewWillDraw]_block_invoke_0 ()
#21 0x00007fff884d50b6 in __NSArrayEnumerate ()
#22 0x00007fff8917092d in -[NSView viewWillDraw] ()
#23 0x00007fff89170bed in __22-[NSView viewWillDraw]_block_invoke_0 ()
#24 0x00007fff884d50b6 in __NSArrayEnumerate ()
#25 0x00007fff8917092d in -[NSView viewWillDraw] ()
#26 0x00007fff89247e0d in -[NSBox viewWillDraw] ()
#27 0x00007fff89170bed in __22-[NSView viewWillDraw]_block_invoke_0 ()
#28 0x00007fff884d50b6 in __NSArrayEnumerate ()
#29 0x00007fff8917092d in -[NSView viewWillDraw] ()
#30 0x00007fff89170bed in __22-[NSView viewWillDraw]_block_invoke_0 ()
#31 0x00007fff884d50b6 in __NSArrayEnumerate ()
#32 0x00007fff8917092d in -[NSView viewWillDraw] ()
#33 0x00007fff89170bed in __22-[NSView viewWillDraw]_block_invoke_0 ()
#34 0x00007fff884d50b6 in __NSArrayEnumerate ()
#35 0x00007fff8917092d in -[NSView viewWillDraw] ()
#36 0x00007fff89170bed in __22-[NSView viewWillDraw]_block_invoke_0 ()
#37 0x00007fff884d50b6 in __NSArrayEnumerate ()
#38 0x00007fff8917092d in -[NSView viewWillDraw] ()
#39 0x00007fff8916ff84 in -[NSView _sendViewWillDrawInRect:clipRootView:] ()
#40 0x00007fff8913c3f1 in -[NSView displayIfNeeded] ()
#41 0x00007fff891f93f8 in -[NSWindow _reallyDoOrderWindow:relativeTo:findKey:forCounter:force:isModal:] ()
#42 0x00007fff891f8a18 in -[NSWindow _doOrderWindow:relativeTo:findKey:forCounter:force:isModal:] ()
#43 0x00007fff891f85ff in -[NSWindow orderWindow:relativeTo:] ()
#44 0x00007fff890f9c96 in -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] ()
#45 0x00007fff890d8b7d in loadNib ()
#46 0x00007fff890d80a9 in +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] ()
#47 0x00007fff890d7ede in -[NSBundle(NSNibLoading) loadNibNamed:owner:topLevelObjects:] ()
#48 0x00007fff890d7cbe in +[NSBundle(NSNibLoading) loadNibNamed:owner:] ()
#49 0x00007fff890d447f in NSApplicationMain ()
#50 0x0000000100001432 in main 
```

awakeFromNib 方法不应该只在 viewController 实例化后调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:21:52.307

根据我的经验，**每当从该 xib 文件加载新视图时**`File's Owner`，似乎任何**xib 文档**都会收到一条`-awakeFromNib`消息。正如您所注意到的，当基于视图的表视图从 xib 文件创建新行时，就会发生这种情况。

 **我知道没有办法阻止这种情况的发生，除了可能只记录你调用了多少次`awakeFromNib`并只在第一次执行初始化代码。

**或者**，**更好的是，**将您的初始化逻辑放在另一个具有更可靠时序的方法中 - 例如`-loadView`，在调用`super`. 我做类似的事情：

```
- (void)loadView {
    [self vvViewWillLoad];
    [super loadView];
    [self vvViewDidLoad];
}

- (void)vvViewDidLoad {
    ... // initialization material here
} 
```**

# javascript - jQuery "$(document).ready(function () {" 等效于 Javascript

> ID：11831475
> 
> 赞同：-4
> 
> 时间：2012-08-06T15:40:49.520
> 
> 标签：javascript, jquery, html, dom

> **可能重复：**
> [$(document).ready 没有 jQuery 的等价物](https://stackoverflow.com/questions/799981/document-ready-equivalent-without-jquery)

我想等到`datagrid`正确调整 ASP.NET 的大小后再显示弹出消息。这很好用：

```
$(document).ready(function () { showpopup(); }); 
```

但我需要在没有 jQuery 的情况下实现它。我尝试了很多方法：

```
$(window).bind("load", function() {showpopup();}

$(function() { showPopup();} 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:43:41.640

我做这些事情的首选方法是从我的脚本开始：

```
var loadScripts = [],
    loadScript = function(callback) {loadScripts.push(callback); 
```

然后，之前页面上的最后一件事`</body>`是：

```
<script type="text/javascript">(function() {var x; while(x=loadScripts.shift()) x();})();</script> 
```

然后，每当有什么我想推迟到 DOM 加载完成时，我只需将它包含在：

```
loadScript(function() {
    // do stuff here
}); 
```

# ruby - 使方法在 capistrano 部署文件中可用

> ID：11831485
> 
> 赞同：0
> 
> 时间：2012-08-06T15:41:09.690
> 
> 标签：ruby, capistrano

我有自己的 gem，可以为我简化部署，因为服务器有一些配置。

结构如下：

```
- .
- ..
- lib
  - capistrano
    - foo
      - common.rb
    - foo.rb 
```

foo.rb：

```
require "capistrano"
require "capistrano/ext/multistage"
require "capistrano/foo/common" 
```

common.rb:

```
def _cset(name, *args, &block)
  unless exists?(name)
    set(name, *args, &block)
  end
end

def _baz(param)
end 
```

我似乎无法调用 `_baz`我的部署文件，而我可以正常调用`_cset`。如何`_baz`在我的部署文件中进行调用？

例外：

> capistrano-2.12.0/lib/capistrano/configuration/variables.rb:122:in `method_missing_with_variables': undefined method `_symlink' for # (NoMethodError)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:53:46.843

这是一个`require`问题，`capistrano/foo`项目本身没有正确要求`capistrano/foo/common`，我的基本配方中也没有明确要求。

# iis-7 - 1% 的用户在每个页面请求上获得新的 Session ID

> ID：11831487
> 
> 赞同：2
> 
> 时间：2012-08-06T15:41:14.337
> 
> 标签：iis-7, coldfusion, session-cookies

我们刚刚升级到 IIS7，并且在 SESSION 变量方面遇到了间歇性问题。简而言之，只有极低比例的用户会在每次页面请求时获得新的 SESSION ID。清除 cookie 解决了我遇到的几乎所有使用的这个问题。

我的问题是......有没有办法以编程方式做到这一点？无法登录/无法让某个应用程序工作的人的呼叫百分比较低，所以这不是一个大问题，但我们必须整天引导人们完成清除 cookie 的过程。我没有读过，也没有看到强制用户清除 cookie 的方法。

这里的大多数其他问题都是到处都有这个问题的用途，就好像存在程序错误一样。我们的应用程序运行良好，只是一小部分在旧服务器上使用我们的应用程序的用户无法从新服务器获取新的会话 cookie。

我们正在运行 IIS6/CF9，我们升级到 IIS7/CF10。这个问题是跨浏览器的。我们已经看到它出现在 IE、FF 和 Chrome 中。

- 编辑 -

如果用户清除 cookie 并转到 domian.com，然后转到 sub.domain.com，则 domain.com cookie 优先，我猜浏览器永远不会返回它从 sub.domain.com 获得的 sub.domain.com cookie服务器。我猜，在 sub.domain.com 上打开 J2EE cookie 可以解决这个问题，但客户端仍然使用来自 domain.com 的 cookie。域 cookie 是默认设置的任何内容...即我们不会将其设置为 app.cfc 中的任何内容。我不知道它是如何在 domain.com 上设置的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T21:05:29.517

在 Application.cfc 中，您是否将域 cookie 设置为 true？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:35:20.277

听起来这可能与Adob​​e 去年 2 月推出的[会话固定修补程序有关。](http://helpx.adobe.com/coldfusion/kb/security-hotfix-coldfusion-8-8.html)您的 CF9 服务器是否已打好补丁？

简而言之，CF 现在会在每个会话上发布新的 CFID/TOKEN 值，并且不会使用现有的 cookie 值（以防止会话劫持）。确保您的应用正在将这些新值写入 cookie，并且不允许使用现有的 cookie 值。

这是一个[详细的解释](http://cfsimplicity.com/4/coldfusion-security-hotfix-changes-session-behaviour)正如该帖子的评论中所指出的，使用 J2EE 会话确实是解决问题的一种方法。

# javascript - 附加要使用的变量 jQuery 验证插件

> ID：11831488
> 
> 赞同：1
> 
> 时间：2012-08-06T15:41:14.477
> 
> 标签：javascript, jquery, jquery-validate

我有变量

```
var student_office_id = $(this).data('office'); 
```

我希望在 jQuery validate 插件中使用它，如下所示：

```
$('.office_directed_to, .degree_type').bind('change', function() {

  var student_office_id = $(this).data('office');

  $("#admin-form").validate({

    rules: {
      "h_number["+student_office_id+"]": {
        required: function(element) {
          return $("#office_directed_to-8").val() != '';  
        }
      },

      "degree_type["+student_office_id+"]": {
        required: function(element) {
          return $("#office_directed_to-"+student_office_id+).val() != '';  
        }
      }
    } // end rules
  }); // end validate
}); // end bing change 
```

我在控制台中收到以下错误：Uncaught SyntaxError: Unexpected identifier

它指的是我尝试附加 student_office_id 的第一行，我想它也会在其他实例上返回错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:44:12.407

您不能以这种方式使用变量指定对象中的键。您需要执行以下操作：

```
var rules = {}

rules["h_number["+student_office_id+"]"] = {
    required: function(element) {
      return $("#office_directed_to-8").val() != '';  
    }
}

rules["degree_type["+student_office_id+"]"] = {
    required: function(element) {
      return $("#office_directed_to-"+student_office_id+"").val() != '';  
    }
}

$("#admin-form").validate({
    rules: rules // end rules
}); 
```

关键是您可以使用类似数组的`[]`语法和字符串来访问对象的属性，这将允许您使用另一个变量的值动态生成键（作为字符串）。

# backbone.js - 骨干：如何从模型中引用集合

> ID：11831490
> 
> 赞同：5
> 
> 时间：2012-08-06T15:41:18.340
> 
> 标签：backbone.js

我知道它通常以相反的方式完成，但在我的特定用例中，我需要一个 Model ***PostsTimes***并引用一个 Collection （另一个 Model ***Post***）。现在我正在尝试：

```
var Posts = Backbone.Collection.extend({
    model: Post
});
var posts = new Posts(); // my collection

var PostsTimes = Backbone.Model.extend({
    url: "api/times.php",
    initialize: function(options){
        this.posts = options.posts;
    },
    test: function(){
        console.log(this.posts);
    }
});

var poststimes = new PostsTimes({posts: posts}); 
```

但`this.posts`在`PostsTimes`始终停留`undefined`。有什么方法可以在不定义全局变量的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:50:14.127

你所拥有的结构是正确的，所以它记录的原因`undefined`是因为`this`你的`test`函数中的东西不是模型的实例。

所以你`PostsTimes`会变成

```
var PostsTimes = Backbone.Model.extend({
    url: "api/times.php",
    initialize: function(options){
        _.bindAll(this);
        this.posts = options.posts;
    },
    test: function(){
        console.log(this.posts);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:59:18.530

```
var PostsTimes = Backbone.Model.extend({
  url: "api/times.php",
  initialize: function(options){
    _.bindAll(this, 'test');
    this.posts = options.posts;
  },
  test: function(){
    console.log(this.posts);
  }
}); 
```

# java - 为什么我无法访问受保护的字段？

> ID：11831492
> 
> 赞同：9
> 
> 时间：2012-08-06T15:41:31.763
> 
> 标签：java

我正在学习 java 中的访问级别，并创建了 3 个类： 在包 my.inheritance 中，我有 A 类和 C 类

```
package my.inheritance;
public class A {
protected int a=15; 
}

package my.inheritance;
public class C {

public static void main(String[] args)
{
    A a = new A();
    System.out.println(a.a);
}
} 
```

在另一个名为 my.inheritance.test 的包中，我有一个 B 类试图访问 int 值 a 的受保护字段，但编译器为此抱怨！

```
package my.inheritance.test;
import my.inheritance.A;
public class B extends A{

public static void main(String[] args)
{
    A a = new A();
    int value = a.a;
    System.out.println(value);
}
} 
```

我的印象是受保护的你可以访问来自不同包中不同类的成员，只要你对它进行子类化！为什么可见性错误呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T15:45:11.753

*每个方法都可以访问其自己的*类及其所有父类的受保护字段。这不包括对另一个类的受保护字段的访问，即使它们具有共同的相应基类。

因此类中的方法`B`可以从类的对象访问受保护的字段`B`，即使它们是在其中声明的`A`，但不能从类的其他对象访问`A`。

可以说该类`B`从 继承受保护的成员`A`，因此现在每个人都`B`拥有这些成员。它不继承对`A`自身受保护成员的访问权限，因此它不能对任何受保护成员进行操作，`A`而只能对 的受保护成员进行操作`B`，即使它们是从 继承的`A`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:43:45.017

尝试：

```
public class B extends A
{

    public static void main(String[] args)
    {
        B a = new B();
        int value = a.a;
        System.out.println(value);
    }
} 
```

只有当它在同一个对象中时，您才能访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:05:43.423

**1.** `protected`是一个访问修饰符，当您想要**在包外部进行访问时使用。**

**2.**大多数人尝试通过创建 Super 类的**Object 引用变量来访问 Super 类的受保护成员，然后使用点运算符访问该受保护成员**....但那是**错误的。**

**3.**我们获得了**继承的成员** `Super class` **不是超类的直接成员。**

**例如：**

```
package com.demo1;

public class A{

protected int a = 5;

}

package com.demo2;

public class B extends A{

public static void main(String[] args){

         System.out.println(new B().a);   // This "a" is the inherited member

  }

} 
```

**4.**还有一点很重要，**子类**`"a"`中的这个继承的成员，会被同一个包中的另一个类视为子类的**私有成员..所以考虑这个包中的另一个类可以'甚至看不到这个受保护的成员...**

 ***** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T16:06:42.773

您可以使用 this.a 从 B 访问此字段，因为 B 扩展了 A，但在这种情况下，您尝试通过 A 的实例访问此字段，这受到受保护访问的限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T16:29:14.913

你想要做的是：

```
A a = new A();
int value = a.a; 
```

请注意，这`a.a`是一个限定名称，在这种情况下，`B`只有当左侧表达式的类型`.`是`B`或其子类时，您才能在类的主体中调用它。

[JLS的相关部分](http://docs.oracle.com/javase/specs/jls/se5.0/html/names.html#6.6.2)****

# entity-framework - 使用 ViewModel 中的空值覆盖的实体

> ID：11831493
> 
> 赞同：1
> 
> 时间：2012-08-06T15:41:34.050
> 
> 标签：entity-framework

我刚刚在我的 MVC 应用程序中遇到了一个小错误。

管理员可以编辑用户配置文件。包括用户所在的角色。

所以我有一个“EditUser”的ViewModel：

```
public class EditUserViewModel
{
    public User User { get; set; }
    public IEnumerable<SelectListItem> PossibleRoles { get; set; }
    public int[] SelectedRoles { get; set; }
} 
```

因此，在我的 EditUser.cshtml 页面上，我只需运行一个 @Html.EditorFor(Model => model.User) 根据我的 MetaData 类的限制生成所需的字段。

在那里，例如，我做了这样的注释：

```
 [ScaffoldColumn(false)]
    public string Password { get; set; } 
```

这样做的问题是，当我回发我的编辑表单时，设置为 Scaffold false 的值是空的。这似乎有点合乎逻辑，因为这些属性没有编辑框。

所以当我保存我的实体时，它会用 null 覆盖值。（例如，如果我更新用户名并保存，用户的密码被 null 覆盖并且 EF 抛出错误）有什么方法可以自动更新值（根据我能够编辑的值（MetaDataClasses）？ ) ? 否则，如果我将它们复制到从实体框架中新获取的实体中，并且我应该将注释更改为 Scaffold(false)，我需要在代码中添加一条规则，以便将新值复制到实体中。这似乎是错误的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T17:45:21.010

EF 适用于整个实体，如果您决定不显示实体的某些部分，您还必须在保存更改时在某处处理此问题。您有多种选择：

*   如果您不想显示其所有数据，请不要使用该实体。使用特殊的视图模型，而不是只包含您想要显示的数据。使用该视图模型来收集更改并将它们复制到实体（例如，您可以使用 AutoMapper 将实体转换为视图模型，反之亦然）。
*   从数据库加载实体并仅更新要从编辑视图模型中保留的字段
*   不要将整个用户实体设置为已更新。而是[手动设置](https://stackoverflow.com/questions/11814996/updating-record-in-ef-4-1/11815156#11815156)要更新的每个属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:31:02.707

您也可以使用隐藏输入。不过，不确定这样做是否是一个好主意。

```
@Html.HiddenFor(model => model.Property) 
```

# android - 标签导航中的Android Fragment替换

> ID：11831494
> 
> 赞同：0
> 
> 时间：2012-08-06T15:41:34.777
> 
> 标签：android

在我的 android 应用程序中，我有一个包含两个选项卡的活动，并在活动中动态加载两个片段。

[http://pastebin.com/EP6BFuPw](http://pastebin.com/EP6BFuPw)

我的问题是：一旦我单击第二个片段内的列表视图，详细视图将显示在该片段内。但是当我选择另一个选项卡时，将显示第一个片段（第二个片段不变，里面有详细视图）。

[http://pastebin.com/Bnns0uXQ](http://pastebin.com/Bnns0uXQ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:30:05.010

我遇到了同样的问题。我正在使用 Google 提供的 TabListener 代码，我知道问题出在哪里。在 onTabSelected 中，我们附加分配给堆栈的片段，在 onTabUnselected 中，我们分离旧片段。问题是，一旦我们在列表导航中执行 ft.replace()，TabListener 无法分离选项卡片段，因为它不再存在并且已被替换。

我尝试替换 onTabSelected 中的片段，但随后我们在选项卡中丢失了回溯堆栈跟踪。我当前的解决方案是，而不是在选项卡中使用片段导航，而是使用片段打开一个新活动。如果我想出一个更好的解决方案来支持标签内的导航，我会告诉你的。

# c++ - 在 C++ 中，使用 gzstream 编写压缩文件时如何检查错误？

> ID：11831496
> 
> 赞同：0
> 
> 时间：2012-08-06T15:41:40.890
> 
> 标签：c++, compression

我正在使用[gzstream](http://www.cs.unc.edu/Research/compgeom/gzstream/)编写 C++ 程序的输出。但是，有时生成的文件似乎写得很糟糕：`zcat: output.txt.gz: unexpected end of file`，即使我自己的程序没有返回错误。

因此，我想在写入文件时捕获错误，即不必等到程序完成执行 zcat 并查看上面的错误。

这是我的代码的相关部分：

```
ogzstream outStream;
outStream.open ("output.txt.gz");
if (! outStream.is_open()) { cerr << "error while opening" << endl; exit (1); }
for (size_t i = 0; i < vecResults.size(); ++i)
    outStream << i << " " << vecResults[i] << endl;
outStream.close(); 
```

有什么可以改进的？写完后我应该检查任何错误位`<<`吗？还是关门后？如果是，我该怎么做？

（仅供参考，很难复制该错误，因为它很少发生，但频率足以令人讨厌。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:59:53.103

`outStream.good()`假设错误检查在内部正确实施，您应该能够在关闭它后检查结果。

或者，您可以使用该`exceptions(...)`成员请求在发生错误时抛出异常。

编辑：错误位不会自动重置，所以最后检查它们是安全的；如果中间有任何故障，您可以在最后检查。

# sql - SQL：从计算当前日期时间获取分钟值 - 从表中获取日期时间值

> ID：11831499
> 
> 赞同：0
> 
> 时间：2012-08-06T15:41:51.927
> 
> 标签：sql, sql-server, datetime, timestamp

有没有办法从计算当前时间（系统时钟）到`DateTime`数据库中的值检索分钟值

例子

```
LogID     Timestamp
1         2012-08-06 23:35
2         2012-08-06 23:39 
```

当前系统日期时间为：2012-08-06 23:50

输出应该是

```
LogID     Minutes
1         15
2         11 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T15:43:00.030

```
SELECT LogID, [Timestamp], 
    [Minutes] = DATEDIFF(MINUTE, [Timestamp], CURRENT_TIMESTAMP)
  FROM dbo.table_name; 
```

# r - 使用 R 中的层次聚类生成描述数据集中聚类的热图

> ID：11831501
> 
> 赞同：5
> 
> 时间：2012-08-06T15:41:57.777
> 
> 标签：r, cluster-analysis, heatmap, dendrogram, hierarchical-clustering

![树状图](../Images/6818ac3a0409c4fb0f7e4623c17f1c6d.png)![这是我能够生成的热图](../Images/ae831475a3859fb7b7a426f57c72d83b.png)我正在尝试获取由蛋白质 dna 相互作用组成的数据集，对数据进行聚类并生成显示结果数据的热图，以使数据看起来与对角线上排列的聚类聚类。我能够对数据进行聚类并生成该数据的树状图，但是当我使用 R 中的热图函数生成数据的热图时，集群不可见。如果您查看前两张图像，一张是我能够生成的树状图，第二张是我能够生成的热图，第三张只是显示我期望结果的集群热图的示例粗略看。从比较第二张和第三张图像可以看出，很明显第三张图像中有簇，而第二张图像中没有。 ![示例热图](../Images/37656dbdf78fdda8cb1c8fbef8173db7.png)

这是我的数据集的链接：http: [//pastebin.com/wQ9tYmjy](http://pastebin.com/wQ9tYmjy)

我能够对数据进行聚类并在 R 中生成一个就好了：

> `args <- commandArgs(TRUE);`
> 
> `matrix_a <- read.table(args[1], sep='\t', header=T, row.names=1);`
> 
> `location <- args[2];`
> 
> `matrix_d <- dist(matrix_a);`
> 
> `hc <- hclust(matrix_d,"average");`
> 
> `mypng <- function(filename = "mydefault.png") {`
> 
> `png(filename)`
> 
> `}`
> 
> `options(device = "mypng")`
> 
> `plot(hc);`

我也可以生成热图：

> `matrix_a <- read.table("Arda_list.txt.binary.matrix.txt", sep='\t', header=T, row.names=1);`
> 
> `mtscaled <- as.matrix(scale(matrix_a))`
> 
> `heatmap(mtscaled, Colv=F, scale='none')`

我试图关注克里斯托弗·巴雷的帖子： [http](http://digitheadslabnotebook.blogspot.com/2011/06/drawing-heatmaps-in-r.html) ://digitheadslabnotebook.blogspot.com/2011/06/drawing-heatmaps-in-r.html ，但我错过了一些东西。任何想法，将不胜感激。我附上了我得到的热图的图像，以及树状图。图 3 取自 Christopher Bare 的帖子。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T17:45:15.850

![在此处输入图像描述](../Images/ccb65de2a1f4a2822bcc206b28f35f5e.png)

事实证明，我应该首先使用我的数据上的某种相关性生成一个距离矩阵。我使用 pearson 计算了矩阵上的相似度值，然后调用 heapmap 函数，它可以更轻松地对数据进行聚类。一旦我能够生成集群，我就做到了，这样它们就会在对角线上排列。以上是现在的结果。我不得不改变我在数据集上调用热图的方式，以便集群在轴上排列：

```
heatmap(mtscaled, Colv=T,Rowv=T, scale='none',symm = T) 
```

# delphi - 如何比较delphi exe

> ID：11831503
> 
> 赞同：0
> 
> 时间：2012-08-06T15:42:03.207
> 
> 标签：delphi, exe

我有两个 delphi 生成的同一个项目的 exe。一个exe是很久以前生成的，第二个exe是最近使用当前源代码生成的。现在这两个exe之间存在大小差异。有什么方法可以找出大小不同的原因，以及是否有任何新功能错误地添加到新 exe 中。因为exe是二进制的。我们可以转换成任何可读的格式吗？或任何其他提示/评论？感谢帮助。

注意：我没有生成第一个 exe 的源代码。所以无法比较源代码。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T00:03:02.917

有一些工具可以反汇编本机 Intel x86 或 x64 可执行文件并吐出文本汇编器指令，但由于在编译为本机代码时保留的原始源代码中的文本很少，因此该反汇编器生成的文本很可能是机器生成的字母汤。机械上正确但人为胡言乱语。

您可以尝试将新旧 exe 都分解为 asm 文本，然后使用文本差异工具比较 asm 文本之间的差异。这将有助于减少创建巨大差异日志的小更改的差异工具噪音，因为小的更改会导致所有全局偏移量在其之后发生变化。反汇编的 asm 文本应该具有较少的全局偏移依赖关系。

硬道理是，如果您没有了解 Intel asm 指令和 Delphi 编译器代码生成模式的人，那么即使这个反汇编步骤也不太可能产生很多有用的信息来帮助您理解为什么这两个 exe 的大小不同。在一个 exe 大小为 500k 的重要应用程序中，使用不同的编译器选项进行编译可能会导致 10k 的差异，例如使用堆栈帧与删除堆栈帧，或者在调试模式与非调试模式下编译。

即使在新的 exe 中添加对 Writeln() 的引用也可能占到 10k 的大部分 - RTL 中的文本 IO 例程是智能链接到您的 exe 的，除非有人使用它，并且触摸 Writeln 会触及整个支持例程森林在 RTL 内。如果旧的 exe 不使用 Writeln 而新的 exe 使用，那么新的 exe 将携带 Writeln 支持例程，我隐约记得重量为“超过几 K”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:28:46.130

您可以使用[http://corelabs.coresecurity.com/index.php?module=Wiki&action=view&type=tool&name=turbodiff中的](http://corelabs.coresecurity.com/index.php?module=Wiki&action=view&type=tool&name=turbodiff)**turbodiff**来查看两个可执行文件之间的差异。当然，您还需要**IDA 5.0**的免费版本，您可以从[http://www.hex-rays.com/products/ida/support/download_freeware.shtml下载](http://www.hex-rays.com/products/ida/support/download_freeware.shtml)

# ipad - 修复了 ipad (iOS5) 上的后台问题

> ID：11831504
> 
> 赞同：0
> 
> 时间：2012-08-06T15:42:11.593
> 
> 标签：ipad, html, ios5, css, webkit

目前正在建立一个新博客，并且在 ipad 上存在固定封面背景的问题 - 在浏览器上工作正常，但在 iPad 上滚动，尝试了很多事情，包括创建一个单独的背景 div 位置：固定 z-index：-1；这创造了同样的效果。

我不确定为什么会发生这种情况，因为我认为 position:fixed 和 background-attachment: fixed 应该在 iOS5 中排序？

你可以在这里查看：[http ://reactionproductions.com/tumblr/](http://reactionproductions.com/tumblr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:33:51.207

经过几天寻找解决方案，这里是：[http ://ryanfait.com/resources/fixed-positioning-in-internet-explorer/](http://ryanfait.com/resources/fixed-positioning-in-internet-explorer/)

这就是我的工作方式：

```
* {
    margin: 0;
}
html, body {

    height: 100%;
    overflow: auto;
    overflow-y: scroll !important; 
}
#background_wrap {
    background: #000000 url(xxxxx.jpg); no-repeat center center fixed;
   -webkit-background-size: cover; 
   -moz-background-size: cover; 
   -o-background-size: cover; 
    background-size: cover; 
    background-position: center; 
   -webkit-overflow-scrolling: touch !important;  
    z-index: 0;
    position: relative;
    width: 100%;
    height: 100%;
    overflow: auto;
}

#page {
   -webkit-backface-visibility: hidden;

}
.box {
    position: fixed;
    left: 10px;
    top: 180px;
}
* html .box {
    position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:26:36.857

您可以尝试通过在 CSS 中进行选择

```
@media screen and (min-width: 1023px){
body {
    background: cover;/*etc*/
    width: 100%; 
    height: 100%; 
    position: absolute; 
  }
} 
```

和玩耍。你也可以添加

```
@media screen and landscape and (min-width: 1023px) 
```

并带有肖像，因此可以很好地获取 ipad 设备。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:04:28.237

你试过这个解决方案吗？将它放在窗口的 onScroll 事件处理程序中：

```
if(navigator.platform == 'iPad' || navigator.platform == 'iPhone' || navigator.platform == 'iPod')
{
    //set background fixed with javascript
    var element = document.getElementById('background');
    element.style.webkitTransform = "translate3d(0, " + window.pageYOffset + "px, 0)";
}; 
```

# python - 在 Word XML 文件中插入换行符

> ID：11831508
> 
> 赞同：0
> 
> 时间：2012-08-06T15:42:18.147
> 
> 标签：python, xml, ms-word

我正在 Python 中的 Word XML 文件中进行搜索和替换，其中我用从另一个文件中获取的段落替换了一个文本字符串。插入的段落有换行符，但 XML 规范似乎将换行符转换为空格。我希望这些换行符保留在 XML 文档中。换行符`\n`在我的原始文本中表示为。我尝试用`&#10;`类型代码替换它，它只是作为文本出现在 word 文件中。我还尝试替换`\n`with`</w:t><w:cr><w:t>`以插入带有 XML 标记的换行符。这也只是作为文本出现在 wordfile 中。在 XML Notepad 中查看更改的 XML 时，它似乎也没有被解释为标签：

![XML 记事本中的 XML 屏幕截图](../Images/27013d36e35b8c52133bddcf712adb9e.png)

如何将换行符插入到实际会被尊重的 XML 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:24:08.387

我最终通过使用 dom API 分别添加行来实现这一点：

```
for comment in comment_lines:
    new = dom.createElement('w:t')
    new.appendChild(dom.createTextNode(comment))
    parent.appendChild(new)
    parent.appendChild(dom.createElement('w:br')) 
```

# python - Django：在查询集上使用注释、计数和区分

> ID：11831510
> 
> 赞同：13
> 
> 时间：2012-08-06T15:42:23.753
> 
> 标签：python, django

这是我的数据库查询：

```
results = Attachments.objects.filter(currency='current').annotate(num_attachments=Count('article_id')).order_by("num_attachments").distinct('article_id') 
```

查询分解如下（据我了解）：

*   第一个过滤器是“当前”的当前附件。
*   然后计算具有特定“article_id”的那些附件的数量。
*   然后用具有共同article_id 的附件数来注释每个附件。
*   然后根据附件的数量进行排名。
*   然后，用 distinct 减少列表，以便每个 article_id 值都有一个 Attachment 对象。

我在 PostgreSQL 上运行它，所以根据 Django[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/)，我可以根据字段运行 distinct() 。

执行查询时没有错误，但是当我尝试迭代甚至打印结果时，Django 调试会引发以下错误：

```
NotImplementedError at /function/
annotate() + distinct(fields) not implemented. 
```

来自交互式提示的更详细的回溯是：

```
 File "<console>", line 1, in <module>
  File "/Users/Pat/.virtualenvs/envsp/lib/python2.7/site-packages/django/db/models/query.py", line 118, in _result_iter
    self._fill_cache()
  File "/Users/Pat/.virtualenvs/envsp/lib/python2.7/site-packages/django/db/models/query.py", line 875, in _fill_cache
    self._result_cache.append(self._iter.next())
  File "/Users/Pat/.virtualenvs/envsp/lib/python2.7/site-packages/django/db/models/query.py", line 291, in iterator
    for row in compiler.results_iter():
  File "/Users/Pat/.virtualenvs/envsp/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 763, in results_iter
    for rows in self.execute_sql(MULTI):
  File "/Users/Pat/.virtualenvs/envsp/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 808, in execute_sql
    sql, params = self.as_sql()
  File "/Users/Pat/.virtualenvs/envsp/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 107, in as_sql
    "annotate() + distinct(fields) not implemented.")
NotImplementedError: annotate() + distinct(fields) not implemented. 
```

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-17T16:10:15.647

解决方法是使用`values('distinct_fieldname')`，因为这将使最终的 SQL 语句`GROUP BY`在该字段上执行（您可以添加多个字段名），这本质上是相同的。

例如，如果您想知道给定的文章有多少，`'filename'`您可以这样做：

```
results = Attachments.objects.filter(currency='current').values('filename').annotate(num_attachments=Count('article_id')).order_by("num_attachments") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-03T15:46:40.843

我找到了另一种方法，如何克服这个问题 - 通过使用子查询：

```
distinct_articles = Attachments.objects.distinct('article_id')
results = Attachments.objects.filter(currency='current').annotate(num_attachments=Count('article_id')).order_by("num_attachments").filter(id__in=distinct_articles) 
```

这实际上被评估为 Django 中的一个数据库查询。

# c - 意外的左移行为

> ID：11831517
> 
> 赞同：5
> 
> 时间：2012-08-06T15:42:34.433
> 
> 标签：c, bit-shift

> **可能重复：**
> [GCC 左移溢出](https://stackoverflow.com/questions/3871650/gcc-left-shift-overflow)

考虑以下最小程序。

```
#include <stdint.h>
#include <stdio.h>

int main()
{
    uint32_t v = 1024;
    v &= (((uint32_t)1 << 32) - 1);
    printf("v = %u\n", v);
    return 0;
} 
```

正如`1024`我所期望的那样在 MinGW 下使用 GCC 进行编译。因为 1 向左移动 32 次又是 0，因此 0-1 = -1 即“1111....1111”。这个与任何值的 AND 应该再次返回相同的值。

但是，如果我将程序更改为

```
#include <stdint.h>
#include <stdio.h>

int main()
{
    unsigned int s = 32;
    uint32_t v = 1024;
    v &= (((uint32_t)1 << s) - 1);
    printf("v = %u\n", v);
    return 0;
} 
```

现在打印的结果是`0`. 有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T15:44:32.180

将 32 位值移动 32 位是 C 中未定义的行为。不要这样做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T15:45:14.483

两者都是未定义的行为，因为移位距离必须小于类型的位宽。使用常量，gcc 的优化器会执行您期望的操作，但是使用变量，移位是在运行时完成的。移位距离可能被 31 所掩盖，因此没有进行移位并且 1 - 1 == 0。

# asp.net-mvc - 在 MVC 操作方法中模拟局部变量？

> ID：11831518
> 
> 赞同：1
> 
> 时间：2012-08-06T15:42:37.467
> 
> 标签：asp.net-mvc, mocking, nunit, moq

使用 Moq 或 Rhino，我想在我的 MVC 操作方法之一中模拟一个局部变量。

例如，在我的程序中，我有一个“ProfileController”，其方法如下所示：

```
 public ActionResult Profile(ProfileOptions oProfile)
        {
            ProfileViewModel oModel = new ProfileViewModel(); // <--can I mock this?

            //… do work, using oModel along the way

            return View(oModel);

         } 
```

我的测试将在测试类的`[SetUp]`方法中创建一个新的 ProfileController，并且我会使用它对其操作方法运行各种测试。

我想在测试中`oModel`调用该`Profile`方法时模拟上面的变量，但由于它是本地的并且不是通过注入传递的，我可以以某种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:22:02.057

如果您确实需要模拟对象，则可以使用在类级别声明和实例化的构造方法/类型，然后模拟该类型。

```
public class MyController
{
    // If you're using DI, you should use constructor injection instead of this:
    protected IProfileViewModelBuilder _builder = new ProfileViewModelBuilder();

    ...
    public ActionResult Profile(ProfileOptions oProfile)
    {
        ProfileViewModel oModel = _builder.Build(); // <--I CAN mock this!

        //… do work, using oModel along the way

        return View(oModel);

     }
    ...

} 
```

这种方法的一个好处是，如果将来您的 ViewModel 的创建变得更加复杂，则所需的任何更改都将被隔离到一个位置。

希望有帮助，

麦克风

# android - jquery mobile - android手机上的视口值

> ID：11831519
> 
> 赞同：4
> 
> 时间：2012-08-06T15:42:37.520
> 
> 标签：android, jquery, mobile

我是 Jquery Mobile 的新手，我真的不明白如何设置视口值来正确渲染图像。这是我的测试步骤：

1.  我准备了一张 480x432 的图像。 ![在此处输入图像描述](../Images/6d955c0ce98e01578fdb3ed910d6e9cd.png)
2.  我写了一个这样的测试页面：

> ```
> <html>
> <head>    
> <meta name="viewport" content="initial-scale=1.0, target-densitydpi=device-dpi，width=device-width, minimum-scale=0.1, user-scalable=no"/>
> <link href="style/jquery.mobile.theme-1.1.1.min.css" rel="stylesheet" type="text/css"/>
> <link href="style/jquery.mobile.structure-1.1.1.min.css" rel="stylesheet" type="text/css"/>    
>  <script src="js/jquery.js" type="text/javascript"></script>
>  <script src="js/jquery.mobile-1.1.1.min.js" type="text/javascript"></script>
> </head>
> <body style="margin:0;">
> <div data-role="header" data-position="fixed" data-theme="f">
> <a href="sm_app_home.html" data-theme="a" data-mini="true" data-icon="home" class="ui-btn-left">Home</a>
> <a href="sm_app_home.html" data-theme="a" data-mini="true" data-icon="gear" class="ui-btn-right">settings</a>  
> </div>  
>     <div data-role="content">
>     <div id="bld" class="bld" style="position: absolute; width: 250px; height: 125px; left: 161px; background-color: #ccccff; top: 185px;">Hello world.</div>
>     <img id="bl1" src="img/sc_museum/480x432.jpg" />
> </div>
> <script>
>     $("#bl1").click(function(){
>     var pageWidth = $(document).width();
>     var pageHeight = $(document).height();
>     var viewportWidth = $(window).width();
>     var viewportHeight = $(window).height();
>     $("#bld").html("Page width: "+pageWidth+"<br />pageHeight: "+pageHeight+"<br />port width: "+viewportWidth+"<br />port height: "+viewportHeight);
> });
> </script>
> </body>
> </html> 
> ```

3\. 该应用程序在我的三星 Galaxy SII 上运行，如下所示： ![在此处输入图像描述](../Images/d845810f6b0187a3dc6183a5f2e1c16f.png)

如您所见，图像很合适，但按钮和标签文本太小了。

`target-densitydpi=device-dpi`4.我在值设置中删除，`viewport`我的应用程序如下所示：

![在此处输入图像描述](../Images/c15d82218f476a47084771247540ac13.png)

如您所见，按钮和标签文本很好，但是图像溢出。

我的问题：

1.  为什么当我使用某些视口值时，我会得到像紫色块中的值一样的页面宽度/高度和端口宽度/高度值？
2.  建议的视口值是多少以及如何处理图像宽度/高度？

我知道图像宽度/高度是像素，但 android 手机屏幕没有使用它，但我仍然不确定如何调整图像大小以适应屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:03:39.177

如果您使用 target-densitydpi=device-dpi，则移动浏览器会提供本机可用像素。如果您不使用 target-densitydpi=device-dpi，移动浏览器会缩放/缩放页面。

我的理解是，您无法知道用户正在使用什么移动设备，因此无法知道可用的视口大小。您使用 JavaScript 检测大小的方法很好并且有效。在获得视口大小然后加载自定义创建的图像后，您不能只对服务器进行 Ajax 调用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:34:59.420

**请使用“em”**中的宽度和高度单位而不是像素并尝试一下。不同设备的像素比率不同，因此 px 在设备中呈现的效果不同。

# asp.net - 具有两个独立 DBContext 的实体框架

> ID：11831520
> 
> 赞同：0
> 
> 时间：2012-08-06T15:42:44.120
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework-4

我正在使用实体框架 4，我收到此错误：

> 无法插入外键值，因为对应的主键值不存在。[ 外键约束名称 = FK_Table1_Table2_ColumnId ]

`Table1`在哪里`DBContext`：

```
public class Database1DB : DbContext
{
   public DbSet<Table1> TableOne { get; set; }
} 
```

并且`Table 2`在另一个`DBContext`：

```
public class Database2DB : DbContext
{
   public DbSet<Table2> TabeTwo {get;set;}
} 
```

`Table 1``Table2`有一个对' 列的外键引用，如下所示：

```
public class Table1
{
   [Key]
   public int Id {get;set;}

   [ForeignKey("Table2")
   public int ColumnId {get;set;}

   public virtual Table2 Table2 {get;set;}
}

public class Table2
{
   [Key]
   public int Id {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T17:33:49.413

您不能对在不同上下文中定义的实体之间的关系进行建模。相关实体必须在相同的上下文中才能使其工作。在您的情况下，您可以简单地使用：

```
public class Table1
{
   [Key]
   public int Id {get;set;}
   public int ColumnId {get;set;}
}

public class Table2
{
   [Key]
   public int Id {get;set;}
} 
```

而且您将不得不手动处理关系。

# php - 使用 PHP 从文件中删除多行

> ID：11831527
> 
> 赞同：1
> 
> 时间：2012-08-06T15:42:55.110
> 
> 标签：php

我一直在寻找几个小时来寻找使用 PHP 脚本删除文件中的文本块的解决方案。

似乎有许多用于删除文本行的选项，但不是文本块。我尝试使用`preg_replace ("/^$start.*?$end/s", $replace, $fdata)`以下方法，但没有找到有效的解决方案。

我确信有人已经这样做了，所以任何帮助将不胜感激。

```
$start = "# Copyright 2000-";
$end = "Agreement.";

# This software product may only be used strictly in accordance
# with the applicable written License Agreement. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T15:44:44.423

您需要[多行模式](http://us2.php.net/manual/en/reference.pcre.pattern.modifiers.php)( `/m`)，否则您的正则表达式不会跨多行捕获。此外，您应该使用 转义您的正则表达式参数[`preg_quote()`](http://php.net/preg_quote)，否则您可能会得到不希望的结果（例如，`$end`当您希望它匹配单个句点时，它有一个点，这是一个正则表达式元字符。）

```
$regex = "/^" . preg_quote( $start, '/') .".*?". preg_quote( $end, '/') . "/sm";
preg_replace ( $regex, $replace, $fdata); 
```

# image - 如何通过 GWT 为 CellList 中的不同记录显示不同的图像

> ID：11831528
> 
> 赞同：1
> 
> 时间：2012-08-06T15:42:57.823
> 
> 标签：image, gwt, celllist

我有一个带有 AbstractCell 的 CellList。每条记录都有一些文本字段和一张图片，就像朋友列表一样，每个人都有自己的图片。在 GWT 展示中，CellList 示例使用 AbstractImagePrototype.create(imageResource) 向所有人提供一张图片。这不是真实世界的案例。如何在 GWT 中显示这些图片？

我用 ClientBundle 尝试了 1 晚，只在 1 个主面板中得到了 1 张静态图片的结果。另外，我不知道这些图片应该放在哪里，在 MySql 的 Blob 列中还是在文件系统中。你能给我一些关于 GWT 端或服务器端的建议吗？非常感谢。

刚才，我看到有人建议在服务器端使用 servlet 来提供这些图片。但这会导致另一个服务器访问，并且应该对其进行另一个权限检查。这些图片可以和 CellList 的文本数据一起下载并在浏览器中显示吗？谢谢。

在 2.5rc 中，AbstractCell 可以与带有 ui.xml 的 UiRender 一起使用。如果它可以很好地与 ui.xml 一起使用，那将是最好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:33:46.567

好吧，这取决于您如何将每个用户的图片传输到您的 GWT 应用程序。
`ClientBundle`不太合适，因为它在编译时定义资源，我猜您的用户的头像图像非常动态（即新用户、用户更改图片等）。

所以你有两个解决方案：

1.  将实际图像内容（base64 编码）添加到`DTO`支持您的字段中，`CellList`并以`render`您`AbstractCell`在运行中创建图像的方法。
2.  将图像 url 添加到您的字段中，`DTO`并且在您的`render`方法中，您`AbstractCell`只需创建一个`Image`或`<a href=`使用相应的 url。

解决方案 2 将为每个图像创建一个单独的 HTTP 请求。解决方案 1 不会，但是您传输给客户端的数据量会增加。

关于存储：

将它们作为 blob 字段存储在数据库中更容易，因为当您删除用户记录时，图像也会被自动删除。但是，您的数据库大小会增加，这始终是备份的问题。

# c# - 如何避免在 RichTextBox 控件中滚动

> ID：11831533
> 
> 赞同：0
> 
> 时间：2012-08-06T15:43:21.893
> 
> 标签：c#, winforms, richtextbox

例如，我想将文本框的高度设置为 50，仅此而已，并且不会在文本框中滚动。

我尝试将属性设置`ScrollBars`为`RichTextBoxScrollBars.None`，它没有帮助，确实没有显示滚动条，但有一个滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:40:11.303

如果选择文本不重要，有两种可能的解决方案。

一种选择是禁用富文本框，它会阻止滚动和选择文本，但也会使文本和背景变灰。

```
this.richTextBox2.Enabled = false; 
```

第二个选项是此类，它将阻止光标移动，从而阻止滚动选择文本，但不会使背景变灰。

```
class RichTextBoxEx : RichTextBox
{
    protected override void OnSelectionChanged(EventArgs e)
    {
        if (this.SelectionStart != 0)
        {
            this.SelectionStart = 0;
            this.SelectionLength = 0;
        }
        base.OnSelectionChanged(e);
    }
} 
```

我用.Net 2.0对此进行了测试

# google-maps - 谷歌融合表 - 处理融合表中的“group by”和“count(col_name)”函数

> ID：11831534
> 
> 赞同：0
> 
> 时间：2012-08-06T15:43:22.660
> 
> 标签：google-maps, google-fusion-tables

谢谢大家的回答：@ODI - 我的最终要求是我想触发上述查询并首先找到相关国家并为其着色，然后（现在不是小鬼）是在地图上显示这个计数。我正在尝试你提到的建议。

@user1224571 - 谢谢。

@Eric - 实际上你发布的查询没有用。请在下面找到工作代码。如果您添加 group by 子句，它将不起作用。

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta charset="UTF-8">

<title>Fusion Tables Layer Example: Basic Fusion Tables Layer</title>

<link href="http://code.google.com/apis/fusiontables/docs/samples/style/default.css"
    rel="stylesheet" type="text/css">

<script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

<script type="text/javascript">
var map;
  function initialize() {
    map = new google.maps.Map(document.getElementById('map-canvas'), {
      center: new google.maps.LatLng(44.0718, -2.768555),
      zoom: 2,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var layer = new google.maps.FusionTablesLayer({
      query: {
          select: 'masterNarrative, (count())',
          from: '1EsjL3dUyez6R8bXlJVtrL8Zq3esRsaoxcamKoVM',
          where : "masterNarrative IN ('Pharaoh','Badr')"},
      styles: [{
          polygonOptions: {
            fillColor: '#00FF00',
            fillOpacity: 0.5
          }
        }]
        //map: map
    });
    layer.setMap(map);
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>
<div id="map-canvas"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:30:27.170

根据[SQL 参考](https://developers.google.com/fusiontables/docs/v1/sql-reference#Select)，计数语法只是 count()，而不是 count(column_name)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:01:53.710

user1224571 是正确的。

尝试：

```
query: {
  select: 'master_narrative_name, (count())',
  from: '1hFPiPmQilakQ4zESVCJqq9ENmeo5e_EJXy_Usy8',
  where : "master_narrative_name IN ('Pharaoh','Badr')"  GROUP BY master_narrative_name}, 
```

# makefile - 具有多个源的顶级目录 Makefile

> ID：11831536
> 
> 赞同：1
> 
> 时间：2012-08-06T15:43:23.613
> 
> 标签：makefile, gnu-make

我有一个项目，我需要使用 Makefile 来使目录层次结构采用以下形式

```
[user@machine program]$ ls
bin  build  CHANGELOG  Makefile  src 
```

到目前为止，我创建这样一个 Makefile 的尝试都没有结果。这是我的想法：

1）定义一些希望有用的东西

```
SRCDIR    =$(PWD)/src    # Keep multiple *.cpp and *.h files in here
BUILDDIR  =$(PWD)/build  # Build all appropriate *.o files
BINDIR    =$(PWD)/bin    # Compile/link all *.o files for final executable

PROJ      = program      #This is the name of the final executable 
```

然后定义其他东西，比如编译器、一些库链接等（我不担心这些）。

2）所有目标：

```
all: $(BINDIR)/$(PROJ) 
```

3) all 目标的依赖关系：

```
$(BINDIR)/$(PROJ): $(BUILDDIR)/%.o
    $(CPP) $^ -o $@ 
```

4) 最后，*.cpp 文件

```
$(BUILDDIR)/%.o: $(SRCDIR)/%.cpp $(SRCDIR)/%.h
    $(CPP) -c $(CFLAGS) $< 
```

5）实际发生了什么？

```
[user@machine program]$ make
make: *** No rule to make target `/home/user/program/build/%.o', needed by `/home/user/program/bin/program'.  Stop. 
```

所以我觉得我目前的错误是在我的最终可执行文件的规则中，但我不确定如何修复它。

对此有什么想法吗？非常感谢任何输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T18:14:21.880

# c# - 如何从我的应用程序的客户端版本中获取调试信息

> ID：11831538
> 
> 赞同：0
> 
> 时间：2012-08-06T15:43:24.953
> 
> 标签：c#, debugging

所有，我很感激我可以编写一个模块来记录我的应用程序中正在进行的进程，但这没有实现，我似乎无法找到关于如何执行以下操作的解释......

一个客户端正在运行我的应用程序，它从一些用户定义的动态 SQL 中抛出一个错误。这使得很难知道用户在做什么以及是否是正在执行的 SQL 的应用程序错误。

客户对提供他们正在执行的 SQL 感到很有趣，我需要深入了解正在发生的事情。有没有办法记录代码崩溃时的行为？

代码是用 C# 编写的，并且经过了混淆处理。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:41:38.330

如果问题出在 SQL 中，许多数据库会让您知道运行的最新查询，因此理论上，您可以尝试获取该信息，另一种方法是为该客户提供您的应用程序的自定义版本，该版本记录每个运行 SQL 查询；此外，如果您被提供堆栈跟踪，一些混淆程序可以让您对这些堆栈跟踪进行去混淆处理。

# r - 按R中的索引变量对行求和

> ID：11831540
> 
> 赞同：0
> 
> 时间：2012-08-06T15:43:31.580
> 
> 标签：r, analytics, summary

我正在使用美国所有交通系统的数据库，并尝试比较不同的机构。每个案例都是组织的特定部分。例如，公交线路与地铁是分开的。我想结合给定机构的所有案例的价值。

基本上我想对每个“Trs_Id”的每一列的值求和，然后删除其余的。该数据框是运营费用（“运营支出”）的细分。这是我的数据集在 R 中的样子：

```
> colnames(opex)
[1] "Trs_Id"                  "Mode_Cd"                
[3] "Service_Cd"              "Expense_Category_Desc"  
[5] "Op_Sal_Wage_Amt"         "Other_Sal_Wage_Amt"     
[7] "Fringe_Benefit_Amt"      "Service_Costs_Amt"      
[9] "Fuel_Lubricant_Amt"      "Tire_Tube_Amt"          
[11] "Other_Mat_Sup_Amt"       "Utility_Amt"            
[13] "Casuality_Liability_Amt" "Tax_Amt"                
[15] "In_Report_Amt"           "Sep_Report_Amt"         
[17] "Misc_Expense_Amt"        "Expense_Transfer_Amt"   
[19] "Ada_Related_Amt"        
> NROW(opex)
[1] 6956
> id_nm <- table(opex$Trs_Id)
> NROW(id_nm)
[1] 616 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:12:24.210

尽管您没有制作可重现的示例来证明您的问题，但我认为您可以使用package 中的`ddply`function来解决它`plyr`，但您也可以使用 base function `aggregate`。我更喜欢用`ddply`.

这是一些用于计算 data.frame 的随机数

```
 #install.packages('plyr')
 library(plyr)

 set.seed(007) # for the example being reproducible
 Mode_Cd1 <- replicate(4,sample(LETTERS[1:26], 1, replace=T)) # random genereation of variable Mode_Cd
 Mode_Cd2 <- replicate(4,sample(LETTERS[1:26], 1, replace=T)) 

 data_set <- data.frame(Trs_Id = rep(paste('00', 1:4, sep=''), each=3),
            Mode_Cd = sample(paste(Mode_Cd1, Mode_Cd2, sep=''), 12, replace=T),
            Service_Cd =  sample(paste(Mode_Cd2, Mode_Cd1, sep=''), 12, replace=T),
            Op_Sal_Wage_Amt = rnorm(12,5000,100),
            Other_Sal_Wage = rnorm(12,3000,800))

 data_set # this is how my random data_set looks like
   Trs_Id Mode_Cd Service_Cd Op_Sal_Wage_Amt Other_Sal_Wage
1     001      ZG         ID        4910.620       2213.558
2     001      KU         UK        4969.267       2779.149
3     001      ZG         ZB        4999.518       2303.319
4     002      ZG         ZB        5098.816       3574.968
5     002      BZ         ZB        5083.975       3088.522
6     002      ZG         GZ        5070.534       2937.227
7     003      KU         ID        5130.596       2663.608
8     003      ZG         UK        4861.200       2550.299
9     003      DI         ZB        5127.292       3798.011
10    004      ZG         UK        5018.419       2115.896
11    004      BZ         ID        5075.228       2886.170
12    004      KU         UK        5059.175       3251.996

 ddply(data_set,.(Trs_Id),numcolwise(sum)) # The sum you want.
  Trs_Id Op_Sal_Wage_Amt Other_Sal_Wage
1    001        14879.40       7296.026
2    002        15253.33       9600.717
3    003        15119.09       9011.918
4    004        15152.82       8254.062 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T02:21:26.690

使用 Jilber 的数据集，您还可以使用 aggregate() 处理此问题：

```
aggregate(data_set[, 4:5], list(data_set$Trs_Id), sum) 
```

对于您的示例，列号将是 5:19 而不是 4:5。

# javascript - 用于更改 HTML 元素的 Javascript 函数

> ID：11831542
> 
> 赞同：-1
> 
> 时间：2012-08-06T15:43:40.390
> 
> 标签：javascript

好的，伙计们，我做到了，我认为这涵盖了我的 4 个功能中的 3 个：

*   删除“.mp4”扩展名
*   添加我自己的描述
*   添加关键字
*   更改类别（**未完成**）

    ```
    function remove_mp4()
    {
       var title = document.getElementsByName("title").value;
       document.getElementsByName("title").innerHTML = title.replace(title.match(".mp4"), "");

    }
    function add_description()
    {
       var new_description = "Sample."
       document.getElementsByName("description").innerHTML = new_description;
    }
    function add_keywords()
    {
       var new_keywords = prompt("Unesite kljucne rijeci.", "");
       document.getElementsByName("keywords").innerHTML = new_keywords;
    }
    function change_category()
    {
       var category = document.getElementsByName("category").value;
    }
        remove_mp4();
        add_description();
        add_keywords();
        change_category(); 
    ```

我不知道的是，如何更改类别。网站代码（我想更改的网站）在这里：

```
<label>
                <h4 class="category-header">Kategorija</h4>
                <span class="yt-uix-form-input-select "><span class="yt-uix-form-input-select-content"><img src="my_videos_upload_datoteke/pixel-vfl3z5WfW.gif" class="yt-uix-form-input-select-arrow"><span class="yt-uix-form-input-select-value">Odaberite kategoriju</span></span><select class="yt-uix-form-input-select-element category-input" name="category">        <option selected="selected" value="">Odaberite kategoriju</option>
    <option value="2">Automobili i vozila</option>
<option value="1">Film i animacija</option>
<option value="10">Glazba</option>
<option value="20">Igre</option>
<option value="23">Komedija</option>
<option value="15">Kućni ljubimci i životinje</option>
<option value="22">Ljudi i blogovi</option>
<option value="29">Neprofitne organizacije i aktivisti</option>
<option value="27">Obrazovanje</option>
<option value="26">Praktični savjeti i stil</option>
<option value="19">Putovanja i događaji</option>
<option value="17">Sportovi</option>
<option value="25">Vijesti i politika</option>
<option value="24">Zabava</option>
<option value="28">Znanost i tehnologija</option> 
```

另外，我想将我的网站 URL 包含在描述中（http://www.sample.com/），但是每次我尝试时，我都会收到一个错误（因为 Javascript 将“//”读取为一行注释），所以任何想法如何解决那两件事？

注意：如果您认为脚本的某些部分不起作用，请编写它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:45:09.787

首先关于 .mp3 扩展名：你测试过你的`remove_mp3()`功能吗？你试图在`innerHTML`那里设置一个数组，我会告诉你我的意思：

我使用 Chrome，但我确信在 Firefox 中你也有一个 JS 控制台。尝试进入`document.getElementsByName("title")`那里，你会看到你得到一个**数组**。您可能想要更改每个`title`-element 的标题，因此您必须遍历它们：

```
titleElems=document.getElementsByName("title");
for(i=0;i<titleElems.length;i++){
    titleInner=titleElems[i].innerHTML;
    titleElems[i].innerHTML=titleInner.replace(titleInner.match(".mp4"), "");
} 
```

然后在类别部分：`<option>`下拉列表中的一个根据定义在具有属性时被**选中**`selection`。因此，删除该属性并将其添加到要选择的所需选项中：

```
catChildNodes=document.getElementsByName("category")[0].childNodes;
catChildNotes[1].removeAttribute("selected");
for(i=0;i<catChildNodes.length;i++){
    if(catChildNodes[i].value="15") //Please change the "15" into something you want; I don't know which one you want to choose :)
        catChildNodes[i].setAttribute("selected",""); //it doesn't matter it's empty; it just matters the attrib. exists :)
} 
```

请注意，这不会更新浏览器窗口中的选择（至少在 Chrome Mac 中不会）；但在*内部*确实如此。

而且，关于描述中的链接：您是否在链接周围加上引号？（在 JS 中）它不应该读`"//"`作评论......（`alert("//")`按预期工作）请展示你正在尝试的内容。

完全不同的东西，与原始问题中的注释 2 相关：您不需要先将要分配给另一个变量的值存储在另一个变量中，换句话说：`a="hello"; b=a;`等于：（使用的额外变量`a`除外当然）`b="hello";`，因此：`a="hello"; document.getElementsByName("title").value=a;`（大约）等于`document.getElementsByName("title").value="hello";`。

# html - CSS有序列表，有没有办法设置数字背景的样式？

> ID：11831546
> 
> 赞同：2
> 
> 时间：2012-08-06T15:43:46.967
> 
> 标签：html, css

我正在设计一个有序列表 1、2、3、4 等...

有没有办法在每个数字后面放置一个图像，所以 1、2、3、4 出现在它上面？

例如：

```
image[1.] List Item 1

image[2.] List Item 2

image[3.] List Item 3

image[4.] List Item 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:46:10.577

是的。您可以使用`ol .li:before`将图像移动到数字后面。您还可以使用`list-style-position: inside;`将编号移动到列表项本身的内部，然后在`li`元素上添加背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:05:12.970

好吧，另一种方法是将图像添加到每个列表项，然后移动其位置。见[小提琴](http://jsfiddle.net/aaHmh/2/)。我使用 div 而不是图像，因为它更容易。然而，这个方法应该在不同的浏览器上进行测试，以确保它看起来不奇怪。

```
<ol>
    <li> 
        <div class="list-image"></div>
        foo
    </li>    
    <li>
        <div class="list-image"></div>
        bar 
    </li>
</ol>​ 
```

CSS：

```
ol{
   list-style-type:decimal;
   padding:50px 50px;
}

.list-image{
   width:20px;
   height:20px;
   position:relative;
   background-color:lightgray;
   top:20px;
   left:-25px;    
   z-index:-1;
}
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:51:02.223

查看`:marker`伪元素：

[http://dev.w3.org/csswg/css3-lists/#marker-pseudo-element](http://dev.w3.org/csswg/css3-lists/#marker-pseudo-element)

# c# - 尝试获取不存在父元素的元素时，“对象引用未设置为对象的实例”

> ID：11831547
> 
> 赞同：0
> 
> 时间：2012-08-06T15:43:47.457
> 
> 标签：c#, linq, linq-to-xml

我最近开始使用 Linq，目前正在尝试使用它来解析一个高度嵌套的 XML 文件（我无法控制它）。但是，在尝试运行以下语句时，出现“对象引用未设置为对象的实例”错误。

问题出在“城市”行。city 属性的数据来​​自 xml 结构前景/contactinfo/City/Answer。

但由于该字段不是强制性的，有时 XML 将没有城市/答案节点。所以我得到了错误，因为“城市”节点不存在，我试图在它上面调用“.Element()”。我已经为这个问题找到了很多解决方案，当它只有一个节点级别时（即，如果我需要的数据在城市中，而城市是唯一缺失的节点）。

但是当它向下两层时（即试图获取不存在节点的子节点），我无法找到任何解决方案。

希望问题表达得足够清楚。

最好的问候，莫滕

```
 var prospects = (from prospect in xdoc.Descendants("PROSPECT")
                        select new Prospect {
                            ProspectID = (string) prospect.Element("PROSPECTINFO").Element("PROSPECT_ID"),
                            Name = (string) prospect.Element("PERSONALINFO").Element("FIRSTNAME")+ " " + prospect.Element("PERSONALINFO").Element("SURNAME"),
                            address = (string) prospect.Element("CONTACTINFO").Element("ADDRESSLINE1").Element("ANSWER"),
                            zipCode = (string)prospect.Element("CONTACTINFO").Element("POSTALCODE").Element("ANSWER").Value,
                            City = (string) prospect.Element("CONTACTINFO").Element("CITY").Element("ANSWER"),                                
                        }).ToList(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T15:52:12.347

一种选择是使用`Elements`而不是`Element`. 这是一种扩展方法，可以在单个元素或元素集合中查找*所有元素（可选地具有给定名称）。*因此，如果您重复使用它，如果没有任何匹配项，您最终会得到一个 0 元素的集合。用于`FirstOrDefault`获取该元素或 null，然后字符串转换将执行您想要的操作：

```
// Still use Element for CONTACTINFO as presumably that's a required element
City = (string) prospect.Element("CONTACTINFO")
                        .Elements("CITY")
                        .Elements("ANSWER")
                        .FirstOrDefault() 
```

这样您就不必编写任何条件代码 - 一切都会退出。

与 ChrisF 建议的那种检查相比，最大的优势是导航路径是否变长。想象一下路径有 6 个部分，每个部分都是选项 - 您需要 5 个检查（首先是“a”，然后是“ab”，然后是“abc”等），然后是真正的“获取东西”，而在此方案中，您只需`Elements`为每个新导航链接添加一个额外的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T15:50:49.720

如果任何节点都可以为空，那么您必须在代码中处理它。

您提到了“CITY”节点，因此以它为例：

```
var prospects = (from prospect in xdoc.Descendants("PROSPECT")
                    select new Prospect {
                        ProspectID =
 (string)prospect.Element("PROSPECTINFO").Element("PROSPECT_ID"),
                        Name =
 (string)prospect.Element("PERSONALINFO").Element("FIRSTNAME")+ " " + prospect.Element("PERSONALINFO").Element("SURNAME"),
                        address =
 (string)prospect.Element("CONTACTINFO").Element("ADDRESSLINE1").Element("ANSWER"),
                        zipCode =
 (string)prospect.Element("CONTACTINFO").Element("POSTALCODE").Element("ANSWER").Value,
                        City =
 prospect.Element("CONTACTINFO").Element("CITY") != null ?
     (string)prospect.Element("CONTACTINFO").Element("CITY").Element("ANSWER") :
     string.Empty,
   }).ToList(); 
```

在尝试尊重它之前，您需要检查该元素不为空，然后如果它为空，则选择一个默认值来分配给该属性。

对所有可以为空的元素重复此操作。

将检查放入方法中（如 Mike 建议的那样）是保持代码清洁的好方法。这也意味着您可以很容易地扩展检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T16:17:00.220

我将创建一个通用函数来获取您使用 NULL 检查指定的任何元素的值。这是一个例子：

```
public string GetXMLElementValue(XmlElement xElem, params string[] elementsNest)
{
    XmlElement tempElem = xElem;

    foreach (string s in elementsNest)
    {
        if (tempElem.Element(s) == null)
            return string.Empty;
        else
            tempElem = tempElem.Element(s);
    }

    return (string) tempElem;
} 
```

然后你可以像这样使用它：

```
var prospects = (from prospect in xdoc.Descendants("PROSPECT")
    select new Prospect {
        . . .
        City = GetXMLElementValue(prospect, "CONTACTINFO", "CITY", "ANSWER"),          
}).ToList(); 
```

注意：这是未经测试的代码，但给出了总体思路。您可能必须在函数中有其他参数来指定是否要在元素上调用“.Value”或其他方法。

# php - 过滤 YouTube 视频 URL

> ID：11831550
> 
> 赞同：1
> 
> 时间：2012-08-06T15:43:53.580
> 
> 标签：php, variables, youtube

我正在制作一个 YouTube 工具，但我不明白如何在 PHP 变量中获取视频 ID。假设用户在我的表单中输入一个 youtube 视频 url，它可以是：

```
http://www.youtube.com/watch?v=YzOt12co4nk&feature=g-vrec 
```

过滤 URL 并在变量中获取此视频 ID 的方法是什么？

例如：`$vid`会有这个视频ID，所以`$vid = YzOt12co4nk;`请花点时间描述一下，我是编码初学者！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:47:45.437

您可以使用正则表达式：

```
$url = "http://www.youtube.com/watch?v=YzOt12co4nk&feature=g-vrec";
preg_match('/v=([0-9a-zA-Z]+)/', $url, $matches);
$vid = $matches[1]; 
```

# soap - 访问多个 WSO2 ESB 管理控制台

> ID：11831551
> 
> 赞同：0
> 
> 时间：2012-08-06T15:43:58.713
> 
> 标签：soap, registry, wso2, wso2esb, esb

我在我的本地 Windows 机器上运行 WSO2 ESB 和 WSO2 Governance Reg。问题是我必须交替执行，因为管理面板位于同一地址：`https://192......:9443/carbon/` 所以我当时只能看到一个。

如何在同一台机器上访问不同 URL 的两个管理面板？或者您认为在同一台机器上运行两个 WSO2 平台是一种不好的做法？

我希望我的问题不会令人困惑。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:10:18.680

您可以运行多个 WSO2 服务器（例如 ESB、AS、BPS 等），通过使用`repository/conf/carbon.xml`. 偏移量将所有端口移动给定值。默认情况下，偏移属性设置为零。( `https://192......:9443/carbon/`)

将偏移值设置为 1；( `https://192......:9444/carbon/`) 更改以下属性值`repository/conf/carbon.xml`

```
<Ports>
<Offset>1</Offset>
----
</Ports> 
```

希望这可以帮助。

谢谢

蒂利尼

# javascript - 具有不同值的 JavaScript/Regex 参数

> ID：11831552
> 
> 赞同：1
> 
> 时间：2012-08-06T15:44:00.093
> 
> 标签：javascript, regex, param

老实说，当谈到更高级或更冗长的正则表达式时，我有点迷茫。我有一个查询字符串，我需要匹配并获取查询参数的值和名称。对我来说困难在于该值可以是不同的值，目前只有 4 个不同的查询参数。这是一个示例查询字符串：

```
foo title:"Foo Bar" -title:other author: (mitchell* OR mike) from:2012-01-01 to: 2012-06-01 
```

查询参数是标题、作者、从和到。这三个不同的值在双引号“Foo Bar”内，用括号括起来（mitchell* OR mike）或单个值 2012-01-01 或其他。请注意，冒号后面还有一个可选空格。在每个参数名称 -title 之前也可以有一个 + 或 -。标题和作者值可以有通配符。

我目前对解析值不感兴趣，就像我不需要解析（mitchell* 或 mike）来知道其中的内容，只想将其作为一个整体显示。

我如何使用 Regex 解析此字符串以获取与它相关的参数名称的值？

我可以处理如下结果：

```
['title:"Foo Bar"', '-title:other', 'author: (mitchell* OR mike)', 'from:2012-01-01', 'to:2012-06-01'] 
```

我不需要担心没有参数名称的值，例如开头的 foo （可能在字符串中的任何位置），只需要获取参数名称和值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:07:38.863

约瑟夫是对的。您提供的数据非常混乱，在一个正则表达式中制作它太复杂了，IMO，我能想到的最好方法是应用 3 种不同的表达式，每种您要搜索的类型一个：

这将搜索以左括号开头的项目：

```
-?\w+:\s*\((.*?)\) 
```

这将搜索以双引号开头的项目：

```
-?\w+:\s*"(.*?)" 
```

这将搜索其他项目（带空格的项目不起作用）：

```
-?\w+:\s*([^\s"\(]+) 
```

可能有一种更简单的方法，但这是我要做的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T22:13:09.857

这个正则表达式做了我想要的：

```
/-?\w+:\s*([^\s"\(]+|"(.*?)"|\((.*?)\))/g 
```

回报：

```
["title:"Foo Bar"", "-title:other", "author: (mitchell* OR mike)", "from:2012-01-01", "to: 2012-06-01"] 
```

我想要的！

# arrays - 获取从“string_to_array()”函数返回的数组的第 N 个元素

> ID：11831555
> 
> 赞同：74
> 
> 时间：2012-08-06T15:44:06.553
> 
> 标签：arrays, postgresql

我正在寻找一种方法来访问数组的第 N 个元素，这是`string_to_array()`PostgreSQL 中函数的结果。例如，

假设一个单元格包含字符串值： "A simple example" 。如果我使用`string_to_array()`函数，我将有一个由三个字符串组成的数组（'A'，'simple'，'example'）。现在，在不存储（我的意思是即时）的情况下，我想访问这个数组的第二个元素，它是“简单的”。

在我的谷歌搜索过程中，我看到了一个访问数组最后一个元素的示例，但这几乎没有解决我的问题。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-08-06T15:58:43.020

```
select (string_to_array('1,2,3,4',','))[2]; 
```

# php - PayPal 的日期格式混淆了 strtotime()。我能做些什么？

> ID：11831559
> 
> 赞同：0
> 
> 时间：2012-08-06T15:44:22.837
> 
> 标签：php, paypal, timezone, strtotime

PayPals IPN 以这种格式发送日期`08:29:40 Aug 06, 2012 PDT`

当我运行它时，`strtotime()`我得到了这个响应`1344266980`

当这通过时，`date()`我得到`2012-08-40 16:29:40`.

发生了什么，我该如何解决。

时区在 PHP 中设置为`Europe/London`.

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T15:46:52.620

您的日期格式字符串一定是错误的。你有没有机会`date`像这样打电话：

```
date("Y-m-s H:i:s",$time) 
```

如果是这样，它应该是`Y-m-d`- 很可能是一个错字。

我这么说的原因是因为它根本不可能`date()`返回`40`天数。

# html - chrome可以使用缩放功能调整帧大小吗？

> ID：11831561
> 
> 赞同：1
> 
> 时间：2012-08-06T15:44:27.573
> 
> 标签：html, google-chrome

[这是一个例子](http://www.quackit.com/html/templates/frames/frames_example_2.html)

在 IE9 和 chrome 中，按 ctrl + 放大 200%： ![在此处输入图像描述](../Images/d0fd819268856bce50d811a56f6c6805.png)

有没有办法通过使用缩放功能来调整帧大小？（如IE9）

**参考：**

*   [使用缩放放大帧大小](http://productforums.google.com/forum/#!topic/chrome/PGwf6ayEq4Y)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T05:25:52.073

myFix.js

```
//fix webkit browsers
if ('WebkitAppearance' in document.documentElement.style) {
    document.onreadystatechange = function() {
        if (document.readyState != 'complete')
            return;

        var oldLevel = 1;
        //whether we're fixing 'rows' or 'cols'
        var checking = 'rows';
        var frameset = document.getElementById('set');
        //get the hard coded values from the html
        var values = frameset.getAttribute(checking).split(',');

        //make sure not to change any %'s or *'s
        var isPixels = new RegExp('[0-9]+');
        for (var index = 0; index < values.length; ++index) {
            if (isPixels.test(values[index]))
                values[index] = new Number(values[index]);
        }

        var zoomCheck = function() {
            //calculate zoom level
            var level = window.outerWidth / window.innerWidth;
            //if it hasn't changed, ignore
            if (oldLevel == level)
                return;

            var newValues = new Array(values.length);
            //copy each of the original values
            for (var index = 0; index < values.length; ++index) {
                newValues[index] = values[index];

                //fix the ones we are meant to
                if (values[index] instanceof Number)
                    newValues[index] *= level;
            }

            //apply the fix
            frameset.setAttribute(checking, newValues.join(','));
            oldLevel = level;
        };

        //periodically check
        setInterval(zoomCheck, 1000);
    };
} 
```

你的.html

```
<html>
    <head>
        <!--your other stuff-->
        <script type="text/javascript" src="myFix.js"></script>
    </head>

    <frameset id="set" rows="200,*" frameborder="0" border="0" framespacing="0">
        <frame name="menu" src="menu_1.html" marginheight="0" marginwidth="0" scrolling="auto" noresize="">
        <frame name="content" src="content.html" marginheight="0" marginwidth="0" scrolling="auto" noresize="">
    </frameset>
</html> 
```

# python - 如何使用 Django 查询多种数据库类型？

> ID：11831565
> 
> 赞同：2
> 
> 时间：2012-08-06T15:44:42.337
> 
> 标签：python, database, django

我正在尝试构建一个基于 django 的网页（我知道 python 并想开发几个基于 web 的应用程序）。此页面的目标是显示来自我只有读取权限的几个不同数据库的数据。基本上，它是几个关键事物的仪表板类型视图。

我已经构建了一个 Sqlite 数据库来保存应用程序的 Django 设置。我如何从这里分支出来？我想查询一个Oracle 数据库和一个MySQL 数据库？

我可以在适当的视图中使用类似的内容单独查询它们：

```
def test(request):
    from django.db import load_backend
    myBackend = load_backend('django.db.backends.oracle') # or 'mysql', 'sqlite3', 'oracle'
    myConnection = myBackend.DatabaseWrapper({
        'HOST': 'myhost',
        'NAME': 'mysid',
        'OPTIONS': {},
        'PASSWORD': "mypass",
        'PORT': "1521",
        'USER': "myuser", 
        'TIME_ZONE': "America/Chicago"})

    # Now we can do all the standard raw sql stuff with myConnection.
    myCursor = myConnection.cursor()
    myCursor.execute("SELECT COUNT(1) FROM schema.table;")
    return HttpResponse("%s." % myCursor.fetchone()) 
```

在模板中我可以显示这个计数。但是，这似乎不正确，基于我如何查询 Sqlite 数据库。

我想使用数据模型。当我只是读取数据时，这是否合适？该帐户没有对 oracle/mysql 表的写入权限。

有没有办法为现有表自动生成这些模型？其中一些表在列数方面相当大，如果可能的话，我更愿意自动创建以防止我的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:02:20.320

有关多数据库支持，请参阅[Django 文档](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)。总而言之，您将每个数据库的连接信息添加到您的`DATABASES`设置中，然后设置一个路由器以确定每个数据库处理哪些应用程序/模型。

要从现有数据库表生成模型，您可以使用[`inspectdb`管理命令](https://docs.djangoproject.com/en/dev/ref/django-admin/#django-admin-inspectdb)。但是，Django 并没有明确列出使用此命令对 Oracle 数据库的支持，因此您可能需要自行处理。

# java - 通过 CMD/Registry 禁用 IPv4

> ID：11831567
> 
> 赞同：2
> 
> 时间：2012-08-06T15:44:44.563
> 
> 标签：java, windows, registry, cmd, ipv4

我正在开发一个 Java 程序（仅适用于 Windows），它创建 PPPoE 连接（它并不那么重要）。重要的是，我需要在局域网选项卡中以某种方式禁用 IPv4 *。*

[问题 http://img228.imageshack.us/img228/3253/4dcb10eb731a403e9fc785e.png](http://img228.imageshack.us/img228/3253/4dcb10eb731a403e9fc785e.png)

（捷克语）

我需要以某种方式“取消选中”某个网络适配器中的 IPv4 协议。我能够通过 CMD 和*netsh*工具设置一些东西，但我无法设法*为单个适配器*禁用 IPv4 协议。我知道如何为整个计算机禁用 IPv4，但这对我不起作用（因为我需要 IPv4 通信，只是通过不同的通道）。我知道如何通过 Windows 注册表“取消选中”IPv6（我在互联网上找到了它），但同样不适用于 IPv4。

任何帮助将不胜感激。

我需要达到的结果（以编程方式）

[结果 http://img35.imageshack.us/img35/8459/bfebacf3b9bb428c84dee44.png](http://img35.imageshack.us/img35/8459/bfebacf3b9bb428c84dee44.png)

PS：请不要问我为什么用Java制作仅限Windows的应用程序......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T20:59:12.063

[请参阅此处](http://blogs.msdn.com/b/winsdk/archive/2009/07/17/how-to-enable-disable-ipv6-programmatically-in-windows-vista.aspx)的Microsoft 示例代码。

您需要用 ms_tcpip 替换对 ms_tcpip6 的引用，并且您可能需要进行一些试验来确定如何识别正确的适配器。这个额外的代码片段可能会有所帮助，它属于内部循环：

```
 [...]
        while (hr == S_OK) 
        {
            LPWSTR lpszPathToken;
            hr = pncbp->GetPathToken(&lpszPathToken);
            if (hr != S_OK) fail(hr);
            wprintf(L"Path token: %s\n", lpszPathToken);

            // Get owner

            INetCfgComponent *owner;
            LPWSTR lpszOwner;

            hr = pncbp->GetOwner(&owner);
            if (hr != S_OK) fail(hr);

            hr = owner->GetId(&lpszOwner);
            if (hr != S_OK) fail(hr);

            wprintf(L"Path owner: %s\n", lpszOwner);
            // Disable this binding.

            hr = pncbp->Enable(ENABLE);
            [...] 
```

希望路径令牌或路径所有者将为您提供识别正确适配器所需的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T23:27:42.273

检查此工具：[https ://gallery.technet.microsoft.com/Hyper-V-Network-VSP-Bind-cf937850](https://gallery.technet.microsoft.com/Hyper-V-Network-VSP-Bind-cf937850)

```
nvspbind is a tool for modifying network bindings from the command line. It is especially useful in Server Core environments with the Hyper-V role enabled.

It can be used to set the correct bindings for NICs used in Virtual Networks.

It can also be used to enable or disable specific bindings on any NIC and to query and change the NIC connection order.

It utilizes the INetCfg APIs documented on MSDN (http://msdn.microsoft.com/en-us/library/ms805265.aspx).

Most options are documented in the readme and nvpsbind.txt which download with the install.

To get help run “nvspbind.exe /?” 
```

# asp.net - 在 asp.net mvc 项目生产环境中实现 ValidateAntiForgeryToken 时出现奇怪的错误消息

> ID：11831570
> 
> 赞同：1
> 
> 时间：2012-08-06T15:44:54.407
> 
> 标签：asp.net, asp.net-mvc

我正在为部署在 Azure 中的 MVC 应用程序实现 ValidateAntiForgeryToken。

1) 我在主页中添加了@Html.AntiForgeryToken()。

2）我正在使用 Jquery $.Post 为 Post 操作发送数据 这是代码

```
 `var token = $('[name=__RequestVerificationToken]').val();

    var url = '/XX/YYYY/';
        $.post(url, { __RequestVerificationToken: token,reportname: reportName},
        function (data) { window.navigate(data.url) }
        );` 
```

我将令牌传递给服务器并在 fiddler 中看到，将 Cookie 和隐藏变量传递给服务器。

3) 我将动作归因于 [HttpPost] 和 [ValidateAntiForgeryToken]

这在我的天蓝色开发环境中完美运行，但是当我们进入不同的环境时它会失败，它会抛出异常***“未提供所需的防伪令牌或无效”***

我观察到隐藏变量的值和 cookie 变量中的值是不同的。即使在我的开发环境中也是如此，但它在开发环境中有效，但在测试中无效。请建议如何解决此异常。

DEV 和 TEST azure 站点的配置相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:01:28.927

我能够通过将 ValidateAntiForgeryTokenAttribute 类复制到我的解决方案中并为该属性类添加必要的辅助方法来找出我的问题，因为大多数类或密封或内部。所以我必须复制代码并进行一些修改才能在我的天蓝色环境中完美工作。基本上，问题在于

```
AntiForgeryData.GetUsername(context.User) 
```

这个方法返回 userName has null ，所以我刚刚修改为

```
 string currentUsername = AntiForgeryData.GetUsername(context.User) ?? string.Empty; 
```

然后它开始完美地工作，在 Azure 中最近发生的设置在 validateAntifogery 中发生得早，所以这解决了我的问题。

# flash - AS2 中的谷歌地图

> ID：11831580
> 
> 赞同：0
> 
> 时间：2012-08-06T15:45:24.687
> 
> 标签：flash, api, google-maps, actionscript, actionscript-2

我有一个 Flash 网站。它的编码为 AS2，我想将 Google 地图导入我的网站。我怎样才能做到这一点。

我很好地创建了 Google Maps Javascript API。接下来是什么？

有没有更短的方式或其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T02:24:20.957

最好的办法是使用 Google 的 AS3 库：[https](https://developers.google.com/maps/documentation/flash/) ://developers.google.com/maps/documentation/flash/ 。但是，不鼓励使用它，因为此版本已被弃用，取而代之的是较新的 JavaScript API。

# java - 如何让我的弹出菜单在 Java 中工作？

> ID：11831582
> 
> 赞同：1
> 
> 时间：2012-08-06T15:45:35.857
> 
> 标签：java, swing, jpopupmenu

我找到了一个弹出菜单程序，它可以独立运行。然后我制作了另一个程序“Note”，我希望在其中添加弹出菜单功能。

现在弹出菜单部分如下：

```
package my.demo;

// The original code is from link: http://www.java2s.com/Code/Java/Swing-JFC/AsimpleexampleofJPopupMenu.htm
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.ImageIcon;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JPopupMenu;
import javax.swing.border.BevelBorder;
import javax.swing.event.PopupMenuEvent;
import javax.swing.event.PopupMenuListener;

public class PopupMenuExample extends JPanel {

  public JPopupMenu popup;

  public PopupMenuExample() {

    popup = new JPopupMenu();

    ActionListener menuListener;
        menuListener = new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent event) {
            System.out.println("Popup menu item ["
        + event.getActionCommand() + "] was pressed.");
    }
 };

    JMenuItem item;
    popup.add(item = new JMenuItem("Left", new ImageIcon("1.gif")));
    item.setHorizontalTextPosition(JMenuItem.RIGHT);
    item.addActionListener(menuListener);

    popup.add(item = new JMenuItem("Center", new ImageIcon("2.gif")));
    item.setHorizontalTextPosition(JMenuItem.RIGHT);
    item.addActionListener(menuListener);

    popup.add(item = new JMenuItem("Right", new ImageIcon("3.gif")));
    item.setHorizontalTextPosition(JMenuItem.RIGHT);
    item.addActionListener(menuListener);

    popup.add(item = new JMenuItem("Full", new ImageIcon("4.gif")));
    item.setHorizontalTextPosition(JMenuItem.RIGHT);
    item.addActionListener(menuListener);

    popup.addSeparator();

    popup.add(item = new JMenuItem("Settings . . ."));
    item.addActionListener(menuListener);

    popup.setLabel("Justification");
    popup.setBorder(new BevelBorder(BevelBorder.RAISED));
    popup.addPopupMenuListener(new PopupPrintListener());   // listener of Popup menu

    addMouseListener(new MousePopupListener());         // listener of mouse
  }

  // An inner class to check whether mouse events are the popup trigger
  class MousePopupListener extends MouseAdapter {
      @Override
    public void mousePressed(MouseEvent e) {
      checkPopup(e);
    }

      @Override
    public void mouseClicked(MouseEvent e) {
      checkPopup(e);
    }

      @Override
    public void mouseReleased(MouseEvent e) {
      checkPopup(e);
    }

    private void checkPopup(MouseEvent e) {
      if (e.isPopupTrigger()) {
        popup.show(PopupMenuExample.this, e.getX(), e.getY());
      }
    }
  }

  // An inner class to show when popup events occur
  class PopupPrintListener implements PopupMenuListener {
    @Override
    public void popupMenuWillBecomeVisible(PopupMenuEvent e) {
      System.out.println("Popup menu will be visible!");
    }

      @Override
    public void popupMenuWillBecomeInvisible(PopupMenuEvent e) {
      System.out.println("Popup menu will be invisible!");
    }

      @Override
    public void popupMenuCanceled(PopupMenuEvent e) {
      System.out.println("Popup menu is hidden!");
    }
  }

} 
```

“注意”代码如下（部分）：

```
package my.demo;

import java.awt.event.*;
import java.io.*;
import java.nio.MappedByteBuffer;
import java.nio.channels.FileChannel;
import java.nio.charset.Charset;
import javax.swing.*;

/**
 *
 * @author root
 */
public class MyNoteUI extends javax.swing.JFrame {

    JFrame jFrame;
    JFileChooser fc;

    /**
     * Creates new form MyNoteUI
     */
    public MyNoteUI() {

        initComponents();

        jFrame = new javax.swing.JFrame();
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jFrame.setContentPane(new PopupMenuExample());
        jFrame.setTitle("My NoteUI");

    } 
```

但是使用这些代码，“注释”可以正常工作，而弹出菜单不起作用。我猜jFrame相关的代码不正确，但是不知道怎么改。谁能帮忙？谢谢！

另外：我使用 NetBeans 制作项目，下面是编译信息（很难理解）。

```
/home/tomxue/mycode/0___GitHub/MyNote/nbproject/build-impl.xml:1026: The following error occurred while executing this line:
/home/tomxue/mycode/0___GitHub/MyNote/nbproject/build-impl.xml:853: taskdef class org.netbeans.modules.java.j2seproject.copylibstask.CopyLibs cannot be found
 using the classloader AntClassLoader[]
BUILD FAILED (total time: 0 seconds) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:22:24.187

我找到了如下解决方案。关键是当 JFrame 实例已经存在时找不到它，这意味着不需要“新”，只需调用它的函数。注意顺序：setContentPane()，然后是 initComponents()。

```
public class MyNoteUI extends javax.swing.JFrame {

    JFileChooser fc;

    /**
     * Creates new form MyNoteUI
     */
    public MyNoteUI() {

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setContentPane(new PopupMenuExample());
        setTitle("My NoteUI");

        initComponents();
    } 
```

# php - Denwer 和 php：另一个驱动器

> ID：11831584
> 
> 赞同：-4
> 
> 时间：2012-08-06T15:45:38.760
> 
> 标签：php, imagick, drive

我使用 denwer 作为我的 wamp-server，o 有代码，可以导出图形，但是在我的驱动器上我的可用空间很小，我想将这些文件保存到`D:`驱动器中。

我该怎么做？

这也是我的代码的一部分：

```
while($row = odbc_fetch_array($data))
    { 

         //if($row['GRD_ID'] != "") {
            /* $file_name_jp2 = "TI/" . $table_name . "/" . $row['GRD_ID'] . ".jp2";
             $file = fopen ($file_name_jp2, "w");
             fputs($file, $row['GRD_GRAPHIC']);
             fclose($file);
*/

            $file_name_jpg = "TI/" . $table_name . "/" . $row['GRD_ID'] . ".jp2";
            $file_out_jpg  = str_replace('.jp2', '.jpg', $file_name_jpg);

            file_put_contents($file_name_jpg, $row['GRD_GRAPHIC']);

            // execute imagemagick convert to change to jpeg with quality 40
            exec("/usr/local/ImageMagick/convert $file_name_jpg -quality 20 -format jpg $file_out_jpg");
            unlink($file_name_jpg); // get rid of temp jp2 file

             set_time_limit(0);
             unset($row);
             $l++;
         //}
         $k++;
    } 
```

看`$file_name_jpg`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:52:31.977

好吧，首先，该代码是为 *nix 编写的。它不能按原样在 Windows 机器上运行。

您将需要更新`convert`可执行文件的路径，使其成为您的 Windows 路径，并更改`$file_name_jpg`：

```
$file_name_jpg = "D:/TI/" . $table_name . "/" . $row['GRD_ID'] . ".jp2"; 
```

假设您的驱动器`TI`上有一个文件夹`D:`，并且所有其他嵌套文件夹都在`TI`

# c# - 将异常写入文件

> ID：11831585
> 
> 赞同：0
> 
> 时间：2012-08-06T15:45:40.857
> 
> 标签：c#, list, foreach, sqlexception

我正在尝试为数据表中的每个数据行调用 2 个存储过程。当这些 Sp 发生异常时，我试图捕获异常并发送到文件。

```
StreamWriter file = new StreamWriter(@"c:\Error.txt",false);
foreach (DataRow row in dt.Rows)
{
    try
    {
        UpdateEvent(LN);
    }
    catch (Exception e)
    {

        //continue; 
    }

    try
    {
        insertevent(LN, note);
    }
    catch (Exception e)
    {

    }

    foreach (string line in error)
    {
        file.WriteLine(line);      
    }   
} 
```

我可以从列表中删除该行吗..它被写入文件..这样它就不会再次打印到文件中。我尝试了 error.remove(line)...但它没有用..

我也将错误归档为...下面..

我可以将其格式化为简单的两行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:52:15.213

您必须从第一个循环退出循环。

```
StreamWriter file = new StreamWriter(@"c:\Error.txt",false);
List<string> error = new List<string>();
          foreach (DataRow row in dt.Rows)
          {
                        try
                        {
                            UpdateEvent(LN);
                        }
                        catch (Exception e)
                        {
                            error.Add(String.Format("Exception for Loan Number {0} with a Error {1}", row["LN"].ToString(), e.ToString()));
                            //continue; 
                         }
                        try
                        {
                            insertevent(LN, note);
                        }
                        catch (Exception e)
                        {
                            error.Add(String.Format("Exception for Loan Number {0} with a Error {1}", row["LN"].ToString(), e.ToString()));
                            //continue; 
                         }
            }

            foreach (string line in error)
            {
                file.WriteLine(line);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:52:23.517

您可以使用 Enterprise 库更轻松地完成此操作，并且它更可定制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:49:22.870

如果我正确理解了您的问题，请在异常之间的文件中添加一行：

```
 foreach (string line in error)
 {
    file.WriteLine(line);
    file.WriteLine();  //write blank line
 } 
```

此外，在循环完成后，将文件写入循环之外。然后你的文件中不会有重复的行。

# javascript - Javascript on Rails 中的变量

> ID：11831586
> 
> 赞同：0
> 
> 时间：2012-08-06T15:45:42.453
> 
> 标签：javascript, ruby-on-rails, renderpartial

对于 Rails 部分中的 Javascript 中的 Ajax 函数，例如：

```
$.ajax
({
    type: "GET",
    url: "<%= url_for :action => "offline", :controller=> "user", :id => user.id %>"
}); 
```

用户`user.id`必须是实例变量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:55:51.503

如果您使用如下代码调用部分，将自动找到用户，因此也会在其上找到属性。如果不是这种情况，那么您必须将 user 设置为控制器中的实例变量。

```
<% @users.all do |user| %>
    <%= render user %>
<% end %> 
```

# mysql - 错误代码：1054：未知列

> ID：11831587
> 
> 赞同：0
> 
> 时间：2012-08-06T15:45:43.297
> 
> 标签：mysql

我正在尝试执行以下语句：

```
DELETE a
FROM db.table1 a
    INNER JOIN (SELECT domainname
                FROM db.table1
                WHERE domainname LIKE '%.uci.edu'
                GROUP BY keyvalue
                HAVING COUNT(1) > 1
        ) b ON a.id = b.id 
```

我得到了标题中提到的错误。我想要达到的目标已在此处进行了解释：[如何使一个查询的结果出现在 NOT IN 子句中？](https://stackoverflow.com/questions/11829050/how-to-make-the-result-of-one-query-be-in-the-not-in-clause)

请帮我完成这项任务。为什么 b.id 未知？我没有这种类型的加入经验。我理解加入两个不同的表格，但是对于这个声明，有人可以解释一下吗？请注意，这`domainname`是唯一的价值。主键是 the`id`并且它是 auto_increment 但我不使用它来区分列。我主要使用另一个`domainname_no`独特的值。

**编辑：**上面的命令不起作用。

我需要的是以下内容：我有一个域名列表。说：aa.yahoo.com、bb.yahoo.com、cc.yahoo.com、aa.msn.com。每个域名都有一个键值。如果密钥是共享的，我想删除这条记录。因此，我选择了按键值分组的不同值。如果记录不在不同的集合中，并且具有相同的顶级域，那么我不需要它。

示例：我的表：cert_id | 域名 | 域证书 | 键 1 | a.yahoo.com | a.yahoo.com_1 |5555 2 | a.yahoo.com | a.yahoo.com_2 |6666 3 | b.yahoo.com | b.yahoo.com_1 |5555 4 | b.yahoo.com | c.yahoo.com_2 |6666

每个域可能有多个与密钥关联的证书。如果一个或多个不同域名的证书具有相同的密钥，我想删除它。

现在，我有两个域名，它们`a.yahoo.com`具有`b.yahoo.com`相同的密钥。我需要删除`b.yahoo.com`任何具有相同模式的域名，如“%.yahoo.com”，但不等于`a.yahoo.com`不同的值。

目前，我正在做的是查询不同的值：

```
select distinct domainname 
from db.table1
where domainname like '%.uci.edu'
group by keyvalue
order by domainname 
```

然后删除任何不在不同列表中且具有相同模式的值`%.yahoo.com`

```
delete from db.table1 where domain not in ( I type the list of distinct domain 
names manually)
and domainanme like '%.yahoo.com'; 
```

我希望问题现在很清楚。

但是这个命令不起作用。详情见：[如何使一个查询的结果在 NOT IN 子句中？](https://stackoverflow.com/questions/11829050/how-to-make-the-result-of-one-query-be-in-the-not-in-clause)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:48:01.550

您没有`ID`为`SubQuery`. 试试这个：

```
DELETE a
FROM db.table1 a
    INNER JOIN (SELECT id, domainname             -- added ID field
                FROM db.table1
                WHERE domainname LIKE '%.uci.edu'
                GROUP BY keyvalue
                HAVING COUNT(1) > 1
        ) b ON a.id = b.id                        -- ID was used here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:48:30.117

您没有加入两个表，将 table1 加入查询结果，并且您没有在该查询中包含 id 列。`SELECT id, domainname`在子查询的开头尝试。

# asp.net-mvc-3 - 洋葱架构问题？

> ID：11831589
> 
> 赞同：1
> 
> 时间：2012-08-06T15:45:51.323
> 
> 标签：asp.net-mvc-3, architecture, onion-architecture

我有几个关于[洋葱架构](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)和 MVC 的问题。

1）领域服务和应用服务有什么区别？
2) Service/Repository/UnitOfWork 模式如何适应这种架构？
3) 你认为这种架构对于 MVC 应用程序来说是一个好的计划吗？

对此的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:37:13.613

1.  DomainService 是您在域内使用的服务。ApplicationService 是您在域中向其他层公开的服务。

2.  什么服务？存储库通常定义为域模型中的接口。您的域模型仅适用于接口。具体存储库是通过依赖注入加载的，位于基础架构或持久层中。

例如

```
public class RegistrationService : IRegistrationService
{
    private IUserRepository mUserRepository;

    public RegistrationService(IUserRepository userRepository)
    {
        mUserRepository = userRepository;
    }

    public void Register(string name, string password)
    {
        var user = new User(name, password);
        mUserRepository.Add(user);
    }
} 
```

（希望语法正确）

此示例中的 RegistrationService 是一个 DomainService。另一方面，WCF 服务是 ApplicationService。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-26T10:19:40.250

它们之间的主要区别在于域服务拥有域逻辑，而应用程序服务则没有

工作单元提供了将更改保存到存储（无论此存储是什么）的能力。IUnitOfWork 接口有一个保存方法，通常称为 Complete，每个具体存储库都作为属性。

是的！它提供了更好的可维护性，因为所有代码都依赖于层或中心。它提供了更好的可测试性，因为可以为单独的层创建单元测试，而不会影响应用程序的其他模块

# linux - Beaglebone 中的中断

> ID：11831590
> 
> 赞同：6
> 
> 时间：2012-08-06T15:45:58.740
> 
> 标签：linux, embedded, linux-device-driver, embedded-linux, beagleboard

我正在读取 beaglebone gpio 引脚中的霍尔传感器输出，对于每个上升沿，中断服务程序都需要执行。那么，如何在 beaglebone 中使用外部中断呢？有没有为此目的的标准驱动程序？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:48:40.370

是的，有一个标准驱动程序。[此处](https://www.ridgerun.com/developer/wiki/index.php/How_to_use_GPIO_signals)的此页面显示了使用 gpio 的基本步骤。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-13T04:45:06.587

在使用 Adafruit Libray 的 Python 中，

```
import Adafruit_BBIO.GPIO as GPIO 

Pin = "P8_8" 
GPIO.setup(Pin, GPIO.IN)    # set GPIO25 as input (button)  

def my_callback(channel):  
    if GPIO.input(Pin):    
        print "Rising edge detected on 25"  
    else:                  # if port 25 != 1  
        print "Falling edge detected on 25" 

GPIO.add_event_detect(Pin, GPIO.BOTH, my_callback, 1) 
```

这是参考[链接](http://adafruit-beaglebone-io-python.readthedocs.io/en/latest/GPIO.html)。

# apache - 使用动态字符串获取 .htaccess RewriteRule 中的内部服务器错误开始

> ID：11831592
> 
> 赞同：0
> 
> 时间：2012-08-06T15:46:10.100
> 
> 标签：apache, mod-rewrite, preg-match

这段代码：

```
RewriteRule   ^([A-Za-z0-9\.]+)/(.*)$   /?p=profile&user_name=$1 [NC,L] 
```

工作正常。

但是这个：

```
RewriteRule   ^([A-Za-z0-9\.]+)/?(.*)$   /?p=profile&user_name=$1 [NC,L] 
```

不工作并得到内部服务器错误！！！

在用户名工作后，我想要有和没有（/）。那就是：

*   example.com/myusername/

*   example.com/myusername

*   example.com/myusername/family

*   example.com/myusername/family/

一切都必须工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:44:42.587

看起来规则有一些内部循环。如果您没有任何其他规则，我不确定它可能是什么，但您可以针对查询字符串添加显式检查：

```
RewriteCond %{QUERY_STRING} !user_name
RewriteRule ^([A-Za-z0-9\.]+)/? /?p=profile&user_name=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T21:40:34.820

我通过用这些替换代码解决了我的问题：

```
RewriteRule   ^([A-Za-z0-9\.]+)$  /?p=profile&user_name=$1 [NC,NS,L]
RewriteRule   ^([A-Za-z0-9\.]+)/(.*)$  /?p=profile&user_name=$1 [NC,L] 
```

# html - Rails 文章类网站中的文本输入

> ID：11831597
> 
> 赞同：0
> 
> 时间：2012-08-06T15:46:19.817
> 
> 标签：html, ruby-on-rails, database, ruby-on-rails-3, ruby-on-rails-3.1

我正在构建一个显示不同文章的 Rails 站点，发布者可以进入并复制/粘贴 Word 文档（或在页面上编辑它）。我将如何让文本框处理他们将存储的文档的格式？我知道如何进行正常的文本输入并存储在数据库模型中，但是 Rails 如何处理格式（粗体、字体大小、颜色、单独存储文章的缩进）并将其存储在数据库中？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:05:07.680

您可以通过多种方式存储文本。一种方法是让编辑器生成 HTML 文件（或 html.erb 文件），然后将其显示给网站的访问者。然后页面将根据相关的 CSS 进行样式设置。

您还可以使用现成的博客解决方案，例如[Jekyll](https://github.com/mojombo/jekyll)或[Typo](https://github.com/fdv/typo)。

# android - 无法实例化活动 ComponentInfo{}：java.lang.ClassNotFoundException：在加载程序 dalvik.system.PathClassLoader[/mnt/asec/com.-1/pkg.apk

> ID：11831603
> 
> 赞同：0
> 
> 时间：2012-08-06T15:46:44.800
> 
> 标签：android, classnotfoundexception

我有一个完全在 ADT 12 上运行而没有任何错误的应用程序，我已将 ADT 从 12 升级到 ADT 20。但是在升级 ADT 之后，我运行了我的应用程序，但它抛出了以下错误，

> 08-06 20:12:53.896: E/AndroidRuntime(13958): 致命异常: main 08-06 20:12:53.896: E/AndroidRuntime(13958): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com. aruhat.mobileapps.funforkids/com.aruhat.mobileapps.kidszoo.LearnWithFunGame}：java.lang.ClassNotFoundException：com.aruhat.mobileapps.kidszoo.LearnWithFunGame 在加载器dalvik.system.PathClassLoader[/mnt/asec/com.aruhat.mobileapps .funforkids-1/pkg.apk] 08-06 20:12:53.896: E/AndroidRuntime(13958): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585) 08-06 20:12:53.896: E /AndroidRuntime(13958): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 08-06 20:12:53.896: E/AndroidRuntime(13958): 在 android.app.ActivityThread.access$2300(ActivityThread.java :125) 08-06 20:12:53.896:E/AndroidRuntime(13958): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 08-06 20:12:53.896: E/AndroidRuntime(13958): 在 android.os.Handler.dispatchMessage(Handler .java:99) 08-06 20:12:53.896: E/AndroidRuntime(13958): 在 android.os.Looper.loop(Looper.java:123) 08-06 20:12:53.896: E/AndroidRuntime(13958 ): 在 android.app.ActivityThread.main(ActivityThread.java:4627) 08-06 20:12:53.896: E/AndroidRuntime(13958): 在 java.lang.reflect.Method.invokeNative(Native Method) 08-06 20:12:53.896: E/AndroidRuntime(13958): 在 java.lang.reflect.Method.invoke(Method.java:521) 08-06 20:12:53.896: E/AndroidRuntime(13958): 在 com.android .internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 08-06 20:12:53.896: E/AndroidRuntime(13958): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 08-06 20:12:53.896: E/AndroidRuntime(13958): at dalvik.system.NativeStart.main(Native Method) 08-06 20:12:53.896: E/AndroidRuntime(13958): 由: java .lang.ClassNotFoundException: com.aruhat.mobileapps.kidszoo.LearnWithFunGame 在加载器 dalvik.system.PathClassLoader[/mnt/asec/com.aruhat.mobileapps.funforkids-1/pkg.apk] 08-06 20:12:53.896: E/AndroidRuntime(13958): 在 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243) 08-06 20:12:53.896: E/AndroidRuntime(13958): 在 java.lang.ClassLoader.loadClass(ClassLoader.java :573) 08-06 20:12:53.896: E/AndroidRuntime(13958): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:532) 08-06 20:12:53.896: E/AndroidRuntime(13958):在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 08-06 20:12:53.896: E/AndroidRuntime(13958): 在 android.app。ActivityThread.performLaunchActivity(ActivityThread.java:2577) 08-06 20:12:53.896: E/AndroidRuntime(13958): ... 11 更多

但是我的清单中有这些课程。我搜索了很多答案，但没有人帮助解决这个问题。请给出这个问题的一些有用的解决方案。

谢谢...！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:18:02.523

我在更新“Android SDK 工具”和“Android SDK 平台工具”时修复了这个错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T06:17:01.330

右键单击项目->单击属性->删除android依赖项。再次右键单击项目单击android工具，然后单击修复项目属性。它应该工作。

# regex - 正则表达式：括号中的必需字符

> ID：11831611
> 
> 赞同：3
> 
> 时间：2012-08-06T15:47:08.307
> 
> 标签：regex

如何从包含 的集合中搜索仅包含字符的字符串`x`，并要求它包含 x？例如`[a-z]+`，但不匹配，如果它不包含`x`.

所以它应该匹配`quux`但不匹配`foo`or `bar`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T15:49:28.807

尝试这样的事情

`^[a-z]*x[a-z]*$`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T15:50:50.773

假设你想匹配一个只有 x,y 或 z 的字符串，匹配 start ( `^`) 后跟零或多个`y`或`z`( `[yz]*`) 后跟 an`x`后跟零或多个`x`，`y`或`z`( `[xyz]*`) 后跟 end ( `$`)

```
^[yz]*x[xyz]*$ 
```

如果您正在尝试匹配`[a-z]`但`x`在某处有一个，那么应该这样做

```
^[a-z]*x[a-z]*$ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T15:49:27.627

`[a-z]*x[a-z]*`应该做的伎俩。

# mysql - mysql查询浏览器内存不足

> ID：11831614
> 
> 赞同：0
> 
> 时间：2012-08-06T15:47:34.400
> 
> 标签：mysql, database

我在 mysql 数据库中有一个非常大的表（几百万行）。每行都有一个作为字段创建的日期。我想提取从 2011 年到今天的行。我正在使用的查询看起来像这样：

```
select data1, data1, data3, data4, data5, data6 
  from db.table 
 where date(data3) between '2011-10-01' and '2012-08-06' 
```

在浏览器崩溃之前，我在 mySQL 查询浏览器中获取了大约 300 万行数据，并且出现了 Glib 错误（gmem.c:173 failed to allocate 50080000 bytes. aborting。）

仅仅是因为我没有足够的内存吗？是否有任何人可以建议的技巧或性能增强查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:53:39.843

您正在使用的查询浏览器似乎正在将整个数百万行结果集提取到 RAM 中。如果由于某种原因你*必须*这样做，你将需要更多的 RAM。

问题是：你在用这个结果集做什么？您是否将其保存到文件中？如果是这样，那么请使用 MySQL 浏览器功能来执行此操作。它不需要几乎与将整个结果集下载到 RAM 一样多的内存。

**编辑**： MySQL / Oracle 正在淘汰 MySQL 查询浏览器。您可能应该找到一些其他程序来将您的行提取到 CSV (Excel) 文件中。如果您愿意，一些工具也会创建 XLS 文件。

以下是正确的问题和答案：

[如何以 CSV 格式输出 MySQL 查询结果？](https://stackoverflow.com/questions/356578/how-to-output-mysql-query-results-in-csv-format)

# c++ - 没有用于调用可变参数包函数的匹配函数

> ID：11831615
> 
> 赞同：3
> 
> 时间：2012-08-06T15:47:36.480
> 
> 标签：c++, c++11, variadic-functions

考虑：

```
#include<tuple>

template<int N,typename... Vs,typename... Ts>
void fog( const std::tuple<Vs...>& vs , const std::tuple<Ts...> & ts )
{
}

template<typename...Vs,typename...Ts >
int gof( const std::tuple<Vs...>& vs , const std::tuple<Ts...> & ts )
{
  fog<0,Vs...,Ts...>(vs,ts);
}

int main()
{
  std::tuple<int,double> t;
  gof(t,t);
} 
```

为什么编译器（g++-4.6）找不到`fog`函数以及如何让它找到它？

```
error: no matching function for call to ‘fog(const std::tuple<int, double>&, const std::tuple<int, double>&)’
note: candidate is:
note: template<int N, class ... Vs, class ... Ts> void fog(const std::tuple<Vs ...>&, const std::tuple<_Tail ...>&) 
```

是的，我需要积分模板参数`N`。（这是一个简化的示例。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T15:51:13.270

不要扩展参数包：

```
fog<0>(vs,ts); 
```

否则编译器不知道哪个模板参数属于哪个元组。这样，元组的模板参数就会照常扣除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T15:51:32.603

写：

```
fog<0>(vs,ts); 
```

代替

```
fog<0,Vs...,Ts...>(vs,ts); 
```

并让编译器推断类型。

至于为什么第二种形式不起作用，因为可变参数只能是最后一个参数。该形式不能有两个可变参数模板参数。

# c# - aspx 按钮单击 https 问题

> ID：11831618
> 
> 赞同：0
> 
> 时间：2012-08-06T15:47:45.870
> 
> 标签：c#, asp.net, https

我正在使用带有框架 4 的 Visual Studio 2010。

我有一个 aspx 页面，其中有一些字段供用户输入搜索条件，并且`GridView`初始为空。用户输入要搜索的字段后，单击按钮。然后单击事件触发并检索数据并填充 GridView。

我已将应用程序部署到我们的服务器，它与 http 配合得很好。但是，当我们切换到 https 时，页面会显示，但是当单击搜索按钮时，它会返回 404 错误。

由于防火墙限制，我们在 http 上遇到了一些早期错误，但网络人员说他这次没有看到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:25:57.130

这听起来就像您在应用程序的某处有一个硬编码的 URL。搜索 http://，您应该能够找到它。

或者，安装[Fiddler](http://www.fiddler2.com)并查看遇到 404 错误时尝试访问的 URL，然后在代码中跟踪该 URL。

# jquery - jQuery弹出div淡入后淡出

> ID：11831622
> 
> 赞同：0
> 
> 时间：2012-08-06T15:48:02.283
> 
> 标签：jquery

我的 HTML 代码开头有一个 DIV 元素

```
<div id="popup"></div> 
```

它的 CSS`display`属性设置为`none`最初。现在，当我单击特定的 HTML 元素时，会发生以下情况：

```
$('#popup-opener-button').click(function() {
    $('#popup').fadeIn();
}); 
```

这就像魅力一样。现在我希望这个 DIV 在我单击屏幕上的任何位置时消失，除非单击 DIV 本身。我认为这会做到这一点：

```
$('#popup').siblings().click(function() {
    $('#popup').fadeOut();
}); 
```

但由于我单击以淡入弹出 div 的 SPAN 实际上是#popup 兄弟的孩子，它在淡入后立即淡出。有没有办法不这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:57:29.897

我不确定这在重型 DOM 中的性能如何，因为会发生大量事件冒泡，并且`:not`psuedoselector 不是最快的，但是这种方法使用您可以传递给的选择器`.on( )`来过滤掉`div#popup`，本质上允许您单击页面上的任何其他内容来触发您的`fadeOut()`.

```
​$(document.body).on('click',':not(#popup)', function(){ $('#popup').fadeOut(); })​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:07:19.887

`#popup`如果它最初是隐藏的，我不确定你希望如何点击它。这是您的代码中的错误吗？

这是一个适合我的解决方案。

```
$('#popup').click(function(e) {
    $('#popup').fadeIn();

    // if i click in the popup, don't bubble the event up to the 'body' 
    e.stopPropagation();

    // hook up the fade-out event to the body to handle a click anywhere else
    $('body').one('click', function () { $('#popup').fadeOut(); });
}); 
```

# ruby-on-rails - 查找好友并创建用户数组

> ID：11831625
> 
> 赞同：0
> 
> 时间：2012-08-06T15:48:08.117
> 
> 标签：ruby-on-rails, model, associations, social-networking

我有一个基本的社交网络。我正在尝试创建一个返回用户数组的朋友方法。有些`user :ids`在`:user_id`属性中，有些在`:friend_id`属性中。我不想退货`current_user.id`。我只想返回`:name`,`:id`和`:uid`属性。我不知道从这里去哪里。

我希望我足够简化，如果我的问题缺少信息，请告诉我。

谢谢！

```
class User < ActiveRecord::Base
  has_many :friendships, :conditions => {:accepted => true}
  has_many :inverse_friendships, :class_name => "Friendship", :foreign_key => "friend_id", :conditions => {:accepted => true}

  attr_accessible :name, :oauth_expires_at, :oauth_token, :provider, :uid

  def friends
    friendships.preload(:friend) + inverse_friendships.preload(:user)
  end
end

class Friendship < ActiveRecord::Base
  belongs_to :user
  belongs_to :friend, :class_name => "User"
  attr_accessible :accepted, :friend_id, :user_id, :friend
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:23:26.767

这个怎么样：

```
class User
  ...
  def friends
    friendships.map { |f| [f.name, f.id, f.uid] }
  end

end 
```

# javascript - 需要在移动浏览器的标题顶部显示广告。当它滚动时，标题应保持固定，广告和内容正文应滚动

> ID：11831626
> 
> 赞同：0
> 
> 时间：2012-08-06T15:48:15.730
> 
> 标签：javascript, jquery, html, jquery-mobile, mobile-browser

我正在使用 html5 和 jquery mobile 开发移动浏览器应用程序。我有一个小问题。我需要在移动浏览器的页眉（浏览器（广告、页眉、内容和页脚））上显示广告。滚动时，标题应固定在顶部，广告和内容正文应滚动。

任何建议任何想法？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:21:21.137

谢谢您的支持。对于那些正在寻找答案的人。我现在有一些工作。在移动。它适用于 Android 和 iPhone。

我在这里做的是。OnScroll 我正在寻找高度 10。当它达到 10 时，标题（sticky-header）将位于屏幕顶部（如位置：固定），当页面达到顶部（0 px）时，广告将是放置在顶部，标题将向下移动 48px。

```
window.onscroll=function (){
       if (window.innerHeight > window.innerWidth) {
        var value = $(this).scrollTop();
        if ( value > 10 ) {
                //$("#sticky-header").fixedtoolbar({ visibleOnPageShow: false });
            $("#sticky-header").fixedtoolbar({ tapToggle: false }).css("top","0px");
            $("#ad1").hide();
            }
        else if(value < 10){
            $("#ad1").show();
            $("#ad1").fixedtoolbar({ tapToggle: false }).css("top","0px");
            $("#sticky-header").fixedtoolbar({ tapToggle: false }).css("top","48px");
        }
       }

        if (window.innerWidth > window.innerHeight) {
        $("#sticky-header").fixedtoolbar({ tapToggle: false }).css("top","0px");
        }

    } 
```

谢谢你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T18:58:41.980

就像是？;

```
<html>
    <head>
        <style type='text/css'>   
            #uno{
                background-color:yellow;
                position:absolute;
                width:320px;
                height:150px;            
        }
            #dos{
               position:absolute;
               width:320px;
               height:250px; 
               margin-top:50px;
               overflow-y:scroll;
               background-color:blue;            
        }
    </style>
</head>
<body>
    <div id='uno'><p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p></div>

    <div id='dos'> <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p>
    "Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."
    <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p><p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p>
    "Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."
    <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p> <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p>
    "Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."
    <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p> <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p>
    "Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."
    <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p> <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p>
    "Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."
    <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p> <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p>
    "Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."
    <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p> <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p>
    "Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."
    <p>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."    </p>  </div>

</body> 
```

​​​​​</p>

# javascript - Javascript在if中设置值

> ID：11831628
> 
> 赞同：3
> 
> 时间：2012-08-06T15:48:37.917
> 
> 标签：javascript, backbone.js

[Backbone.js](https://github.com/documentcloud/backbone/blob/0.9.2/backbone.js#L245)的另一个函数

```
escape: function(attr) {
  var html;
  if (html = this._escapedAttributes[attr]) return html;
  ... 
```

像上面那样做有什么好处？，而不是按照下面？

```
var html = this._escapedAttributes[attr];
if( html ) return html; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:58:19.633

这是优势还是令人困惑，很大程度上取决于您、您的团队和您的编码约定。

另一个可能非常有用的例子

```
function foo( arr, elem ) {
    while( elem = arr.shift() ) {
       console.log( elem * elem );
    }
} 
```

你会在哪里使用它

```
foo([5,4,3,2,1]); 
```

同样的事情也适用`if statements`。有时，在条件中为某个变量赋值是有意义或有帮助的，以便在案例中直接获得该*访问权限。*当然，对于一些不习惯它的人来说，这可能不方便，但同样，如果你的约定和你的团队就这样的事情达成一致，它可能会非常简洁。

其他语言默认提供此“功能”。例如，一个特殊的变量名，比如`$_`或`->`只是自动引用你手上的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:50:09.807

没有优势*，这只是愚蠢。你知道，不可读是新的时尚。

[* 除非您的编码约定是永远不要同时分配和声明变量。但我认为这在这里并不适用。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T16:05:46.663

老实说，这样做并没有明显的优势。这会降低可读性并使代码更难维护。

如果你不得不为`html`变量重新赋值（就像它已经声明过的那样），它可能会稍微减少代码文件的大小，尽管这种减少完全可以忽略不计，除非出于某种未知和可怕的原因，它已经完成了数千次。例如，以下内容会更短：

```
function escape() {
    var html = "tree";
    // interact with html variable, and later on get to this:
    if (html = this._escapedAttributes[attr]) return html;
} 
```

比这个：

```
function escape() {
    var html = "tree";
    // interact with html variable, and later on get to this:
    html = this._escapedAttributes[attr]
    if (html) return html;
} 
```

# c++ - 在 C++ 中打印部分 int 变量

> ID：11831630
> 
> 赞同：1
> 
> 时间：2012-08-06T15:48:44.983
> 
> 标签：c++, cout

我声明了一些变量：

```
int area_code;
int telephone_number; 
```

当我从用户那里得到输入时：

```
cout << "Enter the area code";
cin >> area_code;
cout << "Enter your local telephone number";
cin >> telephone_number; 
```

现在当我想显示它们时，如果他们的电话号码是 6152222222，它应该显示为：

> 615-222-2222

对于第一部分，我可以这样做：

```
cout << area_code << "-"; 
```

但我不知道如何将它们与那个变量的破折号分开？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:52:36.087

您可以使用数学计算您的号码的区号和本地交换代码：

*   `6152222222 / 10000`去掉最后四位数字，给你`615222`
*   进一步除以`1000`给你`615`；把除法的其余部分`1000`给你`222`。

请注意，使用`int`表示电话号码会限制您存储一些更奇特的电话号码的能力，例如`1-800-SOMETHING`. 使用封装 a`string`并进行额外验证的类可能被证明是更好的选择：

```
class phone_number {
string phone;
public:
    phone_number(const string& p) {
        // validate p...
        if (p.size() != 10) {
            // Do something violent here...
            cerr << "The phone number is incorrect." << endl;
        }
        // Validate more things about the number before the assignment...
        phone = p;
    }
    friend ostream& operator<<(ostream &os, const phone_number& p);
};

ostream& operator<<(ostream &os, const phone_number& pn) {
    const string &p(pn.phone);
    os << "(" << p.substr(0, 3) << ")" << p.substr(3, 3) << "-" << p.substr(6);
    return os;
}

int main() {
    phone_number p = phone_number("6152784567");
    cout << p << endl;
    return 0;
} 
```

[这会在 ideone 上产生预期的输出](http://ideone.com/LXuJ2)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T15:55:29.757

电话号码不应存储在整数变量中。你永远不知道一个电话号码可能有多长，需要哪些特殊字符，是否需要字母字符，前导零等等。

真正的解决方案是至少使用`std::string`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T16:15:50.677

您可以使用以下方法执行此操作[`std::numpunct`](http://en.cppreference.com/w/cpp/locale/numpunct)：

```
#include <iostream>
#include <locale>

struct telephone: std::numpunct<char> {
    char do_thousands_sep() const { return '-'; }
    std::string do_grouping() const { return "\04\03"; }
};

int main() {
    std::cout.imbue(std::locale(std::cout.getloc(), new telephone));
    std::cout << 6152222222ll;
} 
```

输出：

```
615-222-2222 
```

我仍然不推荐这种方法，除非您出于遗留原因必须处理以整数形式存储的电话号码；使用字符串更灵活。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:52:17.097

将这些更改为 std::string 类型。然后使用 substr 操作来获取前三位，等等。使用 stringstream 在整数和字符串之间获取。

而且，老实说，如果您坚持将这些变量保存在整数中，我建议您暂时将它们转换为字符串，并使用字符串操作来计算 value ，因为如果您使用and`xxx-xxxx`编写自己的代码，您实际上是在重复工作这已经在和操作中对您进行了。`/``%``<<``>>`

此外，bee-tee-dubs，该数字实际上不适合 32 位有符号或无符号整数，我认为这是使用错误数据类型的另一个症状。

编辑为 C++ 风格的字符串和字符串操作，而不是 C 风格，因为我出于某种原因在考虑 C 语言。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-06T15:56:11.023

只需将输入分成三个不同的数字：

```
end = 6152222222 % 10000
middle = 6152222222 / 10000
areaCode = middle / 1000
middle = middle % 10000 
```

# html - 在选择选项菜单悬停时失去焦点

> ID：11831632
> 
> 赞同：5
> 
> 时间：2012-08-06T15:48:54.030
> 
> 标签：html, menu, internet-explorer-8

我有一个菜单，菜单中的一个项目是一个`select`元素。仅在 IE 8 中，当我将鼠标悬停在选择上时`options`，菜单会失去焦点并关闭。它在 Firefox 中运行良好。任何帮助，将不胜感激

你可以参考[这个](http://jsfiddle.net/2Et9r/1/)小提琴的代码。

**注意**：我对使用`js`和的解决方案持开放态度`jquery`

**编辑**：我不想要选择的替代品。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-06T16:13:39.280

删除 SELECT 选项。尝试用子列表替换它：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

    <body>
    <ul> Numbers
        <li>1</li>
        <li>2</li>
        <li>3</li>        
        <li>
            Select  -->
            <ul>
                <li>
                    One
                </li>
                <li>
                    Two
                </li>
                <li>
                    Three
                </li>
            </ul>
        </li>
    </ul>
</body>
</html> 
```

这适用于 Chrome 和 IE。

# android - GPS 信号强度

> ID：11831634
> 
> 赞同：0
> 
> 时间：2012-08-06T15:49:11.847
> 
> 标签：android, gps, location, spoofing

> **可能重复：**
> [如何在 Android 上测量 GPS 信号强度？](https://stackoverflow.com/questions/3551697/how-to-measure-gps-signal-strength-on-android)

有没有办法测量或确定 Android 智能手机上每个 gps 卫星的 gps 信号强度（可能还有其他属性）？API 仅提供有关 SNR 和位置的信息。我写了一个小的 NMEA 解析器，但是在我收到的 NMEA 句子中也没有关于这几个信号的信息......

那么，有没有办法测量信号呢？或者是否有处理这个主题的图书馆或项目？

对于反 gps 欺骗技术的一些实验，我需要信号强度（**而不是**位置、准确性或 SNR）。

最好的问候， htz

# asp.net-mvc-3 - 动作过滤器是如何处理的？

> ID：11831637
> 
> 赞同：1
> 
> 时间：2012-08-06T15:49:21.837
> 
> 标签：asp.net-mvc-3, dependency-injection, castle-windsor, asp.net-mvc-4

我有以下全局过滤器，ISiteValidation 和 ICacheService 通过 Windsor 容器注入并设置为 Transient，因此容器不会自动处理依赖项。当站点投入生产时，这将导致资源问题。那么人们如何正确处理注入过滤器的资源呢？这两个接口都是 IDisposable 但当操作过滤器超出范围时永远不会调用 Dispose 并且容器将继续保留实现。

```
public class SiteValidationAttribute : ActionFilterAttribute
{
    public ISiteValidation SiteValidation { get; set; }
    public ICacheService CacheService { get; set; }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.RequestContext.HttpContext.Request.Url != null)
        {
            string host = filterContext.RequestContext.HttpContext.Request.Url.Host;
            try
            {
                string siteId = CacheService.Get("SiteId",
                                                 () =>
                                                 SiteValidation.GetSiteId(
                                                     host));
                var siteIdCookie = new HttpCookie("_site") {Value = siteId};
                filterContext.RequestContext.HttpContext.Response.Cookies.Add(siteIdCookie);
            }
            catch (Exception)
            {
                throw new HttpException(404, String.Format("This site'{0}' was not found", host));
            }
        }

        base.OnActionExecuted(filterContext);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T13:27:41.283

属性由 CLR 根据请求创建：

> 如果要构造属性对象，则必须调用 GetCustomAttributes 或 GetCustomAttribute。每次调用其中一个方法时，它都会构造指定属性类型的新实例，并根据代码中指定的值设置每个实例的字段和属性。

这意味着它们不受任何 IoC 容器的控制。系统中唯一可以处理它们的部分是调用`GetCustomAttribute`或的部分`GetCustomAttributes`。但是没有什么是明确地这样做的。因此，属性不应该是一次性的。

幸运的是，还有另一种方法。不要为过滤器使用属性，而是在需要时实现一个`IActionFilter`并注册一个`IFilterProvider`返回过滤器的新实例（由您的 IoC 容器创建）的实例。

看看它是如何使用 Ninject 完成的；同样的方法应该可以移植到温莎。

[https://github.com/ninject/ninject.web.mvc/tree/master/mvc3/src/Ninject.Web.Mvc/Filter](https://github.com/ninject/ninject.web.mvc/tree/master/mvc3/src/Ninject.Web.Mvc/Filter)

# actionscript-3 - 在 Flexicious Datagrid 上只刷新一个级别

> ID：11831639
> 
> 赞同：1
> 
> 时间：2012-08-06T15:49:25.777
> 
> 标签：actionscript-3, apache-flex, datagrid, flexicious

使用具有 enableDynamicLevels="true" 的终极灵活数据网格，我搜索了一种刷新在灵活数据网格上创建的动态级别的方法。我不能使用 rebuidBody 函数，因为它是使用自定义子函数创建的动态关卡。

可能吗 ？

感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:44:52.313

如果您只是想展开或折叠 1 个项目，您可以调用`grid.expandChildrenOf(yourItem, expandOrCollapse)`

# python - 使用 Python 将 sda 克隆到 sdb

> ID：11831645
> 
> 赞同：1
> 
> 时间：2012-08-06T15:49:52.450
> 
> 标签：python

我可以用这个 Python 程序克隆`sda`到吗？`sdb`

```
filein = open('/dev/sda', 'rb')  
fileout = open('/dev/sdb', 'wb')  

while True:  
   tmp = filein.read(100000)  
   fileout.write(tmp)  

filein.close()
fileout.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:59:42.477

您的脚本不会完全正常工作，不。例如，您将如何退出 EOF 上的循环？

但更重要的是，为什么要使用 Python 来完成这项任务？为什么不`dd`呢？它已经处理了您为此任务需要处理的所有情况。

```
dd if=/dev/sda of=/dev/sdb bs=1024k 
```

（用你最喜欢的块大小代替`1024k`。）

# ms-access - Access VBA：工作表方法不规则地失败

> ID：11831646
> 
> 赞同：1
> 
> 时间：2012-08-06T15:49:57.993
> 
> 标签：ms-access, ms-access-2007, vba

我刚写的一些代码有问题。基本上，此代码位于由主窗体打开的对话框样式窗体内。

此代码有两个子项：
第一个是`OnLoad`谨慎打开 Excel 工作簿以构建其工作表列表的方法。
第二个 sub 是该`OnClick()`对话框上一个按钮的方法，它返回两个值并进行一些错误检查。

由于某种原因，该`Sheets()`方法有时会失败，并且在失败后立即执行完全相同的步骤实际上可能有效。我已经使用“局部变量”窗口以及间谍工具来观察这些值是否真的有意义并且它们确实有意义。
关于为什么会发生这种情况的任何提示？

此外，如果该数据库掌握在有经验的用户手中，这也没什么大不了的，但在这种情况下，我们不能假设用户完全了解 Access（甚至不关闭和重新打开表单）。

```
Option Compare Database
Option Explicit

Dim xlApp As Excel.Application
Dim xlWb As Excel.Workbook

Private Sub Form_Open(Cancel As Integer)
    Dim xl_sub_ws As Excel.Worksheet
    Set xlApp = New Excel.Application
    With xlApp
        .Visible = False
        Set xlWb = .Workbooks.Open(Forms("MenuGeneral")("CheminFichierImport").Value)
    End With

    For Each xl_sub_ws In xlWb.Worksheets
        lst_sheets.AddItem (xl_sub_ws.Name)
    Next xl_sub_ws
End Sub

Private Sub renvoyer_valeur_Click()
    Dim ret As VbMsgBoxResult

    If lst_sheets.Value <> "" Then
        Forms("MenuGeneral")("worksheet_name").Value = lst_sheets.Value
        Forms("MenuGeneral")("nb_colonnes").Value = Sheets(lst_sheets.Value).UsedRange.Columns.Count

        If Forms("MenuGeneral")("nb_colonnes") < 4 Then
            ret = MsgBox("La feuille à importer contient moins de 4 champs de la clé comptable." & _
                    "Souhaitez-vous procéder ainsi (oui) ou choisir une autre feuille (non) ?", vbYesNo)
            If ret = vbNo Then
                Forms("MenuGeneral")("nb_colonnes").Value = ""
                Exit Sub
            End If
        End If

        xlWb.Close
        xlApp.Quit
        DoCmd.Close acForm, "dlg_modal_feuille", acSaveNo
    Else
        MsgBox "S'il-vous-plaît choisir la feuille source"
    End If
End Sub 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:11:42.807

我会建议`Worksheets`而不是`Sheets`.

`Worksheets`是存在于工作簿中的集合。`Worksheets`使用工作簿的对象变量 ( `xlWb`?) 进行限定。

```
Forms("MenuGeneral")("nb_colonnes").Value = _
    xlWb.Worksheets(lst_sheets.Value).UsedRange.Columns.Count 
```

# c++ - 如何使用在命名空间中声明的类实例的向量

> ID：11831647
> 
> 赞同：0
> 
> 时间：2012-08-06T15:50:00.767
> 
> 标签：c++, templates, vector, namespaces

我无法应对以下情况：

```
class someName
{ public:
vector<compound_objectNS::Compound_object*> loadObjectsFromFile(char* fileName);
}

namespace compound_objectNS
{ class Compound_object {here goes it`s defenition}.
} 
```

我从 isense 得到错误：“*矢量不是模板*”我做错了什么？请帮帮我！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:51:06.717

你需要`#include <vector>`在使用之前`std::vector<>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:52:06.413

如果你没有写`using namespace std;`或一些类似`using`的指令，你应该写`std::vector`. 或者，也许您只是忘记了`#include <vector>`文件开头的 。

此外，您必须在声明`compound_objectNS`之前提供声明`vector`（完整定义，或者前向声明）。

# android - Android NDK ARM 构建设置可在大多数设备上运行？

> ID：11831648
> 
> 赞同：3
> 
> 时间：2012-08-06T15:50:04.273
> 
> 标签：android, android-ndk, arm, neon

我推出了一些 Android NDK 应用程序，人们抱怨我的应用程序无法在他们的手机上运行。我想知道的是，哪些编译设置将支持市场上大多数（如果不是所有）ARM 设备？

我的问题似乎是 armeabi-v7a 设备对 VFP、NEON 等有不同程度的支持。我正在寻找一种解决方案来构建在大多数平台上运行的应用程序，即使这是以优化为代价的。

我使用的是 armeabi 和 armeabi-v7a 的默认 NDK 构建脚本，它指定： `-march=armv7-a -mfloat-abi=softfp -mfpu=vfpv3`

这不适用于某些设备，例如 Acer A500 (CPU Nvidia Tegra2 (Dual Cortex A9))。这个 CPU 没有实现 NEON，从我在这里学到的[http://wiki.debian.org/ArmHardFloatPort/VfpComparison](http://wiki.debian.org/ArmHardFloatPort/VfpComparison)。

具体来说，崩溃是这样的：

```
F/libc    (15549): Fatal signal 4 (SIGILL) at 0x5bfd9260 (code=1)
...(snip)...
I/DEBUG   (   81): #00 pc 0005b260 /data/data/com.burnsmod.oscpad/lib/libapplication.so (tanf) 
```

查看 libapplication.so，我看到 tanf 生成为：

```
0005b25c <tanf>:
5b25c:       ee070a90        fmsr    s15, r0
5b260:       eef70ae7        fcvtds  d16, s15
5b264:       e92d4010        push    {r4, lr}
5b268:       ec510b30        vmov    r0, r1, d16
5b26c:       ebff4b6c        bl      2e024 <_ZN15ButtonUIHandler10FreeImagesEv-0x6ac>
5b270:       ec410b30        vmov    d16, r0, r1
5b274:       eef77be0        fcvtsd  s15, d16
5b278:       ee170a90        fmrs    r0, s15
5b27c:       e8bd8010        pop     {r4, pc} 
```

那么，答案是什么？vfpv2? vfp? vfpv3? vfpv3-d16？

现在，如果我使用 readelf，我发现我的应用程序库的依赖项是：

```
MacBook:armeabi-v7a tom$ arm-linux-androideabi-readelf -A libapplication.so
Attribute Section: aeabi
File Attributes
Tag_CPU_name: "7-A"
Tag_CPU_arch: v7
Tag_CPU_arch_profile: Application
Tag_ARM_ISA_use: Yes
Tag_THUMB_ISA_use: Thumb-2
Tag_VFP_arch: VFPv3
Tag_ABI_PCS_wchar_t: 4
Tag_ABI_FP_denormal: Needed
Tag_ABI_FP_exceptions: Needed
Tag_ABI_FP_number_model: IEEE 754
Tag_ABI_align8_needed: Yes
Tag_ABI_align8_preserved: Yes, except leaf SP
Tag_ABI_enum_size: int
Tag_ABI_HardFP_use: SP and DP 
```

**VFP2**：NDK 7 不支持使用“-mfpu=vfpv2”或“-mfpu=vfp2”进行编译，两者都返回错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T00:51:16.657

原来我的问题是我使用的是 NDK r7b，它有一些错误，其中 VFPv3 代码包含在一些核心库中。

[http://code.google.com/p/android/issues/detail?id=26199](http://code.google.com/p/android/issues/detail?id=26199)

它已在 r7c 中修复，通过升级到 r8b 看起来我解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:09:26.010

通过构建 vanilla 和 armv7 优化库（armeabi 和 armeabi-v7a），您可以覆盖 armv7 和非 armv7 的情况，因为包管理器会在用户安装您的应用程序时选择适当的库。

在 armv7 优化的库中，您可以使用[android_getCpuFeatures()](http://www.kandroid.org/ndk/docs/CPU-FEATURES.html)来检测对 VFPv3-D16 和 NEON 的支持，并据此选择适当的代码路径。即，如果设置了任何 VFPv3-D16 优化代码，则可以执行任何 VFPv3-D16 优化代码，如果`ANDROID_CPU_ARM_FEATURE_VFPv3`设置了任何 NEON/VFPv3-D32 优化代码`ANDROID_CPU_ARM_FEATURE_NEON`（假设没有设备对它们支持的内容撒谎）。

# android - Galaxy Nexus 4.1.1 和 ISO14443 阅读器

> ID：11831651
> 
> 赞同：0
> 
> 时间：2012-08-06T15:50:14.277
> 
> 标签：android, nfc, nfc-p2p

是否可以在 Galaxy Nexus Jelly Bean (4.1.1.) 移动设备和任何常规桌面非接触式阅读器 (ISO 14443 A/B) 之间建立连接？

据我所知，android不支持卡模拟模式，所以只能通过p2p模式来完成。p2p 是基于 ISO 14443，因此可以使用任何阅读器，还是还需要特定的 NFC 芯片，而不是旧阅读器中使用的标准 ISO14443 芯片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:45:16.340

第一个问题的答案是肯定的，GNEx[应该支持](http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html)ISO 14443 A/B。

我不确定您在第二个问题中要问什么，但我可以告诉您，其中一位读者必须是[上面](http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html)列出的格式之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:28:02.250

不，Android 可以进行 NFC 点对点通信（又名 NFC-IP1，ISO 18092）。从 Jelly Bean (4.1) 开始，这将在 212 kbit/s 上发生。（之前的 Android 版本也支持 106 kbit/s，除非在设备上激活了 Google Wallet。）212 kbit/s 的 NFC 点对点使用 FeliCa 调制（不是 ISO 14443-A 调制），所以可能不是所有的 ISO 14443 桌面阅读器将能够支持它。

# ocean - Ocean 2012 缺少类 PetrelSystem

> ID：11831652
> 
> 赞同：0
> 
> 时间：2012-08-06T15:50:18.453
> 
> 标签：ocean, petrel

在海洋门户收到的问题：

我收到以下错误。对于我代码中的所有**PetrelSystem**声明，我得到了同样的错误。我从新路径（Petrel 2012）添加了 Ocean.Core dll 文件，但这没有帮助：

当前上下文中不存在名称“PetrelSystem”

代码在 Ocean for Petrel 2011 上正确编译

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:50:18.453

静态类**PetrelSystem是在****Slb.Ocean.Petrel.Global.dll**中定义的，而不是在 Core 中。核心适用于非 Petrel 的东西。确保包含所有库。

由于之前在 Slb.Ocean.Petrel.dll 中定义的一些类已迁移到 Slb.Ocean.Petrel.Global.dll，因此迁移到 2012 存在一点困难

# c# - “System.Int32”类型的对象无法转换为“System.Web.Security.Cryptography.Purpose”类型

> ID：11831655
> 
> 赞同：9
> 
> 时间：2012-08-06T15:50:36.523
> 
> 标签：c#, exception-handling, asp.net-4.5

每当我尝试构建时，我都会收到此错误。我刚刚安装了 Visual Studio 2012 和 .Net 4.5，但是这个项目还在 2010 年。

这是我遇到问题的代码行：

```
private static MethodInfo _encode;
public static string Encode(CookieProtection cookieProtection, byte[] buf, int count)
{
  return (string)_encode.Invoke(null, new object[] { cookieProtection, buf, count });
} 
```

我收到一条`ArgumentException was unhandled by user code`错误消息，说`"Object of type 'System.Int32' cannot be converted to type 'System.Web.Security.Cryptography.Purpose'"` 我的开发环境没有任何变化，我的同事没有遇到同样的问题，但他们也没有 VS2012。

我发现[一篇](http://kamranicus.com/blog/posts/45/sitecore-and-net-framework-45)关于 Sitecore 出现此错误的文章，但这是我看到它弹出的唯一地方。

他们在那里说，“这是因为在 .NET 4.5 中 System.Web 中有一些新的命名空间”

他们的解决方案是：

*   如果您安装了 VS11，请卸载它
*   卸载 .NET 4.5
*   重新安装 .NET 4

这似乎是一个荒谬的解决方案，4.5 和 4 不能在同一台机器上。

在我尝试卸载并重新安装一堆东西之前，有谁知道可能导致这种情况的原因以及任何更好的解决方案？

评论还说尝试：`</setting name="login.rememberlastloggedinusername" value="false" >`但我也不想这样做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T02:47:01.073

正如@hvd 所暗示的，这段代码使用反射来调用微软在.NET 4.5 中改变的内部方法。

幸运的是 .NET 4.0 引入了[`System.Web.Security.MachineKey`](http://msdn.microsoft.com/en-us/library/ee360261)具有公共方法的类，[`Encode()`](http://msdn.microsoft.com/en-us/library/system.web.security.machinekey.encode)它们[`Decode()`](http://msdn.microsoft.com/en-us/library/system.web.security.machinekey.decode)完成与 .NET 中的内部方法基本相同的事情`CookieProtectionHelper`。请注意，使用 加密的 cookie`CookieProtectionHelper.Encode()`将无法使用 解密`MachineKey.Decode()`。

另请注意，在 .NET 4.5 中，这些方法已弃用，取而代之的[`Protect()`](http://msdn.microsoft.com/en-us/library/system.web.security.machinekey.protect)是[`Unprotect()`](http://msdn.microsoft.com/en-us/library/system.web.security.machinekey.unprotect).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T17:32:45.230

在 web.config 中将值更改为 false：

```
<setting name=”Login.RememberLastLoggedInUserName” value=”false” /> 
```

（来自：[http](http://truncatedcodr.wordpress.com/2012/06/20/fix-sitecore-and-net-framework-4-5/) ://truncatedcodr.wordpress.com/2012/06/20/fix-sitecore-and-net-framework-4-5/ ）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T16:40:08.880

你是从[这里](http://www.codeproject.com/Articles/13665/HttpSecureCookie-A-Way-to-Encrypt-Cookies-with-ASP)得到的吗？

```
_encode = cookieProtectionHelper.GetMethod(
    "Encode", BindingFlags.NonPublic | BindingFlags.Static); 
```

这依赖于 MS 从未承诺将保持不变的 .NET Framework 的内部实现细节。所以是的，.NET Framework 的就地升级很可能会使此类代码停止工作。这不是 .NET 4.5 中的错误。这是你的代码中的一个错误，它依赖于你无法依赖的东西。

要解决它，请停止使用该方法。如果有一个公共 API 可以满足您的需求，请使用它。如果没有，请自行实施。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-15T04:31:28.383

如果您在使用 CMS 软件[Ektron](http://www.ektron.com)时看到此错误，以下是他们的[8.7 发行说明](http://documentation.ektron.com/current/releasenotes/PDF/EktronReleaseNotes.pdf)-

> 71233 - 如果您安装了 8.6.1 站点并在 web.config () 中启用了 cookie 加密，然后安装了 Microsoft .NET Framework 4.5，您会看到以下错误：

```
 Server Error in '/' Application. 
 Object of type 'System.Int32' cannot be converted to type System.Web.Security.Cryptography.Purpose'. This 
```

> 是固定的。

正如其他答案中提到的，一种解决方案是回滚到 .Net 框架 4.0。在 Ektron 的这种特殊情况下，其他答案是禁用 cookie 加密，或升级到 8.7。

# c - ASTC软件纹理压缩/解压算法

> ID：11831659
> 
> 赞同：6
> 
> 时间：2012-08-06T15:50:47.140
> 
> 标签：c, algorithm, opengl, graphics

今天 OpenGL 4.3 和 OpenGL ES 3.0 规范[已经公布](http://www.phoronix.com/scan.php?page=news_item&px=MTE1NTA)，对于纹理压缩，他们将使用新开发的[ASTC 纹理压缩](http://en.wikipedia.org/wiki/Adaptive_Scalable_Texture_Compression)算法。如果存在算法的任何纯软件实现（最好在 C/C++ 中），我很感兴趣。[这里](http://diglib.eg.org/EG/DL/WS/EGGH/HPG12/105-114.pdf.abstract.pdf;internal&action=action.digitallibrary.ShowPaperAbstract)有一些代码片段，但它们仅涵盖算法核心使用的随机哈希，全文未公开。我的一个项目基于[Squish](http://code.google.com/p/libsquish/)项目（软件中的 DXT1），我想知道它将从 ASTC 中受益多少。如果您有任何资源，请提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T02:00:12.937

本[网站](http://www.malideveloper.com/developer-resources/tools/astc-compressor.php)(malideveloper.com) 上有一个 ASTC 编解码器。

源代码似乎也包括在内。

希望有帮助。

# html - 如何将类似 Youtube 的超链接添加到不是来自 Youtube 的视频

> ID：11831664
> 
> 赞同：0
> 
> 时间：2012-08-06T15:50:54.477
> 
> 标签：html, wordpress, video, youtube, mp4

我想知道是否有一种方法可以在来自我自己网站的视频上放置超链接，就像 Youtube 一样。该视频是 mp4 格式，我不知道是否有一种嵌入式 javascript 代码或用于执行该任务的东西。非常感谢您的关注。

我目前正在通过 wordpress 管理我的网站，我想知道是否有办法通过这种方式做到这一点。

我不能简单地将视频上传到 Youtube，然后将视频嵌入我的网站，因为我目前管理的视频是私人的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:45:24.240

我认为您的意思是您想直接在您的网站上播放视频，而无需将其上传到 youtube 等视频服务。为此，您需要在模板中使用 HTML5 视频标签（如果您有权访问您的代码）。或者我猜 wordpress 会有插件，只允许你上传你的视频文件，它会在你的模板中为你播放。

[HTML5 视频标签说明](https://developer.mozilla.org/en-US/docs/HTML/Using_HTML5_audio_and_video)

# android - 如何检查 JellyBean 中的 Talkback 是否处于活动状态

> ID：11831666
> 
> 赞同：4
> 
> 时间：2012-08-06T15:50:58.463
> 
> 标签：android, accessibility, talkback, android-4.1-jelly-bean

[This question](https://stackoverflow.com/questions/5116867/how-to-know-if-android-talkback-is-active)询问如何知道Android Talkback是否处于活动状态；直到果冻豆为止。从 Android 4.1 开始，这些步骤不再起作用，因为提到的光标是空的。

话虽如此，我想问是否有办法在 Jelly Bean 中进行相同的检查。

**编辑** 我试图搜索 TalkBack 代码，我在[这里](http://eyes-free.googlecode.com/svn-history/r729/trunk/TalkBack/src/com/google/android/marvin/talkback/)找到了它。为了检查 TalkBack 是否处于活动状态，我使用以下代码：

```
Intent screenReaderIntent = new Intent("android.accessibilityservice.AccessibilityService");
screenReaderIntent.addCategory("android.accessibilityservice.category.FEEDBACK_SPOKEN");
List<ResolveInfo> screenReaders = getPackageManager().queryIntentServices(screenReaderIntent, 0);
Cursor cursor = null;
ContentResolver cr = getContentResolver();
for (ResolveInfo screenReader : screenReaders) {
    cursor = cr.query(Uri.parse("content://" + screenReader.serviceInfo.packageName
            + ".providers.StatusProvider"), null, null, null, null);
    //here, cursor is not null, but calling cursor.moveToFirst() returns false, which means the cursor is empty
} 
```

话虽如此，如果光标为空，我们如何知道 TalkBack 是否正在运行？

**编辑 2** 根据@JoxTraex 的建议，我现在发送一个广播来查询是否启用了 TalkBack：

```
Intent i = new Intent();
i.setAction("com.google.android.marvin.talkback.ACTION_QUERY_TALKBACK_ENABLED_COMMAND");
sendBroadcast(i); 
```

现在我应该如何收到回复？

我尝试将以下内容添加到清单中，但我的接收器没有收到任何响应：

```
<receiver android:name="my.package.MyBroadcastReceiver"
android:permission="com.google.android.marvin.talkback.PERMISSION_SEND_INTENT_BROADCAST_COMMANDS_TO_TALKBACK">
<intent-filter>
    <action android:name="com.google.android.marvin.talkback.ACTION_QUERY_TALKBACK_ENABLED_COMMAND" />
</intent-filter> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-11T04:18:29.653

这可以通过使用更容易实现`AccessibilityManager`。

```
AccessibilityManager am = (AccessibilityManager) getSystemService(ACCESSIBILITY_SERVICE);
boolean isAccessibilityEnabled = am.isEnabled();
boolean isExploreByTouchEnabled = am.isTouchExplorationEnabled(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-19T14:42:43.793

您可以检查启用的语音可访问性服务器

```
fun Context.isScreenReaderEnabled(): Boolean {
    val accessibilityManager = getSystemService(Context.ACCESSIBILITY_SERVICE) as AccessibilityManager

    if (!accessibilityManager.isEnabled)
        return false

    val serviceInfoList = accessibilityManager.getEnabledAccessibilityServiceList(AccessibilityServiceInfo.FEEDBACK_SPOKEN)

    if (serviceInfoList.isNullOrEmpty())
        return false

    return true
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T17:48:00.870

我不确定这是实现建议的最佳方式，但我设法通过使用以下代码来完成这项工作：

```
Intent screenReaderIntent = new Intent("android.accessibilityservice.AccessibilityService");
screenReaderIntent.addCategory("android.accessibilityservice.category.FEEDBACK_SPOKEN");
List<ResolveInfo> screenReaders = getPackageManager().queryIntentServices(screenReaderIntent, 0);
Cursor cursor = null;
int status = 0;
ContentResolver cr = getContentResolver();

List<String> runningServices = new ArrayList<String>();
ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
    runningServices.add(service.service.getPackageName());
}

for (ResolveInfo screenReader : screenReaders) {
    cursor = cr.query(Uri.parse("content://" + screenReader.serviceInfo.packageName
            + ".providers.StatusProvider"), null, null, null, null);

    if (cursor != null && cursor.moveToFirst()) { //this part works for Android <4.1
        status = cursor.getInt(0);
        cursor.close();
        if (status == 1) {
            //screen reader active!
        } else {
            //screen reader inactive
        }
    } else {  //this part works for Android 4.1+
        if (runningServices.contains(screenReader.serviceInfo.packageName)) {
            //screen reader active!
        } else {
            //screen reader inactive
        }
    }
} 
```

可能这不是最好的方法，但它是我能想到的唯一一种适用于 Jelly Bean 和以前的 Android 版本的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T17:31:55.577

在查看 TalkBackService.java 时，我发现了这些代码段。这些段应该提供一些关于如何查询状态的见解。

## 代码

```
/**
     * {@link Intent} broadcast action for querying the state of TalkBack. </p>
     * Note: Sending intent broadcast commands to TalkBack must be performed
     * through {@link Context#sendBroadcast(Intent, String)}
     */
    @Deprecated
    // TODO(caseyburkhardt): Remove when we decide to no longer support intent broadcasts for
    // querying the current state of TalkBack.
    public static final String ACTION_QUERY_TALKBACK_ENABLED_COMMAND = "com.google.android.marvin.talkback.ACTION_QUERY_TALKBACK_ENABLED_COMMAND";

    /**
     * Result that TalkBack is enabled.
     *
     * @see #ACTION_QUERY_TALKBACK_ENABLED_COMMAND
     */
    public static final int RESULT_TALKBACK_ENABLED = 0x00000001;

    /**
     * Result that TalkBack is disabled.
     *
     * @see #ACTION_QUERY_TALKBACK_ENABLED_COMMAND
     */
    public static final int RESULT_TALKBACK_DISABLED = 0x00000002;

    /**
     * Permission to send {@link Intent} broadcast commands to TalkBack.
     */
    public static final String PERMISSION_SEND_INTENT_BROADCAST_COMMANDS_TO_TALKBACK = "com.google.android.marvin.talkback.PERMISSION_SEND_INTENT_BROADCAST_COMMANDS_TO_TALKBACK";

    /**
     * Tag for logging.
     */
    private static final String LOG_TAG = "TalkBackService";

public static final String ACTION_QUERY_TALKBACK_ENABLED_COMMAND = "com.google.android.marvin.talkback.ACTION_QUERY_TALKBACK_ENABLED_COMMAND";
..

            } else if (ACTION_QUERY_TALKBACK_ENABLED_COMMAND.equals(intentAction)) {
            // TODO(caseyburkhardt): Remove this block when we decide to no
            // longer support
            // intent broadcasts for determining the state of TalkBack in
            // favor of the content
            // provider method.
            if (sInfrastructureInitialized) {
                setResultCode(RESULT_TALKBACK_ENABLED);
            } else {
                setResultCode(RESULT_TALKBACK_DISABLED);
            }
        }
            ...
    } 
```

## 解释

您必须使用以下操作向 TalkBackService 发送 Intent 广播：

```
public static final String ACTION_QUERY_TALKBACK_ENABLED_COMMAND = "com.google.android.marvin.talkback.ACTION_QUERY_TALKBACK_ENABLED_COMMAND"; 
```

然后检查 Extras 的内容并进行相应的处理。

**还要**确保您拥有正确的权限：

```
public static final String PERMISSION_SEND_INTENT_BROADCAST_COMMANDS_TO_TALKBACK = "com.google.android.marvin.talkback.PERMISSION_SEND_INTENT_BROADCAST_COMMANDS_TO_TALKBACK"; 
```

# ruby - Bubblewrap HTTP -> 表格视图；方法返回气泡包装查询而不是响应数据

> ID：11831669
> 
> 赞同：3
> 
> 时间：2012-08-06T15:51:08.403
> 
> 标签：ruby, rubymotion

我正在尝试 Rubymotion，但似乎无法弄清楚如何完成看似简单的任务。

我已经为人员目录设置了 UITableView。我创建了一个返回 json 的 rails 后端。

Person 模型定义了一个 get_people 类方法：

```
def self.get_people
  BubbleWrap::HTTP.get("http://myapp.com/api.json") do |response|
    @people = BW::JSON.parse(response.body.to_str)
    # p @people prints [{"id"=>10, "name"=>"Sam"}, {etc}] to the console
  end
end 
```

在 directory_controller 中，我只想将 @data 的实例变量设置为我的端点返回的数组，以便我可以填充表视图。

我正在尝试`@data = Person.get_people`在 viewDidLoad 中执行操作，但收到一条错误消息，指示正在传递 BW 响应对象：`undefined method`count' for #BubbleWrap::HTTP::Query:0x8d04650 ...> (NoMethodError)`

因此，如果我在 BW 响应块之后将数组硬编码到 get_people 方法中，一切正常。但是我发现我也无法通过关闭 BW 响应块来保留实例变量。

```
def self.get_people
  BubbleWrap::HTTP.get("http://myapp.com/api.json") do |response|
    @people = BW::JSON.parse(response.body.to_str)
  end
  p @people #prints nil to the console
  # hard coding [{"id"=>10, "name"=>"Sam"}, {etc}] here puts my data in the table view correctly
end 
```

我在这里想念什么？如何从bubblewrap 的响应对象中获取这些数据并以可用的形式传递给我的控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:25:41.123

正如 BW 文档中所解释的那样，“BW::HTTP 包装了 NSURLRequest、NSURLConnection 和朋友，为 Ruby 开发人员提供了更熟悉和更易于使用的 API。API 使用**异步**调用和块来保持尽可能简单。”

由于调用的异步性质，在您的第二个片段中，您在实际更新之前打印@people。正确的方法是在解析结束后将新数据传递给 UI（例如，如果 @people 数组应该显示在 UITableView 中，则为 @table.reloadData()）。

这是一个例子：

```
def get_people
    BubbleWrap::HTTP.get("http://myapp.com/api.json") do |response|
        @people  = BW::JSON.parse(response.body.to_str)
        update_result()
    end
end

def update_result()
    p  @people
    # do stuff with the updated content in @people
end 
```

[在使用 BubbleWrap 的RubyMotion 异步编程中](https://stackoverflow.com/questions/13167304/rubymotion-async-programming-with-bubblewrap)找到更复杂的用例和更详细的解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:42:22.380

就个人而言，我会跳过 BubbleWrap 并去做这样的事情：

```
def self.get_people
  people = []
  json_string = self.get_json_from_http
  json_data = json_string.dataUsingEncoding(NSUTF8StringEncoding)
  e = Pointer.new(:object)
  hash = NSJSONSerialization.JSONObjectWithData(json_data, options:0, error: e)
  hash["person"].each do |person| # Assuming each of the people is stored in the JSON as "person"
    people << person
  end
  people # @people is an array of hashes parsed from the JSON
end

def self.get_json_from_http
  url_string = ("http://myapp.com/api.json").stringByAddingPercentEscapesUsingEncoding(NSUTF8StringEncoding)
  url = NSURL.URLWithString(url_string)
  request = NSURLRequest.requestWithURL(url)
  response = nil
  error = nil
  data = NSURLConnection.sendSynchronousRequest(request, returningResponse: response, error: error)
  raise "BOOM!" unless (data.length > 0 && error.nil?)
  json = NSString.alloc.initWithData(data, encoding: NSUTF8StringEncoding)
end 
```

# c++ - 在 C++ 中灌输的目的是什么？

> ID：11831672
> 
> 赞同：16
> 
> 时间：2012-08-06T15:51:14.810
> 
> 标签：c++

我今天正在处理一些代码，我看到：

```
extern std::locale g_classicLocale;
class StringStream : public virtual std::ostringstream
{
 public:
        StringStream() { imbue(g_classicLocale); }
        virtual ~StringStream() {};
}; 
```

然后我遇到了`imbue`。`imbue`C ++中函数的目的是什么？它有什么作用？`imbue`使用（非线程安全，内存分配）是否有任何潜在问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-06T15:55:54.083

[`imbue`](http://en.cppreference.com/w/cpp/io/basic_ios/imbue)由`std::ostringstream`from继承，[`std::ios_base`](http://en.cppreference.com/w/cpp/io/ios_base)并将流的语言环境设置为指定的语言环境。

这会影响流打印（和读取）某些内容的方式；例如，设置法语语言环境将导致小数点`.`被替换为`,`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-06T15:57:00.683

C++ 流根据 a 执行与（数字）类型之间的转换`locale`，该对象汇总了所需的所有本地化信息（十进制分隔符、日期格式等）。

流的默认设置是使用当前的全局语言环境，但是您可以使用该`imbue`函数为流设置自定义语言环境，这就是您的代码在此处所做的 - 我想它正在设置默认的 C 语言环境以生成当前与语言环境无关的文本（这很有用，例如用于序列化目的）。

# jquery - 切换 3 个类 onclick（仅切换 2 个）

> ID：11831674
> 
> 赞同：1
> 
> 时间：2012-08-06T15:51:19.610
> 
> 标签：jquery, click, toggle, if-statement

我的切换功能仅切换 3 个类中的 2 个，而不是第三个。它跳过了我的明星班，只是在我的事实班和巴尔班之间切换。我已经改变了很多方法，它只切换了 3 个类中的 2 个。

我的 HTML

```
<div id="labalt"><a href="#">Alt</a></div>
  <h1 id="build_title" class="barr" >Barracks</h1> 
```

我的代码

```
$("#labalt").click(function() {
    $(this).toggleClass("fact star barr");

if($(this).hasClass("fact"))
    {
    $("#build_title").html("Factory");
    }
else if($(this).hasClass("star"))
{
    $("#build_title").html("Starport");
    }
else
{
    $("#build_title").html("Barracks");
    }
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:52:27.390

您是否试图让代码在连续三次点击时循环浏览所有三个文本？因为那不是`toggleClass`。`toggleClass`打开或关闭一个或多个类。

[正如您可以通过这个 fiddle 看出的那样](http://jsfiddle.net/2e4hG/)，单击链接会同时切换边框、字体大小和斜体类。

它从没有任何课程开始。在单击 1 时，它将具有所有三个类。然后它将匹配第一个条件（它具有`fact`类），并且由于它们是`else if`'s，因此不会检查其他条件。文本将简单地设置为“工厂”。

在第二次单击时，所有三个类都将被删除。它不满足第一个条件 ( `fact`) 或第二个条件 ( `star`)，因此它将文本设置为“兵营”。

第三次单击时，将再次添加所有三个类。

如果您希望它在类中循环，则必须手动实现；我不知道有什么开箱即用的解决方案。您要么需要保留某种游标，要么不断迭代数组以检查当前处于活动状态的类，然后继续下一个。[示例](http://jsfiddle.net/f3nzE/)；我敢肯定它可以更整洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:08:03.653

这是工作示例：http: [//jsfiddle.net/LRuZp/1/](http://jsfiddle.net/LRuZp/1/)

我想，你的条件语句有问题。

```
Case 1\.  <div id="labalt" class="fact"></div>

  Result after toggling: <div id="labalt" class="star barr">

Case 2\.  <div id="labalt" class="fact star"></div>

  Result after toggling: <div id="labalt" class="barr">

Case 3\. <div id="labalt" class=""></div>

  Result after toggling: <div id="labalt" class="fact star barr"> 
```

使用您的条件语句：

```
if($(this).hasClass("fact"))
{
$("#build_title").html("Factory");
}
else if($(this).hasClass("star"))
{
 $("#build_title").html("Starport");
}
else
{
  $("#build_title").html("Barracks");
} 
```

一次可以有两个类。

**情况 1：** 第二个 if 条件设置为 true，最后一个条件保持未选中状态。因此，如果存在“star”类，则永远不会执行最后一个条件，如果两个“star barr”类都存在，这在逻辑上是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:03:19.833

这是一次尝试……你不应该这样做吗

```
$("#labalt").click(function() {
$(this).toggleClass("fact star barr");

if($(this).hasClass("fact"))
{
    $("#build_title").html("Factory");
}
if($(this).hasClass("star"))
{
    $("#build_title").html("Starport");
}
if($(this).hasClass("barr"))
{
    $("#build_title").html("Barracks");
}
}); 
```

# ruby-on-rails - 通过控制器执行 Rake 任务开始但突然停止

> ID：11831680
> 
> 赞同：1
> 
> 时间：2012-08-06T15:51:35.930
> 
> 标签：ruby-on-rails, linux, ruby-on-rails-3

我有一组在生产服务器上运行的 rake 任务，它与主线程分离，并在后台发生

这是执行它的代码

```
def vehicle
    @estate = Estate.find(@estate_id)
    @date_string = @login_month.strftime("%m%Y")
    system("rake udpms:process_only_vehicle[#{@date_string},#{@estate_id}] &")
    redirect_to :controller => "reports/error_messages", :message => "Processing will happen in the background and reports will be refreshed after two minutes", :target => "_blank"
  end 
```

当此代码通过 url 路由执行时，它运行 rake 任务，我可以查看是否检查生产机器上的活动进程，但它在大约 10 秒后突然结束。

```
ps axl | grep rake 
```

这是它显示的

```
ruby /usr/local/rvm/gems/ruby-1.8.7-p352/bin/rake udpms:process_only_vehicle[082012,5] 
```

如果我在终端的 app 文件夹中执行相同的 rake 任务，它将运行没有任何错误。这在开发机器上运行没有任何问题。（OSX）。服务器是薄荷。两者的 Rake 版本相同。gem 只有一个版本。

因为它是生产服务器，所以没有日志（除了 produciton.log，它没有帮助）。任何有关我如何调试此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:17:58.300

这可能是因为您的服务器软件收到的请求响应时间超过 10 秒。尽管您正在启动一个 rake 任务，但它仍然必须等待该`system`调用执行：如果需要一段时间，则该任务将被终止并且服务器工作人员返回到工作程序池。

在更一般的意义上，这不是在后台执行任务的适当方式。您可能想要使用[Resque](https://github.com/defunkt/resque/)或[Delayed Job](https://github.com/tobi/delayed_job/)，它们将任务排入队列并在后台为您运行它们。

# c# - 使用 xdocument 创建 xml

> ID：11831682
> 
> 赞同：2
> 
> 时间：2012-08-06T15:51:41.790
> 
> 标签：c#, xml, linq

我想创建这个结构的 xml 文件：

```
 <Devices>
   <Device Number="58" Name="Default Device" >
     <Functions>
         <Function Number="1" Name="Default func" />
         <Function Number="2" Name="Default func2" />
         <Function Number="..." Name="...." />
     </Functions>
   </Device>
 </Devices> 
```

这是我的代码：

```
document.Element("Devices").Add(
new XElement("Device",
new XAttribute("Number", ID),
new XAttribute("Name", Name),
new XElement("Functions"))); 
```

每个对象“设备”都有“功能”列表<>，我怎样才能将“功能”添加到 xml？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T15:54:43.533

> 每个对象“设备”都有“功能”列表<>，我怎样才能将“功能”添加到 xml？

真的很容易 - LINQ to XML 让这变得轻而易举：

```
document.Element("Devices").Add(
    new XElement("Device",
       new XAttribute("Number", ID),
       new XAttribute("Name", Name),
       new XElement("Functions",
           functions.Select(f => 
               new XElement("Function",
                   new XAttribute("Number", f.ID),
                   new XAttribute("Name", f.Name)))))); 
```

换句话说，您只需将您的投影`List<Function>`到`IEnumerable<XElement>`using `Select`，`XElement`其余的由构造函数完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:57:17.497

```
document.Element("Devices").Add(
new XElement("Device",
new XAttribute("Number", ID),
new XAttribute("Name", Name),
new XElement("Functions", from f in functions select new XElement("Function", new XAttribute("Number", f.Number), new XAttribute("Name", f.Name)))));

functions would be your list of functions. 
```

# css - 如何使两个按钮在一个div中分开？

> ID：11831683
> 
> 赞同：0
> 
> 时间：2012-08-06T15:51:43.283
> 
> 标签：css

这是我的两个按钮的代码：

HTML：

```
<div clas="buttons">
<a class="btn1" href="#">Ture</a>
<a class="btn2" href="#">False</a>
</div> 
```

CSS：

```
.btn1 {
margin-bottom: 30px;
margin-left: 150px;
}
.btn2 {
margin-right: 150px;
} 
```

但是，“margin-bottom:30px”属性根本不起作用。它未能垂直定位按钮。更奇怪的是，“margin-right: 150px;” 属性对我的 btn2 不起作用，两个按钮仍然彼此相邻。顺便说一句，我的 div 足够大，可以将两个按钮分开放置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T16:12:04.530

边距应仅应用于块级元素。如果您将它们应用于内联，它们会给出意想不到的结果，`<a>`默认情况下是：您可以设置填充而不是边距。并且确实按照@Mitz 正确的建议将它们颠倒过来。更正确但对初学者来说可能更困难的方法是将 转换`<a>`为块并将它们向左浮动。就我个人而言，我的 css 看起来像这样：

```
.buttons {
 padding: 30px 150px;
 overflow: hidden; /* for clearfix */
}
.btn1, .btn2 {
  display: block;
}
.btn1 {
  float: left;
}
.btn2 {
  float: right;
} 
```

这就是我解释您的代码并思考您可能想要实现的目标的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:14:31.887

这是因为自然`<a>`是内联元素。`display: block;`如果要应用边距，则需要应用它。

之后，这两个按钮将一个在另一个之上。如果您仍然希望它们彼此相邻出现，那么您应该使用`float: left;`它们。并且不要忘记应用某种`.clearfix`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:00:38.620

你应该使用 margin-top 和 margin-left，而不是 margin-bottom 和 margin-right ...

你可以使用第一个按钮的高度来按下另一个按钮，像这样

```
.btn1 { height:200px; } 
```

如果您使用边距，则应始终定义一些高度和宽度，例如

```
.btn1 { height:20px; width:100px; }
.btn2 { height:20px; width:100px; padding-top:150px; } 
```

更新：关于浮动评论-浮动将使两个按钮水平并排放置，我认为他希望它们垂直对齐

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T16:02:06.997

你可以试试 float:left; 按钮。

# c# - 根据上下文从两个不同来源返回相同类型对象的类

> ID：11831684
> 
> 赞同：0
> 
> 时间：2012-08-06T15:51:49.810
> 
> 标签：c#, design-patterns

我有两个数据库，根据上下文，我需要从其中一个中检索记录（相同类型）。我应该如何设计将从数据库中检索对象的类，有没有比将数据库连接字符串作为构造函数传递给类更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:56:50.793

如果整个实现中唯一的区别是连接字符串，我会坚持认为不需要使事情复杂化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:15:53.107

如果两个数据库都使用相同的驱动程序，我认为您正在做的事情没有任何问题。虽然实际上，我认为我会将两个连接字符串作为常量保留在您的数据访问类中，然后将一个密钥传递给该类以告诉它使用哪一个。依赖注入，虽然是一个非常酷且有用的工具，但它会用火箭筒杀死一只苍蝇。

# windows-8 - 我必须做什么才能在 Windows 8 上挂钩笔事件？

> ID：11831687
> 
> 赞同：1
> 
> 时间：2012-08-06T15:51:58.870
> 
> 标签：windows-8

是否可以使用此[示例](http://support.microsoft.com/default.aspx?scid=kb;en-us;318804)并执行相同的操作来挂钩 Windows 8 上的笔事件？我必须改变什么才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T00:03:50.787

在 Windows 8 中，您通常不应该区分 Pen、Touch 或 Mouse。有一个名为 MSPointer 的统一输入系统，您可以在 MSDN 上查看此示例以处理输入：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/JJ150606(v=win.10).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/JJ150606(v=win.10).aspx)

查看您链接的文章，您似乎想要捕获指针？这应该可以通过**CapturePointer**方法实现：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.uielement.capturepointer.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.uielement.capturepointer.aspx)

# matlab - 在 Matlab 中绘制样本的正态分布图

> ID：11831690
> 
> 赞同：5
> 
> 时间：2012-08-06T15:52:09.563
> 
> 标签：matlab, normal-distribution

我有100个采样数，我需要在matlab中绘制它们的正态分布曲线。

这些采样数据的均值和标准差可以很容易地计算出来，但是有没有绘制正态分布的函数呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T16:10:10.000

如果您有权访问 Statistics Toolbox，则该功能可以满足您的`histfit`需求：

```
>> x = randn(10000,1);
>> histfit(x) 
```

![正态分布图](../Images/e2e6579220a5022ca8847e83c7f2cca2.png)

就像使用`hist`命令一样，您还可以指定 bin 的数量，还可以指定使用哪种分布（默认情况下，它是正态分布）。

如果您没有统计工具箱，您可以使用@Gunther 和@learnvst 的答案组合来重现类似的效果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T16:01:32.817

使用[hist](http://www.mathworks.nl/help/techdoc/ref/hist.html)：

```
hist(data) 
```

它绘制数据的直方图：

![在此处输入图像描述](../Images/74b288045c1899fac3141bc0f55441e3.png)

您还可以指定要绘制的箱数，例如：

```
hist(data,5) 
```

如果您只想绘制生成的[pdf](http://en.wikipedia.org/wiki/Probability_density_function)，请使用以下方法自行创建：

```
mu=mean(data);
sg=std(data);
x=linspace(mu-4*sg,mu+4*sg,200);
pdfx=1/sqrt(2*pi)/sg*exp(-(x-mu).^2/(2*sg^2));
plot(x,pdfx); 
```

您可能可以将其覆盖在上一个`hist`图上（我认为您需要先进行缩放，pdf 在 0-1 范围内，直方图在范围内：每个 bin 的元素数）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-06T16:06:03.797

如果要为数据绘制高斯分布，可以使用以下代码，将均值和标准差值替换为从数据集中计算得出的值。

```
STD = 1;
MEAN = 2;
x = -4:0.1:4;
f = (   1/(STD*sqrt(2*pi))   )  *  exp(-0.5*((x-MEAN)/STD).^2  );

hold on; plot (x,f); 
```

此示例中的数组`x`是分布的 x 轴，因此请将其更改为您拥有的任何范围和采样密度。

如果您想在不借助信号处理工具箱的情况下对数据绘制高斯拟合，以下代码将以正确的比例绘制这样的图。只需替换`y`为您自己的数据即可。

```
y = randn(1000,1) + 2;
x = -4:0.1:6;

n = hist(y,x);

bar (x,n);

MEAN = mean(y);
STD = sqrt(mean((y - MEAN).^2));

f = (   1/(STD*sqrt(2*pi))   )  *  exp(-0.5*((x-MEAN)/STD).^2  );
f = f*sum(n)/sum(f);

hold on; plot (x,f, 'r', 'LineWidth', 2); 
```

![在此处输入图像描述](../Images/6630c40ab87038e4a672c6b95c6dd9e0.png)

# jquery - 如何使用 jQuery 按类正确过滤 div？

> ID：11831691
> 
> 赞同：1
> 
> 时间：2012-08-06T15:52:08.480
> 
> 标签：jquery, asp.net

我正在过滤一个 ASP.NET 中继器，该中继器使用 jQuery 在客户端输出超过 2000 个 div。中继器的 ItemTemplate 包含一个 div (runat="server")。在转发器 OnItemDataBound 事件中，我有一些逻辑可以根据数据应用 css 类。然后，我有一些 id 与 css 类同名的链接，因此当单击链接时，jQuery 会隐藏中继器输出的所有没有匹配 id/类组合的 div。此外，在某些情况下，div 应用了多个类。

在我单击链接以过滤 div 的前 2 次左右一切正常，但随后它被挂断，变得无响应。

jQuery：

```
$(document).ready(function () {
    $('#filters a').click(function (e) {
        e.preventDefault();
        if ($(this).attr('id') == 'all') {
            $('#divIssueMenu').children().show();
        }
        else {
            var filter = $(this).attr('id');
            $('#divIssueMenu').children().show();
            $('#divIssueMenu').children().not('.' + filter).hide();
        }
    });
}); 
```

并输出标记：

```
<div id='filters'>
    <a href='#' id="all" >All</a> | 
    <a href='#' id='filter1'>Filter 1</a> | 
    <a href='#' id='filter2'>Filter 2</a> | 
    <a href='#' id='filter3'>Filter 2</a> |
    and so on...
    <div class='clear'></div>
</div>
<div id="divIssueMenu">
    Menu

    <div id="rpMenu_divMenu_0" class="filter1">
       data here...
    </div>

    <div id="rpMenu_divMenu_1" class="filter2">
        more data...
    </div>

    <div id="rpMenu_divMenu_2" class="filter1 filter2">
        more data...
    </div>

    <div id="rpMenu_divMenu_3" class="filter1 filter2 filter3">
        more data...
    </div>

    and so on, about 2000+ records...
</div> 
```

有什么办法可以提高效率吗？是这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:05:43.140

在性能方面，我很想缓存我的项目并基于此显示或隐藏

```
var $all = $('div','#divIssueMenu');
var $filter1 = $('div.filter1','#divIssueMenu');
var $filter2 = $('div.filter2','#divIssueMenu');
var $filter3 = $('div.filter3','#divIssueMenu'); 
```

然后，您可以将过滤器放在关联数组中，以将 id 分配给正确的集合

```
var filters = {all:$all, filter1:$filter1, filter2:$filter2, filter3:$filter3} 
```

点击代码将是：

```
$('#filters a').click(function (e) {
    e.preventDefault();
    var id = $(this).attr('id');
    $all.hide();
    filters[id].show();
}); 
```

这样做的好处是不必在每次点击时评估选择器。

现场示例：http: [//jsfiddle.net/maZD7/](http://jsfiddle.net/maZD7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:15:29.700

通过在 click 事件之外执行一次来减少创建 jQuery 集合的调用次数`$('#divIssueMenu').children()`，并在事件中引用该 var（下面块中的第一行）。

然后在单击事件中，不要打开*所有*组并有选择地关闭一些组，而是使用 jQuery 的 toggle() 函数来判断每个组是否应该出现：

```
var $allGroups = $('#divIssueMenu').children();

$(document).ready(function () {
    $('#filters a').click(function (e) {
        e.preventDefault();
        if (this.id == 'all') {
            $allGroups.show();
        }
        else {
            var filter = this.id;
            $allGroups.each(function(){
                $(this).toggle($(this).hasClass(filter));
            });
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T17:19:50.770

很难说到底是什么问题，所以正如其他人所做的那样，我可以指出看起来不太理想的事情。

我喜欢浮士德对效率和可读性的回答，但[使用类来显示或隐藏会更快](https://stackoverflow.com/questions/4144947/jquery-show-vs-adding-class)。因此，不要切换，而是添加一个类或删除它：

```
var $allGroups = $('#divIssueMenu').children();

$(document).ready(function () {
    $('#filters a').click(function (e) {
        e.preventDefault();
        if (this.id == 'all') {
            $allGroups.show();
        }
        else {
            $allGroups.removeClass('visible');
            var filter = this.id;
            $allGroups.hasClass(filter).addClass('visible');
        }
    });
}); 
```

...其中 css 看起来像这样：

```
#divIssue>div {display:none;}
#divIssue>div.visible {display:block;} 
```

# file - 试图隐藏 .htaccess 文件

> ID：11831698
> 
> 赞同：3
> 
> 时间：2012-08-06T15:52:18.230
> 
> 标签：file, .htaccess, hide

我试图隐藏我的 .htaccess 文件，这样每个人都不能只在浏览器中读出它。

我的 .htaccess 文件位于此处：[http](http://businessgame.be/.htaccess) ://businessgame.be/.htaccess 如您所见，您仍然可以将其读出。

我尝试添加以下内容：

```
# secure htaccess file
<Files .htaccess>
order allow,deny
deny from all
</Files> 
```

并且

```
<FilesMatch "^\.ht">
Order allow,deny
Deny from all
</FilesMatch> 
```

但它似乎都不起作用。这真的很奇怪。我做错什么了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-16T10:12:10.147

您只需按照 .htaccess 文件的示例代码...

```
<Files ~ "^\.(htaccess|htpasswd)$">
deny from all
</Files>
<IfModule mod_rewrite.c>
RewriteEngine On
ErrorDocument 404 /404.php
</IfModule>
Options -Indexes
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(yourwebsite.com)(:80)? [NC]
RewriteRule ^(.*) http://www.website.com/$1 [R=301,L]
DirectoryIndex index.php       
order deny,allow
Header unset ETag
FileETag None

<FilesMatch "\.(jpg|png|gif|js|css|ico|swf)$">
Header set cache-Control: "max-age=572800, must-revalidate"
</FilesMatch> 
```

这对我们更有帮助......

否则它会帮助你......

```
 <Files ~ "\.html$">
Order allow,deny
Deny from all
Satisfy All
</Files>
<Files ~ "\.css$">
Order allow,deny
Deny from all
Satisfy All
</Files> 
```

否则它会运作良好..我会在我的网站上检查此代码。

```
 Options +FollowSymlinks
 # Prevent Directoy listing 
Options -Indexes
# Prevent Direct Access to files
# SEO URL Settings
RewriteEngine On
# If your opencart installation does not run on the main web folder make sure you folder it does run in ie. / becomes /shop/ 
RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

谢谢你....为你提供机会帖子...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T16:28:32.300

这是我的服务配置，它可以工作，你应该尝试同样的：

```
# secure htaccess file
    <files .htaccess>
        order allow,deny
        deny from all
    </files>
    <FilesMatch "\.(htaccess|htpasswd)$">
        Order Allow,Deny
        Deny from all
    </FilesMatch> 
```

# security - 没有安全性的 t-sql 数据库还原

> ID：11831705
> 
> 赞同：1
> 
> 时间：2012-08-06T15:52:39.920
> 
> 标签：security, tsql

有没有办法在还原时忽略数据库的安全部分（用户）？我知道有一种方法可以将它们全部编写出来，但我们正在多台开发机器上恢复生产数据库，每台机器都有我们需要保留的特定用户集。目前它们被生产用户覆盖。

[Microsoft SQL Server 2008 (SP1) 开发者版（64 位）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:21:31.550

没有办法从备份中消除安全部分。可以在执行还原之前使用 Visual Studio 2010 或更高版本进行架构比较，并从中生成脚本来进行权限更改。

请参阅[比较和同步数据库模式](http://msdn.microsoft.com/en-us/library/dd193250.aspx)。

# c# - 我想在列表框中显示一个列表

> ID：11831707
> 
> 赞同：0
> 
> 时间：2012-08-06T15:52:54.440
> 
> 标签：c#

我无法将 a 发送`List<>`到文本框，我不确定是什么问题。我已经检查过，列表中实际上有值，并且它被正确地从类转移到这个块中。

编码：

```
 public void Listtest(List<string> m_customers)
    {
        lstRegistry.Items.Clear();

        for (int index = 0; index == m_customers.Count; index++)
        {
            lstRegistry.Items.Add(m_customers[index]);
        }
    } 
```

发送`List<>`

```
 class CustomManager
{
    //private List<Customer> m_customers;
    List<string> m_customers = new List<string>();        

    public void CreateNewString(string adresslist, string emaillist, string phonelist, string namelist)
    {
        MainForm strIn = new MainForm();
        string newlist = string.Format("{0,-3} {1, -10} {2, -20} {3, -30}", namelist, phonelist, emaillist, adresslist);           
        m_customers.Add(newlist);  //líst is created.
        strIn.Listtest(m_customers);           
    }
} 
```

我只是无法让它工作，我真的被卡住了。：/

感谢任何和所有的帮助和想法！！！

//问候

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T15:55:08.747

将循环条件更改为：`index < m_customers.Count`

**编辑** 此外，您可能希望为此数据创建一个类：

```
class Person
{
    public string Name {get; set;}
    public string Address {get; set;}
    public string Email {get; set;}
} 
```

因此，您可以制作人员列表：`List<Person>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T15:56:52.007

Erno 的回答应该可以解决您的问题，但我也建议您阅读[foreach](http://msdn.microsoft.com/en-us/library/ttw7t8t6%28v=vs.71%29.aspx)。使用它会改变你的代码：

```
 for (int index = 0; index < m_customers.Count; index++)
    {
        lstRegistry.Items.Add(m_customers[index]);
    } 
```

到

```
 foreach (string cust in m_customers)
    {
        lstRegistry.Items.Add(cust );
    } 
```

我认为这更容易阅读。

# iphone - iOS 应用登录流程

> ID：11831712
> 
> 赞同：0
> 
> 时间：2012-08-06T15:53:19.307
> 
> 标签：iphone, ios, cocoa-touch, ios5, login

我正在开发我的第一个 iOS 应用程序，它允许用户登录我们网站上的帐户，并查看/添加/编辑/删除数据库中的记录。

我编写了一个基本的应用程序来处理这样的过程；

应用程序开始运行。

`checkAuth`每个视图控制器从方法中调用一个`viewWillAppear`方法。此方法获取存储在应用程序中的用户名和密码，并将它们作为请求中`GET`的变量发送到服务器`dataWithContentsOfURL`。然后检查结果`JSON`，如果响应失败，则会显示一个警报对话框，并且用户被带到另一个选项卡（我正在使用选项卡栏控制器），提示他们输入登录详细信息。

使用此方法，每次不同的视图控制器接管（我的故事板文件中的每个场景）时，都会调用 auth 方法。这似乎有点浪费。有没有更好的方法来确保用户登录凭据正确？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:57:39.310

你为什么不为此使用“通信管理”单例？它将处理与服务器进行身份验证和通信的所有任务，并且您的每个控制器都与它进行对话，而无需直接与服务器交互。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T16:05:11.570

在应用程序中存储用户名和密码是不好的做法。如果修改后端在您的控制范围内，最好对后端进行身份验证，并取回仅对该设备有用的令牌。

从这里，您将令牌与每个请求一起传递，如果后端确定您已注销，那么它应该返回一条错误消息。这样，身份验证将在临时基础上进行检查，并且仅在发送请求时进行。

我认为没有理由在每次加载视图时都这样做，除非对此有业务需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T16:13:00.200

您可能会遇到不活动会话超时：通过 NSTimer。在成功登录时设置会话超时标记（例如登录时间加上 10 分钟）。当用户使用应用程序时，不断将存储的会话超时时间更新为当前时间加上 10 分钟（使计时器无效并创建一个新计时器）。当应用程序退出或进入后台时，计时器无效。当计时器超时时，让计时器调用注销方法。

哦，不要在应用程序中存储用户名/密码。使用钥匙串加密存储它们（如果需要将它们保存在本地）。我建议只将用户名存储在本地。

# sql - 复杂查询（django ORM 或 SQL）

> ID：11831715
> 
> 赞同：1
> 
> 时间：2012-08-06T15:53:27.140
> 
> 标签：sql, django, orm

我被困在一个复杂的查询上，试图使用 Django 的 ORM。

模型.py

```
class Product(models.Model):
    deprecated = models.ForeignKey(SpecialVersion, null=True)

class Version(models.Model):
    compatible_from = models.ForeignKey(SpecialVersion)
    product = models.ForeignKey(Product)

class SpecialVersion(models.Model):
    version = models.ForeignKey(Version, null=True)
    order = models.IntegerField() 
```

要点是，产品有多个版本。其中一些版本是“特殊的”——我们通过制作一个指向“特殊”版本对象的 SpecialVersion 对象来跟踪这一点。当我们创建非特殊版本时，它必须表明与 SpecialVersion 的兼容性。也就是说，从 compatible_from 指示的 SpecialVersion 开始。产品可能会在某个特殊版本中被弃用。

现在，我希望能够在给定特定 SpecialVersion 的情况下找到合适的产品。换句话说，我想获取所有 Product 对象，其中有一个可用的版本，其 SpecialVersion 低于我给定的 SpecialVersion。此外，产品的弃用 SpecialVersion 必须为 null，或者如果不为 null，则低于给定的 SpecialVersion。

TL;DR：选择所有产品，其中给定的 SpecialVersion 在产品中最低 compatible_from SpecialVersion 和已弃用的 SpecialVersion（如果存在）之间的范围内。

编辑：示例。

产品
编号 | 弃用
0 | 无
1 | 2

版本
号 | 珠三角 | 兼容
0 | 0 | 1
1 | 0 | 2
2 | 1 | 2

特殊版本
ID | 版本 | 0
| 空 | 1
1 | 空 | 2
2 | 空 | 3
3 | 空 | 4

查询与 SpecialVersion 的兼容性将不返回任何产品，因为没有任何产品具有指定低兼容性的版本。查询 compat w/SpecialVersion 将返回所有产品，因为它们都具有分别从 SpecialVersion id=1 和 id=2 开始的兼容性。最后，查询 compat w/SpecialVersion 将仅返回产品 id=0，因为尽管这两种产品的 SpecialVersion 兼容性足够低，但对于 SpecialVersions 及更高版本，第二个产品已被弃用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:25:17.423

我相信您正在寻找的是[Django Q Object](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)。这允许您在查询中使用复杂的查找，例如“OR”语句。如果我正确理解了您的问题，那么类似的东西应该可以正常工作：

```
from django.db.models import Q
models.Product.objects.filter(Q(deprecated__isnull=True) | Q(version__compatible_from__order__lte=GIVENSPECIALVERSION)).all() 
```

其中*GIVENSPECIALVERSION*是您从代码中其他地方收到的版本顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:15:08.333

这是我最终使用的：

```
products = Product.objects.annotate(min_version=Min(version_set__compatible_from__order)).filter(min_version__lte = given_special_version).filter(Q(deprecated__isnull = True) | Q(deprecated__order__gt = given_special_version)) 
```

# java - Spring：阅读 inputStream 后如何使用@RequestBody

> ID：11831716
> 
> 赞同：1
> 
> 时间：2012-08-06T15:53:26.763
> 
> 标签：java, spring, http, rest, inputstream

我遇到了[这里](https://stackoverflow.com/questions/5806724/springs-requestbody-providing-empty-string-on-post)描述的问题，但我不清楚如何解决它。

问题是我有一个 AuthenticationProvider 必须读取请求的正文。但是，当我的控制器方法想要通过 @RequestMapping 使用该数据时，它是空的，因为 Provider 已经读取了 inputStream。

有没有办法从支持标记/重置的 Request 获取 inputReader，以便我的提供者可以在进行身份验证后简单地将流回滚到其初始状态？过滤器的默认行为是对请求对象的破坏性修改，这似乎很疯狂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T18:08:47.680

Provider 应该只在特定情况下被触发，所以它不应该影响你的整个应用程序。但是，如果您需要提供者处理的请求中的正文，那么您仍然有一个解决方法：

1.  实现一个servlet`Filter`
2.  包装请求
3.  在包装器中缓存请求正文，然后覆盖该`getInputStream()`方法以返回`ByteArrayInputStream`带有缓存的请求正文。这样它就可以被读取多次。

spring`AbstractRequestLoggingFilter`做了类似的事情并且有一个示例包装器，你可以检查它。

# javascript - jQuery Deferreds with Chained Saves，统一结果

> ID：11831718
> 
> 赞同：0
> 
> 时间：2012-08-06T15:53:38.323
> 
> 标签：javascript, jquery, jquery-deferred

我有两个对象，`ObjectA`并且`ObjectB`. 我只想`ObjectB`在`ObjectA`完成后保存，但我想返回一个包含两者结果的承诺。

这是我第一次破解它以显示我想要的功能。此功能工作正常，只是丑陋，肯定有更好的方法。

*函数`saveObjectA`和`saveObjectB`两者都返回`$.post()`承诺。*

```
saveAAndBSequentially: function () {
    var dfd = $.Deferred();
    saveObjectA().done(function () {
        saveObjectB().done(function () {
            dfd.resolve();
        }).fail(function () {
            dfd.reject(); 
        });
    }).fail(function () {
        dfd.reject(); 
    });

    return dfd.promise();
} 
```

我只是在trigger上使用`$.when`并添加一个`done`回调，但是 deferred for还不存在，所以我不相信我可以立即使用它。`saveObjectA``saveObjectB``saveObjectB``$.when`

非常感谢有关如何以更优雅的方式解决此问题的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:58:49.710

[`.pipe()`](http://api.jquery.com/deferred.pipe/)完全执行您手动编码的任务：

```
var saveAAndBSequentially = function () {
    return saveObjectA().pipe(function () {
        return saveObjectB();
    });
}; 
```

# jquery - 如何更改默认的“该字段必须是数字”

> ID：11831721
> 
> 赞同：10
> 
> 时间：2012-08-06T15:53:41.367
> 
> 标签：jquery, asp.net-mvc-3

我正在开发一个 MVC 3 应用程序。模型中的字段之一是 double 类型，定义如下：

```
 [Required(ErrorMessageResourceName = "ListingItemPriceRequired", ErrorMessageResourceType = typeof(ErrorMessages))]
    [Display(Name = "DisplayListingItemPrice", ResourceType = typeof(Display))]
    [Range(1, 500000000, ErrorMessageResourceName = "ListingItemPriceNotWithinRange", ErrorMessageResourceType = typeof(ErrorMessages))]
    public double Price { get; set; } 
```

不过，当我输入一个带有一些尾随空格（如“342”）的数字值时，我会收到默认消息“字段价格必须是一个数字”。

甚至 Price 输入字段上的验证属性也有“data-val-number”之类的东西。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-12-16T16:49:06.640

如果您可以只更改不显眼的验证方面，您可以随时提供自己的 jquery 验证属性：

```
@Html.TextBoxFor(model => model.Price, new Dictionary<string, object>() { { "data-val-number", "Price must be a valid number." } }) 
```

或者，以下更简单，因为 MVC 将属性名称中的下划线替换为破折号：

```
@Html.TextBoxFor(model => model.Price, new { data_val_number = "Price must be a valid number." }) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-05T15:40:38.440

我发现说起来更容易：

```
 [RegularExpression("([0-9]+)", ErrorMessageResourceType = typeof(ErrorMessage), ErrorMessageResourceName = "NumberInvalid")] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-06T16:12:25.077

默认消息作为字符串资源深入到框架中。它是在尝试将字符串值绑定到双精度类型时由默认模型绑定器添加的。因此，如果您想更改此默认消息，您可以编写自定义模型绑定器。这是我为具有相同问题的 DateTime 类型编写的示例：[https ://stackoverflow.com/a/7836093/29407](https://stackoverflow.com/a/7836093/29407)

# apache-poi - 在 poi excel 中显示多行富文本框

> ID：11831722
> 
> 赞同：0
> 
> 时间：2012-08-06T15:53:46.423
> 
> 标签：apache-poi

我正在使用 poi3.5 api 创建 excel 报告。现在我需要一个多行富文本框在 excel 表上。我无法找到确切的解决方案。如果有人有解决方案，请指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:43:37.003

创建一个带有锚点的文本框，你就可以开始了。以下代码将创建带有 20px 文本、无边框的文本框。

```
 HSSFPatriarch patriarch = sheet.createDrawingPatriarch();
        HSSFTextbox textbox1 = patriarch.createTextbox(new HSSFClientAnchor(0,0,1023,255,(short)4,2,(short)6,3));;
        HSSFRichTextString rt1 = new HSSFRichTextString("This is title");
        HSSFFont font = workbook.createFont();
        font.setFontHeight((short)400);
        rt1.applyFont(font);
        textbox1.setString(rt1);
        textbox1.setLineStyle(HSSFShape.LINESTYLE_NONE); 
```

需要注意的一点是，客户端锚点中的坐标有限制，这些限制是 1023 和 255。如果您不更改坐标，文本框将位于 row1,row2 和 col1,col2 之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T18:37:35.300

看看： http: [//poi.apache.org/spreadsheet/how-to.html](http://poi.apache.org/spreadsheet/how-to.html) 你可能会在那里找到答案。

# android - Android获取当前日期+指定的整数时间？

> ID：11831723
> 
> 赞同：0
> 
> 时间：2012-08-06T15:53:51.763
> 
> 标签：android

目前，我有一个由四个字符串表示的时间（示例 2328）。是否可以仅获取android当前日期+字符串中表示的时间？

这样它将以“yyyy-MM-dd HH:mm”表示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:18:23.333

这里有示例函数来格式化您喜欢的日期，希望这会有所帮助

```
public static String getFormattedDate() {
        return getFormattedDate(System.currentTimeMillis());
    }
    public static String getFormattedDate(long millis) {
        if (StringUtils.isEmpty(millis+"") || millis<=0) return "";

        return getFormattedDate(new Date(millis));
    }
    public static String getFormattedDate(Date date) {

        try {
            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss", Locale.US);
            return sdf.format(date);
        }
        catch (Exception ex) {
            return "";
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T07:11:57.547

我通过使用 set 功能做到了

```
 String time = message.substring(7, 11);
             Calendar c = Calendar.getInstance();
             c.set(Calendar.HOUR_OF_DAY,Integer.parseInt(message.substring(7, 9)));
             c.set(Calendar.MINUTE,Integer.parseInt(message.substring(9, 11)));

                SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy HH:mm");
                String formattedDate = df.format(c.getTime()); 
```

# html5boilerplate - Html5boilerplate 构建脚本不更新 SRC 属性

> ID：11831726
> 
> 赞同：1
> 
> 时间：2012-08-06T15:53:59.810
> 
> 标签：html5boilerplate, build-script

这个问题类似于[https://stackoverflow.com/questions/10316098/how-to-configure-html5boilerplate-build-script-to-get-script-src-attributes-repl](https://stackoverflow.com/questions/10316098/how-to-configure-html5boilerplate-build-script-to-get-script-src-attributes-repl)但我没有使用 php 前缀和它发生在 CSS 和 JS 上

在我的原始 html 中，我有

```
<!-- CSS concatenated and minified via ant build script-->
<link rel="stylesheet" href="css/style.css">
<!-- end CSS--> 
```

和

```
<!-- scripts concatenated and minified via build script -->
<script src="js/plugins.js"></script>
<script src="js/script.js"></script>
<!-- end scripts --> 
```

成功构建后，css 和 js 文件夹有一个新的缩小并重命名的 .css 和 .js 文件，但 html 具有相同的 src=""s 只是没有注释。

更糟糕的是，modernizr-2.0.6.min.js 文件没有被复制到发布文件夹，这应该是因为它没有连接到例如 fe30b2e.js 文件（因为它在标题中，而其余的 js 在末尾）

publish/css 文件夹有一个 a109b0e.css 缩小文件和一个看起来不正确的原始 style.css 文件的副本。

我正在使用最新版本的构建脚本（我猜测单击 GitHub 中的 ZIP 按钮会下载最新版本）和 OS X 10.6.8

更新：我尝试针对干净且刚刚下载的样板版本运行构建脚本，同样的情况发生了，src 属性没有更新，所以我猜构建脚本中存在错误。

# java - 这个 ContentValues 的重复实例是多余的吗？

> ID：11831730
> 
> 赞同：1
> 
> 时间：2012-08-06T15:54:29.920
> 
> 标签：java, android, android-contentprovider

在[这个 NotePadProvider 示例代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.3.4_r1/com/example/android/notepad/NotePadProvider.java#NotePadProvider.insert%28android.net.Uri,android.content.ContentValues%29)中，我注意到`ContentValues`参数是重复的，即使它不为空：

```
ContentValues values;
if (initialValues != null) {
    values = new ContentValues(initialValues);
} else {
    values = new ContentValues();
} 
```

从表面上看，这看起来是多余的。看起来只写会更有效：

```
ContentValues values;
if (initialValues != null) {
    values = initialValues;
} else {
    values = new ContentValues();
} 
```

但这不是样本作者选择做的事情，我的问题是**为什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:32:49.793

它们不是等价的。原始代码创建了“initialValues”的副本，然后该方法继续修改​​变量中的新实例`value`。这样，提供给该方法的`ContentValues`实例**不会**被该方法修改。`insert`

 **您的版本确实修改了原始对象，这可能会在程序的其他区域产生不必要的副作用。**

# vb.net - 文件被写保护无法保存

> ID：11831731
> 
> 赞同：1
> 
> 时间：2012-08-06T15:54:37.063
> 
> 标签：vb.net, visual-studio-2010, version-control

我正在使用 Visual Web Developer 2010 Express，我刚刚将我的文件添加到 Visual SourceSafe。当我尝试在 Visual Web Developer 中保存文件时，它显示“无法保存该文件，因为它已被写保护。” 它给了我覆盖的选项，但我不知道它是否应该这样工作。理想情况下，我将单击保存，它将各种版本保存到源安全中。我以前从未使用过源安全；我以前的源代码控制系统刚刚启用是单击“提交”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:02:47.137

源代码控制下的文件被标记为只读以防止意外更改文件，并且仅在您签出以进行编辑时才可写入。

因为在您进行编辑时没有与 Visual Studio Express 2010 版本的源代码管理集成，所以文件**不会**自动从源代码管理中签出，因此它仍然是只读的，从而导致您在此处遇到问题。

您要么需要在编辑项目之前签出文件，要么强制覆盖，然后在事件发生后签出文件。两者都不是理想的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:00:10.677

当您将项目添加到源代码控制（例如 Source Safe）时，它会将它们标记为`Read Only`确保它们不是由未签出文件的任何人编写的。

您需要签出要编辑的文件，然后对其进行编辑、保存，然后再将其签入。

Source Safe 相当陈旧，不再由 Microsoft 真正维护 - 考虑使用更现代的东西，例如[Subversion](http://subversion.apache.org/)或[Git](http://git-scm.com/)。

# xslt - WSO2 ESB：XSL 转换导致 WstxUnexpectedCharException

> ID：11831733
> 
> 赞同：0
> 
> 时间：2012-08-06T15:54:41.880
> 
> 标签：xslt, wso2, esb, wso2esb

我有一个代理，它需要对来自服务的输出消息进行 XSL 转换。我附上了序列文件和 XSL 文件（在 synaptic-configs/local-entries 中）。

感谢您是否可以提示我可能出错的地方。

这是序列文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<sequence xmlns="http://ws.apache.org/ns/synapse" name="EmpMergeOutSeq1" trace="enable" statistics="enable">
    <log level="full">
        <property name="sequence" value="Final Transform using XSLT - begin"/>
    </log>
    <xslt key="getEmployeeByIdResponseXlt"/>
    <send/>
</sequence> 
```

这是 XSL 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<localEntry xmlns="http://ws.apache.org/ns/synapse" key="getEmployeeByIdResponseXlt">
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ax21="http://domain.hrapp.gunith/xsd" xmlns:ns="http://service.hrapp.gunith" xmlns:fn="http://www.w3.org/2005/02/xpath-functions" version="2.0" exclude-result-prefixes="ns fn">
        <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
        <xsl:template match="/">
            <xsl:apply-templates select="//ns:getEmployeeByIdResponse"/>
        </xsl:template>
        <xsl:template xmlns:ns="http://samples.esb.wso2.org" match="ns:getEmployeeByIdResponse">
            <ns1:getEmployeeByIdResponse xmlns:ns1="http://service.proxy.gunith">
                <ns1:return xmlns:ax22="http://domain.proxy.gunith/xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ax22:Employee">
                    <ax22:dob>
                        <xsl:value-of select="ns:return/ax21:dob"/>
                    </ax22:dob>
                    <ax22:firstName>
                        <xsl:value-of select="ns:return/ax21:firstName"/>
                    </ax22:firstName>
                    <ax22:id>
                        <xsl:value-of select="ns:return/ax21:id"/>
                    </ax22:id>
                    <ax22:lastName>
                        <xsl:value-of select="ns:return/ax21:lastName"/>
                    </ax22:lastName>
                    <ax22:middleName>
                        <xsl:value-of select="ns:return/ax21:middleName"/>
                    </ax22:middleName>
                </ns1:return>
            </ns1:getEmployeeByIdResponse>
        </xsl:template>
    </xsl:stylesheet>
</localEntry> 
```

以下是日志条目（显示错误和传递的实际消息）：

```
[2012-08-04 11:35:44,966]  INFO - LogMediator To: /services/MergedBasicEmployeesProxy.MergedBasicEmployeesProxyHttpSoap12Endpoint, WSAction: urn:getEmployeeById, SOAPAction: urn:getEmployeeById, MessageID: urn:uuid:c80fb5a4-41e4-4de4-924d-a18af37b5056, Direction: request, sequence = inSequence - request for EmpMergeProxy, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body><p:getEmployeeById xmlns:p="http://service.proxy.gunith"><!--0 to 1 occurrence--><xs:args0 xmlns:xs="http://service.proxy.gunith">1</xs:args0></p:getEmployeeById></soapenv:Body></soapenv:Envelope>
[2012-08-04 11:35:44,970]  INFO - LogMediator To: /services/MergedBasicEmployeesProxy.MergedBasicEmployeesProxyHttpSoap12Endpoint, WSAction: urn:getEmployeeById, SOAPAction: urn:getEmployeeById, MessageID: urn:uuid:c80fb5a4-41e4-4de4-924d-a18af37b5056, Direction: request, sequence = inSequence - request for EmpMergeProxy, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body><sam:getEmployeeById xmlns:sam="http://service.hrapp.gunith">
                <sam:args0>1</sam:args0>
            </sam:getEmployeeById></soapenv:Body></soapenv:Envelope>
[2012-08-04 11:35:45,504]  INFO - LogMediator To: http://www.w3.org/2005/08/addressing/anonymous, WSAction: , SOAPAction: , MessageID: urn:uuid:ea979246-adbc-494d-bd55-e3ed25171984, Direction: response, sequence = Final Transform using XSLT - begin, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body><ns:getEmployeeByIdResponse xmlns:ns="http://service.hrapp.gunith"><ns:return xmlns:ax21="http://domain.hrapp.gunith/xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ax21:Employee"><ax21:dob>1984-03-01</ax21:dob><ax21:firstName>Gunith</ax21:firstName><ax21:id>1</ax21:id><ax21:lastName>Dev</ax21:lastName><ax21:middleName>E</ax21:middleName></ns:return></ns:getEmployeeByIdResponse></soapenv:Body></soapenv:Envelope>
[2012-08-04 11:35:45,505]  INFO - LogMediator To: http://www.w3.org/2005/08/addressing/anonymous, WSAction: , SOAPAction: , MessageID: urn:uuid:2eb104c0-53c9-4155-8fef-99e7600b7559, Direction: response, sequence = Final Transform using XSLT - begin, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body><ns:getEmployeeByIdResponse xmlns:ns="http://service.hrapp.gunith"><ns:return xmlns:ax21="http://domain.hrapp.gunith/xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ax21:Employee"><ax21:dob>1984-03-01</ax21:dob><ax21:firstName>Gunith</ax21:firstName><ax21:id>1</ax21:id><ax21:lastName>Dev</ax21:lastName><ax21:middleName>E</ax21:middleName></ns:return></ns:getEmployeeByIdResponse></soapenv:Body></soapenv:Envelope>
[2012-08-04 11:35:45,528] ERROR - XSLTMediator Unable to perform XSLT transformation using : Value {name ='null', keyValue ='getEmployeeByIdResponseXlt'} against source XPath : s11:Body/child::*[position()=1] | s12:Body/child::*[position()=1]
org.apache.axiom.om.OMException: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character '1' (code 49) in prolog; expected '<'
 at [row,col {unknown-source}]: [1,1]
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:296)
    at org.apache.axiom.om.impl.llom.OMDocumentImpl.getOMDocumentElement(OMDocumentImpl.java:109)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.getDocumentElement(StAXOMBuilder.java:570)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.getDocumentElement(StAXOMBuilder.java:566)
    at org.apache.synapse.util.jaxp.StreamResultBuilder.getNode(StreamResultBuilder.java:87)
    at org.apache.synapse.mediators.transform.XSLTMediator.performXSLT(XSLTMediator.java:298)
    at org.apache.synapse.mediators.transform.XSLTMediator.mediate(XSLTMediator.java:191)
    at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:60)
    at org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMediator.java:114)
    at org.apache.synapse.core.axis2.Axis2SynapseEnvironment.injectMessage(Axis2SynapseEnvironment.java:229)
    at org.apache.synapse.core.axis2.SynapseCallbackReceiver.handleMessage(SynapseCallbackReceiver.java:370)
    at org.apache.synapse.core.axis2.SynapseCallbackReceiver.receive(SynapseCallbackReceiver.java:160)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.synapse.transport.nhttp.ClientWorker.run(ClientWorker.java:275)
    at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:173)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:26:31.167

我以前遇到过类似的问题。通常是在 XSLT 转换期间处理名称空间时。WSO2 默认使用 xalan.jar 作为 xml 解析器，它必须被 saxon9he.jar 替换。以下 URL 供您参考[“如何更改 XSLT 处理器”](http://heshans.blogspot.in/2011/07/changing-underlying-xslt-processor-of.html)

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:40:09.090

问题出在您的 xslt 脚本中。您可以尝试在 eclipse/任何其他 xslt 处理器中将soap消息作为此 xslt 脚本的输入 xml 并运行。如果脚本正确，您将获得输出，否则不会。 .

# node.js - Node.js/Socket.io/Passport.js 注销问题

> ID：11831736
> 
> 赞同：1
> 
> 时间：2012-08-06T15:54:55.037
> 
> 标签：node.js, socket.io, passport.js

我正在使用[Node.js](http://nodejs.org/)（[Express](http://expressjs.com/)框架）创建一个网站并使用[Passportjs](http://passportjs.org/)进行身份验证。我使用[socket.io](http://socket.io/)在客户端和服务器之间进行通信。我的网站显示哪些用户在线。我想要的是当客户关闭他的标签或浏览器本身而不注销网站时，我希望用户在`'disconnect'`事件触发时从网站注销。代码片段应该看起来像在`server`一边。

```
io.sockets.on('connection', function (socket) {
socket.on('disconnect', function()  {
    console.log("|||||| DISCONNECTED ||||||");
    //LOGOUT USER CODE
});
}); 
```

我正在使用 Passportjs 的本地策略。它在 CouchDB 数据库中搜索用户，如果用户名/密码组合正确，则登录。

我的解决方案显然不起作用：

```
app.configure(function() {
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(express.logger());
  app.use(express.cookieParser());
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.static(__dirname + '/'));
  app.use(express.session({ secret: 'keyboard cat'}));
  // Initialize Passport!  Also use passport.session() middleware, to support
  // persistent login sessions (recommended).
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);

  //a new custom middleware to logout the user when the pathname is '/exit'      

  app.use(function(req, res, next)  {
      var pathname = url.parse(req.url).pathname;
      if(pathname == '/exit')
        req.logout();
      next();
  });
}); 
```

我使用了一个像这样定义的节点模块`xmlhttprequest`来创建 http 请求。

```
var XMLHttpRequest = require("xmlhttprequest").XMLHttpRequest; 
```

然后在我的套接字的断开连接事件中，我添加了以下几行。

```
io.sockets.on('connection', function (socket) {
socket.on('disconnect', function()  {
    console.log("|||||| DISCONNECTED ||||||");
    var xhr = new XMLHttpRequest();      
    xhr.open("GET", "http://localhost:3000/exit");
    xhr.send();
});
}); 
```

这不起作用，并且在`disconnect`事件触发时用户不会注销。`|||||| DISCONNECTED ||||||`我可以在控制台上看到这条消息。此外，如果我`http://localhost:3000/exit`在浏览器地址栏中输入，然后按 Enter，我会看到以下消息：`Cannot GET /exit`在我的浏览器中，但在按回并刷新页面时，用户已注销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:12:38.850

这段代码不好。

```
 app.use(function(req, res, next)  {
      var pathname = url.parse(req.url).pathname;
      if(pathname == '/exit')
        req.logout();
        //try adding this line, so that it doesn't just show the "can't retrieve"
        res.end('<html><head>logged out</head><body>logged out</body></html>');
      next();
  }); 
```

编辑：

```
socket.on('disconnect', function()  {
    console.log("|||||| DISCONNECTED ||||||");
    var xhr = new XMLHttpRequest();      
    //this won't work, don't do this
    xhr.open("GET", "http://localhost:3000/exit");
    xhr.send();
}); 
```

相反，这样做：

```
socket.on('disconnect', function()  {
    console.log("|||||| DISCONNECTED ||||||");
    user.logout();
}); 
```

我建议此时从页面进行重定向，退出，并让 exit 将另一个重定向发送到另一个页面。我就是这样做的。

# java - 为什么枚举是单例的最佳实现？

> ID：11831737
> 
> 赞同：15
> 
> 时间：2012-08-06T15:54:59.577
> 
> 标签：java, design-patterns, enums, singleton

我读了 Effective Java 并且那里说单例最好使用`enum`.

> 这种方法在功能上等同于公共字段方法，只是它更简洁，免费提供序列化机制，并提供针对多次实例化的铁定保证，即使面对复杂的序列化或反射攻击。虽然这种方法尚未被广泛采用，但单元素枚举类型是实现单例的最佳方式。

尽管如此，这似乎是实现动态序列化和真正的单实例的权衡，但是您失去了经典单例的更友好的 OOP 方法。枚举不能被继承，只能实现一个接口，如果你想提供一个骨架类，你需要创建一个帮助类。

那么，除了上述原因之外，我们为什么要接受枚举作为单例的最佳实现呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-06T21:03:46.610

> 枚举不能被继承

它是单例枚举中最好的部分之一。

**如果你可以从单例继承，它就不再是单例了。**

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-06T16:38:22.347

> 这似乎是实现动态序列化的权衡

对我来说，写类似的东西要简单得多

```
enum Singleton {
    INSTANCE;
} 
```

如果您需要编写更多代码或引入复杂性，那么就这样做，但恕我直言，这很少需要。

> 你失去了经典单例的更友好的 OOP 方法。

我发现使用字段更简单。

> 枚举不能被继承，

没错，但拥有多个单身人士本身就是值得怀疑的。枚举可以从允许您将一种实现交换为另一种实现的接口继承。

> 如果你想提供一个骨架类，你需要创建一个辅助类

助手类没有任何状态。骨架类可能具有某种状态，在这种情况下您需要委托。

顺便说一句：您可以`enum`用于帮助类

```
enum Helper {;
    public static my_static_methods_here;
} 
```

> 为什么我们应该接受枚举作为单例的最佳实现

我会遵循[YAGNI](http://c2.com/xp/YouArentGonnaNeedIt.html)原则。只开发你需要的东西，而不是你想象的你可能需要的东西。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-06T16:39:24.577

前段时间在 stackoverflow 上也有过类似的讨论：[Java 中实现单例模式的有效方法是什么？](https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java)

接受的答案提供了关于该主题的良好链接：

> Joshua Bloch 在 Google I/O 2008 上的[Effective Java Reloaded](http://sites.google.com/site/io/effective-java-reloaded)演讲中解释了这种方法：[链接到视频](http://www.youtube.com/watch?v=pi_I7oD_uGI#t=28m50s)。另请参阅他的演示文稿的幻灯片 30-32 ( [effective_java_reloaded.pdf](http://sites.google.com/site/io/effective-java-reloaded/effective_java_reloaded.pdf) )：

要点是很难编写一个真正的单例。枚举值保证只存在一次，如[Java 语言规范 §8.9](https://docs.oracle.com/javase/specs/jls/se11/html/jls-8.html#jls-8.9)中所定义：

> 枚举类型除了由其枚举常量定义的实例外，没有其他实例。

# objective-c - tabBarController 中一个选项卡的两个 ViewController

> ID：11831741
> 
> 赞同：0
> 
> 时间：2012-08-06T15:55:20.653
> 
> 标签：objective-c, ios, uitabbarcontroller, uitabbaritem

我有一个 tabBarController（我使用没有 Interface Builder 的代码创建的）：

```
self.tabBarController = [[[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:firstController,      secondController, thirdController, nil]; 
```

当我在第二个选项卡（secondController）中并按下一个按钮时：

```
UIButton *button1; 
```

我想传递给另一个视图（例如 seconddController）：

```
- (void)actio:(UIButton *)button1
{
seconddController *scdd = [[seconddController alloc] init ];
[self presentModalViewController:scdd animated:YES];
} 
```

但问题是我想留在第二个选项卡上而不是视图占据所有空间，那么如何将 seconddCntroller 添加到第二个选项卡以代替 secondController？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:06:40.833

如果我理解正确，您需要`secondController`由导航控制器管理，以便结构为：

```
self.tabBarController.viewControllers = [NSArray arrayWithObjects:firstController,      secondNav, thirdController, nil]; 
```

然后你就可以使用`pushViewController:animated:`来显示`scdd`了`secondController`。

# jquery - jQuery UI DatePicker 给我一个错误

> ID：11831749
> 
> 赞同：0
> 
> 时间：2012-08-06T15:55:39.710
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在尝试使用 jQueryUI 中的 DatePicker，但收到此错误并且不知道是什么原因。这是错误：

> TypeError: $(a)​​.zIndex is not a function [http://cmv.loc/addons/shared_addons/themes/comvivem/js/jquery.ui.datepicker.min.js](http://cmv.loc/addons/shared_addons/themes/comvivem/js/jquery.ui.datepicker.min.js) 第5行

我正在使用其他库作为 jQuery 工具和基础。您可以在[http://comvivem.treswd.com/net/](http://comvivem.treswd.com/net/)下进行测试，以 demo/demo123 身份登录并转到博客，然后尝试在表单末尾的“Nueva entrada”下添加一个新条目，您会看到一个名为“ Fecha”这是触发 DatePicker 功能并导致问题的原因。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:30:59.480

您可能需要推出自己的 jQuery UI 构建，而不是链接到 Google 的 CDN。试着去[这里](http://jqueryui.com/download)选择 Core、Widget 和 DatePicker（或者如果你需要的话）。将新构建放置到位（CSS，js），看看会发生什么。

# google-maps - 如何从普通的非 GAS 网络应用程序访问/运行 Google Apps 脚本 (GAS) 函数？

> ID：11831751
> 
> 赞同：0
> 
> 时间：2012-08-06T15:55:48.697
> 
> 标签：google-maps, google-maps-api-3, google-apps-script, google-sheets, google-drive-api

这是我上一个问题中 Google Maps V3 Full Integration API 问题的替代方案。

我想让用户能够单击一个按钮，然后在他们的 Google Drive 中创建一个新的 Google 电子表格，允许他们将在使用我的映射应用程序时创建的数据 (JSON) 保存到新的电子表格。

稍后，用户可以转到他们的 Google Drive，打开电子表格，单击菜单，打开我的地图应用程序，并使用电子表格中的数据填充我的地图应用程序。用户可以在电子表格或地图中编辑数据，并且更改是双向的。

基本上，我正在寻找谷歌地图 V3 API 和谷歌电子表格之间的两种数据绑定方式，这对于非技术用户来说非常容易。

看来我应该能够编写一个 GAS 函数并从我的标准网页访问它。你是怎样做的？

如果我可以将我的 Maps V3 API 应用程序转换为 GAS，那么问题将是微不足道的，但在此之前，地图和 Google Drive 之间的替代工作流程对于允许用户保存/协作他们的工作非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:02:54.780

如果您将 Apps 脚本项目部署为[Web 应用程序](https://developers.google.com/apps-script/execution_web_apps)，您可以让您的应用程序通过 HTTP 向它发出请求。doGet() 和 doPost() 处理程序都可以读取请求参数，并且使用[ContentService](https://developers.google.com/apps-script/class_contentservice)您可以返回 JSON 或 XML 数据。同样，在 Apps Script 中，您可以使用[UrlFetchApp](https://developers.google.com/apps-script/class_urlfetchapp)向您的应用程序发出 HTTP 请求。

# computer-vision - 刚性运动估计

> ID：11831758
> 
> 赞同：0
> 
> 时间：2012-08-06T15:56:10.107
> 
> 标签：computer-vision

现在我拥有的是 3D 点集以及相机的投影参数。给定通过使用相机和变换相机（通过旋转和平移）从 3D 点投影的两个 2D 点集，应该有一种直观的方法来估计相机运动......我阅读了 Zisserman 的书“Muliple view Geometry in计算机视觉”，但我仍然没有得到解决方案..

有什么提示吗，在这种情况下如何估计刚体运动？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:27:23.577

您正在寻找的是 PnP 问题的解决方案。OpenCV 有一个名为[solvePnP](http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html)的函数。需要明确的是，要使其工作，您需要世界空间中的点位置、相机矩阵以及图像平面上的点投影。然后它会根据您选择的想法告诉您相机或点的旋转和平移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T06:44:51.177

除了前面的答案，Eigen 还实现了 Umeyama 的方法，用于估计两组 3d 点之间的刚性变换。您可以使用它来获得初始估计，然后使用优化算法对其进行优化，并考虑 3d 点在图像上的投影。例如，您可以尝试最小化第一张图像上的 2d 点和 3d 点的投影之间的重投影误差，然后您使用之前估计的变换将它们从一个相机的参考系带到另一个相机的参考系。您可以通过两种方式执行此操作，使用变换及其逆变换，并尝试最小化双向重投影误差。我推荐 Andrew Howard 的论文“自主地面机器人的立体视觉里程计”，

# mysql - 连接子句中的 Rails ActiveRecord 转义变量

> ID：11831761
> 
> 赞同：8
> 
> 时间：2012-08-06T15:56:15.953
> 
> 标签：mysql, sql, ruby-on-rails, ruby-on-rails-3, activerecord

此查询有效，但对 SQL 注入完全开放：

```
products = Product.find(pids,
  :select => 'products.*, P.code',
  :joins => "left join product_dist_match P on
    (P.pid = products.pid and P.cid = #{cid})",
) 
```

如何正确转义 cid 变量？该参数允许为此目的`conditions`使用格式，但不允许。`['foo = ?', bar]``joins`

我不想使用`find_by_sql`，因为那时我需要添加属于模型默认范围（不会是 DRY）的连接和条件。

**编辑：**我的表结构本质上是这样的：

```
products: pid (primary key)
product_dist_match: pid, cid, code
customers (not used in the query): cid (primary key) 
```

请注意，这是一个只读数据库，Rails 仅参与有限。我不打算为所有表设置模型；我只想像上面描述的那样做一个简单的查询，而不会让自己受到 SQL 注入攻击。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-06T16:58:31.807

我找到的答案是`.sanitize`在模型上使用方法：

```
products = Product.find(pids,
  :select => 'products.*, P.code',
  :joins => 'left join product_dist_match P on
    (P.pid = products.pid and P.cid = ' + Product.sanitize(cid) + ')',
) 
```

如果您找到更好的解决方案，请发布！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-20T21:43:43.960

这似乎更像是你想要做的。

```
products = Product.find(pids,
    :select => 'products.*, P.code',
    :joins => sanitize_sql_array [
      'left join product_dist_match P on P.pid = products.pid and P.cid = ?', 
       cid
    ] 
```

# java - 如何通过反射 Java 使用方法

> ID：11831765
> 
> 赞同：0
> 
> 时间：2012-08-06T15:56:29.557
> 
> 标签：java, android, reflection

我正在尝试使用反射而不是包含 jar 文件。当我不使用 jar 代码时，我想这样做以减少我的 apk 大小......但如果我包含代码，我必须包含 jar。话虽如此，我正在努力掌握反思，但做得不好。

我有这段代码可以查看可用的方法（并且有效）：

```
//initialize method params
Class[] paramInitialize = new Class[2]; 
paramInitialize[0] = Activity.class;
paramInitialize[1] = String.class;

try {
    Logger.i(DEBUG_TAG, "try statement");
    Class <?> tremorVideoCls = Class.forName("com.tremorvideo.sdk.android.videoad.TremorVideo");
    Class <?> tremorSettingsCls = Class.forName("com.tremorvideo.sdk.android.videoad.Settings");
    Object object = tremorVideoCls.newInstance();
    String apkName = this.getPackageManager().getApplicationInfo(this.getPackageName(), 0).sourceDir;
    loader = new dalvik.system.PathClassLoader(apkName, ClassLoader.getSystemClassLoader());
    tremorVideoCls = loader.loadClass("com.tremorvideo.sdk.android.videoad.TremorVideo");
    Method m[] = tremorVideoCls.getMethods();
    Method declaredM[] = tremorVideoCls.getDeclaredMethods();
    for (int i = 0; i < m.length; i++) {
        Logger.i(DEBUG_TAG, "getMethods is " + m[i].toString());
    }
    Field []field = tremorSettingsCls.getFields();
    for (int i = 0; i < field.length; i++) {
        Logger.i(DEBUG_TAG, "getFields is " + field[i].toString());
    }
    Method tremorInitialize = tremorVideoCls.getMethod("initialize", paramInitialize);
    Logger.i(DEBUG_TAG, "tremorInitialize is " + tremorInitialize.toGenericString());
//  tremorInitialize.invoke(object, this, ACCUWX.TREMOR_ADSPACE_TEST);

    } catch (ClassNotFoundException e) {
    } catch (NoSuchMethodException x) {
 ... 
```

但是，我得到一个引发异常的 logcat 错误：

```
08-06 11:48:51.134: W/System.err(11688): java.lang.NoSuchMethodException: initialize [class android.app.Activity, class java.lang.String] 
```

这是打印出该方法的 logcat：

```
08-06 11:48:51.118: I/Flagship/MainActivity(11688): getMethods is public static void com.tremorvideo.sdk.android.videoad.TremorVideo.initialize(android.content.Context,java.lang.String) 
```

我不确定接下来会尝试什么......非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:13:07.713

如果您尝试调用的方法是

```
public static void com.tremorvideo.sdk.android.videoad.TremorVideo.initialize(android.content.Conte‌​xt,java.lang.String) 
```

错误是

```
08-06 11:48:51.134: W/System.err(11688): java.lang.NoSuchMethodException: initialize [class android.app.Activity, class java.lang.String] 
```

它清楚地表明该方法期望`android.content.Conte‌​xt`但您传递的是什么`android.app.Activity`

在通话中

```
tremorInitialize.invoke(object, this, ACCUWX.TREMOR_ADSPACE_TEST); 
```

而不是传递`this`你应该传递一个`android.content.Conte‌​xt`.

希望这可以帮助！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T08:51:18.710

问题不在于方法的调用，而是对检索方法的调用。
因为 Class[] 是用 Activity.class 初始化的，所以会搜索带有签名
void initialize(Activity activity, String string) 的方法。

这种方法不存在。
所以应该是

```
 paramInitialize[0] = Context.class; 
```

找到方法

```
initialize(Contex ctxt, String arg). 
```

# facebook - 社交媒体分享按钮不会重定向回粉丝页面 iframe 产品页面

> ID：11831766
> 
> 赞同：0
> 
> 时间：2012-08-06T15:56:32.850
> 
> 标签：facebook, iframe, facebook-like, addthis

我的一个朋友在我的粉丝页面上添加了一个使用 iframe 的商店……基本上是把一个网站放在一个 facebook 框架内。它有一个 SSL 证书。我们使用 addthis.com 代码向每个产品页面添加了类似按钮的社交媒体。见下文。下面的代码适用于产品页面，但问题是当您将其分享到 facebook 或 google+ 时，为该产品提供的链接在单击时会将用户带到 zencart 所在的托管 URL。

```
<link rel="image_src" href="<?php echo "http://" . $_SERVER['HTTP_HOST'] . "zencart1/images/" . $products_image; ?>" />

<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_google_plusone" glusone:size="medium"></a>
<a class="addthis_button_pinterest_pinit"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true}; </script>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-501a85992fdcfe86"></script>
<!-- AddThis Button END --> 
```

粉丝专页：[https](https://www.facebook.com/TracyLoganDesigns) ://www.facebook.com/TracyLoganDesigns 转到围巾类别 - 这是我有一个测试产品的地方。当您在 Facebook 等上共享产品测试链接后单击它时，它会转到以下链接：http: [//firetreegraphics.com/zencart1...9#.UBrFH01lTjY](http://firetreegraphics.com/zencart1...9#.UBrFH01lTjY)

如何设置它以使其返回到粉丝页面 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:51:07.043

> 如何设置它以使其返回到粉丝页面 url？

通过不喜欢/分享托管在您服务器上的产品页面，而是您`/page/app`组合的 Facebook URL。

如果您想链接到Facebook 上您的应用程序内的*特定*产品页面（而不仅仅是起始页），那么您必须使用该`app_data`链接内的参数，并在[`signed_request`](https://developers.facebook.com/docs/authentication/signed_request/)您的应用程序加载到Facebook 上的 iframe。

# objective-c - 正确使用变量名

> ID：11831767
> 
> 赞同：0
> 
> 时间：2012-08-06T15:56:33.360
> 
> 标签：objective-c, xcode, variables

这是一个纯理论问题：

我有一个有变量的类：**varX**。我有一个改变这个变量的方法。Xcode，自动完成建议：

```
-(void)setVarX:(float)varX; 
```

在实现中，当我编写实例方法时，Xcode 会告诉我一个警告：

> “'varX' 的本地声明隐藏实例变量”

方法：

```
-(void)setVarX:(float)varX {

    varX = varX;

} 
```

所以，为了解决，我在综合中使用了下划线；

```
@synthesize varX = _varX; 
```

方法是：

```
-(void)setVarX:(float)varX {

    _varX = varX;

} 
```

以这种方式在变量前使用下划线是否合适？否则如何使用 Xcode 建议的方法名称？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:59:57.280

使用`_varX`是正确的方法。如果您省略该`@synthesize`行（从 Xcode 4.4 开始），它将自动生成一个具有该名称的实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:59:46.640

Xcode 4.4（及更高版本）`@synthesize`在您不使用`@dynamic`. 自动合成使用下划线，所以苹果似乎希望这是一个约定。

首先，我不喜欢这个想法，但现在我明白为什么它很方便了。这些属性的那些变量名称在更多方法中不再“保留”（在其他情况下我从不使用下划线）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:30:24.863

请注意，更改实例变量名称会有效地更改类，而更改方法参数名称不会。

因此，我更喜欢反过来做：

-(void)setVarX:(float)_varX {

```
varX = _varX; 
```

}

这样就不需要更改作为类外部可见接口一部分的实例变量名称。

# r - 提取knn回归模型

> ID：11831768
> 
> 赞同：1
> 
> 时间：2012-08-06T15:56:35.223
> 
> 标签：r, regression, knn

我为 R 找到了关于“k Nearest Neighbor Regression”的包。我尝试了这个例子（见下文），但我想做的是保存创建的回归模型（pac.knn）。如何保存或提取模型并将其应用到 R 之外？

```
if(require(chemometrics)){
data(PAC);
pac.knn<- knn.reg(PAC$X, y=PAC$y, k=3);
pac.knn.VR<- knn.reg(PAC$X, y=PAC$y, k=3, algorith="VR");

plot(PAC$y, pac.knn$pred, xlab="y", ylab=expression(hat(y)))
points(PAC$y, pac.knn.VR$pred, col=2, pch=3);} 
```

# java - 在哪些情况下使用 getApplicationContext() 函数

> ID：11831774
> 
> 赞同：3
> 
> 时间：2012-08-06T15:56:57.557
> 
> 标签：java, android, eclipse

我正在关注一些学习 android 的教程，但问题是它们不包含所有细节。

具体来说，如果能对`getApplicationContext()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:05:20.970

您可以将 a`Context`视为应用程序资源（即`res`文件夹中的所有内容）和 Android 运行时的句柄。`Activity`, `Service`,等类`Application`继承自`Context`, 等等。

`Activity`通常，只要需要 a ，您就会传入 current `Context`，因为 Activity 继承自 Context。

当需要 a 时，您还将找到有关使用`getApplicationContext()`而不是您的活动的信息`Context`。这通常是为了防止任何需要 Context 的代码不必要地持有对您的 Activity 的引用，在最坏的情况下，这可能会阻止它被垃圾收集（`Application`在那种情况下传入并不是一个真正的大问题，因为它是预期的待很长时间）。

但是，在某些情况下，方法的参数是 type `Context`，但`Activity`实际上是必需的。使用`startActivity()`是我相信的一个例子（如果我错了，请纠正我）。

# erlang - Erlang：更快的方法来求和二进制中的字节

> ID：11831777
> 
> 赞同：3
> 
> 时间：2012-08-06T15:57:04.983
> 
> 标签：erlang

下面是添加二进制字节的简单实现。根据 eprof 的说法，它很慢（大约需要 10% 的总时间 - 主要是因为很多调用`binary:part/3`）。

如何优化？

```
calc_checksum(Packet) when is_binary(Packet)->  
    calc_checksum(Packet, 0).

calc_checksum(<<>>, Acc) -> 
    Acc band 16#FFFF;

calc_checksum(Packet, Acc) when is_binary(Packet) ->        
    W = binary:decode_unsigned(binary:part(Packet, 0, 2), little),
    NextAcc = Acc + W,
    NextBytes = binary:part(Packet, byte_size(Packet), -(byte_size(Packet)-2)),
    calc_checksum(NextBytes, NextAcc). 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T00:47:35.477

一个更优雅的解决方案是：

```
calc_checksum(<<W:16/little,Rest/bytes>>, Acc0) ->
    Acc1 = Acc0 + W,
    calc_checksum(Rest, Acc1);
calc_checksum(<<>>, Acc) -> Acc band 16#FFFF. 
```

如果二进制文件包含奇数字节，此代码将生成错误。使用模式匹配通常会提供更好更优雅的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T17:19:44.080

使用模式匹配而不是调用函数`binary`似乎使我在 shell 中尝试的伪基准的速度提高了一倍。像这样的东西：

```
calc_checksum(Packet, Acc) when is_binary(Packet) ->
    <<W:16/little, NextBytes/binary>> = Packet,
    NextAcc = Acc + W,
    calc_checksum(NextBytes, NextAcc). 
```

（我可能是错的，但是如果设置`NextAcc`为`(Acc + W) band 16#FFFF`，则应该得到等效的结果，如果您在非常大的二进制文件上运行它，则应该避免使用 bignums。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T21:09:09.950

[如果您一次处理多个值，您甚至可以比罗伯特的](https://stackoverflow.com/users/77617/rvirding) [解决方案](https://stackoverflow.com/a/11837875/49197)更快一点：

```
calc_checksum(<<W1:16/little, W2:16/little, W3:16/little, W4:16/little, Rest/bytes>>, Acc)->
    calc_checksum(Rest, Acc+W1+W2+W3+W4);
calc_checksum(<<W:16/little,Rest/bytes>>, Acc) ->
    calc_checksum(Rest, Acc+W);
calc_checksum(<<>>, Acc) -> Acc band 16#FFFF. 
```

# javascript - 使用 $(this) 的 Jquery 选项

> ID：11831779
> 
> 赞同：1
> 
> 时间：2012-08-06T15:57:07.513
> 
> 标签：javascript, jquery, jquery-plugins, scope

我正在尝试编写一个 jquery 插件，但我对著名的“this”有疑问。

这是自定义插件的调用：

```
$('.selector').myPlugin({
        test: $(this).attr('rel')
}); 
```

现在，在我的插件中的某个地方：

```
$.myPlugin = function (options) {
    alert(options.test);
} 
```

我的问题是：如何使用 $(this) 在插件中使用我的选择器的 Rel 属性？

前面的代码总是告诉我“this”是文档。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:03:19.177

`$(this)`不是您期望它在该对象文字中的样子。循环使用`each`：

```
$('.selector').each(function() {
    $(this).myPlugin({
        test: $(this).attr('rel')
    });
}); 
```

在内部`each`，`this`将指向正确的元素，而不是调用函数的上下文。

# java - 正则表达式匹配空白和非空白

> ID：11831781
> 
> 赞同：0
> 
> 时间：2012-08-06T15:57:16.720
> 
> 标签：java, regex

我正在尝试匹配一个字符串。

1.  字符串可以包含空格

2.  该字符串应包含至少一个非空白字符。

我试过，

```
[^\s] 
```

这匹配所有非空白字符。

对上述正则表达式的任何改进都会有所帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:01:07.060

如果问题可以简化为“任何事情，只要有一个非空白字符”，那么`.*\S.*`应该可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T16:04:22.033

试试`.*\S.*` 这个应该符合你所追求的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:59:02.490

`\S`相当于`[^\s]`。那是你的问题吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T15:59:29.870

**更新，误读了问题。**

尝试`.*\w.*`作为你的表达方式。这将匹配至少包含一个非空白的任何字符串。在定义您的正则表达式时，请确保转义反斜杠，因此`".*\\w.*"`用作您的字符串。

# r - *tmp*[[j]] 中的错误：下标越界

> ID：11831786
> 
> 赞同：5
> 
> 时间：2012-08-06T15:57:32.523
> 
> 标签：r, subscript

为长篇道歉！我是 R 新手，一直在努力提高我对这门语言的掌握。我偶然发现了这个有趣的足球结果建模项目：[http ://www1.maths.leeds.ac.uk/~voss/projects/2010-sports/JamesGardner.pdf](http://www1.maths.leeds.ac.uk/~voss/projects/2010-sports/JamesGardner.pdf)

当我运行代码来模拟一个完整的季节时，我一直遇到问题（第一次提到的第 36 页，附录第 59 页）：

```
Games <- function(parameters) 

{
teams <- rownames(parameters)
P <- parameters$teams
home <- parameters$home
n <- length(teams)
C <- data.frame()
row <- 1
for (i in 1:n) {
  for (j in 1:n) {
    if (i != j) {
C[row,1] <- teams[i]
C[row,2] <- teams[j]
C[row,3] <- rpois(1, exp(P[i,]$Attack - P[j,]$Defence + home))
C[row,4] <- rpois(1, exp(P[j,]$Attack - P[i,]$Defence))
row <- row + 1
    }
  }
}
return(C)
}

Games(TeamParameters) 
```

我得到的回应是

```
Error in `*tmp*`[[j]] : subscript out of bounds 
```

当我尝试回溯（）时，这就是我得到的：

```
3: `[<-.data.frame`(`*tmp*`, row, 1, value = NULL) at #11

2: `[<-`(`*tmp*`, row, 1, value = NULL) at #11

1: Games(TeamParameters) 
```

我真的不明白错误的含义，我将不胜感激。再次为这篇长文道歉，但我真的对这个项目很感兴趣，很想知道问题出在哪里！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:15:07.447

data.frame 对象不能通过`[<-.data.frame`操作按行扩展。（您需要使用`rbind`。）您应该创建一个具有足够空间的对象，可以是预先确定尺寸的矩阵或 data.frame。如果“C”是 0 行的对象，则尝试分配给第一行将失败。有一个名为“C”的函数，因此您可能想让它的名称更加独特。似乎还有比双循环更有效的方法，但您没有很好地描述参数对象。

您可能会注意到您引用的那篇论文的附录显示了如何预先标注数据框：

```
teams <- sort(unique(c(games[,1], games[,2])), decreasing = FALSE) 
T <- data.frame(Team=teams,  ... ) 
```

...并且假设游戏对象已经具有适当的行数，并且计算结果正在分配新的列值。如果该`$<-`引用列没有当前值，则操作将成功。

# linux - 多个 uinput 设备

> ID：11831788
> 
> 赞同：0
> 
> 时间：2012-08-06T15:57:43.830
> 
> 标签：linux, linux-device-driver, joystick

是否可以创建多个 uinput 设备，如果可以，该怎么做？我想创建多个单独的游戏控制器。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:51:09.200

是的。每次打开 uinput 设备节点时，都会获得一个新虚拟输入设备的文件描述符。这将持续到您关闭文件描述符。API 是低级的，基本上是内核内部相同 API 的变体。您使用 ioctl() 调用来配置设备（即多少个轴？多少个按钮？等等），然后将原始事件结构 write() 写入描述符。

您是否尝试过逐步完成教程？这是谷歌的第一个热门：http: [//thiemonge.org/getting-started-with-uinput](http://thiemonge.org/getting-started-with-uinput)

# java - 为什么静态类在 Java 中是非法的？

> ID：11831791
> 
> 赞同：31
> 
> 时间：2012-08-06T15:57:49.277
> 
> 标签：java, static, static-classes

我正在开发一个 Android 应用程序，但遇到了一些障碍，我不断收到错误消息：

```
Illegal modifier for the class FavsPopupFragment; only public, abstract & final are permitted 
```

这发生在对另一个 SO 问题的[回答之后。](https://stackoverflow.com/a/8311800/673492)这是我拥有的代码：

```
package com.package.name;

/* Imports were here */

public static class FavsPopupFragment extends SherlockDialogFragment {

    static FavsPopupFragment newInstance() {
        FavsPopupFragment frag = new FavsPopupFragment();
        return frag;
    }
} 
```

错误出现在类名上。我不明白为什么这不起作用，请帮助。谢谢你。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-06T16:00:24.873

您不能创建顶级静态类；这就是编译器试图告诉你的。还可以在[这里](https://stackoverflow.com/a/7370832/193906)查看答案，了解*为什么*会这样。要点是：

> 静态归结为类的实例可以独立存在。或者，反过来：如果没有外部类的实例，非静态内部类（= 实例内部类）就不能存在。由于顶级类没有外部类，因此它只能是静态的。
> 
> 因为所有顶级类都是静态的，所以在顶级类定义中使用 static 关键字是没有意义的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T16:26:49.553

正如前面的答案所述，您不能在顶级类中使用 static 关键字。但我想知道，你为什么希望它是静态的？

让我向您展示如何在示例中使用静态/非静态内部类：

```
public class A
{
    public class B{}

    public static class C{}

    public static void foo()
    {
        B b = new B(); //incorrect

        A a = new A();
        A.B b = a.new B(); //correct

        C c = new C(); //correct
    }
    public void bar()
    {
        B b = new B();
        C c = new C(); // both are correct
    }
} 
```

来自一个完全不同的班级：

```
public class D
{
    public void foo()
    {
        A.B b = new A.B() //incorrect

        A a = new A()
        A.B b = a.new B() //correct

        A.C c = new A.C() //correct
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T16:11:40.457

**1.** `static` **不能**用于`Package level.`

**2.** **在Class级别内**`static`是可能的。

 ****3.**但是你仍然**可以在一个类上使用静态**，当类是一个`inner class`，即。`(static inner class)`，俗称**顶级类。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-27T08:24:03.603

根据定义，顶级类已经是顶级的，因此将其声明为静态没有意义；这样做是错误的。编译器将检测并报告此错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T16:00:26.187

从类定义中删除静态。只有嵌套[类](http://docs.oracle.com/javase/tutorial/java/javaOO/classdecl.html)可以是静态的。

> 对于 FavsPopupFragment 类；只允许公开、抽象和最终

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-06T16:00:41.243

我认为您不能使用 new 关键字创建静态类的实例。无论如何，这是一个片段，所以它可能不应该是静态的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-06T16:06:54.213

您不能`static`对顶级类使用修饰符，尽管可以使用`static`关键字修改嵌套类。

在这种情况下，您需要删除静态修饰符，或者确保此类嵌套到另一个顶级类中。

**额外信息**

> 没有静态类这样的东西。在这种情况下，静态修饰符（静态嵌套）表示嵌套类是外部类的静态成员。这意味着它可以像其他静态成员一样被访问，而无需外部类的实例。
> 
> 就像静态方法不能访问类的实例变量和非静态方法一样，静态嵌套类也不能访问外部类的实例变量和非静态方法

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-25T05:55:55.040

*   `static`可以在内部类级别使用。`static`如前所述，顶级不能是`public`,只有`abstract`&`final`是允许的。

*   `static`主要用于类级别的方法和变量。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-20T09:37:43.000

顶级支持的访问修饰符是类如下：

**1) 公开的**

**2) 默认**

**3) 摘要**

**4) 最后**

**5) 严格的fp。**

**理由：顶级班**

因为 static 关键字是为了提供内存和执行逻辑而不创建对象，一个类没有直接的值逻辑，所以外部类不允许使用 static 关键字，主要是上面提到的 static 不能在包级别使用. 它仅在 Class 级别内使用。**

# r - Rpart包生成的测试规则

> ID：11831794
> 
> 赞同：7
> 
> 时间：2012-08-06T15:58:03.503
> 
> 标签：r, machine-learning, rpart

我想以编程方式测试从树生成的一条规则。在树中，根和叶（终端节点）之间的路径可以解释为规则。

在 R 中，我们可以使用`rpart`包并执行以下操作：（在这篇文章中，我将使用`iris`数据集，仅用于示例目的）

```
library(rpart)
model <- rpart(Species ~ ., data=iris) 
```

有了这两行，我得到了一个名为 的树`model`，它的类是`rpart.object`（`rpart`文档，第 21 页）。这个对象有很多信息，并且支持多种方法。特别是，该对象有一个`frame`变量（可以以标准方式访问：`model$frame`）（*同上*）和方法`path.rpath`（`rpart`文档，第 7 页），它为您提供从根节点到感兴趣节点的路径（`node`参数在功能）

变量的包含树`row.names`的`frame`节点号。该`var`列给出了节点中的分裂变量、`yval`拟合值和`yval2`类概率等信息。

```
> model$frame
           var   n  wt dev yval complexity ncompete nsurrogate     yval2.1     yval2.2     yval2.3     yval2.4     yval2.5     yval2.6     yval2.7
1 Petal.Length 150 150 100    1       0.50        3          3  1.00000000 50.00000000 50.00000000 50.00000000  0.33333333  0.33333333  0.33333333
2       <leaf>  50  50   0    1       0.01        0          0  1.00000000 50.00000000  0.00000000  0.00000000  1.00000000  0.00000000  0.00000000
3  Petal.Width 100 100  50    2       0.44        3          3  2.00000000  0.00000000 50.00000000 50.00000000  0.00000000  0.50000000  0.50000000
6       <leaf>  54  54   5    2       0.00        0          0  2.00000000  0.00000000 49.00000000  5.00000000  0.00000000  0.90740741  0.09259259
7       <leaf>  46  46   1    3       0.01        0          0  3.00000000  0.00000000  1.00000000 45.00000000  0.00000000  0.02173913  0.97826087 
```

但只有列中标记为`<leaf>`终端`var`节点（*叶子*）。在这种情况下，节点是 2、6 和 7。

如上所述，您可以使用`path.rpart`提取规则的方法（此技术在 `rattle`包和文章[Sharma Credit Score](http://cran.r-project.org/doc/contrib/Sharma-CreditScoring.pdf)中使用，如下所示：

此外，该模型将预测值的值保留在

```
predicted.levels <- attr(model, "ylevels") 
```

该值与数据集中的列相对`yval`应`model$frame`。

对于节点号为 7（行号为 5）的叶子，预测值为

```
> ylevels[model$frame[5, ]$yval]
[1] "virginica" 
```

规则是

```
> rule <- path.rpart(model, nodes = 7)

 node number: 7 
   root
   Petal.Length>=2.45
   Petal.Width>=1.75 
```

因此，该规则可以理解为

```
If Petal.Length >= 2.45 AND Petal.Width >= 1.75 THEN Species = Virginica 
```

我知道我可以测试（在测试数据集中，我将再次使用 iris 数据集）这条规则有多少真阳性，对新数据集进行子集如下

```
> hits <- subset(iris, Petal.Length >= 2.45 & Petal.Width >= 1.75) 
```

然后计算混淆矩阵

```
> table(hits$Species, hits$Species == "virginica")

             FALSE TRUE
  setosa         0    0
  versicolor     1    0
  virginica      0   45 
```

（注：我使用了与测试相同的 iris 数据集）

我如何以编程方式评估规则？我可以从规则中提取条件如下

```
> unlist(rule, use.names = FALSE)[-1]
[1] "Petal.Length>=2.45" "Petal.Width>=1.75" 
```

但是，我怎么能从这里继续呢？我无法使用该`subset`功能

提前致谢

**注意：** *为了更清晰，这个问题已经过大量编辑*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T19:47:40.283

我可以通过以下方式解决这个问题

免责声明：显然必须是解决这个问题的更好方法，但是这个黑客可以工作并且可以做我想做的事......（我对此并不感到自豪......是hackish，但有效）

好的，让我们开始吧。基本上这个想法是使用包`sqldf`

如果您检查问题，最后一段代码将树路径的每一段放入一个列表中。所以，我将从那里开始

```
 library(sqldf)
        library(stringr)

        # Transform to a character vector
        rule.v <- unlist(rule, use.names=FALSE)[-1]
        # Remove all the dots, sqldf doesn't handles dots in names 
        rule.v <- str_replace_all(rule.v, pattern="([a-zA-Z])\\.([a-zA-Z])", replacement="\\1_\\2")
        # We have to remove all the equal signs to 'in ('
        rule.v <- str_replace_all(rule.v, pattern="([a-zA-Z0-9])=", replacement="\\1 in ('")
        # Embrace all the elements in the lists of values with " ' " 
        # The last element couldn't be modified in this way (Any ideas?) 
        rule.v <- str_replace_all(rule.v, pattern=",", replacement="','")

        # Close the last element with apostrophe and a ")" 
        for (i in which(!is.na(str_extract(pattern="in", string=rule.v)))) {
          rule.v[i] <- paste(append(rule.v[i], "')"), collapse="")
        }

        # Collapse all the list in one string joined by " AND "
        rule.v <- paste(rule.v, collapse = " AND ")

        # Generate the query
        # Use any metric that you can get from the data frame
        query <- paste("SELECT Species, count(Species) FROM iris WHERE ", rule.v, " group by Species", sep="")

        # For debug only...
        print(query)

        # Execute and print the results
        print(sqldf(query)) 
```

就这样！

我警告过你，这是骇人听闻的......

希望这对其他人有帮助...

感谢所有的帮助和建议！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-14T07:59:06.093

一般来说，我不建议使用`eval(parse(...))`，但在这种情况下它似乎有效：

提取规则：

```
rule <- unname(unlist(path.rpart(model, nodes=7)))[-1]

 node number: 7 
   root
   Petal.Length>=2.45
   Petal.Width>=1.75
rule
[1] "Petal.Length>=2.45" "Petal.Width>=1.75" 
```

使用规则提取数据：

```
node_data <- with(iris, iris[eval(parse(text=paste(rule, collapse=" & "))), ])
head(node_data)

    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
71           5.9         3.2          4.8         1.8 versicolor
101          6.3         3.3          6.0         2.5  virginica
102          5.8         2.7          5.1         1.9  virginica
103          7.1         3.0          5.9         2.1  virginica
104          6.3         2.9          5.6         1.8  virginica
105          6.5         3.0          5.8         2.2  virginica 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T18:59:27.890

从...开始

```
Rule number: 16 [yval=bad cover=220 N=121 Y=99 (37%) prob=0.04]
checking< 2.5
afford< 54
history< 3.5
coapp< 2.5 
```

您将有一个以全零开始的“概率”向量，您可以使用 rule16 对其进行更新：

```
prob <- ifelse( dat[['checking']] < 2.5 &
                dat[['afford']]  < 54
                dat[['history']] < 3.5
                dat[['coapp']]  < 2.5) , 0.04, prob ) 
```

然后，您需要遍历所有其他规则（这不应该改变这种情况下的任何概率，因为树应该是不相交的估计。）可能有比这更有效的方法来构建预测。例如……`predict.rpart`函数。

# entity-framework - 如何在实体框架中创建 1:1 关系？

> ID：11831803
> 
> 赞同：0
> 
> 时间：2012-08-06T15:58:47.467
> 
> 标签：entity-framework, ef-code-first, entity-framework-ctp5

我想将一些对象存储在每个 Foo 正好有一个 Bar 的地方。

我有一些看起来像这样的 POCO 对象：

```
public class Foo
{
    public int Id { get; set; }
    public string FooProperty { get; set; }
    public int BarId { get; set; }
    public virtual Bar Bar { get; set; }
}
public class Bar
{
    public int Id { get; set; }
    public string BarProperty { get; set; }
    public int FooId { get; set; }
    public virtual Foo Foo { get; set; }
} 
```

Foo 和 Bar 具有 1:1 的关系，根据我所做的阅读，我在 DbContext 类中尝试了以下内容：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();
    modelBuilder.Conventions.Remove<ManyToManyCascadeDeleteConvention>();

    modelBuilder.Entity<Foo>()
                   .HasRequired(x => x.Bar)
                   .WithRequiredPrincipal(x => x.Foo);

    base.OnModelCreating(modelBuilder);
} 
```

后备存储是 SQL Server，这确实为我创建了具有 1:1 关系的表。**但是**，从`Bar`to的 FK 关系`Foo`在两个表的`Id`字段上，而我希望它是从表的`FooId`字段到表的字段。`Bar``Id``Foo`

似乎 EF 已决定使两个表的 PK (Id) 字段保持同步，并且基本上忽略了我的`BarId`/`FooId`列。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:14:20.377

你确定你想要一对一的关系吗？如果对于每个 foo 有一个 bar，并且每个 bar 有一个 foo，EF 将使用主键来建立关系，而且它可能应该这样做。您确定不想要 1:many 或 1:0..1 的关系吗？

如果你想让一个 Foo 能够有很多条，那么你可以定义一个 FK 你可以改变你的流利：

```
 modelBuilder.Entity<Foo>()
                .HasRequired(x => x.Bar)
                .WithMany()
                .HasForeignKey(f => f.BarId); 
```

这是一篇关于[一对一外键关系](http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations.aspx)的博客文章，可能会有所帮助

# java - 创建具有指定记录的 DBUnit 数据集

> ID：11831807
> 
> 赞同：2
> 
> 时间：2012-08-06T15:58:53.830
> 
> 标签：java, dataset, dbunit

我正在使用 DBUnit 创建仅包含具有正确 ID 的记录的数据集。

```
Set ids = new HashSet();
ids.add(new BigDecimal(34552));
TablesDependencyHelper.getDataset(connection, "MYTABLE", ids); 
```

但是我得到了包含该表中所有记录的数据集（+ 一些依赖表中的记录）。

我也对复合主键感到困惑。例如，我有 ID1 和 ID2 列作为主键 - 在这种情况下如何创建数据集（仅具有指定的记录）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:58:42.287

一段时间后，我意识到使用 DBUnit 的唯一方法是：

```
QueryDataSet queryDataSet = new QueryDataSet(connection);
queryDataSet.addTable("MYTABLE", "SELECT * FROM MYTABLE WHERE ID=34552"); 
```

# entity-framework-4 - 实体框架 OnModelCreating 缺少映射

> ID：11831817
> 
> 赞同：0
> 
> 时间：2012-08-06T15:59:53.203
> 
> 标签：entity-framework-4, ef-code-first

我首先使用 EF4.3 代码和流畅的映射。

我有：

```
protected override void OnModelCreating 
```

在应用程序启动时执行。这是在创建我的 RepositoryContext 时通过 Windsor DI 完成的。

当我的观点开始使用模型时，例如

```
 <div class="editor-field">
        @Html.EditorFor(model => model.CostPrice)
        @Html.ValidationMessageFor(model => model.CostPrice)
    </div> 
```

模型上的任何属性都会反映在验证中，但来自 OnModelCreating 的任何映射现在都丢失了。

我不知道从哪里开始调试，所以如果不包含大量应用程序，我就无法粘贴代码。我该如何开始调查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:20:30.427

用属性指定的验证被 MVC 识别；EF 初始化代码中指定的验证不是，因为 MVC 根本无法访问它们。

避免重复的唯一可能解决方案：将验证移至模型属性。

# yii - Yii：调用另一个控制器时加载css和js文件

> ID：11831819
> 
> 赞同：0
> 
> 时间：2012-08-06T15:59:56.140
> 
> 标签：yii

在我的 html 代码中，我正在调用另一个控制器，如下所示：

```
<a class='objName' href='".CController::createUrl('/mobilechart/index')."'>$dd->name</a> 
```

加载此控制器时，它不会对 css 和 js 文件收费，我可以看到内容，但样式不正确或工作不正确，但如果我刷新页面，它就会这样做。为什么会这样？

我不确定这是否有帮助，但第一次收费时（未加载 css 和 js 文件时）“yii-debug-toolbar-switcher”正在工作，而当页面正确加载时却没有！

我使用以下方法加载 css 和 js 文件：

```
<?php Yii::app()->clientScript->registerCssFile
<?php Yii::app()->clientScript->registerScriptFile 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:03:57.957

尝试以下代码作为链接：

```
<?php
echo CHtml::link(
    $dd->name,
    array( '/mobilechart/index' ),
    array( 'class' => 'objName' )
);
?> 
```

此外，请确保您的两个控制器都使用相同的布局。或者，如果他们使用不同的布局，请确保在两种布局中注册 CSS 和脚本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T15:07:34.647

试试这个[注册客户端脚本，Yii 中的 css](http://www.codexamples.com/98/how-to-include-javascript-css-in-yii/)

# linux-kernel - 链接器脚本浪费了我的记忆

> ID：11831821
> 
> 赞同：2
> 
> 时间：2012-08-06T15:59:58.653
> 
> 标签：linux-kernel, arm, ld, linker-scripts, uclinux

这是我的问题。我有这个链接器脚本链接标准 arm7nommu-uClinux 内核：

```
OUTPUT_ARCH(arm)
ENTRY(stext)
SECTIONS
{
. = 0x0;

.vectors : {
     *(.resetvector)
}

. = 0x8000;
.init : {           /* Init code and data       */
    _stext = .;
    __init_begin = .;
        *(.text.init)
    __proc_info_begin = .;
        *(.proc.info)
    __proc_info_end = .;
    __arch_info_begin = .;
        *(.arch.info)
    __arch_info_end = .;
    __tagtable_begin = .;
        *(.taglist)
    __tagtable_end = .;
        *(.data.init)
    . = ALIGN(16);
    __setup_start = .;
        *(.setup.init)
    __setup_end = .;
    __initcall_start = .;
        *(.initcall.init)
    __initcall_end = .;
    . = ALIGN(4096);
    __init_end = .;
}

/DISCARD/ : {           /* Exit code and data       */
    *(.text.exit)
    *(.data.exit)
    *(.exitcall.exit)
}

.text : {           /* Real text segment        */
    _text = .;      /* Text and read-only data  */
        *(.text)
        *(.fixup)
        *(.gnu.warning)
        *(.text.lock)   /* out-of-line lock text */
        *(.rodata)
        *(.rodata.str1.4)
        *(.glue_7)
        *(.glue_7t)
        *(.kstrtab)
    . = ALIGN(16);
    __start___ex_table = .; /* Exception table      */
        *(__ex_table)
    __stop___ex_table = .;

    __start___ksymtab = .;  /* Kernel symbol table      */
        *(__ksymtab)
    __stop___ksymtab = .;

    __start___kallsyms = .; /* All kernel symbols           */
        *(__kallsyms)
    __stop___kallsyms = .;

    *(.got)         /* Global offset table      */

    _etext = .;     /* End of text section      */
}

. = ALIGN(8192);

.data : {
        __data_start = .;
    /*
     * first, the init task union, aligned
     * to an 8192 byte boundary.
     */
    *(.init.task)

    /*
     * then the cacheline aligned data
     */
    . = ALIGN(32);
    *(.data.cacheline_aligned)

    /*
     * and the usual data section
     */
    *(.data)
    CONSTRUCTORS

    _edata = .;
}

.bss : {
    __bss_start = .;    /* BSS              */
    *(.bss)
    *(COMMON)
. = ALIGN(0x10); 
    _end = . ;
_ebss = . ;
}

. = ALIGN(8192);
_end_kernel = . ;

                /* Stabs debugging sections.    */
.stab 0 : { *(.stab) }
.stabstr 0 : { *(.stabstr) }
.stab.excl 0 : { *(.stab.excl) }
.stab.exclstr 0 : { *(.stab.exclstr) }
.stab.index 0 : { *(.stab.index) }
.stab.indexstr 0 : { *(.stab.indexstr) }
.comment 0 : { *(.comment) }
.debug_abbrev 0 : { *(.debug_abbrev) }
.debug_info 0 : { *(.debug_info) }
.debug_line 0 : { *(.debug_line) }
.debug_pubnames 0 : { *(.debug_pubnames) }
.debug_aranges 0 : { *(.debug_aranges) }
} 
```

我的硬件模拟器的内存架构由一个 sdram 和一个闪存组成。我想拆分我的代码部分，并将（例如）闪存中的 .text 部分和 sdram 中的 .data 部分放在一个特定的地址。为此，我以这种方式修改了我的链接器脚本：

```
OUTPUT_ARCH(arm)
ENTRY(stext)

MEMORY {
   sdram : ORIGIN = 0x00000000, LENGTH = 12M
   flash : ORIGIN = 0x19900000, LENGTH = 4M
}

SECTIONS
{
. = 0x0;

.vectors 0x19900000 : {
    *(.resetvector)
} > flash

.init  0x19908000 : {           /* Init code and data       */
    _stext = .;
    __init_begin = .;
        *(.text.init)
    __proc_info_begin = .;
        *(.proc.info)
    __proc_info_end = .;
    __arch_info_begin = .;
        *(.arch.info)
    __arch_info_end = .;
    __tagtable_begin = .;
        *(.taglist)
    __tagtable_end = .;
        *(.data.init)
    . = ALIGN(16);
    __setup_start = .;
        *(.setup.init)
    __setup_end = .;
    __initcall_start = .;
        *(.initcall.init)
    __initcall_end = .;
    . = ALIGN(4096);
    __init_end = .;
} > flash

/DISCARD/ : {           /* Exit code and data       */
    *(.text.exit)
    *(.data.exit)
    *(.exitcall.exit)
}

.text  0x19910000 : {           /* Real text segment        */
    _text = .;      /* Text and read-only data  */
        *(.text)
        *(.fixup)
        *(.gnu.warning)
        *(.text.lock)   /* out-of-line lock text */
        *(.rodata)
        *(.rodata.str1.4)
        *(.glue_7)
        *(.glue_7t)
        *(.kstrtab)
    . = ALIGN(16);
    __start___ex_table = .; /* Exception table      */
        *(__ex_table)
    __stop___ex_table = .;

    __start___ksymtab = .;  /* Kernel symbol table      */
        *(__ksymtab)
    __stop___ksymtab = .;

    __start___kallsyms = .; /* All kernel symbols           */
        *(__kallsyms)
    __stop___kallsyms = .;

    *(.got)         /* Global offset table      */

    _etext = .;     /* End of text section      */
    . = ALIGN(8192);
    _end_kernel = . ;
} > flash

.data 0x100000 : {
    . = ALIGN(8192);
        __data_start = .;
    /*
     * first, the init task union, aligned
     * to an 8192 byte boundary.
     */
    *(.init.task)

    /*
     * then the cacheline aligned data
     */
    . = ALIGN(32);
    *(.data.cacheline_aligned)

    /*
     * and the usual data section
     */
    *(.data)
    CONSTRUCTORS

    _edata = .;
} > sdram

.bss : {
    __bss_start = .;    /* BSS              */
    *(.bss)
    *(COMMON)
        . = ALIGN(0x10); 
    _end = . ;
    _ebss = . ;
} > sdram

                /* Stabs debugging sections.    */
.stab 0 : { *(.stab) }
.stabstr 0 : { *(.stabstr) }
.stab.excl 0 : { *(.stab.excl) }
.stab.exclstr 0 : { *(.stab.exclstr) }
.stab.index 0 : { *(.stab.index) }
.stab.indexstr 0 : { *(.stab.indexstr) }
.comment 0 : { *(.comment) }
.debug_abbrev 0 : { *(.debug_abbrev) }
.debug_info 0 : { *(.debug_info) }
.debug_line 0 : { *(.debug_line) }
.debug_pubnames 0 : { *(.debug_pubnames) }
.debug_aranges 0 : { *(.debug_aranges) }
} 
```

它工作正常，因为所有部分都映射到我想要的位置，但是当正常输出文件（与以前的链接器脚本链接）约为 800Kb 时，输出文件约为 429Mb！...为什么？请帮我！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:53:32.043

你也说过:-)

```
.text  0x19910000 : {           /* Real text segment        */ 
```

0x19910000 = 428933120 ~= 409 MB

# javascript - 如何使用 jQuery 访问隐藏的 Dom 元素？

> ID：11831824
> 
> 赞同：4
> 
> 时间：2012-08-06T16:00:02.707
> 
> 标签：javascript, jquery

我有一个 HTML Div（我正在使用 Twitter Bootstrap 隐藏显示`div2`），如下所示：

**HTML：**

```
<div id="div1">
  <button id="mybtn">Button</button>
  <div id="div2" class="modal hide fade span12" style="display: none;">
    <button id="anotherButton" data-char="">AnotherButton</button>
  </div>
</div> 
```

`data-char`当我点击jQuery 时，我试图更改 的值`mybtn`。但没有成功的原因`div2`是隐藏的。`console.log($('#anotherButton'));`返回一个空数组。

有没有办法使用 jQuery 或 Javascript 访问隐藏的 DOM？

**编辑：** 通过尝试这个不能更好地工作，返回`undefined`：

```
$('#mybtn').live('click', function(e) 
{
    //or e.preventDefault();
    $('#anotherbutton').attr("data-char", "assigned");
    alert($('#anotherbutton').attr("data-char"));
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:03:54.317

你可以分配它

[**现场演示**](http://jsfiddle.net/rajaadil/LVvAz/4/)

```
$(function(){
    $('#anotherButton').attr('char', "assigned");
    alert($('#anotherButton').attr('char'));
});​ 
```

点击按钮

**[现场演示](http://jsfiddle.net/rajaadil/LVvAz/3/)**

```
$(function(){
   $('#anotherButton').attr('data-char', "assigned");
   alert($('#anotherButton').attr('data-char'));
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:02:42.830

看起来`data`方法不适用于处于隐藏状态的元素。你应该使用`attr`方法。

这应该可以正常工作

```
$(function(){
  $("#mybtn").click(function(e){
    e.preventDefault();
        $("#anotherButton").attr("data-char","new value");
  });    
}); 
```

工作示例[http://jsfiddle.net/kshyju/a7Cua/4/](http://jsfiddle.net/kshyju/a7Cua/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T16:03:14.140

它被隐藏的事实并没有改变。问题可能是js代码在按钮HTML之前。要么把它放在后面，要么把它放在一个监听`$(document).ready()`器中，以确保在你尝试访问它时它已经被处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T16:05:48.947

尝试`$(button:hidden)`

这通常适用于这样的事情，

来源：http://api.jquery.com/hidden-selector/

# jdbc - Google Analytics - JDBC 或 ODBC 驱动程序

> ID：11831830
> 
> 赞同：-1
> 
> 时间：2012-08-06T16:00:29.757
> 
> 标签：jdbc, google-analytics, odbc

是否有直接连接到 Google Analytics 的 JDBC 或 ODBC 驱动程序？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T22:36:58.607

不，那里没有。Google 的 API 不使用 SQL。尝试这个：

[https://developers.google.com/analytics/resources/tutorials/hello-analytics-api](https://developers.google.com/analytics/resources/tutorials/hello-analytics-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T20:48:43.383

RSSBus 有一个 ODBC 驱动程序的 Beta 版本。它在 Excel 中运行良好，但不允许您创建链接服务器。为此，他们建议使用他们的 SSIS 组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:45:47.167

[RSSBus](http://www.rssbus.com/jdbc/)有一堆 JDBC 驱动程序，其中一个是用于 Google Analytics 的。没有经验；我很想听听一些反馈。

# version-control - Source Any Where VSS，recv() 出错：现有连接被远程主机强行关闭

> ID：11831831
> 
> 赞同：0
> 
> 时间：2012-08-06T16:00:30.847
> 
> 标签：version-control, visual-sourcesafe

我在任何地方为 vss 使用 Source 并且在获取更新时它给了我以下错误

> recv() 出错：远程主机强制关闭现有连接。

![请以红色查看下面的错误](../Images/2daba7c6f00ed28453fef5cf6ec1a5e3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T02:59:54.573

从您的屏幕截图中，该软件正在尝试检索项目/文件树结构。如果客户端和服务器之间的 Internet 连接不稳定，则可能会发生此错误。您可以尝试刷新看看问题是否仍然存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:55:50.190

这是 Source any where 的一些日志文件问题。系统重启可以完成这项工作。每隔几天就会发生一次，系统重启确实有效。但我仍在寻找合适的解决方案

# python - 无法使用 access_token 从 Twitter 检索经过身份验证的数据

> ID：11831834
> 
> 赞同：0
> 
> 时间：2012-08-06T16:00:38.900
> 
> 标签：python, oauth, twitter-oauth

我正在尝试在 python 中创建通用类，它将完成所有 oAuth 过程，然后允许从任何 oAuth 支持服务（例如 Twitter、LinkedIn）中检索数据。

编辑：我有客户密钥和秘密以及访问令牌密钥和秘密，当我尝试请求任何资源请求时，我收到以下错误： `{"error":"Could not authenticate with OAuth.","request":"\/1\/statuses\/retweeted_by_me.json`}'

知道为什么吗？

我的代码是：

```
import httplib
import time
import oauth as oauth

# settings for the local test consumer
SERVER = 'api.twitter.com'

RESOURCE_URL = 'https://api.twitter.com/1/statuses/retweeted_by_me.json'

CONSUMER_KEY = 'MY_CUSTOMER_KEY'
CONSUMER_SECRET = 'MY_CUSTOMER_SECRET'
ACCESS_TOKEN_KEY = 'MY_ACCESS_TOKEN_KEY'
ACCESS_TOKEN_SECRET = 'MY_ACCESS_TOKEN_SECRET'

# example client using httplib with headers
class SimpleOAuthClient(oauth.OAuthClient):

    def __init__(self, server):
        self.server = server
        self.connection = httplib.HTTPSConnection(self.server)

    def access_resource(self, oauth_request):
        # via post body
        # -> some protected resources
        self.connection.request(oauth_request.http_method, RESOURCE_URL)
        response = self.connection.getresponse()
        return response.read()

def run_example2():
  print '** OAuth Python Library Example **'
  client = SimpleOAuthClient(SERVER, )
  consumer = oauth.OAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET)
  signature_method_hmac_sha1 = oauth.OAuthSignatureMethod_HMAC_SHA1()
  pause()

  # access some protected resources
  print '* Access protected resources ...'
  pause()
  token = oauth.OAuthToken('ACCESS_TOKEN_KEY', 'ACCESS_TOKEN_SECRET')
  oauth_request = oauth.OAuthRequest.from_consumer_and_token(consumer, token=token, http_method='GET', http_url=RESOURCE_URL)
  oauth_request.sign_request(signature_method_hmac_sha1, consumer, token)
  print 'REQUEST (via post body)'
  print 'parameters: %s' % str(oauth_request.parameters)
  pause()
  params = client.access_resource(oauth_request)
  print 'GOT'
  print 'non-oauth parameters: %s' % params
  pause()

def pause():
    print ''
    time.sleep(1)

if __name__ == '__main__':
    run_example2()
    print 'Done.' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:39:24.497

> AUTHORIZATION_URL = 'https://api.twitter.com/oauth/authenticate'

这是用于 OAuth 的错误 URL。如果您查看 Twitter 的[3-legged OAuth 文档](https://dev.twitter.com/docs/auth/3-legged-authorization)，他们会声明“使用 GET oauth/authorize 端点而不是 /oauth/authenticate”。将 URL 更改为“https://api.twitter.com/oauth/authorize”，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:23:05.833

我设法通过更改为来修复`self.connection.request(oauth_request.http_method, RESOURCE_URL)` 它`self.connection.request(oauth_request.http_method, oauth_request.to_url())`

请注意，仅当 oauth_request.http_method 为 GET 时才会起作用

# dns - DIY DNS 设备

> ID：11831836
> 
> 赞同：0
> 
> 时间：2012-08-06T16:00:45.563
> 
> 标签：dns, bind, router

我在多个平台上进行了大量的网络应用程序开发：Java、PHP 和 ASP.net。为了保持工作分开，我喜欢在本地 Intranet 上运行我碰巧在其自己的域名下开发的任何应用程序，例如“peter.example.com”、“paul.example.com”和“mary.example.com”。

大约一年来，我一直在运行[BIND](https://www.isc.org/software/bind/)，并且很高兴编辑我自己的区域文件等等。但是运行这个服务会导致启动时间很长，所以我想尽快把它从我的开发箱中移走。

这让我想知道是否有像 DD-WRT 这样的项目可以让我刷新旧路由器以从中运行 BIND。

有没有人知道任何自制的 DNS 设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:18:22.273

试试[OpenWRT](https://www.openwrt.org/)，它是为路由器量身定制的 GNU/Linux 发行版，有相当多的可用软件包集。这包括 BIND，我在自己的路由器上使用它作为缓存 DNS 解析器，专门用于启动和运行 DNSSEC。

PS 这个问题在服务器故障或超级用户上可能会更好。

# ms-access - 使用排除字段将 Access 表单导出到 Excel

> ID：11831838
> 
> 赞同：1
> 
> 时间：2012-08-06T16:00:56.077
> 
> 标签：ms-access, export, export-to-excel

我有一个连续表单，其中表单标题包含过滤器选项，详细信息部分包含数据。

我希望能够使用 access 2007 提供的内置导出到 excel 功能将其导出。我目前可以这样做，除了一个小问题外，它可以正常工作。

当我导出到 Excel 时，它还包括每一行的表单标题控件。有没有办法设置一个属性，将表单标题排除在导出中？基本上，只导出表单详细信息部分？

# c# - WinForm 计时器访问文本框

> ID：11831842
> 
> 赞同：0
> 
> 时间：2012-08-06T16:01:16.313
> 
> 标签：c#, winforms, timer, textbox, snmp

所以我正在尝试从 snmpsharpnet 创建一个使用 SNMP 的基本 WinForm 应用程序。

我有两个按钮“Eye”和“Jitter”，当按下一个按钮时，一个计时器启动，它每分钟在计时器处理程序内执行 SNMP 代码。

我正在尝试将 SNMP 输出从计时器处理程序写入文本框，但是当我退出程序时，我尝试的所有操作都会导致线程异常或持续运行的进程。

我已经尝试了很多不同的方法来修复这两个错误，我可能把一切都搞砸了，但这是我拥有的代码：

```
using System;
using System.Net;
using SnmpSharpNet;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public static bool stop = false; 
        static bool min = false, sec = false, eye = false, jitter = false;
        static string ipAdd = "";
        static System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();
        static int alarmCounter = 1;
        static bool exitFlag = false;
        static TextBox textbox;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            textbox = outputBox;
        }

        private void IPtext_TextChanged(object sender, EventArgs e)
        {
            ipAdd = IPtext.Text;
        }

        private void stopButton_Click(object sender, EventArgs e)
        {
            stop = true;
            timer.Stop();
        }

        // This is the method to run when the timer is raised.
        private static void TimerEventProcessor(Object myObject,
                                            EventArgs myEventArgs)
        {
            timer.Stop();

            // If stop button has not been pressed then continue timer.
            if (stop == false)
            {
                textbox.Clear();
                // Restarts the timer and increments the counter.
                alarmCounter += 1;
                timer.Enabled = true;
                /*
                textbox.Invoke(
                    new MethodInvoker(
                        delegate { textbox.AppendText("fsjdaò"); }));
                */
                System.IO.StreamWriter file;
                if (eye == true)
                {
                    file = new System.IO.StreamWriter("c:/Users/bshellnut/Desktop/Eye.txt", true);
                }
                else
                {
                    file = new System.IO.StreamWriter("c:/Users/bshellnut/Desktop/Jitter.txt", true);
                }

                // SNMP community name
                OctetString community = new OctetString("public");

                // Define agent parameters class
                AgentParameters param = new AgentParameters(community);
                // Set SNMP version to 2 (GET-BULK only works with SNMP ver 2 and 3)
                param.Version = SnmpVersion.Ver2;
                // Construct the agent address object
                // IpAddress class is easy to use here because
                //  it will try to resolve constructor parameter if it doesn't
                //  parse to an IP address
                IpAddress agent = new IpAddress(ipAdd);

                // Construct target
                UdpTarget target = new UdpTarget((IPAddress)agent, 161, 2000, 1);

                // Define Oid that is the root of the MIB
                //  tree you wish to retrieve
                Oid rootOid;
                if (eye == true)
                {
                    rootOid = new Oid("1.3.6.1.4.1.128.5.2.10.14"); // ifDescr
                }
                else
                {
                    rootOid = new Oid("1.3.6.1.4.1.128.5.2.10.15");
                }

                // This Oid represents last Oid returned by
                //  the SNMP agent
                Oid lastOid = (Oid)rootOid.Clone();

                // Pdu class used for all requests
                Pdu pdu = new Pdu(PduType.GetBulk);

                // In this example, set NonRepeaters value to 0
                pdu.NonRepeaters = 0;
                // MaxRepetitions tells the agent how many Oid/Value pairs to return
                // in the response.
                pdu.MaxRepetitions = 5;

                // Loop through results
                while (lastOid != null)
                {
                    // When Pdu class is first constructed, RequestId is set to 0
                    // and during encoding id will be set to the random value
                    // for subsequent requests, id will be set to a value that
                    // needs to be incremented to have unique request ids for each
                    // packet
                    if (pdu.RequestId != 0)
                    {
                        pdu.RequestId += 1;
                    }
                    // Clear Oids from the Pdu class.
                    pdu.VbList.Clear();
                    // Initialize request PDU with the last retrieved Oid
                    pdu.VbList.Add(lastOid);
                    // Make SNMP request
                    SnmpV2Packet result;
                    try
                    {
                        result = (SnmpV2Packet)target.Request(pdu, param);
                        //textbox.Text = "";
                    }
                    catch (SnmpSharpNet.SnmpException)
                    {
                        textbox.Invoke(
                            new MethodInvoker(
                                delegate { textbox.AppendText("Could not connect to the IP Provided."); }));
                        timer.Stop();
                        //outputBox.Text += "Could not connect to the IP Provided.";
                        break;
                    }
                    // You should catch exceptions in the Request if using in real application.

                    // If result is null then agent didn't reply or we couldn't parse the reply.
                    if (result != null)
                    {
                        // ErrorStatus other then 0 is an error returned by 
                        // the Agent - see SnmpConstants for error definitions
                        if (result.Pdu.ErrorStatus != 0)
                        {
                            // agent reported an error with the request
                            /*Console.WriteLine("Error in SNMP reply. Error {0} index {1}",
                                result.Pdu.ErrorStatus,
                                result.Pdu.ErrorIndex);*/
                                textbox.Invoke(
                                    new MethodInvoker(
                                        delegate { textbox.AppendText("Error in SNMP reply. " + "Error " + result.Pdu.ErrorStatus + " index " + result.Pdu.ErrorIndex); }));
                            //outputBox.Text = "Error in SNMP reply. " + "Error " + result.Pdu.ErrorStatus + " index " + result.Pdu.ErrorIndex;
                            lastOid = null;
                            break;
                        }
                        else
                        {
                            // Walk through returned variable bindings
                            foreach (Vb v in result.Pdu.VbList)
                            {
                                // Check that retrieved Oid is "child" of the root OID
                                if (rootOid.IsRootOf(v.Oid))
                                {
                                    /*Console.WriteLine("{0} ({1}): {2}",
                                        v.Oid.ToString(),
                                        SnmpConstants.GetTypeName(v.Value.Type),
                                        v.Value.ToString());*/

                        textbox.Invoke(
                                            new MethodInvoker(
                                                 delegate { textbox.AppendText(v.Oid.ToString() + " " + SnmpConstants.GetTypeName(v.Value.Type) +
                                            " " + v.Value.ToString() + Environment.NewLine); }));

                                    //outputBox.Text += v.Oid.ToString() + " " + SnmpConstants.GetTypeName(v.Value.Type) +
                                       //" " + v.Value.ToString() + Environment.NewLine;

                    file.WriteLine(v.Oid.ToString() + " " + SnmpConstants.GetTypeName(v.Value.Type) +
                                   " " + v.Value.ToString(), true);
                                    if (v.Value.Type == SnmpConstants.SMI_ENDOFMIBVIEW)
                                        lastOid = null;
                                    else
                                        lastOid = v.Oid;
                                }
                                else
                                {
                                    // we have reached the end of the requested
                                    // MIB tree. Set lastOid to null and exit loop
                                    lastOid = null;
                                }
                            }
                        }
                    }
                    else
                    {
                        //Console.WriteLine("No response received from SNMP agent.");
                        textbox.Invoke(
                            new MethodInvoker(
                                delegate { textbox.AppendText("No response received from SNMP agent."); }));
                        //outputBox.Text = "No response received from SNMP agent.";
                    }
                }
                target.Close();
                file.Close();
            }
            else
            {
                // Stops the timer.
                exitFlag = true;
            }
        }

        private void eyeButton_Click(object sender, EventArgs e)
        {
            outputBox.Text = "Connecting...";
            eye = true;
            jitter = false;
            stop = false;

            timer.Tick += new EventHandler(TimerEventProcessor);

            // Sets the timer interval to 5 seconds.
            timer.Interval = 5000;
            timer.Start();

            // Runs the timer, and raises the event.
            while (exitFlag == false)
            {
                // Processes all the events in the queue.
                Application.DoEvents();
            }
        }

        private void jitterButton_Click(object sender, EventArgs e)
        {
            outputBox.Text = "Connecting...";
            eye = false;
            jitter = true;
            stop = false;

            timer.Tick += new EventHandler(TimerEventProcessor);

            // Sets the timer interval to 5 seconds.
            timer.Interval = 5000;
            timer.Start();

            // Runs the timer, and raises the event.
            while (exitFlag == false)
            {
                // Processes all the events in the queue.
                Application.DoEvents();
            }
        }

        private void Seconds_CheckedChanged(object sender, EventArgs e)
        {
            min = false;
            sec = true;
        }

        private void Minutes_CheckedChanged(object sender, EventArgs e)
        {
            min = true;
            sec = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:15:20.090

我相信您在 UI 线程上遇到了死锁。

`TimerEventProcessor()`由您的 实例调用`System.Windows.Forms.Timer`，该实例在 UI 线程上运行。当计时器关闭时，我相信它会将一条消息放入 UI 线程的消息队列中以调用您的`TimerEventProcessor()`方法。该方法依次调用`textbox.Invoke()`，将另一条消息放入队列，然后**等待它被处理**。

您的 UI 线程现在卡住了，因为它正在处理一条消息，但必须等到另一条消息被处理后才能继续。`Application.DoEvents()`对你没有好处的调用，因为一旦你的程序进入它们就不会被调用`TimerEventProcessor()`。（它们也是不必要的，因为您的按钮单击处理程序无论如何都不会阻塞 UI 线程。）

由于计时器在 UI 线程上运行，因此您可以摆脱`textbox.Invoke()`调用而直接访问`textbox`。

**概括：**

1.  将您的呼叫替换为`textbox.Invoke()`直接访问`textbox`
2.  删除您的来电`Application.DoEvents()`

**注意：**如果您从[MSDN 示例](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)`Application.DoEvents()`中获得了使用计时器的逻辑，他们会将其放在那里，以便在 Main 函数完成后应用程序不会退出。

~~**更新：**`textbox.Invoke`您可以通过将调用替换为以下代码来查看这是否真的是问题所在。如果此代码有效，那么您肯定遇到了 UI 消息队列死锁问题。此外，如果这确实解决了问题，我不建议将其作为解决方案，而是按照上面的建议解决死锁。~~

 ~~```
// Make the request asynchronously
System.IAsyncResult asyncResult = textbox.BeginInvoke(
    new MethodInvoker(
        delegate { /* insert delegate code here */ }));

// Process the message queue until this request has been completed
while(!asyncResult.IsCompleted) Application.DoEvents();

// Clean up our async request
textbox.EndInvoke(asyncResult); 
```~~ 

~~由于您的代码似乎可以正常工作，因此您可以忽略上面的测试代码。~~

 ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:09:42.633

您的问题与计时器无关，`Invoke`您使用的所有语句都不是必需的。该类`System.Windows.Forms.Timer`在 UI 线程中运行。看这里：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)~~

# indexing - 索引页面不起作用主域

> ID：11831843
> 
> 赞同：0
> 
> 时间：2012-08-06T16:01:17.417
> 
> 标签：indexing, dns, cpanel

说：“
大家好，我的 cpanel 有问题！我已经在 public_html 目录上上传了我的 index.html 文件。但是当我在浏览器中输入我的 url（这个：[http](http://ads1plus2.com) : //ads1plus2.com）时。它没有出现并说：“如果您认为您错误地访问了此页面，请联系网站所有者......”

谁能帮我 ？

顺便说一下 .htaccess 文件是可以
的，因为唯一的一行是： DirectoryIndex index.html

干杯，”

谁能帮我 ？

顺便说一下 .htaccess 文件是可以
的，因为唯一的一行是： DirectoryIndex index.html

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:07:37.700

[http://ads1plus2.com/](http://ads1plus2.com/)在我端加载 index.html 页面，也许你的浏览器被缓存了？

# c# - UnobservedTaskException 被抛出，但它由 TaskScheduler.UnobservedTaskException 处理程序和 continuations OnlyOnFaulted 处理程序处理

> ID：11831844
> 
> 赞同：2
> 
> 时间：2012-08-06T16:01:18.413
> 
> 标签：c#, exception, task-parallel-library

我在 TPL 编程方面遇到问题。
我在**[** http://stackoverflow.com/questions/7883052/a-tasks-exceptions-were-not-observed-either-by-waiting-on-the-task-or-上使用 @h4165f8ghd4f854d6f8h 解决方案时收到 UnobservedTaskException accessi/11830087#11830087 **]**来处理异常但仍然得到 UnobservedTaskException。
我也在开始任务之前添加了以下代码：

```
 TaskScheduler.UnobservedTaskException += (sender, e) =>
    {
        e.SetObserved();
        throw e.Exception;
    }; 
```

但是 [ http://stackoverflow.com/questions/10874068/exception-thrown-in-task-thread-not-caught-by-unobservedtaskexception ] 告诉它不会捕获每个 TPL 未处理的异常。

我想传播异常直到到达堆栈顶部然后处理它。
有人能帮我吗？？？？

* * *

@乔恩斯基特

嗨，我做了一个较小的复制品，感谢您检查

```
class Program
{
    static void Main(string[] args)
    {
        Program p = new Program();
        p.tplTestOne();
    }
    public void tplTestOne()
    {
        TaskScheduler.UnobservedTaskException += (sender, e) =>
        {
            e.SetObserved();
            throw e.Exception;
        };
        Task tsk_1 = MyClassHere.createHandledTask(() =>
        {
            double x = 1;
            x = (x + 1) / x;
        }, false);
        Task tsk_2 = MyClassHere.createHandledTask(() =>
        {
            double y = 0;
            throw new Exception("forced_divisionbyzerodontthrowanymore_test"); // here -> System.Exception was unhandled by user code
        }, true);
        Task tsk_3 = MyClassHere.createHandledTask(() =>
        {
            double z = 1;
            z = (z + 1) / z;
        }, true);
        Task tsk_4 = MyClassHere.createHandledTask(() =>
        {
            double k = 1;
            k = (k + 1) / k;
        }, true);
        Console.ReadLine();
    }
}

public static class MyClassHere
{
    public static void waitForTsk(Task t)
    {
        try
        {
            t.Wait();
        }
        catch (AggregateException ae)
        {
            ae.Handle((err) =>
            {
                throw err;
            });
        }
    }

    public static void throwFirstExceptionIfHappens(this Task task)
    {
        task.ContinueWith(t =>
        {
            var aggException = t.Exception.Flatten();
            foreach (var exception in aggException.InnerExceptions)
            {
                throw exception; // throw only first, search for solution
            }
        },
        TaskContinuationOptions.OnlyOnFaulted); // not valid for multi task continuations
    }

    public static Task createHandledTask(Action action)
    {
        return createHandledTask(action, false);
    }

    public static Task createHandledTask(Action action, bool attachToParent) 
    {
        Task tsk = null;

        if (attachToParent)
        {
            TaskCreationOptions atp = TaskCreationOptions.AttachedToParent;
            tsk = Task.Factory.StartNew(action, atp);
        }
        else
        {
            tsk = Task.Factory.StartNew(action);
        }
        tsk.throwFirstExceptionIfHappens();
        return tsk;
    }

} 
```

* * *

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:40:47.403

该解决方案基于[如何在使用任务并行库时处理所有未处理的异常？](https://stackoverflow.com/questions/2707295/how-to-handle-all-unhandled-exceptions-when-using-task-parallel-library)

```
class Program
{
    static void Main(string[] args)
    {
        Program p = new Program();
        p.tplTestOne();
    }
    public void tplTestOne()
    {
        //-------------------------------------------------
        MyClassHere.onUnobservedTaskException += (object sender, EventException e) =>
        {
            Console.WriteLine(e.Exception.Message); //its fired OK
        };
        TaskScheduler.UnobservedTaskException += (object sender, UnobservedTaskExceptionEventArgs e) =>
        {
            Console.WriteLine(e.Exception.Message); // its not fired, buggy
        };
        //-------------------------------------------------
        CancellationTokenSource source = new CancellationTokenSource();
        Task tz = MyClassHere.CreateHandledTask(
            new TaskScheduled(0, () => {
                if (!source.IsCancellationRequested)
                {
                    Console.WriteLine("A-main-task-started");
                }
                Thread.Sleep(5000);
                if (source.IsCancellationRequested)
                {
                    Console.WriteLine("CancelingMainTask");
                }
            })
            , new TaskScheduled(3000, () => { Console.WriteLine("okTaskCalled"); }) 
            , null //new TaskScheduled(0, () => { Console.WriteLine("cancelTaskCalled"); })
            , TaskCreationOptions.AttachedToParent
            , source.Token
            , new TaskScheduled(2000, () =>
            {
                if (!source.IsCancellationRequested)
                {
                    Console.WriteLine("B-timeout");
                }
            })
            , new TaskScheduled(1000, () =>
            {
                if (!source.IsCancellationRequested)
                {
                    Console.WriteLine("C-timeout");
                }
                source.Cancel();
            })
        );
        if(tz != null)
        {
            tz.ContinueWith(t => { Console.WriteLine("END"); });
        }           

        Task tsk_1 = MyClassHere.createHandledTask(() =>
        {
            double x = 1;
            x = (x + 1) / x;
        }, false);
        Task tsk_2 = MyClassHere.createHandledTask(() =>
        {
            double y = 0;
            throw new Exception("forced_divisionbyzerodontthrowanymore_test"); // here -> System.Exception was unhandled by user code
        }, true);
        Task tsk_3 = MyClassHere.createHandledTask(() =>
        {
            double z = 1;
            z = (z + 1) / z;
        }, true);
        Task tsk_4 = MyClassHere.createHandledTask(() =>
        {
            double k = 1;
            k = (k + 1) / k;
        }, true);
        Console.ReadLine();
    }
}

public class EventException : EventArgs
{
    public Exception Exception;
    public Task task;
    public EventException(Exception err, Task tsk)
    {
        Exception = err;
        task = tsk;
    }
}
public class TaskScheduled
{
    public int waitTime;
    public Action action;
    public DateTime datestamp;
    public bool isCalled = false;
    public TaskScheduled(int _waitTime, Action _action)
    {
        this.waitTime = _waitTime;
        this.action = _action;
    }
}
public static class MyClassHere
{
    public delegate void UnobservedTaskException(object sender, EventException e);
    public static event UnobservedTaskException onUnobservedTaskException;
    //-------------------------------------------------
    public static void waitForTsk(Task t)
    {
        try
        {
            t.Wait();
        }
        catch (AggregateException ae)
        {
            ae.Handle((err) =>
            {
                throw err;
            });
        }
    }
    //-------------------------------------------------
    public static void RaiseUnobsrvEvtForEachIfHappens(this Task task)
    {
        task.ContinueWith(t =>
        {
            var aggException = t.Exception.Flatten();
            foreach (var exception in aggException.InnerExceptions)
            {
                onUnobservedTaskException(task, new EventException(exception, task));
            }
        },
        TaskContinuationOptions.OnlyOnFaulted); // not valid for multi task continuations
    }
    //-------------------------------------------------
    public static Task CreateHandledTask(Action action)
    {
        return CreateHandledTask(action, false);
    }
    public static Task CreateHandledTask(Action action, bool attachToParent)
    {
        Task tsk = null;
        tsk = CreateHandledTask(action, attachToParent, CancellationToken.None);
        return tsk;
    }
    public static Task CreateHandledTask(Action action, bool attachToParent, CancellationToken cancellationToken)
    {
        Task tsk = null;
        TaskCreationOptions atp = TaskCreationOptions.None;
        if (attachToParent) { atp = TaskCreationOptions.AttachedToParent; }
        tsk = CreateHandledTask(action, atp, cancellationToken);
        return tsk;
    }        
    public static Task CreateHandledTask(Action action, TaskCreationOptions tco, CancellationToken cancellationToken)
    {
        Task tsk = null;
        tsk = Task.Factory.StartNew(action, cancellationToken, tco, TaskScheduler.Default);
        tsk.RaiseUnobsrvEvtForEachIfHappens();
        return tsk;
    }
    public static Task CreateHandledTask(TaskScheduled mainTask,
                                         TaskScheduled onSuccessTask,                                              
                                         TaskScheduled onCancelationTask,
                                         TaskCreationOptions tco, 
                                         CancellationToken cancellationToken, 
                                         params TaskScheduled[] timeouts)
    {
        Task tsk = null;
        ManualResetEvent me = new ManualResetEvent(false);
        if (timeouts == null || timeouts.Length < 1 || timeouts[0] == null)
        {
            tsk = CreateHandledTask(mainTask.action, tco, cancellationToken);
            me.Set();
        }
        else
        {
            bool isCancelation = false;
            bool isSuccess = true;
            Task NonBlockCtxTask = CreateHandledTask(() =>
            {
                tsk = CreateHandledTask(mainTask.action, tco, cancellationToken);
                me.Set();
                int qtdt = timeouts.Count(st => st.action != null);
                CountdownEvent cde_pas = new CountdownEvent(3);
                CountdownEvent cde_pat = new CountdownEvent(qtdt);
                Parallel.ForEach<TaskScheduled>(timeouts, (ts) =>
                {
                    try
                    {
                        bool itsOnTime = tsk.Wait(ts.waitTime, cancellationToken);
                        cde_pat.Signal();
                        if (!itsOnTime)
                        {
                            isSuccess = false;
                            Task tact = CreateHandledTask(ts.action, TaskCreationOptions.None, cancellationToken);
                        }
                    }
                    catch (OperationCanceledException oce)
                    {
                        isSuccess = false;
                        cde_pat.Signal(cde_pat.CurrentCount);
                        isCancelation = true;
                    }
                });
                try
                {
                    isSuccess &= cde_pat.Wait(System.Threading.Timeout.Infinite, cancellationToken) && !isCancelation;
                }
                catch (OperationCanceledException oce)
                {
                    isCancelation = true;
                    isSuccess = false;
                }
                finally
                {
                    cde_pas.Signal();
                }
                try
                {
                    if (isCancelation && onCancelationTask != null)
                    {
                        Thread.Sleep(onCancelationTask.waitTime);
                        Task tcn = CreateHandledTask(onCancelationTask.action);
                    }
                }
                catch { }
                finally {
                    cde_pas.Signal();
                }
                try
                {
                    if (isSuccess && onSuccessTask != null)
                    {
                        Thread.Sleep(onSuccessTask.waitTime);
                        Task tcn = CreateHandledTask(onSuccessTask.action);
                    }
                }
                catch { }
                finally
                {
                    cde_pas.Signal();
                }
                cde_pas.Wait(System.Threading.Timeout.Infinite);
            }, TaskCreationOptions.None, cancellationToken);              
        }
        me.WaitOne();
        return tsk;
    }
    //-------------------------------------------------
} 
```

# python - 如何调用 urllib2 get_header 方法？

> ID：11831845
> 
> 赞同：0
> 
> 时间：2012-08-06T16:01:21.753
> 
> 标签：python, python-2.7, urllib2

我正在研究[python urllib2 下载大小](https://stackoverflow.com/q/11830586/776084)问题。

尽管`RanRag or jterrace`建议的方法对我来说效果很好，但我想知道如何使用[urllib2.Request.get_header](http://docs.python.org/library/urllib2#urllib2.Request.get_header)方法来实现相同的效果。所以，我尝试了下面的代码行：

```
>>> import urllib2
>>> req_info = urllib2.Request('http://mirror01.th.ifl.net/releases//precise/ubuntu-12.04-desktop-i386.iso')
>>> req_info.header_items()
[]
>>> req_info.get_header('Content-Length')
>>> 
```

因为，您可以看到`get_header`没有返回，也没有`header_items`。

那么，使用上述方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T17:44:33.200

该类`urllib2.Request`只是“一个 URL 请求的抽象”（[http://docs.python.org/library/urllib2.html#urllib2.Request](http://docs.python.org/library/urllib2.html#urllib2.Request)），并不做任何实际的数据检索。您必须使用`urllib2.urlopen`来检索数据。`urlopen`要么直接将 url 作为字符串，要么你也可以传递`Request`对象的实例。

例如：

```
>>> req_info = urllib2.urlopen('https://www.google.com/logos/2012/javelin-2012-hp.jpg')
>>> req_info.headers.keys()
['content-length', 'x-xss-protection', 'x-content-type-options', 'expires', 'server', 'last-modified', 'connection', 'cache-control', 'date', 'content-type']
>>> req_info.headers.getheader('Content-Length')
'52741' 
```

# ios - 当我从一个屏幕切换到下一个屏幕时，我的 iad 仍然显示

> ID：11831846
> 
> 赞同：0
> 
> 时间：2012-08-06T16:01:24.003
> 
> 标签：ios, iad

就在上周，我成功地将 iAd 应用到了我的应用程序中，但是当我的填充率非常低时，我查看了它，我意识到我遇到了问题。我的 iAd 横幅正确地显示在用户看到的第一个屏幕上，这是我设计的唯一显示横幅广告的屏幕。我设置了一个单例类来管理广告，并且我正在扩展它以在即将发布的版本中显示在其他屏幕上。但是，当我将另一个不显示广告的视图控制器推到前面时，我的 iAd 委托方法：

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner
- (void) bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error 
```

仍然每 3 分钟调用一次，就好像视图处于活动状态一样。

有没有办法暂时禁止 iAd 尝试刷新？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:54:11.010

由于我没有在所有页面上显示广告，因此当显示/不显示显示广告的视图控制器（并将委托设置为零）时，我创建/释放广告对象，这可以防止任何广告/委托当前未显示的视图控制器上的功能被显示。

# python - showPage 干扰 reportlab 中的 laterPages 模板

> ID：11831849
> 
> 赞同：0
> 
> 时间：2012-08-06T16:01:41.990
> 
> 标签：python, canvas, footer, reportlab

我正在尝试使用reportlab 生成一个PDF，该PDF 的页眉和页脚从第二页开始。

我阅读了线程： 在 ReportLab 中[添加分页符到 Reportlab 画布对象](https://stackoverflow.com/questions/3593193/add-page-break-to-reportlab-canvas-object) 和[非编号页面](https://stackoverflow.com/questions/4956283/non-numbered-pages-in-reportlab?rq=1)

使用这些线程中的函数，我可以使用 **canvas.showPage()成功关闭标题页，并且可以使用****doc.build(Story, onFirstPage=myFirstPage, onLaterPages=myLaterPages)** 成功启动页眉/页脚 。

但是，当我关闭**canvas.showPage()**时，我的页眉和页脚从第三页开始，而不是第二页。

代码：

```
def firstPage(canvas,doc):
    canvas.setFont('Times-Bold',40)
    canvas.drawString(inch, pageHeight-(3*inch), 'docTitle1') #w,h,txt
    canvas.drawString(2*inch, pageHeight-(4*inch), 'docTitle2')
    canvas.showPage() #force pagebreak

def laterPages(canvas, doc):
    canvas.saveState()
    canvas.setFont('Times-Roman',9)
    canvas.setStrokeColorRGB(2,2,2) #169,169,169)

    canvas.drawString(0.5*inch, pageHeight-(0.75*inch), 'header1')
    canvas.drawString(pageWidth-inch, pageHeight-(0.75*inch), 'header2')
    canvas.drawCentredString(pageWidth/2, 0.65*inch, 'footer1')
    canvas.drawCentredString(pageWidth/2, 0.5*inch, 'footer2')
    canvas.drawString(pageWidth-inch, 0.6*inch, `doc.page`) #page number
    canvas.restoreState()

def build_pdf(elements, doc_name):
    doc = SimpleDocTemplate(doc_name)
    doc.build(elements, onFirstPage=firstPage, onLaterPages=laterPages)

elements = [title, table1, spacer]
doc_name = 'myPDF.pdf'

build_pdf(elements, doc_name) 
```

我怎样才能停止在第一页上绘制并且仍然让 onLaterPages 从第二页开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:20:41.073

尝试：

```
doc.append(PageBreak()) 
```

用于关闭页面并打开下一个页面。

# asp.net-mvc - 如何在剃须刀中获取页面来源？

> ID：11831850
> 
> 赞同：10
> 
> 时间：2012-08-06T16:01:45.533
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, request

我正在寻找这个 javascript 的等价物

```
window.location.origin 
```

但是服务器端，同时构建 mvc 页面。

例如，如果你在这里 [http://website.com/123](http://website.com/123)，它会返回

```
http://website.com 
```

重要的是我有“http://”部分

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-06T16:11:23.810

我是

```
string url = Request.Url.PathAndQuery.length > 1
  ? Request.Url.AbsoluteUri.Replace(Request.Url.PathAndQuery, string.Empty)
  : url; 
```

保留您的 Http/Https、端口（如果适用）和主机名/IP。

[DotNetFiddle 示例](https://dotnetfiddle.net/lp74KW)

更新为说明 PathAndQuery 长度为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:08:56.697

你可以试试

```
@String.Format("{0}://{1}", Request.Url.Scheme, Request.Url.Authority) 
```

或者

```
@String.Format("{0}://{1}", Request.Url.Scheme, Request.Url.Host) 
```

授权将包括端口号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:05:55.260

我认为您正在寻找[Request.Url](http://msdn.microsoft.com/en-us/library/system.web.httprequest.url)或 RawUrl。

[Request.Url 的Uri.Scheme](http://msdn.microsoft.com/en-us/library/system.uri.scheme.aspx)将为您提供有关 http/https 差异的信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-12T23:42:20.483

javascript 中的 window.location.origin 返回当前 url 的协议、端口（如果有）、域和扩展名。

如果您想从 URL 获取相同的信息，接受的答案将提供给您。

如果您想要相同的行为，即一段 javascript 正在调用您的服务器方法并且您想知道它从哪里调用，您可以检查 HttpRequest.URLReferrer。然而，这很容易被欺骗，因此不可靠。

# wpf - WPF TreeView 数据绑定

> ID：11831854
> 
> 赞同：0
> 
> 时间：2012-08-06T16:02:05.027
> 
> 标签：wpf, data-binding, treeview

我正在尝试创建类似于 Outlook 中的帐户视图的树视图。

本质上，我正在寻找以下结构。

1 第一个帐户名称
1.1 收件箱
1.2 已删除邮件
1.3 已发送邮件
2 第二个帐户名称
2.1 收件箱
2.2 已删除邮件
2.3 已发送邮件

帐户（根节点）的数量根据用户而变化。

叶节点的数量是恒定的。

如果可能的话，我想限制对根元素的选择，选择其中一个是没有意义的，它们不会“做”任何事情。

显然，我还需要能够跟踪选择了哪个叶节点。

任何帮助都将不胜感激，我正在绕着这个圈子转。

（我曾尝试关注 Josh Smith 在 CodePlex 上的文章，但这只是暂时增加了混乱）。

谢谢，

加利福尼亚州。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:13:11.260

根据经验，您实际上可能不想为此使用 TreeView。他们使用分层数据模板，如果您使用的是同一类型的父子关系，该模板非常有用，而且深入很多层。但是，您只会深入三个级别，并且没有两个级别共享一个类型。

您可能需要考虑将嵌套的 ItemsControls 样式设置为看起来像树。通过基于 ToggleButton 切换或动画化从属 ItemsControls 的可见性，您可以获得与 TreeView 类似的功能，而不会令人头疼。

Josh Smith 的文章几乎是分层数据模板的福音。如果他的建议不起作用，很可能是因为这是一个方钉圆孔的情况。

# c - 登记处良好做法 (C)

> ID：11831859
> 
> 赞同：0
> 
> 时间：2012-08-06T16:02:24.517
> 
> 标签：c, winapi, registry

如果我想使用 RegGetValue 从注册表中读取变量字符串，这样做是一种好习惯吗？

```
DWORD dwByteCount=20,dwType;
char *value = (char *)malloc(dwByteCount);
HKEY hKey;
LONG lResult;

while(TRUE){
  lResult = RegGetValue(hKey,
              "somesubkey",
              "somevalue",
              RRF_RT_REG_SZ,
              &dwType,
              value,
              &dwBytesAllocated);
  if(lResult == ERROR_SUCCESS){
    break;
  }
  else if(lResult == ERROR_MORE_DATA){
    free(value);
    dwBytesAllocated+=20;
    value = (char *)malloc(dwBytesAllocated);
  }
  else {
    free(value);
    return NULL;
  }

} 
```

# php - 清理/替换所有日文、中文、韩文、俄文等字符

> ID：11831867
> 
> 赞同：2
> 
> 时间：2012-08-06T16:02:48.383
> 
> 标签：php, regex

我有清理 URL 和文件名的功能，它可以很好地处理字符，`éáßöäü`比如`eassoau`使用`str_replace($a, $b, $value)`. 但是如何替换中文、日文……语言中的所有字符？如果因为不容易确定而无法替换，我该如何删除所有这些字符？当然，我可以先像上面一样对其进行消毒，然后删除所有“非拉丁”字符。但也许还有另一个好的解决方案？

**编辑/添加**

正如评论中所问：我的问题的目的是什么？我们有一个客户，一开始有英语、德语和俄语的内容。后来出现了一些中文页面。URL 出现了两个问题：

*   第一个消毒剂杀死了所有“非ASCII字符”并可能返回“空白”（无效）清洁URL
*   客户体验到在某些带有中文字符的浏览器干净的 URL 中不起作用

第一点让我找到了替换这些字符的镜头，当然，正如问题中所述，评论证实了这一点，这是不可能的。也许现在有人回答说，在所有现代浏览器（从 IE8 开始）中，这不再是问题了。我也很高兴听到这个消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:07:00.303

您可以通过现有的消毒剂运行它，然后任何不是拉丁语的，您都可以转换为[punycode](http://en.wikipedia.org/wiki/Punycode)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T16:55:44.393

至于日语，例如，通常有一个*罗马*字表示，它只使用 ascii 字符，并且仍然给出原始字符的可逆和可理解的表示。但是，将某些内容翻译成罗马字需要您知道正确的发音，这通常取决于使用字符的含义或上下文。这使得即使不是不可能简单地正确转换所有内容也很难（或者至少对于简单的消毒剂来说不是有效可行的）。

这同样适用于中国人，甚至更糟。另一方面，韩语有一个非常简单的字符集，应该很容易翻译成罗马表示。另一个常见的问题是没有*单一*的罗马化方法。这些语言通常有不同的人使用的不同的语言（例如日语有两种常见的罗马字）。

因此，这实际上取决于您使用的实际语言；虽然您可能能够使其适用于*某些*语言，但另一个问题是检测您实际使用的是哪种语言（例如，日语和中文共享许多字符，但含义、发音和罗马化通常不兼容）。特别是对于文件名的简单*清理*，我认为不值得投入如此多的工作和处理时间。

也许你应该换个方向工作：让你的文件名简单地作为 unicode 文件名工作。实际上，文件系统中真正无效的字符很少（`*|\/:"<>?`），因此将它们简单地过滤掉并支持 unicode 文件名会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T16:16:56.103

因此，据我了解，您需要为每种语言提供一些字符关系表，并在此表中用关系替换字符。
例如，对于将俄语符号转译为拉丁同义词，我们使用此表 =) 或使用此表的类 =)
这很有趣，我现在找到了[http://derickrethans.nl/projects.html#translit](http://derickrethans.nl/projects.html#translit)

# java - 玩！框架 + Ebean

> ID：11831875
> 
> 赞同：1
> 
> 时间：2012-08-06T16:03:29.647
> 
> 标签：java, database, orm, playframework-2.0, ebean

所以我按照这个官方教程将 Ebean 与我的项目集成：
[http ://www.playframework.org/documentation/2.0/JavaEbean](http://www.playframework.org/documentation/2.0/JavaEbean)

我尝试使用`byId`（`Finder`从数据库中检索对象）的方法
但收到此错误：

> [RuntimeException：没有为名称配置 JPA EntityManagerFactory [默认]]

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:10:09.877

我不能说你错过了什么（在`application.conf`? 中注释了一些行），但要让它工作：浏览`play/samples/java/computer-database/`它使用的播放示例文件夹，`Ebean`这样你就可以看到出了什么问题并对你自己的代码进行额外的修改。

**编辑：**

通过一些基本的 JPA 和 Ebean 相关的错误消息，我怀疑您首先尝试将您的项目配置为使用 JPA，然后转而使用 Ebean。这就是为什么您现在在项目中有重叠的 Ebean 和 JPA 配置，这会导致问题。

试试这个教程来学习使用 Ebean：[http ://www.playframework.org/documentation/2.0/JavaTodoList](http://www.playframework.org/documentation/2.0/JavaTodoList)

# android - 片段内的Android列表视图

> ID：11831878
> 
> 赞同：3
> 
> 时间：2012-08-06T16:03:51.190
> 
> 标签：android, android-listview, android-fragments, android-arrayadapter

我有一个带有 2 个标签的应用程序。每个选项卡都有其各自的片段。在其中一个选项卡上，我需要放置一个列表视图，以便从存储的数组接收数据并将它们作为列表放置。

这是我到目前为止的代码：

```
public class Frag3 extends Fragment{

    ListView lv1;
    ProgressDialog ShowProgress;
    public ArrayList<Post> PostList = new ArrayList<Post>();
    TextView tv1;
    Button button1;

   @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        if (container == null) {
          return null;
       }
                View view = inflater.inflate(R.layout.tab3, container, false);
                //View tv = view.findViewById(R.id.textView1);

                View listView = view.findViewById(R.id.listView1);

               String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                    "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
               "Linux", "OS/2" };

               ArrayAdapter<String> files = new ArrayAdapter<String>(getActivity(), 
                        android.R.layout.simple_list_item_1, 
                        values);

                lv1.setAdapter(files);

        return view;
    }

} 
```

我尝试了来自不同网络参考的各种选项，但它们似乎都不起作用。有人可以指导我前进，因为我现在迷路了，似乎无法理解接下来的步骤。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T16:30:17.787

最大的问题是不匹配的变量名。您`lv1`以班级成员的身份呼唤并为此设置一个列表adatper，但您使用它`listView`来查找视图。其中之一需要改变。

以下更改应该会有所帮助：

```
lv1 = (ListView) view.findViewById(R.id.listView1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T21:39:47.597

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.tab3, container, false);

        listView = (ListView) view.findViewById(R.id.ListView1);        
        listView.setAdapter(files); 
```

尝试在您的代码中执行此操作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T16:26:56.190

尝试扩展`ListFragment`而不是`Fragment`. 这将为您提供类似于`onListItemClick`列表的功能。`getListView()`扩展时也可以使用`ListFragment`。然后在你的xml中你可以使用android `list`id：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

<TextView android:id="@android:id/empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

然后在您的 onActivityCreated() 中，您可以使用[setListAdapter](http://developer.android.com/reference/android/app/ListActivity.html#setListAdapter%28android.widget.ListAdapter%29)设置列表适配器，而无需使用`findViewById`

# java - if (boolean == false) 与 if (!boolean)

> ID：11831881
> 
> 赞同：39
> 
> 时间：2012-08-06T16:04:00.160
> 
> 标签：java, boolean, boolean-logic, boolean-expression

> **可能重复：**
> [明确比较布尔常量是否很糟糕，例如 Java 中的 if (b == false)？](https://stackoverflow.com/questions/2661110/is-it-bad-to-explicitly-compare-against-boolean-constants-e-g-if-b-false-i)

在[这个 NotePadProvider 示例代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.3.4_r1/com/example/android/notepad/NotePadProvider.java#NotePadProvider.insert%28android.net.Uri,android.content.ContentValues%29)中，我注意到作者选择了表单：

```
 if (values.containsKey(NoteColumns.CREATED_DATE) == false) {
        values.put(NoteColumns.CREATED_DATE, now);
    } 
```

超过：

```
 if (!values.containsKey(NoteColumns.CREATED_DATE)) {
        values.put(NoteColumns.CREATED_DATE, now);
    } 
```

第一种形式比更合乎逻辑的形式有什么优势吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-06T16:05:30.020

除了“可读性”之外，没有。它们在功能上是等效的。

[（“可读性”用引号引起来，因为我讨厌`== false`并且发现`!`可读性更高。但其他人则没有。）]

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-06T16:10:11.223

主要是可读性。**在阅读其他代码时，阅读为NOT CONTAINS KEY** `!values.containsKey(NoteColumns.CREATED_DATE)`而不是阅读**CONTAINS KEY IS FALSE** 更直观`(values.containsKey(NoteColumns.CREATED_DATE) == false)`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-06T16:05:11.720

这是一种风格选择。它至少不会影响代码的性能，它只会让读者更加冗长。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-06T16:08:04.593

**-**这里更多的`coding style`是关于**功能**......

**-**第**一个选项非常明确**，但**第二个选项非常优雅**......没有冒犯，这只是我的观点......

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-06T16:07:34.703

不，我没有看到任何优势。第二个更严格。

顺便说一句：在 JDK 源代码的每个角落都可以找到第二种风格。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-06T16:31:37.887

注意：使用 ConcurrentMap 您可以使用更高效的

```
values.putIfAbsent(NoteColumns.CREATED_DATE, now); 
```

我更喜欢不那么冗长的解决方案，并避免使用 IsTrue 或 IsFalse 之类的方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-06T16:11:32.907

第一种形式与返回`Boolean`并与 Boolean.FALSE 比较的 API 一起使用时，永远不会抛出`NullPointerException`.

第二种形式，当与`java.util.Map`接口一起使用时，也永远不会抛出 a `NullPointerException`，因为它返回 a`boolean`而不是 a `Boolean`。

如果您不关心一致的编码习惯用法，那么您可以选择您喜欢的那个，在这种具体情况下，这并不重要。如果您*确实*关心一致的编码，那么在检查`Boolean`可能是`NULL`.

# c# - 带有弹出窗口的 Windows phone7 自定义消息框

> ID：11831882
> 
> 赞同：1
> 
> 时间：2012-08-06T16:03:59.973
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

在我的应用程序中，我使用 Popup 创建了一个自定义消息框（具有不同的背景颜色）。它有一个按钮，我已经实现了按钮单击事件。

在单击按钮时，它有一个消息框，并根据“确定”或“取消”从那里开始执行操作。

问题是在我单击弹出窗口（自定义消息框）中的按钮后，消息框加载，但弹出窗口（自定义消息框）仍然出现在后台。我需要自定义弹出窗口完全关闭并执行操作。因此，我已将其用作`popup.IsOpen = false;`按钮单击中的第一条语句，但它仍然出现在后台，直到它完成整个按钮单击事件。我搜索了其他属性，但没有找到任何工作。

以下是代码

```
 Popup popup = new Popup();
        popup.Height = 300;
        popup.Width = 480;
        popup.VerticalOffset = 100;
        CustomMessageBox control = new CustomMessageBox();
        popup.Child = control;

        popup.IsOpen = true;
        this.IsEnabled = false;

        control.OK_BTN.Click += (s, args) =>
        {
            popup.IsOpen = false;
            this.IsEnabled = true;

            MessageBoxResult result = MessageBox.Show("Do you want to reset the settings ?", "Settings", MessageBoxButton.OKCancel);

                if (result == MessageBoxResult.OK)
                {
                    changeSettings();
                }
        }; 
```

任何实现这一目标的建议都将受到高度赞赏。谢谢...！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:59:47.087

发生这种情况的原因是因为所有这些都发生在 UI 线程上，该线程在您返回之前一直被阻塞。在您的按钮处理程序返回之前，不会对 UI 进行任何更新。

如果您真的希望弹出窗口首先消失，您需要执行类似的操作

```
 control.OK_BTN.Click += (s, args) =>
        {
            popup.IsOpen = false;
            this.IsEnabled = true;

            Dispatcher.BeginInvoke(() =>
                {
                    MessageBoxResult result = MessageBox.Show("Do you want to reset the settings ?", "Settings", MessageBoxButton.OKCancel);

                    if (result == MessageBoxResult.OK)
                    {
                        changeSettings();
                    }
                });
        }; 
```

这将在您的按钮处理程序返回后强制打开 MessageBox。但是您确定要让弹出窗口先消失吗？如果用户在消息框上单击取消怎么办？通常，消息框直接出现在调用它的任何内容之上，并且不会替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T21:05:51.283

我只是在输入 Negative Eddy 写的内容。

使用 Dispatcher.BeginInvoke 将起作用！我测试了它，完美运行。我没有足够的代表来评论他的显然。

# jenkins - 带有自定义端口的服务器上的詹金斯奴隶

> ID：11831886
> 
> 赞同：3
> 
> 时间：2012-08-06T16:04:24.160
> 
> 标签：jenkins, port, slave

我已经在 suse 12.1 上安装了 jenkins，并将配置中的端口更改为 8081

```
/etc/sysconfig/jenkins 
```

JENKINS_PORT="8081"

网络界面在这个端口上没有任何问题，但是当我想用 JNLP 启动客户端时，他给了我标准端口：

```
javaws http://192.168.1.137:8080/computer/192.168.1.190/slave-agent.jnlp 
```

现在我尝试使用正确的端口运行它：

```
javaws http://192.168.1.137:8081/computer/192.168.1.190/slave-agent.jnlp 
```

但过了一会儿，我得到一个错误：

```
java.io.FileNotFoundException: http://192.168.1.137:8080/jnlpJars/remoting.jar
    at sun.reflect.GeneratedConstructorAccessor1.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at com.sun.deploy.net.BasicHttpRequest.doRequest(Unknown Source)
    at com.sun.deploy.net.BasicHttpRequest.doGetRequestEX(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getResource(Unknown Source)
    at com.sun.javaws.LaunchDownload$DownloadTask.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.FileNotFoundException: http://192.168.1.137:8080/jnlpJars/remoting.jar
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at java.net.HttpURLConnection.getResponseCode(Unknown Source)
    ... 14 more 
```

他尝试了错误的端口。如何正确更改端口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T22:21:40.150

您是否通过管理 Jenkins → 配置系统 → Jenkins URL 下的配置选项更新了 URL？

# jquery - 使用 Jquery 将文本字段输入自动限制为仅数字？

> ID：11831889
> 
> 赞同：0
> 
> 时间：2012-08-06T16:04:35.747
> 
> 标签：jquery, validation

一直在做一些研究，但还没有找到适合我的解决方案。基本上，我有一个小的管理部分，需要输入数字进行计算。只有数字。但是，用户有时可以复制和粘贴包括 $ 或 % 字符。

现在，我发现了这个：[输入字段，只有数字 jquery/js](https://stackoverflow.com/questions/1276452/input-field-only-numbers-jquery-js)

```
$("input[type=text]").keypress(function (e){
  var charCode = (e.which) ? e.which : e.keyCode;
  if (charCode > 31 && (charCode < 48 || charCode > 57)) {
    return false;
  }
}); 
```

这在 TYPING 期间完美运行，但是，如果用户复制并粘贴“$1230”，它会将 $ 保留在那里。我希望它自动剥离它......

所以，基本上，我在想而不是“返回假”，我需要某种“替换”？那会是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:07:43.033

使用`on`代替,和`keypress`事件：`keypress``change`

```
$("input[type=text]").on("keypress change", (function (e){
  var charCode = (e.which) ? e.which : e.keyCode;
  if (charCode > 31 && (charCode < 48 || charCode > 57)) {
    return false;
  }
}); 
```

# android - Apprequest 不发送通知

> ID：11831890
> 
> 赞同：3
> 
> 时间：2012-08-06T16:04:38.677
> 
> 标签：android, facebook

大家好，我正在尝试使用 Facebook Api 发送通知，我这样做了：

```
Bundle params = new Bundle();
params.putString("to", 535465135216);
params.putString("message", "Prova Prova A A");
facebook.dialog(Answer.this, "apprequests", params, new DialogListener() {
                public void onComplete(Bundle values) {
                                    Toast toast = Toast.makeText(getApplicationContext(), "Done",
                                            Toast.LENGTH_SHORT);
                                    toast.show();
                                }

                                @Override
                public void onFacebookError(FacebookError error) {
                                    Toast.makeText(getApplicationContext(), "Facebook Error: " + error.getMessage(),
                                            Toast.LENGTH_SHORT).show();
                                }

                                @Override
                public void onCancel() {
                                    Toast toast = Toast.makeText(getApplicationContext(), "App request cancelled",
                                            Toast.LENGTH_SHORT);
                                    toast.show();
                                }

                                @Override
                public void onError(DialogError e) {
                                    // TODO Auto-generated method stub

                                }
                            }); 
```

当我尝试运行这个项目时，一切正常，它显示 Toast“完成”，但在我的 Facebook 个人资料中没有出现通知。

我应该更改 Facebook 应用程序的设置吗？

谢谢你 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T14:28:46.750

很多时候，邀请已成功发送但未向用户显示，这是因为未在应用程序设置中设置画布 url。

canvas url 参数在处理应用程序邀请/请求时至关重要，因为当用户对邀请采取操作（这意味着单击“接受”）时，他会被重定向到您的应用程序。如果没有提供画布 url，则邀请实际上会失效，因为 Facebook 在用户点击后无法将其发送到哪里！

您正在开发一个 android 应用程序，因此您甚至可能不需要画布 url，但为了使邀请正常工作，您必须指定一个。

* * *

另一种可能性是，当您的应用程序仍设置为“沙盒模式”时，您正在向未在应用程序的“角色”中定义的用户发送邀请/请求。只要您的应用程序仍处于沙盒模式，它对“角色”部分中未定义的任何人基本上是不可见的。这种沙盒模式允许开发人员开发和测试他们的应用程序，而不必担心在 Facebook 上公开它。因此，您将能够发送邀请，但如果您将邀请发送给未定义且未参与应用程序开发的人，她/他将根本不会收到邀请（即使该操作看起来像是成功的）。

# android - 如何确保 AsyncTask 在我的活动被终止之前完成？

> ID：11831894
> 
> 赞同：3
> 
> 时间：2012-08-06T16:05:08.087
> 
> 标签：android, android-asynctask, android-activity, robotium, ormlite

我的`Unable to destroy activity xxx: android.database.sqlite.SQLiteException: unable to close due to unfinalised statements`活动被破坏时出现错误。我认为这是因为我正在从 AsyncTasks 中执行数据库操作，并且它们在完成之前以某种方式被杀死。

如何确保`AsyncTasks`在活动停止之前我的实际完成？顺便说一句，我认为如果没有通过检查同意这样做， `AsyncTask`就不能明确地杀死一个。`AsyncTask`

在 Robotium 集成测试期间发生此错误可能与此相关。我怀疑它是在测试完成并且测试调用之后发生的`Robotium.finishOpenedActivities()`。我的猜测是，`AsyncTask`如果可能的话，会以某种方式在执行过程中被强制终止（尽管我不明确支持在我的`AsyncTask`实现中取消）。此外，我使用 OrmLite 进行数据库访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:05:46.570

看起来如果我`onPause()`在我的活动中覆盖事件，并从被覆盖的`onPause()`中调用`cancel(false)`，`AsyncTasks`那么活动在`AsyncTasks`完成之前不会被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:19:56.507

您可以随时核对`AsyncTask.getStatus()`。`AsyncTask.Status.RUNNING`

也许你需要让你的活动和你的 AsyncTask 互相了解，正如这个问题中所问的那样[AsyncTask 在概念上真的有缺陷还是我只是错过了什么？](https://stackoverflow.com/questions/3357477/is-asynctask-really-conceptually-flawed-or-am-i-just-missing-something)@hackbod 的回答准确地解释了如何

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T17:26:49.140

您可以在这里做几件事：

1.  覆盖这些方法并查看对象在关闭时的确切状态。似乎 onPostExecute 将在 AsyncTask 完成时被调用。如果它没有被称为为时过早。

    ```
    protected void onProgressUpdate(Integer... progress) {
       setProgressPercent(progress[0]);
    }

    protected void onPostExecute(Long result) {
    } 
    ```

2.  也可以执行如下：

    ```
    // with THREAD_POOL_EXECUTOR.
    executeOnExecutor(java.util.concurrent.Executor, Object[]) 
    ```

3.  确保您遵循文档中的前两条规则：您是否遵循 1 和 2？

    要使此类正常工作，必须遵循一些线程规则：

    1.  AsyncTask 类必须在 UI 线程上加载。这是从 JELLY_BEAN 自动完成的。

    2.  任务实例必须在 UI 线程上创建。

    3.  必须在 UI 线程上调用 execute(Params...)。

    4.  不要手动调用 onPreExecute()、onPostExecute(Result)、doInBackground(Params...)、onProgressUpdate(Progress...)。

    5.  该任务只能执行一次（如果尝试第二次执行将引发异常。）

# php - Php Gdlib图像调整内存大小？

> ID：11831903
> 
> 赞同：1
> 
> 时间：2012-08-06T16:05:29.107
> 
> 标签：php, image-processing, image-resizing, gdlib

我正在尝试上传和调整 JPG 照片的大小。上传照片后，我会调整其大小，但出现以下错误：

> 致命错误：允许的内存大小为 67108864 字节已用尽（试图分配 15104 字节）

配置（`php.ini`）：

```
memory_limit = 64M 
```

PHP：

```
ini_set("memory_limit", "64M"); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:15:52.667

让我们进行转换：

> 67 108 864 字节 = 65 536 千字节 = 64 兆字节
> 
> 67 123 968 字节 = 64 兆字节 + 15 104 字节（过低）

结论：**`64M`**还不够。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:22:16.560

使用 GD 调整 jpeg 图像的大小时，文件大小对内存使用的影响通常不如图像尺寸那么大。这是因为 jpeg 具有众所周知的高压缩率和 GD 功能，例如[`imagecreatefromjpeg`](http://php.net/manual/en/function.imagecreatefromjpeg.php)会生成未压缩的图像/像素数据。您可以通过尝试至少以下几件事之一来避免错误：

1.  `memory_limit`进一步增加
2.  上传后立即检查图像尺寸，如果图像的像素数超过一定数量，请避免进一步处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T16:26:29.623

解压后的图像每个像素至少占用 3 个字节，因此如果您的图像非常大，您可能会遇到麻烦。但是，也可能是您的代码有问题。不要忘记在内存中不再需要的任何图像上调用[imagedestroy 。](http://www.php.net/manual/en/function.imagedestroy.php)

# python - 在导入的文件中找不到属性

> ID：11831905
> 
> 赞同：0
> 
> 时间：2012-08-06T16:05:30.600
> 
> 标签：python, import, tkinter, attributeerror

我正在尝试为作为 rlg 导入的程序制作一个按钮界面。rlg 有一个实时图形系统，其中两个变量可以随着模拟的进行而被测量和更新。我希望能够使这两个变量具有选择性，因此我在 rlg 的 main() 方法中创建了一个字典“graphLines”，其中下拉菜单上的每个字符串选择都充当一个键。但是我似乎无法访问它并收到错误消息：AttributeError：'function'对象没有属性'graphLines'。谁能看到我做错了什么。

```
from Tkinter import *
import runlivegraph3 as rlg

def run():
    rlg.main()

def setLine1(name):
    rlg.main.Line1data = rlg.main.graphLines[name] #graphlines is a dictionary in runlivegraph3 main method

def setLine2(name):
    rlg.main.Line2data = rlg.main.graphLines[name]

root = Tk()

var1 = StringVar()
var1.set("select graph line 1 data") #initial variable in drop down menu, each string is a key in the graphLines dictionary
op1 = OptionMenu(root, var1, 'Political attacks in turn',
                 'Ethnic attacks in turn',
                 'Total attacks in turn',
                 'Ethnic attacks as a percentage of total attacks',
                 'Political attacks as a percentage of total attacks',
                 'Group 1 ethnic antagonism',
                 'Group 2 ethnic antagonism',
                 command = setLine1).pack()

var2 = StringVar()
var2.set("select graph line 2 data") #initial variable in drop down menu
op2 = OptionMenu(root, var2, 'Political attacks in turn',
                 'Ethnic attacks in turn',
                 'Total attacks in turn',
                 'Ethnic attacks as a percentage of total attacks',
                 'Political attacks as a percentage of total attacks',
                 'Group 1 ethnic antagonism',
                 'Group 2 ethnic antagonism',
                 command = setLine2).pack()
butn = Button(root, text = 'run',  command = run)
butn.pack()
root.mainloop() 
```

这是我在 Tkinter 按钮程序中导入的程序的 main() 函数

```
from matplotlib.pylab import *
import sys, random, time, csv
def main():

IDs = {}
boardDims = (20,20)
Line1data = None
Line2data = None
turnLimit = 40
pause = 0.0001

ethnicPred = []
politicalPred = []
totalAttacks = []
generation = []
data1 = []
data2 = []
data3 = []
ethAnt1 = []
ethAnt2 = []
polAnt1 = []
polAnt2 = []
EthnicAttacksInTurn = []
PoliticalAttacksInTurn = []
TotalAttacksInTurn = []
ProportionEth = []
ProportionPol = []

board = make_board(boardDims)

finallyAddAgents(IDs, board, boardDims)
splitAgents(IDs)
setRemainingPolitics(IDs)
setPoliticalAntagonism(IDs)

turn = 0
line1, = plot(turn, 0, 'b')  #initialise lines
line2, = plot(turn, 0, 'r')
running = 1
while running:
    ion()   #sets up graph base and axes
    axes()
    xlim(0,turnLimit)
    ylim(0,30)
    if turn == turnLimit: running = 0
    print_board3(IDs, board, boardDims)
    print 'turn ', str(turn)
    polAttackTurn = []
    ethAttackTurn = []
    AllAgentsPerformActions(IDs, board,turn,ethnicPred, politicalPred,
                            totalAttacks,polAttackTurn,ethAttackTurn)

    totalAttackTurn = sum(ethAttackTurn) + sum(polAttackTurn)
    if totalAttackTurn != 0:
        propEth = (sum(ethAttackTurn)*100)/totalAttackTurn
        propPol = (sum(polAttackTurn)*100)/totalAttackTurn        
    if totalAttackTurn == 0:
        propEth = 0
        propPol = 0
    TotalAttacksInTurn.append(totalAttackTurn)
    EthnicAttacksInTurn.append(sum(ethAttackTurn))
    PoliticalAttacksInTurn.append(sum(polAttackTurn))
    ProportionEth.append(propEth)
    ProportionPol.append(propPol)

    k =  sum(politicalPred)
    j = sum(ethnicPred)
    #f = sum(totalAttacks)
    #print k, j, f
    data1.append(j)
    data2.append(k)
    #data3.append(f)
    generation.append(turn)
    for agent in IDs.values():
        if agent.group == '1':
            ethAnt1.append(agent.antagonism['2'])
            break
    for agent in IDs.values():
        if agent.group == '2':
            ethAnt2.append(agent.antagonism['1'])
            break
    for agent in IDs.values():
        if agent.politics == 'A':
            polAnt1.append(agent.polAntagonism['B'])
            break
    for agent in IDs.values():
        if agent.politics == 'B':
            polAnt2.append(agent.polAntagonism['A'])
            break
    #this is the dictionary i am trying to access from the Tkinter button program
    graphLines = {'Political attacks in turn':sum(polAttackTurn),
              'Ethnic attacks in turn':sum(ethAttackTurn),
              'Total attacks in turn':totalAttackTurn,
              'Ethnic attacks as a percentage of total attacks': propEth,
              'Political attacks as a percentage of total attacks': propPol,
              'Group 1 ethnic antagonism': ethAnt1[-1],
              'Group 2 ethnic antagonism': ethAnt2[-1]}

        line1.set_ydata(append(line1.get_ydata(), Line1data))
        line1.set_xdata(append(line1.get_xdata(), turn))
        line2.set_ydata(append(line2.get_ydata(), Line2data))
        line2.set_xdata(append(line2.get_xdata(), turn))
        draw()
        turn += 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:22:13.780

我想我最好把我的评论变成一个答案，所以我开始了。

您对变量和属性之间的差异感到困惑，因此我将通过一些示例来解释差异。您的问题实际上不是导入问题，而是更多关于范围和面向对象编程（OOP）的问题。

**（例如1）**要在函数中设置局部变量，您可以执行以下操作：

```
def spam():
    eggs = 5 
```

**（例如2）**要在函数对象上设置属性（通常不那么合乎逻辑），您可以执行以下操作：

```
def spam():
    pass
spam.eggs = 5 
```

虽然这些看起来很相似，但它们的效果却大不相同。在第一个示例中，`eggs`是函数中的局部变量`spam`。*局部变量只能*在其定义函数内创建、访问和修改。

```
def spam():
    eggs = 5
print spam.eggs 
```

但是会导致错误

```
def spam():
    pass
spam.eggs = 5
print spam.eggs 
```

将不会。在第二个示例中，`eggs`是函数 (object) 的属性`spam`。它可以在对象的方法内或对象外创建、访问和修改，但*不能*作为局部变量在函数本身内创建、访问和修改（也因为函数在完全定义之前不知道它的存在）。因此，以下将引发错误：

```
def spam():
    print eggs
spam.eggs = 5
spam() 
```

因为`eggs`是属性，而不是局部变量。

## 如果你熟悉 OOP，这里有一些扩展：

第一个示例相当于：

```
class Spam(object):
    def __init__(self):
        eggs = 5 
```

而第二个例子相当于：

```
class Spam(object):
    def __init__(self):
        self.eggs = 5 
```

就 OOP 而言，区别只是第一个设置了局部变量，而第二个设置了实例变量。尝试`Spam().eggs`在第一节课上做是没有意义的，而在第二节课上却可以。

## 最后，

要解决您的问题，请在函数之外定义您需要的变量，或者使用`global`关键字来表明它们是全局的。示例用法：

```
def spam():
    global eggs
    eggs = 5
spam()
print eggs  # Prints 5 
```

# c# - c#中的SQL表/视图设计器

> ID：11831916
> 
> 赞同：2
> 
> 时间：2012-08-06T16:05:56.400
> 
> 标签：c#, sql-server, database-design, runtime

我正在开发一个应用程序，该应用程序需要最终用户进行“一些”定制，从而影响数据库设计（超出参数化）。

现在，该应用程序支持在运行时使用现有表甚至新表的新列。但最终用户无法更改表格，所有设计工作都必须使用 Microsoft SQL Server Magament Studio 完成。

我的问题是：*是否有任何类型的控件（或工具）可以实现此功能？*我想将它嵌入到我的应用程序中，但如果它是一个外部工具就不会那么糟糕了。

我想要的是一些工具，让用户定义列（名称、类型、大小）的存储库，例如：

*   客户代码，BIGINT，不适用
*   客户姓名，Varchar，50

然后通过添加这些预定义的列来创建或更改表或视图。下面应该执行所需的 SQL 脚本，或者可能使用 SMO（SQL 管理对象）。

**更新**

目前它的应用程序与 WinForms 一起工作，但任何 WPF / ASP 解决方案将不胜感激。

提到和最终用户，我是指应用程序管理员，但不具备编程技能。

**目的**

目的是能够从自己的应用程序中扩展和自定义功能，而无需使用 SQL Server Managment Studio。

想象一下，您有一个 ERP，作为用户，您想在您的客户表中告知该应用程序原本不打算使用的内容，甚至没有可用字段，例如：GPS 位置、徽标、CEO 的照片......

当然我可以建议一些高级用户安装 SSMS Express，但这会给他们太多的自由。我也认为它是一种 IT 工具。我想要的是开发从应用程序自己的框架修改应用程序的能力。

如果可以从自己的应用程序中完成，则可以执行一些控制：

*   检查名为 X 的表字段是否总是使用相同的类型定义，
*   禁用修改不可自定义字段（应用程序字段）的功能，
*   ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:36:04.583

亚历克斯，我认为您应该尝试让用户灵活地向数据库添加新信息，而无需真正改变数据库的设计。

您可以查看 EAV 模型（实体属性值）。这使您可以灵活地向客户添加任何新属性，而无需更改客户表的设计（例如）。

一个很好的例子是 Magento，他们在 EAV（实体属性值）方面做得很好，但你必须知道这种设计模型会对你的性能产生一点影响（或者很大程度上取决于你如何实现它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:37:01.770

貌似这种控件是不存在的，所以我从0开始刮。

@BrunoCosta 使用 EAV 模型来扩展标准应用程序的想法是一种很好的做法。但是我假装有一个工具来修改标准，并且有一个用于最终用户和开发人员的工具。嵌入在应用程序中的伪 SQL Server Studio + Visual Studio。

开发完成后，我会将其发布到 CodeProject 中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T16:11:46.347

我认为您正在寻找的控件可能有点太独特了。但是，我认为使用其他控件/库自己创建它不会太困难。

我刚刚完成了一个类似的 WPF 项目。我发现[DataGrid](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagrid%28v=vs.90%29.aspx#Y0)类可以很好地表示一个表。您可以以编程方式添加/删除列。尽管您将自己生成 SQL 脚本。

# java - 来自 csh 脚本的回显未显示在终端上

> ID：11831921
> 
> 赞同：0
> 
> 时间：2012-08-06T16:06:06.073
> 
> 标签：java, process, csh

我目前正在从 GUI 按钮执行 csh shell 脚本。该脚本最初调用另一个 sql 脚本从数据库中选择信息并将其输出到 tmp 目录中的日志文件中。我现在需要 CAT 那个文件并在 xterm 窗口上显示它。我使用 java`Runtime.exec()`方法来执行命令，我想我有两个可以使用的选项

1.  重定向 std 输出以在 xterm 上显示它
2.  使用 csh 脚本从日志文件中读取并将其输出到 xterm

所以我选择了选项 2，我什至无法让 csh 脚本输出一个简单的 hello world，这意味着当我从 netbeans 运行它时，我无法在屏幕上显示任何内容。当我尝试直接从 xterm 运行脚本时，它可以工作。这是脚本代码

```
#!/bin/csh -f

#set MYSQL=${MYSQL_HOME}/mysql
#set PSQL=${PSQL_HOME}/psql

echo "Hello World"

#set      REPORT=${CLEADM_HOME}/Scripts/DataValidation/CLEADM_EarthOrientationParametersDataReport.sql

#${REPORT}

#${PSQL} ${CLEDBUSER}<${REPORT} 

#Get the number of lines in the report file for scrollbar control
#set lc='wc -l /tmp/results.log'
#echo $lc 
```

我将所有内容都注释掉，只是想看看我是否可以将结果打印（回显）到屏幕上，但这不起作用。当我直接从 xterm ( `~/.mysqlconnection.csh`) 运行它时，它似乎可以工作并打印出“Hello World”。我不知道出了什么问题。所以我试图通过在我的脚本顶部添加这段代码来强制终端出现

```
/usr/openwin/bin/XTERM \    this opens up the xterm but leaves it frozen for some reason? now i cant access anything on my computer 
```

下面是我用来从 java 按钮执行 csh 脚本的代码。我在按钮后面调用这个方法

```
public class RunShellScript {

public static void runShellScript (String unixCommand) 
{
 try {
     Runtime runtime=Runtime.getRuntime();
     Process process=runtime.exec(new String [] { "/bin/csh", "-c", unixCommand});

     InputStream stderr=process.getErrorStream();
     InputStreamReader isr=new InputStreamReader (stderr);
     BufferedReader br=new BufferedReader (isr);
     String line=null;
     System.out.println("<ERROR>");

     while((line=br.readLine())!=null)
         System.out.println(line);

     System.out.println(line);
     int exitVal=process.waitFor();
     System.out.println("Process exitValue:" + exitVal);
 }
 catch (Throwable t)
 {
     t.printStackTrace();
 } 
```

在某处我需要将输出重定向到一个 exterm，我很困惑如何使用 streamreader 来添加它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:38:27.727

编辑 - 由于我严重误解了要求，因此我完全重新开始回答。

如果每次用户按下按钮时都想要一个新窗口，那么从 csh 脚本打开一个 xterm 应该可以；尝试这个：

```
/usr/openwin/bin/xterm -e "bash -c 'cat /tmp/results.log; echo press a key to continue; read'" & 
```

如果您想要一个永远保持打开状态的窗口，但每次用户按下按钮时都会不断更新新结果，那就有点不同了。我会尝试从 Java 生成另一个窗口。您可以有一个单独的 Java 窗口/框架，或者使用另一个 xterm。要使用另一个 xterm，请尝试以`Process`某种方式运行，如下所示：

```
new ProcessBuilder("/usr/openwin/bin/xterm","-e","tail -f /tmp/results.log").start(); 
```

这将打开文件上的`tail -f`命令`results.log`，并且您添加到日志文件的所有内容都将显示在 xterm 中。

# database - 更新数据库表 ltrim rtrim 太慢

> ID：11831924
> 
> 赞同：1
> 
> 时间：2012-08-06T16:06:22.920
> 
> 标签：database, sybase

我有一张大约有 500000 条记录的表。我需要更新这些字段，并且我正在使用以下说明：

```
update myTable set myField = ltrim(rtrim(myField)) 
```

但是该指令需要一个小时才能执行。我试过使用 where 子句 ex：

```
update myTable set myField = ltrim(rtrim(myField)) where myPrimaryKey >= 0 and myPrimaryKey <= 50000 
```

但是执行时间也很慢。

有任何想法吗？如何提高更新的性能？问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:55:26.370

好的。我使用 CURSOR 减少了时间。

```
DECLARE cursor_prueba CURSOR FOR
select A, B, C from MyTable order by A
' A is PrimaryKey

OPEN cursor_prueba
FETCH cursor_prueba INTO @varA, @varB, @varC

WHILE @@FETCH_STATUS = 0
BEGIN
    update MyTable set B = ltrim(rtrim(B)), C = ltrim(rtrim(C)) where A = @varA

    FETCH cursor_prueba INTO @varA, @varB, @varC
END

CLOSE cursor_prueba
DEALLOCATE cursor_prueba 
```

我希望这有帮助。
问候大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:51:20.397

尝试单独为此更新临时创建一个`non-clustered index`over并尝试此更新脚本。`myField`

# java - 如何将掩码设置为 SWT 文本以仅允许小数

> ID：11831927
> 
> 赞同：4
> 
> 时间：2012-08-06T16:06:34.373
> 
> 标签：java, text, swt

我想要的是用户只能在文本上输入十进制数字，我不希望它允许文本输入为：

1.  你好
2.  ABC.34
3.  34.嘿
4.  32.3333.123

我一直在尝试使用VerifyListener，但它只给了我插入的文本部分，所以我最终得到了我想要插入的文本和插入之前的文本，还尝试组合文本，但我遇到了问题当您删除一个键（退格）时，我最终得到了一个像 234[BACKSPACE]455 这样的字符串。

有没有办法在 Text 上设置 Mask 或成功将 VerifyEvent 与当前文本结合以获得“新文本”，然后再将其设置为 Text？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-06T16:12:18.313

您必须`Listener`在`Text`using上添加一个`SWT.Verify`。在此`Listener`您可以验证输入是否仅包含十进制数。

以下将只允许在文本字段中插入小数。每次您更改文本中的某些内容并拒绝它时，它都会检查该值，如果它不是小数。这将解决您的问题，因为在`VerifyListener`插入新文本之前执行。新文本必须通过侦听器才能被接受。

```
public static void main(String[] args) {
    Display display = Display.getDefault();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    final Text textField = new Text(shell, SWT.BORDER);

    textField.addVerifyListener(new VerifyListener() {

        @Override
        public void verifyText(VerifyEvent e) {

            Text text = (Text)e.getSource();

            // Get old text and create new text by using the VerifyEvent.text
            final String oldS = text.getText();
            String newS = oldS.substring(0, e.start) + e.text + oldS.substring(e.end);

            try
            {
                Float.parseFloat(newS);
            }
            catch(NumberFormatException ex)
            {
                // Prevent the input from happening, as it's not a float
                e.doit = false;
            }

            System.out.println(newS);
        }
    });

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:19:06.427

你试过 Nebula 的 FormattedText Widgets 吗？- 它们是实现此类输入字段的简单方法，请参阅[http://eclipse.org/nebula/widgets/formattedtext/formattedtext.php](http://eclipse.org/nebula/widgets/formattedtext/formattedtext.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-17T18:06:20.337

为了获得我想要的行为，我必须使用几个侦听器：

*   VerifyListner 限制在键入时被接受为部分输入的字符
*   FocusListener 在离开焦点时验证总输入。如果总输入无效，将显示错误装饰。
*   ModifyListener 检查是否可以在键入时隐藏错误装饰。它不显示错误装饰，因为允许像“4e-”这样的无效部分输入最终输入“4e-3”

    ```
    valueField.addVerifyListener((event) -> restrictInput(event));
    valueField.addModifyListener((event) -> validateValueOnChange(valueField.getText()));

    valueField.addFocusListener(new FocusListener() {
        @Override
        public void focusGained(org.eclipse.swt.events.FocusEvent e) {}
        @Override
        public void focusLost(org.eclipse.swt.events.FocusEvent event) {
            validateValueOnFocusLoss(valueField.getText());
        }
    });

    protected void restrictInput(VerifyEvent event) {
        String allowedCharacters = "0123456789.,eE+-";
        String text = event.text;
        for (int index = 0; index < text.length(); index++) {
            char character = text.charAt(index);
            boolean isAllowed = allowedCharacters.indexOf(character) > -1;
            if (!isAllowed) {
                event.doit = false;
                return;
            }
        }
    }

    protected void validateValueOnChange(String text) {
        try {
            Double.parseDouble(valueField.getText());
            valueErrorDecorator.hide();
        } catch (NumberFormatException exception) {
            //expressions like "5e-" are allowed while typing
        }
    }

    protected void validateValueOnFocusLoss(String value) {
        try {
            Double.parseDouble(valueField.getText());
            valueErrorDecorator.hide();
        } catch (NumberFormatException exception) {
            valueErrorDecorator.show();
        }
    } 
    ```

ModifyListener 可以进一步改进以检查不能最终给出有效总输入的部分输入，例如“4e-....3”。在这种特殊情况下，ModifyListener 应该在键入时激活错误修饰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-03T11:52:02.820

除了@Tom Seidel 的回答：
您可以使用`org.eclipse.swt.widgets.Spinner`. 这仅允许数字。您可以指定最小值和最大值，返回值是 a`int`所以不需要强制转换 a `String`。

```
final Composite composite parent = new Composite(superParent, SWT.NONE);
parent.setLayout(new FillLayout());
final Spinner spinner = new Spinner(parent, SWT.BORDER);
spinner.setvalues(0, 10, Integer.MAX_VALUE, 0, 1, 10); 
```

的值`Spinner`可以通过调用来检索：

```
int selectedValue = spinner.getSelection(); 
```

# android - “adb -r install /package.adb” 不会在设备上重新启动应用程序

> ID：11831928
> 
> 赞同：0
> 
> 时间：2012-08-06T16:06:39.240
> 
> 标签：android, adb

我可以使用所有 adb 功能，但是当我尝试使用`adb -r install /package.adb`它时，它只会给我：

> “2858 KB/s（1.406 秒内 4116553 个字节）”

就是这样，没有任何反应。当我在另一台计算机上执行此操作时，它会部署应用程序并重新启动它。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:11:17.377

安装后尝试运行此命令：

```
adb shell am start -a android.intent.action.MAIN -n your.package/.possibleSubfolder.MyMainActivity 
```

# sql - 日期中的 SQL 间隔

> ID：11831930
> 
> 赞同：2
> 
> 时间：2012-08-06T16:06:42.220
> 
> 标签：sql, tsql

我试图根据表格看起来像这样的状态代码来查找表格中的空白。

状态表：

```
StateID (PK) | Code
--------------------
1            | AK
2            | AL
3            | AR 
```

状态模型表：

```
StateModelID | StateID | EfftiveDate            | ExpirationDate
-------------------------------------------------------------------------
1            |  1      | 2012-06-28 00:00:00.000| 2012-08-02 23:59:59.000
2            |  1      | 2012-08-03 00:00:00.000| 2050-12-31 23:59:59.000
3            |  1      | 2055-01-01 00:00:00.000| 2075-12-31 23:59:59.000 
```

我正在使用的查询如下：

```
Declare @gapMessage varchar(250)
SET @gapMessage = ''

select
@gapMessage = @gapMessage + 
  (Select StateTable.Code FROM StateTable where t1.StateID = StateTable.StateID) 
  + ' Row ' +CAST(t1.StateModelID as varchar(6))+' has a gap with '+
  CAST(t2.StateModelID as varchar(6))+ CHAR(10)
   from StateModel t1
   inner join StateModel t2
    on
       t1.StateID = t2.StateID
       and DATEADD(ss, 1,t1.ExpirationDate) < t2.EffectiveDate
       and t1.EffectiveDate < t2.EffectiveDate

 if(@gapMessage != '')
 begin         
Print 'States with a gap problem'
PRINT @gapMessage
 end
 else
 begin
PRINT 'No States with a gap problem'
 end 
```

但是通过上表示例，我得到以下输出：

```
States with a gap problem
AK Row 1 has a gap with 3
AK Row 2 has a gap with 3 
```

无论如何要重组我的查询，以便不显示 1 和 3 之间的差距，因为 1 和 2 之间没有差距？我正在使用 MS sql server 2008 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:30:45.340

```
WITH
  sequenced AS
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY StateID ORDER BY EfftiveDate) AS SequenceID,
    *
  FROM
    StateModel
)
SELECT
  *
FROM
  sequenced    AS a
INNER JOIN
  sequenced    AS b
    ON  a.StateID    = b.StateID
    AND a.SequenceID = b.SequenceID - 1
WHERE
  a.ExpirationDate < DATEADD(second, -1, b.EfftiveDate) 
```

为了使其尽可能有效，还要添加一个索引`(StateID, EfftiveDate)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T15:04:57.327

我只想把功劳归功于 MatBailie，但还没有积分，所以我想我会帮助任何其他寻找类似解决方案的人，这些解决方案可能希望像我需要的那样更进一步。我已将他的代码（涉及会员注册）的应用程序更改为与此处示例相同的语言。

就我而言，我需要这些东西：

1.  我有两张相似的表格，我需要将它们发展成一张总表格。在本例中，让我们制作这样的表格：SomeStates + OtherStates = UpdatedTable。这些在 AS 子句中是 UNIONED。
2.  由于间隙，我不想删除任何行，但我想在 StateID 级别上标记它们。这是作为附加列“StateID_GapFlag”添加的。
3.  我还想添加一列来保存最旧的或 MIN(EffectiveDate)。这将在以后的 SUM(period) 计算中使用，以获得总持续时间，不包括间隙。这是“MIN_EffectiveDate”列。

    ```
    ;WITH sequenced     
    ( SequenceID
    ,EffectiveDate
    ,ExpirationDate)
    AS
        (select 
        ROW_NUMBER() OVER (PARTITION BY StateID ORDER by EffectiveDate) as SequenceID,
        * from  (select EffectiveDate, ExpirationDate from SomeStates
                    UNION ALL
                (select EffectiveDate, ExpirationDate from OtherStates)
                ) StateModel
        where 
            EffectiveDate > 'filter'
        )
    Select DISTINCT 
            IJ1.[MIN_EffectiveDate]
            ,coalesce(IJ2.GapFlag,'') as [MemberEnrollmentGapFlag]
            ,EffectiveDate
            ,ExpirationDate
    into UpdatedTable 
    from sequenced seq
            inner join 
                (select StateID, min(EffectiveDate) as 'MIN_EffectiveDate'
                    from sequenced 
                    group by StateID
                ) IJ1
            on seq.member# = IJ1.member
            left join
                (select a.member#, 'GAP' as 'StateID_GapFlag'
                    from sequenced a
                    inner join 
                        sequenced b
                            on a.StateID = b.StateID
                            and a.SequenceID = (b.sequenceID - 1)
                        where a.ExpirationDate < DATEADD(day, -1, b.EffectiveDate)
                ) LJ2
            on seq.StateID = LJ2.StateID 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:30:55.787

您可以使用`ROW_NUMBER`为每个状态提供 stateModel 的排序，然后检查连续行的第二个差异是否不超过 1。类似于：

```
;WITH Models (StateModelID, StateID, Effective, Expiration, RowOrder) AS (
    SELECT StateModelID, StateID, EffectiveDate, ExpirationDate,
           ROW_NUMBER() OVER (PARTITION BY StateID, ORDER BY EffectiveDate)
    FROM StateModel
)
SELECT F.StateModelId, S.StateModelId
FROM Models F
CROSS APPLY (
    SELECT M.StateModelId
    FROM Models M
    WHERE M.RowOrder = F.RowOrder + 1
      AND M.StateId = F.StateId
      AND DATEDIFF(SECOND, F.Expiration, M.Effective) > 1
) S 
```

这将为您提供有间隙的行的状态模型 ID，您可以按照自己的意愿对其进行格式化。

# dependency-injection - 当 webApi 与 HttpSelfHostServer 一起运行时，有没有办法添加 httpModule？

> ID：11831932
> 
> 赞同：3
> 
> 时间：2012-08-06T16:06:48.287
> 
> 标签：dependency-injection, castle-windsor, asp.net-mvc-4, asp.net-web-api, self-hosting

我有一个 MVC4 webapi 控制器。它没有无参数的构造函数。所以，我使用 Windsor 依赖解析器，在 System.Web.Http.WebHost 下工作时一切正常。但是，当我尝试使用 HttpSelfHostServer 时，我收到异常消息：

`Looks like you forgot to register the http module Castle.MicroKernel.Lifestyle.PerWebRequestLifestyleModule To fix this add &lt;add name="PerRequestLifestyle" type="Castle.MicroKernel.Lifestyle.PerWebRequestLifestyleModule, Castle.Windsor" /&gt; to the &lt;httpModules&gt; section on your web.config. If you plan running on IIS in Integrated Pipeline mode, you also need to add the module to the &lt;modules&gt; section under &lt;system.webServer&gt;. Alternatively make sure you have Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35 assembly in your GAC (it is installed by ASP.NET MVC3 or WebMatrix) and Windsor will be able to register the module automatically without having to add anything to the config file.` 显然，windsor di 无法注册他的 HttpModule。我试图添加

`<system.web> <httpModules> <add name="PerRequestLifestyle" type="Castle.MicroKernel.Lifestyle.PerWebRequestLifestyleModule, Castle.Windsor" /> </httpModules> </system.web>`

在我的 app.config 中，没有运气。尝试 WebActivator 使用 PreApplicationStart 方法也没有运气。有什么方法可以为自托管 webapi 应用程序添加 httpModule 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T16:09:37.620

自托管时不能使用 HttpModules。它们是 ASP.NET 特定的功能。

# regex - ColdFusion - 正则表达式将 SRC 与单引号匹配

> ID：11831934
> 
> 赞同：1
> 
> 时间：2012-08-06T16:06:51.033
> 
> 标签：regex, coldfusion, coldfusion-9, railo

我有一个简单的正则表达式行来从图像标签中提取 src="" 值：

```
<cfset variables.attrSrc = REMatch("(?i)src\s*=\s*""[^""]+", variables.myImageTag) />

<!--- REMatch("(?i)src\s*=\s*""[^""]+" ---> 
```

然而，虽然这很好用，但它似乎不适用于显示单引号而不是双引号的 src='' 属性。

理想情况下，我希望它同时使用单引号和双引号。

有什么想法吗？

谢谢，迈克尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:13:12.243

```
(?i)src\s*=\s*(""[^""]+""|'[^']+') 
```

# android - 本地网络外的Android WiFi ADB

> ID：11831936
> 
> 赞同：1
> 
> 时间：2012-08-06T16:06:56.313
> 
> 标签：android, adb, root, android-wifi

通过 WiFi 的 ADB 很好用，但今天我只在本地网络中使用它。

我尝试在网络外使用它，但 ADB 无法连接

可以在局域网外使用吗？如何？

# javascript - javascript对象expexted

> ID：11831938
> 
> 赞同：0
> 
> 时间：2012-08-06T16:06:58.257
> 
> 标签：javascript, asp.net, user-controls

我无法调用 javascript 函数，因为它说“需要对象”。我正在使用 asp.net，这是在带有一些用户控件的标准 aspx 页面上使用的。其中一个名为 CookieControl 的用户控件在 document.ready.ie 上调用了一个 javascript 方法 setandCheckCookie()

```
$(document).ready(function() {
         setandCheckCookie();
)}; 
```

在我的 aspx 页面的 head 部分中，我在添加控件之前引用了 javascript 文件：

```
<script src="CookiesControl/js/Cookie.js" type="text/javascript"></script>
<uc2:Cookie ID="Cookie1" runat="server" /> 
```

我已经尝试在用户控件本身上添加脚本引用，但是当我转到我的 aspx 页面时，我得到了对象预期的错误。

我不相信它是控件或 js 文件，因为它们都在网站的其他地方使用并且它们工作正常，但我正在做的是阻止 js 文件被引用，因为在 firebug 和 IE 调试器中我看不到引用的js文件。

也许路径不正确，但我已经从解决方案资源管理器中拖动了脚本，并且 Visual Studio 也没有抱怨路径。

所以我的问题是：什么可能会阻止我的 javascript 文件被引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:20:30.967

Visual Studio 抱怨或不抱怨路径并不总是说明您将在浏览器中得到什么。要检查脚本是否引用正常，请尝试在浏览器中获取脚本文件。例如，如果您的页面位于`http://yoursite/yourpage.aspx`并且您在 html 代码中的脚本引用（通过`View Source`，而不是您在 Visual Studio 中看到的）是`folder/scriptFile.js`，请输入此地址`http://yoursite/folder/scriptFile.js`并查看是否获取文件。如果不是，那么它就没有被引用好。要解决此类问题，请将完整路径放在 之后`yoursite`，例如：

```
<script src="/ScriptVirtualFolder/CookiesControl/js/Cookie.js" type="text/javascript"></script> 
```

where`ScriptVirtualFolder`在您的站点根文件夹中，并且它是一个虚拟文件夹，这意味着它可以由浏览器在此路径中访问。此外，您可以使用 asp.net 通过使用`~`符号和`runat='server'`. 例如：

```
<script src="~/ScriptServerFolder/CookiesControl/js/Cookie.js" type="text/javascript" runat="server"></script> 
```

# windows - 可用物理内存的奇怪值

> ID：11831939
> 
> 赞同：1
> 
> 时间：2012-08-06T16:06:59.210
> 
> 标签：windows, winapi

我使用一个代码库，其中包含一个计算可用内存量的函数。

对于托管 PC（由 Windows 2008 R2 x64 托管），我有时会看到以一种有趣的方式计算的免费金额。

它被报告为

> 物理内存：1400/1400 MB（可用/总）

这不可能是真的，因为有几个应用程序正在运行。怎么会这样？

我感兴趣的是这种现象是否指向内存问题。有时我的应用程序在内存有限（如 1400 MB）的 VM 上运行时内存不足。所以当我看到一个错误报告可用内存错误地报告为 1400 MB 时，它真的是零吗？

这是代码

```
function GetMemoryStatus : UnicodeString;
type
  TMemoryStatusEx = record
    dwLength                : dword;
    dwMemoryLoad            : dword;
    ullTotalPhys            : int64;
    ullAvailPhys            : int64;
    ullTotalPageFile        : int64;
    ullAvailPageFile        : int64;
    ullTotalVirtual         : int64;
    ullAvailVirtual         : int64;
    ullAvailExtendedVirtual : int64;
  end;
var gmse : function (var mse: TMemoryStatusEx) : bool; stdcall;
    ms   : TMemoryStatus;
    mse  : TMemoryStatusEx;
begin
  gmse := GetProcAddress(GetModuleHandle(kernel32), 'GlobalMemoryStatusEx');
  if @gmse <> nil then begin
    mse.dwLength := sizeOf(mse);
    gmse(mse);
  end else begin
    ms.dwLength := sizeOf(ms);
    GlobalMemoryStatus(ms);
    mse.ullAvailPhys := ms.dwAvailPhys;
    mse.ullTotalPhys := ms.dwTotalPhys;
  end;
  result := IntToStrExW((mse.ullAvailPhys + $80000) div $100000) + '/' +
            IntToStrExW((mse.ullTotalPhys + $80000) div $100000) + ' MB (free/total)';
end; 
```

谢谢！雅各布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T22:46:18.797

我无法重现您的问题。唯一的区别是对您`Result`在行中进行的计算进行了一些更改，因为我现在使用的系统上没有 MadExcept（很快就会纠正）。这是我使用的代码：

```
type
  TMemoryStatusEx = record
    dwLength                : dword;
    dwMemoryLoad            : dword;
    ullTotalPhys            : int64;
    ullAvailPhys            : int64;
    ullTotalPageFile        : int64;
    ullAvailPageFile        : int64;
    ullTotalVirtual         : int64;
    ullAvailVirtual         : int64;
    ullAvailExtendedVirtual : int64;
  end;

type
  TGlobalMemoryStatusEx = function (var mse: TMemoryStatusEx) : bool; stdcall;

function GetMemoryStatus : string;
var
  GlobalMemoryStatusEX: TGlobalMemoryStatusEx;
  MemStatEx  : TMemoryStatusEx;
begin
  GlobalMemoryStatusEx := GetProcAddress(GetModuleHandle(kernel32),
                              'GlobalMemoryStatusEx');
  if @GlobalMemoryStatusEx <> nil then
  begin
    MemStatEx.dwLength := sizeOf(MemStatEx);
    GlobalMemoryStatusEx(MemStatEx);
    Result := Format('%d / %d KB (free/total), ',
                [MemStatEx.ullAvailPhys div 1024,
                 MemStatEx.ullTotalPhys div 1024 ]);
  end;
end;

procedure TForm3.FormShow(Sender: TObject);
begin
  Label1.Caption := GetMemoryStatus;
end; 
```

这是应用程序的输出（下面有任务管理器的物理内存窗格用于比较），在 Windows 7 上的 Windows XP Mode 虚拟机中运行。VM 设置有 1GB 的 RAM，并有这个测试应用程序，任务管理器，和一个正在运行的 Windows 资源管理器实例。（该应用程序是在 Win 7 64 位上用 D2007 编写的，然后复制/粘贴到 VM 并通过在资源管理器中双击启动。）

![使用 Task Man bkgrnd 测试应用程序](../Images/c17248177e6d965d18deb39564d55448.png)

# sql - 使用perl DBI创建视图时不能传入参数

> ID：11831940
> 
> 赞同：2
> 
> 时间：2012-08-06T16:06:59.340
> 
> 标签：sql, perl, dbi, dbd

我想使用 Perl DBI 自动创建基于数据库的视图。相关代码如下，

```
my $dbh       = DBI->connect( "dbi:Oracle:$database", $user_passwd );
my $Directive = q{ CREATE OR REPLACE VIEW SOME_VIEW AS SELECT * FROM ID_TABLE WHERE ID=?};
my $ID = 12345;

my $sth = $dbh->prepare($Directive);
my $rv  = $sth->execute($ID); 
```

然后我发现`$rv`总是`undef`在我运行代码之后。我在代码中做错了什么吗？当我将参数直接放入`$Directive`时，一切都很好。

顺便说一句，当我使用其他 $Directive 时，例如“SELECT * FROM ID_TABLE WHERE ID=?”，参数 $ID 可以毫无问题地传入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:18:49.547

SQL 不允许在您的示例中的条件中使用占位符创建视图。除此之外，没有一个表示法允许您在引用视图时指定占位符的值。DDL 语句通常不带输入参数。

您将不得不以不同的方式做事，可能会超越视图。

这不是 Perl 或 DBI 本身的限制，甚至也不是您正在使用的特定 DBMS；这是整个 SQL 设计的问题。

* * *

处理这种特定情况的最简单方法是：

```
my $dbh = DBI->connect( "dbi:Oracle:$database", $user_passwd );
my $ID = 12345;
my $sql = qq{ CREATE OR REPLACE VIEW SOME_VIEW AS SELECT * FROM ID_TABLE WHERE ID = $ID };

my $sth = $dbh->prepare($sql);
my $rv  = $sth->execute(); 
```

只需将参数值嵌入您准备和执行的 SQL 语句中。

# iphone - NSManagedObjectContext performBlockAndWait：不在后台线程上执行？

> ID：11831946
> 
> 赞同：45
> 
> 时间：2012-08-06T16:07:09.113
> 
> 标签：iphone, objective-c, ios, core-data

我有一个 NSManagedObjectContext 声明如下：

```
- (NSManagedObjectContext *) backgroundMOC {
    if (backgroundMOC != nil) {
        return backgroundMOC;
    }
    backgroundMOC = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    return backgroundMOC;
} 
```

请注意，它是使用私有队列并发类型声明的，因此它的任务应该在后台线程上运行。我有以下代码：

```
-(void)testThreading
{
    /* ok */
    [self.backgroundMOC performBlock:^{
        assert(![NSThread isMainThread]); 
    }];

    /* CRASH */
    [self.backgroundMOC performBlockAndWait:^{
        assert(![NSThread isMainThread]); 
    }];
} 
```

为什么调用`performBlockAndWait`在主线程而不是后台线程上执行任务？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-08-06T17:36:13.127

折腾另一个答案，试图解释为什么`performBlockAndWait`总是在调用线程中运行。

`performBlock`是完全异步的。它总是将块排入接收 MOC 的队列，然后立即返回。因此，

```
[moc performBlock:^{
    // Foo
}];
[moc performBlock:^{
    // Bar
}]; 
```

将在 moc 队列中放置两个块。它们将始终异步执行。一些未知线程将从队列中拉出块并执行它们。此外，这些块被包装在它们自己的自动释放池中，它们也将代表一个完整的 Core Data 用户事件 ( `processPendingChanges`)。

`performBlockAndWait`不使用内部队列。它是在调用线程的上下文中执行的同步操作。当然，它会等到队列上的当前操作执行完毕，然后该块将在调用线程中执行。这已记录在案（并在多个 WWDC 演示文稿中重申）。

此外，`performBockAndWait`它是可重入的，因此嵌套调用都发生在该调用线程中。

Core Data 工程师已经非常清楚，基于队列的 MOC 操作运行的实际线程并不重要。关键是使用`performBlock*`API 进行同步。

因此，将'performBlock'视为“此块被放置在队列中，将在某个未确定的时间，在某个未确定的线程中执行。该函数将在入队后立即返回给调用者”

`performBlockAndWait`是“这个块将在某个不确定的时间，在这个完全相同的线程中执行。该函数将在此代码完全执行后返回（这将在与此 MOC 关联的当前队列耗尽后发生）。”

**编辑**

> 您确定“performBlockAndWait 不使用内部队列”吗？我认为确实如此。唯一的区别是 performBlockAndWait 将等到块完成。调用线程是什么意思？据我了解，[moc performBlockAndWait] 和 [moc performBloc] 都在其私有队列（后台或主）上运行。这里的重要概念是 moc 拥有队列，而不是相反。如果我错了，请纠正我。– 菲利普007

不幸的是，我按照自己的方式表达了答案，因为就其本身而言，它是不正确的。但是，在原始问题的上下文中，它是正确的。具体来说，当调用`performBlockAndWait`私有队列时，该块将在调用该函数的线程上执行——它不会被放入队列并在“私有线程”上执行。

现在，在我深入细节之前，我想强调一下，依赖库的内部工作是非常危险的。您真正应该关心的是，您永远不能期望特定线程执行块，除非与主线程相关联。因此，不建议期望 a*不在*`performBlockAndWait`主线程上执行，因为它将在调用它的线程上执行。

 *`performBlockAndWait`使用 GCD，但它也有自己的层（例如，防止死锁）。如果您查看 GCD 代码（它是开源的），您可以看到同步调用是如何工作的 - 通常它们与队列同步并调用调用函数的线程上的块 - 除非队列是主队列或一个全局队列。此外，在 WWDC 会谈中，Core Data 工程师强调`performBlockAndWait`将在调用线程中运行的点。

所以，当我说它不使用内部队列时，并不意味着它根本不使用数据结构。它必须将调用与队列中已经存在的块以及在其他线程和其他异步调用中提交的块同步。但是，当调用`performBlockAndWait`它时，它不会将块放在队列中......相反，它会同步访问并在调用该函数的线程上运行提交的块。

现在，SO 不是一个很好的论坛，因为它比这更复杂一些，尤其是主队列和 GCD 全局队列——但后者对 Core Data 并不重要。

要点是，当您调用任何`performBlock*`或 GCD 函数时，您不应期望它在任何特定线程上运行（与主线程相关的东西除外），因为队列不是线程，只有主队列会在特定线程上运行块线。

调用核心数据时`performBlockAndWait`，该块将在调用线程中执行（但将与提交到队列的所有内容适当同步）。

我希望这是有道理的，尽管它可能只会引起更多的混乱。

**编辑**

此外，您可以看到这种不言而喻的影响，因为`performBlockAndWait`提供可重入支持的方式破坏了块的 FIFO 排序。举个例子...

```
[context performBlockAndWait:^{
    NSLog(@"One");
    [context performBlock:^{
        NSLog(@"Two");
    }];
    [context performBlockAndWait:^{
        NSLog(@"Three");
    }];
}]; 
```

请注意，严格遵守队列的 FIFO 保证意味着嵌套`performBlockAndWait`（“三”）将在异步块（“二”）之后运行，因为它是在提交异步块之后提交的。`dispatch_sync`然而，这不是发生的事情，因为这是不可能的......出于同样的原因，嵌套调用会导致死锁。如果使用同步版本，请注意一些事项。

通常，尽可能避免使用同步版本，因为这`dispatch_sync`可能会导致死锁，并且任何可重入版本`performBlockAndWait`都必须做出一些“糟糕”的决定来支持它......就像让同步版本“跳入”队列一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T16:52:16.163

为什么不？Grand Central Dispatch 的块并发范式（我假设 MOC 在内部使用）被设计为只有运行时和操作系统需要担心线程，而不是开发人员（因为操作系统可以做得比你可以做的更好）拥有更详细的信息）。太多人认为队列与线程相同。他们不是。

排队的块不需要在任何给定的线程上运行（主队列中的块必须在主线程上执行）。因此，事实上，如果运行时认为它比为其创建线程更有效，有时*同步（即 performBlockAndWait）排队块将在主线程上运行。*由于无论如何您都在等待结果，因此如果主线程在操作期间挂起，它不会改变程序的运行方式。

最后一部分我不确定我是否记错了，但在关于 GCD 的 WWDC 2011 视频中，我相信有人提到运行时将尽可能在主线程上运行以进行同步操作，因为它是更高效。最后，我想“为什么”的答案只能由设计系统的人来回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:10:19.410

我不认为 MOC 有义务使用后台线程。`performBlock:`如果您使用or `performBlockAndWait:`，它只是有义务确保您的代码不会遇到 MOC 的并发问题 由于`performBlockAndWait:`应该阻塞当前线程，因此在该线程上运行该块似乎是合理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T16:20:33.037

该`performBlockAndWait:`调用仅确保您以不引入并发的方式执行代码（即在 2 个线程上`performBlockAndWait:`不会同时运行，它们将相互阻塞）。

总而言之，你不能依赖 MOC 操作在哪个线程上运行，基本上永远不会。我已经了解到，如果您使用 GCD 或直接使用线程，您总是必须为每个操作创建本地 MOC，然后将它们合并到主 MOC。

有一个很棒的库（[MagicalRecord](https://github.com/magicalpanda/MagicalRecord/)）可以让这个过程变得非常简单。*

# sharepoint-2010 - 获取“Editor”字段值在非系统账户下抛出值范围异常

> ID：11831950
> 
> 赞同：0
> 
> 时间：2012-08-06T16:07:21.657
> 
> 标签：sharepoint-2010

下面是从 2007 年到 2010 年迁移的一段遗留代码。它获取作者和编辑器字段的值。实际上，这些值是相同的用户。当我以 SPAdmin 权限登录时，两个字段都可以正常工作。但是，在测试帐户下，尝试获取 Editor 字段的值失败，并出现以下异常：“值不在预期范围内”，而 Author 字段仍然可以正常工作。让我们看看代码：

```
SPQuery sPQuery = new SPQuery();
sPQuery.Query = queryString;
sPQuery.ExpandRecurrence = true;
sPQuery.CalendarDate = startDateTime;
sPQuery.DatesInUtc = false;

SPListItemCollection items = list.GetItems(sPQuery);
SPListItem item = items[0];

object author = item["Author"]; //works always, under any account
object editor = item["Editor"]; // **doesn't work under non-system account** 
```

好吧，这行代码也总是适用于编辑器：

```
object editor = item.ParentList.GetItemById(item.ID)["Editor"]; 
```

所以我想知道这有什么问题，我应该检查什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:01:27.767

好吧，问题在于查找阈值限制。

# python - 在 Python 中与 unix 过滤器进程通信

> ID：11831954
> 
> 赞同：3
> 
> 时间：2012-08-06T16:07:42.163
> 
> 标签：python, django, ipc, subprocess

我正在编写一个 Python 程序，它需要使用一个用作过滤器的外部 unix 程序来清理许多小字符串。目前，我为要清理的每个字符串创建一个新的子进程：

```
import subprocess
def cleanstring(s):
    proc = subprocess.Popen(['/bin/filter','-n'],
        stdin=subprocess.PIPE, stdout=subprocess.PIPE,
        stderr=subprocess.PIPE
    )
    out, err = proc.communicate(s)
    assert not err
    return out 
```

显然，这种方法效率极低。什么是启动过滤器子进程并在需要时通过标准输入/标准输出与其通信的有效方法？

我一直在研究使用[Python Queues](http://docs.python.org/library/queue.html)来实现这一点，但它们可能对此有点过头了。该代码将从非线程 Web 服务器上的 Django 视图中调用，因此它只会是一个线程多次调用它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T05:04:37.053

如果您没有测量它，那么这不是性能问题，更不用说“效率低下”了。

也就是说，您可以像这样与子进程进行通信：

```
import subprocess
import sys

p = subprocess.Popen('bc', shell=False, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)

 for i in range(10):
     p.stdin.write('%s*2\n' % (i,))
     res = p.stdout.readline()
     if res:
         print "vtrip says %s*2 is %s" % (i, res.strip())
         p.stdin.flush() 
```

这将打印 0-9 的双精度数，由相同的 bc 进程返回。应该很容易适应 detex（主要是正确处理冲洗，这样一端就不会等待另一端）。

那是沟通的部分。至于“在 Django 中长期运行”可能不是一个好主意。队列可能确实太多了。

像 Celery 等人这样的任务队列是用于独立处理的任务，而不是用于处理每个任务的相同长时间运行的服务。

也许在旁边运行一些小型 python 守护程序，保持过滤器进程打开并为它处理来自 Django 的请求？我们是在谈论重负载还是内部负载，例如每天 100 个用户？除了一些粗略的锁定之外，您可能不需要太多同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:15:45.310

我认为您当前的代码是最好的解决方案。在 Linux 下，启动一个进程并没有那么昂贵，而且您已经巧妙地封装了这个问题。而且您直接启动`filter`程序，因此您没有启动 shell 来运行它的开销。

另外，我很担心缓存。假设您确实让`filter`程序在后台运行，读取和写入命名管道或其他任何东西。你如何确保你推动的每一根弦都立即出来？您将如何刷新管道以使输出与输入同步？

您是否测量过 Django 服务器上的负载并发现这是一个问题？如果您测量了性能，请分享数字。如果你真的有问题，我会感到惊讶。

# git - 如何将多个 SVN 位置克隆到单个 Git 存储库中

> ID：11831957
> 
> 赞同：1
> 
> 时间：2012-08-06T16:07:49.660
> 
> 标签：git, svn

我有一个 SVN 存储库，我想将特定部分移动到 Git 存储库。假设 SVN 存储库在主干下有很多目录，但我想要移动的唯一两个是：

*   主干\项目A
*   主干\项目B

我已通过运行以下命令成功移动了 projectA：

```
git svn clone http://svn-url.com/repo-name/trunk/projectA
git push git-url.com:/repo-name.git master 
```

但是，尝试运行：

```
git svn clone http://svn-url.com/repo-name/trunk/projectB 
```

失败并显示以下消息：

```
svn-remote.svn.url already set: http://svn-url.com/repo-name/trunk/projectA wanted to set to: http://svn-url.com/repo-name/trunk/projectB 
```

任何人都知道如何将主干下的多个目录迁移到单个 Git 存储库中？

我不确定这是否重要，但 Git 存储库托管在 GitHub 中，而 SVN 存储库由 beanstalkapp.com 托管。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:01:39.620

您可以使用该`--ignore-paths` [选项](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)排除您不想在 git 存储库中包含的目录：

```
git svn clone \
--ignore-paths='<regex>' \
http://svn-url.com/repo-name/trunk 
```

# c# - 在 C# 中使用多媒体键盘进行多媒体控制

> ID：11831958
> 
> 赞同：2
> 
> 时间：2012-08-06T16:07:55.783
> 
> 标签：c#, winapi, keyboard, winmm

我有键盘，以及笔记本电脑内置的键盘，它有多媒体键。其中一个多媒体键当然是暂停/播放，它是键盘驱动程序的一项功能，可以分配给其他键。当它被推送时，它将暂停/播放 iTunes、Windows Media Player 等，具体取决于我的“最后一次活动”媒体应用程序是什么。

我的问题是，在 C# 中，我如何复制此功能以暂停/播放系统声音。我查看了 API，唯一看起来很接近的是 winmm.dll waveOutPause 和 midiOutPause 函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:22:13.460

.NET 中有一个名为[SendKeys](http://msdn.microsoft.com/en-us/library/k3w7761b)的类，它允许您将按键推送到另一个应用程序，但这（AFAIK）不允许发送特殊键。

所以相反，我猜你想要 API function [`SendInput`](http://msdn.microsoft.com/en-us/library/ms646310.aspx)。

[这里](http://msdn.microsoft.com/en-us/library/dd375731.aspx)有一个包含媒体键的键码列表，因此您可以模拟播放/暂停或音量控制等键。

**编辑：**使用 API 的一种可能替代方法是*捕获*您按下该键时（在 WinForms 或 WPF 应用程序中）发送的任何多媒体键盘，然后查看是否可以使用常规`SendKeys`实现复制该按键。

# php - 运行 sql 查询以插入表并更新另一个表

> ID：11831962
> 
> 赞同：2
> 
> 时间：2012-08-06T16:08:16.947
> 
> 标签：php, mysql

如何在 php 中运行 sql 查询以插入表并更新另一个表。例如，当输入一个库存并提交时，sql查询应该运行一个insert语句来更新批处理文件，并运行update语句来更新product表中的totalquantityinstock（新数量+现有数量）。希望我的解释能被理解。

> 表：产品（ProdId、名称、Cat、TtlQtyInStock）和 ProdInventory（InvID、ProdID、Qty）

在 php 表单中输入新的 ProdInventory 记录后，查询应插入 ProdInventory 并更新 Product 表中的 TtlQtyInStock 列）。我想要的是当前产品的库存为 20，所以当新的 10 个相同的库存时prod 加上 shld 总和 20 + 10。

我目前的查询是：

```
$query = "INSERT INTO `ProdInventory (`ProdId`, `Quantity`) VALUES ('$ProdID', '$Quantity')";
"UPDATE product
SET QuantityInStock = (QuantityInStock + $Quantity)
WHERE ProductCode = $ProductCode"; 
```

我确实浏览了一些网站，但没有找到适合我设计的东西。如果有人帮忙... :)

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:12:03.713

您需要运行两个更新语句，而不是插入和更新。

这可以使用存储过程或 multi_query (MYSQLi) 在一次 mysql 之旅中实现。

这是一个参考链接：

[http://php.net/manual/en/mysqli.multi-query.php](http://php.net/manual/en/mysqli.multi-query.php)

[http://php.net/manual/en/mysqli.quickstart.stored-procedures.php](http://php.net/manual/en/mysqli.quickstart.stored-procedures.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:13:01.963

尽管不是最好的解决方案，但可能的解决方案是创建一个插入触发器。所以基本上它的作用是每次在表中插入触发器都会触发并更新股票的值（*它可能在不同的表上*）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:52:52.063

我建议你创建一个视图。在该视图中，您可以创建一个列，您可以在其中计算所需的任何内容。这样，您的数据库结构将非常干净，并且错误的机会将减少恕我直言

# filtering - 按选项值过滤 getElementsByTagName 列表

> ID：11831964
> 
> 赞同：0
> 
> 时间：2012-08-06T16:08:28.130
> 
> 标签：filtering, getelementsbytagname

我正在使用 getElementsByTagName 返回页面上的所有选择列表 - 是否可以根据选项值（即列表中的第一项或第二项）过滤这些选择列表？

原因是由于我不会进入这里的原因，有一个带有数字值（1、2、3、4、5 等）的选择列表块和其他带有文本值（蓝色和黑色、红色和黑色等）的选择列表) 并且我只希望我必须在具有数值的脚本上运行脚本。我无法为它们添加一个更容易让我这样做的类，但是我可以确定列表中的第一个选项值将是“1”。

因此，有没有办法仅通过第一个选项值为“1”的那些过滤页面上返回的选择列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T00:30:59.017

我设法通过在要执行的操作（在本例中为禁用选项）周围包装一个简单的 IF 语句来实现此功能，如下所示：

```
 inputs = document.getElementsByTagName('select');

    for (i = 0; i < inputs.length; i++) {
      if (inputs[i].options[1].text == 1) {
      // perform action required
      }
    } 
```

毫无疑问，有一种更巧妙或更经济的方法可以做到这一点，但主要是它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:23:10.773

我很确定有更好的解决方案，但目前您可以尝试以下方法：

```
var allSelect = document.getElementsByTagName("select");

var result = filterBy(allSelect, 0/*0 == The first option*/, "1"/* 1 == the value of the first option*/);

function filterBy(allSelect, index, theValue) {
    var result = [];
    for (var i = 0; i < allSelect.length; i++) {
        if(allSelect[i].options[index].value == theValue ) {
            result.push(allSelect[i]);
        }    
    }
    return result;            
} 
```

# c# - app.net c# log4net, windows 事件查看器

> ID：11831965
> 
> 赞同：1
> 
> 时间：2012-08-06T16:08:32.257
> 
> 标签：c#, .net, log4net

我正在将信息记录到 Windows 事件查看器中。

这就是我的 log4net 配置文件中的内容。

```
 <logger name="MyLogger">
    <level value="all"/>
    <appender-ref ref="EventLogAppender"/>
  </logger>

      <!-- Windows Event Viewer appender -->
      <appender name="EventLogAppender" type="log4net.Appender.EventLogAppender" >
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
        </layout>
      </appender> 
```

每次在我的应用程序中使用该记录器进行记录时，我都会看到一个新的信息事件，并且我在 Windows 事件查看器 -> Windows 日志 -> 应用程序中看到了该事件。

有没有办法登录特定的日记或我从我的应用程序创建的日记？
喜欢而不是`Application`，它会是`MyWebApplication`。

此外，我有 2 个 Web 应用程序同时运行。他们都有带有不同记录器的 log4net 配置文件。当我尝试从 2 个 Web 应用程序记录事件时，它似乎不起作用。（我将它们设置为不同的 applicationName ... `<applicationName value="app1" /> <applicationName value="app2" />`）。即使它是 2 个不同的配置文件和 2 个不同的 applicationName，它也将始终使用第一个名称记录。

# java - Maven GWT 生产部署 - “可能需要（重新）编译”

> ID：11831966
> 
> 赞同：0
> 
> 时间：2012-08-06T16:08:37.203
> 
> 标签：java, gwt, maven

简短摘要：作为 Bamboo 计划的一部分，GWT 编译运行良好，但生成的 nocache.js 包含（重新）编译消息。

我最近在更改应用程序的编译和部署方式时遇到了一些麻烦。配置： - GWT 2.4.0 - Maven GWT 插件 - Bamboo

在我的机器上运行 GWT 编译一切正常，可以在 dev 模式和 js 模式下运行。运行 maven 编译（通过 eclipse - maven - run as - package）执行良好，nocache.js 看起来不错。在 XP 机器上或使用 Solaris+Bamboo 运行命令行 maven 编译会产生错误的 nocache.js，即使生成的 html 看起来没问题。事实上， *.cache.html 与我机器上的相同。

因此，我机器上的 module.nocache.js 包含对唯一命名的 html 文件的正确引用，而受影响机器上的 nocache.js（？）不包含任何此类引用。

GWT 编译器启动选项在所有机器上都是相同的。清除所有机器上的目标和战争文件夹。

计划摘要：

```
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ myproject ---
[INFO] --- maven-compiler-plugin:2.5.1:compile (default-compile) @ myproject ---
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ myproject ---
[INFO] --- maven-compiler-plugin:2.5.1:testCompile (default-testCompile) @ myproject ---
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ myproject ---
[INFO] --- gwt-maven-plugin:2.4.0:compile (default) @ myproject ---
[INFO]    Compilation succeeded -- 639,969s
[INFO] --- maven-war-plugin:2.2:war (default-war) @ myproject ---
[INFO] Packaging webapp
[INFO] Assembling webapp [myproject] in [.....\myproject\target\myproject-2.0-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp resources [....\myproject\war]
[INFO] Webapp assembled in [14125 msecs]
[INFO] Building war: .....\myproject\target\myproject-2.0-SNAPSHOT.war
[INFO] --- maven-source-plugin:2.1.2:jar-no-fork (attach-sources) @ myproject ---
[INFO] --- gwt-maven-plugin:2.4.0:test (default) @ myproject ---
[INFO] 
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ myproject ---
[INFO] --- maven-deploy-plugin:2.7:deploy (default-deploy) @ myproject --- 
```

在本地，在 Eclipse 中，我已经关闭了除了我正在编译的项目之外的所有项目，因此所有依赖项都通过 maven 检索。Eclipse 发出了很多错误信号，但我从 Eclipse 运行 Maven 目标并安装，结果再次正常。生成的 nocache.js 文件与编译时间相同，它们不会被检索或遗留下来。

我很困惑，不知何故，在 Bamboo 机器上，Maven GWT 编译插件已自行决定为开发而编译，我假设。

* * *

乐

附加信息，Bamboo 构建日志。它似乎正在使用标准链接器，并且看起来与本地机器上的相同：

```
build   06-Aug-2012 20:18:35    [INFO]    Permutation 0 (strong name F96236D63A05E1D33308D4FE26EDA9F9) has an initial download size of 4937614 and total script size of 4937614
build   06-Aug-2012 20:18:35    [INFO]    Invoking Linker RPC policy file manifest
build   06-Aug-2012 20:18:35    [INFO]    Invoking Linker Standard
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker RPC log linker
build   06-Aug-2012 20:18:36    [INFO]    Emitting RPC log files
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker Export CompilationResult symbol maps
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker Emit compile report artifacts
build   06-Aug-2012 20:18:36    [INFO]    Permutation 1 (strong name B836CC45CC0786F0D04CEA25F7204F39) has an initial download size of 5220544 and total script size of 5220544
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker RPC policy file manifest
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker Standard
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker RPC log linker
build   06-Aug-2012 20:18:36    [INFO]    Emitting RPC log files
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker Export CompilationResult symbol maps
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker Emit compile report artifacts
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker RPC policy file manifest
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker Standard
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker RPC log linker
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker Export CompilationResult symbol maps
build   06-Aug-2012 20:18:36    [INFO]    Invoking Linker Emit compile report artifacts
build   06-Aug-2012 20:18:36    [INFO]    Linking Public artifacts into ....-SNAPSHOT
build   06-Aug-2012 20:18:36    [INFO]    Linking Deploy artifacts into ....-SNAPSHOT/WEB-INF/deploy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:49:05.907

解决了，是前段时间误提交的nocache.js文件。因此，新的 nocache.js 永远不会生成或不会覆盖它。

不完全确定这是如何发生的细节，但我不会进一步调查，我添加这个仅供将来参考。

# php - PHP：spl_autoload_register 有什么好处？包含的性能

> ID：11831967
> 
> 赞同：9
> 
> 时间：2012-08-06T16:08:43.903
> 
> 标签：php, performance, oop, autoload

我一直在阅读有关`spl_autoload_register`替代`require`, `require_once`, `include`, &的功能`include_once`。尽管有很多关于如何实现这一点的讨论，但文档并不太详细，也没有解释它与原始方式相比有何好处。

参考： http: [//php.net/manual/en/function.spl-autoload-register.php](http://php.net/manual/en/function.spl-autoload-register.php)

我想知道如何`spl_autoload_register`工作？

使用时有性能差异`spl_autoload_register`吗？

它如何处理交叉链接类中的许多 require 语句（超过 20 个）？（这不会导致重复要求吗？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T16:12:53.757

我从来没有测试过（也没有担心过）性能，但我*总是*使用自动加载器，因为它让你的生活变得更轻松。

有关实现，请参见：[https ://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)

发生的情况是，当您尝试访问`Foo`尚未加载文件的类时。自动加载器将启动并尝试加载属于该类的文件。

这可以通过“正确”组织项目中的文件来轻松完成。假设您有一个类`\Project\Http\Client`（或“旧样式”非命名空间`Project_Http_Client`），它将尝试加载文件：`Project/Http/Client.php`.

# google-maps-api-3 - 谷歌地图单一国家边界

> ID：11831968
> 
> 赞同：14
> 
> 时间：2012-08-06T16:08:50.277
> 
> 标签：google-maps-api-3

我想在谷歌地图中只显示一个国家的国家边界，就像在这里做的一样：

![在此处输入图像描述](../Images/4960e8106dd9e15d520eae04cbdfda97.png)

有没有人知道是否可以使用谷歌地图获得这样的地图以及如何实现它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T16:32:29.903

国家多边形在 FusionTables 中可用（特别是在自然地球数据集中）。

这是[一个显示 South Africa 的示例](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_query_sidebarF_local.html?country=South%20Africa)，它包括各个州，如果您不想要它们，您应该能够找到国家边界。看到[这个类似的问题](https://stackoverflow.com/questions/10874686/google-maps-v3-draw-german-state-polygons)或[这个](https://stackoverflow.com/questions/10888958/country-boundries-using-google-map-api-v3)

这是一个示例，仅显示[此 FusionTable](https://www.google.com/fusiontables/DataSource?dsrcid=419167)[中的南非国家](http://www.geocodezip.com/v3_FusionTablesLayer_worldmap_linkto.html?lat=-29.989180&lng=25.474037&zoom=5&type=m&tableid=419167&tablequery=SELECT%20kml_4326%20FROM%20419167%20WHERE%20sovereignt%20%3D%20%27South%20Africa%27)

[这](http://www.geocodezip.com/v3_FusionTables_SouthAfrica_styles.html)看起来最接近图像的样式。

# r - 保存多个矩阵的数据结构

> ID：11831971
> 
> 赞同：3
> 
> 时间：2012-08-06T16:08:58.327
> 
> 标签：r

我有一个字符串数组，它们实际上是数据集的名称。我对每个数据集执行多个度量，并在矩阵中获取每个度量的结果。

我想将一个数据集的结果保存在某种数据结构中。

因此，例如：

我们有一个字符串“玻璃”。从对数据集“glass”的测量中，我得到 3 个矩阵 a、b、c。我怎样才能将 a,b,c 保存在一个结构中？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-06T16:12:39.063

使用列表。

```
> mydata <- list()
> mydata[[1]] <- matrix(1:4, 2, 2)
> mydata[[2]] <- matrix(1:10, 5, 2)
> mydata[[3]] <- matrix(1:16, 4, 4)
> mydata
[[1]]
     [,1] [,2]
[1,]    1    3
[2,]    2    4

[[2]]
     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8
[4,]    4    9
[5,]    5   10

[[3]]
     [,1] [,2] [,3] [,4]
[1,]    1    5    9   13
[2,]    2    6   10   14
[3,]    3    7   11   15
[4,]    4    8   12   16

> 
> # To access the first matrix in the list...
> mydata[[1]]
     [,1] [,2]
[1,]    1    3
[2,]    2    4 
```

有关`?list`更多信息，请参阅。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T16:31:08.800

由于它们的尺寸相同，您可以选择其中一个`list`或一个`array`。Dason 显示了列表选项。

```
a=matrix(rnorm(16),nrow=4)

b=matrix(rnorm(16),nrow=4)

d=matrix(rnorm(16),nrow=4)

glass=array(c(a,b,d),dim=c(4,4,3)) 
```

# ms-access - Access VBA - 为声明为 long 的函数返回某种空白/空值

> ID：11831973
> 
> 赞同：4
> 
> 时间：2012-08-06T16:09:11.223
> 
> 标签：ms-access, ms-access-2007, vba

**问：**我想在 Access 中使用声明为 Long 类型的 VBA 函数。有时我想返回一个 0 到 35 之间的整数，但我也希望大多数时候能够返回一个空白或 null 或类似的东西。有没有办法做到这一点？我尝试过的（变量=“”或设置变量=无）只是调用一个错误。这将在查询中使用，并将给出一列的值。我希望该列是 Long 类型。如果这样的事情是不可能的，我想这就是我需要知道的，因为我已经有了一个不同但不太理想的解决方案。谢谢你的帮助。

**更新：**当然，在提出问题后，我想出了一个很好的解决方案。如果我只是在 Excel 中执行 Range("whatever").Value = Range("whatever").Value，那么它将左对齐的 20 更改为右对齐的 20，此时数据透视表将其识别为数字（虽然当我只是将单元格类型转换为 Excel 中的数字时，它在数据透视表中不会被识别为数字）。所以，我删除了背景，因为它没有必要。我仍然很想知道您是否可以为声明为 long 的函数返回某种空白或 null。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T16:38:37.930

`Null`只能从`Variant`函数返回。
`Nothing`只能从`Object`函数返回。

所有其他人，您只能返回定义为函数返回值的类型的变量。
如果不设置值，则返回默认值
数值变量初始化为零
可变长度字符串初始化为零长度字符串 ("")
固定长度字符串用 ASCII 码 0 填充
。日期/时间变量初始化为零

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T16:35:53.393

由于未初始化的 long 的值为 0，因此答案是“否”。声明为 long 的函数不能返回 null 或空白。如果零不是您的函数的有效返回值，您可以将其用作“null”等价物，但您已经知道 :)

# javascript - 为面包屑菜单定义变量？

> ID：11831976
> 
> 赞同：1
> 
> 时间：2012-08-06T16:09:17.547
> 
> 标签：javascript, breadcrumbs

我在网上找到了一个面包屑导航生成器。我已经包含了代码。它从标题中提取当前页面的信息。我不希望它从标题中拉出来，因为这会造成太长的线索。页面的标题类似于页面名称 - 文件夹名称 - 我的公司。这是为了工作，所以我不能改变标题的格式。

我尝试在每个页面上定义一个名为 pageName 的变量，并在 crumb 代码中将标题更改为 pageName ，但这似乎不起作用。

```
<script type="text/javascript">
var pageName= 'Name';
</script> 
```

我将如何定义变量以使其工作。还是只在破折号之前拉出页面标题的第一部分？

```
function breadcrumbs(){
  sURL = new String;
  bits = new Object;
  var x = 0;
  var stop = 0;
  var output = "<div class=breadcrumbs><A HREF=/>Home</A> &nbsp;&raquo;&nbsp; ";

  sURL = location.href;
  sURL = sURL.slice(8,sURL.length);
  chunkStart = sURL.indexOf("/");
  sURL = sURL.slice(chunkStart+1,sURL.length)

while(!stop){
  chunkStart = sURL.indexOf("/");
  if (chunkStart != -1){
    bits[x] = sURL.slice(0,chunkStart)
    sURL = sURL.slice(chunkStart+1,sURL.length);
  }
  else{
    stop = 1;
  }
  x++;
}

for(var i in bits){
  output += "<A HREF=\"";
  for(y=1;y<x-i;y++){
    output += "../";
  }
  output += bits[i] + "/\">" + bits[i] + "</A> &nbsp;&raquo;&nbsp; ";
}
document.write(output + document.title);
    document.write("</div>");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:10:57.087

更改此行：

```
document.write(output + document.title); 
```

至：

```
document.write(output + pageName); 
```

这假定`pageName`在此代码出现的每个页面上都定义了 。

您可以使用以下代码对此进行改进：

```
if (typeof pageName != 'undefined')
{
    document.write(output + pageName);
}
else
{
    document.write(output + document.title);
} 
```

此代码将使用`pageName`if 它存在，否则它会退回到页面标题。

# typo3 - TYPO3 扩展管理器：不显示“仅显示可更新扩展”按钮

> ID：11831977
> 
> 赞同：0
> 
> 时间：2012-08-06T16:09:23.983
> 
> 标签：typo3

如果我打开扩展管理器，切换到选项卡`Import Extensions`并选择过滤器，我会得到以下选项：

*   `Display all extensions`（空的）
*   `Only display installed extensions`（在职的）

还应该有一个`Only display updatable extensions`选择，但不会显示。原因是什么？

我对 4.7.2 进行了 TYPO3 更新，也许这就是它没有正确显示的原因？

存储库是最新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:26:23.813

过滤器已从 移至`Import Extensions`选项`Available Extensions`卡。

您实际上并不想导入扩展，而是更新现有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:17:54.410

只是建议：我之前（4.6.x）（即安装 ext 按钮）在 EM 中显示按钮时遇到了类似的问题，并意识到该按钮可用，但精灵图像的位置错误导致按钮是透明的，

尝试使用 ie FireBug 进行检查，最终修复 CSS（并报告错误）

**编辑：**

显然有些厄运，我在几秒钟前也遇到了同样的情况；）幸运的是找到了原因：ext 列表是用 ExtJS 网格显示的，它可以包含每列的自定义过滤。字面意思：例如，当您单击列的下拉箭头时，您可以在其过滤器中设置一些值来缩小搜索结果的范围。

即：在主过滤器​​字段中写入`news`，另外在`Extension Key`列中设置其他过滤器`tt_news`。（如果您只想`%tt_news%`在结果列表中显示`%news%`）

在这种情况下，即使您清除主过滤器，该列上的设置仍将保持活动状态，因此下次您尝试`realurl`在主过滤器​​中搜索时，它将返回空列表，因为`Extension Key`过滤器仍设置为`tt_news`。

Weeeird，但是帮助了我:)

您可以识别过滤列，因为它们的名称是用*草书*书写的，最后您可以检查每一列并禁用每列的任何过滤。

# php - 语法错误，第 22 行 C:\xampp\htdocs\febi\application\views\agenda_right.php 中的文件意外结束

> ID：11831979
> 
> 赞同：-5
> 
> 时间：2012-08-06T16:09:25.570
> 
> 标签：php, codeigniter, syntax-error

```
<li class="last">
            <h2>Info Penerimaan Mahasiswa Baru 2012/2013</h2>
            <div class="imgholder"><img src="<?php echo base_url().'images/'; ?>0708111913_maba.jpg" alt="mahasiswa baru" style="width:240px;height:130px;" /></div>
            <?php
                                if ($ag_2->num_rows() == 0)
                                {
                                        echo "Tidak ada agenda";
                                }
                                else
                                {
                                $row = $ag_2->row();
                                $texts = $row->texts;
                                $postname = $row->postname;
                                echo word_limiter ($texts, 30);
                        ?>
                        <p class="readmore"><a href="<?php echo base_url().index_page().'/post/read/'.$postname; ?>">Baca selengkapnya &raquo;</a></p>
                        <?
                        }?>
                        </li>
        </ul>
        <br class="clear" />
    </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:24:38.607

就像 DaveRandom 和 Blaine 所说，尝试以下任一方法：

*   替换`<?`为`<?php`
*   启用`short_open_tag`（请参阅[此处的答案](https://stackoverflow.com/questions/435705/why-is-no-longer-working-and-instead-only-php-works)以在 XAMPP 中执行此操作）

# jersey - 使用 Jersey 将 JSON 反序列化为对象

> ID：11831981
> 
> 赞同：5
> 
> 时间：2012-08-06T16:09:37.370
> 
> 标签：jersey

我正在使用 Jersey 从客户端的 JSON 或 xml 创建一个对象。

现在，我正在使用 JSONp 创建一个对象。由于 jsonp 不能发帖，我只能使用 get 发送数据。

1.  我可以使用 GET 请求并仍然反序列化吗？我知道我可以为每个使用@QueryParam，然后以某种方式反序列化。但是像 POST 和 Put 一样，我可以只给它一个输入参数并期望 Jersey 自动反序列化。

2.  如何使用 Jersey 将 json 反序列化为 java 对象？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T04:20:33.303

经过一番研究，直接从json反序列化并不难。我就是这样做的。

从客户端发送 JSON 作为查询参数，其键与对象字段名称匹配。

```
ObjectMapper mapper = new ObjectMapper();
Contact contact = mapper.readValue(json, Contact.class); 
```

您可以使用 ObjectMapper 反序列化 - 小菜一碟；）

# image-processing - TinyMCE 和图像裁剪

> ID：11831994
> 
> 赞同：0
> 
> 时间：2012-08-06T16:10:23.730
> 
> 标签：image-processing, tinymce

我正在为 TinyMCE 编写一个插件来裁剪图像。此代码适用于 firefox，但似乎不适用于其他浏览器。

基本上，我使用 JCrop 来获取图像和选定区域的坐标，并将其传递给服务器端方法，该方法进行裁剪并返回更新的宽度、高度和图像 src。

之后，取回结果。我如下更新图像尺寸和 src。

```
tinyMCE.activeEditor.selection.getNode().src  = croppedImageSource;
tinyMCE.activeEditor.selection.getNode().width =  croppedImageWidth;
tinyMCE.activeEditor.selection.getNode().height = croppedImageHeight; 
```

服务器端方法和裁剪坐标按预期工作。虽然，上面的代码运行不正常。适用于火狐，但不适用于其他浏览器。

我想知道是否正确更新了 TinyMCE 中选择的图像？

这是我完整的 javascript 函数

```
function cropAndSave()
{
    var imgSrc = document.getElementById('jcrop_target').src;

    if(checkJcropCoords())
    {
        $.ajax({
            async: false,
            url: "/DocViewImageCrop.page",
            type: 'POST',
            data:
            {
                imgData:    imgSrc,
                cW:         $("#w").val(),
                cH:         $("#h").val(),
                cX:         $("#x").val(),
                cY:         $("#y").val()
            },
            dataType:  'json',
            complete: function(xmlRequestObject, successString)
            {
                var fileExists = xmlRequestObject.responseXML.getElementsByTagName("fileExists")[0].firstChild.nodeValue;

                if(fileExists == undefined || fileExists == "false")
                {
                    alert('Image not found on server. Try uploading the image, before attempting to resize');
                }
                else
                {
                    tinyMCE.activeEditor.selection.getNode().src =    xmlRequestObject.responseXML.getElementsByTagName("imgsrc")[0].firstChild.nodeValue;
                    tinyMCE.activeEditor.selection.getNode().width =  xmlRequestObject.responseXML.getElementsByTagName("width")[0].firstChild.nodeValue;
                    tinyMCE.activeEditor.selection.getNode().height = xmlRequestObject.responseXML.getElementsByTagName("height")[0].firstChild.nodeValue;
                }
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:36:40.327

你可以试试

```
tinyMCE.activeEditor.selection.getNode().setAttribute('scr', croppedImageSource);
tinyMCE.activeEditor.selection.getNode().setAttribute('width',  croppedImageWidth);
tinyMCE.activeEditor.selection.getNode().setAttribute('height', croppedImageHeight); 
```

或 jQuery

```
var $node = $( tinyMCE.activeEditor.selection.getNode() );
$node.attr('scr', croppedImageSource);
$node.attr('width',  croppedImageWidth);
$node.attr('height', croppedImageHeight); 
```

# ajax - Inputext 空指针与 和@ViewScoped

> ID：11831996
> 
> 赞同：0
> 
> 时间：2012-08-06T16:10:25.280
> 
> 标签：ajax, null, primefaces, textinput, view-scope

我面临一个问题，我无法解决:(

通过在 selectOneRadio 中选择一个项目，我想设置一个特定的变量：

```
<h:form id="form">
    <p:selectOneRadio id="options" value="#{rechercheBean.choose}">
        <f:selectItem itemLabel="Critere 1" itemValue="c1" />
        <f:selectItem itemLabel="Critere 2" itemValue="c2" />
        <p:ajax update="critere" />
    </p:selectOneRadio>

    <h:panelGrid columns="1" id="critere">
        <c:choose>
            <c:when test="#{monBean.choix eq 'c1'}">
                <h:outputText value="Critere 1 :" />
                <p:inputText id="cr1" value="#{rechercheBean.critere1}" />
            </c:when>
            <c:when test="#{monBean.choix eq 'c2'}">
                <h:outputText value="Critere 2 :" />
                <p:inputText id="cr2" value="#{rechercheBean.critere2}" />
            </c:when>
        </c:choose>
    </h:panelGrid>
    <h:commandButton value="Add critere" actionListener="#{rechercheBean.add}"/>
</h:form> 
```

使用 managedBean SessionScope，此代码可以工作，但使用 ViewScope，它不起作用。

在 ViewScope 中，当我单击按钮时，特定变量为空，但如果我删除组件，则设置特定变量！

我需要用来在 inputext 之间切换 :(

我该如何解决我的问题？

发送很多！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:49:28.873

更换

```
 <c:choose>
        <c:when test="#{monBean.choix eq 'c1'}"> 
```

和

```
<panelGroup rendered="#{monBean.choix eq 'c1'}"> 
```

（替换两者`<c:when`）

此外，如果您使用的是 primefaces，您可以将其替换为`<h:commandButton`，`<p:commandButton`或者只是添加`f:ajax`到当前`<h:commandButton`