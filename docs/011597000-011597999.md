# StackOverflow 问答 11597000-11597999

# php - 将动作名称添加到 MissingControllerException

> ID：11597001
> 
> 赞同：1
> 
> 时间：2012-07-22T00:58:19.550
> 
> 标签：php, cakephp

有没有办法扩展 CakePHP 中的 MissingControllerException 以包含被调用的动作？

# git - 如何删除“致命：松散的物体”？

> ID：11597003
> 
> 赞同：25
> 
> 时间：2012-07-22T00:58:35.370
> 
> 标签：git, github

我的一个克隆存储库是从 git fsck 获取的

> 致命：松散对象 40bda4e3b79c3d7bf598df31d9e68470f97a3f79（存储在 .git/objects/40/bda4e3b79c3d7bf598df31d9e68470f97a3f79 中）已损坏

我有另一个 fsck 干净的副本。

我已经尝试对包含致命目录的目录/子目录进行核对，然后重新克隆它。问题还在继续。

我真的不关心任何特定的文件，我只希望存储库能够干净地签出。我该怎么办？

注意：远程存储库托管在 github 上。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-22T01:05:11.760

简单的答案：将旧的 repo 移走并重新克隆。如果您想保留旧回购中的东西，有办法获得它们，但首先要获得一个好的回购。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-10T13:23:08.137

这个想法是：

1.  首先删除驻留在您当前项目下的当前git记录`.git`（让我们用“项目A”表示）。
2.  复制您当前的项目，我们将副本表示为“项目 B”。
3.  现在`cd`进入项目 A 和 git clone 并重置为最后一次提交。
4.  复制项目 B 中的所有文件并替换项目 A 中的文件。
5.  现在`cd`进入项目 A 并使用`git status`来查看项目 A 的状态。应该就好像从来没有发生过损坏一样。

简而言之，制作一个副本以保留您当前的工作区域，并通过替换文件将其与新克隆合并，然后正常处理您的更改。

这是它的实际应用：

1.  首先我看到我有一个损坏（这是因为我昨天强迫我的虚拟机不正确地关闭：P）：

    ✘ domicor@ubuntu  ~/dotfiles   master ●  git status error: object file .git/objects/cd/593f6db1d5050406e15b9c80d215fd48db39f4 is empty error: object file .git/objects/cd/593f6db1d5050406e15b9c80d215fd48db39f4 is empty fatal: loose object cd593f6db1d5050406e15b9c80d215fd48db39f4 (stored在 .git/objects/cd/593f6db1d5050406e15b9c80d215fd48db39f4) 已损坏 [![损坏的](../Images/61eaf4ab051024f4d61db1551a514226.png)](https://i.stack.imgur.com/ifXsW.png)

2.  制作我的文件夹的副本，`dotfiles`然后删除该`.git`文件夹。

    $ cd ~/dotfiles $ rm -rf .git

    [![点文件](../Images/f66b9589e0fdbb13bde68d25b534f632.png)](https://i.stack.imgur.com/yqBMk.png)

3.  然后重新创建一个 git repo。

    $ 混帐初始化

4.  添加遥控器。

    $ git remote add origin git@git.oschina.net:domicor/dotfiles.git

5.  从远程获取。

    $ git 获取

    这是上述命令的屏幕截图：[![rm-clone-fetch](../Images/1903a47e44cd1ded56559a75ae3c4abb.png)](https://i.stack.imgur.com/RI1Rc.png)

6.  现在重置 HEAD。

    $ git reset --hard origin/master

    这是截图：[![重置](../Images/2c6db60fbb5602d4bf6f13cfe76fd3c0.png)](https://i.stack.imgur.com/AirFb.png)

    请注意，在我从远程获取之后，我发出了一个`git status`命令来检查我的仓库的状态。您可以看到所有文件都未跟踪。从我的`git init`命令到`git reset`命令，命令行提示的第一部分是橙色的，表示当我初始化我的 repo 时，git 检测到文件，并且在重置后，所有文件都恢复到 HEAD 的状态，因此是绿色提示。

7.  设置上游分支：

    $ git branch --set-upstream-to=origin/master master

8.  `dotfiles (copy)`现在手动或通过命令行从备份文件夹（对我来说是）复制文件以替换文件`dotfiles`夹中的文件。检查状态，应该有变化，就像我的屏幕截图一样：

    [![最后](../Images/4023ec8e4299db5b5a164e8ad9675380.png)](https://i.stack.imgur.com/FqDIC.png)

9.  现在您可以`git diff your-filename`检查您的更改是否已正确应用，并且您可以从现在开始添加文件并提交。\o/

为了进一步理解它，git VCS 只是记录您的更改。当 VCS 损坏时，您的文件仍然是安全的。当你离开他们时，他们还在那里。因此，您备份文件并从其他地方恢复 git 记录，git 可以将恢复副本与您当前的文件状态进行比较，并了解发生了什么变化，就像它在损坏之前所做的那样。欢呼\o/

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-11T10:45:12.170

首先，您可以检查文件系统是否有错误：`fsck -y`

然后，检查 git 存储库：`git fsck`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-08-14T07:02:57.897

我遇到了这个问题，这个简单的技巧解决了这个问题。

## 步骤1

假设您在分支为“my-new-feature”的名为“my-project”的文件夹中遇到此问题，请将 repo 克隆到名为“my-project-dummy”的新文件夹并签出到“my-new-feature”

## 第2步

删除“my-project”文件夹中的“.git”文件夹并将“.git”文件夹从“my-project-dummy”文件夹复制到“my-project”

## Tadaaa，你现在可以走了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-08T16:10:56.780

你应该重新创建一个回购：

*   删除 .git 文件夹
*   将所有内容从工作目录复制到备份目录
*   混帐初始化
*   git 远程添加源[https://github.com/USERNAME/REPONAME.git](https://github.com/USERNAME/REPONAME.git)
*   git 拉
*   git checkout -b 备份
*   混帐添加。
*   git commit -m "添加备份"
*   git结账大师
*   你回来了（主分支）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-11T18:55:28.167

对另一个分支执行`git checkout`操作，您将获得已更改文件的列表，只需将它们提交并推送到分支。如果您这样做，问题将得到解决，下次您进行一些更改时`git status`应该可以工作。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2015-05-21T18:50:47.753

最简单的答案是“rm -rf .git ...” [http://www.bazhukov.net/2015/02/git-corrupt-loose-object/](http://www.bazhukov.net/2015/02/git-corrupt-loose-object/)

# c# - 将 C# MongoDB LINQ 与鉴别器一起使用

> ID：11597005
> 
> 赞同：7
> 
> 时间：2012-07-22T00:58:46.540
> 
> 标签：c#, linq, mongodb, discriminator

我有一个 MongoDB 集合，其中包含三个不同类（A、B、C）的文档，它们都继承自一个公共类 D。

使用官方 C# 驱动程序，我插入了所有三种类型（A、B、C）的文档，并且它们都正确显示为 _t 鉴别器，并且在我的代码中注册了它们的类映射。

如果我发出如下 LINQ 查询（使用 VB）：

```
dim Result = database.GetCollection("mycol").AsQueryable(Of C).Where(some where clause) 
```

如果我计算这个结果，我会收到一个错误“元素'来自类 A 的元素名称'不匹配 C 类的任何字段或属性。”

鉴别器不是要在`AsQueryable(Of C)`代码中起作用吗？看来，当我发出`.Count`特定于 C 类元素的 Where 子句时，它正在应用于 A、B 和 C 的文档。

我尝试添加`.OfType(Of C)`但没有效果，尝试先使用 转换为列表`.ToList`，但我继续收到相同的错误。有任何想法吗？

作为背景，我的客户端代码通常会处理 D 类型的对象。A、B、C 共享许多从 D 继承的公共属性，我想在这些属性上放置索引，因此我将它们放在一个集合中。但是，有时我需要在特殊情况下直接引用 A、B 或 C 类型的对象。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T15:24:42.017

使用多态类型层次结构时，您的集合变量和 LINQ 查询应该从基类开始。例如，要从数据库中读取所有类型 A 的文档，您可以编写：

```
var collection = database.GetCollection<D>("mycol");
var query = collection.AsQueryable<D>().OfType<A>();
foreach (var a in query)
{
    // process document of type A
} 
```

出于诊断目的，您可以使用以下命令查看相应的本机 MongoDB 查询：

```
var json = ((MongoQueryable<A>)query).GetMongoQuery().ToJson(); 
```

请注意，您必须将查询转换为 MongoQueryable<A>（而不是 MongoQueryable<D>），因为 OfType() 调用更改了 IQueryable 的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T02:23:16.597

使用`.AsQueryable<D>().OfType<C>.` 这应该有效地自动包含鉴别器。问题是我们不一定知道您对 A、B 和 C 使用相同的集合，因此不知道当您这样做时`AsQueryable<C>()`，我们实际上需要添加一个鉴别器。我们将研究如何在未来使其更加无缝。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T23:24:31.140

就我而言，我需要能够检索基类 A、B 以及 D。所有这些都存储在同一个集合中。这就是我最终在我的存储库中所做的：

```
    共享子 New()
        BsonClassMap.RegisterClassMap(Of D)(
            子(f)
                f.AutoMap()
                f.SetIsRootClass(True)
            结束子）

        BsonClassMap.RegisterClassMap(Of A)()
        BsonClassMap.RegisterClassMap(Of B)()

    结束子

```

这有效地将基类和子类都添加到了鉴别器中。

```
_t：D，A

```

然后允许我查询这两种类型。

```
Dim collection = _db.GetCollection(of D)("Items")

Dim resultA = collection.AsQueryable().OfType(of A) ' 仅类型 A
Dim resultB = collection.AsQueryable().OfType(of B) ' 仅类型 B
Dim resultD = collection.AsQueryable().OfType(of D) ' A's 和 B's 作为基类

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-19T19:40:32.380

我遇到了同样的问题： .AsQueryable() 和 OfType() 都不会在查询中产生“_t”鉴别器。尤其是当您拥有高级通用 OpenQuery() 方法时，您可以将 IQueryable 接口公开给任何插件，而无需引用 Mongo 驱动程序库。无论如何，如果使用静态类来访问您的集合，告诉 BsonClassMap 特定类是 root 将解决这个问题。

```
// Data Repository class
public static class MyDataRepositoryMethods
{

    static MyDataRepositoryMethods()
    {
        BsonClassMap.RegisterClassMap<MyBaseClassOfStuff>(x =>
        {
            x.AutoMap();
            x.SetIsRootClass(true);
        });
    }

    /// <summary>
    /// Returns a queryable data sample collection
    /// </summary>
    /// <typeparam name="TMyBaseClassOfStuff"></typeparam>
    /// <returns></returns>
    public static IQueryable<TMyBaseClassOfStuff> OpenQuery<TMyBaseClassOfStuff>() where TMyBaseClassOfStuff: MyBaseClassOfStuff
    {
        using (var storage = new MongoDataStorageStuff())
        {
            // _t discriminator will reflect the final class, not the base class (unless you pass generic type info of the base class
            var dataItems = storage.GetCollection<TMyBaseClassOfStuff>("abcdef").OfType<TMyBaseClassOfStuff>(); 
            return dataItems ;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-23T17:55:15.243

我正在使用 C# 驱动程序 v1.9.2，但似乎这是在 v1.4.1 中引入的。

```
collection = MongoDatabase.GetCollection<MyBaseClass>("MyCollectionName");
long count = collection.AsQueryable().OfType<MyDerivedClass>().Count(); 
```

配置文件包含以下内容：

```
command: {
  "count" : "MyCollectionName",
  "query" : {
    "_t" : "D"  // MyDerivedClass discriminator value
  }
} 
```

# java - 为什么我的浏览器会发送两个具有相同属性的数据包，除了推送？

> ID：11597020
> 
> 赞同：0
> 
> 时间：2012-07-22T01:01:33.087
> 
> 标签：java, tcp, network-programming, packet, jpcap

我正在编写一个 java (jpcap) 应用程序来区分哪个响应包是哪个请求包。突然，我遇到了这两个我的浏览器发送的 http 数据包完全相同（seq 号，ack 号，...），除了其中一个具有推送标志和不同的标识号。我想知道为什么浏览器会发送这两个？是阿贾克斯吗？

```
1342824149:911270 /192.168.2.#->/174.143.213.# protocol(6) priority(0)  hop(128)  offset(0) ident(14123) TCP 11303 > 80 seq(2473817076) win(17040) ack 3940549542 

1342824149:911797 /192.168.2.#->/174.143.213.# protocol(6) priority(0)  hop(128)  offset(0) ident(14124) TCP 11303 > 80 seq(2473817076) win(17040) ack 3940549542  P 
```

还有更重要的问题，这两个数据包是否有单独的响应？还是只有一个回应？或相同的反应？什么反应会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:12:06.453

您的浏览器只会说“连接到端口 Y 上的 IP 地址 X”并“发送这些字节”。内核中的 TCP/IP 堆栈负责实际创建数据包并确保它们到达目的地。在这种情况下，第一个数据包没有得到目的地的确认，所以内核中的 TCP 代码再次发送它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:56:37.273

如果它们具有相同的 TCP 序列号，则它们是相同的数据：第二个是由于未确认而重试。除了可能在路由器中，PUSH 标志实际上并没有做任何事情。不同的 Wireshark 编号只是因为它们是不同的实际接收事件：它不在数据包中。

# c++ - 模板地图。.. 我们可以吗？

> ID：11597024
> 
> 赞同：1
> 
> 时间：2012-07-22T01:02:47.543
> 
> 标签：c++, templates, maps

我想创建一个包含离散类型值的容器（最好是地图）：

```
KEY     Value
Omega    1.9  
Output   myoutput.out  
sizex    82  
#####    ### 
```

其中键是 = **“std::string”**，值是**“INT/DOUBLE/String”之一**

我尝试声明类似的东西。

```
template<typename T>  
map<string, typename T> mymap; 
```

但确定它不起作用。

:(

我知道有一种简单的方法，将它们分成不同的变量，但这只会导致代码膨胀。我也很清楚这个事实，
`std::map<key_value key, class Allocator = allocator<pair<const Key,T>>`
需要知道关于“key”和“value”的信息才能在编译期间生成空间。

但是这个问题困扰了我很长一段时间，只需要对其进行排序：D
有人可以帮我解决这个问题吗：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:22:19.343

```
#include <map>

using namespace std;

union mytypes_t {
  int c;
  double i;
  char* c;
} 

int main()
{
    Map<int, mytypes_t> myObject;
} 
```

更多关于[工会](http://www.cplusplus.com/doc/tutorial/other_data_types/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T01:43:22.667

正如您所提到的，简单的解决方案是将数据分成三个不同的数组并编写一个包装器，该包装器将在适当的容器中找到元素（假设执行查找的代码确实知道变量的类型，否则即使这也会变得复杂）。

或者，您可以使用变体类型（增强变体）或类型擦除（增强任何）来使用将处理不同类型的容器。如果你不能使用 boost，那么实现一些简单的类型擦除并不*那么复杂，但除非你**真的*需要它，否则我会远离它（即，比起你自己的方轮，更喜欢预制的现成解决方案）

# php - 这种使用 str_replace 是否足以防止 SQL 注入攻击？

> ID：11597025
> 
> 赞同：4
> 
> 时间：2012-07-22T01:02:54.367
> 
> 标签：php, sql, security, sql-injection

**编辑**如果您打算回答这个问题，请至少阅读它。不要简单地阅读标题，然后谷歌'sql injection php'，并将结果粘贴为答案

首先，我很清楚有很多关于如何最好地防止 SQL 注入的可用资源，但我的问题特别是关于是否只需很少的努力就足够了。

我签约的一个组织最近被告知，他们以前的承包商开发的合作伙伴 (PHP) 网站存在重大安全问题（我个人最喜欢的是通过在 URL 中使用字符串“紧急”，您可以获得未经身份验证的访问任何网站中的页面...）

我被要求审查 PHP 站点的安全性并突出显示任何主要问题。我从以前使用该站点的经验中知道，编码标准确实很糟糕（例如，跨页面重复的大量代码，变化率约为 5%，数百个未使用的变量，$var = "yes" 代替布尔值，编写的 SQL 语句进入每个脚本，默认情况下不安全（某些页面忘记验证用户）等）。审查该网站是一个痛苦的提醒，世界上有一些真正的白痴自称开发人员。

由于这些代码质量问题，我只想强调严重和半严重的安全问题。如果我注意到网站的每一个问题，我的审查将需要数周时间。

我不是 SQL 注入方面的专家，但据我了解，您**必须**能够在注入任何其他类型的语句之前关闭现有查询的引用字符串。那么以下代码行是否足够？

```
"'".str_replace("'","''",$_POST['var_name'])."'" 
```

我对改进或更改代码的建议不感兴趣，只是在这种情况下是否可以通过 $_POST['var_name'] 进行 SQL 注入。`str_replace` *如果您不*熟悉 PHP ，请用第二个参数替换第一个参数的所有实例，而不仅仅是第一个实例。

非常感谢任何输入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T01:39:36.307

不。老实说，如果你不准备你的陈述，你就是在要求一个受伤的世界。

仅仅因为你用引号来逃避你的引号，你就没有保护自己。想一想：

一位用户向您发送：`username'; drop database foo;`

你会逃避它`username''; drop database foo;`

但！如果用户这样做：`username\'; drop database foo;`

你会有麻烦的。您将解决此问题`username\''; drop database foo;`

这意味着用户放置的报价被转义，并且您的报价结束了字段用户名。然后将执行 drop。这是非常不安全的。

您需要确保准备好语句或应用命令`quote`，例如这些转义特殊字符。`PDO::quote``mysqli_real_escape_string`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T01:07:12.353

您有两个选择 - 转义 unsafe_variable 中的特殊字符，或使用参数化查询。

```
$safe_variable = mysql_real_escape_string($_POST["user-input"]);

$mysqli = new mysqli("server", "username", "password", "database_name");    
$unsafe_variable = $_POST["user-input"];
$stmt = $mysqli->prepare("INSERT INTO table (column) VALUES (?)"); 
```

两者都可以保护您免受 SQL 注入。参数化查询被认为是更好的做法，但在变量中转义字符将需要较少的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T01:27:03.297

回答您的问题：不，仅删除引号不足以防止 SQL 注入。

例如，

`"SELECT * FROM user_table WHERE userid=$userid AND password=$password"`

`$password`如果包含“garbage OR 1”或类似的东西，可能会出现严重错误。因此，如果他们有格式错误的查询，删除引号将无济于事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:16:51.963

这取决于您的数据库服务器及其配置。

加倍`'`是`''`转义字符串文字内容的 ANSI 标准方式，*应该*足够了。

但是，如果您使用 MySQL 或 9.1 之前的 PostgreSQL 版本，则字符串文字语法默认不符合 ANSI（如果重新配置，则可以），并且反斜杠字符具有特殊含义。`\'`这允许像680's answer这样的攻击。

此外，如果您将字节字符串传递给您的数据访问函数，并且您的数据库恰好使用东亚字符编码，那么您将遇到对可能是多字节一部分的 a 进行`str_replace`字节替换的问题`'`序列，以高字节结尾，后跟`''`：第一个引号作为多字节序列的一部分被吃掉，然后第二个关闭字符串。（这不会发生在 UTF-8 中，它旨在避免尾随低字节。）

对您正在使用的数据库使用适当的转义调用（例如`mysql_real_escape_string`），或者更好的是，使用参数化查询，意味着您不必了解这些晦涩和烦人的边缘情况。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-29T10:13:52.843

这个数组用于字符串替换怎么样

```
$search = array(" ' ", ' " ', " ` ", ' & ', ' , ', ' ; ', ' SELECT ', ' WHERE ', ' AND '); 
```

# java - 如何使用数组和 for 循环找到标准偏差？

> ID：11597029
> 
> 赞同：-1
> 
> 时间：2012-07-22T01:04:40.657
> 
> 标签：java

我正在尝试使用 for 循环查找数组的标准偏差。我有一些可能有效的代码，但它给了我错误。我将不胜感激一些指导和帮助！:-)

这是代码：

```
double StandardDeviation() {
    double Dog,Variance,StandardDeviationFormula;

    for (int k = 0; k < TheArrayAssingment.length; k++) {

         Dog = Dog + (TheArrayAssingment[k] - Average()) 
                      * (TheArrayAssingment[k] - Average());

         Variance = Dog / (TheArrayAssingment.length - 1);
         StandardDeviationFormula = Math.sqrt(Variance);

    }
    return StandardDeviationFormula;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T01:45:58.617

由于您显然是一般编程的初学者以及 Java 新手，因此这里有一些一般性建议：

1.  始终遵循编码标准/约定。它们的存在是为了使您的代码对其他人更具可读性。即使在小的一次性示例中也要这样做，以便您养成在重要的情况下这样做的习惯。

2.  方法和变量名称以小写字母开头是 Java 中的“通用”约定。你已经用大写字母开始了它们。更改`StandardDeviation`为`standardDeviation`, `Variance`to`variance`等等。

3.  选择*准确*反映预期含义的变量和方法名称。例如：

    *   `Dog`显然是没有意义的。
    *   `TheArrayAssingment`可能有意义，但我无法弄清楚。
    *   `StandardDeviationFormula`不准确。它不包含公式。它包含一个值，该值是应用公式的结果。

    如果您正确拼写方法和变量名称，它也会有所帮助...

    （这也有例外。例如，大多数经验丰富的程序员认为，当含义不言而喻时，为局部变量使用常规和缩写名称是完全可以接受的。例如，`ex`或者`e`对于异常，//`i`对于循环变量，对于迭代器对象。当您阅读更多其他人的代码时，您将看到/理解“成语”。）`j``k``it`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:20:05.183

这将做到：

```
package cruft;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

/**
 * StatisticsUtil has statistics utility methods
 * @author Michael
 * @link
 * @since 7/21/12 7:30 PM
 */
public class StatisticsUtil {

    public static void main(String[] args) {
        List<Double> values = new ArrayList<>();
        for (String arg : args) {
            values.add(Double.valueOf(arg));
        }
        System.out.println(String.format("mean   : %10.4f", getMean(values)));
        System.out.println(String.format("median : %10.4f", getMedian(values)));
        System.out.println(String.format("std dev: %10.4f", getStandardDeviation(values)));
    }

    public static double getMean(List<Double> values) {
        double mean = 0.0;
        if ((values != null) && (values.size() > 0)) {
            for (double value : values) {
                mean += value;
            }
            mean /= values.size();
        }
        return mean;
    }

    public static double getStandardDeviation(List<Double> values) {
        double deviation = 0.0;
        if ((values != null) && (values.size() > 1)) {
            double mean = getMean(values);
            for (double value : values) {
                double delta = value-mean;
                deviation += delta*delta;
            }
            deviation = Math.sqrt(deviation/values.size());
        }
        return deviation;
    }

    public static double getMedian(List<Double> values) {
        double median = 0.0;
        if (values != null) {
            int numValues = values.size();
            if (numValues > 0) {
                Collections.sort(values);
                if ((numValues%2) == 0) {
                    median = (values.get((numValues/2)-1)+values.get(numValues/2))/2.0;
                } else {
                    median = values.get(numValues/2);
                }
            }
        }
        return median;
    }

    public static double getMean(double [] values) {
        double mean = 0.0;
        if ((values != null) && (values.length > 0)) {
            for (double value : values) {
                mean += value;
            }
            mean /= values.length;
        }
        return mean;
    }

    public static double getStandardDeviation(double [] values) {
        double deviation = 0.0;
        if ((values != null) && (values.length > 1)) {
            double mean = getMean(values);
            for (double value : values) {
                double delta = value-mean;
                deviation += delta*delta;
            }
            deviation = Math.sqrt(deviation/values.length);
        }
        return deviation;
    }

    public static double getMedian(double [] values) {
        double median = 0.0;
        if (values != null) {
            int numValues = values.length;
            if (numValues > 0) {
                Arrays.sort(values);
                if ((numValues%2) == 0) {
                    median = (values[(numValues/2)-1]+values[numValues/2])/2.0;
                } else {
                    median = values[numValues/2];
                }
            }
        }
        return median;
    }
} 
```

# c# - 如何在 MVC3 中将 MapRoute 与区域一起使用

> ID：11597035
> 
> 赞同：3
> 
> 时间：2012-07-22T01:06:13.613
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-routing, asp.net-mvc-3-areas

我的网络应用程序中有一个名为“Admin”的区域。

因此，[http](http://localhost.com/Admin) ://localhost.com/Admin转到管理区域中的主控制器和索引操作。

但是，我希望能够使用以下 URL 访问 Admin Home Controller 和 Index Action：

[http://localhost.com/你好](http://localhost.com/Hello)

我有这个作为我的尝试：

```
routes.MapRoute(
            "HelloPage",
            "Hello/{controller}/{action}",
            new{area= "Admin", controller = "Home", action = "Index"},
            new[] { typeof(Areas.Admin.Controllers.HomeController).Namespace }); 
```

如您所见，我正在指定命名空间和区域，但我得到的只是路由错误：

> 未找到视图“索引”或其主视图，或者没有视图引擎支持搜索的位置。

它不是在管理区域中搜索。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T04:28:06.427

问题是我在 Global.asax 中设置路线。

我应该在管理区域的 AreaRegistration 中设置它。一旦我这样做了，问题就解决了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T01:28:50.060

尝试这个：

```
routes.MapRoute(
       "HelloPage",
       "Hello/{controller}/{action}/{id}",
       new { area = "Admin", controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

然后将其添加到您的管理控制器操作中：

```
 if (!this.ControllerContext.RouteData.DataTokens.ContainsKey("area"))
  {
      this.ControllerContext.RouteData.DataTokens.Add("area", "Admin")
  } 
```

您可以[在此处](http://msdn.microsoft.com/en-us/library/ee461420%28VS.100%29.aspx#registering_area_routes)查看更多文档。

# jquery - JQuery 为大写和小写返回相同的字符码

> ID：11597038
> 
> 赞同：1
> 
> 时间：2012-07-22T01:06:49.750
> 
> 标签：jquery

我已将此功能附加到使用 jquery 的按键事件中，但在 eventObject 中，它为输入的大写和小写字符返回相同的字符代码

```
function keyPressed(delegates,eventdata){
        var keyType = new KeyType();
        var keycode = eventdata.which;
        if((keycode === 0)&&(eventdata.keyCode === 46)){
            keycode=46;
        }
        switch(keycode)
        {
        case keyType.enter:
            break;
        case keyType.backspace:
            break;
        case keyType.del:
            break;
        case keyType.space:
            break;
        default:
            keycode = 1;
        }
        console.log(eventdata.charCode);
        console.log(eventdata.which);
        console.log(eventdata.keyCode);
        //if a delegate is present call it
        var delegate = delegates[keycode];
        if(delegate !== null){
            delegate(eventdata);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T01:10:37.983

字符代码表示按下的键。您的键盘只有一个键用于“a”和“A”。您还需要检查 shift 键：

```
 if (eventData.shiftKey) {
    //Shift
  }
  if (eventData.ctrlKey) {
    //Ctrl
  }
  if (eventData.altKey) {
    //Alt
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T04:50:42.673

当使用 jQuery 检测键盘/鼠标事件时，您应该始终使用[`event.which`](http://api.jquery.com/event.which/)来获取规范化的用户跨浏览器输入。

Slightly off-topic illustrative history, couple months ago I made an userscript in Vanilla JS which runs perfectly fine in FF and Chrome, and just now I had a report that it wasn't working in Opera. I quickly debugged it on Opera and of course, the `event.keyCode` was returning `0` when it should be the key's value.

So yes, whenever you can use jQuery's [`event.which`](http://api.jquery.com/event.which/) to handle user-input, use it to save a lot of headaches.

`keydown` and `keypress` are different events and as such may report different values for different events -- which may differ further into having a `keyCode` and/or `charCode` properties in different browsers. `event.which` minimizes those discrepancies.

# html - CSS文件未链接

> ID：11597042
> 
> 赞同：0
> 
> 时间：2012-07-22T01:07:24.190
> 
> 标签：html, css

所以我在不同的文件夹中有一个基本的 html 文件和 css 文件。主文件夹“code”有两个文件夹：“templates”和“css”。

home.html 位于“templates”文件夹中，而 main.css 位于“css”文件夹中。

```
<link rel="stylesheet" type="text/css" href="../css/main.css" /> 
```

我使用了这个链接，它在本地运行良好，但是当我连接到本地主机端口时，根本没有读取 css 文件。知道为什么吗？

我可能还应该补充一点，我正在使用谷歌应用引擎并通过它部署网站。这是简短的python代码：

```
import bottle
from bottle import route
from string import Template
from google.appengine.ext.webapp import util
bottle.app().catchall=False

@route('/')
def readpage():
    fid = open('templates/home.html')
    return fid

util.run_wsgi_app(bottle.default_app()) 
```

和 app.yaml 处理程序：

```
handlers:
- url: .*
  script: main.py

- url: /css
  static_dir: css

- url: /media
  static_dir: media 
```

修复：必须将其添加到 yaml 文件中：

```
- url: /css/main.css
  static_files: css/main.css
  upload: css/main.css 
```

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T01:18:01.083

我建议你尝试使用绝对路径。如果虚拟主机的根目录或诸如此类的东西同时包含`templates`and `css`，那么您应该使用 just `/css/main.css`。

这将在查看 时解决问题`http://localhost/templates/home.html`，但可能不适用于某些所见即所得编辑器或在 Web 服务器外部访问文件时。试着找出哪个开发环境更适合你，这样你就可以避免这些问题。

# java - 绑定和映射的区别

> ID：11597049
> 
> 赞同：3
> 
> 时间：2012-07-22T01:08:06.627
> 
> 标签：java, binding, mapping, terminology

术语是否存在语义差异

*   捆绑
*   映射

通过将对象模型绑定到另一种表示形式，例如 XML。一个只包括单向映射还是两个术语都是同义词？

**用例**

我有一个 Java 对象模型并想创建它的 XML 表示。为此，我使用反射。因为我对从 XML 生成 Java 代码不感兴趣，所以这只是一个单向过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T01:39:48.853

据我了解，这些术语绑定和映射并不完全等效。

*   *映射*是将数据结构转换为另一个数据结构（例如：将 DTD 映射到某个对象模型）。
*   *绑定*是关于通过某种数据结构（例如将一些 XML 文件绑定到 DOM）来访问一些实际数据。

这意味着绑定是一种方式，而映射通常是两种方式。

对于提议的用例，我将使用*映射*，因为创建 XML 文件应该适用于任何数据。

当谈到将对象模型绑定到某种表示时，它意味着目标表示是某种数据（某种编程语言中的类是模型的一个实例，在许多可能的实例中选择）。也就是说，您不会将 XML 结构绑定到（抽象）对象模型，但会将其映射到其他一些实现。

不确定我是否足够清楚，但我使用类和实例之间的绑定（我将一个实例绑定到某个现有类）并将两个数据结构或一个数据集映射到另一个数据结构（两个具有相同抽象级别的对象）。

# c++ - Qt GraphicsScene 绘图项

> ID：11597052
> 
> 赞同：0
> 
> 时间：2012-07-22T01:09:50.090
> 
> 标签：c++, qt, sprite

我正在尝试测试 QGraphicsView 和 QGraphicsScene。我创建了一个继承 QGraphicsItem 的类 Brick。Brick 类将根据调用构造函数时指定的坐标绘制砖块。现在我正在尝试用砖块填充程序的第一行。砖精灵是 32x32。

砖类构造函数：

```
Brick::Brick(int x, int y)
{
pixmap = new QPixmap("brickblock.jpeg");

setPos(x, y);
} 
```

窗口的构造函数：

```
 for(int i = 0; i <= 768; i+=32){ // 24 bricks
    Brick *abrick = new Brick(i, 0); // x = i; y = 0;
    scene->addItem(abrick);} 
```

问题是程序将这些积木绘制在屏幕中间的某个位置，而不是第一行。GraphicsView 占据了整个屏幕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T01:31:07.770

尝试使用：

```
scene->setSceneRect(0, 0, 768, 768); 
```

简而言之，这将告诉场景和视图左上角坐标是 (0, 0)，并且场景是 768 单位宽 x 768 单位高。否则场景和视图会认为 (0, 0) 是中间坐标。

# java - Android最终变量错误

> ID：11597055
> 
> 赞同：-1
> 
> 时间：2012-07-22T01:10:12.350
> 
> 标签：java, android, string, final

当我编写这段代码时，我看到了这个错误。

我在标记行中看到“无法分配最终的局部变量 peyvaDawi，因为它是在封闭类型中定义的”。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ferheng=new Veritabani(this);
    final ImageButton btn=(ImageButton)findViewById(R.id.btnBigere);
    final EditText edtPeyv=(EditText)findViewById(R.id.edtPeyv);
    final RadioButton rbKT=(RadioButton)findViewById(R.id.rbKT);
    final RadioButton rbTK=(RadioButton)findViewById(R.id.rbTK);

    final String peyvaDawi="emre";
    btn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            final boolean KT=rbKT.isChecked();
            final boolean TK=rbTK.isChecked();

            sonuc="";
            String strPeyv=edtPeyv.getText().toString();
            Boolean tenePeyv=false;
            if(strPeyv==peyvaDawi)
                tenePeyv=true;
            else
                tenePeyv=false;
            if(KT)
                Arama(strPeyv,"kurdi",tenePeyv);
            if(TK)
                Arama(strPeyv,"tirki",tenePeyv);
                            peyvaDawi=strPeyv;//<<<<<<<<<<<<<<<<< i see error in this line.

        }
    });
} 
```

我在 peyvaDawi=strPeyv 行中看到错误；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T01:12:37.360

peyvaDawi 被声明为 final，因此一旦它被分配了一个值，你就不能重新分配它。只是不要这样做。为什么要更改其范围仅限于此方法的局部 String 变量的值？

也不要使用`==`. 请改用`equals(...)`or`equalsIgnoreCase(...)`方法。了解 == 检查两个*对象*是否相同，这不是您感兴趣的。另一方面，这些方法检查两个字符串是否具有相同顺序的相同字符，这在这里很重要。所以而不是

```
if (fu == "bar") {
  // do something
} 
```

做，

```
if ("bar".equals(fu)) {
  // do something
} 
```

或者，

```
if ("bar".equalsIgnoreCase(fu)) {
  // do something
} 
```

此外，您应该将***所有***块括在花括号中，包括所有 if、else 块，即使它们只有一行长，以免误导自己认为由于错位的缩进而导致一行代码在块中，而实际上它不是不。

# ruby - ruby 在方法外初始化实例变量

> ID：11597059
> 
> 赞同：2
> 
> 时间：2012-07-22T01:10:36.827
> 
> 标签：ruby, variables, instance

作为一个实验，我写了一些看起来像

```
class MyClass

    @var = 100

    def hello
      p "hello"
    end

end 
```

我知道如果我这样做`MyClass.new`不是`@var`在那个对象上定义的，而是我认为这会`@var`在 class 上定义`MyClass`。

这有实际用途吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T02:10:13.463

它*确实*有一个用途：类变量。普通的 Ruby 类变量实现，`@@`在超类和它的子类之间*共享*相同的变量：

```
class A
  @@v = 0
  def self.v; @@v; end
  def self.v=(val); @@v=val; end
end
class B < A; end
A.v #-> 0
A.v= 3 #-> 3
B.v #->3
B.v= 42 #-> 42
A.v #-> 42 
```

显然，这没什么用（除了与类实例变量不同的是，类变量也可以在实例方法中直接访问，而不是 through `self.class`）。但是与类实例变量相同的示例：

```
class A
  @v = 0
  def self.v; @v; end
  def self.v=(val); @v=val; end
end
class B < A; end
A.v #-> 0
A.v= 3 #-> 3
B.v= 42 #-> 42
A.v #-> 3 
```

此外，类实例变量可以利用已经为实例变量编写的所有元编程，如下所示：

```
class Foo
  class << self
    attr_accessor :v #Uses a class instance variable
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T01:45:35.483

如果您为`@var`

```
MyClass.singleton_class.class_eval { attr_accessor :var } 
```

那么你可以`@var`像对待一个类变量一样对待。不同之处在于它不会被`MyClass`.

[_why 在Dwemthy 的 Array](http://mislav.uniqpath.com/poignant-guide/dwemthy/)中利用了这一点。

# php - 将从 MySQL 查询获得的字符串/val 转换为 php 中的 int？

> ID：11597062
> 
> 赞同：2
> 
> 时间：2012-07-22T01:10:57.760
> 
> 标签：php, mysql, sql, string, int

我试图从 MySQL 数据库中检索值并将其转换为 int，而不是向其添加 3，而不是尝试将更新 int 存储到数据库中。我没有收到任何错误或任何东西。我从数据库中检索的初始值为 5 及以上我试图添加 3 而不是更新数据库。现在更新的值应该是 8，但它不是只是 3。我不知道我做错了什么，所以请帮帮我。

我的 index.php 中的 php 代码如下：

```
else if ($tag == 'addQuestion'){
                $username = mysql_real_escape_string($_POST['username']);
                $question = mysql_real_escape_string($_POST['question']);
                $tag1 = mysql_real_escape_string($_POST['tag1']);
                $tag2 = mysql_real_escape_string($_POST['tag2']);
                $tag3 = mysql_real_escape_string($_POST['tag3']);
                $time = $_POST['time'];
            $addQu = $db->addQuestion($username, $question, $tag1, $tag2, $tag3,$time);
        if($addQu){
            $q_id = $addQu["id"];
            $addQTA = $db->addQTA($username,$q_id,$question,$tag1,$tag2,$tag3);
            if($addQTA){
                $getKP= $db->getKP($username);
                if($getKP){

                                            //Having trouble at this part
                    $kp = (int)$getKP['karma_points'];
                    $ask_question_points = $kp + 3;

                    $updateKP= $db->updateKP($username,$ask_question_points);
                        if($updateKP){
                            $response["error"] =1;
                            $response["msg"] = "updateKP in AddQuestion Succesfull";
                            echo json_encode($response);
                    }
                    else{
                        $response["error"] =1;
                        $response["error_msg"] = "Error updateKP in AddQuestion";
                        echo json_encode($response);
                        }
                    }
                    else{
                        $response["error"] =1;
                        $response["error_msg"] = "Error inserting getKP in AddQuestion";
                        echo json_encode($response);
                        }
                }
            else{
                $response["error"] =1;
                $response["error_msg"] = "Error inserting QTA";
                echo json_encode($response);
                }
        }else{
            $response["error"] =1;
            $response["error_msg"] = "Error inserting question";
            echo json_encode($response);
            } 
            } 
```

下面是 DB_functions.php 中处理更新查询的函数代码：

```
public function updateKP($username,$karma_points){
        $result = mysql_query("UPDATE users SET karma_points = '$karma_points' WHERE username = '$username'") or die(mysql_error());
        return($result);
        } 
```

谢谢你！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:16:52.650

您应该省去自己的麻烦，并在一个查询中完成：

```
$result = mysql_query("UPDATE users SET karma_points = karma_points + $karma_points WHERE username = '$username'") or die(mysql_error()); 
```

这将自动`karma_points`为用户增加您的列`$username`，其值为`$karma_points`。与其在 PHP 中进行数学运算并将其发送回 MySQL，不如在 MySQL 中进行。

# django - 未定义异常名称“main_page”

> ID：11597065
> 
> 赞同：1
> 
> 时间：2012-07-22T01:11:18.750
> 
> 标签：django, nameerror

我是 Django 的新手。设置是ubuntu服务器。已创建项目、数据库，编辑了 settings.py、views.py、urls.py 文件。创建了一个模板文件夹和一个 main_page.html 文件。所有这些都来自 django:visual quickpro 书。运行开发服务器时，我不断收到名称错误。它说未定义名称“main_page”。

这是urls.py；

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

urlpatterns = patterns('',
   (r'^$', main_page),
    # Examples:
    # url(r'^$', 'chapter2.views.home', name='home'),
    # url(r'^chapter2/', include('chapter2.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
) 
```

这是views.py；

```
# Create your views here

from django.http import HttpResponse

from django.template import Context
from django.template.loader import get_template

def main_page(request):
  template = get_template('main_page.html')
  variables = Context({'head_title': 'First Application',
    'page_title': "Welcome to our first application',
    'page_body': "This is our first application, pretty good, eh?'})
       output = template.render(variables)
  return HttpResponse(output) 
```

我认为书中存在语法错误，它非常适合 Windows，或者我只是遗漏了一些明显的东西。我已经工作了几个小时，但没有看到问题。我希望有人能帮帮忙。

谢谢，鲍比

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T01:15:28.280

在 urls.py 的顶部，添加以下内容：

```
import app.views   # where "app" is the name of your app 
```

然后将 urls.py 中的行更改为：

```
(r'^$', app.views.main_page), 
```

# android - SharedPreferences 根本不加载数据，即使在同一个应用程序实例中

> ID：11597067
> 
> 赞同：0
> 
> 时间：2012-07-22T01:11:35.233
> 
> 标签：android, sharedpreferences

这是在我的`onCreate`：

```
sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this); 
```

`sharedPrefs`在课堂上是一个未初始化`SharedPreferences`的人。

后来，我这样做：

```
sharedPrefs.edit().putString("token", token);
Log.d("asdf", "token is " + token);
Log.d("asdf", "reading prefs: " + sharedPrefs.getString("token", null)); 
```

并且日志输出如下：

```
token is ABC123
reading prefs: null 
```

所以`token`（一个字符串）肯定是正确设置的。但由于某种原因..它只是不会保存/读取sharedPreferences。

有任何想法吗？如果你们愿意，我会发布完整的代码，但我怀疑它会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T01:14:38.687

在该`put()`方法之后，您应该实现`sharedPrefs.edit().commit()`将数据提交到 sharedpreference 中。

```
sharedPrefs.edit().putString("token", token)
                .commit(); 
```

# facebook - 使用 SDK 公开发布到 FB

> ID：11597070
> 
> 赞同：0
> 
> 时间：2012-07-22T01:11:56.003
> 
> 标签：facebook, facebook-graph-api

当我代表用户发布帖子以公开帖子时，是否有强制甚至默认设置？我正在使用 FB sdk for JS 发布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:04:31.617

不，当然没有办法*强迫*它。

您所能做的就是在您的应用设置（身份验证对话框设置）中设置默认*建议。*

使用对话框发布时，用户可以在此处更改该建议。

如果您的应用在后台发布，无需用户直接交互，用户仍然可以在其用户配置文件中的应用设置选项卡上覆盖您的建议。

# boolean - 使用卡诺图代替真值表有什么优点/缺点

> ID：11597071
> 
> 赞同：3
> 
> 时间：2012-07-22T01:12:00.120
> 
> 标签：boolean, boolean-logic, boolean-expression, boolean-operations, karnaugh-map

我应该使用什么？或者是否有特殊场合我应该使用其中一种？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T17:50:27.830

K map 对于更高的维度不一定*会失败*。问题是超过五个变量很难可视化。4 变量 K-map 是二维的，易于可视化。5 变量是三维的，但从可视化的角度来看仍然是可管理的，因为第 5 变量的 2 个状态只需要在视觉上从一个平面移动到下一个平面，而无需在任一平面的 x 或 y 方向上移动。仅使用 K 映射使具有超过 5 个变量的方程正确就足够困难了，更不用说考虑一组最佳项（“核心”主要蕴涵项和“选择”主要蕴涵项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T17:17:38.723

使用 k 映射减少了用于解决逻辑表达式的逻辑门的数量，从而减少了错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:41:29.140

真值表是每个可能输入的每个可能输出的列表。可以想象，这些可能会变得很大。从真值表中，你可以通过乘积之和直接得到一个布尔表达式，但这也是一个相当大的表达式。卡诺图采用真值表并提供了一种可视化方式来生成用于表达相同逻辑的更简单的公式。也就是说，任何时候生成真值表时，都可以并且可能应该生成 K-Map 以简化逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-07T15:30:52.273

k map 的缺点：

*   不适合电脑还原。
*   当涉及的变量数量超过四个时不适合。
*   必须注意每个单元格中具有相关条目的字段，例如 0、1（或）无关项。

# objective-c - 无法从 NSWindow 类的对象创建 BOOL

> ID：11597082
> 
> 赞同：1
> 
> 时间：2012-07-22T01:14:27.913
> 
> 标签：objective-c, macos, cocoa

当我从 NIB 加载窗口时，我看到了这个错误。该错误出现在 Apple 代码的深处。我的加载代码都正确执行，并且在运行时所有插座都设置正确。

```
Cannot create BOOL from object <NSWindow: 0x7f883b44f770> of class NSWindow 
```

这是被调用的代码

```
- (void)awakeFromNib{    
    [self showLoginSheet];
}

- (void)showLoginSheet
// User has asked to see the custom display. Display it.
{
    if (!self.loginSheet)
        [NSBundle loadNibNamed:@"LoginSheet" owner:self];
        //Check the myCustomSheet instance variable to make sure the custom sheet does not already exist

    [NSApp beginSheet: self.loginSheet
       modalForWindow: [[NSApp delegate] window]
        modalDelegate: self
       didEndSelector: NULL
          contextInfo: NULL];
} 
```

堆栈跟踪是

```
2012-07-21 21:09:57.575 MingleLookBooks[15934:503] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Cannot create BOOL from object <NSWindow: 0x7f883b44f770> of class NSWindow'
*** First throw call stack:
(
    0   CoreFoundation                      0x00007fff91305f56 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff874b9d5e objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff91305d8a +[NSException raise:format:arguments:] + 106
    3   AppKit                              0x00007fff9038a394 _NSBoolFromValue + 421
    4   AppKit                              0x00007fff903b1c5a -[NSEditableBinder hiddenState] + 83
    5   AppKit                              0x00007fff903b1bdf -[NSEditableBinder _hiddenStateWithMode:] + 41
    6   AppKit                              0x00007fff90389eaa -[NSEditableBinder _setStatesImmediatelyInObject:mode:triggerRedisplay:] + 579
    7   AppKit                              0x00007fff90389c60 -[NSEditableBinder _observeValueForKeyPath:ofObject:context:] + 123
    8   AppKit                              0x00007fff901a1643 -[NSObject(NSKeyValueBindingCreation) bind:toObject:withKeyPath:options:] + 591
    9   AppKit                              0x00007fff9019a959 -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1079
    10  AppKit                              0x00007fff90190f73 loadNib + 322
    11  AppKit                              0x00007fff90190470 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 217
    12  AppKit                              0x00007fff9019038b +[NSBundle(NSNibLoading) loadNibFile:externalNameTable:withZone:] + 141
    13  AppKit                              0x00007fff901902ce +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 364
    14  MingleLookBooks                     0x000000010ef0917a -[AppController showLoginSheet] + 138
    15  MingleLookBooks                     0x000000010ef08ffb -[AppController awakeFromNib] + 43
    16  CoreFoundation                      0x00007fff912fcfb1 -[NSObject performSelector:] + 49
    17  CoreFoundation                      0x00007fff912fcf32 -[NSSet makeObjectsPerformSelector:] + 274
    18  AppKit                              0x00007fff9019a9ff -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1245
    19  AppKit                              0x00007fff90190f73 loadNib + 322
    20  AppKit                              0x00007fff90190470 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 217
    21  AppKit                              0x00007fff9019038b +[NSBundle(NSNibLoading) loadNibFile:externalNameTable:withZone:] + 141
    22  AppKit                              0x00007fff901902ce +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 364
    23  AppKit                              0x00007fff9040106f NSApplicationMain + 398
    24  MingleLookBooks                     0x000000010ef08f32 main + 34
    25  MingleLookBooks                     0x000000010ef08f04 start + 52
)
terminate called throwing an exception(lldb) 
```

从堆栈跟踪中可以看出，这似乎与我的代码无关。我究竟做错了什么？我不知道，类似问题的其他答案并没有真正帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T01:21:46.973

看起来您的绑定之一在您的 XIB 中设置不正确。

# javascript - 如何检测已显示新的 google 即时页面？

> ID：11597084
> 
> 赞同：1
> 
> 时间：2012-07-22T01:14:56.733
> 
> 标签：javascript, jquery, dom, browser-extension, google-instant

我正在开发一个浏览器扩展，它需要在提供新的谷歌即时页面时进行调用，然后修改结果（想想[SEOQuake](http://www.seoquake.com/)）。

问题：如果用户将链接直接粘贴到 url 字段并按下回车键，则会发生新页面加载并且我的扩展程序将运行。然而，使用 google Instant，虽然 url 在您键入查询时会发生变化，但从技术上讲，您仍然在同一页面上，因此扩展程序无法运行。

我查看了 SEOQuake 的代码，这似乎是他们解决问题的方式：

```
document.body.addEventListener("DOMNodeInserted", sq_bindAsEventListener(this, function(event) { // 
```

这是一个很好的解决方案，但它对我来说并不理想，因为据我所知，低于版本 9 的 IE 不支持 DomNodeInserted。（惊喜！）

我将 jQuery 与应用程序捆绑在一起，因此我可以访问所有 jQuery 函数。我正在考虑使用[.keypress()](http://api.jquery.com/keypress/)并只是等到没有输入一秒钟 - 如果它是谷歌即时，我会知道页面已经改变的事实。

我的另一个想法是监视 URL 是否已更改；我似乎找不到任何 jquery 或 javascript 函数来跟踪 url 是否已更改。

知道已执行 google 即时搜索的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T17:05:12.827

听 hashchange 可能是要走的路。

较旧的 IE ( <8 ??) 不会给你这个事件，所以你可能仍然需要那里的计时器。当然，如果 IE7 可以使用即时可用的所有这些麻烦，无论如何我怀疑是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:20:43.333

一个粗略的解决方案：使用 setInterval() 并检查 window.top 的位置是否更改（这意味着已执行新查询）。

# java - 将 xml 中的 TextView 加载到 TextSwitcher

> ID：11597085
> 
> 赞同：10
> 
> 时间：2012-07-22T01:15:14.733
> 
> 标签：java, android, xml, textview

我一直在尝试使用从 xml 文件加载的 TextView 来设置 TextSwitcher。我有这个使用空 TextView 工作正常的基本 TextSwitcher 示例：

```
.java

public class TextSwitcherTest extends Activity 
{
    private TextSwitcher textSwitcher;

    private ViewFactory viewFactory = new ViewFactory() 
    {
        public View makeView() 
        {
            TextView textView = new TextView(TextSwitcherTest.this);

            return textView;
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        textSwitcher = (TextSwitcher) findViewById(R.id.textSwitcher);

        textSwitcher.setFactory(viewFactory);

        Animation in = AnimationUtils.loadAnimation(this,android.R.anim.fade_in);
        Animation out = AnimationUtils.loadAnimation(this,android.R.anim.fade_out);

        textSwitcher.setInAnimation(in);
        textSwitcher.setOutAnimation(out);

        textSwitcher.setText("test ok");
    }    
} 
```

-

```
main.xml

<?xml version="1.0" encoding="utf-8"?>

<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextSwitcher 
        android:id="@+id/textSwitcher"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

但是当我更改代码以尝试从 xml 文件加载 TextView 时，它会吐出一堆错误。这是修改后的代码：

```
.java

public class TextSwitcherTest extends Activity 
{
    private TextSwitcher textSwitcher;

    private ViewFactory viewFactory = new ViewFactory() 
    {
        public View makeView() 
        {
            LayoutInflater inflater = LayoutInflater.from(TextSwitcherTest.this);

            TextView textView = (TextView) inflater.inflate(R.id.textView,null);

            return textView;
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        textSwitcher = (TextSwitcher) findViewById(R.id.textSwitcher);

        textSwitcher.setFactory(viewFactory);

        Animation in = AnimationUtils.loadAnimation(this,android.R.anim.fade_in);
        Animation out = AnimationUtils.loadAnimation(this,android.R.anim.fade_out);

        textSwitcher.setInAnimation(in);
        textSwitcher.setOutAnimation(out);

        textSwitcher.setText("test ok");
    }    
} 
```

-

```
textview.xml

<?xml version="1.0" encoding="utf-8"?>

<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

任何人都可以提出我哪里出错的建议吗？代码编译正常，但我确定它与 LayoutInflater 以某种方式被滥用？

* * *

错误消息（它没有显示“11 more”）：

```
07-22 03:51:24.096: W/dalvikvm(580): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
07-22 03:51:24.137: E/AndroidRuntime(580): FATAL EXCEPTION: main
07-22 03:51:24.137: E/AndroidRuntime(580): java.lang.RuntimeException: Unable to start activity ComponentInfo{test09.TextSwitcher01/test09.TextSwitcher01.TextSwitcherTest}: android.content.res.Resources$NotFoundException: Resource ID #0x7f050001 type #0x12 is not valid
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.os.Looper.loop(Looper.java:137)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.app.ActivityThread.main(ActivityThread.java:4424)
07-22 03:51:24.137: E/AndroidRuntime(580):  at java.lang.reflect.Method.invokeNative(Native Method)
07-22 03:51:24.137: E/AndroidRuntime(580):  at java.lang.reflect.Method.invoke(Method.java:511)
07-22 03:51:24.137: E/AndroidRuntime(580):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-22 03:51:24.137: E/AndroidRuntime(580):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-22 03:51:24.137: E/AndroidRuntime(580):  at dalvik.system.NativeStart.main(Native Method)
07-22 03:51:24.137: E/AndroidRuntime(580): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f050001 type #0x12 is not valid
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:2110)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.content.res.Resources.getLayout(Resources.java:857)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
07-22 03:51:24.137: E/AndroidRuntime(580):  at test09.TextSwitcher01.TextSwitcherTest$1.makeView(TextSwitcherTest.java:23)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.widget.ViewSwitcher.obtainView(ViewSwitcher.java:80)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.widget.ViewSwitcher.setFactory(ViewSwitcher.java:99)
07-22 03:51:24.137: E/AndroidRuntime(580):  at test09.TextSwitcher01.TextSwitcherTest.onCreate(TextSwitcherTest.java:38)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.app.Activity.performCreate(Activity.java:4465)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-22 03:51:24.137: E/AndroidRuntime(580):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-22 03:51:24.137: E/AndroidRuntime(580):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-22T08:38:26.837

您的代码有几处问题：

首先，该`LayoutInflater.inflate()`方法期望布局文件的 id 格式为`R.layout.layout_name`而不是`R.id.some_id`：

```
TextView textView = (TextView) inflater.inflate(R.layout.textView, null); 
```

其次，您使用的代码将抛出 a `ClassCastException`，因为膨胀布局的根是 a`LinearLayout`而不是 a `TextView`，因为您尝试对其进行转换。您的代码应该是：

LinearLayout ll = (Linearlayout) inflater.inflate(R.layout.textView, null);

但即使是上面的行也行不通，因为顾名思义， a`TextSwitcher`将只接受 type 的孩子，在 the和两个孩子`TextView`之间没有任何东西。最后要使用的正确代码是：`TextSwitcher``TextView`

**textview.xml**的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" /> 
```

该`viewFactory`领域将是：

```
private ViewFactory viewFactory = new ViewFactory() {
        public View makeView()  {
            LayoutInflater inflater = LayoutInflater.from(TextSwitcherTest.this);
            TextView textView = (TextView) inflater.inflate(R.layout.textView, null);
            return textView;
        }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-25T16:12:35.333

主要使用 XML 非常简单。

在您的 XML 中添加一个 TextSwitcher 根视图和其中的两个 TextView：

```
<TextSwitcher
    android:id="@+id/textswitcher_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentEnd="true"
    android:inAnimation="@android:anim/fade_in"
    android:outAnimation="@android:anim/fade_out">

    <TextView
        android:id="@+id/tv_onboarding_next"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text1" />

    <TextView
        android:id="@+id/tv_onboarding_letsgo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text2" />

</TextSwitcher> 
```

然后在代码中，无论您希望动画动作发生在哪里：

使用 Kotlin：

```
textswitcher_id.setText(getString("Text2"))

// and somewhere else, switch it back:

textswitcher_id.setText(getString("Text1")) 
```

或者在 Java 中：

```
findViewById(R.id.textswitcher_id).setText(getString("Text2"));

// and somewhere else, switch it back:

findViewById(R.id.textswitcher_id).setText(getString("Text1")); 
```

笔记：

*   在 XML 中，您还可以使用两个包含而不是 TextView 两次，请参阅：[https ://stackoverflow.com/a/42724239/1852191](https://stackoverflow.com/a/42724239/1852191)

*   即使我们稍后以编程方式设置它，我们在 XML 中有默认文本的原因是因为在第一个视图中它将是空白的，直到它被设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-10T17:22:56.480

`TextViews`实际上，如果您`TextSwitcher`在布局 XML 中放置两个，则不需要设置工厂。这对我有用：

```
<TextSwitcher
    android:id="@+id/id1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:inAnimation="@android:anim/fade_in"
    android:outAnimation="@android:anim/fade_out">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:lines="1"/>
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:lines="1"/>
</TextSwitcher> 
```

（代码中没有额外的配置，只是`inflate`和`findViewById`）

但是，您必须在`TextViews`. 可以通过将 移动`TextView`到单独的文件然后将其包含两次来避免这种情况：

```
<TextSwitcher
    android:id="@+id/id1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:inAnimation="@android:anim/fade_in"
    android:outAnimation="@android:anim/fade_out">

    <include layout="@layout/titlebar" />
    <include layout="@layout/titlebar" />
</TextSwitcher> 
```

避免重复的其他方法是创建自定义样式并将其应用于两者`TextViews`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-17T04:58:57.353

我想出了这个解决方案，对我来说，它最接近直接在 XML 中定义 TextView：

首先，使用自定义定义定义 TextSwitcher，其中包含两个 TextView 对象：

```
 <TextSwitcher
            android:fontFamily="sans-serif-condensed"
            android:id="@+id/detail_date_textswitch"
            android:layout_height="wrap_content"
            android:layout_width="match_parent">
            <TextView
                android:id="@+id/detail_date_textview1"
                android:textColor="@color/grey_700"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="20sp"/>
            <TextView
                android:id="@+id/detail_date_textview2"
                android:textColor="@color/grey_700"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="20sp"/>
        </TextSwitcher> 
```

之后，在您的代码中，为您的 TextSwitcher 对象定义以下工厂：

```
 textSwitcher.setFactory(new ViewSwitcher.ViewFactory() {
        boolean isFirst = true;
        @Override
        public View makeView() {
            if (isFirst) {
                isFirst = false;
                TextView textView = (TextView) mDateView.findViewById(R.id.detail_date_textview1);
                mDateView.removeViewAt(0);
                return textView;
            } else {
                TextView textView = (TextView) mDateView.findViewById(R.id.detail_date_textview2);
                mDateView.removeViewAt(0);
                return textView;
            }
        }
    }); 
```

我不会说这并不棘手，但它对我有用。

# eclipse - 在eclipse中切换到标签索引x？

> ID：11597088
> 
> 赞同：0
> 
> 时间：2012-07-22T01:15:56.733
> 
> 标签：eclipse

你能告诉我在eclipse中切换到标签索引x的快捷方式是什么吗？类似于`Alt`++用于选项卡 1，`Tab`++用于选项卡2等...`1``Alt``Tab``2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:58:27.737

我认为目前使用 Eclipse 无法直接进入具有特定索引的选项卡，但是***您有以下选项***：

*   `CTRL`**+**`E` : 弹出打开的标签列表
*   `CTRL`**+**`F6` ：将为您提供可以滚动浏览的打开选项卡列表
*   `CTRL`**+**`PAGEUP`：导航到下一个右侧选项卡
*   `CTRL`**+**`PAGEDOWN`：导航到下一个左侧选项卡

# google-chrome - 在 NaCl 中为 OpenGL 加载图像的最佳方法

> ID：11597094
> 
> 赞同：1
> 
> 时间：2012-07-22T01:17:18.350
> 
> 标签：google-chrome, opengl, png, jpeg, google-nativeclient

从 .png 或 .jpg 文件加载实际图像数据以在 Chromes NaCl 中用于 OpenGL 的最佳方法是什么？

是否有可以做到这一点的 PPAPI 功能？我不认为有。

我正在考虑使用 javaScript 加载图像数据并将其传递回 NaCl。这可能吗？如果是这样，您使用什么 javaScript 方法将图像数据传递给 NaCl，因为我不认为 postMessage 是我想要的？

令人沮丧的是如何必须有一个图像加载后端到 Chrome，但无法通过 NaCl 访问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:43:04.863

有 3 种方法可以做到这一点。

1.  您可以使用 nacl-mounts 库从服务器加载文件并将其存储在本地以在您的应用程序中使用它。
2.  您还可以[在 nacl sdk 中查看 GetUrl 示例，](https://chromium.googlesource.com/chromium/src.git/+/master/native_client_sdk/src/examples/api/url_loader/url_loader.cc)以从服务器加载文件并直接使用它。
3.  Pepper_21 中还有一个新示例，它加载纹理并将其设置为立方体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:32:54.793

如果您有 Javascript 文件，您还可以创建一个 blob url，然后按照所述使用 GetUrl 从 NaCL 加载它。

# objective-c - 创建一个 NSDictionary 的最佳方法，它始终具有相同的数据，并且在不同的时间需要

> ID：11597096
> 
> 赞同：0
> 
> 时间：2012-07-22T01:17:28.370
> 
> 标签：objective-c, ios, plist, nsdictionary

我的应用程序需要在不同时刻在某些单词的单数和复数版本之间进行转换。因此，我有一本字典，其中键是单数版本，值是复数版本。

我想知道在必要时重新初始化这本字典的最佳方法是什么。在我看来，我有两个选择：

1.  将此数据存储在 plist 中并从 plist 重新初始化字典
2.  为 NSDictionary 创建一个包装器对象，该对象仅具有单个 NSDictionary 属性，其值在`init`方法中设置。

我的猜测是#2 更快，但感觉不是很优雅。最终，子类化 NSDictionary 似乎是正确的方法，但是一旦我发现 NSDictionary 实际上是一个类集群，我就选择不这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T01:32:18.270

字典会很大吗？如果是这样，为什么不在您的应用程序激活时将其初始化为实例变量并且不释放它。另外，我对您的第二个选项和您的评论感到困惑。您在选项中提到您将为 NSDictionary 创建一个包装器对象，但随后您说您将对其进行子类化。我不确定您是否只是感到困惑或什么，但是您的第二个选项（通过创建具有 1 个 NSDictionary 的包装器对象并初始化 init 中的值）对我来说似乎也是可行的。最终，任何选项都应该没问题，只要它不会过多地影响您的应用程序的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T02:03:19.890

[您可以使用NSKeyedArchiver](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html)将其序列化/存储到磁盘并使用[NSKeyedUnarchiver](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSKeyedUnarchiver_Class/Reference/Reference.html)将其读回。

# memory - Monotouch内存泄漏

> ID：11597098
> 
> 赞同：1
> 
> 时间：2012-07-22T01:17:52.907
> 
> 标签：memory, xamarin.ios, memory-leaks

下面的代码变体曾经可以工作，但现在我得到了内存泄漏，如下面的屏幕截图所示。我将代码从不同的线程移动到 TimerElapsed 事件（参见屏幕截图中的堆栈跟踪），对 MD 3.0.3.4 和 MT 5.3.4 进行了各种代码更新和升级。不幸的是，我似乎无法弄清楚为什么它不再起作用了。恢复到从常规线程调用的以前版本的代码似乎也不起作用。这是当前版本的 MD 或 MT 中的错误吗？

如您所见，我正在使用 NSAutoReleasePool 并在最后强制进行垃圾收集，但它仍然不起作用！

**编辑：**我在下面添加了代码，通过 DrawCustomImage 从其声明中跟踪 unpackedImage，然后作为“imageToSet”参数进入 SetImages()，然后作为“overlay”参数进入 overlayImage()。SetImage 在主线程上调用其中的代码，因为当它最终调用 UpdateLiveScreen（带有生成的 overlayedImage）时，它实际上是在屏幕上绘制的。

```
 static UIImage unpackedImage = new UIImage();

    public static void DrawCustomImage(IntPtr buffer, int width, int height, int bytesPerRow, CGColorSpace colSpace, byte[] rawPixels, ref UIImage unpackedImage)
    {
        using (var pool = new NSAutoreleasePool())
        {
            GCHandle pinnedArray = GCHandle.Alloc(rawPixels, GCHandleType.Pinned);
            IntPtr pointer = pinnedArray.AddrOfPinnedObject();

            // Set a grayscale drawing context using the image buffer
            CGBitmapContext context = new CGBitmapContext(pointer, width, height, 8, bytesPerRow, colSpace, CGImageAlphaInfo.None);

            try
            {
                // Convert the drawing context to an image and set it as the unpacked image
                //using (var pool = new NSAutoreleasePool())
                {
                    using (var img = context.ToImage())
                    {
                        unpackedImage = UIImage.FromImage(img);
                    }
                }
            } finally
            {
                pinnedArray.Free();
                if (context != null)
                    context.Dispose();
            }
        }
        GC.Collect();
    }

    SetImages(labelText, symbolArray[0], unpackedImage, points);

    public static void SetImages(String labelText, UIImage symbol, UIImage imageToSet, PointF[] points)
    {
        appReference.InvokeOnMainThread(delegate
        {
            int imageWidth = 716;
            int imageHeight = (int)imageToSet.Size.Height;
                            int nextFreeMainImageColumn = 5; // This gets set dynamically, but is simplified here for readability 

            lock (displayLocker)
            {
                // Get the current doppler image
                UIImage mainImage = GetMainImage();

                // Add the new imageToSet to the current image by overlaying it adjacent to the current image
                UIImage overlayedImage = overlayImage(mainImage, imageToSet,
                                     new RectangleF(0, 0, imageWidth, imageHeight),
                                     new RectangleF(nextFreeMainImageColumn, 0, imageToSet.Size.Width, imageHeight));

                // Update the live screen with the updated image and frame number
                LiveCont.UpdateLiveScreen(labelText, symbol, overlayedImage, points);
            }
        });
    }

    public static UIImage overlayImage(UIImage image, UIImage overlay, RectangleF imageBoundingBox, RectangleF overlayBoundingBox)
    {
        int numBytes = 4;   // Four bytes per pixel for a color image (Alpha, Red, Green, Blue)
        int bytesPerRow = (int)imageBoundingBox.Width * numBytes;

        // Set a color drawing context
        CGBitmapContext context = new CGBitmapContext(
            IntPtr.Zero,
            (int)imageBoundingBox.Width,
            (int)imageBoundingBox.Height,
            8,
            bytesPerRow,
            CGColorSpace.CreateDeviceRGB(),
            CGImageAlphaInfo.NoneSkipFirst
        );

        UIImage overlayedImage = null;
        try
        {
            context.DrawImage(imageBoundingBox, image.CGImage);             // Draw the main image
            context.DrawImage(overlayBoundingBox, overlay.CGImage);         // Draw the overlay

            using (var img = context.ToImage())
            {
                overlayedImage = UIImage.FromImage(img);                    // Convert the context back to an image
            }
        }
        finally
        {
            if (context != null)
                context.Dispose();
            image.Dispose();
        }

        return overlayedImage;
    } 
```

![在此处输入图像描述](../Images/07c18ffb575b703ae7676d44492bf3fe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:18:09.967

Thanks for filling a [bug report](https://bugzilla.xamarin.com/show_bug.cgi?id=6227).

The native call to `CGBitmapContextCreateImage` (from the Instruments' stack trace) is being done when your call `ToImage` (see [source](https://github.com/mono/maccore/blob/master/src/CoreGraphics/CGBitmapContext.cs)). That code has not changed between 5.2.12 and 5.3 so it's likely not the culprit.

The *managed* `GCImage` does not take an extra reference to the handle (`true` is used in the .ctor) (see [source](https://github.com/mono/maccore/blob/master/src/CoreGraphics/CGImage.cs), no recent change either).

So this takes us to the `unpackedImage` `UIImage` that you return from your method. There's a change (in 5.3.x) where an *automatic* `NSAutoreleasePool` is used around this call.

Otherwise it ends up in where/how you deal with the returned `unpackedImage` (and on which thread, e.g. CoreGraphics is thread-safe while UIKit *mostly* is not).

Could you add the code (here or privately on the bug report) showing this ? I don't believe the issue is with your code (since it works on 5.2.x) but it would make tracking this a lot easier.

Note that calling `GC.Collect` is not helpful (and it's rarely is) since the instances you're using all implement `IDisposable` (which *generally* immediately dispose of the resources and remove the finalization step) and you dispose them manually or with `using`.

# ios - 唯一标识 iOS 用户

> ID：11597100
> 
> 赞同：40
> 
> 时间：2012-07-22T01:18:01.473
> 
> 标签：ios, authentication

我想在服务器上为应用程序的新用户创建一个用户帐户，但我也不想要求用户输入任何内容。理想情况下，我希望这是自动的，就像 Game Center 一样。

但我想知道这是否可能。有什么可以用来唯一标识用户的吗？我很难找到用户的 Apple ID。此外，设备 ID 唯一标识设备，而不是用户，因此如果用户拥有更多设备，它将无用......

还有什么我可以使用的吗？

关于隐私——我不想在用户背后找出任何东西。我要求用户访问他们的信息绝对没有问题（如果有一个 API 可以授予我这些信息，那么如果 API 自己提出这个问题，那就太好了）。正如史蒂夫乔布斯本人所说，这就是隐私的全部意义——强制应用在对他们的私人数据做任何事情之前征求用户的许可。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-12-27T19:39:05.363

正确的解决方案是使用[iCloud Key-Value Store](https://developer.apple.com/library/mac/documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesigningForKey-ValueDataIniCloud.html)，您可以在其中存储唯一的用户 ID，而无需任何类型的身份验证或用户信息，例如电子邮件地址。

**最终结果是一个随机的 UUID（实际上并没有识别用户），每个用户都不同，但会在注册到同一个 iCloud 帐户的多个设备上持续存在。**

我们在 iCloud KV Store 中定义了一个字段，我们称之为 userID。当应用程序启动时，我们首先检查用户 ID。如果它在那里，那么我们都设置了我们用户的唯一 ID。如果不是，那么这是我们第一次为这个用户运行。我们生成一个随机的 UUID 并将其存储在 userID 下的 KV Store 中。这里的所有都是它的。

我们的经验表明，此 UUID 对于每个 iTunes 帐户都是唯一的。如果您的最终用户正在使用家庭共享，则这些帐户将被分配不同的 UUID（这可能是可取的，也可能不是可取的，但您无能为力）。在同一 iTunes 帐户下启动的任意数量的设备都将看到相同的 UUID。

这种方法是完全合法的，应该得到 Apple 的批准，没有任何问题。

**显然你必须在 Xcode 的 Capabilities 下启用 iCloud Key-Value store，只需打开 iCloud Switch 即可。**

这是一个在 Objective-C 中实现这个概念的简单类：

```
@implementation EEUserID

+ (NSUUID *) getUUID
{
    NSUUID *uuid = nil;
    NSString *uuidString = [[NSUbiquitousKeyValueStore defaultStore] stringForKey: @"EEUserID"];
    if (uuidString == nil)
    {
        // This is our first launch for this iTunes account, so we generate random UUID and store it in iCloud:
        uuid = [NSUUID UUID];
        [[NSUbiquitousKeyValueStore defaultStore] setString: uuid.UUIDString forKey: @"EEUserID"];
        [[NSUbiquitousKeyValueStore defaultStore] synchronize];
    }
    else
    {
        uuid = [[NSUUID alloc] initWithUUIDString: uuidString];
    }

    return uuid;
}

+ (NSString *) getUUIDString
{
    NSUUID *uuid = [self getUUID];
    if (uuid != nil)
        return uuid.UUIDString;
    else
        return nil;
}

+ (void) load
{
    // get changes that might have happened while this
    // instance of your app wasn't running
    [[NSUbiquitousKeyValueStore defaultStore] synchronize];
}

@end 
```

对于头文件：

```
#import <Foundation/Foundation.h>

@interface EEUserID : NSObject

+ (NSUUID *) getUUID;
+ (NSString *) getUUIDString;

@end 
```

要使用，您所要做的就是调用：

```
NSString *uniqueIDForiTunesAccount = [EEUserID getUUIDString]; 
```

享受。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-22T02:08:19.383

用这个生成一个 UUID：

```
NSString *UUID() {
    CFUUIDRef cfuuid = CFUUIDCreate(NULL); 
    NSString *uuid =  (__bridge_transfer NSString *)CFUUIDCreateString(NULL, cfuuid); 
    CFRelease(cfuuid);
    return uuid;
} 
```

Apple 不赞成或不赞成这里的任何内容 - 事实上，这是他们建议您这样做的方式。将生成的 UUID 存储在钥匙串中，即使用户卸载并重新安装您的应用程序，它也会存在。UUID 对于设备及其生成时间是唯一的。

然后，您可以使用各种方案让用户将他们的设备组合在一起——iCloud，或者您从服务器提供的某种密钥。

祝你好运！

**添加：**

这是我将它存储在钥匙串中的方法，使用 uuid 作为用户名并生成随机密码：

```
uuid = UUID();
[keychainItemWrapper setObject:uuid forKey:(__bridge_transfer id)kSecAttrAccount];
NSString *pass_token = randomString(10);
[keychainItemWrapper setObject:pass_token forKey:(__bridge_transfer id)kSecValueData]; 
```

请注意，所有这些都可以在没有用户输入的情况下完成。

**更新：**

[MCSMKeychainItem](https://github.com/ObjColumnist/MCSMKeychainItem)为 UUID 生成和存储提供了一个很好的解决方案`[MCSMApplicationUUIDKeychainItem applicationUUID]`。图书馆也有`[MCSMGenericKeychainItem genericKeychainItemWithService:service username:username password:password]`。这些功能一起处理上述所有内容。[使用CocoaPods](http://cocoapods.org/)也很容易安装。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T20:26:23.147

拉杜

很好的问题。我们通过将 Urban Airship (urbanairship.com) 集成到我们的应用程序中解决了您描述的问题。Urban Airship 提供了一系列功能来支持应用内购买、收据验证、订阅恢复、内容交付和 Apple 推送通知。

Urban Airship 的一大优点是它能够通过电子邮件地址识别“用户”，而不是设备，而是“用户”。它并不是真正的广告“功能”......更多的是其预期功能的副产品。

以下是我们的发现以及我们如何利用 Urban Airship 来解决您遇到的问题。

当用户安装集成了 Urban Airship 的应用程序时，UA 会以某种方式生成一个类似 UDID 的编号，该编号目前仅用于识别设备。

但是，如果您利用 Urban Airship 的订阅恢复组件，您可以让用户输入电子邮件地址。一旦用户在第一台设备上输入他们的电子邮件地址……生成的 ID 就成为他们识别用户的主要方法，并与该电子邮件地址相关联。当他们在后续设备上输入电子邮件地址时，Urban Airship 将触发电子邮件验证过程。用户完成验证过程后，它会将新设备上的 ID 更新为与第一台设备的 ID 相同，依此类推。它最好的部分是......这都是自动魔法！您只需集成组件并让用户输入他们的电子邮件地址。您应该能够在一个小时内完成所有工作。

它还提供允许用户更改与其所有设备关联的电子邮件地址的功能。

我们实际上已经实施并且效果很好！

注意：截至 2013 年 7 月 1 日，Urban Airship 将弃用订阅和恢复功能

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T12:02:26.283

像 Erik 建议的那样生成 UUID 绝对是一个可靠的解决方案。唯一的（小）警告可能是，在完全 iDevice 恢复的情况下，钥匙串也将被擦除。在这种情况下，应用程序将生成一个新的 UUID，并且 iDevice 不能再与现有用户相关联。

另一种唯一标识 iDevice 的方法是根据网络接口的 MAC 地址生成唯一 id，并将其与 app bundle id 结合。这种方法会产生一个特定于应用程序且持久的唯一 id。当 iDevice 被擦除、恢复或应用程序被删除并重新安装时，它不会改变。因此，无需将此 id 存储在钥匙串中。

幸运的是，已经有人创建了一个小库来实现这一点。代码可以在 GitHub 上找到：

[https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5](https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-09T13:51:36.887

**斯威夫特3/4+**

使用 iCloud 记录 ID (CKRecordID)。此 ID 对于 iTunes 帐户将是唯一的。

```
let container = CKContainer.default()
container.fetchUserRecordID() {
    recordID, error in

    if let err = error {
        print(err.localizedDescription)
    }
    else if recID = recordID {
        print("fetched ID \(recID.recordName ?? "NA")")
    }
} 
```

> 对于自动创建的记录，ID 名称字符串基于 UUID，因此保证是唯一的。

请注意，如果设备没有 iCloud 帐户，或者有访问受限的 iCloud 帐户，这*将返回 CKError.Code.notAuthenticated*错误

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T20:30:40.503

[Erik 建议的替代方案是名为OpenUDID](https://github.com/ylechelle/OpenUDID/)的第三方库。您可以为每个设备生成一个唯一标识符，这非常简单：

```
#include "OpenUDID.h"
NSString* openUDID = [OpenUDID value]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-01T10:37:06.177

It is not an absolute sure solution (and only works when iCloud enabled), but it is very easy to implement: Generate a unique ID once (like UUID) and store it in iCloud key-value-storage.

The only problem is that advanced users know how to delete content from the iCloud.

To prevent the user just editing the unique ID stored in iCloud to someone else ID you can add some kind of secret to.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-01T10:32:09.790

You can use third party solutions like [SECUREUDID](http://www.secureudid.org/) also check out [this](http://blog.appsfire.com/appsfire-introduces-the-open-source-openudid-initiative/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-25T21:37:20.880

今天我们的APP被拒绝了，因为Game Center用户识别。它在 App Store 指南中：[https](https://developer.apple.com/appstore/resources/approval/guidelines.html) ://developer.apple.com/appstore/resources/approval/guidelines.html 。

您不能使用 G: 格式的唯一游戏中心 ID。

我们现在唯一的方法是使用 iOS6 Facebook 集成。

更新：我们带有自动 FB 登录功能的新版本通过了审核流程，可在 App Store (Slovni Duel) 上找到。还使用链接到 FB 个人资料的 inApp 订阅。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-01T03:36:01.870

游戏中心和iCloud一起使用如何识别用户？

用户不太可能不玩游戏并且不同步他们的数据。

# scala - 如何在 Play 中强制 Logger.debug 输出！框架规范2测试？

> ID：11597102
> 
> 赞同：28
> 
> 时间：2012-07-22T01:18:09.513
> 
> 标签：scala, playframework, playframework-2.0, specs2

默认情况下`Logger`，在应用程序运行时可见的所有输出在测试应用程序时都是静音的。

如何强制调试、信息等显示在`specs2`报告中？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-24T16:09:29.827

首先，您可能喜欢一些背景，为什么在测试模式下禁用日志记录。这是 Guillame Bort 在游戏论坛中对问题的回答（请参阅[此线程](https://groups.google.com/forum/?fromgroups#!searchin/play-framework/test%2420log/play-framework/ydU081RerA8/LWDDUj6rJDwJ)）：

> 记录器暂时在测试模式下被禁用，因为它在运行测试时导致巨大的 PermGen 空间泄漏。但我们正在努力在分叉的 JVM 中运行测试，因此我们将很快再次启用它。

作为一种解决方法，我创建了自己的记录器，如下所示（Scala 代码）：

```
import play.api.{Play, LoggerLike, Logger}
import org.slf4j.LoggerFactory
import org.slf4j.impl.SimpleLoggerFactory

object MyLogger extends LoggerLike {

  val factory = if (Play.isTest(Play.current)) {
    new SimpleLoggerFactory()
  } else {
    LoggerFactory.getILoggerFactory
  }

  val redirectDebugToInfo = factory.isInstanceOf[SimpleLoggerFactory]

  val logger = factory.getLogger("application")

  def apply(name: String): Logger = new Logger(factory.getLogger(name))

  def apply[T](clazz: Class[T]): Logger = new Logger(factory.getLogger(clazz.getCanonicalName))

  // this method is to make debug statements to show up in test mode
  override def debug(m: => String) = {
    if (redirectDebugToInfo) {
      info(m)
    } else {
      super.debug(m)
    }
  }
} 
```

我不知道这段代码在 PermGen 泄漏方面的表现如何，但到目前为止我还没有遇到这个问题。要使其工作，您需要添加此依赖项：

```
"org.slf4j" % "slf4j-simple" % "1.6.4" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-31T19:11:23.427

如果你使用 FakeApplication，你可以传递一些配置信息：

```
 FakeApplication(additionalConfiguration = Map(
    "logger.application" -> "DEBUG"
  )) 
```

这将 LOGGER 输出限制为调试和更高的输出。

我惊讶地发现设置是“粘性的”。如果早期测试使用 FakeApplication，则不使用 FakeApplication 的后续测试仍将使用相同的日志记录级别。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-01T21:46:27.960

我在 conf 下创建了一个 logger.xml 文件，如下所示：

```
<configuration>
    <conversionRule conversionWord="coloredLevel" converterClass="play.api.Logger$ColoredLevel" />

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder><pattern>%coloredLevel %logger{15} - %message%n%xException{5}</pattern></encoder>
    </appender>

    <logger name="play" level="ERROR" />
    <logger name="application" level="INFO" />

    <root level="ERROR">
        <appender-ref ref="STDOUT" />
    </root>
</configuration> 
```

然后我使用以下命令启动我的游戏环境：

> 播放 -Dlogger.file=conf/logger.xml

瞧！在测试中记录数据。它确实会导致内存泄漏，但在开发过程中是无价的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-24T09:08:48.103

如果您使用 sbt 运行测试（默认情况下 play），您可以在 Test 任务中设置 javaOptions 来控制所使用的日志记录配置。

例如，在 project/Build.scala 中：

```
javaOptions in Test      += "-Dlogger.file=conf/test-logger.xml" 
```

更多关于 test-logger.xml 文件的语法在这里：

[http://logback.qos.ch/manual/configuration.html](http://logback.qos.ch/manual/configuration.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-31T14:01:50.020

如果您查看 Play [Logger source](https://github.com/playframework/Play20/blob/2.0.x/framework/src/play/src/main/scala/play/api/Logger.scala#L244)，您将看到在测试模式下禁用了日志记录。

如果你真的想要记录，你可以创建用于测试的记录配置文件并将其作为系统属性“logger.file”传递给 Play。

示例日志记录配置（项目根目录中的 test-logger.xml 文件）：

```
<configuration>
  <conversionRule conversionWord="coloredLevel" converterClass="play.api.Logger$ColoredLevel" />
  <logger name="application" level="INFO">
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
      <encoder>
        <pattern>%coloredLevel %logger{15} - %message%n%xException{5}</pattern>
      </encoder>
    </appender>
  </logger>
</configuration> 
```

运行测试：

```
JAVA_OPTS="-Dlogger.file=test-logger.xml" play test 
```

# python - 修改 setup.py 以支持从 github 安装 pip

> ID：11597103
> 
> 赞同：4
> 
> 时间：2012-07-22T01:18:29.100
> 
> 标签：python, pip, setuptools, distutils

我想修改[Ansible项目中的](http://ansible.github.com)[setup.py](https://github.com/ansible/ansible/blob/devel/setup.py)脚本，以便可以将 ansible 安装到 virtualenv 中，如下所示：

```
pip install -e git://github.com/lorin/ansible.git#egg=ansible 
```

当我现在这样做时，ansible 无法正常运行，因为它无法导入 ansible 模块。

```
$ ansible
Traceback (most recent call last):
  File "/Users/lorin/.virtualenvs/ansible/bin/ansible", line 7, in <module>
    execfile(__file__)
  File "/Users/lorin/.virtualenvs/ansible/src/ansible/bin/ansible", line 25, in     <module>
    from ansible.runner import Runner
ImportError: No module named ansible.runner 
```

据我所知，这些文件中的一个或两个都告诉 Python 在哪里可以找到 Ansible 模块。

`$venv/lib/python2.7/sites-packages/ansible.egg-link`：

```
/Users/lorin/.virtualenvs/ansible/src/ansible
. 
```

`$venv/lib/python2.7/sites-packages/easy-install.pth`：

```
import sys; sys.__plen = len(sys.path)
./setuptools-0.6c11-py2.7.egg
./pip-1.0.2-py2.7.egg
/Users/lorin/.virtualenvs/ansible/src/ansible
import sys; new=sys.path[sys.__plen:]; del sys.path[sys.__plen:]; p=getattr(sys,'__egginsert',0); sys.path[p:p]=new; sys.__egginsert = p+len(new) 
```

在这两种情况下，它都指向`/Users/lorin/.virtualenvs/ansible/src/ansible`，但我认为它实际上应该指向`/Users/lorin/.virtualenvs/ansible/src/ansible/lib`，因为 ansible 模块是该目录的子集。

（注意：我不能只将 ansible/lib/ansible 目录移动到 ansible/ansible，因为上游项目不太可能接受该更改）。

我尝试手动修改这些文件，看看是否能解决问题，但这揭示了一个新问题：

```
$ ansible
Traceback (most recent call last):
  File "/Users/lorin/.virtualenvs/ansible/bin/ansible", line 4, in <module>
    from pkg_resources import require; require('ansible==0.6')
  File "build/bdist.linux-i686/egg/pkg_resources.py", line 2603, in <module>
  File "build/bdist.linux-i686/egg/pkg_resources.py", line 666, in require
  File "build/bdist.linux-i686/egg/pkg_resources.py", line 565, in resolve
pkg_resources.DistributionNotFound: ansible==0.6 
```

而且，“pip freeze”根本不报告该软件包已安装：

```
$ pip freeze
Jinja2==2.6
PyYAML==3.10
paramiko==1.7.7.2
pycrypto==2.6
wsgiref==0.1.2 
```

即使解决了这些问题，我也需要以某种方式将`ANSIBLE_LIBRARY`环境变量设置为指向`$venv/src/ansible/library`virtualenv 的激活时间。

所以，总而言之，我需要做什么：

*   获取各种 Python 路径以指向正确的目录？
*   处理版本错误？
*   设置`ANSIBLE_LIBRARY`环境变量？

我也不想为其他用例更改 setup.py 脚本的行为。我对任何各种 Python 构建工具都没有任何经验，所以我很茫然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T01:32:00.260

可编辑安装（`-e`标志）的问题在于它要求项目具有如下结构：

```
├── projectname
│   ├── projectname
│   │   ├── __init__.py
│   │   └── anotherfile.py
│   └── setup.py 
```

注意那个`projectname`子目录。在`Ansible`的情况下，它没有这种结构。所以它不能使用可编辑安装。

只需删除该`-e`标志，它可能会起作用：

```
pip install -e git://github.com/lorin/ansible.git#egg=ansible 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T04:25:20.767

看：

*   [http://docs.ansible.com/intro_installation.html#running-from-source](http://docs.ansible.com/intro_installation.html#running-from-source)
*   [https://github.com/ansible/ansible/pull/8367](https://github.com/ansible/ansible/pull/8367) - 如果它被合并，那么`pip install -e`将起作用。

# visual-studio-2010 - 一个用于工作和个人使用的 VS 许可证？

> ID：11597104
> 
> 赞同：2
> 
> 时间：2012-07-22T01:18:41.900
> 
> 标签：visual-studio-2010, licensing

根据这个问题（[我可以在具有一个许可证的两台机器上安装 VS 吗？](https://stackoverflow.com/questions/3220295/can-i-install-vs-on-two-machines-with-one-license)）作为一个人，我可以在任意数量的计算机上使用 VS，即使在工作和家里也是如此。我的问题是，我可以使用一个许可证在工作中编写供公司内部使用的软件，*并*在家里编写我自己销售的独立软件吗？（我的公司支付了许可证而不是我）。

我的猜测是否定的，但我找不到任何支持或反驳的东西。

（免责声明：我明白回复不是官方的法律建议）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T01:25:30.347

我就说这个吧。VS 允许对单个许可证进行多次安装。但是，安装只允许由单个用户使用。推断，我会说，如果您的企业有 5 个许可证，并且他们允许您使用一个，那么您可以根据许可证在家中安装它。更重要的是，我会询问贵公司他们的政策是否允许这样做。

VS 许可证允许单个用户进行多次安装。另一方面，您的公司可能不喜欢您兼职使用他们的软件的想法。=)

[http://www.microsoft.com/en-us/download/details.aspx?id=13350](http://www.microsoft.com/en-us/download/details.aspx?id=13350)

第 8 页指出 Visual Studio 是一种“个人开发工具”，并按用户许可。

# mysql - 具有多个引用的mysql外键

> ID：11597110
> 
> 赞同：2
> 
> 时间：2012-07-22T01:20:33.243
> 
> 标签：mysql, foreign-keys, rdbms

我正在使用 mysql，并且正在为我正在制作的网站处理架构。我有点卡住了，因为我有用户、社区（用户组）、活动（由一个或多个用户或社区参与的用户或社区制定的计划）和 rsvps（包含用户/社区的日期回复了一项活动）。我为用户、社区和活动创建了一个表，但我被困在 rsvps 上：

我遇到的问题是，理想情况下我会为 rsvps 表​​提供类似的东西：

```
用户/COM ID ACT_ID DATE 去吗？
U 2342 1 2012 年 7 月 1 日是的
U 1342 1 2012 年 7 月 2 日假
U 2842 1 7/1/12 真
C 5342 1 2012 年 7 月 1 日假

```

ID 是用户表或社区表的外键约束，具体取决于 USER/COM 属性的值。现在我很确定这样做是不可能的，所以我只是想知道你会怎么做。

最后一点：除了 rsvp 表之外，我还有其他几个需要能够同时使用用户或社区的表，所以我希望 rsvp 表的想法尽可能简单。

如果您需要更多信息，请告诉我，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T01:50:58.100

我会制作另一个连接用户和社区的表格。

```
ID    USER_OR_COMMUNITY_ID     IS_USER
1     32933                    true
2     2398                     false
3     23278                    false
4     923                      false 
```

这可能很有用，因为用户和社区可能拥有相似类型的信息。例如，用户有一个名字（用户名），社区也有。他们也可能有一个注册日期、头像等。所以你可以有一个表，例如这些列：id、user_or_community_id、is_user、name、date_registred。然后，特定于用户的所有数据都将存储在用户表中，对于社区也是如此。

但我不确定，这是个好问题。这可能会有点复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T02:14:04.850

因为我更喜欢外键，所以我会使用这样的东西

```
RSVP_ID   USER_ID    COM_ID   ACT_ID     DATE     Goin?
1         2342       NULL     1          7/1/12   true
2         1342       NULL     1          7/2/12   false
3         2842       NULL     1          7/1/12   true
4         NULL       5342     1          7/1/12   false 
```

RSVP_ID 只是一些自动递增的主键。您可以在 user_id+act_id 和 com_id+act_id 上放置 2 个唯一键。

这样，您可以让您的外键正常工作。此外，我总是有一个内容不同的专栏......

# json - 如何使用 REST 将用户信息传递给 Web 服务

> ID：11597112
> 
> 赞同：1
> 
> 时间：2012-07-22T01:20:53.933
> 
> 标签：json, web-services, rest

我有这个方法...

```
public override void RegisterArea(AreaRegistrationContext context) {
    context.MapRoute("AccesoCliente", "Api/Clientes/Cliente/{id}", new {
        controller = "Clien`enter code here`tes",
        action = "Cliente",
        id = UrlParameter.Optional
    }
); 
```

...它允许我给一个 url 传递一个 id 并执行某些方法。但我想传递名称和密码来创建登录名。我现在不知道如何制作这部分

```
"Api/Clientes/Cliente/{id}", 
```

要拥有名称和密码，或者我应该构造这个 mapRoute，也不知道我应该用什么标签搜索它。如果您能提供帮助，提供直接回复或任何有关此主题的教程链接，我将不胜感激。

# json - 在 Rails 中使用 CoffeScript 使用 json 检索数据

> ID：11597114
> 
> 赞同：2
> 
> 时间：2012-07-22T01:21:50.670
> 
> 标签：json, jquery, coffeescript, ruby-on-rails-3.2

我是新开发的 Rails 应用程序和 Coffescript

我有这个 CoffeScript 代码来使用带有 get 方法和 json 的 ajax 获取一些数据：

```
jQuery ->
  $("#detalleliquidacion_nit").change ->
    campo1 = document.getElementById("detalleliquidacion_nit")
    document.getElementById("detalleliquidacion_proveedor_id").value = ""
    document.getElementById("detalleliquidacion_nombreproveedor").value = ""
    jQuery.getJSON "/proveedores/obtenerdatos/" + campo1.value, (data) ->
      $("#detalleliquidacion_nombreproveedor").val data[0].nombreproveedor 
      $("#detalleliquidacion_proveedor_id").val data[0].id

    false 
```

我想知道ajax是否为空。

我尝试在“假”句子之后添加此代码：

```
campo2 = document.getElementById("detalleliquidacion_proveedor_id").value
alert campo2  if campo2 is "" 
```

但总是返回true，因为表单中的输入字段，而这一点，仍然是空的。

我的环境是：rails 3.2.6；红宝石 1.9.3p194

我怎么知道ajax返回是否为空？

一些建议将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:09:52.783

我不确定我是否正确理解了您的问题，但您似乎想知道返回的 JSON 值是否为 false 或想查看其中的内容。

尝试这样的事情

```
jQuery ->
    jQuery("#detalleliquidacion_nit").change ->
        jQuery('#detalleliquidacion_proveedor_id').val('')
        jQuery('#detalleliquidacion_nombreproveedor').val('')

        jQuery.ajax
            url: "/proveedores/obtenerdatos/" + jQuery('#detalleliquidacion_nit').val()
            success: (data) ->
                if data.length == 0
                    alert 'empty reply from server!'
                try
                    obj = jQuery.parseJSON data
                    console.log obj #useful if you are in chrome, safari, or have firebug
                    if obj[0]?
                        jQuery("#detalleliquidacion_nombreproveedor").val( obj[0].nombreproveedor ) if obj[0].nombreproveedor?
                        jQuery('#detalleliquidacion_proveedor_id').val( obj[0].id ) if obj[0].id?
                catch err
                    alert 'Error parsing: ' + data

        false 
```

using`jQuery.ajax`允许您比便捷方法更精细地控制返回的数据`jQuery.getJSON`

`console.log`将输出到[开发控制台](https://developers.google.com/chrome-developer-tools/docs/console)并可以帮助您调试。您还可以使用 Chrome 和 Safari 中更高级的 javascript 调试功能来设置断点并在运行时查看变量的值

# objective-c - Storyboard 对象库中的“对象”可以做什么？

> ID：11597118
> 
> 赞同：12
> 
> 时间：2012-07-22T01:23:17.270
> 
> 标签：objective-c, xcode4.2, storyboard, nsobject

**简短的问题**

XCode 的界面构建器的对象库中有一个东西叫`Object`。我想知道使用这个“对象”可以完成什么样的任务。

具体来说，它是`NSObject`Storyboard（或 xib）中的一个。它的描述如下：

> 为 Interface Builder 中不直接可用的对象提供模板。您可以使用自定义类检查器将此对象转换为任何类的实例。

**长问题**

我正在尝试构建一个`UITableViewController`和一个`UISearchController`。由于他们都需要在他们的委托中实现`UITableViewDelegate`and `UITableViewDatasource`，我希望我可以将委托分配给`UISearchController`Main 以外的 Object `UITableViewController`。

我正在寻找一种在 Storyboard 中实现此目的的方法，而不是在`viewDidLoad`. 特别是，通过弄清楚`Object`Storyboard 中的工作方式。

我知道我可以通过检查 UITableView 的父母来区分它们。但是将逻辑分成不同的对象总是好的。它将更容易实现，效率更高，结构更好，并且可以重用。

提前致谢。

**我试过的**

*   将 a 放在Storyboard`Object`中的同一级别`UITableViewController`（您不能将a 放在`Object`另一个中`UIViewController`）。
    将其`@property (nonatomic, weak) IBOutlet NSObject *`与`UITableViewController`.
    当我打印它时，它`NSObject *`原来是一个`nil`指针`viewDidLoad`。没运气。
*   通过将属性更改为`@property (nonatomic, strong)`，它变为 a`UICustomObject`而不是`nil`。看来我在正确的轨道上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T03:32:31.237

正如您所注意到的，Object 使它成为任何类的对象，包括您自己的自定义类，在加载 XIB/Storyboard 时被实例化。您获得 UICustomObject 的事实表明 XIB/Storyboard 加载机制要么不知道对象应该是什么类，要么找不到您指定的类（通过运行时查找）。

解决方案是确保在自定义类检查器中为 Object 指定正确的类：

![在此处输入图像描述](../Images/5c6a9bc2f3443e4f2073f8822b1f3ab6.png)

然后当然你还需要确保相关类的实现文件在你的项目中并且包含在你的目标中。

最后，使用`strong`指向您的自定义对象的 IBOutlet 是正确的，因为它是顶级对象，并且应该使用`strong`属性来引用顶级对象。（如果你真的很好奇，Mike Ash 有一篇关于 XIB/Storyboard 出口内存管理细节的好[文章](http://www.mikeash.com/pyblog/friday-qa-2012-04-13-nib-memory-management.html)，包括 OS X 和 iOS 在这方面的区别。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-13T18:40:05.750

这个问题已被标记为已回答，但由于它是一个可以有多个答案的开放式问题，因此有一种聪明的技术可以按照您的说法进行操作 - 将功能分解为作者称为“行为”的单个角色类：

[http://www.objc.io/issue-13/behaviors.html](http://www.objc.io/issue-13/behaviors.html)

它的要点是您可以编写一个对象，例如通过将插座暴露给多个视图来执行视差效果。它被设置为滚动视图委托，并根据可配置的设置更新其他视图。正如您所指出的，您不能将参数传递给构造函数，但您仍然可以通过@Andrew 的答案中的图像中所示的关键路径机制指定参数。

正如您还指出的那样，您可能会遇到希望让不同对象响应滚动事件等的问题。作者通过编写一个简单的多路复用器来解决这个问题。您还可以使用责任链模式解决此问题：[http](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern) ://en.wikipedia.org/wiki/Chain-of-responsibility_pattern 。

最后，@Andrew 在他的回答中提到了将对象存储为强属性的重要性。他们是上述文章的作者——让我们称他为“Krzysztof”，提供了一种使用 obj-c 关联对象机制的解决方案，以允许无需代码即可进行配置。你的里程可能会非常好，现在使用 Swift 可能会有更好的选择，但至少，它是一些值得思考的好东西。

# cakephp - 如何使用前缀路由检查该路由上的所有连接是否具有特定值，并在失败时返回简单的纯文本？

> ID：11597119
> 
> 赞同：0
> 
> 时间：2012-07-22T01:23:16.707
> 
> 标签：cakephp, url-routing, cakephp-2.1

我有一个不寻常的情况，我需要一个特殊的路由前缀来处理与正常情况截然不同的身份验证。基本上，这个路由前缀上的任何请求都在“isAuthorized”（在应用程序控制器上）中被赋予了权限，并且布局被设置为这个连接的特殊布局。到目前为止，以下工作正常：

```
if(isset($this->params['special']) && $this->params['special'])
{
    $this->layout = 'special';
    return true;        
} 
```

除此之外还需要发生的是，每次发出请求时，都会根据数据库检查密钥/令牌组合是否有有效条目。如果输入无效，我需要使用特殊布局仅输出“无效键/令牌组合”。如果输入有效，它将照常进行。

在哪里进行此检查的合适位置，以便检查该路由前缀上的所有连接，以及如何在失败时仅发送该文本？有没有办法更改路由，以便在身份验证失败时使用不同的控制器和视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:59:57.160

啊，现在我想我明白了。

您想在每个操作之前运行检查，以查看传递的令牌/密钥参数是否有效。

这将在您的控制器中的 beforefilter 函数中完成。

```
public function beforeFilter()
{
    if(!isset($this->params['special']))
    {
        $this->render('fail_view');
        exit;
    }    
} 
```

在这里，您可以检查正在传递的参数，如果它们未通过验证，那么您可以使用您想要的任何文本呈现自定义视图，然后退出脚本的其余部分。

# javascript - jQuery 前置和淡入内容不起作用

> ID：11597121
> 
> 赞同：1
> 
> 时间：2012-07-22T01:24:23.577
> 
> 标签：javascript, jquery

所以我有一个 ajax 表单提交系统，我想在给出成功状态响应时将提交的表单直接添加到 HTML 中。现在我有，

```
$(".post-submit").click(function(){
    var postcontent = $(".post-form").val();

    if (postcontent == ""){
        return false;
    }

    $(".post-form").attr("disabled", "disabled");

    $.ajax({
        url: "/post",
        type: "POST",
        dataType: "json",                    
        data: {"post-form":postcontent},
        success: function(response, textStatus, jqXHR) {
            var htmlpost = '<div class="post"> <b>${name}</b> </div> \n <p>' + postcontent + '</p> \n';
            $(htmlpost).hide().prependTo(".posts-content").fadeIn("slow");
         },
         error: function(jqXHR, textStatus, errorThrown){
            alert("Unexpected internal server error. Please try again later.");
         }
    });
}); 
```

但是，当我提交表单并从服务器返回状态 200 时，它什么也不做，并且表单仍然处于禁用状态。

# hibernate - Hibernate/JPA：em.merge(new MyEntity(id)) 返回没有集合的代理

> ID：11597124
> 
> 赞同：3
> 
> 时间：2012-07-22T01:26:37.450
> 
> 标签：hibernate, jpa, merge

休眠 EntityManager 3.4.0 或 3.6.10

```
MyEntity {
    @Id   // NOT @GeneratedValue
    long cislo;

    @OneToMany( ... )
    List<MyItem> items = new ArrayList();

    public MyEntity( long cislo ) { this.cislo = cislo; }
    ...
} 
```

然后，在 DAO 中：

```
MyEntity ent = new MyEntity( id );
ent.addItem( new Item( ... ) );
ent.addItem( new Item( ... ) );
ent = em.merge( ent ); 
```

1）为什么我需要使用`merge()`，而不是`persist()`抱怨实体分离？是手动设置ID的原因吗？

2）为什么这个合并返回一个没有集合集的代理？

3）*最重要的是：*我怎样才能得到完全初始化的实体`merge()`？
除了`EAGER`在成员集合上设置。
我可以使用原始对象，但我很好奇它是否可能。我也可以查询实体，但这似乎是在浪费资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:42:57.603

1.) 你为什么在这里使用“Session.merge()”？合并通常用于将分离的实体实例重新附加到 Hibernate/JPA 会话 - 这通常发生在您在会话之外重用实体实例（例如，在视图层中）并且您希望将对这些实例的任何更改传播到使用 Session 的数据库。

2.) Hibernate 文档说“如果给定实例未保存，请保存它的副本并将其作为新的持久实例返回。” 在您的情况下，由于您尝试“合并”一个全新的实例，Hibernate 将首先将其保存到数据库中，然后将其作为新的实体实例重新获取。返回代理的原因是因为 Hibernate 默认延迟加载任何 Collection。为了确保集合的getter 方法返回实际集合。Hibernate 创建一个代理。

3.) 我很好奇你为什么不在这里使用 Session.save() 。

# app-store - 当应用在应用商店的某个国家/地区停售时，评论会怎样？

> ID：11597125
> 
> 赞同：-1
> 
> 时间：2012-07-22T01:26:39.153
> 
> 标签：app-store

我需要暂时关闭我的国家/地区的申请。但是我很好奇我对我的申请的所有评论会发生什么？当我再次开放出售时，这些会被删除吗？

最好的问候，凯末尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T02:36:41.763

我没有试过这个。

但我最好的猜测是，评论会根据应用程序版本号持续存在，而不是在某个国家/地区不可用/不可用时。

因此，如果版本号保持不变，则评论不会发生任何事情。

想一想，如果评论因某个国家/地区不可用而被删除，所有有差评的应用程序都会这样做，并从新的评论开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T05:36:40.330

我可以根据经验告诉您，当您在任何国家/地区下架某个应用程序时，您的应用程序背后的数据仍然存在。当您再次公开您的应用程序时，您所有的旧评论和评论仍然存在。

# submit - 新视图中的提交按钮由索引操作而不是创建操作处理

> ID：11597126
> 
> 赞同：0
> 
> 时间：2012-07-22T01:26:40.907
> 
> 标签：submit

我不知道怎么了！但是当我单击新视图中的创建按钮时，它会触发发布但使用控制器#index 操作来处理它。您是否知道问题是什么，或者我如何指定要使用的操作。

更新操作可以正常工作，唯一的问题是新形式。

谢谢

对于未来的观众：问题已解决 root :to => 'class#index'#, :as => 'class' 是问题，删除 :as => 'class' 解决了它

# c# - HTTPS 文件下载 C#

> ID：11597127
> 
> 赞同：2
> 
> 时间：2012-07-22T01:27:02.743
> 
> 标签：c#

我需要下载一个隐藏在 HTTPS 连接后面的文件。

我是下载位于安全网站后面的文件的新手，我曾尝试使用凭据来解决此问题，但无济于事。

根据我的阅读，您需要创建并使用证书来完成此操作，但我没有找到示例。任何帮助表示赞赏。

这就是我现在所拥有的：

```
 WebClient dove = new WebClient();
        CredentialCache mycache = new CredentialCache();
        dove.Credentials = new NetworkCredential("user", "pass"); ;
        dove.DownloadProgressChanged += new DownloadProgressChangedEventHandler(dove_DownloadProgressChanged);
        dove.DownloadFileCompleted += new AsyncCompletedEventHandler(dove_DownloadFileCompleted);
        dove.DownloadFileAsync(new Uri("http://secure.website.com/File/Default.aspx"), "file.xls"); 
```

谁能给我一个如何完成这个的例子，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:44:57.263

.net 透明地支持 https 证书，您无需明确提供。您的代码看起来不错，只要您的网站不需要表单身份验证，它就应该可以工作。从您的代码看来，身份验证可能是基本身份验证。但是，如果需要通常用于网站的表单身份验证，那么您首先需要编写一个代码来进行身份验证并从服务器接收经过身份验证的 cookie。怎么做？更好地查看这个 SO question [HttpClient and forms authentication in C#](https://stackoverflow.com/questions/640116/http-client-and-forms-authentication-in-c-sharp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T01:36:03.077

尝试：

```
ServicePointManager.ServerCertificateValidationCallback += (sender, certificate, chain, policy) => {
    //do what you want
    return true;
}; 
```

# ruby-on-rails - Omniauth-facebook 不断报告 invalid_credentials

> ID：11597130
> 
> 赞同：28
> 
> 时间：2012-07-22T01:27:18.947
> 
> 标签：ruby-on-rails, facebook, omniauth

我正在尝试按照 Railscast #360 中的描述实现omniauth-facebook，但遇到了很大的障碍。当我单击登录链接时，我会收到所需的弹出窗口，要求我输入我的 Facebook 凭据，但是当我提交时，我收到 OmniAuth::Strategies::OAuth2::CallbackError 错误。在 apache 日志中，会打印以下内容：(facebook) Authentication failure！invalid_credentials：OmniAuth::Strategies::OAuth2::CallbackError，OmniAuth::Strategies::OAuth2::CallbackError

这是相关代码：

**全域认证.rb**

```
OmniAuth.config.logger = Rails.logger

Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_SECRET']
end 
```

**session_controller.rb**

```
class SessionsController < ApplicationController
  def create
    user = User.from_omniauth(env["omniauth.auth"])
    session[:user_id] = user.id
    redirect_to root_url
  end

  def destroy
    session[:user_id] = nil
    redirect_to root_url
  end
end 
```

**应用程序.html.erb**

```
<div id="fb-root"></div>
<script>        
window.fbAsyncInit = function() {
    FB.init({
        appId      : '(**my app id**)', // App ID
        status     : true, // check login status
        cookie     : true // enable cookies to allow the server to access the session
    });

    $('#sign_in').click(function(e) {
        e.preventDefault();
        return FB.login(function(response) {
            if (response.authResponse) {
                return window.location = '/auth/facebook/callback';
            }
        });
    });

    return $('#sign_out').click(function(e) {
        FB.getLoginStatus(function(response) {
            if (response.authResponse) {
                return FB.logout();
            }
        });
        return true;
    });
};
 </script> 
```

我错过了一些简单的东西吗？最近几天我一直在寻找解决方案。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-23T21:38:43.200

似乎omniauth-facebook v1.4.1 引入了CSRF 的问题。临时修复是回滚到 v1.4.0。在您的 Gemfile 中，将 omniauth-facebook 行更改为：

```
gem 'omniauth-facebook', '1.4.0' 
```

我已经报告了这个问题：[https ://github.com/mkdynamic/omniauth-facebook/issues/73](https://github.com/mkdynamic/omniauth-facebook/issues/73)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T19:16:49.837

我有一个类似的问题，它适用于 1 个用户，但收到第 2 个用户的身份验证错误。

禁用沙盒模式（应用程序>设置>高级）似乎已修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T21:12:15.160

在您的 omniauth.rb 添加代码：

```
OmniAuth.config.on_failure = Proc.new do |env| new_path = "/auth/failure"
 [302, {'Location' => new_path, 'Content-Type'=> 'text/html'}, []]
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T20:21:54.760

我注意到omniauth-oauth2 > 1.0.3 也会导致问题，卸载更高版本并保持omniauth-oauth2 1.0.3 解决了问题..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T14:25:57.877

我也有这个。

`application.html.erb`删除您（但保留`fb-root`div）中的 JS 脚本将起作用。无论如何，FB 登录屏幕将不再显示在弹出窗口中，您将被重定向到 FB 登录，然后返回您的站点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T03:01:41.053

对于像我这样粗心的人，

`Remember to switch you app out of Sandbox mode`部署之前在developers.facebook 上！

沙盒模式会触发除开发者账户之外的所有人的 csrf 错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-14T14:19:29.080

您可能想要覆盖 OmniauthCallbacksController，并将其添加到日志记录中：

```
class OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def failure_message
    exception = env["omniauth.error"]
    #add login here:
    Rails.logger.info "exception: #{exception.inspect}"
    error   = exception.error_reason if exception.respond_to?(:error_reason)
    error ||= exception.error        if exception.respond_to?(:error)
    error ||= env["omniauth.error.type"].to_s
    error.to_s.humanize if error
  end

  #other code ...
end 
```

在我添加了我的之后，我发现了“无效的 ip...”问题，

# eclipse - 是否可以使用插件扩展 Eclipse？

> ID：11597132
> 
> 赞同：0
> 
> 时间：2012-07-22T01:28:37.147
> 
> 标签：eclipse

我不熟悉 Eclipse 插件开发。到目前为止，我在网上找到的示例都显示了如何创建插件以向 Eclipse 添加新功能。但我真正想要的是通过添加一些新功能来扩展现有功能。

例如，我想向 CDT 的 Code Style 首选项页面添加一个新选项卡以添加更多配置选项。当然，这也涉及到后端风格的配置选项，而不仅仅是 UI。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:44:00.400

[我认为您可以通过使用Equinox Transforms](http://wiki.eclipse.org/Equinox_Transforms)更改 plugin.xml 中的声明来扩展插件。因此，在这种情况下，您可能能够更改引用 CDT 首选项的扩展点，以使用您自己的 CDT 首选项子类（假设 CDT 首选项页面是可子类化的）。然而，这非常混乱，很可能会在较新的 Eclipse 版本中出现问题。

一般来说，使用 Eclipse 很难扩展现有插件，除非它们已经定义了 API 或扩展点来执行此操作，并且这些通常都有文档说明。如果您遵循 API 或扩展点，那么您应该在较新的 Eclipse 版本之间兼容，因为它们在不以不兼容的方式更改这些内容方面做得很好。如果您通过使用内部知识来扩展事物，那么在任何新的 Eclipse 版本中事物都会受到影响。

不幸的是，除非插件明确提供这种情况（通过加载可能在片段），因此无法用您自己的版本替换插件中的任意类。

# facebook - Like Box 不显示当前流

> ID：11597134
> 
> 赞同：0
> 
> 时间：2012-07-22T01:29:17.123
> 
> 标签：facebook, facebook-likebox

我已经解决了每一个问题，但找不到一个来解决我的问题。类似框流在 7 月 1 日停止工作，我无法让它再次工作。下面是旧代码。

```
<div class="fb-like-box" data-href="http://www.facebook.com/#!/pages/AllStar-MMA-Tours/133893883351736" data-width="300" data-show-faces="true" data-border-color="white" data-stream="true" data-header="true"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:07:14.317

我最近在客户网站 home4animals dot org / facebook 上遇到了同样的问题。我能想到的唯一改变是网站已经转移到另一台机器上，因此 DNS 发生了变化，所以我创建了一个新的 facebook 应用程序。问题仍然存在，这是一个很长的镜头。

然后我在我们公司的网站上查看了 Facebook 点赞框正在工作的地方，发现没有 appId 参数。删除它解决了问题，并且流现在按预期显示。我已经 8 个月没有更改该特定代码，因此我认为 Facebook 端的某些内容发生了变化。

```
diff DownloadFacebookJS.ss DownloadFacebookJS.ss.orig 
6c6
<   js.src = "http://connect.facebook.net/en_US/all.js#xfbml=1;";
---
>   js.src = "http://connect.facebook.net/en_US/all.js#xfbml=1&appId=$FacebookApplicationID;";
8c8
< }(document, 'script', 'facebook-jssdk'));</script>
---
> }(document, 'script', 'facebook-jssdk'));</script>
\ No newline at end of file 
```

# security - 要求两个或更多密码会增加安全性吗？

> ID：11597135
> 
> 赞同：1
> 
> 时间：2012-07-22T01:29:27.017
> 
> 标签：security

我不是统计学家，所以我不知道这方面的数学，但请考虑以下两种情况：

**一个 16 个字符的密码：**

```
Password: XXnrKkO4`AM&U$6D 
```

或者

**两个 8 位密码：**

```
Password 1: u/wyk<}U
Password 2: hc]KpL3C 
```

我见过一些需要高安全性的网站（即：银行）使用两个密码布局，但它提高了多少安全性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T01:44:11.707

银行通常不会（除非他们有愚蠢的安全策略，并且其中一些这样做）要求两个被视为相同的密码。

我所在的一家银行，汇丰银行使用双因素身份验证。他们要求提供我的帐户密码（“我知道的东西”）以及由钥匙扣生成的一次性代码（“我拥有的东西”）。这有助于防止单因素身份验证的两个弱点：“橡胶软管加密”（有人将我的密码从我身上敲出，但他们没有钥匙扣）和被盗密码（他们有钥匙扣，但不是我的脑）。

其他银行，例如 Nationwide（在英国），要求提供您的客户 ID（相当于用户名），还要求提供“可记忆数据”（实际上是密码）**和**来自 6 位数字代码的三位数字，该代码由用鼠标下拉列表。

我知道这是为了帮助防止键盘记录器：密码（“可记忆数据”）提供传统的密码安全性，但下拉数字列表提供键盘记录器保护，因为数字是随机的并用鼠标选择（键盘记录器通常不记录鼠标移动）。然而，用鼠标选择整个密码是不切实际的，所以这就解释了这一点。

现在回到您最初的问题**，假设您不是在谈论我刚才描述的两种情况**，那么答案是“视情况而定”。

然而，人们会假设有问题的网站只是在通过密码匹配实现之前将两个密码连接在一起（希望使用加盐哈希），但即使它们没有连接，组合的数量也很明显（仅假设字母密码） 16 个字符的密码 (26^16) 与两个 8 字符的密码 (26^8 * 26^8 == 26^(8+8) ) 相同。

因此，鉴于两种情况下输入域的大小相同，这表明要么网站开发人员很愚蠢，要么他们有单独的文本框来提高可用性（例如，通过连接两个更容易记住的密码生成长密码） ，有一个两因素系统就地，或者有一个键盘记录器规避技术就地....或其他完全:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:31:35.690

它不是那么安全，并且取决于您的数据库布局实际上可能会降低性能。这对用户来说也是一个巨大的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:41:47.147

您所说的方法称为“双重验证”，它在与几种不同的识别技术一起使用时最有效。

例如，第一种验证方法可能涉及电子邮件+通行证（我们都熟悉那个），第二种可能涉及使用手机+短信（发送到您的手机以进行额外验证的代码）。

这是一个好主意，我一直将它用于所有 Google 应用程序。就在几个月前，我们的一位竞争对手（没有姓名）的谷歌账户被黑，用户信息被泄露。这可以通过双重验证来避免。

至于密码有效性的问题，请查看此链接。 [http://howsecureismypassword.net/](http://howsecureismypassword.net/)

双通确实意味着更高的安全性，但使用不同的验证方法会更有效。

# django - Django/Eclipse 集成

> ID：11597139
> 
> 赞同：0
> 
> 时间：2012-07-22T01:30:33.173
> 
> 标签：django, eclipse, pydev

我已经将 django 下载到我的系统上并尝试将其导入到 eclipse 中。在我将它指向 python 解释器后，Eclipse 一直告诉我 django 不存在，它肯定是，感觉这可能是一个快速修复，但这就是我安装所有其他程序的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:18:11.660

一旦你配置它，PyDev 将静态解析你的解释器的特定于站点的路径。这意味着每次您的站点路径发生变化时，您都必须重新配置您的解释器，例如安装一个新的包，例如 Django。

这是[解释器配置](http://pydev.org/manual_101_interpreter.html)文档所说的：

> # 如果我在配置 [解释器] 后在我的系统 PYTHONPATH 中添加新内容怎么办？
> 
> 如果您在 python 安装中添加一些内容，您需要手动将其添加为系统 PYTHONPATH 中的“新文件夹”（如果它仍然不在 PYTHONPATH 中的文件夹下）或（推荐）删除您的解释器并再次添加，然后，按应用。

# xml - XML to XML with XSLT - 添加、删除、修改元素和属性

> ID：11597141
> 
> 赞同：0
> 
> 时间：2012-07-22T01:30:53.063
> 
> 标签：xml, xslt, xhtml

我想使用 XSLT 从一个 XML (XHTML) 文件更改为另一个。在新的 XML 文件中，我必须删除/添加/修改一些元素。因此，为此我创建了一个`identity.xsl`文件，它复制了整个源文件，然后我创建了一个新的 XSLT，其中包括`identity.xsl`然后在那个新的 XSLT 中我尝试进行修改。我可以通过传递一个模板匹配来消除一些不需要的属性，该模板匹配什么都不做，但我无法在现有标签中添加新属性，也无法在特定位置添加新元素（在特定位置带有结束标签）。

我的原始文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
</head>

<body>
  <div id="o">
    <div id="nd">
      <p>1</p>
    </div>

    <div class="TF id="id12">
      <element1 name="abc" src="abc.jpg"></script>
      <input type="radio" id="1" event="xyz">
      <div class="q">
        <br/>
        <div id="ta3" class="block">
          <span style="a">ABC</span>
        </div>
        <br/>T <input/> F <input/>
        <div id="sf">
          <div id="ta3">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html> 
```

所需文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
</head>

<!--HAVE TO AD THESE TWO ELEMENTS-->
<element add="xyz" id="23">
<element add="xyz" id="24">

<!--ADD ATTRIBUTES IN BODY TAG-->
<body onLoad="ada" bgcolor="pink">

  <div id="o">
    <div id="nd">
      <p>1</p>
    </div>

    <div class="TF id="id12">

      <!--HAVE TO UPATE THE VALUE OF SRC ATTRIBUTE -->
      <element1 name="abc" src="xyz.jpg"></script>

      <!--ADD THIS FORM ELEMENT WITH ATTRIBUTE-->
      <form name="form">
        <input type="radio" id="1" event="xyz">
        <div class="q">
          <br/>
          <div id="ta3" class="block">
            <span style="a">ABC</span>
          </div>

          <br/>T 
          <!--ADD TABLE/TR/TD TAG-->
          <table>
            <tr>
              <td>
                <input/>
              </td>
            </tr>
            <tr>
              </td>
              F <input/>
              </td>
            </tr>
          </table>

          <div id="sf">
            <div id="ta3">
            </div>
          </div>
        </div>

        <!--ADD INPUT TAG-->
        <input type="submit" value="Done"/>

      </div>
    </div>

    <!--CLOSE FORM TAG-->
  </form>
</div>
</body>
</html> 
```

XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <!-- Import the identity transformation. -->
  <xsl:import href="identity.xsl"/>

  <xsl:template match="body">
    <body>
      <xsl:apply-templates select="body">
      </xsl:apply-templates>
    </body>
  </xsl:template>

  <xsl:template match="body">
    <body onLoad="ada" bgcolor="pink"></body>
  </xsl:template>

  <!--REMOVES THE MATCHING ATTRIBUTE and DOES THE JOB-->
  <xsl:template match="@attr"> </xsl:template>

  <xsl:template match="input">
    <xsl:element name="input">
      <xsl:attribute name="type">submit</xsl:attribute>
      <xsl:attribute name="value">Done</xsl:attribute>
      <xsl:apply-templates />
    </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T05:50:27.323

你的输入文件中充满了格式错误，我不得不冒险猜测你的意图。请参阅下面的转换解决方案。我故意没有在您的评论“添加表格/TR/TD TAG”周围插入表格元素，因为这部分看起来很疯狂，以至于我在这里为您提供的任何解决方案都可能是对您所需规则的错误解释转型。

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xhtml="http://www.w3.org/1999/xhtml"
 xmlns="http://www.w3.org/1999/xhtml"
 exclude-result-prefixes="xhtml">
<xsl:output method="xml" indent="yes" encoding="UTF-8"/>
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="xhtml:body">
  <element add="xyz" id="23" />
  <element add="xyz" id="24" />
 <body onLoad="ada" bgcolor="pink">
  <xsl:apply-templates select="@*|node()"/>
  </body>
</xsl:template>

<xsl:template match="xhtml:element1[@name='abc']/@src">
  <xsl:attribute name="src">xyz.jpg</xsl:attribute>  
</xsl:template>

<xsl:template match="xhtml:input[@id='1']">
  <form name="form">
   <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
   </xsl:copy>
   <xsl:apply-templates select="following-sibling::xhtml:div[1]" mode="inside-form"/> 
  </form>
</xsl:template>

<xsl:template match="xhtml:div[ preceding-sibling::xhtml:*[1]
   /self::xhtml:input[@id='1']]"/>

<xsl:template match="xhtml:div" mode="inside-form">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
 <input type="submit" value="Done"/> 
</xsl:template>

</xsl:stylesheet> 
```

**...将采用此输入文档...**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
</head>
<body>
 <div id="o">
  <div id="nd">
   <p>1</p>
  </div>
  <div class="TF" id="id12">
   <element1 name="abc" src="abc.jpg"/>
   <input type="radio" id="1" event="xyz"/>
   <div class="q">
    <br/>
    <div id="ta3" class="block">
     <span style="a">ABC</span>
    </div>
    <br/>T <input/> F <input/>
    <div id="sf">
     <div id="ta3">
     </div>
    </div>
   </div>
  </div>
 </div>
</body>
</html> 
```

**...并产生此输出文档...**

```
<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
  </head>
  <element add="xyz" id="23" />
  <element add="xyz" id="24" />
  <body onLoad="ada" bgcolor="pink">
    <div id="o">
      <div id="nd">
        <p>1</p>
      </div>
      <div class="TF" id="id12">
        <element1 name="abc" src="xyz.jpg" />
        <form name="form">
          <input type="radio" id="1" event="xyz" />
          <div class="q">
            <br />
            <div id="ta3" class="block">
              <span style="a">ABC</span>
            </div>
            <br />T <input /> F <input /><div id="sf"><div id="ta3" /></div></div>
          <input type="submit" value="Done" />
        </form>
      </div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:34:32.707

就个人而言，我无法忍受 XSL-T。太难读了。

我的偏好是创建我想要生成的 XML 的 Velocity 模板，并使用[Velocity](http://velocity.apache.org/)从旧的 XML 映射到新的 XML。它更容易可视化并且效果也很好。

# javascript - 如何使用 Javascript 将 CSS、META 等标签插入到 head 标签中？

> ID：11597142
> 
> 赞同：1
> 
> 时间：2012-07-22T01:30:53.147
> 
> 标签：javascript, content-management-system, head

我使用的托管 CMS 有一个错误，不允许我将内容插入到`<head>`.

我考虑过使用 Javascript 将所需的代码插入头部，但这会起作用吗？如果一个页面被读取`<head>`，那么`<body>`如果头部已经被读取或者我是否误读了浏览器的工作方式，那么使用 javascript 将代码放入头部是否重要？

如果您可以将内容放入页面的头部并且它将适用于所有主要浏览器，那么 javascript 是什么？（我是 javascript 的新手。）

注意：我使用*托管*的CMS，并且无权访问任何服务器端脚本。

***编辑：***

我需要添加`CSS`和`META`标签。

CSS将是这样的：

```
<style type="text/css">
 .slideshow img { display: none }
 .slideshow img.first { display: block }
</style> 
```

META 可能如下所示：

```
<meta property="og:title" content="Title Text" />
<meta property="og:type" content="article" />
<meta property="og:url" content="URL Path" />
<meta property="og:image" content="IMG Path" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="620" />
<meta property="og:image:height" content="541" />
<meta property="og:site_name" content="My Site" /> 
```

这些是示例，但与我将要添加的类似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T01:44:10.420

对于 CSS 脚本：

```
var ele = document.createElement("style");
ele.type = "text/css";
ele.innerHTML = "CSS CODE"; // Replace with CSS code.
document.head.appendChild(ele); 
```

对于元标记（虽然我怀疑它会起作用，因为查看元标记的软件通常不执行 JavaScript 代码）：

```
var ele = document.createElement("meta");
ele.property = "propertyName"; //Replace with property name.
ele.content = "CSS CODE"; // Replace with content.
document.head.appendChild(ele); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T01:33:50.917

```
var ele = document.createElement("script");  //Tag name
ele.src = "your_link.js";                    //URL
document.head.appendChild(ele);              //Insert into <head>
                                             //Done. 
```

# python - 如何在 Python 中处理来自不同时区的一系列时间戳？

> ID：11597149
> 
> 赞同：1
> 
> 时间：2012-07-22T01:31:54.090
> 
> 标签：python, database, datetime, time, timezone

我有一个大型数据集，其中包含来自不同时区的时间戳，可以追溯到一年前。每个条目都包含一个时间戳和当前从 UTC 中删除时间戳的时区的秒数。因此，例如，来自美国东部时区的时间戳将附加 14400。如果不是因为来自非 DST 时间（即年初）的时间戳也附有 14400，表示东部时区，这可能很容易处理。

考虑到 DST，我有什么特别有效的方法可以将这堆数据转换为 Python 中的纯 UTC 时间戳吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T01:34:36.187

您可以像这样使用[`dateutil`模块](http://labix.org/python-dateutil)和`pytz`模块：

```
import dateutil.parse
import pytz

parsed_as_utc = dateutil.parser.parse(timestamp).astimezone(pytz.utc) 
```

# objective-c - 将 NSNumber 转换为 int

> ID：11597153
> 
> 赞同：0
> 
> 时间：2012-07-22T01:32:20.387
> 
> 标签：objective-c, cocoa

编辑：修改问题，缩小范围

我需要使用 switch 语句来根据 NSNumber 的 int 值来指示结果。我的方法如下所示：

```
-(BOOL)setImage:(NSNumber*)c{
       switch ([c intValue]){...}
} 
```

运行开关时出现“EXC_BAD_ACCESS”错误

我也尝试过`switch([c integerValue])`，但这也不起作用

如果我在 switch 语句中放置一个静态 int，程序运行良好。

出了什么问题，如何获得我的 NSNumber 的 int 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T02:45:51.677

如果`[c intValue]`崩溃则`c`不是对象指针。如果它返回一个意外的值，它可能是`nil`. 最好检查一下，然后返回`NO`数字`nil`或选择一些默认值。

# date - 如何使用 php 将 yyyy-MM-ddThh:mm:sszzz 转换为时间戳？

> ID：11597162
> 
> 赞同：2
> 
> 时间：2012-07-22T01:36:21.723
> 
> 标签：date, timestamp, unix-timestamp, php

我试过这段代码：

```
$dateFromDB = '2012-06-22T14:06:55+00:00';

$newDate = DateTime::createFromFormat('yyyy-MM-ddThh:mm:sszzz', $dateFromDB);
$date = $newDate->format('U'); // convert to timestamp

echo $date; 
```

但给了我这个错误：

> 致命错误：在...中的非对象上调用成员函数 format()

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:14:15.157

如果您需要使用 DateTime 请尝试程序方式：

```
$dateFromDB = '2012-06-22T14:06:55+00:00';  
$timestamp = date_create_from_format('Y-m-d\TH:i:sP', $dateFromDB);
// To get Unix timespamp
echo date_format($timestamp, 'U');
// To get user-formated Date
echo date("d.m.Y H:i:s", date_format($timestamp, 'U')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T01:42:32.767

`strtotime()`应该能够很好地解析并返回 Unix 时间戳。

```
<?php
$timestamp = strtotime('2012-06-22T14:06:55+00:00');

echo $timestamp;  // prints: 1340374015 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T01:45:37.140

或者如果你真的需要使用 DateTime

```
$dateFromDB = '2012-06-22T14:06:55+00:00';

$newDate = DateTime::createFromFormat('Y-m-d?H:i:sP', $dateFromDB);
$date = $newDate->format('U'); // convert to timestamp

echo $date; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T01:43:14.410

尝试：

```
$date = strtotime($dateFromDB); 
```

# css - 居中动态大小的图像

> ID：11597165
> 
> 赞同：0
> 
> 时间：2012-07-22T01:37:17.997
> 
> 标签：css, html, image, centering

我正在使用 PHP 脚本自动按比例调整图片大小，使它们适合给定的高度和宽度（例如：原始图片为 200x100 像素，目标框为 180x180 像素，调整后的图像为 180x90 像素）。

它工作正常，但用于在 div 中居中图像的常用 CSS 技巧似乎需要您提前知道尺寸。

我发现的唯一解决方法是将外部 div 定义为`display:table;`并将包含图像的 div 定义为`display: table-cell;vertical-align: middle;text-align:center;`.

还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T01:43:22.130

不是最佳实践 text-align 来对齐图像。

> “关于 text-align 属性的棘手之处在于你只能将文本与它对齐——你不能用它来移动像图像这样的块级元素。一些浏览器会将图像或表格与这个属性对齐，但这并不可靠，正如你所发现的那样。” ——[珍妮弗·凯宁，About.com](http://webdesign.about.com/od/graphics/f/blfaqtxtalgimg.htm)

*   您可以使用已弃用的 img 属性 align="center"，尽管您不会使用。这样标签和样式混合在一起，更糟糕的是，整个图像周围有垂直和水平空间。

    ```
    <img src="http://www.lorempixel.com/100/150" align="center"> <-- Wrong way 
    ```

*   解决这个问题的最好方法是使用 css。将图像设置为 div 的背景，然后 div 的空间将成为您图像的空间，您可以使用边距将其放置到位。您可以尝试使用其中一种其他技术[CSS Tricks 的 Absolute center an image](http://css-tricks.com/snippets/css/absolute-center-vertical-horizontal-an-image/)

CSS背景图像技术：

```
background:url('path_to_img') center center no-repeat; /* div center */
background:url('path_to_img') center 0      no-repeat; /* div horizontal center */
background:url('path_to_img') 0      center no-repeat; /* div vertical center */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T02:01:11.563

如果你需要使用 img 标签，又不想用背景图片弄乱 div，你可以试试这个方法：

[http://jsfiddle.net/Nz6Nm/3/](http://jsfiddle.net/Nz6Nm/3/)

```
.container
{
    width: 180px;
    height: 180px;
    background-color: #FF0000;
    line-height: 180px;
    font-size: 0;
    text-align: center;
}
.container img {
    vertical-align: middle;
} 
```

font-size 设置为 0 以避免奇怪的间距。让 line-height 等于容器的高度，会导致 vertical-align 作为垂直中心，至少对于图像来说。

这样做的好处是您可以将图像放入 img 标签中，这在语义上比背景图像更令人愉悦。当您具有已知的容器大小，但您希望在其中居中的图像大小未知时，此方法有效。

**编辑：** 这是另一个小提琴的链接：http: [//jsfiddle.net/Nz6Nm/4/](http://jsfiddle.net/Nz6Nm/4/)

您提到可能需要在图像上方放置文本，所以我只是想展示一种快速的方法。这种方式在顶部增加了 20px。如果您需要坚持使用 180 x 180，那么您可以调整逻辑以适应。​</p>

# javascript - 如何在 JavaScript 文件中包含库？

> ID：11597167
> 
> 赞同：2
> 
> 时间：2012-07-22T01:37:58.003
> 
> 标签：javascript, html

为了将`HTML`页面与`JavaScript`实现分开，我为我网站上的每组功能创建了不同`.js`的文件。如果我`JavaScript`要从`HTML`页面实现，我会这样做：

```
<script type="text/javascript" src="path/to/javascript/jquery.qtip.js"></script> 
```

但是，我将如何将该库包含`jquery.qtip.js`到`.js`文件中，例如 `heatmap.js`？我之所以这么问，是因为我从 firebug 收到以下错误：

```
TypeError: $("mytable td").qtip is not a function
[Break On This Error]   

style : 'ui-tooltip-tipsy ui-tooltip-shadow' 
```

如果我在 java 中，我会包含一个外部库或类：

```
import java.util.* 
```

JavaScript中有类似的方法吗？

```
function heatmap()
{
    var input = document.getElementById("heatmap").value;

    // TAKE THE HEATMAP HTML OBJECT AND MAKE A POST TO THE BACKEND
    $("#heatmap").empty().html(baseurl + "/images/loader.gif/>");
    $.post(baseurl + "index.php/heatmap/getMatrix",
        {
            input : input.toString()
        },

        function(answer){
            var list = eval('(' + answer + ')');
            var temp = list.split(" ");
            makeTable(temp);

            $(document).ready(function(){
                $('mytable td').qtip({
                overwrite : false,      // make sure it can' be overwritten
                content : {
                    text : function(api){
                    var msg = "Interaction: " + $(this).html(); 
                    return msg;
                    }
                },
                position : {
                   my : 'top left',
                   target : 'mouse',
                   viewport : $(window),    // keep it on screen at all time is possible
                   adjust : {
                    x : 10, y : 10
                   }
                },

                hide : {
                   fixed  : true        // helps to prevent the tooltip
                },
                style : 'ui-tooltip-tipsy ui-tooltip-shadow' 
                });
            });
        });

} 
```

****** *** ** *** ** *** ***添加 MAKETABLE 功能***** ** *** ** *** ** *** *****

 **```
function makeTable(data)
{
    var row = new Array();
    var cell = new Array();

    var row_num = 18;
    var cell_num = 16;

    var tab = document.createElement('table');
    tab.setAttribute('id', 'mytable');
    tab.border = '1px';

    var tbo = document.createElement('tbody');

    for(var i = 0; i < row_num; i++){
            row[i] = document.createElement('tr');

            var upper = (i+1)*16;
            var lower = i*16;
            for(var j = lower; j < upper; j++){
                cell[j] = document.createElement('td');
                //cell[j].setAttribute('class', 'selector');
                if(data[j] != undefined){
                    var index = Math.round(parseFloat(data[j])*100) / 100;
                    var count = document.createTextNode(index);
                    cell[j].appendChild(count);

                    /* specify which color better suits the heatmap */
                    if(index <= -4){
                        cell[j].style.backgroundColor = '#FF0000';
                    }
                    else if(index > -4 && index <= -3.5){
                        cell[j].style.backgroundColor = "#FF2200";
                    }
                    else if(index > -3.5 && index <= -3.0){
                        cell[j].style.backgroundColor = "#FF2222";
                    }
                    else if(index >= -3.0 && index < -2.5){
                        cell[j].style.backgroundColor = "#FF3311";
                    }
                    else if(index >= -2.5 && index < -2.0){
                        cell[j].style.backgroundColor = "#FF5500";
                    }
                    else if(index >= -2.0 && index < -1.5){
                        cell[j].style.backgroundColor = "#FF8811";
                    }
                    else if(index >= -1.5 && index < -1.0){
                        cell[j].style.backgroundColor = "#FFAA22";
                    }
                    else if(index >= -1.0 && index < -0.5){
                        cell[j].style.backgroundColor = "#FFCC11";
                    }
                    else if(index >= -0.5 && index < 0){
                        cell[j].style.backgroundColor = "#FFCC00";
                    }
                    else if(index == 0){
                        cell[j].style.backgroundColor = "#000000";
                    }
                    else if(index > 0 && index < 0.5){
                        cell[j].style.backgroundColor = "#FF8800";
                    }
                    else if(index >= 0.5 && index < 1.0){
                        cell[j].style.backgroundColor = "#FFBB00";
                    }
                    else if(index >= 1.0 && index < 1.5){
                        cell[j].style.backgroundColor = "#FFFF00";
                    }
                    else if(index >= 1.5 && index < 2.0){
                        cell[j].style.backgroundColor = "#00CC00";
                    }
                    else if(index >= 2.0 && index < 2.5){
                        cell[j].style.backgroundColor = "#008800";
                    }
                    else if(index >= 2.5 && index < 3.0){
                        cell[j].style.backgroundColor = "#006600";
                    }
                    else if(index >= 3.0 && index < 3.5){
                        cell[j].style.backgroundColor = "#004400";
                    }
                    else{

                    }
                    row[i].appendChild(cell[j]);
                }
            }

            tbo.appendChild(row[i]);
        }

        tab.appendChild(tbo);
        document.getElementById('mytable').appendChild(tab);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T01:53:14.280

我认为您正在寻找像[http://requirejs.org/这样的脚本加载器](http://requirejs.org/)

```
require(["jquery", "jquery.qtip.js", ...], function($) {
    // do something when loaded
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:57:10.057

您已经知道如何使用标签包含`.js`文件，因此您有 3 个选项：`script`

*   上述`script`标签；
*   将两个文件的源压缩到一个文件中；
*   使用模块化加载器，例如[RequireJS](http://requirejs.org/)。

`include`当您在 JavaScript 中加载另一个脚本的源代码（例如 PHP's /`require`或 Java's`import`或 C's时，没有简单的内置函数可以暂停脚本的执行`include`，因为 JavaScript 的脚本加载是异步的——脚本按照您在页面，但他们不会等待加载动态添加的脚本。

请注意，第一个和第三个选项会发出额外的 HTTP 请求，因此如果您的脚本总是需要这样的功能，您可以将其包含在脚本本身中以减少 HTTP 请求。尽管如此，如果您想保持`.js`文件拆分并从另一个文件导入它们`.js`，最好的选择是[RequireJS](http://requirejs.org/)。

此外，如果您使用的是 jQuery，您可以在的回调中使用[`$.getScript`](http://api.jquery.com/jQuery.getScript/)和运行其余代码。`$.getScript`

* * *

由于您使用的是 jQuery，因此这是一个仅 jQuery 的解决方案，用于`.js`在需要时动态添加 qtip 并提供：

```
if (!$().qtip) //if qtip is not included/loaded into the page yet
    $.getScript('http://craigsworks.com/projects/qtip2/packages/latest/jquery.qtip.min.js', heatmap);
else heatmap(); 
```

**[小提琴](http://jsfiddle.net/ult_combo/EWjFJ/3/)**

当然，您可以`$.getScript`直接在 DOM 就绪事件内部或页面中的任何位置使用：

```
$(document).ready(function() {
    $.getScript('http://craigsworks.com/projects/qtip2/packages/latest/jquery.qtip.min.js');
}); 
```

请注意这`$.getScript`将是异步的，因此您必须将取决于此脚本的其余代码包装在其回调中。有一些方法可以将其设置为同步 ajax 调用，但它可能会冻结/减慢页面的加载，因此不推荐强制它同步。

如果您需要包含许多`.js`文件，RequireJS 是一个更好的选择。**

# java - 从 java 运行 Linux 的命令行

> ID：11597168
> 
> 赞同：0
> 
> 时间：2012-07-22T01:38:09.917
> 
> 标签：java, bash, shell, command-line

我正在尝试从 Java 代码执行一些 Mac（Linux 的？）命令。我以这个简短的课程为例。我尝试阅读此论坛上的其他类似问题，但无法解决。

它给了我错误。

我试过：

```
Runtime rt = Runtime.getRuntime();
Process pr = rt.exec("/Users/xxxx/Documents/ABC"); 
```

访问被拒绝消息出现。下面的代码给出了错误。

This question [Want to invoke a linux shell command from Java](https://stackoverflow.com/questions/1410741/want-to-invoke-a-linux-shell-command-from-java) 已经谈到了类似的问题，但我认为他们并没有结束他们的辩论。

我正在使用 mac os 10.7。

```
public class Main {

    public static void main(String args[]) {

        try {

            Process p = Runtime.getRuntime().exec(new String[]{"bash","-c","ls /Users/xyz/Documents/ABC"});

            BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
            String line=null;

            while((line=input.readLine()) != null) {
                System.out.println(line);
            }

            int exitVal = p.waitFor();
            System.out.println("Exited with error code "+exitVal);

        } catch(Exception e) {
            System.out.println(e.toString());
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:33:43.197

我使用了完整路径“/bin/bash”并使用了不同的目录，它工作得很好。所以代码几乎是正确的。您只需要注意路径、目录权限，并且可能想要使用完整路径。真的很感谢你们的支持。干杯

# php - 使用 htaccess 创建漂亮的 URL

> ID：11597169
> 
> 赞同：2
> 
> 时间：2012-07-22T01:38:34.933
> 
> 标签：php, .htaccess, href

我想缩短这个 URL：'http://localhost/school/readmore?id=2'（必须用引号括起来，因为 SO 不允许发布 localhost URL）。`.htaccess`我已经用这个文件把它变成了这样的“http://localhost/school/readmore-2.html” ：

```
RewriteEngine On
IndexIgnore *

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^readmore-([1-9]+).html$ readmore.php?id=$1 
```

这是修改后的链接

```
<a href="readmore-<?php echo $show_row['id']; ?>.html">Readmore</a> 
```

但我希望 URL 看起来像这样“http://localhost/school/readmore/2”。一旦我尝试过，但完全失败了；这是不起作用的脚本：

```
RewriteEngine On
IndexIgnore *

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^readmore/([1-9]+).html$ readmore.php?id=$1

<a href="readmore/<?php echo $show_row['id']; ?>.html">Readmore</a> 
```

起初我认为它有效，但 CSS 脚本没有加载，因为我在链接处将`-`“”更改为“ `/`”，脚本将其作为文件夹读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T01:46:48.493

逃离你的`.`

```
RewriteRule ^readmore/([1-9]+)\.html$ readmore.php?id=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:47:49.013

您的浏览器认为它位于子目录中，因此它引用“http://localhost/school/readmore/style.css”而不是“http://localhost/school/style.css”

要解决此问题，您应该为样式表和链接使用绝对路径，例如

```
<link rel="stylesheet" href="http://localhost/school/style.css" /> 
```

或者

```
<link rel="stylesheet" href="/school/style.css" /> 
```

# java - 当我使用多个线程重新绘制时，为什么我的小程序会闪烁？

> ID：11597174
> 
> 赞同：1
> 
> 时间：2012-07-22T01:39:49.833
> 
> 标签：java, multithreading, japplet

**摘要**：我目前正在做一个模拟出租车的小程序实验室练习，它必须显示速度，燃料，票价和行驶距离，以及出租车是否被占用或空置。它具有为用户提供交互的按钮。 **问题**：我用一个线程来表示票价、距离和燃料，另一个线程用于选取框，但为什么我的选取框一直在闪烁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T01:42:07.973

没有代码，这真的是任何人的猜测，但无论如何我都会尝试一下。我的猜测是您直接在 JApplet 的`paint(...)`方法中绘图，从而失去了 Swing 双缓冲的所有可能收益。如果是这样，那么更改它并绘制`paintComponent(...)`JApplet 正在显示的 JPanel 的方法。

如果这没有帮助，那么考虑给我们足够的信息，这样我们就不必猜测了。您可能想向我们说明您是如何处理线程的，并向我们保证您会小心遵守 Swing 线程规则并仅在事件线程上更新 Swing 组件。

**编辑**
您的代码：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import javax.swing.JApplet;
import javax.swing.*;
import java.awt.event.ActionListener;
import java.io.*;
import javax.swing.border.Border;
/**
 *
 * @author IC
 */
public class taxiCab extends JApplet implements ActionListener {
    private JTextField speed, distance, fare, fuel, ov, full, tf, tf_fuel, tf_speed;
    private JButton butt, start, butt_pass, butt_sUp, butt_sDown, butt_refuel;
    private JLabel label;
    private JPanel main, north, south, south_left, south_right, center, center_content, north_speed, north_distance, north_fuel, north_fare;
    private Container contain;
    private int speedVal, distanceVal, passval, thread_sleep, status_width, fuel_width;
    private float fuelVal, fareVal;
    private Graphics g;
    private String status;
    private Font font2 = new Font("Kozuka Gothic Pro B", Font.BOLD, 60);
    private Border border2 = BorderFactory.createLineBorder(Color.black, 3);
    private Border border1 = BorderFactory.createLineBorder(Color.black, 1);
    private final int width_ = 500;
    private final int height_ = 300;
    Thread thread1 = new trd1();
    Thread thread2 = new trd2();
    /**
     * Initialization method that will be called after the applet is loaded into
     * the browser.
     */
    public void init() {
        setSize(width_,height_);
        status = new String();
        status = "VACANT";
        status_width = -330;
        Border border3 = BorderFactory.createLineBorder(Color.black, 5);
                thread1 = new trd1();
                thread2.start();
                thread2.suspend();
        contain = new Container();
        contain = getContentPane();
        main = new JPanel(new BorderLayout());
            north = new JPanel(new GridLayout(2,2));
            north.setBackground(Color.blue);
                north_speed = new JPanel();
                    tf_speed = new JTextField(10);
                    tf_speed.setBorder(border1);
                    tf_speed.setText("Speed");
                    tf_speed.setHorizontalAlignment(JTextField.CENTER);
                    tf_speed.setBackground(Color.CYAN);
                    tf_speed.setEditable(false);
                    speed = new JTextField(10);
                    speed.setBorder(border1);
                    speed.setEditable(false);
                    speed.setText("-");
                    speed.setHorizontalAlignment(JTextField.CENTER);
                    north_speed.add(tf_speed);
                    north_speed.add(speed);
                north_distance = new JPanel();
                    tf = new JTextField(10);
                    tf.setBorder(border1);
                    tf.setText("Distance");
                    tf.setHorizontalAlignment(JTextField.CENTER);
                    tf.setBackground(Color.CYAN);
                    tf.setEditable(false);
                    distance = new JTextField(10);
                    distance.setBorder(border1);
                    distance.setEditable(false);
                    distance.setText("-");//<----------------------------------distance
                    distance.setHorizontalAlignment(JTextField.CENTER);
                    north_distance.add(tf);
                    north_distance.add(distance);
                north_fuel = new JPanel();
                    tf_fuel = new JTextField(10);
                    tf_fuel.setBorder(border1);
                    tf_fuel.setText("Fuel");
                    tf_fuel.setHorizontalAlignment(JTextField.CENTER);
                    tf_fuel.setBackground(Color.CYAN);
                    tf_fuel.setEditable(false);
                    fuel = new JTextField(10);
                    fuel.setBorder(border1);
                    fuel.setEditable(false);
                    fuel.setText("-");
                    fuel.setHorizontalAlignment(JTextField.CENTER);
                    north_fuel.add(tf_fuel);
                    north_fuel.add(fuel);
                north_fare = new JPanel();
                    tf = new JTextField(10);
                    tf.setBorder(border1);
                    tf.setText("Fare");
                    tf.setHorizontalAlignment(JTextField.CENTER);
                    tf.setBackground(Color.CYAN);
                    tf.setEditable(false);
                    fare = new JTextField(10);
                    fare.setBorder(border1);
                    fare.setEditable(false);
                    fare.setText("-");
                    fare.setHorizontalAlignment(JTextField.CENTER);
                    north_fare.add(tf);
                    north_fare.add(fare);
                north.add(north_speed);
                north.add(north_distance);
                north.add(north_fuel);
                north.add(north_fare);
            center = new JPanel(new BorderLayout(3,3));
                center_content = new JPanel(new GridLayout(2,1,0,15));
                    ov = new JTextField(20);
                    ov.setText("");
                    ov.setBackground(Color.yellow);
                    ov.setEditable(false);
                    ov.setBorder(border2);
                    full = new JTextField(20);
                    full.setHorizontalAlignment(JTextField.CENTER);
                    full.setText("FUELMeter");
                    full.setIgnoreRepaint(true);
                    full.setFont(font2);
                    full.setBorder(border2);
                    center_content.add(ov);
                    center_content.add(full);
                center.add(center_content, "Center");
                center_content.setBackground(Color.yellow);
                label = new JLabel("   ");
                center.add(label, "North");
                label = new JLabel("   ");
                center.add(label, "West");
                label = new JLabel("   ");
                center.add(label, "South");
                label = new JLabel("   ");
                center.add(label, "East");
            south = new JPanel(new BorderLayout());
                south_left = new JPanel(new GridLayout(2,1));
                    butt_sUp = new JButton("Speed Up");
                    butt_sUp.setBorder(border1);
                    butt_sUp.addActionListener(this);
                    butt_sUp.setEnabled(false);
                    south_left.add(butt_sUp);
                    butt_sDown = new JButton("Speed Down");
                    butt_sDown.setBorder(border1);
                    butt_sDown.addActionListener(this);
                    butt_sDown.setEnabled(false);
                    south_left.add(butt_sDown);
                south_right = new JPanel(new GridLayout(2,1));
                    butt_pass = new JButton("Passenger In");
                    butt_pass.setBorder(border1);
                    butt_pass.addActionListener(this);
                    butt_pass.setEnabled(false);
                    south_right.add(butt_pass);
                    butt_refuel = new JButton("Refuel");
                    butt_refuel.setBorder(border1);
                    butt_refuel.addActionListener(this);
                    butt_refuel.setEnabled(false);
                    south_right.add(butt_refuel);
                butt = new JButton("Start");
                butt.setBorder(border1);
                    butt.addActionListener(this);
                south.add(butt, "Center");
                south.add(south_left, "West");
                south.add(south_right, "East");
        north.setBorder(border1);
        center.setBorder(border1);
        south.setBorder(border1);
        center.setBackground(Color.yellow);
        main.add(north, "North");
        main.add(center, "Center");
        main.add(south, "South");
        main.setBorder(border1);
        //main.setIgnoreRepaint(true);
        contain.add(main);
        contain.setVisible(true);
        //contain.setIgnoreRepaint(true);

    }
    public void paint(Graphics g){
        super.paint(g);
        g.setColor(Color.black);
        g.setFont(font2);
        g.drawString(status, status_width, 140);
        g.setColor(Color.yellow);
        g.fillRect(2,82,12,70);
        g.fillRect(getWidth()-14,82,12,70);
        g.setColor(Color.black);
        g.fillRect(0,82,2,70);
        g.setColor(Color.GREEN);
        g.fillRect(17,(getHeight()/2)+20,fuel_width,getHeight()-(83+(getHeight()/2)));
        main.setBorder(border1);
    }

    public void actionPerformed(ActionEvent e) {
        if(e.getActionCommand() == "Start"){
            butt.setLabel("Stop");
            butt_pass.setEnabled(true);
            fuelVal =  50.00f;
            distanceVal = 0;
            fareVal = 40.00f;
            speedVal = 0;
            fuel.setText(String.valueOf(fuelVal) + " L");
            distance.setText(String.valueOf(distanceVal) + " km");
            fare.setText("Php " + String.valueOf(fareVal));
            speed.setText(String.valueOf(speedVal) + " kph");
                thread1 = new trd1();
                thread1.start();
                thread2 = new trd2();
                thread2.start();
            //BufferedWriter bw;<-----------------------------------------------
            }
        else if(e.getActionCommand() == "Stop"){
            butt.setLabel("Start");
            butt_pass.setEnabled(false);
            butt_sUp.setEnabled(false);
            butt_sDown.setEnabled(false);
            butt_refuel.setEnabled(false);
            butt_pass.setLabel("Passenger In");

            thread1.stop();
        }
        else if(e.getActionCommand() == "Speed Up"){
            if(speedVal == 0){
                speedVal+=25;
                speed.setText(String.valueOf(speedVal) + " kph");
                butt_sDown.setEnabled(true);
                tf_speed.setText("Speed");
                thread1 = new trd1();
                thread1.start();
            }
            else if(speedVal == 275){
                speedVal+=25;
                speed.setText(String.valueOf(speedVal) + " kph");
                //butt_sUp.setEnabled(false);
                tf_speed.setText("MAX SPEED");
            }
            else{
                speedVal+=25;
                speed.setText(String.valueOf(speedVal) + " kph");
                }
        }
        else if(e.getActionCommand() == "Speed Down"){
            repaint();
            if(speedVal==25){
                speedVal-=25;
                speed.setText(String.valueOf(speedVal) + " kph");
                tf_speed.setText("S T O P P E D");
                butt_sDown.setEnabled(false);
            }
            else if(speedVal == 300){
                speedVal-=25;
                speed.setText(String.valueOf(speedVal) + " kph");
                tf_speed.setText("Speed");
                butt_sUp.setEnabled(true);
            }
            else{
                speedVal-=25;
                speed.setText(String.valueOf(speedVal) + " kph");
            }
        }
        else if(e.getActionCommand() == "Passenger In"){
            butt_pass.setLabel("Passenger Out");
            fareVal = 40.0f;
            fare.setText("Php " + String.valueOf(fareVal));
            butt_sUp.setEnabled(true);
            butt_sDown.setEnabled(true);
            butt_refuel.setEnabled(true);
            speedVal = 25;
            speed.setText(String.valueOf(speedVal) + " kph");
            status = "OCCUPIED";
                thread1 = new trd1();
                thread1.start();

        }
        else if(e.getActionCommand() == "Passenger Out"){
            status = "VACANT";
            butt_pass.setLabel("Passenger In");
            thread1.stop();
        }
        else if(e.getActionCommand() == "Refuel"){
            if(fuelVal == 0.0f){
                fuelVal = 50.00f;
                fuel.setText(String.valueOf(fuelVal));
                tf_fuel.setBackground(Color.cyan);
                tf_fuel.setText("Fuel");
                        fuel_width = (int)((getWidth()-34)*fuelVal/50f);
                thread1 = new trd1();
                thread1.start();
            }
            else{
                fuelVal = 50.00f;
                fuel.setText(String.valueOf(fuelVal) + " L");
            }
        }
    }

    public class trd1 extends Thread implements Runnable {

        public void run(){
            if(fuelVal>0.00f || speedVal>0){
                for(;;){
                    try {
                        Thread.sleep(50000/speedVal);
                        if(fuelVal == 0.00f || speedVal == 0)
                            thread1.stop();
                        distanceVal++;
                        fareVal += 1.00;
                        fuelVal -=.25f;
                        fuel_width = (int)((getWidth()-34)*fuelVal/50f);
                        repaint();
                        distance.setText(String.valueOf(distanceVal)+" km");
                        fuel.setText(String.valueOf(fuelVal)+" L");
                        fare.setText("P " + String.valueOf(fareVal));
                    } catch (InterruptedException e) {
                    }
                }
            }
            }
        }
    public class trd2 extends Thread implements Runnable {
        //tf_fuel = new JTextField(15);

        public void run(){
                for(int b = 0;;b++){
                    try {
                        Thread.sleep(10);
                        status_width +=1;
                        if(status_width == getWidth())
                            status_width = -330;
                        repaint();
                        if(fuelVal == 0.0f){
                            if(b%2==0){
                                tf_fuel.setBackground(Color.red);
                                tf_fuel.setText("R E F U E L");
                                }
                            else{
                                tf_fuel.setBackground(Color.cyan);
                                tf_fuel.setText("R E F U E L");
                                }
                        }
                    } catch (InterruptedException e) {
                    }
                }

        }
    }
} 
```

是的，我猜对了：你直接在 JApplet 中绘画。正如我最初所说，不要那样做。实际上，学习正确执行此操作的最佳选择是阅读教程：

*   [课程：执行自定义绘画（基础）](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)
*   [在 AWT 和 Swing 中绘画（用于更高级的概念）](http://www.oracle.com/technetwork/java/painting-140037.html)

您的代码中还有很多其他错误，其中一些很重要，包括使用 == 比较字符串而不是`equals(...)`or`equalsIgnoreCase(...)`方法，以及尝试`Thread#stop()`直接调用。永远不要那样做。也不要在paint 或paintComponent 中设置组件的边框。此外，您正在后台线程内和 Swing 事件线程之外设置组件的文本和背景颜色——这两个可能导致间歇性和难以调试线程错误的原因。您只想在 Swing 事件线程上做这些事情。

# r - 为什么对象是矢量？

> ID：11597175
> 
> 赞同：2
> 
> 时间：2012-07-22T01:39:52.140
> 
> 标签：r

```
> x=c(1,2,3,4,5)  
> x1=list(n1=1,n2=2,n3=x)  
> is.vector(x1) 
```

[1] 对

```
> is.list(x1) 
```

[1] 对

为什么 is.vector(x1)=true？我不明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T02:00:32.037

从`?is.vector`

> 如果 mode = "any"，is.vector 可能为原子模式、列表和表达式返回 TRUE。

`mode`如果您不想`is.vector`退货`TRUE`，您可以指定`list`

```
> is.vector(x1, mode='numeric')
[1] FALSE

> is.vector(x, mode='numeric')
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T01:58:40.223

```
> is.atomic(x1)
[1] FALSE 
```

从[R 语言定义](http://cran.r-project.org/doc/manuals/R-lang.html#List-objects)来看，列表是*通用向量*，但不是*原子向量*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T01:57:35.857

R中的向量是有序的东西集合。在这种情况下的东西是

```
> mode(x1)
[1] "list" 
```

从帮助文件

如果 x 是指定模式的向量，除了名称之外没有其他属性，is.vector 返回 TRUE。

```
> attributes(x1)
$names
[1] "n1" "n2" "n3" 
```

如果我们要给 x1 另一个属性：

```
levels(x1)<-1:3

> x1
$n1
[1] 1

$n2
[1] 2

$n3
[1] 1 2 3 4 5

attr(,"levels")
[1] 1 2 3

> is.list(x1)
[1] TRUE

> is.vector(x1)
[1] FALSE 
```

它仍然是一个列表，但现在不是向量

来自[S 的简史“S](http://cm.bell-labs.com/stat/doc/94.11.ps)中的基本数据结构是相似元素的向量：数字、字符串或逻辑值。尽管 S 对象的属性概念直到 1988 年版本才明确实现，从开头的 S 认识到数据的主向量通常伴随着描述数据特殊属性的其他值。例如，矩阵只是一个数据向量以及一个名为 Dim 的辅助向量，它告诉维数（行和列）。类似地，时间序列有一个 Tsp 属性来告诉开始时间、结束时间和每个周期的观察次数。这些具有属性的向量被称为向量结构，这将 S 与大多数其他系统区分开来。

大概它在作为 S 的实现的 R 中是相似的，因此这些向量结构不被指定为向量。

# sql - SQL 选择 medicalExamDate 并添加年份和月末

> ID：11597176
> 
> 赞同：0
> 
> 时间：2012-07-22T01:40:00.077
> 
> 标签：sql, sql-server, date

```
SELECT medicalDate
FROM PilotMedical
WHERE pilotID = '1' 
```

这将获得体检的日期。但是，我需要在此体检到期时返回，即自该日期起一年，以及该月的最后一天。例如，如果我在 2012 年 1 月 12 日接受体检，它将在 2013 年 1 月 31 日到期。

medicalDate 是一个“日期”类型。

我怎样才能在 SQL 中做到这一点？基本上我想让它在 2012 年 1 月的任何时候返回 2013 年 1 月 31 日进行体检。

如果没有，我想我可以在 VB 中做到这一点。我对学习如何在 VB 中做到这一点更感兴趣，因为我不打算在我的余生中使用 VB

编辑：

这将获得该月的最后一天

```
--Last Day of Any Month and Year
DECLARE @dtDate DATETIME
SET @dtDate = '8/18/2007'
SELECT DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,@dtDate)+1,0))
LastDay_AnyMonth

ResultSet:
LastDay_AnyMonth
———————–
2007-08-31 23:59:59.000 
```

现在正在寻找如何为此添加一年

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:03:58.200

这演示了一种方法：

```
DECLARE @OrigDate datetime
DECLARE @NewDate datetime

SET @OrigDate = '1/12/2012'

SET @NewDate = DATEADD(Day, -1, DATEADD(Month, 1, Cast(CAST(Month(@OrigDate) as varchar) + '/1/' + CAST((Year(@OrigDate)+1) as varchar) as datetime))) 
```

第 1 步：在下一年的同月创建一个新日期，但在 1 日。

第 2 步：增加一个月

第 3 步：减去一天

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T02:02:12.653

```
SELECT DATEADD(dd, -DAY(DATEADD(m,1,'2012-01-12')), DATEADD(m,13,'2012-01-12')) expirationDate 
```

输出

2013-01-31 00:00:00.000

# php - jQuery 或 PHP：比较文档

> ID：11597179
> 
> 赞同：0
> 
> 时间：2012-07-22T01:41:00.890
> 
> 标签：php, jquery, compare, documents

只是想知道是否有人可以推荐一个允许文档比较的工具（jquery 或 php）？文档存储在 MySQL 中（如果相关）。

我用谷歌搜索了它，发现了一些东西（看起来 jquery 有一些东西，但它正在开发中？）。无论如何，也许我的搜索条件不是很好，所以，希望得到一些建议......

**编辑作为后续行动......我最终使用了[http://code.google.com/p/google-diff-match-patch/wiki/API](http://code.google.com/p/google-diff-match-patch/wiki/API) 它又快又简单！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:52:06.513

这是一个方便的 javascript 库，用于逐行查找差异并在 html 中查看它们

[https://github.com/cemerick/jsdifflib](https://github.com/cemerick/jsdifflib)

# iphone - 其中一个内部调度表。在 addTarget:action:forControlEvents:

> ID：11597180
> 
> 赞同：1
> 
> 时间：2012-07-22T01:41:22.023
> 
> 标签：iphone, uiapplication, uicontrol

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/cl/UIControl](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/cl/UIControl)

addTarget:action:forControlEvents：将特定事件（或多个事件）的目标和操作添加到内部调度表。

我无法理解调度表。

UIControl 或 UIApplication 或其他地方的表？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:34:46.757

来自“Matt Neuburg (O'Reilly) 编写的 iOS 5 编程”

> 控件维护一个内部调度表：对于每个控件事件，都有一些目标-动作对，其中*动作*是一个选择器（方法的名称），*目标*是该消息要发送到的对象. 当一个控件事件发生时，控件查询它的调度表，找到与该控件事件相关的所有目标-动作对，并将每个动作消息发送到相应的目标。

![在此处输入图像描述](../Images/d7597d1246c018af39c27ca2799f106f.png)

# windows - 证书存储

> ID：11597182
> 
> 赞同：1
> 
> 时间：2012-07-22T01:42:07.187
> 
> 标签：windows, certificate, store

我知道 Windows 证书存储存在于注册表中的 SystemCertificates 键 (\SOFTWARE\Microsoft\SystemCertificates)。但我想知道这些商店是否有一些文件？他们的位置在哪里？其次，私钥在哪里，在注册表中还是在文件中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:47:12.583

私钥通常在文件系统上，但它们由操作系统加密。通常位于 c:\ProgramData\Microsoft\Crypto （或旧操作系统上的等效项）。

# javascript - 如何获取 DOM 对象的所有可能的 HTML 属性和 CSS 属性，甚至是未设置的？

> ID：11597194
> 
> 赞同：2
> 
> 时间：2012-07-22T01:44:40.757
> 
> 标签：javascript, html, css, dom

我已经多次看到有关获取 DOM 对象的 HTML 属性的问题/回答，但我无法找到有关如何获取对象的所有可能的 HTML/CSS 属性/属性的答案。

示例 - 这将提醒 ID 为“right_div_label”的对象的所有已设置 HTML 属性。

```
<label id='right_div_label' class='label_class' name='div_label' style='font-size: 12pt'>Label</label>

$(function () {
        $("#right_div_label").on("click", function() {
                alert($(this).attr('id'));
                var arr = [];
                for (var i = 0, attrs = $(this)[0].attributes, l = attrs.length; i < l; i++){
                    arr.push(attrs.item(i).nodeName);
                }
                alert(arr);
            }
        );
    }); 
```

输出看起来像 - “id, class, name, style”

现在，如果我想要标签标签可能拥有的所有可能的 HTML 属性怎么办？如果我想知道“dir”、“lang”、“title”等所有标准属性怎么办？有没有办法根据每个标签弄清楚所有这些是什么？我可以给上面的函数提供任何特定的标签，让它吐出类似“这个标签支持以下属性-x、y、z”的东西吗？那么 CSS 属性呢，你能即时找出那些吗？

# php - ereg_replace 或 preg_replace 函数

> ID：11597197
> 
> 赞同：2
> 
> 时间：2012-07-22T01:45:31.393
> 
> 标签：php, preg-replace, ereg-replace

我想`$key`用空字符串替换变量第 12 位的任何数字字符：`$key`变量有 12 个字符 + 递增的数字字符。例如：

```
IODN4YFK5XKV1
GYDN4YFK5XKV2
P3FU4YFK5XKV3 
```

贝娄是我当前的 php 代码行：

```
$data = ereg_replace( "[0-9]+$", "", $_REQUEST['code'] ); 
```

问题：如果我`$key = HXGE1SR9OWM428`的 ，最后 3 位数字 (428) 将被删除，但我只想删除第 12 位的数字，这样我的结果将是`$data = HXGE1SR9OWM4`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:59:36.827

为什么不使用`substr()`？

```
 $data = substr($_REQUEST['code'], 0, 12); 
```

仅供参考，`ereg_*`在较新版本的 PHP 中已弃用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:30:23.780

使用 deprecated`ereg_*`如您的问题所示，您将执行以下操作：

```
$data = ereg_replace('^([A-Z0-9]{12})[0-9]+', '\1', $_REQUEST['code']); 
```

如果模式中需要包含小写字母，只需更改`ereg_replace`为`eregi_replace`.

但是，更好的方法是改用`preg_*`函数组：

```
$data = preg_replace('/^(\w{12})\d+$/', '$1', $_REQUEST['code']); 
```

同样，对于小写字母，只需`i`在模式的末尾添加，所以它是`'/^(\w{12})\d+$/i'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T01:59:52.873

你可以这样做： *我正在使用 preg_replace 代替。

```
$data = preg_replace( "/^([\w]{12})[0-9]+$/", "$1", $_REQUEST['code'] ); 
```

# multithreading - 压力测试服务器处理请求

> ID：11597203
> 
> 赞同：1
> 
> 时间：2012-07-22T01:46:43.473
> 
> 标签：multithreading, yii, request, connection-pooling

首先，我想对我的服务器 [ `xeon(2x)2.53ghz, 4gb ram`] [ `build by Yii`] 进行压力测试，这是一个稳定的条件：
1- 创建新记录 -- 大约 200
2- 更新数据库 -- 大约 250
3- 查询数据库 -- 大约 300
如果我使用请求范围在那个数字上，我得到的请求状态是`null`。
我还有另一个测试`don't use db`[它只是向服务器和服务器发送一个帖子名称`echo`] - 我发送了大约 1000 个线程请求，成功请求的数量约为 800，其余为`null`.
所以，请大家帮帮我，关于请求的数量是合适还是非常低，以及如何克服`null`请求响应
[ `tool test: I built a simple project by objective-C`]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:24:54.780

你试过`ab`吗？Apache 基准测试工具 ?

```
$ ab -n 200 -c 5 http://myhost/the/page/that/creates/the/records
$ ab -n 250 -c 5 http://myhost/the/page/that/updates/the/records
$ ab -n 300 -c 5 http://myhost/the/page/that/queries/the/records 
```

# node.js - 使用正则表达式搜索时 MongoJS 不返回数据

> ID：11597205
> 
> 赞同：1
> 
> 时间：2012-07-22T01:46:54.503
> 
> 标签：node.js, mongodb, mongojs

Node.js、[mongojs](https://github.com/gett/mongojs)、mongodb。我正在使用正则表达式搜索技能列表。这是我的服务器代码：

```
var nconf = require('nconf');
var db = require('mongojs').connect(nconf.get('mongolab:connection'), ['skills', 'users']);

app.get('/api/skill', function(req, res){
    console.log('searching for ' + req.query['q']);

    var query = '{name: /' + req.query['q'] + '/i}';
    console.log('query: ' + query);
    db.skills.find(query, function(err, data){
        console.log('returning ' + JSON.stringify(data));
        if(!err){
            res.writeHead(200, {'content-type': 'text/json' });
            res.write( JSON.stringify(data) );
            res.end('\n');
        }   
    });

}); 
```

我的列表中确实有一个“asp.net”的值。控制台日志输出如下：

```
searching for .net
query: {name: /.net/i} 
returning [] 
```

我使用 MongoHub 连接到同一个服务器/数据库，将语句粘贴到查询字段中，然后取回我的记录：

```
{
    "name": "asp.net",
    "description": "",
    "_id": {
        "$oid": "500b4aae14f7960e91000001"
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T01:52:09.103

`query`必须是一个对象，而不是一个字符串。试试这个：

```
var query = {name: new RegExp(req.query['q'], 'i') }; 
```

# android - 跨平台实时数据

> ID：11597207
> 
> 赞同：0
> 
> 时间：2012-07-22T01:47:15.953
> 
> 标签：android, ios, push, real-time

我正在做一个艰苦的项目，需要将数据通知从后端服务器推送到 ios、android 客户端和浏览器。根据目前的情况，有以下选择 1)COMET 风格的推送服务器 2)Socket 服务器 3)Websocket

只是想知道哪一个是这种情况的最佳选择。欢迎在这里讨论rela time push data，以了解更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:24:39.350

您是否考虑过使用后端即服务提供商，例如 Kinvey？我知道他们可以使推送通知更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:27:27.073

正在寻找在移动设备上打开和使用应用程序时推送更新的解决方案？PubNub (www.pubnub.com) 为所有主要平台提供发布订阅 API。您可以使用它将数据推送到移动、Web 和桌面客户端。它适用于所有浏览器，并且可以绕过代理。它还具有处理丢失信元信号的能力，方法是将消息存储在历史队列中，然后在设备重新上线后传递这些消息。您可以在此处找到所有教程和文档：[http](http://www.pubnub.com/devcenter) ://www.pubnub.com/devcenter 。（免责声明 - 我为 PubNub 工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T05:34:50.580

根据您推送到 iOS 的有效负载的大小，您实际上可能能够使用 Apple 推送通知并为自己省去一些开发难题。

# clojure - 如何将此代码从 common lisp 转换为 clojure

> ID：11597208
> 
> 赞同：2
> 
> 时间：2012-07-22T01:47:17.557
> 
> 标签：clojure, common-lisp

在常见的 lisp 中，我可以将多个`defun`放在同一个闭包中并让它们全部设置函数。

```
(let ((number 0))
  (defun get-number () number)
  (defun set-number ( arg ) (setq number arg))) 
```

但是，如果我在 clojure 中使用相同的语法，只有最后一个函数最终会被定义。

```
(let [ number 0 ]
  (defn get-number [] number)
  (defn set-number [ arg ] (def number arg))) 
```

有没有办法将此代码转换为 clojure，以便您可以访问这两个函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T05:09:20.820

[user593508](https://stackoverflow.com/a/11597530/214010)在直译方面给出了很好的答案。

但它在 Clojure 中有点不习惯，不鼓励使用封装在副作用的 setter 和 getter 函数后面的数据。Clojure 倾向于强调纯函数，以及通过托管引用对状态的显式控制（请参阅[Rich Hickey 撰写的关于数据结构和托管引用的精彩视频](http://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey)）

另一种方法是直接使用原子来存储可变数字：

```
(def number (atom 0))

@number
=> 0

(swap! number + 5)
=> 5

@number
=> 5 
```

除了更简洁和更惯用的 Clojure 之外，您还可以获得额外的优势，即`swap!`可以对原子的值执行任意函数，而不仅仅是获取和设置（参见上面 +5 的示例）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T03:14:46.240

这是您的代码的一种可能的翻译 - get-number 函数是可访问的。

```
(let [number (atom 0)]
  (defn get-number []
    @number)
  (defn set-number [arg]
    (reset! number arg)))

(get-number) => 0
(set-number 5)
(get-number) => 5 
```

# python - 如果变量 V 为 1，Python 赋值 X，如果为 43，则为 Y，

> ID：11597209
> 
> 赞同：-3
> 
> 时间：2012-07-22T01:47:25.723
> 
> 标签：python

我有一个变量 V 取值 { 1, 43, ... }，我想根据 V 所取的确切值分配给变量 Z 值 { X1, X2, ... }。示例：如果 V 为 1，则 Z 为 X1。如果 V 出乎意料地不是定义值集的一部分，则行为可能是“未定义的”。

基本上，我不知道如何在 Python 中执行 switch 语句。在手册中，我没有找到“开关”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:49:33.130

```
z_values = {
    1: X1,
    42: X2,
    }

Z = z_values[V] 
```

如果 V 不是有效值之一，您还没有说您想要发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T01:49:41.787

```
if v == 1:
    z = 'x1'
elif v == 42:
    z = 'x2' 
```

除非我完全误解了你想要什么，否则你是在要求一个简单的 if 语句......？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T01:54:53.520

如果它是一个简单的“If X then Y else Z”（`x ? y : z`在许多其他语言中），那么这应该有效：

```
target = y if x else z 
```

如果你想要的基本上是一个开关，那么这样的东西应该可以工作：

```
def func_x():
    print "x"
def func_y():
    print "y"
def func_z():
    print "z"
def default():
    print "nope"
{
    "x": func_x,
    "y": func_y,
    "z": func_z
}.get(input, default)() 
```

# objective-c - segue 对象时是否传递了属性？

> ID：11597216
> 
> 赞同：0
> 
> 时间：2012-07-22T01:50:55.860
> 
> 标签：objective-c, xcode, properties, segue

我有一个我想在两个 MVC 之间切换的对象。第一个 MVC 中的属性是否与对象一起被 segued，或者只是方法。IE：如果我有一个值为 5 的 int 属性，然后执行传递对象的 segue。我的新 MVC 是否可以访问此属性和值 5？还是只能访问传递的对象方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T04:42:04.747

不。遗憾的是，属性并没有神奇地通过 segues 自己（还）。

你应该做的是`prepareForSegue:sender:`在你的视图控制器中覆盖。然后您可以使用`[segue destinationViewController]`. 一旦你有了对视图控制器的引用，你就可以设置它的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T04:42:11.860

在 segue 中，不会在目标 viewController 上传递或设置属性。如果你想让你的目标 viewController 使用一个对象（类的实例）或一些简单的变量，你必须在你的目标 viewController 类中定义那个属性，然后设置它`prepareForSegue:`例如，在下面的代码位中，目标 viewController 有一个属性“sectionToShow”，并且正在调用该属性的设置器。

另一种方法是为目标 viewController 定义一个委托并以相同的方式设置它。然后目标 viewController 可以调用方法并访问委托的属性。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    NSString* identifier = segue.identifier;

    if([identifier isEqualToString:@"userGuideSegue_home"]){
        UserGuideViewController* vc = segue.destinationViewController;
        [vc setSectonToShow:@"Home Screen"];
    }
} 
```

# java - 什么是 VMObject？

> ID：11597222
> 
> 赞同：0
> 
> 时间：2012-07-22T01:52:10.820
> 
> 标签：java

[我正在阅读类路径项目http://fuseyism.com/classpath/doc/](http://fuseyism.com/classpath/doc/)中的 Object 类的源代码，并且在 wait() 和其他方法中有对 VMObject 的引用。

```
public final void wait()
throws IllegalMonitorStateException, InterruptedException {
   VMObject.wait(this, 0, 0);
} 
```

我尝试在 Google 上搜索答案并在#java 频道上提问，但没有人有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T03:41:23.853

那么在[OpenJDK](http://www.docjar.com/html/api/java/lang/Object.java.html) `wait()`中看起来是这样的：

```
public final native void wait(long timeout) throws InterruptedException; 
```

使用谷歌我找到了[VMObject的代码](http://www.doc.ic.ac.uk/~awl03/cgi-bin/trac.cgi/miro/browser/trunk/gcc/libjava/classpath/vm/reference/java/lang/VMObject.java?rev=31)

在那里，`VMObject.wait()`看起来像这样：

```
static native void wait(Object o, long ms, int ns) throws IllegalMonitorStateException, InterruptedException; 
```

我只是猜测，但我认为 VMObject 是特定于 GNUClassPath 的实现细节，出于某种未知原因，他们决定不直接在“对象”上使用本机调用，而是决定在静态本机调用中增加一层抽象此“VMObject”类中的方法。}

来自[Java 语言和虚拟机规范](http://docs.oracle.com/javase/specs/#8.4.3.4)：

> 本机方法是在依赖于平台的代码中实现的，通常用另一种编程语言编写，例如 C、C++、FORTRAN 或汇编语言。本机方法的主体仅以分号形式给出，表示省略了实现，而不是块。

如果您想了解更多关于什么是原生方法，可以阅读[这篇](http://www.javaworld.com/javatips/jw-javatip23.html)文章。

# php - 通过浏览器更新 PHP 配置？

> ID：11597223
> 
> 赞同：1
> 
> 时间：2012-07-22T01:52:35.267
> 
> 标签：php

我正在创建我的第一个 CMS 风格的网站，还有很多路要走，但我想知道：我可以通过 php 脚本更新 php 配置文件吗？

例如：

```
<?php
$forum="1";
$about="1";
$register="0";
?>

<?php    
if ($about==("1"))
    echo '<a href="about.php">About Us</a>';
if ($forum==("1"))
    echo '<a href="forum.php">Forum</a>';
if ($register==("1"))
    echo '<a href="register.php">Register</a>;
?> 
```

我想创建一个脚本，当我以管理员身份登录网站时，我可以更新第一组以更改不同页面的值，以便我可以选择显示的内容和不显示的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:00:16.187

要开始使用 CMS，您需要学习如何与数据库交互。如果您希望能够创建管理部分和编辑内容，数据库是最佳选择。

这是一个网站链接，当我开始时对我非常有价值

[PHP初学者](http://devzone.zend.com/6/php-101-php-for-the-absolute-beginner/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T05:45:50.680

在大多数情况下，我同意@uzyn 和@Ibu - 最好了解有关使用数据库的更多信息，然后将其用于您的配置数据。话虽如此，为了完整起见，我提供以下内容。但是请注意，这种方法存在安全问题。

我创建了三个文件：配置文件，名为 config.cfg；一个用于显示配置的 PHP 文件，名为 show_config.php；以及另一个名为 write_config.php 的 PHP 文件，用于保存配置更改，然后调用 show_config.php 重新显示配置。所有这些都过于简单化并出现在下面。

**[配置.cfg]**

```
cfg_data: 42 
```

**[show_config.php]**

```
<html>
<head>
<title>Configuration</title>
</head>
<body>
<?php
$cfg_name = "config.cfg";
$cfg_data = file_get_contents($cfg_name);
$lines = explode("\n", $cfg_data);
$cfg_vals = explode(":", $lines[0]);
$cfg_value = trim($cfg_vals[1]);
?>
<form action="write_config.php">
Configuration Value: <?php echo "<input type=\"text\" name=\"config_val\" value=\"$cfg_value \" >" ?> </input>
<br>
<input type="submit">
</form>
</body>
</html> 
```

**[write_config.php]**

```
<?php
$cfg_name = "config.cfg";
$new_data = "cfg_data: " . $_REQUEST['config_val'];
if (file_exists($cfg_name)) {
  unlink($cfg_name);
}
try {
  file_put_contents($cfg_name, $new_data);
} catch (Exception $e) {
  echo "Exception caught!  " . $e -> getMessage() . "<br> \n";
}
header("Location:show_config.php");
$cfg_name = "config.cfg";
$new_data = "cfg_data: " . $_REQUEST['config_val'];
if (file_exists($cfg_name)) {
  unlink($cfg_name);
}
try {
  file_put_contents($cfg_name, $new_data);
} catch (Exception $e) {
  echo "Exception caught!  " . $e -> getMessage() . "<br> \n";
}
header("Location:show_config.php");
?> 
```

请注意，为了使其正常工作，必须将 config.cfg 上的权限设置为 o:rwx（使用`> chmod o+wx config.cfg`），这是安全问题之一。此外，此代码不进行输入清理。如果你真的会使用这样的东西，你应该在保存任何东西之前检查并清理所有用户输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T01:59:32.240

为此，您必须使用存储或数据库。将配置存储在可编辑的地方。

这是一个使用文件的示例：

```
<?php
$forum = file_get_contents('forum');
$about = file_get_contents('about');
$register = file_get_contents('register'); 
```

然后，您可以创建一个管理模块，将这些设置写入相应的文件，如下所示：

```
<?php 
// Admin, overwriting configurations

file_put_contents('forum', 1); // should the admin choses to enable Forum.
file_put_contents('about', 1); // should the admin choses to enable About Us.
file_put_contents('register', 0); // should the admin choses to disable Register.

//... etc for the rest of the modules 
```

# ios - 谁首先捕获了 UIControlEventTouchDown？

> ID：11597224
> 
> 赞同：1
> 
> 时间：2012-07-22T01:53:05.773
> 
> 标签：ios, controls

第一个 UIApplication 还是 Control？

在我认为第一个是 UIApplication 之前。但现在我想也许第一个是 Control 。

依据如下：

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/cl/UIControl](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/cl/UIControl)

sendAction:to:forEvent：响应给定事件，将操作消息转发给应用程序对象，以便分派到目标。

这使我相信 UIControl 在 application 之前首先获得 Control Event。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:46:41.990

UIEvent 类和 UIControlEvent 常量不是一回事。事件对象封装有关触摸序列的信息，控件事件是 UIControl 对其范围内的特定触摸序列的解释。

顺序是：

1.  操作系统接收 UIEvent 对象并将其传递给 UIApplication。
2.  `[UIApplication sendEvent:]`将事件传递到关键窗口
3.  `[UIWindow sendEvent:]`将（触摸）事件传递到命中测试视图
4.  `[UIView touches...]`事件处理方法调用

    UIControl 对象解释触摸并确定 UIControlEvent 常量（如果有）

5.  `[UIControl sendAction:to:forEvent:]`被调用一次或多次

6.  `[UIApplication sendAction:to:from:forEvent:]`叫做
7.  对目标执行操作

所以 UIEvent 以 UIApplication 开头，但 UIControlEvent 以 UIControl 开头。

# objective-c - 使用 Delegate 监听变化 - 核心数据

> ID：11597226
> 
> 赞同：1
> 
> 时间：2012-07-22T01:53:22.830
> 
> 标签：objective-c, ios, core-data, delegates, nsfetchedresultscontroller

我有一个从 Web 服务接收定期更新的核心数据实体。当这个核心数据实体改变它的内容时，我希望在我的一个视图控制器类上调用一个委托方法。这样我就能够更新该视图控制器上的适当数据。我将如何去做这件事。

这类似于 NSFetchedResultsController 在核心数据内容更改时向表视图发送委托消息，但我不希望在这种情况下使用 NSFetchedResults 控制器。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T02:01:09.573

如果我是你，我实际上会做一些委托以外的事情：我会使用通知。

您可以观察“NSManagedObjectContextDidSaveNotification”，当它保存来自您的 Web 服务的更改时，您可以在视图控制器中排队活动。

所以，假设你想在创建视图控制器时开始这个观察，并在视图控制器完成时完成：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(managedObjectContextDidSave:) name:NSManagedObjectContextDidSaveNotification object:nil];
    }
    return self;
}

- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

然后你需要做的就是观察变化：

```
- (void)managedObjectContextDidSave:(NSNotification *)notification {
    // Update your stuff here.
} 
```

# android - 如何创建 XML 可绘制项目的选择器？

> ID：11597230
> 
> 赞同：1
> 
> 时间：2012-07-22T01:55:18.820
> 
> 标签：android, selector, xml-drawable

我有以下可绘制文件 button.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/button_down" android:state_enabled="true" android:state_pressed="true"/>
    <item android:drawable="@drawable/button_up" android:state_enabled="true" android:state_pressed="false"/>
</selector> 
```

这两个项目都是 XML 可绘制的，它们都单独工作：button_down.xml 和 button_up.xml。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
    <corners android:radius="10dp" />
    <gradient
        android:angle="90"
        android:centerColor="#FFBD21"
        android:endColor="#FFAE18"
        android:gradientRadius="60"
        android:startColor="#FFD060"
        android:type="linear"
        android:useLevel="false" />
</shape>

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
    <corners android:radius="10dp" />
    <gradient
        android:angle="90"
        android:centerColor="#FFBD21"
        android:endColor="#FFD060"
        android:gradientRadius="60"
        android:startColor="#FFAE18"
        android:type="linear"
        android:useLevel="false" />
</shape> 
```

但是当用作选择器的项目时出现以下错误。是否允许 XML 可绘制对象作为选择器的项目？

```
org.xmlpull.v1.XmlPullParserException: Binary XML file line #4: <item> tag requires a   'drawable' attribute or child tag defining a drawable
at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:178)
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:867)
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:804)
at com.android.layoutlib.bridge.impl.ResourceHelper.getDrawable(ResourceHelper.java:208)
at android.content.res.BridgeTypedArray.getDrawable(BridgeTypedArray.java:774)
at android.view.View.<init>(View.java:2785)
at android.widget.TextView.<init>(TextView.java:449)
at android.widget.Button.<init>(Button.java:108)
at android.widget.Button.<init>(Button.java:104)
at sun.reflect.GeneratedConstructorAccessor17.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at android.view.LayoutInflater.createView(LayoutInflater.java:586)
at android.view.BridgeInflater.onCreateView(BridgeInflater.java:86)
at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:131)
at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:739)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:742)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:742)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:742)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:742)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:742)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:742)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:372)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:321)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:322)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1317)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1071)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.onXmlModelChanged(GraphicalEditorPart.java:1033)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditor.xmlModelChanged(LayoutEditor.java:317)
at com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor$XmlModelStateListener.modelChanged(AndroidXmlEditor.java:1405)
at org.eclipse.wst.sse.core.internal.model.AbstractStructuredModel.fireModelChanged(AbstractStructuredModel.java:553)
at org.eclipse.wst.sse.core.internal.model.AbstractStructuredModel.internalModelChanged(AbstractStructuredModel.java:887)
at org.eclipse.wst.sse.core.internal.model.AbstractStructuredModel.changedModel(AbstractStructuredModel.java:382)
at org.eclipse.wst.xml.core.internal.document.DOMModelImpl.changedModel(DOMModelImpl.java:167)
at org.eclipse.wst.sse.ui.StructuredTextEditor.savedModel(StructuredTextEditor.java:2687)
at org.eclipse.wst.sse.ui.StructuredTextEditor.doSave(StructuredTextEditor.java:1690)
at com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor.doSave(AndroidXmlEditor.java:524)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditor.doSave(LayoutEditor.java:148)
at org.eclipse.ui.internal.SaveableHelper$2.run(SaveableHelper.java:151)
at org.eclipse.ui.internal.SaveableHelper$5.run(SaveableHelper.java:274)
at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
at org.eclipse.jface.window.ApplicationWindow$1.run(ApplicationWindow.java:759)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.jface.window.ApplicationWindow.run(ApplicationWindow.java:756)
at org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:2579)
at org.eclipse.ui.internal.SaveableHelper.runProgressMonitorOperation(SaveableHelper.java:282)
at org.eclipse.ui.internal.SaveableHelper.runProgressMonitorOperation(SaveableHelper.java:261)
at org.eclipse.ui.internal.SaveableHelper.savePart(SaveableHelper.java:156)
at org.eclipse.ui.internal.EditorManager.savePart(EditorManager.java:1357)
at org.eclipse.ui.internal.WorkbenchPage.savePart(WorkbenchPage.java:3328)
at org.eclipse.ui.internal.WorkbenchPage.saveEditor(WorkbenchPage.java:3341)
at org.eclipse.ui.internal.SaveAction.run(SaveAction.java:76)
at org.eclipse.jface.action.Action.runWithEvent(Action.java:498)
at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
at org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:452)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3910)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3503)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2405)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2369)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2221)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:500)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:493)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:113)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:194)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:368)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:559)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:514)
at org.eclipse.equinox.launcher.Main.run(Main.java:1311) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:27:24.013

这可能不是您想要的答案，但我有这个 button.xml 并且它有效。形状包含在`<item>`标签本身中。但是我还有另一个可绘制的 xml，它在标签中引用了非 PNG 可绘制对象`<item>`，它也可以工作。祝你好运。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" >
    <shape>
        <solid
            android:color="#565656" />
        <stroke
            android:width="1dp"
            android:color="#171717" />
        <corners
            android:radius="3dp" />
        <padding
            android:left="8dp"
            android:top="2dp"
            android:right="8dp"
            android:bottom="2dp" />
    </shape>
</item>
<item android:state_checked="true" >
    <shape>
        <solid
            android:color="#343434" />
        <stroke
            android:width="3dp"
            android:color="#767676" />
        <corners
            android:radius="3dp" />
        <padding
            android:left="8dp"
            android:top="2dp"
            android:right="8dp"
            android:bottom="2dp" />
    </shape>
</item>        
<item>
    <shape>
        <gradient
            android:startColor="#565656"
            android:endColor="#262626"
            android:angle="270" />
        <stroke
            android:width="1dp"
            android:color="#171717" />
        <corners
            android:radius="4dp" />
        <padding
            android:left="8dp"
            android:top="2dp"
            android:right="8dp"
            android:bottom="2dp" />
    </shape>
</item> 
```

# jquery - 为什么我的 POST 请求被解释为 GET？

> ID：11597234
> 
> 赞同：2
> 
> 时间：2012-07-22T01:56:57.920
> 
> 标签：jquery, ruby-on-rails, ajax

我在使用 Rails 3.2.6 和 JQuery 1.7.2 时遇到了一个令人费解的问题。

我一直在尝试向我的服务器发出 POST 请求，但由于某种原因，只有 GET 出现在我的日志中。

例如，当我在我的 Javascript 控制台中输入这个...

```
$.ajax({
  type: 'POST',
  url: 'trials'
}); 
```

...我的日志显示：

```
Started GET "/trials" for 127.0.0.1 at 2012-07-21 21:43:17 -0400
Processing by TrialsController#index as JSON
  Trial Load (0.2ms)  SELECT "trials".* FROM "trials" 
Completed 200 OK in 88ms (Views: 2.7ms | ActiveRecord: 1.1ms) 
```

我检查了`rake routes`，但它清楚地表明 POST 应该是`trials#create`，而不是`trials#index`：

```
 trials GET    /trials(.:format)          trials#index
           POST   /trials(.:format)          trials#create
new_trial GET    /trials/new(.:format)      trials#new
edit_trial GET    /trials/:id/edit(.:format) trials#edit
     trial GET    /trials/:id(.:format)      trials#show
           PUT    /trials/:id(.:format)      trials#update
           DELETE /trials/:id(.:format)      trials#destroy 
```

我是网络开发的新手......所以......帮助！

这里发生了什么？

为什么我`POSTs`被转化为`GETs`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T02:26:22.593

嗯...所以我切换了浏览器，现在一切正常。几个月前，我一直在使用每晚构建的 WebKit。我升级到最新版本，现在一切正常。我猜这是一个 webkit 错误。呸！

# scala - 如何在 Scala 中更新数组？

> ID：11597237
> 
> 赞同：4
> 
> 时间：2012-07-22T01:57:34.670
> 
> 标签：scala

我有时仍然对 scala 偶尔的句法魔术感到困惑。

我想，那个写作

`array(5)`

只是一个捷径

`array.apply(5)`. （正如 Array 的文档中所写的那样。）

不过，我可以做的很开心

`array(5) = 3`

但我做不到

`array.apply(5) = 3`.

到底是怎么回事？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T02:10:00.697

`=`: 左边有不同的规则`a.x = b`被转换为`a.x_=(b)`（假设还有一个 x() 方法） `a(i1,... in) = b`被转换为`a.update(i1...,in, b)`

`array(5) = 3`也是_`array.update(5,3)`

当然，对于数组，它直接编译为数组写入，中间没有方法调用。

# php - 用php反转mysql数据库结果

> ID：11597240
> 
> 赞同：1
> 
> 时间：2012-07-22T01:58:04.513
> 
> 标签：php, mysql, html

我从 mysql 数据库中的表中获取了大量数据并将其显示在页面上。代码看起来像这样。

```
<?php
$sql = "SELECT * FROM $table_name";
$result = mysql_query($sql);
while($rows = mysql_fetch_array($result)){
?>
<tr class="contact-content">
    <td><?php echo $rows['ID']; ?></td>
    <td><?php echo $rows['name']; ?></td>
    <td><?php echo $rows['email']; ?></td>
    <td><?php echo $rows['tel_home']; ?></td>
    <td><?php echo $rows['tel_mobile']; ?></td>
    <td><?php echo $rows['tel_work']; ?></td>
</tr>
<?php
}
?> 
```

它目前显示这样的结果

**1 | 詹姆斯 | 示例@example.com | 1234567 | 1234567 | 9876**

**2 | 安娜 | 示例@example.com | 8768765 | 6543 | 9876**

但我想反转它并显示类似这样的结果，由那里 id 排序

**2 | 安娜 | 示例@example.com | 8768765 | 6543 | 9876**

**1 | 詹姆斯 | 示例@example.com | 1234567 | 1234567 | 9876**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T01:59:16.587

```
SELECT * FROM $table_name ORDER BY ID DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T01:59:24.897

使用以下查询之一：

按名称升序排列：

```
$sql = "SELECT * FROM $table_name ORDER BY name ASC"; 
```

按 ID 降序排列：

```
$sql = "SELECT * FROM $table_name ORDER BY ID DESC"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T02:29:23.497

看一下[`ORDER BY`](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)条款。

您正在寻找 DESCENDING 订单：

```
$sql = "SELECT * FROM $table_name ORDER BY ID DESC"; 
```

# node.js - 对 node.js 中的路径感到困惑

> ID：11597242
> 
> 赞同：1
> 
> 时间：2012-07-22T01:58:13.340
> 
> 标签：node.js, path

我是 Node.js 的新手，我读过“Manuel Kiessling”写的“The Node Beginner Book”一书。

但是本书没有涵盖的内容是所有*.js*文件都在同一个文件夹或同一个路径中。

例如，当创建一个博客项目并将其命名为博客时，我添加了 server.js、app.js。

我是否也必须将 node.exe 文件包含在同一文件夹中？或者我可以把它放在其他地方吗？

任何人都可以帮助或推荐一些关于 Node.js 中路径的文章。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:00:42.300

Node.exe 应该存在于它通常默认安装的默认位置。

无需将其包含在项目或类似的东西中。

只需要像这样运行程序

```
node server.js 
```

如果无法运行，请验证 PATH 环境变量。

去做这个，

打开命令提示符

然后发出命令`PATH`

搜索 NODE 变量和值

交叉检查值，即位置，如果设置错误，请将其正确指向安装 node.exe 的位置，就是这样...

愉快的探索...

# java - 为什么短类型参数的 Integer.toBinaryString 的结果包括 32 位？

> ID：11597244
> 
> 赞同：0
> 
> 时间：2012-07-22T01:58:27.953
> 
> 标签：java

我了解到一个短类型变量是一个 16 位有符号整数，但是

```
 short n = -1;

    System.out.println(Integer.toBinaryString(n)); 
```

输出：

```
11111111111111111111111111111111 
```

结果包括32位，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T01:59:41.813

原因是它`Integer`代表 32 位类型并`toBinaryString()`接受一个`int`参数。在调用该方法之前，您的`short`参数被提升为 an 。`int`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T02:00:46.030

你在调用时`short`被隐式转换为：`int``toBinaryString()`

```
public static String Integer.toBinaryString(int i) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T07:59:49.753

要打印可以使用的低 16 位。

```
System.out.println(Integer.toBinaryString(n & 0xFFFF)); 
```

对于零拍。

```
System.out.println(Integer.toBinaryString(0x10000 + (n & 0xFFFF)).substring(1)); 
```

# haskell - 哪种 KeyBoard / KeyBoard Layout 最适合 Haskell 编程？haskell 是否将所有数学符号作为函数？

> ID：11597246
> 
> 赞同：3
> 
> 时间：2012-07-22T01:58:48.287
> 
> 标签：haskell, emacs, unicode, keyboard, symbols

作为haskell 的绝对初学者，我一直在阅读有关haskell 的各种文章、pdf 和教程。大多数示例/示例代码都包含数学字符。即使是打字的常见任务

->

我必须输入： - & >

事实是我不知道如何在 emacs 中输入数学字符（我用于练习 haskell 编码）。我当前的键盘布局是“美国英语”。

是否有任何特定的键盘或键盘布局最适合输入数学符号（用于 haskell 编程）？

haskell 是否将所有数学符号作为函数？我目前的假设是，haskell 必须支持所有数学符号作为函数。

例如 +、-、/、* 等。

[Unicode 数学符号](http://www.vex.net/~trebla/symbols/select.html) 注意：这些符号出现在许多 haskell 论文中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T06:06:19.653

You do not have to use the fancy unicode symbols you see in papers--in place of → you can write `->` and so on for each special character. Given this, a normal US Qwerty layout is perfectly find for Haskell.

However, if you find the → style easier to read (but obviously *not* easier to type), you can have Emacs display code with those symbols instead. This is entirely cosmetic, like syntax highlighting: even though you see a →, the source code still has a `->` and that's still what you type. You can enable this as so:

```
(setq haskell-font-lock-symbols t) 
```

This symbol mode might make some of your indentation look a little odd. However, I've been using it for a while and have had no problems at all. I certainly like looking at my code more when it uses pretty symbols in place of ASCII surrogates.

So you still type `-``>` but it just looks prettier.

However, sometimes you *do* want fancy symbols like Greek letters. For example, if you're implementing an algorithm from a paper, it might make sense to keep the variable names the same. For this, you can use Emacs's TeX input mode via `C-\` and entering `TeX`. This will, for example, allow you to type `\lambda` and get a `λ`. To see the full list of symbols you can type, run `M-x describe-input-method` and then enter `TeX`.

Finally: Haskell *does* support all the "math symbols" like + and - as operators. In fact, any identifier made up of these characters is automatically infix. So you can actually define your own operators. You could write something like:

```
a +++ b = a * a + b * b 
```

and then you would be able to use the `+++` function in an infix position, like any other operator. I believe that Haskell determines which characters are "operator characters" by looking at its Unicode category, meaning you can define (and I actually have defined) operators like `×`.

In summary: you do not need any special symbols for Haskell code--it can all be ASCII. You can make Emacs render ASCII Haskell code *with* those symbols if you find them easy to read, and you can actually type them using the TeX input mode.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T06:07:43.297

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T02:04:54.173

我知道有一种用于[编程](http://www.kaufmann.no/roland/dvorak/)的 Dvorak 风格，但似乎学习新的键盘布局比简单地为你必须敲击的新组合键建立肌肉记忆更难。

# php - PHP更新MySQL循环

> ID：11597259
> 
> 赞同：-1
> 
> 时间：2012-07-22T02:01:05.963
> 
> 标签：php, mysql, arrays, loops, insert

我有以下代码，它使用用户 ID、值（喜欢或不喜欢）和提醒日期来更新我的数据库，只要用户“喜欢”比赛（这是一个帖子）。

$query 查看我的 userContests 表并存储它的全部内容。

userContests 表存储用户 ID、值（喜欢或不喜欢）、竞赛 ID 和提醒日期。

$getfreq 是一个包含值 123、234、345、456、567 的数组

我希望代码能够自行解释，我已尽力为您评论每个部分。这里的基本点是，如果 $getfreq 包含值 345，则使用提醒日期插入或更新我的数据库。

```
$userID = 1;
$value = 1;
$contestID = 1737;
if (($userID > 0) && ($contestID > 0) && ($value < 2)){
    $query = mysql_query("SELECT * FROM userContests WHERE userID='$userID' AND contestID='$contestID';") or die(mysql_error()); 

    $getfreq = mysql_query("
            SELECT wp_term_relationships.term_taxonomy_id 
            FROM wp_term_relationships 
            WHERE wp_term_relationships.object_id = $contestID
        "); 

    while ($row = mysql_fetch_assoc($getfreq)) {
        if ($value == 1){ // If the contest is liked
            if (mysql_num_rows($query) > 0) {  //if a value matching the userID and contest ID already exists in database
                 if ($row[term_taxonomy_id] == 345) { // if Daily entry, update the row with reminder date
                    echo "1";
                    mysql_query("UPDATE userContests SET value='$value', reminder= DATE_ADD(CURDATE(),INTERVAL 1 DAY) WHERE userID='$userID' AND contestID='$contestID';") or die(mysql_error());
                    $frequency = 'Daily';
                } else { // if anything other than above, insert the row with current date
                    echo "2";
                    mysql_query("UPDATE userContests SET value='$value', reminder= CURDATE() WHERE userID='$userID' AND contestID='$contestID';") or die(mysql_error());
                }
            } else { // if there is no previous row in database matching userID and contestID
                if ($row[term_taxonomy_id] == 345) { // if Daily entry, insert the row with reminder date
                    echo "3";
                    mysql_query("INSERT INTO userContests (userID, contestID, value, reminder) VALUES ('$userID', '$contestID', '$value', 'DATE_ADD(CURDATE(),INTERVAL 1 DAY)') ") or die(mysql_error());
                } else { // if anything other than above, insert the row with current date
                    echo "4";
                    mysql_query("INSERT INTO userContests (userID, contestID, value, reminder) VALUES ('$userID', '$contestID', '$value', CURDATE()) ") or die(mysql_error());
                }
            }
        } else if ($value == 0){ // if the value is disliked
            if (mysql_num_rows($query) > 0) {  //if a value matching the userID and contest ID already exists in database, simply update the row without reminder
                echo "5";
                mysql_query("UPDATE userContests SET value='$value' WHERE userID='$userID' AND contestID='$contestID';") or die(mysql_error());
            } else { // if there is no previous row in database matching userID and contestID, simply insert the row without reminder
            echo "6";
                mysql_query("INSERT INTO userContests (userID, contestID, value) VALUES ('$userID', '$contestID', '$value') ") or die(mysql_error());
            }
        }
    }
} 
```

我的代码有效。有点。我的问题是插入代码在我的数据库中插入了 5 次。我只希望它插入一次。

代码中的回声用于调试。我收到 4 4 3 4 4 作为回声。

我知道问题是因为循环，但我不知道如何解决问题。

我推断它插入代码 5 次的原因是因为代码循环时，它会检查 $row = 345。由于前两次和最后两次没有，代码按照 echo 插入4 在第三个循环中，它根据 echo 3 插入，因为存在匹配项。

现在，我知道 in_array() 但不知道如何在我的 mysql 查询的上下文中使用它。我怀疑这可能是解决方案...

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T02:57:05.667

这变得过于混乱，但我正在猜测。

您想在结果集中搜索“345”条目，如果找到，则执行某项操作，如果未找到，请执行其他操作，对吗？

好吧，无论哪种方式，这里都是如何做到这一点的`array_search();`：

```
$resultSet= mysql_get_assoc($getfreq);

if ( array_search(345,$resultSet) !== false )
{

# - 345 Is here!!! -

//do what you gotta do...

}

else
{

# - 345 is not in $resultSet -

//do something else here

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T02:23:46.903

我认为您在循环中没有错误。

您永远不会更新插入 SQL 中的任何变量。

我的意思是 - 你说你在 $getfreq 中有 5 个值，第三个是 345，因此会发生带有“3”的分支，在所有其他情况下，会发生带有“4”的分支。其他变量都没有改变，永远。

你进入这个分支

```
 if ($row[term_taxonomy_id] == 345) { // if Daily entry, insert the row with reminder date
                echo "3";
                mysql_query("INSERT INTO userContests (userID, contestID, value, reminder) VALUES ('$userID', '$contestID', '$value', 'DATE_ADD(CURDATE(),INTERVAL 1 DAY)') ") or die(mysql_error());
            } else { // if anything other than above, insert the row with current date
                echo "4";
                mysql_query("INSERT INTO userContests (userID, contestID, value, reminder) VALUES ('$userID', '$contestID', '$value', CURDATE()) ") or die(mysql_error());
            } 
```

在第三种情况下，它进入“3”分支并被插入。

但是，在所有其他情况下，都会执行此行

```
 mysql_query("INSERT INTO userContests (userID, contestID, value, reminder) VALUES ('$userID', '$contestID', '$value', CURDATE()) ") or die(mysql_error()); 
```

因为你在`else`分支中有它。

如果您根本不想执行循环而只想检查一次，则必须执行类似的操作。

```
$getfreq = mysql_query("
        SELECT COUNT(taxonomy_id) AS freq
        FROM wp_term_relationships 
        WHERE wp_term_relationships.object_id = $contestID
         AND wp_term_relationshis.taxonomy_id = 345
    ");    

$data = mysql_fetch_assoc($getfreq);

if ($data['freq'] > 1) {
    //do something
} else {
    //do something else
} 
```

我希望我写得正确，因为我是从头顶开始做的:)

如果要检查多个值，请尝试以下操作：

```
$getfreq = mysql_query("
        SELECT DISTINCT term_taxonomy_id
        FROM wp_term_relationships 
        WHERE wp_term_relationships.object_id = $contestID
    ");    

while ($row = mysql_fetch_assoc($getfreq)) {
    $taxonomy_id = $row[term_taxonomy_id];
    $seen[$taxonomy_id] = 1;
}

if ($seen[334]) {
   //something
} else if ($seen[456]) {
   //something else
} else {
   //last branch
} 
```

# signalr - SignalR 和 500 错误

> ID：11597263
> 
> 赞同：5
> 
> 时间：2012-07-22T02:01:34.837
> 
> 标签：signalr

到目前为止，我一直在非常成功地使用 SignalR，但我发现了一种情况，我真的无法找到任何记录在案的参考或解决方案。

我有一个服务器端函数，其类参数具有 Double 属性

```
public bool AddThing(Thing thing)
{
    // add and notify client
}

public class Thing {
    public Double Foo { get; set; }
} 
```

如果我发送带有文本而不是属性 Foo 的数字的 Thing 对象，则服务器正确地返回 500 错误

```
{"hub":"ThingHub","method":"AddThing","args":[{"Foo":"bar"}],"state":{},"id":1} 
```

由于这发生在 SignalR 上下文启动之前，如何处理客户端的错误？Hub 是否有任何特殊的回调或属性要检查？我需要对服务器端的集线器做些什么特别的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T11:17:45.760

SignalR 在客户端有一些逻辑，您可以使用它来检查来自客户端的服务器端集线器方法调用是否成功。

首先，要处理连接失败，您可以在集线器连接上使用错误处理程序（[https://github.com/SignalR/SignalR/issues/404#issuecomment-6754425](https://github.com/SignalR/SignalR/issues/404#issuecomment-6754425)，[http://www.asp.net/signalr /overview/guide-to-the-api/hubs-api-guide-javascript-client](http://www.asp.net/signalr/overview/guide-to-the-api/hubs-api-guide-javascript-client)）像这样：

```
$.connection.hub.error(function() {
    console.log('An error occurred...');
}); 
```

因此，当我通过在服务器端实现它来重新创建您的场景时：

```
public bool AddThing(Thing thing)
{
    return true;
}

public class Thing
{
    public Double Foo { get; set; }
} 
```

..然后从客户端调用它：

```
myHub.addThing({"Foo":"Bar"}); 
```

`error`调用处理函数，并将文本打印`An error occurred...`到控制台。

你可以做的另一件事——因为在服务器上调用一个方法会返回一个 jQuery 延迟对象（[https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)），你可以链接几个回调调用的返回对象。例如文档给出了这个示例：

```
myHub.someMethod()
     .done(function(result) {
     })
     .fail(function(error) {
     }); 
```

应该注意的是，`fail`只有在集线器调用期间出现错误时才会调用它（例如，在服务器端方法中引发异常） - [https://github.com/SignalR/SignalR/issues/404#issuecomment-6754425](https://github.com/SignalR/SignalR/issues/404#issuecomment-6754425)。

最后一点 - 我认为这是一个有趣的问题，因为在我看来，它是 JSON 序列化程序引发异常 - 例如，在你的情况下：

`Newtonsoft.Json.JsonSerializationException: Error converting value "Bar" to type 'System.Double'. Line 1, position 54\. ---> System.FormatException:`

...但是可以肯定的是，如果有比我上面描述的更好的方法来处理这种情况，那可能会很有趣——比如能够分辨出哪个确切的集线器调用导致了`500 Internal Server Error`.

# javascript - 使用 Javascript 预防 WebSQL 注入

> ID：11597265
> 
> 赞同：2
> 
> 时间：2012-07-22T02:01:53.577
> 
> 标签：javascript, sql, cordova

我四处寻找，但没有找到这个问题的答案。

Javascript 中是否有类似于 PHP 的功能，可以在`mysql_real_escape_string`将用户输入写入 WebSQL 数据库之前进行安全的用户输入？

如果没有，是否有人知道我可以使用的定制功能？

更新：所以似乎没有本机功能，所以我写了：

```
function sql_real_escape_string(val){
    var val = val.replace('"','&quot;');
    val = val.replace('\'','&rsquo;');
    return val;
} 
```

为了安全起见，我应该替换任何其他字符吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T02:12:08.383

在插入数据库时​​处理用户输入的最佳答案是使用参数化。Web SQL API 支持这一点：

```
var db = openDatabase('mydb', '1.0', 'my database', 2 * 1024 * 1024);
db.transaction(function (tx) {
  tx.executeSql('INSERT INTO foo (id, text) VALUES (?, ?)', [id, userValue]);
}); 
```

而不是这个：

```
db.transaction(function (tx) {
  tx.executeSql('INSERT INTO foo (id, text) VALUES (1, "user-entered value")');
}); 
```

# coffeescript - 将 CoffeeScript 代码转换为 LiveScript？

> ID：11597271
> 
> 赞同：2
> 
> 时间：2012-07-22T02:03:45.550
> 
> 标签：coffeescript, livescript

我有这个有效的 CoffeeScript 并希望将其转换为 LiveScript。有人可以解释为什么它无法转换吗？还给一个转换的？

```
TodoCtrl = (scope) ->
  scope.addTodo = ->
    scope.todos.push
      text: scope.todoText
      done: false
    scope.todoText = '' 
```

您可以使用它来编译 CoffeeScript。

[http://coffeescript.org/](http://coffeescript.org/)

您可以使用它来编译 LiveScript。

[http://gkz.github.com/LiveScript/](http://gkz.github.com/LiveScript/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T02:34:02.547

您正在`scope.todos.push`针对以隐式对象开头的隐式块调用该函数。您必须`do`在 LiveScript 中使用，因为它不会执行这种特殊情况（只需将其`do`视为块周围的括号）。有关原因，请参阅[https://github.com/gkz/LiveScript/issues/50 。](https://github.com/gkz/LiveScript/issues/50)

你想要的代码：

```
TodoCtrl = (scope) ->
  scope.addTodo = ->
    scope.todos.push do
      text: scope.todoText
      done: false
    scope.todoText = '' 
```

这相当于（即`do`只是括号）

```
TodoCtrl = (scope) ->
  scope.addTodo = ->
    scope.todos.push(
      text: scope.todoText
      done: false
    )
    scope.todoText = '' 
```

很高兴看到您使用 LiveScript！

# php - Firefox 中的 getJSON 错误

> ID：11597282
> 
> 赞同：1
> 
> 时间：2012-07-22T02:05:38.893
> 
> 标签：php, jquery, firefox, getjson

我有一个表单，让用户输入他们的搜索词，然后通过 jquery ajax post 传递到另一个页面。在流程页面上，我有以下代码：

```
<?php $searchText = $_REQUEST["searchText"]; ?>

<script type="text/javascript"> 
$('.facebookfeed').append('<p>Loading your results</p>');
  var url = 'https://graph.facebook.com/search?q=';
  var url = url+searchText.value;
  var url = url+'&type=post&limit=60&callback=?';       
    $.getJSON(url,function(json){
    console.log(data);
        var html = "<ul>";
            if (json.data == ''){html += '<li><h2>Sorry, no results were found. Try with another search term.</h2>'; }
        $.each(json.data,function(i,fb){
            if (!fb.message == ''){
                html += '<li><div class="box">'
                html += '<a href="http://www.facebook.com/'+ fb.from.id +'" target="_blank"><img src="https://graph.facebook.com/' + fb.from.id + '/picture" /></a>';
                html += '<p><span class="name"><a href="http://www.facebook.com/'+ fb.from.id +'" target="_blank">' + fb.from.name + '</a></span>  <br />';
                html += fb.message;
                html += '</p></div></li>';

            }
            });
        html += "</ul>";
        $('.facebookfeed').animate({opacity:0}, 500, function(){
                $('.facebookfeed').html(html);
                                                              });
        $('.facebookfeed').animate({opacity:1}, 500);

    });

</script> 
```

此代码在 Chrome 和 Safari 上正常工作，但在 Firefox 中我收到以下错误：

```
Error: searchText is not defined 
```

我似乎无法弄清楚这里的问题是什么？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:27:02.390

您的 searchText 变量在 php 中，但您正试图在 javascript 中使用它。尝试将其转移到 javascript 变量`var searchText = "<?= $searchText?>";`中。

然后你的 javascript 看起来像这样：

```
<script type="text/javascript"> 
    $('.facebookfeed').append('<p>Loading your results</p>');
    var searchText = "<?= $searchText?>";
    var url = 'https://graph.facebook.com/search?q=';
    url = url+searchText;
    url = url+'&type=post&limit=60&callback=?';   
    $.getJSON(url,function(json){
        ...    
    });
    ...
</script> 
```

# python - 如何创建侦听文件描述符的 Python 套接字服务器？

> ID：11597284
> 
> 赞同：7
> 
> 时间：2012-07-22T02:05:57.370
> 
> 标签：python, sockets, node.js, ipc

我正在尝试使 Javascript (Nodejs) 应用程序与 Python 应用程序通信。

我使用绑定到我的本地主机和特定端口的套接字来[工作。](https://github.com/thlorenz/readarepo-zip/blob/master/highlight/pygments/server/pygments-service.py)

为了使事情变得更简单（例如，当部署到可能不允许我监听多个端口的环境时），我想更改我的实现以使用绑定到文件描述符的套接字。

我搜索了高低，但我发现的所有示例都使用端口。

基本上，我需要[Nodejs 文档](http://nodejs.org/api/net.html#net_net_createconnection_options_connectionlistener)（指定路径的版本）中此示例的 Python 服务器对应部分：

`var client = net.connect({path: '/tmp/echo.sock'}`.

有人可以提供一个简单的示例来显示、创建和绑定文件描述符套接字并在其上处理数据和/或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T03:28:41.387

我稍微修改了[这个很好的示例](http://www.velvetcache.org/2010/06/14/python-unix-sockets)（例如，python 服务器必须侦听 TCP 而不是 UDP 套接字才能与 nodejs 客户端兼容。

我在这里发布 python 服务器和 nodejs 客户端代码以供参考：

### 蟒蛇服务器：

```
import socket
import os, os.path
import time

sockfile = "./communicate.sock"

if os.path.exists( sockfile ):
  os.remove( sockfile )

print "Opening socket..."

server = socket.socket( socket.AF_UNIX, socket.SOCK_STREAM )
server.bind(sockfile)
server.listen(5)

print "Listening..."
while True:
  conn, addr = server.accept()

  print 'accepted connection'

  while True: 

    data = conn.recv( 1024 )
    if not data:
        break
    else:
        print "-" * 20
        print data
        if "DONE" == data:
            break
print "-" * 20
print "Shutting down..."

server.close()
os.remove( sockfile )

print "Done" 
```

### Nodejs客户端：

*使用 npmlog 获取彩色日志输出`npm install npmlog`*

```
var net = require('net')
  , log = require('npmlog')
  , sockfile = './communicate.sock'
  ;

var client = net.connect( { path: sockfile });

client
  .on('connect', function () {
    log.info('client', 'client connected');
    client.write('hello server');
  })
  .on('data', function (data) {
    log.info('client', 'Data: %s', data.toString());
    client.end(); 
  })
  .on('error', function (err) {
    log.error('client', err);
  })
  .on('end', function () {
    log.info('client', 'client disconnected');
  })
  ; 
```

# javascript - 通过单击列表项更改图像

> ID：11597286
> 
> 赞同：3
> 
> 时间：2012-07-22T02:06:26.763
> 
> 标签：javascript, html

出现问题似乎无法使其正常工作，需要一些帮助。此代码假设允许您将鼠标悬停在更改图像的列表项上，因为您将鼠标悬停在单个 li 项目上，（例如，您将鼠标悬停在 1 月上，您会看到 Jan-Cal.png 图像）似乎不起作用

橙色紧缩

```
<script type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script> 
```

```
$("li").bind("mouseover",function(){
$("img").hide();
$("#img"+this.value).show();
console.log(this.value);
    });​

    </script>

    </head>

    <body>

    <div>
    <img id="img0" src="../../WDC/Jan-Cal.png"  />
    <img id="img1" src="../../WDC/Feb-Cal.png"  />
    <img id="img2" src="../../WDC/March-Cal.png"/>

    </div>

    <ul>
    <li value="0">January</li>
    <li value="1">February</li>
    <li value="2">March</li>

     </ul>

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T03:27:55.980

尝试在 上设置事件侦听`<ul>`器，然后获取被单击的元素。尝试像这样构建列表：

```
<ul id="months">
   <li><img class="jan" src="../../WDC/Jan-Cal.png" /></li>
   <li><img class="feb" src="../../WDC/Feb-Cal.png" /></li>
</ul> 
```

然后设置一个 onClick 事件监听器：

```
function changeImage(evt){
   // Get the image that was clicked.
   var target = evt.target || evt.srcElement;

   // Then get the src or get the class
   var targetSrc = target.src;
   var targetClass = target.getAttribute("class");

   // Do more processing here...
   // Then you can change the src of the image if need be.

}

var months = document.getElementById("months");
months.addEventListener("click", changeImage, true); 
```

这样，无序列表中有多少元素并不重要。您可以检查类或 src 字符串。注意：此事件处理程序仅适用于某些浏览器。您必须创建一个跨浏览器事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T00:41:26.290

看看这个小提琴 - [http://jsfiddle.net/joplomacedo/wzQPq/](http://jsfiddle.net/joplomacedo/wzQPq/)

javascript/jquery：

```
var images = $('#images').find('img');

//hide images at the beginning
images.not(images.first()).hide();

$("#legends").on("mouseover", 'li', function () {
    var $this = $(this),
        $this_val = $this.val();

    $("img").hide();
    $("#img"+$this_val).show();
});​ 
```

的HTML：

```
<div id="images">
<img id="img0" src="../../WDC/Jan-Cal.png"  />
<img id="img1" src="../../WDC/Feb-Cal.png"  />
<img id="img2" src="../../WDC/March-Cal.png"/>
</div>

<ul id="legends">
<li value="0">January</li>
<li value="1">February</li>
<li value="2">March</li>
 </ul> 
```

问题是你`this.value`不是`$(this).val()`.

`this.value`不起作用有两个原因：

1.  `value`不是 jQuery 对象属性。`val`就是你要找的。它是一种方法而不是属性——这就是它前面的括号的用途。

2.  `this`指向元素以外的其他东西。`$(this)`是你应该使用的。

# javascript - NodeJS - 在特定路由上禁用 JSONP

> ID：11597289
> 
> 赞同：2
> 
> 时间：2012-07-22T02:07:15.223
> 
> 标签：javascript, jquery, node.js, express

我正在使用快递。如何禁用`JSONP`特定路线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T02:16:01.833

看[`res.json()`](https://github.com/visionmedia/express/blob/2.5.11/lib/response.js#L129)，似乎没有明确的设置来禁用每个路由的 JSONP——它只检查全局应用程序设置`jsonp callback`。

`req.query.callback`在调用`res.json()`任何不想通过 JSONP 工作的路由之前，您可以简单地清除 的值。作为中间件功能：

```
function noJSONP(req, res, next) {
    delete req.query.callback;
    next();
} 
```

现在你可以这样做：

```
app.get('/something/sensitive', noJSONP, function(req, res) {
    // ...
}); 
```

# cocos2d-iphone - 如何使 CCParticleExplosion 不重复？

> ID：11597292
> 
> 赞同：1
> 
> 时间：2012-07-22T02:08:23.180
> 
> 标签：cocos2d-iphone, cocos2d-x, particle-system

我正在使用 cocos2d-x 并且我可以让 CCParticleExplosion 大部分正确地发射，但我正在寻找一种方法来让它只爆发一次而不重复它的粒子。我可以尝试将其与持续时间/寿命设置一起破解，但我宁愿能够明确指定这一点。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:13:47.863

有一个 BOOL 属性`autoRemoveOnFinish`。将其设置为“是”，当所有粒子“死亡”时，它将消除单发粒子效果，如爆炸。一次性粒子效果是一种时间设置为正值（即非-1）的粒子效果。

# nosql - 如何向保存在 Azure 表存储中的实体添加新属性？

> ID：11597294
> 
> 赞同：0
> 
> 时间：2012-07-22T02:08:40.117
> 
> 标签：nosql, azure-table-storage

我正在使用一个应用程序，其中从 TableServiceObject 派生的 .NET 类型被保存到 Azure 表存储（称为“Person”）具有另一个实体（“事件”）的集合。当然，集合属性不会保存到 Azure 表存储。

我想做的是在 Person 存储实体上拥有可变数量的属性，并在必要时创建一个新属性。例如，如果 Person1 之前参加过 1 个活动，并且参加了一个新活动，我的代码需要为 Person1 实体创建一个“Event2”属性，并将指向 Event2 存储位置的指针保存在该属性中。Person1 然后有 2 个“事件”属性，但该表中的另一个实体可能有 10 个（event1、event2、event3 ... event10）。

因为 Person 类直接映射到 Azure Tables，它会自动为类中的每个公共属性创建一个属性，所以我找不到一种方法来动态地将 Event2 属性添加到这个保存的实体而不在我的类上创建一个永久属性，我不想这样做。有办法吗？

想要存储这个“参差不齐”的属性集的目的是让我能够获取一个人去过的所有事件，而无需对存储事件的分区进行完整扫描。

谢谢！

更新：Smarx 是正确的——一旦我知道要寻找什么，就很容易找到关于如何在 Azure 表服务中使用 ReadingEntity 和 WritingEntity 事件的描述：http: [//convective.wordpress.com/2009/12/ 30/entities-in-azure-tables/](http://convective.wordpress.com/2009/12/30/entities-in-azure-tables/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:07:33.820

我假设您使用的是 .NET，因为您提到了映射到表中实体的类。表存储本身没有架构，所以这完全不是问题。

在没有架构的情况下使用 WCF 数据服务客户端库（位于 Microsoft.WindowsAzure.Storage 下的内容）有点棘手。搜索`ReadingEntity`并`WritingEntity`与表存储相关，您可能会找到所需的内容。本质上，您需要挂钩这些事件并解析（或注入）您想要的额外属性。人们通常通过创建一个字典属性来处理这些“额外”属性，然后在这些事件触发时读取和写入它们。

您还可以查看[http://www.lucifure.com/](http://www.lucifure.com/)，这是一个我没有经验的替代客户端库。我相信它也解决了这个限制：“通过字典动态存储，因此您不必将每个表属性映射到类成员。”

# c# - 如何在块中使用 File.ReadAllBytes

> ID：11597295
> 
> 赞同：0
> 
> 时间：2012-07-22T02:08:43.907
> 
> 标签：c#, arrays, byte, chunking

我正在使用此代码

```
 string location1 = textBox2.Text;
        byte[] bytes = File.ReadAllBytes(location1);
        string text = (Convert.ToBase64String(bytes));
        richTextBox1.Text = text; 
```

但是当我使用太大的文件时，我会出现内存不足异常。

我想`File.ReadAllBytes`分块使用。我在下面看到过这样的代码

```
System.IO.FileStream fs = new System.IO.FileStream(textBox2.Text, System.IO.FileMode.Open);
byte[] buf = new byte[BUF_SIZE];
int bytesRead;

// Read the file one kilobyte at a time.
do
{
    bytesRead = fs.Read(buf, 0, BUF_SIZE);               
    // 'buf' contains the last 1024 bytes read of the file.

} while (bytesRead == BUF_SIZE);

fs.Close();

} 
```

但我不知道如何实际将其`bytesRead`转换为我将转换为文本的字节数组。

编辑：找到答案。这是代码！

```
 private void button1_Click(object sender, EventArgs e)
    {
        const int MAX_BUFFER = 2048;
        byte[] Buffer = new byte[MAX_BUFFER];
        int BytesRead;
        using (System.IO.FileStream fileStream = new FileStream(textBox2.Text, FileMode.Open, FileAccess.Read))
            while ((BytesRead = fileStream.Read(Buffer, 0, MAX_BUFFER)) != 0)
            {
                string text = (Convert.ToBase64String(Buffer));
                textBox1.Text = text;

            }

} 
```

要更改文本格式的可读字节，请创建一个新字节并使其相等（Convert.FromBase64String(Text)）。感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:05:34.160

```
private void button1_Click(object sender, EventArgs e)
{
    const int MAX_BUFFER = 2048;
    byte[] Buffer = new byte[MAX_BUFFER];
    int BytesRead;
    using (System.IO.FileStream fileStream = new FileStream(textBox2.Text, FileMode.Open, FileAccess.Read))
        while ((BytesRead = fileStream.Read(Buffer, 0, MAX_BUFFER)) != 0)
        {
            string text = (Convert.ToBase64String(Buffer));
            textBox1.Text = text;

        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T07:23:48.210

bytesRead 只是读取的字节数。

这是一些块阅读

```
 var path = @"C:\Temp\file.blob";

        using (Stream f = new FileStream(path, FileMode.Open))
        {
            int offset = 0;
            long len = f.Length;
            byte[] buffer = new byte[len];

            int readLen = 100; // using chunks of 100 for default

            while (offset != len)
            {
                if (offset + readLen > len)
                {
                    readLen = (int) len - offset;
                }
                offset += f.Read(buffer, offset, readLen);
            }
        } 
```

现在你有了字节`buffer`并且可以随意转换它们。

例如在“使用流”中：

```
 string result = string.Empty;

            foreach (byte b in buffer)
            {
                result += Convert.ToChar(b);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T07:06:55.847

如果文件是文本文件，您可以使用 TextReader：

```
 string location1 = textBox2.Text;
    string text  = String.Empty;
    using (TextReader reader = File.OpenText(location1 ))
    {
           do
           {
           string line = reader.ReadLine();
               text+=line;
            }
            while(line!=null)

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T02:10:59.867

不，返回值`Read()`是读取了多少字节。数据在`buf`您传递给的字节数组中`Read()`。您应该尝试理解代码，而不仅仅是复制和粘贴，然后询问为什么它不起作用。即使你这样做，评论*就*在那里说！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T02:13:38.710

根据文件结构，使用[`StreamReader`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)公开`ReadLine`方法的 a 可能更容易。

```
using(var sr = new StreamReader(File.Open(textBox2.Text, FileMode.Open))
{
    while (sr.Peek() >= 0) 
    {
        Console.WriteLine(sr.ReadLine());
     }
} 
```

# ios - 当我运行我的应用程序 IOS 时音乐停止播放

> ID：11597297
> 
> 赞同：3
> 
> 时间：2012-07-22T02:08:55.377
> 
> 标签：ios, camera, ipod

当我在播放音乐时启动我的应用程序时，音乐停止播放..我正在开发相机应用程序..我的应用程序可能会因此被拒绝吗？或者有解决方案吗？谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T02:16:26.607

您的应用不会因停止音乐而被拒绝。很多应用程序都是这样做的。这是音频会话的默认行为：请参阅[此处](https://developer.apple.com/Library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/ConfiguringanAudioSession/ConfiguringanAudioSession.html)的*音频会话默认行为部分*

# ios - 可以使用 AVAssetWriter 的核心动画吗？

> ID：11597298
> 
> 赞同：6
> 
> 时间：2012-07-22T02:09:17.213
> 
> 标签：ios, core-animation, avassetwriter

我知道`AVVideoCompositionCoreAnimationTool`使用 Core 动画的方法，并且`AVMutableComposition`使用`AVAssetWriter`. 基本上我想创建`CAAnimation`(s) 并使用`AVAssetWriter`'s 缓冲区时间戳作为动画计时方法。然后拉动每一帧的动画属性。

这可能吗？任何正确方向的指南将不胜感激。

编辑：如果您想知道为什么不直接使用`AVAssetExportSession`，那是因为我的要求阻止我使用压缩预设，而且我需要使用目前在 iOS 上`CIFilter`无法与s 一起使用的 s 。`CALayer`

# php - 使用 Codeigniter 中的帖子标签

> ID：11597299
> 
> 赞同：0
> 
> 时间：2012-07-22T02:09:34.357
> 
> 标签：php, mysql, codeigniter

我正在做一个项目，让用户能够写一篇文章然后标记它。最后，其他用户进来并投票选出最佳帖子。

在我面临标记挑战之前，一切都像魅力一样：如何找出最简单的方法来处理它们？

我使用多对多关系为每个帖子分配多个标签。但在将它们插入数据库之前我发现了困难。这些困难包括：“我怎么知道这个标签还没有存储在 DB 中？”（当然，我将 name 字段设置为 UNIQUE，但如果有人输入了预存储的标签，他将面临我没有的 codeigniter 错误”不想让它显示出来。）..

所以简而言之，我想出了这个解决方案：

1.  从数据库中获取所有标签。
2.  存储数组 $all。
3.  获取用户输入的标签。
4.  将它们存储在数组 $user 中
5.  建立一个交叉点 $existed
6.  在 foreach 循环中
    *   查询标签表获取当前标签的id
    *   在 posts_has_tags 表中插入 ID。
7.  对于另一个数组，我会为每个数组制作另一个
    *   将标签插入标签表。
    *   获取 insert_id() $id
    *   将 $id 插入到 posts_has_tags 表中。

好吧，我知道这有点乱。特别是对于随着时间的推移可能会有点大的数组循环..所以，我问你们:)我是否正确..？有没有更简单的方法..？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:40:03.330

你可以这样做：

```
SELECT * FROM `tags` WHERE `name`=:name_1 OR `name=:name_2 ... 
```

然后，您可以获取结果标签并将它们从用户的标签数组中删除：

```
foreach ($user_tags as $tag) {
    if (!in_array($tag, $db_tags)) {
        $new_tags[] = $tag;
    }
} 
```

这种方式只有两个查询，但我不能说如何保护此代码免受竞争条件的影响。

# javascript - 从 Node.js 应用程序中的模型层异步返回数据

> ID：11597301
> 
> 赞同：1
> 
> 时间：2012-07-22T02:10:00.137
> 
> 标签：javascript, node.js

我正在开发一个节点应用程序，并使用单独的模型层来组织我的代码。该模型有一个名为 getImages 的函数，它利用 Mongojs 模块从数据库中获取信息。问题是 getImages 在检索数据之前返回。我习惯于使用同步代码，所以这个问题很难解决。我怀疑答案是以某种方式使用回调函数。有人可以展示它是如何工作的吗？或者如果回调不是解决方案，那是什么？

路线/index.js

```
exports.image = function(req, res) {
if (req.method == 'GET') {

    var image = model.getImages();
    return res.send(image);        
}
} 
```

模型/index.js

```
var getImages = function() {

    var imagesCollection = db.collection('Images');

    var images = imagesCollection.find(function(err, docs) {
        return docs;
    });

    return images;
}

exports.getImages = getImages; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:23:24.053

您需要为`getImages`函数提供回调参数。如：

路线/index.js

```
exports.image = function(req, res) {
    if (req.method == 'GET') {
        model.getImages(function(err, images) {
            return res.send(images);        
        });
    }
} 
```

模型/index.js

```
var getImages = function(callback) {

    var imagesCollection = db.collection('Images');

    imagesCollection.find(callback);
}

exports.getImages = getImages; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T02:29:00.283

好像你是 imagesCollection.find 是异步函数。这是 oyu 可以尝试的代码

```
var getImages = function(callback) {

  var imagesCollection = db.collection('Images');

  imagesCollection.find(function(err, docs) {
     if (err) {
       callback(null);
     } else {
        callback(docs);
     }

  });

}

exports.getImages = getImages;
exports.image = function(req, res) {

 var imageDataFunc = function(imageDataFromDB) {
  if(imageDataFromDB) {
     res.send(imageDataFromDB);
     res.end();
  }

 }

 if (req.method == 'GET') {
   model.getImages(imageDataFunc);        
 }
} 
```

# java - 如何使用 BufferReader 和 PrintWriter 组合输入文本

> ID：11597303
> 
> 赞同：1
> 
> 时间：2012-07-22T02:10:09.083
> 
> 标签：java, input, bufferedreader, stringtokenizer, printwriter

我将在今年晚些时候参加 USACO，我很可能会使用 Java。但是，我还没有彻底介绍文件 I/O。USACO 坚持我们使用这个 BufferReader、PrintWriter 和 StringTokenizer 组合来解析输入的文本。这是他们展示的代码：

```
import java.io.*;
import java.util.*;

class test {
  public static void main (String [] args) throws IOException {
    // Use BufferedReader rather than RandomAccessFile; it's much faster
    BufferedReader f = new BufferedReader(new FileReader("test.in"));
                                              // input file name goes above
    PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("test.out")));
    // Use StringTokenizer vs. readLine/split -- lots faster
    StringTokenizer st = new StringTokenizer(f.readLine());
                      // Get line, break into tokens
    int i1 = Integer.parseInt(st.nextToken());    // first integer
    int i2 = Integer.parseInt(st.nextToken());    // second integer
    out.println(i1+i2);                           // output result
    out.close();                                  // close the output file
    System.exit(0);                               // don't omit this!
  }
} 
```

但是，当我将代码复制/粘贴到 Netbeans 中时，它没有运行。它在“BufferedReader f = new BufferedReader ...”行给出了 FileNotFoundException，我想这是因为“test.out”，但我不知道该放什么。我该如何解决？

此外，USACO 表示这是解析输入文本的最有效方式。这是真的？例如，这真的是检索输入文本的最有效方法吗？我熟悉 Scanner 类等其他方法，但 USACO 坚持认为使用 BufferedReader、PrintWriter 等是最好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:22:37.083

`StringTokenizer`比`Scanner`和更有效`split`。两者都`Scanner`使用`split`正则表达式来标记他们的输入。`StringTokenizer`不使用正则表达式，因此不会遇到使用它的开销。

`test.in`是项目工作目录中的一个文件：

```
YourProject
    src
        test.java
    bin 
        test.class
    test.in 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T10:52:57.930

我以前用纯 Java 做过 USACO。（我做得很好。）

您几乎总是想使用`Scanner`它——它非常适合编程比赛，而且 I/O 通常不会成为您的瓶颈。 `StringTokenizer`效率更高一些，但你应该只在你的程序将是线性时间时才真正担心这一点。

# javascript - Onclick 在 Chrome 中触发两次，而不是 IE 或 Firefox

> ID：11597308
> 
> 赞同：1
> 
> 时间：2012-07-22T02:11:11.350
> 
> 标签：javascript, google-chrome

对不起我的帖子重复[为什么 setTimeout 在 Chrome 中触发两次，而不是 IE 或 Firefox？](https://stackoverflow.com/questions/11596982/why-does-settimeout-fire-twice-in-chrome-but-not-ie-or-firefox).

我实际上需要以下 javascript 调用来为超链接内联工作，所以我想知道是否有人有任何想法。单击任一超链接会导致 javascript 函数**GenerateNewNumber**在 Chrome 中触发两次，但不会在 IE 或 Firefox 中触发。一旦您在 Chrome 中单击它一次，它只会在后续单击时添加到标签一次。我再次使用 Chrome 20.0.1132.57、IE9 和 Firefox 13。

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="test.aspx.vb" Inherits="test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title></title>
<script type="text/javascript" language="javascript">

    function GenerateNewNumber() {
        var randomnumber = Math.floor(Math.random() * 1234);
        document.getElementById('NumberLabel').innerHTML += '<br>' + 'Random Number is ' + randomnumber;
    }

</script>
</head>
<body>
    <form id="form1" runat="server">

    <asp:LinkButton ID="Button1" runat="server" OnClientClick="GenerateNewNumber(); return false;">Click for Random Number Test 1</asp:LinkButton><br />
    <a id="Button2" href="#" onclick="GenerateNewNumber(); return false;" target="_blank">Click for Random Number Test 2</a>
    <asp:Label ID="NumberLabel" runat="server"></asp:Label>
    </form>
</body>
</html> 
```

再次感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:28:41.703

这可能是您正在使用的 google 扩展程序的结果。但是，我确实记得有这个问题，并且在超链接的 onclick 中指定了返回 false。我记得一些平凡的调整让它停止发射两次。

尝试删除“return false”后面的分号。

回顾这篇文章，[asp.NET LinkBut​​ton 在谷歌浏览器中不起作用](https://stackoverflow.com/questions/1259489/asp-net-linkbutton-not-working-in-google-chrome)

你可以试试这个方法。

```
protected override void OnPreInit(EventArgs e)
{
    if (Request.UserAgent != null && (Request.UserAgent.IndexOf("AppleWebKit") > 0))  // added for compatibility issues with chrome 
    {
         this.ClientTarget = "uplevel";
    }

     base.OnPreInit(e);
} 
```

最后，您应该考虑使用链接/锚以外的元素/标签。

# asp.net - Access-Control-Allow-Origin 不允许来源 http://localhost

> ID：11597314
> 
> 赞同：3
> 
> 时间：2012-07-22T02:12:07.553
> 
> 标签：asp.net, vb.net, rest, localhost

我正在尝试从本地计算机调用 Web 服务。但是我在 Chrome 控制台中收到以下错误：
`http://www.test.com/service.svc/api/?cid=1 405 (Method Not Allowed) XMLHttpRequest cannot load http://www.test.com/service.svc/api/?cid=1.
Origin http://localhost is not allowed by Access-Control-Allow-Origin.`

我的本地测试网址是： `http://localhost/welcome/html/index.html`

当我将我的代码上传到实际域并从那里调用网络服务时，它当然可以工作。

我已经尝试更改访问控制标头，但这无济于事。

```
Namespace RestService

Public Class service
    Implements Iservice

    Public Function GetProvinces(ByVal cid As String) As AjaxControlToolkit.CascadingDropDownNameValue() Implements Iweddingservice.GetProvinces
        WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Methods", "DELETE, POST, GET, OPTIONS")
        WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Origin", "*")

        Dim MyConnection As SqlConnection = GetConnection()
        Dim cmd As New SqlCommand("SELECT provinceid,title FROM provinces WHERE CountryID=@CountryID ORDER BY title ASC", MyConnection)
        cmd.Parameters.Add(New SqlParameter("@CountryID", cid))
        Dim values As New List(Of CascadingDropDownNameValue)
        Try
            MyConnection.Open()
            Dim reader As SqlDataReader = cmd.ExecuteReader
            While reader.Read
                values.Add(New CascadingDropDownNameValue(reader("title").ToString, reader("provinceid").ToString))
            End While
        Catch ex As Exception

        Finally
            MyConnection.Close()
        End Try
        Return values.ToArray
    End Function

End Class

End Namespace 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T04:59:43.973

由于浏览器[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，对服务的请求失败。`http://localhost`当您尝试访问[http://www.test.com/](http://www.test.com/)上的资源时，您的本地服务器正在运行。这些都在不同的领域。所以它不会工作。

这个问题的解决方案是使用`Access-Control-Allow-Origin`和`Access-Control-Allow-Methods`，[CORS](http://www.w3.org/TR/cors/)规范的一部分。您已将这些包含在响应标头中，但这不会有任何好处，因为浏览器将使用 OPTIONS 动词发出飞行前请求以验证是否允许调用。由于您的服务无法处理 OPTIONS 动词，您会看到 405（不允许的方法）错误。

因此，如果您希望您的服务可以从不同的域访问，那么您必须修改您的 WCF 服务以支持 CORS。我会推荐这个链接：http: [//blogs.microsoft.co.il/blogs/idof/archive/2011/07/02/cross-origin-resource-sharing-cors-and-wcf.aspx](http://blogs.microsoft.co.il/blogs/idof/archive/2011/07/02/cross-origin-resource-sharing-cors-and-wcf.aspx)。通过使用它，您可以使您的服务支持 CORS，而无需更改现有代码。

# php - 使 PHP 变量成为链接

> ID：11597316
> 
> 赞同：1
> 
> 时间：2012-07-22T02:12:10.023
> 
> 标签：php, javascript, mysql

有谁知道如何从 php 变量中创建链接。我希望我的 php 变量 $LeagueLink 成为带有 mysql 查询结果名称的leaguehome 链接。如果可以的话请帮忙....

```
$result = mysql_query("SELECT League FROM League_Info WHERE User_ID = '$id'");
$result2 = mysql_fetch_array($result);
    $result3 = $result2['League'];
    $LeagueLink = '<a href="home.com/test.php"><?=$result3?></a>'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T02:14:17.997

```
$LeagueLink = "<a href=\"http://home.com/leaguehome.php\">$result3</a>"; 
```

要将变量直接放入上面的字符串中，它需要是双引号字符串 ( `"`)，而不是单引号字符串 ( `'`)

或者，如果您担心粗心引起的错误，请使用字符串连接：

```
$LeagueLink = '<a href="http://home.com/leaguehome.php">' . $result3 . '</a>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T02:17:09.607

你也可以这样做

```
$LeagueLink = '<a href="home.com/leaguehome.php">'.$result3.'</a>'; 
```

# php - PHP函数删除许多addlashes

> ID：11597317
> 
> 赞同：1
> 
> 时间：2012-07-22T02:12:12.107
> 
> 标签：php

有没有一种方法或功能可以删除许多添加斜杠，如下所示

```
 \\\\\\\"Oracle DBA\\\\\\\" 
```

使用 stripslashes() 只会删除一个斜线，

我必须使用 preg_replace 吗？像这样

```
preg_replace(/^\\(.*)/,"",$subject); 
```

与这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:18:11.493

如果您真的只想替换反斜杠，那么您需要的只是：

```
$str = "\\\\\\\"Oracle DBA\\\\\\\"";
$str = str_replace("\\", "", $str); 
```

如果您还希望删除正斜杠：

```
$str = str_replace(array("\\", "/"), "", $str); 
```

@therefromhere 提出了一个很好的观点：删除所有斜线可能会破坏您的转义。

在这种情况下，消极的前瞻可能会奏效：

```
$str = preg_replace("/\\\(?!\")/", "", $str); 
```

应该导致 `\"Oracle DBA\"

编辑：做了一个woopsie。x2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T02:17:50.527

您不需要正则表达式来执行此操作。只需使用这个：

```
$string = str_replace(array('/', '\\'), '', $string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T02:18:42.123

如果您知道需要删除多少级转义，则可以`stripslashes`多次运行该字符串。

如果您不这样做，那么我不确定您是否可以完全正确地执行此操作-您可以删除所有斜线，但显然您会破坏本应存在的任何斜线。

# css - 如何更改joomla必填字段红色

> ID：11597318
> 
> 赞同：0
> 
> 时间：2012-07-22T02:12:25.220
> 
> 标签：css, input, joomla, colors, required

我想更改 joomla 中所需输入字段的红色，如果它为空则显示。控制这个的代码在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:02:10.323

如果您指的是 Joomla 后端输入字段，例如当您添加新菜单项时，“菜单标题”是必需的，那么您需要转到：

```
administrator/templates/bluestork/css/template.css   >>   line 133 
```

```
input.required {
    border: 1px solid red;
} 
```

只能假设这就是您所指的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T05:08:30.613

您可以使用（[在 CSS 中重要的含义](http://webdesign.about.com/od/css/f/blcssfaqimportn.htm)`input.required`）覆盖您自己的 css 中的on `background-color`（或其他）的 css 。`!important`

例如...`media/your_component/css/mystyle.css`

```
input.required {
    border: 1px solid red !important;
} 
```

# sql - 使用 SQL + XQuery 将 XML 转换为基于列的数据

> ID：11597319
> 
> 赞同：2
> 
> 时间：2012-07-22T02:12:31.293
> 
> 标签：sql, xml, tsql, xpath, xquery

我的 xml 类型列中有以下 xml（xml 本身没有类型）

```
<wi>
  <w wid="16">
    <p>28</p>
    <p>72</p>
    <p>125</p>
  </w>
  <w wid="19">
    <p>89</p>
  </w>
  <w wid="20">
    <p>11</p>
  </w>
  <w wid="21">
    <p>74</p>
  </w>
</wi> 
```

不知道如何使用 SQL+XQuery 生成两列：

```
 p    w
---  ---
11   20
28   16
72   16
74   21
89   19
125  16 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:25:18.123

或使用另一种方法`cross apply`：

```
select *
from
(
    select a.b.value('.', 'int') p
        , t.c.value('@wid', 'int') w
    from @x.nodes('//w') t(c)
    cross apply t.c.nodes('p') a(b)
)t
order by p, w 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T02:39:21.853

利用：

```
declare @x xml = '<wi>
  <w wid="16">
    <p>28</p>
    <p>72</p>
    <p>125</p>
  </w>
  <w wid="19">
    <p>89</p>
  </w>
  <w wid="20">
    <p>11</p>
  </w>
  <w wid="21">
    <p>74</p>
  </w>
</wi>'

select *
from
(
    select t.c.value('.', 'int') p
        , t.c.value('../@wid', 'int') w
    from @x.nodes('//p') t(c)
)t
order by p, w 
```

# jquery - 转发 json 响应

> ID：11597324
> 
> 赞同：0
> 
> 时间：2012-07-22T02:13:52.897
> 
> 标签：jquery, ajax, json

我有一个简单的 html 文件。它访问 url1 并成功解析 json 响应。

CLIENT -> URL1 -> 对客户端的响应

我在 html 中修改了我的代码并调用了 URL2

客户端 -> URL2 -> URL1 -> 对 URL2 的响应 -> 对客户端的响应

我评论了 url1 并调用了 url2。url2 是一个简单的 servlet，它调用 url1 并获取响应。servlet 将相同的响应返回给客户端，但这次 ajax/jquery 返回**parse error**。当我提醒（request.responseText）时，它与 URL1 返回的响应完全匹配。

```
$.ajax({   
//url: "http://abc1.com", // Line 1  
  url: "http://abc2.com", // Line 2   
  data: {param1, param2},    
  dataType: "jsonp",            
  type: "GET",  
      async:false,  
    success: function(parsed_json) {  
            alert("Success");           
        },
        error: function (request, status, error) {  
            alert("Error" + error);
            alert(request.responseText);
        } 
```

Servlet 只是中间的一层，将输入流的内容复制到输出流。

`InputStream input = new URL(url).openStream();
resp.setContentType("application/json"); // Apache commons IOUtils to copy IOUtils.copy(input, resp.getOutputStream());
resp.getOutputStream().flush();` 

我手动验证了 json-string-response，它似乎是一样的。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T03:21:12.560

这是一个可能的问题：我注意到`dataType`is`jsonp`与 不同`json`。如果请求在预期 JSON-P 时返回为 JSON，jQuery 可能会抛出错误。改变`dataType`改变`json`什么吗？

顺便说一下，这里的区别是：

JSON-P 主要用于与远程网站通信。由于出于安全原因浏览器无法向其他域发送 AJAX 请求，因此 JSON-P “AJAX 请求”实际上会向 DOM 添加如下内容：

```
<script src="http://www.otherwebsite.com/info.js?callback=myCallback"></script> 
```

如果远程站点支持 JSON-P，它将返回如下内容：

```
myCallback({"foo": "bar"}) 
```

然后`myCallback`使用来自远程站点的数据调用您的函数 - ta da！

`dataType`如果您说is ， jQuery 会自动处理所有这些回调业务`jsonp`，但是，如果您说`jsonp`但*不*将数据包装在回调中，（据我了解）jQuery 会注意到脚本已加载并抛出错误，因为回调从未触发.

或者也许它*是*JSON-P，我只是在气喘吁吁。反正。以防万一 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T03:29:10.397

我为此查阅了[jquery 文档](http://api.jquery.com/jQuery.ajax/)，似乎“跨域请求和数据类型：“jsonp”请求不支持同步操作”。因此，如果您更改为`async:true`，您可能会有更多的运气。:)

# ios - 从另一个视图控制器调用位于 Facebook sdk 上的函数

> ID：11597325
> 
> 赞同：1
> 
> 时间：2012-07-22T02:13:58.987
> 
> 标签：ios, facebook, sdk, viewcontroller

我对编程很陌生，所以请不要把我烧得太厉害。我下载了 Facebook 的 Hackbook 版本。但是，我有许多视图控制器将使用“共享此”按钮，但我不知道该怎么做。我知道我想使用已经存在的功能。

```
@implementation ViewConcertsViewController
...

-(IBAction)shareThis:(id)sender{
[appDelegate.facebook authorize:nil delegate:self];
                APICallsViewController *apiViewController = [[APICallsViewController alloc] initWithNibName:nil bundle:nil];
                [apiViewController shareButton];
} 
```

然后在我的 APICallsViewController 中，我有：

```
-(void)shareButton{
[self performSelector:@selector(//what do I put in here!!!!)];
} 
```

先感谢您。

这就是我所做的：

```
@implementation ViewConcertsViewController
...
-(IBAction)shareThis:(id)sender{
    APICallsViewController *apiViewController = [[APICallsViewController alloc] initWithNibName:nil bundle:nil];
    [apiViewController shareButton:sender];
}

@implementation APICallsViewController
...
-(void)shareButton:(id)sender{
    SEL selector = NSSelectorFromString(@"getAppUsersFriendsNotUsing");
    if ([self respondsToSelector:selector]) {
        [self performSelector:selector];
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:23:08.663

看起来您只需要在 APICallsViewController 中更改 Hackbook 示例中的方法。

* * *

```
/*
 * Dialog: Feed for friend
 */
- (void)apiDialogFeedFriend:(NSString *)friendID {
    currentAPICall = kDialogFeedFriend;
    SBJSON *jsonWriter = [[SBJSON new] autorelease];

    NSArray* actionLinks = [NSArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:
                                                           @"Get Started",@"name",@"http://m.facebook.com/apps/hackbookios/",@"link", nil], nil];
    NSString *actionLinksStr = [jsonWriter stringWithObject:actionLinks];
    // The "to" parameter targets the post to a friend
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   friendID, @"to",
                                   @"I'm using the Hackbook for iOS app", @"name",
                                   @"Hackbook for iOS.", @"caption",
                                   @"Check out Hackbook for iOS to learn how you can make your iOS apps social using Facebook Platform.", @"description",
                                   @"http://m.facebook.com/apps/hackbookios/", @"link",
                                   @"http://www.facebookmobileweb.com/hackbook/img/facebook_icon_large.png", @"picture",
                                   actionLinksStr, @"actions",
                                   nil];

    HackbookAppDelegate *delegate = (HackbookAppDelegate *)[[UIApplication sharedApplication] delegate];
    [[delegate facebook] dialog:@"feed"
                      andParams:params
                    andDelegate:self];

} 
```

**但是，如果您要发送 AppRequest（与 webpare 上的共享按钮不同），请结帐** `- (void)apiDialogRequestsSendTarget:(NSString *)friend`

那么你想分享什么？状态更新、照片、URL 链接、Facebook 应用请求。很多东西要分享，所以很难知道你想去哪里。[limk]http://developers.facebook.com/docs/reference/iossdk/request/。而她的 [link]http://developers.facebook.com/docs/reference/dialogs/ 有 7 个默认的一两行代码来分享东西

目前有 7 个对话框可供您使用：

** -Feed 对话框允许用户将故事发布到他们的时间轴和他们朋友的新闻源

- OAuth 对话框允许用户授权应用程序作为身份验证流程的一部分。

- 添加页面选项卡对话框允许用户将应用程序添加到他们管理的 Facebook 页面。

-好友对话框允许用户向另一个用户发送好友请求。

- 支付对话框允许用户使用 Facebook Credits 进行购买。

-请求对话框允许用户向他们的一个或多个朋友发送请求

- 发送对话框允许用户向他们的一个或多个朋友发送 Facebook 消息。**

但是，如果您可以提供任务的更多详细信息，它将更容易提供帮助和示例。对于我在 xcode 中设置应用程序项目以使用来自苹果和 Facebook 的自定义应用程序 ID 的 fb sdk 的经验来说，这是困难的部分。我强烈建议从头开始一个 Xcode 项目。这将花费更多时间，但是一旦您从开始设置应用程序到登录并通过 FBRequest 拥有朋友数据，您将能够非常快速地移动。

从一个示例应用程序开始，您将始终在后台运行您无法修复或改进或真正使用 API 的东西。

# c# - 如何使用与其他 DLR 语言类似的 API 在 ac# 应用程序中托管 PowerShell 3.0

> ID：11597333
> 
> 赞同：8
> 
> 时间：2012-07-22T02:16:22.183
> 
> 标签：c#, powershell, powershell-3.0, dynamic-language-runtime

我一直在使用托管 IronPython、IronRuby 和（希望如此）PowerShell 的 ac# 应用程序。由于 IronPython 和 IronRuby 完全建立在 DLR 之上，因此使用它们的 API 几乎相同。

```
IronPython.Hosting.Python.CreateEngine() 
```

和

```
IronRuby.Ruby.CreateEngine() 
```

两者都创建*Microsoft.Scripting.Hosting.ScriptEngine*的实例。有没有希望强制 PowerShell 3.0 创建一个 ScriptEngine？我在这个主题上找不到太多东西，除了 PowerShell 3.0 似乎比以前的版本*更多地构建在 DLR 上（参见*[http://huddledmasses.org/powershell-3-finally-on-the-dlr](http://huddledmasses.org/powershell-3-finally-on-the-dlr/)。

您似乎无法将使用以下内容创建的 PowerShell 引擎强制转换为 ScriptEngine。

```
System.Management.Automation.PowerShell.Create() 
```

我怀疑如果我真的想通过相同的 API 处理 PowerShell，我需要创建自己的 ScriptEngine 来包装 PowerShell 主机。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-24T00:02:10.830

PowerShell V3 确实使用了一些 DLR，但仅使用了 .Net Frameworks V4 中提供的部分。DLR 项目有许多 .Net 中未包含的有用 api，例如 Microsoft.Scripting.Hosting.ScriptEngine。

如果 PowerShell 想要实现 ScriptEngine api，PowerShell 必须将这些 api 作为 PowerShell 的一部分提供。PowerShell 团队不愿意拥有这些 API。

因此，如果您想实现 ScriptEngine，则假设您需要用自己的代码包装 PowerShell 是正确的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-22T07:51:34.943

PowerShell 与 dotnet 程序集一起使用，当您拥有管理员配置文件并且想要进行高级说明时非常有趣。但是您是开发人员，所以为什么要包装 PowerShell，您可以从您的代码中访问所有 dotnet 程序集。最好编写您的代码想要而不是包装 PowerShell 最好的尊重

# c++ - 在字符串末尾添加双精度 (C++)

> ID：11597340
> 
> 赞同：1
> 
> 时间：2012-07-22T02:18:00.907
> 
> 标签：c++, string, operator-overloading, double

所以，基本上这就是我的代码中出现问题的地方。

```
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
#include <cstring>

void main()
{
    double k = 10.0;
    string out;
    out = "V";
    out += ".";
    out << k;   <---
} 
```

我尝试编译，但出现此错误：

错误 C2784: 'std::basic_ostream<_Elem,_Traits> &std::operator <<(std::basic_ostream<_Elem,_Traits> &&,_Ty)' : 无法推导出 'std::basic_ostream<_Elem,_Traits 的模板参数> &&' 来自 'std::string'

...即指向带箭头的线。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:22:52.597

使用`std::stringstream`或`boost::lexical_cast`。

```
out += boost::lexical_cast<std::string>(k); 
```

或者`std::to_string`如果你可以使用 C++11

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T02:20:52.467

尝试以下操作：-

```
std::ostringstream strs;
strs << dbl;
std::string str = strs.str(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T02:21:05.673

您正在尝试使用 a`string`而不是`stringstream`. 没有`<<`定义将`string`作为其第一个参数的运算符，这是编译器试图告诉您的（以一种相当神秘的方式）。

```
stringstream out;
out << "V." << k;
string s = out.str(); 
```

如果你使用 C++11，你可以这样写：

```
double k = 10.0;
string out;
out = "V";
out += ".";
out += to_string(k); 
```

# com - 如何从 Go 进行 stdcall

> ID：11597341
> 
> 赞同：3
> 
> 时间：2012-07-22T02:18:08.717
> 
> 标签：com, go, stdcall, cgo

我有一个指向 COM 接口的指针，并且想从它的虚拟表中获取函数指针并进行方法调用。为此，我需要进行 stdcall 方法调用。在 Go 中，如何使用约定 stdcall 进行调用或使用 cgo 中的约定 stdcall 进行调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:49:42.317

有关如何在 Windows 上调用 stdcall 函数的说明，请参阅“godoc syscall Proc”。请注意，*Proc.Call 确实分配/释放内存，因此，如果您关心效率，则应使用对应的 syscall.Syscall/syscall.Syscall6/syscall.Syscall9/... 函数。

亚历克斯

# python - 尝试获取一个 C 库并使用 swig 将其公开给 Windows 中的 Python。关于静态与动态以及使用 Visual Studio for swig 的问题

> ID：11597345
> 
> 赞同：3
> 
> 时间：2012-07-22T02:18:46.817
> 
> 标签：python, windows, visual-studio-2010, static-libraries, swig

也许我应该把它分成单独的问题，但是在尝试了所有这些之后，我想知道它们是否都不是相互关联的。

这是背景故事：Linux 和 Windows 中都有一些 C 库。有人在 Linux 中使用 swig 将 C 库的 API 暴露给 Python。他或多或少地为 swig 编写了一个构建脚本（.i 文件），swig 创建了一个包装 C 文件，他使用 gcc 编译该 C 文件，链接到原始库以获取 Python 模块。

现在我接到了他的工作，并要求我为 Windows 库做这件事。希望我能找到一种快速的方法来使用他的 .i 文件为 Windows 创建一个。我们使用 Visual Studio 2010。

我对swig了解不多，对C或Visual Studio环境也不是很了解，所以我最终放弃了实验，决定在这里问。

问题：

1.  我拥有的 C 库是静态的。那样可以么？我可以只使用 swig 生成的包装文件并将其链接到静态库以创建动态库（用于 Python）吗？如果答案是否定的，这实际上可能会变得复杂。基本上，我想公开一个特定库的 API（称之为“A”）。反过来，该库依赖于“L”、“C”和“D”。我可以访问“A”和“L”的源代码，所以我可以随意编译它们，但是“C”和“D”不在我的控制范围内——它们是静态库。

2.  在 Windows 中，为了与 Python 一起使用，我想要的输出文件到底是什么？一个DLL？它应该有一个 .pyd 扩展名吗？我熟悉 Linux 中的所有这些（过去使用过 Cython），但在 Windows 中不熟悉。

3.  我*真的*很想在 Visual Studio 2010 中处理这个问题的帮助。文档涵盖了 Visual Studio 6 和上面的几个版本，但细节相对稀疏。相反，他们建议我只使用 SWIG 附带的 .dsp/.dsw 文件。我确实尝试过使用它附带的一个简单示例。VS2010 将 dsp/dsw 文件转换为 VS2010 格式，一切正常 - 创建一个 .pyd 文件。但是，当我进入项目/解决方案的属性时，我看*不到*swig 的设置，也没有看到带有 .pyd 扩展名的设置！自定义/构建后设置为空！我怀疑当 VS2010 将项目文件转换为它的格式时，它会处理所有的构建后设置，但不会显示它们。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:23:15.943

1.  这不应该有任何问题。只需在 VS 中添加“L”、“C”和“D”库，就像您通常添加外部库一样。

2.  是的。目标应该是动态库（.dll），但输出文件应该重命名为 _something.pyd（参见下面的链接如何配置项目）

3.  SWIG 可以集成到 VS 解决方案构建工具链中。前段时间我写了一本关于如何使用 SWIG 和 Visual Studio 的手册，现在为你更新了：

[如何在 Visual Studio 2010 中使用 SWIG](https://stackoverflow.com/a/6117641/548894)

# python - Python：列出可调用对象？

> ID：11597353
> 
> 赞同：0
> 
> 时间：2012-07-22T02:21:41.357
> 
> 标签：python, callable

我试图仅列出可调用对象，但我似乎做错了什么。例如，

```
>>> [m for m in dir({}) if callable(getattr({},m))]
['__class__', '__cmp__', '__contains__', '__delattr__', '__delitem__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__gt__', '__init__', '__iter__', '__le__', '__len__', '__lt__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__setitem__', '__sizeof__', '__str__', '__subclasshook__', 'clear', 'copy', 'fromkeys', 'get', 'has_key', 'items', 'iteritems', 'iterkeys', 'itervalues', 'keys', 'pop', 'popitem', 'setdefault', 'update', 'values'] 
```

但是，这是错误的，例如`{}.__doc__`显然是字符串等。我的列表理解有什么问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T02:30:43.017

您编写的代码是 Python 所能提供的最好的。您提到它是错误的，因为`__doc__`，但您的列表不包括`__doc__`。我认为您已经有了工作代码。

# html - 结果右对齐

> ID：11597355
> 
> 赞同：2
> 
> 时间：2012-07-22T02:21:49.897
> 
> 标签：html, css

我再次问同样的问题，现在有更多细节，希望能得到有效的解决方案。

在输出下方的代码中，将打印对齐到行的右侧：

```
<table border="1" style="width:100%"> 
<tr> 
<td align="right"> 
<div style="float:right;">test</div> 
</td> 
</tr> 
</table> 
```

在下面的代码中，输出没有与行的右侧对齐（输出保持在行的左侧），因此`float:right;`对代码没有任何影响：

函数 pagination() 返回以下内容： 1 2 3 4 … 15 16 NEXT

```
<table border="1" style="width:100%"> 
<tr> 
<td align="right"> 
<div style="float:right;"><?php echo pagination($total, $limit, $page); ?></div> 
</td> 
</tr> 
</table> 
```

任何有关将上述内容向右对齐的建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:27:32.437

你有没有尝试过：

```
.paginate{ text-align:right; } 
```

并将类分页分配给您的div？

**更新**

将其标记为`!important`

```
.paginate{ text-align:right !important;} 
```

看这个**[演示](http://jsfiddle.net/mdDMC/)**，它有效，所以我认为你还有其他优先于规则的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T02:41:32.627

尝试删除 div n 只需将您的分页 php 放入其中。因为我看到你的 div 的方式除了向右浮动之外并没有真正做任何事情。

```
 <td align="right"><?php echo pagination($total, $limit, $page); ?></td> 
```

# android - android应用程序无法启动

> ID：11597357
> 
> 赞同：0
> 
> 时间：2012-07-22T02:22:15.123
> 
> 标签：android

我试图调试我的菜单活动，但它似乎无法显示输出。屏幕上的错误消息显示 Savings Guider（我的应用程序名称）已停止工作。如果我从 android 菜单中手动单击我的应用程序，它会说我的应用程序没有安装。但是，我的代码中没有错误。任何人都可以帮助我吗？

我的菜单活动代码：

```
public class SavingsGuiderMenuActivity extends SavingsActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);
    ListView menuList = (ListView) findViewById(R.id.ListView_Menu);
    String[] items = { getResources().getString(R.string.start),
            getResources().getString(R.string.about),
            getResources().getString(R.string.help) };
    ArrayAdapter<String> adapt = new ArrayAdapter<String>(this, R.layout.menu_item, items);
    menuList.setAdapter(adapt);
    menuList.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View itemClicked, int position, long id) {
            // Note: if the list was built "by hand" the id could be used.
            // As-is, though, each item has the same id
            TextView textView = (TextView) itemClicked;
            String strText = textView.getText().toString();
            if (strText.equalsIgnoreCase(getResources().getString(R.string.start))) {
                // Launch the app Activity
                startActivity(new Intent(SavingsGuiderMenuActivity.this, SavingsGuiderAppActivity.class));
            } else if (strText.equalsIgnoreCase(getResources().getString(R.string.help))) {
                // Launch the Help Activity
                startActivity(new Intent(SavingsGuiderMenuActivity.this, SavingsGuiderHelpActivity.class));
            } else if (strText.equalsIgnoreCase(getResources().getString(R.string.about))) {
                // Launch the about Activity
                startActivity(new Intent(SavingsGuiderMenuActivity.this, SavingsGuiderAboutActivity.class));
            } 
        }
    });
} 
```

}

我的清单：

```
 <application
    android:label="@string/splash"
    android:debuggable="true"
    android:icon="@drawable/saving">
    <activity
        android:name=".SavingsGuiderMenuActivity"
        android:label="@string/splash">
        <intent-filter>
            <action
                android:name="android.intent.action.MAIN" />
            <category
                android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

Logcat 错误

```
07-22 03:18:24.712: E/ArrayAdapter(806): You must supply a resource ID for a TextView
07-22 03:18:24.772: E/AndroidRuntime(806): FATAL EXCEPTION: main
07-22 03:18:24.772: E/AndroidRuntime(806): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:386)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.AbsListView.obtainView(AbsListView.java:2033)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.ListView.onMeasure(ListView.java:1155)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.view.View.measure(View.java:12581)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.RelativeLayout.measureChild(RelativeLayout.java:579)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:392)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.view.View.measure(View.java:12581)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4671)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.view.View.measure(View.java:12581)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4671)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.view.View.measure(View.java:12581)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.view.View.measure(View.java:12581)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4671)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
07-22 03:18:24.772: E/AndroidRuntime(806):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2062)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.view.View.measure(View.java:12581)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1038)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2382)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.os.Looper.loop(Looper.java:137)
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.app.ActivityThread.main(ActivityThread.java:4340)
07-22 03:18:24.772: E/AndroidRuntime(806):  at java.lang.reflect.Method.invokeNative(Native Method)
07-22 03:18:24.772: E/AndroidRuntime(806):  at java.lang.reflect.Method.invoke(Method.java:511)
07-22 03:18:24.772: E/AndroidRuntime(806):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-22 03:18:24.772: E/AndroidRuntime(806):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-22 03:18:24.772: E/AndroidRuntime(806):  at dalvik.system.NativeStart.main(Native Method)
07-22 03:18:24.772: E/AndroidRuntime(806): Caused by: java.lang.ClassCastException: android.widget.LinearLayout cannot be cast to android.widget.TextView
07-22 03:18:24.772: E/AndroidRuntime(806):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:379)
07-22 03:18:24.772: E/AndroidRuntime(806):  ... 33 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T02:53:21.173

您在代码中进一步使用了三个类，即 SavingsGuiderAppActivity.java、SavingsGuiderHelpActivity.java 和 SavingsGuiderAboutActivity.java。您还需要在清单中注册它们。您的清单应如下所示：

```
<application
android:label="@string/splash"
android:debuggable="true"
android:icon="@drawable/saving">
<activity
    android:name=".SavingsGuiderMenuActivity"
    android:label="@string/splash">
    <intent-filter>
        <action
            android:name="android.intent.action.MAIN" />
        <category
            android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity
    android:name=".SavingsGuiderAppActivity"
    android:label="@string/splash">
<intent-filter>
        <action
            android:name="ACTIVITY_A" />
        <category
            android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>
<activity
    android:name=".SavingsGuiderHelpActivity"
    android:label="@string/splash">
<intent-filter>
        <action
            android:name="ACTIVITY_B" />
        <category
            android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>
<activity
    android:name=".SavingsGuiderAboutActivity"
    android:label="@string/splash">
<intent-filter>
        <action
            android:name="ACTIVITY_C" />
        <category
            android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T03:31:05.627

不，我认为您的 xml 很好。如果您尝试创建一个菜单以在活动之间进行选择，这可能不是最好的方法。

```
String classes[] = {"class_a","class_b","class_c"};
String class = classes[position]; Class ourClass=Class.forName("package_name"+class);
Intent intent = new Intent(Menu.this,ourClass);
startActivity(intent); 
```

在尝试括号中的 onItemClicked() 中尝试此操作。

# python - 如何在 Flask 中关闭服务器发送事件连接？

> ID：11597367
> 
> 赞同：13
> 
> 时间：2012-07-22T02:24:02.113
> 
> 标签：python, flask, server-sent-events

下面给出了使用 node.js 的答案。

[如何关闭服务器上的“服务器发送事件”连接？](https://stackoverflow.com/questions/6534572/how-to-close-a-server-sent-events-connection-on-the-server)

但是，如何在 python Flask 中做同样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-05-29T02:04:12.370

请务必注意，您还需要关闭客户端上的连接，否则它将在`retry`超时后尝试重新打开连接。

这让我很困惑，直到我在这里看到这篇文章：[https ://stackoverflow.com/a/38235218/5180047](https://stackoverflow.com/a/38235218/5180047)

从链接：

> 这里的问题是服务器意外关闭了连接，而不是在保持打开状态时进行工作。发生这种情况时，客户端会重新发送请求以打开连接并开始流式传输服务器发送的事件。然后服务器一次又一次地关闭连接，导致无限循环。

在我看到这个之后.. 我首选的解决方案是通过产生预期的数据消息来关闭与服务器的连接。

**在客户端（浏览器）上**

```
var sse = new EventSource('/sse');
sse.addEventListener('message', function(e) {
  console.log(e);
  var data = e.data;
  if (!data) {
      console.log('no data in event');
      return;
  }
  if (data === 'finished') {
      console.log('closing connection')
      sse.close()
  }
  // my work here based on message
}); 
```

**我的烧瓶服务器**

```
from flask import Response

@app_api.route("/sse")
def stream():
    def trackerStream():
        finished = check_if_finished()
        while not finished:
            sleep(1) # poll timeout
            if should_send_event():
                yield f"data: {mydata()}\n\n"
            else:
                yield "data: nodata\n\n"

            finished = check_if_finished()

        yield "data: finished\n\n"

    return Response(trackerStream(), mimetype="text/event-stream") 
```

注意：确保您始终以一定的时间间隔从服务器向客户端发送事件。如果用户关闭浏览器，flask 在尝试写入套接字时会出错，并会为您关闭流。如果您没有在某个时间间隔写入客户端，即使您只是在写入`data: nodata\n\n`，那么服务器可能会陷入循环。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T19:06:27.070

好吧，这取决于您的应用程序的架构。

让我给你看一个例子（在[https://github.com/jkbr/chat/blob/master/app.py](https://github.com/jkbr/chat/blob/master/app.py)看到这个代码）：

```
def event_stream():
    pubsub = red.pubsub()
    pubsub.subscribe('chat')
    for message in pubsub.listen():
        print message
        yield 'data: %s\n\n' % message['data']

@app.route('/stream')
def stream():
    return flask.Response(event_stream(),
                          mimetype="text/event-stream") 
```

Flask 稳定地向 Redis 请求一条新消息（锁定操作），但是当 Flask 看到流式传输终止时（`StopIteration`如果您不是 Python 新手），它会返回。

```
def event_stream():
    pubsub = red.pubsub()
    pubsub.subscribe('chat')
    for message in pubsub.listen():
        if i_should_close_the_connection:
            break
        yield 'data: %s\n\n' % message['data']

@app.route('/stream')
def stream():
    return flask.Response(event_stream(),
                          mimetype="text/event-stream") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-03T14:20:21.553

我遇到了同样的问题，最后在[这里](https://github.com/pallets/flask/issues/2702)找到了以下解决方案。

```
import time
from flask import Flask, Response, stream_with_context

app = Flask(__name__)

@app.route('/stream')
def stream():
    def gen():
        try:
            i = 0
            while True:
                data = 'this is line {}'.format(i)
                print(data)
                yield data + '<br>'
                i += 1
                time.sleep(1)
        except GeneratorExit:
            print('closed')

    return Response(stream_with_context(gen())) 
```

您可以通过订阅 Redis 的侦听器来启动该方法。而不是`time.sleep(1)`你可以等待 Redis 的`listen()`方法返回一个值。`print('closed')`您可以取消订阅 Redis 。剩下的唯一问题`GeneratorExit`是只有在将产量值发送到客户端时才会引发异常。因此，如果 Redis`listen()`永远不会结束，那么您将永远不会发现连接已断开。

# php - 抓取具有特定 url 的网页内容

> ID：11597370
> 
> 赞同：1
> 
> 时间：2012-07-22T02:24:18.013
> 
> 标签：php, simple-html-dom

我想获取具有特定文档链接的标题和网址。所以，从下面的代码中，我想获取信息：标题和具有特定 url 下载的[http://linkWeb.com .pdf](http://linkWeb.com) [http://link.pdf](http://link.pdf)

这是html页面：

```
<div class="title-download">
<div id="01divTitle" class="title">
    <h3>
        <a id="01Title" onmousedown="" href="http://linkWeb.com">Titles</a>
        <span id="01LbCitation" class="citation">(<a id="01Citation" href="http://citation.com">Citations</a>)</span></h3>
</div>
<div id="01downloadDiv" class="download">
    <a id="01_downloadIcon" title="http://link.pdf" onmousedown="" target=""><img id="ctl01_icon" class="small-icon";" /></a>
</div> 
```

这是代码，但它返回空白结果：

```
<?php
include 'simple_html_dom.php';
set_time_limit(0);
$url  ='http://example.com';
$html = file_get_html($url) or die ('invalid url');

foreach($html->find('span[class=citation]') as $link){
    foreach($link->parent()->parent()->find('.download a') as $link2){  //I confused with the code in this line
       if(strtolower(substr($link2->title, strrpos($link2->title, '.'))) === '.pdf') {
           $link = $link->prev_sibling();
           echo $link->plaintext.'<br>';
           echo $link->href.'<br>';
       echo $link2->title.'<br>'; 
       }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T03:14:21.950

鉴于这`$link`是引用跨度，`$link->parent()->parent()`返回`div`带有 ID的`01divTitle`。而且，由于它`div`是您正在寻找的元素的*兄弟*而不是父元素，因此不返回任何结果。`.download``$link->parent()->parent()->find('.download a')`

也许`$link->parent()->parent()->parent()->find('.download a')`会更好。可能还有其他问题，但这绝对是其中之一。

# oracle11g - 无效标识符 - oracle

> ID：11597371
> 
> 赞同：0
> 
> 时间：2012-07-22T02:24:29.610
> 
> 标签：oracle11g

## 当我运行下面的查询时，我收到以下消息：

SQL 错误：ORA-00904：“B”。“MEMBERS_COUNT”：无效标识符 00904。00000 -“%s：无效标识符”

```
select pt.paym_type_name, pt.dvd_allowed, b.members_count
from payment_type pt
where paym_type_id in (select paym_type_id
                        from (SELECT paym_type_id, 
                                     count(paym_type_id) as members_count
                              FROM user_payment
                              WHERE (paym_type_id=1   OR
                                     paym_type_id=2   OR
                                     paym_type_id=3)  AND 
                                     SYSDATE <= (ADD_MONTHS(paym_date, 12) ) 
                              GROUP BY paym_type_id
                              ORDER BY MEMBERS_COUNT DESC) b
                        where rownum=1)
; 
```

我不明白为什么。我该如何解决？我确实需要在末尾添加 MEMBERS_COUNT 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T05:46:35.860

```
select pt.paym_type_name, pt.dvd_allowed, b_outer.members_count
from payment_type pt,
    (select paym_type_id,members_count
      from (SELECT paym_type_id, 
                   count(paym_type_id) as members_count
             FROM user_payment
            WHERE (paym_type_id=1   OR
                   paym_type_id=2   OR
                   paym_type_id=3)  AND 
                   SYSDATE <= (ADD_MONTHS(paym_date, 12) ) 
                   GROUP BY paym_type_id
                   ORDER BY MEMBERS_COUNT DESC) b_inner
                   where rownum=1) b_outer
where paym_type_id =b_outer.paym_type_id 
```

# entity-framework - LINQ to Entities 异常中不支持指定的类型成员“日期”

> ID：11597373
> 
> 赞同：111
> 
> 时间：2012-07-22T02:24:36.700
> 
> 标签：entity-framework, linq-to-entities

我在执行以下语句时遇到了异常。

```
 DateTime result;
 if (!DateTime.TryParse(rule.data, out result))
     return jobdescriptions;
 if (result < new DateTime(1754, 1, 1)) // sql can't handle dates before 1-1-1753
     return jobdescriptions;
 return jobdescriptions.Where(j => j.JobDeadline.Date == Convert.ToDateTime(rule.data).Date ); 
```

**例外**

```
The specified type member 'Date' is not supported in LINQ to Entities. Only initializers, entity members, and entity navigation properties are supported. 
```

我知道异常意味着什么，但我不知道如何摆脱它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2012-07-22T13:40:36.227

您可以使用[**EntityFunctions的**](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx)[**TruncateTime**](http://msdn.microsoft.com/en-us/library/dd395596.aspx)方法将属性正确转换为 SQL：[](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx)**`Date`**

 **```
using System.Data.Objects; // you need this namespace for EntityFunctions

// ...

DateTime ruleData = Convert.ToDateTime(rule.data).Date;
return jobdescriptions
    .Where(j => EntityFunctions.TruncateTime(j.JobDeadline) == ruleData); 
```

**更新：** `EntityFunctions`在 EF6 中已弃用，使用`DbFunctions.TruncateTime`

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2012-07-22T03:22:50.523

LINQ to Entities 无法将大多数 .NET Date 方法（包括您使用的转换）转换为 SQL，因为没有等效的 SQL。

解决方案是在 LINQ 语句之外使用 Date 方法，然后传入一个值。看起来好像是 Convert.ToDateTime(rule.data).Date 导致了错误。

在 DateTime 属性上调用 Date 也无法转换为 SQL，因此解决方法是比较可以转换为 LINQ 的 .Year .Month 和 .Day 属性，因为它们只是整数。

```
var ruleDate = Convert.ToDateTime(rule.data).Date;
return jobdescriptions.Where(j => j.Deadline.Year == ruleDate.Year 
                       && j.Deadline.Month == ruleDate.Month 
                       && j.Deadline.Day == ruleDate.Day); 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-12-09T17:31:05.310

对于 EF6，请改用 DbFunctions.TruncateTime(mydate)。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-10-01T11:42:40.350

ef6 中的“EntityFunctions.TruncateTime”或“DbFunctions.TruncateTime”正在运行，但在大数据中存在一些性能问题。

我认为最好的方法是这样做：

```
DateTime ruleDate = Convert.ToDateTime(rule.data);

DateTime  startDate = SearchDate.Date;

DateTime  endDate = SearchDate.Date.AddDay(1);

return jobdescriptions.Where(j.Deadline >= startDate 
                       && j.Deadline < endDate ); 
```

这比使用日期的一部分要好。因为查询在大数据中运行得更快。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-12-04T06:37:20.773

需要包括`using System.Data.Entity;`. 即使与`ProjectTo<>`

```
var ruleDate = rule.data.Date;
return jobdescriptions.Where(j => DbFunctions.TruncateTime(j.Deadline) == ruleDate); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-22T02:31:05.990

这意味着 LINQ to SQL 不知道如何将`Date`属性转换为 SQL 表达式。这是因为结构的`Date`属性`DateTime`在 SQL 中没有类似的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-05T20:52:57.590

**它对我有用。**

```
DateTime dt = DateTime.Now.Date;
var ord = db.Orders.Where
      (p => p.UserID == User && p.ValidityExpiry <= dt); 
```

来源：[Asp.net 论坛](https://forums.asp.net/post/4934580.aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-08T09:17:11.223

我有同样的问题，但我使用 DateTime-Ranges。我的解决方案是将开始时间（任何日期）操作为 00:00:00，将结束时间操作为 23:59:59 所以我不能再将我的 DateTime 转换为 Date，而是保持 DateTime。

如果您只有一个 DateTime，您还可以将开始时间（任何日期）设置为 00:00:00，将结束时间设置为 23:59:59，然后将其作为时间跨度进行搜索。

```
var from = this.setStartTime(yourDateTime);
var to = this.setEndTime(yourDateTime);

yourFilter = yourFilter.And(f => f.YourDateTime.Value >= from && f.YourDateTime.Value <= to); 
```

您也可以使用 DateTime-Range：

```
var from = this.setStartTime(yourStartDateTime);
var to = this.setEndTime(yourEndDateTime);

yourFilter = yourFilter.And(f => f.YourDateTime.Value >= from && f.YourDateTime.Value <= to); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-19T06:02:49.900

正如许多人在这里指出的那样，使用 TruncateTime 函数很慢。

如果可以的话，最简单的选择是使用 EF Core。它可以做到这一点。如果你不能，那么一个更好的 truncate 替代方法是根本不更改查询的字段，而是修改边界。如果您正在执行一个正常的“介于”类型查询，其中下限和上限是可选的，那么下面的方法可以解决问题。

```
 public Expression<Func<PurchaseOrder, bool>> GetDateFilter(DateTime? StartDate, DateTime? EndDate)
    {
        var dtMinDate = (StartDate ?? SqlDateTime.MinValue.Value).Date;
        var dtMaxDate = (EndDate == null || EndDate.Value == SqlDateTime.MaxValue.Value) ? SqlDateTime.MaxValue.Value : EndDate.Value.Date.AddDays(1);
        return x => x.PoDate != null && x.PoDate.Value >= dtMinDate && x.PoDate.Value < dtMaxDate;
    } 
```

基本上，我们不是将 PoDate 修剪回 Date 部分，而是增加查询上限和用户 < 而不是 <=**

# javascript - WebSQL，Phonegap。返回最后插入行的 ID

> ID：11597375
> 
> 赞同：18
> 
> 时间：2012-07-22T02:26:20.240
> 
> 标签：javascript, sql, cordova

在 Javascript for Phonegap 中写入 WebSQL DB 时，如何获取最后插入的（自动递增的）ID？

我认为使用下面注释掉的片段可能是可能的。

这是表的结构：

```
tx.executeSql('CREATE TABLE IF NOT EXISTS locations (id INTEGER PRIMARY KEY, lTitle TEXT, lDeleted INTEGER DEFAULT 0)'); 
```

这是我将行写入表格的地方：

```
tx.executeSql(
            'INSERT INTO locations (lTitle) VALUES (?)',
            [$('#newLocation').val()],
            function(tx, results){
                //alert('Returned ID: ' + results.rows.item(0).id);
            },
            errorCB
        ); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-22T02:55:59.133

我很接近。这可以解决问题：

```
tx.executeSql(
            'INSERT INTO locations (lTitle) VALUES (?)',
            [$('#newLocation').val()],
            function(tx, results){
                alert('Returned ID: ' + results.insertId);
            },
            errorCB
        ); 
```

# phpmyadmin - 什么会导致 phpmyadmin 显示不超过 30 行？

> ID：11597384
> 
> 赞同：1
> 
> 时间：2012-07-22T02:29:26.713
> 
> 标签：phpmyadmin

该表本身包含超过 700 行 - 但更改“显示”表单并提交它不会显示超过前 30 行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T02:34:20.730

这是 phpmyadmin 显示的默认行数。您可以将该限制更改为任何数字，对于您的情况，700 并从 0 开始。您可以找到文本字段来插入行数和起始字段。

即显示从记录#0 开始的700 行。

![在此处查看文本字段](../Images/834d481ffefdde255cbbc49dcc000b27.png)

或者

直接触发查询，

```
 SELECT * FROM `tbl_name` LIMIT 0 , 700 
```

# c# - 在 VS 2010 中重命名自定义控件，收到错误：“当前上下文中不存在名称‘InitializeComponent’”

> ID：11597385
> 
> 赞同：0
> 
> 时间：2012-07-22T02:29:39.740
> 
> 标签：c#, visual-studio-2010, custom-controls

我正在尝试按照以下 MSDN 说明创建自定义的 Windows 窗体控件：http: [//msdn.microsoft.com/en-us/library/7h62478z.aspx](http://msdn.microsoft.com/en-us/library/7h62478z.aspx)

（文章标题：如何：从现有 Windows 窗体控件继承；说明适用于 Visual Studio 2010）

这些说明似乎确实有效，但是如果我将控件的名称从 CustomControl1 更改为任何其他名称（通过更改类名称和构造函数名称），我会收到以下消息：

“当前上下文中不存在名称‘InitializeComponent’”

我在这里查看了类似的问题和答案，我认为他们中的任何一个都没有回答这个问题，但我可能是错的。如果我是，那么我不明白答案。

我希望有人可以帮助我。我已经在这上面浪费了很多时间。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:13:33.293

更改类名时，您会注意到新类名的末尾出现了一条红线。

将鼠标悬停在它上面直到出现一个小框，然后单击该框，然后单击“重命名...”。（它的快捷方式是：`Ctrl+.`<-这是句号键。）

就这样。

错误的原因是该`InitializeComponent`方法位于具有旧类名的单独文件中。通过选择上面提到的“重命名...” - Visual Studio 也将重命名该文件中的类。它还更改了构造函数的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T02:50:16.213

发布这个问题几分钟后，我想出了答案。我想，对于在 Visual Studio 方面有中等经验的人来说，答案是显而易见的，但它不适合我，所以如果他们碰巧读到这篇文章，也许我可以为他们节省一些时间。

要重命名按照问题中提供的链接中的 MSDN 说明创建的新创建的自定义控件：

*   将生成的源文件从 CustomControl1.cs（对于 C#）重命名为所需的名称
*   当 Visual Studio 询问您是否要更改所有引用时说是

而已。自定义控件名称已更改，不再报错。

# hashcode - Objects.hash() vs Objects.hashCode()，需要澄清

> ID：11597386
> 
> 赞同：73
> 
> 时间：2012-07-22T02:29:58.397
> 
> 标签：hashcode, java-7

从 Java 7 开始，我们有

```
o.hashCode();
Objects.hashCode(o);
Objects.hash(o); 
```

前两个与空检查大致相同，但最后一个是什么？

> 当提供单个对象引用时，返回值不等于该对象引用的哈希码。

这是为什么？我的意思是，我们不需要三种方法来做同样的事情，我理解，但为什么我们需要`Objects.hash()`呢？你什么时候会选择使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-07-25T18:55:37.987

请参阅 和 的[`hashCode`](http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#hashCode%28java.lang.Object%29)文档[`hash`](http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#hash%28java.lang.Object...%29)。 `hash`需要`Object...`而`hashCode`需要`Object`。给出的例子是：

```
@Override public int hashCode() {
    return Objects.hash(x, y, z);
} 
```

*   `Objects.hash(Object... values)`应该在您想要一个对象序列的散列的情况下使用，例如，当定义您自己的`hashCode`方法并且想要一个简单编码的散列用于构成您的对象标识的多个值时。
*   `Objects.hashCode(Object o)`当您想要单个对象的哈希时应该使用，如果对象为空则不抛出。
*   `Object::hashCode()`当你想要单个对象的散列时应该使用，如果对象为空，将抛出异常。

请注意，`hash(o)`并且`hashCode(o)`不一定会返回相同的东西！如果您正在为单个对象执行此操作，您可能应该使用`hashCode`.

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2018-10-04T19:42:42.697

# `Objects.hashCode`

实用程序方法[`Objects.hashCode( Object o )`](https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#hashCode(java.lang.Object))只是调用`hashCode`传递对象的方法。

## 容忍 NULL

那么为什么要发明或使用这种方法呢？为什么不自己调用对象的`hashCode`方法呢？

这种方法有一个好处：`NULL`➙ `0`。实用程序方法允许空值。

*   如果你调用`Objects.hashCode( myObject )`where `myObject`is `NULL`，你会得到一个零 (0)。
*   相反，调用`myObject.hashCode()`when `myObject`is`NULL`会引发`NullPointerException`参数。

是否需要容忍 null 取决于您自己在特定情况下的判断。

# `Objects.hash`

该实用程序方法[`Objects.hash( Object o , … )`](https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#hash(java.lang.Object...))用于不同的目的。该方法有两个阶段：

*   调用`.hashCode`每个传递的对象，收集每个结果。
*   计算收集到的结果的哈希值。

## 散列的散列

如果您传递单个对象，`Objects.hash( myObject )`, 首先`myObject.hashCode`被调用并收集，然后计算该单个项目集合的哈希值。所以，你最终得到一个[散列](https://en.wikipedia.org/wiki/Hash_function)的散列。

在散列单个对象时，了解`Objects.hashCode( myObject )`返回的结果与`Objects.hash( myObject )`. 实际上，第二个返回第一个结果的散列。

# 实践中烦人

这两种`Objects`方法所采用的方法的逻辑本身是有意义的。

不幸的是，在实践中，对于我们这些试图在日常使用中使用它们的人来说，在我们的 POJO 上编写代码以覆盖`hashCode`，相应地`equals`，我们必须三思而后行来决定调用哪个。

*   如果您的`hashCode`(and `equals`) 覆盖基于您班级的单个成员，请使用`Objects.hashCode( member )`.
*   如果您的`hashCode`(and `equals`) 覆盖基于您的类的多个属性，请使用`Objects.hash( memberA , memberB , memberC )`.

## 单个成员，不容忍 NULL

```
@Override
public int hashCode() {
    return this.member.hashCode() ;  // Throws NullPointerException if member variable is null.
} 
```

## 单个成员，容忍 NULL

```
@Override
public int hashCode() {
    return Objects.hashCode( this.member ) ;  // Returns zero (0) if `this.member` is NULL, rather than throwing exception.
} 
```

## 多成员，容忍 NULL

```
@Override
public int hashCode() {
    return Objects.hash( this.memberA , this.memberB , this.memberC  ) ;  // Hashes the result of all the passed objects’ individual hash codes.  
} 
```

# 例子

我们可以很简单地测试这些不同的方法。

## UUID

让我们以一个[`UUID`](https://docs.oracle.com/javase/7/docs/api/java/util/UUID.html)对象为例。[UUID](https://en.wikipedia.org/wiki/Universally_unique_identifier)（*通用唯一标识符*）是一个128 位的值，其中某些位具有某些语义。

*OpenJDK*内部实现将`UUID`128 位值表示为一对 64 位`long`整数。

相同的实现覆盖`Object::equals`并`Object::hashCode`查看存储在该对长整数中的数据。这是[这两种方法的源代码](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/lang/Object.java)。

```
public boolean equals(Object obj) {
    if ((null == obj) || (obj.getClass() != UUID.class))
        return false;
    UUID id = (UUID)obj;
    return (mostSigBits == id.mostSigBits &&
            leastSigBits == id.leastSigBits);
} 
```

```
public int hashCode() {
    long hilo = mostSigBits ^ leastSigBits;
    return ((int)(hilo >> 32)) ^ (int) hilo;
} 
```

## 示例代码

实例化我们的 UUID 对象。

```
UUID uuid = UUID.randomUUID(); 
```

计算我们的哈希值。

```
int hash1 = uuid.hashCode();
int hash2 = Objects.hashCode( uuid );  // Result matches line above.

int hash3 = Objects.hash( uuid );  // Returns a hash of a hash.
int hash4 = Objects.hash( uuid.hashCode() ); // Result matches line above. 
```

转储到控制台。

```
System.out.println( "uuid.toString(): " + uuid.toString() );
System.out.println( " 1/2 = " + hash1 + " | " + hash2 );
System.out.println( " 3/4 = " + hash3 + " | " + hash4 ); 
```

请参阅[在 IdeOne.com 上实时运行的代码](https://ideone.com/kQKYh7)。

> uuid.toString(): 401d88ff-c75d-4607-bb89-1f7a2c6963e1
> 
> 1/2 = 278966883 | 278966883
> 
> 3/4 = 278966914 | 278966914

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-12-08T16:56:50.127

Object 的默认 hashCode() 返回对象的内存地址。因此，如果您有以下课程：

```
class Car {
    String make;
    String model;
    int year;

    public Car(String make, String model, int year) {
        this.make = make;
        this.model = model;
        this.year = year;
    }
} 
```

然后创建两个对象：

```
Car car1 = new Car("Toyota", "Corolla", 2010);
Car car2 = new Car("Toyota", "Corolla", 2010); 
```

car1.hashCode() 与 car2.hashCode() 不同，因为每个对象都有不同的内存地址。

如果您希望 car1 和 car2 返回相同的哈希码怎么办？在这种情况下，您应该重写 Car 类的默认 Object hashCode() 方法，如下所示：

```
@Override
public int hashCode() {
    Object[] x = {model, make, Integer.valueOf(year)};
    int hashArray = Arrays.hashCode(x);
    return hashArray;
} 
```

这将使 car1.hashCode() 等于 car2.hashCode() 因为 String.hashCode() 根据字符串内容计算 hashCode，而 Integer.hashCode() 将返回整数值本身。

在 Java 7 中，您可以只使用 Objects.hash(Object... values)。所以我们新的 Car hashCode() 将如下所示：

```
@Override
public int hashCode() {
    return Objects.hash(model, make, year);
} 
```

Objects.hash(Object... values) 将为您调用 Arrays.hashCode。

最后， Objects.hashCode(Object o) 将进行空检查。如果对象为空，它将返回 0。否则，它将调用对象 hashCode() 方法。

# c# - C# - 使用 .ashx 文件加载远程图像并发送到浏览器

> ID：11597389
> 
> 赞同：2
> 
> 时间：2012-07-22T02:30:39.563
> 
> 标签：c#, asp.net

我正在尝试从我的 Amazon S3 存储桶加载远程图像并将其以二进制形式发送到浏览器。我也在尝试同时学习 ASP.Net。我多年来一直是经典程序员，需要改变。我昨天开始，今天第一次头痛。

在我的应用程序的一个页面上，我有这个图像元素：

```
<img src="loadImage.ashx?p=rqrewrwr"> 
```

在 loadImage.ashx 上，我有这个确切的代码：

```
-------------------------------------------------
<%@ WebHandler Language="C#" Class="Handler" %>

string url = "https://............10000.JPG";
byte[] imageData;
using (WebClient client = new WebClient()) {
   imageData = client.DownloadData(url);
}

public void ProcessRequest(HttpContext context)
{
    context.Response.OutputStream.Write(imageData, 0, imageData.Length);
}
------------------------------------------------- 
```

这可能有很多问题，因为这是我第一次尝试 .net 并且不知道我在做什么。首先，我收到以下错误，但肯定还会有更多错误。

```
CS0116: A namespace does not directly contain members such as fields or methods 
```

这是在第 3 行，即`string url = "https://............"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T03:17:31.917

对于 HttpHandler，您必须将代码放在后面的代码中……如果您在解决方案资源管理器中展开 loadimage.ashx，您应该会看到一个 loadimage.ashx.cs 文件。该文件是您的逻辑所在的位置，并且所有这些都应该在 ProcessRequest 方法中。

所以 loadimage.ashx 应该基本上是空的：

```
<%@ WebHandler Language="C#" Class="loadimage" %> 
```

loadimage.ashx.cs 应该包含其余部分：

```
using System.Web;

public class loadimage : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        string url = "https://............10000.JPG";
        byte[] imageData;
        using (WebClient client = new WebClient())
        {
            imageData = client.DownloadData(url);
        }

        context.Response.OutputStream.Write(imageData, 0, imageData.Length);
    }

    public bool IsReusable
    {
        get { return false; }
    }
} 
```

或者，您可以创建一个提供图像的 aspx 页面。这删除了需求背后的代码，但增加了一些开销......创建一个 loadimage.aspx 页面，其中包含以下内容：

```
<%@ Page Language="C#" AutoEventWireup="true" %>

<script language="c#" runat="server">
    public void Page_Load(object sender, EventArgs e)
    {
        string url = "https://............10000.JPG";
        byte[] imageData;
        using (System.Net.WebClient client = new System.Net.WebClient())
        {
            imageData = client.DownloadData(url);
        }

        Response.ContentType = "image/png";  // Change the content type if necessary
        Response.OutputStream.Write(imageData, 0, imageData.Length);
        Response.Flush();
        Response.End();
    }
</script> 
```

然后在图像 src 中引用这个 loadimage.aspx 而不是 ashx。

# html - Webkit 溢出滚动导致 div 不显示？

> ID：11597391
> 
> 赞同：6
> 
> 时间：2012-07-22T02:30:48.913
> 
> 标签：html, css, ios, mobile-safari

我的网站内容处于绝对位置`div`，填满了整个屏幕。这个 div 上的滚动通常很笨拙，因为它不是原生的动量滚动。解决方案？追加`-webkit-overflow-scrolling: touch;`到 div。

动量滚动现在有效，但是当我向下滚动页面时，`div`元素没有显示出来。控制台没有显示错误，实际页面没有任何问题，但个别帖子（`div`'s）没有显示。这是一个例子：

![在此处输入图像描述](../Images/2a27d1dcfc0262850809afd78983b619.png)

任何人都可以在他们的 iPad 上确认这一点，或提出修复建议吗？我宁愿不使用类似 Scrollability 的东西。这可能是 iOS6 测试版造成的，但我想放心。

您可以在 iPad 上查看此[网站](http://notebook.charliecarver.me)

[如果有人想让我解释我的书签，我很乐意这样做。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:42:05.263

当前 .post CSS 类使用位置：相对。如果删除该行，问题就会消失。显然，当不在视图中时，相对位置的元素会被隐藏。不完全确定 iPad 这样做的原因或者它是否是一个错误。根据我的经验，iPad 设备会尝试尽可能高效地运行。例如，如果你滚动 JS 动画被冻结。也许这是一种让 iPad 更有效地呈现页面的技术。希望这会有所帮助。

这篇文章*可能*是相关的并且有一个解决方法：[CSS3 property webkit-overflow-scrolling:touch ERROR](https://stackoverflow.com/questions/7808110/css3-property-webkit-overflow-scrollingtouch-error)

[使用 '-webkit-overflow-scrolling: touch' 在滚动/拖动时隐藏内容](https://stackoverflow.com/questions/9801687/using-webkit-overflow-scrolling-touch-hides-content-while-scrolling-dragging?rq=1)

# vb.net - 问题登录 vb.Net？

> ID：11597394
> 
> 赞同：1
> 
> 时间：2012-07-22T02:31:29.517
> 
> 标签：vb.net

我的登录有问题...好吧，让我解释一下我的问题，问题是我想创建一个有限制的登录，我有一些文本框，绑定源属性更改为我的数据库。但是当我输入不在数据库中的东西时程序冻结了，我会发布我的代码，希望你能帮助我（=

```
Private Sub KryptonButton1_Click(ByVal sender As System.Object, 
                                 ByVal e As System.EventArgs) 
            Handles KryptonButton1.Click

    If txtUser.Text <> UserTextBox.Text Then
        While txtUser.Text <> UserTextBox.Text
            Me.UsuarioContraseñaBindingSource.MoveNext()
        End While
        If txtUser.Text = UserTextBox.Text Then
            KryptonMessageBox.Show("Welcome")
        Else
            KryptonMessageBox.Show("Error")
        End If
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:33:52.793

仔细查看代码中的循环及其退出条件……循环在什么情况下退出？否则会发生什么？

一般来说，您需要播放并涵盖所有场景，但您已经知道这里的场景：您的用户输入不在数据库中并且应用程序冻结。这应该提供足够的提示来找到原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T03:56:06.397

```
Private Sub OK_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles OK.Click
        If txt_user.Text <> vbNullString And txt_pass.Text <> vbNullString Then
            Dim chkcmd As New SqlCommand("select * from users where username = '" & txt_user.Text & "' and password = '" & txt_pass.Text & "'", con)
            If con.State = ConnectionState.Open Then con.Close()
            con.Open()
            Dim chkval As SqlDataReader = chkcmd.ExecuteReader
            If chkval.Read = True Then
                Me.Hide()
                Form2.Show()
            Else
                MsgBox("Invalid key to login!", MsgBoxStyle.Exclamation, "Message")
                txt_pass.Clear()
                txt_user.Clear()
                txt_user.Select()
            End If
            con.Close()
        End If
    End Sub 
```

# git - 在我的 github 帐户中显示来自非 github git 存储库的提交历史记录？

> ID：11597395
> 
> 赞同：1
> 
> 时间：2012-07-22T02:31:31.750
> 
> 标签：git, version-control, github, repository

几年前，我向一个存储在大学服务器而不是 github.com 上的 git 存储库提交了一些工作。这就是该仓库所在的位置：[http ://charm.cs.uiuc.edu/cgi-bin/gitweb2.cgi?p=charm.git;a=summary](http://charm.cs.uiuc.edu/cgi-bin/gitweb2.cgi?p=charm.git;a=summary)

现在，我在求职时尝试使用我的 github 帐户作为“补充简历”。我想在我的 github.com 帐户上显示[charm.cs.uiuc.edu/...](http://charm.cs.uiuc.edu/cgi-bin/gitweb2.cgi?p=charm.git;a=summary) git commit 历史记录。是否可以将这样的 repo 与我的 github.com 帐户链接？

请注意，我实际上并不想将 repo 存储在 github.com 上；我只希望提交历史记录出现在我的 github.com 用户帐户中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T02:34:52.993

您可以创建用户页面并粘贴屏幕截图或 HTML 页面或类似的东西，但否则您需要将 repo 存储在那里。

# objective-c - Cocoa apis 报告可用空间的错误值，我应该使用什么？

> ID：11597397
> 
> 赞同：5
> 
> 时间：2012-07-22T02:31:53.903
> 
> 标签：objective-c, cocoa, osx-lion

有谁知道 Apple 使用什么 api 来确定 Lion 中的可用空间的 Get Info 面板？我试图获得与 Apple 报告的相同可用空间失败的所有代码，即使 Quick Look 也没有显示 Get Info 显示的相同空间。如果我删除一堆文件并尝试读取可用空间，这似乎会发生。

![Lion 上的可用空间不正确](../Images/11764b7d1d4f90f50e5a5c6b05a995bd.png)

当我使用 NSFileManager -> NSFileSystemFreeSize 我得到 42918273024 字节

当我使用 NSURL -> NSURLVolumeAvailableCapacityKey 我得到 42918273024 字节

当我使用 statfs -> buffer.f_bsize * buffer.f_bfree 我得到 43180417024 字节

statfs 获得与 Quick Look 相似的结果，但如何匹配 Get Info？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:42:27.370

您可能会看到本地 Time Machine 快照备份的结果。以下引用来自以下 Apple 支持文章 - [OS X Lion：关于 Time Machine 在便携式 Mac 上的“本地快照”](http://support.apple.com/kb/HT4878)：

> OS X Lion 中的 Time Machine 包含一项名为“本地快照”的新功能，可将您创建、修改或删除的文件副本保存在内部磁盘上。本地快照补充了常规 Time Machine 备份（存储在您的外部磁盘或 Time Capsule 上）为您提供“安全网”，以防您可能离开外部备份磁盘或 Time Capsule 并意外删除文件。

文章最后说：

> **注意：**您可能会注意到“磁盘工具”、“Finder”和“获取信息”检查器之间的可用空间统计数据有所不同。这是意料之中的，可以放心地忽略。Finder 在不考虑本地快照的情况下显示磁盘上的可用空间，因为本地快照会在需要时放弃其磁盘空间。

看起来您尝试过的所有测量可用磁盘空间的编程方法都给出了磁盘上真正的可用空间值，而不是通过删除本地 Time Machine 备份可以提供的空间。我怀疑像命令行工具这样的命令行工具`df`是否也知道本地 Time Machine 备份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T09:37:59.270

这是一种解决方法，不是真正的 api，但是好的旧 unix 命令`df -H`将为您提供与“获取信息”面板中相同的信息，您只需要选择磁盘行并解析输出即可。

df 程序还有许多您可能想要探索的其他选项。在这种特殊情况下，`-H`开关告诉程序以人类可读的格式输出数字并使用以 10 为底的大小。

在这里查看如何从应用程序中运行命令行并在程序中获取输出：[Execute a terminal command from a Cocoa app](https://stackoverflow.com/questions/412562/execute-a-terminal-command-from-a-cocoa-app)

我相信两者的基础`df`和获取信息面板很可能是同一件事。

# javascript - Javascript 闭包和继承

> ID：11597398
> 
> 赞同：1
> 
> 时间：2012-07-22T02:31:59.750
> 
> 标签：javascript, inheritance

我有两个文件：BaseClass.js 和 DerivedClass.js。内容如下

```
//---------------------BaseClass.js----------------------------

(function () {
    BaseClass= function() { };
    BaseClass.prototype.getTestVar = function() {
    return 'base test variable';
    };
})();

//----------------DerivedClass.js----------------------------

(function () {
    DerivedClass= function() { };
    DerivedClass.inherits(BaseClass);
    DerivedClass.prototype = new BaseClass();
    DerivedClass.prototype = {
        newvar : 'derived func variable ',
        getNewVar : function() { return this.newvar; }
    };
})(); 
```

* * *

在我的 html 文件“test.html”中，我有以下内容

```
var dc = new DerivedClass();
alert(
    'The value in newvar of derived class ' + dc.getNewVar() + 
    ' base class variable ' + dc.getTestVar()
); 
```

我收到 dc.getTestVar() 不是函数的 Javascript 错误。非常感谢解决此问题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:41:19.023

看看这几行：

```
DerivedClass.prototype = new BaseClass();
DerivedClass.prototype = {
    newvar : 'derived func variable ',
    getNewVar : function() { return this.newvar; }
}; 
```

首先它分配一个新`BaseClass`的作为原型，然后下一行用一个新的对象*覆盖该原型。*也许您需要单独分配`DerivedClass.prototype.newvar`和分配`DerivedClass.prototype.getNewVar`- 假设它符合您使用的任何提供该`inherits`方法的经典继承库。

那是，

```
DerivedClass.prototype = new BaseClass();
DerivedClass.prototype.newvar = 'derived func variable';
DerivedClass.prototype.getNewVar = function() { return this.newvar; } 
```

尽管如此，这似乎是经典继承和原型继承的混合体。考虑阅读该经典继承库的文档，看看是否有更一致的方式来做这种事情。

例如，如果您使用[Crockford 的经典继承](http://www.crockford.com/javascript/inheritance.html)（从`inherits`关键字猜测），这似乎是他声明方法的预期方式：

```
DerivedClass.method('getNewVar', function () { return this.newvar }); 
```

诚然，这*完全*等同于您已经在做的事情，但是，如果我们要使用他的库，不妨使用他的风格来保持一致性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T02:41:49.527

在此刻：

```
DerivedClass.prototype = new BaseClass();
DerivedClass.prototype = {
    newvar : 'derived func variable ',
    getNewVar : function() { return this.newvar; }
}; 
```

您首先将原型设置为`BaseClass`，然后用新对象覆盖它。试试这个：

```
DerivedClass.prototype = new BaseClass();
DerivedClass.prototype.newvar = 'derived func variable ';
DerivedClass.prototype.getNewVar = function() { return this.newvar; }; 
```

# dreamweaver - Dreamweaver 中的缩进代码

> ID：11597399
> 
> 赞同：1
> 
> 时间：2012-07-22T02:32:37.613
> 
> 标签：dreamweaver

我已经为此搜索了很多，但找不到如何在 Dreamweaver 中缩进代码......

COMMAND-OPT+] - 我在 google 上找到了这个，但它对我不起作用，我正在使用 mac book air 并实现] 我必须做 alt+9 ( ] -> alt+9

我只想自动缩进一堆代码。我知道dreamweaver具有自动缩进功能，但这仅在我编写代码时有效，但是当我复制一段没有像我一样缩进的代码时，（我使用制表符），它不会缩进它们。我必须手动完成

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-05T16:20:30.200

I typically use the formatting tool at [http://www.freeformatter.com/html-formatter.html#ad-output](http://www.freeformatter.com/html-formatter.html#ad-output). If you're using a copied block of code, you could format it with this tool and paste it accordingly into your existing code. An extra step, but well worth it in my experience.

# android - 更改 project.properties 文件 android 时导入失败

> ID：11597403
> 
> 赞同：0
> 
> 时间：2012-07-22T02:34:21.433
> 
> 标签：android

我最近在我的项目中加入了 adMob。它包含一个列表`Activity`和一个`Activity`扩展的 main `Activity`。我不得不`project.properties`在最后一行将文件更改为 android-13 以针对和 13 进行编译。我陷入了修复中。如果我将 android 版本更改为 13，整个列表活动就会在每一行中出现错误。它`"cannot import android.os.*"`在第一行有错误消息。主要活动很好。如果我针对原始方式的 android-10 进行编译，那么我可以在模拟器上运行它，但我会得到消息以添加带有配置更改的 adActivity。请就如何修复列表活动中的错误提出建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T02:41:58.460

你的sdk中有API13吗？

安卓/平台/（见这里）

# java - 在 Java 中对 Sprite 的 ArrayList 进行排序

> ID：11597404
> 
> 赞同：1
> 
> 时间：2012-07-22T02:34:30.783
> 
> 标签：java, sorting, collections, sprite

我正在修改我不久前用 Java 编写的游戏引擎。我有一个包含 Sprite 对象的主 Arraylist。Sprite 类以浮点类型保存指定精灵的 X 和 Y 位置。

我正在尝试根据它们与特定精灵（玩家）的相对距离对列表进行排序。我有一种方法可以计算两个精灵之间的距离。

```
/**Retrieve a double value that represents the distance between 2 sprites*/
public static double getSpriteDistance(Sprite s1, Sprite s2) {
    return Math.hypot((s1.getX() - s2.getX()), (s1.getY() - s2.getY()));
} 
```

我有另一种方法，我传递用于根据其位置排序的 Sprite 以及所有精灵的主列表（根据地图，列表中大约有 500-700 个 Sprite）

```
/**Sort a Sprite list relatively based on a specific sprite's location*/
public static ArrayList<Sprite> relativeSort(Sprite s1, ArrayList<Sprite> list) {             
    //Sort
    return list;
} 
```

就如何做到这一点而言，我通常会陷入困境，而就效率和速度而言，我会展望未来。我有一种测量两个精灵之间距离的方法，现在我只需要对列表进行排序，以便要排序的特定精灵是列表中的第一项，最远的精灵是最后一项。

我曾想过使用递归方法进行排序，或者使用while循环，但我觉得好像有更好的方法。我阅读了有关使用 Comparators 和 Collection 的 sort() 方法的信息。但是我看到的例子是非常基本的。

感谢您的帮助，如果您有任何问题需要回答以更好地帮助我，我将很乐意回答。

编辑：我感觉有人会将这个链接到我，所以我只是澄清一下我知道它，但是很难理解如何使用它来实现我上面指定的内容：

[http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T03:03:11.967

您需要创建一个`Comparator`遵循此签名的：

```
public interface Comparator<Sprite> {
    public int compare(Sprite obj1, Sprite obj2);
} 
```

如果要在列表中首先排序，则该方法`compare`应返回正数，否则返回负数。`obj1`

然后你可以将它传递给`Collections.sort()`.

* * *

实际上，您可以像这样轻松地即时创建一个类：

```
/**Sort a Sprite list relatively based on a specific sprite's location*/
public static ArrayList<Sprite> relativeSort(Sprite s0, ArrayList<Sprite> list) {             

    Comparator<Sprite> comp = new Comparator<Sprite>() {
        public int compare(Sprite s1, Sprite s2) {
            //return a positive number if s1 is closer to s0
            //return a negative number if s2 is closer to s0
        }
    };
    Collections.sort(list, comp);
    return list;
} 
```

# php - 使用 MAMP 在本地设置远程 PHP 网站的类错误

> ID：11597407
> 
> 赞同：1
> 
> 时间：2012-07-22T02:35:26.503
> 
> 标签：php, mysql, mamp

我已经努力缩小远程网站可能出现的问题列表，我被要求在本地复制。

*   我已经更新了整个网站的相对/绝对路径。
*   我已将 MAMP 降级为早期版本的 PHP。
*   我已经确认本地文件权限与远程文件权限相同。

我很困惑为什么如果网站的确切结构在本地复制，为什么代码会出现致命错误。如何进一步调试或改进我将网站“下载”到本地 MAMP 目录？

`Notice: Undefined index: errors in /Applications/MAMP/htdocs/core/config/config.php on line 21 2 Warning require_once(index.php) [function.require-once]: failed to open stream: No such file or directory /Applications/MAMP/htdocs/core/config/config.php 116`

`Fatal error: require_once() [function.require]: Failed opening required 'index.php' (include_path='/Applications/MAMP/htdocs/core/classes/:/Applications/MAMP/htdocs/view/classes/:/:/:/Applications/MAMP/htdocs/core/pear/') in /Applications/MAMP/htdocs/core/config/config.php on line 116`

这是导致问题的自动加载功能 - 我只是不知道为什么：

```
`//AUTOLOAD
function __autoload($class_name)
{
    if($GLOBALS['show_dev'])
    {
        if(!isset($GLOBALS['starttime'])) {
            $GLOBALS['starttime'] = microtime(true);
        }
        $stack = array();
        foreach(debug_backtrace() as $stack_item) {
            $stack[] = $stack_item['file'] . ': ' . $stack_item['function'] . ': ' .                        $stack_item['line'];
        }
        $debug =  array(
            'Loading Class' => $class_name,
            'Class Loaded at' => number_format(microtime(true) - $GLOBALS['starttime'], 4, '.', ''), 
            'Memory (MB) used before class load' => (memory_get_usage() / (1024 * 1024)),
            'Current Stack Trace'=> implode("<br />", $stack)
        );

        $GLOBALS['debug'][] = $debug;
    }
    echo $class_name;
    require_once($class_name . ".php");
}` 
```

查看常量变量定义的设置后，我注意到使用了“realpath”函数——为什么在这种情况下需要 realpath？

` 函数 setConstants() {

```
 if (!$this->info['constants'] || $GLOBALS['nocache'])
    {
        $this->info['constants'] = array
        (
            'SECTION'       => $this->section,
            'CONST_DEFINED' => true,
            'PEAR_ROOT'     => "/Applications/MAMP/htdocs/core/pear/",
            'SERVERS'       => "localhost:8888",

            'DOCUMENT_ROOT' => realpath('/Applications/MAMP/htdocs/view/') . "/",           
            'CORE_ROOT'     => realpath('/Applications/MAMP/htdocs/core/') . "/",           
            'CLASS_PATH'    => realpath('/Applications/MAMP/htdocs/classes/') . "/",            
            'CORE_CLASS_PATH'   => realpath('/Applications/MAMP/htdocs/core/classes/') . "/",

            'EMAIL_DATA_PATH'   => realpath('/Applications/MAMP/htdocs/core/emails/data/') . "/",

            'CORE_DATA_PATH'    => realpath('/Applications/MAMP/htdocs/view/'.$this->section.'/data/') . "/",
            'CORE_ACTION_PATH'  => realpath('/Applications/MAMP/htdocs/view/'.$this->section.'/actions/') . "/",
            'CORE_CONTROL_PATH' => realpath('/Applications/MAMP/htdocs/view/'.$this->section.'/controllers/') . "/",
            'CORE_HTML_PATH' => realpath('/Applications/MAMP/htdocs/view/'.$this->section.'/html/') . "/",

            'COMPONENT_DATA_PATH'   => realpath('/Applications/MAMP/htdocs/view/'.$this->section.'/data/components/') . "/",
            'COMPONENT_HTML_PATH' => realpath('/Applications/MAMP/htdocs/view/'.$this->section.'/html/components/') . "/",              
        );

        //$GLOBALS['cache']->set($this->cache_file_name,$GLOBALS['info'],1);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:16:24.887

阅读这篇 SO 帖子。[PHP Zend require_once](https://stackoverflow.com/questions/11188603/php-zend-require-once-failed-to-open-stream-and-failed-opening-required)。从您发布的内容来看，您似乎没有设置真实路径。如果是这样，这将导致失败。

# java - 使用 Weblogic 的简单 JMS 的分步示例

> ID：11597409
> 
> 赞同：2
> 
> 时间：2012-07-22T02:35:39.517
> 
> 标签：java, jms, weblogic

任何人都可以建议我创建 JMS 消息传递的分步示例，我正在使用 Weblogic 和 eclipse。我是 JMS 的新手。我能够创建 weblogic 队列。但是我们如何在 Eclipse 中配置并在 weblogic 上部署应用程序。eclipse中有发送者和接收者类。

但有人可以解释我所有的seteps。

*   需要什么罐子？
*   如何在 weblogic 上部署？
*   申请流程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T03:42:13.443

您可以使用 EJB 3.0 找到一个很好的示例。请参阅以下内容：

*   [消息驱动 Bean 入门](http://docs.oracle.com/cd/E13224_01/wlw/docs103/guide/ejb/messagedriven/conGettingStartedWithMDBs.html)
*   [处理 JMS 消息](http://docs.oracle.com/cd/E13224_01/wlw/docs103/guide/ejb/messagedriven/conProcessingJMSMessages.html)
*   [使用 WebLogic 队列的基本 JMS 演示 « Middleware Magic](http://middlewaremagic.com/weblogic/?p=1987)

这是使用[Oracle Workshop for WebLogic 10g R3](http://www.oracle.com/technetwork/developer-tools/workshop/overview/index.html)。

另一个示例是为 WebLogic 10g R3[开发基本 JMS 应用程序](http://docs.oracle.com/cd/E24329_01/web.1211/e24387/implement.htm#i1317694)[和](http://docs.oracle.com/cd/E15051_01/wls/docs103/jms/implement.html)为 Oracle WebLogic Server 12c 第 1 版开发基本 JMS 应用程序。在最后一种情况下，您可能需要[Oracle Enterprise Pack for Eclipse](http://www.oracle.com/technetwork/developer-tools/eclipse/downloads/index.html)。

# java - 如何设置编译器选项，使其拒绝这个不能静态保证正确性的程序？

> ID：11597412
> 
> 赞同：2
> 
> 时间：2012-07-22T02:36:45.900
> 
> 标签：java, eclipse, debugging, compiler-construction, static-analysis

我有以下 Java 程序，Eclipse 在其左侧标出了一个红十字，但该程序在 Eclipse 中编译得很好！

显然，Eclipse 认为 'y' 可能未初始化，因此它先验地拒绝该程序，但编译器似乎更宽容。

我的问题是，如何设置 Eclipse 的编译器选项，使其拒绝该程序？![在此处输入图像描述](../Images/89abb84f62ed2341e4332a7416ea8f5a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T06:46:47.450

检查您的 Java Compiier “错误/警告”首选项，特别是在底部，它说将错误视为致命错误。

![在此处输入图像描述](../Images/d472be8adf58a9780fa098c07e7a9507.png)

# php - 如何使用 PHP 重定向在新选项卡中自动打开外部链接？

> ID：11597413
> 
> 赞同：2
> 
> 时间：2012-07-22T02:37:35.123
> 
> 标签：php, jquery, redirect, hyperlink, external

我们目前有一些通过我们的跟踪软件的 php 重定向，我想在访问者浏览器的新选项卡中打开它们，但不想通过整个站点手动添加`target="_blank"`或`rel=external`.

我们当前的链接看起来像这样

```
<a href="http://www.website-shown-browser.com" onclick="this.href='http://'+window.location.host+'/visit/redirect.php'">Website</a> 
```

我看到了一些 jQuery 代码示例，它们根据域 url 自动识别外部链接，但是我们正在使用我们在域上托管的这些重定向，因此这些链接将被过滤掉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T02:47:12.007

与手动添加相比，这是可能的，但不一定有效。您将选择所有 a 标签并检查它们的 href 是否是外部的。`target`然后，如果它是，您将`_blank`为该元素设置属性：

```
$('a').each(function() {
   var a = new RegExp('/' + window.location.host + '/');
   if(!a.test(this.href)) {
       $(this).click(function(event) {
           event.preventDefault();
           event.stopPropagation();
           window.open(this.href, '_blank');
       });
   }
}); 
```

一种更有效的方法是调整您的选择器以仅选择以 开头的标签`http://`，但这仅在您的内部链接没有前缀时才有效`http://`：

```
$("#content a[href^='http://']").attr("target","_blank"); 
```

# azure-table-storage - 在 Azure 表存储中存储实体指针（外键）的最佳做法

> ID：11597414
> 
> 赞同：0
> 
> 时间：2012-07-22T02:37:37.697
> 
> 标签：azure-table-storage

Azure 表存储允许你使用表名称、分区键和行键查找实体。

但是，如果我将指向另一个实体中的一个实体的指针存储在另一个实体中（即 rdb 术语中的外键），是连接这 3 个值的最佳方法，还是有更直接的方式说“这个另一个实体*这里*存在“？像永久指向实体位置的 URI 一样？

我 90% 确定答案是否定的，但 100% 希望答案是肯定的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:51:54.780

如果您愿意，*可以*使用 URL，但它与连接表名、分区键和行键并没有太大区别。（该 URL 还包括帐户名称，但除此之外它只是这三条信息的简单格式。）

# google-chrome-extension - 如何在两个不同选项卡的内容脚本之间传输数据？

> ID：11597416
> 
> 赞同：4
> 
> 时间：2012-07-22T02:38:04.870
> 
> 标签：google-chrome-extension, content-script

在我的扩展中，我需要将一些数据从一个选项卡的内容脚本传输到另一个选项卡的内容脚本。如果我知道该选项卡对象名称或 url 的一部分，如何使用 chrome.tabs 选择某个选项卡？两个标签的脚本如何通信？

**更新：**

显然我在 chrome.extension 中没有方法 sendMessage。当我从内容脚本运行以下内容时：

```
chrome.extension.sendMessage("message"); 
```

我进入控制台：

> 未捕获的类型错误：对象 # 没有方法 'sendMessage'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T09:33:03.973

首先，请注意在扩展中传递的消息是 JSON 序列化的。消息中不包含不可序列化的类型，例如函数。

在内容脚本中，您必须将消息传递到后台页面，因为没有直接访问其他选项卡的方法。

```
// Example: Send a string. Often, you send an object, which includes
//  additional information, eg {method:'userdefined', data:'thevalue'}
chrome.extension.sendMessage(' ... message ... '); 
```

在[后台页面](http://code.google.com/chrome/extensions/background_pages.html)中，使用[`chrome.tabs.query`](http://code.google.com/chrome/extensions/tabs.html#method-query)方法获取选项卡的ID。为简单起见，我对模式和 URL 进行了硬编码。以这种方式包含上一条消息中的查询值可能是一个好主意`{query:{...}, data:...}`：

```
// background script:
chrome.extension.onMessage.addListener(function(details) {
    chrome.tabs.query({
        title: "title pattern",
        url: "http://domain/*urlpattern*"
    }, function(result) {
        // result is an array of tab.Tabs
        if (result.length === 1) { // There's exactely one tab matching the query.
            var tab = result[0];
            // details.message holds the original message
            chrome.tabs.sendMessage(tab.id, details.message);
        }
    });
}); 
```

[`chrome.tabs.sendMessage`](http://code.google.com/chrome/extensions/tabs.html#method-sendMessage)用于将原始数据传递到不同的选项卡。

备注：在示例中，我仅在查询产生一个唯一选项卡时传递消息。当唯一性不是先决条件时，只需遍历所有生成的选项卡，使用[`result.forEach`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)or：

```
for (var i=0, tab; i<result.length; i++) {
    tab = results[i];
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T04:10:10.283

从内容脚本中，您只能与后台进程进行通信。您可以使用背景作为中介在不同选项卡中的两个内容脚本之间进行通信。

DOM 还提供了其他方式在 DOM 窗口之间进行通信，但具有相同的源策略......

要获取选项卡的 url，您可以在其上执行内容脚本。内容脚本可以使用 window.location.href 获取 url

# c# - 双引号 ”\””？

> ID：11597417
> 
> 赞同：2
> 
> 时间：2012-07-22T02:38:34.777
> 
> 标签：c#, string, double-quotes

我正在尝试在引号内使用引号。它在文本框内工作，但不在我需要字符串的地方。例如，第一行代码有效，但我需要将字符串作为变量。

```
pictureBox1.Image = MediaLib.Get["chestarmor_105"]; 
```

但接下来的 3 个没有。我最终尝试使用richTextBox1.Text 作为变量，因为它在那里看起来很好但没有运气。

```
string chestArmor = "chestarmor_105";
richTextBox2.Text = "\"" + chestArmor + "\"";
pictureBox1.Image = MediaLib.Get[richTextBox2.Text]; 
```

我尝试了许多不同的“”变体。我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T02:49:32.383

第一行中的双引号是编译器用来区分字符串文字和变量名的语法工件。它们不在字符串中；字符串是`chestarmor_105`，不带双引号。

如果你写

```
pictureBox1.Image = MediaLib.Get[chestarmor_105]; // no quotes 
```

编译器会认为它`chestarmor_105`代表一个标识符；你`chestarmor_105`用双引号括起来告诉编译器你想把它当作一个 14 个字符的字符串来使用，而不是作为一个变量名。然后编译器删除双引号，并将该值用作字符串。

这应该有效：

```
string chestArmor = "chestarmor_105";
richTextBox2.Text = chestArmor;
pictureBox1.Image = MediaLib.Get[richTextBox2.Text]; 
```

# java - Java变量必须在自己的范围内初始化？

> ID：11597418
> 
> 赞同：4
> 
> 时间：2012-07-22T02:38:43.363
> 
> 标签：java, variable-assignment

我有一些代码，其中有一个需要冗长的类声明的变量。我想在页面顶部定义变量，然后像这样定义它：

```
private IFoo bar;
/* seemingly irrelevant code */
bar = new IFoo() { /* a bunch of stuff */ }; 
```

但是我的 Java 编译器抱怨这不可能发生。它说之前的行上有一个语法错误 `}`（这真的没有意义，因为它在正确的位置）。

因此，为了让编译器安静下来，我将变量的定义放在了 more`{ }` 中。我忘记了这种模式叫什么，但我知道它为什么存在并且在我的情况下不应该真的是必需的。

```
{
    bar = new IFoo() { /* a bunch of stuff */ };
} 
```

**无论如何，我想我的问题是，为什么我不能做** `bar = new IFoo(){};` **而不做** `{ bar = new IFoo(){}; }` **？**

其他细节：`IFoo`是一个接口，我使用 JDK 1.6 和 Android 和 Eclipse。

立即定义`bar`效果很好：

```
private IFoo bar = new IFoo() { /* stuff */ }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T02:55:31.227

它不起作用的原因是 Java 不允许独立的代码。您必须将代码放入方法、构造函数或初始化程序中。

这是一个初始化程序：

```
private IFoo bar = new IFoo() { /* a bunch of stuff */ }; 
```

这是一个声明，后面跟着一个赋值：

```
private IFoo bar;
/* seemingly irrelevant code */
bar = new IFoo() { /* a bunch of stuff */ }; 
```

`bar`如果你是一个局部变量（那么你需要删除） ，你可以在一个函数中做这种事情`private`。但是在类声明中是不允许的。

在赋值周围添加花括号使您的代码成为构造函数的一部分，再次允许赋值。这就是为什么以下任务有效的原因：

```
{
    bar = new IFoo() { /* a bunch of stuff */ };
} 
```

# php - 如何在php中获取目录中的最新文件

> ID：11597421
> 
> 赞同：40
> 
> 时间：2012-07-22T02:39:47.183
> 
> 标签：php, directory

所以我有这个处理 CSV 文件的应用程序。我有一行代码来加载文件。

```
$myFile = "data/FrontlineSMS_Message_Export_20120721.csv";  //The name of the CSV file
$fh = fopen($myFile, 'r');                             //Open the file 
```

我想找到一种方法，可以在`data`目录中查看并获取最新文件（它们都有日期标签，因此它们将`data`在`$myFile`.

我真的找不到和理解 php 目录的文档，所以任何有用的资源也将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-22T02:56:00.027

这是使用 的尝试[`scandir`](http://php.net/scandir)，**假设**目录中的唯一文件具有**时间戳文件名**：

```
$files = scandir('data', SCANDIR_SORT_DESCENDING);
$newest_file = $files[0]; 
```

我们首先按降序列出目录中的所有文件，然后，该列表中的第一个文件名具有“最大”文件名 - 因此时间戳值最大 - 因此是最新的。

请注意，它`scandir`是在 PHP 5 中添加的，但[其文档页面](http://php.net/scandir)显示了如何在 PHP 4 中实现该行为。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2021-01-20T15:07:13.297

对于使用通配符的搜索，您可以使用：

```
<?php
$path = "/var/www/html/*";

$latest_ctime = 0;
$latest_filename = '';

$files = glob($path);
foreach($files as $file)
{
        if (is_file($file) && filectime($file) > $latest_ctime)
        {
                $latest_ctime = filectime($file);
                $latest_filename = $file;
        }
}
return $latest_filename;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-02T22:37:31.430

这是一个例子，我觉得使用我自己的验证器而不是简单地依赖带有[scandir](https://www.php.net/manual/en/function.scandir.php) () 的时间戳更有信心。

在这种情况下，我想检查我的服务器是否有比客户端版本更新的文件版本。所以我比较文件名中的版本号。

```
$clientAppVersion = "1.0.5";
$latestVersionFileName = "";

$directory = "../../download/updates/darwin/"
$arrayOfFiles = scandir($directory);
foreach ($arrayOfFiles as $file) {
    if (is_file($directory . $file)) {
        // Your custom code here... For example:
        $serverFileVersion = getVersionNumberFromFileName($file);
        if (isVersionNumberGreater($serverFileVersion, $clientAppVersion)) {
            $latestVersionFileName = $file;
        }
    }
}

// function declarations in my php file (used in the forEach loop)
function getVersionNumberFromFileName($fileName) {
    // extract the version number with regEx replacement
    return preg_replace("/Finance D - Tenue de livres-darwin-(x64|arm64)-|\.zip/", "", $fileName);
}

function removeAllNonDigits($semanticVersionString) {
    // use regex replacement to keep only numeric values in the semantic version string
    return preg_replace("/\D+/", "", $semanticVersionString);
}

function isVersionNumberGreater($serverFileVersion, $clientFileVersion): bool {
    // receives two semantic versions (1.0.4) and compares their numeric value (104)
    // true when server version is greater than client version (105 > 104)
    return removeAllNonDigits($serverFileVersion) > removeAllNonDigits($clientFileVersion);
} 
```

使用这种手动比较而不是时间戳，我可以获得更手术的结果。如果您有类似的要求，我希望这可以给您一些有用的想法。

（PS：我花时间发布，因为我对我找到的与我的特定要求相关的答案不满意。请善待我也不太习惯 StackOverflow - 谢谢！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-22T18:09:09.190

我的解决方案，Max Hofmann 的改进解决方案：

```
$ret = [];
$dir = Yii::getAlias("@app") . "/web/uploads/problem-letters/{$this->id}"; // set directory in question

if(is_dir($dir)) {
   $ret = array_diff(scandir($dir), array(".", "..")); // get all files in dir as array and remove . and .. from it
}

usort($ret, function ($a, $b) use ($dir) {
    if(filectime($dir . "/" . $a) < filectime($dir . "/" . $b)) {
         return -1;
    } else if(filectime($dir . "/" . $a) == filectime($dir . "/" . $b)) {
         return 0;
    } else {
         return 1;
    }
}); // sort array by file creation time, older first

echo $ret[count($ret)-1]; // filename of last created file 
```

# php - 功能有时只工作

> ID：11597422
> 
> 赞同：2
> 
> 时间：2012-07-22T02:40:02.550
> 
> 标签：php, mysql, pdo

所以我有这个功能`add_log`：

```
function add_log($username, $action) {
    $l_con = new con(); 
    $log_action = $l_con->connect(); 

    // IP to put in database 
    $ip_orig = $this->getIP(); 
    $newa_ip = ip2long($ip_orig);

    $prepara = $log_action->query("INSERT INTO log VALUES ('$username',
        '$action', '$newa_ip', CURDATE(), NOW())");
} 
```

当我在我的注册表单中使用它时，它可以完美地工作并插入数据库。但是在登录脚本或其他任何地方它都不起作用。我什至尝试使用我确信我没有使用的奇怪名称。我尝试在登录脚本之外使用它，但仍然没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:44:54.360

首先，您在 SQL 语句中缺少可选的列声明。通常你会将它们定义为：

```
INSERT INTO table (COLUMN1, COLUMN2, COLUMNN) VALUES ('a', 'b', 'n...'); 
```

此外，当使用 时`ip2long`，请注意还有一种替代方法，您可以直接在 SQL 语句中执行此操作：

```
INSERT INTO log VALUES ('$username', '$action', INET_ATON('$new_ip'), CURDATE(), NOW()) 
```

要检索，您可以执行`long2ip`或在您的 SQL 中，`SELECT INET_NTOA(IP) as IP ...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T03:10:04.930

确保 $username 或 $action 中没有引号，因为它会破坏查询。另外，我建议使用 PDO 或类似的东西，它会使任何引用变得无关紧要。

# javascript - 为什么我不能让每个 tr 标签的事件起作用？

> ID：11597424
> 
> 赞同：2
> 
> 时间：2012-07-22T02:40:12.713
> 
> 标签：javascript, jquery, html-table, event-handling

我试图让一个大表的每个 tr 在点击时在它的一个 td 中切换一个 div，这就是我所做的：

```
for( i = 2 ; i < trLen; i++ ){
   var id = $("td.idout", "tr:eq(" + i + ")").text();
   $("tr:has(div#" + id + ")").click(function(){
       $("div #"+ id).toggle();
   });
} 
```

我让每个 div 的 id 都与条目相同（在`var id`上面提到的选择中输出）。我已经测试了每个选择，它们都很完美。我的逻辑一定有问题，因为它不起作用。它根本没有做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:53:20.353

`div`在和符号之间有一个多余的空格`#`，而不是选择带有特定的 div，而是选择 div内`id`的元素`id`：

尝试改变：

```
$("div #"+ id).toggle(); 
```

和：

```
$("div#"+ id).toggle(); // or $("#"+ id).toggle() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T03:21:37.683

[`var`关键字](https://developer.mozilla.org/en/JavaScript/Reference/Statements/var)声明函数范围的变量，而不是您可能期望的块范围的变量。因此，您只有 1`id`由循环的每次迭代共享`for`。而且，由于该`click`函数将在循环完成后调用，因此`id`该选择器将始终具有循环中的最后一个值：

```
...function(){
    $("div#"+ id).toggle();
}... 
```

您可以使用立即调用的函数来解决此问题，该函数将[包含](https://developer.mozilla.org/en/JavaScript/Guide/Closures)每次迭代的变量：

```
for( i = 2 ; i < trLen; i++ ) {
    (function () {
        var id = $("td.idout", "tr:eq(" + i + ")").text();
        ...
    })();
} 
```

或者，[最终](http://kangax.github.com/es5-compat-table/es6/)，您将能够使用[`let`关键字](https://developer.mozilla.org/en/JavaScript/Reference/Statements/let)：

```
for( i = 2 ; i < trLen; i++ ) {
    let id = $("td.idout", "tr:eq(" + i + ")").text();
    ...
} 
```

# python - Unndent 不匹配任何外部缩进级别

> ID：11597425
> 
> 赞同：3
> 
> 时间：2012-07-22T02:41:00.963
> 
> 标签：python, indentation

在第 51/52 行，我收到错误：

> Unndent 不匹配任何外部缩进级别。

我知道这与制表符和空格有关。

注意这段代码不是我写的，[是网上找](http://lightloch.com/2012/03/15/simple-python-chat-client-server/)的，打算修改。

## 完整代码（也在[http://pastebin.com/n7ML6Rpz](http://pastebin.com/n7ML6Rpz)）

```
import os
import re
import socket
import sys
import time
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM) # Create socket
server_socket.bind(("", 9020)) #Bind server to this socket
server_socket.listen(4) #Max number of queued connections
# Welcome message
print ("TCP chat server now awaiting client connection on port 9020...")
chat_log = [] #Contains chat log
time = time.strftime('%l:%M %p %Z on %b %d, %Y') #Server start time formatted nicely
start_time = str(time) #Convert server start time to string
username = "ChatUser" #Default server username if user does not provide one
# Support ~2^x client connections, where x is the number of process forks
os.fork()
os.fork()
os.fork()
# This variable contains the help documentation for the "help" command
chatHelp = ("The chat server accepts the following commands:\n"
+ "adios Closes the program\n"
+ "connection Shows client connection info (IP, port)\n"
+ "get Returns complete chat log\n"
+ "getrange <#> <#> Get chat log entries from <#> to <#> (starts at 1)\n"
+ "help Lists valid commands\n"
+ "name: <text> Sets your username to <text>\n"
+ "test: <text> Echo data back to you <text>\n"
+ "time Shows time when server was initiated\n"
+ "push: <text> Add <text> to chat log\n"
+ "save Save chat log to file\n")
while 1:
 # Accept connection
 client_socket, address = server_socket.accept()

 # Print connection info from client for server log
 print ("Received connection from client at"), address
# Used in the connection command function (client request) below
 connection = str(address)
# Send welcome string to client
 client_socket.send("Welcome to Nigel's chat room! You are logged in as ChatUser.\n Type help for a list of valid commands.\n")
# Loop indefinitely while server running
 while 1:
    data = client_socket.recv(2048) #Receive client data into buffer
 process_data = data.lower() #Lowercase received data for processing
 print ("Data received from client>>"), process_data #Print data received from client for log reference

 # Functions for the received commands (I use the find library to reduce compatibility errors with other languages)
 # ---"adios" command function---
if (process_data.find("adios") == 0):
     client_socket.close() #Close socket connection
 print ("<Ctrl+C to exit.>>")
 break;

 # ---"connection:" command function---
elif(process_data.find("connection") == 0):
 client_socket.send("Client connection info: " + connection + "\n")
 print "User requested connection information"

 # ---"getrange" command function w/ regular expression filtering (must be BEFORE "get" command function)---
 elif(re.match(r'getrange\s+(\d+)\s+(\d+)',process_data)): # Regex to find correct match with dynamic numbers input
 match = re.match(r'getrange\s+(\d+)\s+(\d+)',process_data)
 getValue = "Chat log from range "+ match.group(1) + " and " + match.group(2) + ":\n" # Grab first and second range number provided by client
 if(len(chat_log) >= int(match.group(1)) and len(chat_log) >= int(match.group(2))): # Check to see if chat log extends to given range
 count = int(match.group(1)) - 1
 while(count < int(match.group(2))):
 getValue += chat_log[count] + "\n"
 count += 1
 else:
 getValue += "<>\n" #No data in range provided by client
 client_socket.send(getValue) #Send results to client
# ---"get" command function---
 elif(process_data.find("get") == 0):
 log = "Chat log: \n"
 for item in chat_log:
 log += item+" \n"
 client_socket.send(log)

 # ---"help:" command function---
 elif(process_data.find("help") == 0):
 client_socket.send(chatHelp + "\n")
 print "User requested help"

 # ---"name:" command function---
 elif(process_data.find("name:") == 0):
 username = data[5:].strip() #Only grab the value client set (not "name:")
 client_socket.send("Username set to: " + data[5:] + "\n")

 # ---"test:" command function---
 elif(process_data.find("test:") == 0):
 client_socket.send(data[5:]+"\n") #Echo last 5 elements to client
 print data

 # ---"time" command function---
 elif(process_data.find("time") == 0):
 client_socket.send("Chat server was started at: " + start_time + "\n")
 print "User requested server start time"

 # ---"save" command function---
 elif(process_data.find("save") == 0):
 print "(Saving chat log to file)"
 client_socket.send("Saving chat log to file..." + "\n")
 filename = "chat.log"
 file = open(filename,"w") #Create file
 for item in chat_log: #Loop through elements in chat_log
 file.write("%s\n" % item) #Write elements one by one on a new line
 file.close() #Close/write file

 # ---"push" command function---
 elif(process_data.find("push:") == 0):
 print "(Pushing data to chat log)"
 if(username != ""):
 chat_log.append(username + ": " + data[5:].strip()) #Save actual chat text to log (not "push:")
 else:
 chat_log.append(data[5:].strip())
 client_socket.send("OK\n")
 else:
 print "<<Unknown Data Received>>",data #Server log
 try:
 client_socket.send("Unrecognized command: " + data + "") #Advise client of invalid command
 except socket.error, e:
 print "<<Ctrl+C to exit>>" #Server log
 break; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T02:44:33.337

Python 代码对您使用的缩进级别很敏感。您的代码如下：

```
if (process_data.find("adios") == 0):
     client_socket.close() #Close socket connection
 print ("<Ctrl+C to exit.>>")
 break; 
```

在`if`块内，语句必须全部对齐。请注意如何`client_socket.close()`和以下`print`语句具有不同的缩进级别。您需要对此进行更改，以使它们具有*相同*的缩进，如下所示：

```
if (process_data.find("adios") == 0):
 client_socket.close() #Close socket connection
 print ("<Ctrl+C to exit.>>")
 break; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T02:44:54.777

目前的代码如下：

```
if (process_data.find("adios") == 0):
     client_socket.close() #Close socket connection
 print ("<Ctrl+C to exit.>>")
 break; 
```

正文中的第一个语句`if`缩进 6 个空格，而最后两个语句仅缩进 1 个空格。整个程序的缩进级别应该*相同*且*一致*，如下所示：

```
if (process_data.find("adios") == 0):
   client_socket.close() #Close socket connection
   print ("<Ctrl+C to exit.>>")
   break; 
```

代码中的缩进似乎不是很标准（或一致）。例如，41/42 中的`while`循环主体比其他类似语句的主体缩进更多，例如第 31-33 行，这在像 Python 这样的*空格很重要*的语言中是个麻烦。

最后，请注意混合制表符和空格并不是一个好主意。[**PEP 8 -- Python 代码样式指南**](http://www.python.org/dev/peps/pep-0008/)建议在制表符上使用[空格](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)，每级缩进[4 个空格。](http://www.python.org/dev/peps/pep-0008/#indentation)

# java - 请帮我解决这个 java.awt.BoxLayout can't be shared 或 NullPointerException

> ID：11597427
> 
> 赞同：-2
> 
> 时间：2012-07-22T02:41:27.430
> 
> 标签：java

下面的代码“Boxlayout 示例非常符合但在运行时抛出了以下异常：

```
Exception in thread "main" java.lang.NullPointerException

at java.awt.Container.addImpl(Container.java: 1027)
at java.awt.Container.add(Container.java: 935)
at javax.swing.JFrame.addImpl(JFrame.java: 545)
at java.awt.Container.add(Container.java: 352)
at BoxExample.launchFrame(BoxExample.java:26)
at BoxExample.main(BoxExample.java:40) 
```

请帮我解决这个问题，因为它浪费了我近 1 天的生命。

```
//Boxlayout example

import java.awt.*;

import javax.swing.*;

public class BoxExample
{

public JFrame f;

public JButton b1, b2,b3,b4,b5;

public BoxExample()

{

f=new JFrame("Box example");

f.setTitle("Box Layout Example");

f.setSize(150, 150);

JButton b1=new JButton("Button 1");

JButton b2=new JButton("Button 2");

JButton b3=new JButton("Button 3");

JButton b4=new JButton("Button 4");

JButton b5=new JButton("Button 5");

}

public void launchFrame()

{

System.out.println("inside lf");

f.setLayout(new BoxLayout(f,BoxLayout.Y_AXIS));

System.out.println("after layset");

f.add(b1);

f.add(b2);

f.add(b3);

f.add(b4);

f.add(b5);

f.pack();

f.setVisible(true);

}

public static void main(String args[])

{

BoxExample guiWindow=new BoxExample();

System.out.println("main");

guiWindow.launchFrame();

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:47:22.130

您正在隐藏一些变量，主要是 JButton 变量 b1、b2、b3、b4 和 b5，方法是在类中声明它们，然后在构造函数中*重新声明*和初始化它们。构造函数中新声明的变量与类中声明的变量不同，因此类变量将保持为空。

解决方法：不要在构造函数中重新声明变量。所以代替这个：

```
class Foo {
  private Bar bar;

  public Foo() {
    Bar bar = new Bar(); // bar is re-declared here!
  }
} 
```

做这个：

```
class Foo {
  private Bar bar;

  public Foo() {
    bar = new Bar(); // notice the difference!
  }
} 
```

此外，每当您遇到 NullPointerException (NPE) 时，请仔细查看引发异常的行，这里是 BoxExample 类的第 26 行：

```
at BoxExample.launchFrame(BoxExample.java:26) 
```

您会在该行中发现其中一个变量为空。如果您找出哪个变量，您通常可以回溯代码并查看它为什么为空。

# cakephp - AclExtras 警告错误

> ID：11597432
> 
> 赞同：2
> 
> 时间：2012-07-22T02:42:41.477
> 
> 标签：cakephp

在[CakePHP 2 book / Acl Tutorial / Part 2](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/part-two.html)中，我正在执行命令：

```
./Console/cake AclExtras.AclExtras aco_sync 
```

我收到一个警告错误：

```
Warning Error: Argument 1 passed to Component::startup() must be an instance of Controller, 
null given, called in 
/opt/lampp/htdocs/acl/app/Plugin/AclExtras/Console/Command/AclExtrasShell.php 
on line 80 and defined in [/opt/lampp/htdocs/acl/lib/Cake/Controller/Component.php, line 119] 
```

acos 表填充了`NULL`in`model`字段`NULL`和`foreign_key`.

我该如何解决这个错误？

[![在此处输入图像描述](../Images/ea846fc20f11a8040d4c9391e035ec0f.png)](https://i.stack.imgur.com/uCHwL.png)

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T23:11:44.153

在 AclExtras/Console/Command 中，请将启动功能更改为：

```
public function startup() {
    parent::startup();
    $controller = new Controller();
    $collection = new ComponentCollection();
    $this->Acl = new AclComponent($collection);
    $this->Acl->startup($controller);
    $this->Aco = $this->Acl->Aco;
} 
```

# python - PyQt4 使用 __init__ 的不同方式

> ID：11597436
> 
> 赞同：7
> 
> 时间：2012-07-22T02:43:28.717
> 
> 标签：python, pyqt, pyqt4, super

所以...我正在尝试使用 PyQt4 从基本的 Python 转向一些 GUI 编程。我正在看几本不同的书籍和教程，它们似乎都有不同的开始类定义的方式。

一个教程从这样的课程开始：

```
class Example(QtGui.QDialog):
    def __init__(self):
        super(Example, self).__init__() 
```

另一本书是这样的：

```
class Example(QtGui.QDialog):
    def __init__(self, parent=None):
        super(Example, self).__init__(parent) 
```

还有一个是这样做的：

```
class Example(QtGui.QDialog):
    def__init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent) 
```

我仍在尝试围绕类和 OOP 以及所有`super()`...`super()`直接调用基类？对于诸如此类的相对简单的示例，即单一继承，使用一种方式与另一种方式有什么真正的好处或理由吗？最后......第二个例子`parent`作为参数传递给`super()`而第一个没有......关于为什么/何时/何处合适的任何猜测/解释？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T02:50:59.253

第一个根本不支持将`parent`参数传递给它的基类。如果你知道你永远不需要`parent`arg，那很好，但这不太灵活。

由于此示例只有单继承，因此与 ;`super(Example, self).__init__(parent)`完全相同`QtGui.QDialog.__init__(self, parent)`。前者用于`super`获取`self`调用`QtGui.QDialog`'s 方法而不是`Example`'s 的“版本”，因此`self`自动包含在内，而后者直接调用函数`QtGui.QDialog.__init__`并显式传递`self`and`parent`参数。在单继承中，AFAIK 没有区别，除了键入的数量以及如果更改继承就必须更改类名这一事实。在多重继承中，`super`半智能地解析方法。

The third example actually uses `QWidget` instead of `QDialog`, which is a little weird; presumably that works because `QDialog` is a subclass of `QWidget` and doesn't do anything meaningful in its `__init__`, but I don't know for sure.

# css - 具有相对宽度的CSS块元素？

> ID：11597438
> 
> 赞同：2
> 
> 时间：2012-07-22T02:43:49.967
> 
> 标签：css, block

这就是我想要实现的...

![在此处输入图像描述](../Images/669699b1030a211b6615dbd3cd3a83d0.png)

以及相应的 HTML：

```
<article>
  <h3>Fading Forest</h3>
  <p>Donec id elit non mi porta gravida at eget metus. Nullam quis risus eget urna mollis ornare vel eu leo. Nulla vitae elit libero, a pharetra augue. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Vestibulum id ligula porta felis euismod semper.</p>
  <p class="permalink"><a href="http://example.com/12345" title="">example.com/12345</a></p>
</article> 
```

所以我需要做的就是将每个`h3`and包装`p`在一个盒子中，但是现在，由于`h3`and`p`标签是块级元素，相应的块只是扩展了整个宽度。

我希望根据内容调整宽度（并且只需应用`max-width`它们就不会延伸太宽）。

这就是我到目前为止所得到的，虽然它不起作用......显然。[http://jsfiddle.net/hAtRs/](http://jsfiddle.net/hAtRs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:48:40.897

忘记`inline-block`; 似乎没有必要。

向左浮动并清除：

```
h3, p {
    float: left;
    clear: left;
} 
```

[http://jsfiddle.net/hAtRs/20/](http://jsfiddle.net/hAtRs/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T02:59:26.563

```
h3, p {
    background:#999;
    color:white;
    padding:10px 10px 10px 80px;
    margin-bottom:1px;
    display:inline-block;
} 
```

然后在每个元素后添加换行符。

# javascript - 缩放后如何在 Raphael 中应用（或保持）线条样式？

> ID：11597441
> 
> 赞同：3
> 
> 时间：2012-07-22T02:44:49.213
> 
> 标签：javascript, svg, raphael

在[Raphael](http://raphaeljs.com/)（用于处理 SVG 的 JavaScript 库）中，[您可以对元素应用转换](http://raphaeljs.com/reference.html#Element.transform)，例如旋转、平移和缩放。

因此，假设我想制作一条 8 像素宽的线。我可以做这样的事情：

```
paper = new Raphael(0, 0, 200, 200);
paper.path("M 0,0 l 200,200").attr({"stroke-width": "8px"}); 
```

但是如果我想以某种方式缩放那条线，我会失去 8 像素的宽度，它会回落到标准的 1 像素宽度。

```
paper.path("M 0,0 l 200,200").attr({"stroke-width": "8px"}).transform("s -1,1"); 
```

无论我做什么，我似乎都无法制作任何保持其笔触宽度的缩放线。其他转换工作正常。似乎只是缩放有这个问题。我在 Firefox 和 Chrome 中都遇到了同样的问题。

[这是我在 jsFiddle 上遇到的问题的一个例子。](http://jsfiddle.net/fUcvD/3/)如您所见，旋转和平移工作正常，但缩放却不行。

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T07:02:22.087

不知何故，应用变换将笔画宽度更改为 NaN。也许这是一个错误。不过，您可以使用[矩阵变换](http://jsfiddle.net/longsonr/fUcvD/4/)来应用变换。

# jqgrid - setColProp 不工作 jqGrid

> ID：11597444
> 
> 赞同：1
> 
> 时间：2012-07-22T02:45:51.057
> 
> 标签：jqgrid

我已阅读有关此的所有主题，并且似乎我正确构建了它。但是 setColProp 仍然没有效果。我在这里缺少什么？请帮忙。我正在使用 jqGrid 4.4

```
 var grid = $("#l-drill-emp-grid")
    var pager_id = 'l-drill-emp-pager';

        grid.jqGrid({
        data : drillgrid.rows,
        datatype: "local",
        colNames: ['date', 'day', 'time_In', 'time_Out', 'late','underTime', 'overTime', 'unpaidLV', 'timeOff' ],
        colModel: [
            {name:'date',index:'date', width:120, sorttype:'date'},
            {name:'day',index:'day', width:70, align:"center", sorttype:'text'},
            {name:'time_in',index:'time_in', width:80, align:"center"},
            {name:'time_out',index:'time_out', width:80, align:"center"},
            {name:'late',index:'late', width:80, align:"center"},
            {name:'ut',index:'ut', width:80, align:"center"},
            {name:'ot',index:'ot', width:80, align:"center"},
            {name:'ulv',index:'ulv', width:80, align:"center"},
            {name:'timeoff',index:'timeoff', width:80, align:"center"},
        ],
        rowNum:15,
        rowList:[10,15,20,30],
        viewrecords: true,
        loadonce: true,
        pager: pager_id,
        sortname: 'date',
        sortorder: "desc",
        height: '100%',
        altRows: true,
        altclass: 'oddRow',
        gridComplete: function() {
        grid.find(".jqgrow:odd").hover(
            function() { $(this).removeClass("oddRow");}, 
            function(event) { $(this).addClass("oddRow");}
        );
    },
    loadComplete: function(data) {
                grid.jqGrid('setColProp', 'date', {
                    align: "center"
                });
            },

    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:47:48.770

您是否尝试更改其他`colModal`选项？我的意思是，除了对齐之外还有什么？因为根据文档，有些属性可能不会改变。

读[这个](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)。

# r - 给定数据点和 y 值，给定 x 值

> ID：11597453
> 
> 赞同：0
> 
> 时间：2012-07-22T02:48:55.893
> 
> 标签：r, interpolation

给定一组 (x,y) 坐标，我如何从 y 求解 x。如果要绘制坐标，它们将是非线性的，但非常接近指数。我试过`approx()`了，但它很遥远。这是示例数据。在这种情况下，我该如何解决`y == 50`？

> ```
>  V1      V3 
> ```
> 
> 1 5.35 11.7906
> 
> 2 10.70 15.0451
> 
> 3 16.05 19.4243
> 
> 4 21.40 20.7885
> 
> 5 26.75 22.0584
> 
> 6 32.10 25.4367
> 
> 7 37.45 28.6701
> 
> 8 42.80 30.7500
> 
> 9 48.15 34.5084
> 
> 10 53.50 37.0096
> 
> 11 58.85 39.3423
> 
> 12 64.20 41.5023
> 
> 13 69.55 43.4599
> 
> 14 74.90 44.7299
> 
> 15 80.25 46.5738
> 
> 16 85.60 47.7548
> 
> 17 90.95 49.9749
> 
> 18 96.30 51.0331
> 
> 19 101.65 52.0207
> 
> 20 107.00 52.9781
> 
> 21 112.35 53.8730
> 
> 22 117.70 54.2907
> 
> 23 123.05 56.3025
> 
> 24 128.40 56.6949
> 
> 25 133.75 57.0830
> 
> 26 139.10 58.5051
> 
> 27 144.45 59.1440
> 
> 28 149.80 60.0687
> 
> 29 155.15 60.6627
> 
> 30 160.50 61.2313
> 
> 31 165.85 61.7748
> 
> 32 171.20 62.5587
> 
> 33 176.55 63.2684
> 
> 34 181.90 63.7085
> 
> 35 187.25 64.0788
> 
> 36 192.60 64.5807
> 
> 37 197.95 65.2233
> 
> 38 203.30 65.5331
> 
> 39 208.65 66.1200
> 
> 40 214.00 66.6208
> 
> 41 219.35 67.1952
> 
> 42 224.70 67.5270
> 
> 43 230.05 68.0175
> 
> 44 235.40 68.3869
> 
> 45 240.75 68.7485
> 
> 46 246.10 69.1878
> 
> 47 251.45 69.3980
> 
> 48 256.80 69.5899
> 
> 49 262.15 69.7382
> 
> 50 267.50 69.7693
> 
> 51 272.85 69.7693
> 
> 52 278.20 69.7693
> 
> 53 283.55 69.7693
> 
> 54 288.90 69.7693

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:55:49.773

我想您遇到的问题是`approx`解决给`y`定的问题`x`，而您正在谈论解决给`x`定的问题`y`。所以你需要切换你的变量`x`和`y`使用时`approx`：

```
df <- read.table(textConnection("

V1      V3
85.60 47.7548
90.95 49.9749
96.30 51.0331
101.65 52.0207

"), header = TRUE)

approx(x = df$V3, y = df$V1, xout = 50)
# $x
# [1] 50
# 
# $y
# [1] 91.0769 
```

此外，如果`y`相对于 是指数的，那么在和`x`之间存在线性关系，因此在和之间使用线性插值器更有意义，然后取指数返回：`x``log(y)``x``log(y)``y`

```
exp(approx(x = df$V3, y = log(df$V1), xout = 50)$y)
# [1] 91.07339 
```

# java - JPA 查询错误

> ID：11597461
> 
> 赞同：0
> 
> 时间：2012-07-22T02:51:02.480
> 
> 标签：java, jpa

我刚开始使用 JAVA jpa。到目前为止，我只尝试了有效的 persist 方法。我在运行以下查询时遇到问题

```
Customer = Customer(manager.createQuery("Select c FROM Customer c where c.LastName=\"Lname\"")); 
```

但是在上述情况下，我的 Customer 类没有被识别。我这样做对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T05:32:32.050

查询对象不能进行类型转换，所以我通过使用解决了这个问题

```
query = em.createQuery( "SELECT c FROM Country c WHERE c.name = 'Canada'"); 
Country c = (Country)query.getSingleResult(); 
```

# java - 如何通过在名称中添加 int 从 strings.xml 中获取字符串

> ID：11597463
> 
> 赞同：2
> 
> 时间：2012-07-22T02:51:29.010
> 
> 标签：java, android, settext, r.java-file

```
private int info = 1;

public void nextStep(View view)
{    
    TextView textInfo = (TextView) findViewById(R.id.textInfo);
    textInfo.setText(R.string.info1);
    info++;
} 
```

单击一个按钮时，`nextStep`将调用方法。每次单击按钮时，我都想显示不同的信息，第一次是`info1`字符串，下一次是`info2`字符串等等`strings.xml`。我想做这样的事情：

```
private int info = 1;

public void nextStep(View view)
{    
    TextView textInfo = (TextView) findViewById(R.id.textInfo);
    textInfo.setText(R.string.info + info);
    info++;
} 
```

当然，这是不可能的。我该怎么办？我真的不想写一个大的 if/else 或 switch 语句。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T04:11:54.370

> 当然，这是不可能的。

事实上，它是。您可以使用它`getIdentifier`来执行此操作：

```
private int info = 1;
public void nextStep(View view)
{    
    TextView textInfo = (TextView) findViewById(R.id.textInfo);
    int myStrId = textInfo.getContext().getResources().getIdentifier("info"+info, "string", textInfo.getContext().getPackageName());
    textInfo.setText(myStrId);
    info++;
} 
```

[`getIdentifer()`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)`R`如果您不知道确切的名称，这是一种获取存储在其中的资源 ID 的方法。虽然它不是世界上最有效的方法，但在无法引用的情况下`R`（例如您的情况）就足够了。

该方法返回相同的 ID `R`；也就是说，`getIdentifier("info1", "id", ...);`与 相同`R.id.info1`，因为`R`只是它的编译版本。如果您不确定 ID 是否存在（例如来自外部库）但无论如何都需要引用它，此方法也适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T02:53:14.730

使用字符串数组或更好的数组，`List<String>`例如 an`ArrayList<String>`并用 XML 中的字符串填充它。然后就可以使用该`get(int index)`方法获取列表中的第 i 个字符串。

如果您使用 JAXB 来解组您的 XML，您可以设置它来为您创建列表，而不用大惊小怪。

# xml - XSL - 删除包含某些条件的父节点

> ID：11597465
> 
> 赞同：-1
> 
> 时间：2012-07-22T02:51:59.367
> 
> 标签：xml, xslt

我有一个 XML 我想用 xslt 转换它。输入看起来像这样。

```
<xmeml>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
        <Unit3>tuvw</Unit3>
    </Test>
    <Test>
        <Unit>bcd</Unit>
        <Unit2>2345</Unit2>
        <Unit3>wxyz</Unit3>
    </Test>
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>3456</Unit2>
        <Unit3>wxyz</Unit3>
    </Test>
    <Test>
        <Unit>cde</Unit>
        <Unit2>3456</Unit2>
        <Unit3>wxyz</Unit3>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
        <Unit3>wxyz</Unit3>
    </Test>
    <Test>
        <Unit>def</Unit>
        <Unit2>4567</Unit2>
        <Unit3>wxyz</Unit3>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
        <Unit3>uvwx</Unit3>
    </Test>
    <Test>
        <Unit>efg</Unit>
        <Unit2>2345</Unit2>
        <Unit3>wxyz</Unit3>
    </Test> 
</Doc>
</xmeml> 
```

输出应该是这样的。

```
<xmeml>
<Doc>
    <Test>
        <Unit>bcd</Unit>
        <Unit2>2345</Unit2>
        <Unit3>wxyz</Unit3>
    </Test>
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>3456</Unit2>
        <Unit3>wxyz</Unit3>
    </Test>
    <Test>
        <Unit>cde</Unit>
        <Unit2>3456</Unit2>
        <Unit3>wxyz</Unit3>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
        <Unit3>wxyz</Unit3>
    </Test>
    <Test>
        <Unit>def</Unit>
        <Unit2>4567</Unit2>
        <Unit3>wxyz</Unit3>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>efg</Unit>
        <Unit2>2345</Unit2>
        <Unit3>wxyz</Unit3>
    </Test> 
</Doc>
</xmeml> 
```

我想删除任何符合以下条件的测试节点。- Unit3 子节点以 tuv 或 uvw 开头。- AND 其中 Unit 和 Unit2 的值都在另一个测试节点中被发现重复/重复

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T03:19:01.943

**这种转换**（基于 Muenchian 分组）：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:key name="kTest"
   match="Test[starts-with(Unit3, 'tuv') or starts-with(Unit3, 'uvw')]"
          use="concat(Unit, '+', Unit2)"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "Test[starts-with(Unit3, 'tuv') or starts-with(Unit3, 'uvw')]
    [not(generate-id()
    =
     generate-id(key('kTest', concat(Unit, '+', Unit2))[last()]))]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<xmeml>
    <Doc>
        <Test>
            <Unit>abc</Unit>
            <Unit2>1234</Unit2>
            <Unit3>tuvw</Unit3>
        </Test>
        <Test>
            <Unit>bcd</Unit>
            <Unit2>2345</Unit2>
            <Unit3>wxyz</Unit3>
        </Test>
    </Doc>
    <Doc>
        <Test>
            <Unit>abc</Unit>
            <Unit2>3456</Unit2>
            <Unit3>wxyz</Unit3>
        </Test>
        <Test>
            <Unit>cde</Unit>
            <Unit2>3456</Unit2>
            <Unit3>wxyz</Unit3>
        </Test>
    </Doc>
    <Doc>
        <Test>
            <Unit>abc</Unit>
            <Unit2>1234</Unit2>
            <Unit3>wxyz</Unit3>
        </Test>
        <Test>
            <Unit>def</Unit>
            <Unit2>4567</Unit2>
            <Unit3>wxyz</Unit3>
        </Test>
    </Doc>
    <Doc>
        <Test>
            <Unit>abc</Unit>
            <Unit2>1234</Unit2>
            <Unit3>uvwx</Unit3>
        </Test>
        <Test>
            <Unit>efg</Unit>
            <Unit2>2345</Unit2>
            <Unit3>wxyz</Unit3>
        </Test>
    </Doc>
</xmeml> 
```

**产生正确的结果**（实现所有要求）：

```
<xmeml>
   <Doc>
      <Test>
         <Unit>bcd</Unit>
         <Unit2>2345</Unit2>
         <Unit3>wxyz</Unit3>
      </Test>
   </Doc>
   <Doc>
      <Test>
         <Unit>abc</Unit>
         <Unit2>3456</Unit2>
         <Unit3>wxyz</Unit3>
      </Test>
      <Test>
         <Unit>cde</Unit>
         <Unit2>3456</Unit2>
         <Unit3>wxyz</Unit3>
      </Test>
   </Doc>
   <Doc>
      <Test>
         <Unit>abc</Unit>
         <Unit2>1234</Unit2>
         <Unit3>wxyz</Unit3>
      </Test>
      <Test>
         <Unit>def</Unit>
         <Unit2>4567</Unit2>
         <Unit3>wxyz</Unit3>
      </Test>
   </Doc>
   <Doc>
      <Test>
         <Unit>abc</Unit>
         <Unit2>1234</Unit2>
         <Unit3>uvwx</Unit3>
      </Test>
      <Test>
         <Unit>efg</Unit>
         <Unit2>2345</Unit2>
         <Unit3>wxyz</Unit3>
      </Test>
   </Doc>
</xmeml> 
```

**更新**：

OP对这个问题有自己的解释，这是模棱两可的，没有精确定义。

有了相当多的猜测，这就是他可能想要的……：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:key name="kTest"
   match="Test" use="concat(Unit, '+', Unit2)"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "Test[starts-with(Unit3, 'tuv') or starts-with(Unit3, 'uvw')]
    [not(generate-id()
    =
     generate-id(key('kTest', concat(Unit, '+', Unit2))
                                     [not(position()=1)])
                )]"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档（上图）时，现在结果与 OP 认为是想要的结果相同**：

```
<xmeml>
   <Doc>
      <Test>
         <Unit>bcd</Unit>
         <Unit2>2345</Unit2>
         <Unit3>wxyz</Unit3>
      </Test>
   </Doc>
   <Doc>
      <Test>
         <Unit>abc</Unit>
         <Unit2>3456</Unit2>
         <Unit3>wxyz</Unit3>
      </Test>
      <Test>
         <Unit>cde</Unit>
         <Unit2>3456</Unit2>
         <Unit3>wxyz</Unit3>
      </Test>
   </Doc>
   <Doc>
      <Test>
         <Unit>abc</Unit>
         <Unit2>1234</Unit2>
         <Unit3>wxyz</Unit3>
      </Test>
      <Test>
         <Unit>def</Unit>
         <Unit2>4567</Unit2>
         <Unit3>wxyz</Unit3>
      </Test>
   </Doc>
   <Doc>
      <Test>
         <Unit>efg</Unit>
         <Unit2>2345</Unit2>
         <Unit3>wxyz</Unit3>
      </Test>
   </Doc>
</xmeml> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T06:24:05.280

Dimitre 的解决方案的这个调整怎么样......

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:key name="kTest" match="Test" use="concat(Unit, '+', Unit2)"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "Test[key('kTest', concat(Unit, '+', Unit2))[2]]
   [starts-with(Unit3, 'tuv') or starts-with(Unit3, 'uvw')]"/>
</xsl:stylesheet> 
```

据我了解，转换规则是：

1.  照原样复制所有节点，除非如下所示。
2.  排除所有测试节点具有以下属性：

2.1 文档中存在另一个测试节点（称为 Test(other)），这样：

```
 (Test(reference) / Unit = Test(other) / Unit)   AND
  (Test(reference) / Unit2 = Test(other) / Unit2) 
```

2.2 引用Test节点的Unit3子节点以tuv或uvw开头

输出与 OP 发布的完全相同。有趣的是，如果我正确理解了这个问题，Dimitre 最近刚刚提供了一个解决方案来解决与您在[XSL 节点比较中](https://stackoverflow.com/questions/11595102)几乎相同的问题。同样，如果我正确理解了您的问题，则标题具有误导性。“删除重复项”通常表示重复数据删除，如 (1,2,2,3) --> (1,2,3) ；而您想要的，例如 (1,2,2,3) --> (1,3) 通常被描述为“选择唯一节点/值”。

# node.js - 将响应正文表达到缓冲区

> ID：11597471
> 
> 赞同：1
> 
> 时间：2012-07-22T02:53:37.047
> 
> 标签：node.js, mongodb, express, connect, gridfs

我正在尝试使用 Node 构建一个快速简单的图像上传服务，它将接收到的图像保存到 Mongo 的 GridFS 中。

GridFS get 需要一个 Buffer 对象[NodeJS Mongo Driver GridFS put](http://mongodb.github.com/node-mongodb-native/api-generated/grid.html#put)

问题很简单：我如何准确地将接收到的请求正文转换/转换为适当的缓冲区。

到目前为止我的代码（只有重要的部分）：api.js

```
var express = require('express');
var connect = require('connect');

var app = module.exports = express.createServer();

app.configure(function(){
  app.use(express.bodyParser()); 
  app.use(express.methodOverride());
  app.use(app.router);
});

var upload = require('./upload.js');
app.post('/upload', upload.upload); 
```

上传.js

```
exports.upload = (function(req, res, next){
  console.log("Uploading image...");
  // Create buffer
  // Rest of the code
} 
```

我试过了：

```
 var buffer = new Buffer(util.inspect(req.body),'binary'); 
```

创建缓冲区，但它的大小错误，并且可能不是正确的内容，因为 util.inspect 显然不是正确的方法。

并且： var buffer = new Buffer(req.body); 结果：

```
 [Decode error - output not utf-8][Decode error - output not utf-8] 
```

缓冲区长度 = 0

一般来说，我对 Node 和 JavaScript 开发都很陌生，所以我可能遗漏了一些非常简单的东西，请毫不犹豫地指出显而易见的东西：)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T03:35:51.593

首先，请记住 Express 是建立在 Connect 之上的，[Connect](https://github.com/senchalabs/connect/)是处理大量较低级别 HTTP 工作的库，这就是它的`bodyParser()`来源。

body 解析器中间件[内部](https://github.com/senchalabs/connect/blob/2.3.9/lib/middleware/multipart.js)使用[Formidable](https://github.com/felixge/node-formidable)来解析文件上传。

Formidable 的默认行为是将上传的文件直接写入磁盘——换句话说，您实际上无法访问路由处理程序中的上传文件流。您会获得任何常规表单字段的值（`<input>`s）`req.body`，并且您会通过 获得上传的文件路径`req.files`，但您不会获得文件内容。

这里的**简单答案**是简单地从磁盘读取文件并使用它保存到 Mongo，记住在完成后删除临时文件。当然，这引入了将文件上传到临时文件夹然后加载到 Mongo 的不必要的中间步骤。

如果您想将文件数据直接流式传输到 Mongo，您将面临更多挑战。您必须编写自己的中间件来解析上传流。

这实际上是*相对*容易的。您可以从内部 Connect 主体解析器实现开始——使用 Formidable 来完成繁重的工作——并使用`onPart` [API](https://github.com/felixge/node-formidable#api)将流传递回您的路由处理程序，以便您可以将其传递给 Mongo 驱动程序。

# jquery - jQuery - 选择前一个元素链接

> ID：11597472
> 
> 赞同：1
> 
> 时间：2012-07-22T02:54:16.547
> 
> 标签：jquery, css, jquery-selectors

我不明白为什么这不起作用。我有一个列表，每个项目在锚点上都有一个背景图像。使用 jQuery，我试图在所选锚点之前删除项目上的背景图像。这是HTML：

```
<ul id="menu">
<li class="last"><a href="#">Contact Us</a></li>
<li><a href="#">Testimonials</a></li>
<li><a href="#">Projects</a></li>
<li class="selected"><a href="#">Our Services</a></li>
<li><a href="#">About Us</a></li>
<li><a href="#">Home</a></li>
</ul> 
```

这是我用来尝试删除背景图像的 jQuery（使用 display:none 进行测试）：

```
$('li.selected a').prev().css( {display : "none"}); 
```

当我使用以下内容时，它可以工作：

```
$('li.selected').prev().css( {display : "none"}); 
```

但是一旦我涉及到锚标签，它就会停止。

TLDR：基本上我需要选择所选链接之前的“项目”，并删除与其相关的背景图像（链接，而不是列表项）。谁能告诉我为什么该代码不起作用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:57:39.007

`.prev(0)`并分别从所选元素`.next()`的上一个和下一个*兄弟姐妹中进行选择。*出于您的目的，这将起作用：

```
$('li.selected').prev().find("a").css( {display : "none"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T02:58:17.340

# atomic - 可扩展的 O(1) 内存线程计数器？

> ID：11597473
> 
> 赞同：2
> 
> 时间：2012-07-22T02:54:19.603
> 
> 标签：atomic, lock-free, scalable

我有一堆线程和一堆计数器。线程递减计数器，如果计数器达到零，就会发生有趣的事情。使用原子操作实现这一点很简单。

但是，如果我们需要两个属性来保持而不考虑线程或计数器的数量，这将变得更加困难：

1.  可扩展性：递减一个计数器是 O(polylog)。
2.  紧凑性：每个计数器的内存为 O(1)。

我知道如何单独执行其中任何一项：简单的实现是紧凑的，分层计数网络 [4] 是可扩展的）。有可能两者都做吗？

注意：由于 O(n) 个线程不能在 O(n) 时间内做出 O(n) 个不同的更改 O(1) 个内存，因此解决此问题需要在不同计数器之间共享数据结构。

[4]：J. Aspnes、M. Herlily 和 N. Shavit。计数网络。ACM 杂志，41(5):1020-1048，1994 年 9 月。

**更新**：Jed Brown 指出了一个明显的事实，即 O(1) 时间是不可能的。更改为多对数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T10:46:22.613

有一篇关于可扩展计数器的论文。您基本上有一棵树，其中每个线程都有一个节点，并且一个希望 inc/dec 发布该事实的线程，然后它开始爬树，直到顶部的计数器，累积 inc/dec 值在途中，然后将总数应用于顶部的柜台。（这就是它的要点——很多额外的细节）。

它将 inc/dec 分布在单个缓存行之外，这当然会妨碍可伸缩性。

[在http://www.liblfds.org](http://www.liblfds.org)查看 wiki 中的白皮书- 你会在那里找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:27:43.903

您是否尝试过来自 high-scale-lib 的 Cliff Click 博士的 ConcurrentAutoTable (Counter)：

[http://sourceforge.net/projects/high-scale-lib/files/high-scale-lib/high-scale-lib-v1.1.1/](http://sourceforge.net/projects/high-scale-lib/files/high-scale-lib/high-scale-lib-v1.1.1/)

[http://www.youtube.com/watch?v=WYXgtXWejRM](http://www.youtube.com/watch?v=WYXgtXWejRM)

[http://www.azulsystems.com/events/javaone_2007/2007_LockFreeHash.pdf](http://www.azulsystems.com/events/javaone_2007/2007_LockFreeHash.pdf)

[http://www.infoq.com/news/2008/05/click_non_blocking/](http://www.infoq.com/news/2008/05/click_non_blocking/)

[http://www.azulsystems.com/events/javaone_2008/2008_CodingNonBlock.pdf](http://www.azulsystems.com/events/javaone_2008/2008_CodingNonBlock.pdf)

# sublimetext2 - 崇高文本2中片段的标签扩展？

> ID：11597475
> 
> 赞同：2
> 
> 时间：2012-07-22T02:54:43.220
> 
> 标签：sublimetext2

我正在尝试在 ST2 中创建一个简单的片段，当我输入一些文本并点击选项卡时，它将被扩展。

我去了“工具”->“创建新片段”。我已经编辑了模板：

```
<snippet>
    <content><![CDATA[
<?php ${1}   ?>
]]></content>   
    <tabTrigger>php</tabTrigger>    
    <scope>source.php</scope>
</snippet> 
```

我希望能够输入'php'，并将字符串扩展为''。

当我点击“另存为”时，我已将片段保存在呈现给我的默认位置。

但是，我没有得到想要的结果。重新启动 ST2 并打开一个 php 文件并确保该文件被读取为 php 后，我没有得到我想要的扩展。

我如何获得扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:47:08.097

**1.您是否正确保存了您的片段文件？**

片段应保存为*`Snippet1.sublime-snippet`*，最好保存在*Packages/User中*

**2\. 您的 tabTrigger 是否与另一个同名？**

这不是一个真正的问题，这里*`php`*已经被 Sublime Text2 用作片段，因为你可以选择使用哪个，但我们从不会太小心。尝试不同的，例如*`newphp`*或*`phptags`*。

**3\. 你使用过 Sublime Text 2 文档吗？**

例如，您可以在[此处](http://sublime-text-unofficial-documentation.readthedocs.org/en/latest/extensibility/snippets.html)查看 Snippets 文档。

你的代码：

```
<snippet>
 <content><![CDATA[<?php ${1} ?>]]></content>   
 <tabTrigger>newphp</tabTrigger>    
 <scope>source.php</scope>
</snippet> 
```

**如果**您将文件保存*`.sublime-snippet`*为*`Packages`*.

# c# - Wpf 应用程序加载非常缓慢

> ID：11597479
> 
> 赞同：0
> 
> 时间：2012-07-22T02:55:54.633
> 
> 标签：c#, wpf

我开发了调用大量进程和 Windows 服务的 wpf 应用程序，但它需要很长时间才能启动。我正在尝试调试应用程序，一切似乎都运行良好。因此，我不明白为什么窗口不显示。我想发布代码，但它太长了，我不明白问题出在哪个特定区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T03:01:22.767

正如其他人所提到的，在没有看到代码的情况下，您将需要进行一些代码分析。[这是 MSDN 上的一篇很好的文章](http://msdn.microsoft.com/en-us/magazine/hh288073.aspx)，讨论了分析代码的技巧和工具

# c++ - 在数组中声明一个连续的资源 ID

> ID：11597485
> 
> 赞同：0
> 
> 时间：2012-07-22T02:57:19.117
> 
> 标签：c++, visual-studio-2010

如何在头文件的数组中声明连续范围的资源 ID？我将这些 RID 附加到菜单中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:26:02.210

你所需要的只是一个数组。您可以在不使用丑陋定义的情况下获得几乎相同的语法：

**C++11**

```
#include <algorithm> //for std::iota
#include <array> //for std::array

//Here's an array of 10 ints, consider changing the name now
std::array<int, 10> IDM_POPUP_LAST;

//This fills the array with incrementing values, starting at 100
std::iota (std::begin (IDM_POPUP_LAST), std::end (IDM_POPUP_LAST), 100);

//Now we can use them almost like before
appendToMenu (/*...*/, IDM_POPUP_LAST[3]); //uses value 103

//We can also loop through all of the elements and add them
for (const int i : IDM_POPUP_LAST) {
    AddToLast (i);
} 
```

**C++03**

```
#include <algorithm> // for std::for_each
#include <vector> //for std::vector

std::vector<int> IDM_POPUP_LAST (10); //make array

for (std::vector<int>::size_type i = 0; i < IDM_POPUP_LAST.size(); ++i) //loop 
    IDM_POPUP_LAST [i] = i + 100; //assign each element 100, 101, etc.

appendToMenu (/*...*/, IDM_POPUP_LAST[3]); //use an element

std::for_each (IDM_POPUP_LAST.begin(); IDM_POPUP_LAST.end(); AddToLast); //add 
```

# php - 将类添加到指定元素

> ID：11597489
> 
> 赞同：1
> 
> 时间：2012-07-22T02:58:43.177
> 
> 标签：php, javascript, jquery

好的，我有这个代码

```
//start our session
session_start();
//check if there is a page request
if (isset($_GET['page']))
{
//if there is a request page then get it and put it on a session variable and sent back the data that was requested.
$_SESSION['page'] = $_GET['page'];
$currentpage = $_SESSION['page'];
}
//if there is no request then..
else
{
$_SESSION['page'] = "home"; //if there is no request page then we literally tell that we are in the main page so we session will be home
$currentpage = $_SESSION['page'];
}

//echo a hidden input fields that hold the value of current page which will be accessed  by the jquery for adding classes of the match value in the attribute 'page' of the element base on the value that the hidden input field has

echo "<input type='hidden' id='currentpage' value='".$currentpage."' /> 
```

现在，我想将一个类 'active' 添加到与属性 'page' 的值匹配的元素中，并将其添加到 ID 为 'currentpage' 的隐藏输入字段的值中，为了做到这一点，我更喜欢在 jquery 上制作，所以代码如下。

```
$(document).ready(function(){
//get the value of the hidden input field
$page = $('#currentpage').val();
//now im stuck here ..
}); 
```

我不知道如何从 id 为“currentpage”的隐藏字段的值中在指定元素上添加一个类，该元素的属性“page”匹配值

例如：

```
<input type='hidden' id='currentpage' value='home' /> 
```

所以基于元素的属性“页面”应该添加一个活动类，所以应该是这样的。

```
<ul>
    <li><a page="home" href="index.php" class="active">home</a></li> <!--as you can see on this part an active class has been added thats because the value of the attr page of this element is match to the value of the hidden input fields which has the id of 'currentpage'-->
    <li><a page="gallery" href="index.php?page=gallery">gallery</a></li>
    <li><a page="about" href="index.php?page=about">about</a></li>
    <li><a page="contact" href="index.php?page=contact">contact</a></li>
</ul> 
```

希望有人能给我一些可以帮助解决当前问题的东西，在此先感谢。

PS：我对想法、建议和建议持开放态度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T03:02:34.027

像这样：

```
$("a[page="+$page+"]").addClass("active"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T03:03:21.597

```
 $('a[page='+$page+']').addClass('active'); 
```

[jsfiddle](http://jsfiddle.net/Ohgodwhy/6mHKg/)

# mysql - MySQL 中的数字数据在 VB 2010 的文本框中显示为布尔值 TRUE/FALSE

> ID：11597490
> 
> 赞同：1
> 
> 时间：2012-07-22T02:59:13.980
> 
> 标签：mysql, vb.net

我的 mySQL 数据库中有一个字段，其数据类型为 smallint(2)。我将我的数据库连接到 VB 2010，但我无法获得要在文本框中显示的数字。除此数值外，其他数值可正确显示。此特定数据仅显示 TRUE，尽管它不是布尔数据类型。我检查了我的 BindingSource 并且确实 VB 2010 在不应该的时候将其识别为布尔值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:26:55.823

哦，我的，我看到了有什么问题。在 VB 2010 上，我去了数据集设计器，发现特定字段的数据类型是 system.boolean，我只是将其更改为 system.int16，一切正常

# java - 我可以做些什么来解决连接问题？

> ID：11597492
> 
> 赞同：0
> 
> 时间：2012-07-22T02:59:57.180
> 
> 标签：java, android, jsoup, socketexception

我有一个使用 JSoup 连接到 Web 服务器的应用程序，它工作正常。不幸的是，上述网络服务器不是很可靠。由于连接超时，我经常收到 SocketException。我在修改后的 IntentService 中建立连接，我只是在 catch(Exception e) 块中重复*onHandleIntent(intent) 。*

```
catch(Exception e){
Log.d(Tag, "in catch Exception block...");   
onHandleIntent(intent);
} 
```

从理论上讲，这应该有效。但有时，我会遇到堆栈溢出错误，并且应用程序以非常不优雅的方式结束。那么，我该怎么做才能让它变得更好呢？

我想继续调用onHandleIntent，所以，也许我必须在迭代中调用它而不是递归调用它。如果您可以就如何迭代地实现这一点给我建议，那将非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:13:46.303

> 我想继续调用onHandleIntent，所以，也许我必须在迭代中调用它而不是递归调用它。

那是对的。如果您以递归方式处理此问题，则不断超时的服务器将**不可避免地**导致堆栈溢出。

> 如果您可以就如何迭代地实现这一点给我建议，那将非常有帮助。谢谢！

像这样的东西：

```
for (int tries = 1; ; tries++) {
    Connection conn = null;
    try {
        // attempt to connect
        // do stuff
    } catch (SocketException ex) {
        if (/* timed out */ && tries < MAX_TRIES) {
            continue;
        }
        // report exception
    } finally {
        if (conn != null) {
            // close it
        }
    }
    break;
} 
```

（也许有人可以想出一种不那么“笨拙”的方式来写这个......）

# c++ - 处理仪器捕获数据

> ID：11597500
> 
> 赞同：5
> 
> 时间：2012-07-22T03:03:11.237
> 
> 标签：c++, buffering, circular-buffer, data-acquisition

我有一个产生数据流的仪器；我的代码通过回调访问这些数据`onDataAcquisitionEvent(const InstrumentOutput &data)`。数据处理算法可能比数据到达的速度慢得多，所以我不能希望处理每一条数据（我也不必），但希望处理尽可能多的数据。感谢该仪器作为环境传感器，具有我无法控制的数据采集速率。`InstrumentOutput`例如，可以是一个包含不同位置的三个同时压力测量值的类。

我还需要保留一些简短的数据历史记录。例如，假设我可以合理地希望每 200 毫秒左右处理一次数据样本。大多数时候，我很乐意只处理最后一个样本，但有时我需要查看在最新样本之前到达的几秒钟的数据，具体取决于最后一个样本中是否存在异常读数。

另一个要求是尽快退出`onDataAcquisitionEvent()`回调，以避免传感器中的数据丢失。

数据采集​​库（第三方）在单独的线程上收集仪器数据。

我想到了以下设计；拥有单个生产者/单个消费者队列，并将数据令牌推送到 onDataAcquisitionEvent() 回调中的同步队列中。
在接收端，有一个循环从队列中弹出数据。由于数据到达率很高，循环几乎永远不会休眠。在每次迭代中，都会发生以下情况：

1.  从队列中弹出所有可用数据，
2.  弹出的数据被复制到一个循环缓冲区（我使用了 boost 循环缓冲区），这样一些历史总是可用的，
3.  处理缓冲区中的最后一个元素（并可能查看之前的元素），
4.  重复循环。

问题：

1.  这种设计是否合理，有哪些陷阱？和
2.  有什么更好的设计？

编辑：我想到的一个问题是当循环缓冲区的大小不足以容纳所需的历史时；目前我只是重新分配循环缓冲区，使其大小增加一倍。我希望我只需要这样做一两次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T03:18:37.127

我在数据采集方面有一点经验，我可以告诉你很多开发人员都存在过早的特性蠕变问题。因为简单地将仪器中的数据捕获到日志中听起来很容易，所以人们倾向于在验证日志记录是否确实可靠之前向系统添加不必要的组件。这是一个大错误。

> 另一个要求是尽快退出`onDataAcquisitionEvent()`回调，以避免传感器中的数据丢失。

这是产品的该部分在所有现场条件下都能 110% 工作之前的唯一要求。

* * *

> 大多数时候，我很乐意只处理最后一个样本，但有时我需要查看在最新样本之前到达的几秒钟的数据，具体取决于最后一个样本中是否存在异常读数。

“大多数时候”并不重要。最坏情况下的代码，因为`onDataAcquisitionEvent()`不能花时间考虑突发事件。

听起来你陷入了设计它以使用可能可用的最佳数据的陷阱，并且如果它不可用或者如果向监视器提供最佳数据最终过于昂贵，可能会发生什么。

从源头抽取数据。指定异常案例处理需要多少样本，并尝试以恒定的采样率提供那么多样本，再加上 20% 的余量。

当然不应该有永不休眠的循环。循环缓冲区很好，但只需使用所需的最小值填充它，并仅根据需要频繁分析它。

系统的质量由其决定*稳定性和确定性*，而不是试图加倍努力并提供尽可能多的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T04:18:16.780

您的生产者/消费者设计正是正确的设计。在实时系统中，我们通常还为消费线程提供不同的运行时优先级，不确定这是否适用于您的情况。

使用基本上是双向链表的数据结构，这样如果它增长，您不需要重新分配所有内容，并且您还可以 O(1) 访问所需的样本。

如果您的内存不够大，无法容纳几秒钟的数据（它应该 - 每 200 毫秒一个样本？每秒 5 个样本。）那么您需要看看您是否可以忍受从辅助内存中读取，但这就是吞吐量并且在您的情况下，与您对“尽快退出回调”的设计和要求无关。

考虑一个不需要锁定的队列实现（记住：只有单个读取器和单个写入器！），这样您的回调就不会停止。

如果你的回调真的很快，考虑禁用中断/给它一个高优先级。如果它永远不会阻塞并且设置了正确的优先级，则可能没有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T05:25:49.123

> 问题，（1）这个设计听起来不错，有什么陷阱，以及（2）什么是更好的设计。谢谢。

是的，它是健全的。但出于性能原因，您应该设计代码，使其在每个处理阶段处理一组输入样本，而不是每个处理一个样本。这为当前最先进的 CPU 提供了更优化的代码。

这样一个数组（=一块数据）的长度是固定的（更简单的代码）或可变的（灵活的，但某些处理可能会变得更复杂）。

作为第二个设计选择，您可能应该忽略此架构级别的历史，并将该功能降级...

> 大多数时候，我很乐意只处理最后一个样本，但有时我需要查看几秒钟的数据 [...]

也许，跟踪历史记录应该在代码的那个特殊部分中实现，偶尔需要访问它。也许，这不应该是“整体架构”的一部分。如果是这样，它就完全简化了处理。

# objective-c - NSPredicate 与字符串完全匹配

> ID：11597508
> 
> 赞同：24
> 
> 时间：2012-07-22T03:07:24.420
> 
> 标签：objective-c, ios, core-data, nsstring, nspredicate

我有一个这样的 NSPredicate：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"entity.name CONTAINS %@", myString]; 
```

但这将返回包含该字符串的任何内容。例如：如果我的 entity.name 在哪里：

```
text
texttwo
textthree
randomtext 
```

然后所有这些字符串都会匹配`myString`。`text`我想要这样 if `myString`is`text`它只会返回带有 name 的第一个对象， `text`if is`myString`它会返回带有 name`randomtext`的第四个对象`randomtext`。我也在寻找它**不区分大小写**并且它忽略空格

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-22T03:17:20.493

这应该这样做：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"entity.name LIKE[c] %@", myString]; 
```

`LIKE`用 ? 匹配字符串 和 * 作为通配符。表示比较`[c]`应该不区分大小写。

如果你不想？和 * 被视为通配符，您可以使用`==`代替`LIKE`：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"entity.name ==[c] %@", myString]; 
```

NSPredicate 谓词格式字符串语法[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795-CJBDBHCB)中的更多信息。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-22T03:29:05.750

您可以将正则表达式匹配器与谓词一起使用，如下所示：

```
NSString *str = @"test";
NSMutableString *arg = [NSMutableString string];
[arg appendString:@"\\s*\\b"];
[arg appendString:str];
[arg appendString:@"\\b\\s*"];
NSPredicate *p = [NSPredicate predicateWithFormat:@"SELF matches[c] %@", arg];
NSArray *a = [NSArray arrayWithObjects:@" test ", @"test", @"Test", @"TEST", nil];
NSArray *b = [a filteredArrayUsingPredicate:p]; 
```

上面的这段代码构造了一个正则表达式，它匹配开头和/或结尾带有可选空格的字符串，目标单词被“单词边界”标记包围`\b`。`[c]`after的`matches`意思是“不区分大小写匹配”。

这个例子使用了一个字符串数组；要使其在您的环境中工作，请替换`SELF`为`entity.name`.

# c# - 从 XML 文件导入图像

> ID：11597510
> 
> 赞同：2
> 
> 时间：2012-07-22T03:08:41.060
> 
> 标签：c#, .net, opencv

我正在尝试生成一个系统，该系统在 OpenCV 中获取图像，将其写入 XML，从 XML 中读取，并将其显示在 WPF 应用程序的图像控件中。

我遇到的问题是我不清楚 .NET 类（例如 BitmapImage）如何处理来自字节数组的图像。我尝试了多种方法并得到了各种错误 - 除非需要，否则无法发布。

我想知道是否有人可以为此指出正确的方向？我想知道的是如何将数据呈现给 .NET 对象以便在 Image 控件中显示它？

提前感谢您的帮助 - 非常感谢。

编辑：我希望我需要做的是将 XML 转换为字节数组并使用它以及格式的定义来实例化 BitmapImage 对象或等效于用作 Image 控件的源。我不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T03:42:58.283

用于`int cvSaveImage(const char* filename, const CvArr* image)` 将文件[另存](http://opencv.willowgarage.com/documentation/c/reading_and_writing_images_and_video.html)为图像。图像格式根据文件扩展名选择

`XML`如果您可以将其直接存储为图像文件，则无需存储它。

.NET 类需要一个 Image。就是这样。

笔记：

如果您想将红色、绿色、蓝色值存储为逗号分隔的字符串，那将是非常**低效**的。将其保存`Base64`。然后您可以将其转换为字节并将其提供给任何 .NET 图像类。.NET`ImageConverter`类也可以很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T04:05:01.067

您可以使用：

```
public static BitmapSource Create(
    int pixelWidth,
    int pixelHeight,
    double dpiX,
    double dpiY,
    PixelFormat pixelFormat,
    BitmapPalette palette,
    Array pixels,
    int stride
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T08:32:06.683

我发现问题是（大概）我在编写 XML 数据之前没有对其进行 Base64 编码。因此解决方案是在写入 XML 之前对数据进行 Base64 编码，在另一端对其进行 Base64 解码，将数据作为字节数组读取并使用它来实例化 MemoryStream 和 BitmapImage 对象。

谢谢大家的帮助。

# python - python代码错误

> ID：11597511
> 
> 赞同：1
> 
> 时间：2012-07-22T03:08:51.590
> 
> 标签：python

以下代码返回错误`KeyError: 500`

```
def my_func(self, limit, list_type, **args):
    type2abbr = {"allcategories": "ac", "categorymembers":"cm"}
    abbr = type2abbr[list_type]
    yield abbr
if __name__ == "__main__":
    abbr = my_func(500, "categorymembers")
    print abbr 
```

输出：

```
    回溯（最近一次通话最后）：
      文件“dater.py”，第 72 行，在
        bot.start()
      文件“dater.py”，第 56 行，开始
        对于标题，self.pages 中的文本：
      文件“dater.py”，第 25 行，在 page_generator
        对于 self.cats 中的项目：
      文件“/home/ceradon/api.py”，第 305 行，在列表中
        缩写 = type2abbr[list_type]
    密钥错误：500

```

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T03:26:22.767

您已经`my_func`将其实现为一种方法（即假设`self`），但您没有在任何对象上调用它。

要么你应该有一个对象，例如`x.my_func(...)`，要么你应该`self,`从参数列表中删除。

# c++ - C++ 中的二维矩阵

> ID：11597513
> 
> 赞同：0
> 
> 时间：2012-07-22T03:09:43.087
> 
> 标签：c++, memory-management, matrix

我正在尝试在二维矩阵中进行一些操作。我重载了 (+ , - 和 *) 来进行计算。我有一个关于（我相信）内存管理的问题。看下面的代码：

```
Mtx M1(rows1,cols1,1.0); //call the constructor 
Mtx M2(rows2,cols2,2.0); //call the constructor 
Mtx M3(rows3,cols3,0.0); //call the constructor 

M3 = M1 + M2;
cout << M3 << endl;

Mtx Mtx::operator+(const Mtx &rhs)
{

double **ETS;
ETS = new double*[nrows];
for (int i = 0; i < rhs.nrows; i++) {
    ETS[i] = new double[rhs.ncols];
}
if (ETS == NULL) {
    cout << "Error Allocation on the Heap" << endl;
    exit(1);
}

for (int i = 0; i < rhs.nrows; i++) {
    for (int j = 0; j < rhs.ncols; j++) {
        ETS[i][j] = 0.0;
    }
}

for (int i = 0; i < rhs.nrows; i++) {
    for (int j = 0; j < rhs.ncols; j++) {
        ETS[i][j] = ets[i][j];
    }
}

for (int i = 0; i < rhs.nrows; i++) {
    for (int j = 0; j < rhs.ncols; j++) {
        ETS[i][j] = ETS[i][j] + rhs.ets[i][j];
    }
}

Mtx S(nrows, ncols, ETS);
delete [] ETS;
return S;
} 
```

我想我的问题在这里：

```
Mtx S(nrows, ncols, ETS); 
delete [] ETS;
return S; 
```

这是返回的正确方法`ETS`吗？还是您认为问题出在构造函数上？当我执行上述返回时，我没有得到任何输出！

这是构造函数`Mtx S(nrows, ncols, ETS);`

```
Mtx::Mtx(int rows, int cols, double **ETS)
{
ets = new double*[nrows];
for (int i = 0; i < nrows; i++) {
    ets[i] = new double[ncols];
}
for (int i = 0; i < nrows; i++) {
    for (int j = 0; j < ncols; j++) {
        ets[i][j] = ETS[i][j];
    }
  }
} 
```

我的复制构造函数：

```
Mtx::Mtx(const Mtx& rhs)
:nrows(rhs.nrows), ncols(rhs.ncols)
    {
ets = new double*[nrows];
for (int i = 0; i < nrows; i++) {
    ets[i] = new double[ncols];
}

for (int i = 0; i < rhs.nrows; i++) {
    for (int j = 0; j < rhs.ncols; j++) {
        ets[i][j] = rhs.ets[i][j];
    }
  }
} 
```

我超载`<<`打印`M3`。它工作正常，因为我测试了打印`M1`和`M2`.

我也做了以下，但仍然没有工作：

```
Mtx S(nrows, ncols, ETS);
for (int i = 0; i < rhs.nrows; i++) {
    delete [] ETS[i];
}
delete [] ETS;
return S;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T05:07:57.683

你可以改为使用

```
std::vector< std::vector<double> > 
```

代替

```
double ** 
```

就界限而言，这将更加安全。你只需要使用函数

```
std::vector::size() 
```

和

```
std::vector::clear() 
```

在析构函数中。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T05:05:07.073

实现二元算术运算符的常用方法是定义`operator+=`为类成员函数和`operator+`独立函数。请注意，`+`运算符是根据运算符实现的，它***通过 copy***`+=`获取其左操作数。只要您的复制构造函数和赋值运算符是正确的，这应该可以工作。

 *```
// member function
Mtx& Mtx::operator+=(const Mtx &rhs)
{
    for (int i = 0; i < nrows; ++i) {
        for (int j = 0; j < ncols; ++i) {
            ets[i][j] += rhs.ets[i][j];
        }
    }
    return *this;
}

// non-member function
Mtx operator+(Mtx lhs, const Mtx &rhs)
{
    lhs += rhs;
    return lhs;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T03:43:06.117

是的，你指出的地方有问题。您必须删除 ETS 中指针中指向的所有内存。所以，它应该更像：

```
for (int i = 0; i < rhs.nrows; i++) {
    delete [] ETS[i];
}
delete [] ETS; 
```

我的好规则是每次调用 new 你必须调用 delete；`nrows+1`您通过调用 new 来分配数组，因此您必须使用相同的编号进行删除。这并不难，但它会在出现问题时提示您。*

# python - 图更新算法

> ID：11597514
> 
> 赞同：7
> 
> 时间：2012-07-22T03:09:49.013
> 
> 标签：python, algorithm, graph-theory, graph-algorithm

我有一个使用邻接表表示的（无向）图，例如

```
a: b, c, e
b: a, d
c: a, d
d: b, c
e: a 
```

其中图的每个节点都链接到其他节点的列表

我想在给定某些节点的一些新列表的情况下更新这样的图表，例如

```
a: b, c, d 
```

where`a`不再连接到`e`，并连接到一个新节点`d`

什么是对图形执行此类更新的有效（时间和空间方面）算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:36:29.380

也许我遗漏了一些东西，但是使用节点标签（字符串或数字）的字典（或默认字典）来设置不是最快的吗？在这种情况下，更新可能如下所示：

```
def update(graph, node, edges, undirected=True):
    # graph: dict(str->set(str)), node: str, edges: set(str), undirected: bool
    if undirected:
        for e in graph[node]:
            graph[e].remove(node)
        for e in edges:
            graph[e].add(node)
    graph[node] = edges 
```

使用集合和字典，在其他节点的边集中添加和删除节点应该是 O(1)，与更新节点本身的边集相同，所以这应该只有 O(2n)两个循环，其中 n 是节点的平均边数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T03:22:40.913

使用邻接网格将使其 O(n) 更新，但会占用 n^2 空间，无论图有多稀疏。（通过反转行和列来更新每个更改的关系来轻松完成。）

使用列表会使更新时间达到 O(n^2)，但对于稀疏图不会花费大量时间，并且会节省大量空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T03:36:48.883

一个典型的更新是`del edge a,e; add edge a,d`，但你的更新看起来像一个新的 vertex 邻接列表`a`。所以只需找到`a`邻接列表并替换它。那应该是 O(log n) 时间（假设邻接列表的排序数组，如您的描述中所示）。

# php - PHP - 试图获取非对象的属性

> ID：11597515
> 
> 赞同：3
> 
> 时间：2012-07-22T03:09:57.410
> 
> 标签：php, arrays, object

我正在尝试遍历一个名为`items`包含数组的对象属性：

```
foreach ($this->footerList->items as $item) 
```

当我执行该语句时，我收到一条错误消息 - “尝试获取非对象的属性”，即使

```
var_dump($this->footerList) 
```

表明`$this->footerList`确实包含一个`items`数组。

```
object(FooterModel)#13 (1) 
{ 
    ["items"]=> array(3) 
    { 
        [0]=> array(5) 
        { 
             ["id"]=> string(20) "terms-and-conditions" 
             ["title"]=> string(20) "Terms and Conditions" 
             ["url"]=> string(23) "home/termsandconditions" 
             ["label"]=> string(20) "Terms and Conditions" 
             ["authenticatedOnly"]=> string(5) "false" 
        } 
        [1]=> array(5) 
        { 
             ["id"]=> string(14) "privacy-policy" 
             ["title"]=> string(14) "Privacy Policy" 
             ["url"]=> string(18) "home/privacypolicy" 
             ["label"]=> string(14) "Privacy Policy" 
             ["authenticatedOnly"]=> string(5) "false" 
         } 
    } 
} 
```

有人可以帮我弄清楚为什么循环语句无法解决`$this->footerList->items`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T03:15:32.307

它应该是

```
foreach ($this->footerList["items"] as $item) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T03:12:59.670

这在您尝试使用而不是在类内部时最常见`$this`，您尝试将数组作为对象或在静态方法中引用。

您将需要提供更多代码以获得更清晰的答案。

**更新**

我格式化了你的输出。

```
foreach ( (object) $this->footerList->items as $item) 
```

以上内容会将所有子数组转换为对象，以允许您按照计划的方式使用代码。

# javascript - Javascript/Jquery 上的监听器

> ID：11597517
> 
> 赞同：2
> 
> 时间：2012-07-22T03:10:29.517
> 
> 标签：javascript, ajax, jquery, listener

我有一个 Web 服务，我在其中获取数据并将其填充到我的客户端中。到目前为止，我有一个按钮，当使用 ajax get 单击时，该按钮将从 Web 服务中获取数据。在我的网络服务上，我有一个维护，我可以在其中添加、编辑或删除数据。我想要做的是让我的客户端在我每次添加、编辑或删除数据时自动从我的网络服务中获取数据，这样它就会向客户端显示准确的数据。

这就是我的想法。在我的网络服务上，我将有一个 json 来告诉真/假数据是否已更新（将由客户端获取）。因此，每次添加、编辑、删除都会将其变为 true，而每次客户端获取该数据时，它都会变为 false。

现在，我需要一个 javascript/jquery 侦听器来侦听该 json 中的任何更改（真或假）。我需要让那个监听器每秒运行一次吗？是否可以？

谢谢。

**编辑：**

我一直在重读我的帖子，这让我很震惊，我只是在想我脑子里只有一个客户。我的网络服务中的每次添加、编辑、删除都会将“更新”设置为 true，每次收到数据请求时，我都会将其设置为 false。但是其他客户呢？当他们发送请求时，它已经是错误的，所以他们不会更新它。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T03:14:18.067

您可以使用两种方法来做到这一点：

1.  网络套接字；或者
2.  设置间隔函数。

下面是一个 setInterval() 的例子。

```
// just a control var...
var gen = 1;

// call the function repeatedly in 5 seconds of interval
// this call returns an id that can be used to stop the calls
var id = setInterval(function(){

    // function body...

    alert( "making an ajax request...(" + gen + ")" ); // here you call your webservice
    gen++;

    // just want to stop it, but you wont need this.
    if ( gen == 10 ) {
        clearInterval( id );
    }

}, 5000 ); // 5000 miliseconds == 5 seconds 
```

一些链接：

*   jsFiddle：http: [//jsfiddle.net/davidbuzatto/EyCSb/](http://jsfiddle.net/davidbuzatto/EyCSb/)
*   [https://developer.mozilla.org/en/DOM/window.setInterval](https://developer.mozilla.org/en/DOM/window.setInterval)
*   [https://developer.mozilla.org/en/DOM/window.clearInterval](https://developer.mozilla.org/en/DOM/window.clearInterval)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T03:15:02.727

您有两个 HTTP 选项：轮询服务器，或使用[彗星](http://en.wikipedia.org/wiki/Comet_%28programming%29)请求。如果您正在轮询，最好在请求中包含上次更新时间，以便服务器可以过滤比该时间更早的任何事件。这样，您就不需要为每个客户的每个事件保存一个额外的标志。

# c++ - 使用 lua 和 luabind 链接错误 - mingw

> ID：11597522
> 
> 赞同：0
> 
> 时间：2012-07-22T03:12:31.900
> 
> 标签：c++, lua, mingw, linker-errors, luabind

我正在使用[luabind](http://www.rasterbar.com/products/luabind.html)将我的 C++ 类绑定到 lua，我可以让 luabind 和大多数 lua 函数工作，但如果我尝试使用，`luaL_openlibs()`我会得到：

```
undefined reference to 'luaL_openlibs'
collect2: ld returned 1 exit status 
```

如果我将 -llua 添加到链接器中，我会得到：

```
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x15c): multiple definition of 'lua_gettop'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000253.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x170): multiple definition of 'lua_settop'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000296.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x244): multiple definition of 'lua_pushvalue'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000278.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x274): multiple definition of 'lua_type'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000307.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x388): multiple definition of 'lua_touserdata'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000306.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x414): multiple definition of 'lua_pushnil'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000274.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x42c): multiple definition of 'lua_pushnumber'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000275.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x450): multiple definition of 'lua_pushinteger'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000271.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x46c): multiple definition of 'lua_pushboolean'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000268.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x85c): multiple definition of 'lua_concat'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000235.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x8e8): multiple definition of 'lua_pushlstring'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000273.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x97c): multiple definition of 'lua_error'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000240.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0xb5c): multiple definition of 'lua_pcall'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000267.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0xbdc): multiple definition of 'lua_pushcclosure'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000269.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0xf98): multiple definition of 'lua_pushstring'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000276.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x104c): multiple definition of 'lua_settable'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000295.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x10d4): multiple definition of 'lua_rawgeti'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000282.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x111c): multiple definition of 'lua_rawget'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000281.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x1278): multiple definition of 'lua_objlen'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000266.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x12ec): multiple definition of 'lua_tolstring'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000302.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x1368): multiple definition of 'lua_tointeger'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000301.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lapi.o):lapi.c:(.text+0x13a4): multiple definition of 'lua_tonumber'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000303.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lstate.o):lstate.c:(.text+0xf4): multiple definition of 'lua_close'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000234.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lauxlib.o):lauxlib.c:(.text+0x40): multiple definition of 'luaL_newstate'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000219.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lauxlib.o):lauxlib.c:(.text+0x20c): multiple definition of 'luaL_loadfile'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000216.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lauxlib.o):lauxlib.c:(.text+0x5e0): multiple definition of 'luaL_unref'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000229.o):(.text+0x0): first defined here
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../liblua.a(lauxlib.o):lauxlib.c:(.text+0x664): multiple definition of 'luaL_ref'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../libluabindd.dll.a(d000226.o):(.text+0x0): first defined here
 collect2: ld returned 1 exit status 
```

我自己构建了 luabind，因为我找不到预构建的 mingw 二进制文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:24:53.820

我想到了。

问题是我在静态库中链接到 lua。我最终下载了[http://sourceforge.net/projects/luabinaries/files/5.1.4/Windows%20Libraries/lua5_1_4_Win32_dllw4_lib.zip](http://sourceforge.net/projects/luabinaries/files/5.1.4/Windows%20Libraries/lua5_1_4_Win32_dllw4_lib.zip)，重建 luabind 以链接到它，并将我的项目也设置为链接到它。

# android - 在 onCreate 外部创建时出现 arrayadapter 错误

> ID：11597525
> 
> 赞同：1
> 
> 时间：2012-07-22T03:13:48.920
> 
> 标签：android, listview, android-arrayadapter

我有一个 ArrayAdapter 用于填充列表视图，但我无法在 oncreate 事件之外创建它，但当时我没有数据。

```
public class CusPickup extends Activity {

private OrdersReady orderready_data[];
private ListView lView; 

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.orders); 
```

在这里我会得到一个空点异常。

```
 OrderReadyAdapter adapter = new OrderReadyAdapter(this,R.layout.listview_item_row, orderready_data);
    lView = (ListView)findViewById(R.id.listView1);
    View header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);
    lView.addHeaderView(header);
    lView.setAdapter(adapter);

getData();
}
} 
```

在这里，我从 HTTP get 获取数据。

```
private final Handler handler = new Handler() {

        @Override
        public void handleMessage(final Message msg) {
            progressDialog.dismiss();
            String bundleResult = msg.getData().getString("RESPONSE");
                int TotalRecords = myResult.d.results.size();
                for (int i = x; i < TotalRecords; i++ ) {
                    orderready_data[i] = new OrdersReady(myResult.d.results.get(i).myStr, myDate ,invResult.d.results.get(i).numberStr, invResult.d.results.get(i).qtyInt, myAmount)
                }  
           }
} 
```

如果我将 OrderReadyAdapter 放在她身上，我会收到一个代码错误，其中包含一个修复“将 OrderReadyAdapter(Context, Int, OrdersReady[]) 更改为 OrderReadyAdapter(Handle, Int, OrdersReady[]) 如果我更改它，我会收到更多错误。

另外我不确定我对私有 OrdersReady orderready_data[] 的声明是否正确，因为如果我在代码中声明它，我会这样声明： OrdersReady orderready_data[] = new OrdersReady[TotalRecords];

谢谢你的帮助。

* * *

新适配器

```
public class OrderReadyAdapter extends ArrayAdapter<OrdersReady>{

Context context; 
int layoutResourceId;    
ArrayList<OrdersReady> data = null;

public OrderReadyAdapter(Context context, int layoutResourceId, ArrayList<OrdersReady> orderReadyArray) {
    super(context, layoutResourceId, orderReadyArray);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = orderReadyArray;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    OrderHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new OrderHolder();
        holder.mytxt1 = (TextView)row.findViewById(R.id.mytxt1);
        holder.mytxt2 = (TextView)row.findViewById(R.id.mytxt2);
        holder.mytxt3 = (TextView)row.findViewById(R.id.mytxt3);
        holder.mytxt4 = (TextView)row.findViewById(R.id.mytxt4);
        holder.mytxt5 = (TextView)row.findViewById(R.id.mytxt5);

        row.setTag(holder);
    }
    else
    {
        holder = (OrderHolder)row.getTag();
    }

    OrdersReady orderready = data.get(position);
    holder.mytxt1.setText(orderready.place);
    holder.mytxt2.setText(orderready.Date);
    holder.mytxt3.setText(orderready.invoice);
    holder.mytxt4.setText(String.valueOf(orderready.Qty));
    holder.mytxt5.setText(String.valueOf(orderready.Amount));

    return row;
}

static class OrderHolder
{
    TextView mytxt1;
    TextView mytxt2;
    TextView mytxt3;
    TextView mytxt4;
    TextView mytxt5;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T03:37:16.293

我建议你把 OrdersReady[] 改成 ArrayList。在你的 onCreate 方法中初始化它。还将 orderReady 适配器设置为类字段。

```
orderReadyArray = new ArrayList<OrderReady>();
ordersReadyAdapter = new OrderReadyAdapter(this,R.layout.listview_item_row, orderReadyArray);
lView = (ListView)findViewById(R.id.listView1);
View header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);
lView.addHeaderView(header);
lView.setAdapter(ordersReadyAdapter); 
```

这应该初始化一个空的列表视图，因为您还没有数据。

当您从服务器收到 OrdersReady 数据时，更新 orderReadyArray 如下：

```
orderReadyArray.clear(); // remove old data
for (int i = x; i < TotalRecords; i++ ) {
   orderReadyArray.add(data); // add new data one by one
}
ordersReadyAdapter.notifyDataSetChanged(); // this forces the listview to repaint 
```

或者：

收到数据后，您可以创建一个新适配器并将其分配给列表视图：

```
List<OrderReady> orderReadyArray = new ArrayList<OrderReady>(); // create a new array to hold data
for (int i = x; i < TotalRecords; i++ ) {
   orderReadyArray.add(data); // add new data one by one
}
OrderReadyAdapter ordersReadyAdapter = new OrderReadyAdapter(this,R.layout.listview_item_row, orderReadyArray);
lView.setAdapter(ordersReadyAdapter); 
```

这应该会更新您的列表。如果您仍然看不到这些项目，则问题出在适配器中，也许您在 getView() 方法中错误地膨胀了行。

# google-maps - Google Maps MarkerClusterer 未反映正确数量的标记

> ID：11597527
> 
> 赞同：0
> 
> 时间：2012-07-22T03:14:18.317
> 
> 标签：google-maps, numbers, markerclusterer

我创建了一个使用 MarkerClusterer 库的地图。它似乎有效，但有几个问题。

首先，集群所代表的标记数量有时似乎有点偏离——即，有时一个集群会说它有 24 个标记，但是当您单击它时，窗口中会显示 40 个标记。

其次，一旦你缩小了几个级别，数字就会变得疯狂——我们只有 4k+ 标记，而我得到了带有 12k+ 数字的集群。

我不知道如何前进。希望得到一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:50:25.153

您有一个在地图空闲时调用 showMarkers 的事件侦听器。每次空闲事件触发时，该函数都会将所有标记添加到集群器（因此您最终会得到每个标记的多个副本）。您可能想要 addListenerOnce 而不是 addListener。

另一种选择是在再次将它们全部重新添加之前清除集群器中的标记，但由于您似乎只需要一次向集群器添加一组固定的标记，这可能不是最佳选择。

# php - Drupal 7 - 将内容和一段文本添加到页脚区域

> ID：11597529
> 
> 赞同：2
> 
> 时间：2012-07-22T03:14:33.963
> 
> 标签：php, drupal, drupal-7

我想将以下内容添加到 drupal 7 的页脚区域/块中。

1.  指向只是基本页面内容的内容的“隐私”链接
2.  一段文字'Copyright 2012'

页脚将如下所示 版权所有 2012 | *链接到隐私*

做这个的最好方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T04:31:47.890

转到管理 > 结构 > 块并创建一个新块。您可以将标题输入为“”以防止打印标题。输入您的内容，并选择适当的输入格式（完整的 HTML 等）。保存。然后，将块移动到适当的区域。大多数主题都有一个页脚区域，您可以将块的处理程序拖放到该区域（而不是确切的区域。页面中间有一个放置区）。

您还可以在主题文件夹中添加此文本 page.tpl.php 文件。

您可以使用原始 HTML 或使用 PHP 嵌入链接（始终反映正确的 URL，路径为自动）。如果您不想将 php 嵌入块中，这需要您启用 PHP 过滤器模块（从核心），请将其放在 page.tpl.php 中。

```
<div id="footer-text">
 <?php print l(t('Privacy policy'), 'node/5'); ?> | <?php print t('Copyright @year', array('@year' => date("Y"))); ?>
</div> 
```

考虑到别名，这应该打印链接到 node/5 的隐私文本，以及两个标签都可翻译的版权 [年份]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T15:05:12.473

如果您不想编写 PHP，那么您可以考虑创建一个菜单。[您可以使用模块http://drupal.org/project/special_menu_items](http://drupal.org/project/special_menu_items)为静态文本创建占位符菜单项。菜单将作为一个块可用，您可以将其添加到页脚区域。

# jquery - Ajax：仅在完全加载时淡入新内容

> ID：11597535
> 
> 赞同：3
> 
> 时间：2012-07-22T03:15:37.640
> 
> 标签：jquery, ajax

我不知道这种技术是否错误，但我真的只希望新内容在满载时淡入。似乎 beforeSend 和 complete send 对时间没有影响。甚至在上滑发生之前，新内容就会淡入淡出，fe。

我对 ajax 还不是很熟悉，你必须知道。

这是我的代码：

```
$(function(){
    var replacePage = function(url) {

        $.ajax({
            url: url,
            type: 'get',
            dataType: 'html',
            beforeSend: function() {    
                $(".menue").slideUp();
            },
            success: function(data){
                var dom = $(data);
                var html = dom.filter('#content').html();

                $('#content').html(html);

            },
            complete: function(){
                $("#content").fadeIn(); 
            }
        });
    }

    $('nav a').live('click', function(e){
        history.pushState(null, null, this.href);   
        replacePage(this.href);
        e.preventDefault();
    $("#content").hide();
    });

    $(window).bind('popstate', function(){
        replacePage(location.pathname);
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T03:24:14.093

尝试以下操作：

```
success: function(data){
           var dom = $(data);
           var html = dom.filter('#content').html();
           $(".menue").promise().done(function(){
                $('#content').html(html).fadeIn()
           })
        }, 
```

或者您可以使用`slideUp()`动画完成后执行的回调函数：

```
$(".menue").slideUp('slow', function(){
    $.ajax({
        url: url,
        type: 'get',
        dataType: 'html',
        success: function(data){
            var dom = $(data);
            var html = dom.filter('#content').html();
            $('#content').html(html).fadeIn()
        }
    });
 }) 
```

*请注意，`live()`已弃用，您可以改用`on()`方法。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T03:19:13.547

将 ajax 调用中的成功函数更改为：

```
success: function(data){
                var dom = $(data);
                var html = dom.filter('#content').html();
                $('#content').html(html).hide().fadeIn();
            }, 
```

请记住从完整的调用中删除fadeIn()。

# delphi - Delphi中TDBGrid上单击标题的矩形是什么？

> ID：11597536
> 
> 赞同：1
> 
> 时间：2012-07-22T03:16:21.197
> 
> 标签：delphi, coordinates, tdbgrid

我想确定在 TDBGrid 事件 TitleClick(Column: TColumn) 上单击的标题单元格的屏幕坐标。

我可以使用 ColWidths 属性（通过 TDBGrid = class(DBGrids.TDBGrid) 类型声明公开），但我很难确定列是否已被用户重新排序，并结合 TDBGrid 的水平滚动。我还想在随后的移动和调整大小期间跟踪此列的位置，同时注意此列可能会从网格中滚动出来。

我在这个问题上花了很长时间，而且我很擅长 Delphi，所以这不是一个无聊的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T04:29:54.130

使用[How do I get screen coordinates of the DBGrid cell 中](https://stackoverflow.com/questions/9355555/how-do-i-get-screen-coordinates-of-the-dbgrid-cell)的技巧，我写道：

```
type
...
  THackedGrid = class(TDBGrid);
...
implementation
...
procedure TForm1.DBGrid1TitleClick(Column: TColumn);
var
  currRow : Integer;
  rect : TRect;
begin
  currRow := THackedGrid(DBGrid1).Row;
  rect := THackedGrid(DBGrid1).CellRect(Column.Index+1,currRow);
end; 
```

这是你想要的吗？rect 中的坐标是相对于网格的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T03:07:27.830

我昨天在工作中开始研究一个非常相似的网格。正如你提到的，我在网格固定行上覆盖了一个控件，右键单击激活它。这就是我到目前为止所做的，然后在我的数据集上设置过滤器。但是，在组合上使用多选时我遇到了问题。我很想看看你自上一篇文章以来所取得的成就。

```
procedure Tf_well.dbWellGridMouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
var cell  : TGridCoord;
begin
    if Button = mbRight then
    begin
        Cell := dbWellGrid.MouseCoord(X, Y);
        //  showmessage(dbWellGrid.Columns[Cell.X-1].DisplayName);

        case Cell.X-1 of
            0:  begin
                    fieldComboWellName.Visible:=True;
                    fieldComboWellName.DroppedDown:=True;
                    fieldComboWellName.SetFocus;
                end; 
```

# html - 无法让 twitter 引导导航栏工作？

> ID：11597540
> 
> 赞同：1
> 
> 时间：2012-07-22T03:18:25.510
> 
> 标签：html, css, twitter-bootstrap, navbar

我浏览了一堆教程，并且在这里阅读了一堆问题的答案。我不知道发生了什么事。我按顺序链接到 bootstrap.css、bootstrap-responsive.css、bootstrap.js、jquery 和 bootstrap-dropdown.js。当我从页面源中单击每个时，它会正确显示。但是，当我单击下拉列表时，什么也没有发生。这是它的html代码：

```
<!--begin bootstrap navbar-->
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <ul class="nav">
                <li><a href="/signup/index">Sign Up</a></li>
                <li class="dropdown">
                    <a href="/signup/index" class="dropdown-toggle" data-toggle="dropdown">Login<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                         <li><a href="/mypage">my page</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>
<!--/end bootstrap navbar--> 
```

如果有人有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T03:20:24.373

一个非常常见的问题是加载 javascript 文件的顺序。您必须在引导 javascript 文件之前加载 jquery。CSS 文件顺序无关紧要。

**编辑**

当我复制粘贴您的代码并将此行中的 href 从“/signup/index”更改为“#”时，它起作用了...

```
<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Login<b class="caret"></b></a> 
```

看... ![在此处输入图像描述](../Images/b80a39769711504ba2f26b668761b2c6.png)

引导菜单通过单击（而不是悬停）激活，如果链接实际上指向某个地方，它将跳过下拉菜单并改为导航。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:18:20.517

您应该只链接 bootstrap.js 或 bootstrap-dropdown.js。显然，它会产生一些冲突，因为这是我唯一需要改变的。但是，我以前做过这个没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T23:49:00.430

我有一个类似的问题，当我点击它时，导航栏下拉菜单没有反应。我试图在我的设计中采用[http://twitter.github.io/bootstrap/examples/starter-template.html 。](http://twitter.github.io/bootstrap/examples/starter-template.html)

最终缺少 jquery.js 的问题。

这是寻找 jquery.js 的代码。

```
<!-- Placed at the end of the document so the pages load faster -->
<script src="../assets/js/jquery.js"></script>
<script src="../assets/js/bootstrap-transition.js"></script>
<script src="../assets/js/bootstrap-alert.js"></script> 
```

在我将丢失的 jquery.js 复制到正确的文件夹后，一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-04T19:21:11.983

带有 React 的引导导航栏模板：

移动视图上的下拉菜单没有单击下拉菜单的类似问题..只是缺少我从 w3c 获取的行.. ajax 丢失了。：

参考 [____ https://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_navbar_collapse&stacked=h](https://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_navbar_collapse&stacked=h)

**下面的代码在您的 HTML 标头中**

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> 
```

# r - R如何在涉及3个变量的情况下创建类似数据透视表的数据框？

> ID：11597542
> 
> 赞同：2
> 
> 时间：2012-07-22T03:18:38.207
> 
> 标签：r, pivot-table

我在 R 中有以下数据框，它为我提供了客户 1,2 和 3 的交易记录。每行显示交易的期间类型和他花费的金额。

```
id<-c(1,2,3,1,1,2,3,2,2)
period<-c("calib","valid","valid","calib","valid","valid","calib","calib","valid")
spent<-c(10,3,8,12,5,5,4,3,5)
df<-data.frame(id,period,spent) 
```

现在我需要创建一个新的数据框，它为我提供不同“时期”中每个交易的每个“id”的平均“花费”。我在 excel 数据透视表中得到的结果表应如下所示：

```
id  calib    valid
1     11       5
2     3        4.33
3     4        8 
```

我知道应该有一种方法可以在 R 中完成这项工作，但由于我是 R 的新手，所以我不知道。我想知道是否有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T03:22:09.560

您可以使用**reshape2**`dcast`包中的方法执行此操作（我敢肯定，还有许多其他方法）：

 **```
library(reshape2)
dcast(df,id~period,fun.aggregate = mean)

  id calib    valid
1  1    11 5.000000
2  2     3 4.333333
3  3     4 8.000000 
```

（请注意，我假设您打算将`spent`向量包含在数据框中。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T07:03:53.867

这是完整性的基本解决方案。

我编辑了你的代码，你忘了包含`spent`在你的 end data.frame 中。

```
df <- data.frame(id, period, spent)
with(df, tapply(spent, INDEX = list(id, period), FUN = mean))

  calib    valid
1    11 5.000000
2     3 4.333333
3     4 8.000000 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-06T16:29:09.530

并使用[dplyr](http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html)和[tidyr](http://blog.rstudio.org/2014/07/22/introducing-tidyr/)包：

```
df %>%
  group_by(id,period) %>%
  summarise (avg = mean(spent)) %>%
  spread(period,avg) # reshapes dataframe from long to wide 
```**

# css - 如何为样式表中的文本输入设置css字体大小

> ID：11597546
> 
> 赞同：0
> 
> 时间：2012-07-22T03:19:16.310
> 
> 标签：css, font-size

我无法从样式表中设置文本输入的字体大小。但是，通过设置 style 属性可以正常工作。

这有效：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text-htmlcharset=utf-; 8" />
    <title>Test</title>
    <style type="text/css">
#about {
}
    </style>
</head>
<body>
    <input id="about" type="input" value="anything" style="font-size:21pt;" />
</body>
</html> 
```

这不起作用（字体大小被忽略）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text-htmlcharset=utf-; 8" />
    <title>Test</title>
    <style type="text/css">
#about {
    font-size:21pt;
}
    </style>
</head>
<body>
    <input id="about" type="input" value="anything" />
</body>
</html> 
```

我错过了什么？当然，您不应该对所有文本输入使用内联样式吗？在某些情况下，这似乎很俗气和多余。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T03:22:12.100

更改`<style type="text/javascript">`为`<style type="text/css">`

您正在混淆浏览器，因为它正在寻找 JavaScript 代码，但您正在向它提供 CSS。 `<script>`标签应该用于javascript，`<style>`标签用于CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T03:24:03.257

您的样式块具有文本/javascript 类型。删除它，它会正常工作。

# r - R：如何找到同时包含数字和非数字项目的行中的最小值？

> ID：11597547
> 
> 赞同：1
> 
> 时间：2012-07-22T03:19:30.397
> 
> 标签：r, row, numeric, min

我有一个矩阵 - 第 1-371 列是数字，第 372-379 列是非数字（即存储年龄、性别信息）。我想找到数字项的每一行的最小值（对于每一行，查看 371 个值）。

我正在尝试制作一个计数向量，所以代码是：

```
count_a <- 0
for (i in 1:nrow(data)) {
    if (min(data[i,][which(data$Age < age & data$Gender == gender)]) <= threshold) {
        count_a <- count_a+1
    }
} 
```

但是我不断收到此错误： FUN(X[[1L]], ...) 中的错误：仅在具有所有数字变量的数据帧上定义

我应该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T03:29:25.313

使用 CO2 数据集尝试如下操作：

```
NUM <-function(dataframe)dataframe[,sapply(dataframe,is.numeric)]
apply(NUM(CO2), 1, min) 
```

# directx - 如何使用windbg闯入directx应用进程？

> ID：11597549
> 
> 赞同：0
> 
> 时间：2012-07-22T03:19:52.710
> 
> 标签：directx, windbg

我运行 DirectX SDK 示例 BasicHLSL10 并使用 Windbg 附加到该进程。进入该过程后，我使用'x d3d*！*渲染'和'x dxgi！*' 列出我感兴趣的功能。然后我在 'dxgi!D3DKMTPresent' 以及所有的 'd3d*!D3DKMTRender' 上设置断点。之后，我按“g”以继续该过程。但是，BasicHLSL10 似乎可以继续运行而不会踩到这些断点。我想这可能是那些 COM 接口的东西之一，但我不是很熟悉。当它调用某些 DirectX 调用时，我怎样才能闯入该进程？这种技术是否也适用于使用 DXVA 的媒体播放器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:55:09.723

看起来可能是因为 D3DKMT* 函数仅由 OpenGL 可安装客户端驱动程序使用（至少我认为这是我在 WDK 中读到的），所以也许这就是 BasicHLSL10 从不使用它的原因......

# c# - cookie 的 HTTPS 问题 C#

> ID：11597551
> 
> 赞同：1
> 
> 时间：2012-07-22T03:20:37.497
> 
> 标签：c#

好的，现在我已经研究了代码，当谈到将 cookie 集合存储在 a 中时，没有 cookie 可言`CookieContainer`，所以我想转移并使用标题。唯一的问题是我不明白如何使用它们，以便我可以从网站下载文件。

有人可以给我一个示例，说明我将如何使用标头吗？

另外我用于cookies的代码如下，可能有错误：

```
 HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        CookieContainer newCookies = new CookieContainer();
        newCookies.Add(response.Cookies); 
```

我得到的只是这个标题`Headers = {Content-Length: 6292 Cache-Control: private Content-Type: text/html; charset=utf-8 Date: Sun, 22 Jul 2012 03:12:59 GMT Set-Cookie: ASP.NET_SessionId=dpub2i550ynjfonuv0o0n4nb; domain=website.co.nz; path=/; HttpOnly Server: Microsoft-IIS/6.0 X-AspNet-Vers...`

该代码不会引发异常。就像我不使用的一面一样`request.Method = "GET";`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:45:52.703

`.ToString()`这是在调试器中查看变量时调用的方法的结果。您需要访问`CookieContainer`.

# c# - Socket c# 发送和接收

> ID：11597553
> 
> 赞同：1
> 
> 时间：2012-07-22T03:20:47.070
> 
> 标签：c#, sockets

当服务器发送两条消息时，在没有多客户端的服务器/客户端程序中，例如：

```
byte[] data = Encoding.Default.GetBytes("hello world1");
socket.Send(data1, 0, data.Length, 0);

byte[] data = Encoding.Default.GetBytes("hello world2");
socket.Send(data1, 0, data.Length, 0); 
```

客户端在一条消息中收到了两条消息，例如：

> 你好世界1你好世界2

但我希望客户端接收**2**发送**2**接收

请帮助我如何解决它？？？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T03:41:32.773

使用像 '\n' 这样的行分隔符并拆分传入的消息。使用 TCP，您必须为数据包被拆分或连接的情况做好准备。

如果您使用 UDP，则可以发送单独的数据包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T03:44:20.370

这些是您的一些选择

1.  **您可以使用长度前缀消息**。例如，您总是在前 4 个字节中发送消息的长度。服务器将读取前四个字节并知道长度并知道有多少剩余字节是该消息的一部分。它会知道接下来的四个字节等等。
2.  **你可以有一个消息 demarker**。例如，如果您知道您的消息永远不会有特定的位模式，您可以将其作为消息标记器发送。例如，服务器可能总是扫描位模式 0,1,0,1,0,1 并知道消息已结束
3.  您可以使用更高级别的框架 WCF，基础设施会为您处理它

# java - 如何将 JVM 设置为具有更多 1GB 堆栈大小？

> ID：11597563
> 
> 赞同：1
> 
> 时间：2012-07-22T03:23:01.363
> 
> 标签：java, jvm, stack, stack-overflow

我的操作系统信息如下：

```
Linux 3.1.10-1.16-default #1 SMP Wed Jun 27 05:21:40 UTC 2012 (d016078) x86_64 x86_64 x86_64 GNU/Linux 
```

我的JDK信息是：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.3) (suse-6.2-x86_64)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

但是如果我使用超过 1GB 的堆栈，

```
 java -Xss2g -Xmx100g Test 
```

我懂了：

```
Error occurred during initialization of VM
java.lang.OutOfMemoryError: unable to create new native thread
    at java.lang.Thread.start0(Native Method)
    at java.lang.Thread.start(Thread.java:657)
    at java.lang.ref.Reference.<clinit>(Reference.java:162) 
```

那么，我怎么能使用超过 1GB 的堆栈呢？

使用“ulimit -a”我得到了这个：

```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 1291902
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 1291902
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

由此看来，堆栈大小限制似乎只有 8MB。但它成功了 1GB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:49:12.323

您不需要 2G 堆栈或 100G 堆，而且无论如何您的物理硬件都不太可能提供它们。你为什么要使用如此庞大的数字？

# jquery - 如果另一个元素不存在，是否有一种优雅的方法可以在 JQuery 中选择一个元素？

> ID：11597571
> 
> 赞同：5
> 
> 时间：2012-07-22T03:27:09.397
> 
> 标签：jquery, dom, jquery-selectors

假设我有以下要求：如果存在这样的元素，则将元素添加`e`到具有 id`"x"`的元素，否则添加`e`到正文。

在 DOM 级别 0 中，我可以编写：

```
var parent = document.getElementById("x") || document.body;
parent.appendChild(e); 
```

在 jQuery 中，以下内容*不起作用*：

```
var parent = $("#x") || $("body");
parent.append(e); 
```

因为如果不`x`存在具有 id 的元素，则第一个析取项返回空的 jquery 对象，其中是真实的，而不是虚假的，所以`append`什么都不做。但是，我*可以写：*

```
var parent = $("#x")[0] || $("body")[0];
parent.appendChild(e); 
```

但是这个解决方案有点笨拙，因为索引 jQuery 对象让我回到 HTMLElements，所以我必须使用`appendChild`而不是`append`. 虽然这可行，但我想知道这种级别的混合是否合适或表明设计不佳。

有没有办法使用`first()`？也许我可以创建一个 jQuery 对象，它本质上是一个数组，其第一个元素是 id 为 x 的 div，第二个元素是 body。我知道我可以使用带有元素数组的 jQuery 构造函数表单来做到这一点，但是我又回到了混合级别。我也知道如何检查 id x ( `$("#x").length`) 的元素是否存在，但我看不出这将如何导致一种优雅的方式来表达“如果存在 id x 的元素，否则为主体”。

这样的公式存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T03:29:04.623

老实说，我真的不认为这是非常冗长的：

```
var parent = $('#x');
if(parent.length == 0) parent = $('body'); 
```

而且其意图也相当明确。如果这个习语经常出现，你甚至可以将它包装在一个函数中。

此外，这是一个三元形式，每个查询只触发一次（尽管它是在可读性上的权衡）：

```
var parent = (x = $('#header')).length ? x : $('body'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T03:32:58.023

您可以使用它来包装原生 DOM 调用，而不是使用 jQuery 来选择元素：

```
$(document.getElementById("foo") || document.body) 
```

它不是很优雅（甚至不是真正使用 jQuery），也不是一种普遍适用的技术，但您最终会得到一些可以附加的东西（并且只需要一次相对便宜的 jQuery 调用）。

您将无法使用`first()`——例如`$("#foo, body").first();`——因为它返回选定元素的顺序是基于 DOM 顺序，而不是选择器顺序（感谢 @muistooshort）

# mp3 - 连接 MP3 文件

> ID：11597573
> 
> 赞同：0
> 
> 时间：2012-07-22T03:28:20.010
> 
> 标签：mp3

鉴于 MP3 帧（大部分）是独立的单元，我认为将几个无标记的 MP3 文件简单地连接在一起以便无损地合并它们会很好。

但是，看起来，许多播放器程序（包括`mplayer`and `mpd`）似乎在以某种我找不到文档的方式检测文件长度，并且只能查看和播放与我连接的第一个文件相对应的部分。

不管这些信息是什么，我确信编写一个程序来删除然后重建它不会太难，但我不知道它是什么。有人知道吗？

只是为了确保：是的，我删除了所有文件的 ID3 标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:04:36.183

啊。我找到了该[`mp3val`](http://mp3val.sf.net/)程序，我尝试在连接后的结果文件上运行该程序，它告诉我该文件包含一个“Xing 标头”，虽然伪装成一个空数据块，但显然包含有关帧数和长度的冗余信息的文件。

它似乎是为 VBR 文件制作的，但这些 CBR 文件仍然包含它。无论哪种方式，谷歌确实指向了很多关于 Xing 标头的信息，这似乎是我需要的。

# java - Boxlayout 无法共享 AWTError ...重新更正我之前有 Nullpointerexception 的任务出现此错误..请帮帮我

> ID：11597576
> 
> 赞同：-2
> 
> 时间：2012-07-22T03:28:56.763
> 
> 标签：java, swing, boxlayout

> **可能重复：**
> [请帮我解决这个 java.awt.BoxLayout can't be shared 或 NullPointerException](https://stackoverflow.com/questions/11597427/please-help-me-to-sort-out-this-java-awt-boxlayout-cant-be-shared-or-nullpointe)

```
Exception in thread "main" java.awt.AWTError: BoxLayout can't be shared
at javax.swing.BoxLayout.checkContainer(BoxLayout.java:445)
at javax.swing.BoxLayout.invalidLayout(BoxLayout.java:229)
at javax.swing.BoxLayout.addLayoutComponent(BoxLayout.java:262)
at javax.awt.Container.addImpl(JFrame.java: 1068)
at java.awt.Container.add(Container.java: 935)
at javax.swing.JFrame.addImpl(JFrame.java: 545)
at java.awt.Container.add(Container.java: 352)
at BoxExample.launchFrame(BoxExample.java:26)
at BoxExample.main(BoxExample.java:40) 
```

编辑我自己之前发布的帖子后的代码名为：“请帮我整理一下这个java.awt.BoxLayout不能共享或NullPointerException”

如果您也是这篇文章的新手，请查看代码并为我解决：

```
//Boxlayout

import java.awt.*;
import javax.swing.*;
public class BoxExample
{
public JFrame f;
public JButton b1, b2,b3,b4,b5;

public BoxExample()
{
f=new JFrame("Box example");
f.setTitle("Box Layout Example");
f.setSize(150, 150);
b1=new JButton("Button 1");
b2=new JButton("Button 2");
b3=new JButton("Button 3");
b4=new JButton("Button 4");
b5=new JButton("Button 5");
}

public void launchFrame()
{
System.out.println("inside lf");
f.setLayout(new BoxLayout(f,BoxLayout.Y_AXIS));
System.out.println("after layset");
f.add(b1);
f.add(b2);
f.add(b3);
f.add(b4);
f.add(b5);
f.pack();
f.setVisible(true);
}

public static void main(String args[])
{
BoxExample guiWindow=new BoxExample();
System.out.println("main");
guiWindow.launchFrame();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T03:54:07.093

`BoxLayout`无法共享，存在冲突，因为按钮已添加到框架的内容窗格中，但布局以框架为目标进行了初始化。要修复，请替换此：

```
f.setLayout(new BoxLayout(f,BoxLayout.Y_AXIS)); 
```

和：

```
f.setLayout(new BoxLayout(f.getContentPane(),BoxLayout.Y_AXIS)); 
```

# facebook - 如何 使用 Apache Tiles 向 html 元素动态添加 HTML 标签

> ID：11597580
> 
> 赞同：0
> 
> 时间：2012-07-22T03:29:18.867
> 
> 标签：facebook, spring-mvc

我正在一个显示产品列表的网站上工作，每个产品都显示一个类似 facebook 的按钮。在测试过程中，我注意到每次点击点赞按钮时，我的 facebook 墙都没有显示任何关于我的网站或产品图像的信息，所以我认为这与 facebook 的[Open Graph 元标记](https://developers.facebook.com/docs/reference/plugins/like/)有关。

由于我使用 Spring MVC 和 Apache Tiles 为产品动态创建网页，**如何动态插入这些元标记**？

```
<meta property="og:title" content="book for sale" />
<meta property="og:type" content="product" />
<meta property="og:url" content="http://www.mysite.com/product/1111" />
<meta property="og:image" content="http://www.mysite.com/pics/230980048.jpg" />
<meta property="og:site_name" content="mysite.com" />
<meta property="fb:admins" content="31536131" /> 
```

这是需要在图块模板 ( `tiles-definitions`) 上完成的事情吗？

一开始我在想，我需要使用`HttpServletResponse`参数将它们写在弹簧控制器上。

然后我以为有一个jsp标签可以插入meta标签，有点像`<jsp:meta>`

如您所见，我迷路了，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T05:30:33.237

我最终在我的模板上使用了带有[表达式语言](http://tiles.apache.org/2.1/framework/tutorial/advanced/el-support.html)的 tiles 属性，我有：

```
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=8" />        
        <tiles:insertAttribute name="meta" ignore="true" />
</head> 
```

然后，在我的瓷砖定义文件中，我有

```
<tiles-definitions>
    <definition extends="default" name="myView">
        <put-attribute name="body" value="/WEB-INF/views/myView.jspx" />
        <put-attribute name="meta" expression="${metaTags}"/>
    </definition>
</tiles-definitions> 
```

最后，在我的 spring web 控制器上，我有：

```
uiModel.addAttribute("metaTags", createMetaTags(item) ); 
```

Where`createMetaTags`动态构建元标记的字符串。

**确保**您的 classpat n 中有 tiles-el.jar 以使其正常工作。

# javascript - 为什么 Javascript 中的跨框架或 -window 数组如此难以识别？

> ID：11597583
> 
> 赞同：4
> 
> 时间：2012-07-22T03:31:27.760
> 
> 标签：javascript

Crockford 在*Javascript 中提出了一个解决方案：The Good Parts*用于识别对象是否是一个数组，如下所示：

```
var isArray = function (obj) {
   return obj && typeof obj === "object" && obj.constructor === Array;
} 
```

但他接着说

> ...它无法识别在不同窗口或框架中构造的数组...

为什么这个解决方案在这种情况下不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T03:33:12.857

符号“数组”是每个窗口本地的东西。检查以查看在不同窗口中构造的对象是否具有特定的本机构造函数因此不起作用。

即：在窗口#1 中，有一个“Array”构造函数。窗口#2 中也有一个。当然，它们是相同的，但它们是不同的，因为它们是不同的对象。进行比较时，它会以任何对象比较的方式进行：两个值要么是对完全相同的对象的引用，要么不是。

JavaScript 以这种方式工作有点奇怪，但这是语言的本质。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T03:43:02.233

jQuery 执行 a `toString.call(obj)`，如果结果为`"[object Array]"`，则其`isArray()`函数返回`true`。

在其他情况下，当 jQuery 可能只是在寻找类似数组的对象（包括 DOM 集合）时，它只是检查是否存在`.length`属性。这显然不是万无一失的，但它确实将它与普通对象或其他普通类型区分开来。

# dreamweaver - 在 Dreamweaver CS6 中重置代码着色

> ID：11597584
> 
> 赞同：8
> 
> 时间：2012-07-22T03:31:31.727
> 
> 标签：dreamweaver, color-scheme

我最近通过 Adob​​e Creative Cloud 安装了 DW CS6 - 并且似乎试图从 CS5 导入我的代码着色 - 但没有太大成功，这真的是一团糟。我希望我不必经历每种颜色设置并重新着色 - 我希望有一个简单的重置开关？

如果有人有深色代码颜色设置（对于 CS6），他们可以分享我也会很高兴。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T06:52:05.293

您必须将新的 Colors.xml 放入：

C:\Users[你的名字]\AppData\Roaming\Adobe\Dreamweaver CS6[你的语言]\Configuration\CodeColoring\

# magento - Magento 可配置产品定价

> ID：11597593
> 
> 赞同：0
> 
> 时间：2012-07-22T03:33:43.000
> 
> 标签：magento, e-commerce, magento-1.7

我需要一些帮助来了解如何在 Magento 中使用可配置产品属性。我在餐厅网站上使用 Magento，我需要能够以不同的价格制作不同尺寸的食品，但我想让它们使用相同的产品。例如，它会是这样的。

*   小比萨 8.95
*   中号披萨 9.95
*   大披萨 10.95

但是，我不想拥有三种完全不同的产品，我认为这会让消费者的事情变得非常复杂，我希望拥有一种产品，让用户可以选择什么尺寸并能够看到它的价格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:51:38.323

查看这些教程

[http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product)

视频教程

[https://www.youtube.com/watch?v=DK6LIBBxepk](https://www.youtube.com/watch?v=DK6LIBBxepk)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:16:42.847

它非常简单。只需创建一个可配置的产品，你就完成了！！！通过此链接：

[https://www.youtube.com/watch?v=DK6LIBBxepk](https://www.youtube.com/watch?v=DK6LIBBxepk)

# api - 我可以在 OpenSSL 中禁用 MAC 吗？

> ID：11597594
> 
> 赞同：0
> 
> 时间：2012-07-22T03:33:45.693
> 
> 标签：api, ssl, openssl

我正在对 SSL 加密连接进行一些性能分析，我想弄清楚不使用 MAC 可以节省多少时间（但是我仍然想要 AES-CBC）。有没有办法通过 API 只禁用 HMAC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:00:08.523

无论实施如何，您都不能在 SSL 或 TLS 期间禁用它。它是协议的必需部分。没有它，协议将不安全。

几年前我进行了一项性能研究，结果表明在 Internet 上，SSL 的速度只有纯文本的 3 倍。我对此感到惊喜。

如果您想要更快的 SSL，请投资硬件加密加速器。

# javascript - $(this.el).find() 在事件处理程序中工作，而不是在初始化函数（backbone.js）中

> ID：11597595
> 
> 赞同：2
> 
> 时间：2012-07-22T03:33:57.357
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我正在使用backbone.js 创建一个包含`Like`按钮的视图。这个 View 的模型中包含 属性`is_liked`，如果它的值为`1`，那么`setStateLike`调用的函数会改变`Like`按钮的样式。

**问题：**我无法选择功能中使用的`this.setStateLike()`按钮`initialize`。这样做只会返回一个`[]`. 但是，当我定义`this.setStateLike`为单击事件处理程序时，选择按钮有效！奇怪的是，`this.setStateLike()`被调用的 inside`initialize`是可以选择`$(this.el)`的，但不是`$(this.el).find()`！

知道这里发生了什么以及如何解决吗？谢谢！

```
PhotoListItemView = Backbone.View.extend({
    tagName: 'div',
    className: 'photo_box',

    events: {
        'click': 'setStateLike'
    },

    initialize: function() {
        this.setStateLike();
    },

    render: function() {
        $(this.el).html( this.template( this.model.toJSON() ) );
        return this;
    },

    setStateLike: function() {
        console.log( $(this.el).find('#like') );  // returns []
        if(this.model.get('is_liked')) {
            console.log( $(this.el) );        // returns correctly
            console.log( $(this.el).find('#like') );  // returns []
            // Change icon to Active state
            $(this.el).find('#like.photo_btn').addClass('photo_btn_active').attr('id', 'unlike');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T03:39:08.557

如果您的脚本出现在主体 HTML 的大部分之前，并且如果该`initialize`函数被立即调用，那就是您的问题：DOM 尚未真正构建，因此无法选择任何元素。要么在末尾运行脚本`</body>`，要么使用[jQuery 的 DOM-ready 处理程序](http://api.jquery.com/ready/)。

# python - 使用 SQLAlchemy 处理事务冲突

> ID：11597596
> 
> 赞同：4
> 
> 时间：2012-07-22T03:34:03.170
> 
> 标签：python, postgresql, concurrency, transactions, sqlalchemy

我对数据库比较陌生。我相信这是经验会回答的问题。

我将 SQLAlchemy 与 PostgreSQL 一起使用。我设置了一个系统，其中分布在多台计算机上的多个进程执行各种任务，然后更新数据库。我在测试中还没有遇到任何事务冲突，但理论上它们仍然是可能的。

根据我在 Google 上找到的信息，看来我要么必须获得数据库锁，要么准备重新启动事务。不幸的是，关于如何实际*执行*此操作的信息很少。

我假设，要重新启动事务，SQLAlchemy 会抛出一些异常，我的代码必须捕获这些异常，并自行执行重试。如果我违反了唯一性约束，表明我的代码中存在错误而不是事务冲突，那么该异常是否与 SQLA 抛出的异常不同？使用数据库锁会更好吗？

提前致谢！

- 编辑 -

我刚刚了解了“ConcurrentModificationError”。这个名字*听起来*确实像我正在寻找的例外。[文档](http://docs.sqlalchemy.org/en/rel_0_7/orm/exceptions.html#sqlalchemy.orm.exc.ConcurrentModificationError)说它是[StaleDataError](http://docs.sqlalchemy.org/en/rel_0_7/orm/exceptions.html#sqlalchemy.orm.exc.StaleDataError)的别名，它的名字听起来还是对的，但它的文档非常不透明。这是我正在寻找的错误吗？

再次，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:15:06.710

只需在 khoxsey 的回答中添加一些细节。

如果并发事务相互干扰，将事务隔离级别设置为“可序列化”将使 PostgreSQL 引发错误。当有许多并发数据库连接时，“可序列化”隔离级别会降低性能，但在我的情况下，性能不是问题的足够少。

当事务在此序列化级别上相互冲突时，Postgres 将其称为“序列化错误”，其[SQLSTATE 错误代码](http://www.postgresql.org/docs/9.1/static/errcodes-appendix.html)为“40001”。当前没有驱动程序可移植的方式来访问 SQLAlchemy 中的 SQLSTATE。但是，当使用 psycopg2 驱动程序时，可以通过*exc.orig.pgcode*访问 SQLSTATE 代码，其中*exc是由**except*语句捕获的异常。

据我所知，异常本身应该是 OperationalError。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:33:03.760

I have not ever seen that error, although the details for `StaleModificationError` suggest it might be the thing you are concerned about, but there should be no need to lock the entire database. You might read up on [transaction isolation in Postgres](http://www.postgresql.org/docs/9.1/static/transaction-iso.html) to prevent the different process workers from unknowingly reading a row being updated in another transaction.

If you set your isolation level higher (read-committed, etc) then your SA session will start collecting locks on the various rows it is touching. You decide for your design how stringent to set the isolation level. You can make it strict enough s your readers will throw an exception when they try to read a row another transaction has locked, and then you can choose to roll back or use the [refresh/expire interface](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html?highlight=refresh%20expire#refreshing-expiring) to update that particular session.

# algorithm - 改进盒子工厂解决方案

> ID：11597597
> 
> 赞同：1
> 
> 时间：2012-07-22T03:35:50.340
> 
> 标签：algorithm

[Box Factory](http://code.google.com/codejam/contest/1781488/dashboard#s=p2)是 Google Code Jam 2012 Round 1C 中的一个问题。它类似于最长公共子序列问题，他们给出了一个[O(n^4) 的解决方案](http://code.google.com/codejam/contest/1781488/dashboard#s=a&a=2)。但是，在分析结束时，它说*另一项改进可以再次将其减少到 O(n^3)*。我想知道可以对解决方案进行哪些优化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:08:27.263

## O(n^4) 算法

动态规划方法求解 f[x][y] = 使用前 x 个盒子运行和前 y 个玩具运行可以放置在盒子中的玩具的最大数量。

它通过考虑在 a+1 和 x 之间运行的最后一种类型的盒子和在 b+1 和 y 之间运行的最后一种类型的玩具来解决这个问题。

O(n^4) 算法循环遍历 a 和 b 的所有选择，但我们可以通过仅考虑 a 和 b 的临界值来简化。

## O(n^3) 算法

关键是，如果我们有 a,b 使得我们有比玩具更多的盒子，那么改变 a 来获得更多的盒子是没有意义的（因为这永远不会帮助我们制造更多的产品）。同样，如果我们有比盒子更多的玩具，那么我们可以跳过考虑 b 的所有情况，这会给我们更多的玩具。

这为内部循环提出了一个 O(n) 算法，在该算法中，我们追踪 a,b 在拥有更多玩具和拥有更多盒子之间的边界。这很简单，因为我们可以从 a=x-1 和 b=y-1 开始，然后根据我们当前是否有更多玩具或盒子来减少 a 或 b。（如果相等，那么你可以减少两者。）

算法的每一步都将 a 或 b 减 1，因此此迭代将需要 x+y 步，而不是原始方法的 x*y 步。

它需要对 x,y 的所有值重复，因此总体复杂度为 O(n^3)。

## 其他改进

进一步的改进是存储每种类型的前一次运行的索引，因为这将允许算法的几个步骤被折叠成一个单一的移动（因为我们知道我们的分数只有在我们回到运行时才能提高正确的类型）。但是，在最坏的情况下（所有相同类型的盒子/玩具），这仍然是 O(n^3)。

另一个实际的改进是合并在连续位置上类型相同的任何运行，因为这可以显着简化旨在揭示先前改进中最坏情况行为的测试用例。

# asp.net - 在 Server 2008 上部署 Office.Interop.Word Word 2010 并从 ASP.NET 调用方法

> ID：11597600
> 
> 赞同：2
> 
> 时间：2012-07-22T03:37:00.427
> 
> 标签：asp.net, ms-word, windows-server-2008, office-interop

我想在 Microsoft Windows Server 2008 上部署 Microsoft Word 2010 和 Microsoft.Office.Interop.Word。

用户（只有少数）访问了一个 .ASPX 页面。数据在此处输入或从 aspx 页面的数据库中选择。收集数据后，我想调用服务器上的 Word 应用程序实例，并以编程方式将数据插入 Word 文档中的范围。该文档保存在服务器上的文件夹中和/或下载到用户的本地计算机上。

我可以在 Win 2008 Server 上部署 Microsoft Word 和互操作程序集吗？如果没有，是否有其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:32:44.443

我遇到了同样的错误，在我花了 2 天的时间后，我找到了这个解决方案。

您需要为 Microsoft Office 2003 - 2007 对象分配权限。

请看一看。

**步骤1**

转到 Component Services > Computers > My Computer > 并在此之后选择 DCom Config，转到右窗格并找到“Microsoft Word 98 - 2003 Document”对象

![在此处输入图像描述](../Images/7aba9c7948b408ed88a10fc5f713b306.png)

**第2步**

右键单击组件并转到属性并选择“安全选项卡”

![在此处输入图像描述](../Images/0b8f24b59bbe87f67ba9083a4b6dcea8.png)

**第 3 步**

添加 NETWORK、NETWORKSERVICE、IIS_IUSRS 和管理员用户并为他们分配“本地”和“远程”访问权限 ![在此处输入图像描述](../Images/08111afbd7adeb7612ce19568bf9875b.png)

**第4步**

现在转到“身份选项卡”并选择“此用户”在用户和密码文本框中键入管理员凭据并按“应用”和“确定（必须保存更改）”

![在此处输入图像描述](../Images/827f139c5e88d518c34c588c5d05fde3.png)

**第 5 步**

现在重新启动您的机器。它会起作用的。

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:46:07.330

不要在服务器上使用 Office。使用开放 XML...

[看到这个链接](http://support.microsoft.com/kb/257757)：

> Microsoft 强烈建议开发人员在需要开发服务器端解决方案时寻找 Office 自动化的替代方案。由于 Office 设计的限制，对 Office 配置的更改不足以解决所有问题。Microsoft 强烈推荐一些不需要在服务器端安装 Office 的替代方案，并且它们可以比自动化更高效、更快速地执行大多数常见任务。在将 Office 作为服务器端组件加入项目之前，请考虑替代方案。
> 
> 大多数服务器端自动化任务涉及文档创建或编辑。Office 2007 支持新的 Open XML 文件格式，允许开发人员在服务器端创建、编辑、读取和转换文件内容。这些文件格式使用 Microsoft .NET 3.x 框架中的 System.IO.Package.IO 命名空间来编辑 Office 文件，而无需使用 Office 客户端应用程序本身。这是处理从服务对 Office 文件的更改的推荐和支持方法。
> 
> Open XML 文件格式是一个公共标准。要获取规范的副本，请访问以下网站：

[ECMA-376 开放 XML 标准](http://www.ecma-international.org/publications/standards/Ecma-376.htm)

# ruby-on-rails - 如何上传多页 PDF 并使用 Paperclip 将其转换为 JPEG？

> ID：11597609
> 
> 赞同：6
> 
> 时间：2012-07-22T03:39:24.657
> 
> 标签：ruby-on-rails, pdf, paperclip, jpeg, docsplit

有谁知道如何使用 Paperclip 上传多页 pdf 并将每一页转换为 Jpeg？

到目前为止，每次我上传 PDF 时，它只允许我将 PDF 的第一页视为 JPEG。但我希望能够上传 PDF 中的每一页并将其转换为 JPEG。

是否有任何 gem 或插件可以帮助我上传 10 pg PDF 并在数据库中转换/存储为 10 个 JPEG 文件？

我查看了[docsplit-images](https://github.com/jameshuynh/docsplit_images) gem，但我不确定这是否是最佳解决方案或它是如何工作的。

Post.rb

```
class Post < ActiveRecord::Base
  belongs_to :Blogs

  attr_accessible :content, :title, :pdf

  has_attached_file :pdf,
                    :url  => "/assets/products/:id/:style/:basename.:extension",
                    :path => ":rails_root/public/assets/products/:id/:style/:basename.:extension"

  validates_attachment_content_type :pdf,
      :content_type => [ 'application/pdf' ],
      :message => "only pdf files are allowed"
end 
```

_form.html.erb

```
<%= form_for ([@post]), :html => { :multipart => true } do |f| %>

    <%= f.file_field :pdf %>

<% end %> 
```

显示.html.erb

```
 <%= image_tag @post.pdf.url(:original) %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T12:56:35.813

为此使用图像标签是没有意义的。将您的 image_tag 更改为常规链接，您将能够下载和查看所有页面。

```
<p>
  <%= link_to 'My PDF', @post.pdf.url %>
</p> 
```

# java - 进入数据库前的Java缓存数据

> ID：11597614
> 
> 赞同：0
> 
> 时间：2012-07-22T03:40:14.277
> 
> 标签：java, database, spring, caching, redis

我们必须对现有的 Web 应用程序实施监控模块。该应用程序的目的是记录在运行时执行的每个方法所花费的时间并保存到 2 个监控表中。由于应用程序中发生了很多方法调用，我们无法每次执行方法时都保存到表中。我们使用spring aop截取时间。我们使用redis缓存数据，每十分钟取一次数据从缓存中保存并保存在数据库中。但是 redis 似乎是一个麻烦的想法，因为它不断建立新的连接，这给应用程序带来了一场噩梦。有没有其他方法可以做到这一点。我们考虑写入文件并从中获取数据该文件是周期性的。但这似乎也是一个消耗资源的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:19:22.577

I would suggest storing everything in your Java application. If all you want is a few stats, you can keep track of this information in a HashMap and write it every 10 minutes to the database from another thread. Min/Max/Avg time won't take much memory, and you can reset stats once it's written to the database.

If that doesn't suite your needs for some reason, Redis should be fast, and can even help you compute your statistics. I'd setup a connection pool to prevent it from making a new network connection each time. Then, I'd use asynchronous writes (pipelining) in your Redis client to speed up writes. Jedis and JRedis both support this.

# python - 个人资料图片消失了。这里的奥秘 - GAE（Python）

> ID：11597615
> 
> 赞同：0
> 
> 时间：2012-07-22T03:40:32.620
> 
> 标签：python, google-app-engine, web-applications

好的，首先我要声明这是通过 Python 实现的 Google App Engine。

任何人，

这些是发生问题的处理程序/路由。请阅读以下内容和细节：

```
class GetImage(MainHandler):
    def get(self):
        img = db.get(self.request.get("entity_id"))
        self.response.out.write(img.image)

class Profile(MainHandler):
    def get(self, profile_name):
        current_user = str(self.user.name)
        profile_name = current_user
        if self.user:
            key='ag5kZXZ-c3VpdGVnYW1lcnINCxIHSW1hZ2VkYhgxDA'
            imgs  = db.GqlQuery("select * from Imagedb WHERE name =:1", current_user)
            for img in imgs:
                key = img.key() # this is the key
            self.render('profile.html', profile_name = self.user.name, current_user = self.user.name, profile_image = key ,username = self.user.name, email = self.user.email, first_name = self.user.first_name, last_name = self.user.last_name, country = self.user.country, prov_state = self.user.prov_state, city_town = self.user.city_town)
        else:
            self.redirect('/register')

class Change_Profile_Image(MainHandler):
    def get(self):
        if self.user:
            self.render('change_profile_image.html', username = self.user.name, firstname=self.user.first_name, current_user = self.user.name)
        else:
            self.render('change_profile_image.html')

    def post(self):
        imagedb = Imagedb(name = self.user.name)
        imageupl = images.resize(self.request.get("img"), 200, 200)
        imagedb.image = db.Blob(imageupl)
        imagedb.put()
        self.redirect('/profile/'+self.user.name)

app = webapp2.WSGIApplication([('/', MainPage),
                               ('/register', Register),
                               ('/article', ArticlePage),
                               ('/profile/([^/]+)', Profile),
                               ('/login', Login),
                               ('/logout', Logout),
                               ('/welcome', Unit3Welcome),
                   ('/games', Games),
                   ('/forum', Forum),
                   ('/media', Media),
                   ('/rank', Rank),
                   ('/review', Reviews),
                   ('/events', Events),
                               ('/alreadyloggedin', AlreadyLoggedIn),
                   ('/change_profile_image', Change_Profile_Image),
                               ('/img', GetImage)],
                              debug=True) 
```

好吧，这就是事情变得循环的地方。如果我将 Profile 类更改为 --get(self) 并从配置文件类的路由中删除我的 reg 表达式，我的图像就可以完美地工作。一旦我路由到唯一的配置文件，即将 profile_name 传递到 Profile 处理程序并将 URL 映射到该配置文件，我就失去了 GetImage 处理程序的所有功能。当我查看源代码时，没有任何改变。图像仍照常传递到模板中。

有谁知道这里发生了什么？我真的很感激。非常感谢您提前。希望我的知识能赶上你们，我很快就会回答问题：p。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:07:38.463

如果没有看到模板的（简化）版本，很难回答您的问题。

您的代码中还有一些奇怪的元素使您很难判断发生了什么。很难将其格式化为评论，因此我将其作为答案，这样您至少可以看到它。

*   在您`get`的配置文件处理程序中的请求中，您尝试在检查当前用户是否存在*之前获取当前用户。*当您分配给时，您也只是完全丢弃了该`profile_name`元素，因此除了个人资料页面上的当前用户之外，您永远不会获得任何人的个人资料图像。`profile_name``current_user`

你在这里接受 profile_name ，但从不使用它：

```
 def get(self, profile_name):
        current_user = str(self.user.name)
        profile_name = current_user 
```

*   您循环`imgs`但每次都替换键，这意味着如果您返回超过 1 个图像，您无法判断这已经发生，并且您会覆盖查询中的最后一个图像以外的任何内容。您应该做的一件事是添加一个检查以查看是否`imgs`真实，这样您就可以判断您是否得到任何结果，这可能（尽管我无法想象如何）解释您的图像处理程序失败的原因。

最后，您可能会检查您的来源以查看模板中实际请求的图像 url。

# notepad++ - Notepad++ 按需自动完成 XML/HTML 标记

> ID：11597616
> 
> 赞同：3
> 
> 时间：2012-07-22T03:41:01.763
> 
> 标签：notepad++, autoformatting

Notepad++ 有一个插件，当您按下 时，它会自动完成最后打开的 HTML 或 XML 标记`Ctrl+.`。我用了一段时间这个插件，但我最近重新安装了 Notepad++，不记得这个插件叫什么了。任何人都可以命名使用此键盘快捷键按需自动完成 XML 和 HTML 标签的插件吗？我认为同一个插件也会自动缩进 XML 和 HTML，但我不确定它是同一个插件还是不同的插件。

例如，我会输入：

```
<div id="foo" class="bar"><p>Hello, world! 
```

然后我会点击`Ctrl+.`，它会自动更改为：

```
<div id="foo" class="bar"><p>Hello, world!</p> 
```

我会再打`Ctrl+.`一次，它会变成这样：

```
<div id="foo" class="bar"><p>Hello, world!</p></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T04:13:38.547

我认为您正在寻找[TextFX 插件](http://sourceforge.net/projects/npp-plugins/files/TextFX/)- 它会在您键入时自动关闭 HTML/XML 标记。

转到 TextFX > TextFX 设置并选中“自动关闭 HTML/XML 标记”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T14:43:53.720

您可以使用默认的 NPP 自动完成。在 NPP 打开 Settings->Preferences->Auto-Completion 并选中“html/xml close tag”复选框。现在所有有结束标签的开始标签都会自动关闭，你不需要记住是否关闭标签。

# php - 为什么我不能使用“必需”函数编写我的 MySQL 数据库？

> ID：11597624
> 
> 赞同：0
> 
> 时间：2012-07-22T03:43:14.027
> 
> 标签：php, mysql, function, connect, require

我正在使用一个名为“lib.php”的文件，我在其中定义了许多函数。这些功能之一如下：

```
function dbconn()
{
$servername="127.0.0.1";
$username="root";
$conn=mysql_connect($servername,$username)or die(mysql_error());
mysql_select_db("profit",$conn) or die(mysql_error());
} 
```

在我网站的所有 .php 页面中，我一直在使用这个`dbconn()`功能，它似乎可以很好地从数据库中读取信息。但是，在尝试写入信息时，似乎会出现问题。具体来说，以下代码不起作用：

```
<?php
require ("lib.php");
set_time_limit(60);
session_start();
dbconn();
$sql="update `city` set end_dt=now() where city_id='$_POST[killcity]'";
$result=mysql_query($sql,$conn) or die(mysql_error());
header("Location: manipulate.php");
?> 
```

它说这`conn`是一个未定义的变量，而它应该`dbconn()`在 lib.php 中定义。

所以，我找到了解决这个问题的方法，而是创建一个名为 dbconn.php 的新 php 文件，其中包含与 完全相同的内容`dbconn()`，并插入`require ("dbconn.php");`而不是`dbconn();`.

但我仍然想知道：为什么原来的方式不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T03:52:53.087

您可以通过在函数中使用全局变量来为函数添加返回语句，这不是一个好习惯。如果您愿意，请查看[全局变量的工作原理](http://php.net/manual/en/language.variables.scope.php)。

```
function dbconn() {
    $servername="127.0.0.1";
    $username="root";
    $conn=mysql_connect($servername,$username)or die(mysql_error());
    mysql_select_db("profit",$conn) or die(mysql_error());
    return $conn;
}

$conn = dbconn(); 
```

# r - 从 VBA 运行 R 脚本

> ID：11597626
> 
> 赞同：13
> 
> 时间：2012-07-22T03:43:36.737
> 
> 标签：r, vba

如何从 VBA 运行 R 脚本？假设我有一个存储为 C:\XXX\testR.R 的 R 脚本

我尝试使用 Shell，但不太成功。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-22T07:55:23.113

```
Public Sub RunRTest()
  Shell ("Rscript test.r")
End Sub 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-26T12:15:08.220

请注意您的文件位置，可能需要更明确的 Shell dim 语句....例如，在您的 VB 中替换为这些行

```
Dim shell As Object   
Set shell = VBA.CreateObject("WScript.Shell")   
Dim waitTillComplete As Boolean: waitTillComplete = True   
Dim style As Integer: style = 1   
Dim errorCode As Integer   
Dim  path As String

path = """" & Cells.Range("RhomeDir") & """ """ & Cells.Range("MyRscript") & """"

errorCode = shell.Run(path, style, waitTillComplete) 
```

其中，在 Excel 中，具有命名引用的单元格`RhomeDir`包含文本

`C:\Program Files\R\R-3.2.3\bin\x64\rscript`和

`MyRscript`包含文本`C:/Documents/Rworkings/Rscripttest.s`

注意 unix R 反斜杠和 .s 或 .r 后缀和 VB 用 " 替换 "" 以在路径表达式中给出双括号（加上更远的括号以表示字符串）。在文件名中包含空格也不是一个好主意。

通过搜索 VBA shell 可以找到上面 shell 命令的完整暗淡语法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-21T21:59:55.783

我把所有东西都放在一个可以轻松调用的函数中。输出是 shell.run 输出，它是一个整数：

**运行 R 脚本的函数：**

```
Function Run_R_Script(sRApplicationPath As String, _
                        sRFilePath As String, _
                        Optional iStyle As Integer = 1, _
                        Optional bWaitTillComplete As Boolean = True) As Integer

    Dim sPath As String
    Dim shell As Object

    'Define shell object
    Set shell = VBA.CreateObject("WScript.Shell")

    'Wrap the R path with double quotations
    sPath = """" & sRApplicationPath & """"
    sPath = sPath & " "
    sPath = sPath & sRFilePath

    Run_R_Script = shell.Run(sPath, iStyle, bWaitTillComplete)
End Function 
```

**如何调用示例：**

```
Sub Demo()
    Dim iEerrorCode As Integer
    iEerrorCode = Run_R_Script("C:\Program Files\R\R-3.4.4\bin\x64\rscript","C:\Ibos\R\WF_Metrics\Abe.R")
End Sub 
```

或者

```
Sub Demo()
    Dim iEerrorCode As Integer
    Dim WS as WorkSheet

    Set WS=ThisWorkBook.Worksheets("Sheet1")
    iEerrorCode = Run_R_Script(WS.Range("A1"),WS.Range("A2")) 'cell A1=adderess of R application and cell A2 is the address of your R file, one can use a named range too
End Sub 
```

# video-streaming - 下载 swf flash 视频不起作用

> ID：11597627
> 
> 赞同：0
> 
> 时间：2012-07-22T03:43:45.293
> 
> 标签：video-streaming, flash, flash-video

有谁知道如何从以下站点下载实际的 Flash 视频：http: [//www.cbc.ca/player/News/Business/ID/2258963934/](http://www.cbc.ca/player/News/Business/ID/2258963934/)

我搜索了源代码，似乎视频位于 [http://www.cbc.ca/video/swf/UberPlayer.swf?clipId=2258963934&autoPlay=true](http://www.cbc.ca/video/swf/UberPlayer.swf?clipId=2258963934&autoPlay=true)

但是，当我手动将其放入浏览器时，视频似乎没有加载..有谁知道为什么或如何下载它？？？

谢谢！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:52:23.373

我推荐使用[VSO Downloader](http://www.vso-software.fr/products/downloader/vso-downloader.php?s=l)，它适用于许多网站，我认为它可以处理 CBC。

# php - php mysql中的id分组错误？

> ID：11597628
> 
> 赞同：0
> 
> 时间：2012-07-22T03:44:08.710
> 
> 标签：php, mysql, sql

我有一个示例数据库：

```
brand(id, name)
     (1, 'Apple')
     (2, 'Dell') 
model(id, name, brand_id)
     (1, 'Macbook', 1)
     (2, 'Iphone', 1)
     (3, 'Vostro', 2) 
```

和 php mysql 代码：

```
<?php
// Make a MySQL Connection
$query = "SELECT * FROM model";  
$result = mysql_query($query) or die(mysql_error());
$row = mysql_fetch_array($result) or die(mysql_error());
$brand_id = array();
$brand_id = array_unique($row['brand_id']);
?>    
<table>
    <?php for($i=0; $i<count(brand_id); $i++) {?>
    <tr>
        <td><?php echo $row['name'] ?></td>
    <tr/>
    <?php }?>
</table> 
```

结果返回 2 tr of 2 brand_id，但结果显示所有型号名称

```
<table>
   <tr><td>Macbook, Iphone, Vostro</td></tr>
   <tr><td>Macbook, Iphone, Vostro</td></tr>        
</table> 
```

如何修复它的结果是：

```
<table>
   <tr><td>Macbook, Iphone</td></tr>
   <tr><td>Vostro</td></tr>        
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T04:13:50.963

为此，您需要使用聚合函数 ，`GROUP_CONCAT`：

```
SELECT  GROUP_CONCAT(b.`name`)
FROM    brand a 
            INNER JOIN model b
                on a.id = b.brand_id
GROUP BY a.`Name` 
```

**[在这里查看演示@SQLFIDDLE](http://sqlfiddle.com/#!2/781be/2)**

# c++ - 从字符串、字符和双精度的文件中仅读取双精度

> ID：11597630
> 
> 赞同：1
> 
> 时间：2012-07-22T03:44:40.583
> 
> 标签：c++, text-files

这是我拥有的文件的示例（这是一行）：

```
B12                          MN =                              1.2                         G_{I}=                          3.4                               G_{B}  =                           9.4                        J_k =                               4.4                  1.4                      0.4                   -0.1                       -0.1               3.3                 9.3                      -5.7                 2 
```

现在，我的麻烦是我需要能够读取这个文件并将我感兴趣的数字放入另一个文件中。

所以，我尝试了这个：

```
ifstream in("Data.dat")
ofstream out
output.open("Output.dat")

double a1, ..., a12; 

while(1) {
           if(!(in >> a1 >> ... >> a12))
           break;

           output << a1 << a2 << a12; //say these are the three doubles I'm interested in.

} 
```

然而，这失败了。我在输出文件中没有得到任何东西。我真的不知道如何解决这个问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:03:56.567

你应该使用'string'而不是'double'，测试代码如下：

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main(int argc, char* argv[])
{
    ifstream in("t1.txt");
    string a1,a2,a3,a4,a5,a6,a7,a8,a9;
    ofstream out("t2.txt");

    while(1)
    {
        if((in>>a1>>a2>>a3>>a4>>a5>>a6>>a7>>a8>>a9))
        {
            out<<a1<<a3<<a5<<endl;
        }
        else
            break;
    }

    return 0;
} 
```

# jquery - 使用 BBQ 插件进行深度链接

> ID：11597631
> 
> 赞同：0
> 
> 时间：2012-07-22T03:44:50.317
> 
> 标签：jquery, deep-linking, jquery-bbq

我不确定我在这里做错了什么。当我打开它的 HTML 代码时，它就崩溃了。有谁知道我的语法是否错误，或者我根本不了解 BBQ 插件的工作原理？非常感谢！

```
$.bbq.pushState({ 
    lat: pointArray[0][0].lat(), 
    lng: pointArray[0][0].lng()
});

$(window).bind('hashchange', function(e) {
    var searchParams= e.getState();
    pointArray[0][0] = new google.maps.LatLng(searchParams.lat, searchParams.lng);    
    mapSearch(); 
}); 

$(window).trigger('hashchange'); 
```

在 Chrome 中，它说我正在调用`pushState`. `undefined`我应该先在外面申报吗`lat`？`lng`

# objective-c - 空浮点 ** 用于声音样本

> ID：11597632
> 
> 赞同：0
> 
> 时间：2012-07-22T03:45:18.147
> 
> 标签：objective-c, pointers, core-audio, nslog

我一直在尝试将数组传递给 DiracLE 音频库中的方法。

数组在调试器中看起来像这样

![在此处输入图像描述](../Images/551c0adb468dcde735f17cbee3014a4a.png)

```
- (OSStatus) readFloatsConsecutive:(SInt64)numFrames intoArray:(float**)audio withOffset:(long)offset 
```

像这样填满数组

```
if (audio) {
    for (long c = 0; c < mExtAFNumChannels; c++) {
        if (!audio[c]) continue;  // this executes for both channels 
                                  // but doesnt proceed into next for loop
        for (long v = 0; v < numFrames; v++) {
            if (v < loadedPackets) audio[c][v+offset] = (float)data[v*mExtAFNumChannels+c] / 32768.f;
            else audio[c][v+offset] = 0.f;
        }
    }
} 
```

我这样称呼它

```
[reader readFloatsConsecutive:frameCount intoArray:arrayToFill]; 
```

arrayToFill 是当前函数范围的参数

> [self readAudioDataForFile:temp withArray:tempArray];

数组最初是这样传递给函数的

```
 // this array was passed into the function as tempArray  which is float **tempArray = NULL;
 arrayToFill  = (float **) malloc ( (frameCount * channelCount) * sizeof( float )); 
```

因为我需要在我的方法中从文件中提取音频数据，所以我必须在那里 malloc 数组并将其传递给 dirac 函数进行填充。我像这样 malloc `arrayToFill = (float **) malloc ( (frameCount * channelCount) * sizeof( float ));`，然后将它传递给前面提到的 dirac 函数。

该数组可以是二维或一维数组，具体取决于通道数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:05:24.303

在我看来，这个问题取决于分配。

分配一维数组如下所示：

```
arrayToFill = (float *) malloc ( (frameCount * channelCount) * sizeof( float )); 
```

这样就够了。

但是，分配二维数组会有所不同，因为您必须分配甚至内部数组。如果我理解正确，如果您有两个通道，那么数组是二维的，您应该执行以下操作：

```
arrayToFill = (float **)calloc(channelCount, sizeof(float*));
for (int i = 0; i < channelCount; ++i)
  arrayToFill[i] = (float*)calloc(frameCount, sizeof(float)); 
```

这是因为您需要分配一个指向浮点指针的指针。因此，在第一步中，您分配一个二维指针数组到浮点数，这些指针被初始化，`NULL`因此您必须循环遍历它并分别分配它们。

如果通道在数组内部（例如，第一个索引选择框架而不是通道），那么您应该交换维度。

# delphi - 用 TFileStream delphi 读取行

> ID：11597634
> 
> 赞同：3
> 
> 时间：2012-07-22T03:45:57.393
> 
> 标签：delphi, tfilestream

如何使用某些行 TFileStream 读取文件。我读了有数百万个文件的行。所以我想在我只会使用的记忆中玩耍

例子：

```
Line 1: 00 00 00 00 00 00 00 00
Line 2: 00 00 00 00 00 00 00 00
Line 3: 00 00 00 00 00 00 00 00
Line 4: 00 00 00 00 00 00 00 00
Line 5: 00 00 00 00 00 00 00 00 
```

我读了第 2 到 4 行

我使用了一个函数TextFile，但它似乎很慢。刚刚找到了一个读取 TFileStream 中最后一行的函数。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T07:14:33.413

您可以使用 TFileStream 类打开文件以进行读取，如下所示...

```
FileStream := TFileStream.Create( 'MyBigTextFile.txt', fmOpenRead) 
```

TFileStream 不是一个引用计数的对象，所以一定要在完成后释放它，就像这样......

```
FileStream.Free 
```

从现在开始，我将假设您的文件的字符编码是 UTF-8 并且行尾终止是 MS 样式。如果没有，请相应调整，或​​更新您的问题。

您可以像这样读取 UTF-8 字符的单个代码单元（与读取单个字符不同）：

```
var ch: ansichar;
FileStream.ReadBuffer( ch, 1); 
```

你可以像这样阅读一行文字......

```
function ReadLine( var Stream: TStream; var Line: string): boolean;
var
  RawLine: UTF8String;
  ch: AnsiChar;
begin
result := False;
ch := #0;
while (Stream.Read( ch, 1) = 1) and (ch <> #13) do
  begin
  result := True;
  RawLine := RawLine + ch
  end;
Line := RawLine;
if ch = #13 then
  begin
  result := True;
  if (Stream.Read( ch, 1) = 1) and (ch <> #10) then
    Stream.Seek(-1, soCurrent) // unread it if not LF character.
  end
end; 
```

要读取第 2、3 和 4 行，假设位置在 0 ...

```
ReadLine( Stream, Line1);
ReadLine( Stream, Line2);
ReadLine( Stream, Line3);
ReadLine( Stream, Line4); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T08:51:42.227

您可以使用传统的文件操作。要真正快速，您必须确保每行中的字节数相同。

Blockread、BlockWrite、Seek 是您可能会查看的关键字。

[BlockRead 的示例页面](http://www.freepascal.org/docs-html/rtl/system/blockread.html)

[Seek 的示例页面](http://www.freepascal.org/docs-html/rtl/system/seek.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-13T01:33:23.783

正如大卫解释的那样，由于 TFileStream.Read 的代码 Sean 建议很慢。但是如果你使用 TMemoryStream 而不是 TFileStream，那么慢的 Stream.Read 就不是那么重要了。在这种情况下，字符串操作会占用大部分时间。

如果您稍微更改代码，速度会提高 2 倍：

```
function ReadLine(Stream: TStream; var Line: string): boolean;
var
  ch: AnsiChar;
  StartPos, LineLen: integer;
begin
  result := False;
  StartPos := Stream.Position;
  ch := #0;
  while (Stream.Read( ch, 1) = 1) and (ch <> #13) do;
  LineLen := Stream.Position - StartPos;
  Stream.Position := StartPos;
  SetString(Line, NIL, LineLen);
  Stream.ReadBuffer(Line[1], LineLen);
  if ch = #13 then
    begin
    result := True;
    if (Stream.Read( ch, 1) = 1) and (ch <> #10) then
      Stream.Seek(-1, soCurrent) // unread it if not LF character.
    end
end; 
```

# jquery - 我想将一个变量作为参数传递给 .hasClass()：

> ID：11597636
> 
> 赞同：-3
> 
> 时间：2012-07-22T03:46:50.703
> 
> 标签：jquery

我想将变量作为参数传递给`.hasClass()`：

```
data = is specialclass
if($(".concon").hasClass(data))
{
    //do some thing
} 
```

但是，这似乎不起作用。如何通过这种方法使用存储在变量中的类名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:54:50.563

当你使用

`var data = 1 ;`

你正在传递一个数字，但你想传递一个字符串

`var data = "1" ;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:03:14.150

```
// Include jquery here

var the_class_name = "specialclass"; 

if($(".concon").hasClass(the_class_name))
    {
        //do something
    } 
```

# facebook-graph-api - 其他人在使用 Facebook Graph API 公共搜索时会得到空的搜索结果吗？

> ID：11597638
> 
> 赞同：1
> 
> 时间：2012-07-22T03:47:34.217
> 
> 标签：facebook-graph-api

当您单击 Facebook Graph Api 文档页面上的示例用户搜索 url 时，有人可以给我一个味道，让我知道您是否也返回一个空的 json 数组。

这是页面[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

它在搜索部分。人链接。

这是我单击的链接，所有其他搜索链接都返回除用户搜索之外的数据。

![脸书截图](../Images/4eb4b1ced0af18380942e7cd504fbe37.png)

这就是我回来的

![脸书结果](../Images/bdd1523eb7b34d35f98fff9156cd2d0e.png)

我的问题是其他人也有这个问题，还是只有我一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:56:17.913

我怀疑这与 Facebook 在选择您的结果后按隐私过滤的方式有关。含义图要求 (X) 个结果，Facebook 找到 (X) 个与您的搜索匹配的结果，然后删除那些在隐私选项中包含它的人，而不是我被搜索，然后过滤后返回剩下的内容。这在 Facebook 的开发博客上进行了解释：[https ://developers.facebook.com/blog/post/478/](https://developers.facebook.com/blog/post/478/)

有关更清晰的详细信息，请参阅以下答案：[https ://stackoverflow.com/a/11848002/624590](https://stackoverflow.com/a/11848002/624590)

也就是说，它可能是别的东西——我注意到最近几周情况变得特别糟糕；返回的结果似乎越来越少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T01:19:14.943

在过去的几天里，我们收到了 type=post 1-2 小时的空结果。我确定这与他们的某些事情有关，请在此处查看我的错误帖子[http://developers.facebook.com/bugs/456910301017301?browse=search_509b0461dc68c0151458645](http://developers.facebook.com/bugs/456910301017301?browse=search_509b0461dc68c0151458645)

# ios - 我可以在我的视图中添加一个计时器以切换到下一个视图吗？

> ID：11597639
> 
> 赞同：5
> 
> 时间：2012-07-22T03:47:50.353
> 
> 标签：ios, cocoa-touch, uistoryboard

我有一个视图，用户在这个视图中，没有办法走开。有一个广告，然后过一段时间出现“开始”按钮，或者更好的是，它会自动进入下一个视图！我正在使用故事板。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T04:45:30.737

您必须在代码中执行此操作。它很简单：

```
- (void)goToNextView {
    [self performSegueWithIdentifier:@"segueToNextView" sender:self];
}

- (void)viewDidLoad {
    [self performSelector:@selector(goToNextView) withObject:nil afterDelay:5];
} 
```

现在`segueToNextView`将在视图控制器加载后 5 秒发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T04:05:49.793

当然，添加计时器，然后在计时器处理程序中，调用`performSegueWithIdentifier:sender:`. 您必须在代码中执行此操作；您将在情节提要中设置 segue 的名称，然后将其用作调用的标识符参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-22T20:49:05.847

斯威夫特 4

```
DispatchQueue.main.asyncAfter(deadline: .now() + .seconds(2)) {
  self.performSegue(withIdentifier: "segueName", sender: self)
} 
```

# php - 提交表单后更正 HTTP 1.1 标头响应代码

> ID：11597642
> 
> 赞同：4
> 
> 时间：2012-07-22T03:49:44.983
> 
> 标签：php, header, http-1.1

在我的 MVC 框架中，我有时会在提交表单后重定向。假设您将表单发布到 /example/input。

我想在 PHP 中添加正确的标头代码和解释性文本，例如`header('HTTP/1.1 404 Not Found');`

1）您的输入包含错误。您停留在 /example/input 页面并再次获取表单，标记有错误等。HTTP 1.1。代码和文本是否适合发送重定向指令？

2) 你的输入没问题，元素被保存，你被重定向`Header('Location: ...')`到/example/success。哪个 HTTP 1.1。代码和文本在这里合适吗？

3) PHP 代码由于配置错误、缺少包含文件、损坏的数据库连接或其他原因有时会引发错误。哪个 HTTP 1.1。代码和文本在这里合适吗？

我在这里查看了代码：http: [//www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html) 200 号出现在 1) 中，而 301/302 号出现在 2) 中，500 号出现在3）。但在所有三种情况下，我发现上面链接代码后面的标题/解释并不完全符合我上面描述的场景。我应该选择其他代码/文本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T04:34:09.010

案例 1 和 2 描述了相同情况的变体：您通过 POST 提交表单，服务器处理它并将客户端重定向到成功页面或返回表单。对于这两种情况，“303 See Other”都是正确的响应。这是在服务器正确处理 POST 请求后使用 GET 方法将客户端重定向到资源的正确方法。根据规范：

> 此方法的存在主要是为了允许 POST 激活脚本的输出将用户代理重定向到选定的资源。

对于案例 3，500 代码通常适用于最严重的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T04:07:22.183

据我了解，如果您的 PHP 成功执行，则 200 代码是正确的。所以这应该照顾1和2。

对于 3，如果发生致命错误，PHP 已经发送 500 代码。

再解释一下 2，300s 用于当资源不再位于请求的 URL 时。因此，您会将它们重定向到新的或正确的位置。在您的情况下，资源就在那里，因此您不需要 300 代码。

# javascript - 电话间隙。空值被插入到数据库表中。数据类型冲突？

> ID：11597643
> 
> 赞同：0
> 
> 时间：2012-07-22T03:49:45.363
> 
> 标签：javascript, cordova

我对以下代码有疑问。

我有一个表单，用户可以从现有位置和游戏的下拉列表中进行选择，或者如果它不存在，他们可以选择“添加新游戏/位置”并在文本字段中输入游戏名称和/或位置. 当他们这样做时，我想将新游戏和/或位置写入数据库，并获取新创建的 ID，以便我可以正确更新会话表（记录游戏会话的位置）。

新位置和游戏正在正确编写，但是，当我添加一个新位置时，我最终会在会话表的游戏和位置字段中得到一个空值。

插入新游戏和位置时注释掉的警报返回正确的值。

```
function addSession(tx){
  var locationID = $('#location').val();
  var gameID = $('#game').val();
  if ($('#location').val() == '0'){
    tx.executeSql(
      'INSERT INTO locations (lTitle) VALUES (?)',
      [$('#newLocation').val()],
      function(tx, results){
        locationID = results.insertId;
      },
      errorCB
    );
  }
  if ($('#game').val() == '0'){
    tx.executeSql(
      'INSERT INTO games (lTitle) VALUES (?)',
      [$('#newGame').val()],
      function(tx, results){
        gameID = results.insertId;
      },
      errorCB
    );
  }
  var sSQL = 'INSERT INTO sessions (date, duration, location, game, notes) VALUES '
    + '("'+$('#date').val()+' '+$('#time').val()+':00.000"'
    +',2.5,'+locationID+','+gameID+',"'+$('#notes').val()+'")';
  tx.executeSql(
    sSQL,
    [],
    function(tx,results){
      //todo after successful entry
    },
    errorCB
  );
} 
```

我最初认为这可能是因为对会话表的插入是在插入游戏和位置表之前执行的，但如果是这种情况，我会在游戏和位置字段中输入“0”而不是 null。

当我使用游戏或位置菜单中的现有项目（ID 将 >0）添加新会话时，插入工作正常。

这是会话表的设置，以防它可能与数据类型冲突有关。我在返回的 ID 上尝试了 parseInt，但结果相同

```
tx.executeSql(
  'CREATE TABLE IF NOT EXISTS sessions ' +
  '(id INTEGER PRIMARY KEY , ' +
  'date TEXT, ' +
  'duration REAL, ' +
  'game INTEGER, ' +
  'location INTEGER, ' +
  'notes TEXT' +
  ')'
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:32:17.277

事实证明，这是由于以错误的顺序执行各种查询所致。

我设法通过像这样分离函数来对此进行排序：

```
//FUNCTION TO ADD NEW LOCATIONS
function addLocation(tx){
    tx.executeSql(
        'INSERT INTO locations (lTitle) VALUES (?)',
        [$('#newLocation').val()],
        function(tx, results){
            locationID = results.insertId;
        },
        errorCB
    );
}

//FUNCTION TO ADD NEW GAMES
function addGame(tx){
    tx.executeSql(
        'INSERT INTO games (gTitle) VALUES (?)',
        [$('#newGame').val()],
        function(tx, results){
            gameID = results.insertId;
        },
        errorCB
    );
}

//FUNCTION TO ADD NEW SESSION
function addSessionGo(tx){
    var sSQL = 'INSERT INTO sessions (date, game, location, notes) VALUES ' +
        '("'+$('#date').val()+' '+$('#time').val()+':00.000"' +
        ','+gameID+','+locationID+',"'+$('#notes').val()+'")';
    //alert(sSQL);

    tx.executeSql(
        sSQL,
        [],
        function(tx,results){
            //todo after successful entry
            //alert('Added new session');
        },
        errorCB
    );
}

//FUNCTION TO START ADDING THE NEW SESSION
function addSession(tx){
    locationID = $('#location').val();
    gameID = $('#game').val();

    if ($('#location').val() == '0'){
        db.transaction(addLocation, errorCB);
    }

    if ($('#game').val() == '0'){
        db.transaction(addGame, errorCB);
    }

    db.transaction(addSessionGo, errorCB);
} 
```

# objective-c - 方法定义可以指定参数必须是常量吗？

> ID：11597644
> 
> 赞同：3
> 
> 时间：2012-07-22T03:50:34.817
> 
> 标签：objective-c, methods, constants

所以，我想做类似的事情：

```
+ (void) replace_text_with: (NSString *) const predefined_text_style; 
```

我在其他地方的 Constants.h 和 Constants.m 文件中使用常量字符串定义了一些文本样式。

我想要求传递的参数`predefined_text_style`是这些常量之一，如果不可能将其专门限制为这些常量，至少要求它是某种常量。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T03:59:10.067

我在 Objective-C 方面的知识有点生疏，但我敢打赌，不可能将参数限制为字符串的子集。我建议使用[enums](http://en.wikipedia.org/wiki/Enumerated_type)：

```
typedef enum {
    FOOMy1stValue,
    FOOMy2ndValue,
    FOOMy3rdValue
} FOOEnum; 
```

最终，根据枚举值检索常量字符串：

```
NSString *FOOGetStringFromEnum(FOOEnum e) {
    static NSString *strings[] = {
        @"My first value",
        @"My second value",
        @"My third value"
    };
    return strings[e];
} 
```

如：

```
void FOORestrictedInput(FOOEnum e) {
    NSLog(@"Restricted string: %@", FOOGetStringFromEnum(e));
} 
```

这不是一个很好的解决方案，因为您可以传递整数来代替枚举的值，但至少参数的类型将记录您的期望。

另一种可能性是创建一个新类，其实例将存储字符串常量。这些实例将作为参数而不是字符串传递。理论上，除了用作常量的实例之外，仍然可以创建该类的新实例，但与使用字符串相比，意外做到这一点更难。

无论如何，我觉得这两种解决方案都是不必要的开销。我不会担心过多地限制可传递的值（至少在 Objective-C 中不会——在其他一些语言中可能要容易得多）。但是，由于我对您的上下文了解不多，因此这些是一些可能的解决方案。

# jquery - jQuery Ajax：获取特定对象值

> ID：11597646
> 
> 赞同：4
> 
> 时间：2012-07-22T03:51:30.670
> 
> 标签：jquery, ajax, json, api

我正在使用 Ajax 访问字典 REST API。

```
$.ajax({
  url: "http://api.wordnik.com//v4/word.json/cat/definitions?api_key=mykey&includeRelated=false&includeTags=false&limit=1",
  dataType : 'json',
  success: function(data) {
    //called when successful
    alert(data.word);
  },
  error: function(e) {
    //called when there is an error
    console.log(e.message);
  }
}); 
```

响应：

```
[
  {
    "textProns": [],
    "sourceDictionary": "ahd-legacy",
    "exampleUses": [],
    "relatedWords": [],
    "labels": [],
    "citations": [],
    "word": "cat",
    "text": "A small carnivorous mammal (Felis catus or F. domesticus) domesticated since early times as a catcher of rats and mice and as a pet and existing in several distinctive breeds and varieties.",
    "sequence": "0",
    "score": 0.0,
    "partOfSpeech": "noun",
    "attributionText": "from The American Heritage® Dictionary of the English Language, 4th Edition"
  }
] 
```

在我的测试示例中，我收到成功警报`undefined`。我看到的大多数 Ajax 示例都使用循环，但我返回一个结果。如何从对象中提取`word`和`text`值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T03:59:36.887

如您所见，您的回复以 . 开头`[`和结尾`]`。所以你的回应是一个数组。然后，在数组内部，您将获得对象（以 开头`{`和结尾`}`）。所以你`data`是一个数组，可以使用（x 是索引）访问，并且可以使用 .dot 表示法：等`data[x]`访问所选对象的每个成员。所以在你的情况下，如果只有一个结果，你可以做。`.word``.text``data[0].word`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T03:55:19.070

响应是数组内的一个对象。尝试`data[0].word`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T04:07:52.843

您想像这样更改**成功**功能，

```
success: function(data) {
  alert(data[0].word);
} 
```

我验证了正确的值。

[jQuery AJAX](http://learnhosting.org/jquery-ajax/)

# sql - 让 SQL 查询在 Access 中工作

> ID：11597647
> 
> 赞同：1
> 
> 时间：2012-07-22T03:51:42.167
> 
> 标签：sql, sql-server, ms-access

我有以下用 MS SQL Server 编写的查询：

```
select
    (select (CAST( count(*) as decimal (38,4))) from Inventor) /
    (select (CAST( count(*) as decimal(38,4))) from General); 
```

效果很好，但是当我尝试在 Access 中使用它时，它根本不起作用。

请帮忙！

好的，所以它不必强制转换为十进制，浮点数也可以。

我的 Inventor 表中包含 General 表中的 PK 作为 FK。问题是，如果某件事上列出了多个发明者。所以我尝试了以下方法：

```
SELECT TotalInventors/TotalPatents
(SELECT COUNT (DISTINCT PatentNo) FROM Inventor AS TotalPatents
(SELECT COUNT (*) FROM Inventor AS TotalInventors))
FROM Inventor; 
```

仍然有语法错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:39:32.687

[Access](http://office.microsoft.com/en-us/access-help/instruccion-select-HA001231497.aspx)中的 Select 语法不允许您编写没有“from”的选择**。**

访问语法：

```
SELECT [predicate] { * | table.* | [table.]field1 [AS alias1] [, [table.]field2 [AS alias2] [, ...]]}
FROM tableexpression [, ...] [IN externaldatabase] --FROM is NOT optional
[WHERE... ]
[GROUP BY... ]
[HAVING... ]
[ORDER BY... ]
[WITH OWNERACCESS OPTION] 
```

SQL Server 语法：

```
[ WITH <common_table_expression>]
SELECT select_list [ INTO new_table ]
[ FROM table_source ] [ WHERE search_condition ] --FROM is optional
[ GROUP BY group_by_expression ]
[ HAVING search_condition ]
[ ORDER BY order_expression [ ASC | DESC ] ] 
```

正如您[在此处](http://msdn.microsoft.com/en-us/library/ms177563.aspx)看到的，[ ] 表示某些内容是可选的。并且 [ ] 包装了 SQL Server 语法中的“From”，但不在访问语法中。

所以，基本上，您的查询在 Access 中是无效的，因为它**需要**一个“FROM”

现在这有点**不一致**，而这个：

```
select    ( 1  ) /  ( 1 ) 
```

或这个

```
select    ( 1 ) 
```

会给我一个有效的答案，这会在**Access中给我一个****语法错误**（但它在 SQL Server 中确实有效）：

 **```
select    ( select 1  ) /  ( select 1 ) 
```

您需要一个“双”表，以便您可以编写：

```
select    (  select 1  from Dual) /  ( select 1 from Dual) from Dual. 
```

这是您如何[创建一个](https://stackoverflow.com/questions/7933518/table-less-union-query-in-ms-access-jet-ace)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T13:21:43.583

在您的问题的当前版本中，Access 抱怨您的这部分查询，因为 Access SQL 不支持`COUNT (DISTINCT anything)`.

```
SELECT COUNT (DISTINCT PatentNo) FROM Inventor 
```

您可以将该部分重写为：

```
SELECT Count(*) FROM
(SELECT DISTINCT PatentNo
FROM Inventor); 
```

然而，调整完整的查询以使用它将更具挑战性。考虑为您提供的单个 Access 查询是否`TotalInventors/TotalPatents`真的是最好的方法。我怀疑您可以通过将 SQL 编码任务拆分为 2 个查询（一个给您`TotalInventors`，另一个给您`TotalPatents`）来简化 SQL 编码任务。然后在调用查询的客户端代码中进行划分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:04:46.470

我认为这会起作用：

```
SELECT
    CDbl( ci ) / CDbl( cg )   AS result
FROM 
    (SELECT COUNT(*) AS ci FROM Inventor) AS i
  ,
    (SELECT COUNT(*) AS cg FROM General) AS g ; 
```

逗号`,`将像`CROSS JOIN`在其他 DBMS 中一样编写。**

# android - 在android中如何显示星号（*）代替EditText中的点，输入类型为textPassword？

> ID：11597648
> 
> 赞同：5
> 
> 时间：2012-07-22T03:52:02.883
> 
> 标签：android, android-edittext

我试图用`asterisk (*)`符号代替点`EditText`来显示`inputType`as `textPassword`。我遇到了要求使用`setTransformationMethod()`和实施的帖子`PasswordTransformationMethod`。但是我需要实现该类的哪个方法以及如何显示星号？还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T03:56:39.650

我认为您应该阅读[文档](http://developer.android.com/reference/android/text/method/PasswordTransformationMethod.html#getTransformation(java.lang.CharSequence,%20android.view.View))。创建您的`PasswordTransformationMethod`类，并在`getTransformation()`方法中返回`*`与密码字段内容长度相同的字符串。

我做了一些摆弄，想出了一个匿名类，它可以让我制作一个充满`*`s 的字段。我在这里将其转换为可用的类：

```
public class MyPasswordTransformationMethod extends PasswordTransformationMethod {
    @Override
    public CharSequence getTransformation(CharSequence source, View view) {
        return new PasswordCharSequence(source);
    }

    private class PasswordCharSequence implements CharSequence {
        private CharSequence mSource;
        public PasswordCharSequence(CharSequence source) {
            mSource = source; // Store char sequence
        }
        public char charAt(int index) {
            return '*'; // This is the important part
        }
        public int length() {
            return mSource.length(); // Return default
        }
        public CharSequence subSequence(int start, int end) {
            return mSource.subSequence(start, end); // Return default
        }
    }
};

// Call the above class using this:
text.setTransformationMethod(new MyPasswordTransformationMethod()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-01T13:00:32.420

在 kotlin 中，你可以做到这一点。

```
editText.transformationMethod = object : PasswordTransformationMethod() {
     override fun getTransformation(
         source: CharSequence?,
         view: View?
     ): CharSequence {
         return PasswordCharSequence(super.getTransformation(source, view))
     }

     inner class PasswordCharSequence(private val source: CharSequence) : CharSequence {
        override val length: Int get() = source.length

        override fun get(index: Int): Char {
            //Only modify char '\u2022' if you want to keep the default behaviour
            return if(source[index] == '\u2022') '*' else source[index]
        }

        override fun subSequence(startIndex: Int, endIndex: Int): CharSequence {
            return source.subSequence(startIndex, endIndex)
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T07:32:21.140

使用将 DOT 值从“\u2022”更改为“\u002A”的自定义类

```
import android.graphics.Rect;
import android.os.Handler;
import android.os.SystemClock;
import android.text.Editable;
import android.text.GetChars;
import android.text.NoCopySpan;
import android.text.Spannable;
import android.text.Spanned;
import android.text.TextUtils;
import android.text.TextWatcher;
import android.text.method.TransformationMethod;
import android.text.style.UpdateLayout;
import android.view.View;

import java.lang.ref.WeakReference;

public class PasswordTransformationMethod
        implements TransformationMethod, TextWatcher {
    /* package */ static final Object ACTIVE = new NoCopySpan.Concrete();
    /* package */ static final Object CAPPED = new NoCopySpan.Concrete();
    /* package */ static final int SHOW_PASSWORD = 8;

    public CharSequence getTransformation(CharSequence source, View view) {
        if (source instanceof Spannable) {
            Spannable sp = (Spannable) source;

            /*
             * Remove any references to other views that may still be
             * attached.  This will happen when you flip the screen
             * while a password field is showing; there will still
             * be references to the old EditText in the text.
             */
            ViewReference[] vr = sp.getSpans(0, sp.length(),
                    ViewReference.class);
            for (int i = 0; i < vr.length; i++) {
                sp.removeSpan(vr[i]);
            }

            removeVisibleSpans(sp);

            sp.setSpan(new ViewReference(view), 0, 0,
                    Spannable.SPAN_POINT_POINT);
        }

        return new PasswordCharSequence(source);
    }

    public static android.text.method.PasswordTransformationMethod getInstance() {
        if (sInstance != null)
            return sInstance;

        sInstance = new android.text.method.PasswordTransformationMethod();
        return sInstance;
    }

    public void beforeTextChanged(CharSequence s, int start,
                                  int count, int after) {
        // This callback isn't used.
    }

    public void onTextChanged(CharSequence s, int start,
                              int before, int count) {
        if (s instanceof Spannable) {
            Spannable sp = (Spannable) s;
            ViewReference[] vr = sp.getSpans(0, s.length(),
                    ViewReference.class);
            if (vr.length == 0) {
                return;
            }

            /*
             * There should generally only be one ViewReference in the text,
             * but make sure to look through all of them if necessary in case
             * something strange is going on.  (We might still end up with
             * multiple ViewReferences if someone moves text from one password
             * field to another.)
             */
            View v = null;
            for (int i = 0; v == null && i < vr.length; i++) {
                v = vr[i].get();
            }

            if (v == null) {
                return;
            }

           /* int pref = TextKeyListener.getInstance().getPrefs(v.getContext());
            if ((pref & SHOW_PASSWORD) != 0) {
                if (count > 0) {
                    removeVisibleSpans(sp);

                    if (count == 1) {
                        sp.setSpan(new Visible(sp, this), start, start + count,
                                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                    }
                }
            }*/
        }
    }

    public void afterTextChanged(Editable s) {
        // This callback isn't used.
    }

    public void onFocusChanged(View view, CharSequence sourceText,
                               boolean focused, int direction,
                               Rect previouslyFocusedRect) {
        if (!focused) {
            if (sourceText instanceof Spannable) {
                Spannable sp = (Spannable) sourceText;

                removeVisibleSpans(sp);
            }
        }
    }

    private static void removeVisibleSpans(Spannable sp) {
        Visible[] old = sp.getSpans(0, sp.length(), Visible.class);
        for (int i = 0; i < old.length; i++) {
            sp.removeSpan(old[i]);
        }
    }

    private static class PasswordCharSequence
            implements CharSequence, GetChars {
        public PasswordCharSequence(CharSequence source) {
            mSource = source;
        }

        public int length() {
            return mSource.length();
        }

        public char charAt(int i) {
            if (mSource instanceof Spanned) {
                Spanned sp = (Spanned) mSource;

                int st = sp.getSpanStart(ACTIVE);
                int en = sp.getSpanEnd(ACTIVE);

                if (i >= st && i < en) {
                    return mSource.charAt(i);
                }

                Visible[] visible = sp.getSpans(0, sp.length(), Visible.class);

                for (int a = 0; a < visible.length; a++) {
                    if (sp.getSpanStart(visible[a].mTransformer) >= 0) {
                        st = sp.getSpanStart(visible[a]);
                        en = sp.getSpanEnd(visible[a]);

                        if (i >= st && i < en) {
                            return mSource.charAt(i);
                        }
                    }
                }
            }

            return DOT;
        }

        public CharSequence subSequence(int start, int end) {
            char[] buf = new char[end - start];

            getChars(start, end, buf, 0);
            return new String(buf);
        }

        public String toString() {
            return subSequence(0, length()).toString();
        }

        public void getChars(int start, int end, char[] dest, int off) {
            TextUtils.getChars(mSource, start, end, dest, off);

            int st = -1, en = -1;
            int nvisible = 0;
            int[] starts = null, ends = null;

            if (mSource instanceof Spanned) {
                Spanned sp = (Spanned) mSource;

                st = sp.getSpanStart(ACTIVE);
                en = sp.getSpanEnd(ACTIVE);

                Visible[] visible = sp.getSpans(0, sp.length(), Visible.class);
                nvisible = visible.length;
                starts = new int[nvisible];
                ends = new int[nvisible];

                for (int i = 0; i < nvisible; i++) {
                    if (sp.getSpanStart(visible[i].mTransformer) >= 0) {
                        starts[i] = sp.getSpanStart(visible[i]);
                        ends[i] = sp.getSpanEnd(visible[i]);
                    }
                }
            }

            for (int i = start; i < end; i++) {
                if (!(i >= st && i < en)) {
                    boolean visible = false;

                    for (int a = 0; a < nvisible; a++) {
                        if (i >= starts[a] && i < ends[a]) {
                            visible = true;
                            break;
                        }
                    }

                    if (!visible) {
                        dest[i - start + off] = DOT;
                    }
                }
            }
        }

        private CharSequence mSource;
    }

    private static class Visible
            extends Handler
            implements UpdateLayout, Runnable {
        public Visible(Spannable sp, android.text.method.PasswordTransformationMethod ptm) {
            mText = sp;
            mTransformer = ptm;
            postAtTime(this, SystemClock.uptimeMillis() + 1500);
        }

        public void run() {
            mText.removeSpan(this);
        }

        private Spannable mText;
        private android.text.method.PasswordTransformationMethod mTransformer;
    }

    /**
     * Used to stash a reference back to the View in the Editable so we
     * can use it to check the settings.
     */
    private static class ViewReference extends WeakReference<View>
            implements NoCopySpan {
        public ViewReference(View v) {
            super(v);
        }
    }

    private static android.text.method.PasswordTransformationMethod sInstance;
    private static char DOT = '\u002A';
} 
```

# c - printf("%i") 和 printf("%d") 有什么区别

> ID：11597650
> 
> 赞同：5
> 
> 时间：2012-07-22T03:52:58.500
> 
> 标签：c, printf

> **可能重复：**
> [printf 中格式说明符 %i 和 %d 之间的差异](https://stackoverflow.com/questions/1893490/difference-between-format-specifiers-i-and-d-in-printf)

我刚刚检查了参考，它说它们都表示有符号整数。我认为一定有一些不同

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T04:00:36.170

没有区别。

来自 C99 标准文档，第 7.19.6.1 节：

> d, 我
> 
> int 参数转换为样式 [−]dddd 的有符号十进制。精度指定出现的最小位数；如果要转换的值可以用更少的数字表示，则用前导零扩展它。默认精度为 1。 零精度转换零值的结果是没有字符

# objective-c - 未声明的标识符“isGameCenterAvailable”

> ID：11597656
> 
> 赞同：1
> 
> 时间：2012-07-22T03:55:21.300
> 
> 标签：objective-c, ios, game-center

遵循书籍教程，似乎遇到了“isGameCenterAvailable”错误的障碍。

显然它是未声明的。其他一切似乎都有效，所以我只需要弄清楚这部分。

Helloworldlayer .m 初始化方法

```
#import <GameKit/GameKit.h>

GameKitHelper* gkHelper = [GameKitHelper sharedGameKitHelper]; gkHelper.delegate = self;
[gkHelper authenticateLocalPlayer];        

Class gameKitLocalPlayerClass = NSClassFromString(@"GKLocalPlayer"); bool isLocalPlayerAvailable = (gameKitLocalPlayerClass != nil);
// Test if device is running iOS 4.1 or higher
NSString* reqSysVer = @"4.1";
NSString* currSysVer = [[UIDevice currentDevice] systemVersion]; bool isOSVer41 = ([currSysVer compare:reqSysVer
                                                                                                   options:NSNumericSearch] != NSOrderedAscending);

isGameCenterAvailable = (isLocalPlayerAvailable && isOSVer41); 

-(void) onLocalPlayerAuthenticationChanged {
    [delegate onLocalPlayerAuthenticationChanged]; 
}

-(void) authenticateLocalPlayer {
    GKLocalPlayer* localPlayer = [GKLocalPlayer localPlayer]; 
    if (localPlayer.authenticated == NO) {

        [localPlayer authenticateWithCompletionHandler: ^(NSError* error) {
        [self setLastError:error]; }];
    } 
} 
```

游戏套件.h

```
 #import "cocos2d.h"
 #import <GameKit/GameKit.h>
 @protocol GameKitHelperProtocol
 -(void) onLocalPlayerAuthenticationChanged; -(void) onFriendListReceived:   (NSArray*)friends; -(void) onPlayerInfoReceived:(NSArray*)players; @end
 @interface GameKitHelper : NSObject {
   id<GameKitHelperProtocol> delegate; bool isGameCenterAvailable; NSError* lastError;
}
 @property (nonatomic, retain) id<GameKitHelperProtocol> delegate;

 @property (nonatomic, readonly) bool isGameCenterAvailable; @property (nonatomic,    readonly) NSError* lastError;
+(GameKitHelper*) sharedGameKitHelper;
 // Player authentication, info
 -(void) authenticateLocalPlayer;
 -(void) getLocalPlayerFriends;
 -(void) getPlayerInfo:(NSArray*)players; 

 @end 
```

你好世界层.h

```
 #import "GameKitHelper.h"

  @interface helloworldlayer : CCLayer <GameKitHelperProtocol>

{

 } 
```

游戏工具助手。H

```
 #import "cocos2d.h"
  #import <GameKit/GameKit.h>
  @protocol GameKitHelperProtocol
  -(void) onLocalPlayerAuthenticationChanged; -(void) onFriendListReceived:(NSArray*)friends; -   (void) onPlayerInfoReceived:(NSArray*)players; @end
   @interface GameKitHelper : NSObject {
id<GameKitHelperProtocol> delegate; bool isGameCenterAvailable; NSError* lastError;
}
@property (nonatomic, retain) id<GameKitHelperProtocol> delegate;

  @property (nonatomic, readonly) bool isGameCenterAvailable; @property (nonatomic,     readonly) NSError* lastError;
  +(GameKitHelper*) sharedGameKitHelper;
 // Player authentication, info
 -(void) authenticateLocalPlayer;
 -(void) getLocalPlayerFriends;
 -(void) getPlayerInfo:(NSArray*)players; 

   @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:52:59.293

问题是你从来没有真正声明过`isGameCenterAvailable`。要解决此问题，请执行以下操作：

```
//HelloWorldLayer.h
@property (nonatomic) BOOL isGameCenterAvailable;

//HelloWorldLayer.m
@synthesize isGameCenterAvailable = _isGameCenterAvailable; 
```

**更新：**

要修复委托错误，请尝试以下操作：

```
//HelloWorldLayer.h
@property (nonatomic, retain) id<GameKitHelperProtocol> delegate;

//HelloWorldLayer.m
@synthesize delegate; 
```

希望这可以帮助！

# c++ - 使用 IPython 调试 C/C++ 代码

> ID：11597657
> 
> 赞同：4
> 
> 时间：2012-07-22T03:55:27.133
> 
> 标签：c++, python, debugging, ipython

假设我在[IPython](http://ipython.org/)中（例如在[新的 QT 控制台](http://ipython.org/ipython-doc/dev/interactive/qtconsole.html)上），并且我调用了一个我用它编写的 C++ 库（例如使用[SWIG](http://en.wikipedia.org/wiki/SWIG)或[Boost.Python](http://www.boost.org/doc/libs/1_50_0/libs/python/doc/)）。我想在我的 C++ 代码中设置一个**断点**，并能够使用 IPython 与我的 C++ 工作区（即当我命中断点时的变量）进行交互（例如绘制我的 C++ 变量等）。

换句话说，我想从**IPython**调试我的 C++ 代码。这是可能吗？我可以为此使用哪些工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-12T08:43:16.937

（假设你在 Linux 上）你只需要 gdb。首先设置配置告诉 gdb 您的源文件在哪里，方法是将其添加到`$HOME/.gdbinit`： `directory absolute-path-to-source`

现在启动`gdb python`并在 gdb 提示符下执行： `set args /usr/bin/ipython run`

你不能直接做`gdb ipython`，因为 ipython 是一个脚本。请从这里开始参考 gdb 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T05:53:33.793

通常，您无法直接使用 IPython 调试 C++ 代码。但是，您可以做的是使用 C++ 调试器来调试您的 C++ 代码。

本质上，您告诉您的 C++ 调试器执行运行代码所需的任何进程（这可能是 IPython 本身），并在您的 C++ 代码中设置断点（您的调试器将知道等待加载适当的 DLL，如果它在一个DLL中）。从那里，您正在调试在 IPython 进程中运行的代码部分。

# jquery - 调整浏览器窗口大小时自动更改框的宽度？

> ID：11597658
> 
> 赞同：0
> 
> 时间：2012-07-22T03:56:05.160
> 
> 标签：jquery, css

我有2个盒子。当窗口调整大小时，#content-left 和 #content-right 会自动调整高度。我想要做的是自动调整#content-right 的宽度以填补这两个框之间的空白。

到目前为止，我编写的代码仅适用于第一页加载或刷新。调整窗口大小时它不起作用。我究竟做错了什么？

[现场版。](http://jsfiddle.net/fcQuZ/)

**jQuery：**

```
$(document).ready(function(){ 

  $(window).load(function() {
    scrollPaneLoad();
  });

  function scrollPaneLoad() {
      if ($(window).height() > $(document).height()) {
        main_height = $(document).height();
      } else {
        main_height = $(window).height();
      }
      div_height = main_height - $('#header-outer').height() - $('#footer').height();
      if (div_height < 400) div_height = 400;
      $('#content-right, #content-left').css({height: div_height + 'px'});
      img_width = $('img.content-left-img').width();
      content_right_width = 945 - img_width;
      $('#content-left').css({width: img_width + 'px'});
      $('#content-right').css({width: content_right_width + 'px'});
      $('#content-right').jScrollPane(
        {
          showArrows: true,
          horizontalGutter: 10
        }
      );
  }

  $(window).resize(function() {
    scrollPaneLoad();       
  });  

}); 
```

**HTML：**

```
...
<div id="content">
  <div id="content-left">
    <img src="img/home.jpg" class="content-left-img" />
  </div><!--eof #content-left-->
  <div id="content-right">
    <div class="inner">
      <!--content goes here-->
    </div><!--eof .inner-->
  </div><!--eof #content-right-->
  <div class="float-fix"></div>
</div>
... 
```

**CSS：**

```
#content {
    width:950px;
    text-align:left;
    margin:0 auto;
}
#content-left {
    float:left;
    position:relative;
    width:565px;
    min-height:400px;
    height:100%;
    overflow:hidden;

    background-color: transparent;
    background-position: left top;
    background-repeat: no-repeat;
    -moz-background-size: cover;
    -webkit-background-size: cover;
    -khtml-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

#content-left img.content-left-img {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
    height: 100%;
    min-height: 400px;
    margin: 0;
    border: 0;
}
#content-right {
    float:right;
    width:380px;
}
#content-right .inner {
    padding:15px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T04:52:02.570

那是因为您将宽度设置为恒定值，因此即使您调整窗口大小，它们也不会改变。将高度和宽度更改为百分比值，例如 60% 或 70%，它们将随窗口扩展或收缩。请注意，如果元素收缩，其内容可能会以丑陋的方式溢出。

# visual-c++ - cin.ignore 定义不显示可选参数，但可以在没有它们的情况下调用它？

> ID：11597662
> 
> 赞同：0
> 
> 时间：2012-07-22T03:57:01.747
> 
> 标签：visual-c++

我正在查看一个定义，如下所示：

istream& 忽略 (streamsize n = 1, int delim = EOF);

然后我怎么可以调用 cin.ignore()，我认为它只是吃下一个字符。还是我在看错误的定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:04:14.443

它使用默认参数。如果你调用 cin.ignore()，你得到的是 cin.ignore(1, EOF)。

编辑： http: [//www.learncpp.com/cpp-tutorial/77-default-parameters/](http://www.learncpp.com/cpp-tutorial/77-default-parameters/)

# c++ - LLVM cpp 后端，它会取代 c 后端吗？

> ID：11597664
> 
> 赞同：5
> 
> 时间：2012-07-22T03:58:06.223
> 
> 标签：c++, c, llvm, clang

我的问题是关于 CPP 后端，它的用途与 C 后端相同吗？C 后端是我最喜欢的 LLVM 功能之一，我很遗憾它被删除了。

真正的区别是什么？我非常感谢任何帮助。

参考： [LLVM 3.1 发行说明](http://llvm.org/releases/3.1/docs/ReleaseNotes.html#whatsnew) “C 后端已被删除......”

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-22T09:19:25.690

CPP 后端创建 LLVM API 调用以创建代表 LLVM 程序集的等价物的 AST。您可以通过选择“LLVM C++ API 代码” *Target在*[http://llvm.org/demo/](http://llvm.org/demo/)尝试 CPP 后端。

 *C 后端创建执行 LLVM 程序集语义的 C 代码。

它们是根本不同的。*

# html - 为什么 z-index 不适用于不透明度？

> ID：11597668
> 
> 赞同：1
> 
> 时间：2012-07-22T03:59:05.717
> 
> 标签：html, css, z-index

我有两个 div，在外部 div 上我给出了 0.1 的不透明度，然后我有一个不应继承父容器不透明度属性的内部 div。但为了避免这种情况，我所做的是添加 az -index 属性（高于子元素）但它不起作用。如何避免子 div 继承其父容器的 opacity 属性：

```
<!DOCTYPE HTMl>
<html>
    <head>  
        <style type="text/css">
            #outer{width:500px;height:400px;background:#000000;border:1px solid red;opacity:.1;z-index:1}
            #inner{width:450px;height:350px;background:#ffffff;margin: 0 auto;margin-top:20px;z-index:2}

        </style>
    </head>
    <body>
        <div id="outer">
            <div id="inner">
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:44:23.493

您可以使用 rgba 属性来使其正常工作。例如下面应该工作：

```
<!DOCTYPE HTMl>
<html>
    <head>  
        <style type="text/css">
            #outer{width:500px;height:400px;background:#000000;border:1px solid red;background:rgba(255,0,0,0.5);}
            #inner{width:450px;height:350px;background:#ffffff;margin: 0 auto;margin-top:20px;background:rgba(255,0,0,1);}

        </style>
    </head>
    <body>
        <div id="outer">
            <div id="inner">
            </div>
        </div>
    </body>
</html> 
```

# javascript - 如何通过容器内的元素定义容器的高度

> ID：11597670
> 
> 赞同：1
> 
> 时间：2012-07-22T03:59:31.990
> 
> 标签：javascript, jquery, html

我正在尝试使用 jquery 或 javascript 根据该容器中的图像定义容器的高度。这可能吗？我的代码如下：

```
<div class="img-info">
<img src="images/photos/thumb_sample_l.jpg" alt="sample" title="示例缩略图" width="100%" />
</div>

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T04:13:50.523

这个 jQuery 脚本应该可以解决问题

```
var imgHeight = $('.img-info img').height();
$('.img-info').css({'height':imgHeight}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T04:40:01.970

根据屏幕高度管理内容高度的 javascript 代码可能对您有所帮助..

```
<script type="text/javascript">
  $(document).ready(function () {
  var scrheight=screen.availHeight;
  //alert(scrheight-270);
  $('.TabbedPanelsContent').css('max-height',scrheight-270);
  $('.TabbedPanelsContent').css('overflow','auto');
  });
  </script> 
```

在这里使用你的类名而不是 TabbedPanelsContent 会让你想要你想要的。

# html - 为什么 IE9、FF、opera 比 chrome 增加 20%+ 边距？

> ID：11597674
> 
> 赞同：0
> 
> 时间：2012-07-22T04:00:39.147
> 
> 标签：html, css

***[实时代码](http://designobvio.us/css/)***

如何修复`class="content_push"`跨浏览器的边距一致。

Chrome 给了我我喜欢的![在此处输入图像描述](../Images/b92f4b4c63517ee3b61418c1b5102723.png) 与 IE9、opera、ff 相比的视图，看起来像： ![在此处输入图像描述](../Images/91798222a2f4ecd6b602772e1cc36312.png)

```
<div class="content_push">
  <section class="cc">
    <div class="margin_wrapper">
      <header>
        <hgroup>
          <h1 class="at">rocking grass out styles for everyone.</h1>
          <h2 class="ast">The you mice structure for to of almost ability an trying the when designer dissolute that constructing in quickly distinct...</h2>
        </hgroup>
      </header>
      <h3 class="title_header">the good</h3>
      <p></p>
      <h3 class="title_header">the bad</h3>
      <p></p>
      <h3 class="title_header">the ugly</h3>
      <p></p>
    </div>
  </section>

</div> 
```

**CSS**

```
.mc {
min-height:100%;
    width:100%;
    background:#fff;
    z-index:1;
    position:absolute;
    border-top:1px #c9cacc solid;
}

.content_push {
    margin-top:-35%;
    position:absolute;
    z-index:10;
    background:#FFF;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T04:03:53.390

我不知道它是否会起作用（我认为它会起作用），但您可以尝试“重置”css，然后它们会应用您的样式。在此处查看：[http](http://meyerweb.com/eric/tools/css/reset/) ://meyerweb.com/eric/tools/css/reset/在使用样式之前应用此 URL 中显示的样式。还有其他的css重置器，谷歌搜索。

# php - 使用 PHP 获取当前日期

> ID：11597679
> 
> 赞同：-1
> 
> 时间：2012-07-22T04:03:05.433
> 
> 标签：php

我正在尝试创建一个获取当前日期和时间的变量，以便将其与截止日期进行比较（例如：7/30/12 23:23:10）。我将此代码放在一个名为 date.php 的文件中，它应该返回一个 10 位数字，但我得到了一个服务器错误。谁能帮我创建一个在 php 中获取当前时间的变量？

```
<?php
$date = date_create();
echo date_timestamp_get($date);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T04:05:29.270

你不应该需要这么复杂的功能。

```
echo date("r"); // Returns RFC 2822 formatted date.
echo time(); // Returns UNIX timestamp 
```

有关日期格式的更多信息，请参阅 PHP[`date`](http://us2.php.net/manual/en/function.date.php)文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T04:07:46.337

根据[官方日期创建文档](http://php.net/manual/fr/function.date-create.php "官方 date_create 文档")date_create() 仅适用于 PHP 5.2.0 或更高版本。

你有 PHP 5.2.0 吗？（做一个phpinfo（））

# git - 从 .git 目录生成工作目录文件

> ID：11597682
> 
> 赞同：8
> 
> 时间：2012-07-22T04:04:02.593
> 
> 标签：git

我有`.git`目录，但我没有实际的工作目录，只有 repo。我可以使用什么命令来重新创建工作目录？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T04:10:57.813

假设 .git 目录位于一个名为“test”的空目录中。

```
git clone test new_test 
```

new_test 现在将包含 .git 目录和工作副本。或者，您也可以直接指向 .git 目录：

```
git clone test/.git new_test 
```

结果相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T04:14:27.863

如果您需要的不是要使用的工作存储库，而只是工作文件的副本，则可以`git archive`在`.git`目录上运行以从工作树生成 Tar 文件。

它通常在标准输出上生成，因此您可以简单地运行`git --git-dir=/path/to/repo archive | tar x`以在您的工作目录中获取副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T07:42:13.960

我认为您实际上是在问如何使裸存储库成为非裸存储库。虽然再次克隆它可能是最简单的，但这也有效：

首先确保所有内部 git 文件（例如 index、HEAD）和文件夹（例如 hooks、info、objects、refs）都在一个名为 .git 的文件夹中。现在您的存储库仍然是裸露的，情况可能并非如此。所以只是重命名它。然后将其移动到您想要成为工作目录的文件夹中。

然后在工作目录级别：

```
git config core.bare 0
git checkout -f 
```

但是，再次克隆更容易；-)

# php - 每次插入、更新和删除记录时都应该使用 mysqli 准备语句吗？

> ID：11597691
> 
> 赞同：0
> 
> 时间：2012-07-22T04:06:24.373
> 
> 标签：php, mysqli, prepare

我主要关心的是在我的数据库表中插入、更新和删除记录的安全性。

如果我使用以下代码：

```
 $sql_room = "UPDATE `lf_rooms` SET room_count`=$room_count
                    WHERE id = $room_id";

    mysqli_query($con, $sql_room); 
```

这是安全的还是我需要使用准备语句？

# c# - Bouncy Castle C# - 密码保护密钥

> ID：11597692
> 
> 赞同：0
> 
> 时间：2012-07-22T04:06:26.867
> 
> 标签：c#, .net, bouncycastle, pfx

我可以使用以下代码解密受密码保护的**PKCS8 DER密钥：**

```
MemoryStream ms = new MemoryStream(privateKey);
AsymmetricKeyParameter keyparams =       Org.BouncyCastle.Security.PrivateKeyFactory.DecryptKey(password.ToCharArray(), ms);
RSAParameters rsaparams = DotNetUtilities.ToRSAParameters((RsaPrivateCrtKeyParameters)keyparams);
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();
rsa.ImportParameters(rsaparams);
return rsa; 
```

现在，当它以不同的格式提供给我时，我必须重新创建相同类型的密钥（在此示例中，它是作为 PFX 文件提供给我的）。所以我必须从 PFX 私钥创建一个受密码保护的 PKCS8 DER 密钥。在阅读了 Bouncy Castle 源代码后，我设法找到了该`PrivateKeyFactory.EncryptKey`功能，但我无法让它工作。我的代码如下：

```
X509Certificate2 cert = new X509Certificate2(pfx_bytes, password,X509KeyStorageFlags.Exportable);             
var pkey = cert.PrivateKey;
var bcCert = DotNetUtilities.FromX509Certificate(cert);    
var bcPkey = DotNetUtilities.GetKeyPair(pkey).Private;
return PrivateKeyFactory.EncryptKey(Org.BouncyCastle.Asn1.DerObjectIdentifier.Der, password.ToCharArray(), Encoding.UTF8.GetBytes(Guid.NewGuid().ToString()), 10, bcPkey); 
```

当我运行前面的代码时，我得到了异常`"System.ArgumentException`：尝试将非 PBE 算法与**PBE EncryptedPrivateKeyInfo**生成一起使用。

谷歌搜索除了函数的源代码外什么都没有显示，尽管我试图按照它来找到我无法找到的解决方案。

有人可以指出我如何使用该功能从标准.net 私钥创建受密码保护的**PKCS8 DER**密钥的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:15:09.647

PrivateKeyFactory.EncryptKey 的第一个参数应该标识一个加密算法。最简单的方法是给出标准 PBE 算法的 ObjectIdentifier (OID)，例如 PKCSObjectIdentifiers.PbeWithShaAnd3KeyTripleDesCbc 而不是 DerObjectIdentifier.Der。如果您想了解其他可用的算法，您可以查看 PbeUtilities 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T14:03:13.557

PBEUtil 支持的 PBE 算法：

PBEwithMD2andDES-CBC, PBEwithMD2andRC2-CBC, PBEwithMD5andDES-CBC, PBEwithMD5andRC2-CBC, PBEwithSHA1andDES-CBC, PBEwithSHA1andRC2-CBC, PBEwithSHA-1and128bitRC4, PBEwithSHA-1and40bitRC4, PBEwithSHA-1and3-keyDESEDE-CBC, PBEwithSHA-1and2-keyDESEDE-CBC, PBEwithSHA- 1 和 128 位 RC2-CBC、PBEwithSHA-1 和 40 位 RC2-CBC、PBEwithHmacSHA-1、PBEwithHmacSHA-224、PBEwithHmacSHA-256、PBEwithHmacRIPEMD128、PBEwithHmacRIPEMD160 和 PBEwithHmacRIPEMD256。

例子：

```
 private static string EncryptPrivateKey(AsymmetricKeyParameter privateKey)
    {
        var encKey  = PrivateKeyFactory.EncryptKey("PBEwithSHA1andDES-CBC", "test".ToCharArray(),
                                                        new byte[256], 1, privateKey);

        return Convert.ToBase64String(encKey);

    } 
```

# ruby-on-rails - ruby on rails render deos找不到文件

> ID：11597693
> 
> 赞同：1
> 
> 时间：2012-07-22T04:06:38.563
> 
> 标签：ruby-on-rails, forms, partial-views, render

我是 ruby​​ on rails 的新手。

在视图/事件中，我有“_form.html.erb”，它通过以下代码呈现在“new.html.erb”中：

```
<%= render "form" %> 
```

现在我想在同一文件夹（视图/事件）中的“index.html.erb”中呈现“_form.html.erb”。但我收到错误“缺少模板”。

我想我必须在控制器中添加一些东西，请帮助我在其他视图页面中呈现表单...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:35:05.187

你可以试试

```
<%= render "events/form" %> 
```

我之前遇到过这个问题，现在解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:29:24.823

您“通常”不会在索引操作中呈现表单。大多数表单部分都在语义上设置为期望 a `@my_resource`，但是如果您以 rails 方式进行所有操作，则在索引操作期间将不会有实例变量。有很多方法可以做到这一点，但这可能是最快的。

您的索引操作中可能有一些收藏（假设您正在使用书籍）：

```
#views/books/index.html.erb
<% @books.each do |book| %>
   ...
   <%= render "form" %>
   ...
<% end %> 
```

您可以在呈现表单之前在某处设置一个实例变量：

```
#views/books/index.html.erb
<% @books.each do |book| %>
   <% @book = book %>
   ...
   <%= render "form" %>
   ...
<% end %> 
```

另一种方法是通过将一些当地人传递给部分人。您必须更改所有引用`_form`以使用局部变量。然后你可以像这样调用渲染：

```
<%= render :partial => "form", :locals => {:book => book } %> 
```

# uitableview - iOS，sqlite3 参数化 where 子句

> ID：11597696
> 
> 赞同：1
> 
> 时间：2012-07-22T04:06:48.410
> 
> 标签：uitableview, ios4, sqlite

我对 iOS 很陌生。我有一个从 sqlite3 数据库填充的 UITableview。现在我想让，当单击单元格时，与该单元格相关的其他数据库数据应显示在另一个视图中。我不知道如何为选择查询编写多个参数化的 where 子句。这是我想要的查询。在这里`nebNO`，`spNO`和`ModelName`值来自 3 个参数。

`SELECT nebType,nebName,spType,spName FROM All WHERE nebNO='1' AND spNO='1' AND ModelName='MOD144'`

请帮助我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T05:00:15.127

如果我理解正确，您正在尝试创建一个包含您的 where 子句的字符串？如果是这样，那么它应该看起来像这样（假设所有三个参数都是对象）：

```
NSString *whereClause = [NSString stringWithFormat:@"SELECT nebType,nebName,spType,spName FROM All WHERE nebNO='%@' AND spNO='%@' AND ModelName='%@'", parameter1, parameter2, parameter3];
char *sql = [whereClause UTF8String]; 
```

您还可以创建和编译一次 select 语句并将值绑定到已编译的语句，但是由于这仅在响应用户单击行时执行一次，因此您不会获得任何性能优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T18:30:27.053

对我来说，这是可行的。

选择 nebType,nebName,spType,spName 从所有 WHERE nebNO LIKE '1' AND spNO LIKE '1' AND ModelName LIKE 'MOD144'

我希望它对某人有所帮助。如果有帮助，请投票。

# objective-c - NSFetchedResultsController 没有响应更新

> ID：11597703
> 
> 赞同：1
> 
> 时间：2012-07-22T04:07:52.543
> 
> 标签：objective-c, ios, core-data, delegates, nsfetchedresultscontroller

我有一个`NSFetchedResultsController`，`UITableView`它管理数据的显示。主实体有一个或多个关系，当其中任何一个关系中的数据更新时，表格视图也会更新。我的问题是：如果我在这样的关系中更改数据，一切都会正确更新：

```
mainEntity.relationship.name = @"Random new name"; 
```

但是，如果我在关系的关系中更改数据，`NSFetchedResultsController`则不会收到该更新：

```
mainEntity.relationship.relationship2.relationship3.name = @"New Random Name"; 
```

不会将更新发送给`NSFetchedResultsController`委托人。

如果关系的数据关系发生变化，我需要做些什么来确保委托接收更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:59:09.227

核心代码，

获取请求与单个实体相关联。更新与该实体相关联。这就是为什么 Core Data 有时需要非规范化数据，即只用于表格视图的自定义实体。您不妨考虑创建一个特殊目的实体。

安德鲁

# c++ - 基于常量重载

> ID：11597704
> 
> 赞同：1
> 
> 时间：2012-07-22T04:08:04.353
> 
> 标签：c++, constants

我正在阅读 Essential C++。在 4.3 节中，作者举了一个例子来解释**const的用法**

```
class val_class {
public:
    val_class(const BigClass &v)
        : _val(v) {}

    const BigClass& val() const {return _val;}
    BigClass& val() {return _val;}
};

void example(const BigClass *pbc, BigClass &rbc)
{
    pbc->val();
    rbc.val();
} 
```

在上述代码段中，作者基于 constness 重载了函数 val。然后`pbc->val()`将调用 const 实例，`rbc.val()`将调用非 const 实例。

*pbc*是**BigClass**类型的const 指针。我们如何保证**BigClass**有一个成员函数*val*？**示例函数中的BigClass**是否应该替换为**val_class**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:17:17.250

必须是这样：[您的完整示例](http://books.google.com/books?id=PQBDY5PHRxMC&pg=PA111&lpg=PA111&dq=val_class+BigClass&source=bl&ots=5d1D2BPtac&sig=IEkyx0Puwk4KAi6p94TOIV-yFso&hl=en&sa=X&ei=Rn4LUIqEGaPW2gWCh9Ex&ved=0CGcQ6AEwAw#v=onepage&q=val_class%20BigClass&f=false)

这显然只是书中的一个错字。正如您自己想出的那样，该`example`函数应如下所示

```
void example(const val_class *pbc, val_class &rbc)
{
    pbc->val();
    rbc.val();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T04:21:12.930

必须替换，因为`BigClass`不能派生自`val_class`（`val_class`不能存储`reference`或对象`const-reference`，`BigClass`因为在这种情况下代码将无法编译，因此它只能存储`BigClass`对象，然后`BigClass`不能派生自，`val_class`因为不能存储未声明/非完整声明类型的对象）。

# android - 运行导出 apk 时出现“java.lang.ClassNotFoundException”错误

> ID：11597707
> 
> 赞同：2
> 
> 时间：2012-07-22T04:09:36.620
> 
> 标签：android

我在 Eclipse 中编写了一个 android 应用程序并在我的手机上使用运行命令。

它在我的手机上运行成功。

但是我使用 [Android Tools -> Export Signed Application Package...] 来导出我的应用程序。

然后使用 [adb install] 在我的手机上安装 apk 并运行。

我收到错误消息：

```
07-22 11:20:43.537: E/AndroidRuntime(20216): Caused by: java.lang.ClassNotFoundException: com.mytest.MyActivity in loader dalvik.system.PathClassLoader[/data/app/com.mytest-1.apk] 
```

在【Java Build Path -> Order and Export】中，我已经全选了。

在 AndroidManifest.xml 中，应用程序属性没有 android:name。

我不知道如何解决这个问题。

我在手机上成功使用 Eclipse 运行，为什么我导出应用程序时运行错误？

请帮助我，谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-15T07:48:32.867

我遇到了同样的问题，经过 2 小时的研究，我设法通过删除“bin”和“gen”文件夹并重建项目来解决这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T04:45:01.617

根据我的研究，发生这种情况似乎有多种原因。你有一个lib文件夹吗？如果是这样，请将其更改为“libs”。

你启用了proguard吗？如果是这样，可能会导致问题。还可以尝试在您的构建路径、顺序和导出中取消选中“Android #.#.#”和“Android 依赖项”。

查看这个线程，它有许多其他可能的解决方案，其中很多都涉及在清单文件中设置正确的 ActivityName。 [工作应用程序上的 java.lang.ClassNotFoundException](https://stackoverflow.com/questions/3781151/java-lang-classnotfoundexception-on-working-app)

如果这些解决方案仍然不能解决问题，请尝试这些线程。

[Android：无法实例化活动/ClassNotFoundException](https://stackoverflow.com/questions/4820554/android-unable-to-instantiate-activity-classnotfoundexception)

[ClassNotFoundException Android](https://stackoverflow.com/questions/3090009/classnotfoundexception-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T23:25:40.120

我必须做的只是重新进行构建/导出过程，而不对代码进行任何修改。它对我有用，我所做的是将它导出两次。在我的第一次导出中，构建 APK 的文件大小较小，而第二次导出（对代码/配置没有任何修改）产生了稍大的文件大小（大约 200KB 差异）。

构建中的这个错误非常昂贵，会在你的经理面前杀死你，并且应该由 Android/Eclipse 团队真正修复。有点烂

# java - Android：将参数传递给线程

> ID：11597708
> 
> 赞同：1
> 
> 时间：2012-07-22T04:09:54.363
> 
> 标签：java, android, multithreading

如何将上下文和名称字符串作为参数传递给新线程？

编译错误：

线

```
label = new TextView(this); 
```

构造函数 TextView(new Runnable(){}) 未定义

行“ `label.setText(name);`”：

不能在不同方法中定义的内部类中引用非最终变量名

代码：

```
public void addObjectLabel (String name) {
    mLayout.post(new Runnable() {
        public void run() {
            TextView label;
            label = new TextView(this);
            label.setText(name);
            label.setWidth(label.getWidth()+100);
            label.setTextSize(20);
            label.setGravity(Gravity.BOTTOM);
            label.setBackgroundColor(Color.BLACK);
            panel.addView(label);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T04:18:53.730

需要声明`name`为`final`，否则不能在内部[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)中使用。

此外，您需要声明`this`要使用哪个；就目前而言，您正在使用`Runnable`对象的`this`引用。你需要的是这样的：

```
public class YourClassName extends Activity { // The name of your class would obviously be here; and I assume it's an Activity
    public void addObjectLabel(final String name) { // This is where we declare "name" to be final
        mLayout.post(new Runnable() {
            public void run() {
                TextView label;
                label = new TextView(YourClassName.this); // This is the name of your class above
                label.setText(name);
                label.setWidth(label.getWidth()+100);
                label.setTextSize(20);
                label.setGravity(Gravity.BOTTOM);
                label.setBackgroundColor(Color.BLACK);
                panel.addView(label);
            }
        });
    }
} 
```

但是，我不确定这是更新 UI 的最佳方式（您可能应该使用`runOnUiThread`and `AsyncTask`）。但是以上应该可以解决您遇到的错误。

# jquery - 仅当多个事情已完全执行时才执行

> ID：11597709
> 
> 赞同：1
> 
> 时间：2012-07-22T04:10:07.270
> 
> 标签：jquery

假设我希望仅在完全执行一件事时才执行某些操作，我执行以下操作：

```
$('#content-1').fadeIn(function() {
   $("menue").slideUp();
}); 
```

但是，如果某些事情只有在具有不同动作的多个事情已经完全执行后才应该被执行呢？像这样：

```
$('#content-1').fadeIn();
$('#content-2').fadeOut();
function() {
    $("menue").slideUp();
} 
```

如果没有单独和重复，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:12:24.223

您将使用回调：

```
$('#content-1').fadeIn(500, function() {
    $('#content-2').fadeOut(500, function() {
        $("menue").slideUp();
    });
}); 
```

或者，如果需要同时发生多个事件：

```
var content1_complete = false;
var content2_complete = false;
var callback = function() {
    $("menue").slideUp();
}
$('#content-1').fadeIn(500, function() {
    content1_complete = true;
    if (content1_complete && content2_complete) {
        callback();
    }
}
$('#content-2').fadeIn(500, function() {
    content2_complete = true;
    if (content1_complete && content2_complete) {
        callback();
    }
} 
```

但请注意，如果事件花费相同的时间，它们也应该同时完成，在这种情况下，不需要有这样的标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T04:14:51.960

我们*可以*为每个回调设置一些全局标志或其他东西来做一些花哨的事情，但是，如果操作的确切持续时间不重要，到目前为止最简单的解决方案是将它们设置为具有相同的持续时间，然后只将回调放在一个上：

```
$('#content-1').fadeIn(400);
$('#content-2').fadeOut(400, function() {
   $("menue").slideUp();
}); 
```

由于听起来您正在逐渐淡入`content-1`replace `content-2`，因此无论如何，这可能是最美观的行为。

请注意，默认情况下，jQuery 为所有淡入淡出动画分配相同的默认持续时间`400`，因此即使根本不指定持续时间，它也可以工作——尽管我喜欢明确定义它们，这样未来的开发人员就不需要运行和检查文件以确保。即便如此，这应该可以正常工作：

```
$('#content-1').fadeIn();
$('#content-2').fadeOut(function() {
   $("menue").slideUp();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T04:17:43.167

**更新：**

您可以使用`promise()`和`done()`方法：

```
$('#go').click(function () {
    $('#content-1').fadeIn(1000);
    $('#content-2').fadeOut(5000);
    $('#content-1, #content-2').promise().done(function(){
        $("#menu").slideUp();
    })
}); 
```

[演示](http://jsfiddle.net/cNXvD/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T04:17:58.513

像这样

```
var myanimationstate=0;
$('#content-1').fadeIn(function(){
    if(myanimationstate){
        myslideup();
        myanimationstate=0;
    }else{
        myanimationstate++;
    }
);
$('#content-2').fadeOut(function(){
    if(myanimationstate){
        myslideup();
        myanimationstate=0;
    }else{
        myanimationstate++;
    }
);
function myslideup() {
    $("menue").slideUp();
} 
```

# php - 如何回显关联数组的数组？

> ID：11597713
> 
> 赞同：0
> 
> 时间：2012-07-22T04:11:12.153
> 
> 标签：php, arrays, associative-array

我有这个代码：

```
foreach($html->find('ul.results') as $article) {
            $item['date']     = $article->find('span.result_date', 0)->plaintext;
            $item['title']    = $article->find('a.result_title', 0);
            $item['text'] = $article->find('span.result_text', 0)->plaintext;
            $item['read'] = $article->find('a.read_more', 0);
            $articles[] = $item;
    }
        foreach ($articles as &$item) {
            while ($i < 5) {
                echo $item['date']."&nbsp;&nbsp;&nbsp;";
                echo $item['title'].'</br>';
                echo $item['text']."&nbsp;";
                echo $item['read'].'</br></br>';
            $i++;
        }
    } 
```

我试图回应结果。现在第二个 foreach 没有做任何事情。它只显示五篇相同的文章。文章格式为：日期、标题、正文、阅读全文。我正在尝试对前五个 $articles 进行生态处理，但我找不到合适的方法来做到这一点，这不是 print_r。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:25:46.320

for each 中的整个循环只会在第一个元素上循环 5 次，移动到下一个元素并循环 5 次，等等。

尝试这样的事情：

```
$i = 0;
foreach ($articles as $item){
    echo items stuff...
    $i++;
    if ($i == 5) break;
} 
```

# javascript - 在javascript中向后看？

> ID：11597718
> 
> 赞同：4
> 
> 时间：2012-07-22T04:12:27.783
> 
> 标签：javascript, regex

我想使用正则表达式来匹配和替换我的文件名和右括号之间的任何内容。

我写了一个正则表达式：

```
/(?<=imagecheck.php)[^)]*/ 
```

这适用于 php，但不适用于 Javascript。

...我会在 JS 中怎么做？

例子：

```
 input string example 1: url(127.0.0.1/imagecheck.php)
 input string example 2: url(127.0.0.1/imagecheck.php?boost=9881732213826123918238)
 outcome string example: url(127.0.0.1/imagecheck.php?reload=oh_yes_plx&boost=123810982346023984723948723023423) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:20:40.763

Javascript 不支持后视。您可以改为使用捕获组来捕获文本`"imagecheck.php"`：

```
.match(/imagecheck.php([^)]*)/) 
```

结果将在返回数组的索引 1 中（如果有匹配项）。

这是删除之后的任何内容的示例`"imagecheck.php"`

```
.replace(/(imagecheck.php)[^)]*/, "$1") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T04:26:06.813

如果没有 javascript 中的后视功能，您可以像这样替换文件名和结束括号之间的所有内容：

```
str = str.replace(/imagecheck.php\([^)]*\)/, "imagecheck.php(whatever)"); 
```

或者，您可以使用捕获组和编号引用来避免重复初始模式：

```
str = str.replace(/(imagecheck.php)\([^)]*\)/, "$1(whatever)"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:57:15.337

XRegExp 不直接支持lookbehind。为此，您需要使用 @arxanas 之前链接到的插件脚本：http: [//blog.stevenlevithan.com/archives/javascript-regex-lookbehind](http://blog.stevenlevithan.com/archives/javascript-regex-lookbehind)。此外，XRegExp 不在其模式字符串中使用正斜杠分隔符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T04:26:14.117

尽管 Javascript 本身不支持正则表达式中的后视，但我们*可以*[引入 XRegExp](http://xregexp.com/)，一个更强大的 Javascript 正则表达式引擎。

```
var pattern = XRegExp('/(?<=imagecheck.php)[^)]*/', 'g'); // g is the global flag
XRegExp.replace(input, pattern, replacement); 
```

# javascript - 带有交叉过滤器的 D3 变得非常缓慢的大型数据集

> ID：11597719
> 
> 赞同：0
> 
> 时间：2012-07-22T04:13:26.280
> 
> 标签：javascript, canvas, svg, d3.js, crossfilter

我有一个类似于交叉过滤器示例的可视化，除了交叉过滤器选择动态更新时间线。该代码适用于大约 100 个元素。我用接近 5000 个元素测试了代码，当应用/更改画笔来过滤尺寸时，它变得非常慢。我想知道性能问题在哪里以及如何解决它。大约 5000 个 svg 矩形的时间线渲染得很好。在应用和调整画笔大小时，交叉过滤器直方图非常缓慢（不是创建直方图，而是在调整大小和应用画笔时）。我什至在画笔更改后禁用了更新时间线，这对性能没有帮助。我正在使用类似于交叉过滤器示例中的 svg 路径方法生成交叉过滤器直方图。我不确定为什么绘制画笔需要这么长时间。

它可能与交叉过滤器有关吗？关于数据的注释：虽然交叉过滤器中只有几千个数据元素，但元素非常大（包含大约一百个左右的属性）。不确定这是否会导致问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:53:36.493

通常，您所描述的性能问题将由浏览器渲染生成的 SVG 而不是 Javascript 中数据的实际处理引起。您可以尝试的一件事是使用 HTML 画布而不是 SVG。请注意，将您的代码转换为这样做并不是一个简单的过程。

# php - PHP isset 函数

> ID：11597722
> 
> 赞同：1
> 
> 时间：2012-07-22T04:14:07.000
> 
> 标签：php

我相信我`isset`对 PHP 中的函数有点困惑。我正在尝试使用此函数来确定表单中的字段是否是`null`...我的印象是该`isset`函数会检查字段中是否有值...但我相信该`isset`函数仅确定是否传递给它的东西是存在的。

例如。

如果我有一个 name 属性设置为“day”的表单输入字段。我会`isset($_GET['day']);`用来确定表单输入字段是否不是`null`？或者`isset`只是检查'day'是否存在而不检查它通过的那个值？

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T04:50:41.170

从 PHP`isset()`页面：

> [isset() 确定] 变量是否已设置且不为 NULL。

这意味着：

```
$var1;
$var2 = NULL;
$var3 = 0;
$var4 = 'test';
isset($var1); //false
isset($var2); //false
isset($var3); //true; note that if($var3) still returns false
isset($var4); //true
isset($var0); //false 
```

总结一下，如果变量未设置（因此是函数名称）或包含作为值，则`isset()`返回。要返回 true，变量必须既存在又包含实际值（包括布尔值）。`FALSE``NULL``isset()``false`

在您的情况下`$_GET['day']`，您可以使用`isset()`来检查一个值是否已实际传递给它（即，它不为空）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T04:17:27.480

Isset 只检查是否定义了变量。用于`empty`知道它是 null 还是 undefined 或类似的东西。

```
if(!empty($_GET['day']))
    //Stuff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T04:18:06.267

完全正确，isset() 函数只是检查变量“day”是否存在。为了检查值是否存在或为空，您必须使用 empty() 函数。

# ruby - Ruby 的科学模块

> ID：11597727
> 
> 赞同：2
> 
> 时间：2012-07-22T04:15:10.657
> 
> 标签：ruby, numpy, mod-wsgi

我在大型机器学习项目中使用了很多 Python 模块，例如 Numpy。以前，我将 Django 用于 Web 应用程序，并将 mod_wsgi 作为前端。现在，有人提出转移到 Ruby on Rails 的案例。Ruby 是否有类似的库可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T21:00:25.847

正如 Benjamin Tan 所指出的，[SciRuby](http://sciruby.com)正在为此努力。[评论者正确地指出，在sciruby gem](http://github.com/SciRuby/sciruby)上没有做太多工作，但[NMatrix](http://github.com/SciRuby/nmatrix)正处于非常积极的开发中。目标是替换[NArray](http://narray.rubyforge.org/)。

还有很多与 SciRuby 相关的稳定 gem：[Statsample](http://github.com/SciRuby/statsample)、[distribution](http://github.com/SciRuby/distribution)、[minimization](http://github.com/SciRuby/minimization)、[integration](http://github.com/SciRuby/integration)、[Rubyvis](http://rubyvis.rubyforge.org/)（Protovis 的 Ruby 端口）等等。

SciRuby 实际上也刚刚获得了 Google Summer of Code 的支持，几个月前还获得了 Ruby 协会的资助，所以我们希望它会成功。

全面披露：我是 NMatrix 的主要开发人员之一，也是 SciRuby 项目的联合创始人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T05:47:55.340

最接近的是[SciRuby](http://sciruby.com/)。

# javascript - Javascript代码的集成测试

> ID：11597730
> 
> 赞同：0
> 
> 时间：2012-07-22T04:16:35.243
> 
> 标签：javascript, web-services, integration-testing

我编写了很多与许多不同的 Web 服务交互的 javascript 代码。我现在需要为它编写集成测试代码。我在集成测试方面的经验是有限的。谁能推荐一些好的工具和在线教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T04:26:29.080

看看这篇文章，我猜这可能会对你有所帮助...... [http://robots.thoughtbot.com/post/4026880618/javascript-integration-testing-example-installing-and](http://robots.thoughtbot.com/post/4026880618/javascript-integration-testing-example-installing-and)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:22:25.113

我们使用黄瓜[http://cukes.info/](http://cukes.info/)所以我们创建了功能测试来测试与服务器的集成。cucumber 用 ruby​​ 运行，如果你想用 JS 来做，试试 cucumberjs 或者zombiejs 和 jasminejs 的组合。需要 NodeJS

# git - Git错误“非单调索引”

> ID：11597738
> 
> 赞同：10
> 
> 时间：2012-07-22T04:18:04.430
> 
> 标签：git, git-extensions

我的`git`设置有一个我推送到的中央存储库。今天我决定使用 来查看中央存储库`Git Extensions`，它说存储库没有提交（几乎就像从未创建存储库一样）。调查这个问题，我试图克隆回购，它给了我一些我从未见过的奇怪错误：

```
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index .git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
error: non-monotonic index C:/Temp/N1/Netduino/.git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
fatal: unable to read tree cc90183a1571664f80712c0376f59afeb681303f 
```

我已经在 Google 上搜索过这个问题，StackOverlow 上还有另一个关于这个问题的问题，但仍然没有答案（[这个问题](https://stackoverflow.com/questions/10707690/git-non-monotonic-index)）。任何人都能够阐明这个问题？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-08T09:40:05.947

我在这种非单调错误中搜索信息并找到了这个链接： http: [//git.661346.n2.nabble.com/Error-non-monotonic-index-after-failed-recursive-quot-sed- quot-command-td7575014.html](http://git.661346.n2.nabble.com/Error-non-monotonic-index-after-failed-recursive-quot-sed-quot-command-td7575014.html)

TL;DR：您删除非单调索引，然后重新索引它。在 Linux 中它将是：

```
> rm .git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.idx
> git index-pack .git/objects/pack/pack-29a18084cf61cd0322a6e9cfd485ce0977348c53.pack 
```

在这之后我不得不运行一些`git gc --prune=now`and `git remote prune origin`，但我之前做过一些其他的操作，所以我可能已经破坏了我的 repo。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T07:13:27.380

（不是一个完整的答案，但至少有一些线索和解决方法）

该错误消息来自[`sha1_file.c`, 方法`check_packed_git_idx()`](https://github.com/git/git/blob/master/sha1_file.c#L478),

```
nr = 0;
index = idx_map;
if (version > 1)
  index += 2; /* skip index header */
for (i = 0; i < 256; i++) {
  uint32_t n = ntohl(index[i]);
  if (n < nr) {
    munmap(idx_map, idx_size);
    return error("non-monotonic index %s", path);
  }
  nr = n;
} 
```

功能[`ntohl`为](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740069%28v=vs.85%29.aspx)：

> ntohl 函数将`u_long`TCP/IP 网络顺序转换为主机字节顺序（在 Intel 处理器上是 little-endian）。
> 
> 该`ntohl`函数`netlong`以反转的字节顺序返回参数中提供的值。如果`netlong`已经在主机字节顺序中，则此函数将反转它。由应用程序决定是否必须颠倒字节顺序。
> 
> 该`ntohl`函数采用 TCP/IP 网络字节顺序（`AF_INET`或`AF_INET6`地址族）的 32 位数字，并以主机字节顺序返回一个 32 位数字。

它由以下方式调用：

*   [`open_pack_index()`](https://github.com/git/git/blob/master/sha1_file.c#L580)， 和
*   [`parse_pack_index()`](https://github.com/git/git/blob/master/sha1_file.c#L973)

[在 SO 问题“ Is the git binary diff algorithm（delta storage）是否标准化？](https://stackoverflow.com/questions/9478023/is-the-git-binary-diff-algorithm-delta-storage-standardized/9478566#9478566) ”中查看包文件的结构：

![打包文件结构](../Images/146d9ebac4341cf534553ffbdbd462cb.png)

第一个也由 调用[`builtin/fsck.c`](https://github.com/git/git/blob/master/builtin/fsck.c#L660-L675)，因此您可以尝试 git fsck --full --progress，以检查您的包文件是否在*本地*损坏，或者它是否实际上是远程 repo 问题。
确保您可以在不同的操作系统和/或不同版本的 Git 上复制该问题。

对于似乎在 GitHub 上分叉的（此处为“Netduino”）repo，通常的解决方法是：

*   克隆另一个叉子，
*   从损坏的仓库中恢复自己的本地修改，添加它们并提交它们
*   `push --force`回到自己的fork，以便通过一个可以正确打包的方式擦除/重置远程历史

# python - 在python中，找到受约束的最小值？

> ID：11597742
> 
> 赞同：0
> 
> 时间：2012-07-22T04:18:30.823
> 
> 标签：python, min

我如何找到索引 idx，使得 dist[idx] 最小，但仅在那些访问 [idx] 为 false 的人中？上下文用于 Dijkstra 算法的实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T04:20:08.933

```
min((idx for idx in indexes if not visited[idx]), key=lambda idx: dist[idx]) 
```

# jquery - jQuery UI 选项卡样式很好 - 现在我怎样才能让它们工作？

> ID：11597744
> 
> 赞同：0
> 
> 时间：2012-07-22T04:18:46.360
> 
> 标签：jquery, jquery-ui, google-maps-api-3, jquery-ui-tabs, jquery-gmap3

讨厌乞讨，但我很难过。在这个[地图网站上](http://tnfc.raganadvertising.ca/)，我无法在弹出信息窗口中使用 UI 选项卡在“电影”、“概要”和“位置”之间切换。使用 jQuery gmap V3，最新版本的 jQuery 和 jQuery UI。在 addMarker 函数的 gmap InfoWindow 中创建 UI 选项卡：

```
$('#map').gmap('addMarker', markers[i]).click(function() {
    var title = $j(this).attr('title');
    $('.tabs').tabs({
        create: function(e, ui){
            console.log('here');
        },
        show: function(e, ui){
            console.log('showing'); 
        },
        select: function(e, ui){
            console.log('WHY U NO WORK');
        }
    }); // init tabs
    $('#map').gmap('openInfoWindow', {'content': $('#'+title).children('.content').html() }, this);
}); 
```

在信息窗口中创建的选项卡样式正确，但不会切换。我试过标签“左修复”的东西：

```
.ui-tabs .ui-tabs-hide {
    position: absolute !important;
    left: -10000px !important;
    display:block !important;
} 
```

……无济于事。我[在这里](http://tnfc.raganadvertising.ca/test/)设置了一个超级简单的测试（取自这个[简短的教程](http://programmingshare-thienle.blogspot.ca/2011/11/multitab-infowidow-in-google-map-v3.html)），效果很好。我可以从哪里开始调试？关于可能出现什么问题的任何建议？可根据要求提供 FTP 凭据！非常感谢您提前...

快速链接：[jQuery gMap 插件](http://tnfc.raganadvertising.ca/wp-content/themes/toolbox/js/jquery.gmap.min.js?ver=2.1.2)| [标记绘图 js](http://tnfc.raganadvertising.ca/wp-content/plugins/tnfc-gmap/js/tnfc.js) | [主题js](http://tnfc.raganadvertising.ca/wp-content/themes/toolbox/js/tnfc_theme.js?ver=1.0) |

# perl - Perl XS 和 C++ 将指针传递给缓冲区

> ID：11597746
> 
> 赞同：5
> 
> 时间：2012-07-22T04:19:23.740
> 
> 标签：perl, xs

我几乎不知道 C++，所以这无济于事，而且我的 XS 也好不了多少。我正在为 C++ 库创建一个 XS 接口，我几乎所有的方法都可以工作，除了一个。

Perl 中的方法应该如下所示：

```
$return_data = $obj->readPath( $path ); 
```

该方法被定义为这个 .h 文件：

```
int readPath(const char* path, char* &buffer, bool flag=true); 
```

如果传入 NULL，“缓冲区”将被分配。

还有两个具有不同签名的附加版本的 readPath，但它们不是我想要的。（有趣的是，当我尝试编译时，它告诉我“候选人”是我不想要的两个。）是因为它不理解“char * &”吗？

有人可以帮助我编写需要的 xsub 吗？

我在 Perl 5.14.2 上。

顺便说一句——我还对 T_IV 使用了类型映射“long long int”。我找不到任何关于如何正确地输入 long long 的文档。有什么建议我应该如何长期打字？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T04:50:33.047

我从未从 C 或 XS 处理过 C++。如果是 C，它将是：

```
void
readPath(SV* sv_path)
   PPCODE:
      {
         char*  path   = SvPVbyte_nolen(sv_path, len);
         char*  buffer = NULL;

         if (!readPath(path, &buffer, 0))
            XSRETURN_UNDEF;

         ST(0) = sv_2mortal(newSVpv(buffer, 0));
         free(buffer);

         XSRETURN(1);
      } 
```

希望这可行，或者您可以对其进行调整以使其正常工作。

* * *

我以为：

*   `readPath`成功/失败返回真/假。
*   `buffer`不分配失败。
*   的释放器`buffer`是`free`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-18T06:31:18.913

问题的第二部分是`long long`（或`long long int`）的 TYPEMAP。

通常`long`至少为 32 位，`long long`至少为 64 位。默认类型映射`long`为`T_IV`. Perl 的等价于`long long`is `T_IV`，也是。

但有时，你不想减少演员阵容的警告。因此，您可以使用`T_LONG`for `long`。`T_LONG`等效于`T_IV`但显式地将返回值强制转换为 type `long`。TYPEMAP 的`T_LONG`描述在 $PERLLIB/ExtUtils/typemap

有了这些知识，您可以编写自己的 TYPEMAP `long long int`：

```
TYPEMAP: <<TYPEMAPS
long long int T_LONGLONG

INPUT
T_LONGLONG
  $var = (long long int)SvIV($arg)

OUTPUT
T_LONGLONG
  sv_setiv($arg, (IV)$var);
TYPEMAPS 
```

# java - 独立 Java 应用程序中内存更改的事务管理

> ID：11597747
> 
> 赞同：0
> 
> 时间：2012-07-22T04:19:57.717
> 
> 标签：java, design-patterns

我有一个独立的 java 应用程序，其中来自 GUI 的一个函数调用将导致不同类的实例变量发生多次更改。我们想为此编写一个事务管理器，以便如果抛出一些异常，则在执行之前在内存中完成更改块被还原。我们当然可以通过在调用之前创建实例变量的副本并在发生异常时还原更改来以一种天真的方式做到这一点，但我正在寻找一些复杂且良好的设计来处理这个问题。

请让我知道是否有人知道一些可用于解决此问题的框架或通用设计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T04:24:15.150

您可以使用 Memento 设计模式来存储对象的状态。如果一切顺利，您将删除最后存储的状态。如果有问题，你恢复上一个状态。这是一个参考（很差）[http://en.wikipedia.org/wiki/Memento_pattern](http://en.wikipedia.org/wiki/Memento_pattern)。试试谷歌了解更多详情。

Memento 的工作方式与您所说的类似，但它形式化了一个架构来提供此功能。

这是经典参考：[http ://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612/ref=sr_1_1?ie=UTF8&qid=1342931128&sr=8-1&keywords=design+patterns](https://rads.stackoverflow.com/amzn/click/com/0201633612)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T16:47:36.487

将对象克隆（通过克隆/序列化和反序列化或其他机制）到事务视图并将状态传播回（隐藏的）已提交实例（结合基于版本计数器的 optimistc 锁定机制）是一种常见的方法。（例如 [https://github.com/JanWiemer/jacis](https://github.com/JanWiemer/jacis)事务对象存储使用它...）

# php - 在其他 PHP 类中使用 PDO 数据库类

> ID：11597756
> 
> 赞同：1
> 
> 时间：2012-07-22T04:21:58.083
> 
> 标签：php

我有一个使用 PDO 的数据库类。这是它的一部分示例：

```
class db {
private $host;
private $username;
private $password;
private $con;
    private $pdo;

public function __construct( $database = "dnname" )
{
    $this->host = "localhost";
    $this->username = "username";
    $this->password = "pass";
            $conStr = "host={$this->host};dbname={$database}";
            try {
                $this->pdo = new PDO( "mysql:$conStr", $this->username, $this->password );
                $this->pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
            }
            catch( PDOException $e ) {
                echo "error ". $e->getMessage();
            }
}

public function fetch_single_row($sql, $data)
{
    if( $data !== null )
        $data = array_values( $data ); // Incase it's an associative array
    $sel = $this->pdo->prepare( $sql );
    $sel->execute( $data );
    $sel->setFetchMode( PDO::FETCH_OBJ );
    $obj = $sel->fetch();
    return $obj;
} 
```

我想在其他类中使用这个类及其功能（它比我包含的更多）。

我尝试了许多不同的方法，但到目前为止唯一*有效的是在每个新类中启动一个新的 db 实例，***我认为这是不好的做法**。例如：

```
class cms {
   function cms(){
       $this->db = new db();
   }

   function is_admin($id) {
    if($this->db->fetch_single_row("SELECT id FROM user WHERE id = ? LIMIT 1", array($id))){
        return true;
    } else {
        return false;
    }
} 
```

在我的 index.php 中，我包含这些类并使用它们：

```
include("db.class.php");
include("cms.class.php");

$cms = new cms();

if($cms->is_admin($id)){
   //code here
} 
```

实现此目的的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T05:10:33.847

看看 Singleton 设计模式，它非常适合 DB 类

我曾经使用过这样的课程很长一段时间

```
 abstract class DB
   {

    protected static $instance;

    protected $db;

    protected static $host = 'host';
    protected static $user = 'user';
    protected static $pass = 'pass';
    protected static $database;

    public static function getInstance()
    {
        if (!isset(self::$instance)) self::$instance = new static();

        return self::$instance;
    }

    protected function __construct()
    {
        $this->db = new PDO(sprintf('mysql:host=%s;dbname=%s', static::$host, static::$database), static::$user, static::$pass);
        $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    }

    public static function db()
    {
        return static::getInstance()->db;
    }

    public function fetch_single_row($sql, $data)
    {
        if( $data !== null )
            $data = array_values( $data ); // Incase it's an associative array
        $sel = self::db()->prepare( $sql );
        $sel->execute( $data );
        $sel->setFetchMode( PDO::FETCH_OBJ );
        $obj = $sel->fetch();
        return $obj;
    }
} 
```

然后，我将为需要连接的每个不同数据库扩展该类

```
class Main extends DB
{
    protected static $database = 'db';
} 
```

然后你可以像这样使用这个类

```
$db = Main::getInstance();
$obj = $db->fetch_single_row($sql, $data); 
```

# ios - 防止 UITableView contentInset 属性影响其 backgroundView？

> ID：11597757
> 
> 赞同：3
> 
> 时间：2012-07-22T04:22:01.433
> 
> 标签：ios, cocoa-touch, uitableview

我将`UITableView`其`backgroundView`属性设置为`UIImageView`显示背景图像。然后我在图像上绘制了一些单元格，一切都很好。

现在我试图在屏幕顶部显示一个栏。为了防止栏覆盖表格视图的顶行，我将其`contentInset`属性设置为`UIEdgeInsetsMake([topBar frame].size.height, 0, 0, 0)`.

问题是，更改`contentInset`似乎也会将背景图像视图向下推，所以我的桌子顶部有一个奇怪的白色间隙。更奇怪的是，只要我滚动表格视图，它就会自行修复。有人知道发生了什么吗？

如果我更改表格`frame`而不是`contentInset`为顶部栏腾出空间，一切正常，但表格视图的背景图像也会向下移动，这使得视图与应用程序中的其他表格视图相比显得不一致没有顶栏。

这就是我在表格方法中设置表格背景的`init`方式：

```
_backgroundImageView = [[UIImageView alloc] initWithFrame:backgroundRect];
[_backgroundImageView setImage:...];
[_backgroundImageView setContentMode:UIViewContentModeBottom];
[self setBackgroundView:_backgroundImageView]; 
```

在视图控制器的`viewDidLoad`

```
[_tableView setContentInset:UIEdgeInsetsMake([_topBarView frame].size.height, 0, 0, 0)]; 
```

**编辑：**好吧，将`setContentInset`移出`viewDidLoad`移入`viewDidAppear:`使其正常工作，除非显示视图，内容插入错误，然后在视图出现后卡入到位。相反，将线移动到`viewWillAppear:`使其行为与以前一样。猜猜之间发生了一些奇怪的事情`viewWillAppear:`，`viewDidAppear:`我不知道......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:02:51.087

您可能只是让您的表格视图透明并在其后面放置一个图像视图。避免其他视图（在您的情况下为顶部栏）的正确方法是设置 frame 属性。

# java - Java 覆盖冲突 - 相同的名称具有不同的返回类型

> ID：11597760
> 
> 赞同：0
> 
> 时间：2012-07-22T04:24:22.370
> 
> 标签：java, conflict, name-collision

我尝试创建一个扩展*File*类（*`java.io.File`*）的类并实现*TreeNode*接口，如下所示：

```
public class mTreeNode extends File implements TreeNode{} 
```

并尝试实现*TreeNode*方法，但发生了冲突。

`public String getParent(){}`on *File*类在返回类型上与`public TreeNode getParent()`on *TreeNode*接口有冲突。

我们该如何解决呢？（例如为什么不能使用 Object 类作为返回类型！）

最后我决定在我的课堂上使用一个文件对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:29:38.747

由于`TreeNode`是一个接口，因此您需要使用其*确切*签名来实现该方法。它是实现它的类与编译器强制执行的外部世界之间的契约。

你可以在这里阅读更多关于它[的信息。](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T05:01:03.627

实现接口的类可以声明[协变返回类型](https://en.wikipedia.org/wiki/Covariant_return_type)。因此，实现接口的类中的返回类型必须与接口匹配，或者是接口的子类。

例如

```
class Foo {
    public String toString() {
        return "foo";
    }
}

interface Interface {
    Foo getFoo();    
}

class Bar extends Foo {
    public String toString() {
        return "bar";
    }
}

class Concrete implements Interface {
    public Bar getFoo() {  // <============= Covariant return type
        return new Bar();
    }
}

public class Example {
    public static void main(String[] args) {
        System.out.println(new Concrete().getFoo());
    }
} 
```

该类将打印`bar`.

# java - Adler32 快速重复

> ID：11597762
> 
> 赞同：4
> 
> 时间：2012-07-22T04:25:05.813
> 
> 标签：java, encryption, cryptography, checksum, adler32

我正在使用 adler32 校验和算法从数据库 id 生成一个数字。因此，当我在数据库中插入一行时，我会获取该行的标识并使用它来创建校验和。我遇到的问题是我只在数据库中插入了 207 次后才生成了一个重复校验和。这比我预期的要快得多。这是我的代码：

```
String dbIdStr = Long.toString(dbId);
byte[] bytes = dbIdStr.getBytes();
Checksum checksum = new Adler32();
checksum.update(bytes, 0, bytes.length);
result = checksum.getValue(); 
```

我在做什么/怎么做有什么问题吗？我应该使用不同的方法来创建唯一的字符串吗？我这样做是因为我不想在 url 中使用 db id ... 对 db 结构的更改将破坏世界上所有的链接。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-22T06:54:35.347

您*不*应该使用 Adler-32 作为哈希码生成器。那不是它的用途。您应该使用具有良好散列属性的算法，除其他外，它可以最大限度地减少冲突的可能性。

您可以简单地使用 Java 的[hashCode](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)方法（在任何对象上）。对于 String 对象，哈希码是字符串的字节值乘以 31 的连续幂的总和。很短的字符串可能会发生冲突，但这不是一个可怕的算法。作为哈希算法，它肯定比 Adler-32 好很多。

就执行时间和哈希码大小而言，使用加密安全哈希函数（如 SHA-256）的建议对于您的应用程序来说肯定是多余的。你应该试试 Java 的 hashCode 看看你得到了多少冲突。*如果2 ^(-n)*概率（其中*n*是哈希码中的位数）看起来比您预期的要频繁得多，那么您可以用更好的概率覆盖它。你可以在[这里找到一个不错的 Java 散列函数](http://partow.net/programming/hashfunctions/index.html)的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:13:13.193

尝试使用像 SHA-256 这样的安全散列函数。如果您发现任何二进制不相等的数据发生冲突，您将在您的银行帐户中获得 1000 美元，并附上赞美。如果/当 SHA-2 被破解并且您*故意*进入冲突时，优惠结束。也就是说，输出是 32 字节而不是 32 位。

# python - 奇怪的链接提取行为

> ID：11597763
> 
> 赞同：1
> 
> 时间：2012-07-22T04:25:33.323
> 
> 标签：python

Python 菜鸟在这里。我正在尝试提取一个链接，特别是亚马逊产品页面上“所有评论”的链接。我得到了意想不到的结果。

```
import urllib2
req = urllib2.Request('http://www.amazon.com/Ole-Henriksen-Truth-Collagen-         Booster/dp/B000A0ADT8/ref=sr_1_1?s=hpc&ie=UTF8&qid=1342922857&sr=1-1&keywords=truth')
response = urllib2.urlopen(req)
page = response.read()
start = page.find("all reviews")
link_start = page.find("href=", start) + 6
link_end = page.find('"', link_start)
print page[link_start:link_end] 
```

该程序应输出： [http://www.amazon.com/Ole-Henriksen-Truth-Collagen-Booster/product-reviews/B000A0ADT8/ref=dp_top_cm_cr_acr_txt?ie=UTF8&showViewpoints=1](http://www.amazon.com/Ole-Henriksen-Truth-Collagen-Booster/product-reviews/B000A0ADT8)

相反，它输出： [http ://www.amazon.com/Ole-Henriksen-Truth-Collagen-Booster/product-reviews/B000A0ADT8](http://www.amazon.com/Ole-Henriksen-Truth-Collagen-Booster/product-reviews/B000A0ADT8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:42:40.410

我得到了与您相同的结果，但这似乎仅仅是因为亚马逊为您的 Python 脚本提供的页面与它为我的浏览器提供的页面不同。我将下载的页面写入磁盘并将其加载到文本编辑器中，果然，链接以`ADT8"`没有所有`/ref=dp_top`内容结束。

为了帮助说服亚马逊为您提供与浏览器相同的页面，您的脚本可能必须更像浏览器（例如，通过接受和发送 cookie）。[mechanize](http://wwwsearch.sourceforge.net/mechanize/)模块可以帮助解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T04:51:19.777

啊好吧。如果您使用伪造用户代理的常用技巧，例如：

```
req = urllib2.Request('http://www.amazon.com/Ole-Henriksen-Truth-Collagen-Booster/dp/B000A0ADT8/ref=sr_1_1?s=hpc&ie=UTF8&qid=1342922857&sr=1-1&keywords=truth')
ua = 'Mozilla/5.0 (X11; Linux x86_64; rv:2.0.1) Gecko/20110506 Firefox/4.0.1'    
req.add_header('User-Agent', ua)
response = urllib2.urlopen(req) 
```

那么你应该得到类似的东西

```
localhost-2:coding $ python plink.py
http://www.amazon.com/Ole-Henriksen-Truth-Collagen-Booster/product-reviews/B000A0ADT8/ref=dp_top_cm_cr_acr_txt/190-6179299-9485047?ie=UTF8&showViewpoints=1 
```

这可能更接近你想要的。

[免责声明：在你做之前一定要确认亚马逊的 TOS 规则允许你做任何事情..]

# iis-7 - 根据 IIS/Sharepoint 服务器中的请求标头允许/阻止传入请求

> ID：11597765
> 
> 赞同：0
> 
> 时间：2012-07-22T04:26:02.290
> 
> 标签：iis-7, sharepoint-2010, http-headers

我有在 IIS 7.5 上运行的共享点站点。我想根据请求标头允许/阻止传入的请求。这是我要实现的条件

这里的 clientId 和 userAgent 是请求的 Headers。

```
String clientId=Request.getHeaderValue('clientID');
String userAgent=Request.getHeaderValue('useragent');

//If clientId and userAgent are empty abort the request

 if(clientId.equals('') && userAgent.equals('')){

//Abort the request
} 

//If clientId is not empty but is not matching my expected value,then abort the    request.
if(!clientId.equals('') && !clientId.equals('1234'){

//Abort the request
}

//If userAgent is not matching my expected value ,then abort the request.
if(!userAgent.equals('myfavbroswer')){

//Abort the request

} 
```

我已经查看了 IIS 中的 URLRewriteModule。它似乎不符合我的目的。

这是我想要实施的粗略逻辑。我是 IIS 服务器和共享点的新手。有人能告诉我我可以把这个逻辑放在哪里来达到我的目的吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:51:40.903

URLRewrite实际上是为了我的目的。你只需要知道如何使用它。我只需要以不同的方式编写我的条件。它允许你制作任何你想要的条件。只是一开始有点混乱。此外，如果您知道正则表达式，那么它会成为一个非常好的模块。

编辑：这个视频让你很好地理解了如何实现这一点。 [http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-video-walkthrough](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-video-walkthrough)

# input - BlueJ 用户输入代码从不编译

> ID：11597773
> 
> 赞同：0
> 
> 时间：2012-07-22T04:27:12.693
> 
> 标签：input, compilation, compiler-errors, bluej

我有一小段代码应该编译并允许用户在终端窗口中输入一个数字（我使用的是 Blue J）。

但是，虽然它确实“编译”，但我永远无法打开、查看终端窗口或与终端窗口交互。相反，我遇到了一个红色的“对象框”。

我已经尝试了一段时间来解决这个问题，但我似乎无法在任何地方找到答案。

这是使用的代码：

```
import java.util.Scanner;
public class PartA
{

    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);
        System.out.println("Input your message: "); //this is the user promot
        String message = input.nextLine();
        System.out.println(message);

    }  
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T04:49:52.770

自从发布以来，我已经找到了这个问题的答案。

当我单击 new PartA() 以在终端窗口中查看程序时，这仅创建了一个对象（红色框）。通过单击 public static void main(String[] args) （本质上是一种方法而不是对象），我能够查看终端窗口并与之交互。

# mongodb - Fedora MongoDB 问题安装

> ID：11597775
> 
> 赞同：1
> 
> 时间：2012-07-22T04:27:54.100
> 
> 标签：mongodb, service, fedora

我已经在 Fedora 17 上安装了 mongoDB，但服务器没有运行。

我在这篇文章[MongoDB service not running in Fedora](https://stackoverflow.com/questions/11081822/mongodb-service-not-running-in-fedora)中遇到了同样的错误， 然后尝试放松这条指令，我又遇到了另一个错误

试图做到这一点

```
 yum --disablerepo=* --enablerepo=fedora,updates install mongodb mongodb-server 

I got this Error
    Transaction Check Error:
  file /usr/bin/bsondump from install of mongodb-2.0.2-10.fc17.x86_64 conflicts with       file from package mongo-10gen-2.0.6-mongodb_1.x86_64

  file /usr/bin/mongo from install of mongodb-2.0.2-10.fc17.x86_64 conflicts with file from package mongo-10gen-2.0.6-mongodb_1.x86_64

  file /usr/bin/mongodump from install of mongodb-2.0.2-10.fc17.x86_64 conflicts with file from package mongo-10gen-2.0.6-mongodb_1.x86_64

  file /usr/bin/mongoexport from install of mongodb-2.0.2-10.fc17.x86_64 conflicts with file from package mongo-10gen-2.0.6-mongodb_1.x86_64

  file /usr/bin/mongofiles from install of mongodb-2.0.2-10.fc17.x86_64 conflicts with file from package mongo-10gen-2.0.6-mongodb_1.x86_64

  file /usr/bin/mongoimport from install of mongodb-2.0.2-10.fc17.x86_64 conflicts with file from package mongo-10gen-2.0.6-mongodb_1.x86_64 
```

来自安装 mongodb-2.0.2-10.fc17.x86_64 的文件 /usr/bin/mongorestore 与来自包 mongo-10gen-2.0.6-mongodb_1.x86_64 的文件冲突

```
 file /usr/bin/mongostat from install of mongodb-2.0.2-10.fc17.x86_64 conflicts with file from package mongo-10gen-2.0.6-mongodb_1.x86_64

  file /usr/bin/mongotop from install of mongodb-2.0.2-10.fc17.x86_64 conflicts with file from package mongo-10gen-2.0.6-mongodb_1.x86_64 
```

来自安装 mongodb-server-2.0.2-10.fc17.x86_64 的文件 /etc/sysconfig/mongod 与来自包 mongo-10gen-server-2.0.6-mongodb_1.x86_64 的文件冲突

```
 file /usr/bin/mongod from install of mongodb-server-2.0.2-10.fc17.x86_64 conflicts with file from package mongo-10gen-server-2.0.6-mongodb_1.x86_64

  file /usr/bin/mongos from install of mongodb-server-2.0.2-10.fc17.x86_64 conflicts with file from package mongo-10gen-server-2.0.6-mongodb_1.x86_64 
```

## 错误摘要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T08:57:43.090

看起来您已经为 MongoDB 2.0.6 安装了[10gen 包](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-redhat-centos-or-fedora-linux/)。冲突是由于尝试安装默认的 Fedora 打包版本的 MongoDB（错误消息中的 2.0.2）引起的，该版本包含同名的二进制文件。

您应该能够以root 身份或使用 sudo[启动 MongoDB 服务，而不是重新安装：](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-redhat-centos-or-fedora-linux/#start-mongodb)

```
service mongod start 
```

使用 10gen 打包安装，您应该会发现：

*   `/etc/mongod.conf`用于更改配置选项
*   默认数据目录：`/var/lib/mongo`
*   默认日志文件目录：`/var/log/mongo`
*   初始化脚本位于：`/etc/rc.d/init.d/mongod`

# dynamics-crm-2011 - CRM 2011 用户登录历史

> ID：11597777
> 
> 赞同：2
> 
> 时间：2012-07-22T04:28:36.690
> 
> 标签：dynamics-crm-2011, crm, audit

我想跟踪所有用户的登录历史。因为，从 UR5 开始，通过启用审核用户访问可以使用此功能。现在，我在此处引用的 CRM 2011 的 a/c “在接下来的 4 小时内可能不会记录此用户对 MS Dynamics CRM 的后续访问”，下面的快照仅供参考：-

![用户访问表单](../Images/bd40b42e8353f3a1ff68ee393211e1c8.png)

但是，我们的客户指出，这个故事并不是上图所要讲述的。正如他们提到的，审核历史记录是在 4 小时过去之前为同一用户记录的。几乎在 6 分钟的间隔内，如下所示：-

![用户访问网格](../Images/841148229fd18c9dd669627b99094692.png)

用户访问的审计历史记录看起来像是基于一些随机的。因为，我不是随机理论的忠实粉丝，所以我很想找到它背后的化学反应。

谁能帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:03:04.440

据我了解，这是对同一实体记录的访问而没有任何更改。所以上面的截图与 2 个唯一的用户实体记录有关。

*   例如，如果您打开一个实体 - 1 条审计记录
*   如果您刷新实体 - 没有审计日志（除非 4 小时过去）
*   如果其他人更改了实体记录然后您刷新 - 1 个审核日志
*   如果您为同一实体打开另一条记录 - 1 个审核日志

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T08:53:18.557

实体记录可能在上午 11:40 被系统更改，然后发生用户登录。您可能需要更深入地调查此系统更改，以找出实际更改的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-22T10:09:09.033

有两种方法可以评估有多少用户登录到 CRM：

*   分析 IIS 日志
*   审计用户访问（自 CRM 2011 RU5 起可用）

阅读这篇文章：[http ://dynamics.co.il/auditing-users-access-crm-2011/](http://dynamics.co.il/auditing-users-access-crm-2011/)

# javascript - 如何将 spin.js 添加到对话框

> ID：11597778
> 
> 赞同：0
> 
> 时间：2012-07-22T04:28:36.770
> 
> 标签：javascript, jsf-2

为这个问题道歉，但我对 JavaScript 的了解很少。

用户按下按钮后会弹出一个对话框，所以我想将 spin.js 添加到对话框中。

对话框 jsf 文件：

```
<script type="text/javascript">
    function showStatus() {
        document.body.style.cursor = 'wait'; 
        statusDialog.show();
    }

    function hideStatus() {
        document.body.style.cursor = 'default';
        statusDialog.hide();
    }
</script>

<p:commandButton id="genButton" 
        value="Generate Files"
        widgetVar="startButton1" 
        disabled="#{נean.disableButton}" 
        actionListener="#{bean.generateUdm}" 
        onclick="PrimeFaces.monitorDownload(showStatus, hideStatus)"
        ajax="false"
        style="width:200px" 
        icon="ui-icon-shuffle">
    <p:fileDownload value="#{bean.streamedContent}"/>
</p:commandButton>

<p:dialog modal="true" header="Generating fILE" showHeader="true"
        position="center" 
        widgetVar="statusDialog" 
        draggable="false" 
        closable="false"
        resizable="false">

        ????????????? ADD SPIN ???????????
</p:dialog> 
```

我设法将旋转添加到我的网络应用程序中，但不是通过对话框。

我希望能得到一些代码示例。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-22T06:16:01.310

如果您想要的只是将加载图像添加到对话框中，为什么不放一个简单的`gif` [（可以从谷歌获得一个](https://www.google.com/search?q=ajax%20image&hl=en&rlz=1C1CHEU_enIL465IL465&prmd=imvns&source=lnms&tbm=isch&sa=X&ei=O5kLUN-fEpG5hAeu4tGGCg&ved=0CEUQ_AUoAQ&biw=1920&bih=912#hl=en&rlz=1C1CHEU_enIL465IL465&tbm=isch&q=ajax%20loading%20gif&revid=1493017729&sa=X&ei=R5kLUIKCLs-2hAehv4H4CQ&ved=0CEUQgxY&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=d6927dd21d265bd7&biw=1920&bih=912)或自己生成一个[Ajaxload - Ajax 加载 gif 生成器](http://ajaxload.info/)）

并使用简单`<h:graphicImage`来展示它......

[JSF 2 图形图像示例](http://www.mkyong.com/jsf2/jsf-2-graphicimage-example/)

?

# c - Does for loop in c only can have one statement?

> ID：11597783
> 
> 赞同：-1
> 
> 时间：2012-07-22T04:30:02.570
> 
> 标签：c, for-loop

Ruby's for/in loop can have many statement:

```
for a in 1..2 do
  expression 1
  expression 2
  ..
end 
```

But it seems for loop in C can only have one:

```
for (a = 0; a < 10; a ++) expression 1; 
```

Is there any way to make multiply statement in the for loop in C?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T04:34:21.513

Yes, formally speaking all loop statements in C take only *one* statement as the loop body. The same is true for branching statements (like `if`) and virtually all other statements in C.

However, that *one* statement can be a *compound* one. A compound statement begins with `{`, ends with `}` and contains an arbitrary number of nested statements inside. (Note that there's no `;` at the end of compound statement.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T04:31:24.660

Use braces for the body of the loop:

```
for (a = 0; a < 10; a++) 
{
    doSomething();
    doSomethingElse();
} 
```

This concept extends to other things, like `if`, as well. This should be mentioned right alongside the `if` and `for` themselves in any book, etc.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T04:31:50.773

You need to learn C syntax. You put them in a block

```
for (...) {
   expression 1;
   expression 2;
} 
```

# jquery - 使用 Rails 3.2 和 AJAX 将多个文件直接上传到 Amazon S3（非闪存上传解决方案）

> ID：11597784
> 
> 赞同：5
> 
> 时间：2012-07-22T04:30:05.140
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, file-upload, amazon-s3

这个问题困扰了我好几个小时，我似乎无法找到解决方案。

我有一个 rails 3.2 应用程序，它允许用户使用 carrierwave_direct、fog 和carrierwave（carrierwave_direct 的依赖项）将文件上传到 Amazon S3 帐户。使用carrierwave_direct 允许用户通过直接将文件POST 到Amazon S3 来跳过将文件上传到服务器（节省服务器处理和超时，如Heroku 处理大文件）。

如果您所做的只是选择 1 个文件，将其上传到亚马逊，并想要一个重定向到您提供给亚马逊的 URL，那么它工作正常。它通过将表单发布到 Amazon S3 来实现此目的，Amazon 使用 URL 中的一些参数响应提供的 URL（您在表单中指定此 URL），然后将这些参数存储为指向模型中 Amazon 上文件的指针。

所以生命周期是：选择 1 个文件，POST 到 Amazon，Amazon 用一个 URL 响应，将您发送到另一个页面，然后您可以保存一条带有指向 Amazon 文件的指针的记录。

我一直想弄清楚的是如何允许选择和上传多个文件并更新上传进度？我正在尝试使用纯 javascript（使用现代浏览器提供的文件 API）来做到这一点，所以我不想要任何 3rd 方工具。此外，为了深入学习这一点，我避免使用任何插件，并尝试自己编写代码。

我试图获得的功能是：

1.  用户看到带有文件字段（或拖放）的表单
2.  用户选择多个文件（单击文件字段或拖放）
3.  使用 Javascript（还没有服务器），构建一个要上传的选定文件队列（仅文件名和大小，使用浏览器文件 API）
4.  用户然后单击“开始上传”按钮
5.  遍历队列中的每个文件并将文件 POST 到 Amazon S3；亚马逊将使用 URL 响应每个单独的 POST，并且该 URL 需要通过 Javascript 处理，而不是作为标准请求；亚马逊提供的 URL 将创建一条记录，存储指向亚马逊文件的指针；创建记录后，代码将转到队列中的下一个文件，直到完成。

在这一点上，我什至可以不用单独的进度条；我很乐意在不刷新页面的情况下将多个文件发布到 Amazon S3。

我不偏爱任何宝石。实际上，如果我真的希望以特定的方式完成，我实际上担心我将不得不从头开始编写我想做的事情。目标是通过 AJAX 将多个文件上传到 Amazon S3 帐户。即使是关于如何解决问题的一般概念，我也会欣喜若狂。我花了很多时间在谷歌上搜索这个，但我还没有找到任何我想要的解决方案。任何帮助都将不胜感激。

**编辑 2014-03-02**

Raj 问我是如何实现多重上传的。已经很长时间了，我不记得我所做的一切背后的所有“为什么”（无论如何可能是糟糕的代码，因为这是我的第一次），但这就是我正在做的事情。

我上传的模型是一个 Testimonial，它的关联图像存储在 Amazon S3 中。它允许用户选择多个图像（我认为它们实际上是我转换为图像的 PDF 文件）并将它们拖放到屏幕上。上传时，我显示了一个模式，向用户提供关于需要多长时间的反馈。

我不会假装记得我在这方面做了很多事情，但如果有帮助，请随意使用它。

```
# Gemfile
# For client-side multiple uploads
gem "jquery-fileupload-rails"

# For file uploads and Amazon S3 storage
gem "rmagick"
gem "carrierwave"
gem "fog" 
```

这是视图：

```
# app/views/testimonials/new.html.erb
<div id="main" class="padded">
  <div class="center">
    <div id="dropzone">
      Click or Drop Files here to Upload
    </div>

    <%= form_for @testimonial do |f| %>
      <div class="field">
        <%= file_field_tag :image, multiple: true, name: "testimonial[image]", id: "testimonial_image" %>
      </div>
    <% end %>
  </div>
</div>

<div id="mask"></div>
<div id="modal">
  <h1>
    Uploading <span id="global-upload-count">0</span> Files...
  </h1>
  <div id="global-progress">
    <div id="global-progress-bar" style="width: 0%">
      <div id="global-progress-percentage">0%</div>
    </div>
  </div>
  <div id="global-processing">
    <span class="spinner"></span> Processing...<span id="global-processing-count">0</span> sec
  </div>
</div>

<script id="template-upload" type="text/x-tmpl">
  <div class="upload">
    {%=o.name%} ({%=o.readable_size%})
    <div class="float-right percentage"></div>
    <div class="progress"><div class="bar" style="width: 0%"></div></div>
  </div>
</script> 
```

和 JS：

```
number_to_human_size = (bytes) ->
  sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']
  i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)))
  return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i]

dropzone_hover = (e) ->
  e.preventDefault()
  $(this).addClass("dropzone-hover")

dropzone_leave = (e) ->
  e.preventDefault()
  $(this).removeClass("dropzone-hover")

jQuery ->
  global_count = 0
  seconds_to_process = 0
  processing_factor = 5 # seconds to convert/process each uploaded file

  $("#testimonial_image").hide()

  dropzone = $("#dropzone")

  dropzone.bind "click", (e) ->
    $("#testimonial_image").click()

  dropzone.bind("dragover", dropzone_hover)
  dropzone.bind("dragleave", dropzone_leave)
  dropzone.bind("drop", dropzone_leave)

  $("#new_testimonial").data("global-count", "0")

  $("#new_testimonial").fileupload
    dropZone: $("#dropzone")
    maxFileSize: 5000000 # 5 MB
    dataType: "script"

    add: (e, data) ->
      file = data.files[0]
      file.readable_size = number_to_human_size(file.size)
      data.context = $(tmpl("template-upload", file).trim())
      $("#new_testimonial").append(data.context)
      data.submit()
      global_count += 1

    progress: (e, data) ->
      if data.context
        progress = parseInt(data.loaded / data.total * 100, 10)
        data.context.find(".bar").css("width", progress + "%")
        data.context.find(".percentage").text(progress + "%")

    submit: (e, data) ->
      $("#mask").show()
      $("#modal").center().show()

    progressall: (e, data) ->
      $("#global-upload-count").text(global_count)
      global_progress = parseInt(data.loaded / data.total * 100, 10)
      $("#global-progress-bar").css("width", global_progress + "%")
      $("#global-progress-percentage").text(global_progress + "%")

      if global_progress >= 100
        seconds_to_process = global_count * processing_factor
        $("#global-processing-count").text(seconds_to_process)

        $("#global-processing").show()

        timer = setInterval(->
          seconds_to_process = seconds_to_process - 1
          $("#global-processing-count").text(seconds_to_process)

          if seconds_to_process == 0
            clearInterval(timer)
            global_count = 0
            seconds_to_process = 0
            $("#modal, #mask").hide(0)
        , 1000) 
```

见证模型：

```
class Testimonial < ActiveRecord::Base
  mount_uploader :image, ImageUploader

  def display_name
    if name.blank?
      return "Testimonial #{self.id}"
    else
      return name
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T19:10:42.237

如评论中所建议，使用 jQuery Upload：[http ://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T10:26:12.547

我已经开始为此功能编写一个基本库。我在 github 上有一个工作版本，并且正在写一系列博客文章来详细说明如何实现这一点。

“工作”代码可以在以下位置找到：[https](https://github.com/joeandrews/s3multipartupload) ://github.com/joeandrews/s3multipartupload 。

# python - 在 matplotlib 中设置分组条形图之间的间距

> ID：11597785
> 
> 赞同：18
> 
> 时间：2012-07-22T04:30:12.230
> 
> 标签：python, numpy, plot, matplotlib, scipy

我正在尝试按照图库中的示例在 matplotlib 中制作分组条形图。我使用以下内容：

```
import matplotlib.pyplot as plt
plt.figure(figsize=(7,7), dpi=300)
xticks = [0.1, 1.1]
groups = [[1.04, 0.96],
          [1.69, 4.02]]
group_labels = ["G1", "G2"]
num_items = len(group_labels)
ind = arange(num_items)
width = 0.1
s = plt.subplot(1,1,1)
for num, vals in enumerate(groups):
    print "plotting: ", vals
    group_len = len(vals)
    gene_rects = plt.bar(ind, vals, width,
                         align="center")
    ind = ind + width
num_groups = len(group_labels)
# Make label centered with respect to group of bars
# Is there a less complicated way?
offset = (num_groups / 2.) * width
xticks = arange(num_groups) + offset
s.set_xticks(xticks)
print "xticks: ", xticks
plt.xlim([0 - width, max(xticks) + (num_groups * width)])
s.set_xticklabels(group_labels) 
```

![在此处输入图像描述](../Images/b6d88eda235158f1b3cad692ea3375de.png)

我的问题是：

1.  如何控制条形组之间的空间？现在间距很大，看起来很傻。请注意，我不想让条更宽 - 我希望它们具有相同的宽度，但要靠得更近。

2.  如何使标签居中在条形组下方？我试图提出一些算术计算来将 xlabels 定位在正确的位置（参见上面的代码），但它仍然有点偏离......感觉有点像编写绘图库而不是使用绘图库。如何解决这个问题？（是否有 matplotlib 的包装器或内置实用程序，这是默认行为？）

**编辑：**回复@mlgill：谢谢你的回答。您的代码当然要优雅得多，但仍然存在相同的问题，即条形的宽度和组之间的间距不是单独控制的。您的图表看起来正确，但条形太宽了——它看起来像 Excel 图表——我想让条形变细。

宽度和边距现在已链接，所以如果我尝试：

```
margin = 0.60
width = (1.-2.*margin)/num_items 
```

它使酒吧变得更瘦，但使团队相距甚远，因此情节再次看起来不正确。

如何制作一个采用两个参数的分组条形图函数：每个条形的宽度和条形组之间的间距，并像您的代码一样正确绘制它，即 x 轴标签居中在组下方？

我认为由于用户必须计算特定的低级布局数量，例如边距和宽度，我们仍然基本上是在编写一个绘图库:)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-07-07T01:35:03.243

其实我认为这个问题最好通过调整`figsize`and来解决`width`；这是我的输出`figsize=(2,7)`和`width=0.3`：

![在此处输入图像描述](../Images/6982bcdd199099c3460ffa77f7df297e.png)

顺便说一句，如果你使用包装器，这种类型的事情会变得更简单**（**`pandas`我也导入`seaborn`了，这不是解决方案所必需的，但在我看来让情节更漂亮、更现代）：

```
import pandas as pd        
import seaborn 
seaborn.set() 

df = pd.DataFrame(groups, index=group_labels)
df.plot(kind='bar', legend=False, width=0.8, figsize=(2,5))
plt.show() 
```

![在此处输入图像描述](../Images/65e03485937f1f7ebc3c567b523338c5.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-22T20:37:29.823

这两个问题的诀窍是理解 Matplotlib 中的条形图期望每个系列（G1，G2）的总宽度为“1.0”，计算两边的边距。因此，设置边距可能是最简单的，然后根据每个系列有多少条来计算每个条的宽度。在您的情况下，每个系列有两个条形图。

假设您将每个条左对齐，而不是像您所做的那样将它们居中对齐，此设置将导致 x 轴上从 0.0 到 1.0、1.0 到 2.0 等范围的系列。因此，每个系列的确切中心，即您希望标签出现的位置，将位于 0.5、1.5 等处。

我已经清理了你的代码，因为有很多无关的变量。见内评论。

```
import matplotlib.pyplot as plt
import numpy as np

plt.figure(figsize=(7,7), dpi=300)

groups = [[1.04, 0.96],
          [1.69, 4.02]]
group_labels = ["G1", "G2"]
num_items = len(group_labels)
# This needs to be a numpy range for xdata calculations
# to work.
ind = np.arange(num_items)

# Bar graphs expect a total width of "1.0" per group
# Thus, you should make the sum of the two margins
# plus the sum of the width for each entry equal 1.0.
# One way of doing that is shown below. You can make
# The margins smaller if they're still too big.
margin = 0.05
width = (1.-2.*margin)/num_items

s = plt.subplot(1,1,1)
for num, vals in enumerate(groups):
    print "plotting: ", vals
    # The position of the xdata must be calculated for each of the two data series
    xdata = ind+margin+(num*width)
    # Removing the "align=center" feature will left align graphs, which is what
    # this method of calculating positions assumes
    gene_rects = plt.bar(xdata, vals, width)

# You should no longer need to manually set the plot limit since everything 
# is scaled to one.
# Also the ticks should be much simpler now that each group of bars extends from
# 0.0 to 1.0, 1.0 to 2.0, and so forth and, thus, are centered at 0.5, 1.5, etc.
s.set_xticks(ind+0.5)
s.set_xticklabels(group_labels) 
```

![我的代码的输出。](../Images/efaae922e8bd42a72e085ba0b16ef122.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-22T19:14:31.830

我阅读了 Paul Ivanov 在[Nabble](http://matplotlib.1069221.n5.nabble.com/Newbie-How-to-control-space-between-sets-of-bars-in-bar-chart-td9369.html)上发布的答案，该答案可能会以较低的复杂性解决这个问题。只需将索引设置如下。这将增加分组列之间的间距。

```
ind = np.arange(0,12,2) 
```

# javascript - 如何在字符之间匹配但不将它们包含在结果中

> ID：11597786
> 
> 赞同：0
> 
> 时间：2012-07-22T04:30:33.583
> 
> 标签：javascript, regex, parsing, match

假设我有一个字符串“&something=variable&something_else=var2”

我想在 &something= 和 & 之间进行匹配，所以我将编写一个如下所示的正则表达式：

```
/(&something=).*?(&)/ 
```

.match() 的结果将是一个数组：

```
["&something=variable&", "&something=", "&"] 
```

我总是通过手动替换开始和结束元素来解决这个问题，但是有没有办法完全不将它们包含在匹配结果中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:34:07.917

您使用了错误的捕获组。你应该使用这个：

```
/&something=(.*?)&/ 
```

这意味着不是捕获您不想要的东西（分隔符），而是捕获您想要的东西（数据）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T04:35:28.813

您根本无法避免它们出现在您的匹配结果中，但您可以更改它们的显示方式并使其对您更有用。

如果您将匹配模式更改为然后使用匹配结果数组`/&something=(.+?)&/`的测试字符串是`"&something=variable&something_else=var2"``["&something=variable&", "variable"]`

第一个元素始终是整个匹配项，但第二个元素将是从括号中捕获的部分，这通常更有用。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-22T04:45:09.113

如果您试图`variable`摆脱字符串，使用带有反向引用的替换将得到您想要的：

```
"&something=variable&something_else=var2".replace(/^.*&something=(.*?)&.*$/, '$1') 
```

给你

```
"variable" 
```

# javascript - 多个 javascript 按钮（启用/禁用）

> ID：11597796
> 
> 赞同：0
> 
> 时间：2012-07-22T04:33:08.293
> 
> 标签：javascript

我制作了一个带有 8 个启用/禁用 javascript 功能按钮的菜单，并且我使用相同的 javascript 代码来运行所有 8 个按钮，但为它们使用不同的 css 类，这样我就可以让它们工作。我的问题是，当您单击它们将起作用的每一个时，我如何才能让它们工作到哪里。

Javascript代码：我用这个代码再用了7次，red1 red 2 so on green1 green2 so on

```
// Left Menu function controls(className) {
if (className == "red") {
    document.getElementById('Skip').setAttribute('class','green');
    // You can define your play music statements here
} else {
    document.getElementById('Skip').setAttribute('class','red');
    // You can define your stop music statements here        
} }

if (className == "red1") { 
document.getElementById('Text').setAttribute('class','green1'); 
// You can define your play music statements here } else { 
document.getElementById('Text').setAttribute('class','red1'); 
// You can define your stop music statements here         } } 
```

Css 代码：所有 8 个按钮 .red1 .red2 等 .green1 .green2 等的代码相同。

```
.red { 
background: red; 
height: 30px;
width: 30px;
border-radius: 50px;
border: 1px solid #000;}                                                                                               

.green { 
background: green;
height: 30px;
width: 30px;
border-radius: 50px;
border: 1px solid #000;} 
```

html代码：

```
Skip &nbsp; <button id="Skip" class="red" onclick="controls(this.getAttribute('class'))">Play</button>

Text &nbsp; <button id="Text" class="red1" onclick="controls(this.getAttribute('class'))">Play</button> 
```

以及另外 6 个具有相同代码 red2 red3 的按钮，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T04:49:53.163

我认为您应该在按钮中添加 id，并且 id 是指您要播放或停止的音乐。

# regex - Lighttpd 重写规则（匹配没有句点）

> ID：11597799
> 
> 赞同：0
> 
> 时间：2012-07-22T04:34:13.363
> 
> 标签：regex, mod-rewrite, url-rewriting, lighttpd

我试图找出一个`rewrite`规则`lighttpd`，它将以下列方式运行：

如果 uri *（协议和域之后的部分）***不**包含执行`period`规则。

例子：

```
uri = "/people/add"
Should run the rule.

uri = "/js/main.js"
Should NOT run the rule.

uri = "/people.php"
Should NOT run the rule. 
```

这是我到目前为止所拥有的，但它的行为不像预期的那样，它总是运行规则：

```
$HTTP["host"] =~ "^(my\.domain\.com)$" {
    url.rewrite-once = (
            "^/(.*)$" => "index.php/$1"
    )
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:01:59.567

也许为您的正则表达式尝试以下操作？我不熟悉 lighthttpd 支持的语法，但如果它支持字符类，下面应该做你所要求的。

```
 "^/([^.]+)$" 
```

# node.js - 脚本浏览器 Scapper

> ID：11597801
> 
> 赞同：0
> 
> 时间：2012-07-22T04:35:12.987
> 
> 标签：node.js, scraper, node.io

我可以使用什么来实现以下目标，编写浏览器脚本或以其他方式向服务器发出请求，登录，浏览站点，例如。查找链接并导航到这些链接。

现在，由于我对 NodeJS 感兴趣，所以我正在研究 node.io。它使您可以很容易地抓取网站，但问题是当我尝试发布（登录）时，我什么也得不到！

```
nodeio = require "node.io"

nodeio.scrape ->

    @post "http://localhost/auth/login", {
        username: "username"
        password: "password"
    }, ->

        console.log "=====After Login=====" 
```

但我只是得到

```
OK: Job complete 
```

即使登录失败，我应该在登录后进入`console.log`吗？

* * *

然后我在想，通过编写浏览器脚本来实现这一点可能更好，它会更接近地模拟真实的请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:08:07.903

Selenium 或 Watir 允许您编写浏览器脚本。它们使用实际的浏览器，因此它们会比较低级别的工具慢，但它们可以完成浏览器所做的一切（即 JavaScript）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T18:35:31.100

node.io 似乎是完成这项工作的好工具，但我也推荐[zombie.js](http://zombie.labnotes.org/)。它似乎主要用于测试，但文档看起来也非常适合抓取。

如果您想使用脚本浏览器路线，请忽略我的回答。:)

# cuda - CUDA：atomicAdd 需要太多时间，序列化线程

> ID：11597802
> 
> 赞同：4
> 
> 时间：2012-07-22T04:35:13.753
> 
> 标签：cuda, shared-memory, atomic, elapsedtime, prefix-sum

我有一个内核，它进行一些比较并决定两个对象是否碰撞。我想将碰撞对象的 id 存储到输出缓冲区。我不想在输出缓冲区中有间隙。我想将每次碰撞记录到输出缓冲区中的唯一索引。

所以我在共享内存（局部总和）和全局内存（全局总和）中创建了一个原子变量。下面的代码显示了在发现冲突时共享变量的递增。我现在在全局内存中增加原子变量没有问题。

```
__global__ void mykernel(..., unsigned int *gColCnt) {
    ...

    __shared__ unsigned int sColCnt;
    __shared__ unsigned int sIndex;

    if (threadIdx.x == 0) {
        sColCnt = 0;
    }

    __syncthreads();

    unsigned int index = 0;
    if (colliding)
        index = atomicAdd(&sColCnt, 1); //!!Time Consuming!!

    __syncthreads();

    if (threadIdx.x == 0)
        sIndex = atomicAdd(gColCnt, sColCnt);

    __syncthreads();

    if (sColCnt + sIndex > outputSize) { //output buffer is not enough
        //printf("Exceeds outputsize: %d + %d > %d\n", sColCnt, sIndex, outputSize);
        return;
    }

    if (colliding) {
        output[sIndex + index] = make_uint2(startId, toId);
    }
} 
```

我的问题是，当许多线程尝试增加原子变量时，它们会被序列化。在写前缀和之类的东西之前，我想问一下是否有办法有效地完成这项工作。

由于这一行，我的内核的运行时间从 13 毫秒增加到 44 毫秒。

我找到了一个前缀和示例代码，但它的引用链接失败，因为 NVIDIA 的讨论板已关闭。 [https://stackoverflow.com/a/3836944/596547](https://stackoverflow.com/a/3836944/596547)

* * *

编辑：我也在上面添加了我的代码的结尾。事实上，我确实有等级制度。为了查看每个代码行的影响，我设置了每个对象相互碰撞的场景、极端情况以及几乎没有对象碰撞的另一种极端情况。

最后，我将共享原子变量添加到全局变量 (gColCnt) 中，以告知外部碰撞次数并找到正确的索引值。我想我必须以任何方式在这里使用 atomicAdd 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-21T07:11:18.583

nvidia 博客文章相关：[http ://devblogs.nvidia.com/parallelforall/gpu-pro-tip-fast-histograms-using-shared-atomics-maxwell/](http://devblogs.nvidia.com/parallelforall/gpu-pro-tip-fast-histograms-using-shared-atomics-maxwell/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:24:24.670

例如，考虑使用并行流压缩算法`thrust::copy_if`。

# android - 使用新的 AndEngine

> ID：11597804
> 
> 赞同：3
> 
> 时间：2012-07-22T04:37:22.967
> 
> 标签：android, andengine

我最近开始使用 AndEngine。我浏览了在线教程、视频讲座，买了 Rick Rogers 的书，但 AndEngine 的基本问题是它所有的学习材料都过时了，而且新版本的大部分软件包都发生了变化。

我尝试执行 AndEngine 示例，但由于它们是使用旧版本的 AndEngine 构建的，因此它们不适用于新库。我很困惑如何开始学习新的 AndEngine，因为我找不到任何教程或示例！

如果您能给我提供一个指向 AndEngine 以前版本的链接，那将非常有帮助，这样我至少可以实现较旧的示例。AndEngine 的任何更好的替代品也将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T04:40:23.813

我最近开始研究最新的 AndEngine，我正在开发一个 2d 游戏。[这](https://jimmaru.wordpress.com/2012/05/19/jimvaders-my-own-invaders-clone-thingie-tutorial/)是非常好的教程，它使用最新的 AndEngine 代码来帮助您入门 :)。

在我看来，**AndEngine 最适合 Android 2dGame 开发。**另一个不错的选择是 Cocos2d-java，但它缺乏适当的文档等。**如果你擅长开发 c++ 或 Lua**，那么你应该看看[cocos2d-x](http://www.cocos2d-x.org/)进行跨平台开发。这是不同[2d 游戏引擎](http://mobilegameengines.com/android/2d_game_engines)的链接，包括游戏示例和其他详细信息。

# c++ - Voro++ 可以在 2D 中使用吗？

> ID：11597807
> 
> 赞同：3
> 
> 时间：2012-07-22T04:37:56.040
> 
> 标签：c++, 2d, voronoi

我正在寻找 C++ 中的 Voronoi Tessellation 库，而 Voro++ 似乎完全符合要求。我需要某些东西 - 例如，轻松访问单元格本身的属性 - Voro++ 提供的非常好。然而，Voro++ 似乎是为 3D 工作量身定制的。是否可以在 2D 模式下使用 Voro++，如果可以，我该怎么做？

我认为只是在 3D 中做所有事情，但只有零 z 分量的点会起作用（只要“盒子”的 z 范围为 -0.5 - 0.5），但这似乎有点过分了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:34:09.200

嗨，您可能想尝试 Viennagrid，他们的源代码生成各种类型的网格，包括 Voronoi 图。空间维度没有限制。该网站是

[http://www.iue.tuwien.ac.at/index.php?id=viennagrid](http://www.iue.tuwien.ac.at/index.php?id=viennagrid)

最好的祝福...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-29T16:11:06.833

这是一个老问题，但在联系了软件的作者后，他确认了一个 2d 版本，对提高效率很有用，正在通过 Subversion 使用命令制作

```
svn checkout https://codeforge.lbl.gov/anonscm/voro/trunk 
```

如果您的粒子数 < 100000，您可以简单地使用 3d 版本，指定 az 坐标为零，容器高度为 1

```
z_min = -0.5; z_max = 0.5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T17:10:00.483

我建议你联系 voro++ 的作者。我和你有同样的问题，我直接联系他，他告诉我他正在做一个2D优化的版本，甚至给出了一个初步的代码版本来尝试。该代码运行良好。

即便如此，作为另一种方法，您当然可以使用 3d 版本并将某个维度（假设 y）固定为长度始终为 1，然后您的所有卷和数据将需要（如果有的话）微不足道的缩放。2d 定制版的优势主要在于速度。

# iphone - CorePlot x 轴定位问题

> ID：11597808
> 
> 赞同：0
> 
> 时间：2012-07-22T04:39:08.387
> 
> 标签：iphone, objective-c, cocoa-touch, ios4, core-plot

在下面的代码中，我尝试添加 5 个自定义标签并将其显示在 x 轴上。但我面临以下问题。我使用散点图示例代码对此进行了测试。也附上带有结果的图像。！

1.  并非所有 5 个标签都显示出来。
2.  X 轴标记从负侧开始。所有 x 都应位于正侧。
3.  在 x 轴上，我想获得与 y 轴相同的效果。同样的灰色效果。

![在此处输入图像描述](../Images/6b4afa3ded790bd3f06a64450bb6e941.png)

```
// Create graph from theme
graph = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
CPTTheme *theme = [CPTTheme themeNamed:kCPTDarkGradientTheme];
[graph applyTheme:theme];
CPTGraphHostingView *hostingView = (CPTGraphHostingView *)self.view;
hostingView.collapsesLayers = NO; // Setting to YES reduces GPU memory usage, but can slow drawing/scrolling
hostingView.hostedGraph     = graph;

graph.paddingLeft   = 10.0;
graph.paddingTop    = 10.0;
graph.paddingRight  = 10.0;
graph.paddingBottom = 10.0;

// Setup plot space
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
plotSpace.allowsUserInteraction = YES;
plotSpace.yRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(-80.0) length:CPTDecimalFromFloat(500.0)];
plotSpace.xRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(-1) length:CPTDecimalFromFloat(15.0)];

CPTMutableLineStyle *xLineStyle = [CPTMutableLineStyle lineStyle];
xLineStyle.miterLimit       = 1.0f;
xLineStyle.lineWidth            = 3.0f;
xLineStyle.lineColor = [CPTColor whiteColor];
// Axes
CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
CPTXYAxis *x          = axisSet.xAxis;
x.visibleRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0) length:CPTDecimalFromFloat(100)];
x.axisLineStyle               = xLineStyle;
x.majorTickLineStyle          = xLineStyle;
x.minorTickLineStyle          = xLineStyle;
x.majorIntervalLength         = CPTDecimalFromString(@"1");
x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"1");
x.titleLocation               = CPTDecimalFromFloat(0.5f);
x.titleOffset                 = 5.0f;

x.labelingPolicy = CPTAxisLabelingPolicyNone;
NSArray *customTickLocations = [NSArray arrayWithObjects:[NSDecimalNumber numberWithInt:1], [NSDecimalNumber numberWithInt:2], [NSDecimalNumber numberWithInt:3], [NSDecimalNumber numberWithInt:4], nil];
NSArray *xAxisLabels         = [NSArray arrayWithObjects:@"Label A", @"Label B", @"Label C", @"Label D", @"Label E", nil];
NSUInteger labelLocation     = 0;
NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[xAxisLabels count]];
for ( NSNumber *tickLocation in customTickLocations ) {
    CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:[xAxisLabels objectAtIndex:labelLocation++] textStyle:x.labelTextStyle];
    newLabel.tickLocation = [tickLocation decimalValue];
    newLabel.offset       = x.labelOffset + x.majorTickLength;
    newLabel.rotation     = M_PI / 4;
    [customLabels addObject:newLabel];
    [newLabel release];
}

x.axisLabels = [NSSet setWithArray:customLabels];

CPTXYAxis *y = axisSet.yAxis;
y.visibleRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0) length:CPTDecimalFromFloat(500)];
y.majorIntervalLength         = CPTDecimalFromString(@"40");
y.minorTicksPerInterval       = 5;
y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"2");

y.delegate             = self;

// Create a blue plot area
CPTScatterPlot *boundLinePlot  = [[[CPTScatterPlot alloc] init] autorelease];
CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
lineStyle.miterLimit        = 1.0f;
lineStyle.lineWidth         = 3.0f;
lineStyle.lineColor         = [CPTColor blueColor];
boundLinePlot.dataLineStyle = lineStyle;
boundLinePlot.identifier    = @"Blue Plot";
boundLinePlot.dataSource    = self;
[graph addPlot:boundLinePlot];

// Do a blue gradient
CPTColor *areaColor1       = [CPTColor colorWithComponentRed:0.3 green:0.3 blue:1.0 alpha:0.8];
CPTGradient *areaGradient1 = [CPTGradient gradientWithBeginningColor:areaColor1 endingColor:[CPTColor clearColor]];
areaGradient1.angle = -90.0f;
CPTFill *areaGradientFill = [CPTFill fillWithGradient:areaGradient1];
boundLinePlot.areaFill      = areaGradientFill;
boundLinePlot.areaBaseValue = [[NSDecimalNumber zero] decimalValue];

// Add plot symbols
CPTMutableLineStyle *symbolLineStyle = [CPTMutableLineStyle lineStyle];
symbolLineStyle.lineColor = [CPTColor blackColor];
CPTPlotSymbol *plotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
plotSymbol.fill          = [CPTFill fillWithColor:[CPTColor blueColor]];
plotSymbol.lineStyle     = symbolLineStyle;
plotSymbol.size          = CGSizeMake(10.0, 10.0);
boundLinePlot.plotSymbol = plotSymbol;

// Add some initial data
NSMutableArray *contentArray = [[NSMutableArray alloc] init];
NSUInteger i;
for ( i = 0; i < 5; i++ ) {

    id x = [NSNumber numberWithFloat:i];
    id y = [NSNumber numberWithFloat:200-i];
    [contentArray addObject:[NSMutableDictionary dictionaryWithObjectsAndKeys:x, @"x", y, @"y", nil]];
}
self.dataForPlot = contentArray;
[contentArray release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:02:41.917

1.  您只创建了四个标签。该`customTickLocations`数组包含四个位置；为每个位置创建一个标签。

2.  标签位于代码中指定的位置。数据点位于 (0, 1, 2, 3, 4)，而标签位于 (1, 2, 3, 4)。由于`orthogonalCoordinateDecimal`属性设置，y 轴在 x=2 处与 x 轴相交。

3.  如果要保留主题中的默认样式，请不要在 x 轴上设置轴或刻度线样式。

# iphone - 在框架中打开 iPhone 相机

> ID：11597810
> 
> 赞同：3
> 
> 时间：2012-07-22T04:39:34.400
> 
> 标签：iphone, objective-c, ios, camera, frame

我想在一个框架中打开 iPhone 相机。实际上我有一个心形的图像。所以我想在这张图片中打开相机。所以请任何人都可以建议我如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T05:46:42.310

以下是通过相机点击获取框架图像的步骤：

1 打开一个包含心形框架的剪切图像的视图。

```
UIImage *image = [UIImage imageNamed:@"myimage.png"];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
imageView.frame = CGRectMake( 0, 0, cell.frame.size.width, cell.frame.size.height );
imageView.contentMode = UIViewContentModeScaleToFill; 
```

2 调用该切割心形图像下方的相机叠加层以使用相机拍摄图像。

```
UIImagePickerController *picker = [[UIImagePickerController alloc] init];
picker.delegate = self;
picker.allowsImageEditing = YES;
picker.sourceType = (sender == takePictureButton) ? UIImagePickerControllerSourceTypeCamera :
UIImagePickerControllerSourceTypeSavedPhotosAlbum;
[self presentModalViewController: picker animated:YES];
[picker release]; 
```

3 单击图像让图像视图出现并启用捕捉的图像可编辑。

4 然后用心形图像视图拍摄屏幕截图，以根据您的要求获取图像。

```
UIGraphicsBeginImageContext(webview.frame.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T05:44:52.987

`UIImagePickerController`有财产`cameraOverlayView`。我还没有尝试过，但我想你可以添加一个`UImageView`作为它的子视图，使用带有 alpha 通道的图像来掩盖你不希望相机显示的区域。

为什么不试一试并报告它的工作原理。

> cameraOverlayView
> 
> 显示在默认图像选择器界面顶部的自定义视图。@property (nonatomic, 保留) UIView *cameraOverlayView 讨论
> 
> 您可以使用覆盖视图在默认图像选择器界面的顶部呈现自定义视图层次结构。图像选择器将您的自定义覆盖视图分层放置在其他图像选择器视图之上，并将其相对于屏幕坐标定位。如果您将默认相机控件设置为可见，请将透明度合并到您的视图中，或将其放置以避免遮挡底层内容。

# asp.net - 以编程方式将参数传递给 Reporting Services

> ID：11597811
> 
> 赞同：1
> 
> 时间：2012-07-22T04:39:45.313
> 
> 标签：asp.net, reporting-services

我需要将动态参数传递给我的报告服务。

参数名称为 PCName

处理模式是远程，如果我手动登录到报告服务器，我可以将参数传递给报告，但我想以编程方式传递它。

这是我的 ASP 代码的副本。

```
<asp:ScriptManager id='scriptManager' runat='server' />
<rsweb:ReportViewer ID="ReportViewer1" 
                    runat="server" 
                    ProcessingMode="Remote" 
                    Font-Names="Verdana" 
                    Font-Size="8pt" 
                    InteractiveDeviceInfos="(Collection)" 
                    WaitMessageFont-Names="Verdana" 
                    WaitMessageFont-Size="14pt"

                    Width="95%" 
                    Height="99%" ShowDocumentMapButton="False" 
    ShowPromptAreaButton="False" Visible="true">

<ServerReport   ReportPath="/Services/Logon" 
                ReportServerUrl="http://reports/reportserver/" />

</rsweb:ReportViewer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:27:36.283

您应该从后面的代码中创建一个报表参数并将其传递给报表查看器控件，如下所示

```
ReportParameter param = new ReportParameter("PCName", "parameter value");
this.ReportViewer1.ServerReport.SetParameters(new ReportParameter[] { param  });
this.ReportViewer1.ServerReport.Refresh(); 
```

# javascript - 如何使用 PHP 从 html 表格中打印出来

> ID：11597814
> 
> 赞同：2
> 
> 时间：2012-07-22T04:40:53.140
> 
> 标签：javascript, php, html-table

我在 PHP 页面中有一个表格。这是一张发票。所以我想在添加项目后打印它，我已经完成了编码部分，所有的东西都工作正常。

现在我只想按一个按钮将该发票表打印到纸上。我在谷歌上搜索，但没有发现这样做的线索。

谁能帮我？

这是我右手边的桌子。它由左侧的表格填充，所以我只想打印右侧的表格：

![在此处输入图像描述](../Images/6f23585437e6cb98f1737cbb2d786d6b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T04:57:20.770

试试这个：

`id`向表中添加属性`your_content`

放置一个锚标签：

```
 <a href="javascript:void(0);" id="printPage">Print</a> 
```

并添加脚本：

*此脚本最初将显示表格内内容的打印预览。*

```
 <script lang='javascript'>
 $(document).ready(function(){
  $('#printPage').click(function(){
        var data = '<input type="button" value="Print this page" onClick="window.print()">';           
        data += '<div id="div_print">';
        data += $('#your_content').html();
        data += '</div>';

        myWindow=window.open('','','width=200,height=100');
        myWindow.innerWidth = screen.width;
        myWindow.innerHeight = screen.height;
        myWindow.screenX = 0;
        myWindow.screenY = 0;
        myWindow.document.write(data);
        myWindow.focus();
    });
 }); 
```

复制脚本部分并将其放在页面顶部。并将打印链接，[在锚标签上方]放在任何你想要的地方。并确保您已包含 jquery 脚本文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T06:11:04.713

这对于像 jQuery 这样的东西来说太微不足道了，所以你应该使用纯 Javascript 来完成它。把它放在你页面的某个地方，看看它是否有效：

```
<a href="javascript:void(0);" onclick="printPage();">Print</a> 

<script type="text/javascript">
 function printPage(){
        var tableData = '<table border="1">'+document.getElementsByTagName('table')[0].innerHTML+'</table>';
        var data = '<button onclick="window.print()">Print this page</button>'+tableData;       
        myWindow=window.open('','','width=800,height=600');
        myWindow.innerWidth = screen.width;
        myWindow.innerHeight = screen.height;
        myWindow.screenX = 0;
        myWindow.screenY = 0;
        myWindow.document.write(data);
        myWindow.focus();
    };
 </script>​​​​​​ 
```

你可以在这里看到演示：http: [//jsfiddle.net/Pxqtb/](http://jsfiddle.net/Pxqtb/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T07:03:34.873

我使用了这段代码，它解决了我的问题。谢谢大家帮助我......

```
function printlayout() {
     var data = '<input type="button" value="Print this page" onClick="window.print()">';           
       var DocumentContainer = document.getElementById('printlayout');
        //data += $('printlayoutable').html();
        //data += '</div>';
var WindowObject = window.open('', "TrackHistoryData", 
                              "width=740,height=325,top=200,left=250,toolbars=no,scrollbars=yes,status=no,resizable=no");           
 WindowObject.document.writeln(DocumentContainer.innerHTML);
  //WindowObject.document.writeln(DocumentContainer.innerHTML);
        WindowObject.document.close();
        WindowObject.focus();
        WindowObject.print();
        WindowObject.close(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T04:48:38.643

你有几个选择。(1) 如果您创建一个仅包含发票的新 HTML 页面，用户可以使用浏览器的打印能力打印该页面。(2) 或者，您可以允许用户下载您创建并打印的发票文档。(3) 可以`window.print();`结合#1 使用JavaScript 命令。看看[这个](http://www.javascriptkit.com/howto/newtech2.shtml)。

# javascript - 将共同朋友计数添加到数组中的每个用户

> ID：11597815
> 
> 赞同：0
> 
> 时间：2012-07-22T04:41:11.860
> 
> 标签：javascript, arrays, facebook-graph-api

我有一个 Facebook 用户数组 (userList)，我想将数组中每个用户的共同好友数存储为一个属性 (mfCount)。如果我输入一个单独的用户，我已经检查了我是否获得了正确数量的共同朋友，但我不确定为什么我不能将此值添加到数组中的每个用户？

```
function getfriends() {
FB.api('/me/friends', function(response) {
    userList = userList.concat(response.data);
    userCount = response.data.length;
    for( i=0; i<response.data.length; i++) {
      userId = response.data[i].id;
      FB.api('/me/mutualfriends/'+userId+'/', function(response) {
        userList[i].mfCount = response.data.length;
        userCount--;
        if(userCount === 0) { display_results();}
      });
    } 
  }); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:05:58.980

看看下面的实现。我已将其分解为多个功能以分隔每个步骤。在处理循环和回调时，跟踪定义匿名函数的范围变得非常重要。

从理论上讲，您可以像写的那样*在单行中完成所有操作*
……但是随着您越来越深入地使用嵌套回调，它会变得非常非常混乱。

一种解决方案是使每个函数中的每个变量 100% 全局化，这样只`i`需要一个封闭的引用。不过，这并不是很漂亮。

查看每个函数并记下每个步骤调用的函数（或回调的闭包）中有哪些参数。它们都是必需的（无论您以这种方式将它们分开，还是通过单列中的闭包或其他方式）。

在 Facebook 开发人员沙箱内（第一次使用 API），以下内容对我来说效果很好。
这些日志是为了让我了解数据是如何输出的，并保持基本的堆栈跟踪。

```
var userList = [],
    userCount = 0;

function getfriends () {
    //console.log("getFriends");
    var url = "/me/friends";
    FB.api(url, function (response) {
        if (response.error && response.error.message) { return false; }
        userList = userList.concat(response.data);
        userCount = response.data.length;
        compareAllFriends();
    });
}

function compareAllFriends () {
    //console.log("compareAllFriends");
    var i = 0, l = userCount, userID;
    for (; i < l; i += 1) {
        userID = userList[i].id;
        compareFriendsWith (i, userID);
    }
}
function compareFriendsWith (i, id) {
    //console.log("compareFriendsWith", i, id);
    var path = "/me/mutualfriends/",
        url = path + id + "/";

    FB.api(url, (function (i) {
        return function (response) {
            //console.log(i, response);
            var numFriends = (response.data) ? response.data.length : 0;
            setMutualFriends(i, numFriends);
            userCount -= 1;
            //console.log(userCount);
            if (userCount === 0) {
                display_results();
                //console.log("DISPLAYING");
            }
        };
    }(i)));
}

function setMutualFriends (i, friendcount) { userList[i].mfCount = friendcount; } 
```

# c# - 如何强烈引用 .exe 文件？

> ID：11597830
> 
> 赞同：1
> 
> 时间：2012-07-22T04:48:36.063
> 
> 标签：c#, unit-testing

我正在使用 C# 4.0。

我正在使用`Microsoft.VisualStudio.TestTools.UnitTesting`.

我的 UnitTest 项目测试另一个项目，比如 ProjectA。ProjectA 创建一个这样的过程：

```
Process mplex = new Process();
psi = new ProcessStartInfo();
psi.CreateNoWindow = true;
psi.UseShellExecute = false;
psi.RedirectStandardError = true;
psi.FileName = "cmd.exe";
psi.Arguments = "/C mplex omittedForBrevity";
mplex.StartInfo = psi;
mplex.Start();

/* This is telling me: "'mplex' is not recognized 
 * as an internal or external command, operable 
 * program or batch file." */
var a = mplex.StandardError.ReadToEnd(); 
```

我已将“MPLEX.exe”放在各种 bin 中，包括“AppDomain.CurrentDomain.BaseDirectory”（这是我的 UnitTest 项目的 \bin\Debug\ 文件夹）。

MPLex.exe 基本上是微软对 GPLEX 的衍生产品，它是 Flex/Lex 的 C# 版本。当我在 ProjectA 中添加对 MPLex.exe 的引用并在对象浏览器中查看它时，我看不到任何看起来像 的方法`Main`或与之交互的公共方式，否则我会这样做而不是通过 cmd 调用它我上面已经做了。

我认为正在发生的事情是在进行单元测试时，它不是在搜索 \bin\Debug\ 目录。当我从非单元测试 ProjectB 中的 Main 方法在 ProjectA 中运行相同的代码时，它工作正常。如果我能以某种方式强烈引用 .exe 以便将其复制到需要的任何地方，那么我认为我的问题将得到解决。我怎样才能做到这一点？

编辑：

添加这个修复了它，但据我所知，我可能刚刚破坏了其他尚未为人所知的东西。

```
System.IO.Directory.SetCurrentDirectory(AppDomain.CurrentDomain.BaseDirectory); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:45:02.667

mstest 不会在 bin 之外运行您的单元测试。它将测试和引用的程序集复制到测试部署文件夹，通常位于解决方案目录中的 TestResults 下。我已经对类似的组件进行了“单元”测试，并且总是需要使用部署功能，这对于如此简单的事情来说使用起来很头疼，但是就在这里。

首先，您的测试设置必须启用部署。转到 testsettings 文件并选择部署选项卡，然后单击启用部署。根据您的解决方案的结构，您可以在此处添加 mplex 文件。在我们的项目中，我不这样做，因为必要的文件通常位于测试的源代码控制树之外，并且 VS 会抱怨，如果是这种情况，请使用我在下面描述的文件链接。

您还可以将 DeploymentItem 属性添加到特定测试或测试类，并且只有在运行这些测试时才会复制该文件。如果它是您不想一直复制的大型数据文件，这将很有帮助。

如果必要的文件在测试解决方案之外，请将必要的文件作为链接添加到测试项目中，并将构建操作设置为始终复制。然后要么添加到 testsettings 中的已部署文件，要么使用 DeploymentItem 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T08:10:09.583

在项目中引用 .exe bin 是一种不好的做法。我建议： - 在您的环境路径变量上设置 mplex 的路径 - 从 cmd 调用 mplex （即 mplex 作为 shellexecute 上的参数命令行）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T06:27:28.227

.exe 是 C# 编译的代码，与 dll 类似，只是它具有描述代码入口点的附加标头。

我做了以下步骤，它对我有用。

1 - 使用静态方法 Main 和非静态方法创建 exe

```
namespace TestConsole1
{
    public class Program
    {
        public static void Main(string[] args)
        {
            Console.Write("hello 1st");
        }

        public void TestMethod2()
        {
            Console.Write("hello 2nd");
        }
    }
} 
```

2 - 在另一个类库项目中引用它作为项目引用，下面的代码工作正常。

```
TestConsole1.Program prg = new TestConsole1.Program();

prg.TestMethod2(); 
```

我还尝试将 exe 名称从“some.exe”更改为“some.dll”，然后在项目中引用它，它也运行良好。

# asp.net-mvc - ASP.Net MVC 表单字段自动填充另一个模型字段值

> ID：11597831
> 
> 赞同：0
> 
> 时间：2012-07-22T04:48:37.337
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个呈现移动设备详细信息的 Asp.net MVC3 页面。此页面还托管使用评论模型呈现的评论表单。一个名为 Name 的字段，即 Mobile.Name 和 Comment.Name 在这两种模型中都很常见。

在最终输出中，我总是看到 Comment.Name 文本框填充了 Mobile.Name 的值。不知道为什么会这样。

确切的问题可以在下面的链接中看到.. 检查评论选项卡

[问题网址](http://www.pricemobile.in/mobile/specification/1887/htc-one-x)

**编辑** 评论表单使用部分视图呈现，如下所示：

```
@using (Ajax.BeginForm("Savecomment", new AjaxOptions() { UpdateTargetId = "FormContainer" , OnSuccess = "$.validator.unobtrusive.parse('form');" }))
{
       @Html.HiddenFor(m => m.MobileId)
        <div class="row">
        <div class="five columns">
          <label >Your name:</label>
          @Html.TextBox("Name"," ")
          @Html.ValidationMessage("Name")
        </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:23:17.223

您的问题很可能与您如何呈现部分视图有关。我假设您有一个包含 Mobile 和 Comment 的父模型？您正在将评论模型传递给局部视图？因此，局部视图将字段名称呈现为好像它是主要模型一样。

我建议使用 EditorTemplate 来呈现您的 Comment 和 Mobile 而不是部分视图。编辑器模板比部分视图更了解它们的上下文。

# javascript - Javascript：检查对象，如果[条件]，返回x

> ID：11597833
> 
> 赞同：1
> 
> 时间：2012-07-22T04:48:50.543
> 
> 标签：javascript, function, object, return

我有三个对象，a，b 和 c

```
function N(z, y){
   this.z = z;
   this.y = y;
}

var a = new N(true,0);
var b = new N(false, 1);
var c = new N(false, 2); 
```

我想创建一个函数，该函数可以确定哪个对象具有它的值`true`及其`z`值。`return``y`

这就是我所拥有的：

```
N.prototype.check = function(){
   if(this.z == true){
      return this.y;
   }    
}

function check(){
   var x;
   x = a.check();
   if(x !=undefined){
      return x;
   }
   x = b.check();
   if(x !=undefined){
      return x;
   }
   x = c.check();  
   if(x !=undefined){
      return x;
   }  
}

var x = check(); 
```

有用。但我有一种感觉，我正在绕道而行。有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T04:56:12.487

我认为您的解决方案还可以，但您可以改进它：

```
function check( objects ) {
    // iterate over all objects
    for ( var i = 0; i < objects.length; i++ ) {

        // gets the result of the check method of the current object
        var result = objects[i].check();

        // if result exists (y is defined in the current object)
        if ( result ) {
            // returns it
            return result;
        }
    }

    // no valid results were found, so return null (or undefined)
    return null; // or undefined...
}

// checking 3 objects
var x = check([a, b, c]); 
```

# python - Python MySQL 数字匹配

> ID：11597835
> 
> 赞同：1
> 
> 时间：2012-07-22T04:49:36.687
> 
> 标签：python, mysql

我正在寻找一种检查 MySQL 表中所有字段的方法。假设我有一个 MySQL 表，其中包含字段`One` `Two` `Three` `Four` `Five`和`Big One`. 这些字段包含人们输入的数字，有点像百万富翁。用户输入数字，它会插入他们从最小到最大选择的数字。

号码将被抽出，我需要一种方法来检查每个用户选择的任何号码是否与抽出的中奖号码相匹配，对于`Big One`. 如果有任何匹配，我会让它做一些特定的事情，比如一个数字或所有数字是否匹配。

我希望你明白我在说什么。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:33:28.503

I would imagine MySQL has some sort of 'set' logic in it, but if it's lacking, I know Python has sets, so I'll use an example of those in my solution:

1.  Create a set with the numbers of the winning ticket:

    `winners = set({11, 22, 33, 44, 55})`

2.  For each query, jam all it's numbers into a set too:

    `current_user = set({$query[0], $query[1], $query[2]...$query[4]})`

3.  Print out how many overlapping numbers there are:

    `print winners.intersection(current_user)`

And finally, for the 'big one', use an if statement.

Let me know if this helps.

# objective-c - 轻松修补 OS X 应用程序

> ID：11597838
> 
> 赞同：4
> 
> 时间：2012-07-22T04:50:12.927
> 
> 标签：objective-c, macos, updates, patch

修补不是通过 Mac App Store 发布的 OS X 应用程序的最简单方法是什么？

根据我收集到的信息，“标准”方式是通过 bsdiff 和 bspatch，但我注意到一堆程序的软件修补屏幕基本相同，所以我想知道是否有某种工具那里使修补软件变得容易？

这是我看到的屏幕，对于所有拥有它的应用程序来说，它几乎都是一样的——按钮、措辞、标题和一切都相同——唯一的变化是图标、名称和发行说明。

它还会经历相同的“下载更新、安装更新”（等等）提示，唯一的变化是应用程序的图标。

![软件更新程序](../Images/a8ca25d5fb1466112ba430234bfd980e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T05:01:40.813

这是来自 Sparkle 框架：

[http://sparkle.andymatuschak.org/](http://sparkle.andymatuschak.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T05:02:17.893

许多大型项目使用[Sparkle 框架](http://sparkle.andymatuschak.org/)进行更新。

# delphi - 运行时的 FireMonkey 属性编辑器

> ID：11597839
> 
> 赞同：0
> 
> 时间：2012-07-22T04:50:22.387
> 
> 标签：delphi, properties, editor, runtime, firemonkey

在 FireMonkey 的 HD 表单中，我可以在运行时调用 Brush 属性编辑器吗？

例如，当应用程序运行时，单击按钮后，我想在 Modal 中显示 TBrush 属性编辑器。当用户选择画笔类型时，我想将它应用到表单或其他组件上。这可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:10:59.647

画笔属性编辑器`TBrushDesigner`在 unit 中`FMX.Design.Brush`。它是一个设计时编辑器。

我怀疑是否有可能在运行时显示它，因为它具有设计时依赖性。但是如果你有 FMX 源代码，你可以尝试解决这个问题。

# c# - 动态更改属性

> ID：11597846
> 
> 赞同：0
> 
> 时间：2012-07-22T04:51:09.850
> 
> 标签：c#, wpf

我正在尝试使用控件名称、控件 AssemblyQualifiedName、属性名称和属性值的字符串来更改控件的属性

* * *

**我试过的：**

```
public void ChangeIt(string ctrlName, string typ,
                     string prop, string value)
{
    Type t = Type.GetType(typ);
    dynamic obj = Convert.ChangeType(App.Current.MainWindow.FindName(ctrlName), t);
    // Now how to
    // obj.Prop=value;
}

ChangeIt("Label1",
        "System.Windows.Controls.Label, PresentationFramework, Version=4.0.0.0,Culture=neutral,PublicKeyToken=31bf3856ad364e35",
        "Content", "Hellow World!"); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:22:29.003

您根本不需要类型，也不需要使用动态。

```
public void ChangeIt(string ctrlName, string typ, string prop, string value) {
     object obj = App.Current.MainWindow.FindName(ctrlName);
     obj.GetType().GetProperty(prop).SetValue(obj, value);
} 
```

# ruby-on-rails - 如何在视图中多次渲染布局中的多个部分？

> ID：11597851
> 
> 赞同：0
> 
> 时间：2012-07-22T04:54:27.790
> 
> 标签：ruby-on-rails, haml

我有一个包含许多模块的页面，这些模块具有可变部分，例如页眉、子标题、页脚、正文和 ID。我首先创建了一个布局并使用局部变量和一个主块来渲染布局以填充模板。

布局：

```
.container{:id => local_assigns[:id].present? ? id : nil}
    .header
        = title
        = subtitle
    .body
        = yield
    .footer
        = footer 
```

看法：

```
= render :layout => "shared/example", :locals => {:title => 'Heading', :subtitle => 'Sub heading', :footer => 'closing part'} do
    body of the template 
```

这很好用，但现在我想为副标题和页脚传递块，记住在一个页面中会有多个这种布局的实例。到目前为止，我能够解决这个问题的唯一方法是使用[`capture_haml`助手](http://haml.info/docs/yardoc/Haml/Helpers.html#capture_haml-instance_method)

以 Haml 作为局部变量查看：

```
- exampleSubtitle = capture_haml do
    %h3 subtitle
    %button action
= render :layout => "shared/example", :locals => {:title => 'Heading', :subtitle => exampleSubtitle, :footer => 'closing part'} do
        body of the template 
```

为了澄清这个问题，这个例子被简化了一点。在实践中，我担心`:locals`散列会增长到“对 Haml 来说很难看”的大小，并希望尽可能防止这种情况发生。

有什么方法可以定义上下文内容块以保持清洁？

一厢情愿的看法：

```
= render :layout => "shared/example", :locals => {:title => 'Heading'} do
    - content_for :subtitle do
        %h3 subtitle
        %button action
    - content_for :footer do
        %a{href => "#top"} top
    body of the template 
```

如意布局：

```
.container{:id => local_assigns[:id].present? ? id : nil}
    .header
        = title
        - if content_for?(:subtitle)
            = yield :subtitle
    .body
        = yield
    - if content_for?(:footer)
    .footer
        = yield :footer 
```

# python - 使用 numpy 的有损多项式回归

> ID：11597853
> 
> 赞同：1
> 
> 时间：2012-07-22T04:54:49.960
> 
> 标签：python, numpy, python-2.7, regression

手头的问题是我需要一种数学方法来模拟一组 x,y 值的符号。具体来说，我知道有一些方法可以使用多项式回归，但是，如果我只关心值的符号 (+/-)，有没有更简单的方法？我目前这样做的方法：

```
import numpy
numpy.polyfit(x_bytearray,y_bytearray) 
```

但是，我只关心结果是否给我一个正值，其中 y_bytearray 值为正，如果 y_bytearray 值为负，则为负。无论如何要摆弄 polyfit 代码以使用除最小二乘之外的不同加权方法吗？

**编辑** x 的符号是 sign(x)= x/abs(x) （-1 或 1），拟合的多项式或其他表达式必须只满足 sign(y_bytearray[i]) == sign(computed_y[i ]）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:02:33.610

最小二乘法很受欢迎，因为它简单且易于计算。还有很多其他可能的方法，但它们不太可能在库中实现，所以你必须自己做。

要研究的另一件事是二进制分类。分类方法有很多，但最好的分类方法之一是随机森林。

# c - 为什么 scanf("%i",a) 不像 0b101 那样采用二进制？

> ID：11597863
> 
> 赞同：5
> 
> 时间：2012-07-22T04:58:23.080
> 
> 标签：c

我对二进制表达式感到困惑，例如`0b10101`：

```
#include <stdio.h>
int main(void) {
  int a,b;
  b = 0b101;
  scanf("%i",&a);
  printf("the value of a is %d\n", a);
  printf("the value of b is %d\n", b);
} 
```

当我打字时`0b101`，

输出给了我

```
the value of a is 0;
the value of b is 5; 
```

而不是应该的两个 5。

有没有办法进行`scanf`二进制输入？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-22T04:59:54.033

标准 C 没有用于表示二进制符号的特定符号前缀。仅支持十进制、八进制和十六进制。尽管该`0b`前缀是为 C99 提出的（并被拒绝），但在某些编译器中实现它可能并不罕见。

即使您看到`0b`某些特定 C 实现支持的前缀作为扩展（GCC？），看到它被`scanf`的`%i`格式说明符识别也是相当令人惊讶的，因为它会破坏与标准实现的兼容性。后者必须在 停止阅读`b`。

从您的测试结果来看，尽管编译器似乎支持`0b...`整数文字，而标准库对它们一无所知。也许该库的文档对此有话要说，例如一些扩展的非标准格式说明符/标志`scanf`，使其能够识别`0b...`前缀。不过，我在 GCC 文档中看不到它。

# php - onKeyUp 事件计算不适用于 php 生成的表单中的以下行，除了第一个

> ID：11597872
> 
> 赞同：0
> 
> 时间：2012-07-22T05:01:44.900
> 
> 标签：php, forms, javascript-events

```
 --------------------------------------------------
    |No|Style No|Item Desc|Qty|Unit Price|Total Price|
    --------------------------------------------------
    |1 |Style 1 |Item 1   |44 |3.00      |132.00     |
    |2 |Style 2 |Item 2   |3  |3.00      |9.00       |
    |3 |Style 3 |Item 3   |23 |34.00     |782.00     |
    |4 |Style 4 |Item 4   |56 |78.00     |4368.00    |
    |5 |Style 5 |Item 5   |34 |58.00     |1972.00    |
    --------------------------------------------------
    (Submit button)
    GRAND TOTAL: RM[_________ textbox] (Calculate Total button) 
```

或者，这是屏幕截图：http: [//img715.imageshack.us/img715/8885/calcs.jpg](http://img715.imageshack.us/img715/8885/calcs.jpg)

你好，我有一个表格，表格是根据数据库中的表格从 php 脚本生成的。我一直在努力研究如何在第一行之后制作以下行以使用 javascript 处理 onkeyup 事件。第一行（在红色方框中）作为上面的屏幕截图链接，似乎运行良好，例如，如果我将第一行中“Qty”的值更改为“1”，它将自动计算并产生“Total”的输出价格”到“3.00”，但不在后面的行中，每当我插入新值时它什么都不做。奇怪的是，当我单击“计算总计”按钮时，它确实计算了包括“总计”文本框中的每一行

我似乎无法弄清楚问题到底是什么以及如何解决它。任何帮助将不胜感激。

下面是源代码：

```
 function calc(idx) {
      var price = parseFloat(document.getElementById("cost"+idx).value)*
                  parseFloat(document.getElementById("qty"+idx).value);
      //  alert(idx+":"+price);  
      document.getElementById("price"+idx).value= isNaN(price)?"0.00":price.toFixed(2);
    }

    function totalIt() {
      var qtys = document.getElementsByName("qty[]");
      var total=0;
      for (var i=1;i<=qtys.length;i++) {
        calc(i);  
        var price = parseFloat(document.getElementById("price"+i).value);
        total += isNaN(price)?0:price;
      }
      document.getElementById("total").value=isNaN(total)?"0.00":total.toFixed(2)                       
    }      

    window.onload=function() {
      document.getElementsByName("qty[]")[0].onkeyup=function() {calc(1)};
      document.getElementsByName("cost[]")[0].onkeyup=function() {calc(1)};
    }
    </script>
    </head>

    <body>
    <?php
    $sql = "SELECT * FROM transaction_item";
    $result = mysql_query($sql,$rfps) or die($sql."<br/><br/>".mysql_error());

    //start a table
    echo '<form name="form1" method="post" action="">
    <table  width="350px" border="1" style="border-collapse:collapse;">';

    //start header of table
    echo '<tr>
    <th id="datatable" > <div align="center">No</div></th>
    <th style="display:none;"><div align="center">Trans<br />Item<br />ID</div></th>
    <th style="display:none;"><div align="center">Trans<br />Info<br />ID</div></th>
    <th><div align="center">Style<br />No</div></th>
    <th><div align="center">Item<br />Desc</div></th>
    <th><div align="center">Qty</div></th>
    <th><div align="center">Unit<br />Price</div></th>
    <th formula="cost*qty"summary="sum"><div align="center">Total<br />Price</div></th>
    </tr>';

    //loop through all results
    $i=1;
    while($r=mysql_fetch_object($result)){

    //print out table contents and add id into an array and email into an array
    echo '<tr>
    <td id="datatable"> <div align="center">'.$i.'</div></td>
    <td style="display:none;"><div align="center">'.$r->trans_item_id.'</div></td>
    <td style="display:none;"><div align="center">'.$r->trans_info_id.'</div></td>
    <td><div align="center"><input type="text" id="style'.$i.'" name="style[]" value="'.$r->style_no.'" size="10" /></div></td>
    <td><div align="center"><input type="text" id="item'.$i.'" name="item[]" value="'.$r->item_desc.'" size="25" /></div></td>
    <td><div align="center"><input type="text" id="qty'.$i.'" name="qty[]" value="'.$r->qty.'" size="2" /></div></td>
    <td><div align="center"><input type="text" id="cost'.$i.'" name="cost[]" value="'.$r->unit_price.'" size="5" /></div></td>
    <td><div align="center"><input type="text" id="price'.$i.'" name="price[]" value="'.$r->total_price.'" size="6" /></div></td>
    </tr>';
    ++$i;
    }

    //submit the form
    echo'</table>
    <input type="submit" name="Submit" value="Submit">
    <p><strong>GRAND TOTAL: RM</strong>
    <input type="text" readonly="readonly" id="total" />
    <input type="button" value="Calculate Total" onclick="totalIt()" /></p>
    </form>';
    ?>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T05:46:34.513

好吧，快速浏览一下，问题在于您只获取了第一个`qty[]`元素和第一个`cost[]`元素来添加侦听器。

看看 JavaScript 的最后一点，那里 -`window.onload = function (){...`部分：

```
window.onload=function() {
  document.getElementsByName("qty[]")[0].onkeyup=function() {calc(1)};
  document.getElementsByName("cost[]")[0].onkeyup=function() {calc(1)};
} 
```

这很好，但这意味着您只抓取每个盒子的第一个盒子，并发送“qty1”和“cost1”数据。

试试这个，而不是：

```
window.onload = function () {
    var qtyArr = document.getElementsByName("qty[]"),
        costArr = document.getElementsByName("cost[]"),
        length = qtyArr.length,
        i = 0, func = null;

    for (; i < length; i++) {
        func = (function (i) { return function () { calc(i + 1); }; }(i));
        qtyArr[i].onkeyup = func;
        costArr[i].onkeyup = func;
    }
}; 
```

更合适的方法可能是使用事件委托：

1.  侦听`onkeyup`包含这些行的整个表。
2.  如果编辑的元素（使用`onkeyup`）是您要使用的元素：

    if (event.target.name === "qty[]" || event.target.name === "cost[]") {...}

3.  `calc`像这样开火：

    `calc( event.target.id.replace("qty","").replace("cost","") );`

如果您想要一个快速而肮脏的解决方案，第一种方法应该可以正常工作。

# html - 在表格标签中使用行跨度时样式表错误？

> ID：11597882
> 
> 赞同：0
> 
> 时间：2012-07-22T05:04:21.060
> 
> 标签：html

我有一个示例代码：

```
<table border="1">
    <thead>
        <tr>
           <th></th>
           <th>Brand name</th>
           <th>Model name</th>
        </tr>
    </thead>
    <tbody>
        <tr>
           <td rowspan="2"></td>
           <td>HTC</td>
           <td>P6300,
               Advantage X7500
           </td>
        </tr>
        <tr>
           <td rowspan="7"></td>
           <td>Samsung</td>
           <td>
              M2710 Beat Twist,
              I7500 Galaxy,
              M7500 Emporio Armani,
              Galaxy Ace Plus S7500,
              S5610,
              P7500 Galaxy Tab 10.1 3G,
              S7230E Wave 723
           </td>
       </tr>
   </tbody>
</table> 
```

但结果是错误样式表： ![错误](../Images/64eed29c889f0a666c6832de72f1c552.png)

输出是： ![输出](../Images/04454f77ad06aa3cf0620fa2377843db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:13:16.927

每行中必须有相同数量的`td`标签。这包括您拥有的`rowspan`.

你不能`rowspan`在第一行有一个 td 然后在下一个那个地方有一个 td 。取出，`<td rowspan="7"></td>`因为`td`在上面的行中有一个`rowspan`属性已经占了这个属性。

在您的代码中，您有 rowspan 2 td（薄的），然后是 rowspan 7 one（三星左侧的空方格），然后`td`是带有数据的两个 s。这个额外的 td (rowspan 7 one) 将其他的推到右边。

[**演示**](http://jsbin.com/ewusef)

您可能想要的另一件事是模型名称文本都在一行中。您应该`<br />`在每一行之后放置以使其在浏览器中显示。

# ruby-on-rails - 使用 Devise/Omniauth 进行身份验证后如何使用 Facebook API？

> ID：11597884
> 
> 赞同：2
> 
> 时间：2012-07-22T05:05:40.507
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, devise, omniauth

我正在使用 Devise + `omniauth-facebook`gem 使用 Facebook 登录到我的 Rails 3 应用程序（请参阅[使用 Devise 的 Rails 3：如何允许某人使用他们的 Facebook 帐户登录？](https://stackoverflow.com/questions/3580557/rails-3-using-devise-how-to-allow-someone-to-log-in-using-their-facebook-accoun)）。

但是一旦通过身份验证，我如何使用 Graph/OpenGraph API？使用其他宝石，例如考拉？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:22:34.743

您可以使用 gem，或者只是将其视为“RESTFully”。[从Heroku](https://devcenter.heroku.com/articles/facebook-ruby#the_facebook_graph_api)查看一些有用的文档。

你也有一个类似的问题：[Facebook Graph API gem](https://stackoverflow.com/questions/5875348/facebook-graph-api-gem)

# windows - x64 系统中的 SSDT 挂钩替代方案

> ID：11597888
> 
> 赞同：3
> 
> 时间：2012-07-22T05:06:52.880
> 
> 标签：windows, 64-bit, kernel, hook, low-level

我读了一点，发现在 Windows 7 x64 系统中使用驱动程序的 SSDT 挂钩更难，这是故意的，因为在 x32 系统中不会发生补丁保护/驱动程序签名。

那么，x64 系统还有其他替代方案吗？我的意思是，还有其他方法可以达到相同的结果吗？（全局挂钩一个ntdll api）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:28:03.123

[您可以使用DLL 注入](http://www.codeproject.com/Articles/4610/Three-Ways-to-Inject-Your-Code-into-Another-Proces)方法实现用户模式挂钩，因为这适用于 x86 和 x64。如果你想让钩子成为全局的，你需要将 DLL 注入到每个进程中，包括新创建的进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T05:41:35.350

x64 中不允许使用 SSDT。文件系统或微型过滤器驱动程序是一种更改任何默认系统行为的方法。你想达到什么目标？

# java - 在硬件级别模拟按键 - Windows

> ID：11597892
> 
> 赞同：11
> 
> 时间：2012-07-22T05:08:11.943
> 
> 标签：java, python, hardware, keystroke, simulate

我正在寻找一种语言或库，以允许我尽可能地模拟击键，而无需实际按下键。

（我对击键级别的具体测量是当我的计算机已经在运行按键侦听器（例如 MouseKeys 和 StickyKeys）时，它是否会产生与物理按键相同的输出）。

我尝试了许多按键模拟方法；java AWT 库、Java win32api、python win32com sendKeys、python ctypes Key press 以及更多用于 python 和 Java 的库，但它们都没有在与实际硬件足够接近的水平上模拟击键。
（当 Windows 鼠标键处于活动状态时，发送冒号、分号或数字键盘 ADD 键的击键只会产生这些字符，而物理按下则执行鼠标键单击）

我相信这样的方法必须涉及将笔画直接发送到应用程序，而不是仅将它们传递给操作系统。

我的想法是，这些高级（高于操作系统代码）语言的库不会产生任何足够的东西。我担心我可能不得不屈服于某种 BIOS 编程。

有人对此事有任何有用的信息吗？
我将如何模拟低级语言的按键？
我应该寻找我的硬件特定的解决方案（某种富士通硬件 API）吗？

我几乎觉得将机器人编程为简单地坐在硬件旁边并按下按键会更容易。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T08:08:50.223

第二种解决方案，超级复杂，大量的虚拟化，恶魔般的，完全未经测试，但理论上应该可以工作，除非 datasnip 程序实际上并没有写入键盘缓冲区，而是像你一直在尝试那样模拟击键。那会很糟糕，我会发现对他们产品的描述具有高度误导性。

你需要：

*   [http://www.priority1design.com.au/datasnip.html](http://www.priority1design.com.au/datasnip.html)
*   [http://sourceforge.net/projects/com0com/](http://sourceforge.net/projects/com0com/)

以及一些写入 com 端口的知识......其中，看起来这里有一个很好的 python 模块：http: [//pyserial.sourceforge.net/](http://pyserial.sourceforge.net/)

首先，编写一个小程序，根据需要将字符、十六进制代码等发送到您选择的 COM 端口。其次，使用 com0com 创建一个虚拟 COM 端口对。此时，将您的程序连接到创建的 COM 端口之一，并将 datasnip 连接到另一个，确保通信双方使用相同的波特率、奇偶校验和停止位以及数据长度参数。

就操作系统而言，此时您应该拥有一个与硬件相同的键盘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-27T19:47:29.513

我使用了这个解决方案[http://oblita.com/interception.html](http://oblita.com/interception.html) 它完全满足我的需求（发送击键直接输入游戏）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T06:05:38.093

I'm not on a Windows box to test it against MouseKeys, so no guarantees that it will work, but have you tried AutoHotkey?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T05:43:55.417

可以使用 MSDN 语言吗？它们相当简单且有据可查（谷歌搜索通常比 msdn 网站更好，用于导航）

我发现了这一点，我无法告诉你它是否在足够接近硬件的水平上模拟击键，但它似乎确实能够生成其他程序可以识别的击键事件，这就是你的最终目标。

*   [http://msdn.microsoft.com/en-us/library/ms171548.aspx](http://msdn.microsoft.com/en-us/library/ms171548.aspx)

'Send' 和 'SendWait' 方法似乎是关键。

*   [http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.sendwait.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.sendwait.aspx)

神速。

# mysql - 可以不使用密码访问我的sql，但无法使用密码访问

> ID：11597896
> 
> 赞同：2
> 
> 时间：2012-07-22T05:08:36.637
> 
> 标签：mysql, mysql-error-1045

我使用创建一个新的mysql用户

```
CREATE USER 'new-username'@'localhost' IDENTIFIED BY 'new-password'; 
GRANT ALL ON *.* TO 'new-username'@'localhost' WITH GRANT OPTION; 
```

我可以通过

```
 mysql -u new-username 
```

但是当我尝试使用密码访问 mysql 时收到此错误消息

```
mysql -u new-username -p 
```

错误信息

```
ERROR 1045 (28000): Access denied for user 'new-username'@'localhost' (using password: YES) 
```

我错过了什么？Mysql版本为Server版本：5.5.24-0ubuntu0.12.04.1（Ubuntu）

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T12:02:33.423

在这里您需要输入密码，但您没有输入任何密码。

```
CREATE USER 'new-username'@'localhost' IDENTIFIED BY 'new-password'; 
GRANT ALL ON *.* TO 'new-username'@'localhost' WITH GRANT OPTION;

mysql -u new-username -p new-password 
```

如果你想从中删除密码，那么只需使用以下行

```
SET PASSWORD FOR  'new-username'@'localhost' =  '' 
```

# ruby-on-rails - Rails 3 ActiveRecord 嵌套关联选择查询

> ID：11597898
> 
> 赞同：1
> 
> 时间：2012-07-22T05:10:11.817
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在尝试为我制作的测验管理员制作一个 API。

我有一个测验模型，它有_many 问题和has_many 结果问题模型也有_many 答案

我希望 url`/data/quiz/7`将所有问题+答案和结果返回到 id=7 的测验

这是我目前的方法。

```
def quiz
    @quiz = Quiz.find(params[:id])

    @questions = @quiz.questions.select('id, content') # returns only selected fields
    @results = @quiz.results.select('id, content, points_limit') # returns only selected fields

    @questions.each do |question|
        question['answers'] = question.answers.select('id, content, points') #returns whole object
    end

    @return = Hash.new
    @return['questions'] = @questions
    @return['results'] = @results

    respond_to do |format|
        format.json { render json: @return }
        format.xml { render xml: @return }
    end
end 
```

一切正常，除了答案返回完整的答案对象，包括created-at、id、updated-at 等，我想要的只是查询中选择的字段，就像我拥有的​​一样。

为什么 .select 适用于 @questions 和 @results 而不是关联的 @answers？

无论我尝试什么，它似乎都忽略了答案循环的选择语句并总是返回完整的对象。

--

在控制台中......我知道做同样的事情

```
question.answers.select('id, content, points') 
```

返回正是我所追求的。所以这与我将它放入数组/哈希的方式有关，我猜想但仍然无法解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T07:28:54.710

我想如果你尝试这样的事情，它会起作用：

```
@answers = Answer.select([:id, :content, :points])
                 .where(question_id: @questions.pluck(:id)) 
```

这与以下内容相同：

```
SELECT id, content, points
FROM answers
WHERE question_id in (<question_ids array>) 
```

# python - 为什么列表中允许使用尾随逗号？

> ID：11597901
> 
> 赞同：160
> 
> 时间：2012-07-22T05:11:30.023
> 
> 标签：python, list, syntax, comma, trailing

我很好奇为什么在 Python 中列表中的尾随逗号是有效的语法，而 Python 似乎只是忽略了它：

```
>>> ['a','b',]
['a', 'b'] 
```

当它是一个元组时它是有意义的，因为`('a')`and`('a',)`是两个不同的东西，但是在列表中？

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2012-07-22T05:15:53.237

主要优点是它使多行列表更易于编辑，并且减少了差异中的混乱。

改变：

```
s = ['manny',
     'mo',
     'jack',
] 
```

到：

```
s = ['manny',
     'mo',
     'jack',
     'roger',
] 
```

差异仅涉及一行更改：

```
 s = ['manny',
       'mo',
       'jack',
+      'roger',
  ] 
```

当省略尾随逗号时，这击败了更令人困惑的多行差异：

```
 s = ['manny',
       'mo',
-      'jack'
+      'jack',
+      'roger'
  ] 
```

后一个差异使得更难看出只添加了一行，而另一行没有更改内容。

它还降低了这样做的风险：

```
s = ['manny',
     'mo',
     'jack'
     'roger'  # Added this line, but forgot to add a comma on the previous line
] 
```

并触发[隐式字符串文字连接](https://stackoverflow.com/questions/18842779/string-concatenation-without-operator-in-python)，产生`s = ['manny', 'mo', 'jackroger']`而不是预期的结果。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-07-22T05:14:29.157

允许在数组中使用尾随逗号是一种常见的语法约定，C 和 Java 等语言允许这样做，而 Python 似乎已将这种约定用于其列表数据结构。它在生成填充列表的代码时特别有用：只需生成一系列元素和逗号，无需将最后一个视为特殊情况，末尾不应有逗号。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-07-22T05:18:53.917

它有助于消除某种错误。有时在多行上编写列表会更清晰。但是在以后的维护中，您可能需要重新排列这些项目。

```
l1 = [
        1,
        2,
        3,
        4,
        5
]

# Now you want to rearrange

l1 = [
        1,
        2,
        3,
        5
        4,
]

# Now you have an error 
```

但是，如果您允许尾随逗号并使用它们，您可以轻松地重新排列行而不会引入错误。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-22T05:24:35.987

元组是不同的，因为`('a')`它使用隐式延续和`()`s 作为优先运算符进行扩展，而`('a',)`它指的是长度为 1 的元组。

你原来的例子是`tuple('a')`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-15T16:59:11.127

主要原因是使差异不那么复杂。例如，您有一个列表：

```
list = [
    'a',
    'b',
    'c'
] 
```

并且您想向其中添加另一个元素。然后你最终会这样做：

```
list = [
    'a',
    'b',
    'c',
    'd'
] 
```

因此，diff 将显示两行已更改，首先添加'，'与'c'一致，并在最后一行添加'd'。

因此，python 允许在列表的最后一个元素中使用尾随 ','，以防止可能导致混淆的额外差异。

# javascript - 根本无法让 JQuery UI Selectable 工作

> ID：11597902
> 
> 赞同：2
> 
> 时间：2012-07-22T05:11:42.520
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-selectable

我在让 JQuery UI 可选择与我的网站一起工作时遇到了一些麻烦。我对编码还是很陌生，我不确定我做错了什么。我已经搜索了相关问题，但找不到任何让我弄清楚的问题。

我正在尝试创建本质上是一个荣耀的工作标签制造商，并且希望能够使用鼠标“套索”选择网格中的单元格。但由于某种原因，我根本无法选择工作。

这是js：

```
 $('document').ready(function() {

        for (i=0; i<117;i++)    {
                $('#plateActual').append('<div class="cell"/>');
                }

                $('#plateActual').selectable();
        }); 
```

这是HTML：

```
 <!DOCTYPE html>
<html>
        <head>
                    <title></title>
                    <link rel="stylesheet" href="style.css" />
                    <link type="text/css" href="css/smoothness/jquery-ui-1.8.21.custom.css" rel="Stylesheet" /> 
                    <script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
                    <script type="text/javascript"  src="script.js"></script>
                    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>

        </head>

        <body>
        <div id="wrapper">

                 <div id="navbar">      
                 </div>
                 <div id="controlPanel">
                 <p>test<br>test<br>test<br>test<br>test<br>test<br></p>
                 <p>test<br>test<br>test<br>test<br>test<br>test<br></p>
                 <p>test<br>test<br>test<br>test<br>test<br>test<br></p>
                 <p>test<br>test<br>test<br>test<br>test<br>test<br></p>
                 <p>test<br>test<br>test<br>test<br>test<br>test<br></p>
                 <p>test<br>test<br>test<br>test<br>test<br>test<br></p>

                 </div>
                 <div id="plateEditor">
                            <div id="plateActual">

                            </div>

                 </div>
                 <div id="bottom">
                 </div>
        </div>

        <script type="text/javascript"  src="script.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
        <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>

        </body> 
```

这是CSS：

```
 body   {
        margin: 0px auto;
        padding: 0;
}

p       {
        color: yellow;
}

#wrapper    {
                border: 1px dotted black;
                width: 980px;
                margin: 0px auto;
                padding: 0;
}

#navbar  {
             width: 980px;
             background: black;
             height: 50px;
             position: fixed;
             margin: 0;
             padding: 0;
             top: -10px;
}

#controlPanel        {

                                 width: 250px;
                                 background-color: red;
                                 float:left;
                                 top: 100px;    
                                 margin-bottom: 0;

}

#plateEditor             {
                                 position:    relative;
                                 overflow: auto;
                                 width: 730px;
                                 float:right;
                                 top: 100px;
                                 margin-bottom: 0;
                                 margin-top: 150px;
}

#plateActual             {
                                 border: 1px solid;
                                 width: 403px;
                                 height: 279px;
                                 margin: 0px auto;
                                 pading: 0;
}

#bottom                      {
                                 width: 980px;
                                 height: 30px;
                                 background:green;
                                 clear: both;
                                 bottom: 0;
                                 margin: 0px auto;
                                 padding: 0;
}

.cell                            {
                                 float: left;
                                 width: 29px;
                                 height: 29px;
                                 border: 1px    dotted;

} 
```

如果我的代码杂乱无章，我深表歉意。我仍在研究如何最好地保持其井井有条，并通常以可接受的方式编写它。非常感谢你的帮助。

更新：我已经做出了 Ando 建议的更改，但我仍然无法选择工作。我尝试将 #plateActual 更改为 ol 或 ul 并附加 li.cell ，但这也不起作用。

我想知道原因是否是我的 css 以某种方式干扰了它，但我不确定如何在不破坏格式的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T05:54:23.277

append 返回的元素将是执行添加的元素-在您的情况下`plateActual`-因此您将把`cell`类添加到错误的元素中。

当您附加单元格时 - 您使用`$('<div/>')`- 这将转换为“`'<div/>'`从 dom 获取类型元素并将它们移动到我的 'plateActual' 元素中” - 您应该在没有 $ 的情况下添加，因为您正在创建一个尚不存在的元素。

这样的事情应该可以工作（[http://jsfiddle.net/k3YJY/](http://jsfiddle.net/k3YJY/)）：

```
for (var i=0; i<5;i++)    {                          
          $('#plateActual').append('<div class="cell"/>');                                           
} 
```

# php - 将Javascript变量保存到PHP变量？获取、发布、Cookie

> ID：11597905
> 
> 赞同：0
> 
> 时间：2012-07-22T05:13:45.223
> 
> 标签：php, javascript, database, variables

我想保存`cnt1`并`tim`进入 MySql 数据库。我知道 Javascript 是客户端，而 PHP 是服务器端，可用的选项是使用`POST GET`and`COOKIE`方法。但我似乎无法在我的代码中应用。

它实际上是一个来自[http://www.hscripts.com/scripts/jquery/memory-game.php](http://www.hscripts.com/scripts/jquery/memory-game.php)的记忆游戏，玩游戏的链接是[http://www.hscripts.com/scripts/jquery/memory-](http://www.hscripts.com/scripts/jquery/memory-game.php)游戏[.php](http://www.hscripts.com/scripts/jquery/memory-game.php) 我想节省时间和移动次数。

有什么建议吗？请非常感谢。

```
function finish()
{

var cnt1 = $("#counting").val();

var tim=$("#timecount").val();

alert("Congratulations! You have won the game Total Move : "+cnt1+"   Time : "+tim+" seconds");

    if(confirm("Do you want to play again"))
    {
        stopCount();
        window.location.href="index.php";
    }
    else
    {
        window.location.href="leaderboard.php";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:29:38.587

只是通过在 url 中连接将它们发送到 php 页面

```
if(confirm("Do you want to play again"))
    {
        stopCount();
        window.location.href="index.php?cnt1="+cnt1+"&time="+tim;
    }
    else
    {
        window.location.href="leaderboard.php?cnt1="+cnt1+"&time="+tim;
    } 
```

并在 php 页面上访问为

```
$_GET['tim'];
$_GET['cnt1']; 
```

# php - 从另一个站点获取数据时的简单正则表达式

> ID：11597908
> 
> 赞同：0
> 
> 时间：2012-07-22T05:14:55.060
> 
> 标签：php, regex

*   我想从 url 获取第一个帖子内容到我的网站。这是我需要获取的网址：

`http://www.vietvbb.vn/up/forumdisplay.php?f=15`

*   所以我用萤火虫来做。我需要在这个 html 代码之间获取第一个帖子内容：

    ```
    <td id="td_post_11229294" class="alt1" style="border-right: 0px solid #262626"><--content that i need--></td> 
    ```

*   我这样做了：

    ```
     $url = 'http://www.vietvbb.vn/up/showthread.php?t=65690';
    $data = file_get_contents($url);
    preg_match('/<td class="alt1" id="td_post_(.*?)">\r\n(.*?)\r\n<\/td>/s', $data, $tc);echo '<pre>';print_r($tc);echo '</pre>'; 
    ```

*   但正如您所见，它不仅返回了我在 td 标签中真正需要的内容，**它还为我提供了 td 标签中的第一个内容帖子和一个 id=postmenu_xxx 的 div 标签和一个 class=tborder 的 table 标签（这个 div 和 table，他们是我不需要的东西）**：

    ```
    <div id="postmenu_11229294_menu" class="vbmenu_popup" style="display:none">.....</div>
    <table class="tborder" cellspacing="0" cellpadding="3" border="0" align="center" width="100%">....</table> 
    ```

*   **我只希望它在上面的 td 标记之间返回我的内容。那么，我该怎么办？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T05:30:33.890

你的 preg_match 可能需要这样的东西：

```
preg_match("/<td id=\"td_post_\d+[^>]+>([^<]+)<\/td>/",$var,$between); 
```

它寻找一个 id 为 td_post_ 加上 1 个或多个数字的开始 td 标签，然后匹配 1 个或多个非结束标签字符，然后开始捕获非开始标签字符。

以上将适用于简单的情况（它假设在 td 标签中没有嵌入其他标签）。如果您需要更复杂的东西，您可能应该使用可以正确解析 DOM 的模块，而不是尝试重新发明轮子。

编辑：听起来您尝试解析的内容格式不正确（来自您的错误消息），但这不应阻止您获得所需的内容。例如，JQuery 具有强大的 DOM 解析功能，可以让您抓取该 td 标记内的内容。

也就是说，你总是可以尝试一个不太具体的正则表达式，如下所示，但同样，不能替代适当的解析器：

```
preg_match("/<td id=\"td_post_\d+[^>]+>(.+?)<\/td>/",$var,$between); 
```

# ruby-on-rails - Rails 模型中的附近地区

> ID：11597913
> 
> 赞同：3
> 
> 时间：2012-07-22T05:16:40.767
> 
> 标签：ruby-on-rails, ruby, location, associations

我有一个名为 Locality 的模型，它基本上是一个城市（或大城市中的郊区）。

每个地区都有一个相邻地区的简短列表 - 这是为了帮助搜索。

我在这里阅读了数十篇关于自我参照 has_many、:through associations 等的帖子，但我仍然无法弄清楚这一点。

基本上我想要结束的是：

```
l = Locality.find(1)
n = l.nearby_localities
# n should now hold a list of Locality ids 
```

做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:33:06.563

你如何确定`nearby_localities`？

其实，你可以有一个简单的方法。

```
class Localities < ActiveRecord::Base

  # Previous Code ...

  def nearby_localities
    # Implementation here.
  end

end 
```

把事情简单化！

# android - 如何在 Android 中实现 Google Places API？

> ID：11597915
> 
> 赞同：2
> 
> 时间：2012-07-22T05:17:57.397
> 
> 标签：android, google-maps, overlay, google-places-api

我正在尝试开发一个应用程序，允许用户通过实现 Google Places API 来定位附近的机构。但是，没有任何关于如何完成此操作的综合教程/示例。我已经能够拼凑一些代码，但我仍然不知道如何解析结果并随后将它们显示在我的叠加层上。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:27:00.337

您是否知道更具体的问题出在哪里（解析结果或放置引脚）？您看到什么类型的错误？

对于解析 Places API 结果，有一个教程： [https ://developers.google.com/academy/apis/maps/places/autocomplete-android](https://developers.google.com/academy/apis/maps/places/autocomplete-android)

本教程中的以下代码应该可以帮助您开始解析结果。为自动完成和搜索 API 返回的 JSON 相似，但不一样。请务必遵循[https://developers.google.com/places/documentation/#PlaceSearchResults](https://developers.google.com/places/documentation/#PlaceSearchResults)中的格式。

```
private static final String LOG_TAG = "ExampleApp";

private static final String PLACES_API_BASE = "https://maps.googleapis.com/maps/api/place";
private static final String TYPE_AUTOCOMPLETE = "/autocomplete";
private static final String OUT_JSON = "/json";

private static final String API_KEY = "YOUR_API_KEY";

private ArrayList<String> autocomplete(String input) {
    ArrayList<String> resultList = null;

    HttpURLConnection conn = null;
    StringBuilder jsonResults = new StringBuilder();
    try {
        StringBuilder sb = new StringBuilder(PLACES_API_BASE + TYPE_AUTOCOMPLETE + OUT_JSON);
        sb.append("?sensor=false&key=" + API_KEY);
        sb.append("&components=country:uk");
        sb.append("&input=" + URLEncoder.encode(input, "utf8"));

        URL url = new URL(sb.toString());
        conn = (HttpURLConnection) url.openConnection();
        InputStreamReader in = new InputStreamReader(conn.getInputStream());

        // Load the results into a StringBuilder
        int read;
        char[] buff = new char[1024];
        while ((read = in.read(buff)) != -1) {
            jsonResults.append(buff, 0, read);
        }
    } catch (MalformedURLException e) {
        Log.e(LOG_TAG, "Error processing Places API URL", e);
        return resultList;
    } catch (IOException e) {
        Log.e(LOG_TAG, "Error connecting to Places API", e);
        return resultList;
    } finally {
        if (conn != null) {
            conn.disconnect();
        }
    }

    try {
        // Create a JSON object hierarchy from the results
        JSONObject jsonObj = new JSONObject(jsonResults.toString());
        JSONArray predsJsonArray = jsonObj.getJSONArray("predictions");

        // Extract the Place descriptions from the results
        resultList = new ArrayList<String>(predsJsonArray.length());
        for (int i = 0; i < predsJsonArray.length(); i++) {
            resultList.add(predsJsonArray.getJSONObject(i).getString("description"));
        }
    } catch (JSONException e) {
        Log.e(LOG_TAG, "Cannot process JSON results", e);
    }

    return resultList;
} 
```

# android - Android可以支持dp小于1dp吗？

> ID：11597916
> 
> 赞同：43
> 
> 时间：2012-07-22T05:18:10.157
> 
> 标签：android

我正在制作日历，我需要一个网格。问题是边界，或者更确切地说是每个网格之间的空间，这是我用来模拟网格的，是 1 dp。但是比较厚。我正在寻找其他有边框的日历应用程序，它们非常薄。即使我要使用一个`drawable`形状并将其设为 1dp，它仍然具有那个厚度。我尝试使用 0.5，但这似乎不起作用。那不可能吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-02-13T05:45:49.787

Android 确实允许您在`dp`XML 中输入小数值，但我不确定我是否会推荐它，因为结果变得不太容易预测/计算。设备`dp`使用（基本上）以下公式将值转换为像素：

```
px = (int)(scale * dp + 0.5) 
```

（即设备密度比例四舍五入到最接近的整个像素值）

该`scale`值将基于设备的屏幕密度：

*   MDPI = 1
*   HDPI = 1.5
*   XHDPI = 2
*   XXHDPI = 3

因此`0.5dp`对于上述密度会导致 {1px, 1px, 1px, 2px}，而`1dp`将是 {1px, 2px, 2px, 3px}。像这样的微小值`0.1dp`会解析为 {1px, 1px, 1px, 1px}，因为上述公式中小于 1 的任何值都会解析为单个像素，除非该值是明确`0dp`的（不可能绘制比单个像素宽度更薄的东西）。

如果您想确保使用尽可能薄的宽度，最好使用明确定义宽度，`px`而不是像`dp`. 设置值`1px`将在所有设备上使用单个像素进行绘制，并且比希望`0.5dp`或`0.1dp`执行相同操作更具可读性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-23T15:43:47.847

是的。

我设置为 0.1dp，在我的 4" ME860 DRIOD 上它小于 1dp。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-09T16:51:16.563

简单的答案是肯定的，你可以。

简单解决您的问题（即实现最细的线）将thickness 设置为：1 **px**

我建议 px 因为它不依赖于设备，它是可用的最小度量，而且它不会转换为另一种形式，因此没有舍入错误或任何意外渲染......让我解释一下。

Android 布局 xml 文件或尺寸 xml 值文件将允许您输入 dp 的十进制值。

但是：我已经在许多设备上尝试了从 0.1dp 到 1dp 的几个值。取决于设备 - 它可能不会像您期望的那样呈现。

在较低像素密度的设备上，与另一侧相比，线条可能会在一侧渲染得更粗，即使它们被编码为具有相同的......这是由于在截断转换为 dp 到 px 值时引入的不准确性 - （正如 Devunwired 提到的):

```
px = (int)(scale * dp + 0.5) 
```

像素**(px)**是最小单位，必须是整数。所以 - 如果您的目标是简单地拥有尽可能小的线条/边框，为什么不将其设置为：

1**像素**

我希望这有帮助！

# php - 只有硬编码的字符串必须在 PHP 和 Mysql 中转义

> ID：11597918
> 
> 赞同：1
> 
> 时间：2012-07-22T05:18:17.477
> 
> 标签：php, mysql, unix, escaping

我最近将服务器从 Ubuntu 更改为 UNIX。在 MySQL 和 PHP 的 Ubuntu 安装上，所有字符串在插入数据库之前都需要进行转义，并且从数据库中读取时不需要额外的转义字符。然而，在新系统上，用户输入到表单中的字符串在没有被修改的情况下，在没有转义的情况下被很好地插入到数据库中。如果转义，则会添加额外的字符。但随后我需要使用简单的 .= 向用户输入的字符串添加一个标签，并且除非转义，否则该字符串拒绝输入数据库。并且字符串的原始用户输入部分有额外的转义字符。有什么简单的解决方案吗？（PHP 5.2.17、MySQL 5.1、Apache 2.2.19）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:49:29.103

[此处](http://de3.php.net/manual/en/security.magicquotes.php)有关于**魔术引号**及其影响脚本的说明。基本上，此功能会影响来自浏览器的用户输入，但不会影响您自己创建的其他字符串。

听起来相关设置`magic_quotes_gpc`在您的旧服务器上已关闭，但在新服务器上已激活。我总是根据运行时的设置删除魔术引号，以便在所有机器上进行相同的设置，即使我无法控制`php.ini`.

尝试在任何输入参数处理之前将其放在中央包含文件中：

```
// Strip slashes from a string or array recursively
function stripshashesr($text)
{
    if (is_array($text))
    {
        foreach($text as $key => $value) $text[$key]=stripshashesr($value);
        return $text;
    }
    return stripslashes($text);
}

// Strip slashes from GPC
if (function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc())
{
    foreach($_GET as $key => $value) $_GET[$key]=stripshashesr($value);
    foreach($_POST as $key => $value) $_POST[$key]=stripshashesr($value);
    foreach($_REQUEST as $key => $value) $_REQUEST[$key]=stripshashesr($value);
    foreach($_COOKIE as $key => $value) $_COOKIE[$key]=stripshashesr($value);
} 
```

这会根据设置自动删除魔术引号。

# sql - SQL Server Express 服务在哪里？

> ID：11597925
> 
> 赞同：1
> 
> 时间：2012-07-22T05:19:56.053
> 
> 标签：sql

我已经在 VirtualBox 4.1.18 上的干净（只是没有任何第三方软件的操作系统）w7x64 上安装了 SQL Server 2012 Express 高级版。我已经选择了所有需要的安装选项，但安装后虚拟机上的来宾操作系统上没有运行 SQL Server Express 服务。此外，我的主机操作系统上安装了相同版本的 SQL Server，它也是 w7x64。请给我任何线索，以了解可能导致此问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:37:08.363

诊断步骤：

1.  检查 SQL 服务正在运行的控制面板 -> 服务
2.  尝试从本地计算机连接，输入`osql -E -S localhost\sqlexpress`命令提示符。

# opengl - OpenGL - 使用着色器进行简单渲染的问题

> ID：11597926
> 
> 赞同：0
> 
> 时间：2012-07-22T05:20:12.480
> 
> 标签：opengl, shader

我试图让我非常简单的着色器与我当前的 OpenGL 设置一起工作。我正在使用着色器管理器，并且在加载着色器时，所有输出都表示它们已正确加载。

这是我的数据：

```
static const GLfloat g_vertex_buffer_data[] = {
    -1.0f, -1.0f, 0.0f,
    1.0f, -1.0f, 0.0f,
    0.0f,  1.0f, 0.0f,
}; 
```

这是我设置缓冲区的地方：

```
// This will identify our vertex buffer
GLuint vertexbuffer;

// Generate 1 buffer, put the resulting identifier in vertexbuffer
glGenBuffers(1, &vertexbuffer);

// The following commands will talk about our 'vertexbuffer' buffer
glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);

// Give our vertices to OpenGL.
glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW); 
```

这是我使用经过测试且工作的着色器加载器对我的着色器的声明：

```
Shader shader;
shader.loadFromFile(VERTEX_SHADER, resourcePath() + "tri.vert");
shader.loadFromFile(FRAGMENT_SHADER, resourcePath() + "tri.frag");
shader.createAndLinkProgram();
shader.use();
shader.addAttribute("position");
shader.unUse(); 
```

然后将此着色器的属性存储在地图中。这是渲染调用：

着色器.use();

```
 glEnableVertexAttribArray(shader["position"]);
    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
    glVertexAttribPointer(
                          shader["position"], // attribute 0\. No particular reason for 0, but must match the layout in the shader.
                          3,                  // size
                          GL_FLOAT,           // type
                          GL_FALSE,           // normalized?
                          0,                  // stride
                          (void*)0            // array buffer offset
                          );

    // Draw the triangle !
    glDrawArrays(GL_TRIANGLES, 0, 3); // Starting from vertex 0; 3 vertices total -> 1 triangle

    glDisableVertexAttribArray(shader["position"]);

    shader.unUse(); 
```

然后我交换缓冲区。我尝试使用旧的 GL_TRIANGLES 固定管道图，效果很好。

这是我的顶点着色器：

```
#version 330
layout(location = 0) in vec3 position;

void main()
{
gl_Position.xyz = position;
} 
```

这是我的片段着色器：

```
out vec3 color;

main()
{
color = vec3(1,0,0);
} 
```

它应该简单地绘制一个红色三角形。当我使用中间模式绘制时，它渲染得很好。我在 Mac OSX 10.7.4 上运行 Xcode。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:00:15.193

> gl_Position.xyz = position;

And what is the W coordinate? It's kind of important not to leave it undefined. If you want it to be 1.0, you need to set it to be that:

```
gl_Position = vec4(position, 1.0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T15:26:24.100

gl_Position 必须提供 x,y,z,w 坐标。在 1.50 以上的 GLSL 版本中，您必须在着色器中提供矩阵操作，即您必须使用诸如 GLM [http://glm.g-truc.net/之类的数学库来完成投影、模型、视图矩阵](http://glm.g-truc.net/)

从顶点数据集来看，z 坐标是 0.0，它与场景的中心共存。证明 Z 坐标的一些 -ve 值并检查结果。

# iphone - 我可以分发 iOS 开源代码以绕过应用商店吗？

> ID：11597927
> 
> 赞同：12
> 
> 时间：2012-07-22T05:20:25.070
> 
> 标签：iphone, ios, ipad, open-source, app-store

我不是在谈论使用[https://testflightapp.com/](https://testflightapp.com/)的 beta 测试，甚至不是 Apple 允许的有限分发 beta 应用程序。

我知道为了安装“您自己的”应用程序进行测试，您必须拥有一个每年 100 美元的 Apple Developer 帐户。

对于有这种情况的人，是什么阻止了源代码的合法分发，以便最终用户可以在他们自己的设备上分发、构建、安装、测试和运行开源应用程序？

我很清楚这样一个事实，即这种分发模式排除了绝大多数最终用户。除此之外，这似乎是绕过Apple限制的有效方法。

如果最终用户注册 Apple Developer 密钥、构建和安装应用程序的过程可以简化（可能通过 Mac 应用程序），那么唯一的障碍就是每年的 Apple 开发人员费用。

如果有令人信服的理由这样做（例如，可能违反 App Store 政策或其许可禁止 App Store 分发的高质量应用程序，例如 VLC 或使用原生 V8 javascript 实现和自己的渲染引擎的 Chrome 版本，或者许多很棒的应用程序）仅在 Cydia 上可用 [并且*不需要*越狱设备即可运行] 或根本没有构建的应用程序），我认为有些人可能会开始实现这一飞跃。

据我所知，Apple 无法确定哪些用户（源分销商或最终用户）将参与此活动。我也不认为这会违反任何 Apple 政策（顺便说一下，我还没有阅读细则，我想这可能是有问题的）。

我错过了什么？为什么这还没有完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:05:46.950

There's no problem with this. Thousands of people do this (including myself) when they release examples of their frameworks on github. For example, the AFNetworking (https://github.com/AFNetworking/AFNetworking) repository has a working application distributed in it that you need a developer account to compile and run. If you had an app that violated the App Stores policies, releasing the source code would allow developer to run it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T05:58:04.710

虽然这个想法很聪明，但人们不想经历这种努力。您无法再从设备上的 App Store 下载应用程序（当然可以，但如果已付费，则必须付费）。人们选择 Apple 是因为它的简单性，这样做会使整个过程复杂化很多。

App Store 还提供保护：可以安全地假设 App Store 中的所有内容都不会损害您的设备。

当然，如果这真的成为问题，Apple 只需更改其政策（在创建帐户后的 x 天内，您必须向 App Store 提交内容，否则您的帐户将被暂停）。

# javascript - 我可以使用 javascript 编写 xml 文件，还是必须学习 php/asp/mysql/其他东西？

> ID：11597928
> 
> 赞同：1
> 
> 时间：2012-07-22T05:20:58.367
> 
> 标签：javascript, html, css, xml, dom

我知道以前有人问过这个问题，但我想不出一个简单的定义来解决我的问题。我正在学习非正式地这样做，所以我还不确定如何表达问题/搜索答案。

在学习 javascript 时，我正在尝试构建一个简单的清单程序——我是在不使用任何库的情况下手动完成的（所以没有 jQuery，只是基本的 javascript）。我有一个功能正常的 DOM 界面，由 CSS 格式化，所有这些界面都在 a 中运行并编辑 a 的内容`<div>`，所以这方面的事情看起来很好。
我正在用我的 HDD 测试它，并且无意将它托管在任何地方。

目前，我正在尝试在不安装 php/mysql/apache 的情况下解决我的数据存储问题。我想让每个任务列表在选择时嵌套“子任务”，嵌套一层。
为此，我想在每次创建新任务时创建一个新的 XML 文件，然后将其信息附加到列表文件 (list.xml) 中，以便我可以导航 list.xml 以动态显示所有当前主文件任务。
从那以后，我了解到，出于安全原因，您不能仅使用 javascript 创建新的 .xml 文件。虽然这是有道理的，但我现在正在寻找其他解决方案。

在输入时存储此信息的最简单方法是什么？我考虑过的一种解决方案是只有一个 XML 文件（所以我总是知道将脚本指向什么），并使用“ `<id>`”节点将子任务从属于它们各自的主任务。但是，这会创建一个非常长且杂乱无章的 XML 文件，遍历它会变得麻烦且烦人，迫使我编写一个棘手的方法来循环它。

我应该继续完成这个项目并帮助锁定我的技能（这将是我第一个完整的“程序”，带有任何类型的 gui，不是由指南或课程规定的），还是我应该咬紧牙关子弹并通过烦人的php安装（我在我的最后一个塔上做了这个，这是一个令人沮丧的耗时的混乱）并学习所有服务器端废话的php / mysql / apache？

对不起 tl; 博士请帮助我的 pynchonesque 密码大师会杀了我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:01:27.423

仅在用户端，您无法在 Web 编程中做太多事情。迟早你将不得不学习服务器端。而且安装 PHP 也不是那么烦人。您可以使用[wamp](http://www.wampserver.com/en/)服务器。它的安装非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T07:24:44.200

如果您正在学习 Javascript，我建议您继续使用 Javascript（不要跳到 PHP 之类的，因为它会为您节省 5 分钟的配置时间）。

有许多非常好的 Javascript 服务器端框架，它们会很乐意将文件写入文件系统或为您与数据库通信。Node.js 目前是最流行的。我不想就 Node 如何或为什么优于 PHP 引发一场激烈的战争，我只是说，如果你是初学者，我不会把苹果和橘子混为一谈，只使用一种语言。

# xml - 如何一次性打开所有关闭的 XML 标签？

> ID：11597935
> 
> 赞同：3
> 
> 时间：2012-07-22T05:22:27.457
> 
> 标签：xml, notepad++, replace

我有一个巨大的 XML，所有标签都像关闭一样`<XXXXXX/>`，我正在寻找一种解决方案来一次打开所有关闭的标签，比如`<XXXXXX> </XXXXXX>`使用 Notepad++。任何答案都可以极大地帮助我。

在此先感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T06:27:31.010

如果您的意思是标签被折叠，那么：

`ALT`+ `SHIFT`+`0`

将它们全部扩展。[在键盘快捷键页面上](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Keyboard_And_Mouse_Shortcuts)查看这个和其他巧妙的技巧

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T09:48:28.803

我不知道 Notepad++ 的 RegEx 搜索和替换选项（这就是为什么这是一个评论），但是，如果它可用，像 Search:`<([^<>/]+)/>`和 Replace:这样的东西`<\1></\1>`应该这样做。

# html - 为什么按钮没有显示任何淡入淡出效果？

> ID：11597937
> 
> 赞同：0
> 
> 时间：2012-07-22T05:22:31.387
> 
> 标签：html, css

我正在尝试编写一个按钮，在悬停时会产生缓入缓出效果。我使用了以下代码：

```
#quotebutton {
padding:20px;
margin-top:-55px;
/* fallback/image non-cover color */
background-color: #000;
/* Safari 4+, Chrome 1-9 */
background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#000), to(#333));
/* Safari 5.1+, Mobile Safari, Chrome 10+ */
background-image: -webkit-linear-gradient(top, #000, #333); 
/* Firefox 3.6+ */
background-image: -moz-linear-gradient(top, #000, #333);
/* IE 10+ */
background-image: -ms-linear-gradient(top, #000, #333);
/* Opera 11.10+ */
background-image: -o-linear-gradient(top, #000, #333);
font-size:18px;
color:#fff;
float:right;
transition: background 300ms ease-in-out;
-webkit-transition: background 300ms ease-in-out;
-moz-transition: background 300ms ease-in-out;
}

#quotebutton:hover {
/* fallback image non-cover color */
   background-color: #000;
   /* Safari 4+, Chrome 1-9 */
   background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#333), to(#000));
   /* Safari 5.1+, Mobile Safari, Chrome 10+ */
   background-image: -webkit-linear-gradient(top, #333, #000); 
   /* Firefox 3.6+ */
   background-image: -moz-linear-gradient(top, #333, #000);
   /* IE 10+ */
   background-image: -ms-linear-gradient(top, #333, #000);
   /* Opera 11.10+ */
   background-image: -o-linear-gradient(top, #333, #000);
}
#quotebutton a {
    text-decoration:none;
    color:#fff;
} 
```

HTML如下：

```
<div id="quotebutton">
<a href="">Download Now</a>
</div> 
```

但是该按钮未显示悬停效果。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:23:20.660

就像 Ryan 提到的那样，您不能为背景渐变设置动画。虽然，有一些 jQuery 插件可以帮助您实现这一点。

尝试[jQuery 混合](http://www.jacklmoore.com/blend)

我的另一个想法是在纯色之上应用线性透明渐变图像。然后，您可以使用过渡为纯色设置动画。顶部的透明渐变图像将使它看起来像一个渐变动画。

希望能帮助到你。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:41:29.337

不幸的是，简短的回答是您不能使用 CSS3 过渡来为背景渐变设置动画。有几种方法可以使用替代技术实现相同的目标：

1.  使用 jQuery 在悬停时为两个不同背景图像之间的过渡设置动画。您可以通过使用绝对定位将三个元素相互堆叠来最轻松地完成此操作，其中底部两个是背景图像，顶部包含内容，在这种情况下是您的按钮文本。悬停时，淡出顶部背景图像以平滑地显示底部图像。请参阅[本教程以使用 jQuery 制作悬停背景动画](http://www.hongkiat.com/blog/simple-call-to-action-button-with-css-jquery/)。

2.  使用半透明渐变背景和 webkit 过渡来创建部分动画。CSS3 过渡可以轻松地为 background-color CSS 属性设置动画，该属性仅通过不存在或透明的背景图像或渐变可见。请参阅[此示例以了解如何实现它](http://jsfiddle.net/kb7P7/)。

在这两个选项中，(1) 更灵活，但工作量更大，需要配套脚本，而 (2) 灵活性较差，跨浏览器兼容性较差。

# c# - 安卓手机浏览器检测

> ID：11597940
> 
> 赞同：6
> 
> 时间：2012-07-22T05:22:59.107
> 
> 标签：c#, javascript, android, .net, samsung-mobile

我有一个网络应用程序，手机用户可以在其中看到移动优化的网站。新的三星 Galaxy SIII 用户代理不提供请求来自手机的线索。检测手机的最佳实践是什么？

我知道 javascript 功能检测（即现代化），但我希望有更好的东西。以下是三星 Galaxy SIII 用户代理：

Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.24 (KHTML, like Gecko) Chrome/11.0.696.34 Safari/534.24

编辑：SIII 有两个可能的用户代理。以上是“桌面”版本。好玩的东西。有关详细信息，请参阅下面的链接。

[http://www.anandtech.com/Show/Index/5310?cPage=19&all=False&sort=0&page=5&slug=samsung-galaxy-nexus-ice-cream-sandwich-review](http://www.anandtech.com/Show/Index/5310?cPage=19&all=False&sort=0&page=5&slug=samsung-galaxy-nexus-ice-cream-sandwich-review)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T05:50:02.203

看看那个用户代理，我不得不说，这将很难与非手持设备区分开来。

浏览器检测的问题在于很容易调整用户代理字符串，因此您永远无法真正知道服务器告诉您的内容是否真实。

在这种情况下，您有两种选择：

*   您可以检查手机发送的每一个标头，也许看看是否有一个可以使其独一无二

*   或者通过测试页面加载时间等来找到某种类型的解决方法......作为一个异想天开的例子，手持设备上的浏览器通常会比桌面浏览器渲染页面慢一些，所以在测试每个可能的移动设备后，使用类似的[东西](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)：

-

```
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
 // some code..
} 
```

您可以查看除了简单脚本之外没有其他内容的页面是否没有在理想时间加载。

你明白了。

另外，尝试去这里看看它是否能检测到你：[http ://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T04:05:32.623

“桌面模式”用户代理的设计目的是，当用户故意选择桌面模式时，Web 服务器不会提供移动/平板电脑界面 - 这是一种可用性反模式，从用户那里删除该选择。

如果您*绝对**必须*覆盖用户的选择，那么在当前的 JavaScript（2013 年）中，如果以下所有条件都成立，那么它很可能是 Android 设备：

1.  `'ontouchstart' in document.documentElement`
2.  `navigator.vendor === 'Google Inc.'`
3.  `/^Linux armv/.test(navigator.platform)`

然而，上面会给出一些不太常见的浏览器设置的误报和否定，例如基于 ARM 的带触摸屏的 ChromeBook，例如可能在带有 ARM 处理器的 Linux 上运行的 Chromium（尽管可能是 Linux/ARM），例如可能是其他浏览器 Firefox/Opera等等，例如像电视一样不基于触摸的Android 设备，例如Chrome 可以在带有ARM 处理器的Windows RT 上运行吗？例如，在 Intel 上运行的 Android。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T20:22:12.993

毕竟我必须检测“桌面视图”，所以类似于 robocat 的答案，这就是我用来检测“桌面视图”的方法。它并不完美，但似乎在避免误报方面提供了适当的平衡：

```
if (userAgent.indexOf('X11; Linux x86_64') !== -1 
      && 'ontouchstart' in document.documentElement 
      && /^Linux armv/.test(navigator.platform) 
      && _constructor.isChrome) {
    		if ((window.outerWidth < 500 && window.outerHeight < 800) || (window.outerWidth < 800 && window.outerHeight < 500)) {
                // do stuff.
            }
  }
```

帮助我决定宽度/高度过滤器应该是什么

[http://mydevice.io/devices/](http://mydevice.io/devices/) [http://viewportsizes.com/?filter=](http://viewportsizes.com/?filter=)

# c++ - 在 C++ 计算器中使用模板

> ID：11597941
> 
> 赞同：1
> 
> 时间：2012-07-22T05:23:06.863
> 
> 标签：c++, templates

```
template <class A, class B >
A Sum(A Fnum, B Snum){
return Fnum + Snum;
}

template <class S, class W>
S Subtraction(S Fnum, W Snum){
return Fnum - Snum;
}
template <class M, class E>
M Multiplication(M Fnum, E Snum){
return Fnum * Snum;
 }
  template <class D, class C>
 D Division(D Fnum, C Snum){
return Fnum / Snum;
} 
```

我正在尝试做一个计算器程序来了解模板。我想要一点帮助来解决我遇到的问题是 - 插入用户输入的数字是什么类型的？我在想的是做一个案例，提示输入 1 个数字询问要做什么操作例如：+/-* 等，然后将这些数字传递给函数......并返回一个答案，无论他们输入 2 还是 2.567反之亦然有什么建议吗？我的模板功能好吗？？他们需要任何改进吗..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:30:10.263

添加两个相同类型或类的东西可能更安全，特别是如果

```
T&  operator+( T number ); 
```

已超载。如果您正在处理预定义类型，例如

```
float, int 
```

那么您不必担心，代码会运行良好。尝试确保算术对您想要得到的结果有意义，尤其是乘法和除法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:59:58.703

你可能想要类似的东西：

```
#include<iostream>

using namespace std;

struct Add {
template < typename A, typename B > A operator() (const A & lhs, const B & rhs) { //note return type is A , what if A, B are diff? , you need promote one of them using specialization
return lhs + rhs;
}
};

//some other ops like above 

template < typename op, class A, class B > A operate(A Fnum, B Snum)
{
op oper;
return oper(Fnum, Snum);
}

int main()
{
int a = 20, b = 30;
std::cout << operate < Add > (a, b) << std::endl;
} 
```

演示：http: [//ideone.com/KReEQ](http://ideone.com/KReEQ)

# command-line - 安装 oAuth PECL 错误：无法安装，当前用户无法写入通道“pecl.php.net”的 php_dir

> ID：11597944
> 
> 赞同：19
> 
> 时间：2012-07-22T05:23:45.617
> 
> 标签：command-line, oauth, terminal, pecl

我正在尝试在 OS X 上安装 oAuth，但在终端中出现此错误：

> 无法安装，频道“pecl.php.net”的 php_dir 不能被当前用户写入

我如何允许它是可写的？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-05T01:18:05.840

首先找出 php_dir 在哪里。您可以使用“config-get”命令来做到这一点：

`pecl config-get php_dir`

在此之后，您可以：

*   更改该文件夹（以及任何需要的子文件夹）的所有权

    `sudo chown <username> <php_dir>`

*或者*

*   将 php_dir 设置为不同的文件夹

    `pecl config-set php_dir /path/to/new/dir`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-07-10T21:29:54.660

最简单的方法可能是附加`sudo`到安装命令的前面。

请参阅[http://linux.about.com/od/commands/l/blcmdl8_sudo.htm](http://linux.about.com/od/commands/l/blcmdl8_sudo.htm)以了解有关方便的“超级用户”命令的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-19T14:38:54.610

为了进一步参考，在 OS Catalina 上，由于 /usr/bin - lib 文件夹的写入权限，您应该将[pecl](https://pear.php.net/manual/en/guide.users.commandline.config.php)上的所有配置文件夹移动到某个可写位置（除了 php_bin 是 php 目录，这个应该指向您的 php 文件夹） .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-23T03:43:06.973

这是由于 Mac OS 中称为系统完整性保护 (SIP) 的功能。SIP 防止编辑关键系统文件和目录。

要绕过 SIP 限制以安装 oAuth，您可以暂时禁用它。引导进入恢复模式并运行命令`csrutil disable`。之后，正常重新启动并再次尝试安装。

安装完成后，通过引导回到恢复模式并运行命令来重新启用 SIP `csrutil enable`。*注意：**强烈**建议您重新启用 SIP 以保护您的计算机。*

# android - 按钮单击未将结果返回到 textview

> ID：11597946
> 
> 赞同：0
> 
> 时间：2012-07-22T05:24:14.607
> 
> 标签：android, android-button

我是编码新手，对我的知识有点怀疑，所以如果我忽略了一些简单的事情，请原谅我，但我一直在寻找 2 个小时的答案。

我的一门课程将允许用户输入他们的身高和体重，并为他们返回 BMI（身体质量指数）。问题是一旦他们单击执行计算的按钮并将其显示在 TextView 中，什么也没有发生。我从 LogCat 看到的唯一错误是`getCursorCapsMode on inactive InputConnection`. 此错误仅在我使用`next`按钮在`softkeyboard`EditText 字段之间移动时显示，因此我不认为这是相关的，因为当我在字段之间手动移动并且没有收到此错误时仍然没有结果。如果您有任何信息，请随时协助解决此问题。

这是来自 BMI android 开发教程的重复代码，除了项目的 id 之外逐字逐句，但是当加载到模拟器中时，教程可以完美运行。我的代码如下：

```
public class FuncConverter extends DashMenuActivity {

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView (R.layout.dash_converter7);

    Spinner converter_spinner = (Spinner) findViewById(R.id.converter_spinner);
    ArrayAdapter<CharSequence> converter_adapter = ArrayAdapter.createFromResource(
            this, R.array.converter_array, android.R.layout.simple_spinner_item);

    converter_adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        converter_spinner.setAdapter(converter_adapter);

}

public void calcClick (View view) {

    if (view.getId() == R.id.convert_btn_calc) {

        EditText weight_edit = (EditText) findViewById(R.id.weight_edit);
        EditText height_edit = (EditText) findViewById(R.id.height_edit);
        TextView bmi_text = (TextView) findViewById(R.id.bmi_text);

        float weight = Float.parseFloat(weight_edit.getText().toString());
        float height = Float.parseFloat(height_edit.getText().toString());

        float bmiValue = calculateBMI (weight, height);
        String bmiCalc = interpretBMI (bmiValue);

        bmi_text.setText(bmiValue + " - " + bmiCalc); 

    }

}

private float calculateBMI (float weight, float height) {
    return (float) (weight / (height * height));
}

private String interpretBMI(float bmiValue) {
    if (bmiValue < 16) {
        return "Severley Underweight";
    } else if (bmiValue < 18.5) {
        return "Underweight";
    } else if (bmiValue < 25) {
        return "Healthy weight";
    } else if (bmiValue < 30) {
        return "Overweight";
    } else {
        return "Obese";
    }
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:10:51.203

我真的很难明确回答，因为我不确定你是如何触发点击来计算这些东西的。但据我所知，它在您的 xml`calcClick(View)`中定义。`onClick=calcClick`如果这是真的，那么您以错误的方式获取信息。

```
public class FuncConverter extends DashMenuActivity {
EditText weight_edit;
EditText height_edit;
TextView bmi_text;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView (R.layout.dash_converter7);

    Spinner converter_spinner = (Spinner) findViewById(R.id.converter_spinner);
    ArrayAdapter<CharSequence> converter_adapter = ArrayAdapter.createFromResource(
        this, R.array.converter_array, android.R.layout.simple_spinner_item);

    converter_adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    converter_spinner.setAdapter(converter_adapter);

    //Moved these bad boys here for you instead
    weight_edit = (EditText) findViewById(R.id.weight_edit);
    height_edit = (EditText) findViewById(R.id.height_edit);
    bmi_text = (TextView) findViewById(R.id.bmi_text);

}

public void calcClick (View view) {

if (view.getId() == R.id.convert_btn_calc) { //dont't think you need this check to be honest

    float weight = Float.parseFloat(weight_edit.getText().toString());
    float height = Float.parseFloat(height_edit.getText().toString());

    float bmiValue = calculateBMI (weight, height);
    String bmiCalc = interpretBMI (bmiValue);

    bmi_text.setText(bmiValue + " - " + bmiCalc); 

    }

} 
```

我在那里所做的只是将`EditText`and`TextView`作为全局变量，这样你就可以在`calcClick(View)`. 如果我是对的，它不起作用的原因是因为您无法从外部的 xml访问`EditText`和视图，至少在您的情况下是这样。传递的参数实际上是按钮或触发事件的任何东西。希望这是有道理的。所以不是文档根目录，而是或再次，无论您单击什么来触发它。`TextView``onCreate()``View``View view``(Button)view`

# facebook-like - 像画布应用程序中的按钮

> ID：11597949
> 
> 赞同：2
> 
> 时间：2012-07-22T05:26:02.743
> 
> 标签：facebook-like, meta-tags, facebook-canvas

是否有在画布应用程序中提供类似按钮的最佳实践？我们有一个包含大量内容的应用程序，当我将某些内容的 OG:URL 指定为 apps.facebook.com/myapp 中的页面时，“like”共享显示为指向 apps.facebook。 com。这是最好的方法吗，或者其他人是如何处理的？谢谢！

我的内容的 OG 标签大致如下所示：

```
<meta property="og:title" content="some cool title" />
<meta property="og:image" content="some cool image"/>
<meta property="og:site_name" content="my site name" />
<meta property="fb:admins" content="my id" />
<meta property="og:description" content="Hey neat wow this is content."/>
<meta property="og:url" content="http://apps.facebook.com/myapp/somecontent.aspx">
<meta property="fb:app_id" content="my_appid" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:59:22.900

简短回答：通常的做法似乎是 og:url 属性指向您服务器上的内容地址（而不是 app.facebook.com 上的 Facebook Canvas iFrame 包装器的 URL），并且在大多数情况下，此 URL 会立即重定向到 apps.facebook .com/你的游戏。

您可以通过玩足够多的游戏来获得成就或触发 OG 动作，然后查看您的活动日志以获取此类故事，右键单击指向对象的链接（如成就），并将其粘贴到 Facebook 的对象调试器中。以下是一些顶级游戏的对象 URL：

*   与朋友的话： [https ://wwf-fb.zyngawithfriends.com/opengraph/word.php?word=sheet](https://wwf-fb.zyngawithfriends.com/opengraph/word.php?word=sheet)
*   歌曲流行：
    [https ://wam-mobile.appspot.com/facebook/canvas/opengraph/achievement/sweetStreak1/](https://wam-mobile.appspot.com/facebook/canvas/opengraph/achievement/sweetStreak1/)
*   糖果粉碎传奇：
    [http](http://candycrush.king.com/FacebookServlet/opengraph/candycrush:level?episode=http%3A%2F%2Fcandycrush.king.com%2FFacebookServ...etc) ://candycrush.king.com/FacebookServlet/opengraph/candycrush:level?episode=http%3A%2F%2Fcandycrush.king.com%2FFacebookServ...等。

作为参考，Facebook 对象调试器在这里：http: [//developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

根据用户 Igy 的说法：

> 指向apps.facebook.com url没有限制——请求被重写为静默请求你的应用程序的回调URL，加上提供给apps.facebook.com URL的相同路径——不这样做的一个原因是这种行为使您的应用程序的某些功能无法直接控制，...例如，如果 FB 上出现错误，导致所有此类 URL 无法正确解析（最近发生了这种情况）。

# google-closure-library - 为什么子类化 goog.ui.Button 会产生这个错误？

> ID：11597952
> 
> 赞同：1
> 
> 时间：2012-07-22T05:28:15.967
> 
> 标签：google-closure-library

我在我的 Google Closure javascript 中创建了 goog.ui.Button 的子类。

```
/**
 * @fileoverview This button makes a new widget.
 * @author David Faux
 */

goog.provide('app.ui.NewWidgetButton');

goog.require('goog.ui.Button');

/**
 * Button for creating a new widget.
 * @constructor
 * @param {goog.ui.ButtonRenderer=} opt_renderer Optional renderer used to
 *    render or decorate the button.
 * @param {goog.dom.DomHelper=} opt_domHelper Optional DOM hepler, used for
 *    document interaction.
 * @extends {goog.ui.Button}
 */
app.ui.NewWidgetButton = function(opt_renderer, opt_domHelper) {
  goog.base(
    this,
    /** @type {goog.ui.ControlContent} */ 'New Widget',
    opt_renderer,
    opt_domHelper);
}
goog.inherits(app.ui.NewWidgetButton, goog.ui.Button); 
```

但是，当我使用 实例化此按钮时`var newButton = app.ui.NewWidgetButton();`，Chrome 控制台中出现错误：

```
`Uncaught TypeError: Object #<Object> has no method 'setContentInternal'` 
```

我查了一下方法`setContentInternal`，它似乎是类的方法`goog.ui.Control`，它是 的超类`goog.ui.Button`，所以我很困惑为什么这个方法是未定义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:32:44.320

的实例化`newButton`缺少`new`关键字。添加`new`关键字可修复错误。

```
var newButton = new app.ui.NewWidgetButton(); 
```

设置 Closure Compiler 标志`--warning_level=VERBOSE`以生成如下错误：

> 警告 - 构造函数 (new:app.ui.NewWidgetButton, (goog.ui.ButtonRenderer|null)=, (goog.dom.DomHelper|null)=): undefined 应该使用“new”关键字调用

# javascript - JavaScript 黑客

> ID：11597957
> 
> 赞同：-1
> 
> 时间：2012-07-22T05:29:52.180
> 
> 标签：javascript, dom

我试图找出任何和所有方法来防止特定元素的 CSS 修改和 DOM 修改。我知道这可能不是完全可能的，或者有才华的开发人员可以绕过它，但是，我并不担心人们可能会绕过它，我只是想阻止新手。特别是那些使用 jQuery 的人。一个例子是删除原型对象等的某些属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T06:03:46.803

Don't use CSS or JavaScript :p Depend completely on server side checks etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T05:36:36.693

但是为什么你需要/想要这个？如果你想“保护”你的代码，你可以使用一些 JavaScript minifier 作为 Google Closure Compiler 或 YUI 压缩器。他们将重写您的脚本，并且人类很难阅读。如今，使用 Firebug 和 Grease Monkey 之类的工具几乎不可能做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T06:44:57.060

您无法阻止任何人弄乱您的 javascript 或页面中的对象。浏览器的设计方式，页面中的代码和对象根本不受保护。从小书签到在控制台输入的 javascript 再到浏览器插件，一切都会弄乱您的页面、代码和变量。这就是浏览器的架构。

你能做的就是让事情变得更加困难，以至于有些事情需要做更多的工作。以下是您可以做的几件事：

1.  混淆/压缩/最小化你的代码会做一些事情，比如删除注释、删除空格、删除一些换行符、缩短变量名等......这不会阻止任何人修改东西，但确实让理解和弄清楚变得更加困难。
2.  将变量放在闭包中而不使用全局变量。这使得直接从脚本外部修改变量变得更加困难。
3.  将所有重要数据和机密保存在您的服务器上。使用 ajax 调用请求服务器使用该数据或机密执行操作，这样重要信息在浏览器客户端中永远不可用。

你不能阻止任何人修改 DOM。根本没有针对这种情况的保护措施。如果 DOM 以非标准方式被弄乱，您的代码可以检查 DOM 并拒绝操作。但是，当然，代码也会被修改以删除该检查。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-22T05:56:24.267

如果您正在寻找特定于 jquery 的解决方案，一种粗略的方法将涉及更改 jQuery ($) 函数并将其替换为仅在提供的选择器与您要保护的元素不匹配时委托给原始函数的自定义函数。

```
 `(function(){
jQueryOrig = jQuery;
window.jQuery = window.$ = function(){
    if (jQueryOrig("#secure").is(arguments[0])) { 
        throw new Error("Security breach"); 
    } else return jQueryOrig.apply(this, arguments);
}
}());` 
```

`当然，使用直接 DOM 操作的人不会受到影响。`

 `此外，如果您实际上在生产代码中包含任意第三方代码，您应该查看 Caja ( [http://code.google.com/p/google-caja/](http://code.google.com/p/google-caja/) )，它将用户限制为 javascript 的子集能力。这里有一个关于 Caja 的很好的解释：http: [//due-diligence.typepad.com/blog/2008/04/web-20-investor.html](http://due-diligence.typepad.com/blog/2008/04/web-20-investor.html)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-03-10T06:30:14.957

您可以在 Flash 中制作所有内容。在 Chrome 中，如果 flash 元素有焦点，甚至还有一个错误会阻止用户打开控制台（不确定这是如何工作的，但您可以在[http://www.twist-cube.com](http://www.twist-cube.com)或[http:// /www.gotmilk.com](http://www.gotmilk.com)）。即使用户确实设法打开了控制台（这并不难......），您仍然可以做的就是改变元素的形状。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-15T07:59:41.387

这是可能的，但需要始终从您的服务器加载 JS 文件。使用观察者可以锁定 CSS 属性，使用 DOM 移除/添加监听器可以将其锁定到父级。这足以阻止大多数修改。

实际上，您可以更进一步，修改核心 javascript 函数，从而在不本地或通过代理加载 JS 文件的情况下几乎不可能修改 DOM。进一步的安全性可以通过做额外的域检查来确保 JS 文件是从它应该被加载的地方加载的。`

# php - PHP Echoe 通过 JS/AJAX Post 选择的值

> ID：11597958
> 
> 赞同：2
> 
> 时间：2012-07-22T05:30:09.070
> 
> 标签：php, javascript, ajax

我正在使用 JS/Ajax 函数从选择框中回显选定的值。我正在使用 MySQL DB 中的值填充这些选择框。该功能适用​​于文本输入字段，但现在我将它与这些选择框一起使用，我没有得到任何响应。

我可以用 JS 从选择框中回显所选值吗？或者，还有更好的方法？[例子](http://webprolearner.ueuo.com/dropdown-menu/)

**JS**

```
 <script>
    $(document).ready(function() { 
        var timer = null;  
        var dataString;    
        function submitForm(){ 
            $.ajax({ type: "POST", 
                url: "index.php", 
                dataType: 'json', 
                success: function(result){ 
                $('#special').html('<p>' +  $('#resultval', result).html() + '</p>');} 
                                  }); 
            return false; 
        } 
        $('#category_form').on('change', function() { 
            clearTimeout(timer); 
            timer = setTimeout(submitForm, 2000); 
        }); 
    });  
    </script> 
```

**PHP/HTML**

```
try {

    $pdo = get_database_connection();   

    $sql = "SELECT * 
            FROM `categories`
            WHERE `master_id` = 0";
    $statement = $pdo->query($sql);
    $list = $statement->fetchAll(PDO::FETCH_ASSOC);

} catch(PDOException $e) {
    echo 'There was a problem';
} 

    <form action="" method="post" id="category_form'" name="category_form'">

            <select name="main" id="main" size="7" class="update">
                <option value="">Select one</option>
                <?php if (!empty($list)) { ?>
                    <?php foreach($list as $row) { ?>
                        <option value="<?php echo $row['id']; ?>">
                            <?php echo $row['name']; ?>
                        </option>
                    <?php } ?>
                <?php } ?>
            </select>

            <select name="subc1" id="subc1" size="7" class="update"
                disabled="disabled" hidden="hidden">
                <option value="">----</option>
            </select>

            <select name="subc2" id="subc2" size="7" class="update"
                disabled="disabled" hidden="hidden">
                <option value="">----</option>
            </select>

            <select name="subc3" id="subc3" size="7" class="update"
                disabled="disabled" hidden="hidden">
                <option value="">----</option>
            </select>

        </form>

    <div id="special"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:58:16.710

看起来您使用 jQuery 选择了错误的元素。

改变：

```
$('#category_form').on('change', function() { 
            clearTimeout(timer); 
            timer = setTimeout(submitForm, 2000); 
        }); 
```

至：

```
$('#main').on('change', function() { 
            clearTimeout(timer); 
            timer = setTimeout(submitForm, 2000); 
        }); 
```

# php - PHP会话不通过文件

> ID：11597960
> 
> 赞同：0
> 
> 时间：2012-07-22T05:30:13.813
> 
> 标签：php, session, uploadify

我正在为我的脚本使用 Uploadify。

主页面：

```
<?php

session_start();

var_dump($_SESSION);
$uploaded_files = $_SESSION['uploaded_files'];

?>

//Uploadify, HTML forms and more (not related, No PHP in this section) 
```

上传.php：

```
<?php

session_start();

require_once('includes/functions.php');

// Define a destination
$targetFolder = 'uploads/temp'; // Relative to the root

if (!empty($_FILES)) {
    $fileParts = pathinfo($_FILES['Filedata']['name']);
    $file_hash = GenRndStr(20) . '.' . $fileParts['extension'];
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $file_hash;

    // Validate the file type
    $fileTypes = array(); // File extensions

    move_uploaded_file($tempFile, $targetFile);
    $_SESSION['uploaded_files'][] = $file_hash;
    echo '1';
}

?> 
```

我确定它会到达该`$_SESSION['uploaded_files'][] = $file_hash;`部分，因为实际文件已上传到目录。我的问题是`var_dump`of`$_SESSION['uploaded_files']`返回null。

这些文件位于同一目录级别。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:07:32.807

我找到了解决方案。问题是 Uploadify 的 flash 版本被视为服务器的不同客户端，因此服务器为其创建一个新的会话 id。

我关注了这个话题：[http](http://www.uploadify.com/forum/#/discussion/43) ://www.uploadify.com/forum/#/discussion/43 希望它会帮助别人。

# php - Code Igniter Session 在索引页面没有得到任何值

> ID：11597969
> 
> 赞同：0
> 
> 时间：2012-07-22T05:33:11.630
> 
> 标签：php, codeigniter, session

我是 Code Igniter 的新手。我的索引页面名为 abc_welcome 我在下面的代码

```
public function index()
{
    $this->load->library('session');
    $login_data = $this->session->userdata('user');

    if($login_data) {
        redirect('/product/product_details');
    }
    else {
                $this->display();
    }
} 
```

因此，当已经登录的用户点击时，他可以重定向到产品页面。但奇怪的是它没有重定向。

在登录页面我有相同的代码并且它正在重定向。

因此，当用户访问我的 www.abc.com 页面时，它不会重定向（如果已登录）并且会话没有检查数据，但是当单击登录按钮时，他是并且显然会话获得了正确的数据。我希望他第一次重定向....在我的演示站点（我的笔记本电脑）中更奇怪的是索引重定向正在工作！但不是在 hostgator.com。

提前致谢。法内斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:12:28.843

谢谢大家的支持。

我终于通过 .htaccess 重定向使其工作。我只是将以下代码放入我的 .htaccess 中，它按预期工作。

```
 RewriteEngine On
   RewriteBase /
   RewriteCond %{HTTP_HOST} ^www.abc.com [NC]
   RewriteRule ^(.*)$ http://abc.com/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:38:04.780

是的@farness 放在`$config['base_url'] = 'http://www.abc.com/';` 你的 config.php 文件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T07:00:20.543

根据您的描述，您的代码似乎很好，如果它在您的笔记本电脑上本地运行，那么很可能会话数据没有被正确存储/读取。除了上面的 base_url 之外，您还应该验证 /appication/config.php 中的以下设置：

1.  如果您的基本网址是 www.abc.com，则 $config['cookie_domain'] 应设置为 .abc.com（带有前导点）
2.  $config['cookie_path'] 为了安全起见，将其设置为“/”
3.  $config['cookie_secure'] 设置为 FALSE（除非您的站点仅使用 https 访问，否则将其保留为 false

希望这能让你启动并运行。

# c++ - 获取对象 void* 的大小指向

> ID：11597970
> 
> 赞同：4
> 
> 时间：2012-07-22T05:33:37.647
> 
> 标签：c++, sizeof, void-pointers

```
#define BOOST_TEST_MODULE MemoryLeakTest
#include <boost/test/unit_test.hpp>

#include <iostream>
using namespace std;

BOOST_AUTO_TEST_CASE( MemoryLeakTest)
{
    double* n1 = new double(100);
    void* v1 = n1;
    cout << sizeof(v1) << endl;
    delete v1;
} 
```

这段代码可以正常工作，没有任何错误泄漏。但我希望能够获得对象的大小。`void*`我想有一种方法，因为 delete 语句知道对象 v1 指向的大小，以便它可以删除它，因此必须存储它某处。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T06:00:57.497

Applying `delete` to a `void *` pointer in C++ is illegal.

If your compiler supports this as a non-standard extension, then most likely `delete` assumes that the unknown object pointed by that pointer has trivial destructor. In that case `delete` does not have to do anything besides immediately handing over the control to the raw-memory deallocation function `::operator delete`, which probably just calls `free`. (This last bit, of course, can depend on the implementation).

So, your question basically boils down to "how to determine the size of `malloc`-ed memory block". There's no standard features that can do that. Either memorize the size yourself, when you allocate it. Or use the non-standard implementation-specific library features, if any such features are provided by your platform.

In some implementations this can be done through `msize` function. But again, in order to do it meaningfully, you'd have to research your implementation first. You need to figure out how the memory is allocated by `new` and/or what exactly `delete v1` does, since it is not standard C++.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T06:12:39.653

在进行 from `double *`to的转换时，`void *`您会丢弃编译器要处理的信息。

因此编译器不知道要调用什么析构函数或对象的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T05:36:11.530

的大小`void *`将继续是`sizeof`一个指针。如果您想找出`void *`指向的对象的实际大小，您应该知道实际对象并将指针类型转换为正确的类型。不，delete 不会知道对象指针的大小，会导致泄漏。正确的做法`delete`是确保将指针类型转换为正确的类型。

# opencl - 使用 OpenCL 查找复制引擎的数量

> ID：11597973
> 
> 赞同：0
> 
> 时间：2012-07-22T05:35:15.877
> 
> 标签：opencl, pyopencl

在 OpenCL 中是否有任何 API 用于查找 GPU 中的复制引擎数量？在 cuda 中，我们可以使用`asyncEngineCount.`OpenCL 中的替代方法来检查这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:27:02.420

在 OpenCL 标准中，没有其他选择，因为这是特定于硬件和供应商的实现细节。但是，在未来，NVIDIA 可能会更新其`cl_nv_device_attribute_query`扩展。此扩展已包含[`CL_DEVICE_GPU_OVERLAP_NV`](http://www.khronos.org/registry/cl/api/1.2/cl_ext.h)设备信息，如果可以进行异步复制，则返回 true。

# vb6 - 如何重置盒子

> ID：11597976
> 
> 赞同：-1
> 
> 时间：2012-07-22T05:36:08.367
> 
> 标签：vb6

在表单中使用蒙版框

```
masked1.mask = ##:## 
```

在表单加载中，masked1 显示为`__:__`

一旦用户输入像 08:00 这样的值，然后重置意味着它应该像这样再次显示`__:__`

这个怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T11:07:25.797

要清除 MaskEditBox，请将**Text**属性设置为空字符串，但是当**PromptInclude**属性为 True 时，您会收到错误消息。我建议编写一个 Sub 方法，当你想清除它时可以调用它。

```
Private Sub ClearMaskedEditBox(ByVal vMaskEditBox As MaskEdBox)
Dim strMask As String

    strMask = vMaskEditBox.Mask  'save the current mask
    vMaskEditBox.Mask = ""       'clear the control's mask
    vMaskEditBox.Text = ""       'clear the text
    vMaskEditBox.Mask = strMask  'reset the mask

End Sub 
```

要使用您要清除的 MaskEditBox 控件调用 Sub。

```
Call ClearMaskedEditBox(masked1) 
```

# java - &、|、^ 是按位运算符还是逻辑运算符？

> ID：11597978
> 
> 赞同：3
> 
> 时间：2012-07-22T05:36:18.630
> 
> 标签：java, operators

首先我了解到`&`, `|`,`^`是按位运算符，现在有人用 , 将它们称为逻辑运算符`&&`，`||`我完全糊涂了——同一个运算符有两个名字？已经有逻辑运算符`&&`, `||`, 那为什么还要使用`&`, `|`,`^`呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-22T05:43:21.767

Java 运算符`&`和`|`是`^`按位运算符或逻辑运算符...取决于操作数的类型。如果操作数是整数，则运算符是按位的。如果它们是布尔值，则运算符是逻辑的。

这不仅仅是我这么说的。JLS 也以这种方式描述这些运算符；见[JLS 15.22](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.22)。

（这就像`+`意味着加法或字符串连接......取决于操作数的类型。或者就像“玫瑰”意味着花或淋浴附件。或者“猫”意味着毛茸茸的动物或 UNIX命令。单词在不同的上下文中意味着不同的东西。编程语言中使用的符号也是如此。）

* * *

> 已经有逻辑运算符`&&`, `||`, 为什么要使用`&`, `|`, `^`?

在前两个的情况下，这是因为运算符在何时/是否对操作数进行评估方面具有不同的语义。在不同的情况下需要两种不同的语义；例如

```
 boolean res = str != null && str.isEmpty(); 
```

相对

```
 boolean res = foo() & bar();  // ... if I >>need<< to call both methods. 
```

`^`运营商没有短路等效物，因为拥有一个根本没有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T11:35:08.717

拥有语言参考是一回事，正确解释它是另一回事。

我们需要正确地解释事物。

即使 Java 记录`&`了按位和逻辑，我们也可以提出一个论点，`&`自远古以来，它确实没有失去逻辑运算符的魔力，因为 C。也就是说，`&`首先是一个固有的逻辑运算符（尽管一个非短路的那个）

`&`将词法+逻辑解析为逻辑操作。

为了证明这一点，这两行的行为都是一样的，从 C 到现在（Java、C#、PHP 等）

```
if (a == 1 && b)

if (a == 1 & b) 
```

也就是说，编译器会将这些解释为：

```
if ( (a == 1) && (b) )

if ( (a == 1) & (b) ) 
```

即使两个变量`a`和`b`都是整数。这个...

```
if (a == 1 & b) 
```

...仍将被解释为：

```
if ( (a == 1) & (b) ) 
```

因此，这将在不利于整数/布尔对偶性的语言上产生编译错误，例如 Java 和 C#：

```
if (a == 1 & b) 
```

事实上，在上面的编译错误上，我们甚至可以提出一个`&`没有失去逻辑（非短路）操作的论点 mojo，我们可以得出结论，Java 延续了 C 的传统，使`&`仍然是一个逻辑操作。因此，我们可以说它是相反的，即`&`可以重新用作按位运算（通过应用括号）：

```
if ( a == (1 & b) ) 
```

所以我们在另一个平行宇宙中，有人可能会问，如何使`&`表达式成为位掩码操作。

> 如何进行以下编译，我在 JLS 中读到这`&`是按位运算。a 和 b 都是整数，但它让我无法理解为什么以下按位运算是 Java 中的编译错误：
> 
> 如果 (a == 1 & b)

或者这样的问题：

> 为什么以下没有编译，我在 JLS 中读到，`&`当它的两个操作数都是整数时，它是按位运算。a 和 b 都是整数，但它让我无法理解为什么以下按位运算是 Java 中的编译错误：
> 
> 如果 (a == 1 & b)

事实上，如果已经存在类似于上述问题的现有 stackoverflow 问题，我不会感到惊讶，这些问题询问如何在 Java 中执行该掩码习语。

为了使该语言的逻辑操作解释变为按位，我们必须这样做（在所有语言上，C、Java、C#、PHP 等）：

```
if ( a == (1 & b) ) 
```

所以要回答这个问题，这并不是因为 JLS 以这种方式定义事物，而是因为 Java（以及受 C 启发的其他语言）的`&`运算符是出于所有意图和目的仍然是一个逻辑运算符，它保留了 C 的语法和语义。**从**C 开始，从远古时代开始，甚至在我出生之前就是这样。

事情不是偶然发生的，JLS 15.22 不是偶然发生的，它有着悠久的历史。

在另一个`&&`没有引入语言的平行宇宙中，我们仍将`&`用于逻辑运算，今天人们甚至可能会问一个问题：

> 是吗，我们可以使用逻辑运算符`&`进行按位运算吗？

`&` **不关心**它的操作数是否为整数、布尔值与否。它**仍然是一个逻辑运算符**，一个非短路运算符。事实上，在 Java 中（甚至在 C 中）强制它成为**位运算符的唯一方法是在它周围加上括号。**IE

```
if ( a == (1 & b) ) 
```

想想看，如果`&&`没有引入 C 语言（以及任何复制其语法和语义的语言），现在任何人都可能会问：

> 如何`&`用于按位运算？

## 总而言之，首先Java`&`本质上是一个逻辑运算符（非短路运算符），它不关心其操作数，即使两个操作数都是整数（例如掩码习语）。您只能通过应用括号来强制它成为按位运算。Java 延续了 C 的传统

如果 Java 的操作数（下面的示例代码中的整数 1 和整数变量）都是整数，`&`那么它确实是按位运算，则应该编译：`b`

```
 int b = 7;
 int a = 1;

 if (a == 1 & b) ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T05:45:46.617

它们（`&`和`|`）很久以前被用于两个目的，逻辑运算符和位运算符。如果您要查看新生的 C 语言（Java 的模式化语言），`&`并被`|`用作逻辑运算符。

但是由于在同一个语句中区分位运算和逻辑运算是非常令人困惑的，它促使丹尼斯·里奇为逻辑运算符创建一个单独的运算符（`&&`和`||`）。

在此处查看**新生儿 C**部分：http: [//cm.bell-labs.com/who/dmr/chist.html](http://cm.bell-labs.com/who/dmr/chist.html)

您仍然可以将按*位运算符*用作**逻辑运算符**，其保留的运算符优先级就是证明。在新生儿C上读出位运算符作为逻辑运算符的**前世历史**

关于证据，我发表了一篇关于比较逻辑运算符和位运算符的博客文章。不言而喻，所谓的位运算符**仍然**是逻辑运算符，如果您尝试在实际程序中对比它们：[http ://www.anicehumble.com/2012/05/operator-precedence-101.html](http://www.anicehumble.com/2012/05/operator-precedence-101.html)

我还回答了一个与您的问题有关的问题，[即 C 中的逻辑运算符有什么意义？](https://stackoverflow.com/questions/2773186/what-is-the-point-of-the-logical-operators-in-c/2773257#2773257)

所以这是真的，按位运算符也是逻辑运算符，尽管是短路逻辑运算符的非短路版本。

* * *

关于

> 已经有了逻辑运算符&&、||，那为什么还要用&、|、^呢？

XOR 很容易回答，就像一个单选按钮，只允许一个，下面的代码返回 false。为下面的人为代码示例道歉，认为同时喝啤酒和牛奶是不好的信念已经被[揭穿了](http://answers.yahoo.com/question/index?qid=20090516195352AAvdZEf)；-)

```
String areYouDiabetic = "Yes";
String areYouEatingCarbohydrate = "Yes";

boolean isAllowed = areYouDiabetic == "Yes" ^ areYouEatingCarbohydrate == "Yes";

System.out.println("Allowed: " + isAllowed); 
```

没有等效于 XOR 位运算符的短路，因为需要计算表达式的两边。

关于为什么需要使用`&`和`|`位运算符作为逻辑运算符，坦率地说，您将很难发现需要使用位运算符（也称为非短路逻辑运算符）作为逻辑运算符。如果您想实现一些副作用并使您的代码紧凑（主观），则逻辑操作可以是非短路的（通过使用按位运算符，也称为非短路逻辑运算符），例如：

```
while ( !password.isValid() & (attempts++ < MAX_ATTEMPTS) ) {

    // re-prompt

} 
```

上面的代码可以改写如下（去掉括号），仍然和前面的代码有完全相同的解释。

```
while ( !password.isValid() & attempts++ < MAX_ATTEMPTS ) {

    // re-prompt

} 
```

删除括号，但它仍然产生与括号相同的解释，可以使逻辑运算符的**痕迹**`&`更加明显。冒着听起来多余的风险，但我必须强调，没有括号的表达式不会被解释为：

```
while ( ( !password.isValid() & attempts++ ) < MAX_ATTEMPTS ) {

    // re-prompt

} 
```

综上所述，使用`&`运算符（更通俗地称为仅按位运算符，但实际上是按位和逻辑（非短路））进行非短路逻辑运算以达到副作用是聪明的（主观的），但不鼓励，这只是为了换取可读性的一种节省效果。

示例来源于此处：[非短路逻辑运算符存在的原因](https://stackoverflow.com/questions/9264897/reason-for-the-exsistance-of-non-short-circuit-logical-operators/9265249#9265249)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T14:34:58.047

Java 类型字节是有符号的，这对于按位运算符来说可能是个问题。当负字节扩展到 int 或 long 时，符号位被复制到所有高位以保留解释值。例如：

```
byte b1=(byte)0xFB; // that is -5
byte b2=2;
int i = b1 | b2<<8;
System.out.println((int)b1); // This prints -5
System.out.println(i);       // This prints -5 
```

原因： (int)b1 在内部是 0xFFFB 而 b2<<8 是 0x0200 所以我将是 0xFFFB

解决方案：

```
int i = (b1 & 0xFF) | (b2<<8 & 0xFF00);
System.out.println(i); // This prints 763 which is 0x2FB 
```

# c++ - 向量和堆栈溢出

> ID：11597980
> 
> 赞同：1
> 
> 时间：2012-07-22T05:36:36.743
> 
> 标签：c++, vector, stack-overflow

解释我的问题：

我有一个简单的向量数组，标题为**敌人**，其中包含**Enemies**的对象。在我在游戏中的关卡的关卡选择菜单中，当玩家点击一个关卡时，我会将给定关卡的所有敌人推回向量数组中。

目前我只有 3 个关卡完全完成了他们所有的敌人，今天在尝试做第四关时，现在我不断收到堆栈溢出。而且我不确定为什么会发生这种情况，我的意思是肯定只有当我首先到达级别选择菜单然后按键盘上的任何内容时才为数组分配任何内容，但没有立即崩溃。

所以就伪代码而言，这就是我所做的：

```
switch(keyboardInput)
    //ALL keyboard button specific input
    default:
        if (levelSelected == 1)
              //push back level 1 enemies into vector
        elseif (levelSelected == 2)
             //push back level 2 enemies into vector etc. etc. 
```

就被推入向量数组的数字而言：

等级 1 = 26 个敌人

等级 2 = 113 个敌人

等级 3 = 204 个敌人

4级= 38个敌人（*创建这个级别甚至还没有完成一半*）

总计 = 381 个敌人。

注释掉我刚刚为第 4 级添加的一些矢量推回，然后游戏运行良好。但显然这是一个我需要克服的问题，才能让敌人分配到关卡。

它在文件“ *chkstk.asm*上崩溃以供参考。所以我对此有点困惑，为什么会发生这种情况是我的主要问题？希望我应该如何克服这个问题？

非常感谢任何帮助！

编辑：所以为了回答一些问题，我没有在我的代码中使用任何类型的递归，为了更好地了解错误，这里有一个截图

![返回错误](../Images/7de9a1c5566c089e3666ccf3593f552a.png)

我总共加载了 86 张图片和 3 种字体。但即使评论其中一些，我仍然会收到上面相同的错误消息。唯一值得一提的就是 Enemies 类本身。但具体来说，只有一些变量和一些动画。每个敌人总共有 4 个动画可用，有些有动画，有些没有。我将在下面发布动画类； [http://pastebin.com/X3GUgJiJ](http://pastebin.com/X3GUgJiJ) - 标题

[http://pastebin.com/pL1iEkiy](http://pastebin.com/pL1iEkiy) - .cpp 内容。

即使那样，尽管我不确定那里是否有任何显着的内存占用。

**编辑二：** 所以这里有一个指向我的关卡选择代码的链接，它非常大。大多数代码本身都与关卡选择屏幕相关，并且也渲染了正确的图像。 [http://txtup.co/YLVRo](http://txtup.co/YLVRo)

**编辑三：** 注释掉所有被推回向量数组的敌人会导致令人惊讶的结果，关卡加载代码会引发错误，这可能只是导致其他任何东西弄乱了堆栈还是实际上是加载代码那是在弄乱堆栈吗？我不确定。但这是级别错误的图像：http: [//imgur.com/2fySY](https://imgur.com/2fySY)

**编辑四：** 因此，经过长时间的代码查看任务，看看可能导致问题的原因，我认为我可能有一个理论；所以每个 Enemy 对象都有可能拥有/使用 4 种不同的动画。5 真的，但它的故事很长，对于不同大小的敌人，基本上有 2 个不同版本的动画。因此，如果我们将其放入一些图形中，这些动画就是它们自己的名为 Animation 的类。是不是对于推回数组中的每个敌人对象都将包含它自己的所有可用特定动画的实例，因此随着时间的推移，我添加了越来越多的敌人，我不知道的问题已经增长越来越差。

我的意思是总共有*1524*个动画实例，目前我几乎将大部分代码都注释掉了。我认为可能是导致问题的大多数大事，慢慢地我正在取消对尝试事物的评论，确保这实际上是正确的。现在问题仍然存在，应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:37:38.853

堆栈溢出只有三个潜在原因：

1.  无休止/过度的函数递归。
2.  在堆栈上分配过大的对象。
3.  覆盖堆栈帧链接指针。
    *   可能是由于堆栈上的数组的缓冲区溢出
    *   或使用过期的指针或对局部变量的引用。

这些都不可能是由于滥用 a 造成的`vector`。可能与 相关的事情`push_back`正在加剧先前存在的问题。

如果你想拿出大炮，试试 Valgrind。但看起来你需要把事情归结起来，去掉不重要的细节。不要太在意特定的数字。如果程序编写正确，1524个动画实例应该与2个相同。

# c - 我在这个 C 程序上做错了什么？

> ID：11597983
> 
> 赞同：0
> 
> 时间：2012-07-22T05:36:52.467
> 
> 标签：c

我有下面的代码，我唯一能看到它评估的是第 18 行，它是对 printf() 的调用。它不会更进一步。

```
#include <stdio.h>
#include <stdlib.h>

int main (void) {

    int cylNum;
    double disp, pi, stroke, radius;
        pi = 3.14159;

    printf("Welcome to the Engine Displacement Calculator!\n");

    cylNum = scanf("Enter number of cylinders (then press enter): \n");

    stroke = scanf("Enter stroke: \n");

    radius = scanf("Enter radius: \n");

    disp = radius * radius * pi * stroke * cylNum;

    printf("Displacement is: %f", disp);

    getchar();
    printf("Press any key to exit!");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T05:39:50.143

您尝试读取的变量应该是“scanf()”的参数，而不是 scanf() 的结果：

```
printf("Enter number of cylinders (then press enter): ");
scanf("%d", &cylNum);
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T05:44:42.923

功能是`scanf`读入值。

所以这条线

```
cylNum = scanf("Enter number of cylinders (then press enter): \n"); 
```

应该是以下几行

```
printf("Enter number of cylinders (then press enter): \n");
scanf("%d", &cylNum); 
```

您需要检查 的返回值`scanf`以确保它为 1，即已发生转换。

所以也许代码应该读

```
do {
   printf("Enter number of cylinders (then press enter): \n");
} while (scanf("%d", &cylNum) != 1); 
```

对于`disp, pi, stroke, radius`您需要`"%lf"`在`scanf`函数中使用的变量，而不是`"%d`.

见[scanf](http://linux.die.net/man/3/scanf)和[printf](http://linux.die.net/man/3/printf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T05:42:21.143

“scanf”不像您尝试的方式那样采用参数。

```
printf("Enter number of cylinders (then press enter): \n");
scanf(" %d", &cylNum);

printf("Enter stroke: \n");
scanf(" %lf", &stroke); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T05:44:04.207

```
#include <stdio.h>
#include <stdlib.h>
int main (void) {

    int cylNum;
    float disp, pi, stroke, radius;
    pi = 3.14159;
    printf("Welcome to the Engine Displacement Calculator!\n\n");
    printf("Enter number of cylinders (then press enter): ");
    scanf("%d", &cylNum);
    printf("Enter stroke: ");
    scanf("%f", &stroke);
    printf("Enter radius: ");
    scanf("%f", &radius);
    disp = radius * radius * pi * stroke * cylNum;
    printf("Displacement is: %f\n\n", disp);
    return 0;
} 
```

# unicode - Unicode 的子集通常用于书写？

> ID：11597985
> 
> 赞同：2
> 
> 时间：2012-07-22T05:37:21.347
> 
> 标签：unicode

通常在写作中使用的 Unicode 字符的子集是什么——例如通常在报纸文章中发现的那些？

例如，在英语中，[a-zA-Z0-9] 范围内的字符，加上一些标点字符，对于大多数写作来说就足够了。

但我想支持使用超出 ASCII 范围的字符的语言，同时排除非打印或装饰字符。

目标是将用户对应用程序的输入限制为以书面语言合法使用的代码点。因为用户输入将被保存和显示，我不想让恶作剧者输入完全由诸如变音符号、Unicode 组合字符、Unicode 流控制字符等内容组成的文本。

遗憾的是，我并不精通 Unicode 中的每一种语言。是否有人编制了通常用于书写的所有 Unicode 字符子集的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T06:42:24.903

Unicode 代码点的官方列表是[`UnicodeData.txt`](http://unicode.org/Public/UNIDATA/UnicodeData.txt). 这是一个纯文本文件，每个代码点一行；它很容易机器可读。例如：

```
0022;QUOTATION MARK;Po;0;ON;;;;;N;;;;; 
```

第三个分号分隔的字段是“General Category”的缩写名称。这将[在 Unicode 标准的第 4 章](http://www.unicode.org/versions/Unicode6.1.0/ch04.pdf)，特别是第 4.5 节中进一步解释；请参见第 131 页的表格（PDF 文件的第 12 页）。例如，“Lu”是大写字母，“Ll”是小写字母，Pc、Pd、Ps*等*是各种标点符号。（两字母缩写的第一个字母代表字母、数字、标点符号等更高级的类别）

请注意，某些代码点范围未明确列出。例如，CJK（中文、日文、韩文）表意文字的范围表示为：

```
4E00;<CJK Ideograph, First>;Lo;0;L;;;;;N;;;;;
9FCC;<CJK Ideograph, Last>;Lo;0;L;;;;;N;;;;; 
```

我认为 unicode.org 上还有其他文件可以填补这些空白。

我仍然不是 100% 清楚您要定义的子集，但您可以将其定义为一组特定的通用类别值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:16:03.733

> 我不想让恶作剧者输入完全由变音符号、Unicode 组合字符等内容组成的文本

变音符号/组合字符将用于正常的书面语言。因此，如果您想阻止“恶作剧者”，您将需要一些更复杂的东西，而不仅仅是允许的字符列表。您必须对您想要允许的每种语言进行某种语言分析。

我建议不要为此烦恼，因为这会很困难，而且无论如何您都不会成功。只是让人们写他们想要的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-25T19:36:59.340

~~尝试 WGL4（652 个字符）、MES-1（335 个字符）或 MES-2（1062 个字符）。在维基百科上找到这些。如果您想使用此集合，您可能希望从 MES-1 中排除字符 ĲĳĸĿŀŉ˚―⅛⅜⅝⅞♪。~~

编辑：我意识到这是一个糟糕的答案。尤其是从 MES-1 部分删除字符完全是垃圾。我不应该发布这个。我为谁赞成这个而感到羞耻。

如果有的话，请使用 Subset1（678 个字符）、Subset2（1193 个字符）和 Subset3（2823 个字符）。[https://unicodesubsets.miraheze.org/wiki/User:PiotrGrochowski](https://unicodesubsets.miraheze.org/wiki/User:PiotrGrochowski)

# html - 用于分隔水平导航的 HTML/CSS 是什么？

> ID：11597987
> 
> 赞同：1
> 
> 时间：2012-07-22T05:37:30.347
> 
> 标签：html, css

我指的导航看起来像这样：

```
home | about | contact 
```

那么对于这种类型的导航，最好和最灵活的 HTML/CSS 是什么？我能想到的最好的办法是将分隔符包裹在一个跨度中，以便我可以控制它们周围的间距。例如：

```
<a href="#">home</a><span>|</span><a href="#">about</a> 
```

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:03:54.567

这一切都取决于您的目标浏览器，以及验证是否为严格的 HTML4.01 对您很重要（即：老板/委员会认为这是一个“大问题”）。

就个人而言，出于导航菜单的目的，我将所有内容包装在无序列表中。

如果 4.01 合规性很重要，我会将其包装在 div.nav 中`<nav id="main-nav">`或类似的。

```
<ul><li><a href="/">home</a></li><li><a href="about">about</a></li></ul> 
```

然后在 CSS 中：

```
#main-nav li { display : inline-block; list-style : none; } 
```

从那里，您可以将每个`<li>`元素的填充设置为您想要的任何内容。您可以使用`:after`伪选择器注入“|” 或您想要的任何自定义图像，在每个`:last-child:after`图像之后（如果您想要的话，您可以使用 来确保在最后一个图像之后没有图像）。

您甚至可以玩弄`a`，将其变成块元素，并使用填充来使整个`li`块可点击，而不仅仅是文本。

请参阅此处的旧 IE 兼容性 hack：如有必要，[如何使可点击链接更大。](http://v3.thewatchmakerproject.com/journal/154/simple-css-how-to-make-clickable-areas-bigger)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T08:53:47.630

您可以简单地为每个元素添加一个左边框，*除了*第一个元素：

HTML：

```
​&lt;ul id="nav-list">
<li>Home</li>
<li>Blog</li>
<li>Link</li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

使用 CSS：

```
#nav-list li {
    display: inline-block;
    border-left: 1px solid black;
    padding: 4px;   
}
#nav-list li:first-child {
    border-left: 0;
}
​ 
```

**[在 jsfiddle 上查看上面的代码！](http://jsfiddle.net/3Pf5p/)** 这是相当跨浏览器兼容的（IE7+），但它可以很容易地用[Selectivizr](http://selectivizr.com/) for IE6 之类的东西填充。感谢 Rob W 建议使用左边框和第一个孩子来访问更多浏览器！

# android - 在 setVideoSize 上使用 mediarecorder 冻结应用程序

> ID：11597988
> 
> 赞同：0
> 
> 时间：2012-07-22T05:38:38.987
> 
> 标签：android, mediarecorder

我有 android 4.0 的平板电脑 acer a500。

我可以通过（目标尺寸：176x144）录制视频：

```
_recorder = new MediaRecorder();
camera.unlock();
_recorder.setCamera(camera);
_recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
_recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
_recorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
_recorder.setOutputFile(outputPath);
_recorder.setPreviewDisplay(surface);
_recorder.prepare(); 
```

但我想改变录制视频的大小。

具有下一个支持的尺寸：

```
front
previewSize support size: width = 176 height = 144 aspect = 1,222222
previewSize support size: width = 320 height = 240 aspect = 1,333333
previewSize support size: width = 352 height = 288 aspect = 1,222222
previewSize support size: width = 640 height = 480 aspect = 1,333333
previewSize support size: width = 672 height = 378 aspect = 1,777778
previewSize support size: width = 720 height = 576 aspect = 1,250000
previewSize support size: width = 800 height = 600 aspect = 1,333333
previewSize support size: width = 1280 height = 720 aspect = 1,777778

videSizes support size: width = 176 height = 144 aspect = 1,222222
videoSizes support size: width = 320 height = 240 aspect = 1,333333
videoSizes support size: width = 352 height = 288 aspect = 1,222222
videoSizes support size: width = 640 height = 480 aspect = 1,333333
videoSizes support size: width = 720 height = 576 aspect = 1,250000
videoSizes support size: width = 1280 height = 720 aspect = 1,777778

back

previewSize support size: width = 176 height = 144 aspect = 1,222222
previewSize support size: width = 320 height = 240 aspect = 1,333333
previewSize support size: width = 352 height = 288 aspect = 1,222222
previewSize support size: width = 640 height = 480 aspect = 1,333333
previewSize support size: width = 672 height = 378 aspect = 1,777778
previewSize support size: width = 720 height = 576 aspect = 1,250000
previewSize support size: width = 800 height = 600 aspect = 1,333333
previewSize support size: width = 1280 height = 720 aspect = 1,777778
previewSize support size: width = 1920 height = 1080 aspect = 1,777778

videoSizes support size: width = 176 height = 144 aspect = 1,222222
videoSizes support size: width = 320 height = 240 aspect = 1,333333
videoSizes support size: width = 352 height = 288 aspect = 1,222222
videoSizes support size: width = 640 height = 480 aspect = 1,333333
videoSizes support size: width = 720 height = 576 aspect = 1,250000
videoSizes support size: width = 1280 height = 720 aspect = 1,777778 
```

在 _recorder.setOutputFormat 之后设置 _recorder.setVideoSize(640, 480) 并且有问题。视频开始写入（我看到文件 3 kb）并且应用程序冻结。我尝试不同的尺寸。但只能使用两个：176x144 和 352x288。

在冻结我看到长堆栈：[http ://bit.ly/Oa5O0D](http://bit.ly/Oa5O0D)

请帮助我，如何知道解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:28:52.333

我找到了解决方案：问题将是，因为我使用了视频编码器 VideoEncoder.Default。对于宏碁默认是 h263。如果在 MPEG_4_SP 或 H264 上进行更改，则可以在任何分辨率下稳定工作。在 api less 3.x 的设备上仍有待验证。

# javascript - PhantomJS：确保响应对象在 server.listen(...) 中保持活动状态

> ID：11597990
> 
> 赞同：6
> 
> 时间：2012-07-22T05:39:43.670
> 
> 标签：javascript, phantomjs

我正在使用`server.listen(...)`PhantomJS。我意识到它在很大程度上是实验性的，不应该在生产中使用。我将它用于一个简单的屏幕截图服务器，它接受为 URL 生成屏幕截图；这是我用来玩 PhantomJS 的玩具项目。我特别注意到长时间运行请求的问题，即`response`对象不可用。以下是我的代码中的相关片段：

```
var service = server.listen(8080, function (request, response) {

    response.statusCode = 200;

    if (loglevel === level.VERBOSE) {
        log(request);
    } else {
        console.log("Incoming request with querystring:", request.url);
    }

    var params = parseQueryString(request.url);
    if (params[screenshotOptions.ACTION] === action.SCREENSHOT) {
        getScreenshot(params, function (screenshot) {

            response.headers["success"] = screenshot.success; //<-- here is where I get the error that response.headers is unavailable. Execution pretty much stops at that point for that particular request.
            response.headers["message"] = screenshot.message;

            if (screenshot.success) {
                response.write(screenshot.base64);
            } else {
                response.write("<html><body>There were errors!<br /><br />");
                response.write(screenshot.message.replace(/\n/g, "<br />"));
                response.write("</body></html>");
            }

            response.close();
        });
    } else {
        response.write("<html><body><h1>Welcome to the screenshot server!</h1></body></html>")   
        response.close();
    }
}); 
```

`getScreenshot`是使用`WebPage.open(...)`函数打开网页的异步方法；这个函数也是异步的。所以似乎正在发生的是，当作为参数传入的回调`getScreenshot`最终被调用时，似乎该`response`对象已被删除。我基本上以 PhantomJS 的以下错误结束：

```
Error: cannot access member `headers' of deleted QObject 
```

我相信这是因为请求超时，因此连接已关闭。该文档提到`response.write("")`至少调用一次以确保连接保持打开状态。`response.write("")`我尝试在开始时调用，`server.listen(...)`我什至尝试了一个非常 hacky 的解决方案，我曾经每 500 毫秒`setInterval(...)`执行`response.write("")`一次（我什至将它降低到低至 50）。完成后，我还确保清除间隔。但是，我似乎仍然遇到这个问题。

在他们使 webserver 模块更健壮之前，这是我必须处理的事情吗？或者有没有办法解决它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T18:41:27.477

我能够弄清楚这一点。似乎在加载某些页面时`WebPage.open`（例如`http://fark.com`和`http://cnn.com`）会触发多个`onLoadFinished`事件。这会导致回调`WebPage.open`被多次调用。所以发生的情况是，当控制权返回到调用函数时，我已经关闭了响应，因此`response`对象不再有效。`WebPage.open`我通过在调用函数之前创建一个标志来解决这个问题。在回调中，我检查标志的状态以查看我是否已经遇到过以前的`onLoadFinished`事件。一旦我在`WebPage.open`回调中完成了我必须做的任何事情，我就会更新标志以表明我已经完成了处理。`onLoadFinished`这种方式不再为虚假（至少在我的代码上下文中）事件提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T01:30:46.867

*（请注意，以下指的是 PhantomJS 1.9.7，而 OP 可能指的是 1.6.1 或更早版本。）*

如果触发了多个`onLoadFinished`事件，您可以使用[`page.open()`](http://phantomjs.org/api/webpage/method/open.html)而不是自己监听`onLoadFinished`。Using`page.open()`会将您的处理程序包装在一个私有处理程序中，以确保您的回调只被调用一次。

从[来源](https://github.com/ariya/phantomjs/blob/1.9.7/src/modules/webpage.js#L265-L324)：

```
definePageSignalHandler(page, handlers, "_onPageOpenFinished", "loadFinished");
page.open = function (url, arg1, arg2, arg3, arg4) {
    var thisPage = this;
    if (arguments.length === 1) {
        this.openUrl(url, 'get', this.settings);
        return;
    }
    else if (arguments.length === 2 && typeof arg1 === 'function') {
        this._onPageOpenFinished = function() {
            thisPage._onPageOpenFinished = null;
            arg1.apply(thisPage, arguments);
        }
        this.openUrl(url, 'get', this.settings);
        return;
    }
// ... Truncated for brevity 
```

此功能与其他答案完全相同，作为官方 API 的一部分公开。

# html - HTML/CSS 莫名其妙的 1px 边距/边框/内边距

> ID：11597993
> 
> 赞同：3
> 
> 时间：2012-07-22T05:40:17.433
> 
> 标签：html, css, margin, padding

注意：该网站目前无法在所有浏览器中正确显示。这是与这篇文章的目标不同的目标。请使用 safari 查找和诊断问题。

（已解决网址已删除）

是我们的网站。

在 safari 中查看，您会看到：

![http://i.imgur.com/kPCDu.png](../Images/abd6db123971797295daf255d6a6e107.png)

仔细观察箭头指示的区域，您可以看到我们的...“主题表”的标题和底部之间有 1px 的间隙。

我找不到任何理由说明它应该在那里！我使用了 safari 网络检查器并检查了每个元素，没有边框，没有边距，没有任何东西！它根本不应该存在！然而，确实如此。

所以我认为他是某种 CSS 错误/怪癖，我不确定它到底源自 HTML 的什么地方，甚至开始用谷歌搜索它。任何人都可以就实际导致此问题/如何解决此问题提供任何帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T05:52:04.013

表导致您的问题。您可以通过添加以下 CSS 来修复它（导致更多问题）：

```
.table_list {
    border-collapse: collapse;
} 
```

但实际上，为章节标题使用表格是没有用的，尽管它可以显示论坛/论坛/其他列表的列表。

# android - google play 可以发布多少个应用？

> ID：11597995
> 
> 赞同：7
> 
> 时间：2012-07-22T05:40:47.633
> 
> 标签：android, google-play

我正在开发安卓应用程序。我还没有创建发布者帐户。我想在 Google Play 中发布我自己创建的 android 应用程序。有25美元的费用。我可以从我的帐户发布多少个应用程序？这是一次性费用（25 美元）还是我将来必须为这个帐户再次支付？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T05:42:56.370

**无限**

这是一次性费用（25 美元）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T05:41:53.693

您可以使用一个帐户和一次性费用发布任意数量的应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T05:44:07.663

你想要多少就多少，Google 不会测试或真正规范你投放市场的产品。因此，如果它是一个半损坏的演示，您仍然可以发布它。

# google-cloud-storage - 云存储的奇怪异常

> ID：11597997
> 
> 赞同：0
> 
> 时间：2012-07-22T05:41:07.253
> 
> 标签：google-cloud-storage

我正在使用谷歌云存储，有时它会返回带有消息“1”的异常。我检查了书面文件，它缺少一些部分。
有人能告诉我那个例外是什么吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:46:11.840

如果可以，请捕获请求和响应标头，如果您再次看到这种情况，请通过 gs-team (-at-) google.com 将它们发送给我们，我们会进行查看。

谢谢，纳夫尼特

# php - 语法错误 - PHP 函数

> ID：11597999
> 
> 赞同：1
> 
> 时间：2012-07-22T05:41:46.710
> 
> 标签：php

今天我正在尝试从经典 ASP 学习 PHP。我正在尝试编写一个使用 Zend S3 Framework 生成签名私有 s3 url 的简单函数，但我的编码客户端一直告诉我第 4 行存在语法错误`function get_s3_signed_url......`。

```
<?php
require_once 'zendS3.php';

public function get_s3_signed_url($bucket, $resource, $AWS_S3_KEY, $AWS_s3_secret_key, $expire_seconds) {
    $expires = time()+$expire_seconds;
    // S3 Signed URL creation
    $string_to_sign = "GET\n\n\n{$expires}\n/".str_replace(".s3.amazonAWS.com","", $bucket)."/$resource";
    $signature = urlencode(base64_encode((hash_hmac("sha1", utf8_encode($string_to_sign), $AWS_s3_secret_key, TRUE))));

    $authentication_params = "AWSAccessKeyId=".$AWS_S3_KEY;
    $authentication_params.= "&Expires={$expires}";
    $authentication_params.= "&Signature={$signature}";
    return $link = "http://s3.amazonAWS.com/{$bucket}/{$resource}?{$authentication_params}";
}
?> 
```

这个特定的功能实际上发布在大量的教程中，我基本上已经复制并粘贴了它，所以我看不出它有什么问题，因为其他人使用它很好。有人可以告诉我这个语法错误是什么，这样我就可以继续睡觉了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T05:45:17.523

```
public function get_s3_signed_url 
```

错了，请使用`function get_s3_signed_url`,`public`上课