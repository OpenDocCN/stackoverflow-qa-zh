# StackOverflow 问答 10871000-10871999

# ruby-on-rails - 如何在 link_to 锚点中呈现 html + 字符串？

> ID：10871002
> 
> 赞同：0
> 
> 时间：2012-06-03T14:05:13.817
> 
> 标签：ruby-on-rails

在 Rails 应用程序中，我有渲染 html 片段的辅助方法，例如 Twitter 引导字体

```
def edit_icon
  content_tag(:i, "", :class=>'icon-edit')
end 
```

我想在附加文本的链接锚点中显示它。例如

```
<%= link_to "#{edit_icon} Edit this Record", edit_record_path(@record) %> 
```

这当前将 content_tag 呈现为字符串，而不是 HTML。如何将其呈现为 HTML？

我尝试了`<%= link_to "#{raw edit_icon}`and `<%= link_to "#{edit_icon.html_safe}`，但在这种情况下，这些似乎不是我需要的。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T14:44:05.070

问题是 Rails 字符串插值将 content_tag 的 HTML 输出转换为“安全”格式。您尝试的修复都在应用字符串插值之前运行，这不起作用

解决这个问题只需要一个小改动：将方法调用移到字符串之外。

```
Do this:
    <%= link_to edit_icon + "Edit this Record", edit_record_path(@record) %>
Instead of:
     <%= link_to "#{edit_icon} Edit this Record", edit_record_path(@record) %> 
```

# php - 向我的 mysql 查询添加分页

> ID：10871003
> 
> 赞同：-6
> 
> 时间：2012-06-03T14:05:19.003
> 
> 标签：php, mysql, pagination, while-loop

> **可能重复：**
> [PHP 和 MySQL 分页](https://stackoverflow.com/questions/2616697/php-mysql-pagination)

我对如何向我的 mysql 查询添加分页有点困惑，因为我每次都在循环遍历结果并将它们添加到一个变量中：

```
$DBQuery3 = mysqli_query($dblink, "SELECT * FROM images WHERE project_id = '$FormProjectID'");

$ProjectContent ='';
                        while($row = mysqli_fetch_array($DBQuery3)) {
                            $DBImageID = $row['image_id'];
                            $DBProjectID = $row['project_id'];
                            $DBImageName = $row['image_name'];
                            $DBImageDescription = $row['image_description'];
                            $DBDateCreated = $row['date_created'];
                            $DBLinkToFile = $row['link_to_file'];
                            $DBLinkToThumb = $row['link_to_thumbnail'];
                            $DBGivenName = $row['given_name'];

                            //if the image was given a name by the user, display it
                            //otherwise display the generated name

                            if (strlen($DBGivenName) > 1) {
                                $FileName = $DBGivenName;
                            } else {
                                $FileName = $DBImageName;
                            }

                            $ProjectContent .= '
                                <a href="index.php?page=image&id='.$DBImageID.'"><img src="uploads/'.$DBLinkToThumb.'" width="150px" height="150px" alt="'.$FileName.'" title="'.$FileName.'"/></a>
                            '; 
```

任何指向正确方向的人都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:14:02.437

嗨，

试试用php分页脚本，网上有很多，随便找那些词。

例如： http: [//www.coursesweb.net/php-mysql/pagination-class-script_s2](http://www.coursesweb.net/php-mysql/pagination-class-script_s2)可以对存储到数据库或数组中的数据进行分页。

# objective-c - Objective-C 子类化：两个子类实例似乎指向同一个实例

> ID：10871005
> 
> 赞同：0
> 
> 时间：2012-06-03T14:05:52.143
> 
> 标签：objective-c, inheritance, subclass

当我执行下面的代码时，为什么我会收到底部列出的输出，我有点（实际上，很多）困惑。Insect 和 Mammal 实例应该是具有不同实例变量的两个独立对象。对 [super initAttributes] 的两个调用都应该独立地初始化每个实例，每个实例都通过了**self**。那么为什么*昆虫*和*哺乳动物*实例在显示时具有相同的值？似乎两个实例都指向内存中的同一个对象。

任何帮助将不胜感激。谢谢！

**动物**类

```
//Interface

#import <Foundation/Foundation.h>

@interface Animal : NSObject

-(id) initAttributes: (NSString *) initName Legs: (int) initLegs Arms: (int) initArms;
-(void) display;

@end

//Implementation

#import "Animal.h"

@implementation Animal

NSString *name;
int legs, arms;

-(id) initAttributes: (NSString *) initName Legs: (int) initLegs Arms: (int) initArms
{
    self = [super init];

    if (self)
    {
        name = initName;
        legs = initLegs;
        arms = initArms;
    }

    return self;
}

-(void) display
{
    NSLog(@"Name: %@ Legs: %i Arms: %i", name, legs, arms);
}

@end 
```

**昆虫类**

```
//Interface

#import "Animal.h"

@interface Insect : Animal

-(id) initInsect: (NSString *) initName;

@end

//Implementation

#import "Insect.h"

@implementation Insect

-(id) initInsect: (NSString *) initName
{
    self = [super initAttributes: initName Legs: 8 Arms: 0];

    if (self)
    {
    }

    return self;
}

@end 
```

**哺乳动物类**

```
//Interface

#import "Animal.h"

@interface Mammal : Animal

-(id) initMammal: (NSString *) initName;

@end

//Implementation

#import "Mammal.h"

@implementation Mammal

-(id) initMammal: (NSString *) initName
{
    self = [super initAttributes: initName Legs: 2 Arms: 2];

    if (self)
    {
    }

    return self;
}

@end 
```

**主要的**

```
#import <Foundation/Foundation.h>
#import "Insect.h"
#import "Mammal.h"

int main (int argc, const char * argv[])
{

    @autoreleasepool {

        Insect *insect = [[Insect alloc] initInsect: @"Spydor"];
        Mammal *mammal = [[Mammal alloc] initMammal: @"Platypus"];

        [insect display];
        [mammal display];
    }

    return 0;
} 
```

**输出**

名称：鸭嘴兽腿：2 手臂：2
名称：鸭嘴兽腿：2 手臂：2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:16:52.903

我假设这是家庭作业，所以这里有一个提示：错误在于您的变量声明。不要将全局变量用于多态性。

# java - 无法使用 Play 框架连接到数据库

> ID：10871014
> 
> 赞同：0
> 
> 时间：2012-06-03T14:07:21.097
> 
> 标签：java, playframework, playframework-1.x

我正在建立一个带有游戏的网站！框架，我已经完成了内存数据库的编码和测试，一切都很好，所以我决定将代码推送到我的服务器。但是我遇到了一个奇怪的错误，它说“发生数据库错误：无法连接到数据库，未知数据库'fpn_server'”。

我确实更改了 conf 文件夹中的 application.conf 文件，我将 application.mode 设置为 prod（很确定这与数据库没有连接），将 db 属性设置为“mysql:root:mypass@fpn_server”，并将 jpa.ddl “创建”以确保创建数据库。

嗯，老实说，我开发了一个同名数据库的demo网站，并且成功部署在了我的服务器上。但是这一次，模式发生了变化，我没有像文档中所说的那样使用进化脚本，我只是从 mysql 服务器中删除了数据库。不太确定这是否是错误。

我已经在谷歌上搜索了一段时间，不好。

顺便说一句，我使用的是 play 1.2.4 而不是 play 2。

谁能帮我？欢迎任何建议！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:43:42.323

您正在使用快捷方式 MYSQL5 配置，它看起来很好。但是，也许您应该尝试使用详细设置。

```
%production.db.url=jdbc:mysql://localhost/fpn_server
%production.db.driver=com.mysql.jdbc.Driver
%production.db.user=root
%production.db.pass=mypass 
```

如果详细设置中有任何看起来错误的地方，这可能是您的快捷方式设置没有意义的原因。

如果配置看起来不错，我会检查您的数据库是否可以访问。

作为参考，这里是 application.conf 数据库选项 - [http://www.playframework.org/documentation/1.2.4/configuration#dbconf](http://www.playframework.org/documentation/1.2.4/configuration#dbconf)

# python - 如何在 Win7 64bit Python2.7 上安装 PyAuto？

> ID：10871015
> 
> 赞同：0
> 
> 时间：2012-06-03T14:07:34.097
> 
> 标签：python, windows, google-chrome, automation

此处的页面[http://www.chromium.org/developers/testing/pyauto#TOC-Running-PyAuto-using-prebuilt-binaries](http://www.chromium.org/developers/testing/pyauto#TOC-Running-PyAuto-using-prebuilt-binaries)建议使用此处的文件[http://commondatastorage.googleapis.com/chromium-browser-continuous /index.html?path=Win/140227/](http://commondatastorage.googleapis.com/chromium-browser-continuous/index.html?path=Win/140227/)自己安装，但我不确定我必须做什么。

我成功运行了 mini_installer，将 pyauto 和 _pyauto 放在 site_packages 中，并将 dll 放在 system32 文件夹中。

这是我尝试运行automated_ui_test.exe [http://pastebin.com/Ab0vCCWk时遇到的错误](http://pastebin.com/Ab0vCCWk)

我也无法弄清楚这应该在哪里`chrome/test/pyautolib/fetch_prebuilt_pyauto.py`编辑：在这里找到它[http://src.chromium.org/svn/trunk/src/chrome/test/pyautolib/](http://src.chromium.org/svn/trunk/src/chrome/test/pyautolib/)

EDIT2：得到它'构建'或其他东西，现在我在我设置的路径中有一组文件。现在，当我尝试导入 pyautolib 时，出现以下错误：`ImportError: DLL load failed: %1 is not a valid Win32 application.`我认为这与我使用 64 位有关。一般来说，当这种情况发生时，我会查看[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)，它有很多 64 位 python 包，但这次没有。

**在 Windows 7、64 位机器上运行 PyAuto 需要做什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:56:46.037

目前在 64 位 Chrome 上不支持 pyAuto [http://www.chromium.org/developers/design-documents/64-bit-support](http://www.chromium.org/developers/design-documents/64-bit-support)

> 通过在 GYP 构建系统上使用 -Dtarget_arch=x64 标志，可以在 Linux 上构建 64 位版本的 Chromium。（这是 64 位 Linux 系统的默认设置。）
> 
> Chromium 使用的 64 位版本的 V8 JavaScript 引擎可以使用 v8 的 Scons 构建系统中的 --arch=x64 标志单独构建。这适用于 Linux 和 Mac OS X 平台。
> 
> Chromium 和 V8 目前在 Windows 平台上都没有 64 位版本。但是，Chrome 确实作为 32 位应用程序在 64 位 Windows 上运行。V8 应该只需要进行少量更改即可在 Windows 平台上构建。

# google-app-engine - 使用 OAuth 获取 Google SpreadsheetService

> ID：10871017
> 
> 赞同：0
> 
> 时间：2012-06-03T14:07:44.787
> 
> 标签：google-app-engine, oauth, gdata

我正在开发 GWTP 项目，并在我的本地开发模式下成功测试了以下场景：

1.  通过 OpenID 和 OAuth 进行身份验证和授权
2.  将 GoogleOAuthParameters 对象保存到 HttpSession 中。
3.  另一个操作处理程序重用存储在会话中的 GoogleOAuthParameters 来获取 SpreadsheetService 对象。
4.  使用 SpreadsheetService 在 GDoc 中操作电子表格。

但是，当部署到 App Engine 时，无法从 GDoc 中读取任何内容，也没有错误/警告，并且返回的列表始终为空。

```
spreadsheetService = new SpreadsheetService("test");
GoogleOAuthParameters oauthParameters = (GoogleOAuthParameters)sessionProvider.get().getAttribute(HttpSessionProvider.PARAM_OAUTH_PARAMETERS);
spreadsheetService.setOAuthCredentials(oauthParameters, new OAuthHmacSha1Signer());
oauthParameters.setScope(SCOPE_SPREADSHEET); 
```

如果我在初始化 SpreadsheetService 时清楚地使用如下用户名/密码，我可以从 GDoc 中检索数据。

```
SpreadsheetService sService = new SpreadsheetService("test");
sService.setUserCredentials("username", "password"); 
```

我正在使用 App Engine SDK 1.6.6 和 gdata-spreadsheet-3.0。请告知我是否做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-09T05:27:49.730

该文档适用于 .Net，而不是 Java。如果你想用 Java 开发，我在这里找到了一个解决方案：[Sharing authentication/token between Android Google Client API and SpreadSheet API 3.0](https://stackoverflow.com/questions/24052412/sharing-authentication-token-between-android-google-client-api-and-spreadsheet-a)

```
 String token = GoogleAuthUtil.getToken(
          this,
          this.accountName,
          this.scopes);

  SpreadsheetService service = new SpreadsheetService("my-service-name");

  service.setProtocolVersion(SpreadsheetService.Versions.V3);
  service.setHeader("Authorization", "Bearer " + token); 
```

请注意，这不适用于设置令牌并导致 401 对我来说：

```
 // BAD CODE
  service.setUserToken(token);
  // BAD CODE 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-03T18:55:12.453

该文档包含完整的 Java 示例，展示了如何使用所有支持的机制执行身份验证。建议使用 OAuth 2.0，在以下位置进行了说明：

[https://developers.google.com/google-apps/spreadsheets/#performing_oauth_20](https://developers.google.com/google-apps/spreadsheets/#performing_oauth_20)

# objective-c - 多行的 UITableView 性能

> ID：10871020
> 
> 赞同：0
> 
> 时间：2012-06-03T14:08:01.777
> 
> 标签：objective-c, ios, performance, uitableview

我有处理设备地址簿的表，该表可以轻松拥有 500 多个联系人。此外，表格每 3 秒更新一次，然后运行代码

```
[tableContacts beginUpdates];
[tableContacts reloadRowsAtIndexPaths:arr withRowAnimation:UITableViewRowAnimationNone];
[tableContacts endUpdates]; 
```

每次更新时，我都会更新单元格上的文本和一个图像（存在）。单元格的所有计算都是后台线程上的句柄。问题是大多数时候滚动不够流畅。当我触摸表格开始滚动时，滚动没有响应 1 秒左右（我认为是因为此时表格正在刷新）。

所以问题是如何处理很长的表，这些表在短时间内获取数据并需要刷新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:13:36.397

有一个简单的方法和正确的方法，但无论如何 - 不要重新加载行。通过获取单元格`[self.tableView cellForRowAtIndexPath:]`并更改其属性，这是第一次。然后，在你的桌子上做一些关于强制更新的事情。

你的表的实际数据源是什么？是`NSFetchedResultsController`吗？是控制器内的`NSArray`吗？在任何情况下，您都应该只更新具有新数据的单元格。如果您使用 CoreData，请使用`NSFetchedResultsControllerDelegate`方法。对于`NSArray`我建议 KVO - 观察数组中更改的对象。

# mysql - 教义查询结果

> ID：10871021
> 
> 赞同：0
> 
> 时间：2012-06-03T14:08:02.357
> 
> 标签：mysql, sql, database, doctrine

我确实有以下教义查询。我的数据库是 MySQL。

```
 public static function getLastList($user_id){

    $user_id = 123;

    $q = Doctrine_Query::create()
            ->from('list l')
            ->innerJoin('l.listUser lu ')
            ->where('lu.user_id = ?', $user_id)
            ->orderBy('e.created ASC')
            ->limit(1)
            ->execute();

    if ($q == NULL) {
        print_r('false');
    } else {
        print_r('not false');
    }
} 
```

我的数据库中没有 user_id = 123 的条目。所以我期望的是“假”。但结果是“不假”。

1.) 为什么？

2.）如何在“是的，有一个用户”或“不，没有用户”之间划分这个特定的查询？

谢谢！

贡纳尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:12:15.950

[`execute()`](http://www.tig12.net/downloads/apidocs/symfony/lib/plugins/sfDoctrinePlugin/lib/vendor/doctrine/Doctrine/Query/Doctrine_Query_Abstract.class.html#det_methods_execute)返回`Doctrine_Collection`

您可以通过调用检查集合的大小[`count()`](http://www.tig12.net/downloads/apidocs/symfony/lib/plugins/sfDoctrinePlugin/lib/vendor/doctrine/Doctrine/Doctrine_Collection.class.html#det_methods_count)

```
if ($q->count() == 0) {
    print_r('false');
} else {
    print_r('not false');
} 
```

# asp.net-mvc-3 - asp mvc 3 单选按钮场景

> ID：10871022
> 
> 赞同：1
> 
> 时间：2012-06-03T14:08:06.277
> 
> 标签：asp.net-mvc-3

我有

```
public class Version
{
    public bool LeftChecked {get; set;}
    public bool RightChecked {get; set;}

    //some other properties
}

List<Version> versions = ... 
```

现在在一个视图中，我想要一个表格，其中的行对应于`versions`列表项和两列单选按钮：一组中的一列，另一组中的另一列（这样每列中只能选择一个按钮）。棘手的部分是如何将这些单选按钮映射`LeftChecked`和`RightChecked`属性，以便正确进行绑定？

**编辑** 我按照答案中的建议进行了尝试，但是生成的 html 看起来像这样：

```
<tr>
    <td>        
        <input id="Versions_0__LeftChecked" name="Versions[0].LeftChecked" type="radio" value="1" />    
    </td>    
    <td>    
        <input id="Versions_0__RightChecked" name="Versions[0].RightChecked" type="radio" value="1" />    
    </td>    
</tr>
<tr>
    <td>    
        <input id="Versions_1__LeftChecked" name="Versions[1].LeftChecked" type="radio" value="1" />
    </td>
    <td>
        <input id="Versions_1__RightChecked" name="Versions[1].RightChecked" type="radio" value="1" />
    </td>
</tr> 
```

这是不行的，因为相同的列`name`属性应该是相同的。此外，它似乎没有绑定到我的 C# 类。好吧，javascript 的方法做得又快又好……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T14:49:10.327

您应该能够遍历视图中的版本集合并使用 Html.CheckboxFor 帮助器来创建复选框。如果您使用下面的语法，您将在发布表单时获得正确的绑定。

```
...other form fields

@for (int i  = 0; i < Model.Versions.Count; i++)
{
    <tr>
       <td>
          <label>Left</label>
          @Html.CheckBoxFor(x => x.Versions[i].LeftChecked)
       </td>
       <td>
          <label>Right</label>
          @Html.CheckBoxFor(x => x.Versions[i].RightChecked)
       </td>
    ... other properties
    </tr>
} 
```

haacked 有一篇很好的文章解释了基础知识 [http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

# svn - SVN 外部（或类似）与单个树中的共享文件？

> ID：10871030
> 
> 赞同：0
> 
> 时间：2012-06-03T14:09:24.913
> 
> 标签：svn, unity3d, externals

所以我有这个困境，我正在努力解决。我是一名独立游戏开发人员，使用 Unity 游戏引擎在任何给定时间处理 6-7 个客户端项目。我遇到的问题是让我的共享代码在项目之间保持同步——我当前的解决方案非常“手动”且耗时（当我忘记更新所有内容时容易出错）。我开始研究 SVN 外部作为解决方案，但有一个问题。Unity 游戏引擎使用 *.meta 文件来维护有关文件在每个游戏中的使用方式的数据。

作为一个简单的示例 - 这是一个示例文件夹结构：

项目一：

*   根
*   根/资产
*   ROOT/资产/共享代码
*   ROOT/Assets/SharedCode/SharedScript.cs
*   ROOT/Assets/SharedCode/SharedScript.meta

项目二：

*   根
*   根/资产
*   ROOT/资产/共享代码
*   ROOT/Assets/SharedCode/SharedScript.cs
*   ROOT/Assets/SharedCode/SharedScript.meta

显而易见/直接的解决方案是让我的“SharedCode”文件夹成为外部的 SVN。出现的问题是 SharedScript.cs 文件在两个项目上应该是相同的，但是 SharedScript.meta 文件是项目特定的并且由游戏引擎自动生成（所以我不能说，将我所有的元文件存储在一个“SharedCode”文件夹外部某处的单个文件夹）。

有数百个这样的文件，所以我喜欢一个不涉及将每个“共享”文件视为自身外部的 SVN 的解决方案。

我目前丑陋的解决方案是将整个项目树保留在 SVN 中 - 我有一个子文件夹，它是一个忽略 .meta 文件的 GIT 存储库。虽然它非常难看，我经常提交/更新主项目而忘记提交/推送/拉取 git“库”项目。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T08:40:26.510

为什么不只对代码使用一个版本控制系统，对统一项目的资产使用一个版本控制系统。然后将 svn:externals 用于需要在项目之间共享的代码。

您可以忽略项目中的元文件并使用 git 对元文件进行版本控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:06:49.687

为什么不让您的“SharedCode”文件夹成为外部 SVN - 但没有“SharedScript.meta”文件（以及任何其他项目特定/自动生成的文件）。

现在让 SharedCode.csproj 指向一个不存在的文件“$(SolutionDir)/<(blah)/SharedScript.meta”。您可以简单地手动编辑 csproj 来执行此操作。请注意，您的所有解决方案现在必须将此元文件生成到此相对路径。

现在，当您将此 csproj 添加到您选择的解决方案中时，您需要设置项目依赖项，以便在构建“SharedCode”项目之前生成“SharedScript.meta”文件。现在应该没有问题了。

希望有帮助！

# javascript - 如何使用JS将当前歌曲的信息设置为iPhone锁屏

> ID：10871031
> 
> 赞同：0
> 
> 时间：2012-06-03T14:09:32.017
> 
> 标签：javascript, iphone, html, cordova

我的页面上有一个音频元素，我想在播放时将信息（标题、艺术家、专辑等）设置到 iPhone 锁定屏幕。（带 JS）

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:42:51.293

仅使用 Javascript 是不可能的。如果您只是在浏览器中运行 Javascript，则无法访问锁定屏幕功能。

**编辑**：

由于您使用的是PhoneGap，因此这是可能的。您需要访问该`MPNowPlayingInfoCenter`课程。至少有一个插件，AudioStream，可以让你访问。在这里查看：[https ://github.com/liip/phonegap-plugins-audiostream](https://github.com/liip/phonegap-plugins-audiostream)

# c# - 比较磁盘上的文件和 Head 上的相应版本？

> ID：10871033
> 
> 赞同：1
> 
> 时间：2012-06-03T14:10:06.453
> 
> 标签：c#, libgit2, libgit2sharp

我将如何在磁盘上的文件和 HEAD 上的相应版本之间进行比较？

我试过了：

```
TreeChanges changes = repo.Diff.Compare(repo.Head.Tip.Tree, DiffTarget.Index); 
```

`DiffTarget.Index`仅区分索引和头部树之间的变化。这很好，但我还想要一种方法来检索工作副本和树之间的更改。这可能吗？

我怎么能将差异限制在某个文件上——而不是整个索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:12:12.173

> 我还想要一种方法来检索工作副本和树之间的更改。

这仍在进行中。但是，您可以在**[此处](https://github.com/nulltoken/libgit2sharp/tree/topic/more-diff)**初步了解 API 。

> 我怎么能将差异限制在某个文件上——而不是整个索引？

Libgit2**[公开了一种](https://github.com/libgit2/libgit2/blob/development/include/git2/diff.h#L56-63)**将差异范围限制为路径数组内容的方法。这还没有包含在 LibGit2Sharp 中。

# vb.net - VB.NET 从图片中只得到一个正方形

> ID：10871036
> 
> 赞同：-2
> 
> 时间：2012-06-03T14:10:26.983
> 
> 标签：vb.net, pixel, image

> **可能重复：**
> [VB.NET 替换图片框图像的像素颜色](https://stackoverflow.com/questions/10871809/vb-net-replace-pixel-color-of-picturebox-image)

我想从全图
全图中提取正方形：

[![全图](../Images/81c045668d62afd45f94a690d6462de6.png)](https://i.stack.imgur.com/MtNr1.jpg)

我只想要这个：

[![预期的](../Images/412d16804b2bee899ca87b1f680ac543.png)](https://i.stack.imgur.com/VTUih.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T14:16:30.857

使用此功能应该可以工作：

```
Public Function GetPicturePart(ByVal SourceImage As Image, ByVal Region As Rectangle) As Bitmap
    Dim ImagePart As Bitmap = New Bitmap(Region.Width, Region.Height)
    Using G As Graphics = Graphics.FromImage(ImagePart)
        Dim TargetRect As Rectangle = New Rectangle(0, 0, Region.Width, Region.Height)
        Dim SourceRect As Rectangle = Region
        G.DrawImage(SourceImage, TargetRect, SourceRect, GraphicsUnit.Pixel)
    End Using
    Return ImagePart
End Function 
```

我认为这个功能是自描述的。;)

来源：[获取图片部分](http://dotnet-snippets.de/dns/vbnet-bildausschnitt-auslesen-SID340.aspx)

# objective-c - 传递数据 iOS nsmutable 数组

> ID：10871038
> 
> 赞同：0
> 
> 时间：2012-06-03T14:10:39.757
> 
> 标签：objective-c, ios, nsmutablearray

我有一个 tableview 和一个 detailview，我可以通过包含 detail view.h 并从距离设置一些值将数据从我的 tableview 传递到详细视图`initWithNib`。

```
DetailView *detailView = [[DetailView alloc] initWithNibName:@"DetailView" bundle:[NSBundle mainBundle]];

//passing data gekozenSpel

detailView.gekozenSpel = [tableData objectAtIndex:indexPath.row]; 
```

但是现在我有一个包含多个条目的数据表，其中一个已设置，即：可以在详细视图中更改，从 0 到 1 或从 1 到 0，作为字符串。一切正常，但现在我想将更改向后应用到表格视图，但这不起作用。

```
myTableView *myTableview = [[myTableView alloc] initWithNibName:@"myTableView" bundle:[NSBundle mainBundle]];

[myTableView.theTable replaceObjectAtIndex:location withObject:value]; 
```

因为如果您使用 initWithNib 方式，那么您将创建一个新的空表 nsmutablearray。但是我想在具有特定内容的特定位置更改该数组中的值。

也许一个单身人士可以从任何地方访问数据？我试过了，但我必须创建我声明为价值的实例，然后它是私有的而不是公共的。所以我不明白你是如何应用单例的。

任何帮助，将不胜感激，

简

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:56:50.977

您将需要向 DetailView 添加一个委托，该委托将向旧视图传递一个新数组，该数组将包含您将重新使用的新 tableData

有关委托的更多信息，这里有一些教程 [http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/) [如何在 Objective-C 中使用自定义委托](https://stackoverflow.com/questions/645449/how-to-use-custom-delegates-in-objective-c)

[简单的代表示例？](https://stackoverflow.com/questions/1051842/simple-delegate-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:19:46.913

我在详细视图中替换了心形符号的属性 (eigenschap)（最喜欢的：是或否），然后将整个数组放在母数组 (dataVoorMijnTabel) 上，以将其更新回主表视图 (mijnTabelView)。

`[eigenschappendata2 replaceObjectAtIndex:locatiehartje withObject:eigenschaphartje];

mijnTabelView *mtb = [[mijnTabelView alloc] initWithNibName:@"mijnTabelView" bundle:[NSBundle mainBundle]];`

`mtb.dataVoorMijnTabel = eigenschappendata2;`

# java - 如何序列化接口？

> ID：10871044
> 
> 赞同：12
> 
> 时间：2012-06-03T14:12:23.683
> 
> 标签：java, oop, serialization, types

假设我有一个`Serializable`类`ShapeHolder`拥有一个实现`Serializable` `Shape`接口的对象。我想确保保存正确的具体形状对象（稍后恢复正确的类型）。

我怎样才能做到这一点？

```
interface Shape extends Serializable {} 

class Circle implements Shape { 
   private static final long serialVersionUID = -1306760703066967345L;
}

class ShapeHolder implements Serializable {
   private static final long serialVersionUID = 1952358793540268673L;
   public Shape shape;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T21:19:25.927

Java`Serializable`会自动为您执行此操作。

```
public class SerializeInterfaceExample {

   interface Shape extends Serializable {} 
   static class Circle implements Shape { 
      private static final long serialVersionUID = -1306760703066967345L;
   }

   static class ShapeHolder implements Serializable {
      private static final long serialVersionUID = 1952358793540268673L;
      public Shape shape;
   }

   @Test public void canSerializeShape() 
         throws FileNotFoundException, IOException, ClassNotFoundException {
      ShapeHolder circleHolder = new ShapeHolder();
      circleHolder.shape = new Circle();

      ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("test"));
      out.writeObject(circleHolder);
      out.close();

      ObjectInputStream in = new ObjectInputStream(new FileInputStream("test"));
      final ShapeHolder restoredCircleHolder = (ShapeHolder) in.readObject();
      assertThat(restoredCircleHolder.shape, instanceOf(Circle.class));
      in.close();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:16:42.520

```
import java.io.*;

public class ExampleSerializableClass implements Serializable {
    private static final long serialVersionUID = 0L;

    transient private Shape shape;
    private String shapeClassName;

    private void writeObject(ObjectOutputStream out) throws IOException {
        shapeClassName = shape.getClass().getCanonicalName();
        out.defaultWriteObject();
    }

    private void readObject(ObjectInputStream in) 
           throws IOException, ClassNotFoundException, 
              InstantiationException, IllegalAccessException {
        in.defaultReadObject();
        Class<?> cls = Class.forName(shapeClassName);
        shape = (Shape) cls.newInstance();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T21:19:37.883

> 我想确保保存正确的具体形状对象（稍后恢复正确的类型）。

Java 的默认序列化（ObjectInputStream 和 ObjectOutputStream）开箱即用。序列化时，Java 会在其中写入具体类的名称，然后在反序列化时使用。

# encoding - 这个文件是如何编码的？

> ID：10871045
> 
> 赞同：1
> 
> 时间：2012-06-03T14:12:26.580
> 
> 标签：encoding, character-encoding

我从客户那里得到了一个由 Excel 生成的 .csv 文件。我的软件必须在 java 中打开并解析它。我正在使用[universalchardet](https://stackoverflow.com/a/1678810/334493)，但它没有从文件的前1,000 个字节中检测到编码。

在这 1,000 个第一个字节中，有一个序列应该被读取为`Boîte`，但是我找不到用于在 java 中将此文件转换为 UTF-8 字符串的正确编码。

在文件中，`Boîte`编码为`42,6F,94,74,65`（使用十六进制编辑器读取）。`B`, `o`,`t`并`e`使用标准拉丁编码，每个字符 1 个字节。`î`也仅在一个字节 0x94 上编码。

我不知道如何猜测这个字符集，我在网上的搜索都没有产生相关的结果。

我还尝试`file`在该文件上使用：

```
$ file export.csv
/Users/bicou/Desktop/export.csv: Non-ISO extended-ASCII text, with CR line terminators 
```

但是我查看了扩展的 ASCII 字符集，该值`0x94`代表`ö`.

您是否有其他想法来猜测该文件的编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T14:23:01.833

这是[Mac OS 罗马](http://en.wikipedia.org/wiki/Mac_OS_Roman)编码。使用以下 java 代码时，文本已正确解码：

```
InputStreamReader isr = new InputStreamReader(new FileInputStream(targetFileName), "MacRoman"); 
```

我不知道如何删除我自己的问题。我觉得没啥用了。。。

# python - 为 Jira 创建问题时出现泡沫错误

> ID：10871046
> 
> 赞同：1
> 
> 时间：2012-06-03T14:12:33.307
> 
> 标签：python, soap, jira, suds

每次我尝试向 Jira 发送问题时都会收到以下错误：

```
suds.WebFault: Server raised fault: 'org.xml.sax.SAXException: 
   Found character data inside an array element while deserializing' 
```

我在 stackoverflow 和网络上搜索答案，有人说这是 suds 0.3 < fault。但我使用的是 0.4.1.1 版本。

这是我的问题字典：

```
 issue = {"assignee": "user_test",
             "components": "17311",
             "project": "TES",
             "description" : "This is a test",
             "priority" : "Major",
             "summary" : "Just a test title",
             "type":"Incident"
             } 
```

我制作的 Jira 类：

```
 def create_issue(self,issue):
        if(not isinstance(issue,dict)):
            raise Exception("Issue must be a dict")

        new_issue = self.jira.service.createIssue(in0 = self.auth,in1 = issue)

        return new_issue["key"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T18:44:53.037

使用 jira-python，我可以添加如下组件：

```
jira.create_issue(project={'key': project_id}, summary=ticket_summary,
                                 description=ticket_description, issuetype={'name': ticket_issue_type},
                                 components=[{'name': 'Application Slow'},], parent={'id': new_issue_key}, customfield_10101=termination_change_date,
                                 ) 
```

我一直试图以“components={'name': 'Application Slow'}”的形式发送一个组件，但我得到一个“数据不是数组”（或类似的东西）。我查看了 REST API 以及它们的一些数组示例是如何组成的，这就是我上面示例的方式。

[https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Create+Issue#JIRARESTAPIExample-CreateIssue-Request](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Create+Issue#JIRARESTAPIExample-CreateIssue-Request)

```
Labels
"customfield_10006": ["examplelabelnumber1", "examplelabelnumber2"]
Labels are arrays of strings 
```

我知道这有点离题，但是当我搜索我的问题时，我发现自己经常回到这里，所以我希望这对您和其他任何人都有帮助。这个概念与 components 字段相同，只会接受一个对象数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:34:12.847

组件不对。它必须是一系列事物，因为它是多值的。[https://developer.atlassian.com/display/JIRADEV/Creating+a+JIRA+SOAP+Client](https://developer.atlassian.com/display/JIRADEV/Creating+a+JIRA+SOAP+Client)的一些提示或查看 JIRA Python CLI 是如何做到的

“组件”：[17311]

# .net - 自动 Linq to SQL 优化器

> ID：10871047
> 
> 赞同：2
> 
> 时间：2012-06-03T14:12:49.970
> 
> 标签：.net, visual-studio, linq-to-sql

是否有任何自动或半自动工具可用于在 Visual Studio 中优化 Linq to SQL？

例如，显示提示、衡量性能、突出低效查询、提出改进建议的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T18:08:50.830

今天早上我在 github 上看到了这个[linq optomizer的链接。](http://palladin.github.io/LinqOptimizer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:17:01.460

我所知道的没有一个可以独自完成所有事情，但我所做的是：

1.  在 LinqPad 中运行查询并复制生成的 SQL 查询（您也可以不使用 LinqPad，但它是一个方便的工具）
2.  将查询粘贴到 SQL Server Management Studio 并从“查询”菜单中选择“包括实际执行计划”
3.  运行查询

然后，您可以非自动分析执行计划，但如果缺少某些索引，SSMS 将显示一个建议，将其与执行此操作的脚本一起创建。

# eclipse - Eclipse-Pydev 找不到 Lucene 库

> ID：10871063
> 
> 赞同：0
> 
> 时间：2012-06-03T14:15:15.643
> 
> 标签：eclipse, lucene, python-2.7, pydev

我一直在 Ubuntu OS 11.4 上使用 Eclipse Helios 中的 Pydev(2.5.0) 插件开发 Python 程序。

该程序使用 lucene (core 3.6) 库。Lucene 是使用 jcc 安装的。以前我使用文本编辑器开发它并在命令行上运行，`python xxx.py`并且没有关于 lucene 库的问题。

然后，我将项目导入 Eclipse IDE。其他源文件仍然按原样运行，但程序找不到 lucene 库的基本类。

```
import lucene # no error 
```

但如果我尝试导入`StandardAnalyzer`或任何其他类，我会收到一个错误：

```
from lucene import StandardAnalyzer  #error:  unresolved import 
```

我的配置：

*   语法版本：2.7

*   Python 解释器：usr/bin/python2.7

图书馆包括：

![Pythonpath 库](../Images/51cec93a3897af1af862888f09bca388.png)

我尝试将 lucene 文件夹添加到外部库，但没有帮助。我通过使用带有这些命令的命令行 python 解释器找到了这条路径。

```
import lucene
print lucene.__path__ 
```

虽然库中已经有类似的路径（参见图片。第二个库）

['/usr/local/lib/python2.7/dist-packages/lucene-3.6.0-py2.7-linux-i686.egg/lucene']

感谢您对这个问题的评论。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:50:50.027

我认为问题在于 PyDev 代码分析器无法真正分析 PyLucene。您可以尝试将“lucene”添加到窗口 > 首选项 > pydev > 解释器 - python > 强制内置（有关详细信息，请参见：[http](http://pydev.org/manual_101_interpreter.html) ://pydev.org/manual_101_interpreter.html ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T19:45:43.140

在 Mac OSX 10.8.5 上运行 Helios Service Release 2 时遇到同样的问题。修复它如下：

1.  打开项目>>属性

    *   选择 PyDev - 解释器/语法
    *   单击“单击此处配置未列出的解释器”
    *   选择您的口译员
2.  选择“Forced Builtins”并添加所有三个目录（lucene、org 和 java）（详见[http://pydev.org/manual_101_interpreter.html](http://pydev.org/manual_101_interpreter.html)）。

3.  选择“库”并将每个目录的路径添加到系统库。

# android - 将“/app”而不是“/appinst”与 android:pathPattern 匹配（使用意图过滤器）

> ID：10871065
> 
> 赞同：2
> 
> 时间：2012-06-03T14:16:25.957
> 
> 标签：android, android-intent

我正在尝试制定过滤某些特定网址的意图。我试图捕捉的网址是：

*   [http://host.com/app](http://host.com/app)
*   [http://host.com/app/](http://host.com/app/)
*   [http://host.com/app](http://host.com/app) ?...
*   [http://host.com/app/](http://host.com/app/) ?...

这可以通过

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.BROWSABLE" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:scheme="http" android:host="host.com"
        android:pathPrefix="/app" android:pathPattern="[app.*]"/>
</intent-filter> 
```

我的问题来了，因为我已经有一个网址：

*   [http://host.com/appinstall](http://host.com/appinstall)

而且我不想尝试在该网址中打开应用程序。

我已经试过了

*   `android:pathPattern="[app]`
*   `android:pathPattern="[app.*]`
*   `android:pathPattern="[app?.*]`
*   `android:pathPattern="[app\?.*]`
*   `android:pathPattern="[app\\?.*]`
*   `android:pathPattern="[app|app?.*]`
*   `android:pathPattern="[app|app\?.*]`
*   `android:pathPattern="[app|app\\?.*]`
*   `android:pathPattern="[nativeapp\z|nativeapp\?.*|nativeapp/.*]"`
*   `android:pathPattern="[nativeapp\\z|nativeapp\\?.*|nativeapp/.*]"`

没有一个工作。甚至`[app\\?.*]`打开了/appinstall。

注意：在有人问之前。我有 /appinstall 控制器，因为我正在开发的应用程序和 iPhone 应用程序和 appInstall url 有很多情况可以处理重定向到应用程序商店。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:30:09.643

您需要使用`android:path`而不是`android:pathPrefix`或，`android:pathPattern`因为这将`/app`完全匹配路径并且`/appinstall`将被忽略。

```
<!-- Matches "http://host.com/app" exactly, note that querystring, fragment
    identifiers and the trailing slash are not considered part of the path and 
    are therefore ignored so URLs that will match:
       http://host.com/app
       http://host.com/app/
       http://host.com/app?some=value
       http://host.com/app/?some=value
       http://host.com/app#fragmentIdentifier
       http://host.com/app/#fragmentIdentifier
       http://host.com/app?some=value#fragmentIdentifier
       http://host.com/app/?some=value#fragmentIdentifier
    URLs that will NOT match
       http://host.com/app/index.htm
       http://host.com/appinstall
       http://host.com/appinstall/
       http://host.com/app/subdirectory
       http://host.com/app/subdirectory/
       http://host.com/apple.htm
 -->
<data android:scheme="http" android:host="host.com" android:path="/app" /> 
```

如果您还想匹配网站的根目录，则需要添加一个附加`<data>`元素：

```
<data android:scheme="http" android:host="host.com" android:path="/" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:54:52.573

android:pathPattern 非常初级，并不是真正的正则表达式，它只允许运算符“。” 和 ”*”。

~~你必须非常聪明才能实现你的目标。一种方法可能是...~~

 ~~```
<!-- Matches "http://host.com/app" exactly, URLs that will match:
       http://host.com/app
       http://host.com/app/
 -->
<data android:scheme="http" android:host="host.com" android:path="/" />

<!-- Matches URLs prefixed with "http://host.com/app/"
       http://host.com/app/
       http://host.com/app/?query=value
       http://host.com/app/somepage.htm
 -->
<data android:scheme="http" android:host="host.com" android:pathPrefix="/app/" />

<!-- Matches URLs prefixed with "http://host.com/app?"
       http://host.com/app?query=value
 -->
<data android:scheme="http" android:host="host.com" android:pathPrefix="/app?" /> 
```~~  ~~**编辑：**

请忽略上述内容，我发现这是不正确的，因为您能够匹配的“路径”不包括查询字符串或片段标识符部分或 URL 的尾部斜杠。我会在一秒钟内提供另一个答案。~~

# c# - C# 监视器（来自 Java 开发人员 POV）

> ID：10871072
> 
> 赞同：0
> 
> 时间：2012-06-03T14:18:04.370
> 
> 标签：c#, java, concurrency, monitor

我正在开发 C#/directx 游戏客户端到 Java 的端口，这样我就可以学习一些 C#（因为我完全亵渎了它），同时提高了我对 java opengl 引擎的了解。

当我遇到以下情况时：

```
Monitor.Enter(preloadDictionary);
try {
     foreach (PreloadEntry entry in preloadDictionary.Values) {
         if (entry.loaded) continue;
         return entry;
     }
} finally {
     Monitor.Exit(preloadDictionary);
} 
```

我可以假设它如下所示吗？

```
syncronized(preloadDictionary) {
     [...]
} 
```

在以下情况下：

```
Monitor.Enter(worldServerMap);
try {
     worldServerMap[rv.WorldName] = entry;
     Monitor.PulseAll(worldServerMap);
} finally {
     Monitor.Exit(worldServerMap);
} 
```

是否`PulseAll()`像`notifyAll()`唤醒所有等待资源的线程一样？（但我在代码中找不到任何`Monitor.Wait()`被调用的地方）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:02:06.023

lock(x) 在最后是 Monitor.Enter 然后 Monitor.Exit。这是一种语言快捷方式。

如果你问我，它是 C# 语言中较弱的部分之一 - 仅仅是因为虽然有 MINOTIR 时它很好，但现在有各种版本的监视器（slim、spinlock 等）并且 lock 只支持其中之一他们。这很方便，但我不确定它是否明智；）

> 额外的 PulseAll() 是否像 notifyAll() 一样唤醒所有等待资源的线程？（但我在代码中找不到调用 Monitor.Wait() 的任何地方）。

除非您有明确的等待，否则 PulseAll 几乎没有意义，可能来自其他不想进入的线程。Enter 获取不到锁就等待，所以 Exit 足以进行正常同步。

我会开始寻找 Wait 或其他东西 - MOnitor 上的 PulseAll 仅在您有线程等待而不尝试在此阶段进入时才有意义。它可能导致一个糟糕的设计问题，基本上让他们等待然后得到脉冲然后尝试进入，它可能是某些 dsort 的非阻塞设计的一部分 - 很难说，但这是不寻常的。除非您可以在代码中的某处找到等待，否则我可能会尝试杀死 PulseAll 并看看会发生什么。

# ios - 计算 NSArray 中的出现次数

> ID：10871076
> 
> 赞同：1
> 
> 时间：2012-06-03T14:18:54.060
> 
> 标签：ios, nsarray, nspredicate

这是我的 NSArray 代码的一部分：

```
2012-06-03 16:03:45.140 test[4178:f803] data (
        {
        receiver = david;
        sender = james;
        idMessage = 248;

    },
        {
        receiver = david;
        sender = james;
        idMessage = 247;

    },
        {
        receiver = david;
        sender = Marc;
        idMessage = 246;

    }

) 
```

我想要发件人发送给收件人的消息数量或类似的东西

```
james = 2;
marc = 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:53:01.810

" `data`" 是 NSArray，它似乎包含`NSDictionary`对象。

所以你想以这种方式循环数组：

```
NSNumber * countOfSender;
NSString * nameOfSender;
NSMutableDictionary * countDictionary = [[NSMutableDictionary alloc] initWithCapacity: 1];

// go through the original array to examine each sender
for(NSDictionary *anEntry in data)
{
    nameOfSender = [anEntry objectForKey: @"sender"];
    if(sender)
    {
       countOfSender = [countDictionary objectForKey: nameOfSender];
        if(countOfSender == NULL)
        {
            // create a new count entry for this particular sender
            countOfSender = [NSNumber numberWithInt: 1];
        } else {
            // increment the previous count
            countOfSender = [NSNumber numberWithInt: [countOfSender intValue] + 1];
        }
        [countDictionary setObject: countOfSender forKey: nameOfSender];
    }
}

// now print out the outputs
for(nameOfSender in [countDictionary allKeys])
{
    countOfSender = [countDictionary objectForKey: nameOfSender];
    NSLog( @"%@ : %d" nameOfSender, [countOfSender intValue] );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:48:53.310

你会做类似..

```
NSMutableArray *array = [NSMutableArray array];
for(id object in yourArray) {

    NSLog("sender:%@ id:%i",[object valueForKey:@"sender"],[[object valueForKey:@"idMessage"] intValue]);

   NSMutableDictionary *dict = [
   NSMutableDictionary dictionary];
   [dict setValue:[object valueForKey:@"sender"] forKey:@"sender"];
   [dict setValue:[NSNumber numberWithInt:[[object valueForKey:@"idMessage"] intValue]] forKey:@"idMessage"];

   [array addObject:dict];
}

NSLog(@"%@",array); 
```

# ajax - jQuery Mobile - 在表单中使用 AJAX 在提交前注入 html

> ID：10871080
> 
> 赞同：1
> 
> 时间：2012-06-03T14:19:31.033
> 
> 标签：ajax, jquery-mobile

我有一个运行良好的现有 jQueryMobile 站点。我现在需要修改其中一个 HTML 表单以使用 AJAX 来更新页面，其中包含将通过 PHP 脚本检索的一些内容。

我过去曾在非 jQueryMobile 网站上这样做过，通常会将 Javascript 添加到 head 部分并将此属性添加到表单元素（在这种特殊情况下为输入文本字段）：

```
onchange="updateFormContent(this.value)" 
```

实际的脚本是这样的：

```
function updateFormContent(str)
{
if (str=="")
  {
  document.getElementById("Name").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("Name").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("POST","nameSearch.php?name="+str,true);
xmlhttp.send();
} 
```

我试图在我的 jQueryMobile 网站上对我的 HTML 表单做同样的事情并卡住了。这是我的 HTML 表单的一个简单示例：

[http://jsfiddle.net/4zjSx/](http://jsfiddle.net/4zjSx/)

当用户在名称字段中输入内容时，我想触发“nameSearch.php?name=” php 页面，该页面在数据库中搜索任何匹配的名称并在同一页面上显示结果，并在此过程中更新 DIV。

感谢任何提示我正确的方向或任何类似的jQueryMobile表单页面的工作示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:39:35.157

[http://www.w3schools.com/ajax/ajax_aspphp.asp](http://www.w3schools.com/ajax/ajax_aspphp.asp)

认为你正在寻找这个。

# java - 将代码从 Java 转换为 C#

> ID：10871082
> 
> 赞同：0
> 
> 时间：2012-06-03T14:19:48.900
> 
> 标签：java, c#, code-translation

我在 Java 中使用一种方法，但我也希望在 C# 中使用它。它用于判断 int 矩阵是否可传递。

```
static boolean isTransitive(boolean[][] matrix) {
    for (int i = 0; i < matrix.length; i++) {
        for (int j = 0; j < matrix.length; j++) {
            if (matrix[i][j]) {
                for (int k = 0; k < matrix.length; k++) {
                    if (matrix[j][k] && !matrix[i][k]) {
                        return false;
                    }
                }
            }
        }
    }
    return true;
} 
```

我的主要问题是，我不知道 C# 中的 matrix[i][j] 是什么意思？

代码是否可以使用这个 4x4 的 int 数组？

```
transNumbers[0, 0] = 0;
transNumbers[0, 1] = 1;
transNumbers[0, 2] = 0;
transNumbers[0, 3] = 0;
transNumbers[1, 0] = 1;
transNumbers[1, 1] = 0;
transNumbers[1, 2] = 1;
transNumbers[1, 3] = 0;
transNumbers[2, 0] = 0;
transNumbers[2, 1] = 0;
transNumbers[2, 2] = 0;
transNumbers[2, 3] = 1;
transNumbers[3, 0] = 0;
transNumbers[3, 1] = 0;
transNumbers[3, 2] = 0;
transNumbers[3, 3] = 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:24:59.697

matrix[i][j] 在 C# 中的含义与在 Java 中的含义完全相同。

也就是说，您的矩阵似乎是布尔矩阵，而不是您描述的整数矩阵！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:26:31.707

多维数组在 C# 中使用 , 每维定义。

例如

```
int[,] test = new int[list1.Count, list2.Count] 
```

[http://bytes.com/topic/c-sharp/answers/531671-array-matrix-definition](http://bytes.com/topic/c-sharp/answers/531671-array-matrix-definition)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:26:49.990

由于您使用的是`boolean`矩阵，因此`if (matrix[i][j])`在您的代码中意味着`boolean`该特定索引处的元素`[i][j]`是否为真。

更简单地分解它：

考虑一个数组：

```
[1][2][3]

[4][5][6]

[7][8][9] 
```

每个元素都可以通过它的索引来访问。因此，假设元素 5 具有索引`[1][1]`。（请记住，索引从 0 开始，而不是 1）。

`i`并且您可以使用和`j`在您的情况下使用变量来遍历引用您的索引的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T14:29:17.487

只是代替 [][] 像 [I,j] 一样使用它。其余的代码都很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T15:35:48.433

要将您的代码翻译成 C#，您所要做的就是替换`boolean`为`bool`. 这两种语言的其他一切都是相同的。

但是，C# 提供了您可能想要实现的附加功能。其中之一是真实多维数组的存在。它们在单个对象中实现了矩阵的多个维度，而`[][]`符号实际上是一个锯齿状数组，即数组的数组。

# ruby-on-rails-3 - 在rails 3上设计错误

> ID：10871084
> 
> 赞同：0
> 
> 时间：2012-06-03T14:20:08.640
> 
> 标签：ruby-on-rails-3, devise, ruby-on-rails-plugins

我收到以下错误消息：

```
undefined method `user_registration_path' for #<#<Class:0x10f227cd8>:0x10f5f6d50> 
```

提取的源代码（在第 3 行附近）：

```
1: <h2>Sign up</h2>
2: 
3: <%= form_for(resource_name, resource, :url => registration_path(resource_name)) do |f| %>
4:   <%= f.error_messages %>
5:   <p><%= f.label :email %></p>
6:   <p><%= f.text_field :email %></p> 
```

我检查了所有内容，没有发现错误，我刚刚创建了项目并安装了插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:41:14.507

我在新版本的 ror 中使用了旧版本的设计插件。=x

# matplotlib - 使用 matplotlib 查看从 shapefile 读取的多边形

> ID：10871085
> 
> 赞同：0
> 
> 时间：2012-06-03T14:20:09.910
> 
> 标签：matplotlib, shapefile

我正在尝试使用 matplotlib 和[pyshp](https://code.google.com/p/pyshp/)查看从 Shapefile 读取的基本多边形 但我所有的努力只产生了一个没有多边形的空轴。以下是我的一些尝试，使用显示[比利时边界](http://www.gadm.org/country)的数据集：

```
import shapefile as sf
r = sf.Reader("BEL_adm/BEL_adm0")
p=r.shapes()
b=p[0]
points = b.points

import matplotlib.pyplot as plt
from matplotlib.path import Path
imporst matplotlib.patches as patches

verts = points

verts = []
for x,y in points:
    verts.append(tuple([x,y]))

codes = ['']*len(verts)
codes[0] = Path.MOVETO
codes[-1] = Path.CLOSEPOLY

for i in range(1,len(verts)):
    codes[i]=Path.LINETO

path = Path(verts, codes)
fig = plt.figure()
ax = fig.add_subplot(111)
patch = patches.PathPatch(path, facecolor='orange', lw=2)
ax.add_patch(patch)
ax.set_xlim(-2,2)
ax.set_ylim(-2,2)
plt.show() 
```

另一个使用补丁的尝试也会产生一个空帧：

```
fig = plt.figure(figsize=(11.7,8.3))

ax = plt.subplot(111)
x,y=zip(*b.points)
import matplotlib.patches as patches
import matplotlib.pyplot as plt
bol=patches.Polygon(b.points,True, transform=ax.transAxes)

ax.add_patch(bol)
ax.set_ylim(0,60)
ax.set_xlim(0,200)
plt.show() 
```

很高兴看到我错过了什么。
谢谢，奥兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T00:51:09.867

而不是调用`set_xlim(), set_ylim()`来设置轴的范围，您可以使用`ax.autoscale()`.

对于您的 Polygon 版本，您不需要将 transform 参数设置为 ax.transAxes，只需调用：

```
bol=patches.Polygon(b.points,True) 
```

# javascript - 如何创建激活 jQuery/js 功能的图像按钮

> ID：10871086
> 
> 赞同：0
> 
> 时间：2012-06-03T14:20:23.250
> 
> 标签：javascript, jquery, javascript-events

我需要在 tr 元素中有类似的按钮，以便在单击时执行 js/jquery 操作。

奇怪的是，我很难找到有关如何从内联 html/image 按钮执行 jquery/js 的知识。

这是我的想法：

首先为like按钮创建一个自定义函数

```
 jQuery.fn.likebutn = function(theword, wordnumber) {

      //check if button is lighted up and if it is break

      //change button to lighted up
      jQuery(this).attr("src", "http://i46.tinypic.com/n18g3q.png");

      //add word to a div element
      jQuery('#cntrldiv0').append("<p>theword<p>");

      //ajax like.php file with the word and username/id
      jQuery.post('like.php', {theword:theword, userid: userid});
      }; 
```

然后在图像按钮元素中动态插入函数调用及其参数（因为表是在 php 中创建的）（因此在 html 中内联）

```
likebutn({theword: ${'row' . $wordnumber}, wordnumber:$wordnumber}); 
```

哪个输出

> likebutn（字：有孔，字数：1）

例如。

那么如何从 html 中唤起这样的功能呢？

在旁注中，为什么我在网上冲浪时看到的 jquery/js 图像按钮中有这么多事件监听（而不是我建议的），这不比在 html 中调用 inline 慢吗？

这是构造的外观：http: [//jsfiddle.net/Bc64R/](http://jsfiddle.net/Bc64R/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T22:03:32.543

除非您有一个名为 foraminated 的变量，否则这是不正确的：

```
likebutn(theword:foraminated, wordnumber:1) 
```

应该：

```
likebutn(theword:"foraminated", wordnumber:1) 
```

来自 html：

<... onclick="jQuery(this).likebutn(...)">

# android - Android 兼容库（Android 支持）安装问题

> ID：10871087
> 
> 赞同：1
> 
> 时间：2012-06-03T14:20:26.500
> 
> 标签：android

我正在尝试使用 SDK 管理器安装 Android 支持包（我认为以前称为 Android 兼容性库），但它一直（默默地）无法安装。

根据文档，它应该安装到我的 /extras/ 目录中，但是在从 SDK 成功下载和安装之后，该目录是空的。SDK Manager 日志中没有错误，并且模块说它安装在“额外”包列表中……但事实并非如此！

有没有其他人有过这方面的经验？

我正在使用 Wnidows Vista + Eclipse。

干杯，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:47:11.033

所以 - 无法弄清楚为什么 SDK 管理器不会安装它，但我确实在 StackOverflow 上找到[了这个链接，该链接解释了如何从 Google 存储库手动下载包（这在](https://stackoverflow.com/questions/2766713/android-download-the-android-sdk-components-for-offline-install "这个链接")[此处](http://qdevarena.blogspot.co.uk/2010/05/download-android-sdk-standalone-for.html "这里")的外部博客中进行了解释）

这意味着我至少可以下载 .zip 文件并手动安装！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T06:03:22.117

尝试从您安装的位置以管理员身份运行 SDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T23:32:25.383

或者，您可以根本不使用 eclipse 并手动将 .jar 添加到您的构建路径中。

1.  在项目资源管理器中创建一个名为“libs”的目录。

2.  将支持包文件 (.jar) 拖放到新的“libs”目录中。

3.  右键单击 .jar 文件，然后单击“添加到构建路径”。

你有它:)

# c++ - 内存在线程内的困难任务中验证

> ID：10871088
> 
> 赞同：0
> 
> 时间：2012-06-03T14:20:41.790
> 
> 标签：c++, multithreading, audio, vector

我目前正在为我的项目创建一个音响系统。每次调用 PlayAsync 在 std::thread 回调中创建声音实例。声音数据在此回调中循环进行。当线程继续时，它将声音实例存储在静态向量中。当线程结束（声音完成） - 它删除声音实例并减少实例计数。当应用程序结束时 - 它必须立即停止所有声音，向每个声音周期发送中断。

问题在于保持这些声音。我不确定，但我认为向量不是这个目的的正确选择。这是一个代码。

```
void gSound::PlayAsync()
{
    std::thread t(gSound::Play,mp_Audio,std::ref(*this));
    t.detach();
}
    HRESULT gSound::Play(IXAudio2* s_XAudio,gSound& sound)
{                
    gSound* pSound = new gSound(sound);   
    pSound->m_Disposed = false;         

    HRESULT hr;      
    // Create the source voice
    IXAudio2SourceVoice* pSourceVoice;
    if( FAILED( hr = s_XAudio->CreateSourceVoice( &pSourceVoice, pSound->pwfx ) ) )
    {
        gDebug::ShowMessage(L"Error creating source voice");      
        return hr;
    }

    // Submit the wave sample data using an XAUDIO2_BUFFER structure
    XAUDIO2_BUFFER buffer = {0};
    buffer.pAudioData = pSound->pbWaveData;
    buffer.Flags = XAUDIO2_END_OF_STREAM;  // tell the source voice not to expect any data after this buffer
    buffer.AudioBytes = pSound->cbWaveSize;

    if( FAILED( hr = pSourceVoice->SubmitSourceBuffer( &buffer ) ) )
    {
        gDebug::ShowMessage(L"Error submitting source buffer");
        pSourceVoice->DestroyVoice();   
        return hr;
    }

    hr = pSourceVoice->Start( 0 );     

    // Let the sound play
    BOOL isRunning = TRUE;
    m_soundInstanceCount++;     
    mp_SoundInstances.push_back(pSound); #MARK2
    while( SUCCEEDED( hr ) && isRunning && pSourceVoice != nullptr && !pSound->m_Interrupted)
    {    
        XAUDIO2_VOICE_STATE state;
        pSourceVoice->GetState( &state );
        isRunning = ( state.BuffersQueued > 0 ) != 0;     
        Sleep(10);
    }   
    pSourceVoice->DestroyVoice();   
    delete pSound;pSound = nullptr; //its correct ??
    m_soundInstanceCount--; 
    return 0;    
}

void gSound::InterrupAllSoundInstances()
{
    for(auto Iter = mp_SoundInstances.begin(); Iter != mp_SoundInstances.end(); Iter++)
    {
        if(*Iter != nullptr)//#MARK1
        {
        (*Iter)->m_Interrupted = true;
        }
    }
} 
```

在主应用程序循环之后，我在处理声音对象之前调用应用程序类。

```
 gSound::InterrupAllSoundInstances();
while (gSound::m_soundInstanceCount>0)//waiting for deleting all sound instances in threads
{

} 
```

问题：

所以#MARK1 - 如何检查向量中的内存验证？我没有这方面的经验。并在尝试检查无效内存时出错（它不等于 null）

还有#MARK2 - 如何正确使用矢量？或者向量是不好的选择？每次我创建声音实例时，它都会增加大小。这样不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:43:36.180

一个典型的问题：

```
delete pSound;
pSound = nullptr; // issue 
```

这不符合你的想法。

它将有效地设置`pSound`为 null，但也有相同指针的其他副本（向量中至少有一个）不会被无效。这就是为什么你没有`nullptr`在你的`vector`.

相反，您可以将索引注册到向量中并使其无效：`mp_SoundInstances[index] = nullptr;`.

但是，恐怕您根本不了解内存处理并且缺乏结构。对于内存处理，如果没有细节就很难说清楚，而且您的系统似乎足够复杂，恐怕它会说得太长而无法解释。对于结构，您应该阅读一些有关`Observer`模式的信息。

# c++ - C++ - CreateThread - 编译错误

> ID：10871089
> 
> 赞同：0
> 
> 时间：2012-06-03T14:20:55.897
> 
> 标签：c++, windows, createthread

这是我第一次处理windows。我试图创建线程，但我无法编译我的代码。

这是我的代码的一部分：

```
WORD _tid;
HANDLE  readerThread= CreateThread(0,0,readFromPort,0,0,&_tid); 
DWORD WINAPI readFromPort(LPVOID lpParam ){} 
```

我也试过：

```
LPDWORD_tid;
HANDLE  readerThread= CreateThread(0,0,readFromPort,0,0,_tid); 
DWORD WINAPI readFromPort(LPVOID lpParam ){} 
```

都没有编译。有人知道是什么问题吗？

（我用的是windows xp）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T14:43:23.980

好吧，不知道你有什么错误。但是可以给你一个很好的例子

```
#include "windows.h"
DWORD WINAPI readFromPort(LPVOID lpParam ){return 0;}
int _tmain(int argc, _TCHAR* argv[])
{
    DWORD _tid;
    HANDLE  readerThread= CreateThread(0,0,readFromPort,0,0,&_tid); 
    return 0;
} 
```

与你的不同：

1.  _tid 是 DWORD，而不是 WORD。

2.  readFromPort 返回值 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T14:36:15.460

让我猜猜：`readFromPort`必须返回一个值？

下次请也添加错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:29:19.540

好吧，如果您提供了一个最小的代码示例并且至少有一个编译错误，那就太好了。不过没关系，我会假装自己是个编译器。假设您的代码片段在函数内部，则其中有一个函数声明：

```
DWORD WINAPI readFromPort(LPVOID lpParam ){} 
```

我相信那是在搞砸你。您必须在其他函数范围之外声明/定义函数。

此外，`readFromPort`函数是在调用`CreateThread`它作为参数引用的位置之后声明的。因此，即使您将所有这些都放在全局范围内（这本身就是一个坏主意），它也不会起作用。

# mysql - MySQL fk 引用回表...无法插入新行

> ID：10871093
> 
> 赞同：0
> 
> 时间：2012-06-03T14:21:08.370
> 
> 标签：mysql

感谢您花时间查看我的主题。

我正在“尝试”为项目类别创建一个 MySQL 表，其中包含表中父类别的列。我将它作为 fk 链接回表，并打算将 (0) 插入到没有父项的列值中。

这是表定义：

```
-- -----------------------------------------------------
-- Table `mydb`.`itemCategories`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`itemCategories` (
  `itecat_id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `category` VARCHAR(60) NOT NULL ,
  `parentCat` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`itecat_id`) ,
  UNIQUE INDEX `uniqueCat` (`category` ASC) ,
  INDEX `fk_itemCategories_itemCategories1` (`parentCat` ASC) ,
 CONSTRAINT `fk_itemCategories_itemCategories1`
    FOREIGN KEY (`parentCat` )
    REFERENCES `mydb`.`itemCategories` (`itecat_id` )
    ON DELETE NO ACTION
   ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

当我尝试插入新行时，出现以下错误：

```
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`mydb`.`itemCategories`, CONSTRAINT `fk_itemCategories_itemCategories1` FOREIGN KEY (`parentCat`) REFERENCES `itemCategories` (`itecat_id`) ON DELETE NO ACTION) 
```

任何有关如何解决此问题或更好的解决方法的帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T14:22:46.660

`0`是一个价值！您应该使用`NULL`“空白字段”。

# c++ - 将函数作为显式模板参数传递

> ID：10871100
> 
> 赞同：21
> 
> 时间：2012-06-03T14:22:31.637
> 
> 标签：c++, templates

在下面的代码示例中，调用`foo`有效，而调用`bar`失败。

如果我注释掉对 的调用`bar`，代码就会编译，这告诉我自己的定义`bar`很好。那么如何`bar`正确调用呢？

```
#include <iostream>

using namespace std;

int multiply(int x, int y)
{
    return x * y;
}

template <class F>
void foo(int x, int y, F f)
{
    cout << f(x, y) << endl;
}

template <class F>
void bar(int x, int y)
{
    cout << F(x, y) << endl;
}

int main()
{
    foo(3, 4, multiply); // works
    bar<multiply>(3, 4); // fails

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-03T14:25:40.907

这里的问题是，`multiply`不是*类型*；它是一个*值*，但函数模板`bar`期望模板参数是一个*类型*。因此错误。

如果将函数模板定义为：

```
template <int (*F)(int,int)> //now it'll accept multiply (i.e value)
void bar(int x, int y)
{
    cout << F(x, y) << endl;
} 
```

那么它将起作用。见在线演示：http: [//ideone.com/qJrAe](http://ideone.com/qJrAe)

`typedef`您可以使用as来简化语法：

```
typedef int (*Fun)(int,int);

template <Fun F> //now it'll accept multiply (i.e value)
void bar(int x, int y)
{
    cout << F(x, y) << endl;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-03T14:28:22.033

`multiply`不是类型，而是函数。在这种情况下，它会衰减为函数指针。但是，`bar`模板化的类型又`multiply`不是。

Nawaz 已经以相反的方式回答了这个问题（如何更改`bar`要与函数一起使用的定义），但是要回答您的明确问题，即如何按自己的方式调用`bar`，您需要一个合适的类型，如下所示：

```
struct Type {
  const int result;
  Type(int x, int y): result(x * y) {}
  operator int() const { return result; }
};

// usage
bar<Type>(x, y);

// (edit) a suitable type doesn't necessarily mean a new type; this works as well
// if you aren't trying to solve any specific problem
bar<std::string>(64, 64); 
```

# java - 将 SQL Developer 时间戳格式 DD-MON-RRRR HH24:MI:SSXFF 解析为 Java 时间戳

> ID：10871102
> 
> 赞同：0
> 
> 时间：2012-06-03T14:22:34.777
> 
> 标签：java, oracle-sqldeveloper

我正在使用 sql developer 并使用 Java 进行开发。

我希望能够获取使用 sql developer export 创建的 csv 文件并将其解析回 java Timestamp。

从 sql developer --> DataBase --> NLS 获取的时间戳格式是 :DD-MON-RRRR HH24:MI:SSXFF

尝试使用新的 SimpleDateFormat("DD-MON-RRRR HH24:MI:SSXFF"); 抛出 IllegalArgumentException

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:46:04.437

Java 中允许的字母及其含义是不同的。请参阅[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)的文档。例如，“R”应该变成“y”。

# eclipse - 安装 Eclipse 插件失败

> ID：10871104
> 
> 赞同：-2
> 
> 时间：2012-06-03T14:22:44.597
> 
> 标签：eclipse, eclipse-plugin

我已将插件 jar 文件放在 dropins 文件夹（Indigo）下，当我关闭并重新启动 Eclipse 时，插件永远不会按预期加载。

我可以查看哪些日志以查看错误？

我正在使用 Mac。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:13:25.723

您是否尝试使用 -clean 选项启动 eclipse？你从哪里得到的jar文件？

尝试以下操作：

1.  将 dropins 下的所有插件文件移动到其他目录。
2.  创建新工作区，并启动 eclipse
3.  关闭日食
4.  将所有插件文件放回原处。
5.  打开您在#2 创建的工作区。

# java - 使用maven将persistence.xml放在库jar中的哪里？

> ID：10871109
> 
> 赞同：39
> 
> 时间：2012-06-03T14:23:16.493
> 
> 标签：java, maven, jpa, jar, persistence.xml

在工作中，我们有一个实体库，供多个客户端用于该库（几个 servlet、一个桌面应用程序等）。实体库由 JPA-Annotated 类和最显着的persistence.xml 组成。

所有项目均使用 maven 进行配置。

persistence.xml 文件应该放在哪里？它需要位于该实体库的 jar 文件中，我不确定如何使用 maven 进行配置。

（我们只是将一个项目拆分为几个较小的项目）

'''UPDATE''' 为了清楚这一点，有一个 Maven-Project A 包含 persistence.xml 和另一个 (B) 依赖于该项目。当我尝试在 A 中使用 EntityManager 时，我已将 persistence.xml 放在 A 中的 src/main/resources/META-INF/persistence.xml 中，没问题，insdie B：没有任何效果。

EclipseLink 给出以下警告：

```
[EL Warning]: The collection of metamodel types is empty. Model classes may not have been found during entity search for Java SE and some Java EE container managed persistence units.  Please verify that your entity classes are referenced in persistence.xml using either <class> elements or a global <exclude-unlisted-classes>false</exclude-unlisted-classes> element 
```

我怀疑没有找到 persistence.xml，但它存在于目标 jar 中。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-06-04T08:06:39.673

正如@Dave 上面提到的那样，`src/main/resources`就是这个地方。说到`persistence.xml`它应该放在`META-INF`文件夹里。所以得出结论：`src/main/resources/META-INF/persistence.xml`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-07T05:53:48.800

正如文档所建议的那样，当放置在 WEB-INF/classes/META-INF 时，我只得到了 persistence.xml 在我的 WAR 中工作：

[http://docs.oracle.com/cd/E19159-01/819-3669/bnbrj/index.html](http://docs.oracle.com/cd/E19159-01/819-3669/bnbrj/index.html)声明如下：

> 如果将持久性单元打包为 WAR 文件中的一组类**，那么**persistence.xml 应该位于 WAR 文件的**WEB-INF/classes/META-INF**目录中。

在我的 Eclipse 项目道具中，我将其添加到构建路径中：

`src\main\resources`

我的 Maven 项目在以下位置有 persistence.xml：

`src\main\resources\META-INF\persistence.xml`

运行后`Maven clean install`，将使用以下内容构建 WAR：

`WEB-INF\classes\META-INF\persistence.xml`

当我将此 WAR 放入 Tomcat 7 的 webapps 文件夹时，它已正确部署并且 JPA 可以正常工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-03T14:26:09.260

XML 配置文件几乎总是属于`src/main/resources`, 在包层次结构中（就像 Java 源文件一样）。这些文件将被复制到同一层次结构中的工件中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-18T00:09:42.913

在 maven pom.xml 文件中，您必须添加资源目录，因此您不必手动将其添加到 eclipse 中的构建路径中。

```
<project>
  ...
  <build>
    ...
    <resources>
      <resource>
        <directory>src/resources</directory>
      </resource>
    </resources>
    ...
  </build>
  ...
</project> 
```

见：[http ://maven.apache.org/plugins/maven-resources-plugin/examples/resource-directory.html](http://maven.apache.org/plugins/maven-resources-plugin/examples/resource-directory.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-31T16:29:05.183

只是提到我遇到的一个类似问题，它一直让我想到这个问题，所以这可能会帮助像我一样不太熟悉 Maven 的其他人。

我在 Eclipse 中有一个独立的 Java SE Maven 项目，该项目具有`hibernate-hikaricp`依赖项，并且我在文件夹中正确添加了一个`persistence.xml`文件，该`<project_name>/src/main/resources/META-INF`文件是此类 JSE 项目的 Maven 默认资源文件夹。

该项目`pom.xml`包含一个`maven-resources-plugin`插件，但我不确定是否与该问题有关。

关键是，我试图从 Eclipse 内部将项目作为 Java 应用程序运行（你知道，从具有公共静态`main(String [] args)`方法的主类）并且运行时日志一直说`META-INF/persistence.xml`找不到，即使它在提到的，正确的文件夹。

事实证明，我必须重建项目才能将`persistence.xml`文件重新发送到正确的目标输出文件夹。因此`clean`，在项目上（我认为根本没有必要，但你知道，我们尝试了一些事情）并`build`为我解决了这个问题。我从 Eclipse 内部调用它们，但我相信从命令行调用`mvn`也可以（我可能不得不在之后刷新 Eclipse 项目树以同步内容）。

# analytics - 诺基亚 S40 有什么分析工具吗？

> ID：10871112
> 
> 赞同：1
> 
> 时间：2012-06-03T14:23:52.973
> 
> 标签：analytics, nokia, nokia-s40

我有一个问题，诺基亚 S40 设备是否有任何分析工具，例如 Flurry analytics For android 和 iphone？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:29:40.907

根据[http://www.developer.nokia.com/Develop/Series_40/](http://www.developer.nokia.com/Develop/Series_40/) “Series 40 为您提供了两种出色的开发技术：Java 和 Web 应用程序”。

假设您使用的是 Java ME，您可以尝试[http://j2megroup.blogspot.com.br/2012/07/new-version-of-google-analytics-me-v21.html](http://j2megroup.blogspot.com.br/2012/07/new-version-of-google-analytics-me-v21.html)并且所有应用程序统计信息都将存储在谷歌分析帐户。

# browser - Gecko WebBrowser.ReadyState

> ID：10871117
> 
> 赞同：1
> 
> 时间：2012-06-03T14:24:18.517
> 
> 标签：browser, gecko, readystate

我正在 c# 中创建一个包含“geckoWebBrowser”的应用程序。但我必须等待网页加载完成，然后继续执行其他指令。有类似 WebBrowser.ReadyState 的东西吗？非常感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:00:23.997

Hi GeckoWebBrowser has a DocumentCompleted event you could use it.

**Edit:**

for example you have a button to show url

```
private void ShowBtnClick(object sender, EventArgs e)
{
     geckoWebBrowser1.Size = new Size(int.Parse(ViewportWidth.Text), int.Parse(ViewportHeight.Text));

     geckoWebBrowser1.DocumentCompleted += LoadingFinished;

     geckoWebBrowser1.Navigate(PageUrl.Text);
}

private void LoadingFinished(object sender, EventArgs args)
{
    GeckoElement body = geckoWebBrowser1.Document.GetElementsByTagName("body")[0];
    body.SetAttribute("style", "margin-top:-700px");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T11:59:27.923

尝试这个 ：

```
private void WaitBrowser(Gecko.GeckoWebBrowser wb)
    {
        while (wb.IsBusy)
        {
            Application.DoEvents();
        }
    } 
```

# python - Hadoop 流在 map/reduce 操作中崩溃

> ID：10871120
> 
> 赞同：1
> 
> 时间：2012-06-03T14:24:56.510
> 
> 标签：python, hadoop, hadoop-streaming

我在单个节点上使用 hadoop 1.0.1，并且正在尝试使用 python 2.7 流式传输制表符分隔的文件。我可以让 Michael Noll 的字数统计脚本使用 hadoop/python 运行，但无法让这个非常简单的映射器和缩减器工作，它只是复制文件。这是映射器：

```
import sys

for line in sys.stdin:
    line = line.strip()
    print '%s' % line 
```

这是减速器：

```
import sys

for line in sys.stdin:
    line = line.strip()
    print line 
```

这是输入文件的一部分：

```
1   857774.000000
2   859164.000000
3   859350.000000
... 
```

mapper 和 reducer 在 linux 中工作正常：

```
cat input.txt | python mapper.py | sort | python reducer.py > a.out 
```

但是在我 chmod 映射器和减速器之后，将输入文件移动到 hdfs 并检查它是否存在并运行：

```
bin/hadoop jar contrib/streaming/hadoop-*streaming*.jar -file mapperSimple.py -mapper mapperSimple.py -file reducerSimple.py -reducer reducerSimple.py -input inputDir/* -output outputDir 
```

我收到以下错误：

```
12/06/03 10:19:11 INFO streaming.StreamJob:  map 0%  reduce 0%
12/06/03 10:20:15 ERROR streaming.StreamJob: Job not successful. Error: # of failed Map Tasks exceeded allowed limit. FailedCount: 1\. LastFailedTask: task_201206030550_0003_m_000001
12/06/03 10:20:15 INFO streaming.StreamJob: killJob...
Streaming Job Failed! 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T14:50:17.517

你的 python 文件有[shebang / hashbang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)标头吗？我想你的问题是当 Java 来执行映射器 python 文件时，它要求操作系统执行文件，并且没有 shebang / hashbang 表示法，它不知道如何执行文件。我还将确保您的文件标有可执行权限（`chmod a+x mapperSimple.py`）：

```
#!/usr/bin/python
import sys

for line in sys.stdin:
    line = line.strip()
    print '%s' % line 
```

从命令行尝试此操作，以确保 shell 知道使用 python 解释器执行文件：

```
cat input.txt | ./mapper.py | sort | ./reducer.py > a.out 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-30T03:29:30.640

除了 Chris White Answer，shebang 标头应该是：

```
#!/usr/bin/env python 
```

默认情况下将使用python2.7。如果你想使用 python3，你可以使用：

```
#!/usr/bin/env python3 
```

并且不要使用：

```
#!/usr/bin/python 
```

因为它在大多数计算机上都会失败..包括我的 ****sigh****

检查此[答案](https://stackoverflow.com/questions/6908143/should-i-put-shebang-in-python-scripts-and-what-form-should-it-take)以获取更多信息

# ruby-on-rails - 如何在 ActiveRecord 查询中使用 OR 条件

> ID：10871131
> 
> 赞同：33
> 
> 时间：2012-06-03T14:27:37.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我想获取所有提供电子邮件或名字和姓氏的用户。例如：

```
users = User.where(:first_name => "James", :last_name => "Scott") 
```

这将返回所有名字和姓氏为“James”和“Scott”的用户。

```
users = User.where(:email => "james@gmail.com") 
```

这将返回电子邮件为“james@gmail.com”的用户。

有没有办法做一个`where`子句来返回具有相同名字和姓氏的用户以及具有在一个`where`查询中匹配的电子邮件的用户，或者我是否需要对 2 个单独的`where`子句进行合并。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2016-05-09T13:31:02.737

Rails 5 带有一个[`or`方法](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-or)。

此方法接受一个`ActiveRecord::Relation`对象。例如：

```
User.where(first_name: 'James', last_name: 'Scott')
    .or(User.where(email: 'james@gmail.com')) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-03T14:32:11.307

尝试这个：

```
users = User.where("(first_name = 'James' and last_name = 'Scott') or email = 'james@gmail.com'") 
```

要插入变量：

```
users = User.where("(first_name = ? and last_name = ?) or email = ?", first_name, last_name, email) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-03T14:42:33.633

如果您更喜欢 DSL 方法（没有 SQL），可以使用底层的 Arel 层：

```
t = User.arel_table
users = User.where(
  (t[:first_name].eq('Ernie').and(t[:last_name].eq('Scott')).
    or(t[:email].eq('james#gmail.com'))
) 
```

这有点难看，但如果你在 Arel 上使用一些包装器（例如，[这个](https://gist.github.com/1333253)），代码会更好：

```
users = User.where(
  ((User[:first_name] == 'Ernie') & (User[:last_name] == 'Scott')) |
   (User[:email] == 'james#gmail.com')
) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-03T14:37:30.243

如果您不想像其他人提到的那样编写 SQL，您可以直接访问 arel 结构（看起来像另一个答案）或者使用[squeel](https://github.com/ernie/squeel) gem 更优雅地完成它：

```
User.where{(first_name == 'Ernie') & (last_name == 'Scott') | (email == 'james#gmail.com')} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-03T14:30:53.793

您可以使用字符串条件，如`Client.where("orders_count = ? AND locked = ?", params[:orders], false)`，并与`OR`结合使用`AND`。不过要小心这些运算符的优先级。

参见[Active Record 查询接口指南](http://guides.rubyonrails.org/active_record_querying.html#conditions)

# django - 我应该在测试夹具中包含外国模型还是单独加载它们？

> ID：10871135
> 
> 赞同：0
> 
> 时间：2012-06-03T14:28:07.270
> 
> 标签：django, django-testing

在 Django 中使用测试夹具时，约定将外部模型包含在测试夹具中，即

```
class NewsletterTest(TestCase):
    fixtures = ('newsletters.json')
    # Test stuff 
```

比。按顺序加载关联模型：

```
class NewsletterTest(TestCase):
    fixtures = ('events.json','newsletters.json')
    # Test stuff 
```

似乎将它包含在同一个 testfixture 文件中的优点是，如果我需要更改我的夹具数据以在另一个地方进行测试，我可能会在其他地方破坏依赖该数据的测试。另一方面，如果我更新我的模型，我可能需要更新我的测试夹具，这意味着在它使用的每个位置都更新它。这通常是如何处理的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:19:26.303

我最终包括了一切。testfixture 应该拥有正确加载所需的一切，谁想要管理多个级别的 testfixture 依赖项，下面就是疯狂！

# javascript - 将代码添加到每个函数调用的任何方式

> ID：10871138
> 
> 赞同：2
> 
> 时间：2012-06-03T14:28:15.437
> 
> 标签：javascript

我想要一个快速的方法来添加类似的东西

```
console.log(functionName) 
```

到每个函数的顶部。

是否有一种快速简便的方法可以做到这一点，或者我需要手动将该代码添加到每个函数中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T14:32:48.670

你可以尝试这样的事情：

```
for( var x in window) {
    if( typeof window[x] == "function") {
        (function(x) {
            var ox = window[x];
            window[x] = function() {
                console.log(x);
                ox.apply(null,arguments);
            };
        })(x);
    }
} 
```

但是，这仅适用于全局函数，不适用于对象函数或作用域函数。它也是一种核弹，因此不能替代手动将控制台日志记录添加到您要调用的特定功能。

相反，在代码中插入断点（使用浏览器的开发人员工具）并在该点检查调用堆栈可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:31:22.993

恐怕这对于 JavaScript 是不可能的，因为它不支持函数内容的运行时修改。

但是，您可以备份脚本并进行搜索和替换以节省编辑部分的时间；现代编辑器支持基本的正则表达式来帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:36:01.377

如果您使用[Frame.js](https://github.com/bishopZ/Frame.js)之类的流控制库，则您可以对应用程序中最重要的功能进行低级别访问。当然，您必须从一开始就使用 Frame 构建应用程序。如果您尝试修改已构建的应用程序，这将不起作用。

# python - python'long'十六进制值到十进制

> ID：10871147
> 
> 赞同：0
> 
> 时间：2012-06-03T14:29:53.877
> 
> 标签：python

嗨，我想在没有循环的情况下将十六进制值转换为十进制（因为“速度”问题）

```
ex)
>>> myvalue = "\xff\x80\x17\x90\x12\x44\x55\x99\x90\x12\x80"
>>> int(myvalue)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: '\xff\x80\x17\x90\x12DU\x99\x90\x12\x80'

>>> ord(myvalue)
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
TypeError: ord() expected a character, but string of length 11 found
>>> 
```

有人帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T14:33:30.410

您的数字似乎是作为二进制数据给出的整数。在 Python 3.2 中，您可以使用以下命令将其转换为 Python 整数`int.from_bytes()`：

```
>>> myvalue = b"\xff\x80\x17\x90\x12\x44\x55\x99\x90\x12\x80"
>>> int.from_bytes(myvalue, "big")
308880981568086674938794624 
```

我能为 Python 2.x 想出的最佳解决方案是

```
>>> myvalue = "\xff\x80\x17\x90\x12\x44\x55\x99\x90\x12\x80"
>>> int(myvalue.encode("hex"), 16)
308880981568086674938794624L 
```

由于这不涉及 Python 循环，因此它应该非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:48:28.063

该`struct`模块很可能不会使用循环：

```
import struct
valuesTuple = struct.unpack ('L', myValue[:4]) 
```

当然，这将数值限制为基本数据类型（int、long int 等）

# python - R的矩阵函数的numpy等价物是什么？

> ID：10871162
> 
> 赞同：2
> 
> 时间：2012-06-03T14:32:07.720
> 
> 标签：python, r, numpy

我正在移植一些 R 代码，您可以执行以下操作（x 和中心是矩阵）：

```
nx <- nrow(x);
nc <- nrow(centers);
matrix(rowSums(x), nrow=nx, ncol=nc) 
```

但是 numpy.matrix 不提供 nrow 和 ncol 参数。我尝试使用 reshape，但您必须保留元素的总数（R 函数似乎不是这种情况）。

我如何在 numpy 中达到相同的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:40:51.523

做`rowSums(x) * numpy.ones([nx, nc])`你想做的事吗？它确实提供了一个数组而不是矩阵，但无论如何这在 numpy 中通常更好。

# python - 适合 RSA 实现的语言

> ID：10871163
> 
> 赞同：0
> 
> 时间：2012-06-03T14:32:08.717
> 
> 标签：python, c, cryptography, rsa, primality-test

我想为一个大学项目实现一个 RSA 密码系统算法，我正在尝试决定使用哪种编程语言。我对C非常熟悉，所以这将是一个方便的选择。然而，该算法必须处理非常大的数字（它将包括一个 Primality 子例程），而且我听说使用 Python 会产生更好的实现。那正确吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:02:26.183

当然，您可以使用任何语言来实现 RSA，甚至是 Assembler。问题可能不是关于“更好”的实现，而是关于几周后查看结果代码时更容易掌握的问题。

让我们回顾一下 RSA 实现所需的内容：

*   大整数支持
*   模幂
*   模逆
*   密钥生成的素性测试

您选择的语言对这些的支持越多，结果就越清晰和易于理解。像 C(++) 这样的低级语言不会对大整数提供本机支持，但是像[gmp](http://gmplib.org/)这样的库会为您提供所需的一切。Java 有 BigInteger 类。

但是，结果可能不会像使用具有内置大整数支持的语言（例如 Python、Ruby 或 Haskell）的实现那样容易理解。生成的代码将非常类似于所使用算法的教科书描述。不利的一面是，它们往往比高度优化的 gmp 代码慢。

但由于此时性能可能不是您所追求的，我建议使用更高级的语言。您不必处理低级维护，可以专注于手头的任务，选择您最喜欢或有经验的那个。如果您想借鉴您对 C 的熟悉程度，没问题，使用任意 -诸如 gmp 之类的精密库，您也可以开始使用。

对于默认情况下可能没有内置到语言中的缺失部分，您可以使用以下内容作为参考：

*   Python 中内置了模幂运算（`pow`带有*3 个*参数），对于其他语言，您可以尝试[“平方和乘法”方法](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)
*   模逆可以从[扩展欧几里得算法](http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)中检索。gmp 和 Python 端口[gmpy2](http://code.google.com/p/gmpy/)将内置这些算法。
*   对于素数测试，我建议使用[Miller-Rabin](http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test)，这也不太难实现，但您也可以在[PyCrypto中找到实现](https://www.dlitz.net/software/pycrypto/)

尽管您可能已经知道这一点，但为了完整起见，请让我警告您，这种所谓的“教科书 RSA”实现在生产中使用并不安全 - 很多事情还没有解决。有[RSA 致盲](http://en.wikipedia.org/wiki/Blinding_%28cryptography%29)可以防止侧信道攻击，为了使 RSA 作为一种加密方案是安全的，你还需要实现某种形式的填充，为你的密钥等使用加密安全的随机生成器是至关重要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T14:35:52.693

我不知道 Python 是否会产生“更好”的实现，因为更好在这里是相当主观的。您可以找到两者的数字库，让您轻松处理大量数字。Python 具有 numpy 库的优势（imo），该库非常易于阅读和使用，并且通常更具人类可读性，这通常会导致更容易调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:35:17.277

使用脚本语言或任何比 C 更高级的语言（例如 C# 或 Java）很可能会更容易，因为您不必处理内存管理和其他与您的项目无关的任务。

# multitasking - 它是好标记还是不是 Ada95？

> ID：10871166
> 
> 赞同：-1
> 
> 时间：2012-06-03T14:32:40.527
> 
> 标签：multitasking, ada, critical-section, concurrent-programming

考虑 Ada95 中的以下控制器（受保护对象）以适应任务调用此控制器，如果等待标记 (Marker ) 仅在初始化之前自然地`Waiting()`对应于选择标记 ()，则它不会被置于等待状态：`Selecting_Marker`

```
protected type Controller is
    entry Waiting(Marker : in Marker_Type);
    procedure WakeUp(Marker : in Marker_Type);
private
    Tentative_Count : Natural := 0;
    Selecting_Marker : Marker_Type;
end Controller;

protected body Controller is

    entry Waiting (Marker : in Marker_Type) when Tentative_Count > 0 is
    begin
        Tentative_Count := Tentative_Count - 1;
        if Selecting_Marker /= Marker then 
            requeue Waiting;
        end if;
    end Waiting;

    procedure WakeUp (Marker : in Marker_Type) is
    begin
        Selecting_Marker := Marker;
        Tentative_Count := Waiting'Count;
    end WakeUp;

end Controller; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T01:01:54.160

对象是改变受保护对象的行为，可能是以下行：

`entry Waiting (Marker : in Marker_Type) when Tentative_Count > 0 is`

我对受保护对象并不精通，所以除了说你可能会更好 a) 重读本书关于受保护对象的章节之外，我不会提供更多信息；b) 了解代码的目标是什么以及教师/书籍的要求。

b 部分尤其重要，因为在现实生活中，您需要能够将规范转化为实现；并且通常准确的措辞与示例和/或示例/推理不一致。

其他资源：

*   [*Ada 95 基本原理：II.9 受保护类型*](http://www.adaic.org/resources/add_content/standards/95rat/rat95html/rat95-p1-2.html#9)
*   [*Ada 95 基本原理：9.1 受保护类型*](http://www.adaic.org/resources/add_content/standards/95rat/rat95html/rat95-p2-9.html#1)

# ruby-on-rails - heroku 键：添加错误

> ID：10871167
> 
> 赞同：0
> 
> 时间：2012-06-03T14:32:41.223
> 
> 标签：ruby-on-rails, ruby

我是 Rails 的初学者，我一直关注 ruby​​.railstutorials.org，直到我坚持本节[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#sec:1.4.1](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#sec:1.4.1)

在我安装 heroku gem 之后`gem install heruku`

我输入`heroku keys:add`然后我得到了这些错误。

```
/Users/xxx/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:287:in `resolve': Could not find gem 'jquery-rails (= 2.0.0) ruby' in the gems available on this machine. (Bundler::GemNotFound)
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:161:in `start'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:128:in `block in resolve'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:127:in `catch'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:127:in `resolve'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/definition.rb:192:in `resolve'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/definition.rb:127:in `specs'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/environment.rb:27:in `specs'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb:41:in `candidate?'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb:60:in `setup'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb:75:in `<top (required)>'
    from /Users/xxx/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from /Users/xxx/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /Users/xxx/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /Users/xxx/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/bin/ruby_noexec_wrapper:9:in `<main>'
abcs-MacBook-Pro-2:first_app xxx$ 
```

你能否让我知道如何解决它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:38:55.610

尝试使用正确的拼写再次安装 gem：

```
gem install heroku 
```

检查您正在使用的 ruby​​ 版本

```
rvm list
ruby -v
gem list 
```

你需要切换到正确的红宝石

```
rvm use <ruby version> 
```

然后再次安装heroku。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:03:31.447

获取[Home Brew](https://brew.sh/)，然后运行命令“brew doctor”。如果它告诉您有错误，请修复这些错误。

我猜您使用的是 Mac，并且您可能正在运行 MacPorts。这样做存在问题，因为 MacPorts 使用 rvm 尝试访问的旧库。您需要从 brew doctor 计划的路径中删除 opt 和一堆东西。

# java - aiff：程序化播放？

> ID：10871168
> 
> 赞同：1
> 
> 时间：2012-06-03T14:32:43.453
> 
> 标签：java, macos, audio, aiff

我正在尝试以编程方式播放我拥有的一些苹果循环文件。因为我喜欢 clojure，所以我首先尝试在 JVM 上执行此操作。[Java Sound Demo](http://www.oracle.com/technetwork/java/index-139508.html)可以很好地播放包附带的.aif，但是当我尝试播放我的循环文件之一时，我得到：

```
java.lang.IllegalArgumentException: No line matching interface Clip supporting
format PCM_SIGNED 48000.0 Hz, 24 bit, stereo, 6 bytes/frame, big-endian, 
and buffers of 671064 to 671064 bytes is supported. 
```

我猜这意味着 java sound api 不支持我的文件类型。我是语言不可知论者，但我很好奇播放这个最好的语言是什么？

我也研究了 pygame，但安装起来似乎是一场噩梦，所以想看看我的选择是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T22:58:20.083

问题是 Java 声音，它是古老的，迫切需要一些爱，不支持 24 位文件。（我很确定它支持 48kHz 并且它支持立体声未压缩 AIFF）

有一些使用各种其他库扩展 javasound 的选项，尽管我不太了解这些。你可以试试[http://www.tritonus.org/](http://www.tritonus.org/)

对于其他语言，一个起点是[http://www.mega-nerd.com/libsndfile/](http://www.mega-nerd.com/libsndfile/)，它非常流行，我认为除了 C 之外，您可能还喜欢其他语言的包装器。

# java - 如何在 ExecutorService 上停止所有提交的任务

> ID：10871174
> 
> 赞同：0
> 
> 时间：2012-06-03T14:33:45.160
> 
> 标签：java, multithreading

我想停止在 ExecutorService 上提交的所有任务，但我找不到执行此操作的方法。有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T14:36:13.937

看看[`ExecutorService.shutdownNow`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T14:42:40.157

例如，var pool 是一个 ExecutorService。

```
//start a task 
pool.execute(task);

//
try {
    pool.shutdown();
    if(!pool.awaitTermination(awaitTime, TimeUnit.MILLISECONDS)){
        pool.shutdownNow();
    }
} catch (InterruptedException e) {
    pool.shutdownNow();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T15:21:01.753

`ExecutorService`只有当任务本身被设计为响应外部信号（例如运行任务的线程上的中断，或其他一些应用程序设计的标志）时，才可能对提交的任何任务进行确定性关闭。`ExecutorService`它本身只会为您提供这些信号（当您调用它的`shutdown()`和`shutdownNow()`方法时）并通知所有正在运行的任务。如果您希望能够关闭所有任务（包括那些已经在运行但尚未完成的任务），那么将这些任务设计为具有取消策略。

# .net - 全局属性“http://www.w3.org/XML/1998/namespace:lang”已被声明

> ID：10871182
> 
> 赞同：10
> 
> 时间：2012-06-03T14:35:32.843
> 
> 标签：.net, xml, web-services, xsd

我有一个奇怪的问题，我有一个 Web 服务作为我系统的一部分安装在一些客户上，这意味着每个客户都有一个相同的 WS 副本。

当我编译 WS 时，在我的服务器和大多数客户机器上一切正常，但有一个客户有时会报告以下错误（通常 WS 对这个客户工作正常，90% 的时间）：

```
Description:
AgentWS: [2852] [525] [Emergency] 
System.Xml.Schema.XmlSchemaException: The global attribute 'http://www.w3.org/XML/1998/namespace:lang' has already been declared.
   at System.Xml.Schema.XmlSchemaSet.InternalValidationCallback(Object sender, ValidationEventArgs e)
   at System.Xml.Schema.BaseProcessor.SendValidationEvent(XmlSchemaException e, XmlSeverityType severity)
   at System.Xml.Schema.BaseProcessor.AddToTable(XmlSchemaObjectTable table, XmlQualifiedName qname, XmlSchemaObject item)
   at System.Xml.Schema.Compiler.Prepare(XmlSchema schema, Boolean cleanup)
   at System.Xml.Schema.XmlSchemaSet.Compile()
   at System.Xml.Serialization.XmlSchemas.Compile(ValidationEventHandler handler, Boolean fullCompile)
   at System.Web.Services.Description.SchemaCompiler.Compile(XmlSchemas schemas)
   at System.Web.Services.Description.WebServicesInteroperability.AnalyzeDescription(ServiceDescriptionCollection descriptions, BasicProfileViolationCollection violations)
   at System.Web.Services.Description.WebServicesInteroperability.CheckConformance(WsiProfiles claims, ServiceDescriptionCollection descriptions, BasicProfileViolationCollection violations)
   at ASP.defaultwsdlhelpgenerator_aspx.Page_Load(Object sender, EventArgs e) in c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\CONFIG\DefaultWsdlHelpGenerator.aspx:line 1439
   at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)
   at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
   at System.Web.UI.Control.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

任何人有任何想法？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T23:43:31.553

你的问题正是它所说的：你得到了两次定义的特定属性。这可能是由于 .NET 中的错误（我稍后会提到）或仅仅是由于配置问题而发生。为了理解我在说什么，以便您弄清楚如何在您的特定环境中最好地处理它，我将为您提供如何重现它的秘诀。它都基于相同的[XmlSchemaSet](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.aspx)对象，在您的堆栈跟踪中引用。

其中一些步骤特定于我正在使用的工具；我将尝试提供我能想到的替代方案。

Base.xsd ：这是代替 xml.xsd 文件

```
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType name="something">
        <xs:sequence>
            <xs:element name="aha" type="xs:string" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

Some.xsd：这是您设置中其他 XSD 文件的占位符。它的特别之处在于，它通过各种包含/导入“延伸”到上述 Base.xsd。

```
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">    
    <xsd:include schemaLocation="base.xsd"/>
    <xsd:include schemaLocation="http://localhost:9090/base.xsd"/>

    <xsd:element name="a" type="something"/>    
</xsd:schema> 
```

我设置了两个包含，以模仿不止一种可能的方式来“接触”Base.xsd。

localhost URL 应该通过一些 http 服务器：使用您的本地 IIS、任何其他 HTTP 服务器或您可以根据需要控制的 HTTP 模拟软件。

编写一个基于 XmlSchemaSet 编译“Some.xsd”的小 C# 脚本。Compile 方法[的在线帮助](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.compile.aspx)中的类似内容会起作用。

首先，确保第二个包含中的 URL 不可用。运行脚本。你会看到结果是编译成功！

然后，确保 URL 服务正常；运行脚本。您将收到与您的场景相同的错误，内容已定义。

您必须了解模式加载在 .NET 中的工作原理，以及模式编译的工作原理。底线是，如果您从相同的 uri 加载相同的内容两次或更多次，XSD 编译器通常足够聪明，可以弄清楚。如果你从两个不同的 URI 加载相同的内容，那么编译器就猜不出你的意图是什么；不管怎样，不同的 URI 意味着不同的模式，因此“已经声明”错误。

综合以上，可能是在你得到异常的机器上，通过不同的URI访问xml.xsd。

我将使用一个专门的工具来加载您的 WSDL 并为您提供所有依赖关系的图表（其他 WSDL 和/或外部 XSD）。在其中您应该立即看到 xml.xsd 是否来自两个不同的地方。

如果以上仍然没有产生足够的理解......要进行故障排除，首先看看你是否可以在没有外部连接的情况下运行你的东西（“拔掉网络插头”他说......）。然后，运行一个 http 调试器，Fiddler 就是一个例子，在运行 WS 的机器上，你在哪里得到异常，在哪里没有。监视错误并与调试跟踪相关联。

这应该让你朝着正确的方向前进。与某些评论不同，我不会费心禁用 WS-I BP 检查；正如您已经知道的那样，这并不能真正解决您的问题。

至于 .NET 中的错误，这是一个非常遥远但可能的情况。我假设您已经检查了补丁级别。我提到它的唯一原因是因为我遇到了它，我不得不编写自己的解析器来解决它。即使最新的.NET仍然存在，但它会一直表现出来......这就是为什么我怀疑你的情况是这个错误......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-25T14:29:39.143

我有一个类似的问题，下面的代码也抛出异常，说已经定义了全局属性。

```
 xmlSchemaSet = new XmlSchemaSet();
    xmlSchemaSet.Add(null, schemaFileName);
    xmlSchemaSet.Compile(); 
```

它被缓存在某处，因为我使用的定义是正确的。但是，一个简单的解决方案是添加一个验证处理程序并忽略那些您不希望从中出错的处理程序。

更改原始代码以具有架构验证事件处理程序：

```
 xmlSchemaSet = new XmlSchemaSet();
    xmlSchemaSet.Add(null, schemaFileName);
    xmlSchemaSet.ValidationEventHandler += xmlSchemaSet_ValidationEventHandler;
    xmlSchemaSet.Compile(); 
```

然后有一个处理程序，如：

```
/// <summary>
/// Ignore the global attribute already declared errors we sometimes get because of some caching.
/// This happens with xml.xsd.
/// </summary>
private static void xmlSchemaSet_ValidationEventHandler(object sender, ValidationEventArgs e)
{
  if (!e.Exception.Message.Contains("has already been declared"))
  {
    throw e.Exception;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-05T12:22:44.570

当项目未编译时，我在 Microsoft Visual Studio 2013 中添加 Web 引用时遇到了这个问题。这似乎会导致 WSDL 生成器代码中出现多线程问题。

在客户端代码编译时添加 Web 引用时不会出现问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T14:59:43.003

发布到 asmx-webservice 时，我随机弹出此错误。在这个特定站点的 web.config 中，定义了一些遗留程序集重定向：

```
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
    </dependentAssembly>
    <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
    </dependentAssembly>
</assemblyBinding>
</runtime> 
```

验证后删除该部分，不再需要它，解决了问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-12T14:15:47.703

我发现这只是在默认应用程序池 .NET 4 下运行的站点，但我的代码针对的是 3.5。更改为运行 .NET 2 的应用程序池可解决此问题。在 2 个客户的服务器上进行此操作，这绝对是一个在深入研究之前可以轻松尝试的解决方法 :-)

问候

利亚姆

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-13T10:47:31.517

在应用程序从 fw 4.5 代码库更新到 fw 4.7.2 代码库后，在应用程序日志中的 4 台服务器中的 1 台上看到了该错误。应用程序池重新启动有助于解决此问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-10T19:42:01.290

我通过更改属性 WebService 的默认属性命名空间（“tempuri.org”）在 .NET 中对其进行了修复。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-06-19T10:55:53.893

**如果您的web.config的****system.web**部分中有这两行：

 **```
<compilation debug="true" targetFramework="XXX"/>
<httpRuntime targetFramework="XXX"/> 
```

您需要删除**httpRuntime**节点才能解决问题。**

# javascript - JSON 有额外的格式，指定的名称/值？

> ID：10871184
> 
> 赞同：0
> 
> 时间：2012-06-03T14:35:57.967
> 
> 标签：javascript, jquery, json

我的代码看起来有点像这样：

```
var data = $(this).serializeArray(data);

$.ajax({
    data: JSON.stringify(data)
}); 
```

我也运行 a `console.log`，我看到 JSON 字符串格式为：

`[{"name":"inputName", "value":"inputValue"}]`

而我期待：

`[{"inputName":"inputValue"}]`

我误解了 JSON 格式还是有办法让它正确格式化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:40:50.173

JSON（嗯，任何散列/字典）被格式化为`{ property : value }`（或`{ key : value }`）。如果您想要每个`value`井……值！`for..in`在一个数组中，你可以用一个简单的语句来做到这一点。

```
vals = [];
hash = {a: 1, b: 2, c: 3};
for (item in hash) {
    vals.append(hash[item]);
}

console.log(vals);  // => [1, 2, 3] 
```

但是直接你的答案，你永远不会看到`[{"inputName":"inputValue"}]`，因为`inputName`不是键，而是变量（就像`inputValu`e 一样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:41:22.177

格式正确，如文档中所述：http: [//api.jquery.com/serializeArray/](http://api.jquery.com/serializeArray/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T15:06:04.233

[$.serializeArray](http://api.jquery.com/serializeArray/)产生这样的数组。

[您可以使用$.map](http://api.jquery.com/jQuery.map/)修改输出`$.serializeArray`以构建您想要的数组

```
var customArray = $.map(data,function(obj,i){
    var temp  = {};
    temp[obj.name] = obj.value;        
    return temp;
}); 
```

[工作小提琴](http://jsfiddle.net/joycse06/u86Eu/)

# java - 如何提取类文件以获取该类文件中的类？

> ID：10871188
> 
> 赞同：0
> 
> 时间：2012-06-03T14:36:29.207
> 
> 标签：java, javascript, class, import, io

如何从类文件中获取类文件？如果我没记错的话，有些课程里面还有其他课程。但我无法获得那些类文件。如何提取类文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T14:46:58.743

如果您的意思是获取已编译的内部类文件：已编译的内部类位于不同的`.class`文件中，通常以`$1`, `$2`etc. 结尾。

看看[这个 javaspecialists.eu](http://www.javaspecialists.eu/archive/Issue192b.html)

如果您的意思是-“如何使用内部类”：

```
new OuterClass.InnerClass(...); 
```

内部类必须在您调用它的代码中可见。（公共，包）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:42:23.690

如果您有 JAR 文件，您可以使用解压缩程序（如 WINZIP）将它们分开。类文件..我不知道。

但是，我知道您正在解决错误的问题。

# android-emulator - android安装错误：重复包

> ID：10871189
> 
> 赞同：1
> 
> 时间：2012-06-03T14:36:30.790
> 
> 标签：android-emulator

我正在尝试运行基于地图的应用程序，`com.google.andoid.maps`但是我收到以下错误：

```
[2012-06-03 17:12:43 - myGps] Installation error: INSTALL_FAILED_DUPLICATE_PACKAGE
[2012-06-03 17:12:43 - myGps] Please check logcat output for more details.
[2012-06-03 17:12:43 - myGps] Launch canceled! 
```

我已经成功安装了几次包，但是应用程序不会显示在模拟器的屏幕上，现在我什至无法安装它。我试过了：

1.  重置亚行
2.  手动安装
3.  检查包是否存在于ddms中

这些都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:00:14.017

com.google.andoid.maps 是默认的谷歌地图包。尝试为您的应用程序提供不同的包。它应该可以工作。

# java - ListFragment 获取项目 - NPE

> ID：10871190
> 
> 赞同：0
> 
> 时间：2012-06-03T14:36:44.747
> 
> 标签：java, android, runtime-error

当我访问 ListFragment 中的菜单项时`info.position`，我得到 NullPointerEx。有谁知道为什么？

```
 listView.setOnItemLongClickListener(new OnItemLongClickListener() {
            @Override
            public boolean onItemLongClick(AdapterView<?> parent, View view,
                  int position, long id) {
                if (mCurrentActionMode != null) {
                    return false;
                }

                mCurrentActionMode = getSherlockActivity().startActionMode(
                        mContentSelectionActionModeCallback);
                view.setSelected(true);
                return true;
            }
        });
    }

 private ActionMode.Callback mContentSelectionActionModeCallback = new ActionMode.Callback() {
            @Override
            public boolean onActionItemClicked(ActionMode actionMode, MenuItem item) {
                switch (item.getItemId()) {
                    case R.id.delete:
                        delete(item);
                        actionMode.finish();
                        return true;
                    }
                return false;
            }
}

        private void delete(MenuItem item) {
           AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
           Log.i("test", String.valueOf(info.position)); //NPE
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:12:29.067

在我看来，这超出了您尝试使用它的范围。

您应该获得该位置`onItemLongClick`并将其传递给您的其他方法到您的删除功能。

# python - Python URL 拆分

> ID：10871191
> 
> 赞同：4
> 
> 时间：2012-06-03T14:36:45.487
> 
> 标签：python, string, url, tld

我有一个类似于`google.com`Python 的字符串，我想将其分成两部分：`google`和`.com`. 问题是我有一个 URL，例如`subdomain.google.com`，我想将其拆分为`subdomain.google`和`.com`。

如何将 URL 的其余部分与 TLD 分开？由于`.`诸如`.co.uk`. 请注意，该 URL 不包含 http:// 或 www。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T14:39:04.580

[tldextract](http://pypi.python.org/pypi/tldextract)看起来像你需要的。它处理这个`.co.uk`问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-31T21:14:08.080

我使用[了 tdl](https://pypi.org/project/tld/)和[urllib](https://pypi.org/project/urllib5/)，但没有发现它们令人满意。我在 Google 搜索中多次发现这个关于如何解析 URL 的问题。过了一段时间，我花时间制作了一个正则表达式，并将其做成了一个开源包。

它处理具有二级顶级域的 URL，例如 co.uk，并且还支持带有特殊字符的国家 URL。

[PyPi 上的 url-parser](https://pypi.org/project/url-parser)
[GitHub 上的 URL Parser](https://github.com/AdaptedAS/url_parser)

对你来说，像这样使用它会很容易：

第一步：

```
pip install url-parser 
```

第二步：

```
from url_parser import parse_url

url = parse_url('subdomain.google.com')
url['subdomain'] # subdomain
url['domain'] # google
url['top_domain'] #com 
```

您可以使用这些键来获取 URL 的不同部分。

*   `protocol`
*   `www`
*   `sub_domain`
*   `domain`
*   `top_domain`
*   `dir`
*   `file`
*   `fragment`
*   `query`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T15:49:51.230

为此，您需要一个有效域名列表。顶级代码（.com、.org 等）和国家代码（.us、.fr 等）很容易找到。试试[http://www.icann.org/en/resources/registries/tlds](http://www.icann.org/en/resources/registries/tlds)。

对于二级域名（.co.uk、.org.au），您可能需要查找每个国家/地区代码以查看其子域。维基百科是你的朋友。

获得列表后，从您拥有的名称（google.com 或 co.uk）中获取最后两个部分，看看它是否在您的二级列表中。如果没有，请抓住最后一部分，看看它是否在您的顶级列表中。

# c# - 使用 C# 将 FTP .txt 文件传输到 FTP 站点

> ID：10871193
> 
> 赞同：0
> 
> 时间：2012-06-03T14:37:11.820
> 
> 标签：c#, ftp

我有一个`TXT`文件，我必须将`FTP`它保存到`FTP site`.

我找不到可以帮助我编写代码的完整教程。有人可以指点我一个好的教程，或者一些代码开始吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T14:38:57.747

[这](http://msdn.microsoft.com/en-us/library/ms229715.aspx)看起来不错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T14:59:12.363

正如我在评论中发布的那样，您可以看到此[链接](http://msdn.microsoft.com/en-us/library/ms229715.aspx)以获取有关如何将文件上传到 FTP 服务器的示例。

来自链接的代码：

```
using System;
using System.IO;
using System.Net;
using System.Text;

namespace Examples.System.Net
{
    public class WebRequestGetExample
    {
        public static void Main ()
        {
            // Get the object used to communicate with the server.
            FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://www.contoso.com/test.htm");
            request.Method = WebRequestMethods.Ftp.UploadFile;

            // This example assumes the FTP site uses anonymous logon.
            request.Credentials = new NetworkCredential ("anonymous","janeDoe@contoso.com");

            // Copy the contents of the file to the request stream.
            StreamReader sourceStream = new StreamReader("testfile.txt");
            byte [] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
            sourceStream.Close();
            request.ContentLength = fileContents.Length;

            Stream requestStream = request.GetRequestStream();
            requestStream.Write(fileContents, 0, fileContents.Length);
            requestStream.Close();

            FtpWebResponse response = (FtpWebResponse)request.GetResponse();

            Console.WriteLine("Upload File Complete, status {0}", response.StatusDescription);

            response.Close();
            }
        }
    }
} 
```

要验证文件是否正确上传，您可以检查响应，它具有 StatusDescription 和 StatusCode 属性。

或者，您再次调用 FTP 服务器，在其中设置方法`request.Method = WebRequestMethods.Ftp.ListDirectory;`。这将返回 FTP 服务器上的文件列表。

当然这不会验证文件是否正确上传，只是有一个同名的文件。

我希望这回答了你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T09:00:24.860

You can also try this code, applies for other file extensions too.

```
string ftpUrl = "ftp://server//foldername/fileName.ext";
string fileToUploaded = "c:/fileName.ext";
FtpWebRequest request = (FtpWebRequest)WebRequest.Create(ftpUrl);
request.Proxy = new WebProxy(); //-----Proxy bypassing(The requested FTP command is not supported when using HTTP proxy)
request.Method = WebRequestMethods.Ftp.UploadFile;  
                request.Credentials = new NetworkCredential(ftpUsername, ftpPassword);
                using (var requestStream = request.GetRequestStream())
                {
                    using (var input = File.OpenRead(fileToBeUploaded))
                    {
                        input.CopyTo(requestStream);
                    }
                } 
```

Try streaming the data, instead of loading it all into memory separately. Also `using` statement helps to dispose the resources perfectly.

# java - 无法更改 Eclipse 属性视图值

> ID：10871195
> 
> 赞同：1
> 
> 时间：2012-06-03T14:37:19.823
> 
> 标签：java, eclipse

我正在尝试创建 Eclipse 插件应用程序，其中在 treeViewer 中选择节点时在 Eclipse 属性视图中显示相应的值。我已经实现了覆盖`IPropertySource`接口的类，如下所示：

```
public class PropertyViewer implements IPropertySource
{
@Override
public Object getEditableValue() 
{
    return this;
}

@Override
public IPropertyDescriptor[] getPropertyDescriptors() {
    return desc;
}

@Override
public Object getPropertyValue(Object id) {
    application specific logic yo return value for a id
}

@Override
public boolean isPropertySet(Object id) {
    return true;
}

@Override
public void resetPropertyValue(Object id) {

}

@Override
public void setPropertyValue(Object id, Object value) {
    //to set vlaue for a changed property in eclipse property view
}} 
```

现在，上面代码的问题`setPropertyValue`是在 eclipse 属性上完成更新时正确调用了 。但更新后的属性未显示在输入时的 eclipse 属性视图中。但是当我再次取消选择并选择此节点时，它会显示更新的值。我用谷歌搜索了很多，得到了`firePropertyChange`必须在`setpropertyValue`函数下调用的方法。任何人都可以帮助我，因为我对此一点也不熟悉。一个显示如何调用 fireproperty 更改的小代码片段将很有帮助。提前非常感谢。托尔

# php - 如何配置 apache 虚拟主机让每个 php 脚本都包含一个或多个常见的 php 脚本？

> ID：10871198
> 
> 赞同：2
> 
> 时间：2012-06-03T14:37:44.037
> 
> 标签：php, apache

> **可能重复：**
> [如何为每个目录设置 PHP 的 auto_prepend_file 指令？](https://stackoverflow.com/questions/4248140/how-to-set-phps-auto-prepend-file-directive-per-directory)

对于整个 php 站点，我想让每个 php 脚本都包含一个通用的 php 文件。

我如何配置 apache 虚拟主机来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:46:05.100

根据您的服务器配置，您应该能够在**.htaccess**文件中使用[auto_prepend_file ：](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)

 **```
php_value auto_prepend_file "config.php" 
```

或者，对于**虚拟主机**：

```
<VirtualHost *:80>
    php_value auto_prepend_file "config.php"
</VirtualHost> 
```**

# ruby-on-rails - 如何将h4标签添加到refinerycms编辑器？

> ID：10871202
> 
> 赞同：6
> 
> 时间：2012-06-03T14:38:42.603
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refinerycms

我正在尝试将 h4 标签添加到refinerycms wysiwyg 编辑器。我该怎么做呢？没有找到任何关于此的文档。

我假设我必须对这个配置变量做些什么：

```
config.wymeditor_whitelist_tags = {} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-04T00:12:05.550

以下说明适用于 Refinery CMS 的 2.xx 和 3.xx 版本。

但是，在版本 3.xx 中，您将需要使用 custom_visual_editor_boot_options 而不是 custom_wymeditor_boot_options。

使用此文件：[https](https://github.com/refinery/refinerycms/blob/master/core/app/assets/javascripts/admin.js) ://github.com/refinery/refinerycms/blob/master/core/app/assets/javascripts/admin.js您可以在 Refinery 中为 WYMeditor 指定自定义选项。

首先，您需要覆盖文件：

```
bundle exec rake refinery:override javascript=admin 
```

现在，打开 app/assets/javascripts/admin.js 并将其编辑为如下所示：

```
// Use this to customize the wymeditor boot process
// Just mirror the options specified in boot_wym.js with the new options here.
// This will completely override anything specified in boot_wym.js for that key.
// e.g. skin: 'something_else'
if (typeof(custom_wymeditor_boot_options) == "undefined") { 
  custom_wymeditor_boot_options = {
    containersItems: [
      {'name': 'h1', 'title':'Heading_1', 'css':'wym_containers_h1'}
      , {'name': 'h2', 'title':'Heading_2', 'css':'wym_containers_h2'}
      , {'name': 'h3', 'title':'Heading_3', 'css':'wym_containers_h3'}
      , {'name': 'h4', 'title':'Heading_4', 'css':'wym_containers_h4'}
      , {'name': 'p', 'title':'Paragraph', 'css':'wym_containers_p'}
    ]
  }; 
} 
```

请注意，您所做的是覆盖 boot_wym.js.erb，它仅将 h1、h2、h3 和 p 指定为容器标签。请参阅：[https ://github.com/refinery/refinerycms/blob/2-0-stable/core/app/assets/javascripts/refinery/boot_wym.js.erb#L49-L54](https://github.com/refinery/refinerycms/blob/2-0-stable/core/app/assets/javascripts/refinery/boot_wym.js.erb#L49-L54)

您在 custom_wymeditor_boot_options 中指定的任何选项都会覆盖 boot_wym.js.erb 中 wymeditor_boot_options 中的任何内容，因此请确保它是有效的 Javascript，否则编辑器根本不会加载。

希望有帮助；如果您需要任何澄清，请告诉我。

菲尔

# raphael - 当只有 1 个值时，拉斐尔饼图始终为蓝色（如何用一个切片设置饼图的颜色）

> ID：10871208
> 
> 赞同：1
> 
> 时间：2012-06-03T14:39:26.383
> 
> 标签：raphael, pie-chart, graphael

我对拉斐尔饼图有疑问。我使用的数据是动态的，在某些情况下，只返回 1 个值，这意味着整个图表被填充，因为它是唯一的切片。问题是当只有 1 个值时，它会忽略我的颜色指定。

例如：下面是一个具有 2 个值的拉斐尔饼图的创建，每个切片都有在“颜色”部分中指定的正确颜色：

```
var r = Raphael("holder");  
r.piechart(160, 136, 120, [100,200],{colors: ["#000","#cecece"]}); 
```

这很好用，我得到两个大小合适的切片，一个黑色，一个灰色。

然而，下面的示例创建了一个完整的馅饼，总是用蓝色填充，无论我的颜色设置如何。

```
var r = Raphael("holder");  
r.piechart(160, 136, 120, [100],{colors: ["#000"]}); 
```

在这种情况下，我真的需要那个完整的馅饼是黑色的，因为它被设置为“颜色”

我做错了什么，还是这是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:24:11.453

INMO 这是一个错误，当馅饼只有一个切片时，它的颜色是硬编码的......

这是我解决它的方法（我所做的就是使用`colors`arg 如果它存在......）

在第 47 行之后的[g.pie.js](https://github.com/DmitryBaranovskiy/g.raphael/blob/master/g.pie.js)中添加这个

```
var my_color =  chartinst.colors[0];
if(opts.colors !== undefined){
    my_color =  opts.colors[0];
} 
```

然后在以下行中（原始 js 文件中的第 48 行）

```
series.push(paper.circle(cx, cy, r).attr({ fill: chartinst.colors[0].... 
```

替换`chartinst.colors[0]`为`my_color`

就是这样

```
 if (len == 1) {
        var my_color =  chartinst.colors[0];
        if(opts.colors !== undefined){
            my_color =  opts.colors[0];
        }
        series.push(paper.circle(cx, cy, r).attr({ fill: my_color,   .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:51:33.177

您可能已经自己解决了这个问题，因为这个问题已经存在了一天……但是您可以“欺骗”拉斐尔，通过一个特殊的数据集来渲染一个黑色单元，以添加一个无穷小的第二个值。所以，给定一个包含数据点的数组数据......

```
if ( data.length == 1 )
    data.push( 0.000001 );

canvas.piechart(250, 250, 120, data, {colors: ["#000", "#CECECE", "#F88" /*, ... */ ] }); 
```

小条仍然会在 180 度位置呈现为单像素线，但您可能会通过使用调色板来捏造它。

是的，这是一个技巧。我不相信 gRaphael 的行为是错误的，而是执行不善（单元素数据集显然是特殊情况，因为它们会像在所有其他情况下那样产生一个圆圈而不是路径）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T15:05:23.677

无需编辑 g.pie.js 对我来说很简单

```
var r = Raphael('st_diagram');

r.piechart(140, 140, 137, 100, 0.0001],{

        colors:['#9ae013','#9ae013'],
        strokewidth: 0
    }); 
```

# delphi - Delphi：关闭所有表单（MainForm 除外），但忽略任何 OnCloseQuery 对话框

> ID：10871214
> 
> 赞同：4
> 
> 时间：2012-06-03T14:40:11.453
> 
> 标签：delphi, delphi-7

基本上，我正在使用一个`TTimer`事件来关闭所有打开的表单并将用户带回主表单。我可以遍历`Screen.Forms`：

```
for i := 0 to Screen.Formcount - 1 do
  Screen.Forms[i].close; 
```

问题是其中`OnCloseQuery`一些表单上的事件 - 它们弹出`MessageDlg`会中断这个过程:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T14:54:30.953

您可以在主表单中使用一个标志，在询问用户是否继续之前，您的其他表单会检查该标志。像这样的东西：

单元1

```
type
  TForm1 = class(TForm)
    ..
  public
    UnconditinalClose: Boolean;
  end;

..

procedure TForm1.Timer1Timer(Sender: TObject);
begin
  UnconditinalClose := True;
end; 
```

单元2：

```
implementation

uses
  unit1;

procedure TForm2.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
begin
  CanClose := unit1.Form1.UnconditinalClose;
  if not CanClose then
    // ask the user if he/she's sure he/she wants to close
end; 
```

另一种解决方案可能是分离`OnCloseQuery`其他形式的事件处理程序。这只有在关闭时释放（释放）这些其他表单而不是隐藏（编辑以反映 Rob 的评论）~~时才实用：~~

```
procedure TForm1.Timer1Timer(Sender: TObject);
var
  i: Integer;
  SaveHandler: TCloseQueryEvent;
begin
  for i := 0 to Screen.Formcount - 1 do
    if Screen.Forms[i] <> Self then begin
      SaveHandler := Screen.Forms[i].OnCloseQuery;
      Screen.Forms[i].OnCloseQuery := nil;
      Screen.Forms[i].Close;
      Screen.Forms[i].OnCloseQuery := SaveHandler;
    end;
end; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-01T07:08:23.510

```
for i := 1 to Screen.Formcount - 1 do
  Screen.Forms[i].close; 
```

将值 i 初始化为 1，而不是 0。

# javascript - 使用本地存储添加字符串数字（数学）

> ID：10871217
> 
> 赞同：1
> 
> 时间：2012-06-03T14:40:36.967
> 
> 标签：javascript, html

我正在尝试使用基本数学将数字添加为字符串。我首先将本地存储设置为“0”，然后每次都添加“1”。我觉得我走在正确的道路上，但是当我运行它时，我的结果不是 0 + 1 = 1，而是在我的本地存储中得到“01”。我希望每次都能够将 1 添加到现有的本地存储中，所以 0 + 1 我得到 1。下一次大约 1 + 1 我得到 2，2 + 1 我得到 3，依此类推。

```
// sets "points" to 0 when user first loads page.
if (localStorage.getItem("points") === null){
localStorage.setItem("points", "0");
}

// get points
var totalPoints = localStorage.getItem("points");
// add 1 points to exisiting total
var addPoint = totalPoints +"1";
// set new total
localStorage.setItem("points", addPoint); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:43:28.307

您可以通过多种方式将字符串转换为数字（不是详尽的列表）：

```
var n = s * 1; // s is the string
var n = s - 0;
var n = parseFloat(s);
var n = Number(s);
var n = ~~s; // force to 32-bit integer
var n = parseInt(s, 10); // also integer, precise up to 53 bits 
```

当您从本地存储中获取字符串时，将它们转换为数字，进行数学运算，然后将结果放回去。

*编辑*——要记住的是它`+`比其他算术运算符更“有趣”，因为它对字符串值操作数有意义。事实上，JavaScript 倾向于对*运算*符进行字符串解释`+`，因此如果一侧是字符串，另一侧是数字，则该操作是字符串连接而不是算术加法。

# python - 制作一个矩阵正方形并在 numpy 中用所需的值填充它

> ID：10871220
> 
> 赞同：7
> 
> 时间：2012-06-03T14:41:04.557
> 
> 标签：python, numpy

一般来说，我们可以有任意大小的矩阵。对于我的应用程序，必须有方阵。虚拟条目也应该有一个指定的值。我想知道numpy是否有内置的东西？

或者最简单的方法

**编辑 ：**

矩阵 X 已经存在并且它不是平方的。我们想要填充该值以使其成为正方形。用虚拟给定值填充它。所有原始值将保持不变。

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-08-31T20:38:56.797

基于 LucasB 的答案，这里有一个函数，它将`M`用给定的值填充任意矩阵`val`，使其变为正方形：

```
def squarify(M,val):
    (a,b)=M.shape
    if a>b:
        padding=((0,0),(0,a-b))
    else:
        padding=((0,b-a),(0,0))
    return numpy.pad(M,padding,mode='constant',constant_values=val) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-04T21:50:11.140

从 Numpy 1.7 开始，就有了这个[`numpy.pad`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.pad.html)功能。这是一个例子：

```
>>> x = np.random.rand(2,3)
>>> np.pad(x, ((0,1), (0,0)), mode='constant', constant_values=42)
array([[  0.20687158,   0.21241617,   0.91913572],
       [  0.35815412,   0.08503839,   0.51852029],
       [ 42\.        ,  42\.        ,  42\.        ]]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T16:43:26.253

对于 2D numpy 数组`m`，通过创建一个`max(m.shape)`x`max(m.shape)`数组`p`并将其乘以所需的填充值，在将`p`对应于`m`(ie `p[0:m.shape[0], 0:m.shape[1]]`) 的切片设置为等于之前，这很简单`m`。

这导致以下函数，其中第一行处理输入只有一个维度的可能性（即是数组而不是矩阵）：

```
import numpy as np

def pad_to_square(a, pad_value=0):
  m = a.reshape((a.shape[0], -1))
  padded = pad_value * np.ones(2 * [max(m.shape)], dtype=m.dtype)
  padded[0:m.shape[0], 0:m.shape[1]] = m
  return padded 
```

因此，例如：

```
>>> r1 = np.random.rand(3, 5)
>>> r1
array([[ 0.85950957,  0.92468279,  0.93643261,  0.82723889,  0.54501699],
       [ 0.05921614,  0.94946809,  0.26500925,  0.02287463,  0.04511802],
       [ 0.99647148,  0.6926722 ,  0.70148198,  0.39861487,  0.86772468]])
>>> pad_to_square(r1, 3)
array([[ 0.85950957,  0.92468279,  0.93643261,  0.82723889,  0.54501699],
       [ 0.05921614,  0.94946809,  0.26500925,  0.02287463,  0.04511802],
       [ 0.99647148,  0.6926722 ,  0.70148198,  0.39861487,  0.86772468],
       [ 3\.        ,  3\.        ,  3\.        ,  3\.        ,  3\.        ],
       [ 3\.        ,  3\.        ,  3\.        ,  3\.        ,  3\.        ]]) 
```

或者

```
>>> r2=np.random.rand(4)
>>> r2
array([ 0.10307689,  0.83912888,  0.13105124,  0.09897586])
>>> pad_to_square(r2, 0)
array([[ 0.10307689,  0\.        ,  0\.        ,  0\.        ],
       [ 0.83912888,  0\.        ,  0\.        ,  0\.        ],
       [ 0.13105124,  0\.        ,  0\.        ,  0\.        ],
       [ 0.09897586,  0\.        ,  0\.        ,  0\.        ]]) 
```

等等

# php - Uploadify中如何传递和接收formData值？

> ID：10871230
> 
> 赞同：0
> 
> 时间：2012-06-03T14:42:29.813
> 
> 标签：php, javascript, jquery, upload, uploadify

我一直在尝试使用 formData 设置将数据从 uploadify 的客户端传递和修改到服务器文件 uploadify.php 。我已经尝试了这里和uploadify论坛上发布的许多解决方案，但无济于事。

最初，两个 formData 值都设置为字符串“空”，然后当开始上传时，eAlias 设置为 2，eDate 设置为日期。然后，服务器脚本通过 POST 接收这些值并将它们回显到客户端脚本，客户端脚本在警报中显示此数据（在 onUploadSuccess 中）。在尝试的所有可能的解决方案中，值要么是“”，要么是“空”，即 onUploadStart 中 formData 键的设置不起作用。

我在下面包含了大部分客户端脚本和服务器脚本。

任何帮助或建议将不胜感激，谢谢。

## 客户端脚本：

```
<script type="text/javascript">
$(document).ready(function() 
{
    $(".uploadifyfile").uploadify(
    {
        'swf'           : '/xx/uploadify.swf',
        'uploader'      : '/xx/uploadify.php',
        'auto'          : true,     
        'height'        : 15,
        'method'        : 'POST',
        'multi'         : false,    
        'uploadLimit'   : 10,       
        'formData'      : { 'eAlias' : 'empty', 'eDate' : 'empty' },
        'onUploadSuccess' : function(file, data, response) 
        {   
            alert('The file ' + file.name + ' was successfully uploaded with a response of ' + response + ' : ' + data);
            document.getElementById("adminForm")[buttonPressed].value = data;
        },
        'onUploadStart' : function(file) 
        {
            var eventDate = "<?php echo $this->row->dates; ?>";
            var eventVenue = 'test';
            alert('Venue Alias: ' + eventVenue + '\neventDate: ' + eventDate);

            //**** The line below is the one in question ****//
            $(".uploadifyfile").uploadify("settings", "formData", {"eAlias": 2, "eDate" : eventDate});
        },
        'onSelect' : function(event, ID, fileObj)
        {
            var eid = event.id;
            if(eid == "SWFUpload_0_0")
            {
                window.buttonPressed = "custom01";
                alert('1');
            }
            ...
        }
    });
});
</script> 
```

## 服务器端脚本

```
$targetFolder = '/xx/uploads'; // Relative to the root

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    // Set $someVar to 'someValue'
    $eventAlias = $_POST['eAlias'];
    $eventDate = $_POST['eDate'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);
        echo $targetFolder . '/' . $_FILES['Filedata']['name'];
        echo ' eventAlias: '.$eventAlias.' eventDate: '.$eventDate;
    } else {
        echo 'Invalid file type.';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T09:25:44.203

问题和我想的一样；这是因为我使用了 uploadify 按钮的多个实例，并使用 .uploadifyfile 类来引用它们。Uploadify 在使用类时似乎不能完全工作。

我想出的可能是基本的解决方案是使用“onSelect”函数将按下的按钮的 id 存储到全局变量（window.uploadid）中，然后在“onUploadStart”函数中使用它。现在，例如，当按下第二个按钮时，fileType 属性成功更改为 finalDetails。

我曾研究过使用[jQuery 选择器](http://api.jquery.com/category/selectors/)，但在这种情况下它们似乎不适用于 id，只是类。

我毫不怀疑会对下面的代码进行一些优化，但我希望它能拯救那些与我工作了很多小时的情况相同的人。

```
<script type="text/javascript">
$(document).ready(function() 
{
    $(".uploadifyfile").uploadify(
    {
        ...
        'method'        : 'post',
        'formData'      : { 'eventDate' : 'notSet', 'eventVenue' : 'notSet', 'fileType' : 'notSet' },
        'onUploadStart' : function(file) 
        {
            var eventDate = "<?php echo $this->row->dates; ?>";
            var eventVenue = "<?php echo JFilterOutput::stringURLSafe($this->row->venue); ?>";
            $(uploadid).uploadify('settings','formData',{ 'eventDate' : eventDate, 'eventVenue' : eventVenue, 'fileType' : fileType });
        },
        'onSelect' : function(event, ID, fileObj)
        {
            alert('event.id:' + event.id);

            var eid = event.id;             // To determine which button was pressed

            if(eid == "SWFUpload_0_0")      // Flyer upload
            {
                window.buttonPressed = "custom01";
                window.uploadid = "#file_upload";
                window.fileType = "flyer";
            }
            else if(eid == "SWFUpload_1_0") // Final Details upload
            {
                window.buttonPressed = "custom02";
                window.uploadid = "#file_upload2";
                window.fileType = "finalDetails";
            }
            ...
        }
    });
});
</script>

...
<input type="file" name="file_upload" id="file_upload" class="uploadifyfile" />
...
<input type="file" name="file_upload2" id="file_upload2" class="uploadifyfile" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:15:33.427

您的客户端代码是正确的。我使用相同的代码，并且效果很好。所以您最好使用 id 生成 uploadify 实例而不是类

# ios - 如何控制 iPhone 上的硬件麦克风输入增益/电平？

> ID：10871231
> 
> 赞同：8
> 
> 时间：2012-06-03T14:42:31.217
> 
> 标签：ios, core-audio, remoteio

我的音频分析功能在 iPad (2) 上的响应比 iPhone (4) 好。它似乎对 iPad 上较柔和的声音很敏感，而 iPhone 需要更大声的输入才能正确响应。无论这是因为麦克风放置、不同的组件、不同的软件配置还是其他一些因素，我都希望能够在我的应用程序中对其进行控制。

显然，我可以将所有音频样本相乘，以编程方式应用增益。当然，这也有软件成本，所以：

是否可以像在 MacOS 中一样从 iOS 软件中控制麦克风的增益？我找不到任何关于此的文档，但我希望我只是以某种方式错过了它。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-07T13:59:09.613

在 ios6+ 上，您可以使用 AVAudioSession 属性

```
 CGFloat gain = sender.value;
        NSError* error;
        self.audioSession = [AVAudioSession sharedInstance];
        if (self.audioSession.isInputGainSettable) {
            BOOL success = [self.audioSession setInputGain:gain 
                                                     error:&error];
               if (!success){} //error handling
        } else {
            NSLog(@"ios6 - cannot set input gain");
        } 
```

在 ios5 上，您可以使用 AudioSession 函数获取/设置音频输入增益属性

```
 UInt32 ui32propSize = sizeof(UInt32);
    UInt32 f32propSize = sizeof(Float32);
    UInt32 inputGainAvailable = 0;
    Float32 inputGain = sender.value;

    OSStatus err = 
        AudioSessionGetProperty(kAudioSessionProperty_InputGainAvailable
                            , &ui32propSize
                            , &inputGainAvailable);

    if (inputGainAvailable) {
    OSStatus err = 
        AudioSessionSetProperty(kAudioSessionProperty_InputGainScalar
                             , sizeof(inputGain)
                             , &inputGain);
    } else {
        NSLog(@"ios5 - cannot set input gain");
    }
    OSStatus err = 
        AudioSessionGetProperty(kAudioSessionProperty_InputGainScalar
                              , &f32propSize
                              , &inputGain);
    NSLog(@"inputGain: %0.2f",inputGain); 
```

（省略错误处理）

由于您对控制输入增益感兴趣，您可能还希望通过将音频会话模式设置为`AVAudioSessionModeMeasurement`(ios5+6)来禁用自动增益控制

```
[self.audioSession setMode:AVAudioSessionModeMeasurement
                     error:nil];
NSLog(@"mode:%@",self.audioSession.mode); 
```

这些设置是相当特定于硬件的，因此不能假设可用性。例如，我可以在 iPhone3GS/ios6 和 iPhone4S/ios5.1 上改变增益，但不能在 ipadMini/ios6.1 上改变。我可以在 iPhone3G 和 iPad mini 上禁用 AGC，但不能在 iPhone4S 上禁用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-03T15:30:12.140

我认为这可以帮助你： http: [//www.stefanpopp.de/2011/capture-iphone-microphone/](http://www.stefanpopp.de/2011/capture-iphone-microphone/)

# c++ - C/C++ va_list 没有正确返回参数

> ID：10871235
> 
> 赞同：4
> 
> 时间：2012-06-03T14:42:55.033
> 
> 标签：c++, c, variadic-functions

我在使用 va_list 时遇到问题。以下代码适用于 int：

```
main() {
  int f1=1;
  float** m = function(n,f1);
}

float** function(int n,...) {

  va_list mem_list;
  va_start(mem_list, n);
  for (int i=0;i<n;i++) {
    for (int j=0;j<n;j++) {
      //m[i][j]=va_arg(mem_list,float);
      int f = va_arg(mem_list,int);
      printf("%i \n",f);
    }
  }

  va_end(mem_list);
  return NULL;
} 
```

但是，当我更改为浮点数时，即

```
float f1=1.0;
float f = va_arg(mem_list,float);
printf("%f \n",f); 
```

它不返回正确的值（值为 0.00000）。我对正在发生的事情感到非常困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T14:44:41.677

在可变参数调用的上下文中，`float`实际上提升为`double`. 因此，您实际上需要拉出`double`s，而不是`float`s。这与`%f`for`printf()`同时使用`float`和的原因相同`double`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T15:10:42.343

由于我们在这里讨论的是 C++，因此您可能想要使用更新的 C++11 工具。

我可以建议可变参数模板，但它可能有点太高级了，另一方面，要传递一个任意长的列表，现在[`std::initializer_list<T>`](http://en.cppreference.com/w/cpp/utility/initializer_list)哪里`T`是一个简单类型。

```
 void function(std::initializer_list<int> list); 
```

它没有很多功能，只是：

*   `size()`它返回列表中有多少元素
*   并且像往常`begin()`一样`end()`返回迭代器

所以你实际上可以这样做：

```
void function(std::initializer_list<int> list) {
    std::cout << "Gonna print " << list.size() << " integers:\n";

    bool first = true;
    for (int i: list) {
        if (first) { first = false; } else { std::cout << ", "; }
        std::cout << i;
    }
    std::cout << "\n";
} 
```

然后将其调用为：

```
int main() {
    function({1, 2, 3, 4, 5});
} 
```

这将打印：

```
Gonna print 5 integers:
1, 2, 3, 4, 5 
```

通常在 C++ 中，远离 C 变量。它们是类型不安全的并且充满了陷阱。

# ruby - 是否可以在 Rspec 标签中包含条件逻辑

> ID：10871238
> 
> 赞同：2
> 
> 时间：2012-06-03T14:43:20.117
> 
> 标签：ruby, rspec, rspec2

是否可以在 Rspec2 标签中包含条件逻辑，以便我可以运行标签小于或等于给定值的所有示例？

就像是：

```
 rspec Dummy_spec.rb --tag version:= <=2 
```

显然，这是行不通的，但是否有一些 Ruby 魔法可以使这项工作？

这样做的原因是我想使用标签对我的 Rspec 示例进行版本控制。更具体地说，我希望能够过滤所有示例，其标记等于或小于我在运行示例时指定的标记值。

例如，如果我正在处理我的代码的第 2 版，但也开始使用第 3 版，那么我希望能够运行适用于我的代码的第 1 版和第 2 版的所有示例。但不是第 3 版。（请参见下面的代码示例）

期待一些回复，我的 rspec 示例与我的生产代码位于一个单独的项目中，因此使用代码对示例进行版本控制并不是一件简单的事情。但如果有更好的方法来处理这个问题，我愿意接受替代方案。

我想做的完整示例：

```
describe "using version as tags" do

  context "When I run 'rspec Dummy_spec.rb --tag version:2'"

  it "should run this test applicable to ver 1", :version =>1 do
    true.should eq(true)
  end

  it "should run this test applicable to ver 2", :version =>2 do
    true.should eq(true)
  end

  it "should not run this test applicable to ver 3", :version =>3 do
    true.should eq(true)
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:21:24.463

[--tag 选项](https://www.relishapp.com/rspec/rspec-core/v/2-10/docs/command-line/tag-option)的Relish 页面说明您可以通过 排除标签`~key:value`，因此您应该能够运行`rspec Dummy_spec.rb --tag ~version:3`除版本 3 测试之外的所有内容。

# c# - C# int 数组自动复制其他数组

> ID：10871248
> 
> 赞同：0
> 
> 时间：2012-06-03T14:44:35.147
> 
> 标签：c#, arrays, sorting

我编写了填充数组的代码，第二个数组复制了第一个数组。我更改了第二个数组中的一些数字，但是当我输出两个数组时，第一个数组也发生了变化。这是我的代码：

```
 int[] array1 = new int[5];
        int[] array2 = new int[5];
        int temp;

        for (int i = 0; i < array1.Length; i++)
        {
            array1[i] = i;
        }

        array2 = array1;
        temp = array2[2];
        array2[2] = array2[4];
        array2[4] = temp;

        for (int i = 0; i < array1.Length; i++)
        {
            richTextBox1.Text += array1[i].ToString() + " ";
        }
        for (int i = 0; i < array2.Length; i++)
        {
            richTextBox1.Text += array2[i].ToString() + " ";
        } 
```

有人可以向我解释为什么输出是 0 1 4 3 2 0 1 4 3 2 而不是 0 1 2 3 4 0 1 4 3 2？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T14:46:30.997

因为数组是引用类型，赋值`array2 = array1`会导致`array2`变量引用与 相同的数组`array1`。

**分配前：**

```
array1  --->  [0, 1, 2, 3, 4]

array2  --->  [0, 0, 0, 0, 0] 
```

**分配后：**

```
array1  --->  [0, 1, 2, 3, 4]
         /
array2  -     [0, 0, 0, 0, 0] <-- no longer reachable and will be garbage collected 
```

要实际创建数组的副本，请调用[`Clone`](http://msdn.microsoft.com/en-us/library/system.array.clone.aspx).

```
array2 = (int[])array1.Clone(); 
```

**分配给克隆后：**

```
array1  --->  [0, 1, 2, 3, 4]

array2  -     [0, 0, 0, 0, 0] <-- no longer reachable and will be garbage collected
         \
          ->  [0, 1, 2, 3, 4] 
```

请注意，该`[0, 0, 0, 0, 0]`数组从未实际使用过，因此您甚至不需要分配它。

```
//int[] array2 = new int[5];  <-- delete this line
int[] array2 = (int[])array1.Clone(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T14:46:34.203

```
array2 = array1; 
```

您现在有两个变量引用**同一个**数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T14:47:10.000

```
array2 = array1; 
```

您没有复制数组 -`Array`是一种引用类型，并且您正在分配另一个变量以指向**同一个数组**- 只有一个数组实例，因此如果您通过一个变量更改其内容，这些更改将通过另一个变量感知。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-03T14:46:57.393

```
array2 = array1;   // here you are losing reference to array2 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-03T15:02:34.460

因为数组是其他人所说的引用类型。

您可以改用它：

```
Array.Copy(array1, array2, array2.Length); 
```

# jquery - 随机文本数组 + 间隔淡入淡出 + 随机播放

> ID：10871257
> 
> 赞同：2
> 
> 时间：2012-06-03T14:45:25.233
> 
> 标签：jquery

我有一组文本，它们在设定的时间间隔内带有淡入淡出并且是随机的（[请参阅我的网站](http://zbettendorf.com)）。问题是我希望数组随机播放，以便在所有数组循环完成之前没有文本重复。我尝试`textArray.shuffle();`在数组之后直接添加（在多个其他解决方案中），但到目前为止，洗牌要么没有效果，要么完全杀死了脚本。

这是我的整个脚本：

```
$(document).ready( function() {
    var textArray = [
        'Hello! I\'m Zac. I\'m allergic to pineapples, gum, and woolly bear caterpillars. And Comic Sans.',
        'Hello! I\'m Zac. I love Apple products.',
        'Hello! I\'m Zac. I have touched the North, East, West, and South coasts of the USA.',
        'Hello! I\'m Zac. I\'m a designer.',
        'Hello! I\'m Zac. I lived in Minnesota for 20 years. I\'ve lived in Ohio for 2 and a half.',
        'Hello! I\'m Zac. Two of my favorite artists are Shepard Fairey and Banksy.',
        'Hello! I\'m Zac. Bettendorf (my last name) is also the name of one of the Quad Cities.',
        'Hello! I\'m Zac. My high school graduating class consisted of just 36 people.',
        'Hello! I\'m Zac. My closet is arranged by hue, saturation, and luminosity.',
        'Hello! I\'m Zac. I\'m a visual artist.',
        'Hello! I\'m Zac. I\'m a Minnesota native.',
        'Hello! I\'m Zac. The servers that host this website are 100% wind powered.'
        ];
    textArray.shuffle();

    $('#text-content').loadText( textArray, 6000 ); // ( array, interval )
});

// custom jquery plugin loadText()
$.fn.loadText = function( textArray, interval ) {
    return this.each( function() {
        var obj = $(this);
        obj.fadeOut( 'slow', function() {
            obj.empty().html( random_array( textArray ) );
            obj.fadeIn( 'slow' );
        });
        timeOut = setTimeout( function(){ obj.loadText( textArray, interval )}, interval );
        // reload random text (if not animated) -- entirely optional, can be removed, along with the reload link above (<a href="javascript:;" id="text-reload"><em>randomize</em></a>)
        $("#text-reload").click( function(){
            if( !obj.is(':animated') ) { clearTimeout( timeOut ); obj.loadText( textArray, interval );} // animation check prevents "too much recursion" error in jQuery
        });
    });
}
//public function
function random_array( aArray ) {
    var rand = Math.floor( Math.random() * aArray.length + aArray.length );
    var randArray = aArray[ rand - aArray.length ];
    return randArray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:52:57.797

我肯定会使用不同的方法：

```
​var RandomArray = function(myArray) {
  var
  currentArray = [],
  originalArray = myArray.slice(0);

  // Shuffle the array
  var shuffle = function() {
      var tmpArray = originalArray.slice(0);
      while(tmpArray.length) {
        var idx = Math.floor(Math.random() * tmpArray.length);
        currentArray.push(tmpArray.splice(idx, 1)[0]);
      }
  };

  // Get the next element
  this.next = function() {
    if(currentArray.length == 0) {
      shuffle();
    }
    return currentArray.shift();
  };
}​;

rnd = new RandomArray(a); 
```

它确实：

*   `myArray.length`每次每个元素都创建一个新的 shuffle'd 数组。
*   不要重复元素，除非最后一个元素有机会。

您可以通过修改将其集成到您的脚本中：

```
$(document).ready( function() {
  var textArray = [ ... ];
  rnd = new RandomArray(textArray);
  $('#text-content').loadText( rnd, 6000 );
});

$.fn.loadText = function( rnd, interval ) {
  ...
  obj.empty().html( rnd.next() );
  ...
  timeOut = setTimeout( function(){ obj.loadText( rnd, interval )}, interval );
  ...
  if( !obj.is(':animated') ) { clearTimeout( timeOut ); obj.loadText( rnd, interval );}
  ...
} 
```

放下`random_array`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:22:09.460

我不知道 javascript 中有内置的 shuffle 函数，这就是 textArray.shuffle() 导致您的代码失败的原因。您可以使用排序功能实现随机播放。您只需要传递 sort，这是一个随机返回正数或负数的函数。

这是应该打乱您的数组的代码。

```
textArray.sort(function() {return 0.5 - Math.random()}) 
```

这应该会产生您想要的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T15:29:05.213

你可以写一个数组洗牌。

**演示**：http: [//jsfiddle.net/lucuma/RPw9X/](http://jsfiddle.net/lucuma/RPw9X/)

```
Array.prototype.shuffle = function() {
    var s = [];
    while (this.length) s.push(this.splice(Math.random() * this.length, 1)[0]);
    while (s.length) this.push(s.pop());
    return this;
} 
```

# delphi - 我可以在 Delphi 中使用 UDPClient 和 UDPServer 发送大量数据吗？

> ID：10871260
> 
> 赞同：3
> 
> 时间：2012-06-03T14:45:55.513
> 
> 标签：delphi, network-programming, network-protocols, udpclient

首先，我打算创建 2 个程序服务器和客户端来发送大字节数组。我刚开始使用 UDPclient 和 udpserver 组件进行测试。如果这是正确的方法，我不是。

我找到了程序示例，但它是用旧的 Delphi 版本构建的，当我编译时出现错误。

```
HostName.Caption := UDPServer.LocalName;
HostAddress.Caption := GStack.LocalAddress;
Port.Caption := IntToStr(UDPServer.DefaultPort);
BufferSize.Caption := IntToStr(UDPServer.BufferSize);
UDPServer.Active := True; 
```

似乎`udpserver.localname`是旧版本。我需要在这里找到要使用的属性。如何在 udpserver 组件中获取和写入主机名。udpclient 具有 Host 属性并且工作正常，我可以编译客户端程序

谁能帮我放什么而不是“localname”属性

如果有人可以建议我另一种发送大字节数组的方法。它的大小约为 120000 。我会在每一分钟发送

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T17:19:54.660

最好使用 TCP，因为它可以检测传输中的数据损坏并再次请求损坏的数据包。检测是通过根据[16 位校验和](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Error_detection)检查数据包来进行的，这只会检测错误，但不允许系统更正它，这是再次请求数据的地方。

使用 Delphi 附带的 Indy 套接字库来创建 TCP 套接字可能是最方便的。TIdTCPServer 和 TIdTCPClient 组件应该可以很好地完成这项工作。

你可以在这里找到一些关于使用 Indy 库的演示：

*   [http://www.indyproject.org/sockets/demos/index.en.aspx](http://www.indyproject.org/sockets/demos/index.en.aspx)
*   [http://www.atozed.com/indy/Demos/10/index.en.aspx](http://www.atozed.com/indy/Demos/10/index.en.aspx)
*   [http://www.ciuly.com/delphi/indy/](http://www.ciuly.com/delphi/indy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T23:34:51.447

`GStack.HostName`是旧`LocalName`物业的替代品。

UDP 是基于消息的传输。120000 字节太多，无法容纳在单个 UDP 消息中。你必须把它分成小块。要使用 UDP 发送大量数据，请考虑使用基于 UDP 的传输协议，例如 TFTP。Indy 拥有用于此目的的组件`TIdTrivialFTP`。`TIdTrivialFTP`

否则，切换到 TCP，它是基于流的传输。然后，您可以发送任意数量的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T16:20:49.860

这取决于您尝试通过网络发送的数据。如果你想通过网络发送文件，你应该使用 TCP 协议，因为它保证服务器端接收到的数据与客户端发送的数据相同。如果您要发送的数据像语音一样有损（我的意思是我们在中间和数据中有延迟或丢失并不重要），您可以使用 UDP 协议。它会非常快，因为它没有检查数据是否损坏的开销。在 UDP 中，您可能会丢失数据包或数据报，因此 UDP 被称为无连接协议，因为实际上没有连接。我认为所有已知的编程语言都支持 TCP 和 UDP 连接。

# android - java.lang.RuntimeException：eglSwapBuffers 失败：EGL_SUCCESS 报告

> ID：10871261
> 
> 赞同：6
> 
> 时间：2012-06-03T14:45:57.643
> 
> 标签：android, opengl-es, libgdx

我有安卓游戏，使用 libgdx 框架

在 Google Play 商店有报告：

```
java.lang.RuntimeException: eglSwapBuffers failed: EGL_SUCCESS
at android.opengl.GLSurfaceView$EglHelper.throwEglException(GLSurfaceView.java:1085)
at android.opengl.GLSurfaceView$EglHelper.swap(GLSurfaceView.java:1043)
at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1369)
at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1123) 
```

我可以做什么？

报告的设备：三星 GT-S5830i、三星 Galaxy Y、LGE LG-P990、摩托罗拉 Photon 4G、摩托罗拉 Droid X2、

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T04:41:21.863

此问题已在[此处报告过](https://stackoverflow.com/questions/10459357/java-lang-runtimeexception-eglswapbuffers-failed-egl-success)。已经提交了[一个问题](http://code.google.com/p/android/issues/detail?id=30191&q=eglswapbuffers&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)。

您可以通过提供有关此问题的更多详细信息来提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T07:03:42.033

我做了一些研究，发现这个问题发生在低端设备中，因为它们的内存不足。在两个场景之间加载和卸载纹理会使 SwapBuffer 崩溃，因此会引发此运行时异常。

关于这个问题最烦人的事情是，当我在此类设备中进行测试时，我没有收到任何此类错误，但在 Playstore 中我收到了太多关于此问题的报告。

所以，我们可以通过两种方式解决这个问题：

1）从兼容列表中过滤掉低端设备。

2）使用捕获异常`UncaughtExceptionHandler()`并告诉用户内存不足的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-30T07:07:38.450

**上次编辑中的解决方案。**

* * *

它实际上也发生在我的低端设备上（`GT-S5830`和`GT-S5830i`）。

问题是，它不是因为内存不足而发生的。我记录了我游戏的当前内存使用情况，当我有 80 或更多的可用内存时，它没有超过 3 兆字节。我什至一直跑`System.gc()`，这提示垃圾收集器释放一些内存空间。

我没有解决方法，但我一找到答案就会更新这个答案。

* * *

经过一番搜索，gpu 相关的东西（如纹理）不是由垃圾收集器管理的（这就是为什么它们应该手动处理）。所以打电话`System.gc()`是毫无意义的。尽管如此，我正在处理我的所有纹理，并且我的游戏的内存使用率非常低。

* * *

我尝试了各种解决方案，但没有任何效果，但这里应该可以解决问题（没有尝试过这个，但应该可以工作）：

1.  只是不要一遍又一遍地加载这么多纹理。每当用户离开屏幕时，我的游戏都会处理然后初始化所有纹理。这可能是导致问题的原因。您需要做的是将加载的纹理/纹理图集保存在内存中（不要丢失它们的参考）。这样，导航回屏幕不会重新加载所有纹理。

2.  避免使用 raw `Texture`，而是使用**POT (Power Of Two)** `TextureAtlas`。

我会将这两个步骤应用到我的项目中，如果问题消失，我会回来确认我的解决方案。

* * *

那根本不是问题。我运行了一个非常长的纹理处理和加载循环，没有抛出异常/错误。我的上述建议不是解决方案。这个问题可能与过度`Screen`切换有关，但我猜不是因为当屏幕方向从纵向模式反复更改为横向模式时也会发生此问题，反之亦然。

* * *

## **解决方案：**

我认为`Game`'`setScreen(screen)`调用`Screen`' 是`dispose()`自动的（事实并非如此）。`dispose()`用于处理我所有的底层纹理。**我只是通过调用 的****覆盖****方法****解决了这个问题。`dispose()``Screen``hide()`**

使用`TextureAtlas`s 非常重要，因为您可以减少**附加到每个`Texture`**. （这可能是 EGL_SUCCESS 错误的原因）

`GT-S5830`在和`GT-S5830i`（三星 Galaxy Ace 和三星 Galaxy Y）上都经过测试。不再出现问题。

# matlab - B样条基本函数Matlab递归

> ID：10871265
> 
> 赞同：0
> 
> 时间：2012-06-03T14:46:12.713
> 
> 标签：matlab, recursion, bspline

我正在尝试制作 B 样条函数

首先我设置变量并制作结向量

```
# cmpp.m
% Set variables
k = 3;              % (8 mod 2 + 2 + 1) 
p = k - 1;          % Order = 2
n = 2*k - 1;        % Control points = 5
l = n + p + 1;      % Vector size n + p + 1 = 8

% Create the Knot vector
% Kv = [0 0 0 1 2 3 3 3] size = 8
knoten = 0;         % set all knots to 0
Kv = [];
for j=1:1:l 
    Kv = [ Kv 0 ]; 
end

for i=1:1:l
    if (i > n)
        if (i <= n) 
            Kv(i) = knoten + 1;
            knoten = knoten + 1;
        else
            Kv(i) = knoten;
        end
    else
        Kv(i) = knoten;
    end
end 
```

然后我写了一个函数来创建基本函数

```
# f.m
function N = f(N,t,i,k,u,x,s)
if (u < x)
    N(i,k) = ((((u-t(i)).*f(t,i,k-1,u+s,x,s)) / (t(i+k-1) - t(i))) + (((t(i+k)-u).*f(t,i+1,k-1,u+s,x,s)) / (t(i+k) - t(i+1))));
    if ((u >= t(i)) && (u < t(i+1)))
        N(i,1) = 1;
    else
        N(i,1) = 0;
    end
end
end 
```

并把它叫进来`cmpp.m`

```
# cmpp.m
...
...
...
N = zeros(l,k);
x = (n+1) - (k-1);
s = 1;
N = [N f(N,Kv,1,k,0,x,s)]; 
```

但我总是在 Matlab 中得到这个错误

```
>> cmpp
Subscripted assignment dimension mismatch.

Error in f (line 3)
    N(i,k) = ((((u-t(i)).*f(t,i,k-1,u+s,x,s)) / (t(i+k-1) - t(i))) +
    (((t(i+k)-u).*f(t,i+1,k-1,u+s,x,s)) / (t(i+k) - t(i+1))));

Error in cmpp (line 32)
N = [N f(N,Kv,1,k,0,x,s)] 
```

# struct - 如何在 typed/racket 中使用默认值初始化结构？

> ID：10871275
> 
> 赞同：4
> 
> 时间：2012-06-03T14:47:25.810
> 
> 标签：struct, macros, scheme, racket, typed-racket

我正在编写我的第一个打字/球拍应用程序，它是一个 cli 应用程序，它会询问你一些关于你一天的统计问题，例如你前一天晚上睡了多少小时，你吃了多少，你喝了多少杯咖啡等. 应用程序首先显示问题，然后通过函数等待用户输入`read`。然后将收集到的信息放入`struct`带有预定义字段的字段中。

`struct`看起来像这样：

```
(struct: day-stats 
    ([user-id : Integer]
     ;; ... 10 more Integer fields
     )) 
```

我的方法是首先使用每个字段的默认值 0 初始化结构，然后使用`struct-copy`函数在用户输入时使用信息更新结构的“实例”。

这就引出了一个问题，如何以最优雅的方式使用默认值初始化 struct？我是否创建了一个在编译/解析期间创建代码的宏，看起来像这样：

```
(day-stats 0 0 0 0 0 0 0 0 0 0 0) 
```

或者是否已经有一个宏可以通过读取结构中的某种属性来做到这一点？

**编辑：**

在查阅了更多文档后，我发现您可以在结构中设置一个属性来自动设置字段。**但是我找不到这是否可能在`typed/racket`.** 这是它的样子`racket`：

```
(struct day-stats 
    ([user-id #:auto]
     ;; ... 10 more Integer fields
    )
    #:auto-value 0) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T14:41:39.097

`#:auto`Typed Racket 目前不支持使用的结构。一般来说，`#:auto`这是一个非常不灵活的功能，我不会在 Racket 或 Typed Racket 中正常使用它。

相反，只需创建一个简单的构造函数，如下所示：

```
#lang typed/racket
(struct: day-stats ([x : Integer] [y : Integer]))

(define (mk-day-stats) (day-stats 0 0))

(mk-day-stats) 
```

这很容易推广到更多领域。您可以通过控制`provide`模块中的内容来隐藏常规构造函数。

# silverlight - 自定义过滤

> ID：10871279
> 
> 赞同：0
> 
> 时间：2012-06-03T14:47:50.887
> 
> 标签：silverlight, filter, telerik-grid

请为我建议最好的方法。我想更改默认过滤器的行为。我希望我的网格过滤器能够处理数据库中的所有数据，而不仅仅是网格中显示的数据。

例如：我在 db-table (1, 2, 3, 4, 5) 中有 5 行在 grid->ItemsSource 中，当我点击过滤器时，我只绑定了 2 条记录（1 和 2）我想查看所有来自 DB (1, 2, 3, 4, 5) 的记录，如果我检查 4 和 5，例如，网格从 DB 数据中获取并显示在过滤器行 (4, 5) 中选择。

我解决任务的最佳方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:23:27.333

DomainDataSource 将执行服务器端过滤。那是你要找的吗？

# php - 哪种数据类型最适合存储时间和日期

> ID：10871285
> 
> 赞同：3
> 
> 时间：2012-06-03T14:48:53.220
> 
> 标签：php, mysql, sql, datetime, time

我有两种选择在我的数据库中存储日期和时间。

1.  从 php 中的 time 函数生成时间和日期，然后将其存储在数据库中，以 int 数据类型为 4 个字节。

2.  在插入数据库期间将时间和日期生成为 8 字节的 datetime 数据类型。

我的问题是，如果我使用日期和时间列进行排序，哪种类型会使我的 SQL 查询更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T14:52:56.273

我总是讨厌它在包含人类不可读的日期和时间值`int`格式的数据库上构建查询。

如果您使用，查询可能会快一纳秒，`int`但它真的值得吗？我拒绝！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T14:53:28.567

使用`TIMESTAMP`数据类型。它存储为数字，但返回格式。因此，它的排序速度更快，并且更易于阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T15:19:32.620

您最好使用数据库的本机格式来存储日期时间。

我几乎看不到任何情况下您会为此目的使用另一种二进制格式。这将使数据库的该组件基本上无法用于其他访问方法。

至于人类可读性，您可以通过让视图访问以人类可读格式提供日期的表（在其他数据库中，您可以定义具有计算列的表）来解决该问题。此外，了解数据库的工具应该以人类可读的格式生成输出。

除非你有一个非常大的数据库或者处于一个非常严格的限制环境中，否则不要担心存储。您可能没有考虑当您允许列为 NULL 时存储的额外位，或者当它们在硬件字边界上未对齐时可能在字段之间进行的额外填充，或者因为记录不对齐而导致数据页上的空白空间'不对齐页面边界。

如果空间是一个如此重要的考虑因素，那么您可能想要开发自己的日期/时间格式，看看是否可以将其缩小到 2 或 3 个字节。

# ruby-on-rails - 轨道脚手架类型

> ID：10871288
> 
> 赞同：0
> 
> 时间：2012-06-03T14:49:03.623
> 
> 标签：ruby-on-rails

> **可能重复：**
> [Rails 模型类型列表](https://stackoverflow.com/questions/3260345/list-of-rails-model-types)

我正在自己学习RoR。我遇到了这个：

```
rails g scaffold blog title:string body:text –skip-stylesheets 
```

现在这创建了一种博客。我想找出你可以传递给脚手架方法的更多参数。

```
rails g scaffold <argument> title:string body:text –skip-stylesheets 
```

那些列在任何地方吗？我查看了rails api，但没有找到任何东西。也许我看错地方了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T15:08:39.763

`bundle exec rails g scaffold --help`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T14:57:58.627

这实际上只是将要创建的模型的名称——所以它可以是任何东西（当第一个字母大写时，这是一个有效的类名）。

# email - 通过 joomla 发送的电子邮件进入垃圾邮件文件夹

> ID：10871289
> 
> 赞同：0
> 
> 时间：2012-06-03T14:49:06.567
> 
> 标签：email, header, spam

我正在为我的网站使用最新的 Joomla 版本。此外，我们使用 DNS 记录将邮件发送到我们自己的服务器，而不是托管网站的服务器。

我使用了几个联系表单组件，但每封发送的邮件都会进入我的垃圾邮件文件夹。在网上搜索了几个小时（并经常链接到这个网站）后，我决定发表一篇新文章。

我是否使用标准的 joomla 表单或任何组件都没有关系。

每当用户在我的网站上填写表格时，都会发送电子邮件。用户收到其消息的副本，我收到用户的消息。但是，此邮件作为网络钓鱼被扔到垃圾邮件文件夹中。

邮件的发件人始终是： *username@nameserver.i3d.net；姓名；网站名称*

我必须更改/启用/禁用什么才能使其正常工作？

提前致谢。

帕特里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:15:07.307

有几个原因可能使您的电子邮件在垃圾邮件过滤器中看起来很可疑；找出哪个方向：

[http://www.mail-tester.com](http://www.mail-tester.com)

获取电子邮件地址并从您的网站向其发送电子邮件。然后回到页面，它会告诉你哪里出了问题。

顺便说一句，我在同一个问题上苦苦挣扎，我的问题是在 Joomla 2.5.9 上，显然当您发送 html 电子邮件时，邮件中不会添加纯文本副本，这被认为是“垃圾邮件行为”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:41:43.820

（对不起，我是 Joomla 的新手，但它使用 PHP，所以这可能适用。这个答案也有点长......）

这可能是电子邮件标题的问题。[`From:`许多电子邮件客户端会自动将标头中的地址与](http://php.net/manual/en/function.mail.php)[信封发件人](http://en.wikipedia.org/wiki/Bounce_address)不匹配的所有邮件放入垃圾箱。打个比方，你可能不相信一封写有“你有钱的叔叔”的蜗牛邮件，信封是用尼日利亚回信地址寄出的。此外，如果您的信封发件人的域与实际发送电子邮件的域不同，那么这是垃圾箱的另一张快速票。有关 Gmail 邮件阻止政策（和一般良好做法）的更多信息，您可以尝试[此帮助页面](http://support.google.com/mail/bin/answer.py?hl=en&answer=80369)。

下面是一些基本的 PHP 电子邮件发送代码：

```
$to = $userEmailAddress;
$subj = $emailSubject;
$mesg = $emailMessage;
$headers = implode("\r\n",array(
    "MIME-Version: 1.0"
    ,"Content-type: text/html;charset=iso-8859-1"
    ,"From: WEB_ADMIN_NICE_NAME <WEB_ADMIN@YOURSERVER.COM>" // *** 'From:' header
));
$from = "-fWEB_ADMIN@YOURSERVER.COM"; // *** envelope sender
if(!mail($to, $subj, $text, $headers, $from)){
    //Some error handling...
} 
```

在我评论的第一行中，您需要替换`WEB_ADMIN_NICE_NAME`为您希望电子邮件收件人看到的姓名（例如“Bill Gates”），并在这两行中替换`WEB_ADMIN@YOURSERVER.COM`为实际的返回地址（例如“da_boss@microsoft.com ”）。注意：您为返回地址选择的任何地址都是用户回复的发送地址。

重申一下，确保两行具有相同的返回地址（尽管好听的名称可以是您喜欢的任何名称），并确保发送邮件的实际服务器实际上位于`YOURSERVER.COM`.

最后，我不确定 Joomla 在哪里邮寄，但如果你完全迷路了，你可以尝试用for [grepping](http://www.cyberciti.biz/faq/howto-use-grep-command-in-linux-unix/)。`-lr``'mail[[:space:]]*('`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-09T11:18:40.020

问题是 i3d.net 电子邮件地址。我个人的经验是，他们的网络 (31.204.154.0 - 31.204.155.255) 是垃圾邮件的重要来源，他们不采取行动滥用报告。我建议改变你的托管公司。

# php - 如何在 MySQL 中实现“全局唯一 ID”？

> ID：10871291
> 
> 赞同：1
> 
> 时间：2012-06-03T14:49:14.030
> 
> 标签：php, mysql, database, facebook

如何将 Facebook 的唯一 ID 分配复制到大量资源？请参阅：[https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

对于 Facebook，每张照片、人物、事件、页面都有一个唯一的 ID。

如果我想让每个页面都有一个唯一的 ID，我需要做的就是拥有一个带有自动递增 ID 的页表。但这不是我想要实现的，我想要实现像 Facebook 那样的系统，其中每个对象（“资源”）都有唯一的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:57:50.650

MySQL有一个[UUID](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_uuid)函数；UUID 是生成此类唯一密钥的普遍接受的方式。

也就是说，使用 MySQL 的 UUID 函数会与基于语句的复制发生冲突；如果您当前或将来可能使用这种复制方法，请考虑使用您的语言提供的任何 UUID 生成机制。由于 UUID 是一种标准，因此任何合理的编程语言都将具有可用于生成它们的机制；例如，对于 Python，这是[uuid 模块](http://docs.python.org/library/uuid.html)。对于 PHP，标准库中提供了[uniqid](http://php.net/manual/en/function.uniqid.php)函数，尽管这不是符合标准的 UUID。

您可能会直接看到[这个问题](http://stackoverflow.com/questions/2040240/php-function-to-generate-v4-uuid)，用于从 PHP 生成符合标准的 UUID。

# php - pcntl_fork 在 PHP 中是如何工作的？

> ID：10871293
> 
> 赞同：27
> 
> 时间：2012-06-03T14:49:54.450
> 
> 标签：php, fork, pcntl

我对[`pcntl_fork`](http://php.net/pcntl_fork)PHP 感到困惑。

我认为它执行多线程，但它是如何工作的，我将如何在脚本中使用它？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-28T00:25:28.833

PCNTL 不能制作线程。它只“分叉”当前的 PHP 进程。这是什么意思？当您调用 时`pcntl_fork()`，当前进程分为两个进程。父进程的整个命名空间被复制到子进程中，两个进程继续并行执行，只有一个区别：`pcntl_fork()`在父进程和子进程中返回子进程的 PID `0`。

一些提示：

*   默认情况下禁用。如果您设法启用它，则仅对 CLI 执行此操作。永远不要将它与 Web 服务器一起使用！它将以不确定的方式运行。它还可以使整台机器停机。请禁用它并继续阅读。
*   进程之间的通信是可能的，但很可怕（通过共享内存中的序列化对象）。
*   文件描述符（和数据库连接）是共享的，这经常会导致问题。**您必须在分叉后重新连接数据库，**`MySQL server has gone away`否则当所有分叉进程中的第一个关闭连接时，您将收到类似所有分叉进程的错误。
*   父进程必须等待子进程完成，否则会留下消耗系统资源的僵尸进程。

[这是文档](http://php.net/manual/en/function.pcntl-fork.php)中的示例：

```
<?php

$pid = pcntl_fork();
if ($pid == -1) {
     die('could not fork');
} else if ($pid) {
     // we are the parent
     pcntl_wait($status); //Protect against Zombie children
} else {
     // we are the child
} 
```

但请记住，PHP 只是脚本语言。它不是为并行计算而设计的。根据您的需要，您可以更好地同时运行 CRON、消息队列或低级语言的程序。

分叉的 PHP 程序很难阅读、理解和调试。维护该程序将是一场噩梦。

不要犯错，避免分叉。你不需要它。你真正需要的是异步任务运行器。好消息，有[RabbitMQ](https://www.rabbitmq.com/)和[不错的教程](https://www.sitepoint.com/use-rabbitmq-php/);-) 您也可以尝试有前途的 RabbitMQ 库，称为[Bunny](https://github.com/jakubkulhan/bunny)

PS：使用消息队列而不是分叉为您提供了更多优势。您可以使用多台服务器处理队列，并随着流量的增长水平扩展。

编辑 2019-03-07

我玩过很多异步并发框架`amphp`，这里不得不提一下。如果您确实需要在单个请求中运行异步非阻塞任务，我认为`amphp`这是当今最好的解决方案。它使用 php 生成器 ( `$value = yield $promise`) 的概念来执行人类可读的代码，而无需类似 reactphp 的承诺地狱。

[https://amphp.org/](https://amphp.org/)

# java - 方法和 Thread.sleep() 之间的时间计算

> ID：10871297
> 
> 赞同：1
> 
> 时间：2012-06-03T14:50:26.503
> 
> 标签：java

设想：

一堆从北向南行驶的汽车（反之亦然）沿着一条两条车道行驶。过了一会儿，他们到了一座桥。这座桥只有一种方式，容量有限。一辆汽车需要 100 毫秒才能通过这座桥。不允许发生交通碰撞。

鉴于我需要计算，对于所有的汽车，

> 汽车请求进入桥梁和开始过桥之间的时间。

例如：如果一辆汽车向北行驶，到了桥上，发现桥上有向南行驶的汽车，它必须等待。需要等待多长时间？当然如果只有一辆车（桥是空的），车的等待时间=0。如果是两辆车（相反方向，桥容量=1），时间应该是：0和100ms。

根据我写的代码，一辆车的等待时间为零，但`less than 100`另一辆车的等待时间是错误的。

有什么理由吗？

在我看来，这只是获得时间之间的问题：

```
bridge.getin(direction); 
```

和

```
Thread.sleep(100); 
```

提前致谢。

这是我所指的代码的一部分：

```
public void run(){
        Random rand = new Random(); //class for random numbers

        int timeToSleep = 10 + rand.nextInt(11);
        try {
            Thread.sleep(timeToSleep); //simulate the arrival at the bridge (it's not part of the calculation)

            executionTime = System.currentTimeMillis(); //starts recording time

            // The bridge is a one way bridge (it should avoid traffic collision)

            bridge.getin(direction);        //method call (thread asks to enter the shared section)

            executionTime = System.currentTimeMillis() - executionTime; // get time spent by a thread before crossing

            Thread.sleep(100);             //simula l'attraversamento del ponte

            bridge.getout(direction);          //leaves the bridge

        } catch (InterruptedException e) {
            System.out.println("Car "+id+": interrupted!");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:06:50.487

如果第二辆车在第一辆车已经在桥上花费了 75 毫秒时来到了桥上，那么对我来说第二辆车只等待 25 毫秒似乎是合乎逻辑的。

# c++ - 有符号/无符号整数不匹配

> ID：10871300
> 
> 赞同：3
> 
> 时间：2012-06-03T14:50:46.877
> 
> 标签：c++

以下程序给出有符号/无符号不匹配警告：

```
#include <iostream>

int main()
{
unsigned int a = 2;
int b = -2;

if(a < b)
    std::cout << "a is less than b!";

return 0;
} 
```

我试图理解混合有符号和无符号整数的问题。据我所知，int 通常使用二进制补码存储在内存中。

所以，假设我有数字 2。根据我的理解，它将在内存中表示如下：

```
00000000 00000000 00000000 00000010 
```

并且 -2 将表示为一个人的恭维加 1，或者：

```
11111111 11111111 11111111 11111110 
```

有了两个的恭维，就没有像“符号和大小方法”这样的符号保留。如果没有符号位，为什么无符号整数能够存储更大的正数？混合有符号/无符号整数时可能发生的问题的示例是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T14:54:59.590

> 我试图理解混合有符号和无符号整数的问题。

`a < b`

通过通常的算术转换`b`转换为一个`unsigned int`，这是一个巨大的数字`> a`。

这里的表达式与以下`a < b`内容相同：

`2U < (unsigned int) -2`这与：

`2U < UINT_MAX - 1`（在大多数二进制补码系统中）这是`1`（真的）。

> 有了两个的恭维，就没有像“符号和大小方法”这样的符号保留。

在二进制补码表示中，如果有符号数量的最高有效位是`1`，则该数字为负数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:08:53.780

2 147 483 648 的表示形式是什么？

```
10000000 00000000 00000000 00000000 
```

-2 147 483 648 的表示形式是什么？

```
10000000 00000000 00000000 00000000 
```

相同！因此，您需要一个约定来了解差异。惯例是第一位仍然用于决定符号，只是不使用您原本会使用的朴素符号幅度方法。这意味着每个正数都以 0 开头，实际数字只剩下 31 位。这给出了无符号数的正范围的一半。

您的代码的这个问题是有符号整数将被转换为无符号整数。例如，-1 将变为 4 294 967 295（它们具有相同的二进制表示），并且将比零大得多，而不是更小。这可能不是您所期望的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:35:15.943

这不是像 (int)a < int(b) 一样简单吗？？？C++ 是不是需要强烈地进行显式类型转换？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T14:55:35.287

An`int`只能存储 2^32 个不同的值（如果是 32 位），无论是`signed`还是`unsigned`. 所以 a`signed int`有 1/2 的范围低于零，而 1/2 的范围高于零。An`unsigned int`具有高于零的整个范围。

虽然他们不将最高有效位`signed int`称为“符号位”，但可以这样处理。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-03T14:54:49.480

好吧，有符号整数的 -1 是 -1，无符号整数是 65534，所以问题在于需要“-”的有符号值。如果返回 -1 错误代码，则 unsigned int 将是 65534 代码。

# android - 在 ActionbarSherlock 下使用带有 FragmentTabsPager 的自定义类

> ID：10871302
> 
> 赞同：0
> 
> 时间：2012-06-03T14:50:53.290
> 
> 标签：android, tabs, android-viewpager, actionbarsherlock

我正在构建一个使用选项卡的活动，该选项卡也可以水平滑动。我还在使用 Actionbar Sherlock (ABS) 来实现 3.0 之前的兼容性。

[我在http://code.google.com/p/sherlock-demo/source/browse/#git%2Fsrc%2Fcom%2Fexample%2Fandroid%2Fsherlockdemo](http://code.google.com/p/sherlock-demo/source/browse/#git%2Fsrc%2Fcom%2Fexample%2Fandroid%2Fsherlockdemo)上从 Stackoverflow 用户 Sparky 那里找到了一个使用 ABS 的 FragmentTabsPager 的良好实现。

它设置了一个适配器，如下所示：

```
String[] mAccts;  // source data for the list

// populate mAccts with an array of Strings ...

setListAdapter(new ArrayAdapter<String> (getActivity(),
                R.layout.simple_list_item_checkable_1,
                android.R.id.text1, mAccts)); 
```

如果列表项是字符串，这可以正常工作，但我的列表视图项恰好有两个字符串和一个图像。因此，我尝试更改代码以使用我的自定义类，如下所示：

```
ArrayList<MyItem> mItems = new ArrayList<MyItem>();  // new source data

// populate mItems with an array of MyItems ...

setListAdapter(new MyItemAdapter(getActivity(), R.layout.my_list, mItems)); 
```

MyItemAdapter 在哪里

```
public class MyItemAdapter extends ArrayAdapter<MyItem> { ... } 
```

MyItemAdapter 还包括一个 getView() 函数，用于从 MyItem 中提取正确的字段并扩充 my_list XML。

问题：似乎上述更改应该起作用，但是在示例中调用 setListAdapter() 的类是静态声明的，并且 MyItemAdapter 调用了 getSystemService()，这不是静态的。结果是我得到一个错误：

```
Cannot make a static reference to the non-static method getSystemService(String) 
```

我尝试使调用函数非静态，但这似乎破坏了示例代码。

任何想法如何解决这一问题？我感谢任何和所有的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:12:20.923

我找到了我的问题的答案。由于调用类实际上是在一个片段内，我只需要改变

```
getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

至

```
getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

我是 Fragments 的新手，所以我想这是一个常见错误。谢谢。

# haskell - 当 MVar 被垃圾回收时杀死一个线程

> ID：10871303
> 
> 赞同：34
> 
> 时间：2012-06-03T14:51:06.337
> 
> 标签：haskell, concurrency, garbage-collection

我有一个工作线程，它从 MVar 重复读取数据并执行一些有用的工作。过了一会儿，程序的其余部分忘记了那个工作线程，这意味着它将等待一个空的 MVar 并变得非常孤独。我的问题是：

> 如果线程不再写入 MVar 是否会被垃圾回收，例如因为它们都在等待它？垃圾收集会杀死等待的线程吗？如果两者都不是，我可以以某种方式向编译器指示应该对 MVar 进行垃圾收集并杀死线程吗？

**编辑：**我可能应该澄清我的问题的目的。我不希望针对死锁提供一般保护；相反，我想做的是将工作线程的生命周期与一个值的生命周期联系起来（如：垃圾回收声称死值）。换句话说，工作线程是我不想手动释放的资源，而是当某个值（MVar 或派生值）被垃圾收集时。

这是一个示例程序，演示了我的想法

```
import Control.Concurrent
import Control.Concurrent.MVar

main = do
    something
    -- the thread forked in  something  can  be killed here
    -- because the  MVar  used for communication is no longer in scope
    etc

something = do
    v <- newEmptyMVar
    forkIO $ forever $ work =<< takeMVar v
    putMVar v "Haskell"
    putMVar v "42" 
```

换句话说，当我不能再与它通信时，我希望线程被杀死，即当用于通信的 MVar 不再在范围内时。怎么做？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-07T19:26:18.907

它只会工作：当`MVar`只有被阻塞的线程可以访问时，线程会被发送`BlockedIndefinitelyOnMVar`异常，这通常会导致它静默地死掉（线程的默认异常处理程序会忽略此异常）。

顺便说一句，为了在线程死亡时进行一些清理，你会想要使用`forkFinally`（我[刚刚添加](https://github.com/ghc/packages-base/commit/40d1be115d2a5a409e9b747c347cd909a9607c42)到`Control.Concurrent`）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-03T15:18:43.463

如果幸运的话，你会得到一个["BlockedIndefinitelyOnMVar"](http://blog.ezyang.com/2011/07/blockedindefinitelyonmvar/)，表明你正在等待一个没有线程会写入的 MVar。

但是，引用 Ed Yang 的话，

> GHC 只知道如果没有对线程的引用，则该线程可以被视为垃圾。谁持有对线程的引用？MVar，因为线程在这个数据结构上阻塞并且已经将自己添加到这个阻塞列表中。谁让 MVar 保持活力？为什么，我们的闭包包含对 takeMVar 的调用。所以线程保持不变。
> 
> 没有一点工作（顺便说一句，这会很有趣），BlockedIndefinitelyOnMVar 显然不是为您的 Haskell 程序提供死锁保护的有用机制。

GHC 通常无法解决知道您的线程是否会取得进展的问题。

更好的方法是通过向线程发送`Done`消息来显式终止线程。例如，只需将您的消息类型提升为一个可选值，该值还包括一个消息结束值：

```
import Control.Concurrent
import Control.Concurrent.MVar
import Control.Monad
import Control.Exception
import Prelude hiding (catch)

main = do
    something

    threadDelay (10 * 10^6)
    print "Still here"

something = do
    v <- newEmptyMVar
    forkIO $
        finally
            (let go = do x <- takeMVar v
                         case x of
                            Nothing -> return ()
                            Just v  -> print v >> go
             in go)
            (print "Done!")

    putMVar v $ Just "Haskell"
    putMVar v $ Just "42"

    putMVar v Nothing 
```

我们得到了正确的清理：

```
$ ./A
"Haskell"
"42"
"Done!"
"Still here" 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-06T10:50:32.990

我测试了简单的弱 MVar，它确实被最终确定并杀死了。代码是：

```
import Control.Monad
import Control.Exception
import Control.Concurrent
import Control.Concurrent.MVar
import System.Mem(performGC)
import System.Mem.Weak

dologger :: MVar String -> IO ()
dologger mv = do
  tid <- myThreadId
  weak <- mkWeakPtr mv (Just (putStrLn "X" >> killThread tid))
  logger weak

logger :: Weak (MVar String) -> IO ()
logger weak = act where
  act = do
    v <- deRefWeak weak
    case v of
      Just mv -> do
       a <- try (takeMVar mv) :: IO (Either SomeException String)
       print a
       either (\_ -> return ()) (\_ -> act) a
      Nothing -> return ()

play mv = act where
  act = do
    c <- getLine
    if c=="quit" then return ()
       else putMVar mv c >> act

doplay mv = do
  forkIO (dologger mv)
  play mv

main = do
  putStrLn "Enter a string to escape, or quit to exit"
  mv <- newEmptyMVar
  doplay mv

  putStrLn "*"
  performGC
  putStrLn "*"
  yield
  putStrLn "*"
  threadDelay (10^6)
  putStrLn "*" 
```

该计划的会议是：

```
(chrisk)-(/tmp)
(! 624)-> ghc -threaded -rtsopts --make weak2.hs 
[1 of 1] Compiling Main             ( weak2.hs, weak2.o )
Linking weak2 ...

(chrisk)-(/tmp)
(! 625)-> ./weak2 +RTS -N4 -RTS
Enter a string to escape, or quit to exit
This is a test
Right "This is a test"
Tab Tab
Right "Tab\tTab"
quit
*
*
X
*
Left thread killed
* 
```

因此，尽管有预期，但阻止 takeMVar 并*没有*使 MVar 在 ghc-7.4.1 上保持活力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T00:38:01.473

虽然`BlockedIndefinitelyOnMVar`应该可以工作，但也可以考虑使用[ForeignPointer finalizers](http://en.wikibooks.org/wiki/Haskell/FFI#Self-Deallocating_Pointers)。它们的正常作用是删除在 Haskell 中不再可访问的 C 结构。但是，您可以将任何 IO 终结器附加到它们。

# java - 如何确定另一台本地机器是否还活着？

> ID：10871306
> 
> 赞同：3
> 
> 时间：2012-06-03T14:51:47.283
> 
> 标签：java, networking

是否可以让我的本地计算机充当 Java 中的网关？我需要其他本地计算机直接连接到我的计算机以查看它们是否还活着。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T14:59:45.237

你可以在你想要的 PC 上运行一个 Java 服务器程序，让它监听一个端口。然后您可以使用其他程序（浏览器、其他 Java 程序等）连接到此端口，并发送命令由 Java 服务器程序执行。
如果您只想查看PC是否已打开，我只会使用该`ping`命令。或查看此答案：[如何从 Windows 执行真正的 Java ping？](https://stackoverflow.com/questions/2448666/how-to-do-a-true-java-ping-from-windows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:13:55.330

尝试这个。

1.  创建一个 Java 服务器套接字，它会在某个端口上持续监听客户端。

2.  用Java编写一个连接到服务器的客户端，将连接逻辑包装在try-catch块中......

3.  如果您的主机处于活动状态，则执行包含连接到服务器的代码的尝试代码，如果此连接过程失败，您将收到 UnknownHostException，您可以在此处键入连接失败的消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T04:29:18.973

确定是反过来吗？您确定要连接到其他机器以查看它们是否还活着？在这种情况下，请参阅[`InetAddress.isReachable()`](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html#isReachable%28int%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T16:00:00.473

您可以通过从中央服务器轮询其他设备来更轻松地管理和控制它。如果可能，请避免不必要的客户端/代理应用程序，这些应用程序可能会占用您的开发和支持资源以及占用客户端工作站上的 RAM。

有许多监控工具已经可以满足您的需求。例如，我会看看[Nagios](http://www.nagios.org/download)。

如果您想开发自己的应用程序，自己进行快速故障排除，或者只是想体验一下网络发现工具，那么看看[NMAP](http://nmap.org/)。例如，您可以在子网中搜索响应 TCP:445 的任何内容，并查看哪些 Windows 机器处于活动状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T04:15:33.077

如果您确实走 Nmap 路线，请查看 Sourceforge 上的 Nmap4j。它是一个 Java 包装 API，可简化集成 Java 和 Nmap 所需的工作。

干杯!

# android - 在类中实现按钮还是在 onCreate() 中实现 final 之间的区别？

> ID：10871307
> 
> 赞同：0
> 
> 时间：2012-06-03T14:52:05.043
> 
> 标签：android

所以通常在为视图制作持有人时的指南中，比如说按钮，我通常在 onCreate 方法上看到它，如下所示：

```
public class className extends Activiy{
public void onCreate(){
    final Button button = (Button) findViewById(r.something.something);
    }
} 
```

好吧，我想知道是否有任何区别，如果有的话，从那个到这个的方法更好：

```
public class className extends Activiy{
 Button button;
 public void onCreate(){
    button= (Button) findViewById();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:04:13.587

如果您以第一种方式声明它，它将仅在 onCreate() 方法中可用。

如果您以第二种方式声明它，它将在整个活动中可用。

如果不需要使用 onCreate() 之外的按钮，请使用第一种方式。

我没有看到任何其他区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:05:57.383

第一个创建方法局部变量，第二个在 Activity 类的每个实例中创建一个字段。

尽可能使用 smalles （这是最本地的）范围总是更好的。在 Android 上，内存使用使这一点变得更加重要。因此，请使用第一个解决方案（假设您不需要从代码中的多个其他位置引用该按钮）。

# objective-c - 通过应用内购买禁用 iAD

> ID：10871310
> 
> 赞同：1
> 
> 时间：2012-06-03T14:52:20.500
> 
> 标签：objective-c, ios, xcode, in-app-purchase

当用户购买应用内购买时，我想隐藏 iAD 横幅，“从超级视图中删除”广告横幅视图是否足够或者我需要更多内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:16:33.570

如果您使用`removeFromSuperview`，您还必须有一些代码在您删除广告时将内容放在那里，或者您可以已经有内容，当您删除广告时，它们会再次可见。

我认为你应该在你的 viewDidLoad 中做这样的事情：

```
if(removeiAdsPurchased){
    [iAd removeFromSuperview];
    content.hidden = NO;
} 
```

# sockets - 套接字连接的大小（网络占用空间）是多少？

> ID：10871313
> 
> 赞同：0
> 
> 时间：2012-06-03T14:53:00.250
> 
> 标签：sockets, language-agnostic, tcp

出于好奇，在建立与端口的连接（使用 Java 套接字）时实际发送了多少数据。它是 Socket 对象的大小吗？套接字连接对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T23:55:42.693

您对 TCP 网络连接的理解似乎将它们与电路混为一谈。（可以理解，鉴于你的[背景](https://stackoverflow.com/users/129867/boltimuss)。）

从物理的角度来看，没有连接之类的东西，只有数据包。通过 TCP 协议，两台设备同意建立*逻辑*（即软件）连接。客户端首先向远程主机发送数据（SYN），服务器将数据返回给客户端（SYN-ACK），客户端发送最终确认（ACK）来建立连接。 **所有这些协商必然会消耗带宽**，并且当您终止连接时，您必须协商一个全新的连接以再次开始发送数据。

例如，我将从我的机器连接到本地 Web 服务器 192.168.1.2:80。

首先，我的机器发送一个 TCP SYN。这将通过线路发送 66 个字节：（标头用 分隔`|`）

```
0000  00 24 8c a9 4c b4 00 1e  68 66 20 79 08 00|45 00   .$..L... hf y..E.
0010  00 34 53 98 40 00 80 06  00 00 c0 a8 01 0b c0 a8   .4S.@... ........
0020  01 02|36 0a 00 50 09 ef  3a a7 00 00 00 00 80 02   ..6..P.. :.......
0030  20 00 50 c8 00 00 02 04  05 b4 01 03 03 02 01 01    .P..... ........
0040  04 02                                              .. 
```

前 14 个字节是[以太网帧](http://en.wikipedia.org/wiki/Ethernet_frame)，指定此数据包的目标 MAC 地址。这通常是上游路由器，但在这种情况下，服务器恰好在同一个交换机上，所以它是机器的[MAC](http://en.wikipedia.org/wiki/MAC_address)地址，00:24:8c:a9:4c:b4。接下来是源（我的）MAC，以及有效负载类型（IP，0x0800）。接下来的 20 个字节是 IPv4 标头，然后是 32 个字节的 TCP 标头。

服务器以 62 字节的 SYN-ACK 响应：

```
0000  00 1e 68 66 20 79 00 24  8c a9 4c b4 08 00|45 00   ..hf y.$ ..L...E.
0010  00 30 69 b9 40 00 80 06  0d b1 c0 a8 01 02 c0 a8   .0i.@... ........
0020  01 0b|00 50 36 0a d3 ae  9a 73 09 ef 3a a8 70 12   ...P6... .s..:.p.
0030  20 00 f6 9d 00 00 02 04  05 b4 01 01 04 02          ....... ...... 
```

同样，14 字节的以太网报头、20 字节的 IP 报头和 28 字节的 TCP 报头。我发送一个 ACK​​：

```
0000  00 24 8c a9 4c b4 00 1e  68 66 20 79 08 00|45 00   .$..L... hf y..E.
0010  00 28 53 9a 40 00 80 06  00 00 c0 a8 01 0b c0 a8   .(S.@... ........
0020  01 02|36 0a 00 50 09 ef  3a a8 d3 ae 9a 74 50 10   ..6..P.. :....tP.
0030  fa f0 83 78 00 00                                  ...x.. 
```

14 + 20 + 20 = 54 字节通过线路（顺便说一下，这是 TCP 数据包可能的最小大小——SYN 和 SYN-ACK 数据包更大，因为它们包含选项）。

这通过线路增加了多达**182**个字节来建立连接；现在我可以开始向服务器发送实际数据了：

```
0000  00 24 8c a9 4c b4 00 1e  68 66 20 79 08 00 45|00   .$..L... hf y..E.
0010  01 9d 53 9d 40 00 80 06  00 00 c0 a8 01 0b c0 a8   ..S.@... ........
0020  01 02|36 0a 00 50 09 ef  3a a8 d3 ae 9a 74 50 18   ..6..P.. :....tP.
0030  fa f0 84 ed 00 00|47 45  54 20 2f 20 48 54 54 50   ......GE T / HTTP
0040  2f 31 2e 31 0d 0a 48 6f  73 74 3a 20 66 73 0d 0a   /1.1..Ho st: fs..
... 
```

14 以太网 + 20 IP + 20 TCP + 数据，在本例中为 HTTP。

* * *

所以我们可以看到，*建立*一个 TCP 连接需要大约 182 个字节，而终止一个 TCP 连接需要额外的 162-216 个字节（取决于是 4-way FIN ACK FIN ACK 还是更常见的 3-way FIN FIN-ACK使用 ACK 终止握手），通过断开和重新连接添加近 400 个字节来“脉冲”连接。

与通过已建立的连接发送一个字节数据的 55 个字节相比，这显然是一种浪费。

What you want to do is establish one connection and then send data as-needed. If you're *really* bandwidth constrained, you could use UDP (which requires no handshaking at all and has an overhead of only 14 Ethernet + 20 IP + 8 UDP bytes per packet), but then you face the problem of using an unreliable transport, and having to handle lost packets on your own.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T22:49:23.600

TCP 数据包的最小大小为 40 字节。创建一个连接需要三个交换的数据包，两个来自客户端，一个来自服务器，另外四个来关闭它，每个方向两个。连接交换中的最后一个数据包也可以包含数据，每个方向的关闭交换中的第一个数据包也可以包含数据，这可以稍微摊销它，正如下面@josh3736 的评论所结合的传出 FIN 和 ACK 一样。

# android - 相机活动不会返回到上一个/调用者活动

> ID：10871315
> 
> 赞同：2
> 
> 时间：2012-06-03T14:53:08.170
> 
> 标签：android, android-emulator, android-camera

我从用户那里读取了一个文本输入，这个输入我用它作为我正在用相机拍摄的照片的名称。

我将此名称和图像名称的路径存储到 Sqlite 数据库中。

我想要做的是，在单击确定接受拍摄的照片后，我希望保存的路径显示在吐司中。

问题是，当我单击确定接受图片时，什么都没有显示，我无法从相机活动切换到调用相机活动“上一个活动”的活动

注意：我使用的是模拟器而不是真实设备。

```
OnClickListener btn_TakePictureListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        String imgPath = retrievePath();
        intent.putExtra(MediaStore.EXTRA_OUTPUT, getImageUri(imgPath));
        startActivityForResult(intent, RequestCode);
    } 
};
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RequestCode && resultCode == RESULT_OK) {
       String s = data.getData().toString();
       Toast.makeText(getBaseContext(), ""+s, Toast.LENGTH_SHORT).show();
    }           
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:16:52.040

如果您正在为您的图像传递 Uri，那么您可以检索相机拍摄的图像：

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);  
    intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File(  
    Environment.getExternalStorageDirectory(), "temp.jpg")));  
    startActivityForResult(intent, 1); 
    @Override  
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (resultCode == NONE)  
            return;  

        if (requestCode == 1) {  
            // Set the file save path with directory  
            File picture = new File(Environment.getExternalStorageDirectory()  
                    + "/temp.jpg");  
            Uri imageuri= Uri.fromFile(picture);        
            //set to imageview here 
        } 
} 
```

**编辑：**

对于在 onActivityResult 中获取数据 uri，将 Camra Activiyt 启动为：

```
 Intent intent = new Intent(Intent.ACTION_PICK, null);  
 intent.setDataAndType(  
 MediaStore.Images.Media.EXTERNAL_CONTENT_URI,IMAGE_UNSPECIFIED);  
 startActivityForResult(intent, 2);     
     @Override  
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (resultCode == NONE)  
        return;  
    if (requestCode == 1) { 
        Uri uriimg = data.getData();
        Toast.makeText(getBaseContext(), ""+uriimg.toString(), Toast.LENGTH_SHORT).show();
        }
    } 
```

# django - 如何访问 Django 模板中键的值？

> ID：10871327
> 
> 赞同：2
> 
> 时间：2012-06-03T14:55:33.963
> 
> 标签：django, django-templates, django-views

新手问题：我有一个字典渲染，使用`extra_Context`views.py中定义的方法

我的看法：

```
 extra_context = {
    'comment': comment
    }
return direct_to_template(request, 'events/comment_detail.html', extra_context) 
```

如果我打印`comment`它，它会像这样打印：

```
[{'comment': u'first', 'user': 2}, {'comment': u'second', 'user': 2}] 
```

我想将此字典传递给我的模板。我尝试使用以下代码：

```
 <tbody>
            {% for obj in comment %}
                {% for key,val in obj.items %}
             <tr class="{% cycle 'odd' 'even' %}">
                <td> {{val}}</td>
            </tr>
                {% endfor %}
            {% endfor %}
       </tbody> 
```

它打印：

```
first
2
second
2 
```

我想这样：

```
first  2
second 2 
```

..等等

我应该添加什么才能像上面一样？

**更新！**

```
 def comment_detail(request, object_id):
     comment_obj = EventComment.objects.filter(event = object_id)
     comment = comment_obj.values('comment','user')
     extra_context = {
         'comment': comment
         }
     return direct_to_template(request, 'events/comment_detail.html', extra_context) 
```

comment_detail.html

```
<form action="" method="POST">
<table>
    <thead>
        <tr><th>{% trans "Comments" %}</th><th>{% trans "Timestamp "%}<th>{% trans "User" %}</th></tr>
    </thead>
    <tbody>
        {% if comments %}
    {% for com in comment %}
                <td> {{com.comment}}</enter code heretd>
                <td> {{com.user}}</td>
    {% endfor %}
    {% else %}
     <td> No comments </td>
     {% endif %}
    </tr>  
    </tbody>
</table>
 </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:43:20.890

你不需要那个嵌套的`for`迭代`k,v`。我刚试过这个：

看法：

```
def testme(request):
   comments = []
   comments.append({'user': 2, 'comment': 'cool story bro'})
   comments.append({'user': 7, 'comment': 'yep. cool story'})

   extra_context = {
      'comments': comments
   }

   return render_to_response('testapp/testme.html', extra_context ) 
```

模板：

```
{% if comments %}
   <b>Comments:</b>
   <ul>
   {% for comment in comments %}
     <li>{{ comment.comment }} (id {{ comment.user }})</li>
   {% endfor %}
   </ul>
{% else %}
   <b>No comments</b>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T06:01:38.947

“对于 k(k=key), v(v=value) in object.items”

这就是说遍历每个键值对，例如object.items 中的name = models.CharField(max_length=50)。您的视图返回了 object.items 的上下文，其中每个项目都是一个模型实例，并且有一组与之关联的 k,v 对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T15:06:14.350

看起来你的问题只是关于 html 标记。试试这个：

```
<tbody>
    {% for obj in comment %}
        <tr class="{% cycle 'odd' 'even' %}">
            {% for key,val in obj.items %}          
                <td>{{val}}</td>       
            {% endfor %}
        </tr>
    {% endfor %}
</tbody> 
```

或这个：

```
<tbody>
    {% for obj in comment %}
        <tr class="{% cycle 'odd' 'even' %}"><td>
            {% for key,val in obj.items %}          
                 {{val}}<span> </span>  
            {% endfor %}
        </td>  </tr>
    {% endfor %}
</tbody> 
```

# fluent-nhibernate - 两个类互相引用，如何在流畅的nhibernate中做Not.LazyLoad

> ID：10871332
> 
> 赞同：0
> 
> 时间：2012-06-03T14:56:03.123
> 
> 标签：fluent-nhibernate, lazy-loading

我有两节课

```
 public class ProInfo
{
    public ProInfo()
    {
        ProPrices = new List<ProPrice>();
    }
    public virtual Guid ProID { get; set; }
    public virtual string ProCate { get; set; }
    public virtual string Name { get; set; }
    public virtual string Unit { get; set; }
    public virtual string PicName { get; set; }
    public virtual string Memo { get; set; }
    public virtual bool DeleteFlag { get; set; }
    public virtual DateTime LastUpDateTime { get; set; }
    public virtual IList<ProPrice> ProPrices { get; set; }

}

 public class ProPrice
{
    public virtual int Id { get; set; }
    public virtual AreaInfo AreaInfo { get; set; }
    public virtual ProInfo ProInfo { get; set; }
    public virtual Decimal Price { get; set; }

} 
```

映射代码是：

```
 public ProInfoMap()
    {
        Id(x => x.ProID);
        Map(x => x.DeleteFlag);
        Map(x => x.Name);
        Map(x => x.PicName);
        Map(x => x.ProCate);
        Map(x => x.Unit);
        Map(x => x.LastUpDateTime);
        HasMany<ProPrice>(x => x.ProPrices);

    }

 public ProPriceMap()
   {
       Id(x => x.Id);
       Map(x => x.Price);
       References<ProInfo> (x => x.ProInfo);
       References<AreaInfo>(x => x.AreaInfo);
   } 
```

我想要的是禁用properces 的lazyload()，这样我就可以从数据库中获取产品的所有价格。但是，当我将 onetomany 更改为 this:`HasMany<ProPrice>(x => x.ProPrices).Not.LazyLoad()`时，它会导致无限循环。我想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:43:55.923

我不知道循环的确切来源，但您的双向关联可能会导致这种情况。您应该将一侧声明为 Inverse()。这只能在 ProInfoMap 中完成，因为它是具有双向关联的一对多关系：

```
HasMany<ProPrice>(x => x.ProPrices).Inverse().Not.LazyLoad(); 
```

试试看。它可能会消除无限循环。

# html - 在背景图像上使用前后伪元素

> ID：10871333
> 
> 赞同：4
> 
> 时间：2012-06-03T14:56:13.370
> 
> 标签：html, background-image, pseudo-element

我想从三个（背景）图像构建导航项，第一个和最后一个是固定宽度，中间是可变宽度，具体取决于导航项中文本的宽度。我被引导相信在前后使用伪元素是最好的方法。但是，当我尝试此操作时，导航项目的主要（中央）背景图像与之前和之后的背景图像重叠。

[您可以在此页面](http://soteriabrighton.co.uk/test2/test3.html)上看到我的意思。

**这是CSS：**

```
.box {
   background-image: url(nav/images/nav_02.png);
   background-repeat: repeat;
   height:20px;
   position: absolute;
   padding: 10px 13px;
}

.box:before {
    left: 0;
    background-image: url(nav/images/nav_01.png);
}

.box:after {
    right: 0;
    background-image: url(nav/images/nav_03.png);
}

.box:before,
.box:after {
    content: ' ';
    width: 13px;
    height:40px;
    position: absolute;
    top: 0;
    background-repeat: no-repeat
} 
```

**和 HTML：**

```
<div class="box">here is some text</div> 
```

我可以使用伪元素以这种方式使用背景图像吗？

谢谢，

缺口

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T15:23:25.657

是的，**但是**您必须使用 left 和 right 属性将伪元素移动到正确的位置。主框定位的填充不正确。更好地使用保证金。

```
.box {
    background-repeat-x: repeat;
    background-image: url(nav/images/nav_02.png);
    background-repeat: repeat;
    height: 40px;
    position: absolute;
    margin: 0 13px;
    line-height: 40px;
}

.box:before, .box:after {
    content: ' ';
    display:block;
    width: 13px;
    height: 40px;
    position: absolute;
    top: 0;
    background-repeat: no-repeat;
}

.box:before {
    left: -13px;
    background-image: url(nav/images/nav_01.png);
}

.box:after {
    right: -13px;
    background-image: url(nav/images/nav_03.png);
} 
```

# javascript - scrollTo 效果 jquery 不起作用

> ID：10871334
> 
> 赞同：0
> 
> 时间：2012-06-03T14:56:15.003
> 
> 标签：javascript, jquery, scrollto

我正在尝试让 scrollTo jquery 工作。尝试了各种教程/方法，但似乎都没有奏效。我将它用于 WP 网站，我的想法是有些 js 文件相互混淆。正在使用以下 .js：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery-ui-1.8.18.custom.min.js"></script>
<script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/my_script.js"></script>
<script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.hoverscroll.js"></script> 
<script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.scrollto-1.4.2-min.js"></script> 
```

我用它来开火：

`$(document).ready(function(){ $("#box1btn").click(function(){ $("#ommig").slideto({ slide_duration: 5000, }); }); });`

但幻灯片不是……滑动，它只是因为锚而跳跃。

```
<a id="box1btn" href="#ommig">Om Mig</a>
<div id="ommig">Title</a> 
```

来源：[http ://djpate.com/2011/01/01/animated-scrollto-effect-jquery-plugin/](http://djpate.com/2011/01/01/animated-scrollto-effect-jquery-plugin/)

注意！我也使用了 Ariel Flesler 的 scrollto，但得到了相同的结果。

有任何想法吗？提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T15:48:11.653

要抵消单击锚标记的影响，您应该使用`event.preventDefault()`.

```
$(document).ready(function(){
    $("#box1btn").click(function(event){
        event.preventDefault();  
        $('html, body').animate (
             {scrollTop: $('#ommig').offset().top}, 5000
        );        
    });
}); 
```

在这里查看它的实际效果：http: [//jsfiddle.net/mhnmt/1/](http://jsfiddle.net/mhnmt/1/)

**编辑**：改`document.documentElement`回`'html, body'`以修复 Chrome 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:04:36.910

通常我使用类似的东西：

```
var targetOffset = $('#ommig').offset().top; 
$('html,body').animate({scrollTop: targetOffset}, 5000}); 
```

此外，您可能需要返回 false；在点击事件上，否则浏览器将自行导航到目的地或简单地执行类似的操作

```
<a id="box1btn" href="javascript:;">Om Mig</a>
<div id="ommig">Title</a>

$(document).ready(function(){ 
$("#box1btn").click(function() {
    var targetOffset = $('#ommig').offset().top; 
    $('html,body').animate({scrollTop: targetOffset}, 5000});
});
}); 
```

# html - html - 按元素的顺序 - 不是按 writnig 的顺序

> ID：10871336
> 
> 赞同：1
> 
> 时间：2012-06-03T14:56:27.047
> 
> 标签：html

在下面的[提琴手](http://jsfiddle.net/FjYQH/51/)中，为什么我会在“AAAA”之前看到“BBBB”？我预计订单将根据`<tr>`.

```
<table style="text-align:left;">
  <tr>
    <td class="field">
      <label for="...">...</label> <br/>
      <myattributes>
        <tr>
          <td>
            <li>
              ...<a href="AAAA" data-confirm="Are you sure?" data-method="delete" rel="nofollow">AAAA</a>
            </li>
          </td>
        </tr>
      </myattributes>
      <label>
        <input data-autocomplete-source="..." />
        <a href="/dog">BBBB</a>
      </label>
    </td>
  </tr>
</table> 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:59:19.823

你的标记搞砸了。

嵌套`<tr>`关闭前一个表格行并添加一个新行。

通过以您结束该行，`</tr>`您当前不再位于表格行中。

当标记的元素放在表格行之间时，它们会在 DOM 中移动到表格上方。这就是您首先看到“BBBB”的方式。

# asp.net-mvc-3 - MVC 3 / 实体框架：绑定集合

> ID：10871337
> 
> 赞同：0
> 
> 时间：2012-06-03T14:56:28.950
> 
> 标签：asp.net-mvc-3, entity-framework

我有 2 个模型，员工和人员：

```
public class Employee
{ 
    [Key]
    public int Id { get; set; }
    public int? PersonId { get; set; }

    [ForeignKey("PersonId")]
    public virtual Person Person { get; set; }

}

public class Person
{ 
    public IList<PhoneNumber> PhoneNumbers { get; set; }
    public int Id { get; set; }
    public string FName { get; set; }
    public string LName { get; set; }
    public Person()
    {
        PhoneNumbers = new List<PhoneNumber>
                            {
                                new PhoneNumber()
                            };      
    }
} 
```

电话编辑器模板：

```
 @Html.TextBoxFor(x => x.Number)
         @Html.DropDownListFor(m => m, new SelectList(Enum.GetNames(typeof (WebMVC.Core.Common.PhoneType)))) 
```

为了减少混乱，我删除了其他（不相关的）属性。

我遇到的困难是在 Employee Create() 中，我可以绑定人员 FName 和 LName，我无法绑定 PhoneNumbers 集合。

我知道 2008 Haack 博客，但我不认为它反映了这种情况。

有谁知道在员工的 Create() 中绑定个人电话号码集合的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:43:27.150

我不确定 PhoneNumber 是您创建的自定义类，还是内置于框架中的类。但是，如果您在使用 MVC3 将发布的数据映射到您指定的 Employee 类时遇到问题，您可能需要考虑创建自定义绑定。请记住，如果您的编辑器模板代码不正确，这并不重要，所以我会先使用 fiddler 来看看。

这里有一些很好的网站可以帮助您入门，我曾一度在 SO 上找到它们。 [http://odetocode.com/blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx](http://odetocode.com/blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx) [http://odetocode.com/blogs/scott/archive /2009/05/05/iterating-on-an-asp-net-mvc-model-binder.aspx](http://odetocode.com/blogs/scott/archive/2009/05/05/iterating-on-an-asp-net-mvc-model-binder.aspx) [http://www.singingeels.com/Articles/Model_Binders_in_ASPNET_MVC.aspx](http://www.singingeels.com/Articles/Model_Binders_in_ASPNET_MVC.aspx)

创建自定义绑定器可以让您完全控制 MVC 解析您发布的模型数据并填充对象的方式。大多数人会覆盖 2 个主要功能，`CreateModel`以及`BindModel`. `BindModel`如果这是您想要的方式，那么您最有可能想要覆盖的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:28:08.253

我不知道编辑器模板中的 html 是什么样的，但是要绑定到自定义类型的集合，它应该看起来像这样：

```
<input name="[0].Number">
<input name="[0].PhoneType">
<input name="[1].Number">
<input name="[1].PhoneType">
<input name="[2].Number">
<input name="[2].PhoneType"> 
```

# c# - 在 COM DataReceived 事件持续触发时终止表单。C＃

> ID：10871339
> 
> 赞同：1
> 
> 时间：2012-06-03T14:57:38.137
> 
> 标签：c#, winforms, thread-safety, serial-port

我目前遇到一个问题，这似乎与关闭表单有关，而通过串行连接连接的秤不断发送数据（每 sek 大约 3 个包）。

我通过 DataReceived-Event 处理新数据（处理本身可能对这个问题没有兴趣，因为我只是匹配数据）密切关注 COM_InUse 变量和 allowFireDataReceived 检查。）：

```
 private void COMScale_DataReceived(object sender, EventArgs e)
    {
        if (allowFireDataReceived)
        {
            //set atomar state
            COM_InUse = true;

            //new scale:
            if (Properties.Settings.Default.ScaleId == 1)
            {
                strLine = COMScale.ReadTo(((char)0x2).ToString());
                //new scale:
                Regex reg = new Regex(Constants.regexScale2);
                Match m = reg.Match(strLine);
                if (m.Success)
                {
                    strGewicht = m.Groups[1].Value + m.Groups[2];
                    double dblComWeight;
                    double.TryParse(strGewicht, out dblComWeight);
                    dblScaleActiveWeight = dblComWeight / 10000;
                    //add comma separator and remove zeros
                    strGewicht = strGewicht.Substring(0, 1) + strGewicht.Substring(1, 2).TrimStart('0') + strGewicht.Substring(3);
                    strGewicht = strGewicht.Insert(strGewicht.Length - 4, ",");

                    //write to textbox
                    ThreadSafeSetActiveScaleText(strGewicht);

                    COMScale.DiscardInBuffer();
                    //MessageBox.Show(dblScaleActiveWeight.ToString(), "dblScaleActiveWeight");
                }

            }
            //free atomar state
            COM_InUse = false;
        }
    } 
```

COM_InUse 变量是一个全局布尔值，“告诉”当前是否存在处理数据的进程。allowFireDataReceived 也是一个全局布尔值，如果设置为 false，则不会对已发送的数据进行额外处理。

我现在的问题如下：

似乎 Eventhandling 是一个单独的线程，这会导致单击取消按钮时出现死锁，因为即使处理了事件，COM_InUse 也永远不会变为 false（请参阅 COMScale_DataReceived 的结尾，其中 COM_InUse 设置为 false）。虽然设置 allowFireDataReceived = false 完美工作（不再处理），正如我所说：while循环不会终止。

```
 private void bScaleCancel_Click(object sender, EventArgs e)
    {
        allowFireDataReceived = false;
        while (COM_InUse)
        {
            ;
        }
        if (!COM_InUse)
        {
            ret = 1;
            SaveClose();
        }
    } 
```

当我注释掉 while 块时，我必须在按钮上单击两次，但它可以正常工作而不会崩溃。由于这种用户非常不友好，我正在寻找一种安全关闭窗口的替代方法。

信息：简单地关闭（不检查是否处理了 COM 数据）会导致致命的崩溃。

所以，也许有人可以向我解释究竟是什么导致了这个问题，或者可以提供解决方案。（也许会再次触发 Cancel-Clicking 事件，但这很丑陋）

问候！

我全靠你了 ：）

//编辑：这是当前的代码

```
 private void ThreadSafeSetActiveScaleText(string text)
    {
        // InvokeRequired required compares the thread ID of the
        // calling thread to the thread ID of the creating thread.
        // If these threads are different, it returns true.
        if (this.lScaleActive.InvokeRequired)
        {   
            SafeActiveScaleTextCallback d = new SafeActiveScaleTextCallback(ThreadSafeSetActiveScaleText);
            this.Invoke(d, new object[] { text });
        }
        else
        {
            this.lScaleActive.Text = text;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:47:19.893

```
 ThreadSafeSetActiveScaleText(strGewicht); 
```

是的，DataReceived 事件在线程池线程上运行。你已经知道了，否则你不会称它为“ThreadSafe”。我们看不到的是这个方法里面有什么。但考虑到结果，您很可能正在使用 Control.Invoke()。

当您在 UI 线程上运行的代码中循环 COM_InUse 时，这将导致死锁。Control.Invoke() 方法只能在 UI 线程执行委托目标方法时完成。但是 UI 线程只能在空闲时执行此操作，泵送消息循环并等待 Windows 消息。并调用请求。它在 Click 事件处理程序中循环时无法执行此操作。所以 Invoke() 无法完成。这使 COM_InUse 变量永远设置为 true。这使 Click 事件处理程序永远循环。死锁城。

调用 SerialPort.Close() 方法时会出现完全相同的问题，只有在处理完所有事件后才能关闭端口。

您需要改用 Control.BeginInvoke() 来解决此问题。确保在委托目标开始执行时数据仍然有效。例如，将其作为参数传递，必要时进行复制。

在秤无情地发送数据时关闭表单通常是一个问题。当您在已处置的表单上调用时，您会遇到异常。要解决此问题，您需要实现 FormClosing 事件处理程序并将 e.Cancel 设置为 true。并取消订阅 DataReceived 事件并启动一个计时器。使间隔几秒钟。当计时器计时，您可以再次关闭表单，现在确保所有数据都已耗尽并且不会再发生调用。

另请注意，调用 DiscardInBuffer() 仅适用于随机丢失数据。

# logging - PsExec 重定向输出和命令生成的错误不起作用

> ID：10871344
> 
> 赞同：0
> 
> 时间：2012-06-03T14:58:51.723
> 
> 标签：logging, cmd, psexec, io-redirection

我有一个控制台应用程序可以做到这一点

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("out");
        Console.Error.WriteLine("err");
        Environment.ExitCode = 5;
    }
} 
```

当我在 cmd 提示符下运行时，我得到以下信息

```
C:\>C:\pstools\test\outnerr.exe >C:\pstools\test\out1.log 2>C:\pstools\test\err1.log
C:\>echo %errorlevel%
5
C:\>type C:\pstools\test\out1.log
out
C:\>type C:\pstools\test\err1.log
err
C:\> 
```

这是预期的。

现在如果我在运行窗口中运行它

```
cmd /c C:\pstools\test\outnerr.exe >C:\pstools\test\out2.log 2>C:\pstools\test\err2.log 
```

这也有效并创建 out2.log 和 err2.log。

现在，如果我使用 psexec 运行相同。我想创建一个日志文件。它是在本地机器还是远程机器上创建都没有关系。所以我运行这个命令

```
C:\pstools\test\psexec.exe \\127.0.0.1 cmd /c C:\pstools\test\outnerr.exe >C:\pstools\test\out3.log 2>C:\pstools\test\err3.log 
```

从运行窗口执行时，这不会创建日志文件。但如果从命令提示符运行，同样有效。

**我需要在上面进行什么更改以使其从 Run Window 创建日志文件？**

PS 我在这里和互联网上阅读了很多关于 PsExec 重定向问题的线程。我知道 PsExec 操纵流以使远程操作具有交互性这一事实。也许这就是这个简单的事情不起作用的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:15:48.600

尝试使用 xCmd.exe，它是 psexec 的替代品，它将远程输出重定向到运行代码的本地控制台。我曾尝试过将 JAVA + PSEXEC 混合使用非常糟糕的组合。但是使用 xcmd.exe 得到了很好的结果，但一个问题是它在 32 位操作系统 uptil win 2k8 上运行良好。从win7开始，这并不好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T04:07:11.923

您可以使用**-lo**选项将 PSExec 输出写入文件

**概要：**

```
psexec \\<machine_ip_address> -u <username> -p <password> -lo <log_filename> <some_command> 
```

**例子：**

```
psexec \\192.10.10.69 -u admin -p 12345 -lo paexec.log ipconfig 
```

# objective-c - 切换 CCAnimations 时的 EXC_BAD_ACCESS

> ID：10871345
> 
> 赞同：0
> 
> 时间：2012-06-03T14:59:09.337
> 
> 标签：objective-c, cocos2d-iphone, exc-bad-access

我是`CCAnimations`cocos2D 的新手，遇到了一个很难解决的问题。

我正在制作一个基本的平台游戏，玩家精灵有各种动画需要根据玩家的状态运行。

我的图层`init`方法中有以下代码：

```
sprite = [CCSprite spriteWithSpriteFrameName:@"stand.png"];

standingSprites = [NSArray arrayWithObjects:
                   [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"stand.png"],
                   nil];
runningSprites = [NSArray arrayWithObjects:
                   [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"run1.png"],
                   [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"run2.png"],
                   nil];

standingAnimation = [CCAnimation animationWithFrames:standingSprites delay:0.2f];
runningAnimation = [CCAnimation animationWithFrames:runningSprites delay:0.2f];
animationAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:standingAnimation]];
[sprite runAction:animationAction]; 
```

这与两个动画中的任何一个都可以正常工作。但是，我想`standingAnimation`在播放器静止和`runningAnimation`播放器运行时运行。我试图这样做如下：

```
-(void)walk {

    if(!isWalking) {
        isWalking = true;
        [sprite stopAction:animationAction];
        animationAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:runningAnimation]];
        [sprite runAction:animationAction];
    }
} 
```

倒数第二行使程序崩溃，导致`EXC_BAD_ACCESS`（在引用时`0x0`）。在调试器中单步`walk`执行，似乎没有任何相关指针为空。

从堆栈跟踪：

```
2012-06-03 10:59:59.907 ThirtyMinutes[9876:6403] *** Terminating app 
due to uncaught exception 'NSInvalidArgumentException', reason: 
'-[NSCTFontDescriptor frames]: unrecognized selector sent to instance 
0x7f808d93e9f0' 
```

`0x7f808d93e9f0`是 的地址`runningAnimation`。

1.  我究竟做错了什么？
2.  有没有更好的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:28:40.743

错误消息告诉您，在发生错误时，0x7f808d93e9f0 是 NSCTFontDescriptor 对象的地址。可能的原因是您没有保留`runningAnimation`并且它的内存已被回收用于不同的对象。

（显示`runningAnimation`如果它不明显是如何发生的声明。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:44:03.810

每次要使用它们时都必须重新创建动作。在您的情况下，您尝试在操作被释放后使用它。

# android - Android AndEngine LeadBolt 集成

> ID：10871349
> 
> 赞同：0
> 
> 时间：2012-06-03T14:59:32.367
> 
> 标签：android, notifications, andengine, ads, leadbolt

我刚刚完成了我的 android 应用程序，我想尝试 LeadBolt 广告。

导联信息： ![在此处输入图像描述](../Images/75e22c5c0b9d55736589712e4b83bc84.png)

Java代码：

```
 @Override
public void onLoadComplete() {
    // TODO Auto-generated method stub
    myController = new AdController(this, "169901169");
    myController.loadAd();

} 
```

未显示 LeadBolt 通知。为什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:41:30.127

通知需要更多操作。首先，更改 Manifest，然后按照 LeadBolt 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:13:27.140

您正在运行通知，但在您的代码中有以下几行： myController = new AdController(this, "169901169"); myController.loadAd();

请将它们更改为（如 PDF 文档中所述）： myController = new AdController(getApplicationContext(), "169901169"); myController.loadNotification();

然后通知广告应该可以正常工作。

# types - 将两种数据类型存储在一个更大的数据类型中

> ID：10871350
> 
> 赞同：0
> 
> 时间：2012-06-03T14:59:35.953
> 
> 标签：types, arm, framebuffer

对该问题进行了一些介绍，在
发布此问题之前，我尝试在 google/stack 上搜索此问题，但其中大多数都不清楚。
我有一个基于 cortex-a8 的板，我在其上运行裸机 RTOS，显示（帧缓冲区）有点慢，因为我现在还没有为我的目标实现 DMA，但并不是那么慢，但是我注意到一个改进的机会。在我的 CPU 和工具链组合中，32 位数学，数据访问比 16 位访问快，显示是 16 位 rgb565，所以一些帧缓冲操作比它们本来可以的慢一点（其中一些使用 memcpy，memmove和 memset 负责数据对齐等。）

我试图将两个像素塞进一个 32 位数据类型并使用它来访问内存（据我记得对齐，即使没有，我的 cpu 支持硬件中的非对齐内存访问，所以问题不应该是这个。）请注意，我不是在谈论我的实现速度，而是我得到的一个奇怪的效果，我怀疑这是因为我如何将两个像素塞进一个 32 位数据类型。

这是我的 fb_putc 的大部分内容

```
if (((unsigned char)c > 32) && ((unsigned char) c < 127)) {
    check_for_scroll(49);

    // fontdata starts from ASCII 33 shifted by logarithm(base2, font_height)
    c -= 33;
    c <<= 4;

    uint16_t pallete_16[2] = {fb.fg_color, fb.tg_color};

    uint32_t y;
    uint32_t *pixel_32;
    uint32_t fb_shifter;
    uint32_t pixel_32_holder;
    uint32_t fb_bg_32 = ((pallete_16[1] << 16) | (pallete_16[1]));
    /*
     * Each pixel is 16 bits, we access them using 32 bit data type,
     * which is faster for aligned memory access. Also many architectures
     * have free bit shifts with each instruction so we use that too.
     */
    pixel_32 = (uint32_t *) fb.config->base;
    pixel_32 += ( ((fb.cursor.y * (FONT_HEIGHT * fb.config->width)) + ((fb.cursor.x * (FONT_WIDTH))))
                    / ((sizeof(uint32_t))/(sizeof(uint16_t))) );
    for (y = 0; y < 16; y++) {
        for ( unsigned x = 7; x >= 0; x -= 2 )
        {
            if (fontdata[c + y] & (1 << x)) {   
                pixel_32_holder = (pallete_16[0] << 16);
            } else {
                pixel_32_holder = (pallete_16[1] << 16);
            }
            if (fontdata[c + y] & (1 << (x -1))) {
                pixel_32_holder |= (pallete_16[0] & 0xffff);
            } else {
                pixel_32_holder |= (pallete_16[1] & 0xffff);
            }
            *pixel_32++ = pixel_32_holder;
        }
        // Panel stride = width (480) - font_width (8)
        pixel_32 += (472 / ((sizeof(uint32_t))/(sizeof(uint16_t))));
    }

    fb.cursor.x++;
} 
```

关于我哪里出错的任何帮助？我对编程有点陌生，并且将其作为爱好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:39:59.883

在将它们写入内存之前组合 2 个像素的想法是正确的。这样一来，ARM 的写缓冲区硬件将被更有效地使用，代码运行得更快。我认为以这种形式混合 C 和 ASM 不会产生最好的结果。坚持使用纯 ASM 将保证您使用有条件执行的指令。此外，为您的调色板使用数组可能会导致编译器输出非常低效的代码。这是一种在纯 ASM 中更有效地执行此操作的方法。展开循环是个好主意。这是处理双色调字体数据的每个字节的代码。

```
@ Register usage
@ R0 = source data pointer
@ R1 = destination data pointer
@ R2 = foreground color (loaded outside of loop)
@ R3 = background color (loaded outside of loop)
@ R4,R5 = temp registers
@ Assumes that the most significant short of each 32-bit word is on the left

  ldrb r4,[r0],#1  @ source bitonal image data
@ first pair of pixels
  tst r4,#0x80
  movne r5,r5,r2,LSL #16
  moveq r5,r5,r3,LSL #16
  tst r4,#0x40
  orrne r5,r5,r2
  orreq r5,r5,r3
  str r5,[r1],#4
@ second pair of pixels
  tst r4,#0x20
  movne r5,r5,r2,LSL #16
  moveq r5,r5,r3,LSL #16
  tst r4,#0x10
  orrne r5,r5,r2
  orreq r5,r5,r3
  str r5,[r1],#4
@ third pair of pixels
  tst r4,#0x8
  movne r5,r5,r2,LSL #16
  moveq r5,r5,r3,LSL #16
  tst r4,#0x4
  orrne r5,r5,r2
  orreq r5,r5,r3
  str r5,[r1],#4
@ fourth pair of pixels
  tst r4,#0x2
  movne r5,r5,r2,LSL #16
  moveq r5,r5,r3,LSL #16
  tst r4,#0x1
  orrne r5,r5,r2
  orreq r5,r5,r3
  str r5,[r1],#4 
```

**更新**稍微简单的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:08:52.253

在过去几个小时编译器吃掉我的脑袋之后，我已经通过使用 asm 修复了一次存储两个像素的问题，但现在似乎还有其他问题，因为字符出现乱码，除了少数几个，我不确定是什么世界上正在导致这种情况......

至于打包像素，这是我最终使用的（以防将来有人可能需要这样做）

```
if (((unsigned char)c > 32) && ((unsigned char) c < 127)) {

    check_for_scroll(FB_MAX_Y_UNDER);

    uint32_t pixel_32_tmp;
    uint16_t pallete[2] = { (fb.fg_color), (fb.tg_color)};
    uint32_t *pixel_32 = (uint32_t *)fb.base +((((fb.cursor.y << 13)-(fb.cursor.y << 9))+(fb.cursor.x << 3)) >> 1);

    c -= 32;
    c <<= 4;

    for (int y = 0; y < 16; y++) {
        unsigned char font_bits = fontdata[c + y];

        if (font_bits & 0x80) {
            __asm__ volatile("mov %0, %1, lsl $16" : "=r" (pixel_32_tmp) : "r" (pallete[0]));
        } else {
            __asm__ volatile("mov %0, %1, lsl $16" : "=r" (pixel_32_tmp) : "r" (pallete[1]));
        }
        if (font_bits & 0x40) {
            __asm__ volatile("orr %0, %0, %1" : "=r" (pixel_32_tmp) : "r" (pallete[0]));
        } else {
            __asm__ volatile("orr %0, %0, %1" : "=r" (pixel_32_tmp) : "r" (pallete[1]));
        }
        *pixel_32++ = pixel_32_tmp;

        if (font_bits & 0x20) {
            __asm__ volatile("mov %0, %1, lsl $16" : "=r" (pixel_32_tmp) : "r" (pallete[0]));
        } else {
            __asm__ volatile("mov %0, %1, lsl $16" : "=r" (pixel_32_tmp) : "r" (pallete[1]));
        }
        if (font_bits & 0x10) {
            __asm__ volatile("orr %0, %0, %1" : "=r" (pixel_32_tmp) : "r" (pallete[0]));
        } else {
            __asm__ volatile("orr %0, %0, %1" : "=r" (pixel_32_tmp) : "r" (pallete[1]));
        }
        *pixel_32++ = pixel_32_tmp;

        if (font_bits & 0x08) {
            __asm__ volatile("mov %0, %1, lsl $16" : "=r" (pixel_32_tmp) : "r" (pallete[0]));
        } else {
            __asm__ volatile("mov %0, %1, lsl $16" : "=r" (pixel_32_tmp) : "r" (pallete[1]));
        }
        if (font_bits & 0x04) {
            __asm__ volatile("orr %0, %0, %1" : "=r" (pixel_32_tmp) : "r" (pallete[0]));
        } else {
            __asm__ volatile("orr %0, %0, %1" : "=r" (pixel_32_tmp) : "r" (pallete[1]));
        }
        *pixel_32++ = pixel_32_tmp;

        if (font_bits & 0x02) {
            __asm__ volatile("mov %0, %1, lsl $16" : "=r" (pixel_32_tmp) : "r" (pallete[0]));
        } else {
            __asm__ volatile("mov %0, %1, lsl $16" : "=r" (pixel_32_tmp) : "r" (pallete[1]));
        }
        if (font_bits & 0x01) {
            __asm__ volatile("orr %0, %0, %1" : "=r" (pixel_32_tmp) : "r" (pallete[0]));
        } else {
            __asm__ volatile("orr %0, %0, %1" : "=r" (pixel_32_tmp) : "r" (pallete[1]));
        }
        *pixel_32++ = pixel_32_tmp;

        pixel_32 += 236;
    }
    fb.cursor.x++;
} 
```

# c# - 如何修复 StackOverflowException？

> ID：10871353
> 
> 赞同：-2
> 
> 时间：2012-06-03T14:59:46.623
> 
> 标签：c#, stack-overflow, unhandled

我`StackOverflowException`在我的 C# 程序中得到了一个。

**Cmodel.cs**

```
public class CModel
{
    public Vector3 Position { get; set; }

    public Vector3 Rotation { get; set; }

    public Vector3 Scale { get; set; }

    public Model Model { get; private set; }

    public BoundingSphere BoundingSphere
    {
        get
        {
            // no need for rotation, as this is a sphere
            Matrix worldTransform = Matrix.CreateScale(Scale) *
            Matrix.CreateTranslation(Position); // THIS IS WHERE THE EXCEPTION OCCURS

            BoundingSphere transformed = BoundingSphere;
            transformed = transformed.Transform(worldTransform);

            return transformed;
        }
    }
    private Matrix[] modelTransforms;
    private GraphicsDevice graphicsDevice;
    private BoundingSphere boundingsphere;
    public CModel(Model Model, Vector3 Position, Vector3 Rotation,
    Vector3 Scale, GraphicsDevice graphicsDevice)
    {
    this.Model = Model;

    modelTransforms = new Matrix[Model.Bones.Count];
    Model.CopyAbsoluteBoneTransformsTo(modelTransforms);

    buildBoundingSphere();
    }

    public void Draw(Matrix View, Matrix Projection)
    {
        // Calculate the base transformation by combining
        // translation, rotation, and scaling
        Matrix baseWorld = Matrix.CreateScale(Scale)
        * Matrix.CreateFromYawPitchRoll(
        Rotation.Y, Rotation.X, Rotation.Z)
        * Matrix.CreateTranslation(Position);
        foreach (ModelMesh mesh in Model.Meshes)
        {
            Matrix localWorld = modelTransforms[mesh.ParentBone.Index]
            * baseWorld;
            foreach (ModelMeshPart meshPart in mesh.MeshParts)
            {
                BasicEffect effect = (BasicEffect)meshPart.Effect;
                effect.World = localWorld;
                effect.View = View;
                effect.Projection = Projection;
                effect.EnableDefaultLighting();
            }
            mesh.Draw();
        }
    }
        private void buildBoundingSphere()
        {
            BoundingSphere sphere = new BoundingSphere(Vector3.Zero, 0);

            // Merge all the model's built in bounding spheres
            foreach (ModelMesh mesh in Model.Meshes)
            {
                BoundingSphere transformed = mesh.BoundingSphere.Transform(
                    modelTransforms[mesh.ParentBone.Index]);

                sphere = BoundingSphere.CreateMerged(sphere, transformed);
            }

            this.boundingsphere = sphere;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T15:00:51.797

您的 getter 中有一个递归调用，它将调用自身并导致`StackOverflowException`：

```
public BoundingSphere BoundingSphere
{
    get
    {
       ...
       BoundingSphere transformed = BoundingSphere;
       ...
    }
} 
```

尚不完全清楚您要写*什么*- 但如果您想保留任何状态，您将需要一个支持字段来存储边界球体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:05:10.487

您的 get 方法调用自身：`BoundingSphere`调用`BoundingSphere`.

```
private BoundingSphere _boundingsphere = null;
public BoundingSphere BoundingSphere
{
    get
    {
        // no need for rotation, as this is a sphere
        **Matrix worldTransform = Matrix.CreateScale(Scale)
            * Matrix.CreateTranslation(Position);**

        BoundingSphere transformed = _boundingsphere;
        transformed = transformed.Transform(worldTransform);

        return transformed;
    }
    set
    {
        _boundingsphere = value;
    }
} 
```

当您使用以下表格时：

```
public BoundingSphere BoundingSphere { get; set } 
```

您不需要指定变量来存储实际值，但是当您显式实现 get 或 set 时，您应该声明附加变量并在 get、set 实现中使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T19:06:19.590

我认为你需要改变

```
get 
{ 
    ...
    BoundingSphere transformed = BoundingSphere; // public property
    ...
} 
```

对此

```
get 
{ 
    ...
    BoundingSphere transformed = boundingsphere; // private variable
    ...
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-03T15:03:35.433

1.  查看调用堆栈或异常的堆栈跟踪。
2.  识别回路。
3.  弄清楚如何打破循环。

# php - 代码点火器中的 url 映射

> ID：10871363
> 
> 赞同：0
> 
> 时间：2012-06-03T15:01:10.803
> 
> 标签：php, javascript, jquery, json, codeigniter

我正在使用 codeigniter 框架编写一个 PHP 应用程序。我正在尝试添加一个工具来将页面中的数据下载为 .csv 格式文件。我有服务器端的代码，但我在处理“下载”控制器的 URL 映射时遇到了问题。在 /controllers/ 我有一个名为“Download”的控制器，它有一个名为“exportCSV”的函数，它接收一个 json 对象，该对象被解码并用于创建文件。所以，我试图通过“post”向该方法发送一个 JavaScript 数组，但我在处理 URL 映射时遇到了问题。这是我的javascript调用...

```
function download(){

$.post('index.php/download/exportCSV', {input : dataForDownload.toString()},

              function(answer){
                  alert(answer);
            }
       );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:46:19.713

发布到`index.php/download/exportcsv`. CI 不太喜欢混合大小写控制器。

如果你有一个下载控制器，它应该是这样的：

类下载扩展 CI_Controller { function _construct *() { parent::* _construct(); }

```
function exportcsv()
{
    if($this->input->post())
    {
        // Something was POSTed, continue

        // process input

    } else {
        // Catch error if no POST
    }
} 
```

}

如果您收到 404，则您的应用程序可能未正确设置。检查`routes.php`和你的`base_url`.

我还推荐 CodeIgniter 用户指南。它充满了很好的信息：

*   [http://codeigniter.com/user_guide/overview/appflow.html](http://codeigniter.com/user_guide/overview/appflow.html)
*   [http://codeigniter.com/user_guide/overview/mvc.html](http://codeigniter.com/user_guide/overview/mvc.html)

# charts - microsoft chart 控件找不到资源

> ID：10871364
> 
> 赞同：-2
> 
> 时间：2012-06-03T15:01:15.757
> 
> 标签：charts, .net-4.0, controls

安装了 .net 框架 4.0 的共享主机上的 Microsoft 图表控件。“没有找到您要查的资源。” 在本地它工作得很好。我确认 dll 在服务器上。我尝试更改 web.config 和 ImageLocation 参数中的所有设置。没运气。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:20:02.690

要解决此问题，请首先确保图表程序集已安装在 GAC 中。

然后尝试使用 server/yoursite/chartimg.axd?i=0.png&g=0 从浏览器访问服务器（使用这些确切的参数）。如果您收到“找不到资源”，则说明处理程序未正确安装：在您的 web.config 中查找问题并重试，直到您收到“System.ArgumentException：找不到图像”。这意味着处理程序已正确安装并按预期工作。

然后渲染包含图表控件的页面，其中 Chart.ImageStorageMode = UseHttpHandler。如果您遇到异常，请在此处发布异常堆栈以及您的主要控件布局，例如：“图表放置在更新面板中，该面板放置在用户控件中，而用户控件则放置在页面的更新面板中”。

# c# - 将自定义系统光标重置为正常

> ID：10871365
> 
> 赞同：6
> 
> 时间：2012-06-03T15:01:23.347
> 
> 标签：c#, .net, windows, visual-c++

我使用 SetSystemCursor 更改系统光标，但是当我尝试使用 DestroyCursor 将系统光标重置为正常时，没有任何反应！

有任何想法吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-24T13:32:40.883

或者，您可以将系统光标恢复为默认值，如下所示：

```
SystemParametersInfo(SPI_SETCURSORS, 0, NULL, 0); 
```

其中`SPI_SETCURSORS`定义为，如此[处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx)`0x0057`所述

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T15:29:40.713

如文档所述， SetSystemCursor() 函数已经销毁了传递的游标，因此再次销毁它不会产生任何影响。

您需要存储旧光标的副本，以便以后恢复它：

```
// Global Variables:
HCURSOR hOldCursor;
...
   hOldCursor = CopyCursor(LoadCursor(NULL, MAKEINTRESOURCE(IDC_ARROW)));
   HCURSOR hNewCursor = CopyCursor(LoadCursor(hInstance, MAKEINTRESOURCE(IDC_MYCURSOR)));
   SetSystemCursor(hNewCursor, OCR_NORMAL); 
```

并像这样恢复它：

```
SetSystemCursor(hOldCursor, OCR_NORMAL);
DestroyCursor(hOldCursor);
hOldCursor = NULL; 
```

请注意，当您的程序终止而不恢复光标时，您会造成相当大的痛苦。根据我测试此代码的经验。更改系统光标非常不友好，因为它会对桌面上运行的所有其他程序产生全局影响。

# magento - 使用 Magento 时出现“列名重复”错误

> ID：10871368
> 
> 赞同：0
> 
> 时间：2012-06-03T15:01:38.287
> 
> 标签：magento

当我上传我在 Magento 上的电子表格时，我一直收到错误消息，我真的不确定出了什么问题。如果您想看一下电子表格，我很乐意将其重新启动，但我真的不知道。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-03T15:27:03.927

寻找类似的东西

```
Select A.*,B.*
inner join A.ID = B.ID 
```

所以你在输出中得到两个 ID 列

需要使它像

```
Select A.ID as AID, B.ID as BID
inner join A.ID = B.ID 
```

# javascript - 如何处理backbone.js中的关系

> ID：10871369
> 
> 赞同：11
> 
> 时间：2012-06-03T15:01:42.513
> 
> 标签：javascript, rest, backbone.js, backbone-relational

我对如何设计与我的模型关系相关的backbone.js 应用程序感到困惑。

如果我有一个事件模型，它有几个关系，比如说一个用户模型可以有很多事件，而事件模型又可以有很多评论和参与。一个用户可以有很多评论，参与可以有一个用户和一个事件。哇，好乱啊！

```
Event has many Comments
Event has many Participations
Event has one User

User has many Events
User has many Participations
User has many Comments

Comment has one Event
Comment has one User

Participation has one User
Participation has one Event 
```

好的，所以我的想法是在用户加载页面时加载事件列表，当用户单击事件时加载有关该事件的其余信息（评论、参与和用户）。

所以问题是，我是否应该使用某种全局变量来保存所有事件、用户等，当我从服务器获取信息时将其放在那里（并在我从服务器获取某些东西之前检查那里），也许在某些某种本地存储（以及如何使用骨干关系来做到这一点？）。

我的另一个想法是让每个事件都有自己独立的数据，这样做的问题是我可能会在每次点击事件时发送冗余数据。

你推荐什么方法？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-04T01:29:59.097

就像@mu_is_too_short 评论的那样，骨干关系可能是您有兴趣研究的东​​西。使用[Backbone-relational](https://github.com/PaulUithol/Backbone-relational)，您的模型和子模型集合会自动创建，并且可以跨父子关系管理事件。

我只是给你一些示例代码，这样你就可以体验它了。您的部分示例代码可能看起来像这样。

用户有很多事件：

```
User = Backbone.RelationalModel.extend({
    relations: [
        type: Backbone.HasMany,   // Type of relationship
        key: 'events',            // How we reference the sub-models in collection
        relatedModel: 'Event',    // The sub-model type
        collectionType: 'EventCollection',  // The sub-model collection
        reverseRelation: {
            key: 'belongsToUser'            // Key we use to refer to the parent
        }
    ],
    // Other Backbone.Model properties and functions
}); 
```

当您创建主干关系模型时，它会自动为您创建以您指定的“键”命名的子模型集合。因此，您拥有的每个用户都将拥有自己整理的相关事件集合。

基本上，当你创建或获取用户时，你给它提供了它需要的相关模型的引用。例如，您的用户 id=1 可能需要事件 5、7 和 11。（我只是使用 ID）。只要这些引用以数组形式定义，那么您就可以使用 Relational 的 fetchRelated 方法延迟加载它们。

```
myUser = new User();
myUser.set({
    name: 'RayMysterio',
    age: '26',
    events: [5, 7, 11]    // Or this might just come with the User object from your server
});

myUser.fetchRelated('events');
// This will go fetch the related events for this user model from the URL you designate.

myUser.get('events');
// The collection of events are treated like an attribute of the User model.

myUser.get('events').find(function(eventModel){
    return // some find condition - or whatever you want to do on that collection
}); 
```

您可能希望将某些侦听器绑定到子模型。

```
myUser.bind('add:events', function(model, collection) {
    // Whatever code you want to happen when new models are added to the user events coll
}); 
```

等等等等。

这是产生一对一、一对多和反向关系的好方法。这很关键。当您定义模型之间的关系并创建模型时。

例如，您创建一个用户模型的新实例。

骨干关系自动创建反向链接（事件模型具有由反向关系键“belongsToUser”（或您命名的任何名称）定义的属性。这使得上下遍历模型/子模型层次结构非常方便。

根据您的关系需求，这似乎很合适。

如果你想要多对多，有一种迂回的方法（使用中间模型），但我发现这有点不稳定，我避免了它。Paul-Uithol 已经更新 Backbone-Relational 已有一段时间了，并且不断添加新功能。起初学习曲线对我来说有点困难，但一旦你开始习惯它就会非常方便。

注意：为了强调一点，Mosselman 推荐了 Require.js，我也非常同意这一点。它使我的代码更易于管理。您可以修改（包装）Backbone 关系代码以使其符合 AMD 标准，并且可以与 Require 完美配合。

更新：骨干关系现在支持 require.js，从 2014 年 4 月 1 日的 0.8.8 版开始 - 感谢 Kenneth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:43:09.157

理论上，您可以加载所有单独的集合，然后在进行渲染时对集合使用本地过滤来获取相关模型。

当然，您必须考虑安全问题。

我不是很清楚，至少对我来说，从你的问题中你将如何处理你获取的信息，但我会尽力回答。

我的假设是您有某种带有一些额外数据的事件，您需要显示与此相关的信息。然后你还需要能够做一些事情，比如添加评论等。

正如我所说，您可以考虑执行以下操作：

```
var Events = Backbone.Collection.extend({
    url: '/events', // You might want to let the app return only an account's events or something, not just ALL events.
    initialize: function(){
        this.fetch();
    }
});

var Comments = Backbone.Collection.extend({
    url: '/comments',
    initialize: function(){
        _.bindAll(this, 'getEventComments');
        this.fetch();
    },

    getEventComments: function(event_id){
        return _.filter(this.models, function(model){ return model.get('event_id') == event_id; });
    }
});
//etc 
```

通过使用 underscore 的过滤功能，您可以在每次需要时（例如渲染时）非常快速地获取相关模型。

在某种程度上，这与您在服务器端脚本中执行的操作相同。某些数据库包含所有带有记录的表，就像您的集合在这里所做的那样，您的代码只是根据一些输入向数据库询问相关的表。

最后，我将始终将 Require.js 与 Backbone 结合起来向人们指出。无耻参考我今天给出的一个答案，看看，无论如何都会让生活更轻松： [Backbone Design](https://stackoverflow.com/questions/8381170/backbone-design/10871794#10871794)

# java - CTabFolder 选择上的焦点事件

> ID：10871373
> 
> 赞同：1
> 
> 时间：2012-06-03T15:02:44.960
> 
> 标签：java, eclipse, swt

我正在尝试使用`CTabFolder`. 这`CTabFolder`包含多个`CTabItem`，每个都`CTabItem`包含其中的 treeviewer。我的要求是当我选择一个特定的时，默认情况下应该选择`CTabItem`这个选中的 treeviewer 的第一个节点。`CTabFolder`任何人都可以请帮忙。谢谢，托

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T13:05:50.117

首先，在`SelectionListener`您的`CTabFolder`.

在侦听器的`widgetSelected`方法上，您可以使用接收到的参数的属性访问`CTabItem`所选内容。`item`

# c++ - 无法使用 MongoDB C++ 驱动程序编译项目

> ID：10871375
> 
> 赞同：0
> 
> 时间：2012-06-03T15:03:10.763
> 
> 标签：c++, qt, mongodb, compilation, database-connection

我已经从以下 URL 下载了 C++ MongoDB 驱动程序的源代码：http: [//dl.mongodb.org/dl/cxx-driver](http://dl.mongodb.org/dl/cxx-driver)并在 Windows 上将其编译为“mongoclient.lib”（在 Scons 脚本中进行了一些更改）。

我在编译期间需要的是以下路径：

*   包含来自 Visual Studio 的文件（此处为 2010）
*   包含来自“Microsoft Windows SDK for Windows 7 and .NET Framework 4”的文件 - 从 MS 站点下载为 ISO 映像
*   Boost 库（我用的是 1.47）

现在我想在 Qt 控制台应用程序中使用该库，但我得到的只是成千上万的错误（其中大多数看起来像我使用了错误的平台 SDK）。我已将这些编译错误上传到 pastebin： http: [//pastebin.com/cUnKYdGg](http://pastebin.com/cUnKYdGg)

问题很简单：为了让项目编译没有错误，我缺少什么？是否应该使用其他平台 SDK？或者项目中的某些路径设置不正确？

我的 .pro 文件如下所示：

```
#-------------------------------------------------
#
# Project created by QtCreator 2012-06-01T21:20:08
#
#-------------------------------------------------

QT       += core

QT       -= gui

TARGET = QtConsoleApp
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

INCLUDEPATH += "e:/Program Files/boost/boost_1_47/"
INCLUDEPATH += "d:/Program Files/Microsoft SDKs/Windows/v7.1/Include/"
INCLUDEPATH += "d:/Program Files/Microsoft Visual Studio 10.0/VC/include/"
INCLUDEPATH += "e:/temp/proj/QtConsoleApp/libs/src/mongo/"
INCLUDEPATH += "e:/temp/proj/QtConsoleApp/libs/src/"
INCLUDEPATH += "e:/Program Files/boost/boost_1_47/lib/"
LIBS += -L"e:/temp/proj/QtConsoleApp/libs/" -lmongoclient

SOURCES += main.cpp 
```

# java - 创建java库文件

> ID：10871378
> 
> 赞同：5
> 
> 时间：2012-06-03T15:03:36.247
> 
> 标签：java, jar, jdeveloper, oracle-adf

我正在使用不同 ADF 项目中常见的 java 文件数量，我想将它们存档在 jar 文件中，以便我可以从任何新项目导入此存档文件以使用项目中的 java 库，我尝试在 jdeveloper 中创建它但是没运气。

谢谢你的任何建议，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T15:08:38.727

您可以使用以下文章来了解方法。

[创建一个 jar 文件](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)

```
jar cf jar-file input-file(s) 
```

但是您仍然可以使用 windows zip 实用程序或 winzip 压缩文件并将其重命名为 jar 文件。它不是官方的，但它有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T15:11:17.747

无论您的项目有多大或多小，恕我直言，这个问题的最佳答案是构建工具。我会推荐maven，它是一个很棒的工具。这需要一些时间才能进入，一开始可能会减慢你的步伐，但知道如何使用这样的工具的回报是非常大的。

[http://maven.apache.org/](http://maven.apache.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T15:07:31.643

从您的终端 - 转到您拥有要 jar 的文件的目录并输入命令

> jar -cf myjarfile.jar *.java

希望这也有助于查看： [创建 JAR 文件](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T22:06:04.963

假设您要重用的文件与 ADF 相关，您应该阅读有关使用 ADF 库提高可重用性的信息。请参阅：[http ://docs.oracle.com/cd/E16162_01/web.1112/e16182/reusing_components.htm#BEIGHHCG](http://docs.oracle.com/cd/E16162_01/web.1112/e16182/reusing_components.htm#BEIGHHCG)

# google-app-engine - 在文件夹中附加没有尾随 / 的 HTML 服务

> ID：10871379
> 
> 赞同：0
> 
> 时间：2012-06-03T15:03:38.913
> 
> 标签：google-app-engine

我似乎在任何地方都找不到这个。

我拥有的是一个只提供 html 页面的 appengine 项目。但它仅在文件名“完全”正确时才能正确加载文件。

即**mywebsite.com/lastproject/ 加载完美**

但**mywebsite.com/lastproject 根本不加载**

我希望网站在尾随 / 被遗漏时正确加载。我错过了什么？？？

这是我的 app.yaml

```
application: websitewithsubfolder
version: 1
runtime: python
api_version: 1

handlers:

- url: (.*)/
  static_files: static\1/index.html
  upload: static/index.html

- url: /
  static_dir: static 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:10:55.190

您在 yaml 文件中的第一个映射告诉 AppEngine“每个以 / 结尾的 url 都应该映射到 ...”。你没有任何映射到不以 / 结尾的东西。

这会将所有内容映射到名为 static/html 的文件夹（未经测试，让我知道它是否有效）

```
- url: /.*
  static_dir: static/html
  mime_type: text/html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:28:03.323

@Shay 表示该行应该是：

```
- url: (.*) 
```

这是一个处理所有 URL 请求的路由，您不会收到任何 404 错误，并且所有请求都由*静态*index.html 页面处理。您的第二条路线将永远不会被处理，因为它更具体并且在您的通用路线之后。

您想要在捕获所有路线之上的更具体的路线。

```
application: websitewithsubfolder
version: 1
runtime: python
api_version: 1

handlers:
- url: /static
  static_dir: static

- url: /favicon.ico
  static_files: static/images/favicon.ico
  upload: static/images/favicon.ico
  mime_type: image/vnd.microsoft.icon

- url: /robots.txt
  static_files: robots.txt
  upload: robots.txt

- url: /(.*\.(gif|png|jpg))
  static_files: \1
  upload: (.*\.(gif|png|jpg))

- url: /static/css
  static_dir: static/css

- url: /static/js
  static_dir: static/js

- url: (.*)
  static_files: static/index.html
  upload: static/index.html 
```

上面的 app.yaml 文件更符合你想要的。

我建议您阅读更详细的[app.yaml文档。](https://developers.google.com/appengine/docs/python/config/appconfig)

# c++ - 我在哪里可以下载到 GNU C++ 标准库的源代码？

> ID：10871383
> 
> 赞同：21
> 
> 时间：2012-06-03T15:04:06.120
> 
> 标签：c++, stl, gnu

[我在http://ftp.gnu.org/gnu/glibc/](http://ftp.gnu.org/gnu/glibc/)下载了 GNU 标准 C 库 (glibc) 源代码。我在哪里可以找到他们的 C++ 库的类似下载？

我用谷歌搜索了一下，似乎找不到它。

我需要它的唯一原因是我想看看它是如何实现的。所以请不要给我链接到二进制文件或只是头文件，因为它是我正在寻找的实现源文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-03T15:07:59.770

它位于[g++ (gcc-c++) 源代码](http://gcc.gnu.org/viewcvs/trunk/libstdc++-v3/)`libstdc++-v3`的目录中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-02T06:40:57.367

# vb.net - VB silverlight for windows phone webbrowser

> ID：10871385
> 
> 赞同：2
> 
> 时间：2012-06-03T15:04:16.587
> 
> 标签：vb.net, windows-phone-7, xaml, url, browser

我正在为 Windows 手机编写应用程序，并且正在使用浏览器导航到图像，但是该图像不是全屏的，而且看起来很糟糕！有什么办法，要么用用户的背景颜色填满，要么在特定的地方设置默认缩放？

谢谢你 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:19:55.483

网络浏览器控件很慢，占用内存且难以自定义。

我认为您不应该使用网络浏览器来显示和缩放此图像。

相反，看看如何一起使用画布和图像控件，例如 MultiTouch 示例和库 - [http://www.galasoft.ch/Touch/wp7/](http://www.galasoft.ch/Touch/wp7/)和[http://multitouch.codeplex.com/](http://multitouch.codeplex.com/)

* * *

如果您确实需要使用网络浏览器，那么您可以尝试将图像包装在 HTML 页面中 - 您可以混合使用 html、javascript 和 css（包括从主机调用的动态 javascript） - 这可能会让您实现您正在寻找的一些定制。

# mysql - 删除表使 MySQL 挂起

> ID：10871388
> 
> 赞同：33
> 
> 时间：2012-06-03T15:04:37.027
> 
> 标签：mysql, locks

当我尝试删除表时，MySQL 挂起。我没有任何其他公开会议。如何解决这个问题？我已经等了 10 个小时，这个过程还没有终止。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-03T15:28:24.947

```
Waiting for table metadata lock
drop table tableA name

SELECT l1.lat, l1.lon, l2.zipcode FROM tableA l1, tableBl2 where l1.lat = l2.latitude and l1.lon = l2.longitude limit 10 
```

如果这是您的桌子，请参阅[此链接](http://dev.mysql.com/doc/refman/5.5/en/metadata-locking.html)

你有一个隐含的死锁。杀死其他事务以释放丢弃，或杀死丢弃以释放其他事务。

您可以在 sql_plus中使用[KILL thread_id。](http://dev.mysql.com/doc/refman/5.0/en/kill.html)

* * *

因为我想出了另一个有趣的经历，所以我正在添加更多信息。

`Metadata`死锁可能同样发生在给定表（`drop`，`alter`...）上的 ddl 操作和该表上的**选择**查询之间。

是的，`select`。

因此，如果您在 mysql（或 php，例如 with `pdo::fetch`）中循环游标，并在同一个表上运行 ddl 语句，您将遇到死锁。

这种非典型场景的一种解决方案是在`commit`完全获取任何 select 语句后，使用语句系统地释放隐式锁。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2019-05-24T17:16:07.807

我正在尝试为新手提供更简单的答案：

1）运行：

```
SHOW PROCESSLIST 
```

如果你得到类似的东西：

```
+----+-----------------+-----------------+--------+------------+-----------+---------------------------------+---------------------------------------------------+
| Id | User            | Host            | db     | Command    | Time      | State                           | Info                                              |
+----+-----------------+-----------------+--------+------------+-----------+---------------------------------+---------------------------------------------------+
|  4 | event_scheduler | localhost       | NULL   | Daemon     | 580410103 | Waiting on empty queue          | NULL                                              |
| 13 | root            | localhost:50627 | airbnb | Sleep      |     10344 |                                 | NULL                                              |
| 17 | root            | localhost:50877 | NULL   | Query      |      2356 | Waiting for table metadata lock | SHOW FULL COLUMNS FROM `airbnb`.`characteristics` |
| 18 | root            | localhost:50878 | airbnb | Query      |      2366 | Waiting for table metadata lock | DROP TABLE `airbnb`.`characteristics`             |
| 21 | root            | localhost:51281 | airbnb | Query      |      2305 | Waiting for table metadata lock | SHOW FULL COLUMNS FROM `airbnb`.`bed_type`        |
| 22 | root            | localhost:51282 | airbnb | Query      |      2301 | Waiting for table metadata lock | SHOW INDEXES FROM `airbnb`.`characteristics`      |
| 23 | root            | localhost:51290 | airbnb | Query      |      2270 | Waiting for table metadata lock | SHOW FULL COLUMNS FROM `airbnb`.`property_type`   |
| 24 | root            | localhost:51296 | airbnb | Query      |      2240 | Waiting for table metadata lock | SHOW INDEXES FROM `airbnb`.`property_type`        |
| 26 | root            | localhost:51303 | NULL   | Query      |      2212 | Waiting for table metadata lock | SHOW FULL COLUMNS FROM `airbnb`.`characteristics` |
| 27 | root            | localhost:51304 | NULL   | Query      |      2218 | Waiting for table metadata lock | SHOW FULL COLUMNS FROM `airbnb`.`bed_type`        |
| 29 | root            | localhost:51306 | NULL   | Query      |      2176 | Waiting for table metadata lock | SHOW INDEXES FROM `airbnb`.`characteristics`      |
| 30 | root            | localhost:51308 | NULL   | Query      |      2122 | Waiting for table metadata lock | DROP TABLE `airbnb`.`characteristics`             |
| 34 | root            | localhost:51312 | NULL   | Query      |      2063 | Waiting for table metadata lock | SHOW FULL COLUMNS FROM `airbnb`.`characteristics` |
| 35 | root            | localhost:51313 | NULL   | Query      |      2066 | Waiting for table metadata lock | SHOW FULL COLUMNS FROM `airbnb`.`bed_type`        |
| 39 | root            | localhost:51338 | NULL   | Query      |      2004 | Waiting for table metadata lock | SHOW FULL COLUMNS FROM `airbnb`.`characteristics` |
| 40 | root            | localhost:51339 | NULL   | Query      |      2008 | Waiting for table metadata lock | SHOW FULL COLUMNS FROM `airbnb`.`bed_type`        |
| 45 | root            | localhost       | airbnb | Field List |       997 | Waiting for table metadata lock |                                                   |
| 46 | root            | localhost       | airbnb | Field List |       798 | Waiting for table metadata lock |                                                   |
| 53 | root            | localhost       | airbnb | Query      |         0 | starting                        | SHOW PROCESSLIST                                  |
+----+-----------------+-----------------+--------+------------+-----------+---------------------------------+---------------------------------------------------+ 
```

with State ：等待表元数据锁定（如官方回答中所述）

2）`KILL 13`（13对应于Id）。

如果确实是死锁，那么后面的所有流程都会正常继续。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-09-04T09:51:43.990

重新启动 MySQL 可能不是最漂亮的解决方案，但它对我有用：

```
sudo /etc/init.d/mysql restart
mysqladmin drop YOURDATABASE 
```

# c++ - 在 for 循环中找到最小值并保留它的索引

> ID：10871391
> 
> 赞同：0
> 
> 时间：2012-06-03T15:04:53.353
> 
> 标签：c++, for-loop, minimum

我正在做一个家庭作业，我在一个“for”循环中计算一个函数的整数区间 (f(x) = x * x – 12 * x + 40) 中的值。我需要找到一个最小值。没关系，但我还需要保留值最小的索引号。目前我在另一个循环中再次重申该功能，但这看起来真的很混乱。我也可以导出 x 并使用已知的最小值计算答案，但这也很奇怪，因为推导并不那么简单。你对我有什么建议吗？谢谢。

```
#include <iostream>
#include "limits.h"
using namespace std;

int main ()
{
    int lBound, uBound, y, min;

    cout << "Give the lower and the upper bounds of integer numbers: " << endl;
    cin >> lBound >> uBound;        

    min=INT_MAX;
    int x = lBound;
    for (int i = x; i <=uBound; i ++) {
        y = i * i - 12 * i + 40;
        cout << x << " " << y << endl;
        if (y<min) {
            min=y;
        }
        x++;            
    }
    for (int i = lBound; i <= uBound; i++) {
        y = lBound * lBound - 12 * lBound + 40;
        if (y==min) {
            y = lBound;
            i=uBound; // terminates the loop
        }
        lBound++;
    }               
    cout << "smallest value of the function is " << min << " for x = " <<  y << endl;                
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T15:13:49.750

这里有一个提示：每当你需要在程序中“保留一些东西”时，这意味着你需要将它存储在一个变量中。该变量是本地的、全局的还是传递的，取决于您需要保留它多长时间。这称为变量的“范围”。将任何变量的范围保持在最低限度被认为是一种很好的做法，因此指导方针不鼓励使用全局变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:14:21.623

```
 i=uBound; // terminates the loop 
```

这不是一个很好的编码实践。要终止循环，您应该使用流控制结构，例如`break`. 在这种情况下这样做会保留最小元素的索引。

**编辑：**如果你想`i`超过循环，你只需要在外面声明它。以机智：

改变

```
for (int i = lBound; i <= uBound; i++) { 
```

至

```
int i; // variable exists outside loop
for (i = lBound; i <= uBound; i++) { 
```

此外，仅供参考，循环边界通常被指定为[半开区间](http://en.wikipedia.org/wiki/Half-open_interval)，以避免潜在的问题，`lbound`并`ubound`表示`int`数据类型的限制。这意味着您通常使用`<`而不是`<=`.

不清楚你是上代数课还是CS课……</p>

# php - 将结果从 RabbitMQ 队列推送到 CakePHP 前端

> ID：10871394
> 
> 赞同：2
> 
> 时间：2012-06-03T15:05:38.133
> 
> 标签：php, cakephp, rabbitmq, amqp, server-push

我正在开发一个系统，该系统由内置于 CakePHP 框架的前端和基于 Java 的后端组成。这两个生态系统之间的通信是通过从 CakePHP 控制器向 RabbitMQ 代理发送 JSON 消息来实现的。当消息被消费时，结果被发送回前端。现在，我需要使用消息并将结果从控制器推送到用户浏览器。对于 PHP 部分，我使用的是 phpamqplib，但在监听新消息时它需要有一个无限循环：

```
 $channel->basic_consume('AMQP.COMMAND.OUTPUT.QUEUE', 
            'consumer', 
            false, 
            false, 
            false, 
            false, 
            array($this, 'processMessage'));

    function shutdown($ch, $conn){
        $ch->close();
        $conn->close();
    }
    register_shutdown_function('shutdown', $channel, $conn);

    while (count($channel->callbacks)) {
        $read   = array($conn->getSocket()); // add here other sockets that you need to attend
        $write  = null;
        $except = null;
        if (false === ($num_changed_streams = stream_select($read, $write, $except, 60))) {
            /* Error handling */
        } elseif ($num_changed_streams > 0) {
            $channel->wait();
        }
    } 
```

在我的控制器中，这会引发 Apache 服务器抛出错误，因为超过了 30 秒的最大执行时间。我在这里真的需要帮助。收听新消息然后将结果推送到视图的最佳解决方案是什么？

谢谢

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:56:21.940

我强烈建议将其转换为基于 AJAX 的基础架构，并重构您的代码以执行此操作：

1.  CakePHP 每 x 秒进行一次 AJAX 调用以加载页面
2.  AJAX URL 从队列中获取剩余元素，并输出它们

您的代码看起来不完整，因此我无法完全重构它，但您可以更改 AJAX URL 以执行以下操作：

```
if (count($channel->callbacks)) {
    $read   = array($conn->getSocket()); // add here other sockets that you need to attend
    $write  = null;
    $except = null;
    if (false === ($num_changed_streams = stream_select($read, $write, $except, 60))) {
        /* Error handling */
    }
} 
```

完成后关闭频道。

如果您真的想使用推送，您的另一个选择是使用网络套接字。进行搜索，或者[本教程](http://www.tutorialspoint.com/html5/html5_websocket.htm)可能会帮助您入门。

# asp.net - XML 反序列化给出空 WCF 对象

> ID：10871399
> 
> 赞同：2
> 
> 时间：2012-06-03T15:06:08.973
> 
> 标签：asp.net, wcf

我有一个 XML 字符串，例如

```
<?xml version="1.0"?>
<FullServiceAddressCorrectionDelivery xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <AuthenticationInfo xmlns="http://www.usps.com/postalone/services/UserAuthenticationSchema">
    <UserId xmlns="">FAPushService</UserId>
    <UserPassword xmlns="">Password4Now</UserPassword>
  </AuthenticationInfo>
</FullServiceAddressCorrectionDelivery> 
```

为了用类映射节点，我在 WCF 中有类结构，如

```
[DataContract]
[Serializable]
public class FullServiceAddressCorrectionDelivery
{
    [XmlElement("AuthenticationInfo", Namespace = "http://www.usps.com/postalone/services/UserAuthenticationSchema")]
    [DataMember]
    public AuthenticationInfo AuthenticationInfo { get; set; }
}

[DataContract]
[Serializable]
public class AuthenticationInfo
{
    [DataMember]
    [XmlElement("UserId", Namespace = "")]
    public string UserId { get; set; }

    [DataMember]
    [XmlElement("UserPassword", Namespace = "")]
    public string UserPassword { get; set; }
} 
```

对于反序列化，我使用 xmlserializer 反序列化对象

```
XmlSerializer xs = new XmlSerializer(typeof(FullServiceAddressCorrectionDelivery));
var result = (FullServiceAddressCorrectionDelivery)xs.Deserialize(stream); 
```

这个方法返回给我一个 Null FullServiceAddressCorrectionDelivery 对象.. 但是当我使用 DataContractSerializer .. 像

```
DataContractSerializer xs = new DataContractSerializer(typeof(FullServiceAddressCorrectionDelivery));
var result = (FullServiceAddressCorrectionDelivery)xs.ReadObject(stream); 
```

然后出现以下异常..

第 2 行位置 46 出错。来自命名空间“http://schemas.datacontract.org/2004/07/WcfService1”的预期元素“FullServiceAddressCorrectionDelivery”。遇到名称为“FullServiceAddressCorrectionDelivery”的“元素”，命名空间“”。

我被这个困住了......我以某种方式在 RENE（StackOverFlow 成员）的帮助下成功反序列化，如果该类在同一个项目中......但是当我将它们转换为 WCF 数据合同时......我遇到了那个问题...... .请指导我在这里做错了什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:05:20.040

根据您希望如何为该输入使用数据协定序列化程序 (DCS)，您可能会也可能不会这样做。DCS中*数据成员*的命名空间由它们所属的合约的命名空间定义，除非它是根元素（在这种情况下，[DC] 命名空间也定义了元素的命名空间）。

您的根元素 FullServiceAddressCorrectionDelivery 在示例 XML 中有一个命名空间（空），它的成员 AuthenticationInfo 有另一个命名空间（http://www.usps.com/postalone...）。这意味着除非您实际更改序列化程序的创建方式，否则您将无法将 DCS 用于此类型。

然而，XmlSerializer (XS) 应该可以正常工作——该类型的成员可以有不同的命名空间。正如您在下面的代码中看到的，我可以将您提供的 XML 逐字发布到以 FullServiceAddressCorrectionDelivery 作为输入的操作中，并且对象已正确填充 - 您需要使用 [XmlSerializerFormat 标记操作（或合同） ] 属性来获取此行为。

```
public class Post_6fc3a1bd_b3ca_48da_b4d2_35271135ed8a
{
    const string XML = @"<?xml version=""1.0""?>
 <FullServiceAddressCorrectionDelivery xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
 xmlns:xsd=""http://www.w3.org/2001/XMLSchema"">
   <AuthenticationInfo xmlns=""http://www.usps.com/postalone/services/UserAuthenticationSchema"">
     <UserId xmlns="""">FAPushService</UserId>
     <UserPassword xmlns="""">Password4Now</UserPassword>
   </AuthenticationInfo>
 </FullServiceAddressCorrectionDelivery>";

    [XmlRoot(ElementName = "FullServiceAddressCorrectionDelivery", Namespace = "")]
    public class FullServiceAddressCorrectionDelivery
    {
        [XmlElement("AuthenticationInfo", Namespace = "http://www.usps.com/postalone/services/UserAuthenticationSchema")]
        [DataMember]
        public AuthenticationInfo AuthenticationInfo { get; set; }
    }

    public class AuthenticationInfo
    {
        [XmlElement("UserId", Namespace = "")]
        public string UserId { get; set; }

        [XmlElement("UserPassword", Namespace = "")]
        public string UserPassword { get; set; }
    }

    [ServiceContract(Namespace = "")]
    public interface ITest
    {
        [XmlSerializerFormat]
        [OperationContract]
        FullServiceAddressCorrectionDelivery Echo(FullServiceAddressCorrectionDelivery input);
    }

    public class Service : ITest
    {
        public FullServiceAddressCorrectionDelivery Echo(FullServiceAddressCorrectionDelivery input)
        {
            return input;
        }
    }

    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

        WebClient c = new WebClient();
        c.Headers[HttpRequestHeader.ContentType] = "text/xml";
        Console.WriteLine(c.UploadString(baseAddress + "/Echo", XML));

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

为了完整起见，这是您更改序列化程序创建（传递根名称和命名空间）以能够反序列化您使用数据协定序列化程序提供的 XML 的方式。

```
public class Post_6fc3a1bd_b3ca_48da_b4d2_35271135ed8a_b
{
    const string XML = @"<?xml version=""1.0""?>
 <FullServiceAddressCorrectionDelivery xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
 xmlns:xsd=""http://www.w3.org/2001/XMLSchema"">
   <AuthenticationInfo xmlns=""http://www.usps.com/postalone/services/UserAuthenticationSchema"">
     <UserId xmlns="""">FAPushService</UserId>
     <UserPassword xmlns="""">Password4Now</UserPassword>
   </AuthenticationInfo>
 </FullServiceAddressCorrectionDelivery>";

    [DataContract(Name = "FullServiceAddressCorrectionDelivery", Namespace = "http://www.usps.com/postalone/services/UserAuthenticationSchema")]
    public class FullServiceAddressCorrectionDelivery
    {
        [DataMember]
        public AuthenticationInfo AuthenticationInfo { get; set; }
    }

    [DataContract(Name = "AuthenticationInfo", Namespace = "")]
    public class AuthenticationInfo
    {
        [DataMember]
        public string UserId { get; set; }

        [DataMember]
        public string UserPassword { get; set; }
    }

    static string Serialize(object obj, bool useDataContractSerializer)
    {
        MemoryStream ms = new MemoryStream();
        XmlWriterSettings ws = new XmlWriterSettings
        {
            Indent = true,
            IndentChars = "  ",
            OmitXmlDeclaration = false,
            Encoding = new UTF8Encoding(false)
        };
        XmlWriter w = XmlWriter.Create(ms, ws);
        if (useDataContractSerializer)
        {
            var dcs = new DataContractSerializer(obj.GetType(), "FullServiceAddressCorrectionDelivery", "");
            dcs.WriteObject(w, obj);
        }
        else
        {
            new XmlSerializer(obj.GetType()).Serialize(w, obj);
        }

        w.Flush();
        string result = Encoding.UTF8.GetString(ms.ToArray());
        Console.WriteLine(result);

        w.Close();
        ms.Close();
        return result;
    }

    public static void Test()
    {
        Console.WriteLine("Serialization:");
        MemoryStream ms = new MemoryStream();
        XmlWriterSettings ws = new XmlWriterSettings
        {
            Indent = true,
            IndentChars = "  ",
            OmitXmlDeclaration = false,
            Encoding = new UTF8Encoding(false)
        };
        XmlWriter w = XmlWriter.Create(ms, ws);
        var dcs = new DataContractSerializer(typeof(FullServiceAddressCorrectionDelivery), "FullServiceAddressCorrectionDelivery", "");

        var obj = new FullServiceAddressCorrectionDelivery
        {
            AuthenticationInfo = new AuthenticationInfo
            {
                UserId = "FAPushService",
                UserPassword = "Password4Now"
            }
        };

        dcs.WriteObject(w, obj);

        w.Flush();
        string result = Encoding.UTF8.GetString(ms.ToArray());
        Console.WriteLine(result);
        Console.WriteLine();

        Console.WriteLine("Deserialization:");
        ms = new MemoryStream(Encoding.UTF8.GetBytes(XML));

        var obj2 = (FullServiceAddressCorrectionDelivery)dcs.ReadObject(ms);
        Console.WriteLine("{0} - {1}", obj2.AuthenticationInfo.UserId, obj2.AuthenticationInfo.UserPassword);
    }
} 
```

# c++ - 代码执行派生类方法，但从基类方法获取默认参数

> ID：10871406
> 
> 赞同：7
> 
> 时间：2012-06-03T15:07:01.393
> 
> 标签：c++, virtual, derived, default-parameters

有人可以解释为什么下面代码的结果是 "class B::1" 吗？

**为什么派生类的虚方法使用基类的默认参数而不是他自己的？**对我来说，这很奇怪。提前致谢！

代码：

```
#include <iostream>

using namespace std;

class A
{
public:
    virtual void func(int a = 1)
    {
        cout << "class A::" << a;
    }
};

class B : public A
{
public:
    virtual void func(int a = 2)
    {
        cout << "class B::" << a;
    }
};

int main()
{
    A * a = new B;
    a->func();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T15:25:56.703

因为默认参数是根据的静态类型解析的`this`（即变量本身的类型，如`A&`in `A& a;`）。

稍微修改您的示例：

```
#include <iostream>

class A
{
public:
    virtual void func(int a = 1)
    {
        std::cout << "class A::" << a << "\n";
    }
};

class B : public A
{
public:
    virtual void func(int a = 2)
    {
        std::cout << "class B::" << a << "\n";
    }
};

void func(A& a) { a.func(); }

int main()
{
    B b;
    func(b);
    b.func();

    return 0;
} 
```

我们观察到以下输出：

```
class B::1
class B::2 
```

在[ideone](http://ideone.com/xddDI)行动。

因此，不建议虚拟函数更改默认值。不幸的是，我不知道有任何编译器会警告这个结构。

* * *

技术上的解释是有两种处理默认参数的方法：

*   创建一个新函数来充当蹦床：`void A::func() { func(1); }`
*   在调用站点添加缺少的参数`a.func()`=>`a.func(/*magic*/1)`

如果是前者（并假设`A::func`也声明`virtual`了），那么它会像您期望的那样工作。然而，后一种形式被选中，要么是因为`virtual`当时没有预见到问题，要么是因为在利益面前它们被认为是无关紧要的（如果有的话......）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T15:10:56.060

因为默认值在编译期间被替换并取自声明，而要调用的实际函数（A::func 或 B::func）是在运行时确定的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-03T15:13:24.850

因为 C++ 中的多态性在运行时生效，而默认参数的替换在编译时生效。在编译时，编译器不知道（也不应该知道）指针`a`指向的对象的动态类型。因此，它采用它所知道的唯一类型的默认参数`a`，在您的示例中是`A *`.

（顺便说一句，这也是在接口/头文件中而不是在实现/定义中给出默认参数的原因。编译器从不将默认参数插入到实现的机器代码中，而只会在*调用者的*机器代码中。从技术上讲，默认参数是调用者的属性；调用者不知道——也不应该知道——对象的动态类型。）

# windows-phone-7 - WP7 如何获取所有可用字体的列表

> ID：10871409
> 
> 赞同：2
> 
> 时间：2012-06-03T15:07:25.980
> 
> 标签：windows-phone-7, fonts

如何获取 Windows phone 7 中所有字体的列表（枚举）。我知道所有字体列表[http://technet.microsoft.com/de-de/library/ff806365(v=vs.96).aspx](http://technet.microsoft.com/de-de/library/ff806365(v=vs.96).aspx)，但是是否有可能以编程方式获取此列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:49:25.357

[您可以从http://msdn.microsoft.com/en-us/library/ff806365%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/ff806365%28v=vs.95%29.aspx)中选择可用的字体

WinForms 有 FontFamily.Families 列表，这在 WP7 的 SL 中不可用

# php - 改写为丹麦时间/日期

> ID：10871411
> 
> 赞同：0
> 
> 时间：2012-06-03T15:07:32.820
> 
> 标签：php, sql, mysqli

您好，这就是我建立自己的论坛的方式，但这就是我必须将“设置”日期放入数据库中的方式，这应该是 30-5-2012 的样子，但是当将其从数据库中拉出时，它应该如何查看。我在 MySQLI 中这样构建它

这是我在数据库中找到它时的样子

```
<form action="#" method="post" name="formular" onsubmit="return validerform ()">
            <?php
            if ($stmt = $mysqli->prepare('INSERT INTO `forum` (`title`, `tekst`, `dato`, `id_brugere`) VALUES (?, ?, ?, ?)')) { 
            $stmt->bind_param('ssss', $title, $tekst, $dato, $id_brugere);
            //fra input ting ting..
            $title = $_POST["title"];
            $tekst = $_POST["tekst"];
            $id_brugere = $_SESSION["user_id"];
            $dato = date('d-m-Y');

            $stmt->execute();
            $stmt->close();

            //er der fejl i tilgangen til table..
            } else {
                echo 'Der opstod en fejl i erklÃ¦ringen: ' . $mysqli->error;
            }
            ?>
        <table border="0">
            <tr>
                <td id="tb-w_a"><p>Title</p></td>
                <td>:</td>
                <td><input type="text" name="title"></td>
            </tr>
        </table>
    <textarea name="tekst" style="width:716px; height:170px;"></textarea><br />
    <input type="submit" value="Opret indhold">
</form> 
```

这是我从数据库中取出它时的样子

```
<?php
            if ($stmt = $mysqli->prepare('SELECT id_forum, title, tekst, dato, id_brugere FROM `forum` ORDER BY  `forum`.`id_forum` DESC LIMIT 0 , 30'))
            {
            $stmt->execute();
            $stmt->store_result();
            $stmt->bind_result($id_forum, $title, $tekst, $dato, $id_brugere);
            $count_res = $stmt->num_rows;

            if($count_res > 0)
            {
            while ($stmt->fetch()) {    
            ?>
            <tr class="forumtoppen">
            <td class="titleforum"><?php echo $title;?> - <a href="">L&#230;se mere</a></td>
            <td>Dato: <?php echo $dato;?></td>
            </tr>
            <?php
                }
                }
            else
                {
                ?>
                    <p>der er ingen overhovedet!.. hmm</p>
                <?php
                }
            }
            ?> 
```

在这里我像这样建立它必须转换为丹麦时间。

```
<?php echo $dato;?> 
```

不会有错误，但我只需要将它构建到丹麦日期中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:13:28.463

为什么不在检索查询中使用 mysql 的 date_format 函数？（[php文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)）

```
SELECT id_forum, title, tekst, date_format(dato,'%d-%m-%Y') as dato, id_brugere 
FROM `forum` 
ORDER BY  `forum` . `id_forum` DESC LIMIT 0 , 30 
```

# windows - CUDA 错误后重置 GPU 和驱动程序

> ID：10871412
> 
> 赞同：21
> 
> 时间：2012-06-03T15:07:36.977
> 
> 标签：windows, cuda, gpu

有时，我的 CUDA 程序中的错误会导致桌面图形中断（在 Windows 中）。通常，屏幕仍然具有一定的可读性，但是当图形发生变化时，例如拖动窗口时，会出现大量半随机彩色像素和小块。

我曾尝试通过更改桌面分辨率来重置 GPU 和驱动程序，但这无济于事。我发现的唯一解决方法是重新启动计算机。

是否有程序或一些技巧可以让驱动程序和 GPU 在不重新启动的情况下重置？

背景：

我有 1.0、1.1、1.3 和 2.0 卡，但我现在只有 1.1 和 2.0 卡。我在 1.0 和 1.1 上看到过这个问题。我很确定我在 1.3 上看到过。我不确定2.0。内存保护是否在 1.3 左右添加了一段时间？我几乎可以肯定这不是由于硬件不稳定，因为问题似乎是由我的代码中的错误触发的，并且在修复错误后消失了。运行完代码后，卡已经稳定了。我在我的 1.1 卡上看到这个问题后写了这个问题，但在我修复了一个错误后它就消失了，现在我没有任何代码可以重现它。也许我应该尝试写入 1.1 卡上的随机位置，看看是否有任何事情发生......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2019-09-05T10:38:36.833

因为在 unix 上有时会出现同样的问题，谷歌将我转发到这个线程，我希望这对其他人有帮助..

在 ubuntu 上卸载和重新加载 nvidia 内核模块为我解决了这个问题：

```
sudo rmmod nvidia_uvm
sudo modprobe nvidia_uvm 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-19T02:33:04.633

**编辑：**

如果您在 Linux 上使用 Tesla 硬件并且可以运行 nvidia-smi，那么您可以使用重置 GPU

```
nvidia-smi -r 
```

或者

```
nvidia-smi --gpu-reset 
```

这是`man`此开关的输出：

> 重置 GPU 状态。可用于清除双位 ECC 错误或恢复挂起的 GPU。需要 -i 切换到目标特定设备。仅在 Linux 上可用。

除此以外...

* * *

真正重置硬件的方法是重新启动。

你所描述的不应该发生。我建议使用不同的硬件进行测试，并让我们知道它是否仍然存在。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-21T10:09:37.410

要在 Windows 中重置图形堆栈，请按`Win`+ `Ctrl`+ `Shift`+ `B`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-16T09:52:00.760

我有一个基于 NVDIA GPU SDK 4.2 的 GeForce GTX 260，我遇到了一些问题。有时开发我的程序中有错误。这会导致屏幕显示本文中描述的随机彩色像素。

如此处所述，如果我更改分辨率，它们不会消失。此外，如果我只将颜色深度从 32 位更改为 16 位，随机彩色像素会消失，但回到 32 位（无需重新启动）会使它们再次出现。导致此行为的最后一个错误是使用 __constant__ 内存，但将其作为指针传递：

```
test<<<grid, threadsPerBlock>>>( cuda_malloc_data, cuda_constant_data ); 
```

如果我没有通过`cudb_constant_data`，那么就没有错误（因此，随机彩色像素不会出现）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-13T03:32:58.860

1.  从“设备管理器”，在“显示适配器”选项卡下，找到驱动程序
2.  禁用它
3.  按 win + ctrl +shift + B （显示器会闪烁）
4.  启用驱动程序

你去吧。

# facebook-graph-api - 在 Facebook 图形 API 上检测用户移动设备

> ID：10871413
> 
> 赞同：1
> 
> 时间：2012-06-03T15:07:46.253
> 
> 标签：facebook-graph-api

有没有办法检测用户的移动设备，或者至少知道用户是否也在移动设备上使用 Facebook？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T09:08:52.020

阅读以下 url 上的移动设备过滤部分：

[https://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/](https://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/)

您应该执行如下所示的 Graph API 请求：

获取[https://graph.facebook.com/USER_ID/?field=devices](https://graph.facebook.com/USER_ID/?field=devices)

只是想补充一点，该`field`参数对我不起作用，但`fields`有效。所以你也可以试试下面的网址（我建议先试试）。

获取[https://graph.facebook.com/USER_ID/?fields=devices](https://graph.facebook.com/USER_ID/?fields=devices)

别忘了你需要一个 access_token

获取[https://graph.facebook.com/USER_ID/?field=devices&access_token=](https://graph.facebook.com/USER_ID/?field=devices&access_token=) ....

# php - squirrelmail 的 gpg-plugin 不会创建密钥对

> ID：10871417
> 
> 赞同：1
> 
> 时间：2012-06-03T15:08:21.947
> 
> 标签：php, plugins, gnupg, squirrelmail

今天我安装了 squirrelmail gpg 插件。

但是当我想生成一个新的密钥对时就会出现问题。

当我填写密钥对创建表单并将其发送出去时，我将进入下一个屏幕，上面显示：

正在生成您的密钥...请耐心等待！

一个小时后，它似乎被卡住了。事实上，如果我想再次访问我的网络邮件，我需要重新启动我的浏览器（firefox 和 ie）。

我在 apache/php 日志中找不到任何错误，它只是不断尝试加载并且不会进一步。

有没有人建议，出了什么问题，或者更重要的是如何找出问题所在？（因为没有可见的错误......）

Gr，爱马仕。

# html - iframe无法打开php，显示Forbidden

> ID：10871418
> 
> 赞同：0
> 
> 时间：2012-06-03T15:08:24.603
> 
> 标签：html, iframe

我正在尝试在 iFrame 中打开一个 php 文件。它在本地工作正常，但在服务器中显示**Forbidden 。**

这是我的代码-

```
<iframe frameborder="0" width="140px" height="25px" marginheight="0" marginwidth="0" scrolling="no" src="share.php?url=test.com"></iframe> 
```

我将 iframe-src-file share.php 的权限更改为 777 但没有运气。父文件的状态是：755。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:09:35.983

```
src="share.php?url=test.com" 
```

`.com`最后，iframe 将整个路径视为网站，而不是相对路径并尝试打开它。像-

```
src="http://share.php?url=test.com" 
```

编码参数值，解决问题

# jquery - jQuery Mobile：仅数字输入字段？

> ID：10871422
> 
> 赞同：9
> 
> 时间：2012-06-03T15:09:14.457
> 
> 标签：jquery, html, jquery-mobile

我正在制作一个基于 jQuery Mobile 的网站。在特定字段上，我只想接受数字，或者更准确地说是 4 位数字。我注意到滑块输入会执行此操作（当您点击手机上的字段时，它会显示“仅数字键盘”）。

但是，我对滑块本身不感兴趣，因为我希望用户输入一个确切的数字（例如，4687 在触摸电话上使用滑块有点难以实现）。

是否有滑块的替代品，或者是否有一种巧妙的方法来隐藏实际的滑块？

```
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup">
        <label for="slc_length">
            Length
        </label>
        <input type="range" name="slider" id="slc_length" value="500" min="8" max="9999" data-highlight="true" />
    </fieldset>
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T15:11:58.240

使用数字的输入类型。不要放弃服务器端验证！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-15T18:14:19.493

```
<input type="number" name"abc"> 
```

# objective-c - 如何获取两个位置并将它们发送到服务器-objective-c

> ID：10871425
> 
> 赞同：0
> 
> 时间：2012-06-03T15:09:35.627
> 
> 标签：objective-c, gps, location, send

我从 Objective-C 编程开始，现在我可以获取一个 GPS 位置并将其发送到我的服务器。这是我的代码：

```
- (void)locationManager:(CLLocationManager *)manager
        didUpdateToLocation:(CLLocation *)newLocation
        fromLocation:(CLLocation *)oldLocation
{
    [manager stopUpdatingLocation];
    if(newLocation != nil){
        float lat = newLocation.coordinate.latitude ; 
        float longt = newLocation.coordinate.longitude ; 
        uint8_t location[BUFFER_SIZE] ={0};

        sprintf((char *)location, "(%f,%f)",lat , long) ;

        [self writeToServer:location size:strlen((char *)location)] ;

    }
} 
```

当“writeToServer”负责发送数据时。

现在，如何更改此方法以获取两个位置，间隔 10 秒，然后发送这两个位置？

非常感谢！

# grep - 使用 grep 匹配时搜索字符串中的空格。

> ID：10871426
> 
> 赞同：4
> 
> 时间：2012-06-03T15:09:48.347
> 
> 标签：grep

我有一个看起来像这样的文件。

```
10gs+VWW+A+210 10gs-ASN-A-206 0.616667 0.094872
10gs+VWW+A+210 10gs-GLU-A-31- 0.363077 0.151282
10gs+VWW+A+210 10gs-GLY-A-207 0.602564 0.060256
10gs+VWW+A+210 10gs-LEU-A-132 0.378151 0.288462
10gs+VWW+A+210 10gs-LEU-A-60- 0.376812 0.133333
10gs+VWW+A+210 11ba-GLU-A-2-z 0.333333 0.065385
10gs+VWW+A+210 11ba-SER-A-15- 0.400000 0.053846
10gs+VWW+A+210 11ba-GLU-A-2-z 0.333333 0.065385
10gs+VWW+A+210 11ba-SER-A-15- 0.400000 0.053846
17gs+VWW+A+210 11ba-SER-A-77- 0.415789 0.101282
15gs+VWW+A+210 11ba-VAL-A-47- 0.413793 0.215385 
```

我想找出与模式匹配的行[包括其中的空格]。假设模式是：'10gs+VWW+A+210 11ba-'

当我将这样的模式作为参数提供给 grep 时，我得到了正确的匹配行。但是，当我想从一个文件中匹配多个模式时，就会出现问题，该文件`pattern.txt`在每一行都有所有这些模式的列表。

`pattern.txt`看起来像这样：

10gs+VWW+A+210 11ba-

10gs+VWW+A+210 10gs-

当我使用这样的 shell 脚本时：

```
for i in `cat pattern.txt`; do grep -e "^$i" bigfile.txt ; done 
```

该命令需要`10gs+VWW+A+210`单独和 11ba 单独匹配。我想匹配整个事物（用空格分隔），即要匹配的 10gs+VWW+A+210 11ba，而不是单独的两个字符串。

如何修改现有的 shell 脚本以克服搜索字符串中的空白字符？

此外，由于我匹配这些字符串集的文件很大，~50GB。因此，欢迎使用内存高效的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:22:32.190

**用其他符号替换空格**

假设`#`永远不会出现在模式中

```
 for i in $( cat pattern.txt | tr ' ' '#' ) ; do 
            j=$(echo "$i" | tr '#' ' ' ) 
            grep -e "^$j" bigfile.txt 
 done 
```

计时我的测试文件

```
real    0m20.739s
user    0m11.773s
sys     0m8.345s 
```

**在 grep 中使用 -f 标志**

```
 grep -f pattern.txt bigfile.txt 
```

在同一个测试文件上计时

```
real    0m2.190s
user    0m2.163s
sys     0m0.026s 
```

换句话说，`grep -f`大型模式文件的性能似乎要好 10 倍左右。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:23:36.140

以下命令和相应的结果是否适合您？必须用管道分割模式以使其中任何一个匹配。

命令：

```
egrep '10gs\+VWW\+A\+210 11ba-|10gs\+VWW\+A\+210 10gs-' bigfile.txt 
```

结果：

```
10gs+VWW+A+210 10gs-ASN-A-206 0.616667 0.094872
10gs+VWW+A+210 10gs-GLU-A-31- 0.363077 0.151282
10gs+VWW+A+210 10gs-GLY-A-207 0.602564 0.060256
10gs+VWW+A+210 10gs-LEU-A-132 0.378151 0.288462
10gs+VWW+A+210 10gs-LEU-A-60- 0.376812 0.133333
10gs+VWW+A+210 11ba-GLU-A-2-z 0.333333 0.065385
10gs+VWW+A+210 11ba-SER-A-15- 0.400000 0.053846
10gs+VWW+A+210 11ba-GLU-A-2-z 0.333333 0.065385
10gs+VWW+A+210 11ba-SER-A-15- 0.400000 0.053846 
```

# c - Linux Pthread 库，线程参数

> ID：10871427
> 
> 赞同：1
> 
> 时间：2012-06-03T15:09:57.803
> 
> 标签：c, linux, pthreads

如果我在 Linux 下使用库创建线程`Pthread`，我需要使用 function`pthread_create`作为它需要的参数之一`void *`，所以我可以传递一个指向某物的指针，这样我的线程例程就可以访问它，但是做类似的事情是否安全这个

```
{//some scope
    int a=5//scope variable
    pthread_create(&id,NULL,some_function,(void*)a);
}//end of scope 
```

在我的日常生活中：

```
void *some_function(void *_arg)
{
    int a=(int)arg;
    return NULL;
} 
```

我想做这样的事情，所以我可以将变量的值保留在堆栈上，这样我就可以从我的线程例程中访问它，但我不想为单个变量创建结构或手动分配内存。

我将创建几个这样的线程，所以我想知道在这种情况下我是否可以通过并且不使用列表或动态数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T15:26:33.950

你所做的在现实世界中是完全安全的：在`int`和之间的转换`void *`不是未定义的行为，它是实现定义的，所有实现都以自然、理智的方式定义它。这也是将单整数参数传递给新线程的唯一有效方法。其他方法都需要昂贵的同步，要么通过显式锁定，要么`malloc`在原始线程和新线程中使用（在/实现`free`中隐藏了隐式同步成本）。`malloc``free`

但是，您会发现一件事是某些编译器会发出转换警告。这是因为旧的损坏代码假定`int`可以表示 ; 的全部值范围`void *`。编译器无法区分将 a 存储在 a 中的（有效）做法和将 a 存储在an`int`中`void *`的（无效）做法。作为一种解决方案，您可能想要使用而不是，这将避免警告。如果您的原始变量是，只需添加一个额外的中间转换即可避免警告。`void *``int``intptr_t``int``int``intptr_t`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:26:46.313

在这种情况下，通过*arg*`a`参数将 的值压入`some_function`堆栈是安全的，因为' 的大小足以支持整数的值。*`void*`*

# git - 悬垂分行？

> ID：10871429
> 
> 赞同：2
> 
> 时间：2012-06-03T15:10:16.730
> 
> 标签：git, git-branch, remote-branch

这可能是一个已经提出的问题，但我只是不知道该问题的正确名称是什么 - 所以请指导我或回答（是的，我已经看到[了这个](https://stackoverflow.com/questions/658885/how-do-you-get-git-to-always-pull-from-a-specific-branch "这个")问题，但无法从答案中得到太多） .

我正在尝试`git pull`但收到以下消息：

```
You asked me to pull without telling me which branch you
want to merge with, and 'branch.2012_05_09_my_branch.merge' in
your configuration file does not tell me, either. Please
specify which branch you want to use on the command line and
try again (e.g. 'git pull <repository> <refspec>').
See git-pull(1) for details.

If you often merge with the same branch, you may want to
use something like the following in your configuration file:
    [branch "2012_05_09_my_branch"]
    remote = <nickname>
    merge = <remote-ref>

    [remote "<nickname>"]
    url = <url>
    fetch = <refspec>

See git-config(1) for details. 
```

看起来我的工作目录有点“挂起”而没有附加到任何分支，对吗？如果是这样 - 请就如何将其连接回正确的分支提供建议（`2012_05_09_my_branch`例如）。可能我什至错了（作为一个完全的 GIT 新手），在这种情况下，请解释发生了什么以及我能做些什么。

提炼的问题：如果没有收到上述消息，我需要做什么才能成功`git push`运行？`git pull`

**更新：**当我跑步时，`git branch`我得到：

```
* 2012_05_09_my_branch
  master 
```

这*可能*意味着我在我的本地`2012_05_09_my_branch`分支上，它没有连接到任何远程分支？

**更新 N2：** [为什么我需要一直做 `--set-upstream`？](https://stackoverflow.com/questions/6089294/git-why-do-i-need-to-do-set-upstream-all-the-time)- 作为补充材料非常值得一读（现在才发现）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:37:06.247

*并不是*您的工作目录未附加到分支，而是您没有为本地分支设置远程上的对等分支。您可以将它们“连接”在一起：

```
git branch --set-upstream 2012_05_09_my_branch remotes/<your remote>/2012_05_09_my_branch 
```

其中 <your remote > 是 .git/config 中定义的服务器服务器，通常（使用一台服务器时）是`origin`

***编辑：***更安全的方法是使用`remotes/<remote>/<branch>`而不是`<remote>/<branch>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:27:34.070

当您创建本地分支并希望将其放在远程存储库中时，您需要运行以下命令：

```
$ git push origin 2012_05_09_my_branch 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T15:20:57.077

```
git status 
```

将帮助您了解您所在的分支机构（如果有）。命令

```
git branch 
```

将列出您拥有的本地分支（git branch -a 也会列出远程分支）。当然你可以使用

```
git checkout <branchname> 
```

将您的工作副本转到所选分支。

# objective-c - 增加 NSData 的长度

> ID：10871433
> 
> 赞同：3
> 
> 时间：2012-06-03T15:10:51.320
> 
> 标签：objective-c, iphone, nsstring, nsdata

基本上，我有一个 46 个字符的 NSString，我将其转换为 NSData。我需要将字符串填充为 48 个字符。它不能通过仅在 NSString 的末尾添加 ' ' 来工作。所以，我只是使用这个增加了 NSData 的长度：

```
NSString *string = @"__46characterlongstring__";
NSData *d = [string dataUsingEncoding:NSUTF8StringEncoding];
NSLog(@"d: %@", d);
NSData *data = [NSData dataWithBytes:[d bytes] length:48];
NSLog(@"data: %@", data); 
```

名为“d”的 NSData 返回 <723d6c67 6e267573 65726e61 6d653d64 61766964 77617473 6f6e3936 26706173 73776f72 643d736e 30307079 6f32>

称为“数据”的 NSData 返回 <723d6c67 6e267573 65726e61 6d653d64 61766964 77617473 6f6e3936 26706173 73776f72 643d736e 30307079 6f32_ ***>，其中 _***是 4 个随机字符（通常是数字）

我如何确保“数据”返回 <723d6c67 6e267573 65726e61 6d653d64 61766964 77617473 6f6e3936 26706173 73776f72 643d736e 30307079 6f320000> - 4 个随机字符？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T15:16:31.937

您想使用一个 NSMutableData，它是您从字符串返回的 NSData 中创建的，然后添加一些零：

```
NSMutableData *paddedData = [NSMutableData dataWithData:d];
[paddedData increaseLengthBy:4]; 
```

# hadoop - cdh3 客户端可与 apache hadoop 服务器 0.20.xx 互操作？

> ID：10871442
> 
> 赞同：1
> 
> 时间：2012-06-03T15:11:54.997
> 
> 标签：hadoop, cloudera

我们有一个`hadoop-core-0.20.2-cdh3u1.jar`基于 Java 的客户端。在运行 apache 分布式 0.20.xx 的服务器（集群）上工作是否安全？还是 cloudera 破坏了一些 apache API？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T12:58:10.963

可能是个坏主意。尝试使用 hadoop-core 版本`0.20.203.0`与带有 cdh3u1 的服务器一起使用客户端并得到：

```
org.apache.hadoop.ipc.RPC$VersionMismatch: 
Protocol org.apache.hadoop.hdfs.protocol.ClientProtocol version mismatch. (client = 61, server = 63) 
```

没试过反着...

# c++ - 理解复杂的函数定义

> ID：10871450
> 
> 赞同：0
> 
> 时间：2012-06-03T15:12:39.690
> 
> 标签：c++, definition

我有一个用 C++ 编写的复杂函数定义。这是我第一次遇到如此复杂的函数定义，我无法理解它的含义。

这里是

```
t_group& t_group::operator=(const t_group &a)
{

} 
```

具体来说，我需要知道什么

> 运算符=(const t_group &a)

意思是 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T15:19:51.340

这是细分：

```
t_group& 
```

该函数返回对 a 的引用`t_group`。

```
t_group:: 
```

该函数位于`t_group`命名空间中。因为`t_group`是 a 、 或 的名称`struct`，`union`所以`class`它是 的成员`t_group`。

```
operator= 
```

该函数是运算符的*重载*`=`。由于它是一种方法，因此对象是运算符的左侧`=`。

```
(const t_group &a) 
```

这是函数的参数：它是运算符的右侧`=`。这表示右侧是对 a 的`const`引用`t_group`，这意味着该函数不会改变`t_group`.

综合起来，这就是类的*复制赋值*操作`t_group`。它由如下代码调用：

```
t_group a, b;
b = a; 
```

后一行相当于`b.operator=(a);`.

PS 赋值运算符函数通常以`return *this;`. 这样您就可以`a = b = c`像常规`=`运算符一样链接分配（例如）。

# spring - 确定父母是否有一个或多个使用休眠的孩子

> ID：10871452
> 
> 赞同：0
> 
> 时间：2012-06-03T15:12:44.660
> 
> 标签：spring, hibernate

我有两个模型，**Purchase**和**Tag**。
购买可以有许多标签（一对多关系）。

退回所有具有一个或多个标签的购买的**最佳（有效/清洁/等）方式是什么？**（不必返回实际的标签实体）。

我目前正在使用购买表中的一列来确定它是否已被标记但想将其删除（请参阅 PurchaseDAO 以了解它已被使用）

***购买控制器***：

```
@RequestMapping(value = "purchases/tagged", method = RequestMethod.GET)
@ResponseBody
public final List<Purchase> getTagged()
{
    return RestPreconditions.checkNotNull(purchaseService.getTagged());
}

@RequestMapping(value = "purchases/pending", method = RequestMethod.GET)
@ResponseBody
public final List<Purchase> getPending()
{
    return RestPreconditions.checkNotNull(purchaseService.getPending());
} 
```

***购买服务***：

```
@Service
public class PurchaseService implements IPurchaseService
{
    @Autowired
    private IPurchaseDAO purchaseDAO;

    public PurchaseService()
    {

    }

    @Transactional
    public List<Purchase> getAll()
    {
        return purchaseDAO.findAll();
    }

    @Transactional
    public List<Purchase> getPending()
    {
        return purchaseDAO.getPending();
    }

    @Transactional
    public List<Purchase> getTagged()
    {
        return purchaseDAO.getTagged();
    }
} 
```

***购买DAO***：

```
@Repository
public class PurchaseDAO extends AbstractJpaDAO<Purchase> implements IPurchaseDAO {

    @PersistenceContext
    EntityManager entityManager;

    public PurchaseDAO() {
        setClazz(Purchase.class);
    }

    public  List<Purchase> getPending() {
        return entityManager.createQuery("from Purchase where tagged = 0")
                .getResultList();
    }

    public  List<Purchase> getTagged() {
        return entityManager.createQuery("from Purchase where tagged = 1")
                .getResultList();
    }
} 
```

我的 Purchase 和 Tag DAO 都扩展了以下***AbstractJpaDAO***：

```
public abstract class AbstractJpaDAO<T extends Serializable> implements
        IAbstractJpaDAO<T> {

    private Class<T> clazz;

    @PersistenceContext
    EntityManager entityManager;

    public void setClazz(final Class<T> clazzToSet) {
        this.clazz = clazzToSet;
    }

    public T findOne(final Long id) {
        return entityManager.find(clazz, id);
    }

    public List<T> findAll() {
        return entityManager.createQuery("from " + clazz.getName())
                .getResultList();
    }

    public void save(final T entity) {
        entityManager.persist(entity);
    }
} 
```

谢谢

## JB 建议更新

将 PurchaseDAO getTagged() 更改为：

```
public  List<Purchase> getTagged() {
        return entityManager.createQuery("SELECT p FROM Puchase p INNER JOIN p.tags")
                .getResultList();
    } 
```

我收到以下错误：

```
TRACE [http-bio-8080-exec-3] o.s.w.c.s.AnnotationConfigWebApplicationContext [AbstractApplicationContext.java:322] Publishing event in Root WebApplicationContext: ServletRequestHandledEvent: url=[/PurchaseAPIServer/api/purchases/tagged]; client=[192.168.1.17]; method=[GET]; servlet=[PurchaseAPIServer]; session=[null]; user=[null]; time=[411ms]; status=[failed: org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.hql.ast.QuerySyntaxException: Puchase is not mapped [SELECT p FROM Puchase p JOIN p.tags tag]; nested exception is java.lang.IllegalArgumentException: org.hibernate.hql.ast.QuerySyntaxException: Puchase is not mapped [SELECT p FROM Puchase p JOIN p.tags tag]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:17:54.003

```
select p from Purchase p inner join p.tags 
```

内部连接只是使购买至少有一个标签。

# android - Mac osx 10.7 lion上的Android模拟器崩溃，导致内核恐慌

> ID：10871454
> 
> 赞同：5
> 
> 时间：2012-06-03T15:13:23.707
> 
> 标签：android

我正在使用带有基于英特尔 x86 的 2.3 版映像的 Android 模拟器，并在 Mac 10.7 lion 系统上进行开发。我还安装了英特尔硬件执行管理器，因此模拟器运行速度比正常速度快。然而，在使用模拟器时，它会随机崩溃，导致内核恐慌。这种情况经常发生。任何关于我如何克服这个问题的线索！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T15:16:12.567

这是mac系统上android模拟器的一个错误。 [http://code.google.com/p/android/issues/detail?id=19099](http://code.google.com/p/android/issues/detail?id=19099)

# ruby-on-rails - 为什么设计超时？取参数？

> ID：10871459
> 
> 赞同：2
> 
> 时间：2012-06-03T15:13:41.343
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我正在尝试理解可**[超时模块的设计源代码](https://github.com/plataformatec/devise/blob/master/lib/devise/models/timeoutable.rb)。**我真的很困惑该`timedout?`方法发生了什么。

直观地说，您应该能够在`user.timedout?`没有任何参数的情况下调用，如果用户的会话超时，它将返回 true，否则返回 false。有人可以解释这个参数在做什么吗？

**编辑：好的，所以如果您***已经知道他们的最后一次访问时间*
，这种方法似乎只能检查用户是否超时。我想我的下一个问题是：检查其他用户是否超时的最干净的方法是什么？（不是当前用户）。也就是不带参数怎么按上面指定的方式调用呢？*`timedout?`*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:00:40.510

Devise 将使用 Warden 来存储最后一次请求时间（不是最后一个 signed_in_time）。见：[https ://github.com/plataformatec/devise/blob/master/lib/devise/hooks/timeoutable.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/hooks/timeoutable.rb)

因此，如果您想复制此功能，您需要将 last_request_time 存储在数据库中并随每个请求更新它（在 application_controller 中的 after_filter 中）。

一旦那里，您可以将此方法添加给用户，并使用它来委托设计超时？方法：

```
class User < ActiveRecord::Base
  devise :timeoutable, :trackable #etc

  def expired?
    valid_until = last_access_time + 30.minutes
    timedout?(valid_until)
  end

end 
```

那么如果你有一个用户：

```
user.expired? 
```*

# c# - c# 检查日期范围是否在间隔之间

> ID：10871462
> 
> 赞同：0
> 
> 时间：2012-06-03T15:13:55.343
> 
> 标签：c#, datetime, compare

我需要清醒的头脑来检查另一个间隔之间的日期范围是否为假。这是发生了什么：

```
DateTime[] dates = new DateTime[20];
dates[0] = Convert.ToDateTime(initial_date);
for (int i = 1; i <= 19; i++)
{
dates[i] = initial_date.AddYears(i);
} 
```

所以我有一个存储 20 个日期的数组。如果 initial_date = 1/20/2012 数组从 dates[0] = 1/20/2012 到 dates[19] = 1/20/2031 现在我想检查用户是否选择了两个日期，例如 1 /1/2013 和 1/1/2014 选择位于数组的第一个元素 (dates[0]) 和第二个 (dates[1]) 之间。至今：

```
DateTime a1 = Convert.ToDateTime(vtable.Rows[0][0]);
DateTime a2 = Convert.ToDateTime(vtable.Rows[vtable.Rows.Count - 1][0]);
DateTime start = DateTime.MinValue;
DateTime end = DateTime.MaxValue;
for (int i = 0; i < 20; i++)
            {
                if (a1.CompareTo(dates[i]) >= 0)
                {
                    start = dates[i];
                    for (int j = 19; j > 0 ; j--)
                    {
                        if (a2.CompareTo(dates[j]) >= 0)
                        {
                            end = dates[j]; 
                            break;
                        }
                    }
                    break;
                }
            } 
```

当用户选择仅位于数组的一个元素之间的日期范围时，这一直有效。例如，如果选择是 2012 年 1 月 30 日 - 2012 年 5 月 30 日，那么 start = date[0] 和 end = date[0] 我知道我可以简单地在末尾声明 end == unassigned 然后 end = start但我认为纠正算法比最后应用补丁更好非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:20:38.023

```
var rangeMax = dates.Max();
var rangeMin = dates.Min();

DateTime a1 = Convert.ToDateTime(vtable.Rows[0][0]);
DateTime a2 = Convert.ToDateTime(vtable.Rows[vtable.Rows.Count - 1][0]);

if ((a1 > rangeMin) && (a1 < rangeMax) && (a2 > rangeMin) && (a2 < rangeMax))
{
    //dates are in given range 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:35:05.783

将您的日期范围成对存储为从开始到结束，结束将是下一个开始 - 1 天。

使代码中的内容更加清晰。

# macos - 为什么 SIMBL 插件似乎不适用于 Lion 中的 TextEdit 和 Preview？

> ID：10871464
> 
> 赞同：1
> 
> 时间：2012-06-03T15:14:01.860
> 
> 标签：macos, cocoa, preview, textedit, simbl

我正在开发一个可以在任何应用程序中运行的 SIMBL 插件（我在 Lion 10.7.4 上）。它适用于大多数应用程序（包括 Finder、Safari 或终端等 Apple 应用程序），但 TextEdit 和 Preview 似乎表现不佳。我不确定它是否与情况相关，但是当我尝试使用我的插件启动 TextEdit 或 Preview 时出现此错误：

```
03/06/2012 16:14:02,096 SIMBL Agent: eventDidFail:'tvea' error:Error Domain=NSOSStatusErrorDomain Code=-1708 "The operation couldn’t be completed. (OSStatus error -1708.)" (the AppleEvent was not handled by any handler ) UserInfo=0x4009788e0 {ErrorNumber=-1708} userInfo:{
     ErrorNumber = -1708;
} 
```

我还注意到 SizeWell 开发人员在使用 TextEdit 和 Preview 时遇到了问题（请参阅[他们的发行说明](http://www.sizewellplugin.com/#releasenotes)），但找不到任何无法正常工作的原因。对此有任何想法吗？

如果您需要更多信息，请随时询问！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T16:07:33.877

这几乎肯定与 TextEdit 和 Preview 都是沙盒的事实有关。看起来这是 SIMBL 的一个已知限制，并且一些扩展，例如 Afloat，已经解决了它：http: [//infinite-labs.net/kb/afloat/af-lion.html](http://infinite-labs.net/kb/afloat/af-lion.html)

# php - 防止没有 .htaccess 的所有文件的热链接

> ID：10871467
> 
> 赞同：-1
> 
> 时间：2012-06-03T15:14:29.350
> 
> 标签：php, .htaccess, cgi

嗯，我有一个小问题。我基本上拥有一个文件共享网站，并且在人们热链接文件方面遇到问题

我试过 .htaccess 没有运气，因为我想将热链接重定向到实际文件所在的下载页面。

我见过其他网站这样做，但我很困惑他们是如何做到的。

有些人使用 cgi-bin 脚本，但我同样不确定这是如何完成的。

有谁知道最好的做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:18:57.903

您可以编写一个脚本来读取网络服务器上的文件并将数据输出到客户端。在该脚本中，您可以通过检查`$_SERVER['HTTP_REFERER']`值来验证来源。

输出文件的小例子：

```
<?php
$filename = "file";
$filesize = filesize($filename);
$handle = fopen($filename, "r");
$data = fread($handle, $filesize);
header("Content-type: application/zip");
header("Content-length: " . $filesize);
header("Content-disposition: inline; filename=" . $filename);
echo $data;
fclose($handle);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:19:21.810

很简单。永远不要让用户看到实际文件的实际路径。相反，通过 php 脚本将其提供给他们，并检查会话以确保他们在提供文件之前完成了询问必要的步骤。

# mysql - 无法使用 MySql 运行代码优先迁移 - RenameColumn -

> ID：10871469
> 
> 赞同：0
> 
> 时间：2012-06-03T15:14:41.990
> 
> 标签：mysql, entity-framework, ef-code-first, entity-framework-4.3, entity-framework-migrations

我有一个问题，我无法在网络上找到答案。

我正在将 CodeFirst EF 4.3.1 迁移与 MySQL 一起使用。

我的 MySQL 提供商是 Devart。

对现有数据库运行 Add-Migration 后，我得到以下代码：

```
public partial class ChangeSet_1231 : DbMigration
{
    public override void Up()
    {
        RenameColumn(table: "RW_TTaskInstanceProperties", name: "TaskInstance_TaskInstanceId", newName: "TaskInstanceId");
    }

    public override void Down()
    {
        RenameColumn(table: "RW_TTaskInstanceProperties", name: "TaskInstanceId", newName: "TaskInstance_TaskInstanceId");
    }
} 
```

运行 Update-Database 会导致以下错误：

```
PM> Update-Database -verbose –startupprojectname "RTDataAccess"
Using NuGet project 'RTDataAccess'.
Target database is: 'rsruntime' (DataSource: localhost, Provider: Devart.Data.MySql, Origin: Explicit).
Applying explicit migrations: [201205311312361_ChangeSet_1231].
Applying explicit migration: 201205311312361_ChangeSet_1231.
ALTER TABLE RW_TTaskInstanceProperties RENAME COLUMN TaskInstance_TaskInstanceId TO TaskInstanceId

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'COLUMN TaskInstance_TaskInstanceId TO TaskInstanceId' at line 2 
```

通过查看错误详细信息，我看到 RenameColumn 被转换为 MsSql 命令，而不是 MySql 命令，所以难怪它会报告语法错误。

任何想法如何解决它？

我知道我可以使用 Update-Database -script，然后编辑脚本以适应 MySql 并运行它，但我更喜欢让 Update-Database 命令工作......

谢谢。

回答拉迪斯拉夫的问题：

是的，我为 MySQL 迁移注册了 Devart 的 SQL 生成器。我的配置类看起来像这样：

```
using Devart.Data.MySql.Entity.Configuration;
using Devart.Data.MySql.Entity.Migrations;

internal sealed class Configuration : DbMigrationsConfiguration<RTDataAccess.RTContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;

        MySqlEntityProviderConfig.Instance.Workarounds.IgnoreSchemaName = true;
        var connectionInfo = MySqlConnectionInfo.CreateConnection("Server=xxxx;Port=yyyy;Database=rsruntime;Uid=zzzz;Pwd=wwww;charset=utf8;");
        this.TargetDatabase = connectionInfo;
        this.SetSqlGenerator(connectionInfo.GetInvariantName(), new MySqlEntityMigrationSqlGenerator());
    }

    protected override void Seed(RTDataAccess.RTContext context)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T05:30:07.100

该问题已由 Devart 解决。

以下链接中的详细信息：

[http://forums.devart.com/viewtopic.php?f=2&t=24250](http://forums.devart.com/viewtopic.php?f=2&t=24250)

[http://www.devart.com/dotconnect/mysql/download.html](http://www.devart.com/dotconnect/mysql/download.html)

# object - Corona SDK 如何删除一个对象？

> ID：10871473
> 
> 赞同：1
> 
> 时间：2012-06-03T15:16:10.647
> 
> 标签：object, lua, coronasdk, metatable

好吧，我在从游戏中删除对象时遇到了一些麻烦，问题是我有一个玩家类（由元表组成），在里面我有一个名为 sprite 的变量，它保存我将在屏幕上绘制的图像精灵的地址，所以当我创建对象时，我不会立即绘制精灵，因为我做了一个函数绘制（这只是为了解释我所拥有的）。在game.lua中，我通过调用该函数来绘制玩家，然后我想删除我的玩家实例（这样屏幕上的图像也会消失）......就是这样，我尝试了player：removeSelf（），显示。 remove(player)，其中一个向我抛出了一个错误（尝试调用字段'removeSelf'（一个 nil 值）），另一个运行正常，但它并没有改变玩家仍然在那里的事实（我可以访问它的功能和精灵仍然显示在屏幕上.. . 好吧，这是我的代码：

```
**********************************************************
game.lua:
**********************************************************

---------------------------------------------------------------------------------
-- BEGINNING OF YOUR IMPLEMENTATION
---------------------------------------------------------------------------------

local _W, _H = display.contentWidth * 0.5, display.contentHeight * 0.5
local background, player, land
local spriteSizeX, spriteSizeY = 60,70

-- Called when the scene's view does not exist:
function scene:createScene( event )
local group = self.view
local BG = display.newGroup()
local stage = display.newGroup()
local foreground = display.newGroup()

group:insert(BG)
group:insert(stage)
group:insert(foreground)

-----------------------------------------------------------------------------

--  CREATE display objects and add them to 'group' here.
--  Example use-case: Restore 'group' from previously saved state.

-----------------------------------------------------------------------------

background = display.newImage("assets/backgrounds/oliveBackground.png", true)
background.x, background.y = _W, _H
BG:insert( background )

player = playerClass.new()
player:draw(15,57.5,foreground)
--player:movePlayer(300,140)

terrain = {}
local m,j = 0,0

for i = 1, 16 do
local l = 1
for k = 3, 10 do
land = landClass.new({posx = i, posy = k})
table.insert(terrain, land)
m = m +1
terrain[m]:draw( spriteSizeX/4 + ((spriteSizeX/2) * j), spriteSizeY/4 + ((spriteSizeY/2) * l) + 5, stage)
l = l + 1
end
j = j+1
end

-- remove an asset doesn't work
--display.remove(terrain[1]:getSprite())
--terrain[1].removeSelf()
-- terrain[1] = nil
player:destroy()

end

**********************************************************
player.lua:
**********************************************************

-- player class

local player = {}
local player_mt = { __index = player }

--[[
-- attributes
local sprite, coins, speed
]]--

function player.new()   -- constructor

local newPlayer = {
sprite = "assets/char/miner.png",
coins = 1000,
speed = 1
}

return setmetatable( newPlayer, player_mt )

end

-- local function, works only when called from inside this class
local function getName()
-- print("")
end

function player:draw(x,y,group)
sprite = display.newImage(self.sprite)
sprite.x, sprite.y = x, y
sprite.xScale, sprite.yScale = 0.5, 0.5
group:insert(sprite)
end

function player:movePlayer(posx,posy)
transition.to(sprite, { x = posx, y = posy, time=500, delay=0, alpha=1.0 })
end

function player:destroy()
-- none of them work
-- self.sprite = nil
-- self.sprite.removeSelf()
end

return player 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T16:24:12.643

使用 display.newImage 创建精灵后，您没有将其存储在实例中。self.sprite 只有字符串值“assets/char/miner.png”

在您的绘图功能中添加

```
self.spriteObject = sprite 
```

在你的销毁功能中，

```
self.spriteObject:removeSelf() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T14:10:44.360

您可以对相关对象使用以下功能之一：

*   `removeSelf()`
*   `destroy()`

# mysql - MySQL 1066：即使我定义了表别名，也不是唯一的表/别名错误

> ID：10871476
> 
> 赞同：0
> 
> 时间：2012-06-03T15:16:22.243
> 
> 标签：mysql, sql, mysql-5.1, mysql-error-1066

我的 Sql 查询是

```
Select a.sum_total FROM
OneWayNetTransactionRes a
LEFT OUTER JOIN
OneWayNetTransactionRes b
ON
a,frm_id = b.to_id
AND a.to_id = b.frm_id 
```

哪里`OneWayNetTransactionRes`有风景。

```
CREATE VIEW `OneWayNetTransactionRes` AS
SELECT frm_id, to_id, sum(amount) total_amount
FROM TransactionResolution
GROUP BY frm_id, to_id 
```

然而我得到了错误

```
1066: Not unique table/alias: 'b' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:17:34.173

使用 a`.`代替`,`：

```
ON a.frm_id = b.to_id 
```

代替

```
ON a,frm_id = b.to_id 
```

# python - 解码/编码问题

> ID：10871477
> 
> 赞同：0
> 
> 时间：2012-06-03T15:16:27.340
> 
> 标签：python, unicode, encoding

我目前在 Linux (Ubuntu) 下的编码/编码存在严重问题。我以前从来不需要处理这个问题，所以我不知道为什么这实际上不起作用！

我正在从*/usr/share/applications/*`*.desktop`解析文件并提取通过 HTTPServer 显示在 Web 浏览器中的信息。我正在使用模板。*`jinja2`*

 *首先，我接到`UnicodeDecodeError`的电话`jinja2.Template.render()`中说

```
utf-8 cannot decode character XXX at position YY [...] 
```

因此，我使来自我的`appfind`-module（解析`*.desktop`文件）的所有值都只返回 unicode 字符串。

到目前为止，这个地方的问题已经解决了，但是在某些时候，我正在将一个函数返回的字符串写入`BaseHTTPServer.BaseHTTTPRequestHandler.wfile`插槽，无论我使用什么编码，我都无法修复这个错误。

此时，写入的字符串`wfile`来自`jinja2.Template.render()`afaik，返回一个unicode对象。

奇怪的是，它可以在我的*Ubuntu 12.04 LTS*上运行，但不能在我朋友的*Ubuntu 11.04 LTS*上运行。然而，这可能不是原因。他有更多的应用程序，也许他们确实在他们的`*.desktop`文件中使用了引发错误的编码。

但是，我正确检查了`*.desktop`文件中的编码：

```
data = dict(parser.items('Desktop Entry'))

try:
    encoding = data.get('encoding', 'utf-8')
    result = {
        'name':       data['name'].decode(encoding),
        'exec':       DKENTRY_EXECREPL.sub('', data['exec']).decode(encoding),
        'type':       data['type'].decode(encoding),
        'version':    float(data.get('version', 1.0)),
        'encoding':   encoding,
        'comment':    data.get('comment', '').decode(encoding) or None,
        'categories': _filter_bool(data.get('categories', '').
                                        decode(encoding).split(';')),
        'mimetypes':  _filter_bool(data.get('mimetype', '').
                                        decode(encoding).split(';')),
    }

# ... 
```

有人可以告诉我如何解决这个错误吗？我已经阅读了关于我应该`unicode()`始终使用的 SO 的答案，但是实施起来会非常痛苦，而且我认为它不会在写入时解决问题`wfile`？

谢谢，
尼克拉斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:59:34.123

这可能很明显，但无论如何：wfile 是一个普通的字节流：写入的所有内容在写入时都必须是 unicode.encode():ed。

阅读 OP，我不清楚到底发生了什么。但是，有一些技巧可能对您有所帮助，我发现这些技巧有助于调试编码问题。如果这是你早就超越的东西，我提前道歉。

*   `cat -v`在文件上将所有非 ascii 字符输出为“^X”，这是我发现的唯一一种确定文件真正具有什么编码的万无一失的方法。UTF-8 非 ascii 字符是多字节的。这意味着它们将是多个 '^'-entry by 的序列`cat -v`。

*   根据我的经验，Shell 环境（LC_ALL 等）是导致问题的最常见原因。确保您的系统具有 UTF-8 和例如 latin-1 可用的语言环境。**始终**将您的 LC_ALL 设置为明确命名编码的语言环境，例如`LC_ALL=sv_SE.iso88591`.

*   在 bash 和 zsh 中，您可以运行对该命令进行特定环境更改的命令，如下所示：

    ```
    $ LC_ALL=sv_SE.utf8 python ./foo.py 
    ```

    这使得测试比必须导出不同的语言环境容易得多，而且您不会污染外壳。

*   不要假设您在内部有 unicode 字符串。编写断言语句来验证字符串是否为 unicode。

    ```
    assert isinstance(foo, unicode) 
    ```

*   学习识别您正在使用的编码中常见字符的损坏/错误表示版本。例如，'\xe4' 是 latin-1 的分音符号，而 'Ã¤' 是组成分音符号的两个 UTF-8 字节，错误地用 latin-1 表示。我发现了解这种 go​​rp 可以大大减少调试编码问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:50:30.033

您需要对字节字符串和 Unicode 字符串采取严格的方法。这解释了一切： [实用的 Unicode，或者，我如何停止痛苦？](http://nedbatchelder.com/text/unipain.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:44:20.340

默认情况下，当 python 遇到 unicde 的编码问题时，它会引发错误。但是，可以修改此行为，例如错误是预期的还是不重要的。

假设您正在两个作为 ascii 超集的 unicode 页面之间进行转换。两者具有大部分相同的字符，但没有一一对应。因此，您可能希望忽略错误。

为此，请使用`errors`编码函数中的变量。

```
mystring = u'This is a test'
print mystring.encode('utf-8', 'ignore')
print mystring.encode('utf-8', 'replace')
print mystring.encode('utf-8', 'xmlcharrefreplace')
print mystring.encode('utf-8', 'backslashreplace') 
```

如果在读/写时使用了错误的编码，则 unicode 会出现很多问题。确保在获得 unicode 字符串后，将其转换为[jinja2 所需的 unicode](http://jinja.pocoo.org/docs/api/#unicode)形式。

如果这没有帮助，您能否添加您看到的第二个错误，也许还有一个代码片段来澄清发生了什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T21:19:28.140

尝试在代码段中的所有出现中使用`.encode(encoding)`而不是。`.decode(encoding)`*

# java - JOGL 没有自动释放池

> ID：10871489
> 
> 赞同：6
> 
> 时间：2012-06-03T15:17:50.423
> 
> 标签：java, opengl, system, jogl, nsautoreleasepool

我试图将 JOGL 添加到我的项目中，经过长时间的搜索，我找到了解决方案。我将 jars 添加到我的构建路径中，Eclipse 可以识别它们。
我想测试它，所以从这里获取代码：[https](https://sites.google.com/site/justinscsstuff/jogl-tutorial-2) ://sites.google.com/site/justinscsstuff/jogl-tutorial-2并编译。
AWT 方式给了我这个结果：

```
2012-06-03 18:20:44.623 java[1481:903] [Java CocoaComponent compatibility mode]: Enabled
2012-06-03 18:20:44.626 java[1481:903] [Java CocoaComponent compatibility mode]: Setting timeout for SWT to 0.100000
2012-06-03 18:20:46.253 java[1481:903] *** __NSAutoreleaseNoPool(): Object 0x102034900 of class NSConcreteMapTableValueEnumerator autoreleased with no pool in place - just leaking
2012-06-03 18:20:46.259 java[1481:903] *** __NSAutoreleaseNoPool(): Object 0x10209e3f0 of class __NSCFDate autoreleased with no pool in place - just leaking
2012-06-03 18:20:46.259 java[1481:903] *** __NSAutoreleaseNoPool(): Object 0x10209cbd0 of class NSCFTimer autoreleased with no pool in place - just leaking
2012-06-03 18:20:46.301 java[1481:d703] *** __NSAutoreleaseNoPool(): Object 0x10015e990 of class NSCFNumber autoreleased with no pool in place - just leaking
2012-06-03 18:20:46.301 java[1481:d703] *** __NSAutoreleaseNoPool(): Object 0x100121720 of class NSConcreteValue autoreleased with no pool in place - just leaking
2012-06-03 18:20:46.302 java[1481:d703] *** __NSAutoreleaseNoPool(): Object 0x10011c2f0 of class NSCFNumber autoreleased with no pool in place - just leaking
2012-06-03 18:20:46.302 java[1481:d703] *** __NSAutoreleaseNoPool(): Object 0x1001ba750 of class NSConcreteValue autoreleased with no pool in place - just leaking
2012-06-03 18:20:46.302 java[1481:d703] *** __NSAutoreleaseNoPool(): Object 0x100157e70 of class NSCFDictionary autoreleased with no pool in place - just leaking 
```

我找不到其他有同样问题的人。我确实发现其他人有同样的错误，但原因不同。
NEWT 方式给了我一个白色方块，它“没有响应”，我必须强制停止它（Apple-key + alt + esc）。
我的光标变为等待光标。虽然它设计得很好，但我宁愿摆脱它​​。
我应该如何解决这个问题？我在 Mac 上使用 Eclipse。操作系统 10.6.8。

编辑：

多亏了克林特，前两行已经消失了，但它仍然在泄漏......

编辑2：

解决了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:12:57.117

如果你的类路径中有 swt.jar 并且没有使用它，你应该删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:33:55.913

我摆脱了错误，毕竟这很愚蠢。几天前我已经找到了解决方案：`-Djava.awt.headless=true`使用`java`终端命令进行设置。但是，我不知道如何在 Eclipse 中执行此操作，所以我尝试将其放入 Program Arguments 中，我现在意识到，这非常愚蠢。将它放入 JVM Arguments 帮助并解决了这个问题，我现在遇到了下一个问题。我希望这可以帮助其他有同样问题的人。

# python - 如何使用 MongoEngine 向 EmbeddedDocument 添加更多项目？

> ID：10871490
> 
> 赞同：0
> 
> 时间：2012-06-03T15:17:52.223
> 
> 标签：python, django, mongodb, mongoengine

我正在尝试检查是否已经存在具有当前日期的项目，如果没有，我将添加它。下面的代码没有提示任何错误，但它没有将任何内容保存到 MongoDB

```
if len(site.DaylyLog) != 0:
    print len(site.DaylyLog)
    print site.DaylyLog[-1]
    current_date_daylylog = site.DaylyLog[-1]['aggregate_date']
else:
    current_date_daylylog = ''

if current_date_daylylog == datetime.date.today():
    #update document
    print current_date_daylylog
    print "calculating averages"

    site.DaylyLog[-1].average_response_time = (site.DaylyLog[-1].average_response_time+record_uptime.response_time)/2
    site.DaylyLog[-1].average_uptime = (site.DaylyLog[-1].average_uptime+100)/2

    site.save()
else:
    print current_date_daylylog
    print "adding new uptime"

    print site.url
    aggregate_uptime = AggregatedUptime()
    aggregate_uptime.average_response_time = record_uptime.response_time
    aggregate_uptime.average_uptime = 100
    aggregate_uptime.total_downtime = 0
    aggregate_uptime.aggregate_date = datetime.date.today()

    print aggregate_uptime.aggregate_date
    print aggregate_uptime.average_response_time

    site.DaylyLog.append(aggregate_uptime)
    site.save()

    print site.DaylyLog[-1].aggregate_date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:49:51.947

正如我在上面的评论中提到的。我发布的代码没问题，但它引用了我在模型中更改的内容。这只是一个新手问题。:-)

旧模型是

```
class Checkr(Document):
 name = StringField()
 slug = SlugField()
 url = URLField()
 frequency = IntField()
 owner = IntField()
 start_date = DateTimeField()
 end_date = DateTimeField()
 current_response_time = FloatField()
 current_response_code = IntField()
 hourly_log = ListField(EmbeddedDocumentField(AggregatedUptime))
 dayly_log = ListField(EmbeddedDocumentField(AggregatedUptime))
 weekly_log = ListField(EmbeddedDocumentField(AggregatedUptime)) 
```

什么时候应该

```
class Checkr(Document):
 name = StringField()
 slug = SlugField()
 url = URLField()
 frequency = IntField()
 owner = IntField()
 start_date = DateTimeField()
 end_date = DateTimeField()
 current_response_time = FloatField()
 current_response_code = IntField()
 HourlyLog = ListField(EmbeddedDocumentField(AggregatedUptime))
 DaylyLog = ListField(EmbeddedDocumentField(AggregatedUptime))
 WeeklyLog = ListField(EmbeddedDocumentField(AggregatedUptime)) 
```

# token - 在 yacc 中跳过标记

> ID：10871496
> 
> 赞同：3
> 
> 时间：2012-06-03T15:18:30.007
> 
> 标签：token, yacc, skip

我想在我的 yacc 文件中有如下语法规则：

```
insert_statement: INSERT INTO NAME (any_token)* ';' 
```

我们可以跳过所有的标记，直到出现错误的给定标记，在 yacc 中如下所示：

```
stat: error ';' 
```

当没有错误时，是否有任何机制可以跳过 yacc 中的任意数量的字符？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T06:47:20.367

一段时间后，我可以通过以下方式解决我的问题，并想提及它，因为它会对某人有所帮助：

*   向 lex 添加一个标记定义，包括应该在跳过标记中的字符：

    **<*>[A-Za-z0-9_:.-]* { return SKIPPINGTOKS; }**

    （这将识别任何标记，如 a、1、hello、hello123 等）

*   然后根据需要将以下此类规则添加到 yacc 中：

    **insert_statement: INSERT INTO NAME skipping_portion ';'**

    **跳过部分：跳过 | 跳过部分跳过**

希望这可以帮助某人...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T23:30:45.243

我想你会想做这样的事情。它会跳过所有不是分号的标记。

```
insert_statement: INSERT INTO NAME discardable_tokens_or_epsilon ';' ;

discardable_tokens_or_epsilon:    discardable_tokens
                                | epsilon
                                ;

discardable_tokens:   discardable_tokens  discardable_token
                    | discardable_token
                    ;

discardable_token:   FOO 
                   | BAR
                   | BLETCH
                   ...et cetera... anything other than a semicolon
                   ; 

epsilon: ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:01:32.590

只需不要指定包含这些标记的生产规则，您想跳过。

# codeigniter - 如何获取并显示特定登录用户的数据库中的字段

> ID：10871497
> 
> 赞同：0
> 
> 时间：2012-06-03T15:18:36.917
> 
> 标签：codeigniter

我有一个“员工”表名，然后创建登录页面，我需要显示登录的用户个人资料。如何从 id 中选择特定用户。我正在关注此代码，但在数据库中显示所有用户配置文件。

```
function empAll()
{
    $q = $this->db->get('employee');

    if($q->num_rows()>0)
    {
        foreach ($q->result() as $rows)
        {
            $data[]=$rows;
        }

        return $data;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:40:22.013

您正在`get()`单独使用该方法，没有任何条件。这将返回所有列和所有行。如果您想要给定用户的记录，您可以使用`get_where()`：

```
$q = $this->db->get_where('employee', array('id' => $id)); 
```

如果你喜欢，你也可以使用`where()`：

```
$this->db->where('id', $id);
$q = $this->db->get('employee'); 
```

来源：[http ://codeigniter.com/user_guide/database/active_record.html#select](http://codeigniter.com/user_guide/database/active_record.html#select)

# sql-server - 为什么执行计划中有排序任务

> ID：10871498
> 
> 赞同：1
> 
> 时间：2012-06-03T15:18:38.457
> 
> 标签：sql-server

当我使用执行计划执行以下查询时。我可以看到“排序”是最昂贵的任务。但我没有在查询中使用任何排序选项。为什么会这样？在选择之前存在嵌套循环连接任务。另外请告诉我有关合并连接、散列连接和嵌套循环连接的信息。

![在此处输入图像描述](../Images/a2ea8ad40a3f2f5a3d873fc3c79d0bbf.png)

```
select
Ename from dbo.Employee e
where 
Salary>(
select AVG(Salary) from dbo.Employee where 
DeptId=e.DeptId 
group by DeptId) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T15:23:20.900

*它必须进行排序以确定每个 TerritoryID*哪些行的薪水较低- 所以排序是因为这种分区/分组。

您可以使用索引摆脱排序操作，例如：

```
CREATE INDEX d_s ON dbo.Employee(DeptId, Salary); 
```

但是您必须确定此查询的收益（在执行频率的背景下）是否证明了附加索引的合理性——这可能会影响您工作负载的其他部分。您将在某个时候为排序/分组付费。

同样，仅仅因为您的查询中的成本很高，并不意味着这是一个问题。这个查询慢吗？即使是一级方程式比赛也有一辆“慢速”赛车以最后一名完赛。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T16:08:27.417

在您的 SQL 查询中，您实际将数据排序到列上的组（Ename）排序可能是性能瓶颈，但您需要找出。如果排序确实导致性能问题，那么您可以按照 Aaaroon Bertrand 的建议将其移动到索引。

嵌套连接的原因是 SQLserver 实际上执行了 2 次查询以返回您的结果。

一个是写在子查询中的 Avg(Salary)，另一个是外部查询，它从 Employee Table 中选择 Ename，这是使用 Clustered index Scan 完成的。然后组合这两个查询以返回所需的结果。它基本上是将子查询中的每一行与满足谓词的外部查询中的每一行进行比较。

合并连接只有在连接列上有索引时才有可能。合并连接有时非常快，因为它们已经排序。

对于深入的解释，你可以通过下面的链接 [嵌套连接](http://blogs.msdn.com/b/craigfr/archive/2006/07/26/679319.aspx) [哈希连接](http://blogs.msdn.com/b/craigfr/archive/2006/08/10/687630.aspx) [合并连接](http://blogs.msdn.com/b/craigfr/archive/2006/08/03/merge-join.aspx)

# android - 如何更新我的 ContentProvider？

> ID：10871502
> 
> 赞同：0
> 
> 时间：2012-06-03T15:19:19.820
> 
> 标签：android, database, android-contentprovider

我正在使用 MOTODEV，并从 Motodev 创建我的 contentProvider。现在我想在我的表中添加一列。这个怎么做？

我尝试在我的 DbOpenHelper 中实现 onUpgrade() 但不起作用。

```
 String upgradeQuery = "ALTER TABLE [my_table] ADD COLUMN [my_column] TEXT;";
     if (oldVersion == 1 && newVersion == 2)
        db.execSQL(upgradeQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:44:32.100

我的应用程序中有那个确切的命令（最后的“;”字符除外）并且它有效，你记得在清单上将新版本设置为 2 吗？这是“版本代码”字段（“android:versionCode”）。

# java - 解决 2 个 jar 之间的类冲突

> ID：10871504
> 
> 赞同：0
> 
> 时间：2012-06-03T15:19:28.493
> 
> 标签：java, android, class, conflict

我的 Android 应用程序有问题。在我使用的 jar 中，有 android.jar 和 rt.jar。

在这两个 jar 中，都存在类 org.xml.sax.helpers.XMLReaderFactory。正在使用来自 android.jar 的类，但我想使用来自 rt.jar 的类。如何让我的项目选择我想要的课程？我不能只为这个特定的类做吗（这意味着在发生冲突的情况下并不总是会选择 rt.jar 中的类而不是 android.jar 中的类）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:26:22.837

没有直接的方法可以解决这个问题。您可以而且必须从一个二进制文件中删除该类。通过这样做，您违反了 LGPL 类型的许可证，但在 android 中，所有类都被构建到单个 apk 中，使得此类许可证在上下文中毫无意义。

或者，您可以[赋予构建系统的责任。](http://java.dzone.com/news/jarjar-solves-class-loading-co)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:30:19.987

试试这个，它对我有用

去

```
 Build Path --> select the JRE System Library --> Remove it.
    Select Add library --> Jre System Library --> default 
(i think default will be already selected) --> Ok 
```

# facebook-graph-api - 发布带有位置的状态更新

> ID：10871517
> 
> 赞同：3
> 
> 时间：2012-06-03T15:20:44.810
> 
> 标签：facebook-graph-api, location, coordinates, latitude-longitude

当您向 Facebook 发布定期状态更新时，它会跟踪您当前的位置并在时间旁边提供（附近的）城市。即：5 月 24 日*纽约市*附近。请注意，这**不是**登记入住。

我正在尝试做同样的事情，而不是搜索页面（地点）ID并签入。我试过[用 latitute 和 longitute 发布坐标](https://developers.facebook.com/tools/explorer?method=POST&path=me/feed&message=test&coordinates=%7B%22latitude%22%3a%2037.4163458217,%22longitude%22%3a%20-122.15198690595%7D)，但它没有显示附近的城市。

```
https://graph.facebook.com/me/feed

message=test
coordinates={"latitude": 37.4163458217, "longitude": -122.15198690595} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:55:01.920

请检查此网址 [https://developers.facebook.com/docs/reference/api/status/](https://developers.facebook.com/docs/reference/api/status/)

您必须将坐标作为名为 place 的对象传递，这将包含有关该地点的详细信息，有关地点对象的更多详细信息...

```
object containing id and name of Page associated with this location, and a location field containing geographic information such as latitude, longitude, country, and other fields (fields will vary based on geography and availability of information) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:28:39.160

我意识到这是一个老问题，但为了确认，通过应用程序发布只能让您使用地点 ID 标记地点。
请查看这些相关帖子 -
[https://developers.facebook.com/blog/post/2012/03/07/building-better-stories-with-location-and-friends/](https://developers.facebook.com/blog/post/2012/03/07/building-better-stories-with-location-and-friends/)
[https://developers.facebook.com/文档/opengraph/actions/#taggingplaces](https://developers.facebook.com/docs/opengraph/actions/#taggingplaces)

# ruby - 黄瓜 - 缓存 step_definition.rb 文件？

> ID：10871520
> 
> 赞同：0
> 
> 时间：2012-06-03T15:21:43.250
> 
> 标签：ruby, selenium, rspec, cucumber

看起来黄瓜在运行之间缓存了 .rb 文件。我正在更新我的步骤定义，但我没有看到测试行为有任何变化。有什么办法可以阻止黄瓜缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:34:45.827

我重新启动了我的电脑，这似乎工作。很科学。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:48:56.703

您可以在每次构建后清理工作区，您可以为 Jenkins 中的每个作业进行配置，这将消除您的问题。当然，如果您使用的是 Jenkins。

# vb.net - 仅获取包含给定单词 VB2010.net 的文本行

> ID：10871523
> 
> 赞同：-1
> 
> 时间：2012-06-03T15:22:10.037
> 
> 标签：vb.net

我的网站上有一个文本文件，我通过 webclient.downloadstring 下载了整个字符串。

文本文件包含以下内容：

饼干，菜肴，糖果，（新行）返回，转发，刷新，（新行）邮件，媒体，静音，

这只是一个示例，它不是实际的 string ，但它可以用于帮助目的。

我想要的是我想下载整个字符串，找到包含用户在 a 中输入的单词的行，`textbox`将该行变成一个字符串，然后我想使用 string.split 作为分隔符“， " 并将字符串中的每个单词输出到`richtextbox`.

现在这是我使用的代码（出于隐私原因删除了一些字段）。

```
If TextBox1.TextLength > 0 Then
        words = web.DownloadString("webadress here")
        If words.Contains(TextBox1.Text) Then
            'retrieval code here
            Dim length As Integer = TextBox1.TextLength
            Dim word As String
            word = words.Substring(length + 1) // the plus 1 is for the ","
            Dim cred() As String
            cred = word.Split(",")
            RichTextBox1.Text = "Your word: " + cred(0) + vbCr + "Your other word: " + cred(1)
        Else
            MsgBox("Sorry, but we could not find the word you have entered", MsgBoxStyle.Critical)
        End If
    Else
        MsgBox("Please fill in an word", MsgBoxStyle.Critical)
    End If 
```

现在它可以工作并且没有错误，但它只适用于第 1 行，而不适用于第 2 行或第 3 行

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:44:32.543

Smi 的回答是正确的，但是由于您使用的是 VB，因此您需要在 vbNewLine 上进行拆分。\n 和 \r 用于 C#。我经常被它绊倒。

另一种方法是使用正则表达式。正则表达式匹配既可以找到您想要的单词，也可以在一个步骤中返回包含它的行。

下面是几乎没有测试过的样品。我不太清楚您的代码是否按照您所说的做，所以我根据您的描述即兴创作。

```
Imports System.Text.RegularExpressions

Public Class Form1

    Private Sub ButtonFind_Click(sender As System.Object, e As System.EventArgs) Handles ButtonFind.Click

        Dim downloadedString As String
        downloadedString = "cookies,dishes,candy," _
             & vbNewLine & "back,forward,refresh," _
             & vbNewLine & "mail,media,mute,"

        'Use the regular expression anchor characters (^$) to match a line that contains the given text.
        Dim wordToFind As String = TextBox1.Text & ","  'Include the comma that comes after each word to avoid partial matches.
        Dim pattern As String = "^.*" & wordToFind & ".*$"
        Dim rx As Regex = New Regex(pattern, RegexOptions.Multiline + RegexOptions.IgnoreCase)

        Dim M As Match = rx.Match(downloadedString)
        'M will either be Match.Empty (no matching word was found), 
        'or it will be the matching line.

        If M IsNot Match.Empty Then
            Dim words() As String = M.Value.Split(","c)
            RichTextBox1.Clear()
            For Each word As String In words
                If Not String.IsNullOrEmpty(word) Then
                    RichTextBox1.AppendText(word & vbNewLine)
                End If
            Next
        Else
            RichTextBox1.Text = "No match found."
        End If

    End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:42:31.610

这是因为字符串`words`还包含您似乎在代码中省略的换行符。您应该首先`words`使用分隔符`\n`（或`\r\n`，取决于平台）进行拆分，如下所示：

```
Dim lines() As String = words.Split("\n") 
```

之后，你有一个字符串数组，每个元素代表一行。像这样循环它：

```
For Each line As String In lines
    If line.Contains(TextBox1.Text) Then
        'retrieval code here
    End If
Next 
```

# c# - C# 中的“未处理 NullReferenceException”

> ID：10871524
> 
> 赞同：-1
> 
> 时间：2012-06-03T15:22:22.253
> 
> 标签：c#, nullreferenceexception, unhandled

我在这一行的代码中有一个 nullreferenceexception 错误：

```
public bool BoundingVolumeIsInView(BoundingSphere sphere)
    {
        **return (Frustum.Contains(sphere) != ContainmentType.Disjoint);**
    } 
```

请告诉我我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:25:48.287

`Frustum`大概是`null`。使用调试器并检查它。你可以做这样的事情来防止空指针异常

```
if(Frustum != null)
    return (Frustum.Contains(sphere) != ContainmentType.Disjoint);
return false; 
```

# string - R：拆分数字字符串

> ID：10871525
> 
> 赞同：3
> 
> 时间：2012-06-03T15:22:23.580
> 
> 标签：string, r, strsplit

我正在尝试拆分 40 位的数字字符串（即拆分`123456789123456789123456789`为`1 2 3 4`等）

不幸的是`strsplit`，由于它需要字符而不起作用，并且使用转换字符串`as.character`不起作用，因为它很长，并且 R 会自动切断长数字的小数（最多为 22 位小数）。因此，我最终得到`"1.2345e+35"`一个字符串，而不是完整的数字。

是否有 的数字变体`strsplit`或解决小数截止问题的方法？我似乎无法在 stackoverflow 上找到答案，但如果之前已经回答过，我深表歉意。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T22:20:04.900

如果 R 正在计算数字，我不知道解决方案。如果数字在数据文件中，我认为下面的代码可能有效。虽然，如果数字在数据文件中，可能会有更简单的解决方案。

```
a1 <- read.table("c:/users/Mark W Miller/simple R programs/long_number.txt", colClasses = 'character')

# a1 <- c('1234567891234567891234567891234567891234') ;

a1 <- as.character(a1) ;
a2 <- strsplit(a1, "") ;
a3 <- unlist(a2) ;
a4 <- as.vector(as.numeric(a3)) ;
a4
# [1] 1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9 1 2 3 4 
```

编辑

我意识到我可能不明白这个问题，我的回答可能很愚蠢。不过，如果您有一个包含非常长数字的完整数据集，您可以使用下面的代码将它们全部拆分。请注意，文件“three_long_numbers.txt”中没有引号，数据以数字开头：

```
a1 <- read.table("c:/users/Mark W Miller/simple R programs/three_long_numbers.txt", colClasses = 'character')
a1

#      V1                                        
# [1,] "1234567891234567891234567891234567891234"
# [2,] "1888678912345678912345678912345678912388"
# [3,] "1234999891234567891234567891234567891239"

# a1 <- matrix(c(
# "1234567891234567891234567891234567891234",
# "1888678912345678912345678912345678912388",
# "1234999891234567891234567891234567891239"), nrow=3, byrow=T)

a1 <- as.matrix(a1) ;
a2 <- strsplit(a1, "") ;
a3 <- unlist(a2) ;
a3 <- as.numeric(a3) ;
a4 <- matrix(a3, nrow=dim(a1)[1], byrow=T)
a4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-18T21:44:30.977

您可以简单地执行此操作以拆分为数字向量：

```
s <- "123456789123456789123456789"
as.numeric(strsplit(s,"")[[1]])

# [1] 1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9 
```

或者，如果您希望将它们拆分为字符向量：

```
strsplit(s,"")[[1]]

# [1] "1" "2" "3" "4" "5" "6" "7" "8" "9" "1" "2" "3" "4" "5" "6" "7" "8" 
# "9" "1" "2" "3" "4" "5" "6"
# [25] "7" "8" "9" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-23T20:44:01.397

这是另一种似乎比我一年前的回答更直接的方法：

拆分单个向量：

```
a1 <- c('1234567891234567891234567891234567891234')
a2 <- read.fwf(textConnection(a1), widths=rep(1, nchar(a1)), colClasses = 'numeric', header=FALSE)
a2
  V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20 V21 V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38 V39 V40
1  1  2  3  4  5  6  7  8  9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4 
```

读取包含以下三个等长长数的文件：

```
# 1234567891234567891234567891234567891234
# 1888678912345678912345678912345678912388
# 1234999891234567891234567891234567891239

a1 <- read.table("c:/users/mmiller21/simple R programs/three_long_numbers.txt", colClasses = 'character', header = FALSE)
a2 <- read.fwf("c:/users/mmiller21/simple R programs/three_long_numbers.txt", widths=rep(1, max(nchar(a1$V1))), colClasses = 'numeric', header=FALSE)
a2

  V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20 V21 V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38 V39 V40
1  1  2  3  4  5  6  7  8  9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4
2  1  8  8  8  6  7  8  9  1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   8   8
3  1  2  3  4  9  9  9  8  9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   9 
```

读取包含以下三个长度不等的长数的文件：

```
# 1234567891234567891234567891234567891234
# 188867891234567891234567891234567891238
# 12349998912345678912345678912345678912

a1 <- read.table("c:/users/mmiller21/simple R programs/three_long_numbersb.txt", colClasses = 'character', header = FALSE)
a2 <- read.fwf("c:/users/mmiller21/simple R programs/three_long_numbersb.txt", widths=rep(1, max(nchar(a1$V1))), colClasses = 'numeric', header=FALSE)
a2

  V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20 V21 V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38 V39 V40
1  1  2  3  4  5  6  7  8  9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4
2  1  8  8  8  6  7  8  9  1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   8  NA
3  1  2  3  4  9  9  9  8  9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2  NA  NA 
```

这是在包含多列的数据文件中拆分一列长数字的代码。在此示例中，第 2 列中的每个数字具有相同的长度：

```
# -10 1234567891234567891234567891234567891234 -100
# -20 1888678912345678912345678912345678912388 -200
# -30 1234999891234567891234567891234567891239 -300

a1 <- read.table("c:/users/mark w miller/simple R programs/three_long_numbers_Oct25_2013.txt", colClasses = c('numeric', 'character', 'numeric'), header = FALSE)
a2 <- read.fwf(textConnection(a1$V2), widths=rep(1, nchar(a1$V2)[1]), colClasses = 'numeric', header=FALSE)
  V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20 V21 V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38 V39 V40
1  1  2  3  4  5  6  7  8  9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4
2  1  8  8  8  6  7  8  9  1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   8   8
3  1  2  3  4  9  9  9  8  9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   4   5   6   7   8   9   1   2   3   9 
```

# c# - asp.net ListView 属性

> ID：10871528
> 
> 赞同：0
> 
> 时间：2012-06-03T15:22:58.313
> 
> 标签：c#, asp.net, listview

我有一个 asp:listView，它显示一些 IEnumerable 对象，这些对象由数据库中的存储过程提供。

如何在按钮的帮助下删除每个条目？即：如果您单击一行，您可以选择删除它。

在选项中，Editing、Inserting、Deleting 是灰色的，不能选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:37:08.110

我认为它们可能会变灰，因为您没有将列表视图直接连接到数据库。您应该能够从列表视图中获取选定的项目（或多个项目），如果它们在属性中存储了某种 ID 字段，您可以从对象供应商中删除它，调用 delete 到数据库，然后从列表视图中删除它.

# ruby-on-rails - Ruby on Rails 运行非常缓慢（每个命令 5-10 分钟）

> ID：10871529
> 
> 赞同：0
> 
> 时间：2012-06-03T15:23:04.730
> 
> 标签：ruby-on-rails, ruby, performance

我已经开始使用[http://ruby.railstutorial.org](http://ruby.railstutorial.org)自学 Rails 。我已经使用 Railsdownloader 设置了一个环境，在 windows 中使用了 gitbash 和 vim

在我看来，命令反应太慢了。几乎任何命令都需要 3-10 分钟。处理 NEW、SERVER 或 SCAFFOLD 命令可能需要 15 分钟。

我曾尝试寻找此类问题。它到处都在说 Ruby，尤其是 Rails 很慢，但这似乎完全不合理，我还没有看到其他人的 Rails 在构建 Rails 应用程序时工作如此缓慢的证据。

我在一台不是最先进的计算机上运行它，但也不是一台糟糕的计算机。Moreso Rails 不会占用所有可用的计算能力。

如果有人能帮我解决这个问题（或者说这是正常的，Rails 永远需要），我会很高兴非常感谢你，Ari

感谢您的评论，更新：我的背景几乎降到了 0 (4%cpu)（i3 2*2.4GHZ 3 GB 捕获）命令 Rails new sample 使用约 50% CPU 平均耗时 1:04 分钟。示例中的命令 Rails S 花费了 5:14 分钟，平均使用了约 60% 的 CPU（直到 localhost 显示标准欢迎页面）这是一个完全空的应用程序，只有默认值，没有在后台运行。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T04:24:51.343

Windows 上的 RoR (3.2.9) 非常慢。Windows 主机上的 Linux 虚拟机同样慢。

开发 RoR 的唯一方法是在 Linux 独立机器上。我对那些在这些问题上挣扎的人表示哀悼。

# linux - Linux inotify 可以用于打开的文件句柄吗？

> ID：10871531
> 
> 赞同：4
> 
> 时间：2012-06-03T15:23:15.177
> 
> 标签：linux, filehandle, inotify

我熟悉如何使用`inotify`来监视目录中命名文件的更改，但我目前想知道是否可以使用它来监视仅由打开的文件句柄知道的文件的修改。这样的事情可能吗？

`inotify_add_watch`记录为仅采用路径名，我看不到任何其他功能可以添加此类手表。

如果做不到这一点，有什么方法可以获取打开的文件句柄并将其转换回路径名，以便我可以将其传递给`inotify`？

编辑：实际上它并不一定是 inotify，我只是在寻找一种机制，以便在常规文件被附加或修改时得到通知——想想`tail -f`和类似的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:52:06.040

您可以使用“/proc/x/fd/y”作为 inotify_add_watch 的路径名，其中 x 是您的进程 ID，y 是文件句柄 ID。

# c - 从 C 中的 str 中删除子字符串的更简洁方法

> ID：10871538
> 
> 赞同：4
> 
> 时间：2012-06-03T15:23:53.250
> 
> 标签：c, string, substring, memmove

我有以下字符串`ID is a sample string remove to /0.10`，我想得到以下结果：`ID/0.10`。

这就是我想出的。但是，我正在寻找一种更清洁/更好的方式来做到这一点。

```
#include <stdio.h>
#include <string.h>

int main ()
{
    char str[] = "ID is a sample string remove to /0.10";
    char *a = strstr(str, "ID");
    char *b = strrchr (str, '/');
    if (a == NULL)
        return 0;
    if (b == NULL)
        return 0;

    int p1 = a-str+2;
    int p2 = b-str;
    int remL = p2 - p1;
    int until = (strlen(str) - p1 - remL) +1;

    memmove (str+p1, str+(p1+remL), until);
    printf ("%s\n",str);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T15:34:40.303

确定后`a`，`b`您可以简化`memmove`如下：

```
char str[] = "ID is a sample string remove to /0.10";
char *a = strstr(str, "ID");
char *b = strrchr (str, '/');
if ((a == NULL) || (b == NULL) || (b < a))
    return 0;

memmove(a+2, b, strlen(b)+1); 
```

您对字符串长度所做的计算并不是真正必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:35:19.293

```
#include <stdio.h>
#include <string.h>

int main ()
{
 char str[] = "ID is a sample string remove to /0.10";
 char *a = strstr(str, "ID");
 char *b = strrchr (str, '/');
 if (a == NULL || b == NULL)
    return 0;
 int dist = b - a; 
 if (dist <= 0) return 0;  // aware "/ ID"

 a += 2;
 while (*a ++ = *b ++);

 printf ("%s\n",str);

 return 0;
} 
```

或者，如果您喜欢非常密集的版本

```
 char str[] = "ID is a sample string remove to /0.10";
 char *a = strstr(str, "ID");
 char *b = strrchr (str, '/');
 if (a == NULL || b < a) return 0; // no need to test b against NULL, implied with <
 a ++;
 while (*(++ a) = *b ++); 
```

# php - Opencart 结帐我的 sql 错误

> ID：10871539
> 
> 赞同：1
> 
> 时间：2012-06-03T15:24:15.370
> 
> 标签：php, mysql, database, paypal, opencart

嗨，每当我们使用 bussoc paypal 快速结帐选项时.. 输入 paypal 帐户登录和付款继续按钮后，会出现一条带有 mysql 服务器错误的消息，即使客户在 paypal 付款后回来时也会出现此消息

> 注意：错误，您的 SQL 语法有错误，请检查与您的 MYSQL 服务器版本相对应的手册，以获取正确的语法，以便在第 1 行的订单附近使用 SET customer_id='27' WHERE order_id='279'
> 
> 错误号 1064
> 
> UPDATE order SET customer_id='27'WHERE order_id='279' in home/public_html/site/system/database/mysql.php line 49 这是查询。那么它需要改变的地方呢？

```
<?php
final class MySQL {
private $connection;

public function __construct($hostname, $username, $password, $database) {
    if (!$this->connection = mysql_connect($hostname, $username, $password)) {
        exit('Error: Could not make a database connection using ' . $username . '@' . $hostname);
    }

    if (!mysql_select_db($database, $this->connection)) {
        exit('Error: Could not connect to database ' . $database);
    }

    mysql_query("SET NAMES 'utf8'", $this->connection);
    mysql_query("SET CHARACTER SET utf8", $this->connection);
    mysql_query("SET CHARACTER_SET_CONNECTION=utf8", $this->connection);
    mysql_query("SET SQL_MODE = ''", $this->connection);
}

public function query($sql) {
    $resource = mysql_query($sql, $this->connection);

    if ($resource) {
        if (is_resource($resource)) {
            $i = 0;

            $data = array();

            while ($result = mysql_fetch_assoc($resource)) {
                $data[$i] = $result;

                $i++;
            }

            mysql_free_result($resource);

            $query = new stdClass();
            $query->row = isset($data[0]) ? $data[0] : array();
            $query->rows = $data;
            $query->num_rows = $i;

            unset($data);

            return $query;  
        } else {
            return true;
        }
    } else {
        trigger_error('Error: ' . mysql_error($this->connection) . '<br />Error No: ' . mysql_errno($this->connection) . '<br />' . $sql);
        exit();
    }
}

public function escape($value) {
    return mysql_real_escape_string($value, $this->connection);
}

public function countAffected() {
    return mysql_affected_rows($this->connection);
}

public function getLastId() {
    return mysql_insert_id($this->connection);
}   

public function __destruct() {
    mysql_close($this->connection);
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-17T06:18:53.153

```
update `oc_order` 
SET customer_id='27' 
WHERE order_id='279' 
```

你已经为表名添加了前缀。这个前缀是在你安装 opencart 时添加的。

默认情况下它是'oc_'，如果你改变它然后用那个替换它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:30:44.260

您的表名是`order`。那是 MySQL 中的保留关键字。你需要用反引号来逃避它

```
update `order` 
SET customer_id='27' 
WHERE order_id='279' 
```

# javascript - 使用传递给函数的文本来调用 javascript 函数

> ID：10871541
> 
> 赞同：0
> 
> 时间：2012-06-03T15:24:33.983
> 
> 标签：javascript, object, eval

我试图弄清楚如何使用 jquery 从 div id 中取出的文本调用 javascript 函数，如下所示：

```
$('#selector').attr('id'); 
```

返回的 id 是一个文本对象，我想用它来调用同名的 javascript 对象。基本上，我在日历中有一个约会，一组对象在后台保存了各种变量，例如原因、时间、位置等。这些对象是使用这样的自定义构造函数创建的。

```
function appt(id,...){
  this.id;
  etc...
 }
 var appt12 = new appt(id,...); 
```

然后，我希望能够按照 var id = appt12.id 的方式将其称为对象。

我发现我可以使用 eval 来做到这一点，但是在这个论坛上似乎有很多关于 eval 的使用的争论。我担心它可能会很慢，在安全方面它只会在浏览器中被调用，所以大部分安全性将发生在我的 php.ini 文件中。

使用 eval 看起来像这样：

```
var apptObj = eval(apptid); 
```

传递给 eval 后，文本 id 可以用作对对象的引用。尽管我对其他帖子的阅读是这不是最佳实践。

关于解决此问题的非评估方法的任何想法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:35:56.323

您应该将函数保存在这样的对象中：

```
var operations = {
    "add": function(){...},
    "remove": function(){...},
    "edit": function(){...}
}; 
```

然后像这样调用它：

```
var op = element.id;
operations[op](); 
```

You could use the global window object that Ufuk mentioned, but it is generally frowned upon. If you have several related functions, keeping them in an object and preventing them from floating in the global scope is considered cleaner and more organized.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:28:21.150

如果您要调用的函数是全局的，则可以通过窗口对象的索引来访问它。

```
//get the function first
var myFunction = window[functionName];

//call the function with your parameters
myFunction(param); 
```

**更新：**

如果我理解正确，您正在尝试使用 id 创建变量，如果是这种情况，您可以这样做：

```
window['appt'+id] = appt(id); 
```

就像丹尼斯提到的那样，如果你不使用全局变量会更好。相反，您可以将所有这些变量保存在另一个对象中。这是一个例子：

```
//initialize it if it is undefined
var apptHolder = apptHolder || {};

//assign the property
apptHolder['appt'+id] = appt(id);

//if you need the apptHolder to be global
window.apptHolder = apptHolder; 
```

# java - 有什么方法可以通过跳过文件夹或文件来加速 Eclipse 项目刷新？

> ID：10871542
> 
> 赞同：1
> 
> 时间：2012-06-03T15:24:53.467
> 
> 标签：java, eclipse

我在 Eclipse 中有一个 Web 项目，其中包含一个链接到另一个文件夹的文件夹，该文件夹包含几十万个 tif 图像。此目录链接到项目中，因为图像文件需要可用于随项目部署的 java 小程序。问题是项目在链接文件夹后第一次刷新（可能在随后的刷新中，我还没有通过第一次），Eclipse 需要*永远*（过去 40 分钟刷新过程一直停留在 98%或者）。

我可以告诉 Eclipse 在刷新/验证/清理/构建/对项目做任何事情时不要担心这些文件和/或文件目录吗？

编辑：这些文件驻留在网络服务器中（在“WebContent”目录树下），因为小程序和相关 POJOS 需要通过直接打开正在访问的文件的 URL 字节流来访问这些文件。如果这些文件被移动到不同的 Web 服务器，或者如果 applet 和/或相关 POJOS 被更改为访问 File ByteStream 而不是 URL ByteStream，那么我将需要使用安全性对 Applet 和 Library .jar 文件进行签名证书，这不是此应用程序的可行选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:30:48.173

如果您的`.project`and`.classpath`不直接在您的项目源中，您可以考虑：

*   定义两个不同的`.project`和 `.classpath`在两个不同的角度，与：
    *   一个引用除您的链接目录之外的所有内容（用于开发，如果您始终不需要 WeContent 链接子目录）
    *   一个包含所有项目（包括链接目录）的文件，仅在您需要时在不同的 Eclipse 透视图中使用。

另一种方法是尝试将该链接目录的内容添加为“[忽略的资源](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.user/reference/ref-20.htm)”，并查看这是否对刷新时间有任何影响。

# jquery - PHP中使用的jTypeWriter jquery，如何一次输入一行？

> ID：10871543
> 
> 赞同：0
> 
> 时间：2012-06-03T15:25:02.103
> 
> 标签：jquery

我在 php 中使用 jTypeWriter jquery。这个 jquery 正在从一个包含许多句子的 txt 文件中获取其文本，每个句子都以句点结尾。

问题是：我希望 jquery 每次文件中的句子完成时从头开始输入，然后移动到下一个，依此类推。我希望这是一个循环。

我尝试在文本文件中的句子末尾插入中断标记，但这没有帮助。

```
<script type="text/javascript">
$(document).ready(function() {
    $("#my-container").jTypeWriter({
        sequential: false,
        loop: true,
        loopDelay: 5,
        duration: 6
    });
});​
</script> 
```

jquery 服务器可能已关闭，但我在这里找到了代码：http://pastebin.com/W85XGWcV
任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T21:51:28.633

说真的，也许你应该尝试另一个插件/脚本。我花了一些时间来解决问题。好吧，使用此脚本您无法定义速度，如果需要，您可以自己尝试！我找到的解决方案是使用我在网上某处找到的另一个版本的 jTypeWriter（我不确定它是否是最新的：[http://www.ugcs.caltech.edu/~kratsg/Scripts/TypewriterEffect/demo。 html](http://www.ugcs.caltech.edu/%7Ekratsg/Scripts/TypewriterEffect/demo.html) )

```
<!DOCTYPE html>
<html>
<head>
    <title>JS</title>
</head>
<body>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/jquery-ui.min.js"></script>
    <script type="text/javascript" src="http://www.ugcs.caltech.edu/~kratsg/Scripts/TypewriterEffect/jQuery.typewriter.min.js"></script>    <!-- PLEASE REMOVE THIS AND ADD A PATH TO YOUR OWN SERVER TO PREVENT directlinking) -->
    <script type="text/javascript">
    function writing(){
        $('#mycontainer').jTypewriter('type').delay(5000);  // sleep for 5 seconds after 1 loop
        setTimeout("writing()");
    }
        $(document).ready(function(){
            writing();
        });

    </script>

<div id="mycontainer">
    <?php
        $file = file_get_contents("text.txt");
        $lines = explode(PHP_EOL, $file);
        foreach($lines as $line){
            echo "$line<br/>".PHP_EOL;
        }
    ?>
</div>

</body>
</html> 
```

# java - 将 Apache Derby 作为 Windows 服务运行

> ID：10871545
> 
> 赞同：3
> 
> 时间：2012-06-03T15:25:22.750
> 
> 标签：java, windows-services, derby

我在我们的项目中使用 apache derby。每次，我都必须手动启动 derby 的服务器，即运行 startnetworkserver.bat 。是否可以将其安装为 Windows Web 服务？而且我还想在 Windows 启动列表中添加该服务。这样我每次启动系统都会自动启动。所以，我不必手动启动服务器。我正在使用 apache tomcat 作为 Windows 服务。我想为德比做同样的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T15:42:27.560

看看[Apache Procrun](http://commons.apache.org/daemon/procrun.html)。它是一个 Windows 可执行文件，允许您将 java 程序作为 Windows 服务安装/卸载。

服务的安装如下（来自项目站点）：

```
prunsrv //IS//TestService --DisplayName="Test Service" \
    --Install=prunsrv.exe --Jvm=auto --StartMode=jvm --StopMode=jvm \
    --StartClass=org.apache.SomeStartClass --StartParams=arg1;arg2;arg3 \
    --StopClass=org.apache.SomeStopClass --StopParams=arg1#arg2 
```

之后，您只需使用以下命令启动/停止服务：

```
net start TestService
net stop TestService 
```

或使用“我的电脑”中的“服务”视图。

哦，它是免费的！;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-05T10:10:56.327

我遇到了同样的问题，并尝试使用各种工具和包装器将 Derby 作为 Windows 服务，其中包括 Derby wiki ( [http://wiki.apache.org/db-derby/DerbyWindowsService](http://wiki.apache.org/db-derby/DerbyWindowsService) )中描述的所有方式.

无论如何，除了 Appache 基金会提供的 procrun 工具外，这些工具都没有对我有用，它在 tomcat 中用于将此服务器作为 Windows 服务器。因此，按照以下步骤：

1.  获取 procrun 的两个关键文件（[http://commons.apache.org/proper/commons-daemon/binaries.html](http://commons.apache.org/proper/commons-daemon/binaries.html)）：
    *   **prunsrv.exe** - 用于将应用程序作为服务运行的服务应用程序。
    *   **prunmgr.exe** - 用于监视和配置已安装服务的 GUI 管理器应用程序。
2.  将这些文件复制到 Derby/bin（假设您有一个名为 Derby 的文件夹，即 DERBY_HOME）。
3.  要遵循 procrun 约定，请将这些文件重命名为 derby.exe 和 derbyw.exe。如果您想使用不同的名称，您可以，但您应该调整附加的脚本。
4.  要在 Windows 上创建服务，您必须执行下一个脚本。它被编写为在 Derby 文件夹的上级文件夹 (..) 上执行，并使用 java 32 位的可移植版本。

    *   **注意：**我已将其拆分为不同的行，但必须仅在一行中执行

    > Derby\bin\derby.exe //IS//DerbyService --DisplayName
    > ="Derby Service" --Description
    > ="这是一个 Derby 数据库服务器"
    > --Install="%cd%\Derby\bin\derby.exe" --Startup=auto
    > --JavaHome " **%cd%\Java_32_portable** "
    > --Jvm=" **%cd%\Java_32_portable\bin\client\jvm.dll** "
    > --StartMode=Java --StopMode=Java
    > --StartClass=org. apache.derby.drda.NetworkServerControl --StartParams=start
    > --StopClass=org.apache.derby.drda.NetworkServerControl --StopParams=shutdown
    > --Classpath="%cd%\Derby\lib\derby.jar;%cd% \Derby\lib\derbyrun.jar;%cd%\Derby\lib\derbynet.jar;%cd%\Derby\lib\derbytools.jar"
    > ++JvmOptions="**-Dderby.system.home=%cd%\Derby;-Dderby.install.url=%cd%\Derby\lib;-Dderby.authentication.provider=BUILTIN;-Dderby.storage.pageCacheSize=8000;-Dderby.storage .pageSize=20000;-Dderby.database.sqlAuthorization=false** "

5.  重要的。您应该调整粗体部分。

    *   适当地设置你的 JAVA_HOME 变量和你的 jvm.dll
    *   在 ++JvmOptions 中设置您自己的 Derby 特定参数，用“;”分隔。例如，添加用户密码验证：
        -Dderby.database.sqlAuthorization=true;-Dderby.user."user-name"=password
6.  最后，您可以检查您的服务是否正常启动

    > `net start DerbyService`

**建议：**您可以像我一样将所有内容放在一个 bat 文件中，您可以在其中定义先前的 JAVA_HOME 或任何其他必要的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T16:10:18.320

查看[JavaServiceWrapper](http://wrapper.tanukisoftware.com/doc/english/introduction.html)，它是一个广泛使用的、有据可查的包装器，可让 Java 程序作为 Windows 服务运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T15:30:45.663

查看 Glassfish 使用的 winsw。需要 .NET。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-13T06:01:48.070

自从最初的问题以来已经有很长时间了，无论如何我想确认我使用@Richard P 提供的说明在我的 Windows 64 位中正确设置了 Derby 服务。我的脚本完成略有不同，如下所示：

```
set JAVA_HOME=C:\java\jdk1.8.0_25
set DERBY_INSTALL=C:\tools\db-derby-10.13.1.1-bin

%DERBY_INSTALL%\bin\derby.exe //IS//DerbyService --DisplayName="My Derby Service" --Description="My Derby Database Engine Service" --Install="%DERBY_INSTALL%\bin\derby.exe" --Startup=auto --JavaHome "%JAVA_HOME%" --Jvm="%JAVA_HOME%\bin\client\jvm.dll" --StartMode=Java --StopMode=Java --StartClass=org.apache.derby.drda.NetworkServerControl --StartParams=start --StopClass=org.apache.derby.drda.NetworkServerControl --StopParams=shutdown --Classpath="%DERBY_INSTALL%\lib\derby.jar;%DERBY_INSTALL%\lib\derbyrun.jar;%DERBY_INSTALL%\lib\derbynet.jar;%DERBY_INSTALL%\lib\derbytools.jar" ++JvmOptions="-Dderby.system.home=%DERBY_INSTALL%;-Dderby.install.url=%DERBY_INSTALL%\lib;-Dderby.authentication.provider=BUILTIN;-Dderby.storage.pageCacheSize=8000;-Dderby.storage.pageSize=20000;-Dderby.database.sqlAuthorization=false" 
```

# javascript - 基于 Chrome 的 JavaScript 性能滞后

> ID：10871549
> 
> 赞同：3
> 
> 时间：2012-06-03T15:25:50.620
> 
> 标签：javascript, performance, google-chrome

我仅在 Google Chrome 浏览器上遇到 JavaScript 性能问题。问题是网站有一段时间运行流畅，但在浏览页面几秒钟后，页面只是冻结了 2 或 3 秒。我认为一个问题可能与 synchronaus ar 循环方法调用有关。但接下来的问题是，为什么 Mozilla Firefox 或 Microsoft Intenet Explorer 不冻结？

实际上，我什至不知道到底要问什么，但我想如果你们中的某个人能告诉我解决问题的可能方法，我将能够知道答案。为了让事情更清楚，我将向您展示我得到的 Google Chrome Timeline： [Google Chrome Timeline http://img840.imageshack.us/img840/5998/timelinen.png](http://img840.imageshack.us/img840/5998/timelinen.png) 正如您所看到的，它表明在一段时间内处理器会解析 JavaScript顺利，但几秒钟后，JavaScript 解析就冻结了。

那么，您有什么想法会导致此类问题吗？任何帮助，将不胜感激。如果您需要更多信息，请随时询问。如果我了解自己，我会尽量告诉你需要的一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:29:29.653

当我使用非常大的精灵时，我有类似的东西。我认为谷歌浏览器在图像处理方面存在性能问题。Mozilla firefox 和opera 工作更流畅。

如果您有大精灵（大于 2000x2000），请尝试拆分为更小的部分。

# ios - 会员资格、wcf 身份验证服务、移动应用程序（iOS、Android）

> ID：10871554
> 
> 赞同：3
> 
> 时间：2012-06-03T15:26:17.617
> 
> 标签：ios, wcf, membership

我正在开发一个具有 asp.net Web 应用程序和移动应用程序（iOS、Android）的项目。我需要想出一种方法来提供来自各种客户端的身份验证、授权和成员注册。我计划使用 ASP.NET 成员资格提供程序并设置 WCF 身份验证服务以使用该成员资格提供程序。

我的想法是我的 Web 应用程序和移动应用程序客户端将能够使用此服务进行身份验证。

不过，这里有一些问题，我希望得到任何指导：1) 使用 asp.net 的会员提供程序会生成一个表单身份验证 cookie，该 cookie 不适用于移动应用程序。我读到的一些内容建议在响应中返回身份验证令牌。2）WCF认证服务是只提供认证还是也可以用于会员注册？基本上，需要一个可供移动客户端使用的解决方案，以允许用户注册。

我相信其他人已经这样做了。我正在寻找一些指导，以便我可以正确地做到这一点，因为我发现的文档和示例似乎不完整。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T23:01:45.930

> 1) 使用 asp.net 的会员提供商会生成一个表单身份验证 cookie，该 cookie 不适用于移动应用程序。我读到的一些内容建议在响应中返回身份验证令牌

Cookie 仍然可以加载到移动应用程序中。考虑以下场景：

1.  应用通过 HTTP 向 WCF 服务发送请求并获取包含 cookie 的 HTTP 响应。
2.  一些自定义代码收集该 cookie 并保存。
3.  应用程序将 cookie 添加到下一个 WCF 请求以确认用户已通过身份验证。

浏览器在 Web 应用程序中为您执行此操作，但移动应用程序需要一些额外的编码。

如果仅使用身份验证，则不需要 cookie。方法`System.Web.ApplicationServices.AuthenticationService.ValidateUser`可用于验证用户名和密码。尽管如果您想使用用户角色和配置文件，您将需要 cookie。 `System.Web.ApplicationServices.AuthenticationService.Login`返回 cookie。当应用程序调用`RoleService`或`ProfileService`

有关详细信息，请参阅此示例：http: [//msdn.microsoft.com/en-us/library/bb515342 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb515342%28v=vs.100%29.aspx)

> 2）WCF认证服务是只提供认证还是也可以用于会员注册？基本上，需要一个可供移动客户端使用的解决方案，以允许用户注册。

Microsoft 实施只进行身份验证。您需要实现自己的服务或寻找第三方进行注册。

这是您可以使用的方法列表：http:
[//msdn.microsoft.com/en-us/library/system.web.applicationservices.authenticationservice_methods](http://msdn.microsoft.com/en-us/library/system.web.applicationservices.authenticationservice_methods)

# android - 搜索 ArrayAdapter 和 ListView

> ID：10871556
> 
> 赞同：0
> 
> 时间：2012-06-03T15:26:23.397
> 
> 标签：android, listview, android-arrayadapter

我有一个存储在 ArrayAdapter 中的 100K+ 物品的库存清单。我用它来填充 ListView。我使用带有 TextChangedListener 的 EditText 框根据在 EditText 框中键入的内容来跳转库存列表。目前，我的第一种方法是编写以下代码......

```
 ListView01.setSelection(adapter.getPosition(charSeq.toString())); 
```

这将搜索 ArrayList 以提供数组中的项目位置，并且 setSelection 将 ListView 跳转到列表中的该点。这工作得很好，但它只适用于完全匹配并且不能提供我需要的功能。无论是否完全匹配，我都想在列表中跳转。如果我开始输入“c”，我希望列表跳转到以“c”开头的第一个项目，并在我输入时继续在列表中跳转，而不是仅跳转到基于精确匹配的位置。

那么，他们是不是像“startsWith”这样的函数可以用来搜索arrayAdapter或ListView来给我跳转的位置？他们是我应该采取的另一种方法吗？我不想设置过滤器，因为这会从视图中删除项目。我已经尝试过这种方法。输入第一个字母后，过滤器还需要 45 秒来过滤库存列表。我想在没有从 ListView 中删除任何项目的情况下跳转到新位置后自由地向上或向下滚动列表。

# c++ - 使用函数的所有参数？我很困惑

> ID：10871557
> 
> 赞同：0
> 
> 时间：2012-06-03T15:26:27.100
> 
> 标签：c++

```
DrawBorderBox(55, 20, 200, 50, 4, fontBlack, pDevice );

void Menu::DrawBorderBox( int x, int y, int w, int h, int thickness, D3DCOLOR Colour, LPDIRECT3DDEVICE9 pDevice)
{
    //Top horiz line
    DrawFilledRect( x, y, w, thickness,  Colour, pDevice );
    //Left vertical line
    DrawFilledRect( x, y, thickness, h, Colour, pDevice );
    //right vertical line
    DrawFilledRect( (x + w), y, thickness, h, Colour, pDevice );
    //bottom horiz line
    DrawFilledRect( x, y + h, w+thickness, thickness, Colour, pDevice );
}

void Menu::DrawFilledRect(int x, int y, int w, int h, D3DCOLOR color, LPDIRECT3DDEVICE9 pDevice)
{
    //We create our rectangle to draw on screen
    D3DRECT BarRect = { x, y, x + w, y + h }; 
    //We clear that portion of the screen and display our rectangle
    pDevice->Clear(1, &BarRect, D3DCLEAR_TARGET | D3DCLEAR_TARGET, color, 0, 0);
} 
```

输入的值在`DrawBorderBox`中使用`BarRect`，那么调用`DrawFilledRect`不使用所有参数？那么`BarRect`假设`h`吗？

所以我得到 (55,20) 点 1 和 (255,70) 点 2？但这说它画了 1 条线？我很困惑。

我认为厚度在 BarRect 中被用作 h ？？？我说的对吗？这意味着它实际上会覆盖原始正方形的 4 个像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:51:00.763

BorderRect 正在绘制 4 个矩形，它们勾勒出由两个点 (55,20) (255,70) 指定的矩形。似乎有问题的是 4 个矩形的端盖似乎没有正确排列。在 x、y、w 和 h 上应该有偏移，以便在较大的盒子内绘制所有 4 个矩形，或者它们应该被绘制得稍长一些并在盒子外面。

# javascript - 使用 Javascript 函数表达式的首选方法是什么？

> ID：10871558
> 
> 赞同：2
> 
> 时间：2012-06-03T15:26:31.617
> 
> 标签：javascript, function-expression

我在调用 JavaScript 函数表达式时看到了这些不同的模式：

### 模式#1

```
var global = function () {
    return this;
}(); 
```

### 模式#2

```
var global = (function () {
   return this;
}()); 
```

### 模式#3

```
var global = (function () {
    return this;
})(); 
```

在我的测试中，一切似乎都有效（至少在大多数当前浏览器中）。就我的“口味”而言，模式#3 更好，因为它比#1 更明确，并且它在实际调用它之前返回函数，而不是#2。

但是我在徘徊，如果有一个更喜欢或更正确的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:06:17.503

所以，最初的问题是下面的代码：

```
function () {

}(); 
```

引发异常。这是因为 JS 解析器无法自动判断是函数声明还是函数表达式。您描述的所有模式都用于明确告诉 JS“嘿，伙计，这是一个表达式”。但是在您的特定情况下，您没有这个问题，因为如果您前面有一个变量，JS 完全能够理解这是一个表达式，而不是一个声明，并且它不会引发任何语法错误。

在那种特定情况下，不需要任何“破解”，您可以简单地拥有：

```
var _global = function () {

}(); 
```

就是这样。现在的问题是：当您需要在没有任何变量的情况下立即调用函数时，使用哪种“hack”？您描述的所有模式都可以，Crockford 更喜欢这个：

```
(function(){

}()); 
```

这对我来说很有意义，至少因为你有一个完全隔离的块，与：

```
(function(){

})(); 
```

但是，如果您将代码与其他脚本结合在一起，或者您有以前的代码，如果它们最后不使用分号，您可能会遇到一些问题：

```
a = b + c
(function() {

}()); 
```

在这种情况下，JS 考虑`c`一个函数的调用：

```
a = b + c(function() { }()); 
```

为了避免这种情况，开发人员通常会在前面添加一个分号，以确保安全：

```
;(function() {

}()); 
```

我个人更喜欢一些运算符，比如 bang (!)：

```
!function () {

}(); 
```

这样，您就不会遇到使用括号的问题。更少的字符，给我一种“执行”的感觉。但是，就像其他方法一样，这是一种技巧，而且是个人品味的问题。例如，Crockford 不喜欢 A LOT 那种轰轰烈烈的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:31:34.553

它们都可以正常工作，您可以使用其中任何一种，但[Crockford](http://www.crockford.com/)推荐的模式是模式 #2：

```
var global = (function () {
   return this;
}()); 
```

我个人觉得 Pattern #3 很容易使用，因为它很容易理解：

```
var global = (function () {
    return this;
})(); 
```

顺便说一句，还有其他使用 , 等字符的模式/`!`速记`+`：

```
! function(){
  return this;
}(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T15:32:59.140

我更喜欢模式一，因为在将函数定义为对象的属性时，你的语法会变得非常冗长。模式#1 很容易遵循；你定义一个函数然后调用它。`()`模式 3 做同样的事情，但要遵循额外的一组。在我看来，这种冗长会降低生产力。

正如您所说，它们都是正确的，但我发现记住“奥卡姆剃刀”=> 当所有事物都相同时，更简单的解释（表达式）比更复杂的解释更好。

# vba - Ltrim，Trim 函数不能用于删除 VBA 中的额外前导空格

> ID：10871560
> 
> 赞同：0
> 
> 时间：2012-06-03T15:26:36.967
> 
> 标签：vba, excel

我有一部分代码：

```
If IsDate(cf1) Then
   cf1str = CStr(cf1)
   cf1str = Trim(cf1str)
   chk1 = Format(cf1, "dd-mm-yyyy hh:mm:ss")

   If cf1str <> chk1 Then
      MsgBox "message"
      Ws.Cells(i, c1).Select
      Selection.Activate
      Exit Sub
   End If
Else
   MsgBox ""
   Ws.Cells(i, c1).Select
   Selection.Activate
   Exit Sub
End If 
```

我在这里要做的是，我想检查日期是否有效并且格式为“dd-mm-yyyy hh-mm-ss”。现在，当我将日期作为字符串进行比较时，我想确保没有由于前导或尾随空格而导致的不匹配。我尝试使用`ltrim`, `trim`, `rtrim`，但我发现列中有前导空格。结果，我收到一条错误消息，指出日期格式不正确。这会在代码用户之间造成混淆，因为错误是什么，即使他们看到单元格中的日期格式相同。`Val()`我试图通过函数将字符串更改为值然后检查它们来摆脱这种情况，但徒劳无功。有什么解决办法吗？

另外如何摆脱不需要的字符`\n`，例如`trim`可能无法根除的字符？因为在一个单元格中，我甚至可以看到日期完全符合我想要的顺序，没有任何空格，它仍然显示错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:51:09.540

不要比较字符串。比较日期。尝试这个：

```
If IsDate(cf1) Then
   cf1str = CStr(cf1)
   cf2 = CDate(chk1)

   If cf1 <> cf2 Then
      MsgBox "message"
      Ws.Cells(i, c1).Select
      Selection.Activate
      Exit Sub
   End If
Else
   MsgBox ""
   Ws.Cells(i, c1).Select
   Selection.Activate
   Exit Sub
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:41:50.287

我想我明白了。这正是我想要的：

```
For Each cell In Selection.Cells
    If cell.HasFormula = False Then
        str = Trim(CStr(cell))
        If Len(str) > 0 Then
            nAscii = Asc(Left(str, 1))
            If nAscii < 33 Or nAscii = 160 Then
                If Len(str) > 1 Then
                    str = Right(str, Len(str) - 1)
                Else
                    str = ""
                End If
            End If
        End If
        cell=str
    End If
Next 
```

此代码检查每个字符串中的第一个字符，如果它不是简单的空格，则将其删除。小于 33 的 Ascii 字符都是不可见的字符，其行为类似于空格，不能通过 trim 或 ltrim 函数删除。这就是我的确切问题was faces.ascii 代码 160 用于 html 中的  ，如果直接从 html 文件中粘贴，它通常会出现在值中，这正是我的情况。

# c# - 如何使 WinForms UserControl 填充其容器的大小

> ID：10871565
> 
> 赞同：53
> 
> 时间：2012-06-03T15:27:25.267
> 
> 标签：c#, .net, winforms, mdi, multipage

我正在尝试创建一个多布局主屏幕应用程序。我在顶部有一些按钮链接到应用程序的主要部分（例如模型中每个实体的管理窗口）

单击其中任何一个按钮会在面板中显示关联的 UserControl。Panel 拥有 UserControls，而后者又拥有 UI。

WinForms UserControl 没有`Anchor`or`Dock`属性。

我试过设置 UserControl 的属性

```
AutoSize=True 
```

和

```
private void ManageUsersControl_Load(object sender, EventArgs e)
{
        this.Width = this.Parent.Width;
        this.Height = this.Parent.Height;
} 
```

但这些都不起作用。
注意：我在运行时动态加载此控件

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-06-03T15:30:10.933

尝试将`Dock`属性设置为`Fill`：

```
private void ManageUsersControl_Load(object sender, EventArgs e)
{
        this.Dock = DockStyle.Fill;
} 
```

我也会设置`AutoSize`为默认值，我相信是`False`. 看看它是如何工作的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T07:35:15.553

```
UserControl1 myusercontrol = new UserControl1();
            myusercontrol.Dock = DockStyle.Fill;//Dock Prope. Fill user Control Contrainer
            TabPage myTabPage = new TabPage();//New Tab Create
            myTabPage.Text = "Wel-Come Page";//Tab Header Txt
            myTabPage.Controls.Add(myusercontrol);
            tabControl1.TabPages.Add(myTabPage); 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2016-07-06T13:56:42.683

在调整大小事件中用户控件。

```
 private void MyTextBox_Resize(object sender, EventArgs e)
        {
            this.Width = textBox1.Width;
            this.Height = textBox1.Height;
        } 
```

# php - php sql查询不起作用

> ID：10871569
> 
> 赞同：0
> 
> 时间：2012-06-03T15:28:01.367
> 
> 标签：php, mysql, phpmyadmin

好的，我的插入查询在我的服务器上不起作用。这是我正在运行的代码：

```
<?php
$name = $_GET['name'];
$database_servidor = "localhost";
$database_usuario = "username";
$database_pass = "pass";
$database_nombre = "table";
$conexion = mysql_connect($database_servidor, $database_usuario, $database_pass);
mysql_select_db($database_nombre, $conexion);
$query = "INSERT INTO `nombre`(`card`) VALUES (`$name`)";
echo $query;
$sql = mysql_query($query) or die (mysql_error());
?> 
```

结果如下：

[http://santirivera92.co.cc/insert.php?name=Santiago%20Rivera](http://santirivera92.co.cc/insert.php?name=Santiago%20Rivera)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:32:58.800

您在数据周围使用反引号而不是引号`$name`。这是我的做法（添加转义以防止 SQL 注入）：

```
$query = sprintf('INSERT INTO `nombre`(`card`) VALUES ("%s")',
                 mysql_real_escape_string($name)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:31:03.087

```
$query = 'INSERT INTO `nombre`(`card`) VALUES ("' . $name . '")'; 
```

您需要在查询中的字符串值周围加上双引号。

也不要忽略 Emil Vikström 关于`mysql_real_escape_string`或准备好的语句的评论（搜索 mysqli）。因为在我这里的示例中，如果名称中包含双引号，则会中断查询，因此必须对字符串中的双引号进行转义！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T15:33:30.570

您实际上是在打印查询，而不是打印数据库中的结果行。您需要使用[mysql_result()](http://www.php.net/manual/en/function.mysql-result.php)来获取数据。

# c# - GeoCoordinateWatcher.PositionChaged 事件如何在周期性任务中工作？

> ID：10871574
> 
> 赞同：1
> 
> 时间：2012-06-03T15:28:15.260
> 
> 标签：c#, windows-phone-7.1

GeoCoordinateWatcher.PositionChaged 事件如何在周期性任务中工作？如果我有一个每隔一小时运行一次的后台代理。代码是

```
 protected override void OnInvoke(ScheduledTask task)
 {
   GeoCoordinateWatcher watcher = new    
   GeoCoordinateWatcher(GeoPositionAccuracy.Default);
   watcher.MovementThreshold = 100;
   watcher.PositionChanged += _watcher_PositionChanged;
   watcher.Start();
  } 
```

如果最初设备位于位置 A 并且设备在接下来的一小时内移动了超过 100m，那么在调用 onInvoke() 的 1 小时后 _watcher_PositionChanged 会被触发吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T15:41:22.547

不，下一次`OnInvoke`被调用时，你实例化一个新的`GeoCoordinateWatcher`，它只会`PositionChanged`从那一刻起引发事件。它不知道它早在哪里，它刚刚出生。

您需要保存您的坐标并在每次 OnInvoke 调用中引用它，并在需要时手动调用您的 PositionChanged 代码。

# java - Spring 3.1.1 web MVC - 限制对接口获取器的响应

> ID：10871580
> 
> 赞同：3
> 
> 时间：2012-06-03T15:28:49.953
> 
> 标签：java, spring, spring-mvc, jackson

以下是基于 Spring web MVC 3.1.1 的项目的片段。Json 序列化是通过 Jackson 完成的。

我有一个映射到 URL 的控制器，一切正常。

```
@Controller
@RequestMapping("/vod")
public class VODController {
 private Configuration configuration;
 private SearchAPI     searchAPI;

 @RequestMapping(method = RequestMethod.GET, params = "cmd=list")
 public @ResponseBody GetAssetsReply listVODAssets(long offset, int limit) {
    SearchVODAssetRequest searchVODAssetRequest = new SearchVODAssetRequest();
    //.... some irrelevant code
    return searchAPI.searchVODAssets(searchVODAssetRequest);
 }
} 
```

这是`GetAssetsReply`：

```
public class GetAssetsReply  {
    private long totalAssets;
    private List<VODAsset> assets = new LinkedList<VODAsset>();

    // Getters and setters removed for simplicity
} 
```

`VODAsset`是一个接口：

```
public interface VODAsset {
    public String getName();
} 
```

这是它的实现：

```
public class AssetElement implements VODAsset {
    private String     id;
    private String     name;
    private double     duration;

    // Getters and setters removed for simplicity
} 
```

最后是问题：控制器向我返回了一个不利的预期结果 - 除了名称之外，它还返回 VOD 资产及其 ID 和持续时间。由于对象是由上面的`VODAsset`接口指向的，我期望得到的只是名称。我怎样才能得到这种行为？任何帮助将非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T15:49:24.290

如果我正确理解您的问题并且您正在使用[Jackson](http://jackson.codehaus.org/)将结果转换为 JSON，那么您可以使用[org.codehaus.jackson.annotate.JsonIgnore](http://jackson.codehaus.org/1.5.7/javadoc/org/codehaus/jackson/annotate/JsonIgnore.html)来避免该字段被填充为 JSON 结果。(Henry) 此外，可以添加到接口`@JsonAutoDetect(JsonMethod.NONE)`中，这会导致 Jackson 不自动搜索要序列化`@JsonProperty`的字段，然后添加确实需要序列化的字段（实际上实现了 Jackson 字段序列化策略的白名单方案）。

这是解决上述问题的示例代码：

```
@JsonAutoDetect(JsonMethod.NONE) //This tells the json serializer not to search for properties to serialize
public interface VODAsset {
    @JsonProperty //This tells the json serializer that this is a property that it should serialize
    public String getName();
} 
```

另一方面，每个字段忽略方案可以通过以下方式实现：

> 标记注释，指示带注释的方法或字段将被基于自省的序列化和反序列化功能忽略。也就是说，它不应被视为“getter”、“setter”或“creator”。

```
@JsonIgnore
public String getId() {
    return id;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T18:51:08.690

上面的答案（使用@JsonProperty 和@JsonIgnore）将您的数据模型与特定用例耦合，如果您需要返回此对象的不同投影（例如 id 属性），则意味着创建另一个类或更改注释并重新编译这个类。

我通常更喜欢返回一个我为每个用例显式填充的地图。例如

```
Map<String, Object> responseBody = new HashMap<String, Object>();
/*
JSON format: 
{
    "prop1":"<value1>",
    "edition":"<value2>",
    "dateProp":"<formatted date>"
}
*/
responseBody.put("prop1", value1);
responseBody.put("prop2", value2);
responseBody.put("dateProp", dateFormat.format(expirationDate));
return new ResponseEntity<Map<String, Object>>(responseBody, HttpStatus.OK); 
```

当然，您也可以使用 @ResponseBody 而不是显式创建 ResposeEntity。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-24T09:23:02.230

我使用委托代理创建了一个通用解决方案。这解决了多个问题：

*   您可以在同一个实现上拥有不同的接口，这些接口公开同一对象的不同细节（例如，IPersonList 用于集合，IPersonDetail 扩展 IPersonList 以获取详细信息。
*   您不需要在实体类中使用 @Json... 注释

示例代码（使用 commons-proxy）：

```
/**
 * Wraps an object as delegating proxy, exposing only the methods of the interface
**/
@SuppressWarnings("unchecked")
protected <T> T wrap(Object sourceObject, Class<T> targetInterface)
{
    return (T) new ProxyFactory().createDelegatorProxy(
            new ConstantProvider(sourceObject),
            new Class[] {targetInterface});
} 
```

现在你可以使用

```
return wrap(assetElement, VODAsset.class) 
```

获取元素的 VODAsset 类型的“视图”。

下一步是创建一个拦截代理来检查 getter 的返回值。其中一个是接口，它还必须为返回值创建一个代理。还需要对列表进行特殊处理（例如，对于您的 VODAsset 列表示例）。所以你必须递归地创建代理。

在创建 100 个代理作为 jvm“预热”之后，我通过在循环中创建 1.000.000 个代理进行了一些性能测试：

*   Java 反射代理（使用 ProxyFactory）：~1200ms
*   CGLib 代理（使用 CglibProxyFactory）：~3900ms
*   Javassist 代理（使用 JavassistProxyFactory）：~470ms

因此，使用 Javaasist 作为代理工厂，创建此类代理的开销适中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T15:39:11.587

实现，即类是根据你的 Spring bean 配置返回的。如果您想要不同的结果，请返回不同的实现。因此，如果 AssetElement 具有您不想公开的道具，请创建另一个实现您的界面并仅返回该道具的类。在您的 GetAssetsReply 中使用该 impl。

# python - 如何在appengine中修改数据库中的条目？

> ID：10871582
> 
> 赞同：0
> 
> 时间：2012-06-03T15:29:06.560
> 
> 标签：python, database, google-app-engine

想编辑数据库。我试过这个，但它不起作用。

```
 def post(self, pageName):$
        content = self.request.get('content')$
$
        p = db.GqlQuery("SELECT * FROM Pages")$
        pages = p.run(batch_size = 1000)$
        pageExist = False$
$
        for page in pages:$
            if pageName == page.name:$
                page.content = content$
                break$
            else:$
                p = Pages(name = pageName, content = content)$
                p.put()$
        self.redirect(pageName)$ 
```

需要一些代码帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:49:38.253

当您在相应页面上找到`pageName`并更改`content`时，您需要在重定向之前保存页面。

如果目的是用 new 更新页面`content`，我完全不确定你想用那个`else:`块完成什么。

我想你会更高兴做类似的事情

```
query = db.GqlQuery("SELECT * FROM Pages WHERE pageName=:1", pageName)
for page in query:
  page.content = content
  page.put() 
```

# c++ - 作为参数传递的 std::string 的生命周期

> ID：10871587
> 
> 赞同：3
> 
> 时间：2012-06-03T15:29:41.447
> 
> 标签：c++, stl

我想确保我理解正确。在下面的 c++ 函数中，将创建三个 std::string 实例：

*   一个用于调用者（）中的 s1，我相信它被称为赋值构造函数
*   一个用于 callee() 函数的 s2 参数，通过它的复制构造函数
*   一个通过其复制构造函数用于 s3

我对么？如果是这样，所有三个实例都会在超出范围时被清理吗？我并不是真的在问这是否是好的代码，只要我的理解是正确的。

```
void caller(void) {
    std::string s1 = "hi";
    callee(s1);
}

void callee(std::string s2) {
    std::string s3 = s2;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T15:35:14.940

不要假设在它们*似乎*制作的任何地方都制作了副本。在实践中，复制省略比您想象的更频繁地发生。编译器可以自由地优化掉多余的副本，即使副本有副作用：

```
void caller(void) {
    std::string s1 = "hi";
    //theoretically, s1 is copied here
    //in practice, the compiler will optimize the call away
    functionCallee(s1);
}

void callee(std::string s2) {
    //although s2 is passed by value, it's probably no copy was created
    //most likely, it's exactly the same as s1 from the calling context
    std::string s3 = s2;
} 
```

此外，如果方法是内联的并且编译器检测到没有出现副作用，则甚至*可能*不会创建字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T15:49:00.767

你几乎是正确的。

可以创建三个或四个字符串（取决于是否`s1`省略了 的构造），并且在每种情况下都会调用构造函数来构造它们。尽管出现了，但没有调用任何赋值运算符。

```
void caller(void) {
    //A temporary std::string is constructed with the
    //basic_string(const CharT* s, const Allocator& alloc = Allocator())
    //constructor.
    //(In the call, `s` is initialized to point to the first element of "hi".)
    //This temporary is then move constructed in to s1.
    //The move constructor is
    //basic_string(basic_string&& other)
    //This move construction may be elided.
    std::string s1 = "hi"; //At the end of the full expression (ie, at the semicolon)
                           //the lifetime of the temporary string ends (unless
                           //the construction of s1 is elided, in which
                           //case the temporary becomes s1, and its lifetime ends
                           //with s1).
    //s2 is copy constructed from s1
    //The copy constructor is
    //basic_string(const basic_string& other)
    callee(s1);
    //the lifetime of s1 ends
}

void callee(std::string s2) {
    //s3 is copy constructed from s2
    std::string s3 = s2;
    //the lifetime of s3 ends
    //the lifetime of s2 ends
} 
```

# php - 在文本中搜索，并通过 php 选择关键字

> ID：10871590
> 
> 赞同：1
> 
> 时间：2012-06-03T15:29:57.880
> 
> 标签：php, tags

你好吗 ？

我有一段文字：

> 在 7 世纪初波斯短暂入侵后，拜占庭人得以重新控制该国，直到 639-42 年，埃及被穆斯林阿拉伯人入侵并被伊斯兰帝国征服。当他们在埃及击败拜占庭军队时，阿拉伯人将逊尼派伊斯兰教带到了该国。在这个时期的早期，埃及人开始将他们的新信仰与土著信仰和实践相结合，导致各种苏菲教派蓬勃发展至今。 [24] 这些较早的仪式在科普特基督教时期幸存下来

我想在这个文本中搜索，并选择类别、标签

```
<?php // this is some tags in Array , but I don't know which tag is used in this text.
$search_words = array("Egypt , Persian , Islamic , USA , Japan , Spain , Saudi Arabia");

foreach($search_words as $value){
        stristr($longText, $search_words); // I know this is mistake
    }?> 
```

我想选择这个简单的单词（$search_words）。

我为我的语言感到抱歉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:38:19.197

```
$words_found = array();
foreach ($search_words as $word) {
    if (stristr($longText, $word)) {
         $words_found[] = $word;
    }
} 
```

`$words_found`现在是一个数组，包含`$search_words`数组中存在于文本中的所有标签。

此外，您的示例中数组的语法不正确，应该是这样的：

```
$search_words = array("Egypt", "Persian", "Islamic", "USA", "Japan", "Spain", "Saudi Arabia"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:48:22.153

在不运行循环的情况下，您可以这样做：

```
$str = <<< EOF
The Byzantines were able to regain control of the country after a brief Persian
invasion early in the 7th century, until 639-42, when Egypt was invaded and conquered
by the Islamic empire by the Muslim Arabs. When they defeated the Byzantine Armies in
Egypt, the Arabs brought Sunni Islam to the country. Early in this period, Egyptians
began to blend their new faith with indigenous beliefs and practices, leading to 
various Sufi orders that have flourished to this day.[24] These earlier rites had
survived the period of Coptic Christianity in Saudi Arab.
EOF;
$search_words = array("Egypt", "Persian", "Islamic", "USA", "Japan", "Spain",
                      "Saudi Arab");
preg_match_all('/\b[A-Z][a-z\d]*(?:\s+[A-Z][a-z\d]*)?\b/', $str, $arr);
print_r(array_intersect($search_words, $arr[0])); 
```

**输出：**

```
Array
(
    [0] => Egypt
    [1] => Persian
    [2] => Islamic
    [6] => Saudi Arab
) 
```

# android - 从 Adob e Air android 应用程序发布到 facebook 墙

> ID：10871594
> 
> 赞同：1
> 
> 时间：2012-06-03T15:30:14.900
> 
> 标签：android, facebook, actionscript-3, flash, air

我目前正在开发一个基本的 Adob​​e Air Flash 应用程序，它可以让用户通过计算器。一旦用户通过计算器，我将值存储在一个变量中。

现在我想做的是：
1）有一个按钮让用户登录到 facebook
2）将默认消息发布到他们的墙上（他们不需要能够编辑或输入消息）
3）注销

我发现很难找到任何资源来帮助他们。无论如何，我也不是高级程序员，非常感谢任何帮助！另外，我在 Flash 中工作，如果这有什么不同的话，我不灵活

编辑：为什么这收到了 2 张反对票？至少提供一些反馈，让我知道如何改进我的提问，或者为什么我在你眼中做错了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T10:57:34.570

```
var appId:String = "APP ID HERE";
var messageTitle:String = "title for the message";
var messageUrl:String = "Link to the application";
var messageDescript:String = "Whatever you'd like to say";
var appThumb:String = "Thumbnail here";
var redirectUrl:String = "Once a user shares the link, where to redirect them - for me this is facebook again so they can log out";

var URLString:String = "https://www.facebook.com/dialog/feed?app_id="+projectApId+"&link="+messageUrl+"&picture="+projectThumb+"&name="+messageName+"&description="+messageDescription+"&redirect_uri="+redirectUrl;

function shareIt(){

var req:URLRequest = new URLRequest(URLString);

try{ navigateToURL(req,"_blank"); }

catch (e:Error){ trace(">> ERROR <<", e.message); } 

} 
```

我很惊讶我找不到它，或者在这里没有得到答案，考虑到它最终很容易:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:30:40.730

我不知道这是否会帮助你

检查这个网站表单 facebook [facebook API](https://developers.facebook.com/docs/guides/mobile/)你应该在那里找到你需要的任何东西。

# cassandra - 如何在 cassandra 中使用 CQL3 创建计数器列族

> ID：10871595
> 
> 赞同：5
> 
> 时间：2012-06-03T15:30:16.720
> 
> 标签：cassandra, cql

如何在 cassandra 中使用 CQL3 创建计数器列族？

我曾经使用： CREATE COLUMFAMILY userstats (username varchar PRIMARY KEY, images counter) WITH default_validation=counter AND comment='User Stats';

现在，当我在 CQL3 中运行它时，我得到：错误请求：default_validation is not a valid keyword argument for CREATE COLUMNFAMILY

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T18:30:33.490

CQL3 不再坚持“动态列名”模型。它仍然可以创建任意宽的 cassandra 行，但它们看起来像 CQL 中的“普通”窄表，所有列都已命名和定义。这就是 CQL3 不再支持设置 a `default_validation`or`comparator`等​​的原因。

在 CQL3 中做任何重要的事情之前，您应该阅读并理解[http://www.datastax.com/dev/blog/schema-in-cassandra-1-1 。](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)

但是，您的问题的答案是，它就像省略`default_validation`:

```
CREATE TABLE userstats (
    username varchar PRIMARY KEY,
    images counter
) WITH comment='User Stats'; 
```

虽然不清楚您是否打算在那里每行使用多个计数器，因为您想要一个`default_validation`. 如果你这样做了，而且你`comparator`本来会是`varchar`，你可以这样做：

```
CREATE TABLE userstats (
    username varchar,
    countername varchar,
    value counter,
    PRIMARY KEY (username, countername)
) WITH comment='User Stats'; 
```

..让我们`images`成为其中一个反名。

# asp.net-mvc-3 - 从 ASP.NET MVC3 操作方法内部将控件返回给 IIS

> ID：10871597
> 
> 赞同：0
> 
> 时间：2012-06-03T15:30:33.027
> 
> 标签：asp.net-mvc-3, iis, iis-7

我有这种动态创建缩略图的操作方法：

```
 public ActionResult Thumbnail(int imageId, int width, int height)
    {
        Image image = ImageManager.GetImage(imageId);
        string thumbnailPath;
        if (image.HasThumbnail(width, height))
        {
            thumbnailPath = image.GetThumbnailPath(width, height);
        }
        else
        {
            thumbnailPath = image.CreateThumbnail(width, height);
        }
        /*
        Here, I've done the business of thumbnail creation,
        now since it's only a static resource, I want to let IIS serve it.
        What should I do? Using HttpContext.RewritePaht() doesn't work, as 
        I have to return an ActionResult here.
        */
        return File(image.GetThumbnailPath(width, height), image.MimeType);
    } 
```

调用此方法的 URL 示例是：

```
/create-thumbnail/300x200/for-image/34 
```

但是，在用这种方法做了缩略图创建业务之后，我想让 IIS 服务缩略图。我应该怎么办？如何将控件返回给 IIS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:52:19.123

如果已在文件系统上创建了缩略图，您可以尝试使用以下操作结果类型之一来返回它。

```
FileContentResult
FilePathResult
FileStreamResult 
```

..edit.. 用关于输出缓存的更相关的答案更新我的回复。

您可能想看看 Asp.net 上的[输出缓存](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)文章

基本上前提是，每次在 MVC 中调用一个动作时，它都会再次执行整个函数，这对于像缩略图这样简单的东西来说将是一个巨大的性能损失。相反，如果您使用 OutputCache 装饰您的操作，您可以设置缓存计时器并提高性能。

```
[OutputCache(Duration = int.MaxValue, VaryByParam = "id;param1;param2")] 
```

[VaryByParam 文档](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute.varybyparam.aspx)

# ruby-on-rails - Heroku：自定义域不起作用

> ID：10871602
> 
> 赞同：1
> 
> 时间：2012-06-03T15:30:51.747
> 
> 标签：ruby-on-rails, heroku

我正在尝试将自定义域添加到两个 Heroku 应用程序，但它不起作用。我以前做过，没有问题。

在 Heroku 网站上，我添加了 Zerigo DNS（在附加组件部分），然后添加了域名。在 Godaddy 上，我将名称服务器更改为

```
a.ns.zerigo.net
b.ns.zerigo.net
c.ns.zerigo.net
d.ns.zerigo.net
e.ns.zerigo.net 
```

我昨天（24 小时前）这样做了。它总是在两个小时前工作。

我知道还有一种方法可以通过控制台添加自定义域。当我尝试这样做时

```
heroku addons:add custom_domains:basic 
```

即使我可以在互联网上实时查看应用程序（只是一个博客），我也会收到“找不到应用程序”的响应。

在我得到的评论中更新尝试建议

```
heroku addons:add custom_domains:basic --app hollow-cloud-8495.heroku.com/
Adding custom_domains:basic to hollow-cloud-8495.heroku.com/... /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/heroku-api-0.2.4/lib/heroku/api.rb:64:in `rescue in request': undefined method `response' for #<Excon::Errors::StubNotFound:0x000001028649a0> (NoMethodError)
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/heroku-api-0.2.4/lib/heroku/api.rb:59:in `request'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/heroku-2.26.5/lib/heroku/auth.rb:29:in `request'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/heroku-api-0.2.4/lib/heroku/api/addons.rb:34:in `post_addon'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/heroku-2.26.5/lib/heroku/command/addons.rb:76:in `block in add'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/heroku-2.26.5/lib/heroku/helpers.rb:232:in `action'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/heroku-2.26.5/lib/heroku/command/addons.rb:75:in `add'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/heroku-2.26.5/lib/heroku/command.rb:176:in `run'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/heroku-2.26.5/lib/heroku/cli.rb:9:in `start'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/heroku-2.26.5/bin/heroku:17:in `<top (required)>'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/bin/heroku:19:in `load'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/bin/heroku:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:56:17.820

不久前我遇到了同样的问题。这是回应。

你好，

我们目前在通过 Heroku-Zerigo 界面配置新域时遇到了一些问题。操作人员正在调查该项目。我们没有关于当前域有任何问题的报告，只是提供了新域。

请仅设置 mydomain.com 域。www 将作为 mydomain.com 域中的记录。

暂时，请创建一个 Zerigo 免费帐户（ [https://www.zerigo.com/managed-dns/pricing](https://www.zerigo.com/managed-dns/pricing) - 点击 FreeDNS 和 SignUp 。）

一旦项目完全解决，我们就可以将域转移到您正确的 Heroku 帐户。

*   [https://www.zerigo.com/docs/managed-dns/creating_your_first_domain](https://www.zerigo.com/docs/managed-dns/creating_your_first_domain)

*   [https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

如果需要，请联系 Heroku 支持以获取有关特定记录的更多详细信息，因为某些配置可能需要其他记录。

最好的祝福，

泽里戈支持

**编辑**

您需要添加以下内容：

```
yourdomain.com      A record 174.129.212.2
yourdomain.com      A record 75.101.163.44
www.yourdomain.com  A record 75.101.145.87 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T03:30:38.053

在遇到同样的错误（并阅读了这篇文章）后，我注册了一个 zergio 帐户并发现 Vezu 的方式不是最好的方式。添加域后，只需单击“添加片段”并从下拉菜单中选择“heroku”，它将为您配置所有内容。

事实上，它为您所做的配置与 IP 的 Vezu 所建议的完全不同，并且更符合[Heroku 制定的指导方针。](https://devcenter.heroku.com/articles/what-ip-addresses-should-i-use-to-point-my-custom-domain-to-heroku)

# trigger.io - 使用 parse.push.subscribe 和 trigger.io 的问题

> ID：10871604
> 
> 赞同：1
> 
> 时间：2012-06-03T15:31:15.373
> 
> 标签：trigger.io, parse-platform

由于提供的通知支持，我已成功（并且轻松地）将推送通知添加到我的 trigger.io 应用程序，并且 Parse.com 让这一切变得轻而易举。但是，我只能在没有频道的情况下进行广播，因为当我`parse.push.subscribe(channel, ...)`尝试订阅频道时，会出现以下错误：

```
error occurred: undefined:[unknown lineno]: ReferenceError: Can't find variable: parse 
```

trigger.io 文档对此并不广泛。有人让它工作吗？请给我一些提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:03:09.957

这里缺少我们的文档 - 感谢@PEZ 强调它！

Trigger.io 中的 Parse 方法在 forge.partners.parse 下可用，例如：

```
forge.partners.parse.push.subscribe("beta-testers",
function () {
  forge.logging.info("subscribed to beta-tester push notifications!");
},
function (err) {
  forge.logging.error("error subscribing to beta-tester notifications: "+
    JSON.stringify(err));
}); 
```

我已经用一些例子更新了我们的文档。

# java - 使用 MigLayout 创建大小不对称的图块

> ID：10871606
> 
> 赞同：2
> 
> 时间：2012-06-03T15:31:19.650
> 
> 标签：java, miglayout

我有一个有趣的布局问题，我正在使用 MigLayout 来解决它。我需要用不对称的瓷砖布局一个面板。我想出的作品，但考虑到 MigLayout 的目标是不需要嵌套面板，这是相当不雅的。我的布局需要如下所示：

![大小不对称的瓷砖](../Images/f4db33b2e4d66086c72d1e22471cccfa.png)

每个矩形都将包含一个 JPanel，其中包含各种控件。我想出了一个使用嵌套 JPanel 的解决方案。问题是是否存在不需要额外嵌套面板的更简单的解决方案。这是我的代码，因此您可以看到我如何嵌套面板：

```
/*
 * Simple code to demonstrate how to solve a unique layout problem.
 *
 * The goal is to layout panels with asymmetrical sizes, like this
 *
 * +-------+-------------------+
 * |       |                   |
 * |       |                   |
 * |       |-------------------|
 * |       |                   |
 * |       |                   |
 * |       |                   |
 * |-------|                   |
 * |       |                   |
 * |       |                   |
 * +-------+-------------------+
 *
 * The trick is to layout two panels vertically with proportional
 * spacing and then layout the two panels horizontally into a super
 * panel, also with proportional spacing. Doing it this way allows
 * any variation of the proportions, controlled easily using the
 * row and column constraints.
*/
package miglayoutdemo;

import java.awt.Color;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import net.miginfocom.swing.MigLayout;

public class AsymmetricTilesDemo
{

    public static void main(String[] args)
    {
        JFrame frame = new JFrame("Asymmetric Tiles");
        JPanel panel = new JPanel();
        frame.setContentPane(panel);
        frame.setSize(400, 400);
        // Insets and gaps are set to zero to tile the surface
        // Column constraint sets the relative column size. Both must be specified or it fails.
        panel.setLayout(new MigLayout("inset 0, gapx 0, gapy 0, fill", "[25%][75%]", "[fill]"));

        // The staggered heights are obtained by using independently laid out
        // panel, one for each column. Otherwise, the MigLayout stretches one
        // or the other cell to make a rectalinear grid of cells, and the
        // staggered height fails.
        JPanel leftPanel = new JPanel();
        JPanel rightPanel = new JPanel();
        // As the column percentages are specified above, the row constraints
        // are specified below for the left and right JPanels. Notice that
        // one is 75/25 and the other is 25/75, which staggers the two
        // horizontal separators.
        leftPanel.setLayout(new MigLayout("inset 0, gapx 0, gapy 0, fill, wrap 1", "[fill]", "[75%][25%]"));
        rightPanel.setLayout(new MigLayout("inset 0, gapx 0, gapy 0, fill, wrap 1", "[fill]", "[25%][75%]"));

        JPanel topPanelLeft = new JPanel();
        JPanel bottomPanelLeft = new JPanel();
        JPanel topPanelRight = new JPanel();
        JPanel bottomPanelRight = new JPanel();
        // Add line borders so we can see what the layout is doing.
        topPanelLeft.setBorder(BorderFactory.createLineBorder(Color.black, 1));
        bottomPanelLeft.setBorder(BorderFactory.createLineBorder(Color.black, 1));
        topPanelRight.setBorder(BorderFactory.createLineBorder(Color.black, 1));
        bottomPanelRight.setBorder(BorderFactory.createLineBorder(Color.black, 1));

        // Grow must be specified in the y direction or the panels
        // do not fill the vertical space.
        leftPanel.add(topPanelLeft, "growy");
        leftPanel.add(bottomPanelLeft, "growy");

        rightPanel.add(topPanelRight, "growy");
        rightPanel.add(bottomPanelRight, "growy");

        // Grow must be specified in the x direction or the panels
        // do not fill the horizontal space.
        panel.add(leftPanel, "growx");
        panel.add(rightPanel, "growx");

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

# facebook - 如果我使用 facebook api 知道 dialog_id，如何将消息发送到对话框？

> ID：10871607
> 
> 赞同：0
> 
> 时间：2012-06-03T15:31:21.560
> 
> 标签：facebook

[https://graph.facebook.com/me/inbox](https://graph.facebook.com/me/inbox)为我提供了带有对话框列表的 json，我可以从中获取 dialog_id。但是我如何使用这个 dialog_id 在对话框中发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:41:53.940

`https://graph.facebook.com/me/inbox`您不能使用 Graph API 发送消息。Graph API 仅具有对收件箱的读取权限。

# visual-studio-2010 - 当我使用 VS2010 时，我在创建 c++ 项目时出错

> ID：10871608
> 
> 赞同：21
> 
> 时间：2012-06-03T15:31:31.620
> 
> 标签：visual-studio-2010

**创建或打开 C++ 浏览数据库文件 r:/t1/t1.sdf 时出错。IntelliSense 和浏览信息将不适用于 C++ 项目。确保已安装 Microsoft SQL Server Compact 3.5 并且没有其他应用程序正在访问该文件。如果此问题仍然存在，请删除该文件并重新打开解决方案。**

在一篇博客中，作者说是RAMDISK或FlashDisk引起的，如果使用硬盘，问题就解决了。但我不会做，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-12T13:20:32.570

正如[WhiteRabbit](https://stackoverflow.com/users/1433648/whiterabbit)指出的，从以下位置下载“SSCERuntime-ENU.exe”：

对于 VS2010： [http ://www.microsoft.com/en-us/download/confirmation.aspx?id=5783](http://www.microsoft.com/en-us/download/confirmation.aspx?id=5783)

对于 VS2010 之后的版本：http: [//www.microsoft.com/download/details.aspx?id= 17876](http://www.microsoft.com/download/details.aspx?id=17876)

单击下载，然后选择适合您设备的版本（`32-bit = x86`、`64-bit = x64`），然后下载并安装。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-29T22:06:08.807

没有多少安装 SQL Server Compact、修复 VS 等为我解决了这个问题。最后我看到一些关于网络驱动器或 RAM 磁盘不合适的情况。

[http://social.msdn.microsoft.com/Forums/vstudio/en-US/3a15f89c-074e-413c-ac6b-f8fceb64b7b1/how-do-i-enable-intellisense-to-work-on-a-ramdisk？论坛=visualstudiogeneral](http://social.msdn.microsoft.com/Forums/vstudio/en-US/3a15f89c-074e-413c-ac6b-f8fceb64b7b1/how-do-i-enable-intellisense-to-work-on-a-ramdisk?forum=visualstudiogeneral)

我假设数据库使用与 RAM 磁盘或网络驱动器等不兼容的文件系统的低级别访问。以下设置将 sdf 文件移动到不干扰数据库所需的任何直接访问的位置。VS重新启动后，问题消失了。

tl;dr **TOOLS / Options / Text Editor / C++ / Advanced / Always use fallback location = True**

# ruby-on-rails - Twitter Bootstrap 和 RoR

> ID：10871611
> 
> 赞同：0
> 
> 时间：2012-06-03T15:31:37.800
> 
> 标签：ruby-on-rails

我已经在我的 gem 文件中包含了我的引导 gem，并且 css 代码似乎工作正常。但是现在我正在尝试实现一个下拉菜单，`$('.dropdown-toggle').dropdown()` 但我被告知我需要从引导程序下载另一个 *.js 文件。它们不都包含在宝石中吗？是否有教程可以告诉我如何使用 RoR 中的下拉菜单？

编辑：

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-03T18:22:27.843

查看 twitter-bootstrap-rails，它有可以为您进行设置的生成器。github 页面上的自述文件包含所有说明，还有一个指向 railscast 的链接，其中有两个视频解释了该做什么。

[https://github.com/seyhunak/twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails)

# internet-explorer - Firefox 和 IE 在单击链接时不会失去焦点，但 Chrome 会

> ID：10871612
> 
> 赞同：1
> 
> 时间：2012-06-03T15:31:40.013
> 
> 标签：internet-explorer, firefox, focus, anchor, blur

我有一个锚点列表，这些锚点的样式可以改变焦点和悬停时的外观。在它们被点击后，它们应该恢复正常；失去焦点/变得模糊。这在 Google Chrome 中按预期工作，但在 Firefox 和 IE 中却没有，它保持焦点。为什么呢？

这是我的代码：http: [//jsfiddle.net/8fTQs/](http://jsfiddle.net/8fTQs/)

我的猜测是 FF 和 IE 期望在单击锚点时重新加载页面，但由于这些只是指一个锚点（#; 哈希）它不会重新呈现页面（但如果它被重新加载它当然会重新渲染并失去焦点）。

如何解决这个问题？

谢谢！

编辑：我设置了正确的文档类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T23:16:24.793

你仍然需要一个`:focus`样式来帮助[键盘导航](http://24ways.org/2009/dont-lose-your-focus/)，所以你最好不要删除它。

点击后 Chrome 不会保持焦点，但 FF 和 IE 会。您可以做的是使行为*正常化*，但每次单击时都会模糊链接 - 但只是**单击！**

一个简单`$('a').click(function () {this.blur();})`的会模糊元素*（模糊=失去焦点）*但浏览器（或只是 jQuery）也会在您按下键时触发“点击”事件`Enter`。

所以一个快速而肮脏的解决方案是：`$('a').mouseup(function () {this.blur();})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:41:09.243

即使页面没有重新加载，将锚点聚焦在点击上也是正确的行为：它使标签导航在该点之后正常工作。

如果您只想在单击锚点时进行样式设置，那么听起来您想成为`:active`锚点的样式，而不是锚点。`:focus`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T07:08:25.130

正确的行为是鼠标单击后焦点**应该留**在锚点上（就像 FF 和 IE 现在所做的那样）。

已注册的[chromium 错误](https://code.google.com/p/chromium/issues/detail?id=388666)已修复，2014 年 8 月 14 日创建的[补丁](https://codereview.chromium.org/455223002)正在审核中。应该在即将到来的更新中得到修复。

# asp.net - 脚本在更新面板中无法正常工作

> ID：10871615
> 
> 赞同：2
> 
> 时间：2012-06-03T15:32:13.893
> 
> 标签：asp.net, updatepanel, tooltip

我有一个显示工具提示的脚本

```
 function BindToolTip(){
        $('.toolTip').hover(
    function () {
        this.tip = this.title;
        $(this).append(
        '<div class="toolTipWrapper">'
            + '<div class="toolTipTop"></div>'
            + '<div class="toolTipMid">'
                + this.tip
            + '</div>'
            + '<div class="toolTipBtm"></div>'
        + '</div>'
    );
        this.title = '';
        this.width = $(this).width();
        $(this).find('.toolTipWrapper').css({ left: this.width - 22 })
        $('.toolTipWrapper').fadeIn(300);

    },
function () {
    $('.toolTipWrapper').fadeOut(100);
    $(this).children().remove();
    this.title = this.tip;
}
);
    } 
```

aspx 文件如下所示：

```
<asp:UpdatePanel ID="UpdatePanelAddNews" UpdateMode="Conditional" runat="server">  
<ContentTemplate>
 <script type="text/javascript">
             Sys.Application.add_load(BindToolTip);
  </script>    
   <div class="toolTip" title="This is a simple tooltip made with jQuery"></div> 
  <asp:UpdatePanel ID="UpdatePanelDate" runat="server">
      <ContentTemplate>                          
 <asp:DropDownList ID="DropDownListYearStart" runat="server" AutoPostBack="true"
  OnSelectedIndexChanged="OnSelectedStartDateChanged" CssClass="dropdown"> </asp:DropDownList>
     </ContentTemplate>
</asp:UpdatePanel>
</ContentTemplate>
</asp:UpdatePanel> 
```

当我将 div 悬停时，它会正确显示工具提示，但是在使用下拉列表进行回发后，当我第一次悬停 div 时，它会显示两个工具提示，一个是空的，另一个工具提示是在第一个后面带有文本的。当我第二次悬停时，它只显示空的工具提示。我知道如果我删除行：this.title = ''; 从脚本它可以正常工作，但它会显示两个工具提示，我的自定义一个和默认的 Windows 工具提示。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:37:39.177

在 ContentTemplate 的最后编写脚本。喜欢，

```
<asp:UpdatePanel ID="UpdatePanelAddNews" UpdateMode="Conditional" runat="server">  
<ContentTemplate>    
<div class="toolTip" title="This is a simple tooltip made with jQuery"></div> 
<asp:UpdatePanel ID="UpdatePanelDate" runat="server">
  <ContentTemplate>                          
<asp:DropDownList ID="DropDownListYearStart" runat="server" AutoPostBack="true"
OnSelectedIndexChanged="OnSelectedStartDateChanged" CssClass="dropdown"> </asp:DropDownList>
<script type="text/javascript">
         Sys.Application.add_load(BindToolTip);
</script>    
 </ContentTemplate>
</asp:UpdatePanel>
</ContentTemplate>
</asp:UpdatePanel> 
```

希望能帮助到你。如果它解决了您的问题，请不要忘记支持它。谢谢.. ：）

# objective-c - Objective-C：需要帮助跟踪以前按下的按钮

> ID：10871623
> 
> 赞同：0
> 
> 时间：2012-06-03T15:33:41.933
> 
> 标签：objective-c, pointers, uibutton

我希望你能帮助我回答一个基于 Objective-C 的问题，该问题目前正在阻止我继续我的程序。

我有一个游戏，其中您有一个按钮网格，标题为 1、2、3 等。每个按钮都会将您带到 GameScreen UIView 并传递各种信息 - 即姓名、年龄等。如果用户回答问题正确，他被带回网格 - 我现在希望他按下的按钮显示一个刻度，而不是像以前那样只是一个带有一些文本的空白按钮。

我的问题是跟踪按下的按钮。当我返回主屏幕时，我不知道如何说“将我刚刚按下的按钮更改为刻度图像”。到目前为止，所有东西都显示为 (null)。

当我首先按下一个按钮时，我使用 'if([sender.currentTitle isEqualToString:@"1"]) 来标记我想要传递的信息 - 这很好，但是在那之后当我通过另一个视图时我丢失按下了哪个按钮。

我可以通过一个变量一直传递每个按钮唯一的变量，并提出一个 if then else 语句来测试变量的值（即 if [questionansweredcorrectly isEqualToString :@"Question1"]），但我可能有一个这里有一百个以上的按钮，太麻烦了。

我希望我已经很好地解释了这种情况，并且有人能够指出我需要在这里使用的方法。

提前致谢！

编辑：

为了响应我如何加载到其他视图中，我使用以下编码风格：

```
GameScreen *screen = [[GameScreen alloc] initWithNibName:nil  bundle:nil]; 
screen.modalTransitionStyle = UIModalTransitionStyleCoverVertical; 
[self presentModalViewController:screen animated:YES]; 
```

这就是我进入新视图的方式 - 从另一个屏幕执行相同操作以返回带有按钮的主屏幕。我在这篇文章中不使用故事板。这是否有助于澄清我如何浏览这些视图？我不使用故事板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:47:30.810

据我了解，您完全驳回了您的第一个观点。或者您重新加载第一个视图，因为您应该再次显示它。

不是 100% 了解如何加载视图，但我认为这可能会有所帮助：

要显示前一个视图（带有所有按钮），只需在您加载到第一个视图顶部的视图中使用以下代码：

```
[self dismissModalViewControllerAnimated:YES]; 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:14:32.430

这让我觉得是设计模式的问题。我不认为我完全理解这是如何实现的，但这就是我如何攻击它。

你有 QuestionGridViewController 塞满了按钮，每个按钮都显示一个 GameScreenViewController 实例，基于适当的配置

1.  按下的按钮
2.  用户。

让我们在这里关注MVC。您需要一个模型类来保存每个问题（并且可能有问题对象来封装该数据）。

您还需要一个代表用户及其详细信息。

在 QuestionGrid 的 viewDidLoad 中，从问题模型加载问题以填充视图。那些已经完成的应该设置刻度线。

对于所有这些按钮按下，使用自定义初始化程序初始化 GameScreen，该初始化程序将用户对象和问题对象作为参数。

提交 GameScreen 的答案后，更新问题对象。再次加载 QuestionGrid 时，它会加载更新的问题。两个视图控制器都不必将任何数据传递给另一个。

这是遵循 MVC 的巨大优势——您已经从逻辑中抽象出数据，并且在这样做的过程中，避免了此类问题的理智。

我不知道这是否正是您想要解决的问题，但正如 SirKaydian 所指出的，您的工作方式并不是特别明显。然而，我希望我已经展示了优秀的应用程序设计如何能够避免这些琐碎的问题。

# android - 为什么滚动时我的背景图像消失了？

> ID：10871624
> 
> 赞同：1
> 
> 时间：2012-06-03T15:34:21.590
> 
> 标签：android, xml, background

在我的 android 应用程序中，我有一个使用线性布局来显示各种文本视图行的活动。问题是在活动中上下滚动时，背景图像会消失。在模拟器中，当我按住鼠标按钮开始滚动时，bg 图像消失了。当放开鼠标按钮时，背景图像又回来了。

我在我的 xml 文件中使用它来设置 bg 图像：

```
android:background="@drawable/wallpaper" 
```

我该怎么做才能解决这种奇怪的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:37:50.347

在滚动视图上设置背景，而不是在线性布局上。

# android - GridView中ImageView下TextView描述

> ID：10871625
> 
> 赞同：0
> 
> 时间：2012-06-03T15:34:23.370
> 
> 标签：android, gridview

这是我的 ImageAdapter 类：

```
package com.javacodegeeks.android.googlemaps;

import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.TextView;

public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;

        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.muze, R.drawable.anit, R.drawable.ibadethane, R.drawable.hepsimenu
    };

    private String[] mThumbTxt = {
            "Müzeler", "Anıtlar", "İbadethaneler", "Hepsi"
    };

} 
```

如何在 ImageViews 下从 mThumbTxt 数组中添加图像描述（如在 TextView 中），而不会弄乱 GridView 结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:40:47.270

让你的观点是 a`TextView`而不是`ImageView`. 将图像设置为顶部可绘制对象：

```
textView.setCompoundDrawablesWithIntrinsicBounds(0, mThunbIds[position], 0, 0);
textView.setText(mThumbTxt[position]); 
```

这里唯一的缺点是可绘制对象将以其内部大小绘制。您可以创建一个 ClipDrawable 来解决这个问题。或者，使您的视图 a`VerticalLayout`包含 an`ImageView`和 a `TextView`。那么，从 xml 加载它会更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:46:00.097

为 gridView 添加布局的简单方法为：

**网格视图.xml：**

```
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/relaGrid"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
           <ImageView android:id="@+id/chooseImage"
                       android:src="@drawable/ph1"
                        android:layout_width="85dp"
                        android:layout_height="85dp"
                        >
                        </ImageView>
    <TextView android:id="@+id/chooseText"
                      android:layout_height="wrap_content"
                      android:layout_width="85dp"
                      android:text="TextView"
                      android:layout_below="@+id/chooseImage"
                      android:gravity="center"
                      android:singleLine="true"
                      android:ellipsize="marquee"
                      android:marqueeRepeatLimit="marquee_forever"
                      ></TextView>

</RelativeLayout> 
```

我 getView 的 ImageAdapter 方法：

```
 @Override
public View getView(int position, View convertView, ViewGroup arg2) {
View view = View.inflate(mContext, R.layout.relagrid, null);
RelativeLayout rl = (RelativeLayout) view.findViewById(R.id.relaGrid);

ImageView image = (ImageView) rl.findViewById(R.id.chooseImage);
TextView text = (TextView) rl.findViewById(R.id.chooseText);       
image.setImageResource(mThumbIds[position]);
text.setText(mThumbTxt[position]);
return rl;
} 
```

# design-patterns - Knockout.js：View-Model 函数返回代码？

> ID：10871629
> 
> 赞同：1
> 
> 时间：2012-06-03T15:34:45.613
> 
> 标签：design-patterns, knockout.js, viewmodel, revealing-module-pattern

感谢[John Papa 的精彩教程](http://johnpapa.net)。我尽力使用 knockout.js 为我的 ViewModel 实现显示模块模式

这是一个非常简单的例子：

*   有 2 个客户对象。
*   从两个对象中添加 ID 并返回它。

[http://jsfiddle.net/ThomasDeutsch/EHYfT/](http://jsfiddle.net/ThomasDeutsch/EHYfT/)

不知何故，我得到的不是返回的值，而是执行的代码？我希望在屏幕上看到结果“3”:)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T15:45:21.280

您将两个 observables 添加在一起。Observables 是函数。确保使用 () 形式获取实际值，如下所示：

```
addId = ko.computed(function () {
    return customer1.Id() + customer2.Id();
}), 
```

# javascript - Javascript逻辑“！==”运算符？

> ID：10871630
> 
> 赞同：63
> 
> 时间：2012-06-03T15:35:03.993
> 
> 标签：javascript, syntax, logical-operators

我正在重新开始 Web 开发，并且最近一直在尝试了解 jscript 的细微差别。我正在浏览构建在 Three.JS 之上的 THREEx 扩展库的源代码，并注意到了这个功能

```
THREEx.KeyboardState.prototype.pressed  = function(keyDesc)
{
    var keys    = keyDesc.split("+");
    for(var i = 0; i < keys.length; i++){
        var key     = keys[i];
        var pressed;
        if( THREEx.KeyboardState.MODIFIERS.indexOf( key ) !== -1 ){
            pressed = this.modifiers[key];
        }else if( Object.keys(THREEx.KeyboardState.ALIAS).indexOf( key ) != -1 ){
            pressed = this.keyCodes[ THREEx.KeyboardState.ALIAS[key] ];
        }else {
            pressed = this.keyCodes[key.toUpperCase().charCodeAt(0)];
        }
        if( !pressed)   return false;
    };
    return true;
} 
```

我特别关注这里的行：

```
if( THREEx.KeyboardState.MODIFIERS.indexOf( key ) !== -1 ){ 
```

我不熟悉这个 !== 运算符。我检查了 w3schools，他们的逻辑运算符列表没有包含这个。我不确定这是否拼写错误，浏览器只是将其视为 != 或者它是否具有其他含义。另外我想知道这实际上是一个逻辑运算符还是某种组合，例如！+ ==？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-06-03T15:38:40.133

您还可以在其他几种动态类型语言中找到`===`和运算符。`!==`它总是意味着这两个值不仅通过它们的“隐含”值进行比较（即，一个或两个值可能被转换以使它们具有可比性），而且还通过它们的原始类型进行比较。

这基本上意味着如果`0 == "0"`返回 true，`0 === "0"`将返回 false，因为您正在比较数字和字符串。同样，while`0 != "0"`返回 false，`0 !== "0"`返回 true。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-03T15:37:35.317

它`!=`没有类型强制。[有关比较运算符，](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comparison_Operators)请参阅MDN 文档。

另请参阅[此 StackOverflow 答案](https://stackoverflow.com/a/359509/87399)，其中包括“JavaScript：好的部分”中关于 和 问题的`==`引用`!=`。( `null == undefined`, `false == "0"`, 等)

简短的回答：*总是*使用`===`and`!==`除非你有令人信服的理由不这样做。（像[JSLint](http://www.jslint.com/)、[JSHint](http://www.jshint.com/)、[ESLint](http://eslint.org/)等工具会给你同样的建议。）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-03T15:49:00.080

复制自正式规范：[ECMAScript 5.1](http://www.ecma-international.org/publications/standards/Ecma-262.htm) section 11.9.5

> ### 11.9.4 严格等于运算符（===）
> 
> 产生*式 EqualityExpression* : *EqualityExpression* === *RelationalExpression*的评估如下：
> 
> 1.  令*lref*为评估*EqualityExpression*的结果。
> 2.  令*lval*为 GetValue( *lref* )。
> 3.  令*rref*为评估*RelationalExpression*的结果。
> 4.  设*rval*为 GetValue( *rref* )。
> 5.  返回执行严格相等比较的结果*rval* === *lval*。（见 11.9.6）
> 
> ### 11.9.5 严格不等于运算符（!==）
> 
> 产生式 EqualityExpression : *EqualityExpression* !== *RelationalExpression*的评估如下：
> 
> 1.  令*lref*为评估*EqualityExpression*的结果。
> 2.  令*lval*为 GetValue( *lref* )。
> 3.  令*rref*为评估*RelationalExpression*的结果。
> 4.  设*rval*为 GetValue( *rref* )。令*r*为执行严格相等比较*rval* === *lval*的结果。（见 11.9.6）
> 5.  如果*r*为**true**，则返回**false**。否则，返回**true**。
> 
> ### 11.9.6 严格等式比较算法
> 
> 比较*x* === *y*（其中*x*和*y*是值）产生**true**或**false**。如下进行这样的比较：
> 
> 1.  如果 Type( *x* ) 与 Type( *y* ) 不同，则返回**false**。
> 2.  Type( *x* ) 未定义，返回**true**。
> 3.  Type( *x* ) 为 Null，返回**true**。
> 4.  Type( *x* ) 是 Number，那么
>     1.  如果*x*是 NaN，则返回**false**。
>     2.  如果*y*是 NaN，则返回**false**。
>     3.  如果*x与**y*是相同的 Number 值，则返回**true**。
>     4.  如果*x*为 +0 且 y 为 -0，则返回**true**。
>     5.  如果*x*为 -0 且 y 为 +0，则返回**true**。
>     6.  返回**假**。
> 5.  如果Type( *x* )是String，那么如果*x*和*y*是完全相同的字符序列（长度相同，对应位置的字符相同），则返回**true ；**否则，返回**false**。
> *****   如果 Type( *x* ) 是布尔值，如果*x*和 y 都为**true**或都为**false ，则返回****true**；否则，返回**false**。********   如果*x*和*y*引用同一个对象，则返回**true 。**否则，返回**false**。***********

 ********** * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-03T15:37:19.170

运算符测试`!==`值是否不相等或不同类型。IE

```
var x = 5;
var y = '5';
var 1 = y !== x; // true
var 2 = y != x; // false 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-03T15:38:31.083

参考[这里](http://www.devguru.com/technologies/ecmascript/quickref/comparison_operators.html)

!== 是严格不等于运算符，仅当两个操作数不相等和/或类型不同时才返回 true 值。以下示例返回布尔值 true：

```
a !== b 
a !== "2" 
4 !== '4' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-03T15:42:46.743

`!==`

> 这是严格不等于运算符，仅当两个操作数不相等和/或类型不同时才返回 true 值。以下示例返回布尔值 true：

```
a !== b
a !== "2"
4 !== '4' 
```*********

# asp.net - ASP.NET：如何通过存储过程从 SQL Server 检索信息？

> ID：10871634
> 
> 赞同：0
> 
> 时间：2012-06-03T15:35:17.947
> 
> 标签：asp.net, vb.net, stored-procedures, datatable, xsd

所以我不确定是否有更好的方法来做到这一点，但这是我目前的设置。

1.  从我的数据库创建了一个代表我的表结构的 XSD 文件。
2.  创建了一个类文件来保存我的函数，例如下面的函数。

代码示例：

```
Public Function GetUser(ByVal UserID As String) As xsdUser.UserDataTable

        Dim SqlConn As New SqlConnection(ConfigurationManager.ConnectionStrings("MyDatabase").ConnectionString)
        Dim SqlCom = New SqlCommand("User_Retrieve", SqlConn)
        Dim Adapter As SqlDataAdapter
        Dim UserDT As New xsdUser.UserDataTable

        Using SqlCom
            SqlCom.Parameters.Add(New SqlParameter("@I_UserID", SqlDbType.NVarChar, 4)).Value = UserID
            Adapter = New SqlDataAdapter(SqlCom)
            Adapter.Fill(UserDT)
        End Using

        If UserDT IsNot Nothing AndAlso UserDT.Rows.Count > 0 Then    
             'Return DataTable here or I guess DataRow since there should just be one.
        Else
             'Handle Error here if there is no row
        End If
End Function 
```

现在对我来说，让两个文件做应该包含在一个文件中的事情似乎很奇怪。我觉得我应该有一个名为“User”的类文件，并在其中包含成员变量以及上面的类函数。但是我看到的所有教程都在使用这些数据表。最重要的是，我不确定如何处理函数末尾的 if 语句。我认为我不想返回整个 DataTable，因为我应该只有一行，而且如果我的函数应该返回数据表，我也不知道如何处理错误。我想我可以返回一个空的，然后如果我的代码中的表是空的，那么我会在那里处理它，但这似乎也很混乱。

那么任何人都可以清除其中的一些东西吗？这是从存储过程中检索信息的常用方法吗？或者是否有我在搜索结果中没有看到的更新的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:52:55.600

返回 UserDataTable 是完全可以接受的。即使它只包含一行。唯一看起来不正常的是您检查此方法中的结果，该方法属于比用户界面更低的层。另请注意，您无需检查 UserDataTable 是否为空。

我认为这条线是必需的

```
 SqlCom.CommandType = CommandType.StoredProcedure 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:52:44.833

您最终会得到一大堆文件，并且可能功能分布在两个或多个程序集（类库）中，所以不用担心。您可以返回一个数据表，并抛出一个异常（在代码示例中的 ELSE 开关中），表明某种错误。

您可以返回一个数据表，但问题是“什么是最有用的接口”？考虑到使用此方法的任何东西都必须知道如何将该数据表翻译/解析为概念上的“用户”（检查表中是否只有一行，从用户名列中获取用户名等）。

数据表是所谓的[“表模块”模式](http://martinfowler.com/eaaCatalog/tableModule.html)的实现。当您的应用程序建模非常简单的业务逻辑并且将数据库实体映射到面向对象实体的麻烦不值得时，这很有用。在 .net 工作的最初几年，我大量使用数据表，但是（除了我只需要显示数据网格的场景）对它们可能是非面向对象的程度感到沮丧：本质上，你被迫始终处理数据库行，而不是“用户”或“汽车”或“购物车”或映射到您正在建模的真实世界场景的其他实体。一旦应用程序变得有点复杂，所有这些数据表、数据行视图、表格适配器等都会变得非常混乱（至少根据我的经验）。

所以简而言之，我将创建一个“用户”类，将函数的返回类型更改为“用户”，并处理在您的方法中检索“用户”实例所需的所有数据库/验证逻辑。您可以继续使用您已经创建的数据集来提取“用户”相关数据，然后验证返回的内容并从中创建一个“用户”实例。您所指的“更新的方法”是对象关系映射器，如实体框架或 NHibernate。

# c# - foreach 循环中的实体验证，如果验证失败，则在下一个循环中保持失败

> ID：10871636
> 
> 赞同：1
> 
> 时间：2012-06-03T15:35:22.940
> 
> 标签：c#, entity-framework, validation, model

我有一个奇怪的问题。我有一个包含现有项目的数据库，我添加了一个新的验证规则，因此数据库中的某些项目不符合这个新规则。

我有一个循环，可以找到一条记录，更改一个元素，然后将其保存回数据库，如下所示：

```
foreach(int foo in bar)
{
    Model model = db.Model.Find(foo);
    model.updated = true;
    if(ModelState.IsValid)
    {
        db.Entry(model).State = EntityState.Modified;
        db.SaveChanges();
    }
} 
```

我认为对于不符合新验证规则的记录不会更新，因为`ModelState.IsValid`不会通过。但情况并非如此，它会引发验证失败异常。所以我把它放进去，`try catch`然后我想我会记录错误，这样我就知道哪些记录是无效的。所以它现在看起来像这样：

```
foreach(int foo in bar)
{
    Model model = db.Model.Find(foo);
    model.updated = true;
    try
    {
        db.Entry(model).State = EntityState.Modified;
        db.SaveChanges();
    }
    catch(Exception x)
    {
        // log error
        if(ModelState.IsValid)
        {
            db.ErrorLogs.Add(errorLog);
            db.SaveChanges();
        }
    }
} 
```

这也会引发验证失败异常，我猜是因为`try`未清除中的异常。很好，我决定尝试一下，而不是发现错误。所以它看起来像这样：

```
foreach(int foo in bar)
{
    Model model = db.Model.Find(foo);
    model.updated = true;
    try
    {
        db.Entry(model).State = EntityState.Modified;
        db.SaveChanges();
    }
    catch()
    {
    }
} 
```

现在最终发生的事情是说我有 100 条记录通过 foreach 循环循环，如果 #27 验证失败后的每条记录都失败了，因此不会更新！

这非常严重，我该如何解决？有没有办法清除验证错误？为什么错误持续到所有其他循环？是因为`db`在循环之外声明了吗？~~为什么它首先通过 ModelState.IsValid ？~~

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T15:43:38.950

我认为您将 ASP.NET MVC 验证与实体框架的验证混淆了。

*   `ModelState.IsValid`检查绑定到 MVC Action 参数的模型的有效性。
*   实体框架对它尝试保存的实体进行自己的验证。

您的模型中无效的方面似乎不是发送到您的操作方法的那些方面，而是来自数据库的那些方面。所以当模型绑定发生时，你有一个有效的对象，并且`ModelState.IsValid`是真的。但是当您尝试保存对象时，Entity Framework 仍会检测到它们无效并引发异常。

您会在实体上创建导致数据库中当前数据不正确的验证，这似乎很奇怪。考虑运行 SQL 脚本来更正数据库中的数据。

如果你不能这样做，你可以在将实体加载出数据库后尝试绑定它们：

```
var models = db.Model.Where(f => bar.Contains(f.Id)).ToList();
TryUpdateModel(models);
if(ModelState.IsValid)
{
    foreach(var model in models)
    {
        model.updated = true;
        db.Entry(model).State = EntityState.Modified;
    }
    db.SaveChanges();
} 
```

当然，上面的代码只有在*所有*模型都有效的情况下才有效。如果您想有选择地只更新正确的，您可以检查`ModelState.Errors`属性是否存在与每个模型条目相关的错误。

如果您真的想在这种特殊情况下禁止实体验证，请记住这可能很危险，您可以在保存之前简单地禁用上下文验证。

```
db.Configuration.ValidateOnSaveEnabled = false; 
```

# mysql - 如何根据条件从 db 获取时间

> ID：10871638
> 
> 赞同：1
> 
> 时间：2012-06-03T15:35:39.187
> 
> 标签：mysql, sql

我有一张表，其中的值是

```
 Table_hello
date                            col2
2012-01-31 23:01:01             a
2012-06-2  12:01:01             b
2012-06-3  20:01:01             c 
```

现在我想选择日期

1.  如果是 3 天之前或更短，则以天为单位
2.  如果是 24 小时之前或更短时间，则以小时为单位
3.  如果是 60 分钟之前或更短时间，则以分钟为单位
4.  如果是 60 秒之前或更短，则以秒为单位
5.  如果是在 3 天或更长时间之前，则为简单格式

输出

```
for row1 2012-01-31 23:01:01 
for row2 1 day ago 
for row3 1 hour ago 
```

更新我的 sql 查询

```
 select case 
            when TIMESTAMPDIFF(SECOND, `date`,current_timestamp) <= 60 
            then concat(TIMESTAMPDIFF(SECOND, `date`,current_timestamp), ' seconds')
            when TIMESTAMPDIFF(DAY, `date`,current_timestamp) <= 3 
            then concat(TIMESTAMPDIFF(DAY, `date`,current_timestamp), ' days')end
            when TIMESTAMPDIFF(HOUR, `date`,current_timestamp) <= 60 
            then concat(TIMESTAMPDIFF(HOUR, `date`,current_timestamp), ' hours')
            when TIMESTAMPDIFF(MINUTE, `date`,current_timestamp) <= 60 
            then concat(TIMESTAMPDIFF(MINUTE, `date`,current_timestamp), ' minutes')

from table_hello 
```

唯一的问题是我无法在 sql 中使用 break 和 default，例如 c++ 中的 switch case

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:43:10.370

为此使用[timestampdiff](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_timestampdiff)函数，并且`CASE`：

```
select case 
        when TIMESTAMPDIFF(SECOND, `date`,current_timestamp) <= 60 
        then concat(TIMESTAMPDIFF(SECOND, `date`,current_timestamp), ' seconds')
        when TIMESTAMPDIFF(DAY, `date`,current_timestamp) <= 3 
        and TIMESTAMPDIFF(DAY, `date`,current_timestamp) >= 1 
        ...
       end as time_diff 
from Table_hello
where TIMESTAMPDIFF(DAY, `time`,current_timestamp) >= 3 
```

# entity-framework - EF 4.3 迁移 - 如何生成降级脚本？

> ID：10871644
> 
> 赞同：15
> 
> 时间：2012-06-03T15:36:48.750
> 
> 标签：entity-framework, ef-code-first, entity-framework-4.3, entity-framework-migrations

我有一个问题，我无法在网络上找到答案。

我正在将 CodeFirst EF 4.3.1 迁移与 MsSQL 一起使用。

我已经添加了几个迁移，现在我想在两个迁移之间生成一个用于升级/降级的脚本。

对于升级，我运行以下命令，成功重现了升级脚本：

```
PM> Update-Database -Script -SourceMigration:"201205161144187_AddPostAbstract" -TargetMigration:"201205161203310_BlogLimitsAndTableRename" 
```

但是，对于降级，我运行以下命令失败并出现以下错误：

```
PM> Update-Database -Script -SourceMigration:"201205161203310_BlogLimitsAndTableRename" -TargetMigration:"201205161144187_AddPostAbstract"
Scripting the downgrade between two specified migrations is not supported. 
```

任何想法如何生成降级脚本？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-03T19:05:39.980

看起来迁移 API 期望您只想从“最新版本”进行降级。

如果`BlogLimitsAndTableRename`是您最近的迁移（最后一次应用），您可以简单地运行：

```
Update-Database -Script -TargetMigration:"201205161144187_AddPostAbstract" 
```

如果这不是您的最后一次迁移，您需要先将您的开发数据库恢复到它：

```
Update-Database -TargetMigration:"201205161203310_BlogLimitsAndTableRename" 
```

现在您应该能够使用第一个命令来获取脚本。

# windows - 安装 windows 小工具失败

> ID：10871646
> 
> 赞同：0
> 
> 时间：2012-06-03T15:37:17.010
> 
> 标签：windows, windows-desktop-gadgets

至少我完成了一个新的 Windows 小工具的开发。我将其压缩并删除了“.zip”，因此它现在是一个有效的“.gadget”文件。当我执行此文件时，弹出安装对话框，我单击“安装”但没有任何反应。有什么建议吗？当我将提取的（未压缩的）Windows 小工具复制到“C:\Users\Username\AppData\Local\Microsoft\Windows Sidebar\Gadgets”中时，我可以成功使用它，但是我之前描述的方式是不可能的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:44:05.093

听起来您可能已经压缩了一个文件夹太多。

如果您压缩了“gadget_name.gadget”，那么如果您执行此操作，它将不会安装。您需要进入 gadget.gadget 文件夹并压缩它们的文件。例如，在该文件夹中，您可能有 2 个标记为 EN-US 和图像的文件夹。您需要从那里压缩它们，然后将它们保存为“gadget_name.gadget”，将扩展名从 .zip 更改为 .gadget。

这可能是一个迟到的回复，但它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:10:42.530

检查您的小工具 zip 中没有空文件夹。

还要确保您具有正确的目录结构，例如，

```
mygadget.gadget\gadget.xml 
```

不是

```
mygadget.gadget\mygadget\gadget.xml 
```

如果您可以发布小工具 zip 文件，它也会有所帮助。

# php - 仅在 Wordpress 中将 CSS 应用于“主题选项”页面

> ID：10871651
> 
> 赞同：0
> 
> 时间：2012-06-03T15:37:29.710
> 
> 标签：php, html, css, wordpress, wordpress-theming

我当前的 PHP 代码正在工作并按照我希望的方式设置我的“*主题选项*”页面（位于 WP API 外观菜单下）的样式，但是......

CSS 样式表也被应用于 WP 仪表板中的所有其他菜单（例如影响“设置 > 常规选项”）页面。我如何才能将样式表仅应用于我的“*主题选项*”页面而不篡改其他任何内容？

我的样式表名为“theme-options.css”，位于名为“include”> include/theme-options.css 的文件夹中。下面的代码位于“theme-options.php”页面中。

```
<?php
// Add our CSS Styling
add_action( 'admin_menu', 'admin_enqueue_scripts' );
function admin_enqueue_scripts() {
    wp_enqueue_style( 'theme-options', get_template_directory_uri() . '/include/theme-options.css' );
    wp_enqueue_script( 'theme-options', get_template_directory_uri() . '/include/theme-options.js' );   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T16:40:31.770

我将 CSS 和 JS 文件与页面的构建块分开放置（就在该功能上方）。代码现在***在***我的页面构建函数中，我现在得到了我想要的结果。

之前：

```
...
// Add our CSS Styling
function theme_admin_enqueue_scripts( $hook_suffix ) {
    wp_enqueue_style( 'theme-options', get_template_directory_uri() . '/include/theme-options.css', false, '1.0' );
    wp_enqueue_script( 'theme-options', get_template_directory_uri() . '/include/theme-options.js', array( 'jquery' ), '1.0' );     

// Build our Page
function build_options_page() {

ob_start(); ?>
    <div class="wrap">
        <?php screen_icon();?>

        <h2>Theme Options</h2>

        <form method="post" action="options.php" enctype="multipart/form-data">

        ...
        ... 
```

解决方案：

```
// Build our Page
function build_options_page() {

// Add our CSS Styling
wp_enqueue_style( 'theme-options', get_template_directory_uri() . '/include/theme-options.css' );
wp_enqueue_script( 'theme-options', get_template_directory_uri() . '/include/theme-options.js' ); 

ob_start(); ?>
    <div class="wrap">
        <?php screen_icon();?>

        <h2>Theme Options</h2>

        <form method="post" action="options.php" enctype="multipart/form-data">

        ...
        ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T15:50:03.607

如果当前页面是您的特殊页面，则只能通过[检查](http://codex.wordpress.org/Function_Reference/is_page)之前的页面来添加 css 文件，例如：

```
if (is_page('Theme Options')) { // check post_title, post_name or ID here
    add_action( 'admin_menu', 'admin_enqueue_scripts' );
} 
```

=== 更新 ===

也许最好检查一下函数：

```
<?php
// Add our CSS Styling
add_action( 'admin_menu', 'admin_enqueue_scripts' );
function admin_enqueue_scripts() {
    if (is_page('Theme Options')) { // check post_title, post_name or ID here
        wp_enqueue_style( 'theme-options', get_template_directory_uri() . '/include/theme-options.css' );
    }
    wp_enqueue_script( 'theme-options', get_template_directory_uri() . '/include/theme-options.js' );   
} 
```

# algorithm - 最长重复子串问题

> ID：10871655
> 
> 赞同：1
> 
> 时间：2012-06-03T15:38:11.060
> 
> 标签：algorithm, suffix-tree

创建字符串“ABAB”的后缀树时，我只得到 2 个节点：

ABAB 和 BAB

最长的重复子字符串（“AB”）应该位于“具有至少 k 个后代的最深节点”，但我的字符串不是这种情况，这里有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:21:06.220

如果您使用某种形式的后缀树，它只有两个节点用于字符串 ABAB，那么它不会直接与您引用的算法一起使用。这就是后缀树的样子，`O`代表节点并`$`用于标记字符串的结尾。

```
 O
        / \
       /   \
      B     AB
     /       \
    O         O
   / \       / \
  $  AB$    $  AB$
 /     \   /     \
O       O O       O 
```

这里的关键特征（您正在使用的树中缺少该特征）是每个叶节点对应于字符串的后缀。

具有至少两个叶后代的最深节点位于路径 AB 处（深度是从根到达该节点所需的子串长度，在本例中为 2），这确实是最长的重复子串。

# asp.net-mvc - 缩小和 GZip 不能一起工作

> ID：10871663
> 
> 赞同：2
> 
> 时间：2012-06-03T15:38:54.710
> 
> 标签：asp.net-mvc, iis-7.5, gzip, minify

我正在使用[捆绑和缩小支持](http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx)来缩小我的 MVC **3**项目中的 css 和 Javascript 文件。缩小工作正常，但缩小的文件似乎在 IIS 7.5 上未经压缩即可通过。

这是一个已知的问题？如果是，有什么解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T12:39:01.360

使用 GZip 压缩的 .NET 捆绑和缩小将在启用动态压缩的情况下工作。根据这篇文章，在没有太多 CPU 开销的情况下启用动态压缩是相对安全的：

[在 IIS7 中启用动态压缩是否值得？](https://stackoverflow.com/questions/831041/is-it-worth-it-to-enable-dynamic-compression-in-iis7)

# android - Android 的首选后端编程

> ID：10871664
> 
> 赞同：0
> 
> 时间：2012-06-03T15:38:57.320
> 
> 标签：android, .net, ios

我是一个新的 PHP Web 开发人员，但是，我正在开发一个将在 Android 上运行的移动应用程序启动。我的编程团队是经验丰富的 .NET 开发人员。使用 .NET 进行后端开发是正确的选择吗？有没有其他更适合 Android 的编程语言（考虑将来会开发 iOS 版本）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T16:50:52.157

当然，您应该使用您的经验和生产力进行编码。如果您的团队是经验丰富的 .NET 开发人员，他们应该使用 .NET。原生移动应用程序并不关心后端是用什么编写的。它是一个通过 API 与之对话的黑匣子。它只关心 API 和为数据序列化选择的格式。.NET 开发人员似乎倾向于使用 SOAP，我认为这对于移动应用程序来说是一个糟糕的选择。数据有效负载的开销很大。

TL;DR 用你喜欢的任何方式编写后端，但要坚持简单的 REST-ish API 设计，使用 JSON 等轻量级数据序列化进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:54:21.393

我强烈推荐[Xamarin](http://xamarin.com/)的[MonoDroid](http://xamarin.com/monoforandroid)和[MonoTouch](http://xamarin.com/monotouch)。这个平台极大地加速了开发，并且考虑到您拥有一个 .NET 开发人员团队（并且很快将考虑使用 iOS）——我想不出其他开发路径可以为您提供更高的（开发）成本/收益比。

请记住 - 您的代码大部分也可以移植到 Windows 8！

# iphone - 如何在 iOS 中读取音频文件并获取样本？

> ID：10871668
> 
> 赞同：1
> 
> 时间：2012-06-03T15:39:38.117
> 
> 标签：iphone, ios, audio, signal-processing

这是我的代码。我从 iOS 库中复制了其中一些。

```
- (void)getSamplesWithFileName:(NSString *)fileName
                storeToPointer:(SInt16*)pointer
           withNumberOfSamples:(UInt32*)numberOfSamples
{
    NSFileManager* fileManager = [NSFileManager defaultManager];
    NSURL* url = [[fileManager URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask] lastObject];
    NSLog(@"%@",url);
    NSString* directory = [url path];
    NSString* nsFilePath = [directory stringByAppendingPathComponent:fileName];
    const char* filePath = [nsFilePath cStringUsingEncoding:[NSString defaultCStringEncoding]];
    CFURLRef audioFileURL =
    CFURLCreateFromFileSystemRepresentation (           // 1
                                             NULL,                                           // 2
                                             (const UInt8 *) filePath,                       // 3
                                             strlen (filePath),                              // 4
                                             false                                           // 5
                                             );
    struct AQPlayerState aqData;                                   // 1
    aqData.mDataFormat.mFormatID         = kAudioFormatLinearPCM; // 2
    aqData.mDataFormat.mSampleRate       = 8000.0;               // 3
    aqData.mDataFormat.mChannelsPerFrame = 1;                     // 4
    aqData.mDataFormat.mBitsPerChannel   = 16;                    // 5
    aqData.mDataFormat.mBytesPerPacket   =                        // 6
    aqData.mDataFormat.mBytesPerFrame =
    aqData.mDataFormat.mChannelsPerFrame * sizeof (SInt16);
    aqData.mDataFormat.mFramesPerPacket  = 1;                     // 7

    OSStatus result =
    AudioFileOpenURL (                                  // 2
                      audioFileURL,                                   // 3
                      kAudioFileReadPermission,//fsRdPerm                                       // 4
                      0,                                              // 5
                      &aqData.mAudioFile                              // 6
                      );
    NSLog(@"Play back open status:%ld", result);
    CFRelease (audioFileURL);                               // 7
    UInt32 dataFormatSize = sizeof (aqData.mDataFormat);    // 1
    AudioFileGetProperty (                                  // 2
                          aqData.mAudioFile,                                  // 3
                          kAudioFilePropertyDataFormat,                       // 4
                          &dataFormatSize,                                    // 5
                          &aqData.mDataFormat                                 // 6
                          );
    UInt32 numBytesReadFromFile;
    UInt32 numPackets = 100000;
//    pointer = malloc(numPackets * sizeof(SInt16));
    AudioFileReadPackets(aqData.mAudioFile, false, &numBytesReadFromFile, NULL, 0, &numPackets, pointer);
    printf("%ld", numBytesReadFromFile);
    *numberOfSamples = numBytesReadFromFile;    
} 
```

但似乎我得到了错误的数据！我测试了声音'Ahhhhhh'，并获得了非常高的过零率。我怎样才能阅读这个音频文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:34:50.687

使用[扩展音频文件服务](https://developer.apple.com/library/ios/#documentation/MusicAudio/Reference/ExtendedAudioFileServicesReference/Reference/reference.html)

使用 ExtAudioFileOpenURL 打开文件，使用 ExtAudioFileRead 将它们读入缓冲区。适用于 Core Audio 支持的所有格式。

如果您想学习 Core Audio 编程，我可以推荐这本书[Learning Core Audio: A Hands-On Guide to Audio Programming for Mac 和 iOS 。](https://rads.stackoverflow.com/amzn/click/com/0321636848)

编辑：第一个链接中的文档有示例代码，可能会对您有所帮助。

# python - 从数据存储实体获取键名

> ID：10871669
> 
> 赞同：1
> 
> 时间：2012-06-03T15:39:45.840
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在为 ndb 实体使用命名键：

```
entity = MyEntity(id='MyNamedKey', count=mycount) 
```

当我从数据存储中获取实体时，实体的密钥类型为“密钥”，如下所示：

```
Key('MyEntity', 'MyNamedKey') 
```

从密钥中获取“MyNamedKey”部分的好方法是什么？

我尝试了以下方法，但它可能不是正确的方法

```
entity.key._Key__pairs[0][1] 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T16:40:35.523

基于对[NDB Key Class](https://developers.google.com/appengine/docs/python/ndb/keyclass)的粗略阅读，看起来`id()`or`string_id()`方法是合适的。

# seo - 下一个和上一个链接按钮如何影响爬虫

> ID：10871671
> 
> 赞同：0
> 
> 时间：2012-06-03T15:40:09.340
> 
> 标签：seo, googlebot

我是 SEO 新手，我做了研究并阅读了几个指南，但我仍然感到困惑。

谷歌指南说

> 避免创建复杂的导航链接网络，例如将您网站上的每个页面链接到每个其他页面。

我有一个电子商务网站。我们打算为每期杂志创建一个页面。问题页面将具有下一个和上一个链接按钮，它们将从一个问题移动到另一个问题。

这是一个坏主意，我违反了这条规则吗？还是谷歌在谈论另一种情况？

这会导致索引所有 1000 个问题吗？鉴于链接是动态的，我将使用 URL 重写。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:42:14.043

如果你想用一个小网站完全控制你的linkjuice传输和谷歌的着陆页，不推荐使用这种方法。

但是，如果它是用于具有超过 1k 的唯一页面的网站（您无法完全控制和影响网络爬虫的行为），您可以使用它来简化爬虫索引工作和用户的登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T01:02:20.710

分页可能是 SEO 的一个相当复杂的方面，尤其是对于电子商务网站。

以下是一些一般提示：

*   如果您有一个“查看全部”页面，您可能应该将所有分页页面 rel="canonical" 到该页面。这是可以接受的，因为内容相同
*   如果您没有“查看全部”页面，但希望 Google 将首页视为“规范”页面，或者您希望将所有用户吸引到首页，则使用 rel=next/prev 属性来“将您喜欢的页面组合在一起
*   对于电子商务分面导航，您可能应该通过 Google 网站管理员工具结合使用 rel=next/prev 和查询参数控件

在 2012 年 6 月的 SMX 高级会议上，有一些很好的演示和实时博客文章突出了这些方面的一些内容。更值得注意的是，谷歌员工 Maile Ohye 在那次会议上发表了讲话……她有点像分页女王；）

*   [http://www.slideshare.net/audette/seo-for-pagination-faceted-navigation-canonicalization-hits-and-misses](http://www.slideshare.net/audette/seo-for-pagination-faceted-navigation-canonicalization-hits-and-misses)
*   [http://outspokenmedia.com/internet-marketing-conferences/pagination-canonicalization-for-the-pros-smx-advanced-2012/](http://outspokenmedia.com/internet-marketing-conferences/pagination-canonicalization-for-the-pros-smx-advanced-2012/)
*   [http://www.bruceclay.com/blog/2012/06/pagination-canonicalization-for-the-pros-smx-advanced/](http://www.bruceclay.com/blog/2012/06/pagination-canonicalization-for-the-pros-smx-advanced/)

您可能还想观看这个与 Maile 谈论分页的 Google 视频[http://googlewebmastercentral.blogspot.com/2012/03/video-about-pagination-with-relnext-and.html](http://googlewebmastercentral.blogspot.com/2012/03/video-about-pagination-with-relnext-and.html)

最后要注意... Bing 目前不支持 rel=next/prev：[http ://searchengineland.com/no-bing-doesnt-support-pagination-attributes-to-consolidate-pages-in-a -系列-118694](http://searchengineland.com/no-bing-doesnt-support-pagination-attributes-to-consolidate-pages-in-a-series-118694)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T09:04:27.677

如果我理解正确，是的，谷歌正在谈论另一种情况。

问题页面上的下一个和上一个链接，用于从一个问题导航到另一个问题，它们`<link rel="next" ... >`与`<link rel="previous" ... >`出现在`<head> ... </head>`html 源代码部分中的链接不同。

Google 会将包含`<link rel="next" ... >`和/或的网页`<link rel="previous" ... >`视为一系列网页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T22:34:45.267

[这不会是谷歌的问题](http://googlewebmastercentral.blogspot.com/2011/09/pagination-with-relnext-and-relprev.html)。他们清楚地解释了为什么这是一件好事以及如何正确地做。

# c - 使用 fscanf 时的无限循环

> ID：10871673
> 
> 赞同：4
> 
> 时间：2012-06-03T15:40:46.877
> 
> 标签：c, file, infinite-loop

我用 C 编写了这个简单的程序，因为我现在正在大学学习 FILES。我获取了一个包含上次比赛结果列表的 txt 文件，因此我的程序将显示我想要格式化的数据。这是我的代码：

```
/* Esercizio file Motogp */
#include <stdio.h>
#define SIZE 20

int main ()
{
    int pos, punt, num;
    float kmh;
    char nome[SIZE+1], cognome[SIZE+1], moto[SIZE+1];
    char naz[SIZE+1], nome_file[SIZE+1];

    FILE *fp;

    printf ("Inserisci il nome del file da aprire: ");
    gets (nome_file);

    fp = fopen (nome_file, "r");

    if (fopen == NULL)
        printf ("Errore nell' apertura del file %s\n", nome_file);
    else {

        while (fscanf (fp, "%d %d %d %s %s %s %s %.2f",
                &pos, &punt, &num, nome, cognome, naz, moto, &kmh) != EOF ) {

              printf ("Posizione di arrivo: %d\n", pos);
              printf ("Punteggio: %d\n", punt);
              printf ("Numero pilota: %d\n", num);
              printf ("Nome pilota: %s\n", nome);
              printf ("Cognome pilota: %s\n", cognome);
              printf ("Nazione: %s\n", naz);
              printf ("Moto: %s\n", moto);
              printf ("Media Kmh: %d\n\n", kmh);
        }
    }

    fclose(fp);

    return 0;
} 
```

还有我的txt文件：

```
1   25  99  Jorge LORENZO    SPA    Yamaha  164.4   
2   20  26  Dani PEDROSA     SPA    Honda   164.1   
3   16  4   Andrea DOVIZIOSO ITA    Yamaha  163.8   
4   13  1   Casey STONER     AUS    Honda   163.8   
5   11  35  Cal CRUTCHLOW    GBR    Yamaha  163.6   
6   10  19  Alvaro BAUTISTA  SPA    Honda   163.5   
7   9   46  Valentino ROSSI  ITA    Ducati  163.3   
8   8   6   Stefan BRADL     GER    Honda   162.9   
9   7   69  Nicky HAYDEN     USA    Ducati  162.5   
10  6   11  Ben SPIES    USA    Yamaha  162.3   
11  5   8   Hector BARBERA   SPA    Ducati  162.1   
12  4   17  Karel ABRAHAM    CZE    Ducati  160.9   
13  3   41  Aleix ESPARGARO  SPA    ART 160.2   
14  2   51  Michele PIRRO    ITA    FTR 160.1   
15  1   14  Randy DE PUNIET  FRA    ART 160.0   
16  0   77  James ELLISON    GBR    ART 159.9   
17  0   54  Mattia PASINI    ITA    ART 159.4   
18  0   68  Yonny HERNANDEZ  COL    BQR 159.4   
19  0   9   Danilo PETRUCCI  ITA    Ioda    158.2   
20  0   22  Ivan SILVA   SPA    BQR 158.2 
```

当我运行我的程序时，它返回给我第一个的无限循环。为什么？是否有其他功能可以读取这些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:53:52.890

您的问题是您没有进行任何错误检查。EOF 仅在文件末尾返回，但`fscanf`返回它匹配的参数数量，否则即使为 0。

在您的代码中，`fscanf`第一次匹配并读入变量，之后返回 0。然后变量会保留原始内容，并且您会永远打印它。

如果您在编译代码时出现警告，您会发现有多个问题：

```
test.c:23:51: warning: invalid conversion specifier '.'
      [-Wformat-invalid-specifier]
        while (fscanf (fp, "%d %d %d %s %s %s %s %.2f",
                                                ~~^ 
```

和

```
test.c:33:36: warning: conversion specifies type 'int' but the argument has type
      'double' [-Wformat]
              printf ("Media Kmh: %d\n\n", kmh);
                                  ~^       ~~~
                                  %f 
```

如果您正在记录或检查 的返回值`fscanf`，您会意识到您没有`\n`在每一行的末尾进行检查。您的 fprintf 应该（可能）看起来更像这样：

```
while (fscanf (fp, "%d %d %d %s %s %s %s %.2f\n", 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T15:55:34.377

您需要在每次`fscanf`调用后吞下行尾字符 - 例如在 while 块的开头：

```
{
    fgetc(fp);
    ...
} 
```

有关更多详细信息，请参阅此[Microsoft 知识库文章](http://support.microsoft.com/kb/60336)（解释适用于任何 C 编译器）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T16:32:00.470

这个有效（借自@Mahmoud Al-Qudsi；我不想要任何积分）

```
#include <stdio.h>
#define SIZE 20

int main (int argc, char **argv)
{
    int pos, punt, num;
    float kmh;
    char nome[SIZE+1], cognome[SIZE+1], moto[SIZE+1];
    char naz[SIZE+1];

    FILE *fp;

    fp = fopen (argv[1], "r");

    if (!fp ) { printf ("Errore nell' apertura del file %s\n", argv[1]); return 0; }

        while (fscanf (fp, "%d %d %d %s %s %s %s %f\n",
                &pos, &punt, &num, nome, cognome, naz, moto, &kmh) == 8 ) {

              printf ("Posizione di arrivo: %d\n", pos);
              printf ("Punteggio: %d\n", punt);
              printf ("Numero pilota: %d\n", num);
              printf ("Nome pilota: %s\n", nome);
              printf ("Cognome pilota: %s\n", cognome);
              printf ("Nazione: %s\n", naz);
              printf ("Moto: %s\n", moto);
              printf ("Media Kmh: %f\n\n", kmh);
        }

    fclose(fp);

    return 0;
} 
```

# objective-c - 我的套接字代码有什么问题？

> ID：10871676
> 
> 赞同：1
> 
> 时间：2012-06-03T15:41:04.280
> 
> 标签：objective-c, c, sockets

我正在开发我的 Android 应用程序的 iOS 版本，它通过常规 TCP 连接不断向服务器发送一些二进制数据。虽然 Java 代码可以正常工作，但我的纯 C 代码却不能——在第一组数据发送到服务器后连接中断。我设法使用 CFNetwork 框架重新实现 Java 解决方案，但是我的 C 代码仍然是一个问题......

C 代码（错误检查和无趣的代码被删除）：

```
mSocket = socket(AF_INET, SOCK_STREAM, 0);
//...        
connect(mSocket, (struct sockaddr *)&sin, sizeof(sin));
int keepalive = 1;  
int res = setsockopt(mSocket, SOL_SOCKET, SO_KEEPALIVE, (void *)&keepalive, 
                          sizeof(int));

int set = 1;
setsockopt(mSocket, SOL_SOCKET, SO_NOSIGPIPE, (void *)&set, sizeof(int));

unsigned char buffer* = //...;
int ret = send(mSocket, buffer, bufferLen, 0);  //handshake with server, runs fine

while(/*there is new data*/) {
       buffer = new_data(); //some fake method
       ret = send(mSocket, buffer, bufferLen, 0); //On the second iteration 
                                                  //write returns -1
} 
```

然而，这个基于 CFNetwork 的 Objective-C 代码工作得很好......

Objective-C 代码：

```
 CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, 
                                   host, 
                                   port, 
                                   &readStream, 
                                   &writeStream);
 CFWriteStreamOpen(mServerWriteStream);

 while(/*there is new data*/) {
     NSData* data = //....
     int wroteBytes = CFWriteStreamWrite(mServerWriteStream, [data bytes], [data length]);
 } 
```

所以我对我在 C 代码中做错了什么感到困惑，并会感谢任何提示

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:04:54.187

如果您需要常规 TCP 连接，则需要使用此类协议创建套接字。代替：

```
mSocket = socket(AF_INET, SOCK_STREAM, 0); 
```

您应该将其创建为：

```
#include <netinet/in.h>
mSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); 
```

在我的系统上，IPPROTO_TCP 被定义为 6 而不是 0。我怀疑你有类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T04:25:32.007

setsockopt() 必须在 connect() 之前执行，否则将被忽略。

# php - PHP函数构建一个默认变量？

> ID：10871677
> 
> 赞同：3
> 
> 时间：2012-06-03T15:41:10.833
> 
> 标签：php, function

我正在尝试构建一个具有 2 个默认值的函数，但在某些情况下，我只需要提供第一个参数，而其他只需要提供第二个。PHP中有没有一种方法可以做到这一点，或者有没有一种方法可以做我想做的被认为是标准的事情？

例子

```
function ex($a, $b = null, $c = null) {
    ....
}

ex($a, $b, $c) // WORKS FINE

ex($a) // WORKS FINE

ex($a, $b) // WORKS FINE

ex($a, $c) // WANT VAR C TO BE VAR C IN THE FUNCTION AND NOT VAR B 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T15:42:35.120

```
ex($a, $c) // WANT VAR C TO BE VAR C IN THE FUNCTION AND NOT VAR B 
```

跳过第二个参数：

```
ex($a, null, $c); 
```

**[在官方文档中了解更多信息](http://php.net/manual/en/functions.arguments.php)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T15:42:42.780

就这样称呼它：

```
ex($a, null, $c); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T16:05:33.437

您可以使用关联的数组

考虑以下代码：

```
<?php

function tryThis($parms)
{
  $defaults = array(
      'a' => 5,
      'b' => null,
      'c' => 'Wibble' );
   $parms = array_merge($defaults, $parms);
   var_dump($parms);
}

// Use it as follows

tryThis(array('a'=>7, 'c'=>'Hello'));
tryThis(array('b'=>'Hi There'));

?> 
```

它使人们可以将参数按任何顺序排列，并允许任何参数的默认值。唯一的缺点是您必须通过关联的数组访问参数。

# android - OnTouch 事件，手指在屏幕上但没有移动

> ID：10871679
> 
> 赞同：1
> 
> 时间：2012-06-03T15:41:26.870
> 
> 标签：android, touch-event

当用户将手指放在视图上超过 1 秒时，我想执行一个操作。

使用，`OnTouch`我可以访问`ACTION_UP`和。`ACTION_DOWN``ACTION_MOVE`

问题是，如果用户将手指放在屏幕上并且不移动手指，`ACTION_MOVE`则不会触发，因此我无法执行我的操作。

我确切地说我想在 1 秒后执行我的操作，但同时用户的手指仍然在屏幕上。

事实上，我需要感觉到用户的手指在屏幕上，即使他没有移动它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:55:52.817

您可以使用 TimerTask 类并安排将在特定时间后运行的任务。

[这是一个例子。](http://developer.android.com/resources/articles/timed-ui-updates.html)

如果用户在 1000 毫秒之前抬起手指，那么只需取消在 ACTION_UP 事件上安排的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:24:18.987

或者您可以使用 longclickListener :)

```
View myView = findViewById(R.id.myView);
wv.setOnLongClickListener(new OnLongClickListener() {

    public boolean onLongClick(View v) {
        //DO SOMETHING HERE
        return true;
    }
}); 
```

# javascript - 将外部页面中的文本片段导入 Google Chrome 扩展程序

> ID：10871680
> 
> 赞同：0
> 
> 时间：2012-06-03T15:41:42.563
> 
> 标签：javascript, html, google-chrome-extension

我正在尝试开发一个简单的谷歌浏览器扩展。它的作用是在页面上显示下载次数（计数）并将其显示在弹出窗口中。

需要监控的页面是登录后才能访问的页面。

所以我需要基本上使用 html 和 javascript 从页面中“抓取”计数并将其显示在弹出窗口中。到目前为止，我已经创建了扩展的准系统：

```
{
  "name": "Downloads Logger",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Monitors Number Of Downloads",
  "browser_action": {
    "default_icon": "icon.png"
  },
  "permissions": [
    "http://exampledownloadpage.com/loggedin/"
  ]
} 
```

接下来我该怎么做？我需要扩展的背景页面吗？我已经阅读了扩展文档并解压了官方 gmail 扩展并尝试查看它是如何工作的，但它似乎利用“提要”来获取它的数据。谁能指出我正确的方向？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:56:39.303

如果您只想在 browser_action 中显示下载次数，那么您不需要后台页面，但如果您想每分钟左右监控下载量，那么您需要。要获得下载计数，您可以使用 XMLHttpRequest 下载页面源，然后使用.....

```
var page = document.implementation.createHTMLDocument("");
page.documentElement.innerHTML = pageSource;  // assuming the source for the page you downloaded with httprequest is in pageSource 
```

...然后您可以使用诸如 querySelector 之类的东西来获取您感兴趣的页面的文本，例如.....

```
downloadstats = page.querySelector('.downloadstats').textContent.trim(); 
```

希望这会让你开始。

这是一个简单的（没有错误检查或其他什么）示例，它从 stackoverflow 获取您的代表点.....

```
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4) {
        var page = document.implementation.createHTMLDocument("");
        page.documentElement.innerHTML = this.responseText;
        var score = page.querySelector('[title^="your reputation;"]').textContent.trim();
        alert('You have ' + score + ' rep points.');
    }
}
xmlhttp.open("GET", "http://stackoverflow.com", true);
xmlhttp.send(); 
```

# android - 如何为钛 android 应用程序设置 Facebook 应用程序？

> ID：10871681
> 
> 赞同：1
> 
> 时间：2012-06-03T15:41:51.650
> 
> 标签：android, facebook, titanium

目前我正在开发 Titaninum Android 应用程序。首先让我告诉你我对钛 SDK 很陌生。我正在学习它。我需要在该应用程序中实现 Facebook 登录。我刚刚在 facebook 上注册了一个应用程序。在 facebook 上，我注意到 Native android App 的选项。我启用了它，但它要求提供 Android 密钥哈希、Android 包名称、Android 类名称和 Android 市场 URI。请任何人指导我这些参数以及如何在我的应用程序中设置它们以用于应用程序开发和测试目的？

# android - 当另一个意图完成时启动一个意图

> ID：10871691
> 
> 赞同：0
> 
> 时间：2012-06-03T15:43:36.673
> 
> 标签：android, email, android-intent, photo, wait

我的 Android 应用程序遇到了一些问题。当另一个意图完成时，我需要启动一个意图。问题是两个意图是同时启动的（我不知道为什么）。这是我的代码：

在此对话框中，我询问用户是否想在发送电子邮件之前拍照（当然我想发送带有照片的电子邮件）。好的？

```
private Dialog comprobarFoto() {
        AlertDialog.Builder builder = new AlertDialog.Builder(this); 

        builder.setMessage("¿Desea adjuntar una foto con este mensaje de su posición actual?");
        builder.setPositiveButton("Si", new OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                hacerFoto();
                enviarMail(true);
                dialog.cancel();
            }
        });
        builder.setNegativeButton("No", new OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                enviarMail(false);
                dialog.cancel();
            }
        }); 
        return builder.create();    
    } 
```

这是我创建电子邮件的方法

```
private void enviarMail(boolean foto) {
        if(locMail!=null) {
            Intent i = new Intent(Intent.ACTION_SEND);  
            i.setType("message/rfc822");
            i.putExtra(Intent.EXTRA_SUBJECT,"Quiero que sepas donde estoy!"); 
            if(foto && fotoPath != null && fotoPath.length()>0) {
                i.putExtra(Intent.EXTRA_STREAM, Uri.parse(fotoPath));
            }
            i.putExtra(Intent.EXTRA_TEXT,"Hola!\n Estoy en la dirección:" +
                    "\n" + localizarDireccion() +
                    "\n\n(lat= " + dfmail.format(locMail.getLatitude()) + ")" +
                    "\n(long=" + dfmail.format(locMail.getLongitude()) + ") " +
                    "\n \n[Enviado desde GeoLocation]" );  
            startActivity(i);
        }else{
            dialogError("No se puede encontrar una localización").show();
        }
    } 
```

这是我拍照的方法：

```
private void hacerFoto() {  
        //El gran quebradero de cabeza aquí fue que no le daba permisos a la aplicación para escribir en la tarjeta. En el manifest se puede comprobar esta directiva
        File carpeta = new File(Environment.getExternalStorageDirectory () + "/GeoLocation/images"); 
        if(!carpeta.exists()){
            carpeta.mkdirs();
        }
        fotoPath = Environment.getExternalStorageDirectory() + "/GeoLocation/images/GLPict"+cogerFecha()+".jpg";
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        Uri output = Uri.fromFile(new File(fotoPath));
        intent.putExtra(MediaStore.EXTRA_OUTPUT, output);
        startActivityForResult(intent, 1);
    } 
```

问题是 sendMail (enviarMail) 的意图不会等到第一个方法 takePhoto (hacerFoto) 完成。是否有一些方法可以让我对 sendMail 意图说等到方法 takePhoto 完成？

谢谢大家，对不起我的英语！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:51:07.023

开始第一个意图`startActivityForResult(intent, requestCode)`，当它返回`onActivityResult`时被调用，然后你可以从那里开始第二个意图。

编辑::这样做::

```
private Dialog comprobarFoto() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this); 

    builder.setMessage("¿Desea adjuntar una foto con este mensaje de su posición actual?");
    builder.setPositiveButton("Si", new OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            hacerFoto();
      ///////////// do not call enviarMail(true) from here, call it from onActivityResult, see below //////////////////
            dialog.cancel();
        }
    });
    builder.setNegativeButton("No", new OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            enviarMail(false);
            dialog.cancel();
        }
    }); 
    return builder.create();    
}

@Override
protected void onActivityResult(int reqCode,int resultCode,Intent intent)
{
    if(resultCode == Activity.RESULT_OK)
    {
        if( reqCode == 1)
            enviarMail(true); //////// call from here ///////   
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:45:48.597

你不能使用 onFinish() 或 onStop() 来启动下一个意图吗？

# salesforce - 如何将公式放在汇总字段摘要之上？

> ID：10871693
> 
> 赞同：1
> 
> 时间：2012-06-03T15:43:39.363
> 
> 标签：salesforce, apex-code, force.com

**设置**

我有一个 Master-Detail 关系，在 master 上，我总结了 Detail 对象的一个​​字段。

**问题：**

我需要允许用户选中主对象上的一个框，它将总和加 1 或减 1。我该怎么做？

这是我尝试过的：

1.  在触发器内主增量/减量的更新后触发器中。当然我得到一个错误：

    预期的异常，请联系您的管理员： NonCashCompAfterUpdate: AfterUpdate 的执行导致：

2.  创建了一个新字段，并将现有字段用作助手。基本上，我已经隐藏了旧的 RFS，同时仍在使用它。这行得通，但我想看看是否有更好的方法。

在我走得更远之前，我想检查一下想法。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T18:58:01.647

无法直接更改 Salesforce 中汇总汇总字段的值，除非更改基础详细记录。据我了解，第二个提案将涉及三个字段，即汇总摘要、复选框和显示的摘要（这将是一个公式字段）。显示的摘要字段如下所示：

```
Rollup_Summary_Field__c + IF(Checkbox_Field__c, 1, -1) 
```

Apex 中也保留了汇总汇总字段的只读性质，因此您无法通过触发器对其进行更改。据推测，这就是您得到的错误的性质，尽管您所附的摘录省略了实际错误。

# ruby-on-rails - 为什么 Heroku 在应用程序空闲一段时间后重新编译我的资产？

> ID：10871696
> 
> 赞同：1
> 
> 时间：2012-06-03T15:44:25.183
> 
> 标签：ruby-on-rails, heroku, asset-pipeline

在生产中（在 Heroku 上），资产不应该在启动时编译一次，然后再编译一次吗？

```
/production.rb
config.serve_static_assets = false
config.assets.compress = true
config.assets.compile = false
config.assets.digest = true 
```

当有人有一段时间没有点击我的应用程序时，事情就闲置了，当那个新的、新的请求进来时，资产似乎被重新编译了？？？

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:02:25.160

在 Heroku 上，如果您的应用程序空闲一个小时，测功机将进入待机状态。这就是为什么当您重新访问您的应用程序时，第一次加载需要一些时间。您提到“启动”时间-这正是您的测功机重新启动后发生的情况，**一旦您推送，您的实例就不会连续运行。**

当测功机恢复活力时，您的资产将需要预编译，因为您已`config.assets.compile`设置为 false。这种行为确实不寻常。

如果你想避免这种情况，你可以`curl`每半小时为你的 heroku 实例设置一个 cron 作业。

# ios - 如何衡量和比较两种不同实现的性能？

> ID：10871697
> 
> 赞同：0
> 
> 时间：2012-06-03T15:44:43.043
> 
> 标签：ios, xcode, performance, xcode4, instruments

我有两种不同的算法，想知道哪一种在 OpenGL ES 中表现更好。

Instruments 中有这个 Time Profiler 工具，它告诉我哪一行代码消耗了总处理时间的百分比，但这总是与这个算法有关。

如何获得绝对值，以便比较哪种算法性能更好？实际上，我只需要占整体 CPU 占用率的百分比。在时间探查器中找不到它。只是消耗时间的百分比，而不是整体 CPU 工作负载。

还有一个 WWDC 节目谈论一些漂亮的 CPU 跟踪器，它分别显示每个内核。我需要哪种性能工具，我必须在哪些值上进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:10:30.443

您所说的优化 OpenGL ES 性能的情况是 Time Profiler 不太适合帮助您解决的问题。Time Profiler 只是测量在各种函数和方法上花费的 CPU 端时间，而不是渲染时在 GPU 上的实际负载。此外，iOS GPU 的延迟特性意味着绘图调用的处理实际上可能比您预期的要晚得多，导致某些功能看起来像瓶颈，而实际上并非如此。它们恰好发生在由早期调用排队的操作最终执行时。

作为建议，不要以每秒帧数为单位，而是以毫秒为单位报告从帧渲染开始到 a `glFinish()`or`-presentRenderbuffer:`调用之后所花费的时间。当您进行分析时，您希望直接处理渲染所需的时间，因为更容易理解您对这个数字的影响，而不是它的倒数，每秒帧数。此外，正如您所发现的，iOS 将其显示帧速率限制在 60 FPS，但您可以测量远低于 16.7 毫秒的渲染时间，以区分两种快速方法之间的差异。

除了基于时间的测量，查看 OpenGL ES Driver 工具中的 Tiler 和 Renderer Utilization 统计数据，以了解您在 GPU 的顶点和片段处理部分上施加的负载。当与渲染时应用程序的整体 CPU 负载相结合时，这可以合理地表示一种方法与另一种方法的效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:30:46.060

为了回答您的最后一个问题，Time Profiler 仪器具有 CPU 策略，可让您分别查看每个 CPU 内核。仪器列表上方是三个小按钮，最初选择中间的按钮。

![在此处输入图像描述](../Images/ad8fd77add9c0d9bb4ddf540c7886543.png)

单击左侧按钮以显示 CPU 策略。

![在此处输入图像描述](../Images/4daf7edbd286000ef2a7c61e8baabdbe.png)

# drupal-7 - 规则动作：添加节点

> ID：10871698
> 
> 赞同：1
> 
> 时间：2012-06-03T15:44:52.437
> 
> 标签：drupal-7, drupal-rules

有没有办法（当我添加用户时）以他为作者创建一个节点？

是否可以编写自己的动作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T23:44:39.600

是的，是的。

对于第一个，您需要[实体 API](http://drupal.org/project/entity)模块，该模块将为您提供一个名为“创建新实体”的新操作。您可以将其与“保存新用户帐户后”事件一起使用，以创建一个以新创建的用户为作者的新节点。我不会详细介绍，因为当您浏览 UI 时，它是不言自明的。

其次，您需要实施[`hook_rules_action_info()`](http://drupalcontrib.org/api/drupal/contributions!rules!rules.api.php/function/hook_rules_action_info/7). 文档页面中的此示例包含创建操作所需的所有属性和一些可选属性：

```
function hook_rules_action_info() {
  return array(
    'mail_user' => array(
      'label' => t('Send a mail to a user'), 
      'parameter' => array(
        'user' => array(
          'type' => 'user',
          'label' => t('Recipient'),
        ),
      ), 
      'group' => t('System'), 
      'base' => 'rules_action_mail_user', 
      'callbacks' => array(
        'validate' => 'rules_action_custom_validation', 
        'help' => 'rules_mail_help',
      ),
    ),
  );
} 
```

# c# - 使用此字符串填充 DateTime 对象 03-06-2012 08:00 am

> ID：10871703
> 
> 赞同：3
> 
> 时间：2012-06-03T15:46:14.837
> 
> 标签：c#, .net, datetime, datetime-parsing

如何从此“03-06-2012 08:00 am”字符串填充 C# DateTime 对象。

我正在尝试一些以下类型的代码：

```
DateTime lectureTime  = DateTime.Parse("03-06-2012 08:00 am"); 
```

我正在使用基于这个[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)插件的 jQuery 来生成日期时间。

更新 -

下面有很多答案，还有很多东西可以清除这个小问题的基础知识从下面的快照中，您可以看到我在 Visual Studio 调试期间尝试过的内容和收到的内容 ![在此处输入图像描述](../Images/c2a59fed5cfe66f7b30f20fd59309839.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T15:51:14.323

```
string lectureTime = "03-06-2012 08:00 am";
DateTime time = DateTime.ParseExact(lectureTime , "dd-MM-yyyy hh:mm tt", CultureInfo.InvariantCulture); 
```

*   dd：天 [00-31]
*   MM：月[00-12]
*   yyyy: 年 [0000-9999]
*   '-'：这些用破折号分隔
*   hh: 小时 [00-12]
*   mm：分钟[00-60]
*   tt：时间 [am, pm]（不区分大小写）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T15:51:27.707

如果您有正确的文化，您的代码无需修改即可工作。但是您可能使用与生成字符串的程序不同的日期格式。

我建议始终指定`CultureInfo`时间：

*   解析`DateTime`由另一个系统生成的。
*   输出`DateTime`将被另一个系统解析的 a （不只是显示给您的用户）。

试试这个：

```
CultureInfo cultureInfo = new CultureInfo("en-GB"); // Or something else?
DateTime lectureTime  = DateTime.Parse("03-06-2012 08:00 am", cultureInfo); 
```

在线查看它：[ideone](http://ideone.com/jmaBl)

**`DateTime.Parse`和之间的区别`DateTime.ParseExact`**

如果您希望 .NET 尽最大努力解析字符串，请使用`DateTime.Parse`. 它可以处理多种常见格式。

如果您事先知道应该如何格式化日期，并且想要拒绝与此格式不同的任何内容（即使可以正确解析且没有歧义），请使用`DateTime.ParseExact`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T15:49:29.920

您需要使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)。就像是

```
DateTime lectureTime  = DateTime.ParseExact("03-06-2012 08:00 am", "dd-MM-yyyy hh:mm tt", CultureInfo.InvariantCulture); 
```

# java - 可以运行的jar文件可以解释回java源代码吗

> ID：10871704
> 
> 赞同：4
> 
> 时间：2012-06-03T15:46:27.927
> 
> 标签：java, jar, jvm, exe

当我从 eclipse的**java 源代码文件创建一个****可运行的 jar 文件**时，我相信它会创建一个类文件，然后可以由 JVM 运行。

 **我问这个的原因是因为我要制作一个保存我所有密码的java应用程序。该应用程序将包含一个要求输入密码的界面，然后如果密码正确，则显示密码。以下是我关于这个主题的问题：

*   **一个可运行的 * *jar 文件****究竟由什么组成？
*   如果**可运行的 jar 文件**包含一个**类文件**，那么**该类文件**是否可以被解释为能够看到会破坏密码的源代码？
*   当您从 cmd运行**可运行的 jar 文件并键入****"java -jar xxx"**时。**“xxx”**表示文件名，“ **-jar”**是否表示您要运行一个 jar 文件，**“java”**表示在 JVM 中运行以下文件？
*   是不是像**.exe 文件一样，变成****.exe**文件后无法取消可读源代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T15:52:51.417

对于未提出的问题：如果您的密码在源代码中，它将以很容易找到的方式出现在类文件中。

可运行的 jar 文件是一个 jar 文件（即带有 jar 后缀的 zip 文件），其中包含类文件和包含有关启动哪个类的信息的特殊文件。

您可以反编译字节码： http: [//www.program-transformation.org/Transform/JavaDecompilers](http://www.program-transformation.org/Transform/JavaDecompilers)获取源代码。但实际上不用反编译就可以看到字节码中的密码

是的。在 java -jar xxx java 中表示使用名为 xxx 的 jar 文件运行 jvm

如果您知道创建的语言和工具，您应该能够将 exe 文件反编译为类文件。即使源代码中没有密码，也很容易在 .exe 文件中找到。所以是的 jar 文件有点像 exe 文件，但它们与你描述的不同。

如果您想创建一个应用程序来维护您的密码，请使用您作为应用程序用户在启动时提供的主密码来加密存储的密码。永远不要在源代码中存储密码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T15:50:14.250

Java 类文件可以反汇编成可读的 Java 代码。不过，更容易的是，您可以从已编译的类文件中提取所有密码，因为它们以纯文本形式存储（例如，尝试`strings`GNU 机器上的命令）。

所以，不，密码在类文件中本质上不是安全的（因此不在 jar 存档中，因为 jar 很容易解包）。

您需要做的是实施某种加密，并让您的程序将密码保存在加密文件中。然后，您的程序将需要您输入解密密钥才能解压密码。密钥*不*应该包含在 Java 程序中，它应该由*您在*每次运行程序时提供。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-03T16:03:39.260

## 基本上，无论你多么努力，任何人都可以轻松地反编译和阅读它。

如果可以，不要存储密码，在您的服务器上在线比较它（使用[异步加密](http://en.wikipedia.org/wiki/Public-key_cryptography)）或使用每次给应用程序的主密码存储它。

如果不能，请不要按原样存储密码。我能想到的最好的事情是存储（并检查）密码的哈希码。用户输入密码，然后对其进行[SHA-256 处理](http://en.wikipedia.org/wiki/SHA-2)，并将生成的哈希码与您存储的密码哈希码进行比较。添加[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)以防止[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)。

这样做的想法是[散列函数只是单向的](http://en.wikipedia.org/wiki/Cryptographic_hash_function)，无法从其散列中恢复密码。因此，如果密码足够强大，没有人应该能够在合理的时间内获得您的密码。

一个很好的阅读是 wiki 链接 -[但最值得注意的是 jasypt.org 上的这篇文章](http://www.jasypt.org/howtoencryptuserpasswords.html)。

也就是说 - 如果您尝试加密包含哈希的文件以增加另一层安全性，仍然可以使用反编译器和调试器找到解密的密码，所以不要真的指望它对真正想要的人超级有效通过，渡过。因此，与真正的加密相比，它更像是一种[通过默默无闻的安全性。](http://en.wikipedia.org/wiki/Security_through_obscurity)**

# hibernate - Grails 事务问题

> ID：10871705
> 
> 赞同：5
> 
> 时间：2012-06-03T15:46:45.970
> 
> 标签：hibernate, grails, groovy, transactions

我有一个标记为事务性的 Grails 服务，它做了很多事情。

我正在向此方法添加代码，但在逐步执行时没有得到预期的结果：

1.  我的代码`.save()`在整个方法完成之前无法在 MySQL 后端看到。鉴于服务方法是事务性的，这就是我所期望的。
2.  `.save()`在服务方法完成之前，我还有其他可以在 MySQL 中看到的调用代码。我不明白这一点，我不明白这和 1 之间的差异。
3.  我还有更多使用`groovy.sql.Sql`插入数据库的代码。我猜这是在 Grails 事务处理之外，所以在方法结束之前提交的事实是有道理的。我可以让 Grails 在事务中管理这个吗？

请消除我的假设中的任何错误。以下是一些相关代码：

**主要服务方式**

```
public void updateDb(Date date) {
        // Create the results
        if (createResults() > 0) {
            createA()
            createB()
        }
} 
```

**创建一个**

```
A a = new a()
a.user = user
a.week = week
a.save() 
```

**创建B**

```
userWeek = new UserWeek(user: user)
userWeek.number = 1
userWeek.save(flush: true) 
```

**创建结果**

```
String insert = "insert into ..."
Sql sql = new Sql(dataSource)
sql.execute(insert) 
```

我添加`flush:true`使其刷新，但我现在明白只是刷新休眠但实际上不提交事务，因为它是事务性的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T17:36:44.277

您可以通过使用[带有连接参数的构造函数来](http://groovy.codehaus.org/api/groovy/sql/Sql.html#Sql%28java.sql.Connection%29)`groovy.sql.Sql`在您的服务方法正在使用的事务中运行：[`Sql`](http://groovy.codehaus.org/api/groovy/sql/Sql.html#Sql%28java.sql.Connection%29)

```
Sql sql = new Sql(sessionFactory.currentSession.connection()) 
```

这应该可以解决数据在同一服务方法中在不同时间提交的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T07:16:56.663

我也有类似的情况。为我解决的问题是调用 refresh() 方法。我还尝试了 flush:true 和其他很多东西，但没有任何效果。

[您可以在此处](http://grails.org/doc/latest/ref/Domain%20Classes/refresh.html)阅读有关刷新的信息。

# assembly - 为什么elf文件中的段可以重叠

> ID：10871706
> 
> 赞同：5
> 
> 时间：2012-06-03T15:46:54.933
> 
> 标签：assembly, elf, segment

简单的 C 文件：

```
#include <stdio.h>
int main(){
    printf("Hello World");
    return 0;
} 
```

编译代码后，使用`readelf -a a.out`，精灵信息如下：

![elf 程序头，段信息](../Images/ea8ac3b36c9d2e36efd9a75a83053ebe.png)

问题：

1.  几个部分出现在不同的段中，例如第 2 段和第 3 段中的 interp 部分。一个部分如何出现在多个段中？
2.  第 2 段的地址来自 0x8048134，但第 3 LOAD 段从 0x8048000 开始，内存大小为 0x004d0。那么这两个部分重叠？两个段如何在内存中重叠？
3.  为什么程序头的偏移量和 viraddr 必须以页面大小为模一致？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T12:07:43.083

部分表中可能有垃圾，或者它可能完全丢失。对动态加载器而言，重要的是段表（程序头），即便如此，只有 PT_LOAD 段*不应该*重叠*。其他类型的段（INTERP、DYNAMIC 等）为加载程序提供附加信息，通常指的是 LOAD 段的某些部分。

*这是[规范](http://refspecs.linuxbase.org/elf/gabi4+/ch5.pheader.html)所说的：

> PT_LOAD 数组元素指定一个可加载段，由 `p_filesz`和描述`p_memsz`。文件中的字节映射到内存段的开头。如果段的内存大小 ( `p_memsz`) 大于文件大小 ( `p_filesz`)，则“额外”字节被定义为保存值 0 并跟随段的初始化区域。文件大小不得大于内存大小。程序头表中的可加载段条目以升序显示，按`p_vaddr`成员排序。

如您所见，没有提到重叠，因此似乎没有被禁止，尽管我认为我没有看到任何具有重叠 PT_LOAD 段的文件。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-03T20:57:32.303

> 1.  几个部分出现在不同的段中，例如第 2 段和第 3 段中的 interp 部分。

所以？

> 一个部分如何出现在多个段中？

为什么不？

一个部分不会出现在多个段中，但同时出现在 a和 a中并`PT_LOAD`没有错。`.interp``PT_LOAD``PT_INTERP`

> 1.  两个段如何在内存中重叠？

再说一次，为什么不呢？

> 1.  为什么程序头的偏移量和 viraddr 必须以页面大小为模一致？

因为否则将不可能`mmap`将该段并使其出现在`virtaddr`.

# ruby-on-rails-3 - 在 people _controller 中创建一个新的 perfil

> ID：10871707
> 
> 赞同：0
> 
> 时间：2012-06-03T15:46:55.837
> 
> 标签：ruby-on-rails-3, submit

我在 rails 3.2.2 我正在尝试在 person_controller Models symplify 中创建一个新的 perfil：

```
class Person < ActiveRecord::Base
belongs_to :perfil, :foreign_key=>'perfil_id'
class Perfil < ActiveRecord::Base
has_one :person 
```

我在 person_controller 中创建了 ad_perfil

```
def ad_perfil
  @person = Person.find(params[:id])
  @perfil = Perfil.new
end 
```

我用了两种方法：1）使用 f.submit

```
ad_perfil.html.erb:
  <%= @person.nombre %>
  <%= form_for(@perfil) do |f| %>
  <div class="field">
 <%= f.label :nombre %><br />
 <%= f.text_field :nombre %>
  </div>
  <%= f.submit %>
  <% end %> 
```

这将我重定向到创建 perfils_controller 并且我无法获得@persona：

```
 def create
      @perfil = Perfil.new(params[:perfil])
      @person = Person.find(params[:id])
      respond_to do |format|
        if @perfil.save
          format.html { redirect_to @perfil, notice: 'Perfil was successfully created.' }
          format.json { render json: @perfil, status: :created, location: @perfil }
          @person.perfil_id = @perfil.id
          @person.save 
```

2）我在persons_controller中创建了一个新的def：

```
def new_perf
 @perfil = Perfil.new(params[:perfil])
 @person = Person.find(params[:id])
 if @perfil.save
   @person.perfil = @perfil
   @person.update_attributes(params[:person])
   redirect_to @person
end
end 
```

我尝试将 f.submit 更改为：

```
<td><%= link_to 'New Perfil', :action => "new_perf", :id=> @person.id %></td> 
```

它创建了一个没有任何字段的新 perfil，当然不要将 perfil.id 保存在 @person.perfil_id 中。有可能我正在尝试吗？还有其他方法吗？我想用 perfil.person_id 代替 person.perfil_id 会更容易，但我想稍后访问 person.perfil。我希望你能理解我，也许我对“提交”不是很了解。有什么建议么？谢谢！

# wpf - 如何在 WPF 中实现 TextBox.InputScope

> ID：10871713
> 
> 赞同：1
> 
> 时间：2012-06-03T15:47:33.153
> 
> 标签：wpf, textbox, inputscope

我正在寻找一种方法来实现文本框的 InputScope，就像在 Wp7 中完成的那样，但使​​用经典的 WPF。

我想要实现的是，输入仅限于使用十进制数字。我怎样才能做到这一点？

```
<TextBox Text="{Binding Amount, Mode=TwoWay}" InputScope="Number"/> 
```

InputScope 是经典 WPF 的有效属性，但遗憾的是它似乎不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T08:15:57.173

InputScope 不强制对输入进行任何类型的验证或限制。它是对可以在控件中输入的数据类型的输入处理器（例如屏幕键盘、语音识别）的提示。

此值仅在激活[IME](https://docs.microsoft.com/en-us/windows/win32/dxtecharts/installing-and-using-input-method-editors)（如屏幕键盘）时使用。

即使在 WP7 中，InputScope 也不限制可以在文本框中输入的值。如果您可以安装忽略 InputScope 的输入处理器，您仍然可以输入不需要的字符。

如果要将文本输入限制为特定字符，则必须使用[MaskedTextBox](http://wpftoolkit.codeplex.com/wikipage?title=MaskedTextBox)或拦截击键事件。代码也将更容易理解。

可以使用 InputManager 的[PreProcessInput](http://msdn.microsoft.com/en-us/library/system.windows.input.inputmanager.preprocessinput.aspx)事件来过滤使用 InputScope 的输入事件，但这可能不值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:37:04.213

没有内置的方法可以做到这一点。您需要编写一些代码来实现您正在寻找的东西。这是您需要做的一个示例：[WPF Maskable TextBox for Numeric Values](http://www.codeproject.com/Articles/34228/WPF-Maskable-TextBox-for-Numeric-Values)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T23:49:04.650

我没有使用过 InputScope，但是，从 MSDN 文档（[here](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.inputscope.aspx#Y86)、[here](http://msdn.microsoft.com/en-us/library/system.windows.input.inputscope.aspx)、[here](http://msdn.microsoft.com/en-us/library/system.windows.input.inputscope.regularexpression.aspx)和[here](http://msdn.microsoft.com/en-us/library/system.windows.input.inputscopenamevalue(v=vs.110).aspx)）看来，WPF 的输入范围需要更复杂的输入，例如

`xmlns:swi`应该映射到`System.Windows.Input`.

```
<TextBox>
    <TextBox.InputScope>
        <swi:InputScope RegularExpression="^(0|(-(((0|[1-9]\d*)\.\d+)|([1-9]\d*))))$" />
    </TextBox.InputScope>
</TextBox> 
```

（在谷歌上找到的正则表达式字符串，我没有检查过。）

也许：

```
<TextBox>
    <TextBox.InputScope>
        <swi:InputScopePhrase>
            <swi:InputScopePhrase.Names>Number</swi:InputScopePhrase>
        </swi:InputScopePhrase>
    </TextBox.InputScope>
</TextBox> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T10:58:59.390

```
string txt = MessageWrite.Text;
        if (txt != "")
        {
            MessageWrite.Text = Regex.Replace(MessageWrite.Text, "[^a-f ^0-9]", "");
            if (txt != MessageWrite.Text)
            {
                MessageWrite.Select(MessageWrite.Text.Length, 0);
            }
        } 
```

messageWrite 是一个文本框名称。它限制从 AF 和 0-9。用户可以修改它:)

# php - Magento 编程：在检查现有重复项的同时导入制造商并获取手册。ID

> ID：10871714
> 
> 赞同：-3
> 
> 时间：2012-06-03T15:47:53.933
> 
> 标签：php, magento, import

我需要一些帮助来执行以下操作。

我正在尝试从目标商店导入具有预先验证的制造商列表，即要导入的新制造商尚不存在（如果新制造商名称已存在，请跳过），如果已导入，则获取其新制造商 ID。

我有代码只需添加制造商，无需按名称检查现有制造商，也无需获取新的制造商 ID。代码在这里，但我需要上面提到的能力。

任何帮助都会很棒。提前致谢。

```
<?php
require_once 'app/Mage.php';
umask(0);
Mage::app('default');
$_manufacturers = file('manufacturers.txt');
$_attribute = Mage::getModel('eav/entity_attribute')->loadByCode('catalog_product', 'manufacturer');
$manufacturers = array('value' => array(), 'order' => array(), 'delete' => array());
$i = 0;
foreach($_manufacturers as $_manufacturer){
$i++;
$manufacturers['value']['option_' . $i] = array($_manufacturer);
}
$_attribute->setOption($manufacturers);
try{
$_attribute->save();
echo 'Manufacturer successfully imported';
}catch(Exception $e){
echo 'Import Error::'.$e->getMessage();
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:33:09.343

只是一个快速而肮脏的脚本，但这应该是您正在寻找的......

```
<?php

error_reporting(E_ALL | E_STRICT);    
ini_set('display_errors', 1); 

/*
 * Boostrap Magento
 */
$mageFilename = '../app/Mage.php';
require_once $mageFilename;        
Mage::setIsDeveloperMode(true);     
umask(0);

$mageRunCode = '';
$mageRunType = 'store';
Mage::init($mageRunCode, $mageRunType);

/*
 * Set up required data
 */
$newManufacturers = file('manufacturers.txt', FILE_SKIP_EMPTY_LINES | FILE_IGNORE_NEW_LINES);
$newManufacturers = array_unique($newManufacturers);

$attribute = Mage::getModel('eav/entity_attribute')
                ->loadByCode('catalog_product', 'manufacturer');

$valuesCollection = Mage::getResourceModel('eav/entity_attribute_option_collection')
            ->setAttributeFilter($attribute->getData('attribute_id'))
            ->setStoreFilter(0, false)
            ->getColumnValues('value');

$installer = new Mage_Eav_Model_Entity_Setup('core_setup'); 

/*
 * Add new attributes
 */
$addedManufacturers      = array();
$skippedManufacturers    = array();

$i = count($valuesCollection);
foreach($newManufacturers as $manufacturer) {

    // If the value already exists then skip to next  
    if (in_array($manufacturer, $valuesCollection)) {
        $skippedManufacturers[] = $manufacturer;
        continue;
    }

    //If we have reached here then lets add the new attribute option
    $newOption = array();
    $newOption['attribute_id'] = $attribute->getData('attribute_id');
    $newOption['value']['option_'.++$i][0] = $manufacturer;
    $installer->addAttributeOption($newOption);

    $optionValue = Mage::getResourceModel('eav/entity_attribute_option_collection')
            ->setAttributeFilter($attribute->getId())
            ->setStoreFilter(0, false)
            ->addFilter('value_id', $installer->getConnection()->lastInsertId())   
            ->getColumnValues('option_id');

    $addedManufacturers[] = $optionValue[0];
}

if (count($addedManufacturers)) {
    echo "<h2>Manufacturers Added</h2><ul>";
    foreach($addedManufacturers as $added) {
        echo "<li>" . $added . "</li>";
    }
    echo "</ul>";
}

if (count($skippedManufacturers)) {
    echo "<h2>Manufacturers Skipped</h2><ul>";
    foreach($skippedManufacturers as $skipped) {
        echo "<li>" . $skipped . "</li>";
    }
    echo "</ul>";
} 
```

# ruby-on-rails-3 - 限制 Rabl 中的孩子数量

> ID：10871721
> 
> 赞同：1
> 
> 时间：2012-06-03T15:49:03.777
> 
> 标签：ruby-on-rails-3, rabl

我想限制用 rabl 呈现的 JSON 响应的子节点数

```
collection @vehicles
attributes :name

child(:positions) do
   attributes :lat, :lon
end 
```

一个 Vehicle 有多个位置，一个位置属于一个车辆。现在我只想输出 JSON 中的最后一个位置。

我会很感激任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:18:30.967

我的模型中有类似的情况，这就是我的处理方式。

使 index 动作扩展 show 动作。在`vehicles/index.json.rabl`

```
collection @vehicles
extends 'vehicles/show' 
```

`vehicles/show.json.rabl`

```
object @vehicle
attributes :name
child @vehicle.positions.first => :position do
   attributes :lat, :long
end 
```

# google-visualization - 在谷歌交互式条形图中将标签放在内部栏的顶部

> ID：10871729
> 
> 赞同：2
> 
> 时间：2012-06-03T15:50:37.050
> 
> 标签：google-visualization

我现在使用 google [Column Chart](https://google-developers.appspot.com/chart/interactive/docs/gallery/columnchart)创建了一个条形图

1.  我的数据表中只有整数值，但谷歌将 acis 与浮点值分开，有没有办法强制图表仅标记整数？
2.  有没有办法在条形图的顶部或内部显示值标签？我找到了一些图像图表的方法，但我想保持图表交互

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T15:19:22.810

目前还没有直接的解决方案，因为柱状图中不支持注释。但是让我分享一个解决方法：您可以创建一个组合图，其中包含两个具有相同数据的系列（与柱形图的数据相同）以及注释列。将第一个系列的类型设置为*bar*，将另一个系列的类型设置为*line*。最后，将第二个系列的*visibleInLegend*、*lineWidth*和*pointSize*属性分别指定为*false*和*0s*。

```
var data = new google.visualization.DataTable();
data.addColumn({ type: 'string', label: 'Labels' });
data.addColumn({ type: 'number', label: 'Bar Series' });
data.addColumn({ type: 'number', label: 'Line Series' });
data.addColumn({ type: 'string', role: 'annotation' });

data.addRows([['Label1', 10, 10, '10'],
             ['Label1', 20, 20, '20'],
             ['Label1', 40, 40, '40'],
             ['Label1', 5, 5, '5'],
             ['Label1', 30, 30, '30'],
             ]);

var barchart = new google.visualization.ComboChart(document.getElementById('bar_element'));
var options = {series: [{ type: 'bars' },
                        { type: 'line', lineWidth: 0, visibleInLegend:false, pointSize: 0}]};

barchart.draw(data, options); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:04:04.957

对于您可以使用`gridlines`属性的第一个问题，请查看[这篇文章](https://stackoverflow.com/a/9211416/1140748)以了解如何使用它。

对于第二个问题，我不太明白。当您使用鼠标在条形上移动时，带有值的弹出窗口尚未显示在条形的顶部？

# scala - scala中的间接递归泛型类型定义

> ID：10871731
> 
> 赞同：8
> 
> 时间：2012-06-03T15:50:59.717
> 
> 标签：scala, generics, recursion

直接类型递归有效：

```
trait TT[T<:TT[T]] 
```

但我可以用幼稚的方法制作间接的

```
trait UU[V <: VV[UU[V]]]
trait VV[U <: UU[VV[U]]] 
```

给我错误：

```
CyclicTraits.scala:23: error: type arguments [UU[V]] do not conform to
    trait VV's type parameter bounds [U <: UU[VV[U]]]
trait UU[V <: VV[UU[V]]]
              ^
CyclicTraits.scala:25: error: type arguments [VV[U]] do not conform to
    trait UU's type parameter bounds [V <: VV[UU[V]]]
trait VV[U <: UU[VV[U]]]
              ^ 
```

间接类型参数递归应该如何正确表达？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T18:49:14.610

这里的问题不在于递归——它实际上是类型参数不符合边界的问题，如错误消息所述。如果您使参数协变，您的示例将完美运行：

```
trait UU[+V <: VV[UU[V]]]
trait VV[+U <: UU[VV[U]]] 
```

`V`在您的版本中（没有协方差），它是 的子类型这一事实`VV[UU[V]]`无法告诉我们是否`UU[V]`是 的子类型`UU[VV[UU[V]]]`，因此我们得到一致性错误。如果类型参数是协变的，我们就知道`V`作为 的子类型，`VV[UU[V]]`它`UU[V]`是 的子类型`UU[VV[UU[V]]]`，一切都很好。

# c# - 是否可以使用 C# DllImport 从 DLL 导入非托管类或结构？

> ID：10871733
> 
> 赞同：4
> 
> 时间：2012-06-03T15:51:03.600
> 
> 标签：c#, c++, class, dll, dllimport

正如 msdn [http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx)所说，“平台调用服务 (PInvoke) 允许托管代码调用在 DLL 中实现的非托管函数。 "

我想从我用 C++ 制作的 DLL 中导入一些类
有可能吗？怎么做？

例如，我在 DLL 中有一些结构：

```
struct __declspec(dllexport) DLLVector3
{
    float x, y, z;
};

struct __declspec(dllexport) DLLQuaternion
{
    float x, y, z, w;
};

class __declspec(dllexport) DLLCharacter
{
public:
    DLLVector3 position;
    DLLQuaternion orientation;

    DLLCharacter()
    {

    }

    ~DLLCharacter()
    {

    }

    void setPosition(PxVec3 pos)
    {
        position.x = pos.x;
        position.y = pos.y;
        position.z = pos.z;
    }

    void setOrientation(PxQuat or)
    {
        orientation.x = or.x;
        orientation.y = or.y;
        orientation.z = or.z;
        orientation.w = or.w;
    }
};

struct __declspec(dllexport) PhysicalObject
{
    DLLCharacter *character;
    PxRigidActor *mActor;
    PxController *mController;
}; 
```

我可以通过哪种方式导入这些？尤其是那些带有指针的结构

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T16:21:28.503

您不需要编写 C++ 托管代码进行访问 - 但是 - 您不能轻松地在非托管内存和托管内存之间来回切换。这里有几个关键点 1) 使用 [StructLayout(LayoutKind.Sequential)] 定义映射到 c++ 结构之上的 .net 类

> ```
> [StructLayout(LayoutKind.Sequential)]
> [Serializable]
> public struct SFVec3F : IRawStreamIO
> {
>     public double _x;
>     public double _y;
>     public double _z;
> } 
> ```

2) 基本类型（如双精度、int32 等）有效地跨 P/Invoke 层移动 - 更复杂的类型为您赢得 .net 的 thunking 变体 - msft doco 涵盖了哪些数据类型有效地移动，尝试使用它们

3) C++ 领域中的所有指针都是 .net 领域中的 IntPtr，如果您想安全起见，您应该将其视为句柄，即您可以让 C++ 端对底层结构进行任何操作/访问

4) 访问本机 C++ 非常简单（Handle 道具是最初源自本机 C++ 端的 IntPtrs）

```
[DllImport("CS2V3.dll", CharSet = CharSet.Ansi)]
private static extern void AddChild(IntPtr csoPtr, IntPtr childPtr, short recomputeBounds, short adjustCoords, short blindchild);
public void AddChild(V3CSO theChild)
{
    AddChild(m_handle, theChild.Handle,0,0,0);
} 
```

5) 字符串和其他一些类型需要编组以获得 .net 可用表单 - 请注意，当您将字符串传递给非托管代码时，字符串会自动发生这种情况，但在入站时您必须自己进行

```
 [DllImport("CS2V3.dll", CharSet = CharSet.Ansi)]
private static extern IntPtr GetName(IntPtr csoPtr);
[DllImport("CS2V3.dll", CharSet = CharSet.Ansi)]
private static extern void SetName(IntPtr csoPtr, string newName); 
```

> ```
>  public string Name
>     {
>         get
>         {
>             IntPtr np = GetName(m_handle);
>             return Marshal.PtrToStringAnsi(np);
>         }
>         set
>         {
>             SetName(m_handle, value);
>         }
>     } 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T16:02:26.297

这是可能的......但您需要在 C++/CLI 中编写包装器代码。这允许您编写可以从 C#/.net 代码使用的类（在外部它是托管代码），并且在实现中您可以使用 C++ 代码。

您不能直接导入 C++ 类。只有 C 风格的函数。C 风格的函数只允许您传递 C 原始类型，这使得与它们的互操作变得容易。一般来说，从非 C++ 代码中，几乎不可能正确传递 C++ 类型。如果您不能传入 C++ 对象，那么通常很少有可以调用的有趣函数。

稍后编辑：或者，您可以为非托管功能编写 C 样式的包装函数。您必须一次性传递所有参数（您可以传递结构），但您可以用标准 C/C++ 编写包装器。

# iphone - 视频无法在 iPad/iPhone 上播放

> ID：10871740
> 
> 赞同：2
> 
> 时间：2012-06-03T15:52:13.273
> 
> 标签：iphone, ipad, video

我正在建立一个网站：daretogaincontrol.com。在那个网站上，我正在使用 videolightbox 播放视频。

视频无法在 iPad 或 iPhone 上播放。该站点在台式机（Mac 和 PC）上运行良好。

videolightbox 的好心人整理了一个小测试页面，以显示他们的播放器和我们的一个视频将在 iPad/iPhone 上播放：http: [//www.videolightbox.com/3/](http://www.videolightbox.com/3/)

我将该代码复制到此处的测试页面：[http ://www.daretogaincontrol.com/test_video](http://www.daretogaincontrol.com/test_video)

在 test_video 页面上有两个播放选项，一个是使用该站点的播放器播放来自 videolightbox.com 的视频。与 videolightbox.com 页面相同，但从敢于获得控制服务器提供。下面的一个尝试使用相同的播放器播放相同的视频，但播放器和视频驻留在敢于获得控制服务器上。

test_video 页面上的所有 javascript 和 css 都链接到 videolightbox.com 站点。

test_video 页面上的视频都没有在 iPad/iPhone 上播放，这让我相信可能存在服务器问题，因为我可以消除（？）视频格式和播放器有可识别的问题。

您可以使用直接链接在 iPad/iPhone 上播放视频：[您需要自己弄清楚，因为我每个帖子限制为 2 个链接，抱歉]，但不在页面上的播放器中。

我没有要测试的 iPad/iPhone。我对 iPad/iPhone 几乎一无所知。我必须进行更改并致电客户让他们进行测试。我也没有通过网络提供视频内容的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:13:57.853

通过使用[这些说明](http://conceptdev.blogspot.com/2009/01/monitoring-iphone-web-traffic-with.html)，您可以将您的 PC 设置为充当代理并捕获 Web 流量。

当我这样做时，我看到来自 iPhone 的请求格式不正确

```
GET http://www.daretogaincontrol.com/test_video
200 OK (text/html)

GET http://www.daretogaincontrol.com/videos/index_videolb/http://www.daretogaincontrol.com/videos/having_fun.mp4
404 Not Found (text/html)

GET http://www.daretogaincontrol.com/videos/index_videolb/http://www.daretogaincontrol.com/videos/having_fun.mp4
404 Not Found (text/html) 
```

# mysql - 尝试访问远程数据库时mysql_connect访问被拒绝错误

> ID：10871741
> 
> 赞同：1
> 
> 时间：2012-06-03T15:52:16.963
> 
> 标签：mysql

我正在尝试连接到远程数据库。这是我的代码：-

```
php $con = mysql_connect("2toria.com","username","password"); if (!$con)   {   die('Could not connect: ' . mysql_error());   }

mysql_select_db("myTable", $con);

$result = mysql_query("SELECT * FROM Contestants");

while($row = mysql_fetch_array($result))   {   echo $row['Name'];   echo "<br />";   }

mysql_close($con); 
```

数据库、表、用户名和密码名称都是正确的（出于明显的原因，我在此处更改了它们），但出现以下错误：-

> 警告：mysql_connect() [function.mysql-connect]：第 9 行 /home/toriaco/public_html/bigbro/index.php 中的用户 'username'@'bluechip6.ukhost4u.com' 的访问被拒绝（使用密码：YES）无法连接：用户“用户名”@“bluechip6.ukhost4u.com”的访问被拒绝（使用密码：是）**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T15:57:15.037

第一个可能的原因：
我知道拮抗剂（荷兰托管服务）会出于安全原因阻止所有非来自的连接`localhost`，而且我不认为它们是唯一的。（所以总是连接到 localhost，而不是`http://...`URL！）

第二个可能的原因：
密码/用户名错误。

# emacs - 上移箭头不突出显示文本 emacs iterm2

> ID：10871745
> 
> 赞同：10
> 
> 时间：2012-06-03T15:52:44.420
> 
> 标签：emacs, terminal

我最近在`M-left`这里得到了修复等方面的帮助：[终端元箭头键绑定中的 emacs](https://stackoverflow.com/questions/10867199/emacs-in-terminal-meta-arrow-keybindings)，但无法`Shift-up`使用类似的解决方案进行修复。当我尝试时，`shift-up`我得到一个错误`<select> is undefined`。我尝试使用以下方法重新映射它：

```
(add-hook 'term-setup-hook                                                                                                                                                                         
'(lambda ()                                                                                                                                                                                      
 (define-key function-key-map "\e[1;9A" [M-up])                                                                                                                                                
 (define-key function-key-map "\e[1;9B" [M-down])                                                                                                                                              
 (define-key function-key-map "\e[1;9C" [M-right])                                                                                                                                             
 (define-key function-key-map "\e[1;2A" [S-up])                                                                                                                                                
 (define-key function-key-map "\e[1;9D" [M-left]))) 
```

但转变仍未定义。我还尝试通过使用返回的转义序列设置它来重新绑定密钥`cat`is `^[[1;2A`。奇怪的是，降档确实有效。`shift-select-mode`也标记`t`为。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-12T17:40:31.490

当 END 导致 Emacs 23.3.1 说`<select> is undefined`. 原来是[terminfo](https://en.wikipedia.org/wiki/Terminfo)的一个问题，它允许程序以独立于设备的方式使用终端。

基于这个[2008 bug report discussion](http://www.archivum.info/bug-gnu-emacs@gnu.org/2008-12/00570/bug-1737-%28Vincent-Lefevre%29-The-End-key-doesn%27t-work-in-xterm-vt220.html)，我通过在 ~/.bashrc 的顶部添加以下内容来解决我的问题：

```
#so the END key will work correctly in Emacs over PuTTY
TERM=xterm-vt220 
```

注意，使用 xterm-vt220 或默认的 xterm，`emacs -Q -nw`当`ESC [ 4 ~`我按 END、`ESC O A`Up 和`ESC [ A`Shift-Up 时会出现。（要查看 Emacs 得到的键码，请按一些按钮，然后按`C-h,l`。）对于以相同顺序的相同键，`cat`说`[4~`、`[A`和`[OA`...所以 Up 和 Shift-Up 奇怪地颠倒了。

* * *

如果您不想更改您的 terminfo，请参阅此讨论以获取解决方法 [http://lists.gnu.org/archive/html/help-gnu-emacs/2011-05/msg00211.html](http://lists.gnu.org/archive/html/help-gnu-emacs/2011-05/msg00211.html)

> 您应该能够通过以下方式解决此问题：
> 
> `(define-key input-decode-map "\e[1;2A" [S-up])`
> 
> 为了让它在正确的时间生效，你必须在你的 .emacs 中使用类似的东西：
> 
> `(if (equal "xterm" (tty-type))` `(define-key input-decode-map "\e[1;2A" [S-up]))`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-20T16:40:28.790

只是添加有关解决方案的更多信息： [https](https://github.com/arthurnn/dotfiles/blob/8d56f2419da9a4cb654d8941f379d6d5783bdb90/.emacs.d/init.d/setup-bindings.el#L3-L10) ://github.com/arthurnn/dotfiles/blob/8d56f2419da9a4cb654d8941f379d6d5783bdb90/.emacs.d/init.d/setup-bindings.el#L3-L10这应该解决所有情况，包括emacs客户端。最后一行负责修复使用 emacsclient 时的 Shift-up。

# sencha-touch - 如何从 Ext.Ajax.request 的响应中通知 selectfield 元素？

> ID：10871750
> 
> 赞同：1
> 
> 时间：2012-06-03T15:53:20.863
> 
> 标签：sencha-touch, extjs, sencha-touch-2, json, sencha-architect

我需要从 Ext.Ajax.request({}) 的回调中通知一个 selectfield sencha 元素

我有一个这个代码，例如，

```
Ext.Ajax.request({
            url: '/express/EXPRESSVE00007_es.jsp',
            timeout: 90000,
            params: {
                evento  : action,
                cookie: document.cookie,
                NAME    : Ext.getCmp("txtName").getValue(),
                LAST    : Ext.getCmp("txtLast").getValue(),
                SEX : Ext.getCmp("txtSex").getValue()
            },
            success: function(r, o) {
                var response = r.responseText
                response = response.trim()
                response = response.replace('\n', '').replace('\r', '')
                var jsonResponse = Ext.decode(response)
                Ext.Msg.alert(jsonResponse)
            },
            failure: function() {
                Ext.Msg.show({
                    title: "Failure",
                    msg: "Error, failed response",
                    buttons: Ext.Msg.OK,
                    icon: Ext.MessageBox.ERROR
                })
           }
}) 
```

和我的选择域，

```
{
    xtype: 'selectfield',
    id: 'selSex',
    name: 'select',
    label: '*Sex',
    placeHolder: 'Select...',
    displayField: 'desc',
    hiddenName: 'second-select',
    options: [
        {desc: '',  value: ''},
        {desc: '', value: ''}
    ]
} 
```

在这种情况下，我需要从回调 Ext.Ajax.request 中通知“desc”和“value”字段，但我不知道。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:23:04.300

你可以在下面做

```
Test = Ext.regModel('Test', {
    fields: [{
        name: 'desc',
        type: 'string'
    }, {
        name: 'value',
        type: 'string'
    }]
});

exStores = new Ext.data.Store({
     model: 'Test',
    autoLoad: false }); 
```

并选择字段

```
{
    xtype: 'selectfield',
    store: exStores,
    id: 'selSex',
    name: 'select',
    label: '*Sex',
    placeHolder: 'Select...',
    valueField:'value',
    displayField:'desc',
} 
```

和ajax请求

```
Ext.Ajax.request({
            ...
            success: function(r, o) {
                var response = r.responseText
                response = response.trim()
                response = response.replace('\n', '').replace('\r', '')
                var jsonResponse = Ext.decode(response)
                exStores.loadData(jsonResponse, false);
                Ext.Msg.alert(jsonResponse)
            },
            ...
}) 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:28:43.367

您可以`selectfield`通过`Ext.Ajax.request`更新它的`store`.

您可以声明一个存储来*存储*所有字段值，然后根据来自 的响应`request`，您可以对绑定的数据存储进行**洗牌**`selectfield`。

例如

```
{
    xtype: 'selectfield',
    store: sampleStore,
    valueField:'value',
    displayField:'desc',
} 
```

`Ext.Ajax.request`并像这样更新 ' 响应上的存储值，

```
Ext.StoreMgr.get('sampleStore').load(); 
```

# c - Visual Studio 2010 C++ 意外的命令行参数

> ID：10871751
> 
> 赞同：1
> 
> 时间：2012-06-03T15:53:25.993
> 
> 标签：c, command-line-arguments

请告诉我如何输入：

```
2 3 4 + * 
```

进入 VS 2010 命令行。我正在研究一个反向波兰表示法程序。输入期望`char *argv`。每当我放入`2 3 4 + *`VS 2010/Project/Debugging/Cmd Line Args 时，我`printf("%s", argv)`都会得到，

> D5x --> 其中 x 是一些垃圾字符。

谢谢，凯文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T15:56:31.877

`argv`是一个指向字符串的指针数组。试图打印它`printf("%s", argv)`永远不会给你任何有用的东西，因为它`%s`告诉`printf`你期待一个字符串。

尝试这样的事情：

```
for (int i = 0; i < argc; i++) {
    printf("[%d] - %s\n", i, argv[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:34:02.670

```
#include <stdio.h>

int main(int argc, char **argv){
    int i;
    for(i=1;i<argc;++i){
        printf("%s ", argv[i]);
    }
}

>prog 2 3 4 + *
2 3 4 + * 
```

# python - Python：如何计算两个IP地址和端口之间接收和发送的数据

> ID：10871752
> 
> 赞同：1
> 
> 时间：2012-06-03T15:53:45.190
> 
> 标签：python, sockets, network-traffic, traffic-measurement

我猜这是套接字编程。但是我从来没有做过套接字编程，期望在学习 Python 时运行教程示例。我需要更多的想法来实现这一点。

我特别需要的是运行服务器的监控程序，该程序将轮询或侦听来自不同 IP 跨不同流行端口交换的流量。例如，我如何通过192.168.1.10和192.168.1.1（即网关）的80端口接收和发送数据。

我检查了一些现成的工具，如 MRTG、Bwmon、Ntop 等，但由于我们正在研究一些特定的模式研究，我们需要在程序中进行数据捕获。

想法是监视一些流行的端口并研究某些时期的网络流量并将它们与其他一些数据进行比较。

我们想找到一种方法来用 Python 完成这一切......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:21:18.343

您可能想为此使用[scapy](http://www.secdev.org/projects/scapy/)。只需嗅探特定接口上的所有以太网流量，丢弃所有非 TCP 且与端口不匹配的内容。

不确定 scapy 是否已经可以跟踪 TCP 连接（例如识别重复的序列号，仅提取有效负载流），但我猜它可能可以，如果不是，那么将一个足够好的 TCP 连接跟踪器组合在一起并不难95% 的流量。

替代方案是直接使用套接字（查找原始套接字）或 libpcap，这两者都可以从 Python 中完成。您可能还想查看“tcpdump”命令行工具的过滤器表达式语法，也许它已经可以完成您想要的操作。

我敢打赌，有更专业的高级工具可以解决这个问题，但我不知道。

PS：如果您还不了解wireshark，请先检查一下并尝试一下。它可以跟踪 TCP 流，并会教您 TCP 连接跟踪的含义。也许它的命令行二进制文件 tshark 可以用来提取你想要的 TCP 流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T17:51:36.143

IPTraf 是一个基于 ncurses 的 IP LAN 监控工具。具有生成网络统计信息的能力，包括 TCP、UDP、ICMP 等。

由于您正在考虑从 python 执行它，您可以考虑使用屏幕（带有 VT100/ANSI 终端仿真的屏幕管理器）来克服 ncurses 问题，并且您可能希望将日志记录和间隔参数传递给 IPTraf，这会强制 iptraf 登录到在给定的时间间隔内归档。有点棘手，但最终您可以通过基本解析日志文件来获得所需的内容。

# c# - 减去两个日期

> ID：10871755
> 
> 赞同：41
> 
> 时间：2012-06-03T15:54:00.640
> 
> 标签：c#, datetime, calendar, timespan

我有两个日历，每个日历都从 calendar.SelectedDate 返回一个 DateTime。

如何从彼此中减去两个选定的日期，给我两个选择之间的天数？

有一个 calendar.Subtract()，但它需要一个 TimeSpan 而不是 DateTime。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-03T15:56:12.380

您可以使用`someDateTime.Subtract(otherDateTime)`，这将返回`TimeSpan`具有`TotalDays`属性的 a。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-06-03T15:56:20.130

只需使用：

```
TimeSpan difference = end - start;
double days = difference.TotalDays; 
```

请注意，如果您想将它们视为*日期*，您可能应该使用

```
TimeSpan difference = end.Date - start.Date;
int days = (int) difference.TotalDays; 
```

这样你就不会根据时间得到不同的结果。

（如果需要，您可以使用`Subtract`方法代替`-`运算符，但我个人觉得使用运算符更清晰。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T15:59:00.573

想想看。
你如何表达两个日期之间的差异？与另一个约会？
这就是您需要 TimeSpan 的原因

```
DateTime dtToday = new System.DateTime(2012, 6, 2, 0, 0, 0);
DateTime dtMonthBefore = new System.DateTime(2012, 5, 2, 0, 0, 0);
TimeSpan diffResult = dtToday.Subtract(dtMonthBefore);
Console.WriteLine(diffResult.TotalDays); 
```

# java - Spring MVC - 将变量从一页传递到花药

> ID：10871756
> 
> 赞同：4
> 
> 时间：2012-06-03T15:54:01.913
> 
> 标签：java, spring-mvc, tld

我需要帮助。我正在做一个有多个页面和多个表单的项目；每个页面都有一个表格。我只需要能够将值从一个 jsp 传递到另一个。我应该怎么办？

我是 Spring MVC 的新手。我正在使用弹簧 2.5.6。

这是我的设计：

formPage1.jsp --> Controller1 --> formPage2a.jsp --> Controller2 需要 val frm pg1 & pg2a。formPage1.jsp --> Controller1 --> formPage2b.jsp --> Controller3 需要 val frm pg1 & pg2b。formPage1.jsp --> Controller1 --> formPage2c.jsp --> Controller4 需要 val frm pg1 & pg2c。

正如您在上面看到的，formPage1.jsp 可以加载 formPage2a、formPage2b 或 formPage2c。根据 formPage1.jsp 中提供的输入，它进入控制器（SimpleFormController 的扩展），控制器获取 user = command 对象输入的值。

当它们被提交到另一个控制器时，我希望能够在 formPage2a、formPage2b 或 formPage2c 中使用这些命令对象值。

这是当前代码：

* * *

## formPage1.jsp：

```
<form:form method="post" commandName="gainLossRequest">
            <form:errors path="*" cssClass="error"/>
            <table>
                <tr>
                    <td>
                        <table>
                            <tr>
                                <td><h4>Choose Client</h4></td>
                                <td style="font-size: medium; font-family: Arial, bold; color: red">*</td>
                            </tr>
                        </table>
                    </td>
                    <td>
                        <form:select path="client">
                            <form:option value="none" label="Select" />
                            <form:option value="abc" label="abc" />
                            <form:option value="def" label="def" />
                            <form:option value="xyz" label="xyz" />
                        </form:select>
                    </td>
                </tr>
<tr>
                    <td colspan="2">
                        <input type="reset" value="Reset" />
                        <input type="submit" value="Next" />
                    </td>
                </tr>
            </table>
            </form:form> 
```

* * *

## Controller1.java

```
public class TestController extends SimpleFormController {

    /** Logger for this class and subclasses */
    protected final Log logger = LogFactory.getLog(getClass());

    public TestController() {
        logger.info("entering TestController.constructor..");
        setCommandClass(UserPreference.class);
        setCommandName("userPreference");
    }

    public ModelAndView onSubmit(HttpServletRequest request,
            HttpServletResponse response, Object command, BindException errors)
            throws ServletException {
        logger.info("entering TestController.onSubmit all..");

        UserPreference userPreference = (UserPreference) command;

        ModelAndView view = null;

        if ("abc".equals(userPreference.getClient())) {
            GainLossRequest gainLossRequest = new GainLossRequest(userPreference);
            view = new ModelAndView("redirect:/test/gainLossRequest.htm",
                    "gainLossRequest", gainLossRequest);
                } else if ("def".equals(userPreference.getClient())) {
            IncomingPositionsRequest incomingPositionsRequest = new IncomingPositionsRequest();
            view = new ModelAndView(
                    "redirect:/test/incomingPositionsRequest.htm",
                    "incomingPositionsRequest", incomingPositionsRequest);
        } else if ("xyz".equals(userPreference
                .getClient())) {
            TaxStrategyRequest taxStrategyRequest = new TaxStrategyRequest();
            view = new ModelAndView("redirect:/test/taxStrategyRequest.htm",
                    "taxStrategyRequest", taxStrategyRequest);
        }
        }
} 
```

* * *

## formPage2a.jsp

```
<form:form method="post" commandName="gainLossRequest">
            <form:errors path="*" cssClass="error"/>
            <table style="width: 60%">
                <tr>
                     <td>Account Number (s):</td>
                     <td style="font-size: medium; font-family: Arial, bold; color: red">*</td>
                </tr>
                <tr>
                    <td>
                        User Chosen Client: 
                    </td>
                    <td>
                        <c:out value="${gainLossRequest.client}"/>
                    </td>
                </tr>
                                <tr colspan="2">
                                        <td>
                        <input type="reset" value="Reset" />
                        <input type="submit" value="Submit" />
                    </td>
                </tr> 
```

* * *

## 调度员 servlet 配置

```
<!-- setupNew.jsp is the first jsp --> 

<bean name="/test/setupNew.htm" class="chimeraweb.web.TestController">
        <property name="sessionForm" value="true"/>
        <property name="commandName" value="userPreference"/>
        <property name="commandClass" value="chimeraweb.service.UserPreference"/>
        <property name="validator">
            <bean class="chimeraweb.service.UserPreferenceValidator"/>
        </property>
        <property name="formView" value="/test/setupNew"/>
    </bean>

<!-- gainLossRequest.jsp is the 2nd jsp where I want to display the values captured in the first jsp page -->

    <bean name="/test/gainLossRequest.htm" class="chimeraweb.web.SimpleGainLossController">
        <property name="sessionForm" value="true"/>
        <property name="commandName" value="gainLossRequest"/>
        <property name="commandClass" value="chimeraweb.service.GainLossRequest"/>
        <property name="validator">
            <bean class="chimeraweb.service.GainLossValidator"/>
        </property>
        <property name="formView" value="/test/gainLossRequest"/>
    </bean> 
```

* * *

请帮忙！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T13:23:20.840

您还可以手动使用会话属性，例如：

```
public ModelAndView handleRequest(HttpServletRequest request){
      request.getSession().getAttribute("nameOfAttribute");
} 
```

很抱歉将其编写为带注释的控制器，我不记得 xml 配置控制器是否提供此功能...

没有涉及到的 Spring 代码。另一种选择是在控制器上使用 @SessionAttribute 注释：

```
@Controller 
@SessionAttributes("nameOfAttribute")
public class MyController{
//your session attribute can be accessed in controller methods using @ModelAttribute
public ModelAndView handleRequest(@ModelAttribute("nameOfAttribute")){
      session.getAttribute("nameOfAttribute");
} 
```

**笔记**

完成后，您需要清除会话属性：

```
request.getSession().setAttribute("nameOfAttribute", null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T13:56:35.117

您必须使用 JB Nizet 上面提到的隐藏变量来保留用户在第一页上输入的信息。或者，您可以在相应控制器上返回的模型属性中设置值。

给你的伪代码。

formPage1.jsp --> Controller1 --> 通过从请求对象中检索它来设置此表单中的值 --> formPage2a.jsp --> Controller2 将具有 val frm pg1 和 pg2a。

这样就不需要维护会话属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T16:07:08.890

最简单的方法是使用第二页中的隐藏字段来存储用户在第一个表单中输入的内容。这样，所有字段，包括第一页中的字段，都将与第二个表单一起提交。

# jsf-2 - @SessionScoped 为每个用户

> ID：10871764
> 
> 赞同：1
> 
> 时间：2012-06-03T15:55:58.500
> 
> 标签：jsf-2

我有许多托管 bean：

```
@ManagedBean 
@SessionScoped 
```

当用户登录我的 Web 应用程序时，它可以正常工作，但是当第二个用户登录时出现问题，他使用前一个用户的托管 bean。

所以我希望每个用户都有自己的托管 bean，即使许多用户同时登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:55:30.657

如果您在**同一个**浏览器实例中测试登录，就会发生这种情况。该会话即绑定到单个浏览器实例，因此同一浏览器实例的所有打开的窗口/选项卡共享相同的会话。要正确测试多个用户，您最好使用不同的浏览器实例进行测试，例如 Chrome 中的一个用户和 Firefox 中的另一个用户。或者，您也可以通过`Ctrl`++在 Chrome 中打开一个新的“`Shift`隐身”窗口`N`。这将为关闭实例后*不存储的会话/cookies/历史记录使用单独的空间。*

# d3.js - 在 d3.js 中设置对数比例的基础

> ID：10871769
> 
> 赞同：4
> 
> 时间：2012-06-03T15:56:27.573
> 
> 标签：d3.js

我是 d3 的新手，刚刚掌握了窍门。我的要求很简单。我希望将 x 轴对数缩放到某个十进制数的基数。默认的对数比例的底数为 10。搜索参考 API 和网络并没有给我带来改变底数的方法。可能是我错过了一些关于 d3 的基本知识。但我似乎无法克服这个障碍。理想情况下，不应该有一个类似于 pow.exponent() 的 log.base() 用于功率标度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:01:21.347

没有这样的功能（尽管添加一个不会太难）。您最好的选择是编写您自己的函数，该函数执行您指定的必要对数转换，然后将结果传递到正常的线性刻度以获得最终值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-05T22:26:38.463

d3.scale.log().base(2) 似乎工作正常。（正如 Adrien Be 指出的那样。）

# python - 如何在 Python 中使用 Beautiful Soup 刮掉这个？

> ID：10871771
> 
> 赞同：0
> 
> 时间：2012-06-03T15:56:36.820
> 
> 标签：python

```
<a href="http://www.chrisstucchio.com/blog/2012/bandit_algorithms_vs_ab.html">Why Multi-armed Bandit algorithms are superior to A/B testing (with Math)</a>, <a href="user?id=yummyfajitas">yummyfajitas</a>, <a href="item?id=4060658">11 comments</a>, 
```

如何通过以上述编写的 html 作为内容的 html 页面进行抓取并获取数据，如下所示：

```
link = http://www.chrisstucchio.com/blog/2012/bandit_algorithms_vs_ab.html
text = Why Multi-armed Bandit algorithms are superior to A/B testing (with Math)
user_id = yummyfajitas
item_id = 4060658 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:27:36.847

如果每次都以完全相同的顺序排列：

```
html = r'<a href="http://www.chrisstucchio.com/blog/2012/bandit_algorithms_vs_ab.html">Why Multi-armed Bandit algorithms are superior to A/B testing (with Math)</a>, <a href="user?id=yummyfajitas">yummyfajitas</a>, <a href="item?id=4060658">11 comments</a>, '

from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup(html) #sort the html
bowl = soup.findAll('a') #find all links in the html

link = bowl[0]['href'] #find the first 'a' tags href
text = bowl[0].contents[0] #find the first tags url
user_id = bowl[1]['href'].split('?id=')[1] #split on '?id=' and take the second  value. could be [-1] too
item_id = bowl[2]['href'].split('?id=')[1]

print 'link:', link
print 'text:', text
print 'user_id:', user_id
print 'item_id:', item_id 
```

# drupal - 设置节点添加表单标题 Drupal 7

> ID：10871776
> 
> 赞同：2
> 
> 时间：2012-06-03T15:57:37.090
> 
> 标签：drupal, drupal-7

我正在尝试在 drupal 中为节点添加表单设置自定义标题，由于某种原因它完全没有任何作用，我的 template.php 文件中的代码是：

```
function templatename_form_alter($form_id, &$form)
{
    if ($form_id == 'contenttypename_node_form') {
        drupal_set_title('my custom title');
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T16:33:48.963

[`hook_form_alter`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7)Drupal 6-8 中的参数是`&$form, &$form_state, $form_id`. 您正在使用 Drupal 5 形式的`$form_id, &$form`.

所以你想要的是这样的：

```
 function yourtheme_form_alter(&$form, &$form_state, $form_id) {
   switch ($form_id) {
   case 'contenttype_node_form':
     drupal_set_title("Your title.");
     break;
   }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:36:25.607

补充一点，上面的方法效果很好，但是如果用户编辑一个节点，它也会指定指定的标题，以进一步放置这个项目

```
function yourtheme_form_alter(&$form, &$form_state, $form_id) {
  switch ($form_id) {
    case 'contenttype_node_form':
      if ($form['nid']['#value'] != '') {
        drupal_set_title("Edit " . $form['title']['#default_value']);
      }
      else {
        drupal_set_title("Your name.");
      }
      break;
  }
} 
```

# java - 我应该如何在 SQL 表中保存两个大整数数组，以便它们相互关联

> ID：10871778
> 
> 赞同：1
> 
> 时间：2012-06-03T15:57:52.010
> 
> 标签：java, sql, jdbc

所以我必须在我的游戏中将字符库保存到 SQL 表中。有两个与银行对应的整数数组；playerItems[] 和 playerItemsN[]。playerItems 数组保存银行中物品的 ID，而 playerItemsN 保存金额。一个数组中的每个索引对应于另一个数组中的相同索引。

我将如何将这些存储在 SQL 表中？我正在考虑制作一个包含 [user][slot][itemID][itemAmt] 列的 accountBank 表，并为银行中的每个项目添加一行。我有一种感觉，尽管随着更多玩家得救，会有数千行。

有人可以为我的问题提供一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:32:53.390

如果您有固定数量的物品存放在银行中，那么我将创建两个表。一种从用户映射到项目 ID 的方法。另一个存储项目 ID 及其价格的表。但是，如果您的项目数量有限且固定，这同样很有用。否则，您定义的架构应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:10:36.940

你用的是什么数据库？许多数据库支持基于数组的数据类型。您可以创建一个包含以下列的表：`[user][slot][itemIdArray][itemAmountArray]`。如果您只需要一次查询整个数组，则此模式会更可取。如果您需要查询数组中的特定项目，您在帖子中描述的更规范化的方法可能会更好。

# c++ - 构造函数主体中的 auto_ptr 成员初始化（不在初始化器列表中）

> ID：10871781
> 
> 赞同：3
> 
> 时间：2012-06-03T15:58:58.810
> 
> 标签：c++, constructor, auto-ptr

我想知道在我的类的构造函数中初始化 auto_ptr 成员的正确方法。我的班级有 2 个（或更多）不同类型的 auto_ptr 实例。其中一个的初始化取决于第一个初始化的结果。

为了澄清，这就是我正在做的事情：

```
class C1 {
...
}

class C2 {
...
}

class Holder {
private:
  auto_ptr<C1> c1;
  auto_ptr<C2> c2;

public:
  Holder() :
    c1(new C1()),
    c2(NULL)
  {
    int x = this->c1->getGeneratedValue1();
    int y = this->c1->getGeneratedValue2();

    if (x > 0 && y > 0) {
      auto_ptr<C2> lC2(new C2(true, 10));
      this->c2 = lC2;
    } else if (x > 0) {
      auto_ptr<C2> lC2(new C2(false, 20));
      this->c2 = lC2;
    } else if (y > 0) {
      auto_ptr<C2> lC2(new C2(false, 30));
      this->c2 = lC2;
    } else {
      auto_ptr<C2> lC2(new C2(false, 0));
      this->c2 = lC2;
    }
  }
}; 
```

该示例有点重复，但它强制执行 2 个 auto_ptr 实例之间的依赖关系。我决定在构造函数主体中创建一个本地 auto_ptr，并在初始化它后立即将其托管实例的所有权转移给类成员。

这是正确的方法还是我应该使用更好/更安全的 semothing？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T16:05:15.470

对于*ctor-initializer-list 中*的复杂初始化规则，请使用辅助函数：

```
class Holder {
private:
  std::unique_ptr<C1> c1;
  std::unique_ptr<C2> c2;

  static C2* c2_init_helper(/* const? */ C1& the_c1)
  {
    int const x = the_c1->getGeneratedValue1();
    int const y = the_c1->getGeneratedValue2();

    if (x > 0) {
      if (y > 0) return new C2(true, 10);
      return new C2(false, 20);
    }
    if (y > 0) return new C2(false, 30);
    return new C2(false, 0);
  }

public:
  Holder() :
    c1(new C1()),
    c2(c2_init_helper(*c1))
  {
  }
}; 
```

此外，`std::unique_ptr`（如果您有 C++11 编译器）或`boost::scoped_ptr`两者都优于`std::auto_ptr`. `auto_ptr`所有权转移复制语义被发现只是麻烦。

# javascript - 下拉导航 - 鼠标离开时菜单闪烁

> ID：10871783
> 
> 赞同：1
> 
> 时间：2012-06-03T15:59:08.780
> 
> 标签：javascript, jquery

[http://jsfiddle.net/deswolf/D9X53/](http://jsfiddle.net/deswolf/D9X53/) 如果你用这个菜单玩了一会儿，你会注意到当你的鼠标离开顶部时，你会得到很多闪烁，这真的很烦人。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:26:52.737

当您在菜单仍在滚动时返回菜单时会发生您遇到的问题。我更新了您的代码以禁用该`mouseenter`事件 500 毫秒（足以让菜单滚动），然后再次启用它。这可以防止您在`mouseenter`事件仍在滚动时触发事件（导致事件滚动）。

[演示](http://jsfiddle.net/D9X53/1/)

# list - 如何在运行时创建多个操作委托并将其添加到操作委托列表中？

> ID：10871791
> 
> 赞同：1
> 
> 时间：2012-06-03T15:59:56.890
> 
> 标签：list, c#-4.0, .net-4.0, delegates

我的代码是这样的：

```
Dictionary<string, string> specialCharacters = new Dictionary<string, string>();
            specialCharacters.Add("@", "%");
            specialCharacters.Add("*", "^");

List<Action<Employee>> listOfDel = new List<Action<Employee>>();

foreach (KeyValuePair<string, string> character in specialCharacters)

{

Action<Employee> replace = (empData) => empData.EmpName =          empData.EmpName.ToString().Replace(character.Key, character.Value);

listOfDel.Add(replace);

//listOfDel.Add(new Action<Employee>((empData) => empData.EmpName = empData.EmpName.ToString().Replace(character.Key, character.Value)));

} 
```

问题是列表 listOfDel 具有相同的操作，因为它引用了相同的函数替换，它取最后一对 character.Key, character.Value ((" *", "^") 我想要一个在列表中具有不同操作的结果动作 listOfDel ，其中每个方法将具有不同的值。("@", "%"), ("* ", "^"); 我还尝试创建一个新的动作委托实例并将其用作匿名方法。请查看注释代码，但问题仍未解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:01:52.933

问题是您正在捕获迭代器变量。循环只声明了*一个*变量，因此当您*执行*委托时，它们都将使用相同的值（它们都引用同一个委托）。对于 C# 4 及更早版本，您只需创建一个副本：`foreach`

 *```
foreach (KeyValuePair<string, string> character in specialCharacters)  
{
    var copy = character;
    Action<Employee> replace = empData => empData.EmpName =    
         empData.EmpName.ToString().Replace(copy.Key, copy.Value);

    listOfDel.Add(replace);    
} 
```

C# 5 将使这变得不必要，因为`foreach`将被修复，以便就匿名函数而言，每次迭代都有一个单独的变量。

有关详细信息，请参阅 Eric Lippert 的博客文章[“关闭被认为有害的循环变量”](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。*

# c# - 获取两个两个变换矩阵（XNA）之间的旋转矩阵

> ID：10871793
> 
> 赞同：8
> 
> 时间：2012-06-03T16:00:08.250
> 
> 标签：c#, math, xna, augmented-reality, matrix-multiplication

我目前有一个用于 AR 的标记检测系统，它检测场景中的标记并为场景中的每个标记提供相机的变换矩阵。

假设我找到了 2 个标记。我正在尝试找到必须应用于其中一个标记的旋转矩阵，以使其与另一个标记的方向匹配。

我认为它应该与计算一个标记到另一个标记的变换矩阵并分解变换以获得 x,y,z 欧拉旋转矩阵相同，但我似乎无法让它工作。我将 C# 与 XNA 一起使用。

在代码中：

```
 Matrix marker1 = markerTransforms[0];
 Matrix marker2 = markerTransforms[1];

 Matrix relativeTransform = Matrix.Invert(marker1) * marker2;

 Quaternion rotation;
 Vector3 scale;
 Vector3 translation;
 relativeTransform.Decompose(out scale, out rotation, out translation);
 Matrix rotationMatrix = Matrix.CreateFromQuaternion(rotation); 
```

上面的这个似乎不起作用。

另一个问题是如何从旋转矩阵中提取 x,y,z 欧拉旋转？

编辑：

我在这里找到了一个按照 x,y,z 顺序将四元数转换为欧拉的函数：[http ://forums.create.msdn.com/forums/p/4574/23763.aspx](http://forums.create.msdn.com/forums/p/4574/23763.aspx)

将此应用于我的代码，我得到以下结果：

![在此处输入图像描述](../Images/da6ce51da67a0a82ba18d7701a8dfbf1.png)

实际旋转应该是：x:0 y:0 z:-0.52

我还注意到 y 和 z 变化很大，这取决于我如何放置相机。

我从标记检测器获得的两个变换矩阵包含相机相对于其中一个标记的方向和平移，如下所述：http: [//www.hitl.washington.edu/artoolkit/documentation/tutorialcamera.htm](http://www.hitl.washington.edu/artoolkit/documentation/tutorialcamera.htm) 我已经转换将它们转换为 XNA 格式，我知道它们可以正常工作，因为我可以将角绘制到屏幕上，并且它与相机所看到的相匹配。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T10:48:44.130

我最喜欢的解决方案是使用四元数。如果您有一个由**q1**描述的方向，而另一个由**q2**描述的方向，则可以通过以下方式从一个方向到达另一个方向

> q1=q*q2

是**q**你正在寻找的旋转。

> q = q1 * (q2)^-1; q = q1 * conj(q2);

你只需要从[rotation 转换为 quaternion](http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm)和[quaternion 到 rotation](http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToMatrix/index.htm)。

只要确保对四元数进行归一化，这样等价就成立了。在我链接的页面中，您拥有所有必要的公式、解释，甚至是 Java、c++ 中的代码。真的值得添加到收藏夹。

# css - 为什么不会 {margin:auto;} 在顶部和底部给出自动边距？

> ID：10871795
> 
> 赞同：3
> 
> 时间：2012-06-03T16:00:17.357
> 
> 标签：css, margin

> **可能重复：**
> [为什么 margin-top: auto 和 margin-bottom:auto 不与左右对应物一样工作？](https://stackoverflow.com/questions/6775273/why-dont-margin-top-auto-and-margin-bottomauto-work-the-same-as-their-left-an)

当您使用`{margin:auto;}`它时，它会在对象的任一侧为您提供自动边距，但您没有将它们放在对象的顶部和底部，这是为什么呢？

例如，如果我想在页面中间集中一个项目，我将不得不使用`{width:250px; height:250px; position: fixed; top: 50%; left: 50%; margin-top: -125px; margin-left: -125px;}`

Surly margin auto 应该为上/下和左/右边缘处理这个？

# sql-server - 获取今天创建的所有行

> ID：10871800
> 
> 赞同：11
> 
> 时间：2012-06-03T16:01:04.207
> 
> 标签：sql-server

我无法获得今天创建的所有行。我使用了多个函数，如`getdate()`, `Cast`,`Convert`等，但都是徒劳的。

这是我的基本查询：

```
SELECT timeId
FROM table_roaster_time_table
WHERE (user_id = @user_id) AND (DATEDIFF(d, date, GETDATE()) = 0) 
```

我想`timeId`从将提供的表格`table_roaster_time_table`中获取`userid`日期，日期是今天。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-03T16:04:01.383

为了保持在`[date]`列上使用索引的任何机会（即使今天不存在，将来也可能存在），请尝试：

```
AND [date] >= DATEADD(DAY, 0, DATEDIFF(DAY, 0, CURRENT_TIMESTAMP))
AND [date] <  DATEADD(DAY, 1, DATEDIFF(DAY, 0, CURRENT_TIMESTAMP)); 
```

如果您使用的是 SQL Server 2008 或更高版本，则可以执行以下操作来缩短代码，但仍然使用索引`[date]`是否存在：

```
AND CONVERT(DATE, [date]) = CONVERT(DATE, CURRENT_TIMESTAMP); 
```

**编辑**

由于您似乎对为什么`3/6/2012`是 3 月 6 日而不是 6 月 3 日感到困惑，我可能还建议您不要手动将模棱两可的日期文字`'3/6/2012'`插入到数据库中，而是将该列设为默认值，例如：

```
ALTER TABLE dbo.table_roaster_time_table
  ALTER COLUMN [date] DATETIME NOT NULL;

ALTER TABLE dbo.table_roaster_time_table
  ADD CONSTRAINT df_date DEFAULT (CURRENT_TIMESTAMP)
  FOR [date]; 
```

如果您要插入日期文字，那么至少使用一种安全且明确的格式，例如`YYYYMMDD`：

```
INSERT dbo.table_roaster_time_table([date]) VALUES('20120603'); 
```

现在没有混乱。

# spring - 如何发送带附件的电子邮件

> ID：10871804
> 
> 赞同：1
> 
> 时间：2012-06-03T16:01:34.887
> 
> 标签：spring, email, email-attachments

我想发送一封附有图片的电子邮件。我正在使用带有速度模板的 spring 3。我可以这样做，但是由于某些原因，当我添加带有图像名称的扩展名时，我没有收到电子邮件。

以下是我使用的代码：

```
private MimeMessage createEmail(Application application, String templatePath,   String subject, String toEmail, String fromEmail, String fromName) {
    MimeMessage mimeMsg = mailSender.createMimeMessage();
    Map<String, Object> model = new HashMap<String, Object>();
    model.put("application", application);
    String text = VelocityEngineUtils.mergeTemplateIntoString(velocityEngine, templatePath, model);
    text = text.replaceAll("\n", "<br>");

    try {

        MimeMessageHelper helper = new MimeMessageHelper(mimeMsg, true);
        helper.setSubject(subject);
        helper.setTo(toEmail);

        if (fromName == null) {
            helper.setFrom(fromEmail);
        } else {
            try {
                helper.setFrom(fromEmail, fromName);
            } catch (UnsupportedEncodingException e) {
                helper.setFrom(fromEmail);
            }
        }

        helper.setSentDate(application.getDateCreated());
        helper.setText(text, true);

        InputStream inputStream = servletContext.getResourceAsStream("images/formstack1.jpg");
        helper.addAttachment("formstack1",  new ByteArrayResource(IOUtils.toByteArray(inputStream)));

    } catch (MessagingException e) {
        throw new RuntimeException(e);
    }
    catch (IOException e) {
        throw new RuntimeException(e);
    }

    return mimeMsg;
} 
```

使用上面的代码，我可以将**formstack1**添加为附件，但它没有扩展名，所以我没有得到**formstack1.jpg**图像文件。但是，当我使用**formstack1.jpg**作为要附加的资源名称时`helper.addAttachment("formstack1", new ByteArrayResource(IOUtils.toByteArray(inputStream)));`，formstack1 更改为`formstack1.jpg`我什至没有收到电子邮件。我正在使用`smtp.gmail.com`和`25`端口。不过，我确实在控制台上收到了成功发送电子邮件的消息。但是电子邮件永远不会送达。

**编辑：**如果我保持它喜欢`helper.addAttachment("formstack1", new ByteArrayResource(IOUtils.toByteArray(inputStream)));`并在下载附加图像时将扩展名从无更改为 .jpg，我会得到所需的图像。

有人可以帮我理解为什么会发生这种情况，以及如何使用 spring 3 发送带有 1 个或多个附件的电子邮件。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:23:33.837

你最好使用 Apache Commons HtmlEMail

[http://commons.apache.org/email/userguide.html](http://commons.apache.org/email/userguide.html)

# ruby-on-rails - ruby on rails 实现搜索多个关系的搜索表单

> ID：10871806
> 
> 赞同：0
> 
> 时间：2012-06-03T16:01:51.133
> 
> 标签：ruby-on-rails, search

我已经实现了一个简单的搜索表单（根据“简单表单”截屏视频），它在我的数据库中搜索“疾病”表。现在我想要同一个搜索框来搜索“疾病”表和“症状”表。

我的代码目前如下所示：

main_page\index.html.erb：

```
<b>Illnesses</b>
    <%= form_tag illnesses_path, :method => 'get' do %>
      <p>
        <%= text_field_tag :search, params[:search] %><br/>
        <%= submit_tag "Illnesses", :name => nil %><br/>
      </p> 
```

疾病控制器.rb：

```
class IllnessesController < ApplicationController
    def index
    @illnesses = Illness.search(params[:search])

    respond_to do |format|
        format.html # index.html.erb
        format.json { render json: @illnesses }
    end
    ...
end 
```

疾病.rb：

```
class Illness < ActiveRecord::Base
    ...

    def self.search(search)
    if search
        find(:all, :conditions => ['name LIKE ?', "%#{search}%"])
    else
        find(:all)
    end
 end 
```

你能指导我如何实现这个扩展吗？我是初学者（显然），我真的不知道“form_tag”操作应该是什么，我应该在哪里实现它以及哪个类应该实现扩展搜索......

谢谢，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:28:57.420

嗯，假设你有一个类似于 Illness 类的 Symptom 类（顺便说一句，如果你将搜索功能重构到一个模块中然后在两个类中都包含这个模块，那将是最干净的），那么你可以这样做：

```
class IllnessesController < ApplicationController
  def index
    @results = Illness.search(params[:search]) + Symptom.search(params[:search])
    ...
  end
end 
```

但也许您想重构控制器的名称，因为现在它不再是特定于疾病的。另请注意，我们在这里使用两个搜索查询而不是一个，因此它不是最佳的，但可以避免同时为两种类型的模型发送纯 SQL 查询的痛苦。

好的模块。如果您不熟悉模块，它们可能看起来有点奇怪，但它们只不过是一段可以跨类共享以保持 DRY 的代码，这也是我们的情况。您可以想象将模块包含为从模块中获取代码并在类的上下文中对其进行评估（由解释语言提供），其结果与模块代码被硬编码到类本身中的结果相同。所以模块看起来像：

```
module Search
  def self.search(token)
    find(:all, :conditions => ['name LIKE ?', "%#{search}%"])
  end
end 
```

现在任何类，如果它实现了 find 方法（ActiveRecord API），都可以愉快地包含这个模块并享受这样的搜索功能：

```
require 'path/to/search'

class Foo < ActiveRecord::Base
  include Search
end 
```

就是这样。现在，如果您需要调整搜索代码，您只需在一处更改它，它就会传播到所有包含器。您还可以在模块中创建模块，有时会像这样使用：

```
require 'active_support/concern'

module Search
  extend ActiveSupport::Concern

  included do
    #Stuff that gets done when the module is included (new validations, callbacks etc.)
  end

  module ClassMethods
    #Here you define stuff without the self. prefix
  end

  module InstanceMethods
    #Instance methods here
  end
end 
```

但其中一些是 ActiveSupport::Concern 中定义的约定，因此并非所有内容都可能在纯 ruby​​ 中工作。我鼓励你尝试这些东西，它们让 ruby​​ 变得真正有趣。哦，扩展很像包含，只是，据我了解，它是在类级别上评估的。因此，如果您关注我，包含模块的所有实例方法都将成为包含模块的类方法。玩得开心！

# java - 如何在 Eclipse for android 中制作一个用作链接的按钮

> ID：10871807
> 
> 赞同：-1
> 
> 时间：2012-06-03T16:01:52.357
> 
> 标签：java, android, xml, eclipse

我需要知道如何制作一个打开 androids 网络浏览器并导航到特定 URL 的按钮。我正在使用 eclipse 并且已经知道如何制作按钮和点击监听器。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:13:46.860

只需将此代码添加到 onClick()：

```
 // Launch a browser
        Uri uri = Uri.parse("http://www.yahoo.com");
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:10:56.627

```
Intent websiteIntent = new Intent(Intent.ACTION_VIEW);
Uri uri = Uri.parse("http://www.android.com");
websiteIntent.setData(uri);
startActivity(websiteIntent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T16:26:30.833

尝试这个

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com");
startActivity(intent); 
```

# android - 必要的媒体 QT

> ID：10871811
> 
> 赞同：0
> 
> 时间：2012-06-03T16:02:11.047
> 
> 标签：android, qt

我对 qt 完全陌生，所以我要问的问题可能很有趣（但对我来说确实不是）。在普通的 C++ 代码中，我使用这一行来生成背景：

```
 view.setBackgroundBrush(QPixmap("starstexture.jpg")); 
```

但是当我尝试将我的应用程序移植到 android 上时，我不知道应该将 jpg 文件放在哪里。
期待你的答案 -
卡米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:52:37.050

如果您只需要一组有限的图像（这意味着，您在编译时就知道图像，而不是让用户在应用程序的文件夹中添加自己的图像），您可以使用 Qt 的资源系统。

如果您使用的是 QtCreator，您可以简单地向您的项目添加一个新的资源文件，在其中创建一个名为 的新前缀`/`，然后添加您的文件。它在编译期间被放入您的应用程序中，并在路径下可用`":/starstexture.jpg"`。注意前缀`":/"`，它代表 Qt 的资源系统。还要注意，这样的文件名当然只适用于 Qt 类。

# image - .htaccess 一对一特定图像的图像重定向

> ID：10871812
> 
> 赞同：0
> 
> 时间：2012-06-03T16:02:22.810
> 
> 标签：image, apache, .htaccess, mod-rewrite

我曾经在我的域上建立并运行一个站点，但后来我将其删除。然而，在那个站点中，我有一些特定的图像，我要么与其他站点共享。

自从我访问该域的日志以来已经有一段时间了，我意识到大约有 2 打图像以 404 的形式出现，我认为它们是共享的图像。我想要做的是将这些图像放在我的另一个域中，并使用图像现在所在的其他域 url 重写对这些图像的任何请求。

这是否可能，在一对一的基础上指定图像并让它们指向另一个域上的对应部分？我已经看到它在人们没有那么挑剔的地方完成，但就我想做的事情而言却没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T16:27:39.187

是的，您可以使用 .htaccess 做到这一点。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
Options +FollowSymLinks

RewriteRule ^img/path/to/file1.jpg$ http://newdomain.com/new/path/to/file1.jpg [L,R=301]
RewriteRule ^img/path/to/file2.jpg$ http://newdomain.com/other/new/path/to/file2.jpg [L,R=301]
RewriteRule ^img/path/to/(file3.jpg|file4.jpg)$ http://newdomain.com/typical/new/path/to/$1 [L,R=301]
</IfModule> 
```

考虑到`http://olddomain.com/img/path/to/file1.jpg`是图像文件之一，并且 .htaccess 位于 的文档根目录中`olddomain.com`，这应该可以完成工作。如果您无法将旧文件名和新文件名与某些正则表达式匹配，则需要`RewriteRule`为每个丢失的图像添加一行。

# android - 在 main.xml 中创建一个按钮

> ID：10871816
> 
> 赞同：1
> 
> 时间：2012-06-03T16:02:38.957
> 
> 标签：android, layout, button, timer

我只想制作这段代码，我有一个按钮，但是当我单击该按钮时，我想要一个计时器启动..并且每个计时器滴答声都会在 main.xml 中创建一个按钮..我该怎么做？请帮帮我先生！

```
 Button a = (Button) findViewById(R.id.button1);
 a.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        new CountDownTimer(5000,1000) {

            @Override
            public void onTick(long millisUntilFinished) {
                // TODO Auto-generated method stub
                //how to create a button here!
            }

            @Override
            public void onFinish() {
                // TODO Auto-generated method stub

            }
        }.start();
    }
}); 
```

我试试这个..但是当我点击按钮时出现这个词（“不幸的是程序已停止”）

```
 final int i=1;
    Button a = (Button) findViewById(R.id.button1);
    a.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        new CountDownTimer(5000,1000) {

            @Override
            public void onTick(long millisUntilFinished) {
                // TODO Auto-generated method stub
                //how to create a button here!
                LinearLayout linearLayout = (LinearLayout) findViewById(R.layout.main);
                Button btn = new Button(NyaActivity.this);
                btn.setId(i+1);
                linearLayout.addView(btn);
                btn.setText("Button"+(i+1));
                final int index = i;
                btn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        Log.i("TAG", "The index is" + index);
                    }
                });

            }

            @Override
            public void onFinish() {
                // TODO Auto-generated method stub

            }
        }.start();
    }
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:14:06.513

尝试以这种方式在 CountDownTimer onTick 上动态添加按钮：

```
 int i=1;
    Button a = (Button) findViewById(R.id.button1);
    a.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        new CountDownTimer(5000,1000) {

            @Override
            public void onTick(long millisUntilFinished) {
                // TODO Auto-generated method stub
                //how to create a button here!
                LinearLayout linearLayout = (LinearLayout) findViewById(R.id.mainlauoutid);
                Button btn = new Button(Your_Current_Activity.this);
                btn.setId(i+1);
                btn.setText("Button"+(i+1));
                btn.setLayoutParams(lprams);
                final int index = i;
                btn.setOnClickListener(new OnClickListener() {
                    void onClick(View v) {
                        Log.i("TAG", "The index is" + index);
                    }
                });
                linearLayout.addView(btn);
            }

            @Override
            public void onFinish() {
                // TODO Auto-generated method stub

            }
        }.start();
    }
}); 
```

你的布局看起来像：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/mainlauoutid"
    android:orientation="vertical" >
..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:18:06.337

在 main.xml 中创建 LinearLayout 并在 a.setOnClickListener 之前使用：

```
final LinearLayout layout = (LinearLayout) findViewById(R.id.layoutId); 
```

然后在 onTick() 调用中：

```
Button newBtn = new Button(YourActivity.this);
newBtn.setText("new button");
layout.addView(newBtn); 
```

# objective-c - 带有 IsAllDay=TRUE 的 CalEvent 让我遇到了时区问题

> ID：10871819
> 
> 赞同：0
> 
> 时间：2012-06-03T16:03:18.587
> 
> 标签：objective-c, cocoa, timezone, nsdate, nscalendar

我对 CalCalendar 中的全天活动有 TimeZone 问题：

```
- (BOOL)setDayType:(NSString *)type 
            forDay:(NSDate *)date;
{
    NSError *err = nil;
    CalEvent *e = [CalEvent event];
    [e setTitle:type];
    [e setIsAllDay:YES];
    [e setStartDate:date];
    [e setEndDate:[date dateByAddingTimeInterval:1]];
    [e setCalendar:[self calendar]];
    if ( ![[CalCalendarStore defaultCalendarStore] saveEvent:e span:CalSpanThisEvent error:&err] )
    {
... 
```

假设我将日期设置为 2012 年 1 月 2 日，时间为 00:00:00。我在 GMT+2，所以时区 +0200。我的日期对象报告 1-1-2012，22:00:00，在 GMT，根据这个 NSLog 输出：

```
"Set daytype ptd on 2012-01-01 22:00:00 +0000" 
```

甚至在 1 月 1 日*也会*生成全天！！

如何确保我*为所有时区*在正确的一天设置全天事件？我可以轻松增加三个小时，但这在全球范围内都行不通！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T02:47:48.047

只要`date`是在当前时区的正确日期，您就可以原样使用它。

您看到的“问题”是因为如果您*通过 NSLog*（或在调试器中）打印存储的日期，它将始终**向**您显示 GMT 时间，因为`NSDate`不知道您所在的时区。

但是，由于`date`是一个特定的时间点，当您为用户格式化它（使用日期格式化程序）时，它会显示正确的日期和时间，无论时区是什么，只要它保持一致。

您需要担心像您提到的那样添加/减去时间的唯一情况是，如果您需要一个跨*多个时区的*相同日期的时间点。

**编辑：**
所以看起来 iCal 使用 GMT 时间来存储所有内容，因此您需要在 GMT 时区创建日期。如果您需要这方面的帮助，请将您的代码发布在您创建代码的地方`NSDate`，我很乐意为您指明正确的方向。

# tumblr - 如何禁用 Tumblr 照片集

> ID：10871822
> 
> 赞同：0
> 
> 时间：2012-06-03T16:03:43.903
> 
> 标签：tumblr

我想禁用 tumblr Photoset 功能。这意味着我只想在我的 tumblr 网站上放一张图片，而不是 Tumblr 提供的“布局”。但是当点击图片时，灯箱仍然会打开。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:42:42.747

您可以使用块禁用正常的照片集功能，该`{block:Photos} {/block:Photos}`块为集中的每个图像单独渲染。也可以选择一张图片（很多主题都可以），但我不知道你是怎么做的（我不是开发人员，但我敢打赌涉及Javascript或未记录的代码），更不用说你是否可以触发完整的灯箱，而无需直接显示其他图像。

# ruby-on-rails - Rails 3-设计-使用facebook登录后登录错误

> ID：10871826
> 
> 赞同：0
> 
> 时间：2012-06-03T16:04:15.897
> 
> 标签：ruby-on-rails, login, devise

我将设计和omniauth设置为authen，用facebook登录后，我创建一个用户并为用户生成密码

```
user = User.new :fullname => auth_hash['extra']['raw_info']['name'], 
:email =>auth_hash['extra']['raw_info']['email'], 
:encrypted_password => Devise.friendly_token[0,20] 
```

但是当我尝试使用我的 facebook 用户 (http://localhost:3000/users/sign_in) 登录时，出现错误：

```
BCrypt::Errors::InvalidHash in Devise::SessionsController#create 
invalid hash 
```

要求

参数：

```
{"utf8"=>"✓",
 "authenticity_token"=>"/xA0goLirKlI2YWSLSMQk+3a8xDrVmrhqIjhILh0OME=",
 "user"=>{"email"=>"xxx@gmail.com",
 "password"=>"[FILTERED]",
 "remember_me"=>"1"},
 "commit"=>"Sign in"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T00:46:28.293

默认情况下，Devise 使用 bcrypt 的加密密码算法，所以我的猜测是您尝试手动输入密码的加密版本时遇到问题。您是否尝试过简单地设置一个 :password 值而不是 :encrypted_pa​​ssword？如：

```
user = User.new :fullname => auth_hash['extra']['raw_info']['name'], 
:email =>auth_hash['extra']['raw_info']['email'], 
:password => Devise.friendly_token[0,20] 
```

# java - 导出为 .jar 文件后出现 FileNotFoundException

> ID：10871827
> 
> 赞同：3
> 
> 时间：2012-06-03T16:04:18.307
> 
> 标签：java, jar, filenotfoundexception

我正在使用 Eclipse 并开发一个使用本地文件的 java 应用程序。该文件位于项目文件夹中的子文件夹中，例如“mydata/myfile.txt”当我从 eclipse 运行应用程序时一切正常，我打开一个 FileInputStream，将“mydata/myfile.txt”作为名称传递，文件是读就好了。但是当我将我的应用程序导出为 .jar 并尝试运行它时，我得到的只是控制台中的 FileNotFoundException。

如何导出程序以便它可以在任何计算机上运行并能够访问该文件？先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T16:06:44.750

当您的应用程序导出为 jar 文件时，您的配置文件无法作为文件使用，因为它包含在 .jar 文件中。相反，您应该通过`ClassLoader.getResourceAsStream()`. 有关更多背景信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T16:09:02.703

也许这会帮助你

```
InputStream in=ClassLoader.getSystemResourceAsStream("your file"); 
```

# mysql - 查询多个表，但只从一个表中获取结果而不重复

> ID：10871828
> 
> 赞同：0
> 
> 时间：2012-06-03T16:04:23.187
> 
> 标签：mysql, sql, join

这是一个例子来解释我需要什么：

我有 3 张桌子：

```
 contact: { id, invoices, name } // a contact can have several invoices
 invoice: { id, contact, lines, comment } // an invoice can have several lines but only one contact
 line: { id, invoice, designation } // a line can have only one invoice 
```

如果用户搜索发票，则希望查询注释、名称和名称字段并仅获取匹配的发票。

所以我这样做了：

```
SELECT 
  invoice.id AS id, 
  invoice.contact AS contact, 
  invoice.comment AS comment, 
FROM invoice 
  LEFT JOIN contact ON invoice.contact = contact.id 
  LEFT JOIN line ON line.invoice = invoice.id
WHERE (
  contact.name LIKE '%SEARCH_TERM%' OR 
  invoice.comment LIKE '%SEARCH_TERM%' OR 
  line.designation LIKE '%SEARCH_TERM%'
) 
```

这项工作除了如果发票有几行与搜索词匹配，我将获得多次相同的发票。

所以我的问题是：即使在多个相关记录中找到搜索词，有没有办法只获得一次发票？

另外，有没有办法只获取发票的字段而不使用别名（我不关心表格联系人和线路，除了搜索）？

如果你知道更好的方法来做到这一点，我很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:08:25.217

```
SELECT 
  DISTINCT invoice.*
FROM invoice 
  LEFT JOIN contact ON invoice.contact = contact.id 
  LEFT JOIN line ON line.invoice = invoice.id
WHERE (
  contact.name LIKE '%SEARCH_TERM%' OR 
  invoice.comment LIKE '%SEARCH_TERM%' OR 
  line.designation LIKE '%SEARCH_TERM%'
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:11:21.677

是的。您可以通过向 WHERE 子句添加子查询来做到这一点：

```
SELECT invoice.id AS id, invoice.contact AS contact, invoice.comment AS comment, 
FROM invoice LEFT JOIN
     contact
     ON invoice.contact = contact.id 
WHERE contact.name LIKE '%SEARCH_TERM%' OR 
      invoice.comment LIKE '%SEARCH_TERM%' OR
      invoice.id in (select line.invoice
                     from line
                     where line.designation LIKE '%SEARCH_TERM%') 
```

您还可以使用子查询在 FROM 子句中构造它：

```
SELECT invoice.id AS id, invoice.contact AS contact, invoice.comment AS comment, 
FROM invoice LEFT JOIN
     contact
     ON invoice.contact = contact.id left join
     (select distinct line.invoice
      from line
      where line.designation LIKE '%SEARCH_TERM%'
     ) line
     on line.invoice = invoice.id
WHERE contact.name LIKE '%SEARCH_TERM%' OR 
      invoice.comment LIKE '%SEARCH_TERM%' OR
      line.invoice is not null 
```

在这种结构中，如果不止一行有搜索词，则需要使用 distinct 关键字来防止重复行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T16:10:26.300

DISTINCT 会起作用吗？

```
SELECT DISTINCT
  i.id, 
  i.contact, 
  i.comment, 
FROM invoice AS i
  LEFT JOIN contact ON i.contact = contact.id 
  LEFT JOIN line ON line.invoice = i.id
WHERE (
  contact.name LIKE '%SEARCH_TERM%' OR 
  i.comment LIKE '%SEARCH_TERM%' OR 
  line.designation LIKE '%SEARCH_TERM%'
) 
```

# php - PHP引用两个例子的区别？

> ID：10871829
> 
> 赞同：-2
> 
> 时间：2012-06-03T16:04:26.337
> 
> 标签：php, reference

如果我这样做，php有什么区别

```
$temp = &$files; 
```

或者

```
$temp =& $files; 
```

我不明白

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T16:06:15.990

没有区别。这是代码风格偏好的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:13:39.447

不同之处在于您放置空格的位置。

您可以垂直使用空格来创建对某事的意识。看一看：

```
$temp =& $files;

$temp = &$files;

$temp = & $files;

$temp =  &  $files;

$temp=  &  $files; 
```

水平空白也可以：

```
$temp= 
& $files; 
```

然后在某个地方停止做更多的变化是有意义的。

保持`&`接近 the`=`或 the`$`以便清楚它是别名变量而不是相同的[`&`运算符](http://www.php.net/manual/en/language.operators.bitwise.php)：

```
$alias = &$variable;

$alias =& $variable; 
```

# c# - 为什么在使用动态参数链接方法时 VS2010 IntelliSense 会失败

> ID：10871831
> 
> 赞同：1
> 
> 时间：2012-06-03T16:04:31.373
> 
> 标签：c#, visual-studio-2010, c#-4.0

我想对 C# 4.0 动态方面的专家进行一些解释。

我有一个流利的构建器类来帮助在创建对象之前对其进行配置。这个接口有一个方法 SetParameters(...)：

```
 public FluentBuilder<TInterface> SetParameters(dynamic parameters)
    {
        _parameters = parameters;
        return this;
    } 
```

我这样做是为了使用流畅的界面：

```
var order = new Order();

/* Setting up parameters */
dynamic parameters = new ExpandoObject();
parameters.Transaction = transactionObj;
parameters.CurrentPrincipal = Thread.CurrentPrincipal;

var proxiedOrder = ObjectProxyFactory
    .Configure<IOrder>(order)
    .FilterMethods(o => o.InsertOrder())
    .AddPreDecoration(AppConcerns.JoinSqlTransaction)
    .AddPreDecoration(AppConcerns.EnterLog)
    .AddPostDecoration(AppConcerns.ExitLog)
    .AddPostDecoration(AppConcerns.SecurityCheck)
    .SetParameters(parameters)
    .Teste() //this method doesn't exist in the fluent builder
    .CreateProxy();

var result = proxiedOrder.InsertOrder(); 
```

正如在上面的代码片段中所评论的那样，调用 Teste() 的方法在流利的接口中不存在，但是 intelissense 允许在我调用 SetParameters 之后编写任何方法，就像它返回动态一样，但是正如您在代码中看到的那样，SetParameters 返回的 FluentInterface 不是动态的.

上面的代码在运行时编译成功会失败，因为在运行时在 FluentBuilder 类中找不到方法 Teste()。

为了在设计时解决这个问题并获得正确的 Intelissense，我需要将参数转换为 ExpandoObject 类：

```
var proxiedOrder = ObjectProxyFactory
.Configure<IOrder>(order)
.FilterMethods(o => o.InsertOrder())
.AddPreDecoration(AppConcerns.JoinSqlTransaction)
.AddPreDecoration(AppConcerns.EnterLog)
.AddPostDecoration(AppConcerns.ExitLog)
.AddPostDecoration(AppConcerns.SecurityCheck)
.SetParameters((ExpandoObject)parameters) //cast to ExpandoObject
.Teste() //now intelissense is giving me an "red" error and solution will not compile
.CreateProxy();

var result = proxiedOrder.InsertOrder(); 
```

我发现，每当我在任何方法链接中传递 C# 动态参数时，在该方法接收到动态参数之后，对方法的后续调用将表现得像返回 C# 动态对象，即使方法的返回类型不是动态的。

这是一个错误吗？还是预计会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T16:07:53.167

预计会发生。任何涉及动态参数的方法调用都是动态解析的——直到执行时才能确定确切的重载，因此返回类型在编译时是未知的，因此它被视为`dynamic`. 在某些情况下，C# 编译器*可以*推断出更多信息（例如，如果它是静态方法调用），但为简单起见，它不会。只有少数涉及动态值的表达式具有非动态类型。（从内存中，`is`运算符始终为`bool`，并且始终假定构造函数返回正在构造的类型。）

编辑：我终于找到了规范参考。从第 7.6.5 节开始：

> 如果以下至少一项成立，则调用表达式是动态绑定的（第 7.2.2 节）：
> 
> *   主表达式具有编译时类型动态。
> *   可选参数列表的至少一个参数具有编译时类型动态，并且主表达式没有委托类型。
> 
> 在这种情况下，编译器将调用表达式分类为动态类型的值。

# jquery - 未捕获的类型错误：对象# has no method 'replace' line 75 I'm putting together a tournament bracket system allowing you to drag 'winners' to the next round, and if applicable the loser is automatically transfered to his place in a losers brac 问问题 问问题 2012-06-03T16:05:05.960 4087 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm putting together a tournament bracket system allowing you to drag 'winners' to the next round, and if applicable the loser is automatically transfered to his place in a losers bracket. After each drop I'm sending to php details about the match for both individual tracking purposes as well as refilling the positions in the event it is shut down and reopened. I ran into a problem where I was sending some unwanted characters that I used .replace() to rid myself and now everything on the winners side works fine, but anything on the losers side doesn't. Hoping someone can help me figure out the cause of this. 15: $(window).load(function(){ 16: $(".make-draggable, .draggable, .drag").draggable({ 17: helper: "clone", 18: snap: ".draggable", 19: snapMode: "inner" 20: }); 21: $(".draggable").droppable({ 22: drop: function(event, ui) { 23: var elemText = ui.draggable.text(); 24: $(this).html(elemText); 25: var outB = ui.draggable.attr('id').split("-"); 26: var pl1; 27: var pl2; 28: if (outB[0] == "go") { 29: var num = outB.length; 30: var loser; 31: var loserval; 32: var losloc; 33: var losid = outB[1]; 34: var numchars = outB[1].length; 35: if (num === 2) { 36: var i = 1; 37: loser = (losid.charAt(0) + "-"); 38: pl1 = elemText; 39: for (i = 1; i < numchars; i++) { 40: loser = (loser+losid.charAt(i)); 41: } 42: loserval = $("#go-" + loser); 43: losloc = ("#"+losid); 44: $(losloc).html(loserval.text()); 45: pl2 = loserval.text(); 46: } else if (num === 3) { 47: loser = (outB[1] + outB[2]); 48: loserval = $("#go-" + loser); 49: losloc = ("#"+loser); 50: $(losloc).html(loserval.text()); 51: pl1 = loserval.text(); 52: pl2 = elemText; 53: } 54: } else { 55: var getround = $(this).attr('id'); 56: if(getround == 'winner') { 57: pl1 = $('#winnerb').text(); 58: pl2 = $('#loserb').text(); 59: } else { 60: var inti = ui.draggable.attr('id').substring(1); 61: if (inti%2 == 0) { 62: var apl = inti - 1; 63: pl1 = elemText; 64: pl2 = $('#l'+apl).text(); 65: alert(apl); 66: } else { 67: var apl = inti++; 68: alert(apl); 69: pl1 = $('#l'+apl).text(); 70: pl2 = elemText; 71: } 72: } 73: } 74: var matrou = ui.draggable.parent().attr("id").split("-"); 75: $.urlParam = function(name){ 76: var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href); 77: return results[1] || 0; 78: } 79: pl1 = pl1.replace(/(\r\n|\n|\r)/gm,""); 80: pl2 = pl2.replace(/(\r\n|\n|\r)/gm,""); 81: elemText = elemText.replace(/(\r\n|\n|\r)/gm,""); 82: var params = 'win='+elemText+'&p1='+pl1+'&p2='+pl2+'&match='+matrou[3]+'&round='+matrou[1]+'&wloc='+$(this).parent().attr('id')+'-'+$(this).attr('id')+'&lloc='+$(losloc).parent().attr('id')+'-'+$(loserval).attr('id')+'&tid='+$.urlParam('tid'); 83: xmlhttp=new XMLHttpRequest(); 84: xmlhttp.onreadystatechange=function() { 85: if (xmlhttp.readyState==4 && xmlhttp.status==200) { 86: } 87: } 88: xmlhttp.open("POST","sub_match.php",true); 89: xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 90: xmlhttp.setRequestHeader("Content-length", params.length); 91: xmlhttp.setRequestHeader("Connection", "close"); 92: xmlhttp.send(params); 93: } 94: }); 95: }); For complex initialization rules inside the ctor-initializer-list, use a helper function: class Holder { private: std::unique_ptr <c1>c1; std::unique_ptr <c2>c2; static C2* c2_init_helper(/* const? */ C1& the_c1) { int const x = the_c1->getGeneratedValue1(); int const y = the_c1->getGeneratedValue2(); if (x > 0) { if (y > 0) return new C2(true, 10); return new C2(false, 20); } if (y > 0) return new C2(false, 30); return new C2(false, 0); } public: Holder() : c1(new C1()), c2(c2_init_helper(*c1)) { } }; Also, std::unique_ptr (if you have a C++11 compiler) or boost::scoped_ptr are both preferable to std::auto_ptr. auto_ptr transfer-of-ownership copy semantics have been found to be nothing but trouble. jqueryajax 4 2 回答 2 This answer is useful 1 我在手机上，所以调试代码有点困难，但我注意到在第 62 行和第 66 行，您只是获取一个元素并将其分配给 p1，而不是获取该元素的文本。尝试在该行的末尾添加 .text() 。 于 2012-06-03T16:14:05.543 回答 This answer is useful 0 我认为符合62 pl1 = $('l'+(inti+1)); 应该 pl1 = $('l'+(inti+1)).text(); 并在线66 pl2 = $('l'+(inti+1)); 应该 pl2 = $('l'+(inti+1)).text(); 于 2012-06-03T17:04:22.360 回答 Related 1 algorithm - 使用连通分量标记算法进行斑点检测 1 memory-management - 为什么memset函数让虚拟内存这么大 6 java - 赋值操作 Java 1 php - 调用未定义的方法 SimpleXMLElement::registerXPathNamespace() 3 jquery - 用于调用方法和对象的 Javascript 注册表 3 javascript - 如何在 XAMPP 测试服务器上存储 html 文件？ 2 c - zfile_stable中的stable是什么意思 - CZMQ 3 c - C中的多重继承 1 security - 在 IE 中查看跨框架脚本中的文本 2 c# - 使用 lock() 的 C# 事件监听器仍然抛出异常 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</c2></c1>

> ID：10871835
> 
> 赞同：2
> 
> 时间：
> 
> 标签：jquery, ajax

I'm putting together a tournament bracket system allowing you to drag 'winners' to the next round, and if applicable the loser is automatically transfered to his place in a losers bracket. After each drop I'm sending to php details about the match for both individual tracking purposes as well as refilling the positions in the event it is shut down and reopened.

I ran into a problem where I was sending some unwanted characters that I used .replace() to rid myself and now everything on the winners side works fine, but anything on the losers side doesn't. Hoping someone can help me figure out the cause of this.

```
15:   $(window).load(function(){
16:     $(".make-draggable, .draggable, .drag").draggable({
17:         helper: "clone",
18:         snap: ".draggable",
19:         snapMode: "inner"
20:     });
21:     $(".draggable").droppable({
22:         drop: function(event, ui) {
23:             var elemText = ui.draggable.text();
24:             $(this).html(elemText);
25:             var outB = ui.draggable.attr('id').split("-");
26:             var pl1;
27:             var pl2;
28:             if (outB[0] == "go") {
29:                 var num = outB.length;
30:                 var loser;
31:                 var loserval;
32:                 var losloc;
33:                 var losid = outB[1];
34:                 var numchars = outB[1].length;
35:                 if (num === 2) {
36:                     var i = 1;
37:                     loser = (losid.charAt(0) + "-");
38:                     pl1 = elemText;
39:                    for (i = 1; i < numchars; i++) {
40:                         loser = (loser+losid.charAt(i));
41:                     }
42:                     loserval = $("#go-" + loser);
43:                     losloc = ("#"+losid);
44:                     $(losloc).html(loserval.text());
45:                     pl2 = loserval.text();
46:                 } else if (num === 3) {
47:                     loser = (outB[1] + outB[2]);
48:                     loserval = $("#go-" + loser);
49:                     losloc = ("#"+loser);
50:                     $(losloc).html(loserval.text());
51:                     pl1 = loserval.text();
52:                     pl2 = elemText;
53:                 }
54:             } else {
55:               var getround = $(this).attr('id');
56:       if(getround == 'winner') {
57:           pl1 = $('#winnerb').text();
58:            pl2 = $('#loserb').text();
59:          } else {
60:            var inti = ui.draggable.attr('id').substring(1);
61:            if (inti%2 == 0) {
62:               var apl =  inti - 1;
63:               pl1 = elemText;
64:              pl2 = $('#l'+apl).text();
65:               alert(apl);
66:            } else {
67:               var apl =  inti++;
68:               alert(apl);
69:              pl1 = $('#l'+apl).text();
70:              pl2 = elemText;
71:            }
72:          }
73:             }
74:             var matrou = ui.draggable.parent().attr("id").split("-");
75:             $.urlParam = function(name){
76:                 var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
77:             return results[1] || 0;
78:             }
79:             pl1 = pl1.replace(/(\r\n|\n|\r)/gm,"");
80:             pl2 = pl2.replace(/(\r\n|\n|\r)/gm,"");
81:             elemText = elemText.replace(/(\r\n|\n|\r)/gm,"");
82:             var params = 'win='+elemText+'&p1='+pl1+'&p2='+pl2+'&match='+matrou[3]+'&round='+matrou[1]+'&wloc='+$(this).parent().attr('id')+'-'+$(this).attr('id')+'&lloc='+$(losloc).parent().attr('id')+'-'+$(loserval).attr('id')+'&tid='+$.urlParam('tid');
83:             xmlhttp=new XMLHttpRequest();
84:             xmlhttp.onreadystatechange=function() {
85:                 if (xmlhttp.readyState==4 && xmlhttp.status==200) {
86:                 }
87:             }
88:             xmlhttp.open("POST","sub_match.php",true);
89:             xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
90:             xmlhttp.setRequestHeader("Content-length", params.length);
91:             xmlhttp.setRequestHeader("Connection", "close");
92:             xmlhttp.send(params);            
93:         }
94:     });
95:   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:14:05.543

我在手机上，所以调试代码有点困难，但我注意到在第 62 行和第 66 行，您只是获取一个元素并将其分配给 p1，而不是获取该元素的文本。尝试在该行的末尾添加 .text() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T17:04:22.360

我认为符合`62`

```
 pl1 = $('l'+(inti+1)); 
```

应该

```
 pl1 = $('l'+(inti+1)).text(); 
```

并在线`66`

```
pl2 = $('l'+(inti+1)); 
```

应该

```
pl2 = $('l'+(inti+1)).text(); 
```

# windows-8 - Metro (XAML/C#)：检测安装和/或首次运行

> ID：10871837
> 
> 赞同：7
> 
> 时间：2012-06-03T16:05:31.670
> 
> 标签：windows-8, windows-runtime, microsoft-metro, winrt-xaml

在 XAML/C# 中创建 Metro 应用程序时，如何检测应用程序的首次安装时间或自安装（或可能升级）以来首次运行的时间？我需要利用这个机会来确保我的数据库架构是正确的，并且可能会同步一些基础数据。

我曾希望我可以从`LaunchActivatedEventArgs`方法中获取`OnLaunched`它，但似乎没有我可以使用的`Kind`有效值`PreviousExecutionState`。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-03T16:59:27.083

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings.aspx#Y0](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings.aspx#Y0)

当您的应用程序启动时，将名为“AppHasBeenStarted”的设置写入 LocalSettings。如果尚未编写设置，则您知道您的应用程序之前尚未启动。您可以通过将其设为“AppVersion”并编写应用程序的版本来改进这一点。这样，您的应用程序可以通过将存储的版本与其自己的版本进行比较来检测升级。

# iphone - iphone - 以编程方式确定 Storyboard 上的哪个 UIViewController 调用了我的课程？

> ID：10871839
> 
> 赞同：0
> 
> 时间：2012-06-03T16:05:37.683
> 
> 标签：iphone, objective-c

在我的故事板中，我有两个 UIViewControllers 都使用类 CustomViewController。

从 CustomViewController.m 的 viewDidLoad 函数中，我如何确定我的故事板中的哪个 UIViewController 正在调用这个类？例如：

```
- (void)viewDidLoad
{
if(CALLED_FROM_VC1_IN_STORYBOARD)
{
// load from data feed 1
}
else
{
// load from data feed 2
}
} 
```

我应该用什么代替`CALLED_FROM_VC1_IN_STORYBOARD`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:39:23.540

您需要使用`prepareForSegue:sender`第一个 VC 上的方法将数据传递给第二个 VC 上的属性。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    segue.destinationViewController.originatingVC = segue.sourceViewController;
} 
```

尽管您可能不想将整个 VC 保存在内存中，但可能会将其重构为仅裸数据。即使您必须传递所有财产！

viewDidLoad 通常在 prepareForSegue 之后调用，但要注意 UIPopovers 是一个例外。

# android - Android Levelable Semitransparent ImageButton 具有调平透明度

> ID：10871842
> 
> 赞同：3
> 
> 时间：2012-06-03T16:06:11.700
> 
> 标签：android, android-gui

我需要创建一个半透明的 ImageButton，但我还没有找到有效的方法来做到这一点。

如何设置具有可设置透明度级别的半透明外观和感觉？

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:27:03.397

您可以使用此代码调整按钮透明度级别。`mybutton.getBackground().setAlpha(45);`

此处的数字 45 值范围为 0 - 255

如果您使用的是 .ninePatch.png 文件，您显然可以通过图像编辑软件降低按钮的不透明度，并将其保存并在您的 xml 中使用。

提示：半透明按钮表示按钮已禁用。根据android设计指南。所以明智地使用它。

您可以通过以下方式设置禁用按钮`myButton.setEnabled(false);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T07:07:09.037

您还可以在哈希码之前添加 55 或 99 以使按钮半透明

```
<Button
    android:id="@+id/button1"
    android:layout_width="200dp"
    android:layout_height="60dp"
    android:text="select"
    android:background="#99FFFC00"
  /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-23T09:08:40.433

如果您的原始图像不透明，则您的 imagebutton 图像将不透明，使用 Photoshop 创建透明图像：

[http://digitalartanddesign.org/45_transparent_png_Dw.htm](http://digitalartanddesign.org/45_transparent_png_Dw.htm)

*   在 Marshmallow (6.0) 上测试正确

# c - 确定嵌入式 C 程序的总内存使用量

> ID：10871845
> 
> 赞同：4
> 
> 时间：2012-06-03T16:06:16.403
> 
> 标签：c, memory, embedded

我希望能够在 256 KB 内存的有限资源环境中调试 C 程序使用了多少总内存（目前我正在仿真程序中进行测试）。

我有能力将调试语句打印到屏幕上，但是我应该使用什么方法来计算我的 C 程序正在使用多少（包括全局变量、局部变量 [从我的主函数循环的角度来看]、程序代码本身等。 )?

第二个方面是显示特定变量的位置/范围，而不仅仅是它们的大小。

-Edit- CPU 是 Hitachi SH2，我没有可以让我在程序中设置断点的 IDE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T16:24:46.410

使用 IDE 选项进行适当的操作（可能标记一个 checkobx），以便构建过程（即链接器）将生成一个映射文件。嵌入式系统的映射文件通常会以详细的方式为您提供所需的信息：内存段、它们的大小、每个内存段使用了多少内存、程序内存、数据内存等。通常有很多地图文件提供的数据，您可能需要编写脚本来准确计算您需要的数据，或将其复制到 Excel。地图文件还可能包含您的摘要信息。

堆栈有点棘手。如果地图文件给出了这个，那么你就有了。如果没有，您需要自己查找。嵌入式编译器通常允许您定义堆栈位置和大小。在程序的开头放置一个断点。当应用程序在那里停止时，整个堆栈为零。恢复应用程序并让它工作一段时间。最后停止它并检查堆栈内存。您将看到非零值而不是零。使用的堆栈一直持续到零部分再次开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:21:28.557

通常，您将在 mmap 生成的文件中有不同的部分，数据所在的位置，例如：
.intvect

.intvect_end
.rozdata
.robase
.rosdata
.rodata
.text ....等等！！！

每个部分都有其他属性，如 Base、Size(hex)、Size(dec) 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:21:02.480

虽然在任何时候局部变量可能会占用更多或更少的空间（当它们进入和离开范围时），但它们会在堆栈上实例化。在单线程环境中，堆栈将是链接时已知的固定分配。所有静态分配的数据也是如此。唯一的运行时可变部分 id 动态分配数据，但即便如此，sich 数据也是从堆中分配的，这在大多数裸机、单线程环境中是固定的链接时分配。

因此，您需要的有关内存分配的所有信息可能已经由您的链接器提供。通常（取决于您使用的工具链和链接器参数）在链接器运行时会输出基本信息。您通常可以请求生成完整的链接器映射文件，这将为您提供详细信息。一些链接器可以执行堆栈使用分析，这将为您提供任何特定函数的最坏情况下的堆栈使用情况。在单线程环境中，来自 main() 的堆栈使用将给出最坏情况下的整体使用情况（尽管需要考虑中断处理程序，链接器不是线程或中断感知的，并且某些体系结构具有单独的中断堆栈，有些是共享的）。

尽管堆本身通常是固定分配的（通常是链接器对堆栈和静态数据进行静态分配后的所有可用内存），但如果您使用动态内存分配，则在运行时了解多少内存可能很有用已从堆中分配，以及有关分配数量、分配的平均大小以及空闲块的数量及其大小的信息。因为动态内存分配是由系统的标准库实现的，所以任何此类分析工具都将特定于您的库，并且可能根本不提供。如果您有库源，您可以自己实现这些设施。

在多线程环境中，线程堆栈可以静态分配或从堆中分配，但无论哪种方式都适用上述相同的分析方法。对于堆栈使用分析，每个线程的最坏情况是从每个线程的入口点而不是从 main() 测量的。

# c# - aspnet 会员提供程序中的问题

> ID：10871847
> 
> 赞同：0
> 
> 时间：2012-06-03T16:06:33.557
> 
> 标签：c#, asp.net

我正在使用 asp.net 会员

我通过编写此代码注销应用程序

```
if (Membership.GetUser(HttpContext.Current.User.Identity).IsOnline) ;
{
    FormsAuthentication.SignOut();

    Response.Redirect(FormsAuthentication.LoginUrl);
}
Response.Redirect("loginpage.aspx"); 
```

之后，我启动了应用程序并获取了验证代码块中的错误。下面我正在编写代码和错误消息

```
else if (User.Identity.IsAuthenticated == true && Membership.GetUser( Membership.FindUsersByName(User.Identity.Name)).IsOnline==true)
{
    FormsAuthentication.SignOut();
    FormsAuthentication.RedirectToLoginPage();
    MembershipUser currUser = null;

    string gt = null;
    if (HttpContext.Current.User != null)
    {
        currUser = Membership.GetUser(true);
        gt = currUser.Email;
    }

    /// string temp = User.Identity.GetProfile().ID;
    //string query = "Insert into user_tbl(MemberID)(" + temp + ")";
    //Response.Redirect("UserPanel.aspx");
    //return;
} 
```

在这里`Membership.FindUsersByName(User.Identity.Name)).IsOnline==true)` 我收到了这个错误

> [ArgumentException：提供的提供者用户密钥无效。它必须是 System.Guid 类型。参数名称：providerUserKey]

我找不到要做什么，我调试应用程序并找到 User.Identity.Name 作为`hash value`

```
Stack Trace 
Exception Details: System.ArgumentException: The provider user key supplied is invalid.  It must be of type System.Guid.
Parameter name: providerUserKey

Source Error: 

Line 86:             }
Line 87: 
Line 88:             else if (User.Identity.IsAuthenticated == true && Membership.GetUser( Membership.FindUsersByName(User.Identity.Name)).IsOnline==true)
Line 89:             {
Line 90:                 

Source File: d:\31 May 2012\Demo\LoginPage.aspx.cs    Line: 88 

Stack Trace: 

[ArgumentException: The provider user key supplied is invalid.  It must be of type System.Guid.
Parameter name: providerUserKey]
   System.Web.Security.SqlMembershipProvider.GetUser(Object providerUserKey, Boolean userIsOnline) +2242996
   System.Web.Security.Membership.GetUser(Object providerUserKey, Boolean userIsOnline) +40
   System.Web.Security.Membership.GetUser(Object providerUserKey) +6
   LoginPage.Page_Load(Object sender, EventArgs e) in d:\31 May 2012\Demo\LoginPage.aspx.cs:88
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +15
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +36
   System.Web.UI.Control.OnLoad(EventArgs e) +92
   System.Web.UI.Control.LoadRecursive() +54
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +772 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:09:25.353

或者您也可以使用 Request.IsAuthenticated 来获取整个用户对象并仅检查身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:48:15.013

根据 Visual Studio，Membership.FindUsersByName 返回 MembershipUserCollection。您将该对象传递给 Membership.GetUser 方法，该方法接受对象类型的参数，但该对象应该是用户的 ID（ASP.NET 中的 GUID）。因此，异常是意料之中的：您试图传递一组用户，而该方法需要一个用户 ID。

如果您需要检查用户当前是否登录，您可以简单地执行以下操作：

```
if (Membership.GetUser() != null) 
```

有关该方法的更多信息，请参阅[此](http://msdn.microsoft.com/en-us/library/fcxcb339.aspx)MSDN 库文章。

# apache - mod_rewrite 在字符串“asdf”处失败，所有其他测试的字符串都可以工作 - 为什么？

> ID：10871848
> 
> 赞同：1
> 
> 时间：2012-06-03T16:06:43.557
> 
> 标签：apache, .htaccess, mod-rewrite

## .htaccess

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)$ index.php?u=$1 [L] 
```

网址`localhost/some_text`被重写为`localhost/index.php?u=some_text`. 在尝试许多不同的字符串时，我偶然发现“asdf”，意思是`localhost/asdf` **重定向**到默认的 apache 页面（我使用的是 XAMPP，所以是 xampp 主文件夹）。

有人知道为什么吗？里面有什么问题`.htaccess`吗？还是您也会认为这是一种奇怪的行为？

PS：此文件夹中或任何地方都没有命名目录`asdf`，也没有任何文件或扩展名`asdf`...

# c++ - 我的 SFINAE 检查 std::map/std::vector 有什么问题？

> ID：10871850
> 
> 赞同：4
> 
> 时间：2012-06-03T16:06:46.160
> 
> 标签：c++, sfinae, c++-standard-library

我有一个简单的 SFINAE 场景来区分标准容器，例如`std::map`：

```
 template <typename Container> struct HasKeyType : sfinae_test { // (C)
   template <typename U> static Yes test(typename Container::key_type*); // (A)
   template <typename U> static No test(...);
   enum {value = (sizeof(test(null)) == sizeof(Yes))}; // (B)
 }; 
```

和

```
 struct sfinae_test {
   typedef char Yes;
   typedef long No;
   static void* const null;
 }; 
```

当我用 实例化它时`HasKeyType<std::vector<int> >::value`，我得到

```
(A) error: no type named ‘key_type’ in ‘class std::vector<int>’
(B) error: invalid use of incomplete type ‘struct HasKeyType<std::vector<int> >’
(C) error: declaration of ‘struct HasKeyType<std::vector<int> >’ 
```

我完全被难住了。为什么`HasKeyType`不完整，为什么 SFINAE 不起作用？

如果我实例化实际上*有*一个键类型（）`(B)`，我也会得到类似的错误。`(C)``HasKeyType<std::map<int,float> >`*`int`*

 *g++ 版本：4.5.2（是的，我知道它很旧）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T16:12:27.510

您没有`U`在`test`方法中使用模板：

```
template <typename Container> struct HasKeyType : sfinae_test { // C
  template <typename U> static Yes test(typename U::key_type* ); // A
  template <typename U> static No test(U*);
  enum {value = (sizeof(test<Container>(0)) == sizeof(Yes))}; // B
}; 
```

请注意，我更改了`test(null)`for a `test<Container>(0)`。如果您的编译器支持它（好吧，gcc 4.5 不...），您可以使用`nullptr`而不是`0`.*

# tcl - Tcl - 匹配 glob 模式中的右括号

> ID：10871855
> 
> 赞同：2
> 
> 时间：2012-06-03T16:07:25.937
> 
> 标签：tcl, glob

我将如何获得对`switch`右括号进行数学运算的语句？我都试过`"[][]"`了`"[[\]]"`

```
set x "]"

switch -glob $x {
    "[[\]]" {
        puts "MATCH ]"
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T16:23:35.883

您可以使用：

```
set x "]";
switch -glob $x {
    \] {
        puts "MATCH ]"
    }
} 
```

或匹配多于括号：

```
set x "foo]bar";
switch -glob $x {
    *\]* {
        puts "MATCH ]"
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T07:30:37.657

当您想`]`作为 中的一组字符的一部分进行匹配时`switch`，您只有几个选项：

1.  使用`-regexp`匹配而不是`-glob`. 它更复杂，需要不同的模式，但它也绝对更灵活（尤其是当涉及到这样的事情时）。

    ```
    switch -regexp $x {
        ^[][(){}]$ {
            puts "Matched!"
        }
    } 
    ```

2.  在正文共享中使用多个子句：

    ```
    switch -glob $x {
        {\[} - {\]} - [(){}] {
            puts "Matched!"
        }
    } 
    ```

您*不能*做的是将 a`]`放入 glob 匹配集中，除了作为范围的非初始部分（glob 匹配器非常愚蠢，但速度很快）。没有任何合适的范围可以与您在此处所追求的完全匹配，因此单个 glob 将不起作用。

# objective-c - NSUserDefaultsDidChangeNotification：密钥的名称是什么，已更改？

> ID：10871860
> 
> 赞同：9
> 
> 时间：2012-06-03T16:08:18.697
> 
> 标签：objective-c, ios, xcode, nsuserdefaults, nsnotificationcenter

当 UserDefaults 中的某些值发生更改时，此代码将调用方法“defaultsChanged”

```
NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
[center addObserver:self
           selector:@selector(defaultsChanged:)  
               name:NSUserDefaultsDidChangeNotification
             object:nil]; 
```

这段代码会给我改变的价值

```
- (void)defaultsChanged:(NSNotification *)notification {
    // Get the user defaults
    NSUserDefaults *defaults = (NSUserDefaults *)[notification object];

    // Do something with it
    NSLog(@"%@", [defaults objectForKey:@"nameOfThingIAmInterestedIn"]);
} 
```

但我怎样才能得到钥匙的名字，改变了？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-08T13:54:45.033

正如其他人所说，没有办法从 NSUserDefaultsDidChange 通知中获取有关更改密钥的信息。但是没有必要复制任何内容并自己检查，因为如果您需要*特别*通知*某个属性，还有***键值观察（KVO）**也可以与 NSUserDefaults 一起使用：

 **首先，注册 KVO 而不是使用 NotificationCenter：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults addObserver:self
           forKeyPath:@"nameOfThingIAmInterestedIn"
              options:NSKeyValueObservingOptionNew
              context:NULL]; 
```

不要忘记删除观察（例如在 viewDidUnload 或 dealloc 中）

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults removeObserver:self forKeyPath:@"nameOfThingIAmInterestedIn"]; 
```

最后实现这个方法来接收KVO通知

```
-(void)observeValueForKeyPath:(NSString *)keyPath 
                 ofObject:(id)object
                   change:(NSDictionary *)change
                  context:(void *)context 
{
    NSLog(@"KVO: %@ changed property %@ to value %@", object, keyPath, change);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T16:11:41.993

通知的字典中没有提供数据`userInfo`，所以看起来你很不走运，除非你想保留另一个存储在`NSUserDefaults`其他地方的数据副本并在两个字典上执行差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T05:31:22.653

使用自定义通知来确定到底发生了什么，例如：

```
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:self.event, @"eventObject", nil];
[[NSNotificationCenter defaultCenter] postNotificationName:@"newEventCreated" object:nil userInfo:options]; 
```

如果它不是 userDefaults 的选项，那么只需在每次收到`NSUserDefaultsDidChangeNotification`通知时阅读所有用户默认值并将其与以前的进行比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T19:05:53.433

只需添加`[[NSNotificationCenter defaultCenter] removeObserver:self name:NSUserDefaultsDidChangeNotification object:nil];`

到你的`appDidBecomeActive`方法，然后添加

[`[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(settingsChangedListener) name:NSUserDefaultsDidChangeNotification object:nil];`

给你的`applicationDidEnterBackground`

然后在前台使用 KVO 观察者，如上所示

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-11-30T10:08:47.110

您可以使用`dictionaryRepresentation`获取`NSUserDefaults`as的完整副本`NSDictionary`。然后是比较先前值和新值的问题。

`NSUserDefaults`不兼容 KVO，它可能会触发一些 KVO 通知的事实不应该被依赖，并且显然是一个变化的主题。

例如：

```
- (void)setupUserDefaults {
    self.userDefaults = [NSUserDefaults standardUserDefaults];
    [self.userDefaults registerDefaults:@{ /* ... */ }];

    self.userDefaultsDictionaryRepresentation = [self.userDefaults dictionaryRepresentation];

    [notificationCenter addObserver:self 
                           selector:@selector(userDefaultsDidChange:) 
                               name:NSUserDefaultsDidChangeNotification 
                             object:self.userDefaults];
}

- (void)userDefaultsDidChange:(NSNotification *)note {
    NSDictionary *oldValues = self.userDefaultsDictionaryRepresentation;
    NSDictionary *newValues = [self.userDefaults dictionaryRepresentation];

    NSArray *allKeys = @[ /* list keys that you use */ ];

    for(NSString *key in allKeys) {
        id oldValue = oldValues[key];
        id newValue = newValues[key];

        if(![oldValue isEqual:newValue]) {
            [self notifyObserversForKeyChange:key oldValue:oldValue newValue:newValue];
        }
    }

    self.userDefaultsDictionaryRepresentation = newValues;
} 
```**

# ruby-on-rails - 如何绘制矩形并将其保存到 Rails 应用程序中？

> ID：10871861
> 
> 赞同：0
> 
> 时间：2012-06-03T16:08:24.953
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, html5-canvas

我正在尝试构建一个允许用户在地图背景上设置预定义区域的应用程序。我希望他们能够在地图顶部绘制区域然后点击保存，而不是指定 X、Y 坐标。然后我想将这些形状记录到数据库中，以便稍后再次呈现它们。

我一直在看这样的教程：

[http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)

我将如何开始创建这种功能？我应该去哪里看？我知道这是一个很大的问题，也许有点过于宽泛，但要考虑的选项列表将是一个惊人的答案。

如果有人对我可以从哪里开始有任何提示，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:15:48.930

这是 javascript 的工作。Ruby 和 HTML 不能单独做到这一点。基本上在您的javascript代码中，您将不得不监听一些触发您的保存操作的事件（用户调整图像大小或将其拖走），然后收集您要保存的数据（我猜是图像位置和大小）然后发送这通过 AJAX 请求发送到后端。然后你可以将它存储在数据库中。

# iphone - dispatch_async 会等到上一行完成后再继续吗？

> ID：10871866
> 
> 赞同：0
> 
> 时间：2012-06-03T16:10:18.203
> 
> 标签：iphone, objective-c, ios, grand-central-dispatch

```
dispatch_queue_t queue = dispatch_queue_create("setup_cell", NULL);

dispatch_async(queue, ^{
    //Line 1
    //Line 2
}); 
```

这会等到第 1 行完成，然后再调用第 2 行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:14:16.420

是的（在大多数情况下）。与 C 一样，Objective-C 是一种自顶向下的语言，这意味着通常发生在另一个代码块之上的块代码将在它之前执行。

唯一不会发生这种情况的真正方法是通过编译器优化，但我不会担心，因为编译器通常足够聪明，即使通过它们所做的所有优化，也可以保持代码自上而下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:39:31.817

是和否。

是：如果第 1 行和第 2 行只是直接的顺序代码。

否：如果第 1 行或第 2 行是任何并发队列。例如：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
//
}); 
```

# java - 编译时 user.agent 值与运行时 user.agent 值不匹配

> ID：10871874
> 
> 赞同：3
> 
> 时间：2012-06-03T16:11:44.157
> 
> 标签：java, eclipse, gwt, compilation

我曾经在 Mozilla 中运行过一个应用程序，但我决定使用 Chrome。我在 Eclipse 中借助菜单选项和 Eclipse 中的正确入口点模块编译项目时选择了`BlahBlahBlahSafari.gwt.xml`（包含）。项目编译的时候一生成js，我以为不会有什么问题。但我收到了这条信息：`<set-property name="user.agent" value="safari" />``Google/GWT Compile`

```
ERROR: Possible problem with your *.gwt.xml module file.
The compile time user.agent value (gecko1_8) does not match the runtime user.agent value (safari). Expect more errors. 
```

Eclipse 菜单中的参数`Run Configurations...`似乎没问题。这种行为的原因是什么，我没有考虑到什么？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T16:26:36.597

GWT 提供了为一组浏览器编译 javascript 的选项。此配置在您的模块 XML 文件中完成`BlahBlahBlahSafari.gwt.xml`。它是使用以下方法完成的：

```
<set-property name="user.agent" value="ie6,gecko,gecko1_8" /> 
```

这适用于 IE 和 Firefox。要仅为 Chrome 编译 javascript，请使用：

```
<set-property name="user.agent" value="safari" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T06:55:56.880

最有可能的解决方案是您的更改`BlahBlahBlahSafari.gwt.xml`不会被拾取。您说您在 Chrome 中设置`user.agent`并`safari`加载已编译的应用程序。这是一个完美的匹配。消息“编译时 user.agent 值 (gecko1_8) ...”告诉您，您正在加载的应用程序实际上不是为 Chrome 编译的，而是为 gecko1_8 编译的。

确保您要编译到的文件夹实际上是您认为要编译到的文件夹。确保您确实在浏览器中打开了新编译的文件，而不是旧应用程序的旧副本。确保应用程序加载器 ( `*.nocache.js`) 确实没有被缓存。如果您使用超级开发模式，请确保代码服务器不运行旧版本的应用程序（重新启动代码服务器或让代码服务器重新编译模块）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-19T17:07:03.417

还要检查任何导入的 GWT 模块的 user.agent 声明

# jquery - 将后缀附加到 $.each 循环内的数组变量名称

> ID：10871875
> 
> 赞同：0
> 
> 时间：2012-06-03T16:11:56.893
> 
> 标签：jquery, arrays, each

这是我的简单标记：

```
<select id="firstSelect">
 <option value="1">one</option>
 <option value="2">two</option>
 <option value="3">three</option>
</select>
<select id="secondSelect"></select> 
```

在我的 js 中，有三个具有渐进名称的不同数组，如下所示：

```
var arrayColours1 = new Array('yellow', 'blue');
var arrayColours2 = new Array('red', 'grey');
var arrayColours3 = new Array('white', 'black'); 
```

现在我想根据第一个选择的选定选项，用数组中的一个值填充第二个选择，这样：

```
$('#firstSelect').change(function(){
var selectedValue = $(this).children('option:selected').val();
var elem = 'arrayColours'+ selectedValue;
$.each(elem, function (index, value) {
        $('<option/>').val(value).html(value).appendTo('#secondSelect');
    });
}); 
```

但这不起作用，因为`elem`现在当然是一个字符串。如何解决这个问题，将“arrayColours”与后缀连接起来，并使其成为调用数组名称的变量？非常感谢您的关注，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:16:20.510

如果您的变量传递到数组中会更好。

```
var arrayColours = [
  ['yellow', 'blue'],
  ['red', 'grey'],
  ['white', 'black']
];

$('#firstSelect').change(function(){
 var selected = this.value;
 $.each(arrayColours[selected-1], function(index, value) {
    $('<option/>').val(value).html(value).appendTo('#secondSelect');
 });
}); 
```

或者，您也可以使用如下对象：

```
var arrayColours = {
  one: ['yellow', 'blue'],
  two: ['red', 'grey'],
  three: ['white', 'black']
}; 
```

进而

```
 $('#firstSelect').change(function(){
     var selected = $('option:selected', this).text();
     $.each(arrayColours.selected, function(index, value) {
        $('<option/>').val(value).html(value).appendTo('#secondSelect');
     });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:18:28.153

这比你想象的要容易。

```
var colourArray = {
   set1: ["yellow", "blue"],
   set2: ["red", "gray"],
   set3: ["white", "black"]
}; 
```

当您需要一组具体的颜色时，只需执行以下操作：

```
clourArray["set" + selectedValue] 
```

关联数组是您的必经之路！

# android - 查明设备是否有软键

> ID：10871878
> 
> 赞同：2
> 
> 时间：2012-06-03T16:12:08.267
> 
> 标签：android, user-interface, android-4.0-ice-cream-sandwich, softkeys

在最新版本的 Android 中，设备可能具有软件或硬件按钮。我想知道运行我的应用程序的设备是哪种情况。

一些背景信息：可以在屏幕上显示软键时隐藏它们，但如果您这样做，如果用户触摸显示屏，它们会自动显示出来，这很好。现在，如果您在具有硬件键的设备上执行相同操作，则第一次触摸仍会被系统捕获，就像它会再次显示软键一样，但由于没有，因此什么也不会发生，并且触摸事件不会传递给应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T18:35:07.603

您可以使用[`ViewConfiguration.hasPermanentMenuKey()`](http://developer.android.com/reference/android/view/ViewConfiguration.html#hasPermanentMenuKey%28%29), 检查菜单键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:25:08.437

对于键盘问题尝试

```
getResources().getConfiguration().keyboard 
```

这为您提供以下之一：

*   KEYBOARD_NOKEYS
*   KEYBOARD_QWERTY
*   KEYBOARD_12KEY

检查 KEYBOARD_NOKEYS。

# c++ - 如何从字节数组中读取 8 位位图的像素颜色和位置

> ID：10871879
> 
> 赞同：0
> 
> 时间：2012-06-03T16:12:12.243
> 
> 标签：c++, colors, position, byte, pixel

我目前将 8 位位图的像素数据存储在一个字节数组中：`BYTE* pixelData`.

现在我将如何编写自己的函数以通过其位置返回像素的颜色？我已经进行了大量搜索，但没有找到任何使用 C++ 涵盖此内容的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:17:21.420

```
BYTE GetPixelColor(BYTE* src, int x, int y, int srcWidth)
{
    return src[y * srcWidth + x];
}

...
//suppose you have a 800 x 600 bmp, to get the color for pixel at x 30, y 200
BYTE color = GetPixelColor(src, 30, 200, 800); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:21:29.953

你不能，没有足够的数据。几乎所有 8bpp 像素格式都是索引格式。他们使用存储实际 RGB 颜色的颜色表，像素位置的字节是该表的索引。该表包含 256 个条目。

您还需要一个指向颜色表的指针。

# asp.net - IIS7 - 请求过滤模块配置为拒绝超过请求内容长度的请求

> ID：10871881
> 
> 赞同：63
> 
> 时间：2012-06-03T16:12:45.503
> 
> 标签：asp.net, asp.net-mvc-3, iis, iis-7

我想上传图片，它在我的机器上运行良好，但是当我将我的网站放在 IIS7 服务器上公开时，我无法上传任何东西。

## 错误

> 请求过滤模块，用于拒绝超过请求内容长度的请求。

## 最可能的原因

> Web 服务器上配置了请求过滤，以拒绝请求，因为内容长度超过了配置的值。

## 你可以尝试的事情

> 验证 applicationhost.config 或 web.config 文件中的 configuration/system.webServer/security/requestFiltering/requestLimits@maxAllowedContentLength 设置。

## Web.config 中的 system.webServer

```
 <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <security>
      <requestFiltering>
         <requestLimits maxAllowedContentLength="1048576" />
      </requestFiltering>
   </security>
  </system.webServer> 
```

如您所见，我将 maxAllowedContentLength 设置为 1gb。重新启动我的网站，仍然收到此错误。我`/uploads/`在我的文件系统上创建了一个文件夹，它应该也是。不知道是什么导致了这个错误以及为什么我不能上传图片。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-03T16:41:42.187

```
<configuration>
    <system.web>
        <httpRuntime maxRequestLength="1048576" />
    </system.web>
</configuration> 
```

从[这里](https://stackoverflow.com/questions/3853767/maximum-request-length-exceeded)。

对于 IIS7 及更高版本，您还需要添加以下行：

```
 <system.webServer>
   <security>
      <requestFiltering>
         <requestLimits maxAllowedContentLength="1073741824" />
      </requestFiltering>
   </security>
 </system.webServer> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-12T18:14:49.153

*以下示例 Web.config 文件将配置 IIS 以拒绝对“Content-type”标头长度大于 100 字节的 HTTP 请求的访问。*

```
 <configuration>
   <system.webServer>
      <security>
         <requestFiltering>
            <requestLimits>
               <headerLimits>
                  <add header="Content-type" sizeLimit="100" />
               </headerLimits>
            </requestLimits>
         </requestFiltering>
      </security>
   </system.webServer>
</configuration> 
```

来源：[http ://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits](http://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-07T21:07:21.113

我有类似的问题，我通过更改位于“C:\Windows\System32\inetsrv\config”目录中的 applicationhost.config 文件的 requestlimits maxAllowedContentLength ="40000000" 部分来解决

查找安全部分并添加部分组。

```
<sectionGroup name="requestfiltering">
    <section name="requestlimits" maxAllowedContentLength ="40000000" />
</sectionGroup> 
```

***注意**删除；

```
<section name="requestfiltering" overrideModeDefault="Deny" /> 
```

# jersey - Tomcat 7 OpenEJB 和 Jersey

> ID：10871884
> 
> 赞同：1
> 
> 时间：2012-06-03T16:13:06.143
> 
> 标签：jersey, tomcat7, openejb

我正在尝试让 Tomcat 7（带有 OpenEJB）与 Jersey 1.9 一起使用。我让我的 Jersey RestFUL 服务与 Tomcat 6 一起工作。但是，一旦我将 war 文件部署到 Tomcat 7（OpenEJB），我就会收到以下错误。

我在 Eclipse 中创建了一个新的动态 Web 项目，并将以下 jars 添加到 WEB-INF/lib 文件夹中，而没有添加任何额外的代码，但我仍然遇到同样的错误。Tomcat 7 的 OpenEJB 似乎不喜欢 Jersey jars。

*   asm-3.1.jar
*   jersey-core-1.9-ea04.jar
*   jersey-server-1.9-ea04.jar

原因：org.apache.openejb.OpenEJBException：**无法实例化应用程序类：com.sun.jersey.api.core.ResourceConfig：在** org.apache.openejb.config.AnnotationDeployer$ProcessAnnotatedBeans.deploy 处为空（AnnotationDeployer.java:1685 ) 在 org.apache.openejb.config.AnnotationDeployer.deploy(AnnotationDeployer.java:293) 在 org.apache.openejb.config 的 org.apache.openejb.config.AnnotationDeployer$ProcessAnnotatedBeans.deploy(AnnotationDeployer.java:1482)。 ConfigurationFactory$Chain.deploy(ConfigurationFactory.java:263) 在 org.apache.openejb.config.ConfigurationFactory.configureApplication(ConfigurationFactory.java:693) 在 org.apache.tomee.catalina.TomcatWebAppBuilder.startInternal(TomcatWebAppBuilder.java:588) ... 23 更多

原因：java.lang.reflect.Constructor.newInstance(Constructor.java:513) 处的 sun.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:30) 处的 java.lang.InstantiationException (Class) .java:355) 在 java.lang.Class.newInstance(Class.java:308) 在 org.apache.openejb.config.AnnotationDeployer$ProcessAnnotatedBeans.deploy(AnnotationDeployer.java:1682)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T22:52:33.087

Check out [Apache TomEE Plus](http://openejb.apache.org/apache-tomee.html) it is Tomcat with JAX-RS already integrated. You can skip the part where you hunt down libraries and try to get them integrated and move on to the writing code part.

Here's a video on how to set it up in [Eclipse using the Tomcat web adpater](http://www.youtube.com/watch?v=Lr8pxEACVRI) and a simple Dynamic Web Project.

On the note of using EJBs as RESTful services, there are plenty of people that do that especially when JPA is involved. Aside from getting transactions for free, you also don't need a JAX-RS `Application` subclass or to map any REST servlets. A small perk, but nice.

As well you can expose the same class as a `@Remote` object and invoke it over RMI, as an JAX-WS `@WebService` and invoke it over HTTP/SOAP, or just annotate it `@LocalBean` and you can use the same object internally without the HTTP overhead. Nice to have the flexibility.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:18:47.757

这个堆栈跟踪让我想知道 ResourceConfig 是否有一个无参数的默认构造函数。如果 OpenEJB 部署预期并没有找到它，您会看到这一点。

既然 REST 是用于 Web 服务的 HTTP API，那么为什么要将它与 OpenEJB 一起使用呢？我猜这两者将是相互排斥的。我会使用会话 EJB 或 REST 服务编写服务，但不能同时使用两者。

# vbscript - VBScript 中的布尔非运算符

> ID：10871895
> 
> 赞同：11
> 
> 时间：2012-06-03T16:14:22.000
> 
> 标签：vbscript, boolean, bit-manipulation

考虑以下两个涉及 VBScript 中按位比较的条件：

```
If     1 And 3  Then WScript.Echo "yes" Else WScript.Echo "no"
If Not(1 And 3) Then WScript.Echo "yes" Else WScript.Echo "no" 
```

我认为输出应该是：

```
yes
no 
```

但实际输出是：

```
yes
yes 
```

等一下，[运算`Not`符应该对*表达式执行逻辑否定*](http://msdn.microsoft.com/en-us/library/9cy86sfb(v=vs.84).aspx)。据我所知， `true`is的逻辑否定。`false`我必须断定它没有兑现承诺吗？这里发生了什么、为什么以及发生了什么？如果有的话，理由是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-03T20:16:38.083

如果两个操作数都是布尔值（True、False） ，则[VBScript AND 运算符](http://msdn.microsoft.com/en-us/library/e8zy95hw(v=vs.84))执行*逻辑*AND 运算——有点像 C（风格）语言[`&&`](http://tigcc.ticalc.org/doc/opers.html#logbit)运算符。

如果两个操作数都是数字，它将改为执行*按位*与运算——有点像 C 语言[`&`](http://tigcc.ticalc.org/doc/opers.html#logbit)运算符。

如果操作数是混合类型，则布尔值被强制转换为数字 - False = 0，True = -1（惊喜！），然后是按位与运算。

因此，您的示例评估如下：

```
'   1 And 3
' = &h0001 And &h0003 <- bitwise AND
' = 1
If 1 Then WScript.Echo "yes" Else WScript.Echo "no" ' Yes

'   Not(1 And 3)
' = Not(1) <- see above
' = Not(&h0001) <- bitwise NOT
' = &hFFFE
If -2 Then WScript.Echo "yes" Else WScript.Echo "no" ' Yes 
```

如果您想知道[VBScript NOT 运算符](http://msdn.microsoft.com/en-us/library/9cy86sfb(v=vs.84))是如何工作的，它会像 C 语言运算符一样对布尔操作数执行逻辑否定，对像 C 语言[`!`](http://tigcc.ticalc.org/doc/opers.html#logneg)运算符这样的数字操作数执行按位补码[`~`](http://tigcc.ticalc.org/doc/opers.html#complement)。

如果您想对操作数强制进行逻辑运算，请使用[VBScript CBool​​ 函数](http://msdn.microsoft.com/en-us/library/2k9sfx3c(v=vs.84))来强制转换操作数：

```
If Not(CBool(1) And CBool(3)) Then WScript.Echo "yes" Else WScript.Echo "no" ' no 
```

注意：与大多数 VBScript 运算符一样，`Null`操作数会导致运算符返回`Null`. 在构造`Null`中使用时以不寻常的方式表现。`If`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T16:36:55.533

[我在Eric Lippert 的博客](http://blogs.msdn.com/b/ericlippert/archive/2004/07/15/184431.aspx)**上找到了我的问题的答案： [**Not Logical Is VBScript**](http://blogs.msdn.com/b/ericlippert/archive/2004/07/15/184431.aspx)。事实证明，`Not`操作符和它的兄弟们一样，实际上并不是一个**布尔操作符**。**

 **[`And`, `Or`,`Not`和`Xor`](http://msdn.microsoft.com/en-us/library/4ah2h0k3%28v=vs.84%29.aspx)**在 MSDN 上的[**逻辑运算符**](http://msdn.microsoft.com/en-us/library/4ah2h0k3%28v=vs.84%29.aspx)[下归档。](http://msdn.microsoft.com/en-us/library/4ah2h0k3%28v=vs.84%29.aspx)**

 **但是 Eric Lippert 将它们标记为**bitwise**，这是一个比MSDN 上的**逻辑**更好的描述，因为**逻辑**并没有说明它们实际上是如何工作的，所以像我这样的人会误以为它们是**布尔**运算符，他们'不是。这是一个重大的陷阱。

为了让他们做我想做的事，我必须重写我的陈述如下：

```
If     (1 And 3) > 0  Then WScript.Echo "yes" Else WScript.Echo "no"
If Not((1 And 3) > 0) Then WScript.Echo "yes" Else WScript.Echo "no" 
```

这会打印`yes`，然后`no`按应有的方式打印。

**更新：**虽然上述方法似乎适用于这种情况，但这绝对不是要走的路。问题在于理解我想要检查的是什么。上面的代码没有说清楚。对结果进行大于 0 的按位比较和数值比较不等同于布尔检查。

考虑下面的代码，它采用了 Salman A 的`CBool`建议作为这个问题的最终解决方案：

```
Option Explicit
Dim a, b
a = -3 : b = -2

If  a And b       Then WScript.Echo "ja" Else WScript.Echo "nein" ' bad
If (a And b) > 0  Then WScript.Echo "ja" Else WScript.Echo "nein" ' bad
If CBool(a And b) Then WScript.Echo "ja" Else WScript.Echo "nein" ' good 
```****

# css - 如果我使用 HTML5 文档类型，为什么我的 div 不能达到 100% 的高度？如何获得 100% 的高度

> ID：10871898
> 
> 赞同：32
> 
> 时间：2012-06-03T16:14:39.840
> 
> 标签：css, html, quirks-mode

我正在努力为一个非常简单的画廊 web 应用程序排序布局，但是当我使用 HTML5 doctype 声明时，我的一些 div 的高度（它们是 100%）会立即缩小，我似乎无法丰满他们使用 CSS 备份。

我的 HTML 在[https://dl.dropbox.com/u/16178847/eyewitness/b/index.html](https://dl.dropbox.com/u/16178847/eyewitness/b/index.html)和 css 在[https://dl.dropbox.com/u/16178847/eyewitness/b/style.css](https://dl.dropbox.com/u/16178847/eyewitness/b/style.css)

*   如果我删除 HTML5 doctype 声明，一切都如我所愿，但我真的想使用正确的 HTML5 doctype 声明。
*   如果我将 doctype 设置为 HTML5 并且不进行任何更改，则带有照片的 div 和页脚 div 不可见，可能是因为它们高 0px。
*   如果我将 doctype 设置为 HTML5 并使`body { height: 100px }`and `.container { height: 100px }`or `.container { height: 100% }`，它变得可见，但我需要的是它是全高而不是像素高度。
*   如果我尝试执行与上述相同的操作，但`body { height: 100% }`照片和页脚 div 将不再可见。

我需要做什么才能使其高度达到 100%，以便我的照片和页脚 div 为全高？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-03T16:30:36.127

仅当父元素具有定义的高度时，即不是`auto`.. 如果它有 100% 的高度，那么也必须定义父级的父级高度。这可以一直到`html`根元素。

`html`因此，将和`body`元素的高度设置为`100%`，以及您希望首先拥有的该元素的每个祖先元素`100%` `height`。

请参阅此示例，以使其更清楚：

```
html, body, .outer, .inner, .content {
  height: 100%;
  padding: 10px;
  margin: 0;
  background-color: rgba(255,0,0,.1);
  box-sizing: border-box;
}
```

```
<div class="outer">
  <div class="inner">
    <div class="content">
      Content
    </div>
  </div>
</div>
```

如果我不给 100%`height`说`html`元素，这将是行不通的：

```
body, .outer, .inner, .content {
  height: 100%;
  padding: 10px;
  margin: 0;
  background-color: rgba(255,0,0,.1);
  box-sizing: border-box;
}
```

```
<div class="outer">
  <div class="inner">
    <div class="content">
      Content
    </div>
  </div>
</div>
```

… 或者`.inner`

```
html, body, .outer, .content {
  height: 100%;
  padding: 10px;
  margin: 0;
  background-color: rgba(255,0,0,.1);
  box-sizing: border-box;
}
```

```
<div class="outer">
  <div class="inner">
    <div class="content">
      Content
    </div>
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T08:50:51.173

实际上，要使其工作，请执行以下操作：

```
<!DOCTYPE html>
<html>
<head>
  <title>Vertical Scrolling Demo</title>
  <style>
    html, body {
      width: 100%;
      height: 100%;
      background: white;
      margin:0;
      padding:0;
    }
    .page {
      min-height: 100%;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="nav" class="page">
    <ul>
      <li><a href="#about">About</a></li>
      <li><a href="#portfolio">Portfolio</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </div>
  <div id="page1" class="page">
    <h1><a name="about">about</a></h1>
    About page content goes here.
  </div>
  <div id="page2" class="page">
    <h1><a name="portfolio">portfolio</a></h1>
    Portfolio page content goes here.
  </div>
  <div id="page3" class="page">
    <h1><a name="contact">contact</a></h1>
    Contact page content goes here.
  </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-29T21:21:00.217

我陷入了一个类似的问题来调整画布的大小，所以这就是我所做的并且工作得很好。

除了做：

```
body{ width: 100%; height: 100%;} 
```

像这样设置所需的元素：

```
.desired-element{ width: 100vw; height: 100vh} 
```

这样，您就可以确保在宽度和高度上拥有 100% 的视口。vw 代表 viewwidth 和 vh 代表 viewheight

我希望这可以帮助别人

# visual-studio-2010 - 研究 mspdbsrv 的 RPC 调用

> ID：10871899
> 
> 赞同：6
> 
> 时间：2012-06-03T16:14:46.997
> 
> 标签：visual-studio-2010, visual-c++, rpc, pdb-files, pdb

mspdbsrv.exe 是 Microsoft 内部用于更新 PDB 文件的实用程序。编译器通过 RPC 向 mspdbsrv 发送符号更新，然后 mspdbsrv 依次更新 PDB 文件。

我试图了解这些更新的样子。不幸的是，微软没有发布 IDL，所以我不知道 RPC 函数原型，但是将这些更新视为原始数据已经足够有趣了。

## 这是我的想法：

在这种情况下，mspdbsrv.exe 默认端点是`\RPC Control\mspdb_10.00.30319.01_rtl_32_00000000000733A0`. 但是 mspdbsrv 有一个命令行参数`-endpoint`，将其端点设置为不同的端点。然而，编译器可能总是连接到默认端点。
我想我可以创建一种在 mspdbsrv 默认端点上侦听的**“代理服务器”**，使用不同的端点运行 mspdbsrv.exe，并在记录时透明地通过 RPC 到 mspdbsrv。编译器不会知道它已连接到代理，因为代理公开了 mspdbsrv 端点。

这有意义吗？在没有 IDL 的情况下，我如何编写这样的代理 RPC 服务器？
如果有人知道有关这些 PDB 更新的一些详细信息，也许有一条捷径？

## 更新

我发现`00000000000733A0`mspdbsrv 端口名称的后缀是什么...( `mspdb_10.00.30319.01_rtl_32_00000000000733A0`)。
这是当前用户的安全访问令牌！以下是如何获取它的片段：

```
HANDLE hToken;    
if (OpenProcessToken(GetCurrentProcess(), TOKEN_QUERY, &hToken) != 0)
{

    TOKEN_STATISTICS tsStats;
    DWORD dwOutSize;

    if (GetTokenInformation(hToken, TokenStatistics, &tsStats, sizeof(tsStats), &dwOutSize))
    {
        printf(TEXT("%08x%08x\n"), (UINT)tsStats.AuthenticationId.HighPart, (UINT)tsStats.AuthenticationId.LowPart);
    }
} 
```

# javascript - Javascript，表格和数组。棘手的问题

> ID：10871900
> 
> 赞同：0
> 
> 时间：2012-06-03T16:14:51.523
> 
> 标签：javascript, arrays

我正在制作一个书店网站（用于一个小型大学 javascript 项目）到目前为止，我所有的书籍信息都在一个 .js 文件中的数组中，看起来像这样..

```
var headings  = new Array(4);
headings [0] = "title"
headings [1] = "author"
headings [2] = "cat"
headings [3] = "bookid"
headings [4] = "cost"

var bookid   = new Array(6);
var title   = new Array(6);
var cat  = new Array(6);
var author  = new Array(6);
var cost  = new Array(6);
var desc  = new Array(6);

bookid [0] = "0001"
title [0]    = "For whom the tell bowls";
cat[0]   = "fiction";
author[0]   = "John Doe";
cost[0]   = "&euro;12.99";
desc[0]   = "This book is frickin' amazing blah blah blah" 
```

等等……有7本书……

现在我想在单击缩略图时生成一个表格，其中一列中包含作者、标题、成本等，另一列中包含实际对应的详细信息，这是代码

```
for(var j = 0; j < 5; j++) {
                row = document.createElement("tr");

                // Each with 2 cells
                for(var i = 0; i < 2; i++) {

                    var cell = document.createElement("td");

                    var temp = headings[j];
                    var temp2 = (temp + '[' + filename + ']');
                    if (i==1)
                    {var text = document.createTextNode(temp2);
                    }
                    else 
                    {var text = document.createTextNode(temp);} 
```

顺便说一句，“文件名”被传递给这个函数，它是书的#，例如，0、1、2等等......现在，页面上显示的内容是正确的......对于第0本书，我得到......

```
title   title[0]
author  author[0]
cat         cat[0]
bookid  bookid[0]
cost    cost[0] 
```

对于第一本书，我得到

```
title   title[1]
author  author[1]
cat         cat[1]
bookid  bookid[1]
cost    cost[1] 
```

等等，但细节不会被解释为数组中的实际变量。我猜该解决方案与“innerHTML”有关，或者可能以某种方式转换我的变量..

如果有人知道这个问题的解决方案，将不胜感激！..我计划今天完成这个网站并转移到其他更重要的事情上（因为这个项目不值得很多标记）但是把这个缺陷留在那里会来烦我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T16:34:55.563

您现在解决此问题的方法是（尝试）按名称访问变量，例如您想用来`"title"`查找名为`title`. **不要这样做。**您最终会污染全局范围并依赖于`window`访问这些变量，或者您将落入**`eval`魔鬼**之手。

这是一个更好的主意：制作物品来存放您的书籍。然后一本书看起来像：

```
var book = {
    title: "Foo",
    author: "Bar",
    cat: "Baz",
    bookid: 123456,
    cost: "One hundred billion dollars"
}; 
```

更好的是定义一种类型的书籍：

```
function Book(title, author, cat, bookid, cost) {
    this.title = title;
    this.author = author;
    this.cat = cat;
    this.bookid = bookid;
    this.cost = cost;
}
var book = new Book("Foo", "Bar", "Baz", 123456, "One hundred billion dollars"); 
```

您可以将这些书籍存储到单个书籍数组中：

```
var books = [book1, book2, book3, ...]; 
```

突然之间，做一张桌子就变得容易了！

```
// Create or get a table
var table = document.createElement("table");

// Loop over the books array
for (var i=0, l=books.length; i < l; ++i) {
    // Get the current book
    var book = books[i];

    // Create a table row
    var row = document.createElement("tr");

    // Loop over the *properties* of the book
    for (var propertyName in book) {
        // Skip inherited properties
        if(!book.hasOwnProperty(propertyName)) continue;

        // Get the *property value*
        var property = book[propertyName];

        // Create a table cell and append to the row
        var textNode = document.createTextNode(property);
        var cell = document.createElement("td");
        cell.appendChild(textNode);
        row.appendChild(cell);
    }
    // Append the row to the table
    table.appendChild(row);
} 
```

您甚至可以使用一个 book 元素创建表格标题：

```
// Some book to loop over its property names
var someBook = books[0];

var row = document.createElement("tr");
// Loop over the book properties
for(var propertyName in someBook) {
    // Now placing the *property name* in a text node
    var textNode = document.createTextNode(propertyName);
    var header = document.createElement("th");
    cell.appendChild(textNode);
    row.appendChild(header);
}
table.appendChild(row); 
```

### 更新：更好地控制标题

正如丹尼斯建议的那样，您可能希望对标题进行更多控制。您不想显示`"cat"`为图书类别的标题，您想要更具可读性的内容。此外，您可能不想显示存储在书籍对象上的所有属性。在这种情况下，您可以存储标题以显示在另一个对象中，并添加有关这些标题的更多信息：

```
var headings = {
    title: {
        text: "Book title"
    },
    author: {
        text: "Author"
    },
    cat: {
        text: "Category"
    },
    bookid: {
        text: "ID"
    },
    cost: {
        text: "Price"
    }
}; 
```

在您的数据循环中，您将遍历属性`headings`而不是`book`.

```
// Loop over the properties to display
for (var propertyName in headings) {
    // Get the property value
    var property = book[propertyName];

    // [snipped]
} 
```

在您的标题循环中，您将使用`headings[propertyName].text`as display name 而不是`propertyName`. 您将不再需要 book 实例，因此`someBook`可以删除该变量。

```
// Loop over the book properties
for(var propertyName in headings) {
    var headingName = headings[propertyName].text;
    var textNode = document.createTextNode(headingName);

    // [snipped]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:37:41.443

你的问题在这里：

```
var temp2 = (temp + '[' + filename + ']'); 
```

您正在连接字符串；而不是 JavaScript 语句`title[1]`，您最终得到的是字符串`"title[1]"`。

您应该做的是使用构造函数创建一个对象并构建一个对象数组，而不是维护几个[并行数组](http://en.wikipedia.org/wiki/Parallel_array)：

```
function Book(title, author, cat, id, cost) {
    this.title = title;  //for each variable
}

var arrayOfBooks = [];
arrayOfBooks.push( new Book( "The Great Gatsby", "F. Scott Fitzgerald", "Fiction", 1, 5000.00));
//and so on for each book. 
```

当您构建表时：

```
var book = arrayOfBooks[filename];
var temp = headings[j];
var temp2 = book[temp]; //Use brackets instead of concatenating strings. 
```

另一个提示：如果您只是切换 if 语句，则内部循环是不必要的。您可以只创建两个单元格并在每个单元格中放置必要的文本值。

# ruby-on-rails - ActiveAdmin 索引作为表格并避免 HTML 转义

> ID：10871901
> 
> 赞同：1
> 
> 时间：2012-06-03T16:15:06.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我已经将这个索引设置为表格，并且在其中一列中，我希望为每一行显示多行短文本字符串。如果我只是添加换行符，
它们会被转义并在列中逐字显示。

有什么办法可以避免这些列中的 HTML 转义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T19:12:03.837

似乎我所要做的就是使用所需的输出调用 raw：

```
raw("your string here,<br>now without escaping the html") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-16T06:08:12.517

`"aaa<br>bbb<br>ccc".html_safe`为我工作

# android - 应用程序结束时如何打开显示？

> ID：10871904
> 
> 赞同：1
> 
> 时间：2012-06-03T16:15:32.330
> 
> 标签：android

我使用唤醒锁来保持显示开启。但是，当应用程序结束时，显示也会关闭。我想在应用程序结束后继续使用它。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:54:28.153

您要做的是使用 .On_AFTER_RELEASE 标志，见下文。

```
PowerManager pm;
PowerManager.WakeLock wakeLock;

 // Put the next 5 lines in a method that is called when you want to acquire a wakelock //or in the OnREceive() of a broadcast receiver.`

PowerManager pm = (PowerManager)
         context.getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wakeLock = pm.newWakeLock(
        pm.ON_AFTER_RELEASE|pm.SCREEN_DIM_WAKE_LOCK, "My wakelook");
        wakeLock.acquire();
...Do Stuff here

//Override the onDestroy of your activity to release the wakelock when it is destroyed.
@Override
protected void onDestroy() {

    super.onDestroy();
wakelock.release;
} 
```

当您释放唤醒锁时，这将使屏幕保持亮起，就好像有人与设备进行了交互（按下电源按钮、触摸屏幕等）。此时，如果没有与设备的进一步交互（屏幕变暗，然后变暗），将发生正常断电。

一世

让我知道这是否有帮助。

谢谢

****** *** ** *** ** *** ** *** ** *** ******添加****** ** *** ** *** ** *** ** *******

 **如果您想在屏幕变暗后唤醒手机，您可以使用以下标志创建唤醒锁。如果您有一个广播接收器并希望在事件发生时打开屏幕以便用户可以立即看到 UI（通知、Toast、布局等），这很好。

```
PowerManager.WakeLock wakeLock = pm.newWakeLock(
             pm.ACQUIRE_CAUSES_WAKEUP|pm.ON_AFTER_RELEASE|pm.SCREEN_DIM_WAKE_LOCK, "My wakelook"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T17:46:37.743

您需要显示屏保持多长时间？只是一段时间，还是直到某些事件发生？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T17:52:07.790

应用程序结束时不要释放唤醒锁。您可以在需要保持屏幕开启的时间段内安排活动。但通常这是一个不好的做法，因为持有完整的唤醒锁可能不仅会阻止屏幕，而且会阻止其他硬件进入睡眠状态。**

# asp.net-mvc - ASP.NET MVC Ignore.Routing 问题

> ID：10871906
> 
> 赞同：2
> 
> 时间：2012-06-03T16:15:56.267
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

当我从我的 MVC 应用程序请求以下 URL 时，我不断地被重定向到 HomeController。

www.mymvcapp.com/?m=standardvalue&a=someothervalue&code=12345

现在我试图通过编辑 Global.asax.cs 请求路由来克服这个问题，例如

```
routes.IgnoreRoute(".*m=standardvalue.*"); 
```

因此，我期望的结果是，只要 URL 包含“m=standardvalue”，它就不会将我带到 HomeController。可能是我做错了，有人可以为我指出解决问题的好方向。

附加信息：该链接看起来不像 MVC，那是因为应用请求路由 (IIS7) 捕获此 URL 并将其转换为运行 PHP 的网络服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:22:55.463

你在这里需要的是一个路由约束。如果请求的 URL 没有目标控制器并且包含带有等于标准值的变量 m 的查询字符串，则约束将返回 true。

```
public class DefaultWithoutParamsConstraint : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext,
                      Route route,
                      string parameterName,
                      RouteValueDictionary values,
                      RouteDirection routeDirection)
    {
        return values[parameterName] == null &&
               httpContext.Request.QueryString["m"] == "standardvalue";
    }
} 
```

现在只需将此约束添加到您的忽略列表中：

```
routes.IgnoreRoute(
    "{*controller}",
    new { controller = new DefaultWithoutParamsConstraint() }
); 
```

# authentication - 如何在网页中实现注销按钮？

> ID：10871909
> 
> 赞同：1
> 
> 时间：2012-06-03T16:16:45.853
> 
> 标签：authentication, tomcat, login, logout

我正在尝试创建一个简单的“登录”/“注销”页面。

服务器端正在运行 Tomcat。

通过[这个链接](http://www.cafesoft.com/products/cams/tomcat-security.html)，我成功地利用了Tomcat的内部认证机制让用户登录。

但是如何实现“注销”按钮？如果用户单击“注销”按钮，我该怎么办？如何告诉 Tomcat 用户想要注销？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:21:26.880

注销链接/按钮必须执行以下操作：

1.  `invalidate()``session`. _
2.  清除`cookies`（如果有的话）。
3.  重置`bean`对象（如果有）。
4.  重定向到自定义注销消息页面或应用程序主页。

此外，如果任何数据库值与用户的*登录/注销*相关，则将其设置为适当的值。

以下是一些可能对您有进一步帮助的答案：

*   [注销后的 JSF 生活](https://stackoverflow.com/a/7148320/803285)
*   [J2EE 应用程序上的会话处理](https://stackoverflow.com/q/5495361/803285)
*   [如何在 JSF 2.0 中使会话无效？](https://stackoverflow.com/a/5620582/803285)

# sql - 在 SQL 中，如何根据另一个字段的值将值从一个表复制到另一个表？

> ID：10871916
> 
> 赞同：0
> 
> 时间：2012-06-03T16:17:43.537
> 
> 标签：sql, oracle, oracle11g, oracle-sqldeveloper

好的，我有两张桌子

带有以下字段的凭证

```
ACTIVATIONCODE
SERIALNUMBER
VOUCHERDATADBID 
UNAVAILABLEAT   
UNAVAILABLEOPERATORDBID 
AVAILABLEAT 
AVAILABLEOPERATORDBID   
ACTIVATIONCODENEW   
EXT1    
EXT2    
EXT3    
DENOMINATION -- I added this column into the table. 
```

第二个表是带有以下字段的 VOUCHERDATAT

```
VOUCHERDATADBID
BATCHID
VALUE
CURRENCY
VOUCHERGROUP
EXPIRYDATE
AGENT
EXT1
EXT2
EXT3 
```

我想要做的是从VOUCHERDATAT中复制相应的VALUE并将其放入VOUCHERT的DENOMINATION中。两者之间的联系是VOUCHERDATADBID。我该怎么做？

它不是 1:1 映射。我的意思是可能有 1000 个序列号具有相同的 VOUCHERDATADBID。并且 VOUCHERDATADBID 在 VOUCHERDATAT 中只有一个条目，因此只有一个值。因此，属于某个 VOUCHERDATADBID 的所有序列号将具有相同的值。

加入会起作用吗？我应该使用什么类型的 JOIN？或者是 UPDATE 表要走的路吗？

谢谢您的帮助 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:37:06.853

您的问题是设计问题之一。您的所有表格都不是任何范式，甚至不是第一个范式（1NF）。您不应该向`VOUCHERT`表中添加列，而是使用以下列创建一个新表（选择名称）：`SERIALNUMBER`, `VALUE`, `VOUCHERDATADBID`（也许`ACTIVATIONCODE`也需要知道主键`VOUCHERT`以确保是否`ACTIVATIONCODE`应该包含在新表中） . 规范化是旨在解决任何可能的 // 异常的数据库`INSERT`设计过程`UPDATE`。`DELETE`这应该可以解决您的`INSERT`问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:24:38.607

您可以在这两个表之间进行连接，您将获得一个“视图”。您可以像这样更新此视图：

```
UPDATE (SELECT * 
        FROM VOUCHERT A JOIN VOUCHERDATAT B 
             ON A.VOUCHERDATADBID = B.VOUCHERDATADBID) 
SET DENOMINATION = VALUE; 
```

如果需要，您可以放置​​外部连接。

VOUCHERDATADBID 必须是 VOUCHERDATAT 中的 PRIMARY KEY 和 VOUCHERT 中的 FOREIGN KEY，否则会报错：

```
ORA-01779: cannot modify a column which maps to a non key-preserved table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T16:24:40.343

```
update  (
        select  v.DENOMINATION
        ,       vd.VALUE
        from    VOUCHERT v
        join    VOUCHERDATAT vd
        on      vd.VOUCHERDATADBID = v.VOUCHERDATADBID
        ) t
set     t.DENOMINATION = t.Value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T16:52:10.877

如果凭证datadbid 不是主键，这应该有效：

```
UPDATE vouchert
   SET denomination =
       (SELECT MAX(value)
          FROM voucherdatat
         WHERE voucherdatadbid = vouchert.voucherdatadbid); 
```

# java - X500Principal 可分辨名称顺序

> ID：10871922
> 
> 赞同：5
> 
> 时间：2012-06-03T16:18:39.120
> 
> 标签：java, bouncycastle, x509, distinguishedname

我正在使用 Bouncycastle 库使用 X509v3CertificateBuilder 类从 PKCS10 请求生成证书。

它返回构建一个包含生成证书的 X509CertificateHolder 对象。如果我在持有人上调用 getIssuer，它会以正确的顺序返回发行人专有名称（如果我在发行人证书上调用 getSubjectX500Principal()，则返回相同的名称），如果我使用 java CertificateFactory 解析持有人的编码版本，则 getIssuerX500Principal () 方法生成的证书以相反的顺序返回 DN，这是怎么回事？

这是我正在尝试做的示例代码：

```
X509CertificateHolder holder = certBuilder.build(sigGen);
holder.getIssuer(); //Returns the DN in the correct order (same as in issuer cert)

CertificateFactory certFactory = CertificateFactory.getInstance("X.509");
X509Certificate cert = (X509Certificate) certFactory.generateCertificate(new ByteArrayInputStream(holder.getEncoded()));

cert.getIssuerX500Principal().getName(); //Returns issuer DN in reverse order 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T14:20:37.787

由于我需要比较专有名称，我通过使用 LdapName 类解析 DN 并比较解析的 rdns 来解决：

```
boolean DNmatches(X500Principal p1, X500Principal p2) {
    List<Rdn> rdn1 = new LdapName(p1.getName()).getRdns();
    List<Rdn> rdn2 = new LdapName(p2.getName()).getRdns();

    if(rdn1.size() != rdn2.size())
        return false;

    return rdn1.containsAll(rdn2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-08T16:29:07.033

以防万一有人需要在证书订单中提取主题 DN，我发现这样做了：

```
String certSubject = new JcaX509CertificateHolder(x509Certificate).getSubject().toString(); 
```

# mysql - 如何定义外键约束

> ID：10871928
> 
> 赞同：0
> 
> 时间：2012-06-03T16:20:17.567
> 
> 标签：mysql

我有三个mysql表。表已经创建。

```
Requests -  request_id, request_message, user_id
Responses - response_id, response_message, user_id
users -     user_id, user_name 
```

现在我想定义外键约束，这样

```
1\. If user_id is not present in Users table, and someone is inserting the data in Requests or Responses for that user_id -- then error
2\. If request_id is not present in Requests table, then if someone is inserting in responses table for that request_id -- then error 

3\. If someone deletes an user_id, all associated requests and responses with that user_id should be deleted automatically.
4\. If someone deletes an request_id, all the associated responses with it, should be deleted automatically. 
```

如果我遗漏任何东西，请告诉我。

如何实现这个功能？

谢谢

德韦什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:32:04.887

这是创建表的完整 sql：

```
CREATE TABLE IF NOT EXISTS `reponses` (
  `response_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `response_message` varchar(45) DEFAULT NULL,
  `user_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`response_id`,`user_id`),
  KEY `fk_reponses_users1` (`user_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8mb4 AUTO_INCREMENT=3 ;

CREATE TABLE IF NOT EXISTS `requests` (
  `request_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `request_message` varchar(45) DEFAULT NULL,
  `user_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`request_id`,`user_id`),
  KEY `fk_requests_users` (`user_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8mb4 AUTO_INCREMENT=3 ;

CREATE TABLE IF NOT EXISTS `users` (
  `user_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_name` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8mb4 AUTO_INCREMENT=3 ;

ALTER TABLE `reponses`
  ADD CONSTRAINT `reponses_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE NO ACTION;

ALTER TABLE `requests`
  ADD CONSTRAINT `requests_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE NO ACTION; 
```

允许您删除与用户相关的记录的选项是`ON DELETE CASCADE`。默认情况下，MySql 设置`NO ACTION`引用`RESTRICT`并且不允许删除具有相关对象的父记录。我认为您没有提到响应和请求之间的关系，但您应该明白这一点；）。

# c++ - 在 protobuf 中处理可选消息的正确方法是什么？

> ID：10871929
> 
> 赞同：1
> 
> 时间：2012-06-03T16:20:28.433
> 
> 标签：c++, protocol-buffers

考虑以下实现：

人.proto：

```
 enum PhoneType {
  MOBILE = 0;
  HOME = 1;
  WORK = 2;
}

message PhoneNumber {
  required float number = 1;
  required PhoneType type = 2;
}

message Person {
  required string name = 1;
  optional PhoneNumber number = 2;
} 
```

主.cpp：

```
#include <stdint.h>
#include <stdio.h>

#include "person.pb.h"

#include <iostream>

int main(int argc, char *argv[])
{
    static const uint32_t outputbuflen = 1024;
    uint8_t outputbuffer[outputbuflen];
    uint32_t writtenlenght = 0;

    // Encode a person and send it over any datalink.

    // SENDER
    Person p_sender;
    p_sender.set_name("FooBar");

    // Set the phonenumber.
    // Does not work because returns const ref.
    // p.number().set_number(0123123);

    // Is this correct?
    PhoneNumber * number = p_sender.mutable_number();
    number->set_number(0800123123.0);
    number->set_type(MOBILE);

    p_sender.SerializeToArray(outputbuffer, outputbuflen);
    writtenlenght = p_sender.ByteSize();

    std::cout << writtenlenght << "B written to output."<< std::endl;

    // Great, now send the stream somwhere
    // sendStream(...);

    // RECEIVER
    // Does not know how many bytes to expect, so we'll let protobuf handle that.
    // Simulate a reception loop.
    Person p_receiver;
    uint32_t bytesparsed;
    for(bytesparsed = 0; bytesparsed < writtenlenght; bytesparsed++){
        // Look at the data as if receiving it byte by byte.
        std::cout << "Trying to parse message " << bytesparsed << std::endl;
        if(p_receiver.ParseFromArray(outputbuffer, bytesparsed)){
            std::cout << "Found message" << std::endl;;
            break;
        }
    }

    std::cout << "Needed " << bytesparsed << "B to read message, but has still " \
              << writtenlenght - bytesparsed << "B left in buffer" << std::endl;
    return 0;
} 
```

使用：[https](https://developers.google.com/protocol-buffers/) ://developers.google.com/protocol-buffers/ 在现实世界的情况下，接收者不知道应该接收的字节数，但 protobuf 应该（据我了解）能够检查完整的来自缓冲区的消息。如果没有可选消息，这似乎工作正常。此刻它没有发生，我最终得到了一个没有电话号码的破碎的人。:) 我做错了什么，这种情况应该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:41:17.990

Protocol Buffers 序列化格式不包括框架（即将序列化消息打包到流或分隔消息）。你需要自己做。

但是，有一些既定的做法。检查这两个答案以获取详细信息：

*   [https://stackoverflow.com/a/5586945/618259](https://stackoverflow.com/a/5586945/618259)
*   [https://stackoverflow.com/a/2341658/618259](https://stackoverflow.com/a/2341658/618259)

# python - Python / CGI - 上传文件尝试返回一个空页面

> ID：10871930
> 
> 赞同：1
> 
> 时间：2012-06-03T16:21:13.813
> 
> 标签：python, upload, cgi

我真的搜索了大约 50 个相关页面，但从未见过与我的问题类似的问题。当我按下提交按钮时，它调用脚本，但脚本返回一个空页面，我看到没有上传任何文件。我的代码中没有输入错误，我检查了几次，我真的需要为我的项目运行这段代码。可能是什么问题？我在ubuntu下运行apache，我的代码是：

html代码：

```
<html><body>
<form enctype="multipart/form-data" action="save_file.py" method="post">
<p>File: <input type="file" name="file"></p>
<p><input type="submit" value="Upload"></p>
</form>
</body></html> 
```

蟒蛇代码：

```
#!/usr/bin/env python
import cgi, os
import cgitb; cgitb.enable()

try: #windows needs stdio set for binary mode
    import msvcrt
    msvcrt.setmode (0, os.O_BINARY)
    msvcrt.setmode (1, os.O_BINARY)
except ImportError:
    pass

form = cgi.FieldStorage()

#nested FieldStorage instance holds the file
fileitem = form['file']

#if file is uploaded
if fileitem.filename:
    #strip leading path from filename to avoid directory based attacks
    fn = os.path.basename(fileitem.filename)
    open('/files' + fn, 'wb').write(fileitem.file.read())
    message = 'The file "' + fn + '" was uploaded successfully'
else:
    message = 'No file was uploaded'

print """\
Content-Type: text/html\n
<html><body>
<p>%s</p>
</body></html>
""" % (message,) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:02:04.377

我刚刚测试了您的脚本，对路径进行了一些小的更正，使其在本地为我工作。正确设置路径并正确设置权限后，此代码可以正常工作。

以下是要确保的事项：

1.  在您的 html 文件的表单属性中，确保您指向位于 cgi-bin: 中的 python 脚本`action="/cgi-bin/save_file.py"`。对我来说，我的 Web 服务器的根目录有一个 cgi-bin，我将 python 脚本放在那里。如果您从 Web 服务器上的标准文档位置运行脚本，它将不起作用

2.  确保您的 save_file.py 具有可执行权限：`chmod 755 save_file.py`

3.  在您的 save_file.py 中，确保您正在构建一个有效路径来打开文件进行保存。我将我的绝对设置为仅用于测试目的，但是是这样的：`open(os.path.join('/path/to/upload/files', fn)`

正确设置这些点，您应该没有任何问题。

# javascript - 如何创建临时文本框

> ID：10871937
> 
> 赞同：2
> 
> 时间：2012-06-03T16:21:56.787
> 
> 标签：javascript

我正在制作一个网站，背景将是一张大照片（室内设计公司），所以图片非常重要。这就是为什么我一直在尝试制作一个临时文本框，以便进入主页的人会看到临时欢迎消息等，但我真的不知道如何开始或我应该使用什么语言来做到这一点。

我希望任何人都可以帮助我开始。或者我需要搜索的地方/内容

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T00:56:27.533

使用[`alert`](http://www.w3schools.com/jsref/met_win_alert.asp)方法简单。
例子：

```
<html>
<head>
<script type="text/javascript">
function display_alert()
{
alert("Welcome to the site!");
}

display_alert();
</script>
</head>
<body>
</body>
</html> 
```

或者使用jquery的[`hide`](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_hide)方法。
例子：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $("input").click(function() {
        $(this).hide();
    });
});
</script>
</head>

<body>
<input value="Welcome to the Site!">
</body>
</html> 
```

# c - 是否可以 LD_PRELOAD 具有不同参数的函数？

> ID：10871938
> 
> 赞同：2
> 
> 时间：2012-06-03T16:21:57.780
> 
> 标签：c, linux, gcc

假设我通过创建一个共享对象并使用 LD_PRELOAD 首先加载它来替换一个函数。该函数的参数是否可以与原始库中的参数不同？

例如，如果我替换**pthread_mutex_lock**，这样就可以使用**pthread_my_mutex_t而不是参数****pthread_mutex_t**。可能吗？

 **其次，除了函数之外，是否可以使用 LD_PRELOAD 更改结构声明？例如，可以在结构中再添加一个字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T16:32:59.097

尽管您可以安排提供修改后`pthread_mutex_lock()`的函数，但代码将被编译为调用标准函数。当使用传递给标准函数的参数调用替换时，这将导致问题。这是一种礼貌的说法：

*   期待它崩溃和燃烧

任何预加载的函数都必须实现与它所替换的函数相同的接口——相同的名称、相同的参数输入、相同的值输出。内部可以根据需要以不同的方式实现，但接口必须相同。

与结构类似。现有代码被编译为期望结构的一种尺寸，一种特定的布局。您可能会在最后添加一个额外的字段，但未替换的代码可能无法正常工作。它将为结构的原始大小而不是增强的结构等分配空间。它永远不会访问额外的元素本身。这可能不是完全不可能，但是您必须设计程序来处理动态变化的结构大小，这对您何时可以做到这一点施加了足够严格的限制，以至于“您不能”的答案可能是恰当的（当然很多更简单）。

IMNSHO，LD_PRELOAD 机制用于紧急情况（并且是给定问题的临时创可贴）。这不是您应该计划在任何远程类似定期使用的机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T16:28:29.647

LD_PRELOAD 做一件事，而且只做一件事。它将特定的 DSO 文件安排在 ld.so 用于查找符号的列表的前面。它与代码一旦找到后如何使用函数或数据项无关。

您可以使用 LD_PRELOAD 执行的任何操作，只需将替换库与列表前面的 -l 链接即可进行模拟。另一方面，如果使用 -l 无法完成任务，则无法使用 LD_PRELOAD 完成任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T16:43:18.267

您所描述的效果在概念上与在正常链接时提供不匹配的外部函数的效果相同：未定义的行为。

如果你想这样做，而不是玩火，为什么不让你的替换函数也`pthread_mutex_t *`作为它的参数类型，然后`pthread_my_mutex_t *`在函数体中转换指针呢？通常，无论如何，这种转换只会在源级别发生；不应为其生成任何代码。**

# php - Symfony2 应用程序在每个请求上解析 YML

> ID：10871939
> 
> 赞同：4
> 
> 时间：2012-06-03T16:21:58.267
> 
> 标签：php, performance, symfony, doctrine-orm, yaml

我的 Symfony2 应用程序有一些性能问题，所以我在它上面运行了一个 webgrind 来看看发生了什么。原来它在每个请求上都解析了大量的 YML 文件，我不知道为什么。我已经启用了 APC 缓存，所以我不知道它可能是什么。对此问题的任何帮助将不胜感激。

编辑：这是我运行的 webgrind 的屏幕截图。 ![http://i.imgur.com/m7g6l.jpg](../Images/7579374f47247be4f5a01684520df8ec.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-01T17:25:12.720

根据我的研究，APCClassLoader 似乎不会导致 Symfony2 缓存 Doctrine 中使用的 YAML 文件。它似乎默认缓存配置文件（config.yml、parameters.yml），但 Doctrine 使用的实际 ORM YAML 文件不会被缓存，除非您指定缓存驱动程序，如下面链接的文档所示：

[http://symfony.com/doc/2.3/reference/configuration/doctrine.html#caching-drivers](http://symfony.com/doc/2.3/reference/configuration/doctrine.html#caching-drivers)

因此，如果发布者只有配置 YAML 而没有教义 YAML，则上述解决方案可能解决了该问题。但是，如果涉及 Doctrine YAML，则必须指定 Doctrine 缓存驱动程序。

这也会影响使用注释的人，因为除非指定了缓存驱动程序（Doctrine 默认数组缓存除外），否则它们将在每次页面加载时被解析。

认为我应该发布，因为这是一个复杂的问题，并且上面的答案在我的案例中具有误导性，因为 Doctrine ORM YAML 文件是缓存问题的根源。

这篇文章有更多关于我的具体问题和解决方案的详细信息：

[为什么 Symfony2 应用程序花费 70-90% 的时间来解析 YAML？](https://stackoverflow.com/questions/24742766/why-is-symfony2-app-spending-70-90-of-its-time-parsing-yaml/25028082#25028082)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T22:27:23.227

弄清楚发生了什么。我启用并工作了 APC，但没有在我的 autoload.php 中使用 ApcUniversalClassLoader。更多细节[在这里](http://symfony.com/doc/current/book/performance.html)。当他们在文档中说提高性能的“建议”时，他们的真正意思是“你必须这样做，否则你的表现会很糟糕”。

# php - Ruby 相当于 PHP 的 $this

> ID：10871940
> 
> 赞同：8
> 
> 时间：2012-06-03T16:22:35.507
> 
> 标签：php, ruby, oop, this

`$this->`Ruby中的 PHP 等价物是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-03T16:27:03.547

的红宝石等价物`this`是`self`- 它们都指的是当前实例。

棘手的部分是在 Ruby 类范围内，`self`指的`Class`是定义您正在构建的类的类的当前实例。在方法内部，`self`指的是类的实例。

例如：

```
类示例
  puts self # => "Example" - 字符串化的类对象

  定义富
    puts self ##<Example:0xdeadbeef> - 字符串化的实例
  结尾
结尾

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T05:53:16.617

如前所述，的类似物`$this`是。`self`但是，您询问了`$this->`，这意味着您想使用它来访问实例变量（`$this->somevar`）或实例方法（`this->somemethod()`）。对于实例变量，Ruby 中的等价物是`@`（如`@somevar`）。例如方法，相当于只写方法名称 ( `somemethod`)，或者，如果您喜欢冗长 ( `self.somemethod`)。

# c# - C#：FTP 上传缓冲区大小

> ID：10871943
> 
> 赞同：4
> 
> 时间：2012-06-03T16:22:43.323
> 
> 标签：c#, upload, ftp, io, buffer

我已经使用了 FTP 上传功能，但是我想问一些事情它是缓冲区大小，我将它设置为 20KB 这是什么意思，如果我增加/减少它会有所不同吗？

```
 private void Upload(string filename)
    {
        FileInfo fi = new FileInfo(filename);

        FtpWebRequest ftp = (FtpWebRequest)FtpWebRequest.Create("ftp://" + textBox1.Text + "/" + Path.GetFileName(filename));
        ftp.Credentials = new NetworkCredential(textBox2.Text, textBox3.Text);
        ftp.Method = WebRequestMethods.Ftp.UploadFile;
        ftp.UseBinary = true;
        ftp.KeepAlive = false;
        ftp.ContentLength = fi.Length;

        // The buffer size is set to 20kb
        int buffLength = 20480;
        byte[] buff = new byte[buffLength];
        int contentLen;

        //int totalReadBytesCount = 0;

        FileStream fs = fi.OpenRead();

        try
        {
            // Stream to which the file to be upload is written
            Stream strm = ftp.GetRequestStream();

            // Read from the file stream 2kb at a time
            contentLen = fs.Read(buff, 0, buffLength);

            // Till Stream content ends
            while (contentLen != 0)
            {
                // Write Content from the file stream to the 
                // FTP Upload Stream
                strm.Write(buff, 0, contentLen);
                contentLen = fs.Read(buff, 0, buffLength);
            }

            // Close the file stream and the Request Stream
            strm.Close();
            fs.Close();

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, "Upload Error");
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T16:29:34.793

对于桌面系统上的 FTP，大约 256Kb 的块大小在我们的测试中产生了最佳性能。较小的缓冲区大小会显着降低传输速度。我建议您自己进行一些测量，但是 20Kb 对于缓冲区来说绝对太少了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T02:56:58.240

> 文件已被文件系统缓存缓冲。您应该使用小于 20KB 的内容。4 KB 是一个传统的选择，我真的不会低于 4 KB。不要低于 1 KB，超过 16 KB 会浪费内存，并且对 CPU 的 L1 缓存（通常为 16 或 32 KB 的数据）不友好。

汉斯（[https://stackoverflow.com/a/3034155](https://stackoverflow.com/a/3034155)）

**`Use 4 KB (AKA 4096 b)`**

在 .Net 4.5 中，他们将默认值增加到 81920 字节，并且使用 .Net Reflector 显示 _DefaultCopyBufferSize 的值为 0x14000（81920b 或 80K）。但是，这是用于从流复制到流，而不是缓冲数据。BufferedStream 类的 _DefaultBufferSize 为 0x1000（4096b 或 4k）。

# javascript - ajax后如何在选择框中获取更新的选项属性？

> ID：10871944
> 
> 赞同：1
> 
> 时间：2012-06-03T16:22:47.503
> 
> 标签：javascript, jquery, ajax

我有一个选择框，用户可以在其中选择一个填充文本框的值，并且用户可以编辑该值（使用 Ajax）。选择框中的每个选项都有一个 id 和一个数据关键属性。我使用 JQuery 'change' 事件处理程序来使用关键数据中的值填充文本框。

```
<select id="actions">
  <option id="p0" data-critical="100"  value="0">Optie 0</option>
  <option id="p1" data-critical="120"  value="1">Optie 1</option>
</select>

<input type="text" id="editcritical" />

$("#actions").change(function() {
  var selected = $(this).find('option:selected');

  $("#editcritical").val(selected.data('critical'));
});

ajax-success: function(data){
  $("#p" + data.p.id).attr("data-critical", data.p.critical);
} 
```

在 Ajax 成功时，数据关键值已更改，但当我再次选择该选项时，旧值会显示在文本框中。我尝试使用 Live 方法，但没有任何反应。Firebug 在 data-critical 中显示更新的值。

有什么建议可以在文本框中显示更新的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:25:40.833

```
$("#actions").change(function() {
  var selected = $(this).find('option:selected');

  $("#editcritical").val(selected.attr('data-critical'));
}); 
```

在您的成功功能中，您应该尝试：

```
success: function(data){
  $("#p" + data.p.id).data("critical", data.p.critical);
} 
```

阅读[jQuery data() 与 attr(data)](https://stackoverflow.com/questions/9444679/jquery-data-vs-attrdata)以了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:25:00.407

您是否尝试过：

```
$("#editcritical").attr("data-critical"); 
```

?

# .net - .NET 路径组合

> ID：10871945
> 
> 赞同：0
> 
> 时间：2012-06-03T16:22:49.757
> 
> 标签：.net

我有一个问题路径组合。

```
...
repository.ConfigDir = Path.Combine(repository.Dir, @"\Config");
repository.CredFile = Path.Combine(repository.ConfigDir, @"\Credentials.xml");

System.out.println(repository.ConfigDir);
System.out.println(repository.CredFile); 
```

输出：

```
"C:\Users\username\Documents\Config"

"\\Credentials.xml" 
```

为什么我的路径的第一部分丢失了`CredFile`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T16:28:20.090

使用的要点之一`Path.Combine()`是避免必须包含前导和尾随“\”或“/”分隔符。从您的路径字符串中删除“\”（这些本质上是将路径重定向到根目录），它将按您的预期工作。

# magento - usps 国际航运 api 无法使用一个 magento 1.6

> ID：10871946
> 
> 赞同：0
> 
> 时间：2012-06-03T16:23:06.490
> 
> 标签：magento, shipping, usps

我已经在网上搜索了几个小时的论坛。似乎在 magento 1.6 的 usps api 中有一个错误。我们已经从 magento 1.4 升级了我们的网站，在该版本中一切正常，现在我们遇到了这个错误，无法提供国际运输。我们处于生产模式，通过 USPS 自己确认了我们的凭据，无论我尝试什么，在美国境外运送时，我都会不断收到*“没有可用的运送方式”*错误。当我尝试记录 usps 模块的错误时，我收到一个错误，其中包含有关 USERID 的信息，如下所示：

```
DEBUG (7): Array
(
    [request] => <?xml version="1.0" encoding="ISO-8859-1"?>
<IntlRateV2Request USERID="
    [result] => <Error>
 <Number>80040b19</Number>
 <Description>XML Syntax Error: Error getting USERID attribute.</Description>
 <Source>UspsCom::DoAuth</Source>
</Error>
    [__pid] => 32693
) 
```

我还没有找到有关此错误的任何文档，我们几乎要放弃此错误，但这不可能是无法解决的。有没有人遇到过类似的问题或更好的问题，有没有人解决过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:00:40.317

当您从 1.4 升级到 1.6 时，您必须在 Magento 管理员的配置 -> 运输方式下重新输入帐户信息。

这些版本中的加密/解密例程发生了变化，因此在 1.4 中加密的帐户信息在 1.6 中的解密方式不同。

# cassandra - 带 CQL3 的 Cassandra 是否支持“WITH CLUSTERING ORDER”选项？

> ID：10871947
> 
> 赞同：3
> 
> 时间：2012-06-03T16:23:07.177
> 
> 标签：cassandra, cql

我正在使用 Cassandra 1.1.0 和 CQL 3.0。

创建表时，出现以下错误。我提到了[http://www.datastax.com/dev/blog/cql3-evolutions](http://www.datastax.com/dev/blog/cql3-evolutions)

```
cqlsh:test> CREATE TABLE timeseries (
        ...   event_type text,
        ...   insertion_time timestamp,
        ...   event blob,
        ...   PRIMARY KEY (event_type, insertion_time)
        ... ) WITH CLUSTERING ORDER BY insertion_time DESC;
Bad Request: line 6:22 mismatched input 'ORDER' expecting '=' 
```

这是无效的查询吗？你有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T18:39:07.870

该`WITH CLUSTERING ORDER`语法仅在 Cassandra 1.1.1（几天前刚刚发布）中添加，因此在 1.1.0 中不起作用。

此外，该示例在聚类定义周围缺少一些括号。你要：

```
CREATE TABLE timeseries (
   event_type text,
   insertion_time timestamp,
   event blob,
   PRIMARY KEY (event_type, insertion_time)
) WITH CLUSTERING ORDER BY (insertion_time DESC); 
```

希望有帮助。我会让那篇文章的作者知道这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T14:13:59.770

是的，您可以在此链接中查看详细信息 [http://www.datastax.com/documentation/cql/3.0/cql/cql_reference/create_table_r.html](http://www.datastax.com/documentation/cql/3.0/cql/cql_reference/create_table_r.html)

# mysql - MySQL中基于子表数据的行选择

> ID：10871951
> 
> 赞同：1
> 
> 时间：2012-06-03T16:23:35.913
> 
> 标签：mysql

我一直在为这个选择苦苦挣扎，我一直在寻找 StackOverflow 并尝试了很多东西，但没有任何东西可以帮助我解决我的特定问题。也许我只是错过了一些明显的东西。

我有两个表：测量，MeasurementFlags

“测量”包含来自设备的测量，并且每个测量都可以附加属性/属性（通常称为“标志”）以表示所讨论的测量在某种程度上是特殊的（例如，一个标志可能表示测试或校准测量）。注意：每个标志一个记录！

是的，因此“测量”表中的记录理论上可以附加无限数量的测量标志，或者它可以没有。

现在，我需要从“Measurements”中选择记录，这些记录具有附加的“MeasurementFlag”值“X”，但它也不能附加值“Y”的标志。

我们谈论的是一个包含数亿行的相当大的数据库，这就是为什么我试图将所有这些逻辑保留在一个查询中。将其拆分会创建太多查询，但是如果无法在一个查询中进行，我想我没有选择。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:29:34.043

```
SELECT measurements.*
FROM   measurements
INNER JOIN measurement_flag
        ON measurements.measurement_id = measurement_flag.measurement_id
       AND flag = 'X'
       AND 'Y' NOT IN (
               SELECT flag
               FROM   measurement_flag
               WHERE  measurement_id = measurements.measurement_id); 
```

# ember.js - Ember 数据：已加载数据哈希...但未提供主键“未定义”

> ID：10871953
> 
> 赞同：3
> 
> 时间：2012-06-03T16:24:07.970
> 
> 标签：ember.js, ember-data

我正在尝试使用 Ember Data 加载模型。获取模型的 AJAX 调用似乎成功，但我得到以下信息

```
未捕获的错误：断言失败：为 App.Account 类型的模型加载了数据哈希，但未提供主键“未定义”。

```

在 ember-data.js:1128 中，当模型未指定 primaryKey 时，它似乎在为 primaryKey 定义 undefined 并且不默认为“id”。但我也尝试过明确使用 primaryKey 无效。

为了完整起见，这是我的模型：

```
App.Account = DS.Model.extend({
    投资组合ID：DS.attr（'整数'），
    标题：DS.attr('string'),
    user_id: DS.attr('integer'),
    网址：“投资账户”
});

```

我正在使用以下内容加载帐户：

```
App.store.find(App.Account, account_id)

```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T17:18:57.460

我通过升级到最新的边缘 Ember Data 来“修复”这个问题（我之前使用了两个项目的当前发行版：0.9.8.1 用于 ember.js 和四个月大的 ember-data-latest.js 在 ember-数据 github 站点）。我仍在使用相同的 ember.js 发行版，但升级 Ember Data 似乎已经解决了这个问题。

# jquery - 自定义 catcomplete 包含多个类别时不显示结果

> ID：10871957
> 
> 赞同：0
> 
> 时间：2012-06-03T16:24:41.450
> 
> 标签：jquery, jquery-ui, autocomplete

`enter code here`我正在尝试在 facebook 中重现搜索建议。它显示在带有标题的不同“类型”的同一框中结果（人员，组，页面，..）

基本上我需要按类型对结果进行分组，并添加一个带有类型名称的不可cliclable标题（例如：用户、组）；就像脸书一样：

![在此处输入图像描述](../Images/69d297218fd08860fb9bd93037109cfd.png)

这是来自 jquery ui 页面的自定义 catcomplete：

```
$.widget( "custom.catcomplete", $.ui.autocomplete, {
                                _renderMenu: function( ul, items ) {
                                    var self = this,
                                        currentCategory = "";
                                        $.each( items, function( index, item ) {
                                            if ( item.category != currentCategory ) {
                                                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                                                currentCategory = item.category;
                                            }
                                            self._renderItem( ul, item );
                                        });
                                }
                            }); 
```

-编辑-

可以通过在 serch 字段中输入“bootcamp”在此处进行测试（无需登录）：http://209.51.221.243/integracion/login.php（输入“deya”有效，输入“bootcamp”无效

当只有一种结果时，Wich 工作正常，但当有多个结果时，例如在此响应中：

```
[{"value":"Donde puedo descargar los drivers de bootcamp?","id":"1","category":"Ayudas"}][{"value":"Donde puedo descargar los drivers de bootcamp?","id":"1","category":"Ayudas"},{"first_name":"bootcamp","last_name":"bootcamp","id":"95","value":"bootcamp bootcamp","category":"Usuarios"}] 
```

它没有显示任何结果，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T22:14:55.003

在您的 php 中，只为每种类型的第一行添加子。您可以使用全局变量来做到这一点：

```
$first = array();

while (...) {
   if (!$first[$row['type']]) {
       $first[$row['type']] = true;
       $row['sub'] = $row['type'];
   }
} 
```

然后在你的javascript中：

```
.data( "autocomplete" )._renderItem = function( ul, item ) {
            var sub = "";
            if (item.sub) {
                sub = $("<li class="sub">" + item.sub + "</li>");
                ul.append(li);
            }
            var li = $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a><img src='"+item.img+"' /><span class='name'>" + item.value + "</span></a>" )
            ul.append(li);
                        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:40:24.627

您可能想看看[http://jquery-ui.googlecode.com/svn-history/r3820/trunk/demos/autocomplete/categories.html](http://jquery-ui.googlecode.com/svn-history/r3820/trunk/demos/autocomplete/categories.html)

```
$.extend($.ui.menu.prototype, {
    next: function() {
        this.move("next", ".ui-menu-item:first");
    },
    previous: function() {
        this.move("prev", ".ui-menu-item:last");
    },
    move: function(direction, edge) {
        if (!this.active) {
            this.activate(this.element.children(edge));
            return;
        }
        var next = this.active[direction + "All"]('.ui-menu-item').eq(0);
        if (next.length) {
            this.activate(next);
        } else {
            this.activate(this.element.children(edge));
        }
    }
});

$.widget("custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function(ul, items) {
        var self = this,
            currentCategory = "";
        $.each(items, function(index, item) {
            if (item.category != currentCategory) {
                ul.append("<li class='ui-autocomplete-category'>" + item.category + "</li>");
                currentCategory = item.category;
            }
            self._renderItem(ul, item);
        });
    }
});​

$(function() {
    var data = [
        { label: "anders", category: "" },
        { label: "andreas", category: "" },
        { label: "antal", category: "" },
        { label: "annhhx10", category: "Products" },
        { label: "annk K12", category: "Products" },
        { label: "annttop C13", category: "Products" },
        { label: "anders andersson", category: "People" },
        { label: "andreas andersson", category: "People" },
        { label: "andreas johnson", category: "People" }
    ];
    $('#search').catcomplete({
        source: data
    });
}); 
```

我几乎忘记了我不久前创建了一个非常相似的 jsFiddle 示例：**[jsFiddle example](http://jsfiddle.net/j08691/jF9Mj/)**。

# java - 防止键盘显示字符气泡

> ID：10871958
> 
> 赞同：0
> 
> 时间：2012-06-03T16:24:44.117
> 
> 标签：java, android

在键盘上打字时会出现一个气泡以显示您按下的字符，我正在寻找一种方法来防止它这样做！

![在此处输入图像描述](../Images/5449b7d2e48c918e304b4370e9863eae.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:13:33.400

简短的回答：你不能。

长答案：它通常由制造商定制。我们在同一个 Android 版本中发现制造商之间存在许多差异。我们得出结论，尝试自定义行为是没有意义的。即使您确实找到了一种方法，它也可能适用于该特定 Android 版本中的特定制造商。

即使您要求使用带有 的数字键盘`<EditText android:inputType="number" ... />`，具体显示给用户的内容也因制造商而异。

如果您找到对文档化 API 的引用以更改键盘行为，我将不胜感激它的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T22:30:52.223

android上的键盘就像任何其他应用程序一样。你可以安装任何你想要的。

因此，对于其他开发人员可以对每个应用程序做什么，并没有太多规则。这就是其中之一。

据我所知，您唯一能做的就是向键盘提示您希望对 editText 进行何种输入（键盘应用程序可能会或可能不会按照您希望的方式处理它） . 除此之外，你不能强迫另一个应用程序按照你希望的方式工作。

但是，您始终可以创建自己的键盘，甚至内置在应用程序中。这样您就可以设置自己的规则。

# asp.net-mvc-3 - ASP NET 表单授权：如何减少持续时间？

> ID：10871963
> 
> 赞同：1
> 
> 时间：2012-06-03T16:25:39.437
> 
> 标签：asp.net-mvc-3, forms-authentication, authorization

我有一个网页，它正在实现基于 cookie 的 ASPNET 表单身份验证。

一旦用户登录了页面，他就可以使用一个表单来编辑一些信息，该表单是使用部分视图创建的，并作为一个对话框返回给他进行编辑。链接到局部视图的动作装饰如下：

```
[HttpGet]
[OutputCache(Duration = 0, VaryByParam = "None")]
[Authorize(Roles = "test")]
public ActionResult changeTripInfo(int tripID, bool ovride=false) 
{
     ...
} 
```

我遇到的问题是请求和向用户显示对话框的时间之间的**延迟**：时间范围在 800 到 1100 毫秒之间，这与表单的复杂性无关。

用 Glimpse 进行调查发现，处理`AuthorizeAttribute`（见片段）的时间总计至少 650 毫秒，这让我感到不安。查看 Sql 服务器日志，检查用户角色的调用，正如预期的那样，几乎没有任何内容（持续时间 0）。我怎样才能减少这个时间？

我错过了一些优化吗？
或者我应该假设这是执行属性的正常持续时间（我不能在不同的服务器上运行无偏见的测试）？

![时间表报告](../Images/ad634281283b4137db5595c4ced954b5.png) **-EDIT-** 添加了 Sql server 调用日志

![Sql 服务器日志](../Images/2513e2c37ef2ec445235b861bb2a6aaa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:03:01.963

这是您的表单和持有您的凭据的 SQL Db 之间的身份验证时间吗？

# foursquare - Foursquare API 错误：以下场所已经有 2 个活动特价商品

> ID：10871965
> 
> 赞同：0
> 
> 时间：2012-06-03T16:25:48.173
> 
> 标签：foursquare

当我尝试添加新广告系列时，我收到错误消息：

> “以下场馆已经有 2 个活动特价”

这是我的一段代码：

```
var add_campaign_url = 'https://api.foursquare.com/v2/campaigns/add';
var params = 'campaignId='+ bomonti_campaign_id+
            '&venueId='+venue1+','+venue2+ 
            '&endAt=1339621140' + 
            '&startAt=1339603140'+
            '&oauth_token=' + ACCESS_TOKEN;

var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
    if(xmlhttp.readyState == 4){
        var response = jQuery.parseJSON(xmlhttp.responseText);
        console.log(response);
    }
};
xmlhttp.open("POST",add_campaign_url,true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send(params); 
```

实际上，场馆现在没有活跃的活动，但有一些待定的活动。使用 Merchant API 时是否有限制？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:57:55.477

是的，有一个限制。Foursquare 一次只允许每个场地两个活动特价：

> 目前，每个场地一次只允许两个活动特价。如果与此活动关联的组中的任何场所已经有两个有效的特价商品，则此调用将失败（并显示有用的错误消息）。

[https://developer.foursquare.com/docs/campaigns/start.html](https://developer.foursquare.com/docs/campaigns/start.html)

您可以联系 Foursquare 说明您的情况。他们会告诉您是否可以更改商家密钥的限制。

# opencv - C++ OpenCV 2.4.0 findContours 因 Kinect 深度流而崩溃

> ID：10871966
> 
> 赞同：4
> 
> 时间：2012-06-03T16:26:00.247
> 
> 标签：opencv, kinect

遇到 opencv 2.4.0 findContours 函数不断崩溃的问题。不幸的是，我很难确定这个问题。希望有人遇到类似的问题。

我正在使用 Microsoft K4W SDK 1.5 从 Kinect 传感器捕获深度流，将其复制到 OpenCV Mat，然后通过 cvtColor 和阈值将其转换为 8UC1 图像。我运行 countNonZero 只是为了确保图像在传递给 findContours 之前不是空白的。但即使是最简单的 findcountours 实现也会崩溃。

这是我的基本代码：

```
rawdepth = Mat(Size(640,480),CV_8UC4);
thresh = Mat::zeros(640,480,CV_8UC1);

// storage for contours 
vector<vector<Point>> contours;

cvtColor(rawdepth,thresh,CV_RGB2GRAY);
threshold(thresh,thresh,0,255,THRESH_BINARY);

if(countNonZero(thresh) > 100 ) {
    // This crashes
    findContours(thresh,contours,RETR_EXTERNAL,CV_CHAIN_APPROX_NONE);           
} 
```

我确实验证了传递给 findcontours 的实际 Mat 是单通道图像并且它不是空白的（即，有大约 500 多个点）。但我想知道这是否是与堆或线程相关的问题，因为我听说 findcontours 实际上可以修改输入 Mat？

在这一点上，我将尝试使用刚刚发布的 OpenCV 2.4.1，尽管我没有看到任何指向修复此问题的已修复错误。

任何想法都非常感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T01:02:40.417

问题原来是编译器标志将程序的堆栈使用限制为 10MB（10,000,000 字节）。不幸的是，这对于我正在捕捉的 Kinect 视频来说还不够。删除编译器标志后，findContours 现在将编译并正常工作！

我正在使用 VC++ 2010，编译器标志位于 Project Properties->Linker->System 下。这两个字段是：**“堆栈保留大小”**和**“堆栈提交大小”**

清除它们并重新编译后，该项目运行良好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:22:33.423

这里有两个可能的问题。

首先，来自 Kinect 的原始深度流是 16 位（3 LSB 是播放器索引，其余 13 位是以毫米为单位的深度），因此如果您将该数据复制到 8 位图像中，您只会得到其中的一半并且它是 gobbledegook。

其次，OpenCV 针对调试和发布配置进行了不同的编译。如果您使用调试配置文件进行编译，则需要使用调试库（版本#d）。所以要使用 cv::findContours，你需要 opencv_imgproc240.[lib/dll] 和 opencv_core240.[lib/dll]。如果您使用错误的配置， cv::namedWindow / cv::imshow （对于调试非常方便）或 cv::findContours 都不会正常工作。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T02:50:47.590

我想说明我在 findContours() 方法的崩溃方面遇到了同样的问题，正如第二个答案中提到的那样，问题是我在调试模式下使用了 opencv_imgproc240.dll 和 opencv_core240.dll 的非调试版本，改成XXd.dll就解决了。

# c - netbeans c 自动弹出代码完成

> ID：10871967
> 
> 赞同：11
> 
> 时间：2012-06-03T16:26:02.150
> 
> 标签：c, netbeans

我正在使用 Netbeans 7 对 C 进行编程。

想象一下，如果我输入`prin`并`CTRL+SPACE`弹出一个窗口会`printf`提出建议。

如何使此弹出窗口在我键入时显示？我不想使用`CTRL+SPACE`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-11-17T02:59:08.620

如果您有安装了[C/C++ 插件](https://netbeans.org/features/cpp/)的 Netbeans ，您可以转到`Tools -> Options -> Editor -> Code Completion`.

将语言下拉菜单切换到 C/C++。然后，您可以将 C/C++ 标识符的自动弹出触发器修改为如下所示：

```
.;->;.*;->*;::;new ; ;a;b;c;d;e;f;g;h;i;j;k;l;m;n;o;p;q;r;s;t;u;v;w;x;y;z; 
```

一旦输入上述任何模式，这将导致自动完成窗口弹出。在 Netbeans 8.0.2 中测试对我来说就像一个魅力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:25:42.520

我正在使用带有 Java 的 netbeans，但它可能以相同的方式工作。也应该可以为 C 启用自动完成功能。检查工具 -> 选项 -> 编辑器 -> 代码完成。如果它被禁用，您可以使用 Ctrl + Space 调用它。启用后，它应该会自动弹出。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-26T05:32:51.227

## 使用“tab键”自动弹出任何语言

转到 -> 工具 -> 选项 -> 键盘映射 -> 在“搜索：”框中搜索“完成”。

单击“快捷方式”列下的[...]，其中“操作”“显示代码完成弹出窗口”->编辑->按标签->按“确定”

现在检查和编辑时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-14T23:05:15.673

添加@Mike Kuenzi 上面所说的自动完成代码，您应该将其粘贴到工具->选项->编辑器->代码完成中。选择语言C/C++，复制以下代码

```
.;->;.*;->*;::;new ; ;a;b;c;d;e;f;g;h;i;j;k;l;m;n;o;p;q;r;s;t;u;v;w;x;y;z;A;B;C;D;E;F;G;H;I;J;K;M;N;L;O;P;Q;R;S;T;U;V;W;Y;Z; 
```

并将其粘贴到***Auto Popup Triggers for C/C++ identifiers***。确保在粘贴数据之前清空空间。选择自动插入。

请注意，如果您的计算机中没有安装 C/C++ 插件并为您的 Netbeans IDE 配置它，这将不起作用。

我刚试了一下，它奏效了。

# c++ - 在指定位偏移处读取/写入值

> ID：10871970
> 
> 赞同：3
> 
> 时间：2012-06-03T16:26:34.460
> 
> 标签：c++, bitstring, bitstream

我需要在内存缓冲区中的指定位偏移处读取和写入指定位长（不一定是 8 的倍数）的数值，首先是最重要的位。

例如，在偏移量 6 和位长 4 处写入值 5：

```
before: 11111111 11111111
bits:         ^^ ^^
after:  11111101 01111111 
```

所以我正在寻找的功能可能是这样定义的：

```
unsigned get_bits (unsigned char *buffer, int offset, int bit_size);
void set_bits (unsigned char *buffer, int offset, int bit_size, 
                             unsigned value); 
```

以及示例用法：

```
set_bits (buffer, 6, 4, 5);
unsigned v = get_bits (buffer, 6, 4);
assert (v == 5); 
```

这些函数将用于在相对较大的缓冲区中读取/写入少量值（过滤大量网络流量），因此我丢弃（可能是错误地）使用`std::bitset`.

是否有任何现有的库可用于实现/简化此任务？关于实施它有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:55:40.677

摆弄比特很少容易。这是一个完整的工作示例，说明如何做你想做的事。

这里的大问题是跨字节边界读取和写入数字块。如果你把它们分成一口大小的块，问题总是更容易，如果你能原谅双关语。

首先，我创建了一个像 std::bitset 这样可以包装用户定义缓冲区的类。它让我们可以在二进制数据的大缓冲区中摆弄各个位。

```
#include <cassert>  // for assert
#include <cstring>  // for memset

// A wrapper for a data buffer providing bit-level access.
class BitBuffer {
public:
    BitBuffer (unsigned char *src_buffer, size_t byte_size)
        : m_data( src_buffer ), m_size( byte_size )
    {
        if (m_size) assert(m_data);
    }

    // Clear the buffer (set all bits to 0).
    void clear () {
        memset( m_data, 0, m_size );
    }

    // Get an individual bit's value.
    bool get (size_t bitpos) const {
        assert( bitpos / 8 < m_size );
        return m_data[ bitpos / 8 ] & ( 1 << ( bitpos % 8 ) );
    }

    // Set an individual bit's value.
    void set (size_t bitpos, bool val=true) {
        assert( bitpos / 8 < m_size );
        if( val ) {
            m_data[ bitpos / 8 ] |= ( 1 << ( bitpos % 8 ) );
        } else {
            m_data[ bitpos / 8 ] &= ~( 1 << ( bitpos % 8 ) );
        }
    }

    // Switch off a bit.
    void reset (size_t bitpos) { 
        set( bitpos, false );
    }

    // Flip a bit.
    void flip (size_t bitpos) {
        set( bitpos, ! get( bitpos ) );
    }

    // Return the size of the buffer in bytes.
    size_t byte_size () const { return m_size; }

    // Return the size of the buffer in bits.
    size_t bit_size () const { return m_size * 8; }

    // Return a const pointer to the buffer.
    unsigned char const *  buffer () const { return m_data; }

private:
    unsigned char * m_data;
    size_t m_size;
}; 
```

然后我编写了一些函数来从缓冲区中获取和设置位块，首先是 MSB。

```
unsigned get_bits (BitBuffer& buffer, size_t offset, size_t bit_size)
{
    unsigned bits = 0;
    for (size_t i = 0; i < bit_size; i++) {
        // We reverse the order of the bits, so the first bit read
        // from the buffer maps to the high bit in 'bits'.
        bits |= ( buffer.get( offset + i ) << (bit_size - 1 - i) );
    }
    return bits;
}

void set_bits (BitBuffer& buffer, size_t offset, size_t bit_size, unsigned bits)
{
    for (size_t i = 0; i < bit_size; i++) {
        // We reverse the order of the bits, so the high bit of 'bits'
        // gets written to the buffer first.
        bool bit_value = bits & ( 1 << (bit_size - 1 - i) );
        buffer.set( offset + i, bit_value );
    }
} 
```

和一个测试工具：

```
#include <cstdio>

// Print the bits of the buffer to stdout.
void dump_buffer (BitBuffer& buffer)
{
    for (size_t i = 0; i < buffer.bit_size(); i++) {
        printf( "%i", buffer.get(i) );
    }
    printf("\n");
}

int main()
{
    const size_t byte_size = 4;  // size of buffer in bytes
    unsigned char * raw_buffer = new unsigned char[ byte_size ];

    BitBuffer buffer( raw_buffer, byte_size );
    buffer.clear();

    printf("Test #0: contents of 4-byte buffer:\n");

    // Show the buffer.
    dump_buffer( buffer );

    printf("\nTest #1: setting and flipping bits:\n");

    // Set some bits
    buffer.set( 5 );
    buffer.set( 10 );
    buffer.set( 12 );
    buffer.set( 31 );

    // Show the buffer.
    dump_buffer( buffer );

    // Read some bits.
    printf( "Value at 12 before flip: %i\n", buffer.get( 12 ) );
    buffer.flip( 12 );
    printf( "Value at 12 after flip: %i\n", buffer.get( 12 ) );

    printf("\nTest #2: setting all 1's, and writing 5, length 4 to offset 6:\n");

    // Fill with 1's.
    set_bits(buffer, 0, 32, 0xFFFFFFFF);

    // Set 5 at offset 6, bit size 4.
    set_bits(buffer, 6, 4, 5);
    assert( get_bits(buffer, 6, 4) == 5 );

    // Show the buffer.
    dump_buffer( buffer );

    // All done.
    delete raw_buffer;
    return 0;
} 
```

要编译，只需将所有这些转储到一个文件中并编译。测试运行的输出：

```
Test #0: contents of 4-byte buffer:
00000000000000000000000000000000

Test #1: setting and flipping bits:
00000100001010000000000000000001
Value at 12 before flip: 1
Value at 12 after flip: 0

Test #2: setting all 1's, and writing 5, length 4 to offset 6:
11111101011111111111111111111111 
```

如果您觉得它有用，或者您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:38:46.147

要将特定位设置为 1，您可以创建一系列全为 0 的位，除了您要设置的位（那些为 1）和`OR`现有位。要将特定位设置为 0，您只需执行相同的操作，所有位都是 1，除了您想要 0 的位并且您使用`AND`运算符。

例子：

```
before:        11111111 11111111
bits to SET:         _^ _^       5 is 0101, so we SET just the 1 bits, _ is placeholder
bitmask: OR    00000001 01000000
result:        11111111 11111111 No different because they were all 1s already.
bits to RESET:       ^_ ^_       RESET the 0s
bitmask: AND   11111101 01111111
result:        11111101 01111111 
```

不知道有任何图书馆可以帮助解决这个问题。

# android - android改变图片大小

> ID：10871975
> 
> 赞同：1
> 
> 时间：2012-06-03T16:27:04.397
> 
> 标签：android, android-activity, camera

我的应用程序使用相机拍照并将数据发送到其他地方。但是，就字节而言，图片尺寸太大，或者不必要地大。但我不知道如何强制相机拍一张更小的照片，或者在拍完照片后，发送一个缩小版的照片。

这就是我进入相机屏幕的方式。

```
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
intent.putExtra(MediaStore.EXTRA_OUTPUT,Uri.fromFile(getTempFile()));

startActivityForResult(intent, PIC_ONE);//first picture 
```

然后 onActivityResult 我有：

```
...
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize=4;
Bitmap mBitmap = BitmapFactory.decodeFile(getPath(myURI),options);

photoView.setImageBitmap(bmp); 
```

它向用户显示了已保存图像的四分之一大小的缩略图。但当然实际图像仍然保留其大尺寸。

如何减小图像尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:55:05.930

看看[使用 BitmapFactory.Options.inSampleSize 减少位图大小](http://android-coding.blogspot.com/2011/06/reduce-bitmap-size-using.html)

* * *

您也可以尝试**createScaledBitmap()**

```
public static Bitmap createScaledBitmap (Bitmap src, int dstWidth, int dstHeight, boolean filter) 
```

自：API 级别 1 创建一个新位图，从现有位图缩放。

参数 src 源位图。dstWidth 新位图的所需宽度。dstHeight 新位图的所需高度。如果应该过滤源，则过滤器为真。

> ***返回新的缩放位图***。

## 它还减少了文件大小，

您还可以使用以下功能来调整大小：

```
 public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {

    int width = bm.getWidth();

    int height = bm.getHeight();

    float scaleWidth = ((float) newWidth) / width;

    float scaleHeight = ((float) newHeight) / height;

    // create a matrix for the manipulation

    Matrix matrix = new Matrix();

    // resize the bit map

    matrix.postScale(scaleWidth, scaleHeight);

    // recreate the new Bitmap

    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);

    return resizedBitmap;

    } 
```

# php - PHP 文档代码 - 如何使用 @package 和 @subpackage 标签？

> ID：10871977
> 
> 赞同：0
> 
> 时间：2012-06-03T16:27:23.460
> 
> 标签：php, documentation, cakephp-2.0

在记录我的 PHP 代码时，我对如何正确使用 @package 和 @subpackage 标记感到困惑。如果它有任何相关性，这是针对 CakePHP 2.x

我将如何为位于我的应用程序中以下目录中的类编写包标签，例如：

```
app/Model/User.php

app/Model/Behavior/Sortable.php

app/Model/Behavior/Custom/Validator.php

... 
```

依此类推，还有更多的子目录。我特别不确定位于深层子目录中的类。

```
/**
 * @package ??
 * @subpackage ??
 */
class ValidatorBehavior extends ModelBehavior {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:34:21.890

好吧，这是协议和惯例的问题。蛋糕用途如下：

```
/*
 * @package App
 * @subpackage App.Model.Behavior
 * /

... 
```

# java - 将 PowerPoint 幻灯片导出到 java.awt.Graphics2D

> ID：10871982
> 
> 赞同：0
> 
> 时间：2012-06-03T16:28:14.700
> 
> 标签：java, apache, apache-poi

我开始测试将 ppt 文档转换为 jpeg 或 png 图像。我用java来测试。按照 apache 网站上的说明进行操作：http: [//poi.apache.org/slideshow/how-to-shapes.html#Render](http://poi.apache.org/slideshow/how-to-shapes.html#Render)和代码：

```
FileInputStream is = new FileInputStream("slideshow.ppt");
        SlideShow ppt = new SlideShow(is);
        is.close();

        Dimension pgsize = ppt.getPageSize();

        Slide[] slide = ppt.getSlides();
        for (int i = 0; i < slide.length; i++) {

            BufferedImage img = new BufferedImage(pgsize.width, pgsize.height, BufferedImage.TYPE_INT_RGB);
            Graphics2D graphics = img.createGraphics();
            //clear the drawing area
            graphics.setPaint(Color.white);
            graphics.fill(new Rectangle2D.Float(0, 0, pgsize.width, pgsize.height));

            //render
            slide[i].draw(graphics);

            //save the output
            FileOutputStream out = new FileOutputStream("slide-"  + (i+1) + ".png");
            javax.imageio.ImageIO.write(img, "png", out);
            out.close();
        } 
```

在 ppt 文档中，我只需键入“hello world”，然后我运行 java 程序，并且成功生成了 png 图像。但我用 ACDsee 软件打开图像查看图像，但 png 图像中没有出现“helloworld”。有什么事？这里有人可以给我一些建议吗？您也可以自己测试查看结果，如果您得到相同的结果，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:52:11.297

看来您根本没有对`BufferedImage`. 您只是用白色填充图像并将其保存到文件中。

# iphone - iphone上的阿拉伯语文本到语音

> ID：10871986
> 
> 赞同：1
> 
> 时间：2012-06-03T16:28:29.933
> 
> 标签：iphone, text-to-speech, arabic

是否有任何用于 iphone 的阿拉伯语文本到语音的开源 API？除了[OpenEars](http://www.politepix.com/openears)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:32:09.330

拳头，您在寻找文本到语音或语音识别吗？您在标题中说“文本到语音识别”。就开源而言，我还没有看到任何像样的东西。尝试 CMU，但您可能需要使用数据训练自己的声学模型 - 这不是一件容易的事。

iSpeech 在其免费 SDK 中提供阿拉伯语文本转语音 (TTS)。 [https://www.ispeech.org/developers](https://www.ispeech.org/developers) 我认为他们有阿拉伯语语音识别，但我在文档中找不到它......你可以随时问。

谷歌是一个选择，但谁知道他们什么时候会开始像他们现在使用翻译 API 那样收取每百万字符 20 美元的费用。

# regex - Perl 中的正则表达式来检查匹配/匹配

> ID：10871988
> 
> 赞同：-1
> 
> 时间：2012-06-03T16:28:55.550
> 
> 标签：regex, perl, unix, pattern-matching, regular-language

我有很大的麻烦。

我必须检查一个字符串是否与 RegEx 匹配（匹配）另一个字符串。例如，给定以下字符串：

```
Apr 2 13:42:32 sandbox izxp[12000]: Received disconnect from 10.11.106.14: 10: disconnected by user 
```

在可编辑的输入字段中，我给程序以下缩短的字符串：

```
Received disconnect from 10.11.106.14: 10 
```

如果它适合现有的字符串（如您在上面看到的），那就可以了。如果新编辑的字符串的任何部分不适合原始字符串，我必须用一条消息警告用户。

你能帮我用正则表达式解决这个问题吗？还是另一种方法？我会很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:00:14.793

您必须在变量中获取原始字符串，我们称它为 $original（这是 perl）。然后你必须从“可编辑输入域”中获取输入，我们称之为$input。

然后就是一个简单的

```
if ($original=~/$input/)
{
   #Your code for a message to the user here 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:57:33.593

您的解决方案将更少的正则表达式和更多的转义。假设您将不使用正则表达式模式并且只搜索输入字符串文字，您应该编写您的函数以使其变为

`Received disconnect from 10.11.106.14: 10`

进入这个

`Received disconnect from 10\.11\.106\.14: 10`

这可以通过许多不同的库来实现，具体取决于您使用的语言。

[这将允许您检查匹配项](http://regexr.com?3159h)。

正则表达式更多地是为字符串中的常见*模式*设计的，而不是寻找精确的文字。

# html - HTML5 画布的替代内容

> ID：10871993
> 
> 赞同：1
> 
> 时间：2012-06-03T16:29:17.273
> 
> 标签：html, canvas, fallback

简单的问题：如果我有类似的设置`<canvas><img src="alternative.png" /></canvas>`，那么不支持的浏览器`<canvas>`将加载图像。`<canvas>`问题是，即使图像永远不会显示，是否支持加载图像的浏览器？还是会简单地忽略标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:42:53.900

是的，他们这样做。[甚至可以在`canvas`自身](http://jsfiddle.net/robertc/HnHjT/)的后备内容中显示图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T09:34:49.280

画布子 DOM 中的内容并不是真正的后备内容，因为当浏览器支持画布时，辅助技术用户可以访问它，如果子 DOM 中包含可聚焦的交互式内容，那么它将包含在默认选项卡顺序中，并且用户可以使用键盘激活它。[Firefox 13 中的 HTML5 Canvas Accessibility 中](http://www.paciellogroup.com/blog/2012/06/html5-canvas-accessibility-in-firefox-13/)提供了有关此操作的详细信息、示例和视频

# javascript - 制作没有下拉列表的可滚动列表

> ID：10871995
> 
> 赞同：3
> 
> 时间：2012-06-03T16:29:20.627
> 
> 标签：javascript, jquery, html

我想在登录页面和主页之间制作一个过渡页面。

该页面只包含名称列表......所以，我不想让它成为一个下拉列表......我希望页面填充一个可滚动的列表。

我尝试制作一个带有一些按钮的 div，但它看起来不太好。那么，您对如何使页面看起来更好，或者我是否应该在彼此内部使用 2 个 div 并使用 CSS 修改它们有什么想法吗？

这就是我所做的：JS：

```
function GetClassesList(data) {
var classes = (typeof data) == 'string' ? eval('(' + data + ')') : data;
$('#ClasssesList').empty();
for (var i = 0; i < classes.length; i++) {
    var text = '<button class="BigDiv" value="' + classes[i].Cls_ID + '" >' + classes[i].Cls_Name + '</button>';
    $('#ClasssesList').append(text);
}
$("#ClasssesList").bind('click', 'button.BigDiv',CallLink()); 
} 
```

HTML：

> ```
>  <div id="ClasssesList" ></div> 
> ```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:59:32.720

看起来您的代码工作正常......如果我理解正确，您可以定义 #ClassesList 的高度和宽度并将溢出设置为在 CSS 中滚动。然后，当您在 for 循环中格式化 html 时，您可以将按钮格式化为您想要的显示方式。

我不明白你在寻找什么。也许如果你能澄清一点。

# javascript - 使用 JavaScript 更新 URL 不起作用

> ID：10871996
> 
> 赞同：0
> 
> 时间：2012-06-03T16:29:23.983
> 
> 标签：javascript, href

我正在尝试使用另一个标签更改某些标签的 url。无法让它工作。请帮忙。

这是我的代码：

```
<a href="#" rel="wd" onclick="updateUrl('wd')">Category</a>

<a id="test" href="index.php?path=portfolio/web" class="thumbnail"><img src="img.jpg"></a>

<script type="text/javascript">
function updateUrl(newUrl)
{
    document.links["test"].href .= newUrl;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:31:24.713

```
document.links['test'].href += newUrl; 
```

# iphone - 向 UIWebView iOS 添加下拉刷新功能

> ID：10871999
> 
> 赞同：3
> 
> 时间：2012-06-03T16:29:34.817
> 
> 标签：iphone, xcode, ios5, uiwebview, refresh

我正在寻找向我在应用程序中拥有的 UIWebView 添加 Pull to refresh 功能。我过去曾使用 Pull 刷新表格视图，但我很难找到任何好的教程/库来帮助我将其添加到 UIWebViews 和这个项目中。

我确实通过 chpwn ( [https://github.com/chpwn/PullToRefreshView](https://github.com/chpwn/PullToRefreshView) ) 获得了一些使用 PullToRefreshView 的方法，但我无法让它检测到阻力。有谁知道更好的插件/库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:31:17.120

对我来说，这篇文章和代码就像一个魅力

[http://sonnyparlin.com/2011/12/pullorefresh-ios-5-and-arc-tutorial/](http://sonnyparlin.com/2011/12/pulltorefresh-ios-5-and-arc-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T23:50:02.260

我是 iOS 开发的新手，所以这可能不是最好的方法……但它对我有用。

我使用了包装我的 WebView 的控制器，并将其更改为 UITableViewController（之前它只是一个 UIViewController），以便我可以利用该控制器的 refreshControl 属性（ios6 及更高版本）。我没有使用 UITableViewController 内部的 TableView（虽然，它似乎确实需要一个存在，我包括在内，但我只是不填充它）。我向控制器添加了 2 种方法：

```
- (void)addPullToRefresh
{
    UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    refreshControl.attributedTitle = [[NSAttributedString alloc] initWithString:@"Pull to Refresh"];

    [refreshControl addTarget:self.myWebView action:@selector(reload)
      forControlEvents:UIControlEventValueChanged];
    self.refreshControl = refreshControl;
}

- (void)stopRefresh 
{
    [self.refreshControl endRefreshing];
} 
```

我打电话给 [self addPullToRefresh]; 在 viewDidLoad 中，我添加了对 [self stopRefresh] 的调用；在 webViewDidFinishLoad 中：

我在这里得到了关于如何使用 UITableViewController 的 refreshControl 属性的[说明](http://www.techrepublic.com/blog/software-engineer/better-code-implement-pull-to-refresh-in-your-ios-apps/)。