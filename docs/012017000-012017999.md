# StackOverflow 问答 12017000-12017999

# node.js - Node.js - 使用 require 在模块之间共享套接字

> ID：12017001
> 
> 赞同：0
> 
> 时间：2012-08-18T08:05:36.943
> 
> 标签：node.js, loops, dependencies, socket.io, require

我正在使用socket.io。在`app.js`我设置它时，每当建立连接时，我都会将新套接字添加到`sockets`数组中。我想在**路由**`sockets`等模块之间共享。但是，也需要**routes**，因此它形成了一个 require 循环。这是代码。**`require()``app.js`**

 ****```
// app.js
var route = require('routes/route')
    , sockets = [];

exports.sockets = sockets;

// route.js
var sockets = require('../app').sockets;  // undefined 
```

如何解决循环？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:10:02.373

您可以在路由文件中完成所有 socket.IO 工作

```
var route = require('routes/route').init(io) 
```

在 routes.js 中

```
var io;
exports.init = function(io) {
  io = io    
} 
```****

# java - Java Applet 编译得很好，但不能运行

> ID：12017004
> 
> 赞同：1
> 
> 时间：2012-08-18T08:05:45.337
> 
> 标签：java, applet

这个 java`Applet`有什么问题，即使我编译它没有问题它也没有运行。

```
import java.applet.*;//Importing java.applet
public class MyApplet extends Applet {
   TextField txt1, txt2;
   public void init(){//Initializing our applet
       txt1 = new TextField(""); //Creates a textfield 'txt1'
       txt2 = new TextField(""); //Creates a textfield 'txt2'
       setBackground(Color.CYAN);//Setting background color to CYAN
       add(txt1); //Adds textfield 'txt1' to your applet
       add(txt2); //Adds textfield 'txt2' to your applet
   }
   public void paint(Graphics obj){//Paint method to display our message
       String s1 =  txt1.getText(); //Fetching data from text field 1.
       String s2 =  txt2.getText(); //Fetching data from text field 2.
       int num1=0, num2 = 0, num3;   //Declaring 3 integer variables    
       num1 = Integer.parseInt(s1); //Parsing the string value of text field 1 to integer
       num2 = Integer.parseInt(s2); //Parsing the string value of text field 2 in integer
       num3 = num1 + num2;       //Performing addition
       String s3 = String.valueOf(num3); //Converting the result from integer to string
       obj.drawString("Result:", 40, 50);
       obj.drawString(s3, 50, 50);//To display the result
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:09:59.240

我强烈怀疑 a`NumberFormatException`被抛出。

毕竟，*任何时候小程序试图绘制自己*——包括初始化之后——你都会运行这个代码：

```
// Comments removed as they were more distracting than useful. You really
// *don't* need to comment variable declarations to say they're declarations...
String s1 =  txt1.getText();
String s2 =  txt2.getText();
int num1=0, num2 = 0, num3; 
num1 = Integer.parseInt(s1);
num2 = Integer.parseInt(s2); 
```

因此，当`txt1.getText()`返回一个空字符串时，它会在用户有机会键入任何内容之前返回，您将解析该空字符串，这将抛出一个`NumberFormatException`.

我觉得这个小程序的总体设计是不合适的。为什么要使用`drawString`本质上是标签的东西？

我会添加一个或两个`Label`控件 - 一个用于完整文本“结果：”和结果，或者一个用于“结果：”，另一个用于结果。然后您根本不需要覆盖`paint()`- 您可以添加处理程序以应对*文本框内容更改*- 毕竟，这是您唯一需要更改任何内容的时间。

然后，您应该将`Integer.parseInt`调用放入 try/catch 块中，捕获`NumberFormatException`. （您也可以考虑使用 a`NumberFormat`而不是`Integer.parseInt`，但您可以稍后再做...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:52:28.990

问题出在：

```
txt1 = new TextField("");
txt2 = new TextField(""); 
```

作为

```
String s1 =  txt1.getText(); 
String s2 =  txt2.getText();
num1 = Integer.parseInt(s1);
num2 = Integer.parseInt(s2); 
```

将无法解析`""`，并且会`throw exception`按照 Jon Skeet 的解释。

所以**修复**可能是一个`try catch`块（异常处理）：

```
try{
    num1 = Integer.parseInt(s1);
    num2 = Integer.parseInt(s2);
   }catch(NumberFormatException ex){
       System.out.println(ex);
   } 
```

或者有一些初始的可解析`String`值

```
txt1 = new TextField("0"); 
txt2 = new TextField("0"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:30:56.683

主要问题是无法正确绘制琴弦。`paint`在您有任何输入之前，applet 会多次调用该方法。因此，文本字段有空字符串。这是因为一个`NumberFormatException`. 检查文本是否有空值。如果您解析数字添加`try/catch`块。此外，将逻辑移至方法`calculate`并`repaint`在您进行输入时启动它。如果您向文本字段添加一些侦听器，则可能会发生这种情况。

```
import java.applet.*;
import java.awt.*;
import java.awt.event.TextEvent;
import java.awt.event.TextListener;//Importing java.applet
public class MyApplet extends Applet
{
  TextField txt1, txt2;
  String s3;
  public void init()//Initializing our applet
  {
    txt1 = new TextField(""); //Creates a textfield 'txt1'
    txt2 = new TextField(""); //Creates a textfield 'txt2'
    txt1.addTextListener(new TextListener(){
      public void textValueChanged(TextEvent e) {
        calculate();
      }
    });
    txt2.addTextListener(new TextListener(){
      public void textValueChanged(TextEvent e) {
        calculate();
      }
    });
    setBackground(Color.CYAN);//Setting background color to CYAN
    add(txt1); //Adds textfield 'txt1' to your applet
    add(txt2); //Adds textfield 'txt2' to your applet
  }

  void calculate(){
    try {
      String s1 =  txt1.getText(); //Fetching data from text field 1.
      String s2 =  txt2.getText(); //Fetching data from text field 2.
      int num1=0, num2 = 0, num3;  //Declaring 3 integer variables
      num1 = Integer.parseInt(s1); //Parsing the string value of text field 1 to integer
      num2 = Integer.parseInt(s2); //Parsing the string value of text field 2 in integer
      num3 = num1 + num2;          //Performing addition
      s3 = String.valueOf(num3); //Converting the result from integer to string
      repaint();
    } catch (NumberFormatException nfe){}

  }
  public void paint(Graphics obj)//Paint method to display our message
  {
    super.paint(obj);
    obj.drawString("Result:", 100, 100);
    if (s3 != null)
      obj.drawString(s3, 150, 100);//To display the result
  }
} 
```

# javascript - 我无法使平滑滚动滑块在我的网站上工作

> ID：12017017
> 
> 赞同：2
> 
> 时间：2012-08-18T08:08:37.797
> 
> 标签：javascript, jquery, hover, slider, smooth

出于某种原因，我无法让“平滑的 div 滚动”在我的投资组合网站上工作......我想知道是否有明显的我做错了。这是我正在使用的教程的链接： [http ://www.smoothdivscroll.com/#howitworks](http://www.smoothdivscroll.com/#howitworks)

我使用头部演示中提到的顶级代码。

我使用在我标记为“的 div 之间提到的第二个代码，因为这是我希望在“滑块”div 中显示此滑块的位置。

我对插件相当陌生，但我非常坚持希望这个滑块能够工作。

最后，我在我已经设置的 CSS 中使用了最后提到的代码（CSS）。它不起作用，我正在拔头发。我也尝试过使用其他人使用相同滑块的代码，但它不起作用。

请帮忙，我很绝望！我需要完成这个网站:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:39:12.507

这是平滑滚动插件的全功能[演示页面](http://www.smoothdivscroll.com/basicDemo.html)。将以下 html 作为 demo.html 复制并粘贴到您的计算机上：

```
<!DOCTYPE html>
<html>
<head>
<title>jQuery Smooth Div Scroll</title>
<link rel="Stylesheet" type="text/css" href="http://www.smoothdivscroll.com/css/smoothDivScroll.css" />
<style type="text/css">
#scroller {
  width:100%;
  height: 330px;
  position: relative;
}
#scroller div.scrollableArea img {
  position: relative;
  float: left;
  margin: 0;
  padding: 0;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -o-user-select: none;
  user-select: none;
}
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="http://www.smoothdivscroll.com/js/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>
<script src="http://www.smoothdivscroll.com/js/jquery.mousewheel.min.js" type="text/javascript"></script>
<script src="http://www.smoothdivscroll.com/js/jquery.smoothdivscroll-1.2-min.js" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function() {
    $("#scroller").smoothDivScroll({
      mousewheelScrolling: true,
      manualContinuousScrolling: true,
      visibleHotSpotBackgrounds: "always",
      autoScrollingMode: "onstart"
    });
  });
</script>
</head>

<body>
  <div id="scroller">
    <img src="http://www.smoothdivscroll.com/images/demo/field.jpg" alt="Demo image" id="field" />
    <img src="http://www.smoothdivscroll.com/images/demo/gnome.jpg" alt="Demo image" id="gnome" />
    <img src="http://www.smoothdivscroll.com/images/demo/pencils.jpg" alt="Demo image" id="pencils" />
    <img src="http://www.smoothdivscroll.com/images/demo/golf.jpg" alt="Demo image" id="golf" />
    <img src="http://www.smoothdivscroll.com/images/demo/river.jpg" alt="Demo image" id="river" />
    <img src="http://www.smoothdivscroll.com/images/demo/train.jpg" alt="Demo image" id="train" />
    <img src="http://www.smoothdivscroll.com/images/demo/leaf.jpg" alt="Demo image" id="leaf" />
    <img src="http://www.smoothdivscroll.com/images/demo/dog.jpg" alt="Demo image" id="dog" />
  </div>

</body>
</html> 
```

现在在浏览器中打开这个文件 demo.html（推荐 Firefox 或 Chrome :)），进入主菜单 > `Save Page As`> 选择`Web Page Complete`（demo2.html），浏览器将保存所有依赖项（它需要的库）并将所有绝对转换为本地硬盘上的相对链接。我想这是让它发挥作用的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:11:52.010

我想热链接到我服务器上的脚本只是为了测试是可以的，但不要将这些链接用于您的永久解决方案。

如果您[从 GitHub 下载最新版本的 zip，](https://github.com/tkahn/Smooth-Div-Scroll/zipball/master)我已经包含了一个测试页面，您应该能够单击并直接“开箱即用”运行。如果您想在本地运行演示，这是一个更好的解决方案。

# c# - 使 Javascript 代码在页面开始时运行

> ID：12017019
> 
> 赞同：2
> 
> 时间：2012-08-18T08:08:39.890
> 
> 标签：c#, javascript, .net, html

我需要在 Page Start 上运行我的 JavaScript 代码。

```
<body onload="document.getElementById('Label1').style.display = 'none';document.getElementById('Textbox1').style.display = 'none';"> 
```

目前我在 Body Tag 中使用 Onload 属性并使用其中的代码。通过以这种方式使用，代码在整个页面加载后运行，并且需要一些时间才能使标签和文本框消失。

有没有办法在页面加载之前运行此代码？

或者我可以通过其他方式实现这一点？

（我正在使用另一个 JavaScript 函数基于 DropdownList SelectedIndex 使标签和文本框可见和不可见，因此如果我使用 style="display:none" 之类的属性，我无法使用 JavaScript 使它们再次可见）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:15:11.977

加载页面时，您不需要使用 javascript 使您的 html 元素不可见。`visibility:hidden`您可以使用或使用 css 将它们设置为不可见`display:none`，然后使用 javascript 将它们设置为可见，如下所示：

```
document.getElementById("someobject").style.display="block";
OR
document.getElementById("someobject").style.visibility="visible"; 
```

此外，如果您使用的是 jquery，您可以使用

```
$(document).ready(function(){

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T08:16:36.910

使用 jquery 的`$(document).ready(function(){ this is my code; });`

# android - 安卓果冻豆没有Flash播放器插件

> ID：12017020
> 
> 赞同：0
> 
> 时间：2012-08-18T08:08:53.147
> 
> 标签：android, flash

最近我听说Android 最新的Jelly Bean 版本不允许flash player 插件（即所有插件）。但是Adobe 说AIR 仍然活着，他们说要考虑AIR 而不是flash。得知这个消息后，我的脑海中浮现出很多问题。

1.  据我所知，即使 Air 也在 Flash 播放器插件上运行，如果我错了，请纠正我。

2.  如果 Air 应用程序可以在 Android 和 IOS 上运行，那么 Flash 播放器插件显然应该在 Android 上运行。

我对这项技术很好奇，所以请解释一下它是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:49:24.340

Flash player 和 Adob​​e Air 是两个完全不同的东西。

Flash 播放器是一个仅适用于本机浏览器的插件。

Adobe Air 用于开发本机应用程序 Adob​​e Air 提供了一个框架来编写您可以通过 Google Play 发布的 Android 应用程序。

Adobe 已停止仅支持 Flash 播放器插件而不是 Adob​​e Air。这应该只是网站开发人员的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:36:30.550

根据最新公告，

[http://www.redmondpie.com/its-finally-over-adobe-pulls-flash-support-in-android-4.1-jelly-bean-plans-to-withdraw-app-from-play-store/](http://www.redmondpie.com/its-finally-over-adobe-pulls-flash-support-in-android-4.1-jelly-bean-plans-to-withdraw-app-from-play-store/)

[http://www.zdnet.com/adobe-wont-support-flash-on-jelly-bean-1339340588/](http://www.zdnet.com/adobe-wont-support-flash-on-jelly-bean-1339340588/)

他们说 Android 上不再有 Flash 或 Adob​​e AIR。

# php - php在行尾爆炸识别号

> ID：12017021
> 
> 赞同：-1
> 
> 时间：2012-08-18T08:08:57.913
> 
> 标签：php, explode

爆炸有问题，我有简单的文本文件，每一行都以数字结尾。我只想提取行尾号并创建相同数量的子字符串。我尝试使用explode 函数，但无法仅检索字符串编号的结尾。以下是 .txt 文件结构和具有预期结果的代码。

'文本.txt'

a1 bbb ccc 111-111 ddd eee 3
a2 fff ccc (123-12312) 111-111 ddd eee 2
a3 bbb aaa (32 32)111-111 ddd eee 4

```
<?php  
    $file = "C:\\test.txt";  
    $f = fopen($file, "r");  
    while ( $line = fgets($f, 1000) ) {  
        print "<br/>";  
        $pieces = explode(" ", $line);  
        print $line;  
        print "<br/>";  
        print "<\t>";  
        for(i=0; i>=$pieces[5];i++)  
        {  
            print "<br/>";  
            print "<\t>";  
        }  
        print "<br/>";  
     }  
? 
```

输出：
a1

1.  子串
2.  子串
3.  子串

a2
1\. 子字符串
2\. 子字符串

a3
1\. 子串
2\. 子串
3\. 子串
4\. 子串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T08:09:52.237

您要查找的函数称为[end()](http://php.net/manual/en/function.end.php)

> end() 将数组的内部指针前进到最后一个元素，并返回其值。

```
$pieces = explode(" ", $line);
echo end($pieces); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:13:50.527

你也可以只使用[substr()](http://php.net/manual/en/function.substr.php)

`echo substr(trim($line), -1);`

我会这样做：

```
<?php
$file = "./test.txt";

foreach(file($file) as $lines){
    echo '<ol>'.PHP_EOL;
    $i = 1;
    foreach($parts = explode(' ',trim($lines)) as $key=>$line){
        if($key == 0){echo "\t<p>".$line.'</p>'.PHP_EOL;}
        if($key >= 1 && $key <= end($parts)){echo  "\t<li>".$line.'</li>'.PHP_EOL;}
        $i++;
    }
    echo '</ol>'.PHP_EOL;
}
/* Result
<ol>
    <p>a1</p>
    <li>bbb</li>
    <li>ccc</li>
    <li>111-111</li>
</ol>
<ol>
    <p>a2</p>
    <li>fff</li>
    <li>ccc</li>
</ol>
<ol>
    <p>a3</p>
    <li>bbb</li>
    <li>aaa</li>
    <li>(32</li>
    <li>32)111-111</li>
</ol>

*/
?> 
```

# jquery - 将 div 流到屏幕中

> ID：12017023
> 
> 赞同：1
> 
> 时间：2012-08-18T08:09:05.013
> 
> 标签：jquery, css

我需要根据检测到的屏幕（流程）使用 div 管理屏幕下方

我尝试使用 flot:left 和 div 的 clear 属性无法得到我想要的。

提前致谢。

![在此处输入图像描述](../Images/a8bf8b7074c2ec561b1850afe891a50f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:48:40.203

消除创建这样一个复杂布局的所有痛苦的方法是使用某种使用网格系统并支持响应式布局的 CSS 框架。

最重要的是，如果您选择了一个好的框架，他们将解决您在尝试生成这样的响应式设计时遇到的所有奇怪的跨浏览器问题。

[您提供的上述示例使用Twitter Bootstrap](http://twitter.github.com/bootstrap/)生成相对简单。我建议对此进行调查。

# wcf - WCF回调生成接口

> ID：12017031
> 
> 赞同：0
> 
> 时间：2012-08-18T08:10:54.893
> 
> 标签：wcf, wcf-client

.NET 框架 3.5。在服务器端，我有一个接口

```
public interface IClientCallback
{
    [OperationContract(IsOneWay = true)]
    void ReceiveBroadcast(string nickname, string message);

    [OperationContract(IsOneWay = true)]
    void ReceivePrivate(string nickname, string message);

    [OperationContract(IsOneWay = true)]
    void UserJoined(string nickname);

    [OperationContract(IsOneWay = true)]
    void UserLeft(string nickname);
} 
```

使用 svcutil 我生成了以下界面

```
public interface IServerCallback
{

    [System.ServiceModel.OperationContractAttribute(IsOneWay=true, Action="http://tempuri.org/IServer/ReceiveBroadcast")]
    void ReceiveBroadcast(string nickname, string message);

    [System.ServiceModel.OperationContractAttribute(IsOneWay=true, AsyncPattern=true, Action="http://tempuri.org/IServer/ReceiveBroadcast")]
    System.IAsyncResult BeginReceiveBroadcast(string nickname, string message, System.AsyncCallback callback, object asyncState);

    void EndReceiveBroadcast(System.IAsyncResult result);

    [System.ServiceModel.OperationContractAttribute(IsOneWay=true, Action="http://tempuri.org/IServer/ReceivePrivate")]
    void ReceivePrivate(string nickname, string message);

    [System.ServiceModel.OperationContractAttribute(IsOneWay=true, AsyncPattern=true, Action="http://tempuri.org/IServer/ReceivePrivate")]
    System.IAsyncResult BeginReceivePrivate(string nickname, string message, System.AsyncCallback callback, object asyncState);

    void EndReceivePrivate(System.IAsyncResult result);

    [System.ServiceModel.OperationContractAttribute(IsOneWay=true, Action="http://tempuri.org/IServer/UserJoined")]
    void UserJoined(string nickname);

    [System.ServiceModel.OperationContractAttribute(IsOneWay=true, AsyncPattern=true, Action="http://tempuri.org/IServer/UserJoined")]
    System.IAsyncResult BeginUserJoined(string nickname, System.AsyncCallback callback, object asyncState);

    void EndUserJoined(System.IAsyncResult result);

    [System.ServiceModel.OperationContractAttribute(IsOneWay=true, Action="http://tempuri.org/IServer/UserLeft")]
    void UserLeft(string nickname);

    [System.ServiceModel.OperationContractAttribute(IsOneWay=true, AsyncPattern=true, Action="http://tempuri.org/IServer/UserLeft")]
    System.IAsyncResult BeginUserLeft(string nickname, System.AsyncCallback callback, object asyncState);

    void EndUserLeft(System.IAsyncResult result);
} 
```

如您所见，尽管所有操作都是一种方式，但它提供了 End* 和 Begin* 方法。可能是什么原因？我尝试将 AsyncPattern = false 添加到 IClientCallback 方法，但没有结果。

# javascript - 用 javascript 和 JSON 表示法创建“经典”类有什么区别？

> ID：12017033
> 
> 赞同：1
> 
> 时间：2012-08-18T08:11:23.160
> 
> 标签：javascript, json, class

在 Javascript 中有几种创建类的方法。但是我对这两种方式有一些疑问：

```
function MyClass(){

    this.myFun = function(){
        // do stuff
    }
} 
```

和

```
var MyClass = {

    myFun: function(){
        // do stuff  
    }
} 
```

唯一的区别是我不能使用`new`运算符的第二种方式？所以 Json 表示法允许我创建一个静态类或单例类，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T08:53:43.060

您显示的代码不会创建*classes*。javascript的概念`class`是未知的，它使用[原型继承](http://javascript.crockford.com/prototypal.html)。现在至于你的代码。第一段代码代表一个[构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/constructor)。从中，您可以使用关键字派生*实例*- 具有共享属性的 javascript 对象`new`。

```
function MyConstructor(name){
  this.name = name || 'no name yet';
  this.myFun = function(){
     alert(this.name);
  }
}
var instanceA = new MyConstructor('Webman')
   ,instanceB = new MyConstructor;
instanceA.myFun(); //=> 'Webman'
instanceB.myFun(); //=> 'no name yet' 
```

第二段代码创建了一个 javascript 对象。它使用[对象文字](http://answers.oreilly.com/topic/2138-how-to-use-object-literals-in-javascript/)表示法。

```
var mySingleObject = {
    myFun: function(){
        alert('I am single');
    }
};
mySingleObject.myFun(); //=> 'I am single' 
```

Mozilla 开发者网络有一个[不错的页面](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model)，其中有更详细的解释。

使用对象字面量创建对象，一切都是公开的。使用构造函数，可以有私有变量，使用 javascripts[闭包](http://www.javascriptkit.com/javatutors/closures.shtml)机制：

```
function MyConstructor(name){
   var namestring = 'the name property of this instance is: '+ 
                     (name || 'not set'); 
   this.myFun = function(){
     alert(namestring);
   }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T08:24:48.453

一些小的修正。在 JS 中，这些只是类**模拟**——该语言缺乏实际类的形式化概念。而且您的 JSON 表示法实际上是一个 JS 对象 - 这将是您当前拥有的无效 JSON。

您不必使用对象来模拟单例模式。您可以使用如下构造函数执行此操作：

```
function Animal() {
    if (Animal.instance) return Animal.instance;
    Animal.instance = this;
    /* constructor code here */
}
var animal_a = new Animal(); //constructor runs
var animal_b = new Animal(); //singleton instance returns
console.log(animal_a === animal_b); //true 
```

此外，对于您的第一种方法，请注意最好将可重用、可继承的代码放在原型上，而不是为每个实例单独声明。这更快，也更明智 - 原型就是这样做的地方。

```
function Animal() {}
Animal.prototype.method = function() {} 
```

这也避免了区分自己的和继承的属性的问题，在您的代码中，由于您在每个实例上分别声明方法，因此无法做到这一点。

[**编辑**- 回应 OP 关于私人成员的问题]

私有成员被实现为局部变量/函数，这意味着它们在当前闭包之外是不可访问的。

```
function Animal() {
    var private_var = 'foo';
    function private_method = function() { alert('bar'); };
} 
```

公共方法可能（如果您选择）能够获取或设置它们 - 但为了它们自己可以访问这些私有成员，它们必须在构造函数内部声明，而不是在构造函数外部单独声明。

```
function Animal() {
    var private_var = 'foo';
    function private_method = function() { alert('bar'); };
    if (!Animal.prototype.public_method)
        Animal.prototype.public_method = function() {
            alert(private_var);
        };
}
var dog = new Animal();
dog.public_method(); //'foo' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T08:23:01.653

javascript中没有类，javascript是一种原型语言。
没有比观看更快的方法来解释这一点了：[Crockford on JavaScript - Chapter 2: And Then There Was JavaScript](http://www.youtube.com/watch?v=RO1Wnu-xKoY)由 json 之父提供了一个简单的正确解释（以及其他内容）。

祝你好运！！

# jquery - 单选按钮值未传递给 jquery 中的 post 函数

> ID：12017034
> 
> 赞同：0
> 
> 时间：2012-08-18T08:11:28.283
> 
> 标签：jquery, radio-button

我试图从单选按钮中获取价值，比如性别是男性还是女性。我将它存储在值变量中，但是在将它传递给 $.post 时它不起作用？代码片段是 -

```
$(document).ready(function() {
  // Handler for .ready() called.

  $("input:radio[name=gender]").click(function() {
    var value = $(this).val();
    alert (value);
  });
  alert (value);
  $.post("gendersearch.php", {queryString: ""+value+""}, function(data) { // Do an AJAX call
    $('#suggestions').fadeIn(); // Show the suggestions box
    $('#suggestions').html(data); // Fill the suggestions box
  });

}); 
```

如何纠正？问题是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T08:17:49.663

```
$("input:radio[name=gender]").click(function() {
        var value = $(this).val();
        alert (value);
    });
      alert (value); 
```

请检查变量的范围在`value`外部定义它并尝试这样

```
var value = '';
  $("input:radio[name=gender]").click(function() {
            value = $(this).val();
            alert (value);
  });
  alert (value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T08:17:35.210

将`value`变量放在`click`事件之外。

```
$(document).ready(function() {
    // Handler for .ready() called.
    var value = "";
    $("input:radio[name=gender]").click(function() {
        value = $(this).val();
        alert(value);
    });
    alert(value);
    $.post("gendersearch.php", {
        queryString: "" + value + ""
    }, function(data) { // Do an AJAX call
        $('#suggestions').fadeIn(); // Show the suggestions box
        $('#suggestions').html(data); // Fill the suggestions box
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T11:13:13.907

正如建议的那样，您可以通过两种方式执行此操作 -

**第一**

在您的点击函数上方声明`var value = '';`，如下面的代码

```
$(document).ready(function() {
  // Handler for .ready() called.
   var value="";
  $("input:radio[name=gender]").click(function() {
   value = $(this).val();
    alert (value);
  });
  alert (value);
  $.post("gendersearch.php", {queryString: ""+value+""}, function(data) { // Do an AJAX call
    $('#suggestions').fadeIn(); // Show the suggestions box
    $('#suggestions').html(data); // Fill the suggestions box
  });

}); 
```

**第二**

另一种方法是在 click 函数中声明 post 方法

```
 $(document).ready(function() {
      // Handler for .ready() called.

      $("input:radio[name=gender]").click(function() {
        var value = $(this).val();
        alert (value);
 $.post("gendersearch.php", {queryString: ""+value+""}, function(data) { // Do an AJAX call
        $('#suggestions').fadeIn(); // Show the suggestions box
        $('#suggestions').html(data); // Fill the suggestions box
      });
      });
      //alert (value);
    }); 
```

好吧，我认为它是双向的。但是第一个更容易！和更好。

# visual-studio-2010 - Visual Studio 2012 中滚动条上不再有红点

> ID：12017038
> 
> 赞同：6
> 
> 时间：2012-08-18T08:11:46.043
> 
> 标签：visual-studio-2010, visual-studio-2012

在 Visual Studio 2010 中，滚动条上会出现一个红点，指示代码有错误的地方。还有其他消息等的其他颜色点。

但是在安装 Visual Studio 2012 之后，我在任何地方都看不到这个功能，尝试了工具栏选项，无处可寻。

我错过了什么吗？或者微软刚刚删除了这个功能。

**{编辑}**

Visual Studio 2010 示例 ![在此处输入图像描述](../Images/42802c0aacdd46cf8d3e17acf4a8df6a.png)

还有 Visual Studio 2012，这些漂亮的小圆点糖果去哪儿了？ ![在此处输入图像描述](../Images/47d0301ffa785277c934635c3976374b.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-23T06:53:51.310

您在滚动条上看到的点绝对是“生产力电动工具”扩展“增强滚动条”的一个功能。

[关联](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)

有 3 种模式可以增强滚动条，您的屏幕截图显示第一个（默认）模式。

不幸的是，VS2012 似乎没有等价物。或者有人知道像这样改进滚动条的扩展吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T08:18:15.127

您是否有可能使用 jetbrains resharper 工具？这提供了您描述的功能，但我不记得在视觉工作室中看到过它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T08:16:08.870

你有代码错误吗？:P

检查编辑器设置，我很确定它在那里，它可能只是默认关闭。

> 添加代码和构建解决方案时，您可能会在代码中看到不同颜色的波浪下划线（称为波浪线）。这些标记会通知您 Visual Studio 在您的代码中检测到的问题。例如，红色波浪线表示语法错误，蓝色波浪线表示编译器错误，绿色波浪线表示警告，紫色波浪线表示其他类型的错误。例如，它们用于 Visual Basic 中的“粗鲁”编辑，这是在“编辑并继续”期间进行的更改，这将导致编译器错误。

您可以在工具/选项/环境/字体和颜色对话框中查看每个错误和警告曲线的默认颜色。查找语法错误、编译器错误、警告和其他错误。

从这里：http: [//msdn.microsoft.com/en-us/library/efc4xwkb%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/efc4xwkb%28v=vs.110%29.aspx)

# jquery - 将 OpenLayers 地图异步加载到 SharePoint 页面

> ID：12017040
> 
> 赞同：0
> 
> 时间：2012-08-18T08:12:15.330
> 
> 标签：jquery, sharepoint, asynchronous, openlayers

我有一个在 SharePoint 页面上构建的 OpenLayers 地图。一切正常，但地图需要一段时间才能加载，因此会冻结页面的其余部分，直到完成。此地图适用于我们的主页，在我解决此问题之前无法添加。

我已经尝试使用 JQuery .load 和 .ajax 来加载包含所有标记的 html 文件，但是在尝试加载 OpenLayers.js 时，这两者都会引发“访问被拒绝”错误。解决此问题的方法是首先在进行 .load 或 .ajax 调用的 SharePoint 页面中包含所有 .js 文件。使用 .done() 方法，我会将检索到的源代码添加到页面上的占位符 DIV 中。一旦 .done() 方法运行，页面加载将冻结，直到它完成。

我确实明白，一旦 ajax 调用返回响应，它仍然必须将对象添加到占位符 DIV 并将标记和图层构建到 OpenLayers 地图上，从而导致冻结。

我尝试使用 OpenLayers 地图加载 Iframe，但它也会冻结页面，直到它完全加载。

有没有办法在加载到页面之前完全加载 openlayers 地图及其所有组件？可能在另一个窗口？使用网络服务？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:48:31.193

OpenLayers 需要一个 dom 元素（div）来创建地图，因此没有 div 元素就无法创建地图。

我能想到的唯一优化是您加载 OpenLayers 库和在页面底部创建地图的代码，在页面上的所有其他 html 下方。这样，在页面的其余部分加载之前，脚本不会开始执行。这是一个非常普遍的 JavaScript 最佳实践，不仅仅是 OpenLayers。

如果您使用 WebParts 来打包地图并且绝对不能在页面底部有地图，那么您可能必须创建 2 个 WebParts - 一个在要呈现地图的位置呈现 div-elemnt，另一个在导入 OpenLayers 库并运行呈现地图的 javascript。

# entity-framework - EF5 Code first TPH Mapping error using DBSet.Find()

> ID：12017045
> 
> 赞同：0
> 
> 时间：2012-08-18T08:13:56.913
> 
> 标签：entity-framework, repository, unit-of-work, entity-framework-5

使用 Entity Framework 5 Code First 时，按层次结构使用表。这与存储库和工作单元相结合（尝试了几种实现）。我遇到以下错误：

> (34,10)：错误 3032：从第 19、34 行开始映射片段时出现问题：EntityTypes T、T 被映射到表 T 中的相同行。映射条件可用于区分这些类型映射到的行.

我已经使用以下指南解决了这个问题： [Entity Framework 4.3 - TPH mapping and migration error](https://stackoverflow.com/questions/9499702)

这在使用所有记录的一般查找时有效，然后没有错误。

使用时`DBSet<T>.Find(id)`，我收到上述错误消息。

使用时`DBSet<T>.Where(t => t.id == id)`一切正常。

请问有人有解决这个问题的方法吗？

```
public class TDataContext : DbContext
{
    // Models
    public abstract class BaseTrackable
    {
        public DateTime DateModified { get; set; }
    }

    public abstract class ParentClass : BaseTrackable
    {
        public int ParentId { get; set; }
        public string ParentString { get; set; }
    }

    public class Foo : ParentClass
    {
        public string FooString { get; set; }
    }

    public class Bar : ParentClass
    {
        public string BarString { get; set; }
    }

    // Configuration
    public class ParentConfiguration : EntityTypeConfiguration<ParentClass>
    {
        public ParentConfiguration()
        {
            ToTable("Parent");
        }
    }

    public class FooConfiguration : EntityTypeConfiguration<Foo>
    {
        public FooConfiguration()
        {
            Map(m => m.Requires("FooIndicator").HasValue(true));
        }
    }

    public class BarConfiguration : EntityTypeConfiguration<Bar>
    {
        public BarConfiguration()
        {
            Map(m => m.Requires("BarIndicator").HasValue(true));
        }
    }

    public DbSet<ParentClass> Parent { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations
            .Add(new ParentConfiguration())
            .Add(new FooConfiguration())
            .Add(new BarConfiguration());
    }

}

public class Controller
{
    TDataContext _context = new TDataContext();

    // Repository function
    public T GetById<T>(object id) where T : class 
    {
        var dbset = _context.Set<T>();
        return dbset.Find(id);
    }

    public IQueryable<TDataContext.Foo> GetFiltered(Expression<Func<TDataContext.Foo, bool>> filter) 
    {
        var dbset = _context.Set<TDataContext.Foo>();
        return dbset.Where(filter);
    }

    // Final call
    // Which fails..
    public TDataContext.Foo Get(int id)
    {
        return this.GetById<TDataContext.Foo>(id);
    }

    // This works...
    public TDataContext.Foo GetWhere(int id)
    {
        return this.GetFiltered(f => f.ParentId == id).FirstOrDefault();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:29:07.103

不会更好

```
public class FooConfiguration : EntityTypeConfiguration<Foo> 
{ 
    public FooConfiguration() 
    { 
        Map(m => m.Requires("Type").HasValue("Foo")); 
    } 
} 

public class BarConfiguration : EntityTypeConfiguration<Bar> 
{ 
    public BarConfiguration() 
    { 
        Map(m => m.Requires("Type").HasValue("Bar"); 
    } 
} 
```

这样 FooConfiguration 不需要知道任何关于 BarConfiguration 的信息，反之亦然。从 EF 4.3 迁移到 5.0 时我遇到了这个问题，我认为改变的是 EF 5.0 中的鉴别器数据库列不可为空。我认为它们不可为空更有意义，一般来说，每个派生类型只有一个鉴别器列而不是每个类型一个列（就像在 EF 4.3 中那样）

-斯坦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T20:11:11.170

找到了可以部分解决我的问题的东西......

向表格中添加另一个指标时，不再出现错误，例如：

```
public class FooConfiguration : EntityTypeConfiguration<Foo>
    {
        public FooConfiguration()
        {
            Map(m => {
                m.Requires("FooIndicator").HasValue(true);
                m.Requires("BarIndicator").HasValue<short>(1);
            });
        }
    }

    public class BarConfiguration : EntityTypeConfiguration<Bar>
    {
        public BarConfiguration()
        {
            Map(m => {
                m.Requires("BarIndicator").HasValue(true);
                m.Requires("FooIndicator").HasValue<short>(0);
            });
        }
    } 
```

# php - MySQL行名中的php变量

> ID：12017047
> 
> 赞同：0
> 
> 时间：2012-08-18T08:14:09.363
> 
> 标签：php, mysql

我有一个结构数据库

```
TableName | Row1 | Row2 | Row3 ...etc 
```

我的“行”表列上升得很高，我想尝试查询数据库并使用行名中的变量来返回我的值，但它一直返回 NULL 值，可能是因为它实际上没有返回任何内容

```
<?php
    $connection = mysqli_connect(....);

    $sql = "SELECT * FROM table";
    $result = $connection->query($sql);
    if($result) {
        while($row = $result->fetch_object()) {
            for($i = 1; $i < 5; $i++) {
                echo $row->Row.$i;
            }
        }
    }
?> 
```

我认为这将是代码，但它不像这样工作，目前我将代码设置为

```
for(...
    $myrow = 'Row'.$i;
    echo $row->$myrow;
} 
```

虽然有点草率，但我认为有更好的方法可以做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:19:29.260

也许这就是你的意思：

```
$row->{'Row'.$i}; 
```

不过，不确定我是否正确理解了这个问题，

# android - 为 Android 创建动态壁纸的要求

> ID：12017048
> 
> 赞同：3
> 
> 时间：2012-08-18T08:14:17.740
> 
> 标签：android, andengine

到目前为止，我还没有看到关于创建 Android 动态壁纸的简单教程，可能是因为只有少数人愿意为其创建教程。所以我决定从头开始创建自己的，并且对如何创建动态壁纸知之甚少。也许如果我成为这方面的专家，有一天我可以为所有初学者创建一个关于动态壁纸的教程。嗯，所以我的问题是，我是否必须学习 open gl 才能在 android 中创建一个非常动态的壁纸？对于初学者，我应该跳到那个还是先研究android中的图纸？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T08:52:36.600

动态壁纸上有很多教程。在这里，我发布了其中的一些。

[http://android10.org/index.php/articlesuserinterface/256-live-wallpaper-example](http://android10.org/index.php/articlesuserinterface/256-live-wallpaper-example)

[http://www.vogella.com/articles/AndroidLiveWallpaper/article.html](http://www.vogella.com/articles/AndroidLiveWallpaper/article.html)

[http://mobile.tutsplus.com/tutorials/android/creating-live-wallpapers-on-android/](http://mobile.tutsplus.com/tutorials/android/creating-live-wallpapers-on-android/)

[http://www.rbgrn.net/content/354-glsurfaceview-adapted-3d-live-wallpapers](http://www.rbgrn.net/content/354-glsurfaceview-adapted-3d-live-wallpapers)

# java - Java Prime Number 需要更快

> ID：12017049
> 
> 赞同：0
> 
> 时间：2012-08-18T08:14:32.280
> 
> 标签：java

```
import java.util.*;

public class PrimeNum {
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);     
    int a = input.nextInt();
    int b = input.nextInt();

    for(int i = a ; i <= b ; i++ ) {
        if ( i == 2 || i == 3 ) System.out.println(i);

        for(int j = 2; j <= (i / 2) ; j++ ) {
            if ( (i % j) == 0 ) break;
            if ( j == (i / 2) ) System.out.println(i);
        }
    }

}
} 
```

这个程序很简单，输入 2 int a 和 b。它会在 a 和 b 中找到任何素数。

我怎样才能让它更快？我尝试了 Math.sqrt ，但在这种情况下效果不佳 :( 我真的不知道，因为每当我使用它时，它都会导致很多错误。我希望看到有人在这种情况下使用 Squareroot。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:21:16.383

我同意使用不同方法的建议，但我会尝试解释为什么你的方法不起作用。

我认为问题在于您打印结果的方式：

```
for(int j = 2; j <= (i / 2) ; j++ ) {
    if ( (i % j) == 0 ) break;
    if ( j == (i / 2) ) System.out.println(i);
} 
```

这适用于`i / 2`但它会失败，`Math.sqrt(i)`因为它并不总是一个整数，然后`j == Math.sqrt(i)`永远不会是真的。您的代码仅在`i`是一个精确的正方形时才有效。

最好重构您的代码，以便您的素性测试在一个单独的方法中：

```
boolean isPrime(int i) {
    int s = (int)Math.sqrt(i);
    for (int j = 2; j <= s; j++) {
        if (i % j == 0) { return false; }
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:20:10.843

您可以使用此[http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)算法。它的实施快速且简单。它不完全相同，因为您不能为该算法定义下限 (a)，但您可以在找到从 2 到 b 的所有元素后，只返回 a 和 b 之间的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:30:02.280

只检查奇数怎么样，因为偶数很少是素数......

```
if(a==2) System.out.println(2);
if((a%2)==0) a++;
for(int i = a ; i <= b ; i+=2 ) {
  if(i == 3 ) System.out.println(i);
  int root = (int) Math.sqrt(i);

  for(int j = 2; j <= root ; j+=2 ) {
      if ( (i % j) == 0 ) break;
      if ( j == root ) System.out.println(i);
  }
} 
```

# java - 部分构造的对象

> ID：12017051
> 
> 赞同：0
> 
> 时间：2012-08-18T08:14:39.893
> 
> 标签：java

如果一个对象在其初始化期间对其他线程可见（在进行初始化时可见但尚未完成），这是否可能？如果是，那么您能否举一个简单的例子来支持您的理由？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T08:31:18.773

这可以通过多种方式发生。

*   您将对象传递给构造函数中的另一个线程，例如，您在构造函数中启动一个线程。
*   您将对象传递给另一个线程，但另一个线程看到旧的、未初始化的值，因为这些字段不是最终的或易失的，也不是在锁定或同步的块中访问的。其他字段不保证是线程安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T08:55:47.827

最好的例子是臭名昭著的双重检查锁定习语。我将只从中提取与该论点相关的部分。拿这个代码：

```
public class Holder { public static File f; } 
```

你在线程 A 的某个地方做`Holder.f = new File("path");`，在线程 B 的其他地方做`File xxf = Holder.f;`，然后继续使用它。无法保证，即使您阅读了对 的引用`Holder.f`，实例的任何字段`File`都将处于任何已定义的状态。您可以读取所有空值（零值、假值，取决于类型），甚至是非空值和空值的任何变态组合。

# jasper-reports - 如何设置报表中每页显示的行数

> ID：12017054
> 
> 赞同：0
> 
> 时间：2012-08-18T08:14:56.323
> 
> 标签：jasper-reports

如何使用 JasperReports 设置报表中每页显示的行数。我使用 java bean 作为数据源。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-18T08:42:32.317

没有设置每页行数的特定选项。但是，您可以设置一个条件，即在以下情况下生成一个新页面

$V{REPORT_COUNT} == $P{SOME_NUMBER}

其中 SOME_NUMBER 是您设置的参数，REPORT_COUNT 是保存当前处理的记录数的内置变量。这可以设置为页面主要详细信息带上的 printWhenExpression 属性。

# image - 在我的网站中自定义显示图像

> ID：12017057
> 
> 赞同：0
> 
> 时间：2012-08-18T08:15:44.837
> 
> 标签：image, web

当您在 Firefox 中右键单击图像并单击 时`Display image`，它会显示它。而在它的周围，则是一片黑色的背景。

我可以用自己的背景图片代替黑色背景吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:43:01.783

否 - 您正在输入您无法控制的浏览器级功能。

无论如何，您真的不希望用户不得不诉诸于此。您是否尝试单独显示图像？在这种情况下，创建您自己的“图像视图”页面或将其显示在灯箱或其他东西中。

# java - java多线程性能扩展

> ID：12017062
> 
> 赞同：1
> 
> 时间：2012-08-18T08:16:28.073
> 
> 标签：java, multithreading, scalability, cpu, procedural-generation

你能给我解释一下这个废话吗？我有一个基本上用数学运算填充数组的方法。不涉及 I/O 或任何东西。现在，这个方法运行大约需要 50 秒，并且代码是完全可扩展的（理论上 100%），所以我把它分成 4 个线程，等待它们完成，然后重新组装 4 个数组。现在，我在四核处理器上运行程序，预计需要大约 15 秒，而实际上需要 58 秒。没错：它需要更长的时间！我看到 cpu 工作 100%，我知道每个线程执行 1/4 的计算，创建线程和重新组装数组总共需要大约 1-2 毫秒。是什么导致了这种性能损失？这段时间cpu到底在做什么？代码： http: [//pastebin.com/cFUgiysw](http://pastebin.com/cFUgiysw)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:19:47.923

除非您不断地创建和终止线程，否则线程开销应该不是问题。四个线程同时运行对调度程序来说没什么大不了的。

正如 Peter Lawrey 所说，内存带宽可能是问题所在。您的 50 秒代码在 Java 引擎上运行，它们都在争夺可用的内存带宽。Java 引擎需要内存带宽来执行您的代码，而您的代码需要它来进行计算。

您编写“完全可扩展”，如果您的代码被编译，就会出现这种情况。由于它在 Java 引擎上运行，因此并非如此。因此，总时间增加 16% 可以看作是一个线程的平滑度与四个内存访问冲突的混乱度之间的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:20:40.087

线程不是那样工作的。

线程仍然是同一进程的一部分（取决于操作系统），因此就操作系统而言 - 1 个进程中的 4 个线程的 CPU 时间将被安排为与 1 个进程中的 1 个线程相同。

此外，由于值如此之少，您不会在开销中看到可伸缩性。在 java 中重新组装数组将是昂贵的。

查看诸如“上下文切换开销”之类的内容-当您尝试将理论映射到实践时，此类内容总是会让您感到困惑：P

我会坚持单线程方式:)

~ 丹

[http://en.wikipedia.org/wiki/Context_switch](http://en.wikipedia.org/wiki/Context_switch)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:23:47.603

打开新线程会产生成本。我认为它不应该长达 8 秒，但这取决于您使用的线程。一些线程需要创建您正在处理的数据的副本以保证线程安全，这可能需要一些时间。这个成本通常被称为开销。如果您正在执行的执行是不可序列化的，例如读取相同的文件或需要访问共享资源，线程可能需要相互等待，这可能需要一些时间，并且在次优条件下，它可能需要比串行执行更多的时间. 我的建议是尝试检查这些不可序列化的事件，如果可能的话，将它们从线程部分中删除。还可以尝试使用较少数量的线程 4 个线程用于 4 个 CPU 并不总是最佳的。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T08:27:27.883

很大程度上取决于您在做什么以及如何分配工作。这个问题有很多可能的原因。

*   最可能的原因是，您正在通过一个线程将 CPU 的所有带宽用于主内存总线。如果您的数据集大于 CPU 缓存，则可能会发生这种情况。尤其是如果您有一些随机访问行为。您可以考虑尝试重用原始数组，而不是采用多个副本来减少缓存流失。
*   您的锁定开销大于性能增益。我怀疑您使用了非常课程锁定，所以这不应该是一个问题。
*   开始停止线程需要很长时间。由于您的代码是多秒的，我也对此表示怀疑。

# c# - 如何让我的 C# 代码识别“ö”？

> ID：12017082
> 
> 赞同：1
> 
> 时间：2012-08-18T08:20:20.190
> 
> 标签：c#, utf-8

如何让我的 C# 代码识别“ö”？

查询的输出很好并且格式化了所有特殊字符都是可见的，但是在代码隐藏中，我不能使用它们进行排序。

例子：

```
if (link.Contains("teborg"))
{
    CountRss++;
    Response.Write("<p class='RssCont'><a href='" + link + "' target='new'><b>" + title + "</b></a><br/>");
    Response.Write(description + "</p>");
} 
```

将给出几个标题为“Göteborg”的结果，但是：

```
if (link.Contains("Göteborg"))
{
    CountRss++;
    Response.Write("<p class='RssCont'><a href='" + link + "' target='new'><b>" + title + "</b></a><br/>");
    Response.Write(description + "</p>");
} 
```

根本不会给出任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:30:03.513

如果您的代码正确呈现链接，则应该对其进行编码，因此不会包含非 ASCII 字符。

根据 url 中单词的位置，您可能需要搜索不同的文本以找到匹配项。

请注意，使用适当的 Uri 类来处理 url 将使生活更轻松。还要确保你有正确编码的链接，以避免页面上的脚本注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:06:17.650

您的代码非常明智且与代码一样好，问题在于数据。这里有四种一般可能性。

第一个是编码问题，但我怀疑情况是否如此，因为你说它渲染没问题，所以我非常怀疑这是问题所在，否则你也会遇到问题。

其二是组成`ö`和`ö`形成之间的冲突`o`。这不太可能，但是将字符串放入 NFC 中`link.Normalize()`会捕捉到这一点。

第三是因为它是一个 URI，它可能是 URI 而不是 IURI 形式。所以它会是`G%c3%b6teborg`（事实上，它可能是`G%C3%b6teborg`，`G%c3%B6teborg`或`G%C3%B6teborg`）。`Uri.UnescapeDataString(link)`使用或任何各种方法对字符串进行转义。这是我打赌的。

第四个是它可以被XML转义（因为它是从RSS来判断使用的名称），在这种情况下`HtmlDecode`应该将其分类为禁止定义其他实体的DTD，HTML的编码是XML的超集。但是，这只有在您使用基于文本而不是基于 XML 的方法解析 RSS 时才有可能，在这种情况下您会遇到更大的问题。如果您使用的是 XmlReader 或 XmlDocument 或任何其他基于 XML 的类，则此解码将在必要时为您完成，所以这不是问题。

因此，到目前为止，第三个似乎最有可能，而且`Uri.UnescapeDataString(link)`似乎最有希望。

You might want a less precise check that case-sensitive exact char for char. Other methods will let you match `göteborg` and `GÖTEBORG` too. There are also some that would e.g. match `goeteborg` (it's common to transliterate `ö` to `oe` in English - this is more often done with German than Swedish but it might still be done). (Matching e.g. the English `Gothenburg` or the Danish `Gøteborg` is a much more involved matter).

# ruby-on-rails - 谁能指导我应该为我的应用程序使用哪个音频播放器？

> ID：12017083
> 
> 赞同：3
> 
> 时间：2012-08-18T08:20:23.533
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, html5-audio, audio-player

我正在 Ruby on Rails 上创建一个应用程序，我想在其中嵌入一个音频播放器来播放播放列表中的歌曲。谁能指导我应该使用哪个音频播放器？

# asp.net-mvc-3 - 如何为实体框架模型使用存储过程？

> ID：12017089
> 
> 赞同：0
> 
> 时间：2012-08-18T08:21:19.660
> 
> 标签：asp.net-mvc-3, entity-framework, stored-procedures

嗨，在我直接从我的数据库中检索和操作数据之前。但这次我使用的是实体数据模型。我的`.edmx`文件中有所有表......我的数据库中有一些用于检索数据的查询，但现在因为我使用的是实体数据模型，所以我不知道如何在我的控制器中调用该过程，因为我在这里使用 MVC 3，任何人都可以告诉我如何使用我的存储过程获取数据或编写类似于我存储的 Linq 查询我的控制器中的程序

这是我的存储过程：

```
 ALTER procedure [dbo].[ProjectReports]
   (
    @ProjectID int,
    @ReleasePhaseID int
   )
   as
   begin
   select distinct projectName,ReleasePhase,
   (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and           
     ReleasePhaseID=a.ReleasePhaseID and
     bugid in (select BugID from BugHistory where [status]='New')) as Newbugs,
     (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and    
     ReleasePhaseID=a.ReleasePhaseID and
     bugid in (select BugID from BugHistory where [status]='Assigned')) as  
     Assignedbugs,
     (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and  
     ReleasePhaseID=a.ReleasePhaseID and
     bugid in (select BugID from BugHistory where [status]='Fixed')) as Fixedbugs,
      (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and
       ReleasePhaseID=a.ReleasePhaseID and
     bugid in (select BugID from BugHistory where [status]='Re-Opened')) as 
Reopenedbugs,
    (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and 
     ReleasePhaseID=a.ReleasePhaseID and
     bugid in (select BugID from BugHistory where [status]='Closed')) as Closedbugs,
     (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and  
     ReleasePhaseID=a.ReleasePhaseID and
     bugid in (select BugID from BugHistory where [status]='Deffered')) as Defferedbugs,
     (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and  
      ReleasePhaseID=a.ReleasePhaseID and
      bugid in (select BugID from BugHistory where [status]='Not a Bug')) as NotaBug
      from Bugs a
      inner join Projects p on p.ProjectId=a.ProjectId
      inner join ReleasePhase Rp on rp.ReleasePhaseID=a.ReleasePhaseID
      where a.ProjectId=@ProjectID and a.ReleasePhaseID=@ReleasePhaseID
     end 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:31:28.247

简单的方法是：

1.  在 VS 设计器中打开您的 .edmx 模型
2.  右键单击并选择“从数据库更新模型...”（类似的东西）
3.  从给定的对话框中选择您的 SP 并点击“完成”
4.  在你的控制器中写：

    ```
     var result = new YourEntitiesName().StoredProcedureName(); 
    ```

# image - 如何判断图像是否为 90% 黑色？

> ID：12017091
> 
> 赞同：1
> 
> 时间：2012-08-18T08:22:05.260
> 
> 标签：image, algorithm, fuzzy-comparison

我以前从未做过图像处理。

我现在需要浏览来自相机的许多 jpeg 图像，以丢弃那些非常暗（几乎是黑色）的图像。

是否有我可以使用的免费库 (.NET)？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T08:26:12.267

[Aforge](http://www.aforgenet.com/)是一个很棒的图像处理库。特别是`Aforge.Imaging`大会。您可以尝试应用阈值过滤器，并使用区域或 blob 运算符并从那里进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T02:06:08.947

我需要做同样的事情。我想出了这个解决方案来标记大部分黑色图像。它就像一个魅力。您可以增强它以删除或移动文件。

```
// set limit
const double limit = 90;

foreach (var img in Directory.EnumerateFiles(@"E:\", "*.jpg", SearchOption.AllDirectories))
{
    // load image
    var sourceImage = (Bitmap)Image.FromFile(img);

    // format image
    var filteredImage = AForge.Imaging.Image.Clone(sourceImage);

    // free source image
    sourceImage.Dispose();

    // get grayscale image
    filteredImage = Grayscale.CommonAlgorithms.RMY.Apply(filteredImage);

    // apply threshold filter
    new Threshold().ApplyInPlace(filteredImage);

    // gather statistics
    var stat = new ImageStatistics(filteredImage);
    var percentBlack = (1 - stat.PixelsCountWithoutBlack / (double)stat.PixelsCount) * 100;

    if (percentBlack >= limit)
        Console.WriteLine(img + " (" + Math.Round(percentBlack, 2) + "% Black)");

    filteredImage.Dispose();
}

Console.WriteLine("Done.");
Console.ReadLine(); 
```

# jquery - jQuery CORS 删除失败

> ID：12017093
> 
> 赞同：2
> 
> 时间：2012-08-18T08:22:52.970
> 
> 标签：jquery, ajax, xmlhttprequest, cors, http-delete

我有两个域：

1.  account.example.org
2.  app.example.org

现在我想做一个`HTTP DELETE`从 app.example.org 到 accounts.example.org/session 的请求。

```
$.ajax({
  url: "http://accounts.example.org/session",
  type: "DELETE"
}); 
```

没什么不同。accounts.example.org 中允许 CORS 的标头是：

```
Access-Control-Allow-Origin: http://app.example.org
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: X-Requested-With, Content-Type 
```

所以 AJAX 调用现在失败并告诉我 CORS 标头有问题......我仔细查看了 AJAX 选项，发现 jQuery 没有直接执行`DELETE`：

```
Request URL:http://accounts.example.org/session
Request Method:OPTIONS
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4
Access-Control-Request-Headers:origin, accept
Access-Control-Request-Method:DELETE
Connection:keep-alive
Host:accounts.example.org
Origin:http://app.example.org
Referer:http://app.example.org/ 
```

有人知道这可能是什么吗？

服务器后端是 node.js，以 express 为框架。

问候

**更新**

我现在可以指定问题：

问题是浏览器在和（和工作）`OPTIONS`之前做了一个请求。这样做是因为浏览器想要在执行实际请求之前检查 CORS 策略。由于某种原因 express 不处理此请求（响应标头为空）。因此浏览器返回 CORS 策略禁止该请求。`PUT``DELETE``GET``POST`

我已经尝试过：

1.  使用 app.use 设置标题
2.  与 app.all
3.  使用 app.options

没有反应。听起来可能有一个错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:28:46.417

它是什么浏览器？我知道它至少可以在 chrome 中使用。这就是 jQuery 主页关于 PUT 和删除的说明。

> "发出请求的类型（"POST" 或 "GET"），默认为"GET"。注意：这里也可以使用其他HTTP请求方法，例如PUT和DELETE，但并非所有浏览器都支持。”

# windows-phone-7 - wp7中的json解析

> ID：12017096
> 
> 赞同：1
> 
> 时间：2012-08-18T08:23:36.133
> 
> 标签：windows-phone-7

我想将我的 Json 字符串显示到 Textblock 中。

我的 C# 代码是：

```
namespace JsonDemo
{
  public partial class MainPage : PhoneApplicationPage
  {
    // Constructor
    public MainPage()
    {
      InitializeComponent();

      WebClient wc = new WebClient();
      wc.DownloadStringAsync(
         new Uri("http://192.168.1.32/test/NadalApp.asmx/GetCityDetails"));
      wc.DownloadStringCompleted +=
         new DownloadStringCompletedEventHandler(
           wc_DownloadStringCompleted);
    }

    void wc_DownloadStringCompleted(object sender,
 DownloadStringCompletedEventArgs e)
    {
        string str = e.Result.Replace("</string>", "");
        str = str.Replace("<?xml version=\"1.0\" encoding=\"utf-8\"?>", "");
        str = str.Replace("<string xmlns=\"http://tempuri.org/\">", "");
        Debug.WriteLine("Web service says: " + str);

    } 
```

我通过网络服务在 e.Result 上获得了我的 json 字符串。现在我如何解析我的字符串并显示文本块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:27:27.600

为 C# 获取 JSON 解析器

[http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:52:06.673

![在此处输入图像描述](../Images/f37a4e2c6ec07396132567fc9cabc350.png) 你好，FaddishWorm 请看这个异常发生的图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T17:40:22.787

转到链接[Json2csharp](http://json2csharp.com/)并将您的 JSON 数据粘贴到那里，它将为您生成合适的 C# 类。将这些类复制到您的项目中，然后使用 JsonConvert 类。

```
var jsonData = JsonConvert.DeserializeObject<RootObject>(json); 
```

# jquery-mobile - 在Android上使用带有Jquery mobile + phonegap的固定页脚

> ID：12017100
> 
> 赞同：0
> 
> 时间：2012-08-18T08:23:55.833
> 
> 标签：jquery-mobile, cordova, footer, fixed

我正在使用 jquery mobile 为 Android 构建一个 phonegap 应用程序，并且在固定页脚方面遇到了一些问题。

请参阅下面的 HTML 代码。

```
<!DOCTYPE HTML>
<html>
<head>
<title>Test</title>
    <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js">
    </script>
    <script type="text/javascript" src="js/jquery-1.7.min.js">
    </script> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />
    <script src="js/jquery.mobile-1.1.1.min.js"> </script>

</head>
<body>
<div data-role="page" id="home">

    <div data-role="header" data-position="fixed"
     data-tap-toggle="false">
        <h1>Test</h1>
    </div><!-- /header -->

    <div data-role="content">   

    <form id="searchform" action="" method="post" onsubmit="return false;"
    data-ajax="false">

        <label for="city" class="select">City</label>
        <select name="city" class="city"></select>

        <label for="city" class="select">City</label>
        <select name="city" class="city"></select>

        <label for="city" class="select">City</label>
        <select name="city" class="city"></select>

        <label for="city" class="select">City</label>
        <select name="city" class="city"></select>

        <label for="city" class="select">City</label>
        <select name="city" class="city"></select>

        <label for="city" class="select">City</label>
        <select name="city" class="city"></select>

        <label for="city" class="select">City</label>
        <select name="city" class="city"></select>

        <label for="city" class="select">City</label>
        <select name="city" class="city"></select>
    </form>

    <script type="text/javascript">
        $('.city').each(function() {
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
            $(this).append("<option>Nagpur</option>");
        });

    </script>
    </div><!-- /content -->

    <div data-role="footer" data-position="fixed"
    data-tap-toggle="false">
        <div data-role="navbar" data-iconpos="left">
            <ul>
                <li><a href="#help" data-icon="info" 
                data-transition="none">Help</a></li>
                <li><a href="#help" data-icon="star"
                 data-transition="none" >Favorites</a></li>
                <li><a href="#help" data-icon="arrow-r"
                 data-transition="none" >Results</a></li>
            </ul>
        </div>
    </div>

</div><!-- /page -->

<div data-role="page" id="help">
    <div data-role="header" data-position="fixed"
         data-tap-toggle="false">
            <h1>Help</h1>
        </div><!-- /header -->

    </div>
</div>  
</body>
</html> 
```

有一个包含多个字段的长表单，包括复选框、单选按钮、选择列表等（此处使用重复的选择列表来模拟）。底部有一个固定的页脚。在桌面浏览器上一切正常。但是当我在装有 Android 2.3 的手机上进行测试时，我观察到了奇怪的行为。假设页脚将选择列表隐藏在下面，如果我单击导航栏上的任何选项卡，则会弹出选择列表，而我希望转换到新页面。这就好像选择列表正在获取单击事件而不是页脚。这对用户来说非常烦人。我已经搜索了谷歌，但没有看到其他地方报告过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:09:48.880

再次更新了解决方案。

```
/* HACK: when clicked on navbar the select list underneath pops up 
    for some reason. So we just hide all content as soon as 
    we click on navbar and then show it whenever we load new page*/

         $(document).bind('pagechange', function(e, data) {
            $('[data-role="content"]').show();
        });

        $(document).bind('tap', function(e) {

            if($("body").data("hold-flag") == true) {
                $("body").data('hold-flag', false);     
                return;
            }

            if($(e.target).closest("[class='ui-btn-inner']").length > 0 ||
                $(e.target).closest("[class~='ui-btn-right']").length > 0 ||
                $(e.target).closest("[class~='ui-btn-left']").length > 0) {
                    $('[data-role="content"]').hide();
            }
        });

        $(document).bind('taphold', function(e) {
            /* set a flag to mark this as a taphold event */        
            /* BIG assumption: a 'tap' event is always fired after a
               taphold event */
            $("body").data('hold-flag', true);      
            e.preventDefault();
            return false;
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:08:14.357

我找到了解决方法。我添加了以下代码。本质上，我正在测试页脚区域是否有点击。如果是，那么我只是隐藏页面的内容。这似乎停止了烦人的弹出选择列表。当然，页面转换完成后必须恢复隐藏的页面内容。我不确定这段代码的可移植性和/或健壮性。希望有经验的开发人员发表评论。

```
 $(document).bind('pagechange', function(e, data) {
                $('[data-role="content"]').show();
                });

        $(document).bind('tap', function(e) {
                /* find the footer for this page*/
                var footer = $(e.target).
                             closest('[data-role="page"]').
                             find('[data-role="footer"]');

                var offset = footer.offset();

                var scroll = e.pageY - e.clientY;
                var pos = offset.top - scroll;

                if(e.clientY > pos) {
                    //click in footer area
                    $('[data-role="content"]').hide();
                }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:30:44.663

简化的“点击”事件处理程序。这现在也处理标题区域中的点击。

```
$(document).bind('tap', function(e) {
        if($(e.target).closest("[data-role='footer']").length > 0 ||
        $(e.target).closest("[data-role='header']").length > 0) {
            $('[data-role="content"]').hide();
        }
}); 
```

# azure-storage - 直接从存储 Blob 中的 URL 上传文件

> ID：12017106
> 
> 赞同：4
> 
> 时间：2012-08-18T08:25:01.877
> 
> 标签：azure-storage

我有一些大文件（其中一个是 10 GB），我想将此文件直接存储在 Windows Azure 存储 (BLOB) 中，而不是在本地下载相同的文件，然后再上传。

有没有办法我们可以只提及 URL 并将其上传到 Azure 存储？

如果服务组合也可以正常工作，任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:42:09.170

是的，你可以这样做。Gaurav 有一篇关于从 S3 复制的精彩帖子，但同样的事情适用于任何可公开访问的 URL： http: [//gauravmantri.com/2012/06/14/how-to-copy-an-object-from-amazon -s3-to-windows-azure-blob-storage-using-copy-blob/](http://gauravmantri.com/2012/06/14/how-to-copy-an-object-from-amazon-s3-to-windows-azure-blob-storage-using-copy-blob/)

# javascript - expressjs：获取请求的网址

> ID：12017111
> 
> 赞同：16
> 
> 时间：2012-08-18T08:26:13.970
> 
> 标签：javascript, node.js, express

我想从请求中获取客户端请求的 url。

目前我使用：

```
var requestedUrl = req.protocol + '://' + req.host + ':3000' + req.url; 
```

这一点都不好。它还遗漏了我需要的 url 片段（#/something）。

有没有办法获得完整的网址？也许在标题之外？

问候

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-18T11:32:52.660

您无法在服务器上获取 url 的片段（哈希部分），它不会被浏览器传输。

> 片段标识符的功能与 URI 的其余部分不同：即，它的处理完全是客户端，没有服务器的参与——当然，服务器通常有助于确定 MIME 类型，而 MIME 类型决定了片段的处理。当代理（例如 Web 浏览器）向 Web 服务器请求资源时，代理将 URI 发送到服务器，但不发送片段。相反，代理等待服务器发送资源，然后代理根据文档类型和分片值处理资源。

来自[维基百科上的片段标识符](http://en.wikipedia.org/wiki/Fragment_identifier)

如果您想获取完整的 URL（没有片段标识符），最好的方法是使用包含端口而不是 req.host 的“主机”标头，但与您当前所做的相同：

```
var requestedUrl = req.protocol + '://' + req.get('Host') + req.url; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-06T23:04:40.150

我经常在我的快递应用程序中添加这样的内容：

```
 app.use(function(req, res, next) {
    req.getRoot = function() {
      return req.protocol + "://" + req.get('host');
    }
    return next();
  }); 
```

现在你有了一个可以按需调用的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T10:38:42.027

恐怕你能做的就这么多了。除非您使用 https，否则您可以将协议假定为 http。正如 Raoul 所说，您在 # server-side 之后无法获得任何东西，那是针对浏览器的

```
 var requestedUrl =  'http://' + req.headers.host + ':3000'  + req.url 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T08:28:15.500

这是你要找的吗？

```
req._parsedUrl.pathname 
```

如果您还没有使用，您应该：

```
var util = require('util'); // core module
console.log(util.inspect(req)); 
```

调试找出那种数据。

# android - 广播接收器不工作

> ID：12017112
> 
> 赞同：0
> 
> 时间：2012-08-18T08:26:31.097
> 
> 标签：android, broadcastreceiver

我有一个`BroadcastReceiver`.

`AndroidManifest.xml`：

```
<!-- When starting calculator-->    
<receiver android:name=".APP_CALCULATOR_class" >
    <intent-filter>
        <action android:name="android.intent.category.APP_CALCULATOR" >
        </action>
    </intent-filter>
</receiver> 
```

`APP_CALCULATOR_class.class`：

```
 package com.startcalcevent.startcalcevent;
    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.widget.Toast;

    public class APP_CALCULATOR_class  extends BroadcastReceiver {
        public void onReceive(Context context, Intent intent) {
            Toast.makeText(context, "Calculator is on" , Toast.LENGTH_LONG).show();
        }
    } 
```

为什么当我打开计算器应用程序时此代码不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:31:04.200

我只会在您发送广播的 Intent 时开始。带有动作 (ACTION_MAIN) 的 App_CALCULATOR 类别意图未广播（使用`sendBroadcast(Intent)`），而是使用作为活动启动`startActivity(Intent);`

# twitter-bootstrap - 如何从 jsfiddle.net 复制代码？

> ID：12017130
> 
> 赞同：0
> 
> 时间：2012-08-18T08:28:49.510
> 
> 标签：twitter-bootstrap, jsfiddle

也许我犯了一个简单的错误，但不能让它从 jsfiddle.net 复制的代码工作。

这是[jsfiddle.net的链接](http://jsfiddle.net/HLKzz/)

这是我正在使用的代码，但由于某种原因引导模式未打开：

```
<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="content-type">
<title> - jsFiddle demo</title>
<script src="http://code.jquery.com/jquery-1.7.1.js" type="text/javascript"></script>
<script src="http://twitter.github.com/bootstrap/1.4.0/bootstrap" type="text/javascript"></script>
<script src="http://twitter.github.com/bootstrap/1.4.0/bootstrap-modal.js" type="text/javascript"></script>
<link href="http://twitter.github.com/bootstrap/1.4.0/bootstrap.css" type="text/css" rel="stylesheet">
<style type="text/css">
button {border: 1px #AAA solid; padding: 4px 10px;}
.hide {display: none;}
</style>
<script type="text/javascript">
//<![CDATA[
$(window).load(function(){
$("a[data-toggle=modal]").click(function() {
var sol_id = $(this).attr('id');
$('#myModal').bind('show', function() {
removeBtn = $(this).find('.danger'), href = removeBtn.attr('href');
removeBtn.attr('href', href.replace(/ref=\d*/, 'ref=' + sol_id));
}).modal({
backdrop: true
});
});
});//]]>
</script>
</head>
<body>
<a id="567" href="#myModal" data-toggle="modal">
<i class="pull-right icon-eye-open"></i>
HTML
</a>
<div id="myModal" class="modal hide fade">
<div class="modal-header">
<button class="close" data-dismiss="modal">×</button>
<h3>Title</h3>
</div>
<div class="modal-body">
<div id="modalContent" style="display:none;"> </div>
</div>
<div class="modal-footer">
<a class="btn danger" href="delete.php?ref=">Yes</a>
<a class="btn secondary" href="javascript:$('#modal-from-dom').modal('hide')">No</a>
</div>
</div>
</body>
</html> 
```

# javascript - 使用 javascript 填充 Codeigniter(form-helper)-dropdown

> ID：12017131
> 
> 赞同：0
> 
> 时间：2012-08-18T08:28:57.017
> 
> 标签：javascript, jquery, codeigniter, drop-down-menu, codeigniter-form-helper

我已经在java脚本中放置了一个循环，并且在循环中，我通过调用一个div来重复创建下拉列表，其中我的codeigniter表单助手下拉列表存在，像这样

```
for(){
var demo = $('<select>').attr('name','id_'+i).html($('#demo_id').html()); 
} 
```

我的 demo_id 是这样的：

```
<div style="display:none;">
<?php echo form_dropdown('sample', $my_var, '', 'id="demo_id"') ?>
</div> 
```

现在我想要这样，每次运行 javascript for 循环时，我希望每个下拉菜单都选择我提供的特定值，例如

```
var demo = $('<select>').attr('name','id_'+i).attr('value',2).html($('#demo_id').html()); 
```

但这只是将 select 的值设置为 2 ，不会用 2 填充下拉列表

我能做些什么 ？

注意：显示下拉列表没有问题，我的 javascript 完美地创建了下拉列表，即 for 循环运行的次数相同，只是我想知道如何填充这些值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:31:44.380

您应该尝试 .val() 函数，而不是 attr，如下所示：

```
var demo = $('<select>').attr('name','id_'+i).html($('#demo_id').html()).val(2); 
```

而且我认为，您的版本不起作用，因为首先您创建了 select 元素，然后您给出了一个 name 属性和一个值，但是此时，您在 select 中没有任何元素。

# ruby-on-rails - 将 PGAdmin3 连接到 Heroku PostgreSQL 专用数据库

> ID：12017132
> 
> 赞同：5
> 
> 时间：2012-08-18T08:29:07.813
> 
> 标签：ruby-on-rails, postgresql, heroku, pgadmin

请为我将数据与方框匹配。以下是`heroku config`在我闪亮的新专用数据库上运行的（经过修正的）结果：

```
=== Config Vars for myapp
DATABASE_URL:                postgres://thinga:thingb@ec2-23-21-119-36.compute-1.amazonaws.com:5432/thingc
GEM_PATH:                    vendor/bundle/ruby/1.9.1
HEROKU_POSTGRESQL_OLIVE_URL: postgres://thinga:thingb@ec2-23-21-119-36.compute-1.amazonaws.com:5432/thingc
HIREFIREAPP_TOKEN:           7965994a31ace96fc5f390longtoken
LANG:                        en_US.UTF-8
MEMCACHE_PASSWORD:           password
MEMCACHE_SERVERS:            mc9.ec2.northscale.net
MEMCACHE_USERNAME:           myapp%40heroku.com
PATH:                        vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin:bin
PGBACKUPS_URL:               https://thing@pgbackups.heroku.com/client
RACK_ENV:                    production
RAILS_ENV:                   production 
```

在我的本地 PGAdmin3 上配置新服务器的字段是：

```
Name
Host
Port
Service
Maintenance DB
Username
Password
Group 
```

什么去哪里？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-18T08:57:35.303

好的：一切都来自数据库 URL。

```
DATABASE_URL:                postgres://thinga:thingb@ec2-23-21-119-36.compute-1.amazonaws.com:5432/thingc

Name: thingc
Host: ec2-23-21-119-36.compute-1.amazonaws.com
Port: 5432
Service
Maintenance DB: thingc
Username: thinga
Password: thingb
Group 
```

# cocoa - 可可隐藏没有停靠栏的菜单栏

> ID：12017134
> 
> 赞同：0
> 
> 时间：2012-08-18T08:29:25.010
> 
> 标签：cocoa, nsapplication

是否可以隐藏菜单栏而不隐藏可可中的码头？就像 Launchpad 一样。

我努力了

```
[[NSApplication sharedApplication] setPresentationOptions:0x04]; 
```

但不幸的是，它不起作用

也许有一些私有API可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:15:49.933

Afaik 没有公共 API。

您还可以注意到，LaunchPad 会显示停靠栏（如果它是隐藏的）。可能有一个私有 API，但我不知道。

# c# - 我想更新我的列表框，但它不起作用

> ID：12017135
> 
> 赞同：0
> 
> 时间：2012-08-18T08:29:25.137
> 
> 标签：c#, winforms

我尝试检索 Form2 中的数据，但它在 Form2 中没有显示任何内容：当我单击更新按钮时，它只显示空白 Form2：

Form1 我正在做：

```
ProductList products = new Prod
          private void button2_Click(object sender, EventArgs e)
    {

        int i = this.lstPerson.SelectedIndex;
            Product product = products[i];
            Form2 frmUpdate = new Form2();
            product = frmUpdate.GetNewProduct();
            products[i] = product;
            products.Add(product);
            FillProductListBox();
        }

    private void FillProductListBox()
    {
        lstPerson.Items.Clear();
        foreach (Product p in products)

            lstPerson.Items.Add(p.GetDisplayText("\t"));

    } 
```

在产品类别中：

```
 public class Product
{
    private string firstname;
    private string lastname;
    private string email;

    public Product()
    {
    }

    public Product(string firstname, string lastname, string email)
    {
        this.Firstname = firstname;
        this.Lastname = lastname;
        this.Email = email;
    }

    public string Firstname
    {
        get
        {
            return firstname;
        }
        set
        {
            firstname = value;
        }
    }

    public string Lastname
    {
        get
        {
            return lastname;
        }
        set
        {
            lastname = value;
        }
    }

    public string Email
    {
        get
        {
            return email;
        }
        set
        {
            email = value;
        }
    }

    public virtual string  GetDisplayText(string sep)
    {
        return Firstname + sep + Lastname + sep + Email;
    }

} 
```

在书类：私人双评等级；私人双分配等级；

```
 public Book()
    {
    }

    public Book(string firstname, string lastname, double assessmentGrade,double assignmentGrade,
        string email) : base(firstname, lastname, email)
    {
        this.AssessmentGrade = assessmentGrade;
        this.AssignmentGrade = assignmentGrade;
    }

    public double AssignmentGrade
    {
        get
        {
            return assignmentGrade;
        }
        set
        {
            assignmentGrade = value;
        }
    }

    public double AssessmentGrade
    {
        get
        {
            return assessmentGrade;
        }
        set
        {
            assessmentGrade = value;
        }
    }

    public override string GetDisplayText(string sep)
    {
        return base.GetDisplayText(sep) + " (" + AssessmentGrade + ")" + AssignmentGrade;
    } 
```

与软件类相同。

在 Form2 中

```
private Product product = null;

    public Product GetNewProduct()
    {
        this.ShowDialog();
        return product;
    }

                 private void btnSave_Click(object sender, System.EventArgs e)
    {
        if (IsValidData())
        {
            if (rbBook.Checked)
                product = new Book(txtName.Text, txtLName.Text,
                    Convert.ToDouble(txtAssessGrade.Text), Convert.ToDouble(txtAssigGrade.Text), txtEmail.Text);
            else
                product = new Software(txtName.Text, txtLName.Text,
            Convert.ToInt32(txtAssessGrade.Text), txtEmail.Text);
            this.Close();
        }
    } 
```

我没有向我展示任何东西，它只是在列表框中添加了更多数据，而不是更新数据，也没有在 Form2 中检索数据。你能告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:33:58.660

```
//in Form2

public partial class Form2 : Form
{
    private Product product = null;
    public Form2()
    {
        InitializeComponent();
    }
    public Product GetNewProduct()
    {
        return product;
    }

    private void btnSave_Click(object sender, System.EventArgs e)
    {
        if (IsValidData())
        {
            if (rbBook.Checked)
            {
                product = new Book(txtName.Text, txtLName.Text,
                    Convert.ToDouble(txtAssessGrade.Text), Convert.ToDouble(txtAssigGrade.Text), txtEmail.Text);
                this.Close();
            }
        }
    }

    private bool IsValidData()
    {
        return true;
    }
}

//Modify in Form1:

       public partial class Form1 : Form
            {
                private ArrayList products = new ArrayList();
                public Form1()
                {
                    InitializeComponent();
                }

                private void button1_Click(object sender, EventArgs e)
                {

                    Form2 frmUpdate = new Form2();
                    frmUpdate.ShowDialog();
                    Product product = frmUpdate.GetNewProduct();
                    products.Add(product);
                    FillProductListBox();

                }
                private void FillProductListBox()
                {
                    lstPerson.Items.Clear();
                    foreach (Product p in products)

                        lstPerson.Items.Add(p.GetDisplayText("\t"));

                }    
            } 
```

# cxf - Jax-Rs 服务没有被调用

> ID：12017137
> 
> 赞同：0
> 
> 时间：2012-08-18T08:29:59.770
> 
> 标签：cxf, jax-rs, tomcat7

我正在使用 Apache CXF 开发 JAX-RS Rest 服务。将其部署到 Tomcat 7 服务器后，如果我键入 URL `http://localhost:8080/Rest/rest?_wadl`，它会显示 WADL。但如果我输入 URL `http://localhost:8080/Rest/rest/retrieve`，它会给我 404 错误。

在上面的 URL 中：`Rest`是我的项目的名称是我 `/rest`的 url 模式，`CXFServlet`其中指定`web.xml` `/`的地址`jaxrs:server`是指定的地址，是在我的接口中指定的带有注释`beans.xml` `retrieve`的服务路径。`@Path`

（抱歉：我无法提供上述 XML 文档。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:00:23.027

我认为这是一个 CXF 错误，它为安静的 Web 服务获取了不正确的基本 URL。

类“org.apache.cxf.transport.servlet.ServletController”调用类“org.apache.cxf.transport.servlet.BaseUrlHelper”的方法[“getBaseURL](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.cxf/cxf-rt-transports-http/2.6.2/org/apache/cxf/transport/servlet/BaseUrlHelper.java#BaseUrlHelper.getBaseURL%28javax.servlet.http.HttpServletRequest%29) ”。

它从请求 URL 中获取基本 URL，并忽略参数部分。这对于 SOAP Web 服务是正确的，因为 SOAP Web 服务 URL 就像：`http://host:port/basepath?para=a`。不幸的是，对于 RESTful Web 服务，URL 就像`http://host:port/basepath/method/parameter`. 正确的基本 URL 应该是`http://host:port/basepath`，但实际上，BaseUrlHelper 为您提供了`http://host:port/basepath/method/parameter`. 它只是在“？”之前给出 URL。这就是为什么当你访问时结果是正确的`http://localhost:8080/Rest/rest?_wadl`，在这种情况下，它给出了正确的基本 URL `http://localhost:8080/Rest`。

如果您`http://localhost:8080/Rest/rest?_wadl`先访问然后访问`http://localhost:8080/Rest/rest/retrieve`，那将是正确的。因为，CXF 只是在第一次时才将 Base URL 设置为 EndpointInfo 的地址。这意味着，您必须在第一时间访问正确的基本 URL！:(

解决方法是：覆盖“org.apache.cxf.transport.servlet.ServletController”的方法[“getBaseURL(HttpServletRequest request)”](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.cxf/cxf-rt-transports-http/2.6.2/org/apache/cxf/transport/servlet/ServletController.java#ServletController.getBaseURL%28javax.servlet.http.HttpServletRequest%29)，让它返回正确的base URL。

例如，第 1 步：扩展 ServletController。

```
public class RestfulServletController extends ServletController {
    private final String basePath;

    public RestfulServletController(DestinationRegistry destinationRegistry, ServletConfig config,
            HttpServlet serviceListGenerator, String basePath) {
        super(destinationRegistry, config, serviceListGenerator);
        this.basePath = basePath;
    }

    @Override
    protected String getBaseURL(HttpServletRequest request) {
        // Fixed the bug of BaseUrlHelper.getBaseURL(request) for restful service.
        String reqPrefix = request.getRequestURL().toString();
        int idx = reqPrefix.indexOf(basePath);
        return reqPrefix.substring(0, idx + basePath.length());
    }
} 
```

step2：扩展CXFNonSpringServlet，在子类中使用RestfulServletController

```
public class RestfulCXFServlet extends CXFNonSpringServlet {
    ... ...
    private ServletController createServletController(ServletConfig servletConfig) {
        HttpServlet serviceListGeneratorServlet = new ServiceListGeneratorServlet(destinationRegistry, bus);
        ServletController newController = new RestfulServletController(destinationRegistry, servletConfig,
            serviceListGeneratorServlet, basePath);
        return newController;
    }
} 
```

step3：使用派生类 RestfulServletController 代替 CXFNonSpringServlet。不要忘记，您应该将“basePath”配置为 /Rest/rest。

希望这可以帮到你。

# javascript - 蚀。添加文件而不将其复制到工作区中

> ID：12017139
> 
> 赞同：0
> 
> 时间：2012-08-18T08:29:59.870
> 
> 标签：javascript, html, css, eclipse

我想`www`将 wamp 文件夹中的整个文件夹加载到 Eclipse 项目中，然后从这里开始处理。我创建了一个`Static Web Project`并尝试从那里的文件夹中导入文件`www`，但它只是复制了这些文件。我如何`www`在 Eclipse 中打开所有文件，所以我在 IDE 中所做的任何更改都会显示在文件`www`夹中的文件中。我敢肯定这很简单，但似乎在一天中的这个时候，我真的不在了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:32:36.093

如果您尝试在 Eclipse 中创建 Linked 文件夹，这应该是可能的。

看看**[这个](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/tasks/tasks-45.htm)**。

**更新**

此外，执行此操作的步骤（从**[此处](http://www.velocityreviews.com/forums/t151684-how-to-simply-create-an-eclipse-project-and-add-some-existing-java-source-files.html)**）：

```
If you don't want to put your source code in the project, you can
"link" the source code to the project instead. In that case, you should
do the following:

1\. Right-click the project, and choose Properties from the context menu.
2\. Select "Java Build Path" from the left-hand side.
3\. Click the "Source" tab along the top.
4\. Click the "Link Source..." button.
5\. Fill out the dialog box, and click the OK buttons. 
```

# c# - 在 Windows XP 下在 Visual Studio 之外运行应用程序时获取应用程序遇到崩溃发送报告

> ID：12017140
> 
> 赞同：1
> 
> 时间：2012-08-18T08:30:00.067
> 
> 标签：c#, visual-studio, objectlistview

我正在使用 .net 3.5 框架开发磁盘目录应用程序。我使用 ObjectListView 库中的 Objectlistview 和 TreeListView 来表示文件夹结构。应用程序在我的 Windows 7 x64 下运行没有任何问题，但是当我在 VMware 上的 Windows XP 中尝试它时，当我从 Visual Studio 2010 调试它时，应用程序工作没有崩溃，但是当我通过双击直接运行应用程序时，它发生崩溃并告诉我发送错误报告给微软。当我单击 treelistview 中显示的文件夹时发生崩溃。它应该在 objectlistview 中显示文件和文件夹，但每次在某些项目上都会崩溃。在 vs2010 调试会话中单击相同的项目绝对可以正常工作。扩展错误生成项目可以正常工作而不会发生任何崩溃。

我尝试使用 Application.ThreadException 获取异常报告，但它不报告某些项目的异常，而某些报告在 ObjectListView 中出现异常。

```
System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt. 
```

# android - android camera setDisplayOrientation(90) 在不同的设备上失败

> ID：12017148
> 
> 赞同：8
> 
> 时间：2012-08-18T08:31:26.073
> 
> 标签：android, orientation, android-camera

我的相机应用程序有问题。相机活动处于纵向模式。所以我给了

```
camera.setDisplayOrientation(90); 
```

根据 SO 中的不同帖子，这将在纵向模式下正常工作。

但它永远无法在不同的设备上正常工作。问题是，预览向左或向右旋转 90 度。在 Htc 中没关系。但是对于银河系列，它不起作用。

谁能帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-13T11:26:14.070

通过以下不同方式设置方向和预览，按要求使用：

**第一种方法：**

```
 public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)
  {            
    if (isPreviewRunning)
    {
        mCamera.stopPreview();
    }

    Parameters parameters = mCamera.getParameters();
    Display display = ((WindowManager)getSystemService(WINDOW_SERVICE)).getDefaultDisplay();

    if(display.getRotation() == Surface.ROTATION_0)
    {
        parameters.setPreviewSize(height, width);                           
        mCamera.setDisplayOrientation(90);
    }

    if(display.getRotation() == Surface.ROTATION_90)
    {
        parameters.setPreviewSize(width, height);                           
    }

    if(display.getRotation() == Surface.ROTATION_180)
    {
        parameters.setPreviewSize(height, width);               
    }

    if(display.getRotation() == Surface.ROTATION_270)
    {
        parameters.setPreviewSize(width, height);
        mCamera.setDisplayOrientation(180);
    }

    mCamera.setParameters(parameters);
    previewCamera();                      
} 
```

和

```
 public void previewCamera()
  {        
     try 
     {           
          mCamera.setPreviewDisplay(mSurfaceHolder);          
          mCamera.startPreview();
          isPreviewRunning = true;
     }
     catch(Exception e)
     {
         Log.d(APP_CLASS, "Cannot start preview", e);    
     }
 } 
```

**第二种方式：**

```
 private Camera mCamera;
  private OrientationEventListener mOrientationEventListener;
  private int mOrientation =  -1;

 private static final int ORIENTATION_PORTRAIT_NORMAL =  1;
 private static final int ORIENTATION_PORTRAIT_INVERTED =  2;
 private static final int ORIENTATION_LANDSCAPE_NORMAL =  3;
 private static final int ORIENTATION_LANDSCAPE_INVERTED =  4;

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         // force Landscape layout
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR |           ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
   /*
      Your other initialization code here
   */
   }

 @Override 
  protected void onResume() {
       super.onResume();

        if (mOrientationEventListener == null) {            
              mOrientationEventListener = new OrientationEventListener(this,  SensorManager.SENSOR_DELAY_NORMAL) {

        @Override
        public void onOrientationChanged(int orientation) {

            // determine our orientation based on sensor response
            int lastOrientation = mOrientation;

            if (orientation >= 315 || orientation < 45) {
                if (mOrientation != ORIENTATION_PORTRAIT_NORMAL) {                          
                    mOrientation = ORIENTATION_PORTRAIT_NORMAL;
                }
            }
            else if (orientation < 315 && orientation >= 225) {
                if (mOrientation != ORIENTATION_LANDSCAPE_NORMAL) {
                    mOrientation = ORIENTATION_LANDSCAPE_NORMAL;
                }                       
            }
            else if (orientation < 225 && orientation >= 135) {
                if (mOrientation != ORIENTATION_PORTRAIT_INVERTED) {
                    mOrientation = ORIENTATION_PORTRAIT_INVERTED;
                }                       
            }
            else { // orientation <135 && orientation > 45
                if (mOrientation != ORIENTATION_LANDSCAPE_INVERTED) {
                    mOrientation = ORIENTATION_LANDSCAPE_INVERTED;
                }                       
            }   

            if (lastOrientation != mOrientation) {
                changeRotation(mOrientation, lastOrientation);
            }
        }
    };
}
if (mOrientationEventListener.canDetectOrientation()) {
    mOrientationEventListener.enable();
    }
 }

  @Override protected void onPause() {
       super.onPause();
       mOrientationEventListener.disable();
  }

    /**
     * Performs required action to accommodate new orientation
     * @param orientation
     * @param lastOrientation
    */
   private void changeRotation(int orientation, int lastOrientation) {
   switch (orientation) {
    case ORIENTATION_PORTRAIT_NORMAL:
        mSnapButton.setImageDrawable(getRotatedImage(android.R.drawable.ic_menu_camera, 270));
        mBackButton.setImageDrawable(getRotatedImage(android.R.drawable.ic_menu_revert, 270));
        Log.v("CameraActivity", "Orientation = 90");
        break;
    case ORIENTATION_LANDSCAPE_NORMAL:
        mSnapButton.setImageResource(android.R.drawable.ic_menu_camera);
        mBackButton.setImageResource(android.R.drawable.ic_menu_revert);
        Log.v("CameraActivity", "Orientation = 0");
        break;
    case ORIENTATION_PORTRAIT_INVERTED:
        mSnapButton.setImageDrawable(getRotatedImage(android.R.drawable.ic_menu_camera, 90));
        mBackButton.setImageDrawable(getRotatedImage(android.R.drawable.ic_menu_revert, 90));
        Log.v("CameraActivity", "Orientation = 270");
        break;
    case ORIENTATION_LANDSCAPE_INVERTED:
        mSnapButton.setImageDrawable(getRotatedImage(android.R.drawable.ic_menu_camera, 180));
        mBackButton.setImageDrawable(getRotatedImage(android.R.drawable.ic_menu_revert, 180));      
        Log.v("CameraActivity", "Orientation = 180");
        break;
     }
  } 

    /**
   * Rotates given Drawable
   * @param drawableId    Drawable Id to rotate
   * @param degrees       Rotate drawable by Degrees
   * @return              Rotated Drawable
   */
 private Drawable getRotatedImage(int drawableId, int degrees) {
    Bitmap original = BitmapFactory.decodeResource(getResources(), drawableId);
    Matrix matrix = new Matrix();
    matrix.postRotate(degrees);

   Bitmap rotated = Bitmap.createBitmap(original, 0, 0, original.getWidth(),  original.getHeight(),  matrix, true);
  return new BitmapDrawable(rotated);
} 
```

然后在您的 PictureCallback 中设置元数据以指示旋转级别：

```
private Camera.PictureCallback mJpegCallback = new Camera.PictureCallback() {

@Override
public void onPictureTaken(byte[] data, Camera camera) {
    try {
        // Populate image metadata

        ContentValues image = new ContentValues();
        // additional picture metadata
        image.put(Media.DISPLAY_NAME, [picture name]);
        image.put(Media.MIME_TYPE, "image/jpg");
        image.put(Media.TITLE, [picture title]);
        image.put(Media.DESCRIPTION, [picture description]);
        image.put(Media.DATE_ADDED, [some time]);
        image.put(Media.DATE_TAKEN, [some time]);
        image.put(Media.DATE_MODIFIED, [some time]);

        // do not rotate image, just put rotation info in
        switch (mOrientation) {
            case ORIENTATION_PORTRAIT_NORMAL:
                image.put(Media.ORIENTATION, 90);
                break;
            case ORIENTATION_LANDSCAPE_NORMAL:
                image.put(Media.ORIENTATION, 0);
                break;
            case ORIENTATION_PORTRAIT_INVERTED:
                image.put(Media.ORIENTATION, 270);
                break;
            case ORIENTATION_LANDSCAPE_INVERTED:
                image.put(Media.ORIENTATION, 180);
                break;
        }

        // store the picture
        Uri uri = getContentResolver().insert(
                Media.EXTERNAL_CONTENT_URI, image);

        try {
            Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0,
                    data.length);
            OutputStream out = getContentResolver().openOutputStream(
                    uri);
            boolean success = bitmap.compress(
                    Bitmap.CompressFormat.JPEG, 75, out);
            out.close();
            if (!success) {
                finish(); // image output failed without any error,
                            // silently finish
            } 
```

现在，当基于横向的设备出现时，需要在 OrientationEventListener 中对其进行额外检查。

```
 Display display = ((WindowManager)getSystemService(WINDOW_SERVICE)).getDefaultDisplay();                                        
 if (display.getOrientation() == Surface.ROTATION_0) { 
    // landscape oriented devices
 } else { 
     // portrait oriented device
 } 
```

完整代码（LC有点浪费，但很容易演示该方法）

```
 @Override
 public void onOrientationChanged(int orientation) {

// determine our orientation based on sensor response
int lastOrientation = mOrientation;

Display display = ((WindowManager)getSystemService(WINDOW_SERVICE)).getDefaultDisplay();                                        

if (display.getOrientation() == Surface.ROTATION_0) {   // landscape oriented devices
    if (orientation >= 315 || orientation < 45) {
        if (mOrientation != ORIENTATION_LANDSCAPE_NORMAL) {                         
            mOrientation = ORIENTATION_LANDSCAPE_NORMAL;
        }
    } else if (orientation < 315 && orientation >= 225) {
        if (mOrientation != ORIENTATION_PORTRAIT_INVERTED) {
            mOrientation = ORIENTATION_PORTRAIT_INVERTED;
        }                       
    } else if (orientation < 225 && orientation >= 135) {
        if (mOrientation != ORIENTATION_LANDSCAPE_INVERTED) {
            mOrientation = ORIENTATION_LANDSCAPE_INVERTED;
        }                       
    } else if (orientation <135 && orientation > 45) { 
        if (mOrientation != ORIENTATION_PORTRAIT_NORMAL) {
            mOrientation = ORIENTATION_PORTRAIT_NORMAL;
        }                       
    }                       
} else {  // portrait oriented devices
    if (orientation >= 315 || orientation < 45) {
        if (mOrientation != ORIENTATION_PORTRAIT_NORMAL) {                          
            mOrientation = ORIENTATION_PORTRAIT_NORMAL;
        }
    } else if (orientation < 315 && orientation >= 225) {
        if (mOrientation != ORIENTATION_LANDSCAPE_NORMAL) {
            mOrientation = ORIENTATION_LANDSCAPE_NORMAL;
 }                       
    } else if (orientation < 225 && orientation >= 135) {
        if (mOrientation != ORIENTATION_LANDSCAPE_INVERTED) {
            mOrientation = ORIENTATION_LANDSCAPE_INVERTED;
        }                       
    } else if (orientation <135 && orientation > 45) { 
        if (mOrientation != ORIENTATION_PORTRAIT_NORMAL) {
            mOrientation = ORIENTATION_PORTRAIT_NORMAL;
        }                       
    }                       
} else {  // portrait oriented devices
    if (orientation >= 315 || orientation < 45) {
        if (mOrientation != ORIENTATION_PORTRAIT_NORMAL) {                          
            mOrientation = ORIENTATION_PORTRAIT_NORMAL;
        }
    } else if (orientation < 315 && orientation >= 225) {
        if (mOrientation != ORIENTATION_LANDSCAPE_NORMAL) {
            mOrientation = ORIENTATION_LANDSCAPE_NORMAL;
        }                       
    } else if (orientation < 225 && orientation >= 135) {
        if (mOrientation != ORIENTATION_PORTRAIT_INVERTED) {
            mOrientation = ORIENTATION_PORTRAIT_INVERTED;
        }                       
    } else if (orientation <135 && orientation > 45) { 
        if (mOrientation != ORIENTATION_LANDSCAPE_INVERTED) {
            mOrientation = ORIENTATION_LANDSCAPE_INVERTED;
        }                       
    }
 }

  if (lastOrientation != mOrientation) {
    changeRotation(mOrientation, lastOrientation);
  }
 } 
```

**第三种方式：**

```
 private Bitmap adjustImageOrientation(Bitmap image) {
    ExifInterface exif;
    try {
        exif = new ExifInterface(picturePath);
        int exifOrientation = exif.getAttributeInt(
                ExifInterface.TAG_ORIENTATION,
                ExifInterface.ORIENTATION_NORMAL);

        int rotate = 0;
        switch (exifOrientation) {
        case ExifInterface.ORIENTATION_ROTATE_90:
            rotate = 90;
            break;

        case ExifInterface.ORIENTATION_ROTATE_180:
            rotate = 180;
            break;

        case ExifInterface.ORIENTATION_ROTATE_270:
            rotate = 270;
            break;
        }

        if (rotate != 0) {
            int w = image.getWidth();
            int h = image.getHeight();

            // Setting pre rotate
            Matrix mtx = new Matrix();
            mtx.preRotate(rotate);

            // Rotating Bitmap & convert to ARGB_8888, required by tess
            image = Bitmap.createBitmap(image, 0, 0, w, h, mtx, false);

        }
    } catch (IOException e) {
             return null;
    }
    return image.copy(Bitmap.Config.ARGB_8888, true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T09:34:55.863

我对类似问题给出了这个[答案，但正如你所说，它是在 HTC 设备上。](https://stackoverflow.com/questions/3841122/android-camera-preview-is-sideways/5110406#5110406)我建议您在旋转代码中添加断点并在物理旋转设备时检查变量 - 这可能有助于识别 Galaxy 模型的不同之处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-28T13:45:13.023

检查是否在手机设置中选中了“自动旋转屏幕”选项（设置 > 显示或屏幕 - 取决于 android 版本）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-04T03:33:02.007

只是发布一个对我有用的新解决方案。

基本上你可以从Camera.CameraInfo 中获取方向值。这将告诉您需要在**setDisplayOrientation**上使用的度数，以便正确显示图像。使用后置摄像头时，您可以简单地将**setDisplayOrientation**与检索到的值一起使用，但是当使用前置摄像头时，您需要稍微调整一下，因为 Android 系统会翻转图像，使其看起来像一面镜子。

下面的代码对我有用，并在 4 种不同的设备上进行了测试，包括 Nexus6 和 Galaxy。

```
Camera.CameraInfo cameraInfo = new Camera.CameraInfo();
int cameraCount = Camera.getNumberOfCameras();
int camIdx = 0; // DO your logic to get front or back camera...or loop through all avaialable.
Camera.getCameraInfo(camIdx, cameraInfo);

try {
    mCamera = Camera.open(camIdx);
    // If using back camera then simply rotate what CameraInfo tells you.
    if (cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_BACK)
        mCamera.setDisplayOrientation(cameraInfo.orientation);
    else
        // If using front camera note that image might be flipped to give users the impresion the are looking at a mirror.
        mCamera.setDisplayOrientation( (360 - cameraInfo.orientation) % 360);
} catch (Exception e) {
    e.printStackTrace();
} 
```

# php - 如何在 php 中转义换行符以输出到 javascript 字符串值？

> ID：12017160
> 
> 赞同：3
> 
> 时间：2012-08-18T08:33:31.973
> 
> 标签：php, javascript

我提取了一些需要插入到 javascript 变量中的 html/文本字符串。

例如，这就是它在 php 中的样子：

```
echo "<script type=\"text/javascript\">\n";
echo "var myvar='{$value}'";
echo "\n</script>"; 
```

上述方法的问题是某些特殊字符实际上会破坏 javascript 代码。

所以，我尝试使用 htmlspecialchars：

```
htmlspecialchars($value,11,'utf-8',true); //11 stands for ENT_QUOTES|ENT_SUBSTITUTE 
```

这确实取代了一些不寻常的字符，最重要的是引号。

然而，新的行字符通过它并破坏了我的 javascript。

那么我怎么能逃脱新的换行符呢？我需要保留它们以便稍后在 textareas 中使用。

****编辑****我将发布我的变量的示例值。（它们实际上是 Tiny_mce 的输入）

```
 <p>You've been...</p>
 <p><iframe src="http://www.youtube.com/embed/8d7OBluielc?wmode=transparent" frameborder="0" width="640" height="360"></iframe></p> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T08:43:13.973

```
<script type="text/javascript">
    var myvar = <?php echo json_encode($value); ?>;
</script> 
```

JSON == Javascript 表示法 == 任何输出到 Javascript 的值的正确编码/转义方法。

# scala - 如何在不使用 onComplete 嵌套的情况下链接 Future 的客户端请求？

> ID：12017161
> 
> 赞同：1
> 
> 时间：2012-08-18T08:33:45.527
> 
> 标签：scala, spray

我需要查询一个总是返回 JSON 响应的 RESTful 服务。我需要联系它几次，总是提供一些我从之前的请求中学到的更多信息。我正在使用 Akka2、Scala、Jerkson 和 Spray-Can。

我目前的方法似乎有效，但它看起来很难看，需要嵌套所有内容。我读到应该有一些关于链接等的技术可用，但我不知道如何将它们应用于我当前的用例。

这是我正在谈论的代码：

```
def discoverInitialConfig(hostname: String, bucket: String) = {

    val poolResponse: Future[HttpResponse] = 
      HttpDialog(httpClient, hostname, 8091)
      .send(HttpRequest(uri = "/pools"))
      .end

    poolResponse onComplete { 
      case Right(response) =>
        log.debug("Received the following global pools config: {}", response)

        val pool = parse[PoolsConfig](response.bodyAsString)
          .pools
          .find(_("name") == defaultPoolname)
          .get

        val selectedPoolResponse: Future[HttpResponse] =
          HttpDialog(httpClient, hostname, 8091)
          .send(HttpRequest(uri = pool("uri")))
          .end

        selectedPoolResponse onComplete {
          case Right(response) =>
            log.debug("Received the following pool config: {}", response)

            println(response.bodyAsString)

          case Left(failure) =>
            log.error("Could not load the pool config! {}", failure)
        }

      case Left(failure) =>
        log.error("Could not load the global pools config! {}", failure)
    } 
```

我想你可以看到模式。联系 REST 服务，阅读它，成功后将其解析为 JSON 案例类，提取信息，然后进行下一次调用。

我这里的结构只有两层深，但我还需要添加第三层。

有没有一种技术可以改进它以获得更好的可读性，或者我只能坚持这个？如果您需要任何进一步的信息，我很乐意提供。你可以在这里看到完整的代码：[https ://github.com/daschl/cachakka/blob/f969d1f56a4c90a929de9c7ed4e4a0cccea5ba70/src/main/scala/com/cachakka/cluster/actors/InitialConfigLoader.scala](https://github.com/daschl/cachakka/blob/f969d1f56a4c90a929de9c7ed4e4a0cccea5ba70/src/main/scala/com/cachakka/cluster/actors/InitialConfigLoader.scala)

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:25:06.720

[HttpDialog](http://spray.io/documentation/1.1-M7/spray-can/http-dialog/)似乎完全涵盖了您的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:00:16.263

我想我通过使用`reply`喷雾罐提供的方法找到了一条合理的捷径。

```
def discoverInitialConfig(hostname: String, bucket: String) = {

val poolResponse: Future[HttpResponse] = 
  HttpDialog(httpClient, hostname, 8091)
  .send(HttpRequest(uri = "/pools"))
  .reply(response => {
    log.debug("Received the following global pools config: {}", response)
    val selectedPool = parse[PoolsConfig](response.bodyAsString)
      .pools.find(_("name") == defaultPoolname).get
    HttpRequest(uri = selectedPool("uri"))
  })
  .reply(response => {
    log.debug("Received the following pool config: {}", response)
    println(response.bodyAsString)
    HttpRequest(uri = "/")
  })
  .end

} 
```

如果这是最好的可用方法，我会将其标记为“已回答”，但我渴望得到比我更了解这些东西的人的实际回复。

# python - 用于 html 表值的 xpath

> ID：12017162
> 
> 赞同：0
> 
> 时间：2012-08-18T08:33:50.113
> 
> 标签：python, html, lxml

我有一个这样的 HTML：

```
<html>
<body>
<table>
   <tr>
       Text before Text1
       <td>Text1</td>
       Text after Text1
   </tr>
   <tr>
       Text before Text2
       <td>Text2</td>
       Text after Text2
   </tr>
</table>
</body>
</html> 
```

我正在使用 lxml 和 Python。我想使用 XPath 来查找`Text after Text1`和`Text after Text2`

我尝试了 XPath`/html/body/table/tr`并获取了相对路径的文本`./td`，但我只能获取`Text before Text1`and `Text before Text2`。

那么我该如何实现呢？

一个例子：

```
<tr>
  <td width="16"><img alt="" src="http://source.qunar.com/site/images/airlines/small/HU.gif"></td>
  <td valign="top">海航<span class="dc">HU7605</span><br>首都T1-虹桥/td>
</tr> 
```

我能找到`海航`但找不到`首都T1-虹桥`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:01:56.983

假装你的文件在`data.xml`.

```
from lxml import etree

data = etree.parse('data.xml')

for row in data.xpath('/html/body/table/tr'):
    before, after = row.xpath('text()')
    print before, after 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:35:37.030

您可以像这样获得 Xpath 值

```
 "//tr"  or "//tr/td" 
```

# php - 使用 Zend Guard 保护代码

> ID：12017164
> 
> 赞同：3
> 
> 时间：2012-08-18T08:34:12.967
> 
> 标签：php, security, obfuscation, zend-guard

我想保护客户希望在他们自己的服务器上托管的 PHP 应用程序 - 我知道 Zend Guard 和 Ion Cube 会提供某种形式的保护，但我也找到了可以对这段代码进行逆向工程的网站。

我的问题是 - 有没有办法先混淆代码，然后通过 Zend Guard 加载它，为它提供“第二层”保护。

除了这个网站的性能下降之外，如果这完全可能的话，我还能期待什么其他优点和缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:42:51.457

几乎任何保护代码的方法都可以进行逆向工程。关于混淆的问题。Zend Guard 已经对代码进行了混淆，作为它在编码之前提供的保护的一部分。

更多信息可以在 Zend 的项目页面[http://www.zend.com/en/products/guard/上找到](http://www.zend.com/en/products/guard/)

# php - PHP DOM 属性通配符

> ID：12017167
> 
> 赞同：2
> 
> 时间：2012-08-18T08:35:04.660
> 
> 标签：php, dom, web-scraping

我已经四处寻找这个，我一直找不到它。我只是想使用通配符从 html 中选择元素。例如，对于我正在抓取的页面，此选择器在 Jquery 的控制台中完美运行：

```
$("tr[id^='informal_']") 
```

换句话说，抓取所有 id 以“informal_”开头的行。我试过 xpath 但没有运气。xpath 是 XML 独有的吗？无论如何，如果有人有任何解决方案，我将不胜感激。

**编辑**

我使用的xpath：

```
 $doc = new DOMDocument($html);
  $doc->strictErrorChecking = false;
  $xpath = new DOMXPath($doc);
  $table_rows = $xpath->query("//*tr[starts-with(@id, 'informal_')]"); 
```

**解决方案** 我决定使用：[http ://code.google.com/p/phpquery/](http://code.google.com/p/phpquery/)

这是代码：

```
require('phpQuery/phpQuery.php');

    $doc = phpQuery::newDocumentHTML($html);;
    $table_rows = $doc->find("tbody tr[id^='informal_']"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:06:52.200

相当于 jQuery 选择器

```
tr[id^='informal_'] 
```

在 XPath 中，是

```
//tr[starts-with(@id, 'informal_')] 
```

你非常接近答案，只是`*`那个妨碍了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:39:50.740

`*tr`是无效的 XPath，因为您将通配符与文字节点名称混合在一起。

你只需要`*`，即`*[starts-with...`

# c - 通过 C setuid 包装器将命令行参数传递给另一个脚本

> ID：12017168
> 
> 赞同：1
> 
> 时间：2012-08-18T08:35:05.173
> 
> 标签：c, perl, wrapper

我有以下 c setuid 包装器：

```
#include <unistd.h>
#include <sys/types.h>
#include <pwd.h>

main( int argc, char ** argv ) {
    struct passwd *pwd;
    char user[] = "cvmfs-test";

    pwd = getpwnam(user);

    setuid(pwd->pw_uid);
    system(argv[1]);
} 
```

我可以用`./cwrapper perlscript.pl`.

我想`./cwrapper perlscript.pl --option1 --option2 --option3`用 GetOptions 来详细说明 perl 脚本中的所有参数。我应该如何改变我的包装？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T11:36:43.840

还有一个很好的解决方案，它不需要任何分配，能够处理任意长命令并且不意味着运行无用的进程，因为它不使用`system`. 此外，通过以下解决方案，您可以免费获得生成进程的退出代码。

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <stdlib.h>
#include <string.h>
#include <pwd.h>

#define SETUIDUSER "foobar"

int main(int argc, char **argv) {
  struct passwd *pwd;
  char user[] = SETUIDUSER;

  pwd = getpwnam(user);
  // success test needed here 
  setuid(pwd->pw_uid);
  // success test needed here 

  if (argc < 2)
    return 1;

  execvp(argv[1], &argv[1]);
  return 42;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T09:43:45.973

这是一个处理可变数量参数的版本。请注意，应测试您的系统调用以确保一切正常。

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <stdlib.h>
#include <string.h>
#include <pwd.h>

#define CMDMAXLGTH 4096
#define SETUIDUSER "testuser"

int main( int argc, char ** argv ) {
  struct passwd *pwd;
  char user[] = SETUIDUSER;
  char buf[CMDMAXLGTH];
  char *p = buf;
  int i = 1;

  pwd = getpwnam(user);
  // success test needed here 
  setuid(pwd->pw_uid);
  // success test needed here 

  memset (buf, 0, sizeof(buf));
  while (argv[i]) {
    p += sprintf(p, " %s", argv[i++]);
  }
  system(buf);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:42:02.467

您应该使用`sprintf`您的选项构建一个字符串，然后将此字符串传递给系统：

```
 char command [100];
 sprintf (command, "./cwrapper %s --%s --%s --%s", program_name,option1,option2,
     option3);
 system(command); 
```

更新：这种方法假设有固定数量的参数，回头看看你的问题，我发现情况可能并非如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T09:07:28.260

忽略 argv[0] 因为是 c 程序的名称并使用所有其他名称。您可以计算 ( `strlen`) 组装新字符串所需`malloc()`的内存，新字符串的内存，然后通过连接所有`argv`( `strcat`) 来构建新字符串。或者对于固定长度的方法，请按照@dan1111 回答。

# java - 如何在Tomcat上实现Java socket通信

> ID：12017169
> 
> 赞同：1
> 
> 时间：2012-08-18T08:35:10.300
> 
> 标签：java, android, sockets

我目前有一个 TCP Java 套接字通信实现，其中我有一个正在侦听端口（比如说端口 5478）的服务器。然后我需要一个 Android 客户端远程连接到 Java 服务器并发送 SQL 查询，然后将在服务器端数据库上执行，然后我想将结果列表发送回 Android 客户端（已经用自定义实现实现 Serializable 的名为 Result 的 Java 类）。我通过向 Android 客户端发送一个 ArrayList 的 Result 来做到这一点。Java 服务器始终监听端口，并通过多个线程支持多个客户端。如何将此实现迁移到更安全的平台，最好的方法是什么？我不需要尊重 HTTP 协议来提供这种通信。Tomcat是最好的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:43:18.083

Tomcat 是一个 Servlet 容器 + 网络服务器。如果您打算迁移到 tomcat，那么您将隐式迁移到 http。是的，如果你想要一个安全的通信..你可以创建一个基于肥皂的 web 服务（apache 轴）并将其托管在 https 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:43:22.603

我会使用 Servlet3.0 作为 tomcat 的一部分。

然后从 android 你只需要使用 URL 向服务器发送 http 请求，servlet 就可以将它们数据库化。如果需要，您也可以序列化数据。

我希望这能回答你的问题。

~ 丹

//编辑：

设置好 eclipse 和 tomcat 后，就可以开始编写 servlet。首先 - 您必须将服务器配置为对某些地址使用 servlet，例如 localhost:8080/myServlet - 这意味着您发送到本地主机的任何内容都会触发 servlet。您的第一个 serverlet 的代码如下所示：

```
public class ExampServlet extends HttpServlet {

public void doPost(HttpServletRequest request, 
     HttpServletResponse response)
        throws ServletException, IOException
  { 
```

您的 doPost 方法是在您对 servlet 正在侦听的地址执行 http post 请求时调用的方法。然后，您所要做的就是输入一些代码来读取请求以从消息正文中获取数据。基本上，您读取传入的请求对象，然后写入响应对象以将响应发送回客户端。那里有很多指南。我按照这样的方式开始：

[http://www.coreservlets.com/Apache-Tomcat-Tutorial/tomcat-7-with-eclipse.html](http://www.coreservlets.com/Apache-Tomcat-Tutorial/tomcat-7-with-eclipse.html)

希望有帮助:)

~ 丹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:23:59.887

我不确定 mutch 额外的安全性 tomcat 如何为您的应用程序提供。想到两点：

1.  强制执行身份验证和一些访问规则。这实施起来并不难，很大程度上取决于规则质量。但是，它可能会帮助您使用它。它通常被自己的实现所取代。但是，为了安全起见，您需要加密，即 https。或者，可以强化会话并获得与其绑定的权利。
2.  请求文件映射。这实际上要复杂一些。您不应该自己编写代码。它比第一眼看上去要复杂得多。

However, one of the biggest security wholes ever is directly executing code you got from somewhere. For example SQL statements. Ok it's secure as long as your databse rights are set perfectly... Developing a securly encrypted protocol is not simple either. However, the major win on switching to tomcat (or whatever) might be scaleability for free. And I think implementing servlets is much simpler than programming against sockets. And there are many great to tools fo working with http(s) though ven it might be more complicated than yours, it's pretty simple to deal with.

Unfortunately I can't answer our question. I don't know what's the best solution is. But I think there's at least some potential for wins.

# c++ - 如何修复此代码？

> ID：12017173
> 
> 赞同：1
> 
> 时间：2012-08-18T08:35:44.830
> 
> 标签：c++, visual-studio-2010, mfc, dialog, web

这段代码没有按预期工作，我不知道出了什么问题。

szTeam 应该改变，但不会。

谁能解释一下？

```
-----------------------------------------------------

WCHAR   szTeam[MAX_PATH] = L"\u7F57\u5207\u8FBE\u5C14\u6D41\u6D6A";
char    szMsg[MAX_PATH];

sprintf(szMsg , "%s"  , WideStringToMultiByte(szTeam));
swprintf( szTeam , L"%s" , MultiByteToWideString(szMsg));

......

WCHAR* MultiByteToWideString(const char* szSrc)
{
    int iSizeOfStr = MultiByteToWideChar(CP_ACP, 0, szSrc, -1, NULL, 0);  
    wchar_t* wszTgt = new wchar_t[iSizeOfStr];  
    if(!wszTgt)
        return (NULL);  
    MultiByteToWideChar(CP_ACP, 0, szSrc, -1, wszTgt, iSizeOfStr);
    return(wszTgt);
}

char* WideStringToMultiByte(const wchar_t* wszSrc)  
{  
    int iSizeOfStr = WideCharToMultiByte(CP_UTF8, 0, wszSrc, -1, NULL, 0, NULL, NULL);  
    char* szTgt = new char[iSizeOfStr];  
    if(!szTgt)
        return(NULL);  
    WideCharToMultiByte(CP_UTF8, 0, wszSrc, -1, szTgt, iSizeOfStr, NULL, NULL);  
    return szTgt;    
} 

----------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:10:02.573

呃，没有 szTeam*确实*改变了。变成一些无法辨认的东西，mojibake。您从“罗切达尔流浪”开始，并将其从 utf-16 编码转换为 utf-8。这很好用。调试器不会向您显示任何可识别的内容，因为它既不知道也不关心 szMsg 是用 utf-8 编码的。

但是，您会出错，您正在使用 CP_ACP 转换该 utf-8 字符串。这表示该字符串是在默认系统代码页中编码的。不是，它是用 utf-8 编码的。

解决您的问题：

```
WCHAR* MultiByteToWideString(const char* szSrc)
{
    int iSizeOfStr = MultiByteToWideChar(CP_UTF8, 0, szSrc, -1, NULL, 0);  
    // etc..
} 
```

现在 szTeam*不会*更改，因为字符串已正确转换回来。

# opengl - 什么会导致 glDrawArrays 生成 GL_INVALID_OPERATION 错误？

> ID：12017175
> 
> 赞同：52
> 
> 时间：2012-08-18T08:36:03.560
> 
> 标签：opengl, glsl, shader, geometry-shader, marching-cubes

我一直在尝试使用 OpenGL 和 GLSL 编写 Marching Cubes 算法的两遍 GPU 实现，类似于 GPU Gems 3 第一章中详述的那个。但是，`glDrawArrays`在我的第一遍调用中始终以`GL_INVALID_OPERATION`.

我查找了所有我能找到的文档，并找到了`glDrawArrays`可能引发该错误的这些条件：

1.  `GL_INVALID_OPERATION`如果非零缓冲区对象名称绑定到启用的数组或`GL_DRAW_INDIRECT_BUFFER`绑定，并且缓冲区对象的数据存储当前已映射，则生成。
2.  `GL_INVALID_OPERATION`如果`glDrawArrays`在 的执行`glBegin`和对应的 之间执行，则生成`glEnd`。
3.  `GL_INVALID_OPERATION`将由`glDrawArrays`或`glDrawElements`如果当前​​程序对象中的任何两个活动采样器属于不同类型，但引用相同的纹理图像单元。
4.  `GL_INVALID_OPERATION`如果几何着色器处于活动状态并且模式与当前安装的程序对象中几何着色器的输入基元类型不兼容，则会生成。
5.  `GL_INVALID_OPERATION`如果模式是`GL_PATCHES`并且没有曲面细分控制着色器处于活动状态，则生成。
6.  `GL_INVALID_OPERATION`如果将图元的顶点记录到用于变换反馈目的的缓冲区对象会导致超出任何缓冲区对象大小的限制，或者超出由 设置的结束位置偏移量 + 大小 - 1，则会生成`glBindBufferRange`。
7.  `GL_INVALID_OPERATION`如果不存在几何着色器，则生成`glDrawArrays()`变换反馈，并且模式不是允许的模式之一。
8.  `GL_INVALID_OPERATION`如果存在几何着色器，则生成`glDrawArrays()`变换反馈，并且几何着色器的输出图元类型与变换反馈图元模式不匹配。
9.  `GL_INVALID_OPERATION`如果绑定的着色器程序无效，则生成。
10.  **EDIT 10/10/12：** `GL_INVALID_OPERATION`在使用变换反馈时生成，并且绑定到变换反馈绑定点的缓冲区也绑定到数组缓冲区绑定点。**这是我遇到的问题，因为我绑定的缓冲区有错字。虽然规范确实声明这是非法的，但在我找到的任何文档中，它都没有列在 glDrawArrays 下作为它可能引发错误的原因之一。**

不幸的是，我找不到任何一份官方文档涵盖其中的 3 个以上。我不得不从众多来源收集这份清单。第 7 点和第 8 点实际上来自文档`glBeginTransformFeedback`，而第 9 点似乎根本没有记录。我在某处的论坛帖子中发现了它。但是，我仍然不认为这个列表是完整的，因为这些似乎都不能解释我得到的错误。

1.  我根本没有在我的程序中的任何地方映射任何缓冲区。
2.  我正在使用核心配置文件，因此`glBegin`甚至`glEnd`不可用。
3.  我有两个采样器，它们的类型不同，但它们肯定映射到不同的纹理。
4.  几何着色器处于活动状态，但它的输入布局是`layout (points) in`，并且`glDrawArrays`正在使用 调用`GL_POINTS`。
5.  我没有使用`GL_PATCHES`或任何类型的镶嵌着色器。
6.  我已经确保我分配了几何着色器可能输出的最大空间量。然后我试着把它翻了两番。没有帮助。
7.  有一个几何着色器。看下一点。
8.  正在使用变换反馈，并且有一个几何着色器，但输出布局是`layout (points) out`并且`glBeginTransformFeedback`被调用`GL_POINTS`。
9.  我尝试在调用 to`glValidateProgram`之前插入对的调用`glDrawArrays`，它返回了`GL_TRUE`。

实际的 OpenGL 代码在这里：

```
 const int SECTOR_SIZE = 32;
    const int SECTOR_SIZE_CUBED = SECTOR_SIZE * SECTOR_SIZE * SECTOR_SIZE;
    const int CACHE_SIZE = SECTOR_SIZE + 3;
    const int CACHE_SIZE_CUBED = CACHE_SIZE * CACHE_SIZE * CACHE_SIZE;

    MarchingCubesDoublePass::MarchingCubesDoublePass(ServiceProvider* svc, DensityMap* sourceData) {
        this->sourceData = sourceData;
        densityCache = new float[CACHE_SIZE_CUBED];
    }

    MarchingCubesDoublePass::~MarchingCubesDoublePass() {
        delete densityCache;
    }

    void MarchingCubesDoublePass::InitShaders() {
        ShaderInfo vertShader, geoShader, fragShader;

        vertShader = svc->shader->Load("data/shaders/MarchingCubesDoublePass-Pass1.vert", GL_VERTEX_SHADER);
        svc->shader->Compile(vertShader);
        geoShader = svc->shader->Load("data/shaders/MarchingCubesDoublePass-Pass1.geo", GL_GEOMETRY_SHADER);
        svc->shader->Compile(geoShader);
        shaderPass1 = glCreateProgram();
        static const char* outputVaryings[] = { "triangle" };
        glTransformFeedbackVaryings(shaderPass1, 1, outputVaryings, GL_SEPARATE_ATTRIBS);
        assert(svc->shader->Link(shaderPass1, vertShader, geoShader));

        uniPass1DensityMap = glGetUniformLocation(shaderPass1, "densityMap");
        uniPass1TriTable = glGetUniformLocation(shaderPass1, "triangleTable");
        uniPass1Size = glGetUniformLocation(shaderPass1, "size");
        attribPass1VertPosition = glGetAttribLocation(shaderPass1, "vertPosition");

        vertShader = svc->shader->Load("data/shaders/MarchingCubesDoublePass-Pass2.vert", GL_VERTEX_SHADER);
        svc->shader->Compile(vertShader);
        geoShader = svc->shader->Load("data/shaders/MarchingCubesDoublePass-Pass2.geo", GL_GEOMETRY_SHADER);
        svc->shader->Compile(geoShader);
        fragShader = svc->shader->Load("data/shaders/MarchingCubesDoublePass-Pass2.frag", GL_FRAGMENT_SHADER);
        svc->shader->Compile(fragShader);
        shaderPass2 = glCreateProgram();
        assert(svc->shader->Link(shaderPass2, vertShader, geoShader, fragShader));

        uniPass2DensityMap = glGetUniformLocation(shaderPass2, "densityMap");
        uniPass2Size = glGetUniformLocation(shaderPass2, "size");
        uniPass2Offset = glGetUniformLocation(shaderPass2, "offset");
        uniPass2Matrix = glGetUniformLocation(shaderPass2, "matrix");
        attribPass2Triangle = glGetAttribLocation(shaderPass2, "triangle");
    }

    void MarchingCubesDoublePass::InitTextures() {
        for (int x = 0; x < CACHE_SIZE; x++) {
            for (int y = 0; y < CACHE_SIZE; y++) {
                for (int z = 0; z < CACHE_SIZE; z++) {
                    densityCache[x + y*CACHE_SIZE + z*CACHE_SIZE*CACHE_SIZE] = sourceData->GetDensity(Vector3(x-1, y-1, z-1));
                }
            }
        }
        glGenTextures(1, &densityTex);
        glBindTexture(GL_TEXTURE_3D, densityTex);
        glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
        glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
        glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE);
        glTexImage3D(GL_TEXTURE_3D, 0, GL_R32F, CACHE_SIZE, CACHE_SIZE, CACHE_SIZE, 0, GL_RED, GL_FLOAT, densityCache);

        glGenTextures(1, &triTableTex);
        glBindTexture(GL_TEXTURE_RECTANGLE, triTableTex);
        glTexParameteri(GL_TEXTURE_RECTANGLE, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
        glTexParameteri(GL_TEXTURE_RECTANGLE, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
        glTexParameteri(GL_TEXTURE_RECTANGLE, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
        glTexParameteri(GL_TEXTURE_RECTANGLE, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
        glTexImage2D(GL_TEXTURE_RECTANGLE, 0, GL_R16I, 16, 256, 0, GL_RED_INTEGER, GL_INT, triTable);
    }

    void MarchingCubesDoublePass::InitBuffers() {
        float* voxelGrid = new float[SECTOR_SIZE_CUBED*3];
        unsigned int index = 0;
        for (int x = 0; x < SECTOR_SIZE; x++) {
            for (int y = 0; y < SECTOR_SIZE; y++) {
                for (int z = 0; z < SECTOR_SIZE; z++) {
                    voxelGrid[index*3 + 0] = x;
                    voxelGrid[index*3 + 1] = y;
                    voxelGrid[index*3 + 2] = z;
                    index++;
                }
            }
        }

        glGenBuffers(1, &bufferPass1);
        glBindBuffer(GL_ARRAY_BUFFER, bufferPass1);
        glBufferData(GL_ARRAY_BUFFER, SECTOR_SIZE_CUBED*3*sizeof(float), voxelGrid, GL_STATIC_DRAW);
        glBindBuffer(GL_ARRAY_BUFFER, 0);

        glGenBuffers(1, &bufferPass2);
        glBindBuffer(GL_ARRAY_BUFFER, bufferPass2);
        glBufferData(GL_ARRAY_BUFFER, SECTOR_SIZE_CUBED*5*sizeof(int), NULL, GL_DYNAMIC_COPY);
        glBindBuffer(GL_ARRAY_BUFFER, 0);

        glGenVertexArrays(1, &vaoPass1);
        glBindVertexArray(vaoPass1);
        glBindBuffer(GL_ARRAY_BUFFER, bufferPass1);
        glVertexAttribPointer(attribPass1VertPosition, 3, GL_FLOAT, GL_FALSE, 0, (void*)0);
        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glEnableVertexAttribArray(attribPass1VertPosition);
        glBindVertexArray(0);

        glGenVertexArrays(1, &vaoPass2);
        glBindVertexArray(vaoPass2);
        glBindBuffer(GL_ARRAY_BUFFER, bufferPass2);
        glVertexAttribIPointer(attribPass2Triangle, 1, GL_INT, 0, (void*)0);
        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glEnableVertexAttribArray(attribPass2Triangle);
        glBindVertexArray(0);

        glGenQueries(1, &queryNumTriangles);
    }

    void MarchingCubesDoublePass::Register(Genesis::ServiceProvider* svc, Genesis::Entity* ent) {
        this->svc = svc;
        this->ent = ent;
        svc->scene->RegisterEntity(ent);

        InitShaders();
        InitTextures();
        InitBuffers();
    }

    void MarchingCubesDoublePass::Unregister() {
        if (!ent->GetBehavior<Genesis::Render>()) {
            svc->scene->UnregisterEntity(ent);
        }
    }

    void MarchingCubesDoublePass::RenderPass1() {
        glEnable(GL_RASTERIZER_DISCARD);

        glUseProgram(shaderPass1);
        glActiveTexture(GL_TEXTURE0);
        glBindTexture(GL_TEXTURE_3D, densityTex);
        glActiveTexture(GL_TEXTURE1);
        glBindTexture(GL_TEXTURE_RECTANGLE, triTableTex);
        glUniform1i(uniPass1DensityMap, 0);
        glUniform1i(uniPass1TriTable, 1);
        glUniform1i(uniPass1Size, SECTOR_SIZE);

        glBindBufferBase(GL_TRANSFORM_FEEDBACK_BUFFER, 0, bufferPass2);

        glBindVertexArray(vaoPass2);
        glBeginQuery(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN, queryNumTriangles);
        glBeginTransformFeedback(GL_POINTS);
            GLenum error = glGetError();
            glDrawArrays(GL_POINTS, 0, SECTOR_SIZE_CUBED);
            error = glGetError();
        glEndTransformFeedback();
        glEndQuery(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN);
        glBindVertexArray(0);

        glBindBufferBase(GL_TRANSFORM_FEEDBACK_BUFFER, 0, 0);

        glUseProgram(0);

        glDisable(GL_RASTERIZER_DISCARD);

        glGetQueryObjectuiv(queryNumTriangles, GL_QUERY_RESULT, &numTriangles);
    }

    void MarchingCubesDoublePass::RenderPass2(Matrix mat) {
        glUseProgram(shaderPass2);

        glActiveTexture(GL_TEXTURE0);
        glBindTexture(GL_TEXTURE_3D, densityTex);

        glUniform1i(uniPass2DensityMap, 0);
        glUniform1i(uniPass2Size, SECTOR_SIZE);
        glUniform3f(uniPass2Offset, 0, 0, 0);
        mat.UniformMatrix(uniPass2Matrix);

        glBindVertexArray(vaoPass2);
        glDrawArrays(GL_POINTS, 0, numTriangles);
        glBindVertexArray(0);

        glUseProgram(0);
    }

    void MarchingCubesDoublePass::OnRender(Matrix mat) {
        RenderPass1();
        RenderPass2(mat);
    } 
```

`glDrawArrays`实际错误是对in的调用`RenderPass1`。值得注意的是，如果我注释掉对`glBeginTransformFeedback`and的调用`glEndTransformFeedback`，则`glDrawArrays`停止生成错误。所以不管有什么问题，它可能与变换反馈有关。

**2012 年 8 月 18 日晚上 9 点编辑：**

我刚刚在 gDEBugger 中发现了 NVIDIA GLExpert 功能，这是我以前不熟悉的。当我打开它时，它提供了更多关于 的信息`GL_INVALID_OPERATION`，特别是`The current operation is illegal in the current state: Buffer is mapped.`. 所以我遇到了上面的第 1 点。虽然我不知道怎么做。

我的代码中的任何地方都没有调用`glMapBuffer`或任何相关函数。`glMapBuffer`我将 gDEBugger 设置为在对、`glMapBufferARB`、和的任何调用时中断`glMapBufferRange`，并且它在任何地方都没有中断。然后我在开头添加了代码来显式地取消映射打扰缓冲区。错误不仅没有消失，而且对now 的调用都 generate 。因此，如果我使用的两个缓冲区都没有映射，那么错误来自哪里？`glUnmapBuffer``glUnmapBufferARB``RenderPass1``glUnmapBuffer``The current operation is illegal in the current state: Buffer is unbound or is already unmapped.`

**2012 年 8 月 19 日上午 12 点编辑：**

根据我在 gDEBugger 中从 GLExpert 中得到的错误消息，似乎调用`glBeginTransformFeedback`导致绑定的缓冲区`GL_TRANSFORM_FEEDBACK_BUFFER`被映射。具体来说，当我单击“纹理、缓冲区和图像查看器”中的缓冲区时，它会输出消息`The current operation is illegal in the current state: Buffer must be bound and not mapped.`。但是，如果我在`glBeginTransformFeedback`and之间添加这个`glEndTransformFeedback`：

```
int bufferBinding;
glGetBufferParameteriv(GL_TRANSFORM_FEEDBACK_BUFFER, GL_BUFFER_MAPPED, &bufferBinding);
printf("Transform feedback buffer binding: %d\n", bufferBinding); 
```

它输出 0，表示`GL_TRANSFORM_FEEDBACK_BUFFER`未映射。如果这个缓冲区映射到另一个绑定点，这还会返回 0 吗？为什么要`glBeginTransformFeedback`映射缓冲区，从而使其无法用于转换反馈？

我在这里学到的越多，我就越困惑。

**2012 年 10 月 10 日编辑：**

正如我在下面对 Nicol Bolas 解决方案的回复中指出的那样，我发现了问题，并且与他发现的问题相同：由于一个愚蠢的错字，我将同一个缓冲区绑定到输入和输出绑定点。

我在发布问题两周后发现了它。我曾经沮丧地放弃了一段时间，最终回来并基本上从头开始重新实现整个事情，定期比较旧的、不工作的部分和部分。当我完成后，新版本就起作用了，当我搜索出差异时，我发现我绑定了错误的缓冲区。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-10T21:35:38.357

我发现了您的问题：您正在渲染到与您的顶点数据相同的缓冲区。

> glBindVertexArray(vaoPass2);

我想你的意思是`vaoPass1`

从规范：

> 缓冲区不应被绑定或用于 GL 中的变换反馈和其他目的。具体来说，如果缓冲区对象同时绑定到变换反馈缓冲区绑定点和 GL 中的其他位置，则对缓冲区的任何写入或读取都会生成未定义的值。此类绑定的示例包括 ReadPixels 到像素缓冲区对象绑定点和客户端访问映射到 MapBuffer 的缓冲区。

现在，您应该得到未定义的值；我不确定 GL 错误是否合格，但它可能应该是一个错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-29T19:19:37.370

另一个（显然没有记录的）案例，其中`glDrawArrays`并`glDrawElements`失败`GL_INVALID_OPERATION`：

*   `GL_INVALID_OPERATION`如果采样器统一设置为无效的纹理单元标识符，则会生成。（我的`glUniform1i(location, GL_TEXTURE0);`意思是我错误地表演了`glUniform1i(location, 0);`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-18T02:16:42.857

另一个（未记录的）`glDraw*()`调用可能失败的情况`GL_INVALID_OPERATION`：

*   `GL_INVALID_OPERATION`如果将采样器统一设置为绑定到错误类型纹理的纹理单元，则会生成。例如，如果 a`uniform sampler2D`已设置`glUniform1i(location, 0);`，但`GL_TEXTURE0`具有`GL_TEXTURE_2D_ARRAY`纹理绑定。

# ajax - 跨域脚本 ColdFusion 问题

> ID：12017176
> 
> 赞同：0
> 
> 时间：2012-08-18T08:37:06.813
> 
> 标签：ajax, coldfusion, cross-domain, extjs4.1

我有一个愚蠢的问题，但我是新手。我正在尝试使用 extjs4 库发出跨域请求（通过 ajax）。作为服务器端语言，我使用的是 ColdFusion。到目前为止，我编写的整个代码都在同一个域上工作。我需要将静态文件（javascript、css 和 html）放在 Apache 服务器上，将动态内容（cfm、CFC）放在 Tomcat（openbd）上。因此前端脚本（主要在 Apache->javascript 上）在 Tomcat 上发出请求以获取内容。这绝对是跨域请求。

**我用来提取数据（CFC）的代码块是：**

```
<cfcomponent output="false">
<cfprocessingdirective pageencoding="utf-8">
<cfset setEncoding("URL", "utf-8")>

    <cffunction name="getContent" access="remote" returnFormat="JSON" output="false" >  
        <cfargument name="start" default="0"/>    
        <cfargument name="limit" default="1000"/>
        <cfargument name="id" default="0" required="false" type="numeric">
        <cfargument name="model" default="" required="false" type="any">

        <cfset var arrNomoi = ArrayNew(1)>
        <cfset var stcReturn = "">

        <!--- When going back to base state, ExtJS will make the function call with start set to 0\. If this is the case
        we set it to 1 --->
        <cfset Arguments.start = Arguments.start + 1>

        <cfif arguments.model EQ 'n_2664_1998'>

            <cfquery name="getNomoi" datasource="ktimatologio">
                SELECT CONCAT_WS('_',id,model) AS id, id AS 'id1', CONCAT_WS(' ',title,fek,date) AS 'title', description, body, model
                FROM n_2664_1998
                WHERE id = #arguments.id#
                ORDER BY id ASC
            </cfquery>

        <cfelseif arguments.model EQ 'n_2308_1995'>

            <cfquery name="getNomoi" datasource="ktimatologio">
                SELECT CONCAT_WS('_',id,model) AS id, id AS 'id1', CONCAT_WS(' ',title,fek,date) AS 'title', description, body, model
                FROM n_2308_1995
                WHERE id = #arguments.id#
                ORDER BY id ASC
            </cfquery>

        <cfelseif arguments.model EQ 'n_3889_2010'> 

            <cfquery name="getNomoi" datasource="ktimatologio">
                SELECT CONCAT_WS('_',id,model) AS id, id AS 'id1', CONCAT_WS(' ',title,fek,date) AS 'title', description, body, model
                FROM n_3889_2010
                WHERE id = #arguments.id#
                ORDER BY id ASC
            </cfquery>  

        </cfif>

        <cfset arrNomoi = convertQueryToExtJS(getNomoi,Arguments.start,Arguments.limit)>

        <cfset stcReturn = {"data"=arrNomoi,dataset=#getNomoi.RecordCount#}>

        <cfreturn stcReturn>

    </cffunction>

    <cffunction name="convertQueryToExtJS" access="public" hint="Convert Query to JSON usable by ExtJS Grid" returntype="array">
        <cfargument name="qryData" type="query" required="true" hint="Query to convert">
        <cfargument name="intStart" type="numeric" required="true" hint="Start of Result Set">
        <cfargument name="intLimit" type="numeric" required="true" hint="How many records to return">

        <!--- For the Array --->    
        <cfset var i = 1>        
        <cfset var end = ((Arguments.intStart) + arguments.intLimit)-1>
        <cfset var arrNomoi = ArrayNew(1)>

        <cfloop query="qryData" startrow="#Arguments.intStart#" endrow="#end#">        
            <cfset stcNomoi = StructNew()>
            <cfset stcNomoi['id'] = #qryData.id#>
            <cfset stcNomoi['id1'] = #qryData.id1#>
            <cfset stcNomoi['title'] = #qryData.title#>
            <!---<cfset stcNomoi['fek'] = #qryData.fek#>
            <cfset stcNomoi['date'] = #qryData.date#>--->
            <cfset stcNomoi['description'] = #qryData.description#>
            <cfset stcNomoi['body'] = #qryData.body#>
            <cfset stcNomoi['model'] = #qryData.model#>
            <cfset arrNomoi[i] = stcNomoi>
            <cfset i = i + 1>            
        </cfloop>

        <cfreturn arrNomoi>

    </cffunction>

</cfcomponent> 
```

问题是：如何将上述函数包装成一个变量（名为“回调”）并将其发布到客户端？

**我在 PHP 上看到过类似的代码块，但我不明白。下面是 PHP 代码块：**

```
<?php
$callback = $_REQUEST['callback'];
// Create the output object.
$output = array('id' => 1, 'url' => 'loianegroner.com');
//start output
if ($callback) {
header('Content-Type: text/javascript');
echo $callback . '([' . json_encode($output) . ']);';
} else {
header('Content-Type: application/x-json');
echo json_encode($output);
} 
?> 
```

尊重地，

汤姆

希腊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:40:36.607

看看这两个文件：

index.cfm 是您提交 AJAX 请求的处理程序，它将返回 JSON 结果

[http://websvn.openbd.org/websvn/filedetails.php?repname=OpenBD&path=%2Ftrunk%2Fwebapp%2Fmanual%2Fapi%2Findex.cfm](http://websvn.openbd.org/websvn/filedetails.php?repname=OpenBD&path=%2Ftrunk%2Fwebapp%2Fmanual%2Fapi%2Findex.cfm)

index.cfm 与此 CFC 交互以获取信息并返回结果。

[http://websvn.openbd.org/websvn/filedetails.php?repname=OpenBD&path=%2Ftrunk%2Fwebapp%2Fmanual%2Fapi%2Findex.cfc](http://websvn.openbd.org/websvn/filedetails.php?repname=OpenBD&path=%2Ftrunk%2Fwebapp%2Fmanual%2Fapi%2Findex.cfc)

当我编写这个 API 包装器时，我遇到了 returnFormat=JSON 的问题

# javascript - Jquery 循环洗涤器插件：添加图像链接

> ID：12017179
> 
> 赞同：0
> 
> 时间：2012-08-18T08:38:00.237
> 
> 标签：javascript, html, image, hyperlink, cycle

我正在使用这个 jquery 插件，它可以让你浏览图像： [http ://thespiral.ca/jquery/scrubber/demo/](http://thespiral.ca/jquery/scrubber/demo/)

我正在尝试为每个图像添加一个链接，例如：

```
<div id="basic">
<a href="google.com"><img src="images/beach1.jpg" width="200" height="200" alt="Beach1" /></a>
<a href="yahoo.com"><img src="images/beach2.jpg" width="200" height="200" alt="Beach2" /></a>
<a href="bbc.com"><img src="images/beach3.jpg" width="200" height="200" alt="Beach3" /></a></div> 
```

但是脚本中的某些内容似乎阻止了链接，无论我做什么，图像都有一个“#”链接。

任何人都可以帮忙吗？

更新：我提出了一个 jsFiddle：http: [//jsfiddle.net/qdGXZ/](http://jsfiddle.net/qdGXZ/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:57:17.853

问题可能出在`jquery.cycle.all.min.js`. 其中有一段代码可能会导致这种行为。这里是：

```
else{a='<a href="#">'+(i+1)+"</a>";} 
```

评论它，看看会发生什么。这是给定示例中唯一可能导致此问题的代码。要解决此问题，您需要将您定义的 href 属性传递给 else 案例并执行以下操作：

```
else{a='<a href="'+el.attr("href")+'">'+(i+1)+"</a>";} 
```

我不知道这是否会有所帮助。只是不能做太多。现在您知道问题出在哪里以及应该采取什么措施来解决它。剩下的就看你了。

# ruby-on-rails-3 - Rails/ActiveRecord/SQLite3：无法在测试环境中保存记录

> ID：12017182
> 
> 赞同：0
> 
> 时间：2012-08-18T08:38:32.740
> 
> 标签：ruby-on-rails-3, sqlite, activerecord

我有一个使用 sqlite3 的 Rails 应用程序。每当我想在测试环境中保存任何东西时，我都会收到以下错误：

```
 ActiveRecord::StatementInvalid:
    SQLite3::SQLException: near "SAVEPOINT": syntax error: SAVEPOINT active_record_1 
```

在开发中，一切正常。我正在使用 Rails 3.2.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:43:32.353

您应该升级您的操作系统默认版本的 Sqlite

[http://shynnergy.com/2012/07/savepoint-exception-with-rails-3-1-on-jenkins/](http://shynnergy.com/2012/07/savepoint-exception-with-rails-3-1-on-jenkins/)

# git - 如何获取特定 Git 提交的文件 SHA？

> ID：12017185
> 
> 赞同：5
> 
> 时间：2012-08-18T08:39:35.597
> 
> 标签：git, commit, sha

有没有办法为特定的 Git 提交获取文件的 SHA？

可以使用 2 个命令：

1.  检索文件`git show COMMIT_VERSION:myfile.txt > ~/tmp/myfile.txt`
2.  计算 SHA`git hash-object ./tmp/myfile.txt`

但是，也许 Git 中有特定的命令可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T08:48:44.200

`git ls-tree COMMIT_VERSION myfile.txt`似乎在其第三个字段中包含相同的结果。

# delphi - delphi tlist 对象方法调用

> ID：12017188
> 
> 赞同：1
> 
> 时间：2012-08-18T08:40:05.077
> 
> 标签：delphi, tlist

全部，

在 Delphi 中，我创建了一个名为 T_Test 的简单类（见下文）。

```
T_Test = class(TObject)

private

 F_Int : Integer;

public

  constructor Create(inInt: Integer);
  destructor Destroy; override;

  property Int: Integer read F_Int write F_Int;

  function showInt : String;

end;

constructor T_Test.Create(inInt: Integer);

 begin

  F_Int := inInt;

 end;

destructor T_Test.Destroy;

 begin

  self.Free;

 end;

function T_Test.showInt : String;

 var outputLine : String;

 begin

   result := IntToStr(Int);
   outputLine := result;
   Form1.Memo1.Lines.Add(outputLine);

 end; 
```

然后我有一个过程，我想在其中创建一个 T_Test 对象的 TList 并在它们上调用 showInt 方法函数。

我试过这样：

```
procedure testTlist;

 var

  a, b: T_Test;
  i : Integer;

 begin

  a := T_Test.Create(5);
  b := T_Test.Create(10);

 listTest := TList.Create;

 listTest.Add(a);
 listTest.Add(b);

 listTest[i].showInt;

end; 
```

但我不断收到一个说我必须在调用“listTest[i].showInt”时使用记录、对象或类类型

有谁知道如何调用这个方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T08:52:07.163

将 listTest[i] 指针转换回 T_Test，然后调用它的方法：

```
T_Test(listTest[i]).showInt; 
```

或者，如果可用，使用模板化的 TObjectList 类直接存储 T_Test 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T14:50:28.547

马丁的回答是正确的。但值得注意的是，如果您可能要向列表中添加不同的类，那么更健壮的代码片段将是......

```
var pMmember: pointer;

pMember := listTest[i];
if TObject( pMember) is T_Test then
  T_Test( pMember).ShowInt; 
```

Martin 关于 TObjectList 的观点是正确的。另一个要考虑的选项是 TList<T_Test>。大卫关于你的析构函数错误的评论也是正确的。

我注意到您没有初始化 i 的值。所以上面的片段是假装你做了。如果您还想检查索引变量是否处于有效值，并且如果它无效则不调用 ShowInt，那么您可以执行以下操作...

```
if (i >= 0) and (i < listTest.Count) and (TObject(listTest[i]) is T_Test) then
  T_Test(listTest[i]).ShowInt; 
```

上面的代码片段依赖于短路布尔评估。

# sql - 如何检查表中的列是否包含一组值？

> ID：12017189
> 
> 赞同：1
> 
> 时间：2012-08-18T08:40:05.837
> 
> 标签：sql, set, contains

如果我有一组字符串，什么 SQL 语句将确定在表的一列中找到哪些字符串？

我希望它返回找到了哪些字符串，或者`Null`如果没有找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:00:31.140

```
SELECT DISTINCT Column1 FROM Table1 WHERE Column1 IN ("String1","String2","String3") 
```

# java - idjl（Sun IDL 编译器）是否支持前向声明？

> ID：12017191
> 
> 赞同：2
> 
> 时间：2012-08-18T08:40:23.300
> 
> 标签：java, corba, idl

我**必须**为我的学校项目使用*idlj*，但在我的 idl 文件中，我还需要使用前向声明。有人知道 idlj 是否支持前向声明吗？我试图这样做，但它给出了错误：

> interface1.idl（第 34 行）：有对 Class1 的前向引用，但未定义。

任何想法如何克服这个问题？不幸的是，我无法使用任何其他 idl 编译器......而且我找不到任何有关此的信息。

**编辑：**

接口1.idl：

```
interface SecondClass;

interface FirstClass
{
    //...
}; 
```

接口2.idl：

```
interface FirstClass;

interface SecondClass
{
    //...
}; 
```

> idlj -fclient interface1.idl

给出：

> interface1.idl（第 8 行）：有对 SecondClass 的前向引用，但没有定义。}; ^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T21:51:02.860

```
#ifndef _SecondClass
#define _SecondClass
#include "interface1.idl"
interface SecondClass
{
   typedef sequence<FirstClass> firstVector;
   SecondClass create();
};
#endif

#ifndef _FirstClass
#define _FirstClass
#include "interface2.idl"
interface FirstClass
{
   typedef sequence<SecondClass> secondVector;
   FirstClass create();
};
#endif 
```

看看[这个](https://stackoverflow.com/questions/11763036/idl-interface-c-corba-im-dealing-with-conflicting-return-type-specified-f)。将此模式用于所有相互依赖的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T16:45:06.663

我不熟悉那个 ORB，但它应该是可能的。请记住，如果您转发声明一个类，您最终必须在某处提供定义，以便翻译器知道该做什么。

例如：

```
interface SecondClass;  // forward declaration

interface FirstClass {

   SecondClass foo();
};

// now you must provide the IDL for SecondClass; 
// either write it out here or #include the appropriate IDL file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T21:49:51.753

**我的代码的这个版本终于工作了（编译没有错误）但我仍然不知道如何以及为什么;P**

我不知道如何以及为什么，但它最终编译没有错误，看看：

**文件 interface1.idl**

```
#ifndef __FIRSTCLASS_IDL__
#define __FIRSTCLASS_IDL__

#include "interface2.idl"

interface FirstClass
{
    typedef sequence<SecondClass> secondVector;
    FirstClass create();
};

#endif 
```

**文件interface2.idl**

```
#ifndef __SECONDCLASS_IDL__
#define __SECONDCLASS_IDL__

interface FirstClass;

interface SecondClass
{
    typedef sequence<FirstClass> firstVector;
    SecondClass create();
};

#include "interface1.idl"

#endif 
```

我只是有点困惑为什么一个`include`指令位于 idl 文件的顶部，而另一个指令必须位于底部。有人知道吗？哎呀！

# java - 如何在 Mac OS X 上为 Java 应用程序启用视网膜模式

> ID：12017193
> 
> 赞同：12
> 
> 时间：2012-08-18T08:40:36.860
> 
> 标签：java, swing, retina-display

我想在从 IDE 调试期间在 Java Swing 应用程序中绘制完整的[OSX Retina分辨率。](http://www.apple.com/iphone/features/retina-display.html)我怎样才能做到这一点？当我从 IDE 运行应用程序时，它看起来很模糊。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-07T15:28:51.317

在 jdk 7u40ea 中修复。从这里下载[https://jdk7.java.net/download.html](https://jdk7.java.net/download.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:09:39.990

我在 Retina MacBook Pro 上运行 Netbeans 时遇到了同样的问题。关键是 JDK 7 不支持 Retina，你必须降级到 JDK 6。

此处的描述和解决方案： [https ://netbeans.org/bugzilla/show_bug.cgi?id=215141#c66](https://netbeans.org/bugzilla/show_bug.cgi?id=215141#c66)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:48:16.353

如果只是关于 IDE，请告诉我们您使用的是哪个 IDE。

对于 Eclipse [https://bugs.eclipse.org/bugs/show_bug.cgi?id=382972](https://bugs.eclipse.org/bugs/show_bug.cgi?id=382972)

对于 IntelliJ IDEA [http://youtrack.jetbrains.com/issue/IDEA-87500](http://youtrack.jetbrains.com/issue/IDEA-87500)

# wpf - 样式 AutoCompleteBox 错误指示器

> ID：12017195
> 
> 赞同：3
> 
> 时间：2012-08-18T08:40:55.463
> 
> 标签：wpf, xaml, wpftoolkit, autocompletebox

是否可以更改 WPF Toolkit 中的 AutoCompleteBox 出现错误时出现的红色矩形的样式？我成功地在 TextBox 上更改了它，只是为控件创建了一种新样式，但无论我对 AutoCompleteBox 做什么，我都无法摆脱那个红色矩形。即使我删除这样的样式：

```
<input:AutocompleteBox Style="{x:Null}"/> 
```

我看不到控件，但是如果控件绑定有错误，它仍然会显示一条红线！我真正想要的是 AutoCompleteBox 使用内部 TextBox 验证指示器，但首先我需要删除那个外部矩形。关于如何做到这一点或创建红色矩形的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:53:25.210

`AutocompleteBox`由`TextBox`、`SelectionAdapter`和`DropDownToggle`组成`Popup`。您描述的错误状态样式定义在`TextBoxStyle`：

```
<Style TargetType="controls:AutoCompleteBox">
    <Setter Property="IsTabStop" Value="False" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="controls:AutoCompleteBox">
                <Grid Margin="{TemplateBinding Padding}"
                      Background="{TemplateBinding Background}">
                    <TextBox IsTabStop="True" x:Name="Text" Style="{TemplateBinding TextBoxStyle}" Margin="0" />
... 
```

改变`TextBox`错误时的行为 - 只需改变它的风格。

# web-services - Send/Receive a SOAP request using SPRING JAVA

> ID：12017199
> 
> 赞同：1
> 
> 时间：2012-08-18T08:41:20.830
> 
> 标签：web-services, spring, soap, soap-client

I am new to Spring web services. I am going to create an xml request, and send it as a SOAP request to a web service and receive the response.I read different documents but still confused as I could not find a working sample yet.

I know that I should use WebServiceTemplate and WebServiceMessageSender, SaajSoapmessageFactory (please let me know if I am wrong) but not sure how to use them.

Do I need WSDL? if yes why?

If you have any sample code please send me to get clear on it.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:01:55.300

If you want to send SOAP requests, you would like to be a SOAP *client*. Seems like you want to use [spring-ws](http://static.springsource.org/spring-ws/sites/2.0/) project. Check out their great documentation [on the client side](http://static.springsource.org/spring-ws/sites/2.0/reference/html/client.html#client-web-service-template). The same documentation will guide you through the process of [creating a server](http://static.springsource.org/spring-ws/sites/2.0/reference/html/server.html). There are plenty of examples and ready-made configuration snippets waiting for you.

Spring-WS is built on top of XML Schema description of your message, so you will need WSDL to generate e.g. JAXB models of your requests and responses.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T09:01:12.903

AFAIK, for "web services" , the WSDL file is the machine blueprint of the "ports" as they are called However! ports in WSDL "means" java language(or any other programming language used with a routine or sub or procedure or function) method and has a specific naming scheme associate the .wsdl xml file(template of the service). Each WSDL port(language method) has specifications of return value and data specifications for how to feed it arguments and their type values.

# c# - 更正以下委托和调用控件的方法

> ID：12017200
> 
> 赞同：0
> 
> 时间：2012-08-18T08:41:22.617
> 
> 标签：c#, delegates, invokerequired

我需要在 DoWork 事件处理程序中访问列表视图的项目。为此，我编写的委托和调用列表视图的方法是：

```
delegate ListView itemDelegate(ListView bufferedListView1);

   private ListView getItems(ListView bufferedListView1)
   {
       if (bufferedListView1.InvokeRequired)
       {
         //  BeginInvoke(new itemDelegate(getItems));
             bufferedListView1.Invoke(new itemDelegate(getItems));
       }
       else
       {
           return bufferedListView1;
       }
   } 
```

这是我第一次使用调用控件。所以请让我知道我错在哪里。我得到的一个错误是`gsm_modem.Form1.getItems(System.Windows.Forms.ListView): not all code paths return a value`. 我什至猜想我写的可能是错的。请指正。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:32:40.837

你可以做这样的事情

首先为您的表单在全局范围内创建共享变量。

```
List<string> listItems; 
```

现在在调用 RunWorkerAsync 之前，请执行以下操作

```
listItems = new List<string>();
foreach (ListViewItem item in bufferedListView1.Items)
            {
                //If you want to add tag to list then you can use dictionary like Dictionary<string, object) listItems; and then add items as listItems.Add(item.Text, item.Tag); It only works if text is unique.
                listItems.Add(item.Text);
            }
bgw1.RunWorkerAsync(); 
```

现在使用 foreach 读取后台工作人员中的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:00:41.553

感谢@Ravi Patel 的想法。这是我为解决问题所做的：

```
ListView listItems = new ListView();\\In global scope

foreach (ListViewItem item in bufferedListView1.Items)
{
   listItems.Items.Add((ListViewItem)item.Clone()); // Copied the bufferedListview's items that are to be accessed in other thread to another listview- listItems
} 
```

然后在我的另一个线程中轻松使用 listItems 。

# java - Java：从客户端发送的消息与在服务器接收的消息之间存在差异

> ID：12017203
> 
> 赞同：0
> 
> 时间：2012-08-18T08:41:44.713
> 
> 标签：java, xml, dom

我不知道他们怎么可能不同。差异在于客户端的空间比服务器的空间多，所以当我尝试在服务器上解析时得到这个： [解析 DOM - org.xml.sax.SAXParseException](https://stackoverflow.com/questions/12014970/parsing-dom-org-xml-sax-saxparseexception) 这是代码，消息包含在评论：

```
Element rootElement = document.createElement(MyServer.NEW_PLAYER_CONNECTION_REQUEST);
    Element participantTypeElement = document.createElement(MyServer.PARTICIPANT_TYPE);
    Text textParticipantType = document.createTextNode(participantType);
    participantTypeElement.appendChild(textParticipantType);
    rootElement.appendChild(participantTypeElement);
    document.appendChild(rootElement);
    StringWriter sw = new StringWriter();
    TransformerFactory tFactory = TransformerFactory.newInstance();
    Transformer transformer;
    try {
        transformer = tFactory.newTransformer();
        DOMSource source = new DOMSource(document);
        StreamResult result = new StreamResult(sw);
        transformer.transform(source, result);
    } catch (TransformerConfigurationException e) {
        e.printStackTrace();
    }
    catch (TransformerException t) {
        t.printStackTrace();
    }
    try {
        conn.setRequestMethod("POST");
    } catch (ProtocolException e) {
        e.printStackTrace();
    }
    conn.setRequestProperty("Content-Type", "text/xml");
    //conn.setRequestProperty("Content-Length", "" +  8);
    conn.setRequestProperty("Content-Language", "en-US"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:55:48.083

只是一个假设，但在 UTF-8 和其他 ASCii 字符集之间读取（不仅仅是转换）可能会导致通过流读取/呈现字符数字时出现小错误。两点之间的字符集可能是问题所在。

# rest - Backbone.js - 两个 PUT

> ID：12017211
> 
> 赞同：1
> 
> 时间：2012-08-18T08:43:16.520
> 
> 标签：rest, backbone.js

早上好！

我使用 Backbone.js 0.9.2（和 CakePHP）。我的模型有 4 个字段：`id`、`name`和。我使用 a和 a添加模型，并从服务器响应中获取and并触发正确的更改事件（以及第一次和以后）。`description``image_id``name``description``id``image_id``name``description``id``image_id`

现在，当我编辑某些东西时，发送了两个 PUT（本例中的资源是`CookingUtensils/144`）。 [![](../Images/98e57c8a267b00898b72eb8fe9ccdf84.png)](https://i.stack.imgur.com/gvwxW.png)

我看到`change`我编辑的字段的一个事件和另一个一般事件（`change`only 和 not`change:description`等`change:name`）。我不明白为什么。两个 PUT 请求具有完全相同的主体。

*   我的模型：[https ://gist.github.com/3385347](https://gist.github.com/3385347)
*   我的看法：[https ://gist.github.com/3385345](https://gist.github.com/3385345)
*   我的收藏：[https ://gist.github.com/3385344](https://gist.github.com/3385344)

我根本无法弄清楚发生了什么。感谢您的阅读。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:49:50.177

save() 是否触发了两次——一次是输入键，一次是 onBlur？

由于值仅更改一次（第一次），因此您只会获得一个更改事件。在 save 方法上放置一个 console.log 并打印出事件。或者，在 chrome 调试器/firebug 中设置一个断点，看看堆栈是什么——是什么触发了保存。——</p>

# android - 在 Android 上将 MobFox 添加到 AdMob

> ID：12017221
> 
> 赞同：1
> 
> 时间：2012-08-18T08:45:03.427
> 
> 标签：android, admob, mobfox

我对这里需要什么感到困惑。我已注册 MobFox 并获得批准，我已将 MobFox 添加到我的 AdMob 中介中，但 MobFox 说它没有收到任何请求。还有更多我必须在这里做的事情吗？

MobFox 有一个关于如何将 AdMob 添加为辅助网络的教程，但这不是我想做的。我还找到了有关在 iOS 上做什么的说明，但这似乎并不是特别相关。

我想知道我是否只需要添加 MobFox jar，并在我的清单中声明它们的意图。如果它可以在 AdMob 视图中展示自己的广告，那将是有意义的。很高兴听到真正做到这一点的人的来信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T22:05:23.563

我按照说明操作，并没有通过 adMob 中介显示广告，尽管在我的情况下 mobfox 正在收到请求并且广告侦听器报告已成功收到广告。

确保您的清单包括：

```
 <activity android:name="com.mobfox.sdk.InAppWebView"/>

<!--following is optional for full video ads -->
    <activity android:name="com.mobfox.video.sdk.MobFoxRichMediaActivity"
android:configChanges="keyboard|keyboardHidden|orientation"/> 
```

并确保在 admob 中输入了正确的发布者 ID。以下是您可以输入的测试 ID，以查看您是否获得实时广告。

fed5ae7d80eb8378ddd8fd1b85e305ab

同样，我在通过 admob 调解 mobfox 广告方面没有成功，但是当我绕过 admob 并将 mobfox 广告直接添加到我的布局中时，一切正常。我相信他们的调解罐有问题，但我知道什么。我即将通过 admob 使用自定义事件并以这种方式实现 mobfox。我会让你知道它是否有效。

从 mobfox 下载用于横幅广告的“常规”sdk，看看您是否可以使用他们的 sdk v1.5 获得广告

我的解决方案是确保将我的 adView 上的 LayoutParams 设置为 320x50。希望这对您有所帮助。看起来毕竟有sdks工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:44:48.883

我有同样的问题。Admob 需要一些时间来更新他们的数据

# php - 安全问题和解析数据 iPhone 到服务器

> ID：12017222
> 
> 赞同：0
> 
> 时间：2012-08-18T08:45:10.547
> 
> 标签：php, objective-c, ios, xcode, security

我有一部 iPhone，可以将`jpg`图像上传到`'uploads'`远程服务器上的文件夹。这是在 iOS 上使用异步方法完成的，该方法连接到 PHP 脚本。然后 PHP 脚本处理图像。PHP 脚本很简单，如下所示：

```
$uploaddir = './uploads/';
$file = basename($_FILES['userfile']['name']);
$uploadfile = $uploaddir . $file;

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
        echo "http://iphone.zcentric.com/uploads/{$file}";
} 
```

如何提高安全性以知道连接到 PHP 脚本的是正确的 iPhone？另外，如何创建一个对 iphone 设备具有唯一名称的文件夹，以便将图像存储在其中，而不是存储在“ `uploads`”服务器中？例如 iPhone 连接到 PHP 脚本，该脚本验证 iPhone 并获得一个唯一标识符（我不确定该唯一标识符可能是什么，也许是imei？），并创建一个文件夹，例如`M234SFDFS/image.jpg`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:49:31.740

您可以从单个手机中获取大量数据（只需几行代码）

当您访问 PHP 页面时，将它们添加为 URL 变量。

我正在寻找一种更优雅的方式来自己做这件事，但我一直在使用 php。我不得不去脚本变量，但我想我将不得不转向更高级的东西，比如 websockets。

~ 丹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:49:33.340

如果您在服务器端有任何类型的用户管理，您可以使用简单的**HTTP 基本身份验证**来检查用户凭据并提高安全性。

此外，我建议从您的 iOS 应用程序向服务器**发送一个唯一 ID ，以识别相同的 iOS 设备。**为此，请查看线程[How to create a GUID/UUID using the iPhone SDK](https://stackoverflow.com/questions/427180/how-to-create-a-guid-uuid-using-the-iphone-sdk)，它向您展示了如何创建自己的唯一 ID 而不是使用设备 ID（已弃用）。

# html - 表格边框不显示

> ID：12017224
> 
> 赞同：1
> 
> 时间：2012-08-18T08:46:31.790
> 
> 标签：html, css

小提琴链接-> [http://jsfiddle.net/TZLE3/](http://jsfiddle.net/TZLE3/)

我正在尝试在第一张第二张桌子周围添加寄宿生，但即使在第二张桌子上使用边框 =“1”，css 中的某些内容也会使其不显示。但我不知道为什么？

因此它应该看起来像这个小提琴链接-> [http://jsfiddle.net/bC6BF/](http://jsfiddle.net/bC6BF/)

关于如何使第一个看起来像第二个的任何想法。？谢谢格伦

编辑.. 第一个链接有我所有的 css 第二个链接只有 css iam 想要用于布局的那部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:09:42.253

用“.”选择类 （点）和 ID 用“#”（哈希）选择。在您的 css 中，您提供了一个类 .reviewtable 并使用 Id #reviewtable 选择了它。

顺便说一句，这是你想要的设计：[小提琴](http://jsfiddle.net/TZLE3/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:14:33.697

检查您的 CSS 中的以下类，这会使所有边框值为 0。

```
*{
 margin:0;
 padding:0;
 border:0;
} 
```

将其更改为`border:1`应该这样做。

# paypal - 如何使用 PHP 实现 Paypal 链式支付

> ID：12017228
> 
> 赞同：1
> 
> 时间：2012-08-18T08:47:25.847
> 
> 标签：paypal

尽管我之前已经实现了传统的贝宝网关 API，但我对贝宝支付网关还是很陌生。但是我对如何实施 Paypal 链式支付感到有点困惑，因为我去过贝宝文档网站，而且我似乎被一大堆信息所淹没。任何关于我如何以简单的方式实现它的链接或教程都将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T03:32:21.083

I'm going to second Sumit Neema's answer.

**EDIT** Unfortunately, it seems paypal-labs is out of commission. What a shame. Here's an updated link to the Adaptive Payments PHP sample code:

[https://github.com/paypal/codesamples-php/tree/master/AdaptivePayments/sample/code](https://github.com/paypal/codesamples-php/tree/master/AdaptivePayments/sample/code)

The thing that trips most people up, is how money flows in a chained payment.

On a chained payment you will have one primary receiver, who is the one that the customer sees, and upt to five secondary receivers (Invisible to the paying customer).

initially 100% of the money will move from the buyer to the primary receiver, and then, paypal will subtract from the primary whatever portion belongs to the secondary receiver(s).

For example, a $100 payment needs to be split 70/30 between primary and secondary.

Initially $100 will be in the primary receiver's account. Paypal will then take $30, and move it to the secondary.

The end result? Primary has $70, secondary has $30.

Hope this helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T09:18:55.527

这些是一些有用的链接。希望它可以帮助你

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)

[https://www.x.com/authentication-0](https://www.x.com/authentication-0)

[https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples](https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples)

结帐此链接它具有完整的代码示例，并一步一步地在您需要的 php 或 whaetver 语言中实现在 paypal 中的链接支付。我知道这个代码示例非常有用，您只需要放置 API 密钥和要支付或正在支付的贝宝电子邮件和休息将毫不费力地完成

检查这个链接

[https://www.paypal-labs.com/integrationwizard/adaptive/](https://www.paypal-labs.com/integrationwizard/adaptive/)

# python - jinja2 的 autoescape 扩展和 markupsafe 库的区别

> ID：12017230
> 
> 赞同：2
> 
> 时间：2012-08-18T08:47:41.773
> 
> 标签：python, google-app-engine, jinja2, webapp2

嗨，这个问题是 Python 2.7 Google App Engine 平台特有的。

通常，您会在`app.yaml`:

```
libraries:
- name: webapp2
  version: "2.5.1"
- name: jinja2
  version: latest
- name: markupsafe
  version: latest 
```

我想知道`markupsafe`这里在做什么。

既然 jinja2 已经有了“autoescape 扩展”，为什么还需要“markupsafe”呢？

[Google App Engine Jinja2 和 Markupsafe](https://stackoverflow.com/questions/10650693/google-app-engine-jinja2-and-markupsafe)在这里说：markupsafe 让 jinja2 运行得更快。如果是这种情况，为什么我们需要显式包含它而应用引擎可以隐式包含它？

有关如何`markupsafe`在 Google App Engine 上使用它的任何示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T04:40:37.783

一次一个地回答您的问题：

1.  正如您所猜测的，Markupsafe 是一个 C 库，*可以加快*转义 HTML 的过程。

2.  当您创建 Python 环境时，Google 不会隐式包含它，因为他们决定不这样做 - 您需要选择使用 Markupsafe（也许显式优于隐式？）

3.  一旦你安装了 Markupsafe，Jinja 会**自动**使用它（从而导致模板加速）。

# sql-server - 使用新的/单独的数据库进行表单身份验证

> ID：12017231
> 
> 赞同：0
> 
> 时间：2012-08-18T08:48:10.080
> 
> 标签：sql-server, forms-authentication

是否有人知道是否为表单身份验证用户使用新的单独数据库，或者是否可以将其与您的应用程序数据库混合使用？

如果多个应用程序/数据库共享用户身份验证，我可以看到分离很有用，但在我的情况下，我有一个网站/数据库，并且打算将 aspnet_regsql.exe 创建的表/视图/sps 添加到我当前的应用程序数据库中。

欢迎任何意见/意见。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:58:14.667

您可以将该数据库与您的数据库混合使用，但如果您想使用使用该数据库的 asp.net 内置类，则不应对默认数据库表进行任何更改，这意味着您只能将表添加到该数据库！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:59:09.577

拥有一个用于对表单进行身份验证的数据库是可以的。由于 SQL 服务器是一个非常安全的服务器，因此拥有单个数据库不会有任何问题。

但是，如果您想为身份验证设置自定义数据库，请参考以下链接

[将表单身份验证与客户数据库一起使用](http://forums.asp.net/t/1802941.aspx/1)

[使用 sql server 2008 数据库问题进行表单身份验证](https://stackoverflow.com/questions/9901819/forms-authentication-with-sql-server-2008-database-questions)

# php - 如何在 ZF 项目的所有控制器中加载另一个控制器？

> ID：12017237
> 
> 赞同：0
> 
> 时间：2012-08-18T08:49:00.883
> 
> 标签：php, zend-framework

我有一个代码片段，可以检查整个网站的用户登录并获取导航等。我有几个控制器，我希望该片段包含在所有控制器中。每当我更改某些内容时，我都厌倦了一次更改所有这些。在我的其他一个项目中，我看到它以某种方式扩展到使用这部分的其他控制器

```
class MyController extends Zend_Controller_Action 
```

它看起来像

```
class MyController extends MySnippet_Controller_Action 
```

或类似的东西，它奏效了。但是，我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:07:57.460

您正在寻找的可能是针对 init() 或更可能是 predispatch() 注册的前端控制器插件。在 Zend Framework 中扩展 Zend_Controller_Action 是不受欢迎的，实际上通常不需要。

这些资源可以帮助您开发所需的插件：

[了解 ZF 插件 pt 1](http://geekabyte.blogspot.com/2012/07/understanding-zend-frameworks-plugin.html)
[了解 ZF 插件 pt 2](http://geekabyte.blogspot.com/2012/08/understanding-zend-frameworks-plugin.html)

[当然还有参考手册部分](http://framework.zend.com/manual/en/zend.controller.plugins.html)

这是插件的基本形式：

```
class My_Controller_Plugin_Acl extends Zend_Controller_Plugin_Abstract
{

    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        parent::preDispatch($request);
        //truncated
    }
} 
```

# php - CodeIgniter 在刷新时创建新的验证码图像

> ID：12017240
> 
> 赞同：1
> 
> 时间：2012-08-18T08:49:13.363
> 
> 标签：php, codeigniter, captcha

早安 Stackoverflow，

我已经成功地在我的项目中实现了验证码助手。图像正在显示、保存等等，尽管图像本身在每次刷新后一次又一次地创建。刷新 10 次后，我的验证码文件夹包含 10 张图像。

这是正常的吗？

这是我的代码；

```
...

/**
 * Method that returns the currently
 * active Captcha code of the user.
 *
 * @access public
 * @return string - user's captcha code
 * @since v0.1.0.0
 */
public function get_captcha()
{
    // Check for already existing captcha's.
    if ($this->is_captcha())
    {
        // Get the captcha.
        $data = $this->get_captcha_data();
    }
    else
    {
        // Create a new captcha.
        if ($this->insert_captcha())
            $data = $this->get_captcha_data();
    }

    // Set the values.
    $captcha_vals = array(
        'word' => $data['word'],
        'img_path' => './media/sm_general/captcha/',
        'img_url' => base_url().'media/sm_general/captcha/',
        'img_width' => '175',
        'img_height' => '60'
    );

    // Return the captcha.
    return create_captcha($captcha_vals);
}

/**
 * Method that returns the captcha data
 * of a specific user.
 *
 * @access private
 * @param string $field - (optional) specific to be returned data
 * @return array/string - data of the captcha
 * @since v0.1.0.0
 */
private function get_captcha_data($field='')
{
    // Prepare the query.
    $this->db->select('*');
    $this->db->from('sm_sessions_captcha');
    $this->db->where('ip_address',$this->input->ip_address());
    $this->db->limit(1);

    // Execute the query.
    $query = $this->db->get();

    // Get the result.
    $result = $query->row_array();

    // Return the data.
    if ( ! empty($field))
        return $result[$field];
    else
        return $result;
}

/**
 * Method that returns a random word from
 * the database.
 *
 * @access private
 * @return string - randomly selected word
 * @since v0.1.0.0
 */
private function get_word_random()
{
    // Prepare the query.
    $this->db->select('word');
    $this->db->from('sm_sessions_captcha_words');
    $this->db->order_by('word','RANDOM');
    $this->db->limit(1);

    // Execute the query.
    $query = $this->db->get();

    // Get the result.
    $result = $query->row_array();

    // Return the word.
    return $result['word'];
}

/**
 * Method that creates a new captcha image.
 *
 * @access private
 * @return array
 * @since v0.1.0.0
 */
private function insert_captcha()
{           
    // Prepare the query.
    $data = array(
        'captcha_time' => (time() + 7200),
        'ip_address' => $this->input->ip_address(),
        'word' => $this->get_word_random()
    );

    // Execute the query.
    if ($this->db->insert('sm_sessions_captcha',$data))
        return true;
    else
        return false;
}

/**
 * Check if a captcha already exists.
 *
 * @access private
 * @return boolean - exists or not
 * @since v0.1.0.0
 */
private function is_captcha()
{
    // Set the expiration time.
    $expiration = time() - 7200;

    // Remove all expired captchas.
    $this->db->where('captcha_time <',$expiration);
    $this->db->delete('sm_sessions_captcha');

    // Prepare the query.
    $this->db->select('*');
    $this->db->from('sm_sessions_captcha');
    $this->db->where('captcha_time >=',$expiration);
    $this->db->where('ip_address',$this->input->ip_address());
    $this->db->limit(1);

    // Execute the query.
    $query = $this->db->get();

    // Return the existence.
    if ($query->num_rows() == 1)
        return true;
    else
        return false;
}
... 
```

我不知道这是否按预期工作。如果我弄错了，请赐教。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:47:45.907

`"expiration"`这是正常的，每次刷新都会生成一个新的验证码图像，然后 CI 运行一次垃圾收集，因此您可以通过值设置旧的验证码图像应该在文件夹中保留多长时间

[http://ellislab.com/codeigniter/user-guide/helpers/captcha_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/captcha_helper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T13:34:15.237

```
$cap = create_captcha($vals);
$this->session->set_userdata('time', $cap['time']); 
```

数据存入数据库时​​写入。

在此之上：

```
unlink(realpath('captcha').'/'.$this->session->userdata('time').'.jpg'); 
```

# c# - C# 中的 ReadInt16 返回的内容与 Java 中的 writeShort 不同

> ID：12017244
> 
> 赞同：1
> 
> 时间：2012-08-18T08:50:55.027
> 
> 标签：c#, java, short

我正在使用**Java**中的以下代码编写文件的简短内容：

```
RandomAccessFile file = new RandomAccessFile("C:\\Users\\PC\\Desktop\\myFile.bin", "rw");
file.writeShort(11734);
file.close(); 
```

当我用 Java 读回它时，我得到了相同的 (11734) 号码。但是，当我使用以下代码读取**C#中的数字时：**

```
string p = "C:\\Users\\PC\\Desktop\\myFile.bin";
short s = new BinaryReader(File.OpenRead(p)).ReadInt16(); 
```

变量*s*包含*-10707*。

这怎么会发生，有没有办法用 C# 检索我在 Java 中写入文件的数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T08:55:46.397

BigEndian/LittleEndian 问题。见下文

```
byte[] b = BitConverter.GetBytes((short)11734);
var s = BitConverter.ToInt16(new byte[] {b[1],b[0] }, 0); 
```

s 将是 -10707

您可以使用`IPAddress.HostToNetworkOrder`从一种形式转换为另一种形式。

```
var sh1 = IPAddress.HostToNetworkOrder((short)11734); //-10707
var sh2 = IPAddress.HostToNetworkOrder((short)-10707); //11734 
```

您还可以创建自己的 BinaryReader

```
public class MyBinaryReader : BinaryReader
{
    public MyBinaryReader(Stream s)  : base(s)
    {
    }

    public override short ReadInt16()
    {
        return IPAddress.HostToNetworkOrder(base.ReadInt16());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T09:00:13.917

正如其他人所说，这是一个字节顺序问题。

我的[MiscUtil](http://pobox.com/~skeet/csharp/miscutil)库包括`EndianBinaryReader`并`EndianBitConverter`允许您使用熟悉的 API，但可以灵活地指定字节顺序：

```
using System;
using System.IO;
using MiscUtil.Conversion;
using MiscUtil.IO;

static class Test
{
    static void Main()
    {
        using (var stream = File.OpenRead("myfile.bin"))
        {
            var converter = new BigEndianBitConverter();
            var reader = new EndianBinaryReader(converter, stream);
            Console.WriteLine(reader.ReadInt16());
        }
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T10:57:44.613

请注意，在 Java 中，您还可以选择使用`ByteBuffer.allocate(size).order(LITTLE_ENDIAN).asShortBuffer()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T08:55:55.583

你的字节顺序是错误的

```
 11734 = 2DD6
-10707 = D62D 
```

[http://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T08:56:35.533

Java 在写出 short、int 和 long 时总是使用网络顺序（又名 big-endian）。我的猜测是 C# 读取它是小端的。

# c# - MVC 项目中的解析器错误

> ID：12017245
> 
> 赞同：2
> 
> 时间：2012-08-18T08:51:09.447
> 
> 标签：c#, asp.net-mvc-3

[我按照本教程](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)将我的 MVC - 3 项目转换为 MVC - 4 项目。我刚刚创建了新的 MVC-4 项目，将所有现有的控制器、视图、模型、内容从 MVC-3 项目复制到新创建的项目中。然后完成教程中的所有手动转换步骤。现在，当我运行 MVC - 4 项目时做了所有这些之后，我得到了以下异常页面：

谁能解释一下如何解决这个问题？

![在此处输入图像描述](../Images/6d3772e2916f62007d7a239c1981eda9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T08:57:35.607

（右键单击视图标记）中`inherits`属性中`Global.asax`的类名应与`Global.asax.cs`

现在你有

```
<%@ Application Codebehind="Global.asax.cs" 
                Inherits="SiteBuilderAzure_MVC_4.MvcApplication" Language="C#" %> 
```

但我猜`Global.asax.cs`你的 MvcApplication 在不同的命名空间中：

```
namespace SomeOtherNamespace
{
    public class MvcApplication : System.Web.HttpApplication
    {
    }
} 
```

所以只要确保你在你的`Inherits`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-04-24T06:33:33.080

我也面临同样的问题只是删除不需要的文件并清理解决方案并重建它

# c++ - 推荐任何流行的 C++ 代码静态检查工具？

> ID：12017247
> 
> 赞同：0
> 
> 时间：2012-08-18T08:51:53.610
> 
> 标签：c++, static-analysis, static-code-analysis

我们团队有几个新的 c++ 人在工作，每天都有太多丑陋的代码！我讨厌那些使用只读字符串、STL 容器作为参数但没有 const 引用的函数！！！我疯了！！！

有没有静态代码检查器可以找到这些丑陋的代码？我需要在我们的 makefile 中使用这样的工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:29:02.173

是的，使用自动化工具不太可能防止“坏代码”。

对于我自己，我也在我的工作场所这样做，我总是打开尽可能多的警告（通常通过启用高级警告并只关闭“明显愚蠢”的警告；g++ 是唯一的例外因为它没有打开所有东西的选项，所以我做了 -Wall、-Wextra 和一大堆其他的 -W，偶尔会查看手册以查看是否添加了新警告）。

我还使用 -Werror 或 /WX 进行编译。不幸的是，虽然 Linux 和 Windows 头文件现在看起来相当干净，但我收到了一些愚蠢的警告，比如错误的强制转换或错误使用来自 boost 头文件的宏。3rd 方库通常写得很糟糕，警告。

至于静态分析工具，我确实尝试过 cppcheck 和 clang（这两个都是免费的，这就是我尝试它们的原因）。对他们中的任何一个都不感到兴奋；我仍然计划在我的构建软件中添加对其中一个或两个的支持，但它的优先级相当低。两者之一（不记得哪一个）实际上找到了一些东西：一个不必要的分配，任何体面的优化器无论如何都会删除它。我不认为我是一个完美的 0-bugs 开发人员，所以我责怪这些工具。不过，我确实删除了该任务:-)

如果我没记错的话，商业 VisualStudio 版本也有代码分析（在家里我更像是一个快递员，我在工作中坚持使用 MacOS 开发）；也许那个更好。或其他商业工具之一；毕竟，他们必须为他们的钱提供一些东西。

还有一些额外的免费工具我还没有尝试过；我不知道如何完成[http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis#C.2FC.2B.2B](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis#C.2FC.2B.2B)列表，但我希望最终尝试所有可以处理 C++ 的免费工具。

特别是对于您的问题，Wi8kipedia 将“cpplint”描述为“cpplint 实现了 Google 认为的 C++ 编码中的“最佳实践””。我不知道这意味着什么，但 Wikipedia 页面有一个指向“Google C++ Style Guide”pdf 的链接。或者你可以试试看它抱怨什么:-)

此外，我可能不想将此类工具添加到 Makefile（除非您的意思是暗示人们仍然必须调用“make check”才能实际运行它）。将其添加到源代码存储库以在允许之前检查新提交可能太耗时（代码分析几乎是“使用许多额外内容进行编译”，因此需要大量时间），但您可以随时自动运行它接着。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:56:03.750

冻糕或皮棉，谷歌“静态分析工具”

如果您使用 GCC 将这些作为警告，您可能可以通过使用 -Wall 标志来获取其中的一些。

# javascript - 无法使用 Connections javascript API 显示我的连接

> ID：12017250
> 
> 赞同：1
> 
> 时间：2012-08-18T08:52:15.867
> 
> 标签：linkedin身份验证。, javascript, javascript, linkedin

我正在开发一个聊天应用程序，它需要对其用户进行[linkedin身份验证。](/questions/tagged/linkedin "显示标记为“linkedin”的问题")我查看了 Connections [javascript](/questions/tagged/javascript "显示标记为“javascript”的问题") API 页面上的示例代码并想对其进行测试。虽然直接链接[http://developer.linkedinlabs.com/tutorials/jsapi_connections/example.html](http://developer.linkedinlabs.com/tutorials/jsapi_connections/example.html)检索了我的完美连接，但在我的本地主机上运行代码没有产生任何结果（虽然没有错误）。它似乎根本没有获取连接。我尝试先获取 tag:JSON 格式的连接，但即使这样也是徒劳的。但是请注意，Profile API 可以在 localhost 以及您页面上的示例上运行。请帮忙！！

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:55:18.673

听起来您没有正确设置 JavaScript 域 - 您需要将应用程序设置[的 JavaScript API 域字段](https://developer.linkedin.com/documents/getting-started-javascript-api)设置为`http://localhost`，以便应用程序在本地运行时运行。

# php - Symfony2如何使用querybuilder加入多对多关系？

> ID：12017254
> 
> 赞同：0
> 
> 时间：2012-08-18T08:52:38.253
> 
> 标签：php, symfony, doctrine

作为 symfony2 和 querybuilder 的新手，我试图选择我所有的容器，但将结果限制为仅登录用户有权访问的容器。

使用当前代码，我收到此错误：

注意：未定义索引：/var/www/biztv_symfony/vendor/doctrine/lib/Doctrine/ORM/Query/SqlWalker.php 746 行中的容器

这是我对查询的尝试（我已经尝试了这个和其他论坛网站的几个选项，但似乎仍然无法正确理解它......）

```
public function indexAction()
{
    //Get the requisits        
    $companyId = $this->container->get('security.context')->getToken()->getUser()->getCompany()->getId();
    $em = $this->getDoctrine()->getEntityManager();

    //Fetch the containers
    $repository = $this->getDoctrine()->getRepository('BizTVContainerManagementBundle:Container');
    $query = $repository->createQueryBuilder('c')
        ->innerJoin('c.users','u')
        ->where('c.company = :company')
        ->setParameter('company', $companyId)
        ->orderBy('c.name', 'ASC')
        ->getQuery();
    $containers = $query->getResult(); 
```

我通过多对多关系跟踪访问，这是我的用户实体......

```
<?php
// src/BizTV/UserBundle/Entity/User.php

namespace BizTV\UserBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;

use BizTV\BackendBundle\Entity\company as company;

/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 */
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;  

    /**
    * @var object BizTV\BackendBundle\Entity\company
    *  
    * @ORM\ManyToOne(targetEntity="BizTV\BackendBundle\Entity\company")
    * @ORM\JoinColumn(name="company", referencedColumnName="id", nullable=false)
    */
    protected $company; 

    /**
     * @ORM\ManyToMany(targetEntity="BizTV\ContainerManagementBundle\Entity\Container", inversedBy="User")
     * @ORM\JoinTable(name="access")
     */
    private $access;

    public function __construct()
    {
        parent::__construct();

        $this->access = new \Doctrine\Common\Collections\ArrayCollection();

    }
//getters and setters... 
```

这是我的容器实体：

```
<?php

namespace BizTV\ContainerManagementBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

use BizTV\UserBundle\Entity\User as user;

/**
 * BizTV\ContainerManagementBundle\Entity\Container
 *
 * @ORM\Table(name="container")
 * @ORM\Entity
 */
class Container
{

    /**
     * @var integer $id
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @var string $name
     * @Assert\NotBlank(message = "Du måste ange ett namn för området") 
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;
    //TODO: form handler assuring no name is used twice in same company

    /**
    * @var object BizTV\BackendBundle\Entity\company
    *  
    * @ORM\ManyToOne(targetEntity="BizTV\BackendBundle\Entity\company")
    * @ORM\JoinColumn(name="company", referencedColumnName="id", nullable=false)
    */
    protected $company; 

    /**
     * @ORM\ManyToMany(targetEntity="BizTV\UserBundle\Entity\User", mappedBy="Container")
     */
    private $users;

    public function __construct() {
        $this->users = new \Doctrine\Common\Collections\ArrayCollection();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T11:00:53.980

在`Container`实体中，当你指定`$users`属性映射时， 的值`mappedBy`很重要：你需要在类中指定逆属性的**名称**`User`。

在这里，我们有`Container::$users`<-> `User::$access`。

将您的注释更改为：

```
class User
{
    /**
     * @ORM\ManyToMany(targetEntity="BizTV\ContainerManagementBundle\Entity\Container", inversedBy="users")
     * @ORM\JoinTable(name="access")
     */
    private $access;
}

class Container
{
    /**
     * @ORM\ManyToMany(targetEntity="BizTV\UserBundle\Entity\User", mappedBy="access")
     */
    private $users;
} 
```

我鼓励您阅读[有关关联的教义 orm 文档部分](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#many-to-many-bidirectional)，并在您的所有关联中验证和修复此问题。

# objective-c - 使用 NSMutableArray 时出错

> ID：12017256
> 
> 赞同：0
> 
> 时间：2012-08-18T08:53:03.993
> 
> 标签：objective-c, ios5, nsmutablearray, multidimensional-array

我正在尝试使用 NSArrays 填充此处名为“data”的 NSMutableArray。当我尝试检索时，我得到 EXC_BAD_ACCESS。这是我的填充代码

。H

```
@property (nonatomic, retain) NSMutableArray* data; 
```

.m

```
@synthesize data; 
```

在 viewDidLoad

```
self.data = [NSMutableArray array];
NSArray* ar1 = [[NSArray arrayWithObjects: @"text1", @"text2", @"text3", @"text4", nil] autorelease];
[self.data addObject:ar1]; 
```

现在在其他方法中，我试图让内部 NSArray 回来：

```
NSArray* sItem = [NSArray array]; 
sItem = (NSArray*)[self.data objectAtIndex:0];

if (sItem)
{
    if([sItem isKindOfClass:[NSArray class]])/////ERROR LINE
    {
        NSLog(@"Its an Array.");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:03:10.260

在`-viewDidLoad`中，您过度释放`ar1`。它返回**已经**自动释放。您知道这一点是因为您通过 而`arrayWithObjects:`不是通过`alloc`/获得了数组`init`。

模式是：

```
NSArray * temporaryArray = [ [ [ NSArray alloc ] initWithObjects:obj_0, ..., obj_n, nil ] autorelease ] 
```

**或者**

```
NSArray * temporaryArray = [ NSArray arrayWithObjects:obj0, ..., obj_n, nil ] ; 
```

您应该将您的项目切换到 ARC——它会为您处理这个问题。

编辑：

你也可以重写

```
NSArray* sItem = [NSArray array]; 
sItem = (NSArray*)[self.data objectAtIndex:0];
if (sItem) {
    if([sItem isKindOfClass:[NSArray class]]){ /////ERROR LINE
         NSLog(@"Its an Array.");
    } 
```

作为

```
NSArray* sItem = nil ;
sItem = [self.data objectAtIndex:0];
if( [ sItem isKindOfClass:[ NSArray class ] ] )
{
    NSLog(@"Its an Array.");
} 
```

甚至

```
NSArray* sItem = [self.data objectAtIndex:0];
if( [ sItem isKindOfClass:[ NSArray class ] ] )
{
    NSLog(@"Its an Array.");
} 
```

关于您的代码的注释：

1.  您正在分配一个新的`NSArray`并将其分配给指针`sItem`。当您为 分配另一个值时，该数组会立即被丢弃`sItem`。只需初始化`sItem`为即可`nil`。
2.  您无需检查`if (sItem)`... Sending `-isKindOfClass:`（或实际上的任何消息）`nil`将始终返回`NO`/ `nil`/ `0`。

最后，我经常通过执行以下操作来检查数组是否存在：

```
if ( sItem.length > 0 ) { /* yes, valid, non-empty array */ } 
```

此快捷方式特别适用于字符串。

# c# - DataGridView 在创建时为列 0 引发 SelectionChanged 事件

> ID：12017257
> 
> 赞同：0
> 
> 时间：2012-08-18T08:53:06.850
> 
> 标签：c#, datagridview, event-handling

我有一个扩展*DataGridView*的基类：

```
public abstract class MyDataGridView : DataGridView 
```

然后我有一个扩展*MyDataGridView*的类。这是类定义和构造函数：

```
// ::FunctionGridView
public class FunctionGridView : MyDataGridView 
{
    private static int NUM_COLUMNS = 12;
    private static int NUM_ROWS = 1;

    public FunctionGridView()         
    {
        // call the method in the base class to setup the grid
        setupGridView(NUM_ROWS, NUM_COLUMNS);
    }
} 
```

用于我的数据网格的列类型是*DataGridViewCheckBoxColumn*。这是设置列的代码（在基类中定义）：

```
// ::MyDataGridView
protected void setupGridView(int numRows, int numColumns)
{
    for (int i = 0; i < numColumns; i++)
    {
        DataGridViewCheckBoxColumn column = new DataGridViewCheckBoxColumn();
        column.Name = "Column" + (i + 1).ToString();
        this.Columns.Add(column);
    }
} 
```

我想在用户单击单元格时捕获*SelectionChanged*事件，然后切换所选单元格的复选框。回调在基类构造函数中设置如下：

```
// ::MyDataGridView
// initialize the controls then add the event handler
public MyDataGridView()
{            
    initialize();
    this.SelectionChanged += selectionChanged;
} 
```

选择更改回调定义如下：

```
// ::MyDataGridView
// get the checkbox _checked_ value and toggle it for the selected cell
private void handleSelectionChanged(object sender, EventArgs e)
{
    int currentRow = this.CurrentCell.RowIndex;
    int currentColumn = this.CurrentCell.ColumnIndex;
    bool cellChecked = (bool)this.Rows[currentRow].Cells[currentColumn].Value;
    this.Rows[currentRow].Cells[currentColumn].Value = !cellChecked;
} 
```

一切正常，除了有一个我不知道如何处理的异常情况..

当程序启动并构建*DataGridView*并将其添加到我的*面板*时，最初为*Row[0].Cell[0]引发**SelectionChanged*事件。即使用户从未实际单击该单元格，也会调用此事件。

 *结果是，当我的程序启动时，第一个单元格在没有任何用户点击的情况下被检查。我的数据网格视图最终如下所示：

![DataGridView 初始单元格已检查](../Images/f6c037a6895d44348c0edf3ce96ca905.png)

我是否需要一种方法来确定是否在初始化期间抛出了*SelectionChanged回调，而**不是*来自用户单击然后退出我的回调而不切换复选框值？

```
// ::MyDataGridView
private void selectionChanged(object sender, EventArgs e)
{
    **// if (e.isInitializing()) return;**
    ....
    ....
} 
```

我似乎记得在 Java *ActionEvent*类中，您可以调用*getSource*以确保事件是由控件触发的，而不是由其他源触发的。C#中是否有等价的东西？

**==================================================== ==============================**

*注意*为了让我的问题简单，我使用了基本名称并省略了大部分细节。真正的类/基类名称是 FunctionKeyTimer 和 KeyTimer（基类）。如果有帮助，这里是类图和完整的源代码：

![类图](../Images/560bdecbdf2df2dbaa7533ccdb7a5310.png)

```
public abstract class KeyTimer : DataGridView
{
    public static int WIDTH = 640;
    public static int HEIGHT = 40;

    private bool initialCheckedValue = false;

    public KeyTimer()
    {            
        initialize();
        this.SelectionChanged += selectionChanged;
    }

    public KeyTimer(bool initialChecked)
    {            
        this.initialCheckedValue = initialChecked;
        initialize();
        this.SelectionChanged += selectionChanged;
    }

    protected void setupGridView(int numRows, int numColumns, string columnNamePrefix)
    {
        for (int i = 0; i < numColumns; i++)
        {
            DataGridViewCheckBoxColumn column = new DataGridViewCheckBoxColumn();
            column.Resizable = DataGridViewTriState.False;
            column.SortMode = DataGridViewColumnSortMode.NotSortable;
            column.Name = columnNamePrefix + (i + 1).ToString();
            this.Columns.Add(column);
        }

        for (int i = 0; i < numRows; i++)
        {
            DataGridViewRow row = new DataGridViewRow();
            this.Rows.Add(row);
        }

        foreach (DataGridViewRow row in this.Rows)
        {
            for (int i = 0; i < numColumns; i++)
            {
                row.Cells[i].Value = this.initialCheckedValue;
            }
        }
    }

    private void selectionChanged(object sender, EventArgs e)
    {
        int currentRow = this.CurrentCell.RowIndex;
        int currentColumn = this.CurrentCell.ColumnIndex;
        bool cellChecked = (bool)this.Rows[currentRow].Cells[currentColumn].Value;
        this.Rows[currentRow].Cells[currentColumn].Value = !cellChecked;
    }

    private void initialize()
    {
        this.AllowUserToDeleteRows = false;
        this.AllowUserToResizeColumns = false;
        ....
        ....
    }
}

public class FunctionKeyTimer : KeyTimer
{
    private static int NUM_COLUMNS = 12;
    private static int NUM_ROWS = 1;
    private static string COLUMN_NAME_PREFIX = "F";

    public FunctionKeyTimer()         
    {
        setupGridView(NUM_ROWS, NUM_COLUMNS, COLUMN_NAME_PREFIX);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:49:54.120

开箱即用`DataGridView`也会出现此问题。

`DataBindingComplete`标准修复是在事件处理程序期间附加您的选择更改处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T09:41:51.340

好吧，当我使用表单编辑器时，我从来没有遇到过这样的事件。在绘制组件之前不会调用事件。

我认为这是因为您在以编程方式选中该框之前添加了事件处理程序。因此它是由您自己的代码触发的。放入一些调试消息以确定操作顺序。它可能就像移动一些功能一样简单。

除此之外，尝试在您的事件侦听器中打印出**sender.name**以查看它是否在用户检查和编程检查之间发生变化。

我希望这会有所帮助:)

~ 丹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:00:04.323

您可以使用 ：

```
DataGridViewCheckBoxColumn cb = new DataGridViewCheckBoxColumn();
cb.Name = "The Name";
cb.HeaderText = "The Name";

dataGridView1.Columns.Add(cb);
row.Cells[2].Value = true;
dataGridView1.Rows[0].Cells[6].Value = true; 
```*

# javascript - 悬停时图像更改？

> ID：12017258
> 
> 赞同：-5
> 
> 时间：2012-08-18T08:53:08.073
> 
> 标签：javascript, css, hover

> **可能重复：**
> [鼠标悬停时更改图像](https://stackoverflow.com/questions/1468085/change-image-on-mouseover)

谁能告诉我如何在以下代码中将 pic1_s 转换为 pic9_s 图像，以便在它们悬停时更改为不同的图片？我有每张图片的不同版本，它们用不透明层变暗并有文字。他们已经有了 jquery 灯箱效果和轮播效果。可以在这里找到：[http](http://www.meanbeangames.com/) ://www.meanbeangames.com/ （主图下并列三张）。

```
 <div class="image_carousel">
            <div id="foo2">
                <a href="img/pic1_b.jpg" rel="gallery" title="Death From Above">
                    <img src="img/pic1_s.jpg" class="fancy_thumb" width="320" height="198" />
                </a>
                <a href="img/pic2_b.jpg" rel="gallery" title="Tree Under Attack">
                    <img src="img/pic2_s.jpg" class="fancy_thumb" width="320" height="198" />
                </a>
                <a href="img/pic3_b.jpg" id="pic3" rel="gallery" title="World Map">
                    <img src="img/pic3_s.jpg" class="fancy_thumb" width="320" height="198" />
                </a>
                <a href="img/pic4_b.jpg" rel="gallery" title="Combo Attack">
                    <img src="img/pic4_s.jpg" class="fancy_thumb" width="320" height="198" />
                </a>
                <a href="img/pic5_b.jpg" rel="gallery" title="Robots Strike">
                    <img src="img/pic5_s.jpg" class="fancy_thumb" width="320" height="198" />
                </a>
                <a href="img/pic6_b.jpg" rel="gallery" title="Back Stab">
                    <img src="img/pic6_s.jpg" class="fancy_thumb" width="320" height="198" />
                </a>
                <a href="img/pic7_b.jpg" rel="gallery" title="Critical Hit">
                    <img src="img/pic7_s.jpg" class="fancy_thumb" width="320" height="198" />
                </a>
                <a href="img/pic8_b.jpg" rel="gallery" title="All Out War">
                    <img src="img/pic8_s.jpg" class="fancy_thumb" width="320" height="198" />
                </a>
                <a href="img/pic9_b.jpg" rel="gallery" title="Air Defense">
                    <img src="img/pic9_s.jpg" class="fancy_thumb" width="320" height="198" />
                </a>

            </div>

            <a class="prev" id="foo2_prev" href="#"><span>prev</span></a>

            <a class="next" id="foo2_next" href="#"><span>next</span></a>

        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:58:27.240

将它们设置为背景图像`<a>`：

并在悬停时切换它们。

```
a:link, a:visited {
  display: block;
  background: url(image-light.jpg) no-repeat 0 0;
  width: width of image;
  height: height of image;
}
a:hover, a:active, a:focus {
  background-image: url(image-dark.jpg);
} 
```

# c# - 将删除触发器与 gridview 删除一起使用

> ID：12017259
> 
> 赞同：0
> 
> 时间：2012-08-18T08:53:08.970
> 
> 标签：c#, asp.net, sql-server

当删除表中的一行时，我正在使用触发器概念，同一行将被插入到另一个表中。现在的问题是我正在使用删除命令字段从网格视图中删除该行。当我删除该行时，我无法获取已删除行的值以使其存储在另一个表中。该行正在插入，但它都是空的。

现在我需要知道如何将已删除行中的值复制到另一个表中以进行插入。

尽快需要帮助

谢谢你。

这是触发器

不，这是我的触发功能。

```
CREATE TRIGGER tgrfortrash ON [dbo].[Proj_details] 
AFTER DELETE
AS
    declare @proj_id varchar(10);
    declare @proj_name varchar(100);
    declare @front_end varchar(15);
    declare @back_end varchar(15);
    declare @proj_path varchar(100);

    select @proj_id=d.Proj_id from deleted d;   
    select @proj_name=d.Proj_name from deleted d;   
    select @front_end=d.Front_end from deleted d;
    select @back_end=d.Back_end from deleted d;

insert into Trash_details
(Proj_id,Proj_name,Front_end,Back_end,Proj_path) 
    values(@proj_id,@proj_name,@front_end,@back_end,@proj_path); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:01:56.500

您可以在删除触发器中使用魔术表并获取整个删除的行

这是声明

```
SELECT * FROM deleted -- this statement in trigger return you deleted row 
```

* * *

编辑

为什么你为每个值使用变量你可以这样写

```
 INSERT INTO Trash_details(Proj_id,Proj_name,Front_end,Back_end,Proj_path) 
       Select Proj_id,Proj_name,Front_end,Back_end,Proj_path From deleted 
```

没有必要变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:10:54.080

你的**触发器**应该是这样的？这可以帮助您尝试删除哪些多个用户

```
CREATE TRIGGER tgrfortrash ON [dbo].[Proj_details] 
AFTER DELETE
AS
Begin Try
    Set NoCount ON
    Set Xact_Abort ON
    Begin Tran
       INSERT INTO Trash_details(Proj_id,Proj_name,Front_end,Back_end,Proj_path) 
       Select Proj_id,Proj_name,Front_end,Back_end,Proj_path From deleted
    Commit Tran
End Try
Begin Catch
    Rollback Tran
End Catch 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T10:11:48.123

当您从 datagidview 中删除行时，将执行事件 UserDeletingRow。DataGridViewRowCancelEventArgs 为您提供正在删除的行。您可以从那里获取值以将它们放入表中。

# ruby-on-rails - 在方法参数中传递大对象可以吗？

> ID：12017266
> 
> 赞同：2
> 
> 时间：2012-08-18T08:55:43.357
> 
> 标签：ruby-on-rails, ruby

我正在做一个 Rails 应用程序，人们可以在其中进行测验。我有一个`BrowserGame`负责控制器逻辑（会话、重定向等）的模型。目前，这是我的`#initialize`方法：

```
class BrowserGame
  def initialize(controller)
    @controller = controller
  end
end 
```

在控制器中我有一个方法

```
class GamesController < ApplicationController

  # actions

  private

  def browser_game
    BrowserGame.new(self)
  end
end 
```

如您所见，我将整个控制器传递给`BrowserGame#initialize`（因此我可以使用会话和其他人进行操作）。这是一个好主意吗？由于控制器实例是一个大对象，是否有任何副作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T09:07:02.233

是的，可以将大对象作为方法参数传递。您没有将对象放在堆栈上，只是指向它的指针。至于副作用——你`@controller`从内部做的任何事情都`BrowserGame`可以通过对控制器的任何其他引用看到，但这可能是你已经期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:12:21.293

传递大对象没有问题。

正如 Darshan 所说，它只是一个指针。

如果您要分叉进程/线程或尝试创建延迟作业以在后台运行，则最好只传递可序列化对象。

# php - 计算 2 个字段中不同值的出现次数

> ID：12017271
> 
> 赞同：4
> 
> 时间：2012-08-18T08:55:53.070
> 
> 标签：php, mysql

我试图找到一个 MySQL 查询，该查询将在特定字段中找到不同的值，计算该值在 2 个字段（1_user，2_user）中出现的次数，然后按计数对结果进行排序。

示例数据库

```
+--------+------------+------------+
| 编号 | 1_用户 | 2_用户 |
+--------+------------+------------+
| 1 | 2 | 1 |
| 2 | 3 | 2 |
| 3 | 8 | 7 |
| 4 | 1 | 8 |
| 5 | 2 | 8 |
| 6 | 3 | 8 |  
+--------+------------+------------+

```

预期结果

```
用户数
----- -----
8 4
2 3
3 2
1 2

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T09:06:30.883

**查询**

```
SELECT user, count(*) AS count
FROM
(
    SELECT 1_user AS USER FROM test

    UNION ALL

    SELECT 2_user FROM test
) AS all_users
GROUP BY user
ORDER BY count DESC 
```

**解释**

列出第一列中的所有用户。

```
SELECT 1_user AS USER FROM test 
```

将它们与第二列中的用户结合起来。

```
UNION ALL
SELECT 2_user FROM test 
```

这里的技巧是保留重复值的[UNION ALL 。](http://dev.mysql.com/doc/refman/5.0/en/union.html)

剩下的很简单——从子查询中选择你想要的结果：

```
SELECT user, count(*) AS count 
```

按用户汇总：

```
GROUP BY user 
```

并规定顺序：

```
ORDER BY count DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T09:02:04.403

```
SELECT u, count(u) AS cnt 
FROM (
    SELECT 1_user AS u FROM table
    UNION ALL
    SELECT 2_user AS u FROM table
) subquery 
GROUP BY u
ORDER by cnt DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T09:00:37.990

采取2个查询：

```
SELECT COUNT(*) FROM table GROUP BY 1_user

SELECT COUNT(*) FROM table GROUP BY 2_user 
```

现在将它们组合起来：

```
SELECT user, SUM(count) FROM
  ((SELECT 1_user as user FROM table)
  UNION ALL
  (SELECT 2_user as user FROM table))
GROUP BY user, ORDER BY count DESC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T09:13:26.707

我认为这是您正在寻找的，因为您的预期结果不包括`7`

```
select usr, count(usr) cnt from
(
   select user_1 usr from users
   union all
   select user_2 usr from users
) u
where u.usr in (select user_1 from users)
group by usr
order by count(u.usr) desc 
```

# javascript - Javascript：可编辑的方块

> ID：12017281
> 
> 赞同：0
> 
> 时间：2012-08-18T08:56:53.250
> 
> 标签：javascript, 2d, edit, polygon

如何绘制可编辑的正方形，例如

![在此处输入图像描述](../Images/564242703edb67b9210fcd1201a6f6af.png)

在与主要浏览器最新版本兼容的 javascript 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:59:42.747

[本](http://simonsarris.com/blog/510-making-html5-canvas-useful)介绍向您展示了如何使用 HTML5 Canvas 来管理形状。而[这个](http://simonsarris.com/blog/225-canvas-selecting-resizing-shape)，向您展示了如何调整这些形状的大小。

[这是他最终产品的演示](http://simonsarris.com/project/canvasdemo/demo2.html)

# c++ - 部署时不显示窗口下的qtcreator托盘图标

> ID：12017282
> 
> 赞同：1
> 
> 时间：2012-08-18T08:56:55.057
> 
> 标签：c++, qt, deployment, qt-creator

我正在尝试部署在 QT Creator 中制作的 QT 应用程序，该应用程序在关闭时会返回到系统托盘。

我已经制作了一个 svg 托盘图标，当我从 QT Creator 运行它时，无论是在窗口 7 下的调试模式还是发布模式下，都会显示托盘图标，但是当我将所有内容复制到另一个目录以从中制作可分发的存档时，托盘图标不再显示。

当然，我已经在寻找解决方案，但我找到的所有东西，我都做了。

所以我有什么：

项目根目录中的trayicon.svg 文件

*   创建 qrc 文件，将 trayicon.svg 添加到资源文件根目录中
*   在项目 .pro 文件中：RESOURCES += resources.qrc
*   将二进制 + 必要的 dll 复制到目标目录
*   将 QT 插件 imageformats/* 复制到目标目录 imageformats
*   添加 QApplication a(argc, argv); a.addLibraryPath(a.applicationDirPath()); 到 main.cpp

这就是我到目前为止找到的所有东西，但系统托盘图标仍然没有出现

我错过了什么？

（顺便说一下，当前的 qt 4.8 + 当前的 qtcreator）

@netrom

MainWindow 中的代码： QMainWindow 构造函数：

```
trayIcon = new QSystemTrayIcon(this);
showAction = new QAction(tr("&Show"), this);
connect(showAction, SIGNAL(triggered()), this, SLOT(show()));
quitAction = new QAction(tr("&Quit"), this);
connect(quitAction, SIGNAL(triggered()), qApp, SLOT(quit()));
trayIconMenu = new QMenu(this);
trayIconMenu->addAction(showAction);
trayIconMenu->addSeparator();
trayIconMenu->addAction(quitAction);
trayIcon->setContextMenu(trayIconMenu);
connect(trayIcon, SIGNAL(activated(QSystemTrayIcon::ActivationReason)), this, SLOT(iconActivated(QSystemTrayIcon::ActivationReason)));
trayIcon->setIcon(QIcon(":trayicon.svg"));
trayIcon->show(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-27T05:20:03.583

1.  在您的应用程序目录中创建 iconegines 目录（例如：c:\MyApp\iconengines）。
2.  将 qsvgicon.dll 从 qt 插件目录（在我的例子中是 c:\qt\5.4\mingw491_32\plugins\iconengines\qsvgicon.dll）复制到这个新目录（例如：c:\MyApp\iconengines\qsvgicon.dll）。
3.  将 QtSvg.dll 从 Qt bin 目录（在我的例子中是 c:\qt\5.4\mingw491_32\bin\Qt5Svg.dll）复制到您的应用程序目录（例如：c:\MyApp\Qt5Svg.dll）。

PS我知道我迟到了，这个答案适用于那些将谷歌搜索同样问题的人。

# html - CSS代码结构反馈/优化

> ID：12017287
> 
> 赞同：-1
> 
> 时间：2012-08-18T08:57:40.037
> 
> 标签：html, css

现在我已经完成了网站的设计，我正在尝试优化 css 代码（使用了 stackoverflow 用户、论坛、我自己的代码等提供的代码片段）。我已经尝试过清理它，但我确信还有一些改进的空间。您的反馈将不胜感激！非常感谢

CSS：

```
html, body, #contact-us {
    height: 100%;
}
body {
    font: 12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 400;
    color: #000;
    margin: 0 auto;
    padding: 0;
    -webkit-text-size-adjust: none;
}
.clearfix {
    display: inline-block;
}
* html .clearfix {
    height: 1%;
}
.clearfix {
    display: block;
}
p {
    font: 12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 400;
    color: #000;
}
h1 {
    font: 24px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 300;
    letter-spacing:1px;
    color: #0A4672;
}
h2 {
    font: 22px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 500;
    letter-spacing:1px;
    color: #467FD9;
}
span.team-function {
    font: 12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    color: #467FD9;
}
span.activity-title {
    font: 22px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 300;
    letter-spacing:1px;
    text-transform:uppercase;
    color: #467FD9;
}
p.activity-footnote {
    font: 10px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 400;
    text-align: left;
    color: #000;
}
/* Positionning the logo on top left side */
#logo {
    position: fixed;
    float: left;
    top: 20px;
    left: 2%;
    font: 28px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 400;
    z-index:1000;
}
/* End Logo */

/* Horizontal Menu, aligned on the right side */
#nav {
    right: 2%;
    list-style: none;
    position: fixed;
    top: 30px;
    z-index: 1000;
}
#nav > li {
    display: inline-block;
    float: left;
    zoom: 1;
    margin-left: 5px;
    margin-right: 5px;
}
#nav a {
    font: 12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 600;
    letter-spacing: 1px;
    float: left;
    top: 30px;
    padding-left: 15px;
    padding-right: 15px;
    display: inline-block;
    font-size: 11px;
    text-decoration: none;
    height: 24px;
    color: #666;
    line-height: 24px;
    text-align: center;
    -webkit-box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    text-transform: uppercase;
    background: white;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
    filter: alpha(opacity=80);
    opacity: 0.8;
}
#nav a:hover {
    background: #dedede;
}
#nav .current a {
    background: #666;
    color: #ededed;
}
/* End Menu */

/* Page Presentation */
#presentation {
    height: 1300px;
    background: #afc9ff;
    background: url(../images/bg-24.jpg) no-repeat center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
}
#presentation-container {
    width:810px;
    padding-top: 15%;
    margin-left: auto;
    margin-right: auto;
}
.presentation-highlights {
    text-align: justify;
    margin-top:20px;
    margin-right:7px;
    float:left;
    padding:10px;
    font: 12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 400;
    width: 230px;
    Height:90px;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=85)";
    filter: alpha(opacity=95);
    opacity: 0.85; /* For IE8 and earlier */
    border: 1px dotted #666;
    background: #fff;
}
/* End Page presentation */

/* Page Equipe */
#team {
    height: 1300px;
    padding-top: 150px;
    background: #8aba56;
    background: url(../images/bg-23.jpg) no-repeat center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
}
#team-container {
    width:960px;
    background-color:#FFFFFF;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=83)";
    filter: alpha(opacity=83);
    opacity: 0.83; /* For IE8 and earlier */
    margin-left: auto;
    margin-right: auto;
    background: #fff;
    border: 1px dotted #666;
}
.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}
#team-left {
    color:#000;
    padding-left:20px;
    padding-top:20px;
    width: 20%;
    float: left;
    position: relative;
}
#team-right {
    font:12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight:400;
    padding-left:25px;
    padding-top:24px;
    padding-bottom:20px;
    color:#000;
    width: 70%;
    float: left;
    position: relative;
    text-align:justify;
}
.image-center {
    text-align: center;
    display: block;
    margin: 0 auto;
    padding-top: 30px;
    padding-right: -15px;
}
/* Page Plan d'Activité */
#activity {
    height: 1300px;
    background: #8aba56;
    padding-top: 150px;
    background: url(../images/bg-22.jpg) no-repeat center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
}
#activity-container {
    width: 640px;
    font:12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight:400;
    text-align:justify;
    background-color: #FFFFFF;
    font: 12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    color:#000;
    font-weight: 400;
    padding:25px;
    margin-left: auto;
    margin-right: auto;
    border: 1px dotted #666;
    background: #fff url(../images/norway-map.png) no-repeat right center;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=93)";
    filter: alpha(opacity=93);
    opacity: 0.93; /* For IE8 and earlier */
}
/* End Page Activity */

/* Page Source */
#source {
    height: 1300px;
    background: #8aba56;
    padding-top: 150px;
    background: url(../images/bg-28.jpg) no-repeat center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
}
#source-container {
    width: 800px;
    margin-left: auto;
    margin-right: auto;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=93)";
    filter: alpha(opacity=93);
    opacity: 0.93; /* For IE8 and earlier */
}
.source-title-box {
    color: #000;
    background: #fff;
    width: 230px;
    position: relative;
    margin-top:10px;
    border: 1px dotted #666;
}
.source-title-box a {
    color:#467FD9;
    display:block;
    text-decoration:none;
    padding: 15px;
}
.source-title-box a:hover {
    background-color:#467FD9;
    color:#FFFFFF;
}
#source-region, #source-oursource {
    font:12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight:400;
    text-align:justify;
    background: #fff;
    color: #000;
    padding:15px 20px 20px 20px;
    display:block;
    width: 510px;
    float: right;
    position: relative;
    border: 1px dotted #666;
    line-height:1px;
}
#source-oursource {
    display:none;
}
#source-oursource p {
    margin-bottom:5px;
}
#source-region p {
    margin-bottom:5px;
    padding-right:10px;
}
/* Page Medias */
#medias {
    height: 1300px;
    background: #8aba56;
    padding-top: 150px;
    background: url(../images/bg-18.jpg) no-repeat center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
}
#medias-container {
    width: 800px;
    margin-left: auto;
    margin-right: auto;
}
#medias-title-box {
    color: #000;
    background: #fff;
    padding: 15px;
    width: 200px;
    float: left;
    position: relative;
    border: 1px dotted #666;
}
#medias-table-header {
    background: #fff;
    color: #000;
    width: 490px;
    float: right;
    position: relative;
    border: 1px dotted #666;
}
#medias-table-header-type, #medias-table-header-desc, #medias-table-header-lang {
    font: 22px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 200;
    padding: 15px;
    background: #fff;
    color: #000;
    width: 50px;
    float: left;
    position: relative;
}
#medias-table-header-desc {
    width: 200px;
}
#medias-table-header-lang {
    width: 85px;
}
.medias-table-content {
    margin-top: 10px;
    background: #fff;
    color: #000;
    width: 490px;
    float: right;
    position: relative;
    border: 1px dotted #666;
}
.medias-table-content-type, .medias-table-content-desc, .medias-table-content-lang {
    padding:10px 15px 10px 15px;
    background: #fff;
    text-align:center;
    color: #000;
    width: 50px;
    float: left;
    position: relative;
}
.medias-table-content-desc {
    font: 14px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 200;
    padding:10px 15px 10px 15px;
    width: 200px;
    text-align:left;
    Vertical-align:middle;
}
.medias-table-content-desc a {
    text-decoration:none;
    color:#000;
    Vertical-align:middle;
}
.medias-table-content-desc a:hover {
    color:#0A4672;
    text-decoration:underline;
}
.medias-table-content-lang {
    width: 85px;
}
/* end page medias */

/* Page Contact */
#contact-us {
    background: #8aba56;
    padding: 0;
    position: relative;
    background: url(../images/bg-26.jpg) no-repeat center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
}
#contact-box {
    text-align:center;
    font: 12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 400;
    width: 300px;
    Height:120px;
    padding:15px;
    /*margin-left: auto;
    margin-right: auto;*/
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=85)";
    filter: alpha(opacity=95);
    opacity: 0.85; /* For IE8 and earlier */
    border: 1px dotted #666;
    background: #fff;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -80px;
    margin-left: -150px;
}
#contact-box p {
    font: 12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 400;
    color: #000;
    letter-spacing:2px;
    margin-bottom:3px;
}
#contact-box h2 {
    font: 22px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 500;
    letter-spacing:2px;
    color: #467FD9;
}
.highlightit img {
filter:progid:DXImageTransform.Microsoft.Alpha(opacity=50);
    -moz-opacity: 1;
    opacity: 1;
}
.highlightit:hover img {
filter:progid:DXImageTransform.Microsoft.Alpha(opacity=100);
    -moz-opacity: 0.7;
    opacity: 0.7;
}
/* Section Footer with social icons on the left and address and flags on the right */
#footer {
    position: fixed;
    bottom: 0;
    color: #333;
    left: 0;
    z-index: 999;
    width: 96%;
    text-align: right;
    padding: 30px 2%;
    vertical-align: bottom;
}
#social {
    position: absolute;
    vertical-align: middle;
    left: 2%;
    color: #333;
}
.txtcentered {
    width: 300px;
    height: 200px;
    position: absolute;
    left: 50%;
    top: 50%;
    margin: -100px 0 0 -150px;
}
.fb_iframe_widget, iframe.twitter-share-button {
    display: inline-block;
    vertical-align: middle;
}
span.languageselector {
    display: inline-block;
    height: 20px; /* same height as #social div */
    line-height: 20px; /* same as line-height */
}
/*contact form*/
#inline {
    display: none;
    width: 600px;
}
.txt {
    display: inline-block;
    color: #676767;
    width: 420px;
    font-family: Arial, Tahoma, sans-serif;
    margin-bottom: 10px;
    border: 1px dotted #ccc;
    padding: 5px 9px;
    font-size: 1.2em;
    line-height: 1.4em;
}
.txtarea {
    display: block;
    -webkit-resize: none;
    -moz-resize: none;
    -webkit-resize: none;
    -moz-resize: none;
    resize: none;
    color: #676767;
    font-family: Arial, Tahoma, sans-serif;
    margin-bottom: 10px;
    width: 500px;
    height: 150px;
    border: 1px dotted #ccc;
    padding: 5px 9px;
    font-size: 1.2em;
    line-height: 1.4em;
}
.txt:focus, .txtarea:focus {
    border-style: solid;
    border-color: #bababa;
    color: #444;
}
input.error, textarea.error {
    border-color: #973d3d;
    border-style: solid;
    background: #f0bebe;
    color: #a35959;
}
input.error:focus, textarea.error:focus {
    border-color: #973d3d;
    color: #a35959;
}
#send {
    color: #dee5f0;
    display: block;
    cursor: pointer;
    padding: 5px 11px;
    font-size: 1.2em;
    border: solid 1px #224983;
    border-radius: 5px;
    background: #1e4c99;
    background: -webkit-gradient(linear, left top, left bottom, from(#2f52b7), to(#0e3a7d));
    background: -webkit-linear-gradient(top, #2f52b7, #0e3a7d);
    background: -moz-linear-gradient(top, #2f52b7, #0e3a7d);
    background: -o-linear-gradient(top, #2f52b7, #0e3a7d);
    background: -ms-linear-gradient(top, #2f52b7, #0e3a7d);
    background: linear-gradient(top, #2f52b7, #0e3a7d);
 filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#2f52b7', endColorstr='#0e3a7d');
}
#send:hover {
    background: #183d80;
    background: -webkit-gradient(linear, left top, left bottom, from(#284f9d), to(#0c2b6b));
    background: -webkit-linear-gradient(top, #284f9d, #0c2b6b);
    background: -moz-linear-gradient(top, #284f9d, #0c2b6b);
    background: -o-linear-gradient(top, #284f9d, #0c2b6b);
    background: -ms-linear-gradient(top, #284f9d, #0c2b6b);
    background: linear-gradient(top, #284f9d, #0c2b6b);
 filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#284f9d', endColorstr='#0c2b6b');
}
#send:active {
    color: #8c9dc0;
    background: -webkit-gradient(linear, left top, left bottom, from(#0e387d), to(#2f55b7));
    background: -webkit-linear-gradient(top, #0e387d, #2f55b7);
    background: -moz-linear-gradient(top, #0e387d, #2f55b7);
    background: -o-linear-gradient(top, #0e387d, #2f55b7);
    background: -ms-linear-gradient(top, #0e387d, #2f55b7);
    background: linear-gradient(top, #0e387d, #2f55b7);
 filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0e387d', endColorstr='#2f55b7');
} 
```

HTML

```
<!DOCTYPE html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<meta name="description" content="."/>
<link href="../css/reset.css" rel="stylesheet" type="text/css" />
<link href="../css/style.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" media="all" href="../fancybox/jquery.fancybox.css" />
<link href='http://fonts.googleapis.com/css?family=Open+Sans:700,600,500,400,300' rel='stylesheet' type='text/css' />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" /></script>
<script src="../js/jquery.queryloader2.js" type="text/javascript" /></script>
<script type="text/javascript" src="../js/scripts.js" /></script>
<script type="text/javascript" src="../fancybox/jquery.fancybox.js?v=2.0.6" /></script>
</head>
<body>
<!--[if lte IE 6]><script src="../js/ie6/warning.js"></script><script>window.onload=function(){e("js/ie6/")}</script><![endif]-->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/fr_FR/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div id="logo"><img src="../images/logo-khklhll-white.png" alt="" title="" /></div>
<ul id="nav">
  <li class="current"><a href="#presentation">Accueil</a></li>
  <li><a href="#activity">L'Entreprise</a></li>
  <li><a href="#team">L'équipe</a></li>
  <li><a href="#source">Notre Eau</a></li>
  <li><a href="#medias">Presse</a></li>
  <li><a href="#contact-us">Contact</a></li>
</ul>
<div id="presentation">
  <div id="presentation-container">
    <h1>S.</h1>
    <h1>No</h1>
    <div class="presentation-highlights">
      <p><b>Eau </b></p>
      <p>S.</p>
    </div>
    <div class="presentation-highlights">
      <p><b>Ee</b></p>
      <p>Sle.</p>
    </div>
    <div class="presentation-highlights">
      <p><b>Ds</b></p>
      <p>Sts.</p>
    </div>
  </div>
</div>
<!--END page1-->
<div id="activity">
  <div id="activity-container">
    <p><span class="activity-title">khklhll, naturlig mineralvann, ren natur</span></p>
    <br />
    <p>khklhll AS was2011.</p>
    <br />
    <p>A lot otors.</p>
    <br />
    <p>khklhll AS ha).</p>
    <br />
    <p>Ouryear.</p>
    <br />
    <p>Our pr12.</p>
    <br />
    <p class="activity-footnote"><i>* Legislation ers.</i></p>
  </div>
</div>
<!--END page2-->
<div id="team">
  <div id="team-container" class="clearfix">
    <div id="team-left"><span class="activity-title">Meet the team</span><br />
      <img src="../images/team-members-khklhll-vann.png" class="image-center" alt="khklhll AS Team Members" /></div>
    <div id="team-right">
      <p><b>Moou</b> - <span class="team-function">Founder and Chief Executing Officer</span></p>
      <p>25 years’ exptry.</p>
      <br />
      <p><b>Ond</b> - <span class="team-function">Adviser and Board Member</span></p>
      <p>Economistantile sector.</p>
      <br />
      <p><b>Hen</b> - <span class="team-function">Adviser and Board Member</span></p>
      <p>Bacheojects.</p>
      <br />
      <p><b>Pede</b> - <span class="team-function">Landowners</span></p>
      <p>Peter an terrain.</p>
      <br>
      <p><b>Babou</b> - <span class="team-function">Financial Advisor</span></p>
      <p>MBA fro a Six Sigma black belt.</p>
      <br />
      <p><b>Heleck </b> - <span class="team-function">Representative in Germany</span></p>
      <p>Several design.</p>
    </div>
  </div>
</div>
<!--END page3-->
<div id="source">
  <div id="source-container">
    <div id="source-region" class="textzone">
      <p><span class="activity-title">Interacting ure</span></p>
      <img src="../images/khklhll-map.png" style="float:right; margin-left:15px;" alt="fzeez - Internature">
      <p>fzeez i.</p>
      <p>The m lakes.</p>
      <p>fzeez is agual.</p>
      <p>The Eim.</p>
      <br>
    </div>
    <div id="source-oursource" class="textzone">
      <p><span class="activity-title">Pure, rce</span></p>
      <p>Our minerillage of fzeez.</p>
      <p>The wiates.</p>
      <p>The w8.</p>
      <br>
      <img src="../images/khklhll-water-properties-fr.png" alt="khklhll Water rties" title="khklhll Waterties" /> </div>
    <div class="source-title-box"><span class="activity-title"><a href="#" data-region="source-region">The region</a></span></div>
    <div class="source-title-box"><span class="activity-title"><a href="#" data-region="source-oursource">The source</a></span></div>
    <img src="../images/clickhere.png"> </div>
  ​ </div>
<!--END page4-->
<div id="medias">
  <div id="medias-container">
    <div id="medias-title-box"><span class="activity-title">PRESS &amp; MEDIAS</span><br />
    </div>
    <div id="medias-table-header">
      <div id="medias-table-header-type">TYPE</div>
      <div id="medias-table-header-desc">DESCRIPTION</div>
      <div id="medias-table-header-lang">LANGUAGE</div>
    </div>
    <div class="medias-table-content">
      <div class="medias-table-content-type"><img src="../images/article.png" alt="Article" title="Article" /></div>
      <div class="medias-table-content-desc"><a href="../resources/sna0418.pdf" target="_blank">Bli med Apr. 2012</a></div>
      <div class="medias-table-content-lang"><img src="../images/no.png" alt="Norway" /></div>
    </div>
    <div class="medias-table-content">
      <div class="medias-table-content-type"><img src="../images/article.png" alt="Article" title="Article"/></div>
      <div class="medias-table-content-desc"><a href="../resources/tron0403.pdf" target="_blank">Visa 03 Apr. 2012</a></div>
      <div class="medias-table-content-lang"><img src="../images/no.png" alt="Norway" /></div>
    </div>
    <div class="medias-table-content">
      <div class="medias-table-content-type"><img src="../images/article.png" alt="Article" title="Article"/></div>
      <div class="medias-table-content-desc"><a href="http://www.adre684431.ece" target="_blank">Sa.no Aug. 2011</a></div>
      <div class="medias-table-content-lang"><img src="../images/no.png" alt="Norway" /></div>
    </div>
  </div>
</div>
<!--END page5-->
<div id="contact-us">
  <div id="contact-box">
    <p><h2>khklhll AS</h2></p>
    <p>7760 fzeez | Norway</p>
    <p>+47 99 75</p>
    <a href="#inline" class="modalbox highlightit"><img src="../images/mail.png" alt="Send us an e-mail" /></a><br />
  </div>
</div>
<!--END page6-->
<div id="footer">
  <div id="social">
    <div class="fb-like" data-href="http://www.khklhllvann.com" data-send="false" data-layout="button_count" data-width="106" data-show-faces="false" data-font="verdana"></div>
    <a href="https://twitter.com/share" class="twitter-share-button" data-lang="msa">Tweet</a> 
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
  </div>
  <a href="../index.php?lang=fr"><img src="../images/fr.png" alt="Version Française" title="khklhll en version Française"/></a> <a href="../index.php?lang=no"><img src="../images/no.png" alt="khklhll på norsk" title="khklhll på norsk" /></a> <a href="../index.php?lang=de"><img src="../images/de.png" alt="Deutsch" /></a> <a href="../index.php?lang=en"><img src="../images/uk.png" alt="khklhll in English" title="khklhll in English" /></a> </div>

<!-- hidden inline form -->
<div id="inline">
  <h2>SEND US A MESSAGE</h2>
  <Br />
  <form id="contact" action="#" method="post" name="contact">
    <input id="name" class="txt" type="name" name="name" placeholder="Name"/>
    <br />
    <input id="email" class="txt" type="email" name="email" placeholder="E-mail address"/>
    <br />
    <textarea id="msg" class="txtarea" name="msg" placeholder="Type your message here..."></textarea>
    <button id="send">Send E-mail</button>
  </form>
  <br />
</div>
<script src="../js/jquery.scrollTo.js"></script> 
<script src="../js/jquery.nav.js"></script> 
<script>
$(document).ready(function() {
  $('#nav').onePageNav();
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:29:01.297

删除了很多字体继承的重复项

短编码`#FFFFFF`为`#fff`

短编码填充，边距

添加了对 Opera 和 IE10 的支持`background-size`

修正了一些错字

CSS：

```
html, body, #contact-us {height: 100%;}
body {font: 12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;font-weight: 400;color: #000;margin: 0 auto;padding: 0;-webkit-text-size-adjust: none;}
/*.clearfix {display: inline-block;}*/
.clearfix {display: block;}
.clearfix:after {content: ".";display: block;height: 0;clear: both;visibility: hidden;}
* html .clearfix {height: 1%;zoom:1;}
p {color: #000;}
h1 {font-weight: 300;letter-spacing:1px;color: #0A4672;}
h2 {font-weight: 500;letter-spacing:1px;color: #467FD9;}
span.team-function {color: #467FD9;}
span.activity-title {font-size: 22px;font-weight: 300;letter-spacing:1px;text-transform:uppercase;color: #467FD9;}
p.activity-footnote {font-size: 10px;text-align: left;color: #000;}
/* Positionning the logo on top left side */
#logo {position: fixed;float: left;top: 20px;left: 2%;font-size: 28px;font-weight: 400;z-index:1000;}
/* End Logo */
/* Horizontal Menu, aligned on the right side */
#nav {right: 2%;list-style: none;position: fixed;top: 30px;z-index: 1000;}
#nav > li {display: inline-block;float: left;zoom: 1;margin: 0 5px;}
#nav a {font-size: 12px;font-weight: 600;letter-spacing: 1px;float: left;top: 30px;padding: 0 15px;display: inline-block;font-size: 11px;text-decoration: none;height: 24px;color: #666;line-height: 24px;text-align: center;-webkit-box-shadow: 1px 1px 2px rgba(0,0,0,0.2);box-shadow: 1px 1px 2px rgba(0,0,0,0.2);text-transform: uppercase;background: white;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter: alpha(opacity=80);opacity: 0.8;}
#nav a:hover {background: #dedede;}
#nav .current a {background: #666;color: #ededed;}
/* End Menu */
/* Page Presentation */
#presentation {height: 1300px;background: #afc9ff;background: url(../images/bg-24.jpg) no-repeat center fixed;-webkit-background-size: cover;-moz-background-size: cover;-ms-background-size: cover;-o-background-size: cover;background-size: cover;}
#presentation-container {width:810px;padding-top: 15%;margin: 0 auto;}
.presentation-highlights {text-align: justify;margin-top:20px;margin-right:7px;float:left;padding:10px;font-size: 12px;width: 230px;height:90px;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=85)";filter: alpha(opacity=95);opacity: 0.85; /* For IE8 and earlier */border: 1px dotted #666;background: #fff;}
/* End Page presentation */
/* Page Equipe */
#team {height: 1300px;padding-top: 150px;background: #8aba56 url(../images/bg-23.jpg) no-repeat center fixed;-webkit-background-size: cover;-moz-background-size: cover;-ms-background-size: cover;-o-background-size: cover;background-size: cover;}
#team-container {width:960px;background-color:#fff;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=83)";filter: alpha(opacity=83);opacity: 0.83;margin: 0 auto;background: #fff;border: 1px dotted #666;}
#team-left {color:#000;padding:20px 0 0 20px;width: 20%;float: left;position: relative;}
#team-right {font-size: 12px;padding:24px 0 20px 25px;color:#000;width: 70%;float: left;position: relative;text-align:justify;}
.image-center {text-align: center;display: block;margin: 0 auto;padding-top: 30px -15px 0 0;}
/* Page Plan d'Activité */
#activity {height: 1300px;background: #8aba56;padding-top: 150px;background: url(../images/bg-22.jpg) no-repeat center fixed;-webkit-background-size: cover;-moz-background-size: cover;-ms-background-size: cover;-o-background-size: cover;background-size: cover;}
#activity-container {width: 640px;font-size: 12px;text-align:justify;background-color: #fff;color:#000;padding:25px;margin: 0 auto;border: 1px dotted #666;background: #fff url(../images/norway-map.png) no-repeat right center;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=93)";filter: alpha(opacity=93);opacity: 0.93;}
/* End Page Activity */
/* Page Source */
#source {height: 1300px;background: #8aba56;padding-top: 150px;background: url(../images/bg-28.jpg) no-repeat center fixed;-webkit-background-size: cover;-moz-background-size: cover;-ms-background-size: cover;-o-background-size: cover;background-size: cover;}
#source-container {width: 800px;margin:0 auto;;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=93)";filter: alpha(opacity=93);opacity: 0.93;}
.source-title-box {color: #000;background: #fff;width: 230px;position: relative;margin-top:10px;border: 1px dotted #666;}
.source-title-box a {color:#467FD9;display:block;text-decoration:none;padding: 15px;}
.source-title-box a:hover {background-color:#467FD9;color:#fff;}
#source-region, #source-oursource {font-size: 12px;text-align:justify;background: #fff;color: #000;padding:15px 20px 20px 20px;display:block;width: 510px;float: right;position: relative;border: 1px dotted #666;line-height:1px;}
#source-oursource {display:none;}
#source-oursource p {margin-bottom:5px;}
#source-region p {margin-bottom:5px;padding-right:10px;}
/* Page Medias */
#medias {height: 1300px;background: #8aba56;padding-top: 150px;background: url(../images/bg-18.jpg) no-repeat center fixed;-webkit-background-size: cover;-moz-background-size: cover;-ms-background-size: cover;-o-background-size: cover;background-size: cover;}
#medias-container {width: 800px;margin: 0 auto;}
#medias-title-box {color: #000;background: #fff;padding: 15px;width: 200px;float: left;position: relative;border: 1px dotted #666;}
#medias-table-header {background: #fff;color: #000;width: 490px;float: right;position: relative;border: 1px dotted #666;}
#medias-table-header-type, #medias-table-header-desc, #medias-table-header-lang {font-size: 22px;font-weight: 200;padding: 15px;background: #fff;color: #000;width: 50px;float: left;position: relative;}
#medias-table-header-desc {width: 200px;}
#medias-table-header-lang {width: 85px;}
.medias-table-content {margin-top: 10px;background: #fff;color: #000;width: 490px;float: right;position: relative;border: 1px dotted #666;}
.medias-table-content-type, .medias-table-content-desc, .medias-table-content-lang {padding:10px 15px 10px 15px;background: #fff;text-align:center;color: #000;width: 50px;float: left;position: relative;}
.medias-table-content-desc {font-size: 14px;font-weight: 200;padding:10px 15px 10px 15px;width: 200px;text-align:left;vertical-align:middle;}
.medias-table-content-desc a {text-decoration:none;color:#000;vertical-align:middle;}
.medias-table-content-desc a:hover {color:#0A4672;text-decoration:underline;}
.medias-table-content-lang {width: 85px;}
/* end page medias */
/* Page Contact */
#contact-us {background: #8aba56;padding: 0;position: relative;background: url(../images/bg-26.jpg) no-repeat center fixed;-webkit-background-size: cover;-moz-background-size: cover;-ms-background-size: cover;-o-background-size: cover;background-size: cover;}
#contact-box {text-align:center;font-size: 12px;width: 300px;height:120px;padding:15px;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=85)";filter: alpha(opacity=95);opacity: 0.85;border: 1px dotted #666;background: #fff;position: absolute;top: 50%;left: 50%;margin-top: -80px 0 0 -150px;}
#contact-box p {font-size: 12px;color: #000;letter-spacing:2px;margin-bottom:3px;}
#contact-box h2 {font-size: 22px;font-weight: 500;letter-spacing:2px;color: #467FD9;}
.highlightit img {filter:progid:DXImageTransform.Microsoft.Alpha(opacity=50);opacity: 1;}
.highlightit:hover img {filter:progid:DXImageTransform.Microsoft.Alpha(opacity=100);opacity: 0.7;}
/* Section Footer with social icons on the left and address and flags on the right */
#footer {position: fixed;bottom: 0;color: #333;left: 0;z-index: 999;width: 96%;text-align: right;padding: 30px 2%;vertical-align: bottom;}
#social {position: absolute;vertical-align: middle;left: 2%;color: #333;}
.txtcentered {width: 300px;height: 200px;position: absolute;left: 50%;top: 50%;margin: -100px 0 0 -150px;}
.fb_iframe_widget, iframe.twitter-share-button {display: inline-block;vertical-align: middle;}
.languageselector {display: inline-block;height: 20px;line-height: 20px;}
/*contact form*/
#inline {display: none;width: 600px;}
.txt {display: inline-block;color: #676767;width: 420px;font-family: Arial, Tahoma, sans-serif;margin-bottom: 10px;border: 1px dotted #ccc;padding: 5px 9px;font-size: 1.2em;line-height: 1.4em;}
.txtarea {display: block;-webkit-resize: none;-moz-resize: none;resize: none;color: #676767;font-family: Arial, Tahoma, sans-serif;margin-bottom: 10px;width: 500px;height: 150px;border: 1px dotted #ccc;padding: 5px 9px;font-size: 1.2em;line-height: 1.4em;}
.txt:focus, .txtarea:focus {border-style: solid;border-color: #bababa;color: #444;}
input.error, textarea.error {border-color: #973d3d;border-style: solid;background: #f0bebe;color: #a35959;}
input.error:focus, textarea.error:focus {border-color: #973d3d;color: #a35959;}
#send {color: #dee5f0;display: block;cursor: pointer;padding: 5px 11px;font-size: 1.2em;border: solid 1px #224983;border-radius: 5px;background: #1e4c99;background: -webkit-gradient(linear, left top, left bottom, from(#2f52b7), to(#0e3a7d));background: -webkit-linear-gradient(top, #2f52b7, #0e3a7d);background: -moz-linear-gradient(top, #2f52b7, #0e3a7d);background: -o-linear-gradient(top, #2f52b7, #0e3a7d);background: -ms-linear-gradient(top, #2f52b7, #0e3a7d);background: linear-gradient(top, #2f52b7, #0e3a7d);filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#2f52b7', endColorstr='#0e3a7d');}
#send:hover {background: #183d80;background: -webkit-gradient(linear, left top, left bottom, from(#284f9d), to(#0c2b6b));background: -webkit-linear-gradient(top, #284f9d, #0c2b6b);background: -moz-linear-gradient(top, #284f9d, #0c2b6b);background: -o-linear-gradient(top, #284f9d, #0c2b6b);background: -ms-linear-gradient(top, #284f9d, #0c2b6b);background: linear-gradient(top, #284f9d, #0c2b6b);filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#284f9d', endColorstr='#0c2b6b');}
#send:active {color: #8c9dc0;background: -webkit-gradient(linear, left top, left bottom, from(#0e387d), to(#2f55b7));background: -webkit-linear-gradient(top, #0e387d, #2f55b7);background: -moz-linear-gradient(top, #0e387d, #2f55b7);background: -o-linear-gradient(top, #0e387d, #2f55b7);background: -ms-linear-gradient(top, #0e387d, #2f55b7);background: linear-gradient(top, #0e387d, #2f55b7);filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0e387d', endColorstr='#2f55b7');} 
```

改进 HTML：

```
<meta charset="utf-8">
<meta name="description" content=".">
<link href="../css/reset.css" rel="stylesheet">
<link href="../css/style.css" rel="stylesheet">
<script src="../js/scripts.js" /></script> 
```

# apache - Apache 的规范 301 重定向

> ID：12017288
> 
> 赞同：0
> 
> 时间：2012-08-18T08:57:47.427
> 
> 标签：apache, .htaccess, mod-rewrite

如果我有这些虚拟域名`example1.com`并且`example1.net`可用。`.htaccess`我想使用文件和`mod_rewrite`模块将它们重定向如下：

```
example1.com -> www.example1.com
example1.net -> www.example1.com
www.example1.net -> www.example1.com 
```

我已经完成了第一个任务：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} example1\.com [NC]
RewriteCond %{HTTP_HOST} !^www\.example1\.com [NC]
RewriteRule ^(.*) http://www.example1\.com/$1 [L,R=301] 
```

其余的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:25:00.250

我自己能做到。不知道规则写得怎么样：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} example1\.com [NC]
RewriteCond %{HTTP_HOST} !^www\.example1\.com [NC]
RewriteRule ^(.*) http://www.example1\.com/$1 [L,R=301]

RewriteCond %{HTTP_HOST} example1\.net [NC]
RewriteCond %{HTTP_HOST} !^www\.example1\.com [NC]
RewriteRule ^(.*) http://www.example1\.com/$1 [L,R=301]

RewriteCond %{HTTP_HOST} www\.example1\.net [NC]
RewriteRule ^(.*) http://www.example1\.com/$1 [L,R=301] 
```

请更正或提出更好的答案

# java - 如何将字符串矩阵存储在数组中？

> ID：12017289
> 
> 赞同：0
> 
> 时间：2012-08-18T08:57:55.410
> 
> 标签：java, arrays, matrix

我必须在其中存储一个`String` **矩阵（3x20）**，`array`其`length`可能会有所不同。我正在尝试以下代码，但出现`incompatible types`错误。

我该如何解决这个错误？

我的代码是：

```
int x=0;    
String[] arrayF=new String[10];    
arrayF[x]= new String[3][20]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:08:17.380

您不能以这种方式分配数组。您最终应该将第一个 2 数组的每个元素分配给 1 维数组。

就像是：

```
String[][] array2D =new String[M][N];
String[] array1D = new String[M * N];

for (int i = 0 ; i < M ; i++)
{
    for (int j = 0 ; i < N ; i++)
    {
         array1D[(j * N) + i] = array2D[i][j];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:17:26.390

`arrayF`是一个**字符串数组**，因此其中的每个元素都`arrayF`必须是一个字符串（根据数组的定义）。
您要做的是`new String[3][20]`在 的每个元素中放置一个数组（）而不是字符串，`arrayF`这显然与其定义相矛盾（因此出现`incompatible types`错误）。
您想要的一种解决方案可能是使用 3-d 字符串数组：

```
String[][][] arr = new String[10][3][20]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T09:19:39.463

arrayF 是 String 类型的一维数组。您不能将二维数组添加到 arrayF。对于动态数组大小，您应该使用 ArrayList。

```
List<String[][]> main = new ArrayList<String[][]>();

String[][] child1 = new String[3][20];
String[][] child2 = new String[3][20];
main.add(child1);
main.add(child2); 
```

请参阅 [Java 中的可变长度（动态）数组](https://stackoverflow.com/questions/2426671/variable-length-dynamic-arrays-in-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T09:19:58.980

使用这样的东西：

```
String [][] strArr = new String[3][20];
ArrayList<String[][]> tm = new ArrayList<String[][]>();
tm.add(strArr); 
```

# c# - Window Phone 7.5 中的独立存储

> ID：12017290
> 
> 赞同：0
> 
> 时间：2012-08-18T08:57:57.240
> 
> 标签：c#, windows-phone-7

我正在使用 Windows Phone 7.5 中的独立存储。我正在尝试从文件中读取一些文本。但调试器说，IsolatedStorageFileStream 上不允许该操作。为什么？

```
//Read the file from the specified location.
fileReader = new StreamReader(new IsolatedStorageFileStream("info.dat", FileMode.Open, fileStorage));
//Read the contents of the file (the only line we created).
string textFile = fileReader.ReadLine();

//Write the contents of the file to the MEssageBlock on the page.
MessageBox.Show(textFile);
fileReader.Close(); 
```

更新我的新代码

对象 _syncObject = 新对象（）；

```
 lock (_syncObject)
                        {
                            using (var fileStorage = IsolatedStorageFile.GetUserStoreForApplication())
                            {

                                using (FileStream stream = new FileStream("/info.dat", FileMode.Open, FileAccess.Read, FileShare.Read))
                                {
                                    using (var reader = new StreamReader(stream))
                                    {

                                        string textFile = reader.ReadLine();
                                        MessageBox.Show(textFile);

                                    }
                                }
                            }

                        }

                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:06:22.027

只是一个猜测：

*   WP 模拟器将在关闭时重置所有 Isolatd 存储内容
*   如果您将*FileMode.Open*与一个不存在的文件的路径一起使用，您将获得*Operation not allowed*异常。

您可以使用`fileStorage.FileExists()`来检查文件是否存在或使用`FileMode.OpenOrCreate`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:19:36.307

试试这个，它对我有用：希望它也对你有用

```
 String sb;

        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (myIsolatedStorage.FileExists(fileName))
            {
                StreamReader reader = new StreamReader(new IsolatedStorageFileStream(fileName, FileMode.Open, myIsolatedStorage));

                sb = reader.ReadToEnd();

                reader.Close();
            }

            if(!String.IsNullOrEmpty(sb))
            {
                 MessageBox.Show(sb);
            }
        } 
```

如果这不起作用，那么您的文件可能不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T09:22:29.853

通常，当我使用隔离存储时，我会执行以下操作：

```
using (var stream = fileStorage.OpenFile("info.dat", FileMode.Open))
{
    using (var reader = new StreamReader(stream))
    {
        ...
    }
} 
```

...而不是直接在`IsolatedStorageFileStream`. 我不能确定这是否会解决问题，但值得一试......

# android - Google Play 商店应用程序是否有官方 API？

> ID：12017291
> 
> 赞同：19
> 
> 时间：2012-08-18T08:57:57.037
> 
> 标签：android, api, google-play

Google Play 商店应用程序（又名 Android 市场）已更新，拥有许多很酷的功能，甚至[是应用程序愿望清单](http://www.androidpolice.com/2012/08/18/download-latest-google-play-store-3-8-16/)。

我想知道是否有任何官方 API 可以与之通信，甚至是意图。我想知道人们是否只是查看日志来查看意图，或者是否有官方 API 可以访问应用程序的每个页面。

以下是此类 API 可能让您执行的一些示例：

1.  您会怎么做才能将应用添加到 Google Play 商店的愿望清单中？
2.  您会怎么做才能查看特定应用程序的评论，甚至是查看您撰写评论的部分？
3.  有没有办法在那里查询特定公司的应用程序？
4.  查询过去安装的应用程序怎么样？

等等……</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:11:54.290

> 1\. 为了将应用程序添加到 Google Play 的愿望清单中，您会怎么做？

你不能

> 2\. 您会怎么做才能查看特定应用程序的评论，甚至是查看您撰写评论的部分？

您可以使用 Intent 和此答案底部链接中的 URL 在 Google Play 上打开应用程序页面。

> 3\. 有没有办法在那里查询特定公司的应用程序？

充其量，您可以使用搜索 URL 显示特定开发人员应用程序的列表。

> 4\. 查询过去安装的应用程序怎么样？

你不能。

[文档](https://developer.android.com/distribute/googleplay/promote/linking.html)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-04-17T11:26:48.427

您可以尝试的另一个非官方 API 也可以查看： [www.playstoreapi.com](http://www.playstoreapi.com)

它是非官方的，但易于使用（非商业用途免费），它有很多不错的功能，如搜索和排行榜。从他们的文档部分：

节点.js：

```
var request     = require('request');
var apiKey      = 'wij5czxu3mxkzkt9'; // your API key
var packageName = 'com.whatsapp';     // package Name, e.g. com.whatsapp for WhatsApp

var url = 'http://api.playstoreapi.com/v1.1/apps/' + packageName + '?key=' + apiKey;

request({
    url: url,
    json: true
    }, function (error, response, body) {
    if (!error && response.statusCode === 200) {
        console.log(body) // Print the json response
    }
}); 
```

HTML/JS：

```
<html>
<head>
<body>
<p></p>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

  <script>

  var apiKey = 'wij5czxu3mxkzkt9'; // your API key
  var app    = 'com.whatsapp';     // package com.whatsapp for WhatsApp

  var url = 'http://api.playstoreapi.com/v1.1/apps/' + app + '?key=' + apiKey;

  $.getJSON(url).done(function(appDetails) {
    $('p:last').html(JSON.stringify(appDetails));
  });

  </script>
</body>
</head>
<html> 
```

Python：

```
import urllib2
import json

packageName = 'com.whatsapp'      # package com.whatsapp for WhatsApp
apiKey      = 'wij5czxu3mxkzkt9'  # your API key

url = 'http://api.playstoreapi.com/v1.1/apps/{0}?key={1}'

response = urllib2.urlopen(url.format(packageName, apiKey))

data = json.load(response)   
print data 
```

C# .NET：

```
string apiKey = "wij5czxu3mxkzkt9"; // your API key
string app    = "com.whatsapp";     // package com.whatsapp for WhatsApp

string url = "http://api.playstoreapi.com/v1.1/apps/{0}?key={1}";

using (var webClient = new System.Net.WebClient()) {
    string jsonString = webClient.DownloadString(string.Format(url, app, apiKey));
} 
```

# android - 通过耳机播放音乐时通过扬声器播放声音

> ID：12017297
> 
> 赞同：5
> 
> 时间：2012-08-18T08:58:32.760
> 
> 标签：android, soundpool, android-audiomanager, audiotrack

我`AudioTrack`通过耳机进行流式传输。我必须只`SoundPool`向内置扬声器发送一个，而不会中断`AudioTrack`耳机的播放。有黑帮大佬吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T12:58:52.437

许多 Android 设备在 AudioFlinger / 音频 HAL 中使用单个输出线程进行所有本地播放（听筒、扬声器、有线耳机/耳机），这使得不可能同时对两个音轨进行不同路由（这就是为什么在许多设备上媒体流被强制静音的原因如果播放了通知并且您连接了有线耳机；否则您会在播放通知时听到扬声器中的音乐）。

`setForceUse(FOR_MEDIA, FORCE_SPEAKER)`在某些设备上，如果您设法执行 a并将`MUSIC`流类型用于您想在扬声器中播放的内容，并使用流类型用于您想在其中播放的内容，`VOICE_CALL`则可能会执行您正在寻找的操作有线耳机。
我不确定应用程序是否有任何方法可以执行该`setForceUse`调用。也许您可以通过反射获得类的`handleMessage`方法`AudioService`并向其发送`MSG_SET_FORCE_USE`消息。我自己从未尝试过，因此它可能会失败。

**编辑：**我现在测试了 setForceUse 方法，当有线耳机连接在实际设备上时，将媒体流强制传输到扬声器，它确实有效（尽管我不能保证它可以在所有设备上工作）。实现与我上面描述的略有不同。有关我使用的代码，请参阅我对[如何在 android 4.0 中以编程方式打开/关闭扬声器的](https://stackoverflow.com/questions/12036221/how-to-turn-speaker-on-off-programatically-in-android-4-0)回答。

# hibernate - 在 JPA QL 上使用 count(*) 或 count(s)

> ID：12017303
> 
> 赞同：0
> 
> 时间：2012-08-18T08:59:44.223
> 
> 标签：hibernate, jpa-2.0

我有一个 JPA 查询来获取记录计数。但它显示 org.hibernate.hql.QueryExecutionRequestException。查询是

```
@NamedQuery(name = "StudyplanCategory.findCountByStatus", query = "SELECT count(s) FROM StudyplanCategory s WHERE s.status =:status") 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:35:23.530

您需要选择计数（*）。请参阅文档 [http://docs.jboss.org/hibernate/core/3.5/reference/en/html/queryhql.html#queryhql-tipstricks](http://docs.jboss.org/hibernate/core/3.5/reference/en/html/queryhql.html#queryhql-tipstricks)

# ios - 我可以在不使用 -all_load 链接器标志的情况下使用适用于 iOS 的 adMob 库吗

> ID：12017305
> 
> 赞同：0
> 
> 时间：2012-08-18T08:59:47.973
> 
> 标签：ios, admob

我正在将 google 提供的 adMob 添加到我的 iOS 应用程序中，但我被困在安装的这一部分：在项目构建信息中的其他链接器标志下添加 -all_load

如果我添加了那个标志，那么另一个第三方库会中断给我错误消息：

ld：在 /Users/josh/Projects/app/libs/libvt_universal.a(vw_ctype-3279EF26D0C25F3A.o) 和 /Users/josh/Projects/app/libs/libvt_universal.a(vw_ctype-34AB9EC0B46D954C.o) 中重复符号 _vw_chartype_table_p架构 i386

有什么方法可以在不使用 -all_load 的情况下使用 adMob 库？例如，我尝试过 -force_load $(SOURCE_ROOT)/adMob/libGoogleAdMobAds.a 但 ld: file not found: /Users/USERNAME/Desktop/latest/bbbb/APPNAME/adMob/libGoogleAdMobAds.a

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:56:38.733

Google 建议使用 -all_load 的原因是他们在代码中使用了类别，而具有类别的 Objective-C 库没有被 llvm 链接器正确加载（在 4.3 xcode 中就是这种情况，不确定 4.4 与较新的 clang ）。

所以，我想如果你很勇敢，你可以尝试删除 all_load 标志。它应该构建良好。如果错误未修复，那么当您运行代码时会发生什么情况，它会崩溃，因为库使用的任何类别都不会被加载。无论如何，这可能是一件好事，因为您的项目应该构建，如果没有，您可以先解决这些问题。

我建议你做的是使用 -force_load，它让 llvm 加载 adMob 库中的类别（除其他外）。要使用它，您必须有一个完全限定的路径（即从“/”开始）到库。显然，如果您使用终端并运行：

ls -l /Users/USERNAME/Desktop/latest/bbbb/APPNAME/adMob/libGoogleAdMobAds.a

它会失败。所以输入正确的路径 - 硬编码 - 现在只是看看你是否可以让项目首先构建，然后运行。如果是这样，您稍后可以找出合适的 $(VAR) 用于在您的项目中找到它。

# jquery - 实时验证问题

> ID：12017306
> 
> 赞同：0
> 
> 时间：2012-08-18T08:59:56.003
> 
> 标签：jquery, validation, livevalidation

我创建了一个带有一些输入类型=“文本”框的表单，用于计算另一个输入框的总数。

我想使用这个实时验证（[网站](http://livevalidation.com/)）来检查第 11 个框是否超过设定的数量。问题是第三个框是只读框，因此它不会注册其他两个框给出的更改，除非您单击正在更改的框。

无论如何都可以通过单击它来更改它这是我正在处理的代码

```
<form onsubmit="return false;" id="frmCreateCheckboxRange" method="post" action="">
<fieldset>
    <legend>Calculation Examples</legend>
    <div id="formContent">

        <p id="ex-sum">
            The Calculation plug-in can parse various DOM elements. From normal
            <code>div</code> and <code>span</code> tags to all form field elements.
        </p>

        <p>
            Numbers:

            <input type="text" size="2" value="0" name="sum_1">
            <input type="text" size="2" value="0" name="sum_2">
            <input type="text" size="2" value="0" name="sum_3">             
            <input type="text" size="2" value="0" name="sum_4">
            <input type="text" size="2" value="0" name="sum_5">
            <input type="text" size="2" value="0" name="sum_6">
            <input type="text" size="2" value="0" name="sum_7">
            <input type="text" size="2" value="0" name="sum_8">
            <input type="text" size="2" value="0" name="sum_9">
            <input type="text" size="2" value="0" name="sum_10" id="sum_10">
            &nbsp;&nbsp;
            Sum:
            <input type="text" readonly="readonly"  size="2" value="" id="totalSum" name="totalSum">

            <script type="text/javascript">
        var totalSum = new LiveValidation('totalSum');
        totalSum.add(Validate.Numericality, { maximum: 10 } );
      </script>  
            (Change the values for dynamic calculations.)

        </p>

</fieldset> 
```

[这是项目](http://how-e.co.uk/liveVal/newtest.php)本身的链接

感谢任何可以提供帮助的人，希望我说得通

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:22:37.497

第三个框看起来不像是只读的，所以我假设您的意思是第十一个框？

没有完成计算，所以我加了一个，我一辈子都不明白为什么你需要一个验证插件来检查你正在做的计算的总和是否高于某个值？

```
$(function() {
    $('input[name^="sum_"]').on('change keyup', function() {
        var value = 0,
            max = 100; //set a max value
        $('input[name^="sum_"]').each(function() {
            value += parseInt(this.value, 10);
        });
        if (value < max) $("#totalSum").val(value); //check if over max value
    });
}​);​ 
```

[**小提琴**](http://jsfiddle.net/ECc6W/)

# php - 从字符串中删除特定单词

> ID：12017323
> 
> 赞同：21
> 
> 时间：2012-08-18T09:02:14.603
> 
> 标签：php, string

我正在通过 JSON 提取 twitter 用户的个人资料图像。为此，我的代码是：

```
$x->profile_image_url 
```

返回配置文件图像的 url。url 的格式可以是`"..xyz_normal.jpg"`or`"..xyz_normal.png"`或`"..xyz_normal.jpeg"`or`"..xyz_normal.gif"`等​​。

现在我想从我收到的每个网址中删除“_normal”部分。我怎样才能在php中实现这一点？我厌倦了尝试。请帮忙。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-18T09:04:58.147

php [str_replace](http://php.net/manual/en/function.str-replace.php)。

```
str_replace('_normal', '', $var) 
```

这样做是将变量 $var 中的 '_normal' 替换为 ''（无）。或者，如果您需要正则表达式的强大功能，请查看[preg_replace 。](http://www.php.net/manual/en/function.preg-replace.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-02T08:07:33.650

str_ireplace() 函数做同样的工作，但忽略大小写

像下面这样

```
<?php
echo str_ireplace("World","Peter","Hello world!");
?> 
```

> 输出：你好彼得！

更多示例，您可以[看到](https://www.w3schools.com/php/phptryit.asp?filename=tryphp_func_string_str_ireplace)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T09:11:48.287

str_replace() 函数用字符串中的一些其他字符替换某些字符。

尝试这样的事情：

```
$x->str_replace("_normal","",$x) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-03T07:03:28.193

```
$s = 'Posted On jan 3rd By Some Dude';

echo strstr($s, 'By', true); 
```

这是从字符串中删除特定字符串。

结果会是这样

```
 'Posted On jan 3rd' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-25T03:09:38.263

多替换

```
$a = array('one','two','three');
$var = "one_1 two_2 three_3";
str_replace($a, '',$var); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-09-02T07:47:03.620

```
string erase(subscript, count)
    {
     string place="New York";
     place erase(0,2)
  } 
```

# vim - 如何让 vim 仅在活动缓冲区上突出显示当前行？

> ID：12017331
> 
> 赞同：12
> 
> 时间：2012-08-18T09:05:17.057
> 
> 标签：vim

我在我的 vimrc 中设置了 cursorline。有没有办法让 vim 只突出显示活动缓冲区中的当前行而不是所有缓冲区？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-18T12:28:38.963

Zsolt 的答案中使用的`BufEnter`/`BufLeave`钩子的问题是，当移动到显示相同缓冲区的相邻窗口时它们不会触发。我已成功使用以下内容：

```
augroup CursorLine
    au!
    au VimEnter,WinEnter,BufWinEnter * setlocal cursorline
    au WinLeave * setlocal nocursorline
augroup END 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-18T09:29:49.123

你可以试试：

```
au BufEnter * setlocal cursorline
au BufLeave * setlocal nocursorline 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T10:51:46.360

To Zsolt's answer I would add:

```
au WinLeave * setLocal nocursorline 
```

This improves the behavior when moving between two windows on the same buffer.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-18T20:40:32.417

这里所有简短`:autocmd`解决方案的弱点是您不能例外，例如禁用特定窗口的光标线或使其永久用于（另一个）窗口。任何更改都`'cursorline'`将被下一次移动到另一个窗口所覆盖。

我的[CursorLineCurrentWindow 插件](http://www.vim.org/scripts/script.php?script_id=4178)通过更精细的逻辑处理这些异常。

# iphone - 什么是@interface UITableView (MyTableViewDelegate)

> ID：12017333
> 
> 赞同：0
> 
> 时间：2012-08-18T09:06:04.987
> 
> 标签：iphone, objective-c, cocoa, ipad

我正在查看其他人编写的一些源代码，这让我很感兴趣看到这一行：

```
@interface UITableView (MyTableViewGestureDelegate) 
```

现在我以前只看到过这个：

```
@interface MyTableView : UITableView <MyTableViewGestureDelegate> 
```

所以我很困惑。

关于我在看什么的任何想法？

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:08:40.820

它是类[类别](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)声明 - 使用类别，您可以将类实现拆分为多个文件或向现有类添加方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:10:01.567

这是一个类别声明。

> 类别允许您将方法添加到现有类——甚至是您没有源代码的类。类别是一个强大的功能，它允许您扩展现有类的功能而无需子类化。使用类别，您还可以在多个文件中分发您自己的类的实现。类扩展类似，但允许在主类@interface 块内以外的位置为类声明额外的必需 API。

类别接口的声明看起来很像类接口声明——除了类别名称列在类名称后面的括号内，并且没有提及超类。除非其方法不访问该类的任何实例变量，否则该类别必须为其扩展的类导入接口文件：

一般语法：

```
#import "ClassName.h"

@interface ClassName ( CategoryName )

// method declarations

@end 
```

请注意，类别不能为该类声明额外的实例变量；它只包括方法。但是，类范围内的所有实例变量也在类范围内。这包括类声明的所有实例变量，甚至是声明为@private 的实例变量。

可以添加到类中的类别数量没有限制，但每个类别名称必须不同，并且每个类别都应声明和定义一组不同的方法。

请检查[链接](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)和[示例](http://macdevelopertips.com/objective-c/objective-c-categories.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T09:12:39.143

`MyTableView : UITableView < MyTableViewGestureDelegate >` 说你的类 MyTableView - UITableView 的子类 - 实现了名为的**协议**`MyTableViewGestureDelegate`

`UITableView (MyTableViewGestureDelegate)` 说您正在为名为的类创建一个**类别**`UITableView``MyTableViewGestureDelegate`

# regex - 如何使用正则表达式匹配 mod_rewrite 中的一个或多个级别目录？

> ID：12017338
> 
> 赞同：-1
> 
> 时间：2012-08-18T09:06:33.920
> 
> 标签：regex, apache, .htaccess, mod-rewrite

这是我的 .htaccess 文件

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f<br />
RewriteCond %{REQUEST_FILENAME} !-d<br />
RewriteRule ^(.\*)/(.\*)$ web/$1.php [L]<br />

RewriteCond %{REQUEST_FILENAME} !-f<br />
RewriteCond %{REQUEST_FILENAME} !-d<br />
RewriteRule ^(.*)$ web/$1.php [L]<br /> 
```

我想要以下网址

> http://www.example.com/**索引**
> 
> http://www.example.com/**索引**/
> 
> http://www.example.com/index/admin **_** _
> 
> http://www.example.com/**索引**/admin/
> 
> http://www.example.com/**索引**/admin/123……

全部重定向到

> http://www.example.com/web/index.php **_**

但是如果使用我的代码，
它不能重定向超过两个级别的目录......
如何调整 .htaccess 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:54:13.347

RewriteRule ^/index/?([A-Za-z0-9-/]*)$ /web/index.php?page=$1 [QSA,L]

插入（.php）？如果你也想匹配一个普通的 /index.php 。

# javascript - 移动设备的特定 css，但不基于屏幕分辨率

> ID：12017340
> 
> 赞同：0
> 
> 时间：2012-08-18T09:06:51.483
> 
> 标签：javascript, jquery, html, css

在我的网站上，我使用全屏图像作为背景。对于使用移动设备（即手机、ipad 等）访问网站的用户，我希望加载特定的说明（背景颜色而不是背景图像）。我在谷歌上找到了一些东西，但基于浏览器屏幕大小。问题是现在一些手机可以有 1280* 的分辨率，所以使用屏幕分辨率似乎并不理想。知道我怎么能做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:14:13.777

您可以使用[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/) - 在其中使用 javascript，并在 if 条件为 true 时设置 css。

```
/**
 * jQuery.browser.mobile (http://detectmobilebrowser.com/)
 *
 * jQuery.browser.mobile will be true if the browser is a mobile device
 *
 **/
(function(a){

jQuery.browser.mobile=/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))

if( jQuery.browser.mobile ) $('body').css('background-color','#FFF')
else $('body').css('background-image','url(image.gif')

}
)(navigator.userAgent||navigator.vendor||window.opera); 
```

# c - 在 C 中打印 Unicode 字符（存储在变量中）

> ID：12017342
> 
> 赞同：1
> 
> 时间：2012-08-18T09:06:58.753
> 
> 标签：c, unicode

我要在**C中打印一些****unicode**（4 位十六进制）字符。

 **我存储在一些**短整数**变量中的那些字符。以下是我应该用于我的目的的代码：

```
#include <stdio.h>
#include <locale.h>
#include <wchar.h>

int main(void) {

    setlocale(LC_ALL,"");

    short a = 0x099A, b = 0x09BE;
    wchar_t *string1 = (wchar_t *) calloc(20, sizeof(wchar_t));
    sprintf(string1, "\\u%04x\\u%04x", a, b);
    printf(" %s ", string1);

    wchar_t *string2 = (wchar_t *) calloc(20, sizeof(wchar_t));
    strcpy(string2, (wchar_t *) "\u099A\u09BE");
    printf(" %s \n", string2);

    return 0;
} 
```

现在的问题是：

> 尽管**string2**在终端中显示了正确的输出，但**string1**不是。
> 
> 但我**必须**使用***第***一种方法，即我将 unicode 字符存储在一些任意变量中，并且我需要一种方法将它们打印在屏幕上。

任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:12:02.810

为了打印存储在变量中的 Unicode 字符，为什么不将它们转换为`wchar_t`并使用例如`wprintf`？

```
wchar_t ac = a;
wchar_t bc = b;

wprintf(L"%c%c", ac, bc); 
```**

# actionscript-3 - 将 TextInput 限制为仅电子邮件字符

> ID：12017344
> 
> 赞同：1
> 
> 时间：2012-08-18T09:07:17.560
> 
> 标签：actionscript-3, apache-flex, flex4.6

使用 Flex SDK 4.6，我试图将 TextInput 字段限制为仅电子邮件字符，如下所示：

```
textInput.restrict = "a-z A-z 0-9 \- _ @ ."; 
```

但是，当我运行我的应用程序时，TextInput 字段接受任何字符。我真的不确定为什么这不起作用，并希望得到任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:18:53.763

试试这些链接。这可能会有所帮助

[http://www.oreillynet.com/pub/a/flex/excerpts/flex-4-cookbook/validation-formatting-regular-expressions.html](http://www.oreillynet.com/pub/a/flex/excerpts/flex-4-cookbook/validation-formatting-regular-expressions.html)

[http://blog.flexexamples.com/2008/08/29/validating-email-addresses-using-the-emailvalidator-class-in-flex/](http://blog.flexexamples.com/2008/08/29/validating-email-addresses-using-the-emailvalidator-class-in-flex/)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/validators/EmailValidator.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/validators/EmailValidator.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:46:35.800

如果您丢失了“限制”属性中的空格怎么办？您可以在限制属性设置器函数的内部代码上检查 Flex 代码，然后它可能会帮助您找到解决方案（现在没时间看）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-04T03:20:18.473

嗨，如果您还没有解决它...对我来说最有效的解决方案...因为它很小，甚至不允许错误输入到达！

.restrict = "az Az 0-9 \\-\\ _ @ .";

// 复制和粘贴 100% 工作的 as3 电子邮件限制只允许下划线减点和除数字和字母之外的 at。

# vba - Access 中的条形码

> ID：12017348
> 
> 赞同：0
> 
> 时间：2012-08-18T09:07:36.227
> 
> 标签：vba, ms-access, barcode

任何人都可以建议我使用可以生成 128 个条形码的 access 2010/2007 的条形码字体/模块吗？如果有人可以帮助我，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:17:23.783

我不太了解条形码，但我过去使用过这个，如果它可能对您有帮助：

字体 FRE3OF9X

google一下，你可以从任何网站免费下载

编辑：

你去吧， [http://www.barcodesinc.com/free-barcode-font/](http://www.barcodesinc.com/free-barcode-font/)

# ruby-on-rails - 从参数中的嵌套哈希中检索选项

> ID：12017350
> 
> 赞同：0
> 
> 时间：2012-08-18T09:07:38.730
> 
> 标签：ruby-on-rails, params

我在视图中有以下代码，用于编辑规范状态（已完成或未完成）。

```
%table
  = form_for project_specification_path(@project,@specification), :method => :put do |f|
    %tr
      %td
        = f.label :status, 'Status'
        = f.select :status, ['Completed','Not completed']
    %tr
      %td
        = f.submit 'Save' 
```

单击“保存”后，在规格控制器的更新方法中，我需要更新@specification 属性。

参数看起来像这样：

```
=> {"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"Wp2OSBaOCP9aIx27B0ZTnvuFtN0m4O45efDwdA5KB5Q=",
 "/projects/1/specifications/1"=>{"status"=>"Completed"},
 "Status"=>"Save status",
 "action"=>"update",
 "controller"=>"specifications",
 "project_id"=>"1",
 "id"=>"1"} 
```

我需要写类似@specification.update_attributes(????) 但我不知道如何从嵌套哈希中检索参数 :status 。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:31:38.800

第一个参数`#form_for`应该是模型实例或符号模型名称，而不是路径。应使用该`:url => ...`选项提供自定义路径，因此类似于...

```
= form_for :specification, :url => project_specification_path(@project,@specification), :method => :put do |f|
  ... 
```

# java - 具有不同类型元素的复杂 ArrayList

> ID：12017352
> 
> 赞同：1
> 
> 时间：2012-08-18T09:07:49.510
> 
> 标签：java, arraylist, complex-data-types

我正在创建一个复杂的数据类型。它是 ArrayLists（章节）的 ArrayList（章节）。但是，该章有两个版本，每个版本都有其所推崇的元素和数据类型。

我如何声明我的复杂数据类型，以便我可以添加一个或另一个（例如，ArrayList(chapters) 包含（chapter_typeI、chapter_typeII、chapter_typeII、chapter_typeI、chapter_typeII 等...）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:12:06.867

创建一个抽象类，两种类型的章节都从该类继承，然后声明该类型的列表。

```
public abstract class AbstractChapter {}

public class ChapterTypeOne extends AbstractChapter {}

public classs ChapterTypeTwo extends AbstractChapter {}

List<AbstractChapter> chapters = new ArrayList<AbstractChapter>; 
```

您将要调用的操作应在抽象类中声明，然后在特定实现中根据需要覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T09:21:46.623

如果您定义了清晰的层次结构，创建类型列表总是比创建实际对象更好。

```
 List<Type> list = new ArrayList<Type>(); 
```

现在 Type 可以成为你的界面

```
interface Type {
    void method();
} 
```

现在你可以拥有

```
SubType1 implements Type {
    void method() {
        // do something.
    }
}

SubType2 implements Type {
    void method() {
        // do something.
    }
} 
```

您也可以使用 Abstract Skeletal 模式，如果需要，您可以在其中使用具有默认实现的 AbstractType 类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T09:14:26.043

你可以有一个抽象基类“Chapter”，ChapterI 和ChapterII 从中继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T09:10:23.327

最好的方法是使用继承定义一个抽象类“Chapter”，并从抽象类中派生出章节的类型。

# facebook - 进行需要两个访问令牌的 FQL 查询

> ID：12017356
> 
> 赞同：1
> 
> 时间：2012-08-18T09:08:24.057
> 
> 标签：facebook, facebook-fql

我想找到我的应用程序的两个用户之间的共同兴趣，我将使用以下查询：

```
 $fql= "SELECT interests FROM user WHERE uid=me() AND interests IN 
(SELECT interests FROM user WHERE uid = '100004159483336')"

$mutual_interests = $facebook->api(array('method' => 'fql.query',
'query' => $fql)); 
```

我正在使用扩展访问令牌，当用户不在线时，我访问他们的个人资料信息的正常方法是从我的数据库中检索他们的访问令牌，然后`setAccessToken()`. 由于我需要访问活动用户的个人资料和离线用户的个人资料才能进行此查询，因此我的常规方法将不起作用。进行需要两个不同访问令牌的 facebook 查询的通用协议是什么？

*   我是否需要进行单独的查询，即使用一个访问令牌进行子查询，存储它然后在下一个查询中使用它？
*   如果是这样，我如何存储它以便我可以将它作为子集提供给下一个查询？
*   最后，有没有办法在请求中使用访问令牌（在 PHP SDK 中）而不将其切换到会话变量中？这样它的使用范围仅适用于该请求然后被丢弃？

先谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:58:34.490

> 我是否需要进行单独的查询，即使用一个访问令牌进行子查询，存储它然后在下一个查询中使用它？

如果需要两个单独的访问令牌，那么您也需要查询，是的。

> 如果是这样，我如何存储它以便我可以将它作为子集提供给下一个查询？

见[https://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)，多查询

> 最后，有没有办法在请求中使用访问令牌（在 PHP SDK 中）而不将其切换到会话变量中？这样它的使用范围仅适用于该请求然后被丢弃？

是的，访问令牌始终可以作为`access_token`每个 Facebook::api 调用的额外参数提供。

# python - Python urlopen 返回值

> ID：12017358
> 
> 赞同：2
> 
> 时间：2012-08-18T09:08:44.743
> 
> 标签：python, python-2.7, urllib

我正在尝试将现有 URL 作为参数传递以将其 HTML 加载到单个`txt`文件中：

```
for line in open('C:\Users\me\Desktop\URLS-HERE.txt'):
 if line.startswith('http') and line.endswith('html\n') :
    fichier = open("C:\Users\me\Desktop\other.txt", "a")
    allhtml = urllib.urlopen(line)
    fichier.write(allhtml)
    fichier.close() 
```

但我收到以下错误：

```
TypeError: expected a character buffer object 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:17:57.767

返回的值`urllib.urlopen()`是一个类似文件的对象，一旦你打开它，你应该用`read()`方法读取它，如以下代码片段所示：

```
for line in open('C:\Users\me\Desktop\URLS-HERE.txt'):
   if line.startswith('http') and line.endswith('html\n') :
      fichier = open("C:\Users\me\Desktop\other.txt", "a")
      allhtml = urllib.urlopen(line)
      fichier.write(allhtml.read())
      fichier.close() 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T09:29:10.533

这里的问题是`urlopen`返回对您应该从中检索 HTML 的文件对象的引用。

```
for line in open(r"C:\Users\me\Desktop\URLS-HERE.txt"):
 if line.startswith('http') and line.endswith('html\n') :
    fichier = open(r"C:\Users\me\Desktop\other.txt", "a")
    allhtml = urllib2.urlopen(line)
    fichier.write(allhtml.read())
    fichier.close() 
```

请注意，该`urllib.urlopen`函数自 python 2.6 起被标记为已弃用。建议`urllib2.urlopen`改用。

此外，您必须小心使用代码中的路径。你应该逃避每个`\`

```
"C:\\Users\\me\\Desktop\\other.txt" 
```

或`r`在字符串前使用前缀。当存在 'r' 或 'R' 前缀时，反斜杠后面的字符将不加更改地包含在字符串中。

```
r"C:\Users\me\Desktop\other.txt" 
```

# android - android webview倾斜屏幕页面刷新

> ID：12017364
> 
> 赞同：2
> 
> 时间：2012-08-18T09:10:35.473
> 
> 标签：android, url, webview, tilt

我在我的 android 应用程序中使用 webview。它成功加载了一个网页。当我点击一个链接时，它会在 webview 中打开新页面，而不是在浏览器中。现在我的问题是，在倾斜屏幕时，页面会刷新，并且再次加载主页而不是我们之前的页面。我该如何克服这个问题？在此先感谢..我的代码如下：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);

    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("http://www.xyz.com");
    webView.getSettings().setLoadWithOverviewMode(true);
    webView.getSettings().setUseWideViewPort(true);
    webView.getSettings().setBuiltInZoomControls(true);
    webView.setWebViewClient(new MyWebViewClient());
} 
```

我的 webviewclient 类：

```
public class MyWebViewClient extends WebViewClient {

@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    view.loadUrl(url);
    return true;
}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:43:24.687

嗯，那是因为当方向改变时，活动完成并重新启动。因此再次调用 onCreate() 并加载第一个 URL。您必须保存 webview 的状态并在方向更改时恢复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T13:24:16.857

我在谈话中迟到了，但这个想法也很有趣：

[http://www.devahead.com/blog/2012/01/preserving-the-state-of-an-android-webview-on-screen-orientation-change/](http://www.devahead.com/blog/2012/01/preserving-the-state-of-an-android-webview-on-screen-orientation-change/)

基本上：

1 - 您使用 savedInstanceState

2 - 您根据您的 savedInstanceState 以编程方式创建您的 webView，这样就不会重新加载，只是倾斜时原始 webView 的精确副本。

# configuration - 推荐的 Symfony2 配置方法是什么？

> ID：12017366
> 
> 赞同：0
> 
> 时间：2012-08-18T09:10:46.823
> 
> 标签：configuration, symfony

尽管 YAML 显示为默认值，但食谱似乎没有偏好。我只是想知道是否有标准配置格式，或者它是否完全是个人选择？

我主要担心的是我选择了一种格式，然后走到一半，发现所有其他 Symfony 开发人员都在使用另一种格式，我在某种程度上受到我的选择的限制，或者存在性能影响。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:15:01.970

我认为这是个人选择，尽管在大多数网站上 yaml 是默认的，而且 symfony 标准包也随 yaml 一起提供。

除了一些包使用 xml，这不是那么容易阅读，但是您可以通过定义的模式获得支持。

我更喜欢配置中的 yaml，因为它有很多内容，它可以帮助我保持概览。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:53:10.260

用于应用程序的 YAML 和用于共享包的 XML。

# mysql - /var/cache/apt/archives/libdbi-perl_1.612-1_amd64.deb E: 子进程 /usr/bin/dpkg 返回错误代码 (1)

> ID：12017367
> 
> 赞同：0
> 
> 时间：2012-08-18T09:10:47.270
> 
> 标签：mysql

```
当我在 ubuntu 11.04 中使用（sudo apt-get install mysql-server mysql-common mysql-clien）安装 mysql 时，出现如下错误：
 /var/cache/apt/archives/libdbi-perl_1.612-1_amd64.deb
E：子进程/usr/bin/dpkg返回错误码（1）
我应该如何避免这个错误
信息：
尝试单独安装 libdbi-perl_1.612-1_amd64.deb 也会导致错误
 我怎样才能避免这种情况。
在此先感谢
错误代码如下
（正在读取数据库...当前安装的 214333 个文件和目录。）
解压 libdbi-perl（来自 .../libdbi-perl_1.612-1_amd64.deb）...
dpkg: 错误处理 /var/cache/apt/archives/libdbi-perl_1.612-1_amd64.deb (--unpack):
 试图覆盖“/usr/bin/dbiprof”，它也在包 perl-dbi 1.52-3 中
dpkg-deb：错误：子进程粘贴被信号杀死（断管）
选择以前取消选择的包 libdbd-mysql-perl。
解压 libdbd-mysql-perl（来自 .../libdbd-mysql-perl_4.016-1_amd64.deb）...
选择以前取消选择的包 mysql-client-core-5.1。
解压 mysql-client-core-5.1（来自 .../mysql-client-core-5.1_5.1.63-0ubuntu0.11.04.1_amd64.deb）...
选择以前取消选择的包 mysql-client-5.1。
解压 mysql-client-5.1（来自 .../mysql-client-5.1_5.1.63-0ubuntu0.11.04.1_amd64.deb）...
选择以前取消选择的包 mysql-server-core-5.1。
解压 mysql-server-core-5.1（来自 .../mysql-server-core-5.1_5.1.63-0ubuntu0.11.04.1_amd64.deb）...
选择以前取消选择的包 mysql-server-5.1。
解压 mysql-server-5.1（来自 .../mysql-server-5.1_5.1.63-0ubuntu0.11.04.1_amd64.deb）...
选择以前取消选择的包 mysql-client。
解压 mysql-client（来自 .../mysql-client_5.1.63-0ubuntu0.11.04.1_all.deb）...
选择以前取消选择的包 mysql-server。
解压 mysql-server（来自 .../mysql-server_5.1.63-0ubuntu0.11.04.1_all.deb）...
处理 man-db 的触发器 ...
处理 ureadahead 的触发器...
处理时遇到错误：
 /var/cache/apt/archives/libdbi-perl_1.612-1_amd64.deb
E：子进程/usr/bin/dpkg返回错误码（1）

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:12:06.810

您在官方 Debian 软件包`libdbi-perl`和名为`perl-dbi`. Debian中没有`perl-dbi`软件包。您可能应该删除它 ( `dpkg -r perl-dbi`) 但首先，尝试找出它的来源`apt-cache policy perl-dbi`

# c++ - C ++获取当前日期输出奇怪的结果

> ID：12017377
> 
> 赞同：0
> 
> 时间：2012-08-18T09:12:37.940
> 
> 标签：c++

我的输出是不可读的，我想做的就是将日月年分配到一个字符串中。

如果我通过 now->tm_year+1900 cout 它们，它可以工作，但如果我将它分配给一个字符串并稍后 cout，它会像这样输出。如何更改我的代码，以便我可以将值分配给字符串，而不会丢失稍后在 cout 上的引用。

终端：

```
Date is 
```

我的代码：

```
int main()
{
//get today date
string year,month,day;

/* Output 6 month frame for appointment booking*/
 time_t t = time(0);   // get time now
 struct tm * now = localtime( & t );

year = now->tm_year + 1900;
month = now->tm_mon + 1;
day = now->tm_mday;

cout << "Date is " << year << month << day << endl;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:15:23.843

您不能将整数分配给字符串（嗯，您可以，但它并不完全符合您的预期）；你必须先转换它们：

```
std::string year = std::to_string(now->tm_year + 1900); 
```

其他选项包括将数字存储为整数；你也可以打印整数：

```
int year = now->tm_year + 1900; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:44:01.770

你可以写`int`而不是写`string`在你的代码文件中。

# android - 使用 Robolectric 进行测试时，SparseIntArray 不会改变

> ID：12017379
> 
> 赞同：1
> 
> 时间：2012-08-18T09:12:41.590
> 
> 标签：android, android-testing, robolectric

我是新手`Robolectric`，我正在尝试对一个简单的 getter/setter 代码进行单元测试，但`SparseIntArray`在测试时似乎没有按预期工作，`Robolectric`而且它根本没有改变。（我总是用 get 方法得到'0'）。

我还尝试为自身添加一个静态getter，`SparseIntArray`发现调用setter后，数组大小为0。

我在这里想念什么？

这是我要测试的代码：

```
public class MyClass {
    private static SparseIntArray sRequestStatus;

public static int getStatus(int request) {
    return sRequestStatus.get(request);
}

public static void setStatus(int request, int status) {
    if (sRequestStatus.get(request) != 0) {
        sRequestStatus.delete(request);
        sRequestStatus.put(request, status);
    } else {
        sRequestStatus.put(request, status);
    }
}

    static {
    sRequestStatus = new SparseIntArray();
    }
} 
```

这是测试：

```
@RunWith(RobolectricTestRunner.class)
public class MyClassTests {

@Test
public void testGetSetStatus() throws Exception {
    // get status should return 0 for non-exisiting request
    assertEquals(0, MyClass.getStatus(1));

    // set status should add a request mapping
    MyClass.setStatus(1, 1);
    assertEquals(1, MyClass.getStatus(1));

    // set status should change the request status if mapping exists
    MyClass.setStatus(1, 2);
    assertEquals(2, MyClass.getStatus(1));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:13:19.760

原来在我使用`SparseIntArray`的版本中没有影子。`Robolectric`

# itextsharp - 如何在 itextsharp 中使用 PdfContentByte 时换行文本

> ID：12017380
> 
> 赞同：3
> 
> 时间：2012-08-18T09:12:43.413
> 
> 标签：itextsharp

我使用 PdfContentByte 在 pdf 中显示文本，因为我还使用 SetTextMatrix mathod 来定位该文本，现在当我的文本很大时它不会显示在 pdf 中显示我可以包装文本显示我可以在下面看到它是我的代码

```
PdfContentByte cb = myPDFWriter.DirectContent;
cb.BeginText();
BaseFont bf_qty123 = BaseFont.CreateFont(BaseFont.TIMES_ROMAN, BaseFont.CP1252, false);
cb.SetFontAndSize(bf_qty123, 10f);
cb.SetTextMatrix(422,100);
cb.ShowText("longstring");
cb.EndText(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T01:56:12.987

像这样使用列：

```
Dim p As Phrase = New Phrase("your txt", FontFactory.GetFont(BaseFont.HELVETICA, BaseFont.CP1250, True, fsize)) 
Dim ct As New ColumnText(cb) 
ct.SetSimpleColumn(p, x, y, ux, uy, 10, Element.ALIGN_LEFT)
ct.Go() 
```

并修复宽度 hight bloc ux, uy

另见：

[如何定位和换行长文本？](https://stackoverflow.com/questions/2755621/itextsharp-how-to-position-and-wrap-long-text)

# ios - iOS – UIAppearance appearanceWhenContainedIn 问题

> ID：12017382
> 
> 赞同：7
> 
> 时间：2012-08-18T09:13:11.963
> 
> 标签：ios, cocoa-touch, uiappearance

我正在为导航栏设置图像，如下所示：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navbar.png"] forBarMetrics:UIBarMetricsDefault]; 
```

然后我不希望这个图像用于类，`MFMessageComposeViewController`所以我通过这样做排除它：

```
[[UINavigationBar appearanceWhenContainedIn:[MFMessageComposeViewController class], nil] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

但它没有任何效果（导航栏的样式仍然是我在里面的图像`MFMessageComposeViewController`）。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T15:43:48.630

找到解决我的问题的方法：

子类`MFMessageComposeViewController`

在 init 方法`backgroundImage`中`navigationBar`设置`nil`

瞧！

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {
        // Custom initialization
        [self.navigationBar setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault];

    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T08:45:52.537

就在呈现 MFMessageComposeViewController 之前尝试

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"MyUINavigationBarImageClear"] forBarMetrics:UIBarMetricsDefault]; 
```

并在 messageComposeViewController:didFinishWithResult: 回调中重置为

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"MyUINavigationBarImageFull"] forBarMetrics:UIBarMetricsDefault]; 
```

我还设置了 MFMessageComposeViewController 的 .navigationBar.tintColor 属性以获取取消按钮以匹配我的 MyUINavigationBarImageClear 图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:03:09.050

这里有两个想法（但未经测试）：

1）我怀疑尝试用 nil 覆盖是行不通的 - 该语句被忽略。我建议你做的是创建一个透明图像，并将其用作 MFMessageComposeViewController 的背景。

2）如果失败了，那么我怀疑必须非常具体地说明何时使用您的图像，因此您必须将第一个语句替换为涵盖整个班级的“何时包含”语句的长列表。如果你有一个所有视图控制器都使用的子类——一些基类——那么我相信你可以使用它。希望＃1有效！

# javascript - 如何使javascript文件在aspx中工作？

> ID：12017388
> 
> 赞同：0
> 
> 时间：2012-08-18T09:14:35.030
> 
> 标签：javascript, asp.net, telerik

我有快捷键的 javascript 函数，所以想在整个解决方案中使用，所以我希望 javascript 文件中的文件在每个屏幕中使用它，所以告诉我如何使用它。这是我的代码。

javascript

```
<script type="text/javascript">
        var isCtrl = false;
        document.onkeydown = function (e) {
            // alert(event.keyCode);
            if (event.keyCode == 17) isCtrl = true;
            if (event.keyCode == 67 && isCtrl == true) {
                document.getElementById('<%= btnCreate.ClientID %>').click();
                //alert("Create New");
                //return false;
                exit();
            }
            if (event.keyCode == 83 && isCtrl == true) {
                document.getElementById('<%= btnSave.ClientID %>').click();
                //alert("Save");
                exit();
            }
            if (event.keyCode == 86 && isCtrl == true) {
                document.getElementById('<%= btnView.ClientID %>').click();
                //alert("View");
                exit();
            }
            if (event.keyCode == 82 && isCtrl == true) {
                document.getElementById('<%= btnRefresh.ClientID %>').click();
                //alert("Refresh");
                return false;
            }
            if (event.keyCode == 77 && isCtrl == true) {
                document.getElementById('<%= btnShow.ClientID %>').click();
                //alert("Show");
                exit();
            }
            if (event.keyCode == 68 && isCtrl == true) {
                document.getElementById('<%= btnDelete.ClientID %>').click();
                //alert("Delete");
                exit();
            }
        }
    </script> 
```

用一个例子告诉我如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:22:44.663

采用

```
<script type="text/javascript" src="Path/YourFileName.js"></script> 
```

在 Head Tag 中，您可以直接在页面中使用 JavaScript 文件中的函数

看到这个 -[将脚本移动到文件](http://www.webreference.com/programming/javascript/external/index.html)

有一些加快网站速度的最佳实践，例如 -[将 JavaScript 代码放在正文的底部](http://developer.yahoo.com/performance/rules.html#js_bottom)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:41:24.513

这比其他任何东西都更像是一个建筑学的东西。如果您使用 ASP.NET 技术，即 WebForms 或 MVC - 它们都提供母版页的概念。顾名思义，它是所有其他视图的主视图。您可以基于主视图创建其他视图。我们通常使用应用程序的通用页眉和通用页脚或网站通用的任何其他内容创建的主视图。

在您的情况下，如果您在所有其他视图中需要一些通用 javascript - 最好的逻辑位置是将 javascript 包含在母版页中。有了这个，基于母版页的所有其他视图将自动获取脚本。使用脚本来包含 JavaScript。

希望这可以帮助...

Lohith (Tech Evangelist, Telerik India)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T09:19:02.250

将此文件附加到 head 标签。

```
<head>
<script type="text/javascript"  src="your file name"></script>
</head> 
```

# c# - CMD COPY 找不到文件

> ID：12017392
> 
> 赞同：1
> 
> 时间：2012-08-18T09:15:08.643
> 
> 标签：c#, process, command

C# win 表单

你好。CMD windows一直说“系统找不到指定的文件”如果我在CMD窗口中输入命令“copy /b myfile.txt test.txt”它可以工作：S

顺便说一句：有没有办法实际看到在 CMD 窗口中执行的命令？

```
 public void OutputBtn_Process_Click(object sender, EventArgs e)
    {
        foreach (FileInfo fi in listBox1.Items)
        {
            Process process1 = new Process();
            process1.StartInfo.UseShellExecute = false;
            process1.StartInfo.Arguments = "copy /b \""+fi.Name+"\"test.txt";
            //process1.StartInfo.LoadUserProfile = true;
            process1.StartInfo.FileName = "cmd.exe\"/k";
            process1.StartInfo.WorkingDirectory = Path.GetDirectoryName(fi.FullName);
            process1.Start();

            process1.Dispose();
            process1.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:26:52.873

/K 是一个参数，应该在 Arguments 属性中而不是在 FileName 属性中（当然，当 LB 建议在 test.txt 前面放置一个空格时，他是正确的）

```
process1.StartInfo.Arguments = "/k copy /b \""+fi.Name+ "\" test.txt"; 
process1.StartInfo.FileName = "cmd.exe"; 
```

顺便说一句，您的代码在一个列表框上循环，并且在每个循环中，用当前 FileInfo 项的内容重新编写文件 test.txt。这样，列表中的最后一个文件将是其内容被复制到 test.txt 的文件。这个逻辑正确吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T09:17:56.100

在 test.txt 前面放一个空格

```
copy /b \""+fi.Name+"\" test.txt"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T09:20:03.490

可以使用[xcopy](http://ss64.com/nt/xcopy.html) 并像进程一样调用它（而不是`cmd`像在您的代码中那样）并处理它的输出。

[使用来自 c# 的 xcopy](http://www.c-sharpcorner.com/UploadFile/jawedmd/xcopy-using-C-Sharp-to-copy-filesfolders/)

# scala - Play2、MongoDB、play-salat：类转换异常

> ID：12017399
> 
> 赞同：3
> 
> 时间：2012-08-18T09:15:57.187
> 
> 标签：scala, playframework-2.0, salat

我有一个对象`Foo`，其中包含`Bar`我使用 play-salat 插件从 MongoDb 获得的对象列表。模型看起来像这样。

```
case class Foo (
  @Key("_id") id: ObjectId = new ObjectId,
  bars: Option[List[Bar]] = None
)

case class Bar (
  something: String
) 
```

该视图应显示 foo 对象的列表。我通过这样的迭代器

```
@(foos: Iterator[Foo]) 
```

显示数据的模板部分如下所示：

```
@foos.map { foo =>
  <div class="foo">@foo.id</div>
  @if(foo.bars != None) {
    <ul>
      @for( bar <- bars ) {
        <li>@bar.something</li>
      }
    </ul>
  }    
} 
```

这样做，我得到一个 ClassCastException：

```
[ClassCastException: com.mongodb.BasicDBList cannot be cast to scala.collection.immutable.List] 
```

我尝试了其他类似的变体

```
@for( i <- 0 to foo.bars.size - 1 ) {
  <li>@foo.bars.get(i).something</li>
} 
```

导致 ClassCastException 以及：

```
[ClassCastException: com.mongodb.BasicDBList cannot be cast to scala.collection.LinearSeqOptimized] 
```

问题是，如何遍历 mongodb 对象列表？我猜/希望不需要某种传输对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T15:01:19.097

请注意[salat wiki](https://github.com/novus/salat/wiki/SupportedTypes)，它不支持包含集合的选项。

请尝试：

```
case class Foo (
  @Key("_id") id: ObjectId = new ObjectId,
  bars: List[Bar] = List()
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T14:59:43.570

包含集合的选项，即`Option[List[T]]`Salat 目前不支持。有关更多信息，请参见此处：[https ://github.com/novus/salat/wiki/SupportedTypes](https://github.com/novus/salat/wiki/SupportedTypes)

只需使用`List`, 并模拟“无”，只需使用`List.empty[Bar]`.

# oracle - plsql ora -00932：不一致的数据类型：预期 - 得到 -

> ID：12017404
> 
> 赞同：3
> 
> 时间：2012-08-18T09:17:36.670
> 
> 标签：oracle, plsql, oracle11g

我有一个包（DATA_PKG），其中包含在给定主键值时返回一行数据的函数。我发现了一种情况，其中一个 DATA_PKG 函数在被另一个包 (CALLER_PKG) 中的过程调用时失败。它抛出以下错误：

```
ora -00932: inconsistent datatypes: expected - got - 
```

当我在包体中使用完全相同的函数编译 CALLER 时，它可以工作。这是我的代码：

```
CREATE OR REPLACE PACKAGE "DATA_PKG" AS

  FUNCTION data_function
   (primary_i IN table_name.id%type)
   RETURN table_name%ROWTYPE;

END DATA_PKG;

/

CREATE OR REPLACE PACKAGE BODY "DATA_PKG" AS

  FUNCTION data_function
   (primary_i IN table_name.id%type)
   RETURN table_name%ROWTYPE AS
   retval table_name%ROWTYPE;
  BEGIN
    SELECT * INTO retval FROM table_name WHERE id = primary_i;

    RETURN retval;
  END data_function;

END DATA_PKG;

/

CREATE OR REPLACE PACKAGE "CALLER" AS

  PROCEDURE calling_proc
   (key_i IN table_name.id%TYPE);

END CALLER;

/

CREATE OR REPLACE PACKAGE BODY "CALLER" AS

  PROCEDURE calling_proc
   (key_i IN table_name.id%TYPE) AS
   table_rec table_name%rowtype;
  BEGIN
   table_rec := data_pkg.data_function(primary_i=>key_i);
   /*
     do something with the returned record
   */
  END calling_proc;

END CALLER; 
```

执行 caller.calling_proc 时，此代码以上述方式失败并显示 -00932。

以下代码有效：

```
CREATE OR REPLACE PACKAGE BODY "CALLER" AS

  FUNCTION data_function
   (primary_i IN table_name.id%type)
   RETURN table_name%ROWTYPE AS
   retval table_name%ROWTYPE;
  BEGIN
    SELECT * INTO retval FROM table_name WHERE id = primary_i;

    RETURN retval;
  END data_function;

  PROCEDURE calling_proc
   (key_i IN table_name.id%TYPE) AS
   table_rec table_name%rowtype;
  BEGIN
   table_rec := data_function(primary_i=>key_i);
   /*
     do something with the returned record
   */
  END calling_proc;

END CALLER; 
```

谁能告诉我为什么这适用于我认为是对代码的微不足道的更改？该错误表明数据类型不一致，但我的“解决方案”中没有更改任何内容。

以前有人发生过这种情况吗？还有谁能解释错误消息中的破折号代表什么？我希望看到这里命名的数据类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:43:15.873

而不是这个

```
table_rec := data_pkg.data_function(primary_i=>key_i); 
```

试试这个（可能有用，虽然它们都是一样的）

```
SELECT data_pkg.data_function(primary_i=>key_i)
  INTO table_rec
  FROM dual; 
```

# javascript - 减法时间 = NAN

> ID：12017409
> 
> 赞同：2
> 
> 时间：2012-08-18T09:18:38.973
> 
> 标签：javascript

我正在尝试创建一个时差函数。而且我需要能够判断是否粘贴了 CookieTime。我尝试了许多不同的东西，但似乎无法让它发挥作用。关于为什么这不会减去的任何建议？

我昨晚在帮助下成功完成了 DateDiff：[Javascript DateDiff](https://stackoverflow.com/questions/12003660/javascript-datediff/12004010#comment16011723_12004010)

我的控制台中的错误是： Uncaught TypeError: Object 12:34:00 has no method 'getTime' 不知道我是否理解这意味着什么。

```
CookieTime = "12:34:00"; //Cookie time...
currTime   = "05:11:55"; //Current Real Time...

function past(){

//Print the results for testing...
document.write(CookieTime + '<br>'); // = 12:34:00
document.write(currTime + '<br/>');  // = 05:11:55

// = Testing the results here = NaN
document.write(CookieTime.getTime() - currTime.getTime() + '<br/>');

    if (CookieTime - currTime >= 0){
      // Time has pasted!!
      return true;
    } else {
      // Time is not here yet!!
      return false;
    }
}

document.write(past()); //Print response. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T09:20:29.580

您需要解析原始日期：

```
CookieTime = new Date('1970-1-1 12:34:00'); //Cookie time...
currTime   = new Date('1970-1-1 05:11:55'); //Current Real Time... 
```

# objective-c - 覆盖 addTarget 方法

> ID：12017423
> 
> 赞同：1
> 
> 时间：2012-08-18T09:21:18.513
> 
> 标签：objective-c, ios, xcode, uicontrol, uievent

我有 UIControl 的子类，并且想覆盖 sendAction:to:forEvent 方法，以便我可以发送我自己的自定义 UIEvent（以便我可以保留 UIControlEvents 变量）。但是，由于我只需要处理一个 UIEvent，因此我无法保留 UIControlEvents 变量。

因此，我认为我需要重写 addTarget 方法，以便保留 UIControlEvents 变量。

* * *

## 主要问题：

那么有谁知道如何实现 addTarget 方法来保留它应该的功能而不覆盖它？此外，有没有人知道更好的解决方案，因为默认情况下苹果不提供此信息（通过 UIEvent 对象的 UIControlEvents 变量）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:16:29.000

在您的子类中提供您自己的 addTarget 方法，但不要调用 super。保存目标和选项，并让自己成为该选项的目标。当针对该事件将操作方法​​发送给您时，您可以采取任何您想要的操作。

编辑：所以你有一个子类，并且想要保存添加的目标等。声明一个可变数组。当您收到此消息时：

```
- (void)addTarget:(id)target action:(SEL)action forControlEvents(UIControlEvents)controlEvents 
```

在您的子类中，您可以这样添加这个可变字典：

[myArray addObject:[@"target" : target, @"action" : NSStringFromSelector(action), @"event" : [NSValue valueWithBytes:&controlEvents objCType:@encode(controlEvents)]];

虽然这乍一看似乎令人生畏，但它并不是那么复杂。

现在我们有了每个想要了解每个可能的控制事件的注册对象。您的代码现在可以决定何时或是否通知一个或多个目标有关任何 controlEvent 的方法，方法是遍历数组并找到每个想要了解某事件的对象。

然后，您的子类决定谁收到通知的任何事件。

# php - 用 php 操作 xml

> ID：12017427
> 
> 赞同：1
> 
> 时间：2012-08-18T09:21:57.280
> 
> 标签：php, xml

我是 PHP 新手，所以也许这是个愚蠢的问题。如何使用 PHP 轻松操作 xml 文档并从中获取数据？有人可以给我看一些例子吗？

我试过这个：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<note>
<to>Tove</to>
<from>Jani</from>
<heading>Reminder</heading>
<body>Don't forget me this weekend!</body>
</note> 
```

这是我的 php：

```
<?php
$xml = simplexml_load_file("test.xml");

echo $xml->getName() . "<br />";

foreach($xml->children() as $child)
{
 echo $child->getName() . ": " . $child . "<br />";
}
?> 
```

这仅适用于这个文档，但是当我尝试一些更大的 xml 时它不起作用。它一直只写回一个标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:27:43.527

您的问题是，您的代码只能获取 xml 文档的第一个节点。试试这样：

```
 $xml = simplexml_load_file($url) ;
                echo '<br /><b>all of the data:</b>'.'<br>  </br><div class="data">';
                echo $xml->getName() . "<br />"; 
                foreach($xml -> children() as $name => $child ){
                echo $name.'<br />';
                    foreach($child -> children() as $name1 => $child1  ) {
                    echo $name1.'<br />'; //fetching children nodes
                        foreach($child1 -> children() as $name2 => $child2  ) {
                        echo $name2.'<br />';
                        }
                        // ..... and so on...depends how deep is you node tree
                    }

                } 
```

你可以使用 xpath 来获取你想要的东西。这很简单，您可以使用它构建查询。试试这样：

```
 $result=$xml->xpath($your_query);
                foreach($result as $bla) {
                    echo "$bla<br />";
                    } 
```

您可以使用此 CD 目录来测试您的代码： [http ://www.w3schools.com/xml/cd_catalog.xml](http://www.w3schools.com/xml/cd_catalog.xml)

以下是使用 xpath 的一些示例：http: [//www.w3schools.com/xpath/xpath_examples.asp](http://www.w3schools.com/xpath/xpath_examples.asp)

# ruby-on-rails - 在 gmaps4rails 上的 infowindow 中显示嵌套属性，导致 #

> ID：12017428
> 
> 赞同：0
> 
> 时间：2012-08-18T09:22:11.057
> 
> 标签：ruby-on-rails, ruby, gmaps4rails, infowindow

我正在制作一个使用 gmaps4rails gem 的应用程序，它是一个具有映射功能的简单联系人管理器，所以我有一个名为 person 的主模型

```
class Person < ActiveRecord::Base
attr_accessible :details, :gmaps, :latitude, :longitude, :address, :name,    :contacts_attributes
has_many :contacts
accepts_nested_attributes_for :contacts, allow_destroy: true

acts_as_gmappable

def gmaps4rails_address
  address
end

def gmaps4rails_infowindow
 "Name: #{name} <br \>
 #{details}
 //list with symbols of type of contact and contact by itself
 #{contacts. ??? }
 "
end 
```

我的联系人模型具有三个属性，persons_id、类型（无论是电子邮件、电话、手机）和联系人本身，那么我如何将其传递给 infowindow 内的列表？

这是它如何显示的图像

![](../Images/9eff8b73a68335ef8447852149b986e4.png)

顺便说一句，我在模型而不是控制器中定义了这一切，因为当时对我来说更容易......

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:04:23.333

只需重读，您可以这样做：

```
def gmaps4rails_infowindow
  text = "Name: #{name} <br/>"
  contacts.each do |contact|
    text << "#{contact.email}..."
  end
  text
end 
```

# php - 简单的数据库查找 - 不断循环

> ID：12017435
> 
> 赞同：0
> 
> 时间：2012-08-18T09:23:32.853
> 
> 标签：php, mysql

我在我的网站上运行以下代码。我从 html 表单中调用它。该表单有一个客户编号，它在数据库中查找重定向值并应重定向到网站。重定向适用于数据库中的一个值。但是，当我添加更多值时，它会使用最后一个值。我添加了 echo goto 所以我可以看到。该脚本提取整个数据库的每个重定向值。我如何才能提取与 client_number 关联的重定向值？

```
<php 

$host="localhost"; // Host name  
$username=""; // Mysql username  
$password=""; // Mysql password  
$db_name=""; // Database name  
$tbl_name="clients"; // Table name  

// Connect to server and select databse. 
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB"); 

// sent from form
$myclient=$_POST['myclient']; 

$myclient = stripslashes($myclient); 

$sql="SELECT * FROM $tbl_name WHERE client_number='$myclient'"; 

$result=mysql_query($sql); 

$count=mysql_num_rows($result); 

if($count==1){ 

$result = mysql_query("SELECT redirect FROM clients"); 

while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) { 

$goto = $row['redirect'];
//added to see output
echo $goto; 
//header ("location: $goto");
} 
exit(); 
} 
else { 
echo "Account number is invalid"; 
} 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:33:12.990

从您的查询中，您正在提取所有重定向

```
$result = mysql_query("SELECT redirect FROM clients"); 
```

应该是

```
$result = mysql_query("SELECT redirect FROM clients WHERE clientID=1234"); 
```

然后你使用`while`而不是`if`

```
if($row = mysql_fetch_array($result, MYSQL_ASSOC)) { } 
```

`header('Location: xyz.ext')`在循环中使用重定向是不好的

# php - rails 像 php 查询？

> ID：12017436
> 
> 赞同：1
> 
> 时间：2012-08-18T09:24:04.080
> 
> 标签：php, ruby-on-rails, ruby-on-rails-3

在我决定跳上 Rails 火车之前，我是一个非常业余的 php 开发人员。现在，我可以说我是一个非常优秀的 Rails 开发人员，并且已经开始喜欢它提供的许多功能。主要是，我喜欢在 rails 中查询是多么容易。例如：

```
@records = Model.where('column_name = ? and column_name = ?', params[:something], params[:something2]) 
```

这很容易做到，它甚至可以处理 SQL 注入。尽管我很喜欢 Rails，但我现在正在使用 PHP 开发一个应用程序。我现在需要开始将数据库放在一起并开始查询它。所以我的问题是，有没有类似于 rails 查询的 php 库？也就是说，对sql注入、易用性等有帮助吗？任何和所有输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:46:49.297

PHP 提供了一个名为 PDO 的库，内置于语言中，它完全符合您的要求： http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

顺便说一句，您要问的是“参数化查询”。

事实上，即使是 MySQLi 库也可以做到。

无法做到这一点的一个 PHP 库是旧的 MySQL 库（即类似函数`mysql_query()`等）。该库被认为已过时，不再维护。如果您仍在使用它（如果您不了解 PDO 或 MySQLi，我猜您可能会使用它），那么 PHP 手册建议切换到其他两个库之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:42:39.957

您可以将 ActiveRecord 与 PHP 一起使用： [http ://www.phpactiverecord.org/](http://www.phpactiverecord.org/)

还有很多其他的 ORM 替代品试图减轻痛苦。有一个[谷歌](https://www.google.co.uk/search?q=php%20orm)并尝试几个，看看是否比另一个更适合你。

# java - JVM 内存：为什么任务管理器上的内存与 JProbe（或 JConsole 工具）不同

> ID：12017437
> 
> 赞同：9
> 
> 时间：2012-08-18T09:24:29.927
> 
> 标签：java, memory, jvm, profiling, monitoring

我面临的问题是我的应用程序使用的内存只有 100MB，之后它减少了 50MB，但是在 Window 任务管理器上它显示 150MB 并且始终保持或增加但不减少，我们如何减少任务管理器上的内存（私有工作集）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-18T09:30:22.967

您在`JConsole`（或其他监视工具）中看到的是使用 java 内存的模式。

JVM 的内存通常在这些区域之间划分（您也可以在监控工具中看到）。

1.  用于 Java 对象的堆内存
2.  非堆内存，这是 java 存储加载的类和元数据以及 JVM 代码的地方
3.  本机内存是为 dll 和 Java 的本机代码（非常低级别）保留的内存的一部分。有时，当您获得足够的堆内存时，您可能会在该区域获得 OOM（因为随着`Max Heap`大小的增加，它会减少可用的本机内存）。

windows任务管理器没有显示。它显示了您的应用程序使用的*整个*内存（堆 + 非堆 + 本机部分）。

另请注意，通常进程会从操作系统请求更多内存，即使实际应用程序“释放”内存，这些内存也会由它们保留。这些内存页已被映射为进程地址空间的一部分。因此，在您的任务管理器中，您不会看到内存减少的模式，但这并不表示您的应用程序存在内存泄漏。
所以你不能减少你从任务管理器看到的内存，但是你从监控工具看到的内存应该会在某个时候减少，否则这可能表明内存泄漏

# asp.net - session -with mode sqlServer- 和 Profile 之间有什么不同吗

> ID：12017438
> 
> 赞同：0
> 
> 时间：2012-08-18T09:24:47.007
> 
> 标签：asp.net, session

**session -with mode sqlServer-**和**Profile**之间有什么不同吗？谁给了我们最好的表现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:26:26.740

当然有区别：SQLServer SessionState 模式意味着您放入 ASP.NET 会话中的所有内容（不仅是用户配置文件数据）都将被序列化并持久化到 SQL Server 数据库中，而配置文件可以在您配置的任何位置持久化到。有现成的配置文件提供程序将信息持久保存在 SQL Server 中。绝对要带个人资料。根本不要使用 ASP.NET 会话。最好的 ASP.NET SessionState 模式如下：

```
<sessionState mode="Off" /> 
```

我建议您始终使用它。它将使您的 Web 应用程序无状态，它们应该是这样的。

# php - 如何批准 Mediawiki 中的新文章和编辑？

> ID：12017440
> 
> 赞同：4
> 
> 时间：2012-08-18T09:25:09.743
> 
> 标签：php, mediawiki, mediawiki-api

当用户创建或编辑文章时，我想先批准它们，然后再发布它们。我怎样才能做到这一点或什么扩展使这成为可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T17:20:32.257

试试[FlaggedRevs](https://www.mediawiki.org/wiki/Extension:FlaggedRevs)扩展。它为每篇文章添加一个状态，当文章被编辑时状态可以改变（基于编辑者的权限），某些用户组可以手动改变状态。您可以使用状态向读者隐藏文章或向他们显示最后批准的状态。该扩展用于多个 Wikimedia 项目，因此得到可靠维护。它的主要缺点是它非常灵活并且具有比您需要的更多的选项（它支持多个级别的“批准”，多个批准维度，关于何时显示哪个版本的复杂规则等等），所以配置它有点复杂。（我在 2007 年花了很长时间才弄明白；现在可能有很好的教程，我不知道。）

# android - 横向模式下广告难以填满屏幕

> ID：12017441
> 
> 赞同：1
> 
> 时间：2012-08-18T09:25:16.737
> 
> 标签：android

我在我的应用程序中使用广告。当模拟器在纵向模式下工作时它可以正常工作，但是当我将模拟器转到横向模式时，即使我给出了 android:layout_width="match_parent"，它也会填满水平屏幕。请告诉我如何解决这个问题。

这是xml文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/rl"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        />

     <com.google.ads.AdView
        android:id="@+id/ad"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true"
        ads:adSize="BANNER"
        ads:adUnitId="a1501e5633125fb"
        ads:loadAdOnCreate="true"
        ads:testDevices="TEST_EMULATOR, 123456789ABCDEF" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T09:31:50.353

您应该为此使用[智能横幅](https://developers.google.com/mobile-ads-sdk/docs/admob/smart-banners)。

智能横幅是新的广告单元（从 v6.0.0 开始），它将在不同设备上以任一方向在任何屏幕尺寸上呈现全屏横幅广告。智能横幅通过“智能”检测手机在当前方向上的宽度，并使广告视图具有该尺寸，从而帮助处理不同设备上日益增加的屏幕碎片。

# ruby-on-rails - 如何在子记录上选择具有特定条件的父记录？

> ID：12017443
> 
> 赞同：0
> 
> 时间：2012-08-18T09:25:36.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, has-many-polymorphs

我正在使用 Rails 3 和 MongoDB（mongoid 适配器）构建应用程序。我正在努力在子记录中找到具有特定条件的父记录。

```
class Food
  include Mongoid::Document
  has_many :subscriptions, as: :subscribable
end

class Subscription
 include Mongoid::Document
 field :subscriber_id
 belongs_to :subscribable, polymorphic: true
 belongs_to :subscriber
end 
```

我想选择特定用户尚未订阅的食物。

这是我的查询不起作用。

```
Food.not_in('subscriptions.subscriber_id' => [User.first.id]) 
```

但它会返回所有食物。我的查询有什么问题？

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:42:17.050

这样的查询在 Mongoid 中不起作用。以下查询需要加入两个集合，但 MongoDB 没有加入的概念。因此，当您查询时，您只能使用您正在查询的集合中文档的字段 - 在这种情况下，它是`foods`集合（很可能）。

如果您不想根据订阅查询食物，我建议您将其嵌入到`Subscription`食物中。[如此处](http://mongoid.org/en/mongoid/docs/relations.html#embeds_many)所述。

# android - 如何从一部安卓手机先将数据包发送到wifi路由器，然后再从路由器发送到另一部安卓手机？

> ID：12017444
> 
> 赞同：1
> 
> 时间：2012-08-18T09:25:57.747
> 
> 标签：android, networking, tcp, udp, wifi

我有两部安卓手机，都连接到同一个wifi路由器，两部手机都知道彼此的IP地址和wifi路由器...我想将音频数据包从一部手机发送到路由器，路由器必须转发那个数据包到另一部手机？

应该采取什么方法来实施它？

任何类型的帮助将不胜感激

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:13:04.627

如果您知道两部手机的 IP 地址，则使用套接字将是一种理想的通信方式

# google-api - 撤消授予我的应用 Google Drive API 的访问权限

> ID：12017445
> 
> 赞同：13
> 
> 时间：2012-08-18T09:26:11.867
> 
> 标签：google-api, google-drive-api

如何撤消已授予我的 Google Drive Web 应用程序的访问权限，以便在用户下次使用时重新要求他授予权限？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-08T08:57:03.097

要撤销您的访问令牌，您需要“获取”（！）此网址： [https](https://accounts.google.com/o/oauth2/revoke?token=) ://accounts.google.com/o/oauth2/revoke?token= {token} 其中 {token} 是您的令牌的值，如此处所述： [https ://developers.google.com/accounts/docs/OAuth2WebServer#tokenrevoke](https://developers.google.com/accounts/docs/OAuth2WebServer#tokenrevoke)

对于 Java API（不知道其他语言），截至 2012 年 9 月 9 日，没有用于此的 API。我设法用这段代码撤销了一个令牌：

```
class myGoogleApi {
    private static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();

    ...

    public revoke(String token) {
        HttpRequestFactory factory = HTTP_TRANSPORT.createRequestFactory();
        GoogleUrl url = new GoogleUrl("https://accounts.google.com/o/oauth2/revoke?token="+token);
        HttpRequest request = factory.buildGetRequest(url);
        HttpResponse response = request.execute();
        ...
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-19T05:01:22.320

如果您破坏了数据库中的所有刷新令牌，将查询参数approval_prompt=force 添加到身份验证请求将解决该问题。当用户下一次批准请求时，它将导致重新发出刷新令牌。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-29T11:48:34.707

要撤销访问权限，请访问以下网址

[https://security.google.com/settings/security/permissions?pli=1](https://security.google.com/settings/security/permissions?pli=1)

选择您需要撤消的应用程序，然后单击删除。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-18T22:04:59.457

访问[https://accounts.google.com/b/0/IssuedAuthSubTokens?hl=en](https://accounts.google.com/b/0/IssuedAuthSubTokens?hl=en)以获取您授予访问权限的应用程序和网站的列表。在它们旁边，您会找到一个撤销访问按钮。

访问该页面的说明位于[http://support.google.com/accounts/bin/answer.py?hl=en&answer=41236](http://support.google.com/accounts/bin/answer.py?hl=en&answer=41236)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-14T21:19:11.963

使用 Google Play 服务：

[http://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html](http://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html)

将[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)添加到您的范围。

例子：

```
String scope="oauth2:https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile"

final String token = GoogleAuthUtil.getToken(context, "xxxx@gmail.com", scope); 
```

或“蛮力”

```
Intent res = new Intent();
res.addCategory("account:xxxx@gmail.com");
res.addCategory("scope:oauth2:https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile");
res.putExtra("service", "oauth2:https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile");
Bundle extra= new Bundle();
extra.putString("androidPackageName","com.your.package");
res.putExtra("callerExtras",extra);
res.putExtra("androidPackageName","com.your.package");
res.putExtra("authAccount","xxxx@gmail.com");

String mPackage = "com.google.android.gms";
String mClass = "com.google.android.gms.auth.TokenActivity";
res.setComponent(new ComponentName(mPackage,mClass));
startActivityForResult(res,100); 
```

现在，当您在此处撤销访问[https://accounts.google.com/IssuedAuthSubTokens](https://accounts.google.com/IssuedAuthSubTokens)时，应用程序会再次在设备中向您显示权限窗口。

# iphone - 如何在 iOS5 中与 TWRequest performRequestWithHandler 同步变量？

> ID：12017448
> 
> 赞同：0
> 
> 时间：2012-08-18T09:26:31.933
> 
> 标签：iphone, ios5, twitter, objective-c-blocks, twrequest

我真的不知道如何处理 iOS5 Twitter API TWRequest performRequestWithHandler。我在我的 .h 文件中声明了 NSMutableArray *parsedTimeLine 的实例变量和 -(void) fetchWebData: (NSString *) screenName; 的方法签名。

上述方法实现在这里：

-(void) fetchWebData: (NSString *) screenName {

```
NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
[params setObject:screenName forKey:@"screen_name"];
[params setObject:@"f" forKey:@"include_entities"];
[params setObject:@"f" forKey:@"include_rts"];
[params setObject:@"10" forKey:@"count"];
[params setObject:@"t" forKey:@"trim_user"];
[params setObject:@"f" forKey:@"contributor_details"];
[params setObject:@"t" forKey:@"exclude_replies"];

NSURL *url = [NSURL URLWithString:@"http://api.twitter.com/1/statuses/user_timeline.json"];

TWRequest *request = [[TWRequest alloc] initWithURL:url
                                         parameters:params
                                      requestMethod:TWRequestMethodGET];
[request performRequestWithHandler:
 ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

     if (responseData) {
         NSError *jsonError;

         parsedUserTimeLine =[NSJSONSerialization JSONObjectWithData:responseData
                                                         options:NSJSONReadingMutableLeaves
                                                           error:&jsonError];

         NSLog(@"jsonArray result count inside request: %d",parsedUserTimeLine.count);
         NSLog(@"jsonArray values inside request: %@", parsedUserTimeLine);
     }
 }];   
NSLog(@"jsonArray result count outside request: %d",parsedUserTimeLine.count);
NSLog(@"jsonArray values outside request: %@", parsedUserTimeLine); 
```

}

这工作正常，但有一个奇怪的事情我真的想不通。我在请求方法中的 2 个 NSLogs 显示了 parsedUSerTimeline 的准确计数值和数组内容。但是我的 2 NSLogs OUTSIDE THE REQUEST 方法显示

-jsonArray 请求外的结果计数：0 -jsonArray 请求外的值：（null）

此外，在调用 fetchWebData 方法后，我在 viewDidLoad 中检查了 parsedUserTimeLine 的值，显示 count = 0 和 value = null。

请帮我解决这个问题。我需要全局访问 parsedUserTimeLine 的值。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:31:38.933

我不知道 Twitter 框架，但从你发布的代码中我可以告诉你这将执行异步。NSLogs 都是有效的。请求完成时调用内部 NSLogs，即使请求尚未启动，也会调用外部 NSLog。

如果请求已经完成，只需调用一个方法来通知其他人。

```
[request performRequestWithHandler:
 ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

 if (responseData) {
     NSError *jsonError;

     NSDictionary *parsedUserTimeLine =[NSJSONSerialization JSONObjectWithData:responseData
                                                     options:NSJSONReadingMutableLeaves
                                                       error:&jsonError];

     NSLog(@"jsonArray result count inside request: %d",parsedUserTimeLine.count);
     NSLog(@"jsonArray values inside request: %@", parsedUserTimeLine);

     // The request will be perform on another thread, so call the method on the main
     // thread to avoid crossing operations
     [NSOperationQueue mainQueue] addOperationWithBlock:^{
         [self requestHasFinishedWithData:parsedUserTimeLine];
     }]

 }
}]; 
```

# css - 无法选择（单击）子菜单项

> ID：12017449
> 
> 赞同：0
> 
> 时间：2012-08-18T09:26:50.937
> 
> 标签：css, wordpress, menu, stylesheet

我有以下网站：

[http://miraj.quranprojectreading.org/](http://miraj.quranprojectreading.org/)

我面临的问题是子菜单项不可选择。例如，如果您将鼠标悬停在“关于我们”上，您将无法点击子菜单项。

知道如何解决这个问题吗？任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:31:38.170

因为在你的主菜单和子菜单中有一个隐藏的差距。通过使用 firebug 检查你的 css，你的 css 中有这样的东西：

```
#access ul ul {
    background: none repeat scroll 0 0 rgba(143, 235, 251, 0.9);
    display: none;
    left: 0;
    padding: 10px;
    position: absolute;
    top: 24px;
    vertical-align: middle;
    width: 160px;
    z-index: 10;
} 
```

现在`top:24px;`离主菜单太远了。将其更改为 -

```
#access ul ul {
    background: none repeat scroll 0 0 rgba(143, 235, 251, 0.9);
    display: none;
    left: 0;
    padding: 10px;
    position: absolute;
    top: 20px;
    vertical-align: middle;
    width: 160px;
    z-index: 10;
} 
```

现在您可以选择子菜单。

# android - 代码优化

> ID：12017452
> 
> 赞同：0
> 
> 时间：2012-08-18T09:27:00.330
> 
> 标签：android, optimization

我有这个代码：

```
private Bitmap disk1, disk2, disk3;
private ArrayList<Bitmap> bitmapArray = new ArrayList<Bitmap>();
......
disk1 = BitmapFactory.decodeResource(getResources(), R.drawable.disk01);
disk1 = Bitmap.createBitmap(disk1, 0, 0, origW, origH, matrix, true);
disk2 = BitmapFactory.decodeResource(getResources(), R.drawable.disk02);
disk2 = Bitmap.createBitmap(disk2, 0, 0, origW, origH, matrix, true);
disk3 = BitmapFactory.decodeResource(getResources(), R.drawable.disk03);
disk3 = Bitmap.createBitmap(disk3, 0, 0, origW, origH, matrix, true);

bitmapArray.add(disk1);
bitmapArray.add(disk2);
bitmapArray.add(disk3); 
```

我认为要优化代码，我可以在没有位图的情况下使用这种结构（带有 for 循环）：

```
 bitmapArray.add(Bitmap.createBitmap(BitmapFactory.decodeResource(getResources(),
                        R.drawable.disk01), 0, 0, origW, origH, matrix, true)); 
```

但我有点困惑：它会存储方法的结果，或者每次我尝试获取*bitmapArray.get(0)*时都会调用这些方法？

谢谢

* * *

更新：我将在处理程序回调之后使用数组来更改画布上的动画：

```
Bitmap item;
.......
public Handler.Callback hc = new Handler.Callback() {
        public boolean handleMessage(Message msg) {
                    switch (msg.what) {
                    case 1:
                        if (ai == 8)
                            ai = 0;
                        item = bitmapArray.get(ai);
                        ++ai;
                        break; 
```

也许它不叫“优化”，我不得不说“可读性”

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:35:43.077

`ArrayList`请查看add 方法的 Java 文档

> add(E e) 将指定元素附加到此列表的末尾。

当调用 add 方法时，对象被添加到`ArrayList`.

现在，当您使用

> get(int index) 返回此列表中指定位置的元素。

它将返回存储的对象它不会调用 add 方法中编写的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:05:09.623

`get()`只需查看给定位置并返回那里的内容。 `add()`只需添加传递给它的内容。

没有区别

```
disk1 = BitmapFactory.decodeResource(getResources(), R.drawable.disk01);
disk1 = Bitmap.createBitmap(disk1, 0, 0, origW, origH, matrix, true);
bitmapArray.add(disk1); 
```

或者

```
bitmapArray.add(Bitmap.createBitmap(BitmapFactory.decodeResource(getResources(),
                        R.drawable.disk01), 0, 0, origW, origH, matrix, true)); 
```

由于结果

```
Bitmap.createBitmap(BitmapFactory.decodeResource(getResources(),
                            R.drawable.disk01), 0, 0, origW, origH, matrix, true)); 
```

是一个位图，无论是否先将其保存到位图对象。这就像从瓶子里喝，你可以先把它装进玻璃杯里，或者直接从瓶子里喝，在这两种情况下你都喜欢可乐或其他什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T10:09:28.440

Collection.get 返回存储在给定位置的**对象。**您可以调试该过程以详细了解有关此内容的更多信息。

那句话，这

```
bitmapArray.add(Bitmap.createBitmap(BitmapFactory.decodeResource(getResources(),
                    R.drawable.disk01), 0, 0, origW, origH, matrix, true)); 
```

是相同的

```
disk1 = BitmapFactory.decodeResource(getResources(), R.drawable.disk01);
disk1 = Bitmap.createBitmap(disk1, 0, 0, origW, origH, matrix, true);
bitmapArray.add(disk1); 
```

在优化方面，我相信两者都使用几乎相同数量的内存，因为无论如何都会创建一个对象并将其存储在 ArrayList 中。

# c# - 如何从 List 生成 SQL 语句？

> ID：12017453
> 
> 赞同：4
> 
> 时间：2012-08-18T09:27:05.347
> 
> 标签：c#, sql, list, visual-studio-2005

如果我有一个字符串列表，即。`List<String>`，如何生成SQL语句，例如：

```
SELECT Column1 FROM Table1 WHERE Column1 IN ('String1','String2','String3') 
```

`'String1','String2','String3'`的内容在哪里`List<String>`？

没有 LINQ 等，因为我使用的是 VS2005。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T10:07:16.463

看看下面的版本

```
 [Test]
    public void Test()
    {
        var list = new List<string> {"String1", "String2", "String3"};
        string values = ArrayToString(list);
        string sql = string.Format("SELECT Column1 FROM Table1 WHERE Column1 IN ( {0} )", values);
    }

    private static string ArrayToString(IEnumerable<string> array)
    {
        var result = new StringBuilder();

        foreach (string element in array)
        {
            if (result.Length > 0)
            {
                result.Append(", ");
            }
            result.Append("'");
            result.Append(element);
            result.Append("'");
        }
        return result.ToString();
    } 
```

结果声明`SELECT Column1 FROM Table1 WHERE Column1 IN ( 'String1', 'String2', 'String3' )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:34:31.403

要正确处理sql注入，更好的答案可能是使表单的查询......

```
select results.* from (
    select pk from table where column=value1 union
    select pk from table where column=value2 union
    select pk from table where column=value3 union
    select pk from table where column=value4 union
    select pk from table where column=value5
) filtered join table as results on filtered.pk = results.pk 
```

然后让它对 c# 更友好

```
string items_filter = "";
int item_index=0;
OracleParameterCollection parameters = new OracleParameterCollection(); // Not sure what class to use here exactly, but just collect a bunch of stored procedure parameters

foreach (string item in list_of_items) {
    string item_name = string.Format("i_item{0}",item_index);  
    string item_sql = string.Format("select pk from table where column=:{0} union",item_name);
    parameters.Add(new Parameter("item_name",item));
    item_index+=1;  
}
if (items_filter.IsNullOrEmpty()) 
    return;

string sql = String.Format("select results.* from ({0}) filtered join table as results on filtered.pk = results.pk",items_filter);

OracleCommand c = new OracleCommand();
c.command = sql;
c.parameters = parameters;
c.execute(); 
```

或多或少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T10:18:30.507

不要为了防止 SQL 注入。

```
string sql_list = "";
foreach (string s in lst)
    sql_list+=string.Format("{0},",s.Replace("'","''"));
sql_list = string.Format("({0})",sql_list.substring(0,sql_list.length-2)); 
```

这可能对一些人有所帮助，并使用字符串生成器，或者不使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T10:14:38.373

请不要使用到目前为止已提交的其他答案。它们无缘无故地包含 SQL 注入。

```
 List<String> strlist = new List<string>();
    strlist.Add("st1");
    strlist.Add("st2");
    strlist.Add("st3");

    var dynamicPart = string.Join(", ",
     Enumerable.Range(0, strlist.Count).Select(i => "@" + i).ToArray());
    for(i = 0 to strlist.Count)
     { /* add parameter to SqlCommand here with name ("@" + i) */ }
    string query = "SELECT Column1 FROM Table1 WHERE Column1 IN (" +
     dynamicPart + ")"; 
```

出于多种原因使用参数而不是文字（研究它们！）。

而不是使用笨拙的连接循环`string.Join`来为我们完成所有这些。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T10:21:42.903

```
// Assume your list (List<string>) is named "myList"

// Please put the next line in an external string resource...
string selectStatement = "SELECT Column1 FROM Table1 WHERE Column1 IN ({0})";

StringBuilder stringBuilder = new StringBuilder("(");
foreach(string colName in myList)
    stringBuilder.Append(String.Format("'{0}',", colName));
stringBuilder.Append(")");

return String.Format(selectStatement, stringBuilder.ToString().Replace(",)", ")"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-18T09:36:48.913

```
List<string> lst=new List<string>();lst.Add("Hello");lst.Add("Hello World");
string s="";
foreach(string l in lst)s+="\""+l+"\"";
s=Regex.Replace(s,"\"\"","\",\"");

string output="SELECT Column1 FROM Table1 WHERE Column1 ("+s+")"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-18T09:36:57.197

尝试 ：

```
 List<String> strlist = new List<string>();
        strlist.Add("st1");
        strlist.Add("st2");
        strlist.Add("st3");

        string query = "SELECT Column1 FROM Table1 WHERE Column1 IN (";

        for (int i = 0; i < strlist.Count; i++)
        {
            query += "\'" + strlist[i] + "\'" + (i == strlist.Count - 1 ? "" : ",");
        }

        query += ")"; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-18T09:39:18.977

由于您说它是内部操作，因此无需担心 SQL 注入，那么您可以通过此实现您想要的。

```
string str = "";

foreach(string s in list)
  str += "'" + s.Replace("'", "''") + "',";

str = str.SubString(0, str.Length - 1);

str = "SELECT Column1 FROM Table1 WHERE Column1 IN (" + str + ")";

//str will have your command ready. 
```

我已经测试过了。它完美地工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-18T09:39:40.450

```
List<string> items = new List<string>();
items.Add("string1");
items.Add("string2");
items.Add("string3");
string AllItems = "";
foreach (string item in items)
{
    AllItems += string.Format("\"{0}\",",item);
}
AllItems = AllItems.TrimEnd(',');
string YourSQLQuery = string.Format("SELECT Column1 FROM Table1 WHERE Column1 IN ({0})", AllItems);
MessageBox.Show(YourSQLQuery); 
```

# wordpress - 在两种帖子类型之间共享分类

> ID：12017454
> 
> 赞同：0
> 
> 时间：2012-08-18T09:27:08.237
> 
> 标签：wordpress, custom-post-type, custom-taxonomy

我有两种自定义帖子类型，流派和电影。我想列出带有复选框的流派，提交后，我想列出带有先前选择的流派标记的电影，因此流派可以属于多部电影和虎钳诗句。我不确定这是否可以通过自定义字段完成，或者我是否应该将两种帖子类型合并为一个？似乎没有一种方法可以在两种帖子类型之间共享分类法，至少我能找到。有什么建议么？提前致谢。

# php - 来自 PHP 的 SSH 命令不起作用。命令从命令行运行良好

> ID：12017455
> 
> 赞同：1
> 
> 时间：2012-08-18T09:27:24.653
> 
> 标签：php, command-line, ssh, unzip

我继承了这个 Intranet 应用程序，它解压缩了一些请求的假脱机报告并将它们转储到用户可以访问的 Samba 文件夹中。这是PHP：

```
$command = "$unzip_program $path_spooled/$zip_file $filename -d $target_dir";
$ssh_command = "$ssh_syscommand -i /web/live/sshkey_nopass reportuser@$archive_server \"$command\"";

$sshpipe2 = popen( $ssh_command, 'r' ); 
```

因此，如果我回显正在运行的 SSH 命令，它是：

```
/usr/bin/ssh -i /web/live/sshkey reportuser@192.168.1.21 "/usr/bin/unzip -c /reports/spooled/2012/jan.zip 01SU7C.RPT" |
/usr/bin/ssh -i /web/live/sshkey reportuser@192.168.1.2 "cat > /reports/spooled/01SU7C.RPT" 
```

（为了便于阅读，我在管道后面插入了一个回车）

如果我从命令行执行该命令，它工作正常。如果从 php 运行它会失败且没有错误。

我所需要的只是一些帮助确定在哪里寻找。我认为它可能是缺少 ssh 密钥，但服务器在执行命令时确实显示了该用户的登录信息。

我错过了什么？我应该去哪里看？解压缩有什么我不知道的吗？我需要从 Apache 设置某种上下文吗？

# java - Java：遍历目录中的 HTML 文件

> ID：12017460
> 
> 赞同：1
> 
> 时间：2012-08-18T09:28:50.557
> 
> 标签：java, xslt, iteration, transformation, jaxp

我将 HTML 文件和一个 XSLT 文件作为输入并生成 HTML 输出，但在我的文件夹中有多个 HTML 文件，我必须将它们中的每一个作为输入并生成相应的输出文件，而 XSLT 输入文件每次都保持不变. 目前在我的代码中，我每次都重复代码块以获取输入 HTML 文件。取而代之的是，我想遍历文件夹中的所有 HTML 文件，并将它们一一作为输入文件以生成输出。在我当前的代码中，文件名也是固定的，`part_1.html`但它可能会有所不同，在这种情况下，此代码将不起作用，这会产生问题。任何人都可以在这件事上帮忙：谢谢！

**当前 Java 代码（两个文件的示例）：**

```
public void tranformation() {
        // TODO Auto-generated method stub
        transform1();
        transform2();
    }
    public static void transform1(){
        String inXML = "C:/SCORM_CP/part_1.html";
        String inXSL = "C:/source/xslt/html_new.xsl";
        String outTXT = "C:/SCORM_CP/part1_copy_copy.html";
        String renamedFile = "C:/SCORM_CP/part_1.html";
        File oldfile =new File(outTXT);
        File newfile =new File(renamedFile);
        HTML_Convert hc = new HTML_Convert();
        try {
            hc.transform(inXML,inXSL,outTXT);
            } catch(TransformerConfigurationException e) {
            System.err.println("Invalid factory configuration");
            System.err.println(e);
            } catch(TransformerException e) {
            System.err.println("Error during transformation");
            System.err.println(e);
        }
        try{
            File file = new File(inXML);
            if(file.delete()){
                System.out.println(file.getName() + " is deleted!");
                }else{
                System.out.println("Delete operation is failed.");
            }
            }catch(Exception e){
            e.printStackTrace();
        }
        if(oldfile.renameTo(newfile)){
            System.out.println("Rename succesful");
            }else{
            System.out.println("Rename failed");
        }
    }
    public static void transform2(){
        String inXML = "C:/SCORM_CP/part_2.html";
        String inXSL = "C:/source/xslt/html_new.xsl";
        String outTXT = "C:/SCORM_CP/part2_copy_copy.html";
        String renamedFile = "C:/SCORM_CP/part_2.html";
        File oldfile =new File(outTXT);
        File newfile =new File(renamedFile);
        HTML_Convert hc = new HTML_Convert();
        try {
            hc.transform(inXML,inXSL,outTXT);
            } catch(TransformerConfigurationException e) {
            System.err.println("Invalid factory configuration");
            System.err.println(e);
            } catch(TransformerException e) {
            System.err.println("Error during transformation");
            System.err.println(e);
        }
        try{
            File file = new File(inXML);
            if(file.delete()){
                System.out.println(file.getName() + " is deleted!");
                }else{
                System.out.println("Delete operation is failed.");
            }
            }catch(Exception e){
            e.printStackTrace();
        }
        if(oldfile.renameTo(newfile)){
            System.out.println("Rename succesful");
            }else{
            System.out.println("Rename failed");
        }
    }
    public void transform(String inXML,String inXSL,String outTXT)
    throws TransformerConfigurationException,
    TransformerException {
        TransformerFactory factory = TransformerFactory.newInstance();
        StreamSource xslStream = new StreamSource(inXSL);
        Transformer transformer = factory.newTransformer(xslStream);
        transformer.setErrorListener(new MyErrorListener());
        StreamSource in = new StreamSource(inXML);
        StreamResult out = new StreamResult(outTXT);
        transformer.transform(in,out);
        System.out.println("The generated XML file is:" + outTXT);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T10:39:28.737

```
File dir = new File("/path/to/dir");
File[] htmlFiles = dir.listFiles(new FilenameFilter() {
    @Override
    public boolean accept(File dir, String name) {
        return name.endsWith(".html");
    }
});
if (htmlFiles != null) for (File html: htmlFiles) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T09:39:46.330

你必须实现类似的东西

```
public class Transformation {

  public static void main (String[] args){
    transformation(".", ".");
  }

  public static void transform(String inXML, String inXSL, String outTXT, String renamedFile){
    System.out.println(inXML);
    System.out.println(inXSL);
    System.out.println(outTXT);
    System.out.println(renamedFile);
  }

  public static void transformation(String inFolder, String outFolder){
    File infolder = new File(inFolder);
    File outfolder = new File(outFolder);
    if (infolder.isDirectory() && outfolder.isDirectory()){
      System.out.println("In " + infolder.getAbsolutePath());
      System.out.println("Out " + outfolder.getAbsolutePath());
      File[] listOfFiles = infolder.listFiles();
      String outPath = outfolder.getAbsolutePath();
      String inPath = infolder.getAbsolutePath();
      for (File f: listOfFiles) {
        if (f.isFile() ) {
          System.out.println("File " + f.getName());
          int indDot = f.getName().lastIndexOf(".");
          String name = f.getName().substring(0, indDot);
          String ext = f.getName().substring(indDot+1);
          if (ext != null && ext.equals("html")){
            transform(f.getAbsolutePath(), inPath+File.separator+name+".xsl", outPath+File.separator+name+".txt", outPath+File.separator+name+".html");

          }
        }
      }       
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T09:44:23.237

首先，您应该编写一个将`inXML`、`inXSL`和作为参数的方法。`outTXT``renamedFile`

然后，使用最终采用 a`list()`的类的方法，您可以遍历要转换的文件。`File``FilenameFilter`

这是一个示例`FilenameFilter`：

```
FilenameFilter filter = new FilenameFilter() {
    public boolean accept(File dir, String name) {
        return name.contains("part");
    }
}; 
```

问候

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T09:57:12.970

使用`DirectoryScanner`这将使您的工作更轻松

```
Example of usage:

   String[] includes = {"**\*.html"};
   ds.setIncludes(includes);
   ds.setBasedir(new File("test"));
   ds.setCaseSensitive(true);
   ds.scan();

   System.out.println("FILES:");
   String[] files = ds.getIncludedFiles();
   for (int i = 0; i < files.length; i++) {
     System.out.println(files[i]);
   } 
```

[http://plexus.codehaus.org/plexus-utils/apidocs/org/codehaus/plexus/util/DirectoryScanner.html](http://plexus.codehaus.org/plexus-utils/apidocs/org/codehaus/plexus/util/DirectoryScanner.html)

# javascript - javascript getElementByTagname

> ID：12017461
> 
> 赞同：0
> 
> 时间：2012-08-18T09:28:51.127
> 
> 标签：javascript, getelementsbytagname

是否有代码可以使用 javascript 获取其他网站的元数据信息，例如标题、关键字？document.getElementById 将有助于获取当前文档的信息。同样是否有代码可以获取当前文档以外的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:31:00.630

当然，您可以使用该[`getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)方法从当前文档中提取此信息：

```
​alert(document.getElementsByTagName('title')[0].innerHTML);​ 
```

[现场演示](http://jsfiddle.net/A3szU/)。

就*其他*网站而言，好吧，正如您所知，[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制会阻止您使用 AJAX 检索它们的内容。但是，如果您的域上有一个服务器端脚本可以检索这些远程站点的 HTML 内容，您可以完美地向您的脚本发送 AJAX 请求，并在成功回调中解析 HTML 并检索您感兴趣的信息（元， 标题， ...）。但是由于您已经设置了一个服务器端脚本来检索远程内容，因此它可以直接是解析远程 HTML 并返回所需信息的服务器端脚本。

# jquery - jQuery选择最近的tr

> ID：12017466
> 
> 赞同：1
> 
> 时间：2012-08-18T09:29:46.657
> 
> 标签：jquery

您好，我在`tr`切换时遇到了一些问题，这是我拥有的代码，这是 HTML：

```
<table class="avs" border="1" width="384px">
    <tr class="avs">
        <th>Avatar name</th>
        <th >Position</th>
    </tr>
    <tr class='avs'>
        <td>
            <a class='extralink' href="#"></a>
        </td>
        <td></td>
    </tr>
    <tr class='extra'>
        <td colspan='2' >
            <div>
                <div>info</div>
                <div>image</div>
            </div>
        </td>
    </tr>
</table>​ 
```

这是jQuery：

```
$('.extralink').click(function() {
    $(this).closest('tr').next('tr.extra').toggle();
}); 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:47:44.713

您的代码运行良好...检查此**[FIDDLE](http://jsfiddle.net/s35SP/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:40:34.420

```
$('.extralink').click(function() {
    $(this).parent().parent().next().toggle();
    return false;
}); 
```

# c# - 选择参数化的记录数（带中继器）

> ID：12017469
> 
> 赞同：0
> 
> 时间：2012-08-18T09:30:16.953
> 
> 标签：c#, asp.net, sql

今天是个好日子，

所以在这里，我的转发器控件的 SQL 查询有问题，我真正想要发生的是，我有一个从 1 到 60 的随机数，它将告诉数据库选择哪个测试问题，（如果它只有一个，这不是问题，哈哈。）但是，我需要从我的数据库向转发器控件显示 20 个问题。我的数据库还包含 60 个问题。所以是的，我在网上尝试了一些解决方案，但是我的代码总是只返回一条记录，这很痛苦。希望有人可以帮助我，我知道有些人很基础，但我只是一个初出茅庐的程序员，所以，是的，在此先感谢。

顺便说一句，这是代码块，

```
protected void Page_Load(object sender, EventArgs e)
{
    int i = 1;
    Random r = new Random();
        while (i <= 20)
        {
            int iss;
            string constr = @"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Mark\Desktop\thesis\WebSite8\App_Data\thesisDB.mdf;Integrated Security=True;User Instance=True";
            SqlConnection con = new SqlConnection(constr);
            string com = "SELECT * from CHAP1_quiz WHERE questionnumber = @num";
            SqlDataAdapter comms = new SqlDataAdapter();
            SqlCommand cmd = new SqlCommand(com, con);
            iss = r.Next(1, 60);
            comms.SelectCommand = cmd;
            cmd.Parameters.Add("@num");
            DataSet ds = new DataSet();
            con.Open();
            comms.Fill(ds);
            Repeater1.DataSource = ds;
            Repeater1.DataBind();
            i++;;
            con.Close();
        }
} 
```

哦，是的，让我告诉你，当我运行这段代码时，它只显示 1 条记录。但我需要 20 个，我知道这是一个蹩脚的问题，但它已经困扰了我很长一段时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:58:04.003

您的代码将在数据库中往返 20 次，因为每个 while 循环您选择一个问题，尝试再次创建`new DataSet`和绑定数据源。这就是为什么你的清单只有一个问题。

为了避免到数据库的往返，而不是`while`在代码中使用随机数和循环，摆脱`while`循环，您可以在 SQL中使用`SELECT` [随机数](http://www.petefreitag.com/item/466.cfm)`ORDER BY NEWID()`

```
string constr = "...";
DataSet ds = new DataSet();

using (var con = new SqlConnection(constr))
{
    string sql = "SELECT TOP 20 * from CHAP1_quiz ORDER BY NEWID()";
    var adapter = new SqlDataAdapter();
    var cmd = new SqlCommand(sql, con);
    adapter.SelectCommand = cmd;

    con.Open();
    comms.Fill(ds);  
}

Repeater1.DataSource = ds;
Repeater1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:34:58.677

将前一个随机数存储在一个数组中并将这些数字发送到 sqlserver 并使用 where 条件作为`WHERE questionnumber != arraynumber`

# asp.net-mvc-3 - 修改后的数据不先保存到实体框架数据库中的数据库

> ID：12017471
> 
> 赞同：1
> 
> 时间：2012-08-18T09:30:40.120
> 
> 标签：asp.net-mvc-3, entity-framework-4

我正在编写更改密码的代码，但我不知道数据未更新到数据库的原因。我已经建立了自定义会员表和会员 Provider 类。这里名为 IVRControlPanelEntities 的实体是从实体框架生成的。我有以下功能来更改密码。

```
 public bool ChangePassword(string username, string oldPassword, string newPassword)
        {
            IVRControlPanelMembershipProvider memberservice = new IVRControlPanelMembershipProvider();
            if (!memberservice.ValidateUser(username, oldPassword) || string.IsNullOrEmpty(newPassword.Trim()))
            {
                return false;
            }
            else
            {
                using (IVRControlPanelEntities db = new IVRControlPanelEntities())
                {
                    User user = GetUser(username);
                   // string hash = FormsAuthentication.HashPasswordForStoringInConfigFile(newPassword.Trim(), "md5");
                    string PasswordSalt = CreateSalt();
                    user.PasswordSalt = PasswordSalt;
                    user.Password = CreatePasswordHash(newPassword, PasswordSalt);
                    db.SaveChanges();

                }
               return true;
            }

        } 
```

**问题：** 我尝试更改密码，一切正常，但新密码的数据未更新到表中。我还搜索了原因并使用了以下代码：1。

```
db.Entry(user).State = EntityState.Modified; 
```

2.

```
db.Users.Attach(user);
                 db.ApplyCurrentValues("Users", user); 
```

以上都不起作用，也使用**TryUpdateModel()**函数，但它没有检测到 .

这可能是由于对象的状态未定义，我该如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:23:06.940

如果 GetUser 方法使用不同的上下文，则不会更新数据。

尝试这个：

```
User user = db.Users.FirstOrDefault(x=>x.UserName == username);
               // string hash = FormsAuthentication.HashPasswordForStoringInConfigFile(newPassword.Trim(), "md5");
                string PasswordSalt = CreateSalt();
                user.PasswordSalt = PasswordSalt;
                user.Password = CreatePasswordHash(newPassword, PasswordSalt);
                db.SaveChanges(); 
```

# iphone - 在 backgorund 和 detachNewThread 中执行选择器之间的区别

> ID：12017475
> 
> 赞同：1
> 
> 时间：2012-08-18T09:31:17.960
> 
> 标签：iphone

我想知道在 backgorund 和 detachNewThread 中执行选择器有什么区别

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T10:00:00.703

它们是相同的。正如您在文档部分中看到的那样[单击此处](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html)

**performSelectorInBackground:withObject:**调用这个方法的效果和调用NSThread的**detachNewThreadSelector:toTarget:withObject:**方法的效果是一样的，参数是当前对象、选择器和参数对象。

**performSelectorInBackground:withObject:**比 NSThread 更简单。

但是，NSThread 可以控制其优先级、堆栈大小等。如果您想自定义行为，我建议使用 NSThread 而不是 performSelectorInBackground:withObject:。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:49:26.773

我会从语义的角度来看它。没有技术理由使用其中一种。

如果你真的“想”有一个“做某事”的线程，请使用 NSThread；特别是，如果您的线程运行某种形式的事件或消息循环，它可能是创建线程的最合适的方式。在这种情况下，“线程对象”实际上就是这样；在许多情况下，它不是具有实际应用程序数据的“应用程序领域”对象，因为这些数据将以某种方式移交给线程。

如果您的线程只是为了在后台运行某个单一操作，请使用基于 NSObject 的方法。您并不真正关心这是一个“线程”，您运行它的对象很可能是带有数据的“应用程序领域”对象；没有事件或消息循环来提供来自其他线程的命令。

因此，我会根据抽象因素做出决定，例如“在给定的上下文中看起来更好”。拥有一个 NSThread “感觉”就像是一个更独立的实体，它愿意为多个客户端提供服务，而 NSObject 方法感觉就像它与它运行的数据对象紧密相连，除非它是对事业至关重要。

# javascript - asp.net应用程序活动类中的Twitter引导导航？

> ID：12017493
> 
> 赞同：1
> 
> 时间：2012-08-18T09:35:12.557
> 
> 标签：javascript, asp.net, twitter-bootstrap

我在 asp.net 应用程序中使用 Twitter 引导程序，下面是我的导航栏代码：

```
 <div class="navbar">
          <div class="navbar-inner">
            <div class="container">
                <a class="brand" href="../">MyApp</a>
                <ul class="nav">
                    <li class="active"><a href="../">Home</a></li>
                    <li><a href="../About.aspx">About us</a></li>
                    <li><a href="../ContactUs.aspx">Contact us</a></li>
                </ul>
            </div>
          </div>
        </div> 
```

每次我在链接到菜单项的页面上时，我都想更改活动菜单项。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T09:58:01.593

使用 JavaScript，您可以使用以下代码获取当前路径：

```
var currentPath = window.location.pathname; 
```

并将活动类添加到当前项目，如下所示：

```
$(".menu a[href='" + currentPath + "']").parent().addClass("active"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T11:00:23.900

在这里查看一个优秀的助手类：

[http://chrisondotnet.com/2012/08/setting-active-link-twitter-bootstrap-navbar-aspnet-mvc/](http://chrisondotnet.com/2012/08/setting-active-link-twitter-bootstrap-navbar-aspnet-mvc/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-10T20:53:38.013

@Toby Jones 确实建议了一个很好的辅助方法。但是，有些人可能只想通过控制器选择菜单项，而其他人可能希望通过控制器和动作的组合来选择菜单项。Toby 提到的文章中提到的解决方案只处理了第二种情况。

库[TwitterBootstrapMvc](http://www.codeproject.com/Articles/570762/TwitterBootstrapMvc)使用以下语法涵盖了这两种情况：

```
@using (var nav = Html.Bootstrap().Begin(new Nav().SetLinksActiveByControllerAndAction()))
{
    @nav.ActionLink("Link 1", MVC.Account.SomeAction())
    @nav.ActionLink("Link 2", "SomeOtherAction")
} 
```

Mthod`.SetLinksActiveByControllerAndAction()`可以替换`.SetLinksActiveByController()`为适用于第一种情况的方法。

还值得一提的是，DropDowns 上提供了相同的扩展方法：

```
@using (var dd = Html.Bootstrap().Begin(new DropDown("Some Trigger").SetLinksActiveByController()))
{
    @dd.ActionLink("Some link", "action")
} 
```

# javascript - 从文本区域动态显示文本

> ID：12017495
> 
> 赞同：-1
> 
> 时间：2012-08-18T09:35:23.153
> 
> 标签：javascript, html

我正在寻找可以显示其下方文本区域中的文本的内容，而无需单击任何提交按钮。（就像下面的 Stackoverflow 预览）。我有 HTML 代码，但对 JavaScript 很陌生，所以如果有人能帮忙解决这个问题，我将不胜感激。

就像下面的图片

![在此处输入图像描述](../Images/3fef2c71f845e72a93611d1d825f7bd7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:43:45.403

纯Javascript：

```
 <input onkeyup="document.getElementById('demo').innerText='you typed ' + this.value">
 <div id="demo"></div> 
```

您应该将标记和脚本分开并使用处理程序。这也可以使用纯（香草）javascript 来完成，但使用 jQuery 库更容易：[http ://www.jquery.com](http://www.jquery.com)

演示.js

```
jQuery(function($){
  $("#mytext").keyup(function(){
     $("#demo").text("You typed: " + this.value);
  });
}); 
```

演示.html

```
<html>
  <head>   
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script src="demo.js"></script>
  </head>
  <body>
    <input id="mytext"><div id="demo"></div>
  </body>
</html> 
```

# ruby-on-rails - Rails：使用第二代子元素排序元素

> ID：12017501
> 
> 赞同：0
> 
> 时间：2012-08-18T09:36:13.190
> 
> 标签：ruby-on-rails, associations, sql-order-by

使用我上一个问题的解决方案：[Rails: Create a new entry in a model that belongs_to two other models](https://stackoverflow.com/questions/12013648/rails-create-a-new-entry-in-a-model-that-belongs-to-two-other-models/12017293#12017293)，我想显示商店收集的所有意见。

回顾一下，我有一个商店 has_many Products that have_many Opinions（请参阅上一个链接以获取有关模型代码的更多详细信息）

为了获取商店收集的所有意见，我在 OpinionsController 中使用以下代码：

```
# Show a specific store opinions.
def show
    @store = Store.find_by_id params[:store_id]
end 
```

然后，在 show.html.haml 视图中，我使用这段代码来显示意见：

```
%table
    - @store.opinions.each do |opinion|
        %tr
            %td= opinion.id
            %td= opinion.content
            %td= opinion.product.name
            %td= opinion.created_at 
```

**无论父产品是什么，我可以做什么来通过 opinion.created_at 订购意见？**

更一般地，如何使用来自第二代子关联的参数进行排序？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:08:12.483

如果 Opinion 有一个`store_id`.

你就不能这样吗？：

```
# Show a specific store opinions.
def show
  @opinions = Opinion.order(:created_at).find_all_by_store_id params[:store_id]
end 
```

然后在你看来：

```
%table
  - @opinions.each do |opinion|
    %tr
      %td= opinion.id
      %td= opinion.content
      %td= opinion.product.name
      %td= opinion.created_at 
```

或者，仅`@store`在控制器中定义（如您所愿），您可以在视图中执行此操作：

```
%table
  - @store.opinions.scoped.order(:created_at).each do |opinion|
    %tr
      %td= opinion.id
      %td= opinion.content
      %td= opinion.product.name
      %td= opinion.created_at 
```

# compiler-construction - Go 作为我的编译器的后端？

> ID：12017504
> 
> 赞同：6
> 
> 时间：2012-08-18T09:36:34.363
> 
> 标签：compiler-construction, code-generation, go, backend

我想为我自己的编程语言制作一个编译器。流行的后端选择似乎是 C、Java、LLVM、JVM 字节码、.Net 字节码、gcc、程序集......在这里，我正在考虑**将 Go 作为后端的可能性**。

[Go](http://golang.org/doc/go_faq.html)显然是一种快速的语言，具有垃圾收集和快速编译时间。它也是可移植的和免费的（BSD 风格的许可证）。我认为，所有这些都将使 Go 作为代码生成目标成为一个不错的选择，甚至可能比其他选项更好......所以我很惊讶我找不到任何人已经这样做了。

Go 会是代码生成的好选择吗？你能指出现有的项目这样做吗，或者解释为什么没有？或者更好的是，你有使用 Go 语言作为后端的经验吗？有什么我不知道的缺点吗？

（我对 Go 这里特别感兴趣。不要只指出替代后端选项，已经有[问题](https://stackoverflow.com/questions/446883/best-compiler-destination)[回答](https://stackoverflow.com/questions/720714/making-a-language-need-a-good-backend)了。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T11:37:11.467

*   我不知道有任何语言项目使用 Go 作为后端。
*   Go*并非*设计为编译器后端和/或 IR。
*   Go*足够*低级（有点像 C，除了例如 GC），IMO 可以用作某些语言/语言类的后端，其语义与 Go 提供的相似/可比/接近。
*   很想知道更多关于你正在设计的语言;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:26:00.593

有一个名为 GoGo 的[项目](http://gitorious.org/gogo#more)，它被描述为用 Go 编写的编译器和 Go 子集的汇编。基本上就像一个精简版的 Go。我认为您可以从修改它以解析您自己的语言开始。

我还记得 Go 的一个类似脚本语言的子集，它有自己的编译器。我以为它被称为 GoScript，但似乎至少有 3 个不同的项目具有相同的名称，所以我找不到它。

我会说这样做并分享您的经验。不过，Go 将成为您的中间语言，而不是后端。至少这是我认为你想要做的。

干杯!

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T10:01:24.090

如果您将使用 Go 作为您的语言的后端，那么您的语言将与 Go 非常相似。

您将能够实施

*   例行公事
*   去频道
*   GC

你不会有

*   线程

Go 是非常好的语言。我看不出你可以添加什么来制作比 Go 更好的语言。

# actionscript-3 - key 等效于非字母数字键 (AIR/AS3)

> ID：12017505
> 
> 赞同：0
> 
> 时间：2012-08-18T09:36:43.437
> 
> 标签：actionscript-3, air, keyboard-shortcuts

提前致谢，

我想使用 NativeMenuItem.keyEquivalent 为某些菜单项设置键盘快捷键。其中一些使用插入、删除、退格等键

如何为这些字符设置 keyEquivalent？keyEquivalent 是一个字符串，所以我不知道如何设置它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:22:05.303

您不能对 keyEquivalent 使用 Insert、Delete 等，只能使用字母和数字。您仍然可以将字符串“insert”添加到 keyEquivalent 属性中，它会出现在菜单中，只是不会自动响应键盘按下。

您可以做的是使用标准键盘事件侦听器侦听这些按键，并且该侦听器可以通过从菜单项调度 Event.SELECT 事件来调用菜单项，或者您可以直接调用菜单项将调用的任何函数平时都叫。

```
item.keyEquivalent = "insert";
item.addEventListener(Event.SELECT, onItemSelect);
stage.addEventListener(KeyboardEvent.KEY_UP, onKeyUp);
...
// menu item handler
private function onItemSelect(e:Event)
{
    trace("item was selected.");
}

// keyboard handler
private function onKeyUp(e:KeyboardEvent)
{
    if (event.keyCode == Keyboard.INSERT)
        item.dispatchEvent(new Event(Event.SELECT));
} 
```

# c# - 使用 PostBackUrl，获取 PreviousPage.Control()

> ID：12017507
> 
> 赞同：1
> 
> 时间：2012-08-18T09:36:52.273
> 
> 标签：c#, asp.net

我正在使用 PostBackUrl 将我的控件从“firstwebpage.aspx”发布到“secondwebpage.aspx”，以便能够生成一些配置文件。

我知道我可以在我的 secondwebpage.aspx 中使用**PreviousPage.FindControl("myControlId")**方法从“firstwebpage.aspx”中获取我的控制权，从而获取我的数据并且它起作用了。

但是，似乎此方法不适用于我在运行时以编程方式生成的控件，同时将它们填充到我的 firstwebpage.aspx 的表中。

我也尝试使用这个函数**Response.Write("--" + Request["TextBox1"].ToString() + "--");** 尽管此语句确实打印了 TextBox1 上文本字段中的文本，但它只返回了 textbox1 的字符串值。我也无法将其转换为以下格式的文本框控件

**文本框 temptextBox = (TextBox)Request["TextBox1"];**

我的问题是，我如何才能真正访问我在“secondwebpage.aspx”上的“firstwebpage.aspx”中以**编程方式生成的控件？**

请指教！多谢！

//我在aspx中的面板和按钮

```
<asp:Panel ID="Panel2" runat="server"></asp:Panel>

<asp:Button ID="Button1" runat="server" Text="Generate Xml" PostBackUrl="~/WebForm2.aspx" onclick="Button1_Click" /> 
```

//这是我在面板中插入一行的函数

```
 public void createfilerow(string b, string path, bool x86check, bool x86enable, bool x64check, bool x64enable)
        {
            Label blank4 = new Label();
            blank4.ID = "blank4";
            blank4.Text = "";
            Panel2.Controls.Add(blank4);

            CheckBox c = new CheckBox();
            c.Text = b.Replace(path, "");
            c.Checked = true;
            c.ID = "1a";
            Panel2.Controls.Add(c);

            CheckBox d = new CheckBox();
            d.Checked = x86check;
            d.Enabled = x86enable;
            d.ID = "1b";
            Panel2.Controls.Add(d);

            CheckBox e = new CheckBox();            
            e.Checked = x64check;
            e.Enabled = x64enable;
            e.ID = "1c";
            Panel2.Controls.Add(e);
    }

//my virtual path in WebForm2.aspx

<%@ PreviousPageType VirtualPath="~/WebForm1.aspx"  %> 
```

//我的页面加载处理程序

```
protected void Page_Load(object sender, EventArgs e)
{  
    if (PreviousPage != null)
    {
        CheckBox tempCheckbox = (CheckBox)Page.PreviousPage.FindControl("1a");
        Button1.Text = tempCheckbox.Text;
    }         
} 
```

//处理程序，它将在单击时填充面板

```
protected void Button7_Click(object sender, EventArgs e)
        {
            //get foldername 

            if (!Directory.Exists(@"myfilepath" + TextBox2.Text))
            {
                //folder does not exist
                //do required actions
                return;
            }
            string[] x86files = null;
            string[] x64files = null;
            string[] x86filespath = null;
            string[] x64filespath = null;
            ArrayList common = new ArrayList();
            if (Directory.Exists(@"myfilepath" + TextBox2.Text + "\\x86"))
                x86files = Directory.GetFileSystemEntries("myfilepath" + TextBox2.Text + "\\x86");
            if (Directory.Exists(@"myfilepath" + TextBox2.Text + "\\x64"))
                x64files = Directory.GetFileSystemEntries("myfilepath" + TextBox2.Text + "\\x64");

            //some codes to convert x64files and x86files to string[]

            //The header for Panel, 4 column
            Label FL = new Label();
            FL.ID = "flavourid";
            FL.Text = "Flavour";
            Panel2.Controls.Add(FL);

            Label filetext = new Label();
            filetext.ID = "filenamelabel";
            filetext.Text = "File(s)";
            Panel2.Controls.Add(filetext);

            Label label86 = new Label();
            label86.ID = "label86";
            label86.Text = "x86";
            Panel2.Controls.Add(label86);

            Label label64 = new Label();
            label64.ID = "label64";
            label64.Text = "x64";
            Panel2.Controls.Add(label64);

            //a for loop determine number of times codes have to be run
            for (int a = 0; a < num; a++)
            {
                ArrayList location = new ArrayList();
                if (//this iteration had to be run)
                {
                    string path = null;
                    switch (//id of this iteration)
                    {
                     case id:
                     path = some network address
                    }

                    //check the current version of iternation
                    string version = //version type;
                    //get the platform of the version
                    string platform = //platform

                    if (curent version = certain type)
                    {   
                        //do what is required.
                        //build a list
                    }
                    else
                    {
                        //normal routine
                        //do what is required
                        //build a list
                    }

                    //populating the panel with data from list

                        createflavourheader(a);
                        //create dynamic checkboxes according to the list

                     foreach(string s in list)
                     //createrow parameter is by version type and platform
                             createfilerow(readin, path, true, true, false, false);

                    }
                }
            }
            form1.Controls.Add(Panel2);
        } 
```

抱歉不能给你看完整的代码，因为它很长，我相信它应该是保密的，即使我把它们都写了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:57:28.910

是的，您可以访问，下面是一个示例

```
 // On Page1.aspx I have a button for postback
  <asp:Button ID="btnSubmit" runat="server" Text="Submit" 
     PostBackUrl="~/Page2.aspx" />

 // Page1.aspx.cs 
 protected void Page_Load(object sender, EventArgs e)
 {
    TextBox t = new TextBox(); // created a TextBox
    t.ID = "myTextBox";        // assigned an ID
    form1.Controls.Add(t);     // Add to form

} 
```

现在在第二页上，我将 TextBox 的值设为

```
 // Page2.aspx.cs
 protected void Page_Load(object sender, EventArgs e)
 {       
    if (PreviousPage != null)
    {
        TextBox t = (TextBox) PreviousPage.FindControl("myTextBox");
        string mytboxvalue = t.Text;
    }
                        // OR
    string myTextBoxValue = Request.Form["myTextBox"];
 } 
```

**更新答案：**

```
 Panel myPanel = new Panel();
    myPanel.ID = "myPanel";

    TextBox t = new TextBox();
    t.ID = "myTextBox";
    myPanel.Controls.Add(t);

    TextBox t1 = new TextBox();
    t1.ID = "myTextBox1";
    myPanel.Controls.Add(t1);

    // Add all your child controls to your panel and at the end add your panel to your form
    form1.Controls.Add(myPanel);

   // on the processing page you can get the values as
  protected void Page_Load(object sender, EventArgs e)
  {

    if (PreviousPage != null)
    {
        TextBox t = (TextBox) PreviousPage.FindControl("myTextBox");
        string mytboxvalue = t.Text;
    }

    string myTextBoxValue = Request.Form["myTextBox1"];
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:50:40.360

> 我也尝试使用这个函数 Response.Write("--" + Request["TextBox1"].ToString() + "--"); 尽管此语句确实打印了 TextBox1 上文本字段中的文本，但它只返回了 textbox1 的字符串值。我也无法将其转换为以下格式的文本框控件 TextBox temptextBox = (TextBox)Request["TextBox1"];

嗨 lw，我认为您可以尝试将控件类型（例如“tb”）与内容一起传递并创建一个新对象（例如 TextBox）并将其分配给 templtexBox 对象。

我的 20 美分。安迪

# css - 两个文本重叠并水平对齐

> ID：12017510
> 
> 赞同：0
> 
> 时间：2012-08-18T09:37:10.637
> 
> 标签：css

我想在css中叠加两个文本。

我写了这个：

HTML：

```
<div id="container" >
    <span id="w1" >One text</span>
    <span id="w2" >And another superimposed to the first</span>
</div> 
```

CSS：

```
#container
{
    position:relative;
}
#w1,#w2
{
    position:absolute;
    top:0px;
    left:0px;    
} 
```

[JSFiddle](http://jsfiddle.net/uDkQE/5/)

但我想让这两个文本水平居中。（像[那样，](http://jsfiddle.net/uDkQE/11/)但叠加）。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T12:24:31.633

希望这是您想要的：[JSFiddle](http://jsfiddle.net/uDkQE/26/)

首先，通过设置使其居中`left: 50%;`。然后，设置一个宽度，例如`width: 400px;` 跨度现在有一个偏移量，让我们修复它`margin-left: -200px;`（使用一半宽度）然后，最后，在跨度内居中文本：`text-align: center;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:11:14.493

尝试添加这个：

```
#w1 { 
padding-left: 100px;
} 
```

# java - Java 和 Eclipse - 将 `extends` 和 `super` 替换为 `returns` 和 `accepts`

> ID：12017513
> 
> 赞同：-2
> 
> 时间：2012-08-18T09:38:05.787
> 
> 标签：java, regex, eclipse, syntax-highlighting, wildcard

如果我错了，请纠正我，但我最近注意到 Java 中的通配符...

`? super T`几乎意味着`? accepts T`

和...

`? extends T`一般是指`? returns T`。

假设我有一个`List<? extends Cat>`. 除了想摆脱它之外，我有没有理由宣布这`Cat`一点？或者怎么样`LitterBox<? super Cat>`？除非我想将 a `Cat`（或传递 a 的东西`Cat`）传递给它，否则我会宣布这样的事情吗？

所以假设这个理由成立......

有什么方法可以让 Eclipse 同时进行语法高亮和自动替换`accepts`以及`returns`with `super`and`extends`吗？

此外，除了“我必须在让其他人查看之前我必须对我的代码进行正则表达式”之外，还有什么理由认为这可能不是一个好主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T09:49:59.663

> 那么有什么方法可以让 Eclipse 同时使用语法高亮和自动替换接受并使用 super 和 extends 返回？

我想您可以修改（即破解）Eclipse JDT 编辑器来执行此操作，但这并不简单。

> 此外，除了“我必须在让其他人查看之前我必须对我的代码进行正则表达式”之外，还有什么理由认为这可能不是一个好主意吗？

这还不够吗？

关于什么：

*   “我必须先正则表达式我的代码，然后标准 Java 工具链才能理解它”，或者

*   “它不再是Java了”？

> 或者就此而言，甲骨文没有将其作为语言特性的任何原因？

因为对 Oracle 或绝大多数 Java 开发人员来说，对语言语法进行无偿的装饰性更改没有任何价值。

* * *

看，如果你想发明自己的编程语言，请随意。但建议对 Java 语言进行破坏性更改……坦率地说……毫无意义。

* * *

> 我不是在要求“破坏性改变”，我是在问他们为什么一开始不使用类似的语法

你问错人了。问问他们”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T11:08:57.533

当然，Oracle 没有将其作为语言特性的原因有**很多，例如：**

1.  两个新的保留关键字；
2.  `super`并且`extends`几乎准确地捕捉到了意思；
3.  `accepts`在那些位置上甚至`returns`没有任何意义；为了帮助您的一般理解，**想象**它们可能是有用的。一个类型`T extends List`既不接受也不返回任何东西。

# php - 做这个的最好方式是什么？

> ID：12017514
> 
> 赞同：1
> 
> 时间：2012-08-18T09:38:15.880
> 
> 标签：php, conditional, conditional-statements, if-statement

我不想一遍又一遍地重复同样的陈述。做这个的最好方式是什么？

```
<?php
if ($a = '3'){
  statement 1;
  statement 2;
  statement 3;
}else if ($a = '2'){
  statement 1;
  statement 2;
}else if ($a = '1'){
  statement 1;
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:39:39.847

为避免重复，您可以编写以下代码：

```
<?php
 ($a == '3' or $a == '2' or $a == '1') and statement 1;
 ($a == '3' or $a == '2' ) and statement 2;
 ($a == '3' ) and statement 3;    
?> 
```

或者，这是相同的：

```
<?php
 if ($a == '3' or $a == '2' or $a == '1') { statement 1 ; }
 if ($a == '3' or $a == '2' ) {  statement 2; }
 if ($a == '3' ) {  statement 3; }   
?> 
```

另外，看看[Switch 语句](http://php.net/manual/en/control-structures.switch.php)

引用php文档：

> 以下两个示例是编写同一事物的两种不同方式，一种使用一系列 if 和 elseif 语句，另一种使用 switch 语句：

```
<?php
if ($i == 0) {
    echo "i equals 0";
} elseif ($i == 1) {
    echo "i equals 1";
} elseif ($i == 2) {
    echo "i equals 2";
}

switch ($i) {
    case 0:
        echo "i equals 0";
        break;
    case 1:
        echo "i equals 1";
        break;
    case 2:
        echo "i equals 2";
        break;
}
?> 
```

对于您的代码：

```
<?php
switch ($a) {
        case '3':
          statement 1;
          statement 2;
          statement 3;
          break;
        case '2':
          statement 1;
          statement 2;
          break;
        case '3':
          statement 1;
          break;
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T09:43:56.423

```
<?php

for ($i = 1; $i <= $a; $i++) {
 echo $statement . $i;
} 
```

正如 danihp 提到的，您可以使用 switch。这是另一种没有休息的方式。这种方法的缺点是您需要为`$a`.

```
<?php
switch ($a) {
        case '3':
          statement 3;
        case '2':
          statement 2;
        case '1':
          statement 1;
          break;
        default:
          break;
} 
```

# android - 如何在单击按钮时在活动上添加多个自定义视图？

> ID：12017516
> 
> 赞同：0
> 
> 时间：2012-08-18T09:38:24.600
> 
> 标签：android, onclicklistener, android-framelayout

我正在制作一个从图库加载图像的应用程序，现在用户可以通过单击按钮在图像上添加可调整大小和可拖动的矩形。现在我可以添加图像，并通过单击按钮在图像上添加所需的矩形。但是我想要的是，如果再次单击该按钮，则会添加一个新矩形，并且将先前的矩形恢复原样。我的代码如下..

```
public class ImageActivity extends Activity {

FrameLayout fm;   //framelayout to add views on the image

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_image);

    Bundle bundle = getIntent().getExtras();                      //5 lines
    final String value = bundle.getString("key");                 //of code
    Bitmap bmp = BitmapFactory.decodeFile(value);                 //to add
    ImageView imageView = (ImageView) findViewById(R.id.imgView); //the image
imageView.setImageBitmap(bmp);                                //from gallery

    Button bd = (Button)findViewById(R.id.buttonDraw); //button to add rectangle
fm = (FrameLayout)findViewById(R.id.main_view);    //framelayout object

        bd.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) { 
                DrawPanel dview=new DrawPanel(ImageActivity.this); 
                fm.addView(dview); 

            }});

} 
```

}

每次单击按钮时，我都会为矩形创建一个新的 mycustom 视图对象。这里的问题是，当第一次单击按钮时，会使用其每个功能绘制矩形。但是当我再次单击按钮时，前一个按钮消失并且没有绘制新的矩形。控制台或日志猫中没有消息。我究竟做错了什么...

# php - simplexml_load_string 解析器错误：AttValue:" 或 ' 预期

> ID：12017520
> 
> 赞同：1
> 
> 时间：2012-08-18T09:38:58.437
> 
> 标签：php, xml, simplexml

解析谷歌天气时出现以下错误。任何人都知道这个问题的解决方案到处都是，但没有快乐

```
Entity: line 2: parser error : AttValue: " or ' expected

    $lang ='English';
    $place=urlencode($weather);
    $place = utf8_encode($place);
    $url = 'http://www.google.com/ig/api?weather='.$place.',$&hl='.$lang.'';        

    $ch = curl_init();       
    //Set CURL options
    curl_setopt ($ch, CURLOPT_URL, $url);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 0);
    $raw_data = curl_exec($ch);
    //close CURL cause we dont need it anymore
    curl_close($ch);         

    $xml = simplexml_load_string($raw_data); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:44:56.153

[众所周知](https://stackoverflow.com/questions/11851659/google-weather-api-http-403-error) ，谷歌天气 API会[不时](https://stackoverflow.com/questions/11878143/google-weather-api-403-error)抛出 403 错误。发生这种情况时，将使用 HTTP 403 响应和 HTML 错误文档来响应请求。由于错误文档不是有效的 XML，因此您无法使用`simplexml_load_string`.

您应该使用[另一个天气 API](http://blog.programmableweb.com/2009/04/15/5-weather-apis-from-weatherbug-to-weather-channel/)。

# html - 问题以垂直对齐 3 个 div 的内容

> ID：12017524
> 
> 赞同：0
> 
> 时间：2012-08-18T09:39:27.907
> 
> 标签：html, css

我想垂直对齐 3 个 div（类型、desc、lang）的内容。我尝试了垂直对齐：中间但没有成功。如果您查看此链接[http://jsfiddle.net/Grek/Twru8/](http://jsfiddle.net/Grek/Twru8/)，您会注意到图片似乎与 div 的顶部对齐。问题是什么？谢谢

CSS

```
.medias-table-content-type, .medias-table-content-desc, .medias-table-content-lang {
    padding:10px 15px 10px 15px;
    background: #fff;
    text-align:center;
    vertical-align: middle;
    color: #000;
    width: 50px;
    float: left;
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:51:32.227

`vertical-align`（注意：区分大小写）仅适用于以下元素：

```
COL, CUSTOM, IMG, SPAN, TBODY, TD, TFOOT, TH, THEAD, TR 
```

因此`vertical-align`样式不适用，`DIV`除非您通过添加其 CSS将其显示更改为`table-cell`（即：`TD`元素） 。style 也不能使用，因为它会强制元素显示为.`display:table-cell;``float``inline-block`

所以相关的CSS应该是这样的：

```
.medias-table-content-type, .medias-table-content-desc, .medias-table-content-lang {
    padding:10px 15px 10px 15px;
    background: #fff;
    text-align:center;
    vertical-align: middle;
    color: #000;
    width: 50px;
    /*deleted
    float: left;
    */
    position: relative;
    /*added*/
    display:table-cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:53:56.913

如果您想将内容集中在框中。给一个`line-height`与盒子高度相同的值。所以在你的例子中，盒子是60px，那么`line-height`盒子也是60px。但是您需要删除图像的所有其他填充和边距。

# java - 如何在 Java VisualVM 中查看内存分配堆栈跟踪

> ID：12017529
> 
> 赞同：16
> 
> 时间：2012-08-18T09:39:56.323
> 
> 标签：java, memory-leaks, visualvm

本文介绍如何在 Java VisualVM 中查看内存分配堆栈跟踪：[http ://rejeev.blogspot.de/2009/04/analyzing-memory-leak-in-java.html](http://rejeev.blogspot.de/2009/04/analyzing-memory-leak-in-java.html)

简而言之，在 Java VisualVM 选项中定义一个自定义预设并选中内存设置选项卡中的**“记录分配堆栈跟踪”复选框**。

现在，当我选择该自定义预设并开始内存分析时，我仍然无法查看内存分配堆栈跟踪。没有文章中描述的右键单击项目操作**“获取快照并显示分配堆栈跟踪”**，也没有类似的操作。我正在使用 VisualVM 1.7。

如何查看这些分配堆栈跟踪？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-09-09T07:09:04.103

如果您看不到此选项，请转到 Profiler -> 激活“设置”复选框并在分析器未激活时激活“记录分配堆栈跟踪”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T10:00:57.510

**在Sampler**选项卡中启用**内存**分析，然后按**Heap Dump**按钮。

# haskell - 为什么 (=<<) id = 加入 Haskell？

> ID：12017530
> 
> 赞同：3
> 
> 时间：2012-08-18T09:40:25.020
> 
> 标签：haskell

```
(=<<) :: (a -> m b) -> m a -> m b
id :: a -> a
join :: m (m a) -> m a 
```

所以不应该，

```
(=<<) id 
```

给出一个错误，因为，

```
id :: a -> a 
```

并不是，

```
id :: a -> m a 
```

不 (=<<) 期望，

```
(something -> m anything) 
```

作为它的第一个论点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T09:56:03.373

`m a' -> m a'`也是一种`a -> a`，所以我们可以有

```
 id ::  m a' -> m a'                        -- a = m a'
   (=<<) :: (m a' -> m a') -> m (m a') -> m a'   -- a = m a', b = a'

(=<<) id ::                   m (m a') -> m a' 
```

# .net - 当引用存储在基类变量中时，CLR 如何正确调用派生类隐藏的方法？

> ID：12017538
> 
> 赞同：4
> 
> 时间：2012-08-18T09:41:56.660
> 
> 标签：.net, clr

我试图了解当对象引用存储在基类变量中时对象隐藏基类成员时，CLR 如何正确调度方法调用。

我的困惑点是运行时创建的对象头。堆上的对象头有两个字段：类型指针和同步块索引。类型指针指向类的方法表。即使对象引用是基类的，在堆上创建的对象也是派生类的。这应该导致运行时使用派生类对象的方法表。但是运行时正确地调用了基类成员。

您能否帮助我理解流程，因为 CLR 在这种情况下如何正确调用方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T10:06:34.523

对象标头中记录的对象类型在这里无关紧要。编译器发出方法调用，命名应调用其方法的特定类。在生成的 IL 中非常明显。例如：

```
class Base {
    void foo() { }
    void callFoo() {
        foo();         // <== here
    }
}
class Derived : Base {
    new void foo() { }
} 
```

指示的语句生成此 IL：

```
IL_0002:  call       instance void ConsoleApplication1.Base::foo() 
```

注意调用操作码中 Base 的存在，没有歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T10:09:35.593

调用非虚拟或以任何方式覆盖的方法与方法表无关。C# 编译器按名称调用该方法（程序集确实包含作为字符串的名称！）并且 JIT 将函数的地址硬编码到发出的 x86 代码中。地址不依赖于`this`对象引用的运行时类型。

# jquery - 在页面其余部分之前加载徽标，然后移动到静止位置并显示其余内容

> ID：12017539
> 
> 赞同：0
> 
> 时间：2012-08-18T09:42:13.073
> 
> 标签：jquery, css, html, jquery-animate, move

我正在寻找一种在 div 中使用徽标启动网站的方法，该网站以页面为中心，其余内容隐藏。然后，我希望徽标移动到位于页面中心的容器 div 左上角的最终静止位置。我使用 jQuery 来做到这一点，但还没有真正找到方法。这是我得到的，这真的不是我想要的：

```
<style type="text/css">
div#container {
margin: 0px auto;
width: 1024px;
border: 1px solid green;
}

div#logo {
padding: 10px;
border: 1px solid red;
height: 100px;
width: 500px;
z-index: 9999;
background: red;
}

section#main-content {
border: 1px solid blue;
width: 1024px;
z-index: 1;
}

.centered{
    display:block;

    /*set the div in the center of the screen*/
    position:absolute;
    top:50%;
    left:35%;
}
</style>

<script type="text/javascript">
$(document).ready(function() {
    $('#logo').hide();
    $('#main-content').hide();  
    $('#logo').addClass('centered').fadeIn('slow'); 
    $("#logo").animate({"top":"-=370px", "left":"-=270px"},1500) .delay(5000) .animate({"opacity":"100"},5000);
    $('#main-content').fadeIn();
    $('#logo').removeClass('centered'); 

});
</script>
</head>

<body>

<div id="container">
<header>
    <div id="logo">HEY</div>
</header>
<section id="main-content">
    <article>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam eget mi vitae nulla aliquam iaculis ut eget turpis. Aliquam gravida nisi ut felis convallis a consequat urna consequat. Nam sit amet dolor leo, eget rhoncus nisi. Ut et metus lacus, sit amet pretium enim. Etiam ac odio ut augue dapibus facilisis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aliquam mattis, sapien euismod convallis vulputate, diam tellus semper erat, vitae hendrerit quam sem sed odio. Quisque eget lectus ligula, sit amet lobortis augue.
            </p>
            <p>
            Cras ut est eget mi interdum fringilla eget vehicula elit. Integer convallis mattis odio, facilisis volutpat velit commodo viverra. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque feugiat libero ac augue porta sodales. Mauris pulvinar augue at ante molestie ac malesuada ipsum lobortis. Mauris risus erat, cursus in interdum a, facilisis vitae felis. Curabitur augue velit, luctus posuere molestie ut, vehicula vel dui. Quisque et convallis elit. Proin bibendum varius molestie.
            </p>
            <p>
            Vivamus egestas rutrum lectus ut lacinia. Etiam magna metus, tristique ac bibendum vitae, semper tempor velit. Praesent dictum lacinia aliquam. Proin cursus, mauris eu bibendum sagittis, sem mauris faucibus orci, a elementum ipsum lectus sed mi. Donec vitae pharetra eros. Morbi vulputate, metus fermentum vestibulum varius, eros mauris facilisis sem, a elementum risus dui ac mi. Ut gravida tristique sodales. Nullam consequat euismod tellus tincidunt dictum. Duis vitae neque metus. Donec sodales diam eu massa ultricies in convallis nisl tempor. Morbi eu hendrerit nulla. Mauris dignissim, magna vitae volutpat sollicitudin, orci felis ornare turpis, quis ullamcorper risus sem vitae lectus. Donec fermentum elementum eros, vel sollicitudin est tempor in.
            </p>
            <p>
            Donec ornare tellus lectus. Integer ornare justo in augue sodales sit amet tempus mi varius. Morbi fringilla urna quis quam auctor id lacinia erat lobortis. Praesent ullamcorper nulla eget lectus hendrerit nec fermentum lectus viverra. Etiam quis velit velit. Phasellus ultrices leo ut sem commodo sed semper sem laoreet. Vivamus euismod imperdiet nibh eu convallis. Maecenas facilisis pellentesque mauris, a ornare nulla sagittis at. Donec turpis ipsum, scelerisque vitae pharetra ac, commodo vel metus. Morbi sollicitudin, mauris non rhoncus ultricies, mi orci euismod velit, quis sagittis turpis magna ac nulla. Curabitur commodo accumsan molestie.
            </p>
    </article>
</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:45:36.237

```
$(document).ready(function() {

    $('#logo').hide();
    $('#main-content').hide();  
    $('#logo').addClass('centered').fadeIn('slow'); 
    $("#logo").animate({"top":"-=370px", "left":"-=270px"},1500).delay(5000);

    setTimeout(function(){
       $('#logo').removeClass('centered');
    }, 2000);
    setTimeout(function(){
       $('#main-content').show();
    }, 3000);
}); 
```

# javascript - dojo.form.datetextbox 更改默认年份

> ID：12017542
> 
> 赞同：0
> 
> 时间：2012-08-18T09:42:28.887
> 
> 标签：javascript, dojo, dijit.form

我正在使用 dojo.form.datetextbox 生成日历，在其中我使用约束让用户只选择选定的年份，它工作正常，但我只想显示那些有效的年份，即在选定年份之间，但日历是告诉我从现在开始的年份.. 我正在使用以下代码.. 约束

```
function setmax(){
            var w = dijit.byId('dob');
            w.constraints.datePattern='dd-MM-yyyy';
            w.constraints.max= new Date(1947,08,15);
            w.constraints.min= new Date(1987,1,1);

            w.set('value', w.get('value')); // reformat display to short year
        }
        dojo.ready(setmax); 
```

请帮助我展示 1987 年以来的年份..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:18:54.247

怎么样：

```
 function setmax(){
        var w = dijit.byId('dob');
        w.constraints.datePattern='dd-MM-yyyy';
        w.constraints.max= new Date(1987,1,1);
        w.constraints.min= new Date(1947,08,15);

        w.set('value', new Date(1987,1,1)); // reformat display to short year
    }
    dojo.ready(setmax); 
```

也没有对此感到担忧，但是您的最小和最大约束不是倒置了吗？

# asp.net-mvc-3 - 如何编写查询以从实体数据模型中获取数据？

> ID：12017543
> 
> 赞同：0
> 
> 时间：2012-08-18T09:42:35.933
> 
> 标签：asp.net-mvc-3, entity-framework

我想从我的一个模型中获取数据。我正在使用实体数据模型，其中我的实体模型中有一些表。我想从 EmployeeTable 中选择数据。

```
EmployeeTable
----------------
[EmpId]|[Empname]|[EmpAddress] 
```

我想从表中选择`[EmpID]`和`[Empname]`列。我不知道如何在实体框架中执行此操作，我必须将数据作为 JSON 返回。

我试过这种方法，但我没有得到数据。

如何编写 linq 查询？

```
 public ActionResult Index()
    {
        return View();
    }

    public JsonResult GetData()
    {
        int Param1;
        Param1 = 1;
        DataEntitiesModel data = new DataEntitiesModel();
        //var procedure=db.Database.SqlQuery<DataEntitiesModel>("ResourceReports @EmployeeID",new SqlParameter("@EmployeeID", Param1) );
        //var procedure = db.Database.SqlQuery<DataEntitiesModel>("Select * from EmployeeDetails");      

        return Json(procedure,JsonRequestBehavior.AllowGet);
    } 
```

这是模型：

```
 public class DataEntitiesModel
       {      
         public Int16 EmpID{ get; set; }
         [Required(ErrorMessage = "Title is required")]
         public string EmpName{ get; set; }
         [Required(ErrorMessage = "Description is required")]
         public string Description { get; set; }
         [Required(ErrorMessage = "Version is required")]
         public string EmpAddress{ get; set; }       
       }

     public class DataEntitiesDBContext : DbContext
    {
        public DbSet<DataEntitiesModel> ProjectReports { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:46:31.000

这是一个来自 Pluralsight 的[精彩视频](http://www.pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-data-i&mode=live&clip=0&course=aspdotnet-mvc3-intro)，可帮助您开始使用实体框架。您从数据库生成数据上下文，然后查询此上下文：

```
public ActionResult GetData()
{
    using (var db = new DataEntitiesDBContext())
    {
        var result = db.ProjectReports.ToList().Select(e => new {
            Id = e.EmpID,
            Name = e.EmpName
        });
        return Json(result, JsonRequestBehavior.AllowGet);
    }
} 
```

# java - 使用正则表达式作为 StringTokenizer 的分隔符

> ID：12017544
> 
> 赞同：0
> 
> 时间：2012-08-18T09:42:41.497
> 
> 标签：java, regex, delimiter, stringtokenizer

我是 java 编程新手，遇到了 StringTokenizer 类。构造函数接受要拆分的字符串和另一个可选的分隔符字符串，其中的每个字符在拆分原始字符串时都被视为单独的分隔符。我想知道是否有任何方法可以拆分通过正则表达式作为分隔符的字符串。例如：

```
String s="34.5xy32.6y45.7x36xy"
StringTokenizer t=new StringTokenizer(s,"xy");
System.out.println(t.nextToken());
System.out.println(t.nextToken()); 
```

实际输出为：

```
34.5
32.6 
```

但是，所需的输出是：

```
34.5
32.6y45.7x36 
```

希望大家能帮忙。另外，如果 StringTokenizer 类不可能，请提出一些建议。

提前致谢。

ps 有没有办法知道 StringTokenizer 当前在提供的集合中使用哪个字符作为分隔符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:44:45.637

在这里您想使用`String.split()`，这将为您提供一个具有所需输出的数组。

它将接受您的输入并将其拆分为与您提供的字符串完全匹配的内容。StringTokenizer 将围绕您提供的任何集合而不是正则表达式进行拆分。

因此，您将代码更改为：

```
String s="34.5xy32.6y45.7x36xy";
String[] splitString = s.split("xy");
System.out.println(splitString [0]);
System.out.println(splitString [1]); 
```

对于更复杂的示例，您可能还需要对数组进行边界检查，以免超出数组的末尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:55:27.793

试试这个。

```
String s="34.5xy32.6y45.7x36xy";
final String SPLIT_STR = "xy";
final String mainStr = "34.5xy32.6y45.7x36xy";
final String[] splitStr = mainStr.split(SPLIT_STR);
System.out.println("First Index Of xy : " +
mainStr.indexOf(SPLIT_STR));
for(int index=0; index < splitStr.length; index++) {
System.out.println("Split : " + splitStr[index]);
} 
```

# java - 在Java中递归生成随机对象

> ID：12017545
> 
> 赞同：3
> 
> 时间：2012-08-18T09:43:12.793
> 
> 标签：java, random, dynamically-generated, solver

我可以使用什么库/方法为 Java / Scala 中的给定类深度生成随机对象？通过深度生成，我的意思是用随机值递归地填充整个对象图，包括原始类型和复杂类型。

目标是使用随机生成的模拟对象进行测试。

为了使测试保持一致和可重复，每次运行时生成的对象集都应该相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:34:30.803

据我所知，有两种强大的方法可以随机生成非常大的任意类型的对象。第一种称为**递归方法**（由 Wilf 和 Nijenhuis 引入，由 Flajolet、van Cutsem 和 Zimmerman[形式化](http://algo.inria.fr/flajolet/Publications/RR-1830.pdf)），第二种称为**[玻尔兹曼采样](http://algo.inria.fr/flajolet/Publications/DuFlLoSc02.pdf)**，由 Duchon、Flajolet、Louchard 和 Schaeffer 提出。

在这两种方法中，您都给出了一个结构定义（“语法”），并返回一个符合语法的大型随机对象。

两者都非常成功地用于程序的大规模测试（类似于 Haskell 的[QuickCheck](http://www.haskell.org/haskellwiki/Introduction_to_QuickCheck)）。不幸的是，虽然这些方法有一些不同的实现，但我认为没有现成的 Java 库。例如可以做什么，您可能想查看[Yann Ponty 的页面](http://www.lix.polytechnique.fr/~ponty/index.php?lang=en&page=software&css=bioinfo)，其中包含这些生物信息学方法的 Java 实现。如果您使用的是 OCaml，那么 Alexis Darrasse 和 Benjamin Canou 已经实现[了一个有用的 Boltzmann 采样子集，](http://genal.algo-prog.info/?p=genadt)作为代数类型（sumtypes）的完全自治库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T23:13:31.780

InPUT库可以帮助您在 Java 中执行此操作[。](https://github.com/feldob/InPUT)您在定义有效范围的所谓设计空间中指定 XML 中的结构。在代码中，您只需调用

```
IDesignSpace ds = new DesignSpace("designSpace.xml");
TheType o = ds.next("TheTypeId"); 
```

对象 o 现在根据您接受的 XML 中的有效值范围随机实例化。[在这里](https://github.com/feldob/InPUT/wiki/Tutorials)您可以找到教程和示例。[本教程](https://github.com/feldob/InPUT/wiki/Random-Value)中讨论了可重复性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T07:15:15.897

一些研究表明，Scala 有一个很棒的框架，叫做[ScalaCheck](http://code.google.com/p/scalacheck/)，它的灵感来自上面[Jérémie](https://stackoverflow.com/users/408734/jeremie)提到的 QuickCheck。虽然它是为 Scala 构建的，但它也可以在 Java 中使用（尽管没有语法糖）

# android - Android - 获得 GPS 信号需要很长时间。如何实现一个好的 GPS 提供者？

> ID：12017546
> 
> 赞同：5
> 
> 时间：2012-08-18T09:43:21.143
> 
> 标签：android, gps, location-provider

我写了一个应用程序，可以在慢跑时跟踪 gps 位置。不幸的是，该应用程序需要一些时间才能获得 GPS 信号。当我打开谷歌地图等其他应用程序时，他们会立即获得位置。

我的问题是：如何实现 gps-provider，以便应用程序尽快获得信号。

一个想法是，使用应用程序启动服务，以便提供商做一些初步工作。但是跟踪活动不是主要活动。如何将服务绑定到尚未启动服务的活动中？这是一个好主意吗？

感谢阅读 - 我希望我的英语是可以理解的，

马提尼

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T11:07:59.173

正如我在评论中提到的，GPS 启动不是一个即时过程。接收器基本上必须知道星座中每个 GPS 卫星的位置，才能计算出它的位置。星*历数据*描述了接收到的卫星位置，并在打开 GPS 时从卫星上下载（我差点忘了提到*历书数据*，这也是下载的一部分，描述了卫星的轨道） . 从多颗卫星下载和使用最后一个已知位置可以帮助加快这个初始过程，但你不能让它“即时”。

还有其他策略可用于帮助加快定位过程，尤其是在手机中。除了最后已知的位置外，当 GPS 仍在获取过程中时，可以使用蜂窝塔 + 定时定位 (ECID) 或 Wi-Fi 定位等代替 GPS。

这个[链接](http://developer.android.com/guide/topics/location/strategies.html)描述了一些关于如何在android中处理定位手机的想法，但它的短处是：

*   检查最后一个已知位置（如果它太旧则丢弃）
*   检查 E-CID 位置（这非常快，但位置非常粗略）
*   检查 Wi-Fi 位置（这*可能*非常准确，但需要打开 WiFi，有时会出现大量错误）
*   最终获得GPS位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T09:45:09.320

您是否首先检查是否有可以使用的最后一个已知位置？大多数应用程序首先检查它，然后搜索一个位置。

# high-availability - 根据 haproxy 中的传入流量进行负载平衡

> ID：12017547
> 
> 赞同：0
> 
> 时间：2012-08-18T09:43:23.290
> 
> 标签：high-availability, haproxy

我正在完美地使用带有循环的 haproxy，但现在我面临一个问题：我的一个后端服务器已加载。

1.  我想知道我是否可以根据后端服务器上的负载平衡流量。另外，如果一个失败并限制为最大值。conn 流量转到其他后端服务器
2.  最小连接、循环和全局最大连接、默认最大连接和服务器最大连接之间的区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:18:57.300

如果一个服务器比其他服务器负载更多，那么机械上它会看到更多的并发连接相同的请求率。这就是切换到最小连接算法变得有用的地方，这将确保所有服务器始终以相同数量的并发连接运行。例如，如果您的某些请求比其他请求长得多（例如：数据库中的复杂请求），这很有用。

对于第二点，我会很简短，因为所有内容都在文档中，但 leastconn 关注并发连接数，而 round robin 关注累积连接数。使用轮询，每个服务器依次收到一个请求，因此同一服务器上的请求间隔最佳。这对于静态服务器或具有粘性的应用程序通常更好，因为一旦连接到服务器，用户就会发出大量请求，因为这可以确保您在同一台服务器上拥有相同数量的用户。全局 maxconn 是单个 haproxy 进程将支持的并发连接总数。当达到限制时，它将停止接受传入的连接。默认的 maxconn 仅适用于前端，当达到前端的 maxconn 时，该前端只会停止接受新连接。服务器 maxconn 确保 haproxy 永远不会向服务器发送太多连接。当达到限制时，尽可能选择其他服务器（无 cookie 等），或者请求排队，直到服务器释放连接以选择它。如果您的服务器过载，您应该检查连接数并应用略低于此值的服务器 maxconn 以保护它们。

# jquery-mobile - 如何使用 jqm listviews 制作保留表单内容的持久标头

> ID：12017553
> 
> 赞同：0
> 
> 时间：2012-08-18T09:44:00.747
> 
> 标签：jquery-mobile

我想创建一个包含跨子列表持续存在的输入字段的标题，保留用户迄今为止输入的内容。

如果我只使用标准列表视图，标题会在子列表上滚动。

我已经尝试了很多事情，包括分离标题并将其重新附加到 pagebeforeshow 提供的事件，除了我无法让标题下方的内容重新格式化之外，这种方法很有效：

 `````
$('div.ui-page').live('pagebeforeshow', function(event, ui) {

    // Remove any header that's already there, as there will be for a sublist view
    $(event.currentTarget).find(".ui-header").not("#myheader").remove();

    // Add my header
    var header = $('#myheader');
    header.detach();
    header.prependTo(event.currentTarget);
} 
````  `有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:46:36.193

嗯..从标题中删除 data-position="fixed" 似乎可以解决问题。现在东西空间正确..``

# javascript - 日期选择器的最小和最大日期

> ID：12017559
> 
> 赞同：-3
> 
> 时间：2012-08-18T09:44:36.123
> 
> 标签：javascript, jquery

我正在使用 jQuery 制作日期选择器，但我面临以下问题：-

1.  我想在日历的下拉菜单中显示 1970 年的最小日期，但我无法做到。
2.  我还想在同一个下拉列表中显示（当前年份 - 20）的最大年份。

这些事情怎么办？

另外，我想使用 jQuery 监视文本框的击键。当在文本框中输入第三个字符时，我想进行 Ajax 调用以从 db 中获取与这 3 个起始字符匹配的所有字段，并将它们显示在建议框中。

谁能告诉我如何解决这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:50:04.983

看看 jquery ui docs - 你会在选项下找到“yearRange”

[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

对于第二个问题，还有 jquery ui：

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:52:48.193

您可以使用

```
$(function() {
        $( "#datepicker" ).datepicker({ minDate: new Date(1970,1, 1), maxDate: "-20Y" });
    }); 
```

看

[http://jqueryui.com/demos/datepicker/min-max.html](http://jqueryui.com/demos/datepicker/min-max.html)

# javascript - V8 中的致命错误

> ID：12017570
> 
> 赞同：1
> 
> 时间：2012-08-18T09:46:45.320
> 
> 标签：javascript, ruby-on-rails, debian, v8

我正在尝试将我的 Rails 应用程序部署到与 Debian 一起运行的新 VPS。我使用 Nginx 和 Phusion Passenger 作为我的服务器。

我已将 Node.js 安装为 JavaScript 运行时。可悲的是，我看到以下错误消息：

```
Fatal error in v8::V8::AddGCPrologueCallback()
V8 is no longer usable 
```

编辑：

现在已修复。显然 gr security 导致了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T18:19:13.917

问题发生在具有 grsecurity 和某些限制性规则的内核上。
node.js 需要在服务器不喜欢的某些内存区域执行代码。

您似乎需要为“节点”二进制文件切换两个标志。
此外，您可能需要为您的 ruby​​ 二进制文件切换它们。

### 开启 SEGMEXEC

```
 paxctl -S `which node` && paxctl -S `which ruby` 
```

### 关闭 MPROTECT

```
 paxctl -m `which node` && paxctl -m `which ruby` 
```

### 测试节点现在是否工作

```
 node -e "console.log(1+1);" 
```

有趣的事实是，我现在可以关闭 SEGMEXEC 并且节点仍然可以工作：S ... 但是打开它似乎最初为我修复了它。如果它不起作用，请使用标志并尝试 node -e

祝你好运！
吉兹莫尔

# jquery - Jquery LocalScroll & ScrollTo - 明显的错误？

> ID：12017571
> 
> 赞同：0
> 
> 时间：2012-08-18T09:46:48.790
> 
> 标签：jquery, scrollto, serialscroll

我正在开发一个需要 Ariel Flesler 的 jquery scrollTo 插件的项目：[Plugin-website](http://flesler.blogspot.co.nz/2007/10/jqueryscrollto.html)

我遵循了描述，并确定了对 stackoverflow 的研究。

以下方法不起作用，即使它看起来对我来说是正确的。

在这一点上，我想我犯了一个我看不到的明显错误。**我想我需要一些帮助。**

这是代码：

**在头上：**

```
<script type="text/javascript" src="(...)/js/jquery.scrollTo-1.4.2-min.js"></script> 
<script type="text/javascript" src="(...)/js/jquery.localscroll-1.2.7-min.js"></script> 
<script type="text/javascript" src="(...)/js/jquery.serialScroll-1.2.2-min.js"</script> 
```

**jQuery：**

```
<script type="text/javascript">
jQuery(function( $ ){

var $paneTarget = $('#container');

    $('#down').click(function(){
        $paneTarget.stop().scrollTo( {top:'+=50px',left:'+=0'}, 500 );
    });

});
</script> 
```

**标记：**

```
<div id="container">
 <ul>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
 </ul>
</div>
<a id="down" href="#">Next item</a> 
```

**笔记：**

容器 - 高度 100 像素

列表项 - 每个高度为 50 像素

两者的宽度均为 100%。

我真的不知道我在哪里犯了错误。**我错过了什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:03:08.557

不需要插件恕我直言。

```
$(function() {
    var y=0;
    $("#down").click(function(e){
        e.preventDefault();
        $("#container").animate({scrollTop: y+=50}, 1000);
    }) 
}) 
```

看看这个小提琴：http: [//jsfiddle.net/flyingsausage/kU2ME/](http://jsfiddle.net/flyingsausage/kU2ME/)

# java - java服务器：为每个收到的数据包启动一个新线程？

> ID：12017575
> 
> 赞同：3
> 
> 时间：2012-08-18T09:47:35.010
> 
> 标签：java, multithreading, sockets, packet, serversocket

我目前正在学习如何在 java 中编写一个 tcp 服务器。我正在为新的每个客户端连接（多线程服务器）创建一个新线程。

客户端连接到服务器后，我想将数据从客户端发送到服务器。在服务器端，服务器处于从套接字输入流读取数据的 while 循环中。我现在想问：我应该为每个收到的数据包创建一个新线程吗？

例如，客户端发送字符串“Hello”。服务器是否应该在新线程中处理此数据包以便它可以继续读取，因为我认为如果我不创建新线程，服务器不会继续读取，并且如果客户端在“Hello”数据包之后发送另一个数据包例如“Bye”，服务器可能不会读取它，因为它可能仍在忙于处理“Hello”数据包。

需要明确的是，我不是在谈论 serversockets 接受方法，而是在谈论来自套接字输入流的数据。

请赐教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T10:09:26.403

如果您的数据包处理任务不是很繁重（可能不是），您不应该这样做。线程将处理一条消息并返回接收新消息。不会丢失任何数据 - 如果没有人从输入流中读取数据，则数据传输将保持（在所有缓冲区填满之后）。每个客户端只保留一个线程，在大多数情况下就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T10:16:56.110

是的，您必须委托给另一个线程才能拥有响应式服务器。不，不要为每个请求创建一个线程（除非客户端负载很小），而是使用[线程池](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)。示例骨架代码（当然你必须以某种方式跳出循环）：

```
private static final ExecutorService threadPool = Executors.newCachedThreadPool();  

while(true){  

  final Socket clientConnection = serverSocket.accept();  
  threadPool.execute(new Runnable(){  
            public void run(){  
                  processConnection(clientConnection);  
            });               

} 
```

> 我应该为每个收到的数据包创建一个新线程吗？

不。每个线程将处理自己的连接（接收客户端数据包），因此连接客户端将得到更快的服务，因为主侦听器将继续接受连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T10:17:26.483

对于小型应用程序，每个客户端连接一个线程就可以了。但是，每个客户端请求/数据包一个线程根本不是一个好方法。只要确保您的服务器可以及时与客户端通信。

请注意，您创建的线程数不是无限的，它取决于您使用的操作系统。实际应用程序使用线程池来处理这种情况。

# c++ - 两个相同大小（和长度）的数组是否具有相同的元素偏移量？

> ID：12017576
> 
> 赞同：2
> 
> 时间：2012-08-18T09:47:35.403
> 
> 标签：c++, arrays

C++ 标准似乎对数组有点简洁。

假设我有两种不同的数据类型：`T1`和`T2`. 我为每个数组创建了数组，两个数组的长度相同`N`；所以我有`T1[N]`和`T2[N]`。

现在，是否`sizeof(T1[N]) == sizeof(T2[N])`暗示两个数组的连续元素将具有相同的偏移量？

或者，以更实用的形式：如果我（处理对齐问题）`char[sizeof(T1[N])]`同时投射 to`T1*`和 to `T2*`，是否保证`T1[0]`并且`T2[1]`不会重叠，反之亦然？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T09:51:01.433

是的。

数组的末端没有任何填充或对齐，因此`sizeof(T1[N])`总是等于`sizeof(T1) * N`。

知道了这一点，我们就知道这`sizeof(T1[N]) == sizeof(T2[N])`意味着`sizeof(T1) == sizeof(T2)`（取消`N`双方）。此外，数组必须是连续的，数组内部没有对齐或填充。因此，您的问题的答案是肯定的。

# c++ - Qt 可以用来编写仅命令行的应用程序吗？

> ID：12017577
> 
> 赞同：0
> 
> 时间：2012-08-18T09:47:35.740
> 
> 标签：c++, qt, ubuntu

我一直在研究使用 Qt 在 Linux 上开发 C++ 应用程序，并阅读了“使用 Qt4 进行 C++ GUI 编程”一书的大部分内容。这对于需要前端的应用程序来说非常有用，但现在我需要编写一个仅使用 C++ 命令行的应用程序，但要使用一些 Qt 网络和套接字类。它只能是命令行，因为它将在运行仅命令行安装的 Ubuntu 的主机上运行。在我的书中，我完全找不到沿着这条路线走的任何参考资料——一切都是用 GUI 描述的。

基本上我所需要的只是一个是/否的答案（尽管也非常欢迎指向如何开始的指针）关于我是否可以使用 Qt 创建一个仅限命令行的应用程序？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T09:52:42.787

是的，您将在 qmake pro 文件中需要它：

```
CONFIG += console
QT -= gui 
```

它将仅链接到 QtCore，以及此基本`main`代码：

```
#include <QtCore/QCoreApplication>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    return a.exec();
} 
```

您可以使用其他几个 Qt 库，例如 QtNetwork，因为它们不依赖于 QtGui。查看文档以了解更多信息。

# c++ - C++ 构建系统 - 使用什么？

> ID：12017580
> 
> 赞同：146
> 
> 时间：2012-08-18T09:48:04.200
> 
> 标签：c++, build

我正在考虑用 C++ 开始一个新项目——最初只是在我自己的时间里——我正在研究可用的构建系统。答案似乎是“很多，而且都很糟糕”。

我特别需要的功能是：

1.  C++11 支持
2.  跨平台（Linux 作为主要目标，但至少也可以在 Windows 上构建）
3.  体面的单元测试支持
4.  支持多个模块分离代码
5.  支持代码生成（使用 asn1c 或 protobuf - 尚未 100% 确定）
6.  易于维护

现在，我知道我可以轻松地使用 CMake 和 Autotools 完成其中的 1-4 次。可能还有 SCons 和 Waf 以及其他几个。问题是我从来没有弄清楚如何使用它们正确地进行代码生成——即在构建过程首次运行之前不存在的源文件，因此构建系统必须能够转换为可执行代码的源文件但实际上直到构建开始才知道......（特别是 ASN1C 会生成数十个必须能够一起工作的头文件和源文件，而实际生成的文件集取决于您的 asn 文件的内容）还有一个事实是，这些都不是特别容易维护的——CMake 和 Autotools 有自己的大量脚本，你需要管理它们才能工作，

那么 - 对于这样的事情推荐什么构建系统？还是我现在会被 make 文件和 shell 脚本困住？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-08-18T22:21:07.013

+1 表示“很多，而且很糟糕。”

但是，“最丰富”和“最可扩展”的可能是[CMake](http://www.cmake.org/)，它是一个 Makefile 生成器（也生成本机 MSVC++ `*.proj`/ `*.sln`）。奇怪的语法，但是一旦你学会了它，它就可以让你很好地为不同的平台生成构建。如果我“重新开始”，我可能会使用`CMake`. 它应该处理您的列表，尽管您的“代码生成”可能会在构建系统之外承担“自己的生命”，具体取决于您想要做什么。（见下文。）

对于简单的项目，[QMake](http://en.wikipedia.org/wiki/Qmake)生成器是可以的（你不需要使用 Qt 库来使用 QMake）。但是，您不是在描述“简单”——代码生成和“额外阶段”意味着您可能想要`CMake`或具有丰富 API 的东西用于您自己的扩展，例如`Scons`（或`Waf`）。

我们在工作中使用[Scons](http://www.scons.org/)。它产生“防弹构建”，但它真的很慢。没有其他系统能像`Scons`. 但是，它很慢。它是用 Python 编写的，我们扩展了“工作空间组织”的接口（我们只指定模块依赖项），这是`Scons`设计意图的一部分（这种通过 Python 进行的扩展）。方便，但构建速度很慢。您获得了防弹构建（任何开发人员框都可以制作最终版本），但速度很慢。而且，速度很慢。但是，不要忘记，如果您使用`Scons`，它会很慢。而且，速度很慢。

想到 2000 年后的十年，我们仍然没有飞行汽车，这让我感到恶心。我们可能还得再等一百年才能得到它们。而且，我们都可能会乘坐*仍在*使用蹩脚构建系统建造的飞行汽车。

是的，他们都很糟糕。

[关于代码生成]

`Scons`适用于“阶段”，它们是“有点静态的”。它可以构建作为构建的一部分生成的代码（人们正在以几种不同的方式执行此操作），但这被描述为“非常不像 Scons 的东西”。

如果它是简单的“预处理一些文件并生成源文件”，那么没什么大不了的（你有很多选择，这就是为什么`qmake`要写 - 用于文件的`moc`预处理`*.hpp/*.cpp`）。

但是，如果您以“繁重的方式”执行此操作，则需要编写自己的脚本。例如，我们将查询数据库并生成 C++ 类作为“层”之间的接口（在传统的 3 层应用程序开发中）作为构建脚本的一部分。同样，我们通过 IDL 生成服务器/客户端源代码，并嵌入版本信息以允许多个客户端/服务器以不同版本同时运行（对于相同的“客户端”或“服务器”）。大量生成的源代码。我们可以“假装”那是“构建系统”，但实际上，它是“配置管理”的重要基础设施，其中一部分是“构建系统”。例如，这个系统不得不“删除”和“

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-06-18T13:57:54.377

You can use Gradle now: [https://docs.gradle.org/current/userguide/native_software.html](https://docs.gradle.org/current/userguide/native_software.html)

This seems to have matured quite a bit in the years since I originally posted this. The page saying that the project is "incubating" has disappeared, but I can't find any official announcement removing this status.

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-12-15T18:08:48.447

我找到了这些，我还没有亲自使用过所有这些：

[Ninja](https://ninja-build.org/)，一个专注于速度的小型构建系统。谷歌现在使用 Ninja 来构建 Android 而不是 Make: [link](https://groups.google.com/forum/#!topic/android-platform/Hhl_4hfOONg/discussion)。

[Shake](https://github.com/ndmitchell/shake)，一个强大而快速的构建系统。

[Tup](http://gittup.org/tup/)，一个高性能的构建系统。[基于算法](http://gittup.org/tup/build_system_rules_and_algorithms.pdf)的设计。 [Tup 分析](http://chadaustin.me/2010/06/scalable-build-systems-an-analysis-of-tup/)。

所有现在都是跨平台的并支持 Windows。我还不确定您的其他要求，因为我还没有亲自测试它们。它们被用于商业开发，[CIG](https://www.cloudimperiumgames.com/)选择了 Ninja。我已经使用并喜欢 Ninja 的易用性和速度以及项目生成器。前两个类似于 Scons、Ant 等。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-17T23:44:09.277

Scons is very friendly and flexible system, but you right, Lothar, it really slow.

But there is a way to increase the performance of programs written in Python. This use of the JIT. Of all known projects, PyPy is a very powerful, fast-growing and motivated JIT-backed - Python 2.7 implementation. PyPy compatibility with Python 2.7 is simply amazing. However, Scons declared as unsupported project on the [PyPy compatibility wiki](https://bitbucket.org/pypy/compatibility/wiki/Home). **Waf**, on the other hand, modeled as python-based autotools sucessor, is fully supported by PyPy infrastructure. In my projects the speed of the assembly has increased 5-7 times in the transition to PyPy. [You can see the performance reports from PyPy](http://code.google.com/p/waf/).

For modern and relatively fast build system Waf is good choice.

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-12-09T09:54:28.730

谷歌构建系统是一个不错的选择：[http ://bazel.io/](http://bazel.io/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-08-18T10:15:48.643

我使用了 SCons，并且对这个构建系统印象深刻。SCons 可以通过 python 和 python 本身进行扩展——这很棒，因为 Python 拥有你需要的一切，只需编写逻辑代码，所有低级功能已经在 SCons 和 Python 中实现并且是跨平台的。如果具有良好的编程技能，那么您的构建脚本将看起来完美而简单。

Make、CMake 和类似的构建系统似乎是宏的垃圾。Waf 是 SCons 模拟。我正在尝试 Waf，但 SCons 会更友好，所以我留在了 SCons。

群众意见 SCons 太慢了，但在项目的中间，我没有看到 make 和 SCons 之间的构建速度有任何区别。相反，SCons 很好地处理了并行构建，而 make 却遇到了很大的麻烦。

此外，SCons 允许您获取 - 配置、构建、部署、从模板生成配置、运行测试和执行任何其他可以使用 python 和 SCons 编码完成的任务 - 全部合二为一。这是一个非常大的优势。

对于一个简单的项目，CMake 也是一个不错的选择。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-18T22:42:25.287

只是为了增加我的美分：预制

[http://industriousone.com/premake](http://industriousone.com/premake)

wiki 上还有一个[专门的网页](http://en.wikipedia.org/wiki/Premake)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-24T09:13:16.787

您可以使用[Ceedling](https://github.com/ThrowTheSwitch/Ceedling)。请注意，但它目前仅支持 C，并且与作者的 Unity 和 CMock 测试框架紧密耦合。

它可以很容易地被分叉和修改以与 C++ 编译器和单元测试/模拟框架一起使用。

[Tup](http://gittup.org/tup/)也值得一提。它非常快，但它对测试框架等一无所知，这意味着您必须使用 Tup 编写自己的构建系统。如果你打算做 TDD，Tup 可能是要走的路。

# android - 如何从两个 JSON 数组中获取 JSON 对象

> ID：12017584
> 
> 赞同：1
> 
> 时间：2012-08-18T09:48:28.317
> 
> 标签：android

如何在android中获取这个数组

第一个数组“user”我可以得到，但第二个数组“userpages”我无法得到帮助

我的 json

![在此处输入图像描述](../Images/af13a82e2776204ec262a066dcb64cc5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:55:28.057

这是因为 userpages 本身就是一个数组。因此，获取数组，然后从中获取数据。

在你的情况下：

```
 JSONArray jArr2 =jo.getJSONArray("userpages");
String title[]= new String[jArr2.Length()];;
 for(int i=0; i<jArr2.Length(); i++)
   {
      JSONObject jObj = (JSONObject) jArr2.get(i);

       String title[i] = jObj.getString("title");
    } 
```

祝你好运 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T10:05:04.623

```
JSONArray userArr = ...
for(int i=0; i<userArr.length(); i++)
{
    //user json object
    JSONObject userObj = userArr.getJSONObject(i);
    JSONArray userpageArr = userObj.getJSONArray("userpages");

    for(int j=0; j<userpageArr.length(); j++)
    {
        JSONOject userpageObj = userpageArr.getJSONObject(j);
        String title = userpageObj.getString("title");
        //....
    }
} 
```

# php - jQuery函数来查找表格行中的哪个按钮被点击

> ID：12017588
> 
> 赞同：1
> 
> 时间：2012-08-18T09:49:12.390
> 
> 标签：php, javascript, jquery, exchange-server, commodity

很长一段时间以来，我一直在努力寻找解决方案，非常感谢任何帮助。

我有一个通过 php sql 查询生成的表，每行旁边是两个按钮 Buy & Sell，当用户单击其中一个按钮时，它将填充对话框中的订单表格

我有一个函数作用于 jQuery 中的单击事件，但它读取表中第一行的第一个字段。

这是我的功能

```
$('.buy').click(function(){
if($('#buying').dialog('isOpen')) alert('Buy Box Already open');
else { 
   $(".buycommodity").val($(".commodity_name").val()+"
                 "+$(".commodity_code").val());
      $("#buyprice").val($(".commodity_price").val());
      $("#buyqty").val($(".commodity_volume").val());

      $('#buying').dialog('open'); 
    }}
    ); 
```

问题是，如何在表单中读取和填充正确的字段？我怎样才能让 jQuery 知道哪个按钮，在哪一行被点击？所有类型按钮都具有相同的类别，即买入或卖出

这是表格的一些 HTML 源代码

```
<div id="exchange">
<form>
<table border="1" cellspacing="5" cellpadding="5">
<tr>
    <th>Commodity</th>
    <th>Code</th>
    <th>Current Price</th>
    <th>Past Price</th>
    <th>Change</th>
    <th>Volume</th>
        </tr>
        <tr valign='top'>
<td align=left>
   <input type="text" name="commodityname" value=Basmati readonly="readonly" id="commodityname" size=10>
</td>
<td align=left>
   <input type="text" name="commoditycode" value=1121 readonly="readonly" id="commoditycode" size=6>
</td>
<td align=absmiddle>
   <input type="text" name="currentprice" value=100 readonly="readonly" id="currentprice" size=4>
</td>
<td align=absmiddle>
   <input align=absmiddle type="text" name="pastprice" value=80 readonly="readonly" id="pasrprice" size=4>
</td>
<td align="absmiddle"><font size="3" color="blue"><em>&#x25B2;</em></font></td>
<td align=left><input type="text" name="commodityvolume" value=88000 readonly="readonly" id="commodityvolume" size=7>
</td>
   <input type=hidden id=commodity_id name=commodity_id value=1>
   <input type=hidden class=commodity_name name=commodity_name value=Basmati>
   <input type=hidden class=commodity_code name=commodity_code value=1121>
   <input type=hidden class=commodity_volume name=commodity_volume value=88000>
   <input type=hidden class=commodity_price name=commodity_price value=100>
<td>
   <input class=buy type=button name=orderbutton value=Buy>
</td>
<td>
   <input class=sell type=button name=orderbutton value=Sell>
</td>
</tr>
</form>
<tr valign='top'>
   <td align=left>
      <input type="text" name="commodityname" value=Basmati readonly="readonly" id="commodityname" size=10>
   </td>
   <td align=left>
      <input type="text" name="commoditycode" value=386 readonly="readonly" id="commoditycode" size=6>
  </td>
  <td align=absmiddle>
      <input type="text" name="currentprice" value=90 readonly="readonly" id="currentprice" size=4>
  </td>
  <td align=absmiddle><input align=absmiddle type="text" name="pastprice" value=100 readonly="readonly" id="pasrprice" size=4>
  </td>
  <td align="absmiddle"><font size="3" color="red"><em>&#x25BC;</em></font></td>
  <td align=left><input type="text" name="commodityvolume" value=44000 readonly="readonly" id="commodityvolume" size=7>
  </td><input type=hidden id=commodity_id name=commodity_id value=2>
   <input type=hidden class=commodity_name name=commodity_name value=Basmati>
   <input type=hidden class=commodity_code name=commodity_code value=386>
   <input type=hidden class=commodity_volume name=commodity_volume value=44000>
   <input type=hidden class=commodity_price name=commodity_price value=90><td>
   <input class=buy type=button name=orderbutton value=Buy></td>
                         <td><input class=sell type=button name=orderbutton value=Sell></td></tr
   </form>
 <tr valign='top'>
   <td align=left>
     <input type="text" name="commodityname" value=Basmati readonly="readonly" id="commodityname" size=10></td>
     <td align=left><input type="text" name="commoditycode" value=385 readonly="readonly" id="commoditycode" size=6></td>
    <td align=absmiddle><input type="text" name="currentprice" value=75 readonly="readonly" id="currentprice" size=4>
    </td>
    <td align=absmiddle><input align=absmiddle type="text" name="pastprice" value=88 readonly="readonly" id="pasrprice" size=4></td>
    <td align="absmiddle"><font size="3" color="red"><em>&#x25BC;</em></font></td>
    <td align=left>
      <input type="text" name="commodityvolume" value=24000 readonly="readonly" id="commodityvolume" size=7></td>
      <input type=hidden id=commodity_id name=commodity_id value=3>
      <input type=hidden class=commodity_name name=commodity_name value=Basmati>
      <input type=hidden class=commodity_code name=commodity_code value=385>
      <input type=hidden class=commodity_volume name=commodity_volume value=24000>
      <input type=hidden class=commodity_price name=commodity_price value=75><td>
      <input class=buy type=button name=orderbutton value=Buy></td>
                         <td><input class=sell type=button name=orderbutton value=Sell></td></tr>
      </form>
      <tr valign='top'><td align=left>
      <input type="text" name="commodityname" value=Ierro readonly="readonly" id="commodityname" size=10></td><td align=left>
      <input type="text" name="commoditycode" value=6 readonly="readonly" id="commoditycode" size=6></td><td align=absmiddle>
      <input type="text" name="currentprice" value=33 readonly="readonly" id="currentprice" size=4></td><td align=absmiddle>
      <input align=absmiddle type="text" name="pastprice" value=39 readonly="readonly" id="pasrprice" size=4></td><td align="absmiddle"><font size="3" color="red"><em>&#x25BC;</em></font>
    </td><td align=left>
      <input type="text" name="commodityvolume" value=124000 readonly="readonly" id="commodityvolume" size=7></td>
      <input type=hidden id=commodity_id name=commodity_id value=4>
      <input type=hidden class=commodity_name name=commodity_name value=Ierro>
      <input type=hidden class=commodity_code name=commodity_code value=6>
      <input type=hidden class=commodity_volume name=commodity_volume value=124000>
      <input type=hidden class=commodity_price name=commodity_price value=33><td>
      <input class=buy type=button name=orderbutton value=Buy></td>
      <td><input class=sell type=button name=orderbutton value=Sell></td></tr></form>
<tr valign='top'><td align=left>
      <input type="text" name="commodityname" value=Ierro readonly="readonly" id="commodityname" size=10>
  </td>
     <td align=left>
      <input type="text" name="commoditycode" value=9 readonly="readonly" id="commoditycode" size=6></td><td align=absmiddle>
      <input type="text" name="currentprice" value=79 readonly="readonly" id="currentprice" size=4></td><td align=absmiddle>
      <input align=absmiddle type="text" name="pastprice" value=60 readonly="readonly" id="pasrprice" size=4></td><td align="absmiddle"><font size="3" color="blue"><em>&#x25B2;</em></font></td><td align=left>
      <input type="text" name="commodityvolume" value=24000 readonly="readonly" id="commodityvolume" size=7></td>
      <input type=hidden id=commodity_id name=commodity_id value=5>
      <input type=hidden class=commodity_name name=commodity_name value=Ierro>
      <input type=hidden class=commodity_code name=commodity_code value=9>
      <input type=hidden class=commodity_volume name=commodity_volume value=24000>
      <input type=hidden class=commodity_price name=commodity_price value=79><td>
      <input class=buy type=button name=orderbutton value=Buy></td>
      <td><input class=sell type=button name=orderbutton value=Sell></td></tr></form></table
      </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T11:19:30.230

您可以使用 html5 数据属性来标记您的按钮。在下面的示例中，我为每个按钮提供了与产品相关的 ID，但您可以根据需要添加任意数量的其他数据属性。还有一个示例如何获取单击按钮的行号。

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.min.js"
        type="text/javascript"></script>
    </head>
    <body>
        <table>
            <tr>
                <td><button class="buy" data-product-id="1" >button 1</button></td>
                <td><button class="buy" data-product-id="2" >button 2</button></td>
            </tr>
            <tr>
                <td><button class="buy" data-product-id="3" >button 3</button></td>
                <td><button class="buy" data-product-id="4" >button 4</button></td>
            </tr>
        </table>

        <script>
            $('.buy').click(function(){             
                var prod_id = $(this).data('productId')
                alert(prod_id);
                var row_number = $(this).closest("tr")[0].rowIndex;
                alert("row number: "+row_number);
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T13:26:14.283

我希望这可以帮助你：

```
$('.buy').click(function() {
 var trRef=$(this).parent().parent(); //double parent() to get reference of TR, that holds the button in action
 var commodity_name = $(trRef).find('.commodity_name').val();
 var commodity_code = $(trRef).find('.commodity_code').val();
 var commodity_price = $(trRef).find('.commodity_price').val();
 var commodity_volume = $(trRef).find('.commodity_volume').val();

 $(".buycommodity").val(commodity_name+" "+commodity_code);
  $("#buyprice").val(commodity_price);
  $("#buyqty").val(commodity_volume);
}); 
```

# php - geoJSON 发出无效的 GeoJSON 对象

> ID：12017589
> 
> 赞同：0
> 
> 时间：2012-08-18T09:49:13.980
> 
> 标签：php, json, jquery, geojson

我一直在尝试使用 MapIT API 制作地图（传单）。

由于存在跨浏览器问题，我无法使用 javascript，因此我将信息发送到 PHP，PHP 获取信息并将其回显给函数：

Javascript函数：

```
 reqwest({
    url: 'php/ajax.php',
    data: 'switch=mapdetail&mapitid=' + mainid,
    type: 'json',
    success: function(data) {
    console.log('passed ' + data);
        var area = new L.GeoJSON(data);
        map.addLayer(area);

        var bounds = new L.LatLngBounds();
        area._iterateLayers(function (layer) {
            if (layer instanceof L.MultiPolygon) {
                layer._iterateLayers(function(layer2) {
                    var new_bounds = layer2.getBounds();
                    bounds.extend(new_bounds.getSouthWest());
                    bounds.extend(new_bounds.getNorthEast());
                });
            }
            if (layer instanceof L.Polygon) {
                bounds = layer.getBounds();
            }
        }, area);
        map.fitBounds(bounds);
    }
}); 
```

PHP位：

```
 $mapid = $_POST['mapitid'];

    $thedata = json_encode("http://mapit.mysociety.org/area/".mapid.".geojson?simplify_tolerance=0.0001");

    echo thedata; 
```

在 chrome 开发工具中，我将其作为 concole.log （**通过 [object XMLHttpRequest]**）

其次是 未捕获的**错误：无效的 GeoJSON 对象。**

我猜当数据返回时，它是某种格式，但我看不到。以下是网站直接提供的格式：

[http://mapit.mysociety.org/area/2514.geojson?simplify_tolerance=0.0001](http://mapit.mysociety.org/area/2514.geojson?simplify_tolerance=0.0001)

**更新编辑**

好的，我现在可以在 Chrome 开发工具中看到代码了。

新代码：Javascript：

```
 $.ajax({
    url: 'php/ajax.php',
    data: 'switch=mapdetail&mapitid=59868',
    type: 'POST',
    dataType: 'json',
    success: function(data) {

    console.log(data);
        var area = new L.GeoJSON(data);
        map.addLayer(area);

        var bounds = new L.LatLngBounds();
        area._iterateLayers(function (layer) {
            if (layer instanceof L.MultiPolygon) {
                layer._iterateLayers(function(layer2) {
                    var new_bounds = layer2.getBounds();
                    bounds.extend(new_bounds.getSouthWest());
                    bounds.extend(new_bounds.getNorthEast());
                });
            }
            if (layer instanceof L.Polygon) {
                bounds = layer.getBounds();
            }
        }, area);
        map.fitBounds(bounds);
    }
}); 
```

新的PHP：

```
 $mapid = $_POST['mapitid'];

    $thedata = json_encode(file_get_contents("http://mapit.mysociety.org/area/".$mapid.".geojson?simplify_tolerance=0.0001"));

    echo $thedata; 
```

这是结果：

```
maind id = 59868 { "type": "Polygon", "coordinates": [ [ [ -2.487218, 51.524673 ], [ -2.486795, 51.525041 ], [ -2.486594, 51.525985 ], [ -2.487938, 51.526411 ], [ -2.488176, 51.527001 ], [ -2.488628, 51.527298 ], [ -2.490577, 51.527407 ], [ -2.490898, 51.527912 ], [ -2.490764, 51.528206 ], [ -2.490262, 51.528182 ], [ -2.489666, 51.528908 ], [ -2.489246, 51.528918 ], [ -2.488917, 51.529388 ], [ -2.488017, 51.529577 ], [ -2.488903, 51.530538 ], [ -2.490376, 51.531367 ], [ -2.491287, 51.531554 ], [ -2.493421, 51.532469 ], [ -2.493637, 51.532719 ], [ -2.493405, 51.532908 ], [ -2.494018, 51.533586 ], [ -2.493813, 51.533668 ], [ -2.494053, 51.533871 ], [ -2.494691, 51.533692 ], [ -2.494773, 51.533975 ], [ -2.495049, 51.534001 ], [ -2.497023, 51.535115 ], [ -2.497958, 51.535299 ], [ -2.498869, 51.535796 ], [ -2.503044, 51.537171 ], [ -2.505539, 51.538153 ], [ -2.505462, 51.538237 ], [ -2.505768, 51.538400 ], [ -2.506749, 51.538587 ], [ -2.509226, 51.539616 ], [ -2.510444, 51.539373 ], [ -2.516245, 51.537093 ], [ -2.519487, 51.534951 ], [ -2.519770, 51.535112 ], [ -2.518834, 51.535661 ], [ -2.519198, 51.535847 ], [ -2.520104, 51.535281 ], [ -2.520993, 51.535800 ], [ -2.523176, 51.536491 ], [ -2.523705, 51.536050 ], [ -2.524164, 51.535015 ], [ -2.524400, 51.535036 ], [ -2.526038, 51.535597 ], [ -2.528674, 51.537841 ], [ -2.530464, 51.538917 ], [ -2.531443, 51.539279 ], [ -2.533221, 51.540257 ], [ -2.535901, 51.541205 ], [ -2.538733, 51.541768 ], [ -2.540781, 51.542575 ], [ -2.540439, 51.542960 ], [ -2.540130, 51.543027 ], [ -2.540296, 51.543266 ], [ -2.540235, 51.543512 ], [ -2.538972, 51.544100 ], [ -2.538923, 51.544262 ], [ -2.539178, 51.544446 ], [ -2.538498, 51.544564 ], [ -2.538700, 51.544894 ], [ -2.538134, 51.545338 ], [ -2.537945, 51.546351 ], [ -2.537423, 51.546550 ], [ -2.537010, 51.546434 ], [ -2.535453, 51.546656 ], [ -2.533427, 51.547221 ], [ -2.531784, 51.547893 ], [ -2.530263, 51.548780 ], [ -2.529550, 51.549392 ], [ -2.526786, 51.550568 ], [ -2.526825, 51.550845 ], [ -2.526537, 51.551310 ], [ -2.526124, 51.551516 ], [ -2.526089, 51.551792 ], [ -2.525607, 51.552004 ], [ -2.525590, 51.552291 ], [ -2.525345, 51.552302 ], [ -2.525157, 51.552636 ], [ -2.524847, 51.552626 ], [ -2.522527, 51.553966 ], [ -2.522093, 51.553866 ], [ -2.522108, 51.554036 ], [ -2.521753, 51.554080 ], [ -2.521573, 51.554376 ], [ -2.521406, 51.554261 ], [ -2.521062, 51.554511 ], [ -2.520244, 51.554625 ], [ -2.519966, 51.554989 ], [ -2.519671, 51.554849 ], [ -2.517060, 51.555948 ], [ -2.513820, 51.555008 ], [ -2.513911, 51.554328 ], [ -2.513547, 51.554467 ], [ -2.510762, 51.553441 ], [ -2.510516, 51.552596 ], [ -2.509840, 51.551590 ], [ -2.509863, 51.551092 ], [ -2.509555, 51.551038 ], [ -2.509897, 51.550668 ], [ -2.508169, 51.550138 ], [ -2.506176, 51.547936 ], [ -2.506093, 51.548065 ], [ -2.502299, 51.547223 ], [ -2.499534, 51.546897 ], [ -2.496746, 51.547906 ], [ -2.494741, 51.547731 ], [ -2.492722, 51.548296 ], [ -2.490157, 51.549388 ], [ -2.486311, 51.549706 ], [ -2.486413, 51.549090 ], [ -2.486582, 51.548905 ], [ -2.487810, 51.548293 ], [ -2.487170, 51.547647 ], [ -2.487368, 51.546444 ], [ -2.487133, 51.546054 ], [ -2.486300, 51.545561 ], [ -2.485866, 51.544907 ], [ -2.484368, 51.544669 ], [ -2.483687, 51.544353 ], [ -2.483522, 51.544032 ], [ -2.483795, 51.543799 ], [ -2.483713, 51.543623 ], [ -2.482981, 51.543752 ], [ -2.482626, 51.544099 ], [ -2.481342, 51.544563 ], [ -2.481302, 51.544783 ], [ -2.480959, 51.545043 ], [ -2.479887, 51.545650 ], [ -2.479938, 51.545885 ], [ -2.479773, 51.546057 ], [ -2.478910, 51.546471 ], [ -2.477119, 51.546819 ], [ -2.476491, 51.547366 ], [ -2.475257, 51.547549 ], [ -2.474229, 51.547278 ], [ -2.474094, 51.547572 ], [ -2.473668, 51.547696 ], [ -2.472217, 51.547233 ], [ -2.472826, 51.547159 ], [ -2.472977, 51.546795 ], [ -2.472157, 51.546492 ], [ -2.471731, 51.546512 ], [ -2.471710, 51.546357 ], [ -2.470886, 51.546099 ], [ -2.470910, 51.545976 ], [ -2.470226, 51.545737 ], [ -2.469964, 51.545485 ], [ -2.471224, 51.543133 ], [ -2.471587, 51.541971 ], [ -2.472669, 51.541868 ], [ -2.473324, 51.540817 ], [ -2.471415, 51.540643 ], [ -2.471310, 51.539609 ], [ -2.471503, 51.538436 ], [ -2.470360, 51.538025 ], [ -2.469045, 51.537066 ], [ -2.468343, 51.536020 ], [ -2.467243, 51.535040 ], [ -2.466285, 51.534661 ], [ -2.466215, 51.533903 ], [ -2.465796, 51.533080 ], [ -2.464993, 51.532483 ], [ -2.464058, 51.532100 ], [ -2.464207, 51.531620 ], [ -2.465837, 51.531453 ], [ -2.467140, 51.529029 ], [ -2.468394, 51.527443 ], [ -2.471064, 51.524940 ], [ -2.472790, 51.525590 ], [ -2.475423, 51.524617 ], [ -2.475349, 51.524353 ], [ -2.476017, 51.523592 ], [ -2.476650, 51.523409 ], [ -2.478830, 51.523299 ], [ -2.479678, 51.523355 ], [ -2.481826, 51.523899 ], [ -2.484982, 51.524108 ], [ -2.487218, 51.524673 ] ] ] } 
```

未捕获的错误：无效的 GeoJSON 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T11:59:16.450

根据您编辑的信息 - 使用那个 JS，那个 PHP 但**没有**，在`json_encode`这里可以正常工作，获取并显示边界。您不需要进一步编码 JSON，当您从服务器获取它时它已经是 JSON，您只是通过代理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:18:53.943

我认为这是因为您 json_encode URL 而不是您想要的内容。

```
 $thedata = json_encode(file_get_contents("http://mapit.mysociety.org/area/".$mapid.".geojson?simplify_tolerance=0.0001")); 
```

此外，使用 POST 方法只提供不修改服务器存储数据的信息也不是一件好事。GET 请求在这里就可以了。

# c# - 将文件作为 httprequest c#.net 发送

> ID：12017590
> 
> 赞同：1
> 
> 时间：2012-08-18T09:49:14.500
> 
> 标签：c#, .net, httpwebrequest

嗨，我需要在 http post 方法中将文件名和文件作为参数发送，我使用以下代码作为

```
string reponseAsString = "";
StringBuilder sb = new StringBuilder();
byte[] buf = new byte[8192];

    ServicePointManager.ServerCertificateValidationCallback += delegate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
    {
        return true;
    };
    string fileToUpload = filepath;
    FileStream rdr = new FileStream(fileToUpload, FileMode.Open);
    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url); //Given URI is exists
    req.Method = "POST";
    req.ContentLength = rdr.Length;
    req.AllowWriteStreamBuffering = true;
    Stream reqStream = req.GetRequestStream();
    Console.WriteLine(rdr.Length);
    byte[] inData = new byte[rdr.Length];

    // Get data from upload file to inData 
    int bytesRead = rdr.Read(inData, 0, (int)rdr.Length);

    // put data into request stream
    reqStream.Write(inData, 0, (int)rdr.Length);
    rdr.Close();

    // req.GetResponse();
    HttpWebResponse response = (HttpWebResponse)req.GetResponse();

    Stream resStream = response.GetResponseStream();
    string tempString = null;
    int count = 0;

    do
    {
        count = resStream.Read(buf, 0, buf.Length);
        if (count != 0)
        {
            tempString = Encoding.ASCII.GetString(buf, 0, count);
            sb.Append(tempString);

        }
    }

    while (count > 0);

    reponseAsString = sb.ToString();
    reqStream.Close();
} 
```

在这里，我只是发送带有文件名的 url 和文件路径作为请求，但没有获得所需的响应。但是当它通过高级客户端运行时，它会在 c# .net4 框架中给出响应

等待您的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:54:04.153

您可以使用[`multipart/form-data`](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)请求编码。我想这就是您的服务器所期望的。所以：

```
string fileToUpload = @"c:\work\somefile.jpg";
string url = "http://foo.com/upload";
using (var client = new WebClient())
{
    byte[] result = client.UploadFile(url, fileToUpload);
    string responseAsString = Encoding.Default.GetString(result);
} 
```

但这仅限于单个文件。如果您需要上传多个文件或向 POST 正文添加其他简单参数，您可能需要手动执行此操作。我在[博客上写了一个](http://www.bratched.com/en/component/content/article/69-uploading-multiple-files-with-c.html)可以在这种情况下使用的示例类。

# iphone - iPhone：将 FPPopover 类与 UIBarButtonItem 一起使用时出错

> ID：12017598
> 
> 赞同：13
> 
> 时间：2012-08-18T09:50:17.510
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用为 iPhone 创建弹出窗口的[F​​PPopover](https://github.com/50pixels/FPPopover)类。我遵循了自述文件中的确切步骤，但我没有使用 xib 文件中的 UIbutton，而是使用以编程方式创建的 UIBarButtonItem。但是，我收到以下错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIBarButtonItem superview]：无法识别的选择器发送到实例 0x6a3e420”

我复制粘贴了与自述文件中相同的代码，但我只是将 (UIButton*)okButton 更改为 (id)sender (id 这里是 UIBarButtonItem*)

```
-(void)popover:(id)sender
{
    //the view controller you want to present as popover
    TestClass *controller = [[TestClass alloc] init];
    //our popover
    FPPopoverController *popover = [[FPPopoverController alloc] initWithViewController:controller];
    //the popover will be presented from the okButton view
    [popover presentPopoverFromView:sender];
    //release
    [controller release];
} 
```

我在想也许它与不是 UIButton 的 UIBarButtonItem 有关？或者是别的什么？我尝试将 UIBarButtonItem 转换为 UIButton 但仍然给了我同样的错误。有什么解决办法吗？

以防万一：这是我以编程方式创建导航栏和栏按钮的方式：

```
UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(320, 0, 320, 44)];
UINavigationItem *navItem = [[UINavigationItem alloc] initWithTitle:@"By Clubs"];
[navBar pushNavigationItem:navItem animated:NO];
UIBarButtonItem *editButton = [[UIBarButtonItem alloc] initWithTitle:@"Filter"
                                               style:UIBarButtonItemStyleBordered
                                              target:self
                                              action:@selector(popover:)];

navItem.rightBarButtonItem = editButton; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-23T11:27:48.577

presentPopoverFromView 仅接受 UIView 子类。UIBarButtonItem 不是 UIView 的子类，因此您需要找到与该按钮项相关的视图。这是我与 FPPopoverController 一起使用的解决方案

```
 UIBarButtonItem *buttonItem = sender;
    UIView* btnView = [buttonItem valueForKey:@"view"];
    //On these cases is better to specify the arrow direction
    [popover setArrowDirection:FPPopoverArrowDirectionUp];
    [popover presentPopoverFromView:btnView]; 
```

这应该工作！让我知道！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T10:21:40.683

那是 b/c [UIBarButtonItem](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html)继承自`UIBarItem`and `NSObject`。只有继承自的 UI 元素`UIView`具有`superview`属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T06:18:23.147

我遇到了同样的错误。解决方案是以编程方式创建一个 UIButton（在 UIBar 按钮项的同一位置 - 设置适当的坐标），然后从 UIButton 呈现弹出框。然后隐藏 UIButton。

这段代码对我有用：

```
-(void)testMethod {

UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];

// set action as NULL if you dont need any method/functionality to call

[button addTarget:self action:@selector(aMethod)
 forControlEvents:UIControlEventTouchDown];

[button setTitle:@"Show View" forState:UIControlStateNormal];
button.frame = CGRectMake(130, -40, 160.0, 40.0);
[self.view addSubview:button];

AlertsViewController *controller = [[AlertsViewController alloc] init]; 

//our popover
FPPopoverController *popover = [[FPPopoverController alloc] initWithViewController:controller]; 

//the popover will be presented from the Button view 
[popover presentPopoverFromView:button]; 

//hide the button
button.hidden = YES;

}

-(void)aMethod {
// Write any functionality if you need
} 
```

希望这可以帮助。如果您有任何问题，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-31T11:39:55.620

大多数应用程序显示来自 BarButtonItem 的弹出窗口。FPPopOverController 不支持这个。所以，在我看来你应该使用：[WYPopOverController](https://github.com/nicolaschengdev/WYPopoverController)

# c# - 发现服务器ip地址抛出网络扫描

> ID：12017599
> 
> 赞同：0
> 
> 时间：2012-08-18T09:50:21.233
> 
> 标签：c#, sockets, client-server

> **可能重复：**
> [通过网络扫描发现服务器IP地址](https://stackoverflow.com/questions/12018561/discover-server-ip-address-through-the-network-scanning)

我将在 C# 中开发客户端服务器应用程序。

客户端必须能够发现服务器 IP 地址。这如何通过网络发现实现？

对此的任何帮助和解决方案都可能非常有用，如果有一些示例代码会更好！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:55:07.123

[在 ASP.NET 中获取服务器的 IP 地址？](https://stackoverflow.com/questions/646525/getting-the-ip-address-of-server-in-asp-net)

对不起，我应该把它作为一个重复并删除我最初的答案。

# mysql - 避免在 SELECT 查询 MYSQL 中重复输入

> ID：12017602
> 
> 赞同：0
> 
> 时间：2012-08-18T09:51:14.363
> 
> 标签：mysql, select, distinct

如何避免在以下查询中列出多条记录？

```
SELECT DISTINCT application_forms.date_submitted, 
                application_forms.application_type, 
                application_forms.online_offline2, 
                application_forms.decision, 
                application_forms.id, 
                notes.post_by_id 
FROM    application_forms 
             LEFT  JOIN notes 
                 ON  notes.user_id = application_forms.id 
```

我想列出 1 条记录而不是重复记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:09:39.580

你可以这样做

```
SELECT      application_forms.date_submitted, 
            application_forms.application_type, 
            application_forms.online_offline2, 
            application_forms.decision, 
            application_forms.id, 
            n.post_by_id 
FROM    application_forms 
         LEFT  JOIN (SELECT user_id , MAX(id) , notes.post_by_id FROM notes) as n
             ON  n.user_id = application_forms.id  
GROUP BY application_forms.date_submitted 
```

见左连接 MAX(id) 选择每个音符的最后一条记录并将其连接到外部查询行

# c# - 如何获取真实日期（或时间）？

> ID：12017604
> 
> 赞同：1
> 
> 时间：2012-08-18T09:51:25.410
> 
> 标签：c#, asp.net-mvc-3, datetime

在创建新产品时的 mvc3 应用程序中，我想添加它的创建日期。

```
 [HttpPost]
 public ActionResult Create( Product product )
 product.CreateDate = DateTime.Now.ToLongDateString();
 ...
  return View( product );
 } 
```

当我将站点部署到主机时，DateTime.Now 会产生任何问题吗？它取决于用户的计算机时间吗？如果用户的计算机时间不正确，产品的创建日期将不正确..我需要这方面的帮助，始终获得实时。或者，请告知其他方式。对不起，我的英语不好..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T09:54:19.350

`DateTime.Now`将反映运行代码的计算机上的日期和时间（因此，在 Web 应用程序中，*服务器*时间）。

我建议[`DateTime.UtcNow`](http://msdn.microsoft.com/en-us/library/system.datetime.utcnow.aspx)改用 - 无论计算机在哪里（假设计算机设置正确），这都会为您提供一致的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T09:54:14.747

DateTime.Now 取决于运行它的计算机。这意味着，如果您部署 Web 应用程序，DateTime.Now 将返回该服务器上设置的 DateTime。它不会为不同的用户返回不同的值，因为 C# 在服务器端运行并且不受客户端的影响。

# android - 在两个渲染线程之间共享 OpenGL 纹理？

> ID：12017607
> 
> 赞同：2
> 
> 时间：2012-08-18T09:52:10.097
> 
> 标签：android, opengl-es, textures, memory-optimization

我有一个到 GLSurfaceView 的界面渲染，但在某些时候我启动了另一个渲染线程，以便能够以更大的比例渲染界面的一部分（只有几个纹理），然后将它们写为图像文件到sd卡。我想知道当我启动另一个渲染器以写入磁盘时，是否以及如何使用已经加载到 GUI 渲染线程中的大型纹理？

目前我有一个非常糟糕的解决方法，即我在加载纹理后将 bmp 保存在内存中，然后当我启动写入磁盘渲染器时，我只是从该位图创建一个新纹理。但显然，当我觉得它真的没有必要时，这既费时又耗内存，因为位图实际上已经在 GPU 中的某个地方加载为大纹理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T12:59:16.893

您可以使用共享上下文。在为第二个线程创建上下文时，将第一个上下文作为 shared_context 参数传递。然后，您可以使用与原始线程中相同的句柄访问第二个线程中的纹理。

# python - 使用 Flask-FlatPages 列出特定文件夹中的文件

> ID：12017608
> 
> 赞同：2
> 
> 时间：2012-08-18T09:52:18.323
> 
> 标签：python, flask, flask-flatpages

我使用 Flask-FlatPages 并想列出特定文件夹中的文件。到目前为止，我只使用了一级文件夹，并且以下路线运行良好：

```
@app.route('/<path:name>')
def articles(name):
    articles = (p for p in pages if p.path.startswith(str(name)))
    folders = listdirs(name)
    return render_template('articles.html', articles=articles, folders=folders) 
```

现在我有一个这样的文件夹结构：

```
level1/
  level2/
    file1.md
    level3/
      file2.md 
```

当我在 URL“/level2”时，我会列出“file1.md”和“file2.md”。但我只想列出当前目录中的文件。我怎样才能改变我的路线来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:16:23.103

我对平面页面了解不多，但您可以忽略带有第二个路径分隔符（/）的文件

所以修改你的生成器如果条件忽略那些路径

# delphi - Delphi - 刷新外壳或文件列表

> ID：12017612
> 
> 赞同：1
> 
> 时间：2012-08-18T09:53:33.123
> 
> 标签：delphi, shell

我的 Delphi 应用程序经常删除文件等，如果用户正在浏览该目录，我想让它自动刷新。

例如，我的电脑应该自动刷新。

我用谷歌搜索但没有找到任何东西。我不知道该怎么做：/

为任何建议干杯！阿德里安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:48:31.057

删除文件时调用[SHChangeNotify()函数。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762118%28v=vs.85%29.aspx)这将通知外壳程序，而外壳程序又将通知它的观察者，例如 Windows 文件资源管理器。TortoiseSVN 就是这样做的（[这里有证据](http://sourceforge.net/tracker/?func=detail&aid=529287&group_id=48103&atid=451975)）。

另见：

1.  [如何刷新 Windows 资源管理器](https://stackoverflow.com/questions/4940603)
2.  [如何以编程方式刷新 Windows 资源管理器？](https://stackoverflow.com/questions/647316)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T06:18:30.427

也可以使用 TShellChangeNotifier 组件来处理外壳更改。

# javascript - Javascript。在 SQL 中加入 2 组对象的最佳方法？

> ID：12017616
> 
> 赞同：4
> 
> 时间：2012-08-18T09:54:14.907
> 
> 标签：javascript, underscore.js

假设我们有 2 组对象

```
set1 = [{'id':'1', 'x':'1', 'y':'2'}, {'id':'2', 'x':'2', 'y':'2'}]
set2 = [{'id':'1', 'z':'1'}, {'id':'2', 'z':'2'}] 
```

我们想要：

```
set3 = set1.join(set2).on('id'); 

>> set3 
[{'id':'1', 'x':'1', 'y':'2', 'z':'1'},{'id':'2', 'x':'2', 'y':'2', 'z':'2'}] 
```

实现此功能的正确工具是什么？可以[`underscore`](http://documentcloud.github.com/underscore/)帮到这里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T10:01:20.797

**选项1**，纯js

我建议您将每个列表转换为 id 集合，例如

```
{1: {x: 1, y: 1}, 2: {x: 2, y: 2}} 
```

然后对一个（或两个）集合运行 a 并使用这两个集合的属性创建一个新字典 - 后一点取决于您是在寻找内部联接还是外部联接。这应该会导致大致线性的运行时，字典的 javascript 实现非常有效。

**选项 2**，下划线，对于密集的 id 集，使用 _.zip()

如果`id`'s 相对密集，并且您希望外连接或提前知道 id 集完全相同，另一种选择是将数据填充到三个数组中 - 每个属性一个数组，然后使用下划线zip() 方法。

**选项 3**，下划线，使用 _.groupBy()

使用自定义比较方法在您拥有的列表上运行 _.groupBy() 的另一种可能性，这也将允许加入多个键。但是，将需要一些简单的后处理，因为直接结果将是形式的字典

```
{1: [{'id':'1', 'x':'1', 'y':'2'}, {'id':'1', 'z':'1'}],
 2: [{'id':'2', 'x':'2', 'y':'2'}, {'id':'2', 'z':'2'}]} 
```

后一种情况下的内部连接行为可以通过过滤掉结果字典中没有列表中最大项目数的项目（在示例中为 2）来实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-18T03:37:56.690

选项 4：[Alasql](http://github.com/agershun/alasql)库

Alasql 可以“SQL 方式”连接两个表。：

```
var set1 = [{'id':'1', 'x':'1', 'y':'2'}, {'id':'2', 'x':'2', 'y':'2'}];
var set2 = [{'id':'1', 'z':'1'}, {'id':'2', 'z':'2'}];

var res = alasql('SELECT * FROM ? set1 JOIN ? set2 USING id',[set1, set2]); 
```

它准确地提供了您需要的东西：

```
[{"z":"1","id":"1","x":"1","y":"2"},{"z":"2","id":"2","x":"2","y":"2"}] 
```

[在 jsFiddle](http://jsfiddle.net/agershun/kjvz98cj/1/)试试这个例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-15T14:56:29.060

使用 Ramda 的另一种选择：

```
const r = require('ramda')
const outerJoin = r.curry(function(relationName, set1, keyName1, set2, keyName2) {
    const processRecord = function(record1) {
        const key1 = record1[keyName1]
        const findIn2 = r.find(r.propEq(keyName2, key1))
        const record2 = findIn2(set2)
        record1[relationName] = record2
        return record1
    }
    return r.map(processRecord, set1)
}) 
```

假设

```
 //set1 is an array of objects
  set1 : [{}]
  //set1 has a property for the key of type T
  set1[keyName1] : T
  //set2 is an array of objects
  set2 : [{}]
  //set2 has a property for the key which is also of type T
  set2[keyName2] : T 
```

输出

```
 [{
     ...set1 members...
     , relationName: ...set2 members...
  }] 
```

我想更好的输出可能是（应该不难到达这里）：

```
 [{
     , leftObj:...set1 members...
     , rightObj: ...set2 members...
  }] 
```

并添加对内部连接的支持。但是我正在替换一些糟糕的代码并且需要复制对象层次结构。

# android - 由于缓存分区大小，Google Play 将我的应用排除在外

> ID：12017618
> 
> 赞同：1
> 
> 时间：2012-08-18T09:54:55.313
> 
> 标签：android, google-play

我已将我的应用程序上传到[Google Play](https://play.google.com/store/apps/details?id=com.tfg)，现在我意识到它已针对 HTC Wildfire S 等某些设备进行了过滤。
在网络上搜索，我发现这可能是由于缓存分区的大小。我的应用程序是 42MB，我认为 Wildfire S 的缓存分区是 35MB，因此根据 Google Play 不兼容。

实际上，该应用程序并非不兼容，因为我在 Wildfire S 中手动安装了它并且工作正常。

> 所以，我的问题是，我怎样才能让我的应用在 Google Play 中与这些设备兼容？是否有任何解决方法，例如将我的应用程序划分为扩展文件或类似的东西？

# web-services - 正确的 HTTP 标头以重定向到贝宝以完成订单

> ID：12017620
> 
> 赞同：0
> 
> 时间：2012-08-18T09:55:03.113
> 
> 标签：web-services, http, paypal, http-headers

将用户重定向到贝宝以完成付款时使用的正确 http 标头是什么？

请求是这样的：

1.  在我的网站上使用订单
2.  我带他们完成订单流程
3.  他们被重定向到贝宝以授权和支付商品

第 3 点中用于重定向的正确标头是什么？

3xx 标头代码似乎都不合适

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T03:17:37.363

302 非常适合这个。事实上，这与 PayPal 使用某些 API 将用户发送回您的站点的方式相同

您的另一个选择是在 HTML 的头部使用 META 标记

EG： 5 秒后重定向到[http://example.com/ ：](http://example.com/)

`<meta http-equiv="refresh" content="5;URL='http://example.com/'">`

或使用等效的刷新标头：

[http://en.wikipedia.org/wiki/URL_redirection#Refresh_Meta_tag_and_HTTP_refresh_header](http://en.wikipedia.org/wiki/URL_redirection#Refresh_Meta_tag_and_HTTP_refresh_header)

# python - 使用 Sphinx 格式化多行文档字符串

> ID：12017622
> 
> 赞同：3
> 
> 时间：2012-08-18T09:55:18.147
> 
> 标签：python, python-sphinx, autodoc

使用[sphinx autodoc](https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html)，有没有办法以特殊方式格式化多行文档字符串的第一行？

考虑：

```
def whatever():
    """This function does something.

    This really should have a full function definition, but I am too lazy.
    Some more stuff.
    """ 
```

生成的html代码：

```
<dd>
<p>This function does something.</p>
<p>This really should have a full function definition, but I am too lazy. Some more stuff.</p>
</dd> 
```

我希望它是这样的：

```
<dd>
<p class='headline'>This function does something.</p>
<p>This really should have a full function definition, but I am too lazy. Some more stuff.</p>
</dd> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T14:59:24.267

据我所知，autodoc 并没有为您提供很多标记文档字符串的能力，尤其是在向文档字符串添加自定义样式方面。我能想到有两种方法可以解决这个问题：1）将第一行`**This function does something**`换成粗体。2) 编写一个自定义 sphinx 扩展，在 autodoc 解析文档字符串之前拦截它们，并相应地处理它们。

（我最终走上了选项 2 的道路，以便在我的文档字符串中包含部分标题......这是该扩展名的[来源](https://bitbucket.org/ecollins/cloud_sptheme/src/default/cloud_sptheme/ext/autodoc_sections.py)。它不能满足您的需求，但它可能作为起点很有用，特别是该`_remove_oneline`函数对模块文档字符串的作用）。

# asp.net-membership - VS2012中Microsoft.AspNet.Membership.OpenAuth的源代码？

> ID：12017625
> 
> 赞同：0
> 
> 时间：2012-08-18T09:55:58.883
> 
> 标签：asp.net-membership, oauth-2.0

我在哪里可以找到 Visual Studio 2012 默认 Web 项目应用程序中的 Microsoft.AspNet.Membership.OpenAuth 的源代码？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:58:36.840

这是你要找的吗？

[https://github.com/ASP-NET-MVC/aspnetwebstack/tree/master/src/Microsoft.Web.WebPages.OAuth](https://github.com/ASP-NET-MVC/aspnetwebstack/tree/master/src/Microsoft.Web.WebPages.OAuth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:36:49.050

源代码不公开。您可以在反射器中打开 dll 并查看代码 以下帖子有更多关于包的描述以及如何与会员集成

[http://blogs.msdn.com/b/webdev/archive/2012/09/12/integrate-openauth-openid-with-your-existing-asp-net-application-using-universal-providers.aspx](http://blogs.msdn.com/b/webdev/archive/2012/09/12/integrate-openauth-openid-with-your-existing-asp-net-application-using-universal-providers.aspx)

# linux - 虚拟示波器的模拟输入

> ID：12017627
> 
> 赞同：0
> 
> 时间：2012-08-18T09:56:03.980
> 
> 标签：linux, ubuntu, signals, qemu, oscilloscope

我正在设计一个带有 Qt 或 EFL 的虚拟示波器，用于在 OS Ubuntu 的 Qemu（用于 mini2440）中运行。应该有4个模拟输入/信号，然后以确定的频率进行采样，然后进行一些其他计算。有没有人可以给我一些关于如何生成模拟输入/信号供示波器处理的提示或灵感？非常感谢！

真挚地。

奥斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:48:42.637

用于自制示波器的典型[模数转换解决方案是使用声卡的输入。](http://en.wikipedia.org/wiki/Analog-to-digital_converter)根据您的要求，您甚至可以添加一两张额外的卡以提供更多输入。

大多数声卡将以 44.1、48 或 96 kHz 进行采样，因此这种采样率仅适用于音频应用。另一方面，您在大多数计算机上至少有两个免费频道 - 如果您需要更多频道，您可以随时使用`usbaudio`设备。

您可能想看看使用这种方法的[xoscope 。](http://xoscope.sourceforge.net)

如果您需要高于该采样率，那么您正在寻找实验室级[数据采集](http://en.wikipedia.org/wiki/Data_acquisition)设备。有一些相对便宜的解决方案，但这里的关键词是*相对*- 它们通常相当昂贵，至少对于个人使用而言。

# c# - 时间：2019-05-10 标签：c#agsxmpp documentation

> ID：12017629
> 
> 赞同：-1
> 
> 时间：2012-08-18T09:56:35.467
> 
> 标签：c#, winforms, .net-3.5, agsxmpp, instantmessenger

是否存在任何 agsxmpp 文档？我找不到任何东西。我正在制作 IM，我需要知道以下内容：

*   我如何获取联系人列表（包含 - 当前可用性、昵称、标识符（user@site））
*   不确定此事件是否有效（需要更改可用性）：`static void xmpp_OnPresence(object sender, Presence pres)`
*   是传入消息中的任何时间戳或日期时间值

我发现这是用于获取联系人：

```
 public void RequestRoster()
    {      
        RosterIq iq = new RosterIq(IqType.get);
        xmpp.IqGrabber.SendIq(iq, new IqCB(OnRosterResult), null);
    }

    private void OnRosterResult(object sender, IQ iq, object data)
    {         
        Roster r = iq.Query as Roster;
        if (r != null)
        {
            foreach (RosterItem i in r.GetRoster())
            {
                Console.WriteLine(i.Name);
            }
        }
    } 
```

但是并不是所有的属性（我还需要可用性、标识符）或者是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:47:02.203

agsXMPP 在登录时自动请求名册。您只需 sibscrobe 到 OnRosterItem 事件即可获取所有联系人。
agsXMPP 还附带了许多示例。因此，请查看示例代码。

# iphone - cocos2d 和 box2d ：精灵触摸不正确

> ID：12017631
> 
> 赞同：6
> 
> 时间：2012-08-18T09:57:13.567
> 
> 标签：iphone, cocos2d-iphone, touch, box2d-iphone, ccsprite

我添加了 7 个精灵并给了它们标签和 zorder.. 但我无法触摸第三个对象，最后只剩下一个对象然后我触摸到它.. 但是当我添加 6 个精灵时，我会得到正确触摸。所有精灵位置都相同，但 zorder 不同..我不明白有什么问题..我已经使用查询回调类来联系..在这里我添加了一些我的代码..

添加精灵的代码..

```
 zIndex = 7;

            for(int i = 0; i<zIndex; i++)
            {
                CCSprite *paddle = [CCSprite spriteWithFile:[NSString stringWithFormat:@"%d.png",i+1]];
                paddle.position = ccp(winSize.width/2, winSize.height/2);
                [self addChild:paddle z:zIndex-i tag:i+1];
                [mutArrSprites addObject:paddle];
                NSLog(@"Z = %d tag = %d ",zIndex-i , i+1);
            }

            for(CCSprite *sprite in mutArrSprites)
            {
                [self addUserDataToNode:sprite];
            } 
```

在 touchbegin 方法中

```
if (_mouseJoint != NULL) return;

UITouch *myTouch = [touches anyObject];
CGPoint location = [myTouch locationInView:[myTouch view]];
location = [[CCDirector sharedDirector] convertToGL:location];
b2Vec2 locationWorld = b2Vec2(location.x/PTM_RATIO, location.y/PTM_RATIO);

// Make a small box.
b2AABB aabb;
b2Vec2 d;
d.Set(0.001f, 0.001f);
aabb.lowerBound = locationWorld - d;
aabb.upperBound = locationWorld + d;

// Query the world for overlapping shapes.
QueryCallback callback(locationWorld);
_world->QueryAABB(&callback, aabb);         

b2Body *body = callback.m_object;
if (body)
{
    //pick the body
    CCSprite *sprite = (CCSprite *)body->GetUserData();  
    [self reorderChild:sprite z:zIndex++];
    b2MouseJointDef md;
    md.bodyA = _groundBody;
    md.bodyB = body;
    md.target = locationWorld;
    md.collideConnected = true;
    md.maxForce = 1000.0f * body->GetMass();

    _mouseJoint = (b2MouseJoint *)_world->CreateJoint(&md);
    body->SetAwake(true);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:19:27.057

使用以下方法根据 z 顺序获取触摸次数最多的对象

```
-(b2Body *) getTopTouchBody:(b2Vec2)location{

    b2Body *touchObject;
    int zOrder = 0;
    for (b2Body* b = _world->GetBodyList(); b; b = b->GetNext())
    {
        b2Fixture *f = b->GetFixtureList();
        BOOL isinsize = f->TestPoint(location);
        CCSprite *sprite = (CCSprite *)b->GetUserData();
        if (isinsize) {
            if (sprite.zOrder > zOrder) {
                zOrder = sprite.zOrder;
                touchObject = b;
            }
        }
    }
    return  touchObject;
} 
```

# jquery - jquery检查表单字段长度

> ID：12017633
> 
> 赞同：0
> 
> 时间：2012-08-18T09:57:38.620
> 
> 标签：jquery, validation

我有以下表单，我想确保用户在提交表单之前输入至少两个字符。所以我禁用了提交按钮：

```
<form action="/search" method="post" id="search_form" name="searchform">
<input id="search_box" type="text" class="inp" placeholder="Search" />
<input type="submit" id="search_button" disabled class="btn" value="Search">
</form> 
```

我正在尝试以下 Jquery 来捕获按键但没有发生：

```
$("#search_box").keypress(function() {
if($(this).length > 1) {
     $('#search_button').removeAttr('disabled');
}
}); 
```

我设置了一个小提琴来展示：http: [//jsfiddle.net/HZvSF/3/](http://jsfiddle.net/HZvSF/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T10:00:27.253

你需要得到`val()`你的文本框：

```
$("#search_box").keypress(function() {
if($(this).val().length > 1) {
     $('#search_button').removeAttr('disabled');
}
}); 
```

**编辑**

我刚刚看到这个库是小提琴中的 MooTools，它在这里工作：http: [//jsfiddle.net/HZvSF/17/](http://jsfiddle.net/HZvSF/17/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:02:05.037

我认为这是绑定的问题。匿名函数“this”内部不是指je JQuery对象，而是我认为的窗口。

```
$("#search_box").keypress(function(event) {
if($(event.target).val().length > 1) {
     $('#search_button').removeAttr('disabled');
}
}); 
```

# spreadsheet - 如何将电子表格中的数据链接到谷歌网站

> ID：12017634
> 
> 赞同：4
> 
> 时间：2012-08-18T09:57:55.883
> 
> 标签：spreadsheet, google-sites

我想将电子表格中的数据链接到我的谷歌网站，因为当我在电子表格中编辑时，网站上的数据会自动更改为电子表格中的数据。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T05:19:50.743

有多种方法可以做到这一点。

最简单的是使用“图表”。*只需通过插入-> 图表-> 选择您的电子表格*来插入它，就像您做其他任何事情一样。根据您拥有的数据，实际上只有几个选项可以显示它。但是您可以选择哪个工作表和单元格范围。如果您不需要对它做任何疯狂的事情，那么这应该没问题。

或者，您可以制作一个小的应用程序脚本，它将在网格中显示数据。然后你可以完全控制它......

就像是：

```
function doGet(e){   
var app = UiApp.createApplication();
var ss = SpreadsheetApp.openById(e.parameter.sheetid);
var sheet = ss.getSheetByName("YOUR SHEET NAME");
var range = sheet.getDataRange();
var dataRange =  range.getValues();
var grid = app.createGrid(range.getNumRows(), range.getNumColumns());
for (var row = 0; row < dataRange.length; row++) {
  for (var col = 0; col < dataRange[0].length; col++) {//1 so as to skip the header
    grid.setText(row, col, dataRange[row][col])
  }
}
 app.add(grid); 
 return app;  
} 
```

注意：SheetID（以及其他任何内容，如工作表名称）作为 html 查询参数传入，您必须在添加小工具后在页面的 HTML 编辑中手动提供该参数。这可以在电子表格的属性中找到（文件->属性）

# scheme - 方案 R6RS 中的选择器

> ID：12017638
> 
> 赞同：1
> 
> 时间：2012-08-18T09:58:28.450
> 
> 标签：scheme, r6rs

我在看一本旧书

> 简单的方案：介绍计算机科学

你可以在[这里](http://www.eecs.berkeley.edu/~bh/ssch5/words.html#ft2)找到它。

第五部分介绍了“选择器”，操作符如下：

```
(first 'abcd) ;-> A
(butfirst 'abcd) ;-> BCD 
```

等等..

R6RS中是否存在类似的东西？（因为未定义此运算符）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T10:08:44.683

根据我的评论，这可能会非常困难。

另一个方面是，Simply Scheme 将符号视为“字符串”。

使用该信息，您可以编写以下内容：

```
(define (first s)
  (string->symbol (string (car (string->list (symbol->string s))))))

(define (butfirst s)
  (string->symbol (apply string (cdr (string->list (symbol->string s)))))) 
```

另请注意，符号在 R6RS 中区分大小写，因此结果将与传递给过程的大小写相同。

# php - 如何使用 CSS 水平对齐

> ID：12017639
> 
> 赞同：0
> 
> 时间：2012-08-18T09:58:34.290
> 
> 标签：php, jquery, css

**PHP 代码**

```
<?php

    defined('_JEXEC') or die('Restricted access');
    $document = &JFactory::getDocument();
    $document->addScript("components/com_jea/views/property/tmpl/js/jquery-1.8.0.min.js");
    $document->addScript("components/com_jea/views/property/tmpl/lib/jquery.ad-gallery.js");
    $document->addScript("components/com_jea/views/property/tmpl/lib/inside.js");
    $document->addStyleSheet("components/com_jea/views/property/tmpl/lib/jquery.ad-gallery.css");
    $document->addStyleSheet("components/com_jea/views/property/tmpl/lib/inside.css");  
    if (!is_array($this->row->images)) {
        return ;
    }

    $mainImage = array_shift($this->row->images);

    JHTML::_('behavior.modal', 'a.jea_modal', array('onOpen' => '\onOpenSqueezebox'));
    ?>

     <body>
      <div id="container">

        <div id="gallery" class="ad-gallery">
          <div class="ad-image-wrapper">
          </div>
          <div class="ad-controls">
          </div>
          <div class="ad-nav">
            <div class="ad-thumbs">
              <ul class="ad-thumb-list">
                <li>
            <a href="<?php echo $mainImage->URL ?>" >
                <img src="<?php echo $mainImage->mediumURL ?>" width="100px" height="50px" alt="<?php echo $mainImage->title ?>" title="<?php echo $mainImage->description ?>"  />
            </a>
        </li>

            <li class="image<?php echo $num; ?>">
             <?php if( !empty($this->row->images)): ?>
                <?php foreach($this->row->images as $num => $image) : ?>
                    <a href="<?php echo $image->URL ?>" >
                        <img  src="<?php echo $image->mediumURL ?>" alt="<?php echo $image->title ?>" width="100px" height="50px" title="<?php echo $image->description ?>"  />
                    </a>
                <?php endforeach ?>
            </li>
        <?php endif ?>
           </ul>
            </div>
          </div>
        </div>

    </body> 
```

**CSS 代码**

```
 * {
    font-family: "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Verdana, Arial, sans-serif;
    color: #333;

  }
  select, input, textarea {
    font-size: 1em;
  }
  #container {
   line-height:0px !important;
    border:1px solid #DEE5EB;
  }

  h2 {
    margin-top: 1.2em;
    margin-bottom: 0;
    padding: 0;
    border-bottom: 1px dotted #dedede;
  }
  h3 {
    margin-top: 1.2em;
    margin-bottom: 0;
    padding: 0;
  }
  .example {
    border: 1px solid #CCC;
    background: #f2f2f2;
    padding: 10px;
  }
  ul {
    list-style-image:url(list-style.gif);
  }
  pre {
    font-family: "Lucida Console", "Courier New", Verdana;
    border: 1px solid #CCC;
    background: #f2f2f2;
    padding: 10px;
  }
  code {
    font-family: "Lucida Console", "Courier New", Verdana;
    margin: 0;
    padding: 0;
  }

  #gallery {
    padding: 30px;
    background: #F8FAFB;
  } 
```

使用上面的代码输出[是这样的](http://bluewingholidays.com/index.php?option=com_jea&view=property&id=2%3amodern-03-bedroom-beach-house-hikkaduwa#ad-image-3)

如何使用 CSS 水平对齐

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T10:15:29.703

这就是为什么：

![开发者工具截图](../Images/be2de99a0fd10dff245921eff97e2164.png)

[链接到全尺寸图像](https://i.stack.imgur.com/GEG8d.png)

您的`<a>`标签在同一个`<li>`标​​签内，这就是它们看起来像这样的原因。放入`<li class="image<?php echo $num; ?>">`你的`foreach`循环中。

```
<?php if(!empty($this->row->images)): ?>
    <?php foreach($this->row->images as $num => $image): ?>
        <li class="image<?php echo $num; ?>">
            <a href="<?php echo $image->URL ?>" >
                <img  src="<?php echo $image->mediumURL ?>" alt="<?php echo $image->title ?>" width="100px" height="50px" title="<?php echo $image->description ?>"  />
            </a>
        </li>
    <?php endforeach ?>
<?php endif ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:32:29.970

因为`ul`类`ad-thumb-list`使宽度更大，仅此而已。

# php - 你如何强制 PEAR 自动下载 alpha/beta 依赖项？

> ID：12017641
> 
> 赞同：1
> 
> 时间：2012-08-18T09:59:07.600
> 
> 标签：php, pear

从 PEAR 安装包时，如果包处于 alpha 或 beta 模式，可以在包名后添加后缀来安装相应的版本；例如，运行

```
sudo pear install openid 
```

失败，但是

```
sudo pear install openid-alpha 
```

作品。

但是依赖关系呢？在上面的例子中，PEAR 中的 OpenID 依赖于其他 4 个也在 alpha/beta 中的包。

有没有办法让 PEAR 加载 alpha/beta 依赖项而无需手动安装每个依赖项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T07:51:51.557

```
pear config-set preferred_state alpha 
```

# java - java : 为什么上面的条件没有被执行？

> ID：12017642
> 
> 赞同：-4
> 
> 时间：2012-08-18T09:59:15.313
> 
> 标签：java

嗨，下面是我的程序，你能告诉我为什么第一个条件没有被执行吗？

```
 package com;

import java.util.ArrayList;
import java.util.List;

public class Test {

    public static void main(String args[]) {

        List<String> values = null;

        String Id = "1234";

        if (values != null && Id != null && values.size() > 1
                && !values.contains(Id)) {
// This is never executed
            System.out.println("Throw Exception");

        } else {
// This is always called
            System.out.println("Fine");

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:00:11.443

你总是在这种`else`情况下结束，因为`values`是`null`和你的`if`条件需要`values != null`。

也许您应该看一下基本的[布尔代数](http://en.wikipedia.org/wiki/Boolean_algebra)，以了解为什么这种`if`情况不适`true`用于您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:02:03.510

嗯：

```
List<String> values = null; 
```

和

```
if (values != null && ... 
```

您希望`if`分支上的代码如何执行？

我想你的意思是：

```
 if (values != null && Id != null && values.size() > 1
            && !values.contains(Id)) {
        System.out.println("Fine");
    } else {
        System.out.println("Throw Exception");
    } 
```

这样，如果所有检查都成立，那么您就“很好”，否则就会出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T10:02:12.070

值是`NULL`。所以只有`ELSE`部分会被执行。那么这里的问题实际上是什么？

我认为这实际上是您想要的

包com；

导入 java.util.ArrayList；导入 java.util.List；

```
public class Test {

    public static void main(String args[]) {

        List<String> values = null;
        String Id = "1234";

        // Some modification to values 

        if (values == null || Id == null || (values.size() > 1
                && !values.contains(Id))) {
            System.out.println("Throw Exception");
        } else {
            System.out.println("Fine");
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-19T17:14:46.547

在java中我们使用：

```
String test = "";
String test2 = "";

if(test.equal(test2)){
//something
}
else{
//something
} 
```

在 C# 中，我们使用：

```
String test = "";
String test2 = "";

if(test == test2){
//something
}
else{
//something
} 
```

比较字符串..希望这会有所帮助。:D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T10:13:25.303

如果要执行条件，则根据条件创建数据

```
 List<String> values = new ArrayList<String>();
    values.add("12345");
    values.add("12345"); 
```

-1 表示在 SO 上发布之前没有付出足够的努力

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-18T10:08:22.407

由于 values 为 null 并且您正在检查 values 不是 null 那么它将始终执行 else 块

```
List<String> values = null;

                String Id = "1234";

                if (values != null && Id != null && !values.contains(Id)) {
        // This is never executed
                    System.out.println("Throw Exception");

                } else {
        // This is always called
                    System.out.println("Fine");

                } 
```

# android - 在 android 上使用 phonegap 访问服务器（使用 dot net）并显示数据

> ID：12017644
> 
> 赞同：0
> 
> 时间：2012-08-18T09:59:18.497
> 
> 标签：android, jquery, .net, cordova

我是使用电话差距进行应用程序开发的新手，我对服务器端编码也不太了解。我更喜欢制作游戏，所以如果我的问题是基本的或者答案是众所周知的，那么请多多包涵。我已经准备好了一个 web 应用程序，它使用 aspx 页面从服务器获取数据并显示它。在 iOS 上使用 phonegap，可以显示这些数据。但是，当我在 android 中使用相同的东西时，它不起作用。任何帮助表示赞赏。我用来制作 jQuery 来获取页面的 index.html 是

```
<!DOCTYPE html>
<html>
<head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name = "format-detection" content = "telephone=no"/>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width;" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Hello Cordova</title>
</head>
<body>
<script type="text/javascript"  src="http://code.jquery.com/jquery-1.6.4.min.js">   </script>
<script type="text/javascript"  src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="cordova-2.0.0.js"></script>
        <script type="text/javascript">
                $("body").load('http://203.115.112.5/f1/xhtml/daywiselk.aspx?comicid=0');
                </script>
</body> 
```

同样，我不了解 jQuery，但我从另一个关于堆栈溢出的问题中得到了这个，但这适用于 iOS。但是当我尝试在 android 中加载相同的页面时，屏幕上没有显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:57:52.437

您好，检查您在清单文件中的权限，将您的 js 文件保存在单独的文件夹中并提供该路径。它将加载您的网址。

# eclipse - Eclipse Juno SVN 问题

> ID：12017651
> 
> 赞同：2
> 
> 时间：2012-08-18T10:00:32.957
> 
> 标签：eclipse, svn

我在 Mac OS X 10.6 上使用 Eclipse Juno v4.2.0，所有 Polarion Subversive SVN 连接器和 Subversive SVN 团队提供程序 v1.0.0|20120601-1700。

SVN 存储库只能通过 VPN 访问。我已经使用“在所选资源的子项中查找项目”选项检查了资源。每次我启动 Eclipse 时，我都必须连接到 VPN。否则 SVN 会说，存储库位置已更改，我必须重新定位我的工作副本，否则它将断开连接。这真的很烦人，因为在 Helios 和 Indigo 中这从未发生过，我不需要连接到 VPN。有没有我错过的选项来阻止 Eclipse 在启动时检查位置？

# windows - 开发访问 Windows 的 Go 应用程序

> ID：12017655
> 
> 赞同：-1
> 
> 时间：2012-08-18T10:01:32.030
> 
> 标签：windows, go

我正在下载 MinGW 以在 Windows 中编译 Go，但是，是否需要任何 SDK 来开发访问 Windows 系统调用的 Go 应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T10:39:00.573

不需要。除了标准库和 Windows 编译器之外，您不需要任何其他东西来在 Windows 上运行 Go 代码。包括系统调用。

查看[`syscall`](http://golang.org/pkg/syscall/)Go 标准库中的包。

# javascript - JQuery 在多个 div 上显示/隐藏

> ID：12017656
> 
> 赞同：2
> 
> 时间：2012-08-18T10:01:57.860
> 
> 标签：javascript, jquery, html, css, show-hide

我能够获得一些简单的代码来工作，允许我为每个操作使用不同的按钮显示/隐藏，但是，我有六个不同的 div，我也想应用此代码，并且一次只允许出现一个，并且如果显示一个隐藏它并显示新的。它们将位于我页面的不同位置。

我知道我可以为每个 DIV 编写单独的代码，但我确信有一种更简单的方法可以做到这一点。

我尝试了几种不同的方法，但它只是变得混乱。谢谢。

这是JS：

```
$(document).ready(function() {

    $(".slidingDiv").hide();
    $(".hide,.show").show();

    $('.show').click(function() {
        $(".slidingDiv").slideToggle();
        $(".show").hide();
    });

    $('.hide').click(function() {
        $(".slidingDiv").slideToggle();
        $(".show").show();
    });

}); 
```

这是CSS：

```
.slidingDiv {
    height:300px;
    background-color: #99CCFF;
    padding:20px;
    margin-top:10px;
    border-bottom:5px solid #3399FF;
} 
```

这是HTML：

```
<a href="#" class="show">Show</a>
<div class="slidingDiv">
    Fill this space with really interesting content. <a href="#" class="hide">Hide</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:07:42.277

试试这个 -[**演示**](http://jsfiddle.net/qKWC8/1/)

```
$(document).ready(function() {
    $('.show').click(function() { $(this).next().slideToggle(); });
    $('.hide').click(function() { $(this).parent().slideUp(); });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:21:10.933

```
$(function() {
    $(".slidingDiv").hide();
    $(".hide, .show").show().on('click', function(e) {
        var elm = $(e.target).is('.show') ? $(e.target) : $(e.target).parent().prev('.show');
        elm.toggle().next(".slidingDiv").slideToggle()
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/BxBbg/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T10:09:34.160

```
$(document).ready(function() {

    $(".slidingDiv").hide();
    $(".hide,.show").show();

    $('.show').click(function() {
        $(this).next(".slidingDiv").slideToggle();
        $(this).hide();
    });

    $('.hide').click(function() {
        $(this).parent().slideToggle();
        $(this).parent().prev(".show").show();
    });

}); 
```

一些[演示](http://jsfiddle.net/RrMzu/)

# objective-c - 如何在iOS（cocos2d）中异步捕获屏幕截图？

> ID：12017661
> 
> 赞同：1
> 
> 时间：2012-08-18T10:02:46.887
> 
> 标签：objective-c, ios, cocos2d-iphone

我有一个从这里（stackoverflow）获得的工作截图代码。问题是我不能异步地做到这一点。我的屏幕全黑。

这可能吗？如果是，我将如何做？

这是我正在使用的代码

```
CGSize winSize = [CCDirector sharedDirector].winSize;
int screenScale = [UIScreen mainScreen].scale;
int width = winSize.width * screenScale;
int height = winSize.height * screenScale;

NSInteger myDataLength = width * height * 4;

// allocate array and read pixels into it.
GLubyte *buffer = (GLubyte *) malloc(myDataLength);
glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

// gl renders "upside down" so swap top to bottom into new array.
// there's gotta be a better way, but this works.
GLubyte *buffer2 = (GLubyte *) malloc(myDataLength);
for(int y = 0; y < height; y++)
{
    for(int x = 0; x < width * 4; x++)
    {
        buffer2[(height-(1*screenScale) - y) * width * 4 + x] = buffer[y * 4 * width + x];
    }
}

// make data provider with data.
CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer2, myDataLength, NULL);

// prep the ingredients
int bitsPerComponent = 8;
int bitsPerPixel = 32;
int bytesPerRow = 4 * width;
CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

// make the cgimage
CGImageRef imageRef = CGImageCreate(width, height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

// then make the uiimage from that
UIImage *myImage = [UIImage imageWithCGImage:imageRef]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T15:52:54.733

以下是您可以尝试在单独的线程上做一些事情的建议，但您仍然必须从主线程获取 OpenGL 像素。我的建议是将像素保存到主线程上的缓冲区，然后安排后台任务以使用该缓冲区创建 UIImage。

```
- (void) takeScreenshot 
{
CGSize winSize = [CCDirector sharedDirector].winSize;
int screenScale = [UIScreen mainScreen].scale;
int width = winSize.width * screenScale;
int height = winSize.height * screenScale;

NSInteger myDataLength = width * height * 4;

// allocate array and read pixels into it.
buffer = (GLubyte *) malloc(myDataLength); // NOW PART OF THE CLASS DEFINITION
glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
[self performSelectorInBackground:@selector(finishScreenshot) withObject:nil];
} 
```

除了将缓冲区数组保存为类变量，您实际上可以在 performSelectorInBackground 调用中将缓冲区作为 NSData 发送，然后在 finishScreenshot 上添加参数。

```
-(void)finishScreenshot{

CGSize winSize = [CCDirector sharedDirector].winSize;
int screenScale = [UIScreen mainScreen].scale;
int width = winSize.width * screenScale;
int height = winSize.height * screenScale;
// gl renders "upside down" so swap top to bottom into new array.
// there's gotta be a better way, but this works.
GLubyte *buffer2 = (GLubyte *) malloc(myDataLength);
for(int y = 0; y < height; y++)
{
    for(int x = 0; x < width * 4; x++)
    {
        buffer2[(height-(1*screenScale) - y) * width * 4 + x] = buffer[y * 4 * width + x];
    }
}

// make data provider with data.
CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer2, myDataLength, NULL);

// prep the ingredients
int bitsPerComponent = 8;
int bitsPerPixel = 32;
int bytesPerRow = 4 * width;
CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

// make the cgimage
CGImageRef imageRef = CGImageCreate(width, height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

// then make the uiimage from that
UIImage *myImage = [UIImage imageWithCGImage:imageRef];

} 
```

正如我所说，我不确定这是否可行，但这应该可行。尝试这样做并检查它是否真的值得付出努力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T10:58:18.667

It's not possible.

The OpenGL view can only be modified and accessed from the main thread, so any attempt to grab the OpenGL framebuffer's contents in another thread will fail.

# database - 表关系 - 多个 HABTM 或多个 hasMany

> ID：12017663
> 
> 赞同：0
> 
> 时间：2012-08-18T10:03:07.243
> 
> 标签：database, cakephp, relationship, has-many, has-and-belongs-to-many

我有一张桌子，`files`它属于`post`,或。也许在未来，还会有更多。`article``notion``paragrah`

你建议使用什么关系？多个 HABTM 表或多个列 ( `post_id`, `aticle_id`,...)？

或者也许是两列`parent_alias`和`parent_id`？但是如何在 CakePHP 中轻松使用它呢？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:02:56.423

这种情况可以使用 hasOne 解决

只需在文件表中添加一个类型列（varchar）和一个foregin_key（整数）

并使用 hasOne 关系在您的帖子、文章...模型中绑定此模型

邮寄

```
$hasOne = array('File' => array('foreignKey'=>'foreign_key','conditions'=>array('type'=>'post'))) 
```

在文章中

```
$hasOne = array('File' => array('foreignKey'=>'foreign_key','conditions'=>array('type'=>'article'))) 
```

只需确保在保存关联时更新“类型”列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:02:59.067

我们无法为您选择。这取决于您的数据。

问题是：一个文件可以属于多个帖子吗？

如果是，您将需要一个 HABTM。

如果没有 BelongsTo 就足够了。

# cocoa - Mac 应用程序提交中的错误相关图标

> ID：12017664
> 
> 赞同：1
> 
> 时间：2012-08-18T10:03:09.363
> 
> 标签：cocoa, xcode4, icons, app-store, mac-app-store

提交 Mac 应用程序时出现错误。

![在此处输入图像描述](../Images/51854ca723ee398fe32a7716264f362f.png)

这是我的 info.plist 文件。

![在此处输入图像描述](../Images/46cfa94a0ed902cff0d037489e0ae124.png)

我还在应用程序中添加了 icon@2x.icns (1024x1024) 图标，但它仍然给出了这个错误。
（icon.icns 是 512x512 图标）

请告诉我我错在哪里。你的建议会有很大帮助。
谢谢你。

# android - 在android活动之间传递信息

> ID：12017667
> 
> 赞同：-2
> 
> 时间：2012-08-18T10:03:56.870
> 
> 标签：android, android-activity

> **可能重复：**
> [在 Android 中的活动之间传递数据](https://stackoverflow.com/questions/2965109/passing-data-between-activities-in-android)

我正在尝试将一个字符串从我的主要活动传递给我创建的另一个活动。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:03:56.870

您可能希望将您的信息作为附加信息保存到一个包中。请看下面的代码

这将是您的第一个活动

```
String customerName = "Bob";
Bundle b = new Bundle();
Intent myIntent = new Intent(v.getContext(),work.class);

b.putString("Name", customerName);  
myIntent.putExtras(b);
v.getContext().startActivity(myIntent); 
```

然后要访问其他（第二个）活动中的信息，请参阅下面的代码

```
Bundle b = getIntent().getExtras(); 
String name = b.getString("customerName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:15:48.073

尝试这个

> 第一活动

```
Bundle bundle = new Bundle();
bundle.putString("Your_KEY", "YOUR_STRING_VALUE");

Intent newIntent = new Intent(FirstActivity.this.getApplicationContext(), SecondActivity.class);
newIntent.putExtras(bundle);
startActivityForResult(newIntent, 0); 
```

> 第二活动

```
Bundle bundle = SecondActivity.this.getIntent().getExtras();
String s = bundle.getString("Your_KEY"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T10:29:23.430

在第二个Activity

> 公共静态字符串 myName;
> 
> myName = "米格尔";

当你想在 mainActivity 中获取它时：

```
 String s1;

 s1= secondActivity.myName; 
```

# android - 是否必须指定 minSdkVersion 和 targetSdkVerion

> ID：12017669
> 
> 赞同：0
> 
> 时间：2012-08-18T10:04:06.810
> 
> 标签：android, android-manifest

我的应用程序在galaxy s1、s2 和galaxy TAB 上运行，但我的客户发现它不适用于galaxy s3。通过在线测试，我发现它在 nexus 上也不起作用

在我的清单中指定了

```
 <uses-sdk android:minSdkVersion="10" /> 
```

我试图探索这个问题，我发现我应该在清单中指定

```
 <uses-sdk android:minSdkVersion="integer" 
      android:targetSdkVersion="integer"
      android:maxSdkVersion="integer" /> 
```

请指导我究竟需要做什么才能使其在所有设备上运行！总是感谢帮助*_*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:14:50.920

它是强制性的。它指示安装和运行该应用程序所需的最低 android 版本。如果它不存在，则会导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T10:27:38.657

```
android:minSdkVersion 
```

一个整数，指定应用程序运行所需的最低 API 级别。如果系统的 API Level 低于此属性中指定的值，Android 系统将阻止用户安装应用程序。您应该始终声明此属性。

**注意：**如果您不声明该属性，系统会假定默认值为“1”，表示您的应用程序兼容所有版本的Android。如果您的应用程序不兼容所有版本（例如，它使用 API 级别 3 中引入的 API）并且您没有声明正确的 minSdkVersion，那么当安装在 API 级别低于 3 的系统上时，应用程序将在运行期间崩溃尝试访问不可用的 API 时的运行时。因此，请务必在 minSdkVersion 属性中声明适当的 API 级别。

```
android:targetSdkVersion 
```

此属性通知系统您已针对目标版本进行了测试，并且系统不应启用任何兼容性行为以保持您的应用程序与目标版本的前向兼容性。该应用程序仍然能够在旧版本上运行（低至 minSdkVersion）。

一个整数，指定应用程序所针对的 API 级别。如果未设置，则默认值等于提供给 minSdkVersion 的值。

# tsql - 比较 SQL Server 中范围内的字符串

> ID：12017670
> 
> 赞同：0
> 
> 时间：2012-08-18T10:04:14.907
> 
> 标签：tsql, sql-server-2012

我正在尝试查询一个字符串以匹配数据库中的某个范围。该表有 2 列`FromCode`和`ToCode`.

以下是示例数据（假设表名为`CodeList`）：

```
FromCode    ToCode
IV1 0AA     IV9 9ZZ
IV10 0AA    IV28 9ZZ
IV30 0AA    IV32 9ZZ
IV36 0AA    IV36 9ZZ
IV40 0AA    IV49 9ZZ
IV51 0AA    IV56 9ZZ
IV63 0AA    IV63 9ZZ 
```

所以，如果我运行查询

```
SELECT *
FROM CodeList
WHERE FromCode <= 'IV1 1AB' AND ToCode >= 'IV1 1AB' 
```

它会返回结果

```
IV1 0AA   IV9 9ZZ 
```

哪个是对的。但是，当我运行这个时：

```
SELECT *
FROM CodeList
WHERE FromCode <= 'IV2 1AB' AND ToCode >= 'IV2 1AB' 
```

我回来的结果是

```
IV1 0AA    IV9 9ZZ
IV10 0AA   IV28 9ZZ 
```

所以，对于人类来说，字符串`IV2 2AB`在`IV1 0AA - IV9 9ZZ`not之内`IV10 0AA - IV28 9ZZ`。

如果有人可以提出更好的方法来搜索数据，将不胜感激。另外，我运行它的引擎是 SQL Server 2012。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:38:15.497

```
SELECT *
FROM CodeList
WHERE Cast(Substring(Replace(FromCode,' ',''),3,Len(Replace(FromCode,' ',''))-4) as int) <= Cast(Substring(Replace('IV2 1AB',' ',''),3,Len(Replace('IV2 1AB',' ',''))-4) as int)
 AND Cast(Substring(Replace(ToCode,' ',''),3,Len(Replace(ToCode,' ',''))-4) as int) >= Cast(Substring(Replace('IV2 1AB',' ',''),3,Len(Replace('IV2 1AB',' ',''))-4) as int) 
```

将其设置在函数中以使使用更容易

# iphone - 如何正确使用“sendSubviewToBack”方法？

> ID：12017675
> 
> 赞同：8
> 
> 时间：2012-08-18T10:06:03.623
> 
> 标签：iphone, objective-c, ios, uiview, uiviewcontroller

我已经实现了滑动菜单，但我想要与 facebook 完全一样的滑动效果。我在stackoverflow上看到了以下帖子：

[iphone facebook侧边菜单使用objective c](https://stackoverflow.com/questions/7991034/iphone-facebook-side-menu-using-objective-c)

我想实施 greenisus 给出的解决方案（投票 15 次），但我在实施时遇到了麻烦，Bot 在对他的回答的评论中提出了同样的问题。“@greenisus 我对你如何将菜单放在后面感到困惑？当我这样做时，它只会显示一个黑色的侧面菜单。” 这还没有回答。

## 他的答案供参考的文字是：

这真的很简单。首先，您需要创建一个位于可见控制器下方的视图控制器。您可以像这样将该视图发送到后面：

```
[self.view sendSubviewToBack:menuViewController.view]; 
```

然后，在导航栏的左侧放置一个菜单按钮，并编写如下处理程序：

```
- (void)menuButtonPressed:(id)sender {
    CGRect destination = self.navigationController.view.frame;
    if (destination.origin.x > 0) {
        destination.origin.x = 0;
    } else {
        destination.origin.x += 254.5;
    }
    [UIView animateWithDuration:0.25 animations:^{
        self.navigationController.view.frame = destination;        
    } completion:^(BOOL finished) {
        self.view.userInteractionEnabled = !(destination.origin.x > 0);
    }];
} 
```

## 这是一般的想法。您可能必须更改代码以反映您的视图层次结构等。

只是想知道我们什么时候必须使用下面的方法，第二种方法很简单，效果很好，但它下面不显示菜单视图。

```
[self.view sendSubviewToBack:menuViewController.view]; 
```

寻找一些指针或解决方案来正确运行上述代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T04:37:27.867

其实你应该知道我们该怎么做。只需将 menuViewController.view 添加为 self.view 的子视图。但这将覆盖navigationController.view，所以你可以只[self.view sendSubviewToBack:menuViewController.view]。当您需要显示/隐藏 menuViewController 时，您需要使用方法 - (void)menuButtonPressed:(id)sender。

在 HomeViewController 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // be careful with the sequence of the code. If you firstly add the contentViewController and then add the 
    // menuViewController you need to [self.view sendSubviewToBack:self.menuViewController.view], else you don't
    // need to use sendSubviewToBack.
    self.menuViewController = [[MenuViewController alloc] init];
    self.contentViewController = [[ContentViewController alloc] init];
    [self.view addSubview:self.menuViewController.view];
    [self.view addSubview:self.contentViewController.view];
} 
```

在 ContentViewController 中：

```
- (IBAction)showMenu:(id)sender
{
    CGRect destination = self.view.frame;
    if (destination.origin.x > 0) {
        destination.origin.x = 0;
    } else {
        destination.origin.x += 254.5;
    }
    [UIView animateWithDuration:0.25 animations:^{
        self.view.frame = destination;        
    } completion:^(BOOL finished) {
        //self.view.userInteractionEnabled = !(destination.origin.x > 0);
    }];
} 
```

# android - layout-land 概念在横向模式下不起作用

> ID：12017679
> 
> 赞同：4
> 
> 时间：2012-08-18T10:06:51.720
> 
> 标签：android

我正在制作一个应用程序，我想在其中为视图的横向和纵向模式放置不同的布局。我为此目的制作了一个单独的文件夹布局，但是当我将设备移动到横向模式时，它不起作用。请告诉我解决方案。

这是活动：

```
package com.example.fragmenttest;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
} 
```

这是此活动的 xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/rl"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        />

     <com.google.ads.AdView
        android:id="@+id/ad"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true"
        ads:adSize="SMART_BANNER"
        ads:adUnitId="a1501e5633125fb"
        ads:loadAdOnCreate="true"
        ads:testDevices="TEST_EMULATOR, 123456789ABCDEF" />

</RelativeLayout> 
```

这是 layout-land 文件夹中布局的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="@drawable/ic_action_search"
    >
   <TextView 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="This is fragment 2 "   
    /> 

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T10:21:00.367

将该横向文件名更改为`activity_main`. 两者的文件名必须相同。

# google-maps - Google Maps API v3 DirectionsService

> ID：12017680
> 
> 赞同：0
> 
> 时间：2012-08-18T10:06:52.083
> 
> 标签：google-maps, google-maps-api-3

我对谷歌地图 API v3 的方向服务对象有一些问题。

markerArray 是一个包含“google.Maps.Marker”对象的数组，我想计算它之间的距离。但是directionsService对象有时会返回“over_query_limit”错误或“unknown_error”，我不知道为什么，因为我考虑了限制时间（我每2点暂停1秒）

但最奇怪的是，这个问题只是偶尔发生。有时，程序运行正确。

谁能给我一个解决方案？

```
function calcRoute()
{
    var start;
    var end;    

    for (var i = 0 ; i < markersArray.length - 1 ; i++)
    {
        start = markersArray[i].getPosition();

        for (var j = i+1 ; j < markersArray.length ; j++)
        {
            end = markersArray[j].getPosition();

            addRoute(start,end,i,j);
            addRoute(end,start,j,i);

            sleep(1000);
        }               
    }
}

function addRoute(start, end, i, j) 
{       
    var summaryPannel; 
    var directionsService = new google.maps.DirectionsService();    
    var request = 
    {
        origin: start, 
        destination: end,   
        travelMode: google.maps.DirectionsTravelMode.DRIVING,
        optimizeWaypoints: true
    };

    directionsService.route(request, function(response, status) 
    {       
        summaryPanel.innerHTML += status + "<br />";    

        if (status == google.maps.DirectionsStatus.OK) 
        {   

            summaryPanel.innerHTML += (i+1) + " " + (j+1) + "<br/>";            
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:12:15.860

Google 路线服务受配额和速率限制的限制，这些限制不是固定的，取决于服务器的负载。如果您有时会得到 over_query_limit 结果，那么您需要延长固定延迟或动态限制请求（发生这种情况时以更长的延迟重试请求）。

如果您只需要距离，也许您可​​以使用[DistanceMatrix 服务](https://developers.google.com/maps/documentation/javascript/distancematrix)

# symfony - Symfony2：SecurityExtension::addUserProviderFactory() 和 PropelBundle

> ID：12017683
> 
> 赞同：0
> 
> 时间：2012-08-18T10:07:28.333
> 
> 标签：symfony, propel

我目前正在迁移一个 Symfony2 网站，但遇到了一个无法解决的问题。

我得到的错误信息是：

> 致命错误：在第 73 行的 [...]vendor/bundles/Propel/PropelBundle/PropelBundle.php 中调用未定义的方法 Symfony\Bundle\SecurityBundle\DependencyInjection\SecurityExtension::addUserProviderFactory()

这是我的deps文件：

```
[symfony]
    git=http://github.com/symfony/symfony.git
    version=origin/2.0

[twig]
    git=http://github.com/fabpot/Twig.git
    version=v1.8.2

[monolog]
    git=http://github.com/Seldaek/monolog.git
    version=1.0.2

[doctrine-common]
    git=http://github.com/doctrine/common.git
    version=2.1.4

[doctrine-dbal]
    git=http://github.com/doctrine/dbal.git
    version=2.1.5

[doctrine]
    git=http://github.com/doctrine/doctrine2.git
    version=2.1.6

[swiftmailer]
    git=http://github.com/swiftmailer/swiftmailer.git
    version=v4.2.0

[assetic]
    git=http://github.com/kriswallsmith/assetic.git
    version=v1.0.3

[twig-extensions]
    git=http://github.com/fabpot/Twig-extensions.git

[metadata]
    git=http://github.com/schmittjoh/metadata.git
    version=1.0.0

[SensioFrameworkExtraBundle]
    git=http://github.com/sensio/SensioFrameworkExtraBundle.git
    target=/bundles/Sensio/Bundle/FrameworkExtraBundle
    version=origin/2.0

[JMSSecurityExtraBundle]
    git=http://github.com/schmittjoh/JMSSecurityExtraBundle.git
    target=/bundles/JMS/SecurityExtraBundle
    version=origin/1.0.x

[SensioDistributionBundle]
    git=http://github.com/sensio/SensioDistributionBundle.git
    target=/bundles/Sensio/Bundle/DistributionBundle
    version=origin/2.0

[SensioGeneratorBundle]
    git=http://github.com/sensio/SensioGeneratorBundle.git
    target=/bundles/Sensio/Bundle/GeneratorBundle
    version=origin/2.0

[AsseticBundle]
    git=http://github.com/symfony/AsseticBundle.git
    target=/bundles/Symfony/Bundle/AsseticBundle
    version=origin/2.0

[Phing]
    git=https://github.com/phingofficial/phing.git

[Propel]
    git=https://github.com/propelorm/Propel.git

[PropelBundle]
    git=https://github.com/propelorm/PropelBundle.git
    target=/bundles/Propel/PropelBundle
    branch=origin/1.0

[PdfBundle]
    git=git://github.com/psliwa/PdfBundle.git
    target=/bundles/Ps/PdfBundle

[PHPPdf]
    git=git://github.com/psliwa/PHPPdf.git
    version=origin/1.1.x 
```

综上所述，我使用的是 Symfony 2.0（我不能使用 2.1：远程服务器在 PHP 5.3.2，由于 Plesk 无法迁移到 PHP 5.3.3）和相关的 Propel 版本（1.0）。

这也是我的 AppKernel：

```
$bundles = array(
    new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
    new Symfony\Bundle\SecurityBundle\SecurityBundle(),
    new Symfony\Bundle\TwigBundle\TwigBundle(),
    new Symfony\Bundle\MonologBundle\MonologBundle(),
    new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
    new Symfony\Bundle\DoctrineBundle\DoctrineBundle(),
    new Symfony\Bundle\AsseticBundle\AsseticBundle(),
    new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
    new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
    // My application bundles
    new Ps\PdfBundle\PsPdfBundle(),
    new Propel\PropelBundle\PropelBundle(),
); 
```

还有我的 autoload.php 文件，如果有帮助的话：

```
$loader->registerNamespaces(array(
    'Symfony'          => array(__DIR__.'/../vendor/symfony/src', __DIR__.'/../vendor/bundles'),
    'Sensio'           => __DIR__.'/../vendor/bundles',
    'JMS'              => __DIR__.'/../vendor/bundles',
    'Doctrine\\Common' => __DIR__.'/../vendor/doctrine-common/lib',
    'Doctrine\\DBAL'   => __DIR__.'/../vendor/doctrine-dbal/lib',
    'Doctrine'         => __DIR__.'/../vendor/doctrine/lib',
    'Monolog'          => __DIR__.'/../vendor/monolog/src',
    'Assetic'          => __DIR__.'/../vendor/assetic/src',
    'Metadata'         => __DIR__.'/../vendor/metadata/src',
    'Ps' => __DIR__.'/../vendor/bundles',
    'PHPPdf' => __DIR__.'/../vendor/PHPPdf/lib',
    'Imagine' => array(__DIR__.'/../vendor/PHPPdf/lib', __DIR__.'/../vendor/PHPPdf/lib/vendor/Imagine/lib'),
    'Zend' => __DIR__.'/../vendor/PHPPdf/lib/vendor/Zend/library',//If you have used ZF2 packages already, you should skip this entry
    'ZendPdf' => __DIR__.'/../vendor/PHPPdf/lib/vendor/ZendPdf/library',
    'Propel' => __DIR__.'/../vendor/bundles',
    'Phing'  => __DIR__.'/../vendor/phing/classes/phing',
)); 
```

你知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:09:25.743

您似乎加载了错误版本的 PropelBundle。

在你的 deps 文件中，不要`branch=origin/1.0`为 PropelBundle 编写，而是编写`version=origin/1.0`：

```
[PropelBundle]
    git=https://github.com/propelorm/PropelBundle.git
    target=/bundles/Propel/PropelBundle
    version=origin/1.0 
```

# python - Tastypie POST 总是创建资源

> ID：12017692
> 
> 赞同：1
> 
> 时间：2012-08-18T10:08:52.463
> 
> 标签：python, django, api, tastypie

我正在使用 Tastypie 构建一个 API。

我创建了一个资源，但由于某种原因，每当我发出 POST 请求时，它总是会创建一个资源，即使它返回错误也是如此。

例如，我收到以下错误：

> “作者”字段没有数据并且不允许空值

但是当我在管理控制台中检查资源时，它显示它创建了资源并将“作者”字段设置为空白。

如果缺少参数，我需要 POST 请求失败并且不创建资源。

默认情况下，模型中的所有字段都是空白=False 和 null=False。

编辑

这是我正在使用的模型：

```
class Story(models.Model):
  title = models.CharField(max_length=50)
  authors = models.ManyToManyField(Author, related_name='stories')
  cover_photo_url = models.URLField(max_length = 200) 
```

这是我的资源：

```
class StoryResource(ModelResource):
  authors = fields.ToManyField(SimpleAuthorResource, 'authors', full=True)
  posts = fields.ToManyField(PostResource, 'posts', full=True, blank=True)
  class Meta:
    queryset = Story.objects.all()
    resource_name = 'story'
    authorization = Authorization()
  def determine_format(self, request):
    return "application/json" 
```

我提出以下要求：

```
curl -X POST --header "Content-type:application/json" 
     --data '{"title" : "cool new story", "cover_photo_url":"hello.png"}' 
     http://localhost:8000/api/v1/story/ 
```

现在我一直在尝试其他一些事情。包括验证，这导致了它自己的一系列问题。如果我尝试使用缺少的必需参数进行 POST，即使没有验证，行插入也不应该失败吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-27T04:24:56.860

默认情况下，所有模型都有空白 = False。您必须专门为您的作者模型添加空白 = True，以便 API 忽略空白作者。另一种选择是有一个默认作者，它将填充作者字段，然后您不必担心它不是空白的。

# javascript - 为什么使用 Object.prototype.hasOwnProperty.call(myObj, prop) 而不是 myObj.hasOwnProperty(prop)？

> ID：12017693
> 
> 赞同：121
> 
> 时间：2012-08-18T10:09:00.500
> 
> 标签：javascript, requirejs, prototypal-inheritance, hasownproperty

如果我理解正确的话，JavaScript 中的每个对象都继承自 Object 原型，这意味着 JavaScript 中的每个对象都可以通过其原型链访问 hasOwnProperty 函数。

在阅读[RequireJS](https://requirejs.org/)的源代码时，我偶然发现了这个函数：

```
function hasProp(obj, prop) {
    return hasOwn.call(obj, prop);
} 
```

`hasOwn`是对 的引用`Object.prototype.hasOwnProperty`。将此函数编写为

```
function hasProp(obj, prop) {
    return obj.hasOwnProperty(prop);
} 
```

既然我们在这里，我们为什么要定义这个函数呢？这只是为了（轻微）性能提升而对属性访问进行快捷方式和本地缓存的问题，还是我错过了任何可能在没有此方法的对象上使用 hasOwnProperty 的情况？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-08-18T10:11:01.853

> [我的例子之间]有什么实际区别吗？

用户可能有一个使用 创建的 JavaScript 对象`Object.create(null)`，该对象将有一个`null` `[[Prototype]]`链，因此在其上不可`hasOwnProperty()`用。由于这个原因，使用您的第二种形式将无法正常工作。

它也是一个更安全的参考`Object.prototype.hasOwnProperty()`（也更短）。

你可以想象有人可能做过...

```
var someObject = {
    hasOwnProperty: function(lol) {
        return true;
    }
}; 
```

如果`hasProp(someObject)`像您的第二个示例那样实现它会失败（它会直接在对象上找到该方法并调用该方法，而不是委托给`Object.prototype.hasOwnProperty`）。

但不太可能有人会覆盖`Object.prototype.hasOwnProperty`参考。

> 既然我们在这里，我们为什么要定义这个函数呢？

往上看。

> 是否只是为了（轻微）性能提升而对属性访问进行快捷方式和本地缓存的问题......

理论上它可能会*更快*，因为`[[Prototype]]`不必遵循链条，但我怀疑这可以忽略不计，而*不是*实现的原因是它的原因。

> ...还是我错过了 `hasOwnProperty`可能用于没有此方法的对象的任何情况？

`hasOwnProperty()`存在于 上`Object.prototype`，但可以被覆盖。每个原生 JavaScript 对象（但宿主对象不保证遵循这一点，[请参阅 RobG 的深入解释](https://stackoverflow.com/a/12018960/31671)）`Object.prototype`之前在链上的最后一个对象`null`（当然返回的对象除外`Object.create(null)`）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-18T13:29:00.920

> 如果我理解正确的话，JavaScript 中的每个对象都继承自 Object 原型

**这可能看起来像分裂头发，但JavaScript**（ECMAScript 实现的通用术语）和**ECMAScript**（用于 JavaScript 实现的语言）之间是有区别的。定义继承方案的是 ECMAScript，而不是 JavaScript，因此只有原生 ECMAScript 对象需要实现该继承方案。

一个正在运行的 JavaScript 程序至少由内置的 ECMAScript 对象（对象、函数、数字等）和可能的一些本地对象（例如函数）组成。它也可能有一些宿主对象（例如浏览器中的 DOM 对象，或其他宿主环境中的其他对象）。

虽然内置对象和本机对象必须实现 ECMA-262 中定义的继承方案，但宿主对象不需要。因此，并非 JavaScript 环境中的所有对象都**必须**继承自*Object.prototype*。例如，在 Internet Explorer 中实现为[ActiveX](https://en.wikipedia.org/wiki/ActiveX)对象的主机对象如果被视为本机对象将引发错误（因此为什么*使用 try..catch*来初始化 Microsoft [XMLHttpRequest](https://en.wikipedia.org/wiki/XMLHttpRequest)对象）。某些 DOM 对象（如 Internet Explorer 中的怪癖模式中的 NodeLists）如果传递给 Array 方法将引发错误，Internet Explorer 8 及更低版本中的 DOM 对象没有类似 ECMAScript 的继承方案，等等。

因此，不应假定 JavaScript 环境中的所有对象都继承自 Object.prototype。

> 这意味着 JavaScript 中的每个对象都可以通过其原型链访问 hasOwnProperty 函数

至少对于处于怪异模式（以及 Internet Explorer 8 及更低版本）的 Internet Explorer 中的某些主机对象而言，这不是真的。

鉴于上述情况，值得思考为什么一个对象可能有自己的*hasOwnProperty*方法，以及调用其他一些*hasOwnProperty*方法而不首先测试是否是个好主意的可取性。

我怀疑使用的原因`Object.prototype.hasOwnProperty.call`是在某些浏览器中，宿主对象没有*hasOwnProperty*方法，使用*call*和内置方法是一种替代方法。但是，由于上述原因，通常这样做似乎不是一个好主意。

在涉及宿主对象的情况下，*in*运算符通常可用于测试属性，例如

```
var o = document.getElementsByTagName('foo');

// false in most browsers, throws an error in Internet Explorer 6, and probably 7 and 8
o.hasOwnProperty('bar');

// false in all browsers
('bar' in o);

// false (in all browsers? Do some throw errors?)
Object.prototype.hasOwnProperty.call(o, 'bar'); 
```

另一种选择（在[Internet Explorer 6](https://en.wikipedia.org/wiki/Internet_Explorer_6)和其他版本中测试）：

```
function ownProp(o, prop) {

  if ('hasOwnProperty' in o) {
    return o.hasOwnProperty(prop);

  } else {
    return Object.prototype.hasOwnProperty.call(o, prop);
  }
} 
```

这样，您只需在对象没有它（继承或其他方式）的地方专门调用内置*hasOwnProperty 。*

然而，如果一个对象没有`hasOwnProperty`方法，它可能同样适合使用*in*运算符，因为该对象可能没有继承方案并且所有属性都在该对象上（尽管这只是一个假设），例如*in*运算符是测试 DOM 对象对属性的支持的一种常见（并且看似成功）的方法。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-08-15T12:45:32.357

> JavaScript 不保护属性名称**hasOwnProperty**

如果存在对象可能具有具有此名称的属性的可能性，则有必要使用外部 hasOwnProperty 来获得正确的结果：

*您可以将以下代码片段复制粘贴到浏览器控制台以更好地理解*

```
var foo = {
  hasOwnProperty: function() {
    return false;
  },
  bar: 'I belong to foo'
}; 
```

总是返回 false

```
foo.hasOwnProperty('bar'); // false 
```

使用另一个对象的 hasOwnProperty 并将其**设置**为 foo

```
({}).hasOwnProperty.call(foo, 'bar'); // true 
```

为此，也可以使用**Object**原型中的 hasOwnProperty 属性

```
Object.prototype.hasOwnProperty.call(foo, 'bar'); // true 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-15T15:25:16.790

前两个答案（按日期）中给出的信息都是正确的。但是，使用：

```
('propertyName' in obj) 
```

被提及几次。应该注意的是，`hasOwnProperty`只有当属性直接包含在被测试的对象上时，实现才会返回 true。

操作员也将`in`通过原型链进行检查。

这意味着实例属性在传递到`hasOwnProperty`where 时将返回 true，因为原型属性将返回 false。

使用`in`运算符实例和原型属性都将返回 true。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-28T13:20:47.617

除了这里的其他答案，请注意您可以使用新方法`Object.hasOwn`（大多数浏览器都支持并且很快将在其余浏览器中支持），而不是`Object.hasOwnProperty.call`因为它允许您编写更简洁和更短的代码。

更多关于`Object.hasOwn`- [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn)

浏览器兼容性 - [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn#browser_compatibility](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn#browser_compatibility)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-09T15:20:05.493

它更简单：

```
let foo = Object.create(null);
if (foo.bar != null) {
    console.log('object foo contains bar property in any value and 
    type, except type undefined and null');
    // bar property can exist in object foo or any object of the prototype chain
} 
```

# http-headers - mp3 下载响应的内容类型

> ID：12017694
> 
> 赞同：48
> 
> 时间：2012-08-18T10:09:11.450
> 
> 标签：http-headers, mp3, httpresponse

我创建了一个简单的 HTTP 服务器，它允许用户下载文件。但这似乎不适用于 mp3 文件。当前的内容类型是`"application/misc"`. 为了使它适用于 mp3 文件，我尝试过`"application/mp3"`，`"application/data"`并且`"application/mpeg"`.

什么是 mp3 或音频文件下载的正确内容类型，我是否缺少其他一些标题？

* * *

编辑：该文件应自动开始下载，而不是提示用户将其保存在某处。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-08-18T10:13:53.707

尝试`"Content-Type: audio/mpeg"`

**更新**

为了鼓励浏览器下载 mp3 而不是流式传输，请执行

内容处置：filename="music.mp3"'

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-18T10:15:08.597

```
.mp3    audio/mpeg3
.mp3    audio/x-mpeg-3
.mp3    video/mpeg
.mp3    video/x-mpeg 
```

使用 Content-Disposition: attachment... 强制显示下载框，而不必右键单击 -> 将目标另存为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-07T20:09:10.977

经过大量研究，我发现了一些资源（一些在 SO 上）导致了这个解决方案。它是目前最跨设备兼容的解决方案，解决了很多问题，尤其是 Android 设备（显然有很多问题）。

内容处置：附件；***文件***名=" *my_mp3_filename.MP3* **"**

 **注意大写扩展名。这很重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T09:58:05.300

使用`Content-Type "application/force-download"`对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-26T14:02:22.630

试试下面对我有用的内容类型。

```
"audio/mpeg3;audio/x-mpeg-3;video/mpeg;video/x-mpeg;text/xml" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-18T10:18:36.060

将“内容处置”设置为“附件”**

# c - C 中 memcpy 的最佳实践

> ID：12017707
> 
> 赞同：3
> 
> 时间：2012-08-18T10:11:44.473
> 
> 标签：c, memcpy, tr24731

1.  它在 GNU 中是否与 Microsoft C 运行时一样被弃用？

2.  如果 GNU C 中有这样的弃用，89/90 之后的 C 标准或编译器是否强制执行弃用？

3.  如果它是 GNU C 编译器，它从什么时候开始提供像Microsoft C`memcpy_s`中已弃用的那样安全的替代内存操作功能？`memcpy`

4.  如果它是 89/90 之后的 C 标准，它从什么时候开始提供像Microsoft C`memcpy_s`中已弃用的那样安全的替代内存操作功能？`memcpy`

5.  `mem`如果在 GNU C 运行时中没有这样的弃用，是否有一个函数既不在那些内存操作（名称`bcopy`以目的地？

6.  如果有/有，你能列出尽可能多的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T10:15:14.020

**该功能`memcpy`未被弃用**。它是库中最安全、最有用的功能之一。该`memcpy_s`功能在 C11 中成为标准（可选，参见附件 K 中*的“边界检查接口*”）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-18T10:16:04.423

`memcpy_s`自 C11 以来已添加，但它是可选扩展。`memcpy`在 C 中没有被弃用，也不是一个过时的函数。

`glibc`截至目前不支持`_s`功能，并且没有计划（AFAIK）让`glibc`团队支持它们。

# java - Java中非常简单的用户登录系统

> ID：12017710
> 
> 赞同：1
> 
> 时间：2012-08-18T10:12:41.663
> 
> 标签：java, file-io, java.util.scanner

我想在不使用数据库的情况下在 java 中制作一个简单的登录系统。（PS。没有敏感数据）我想做这样的事情：

```
-1)I create a .txt file
-2)put the username and password like this

*user 
*pass 
*user
*pass
"
" 
```

是否可以使用扫描仪做到这一点？请帮忙，因为我只是一个初学者

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:25:00.297

您可以`BufferedWriter`用来包装输出流：

```
public static void main(String[] args) {
    BufferedWriter writer = null;
    try {
         // create a BufferedWriter for the text file
         writer = new BufferedWriter(new FileWriter("passwords.txt"));

         // write text
         writer.write("Tudor");
         writer.newLine();
         writer.write("Tudorspassword");
         //etc.
    } catch (IOException e) {
        System.out.println("Failed to create file.");
        e.printStackTrace();
    } finally {
        if(writer != null) {
            try {
                writer.close();
            } catch (IOException e) {
                System.out.println("Failed to close file.");
                e.printStackTrace();
            }
        }
    }
} 
```

阅读方法如下：

```
public static void main(String[] args) {
    BufferedReader rdr = null;
    try {
        rdr = new BufferedReader(new FileReader("passwords.txt"));
        String name = rdr.readLine();
        String password = rdr.readLine();
        while(name != null && password != null) {
            System.out.println(name);
            System.out.println(password);               
            name = rdr.readLine();
            password = rdr.readLine();  
        }
    } catch (FileNotFoundException e) {
        System.out.println("Failed to open file.");
        e.printStackTrace();
    } catch (IOException e) {
        System.out.println("Failed to correctly read file.");
        e.printStackTrace();
    } finally {
        if(rdr != null) {
            try {
                rdr.close();
            } catch (IOException e) {
                System.out.println("Failed to close file.");
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T10:40:30.507

```
import java.io.FileInputStream;    
import java.io.IOException;    
import java.util.Scanner;    
/**
 *
 * @author Abhishek Banerjee
 */    
public class NewMain {        
    public static void main(String[] args) throws IOException {
        Scanner s1,s2;
        s1=new Scanner(new FileInputStream("d:\\log.txt"));
        s2=new Scanner(System.in);
        boolean flag=false;
        String name,pword,n,p;
        System.out.println("Enter name:");
        n=s2.next();
        System.out.println("Enter password:");
        p=s2.next();
        while(s1.hasNext()) {
            name=s1.next();
            pword=s1.next();
            if(n.equals(name) && p.equals(pword)) {
                System.out.println("You are logged in.");
                flag=true;
                break;
            }                
        }
        if(!flag)
        System.out.println("Incorrect password.");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T10:20:48.130

创建`User`如下所示的类

```
 class User implements Serializable 
{
    private String username;
    private String password;
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }

} 
```

第一次创建`Hashmap`可以序列化到文件中的实例。

```
 private HashMap<String, User> hashMap = new HashMap<String, User>(); 
```

使用此映射以根据用户名查找密码。

# unit-testing - Moles/Fakes：如何实施测试设置？

> ID：12017711
> 
> 赞同：6
> 
> 时间：2012-08-18T10:12:49.407
> 
> 标签：unit-testing, moles, microsoft-fakes

我最近一直在与 Moles 合作，现在我正在转向 Fakes。在我的旧测试项目中，我有一个测试设置，如下所示：

```
[TestInitialize]
public void Setup()
{
    //...
} 
```

在那里我做了一些必要的设置，就像设置我的一些痣对象一样。

摩尔中的测试方法看起来像那样（还有 [HostType("Moles")] 指定它使用摩尔对象。

```
[TestMethod]
[HostType("Moles")]
public void MolesTestMethod()
{
    //...
} 
```

现在，在 Fakes 中，他们不再使用 HostType 属性。相反，他们使用 ShimsContext，您可以在其中使用“模拟”类。它看起来像这样：

```
[TestMethod]
public void FakesTestMethod()
{
    using (ShimsContext.Create())
    {
        //...
    }
} 
```

如果您不使用此上下文，您可能会收到一条错误消息。它基本上说 FakesTestMethod 中有一个 ShimInvalidOperationException，您必须按照下面描述的方式使用 ShimsContext.Create()

```
-- C#:
using Microsoft.QualityTools.Testing.Fakes;

using(ShimsContext.Create())
{
    // your test code using Shims here
}

-- VisualBasic.NET
Imports Microsoft.QualityTools.Testing.Fakes

Using ShimsContext.Create
    ' your test code using Shims here
End Using 
```

所以我试图把我的设置调用放到那个上下文中，结果是这样的：

```
[TestInitialize]
public void Setup()
{
    using(ShimsContext.Create())
    {
        //...
    }
} 
```

现在，如果我在我的 Setup 方法中使用这个上下文，那么在那里完成的所有设置都将在之后用完上下文，并且当单元测试实际上即将运行时将不再有效，这并不是我真正想要的一种测试设置方法。

我通过将 using 放入测试方法本身并在此上下文中和测试代码之前调用私有设置方法来解决此问题。这个 setup 方法现在完成了所有的处理，这在 [TestInitialize] setup 方法之前做了。代码看起来像这样：

```
[TestMethod]
public void PerformActionFromConfigActionStateActionIdIsSet()
{
    using (ShimsContext.Create())
    {
        Setup();

        //...
    }
} 
```

我现在对这个问题的问题是，这个解决方案完全“扼杀”了 [TestInitialize] 设置方法的想法。我必须将此代码复制到每个测试方法中，最重要的部分是：在此 Setup() 方法中创建的对象将为每个测试创建和销毁，这根本不理想！

有没有其他方法可以在 Fakes 中设置测试数据？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T14:23:36.370

[使用：](http://msdn.microsoft.com/en-US/library/yh598w02%28v=vs.110%29)

> 定义一个范围，一个或多个对象将被释放到该范围之外。

您可以通过调用创建 IDisposable 实例，`ShimsContext.Create()`并使用 using 块对其进行包装。在初始化您的 Fakes 类并离开使用范围后，您的配置将被释放。

我建议创建 IDisposable 实例并在测试结束时手动调用 Dispose。

如果您想避免为每个测试创建上下文，我还建议使用 ClassInitialize 和 ClassCleanup 而不是 TestInitialize 和 TestCleanup，因为它应该足以为所有测试初始化​​一次 Shims。这只有在没有其他依赖项的情况下才有可能（请参阅 Oleg Sych 的回答）。

```
[TestClass]
public class TestClass1
{
    protected static IDisposable Context { get; set; }

    [ClassInitialize]
    public static void ClassInitialize(TestContext testContext)
    {
        // Create ShimsContext
        Context = ShimsContext.Create();

        // TODO: Additional setup
    }

    [ClassCleanup]
    public static void ClassCleanup()
    {
        Context.Dispose();
        Context = null;
    }

    [TestMethod]
    public void TestMethod1()
    {
        // Fakes should be initialized correctly here
    }

    [TestMethod]
    public void TestMethod2()
    {
        // Fakes should be initialized correctly here
    }
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T00:18:20.670

使用 ClassInitialize/ClassCleanup 来初始化垫片不是一个好主意。这将使为一种测试方法配置的弯路对类中的所有其他测试方法保持活动状态。换句话说，由 lambdas 捕获的弯路和任何其他状态都将在所有测试方法之间共享。如果您绕过它碰巧使用的方法，这也会破坏测试工具的稳定性。

相反，使用 TestInitialize/TestCleanup 分别为每个测试方法创建/处置 ShimsContext。

# heroku - heroku 是否使用我的 ssh 密钥来获取构建包？

> ID：12017712
> 
> 赞同：0
> 
> 时间：2012-08-18T10:13:00.040
> 
> 标签：heroku, ssh, github

Heroku 使您可以使用`BUILDPACK_URL`env 变量使用自定义构建包。

`git@github.com:user/repo.git`在有人[无法获取 buildpack](https://stackoverflow.com/a/11055852/343834)之前，这对 url 效果很好。

到目前为止，我认为 heroku 设法自己获取构建包，但它似乎使用我的 heroku ssh 密钥来执行此操作。

它似乎可以正常工作，因为我在 github 上注册了相同的 ssh 密钥。是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T23:31:26.683

它不使用您的 SSH 密钥。您只上传密钥的公共部分，因此无法使用您的密钥。

# node.js - Nodejs amqp 缓冲区传输

> ID：12017717
> 
> 赞同：0
> 
> 时间：2012-08-18T10:13:52.443
> 
> 标签：node.js, buffer, amqp

我有一个前端网络服务器 Node + Express，它从浏览器接收上传的文件。然后我想获取文件数据并通过 amqp 将其发送给工作人员。这是我接受上传并通过 amqp 发送文件的代码：

```
 adminCommercialRegistration : function (req,res,next) {
    if(!this.checkLogin (req,res)) return;

        fs.readFile(req.files.html.path, function (err,data) {
            if(err)
            {
                res.json('Error reading uploaded file');
            }
            else
            {
                var metaData = {
                                companyName : req.body.companyName,
                                date : req.body.date
                               };
                var payLoad = { metaData : metaData, data : data };
                var connection = require('amqp').createConnection({ host : '172.27.164.28'});
                    connection.on('ready', function(){

                        console.log('Connected to ' + connection.serverProperties.product);

                        var exchange = connection.exchange('ooparoopa');
                        var queue = connection.queue('htmlFileUpload');

                        queue.on('queueDeclareOk', function(args) {
                            console.log('Queue Opened');
                            queue.bind(exchange, '#html');

                            queue.on('queueBindOk',function (){
                            console.log('Queue Bound');

                            exchange.publish('#html', { payLoad : payLoad });
                            res.redirect('/commercial');
                        });
                    });
                });                 
            }
        });
    }, 
```

这部分工作正常，将发送数据。我检查了这边的数据对象，它是一个缓冲区。

下面的代码是工作进程。它接收数据并将所需的信息添加到数据库中。但是，文件数据存在问题。它看起来不像是缓冲区。我收到错误消息未知编码。我必须怎么做才能把它放回二进制缓冲区？

```
connection.on('ready', function(){
console.log('Connected to ' + connection.serverProperties.product);

var exchange = connection.exchange('ooparoopa');
var queue = connection.queue('htmlFileUpload');

queue.on('queueDeclareOk', function(args){
    queue.bind(exchange, '#html');

    queue.subscribe({ack:true}, function (payLoad) {
        queue.shift();
        console.log('Message Received:');
        console.log(payLoad.payLoad.metaData.companyName);
        var Commercial = db.model('Commercial');
        var newCommercial = new Commercial({ companyName : payLoad.payLoad.metaData.companyName, date : payLoad.payLoad.metaData.date });
        newCommercial.save(function (err,newComm){
            if(err)
            {
                console.log(err);
            }
            else
            {

                console.log(payLoad.payLoad.data.length)
                var folder = '/var/www/ooparoopastatic/html/';
                var _id = newComm.id;
                var filename = _id + '.zip';

                console.log(payLoad.payLoad.data);
                fs.writeFileSync(folder + filename, buffer, function (err) {
                    if(err)
                    {
                        console.log(err);
                    }
                    else
                    {
                        console.log('Writing to file at:' + folder + filename);
                    }
                });
            }
        });
    });
});
}) 
```

# php - json file and $.getJSON

> ID：12017723
> 
> 赞同：0
> 
> 时间：2012-08-18T10:15:05.207
> 
> 标签：php, json, jquery

I am trying to get the json file using $.getJSON by using:

```
$.getJSON('json/resume.json', function(data){
    alert('success');
}); 
```

but the alert message is not coming, i tried by:

```
$.ajax({
    type: 'POST',
    url: 'json/download.php',
}).success(function(){alert("hello")}); 
```

in this case the alert is coming as HELLO.

I am totally stuck. please help

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T10:27:17.740

You are using two different requests to two different urls and comparing them as if the same, the first is get to json/resume.json and the second is POST to json/download.php. The only reason the first call would fail is either one of these:

```
json/resume.json does not exist
json/resume.json does not contain valid json 
```

You need to either set global ajax error handlers so that you will get your error from getJSON, or run the same json query through an ajax like:

```
$.ajax({
    url: 'json/resume.json',
    type: 'GET',
    dataType: 'json'
    success: function(response) {
        console.log(response)//should come into console anyway 
    },
    error: function(request, type, errorThrown) {

        message = (type=='parseerror') ? "json is invalid" : "(" + request.status + " " + request.statusText + ").";
        alert("error with request: "+message);
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:24:46.633

the first is a GET, the second is a POST - did u use dev tools in browser and check the NET tab for server 500 errors?

if your server method is only accepting POSTs that's your bother right there.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T10:26:10.513

Your server side script doesn't return valid JSON or doesn't set the `Content-Type` response header to `application/json`.

So make sure those 2 conditions are met before attempting to consume your script with `$.getJSON`:

```
<?php
    header('Content-Type: application/json');
    $arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);
    echo json_encode($arr);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T10:53:21.287

I think you should checkout error which happens in your getJSON(), e.g.

```
$.getJSON('json/resume.json', function(data){
    alert('success');
}).error(function(e, m) { alert('error'); console.log(m); }); 
```

# jquery - jquery.getJSON 给出错误

> ID：12017729
> 
> 赞同：0
> 
> 时间：2012-08-18T10:15:30.137
> 
> 标签：jquery, json, get

这是给出错误的代码

```
<script type="text/javascript">

   var reqUrl='https://public-api.wordpress.com/rest/v1/sites/en.blog.wordpress.com/posts/slug:blogging-and-stuff';

   $.getJSON(reqUrl,function(data) {
          alert(data);   
   }).error(function() { alert("error"); });

</script> 
```

我浪费了几个小时，但没有成功。在浏览器中访问 url 提供了有效的 JSON。

我需要使用的网址是 [https://public-api.wordpress.com/rest/v1/sites/en.blog.wordpress.com/posts/slug:blogging-and-stuff](https://public-api.wordpress.com/rest/v1/sites/en.blog.wordpress.com/posts/slug:blogging-and-stuff)

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:18:06.473

由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制，您不能发送跨域 AJAX 调用。根据您对远程域的控制级别，有一些解决方法。查看[以下指南](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)。

*   [JSONP](http://en.wikipedia.org/wiki/JSONP)（要求您控制远程域）
*   [CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)（要求您控制远程域）
*   您域上的服务器端脚本桥（不需要您控制远程域）

* * *

更新：

好的，既然您已经显示了实际的 url，它似乎支持 JSONP。以下是如何使用它：

```
var reqUrl = 'https://public-api.wordpress.com/rest/v1/sites/en.blog.wordpress.com/posts/slug:blogging-and-stuff?callback=?';

$.getJSON(reqUrl,function(data) {
    alert(data);   
}).error(function() { alert('error'); }); 
```

​ 请注意`?callback=?`我在您的网址末尾附加的参数。

这是一个现场演示：

[http://jsfiddle.net/6S4TP/](http://jsfiddle.net/6S4TP/)

# iphone - 更新到 sqlite3 db 不起作用

> ID：12017733
> 
> 赞同：0
> 
> 时间：2012-08-18T10:16:00.640
> 
> 标签：iphone, xcode, sqlite

我正在使用在应用程序委托处打开的 sqlite3 数据库，然后在按下按钮后在另一个视图中执行不起作用的更新语句。应用委托代码：

```
- (BOOL) openDB{
    //NSMutableArray *logoArray = [[NSMutableArray alloc] init];
    @try {
        NSFileManager *fileMgr = [NSFileManager defaultManager];
        NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"SportsLogo.sqlite"];
        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            return NO;
        }
    }
    @catch (NSException *exception) {
            NSLog(@"An exception occured: %@", [exception reason]);
        }
        @finally {
            return YES;
        } 

    }

- (sqlite3 *) getDB{
    return db;
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    //MySportsLogosDB *myDB = [[MySportsLogosDB alloc]init];
    //NSMutableArray *myArray = [[NSMutableArray alloc]init];
    if ([self openDB] != YES){
        NSLog(@"Problem with opening the DB");
        return NO;
    }

    return YES;
} 
```

然后，当我按下按钮时，我运行以下代码：

```
-(IBAction)enter:(id)sender
{
    UIImage *answerImage = [UIImage imageNamed:[NSString stringWithFormat:@"%@%@",currentTitle, @".png"]];

    if ([[currentTitle lowercaseString] isEqualToString:logoNameText.text]){
        [imageGuessView setImage:answerImage];
        AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
      //  NSString *sql =[NSString stringWithFormat:@"select rowid from mytable where name = %@",str];

        NSString *sql = [NSString stringWithFormat:@"UPDATE LogosTbl set logoStatus = ?1 WHERE logoName = '%@'",[currentTitle lowercaseString]];

        sqlite3_stmt *sqlStatement;
        if(sqlite3_prepare_v2([appDelegate getDB], [sql UTF8String], -1, &sqlStatement, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement");
            NSLog(@"%s",sqlite3_errmsg([appDelegate getDB]));
           // printf( "could not prepare statemnt: %s\n", sqlite3_errmsg(database) );

        }

        if(SQLITE_DONE != sqlite3_step(sqlStatement)){
            NSLog(@"Problem with UPDATE");
        }
 }
    else{
        NSLog(@"First No");
    }
} 
```

准备工作正常，步骤也正常，但我没有看到数据已更新。sqlite 文件位于我在 Xcode 中的项目树中，它位于具有读写权限的文件系统中的项目目录中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:25:16.037

如果数据库文件在项目的包中，那么你不能在那里写任何东西，因为包是只读的。将数据库文件复制到您的文档文件夹，然后您将拥有一个可写的数据库。此示例使用 sqlite3 的 FMDB 包装器：

```
NSError  *error = nil;
self.nfm = [[NSFileManager alloc] init];

/*
 * if the database isn't in the Documents directory then copy from the bundle
 */

NSArray  *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
NSString *documentsPath = [paths objectAtIndex:0];

NSString *documentsDatabasePath = [documentsPath stringByAppendingPathComponent:@"orders.db"];
if(![self.nfm fileExistsAtPath:documentsDatabasePath]){
    NSString *bundlePath = [[NSBundle mainBundle] pathForResource:@"orders" ofType:@"db"];
    NSLog(@"Model init about to copy %@ to %@",bundlePath,documentsDatabasePath);
    [self.nfm copyItemAtPath:bundlePath toPath:documentsDatabasePath error:&error];
}

self.database = [FMDatabase databaseWithPath:documentsDatabasePath];
if (![self.database open]) {
    if(trace) NSLog(@"Model: start: Could not open database in path \n%@",documentsDatabasePath);
    return nil;
}

if(trace) NSLog(@"Model: start: Opened database in path \n%@",documentsDatabasePath); 
```

# java - 在 JSP 中使用 Java 类

> ID：12017739
> 
> 赞同：1
> 
> 时间：2012-08-18T10:16:37.333
> 
> 标签：java, jsp, email, tomcat, jakarta-mail

我有一个包含有用代码的 Java 文件，我想在我的 JSP 文件中调用该 Java 代码。我已经尝试过了，例如我正在使用一个 Java 文件，它成功地将电子邮件发送到一个邮件 ID。但是，如果我在 JSP 页面中调用它，它的运行不会出错，但不会发送电子邮件。

**Java代码：**

```
package com.me;
import java.util.Properties;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class SSL {
    public static void main(String[] args) {
        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class",
            "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");

        Session session = Session.getDefaultInstance(props,
          new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
              return new PasswordAuthentication("prakash.d2222","**********");
            }
          });

        try {     
          Message message = new MimeMessage(session);
          message.setFrom(new InternetAddress("from@no-spam.com"));
          message.setRecipients(Message.RecipientType.TO,
              InternetAddress.parse("prakash_d22@rediffmail.com"));
          message.setSubject("Testing Subject");
          message.setText("Dear Mail Crawler," +
                "from core java");
          Transport.send(message);

          System.out.println("Doneit");

        } catch (MessagingException e) {
          throw new RuntimeException(e);
        }
    }
} 
```

**我的 JSP 代码是：**

```
<html>
<body>
  <jsp:useBean id="link" scope="application" class = "com.me.SSL" />            
  <% out.println("ok"); %>    
</body>
</html> 
```

和汤姆猫文件夹配置是

```
webapps\root\web-inf
                   |
                   -classes\com\me\SSL.class
                   |                   
                   -lib\mail.jar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:51:46.707

您应该尝试在 SSL 类中调用该方法。从您的代码看来，您只是在创建 jsp:usebean 来获取对象的实例。

试试 ${link.MethodName}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T11:05:38.007

您可以使用

```
<jsp:useBean id="link" scope="application" class = "com.me.SSL" />          
<jsp:setProperty name="link" property="prop" value=""/>
<% out.println("ok"); %> 
```

并修改代码

```
public class SSL {
  String prop;

  public String getProp() {
    return prop;
  }

  public void setProp(String prop) {
    this.prop = prop;
    main(null);
  }

  public static void main(String[] args) {
    Properties props = new Properties(); 
```

这意味着您`main`在设置属性时调用方法。

如果你没有使用`jsp:useBean`

```
<%@ page import="com.me.SSL" %>
<html>
<body>
  <% new SSL().main(null); out.println("ok"); %>    
</body>
</html> 
```

# html - 无法将表格移至列的顶部

> ID：12017741
> 
> 赞同：2
> 
> 时间：2012-08-18T10:16:46.337
> 
> 标签：html, css

我在“右列​​”中有一个表格，我似乎无法让它移动到该列的顶部。有什么建议么？我认为这与 css 显示有关：`table-cell;`

链接到小提琴 - > [http://jsfiddle.net/ZyAQc/](http://jsfiddle.net/ZyAQc/)

添加了指向小提琴的链接，因此您可以看到我在说什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:21:04.197

添加“垂直对齐：顶部；” 到你的CSS中的#rightcolumn

```
#rightcolumn{
    vertical-align: top;
    display: table-cell;
    width: 20%; /*Width of right column in pixels*/
    margin-left: -20%; /*Set margin to that of -(RightColumnWidth)*/
    background:#5f5f5f ;
    color: White;
} 
```

这是工作小提琴：http: [//jsfiddle.net/jqS8K/](http://jsfiddle.net/jqS8K/)

# ruby-on-rails - 发送确认后如何登录用户？

> ID：12017743
> 
> 赞同：0
> 
> 时间：2012-08-18T10:16:56.423
> 
> 标签：ruby-on-rails, devise, overriding, devise-confirmable

我使用设计通过设计可确认选项对我的网站上的用户进行身份验证。现在，当用户注册时，他们确实会收到一封确认电子邮件，但我需要用户在发送确认后自动登录。

我希望用户即使不确认他们的电子邮件地址也能登录。

我知道我需要修改确认控制器，但不知道是什么以及如何。这是我的代码：

```
class Devise::ConfirmationsController < DeviseController
# GET /resource/confirmation/new
def new
 build_resource({})
end

# POST /resource/confirmation
def create
 self.resource = resource_class.send_confirmation_instructions(resource_params)
if successfully_sent?(resource)
  respond_with({}, :location => 
after_resending_confirmation_instructions_path_for(resource_name))
else
  respond_with(resource)
 end
end

 # GET /resource/confirmation?confirmation_token=abcdef
def show
 self.resource = resource_class.confirm_by_token(params[:confirmation_token])

if resource.errors.empty?
  set_flash_message(:notice, :confirmed) if is_navigational_format?
  sign_in(resource_name, resource)
   respond_with_navigational(resource){ redirect_to after_confirmation_path_for(resource_name, resource) }
 else
  respond_with_navigational(resource.errors, :status => :unprocessable_entity){ render :new }
 end
end

protected

# The path used after resending confirmation instructions.
def after_resending_confirmation_instructions_path_for(resource_name)
  new_session_path(resource_name)
end

# The path used after confirmation.
def after_confirmation_path_for(resource_name, resource)
  after_sign_in_path_for(resource)
end

 end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:36:40.473

如果您查看设计初始化程序，在第 87 行附近，您应该会看到：

```
# ==> Configuration for :confirmable
# A period that the user is allowed to access the website even without
# confirming his account. For instance, if set to 2.days, the user will be
# able to access the website for two days without confirming his account,
# access will be blocked just in the third day. Default is 0.days, meaning
# the user cannot access the website without confirming his account.
# config.allow_unconfirmed_access_for = 2.days 
```

启用此功能后，您的用户无需通过确认电子邮件确认其帐户即可登录一段时间。[如果您想在发送确认](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/confirmations_controller.rb)电子邮件后自动让用户登录，那么您将需要覆盖`create`Devise confirms_controller 中的方法。那里有关于如何覆盖 Devise 控制器的教程，但您需要执行以下操作：

```
def create
  self.resource = resource_class.send_confirmation_instructions(resource_params)

  if successfully_sent?(resource)
    sign_in(resource_name, resource)
    respond_with({}, :location => after_sign_up_path_for(resource)
  else
    respond_with(resource)
  end
end 
```

这基本上是默认的 Devise 方法，带有额外的行来登录用户并将`respond_With`with 调用更改为 be `after_sign_up_path_for`。请注意，`after_sign_up_path_for`默认为根路由，这可能是不可取的。Devise Wiki 上有关于覆盖此路径的示例。

# mysql - 如何更新数据库中的无限表单字段表单？

> ID：12017744
> 
> 赞同：2
> 
> 时间：2012-08-18T10:16:56.787
> 
> 标签：mysql, database, forms

我的表单结构是这样的，`fields[]`在提交表单时可以多次添加输入。这里我将网站链接存储在`fields[]`.

```
<input id="name" name="name" type="text" />
<input id="field_1" name="fields[]" type="text" />
<input id="field_2" name="fields[]" type="text" />
<input id="field_3" name="fields[]" type="text" /> 
```

我已经设法使用下面的表结构将这些数据存储在 MySQL 数据库中，以允许用户与无限数量的网站相关联：

```
Users       User_website_link     Websites
------      -----------------     ---------
Pk:UserID   Pk:ID               Pk:WebsiteId
name        UserID              Url
            WebsiteID 
```

假设用户在表单 {"Jon", "example.com", "example1.com", "example2.com" } 中填写以下数据

所以在提交表单表之后会是这样的：

**用户表：**

```
UserID   Username
1         Jon 
```

**网站表：**

```
WebsiteID      Url
1               example.com
2               example1.com
3               example3.com 
```

**User_website_link 表：**

```
ID   UserID    WebsiteId
1     1         1
2     1         2
3     1         3 
```

我应该如何允许用户在提交 URL 后编辑他们的 URL？

所以我的问题是：一个叫 John 的用户想要删除`example3.com`和编辑`example.com`到`demo.com`，所以我想知道如何从数据库中删除一些网站并编辑一些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T10:23:09.990

您不需要 user_website_link 表 - 您只需将 UserID 放在网站表的另一列中。

但是要回答这个问题：

您不需要编辑条目，只需添加另一个类似于 boolean 的列，`is_deleted`并且只显示或使用具有`is_deleted`as false 的 URL。因此，您只需让用户添加一个额外的 URL 进行编辑，并`is_deleted`在删除它们时设置。当然，您可以在删除时删除该行，或者稍后清除已删除的行，但我认为这种方法稍微容易一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T10:33:28.900

就像@bearbin 说的那样，使用这种结构，没有一个用户拥有该网站，所以如果一个人编辑了它而另一个人不想要你将如何解决这个问题。使用您的结构，您只能拥有的是`insert`and `delete`。

为了使用户拥有网站，那么您的结构需要更改为

```
Websites(WebsiteID, URL, UserID) 
```

`UserID`外键在哪里。在这种`WebsiteID`情况下，每个用户都是唯一的。

# drupal - 在规则条件下访问实体（内容）数据 - 奇怪的行为

> ID：12017745
> 
> 赞同：0
> 
> 时间：2012-08-18T10:17:20.460
> 
> 标签：drupal, drupal-7, organic-groups, drupal-rules

我对drupal还很陌生，但是由于朋友让我帮助他，所以我对此有所了解。我设法让很多事情正常工作，但有一个问题我无法解决。这是我想要实现的目标：

将有课程表示为带有节点实体的 OG 组。每门课程的内容类型为“课程”（实体类型为节点）并有其价格。在规则中，我试图检查用户是否有足够的学分来加入课程，从而在“保存 og 会员资格之前”事件中触发它。如果用户没有足够的资金，我想中止 OG 会员保存并抛出一些错误。

非常简单，但是，有一些我没想到会出现的问题。这就是我所做/拥有的：

*   每个用户都有一个名为“field-credit”的自定义字段，这没有问题，因为我可以通过 site:current-user:field-credit 随时随地在规则中访问它
*   course 只不过是简单的 OG 组，带有 Node 实体，自定义内容类型为“Course”，它定义了自定义字段“field-price”用于存储课程价格

在规则模块（通过 UI）中，我制定了这样的规则：

1.  触发事件“在保存 og 成员资格之前”
2.  条件如下（按顺序）：
    *   实体 [og-membership:group:entity] 是 Node 类型（确保我可以访问内容类型）
    *   内容 [og-membership:group:entity] 是 Course 类型（确保我可以访问课程特定字段）
    *   数据对比：[site:current-user:field-credit] 低于 [og-membership:group:entity:field-price]

这里有一些我无法完全理解的东西 - 添加这些条件后（实体类型表示我正在使用节点，节点内容类型表示我正在使用课程），我可以在数据选择器中看到我需要的所有字段，因此规则应该知道它们并使用它们。但实际上，它们并不存在！当我在其中显示带有 [og-membership:group:entity:field-price] 的消息时（仍然可以通过数据选择器访问），它不显示课程价格，就像没有这样的变量一样。我可以在操作中进行实体获取，但这没有用，因为在条件中看不到获取的实体（内容），甚至无法通过数据选择器访问以供进一步使用，例如“计算值”操作，因为它不知道它的（实体）内容类型（但是 [fetched-entity:

谁能告诉，为什么会发生这种情况或更好，如何解决？我不想为某些东西编写自己的模块，这可以通过开箱即用的规则来实现，但是这种行为已经困扰了我 2 天。

系统在 Drupal 7 上运行。

编辑：在“保存新内容后”的规则触发中，一切都按预期设置，检查内容类型（内容[节点]是课程类型），所以我很确定课程的所有字段都可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:22:29.800

尽管我很不情愿，但我不得不让这个与组件一起工作。组件有两个参数——节点实体（Course 类型）和用户实体。在组件中，正在比较用户学分和课程价格。一切（好吧，关于这个问题的一切）都按预期工作，我只需要首先在规则操作中获取 Course 实体（通过实体 id）并将结果变量提供给组件。

# android - Windows 上没有 Eclipse 的 Android 应用程序代码签名

> ID：12017746
> 
> 赞同：1
> 
> 时间：2012-08-18T10:17:23.377
> 
> 标签：android, cordova

我开发了一个 phonegap 应用程序并创建了一个 APK，但我需要添加签名密钥。

我读过它是用 Eclipse 完成的，但我不使用 eclipse 来创建应用程序。

有什么方法可以在不使用 Eclipse 的情况下获取签名密钥？

注意：我使用的是 windows 7 操作系统

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T10:29:06.150

如果您有项目的源代码，您可以在没有 Eclipse 的情况下构建它，签名未签名的 apk 也可以使用 ant 实现

这是一个关于如何在没有 Eclipse 的情况下构建签名 APK 的快速教程。

输入 CMD

```
cd your/project/folder/
android update project -p . 
```

将以下设置添加到 project.properties：

```
key.store=path/to/export/key
key.alias=alias_name
key.store.password=store_password
key.alias.password=alias_password 
```

输入 CMD

```
cd your/project/folder/
ant relese 
```

**输出 APK 将在 bin 文件夹中找到**

**注意：**这需要安装 android SDK。

如果您收到以下错误：

```
'android' is not recognized as an internal or external command
'ant' is not recognized as an internal or external command 
```

您应该将您的 android-sdk/tools 和 android-sdk/platform-tools 添加到系统路径，这里有一个关于如何做到这一点的教程：

[http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx](http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T10:21:02.200

您需要在构建 AOSP 时生成的 signapk.jar。然后使用下面的命令在网上搜索signapk.jar就可以下载了。

```
java -jar signapk.jar certificate.pem key.pk8 your-app.apk  your-signed-app.apk 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T10:27:04.977

在没有 Eclipse 和 Eclipse 教程的情况下尝试使用下面的链接签名到 apk 文件

[http://www.coderzheaven.com/2011/04/01/android-signing-apk/](http://www.coderzheaven.com/2011/04/01/android-signing-apk/)

# java - 混淆 Android 项目的一部分

> ID：12017752
> 
> 赞同：1
> 
> 时间：2012-08-18T10:18:18.763
> 
> 标签：java, android, obfuscation

我想混淆并转换为我的 Android 项目的库部分，以使其可供其他开发人员使用。

我想混淆的部分是我们的专有算法。该算法是纯 java 的，从 android 应用程序获取输入并将一些输出返回给应用程序，它使用 API 样式。

有人可以指出我可以从 Android 应用程序中读取和拆分算法并创建混淆的可重用 JAR 文件的资源吗？

请记住，我的算法是纯 java，因此我相信我不需要创建 Android 库。如果我错了，请纠正我。

# php - 访问我的页面的安全方式

> ID：12017754
> 
> 赞同：0
> 
> 时间：2012-08-18T10:18:30.453
> 
> 标签：php

我无法弄清楚如何解决此代码中的错误。我正在关注视频教程。

```
//when your looking for path
$core_path= dirname(__FILE__);
if(empty($_GET['page']) && in_array("{$_GET['page']}.page.inc.php",scandir("{$core_path}/pages"))==false){
    echo'invalid page';
} 
```

当我尝试在我的 wamp 服务器上测试此代码时出现的错误是

```
Notice: Undefined index: page in C:\wamp\www\pm_system\core\init.inc.php on line 8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:23:31.550

`$_GET['page']` 这里变量的名称是“page”。确保您为此 URL 指定的变量名称是“page”。

例如

```
header("Location:second.php?page=3");// here the name of varible which is passing to the url is "page" 
```

在 second.php 上

```
echo $_GET['page'];//give out put 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:25:51.313

您可能使用的 URL 没有`$page=some-page`，所以`$_GET['page']`不存在，您应该检查它是否存在而不是它是否为空，如下所示：

```
//when your looking for path
$core_path= dirname(__FILE__);

if(isset($_GET['page']) && in_array("{$_GET['page']}.page.inc.php",scandir(" {$core_path}/pages"))==false){
    echo'invalid page';
} 
```

# php - yii afterfind 传递数组来查看

> ID：12017756
> 
> 赞同：0
> 
> 时间：2012-08-18T10:19:17.877
> 
> 标签：php, yii

在我的模型里面我有这个代码，这是部分代码

```
protected function afterFind ()
{
    $car= Car::model()->findAll("car_id = '{$this->model_id}'");
    foreach($car as $cars) {
        $val['car_name'][] = $cars->car_name;
        $val['car_value'][] = $cars->car_value;
    }
    $this->car_arr = $val;

    parent::afterFind();
} 
```

我如何传递数组来查看？当我做这样的事情时，YII 输出了一个错误说 `htmlspecialchars() expects parameter 1 to be string, array given`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:53:12.643

Yii`afterfind()`方法被覆盖为**Postprocess** AR 属性。

[从文档：](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#afterFind-detail)

> 在每条记录由 find 方法实例化后调用此方法。默认实现引发 onAfterFind 事件。您可以在实例化每个新找到的记录后覆盖此方法以进行后处理。确保调用父实现，以便正确引发事件。

所以它通常像这样工作：

```
protected function afterFind()
{

  $this->attribute_a = customize($this->attribute_a); //return customized attribute_a
  $this->attribute_b = customize($this->attribute_b); //return customized attribute_b
  ....
  parent::afterFind(); //To raise the event
} 
```

我不确定你想做什么？但可能你想在每次找到之后自动化一些任务（填充一些数组）！

在这种情况下，您可以在模型中定义一个公共数组：

`$public car_arr = array();`

然后将其填充到您的中`afterFind()`，它将可以在视图中访问。

# facebook-graph-api - Facebook 页面粉丝使用 Graph API 收到每张图片上传的通知

> ID：12017758
> 
> 赞同：1
> 
> 时间：2012-08-18T10:19:44.367
> 
> 标签：facebook-graph-api, facebook-c#-sdk

我正在使用来自 C# 的 Facebook 的 GraphAPI 在拍摄照片后立即将照片上传到**Facebook 页面**，对于每个会话（大约 3-4 小时），我创建一个新相册，平均上传大约 500 张照片，这些照片是逐个上传的-one（不使用批处理）。

问题是，对于每张图片上传，我的所有粉丝都会在他们的新闻提要上收到通知，这意味着对于每个会话，新闻提要都会充斥着 500（有时甚至 900）“XXXX 页面已上传新照片”帖子，这驱动人们疯了...：/

我认为可行的方法是将这些帖子合并到一个“多张图片”帖子中，该帖子显示多张拼贴在一起的图片（通常这是我在新闻提要中看到的，当有人发布多张图片时，即使是一张-一）

我搜索了可以防止这种情况的设置，但一无所获，我想也许我需要更改上传图片的方式...

我用于上传的代码：

```
FacebookMediaObject uploadObj = new FacebookMediaObject { FileName = fileInfo.Name, ContentType = IMAGE_CONTENT_TYPE };
uploadObj.SetValue(File.ReadAllBytes(fileInfo.FullName));
IDictionary<String, Object> uploadParams = new Dictionary<String, Object>();
uploadParams.Add("message", comment);
uploadParams.Add("image", uploadObj);
JsonObject photo = (JsonObject)fbClient.Post(String.Format("/{0}/photos", albumId), uploadParams); 
```

我正在使用“accounts api”从经理那里获取页面的访问令牌

谢谢。

# java - 检查参数时舍入

> ID：12017759
> 
> 赞同：1
> 
> 时间：2012-08-18T10:19:58.067
> 
> 标签：java, rounding

我设法能够检查输入并判断它是否为 int，并重新询问用户是否不是。但是我想添加一个检查，通过四舍五入将双精度数转换为整数。我玩弄了 Math.round 方法，但无法正常工作。

```
public static int getInteger(String prompt)
{
    int input = 0;
    Scanner user_input = new Scanner( System.in );
    System.out.print("Enter a integer: ");

    while (!user_input.hasNextInt()) { 
        System.out.println("Is not a valid number.");
        user_input.next(); 
    }

    return input;
} 
```

如果有人能告诉我怎么做，那就太好了，干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:05:16.777

```
public static int getInteger()
{
    int input = 0;
    Scanner user_input = new Scanner( System.in );
    System.out.print("Enter a integer: ");

    while (!user_input.hasNextInt() && !user_input.hasNextDouble()) {
        System.out.println("Is not a valid number.");

        user_input.next();
    }

    if(user_input.hasNextInt()) {
        input = user_input.nextInt();
    }
    else {
        input = Math.round((float) user_input.nextDouble()); //I assume here that your number is small as you said
    }

    return input;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:24:23.967

Math.round(double) 返回一个长整数。因此，为了将其转换为 int，您需要执行以下操作：

```
int value = (int) Math.round(double); 
```

但是，我建议在这种情况下使用 long 而不是 int，因为该值可能不适合 int：

```
long value = Math.round(double); 
```

另一方面， Math.round(float) 将返回一个 int。

# jsf - 使用哪个事件 涵盖所有更改

> ID：12017762
> 
> 赞同：4
> 
> 时间：2012-08-18T10:20:36.893
> 
> 标签：jsf, jsf-2, richfaces, ajax4jsf

我想在用户将值输入到 <h:inputText> 时立即更新图标。

我有以下化妆：

```
<h:inputText id="listprice" value="#{mybean.listPrice}">
    <f:converter converterId="mybean.convertPrice"/>
    <a4j:ajax event="keyup" render="infoIcon" />
</h:inputText> 
```

如果我真的**输入**值，一切正常！

但是，如果我重新访问该页面并开始输入值，我的 firefox 会提供我以前会话中的值列表以供选择，现在如果我用鼠标选择其中一个值，**我不会收到事件！**

我理解这一点，因为在这种情况下没有 keyup。所以我绑定了另一个这样的事件处理程序：

```
<h:inputText id="listprice" value="#{mybean.listPrice}">
    <f:converter converterId="mybean.convertPrice"/>
    <a4j:ajax event="keyup" render="infoIcon" />
    <a4j:ajax event="mouseout" render="infoIcon" />
</h:inputText> 
```

...并将从“onchange 到 onmouseout”的各种事件联系起来，但没有成功。

那么我如何立即涵盖这个“从浏览器建议列表中选择的事件”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T11:41:02.130

如果您不想要用户先前会话中的值，您可以使用属性***autocomplete="off"。***

否则你可以使用 onmouseup 事件，它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:41:51.100

这可能是一个已知的错误，这里建议了一个解决方法：[http ://forums.mozillazine.org/viewtopic.php?f=38&t=584166&start=0&st=0&sk=t&sd=a](http://forums.mozillazine.org/viewtopic.php?f=38&t=584166&start=0&st=0&sk=t&sd=a)

链接的帖子非常旧，并且正在讨论 Firefox v2，因此它很有可能不再相关，但是如果您有机会尝试建议的解决方法，也许您可​​以让我们知道它是否有效。

# c# - 如何在 ASP.NET/C# 中动态地将上标添加到数字中？

> ID：12017769
> 
> 赞同：-6
> 
> 时间：2012-08-18T10:21:28.720
> 
> 标签：c#, asp.net, html

我想添加`SuperScript`到数字中`C#`。

例子：

```
1st, 2nd ...... 
```

这我想动态地做`ASP.NET/C#`

请提出最佳解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T10:33:06.240

我不太确定你到底想要什么。

你可以做这样的事情。

假设您有一个 ASP.NET 标签

```
<asp:Label ID="sample" runat="server" Text=""></asp:Label> 
```

然后在后面的代码中你可以做这样的事情

```
sample.Text=string.Format("1<sup>st</sup>"); 
```

这将输出为 1 ^(st)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T10:40:06.643

使用`<sup>`标签是标记这些值的正确方法。

> 这我想在asp.net c#中动态地做

如果您对语言环境有所了解，则可以自动将`<sup>`标签添加到文本中。

## 匹配

```
// this should go in a helper class

// Obviously this depends on locale. The regex can be altered to accept numbers
// with as many digits as desired. I think "th" is always an appropriate suffix
// in English (not sure).
private static readonly Regex _regex = new Regex( @"^(\d{1,8})(st|nd|rd|th)$", RegexOptions.Compiled );

public static string AddSuper( string value ) {
    return _regex.Replace( value, "$1<sup>$2</sup>" );
} 
```

## 用法

```
// in code-behind
this.litMyText.Text = AddSuper( "1st" );

// a few test cases (also demonstrates processing multiple items)

// should match
var testValues = new[] { "1st", "2nd", "10th", "20th", "1000th", "3rd", "19th" };

foreach( string val in testValues ) {
    Response.Write( AddSuper( val ) );
}

// should not match
testValues = new[] { "test", "nd", "fourth", "25", "hello world th", "15,things", "1 1 1thousand" };

foreach( string val in testValues ) {
    Response.Write( AddSuper( val ) );
} 
```

## 匹配值的输出

```
1<sup>st</sup>
2<sup>nd</sup>
10<sup>th</sup>
20<sup>th</sup>
1000<sup>th</sup>
3<sup>rd</sup>
19<sup>th</sup> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T10:23:01.433

您可以使用`<sup>`标签：

```
1<sup>st</sup> 2<sup>nd</sup>, ... 
```

将呈现为： 1 ^(st) 2 ^(nd) , ...

# html - 你只能用表格设计边框吗？

> ID：12017771
> 
> 赞同：0
> 
> 时间：2012-08-18T10:22:31.517
> 
> 标签：html, css, html-table, border

我正在学习 HTML 和 CSS，我做了一些带有导航、侧边栏、浮动内容等的简单网站。

我进入了一个只用表格制作的网站（所以我用谷歌搜索，发现这是一件坏事，然后我也用谷歌搜索了如何替换它，但我找不到任何不是 CSS3 的东西 - 重要，我不还想使用 CSS3！）。

所以基本上，这个网站有 3 列：表格上方的标题，然后分成 3 列`<tr>`作为侧边栏和主要内容。

右侧的每个小侧边栏由另一个表格组成，边框有一个名为“content-right”、“content-left”的图像，带有“关闭边框并打开它”的样式，以及中间的图像那（我猜）它延伸以保持风格。

我相信，当我阅读时，表格是设置网站样式的不好方法……但我觉得这是设置侧边栏样式以使其从各个方面看起来都像我想要的唯一方法。

我希望你明白我的意思，我不记得我看过的网站，我再也找不到了，我试图尽可能清楚地解释，对不起，如果它不好，我还在正如我所说的学习过程。

所以基本上，如果你明白我的意思，你能告诉我，还有哪些其他方式（可能我猜是 div，或者可能是边框？）可以实现这个目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:09:02.700

首先，要明白使用`tables`并不是万能的；它们仅在用于制作**布局**时才被认为是坏的。您网站的**布局**基本上是一个大纲，它定义了您的内容的分发和排列方式。

在您的情况下，这是一个仅使用**CSS**并创建相同布局的示例：

```
<div class = "header">
    Header!
</div>
<div class = "container">
    <div class = "sidebar">
        Sidebar 1!
    </div><div class = "main">
        Main content!
    </div><div class = "sidebar">
        Sidebar 2!
    </div>
</div> 
```

CSS：

```
body {
    font-family: Arial, Helvetica, Sans-Serif;
    color: white;
}
.header {
    margin: 10px 10px 10px 10px;
    height: 100px;
    background-color: rgb(0, 140, 200);
}
.container {
    height: 500px;
    margin: 10px 10px 10px 10px
}
.sidebar {
    width: 15%;
    height: 100%;
    background-color: rgb(34, 177, 76);
    display: inline-block;
}
.main {
    background-color: rgb(0, 140, 200);
    display: inline-block;
    width: 70%;
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:07:21.717

您告诉您学习 HTML 和 CSS，如果学习者不是很好的做法，请尝试在 960 网格系统 CSS 中创建表格。 [这个链接可以帮助你](http://www.webdesignerdepot.com/2010/03/fight-div-itis-and-class-itis-with-the-960-grid-system/)

# google-chrome - 禁用提交按钮会停止 chrome/IE8 中的请求

> ID：12017772
> 
> 赞同：3
> 
> 时间：2012-08-18T10:22:41.963
> 
> 标签：google-chrome, internet-explorer-8, jquery-attributes

我有一个带有三四个输入字段和一个提交按钮的简单表单。

要实现的功能：点击提交按钮时，提交按钮应该被禁用，这样就不能再点击其他按钮了。我无法隐藏按钮。

现在，当我使用 jquery/javascript 禁用提交按钮时，请求也被禁用并且表单没有在 CHROME/IE8 中发布。

有什么解决办法？？？

编辑：

代码：

`$('#submit').attr('disabled', true); OR $('#submit').prop('disabled', true);// for IE`

我什至尝试过`$('#submit').attr('disabled', 'disabled');`，但结果相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T10:49:03.133

你说你不能隐藏按钮，但这就是你需要的答案。

当我遇到这个问题时，我隐藏了按钮并用相同大小的小型“加载”微调器图形替换它。

这涉及向用户提供对所发生事件的合理反馈的问题，以及解决禁用按钮问题。

如果您确实需要按钮保持原位但被禁用，那么您可以使用相同的技术来隐藏真实按钮并在其位置显示一个看起来相同但被禁用的替代按钮。

顺便说一句，当我遇到这个问题时，并不是表格根本无法发布；只是浏览器没有在它发布的字段中包含禁用按钮。如果您的后端脚本依赖于作为发布值之一的按钮，这显然是一个问题。如果这是它发生的方式，那么另一个解决方案是有一个隐藏字段，并在禁用按钮时将按钮值复制到其中。然后，这仍然会提交表单，而不会发布禁用的按钮，但您需要的值将出现在隐藏字段中。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:08:53.410

在点击事件上 - 提交表单。

```
$(document).ready(function(){
    $('#submit-button-id').click(function(e) {
        //stop normal submit
        e.preventDefault();

        //disable button
        $(this).attr('disabled','disabled');

        //submit form
        $('#form-id').submit();
    });
}); 
```

这也有效。

```
$(document).ready(function(){
    $('#form-id').submit(function(e) {
        e.preventDefault();
        somefunction();
    });
});

function somefunction() {
    $('#form-id').unbind('submit');
    $('#submit-button-id').attr('disabled','disabled');
    $('#form-id').submit();
} 
```

# html - 自动排列列表项，如表格列（书籍词汇表样式）

> ID：12017773
> 
> 赞同：2
> 
> 时间：2012-08-18T10:22:49.033
> 
> 标签：html, css, html-lists

我想要一个按字母顺序排列的列表。

**问题：**

1.  列表项将具有固定宽度
2.  列表将具有固定的高度。
3.  项目应在指定高度之后从顶部开始

**请检查图像以供参考。：** ![在此处输入图像描述](../Images/9026b4878a85324b5a9be9b86b79c553.png)

**[我得到了什么](http://jsfiddle.net/surendraVsingh/JABrp/)**

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T11:24:07.867

**您可以使用CSS3**列轻松实现所需的行为。这是有关如何执行此操作的示例。

**HTML**：

```
<ul>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
    <li>List item</li>
</ul> 
```

**CSS**：

```
ul {
    -webkit-column-count: 3; /*3 is just a placeholder -- can be anything*/
    -moz-column-count: 3;
    column-count: 3;
    width: 300px; /*your fixed width*/
    height: 100px; /*your fixed height*/
} 
```

**结果**： ![结果](../Images/e9dc9181cd392002e1d67e497f3ef0ad.png)

**Jquery Alternative：** Taylor Smith 的一个很棒的插件[Jquery column sort](https://github.com/taylorsmith/jquery-column-sort)

我希望以任何方式有所帮助！

# scala - Scala Swing：在 SplitPane 上设置相对分隔符位置

> ID：12017776
> 
> 赞同：2
> 
> 时间：2012-08-18T10:23:24.850
> 
> 标签：scala, scala-swing

在创建拆分窗格时将 Scala Swing SplitPane 上的相对（双）分隔符位置设置为所需值似乎几乎是不可能的。拆分器几乎总是出现在其父组件的顶部。我尝试过使用重新验证和重新绘制的各种组合，但似乎没有任何效果。如果我在构造函数中使用拆分窗格实例化一个框架，使其可见，然后设置拆分窗格值，则分隔符出现在正确的位置。如果我通过从用户界面调用函数来设置它，它也会转到正确的位置。但我希望能够将 Splipanes 引入现有的框架中。

这是一个已知问题吗？有解决办法吗？我应该在四分之一秒或半秒后使用计时器来设置分隔线位置吗？- 非常混乱，但应该工作。

一些示例代码，仍然没有达到预期的结果：

```
val newSplit = new CSplit(Right(canv1), Right(newMapCanv))        
panel.layout(newSplit.pane) = BorderPanel.Position.Center
thisScn.visible = true
newSplit.pane.dividerLocation = 0.5 
newSplit.pane.bottomComponent = canv1
newSplit.pane.topComponent = canv2
newSplit.pane.dividerLocation = 0.5
newSplit.pane.revalidate
newSplit.pane.repaint
panel.revalidate
panel.repaint
newSplit.pane.dividerLocation = 0.5
newSplit.pane.revalidate
newSplit.pane.repaint
newSplit.pane.dividerLocation = 0.5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T02:20:26.570

尝试将每个组件的 preferredSize 设置为 0 -> 0。这是我在处理 SplitPane 时使用的一些代码

```
oneTouchExpandable = true
resizeWeight = 0.5
leftComponent.preferredSize = 0 -> 0
rightComponent.preferredSize = 0 -> 0 
```

# asp.net - 在 ASP.NET 中使用 Twitter 登录而不导航到 Twitter（登录页面）

> ID：12017780
> 
> 赞同：0
> 
> 时间：2012-08-18T10:23:51.343
> 
> 标签：asp.net, twitter

我正在用 ASP.NET 开发一个应用程序。我的要求是在 ASP 应用程序中提供带有 Twitter 的签名。最初 Twitter API 允许将用户导航到 Twitter 站点，并且用户需要输入他自己的凭据......如果提供的值是正确的，那么它将重定向到带有授权令牌和验证器的回调 URL。但我想设计一个页面（在我的原始应用程序中）来提示用户输入用户凭据（Twitter），并将这些值与 API 密钥一起发送到 Twitter API。可能吗？如果是的话，你能把程序发给我们吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:10:25.953

[OAuth](http://en.wikipedia.org/wiki/OAuth)就是以这种方式实现的，您无能为力。

OAuth 的目的是**不允许最终用户在您的网站中设置自己的凭据**，而是在提供者网站（本例为 Twitter）中设置自己的凭据。

您应该阅读更多关于[OAuth](http://en.wikipedia.org/wiki/OAuth)工作的信息，因为有许多其他网站在使用它。

# delphi - TActionMainMenuBar 渐变绘制

> ID：12017787
> 
> 赞同：3
> 
> 时间：2012-08-18T10:25:15.263
> 
> 标签：delphi, delphi-xe

我正在尝试通过创建我自己的从该组件派生的组件来扩展 TActionMainMenuBar。

我想做的一件事是允许沿菜单栏绘制渐变。我已经设法做到了，但是当分配的 TActionManager 设置为 XPStyle 时，菜单项会出现问题。

查看这些具有不同 TActionManager 样式集的图像：

**平台默认值（鼠标悬停并按下）：**

![在此处输入图像描述](../Images/179aed2497d64cbd4866456eea91e0a9.png) ![在此处输入图像描述](../Images/c523873025ac1bf822f76eaf3c5a08f6.png)

当 TActionManager 设置为 Platform Default 时，背景会正确显示，您可以很好地看到渐变显示。

然而，当 TActionManager 设置为 XPStyle 时，某些项的渐变绘制不正确，只需查看第一项：

**XP 样式（鼠标悬停并按下）：**

![在此处输入图像描述](../Images/ee9dfd5ce63aea53e2c2911f0f3c93c3.png) ![在此处输入图像描述](../Images/b9386bb478dbfd396f0c4400d969c8be.png)

如您所见，外观并不好。

我已经在 Paint 中编辑了图像，大致了解了我希望它的外观：

**鼠标悬停并选中**

![在此处输入图像描述](../Images/49c17dc481267193a97a24a2c0effa9a.png) ![在此处输入图像描述](../Images/799b0437f4a2b6c9c055b448efa34db8.png)

我认为这将允许创建一些有趣的菜单样式。

这是我到目前为止的代码：

```
unit uMyMenu;

interface

uses
  Classes,
  Types,
  Graphics,
  GraphUtil,
  ActnMan,
  ActnCtrls,
  ActnMenus,
  PlatformDefaultStyleActnCtrls,
  XPActnCtrls,
  XPStyleActnCtrls;

type
  TMyActionMenu = class(TActionMainMenuBar)
  private
    FColorStart: TColor;
    FColorEnd: TColor;

    procedure SetColorStart(AValue: TColor);
    procedure SetColorEnd(AValue: TColor);
  protected
    procedure Paint(Sender: TObject);
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
  published
    property ColorStart: TColor read FColorStart write SetColorStart default clSkyBlue;
    property ColorEnd: TColor read FColorEnd write SetColorEnd default clHighlight;
  end;

procedure Register;

implementation

{ TMyActionMenu }

constructor TMyActionMenu.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);

  SetColorStart(clSkyBlue);
  SetColorEnd(clHighlight);
  ParentBackground := True;
  ParentColor := False;
  OnPaint := Paint;
end;

destructor TMyActionMenu.Destroy;
begin
  inherited;
end;

procedure TMyActionMenu.SetColorStart(AValue: TColor);
begin
  if FColorStart <> AValue then
  begin
    FColorStart := AValue;
    Invalidate;
  end;
end;

procedure TMyActionMenu.SetColorEnd(AValue: TColor);
begin
  if FColorEnd <> AValue then
  begin
    FColorEnd := AValue;
    Invalidate;
  end;
end;

procedure TMyActionMenu.Paint(Sender: TObject);
var
  Rect: TRect;
begin
  Rect := GetClientRect;

  GradientFillCanvas(TMyActionMenu(Sender).Canvas, FColorStart,
    FColorEnd, Rect, gdVertical);
end;

procedure Register;
begin
  RegisterComponents('Standard', [TMyActionMenu]);
end;

end. 
```

我不确定从哪里开始或改变什么，所以我期待看到您的评论和答案。

**更新**

例如，将 TActionMainMenuBar 放置在渐变面板中，将 ParentBackground 设置为 True 更合适。所以我应该考虑使用 SetSubComponent 并将我的 TMyActionMenu 放入类似的面板容器中，然后以这种方式将渐变绘制到面板上。

同时，尽管我将把这个问题留给进一步的意见和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:38:52.793

有一个俄罗斯组件也可以进行渐变绘画。我没有测试它，我什至不知道它是否满足你的要求，但也许你从他们的源代码中得到一些想法。这是链接（我使用谷歌翻译将网站翻译成英文）： [http://translate.google.com/translate?langpair=ru|en&u=http%3A%2F%2Fwww.roschinspb.narod.ru%2Fdevelop。 html](http://translate.google.com/translate?langpair=ru|en&u=http%3A%2F%2Fwww.roschinspb.narod.ru%2Fdevelop.html)

# c++ - 移除 QWidget 周围的额外间距

> ID：12017789
> 
> 赞同：10
> 
> 时间：2012-08-18T10:25:38.933
> 
> 标签：c++, qt, user-interface

如何删除 QWidget 周围的额外间距？

这是一个简单的例子。小部件的空间是灰色的；你看，它的内容（图像、文本和按钮）周围有一些空间（大约 0.3-0.4 厘米）。

小部件的空间被突出显示

```
setAutoFillBackground(true);
QPalette pal(palette());
pal.setColor(QPalette::Background, QColor("#e5e5e5"));
setPalette(pal); 
```

![例子](../Images/c0989675aed06f073bb0ab10f46f3f6f.png)

这是内容（通过运行`setStyleSheet( "background-color: red");`整个小部件来突出显示。

![例子](../Images/fe7785efe75fa0bf653e91c245506e16.png)

“移除额外间距”是指移除内容周围约 0.2-0.3 厘米的灰色空间。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-18T10:29:38.547

使用 方法更改您添加 QWidget 的布局的内容边距以及您希望更改的任何其他布局[`setContentsMargins()`](http://qt-project.org/doc/qt-4.8/qlayout.html#setContentsMargins)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-09T23:53:07.223

您可以使用两个函数来消除布局中的所有间距：

```
1)QLayout::setMargin(0)
2)QLayout::setSpacing(0) 
```

# image - 在圆柱投影中出现扭曲图像

> ID：12017790
> 
> 赞同：29
> 
> 时间：2012-08-18T10:25:41.063
> 
> 标签：image, 3d, geometry, computer-vision, cylindrical

我想以一种看起来像是来自圆柱体的投影的方式扭曲平面图像。

我有一个像这样的平面图像：

![我有这个平面图像](../Images/0b8174d0ba1c023df3a00589ff35a7d4.png)

我想在 2D 图像中显示它是这样的：

![输出图像应该是这样的](../Images/e92b1b124dbe4d9aa16112a1238e11f9.png)

我对几何投影有点退步了。我访问了类似[这样](https://stackoverflow.com/questions/4488868/opencv-wrap-image-to-cylindrical-coordinates)的其他一些问题，但我不明白如何将这些圆柱坐标（theta 和 rho）表示为笛卡尔（x，y）平面中的 x，y 坐标。你们能帮我举一个详尽的例子吗？我正在为 iPhone 编写代码，我没有使用任何第三方库，如 OpenCV 等。

谢谢一堆。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-19T19:58:54.123

这是两部分的答案，数学和代码

## 数学

我喜欢这个问题，因为所涉及的投影很有趣，但数学仍然可以手动解决，没有太多困难。首先，重要的是要了解为什么图像会以这种方式扭曲。假设我们有一个平面图像，前面有一个凹圆柱体。

![演示图片 1](../Images/377e31f232a1f884776b2bad4e071e7b.png)

第一步是进行正交投影，将图像移动到曲面上。

![演示图 2](../Images/17e5805614059424a02fb38aa3d8c204.png)

然后将这些点以透视的方式投影回图像平面上。请注意，在这种情况下，整个图像会缩小，因为圆柱体的所有部分都具有比图像平面更大的 z 坐标。在您的情况下，圆柱体在左右边缘接触图像平面，因此不会发生收缩。当这些点被投影回来时，它们不再在图像平面上形成一条直线，因为圆柱的 z 坐标随 x 变化，所以有一条曲线。

![演示图 3](../Images/d3a3ec30f02e0fdd3054705361346065.png)

第一个技巧是我们实际上想要向后表示这个过程。您可能首先认为您想要获取原始图像中的每个像素并将其移动到新图像中。如果您检查新图像中出现在旧图像中的每个像素并设置其颜色，实际上效果会更好。这意味着你需要做 3 件事。

1.  设置气缸参数
2.  从相机投射一条射线，穿过新图像中的每个点，并在圆柱体上找到它的 x,y,z 坐标
3.  使用正交投影将该射线移回图像平面（仅意味着删除 z 分量）

跟踪所有内容可能有点棘手，因此我将尝试使用一致的术语。首先，我假设你想保证你的圆柱体在边缘接触到你的图像。如果这是真的，那么您可以选择的 2 个自由参数是圆柱半径和焦距。

zx平面上的圆方程为

```
x^2+(z-z0)^2 = r^2 
```

假设圆的中心位于 z 轴上。如果圆柱体的边缘将接触宽度为 w 焦距为 f 的像平面的边缘，则

```
omega^2+(f-z0)^2 = r^2 //define omega = width/2, it cleans it up a bit
z0 = f-sqrt(r^2-omega^2) 
```

现在我们知道了圆柱体的所有参数，我们继续进行第 2 步，从相机投影线，通过 xim 处的图像平面到 xc 处的圆柱体。这是术语的快速图表。

![演示4](../Images/1d4f20eae9a69e515a5fea1eb225d280.png)

我们知道我们投影的线从原点开始并在 xim 处穿过图像平面。我们可以把它的方程写成

```
x = xim*z/f 
```

因为我们想要 x 坐标通过圆柱体时结合方程

```
xim^2*z^2/f^2 + z^2 - 2*z*z0 +z0^2 - r^2 = 0 
```

您可以使用二次方程求解 z，然后将其代入线性方程以获得 x。这两个解决方案对应于线与圆相接触的两个位置，因为我们只对图像平面之后发生的那个感兴趣，并且那个总是会有更大的 x 坐标，使用 -b + sqrt(...) . 然后

```
xc = xim*z/f;
yc = yim*z/f; 
```

移除正交投影的最后一步很简单，只需删除 z 分量即可。

## 代码

我知道您说过您没有使用 openCV，但我将在演示中将其用作图像容器。所有操作都是逐个像素完成的，因此您应该不难将其转换为适用于您正在使用的任何图像容器。首先，我创建了一个函数，将最终图像中的图像坐标转换为原始图像中的坐标。OpenCV 将其图像原点放在左上角，这就是为什么我从减去 w/2 和 h/2 开始，最后将它们加回

```
cv::Point2f convert_pt(cv::Point2f point,int w,int h)
{
    //center the point at 0,0
    cv::Point2f pc(point.x-w/2,point.y-h/2);

    //these are your free parameters
    float f = w;
    float r = w;

    float omega = w/2;
    float z0 = f - sqrt(r*r-omega*omega);

    float zc = (2*z0+sqrt(4*z0*z0-4*(pc.x*pc.x/(f*f)+1)*(z0*z0-r*r)))/(2* (pc.x*pc.x/(f*f)+1)); 
    cv::Point2f final_point(pc.x*zc/f,pc.y*zc/f);
    final_point.x += w/2;
    final_point.y += h/2;
    return final_point;
} 
```

现在剩下的就是在旧图像上对新图像中的每个点进行采样。有很多方法可以做到这一点，我在这里做了我所知道的最简单的一种，双线性插值。此外，这仅设置为在灰度上工作，使其在颜色上工作很简单，只需将该过程应用于所有 3 个通道。我只是认为这样会更清楚一些。

```
 for(int y = 0; y < height; y++)
{
    for(int x = 0; x < width; x++)
    {
        cv::Point2f current_pos(x,y);
        current_pos = convert_pt(current_pos, width, height);

        cv::Point2i top_left((int)current_pos.x,(int)current_pos.y); //top left because of integer rounding

        //make sure the point is actually inside the original image
        if(top_left.x < 0 ||
           top_left.x > width-2 ||
           top_left.y < 0 ||
           top_left.y > height-2)
        {
            continue;
        }

        //bilinear interpolation
        float dx = current_pos.x-top_left.x;
        float dy = current_pos.y-top_left.y;

        float weight_tl = (1.0 - dx) * (1.0 - dy);
        float weight_tr = (dx)       * (1.0 - dy);
        float weight_bl = (1.0 - dx) * (dy);
        float weight_br = (dx)       * (dy);

        uchar value =   weight_tl * image.at<uchar>(top_left) +
        weight_tr * image.at<uchar>(top_left.y,top_left.x+1) +
        weight_bl * image.at<uchar>(top_left.y+1,top_left.x) +
        weight_br * image.at<uchar>(top_left.y+1,top_left.x+1);

        dest_im.at<uchar>(y,x) = value;
    }
} 
```

这是 f = w/2 和 r = w 的示例输出。

![在此处输入图像描述](../Images/2eb362c83a2fd86a32f7f2246db5ef1f.png)

# iphone - UIDatePicker 仅显示年份

> ID：12017791
> 
> 赞同：16
> 
> 时间：2012-08-18T10:25:48.523
> 
> 标签：iphone, objective-c, ios

有没有办法让 UIDatePicker 只显示一年？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-18T10:47:48.143

我有一些我要删除的代码，但是如果它在某个地方在线，那么这个片段会更好。这并不奇怪，但它是可搜索的！

**用于创建自 1960 年以来所有年份的数组的 Objective-C 代码**。非常适合输入`UIPicker`

```
//Get Current Year into i2
NSDateFormatter* formatter = [[[NSDateFormatter alloc] init]autorelease];
[formatter setDateFormat:@"yyyy"];
int i2  = [[formatter stringFromDate:[NSDate date]] intValue];

//Create Years Array from 1960 to This year
years = [[NSMutableArray alloc] init];
for (int i=1960; i<=i2; i++) {
    [years addObject:[NSString stringWithFormat:@"%d",i]];
} 
```

`UIPickerView`数据源和委托方法：

```
- (NSInteger)numberOfComponentsInPickerView: (UIPickerView*)thePickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component
{
    return [years count];
}
- (NSString *)pickerView:(UIPickerView *)thePickerView
titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    return [years objectAtIndex:row];
} 
```

不要忘记界面中的声明

```
//Data
NSMutableArray *years; 
```

它的输出是

![在此处输入图像描述](../Images/1083c3b8536f7a1c2eef7a2d0e3d6912.png)

[从这里](http://divya-ioscoder.blogspot.com.au/2012/04/uipicker-iphone-sdk-populated-with-year.html)引用

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T10:30:13.483

你不能用 来做到这一点`UIDatePicker`，但你可以用`UIPicker`。

您需要为这些年创建一个数组，并将它们添加到`UIPicker`使用`UIPicker`委托

[这](http://divya-ioscoder.blogspot.com.au/2012/04/uipicker-iphone-sdk-populated-with-year.html)是一个教程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T00:51:49.517

我无法发表评论，但我在玩弄 Wolvorin 的答案，我决定采取一种方式，让最近一年成为 Picker 的顶部。目前，他的代码最古老到最近几年。

我所做的所有更改都是在 viewDidLoad 中的 NSMutableArray 设置中，而不是他的：

```
//Create Years Array from 1960 to This year
years = [[NSMutableArray alloc] init];
for (int i=1960; i<=i2; i++) {
    [years addObject:[NSString stringWithFormat:@"%d",i]];
} 
```

我用了：

```
years = [[NSMutableArray alloc] init];
for (int i1=i2; i1<=i2 & i1>=1920; i1--) {
    [years addObject:[NSString stringWithFormat:@"%d",i1]];
} 
```

从最近的日期开始以相反的顺序执行 for，然后减去一年（并将其添加到数组中）直到 1920 年。

我的公式：

```
int i1=i2; i1<=i2 & i1>=1920; i1-- 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-21T22:26:22.860

**只需使用Swift 3**更新这篇文章中的现有答案：

```
var yearsTillNow : [String] {
    var years = [String]()
    for i in (1970..<2018).reversed() {
        years.append("\(i)")
    }
    return years
} 
```

只需将其用于您的`UIPickerView`数据源。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-05T21:21:36.400

不能只设置年和月。自 iOS 13.5.1 起仅这些模式可用

> *   时间：以小时、分钟和（可选）AM/PM 名称显示日期的模式。显示的确切项目及其顺序取决于区域设置。这种模式的一个例子是 [ 6 | 53 | 下午]。
>     
>     
> *   date：一种以月、月中的天数和年数显示日期的模式。这些项目的确切顺序取决于区域设置。这种模式的一个例子是 [ 十一月 | 15 | 2007 年]。
>     
>     
> *   dateAndTime：一种将日期显示为统一的星期几、月份和月份值以及小时、分钟和（可选）AM/PM 名称的模式。这些项目的确切顺序和格式取决于区域设置。这种模式的一个例子是 [ 11 月 15 日星期三 | 6 | 53 | 下午]。
>     
>     
> *   countDownTimer：显示小时和分钟值的模式，例如 [ 1 | 53]。应用程序必须设置一个计时器以适当的时间间隔触发，并将日期选择器设置为秒数。[UIDatePicker.Mode - developer.apple.com](https://developer.apple.com/documentation/uikit/uidatepicker/mode)

* * *

您可以使用自定义 UIPickerView 构建它。

```
class DatePickerViewController: UIViewController {
    var dates =  [Date]()
    override func viewDidLoad() {
        super.viewDidLoad()
        self.view.backgroundColor = .white

        var date = Date().addYear(n: -10)
        let endDate = Date().addYear(n: 10)

        repeat {
            date = date.addMonth(n: 1)
            dates.append(date)
        } while date < endDate

        let picker = UIPickerView()
        picker.dataSource = self
        picker.delegate = self
        picker.translatesAutoresizingMaskIntoConstraints = false
        view.addSubview(picker)

        picker.leadingAnchor.constraint(equalTo: view.safeAreaLayoutGuide.leadingAnchor).isActive = true
        picker.trailingAnchor.constraint(equalTo: view.safeAreaLayoutGuide.trailingAnchor).isActive = true
        picker.bottomAnchor.constraint(equalTo: view.safeAreaLayoutGuide.bottomAnchor).isActive = true
        picker.heightAnchor.constraint(equalToConstant: 500).isActive = true
    }
}

extension  DatePickerViewController: UIPickerViewDataSource {
    func numberOfComponents(in pickerView: UIPickerView) -> Int {
        return 1
    }

    func pickerView(_ pickerView: UIPickerView, numberOfRowsInComponent component: Int) -> Int {
        return self.dates.count
    }

    func pickerView(_ pickerView: UIPickerView, titleForRow row: Int, forComponent component: Int) -> String? {
        let date = self.dates[row]
        return date.stringDate()
    }

    func view(forRow row: Int, forComponent component: Int) -> UIView? {
        let label =  UILabel()
        return label
    }
}

extension  DatePickerViewController: UIPickerViewDelegate {
    func pickerView(_ pickerView: UIPickerView, didSelectRow row: Int, inComponent component: Int) {
        let date = self.dates[row]
        // Date that the user select. 
        print( date, date.stringDate())
    }
}

extension Date {
    public  func addYear(n: Int) -> Date {
        let calendar = Calendar.current
        return calendar.date(byAdding: .year, value: n, to: self)!
    }

    public  func addMonth(n: Int) -> Date {
        let calendar = Calendar.current
        return calendar.date(byAdding: .month, value: n, to: self)!
    }

    public  func stringDate() -> String {
        let calendar  = Calendar.current
        let dateFormatter = DateFormatter()

        dateFormatter.timeZone = calendar.timeZone
        dateFormatter.locale = calendar.locale
        // Use YYYY to show year only. 
        // Use MMMM to show month only. 
        dateFormatter.setLocalizedDateFormatFromTemplate("MMMM YYYY")

        let dateString = dateFormatter.string(from: self)
        return dateString
    }
} 
```

* * *

只需更改以下两行 - 添加/减去您希望显示的年份。

```
var date = Date().addYear(n: -10) 
let endDate = Date().addYear(n: 10) 
```

* * *

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-13T15:06:03.233

我稍微更改了 Sharukh Mastan 的代码，以始终在顶部显示当前年份。

```
var formattedDate: String? = ""

let format = DateFormatter()
format.dateFormat = "yyyy"
formattedDate = format.string(from: date)

var yearsTillNow: [String] {
    var years = [String]()
    for i in (Int(formattedDate!)!-70..<Int(formattedDate!)!+1).reversed() {
        years.append("\(i)")
    }
    return years
}

print(yearsTillNow) 
```

这将打印 70 年前的一系列年份，您可以将其用作 UIPickerView 数据源

# c++ - c++ operator() 行为

> ID：12017796
> 
> 赞同：2
> 
> 时间：2012-08-18T10:26:28.030
> 
> 标签：c++, c++-standard-library

考虑一下，我使用 std::for_each 和带有重载 operator() 的对象来积累一些关于向量内容的数据：

```
#include <iostream>
#include <vector>
#include <algorithm>

struct A{
    int a;
    A(): a(0){}

    void operator()(int i) {
        if(i)   a++;
        std::cout << "a:" << a << std::endl;
    }
};

int main(int argc, char *argv[]) {
    //test data
    std::vector<int> vec;
    vec.push_back(1);
    vec.push_back(1);
    vec.push_back(0);

    //accumulator
    A accum;

    std::for_each(vec.begin(), vec.end(), accum);
    std::cout << "non-zero elements:" << accum.a << std::endl;

    return 0;
} 
```

这[输出](http://ideone.com/LmRRK)：

```
a:1
a:2
a:2
non-zero elements:0 
```

为什么是`non-zero elements`0？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T10:29:10.953

[`std::for_each()`](http://en.cppreference.com/w/cpp/algorithm/for_each)不通过引用获取其第三个参数，因此制作了一个*副本*。`accum`

如果您添加`std::cout`语句，`A::A()`您可以见证这种行为。

请注意，您可以使用以下方法解决此特定问题[`std::count_if()`](http://en.cppreference.com/w/cpp/algorithm/count)：

```
std::cout << "non-zero elements: "
          << std::count_if(vec.begin(),
                           vec.end(),
                           [](const int i) { return i != 0; })
          << std::endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T10:30:19.127

通常¹标准库提供的算法不会通过引用获取函子，而是按值获取，因此您无法“从外部”检查其最终状态，因为您传递的函子未被触及。

幸运的是，`for_each`在将仿函数应用于所有元素后返回一个副本，因此，您需要做的是：

```
accum = std::for_each(vec.begin(), vec.end(), accum); 
```

请注意，由于这里涉及到两个副本，因此通常最好使用副本便宜的“普通”仿函数，并且如果编译器生成的复制构造函数不起作用，则提供一个复制构造函数很重要。

尽管如此，正如其他人指出的那样，对于您正在执行的任务，还有更适合的算法。

* * *

1.  Nitpicker 的角落：我实际上并没有检查所有这些，尽管这似乎是我看到的所有我使用的“正常”行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T10:35:58.383

标准库算法通常会复制它们的参数函子，因此对其状态的机会将不可见。

您真的在这里尝试使用错误的算法。

`for_each`旨在将操作应用于序列中的每个元素，仅此而已。

如果你想遍历序列并积累某种数据，你应该使用`std::accumulate`...。:)

该算法采用一个附加参数，即“状态”，一旦算法完成，就会返回此状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T10:40:21.503

正如其他人所说，`A`使用了不同的实例，因为`std::for_each`不将仿函数作为参考。如果您[稍微修改代码](http://ideone.com/vIGx1)以打印以下地址，您可以看到这一点`A::a`：

```
a:1  @0xbf86902c
a:2  @0xbf86902c
a:2  @0xbf86902c
non-zero elements:0  @0xbf869050 
```

# netbeans - Netbeans PHPUnit Selenium 带代理

> ID：12017799
> 
> 赞同：0
> 
> 时间：2012-08-18T10:27:21.717
> 
> 标签：netbeans, selenium, phpunit

## 问题

我正在尝试在 Netbeans 中将 PHPUnit 与 Selenium 一起使用，并且在使用需要用户名和密码的代理运行测试时遇到问题。

我创建了一个新的 firefox 配置文件并安装了一个名为 AutoAuth 的插件，用于保存代理的用户名和密码。

我在启动 Selenium 服务器时指定了这个自定义的 firefox 配置文件，所以当我从命令行运行我的测试时，它不会提示我输入用户名或密码。

## 环境

通过 Netbeans 运行测试时，Firefox 提示我输入代理的用户名和密码。如果我检查 Netbeans 已启动的浏览器实例的 firefox 扩展，它没有安装 AutoAuth。

AutoAuth 安装在默认配置和我创建的自定义配置文件上，所以我不确定 Netbeans 启动的这个 Firefox 实例的配置文件存储在哪里。

## 我尝试过的修复

使用用户名和密码在 Netbeans 中指定手动代理，但这甚至不会启动浏览器，它仅在我将其设置为无代理时才有效

使用参数 -p 在 Netbeans 选项中指定浏览器，但这没有效果。

在我为 Firefox Netbeans 启动的实例安装 AutoAuth 时使测试进入睡眠状态，这会安装 s，但是当我重新运行测试时，扩展没有保存。

这让我发疯了有没有人让 phpunit 在 Netbeans 中使用代理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:35:50.233

您是否尝试在代码中设置 Firefox 配置文件？如果没有，请尝试

# sql-server - SQL 到实体 - 不能让“String.Contains”返回“case-INSENSITIVE”结果

> ID：12017800
> 
> 赞同：1
> 
> 时间：2012-08-18T10:27:24.433
> 
> 标签：sql-server, linq-to-entities, collation

我有一个执行“LINQ to Entities”查询的 C# 应用程序。

它连接的数据库是 MS SQL 2012。数据库排序规则是“希伯来语 CI”。

仍然 - 如果我执行如下查询：

```
return users.Where(us => us.FirstName.Contains("joh")); 
```

它不会获取具有**'John' 的**'FirstName' 的记录。只有名字**是 'john' 的**。

我以为这是由数据库排序规则在SQL Server端确定的，但显然我错了......

另外 - 我检查了“名字”列的排序规则，并将其设置为“数据库默认值”。

我在这里想念什么？

.

**[ 更新 ]**

阅读一些评论后 - 我需要澄清：

我使用的是 LINQ-TO-ENTITIES，而不是本地查询。

完整的代码是：

```
public List<User>   GetUsersByName(IMyDBEntities context, String filterBy)
{
    IEnumerable<User> users = context.Users;

    return users.Where(us => us.FirstName.Contains("filterBy"));  // filterBy = 'joh'
} 
```

完整功能包含更多过滤器（按年龄过滤，按地址过滤等...）

这一切都发生在“服务器”用户列表上，只有当我执行“.ToList()”时，查询才会真正使用所有过滤器触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:29:32.730

很可能，您正在对本地集合执行此 Where 调用，这意味着您获得了 LINQ to Objects 语义。您需要将其移至数据库查询。

看到更新的代码问题很明显：

```
IEnumerable<User> 
```

通过将序列变量声明为本地序列而不是查询，您可以使编译器使用本地查询运算符，而不是远程查询运算符。

编译时类型必须是`IQueryable<User>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:04:10.183

如果此 linq 映射到 sql，它将使用 sql server 设置...但在您的情况下，`users`它已经是一个对象列表（否则您的字符串比较将依赖于数据库服务器），因此您可以执行以下操作：

```
return users.Where(us => us.FirstName.Contains("joh", StringComparer.OrdinalIgnoreCase)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T10:29:01.840

这是实现此目的的一种方法：

```
return users.Where(us => us.FirstName.ToLower().Contains("joh")); 
```

# php - 通过 json 与 PHP 连接的 AJAX 请求 - 无操作

> ID：12017801
> 
> 赞同：1
> 
> 时间：2012-08-18T10:27:32.620
> 
> 标签：php, jquery, ajax

我在将 AJAX 与 PHP 连接时遇到问题。主要目标是向 PHP 发送请求，我们可以在其中执行删除图像的方法。每件事听起来都很好，很简单，但整个连接不能正常工作 - 基本上它根本不工作。

这是关于我想要实现的最简单的例子。

jQuery代码：

```
$("span.deleteTmp").live("click", function() {
    obj_a = $(this);
    if (confirm("Want to delete the file?")) {
        $.ajax({
            url: "index.php?mode=functions&method=deleteFile",
            data: {
                pict_name: obj_a.attr("id")
            },
            dataType: "json",
            success: function(data) {
                alert(data.msg);
                if (data.success == true) {
                    obj_a.parents("li").remove();
                }
            }
        });
    }
});​ 
```

PHP 示例代码：

```
/* invoking methods */
if(isset($_GET['method'])) {
   $method = $_GET['method'];
   call_user_func($method);
}

/* methods */
function deleteFile() {
   $result = array('success'=>true, 'msg' => "OK");
   echo json_encode($result);
} 
```

此外，当我在浏览器中键入 index.php?mode=functions&method=deleteFile 时，我会得到正确的响应，例如：`{"success":true,"msg":"OK"}`

在这种情况下我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:51:24.233

由于您使用的是 JQuery，因此我将在 JQuery 中编写此代码。

首先`live`是已弃用或已弃用。

另一个提示是不要使用 GET 来修改和删除服务器中的内容，因为有人很容易滥用它。此外，您还允许 GET 在没有任何实际验证的情况下指示应该运行什么功能：`index.php?mode=functions&method=deleteFile`. 有人可以轻松地更改它以定义您不想直接从网站运行的功能。

所以我要做的第一件事就是将 live 更改为 on() ，例如：

```
$(".deleteTmp").on('click', function(e){
    if(confirm('delete?'){
        $.get('index.php', {mode: 'functions', method: 'deleteFile', pict_name: $(this).attr('id')}, function(data){
            console.log(data);
        }, 'json');
    }
}); 
```

这样的事情应该会给你正确的结果。用 f12 打开你的控制台，看看它会给你什么，当然要确保当你点击元素时实际事件正在运行，我知道这听起来很愚蠢，但我犯了一个错误，坐在那里几个小时思考为什么 AJAX 不会' t运行只是发现它甚至没有触发`click`事件。

## 编辑

但是我确实看到了您的实际问题。您正在为 JQuery 定义两个 GET，首先在 url 中：

```
index.php?mode=functions&method=deleteFile", 
```

然后在数据中：

```
pict_name: obj_a.attr("id") 
```

如果我没记错的话，JQuery 在这种情况下实际上会触发 AJAX 调用：

```
index.php?pict_name=whatever 
```

所以试试我上面的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:01:40.070

如果您在直接访问查询 URL 时得到预期的回复，那么您应该检查前面的步骤是否有效。尝试使用 Firebug 或“检查元素”左右（取决于您使用的浏览器），然后转到“网络”选项卡以检查您的请求是否正在发送并检查变量的值是否正确。如果不是这种情况，请检查您尝试获取“点击”事件的元素的类名中是否存在更明显的错误，例如拼写错误或不正确的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T11:38:55.650

尝试在输出 JSON 结果之前设置标头，例如：

```
function deleteFile() {
   $result = array('success'=>true, 'msg' => "OK");
   header('Cache-Control: no-cache, must-revalidate'); // prevent the browser from caching the response
   header('Expires: Mon, 26 Jul 1997 05:00:00 GMT'); // prevent the browser from caching the response
   header('Content-type: application/json'); // sets the correct MIME type for JSON
   echo json_encode($result);
} 
```

# php - 哪些 HTTP 响应代码是错误的？

> ID：12017803
> 
> 赞同：4
> 
> 时间：2012-08-18T10:27:59.950
> 
> 标签：php, http, error-handling, http-status-codes

我希望根据响应代码决定应该显示什么模板（视图）：

```
 $codes = array(
        100 => 'Continue',
        101 => 'Switching Protocols',
        200 => 'OK',
        201 => 'Created',
        202 => 'Accepted',
        203 => 'Non-Authoritative Information',
        204 => 'No Content',
        205 => 'Reset Content',
        206 => 'Partial Content',
        300 => 'Multiple Choices',
        301 => 'Moved Permanently',
        302 => 'Found',
        303 => 'See Other',
        304 => 'Not Modified',
        305 => 'Use Proxy',
        307 => 'Temporary Redirect',
        400 => 'Bad Request',
        401 => 'Unauthorized',
        402 => 'Payment Required',
        403 => 'Forbidden',
        404 => 'Not Found',
        405 => 'Method Not Allowed',
        406 => 'Not Acceptable',
        407 => 'Proxy Authentication Required',
        408 => 'Request Time-out',
        409 => 'Conflict',
        410 => 'Gone',
        411 => 'Length Required',
        412 => 'Precondition Failed',
        413 => 'Request Entity Too Large',
        414 => 'Request-URI Too Large',
        415 => 'Unsupported Media Type',
        416 => 'Requested range not satisfiable',
        417 => 'Expectation Failed',
        500 => 'Internal Server Error',
        501 => 'Not Implemented',
        502 => 'Bad Gateway',
        503 => 'Service Unavailable',
        504 => 'Gateway Time-out',
    ); 
```

我知道 2xx 表明一切都很好，所以对于 2xx 我可以显示与请求关联的模板文件。

这是否意味着所有其他都是错误，我应该显示一个标准的“错误”模板？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T10:31:17.350

[`4xx`](https://www.rfc-editor.org/rfc/rfc2616#section-10.4)是客户端错误。

[`5xx`](https://www.rfc-editor.org/rfc/rfc2616#section-10.5)是服务器错误。

[`3xx`](https://www.rfc-editor.org/rfc/rfc2616#section-10.3)根本不是错误。

请参阅[RFC 2616 第 6.1.1 节](https://www.rfc-editor.org/rfc/rfc2616#section-6.1.1)（状态代码和原因短语）。

您应该考虑处理`418 I'm a teapot`以及*超文本咖啡壶控制协议*。[`RFC 2324`](https://www.rfc-editor.org/rfc/rfc2324)

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T10:32:15.507

任何以 4 (4xx) 开头的代码都是客户端错误（由于客户端发出了服务器无法满足或理解的请求而导致的错误）。

任何以 5 (5xx) 开头的代码都是服务器错误（由于服务器配置中的某些问题而导致的错误）。

1xx 代码是信息性的，2xx 表示成功的结果，3xx 表示重定向（除了 304 not mofified，它表示浏览器已经拥有请求资源的最新版本）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T10:31:34.923

列表中给出的代码 4XX 和 5XX。

其他代码不是错误*

# javascript - linq.js：GroupBy()，然后是 ToJSON()

> ID：12017806
> 
> 赞同：1
> 
> 时间：2012-08-18T10:28:56.607
> 
> 标签：javascript, json, linq.js

我是 linq.js 的新手。我想做一个`GroupBy()`，然后将其转换为 JSON。但是，我要返回一个字符串数组。

```
var data = [ { "Gender":"M" }, { "Gender":"M" }, { "Gender":"F" } ];
var grouped_dt = Enumerable.From(data).GroupBy("$.Gender", "", 'key,e=>key+":"+e.Count()', "").ToJSON(); 
```

然后我的结果看起来像这样：`[ "M:2", "F:1" ]`，它几乎不像 JSON（而且它是一个`string`；我可以`alert()`立即）。

有谁知道我的语法在哪里搞砸了？坦白：这`data`只是我通过 AJAX 从服务器获取的数据的简化版本，但它完全是 JSON 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:57:07.927

结果我需要为每个值指定一个键（遵循实际的 JSON 格式）。

```
var grouped_dt = Enumerable.From(data).GroupBy("$.Gender", "key,e=>{name:key,y:e.Count()}", "").ToJSON(); 
```

完成此操作后，我还需要

```
var jsonData = $.parseJSON(grouped_dt); 
```

将其转换为 JSON 对象以供使用。

# macos - Mac OS X 作为 PhoneGap 平台

> ID：12017811
> 
> 赞同：4
> 
> 时间：2012-08-18T10:29:15.193
> 
> 标签：macos, web-applications, cordova, native, porting

我有 phonegap 应用程序，我希望将其移植到 Mac OS X

是否有任何类似于 phonegap 的平台，可以从 Web 应用程序为 Mac OS X 构建本机应用程序。

我也对 Windows 和 Linux 感兴趣。我希望能够在托盘中隐藏应用程序并创建对话窗口。

**更新**

我选择了现在支持 Mac OS X 的 Cordova/PhoneGap。当我问到 PhoneGap 在桌面上不支持但想改变时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T23:33:22.393

我使用 MacGap 进行了实验，它是 OSX 的 Phonegap 端口。[https://github.com/maccman/macgap](https://github.com/maccman/macgap)

你的功能有点有限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-11T23:16:52.767

要编写在 OSX 上运行的 HTML/Javascript 应用程序，您始终可以选择编写 Chrome 打包应用程序：[https ://developer.chrome.com/apps/about_apps.html](https://developer.chrome.com/apps/about_apps.html)

有趣的是，最近有消息称 Chrome 打包应用程序可以通过 Cordova 运行并部署为 iOS 和 Android 应用程序，Chrome 打包应用程序现在可以部署移动和桌面： http: [//blog.chromium.org/2014/01/run- chrome-apps-on-mobile-using-apache.html](http://blog.chromium.org/2014/01/run-chrome-apps-on-mobile-using-apache.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-08T10:11:24.173

到目前为止，我发现的最佳替代方案是**NodeWebkit**： [https ://github.com/rogerwang/node-webkit](https://github.com/rogerwang/node-webkit)

您可以使用 HTML5、Javsacript 和 CSS 开发跨平台桌面应用程序。

您还可以使用**NodeJS**执行常规浏览器不允许您执行的所有操作。

通过 Yeoman 为您提供了一个非常好的模板： [https ://www.npmjs.org/package/generator-node-webkit](https://www.npmjs.org/package/generator-node-webkit)

* * *

另一种选择是**括号壳**：[https ://github.com/adobe/brackets-shell](https://github.com/adobe/brackets-shell)

它是 Adob​​e 赞助的代码编辑器的基础，但我更喜欢第一个选项。

希望能帮助到你！

# excel - 如何在 Excel 中的一组值中找到*最*平均值/最接近平均值的值？

> ID：12017822
> 
> 赞同：4
> 
> 时间：2012-08-18T10:30:47.337
> 
> 标签：excel, statistics, average, range, mean

这可能是一个非常容易回答的问题，但它已经困扰我很久了！假设我在一列中有一系列值，排序如下：

```
Sales:
1500
160
40
300
200 
```

在这个范围内，*我知道平均值是 440。* 我希望 Excel 在这个范围内找到最大的平均值（该范围内最接近 440 的值因此是 300）。那么我该怎么做才能让 Excel 返回 300 作为该范围内最接近平均值的值呢？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T10:37:29.763

假设值是从单元格 A2 到 A6，请使用此数组公式

```
=INDEX(A2:A6,MATCH(MIN(ABS(A2:A6-AVERAGE(A2:A6))),ABS(A2:A6-AVERAGE(A2:A6)),0)) 
```

输入公式后必须按`CTL`+ `SHIFT`+ 。`ENTER`

**截屏**

![在此处输入图像描述](../Images/96af932a0f40dfbfe8ae2ce1cdb7a4d5.png)

**跟进**

> 我忘了提到我需要从“销售”中省略非零值，以便不计算任何为 0 的值。你能告诉我这是怎么做的吗？– alexcu 4 分钟前

在这种情况下，只需使用`SUM`and`COUNTIF`而不是`AVERAGE`

使用这个公式

`=INDEX(A2:A7,MATCH(MIN(ABS(A2:A7-(SUM(A2:A7)/COUNTIF(A2:A7,"<>0") ))),ABS(A2:A7-(SUM(A2:A7)/COUNTIF(A2:A7,"<>0") )),0))`

**截屏**

![在此处输入图像描述](../Images/83a00a6bf402b9751b75573cc34338cf.png)

# javascript - 表单未在 $.ajax 成功函数中提交

> ID：12017823
> 
> 赞同：5
> 
> 时间：2012-08-18T10:30:57.923
> 
> 标签：javascript, jquery, ajax, forms

我正在使用 jquery+Ajax 验证重复名称。一切正常，只是一旦一切都返回true，表单就没有提交

**发生了什么**

*   如果未输入名称，则会显示警告框，说明需要名称 --> 此处没问题
*   如果发现重复的名称，则会出现警告框，说明名称已存在且表单未提交 --> 此处没问题
*   如果没有找到重复的名称，则会出现警告框（以证明 **`else`**部分条件有效），但**表单不提交**。我希望表单继续并在这**`else`** 部分提交自己

**jQuery 代码**

```
$('#form1').submit(function(){

    var name = $('#shelf_name').val();

    if(name == '')
    {
        alert('Shelf name is required');
        $('#shelf_name').focus();
    }
    else
    {                   
        $.ajax({
            type:'post',
            url:'check-duplicate-shelf-name.php',
            data:{'name':name},
            context:this,
            success:function(data)
            {
                if(data == 'stop')
                {
                    alert('Shelf name already exists'); // working if duplicate name is found
                }
                else
                {   
                    alert('else working?'); // alert box is showing up if name is not duplicate                                         
                    this.submit(); // but after alert, this line not executing
                }
            }
        });
    }

    return false;

}); 
```

**HTML 表单标签**

```
<form action="add-shelf-post.php" method="post" id="form1"> 
```

**check-duplicate-shelf-name.php**页面

```
<?php

include 'confignew.php';

$name = $_POST['name'];

// peforming database operations
.
.
.

// and then

if($db->num_rows($q) == 0)
{
    echo 'go';
}
else
{
    echo 'stop';
} 
```

我错过了一些非常明显的东西。希望这里有人可以指出这一点。

在 Firefox 中使用 Firebug 检查后，我确实遇到了错误。当我使用 Chrome 进行测试时，它没有出现。这是屏幕截图。

![萤火虫错误](../Images/fd2ead8d4b5dd0dfe82961626734ba84.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:52:18.683

我会在运行时使用 jQuery 验证器检查它，而不是在提交时，但另一种方法是进行 Rest Style 调用。我认为没有必要为了检查 1 个字段而发布完整的表格。

```
$('#form1').submit(function(){
    //Check not empty
    if(!$('#shelf_name').val()) {
       alert('Shelf name is required');
       $('#shelf_name').focus();
    } else {   
       //Valiate Rest style call             
       $.getJSON("check-duplicate-shelf-name.php/".concat($('#shelf_name').val()), function(data) {
           //If you only have 2 states I would return boolean to faster check ex: if(!data){
           if(data == 'stop') {
               // working if duplicate name is found
               alert('Shelf name already exists'); 
           } else {   
               alert('else working?'); // alert box is showing up if name is not duplicate                                         
               $('#form1').submit(); // but after alert, this line not executing
           }
       });
    }
    return false;
});​ 
```

当我在评论中说您可以手动发布表单而不使用*$(this).submit();* 我指的是：

```
$.ajax({
       url: "./myurl",
       cache: false,
       type: "POST",           
       data: $("#form1").serialize(),
       success:  function(){
               console.log("Submit successful");
   }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T09:38:04.993

我已经测试了您的代码，它可以在 Chrome、IE 8 和 Mozilla Firefox 中运行。检查整个页面中是否有一个元素在其**name 属性**值中包含单词**submit**。如果有重命名。例如，像这样的输入标签：`<input type="submit" name="submit" value="Submit Form"/>`将导致错误出现在您的 Mozilla Firebug 中。

此外，您可以在下面找到替代解决方案。

以下解决方案已在 Chrome、IE 8 和 Mozilla Firefox 中成功测试。

**替代解决方案**

> 检索帖子 URL 和您要发布的数据并在成功回调中执行帖子。

以下实现已**在 Chrome、IE 8 和 Mozilla Firefox 中成功测试**。在成功回调中，将检索要发布的数据并发布到 URL，并将结果放入 id 为*result*的 div 中。您可以对其进行修改以满足您的需求。

```
$(document).ready(function() {
    $('#form1').submit(function(){
        var name = $('#shelf_name').val();
        if(name == '')
        {
            alert('Shelf name is required');
            $('#shelf_name').focus();
        }
        else
        {
            $.ajax({
                type:'post',
                url:'check-duplicate-shelf-name.php',
                data:{'name':name},
                context:this,
                success:function(data)
                {
                    if(data == 'stop')
                    {
                        alert('Shelf name already exists');
                    }
                    else
                    {   
                        alert('else working?'); 
                        //this.submit();
                        //$(this).submit();

                        // get the post url and the data to be posted
                        var $form = $(this);
                            shelfNameVal = $form.find( 'input[id="shelf_name"]' ).val(),
                            url = $form.attr( 'action' );

                            // Send the form data and put the results in the result div
                            $.post(url, { shelf_name: shelfNameVal },
                                function(data) {
                                    $( "#result" ).empty().append(data);
                                }
                            );
                    }
                }
            });
        }
    return false;
    });
}); 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T10:36:33.260

进行远程表单验证？查看 the[`jquery.validate plugin`](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)及其[`.remote()`](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)规则。

除此之外，您的代码看起来不错。这是一个工作演示：http: [//jsfiddle.net/dKUSb/7/](http://jsfiddle.net/dKUSb/7/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T09:58:56.443

不要尝试太多检查获取简单按钮并在该事件中添加 onclick 事件将代码放在下面

html代码

```
<input type="button" value="submit" onclick="formsubmit();"> 
```

javascript代码

```
 function formsubmit() {
     var name = $('#shelf_name').val();

     if (name == '') {
         alert('Shelf name is required');
         $('#shelf_name').focus();
     } else {
         $.ajax({
             type: 'post',
             url: 'check-duplicate-shelf-name.php',
             data: {
                 'name': name
             },
             context: this,
             success: function (data) {
                 if (data == 'stop') {
                     alert('Shelf name already exists'); // working if duplicate name is found
                 } else {
                     alert('else working?'); // alert box is showing up if name is not duplicate
                     $('#form1').submit()
                 }
             }
         });
     }
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T18:59:00.447

表单未提交的原因是您`false`从`submit`事件处理程序返回，这导致默认操作（提交）不发生。即使您调用该`submit()`方法，您仍处于`submit`事件处理程序中，该处理程序已返回`false`.

您可能需要考虑更改处理表单提交的服务器端逻辑以检查重复项，或将重复检查 ajax 帖子附加到`blur`文本框的事件，或@rajesh kakawat 建议的提交按钮（除了附加 jQuery 而不是 HTML 属性）。例子：

```
$('#form1').submit(function(){

    var name = $('#shelf_name').val();

    if(name == '')
    {
        alert('Shelf name is required');
        $('#shelf_name').focus();
        return false;
    }
});

$('#shelf_name').on('blur', function () {
    var $this = $(this),
        name = $this.val();
    if(name == '')
    {
        alert('Shelf name is required');
        $this.focus();
        return false;
    }

        $.ajax({
            type:'post',
            url:'check-duplicate-shelf-name.php',
            data:{'name':name},
            success:function(data)
            {
                if(data == 'stop')
                {
                    alert('Shelf name already exists'); // working if duplicate name is found
                }
                else
                {   
                    alert('else working?'); // alert box is showing up if name is not duplicate                                         
                    $('#form1').submit(); // this should work now
                }
            }
        });
}); 
```

我不确定为什么该`this.submit();`行以前可以正常工作，因为我对您的应用程序、脚本版本等了解不足。您可能需要考虑使用[jsfiddle](http://jsfiddle.net)发布示例。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T11:27:48.863

`callbacks`在这种情况下，您可以从中受益。只需将代码分开，如下所示：

带有将返回对象的回调的函数`{status: 'true or false', message: 'Some text'}`

```
function validity(callback){

    var name = $('#shelf_name').val();

    if(name == '')
    {
        return callback({status: false, message: 'Shelf name is required'});
    }
    else
    {                   
        $.ajax({
            type:'post',
            url:'check-duplicate-shelf-name.php',
            data:{'name':name},
            context:this,
            success:function(data)
            {
                if(data == 'stop')
                {
                     return callback({status: false, message: 'Shelf name already exists'});                    

                }
                else
                {   
                    return callback({status: true, message: 'else working?'});
                }
            }
        });
    }

     //just for safety :))
    return callback({status: false, message: 'something went wrong completely'});
}); 
```

这将返回 AJAX 调用的结果。它将等待 AJAX 完成并返回`if`...的相应分支结果

..你现在可以这样使用它：

```
$('#form1').submit(function(){
    validity(function(result){
       if (result.status) { //status is true
           return true;
       } 
       else
       {
           alert(result.message);
           $('#shelf_name').focus(); 
           return false;      
       }
    });
}); 
```

...或者只是将它们组合起来：

```
$('#form1').submit(function(){

        // definition
        function validity(callback){

            var name = $('#shelf_name').val();

            if(name == '')
            {
                return callback({status: false, message: 'Shelf name is required'});
            }
            else
            {                   
                $.ajax({
                    type:'post',
                    url:'check-duplicate-shelf-name.php',
                    data:{'name':name},
                    context:this,
                    success:function(data)
                    {
                        if(data == 'stop')
                        {
                             return callback({status: false, message: 'Shelf name already exists'});                    

                        }
                        else
                        {   
                            return callback({status: true, message: 'else working?'});
                        }
                    }
                });
            }

             //just for safety :))
            return callback({status: false, message: 'something went wrong completely'});
        });

        //usage
        validity(function(result){
            if (result.status) { //status is true
                return true;
            } 
            else
            {
                alert(result.message);
                $('#shelf_name').focus(); 
                return false;      
               }
            });
        }); 
```

希望这可以帮助

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-22T12:14:34.383

而不是 this.submit() 写：

```
document.yourFormName.method = "POST";
document.yourFormName.action = "Relative_URL_to_Go_to";
document.yourFormName.submit(); 
```

或者，如果您不知道 formName 或者您可以使用：

```
document.forms[0].method = "POST";
document.forms[0].action = "Relative_URL_to_Go_to";
document.forms[0].submit(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-22T15:22:15.247

完全由于范围

你在哪里

```
alert('else working?'); // alert box is showing up if name is not duplicate                                         
this.submit(); // but after alert, this line not executing 
```

this 指的是 ajax 对象，而不是表单。这是因为它现在位于另一个函数中。

我`$form = $(this);`在 ajax 调用之前添加了一个可以在回调中使用的变量。

尝试这个：

```
$('#form1').submit(function( e ){

    e.peventDefault();

    var name = $('#shelf_name').val();

    if(name == '')
    {
        alert('Shelf name is required');
        $('#shelf_name').focus();
    }
    else
    {  
        $form = $(this);         
        $.ajax({
            type:'post',
            url:'check-duplicate-shelf-name.php',
            data:{'name':name},
            context:this,
            success:function(data)
            {
                if(data == 'stop')
                {
                    alert('Shelf name already exists'); // working if duplicate name is found
                }
                else
                {   
                    alert('else working?'); // alert box is showing up if name is not duplicate                                         
                    $form.submit(); // but after alert, this line not executing
                }
            }
        });
    }

    return false;
}); 
```

**更新：**我昨天可能已经完全不在了。尝试添加 e.preventDefault(); 就在提交调用之上。此外，在 function() 定义中添加 e 变量。检查上面的更新代码。

以下是关于 preventDefault() 的一些文档：http: [//api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-18T10:47:00.393

```
$('#form1').submit(function(){

    var name = $('#shelf_name').val();

    if(name == '')
    {
        alert('Shelf name is required');
        $('#shelf_name').focus();
    }
    else
    {                   
        var istrue = false;        
        $.ajax({
            type:'post',
            url:'check-duplicate-shelf-name.php',
            data:{'name':name},
            context:this,
            success:function(data)
            {
                if(data == 'stop')
                {
                    alert('Shelf name already exists');
                    istrue = false;
                }
                else
                {   
                    alert('else working?') // alert box is showing up                           
                    istrue = true;
                }
            }
        });
        return istrue;
    }
}); 
```

像这样的东西:)无法测试

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-26T11:00:04.190

我们遇到了同样的问题，并认为我们已经解决了。

问题是该动作在“线程”内部也`.submit()`不起作用。为此，您必须在块内添加指令并在执行完成时提交表单。`$.ajax``$.post``async:false``$.ajax``$.ajax`

未经测试，但这是可行的想法：

**html:**

```
<input type='submit' onClick='javascript:MyCheck(); return false;'> 
```

**脚本：**

```
function Mycheck() {

   var result = "";
   $.ajax {
       async:false,
       url: you_url_here,
       timeout: 15000,
       success: function(data) {
            result="success";
       },
       error: function(request, status, err) {
            result="error";
       }
   };

   // Here, if success -> SUBMIT FORM or whatever
   // Only get here if "ASYNC" = FALSE!!!
   if (result == "success") {
       $("form").submit(); // this submits the form
       return;
   } else {
       alert('error');
       // the form will not be post
   }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-10T09:54:37.420

享受它的工作..

```
document.createElement('form').submit.call(document.formname); 
```

# php - preg_replace 除非 URL 除非在引号中

> ID：12017828
> 
> 赞同：0
> 
> 时间：2012-08-18T10:31:17.143
> 
> 标签：php

我有一个这样的字符串：

```
$str = 'hi, http://www.google.com is a search engine while "http://www.facebook.com" is a social network'; 
```

我想将[http://www.google.com](http://www.google.com)转换为链接，而不是转换[http://www.facebook.com](http://www.facebook.com)（因为它在引号中）。这是我已经拥有的

```
$return = preg_replace('@(https?://([-\w\.]+[-\w])+(:\d+)?(/([\w/_\.#-]*(\?\S+)?[^\.\s])?)?)@', '<a href="$1" target="_blank">$1</a>', $return); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:58:30.957

Here is you solution

```
<?php
$str = 'hi, http://www.google.com is a search engine while "http://www.facebook.com" is a social network';
$s=explode(",",$str);
$s[1];
$n=explode(" ",$s[1]);
echo $n[1];
?> 
```

# php - 在 php 中缓存整页但不包括 div 标签

> ID：12017839
> 
> 赞同：0
> 
> 时间：2012-08-18T10:33:32.183
> 
> 标签：php, caching

**使用此代码：**

```
<?php  
  // Define path and name of cached file    
  $cachefile = 'cache/'.date('M-d-Y').'.php';    

  // How long to keep cache file?   
  $cachetime = 18000;    

  // Is cache file still fresh? If so, serve it.     
  if (file_exists($cachefile) && time() - $cachetime < filemtime($cachefile)) {    
     include($cachefile);        
     exit;    
  }   
  // if no file or too old, render and capture HTML page.
  ob_start();
?>

<html>        
Webpage content in here
</html>

<?php   
    // Save the cached content to a file    
    $fp = fopen($cachefile, 'w');    
    fwrite($fp, ob_get_contents());    
    fclose($fp);    

    // Send browser output    
    ob_end_flush();
?> 
```

有没有办法使页面上的 DIV 标记免于缓存.. 我有一个可以完全缓存的页面，除了每天更新的价目表并希望阻止该 DIV 被缓存

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T10:37:17.177

如果您的意思是 HTTP 缓存，那么不，您不能那样做。在 HTTP 缓存中，要么全有，要么全无。

如果您的意思是生成成本高昂的页面的服务器端缓存，那么您可以使用 cron 作业每 24 小时将第一次尝试查看该页面的结果缓存到磁盘一次，并将生成的页面作为普通静态页面提供服务与网络服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:41:08.383

您可以将更改的 div 的内容加载到 PHP 变量中并将其发送到缓存文件（基本上使用缓存文件作为带有参数的模板）。

# linux - gcc 找不到包含

> ID：12017840
> 
> 赞同：0
> 
> 时间：2012-08-18T10:33:43.590
> 
> 标签：linux, gcc

我已经从源代码配置和构建 gcc 没有遇到任何问题，除非我尝试包含一个简单的头文件：

```
#include <iostream>
int main(){
std::cout<<42;
} 
```

我收到一条错误消息，说它找不到 iostream。

```
$ g++-4.7 -v
Using built-in specs.
COLLECT_GCC=g++-4.7
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7.1/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../configure -v --with-pkgversion='Ubuntu/Linaro 4.7' --enable-languages=c,c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.7.1 (Ubuntu/Linaro 4.7) 
```

我还检查了包含目录 (¨/usr/include/c++/4.6¨) 和 iostream，其余的都存在。

它是在其他地方寻找他们还是什么？

操作系统是 Linux Mint 64 位

# java - Google App Engine 上的 JQuantlib

> ID：12017843
> 
> 赞同：2
> 
> 时间：2012-08-18T10:34:31.807
> 
> 标签：java, google-app-engine, quantlib

我一直在想：是否有人成功部署了使用 JQuantlib 的 Google App Engine？[JQuantLib](http://www.jquantlib.org/index.php/Main_Page)是一个免费的、开源的、全面的量化金融框架，用 100% Java 编写。

有谁知道这是否可能？我知道库需要被谷歌列入白名单才能在应用引擎上运行。但是，我想知道是否可以从源代码构建库并将其与应用程序一起发送 - 当然，前提是依赖关系已得到满足。

任何输入表示赞赏。

谢谢，克里斯托夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:46:58.927

您可以将任何您想要的库上传到 App Engine。它需要使用列入白名单的 Java API。

从我在 JQuantlib 上进行的快速测试中，我看不出它为什么不起作用的任何原因。所以，去吧。

# python - Python 中的 Microsoft 翻译 API

> ID：12017846
> 
> 赞同：3
> 
> 时间：2012-08-18T10:35:00.373
> 
> 标签：python, microsoft-translator

我在 python 中编写了一个小脚本来将单词从英语翻译成俄语。它使用[Microsoft-Translator-Python-API](https://github.com/openlabs/Microsoft-Translator-Python-API/)连接到 Microsoft Translator API。但是，有一个延迟问题 - 调用 API 并获得翻译最多需要三秒钟。如果可能的话，有人知道如何让它更快地工作吗？我会放一段我的代码，只是为了展示我在这里做什么：

```
translator   = Translator('My-User-Id',
                            'My-Client-Secret')

current_word = subprocess.check_output(["xsel", "-o"])
translation  = translator.translate(current_word, "ru") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T21:40:29.320

有趣的是，您实际上可以这样做：

```
import json
import requests
import urllib
args = {
        'client_id': '',#your client id here
        'client_secret': '',#your azure secret here
        'scope': 'http://api.microsofttranslator.com',
        'grant_type': 'client_credentials'
    }
oauth_url = 'https://datamarket.accesscontrol.windows.net/v2/OAuth2-13'
oauth_junk = json.loads(requests.post(oauth_url,data=urllib.urlencode(args)).content)
translation_args = {
        'text': "hello",
        'to': 'ru',
        'from': 'en'
        }
headers={'Authorization': 'Bearer '+oauth_junk['access_token']}
translation_url = 'http://api.microsofttranslator.com/V2/Ajax.svc/Translate?'
translation_result = requests.get(translation_url+urllib.urlencode(translation_args),headers=headers)
print translation_result.content 
```

并在减速之前获得多次立即响应（在减速之前立即响应 6-7 次）。我没有太多使用 Azure，所以我不确定他们的速率限制是如何工作的，但我相信你可以支付更高的速率。

（注意：我从那个微软库中抓取了上面的代码。只是想看看逻辑本身的行为是怎样的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-11T10:23:55.293

无耻的插头。

我创建了一个 python 模块（它的 beer-ware :)），使这个过程更简单。

使用它很简单：

```
import azure_translate_api

client = azure_translate_api.MicrosoftTranslatorClient('client_id', 'client_secret')
print client.TranslateText('Hello World!', 'en', 'fr') 
```

要获取有关从何处下载此模块以及如何使用它的更多详细信息，请访问[我的 github 存储库](http://goo.gl/hBLUF1)。

# iphone - 无法将大图像加载为纹理

> ID：12017851
> 
> 赞同：0
> 
> 时间：2012-08-18T10:35:54.790
> 
> 标签：iphone, ios5, opengl-es, ios-simulator, textures

我正在做一个成像项目。在该项目中，图像被加载、显示并且重要的其他功能将在其上完成。

但是我有一个问题，我无法从 iPhone 的图库甚至是相机胶卷中加载大图像。

在模拟器中它工作得很好但不是在 iPhone 上。

我的 imageView 尺寸是 320x358；

在这里我想使用用户选择的图像，但我不能在这里使用...我有一个错误 OpenGL: Set [error 1281] **Assertion failed:** (0), function Set, file /Desktop/..... AppName/ **TexFrameBuffer.mm** ,

在 TexFrameBuffer.mm 中，代码在模拟器中运行良好，但在实际设备中运行良好。

甚至还支持 Height=2048 和 width=4096。

如何在 iPhone 上加载大图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T06:14:01.820

对于临时解决方案，前两个取消选中`CHECK_GL_ERRORS();`FrameBuffer.m 方法中的功能`void FrameBufferUtils::Create(FrameBuffer& buffer, int width, int height) and void FrameBufferUtils::Set(const FrameBuffer& buffer)`

# python - Youtube Python API

> ID：12017859
> 
> 赞同：3
> 
> 时间：2012-08-18T10:37:30.170
> 
> 标签：python, api, binding, youtube, youtube-api

[除了gData](http://code.google.com/p/gdata-python-client/)包之外，是否有 Youtube API 的 Python 实现？

我说的是类似于[Heroku](https://github.com/heroku/heroku.py)或[Github](https://github.com/dustin/py-github) Python 绑定的东西。gData 包的使用似乎不必要地复杂，并且某些接口仅适用于较旧的 API 版本。这甚至没有提到缺乏清晰、可访问的文档。

我想知道是否每个人都只使用 gData 包，或者是否存在其他东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-04T20:36:07.983

有用于 Python 的通用[Google API 客户端](https://code.google.com/p/google-api-python-client/)。我们[这里有这个客户](https://developers.google.com/youtube/v3/code_samples/python)的样品。

# java - 如何在 netbeans 平台应用程序的菜单栏中添加 myAppHelp.pdf 文件？

> ID：12017866
> 
> 赞同：1
> 
> 时间：2012-08-18T10:38:31.653
> 
> 标签：java, swing, netbeans, embedded-resource, menubar

我在 Java Swing 的 netbeans 平台上制作了桌面应用程序。现在，如何将 myapp 的 helpOfApp.pdf 文件放入 netbeans 平台应用程序（MyApp）的菜单栏中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:35:43.200

> 如何将此 .html 文件添加到我的应用程序的菜单栏？

*   将菜单项添加到添加到栏的菜单中。
*   向菜单项添加`Action`（或）。`ActionListener`
*   添加`F-1`（帮助）的加速器。
*   在行动。
    *   使用类似的东西获取 URL 实例
        `URL urlToResource = this.getClass().getResource("/path/to/the.resource");`
    *   打开一个`JEditorPane`（不可编辑，并且可能带有链接侦听器）指向`urlToResource`.

有关每个步骤的更多详细信息，请参阅相关的“关键字+java+教程”。

* * *

提示：确保所有资源（例如链接的 HTML、CSS、图像等）是：

*   通过相对路径访问
*   在应用程序的运行时类路径上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:36:33.990

只需添加到上面的代码

```
URL urlToResource = this.getClass().getResource("/path/to/the.resource");
jEditorPane1.getPage(urtToRecource); 
```

可能工作

# mysql - MySQL游标只获取一行

> ID：12017869
> 
> 赞同：9
> 
> 时间：2012-08-18T10:38:45.940
> 
> 标签：mysql, sql, database-cursor

我的 SQL：

```
CREATE PROCEDURE INV_MIN_PURCHASE_PRICE()
BEGIN
DECLARE done INT;
DECLARE current_inventory_ID INT;
DECLARE cur1 CURSOR FOR SELECT inventory_ID FROM _inventory;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

SET done = 0;
OPEN cur1;

REPEAT

    FETCH cur1 INTO current_inventory_ID;
    UPDATE _debug SET rows=rows+1;

UNTIL done
END REPEAT;

CLOSE cur1;

END; 
```

当我调用这个过程时，MySQL 只获取一行（_debug`rows`增加了 1）。为什么？？它是一个错误吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T17:11:02.113

我在 MySQL 中的存储过程也遇到了同样的问题。它应该从一个表中获取某个列中具有空值的所有记录，然后从另一个表中填充该值。然而，它在一个记录后停止了：

```
CREATE PROCEDURE `updateRecord`()
    BEGIN

    DECLARE done INT DEFAULT FALSE;
    DECLARE recordId, newValue INT;
    DECLARE current_record CURSOR FOR SELECT id FROM A where b_id is null;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE; 

    OPEN current_record;

    main_loop: LOOP
        FETCH current_record INTO recordId;

        IF done THEN
             LEAVE main_loop;
        END IF;

        -- fetching some value from table b
        select id into newValue from B where ...

       -- setting new value in record
       update A set b_id = newValue where id = recordId;    

      END LOOP;
    END 
```

答案是“未找到的处理程序”不仅在游标未返回任何行时执行，而且在表 B 上的选择未返回任何行时执行。我的解决方案是使用由处理程序设置的第二个变量，并在选择后重置“完成”变量：

```
 DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE, noBfound = TRUE;    

           [...]

           select id into newValue from B where ...

           IF (noBfound = TRUE) THEN 
               SET done = FALSE;
           END IF;

           [...] 
```

加法：显然可以通过在选择后简单地重置“完成”来不使用第二个变量：

```
 DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE; 

           [...]

           select id into newValue from B where ...

           SET done = FALSE;

           [...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:54:46.440

Have you tried a LOOP instead of the REPEAT construct? Seems to work better in MySQL. Replace the REPEAT to END REPEAT section with:

```
inv_loop: LOOP
    FETCH cur1 INTO current_inventory_ID;
    IF done = 1 THEN
        LEAVE inv_loop;
    END IF;
    UPDATE _debug SET rows=rows+1;
END LOOP; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T05:59:38.153

```
IF done THEN
         LEAVE main_loop;
ELSE
         ITERATE main_loop;
END IF; 
```

# ios - 本机键盘栏 AIR iOS

> ID：12017871
> 
> 赞同：1
> 
> 时间：2012-08-18T10:39:18.240
> 
> 标签：ios, air, keyboard, air-native-extension

有没有办法使用“上一个 | 下一个”和“完成”键在 AIR iOS 应用程序栏中显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:14:04.517

如果您使用的是 StageText，您可以通过将 StageText 实例的*returnKeyLabel*属性设置为 ReturnKeyLabel 类中的静态属性之一来动态更改软键盘的 DONE 按钮标签的标签：DONE、GO、NEXT 或 SEARCH（还有第五个名为 DEFAULT 的属性，与 iOS 上的 DONE 相同）。没有 ReturnKeyLabel.PREVIOUS 属性，尽管您可以使用 StageText 方法*assignFocus()*在某个事件发生时将焦点设置到舞台上的不同 StageText 实例。

这是一个简单的示例，其中软键盘的 DONE 按钮更改为 NEXT。您可以将以下代码放在 .fla 的第 1 帧中：

```
import flash.text.StageText;
import flash.text.ReturnKeyLabel;

var st:StageText = new StageText();
st.stage = this.stage;
st.viewPort = new Rectangle(0, 0, 333, 33);
st.editable = true;
st.returnKeyLabel = ReturnKeyLabel.NEXT;
st.assignFocus(); // This causes the soft keyboard to appear 
```

请注意，StageText 类没有用于设置边框的属性。但是，如果您查看 GitHub，您会发现一个 NativeText 类，它通过包装 StageText 类并添加诸如borderThickness 和borderColor 之类的属性来简化事情：

[GitHub 上的 StageTextExample](https://github.com/nixxle/StageTextExample)

# javascript - 在 GWT 应用程序中使用 HTML 页面

> ID：12017873
> 
> 赞同：1
> 
> 时间：2012-08-18T10:39:45.427
> 
> 标签：javascript, html, gwt, cordova

我想在 GWT 应用程序的帮助下将 html 页面用于 phone-gap 应用程序。

我有一个带有 css 和 javascript 文件的 HTML 页面。那么如何与 GWT Web 应用程序集成呢？

所以在编译结束时，我可以像设计页面一样使用到 phone-gap 项目中。

谁能告诉我这个程序的步骤。？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:34:16.080

没有尝试过，但这可能会有所帮助。 [http://code.google.com/p/gwt-phonegap/](http://code.google.com/p/gwt-phonegap/)

听说还不错

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:10:56.347

尝试使用*iframe*。它是一个标准的 HTML 标记（请参阅[http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)），您可以在其中放置指向另一个页面的链接，该页面将嵌入到您的文档中。

```
<iframe src="http://www.w3schools.com">
  <p>Your browser does not support iframes.</p>
</iframe> 
```

您也可以通过编程方式添加它。

```
public class FrameExample implements EntryPoint {

    public void onModuleLoad() {
        // Make a new frame, and point it at Google.
        Frame frame = new Frame("http://www.google.com/");

        // Add it to the root panel.
        RootPanel.get().add(frame);
    }

} 
```

The example is from [http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/Frame.html](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/Frame.html).

# c# - 从 C# 中的字符串中获取所有单词（如 @*@）的最佳方法

> ID：12017877
> 
> 赞同：0
> 
> 时间：2012-08-18T10:40:08.623
> 
> 标签：c#, .net, regex, string, linq

我有一个像“@1234@ == val1 && @2312@!= val2”这样的字符串。我想得到 1234 和 2312，它们使用 '@' 嵌入到一个数组中。该字符串可以包含多个使用“@”嵌入的项目。

**更新**：将仅包含“@”之间的整数值。

**update2** : 可能出现的有效输入字符串是 "@some int value@ == val1" 或类似的字符串，用 '&&' 或 '||' 分隔 示例输入字符串：

```
 "@234@ == val1",
              "@3456@ == 345 && @34563@ != 'Y'",
              "@1234@ != val1 || @1234@ != val2 || @1234@ != val3" 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T10:47:18.167

尝试：（包括有**符号**值）

```
//string patt = "@(?<value>.*?)@";
// string patt = "@(?<value>\\d*?)@";  //  just number values (if there should be an integer use + instead of *)

//string patt = "@(?<value>[+|-]?\\d*?)@";
//string str = "@1234@ == val1 && @-2312@ != val2 && @+23@ != val3";

string patt = "@(?<value>[+|-]?\\d+?)@\\s[==|!=].*?(&&|\\|\\||$){1}";
string str = "@1234@ == val1 && @-2312@ != val2 && @+78@ != val3 || @45@ == 446";

Regex r = new Regex(patt);

string str = "@1234@ == val1 && @2312@ != val2";
MatchCollection  mc = r.Matches(str);

List<string> lst = new List<string>();
foreach (Match item in mc)
{
  string value = item.Groups["value"].Value;
  lst.Add(value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T10:56:45.300

使用 LINQ 的另一种方法：

```
 var list = input.Split(new[] { '@' }, StringSplitOptions.RemoveEmptyEntries);
 var result = Enumerable.Range(0, list.Length / 2)
                        .Select(i => list.ElementAt(i*2)); 
```

* * *

如果您的输入如下：

```
 "@12@@34@ == val1 && @2312@ != val2" 
```

您可以在 Linq 下使用它：

```
var list = input.Split(new[] { "==", "!=", "&&", "||" }, 
            StringSplitOptions.RemoveEmptyEntries);

var result = Enumerable.Range(0, list.Length/2)
            .Select(i => list.ElementAt(i*2).Trim())
            .Select(s => s.Substring(1, s.Length - 2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T11:06:14.707

```
List<int> l=new List<int>();    
string s="@1@ == val1 && @2@ != val2 || @3@ == val1";    
Regex r=new Regex(@"(?<=@)[\d\s]+(?=@\s(==|!=).*?(&&|\|\||$){1})");
foreach(Match m in r.Matches(s))
{
l.AddRange(Regex.Split(m.Value,@"(?=\d)").Where(i=>i!="").Select(i=>int.Parse(i.Replace(" ",""))).ToList());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T12:08:23.610

您应该使用的正则表达式：

```
(?<=@)[0-9]+(?=@) 
```

# html - 用于 HTML 的所见即所得 LaTeX 编辑器

> ID：12017878
> 
> 赞同：5
> 
> 时间：2012-08-18T10:40:13.347
> 
> 标签：html, latex, wysiwyg

是否存在用于在 html 中使用的任何所见即所得（可能在 js 上）乳胶编辑器？不知道乳胶语法的用户易于使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:59:27.043

你可以试试[codecogs editor](http://www.codecogs.com/latex/eqneditor.php)，这是一个有用的网络基础公式编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-18T22:40:17.893

查看 LaTeX 在线编辑器 ( [http://latexonlineeditor.net/](http://latexonlineeditor.net/) )。它在浏览器中运行，并具有所见即所得（M）/富文本编辑器界面来生成任何类型的 pdf 文档。

# shader - Ogre 渲染 + 顶点着色器

> ID：12017881
> 
> 赞同：3
> 
> 时间：2012-08-18T10:40:46.820
> 
> 标签：shader, ogre, l-systems

假设我的世界中有一个 3d 对象，如下所示。

[http://en.wikipedia.org/wiki/File:Graftal3.png](http://en.wikipedia.org/wiki/File:Graftal3.png)

我还有一个节点存储有关如何绘制的信息，例如......

[http://en.wikipedia.org/wiki/File:Graftal4.png](http://en.wikipedia.org/wiki/File:Graftal4.png)

我如何从一个插值到另一个。根据我的研究，我知道我将不得不使用顶点着色器。但困扰我的主要部分是第二个模型比原始图像有更多的顶点。

我希望得到一些关于如何实现这种影响的指导。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:39:09.693

对于您所描述的情况，顶点着色器是错误的。您想改用几何着色器。这要求您使用 Direct3D 10 或 OpenGL 3.2（或者带有合适扩展的 OGL2）

在几何着色器中，您向它提供基本几何数据，您可以根据需要从中发出额外的顶点。在您的情况下，您可能会用单行作为树的根，并根据需要对树进行细分。

您有多个着色器语言选项，具体取决于您打算让应用程序在其上运行的渲染系统。您尚未指定正在使用的渲染系统，实际实现将取决于此选择。

唯一真正的其他选择是以老式方式在着色器之外生成几何图形，然后在没有几何着色器的情况下渲染它，但仍根据需要使用顶点和像素着色器。

它还取决于您使用的 OGRE 版本。Ogre 1.6 及更高版本支持几何着色器，这应该没问题。

# python - currImage = cv.QueryFrame(capture) 影响其他变量

> ID：12017882
> 
> 赞同：0
> 
> 时间：2012-08-18T10:41:00.283
> 
> 标签：python, opencv

我正在尝试获取第一帧并保持不变，但在每次分配给另一个变量（ currImage = cv.QueryFrame(capture) ）后它都会发生变化。我究竟做错了什么？

```
#!/usr/bin/env python 
# -*- coding: utf-8 -*- 

import cv

cv.NamedWindow("w1", cv.CV_WINDOW_AUTOSIZE)

#SET CAMERA INDEX BELOW
camera_index = -1 

capture = cv.CaptureFromCAM(camera_index)
isRunning = True
firstImage = cv.QueryFrame(capture)

def repeat():
  global capture #declare as globals since we are assigning to them now
  global camera_index
  global isRunning
  global firstImage
  c = cv.WaitKey(100) % 0x100
  currImage = cv.QueryFrame(capture) 
  cv.ShowImage("w1",firstImage)

  if(c==27):
    isRunning = False

while isRunning:
    repeat() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:31:35.750

让我从opencv wiki引用你的两段，即这个页面： http: [//opencv.willowgarage.com/documentation/python/reading_and_writing_images_and_video.html](http://opencv.willowgarage.com/documentation/python/reading_and_writing_images_and_video.html)

```
cvQueryFrame:
The function cvQueryFrame [...] is just a combination of GrabFrame and RetrieveFrame.

RetrieveFrame:
The function cvRetrieveFrame returns the pointer to the image grabbed. 
```

您在代码中所做的不是复制对象，您只需创建另一个指向相应内存的对象。对 cvQueryFrame 的后续调用只是修改对象，因此您必须复制它。尝试这样做：

```
import copy 
import cv

cv.NamedWindow("w1", cv.CV_WINDOW_AUTOSIZE)

#SET CAMERA INDEX BELOW
camera_index = -1 

capture = cv.CaptureFromCAM(camera_index)
isRunning = True
firstImage = copy.deepcopy(cv.QueryFrame(capture))

def repeat():
  global capture #declare as globals since we are assigning to them now
  global camera_index
  global isRunning
  global firstImage
  c = cv.WaitKey(100) % 0x100
  currImage = cv.QueryFrame(capture) 
  cv.ShowImage("w1",firstImage)

  if(c==27):
    isRunning = False

while isRunning:
    repeat() 
```

# git - 为什么`git show-ref FETCH_HEAD`是空的？

> ID：12017884
> 
> 赞同：2
> 
> 时间：2012-08-18T10:41:10.987
> 
> 标签：git, fetch

我获取了远程存储库，并且对它的引用存储在 中`FETCH_HEAD`，它有一些内容

```
cat .git/FETCH_HEAD     
# => d11f8ef4a4735a4193633ed2fed90e441d9ce0f8 branch 'hotfix' of xxx 
```

但`git-fetch`什么也没显示

```
git show-ref FETCH_HEAD 
# => nothing 
```

为什么？以及如何从 FETCH_HEAD 获取最后一次提交的 SHA？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T14:15:29.217

使用`rev-parse`代替`show-ref`：

```
git rev-parse FETCH_HEAD 
```

# c++ - boost::iterator_adapter 不适用于 STL 算法

> ID：12017888
> 
> 赞同：0
> 
> 时间：2012-08-18T10:42:28.520
> 
> 标签：c++, boost, stl, iterator, adaptor

考虑以下“往返”迭代器，它尝试迭代集合中的所有元素，最终再次迭代第一个元素作为其最后一步：

```
#include <boost/iterator/iterator_adaptor.hpp>

template<typename IteratorBase>
class roundtrip_iterator 
     : public boost::iterator_adaptor< 
          roundtrip_iterator<IteratorBase>, // the derived class overriding iterator behavior
          IteratorBase,                     // the base class providing default behavior
          boost::use_default,               // iterator value type, will be IteratorBase::value_type
          std::forward_iterator_tag,        // iterator category
          boost::use_default                // iterator reference type
       > 
{
private:
  IteratorBase m_itBegin;
  IteratorBase m_itEnd;
  bool m_complete;

public:
  roundtrip_iterator( IteratorBase itBegin, IteratorBase itEnd ) 
    : iterator_adaptor_(itBegin), m_itBegin(itBegin), m_itEnd(itEnd), m_complete(false)
  {}

  void increment()
  { 
    if( m_complete )
    {
      base_reference() = m_itEnd;
      return;
    }

    ++base_reference();

    if(base_reference() == m_itEnd)
    {
      base_reference() = m_itBegin;
      m_complete = true;
    }
  }
}; 
```

我现在只实现了增量。

就目前而言，迭代器似乎在标准的“for”循环中运行良好，但我无法让它与 STL 算法一起使用。例如：

```
int main(int argc, char *argv[])
{
  std::vector<int> v;

  v.push_back(1);
  v.push_back(2);
  v.push_back(3);

  roundtrip_iterator<std::vector<int>::iterator> roundtrip(v.begin(), v.end());

  for( ; roundtrip.base() != v.end(); ++roundtrip)
    std::cout << *roundtrip << std::endl;

  std::cout << std::endl;

  roundtrip_iterator<std::vector<int>::iterator> roundtrip2(v.begin(), v.end());

  std::for_each(
    roundtrip2.base(), v.end(),
    print);

} 
```

印刷：

```
1
2    
3
1 // First element printed out using standard for loop.

1
2
3 // The for_each algo stops here for some reason. 
```

有人对两者之间的区别有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:03:06.020

通过调用`roundtrip2.base()`，您有效地将范围传递`[v.begin(), v.end)`给`std::for_each`. 您需要能够构造一个过去的值`e`，以便您可以传递`[roundtrip2, e)`。

# sql - 使用 SQL 查询

> ID：12017890
> 
> 赞同：0
> 
> 时间：2012-08-18T10:42:38.500
> 
> 标签：sql, sql-server

摘要：如何在where条件下使用日文关键词。例如：

```
select * from tbl_Mst_Product_Language  where Name = N'闲云舒展' 
```

在上面的查询中，我在 where 条件下使用了运行良好的日语关键字。但我想把这个值放在变量中，因为我需要从 c# 传递它。

我面临的问题是我试图将 where conditon in variable 放在哪里。例如

```
declare @test as nvarchar(max)
set  @test = '闲云舒展'
select * from tbl_Mst_Product_Language  where Name =  @test 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:01:53.197

你在哪里：

```
declare @test as nvarchar(max)
set @test = '闲云舒展'
select * from tbl_Mst_Product_Language where Name = @test 
```

尝试：

```
declare @test as nvarchar(max)
set @test = N'闲云舒展' -- Note here, N
select * from tbl_Mst_Product_Language where Name = @test 
```

# ios - 与核心数据的并发性

> ID：12017891
> 
> 赞同：0
> 
> 时间：2012-08-18T10:42:39.343
> 
> 标签：ios, multithreading, core-data, concurrency, grand-central-dispatch

我正在使用多线程来获取数据、解析数据、创建对象并存储它们。完成这一切后，我希望显示窗口。但现在我有两个问题：

*   我有一个僵局
*   我的屏障不充当屏障。

我认为死锁是因为我一次在多个线程中更新 managedObjectContext。

1.  所以我用 ConcurrencyType 改变了我的 managedObjectContext：

    ```
    __managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType]; 
    ```

2.  并为并发队列创建了一个 importContext 并分配了 parentContext：

    ```
    NSManagedObjectContext *importContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    importContext.parentContext = self.managedObjectContext; 
    ```

3.  并将我的操作放在 importContext 的 performBlock 中：

    ```
    [importContext performBlock:^{

      dispatch_async(backgroundQueue, ^{
      [myObject methodAWithContext:importContext];
      });

      dispatch_async(backgroundQueue, ^{
      [myObject methodBWithContext:importContext];
      });

      dispatch_async(backgroundQueue, ^{
      [myObject methodCWithContext:importContext];
      });

      dispatch_barrier_async(backgroundQueueM, ^{
      // create barrier to wait for the first 3 threads to be completed.
       dispatch_async(dispatch_get_main_queue(), ^{

        // Save the data from the importContext tot the main context on the main queue
        NSError *importError = nil;
        [importContext save:&importError];
        [importContext.parentContext performBlock:^{
           NSError *parentError = nil;
           [importContext.parentContext save:&parentError];
        }];

       [self.window makeKeyAndVisible];

       });
      });
    }]; 
    ```

方法 1：在每种方法中，我选择对象的一个​​子集，删除它们，然后创建新对象并保存它。（我认为删除比获取并检查要创建的每个对象的存在更快）。所以：在 M​​ethod AI 中选择所有 AObjects，删除它们并创建新的 AObjects。在 Method BI 中选择所有 BObjects，删除它们并创建新的 BObjects。在 Method CI 中选择所有 CObjects，删除它们并创建新的 CObjects。

但随后我收到错误消息“NSManagedObjectContext 无法删除其他上下文中的对象”。

所以方法2：我删除了删除。但是现在我得到了各种不同的错误.....并且屏障不等待其他线程被执行。

Q1：我做错了什么？

Q2：如何获得等待3个线程完成的屏障

Q3：如何删除/清除各个线程上的对象？

（我已经阅读了 Apple 发行说明和文档，但我找不到关于多线程和 managedContext 组合的清晰解释。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T10:59:27.423

你不能`dispatch_async`在 内打电话`performBlock`。类型的托管对象上下文`NSPrivateQueueConcurrencyType`有它自己的调度队列来执行操作。

您尝试通过将它们移动到不同的调度队列来并行执行多个操作，但这是不可能的。

如果确实要并行执行多个操作，则必须为每个操作创建一个私有并发类型 MOC。

**添加：**

有几种方法可以等待所有操作完成：

*   您可以在每个末尾增加一个计数器`performBlock:`并检查它的值是否为（在您的示例中）3。
*   您可以为每个初始值为零的操作创建一个信号量 ( `dispatch_semaphore_create`)，等待所有信号量 ( `dispatch_semaphore_wait`) 并在每个信号量的末尾发出信号量`performBlock`。
*   而且我确信有更好/更优雅/更复杂的方法来做到这一点。

**但是：**当我重新阅读您的问题时，我看到您试图推迟

```
[self.window makeKeyAndVisible]; 
```

直到所有核心数据获取操作都完成。这不是一个好的设计，因为在您的数据导入完成之前，用户什么都看不到。

更好的设计是立即显示初始视图，并在后台操作获取数据时更新该视图。

# java - 在java中查找大写单词

> ID：12017892
> 
> 赞同：-3
> 
> 时间：2012-08-18T10:43:03.607
> 
> 标签：java

如何提取两个或多个以空格分隔且以大写字母开头的单词并将它们保存为 java 中的单个标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T10:50:54.257

您可以使用以下内容作为起点：

```
String input = "This is a sentence with two Words with capital letters";
String[] words = input.split(" ");

for(String word : words)
{
    if(word.length() > 0 && Character.isUpperCase(word.charAt(0)))
    {
        System.out.println("Upper case: " + word);
    }
    else
    {
        // doesn't have upper case at beginning
    }
} 
```

输出将是：

> 大写：这个
> 
> 大写：单词

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T10:52:28.377

您可以使用此正则表达式，它将匹配以大写字母开头的任何单词：`\b([A-Z]\w*?)\b`。

这个稍作修改的版本将仅匹配序列 > 2: `(\b[A-Z]\w*\b(?: (?![^A-Z]))?){2,}`。

我认为只需一点点努力，两个正则表达式都可以变得更小。但这会给你一些起点。

* * *

试试看：[http ://www.cis.upenn.edu/~matuszek/General/RegexTester/regex-tester.html](http://www.cis.upenn.edu/~matuszek/General/RegexTester/regex-tester.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T11:01:54.533

您可以使用此正则表达式在句子中查找多个单词，空格用作拆分字符，您可以添加其他单词。

```
((?<=\s)[A-Z][\w]*\s)+[A-Z][\w]*(?=\s) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T10:56:05.270

我希望这能解决你的问题。

1.使用字符串函数

```
String word = "this is my content ";
        String[] splitWord;
        String capWord = "";
        splitWord = word.split(" ");
        for (int i = 0; i < splitWord.length; i++) {
           capWord = splitWord[i].substring(0, 1).toUpperCase() + splitWord[i].substring(1) + " ";
    System.out.println(capWord);
        } 
```

2.使用 WordUtils API

```
 String text="use this    text";
    String text1="use this TEXT";

    String word = WordUtils.capitalize(text);
    System.out.println(word);

    word = WordUtils.capitalizeFully(text1);
    System.out.println(word); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T11:00:18.530

正则表达式可能是一个不错的选择。

要匹配以大写字母开头的两个或多个单词的任何系列，那么您需要使用[Matcher](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html)。

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Main {

    public static void main(String[] args) {

        String passage = "I am at New South Welse at the moment";
        Pattern twoOrMoreWordsPattern= Pattern.compile("([A-Z][a-z]+ +){2,}");
        Matcher twoOrMoreWordsMatcher = twoOrMoreWordsPattern.matcher(passage);
        while (twoOrMoreWordsMatcher.find()){
            for(int i = 0; i < twoOrMoreWordsMatcher.groupCount(); i++){
                System.out.print(twoOrMoreWordsMatcher.group(i));
            }
        }
        System.out.println("");
    }

} 
```

这有望工作并做你想做的事，如果没有，那么它接近你想要的......

# iphone - 可以在 iPhone 中使用自定义弹出框控制器吗

> ID：12017894
> 
> 赞同：1
> 
> 时间：2012-08-18T10:43:40.190
> 
> 标签：iphone, xcode, cocoa-touch

可以在 iPhone 应用程序中使用弹出框吗？Apple 的文档对此有何评论？

我不是在谈论标准弹出框（会引发异常），而是像[这样](https://github.com/50pixels/FPPopover)的自定义库。

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T10:47:23.353

Apple 不会对任何自定义 UI 有任何问题。你可以继续..！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T11:45:45.480

是的，您可以在 iPhone 应用程序中使用弹出框。最好的例子是 Facebook 应用程序。

# javascript - Node.js 设置套接字 ID

> ID：12017900
> 
> 赞同：1
> 
> 时间：2012-08-18T10:45:23.763
> 
> 标签：javascript, node.js, socket.io, real-time

从 Node.js 的官方聊天示例开始。
提示用户通过“注册”（client.html）向服务器发出他的名字：

```
 while (name == '') {
               name = prompt("What's your name?","");
            }                
            socket.emit('register', name ); 
```

服务器接收名称。我希望它将名称作为套接字的标识符。因此，当我需要向该用户发送消息时，我将其发送到具有他的名字的套接字（名称存储在数据库中以获取信息）。
更改将在此处进行（server.js）：

```
 socket.on('register', function (name) {
      socket.set('nickname', name, function () {         
         // this kind of emit will send to all! :D
         io.sockets.emit('chat', {
            msg : "naay nag apil2! si " + name + '!', 
            msgr : "mr. server"
         });
      });
   }); 
```

我正在努力使这项工作正常进行，因为如果我无法识别套接字，我将无法走得更远。因此，任何帮助将不胜感激。
**更新：**我知道昵称是套接字的参数，所以问题更具体：如何获取具有“Kyle”作为昵称的套接字以向其发出消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T10:55:39.200

Store your sockets in a structure like this:

```
var allSockets = {

  // A storage object to hold the sockets
  sockets: {},

  // Adds a socket to the storage object so it can be located by name
  addSocket: function(socket, name) {
    this.sockets[name] = socket;
  },

  // Removes a socket from the storage object based on its name
  removeSocket: function(name) {
    if (this.sockets[name] !== undefined) {
      this.sockets[name] = null;
      delete this.sockets[name];
    }
  },

  // Returns a socket from the storage object based on its name
  // Throws an exception if the name is not valid
  getSocketByName: function(name) {
    if (this.sockets[name] !== undefined) {
      return this.sockets[name];
    } else {
      throw new Error("A socket with the name '"+name+"' does not exist");
    }
  }

}; 
```

# ios - 如何获取没有相关（通过特定关系）实体的对象。

> ID：12017901
> 
> 赞同：0
> 
> 时间：2012-08-18T10:45:25.687
> 
> 标签：ios, cocoa-touch, core-data

我想从一个没有相关对象的实体中获取所有对象（使用特定的键路径）我正在考虑使用计数，但不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:06:06.220

如果是 1:1 关系，请尝试以下搜索谓词：

```
[NSPredicate predicateWithFormat:@"relationshipName = NULL"]; 
```

对于 1:n 关系：

```
[NSPredicate predicateWithFormat:@"relationshipName.@count == 0"] 
```

# c# - 编写一个观察者服务来检查当前活动的 web 元素

> ID：12017905
> 
> 赞同：0
> 
> 时间：2012-08-18T10:47:10.290
> 
> 标签：c#

是否可以在 C# 中编写一个服务应用程序

1.  检查当前活动窗口是否为网络浏览器
2.  如果当前浏览的网站是某个网站
3.  最后检查光标是否在特定元素中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:09:46.573

1.检查当前活动窗口是否为网络浏览器

```
Process[] ieProcs = Process.GetProcessesByName("IEXPLORE"); 
System.Diagnostics.Process[] ieProcs = Process.GetProcessesByName("IEXPLORE"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T11:12:29.350

```
using System.IO;

...

SHDocVw.ShellWindows shellWindows = new SHDocVw.ShellWindowsClass();

string filename;

foreach ( SHDocVw.InternetExplorer ie in shellWindows )
{
    filename = Path.GetFileNameWithoutExtension( ie.FullName ).ToLower();

    if ( filename.Equals( "iexplore" ) )
        Console.WriteLine( &quot;Web Site   : {0}", ie.LocationURL );

    if ( filename.Equals( "explorer&quot; ) )
        Console.WriteLine( "Hard Drive : {0}", ie.LocationURL );
} 
```

# wifi - 在游戏开发套件中使用 Wifi 而不是蓝牙

> ID：12017910
> 
> 赞同：1
> 
> 时间：2012-08-18T10:47:49.017
> 
> 标签：wifi, gamekit

我正在使用 GameKit 连接 2 个设备（点对点）方式。

我不想使用蓝牙连接设备 - 我想使用本地 wifi 路由器。（路由器无法访问互联网）。

我可以使用蓝牙而不是 wifi 来做所有事情 - 我什至修改了这一行：

```
picker.connectionTypesMask = GKPeerPickerConnectionTypeNearby; 
```

至

```
picker.connectionTypesMask = GKPeerPickerConnectionTypeNearby | GKPeerPickerConnectionTypeOnline; 
```

但是这个简单的更改添加了一个标签，显示在线，当我点击它时它什么也不做，当我点击附近的另一个标签时，它使用蓝牙连接。有什么问题？

# java - JPA 鉴别器 SINGLE_TABLE 继承

> ID：12017911
> 
> 赞同：3
> 
> 时间：2012-08-18T10:47:52.087
> 
> 标签：java, jpa, annotations

我有一个包含三个子表 Sub1、Sub2 和 Sub3 的 HeaderTable。Sub1 和 Sub2 需要引用 HeaderTable 中的同一行数据，而 Sub3 需要引用另一行数据。

我所做的是创建一个abstractHeader，然后由HeaderTableA 和HeaderTableB 的两个实现扩展。

HeaderTableA 有一个 Sub1 和 Sub2 的列表，而 HeaderTableB 有一个 Sub3 的列表。

HeaderTable 中的鉴别器列是 messageType，然后将其设置为 HeaderTableA 上的鉴别器值“WO”和 HeaderTableB 上的“CO”。

保留 HeaderTableB(CASCADE.ALL to Sub3) 没有问题，因为它只包含一个列表。当我尝试持久化 HeaderTableA 时出现问题，其中 sub1 列表和列表 sub2 都有数据。但是，如果只填充了 sub1 列表或 sub2 列表，那么它也可以毫无问题地持续存在。

遇到的错误坚持外键 ID(headerID) 不存在。

像这样的东西：

```
@Entity
@Table(name="CODE")
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(discriminatorType=DiscriminatorType.STRING, name="codeType")
@DiscriminatorValue(value="UNKNOWN")
public abstract class BusinessCode extends DateExpirableWithId<Long> {

    private static final long serialVersionUID = -2766041951015641149L;

    private String code;

    @Column(updatable=false, insertable=false)
    private String codeType;

    private String language;

    private String description;

    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }

    public String getCodeType() {
        return codeType;
    }

    public void setCodeType(String codeType) {
        this.codeType = codeType;
    }

    public String getLanguage() {
        return language;
    }

    public void setLanguage(String language) {
        this.language = language;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();
        builder.append("BusinessCode [code=");
        builder.append(code);
        builder.append(", codeType=");
        builder.append(codeType);
        builder.append(", language=");
        builder.append(language);
        builder.append(", description=");
        builder.append(description);
        builder.append("]");
        return builder.toString();
    }
}

@Entity
@DiscriminatorValue(value="CountryCode")
public class CountryCode extends BusinessCode {

    private static final long serialVersionUID = -7207238725104662784L;

    private List<SubProperty1> subProperties1;
    private List<SubProperty2> subProperties2;

    public List<SubProperty1> getSubProperties1() {
        return subProperties1;
    }

    public void setSubProperties1(List<SubProperty1> subProperties1) {
        this.subProperties1 = subProperties1;
    }

    public List<SubProperty2> getSubProperties2() {
        return subProperties2;
    }

    public void setSubProperties2(List<SubProperty2> subProperties2) {
        this.subProperties2 = subProperties2;
    }
} 
```

请参考下图更好地描述表结构： ![在此处输入图像描述](../Images/14e145556ed4bc04dc1e07899e807a4f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T03:46:24.347

我认为这听起来更像是 InheritanceType.JOINED。JOINED 策略不需要鉴别器。

BusinessCode.java（假设你的超类有 ID 列等）

```
@Entity
@Table(name="CODE")
@Inheritance(strategy=InheritanceType.JOINED)
public abstract class BusinessCode extends DateExpirableWithId<Long> {

    private static final long serialVersionUID = -2766041951015641149L;

    @Column(nullable = false)
    private String code;

    @Column(nullable = false)
    private String language;

    @Column(nullable = false)
    private String description;

    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }

    public String getLanguage() {
        return language;
    }

    public void setLanguage(String language) {
        this.language = language;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }
} 
```

国家代码.java

```
@Entity
@Table(name="COUNTRY_CODE")
@Inheritance(strategy = InheritanceType.JOINED)
public class CountryCode extends BusinessCode {
  @Column
  private String countryName;

  public String getCountryName() { return countryName; }
  public String setCountryName(String value) { countryName = value; }
} 
```

部门代码.java

```
@Entity
@Table(name="DEPARTMENT_CODE")
@Inheritance(strategy = InheritanceType.JOINED)
public class DepartmentCode extends BusinessCode {
  @Column
  private String departmentName;

  public String getDepartmentName() { return departmentName; }
  public String setDepartmentName(String value) { departmentName= value; }
} 
```

您的表结构将如下所示：

```
BUSINESS_CODE
  ID(PK)
  CODE,
  LANGUAGE,
  DESCRIPTION

COUNTRY_CODE
  ID(FK), 
  COUNTRYNAME

DEPARTMENT_CODE
  ID(FK)
  DEPARTMENTNAME 
```

数据看起来像这样：

```
BUSINESS_CODE
1, "AU","EN","australia country code in english"
2, "AU","FR","australia country code in french"
3, "FIN","EN","finance department code"

COUNTRY_CODE
1, "Australia"
2, "Australie"

DEPARTMENT_CODE
3, "Bean Counters" 
```

# java - Netty 4.0 - 在无效输入时关闭通道

> ID：12017913
> 
> 赞同：1
> 
> 时间：2012-08-18T10:48:24.267
> 
> 标签：java, netty, nio

基本上我有以下解码器：

```
public class Decoder extends ReplayingDecoder<Packet, Void> {

@Override
public Packet decode(ChannelHandlerContext ctx, ByteBuf in) throws Exception {
    short id = in.readUnsignedByte();
    Packet packet = Packet.newInstance(id);
    if (packet == null) {
        throw new IOException("Wasn't prepared to deal with packet 0x" + Integer.toHexString(id));
    }
    packet.read(in);
    return packet;
} 
```

}

它旨在从流中获取输入，读取无符号字节数据包 id，然后使用该字节构造解码器，但是我在这里遇到的问题是在输入无效时关闭系统（抛出 IOException）。我曾尝试使用 ChannelHandlerContext.close() 和 ChannelHandlerContext.channel().close() 但这两个最终都在循环中调用解码器并且我被卡住了。

请给我一些帮助以优雅地关闭此连接。

附带说明一下，当读取阻塞超过 x 毫秒时，知道如何终止连接也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:25:06.347

要关闭非活动连接，您可以将 a 添加`ReadTimeoutHandler`到管道中。`ReadTimeoutException`当在指定的时间段内没有收到数据时，超时处理程序将抛出一个。您可以在方法中以与处理无效输入`exceptionCaught()`相同的方式处理此异常。`IOException`

# html - 什么命名div标签左右“分组”内容

> ID：12017915
> 
> 赞同：1
> 
> 时间：2012-08-18T10:48:53.597
> 
> 标签：html, css

我已经阅读了一些关于语义 HTML 代码的文章，并且我正在尝试应用这些原则来修复我的页面。

我有一个索引页面，其中包含一个带有欢迎问候的部分、一个快速注册表单和一个大的 iphone 图像。

我希望欢迎问候语和快速注册在左侧（彼此下方），而 iphone 图像在右侧。现在，我想知道如何正确浮动这些 div？

我想制作一个具有浮动属性的左右 div，但我认为名称不好。我还认为内容和侧边栏是两个分组的 div 名称……但它真的是侧边栏吗？我可能需要一些帮助。

```
<div id="welcomegreeting">
    <h2>Title</h2>

</div>

<div id="quickregistration">
        <h3>Title</h3>
        <form>
            <input type="text">
            <input type="text">
            <input type="submit">
        </form>
    </div>

<div id="appshowcase">
    <img src="" />
</div> 
```

*我知道标记无效，但这只是为了让您明白我的意思。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T10:54:36.097

> I want the welcome greeting and quick registration to be on the left side (underneath eachother) while the iphone image is on the right side. Now, I wonder how I should float these divs correctly?

```
<div style="float: left;"></div>

<div style="float: right;"></div> 
```

The question about naming isn't really relevant. Give it whatever name you want.

If you already have a site, don't worry about removing/changing your divs. You can wrap them with semantic tags.

For information, see [HTML5 best practices; section/header/aside/article elements](https://stackoverflow.com/questions/4781077/html5-best-practices-section-header-aside-article-tags).

The use of semantic tags isn't going to help your users. However, it might help bots (such as a search engine).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T10:59:22.817

I wouldn't get caught up too much on it. Semantic code, although the way forward, should be there to help you, not confuse you.

Personally from what you've described, I'd use something like this:

```
<section>
    <div class="welcomeTitle">
        <h2>Title</h2>
    </div>
    <div class="registerForm">
        <h3>Title</h3>
        <form>
            <input type="text">
            <input type="text">
            <input type="submit">
        </form>
    </div>
</section>
<aside>
    <div id="appImage">
        <img src="" />
    </div>
</aside>​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T11:00:09.550

You can also combine float and margin attributes:

HTML:

```
<div id="leftside">

<div id="welcomegreeting">
    <h2>Welcome</h2>
</div>

<div id="quickregistration">
    <h3>Title</h3>
    <form>
        <input type="text">
        <input type="text">
        <input type="submit">
    </form>
</div>

</div>

<div id="appshowcase">
    <img src="" />
</div>

<div style="clear:both"></div> 
```

CSS:

```
#leftside {
    float:left;
    width:200px;
}

#appshowcase {
    margin-left: 202px;
} 
```

[Fiddle](http://jsfiddle.net/zWgbn/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T10:56:23.257

Enclose the left and the right sides in tags with id `left` and `right`, and use the float property. You can name them whatever you want, but you can keep it as simple as left and right. Semantic markup does not mean you have to spend hours deliberating what to call it, it just means that the name should relate as closely as possible to the element's function.

See a live example [here](http://jsfiddle.net/chc7y/)

**HTML**

```
<div id="left">
    <div id="welcomegreeting">
        <h2>Title</h2>
    </div>
    <div id="quickregistration">
        <h3>Title</h3>
        <form>
            <input type="text">
            <input type="text">
            <input type="submit">
        </form>
    </div>
</div>

<div id="right">
    Some content
    <div id="appshowcase">
        <img src="" />
    </div>
</div> 
```

​ **CSS**

```
#left {
    float: left;
}
#right {
    float: right;
} 
```

# android - 在为多个屏幕以及横向和纵向设计时，最好使用什么布局

> ID：12017917
> 
> 赞同：3
> 
> 时间：2012-08-18T10:49:04.930
> 
> 标签：android, android-layout

![Android 布局按钮](../Images/963d164c54d32badab0b954337982552.png)

你好！我刚刚开始使用 android 布局，我想知道是否有一种应用基本布局的通用方法，以便它将自身调整为多个屏幕并自动调整为横向视图。例如：在上图中，我添加了一些按钮。现在我想了解的是 b 使用了哪些布局或选项（如重量、重力、对齐方式），以便它们在每个视图和每个屏幕上都保持相同。有人说在线性中使用线性布局，然后添加权重和对齐。他们说通过这样做，您可以灵活地删除任何按钮，而其他按钮不会丢失其位置（与相对布局不同）。有没有更好的方法可以在所有屏幕上具有相同的布局但又灵活？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:39:49.957

如果要创建 FORM，可以使用多个线性布局。否则绝对布局也不错，但不太可取。

相对布局需要练习，因为您必须相对于其他设置小部件。

多个线性布局可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:05:37.427

RelativeLayout 非常易于使用，如果您学会对齐其中的小部件，则布局在每个屏幕上看起来都相同，但它适用于非常简单的布局（布局上的小部件很少）或您知道的布局会永远不会改变，因为在 RelativeLayout 上进行更改非常困难，最好的方法是编辑 XML 不能在 DesignView 上运行。

LinearLayout 不像RelativeLayout 那样灵活，但是对其进行更改非常简单，并且其他小部件不会丢失它们的位置。

毕竟，如果您想为多种屏幕尺寸设计布局，我建议使用[Fragments](http://developer.android.com/guide/components/fragments.html)。

# android - 使用加载器和阵列适配器处理方向变化

> ID：12017918
> 
> 赞同：1
> 
> 时间：2012-08-18T10:49:06.387
> 
> 标签：android

我正在使用加载器将数据加载到 gridview 中。首先让我向您展示一些代码：-

```
The Fragment
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle icic){

    View v=inflater.inflate(R.layout.thegrid, container, false);
    final GridView gv = (GridView)v.findViewById(
            R.id.thegridview);
    gv.setAdapter(upAd);//upAd is the array adapter initialized in oncreate of the fragment

    gv.setOnItemClickListener(this);
    Bundle args=new Bundle();
    args.putString("page", String.valueOf(page));
    getLoaderManager().initLoader(1, args, this);

    return v;
}
@Override
public Loader<ArrayList<HashMap<String, String>>> onCreateLoader(int loaderId,Bundle thebundle) {

    if(loaderId==1){
        String page=thebundle.getString("page");
        return new MyLoader(getActivity().getApplicationContext(),page);
    }

    return null;
}

@Override
public void onLoadFinished(Loader<ArrayList<HashMap<String, String>>> theLoader,ArrayList<HashMap<String, String>> data) {
    upAd.addAll(data);
} 
```

现在，当显示片段时，它显示了一个已下载的 10 个元素的网格。现在，当屏幕方向改变时，加载器表现良好，不会再次下载数据，但它会再次将相同的数据添加到网格中。所以我结束了最多有一个由 20 个元素组成的网格，相同的 10 个元素重复了两次。好吧，我可以打电话：-

```
upAd.clear() 
```

在 onLoadFinished 但我想避免这种情况。有人可以告诉我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:12:17.660

您有 20 个项目，因为`ArrayList`保存数据`upAd`已经有 10 个过去的项目。然后你打电话`upAd.addAll(data);`。这意味着您要向该数组列表添加另外 10 个相同的项目。所以解决办法是清除适配器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T11:10:47.847

在 menifiest 文件中的 Activity 声明中使用这一行。

```
android:configChanges="orientation|keyboardHidden" 
```

# asp.net - 谷歌地图标记根本不显示

> ID：12017919
> 
> 赞同：2
> 
> 时间：2012-08-18T10:49:10.450
> 
> 标签：asp.net, google-maps

我使用相同的谷歌地图代码开发了许多网站，但这次我的标记没有显示，我不知道为什么。

这是代码：

```
<link href="<%= Page.ResolveUrl("~/Assets/Styles/map.css") %>" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
    function initializeMap() {

        var latitude = 45.483995;
        var longitude = 9.181769;

        var latlng = new google.maps.LatLng(latitude, longitude);
        var myOptions = {
            zoom: 15,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        var image = '<%= Page.ResolveUrl("~/Assets/Images/Contacts/Baloon.png") %>';
        var myLatLng = new google.maps.LatLng(45.4530, 9.2115);
        var beachMarker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            icon: image
        });
    }
</script> 
```

这是 map.css 文件：

```
#map_canvas 
{
 height: 300px;
 width: 400px;
 text-align: center;
} 
```

图片在服务器上正确，我可以通过浏览器 url 打开它..

这是一个链接：[链接](http://tinyurl.com/ct5lw6w)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T11:20:47.310

我认为问题只是您为标记提供的坐标超出了地图边界。如果你缩小一点，你可以看到它。

这是一个使用用于初始化地图的坐标作为标记坐标的示例：http: [//jsfiddle.net/Dn7Rf/1/](http://jsfiddle.net/Dn7Rf/1/)

或者更确切地说，以标记为中心的地图：http: [//jsfiddle.net/Dn7Rf/2/](http://jsfiddle.net/Dn7Rf/2/)

# iis - 在 IIS 中创建网站和 Web 应用程序

> ID：12017920
> 
> 赞同：4
> 
> 时间：2012-08-18T10:49:57.593
> 
> 标签：iis, powershell

到目前为止，我一直在想我们总是在 IIS 中创建/托管*网站。*但是我今天正在阅读 powershell 教程，它说创建网站和 Web 应用程序是不同的。

这是教程链接（检查有关创建网站和应用程序的不同部分） -
[http://learn.iis.net/page.aspx/433/powershell-snap-in-creating-web-sites-web-applications-virtual -目录和应用程序池/](http://learn.iis.net/page.aspx/433/powershell-snap-in-creating-web-sites-web-applications-virtual-directories-and-application-pools/)

可以请指导一下这两者有什么区别。
任何例子都会很有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-04T07:34:42.687

IIS 中的**网站**是站点下的顶层。在安装 IIS 时通常会自动为您创建的默认站点名为“默认网站”。
这是在端口 80 上运行的“根”。
在此之下，您可以创建**虚拟目录**，这基本上是根网站下的子级别，或者您可以创建单独**的 Web 应用程序**，这些应用程序作为单独的应用程序存在于根级别下。**Web 应用程序**必须存在于
网站**下**。

 ****可以创建其他**网站**，这些网站可以设置为在其他端口（即 81）上运行，也可以使用不同的主机名命名，从而使多个站点能够在相同的端口号上运行。如果使用不同的主机名命名，则该名称必须在 DNS 服务器中注册以指向您服务器的 IP 地址。一种解决方法是将其添加为应访问它的客户端计算机上的 hosts 文件中的条目。

这是它在***IIS 管理器****中的外观示例：*

![IIS 中的网站和 Web 应用程序示例](../Images/08e5c0d2109d27705096382fe120e103.png)
![网站详情](../Images/ed9f7d422f8f43de23707b7a8ba2186a.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-25T09:01:20.040

我有一个在 IIS 7+、.net4、集成管道中创建网站和 AppPool 时使用的脚本，我认为您可能会发现它很有用。

像这样使用它：

```
CreateSite.ps1 [WebsiteName] [AppPoolName] [Port] [Path] 
```

如果要重新安装站点，则需要先停止它。这样做是这样的：

```
StopSite.ps1 [WebsiteName] [AppPoolName] 
```

你可以[从我的 gist 中获取脚本](https://gist.github.com/alastairtree/3c2a17d26ed1e49f6d51)

**更新**我已经添加/扩展了脚本并将它们放在他们自己的[Github 存储库中](https://github.com/alastairtree/deploy-websites-with-powershell)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T10:29:08.440

这是我的`CreateWebsite`PowerShell 脚本：[http ://www.zerrouki.com/create-website/](http://www.zerrouki.com/create-website/)****

# java - Spring Data MongoDB“_class”糟糕的设计模式

> ID：12017921
> 
> 赞同：7
> 
> 时间：2012-08-18T10:50:20.827
> 
> 标签：java, mongodb, spring-data

我对 Spring Data MongoDB 项目有疑问。我的问题是`_class`所有收藏记录中的财产。我的用户集合大小接近 130 万条记录。所有记录都有一个`_class`属性。这是项目的问题和糟糕的设计。因为 MongoDB 是一个基于文档的系统。大小是集合中每条记录的问题。用户收藏：

```
{ "_class" : "com.myproject.xxx.yy.aaa.bb.User", … } 
```

如果我想将 User 类移动到另一个包怎么办？Spring Data 为什么要给`_class`所有记录添加一个属性？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-19T11:07:18.543

如果您抨击您寻求建议的项目，我不知道是什么导致您假设提高获得建议的机会。除此之外，在使用软件库时，您可能想假设实现细节已经经过深思熟虑，并且它们的方式是有原因的。

如果您花时间考虑阅读参考文档，您会发现解释为什么属性一般存在以及如何调整写入的值、如何自定义键甚至关闭写入的类型信息的[部分](http://docs.spring.io/spring-data/data-mongodb/docs/current/reference/html/#mongo-template.type-mapping)`_class`一点也不。

阅读完这些内容后，您现在可以反过来再次编写完美的软件。谢谢！

PS：我花了一些时间来完善你设计糟糕的提问方式。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-05T16:15:13.283

对于最近访问此内容的人，请查看 @TypeAlias 注释，该注释允许您声明将放入 _class 的值，因此可以使用较小的值。

这也应该部分回答上面@Eric2201 的问题，他询问了一个不同的类型属性。我不确定拥有不同且因此不一致的属性是否是个好主意，我对 _class 感到满意。您当然可以将任何您想要的字段添加到文档中。

没有人在这里问过它，但仅供参考，您可以在同一个集合中混合类型。如果您想根据类型限制文档搜索，即使 MongoTemplate 在“查找”方法中要求类型，它也不会在 Spring Mongo 中自动发生；您自己将 _class 添加到查询中。

# wpf - 如何在模板中绑定折线？

> ID：12017925
> 
> 赞同：0
> 
> 时间：2012-08-18T10:51:25.800
> 
> 标签：wpf, templates, polyline

我正在尝试在控制模板中绑定折线的点。这些点应该绑定到代码隐藏中的点集合。我当前的 xaml 代码如下：

```
<Style TargetType="{x:Type c:LineDragThumb}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type c:LineDragThumb}">
                <Polyline Stroke="Transparent" Points="{Binding}"
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我是否需要创建一个依赖属性来保存点集合？

请指导..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:37:21.843

不，您可以`Notifiable property of PointCollection`在代码隐藏中进行简单的绑定，但请确保您实施`INotifyPropertyChanged`以刷新 UI 上的绑定。

```
public PointCollection Points { get; set; } 
```

要绑定 xaml，您可以这样做 -

```
<Polyline Stroke="Transparent" Points="{Binding Points,
       RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}"/> 
```

# javascript - $.getJSON is not working in Chrome and Safari

> ID：12017930
> 
> 赞同：1
> 
> 时间：2012-08-18T10:51:54.177
> 
> 标签：javascript, jquery, google-chrome

The below is my code java script which working in Firefox very well but not in chrome or other.

```
$.getJSON('http://localhost:8080/myapp/getUploadStatus.htm?jsoncallback=?', function(data) {alert(data)}); 
```

And in server side i'm returning proper JSON data with the json function name like.

```
jQuery15205480379721357835_1345286865781({"percentage":0,"cpercentage":0,"cfile":"23.gif","uploadFiles":"noData"}) 
```

This working fine in FF but not in any other, In chrome it's not hitting to my server also. Means the request is not going to server. Any help will be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:04:47.637

我总是将以下 jQuery 用于 JSON **javascript**：

```
var thedata = "hey";    
$.ajax({
     type:'POST',
     dataType: 'json',
     url: 'your url',
     data: 'mydata='+thedata,
     cache: false,
     success: function(data) {
       alert(data.callback);
     }
    }); 
```

还有一个**PHP**示例：

```
if(isset($_POST['mydata'])) {
 $callback = "This is what I've got: ".$_POST['mydata'];
 echo json_encode(array('callback'=>$callback));
} 
```

在这个简单的示例中，您将收到一个 JS 警报：这就是我所拥有的：嘿

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:01:29.723

尝试使用

```
event.preventDefault(); 
```

# perl - 函数导出但脚本在错误的包中搜索它

> ID：12017932
> 
> 赞同：2
> 
> 时间：2012-08-18T10:52:20.507
> 
> 标签：perl

我有一个 perl 包`ServerSocket.pm`，如下所示：

```
package Functions::ServerSocket;

use strict;
use warnings;
use ZeroMQ qw/:all/;
use Functions::Testd qw(get_interface_address);

# Next lines are needed to export subroutines
use base 'Exporter';
use vars qw/ @EXPORT_OK /;
@EXPORT_OK = qw(start_socket receive_msg send_msg end_msg close_socket term_ctxt send_ip);

{....................}

# Send a message
sub send_msg {
    # Retrieve message
    my $msg = shift;

    # If $sender is not undef, sending the first part of output with socket identity
    if (defined($sender)){
        select_recipient();
    }

    ZeroMQ::Raw::zmq_send($socket, $msg, ZMQ_SNDMORE);
    chomp($msg);
    print "MSG: \"$msg\" sent.\n";
}

{................................} 
```

我在另一个名为的包中使用了这个包`Testd.pm`：package Functions::Testd;

```
use strict;
use warnings;
use Functions::ServerSocket qw(send_msg close_socket term_ctxt end_msg);
use Scalar::Util qw(looks_like_number);
use Socket;
require 'sys/ioctl.ph';

{...............}

sub stop_daemon {   
    # Killing all remaining process
    killing_child();

    # Printing to the FIFO the last log. 
    send_msg("Daemon stopped.\n");
    send_msg("DAEMON_STOPPED\n");
    end_msg();

    # Removing the socket. Do it only when you're sure you don't have any more output to send.
    remove_socket();

    print "Daemon stopped.\n";
    STDOUT->flush();
    exit 0;
}

{..............} 
```

对我来说一切都很好，我使用了这种方法数百次。但是这次我得到了这个错误：

`Undefined subroutine &Functions::Testd::send_msg called at Functions/Testd.pm line 80.`

我找到的唯一解决方案是编写带有完整路径的子例程，即`&Functions::ServerSocket::send_msg`. 为什么会这样？从 ServerSocket 导出到 Testd 的所有函数都会发生同样的错误。我也在其他包和脚本中导入 ServerSocket 函数，一切正常。只有 Testd 似乎无法导入它们。

如果您需要，我可以发布整个包裹。

正如有人问的那样，这是调试器中 M 的输出：

```
'/usr/lib/perl/5.14/auto/POSIX/autosplit.ix' => '/usr/lib/perl/5.14/auto/POSIX/autosplit.ix'
'/usr/lib/perl/5.14/auto/POSIX/load_imports.al' => '/usr/lib/perl/5.14/auto/POSIX/load_imports.al'
'AutoLoader.pm' => '5.71 from /usr/share/perl/5.14/AutoLoader.pm'
'B.pm' => '1.29 from /usr/lib/perl/5.14/B.pm'
'Carp.pm' => '1.20 from /usr/share/perl/5.14/Carp.pm'
'Class/Struct.pm' => '0.63 from /usr/share/perl/5.14/Class/Struct.pm'
'Config.pm' => '/usr/lib/perl/5.14/Config.pm'
'Config_git.pl' => '/usr/lib/perl/5.14/Config_git.pl'
'Config_heavy.pl' => '/usr/lib/perl/5.14/Config_heavy.pl'
'Cwd.pm' => '3.36 from /usr/lib/perl/5.14/Cwd.pm'
'DynaLoader.pm' => '1.13 from /usr/lib/perl/5.14/DynaLoader.pm'
'Errno.pm' => '1.13 from /usr/lib/perl/5.14/Errno.pm'
'Exporter.pm' => '5.64_03 from /usr/share/perl/5.14/Exporter.pm'
'Exporter/Heavy.pm' => '5.64_03 from /usr/share/perl/5.14/Exporter/Heavy.pm'
'Fcntl.pm' => '1.11 from /usr/lib/perl/5.14/Fcntl.pm'
'File/Basename.pm' => '2.82 from /usr/share/perl/5.14/File/Basename.pm'
'File/Find.pm' => '1.19 from /usr/share/perl/5.14/File/Find.pm'
'File/Spec.pm' => '3.33 from /usr/lib/perl/5.14/File/Spec.pm'
'File/Spec/Unix.pm' => '3.33 from /usr/lib/perl/5.14/File/Spec/Unix.pm'
'File/stat.pm' => '1.05 from /usr/share/perl/5.14/File/stat.pm'
'FindBin.pm' => '1.50 from /usr/share/perl/5.14/FindBin.pm'
'Functions/Help.pm' => 'Functions/Help.pm'
'Functions/Launcher.pm' => 'Functions/Launcher.pm'
'Functions/ServerSocket.pm' => 'Functions/ServerSocket.pm'
'Functions/Setup.pm' => 'Functions/Setup.pm'
'Functions/Shell.pm' => 'Functions/Shell.pm'
'Functions/ShellSocket.pm' => 'Functions/ShellSocket.pm'
'Functions/Testd.pm' => 'Functions/Testd.pm'
'Getopt/Long.pm' => '2.38 from /usr/share/perl/5.14/Getopt/Long.pm'
'IO.pm' => '1.25_04 from /usr/lib/perl/5.14/IO.pm'
'IO/Dir.pm' => '1.08 from /usr/lib/perl/5.14/IO/Dir.pm'
'IO/File.pm' => '1.15 from /usr/lib/perl/5.14/IO/File.pm'
'IO/Handle.pm' => '1.31 from /usr/lib/perl/5.14/IO/Handle.pm'
'IO/Pipe.pm' => '1.14 from /usr/lib/perl/5.14/IO/Pipe.pm'
'IO/Seekable.pm' => '1.1 from /usr/lib/perl/5.14/IO/Seekable.pm'
'IO/Socket.pm' => '1.32 from /usr/lib/perl/5.14/IO/Socket.pm'
'IO/Socket/INET.pm' => '1.31 from /usr/lib/perl/5.14/IO/Socket/INET.pm'
'IO/Socket/UNIX.pm' => '1.23 from /usr/lib/perl/5.14/IO/Socket/UNIX.pm'
'JSON.pm' => '2.53 from JSON.pm'
'JSON/PP.pm' => '2.27200 from /usr/share/perl/5.14/JSON/PP.pm'
'JSON/backportPP.pm' => 'JSON/backportPP.pm'
'List/Util.pm' => '1.23 from /usr/lib/perl/5.14/List/Util.pm'
'POSIX.pm' => '1.24 from /usr/lib/perl/5.14/POSIX.pm'
'Proc/Daemon.pm' => '0.14 from Proc/Daemon.pm'
'Proc/Spawn.pm' => '1.03 from Proc/Spawn.pm'
'Scalar/Util.pm' => '1.23 from /usr/lib/perl/5.14/Scalar/Util.pm'
'SelectSaver.pm' => '1.02 from /usr/share/perl/5.14/SelectSaver.pm'
'Socket.pm' => '2.005 from /usr/local/lib/perl/5.14.2/Socket.pm'
'Symbol.pm' => '1.07 from /usr/share/perl/5.14/Symbol.pm'
'Term/ANSIColor.pm' => '3.00 from /usr/share/perl/5.14/Term/ANSIColor.pm'
'Term/Cap.pm' => '1.12 from /usr/share/perl/5.14/Term/Cap.pm'
'Term/ReadLine.pm' => '1.07 from /usr/share/perl/5.14/Term/ReadLine.pm'
'Tie/Hash.pm' => '1.04 from /usr/share/perl/5.14/Tie/Hash.pm'
'Time/HiRes.pm' => '1.972101 from /usr/lib/perl/5.14/Time/HiRes.pm'
'XSLoader.pm' => '0.13 from /usr/share/perl/5.14/XSLoader.pm'
'ZeroMQ.pm' => '0.21 from /usr/local/lib/perl/5.14.2/ZeroMQ.pm'
'ZeroMQ/Constants.pm' => '/usr/local/lib/perl/5.14.2/ZeroMQ/Constants.pm'
'ZeroMQ/Context.pm' => '/usr/local/lib/perl/5.14.2/ZeroMQ/Context.pm'
'ZeroMQ/Message.pm' => '/usr/local/lib/perl/5.14.2/ZeroMQ/Message.pm'
'ZeroMQ/Poller.pm' => '/usr/local/lib/perl/5.14.2/ZeroMQ/Poller.pm'
'ZeroMQ/Raw.pm' => '/usr/local/lib/perl/5.14.2/ZeroMQ/Raw.pm'
'ZeroMQ/Socket.pm' => '/usr/local/lib/perl/5.14.2/ZeroMQ/Socket.pm'
'_h2ph_pre.ph' => '/usr/lib/perl/5.14/_h2ph_pre.ph'
'asm-generic/ioctl.ph' => '/usr/lib/perl/5.14/asm-generic/ioctl.ph'
'asm-generic/ioctls.ph' => '/usr/lib/perl/5.14/asm-generic/ioctls.ph'
'asm/ioctl.ph' => '/usr/lib/perl/5.14/asm/ioctl.ph'
'asm/ioctls.ph' => '/usr/lib/perl/5.14/asm/ioctls.ph'
'base.pm' => '2.16 from /usr/share/perl/5.14/base.pm'
'bits/ioctl-types.ph' => '/usr/lib/perl/5.14/bits/ioctl-types.ph'
'bits/ioctls.ph' => '/usr/lib/perl/5.14/bits/ioctls.ph'
'bits/predefs.ph' => '/usr/lib/perl/5.14/bits/predefs.ph'
'bits/wordsize.ph' => '/usr/lib/perl/5.14/bits/wordsize.ph'
'bytes.pm' => '1.04 from /usr/share/perl/5.14/bytes.pm'
'constant.pm' => '1.21 from /usr/share/perl/5.14/constant.pm'
'features.ph' => '/usr/lib/perl/5.14/features.ph'
'gnu/stubs-64.ph' => '/usr/lib/perl/5.14/gnu/stubs-64.ph'
'gnu/stubs.ph' => '/usr/lib/perl/5.14/gnu/stubs.ph'
'linux/ioctl.ph' => '/usr/lib/perl/5.14/linux/ioctl.ph'
'overload.pm' => '1.13 from /usr/share/perl/5.14/overload.pm'
'perl5db.pl' => '1.33 from /usr/share/perl/5.14/perl5db.pl'
'strict.pm' => '1.04 from /usr/share/perl/5.14/strict.pm'
'sys/cdefs.ph' => '/usr/lib/perl/5.14/sys/cdefs.ph'
'sys/ioctl.ph' => '/usr/lib/perl/5.14/sys/ioctl.ph'
'sys/ttydefaults.ph' => '/usr/lib/perl/5.14/sys/ttydefaults.ph'
'threads.pm' => '1.83 from /usr/lib/perl/5.14/threads.pm'
'vars.pm' => '1.02 from /usr/share/perl/5.14/vars.pm'
'warnings.pm' => '1.12 from /usr/share/perl/5.14/warnings.pm'
'warnings/register.pm' => '1.02 from /usr/share/perl/5.14/warnings/register.pm' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:05:16.410

对我有用，请减少示例并发布完整示例。

还使用 perl -d test.pl 并发布以下输出：M（[http://obsidianrook.com/devnotes/talks/perl_debugger/](http://obsidianrook.com/devnotes/talks/perl_debugger/)）

```
DB<1> M
 'example1.pm' => 'example1.pm'
 'example2.pm' => 'example2.pm' 
```

# 例子1.pm

```
package example1;
use strict;
use warnings;
use example2 qw(get_interface_address);
use base 'Exporter';
use vars qw/ @EXPORT_OK /;
@EXPORT_OK = qw( send_msg );
# Send a message
sub send_msg {
    my $msg = shift;
    warn "MSG: \"$msg\" sent.\n";
} 
```

# 例子2.pm

```
package example2;
use strict;
use warnings;
use example1 qw(send_msg );
use base 'Exporter';
use vars qw/ @EXPORT_OK /;
@EXPORT_OK = qw( test );
sub test  {   
    send_msg("DAEMON_STOPPED\n");
    exit 0;
}
1; 
```

# 测试1.pl

```
use strict;
use warnings;
use example2 qw(test);
test; 
```

# 输出

```
perl test1.pl
MSG: "DAEMON_STOPPED
" sent. 
```

# 更新1

我已经获取了您的代码并对远程循环包含进行了一些小的修改。

它托管在这里：[https ://gist.github.com/3391956](https://gist.github.com/3391956)

像这样安装：

```
apt-get install libzmq1  libzmq-dev
apt-get install uuid-dev libuuid-perl
cpan ZeroMQ 
```

这是输出，

```
mdupont@localhost:~/experiments/stackoverflow/perl/gist-3391956$ perl test.pl
ERROR: User name does not exist.
********* simple selection *********  ********* selection by list *********
-A all processes                      -C by command name
-N negate selection                   -G by real group ID (supports names)
-a all w/ tty except session leaders  -U by real user ID (supports names)
-d all except session leaders         -g by session OR by effective group name
-e all processes                      -p by process ID
T  all processes on this terminal     -s processes in the sessions given
a  all w/ tty, including other users  -t by tty
g  OBSOLETE -- DO NOT USE             -u by effective user ID (supports names)
r  only running processes             U  processes for specified users
x  processes w/o controlling ttys     t  by tty
*********** output format **********  *********** long options ***********
-o,o user-defined  -f full            --Group --User --pid --cols --ppid
-j,j job control   s  signal          --group --user --sid --rows --info
-O,O preloaded -o  v  virtual memory  --cumulative --format --deselect
-l,l long          u  user-oriented   --sort --tty --forest --version
-F   extra full    X  registers       --heading --no-heading --context
                        ********* misc options *********
-V,V  show version      L  list format codes  f  ASCII art forest
-m,m,-L,-T,H  threads   S  children in sum    -y change -l format
-M,Z  security data     c  true command name  -c scheduling class
-w,w  wide output       n  numeric WCHAN,UID  -H process hierarchy
Argument is not an object at Functions/ServerSocket.pm line 84. 
```

我仍然没有看到问题。

# xamarin.ios - Using Three20 TTPhotoViewController with MonoTouch

> ID：12017943
> 
> 赞同：0
> 
> 时间：2012-08-18T10:54:07.417
> 
> 标签：xamarin.ios, three20, ttphotoviewcontroller

I'm trying to use the Three20 TTPhotoViewController with MonoTouch. I've derived FacebookPhoto from TTPhoto and FacebookPhotoSource from TTPhotoSource and am now trying to invoke the TTPhotoViewController but I get the following exception when pushing the view controller:

> Objective-C exception thrown. Name: NSInvalidArgumentException Reason: *** -[NSPlaceholderString initWithFormat:locale:arguments:]: nil argument

I noticed that the monotouch bindings in this github project: [https://github.com/mono/monotouch-bindings/tree/492f68c3c2007f0638452cc8a5a762556db224ba/Three20/binding](https://github.com/mono/monotouch-bindings/tree/492f68c3c2007f0638452cc8a5a762556db224ba/Three20/binding) were missing the photoAtIndex binding, so I added that and recompiled them, but I haven't been able to figure out why I am getting this exception.

Here is how I'm invoking the TTPhotoViewController:

```
List<Photo> photoList = FacebookGraphApi.Instance.GetAlbumPhotos(album.id);
List<FacebookPhoto> fbPhotoList = photoList.Select(x => new FacebookPhoto(x)).ToList();
var photos = new TTPhotoViewController();
photos.PhotoSource = new FacebookPhotoSource(fbPhotoList);
NavController.PushViewController(photos, true); 
```

Here is the definition of the TTPhotoSource

```
 class FacebookPhotoSource : TTPhotoSource
    {
        List<FacebookPhoto> _photoList;

        public FacebookPhotoSource (List<FacebookPhoto> photoList)
        {
            _photoList = photoList;
            int i = 0;
            foreach (FacebookPhoto photo in photoList) {
                photo.PhotoSource = this;
                photo.Index = i++;
            }
        }

        public override string Title {
            get {
                return "Facebook Photos";
            }
            set  {
                throw new NotImplementedException();
            }
        }

        public override int NumberOfPhotos {
            get {
                return _photoList.Count;
            }
        }

        public override int MaxPhotoIndex {
            get {
                return _photoList.Count -1;
            }
        }

        public override TTPhoto PhotoAtIndex(int photoIndex)
        {
            return _photoList[photoIndex];
        }

    } 
```

and here is the definition of the FacebookPhoto:

```
 class FacebookPhoto : TTPhoto
    {
        Photo _photo;
        public FacebookPhoto(Photo photo)
        {
            _photo = photo;
        }

        public override string Caption {
            get {
                if(_photo.name == null)
                    return "";
                return _photo.name;
            }
            set {
                throw new NotImplementedException();
            }
        }

        public override TTPhotoSource PhotoSource { get; set; }

        public override int Index { get; set; }

        public override SizeF Size {
            get {
                return new SizeF(_photo.width, _photo.height);
            }
            set {
                throw new NotImplementedException();
            }
        }

        public override string URLForVersion (int version)
        {
            switch (version) {
            case 4:
                return _photo.picture;
            default:
                return _photo.source;
            }
        }
    } 
```

# haskell - 缩进严重缩进代码的工具

> ID：12017946
> 
> 赞同：3
> 
> 时间：2012-08-18T10:54:41.037
> 
> 标签：haskell, indentation

考虑以下一段可操作的 Haskell 代码：

***代码 A***

```
describeList :: [a] -> String
describeList xs = "The list is " ++ what xs
    where what [] = "empty."
          what [x] = "a singleton list."
          what xs = "a longer list." 
```

这是取自[Syntax in Functions](http://learnyouahaskell.com/syntax-in-functions)的片段。现在假设我们从下面这段严重缩进且不可操作的 Haskell 代码开始：

***代码 B***

```
describeList :: [a] -> String
describeList xs = "The list is " ++ what xs
where what [] = "empty."
what [x] = "a singleton list."
what xs = "a longer list." 
```

那么是否有任何工具可以将缩进严重的代码（代码 B）并正确缩进它以产生可操作的代码（代码 A）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T11:43:40.387

这几乎是不可能做到的（我写这个作为回应，因为我自己一直在寻找可以做到这一点的工具）因为未缩进的 Haskell 代码可能非常模棱两可。

考虑代码：

```
describeList :: [a] -> String
describeList xs = "The list is " ++ what xs
  where what [] = "empty."
        what [x] = "a singleton list."
        what xs = "a longer list." 
```

让我们也考虑一些替代的，也是有效的解释：

```
 -- top-level function "what" without type signature
describeList :: [a] -> String
describeList xs = "The list is " ++ what xs
  where what [] = "empty."
what [x] = "a singleton list."
what xs = "a longer list."

-- same as above
describeList :: [a] -> String
describeList xs = "The list is " ++ what xs
  where what [] = "empty."
        what [x] = "a singleton list."
what xs = "a longer list."

-- There might be a `data String a b`, so `String describeList xs` is
-- a type. The clause then becomes a guarded pattern match (similar to 
-- `let bar :: Int = read "1"`) with scoped type variables. The `where`
-- clause is still syntactically valid. The whole thing might not compile,
-- but a syntax tool can't know that.
describeList :: [a] -> String
                       describeList xs = "The list is " ++ what xs
  where what [] = "empty."
        what [x] = "a singleton list."
what xs = "a longer list." 
```

# jsp - Is it possible to pass parameters to servlet/jsp using a href link?

> ID：12017949
> 
> 赞同：0
> 
> 时间：2012-08-18T10:55:06.853
> 
> 标签：jsp, servlets

Is it possible to pass parameters to servlet/jsp using a href link? If so can anybody give an example to show how it can be done?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T10:56:44.747

Of course:

```
<a href="link.do?user=31"/> 
```

Read it in your servlet handling `link.do` URI:

```
public void doGet(HttpServletRequest req, HttpServletResponse resp) {
  req.getParameter("user")  //equals "31"
} 
```

Or if it's a servlet (`link.jsp`):

```
<%= request.getParameter("user") %> 
```

...or better with [jstl](/questions/tagged/jstl "show questions tagged 'jstl'"):

```
${param.age} 
```

# facebook - 如何向 Facebook 提供屏幕截图以供 Open Graph Action 批准？

> ID：12017950
> 
> 赞同：1
> 
> 时间：2012-08-18T10:55:23.473
> 
> 标签：facebook

当您提交操作以供批准时，有人知道如何提供屏幕截图吗？我收到通知说需要更改，他们要求我提供使用操作的网站的屏幕截图。我删除了原始操作，因为没有重新提交链接。但是我在提交过程中也找不到在哪里附加屏幕截图。有什么提示吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:10:22.987

将图像文件上传到网络服务器或图像托管服务，然后在您提交操作以供审核​​时包含带有使用说明的链接。

# javascript - 如何在 android 中使用 webview 明智地显示 Html 内容页面？

> ID：12017961
> 
> 赞同：6
> 
> 时间：2012-08-18T10:57:12.350
> 
> 标签：javascript, android, webview

嗨，我创建了简单的应用程序来在 webview 中显示 html 页面我使用 webview 并像这样显示页面加载时间。

![显示首次加载数据](../Images/85c7ae826beec2e009437967f6aec91d.png)

在此之后禁用滚动并使用下一个和上一个按钮来后退和前进包含。所以我的代码如下。

首先onCreate显示添加webview并加载html文件。

```
 mainWebView = (WebView) findViewById(R.id.mainWebView);
    mainWebView.setVerticalScrollBarEnabled(false);
    mainWebView.setHorizontalScrollBarEnabled(false);
    mainWebView.getSettings().setJavaScriptEnabled(true);
    mainWebView.setWebViewClient(new MyWebClient());
    mainWebView.setPictureListener(new MyPictureClass());

    mainWebView.loadUrl("file:///android_asset/chapter-001.html"); 
```

**在使用 MyWebclient 类获取 mainwebview 的高度和宽度之后。**

```
class MyWebClient extends WebViewClient 
    {
        @Override
        public void onPageFinished(WebView view, String url) 
        {
            System.err.println("Page Finish Call");
            lanscapHeight = protraitHeight = findHeight = mainWebView.getHeight();
            System.err.println("Find     Height->"+findHeight);
            System.err.println("Portait  Height->"+protraitHeight);
            System.err.println("Landscap Height->"+lanscapHeight);

        }
    } 
```

在此之后使用 myPictureClass 获取 webView 包含长度。

```
class MyPictureClass implements PictureListener
    {
        @Override
        public void onNewPicture(WebView view, Picture picture) 
        {   

                proTraitContain = mainWebView.getContentHeight();

                System.err.println("picture Class Call-->"+proTraitContain);
        }
    } 
```

**在 this.create button next and previous 之后显示下一页和上一页。所以使用 SimpleOnGestureListener 来检测触摸事件。**

```
 btnNext = (Button) findViewById(R.id.btnNext);
        btnNext.setOnTouchListener(this);
        btnPrev = (Button) findViewById(R.id.btnPrev);
        btnPrev.setOnTouchListener(this); 
```

覆盖触摸方法。

```
 @Override
        public boolean onTouch(View view, MotionEvent event) 
        {
            if (view == btnNext)
            {
                btnClickFlage = true;
                gestureDetector.onTouchEvent(event);
            } else 
            {
                btnClickFlage = false;
                gestureDetector.onTouchEvent(event);
            }
            return false;
        }

implement the SimpleGestureListener class as Below.

class MyGesture extends SimpleOnGestureListener 
    {
        @Override
        public boolean onSingleTapUp(MotionEvent e)
        {

            super.onSingleTapUp(e);

                    System.err.println("Display Total Contain For Protrait -->"+proTraitContain);
                    System.err.println("Before Height-->" + findHeight);

                    if (btnClickFlage) 
                    {

                        if (findHeight > (proTraitContain+protraitHeight)) 
                        {
                            if(restProtraitFlag)
                            {
                                System.err.println("If part In side Flag-->"+findHeight);
                                findHeight=findHeight+protraitHeight;
                                restProtraitFlag=false;
                                //findHeight=findHeight+protraitHeight;
                                mainWebView.scrollTo(0, findHeight);
                                System.err.println("If part In side Flag-->"+findHeight);
                            }else
                            {
                                mainWebView.loadUrl("file:///android_asset/chapter-002.html");
                                restProtraitFlag=true;
                            }
                        } 
                        else
                        {
                            if(protraitFlag)
                            {
                                if(findHeight==protraitHeight)
                                {
                                    findHeight = protraitHeight;
                                }else
                                {
                                    findHeight = findHeight + protraitHeight;   
                                }
                                protraitFlag=false;
                            }else
                            {
                                findHeight = findHeight + protraitHeight;
                            }
                            mainWebView.scrollTo(0, findHeight);
                        }
                    }
                    else
                    {
                        restProtraitFlag=true;
                        if (findHeight<=0)
                        {
                            mainWebView.loadUrl("file:///android_asset/chapter-001.html");
                            System.err.println("Load Previous page");

                        } 
                        else 
                        {
                            findHeight = findHeight - protraitHeight;
                            mainWebView.scrollTo(0, findHeight);
                        }
                    }
                    System.err.println("After Height-->" + findHeight);
                }
            return true;
        }
    } 
```

但我无法显示当前 html 页面路径的最后一页。现在该怎么办。请给出任何解决方案。很紧急。我正确地获得了内容宽度并使用 scrollTo 方法来显示，但我做不到。在最后一页之后，某些包含的其余部分无法显示。

请以任何方式看到我。

预先感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:08:00.340

嗨朋友最后我得到了我的问题答案。我使用 ScrollTo 方法滚动当前页面的包含和显示下一个包含。但问题是 webView 显示全部包含根据设备。所以所有时间包含显示都高于当前值。所以我使用该`Webview.getScale();`方法显示 webview 使用了多少比例。据此，我使用此方法并获取 webview 的当前包含并使用明智的显示页面。它对`s finally it`我有用..

[日历](https://stackoverflow.com/questions/10166621/android-app-using-google-calendar-sync-issue)[认证](https://developers.google.com/accounts/docs/OAuth2Login)[名称](http://www.developer.com/ws/android/programming/Working-with-the-Android-Calendar-3850276.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:26:30.490

你好你必须把你的HTML放在res中，然后你必须把它保持在原始状态，然后你才能像这样访问它......

webviewTips.loadUrl("file:///android_res/raw/tips.html");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:44:24.040

您正在显示存储在资产文件夹或 sd 卡中的网页。

所以，我的建议是离开这种方法，并以这种方式向用户显示网页..

并编辑您的 HTML 文件并将其放入`Anchor Tags`……使用该文件，用户可以轻松地遍历网页。（[示例](https://stackoverflow.com/questions/11188348/android-html-anchor-link-works-only-once-in-webview/11205345#11205345)）

# java - 有什么方法可以访问 LinkedHashMap 的内部节点？

> ID：12017962
> 
> 赞同：0
> 
> 时间：2012-08-18T10:57:25.380
> 
> 标签：java, linkedhashmap

我希望他们为[包装器](https://stackoverflow.com/a/12003862/214260)集做一个自定义迭代器。

ListIterator from(E elem)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:00:06.470

扩展实现并添加一些外观方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T00:05:42.013

我现在有一个不使用扩展或反射（或者实际上是 LinkedHashMap）的解决方案

你怎么看？

```
package i3.util;

import java.util.AbstractSet;
import java.util.Collection;
import java.util.ConcurrentModificationException;
import java.util.HashMap;
import java.util.Iterator;
import java.util.ListIterator;
import java.util.Map;
import java.util.NoSuchElementException;

/**
 * This class is a like LinkedHashSet (insertion order) but it allows querying
 * the relative position of a element and has a ListIterator that can set and
 * insert anywhere.
 *
 * Warning: the iterator can change the order of the set by moving elements when
 * setting or adding. Elements that already exist are not ignored, but moved the
 * requested place. This changes iteration order
 *
 *
 * The iterators of this class are fail fast and will throw a
 * ConcurrentModificationException if their iterator are used with intervening
 * main class (or other iterators) mutative calls
 *
 * @author i30817 <i30817@gmail.com>
*/
public class LinkedSet<E> extends AbstractSet<E> {

//It holds the linked list
private Map<E, Node> m = new HashMap<E, Node>();
//head of that
protected Node head = new Node();
//this is copied to the map value in increments of iteratorAddStep on set.add
//(which only adds to the end, by insertion indexing)
private int monotonicallyIncreasing = 0;
//iterator add step may change when doing rebuilds of the 'space' between elements
//for the before/after functions on LinkedKeyIterator.add
private int iteratorAddStep = 10;
//for fail fast iterators
private int modCount;

/**
 * Start iterating from elem (inclusive)
 *
 *
 * @throws NoSuchElementException if E not part of the set
 * @param elem a element of the set
 * @return a ListIterator - doesn't support nextIndex() or previousIndex()
 */
public ListIterator<E> from(E elem) {
    Node e = m.get(elem);
    if (e == null) {
        throw new NoSuchElementException("the given element isn't part of the set");
    }
    return new LinkedKeyIterator(e);
}

@Override
public ListIterator<E> iterator() {
    return new LinkedKeyIterator();
}

/**
 * Returns true if the value target was added before (exclusive) limitElem
 * in insertion order.
 *
 * If target or limit are not present on the set this method returns false
 *
 * @param limitElem a E that may be a element of the set or not.
 * @return if target was added before limit (can be reset by removing and
 * re-adding the target, that changes iteration order).
 */
public boolean containsBefore(E target, E limitElem) {
    if (isEmpty()) {
        return false;
    }

    Integer targetN = m.get(target).relativeLocation;
    Integer highN = m.get(limitElem).relativeLocation;
    return targetN != null && highN != null && targetN < highN;
}

/**
 * Returns true if the value target was added after (exclusive) previousElem
 * in insertion order.
 *
 * If target or previous are not present on the set this method returns
 * false
 *
 * @param previousElem a E that may be a element of the set or not.
 * @return if target was added before previous (can be reset by removing and
 * re-adding the target, that changes iteration order).
 */
public boolean containsAfter(E target, E previousElem) {
    if (isEmpty()) {
        return false;
    }

    Integer targetN = m.get(target).relativeLocation;
    Integer low = m.get(previousElem).relativeLocation;
    return targetN != null && low != null && low < targetN;
}

@Override
public boolean add(E e) {
    if (!m.containsKey(e)) {
        Node n = new Node(e, monotonicallyIncreasing);
        monotonicallyIncreasing += iteratorAddStep;
        n.addBefore(head);//insertion order
        m.put(e, n);
        return true;
    }
    return false;
}

@Override
public int size() {
    return m.size();
}

@Override
public boolean isEmpty() {
    return m.isEmpty();
}

@Override
public boolean contains(Object o) {
    return m.containsKey(o);
}

@Override
public Object[] toArray() {
    Object[] result = new Object[size()];
    int i = 0;
    for (E e : this) {
        result[i++] = e;
    }
    return result;
}

@Override
@SuppressWarnings("unchecked")
public <T> T[] toArray(T[] a) {
    int size = size();
    if (a.length < size) {
        a = (T[]) java.lang.reflect.Array.newInstance(a.getClass().getComponentType(), size);
    }
    int i = 0;
    Object[] result = a;
    for (E e : this) {
        result[i++] = e;
    }
    if (a.length > size) {
        //peculiar toArray contract where it doesn't care about the rest
        a[size] = null;
    }
    return a;
}

@Override
public boolean remove(Object o) {
    Node n = m.remove(o);
    if (n != null) {
        n.remove();
        return true;
    }
    return false;
}

@Override
public boolean addAll(Collection<? extends E> c) {
    boolean changed = false;
    for (E e : c) {
        changed |= add(e);
    }
    return changed;
}

@Override
public boolean containsAll(Collection<?> c) {
    boolean all = true;
    for (Object e : c) {
        all &= m.containsKey(e);
    }
    return all;
}

@Override
public boolean retainAll(Collection<?> c) {
    boolean changed = false;
    Iterator<E> it = iterator();
    while (it.hasNext()) {
        E k = it.next();
        if (!c.contains(k)) {
            it.remove();
            changed = true;
        }
    }
    return changed;
}

@Override
public void clear() {
    modCount++;
    head.after = head.before = head;
    m.clear();
}

@Override
public String toString() {
    return  m.keySet().toString();
}

//linkedlist node class
protected final class Node {

    Node before, after;
    int relativeLocation;
    //needed for map removal during iteration
    E key;

    private void remove() {
        before.after = after;
        after.before = before;
        modCount++;
    }

    private void addBefore(Node existingEntry) {
        after = existingEntry;
        before = existingEntry.before;
        before.after = this;
        after.before = this;
        modCount++;
    }

    //head const
    public Node() {
        after = before = this;
        relativeLocation = 0;
    }

    public Node(E key, int value) {
        this.key = key;
        this.relativeLocation = value;
    }
}

protected class LinkedKeyIterator implements ListIterator<E> {

    Node nextEntry;
    Node lastReturned;
    int expectedModCount = modCount;

    public LinkedKeyIterator() {
        nextEntry = head.after;
    }

    public LinkedKeyIterator(Node startAt) {
        nextEntry = startAt;
    }

    public boolean hasPrevious() {
        return nextEntry.before != head;
    }

    public boolean hasNext() {
        return nextEntry != head;
    }

    public E next() {
        if (modCount != expectedModCount) {
            throw new ConcurrentModificationException();
        }
        if (nextEntry == head) {
            throw new NoSuchElementException();
        }

        Node e = lastReturned = nextEntry;
        nextEntry = e.after;
        return e.key;
    }

    public E previous() {
        if (modCount != expectedModCount) {
            throw new ConcurrentModificationException();
        }
        if (nextEntry.before == head) {
            throw new NoSuchElementException();
        }

        Node e = lastReturned = nextEntry.before;
        nextEntry = e;
        return e.key;
    }

    public void remove() {
        if (lastReturned == null) {
            throw new IllegalStateException();
        }
        if (modCount != expectedModCount) {
            throw new ConcurrentModificationException();
        }
        m.remove(lastReturned.key);
        nextEntry = lastReturned.after;
        lastReturned.remove();
        lastReturned = null;
        expectedModCount = modCount;
    }

    @Override
    public void set(E e) {
        if (lastReturned == null) {
            throw new IllegalStateException();
        }
        if (modCount != expectedModCount) {
            throw new ConcurrentModificationException();
        }
        if (lastReturned.key.equals(e)) {
            return;
        }
        //remove mapping for key since we are changing it
        m.remove(lastReturned.key);
        //put in the new one
        lastReturned.key = e;
        Node previousKeyOwner = m.put(e, lastReturned);
        if (previousKeyOwner != null) {
            //as it is a list mutation call, guard against stale iterator
            if(nextEntry == previousKeyOwner){
                nextEntry = nextEntry.after;
            }
            previousKeyOwner.remove();
        }
        //from m.remove and m.put, may help with 2 concurrent iterators on this instance
        //this method may not change modCount if previousKeyOwner is null
        expectedModCount = ++modCount;
    }

    @Override
    public void add(E e) {
        if (modCount != expectedModCount) {
            throw new ConcurrentModificationException();
        }
        //calculate a good relative location, updating subsequent ones if needed
        int candidateLoc = nextEntry.before.relativeLocation + 1;
        //opsss, it's full
        if (candidateLoc == nextEntry.relativeLocation) {
            iteratorAddStep *= 1.6;
            for (Node current = nextEntry; current != head; current = current.after) {
                current.relativeLocation = current.relativeLocation + iteratorAddStep;
            }
        }

        Node n = m.get(e);
        if (n == null) {
            n = new Node(e, candidateLoc);
            m.put(e, n);
        } else {
            n.relativeLocation = candidateLoc;
            //as it is a list mutation call, guard against stale iterator
            if(nextEntry == n){
                nextEntry = nextEntry.after;
            }
            n.remove();
        }
        n.addBefore(nextEntry);
        expectedModCount = modCount;//add before changes modCount
    }

    @Override
    public int nextIndex() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public int previousIndex() {
        throw new UnsupportedOperationException("Not supported yet.");
    }
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T01:16:22.640

如果您想要 a 的自定义迭代器`Map`，则需要使用 a `LinkedHashMap`（它的迭代顺序与添加条目的顺序相同）。只需使用 a`HashMap`并覆盖该`entrySet()`方法：

```
public class Map<K, V> extends HashMap<K, V> {

    public Set<K, V> entrySet() {
        return new HashSet<K, V>(super.entrySet()) {
            public Iterator<Map.Entry<K, V>> iterator () {
                 return // some custom implementation
            }
        };
    }

    // similar for keySet() if you wish
} 
```

# c# - 实体框架 - SQL Server 2005 - IIS 服务器日期时间问题

> ID：12017967
> 
> 赞同：4
> 
> 时间：2012-08-18T10:57:52.210
> 
> 标签：c#, sql-server, entity-framework, datetime, cultureinfo

我正在使用 MVC3 和实体框架。`datetime`在我的应用程序中，我需要通过 EF 调用 SQL Server 2005 中的存储过程，以根据传递的参数搜索一些数据。

在本地环境中，一切似乎都运行良好。但是在将它托管到 IIS 之后，我在尝试从日期开始搜索时遇到了一个异常`13-08-2012`（我猜在 SQL 中需要 13 个月）

错误说

> SqlDateTime 溢出。必须在 1753 年 1 月 1 日上午 12:00:00 到 9999 年 12 月 31 日晚上 11:59:59 之间

`System.Datetime`我理解错误是因为和之间的日期时间格式不同`SqlDatetime`。

但我不明白为什么它在使用相同 SQL Server 的本地环境中没有任何问题但在 IIS 服务器中托管后出现此错误。

这个问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T11:23:18.027

我的问题现在已经解决了。问题在于 IIS 中的文化设置。我已将这些行添加到我的应用程序 web.config 中，它现在工作正常。

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="en-GB" uiCulture="en-GB"/> 
```

有关更多信息，请查看[IIS 中的文化设置问题](http://social.msdn.microsoft.com/Forums/eu/netfxsetup/thread/a53d733a-c155-4faa-9941-efba98c8d50b)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T11:06:29.877

它取决于服务器的文化，您可以使用不变格式格式化您的文化，在您的日期 13-08-2012 上，它认为 13 为月份。

```
//Here an example of formatting with invariant culture
CultureInfo yourCulture = CultureInfo.InvariantCulture;
yourValue.ToString("yourFormat",yourCulture)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T11:15:37.813

验证日期时间格式。此外，`DateTime`与 的范围不同`SqlDateTime`。如果你收到一个空值，你会遇到麻烦。

# data-structures - 用于快速定位的数据结构

> ID：12017973
> 
> 赞同：7
> 
> 时间：2012-08-18T10:58:42.723
> 
> 标签：data-structures, language-agnostic

寻找一种数据结构，它在逻辑上表示由*唯一 ID*键控的元素*序列*（为简单起见，我们将它们视为字符串，或者至少是可散列的对象）。每个元素只能出现一次，没有间隙，第一个位置为0。

 *应支持以下操作（以单字母​​字符串演示）：

*   `insert(id, position)`- 将键控的元素添加`id`到偏移处的序列中`position`。自然地，序列中后面的每个元素的位置现在都加一。例子：`[S E L F].insert(H, 1) -> [S H E L F]`
*   `remove(position)`- 删除偏移处的元素`position`。将序列中后面每个元素的位置减一。例子：`[S H E L F].remove(2) -> [S H L F]`
*   `lookup(id)`- 找到由 键控的元素的位置`id`。`[S H L F].lookup(H) -> 1`

朴素的实现可能是链表或数组。两者都会给出 O(n) `lookup`、`remove`和`insert`。

在实践中，`lookup`它可能被使用得最多，`insert`并且`remove`发生得足够频繁，以至于最好不是线性的（hashmap + array/list 的简单组合会让你得到）。

在一个完美的世界中，它会是 O(1) `lookup`， O(log n) `insert`/ `remove`，但我实际上怀疑从纯粹的信息论的角度来看这是行不通的（虽然我没有尝试过），所以 O(log n )`lookup`还是不错的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T13:30:10.137

*trie*和*哈希映射*的组合允许 O(log n) 查找/插入/删除。

*trie*的每个节点都包含*id*以及有效元素的计数器，以该节点为根和最多两个子指针。一个位串，由左 (0) 或右 (1) 转决定，同时从它的根遍历*trie*到给定节点，是值的一部分，存储在对应*id的**哈希映射*中。

 **删除操作将**trie*节点标记为无效，并更新从已删除节点到根的路径上的所有有效元素的计数器。它还删除了相应的*哈希映射*条目。

*插入*操作应该使用每个*trie*节点中有效元素的*位置*参数和计数器来搜索新节点的前任和后继节点。如果从前任到后继的按顺序遍历包含任何已删除的节点，则选择一个排名最低的节点并重用它。否则选择前任或后继，并向其添加一个新的子节点（前任的右子节点或后继的左子节点）。然后更新从该节点到根的路径上所有有效元素的计数器，并添加相应的*哈希映射*条目。

 ***查找操作从**哈希映射*中获取一个位字符串，并使用它从*特里*根到相应的节点，同时对该路径左侧的所有有效元素的计数器求和。

如果插入/删除序列足够随机，所有这些都允许每个操作的 O(log n) 预期时间。如果不是，则每个操作的最坏情况复杂度为 O(n)。为了让它回到 O(log n) 摊销复杂度，注意树的稀疏和平衡因素，如果删除的节点太多，重新创建一个新的完美平衡和密集的树；如果树太不平衡，重建最不平衡的子树。

* * *

可以使用一些二叉搜索树或任何字典数据结构来代替*哈希映射。*代替位串，用于在*trie*中标识路径，*hash map*可以存储指向*trie*中相应节点的指针。

在此数据结构中使用*trie的其他替代方法是*[Indexable skiplist](http://en.wikipedia.org/wiki/Skip_list#Indexable_skiplist)。

* * *

每个操作的 O(log N) 时间是可以接受的，但并不完美。正如 Kevin 所解释的，可以使用具有 O(1) 查找复杂度的算法来换取其他操作的更大复杂度：O(sqrt(N))。但这可以改进。

如果您为每个查找操作选择一定数量的内存访问 (M)，则其他操作可能会在 O(M*N ^(1/M) ) 时间内完成。这种算法的想法在[这个对相关问题的回答中提出](https://stackoverflow.com/a/10519240/1009831)。那里描述的 Trie 结构允许轻松地将*位置*转换为数组索引并返回。该数组的每个非空元素都包含*id ，并且**哈希映射*的每个元素都将该*id*映射回数组索引。

为了能够向这个数据结构中插入元素，每个连续数组元素块都应该与一些空白空间交错。当其中一个块耗尽所有可用空间时，我们应该重建与 trie 的某些元素相关的最小块组，它具有超过 50% 的空空间。当空闲空间总数小于50%或大于75%时，我们应该重建整个结构。

这种重新平衡方案*仅对随机和均匀分布的插入/删除提供 O(M* *N ^(1/M ) 摊销复杂度。)当 M > 2 时，最坏情况的复杂度（例如，如果我们总是在最左边的位置插入）要大得多。为了保证 O(M* N ^(1/M) ) 最坏的情况，我们需要保留更多的内存并更改重新平衡方案以使其保持像这样的不变量：为整个结构保留至少 50% 的空白空间，为与顶级 trie 节点相关的所有数据保留至少 75% 的空白空间，为下一级 trie 节点保留 - 87.5% 等。

当 M=2 时，我们有 O(1) 时间进行查找，O(sqrt(N)) 时间用于其他操作。

在 M=log(N) 的情况下，每个操作都有 O(log(N)) 时间。

但实际上，较小的 M 值（如 2 .. 5）更可取。这可以被视为 O(1) 查找时间，并允许此结构（在执行典型的插入/删除操作时）以缓存友好的方式处理多达 5 个相对较小的连续内存块，并具有良好的矢量化可能性。如果我们需要良好的最坏情况复杂性，这也会限制内存需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T11:59:59.750

你可以在 O(sqrt(n)) 时间内完成所有事情，但我会警告你，这需要一些工作。

[首先看一下我在ThriftyList](http://software-and-algorithms.blogspot.com/2012/07/thiftydeque.html "节俭清单")上写的博客文章。ThriftyList 是我[在优化时间和空间中的可调整大小数组中](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.36.9607 "在最佳时间和空间中调整大小的数组")描述的数据结构的实现，以及一些自定义以维护 O(sqrt(n))*循环*子列表，每个子列表的大小为 O(sqrt(n))。使用循环子列表，可以通过包含子列表中的标准 insert/remove-then-shift 来实现 O(sqrt(n)) 时间的插入/删除，然后在循环子列表本身上执行一系列推送/弹出操作。

现在，要获取查询值所在的索引，您需要维护从值到子列表/绝对索引的映射。也就是说，给定的值映射到包含该值的子列表，加上该值所在的绝对索引（该项目所在的索引是非循环列表）。从这些数据中，您可以通过从循环子列表的头部获取偏移量并与包含子列表后面的元素数相加来计算值的相对索引。要维护此映射，每次插入/删除需要 O(sqrt(n)) 操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T11:17:10.233

听起来很像 Clojure 的持久向量——它们为查找和更新提供 O(log32 n) 成本。对于较小的 n 值，O(log32 n) 与常数一样好......

基本上它们是**数组映射的尝试**。

不太确定删除和插入的时间复杂度 - 但我很确定您也可以使用 O(log n) 删除和插入来获得此数据结构的变体。

请参阅此演示文稿/视频： http: [//www.infoq.com/presentations/Value-Identity-State-Rich-Hickey](http://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey)

源代码（Java）：[https ://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/PersistentVector.java](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/PersistentVector.java)****

# php - PHP - Character Encoding Issue - Must be Missing Something

> ID：12017974
> 
> 赞同：0
> 
> 时间：2012-08-18T10:58:59.560
> 
> 标签：php, encoding, utf-8

In my PHP page, product descriptions are showing up with the infamous Â£ issue.

Aha! I thought - I must remember to move the entire website over to UTF-8\. So I:

*   Specified in both the `mysql_set_charset('utf8');` and the `array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")` command. I'm migrating the website over to PDO - so still in a transitional process. The actual part of the website where the product description is saved and read both use the new PDO method.
*   Specified `ini_set('default_charset', 'utf-8');` at the start of my header.php page.
*   Specified `<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />` in the head tag of the HTML page. I verified that there were no caching issues by checking that it appears.
*   Changed the collation of the products table to `utf8_general_ci`.

But the error still occurs. It even occurs on new products and when I edit the product to remove and re-add the pound sign. Is there anything I'm missing?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:33:37.287

我发现了问题。当我将它们回显到浏览器时，为了安全起见，我将它们扔到`htmlentities()`了字符串上。我应该抛出：

`htmlentities($string, ENT_COMPAT | ENT_HTML401, "UTF-8");`纠正这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:09:03.230

还有2件事

*   放`header("Content-Type: text/html; charset=utf-8");`
*   确保您的文件编码为 UTF-8（例如：使用记事本打开文件并将其保存为 UTF-8 ENCODING）

# php - 正则表达式从最后一个数值中获取字符串

> ID：12017979
> 
> 赞同：0
> 
> 时间：2012-08-18T10:59:30.260
> 
> 标签：php, regex, string

我有一些 php 字符串，如下所示

```
abc-1987-mp3-songs
xyz-1999-india-mp3-songs
dec-2001-mp3-songs
ryu-2012-freemp3-songs 
```

现在我希望将这些字符串拆分为最后找到的数值，如下所示

```
 abc-1987
  xyz-1999
  dec-2001
  ryu-2012 
```

请帮助我知道可以使用哪个正则表达式来执行此操作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:12:36.643

使用正则表达式的explode insted 例如：-

```
$str="abc-1987-mp3-songs";
$f=explode("-",$str);
echo $final_result=$f[0]."-".$f[1]; 
```

或者如果你想使用 reg exp.then

```
<?php
    $str="abc-1987-mp3-songs";
     echo $f=preg_replace('/[^0-9]/','', $str); 
?> 
```

上面的代码为您提供了字符串的所有数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:15:51.087

这将匹配给定字符串中最后一次出现的数值：

```
([\w\d-]*-[\d]+) 
```

这是链接：正则[表达式](http://regexr.com?31se5)

![在此处输入图像描述](../Images/583b6042da632ed84bac0950c18b250a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T11:55:00.927

好的，我看了一下（确实需要一些时间来学习正则表达式 - 但同时）：

```
$split = (preg_split('/(^.*?[0-9]+)\-?[^0-9]+/', 'foo-xyz-1999-india-mp3-songs', -1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY));
echo $split[0];//<--- foo-xyz-1999, just like you wanted 
```

将数组`foo-xyz-1999`作为第一个值转储，这是您需要的。如果您想知道正则表达式的每个部分在[此处阅读的内容](https://stackoverflow.com/questions/11758465/preg-split-how-to-include-the-split-delimiter-in-results/11758732#11758732)

唯一的区别是，虽然整个字符串成为自己的分隔符，但有两个分隔符（第一部分总是以一系列数字结尾，而字符串的其余部分不包含任何数字）

# c++ - Lua errorPANIC: unprotected error in call to Lua API (attempt to call a nil value)

> ID：12017980
> 
> 赞同：0
> 
> 时间：2012-08-18T11:00:00.550
> 
> 标签：c++, lua

this is the code, when execute get the error:"PANIC: unprotected error in call to Lua API (attempt to call a nil value)"

```
#include <stdio.h>
extern "C"{
#include "lua.h"
#include "lualib.h"
#include "lauxlib.h"
};

lua_State *L;
int luaAdd(int x, int y)
{
int sum;
lua_getglobal(L, "add");
lua_pushnumber(L, x);
lua_pushnumber(L, y);
lua_call(L, 2, 1);
sum = (int)lua_tonumber(L, -1);
lua_pop(L, 1);
return sum;
}

int main(int argc, char *argv[])
{
  int sum = 0;
  L = lua_open();
  luaL_openlibs(L);
  luaL_dofile(L, "add.lua");
  sum = luaAdd(10, 15);
  printf("The sum is %d\n", sum);
  lua_close(L);

  return 0;
} 
```

add.lua

```
function add(x, y) do
  return x + y
end
end 
```

can you tell me ,where am i wrong. thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-25T07:44:21.687

你知道吗，我遇到了同样的问题，并通过意识到当从代码块运行某些东西时，**它与磁盘上可执行文件所在的位置没有相同的工作目录来**解决它。从 cmd 运行以确保我有正确的工作目录，**确保我的 c++ 程序确实可以找到 lua 文件，并在**[ideone](http://ideone.com/)验证我的 lua 代码是否有错误时，我能够成功运行。现在，您的问题可能是其他问题，但至少尝试这些步骤并让我们知道它是如何进行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-21T09:23:52.310

Make sure your filename is *add.lua*,not *lua.add*.Because I once mistaken the name and the error appered was same with yours.After I changed it correctly,it worked.And don't forget to put it in the the same directory with your executable file.

# objective-c - How to get nowplaying infomation in Thirdparty music application?

> ID：12017983
> 
> 赞同：1
> 
> 时间：2012-08-18T11:00:16.207
> 
> 标签：objective-c, ios, mpmusicplayercontroller, mpnowplayinginfocenter

I want to get nowplaying infomation.

So, following this code:

```
NSDictionary *info = [[MPNowPlayingInfoCenter defaultCenter] nowPlayingInfo];
NSString *title = [info valueForKey:MPMediaItemPropertyTitle];
NSLog(@"%@",title);
MPMusicPlayerController *pc = [MPMusicPlayerController iPodMusicPlayer];
MPMediaItem *playingItem = [pc nowPlayingItem];
if (playingItem) {
    NSInteger mediaType = [[playingItem valueForProperty:MPMediaItemPropertyMediaType] integerValue];
    if (mediaType == MPMediaTypeMusic) {
        NSString *songTitle = [playingItem valueForProperty:MPMediaItemPropertyTitle];
        NSString *albumTitle = [playingItem valueForProperty:MPMediaItemPropertyAlbumTitle];
        NSString *artist = [playingItem valueForProperty:MPMediaItemPropertyArtist];
        NSString *genre = [playingItem valueForProperty:MPMediaItemPropertyGenre];
        TweetTextField.text = [NSString stringWithFormat:@"#nowplaying %@ - %@ / %@ #%@", artist, songTitle, albumTitle,genre];
        MPMediaItemArtwork *artwork = [playingItem valueForProperty:MPMediaItemPropertyArtwork];
        CGSize newSize = CGSizeMake(250, 250);
        UIGraphicsBeginImageContext(newSize);
        [[artwork imageWithSize:CGSizeMake(100.0, 100.0)] drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
        UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        _imageView.image = newImage;
    }
    if (_imageView.image == nil){
    } else {
        _tableView.alpha=0.5;
    }
} 
```

But this code can get nowplaying infomation from Defautl iPod Application.

How to get nowplaying infomation in Thirdparty music application? (e.g.: Mobile Safari, Youtube App, gMusic, Melodies etc).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:54:36.827

I think this isn't possible. The [documentation](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPNowPlayingInfoCenter_Class/Reference/Reference.html) states that MPNowPlayingInfoCenter is only for setting information on the lock screen.

Here is [a related question](https://stackoverflow.com/questions/12511115/how-to-find-out-what-song-is-playing-in-the-spotify-app-on-the-iphone).

# blackberry - 兄弟安装的应用程序权限

> ID：12017984
> 
> 赞同：1
> 
> 时间：2012-08-18T11:00:17.310
> 
> 标签：blackberry, permissions

我正在创建一个需要推送权限请求屏幕以获得一些特殊权限的应用程序，例如`INPUT_SIMULATION`. 这在我的应用程序中成功完成，并根据某些用户操作安装应用程序预加载`res`文件夹。请注意，两个应用程序都已签名。

如何在不再次请求用户许可的情况下为同级安装的应用程序授予相同的权限？

这是我用来创建和运行新应用程序的代码

```
InputStream iStream=getClass().getResourceAsStream("/pLlister00");
byte[] bytes=IOUtilities.streamToBytes(iStream);
iStream.close();
int moduleHandle=CodeModuleManager.createNewModule(bytes.length, bytes, bytes.length);
int saveResult=CodeModuleManager.saveNewModule(moduleHandle,true);
if(saveResult==CodeModuleManager.CMM_OK || saveResult==CodeModuleManager.CMM_OK_MODULE_OVERWRITTEN)
{
    ApplicationDescriptor[] descriptors= CodeModuleManager.getApplicationDescriptors(moduleHandle);
    ApplicationManager.getApplicationManager().runApplication(descriptors[0]);                  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:37:38.570

我发现目前这个问题没有可能的解决方案，因为 BlackBerry 对自动分配应用程序安全权限的限制。

解决方法是告诉客户将默认权限设置为所需的权限，但这很危险，因为它会降低所有已安装应用程序的安全性。

# objective-c - NSUserNotification 状态

> ID：12017986
> 
> 赞同：3
> 
> 时间：2012-08-18T11:00:34.907
> 
> 标签：objective-c, nsusernotification

有没有办法确定某个人`NSUserNotification`是否仍在屏幕上或已被解雇？我还没有找到办法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:05:22.883

我认为您可以使用[NSUserNotificationCenterDelegate_Protocol](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSUserNotificationCenterDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40012261)

它具有**userNotificationCenter:didActivateNotification:** 当用户单击用户通知中心提供的用户通知时发送给委托人。

但请记住，它还取决于正在使用的通知类型。如果是“横幅”，那么它可能会在用户点击它之前消失。

因此，与代表一起，您还必须检查通知的类型以及它是否已提交。

**更新：** 我没有使用 NotificationCenter。所以手头没有代码。但也要看看常量：

```
NSUserNotificationActivationType
These constants describe how the user notification was activated.

enum {
NSUserNotificationActivationTypeNone = 0,
NSUserNotificationActivationTypeContentsClicked = 1,
NSUserNotificationActivationTypeActionButtonClicked = 2
}
typedef NSInteger NSUserNotificationActivationType;
Constants
NSUserNotificationActivationTypeNone
The user did not interact with the notification alert.
Available in OS X v10.8 and later.
Declared in NSUserNotification.h.
NSUserNotificationActivationTypeContentsClicked
The user clicked on the contents of the notification alert.
Available in OS X v10.8 and later.
Declared in NSUserNotification.h.
NSUserNotificationActivationTypeActionButtonClicked
The user clicked on the action button of the notification alert.
Available in OS X v10.8 and later.
Declared in NSUserNotification.h. 
```

# actionscript-3 - Wordnik API AS3 的安全问题

> ID：12017987
> 
> 赞同：0
> 
> 时间：2012-08-18T11:00:37.573
> 
> 标签：actionscript-3, flash, security, crossdomain.xml

我正在制作一个在线游戏，它使用 Wordnik API AS3 来获取单词定义。当我在本地测试时一切正常（sandboxType：localTrusted）。但是当我上传我的 .swf（sandboxType：remote 或 localWithNetwork）时，我收到 Wordnik API 响应“访问 url 的安全错误”。

我已将“useNetworkServices”设置为 true。

我正在做：

```
Security.allowDomain("api.wordnik.com");
Security.loadPolicyFile("api.wordnik.com/crossdomain.xml"); 
```

crossdomain.xml 可能有一些问题。在 localTrusted 中进行测试时，我收到调试消息“api.wordnik.com 未指定元规则。使用默认元规则 'master-only'”。我收到了关于 Google 互动媒体广告的类似消息，但它默认为“按内容类型”。Google IMA 在上传时有效，而 Wordnik 则无效。

我什至不确定问题是否在我这边。

有用的答案将为安全问题提供一个可行的解决方案，或者指向任何使用 Wordnik AS3 API 在线的应用程序——也许它的开发人员可以提供帮助。

:)

# java - 如何使用 flex 在 java 中开发聊天应用程序？

> ID：12017991
> 
> 赞同：2
> 
> 时间：2012-08-18T11:01:10.160
> 
> 标签：java, apache-flex, blazeds

`MXML`在我正在写的 Flex 应用程序文件中。

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
                width="598" height="459" creationComplete="consumer.subscribe()" layout="vertical">

    <mx:Script>
        <![CDATA[
        import mx.controls.Alert;
        import mx.messaging.messages.AsyncMessage;
        import mx.messaging.messages.IMessage;

        public function send():void {
        var message:IMessage = new AsyncMessage();
        message.destination = "SimpleChatDestination";
        message.body = "\n" + usernameInput.text + ":\t" + messageInput.text;

        trace(producer.connected);
        producer.send(message);

        messageInput.text = "";
        }

        public function messageHandler( message:IMessage ):void {
        textArea.text += message.body;
        }
        ]]>
    </mx:Script>

    <mx:Producer id="producer" destination="SimpleChatDestination"/>

    <mx:Consumer id="consumer" destination="SimpleChatDestination" message="messageHandler(event.message)"/>

    <mx:TextArea id="textArea" width="400" height="300" color="#F31C1C" editable="false"
                 enabled="false"/>

    <mx:HBox horizontalGap="0">
        <mx:TextInput id="usernameInput" width="80"/>
        <mx:TextInput id="messageInput" width="180"/>
        <mx:Button label="Send" click="send();"/>
    </mx:HBox>

</mx:Application> 
```

在 BlazeDs（java 端）message-config.xml 文件中，我编写了这样的代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<service id="message-service" 
    class="flex.messaging.services.MessageService">

    <adapters>
        <adapter-definition id="actionscript" class="flex.messaging.services.messaging.adapters.ActionScriptAdapter" default="true" />
        <!-- <adapter-definition id="jms" class="flex.messaging.services.messaging.adapters.JMSAdapter"/> -->
    </adapters>

    <default-channels>
        <channel ref="my-polling-amf"/>
    </default-channels>

        <adapters>
        <adapter-definition id="actionscript" default="true" />
        <!-- <adapter-definition id="jms"/> -->
    </adapters>

    <default-channels>
        <channel ref="my-polling-amf"/>
    </default-channels>

 <destination id="SimpleChatDestination">
  <properties>
   <network>
    <subscription-timeout-minutes>0</subscription-timeout-minutes>
   </network>
   <server>
    <message-time-to-live>0</message-time-to-live>
    <allow-subtopics>true</allow-subtopics>
    <subtopic-separator>.</subtopic-separator>
   </server>
  </properties>

 </destination>

</service> 
```

所以它工作正常。但问题是，当我们打开三个是四个聊天框时，所有的聊天框都会参与。

```
 i want only allow two user can only chat if 3rd user came not visiable 2nd person chating information.
just it is like Facebook,Gmail chating. 
```

请帮助我..

# python - 带有 Psycopg2 的 OS X Mountain Lion（未找到符号：_PyMemoryView_Type）

> ID：12017992
> 
> 赞同：0
> 
> 时间：2012-08-18T11:01:26.790
> 
> 标签：python, django, psycopg2, osx-mountain-lion

过去几天我一直被这个问题困扰，这使我无法正确设置本地环境。这是我的设置：

*   使用 OS X 10.8 山狮
*   通过自制软件，我安装了 Python 和 PostgreSQL。
*   在 Virtualenv 中，我通过 PIP 安装了带有 psycopg2 2.4.5 的 Django
*   我已经验证我可以通过 pgAdmin3 连接到我的 PostgreSQL 数据库

然而，每当我启动我的 Apache 服务器并导航到我的本地 URL 时，我都会遇到这个丑陋的错误：

```
dlopen({....}/lib/python2.7/site-packages/psycopg2/_psycopg.so, 2): 
Symbol not found: _PyMemoryView_Type

Referenced from: {....}/lib/python2.7/site-packages/psycopg2/_psycopg.so
Expected in: flat namespace in {....}/lib/python2.7/site-packages/psycopg2/_psycopg.so 
```

以下是我安装 psycopg2 时的结果：

```
Downloading/unpacking psycopg2
  Downloading psycopg2-2.4.5.tar.gz (719Kb): 719Kb downloaded
  Running setup.py egg_info for package psycopg2

    no previously-included directories found matching 'doc/src/_build'
Installing collected packages: psycopg2
  Running setup.py install for psycopg2
    building 'psycopg2._psycopg' extension
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/psycopgmodule.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/psycopgmodule.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/green.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/green.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/pqpath.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/pqpath.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/utils.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/utils.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/bytes_format.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/bytes_format.o
    In file included from psycopg/bytes_format.c:81:
    In file included from ./psycopg/psycopg.h:33:
    ./psycopg/config.h:71:13: warning: unused function 'Dprintf' [-Wunused-function]
    static void Dprintf(const char *fmt, ...) {}
                ^
    1 warning generated.
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/connection_int.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/connection_int.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/connection_type.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/connection_type.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/cursor_int.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/cursor_int.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/cursor_type.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/cursor_type.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/lobject_int.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/lobject_int.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/lobject_type.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/lobject_type.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/notify_type.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/notify_type.o
    In file included from psycopg/notify_type.c:27:
    In file included from ./psycopg/psycopg.h:33:
    ./psycopg/config.h:71:13: warning: unused function 'Dprintf' [-Wunused-function]
    static void Dprintf(const char *fmt, ...) {}
                ^
    1 warning generated.
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/xid_type.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/xid_type.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/adapter_asis.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_asis.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/adapter_binary.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_binary.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/adapter_datetime.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_datetime.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/adapter_list.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_list.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/adapter_pboolean.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_pboolean.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/adapter_pdecimal.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_pdecimal.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/adapter_pint.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_pint.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/adapter_pfloat.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_pfloat.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/adapter_qstring.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_qstring.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/microprotocols.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/microprotocols.o
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/microprotocols_proto.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/microprotocols_proto.o
    In file included from psycopg/microprotocols_proto.c:27:
    In file included from ./psycopg/psycopg.h:33:
    ./psycopg/config.h:71:13: warning: unused function 'Dprintf' [-Wunused-function]
    static void Dprintf(const char *fmt, ...) {}
                ^
    1 warning generated.
    /usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -Os -pipe -march=native -mmacosx-version-min=10.8 -Wno-unused-value -Wno-empty-body -Qunused-arguments -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch x86_64 -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/usr/local/Cellar/postgresql/9.1.4/include -I/usr/local/Cellar/postgresql/9.1.4/include/server -c psycopg/typecast.c -o build/temp.macosx-10.8-x86_64-2.7/psycopg/typecast.o
    In file included from psycopg/typecast.c:179:
    ./psycopg/typecast_array.c:227:31: warning: comparison of unsigned expression < 0 is always false [-Wtautological-compare]
                if (--stack_index < 0)
                    ~~~~~~~~~~~~~ ^ ~
    1 warning generated.
    /usr/bin/clang -bundle -undefined dynamic_lookup -L/usr/local/Cellar/readline/6.2.4/lib -L/usr/local/Cellar/gettext/0.18.1.1/lib -L/usr/local/lib -L/opt/X11/lib -arch x86_64 build/temp.macosx-10.8-x86_64-2.7/psycopg/psycopgmodule.o build/temp.macosx-10.8-x86_64-2.7/psycopg/green.o build/temp.macosx-10.8-x86_64-2.7/psycopg/pqpath.o build/temp.macosx-10.8-x86_64-2.7/psycopg/utils.o build/temp.macosx-10.8-x86_64-2.7/psycopg/bytes_format.o build/temp.macosx-10.8-x86_64-2.7/psycopg/connection_int.o build/temp.macosx-10.8-x86_64-2.7/psycopg/connection_type.o build/temp.macosx-10.8-x86_64-2.7/psycopg/cursor_int.o build/temp.macosx-10.8-x86_64-2.7/psycopg/cursor_type.o build/temp.macosx-10.8-x86_64-2.7/psycopg/lobject_int.o build/temp.macosx-10.8-x86_64-2.7/psycopg/lobject_type.o build/temp.macosx-10.8-x86_64-2.7/psycopg/notify_type.o build/temp.macosx-10.8-x86_64-2.7/psycopg/xid_type.o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_asis.o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_binary.o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_datetime.o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_list.o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_pboolean.o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_pdecimal.o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_pint.o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_pfloat.o build/temp.macosx-10.8-x86_64-2.7/psycopg/adapter_qstring.o build/temp.macosx-10.8-x86_64-2.7/psycopg/microprotocols.o build/temp.macosx-10.8-x86_64-2.7/psycopg/microprotocols_proto.o build/temp.macosx-10.8-x86_64-2.7/psycopg/typecast.o -L/usr/local/Cellar/postgresql/9.1.4/lib -lpq -lssl -lcrypto -o build/lib.macosx-10.8-x86_64-2.7/psycopg2/_psycopg.so

    no previously-included directories found matching 'doc/src/_build'
Successfully installed psycopg2 
```

关于可能导致这种情况的任何想法？我被难住了，迫切需要一些帮助。提前致谢。让我知道是否有更多信息会有所帮助。

* * *

这是我的 Apache 虚拟主机文件：

```
NameVirtualHost *:80

<VirtualHost mysite.local:80>
    ServerName mysite.local

    Alias /assets/ {...}/app/webapp/assets/
    Alias /static/ {...}/lib/python2.7/site-packages/django/contrib/admin/static/
    Alias /robots.txt {...}/app/webapp/assets/robots.txt
    Alias /favicon.ico {...}/app/webapp/assets/favicon.ico

    CustomLog "{...}/logs/apache-access.log" combined
    ErrorLog "{...}/logs/apache-error.log"
    LogLevel warn

    WSGIDaemonProcess mysite.local processes=1 threads=1 maximum-requests=1 python-path={...}/lib/python2.7/site-packages python-eggs={...}/lib/python2.7/site-packages
    WSGIProcessGroup mysite.local
    WSGIScriptAlias / {...}/conf/apache/django.wsgi
    WSGIPassAuthorization On

    <Directory {...}/app/webapp/assets>
    Order deny,allow
    Allow from all
    Options -Indexes FollowSymLinks
    </Directory>

    <Directory {...}/conf/apache>
    Order deny,allow
    Allow from all
    </Directory>
</VirtualHost> 
```

* * *

这是我的 django.wsgi 文件：

```
import os, sys
import django.core.handlers.wsgi
import site

sys.path.append('{...}/lib/python2.7/site-packages')
sys.path.append('{...}/app')
sys.path.append('{...}/app/webapp')
sys.path.append('{...}/app/webapp/apps')

os.environ['DJANGO_SETTINGS_MODULE'] = 'webapp.settings.production'

site.addsitedir('{...}/lib/python2.7/site-packages')

application = django.core.handlers.wsgi.WSGIHandler() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:10:47.407

在 MAC OSX 上为 python 编译包时看到一些 c 警告通常是标准的，因为它使用 clang 而不是 gcc。他们不应该是问题。该问题看起来像您的 WSGI HTTPD 设置。

使用 WSGI 和虚拟环境以及 WSGI，您需要确保正确设置进程环境。

看起来您需要更改 HTTPD 指令以包含您的处理环境。请参阅 WSGI 中的虚拟环境，标题为[Process Environments](http://code.google.com/p/modwsgi/wiki/VirtualEnvironments#Process_Environments)的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T05:15:19.083

经过一天的文件和设置跳舞后，我终于弄明白了。非常感谢@BigHandsome 引导我朝着正确的方向前进。在我的 Apache httpd.conf 文件中，我使用的是 OS X 10.8 附带的 mod_wsgi.so。显然这是问题所在。我通过执行以下操作来修复它：

1.  使用 Homebrew 安装新版本的 mod_wsgi.so ( `brew install mod_wsgi`)
2.  起初，Homebrew 向我抛出了一个与 Mountain Lion 和 mod_wsgi 相关的错误。我在这个报告的问题上遵循了符号链接说明： [https ://github.com/mxcl/homebrew/issues/13919](https://github.com/mxcl/homebrew/issues/13919)
3.  在对链接中详细说明的文件进行符号链接后，我重新做了`brew install mod_wsgi`并且它工作了。
4.  我更新了我的 httpd.conf：`LoadModule wsgi_module /usr/local/Cellar/mod_wsgi/3.3/libexec/mod_wsgi.so`
5.  我重新启动了 Apache2（`apachectl restart`），瞧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T19:13:42.073

这也困扰着我。确保你已经为正确版本的 python 构建了 mod_wsgi。

原来我已经为 python2.6 构建了 mod_wsgi，但是运行该网站的 virtualenv 使用的是 python2.7。我正在使用 macports，所以以下内容对我有用：

```
sudo port uninstall mod_wsgi
sudo port install mod_wsgi +python2.7 
```

然后重启apache。

OS X 10.7.3 w/MacPorts

当 Apache 开始查看您使用的 Python 版本时，请查看 error.log 中的以下行：

```
[notice] Apache/2.2.24 (Unix) mod_ssl/2.2.24 OpenSSL/1.0.1e DAV/2 mod_wsgi/3.3 Python/2.7.5 configured -- resuming normal operations 
```