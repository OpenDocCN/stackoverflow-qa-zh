# StackOverflow 问答 12255000-12255999

# ruby-on-rails - Rails Rack::Cache 和基于移动设备标头的中间件重定向

> ID：12255003
> 
> 赞同：3
> 
> 时间：2012-09-03T23:19:04.153
> 
> 标签：ruby-on-rails, caching, rack

**如何编写机架中间件以根据用户代理字符串将用户重定向到不同的子域？我需要在我的 rails 应用程序中的 Rack::Cache 之前运行它，并且我还希望这个中间件能够检测到 cookie 的存在。**

*   我们在子域（“m.domain.com”）上有一个移动优化网站。
*   如果访问者访问“www.domain.com”并且我们将用户代理字符串识别为移动设备，并且他们还没有表明他们更喜欢完整站点的 cookie 集，那么我们会将他们重定向到移动子域。这目前在我们的 ApplicationController 中的前置过滤器中完成。

目前，如果我们在 Rails 应用程序中为主页设置缓存标头，Rack::Cache 会缓存主页，但是当移动用户访问主“www”域时，Rack::Cache 会提供页面的缓存版本而不会点击我们的 Rails 应用程序的其余部分，因此我们的移动重定向永远不会执行。

似乎我必须将我们的移动重定向解决方案移动到在 Rack::Cache 之前执行的中间件中。对于上下文，这是我们的过滤器在 ApplicationController 中的样子：

```
before_filter :set_mobile_preferences
before_filter :redirect_to_mobile_if_applicable  

def set_mobile_preferences
  if params[:mobile_site]
    cookies.delete(:prefer_web)
  elsif params[:full_site]
    cookies.permanent[:prefer_web] = 1
    redirect_to_full_site if mobile_request?
  end
end

# before filter
def redirect_to_mobile_if_applicable
  if mobile_device? && !mobile_request? && !prefers_full_site?
    new_url = request.protocol + domain_prefixes[:mobile] + '.' +
              request.host_with_port.gsub(/^#{domain_prefixes[:web]}?\./, '') + 
              request.fullpath
    redirect_to new_url and return
  end
end 
```

有没有人有缓存页面*和*将移动用户重定向到备用域的经验？在缓存层之前将此重定向移动到中间件似乎是正确的解决方案？

非常感谢任何提示、链接、建议。谢谢！

**更新：**也许我可以使用`Vary: User-Agent`标题来帮助解决缓存问题？但是，我担心如果我这样做，那么缓存将被同一页面的多个副本填满，因为浏览器发送的用户代理字符串有数百种变体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T04:56:12.780

所以，我决定编写我们自己的中间件来检测移动用户代理字符串，重定向到子域，并检测站点偏好 cookie 的存在，因此我们仅基于用户代理重定向用户，如果他们没有另有规定。我将它移到了 Rack 堆栈中，因此它在 Rack::Cache 之前执行，这似乎解决了我们的问题。你可以在这里查看源代码：[https ://gist.github.com/3630760](https://gist.github.com/3630760)

# jquery - 匹配类时如何使用jQuery拆分元素？

> ID：12255013
> 
> 赞同：2
> 
> 时间：2012-09-03T23:20:03.213
> 
> 标签：jquery

我想要的是能够将 ul 拆分为两个或多个部分，只要匹配“splithere”类。然后我需要将每个部分包装在一个容器中。像这样：

```
<ul class="someclass">
    <li>One</li>
    <li>Two</li>
    <li>Three</li>
    <li class="splithere">Four</li>
    <li>Five</li>
    <li>Six</li>
    <li class="splithere">Seven</li>
    <li>Eight</li>
    <li>Nine</li>
</ul> 
```

我想以这个结束：

```
<ul class="someclass">
    <li class="newclass">
        <ul>
            <li>One</li>
            <li>Two</li>
            <li>Three</li>
        </ul>
    </li>
    <li class="newclass">
        <ul>
            <li class="splithere">Four</li>
            <li>Five</li>
            <li>Six</li>
        </ul>
    </li>
    <li class="newclass">
        <ul>
            <li class="splithere">Seven</li>
            <li>Eight</li>
            <li>Nine</li>
        </ul>
    </li>
</ul> 
```

我希望有一个人可以帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:36:08.800

你可以这样做：

```
$(".someclass .splithere, .someclass li:first").each(function() {
    var li = $('<li class="newclass"></li>').insertBefore(this);
    var ul = $("<ul>").appendTo(li);
    $(this).nextUntil(".splithere")
        .add(this)
        .appendTo(ul);
});​ 
```

工作示例：http: [//jsfiddle.net/jfriend00/TTRhc/](http://jsfiddle.net/jfriend00/TTRhc/)

* * *

再简化一点：

```
$(".someclass .splithere, .someclass li:first").each(function() {
    var li = $('<li class="newclass"><ul></ul></li>').insertBefore(this);
    $(this).nextUntil(".splithere").add(this).appendTo(li.find("ul"));
});​ 
```

工作示例：http: [//jsfiddle.net/jfriend00/bC5J9/](http://jsfiddle.net/jfriend00/bC5J9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:41:56.307

你想要这样的东西：

```
 $('.splithere').each(function(index){
       var masterIndex=$('ul.someclass li').index(this),
       listObj=$('ul.someclass li:eq(' + masterIndex + ')).add($('ul.someclass li:eq(' + masterIndex +')').nextUntil($('.splithere').eq(index+1)),
       wrapper=$('<li class="newclass"><ul>' + listObj + </ul></li>');
       $('ul.someclass li:eq(' + masterIndex + ')').add($('ul.someclass li:eq(' + masterIndex + ')').nextUntil($('.splithere').eq(index+1)).replaceWith(wrapper);
 }) 
```

它的作用是： 1\. 获取主索引 - 即列表中此列表项的索引 2\. 创建一个对象 (listObj)，其中包括此 splithere 和列表项，直到此处的下一次拆分，并用 ul 包装它们和 li 根据您想要的结果 3\. 用新的 dom 结构替换原始列表项及其同级

我还没有测试过，但这应该可以。

# c# - 人们要求我修复 N+1 错误？

> ID：12255016
> 
> 赞同：3
> 
> 时间：2012-09-03T23:20:24.383
> 
> 标签：c#, linq-to-sql

我从未听说过，但人们将应用程序中的问题称为“N+1 问题”。他们正在做一个基于 Linq to SQL 的项目，并且有人发现了一个性能问题。我不太明白 - 但希望有人可以指导我。

似乎他们正在尝试获取对象列表，然后之后的 Foreach 导致了太多的数据库命中：

据我了解，源代码的第二部分仅在 forwach 中加载。

因此，加载的项目列表：

```
var program = programRepository.SingleOrDefault(r => r.ProgramDetailId == programDetailId); 
```

然后，我们使用这个列表：

```
foreach (var phase in program.Program_Phases)
{
    phase.Program_Stages.AddRange(stages.Where(s => s.PhaseId == phase.PhaseId));
    phase.Program_Stages.ForEach(s =>
    {
         s.Program_Modules.AddRange(modules.Where(m => m.StageId == s.StageId));
    });
    phase.Program_Modules.AddRange(modules.Where(m => m.PhaseId == phase.PhaseId));
} 
```

似乎已确定的问题是，他们希望“程序”包含它的孩子。但是当我们在查询中引用孩子时，它会重新加载程序：

```
program.Program_Phases 
```

他们期望程序完全加载并在内存中，并且profilder 似乎表明该程序表，所有连接都在每个“foreach”上被调用。

这有意义吗？

（编辑：我找到这个链接： [linq to sql 自动延迟加载关联实体吗？](https://stackoverflow.com/questions/557830/does-linq-to-sql-automatically-lazy-load-associated-entities) 这可能会回答我的问题，但是.. 他们使用的是更好的（其中人在......）符号，而不是这个奇怪的 (x => x....）。因此，如果此链接是答案-即，我们需要在查询中“加入”-可以这样做吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T23:42:32.547

在 ORM 术语中，“N+1 选择问题”通常发生在您拥有具有嵌套集合属性的实体时。它是指使用延迟加载时将实体数据完全加载到内存中所需的查询次数。一般来说，查询越多，从客户端到服务器的往返次数越多，服务器处理查询所需的工作就越多，这会对性能产生巨大影响。

有多种技术可以避免这个问题。我不熟悉 Linq to SQL，但 NHibernate 支持急切获取，这在某些情况下会有所帮助。如果您不需要加载整个实体实例，那么您还可以考虑进行投影查询。另一种可能性是更改您的实体模型以避免嵌套集合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T00:07:48.760

对于高性能 linq，首先要弄清楚您真正关心的属性。linq 在性能方面的一个优势是您可以轻松地省去对您不会使用的数据的检索（您总是可以手动编写比 linq 做得更好的代码，但是 linq 可以很容易地做到这一点而无需创建包含数百个类的库，用于您每次遗漏的内容的轻微变体）。

你说“列表”几次。如果你不需要，不要去获取列表，只有当你多次重复使用同一个列表时。否则一次工作一项将在 99% 的时间内表现更好。

正如您所说的那样，“好”和“奇怪”的语法是说同一件事的不同方式。有些东西只能用方法和 lambdas 来表达，但另一种形式总是可以这样表达——确实是在编译之后。无论如何都会`from b in someSource where b.id == 21 select b.name`被编译`someSource.Where(b => b.id == 21).Select(b => b.name)`。

您可以设置`DataContext.LoadOptions`以准确定义要加载哪个对象的实体（最重要的是，在不同的用途中很容易地对其进行不同的设置）。这可以解决您的 N+1 问题。

或者，您可能会发现通过自己设置适当的 id 来更新现有实体或插入新实体更容易。

即使您不觉得它更容易，在某些情况下它也可以更快。通常我会说选择更容易并忘记性能，但如果性能是这里的一个问题（你说它是），那么可以进行分析以查看两者中哪一个效果更好，值得.

# .htaccess - 重写 Wordpress 动态 URL。通过.Htaccess

> ID：12255018
> 
> 赞同：0
> 
> 时间：2012-09-03T23:20:34.633
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有这样的网址模式。

site.com/page-name?variable-name=变量值

我希望这是 site.com/variable - 值

我不擅长重写 api。请指导我完成 .htaccess。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:13:15.887

尝试这个

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.*)=(.*)
RewriteRule ^(.*) /%1-%2? [R,L] 
```

# html - 如何将固定位置元素放在相对定位元素之上？

> ID：12255019
> 
> 赞同：0
> 
> 时间：2012-09-03T23:20:45.290
> 
> 标签：html, css, position, fixed, overlap

甚至可能吗？我在“固定”处为我的网站位置做了一个标题。i 也有一个位于“相对”的图像。每当我滚动网站时......我注意到图像在标题“上方”分层。甚至我放置的 twitter 个人资料小部件也在标题上方。它们都与标题重叠，我不希望那样。关于如何解决我的问题的任何想法？请帮忙！

顺便说一句....我听说“固定”在 Android 中是错误的，尤其是在我制作我的网站的地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T00:24:21.807

您需要使用 z-index 来设置分层，如下所示：

```
.menu {position:fixed; z-index:99999}
.content {position:relative; z-index:1} 
```

然后，您可以使用中间的数字对其进行微调。

# git - 如何在 Zsh 上显示 git 颜色？

> ID：12255028
> 
> 赞同：34
> 
> 时间：2012-09-03T23:21:58.607
> 
> 标签：git, zsh

我最近开始使用 Zsh 作为我的默认 shell。我在 git 中喜欢的一件事是颜色，例如，`git status`and`git diff`曾经有颜色（绿色添加，红色删除）。

现在使用 Zsh，它全是白色（默认颜色）。如何在 Zsh 的 git 输出上添加颜色？谢谢。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-04T00:36:54.420

`git config --global color.diff auto`
`git config --global color.status auto`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-04T00:03:57.950

米戈尔，

我`.gitconfig`的设置是这样的：

```
[color]
  diff = auto
  status = auto
  branch = auto
[color "status"]
  changed = yellow
  added = green
  untracked = red 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-04T00:00:51.473

我正在寻找 zsh 方面的解决方案。但事实证明 git 有一个解决方案。只需将其添加到您的 .gitconfig 文件中

```
[color]
    ui = auto 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-18T09:08:22.220

如果在文本中看到像“ESC [33mcommit”这样的转义码而不是颜色，请尝试将 .zshrc 中的 PAGER 变量设置为如下所示：

```
#export PAGER=${PAGER:-less}
export PAGER='less -r' 
```

# html - 显示带有蓝色下划线的文本，它来自哪里？

> ID：12255029
> 
> 赞同：0
> 
> 时间：2012-09-03T23:22:01.453
> 
> 标签：html, css

我在背面背景上显示了一些白色文本，但文本下方显示有一条蓝线（无论浏览器如何）。这是从哪里来的？

```
body {
    position:relative;
    background-color:black;
    font-family: Helvetica; 
    margin: 0;              /* Amount of negative space around the outside of the body */
    padding: 0;             /* Amount of negative space around the inside of the body */
}

#main_header {
    position: relative;
}

#logo {
    position:absolute;
    top: 6px;
    left: 140px;
    height: 50px;
    width: 50px;
}

#main_title {
    position:absolute;
    font-size: 15px;
    color:white;
    top: 50px;
    left: 40px;
    text-decoration:none;
    text-align:center;
    display:block;
}

<body>
    <a href="http://theurl">
    <div id = "main_header" >
        <img id = "logo" src="logo.png"/>       
        <h2 id = "main_title">Title</h2>
    </div>
    </a> 
```

![在此处输入图像描述](../Images/78ad6a16df21b9aa680aba49f977c38f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T00:47:00.867

锚标记 ( `<a>`) 不能包含块元素，例如[HTML 4.01](http://www.w3.org/TR/html401/struct/links.html#edef-A)中的`div`或。这可能会导致您看到的效果。[继续阅读](https://stackoverflow.com/questions/1827965/is-putting-a-div-inside-an-anchor-ever-correct)。`h2`

您可以重写`<a>`标签以仅围绕内联元素（如下）或指定您的文档类型为 HTML5。[以下](https://stackoverflow.com/questions/5320404/wrap-link-a-around-div)是其他解决方案。

```
<body>
    <div id = "main_header" >
        <a href="http://theurl"><img id = "logo" src="logo.png"/></a>      
        <h2 id = "main_title">Title</h2>
    </div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:24:30.900

尝试设置：

```
a img { border: none; }

a { text-decoration: none; } 
```

# java - 刽子手图片减半

> ID：12255030
> 
> 赞同：2
> 
> 时间：2012-09-03T23:22:03.680
> 
> 标签：java, image, swing, layout-manager

```
public Hangman(){

    Container content =getContentPane();
    content.setLayout(new GridLayout(0,1));

   btnAddWord.addActionListener(this);
   btnRestart.addActionListener(this);
   btnHelp.addActionListener(this);
   btnExit.addActionListener(this);

   panel2.add(label);
   panel3.add(word);
   panel4.add(btnAddWord);
   panel4.add(btnRestart);
   panel4.add(btnHelp);
   panel4.add(btnExit); 
```

* * *

```
public static void main (String [] args){
    Hangman frame = new Hangman();
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(400, 600);
    frame.add(panel1, BorderLayout.NORTH);
    frame.add(panel2, BorderLayout.CENTER);
    frame.add(panel3, BorderLayout.SOUTH);
    frame.add(panel4, BorderLayout.SOUTH);
} 
```

好的，所以我弄清楚当点击错误的按钮时如何更改图片但问题是图片是一半，所以我的布局有问题......

![在此处输入图像描述](../Images/1d100133dcdd2134c176c6d3aeb2cc68.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T01:01:46.767

好的，所以我很快就把它擦掉了。

```
public class HangPane extends JPanel {

    private JLabel lblImage;
    private JButton btnAction;
    private int guess = 0;

    public HangPane() {

        setLayout(new BorderLayout());
        lblImage = new JLabel();
        lblImage.setPreferredSize(new Dimension(46, 172));
        lblImage.setHorizontalAlignment(JLabel.CENTER);
        lblImage.setVerticalAlignment(JLabel.CENTER);
        btnAction = new JButton("Guess");

        String imageName = "HG0.png";
        lblImage.setIcon(new ImageIcon(imageName));

        btnAction.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                String imageName = "HG0.png";

                guess++;
                switch (guess) {
                    case 1:
                        imageName = "HG1.png";
                        break;
                    case 2:
                        imageName = "HG2.png";
                        break;
                    case 3:
                        imageName = "HG3.png";
                        break;
                    case 4:
                        imageName = "HG4.png";
                        break;
                    case 5:
                        imageName = "HG5.png";
                        break;
                    case 6:
                        imageName = "HG6.png";
                        break;
                    default:
                        guess = 0;
                        break;
                }

                lblImage.setIcon(new ImageIcon(imageName));

            }
        });

        add(lblImage, BorderLayout.CENTER);
        add(btnAction, BorderLayout.SOUTH);

    }
} 
```

![猜猜00](../Images/be4084eb2c360e82d5d3882adb707e02.png)![猜猜01](../Images/9fd9e442a8b6c2ae141245ef3ad42a16.png)![猜猜02](../Images/6e20c73a1f356bb8d64839cfc83f7881.png)![猜猜03](../Images/b2a21fb58605f3f2a138675375d29ce1.png)![猜猜04](../Images/6cfc747e414f9c51d51cb107a49f0733.png)![猜猜05](../Images/c9d4ab043cdd7a075341dc4607989801.png)![猜猜06](../Images/cf3ee99fc3651aab6a3c22ee7ae52006.png)

这只是让您单击并单独查看每个步骤。

一些想法。

您可能需要设置标签的首选大小（尽管老实说，我原以为将标签放在适当的`CENTER`位置会解决这个问题）。

我使用的尺寸只适合我自己的形象，你需要自己弄清楚。

另外，尝试使用类似`LineBorder`. 这将告诉您这是布局问题还是图像/读取问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:31:57.343

由于您的问题缺少相关的代码和图像，因此我将在这里进行大胆的猜测，但我猜您的图像并非都具有相同的大小。将 CENTER 中的图像替换为更大的图像不会自动调整父 JFrame 的大小。

MadProgrammer 已经为您的图像大小相同的情况提供了一个很好的示例。如果您有不同尺寸的图像，我会选择一个包含所有图像的 CardLayout 面板，并将该面板添加到 CENTER

# python - 尝试通过 raw_input 将多个字节传递给 read()

> ID：12255031
> 
> 赞同：0
> 
> 时间：2012-09-03T23:22:16.780
> 
> 标签：python, function, methods, terminology

我为“Zed Shaw 的 Learn Python The Hard Way”做了一些额外的功劳；练习 15 的“额外功劳”告诉你通读 pydoc 文件以查找我可以做的其他文件。我有兴趣弄清楚如何让终端使用“read()”打印出一定数量的文本文件字节。我可以在参数中硬编码要读取多少字节，但是在尝试提示用户定义字节数时我碰壁了。

这是我目前拥有的脚本：

```
 from sys import argv

    script, filename = argv

    txt = open(filename)

    print "Here's 24 bytes of your file %r:" % filename

    print txt.read(24)

    print """What about an arbitrary, not hard-coded number of bytes? Enter the number
    of bytes you want read out of the txt file at this prompt, as an integer:"""

    how_far = raw_input("> ")

    print txt.read(how_far2) # this format makes sense in my head but obviously isn't the done thing. 
```

终端吐出错误：

```
"NameError: name 'how_far2' is not defined" 
```

**如何提示脚本的用户输入字节数，并让脚本读出该字节数？**

奖金问题：

1.  我在这里尝试做的事情的实际术语是什么？将变量传递给方法？将变量传递给函数？
2.  字节数是读取的*参数吗？*这是正确的术语吗？
3.  更一般地说，获取 python 术语词汇表的好地方是什么？Stack Overflow 会推荐任何其他书籍，或者在某处的在线文档中推荐一些书籍？真正寻找没有假设，没有先验知识，“像我五岁一样向我解释”的粒度级别......半小时的网络搜索并没有太大帮助。尽管在网络上进行了大量的搜索，但我还没有发现真正将术语集中到任何一个在线地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:30:24.313

错误消息是因为您`how_far`在一个地方和另一个地方使用过`how_far2`。

您还需要在将`how_far`其`int`传递给 read 之前将其转换为 -`int(how_far)`例如使用

您会发现它可以称为传递变量、参数或参数。这些不是 Python 术语，它们是通用编程术语

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:28:51.513

`raw_input`返回一个字符串。 `file.read`需要一个整数——可能你只需要`raw_input`在使用它之前将输出转换为整数。

# javascript - javascript中是否有更标准化的方式来转换（序列化）非表单数据以用于ajax？

> ID：12255033
> 
> 赞同：1
> 
> 时间：2012-09-03T23:22:43.430
> 
> 标签：javascript, jquery, ajax, asp.net-mvc-3, viewmodel

我正在使用 asp.net mvc 3 并且有强类型模型要传递给。如果数据格式正确，模型将接受数据。这种形式规定数据用 .`NameMatchingModel=value`分隔`&`。例如，如果我有：

视图模型：

```
public class CarViewModel
{
 public Car Car { get; set; }
}

public class Car
{
 public string Make { get; set; }
 public string Model { get; set; }
} 
```

然后我有一个方法接受这个 ViewModel

```
public ActionResult AcceptCarVM( CarViewModel model )
{
 //TODO: use car data
 return View();
} 
```

现在，我想传入包含汽车一些细节的视图模型。有比这种手动方式更好的方法吗？

```
var carMake = "Ford";
var carModel = "Pinto";
var viewModelData = "Car.Make=" + carMake + "&Car.Model=" + carModel;
var encodeData = encodeURIComponent(viewModelData);
$.ajax({
            url: "@(Url.Action("AcceptCarVM"))",
            type: 'GET',
            data: encodeData,
            success: function (result) {
                //TODO: use result
        }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:28:58.787

jQuery具有序列化查询字符串的功能

```
$.param 
```

这是[文档](http://api.jquery.com/jQuery.param/)

您当然会以不同的方式提供您的数据...但是由于您正在嵌套类型，我建议您使用[.toDictionary](http://erraticdev.blogspot.ie/2010/12/sending-complex-json-objects-to-aspnet.html)插件，该插件将正确序列化 JSON 对象而不管其结构如何，并以 Asp 的方式转换日期.net MVC 会在数据绑定时理解。

```
var data = {
    Car: {
        Make: "Ford",
        Model: "Pinto"
    }
};

$.ajax({
    url: "@(Url.Action("AcceptCarVM"))",
    type: 'GET',
    data: $.toDictionary(data),
    success: function(result) {
        // TODO: use result
    }
}); 
```

甚至：

```
var data = {
    Make: "Ford",
    Model: "Pinto"
};

$.ajax({
    url: "@(Url.Action("AcceptCarVM"))",
    type: 'GET',
    data: $.toDictionary(data, "Car"), // will provide root object's name
    success: function(result) {
        // TODO: use result
    }
}); 
```

当你有一个控制器动作需要两个相同类型的参数时，第二个特别有用，所以你可以提供与动作参数名称相同的根对象的名称，这样它们就会在服务器端得到正确的数据绑定，即：

```
public ActionResult AcceptCarVM(CarViewModel carOne, CarViewModel carTwo) { ... } 
```

插件在内部使用 jQuery 功能，因此它可以可靠地序列化事物，特别适合 Asp.net MVC 后端。

# programming-languages - 数学 VS 逻辑运算符优先级

> ID：12255035
> 
> 赞同：-1
> 
> 时间：2012-09-03T23:22:59.620
> 
> 标签：programming-languages, logical-operators

为什么在大多数编程语言中，数学运算符的优先级与逻辑运算符的优先级不同。

含义：为什么`x / y * z`计算结果与逻辑运算`( x / y ) * z`符`/`具有相同的优先级`*`但是在逻辑运算符`x || y && z`中计算结果是`x || ( y && z )` 所以，这种区别是否存在逻辑原因（某些硬件原因，优化技术），或者它只是编程语言创建者决定的方式他们？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:02:35.220

这与编程无关。曾经使用过布尔代数吗？AND 也优先于 OR，布尔代数来自 17 世纪（尽管我不知道这个约定是什么时候形成的）。两者也写为 * 和 +，这提供了这方面的线索（但在其他方面可能会混淆）。

编程语言设计者只是继承了这些优先规则，就像他们继承了算术运算符的优先级一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:30:14.877

可能正是编程语言创建者决定制作它们的方式。

更具体地说，在缺少括号的情况下，程序员可能希望在 OR 之前评估 AND 语句。

换句话说|| 更像是“从左到右的加法或减法”，而 && 更像是“从左到右的乘除法”

还记得！(not) 的优先级甚至高于 && (AND)

# opengl - 如何在 libgdx 中模拟一盏灯？

> ID：12255039
> 
> 赞同：-1
> 
> 时间：2012-09-03T23:24:06.360
> 
> 标签：opengl, colors, libgdx

我正在使用`libgdx`，我想知道如何模拟一盏灯。

我的意思是我有一个背景纹理，其中的所有颜色都很暗，因为它假设是一个黑暗的环境。我想要做的是抓住纹理的一个区域，让所有的颜色更亮，就像某处有一盏灯一样。

现在，灯应该在移动，并且将在运行时计算，因此无法预测它会在哪里，我唯一想到的就是从纹理中获取每个像素并获取颜色和只需将 rgb 值更改为更高即可产生这种效果。

问题是这盏灯应该会移动很多。直到游戏结束它才会停止移动，我觉得改变每个像素的颜色是一个繁重的过程。还有其他方法吗？

顺便说一句，游戏是卡通，所以我不需要太逼真的灯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:31:59.303

您能否改为将 alpha 混合透明度分层以使除灯所在的可见区域变暗吗？我打算用它来实现游戏中的伪光照效果。

# java - Nexus 7 上的广播接收器

> ID：12255041
> 
> 赞同：0
> 
> 时间：2012-09-03T23:24:39.680
> 
> 标签：java, android, broadcastreceiver, android-manifest

我正在尝试编写一个在手机启动时运行的服务，并且必须从 SD 卡中读取数据。起初我使用接收器，`android.intent.action.BOOT_COMPLETED`但切换到下面的意图以确保已加载 SD 卡。

我的问题是在我的 Nexus 7 上，它似乎没有收到`MEDIA_MOUNTED`意图。Nexus 7 没有 SD 卡（但它有单独的 SD 卡分区）。我也尝试了这个`BOOT_COMPLETED`意图，同样幸运。我在模拟器和我的 Thunderbolt 上测试了相同的代码，两种意图都有效。

清单：

```
<receiver
    android:name=".StartupReceiver"
    android:enabled="true"
    android:exported="true"
    android:label="Start the NFS Automounter Service">

    <intent-filter>
        <action android:name="android.intent.action.MEDIA_MOUNTED"></action>
        <data android:scheme="file"/> 
        <!-- <action android:name="android.intent.action.BOOT_COMPLETED"></action>-->
    </intent-filter>
</receiver> 
```

`BroadcastReceiver`班级：

```
public class StartupReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) 
        //if ("android.intent.action.MEDIA_MOUNTED".equals(intent.getAction()))
        //{

            Log.d("NFS_Automounter", "Recieved Mount");
            Intent serviceIntent = new Intent("com.ancantus.nfsautomounter.AutomountService");
            context.startService(serviceIntent);
        //}
    }
} 
```

我注释掉了意图匹配，只是为了尝试记录该类是否已执行。

我唯一的预感是 Nexus 7 没有广播 a `MEDIA_MOUNTED`，因为它没有真正的 SD 卡；但我也无法收到`BOOT_COMPLETED`意图。

并提出问题；是的，我确实有`BOOT_COMPLETED`许可。

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T23:39:21.883

在这个答案开始出现在足够多的搜索结果中以供人们找到之前，我必须输入多少次？也许粗体大写会起作用：

**从 Android 3.1 开始，`BroadcastReceiver`在手动运行应用程序的其他组件之一（例如运行活动的用户）之前，根本不会工作**。

这在[文档](http://developer.android.com/sdk/android-3.1.html#launchcontrols)中（虽然位置不太好）、[博客文章](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)和许多 StackOverflow 答案中，例如：

*   [https://stackoverflow.com/a/9084771/115145](https://stackoverflow.com/a/9084771/115145)
*   [https://stackoverflow.com/a/11865858/115145](https://stackoverflow.com/a/11865858/115145)
*   [https://stackoverflow.com/a/11744499/115145](https://stackoverflow.com/a/11744499/115145)

因此，向您的应用程序添加一个活动。无论如何，您都需要一些活动，用于控制后台操作的设置、文档、许可协议、隐私政策等。

（注意：我并不是真的对你大喊大叫——我只是很沮丧，尽管努力宣传，但这种情况不断出现......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T23:29:45.027

请注意，许多 Android 设备**模拟**SD 卡的方式是它不会影响对 SD 卡的访问，即使桌面访问它也是如此。因此，可能是 Nexus 7 只是以这种方式暴露了所有内存，因此它并没有真正安装任何东西，所以它不会广播`MEDIA_MOUNTED`。如果你想在开机时做一些任务，听`BOOT_COMPLETED`是唯一正确的方法。

# ios - AFNetworking 使用 GDataXML 作为 XML-RPC API 的 HTTPBody

> ID：12255042
> 
> 赞同：1
> 
> 时间：2012-09-03T23:24:43.893
> 
> 标签：ios, xml, xml-rpc, afnetworking, gdataxml

我正在尝试将 AFNetworking 与基于 XML-RPC 的 API 一起使用，同时使用 GDataXML 作为我的 XML 解析和创建类。

我已经成功编写了一些根据 API 规范输出正确 XML 请求的方法，我还使用 apigee 控制台测试了这个 XML 请求，并验证我每次使用 apigee 控制台和 API 都能得到正确的响应。

现在是 AFNetworking，我编写了以下代码，有时但很少起作用。

```
NSMutableURLRequest *request = [[FZAPIClient sharedClient] requestForDataServiceQueryOnTable:@"Contact" usingQueryData:@{ @"LastName" : @"Wagner" } forFields:@[ @"FirstName", @"LastName" ] withLimit:1000 forPage:0];

AFHTTPRequestOperation *operation = [[FZAPIClient sharedClient] HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject) {

    NSError *error = nil;
    GDataXMLDocument *opdoc = [[GDataXMLDocument alloc] initWithData:[[operation request] HTTPBody] options:0 error:&error];

    if (error) {
        NSLog(@"Error creating XML: %@", error);
    }

    GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:responseObject options:0 error:nil];
    GDataXMLElement *element = [doc rootElement];
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    [FZAPIErrorHandler handleError:error];
}];

[operation start]; 
```

实施`- (NSMutableURLRequest *)requestForDataServiceQueryOnTable:(NSString *)table usingQueryData:(NSDictionary *)queryData forFields:(NSArray *)fields withLimit:(NSInteger)limit forPage:(NSInteger)page;`

```
- (NSMutableURLRequest *)requestForDataServiceQueryOnTable:(NSString *)table
                                            usingQueryData:(NSDictionary *)queryData
                                                 forFields:(NSArray *)fields
                                                 withLimit:(NSInteger)limit
                                                   forPage:(NSInteger)page {
    GDataXMLDocument *xmlDocument = [FZXMLGenerator requestForDataServiceQueryOnTable:table
                                                                      usingQueryData:queryData
                                                                           forFields:fields
                                                                           withLimit:limit
                                                                             forPage:page];
    NSMutableURLRequest *request = [self requestWithMethod:@"POST" path:@"" parameters:nil];
    [request setHTTPBody:[xmlDocument XMLData]];
    [request setHTTPMethod:@"POST"];

    return request;
} 
```

当请求有效时，我得到一个例外的响应。

当请求不起作用时（这是 99% 的时间），我得到以下响应。

```
<?xml version="1.0" encoding="UTF-8"?>
<methodResponse>
   <fault>
      <value>
         <struct>
            <member>
               <name>faultCode</name>
               <value>
                  <i4>0</i4>
               </value>
            </member>
            <member>
               <name>faultString</name>
               <value>Failed to parse XML-RPC request: Premature end of file.</value>
            </member>
         </struct>
      </value>
   </fault>
</methodResponse> 
```

这让我怀疑 HTTPBody 属性发生了什么事，我几乎在所有我能想到的地方都添加了日志记录，并看到 XML 在触发时确实附加到了请求上。它仍然可以通过完成块中的操作访问。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:38:19.647

看起来就像在请求中设置内容类型一样简单。

将方法更新为

```
- (NSMutableURLRequest *)requestForDataServiceQueryOnTable:(NSString *)table
                                            usingQueryData:(NSDictionary *)queryData
                                                 forFields:(NSArray *)fields
                                                 withLimit:(NSInteger)limit
                                                   forPage:(NSInteger)page {
    GDataXMLDocument *xmlDocument = [FZXMLGenerator requestForDataServiceQueryOnTable:table
                                                                      usingQueryData:queryData
                                                                           forFields:fields
                                                                           withLimit:limit
                                                                             forPage:page];
    NSMutableURLRequest *request = [self requestWithMethod:@"POST" path:@"" parameters:nil];
    [request setHTTPBody:[xmlDocument XMLData]];
    [request setValue:@"application/xml" forHTTPHeaderField:@"Content-Type"];

    return request;
} 
```

解决了问题，注意线路 `[request setValue:@"application/xml" forHTTPHeaderField:@"Content-Type"];`

为了使所有请求都具有全局性，我在`[self setDefaultHeader:@"Content-Type" value:@"application/xml"];`我的`- (id)initWithBaseURL:(NSURL *)url;`实现中添加了这一行。

# javascript - window.onload 适用于 aspx 页面，但不适用于常规 html

> ID：12255043
> 
> 赞同：1
> 
> 时间：2012-09-03T23:25:16.677
> 
> 标签：javascript, asp.net, dom-events, onload, xhtml-1.0-strict

有人可以向我解释为什么`window.onload`在 aspx 中可以正常工作，但在 xhtml 中不行吗？

此`window.onload`示例在 aspx 中运行良好：

```
<script type="text/javascript">
    //<![CDATA[
      //handles the collapse of submenu items on navigation side menu

 function toggle() {

     document.getElementById('node4').style.display = '';

 }

 window.onload = toggle;

//]]>
 </script> 
```

然而这个`window.onload`例子在严格的 XHTML 1.0 中不起作用。`countDownClock`（加载页面时它不会立即触发）：

```
<script type="text/javascript">
   //<![CDATA[
   //handles the collapse of submenu items on navigation side menu

   function countDownClock() {
       today = new Date();
       openingDay = new Date();
       openingDay.setMonth(2, 23);
       (today > openingDay) ? openingDay.setFullYear(2013) : openingDay.setFullYear();
       openingDay.setHours(9, 0, 0, 0);
       document.getElementById("mallclock").dayNow.value = showDate(today);
       document.getElementById("mallclock").timeNow.value = showTime(today);

       var daysLeft = dayDiff(today, openingDay);
       var hoursLeft = hoursDiff(today, openingDay);
       var minutesLeft = minutesDiff(today, openingDay);

       daysLeft = ((hoursLeft - 24) >= 0) ? daysLeft + (hoursLeft / 24) : daysLeft;
       hoursLeft = ((hoursLeft - 24) >= 0) ? hoursLeft - ((hoursLeft / 24) * 24) : hoursLeft;
       hoursLeft = ((minutesLeft - 60) >= 0) ? hoursLeft + (minutesLeft / 60) : hoursLeft;
       minutesLeft = ((minutesLeft - 60) >= 0) ? minutesLeft - ((minutesLeft / 60) * 60) : minutesLeft;

       document.getElementById("mallclock").days.value = daysLeft;
       document.getElementById("mallclock").hours.value = hoursLeft;
       document.getElementById("mallclock").minutes.value = minutesLeft;

   }

   window.onload = countDownClock;

 //]]>
</script> 
```

它只触发 body 事件，该事件设置为`countDownClock`1 分钟后显示

```
<body onload = "setInterval('countDownClock()', 60000)"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:42:27.747

啊哈，编辑使一切变得不同。

一个页面只能有一个`load`事件处理程序，因此如果您使用该属性添加一个处理程序，`window.onload`然后使用该属性添加另一个处理程序，则`body onload`只有其中一个可以工作。

将两个操作放在同一个处理程序中：

```
window.onload = function(){
  countDownClock();
  window.setInterval(countDownClock, 60000);
}; 
```

# c# - 有什么方法可以监控 Windows Phone 7 上的电话信息？

> ID：12255045
> 
> 赞同：0
> 
> 时间：2012-09-03T23:25:27.667
> 
> 标签：c#, windows-phone-7

我知道您可以使用 PhoneCallTask​​ 拨打电话，但有没有办法在拨打电话时触发操作？

例如，设置一个计时器并在通话 1 或 2 分钟时发出声音。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:29:07.377

不，不允许应用程序直接访问手机。

您的应用程序对核心手机功能的唯一访问是通过启动器和选择器。见 MSDN：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769556(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769556(v=vs.92).aspx)

# performance - 为什么在 data.frame 中预先指定类型会更慢？

> ID：12255046
> 
> 赞同：11
> 
> 时间：2012-09-03T23:26:26.880
> 
> 标签：performance, r, dataframe

我预先分配了一个大的 data.frame 以供稍后填写，我通常使用`NA`' 来做这样的事情：

```
n <- 1e6
a <- data.frame(c1 = 1:n, c2 = NA, c3 = NA) 
```

我想知道如果我预先指定数据类型是否会让事情变得更快，所以我测试了

```
f1 <- function() {
    a <- data.frame(c1 = 1:n, c2 = NA, c3 = NA)
    a$c2 <- 1:n
    a$c3 <- sample(LETTERS, size= n, replace = TRUE)
}

f2 <- function() {
    b <- data.frame(c1 = 1:n, c2 = numeric(n), c3 = character(n))
    b$c2 <- 1:n
    b$c3 <- sample(LETTERS, size= n, replace = TRUE)
}

> system.time(f1())
   user  system elapsed 
  0.219   0.042   0.260 
> system.time(f2())
   user  system elapsed 
  1.018   0.052   1.072 
```

所以它实际上要慢得多！我也再次尝试使用因子列，但差异并不接近 2 倍而不是 4 倍，但我很好奇为什么这会更慢，并且想知道使用数据类型而不是`NA`'s 进行初始化是否合适。

--

编辑：弗洛德尔指出 1:n 是整数，而不是数字。通过该校正，运行时间几乎相同；当然，错误地指定数据类型并在以后更改它会很痛苦！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T23:48:24.183

将任何数据分配给大型数据框需要时间。如果您要在一个向量中一次分配所有数据（正如您应该这样做的那样），那么在原始定义中完全不分配 c2 和 c3 列要快得多*。*例如：

```
f3 <- function() {
    c <- data.frame(c1 = 1:n)
    c$c2 <- 1:n
    c$c3 <- sample(LETTERS, size= n, replace = TRUE)
}

print(system.time(f1()))
#   user  system elapsed 
#  0.194   0.023   0.216 
print(system.time(f2()))
#   user  system elapsed 
#  0.336   0.037   0.374 
print(system.time(f3()))
#   user  system elapsed 
#  0.057   0.007   0.063 
```

这样做的原因是，当您预先分配时，`n`会创建一个长度列。例如

```
str(data.frame(x=1:2, y = character(2)))
## 'data.frame':    2 obs. of  2 variables:
## $ x: int  1 2
## $ y: Factor w/ 1 level "": 1 1 
```

*请注意，该`character`列已转换为`factor`*将比设置慢`stringsAsFactors = F`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-04T00:22:36.777

@David Robinson 的回答是正确的，但我将在此处添加一些分析，以展示*如何*调查为什么某些 thngs 比您预期的要慢。

最好的办法是做一些分析以查看被调用的内容，这可以提供一些线索，说明为什么有些东西调用比其他东西慢

```
library(profr)
profr(f1())
## Read 9 items
##                 f level time start  end  leaf source
## 8              f1     1 0.16  0.00 0.16 FALSE   <NA>
## 9      data.frame     2 0.04  0.00 0.04  TRUE   base
## 10            $<-     2 0.02  0.04 0.06 FALSE   base
## 11         sample     2 0.04  0.06 0.10  TRUE   base
## 12            $<-     2 0.06  0.10 0.16 FALSE   base
## 13 $<-.data.frame     3 0.12  0.04 0.16  TRUE   base
profr(f2())
## Read 15 items
##                          f level time start  end  leaf source
## 8                       f2     1 0.28  0.00 0.28 FALSE   <NA>
## 9               data.frame     2 0.12  0.00 0.12  TRUE   base
## 10                       :     2 0.02  0.12 0.14  TRUE   base
## 11                     $<-     2 0.02  0.18 0.20 FALSE   base
## 12                  sample     2 0.02  0.20 0.22  TRUE   base
## 13                     $<-     2 0.06  0.22 0.28 FALSE   base
## 14           as.data.frame     3 0.08  0.04 0.12 FALSE   base
## 15          $<-.data.frame     3 0.10  0.18 0.28  TRUE   base
## 16 as.data.frame.character     4 0.08  0.04 0.12 FALSE   base
## 17                  factor     5 0.08  0.04 0.12 FALSE   base
## 18                  unique     6 0.06  0.04 0.10 FALSE   base
## 19                   match     6 0.02  0.10 0.12  TRUE   base
## 20          unique.default     7 0.06  0.04 0.10  TRUE   base
profr(f3())
## Read 4 items
##                f level time start  end  leaf source
## 8              f3     1 0.06  0.00 0.06 FALSE   <NA>
## 9             $<-     2 0.02  0.00 0.02 FALSE   base
## 10         sample     2 0.04  0.02 0.06  TRUE   base
## 11 $<-.data.frame     3 0.02  0.00 0.02  TRUE   base 
```

显然`f2()`比`f1()`有很多转换和重新创建等`character`要慢。`factor``levels`

为了有效地使用内存，我建议使用[`data.table`package](http://cran.r-project.org/web/packages/data.table/index.html)。这（尽可能）避免了对象的内部复制

```
library(data.table)
f4 <- function(){
  f <- data.table(c1 = 1:n)
  f[,c2:=1L:n]
  f[,c3:=sample(LETTERS, size= n, replace = TRUE)]
}

system.time(f1())
##  user  system elapsed 
##  0.15    0.02    0.18 
system.time(f2())
## user  system elapsed 
## 0.19    0.00    0.19 
system.time(f3())
## user  system elapsed 
## 0.09    0.00    0.09 
system.time(f4())
## user  system elapsed 
## 0.04    0.00    0.04 
```

请注意，使用`data.table`您可以一次添加两列（并通过引用）

```
 # Thanks to @Thell for pointing this out.
f[,`:=`(c('c2','c3'), list(1L:n, sample(LETTERS,n, T))), with = F] 
```

## 编辑——将返回所需对象的函数（很好地选择了@Dwin）

```
n= 1e7
f1 <- function() {
    a <- data.frame(c1 = 1:n, c2 = NA, c3 = NA)
    a$c2 <- 1:n
    a$c3 <- sample(LETTERS, size = n, replace = TRUE)
    a
}

f2 <- function() {
    b <- data.frame(c1 = 1:n, c2 = numeric(n), c3 = character(n))
    b$c2 <- 1:n
    b$c3 <- sample(LETTERS, size = n, replace = TRUE)
    b
}

f3 <- function() {
    c <- data.frame(c1 = 1:n)
    c$c2 <- 1:n
    c$c3 <- sample(LETTERS, size = n, replace = TRUE)
    c
}
f4 <- function() {
    f <- data.table(c1 = 1:n)
    f[, `:=`(c2, 1L:n)]
    f[, `:=`(c3, sample(LETTERS, size = n, replace = TRUE))]

}

system.time(f1())

##    user  system elapsed 
##    1.62    0.34    2.13 

system.time(f2())

##    user  system elapsed 
##    2.14    0.66    2.79 

system.time(f3())

##    user  system elapsed 
##    0.78    0.25    1.03 

system.time(f4())

##    user  system elapsed 
##    0.37    0.08    0.46 

profr(f1())
## Read 105 items
##                        f level time start  end  leaf source
## 8                     f1     1 2.08  0.00 2.08 FALSE   <NA>
## 9             data.frame     2 0.66  0.00 0.66 FALSE   base
## 10                     :     2 0.02  0.66 0.68  TRUE   base
## 11                   $<-     2 0.32  0.84 1.16 FALSE   base
## 12                sample     2 0.40  1.16 1.56  TRUE   base
## 13                   $<-     2 0.32  1.76 2.08 FALSE   base
## 14                     :     3 0.02  0.00 0.02  TRUE   base
## 15         as.data.frame     3 0.04  0.02 0.06 FALSE   base
## 16                unlist     3 0.12  0.54 0.66  TRUE   base
## 17        $<-.data.frame     3 1.24  0.84 2.08  TRUE   base
## 18 as.data.frame.integer     4 0.04  0.02 0.06  TRUE   base
profr(f2())
## Read 145 items
##                          f level time start  end  leaf source
## 8                       f2     1 2.88  0.00 2.88 FALSE   <NA>
## 9               data.frame     2 1.40  0.00 1.40 FALSE   base
## 10                       :     2 0.04  1.40 1.44  TRUE   base
## 11                     $<-     2 0.36  1.64 2.00 FALSE   base
## 12                  sample     2 0.40  2.00 2.40  TRUE   base
## 13                     $<-     2 0.36  2.52 2.88 FALSE   base
## 14                       :     3 0.02  0.00 0.02  TRUE   base
## 15                 numeric     3 0.06  0.02 0.08  TRUE   base
## 16               character     3 0.04  0.08 0.12  TRUE   base
## 17           as.data.frame     3 1.06  0.12 1.18 FALSE   base
## 18                  unlist     3 0.20  1.20 1.40  TRUE   base
## 19          $<-.data.frame     3 1.24  1.64 2.88  TRUE   base
## 20   as.data.frame.integer     4 0.04  0.12 0.16  TRUE   base
## 21   as.data.frame.numeric     4 0.16  0.18 0.34  TRUE   base
## 22 as.data.frame.character     4 0.78  0.40 1.18 FALSE   base
## 23                  factor     5 0.74  0.40 1.14 FALSE   base
## 24    as.data.frame.vector     5 0.04  1.14 1.18  TRUE   base
## 25                  unique     6 0.38  0.40 0.78 FALSE   base
## 26                   match     6 0.32  0.78 1.10  TRUE   base
## 27          unique.default     7 0.38  0.40 0.78  TRUE   base
profr(f3())
## Read 37 items
##                        f level time start  end  leaf source
## 8                     f3     1 0.72  0.00 0.72 FALSE   <NA>
## 9             data.frame     2 0.10  0.00 0.10 FALSE   base
## 10                     :     2 0.02  0.10 0.12  TRUE   base
## 11                   $<-     2 0.08  0.14 0.22 FALSE   base
## 12                sample     2 0.26  0.22 0.48  TRUE   base
## 13                   $<-     2 0.16  0.56 0.72 FALSE   base
## 14                     :     3 0.02  0.00 0.02  TRUE   base
## 15         as.data.frame     3 0.04  0.02 0.06 FALSE   base
## 16                unlist     3 0.02  0.08 0.10  TRUE   base
## 17        $<-.data.frame     3 0.58  0.14 0.72  TRUE   base
## 18 as.data.frame.integer     4 0.04  0.02 0.06  TRUE   base
profr(f4())
## Read 15 items
##               f level time start  end  leaf     source
## 8            f4     1 0.28  0.00 0.28 FALSE       <NA>
## 9    data.table     2 0.02  0.00 0.02 FALSE data.table
## 10            [     2 0.26  0.02 0.28 FALSE       base
## 11            :     3 0.02  0.00 0.02  TRUE       base
## 12 [.data.table     3 0.26  0.02 0.28 FALSE       <NA>
## 13         eval     4 0.26  0.02 0.28 FALSE       base
## 14         eval     5 0.26  0.02 0.28 FALSE       base
## 15            :     6 0.02  0.02 0.04  TRUE       base
## 16       sample     6 0.24  0.04 0.28  TRUE       base 
```

# random - 方案：结合随机和子串

> ID：12255048
> 
> 赞同：1
> 
> 时间：2012-09-03T23:26:30.397
> 
> 标签：random, scheme, substring

我正在尝试创建一个过程，让用户输入一个非空字符串，然后从长度为 1 的子字符串中的输入中返回一个随机字母。

IE

```
(pick-at-random "word")

~"w"

(pick-at-random "word")

~"r" 
```

到目前为止，我有：

```
 (define pick-at-random
      (lambda (s)
        (substring s (random(string-length s)) ()))) 
```

这给了我想要显示的字母的位置，我觉得 () 在哪里，我应该有一些变量代表子字符串的起始值，然后向它添加一个。但是，我不知道该怎么做。简而言之，我在问如何在开始值中使用随机函数时将子字符串的长度限制为 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T00:48:50.813

您可以使用`let`将随机数绑定到变量。

```
(define pick-at-random
  (lambda (s)
    (let ((index (random (string-length s))))
      (substring s index (+ index 1))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T02:21:23.667

这是不使用的替代答案`substring`，这样您就不需要将索引保存在`let`绑定中。这是解决问题的更实用（因此也是惯用的）解决方案：

```
(define (pick-at-random s)          ; read the following lines from bottom to top
  (string                           ; convert single character to string
    (string-ref s                   ; access character in string, given an index
      (random (string-length s))))) ; generate a random valid index in the string

(pick-at-random "word")
> "d"   ; random result 
```

前面的过程生成一个随机的有效索引，然后在字符串中的该位置选择字符。作为最后一步，它将单个字符转回长度为 1 的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:31:08.467

前两个答案很好。或者，您可以将此问题分解为两个问题：

*   开发函数“nth-char”，它接受一个单词和一个索引，并返回一个包含单词第 n 个字符的字符串。

*   开发执行您描述的功能“随机选择”。（顺便说一下，我认为像“random-char”这样的名字比“pick-at-random”要好一些。）

这种分解通过将其作为另一个函数的参数来解决您描述的问题。

“Under the hood”，这与使用“let”的解决方案相同。

# wpf - 如何以编程方式获取 ItemsControl 滚动条位置？

> ID：12255055
> 
> 赞同：0
> 
> 时间：2012-09-03T23:28:06.953
> 
> 标签：wpf, scroll, itemscontrol, behavior

我有一个附加到 ItemsControl 的行为，每当添加新项目时，它都会向下滚动到底部。由于我正在开发一个聊天类型的程序，如果用户在除最底部以外的任何地方都有滚动条，我不希望它滚动，否则会很烦人（一些聊天程序会这样做，这很糟糕）。

我该如何做到这一点？我不知道如何访问包装的 ScrollViewer，或者不知道是否需要将其显示在视图中。

这是我实际上从 StackOverflow 上的某个人那里得到的行为类。我还在学习自己的行为。

```
public class ScrollOnNewItem : Behavior<ItemsControl>
{
    protected override void OnAttached()
    {
        AssociatedObject.Loaded += OnLoaded;
        AssociatedObject.Unloaded += OnUnLoaded;
    }

    protected override void OnDetaching()
    {
        AssociatedObject.Loaded -= OnLoaded;
        AssociatedObject.Unloaded -= OnUnLoaded;
    }

    private void OnLoaded(object sender, RoutedEventArgs e)
    {
        var incc = AssociatedObject.ItemsSource as INotifyCollectionChanged;
        if (incc == null) return;

        incc.CollectionChanged += OnCollectionChanged;
    }

    private void OnUnLoaded(object sender, RoutedEventArgs e)
    {
        var incc = AssociatedObject.ItemsSource as INotifyCollectionChanged;
        if (incc == null) return;

        incc.CollectionChanged -= OnCollectionChanged;
    }

    private void OnCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == NotifyCollectionChangedAction.Add)
        {
            int count = AssociatedObject.Items.Count;
            if (count == 0)
                return;

            var item = AssociatedObject.Items[count - 1];

            var frameworkElement = AssociatedObject.ItemContainerGenerator.ContainerFromItem(item) as FrameworkElement;
            if (frameworkElement == null) return;

            frameworkElement.BringIntoView();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T00:17:14.780

好的，这是我自己想出的答案。

我发现依赖对象有一个 GetSelfAndAncestors 方法。使用它，我可以获得我的 AssociatedObject（ItemsControl）的 ScrollViewer 祖先（如果有的话）并用它来操作它。

所以我将此字段添加到我的行为中

```
private ScrollViewer scrollViewer;
private bool isScrollDownEnabled; 
```

在 OnLoaded 事件处理程序中，我为其分配了以下代码

```
scrollViewer = AssociatedObject.GetSelfAndAncestors().Where(a => a.GetType().Equals(typeof(ScrollViewer))).FirstOrDefault() as ScrollViewer; 
```

在 OnCollectionChanged 事件处理程序中，我继续将所有逻辑包装在 if 语句中，如下所示

```
 if (scrollViewer != null)
        {
            isScrollDownEnabled = scrollViewer.ScrollableHeight > 0 && scrollViewer.VerticalOffset + scrollViewer.ViewportHeight < scrollViewer.ExtentHeight;

            if (e.Action == NotifyCollectionChangedAction.Add && !isScrollDownEnabled)
            {
                 // Do stuff
            }
        } 
```

总而言之，代码如下所示

```
public class ScrollOnNewItem : Behavior<ItemsControl>
{
    private ScrollViewer scrollViewer;
    private bool isScrollDownEnabled;

    protected override void OnAttached()
    {
        AssociatedObject.Loaded += OnLoaded;
        AssociatedObject.Unloaded += OnUnLoaded;
    }

    protected override void OnDetaching()
    {
        AssociatedObject.Loaded -= OnLoaded;
        AssociatedObject.Unloaded -= OnUnLoaded;
    }

    private void OnLoaded(object sender, RoutedEventArgs e)
    {
        var incc = AssociatedObject.ItemsSource as INotifyCollectionChanged;
        if (incc == null) return;

        incc.CollectionChanged += OnCollectionChanged;
        scrollViewer = AssociatedObject.GetSelfAndAncestors().Where(a => a.GetType().Equals(typeof(ScrollViewer))).FirstOrDefault() as ScrollViewer;
    }

    private void OnUnLoaded(object sender, RoutedEventArgs e)
    {
        var incc = AssociatedObject.ItemsSource as INotifyCollectionChanged;
        if (incc == null) return;

        incc.CollectionChanged -= OnCollectionChanged;
    }

    private void OnCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (scrollViewer != null)
        {
            isScrollDownEnabled = scrollViewer.ScrollableHeight > 0 && scrollViewer.VerticalOffset + scrollViewer.ViewportHeight < scrollViewer.ExtentHeight;

            if (e.Action == NotifyCollectionChangedAction.Add && !isScrollDownEnabled)
            {
                int count = AssociatedObject.Items.Count;
                if (count == 0)
                    return;

                var item = AssociatedObject.Items[count - 1];

                var frameworkElement = AssociatedObject.ItemContainerGenerator.ContainerFromItem(item) as FrameworkElement;
                if (frameworkElement == null) return;

                frameworkElement.BringIntoView();
            }
        }
    }
} 
```

正如评论中所要求的，要使用行为，我只需要在包含我的行为的代码中的区域的 xaml 文件中添加一个新的 xmlns。

```
 xmlns:behaviors="clr-namespace:Infrastructure.Behaviors;assembly=Infrastructure" 
```

然后在控件上添加行为。

```
 <ScrollViewer VerticalScrollBarVisibility="Auto">
        <ItemsControl Name="Blah" ItemsSource="{Binding Messages}" ItemTemplate="{StaticResource MessageTemplate}">
            <i:Interaction.Behaviors>
                <behaviors:ScrollOnNewItem />
            </i:Interaction.Behaviors>
        </ItemsControl>
    </ScrollViewer> 
```

**i**类只是交互命名空间。**xmlns:i="clr-命名空间:System.Windows.Interactivity;assembly=System.Windows.Interactivity"**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T02:38:32.430

还有另一种实现此行为的方法。这种方式比上面的要容易。您应该做的就是调用如下方法：

```
public void AppendText(RichTextBox richTextBox, string data){       
   richTextBox.AppendText(data);
   bool isScrollDownEnabled = richTextBox.VerticalOffset == 0 ||
        richTextBox.VerticalOffset + richTextBox.ViewportHeight == richTextBox.ExtentHeight;
   if (isScrollDownEnabled)
       richTextBox.ScrollToEnd();
} 
```

它也适合`TextBox`。

# arrays - Matlab - 将字符串（'321'）转换为 [3,2,1]

> ID：12255056
> 
> 赞同：7
> 
> 时间：2012-09-03T23:28:19.027
> 
> 标签：arrays, string, matlab

> **可能重复：**
> [在matlab中将字符串转换为数字数组](https://stackoverflow.com/questions/12046605/convert-string-to-number-array-in-matlab)

我是一个新的 Matlab 用户。我想知道如何执行上述操作。我完全被难住了。

非常感谢您的时间和帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T23:32:46.470

MatLab 中的字符串只是一个字符数组。

您可以减去`'0'`以保留每个数字的值。

```
> '321' - '0'

ans =

     3     2     1 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-04T00:02:46.827

或者，不那么神秘`str2num`或`str2double`应用于字符数组的每个元素

```
arrayfun(@str2double, '321') 
```

作为奖励，这也将返回`NaN`对应于非标量的字符串值，即

```
>> arrayfun(@str2double, '321a')

ans =

     3     2     1   NaN 
```

因此，对于字符串`'321a4'`，以下仅返回有效的标量：

```
b = arrayfun(@str2double, '321a4')
c = b(~isnan(b))
c =

 3     2     1     4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T04:25:43.927

```
while(*str)
{

    value [i]=  (*str - '0');
    start++;
    i++;

} 
```

# c++ - g++ 4.7.1 编译错误：“strsignal”的类型冲突

> ID：12255058
> 
> 赞同：12
> 
> 时间：2012-09-03T23:28:43.280
> 
> 标签：c++, compilation, g++, ubuntu-12.04

我正在尝试在 Ubuntu 12.04 32 位上从源代码编译 g++ 4.7.1。目前我已经完全做到了：[https](https://askubuntu.com/questions/168947/how-to-upgrade-g-to-4-7-1) ://askubuntu.com/questions/168947/how-to-upgrade-g-to-4-7-1 除了在 g++ 4.7.1 编译之前它问我到“取消设置 LIBRARY_PATH”（所以我已经这样做了）。所以编译开始了，过了一会儿我有以下错误消息：

```
In file included from ../.././gcc/c-lang.c:24:0:
../.././gcc/system.h:499:20: erreur: conflicting types for ‘strsignal’
/usr/include/string.h:566:14: note: previous declaration of ‘strsignal’ was here
In file included from ./tm.h:19:0,
                 from ../.././gcc/c-lang.c:26:
./options.h:3738:2: erreur: #error too many masks for ix86_isa_flags
In file included from ../.././gcc/input.h:25:0,
                 from ../.././gcc/tree.h:27,
                 from ../.././gcc/c-lang.c:27:
../.././gcc/../libcpp/include/line-map.h:208:38: erreur: ‘CHAR_BIT’ undeclared here (not in a function)
../.././gcc/../libcpp/include/line-map.h:208:3: erreur: bit-field ‘reason’ width not an integer constant
../.././gcc/../libcpp/include/line-map.h:208:3: attention : ‘reason’ is narrower than values of its type [enabled by default]
In file included from ../.././gcc/tree.h:32:0,
                 from ../.././gcc/c-lang.c:27:
../.././gcc/hwint.h:17:39: erreur: division par zéro dans #if
../.././gcc/hwint.h:17:39: erreur: division par zéro dans #if
../.././gcc/hwint.h:17:39: erreur: division par zéro dans #if
../.././gcc/hwint.h:17:39: erreur: division par zéro dans #if
../.././gcc/hwint.h:17:39: erreur: division par zéro dans #if
../.././gcc/hwint.h:17:39: erreur: division par zéro dans #if
../.././gcc/hwint.h:17:39: erreur: division par zéro dans #if
../.././gcc/hwint.h:17:39: erreur: division par zéro dans #if
../.././gcc/hwint.h:17:39: erreur: division par zéro dans #if
../.././gcc/hwint.h:17:39: erreur: division par zéro dans #if
../.././gcc/hwint.h:17:39: erreur: division par zéro dans #if
../.././gcc/hwint.h:17:39: erreur: division par zéro dans #if
../.././gcc/real.h:105:9: erreur: #error "REAL_WIDTH > 6 not supported"
In file included from ../.././gcc/c-family/c-common.h:26:0,
                 from ../.././gcc/c-tree.h:25,
                 from ../.././gcc/c-lang.c:28:
../.././gcc/../libcpp/include/cpplib.h:225:3: erreur: bit-field ‘type’ width not an integer constant
../.././gcc/../libcpp/include/cpplib.h:225:3: attention : ‘type’ is narrower than values of its type [enabled by default]
../.././gcc/../libcpp/include/cpplib.h:267:3: erreur: #error "Cannot find a least-32-bit signed integer type"
../.././gcc/../libcpp/include/cpplib.h:269:35: erreur: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘cppchar_t’
../.././gcc/../libcpp/include/cpplib.h:270:1: erreur: unknown type name ‘CPPCHAR_SIGNED_T’
../.././gcc/../libcpp/include/cpplib.h:768:1: erreur: unknown type name ‘cppchar_t’
../.././gcc/../libcpp/include/cpplib.h:779:1: erreur: unknown type name ‘cppchar_t’
../.././gcc/../libcpp/include/cpplib.h:779:58: erreur: unknown type name ‘cppchar_t’
../.././gcc/../libcpp/include/cpplib.h:954:1: erreur: unknown type name ‘cppchar_t’ 
```

（对不起，一些错误信息是法语：`erreur -> error`和`division par zéro dans #if -> division by zero in #if`）。

问题是什么以及如何解决？

`./configure`（另一个小问题：和之间有什么区别`./configure -v`？）

编辑：system.h 中的 strsignal 行

```
/* If the system doesn't provide strsignal, we get it defined in
   libiberty but no declaration is supplied.  */
#if !defined (HAVE_STRSIGNAL) \
    || (defined (HAVE_DECL_STRSIGNAL) && !HAVE_DECL_STRSIGNAL)
# ifndef strsignal
extern const char *strsignal (int);
# endif
#endif 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-13T20:12:54.147

我用了

```
unset LIBRARY_PATH CPATH C_INCLUDE_PATH PKG_CONFIG_PATH CPLUS_INCLUDE_PATH INCLUDE 
```

因为我在这台机器上没有 root 访问权限，所以我附加了很多这些变量。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-10T16:29:04.123

我有同样的问题。就我而言，我通过取消设置 bash 变量 CPATH、LIBRARY_PATH 和 C_INCLUDE_PATH 来解决它。在那之后，构建顺利。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-03T12:36:03.250

其他解决方案对我不起作用，因为我使用这些环境变量将 gcc 指向它的一些依赖项。也`unset`ting variit 听起来不像是一个非常精确的修复:)

原来问题是我`:`的 env vars 声明中有一些尾随，如下所示：

```
$ export LIBRARY_PATH=/foo/bar:$LIBRARY_PATH
$ echo $LIBRARY_PATH
/foo/bar: 
```

结果是它`LIBRARY_PATH`也将始终包含当前目录。正确设置环境变量，没有尾随`:`，解决了这个问题。

# .net - 有没有办法使用 Castle Windsor 构造一个 HttpHandler？

> ID：12255063
> 
> 赞同：1
> 
> 时间：2012-09-03T23:29:42.507
> 
> 标签：.net, inversion-of-control, castle-windsor, httphandler

有什么方法可以使用 Castle Windor 在 .net 中构造一个 HttpHandler 以便我可以将依赖项注入其中？

我意识到这是一个非常稀疏的问题，但我不确定还要添加什么。我有一个实现`IHttpHandler`并且我希望能够将依赖项注入其中，但是我看不到如何让 IoC 容器接管处理程序的实例化，因为它是由应用程序根据请求完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:31:13.440

当您说实例化是“由应用程序根据请求完成”时。你的申请？您不会“只是”将其更改为向温莎城堡要求处理程序吗？或者，您的意思是它是通过 ASP.Net 配置实例化的？

您是否需要自定义 HTTP 处理程序工厂来处理处理程序？ [http://msdn.microsoft.com/en-us/library/ms227439(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms227439(v=vs.100).aspx)

# php - PHP在MySQL查询中更改数字

> ID：12255065
> 
> 赞同：-1
> 
> 时间：2012-09-03T23:30:02.997
> 
> 标签：php, mysql, int

我有这个 PHP 代码：

```
if ($username) {
    if ($news == 1)
        $int = "9";
    if ($news == 0)
        $int = "12";
}
else
    $int = "9";

$query = mysql_query("SELECT * FROM files WHERE active='1' ORDER BY id DESC LIMIT $int");
require ("scripts/connect.php");
$numrows = mysql_num_rows($query); 
```

但是后来我收到了这个错误（注意以 $numrows 开头的行是第 69 行）：

> > 警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 69 行的 /Applications/XAMPP/xamppfiles/htdocs/Site/index.php 中给出

我尝试了很多方法来更改号码，但无济于事。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:33:19.560

如果您`scripts/connect.php`负责建立数据库连接，那么我`mysql_query()`认为应该**在它之下**，而不是现在的**上面**。我还建议使用`mysql_error()`并始终检查返回值是否存在错误，因为诸如“查询总是成功”之类的假设是不可行的，并且会在预期较少的时刻对您造成严重打击。

```
require ("scripts/connect.php");
$query = mysql_query("SELECT * FROM files WHERE active='1' ORDER BY id DESC LIMIT $int");
if( $query ) {
  $numrows = mysql_num_rows($query);
  ...
} else {
   die( mysql_error() );
} 
```

请注意`mysql`扩展名已弃用。尽快切换到`mysqli`或更复杂的东西。`PDO`

# python - Python示例在测验期间重复答案而不是在结束时

> ID：12255068
> 
> 赞同：2
> 
> 时间：2012-09-03T23:30:25.257
> 
> 标签：python

我为我的问题的简单性质道歉。

我正在通过“Hello World”，儿童和初学者的计算机编程 - 由 Warren 和 Carter Sande 编写。

第一章第二个例子是这个数字例子，一个海盗数字测验。编程语言是 Python。

它应该允许 6 次猜测，除非首先猜到正确的数字。我想对你们来说，代码是不言自明的。

```
import random

secret = random.randint(1,99)
guess = 0
tries = 0

print "AHOY! I'm the dread Pirate Roberts, and I have a secret!"
print "It's a number from 1 to 99\. I'll give you 6 tries."

while guess != secret and tries < 6:
guess = input("What's yer guess? ")
if guess < secret:
    print "Too low, ye scurvy dog!"
elif guess > secret:
    print "Too high, landlubber!"
tries = tries +1
if guess == secret:
    print "Avast! Ye got it! Found my secret, ye did!"
else:
    print "No more guesses! Better luck next time, matey!"
    print "The secret number was", secret 
```

但是当我运行它时，它会告诉我每次猜测后的答案是什么，这是不应该的。应该是等到最后。

我只是想不通我做错了什么。我已经检查了每一行，或者至少，我认为我已经检查了。

如果有人能指出我哪里出错了，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:32:28.253

适当的缩进是关键。确保将循环内的内容缩进，并在循环后不缩进。

```
while guess != secret and tries < 6:
    guess = input("What's yer guess? ")
    if guess < secret:
        print "Too low, ye scurvy dog!"
    elif guess > secret:
        print "Too high, landlubber!"
    tries = tries + 1

if guess == secret:
    print "Avast! Ye got it! Found my secret, ye did!"
else:
    print "No more guesses! Better luck next time, matey!"
    print "The secret number was", secret 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:43:02.353

写这个的更好的方法可能是。然后你不必设置`guess`到`0`循环之外

```
for tries in range(1, 6):
    guess = input("What's yer guess? ")
    if guess < secret:
        print "Too low, ye scurvy dog!"
    elif guess > secret:
        print "Too high, landlubber!"
    else:
        print "Avast! Ye got it! Found my secret, ye did!"
        break 
else:
    print "No more guesses! Better luck next time, matey!"
    print "The secret number was", secret 
```

# java - 在java中随机选择的对象上调用通用方法的更好方法

> ID：12255074
> 
> 赞同：3
> 
> 时间：2012-09-03T23:31:51.897
> 
> 标签：java, architecture, random, coding-style, arrayobject

祝大家有美好的一天。

我有一个带有 runRandomExercise() 方法的抽象类，以及几个扩展它以添加不同类型练习的类。

我现在想选择一个随机类型的练习，所以我需要随机选择其中一个类，然后调用 runRandomExercise() 。

现在我正在手动编码，这不是我认为的最好的解决方案。但是，我不能只存储数组中的类，因为类类型不同，如果我使用 object[]，我不能调用 runRandomExercise() 方法。有什么聪明的方法来处理这个吗？

到目前为止，这是我的代码。它有效，但添加其他类会很痛苦......

```
/*Specific classes that extend abstract class TrainingClass with the runRandomExercise() method*/
private MatheMagic mMathMag;
private Mnemonics mMnemonics;
private String[] mTrainingClasses;

/*Initialize classes*/
mMathMag = new MatheMagic();
mMnemonics = new Mnemonics();

/*Manually store classe names*/
mTrainingClasses = new String[2];
mTrainingClasses[0] = "mMathMag";
mTrainingClasses[1] = "mMnemonics"; 

/*Return random exercise*/
public String[] RandomExercise() {
    Random aGenerator = new Random();

    /*Get random class name*/
    int rnd = aGenerator.nextInt(mTrainingClasses.length);
    String aChosen = mTrainingClasses[rnd];

    String[] aRes = new String[2];

    if (aChosen == "mMathMag") {
        aRes = mMathMag.runRandomExercise();
    } else if (aChosen == "mMnemonics") {
        aRes = mMnemonics.runRandomExercise();
    }

    return aRes;
} 
```

编辑这是 TrainingClass 的定义方式：

```
/** Common interface for all exercises */ 
public interface Exercise { 
   public String[] run();
}

/** Common interface for all training classes */
 public abstract class TrainingClass {

  private Random mRandGen = new Random();
  public ArrayList<Exercise> mExerciseTypes = new ArrayList<Exercise>();

  /** Run a random exercise */
 public String[] runRandomExercise() {
    int i = mRandGen.nextInt(mExerciseTypes.size());
    return mExerciseTypes.get(i).run();
 }
}

/*Specific training class*/

public class MatheMagic extends TrainingClass {

 public MatheMagic() {

    class SomeExercise implements Exercise {

        public String[] run() {

             String[] mRes = new String[2];
              mRes[0] = "Question type 1";
              mRes[1] = "Answer type 1";
            return mRes;
        }

    }

    class SomeOtherExercise implements Exercise {

        public String[] run() {

             String[] mRes = new String[2];
              mRes[0] = "Question type 2";
              mRes[1] = "Answer type 2";
            return mRes;
        }

    }
    SomeExercise mN = new SomeExercise();

    SomeOtherExercise mS = new SomeOtherExercise();

    mExerciseTypes.add(mN);
    mExerciseTypes.add(mS);
 } 

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T23:33:57.303

简单的解决方案是使用通用方法创建一个接口，并让所有类扩展它。

创建该类型的集合或数组而不是 Object；您可以简单地迭代或随机选择并调用您想要的方法。

对我来说，这感觉就像是 GoF 的命令模式。

```
public interface Exercise {
    void execute();
} 
```

现在你的课程这样做：

```
public class MatheMagic implements Execise {
    public void execute() {
        // special logic here.
    }
} 
```

然后你可以这样做：

```
int numExercises = 1;
Exercise [] exercises = new Exercise[numExercises];
exercises[0] = new MatheMagic();
for (Exercise exercise : exercises) {
    exercise.execute();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T23:34:38.477

是的，是的，您可以将所有这些类存储在一个数组中，然后随机调用它们。如何？创建一个接口，并在所有类中派生自该接口。这样您就可以基于接口调用，而不是基于实现调用。

# javascript - 队列中的“for”循环，替换跨度标签的问题

> ID：12255077
> 
> 赞同：1
> 
> 时间：2012-09-03T23:32:24.990
> 
> 标签：javascript, jquery

我正在尝试用队列函数中的动画做一些棘手的事情。我犹豫在这里发布我的原始代码，因为它又长又乱。但是我已经将问题归结为以下示例（我正在使用 Alnitak 的此方法对队列进行编码：[jQuery：添加 delay() 和 removeClass() 后代码停止工作](https://stackoverflow.com/questions/10972961/jquery-code-stops-working-after-adding-delay-and-removeclass/10973084#10973084)）：

[http://jsfiddle.net/AYMY7/6/](http://jsfiddle.net/AYMY7/6/)

这是一个尝试编写一个程序，该程序将为 100 的主要功率因数分解设置动画。它由一个 for 循环构成，其中 #target div 每次都会接收新的 html，需要替换的部分周围带有“span”标签。然后'span'ned部分应该淡出，被某些东西替换，然后淡入。如果你运行它，你会看到淡入/淡出只在循环中第一次起作用，然后停止。我的猜测是，这是因为当下一次迭代替换 #target div 中的 html 时，“span”标签被视为新的东西，不受原始“span”队列的影响。我不知道这是否有意义，但如果你研究代码并运行它，你就会明白我的意思。

我试过用类和 id 来修复它，但我认为同样的核心问题仍然存在。谁能看到解决这个问题的方法？

我以为我通过为每个部分添加单独的 div 并更改数组来修复它：

[http://jsfiddle.net/nQjBw/2/](http://jsfiddle.net/nQjBw/2/)

这几乎可以很好地工作，除了这些似乎是随机发生的小抽搐。因此，如果有人可以看到如何解决这个问题，那就太棒了。

在任何一种情况下，我都需要一个不特定于因数分解的解决方案，因为我正在尝试将这种方法用于更大的项目。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:18:24.503

这似乎有效：

[http://jsfiddle.net/EHJfR/](http://jsfiddle.net/EHJfR/)

# c++ - c ++具有相同变量名的多个父项

> ID：12255087
> 
> 赞同：13
> 
> 时间：2012-09-03T23:33:46.907
> 
> 标签：c++, inheritance, multiple-inheritance

```
class A{
    protected:
    int var;
};

class B{
    protected:
    int var;
};

class C : public A, public B {}; 
```

这里会发生什么？变量合并了吗？我可以具体调用一个，例如 B::var = 2 等吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-03T23:40:31.960

您的课程`C`将有两个变量，`B::var`并且`A::var`. 在您之外`C`可以像这样访问它们（如果您更改为`public:`），

```
C c;
c.A::var = 2; 
```

尝试访问`c.var`将导致错误，因为没有名称为 的字段`var`，只有`A::var`和`B::var`。

在内部`C`，它们的行为与常规字段一样，再次具有名称`A::var`和`B::var`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T23:39:56.300

您可以通过`A::var`和`B::var`分别在 C 类中访问它们。

[这](http://www.tenouk.com/Module16_1.html)是一个涵盖相同问题的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T23:40:07.433

如果你只指`var`inside of `C`，编译器不知道你的意思是`A::var`or `B::var`，编译器会告诉你这`var`是模棱两可的。因此，您必须在使用时完全限定名称`var`。

不会发生合并，任何实例都`C`将包含这两个变量。

# scala - Scala：是否可以使方法“+”像这样工作：x + y = z？

> ID：12255089
> 
> 赞同：1
> 
> 时间：2012-09-03T23:34:11.823
> 
> 标签：scala

我有一个图，每个顶点连接到 6 个邻居。在构建图形并声明连接时，我想使用如下语法：

```
1\.    val vertex1, vertex2 = new Vertex
2\.    val index = 3    // a number between 0 and 5
3\.    vertex1 + index = vertex2 
```

结果应该是`vertex2`被~~声明~~为 的`index`-th 邻居`vertex1`，相当于：

```
4\.    vertex1.neighbors(index) = vertex2 
```

在 frobbing 的实现时`Vertex.+`，我想出了以下内容：

```
5\.    def +(idx: Int) = neighbors(idx) 
```

令人惊讶的是，这并**没有**导致我的 IDE（IntelliJIdea，BTW）在第 3 行下划线。但是，第 3 行的编译衍生出以下消息：

```
error: missing arguments for method + in class Vertex;
follow this method with `_' if you want to treat it as a partially applied function 
```

接下来，我尝试使用提取器，但实际上，这似乎不太适合这种情况。

如果我想要实现的目标是否可行，有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T03:53:13.963

您可能可以通过使用`:=`而不是`=`. 看看这个说明性的 repl 会话：

```
scala> class X { def +(x:X) = x; def :=(x:X) = x }
defined class X

scala> val a = new X;
a: X = X@7d283b68

scala> val b = new X;
b: X = X@44a06d88

scala> val c = new X;
c: X = X@fb88599

scala> a + b := c
res8: X = X@fb88599 
```

正如评论之一所述，自定义`=`需要两个参数，例如`vertex1(i)=vertex2`被取消以`vertext.update(i,vertex2)`禁止您提出的确切语法。另一方面`:=`是一个常规的自定义操作符，`a:=b`会去糖化到`a.:=(b)`.

现在我们还有一个考虑要做。优先级会按您的意图工作吗？根据[语言规范第 6.12.3 节](http://www.scala-lang.org/docu/files/ScalaReference.pdf)，答案是肯定的。`+`具有比 更高的优先级`:=`，因此它最终以`(a+b):=c`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T07:10:04.987

不完全是你想要的，只是玩右关联：

```
scala> class Vertex {
     |   val neighbors = new Array[Vertex](6)
     |   def :=< (n: Int) = (this, n)
     |   def >=: (conn: (Vertex, Int)) {
     |     val (that, n) = conn
     |     that.neighbors(n) = this
     |     this.neighbors((n+3)%6) = that
     |   }
     | }
defined class Vertex

scala> val a, b, c, d = new Vertex
a: Vertex = Vertex@c42aea
b: Vertex = Vertex@dd9f68
c: Vertex = Vertex@ca0c9
d: Vertex = Vertex@10fed2c

scala> a :=<0>=: b ; a :=<1>=: c ; d :=<5>=: a

scala> a.neighbors
res25: Array[Vertex] = Array(Vertex@dd9f68, Vertex@ca0c9, Vertex@10fed2c, null, null, null) 
```

# c# - 限制两列中继器中的单选按钮选择

> ID：12255093
> 
> 赞同：0
> 
> 时间：2012-09-03T23:34:53.177
> 
> 标签：c#, jquery, asp.net, user-controls, radio-button

在第一列中，我显示了大学列表。每个学院都有多个课程，这些课程已显示在第二列中。

**对用户选择的限制：**

当用户选择一所大学（比如麻省理工学院）时，应该允许他只选择与所选大学相对应的课程（在这种情况下是计算机科学和机械工程）。

如何使用 jQuery 实现此功能？

我将以下数据绑定到嵌套中继器中。

```
 public string currentCollege { get; set; }
    Dictionary<string, List<string>> colleges;
    class College
    {
        public College(string s)
        {
            Course = s;
        }
        public string Course { get; set; }
    }
    protected void Page_Load(object sender, EventArgs e)
    {
        colleges = new Dictionary<string, List<string>>();
        colleges.Add("mit", new List<string>(new string[] { "computer science", "mechanical engg." }));
        colleges.Add("caltech", new List<string>(new string[] { "electrical engg", "cryptography"}));
        colleges.Add("harvard", new List<string>(new string[] { "language", "arts", "science" }));
        rptColleges.DataSource = colleges;
        rptColleges.DataBind();
    }
    protected void rptColleges_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            Repeater rptCourseNow = (e.Item.FindControl("rptCourses") as Repeater);
            rptCourseNow.DataSource = colleges[currentCollege];
            rptCourseNow.DataBind();
        }
    } 
```

标记如下 -

```
 <asp:Repeater ID="rptColleges" runat="server" OnItemDataBound="rptColleges_ItemDataBound">
    <HeaderTemplate>
        <table>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <asp:RadioButton ID="rbCollege" runat="server" value=<%# DataBinder.Eval((KeyValuePair<string, List<string>>)Container.DataItem, "Key") %> />
                <%# currentCollege = (string)DataBinder.Eval((KeyValuePair<string, List<string>>)Container.DataItem, "Key") %>
            </td>
            <td>
                <asp:Repeater ID="rptCourses" runat="server">
                    <HeaderTemplate>
                        <ul>
                    </HeaderTemplate>
                    <ItemTemplate>
                        <li>
                            <asp:RadioButton ID="rbCourse" value="<%#Container.DataItem %>" runat="server" />
                            &nbsp; <%#Container.DataItem %>
                        </li>
                    </ItemTemplate>
                    <FooterTemplate></ul></FooterTemplate>
                </asp:Repeater>
            </td>
        </tr>
    </ItemTemplate>
    <FooterTemplate></table></FooterTemplate>
</asp:Repeater> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:49:41.937

如果我理解正确，您想将单选按钮分组到一所大学。您可以使用 RadioButton 的 GroupName 属性使单选按钮的各个部分相互排斥。

看看这个链接：

[RadioButton.GroupName 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobutton.groupname.aspx)

# google-api - 带有已安装应用程序的 Google API Oauth 2

> ID：12255095
> 
> 赞同：2
> 
> 时间：2012-09-03T23:35:14.847
> 
> 标签：google-api, oauth-2.0

我正在为已安装的应用程序和 php 使用 Google API OAuth 2.0。这是我们正在更新的 WordPress 插件，Google 支持人员向我们推荐使用 Installed App 而不是 Web App “因为您将拥有一个项目 ID，您的用户无需使用 API 创建自己的安慰”

我正在努力为此进行正确的设置-Web App示例很容易，但是我找不到用于创建这些的代码设置的单个示例：

[https://developers.google.com/accounts/docs/OAuth2InstalledApp#formingtheurl](https://developers.google.com/accounts/docs/OAuth2InstalledApp#formingtheurl)

它说我应该使用“code”和“grant_type”，但我没有看到 apiClient 中的任何函数来设置这些。

由于我不太清楚，我正在寻找的是相当于这个：

```
$client->setClientId();
$client->setClientSecret();
$client->setRedirectUri();
$client->setDeveloperKey();
$client->setScopes(array('https://www.googleapis.com/auth/analytics.readonly')); 
```

对于已安装的应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:55:30.897

Google Drive SDK 文档包括一个使用 OAuth 2.0 进行已安装应用程序的分步快速入门示例：

[https://developers.google.com/drive/quickstart](https://developers.google.com/drive/quickstart)

这是您正在寻找的代码：

```
$client->setClientId('YOUR_CLIENT_ID');
$client->setClientSecret('YOUR_CLIENT_SECRET');
$client->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
$client->setScopes(array('https://www.googleapis.com/auth/analytics.readonly')); 
```

# facebook - 指定的 URL 不属于应用程序

> ID：12255102
> 
> 赞同：3
> 
> 时间：2012-09-03T23:36:45.223
> 
> 标签：facebook

我使用以下设置首先对用户进行身份验证，然后使用身份验证信息处理以下请求。

来自views.py

```
@canvas_only
def authenticate(request):
    request.session['access_token'] = request.facebook.graph.access_token
    return render(request, 'authenticated.html', {})

class Home(View):

    def get(self, request, *args, **kwargs):
        """The home to be called from within the application"""

        access_token = request.session['access_token']
        graph = facebook.GraphAPI(access_token)
        me = graph.get_object('me')
        request.session['my_id'] = me['id']
        template_data = _collect_home_data(graph)

        return render(request, 'home.html', template_data) 
```

来自 urls.py：

```
urlpatterns = patterns('',
    url(r'^$', 'crosswords.ugly.views.authenticate'),
    url(r'^home/$', Home.as_view(), name='home'), 
```

这主要工作（应用程序内的链接现在可以正常工作）但新用户（尚未授权应用程序）收到以下错误消息：

填字游戏出现错误。请稍后再试。

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: Invalid redirect_uri: Given URL is not allowed by the Application configuration. 
```

facebook 上的应用程序设置（画布 url、安全画布 url）都指向

> http(s)://finebitstrings.pythonanywhere.com/

我能做些什么来摆脱这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T06:32:30.567

我已经在另一个问题中回答了这个问题，所以我将向您发布链接：

[Facebook 上出现错误 191，但 URL 设置正确](https://stackoverflow.com/questions/12249930/error-191-on-facebook-but-url-is-set-up-properly/12250207#12250207)

尝试那些应用程序设置，也许会解决它。在大多数情况下确实如此。

# haskell - 如何根据两个表达式是否引用相同的绑定名称来创建重写过程？

> ID：12255104
> 
> 赞同：15
> 
> 时间：2012-09-03T23:37:05.960
> 
> 标签：haskell, compiler-construction

如何查找和重写引用相同绑定名称的表达式？例如，在表达式

```
let xs = ...
in ...map f xs...map g xs... 
```

表达式`map f xs`和表达式都`map g xs`引用相同的绑定名称，即`xs`. 是否有任何标准编译器分析可以让我们识别这种情况并将这两个`map`表达式重写为例如

```
let xs = ...
    e = unzip (map (f *** g) xs)
in ...fst e...snd e... 
```

我一直在考虑树遍历方面的问题。例如给定 AST：

```
data Ast = Map (a -> b) -> Ast -> Ast
         | Var String
         | ... 
```

我们可以尝试编写一个树遍历来检测这种情况，但这似乎很困难，因为`Map`引用相同的两个节点`Var`可能出现在树的不同位置。如果您反转 AST 中的所有引用，使其成为图表，则此分析似乎更容易完成，但我想看看是否有任何替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:46:47.197

我认为您正在寻找的是一组通常称为 Tupling、Fusion 和 Supercompilation 的程序转换，它们属于更一般的展开/折叠转换理论。您可以按如下方式实现您想要的。

首先通过在参数上“驱动” map 的定义来执行推测性评估（展开），这会产生两个新的伪程序，具体取决于 xs 的形式是 y:ys 还是 []。在伪代码中：

```
let y:ys = ...
in ...(f y):(map f ys)...(g y):(map g ys)...

let [] = ...
in ...[]...[]... 
```

然后针对原始程序执行共享结构（Tupling）和泛化（Folding）的抽象，以停止否则永久展开：

```
let xs = ...
in ...(fst tuple)...(snd tuple)...
where tuple = generalisation xs
      generalisation [] = ([],[])
      generalisation (y:ys) = let tuple = generalisation ys
                              in ((f y):(fst tuple),(g y):(snd tuple)) 
```

我希望这能给你一个想法，但是程序转换本身就是一个研究领域，如果不画无环有向图很难很好地解释。

# javascript - 柱形图上的 Highcharts 工具提示

> ID：12255107
> 
> 赞同：2
> 
> 时间：2012-09-03T23:37:41.750
> 
> 标签：javascript, jquery, highcharts

我正在研究这个例子：[http ://www.highcharts.com/demo/combo](http://www.highcharts.com/demo/combo)

当我将鼠标悬停在一些彩色饼图上时，即蓝色的工具提示是

```
Jane: 13 fruits 
```

但是，当我将鼠标悬停在第一个列（苹果处的蓝色列）时，工具提示是：

```
Apples: 3 
```

它是简的苹果。那么我怎样才能将其更改为：

```
Jane : 3 apples 
```

有任何想法吗？

**PS**：

示例中使用的工具提示格式化程序是：

```
 tooltip: {
        formatter: function() {
            var s;
            if (this.point.name) { // the pie chart
                s = ''+
                    this.point.name +': '+ this.y +' fruits';
            } else {
                s = ''+
                    this.x  +': '+ this.y;
            }
            return s;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T23:57:47.753

您可以`series`使用`this.series.someAttr`.
因此，请执行以下操作：

```
formatter: function() {
    var s;
    if (this.point.name) { // the pie chart
        s = this.point.name +' '+ this.y +' fruits';
    } else {
        s = this.series.name + ' : ' +
            this.x  +': '+ this.y;
    }
    return s;
} 
```

[演示](http://jsfiddle.net/rKBjq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:55:59.100

尝试这个：

```
tooltip: {
        formatter: function() {
            var s;
            if (this.point.name) { // the pie chart
                s = ''+
                    this.point.name +': '+ this.y +' fruits';
            } else {
                s = ''+
                    this.series.name  +': '+ this.y+' '+this.x;
            }
            return s;
        }
    } 
```

# cocoa - 从 cocoa 项目中删除了 ViewController.h 和 viewController.m

> ID：12255111
> 
> 赞同：1
> 
> 时间：2012-09-03T23:38:20.227
> 
> 标签：cocoa, uiviewcontroller

我做了移动到垃圾箱选项，现在其他 files.h 无法导入 viewcontroller.h。我如何将它恢复到我的项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:55:15.743

使用查找器，将它们从垃圾箱中移出并与其余源文件一起返回到项目目录，然后在 xCode 中`Right-Click`（或用两指单击触摸板）在一个组上并选择`'Add Files to <Project Name>'`

在源目录中找到文件（应该很容易，对话框将项目中已有的文件显示为灰色）并选中该框`copy files into destination's group folder (if needed)`

确保在`Add to targets`框中突出显示您的目标（不是测试，只是主要的），然后单击`Add`按钮

# command-line - 从命令行授予对 IIS6.0 文件的权限

> ID：12255115
> 
> 赞同：0
> 
> 时间：2012-09-03T23:39:04.603
> 
> 标签：command-line, iis-6, file-permissions

我正在尝试从命令行为 user 授予文件权限`IIS6.0`。

到目前为止，我已经尝试过`icacls /grant ISS_WPG:(RX,W) 'namefile'`，但没有结果。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:31:30.167

解决方案是：

```
icacls FILE /grant USER:(RX,W) 
```

首先是文件名。

# prolog - 在递归/回溯中累积

> ID：12255117
> 
> 赞同：3
> 
> 时间：2012-09-03T23:39:11.583
> 
> 标签：prolog

我遇到了这个初学者问题，我不知道如何解决这个问题。这是我的代码：

```
worker( w1, d1, 2000 ) .    
worker( w2, d1, 2500 ) .
worker( w2, d2, 1000 ) .
worker( w3, d2, 2000 ) .
worker( w4, d2, 4000 ) .

% worker( W, D, S ) means that worker W works in department D and has salary S

department( d1, w2 ) .
department( d2, w4 ) .

% department( D, B ) means that worker B is director of department D(this is not important in this case) 
```

我需要从一个部门获得所有工资的总和，如下所示：

```
?- department_costs( d1 , T ) .
T = 4500;
no
?- department_costs( D, T ) .
D = d1
T = 4500;
D = d2
T = 7000;
no
?- department_costs( d3 , T ) .
no 
```

我试过这个：

```
department_costs( D, T ):- worker( _X, D, T1 ), T is T1. 
```

我明白了：

```
?- department_costs( o1, T ).
T=2000;
T=2500;
no 
```

现在我需要对总成本求和 T+T，但我不知道该怎么做。我想在**不**使用 findall/setof/bagof 的情况下解决这个问题。

**编辑：**

我尝试使用 findall：

```
sumL([], 0).
sumL([G|R], S):-
   sumL(R, S1),
   S is S1 + G.

department_costs( D, T ):-
   findall(P, worker( _X, D, P ), R ),
   sumL(R, S),
   T=S. 
```

它适用于部门成本（d1，T）和部门成本（d2，T），但是当我输入部门成本（D，T）时。我明白了：

```
 department_costs( D, T ).
 O=_h159
 T=11500 
```

它应该是这样的：

```
 ?- department_costs( D, T ) .
 D = d1
 T = 4500;
 D = d2
 T = 7000; 
```

有人可以告诉现在是什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T10:32:23.377

library( [aggregate](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.1%27,swi%28%27/doc/Manual/aggregate.html%27%29%29) ) 旨在解决此类问题。值得学习。

```
department_costs( D, T ) :- aggregate_all(sum(C), worker( _, D, C ), T). 
```

**编辑**

XSB 有“ [Tableling Aggregate Predicates](http://www.cs.sunysb.edu/~sbprolog/manual1/node77.html) ”，可以让你有效地解决你的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T00:27:10.503

想要解决这个问题`findall/3`只会导致重新编码的失败`findall/3`。如果您真的想跳过`findall/3`，请以不同的方式表示您的数据，例如：

```
workers([w1-d1-2000, w2-d1-2500, w2-d2-1000, w3-d2-2000, w4-d2-4000]).
departments([d1-w2, d2-w4]). 
```

在这种格式中，您将能够使用递归和列表处理技术来获得良好的结果。在前一个中，您将不得不使用数据库操作和/或全局变量。不是真正的Prolog-ish。

对于您的编辑，问题在于您使用`findall/3`，这`findall/3`将为您提供您感兴趣的一个变量的所有结果，但不会精确导致这些结果的绑定。

请尝试`bagof/3`：

```
bagof(S, W^worker( W, D, S ), R ). 
```

并查看此[手册页](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.29%27,swi%28%27/doc/Manual/allsolutions.html%27%29%29)（即使它是 SWI，无论如何这些都是 ISO Prolog 谓词）以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T23:59:09.137

有点粗鲁，并收回了使用的每个工人事实，但会成功：

```
department_costs(D,T) :- worker(X,D,T1), retract(worker(X,D,T1)), department_costs(D,T2), T is T1+T2).
department_costs(_,0). 
```

一个破坏性较小的替代方法是传递到目前为止使用的工人列表，验证任何将要使用的工人不在列表中，并将新使用的工人添加到递归调用的列表中。（我想你可以改为在递归调用返回后，在子句末尾重新断言撤回的事实，但这感觉真的很糟糕。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T11:24:12.443

我没有对此进行测试，但想法是你积累了你已经计算过的工人。不过，我真的不喜欢它，如果我为此找到超过几分钟的时间，我相信你可以以一种更具声明性的方式做到这一点，而不会受到邪恶的削减。

```
department_sum(S, D) :- 
        department_sum_agg([], S, D).

department_sum_agg(Workers, S, D) :- 
    worker(X,D,SX), 
    \+ member(X, Workers), !,
    department_sum_agg([X|Workers], SRest, D),
    S is SX + SRest.

department_sum_agg(_, 0, _). 
```

# javascript - 通过链接覆盖 jQuery 循环

> ID：12255122
> 
> 赞同：2
> 
> 时间：2012-09-03T23:39:41.023
> 
> 标签：javascript, jquery

 是否可以通过链接访问 jQuery 循环以覆盖 i 变量？

我见过这样做的例子，但不是在这样的情况下，其中循环（）函数位于变量内：

```
$(document).ready(function() {
    $('div[id^="content-"]').hide();
});

$(window).load(function() {

    var divs = $('div[id^="content-"]').hide(),
        i = 0;

    (function cycle() {

        divs.eq(i).fadeIn(400)
                  .delay(5000)
                  .fadeOut(400, cycle);

        if (typeof window["Stage" + i] != 'undefined')
        {
            window["Stage" + i].destroy();
        }

        i = ++i % divs.length; // increment i, 
                               // and reset to 0 when it equals divs.length
        if (i == 1)
        {
            window["Stage" + i] = new swiffy.Stage(document.getElementById('graph_lines'), swiffyobject);
        }
        else if (i === 0)
        {
            window["Stage" + i] = new swiffy.Stage(document.getElementById('circle_lines'), circleobject);
        }

        window["Stage" + i].start();

    })();

}); 
``` 

[演示链接](http://beta.suissamesser.com/demo2.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T00:01:48.713

如果您询问是否可以全局访问循环，那么简短的答案是

## 不

您的`cycle`函数是私有函数闭包的一部分。您必须使其全球化才能以这种方式工作。但强烈建议我们不要污染全局范围，因此您应该将此函数应用于该闭包内的链接：

```
$(function(){
    var divs = $('div[id^="content-"]').hide();

    var cycle = function() {
        // do the thing although you're using globals etc.
    }

    $("a").click(cycle);
}); 
```

**无论如何，这是执行此操作的方法，但是除非确实**需要它们，否则您必须清理删除全局变量的代码。并了解 jQuery 以及它是如何工作的，不要重复做同样的事情。稍微了解一下就知道我在说什么了。

> **注意**：我不确定您所说的通过链接*覆盖是什么意思。*`a`在我的示例中，我已将其附加到 click 事件，但这可能不是您想要的。你必须更具体。

## 在链接点击时快速运行

我建议您让自己的生活变得轻松，并添加以下链接：

```
<a href="#" class="start-swiffy" data-swiffy="0">Start swiffy 0</a> 
```

并改用以下代码：

```
$(function() {
    var divs = $('div[id^="content-"]').hide();

    divs.each(function(index) {
        $(this).fadeIn(400)
               .delay(5000)
               .fadeOut(400);

        // replaces first if statement
        window["Stage" + index] && window["Stage" + index].destroy();

        if (index === 0)
        {
            window["Stage1"] = new swiffy.Stage(document.getElementById('graph_lines'), swiffyobject);
        }

        if (index === divs.length - 1)
        {
            window["Stage0"] = new swiffy.Stage(document.getElementById('circle_lines'), circleobject);
        }

        window["Stage" + ((index + 1) % divs.length)].start();
    });

    $("a.start-swiffy").click(function(evt) {
        evt.preventDefault();
        window["Stage" + $(this).data("swiffy")].start();
    });
}); 
```

即使我仍然不明白为什么你要做所有这些`div`淡入淡出和移除阶段并以偏移顺序运行它们以便它们从第二个开始而第一个从最后开始？这是我想可以改进的主要部分......

# bash - 用于登录网页的 bash 脚本

> ID：12255124
> 
> 赞同：3
> 
> 时间：2012-09-03T23:39:50.200
> 
> 标签：bash, post, curl, login

我正在尝试登录[此页面](https://campus.fsu.edu)，但我终其一生都无法使其正常工作。当我连接到学校的 wifi 时，我必须登录该站点才能开始会话。

到目前为止，我尝试使用 bash 和 cUrl 来实现这一点，但只是让自己头疼。cUrl 会起作用还是我走错了路？任何帮助是极大的赞赏！

谢谢，

ñ

这是我尝试过的：

```
curl --cookie-jar cjar --output /dev/null http://campus.fsu.edu/webapps/login/

curl --cookie cjar --cookie-jar cjar \
    --data 'username=foo' \
    --data 'password=bar' \
    --data 'service=http://campus.fsu.edu/webapps/login/' \
    --data 'loginurl=http://campus.fsu.edu/webapps/login/bb_bb60/logincas.jsp' \
    --location \
    --output ~/loginresult.html \
        http://campus.fsu.edu/webapps/login/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:31:10.540

有些事情你显然做错了——你的表格看起来像这样：

```
<form onsubmit="return validate_form(this)" method="post" action="https://bb5.fsu.edu/cas/" id="login" AUTOCOMPLETE="off">
<!-- etc -->  
</form> 
```

您需要将请求提交到表单的“操作”URL，并且需要将其设为 POST 请求，而不是对其他 URL 的 GET 请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T13:01:15.777

```
curl -c vh.cookie "http://campus.fsu.edu/webapps/login/bb_bb60/logincas.jsp?username=foor&password=bar"

 curl -b vh.cookie "http://campus.fsu.edu/webapps/login/login.result" 
```

其中[http://campus.fsu.edu/webapps/login/login.result](http://campus.fsu.edu/webapps/login/login.result)是用户通过身份验证后的结束 url

所以最初进行身份验证 - 再次调用 curl 并将 cookie 加载到经过身份验证的 url

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:41:18.533

我设法用python和mechanize做到了这一点。也应该为你工作：

[http://stockrt.github.com/p/handling-html-forms-with-python-mechanize-and-BeautifulSoup/](http://stockrt.github.com/p/handling-html-forms-with-python-mechanize-and-BeautifulSoup/)

您还可以下载 selenium 插件并将您的登录场景导出为 python、ruby 或 java 脚本。下载一些库后，您将获得相同的效果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T13:08:27.707

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLEncoder;
import java.util.List;
import java.util.Map.Entry;
import java.util.Vector;

public class AuthUrl {
    String username="";
    String password="";
    private Boolean error=false;
    private static final String conurl="campus.fsu.edu";
    private static final String  auth_url="http://campus.fsu.edu/webapps/loggedin.htm";

    public AuthUrl() {}

    public AuthUrl( String username, String password) { 
        this.username = username;
        this.password = password;   
    }

    public String Result()  {

    String url = "http://"+conurl+"/webapps/login/bb_bb60/logincas.jsp";
    String charset = "UTF-8";

    StringBuilder sba=new StringBuilder();
    sba.append("Username: "+username+"  ("+conurl+")<br>");
    try {
        String query = String.format("qualifier=%s&username=%s&password=%s",
                URLEncoder.encode(username, charset),
                URLEncoder.encode(password, charset));

        HttpURLConnection authi = (HttpURLConnection) new URL(url + "?" + query).openConnection();
        authi.connect();

        StringBuilder sb = new StringBuilder();
        // find the cookies in the response header from the first request
        List<String> cookies = authi.getHeaderFields().get("Set-Cookie");
        if (cookies != null) {
            for (String cookie : cookies) {
                if (sb.length() > 0) {
                    sb.append("; ");
                }
                // only want the first part of the cookie header that has the value
                String value = cookie.split(";")[0];
                sb.append(value);
            }

        }

        //If authentication passed the Location field will have a value
        //however the user has put in invalid details the Location within header will be null
        List<String> location = authi.getHeaderFields().get("Location");
        if (location == null) {
             error=true;
        } 

        if (error==false) {   

        // build request cookie header to send on all subsequent requests
        String cookieHeader = sb.toString();

        // with the cookie header your session should be preserved
           // Now connect to authenticated url - and show its contents  
        URL regUrl = new URL(auth_url);
        HttpURLConnection regCon = (HttpURLConnection) regUrl.openConnection();
        regCon.setRequestProperty("Cookie", cookieHeader);
        regCon.connect();
        //int rc = regCon.getResponseCode();

        //for (Entry<String, List<String>> header : regCon.getHeaderFields().entrySet()) {
        //    System.out.println(header.getKey() + "=" + header.getValue());
        //}

        BufferedReader br = new BufferedReader(new java.io.InputStreamReader(regCon.getInputStream()));
        String line = null; 
            String searchingfor="";
        while ((line = br.readLine()) != null){
                    // To Parse the results over here logics would be needed such as 
                    //if (line.indexOf("some_string")>-1) { 
                       // searhingfor=line.substring(line.indexOf("Pattern before),line.indexOf("endstring")+4)
                     //where 4 if number of characters end string was.
                    //}
                    //above is commented for now print each line 
            sba.append(line+"<br>");
        }

        }

        }else{
                sba.append("Authentication has failed - credintials did not meet the criteria for username:"+ username+" on url: "+url+ "?" + query);
        }

    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return(sba.toString());
}
} 
```

这是用 java 编写的相同答案，适用于 http https

# ruby-on-rails-3.2 - 在 Rails 中，两个条件都执行块：first_or_create

> ID：12255125
> 
> 赞同：4
> 
> 时间：2012-09-03T23:39:50.827
> 
> 标签：ruby-on-rails-3.2

任何人都知道 Rails 方法可以让我查找现有记录或创建新记录并执行后续代码块？

例子：

```
Model.where(parameters).first_or_create do |m|
  # execute this regardless of whether record exists or not
end 
```

同样，该方法`find_or_create_by`在任何一种情况下都不执行块。

我可以使用`if-else`语句，但这会重复我的代码......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-05T08:49:40.533

我是从 ryan bates[的精彩截屏中摘录的：](http://railscasts.com/episodes/235-devise-and-omniauth-revised)

```
Model.where(parameters).first_or_create.tap do |m|
  # execute this regardless of whether record exists or not
end 
```

（`User#tap`选择用户的地方）我认为这种方式看起来更干净一些，您不必像米沙的回答那样定义另一个帮助方法。两者都工作正常。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T01:27:58.397

根据[API](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-first_or_create)，您示例中的块仅在记录不存在时才会执行。但是您不需要块，也不需要 if-else：

```
m = Model.where(parameters).first_or_create
m.some_method # executes regardless of whether record exists or not 
```

请注意，对对象的某些验证可能已失败，因此`m`可能尚未持久化到数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-17T08:24:34.630

@eric 您需要在关闭块之前保存数据。

```
Model.where(parameters).first_or_create.tap do |m|
   # execute this regardless of whether record exists or not

   m.save
end 
```

# php - 如何修复不处理表单的 PHP 脚本？

> ID：12255128
> 
> 赞同：-1
> 
> 时间：2012-09-03T23:40:02.787
> 
> 标签：php

在我的脚本上，当我单击“更新”按钮时它失败了。基本上，它不会检查输入字段是否正确输入。此外，如果表格填写正确，它实际上不会更新信息。简而言之，处理错误检查和更新代码不起作用。这是我的脚本。

```
<?php
error_reporting (E_ALL ^ E_NOTICE);
session_start();
$userid = $_SESSION['userid7906'];
$username = $_SESSION['username7906'];
$email = $_SESSION['email7906'];
$one = $_SESSION['yes7906'];
$zero = $_SESSION['no7906'];
?>
<!DOCTYPE html>

<html>
<head>
<title>Profile Settings</title>
<meta http-equiv="Content=Type" content="text/html; charset=utf-8" />
<LINK REL=StyleSheet HREF="./css/profile_settings.css" TYPE="text/css" MEDIA=screen>
</head>
<body>
<?php

$info = $_COOKIE['user7906']." <a href='./logout.php'>Log Out</a> <a    href='./memberpage.php'>Home</a> <b><a href='./profile.php?   user=$_COOKIE[user7906]'>Profile</a></b> > Edit <a href='./search.php'>User Search</a> <a   href='./account.php'>Account</a> <br/><hr/>";
$info2 = $_COOKIE['user7906']." <a href='./logout.php'>Log Out</a> <a    href='./memberpage.php'>Home</a> <b><a href='./profile.php?user=$username'>Profile</a></b> >    Edit <a href='./search.php'>User Search</a> <a href='./account.php'>Account</a> <br/><hr/>";
if (isset($_COOKIE['user7906']) && isset($_COOKIE['pass7906']) &&    isset($_COOKIE['email7906'])) {
                        echo $info."<br/>";

                        if (isset($_COOKIE['no7906'])) {
                            header("Location: ./profile.php?user=$_COOKIE[user]");
                        }
                        else { 
                            require('./connect.php');
                            $fgh = mysql_query("SELECT * FROM `users` WHERE   username='$_COOKIE[user7906]'");
                            $abc = mysql_num_rows("$fgh");
                            if ($abc !== 0) {

                                $osu = mysql_fetch_assoc($fgh);
                                $harv = $osu['id'];
                                $usr = $osu['username'];

                                    $et = mysql_query("SELECT * FROM `profiles` WHERE users_id='$harv'");
                                    $elm = mysql_num_rows($et);
                                        if ($elm !== 0) {

                                            $c = mysql_fetch_assoc($et);
                                            $mm = $c['email'];
                                            $bio = $c['about'];
                                            $fnm = $c['first_name'];
                                            $lnm = $c['last_name'];
                                            $lc4 = $c['location'];

                                            echo "<center><b>Profile Settings</b></center><br/><br/>";

                                                    if (isset($_POST['submit']) === true) {
                                                    $value=$_REQUEST['fn'];
                                                    }
                                                    else {
                                                    $value=$fnm;
                                                    }

                                                if (isset($_POST['go']) === true) {
                                                    $value=$_REQUEST['fn'];
                                                    $value2=$_REQUEST['ln'];
                                                    $value3=$_REQUEST['email'];
                                                    $value4=$_REQUEST['about'];
                                                    $value5=$_REQUEST['locate'];

                                                }
                                                else {
                                                    $value=$fnm;
                                                    $value2=$lnm;
                                                    $value3=$mm;
                                                    $value4=$bio;
                                                    $value5=$lc4;
                                                }

                                            ?><center>
                                            <form action='./profile_settings.php' method='POST' name='lp' />
                                            <table>
                                            <tr>
                                                <td>First Name:</td>
                                                <td><input type='text' name='fn' value="<?php echo $value; ?>" /><br/></td>
                                            </tr>
                                            <tr>
                                                <td>Last Name:</td>
                                                <td><input type='text' name='ln' value="<?php echo $value2; ?>" /><br/></td>
                                            </tr>
                                            <tr>
                                                <td>Email:</td>
                                                <td><input type='text' name='email' value="<?php echo $value3; ?>" /><br/></td>
                                            </tr>
                                            <tr>
                                                <td>About:</td>
                                                <td><input type='text' name='about' value="<?php echo $value4; ?>" /><br/></td>
                                            </tr>
                                            <tr>
                                                <td>Location:</td>
                                                <td><input type='text' name='locate' value="<?php echo $value5; ?>" /><br/></td>
                                            </tr>
                                            </table>
                                                <center><input type='submit' name='go' value='Update' /> <?php echo "<a href='./profile.php?user=$_COOKIE[user7906]'>Cancel</a>"; ?></center>
                                            </center></form>

                                            <?php
                                            $go = $_POST['go'];
                                            $fn = $_POST['fn'];
                                            $ln = $_POST['ln'];
                                            $em = trim(strtolower($_POST['email']));
                                            $ab = $_POST['about'];
                                            $lc = $_POST['locate'];

                                            if (isset($go)==='Update') {

                                                if ((!empty($fn)) && (!empty($ln)) && (!empty($em)) && (!empty($ab)) && (!empty($lc)) && (strlen($em) > 6) && (strstr($em, "@")) == false && (strstr($em, ".")) == false) {

                                                    require("./connect.php");
                                                    $update = mysql_query("UPDATE `profiles` SET first_name='$fn' WHERE users_id='$harv' ");
                                                    $update2 = mysql_query("UPDATE `profiles` SET last_name='$ln' WHERE users_id='$harv' ");
                                                    $update3 = mysql_query("UPDATE `profiles` SET email='$em' WHERE users_id='$harv' ");
                                                    $update4 = mysql_query("UPDATE `profiles` SET about='$ab' WHERE users_id='$harv' ");
                                                    $update5 = mysql_query("UPDATE `profiles` SET location='$lc' WHERE users_id='$harv' ");

                                                    echo '<br/>Profile updated successfully';

                                                }
                                                elseif (!isset($_POST)) {
                                                echo '<br/><center>Please fill out this form.</center>';
                                                }
                                                elseif (isset($fn)==='') {
                                                echo '<br/><center>Enter your first name.</center>';
                                                }
                                                elseif (isset($ln)==='') {
                                                echo '<br/><center>Enter your last name.</center>';
                                                }
                                                elseif (isset($em)==='') {
                                                echo '<br/><center>Enter your email.</center>';
                                                }
                                                elseif ((strlen($em) < 7) || (strstr($em, "@")) === false || (strstr($em, ".")) === false) {
                                                echo '<br/><center>Invalid email</center>';
                                                }
                                                elseif (isset($ab)==='') {
                                                echo '<br/><center>Write something about yourself.</center>';
                                                }
                                                elseif (isset($lc)==='') {
                                                echo '<br/><center>Enter your location.</center>';
                                                }
                                                else {
                                                echo '<center>An error has occured.</center>';
                                                }

                                            }

                                        }
                                        else {
                                        header("Location: ./profile.php?user=$_COOKIE[user7906]");
                                        }

                            }
                            else {
                            echo '<center>An error has occured.</center>';
                            }

}

}
elseif(isset($username) && isset($userid) && isset($email)) {
                        echo $username.$info2."<br/>";

                            require('./connect.php');
                            $fgh = mysql_query("SELECT * FROM `users` WHERE username='$username'");
                            $abc = mysql_num_rows($fgh);
                            if ($abc !== 0) {

                                $osu = mysql_fetch_assoc($fgh);
                                $harv = $osu['id'];
                                $usr = $osu['username'];

                                    $et = mysql_query("SELECT * FROM `profiles` WHERE users_id='$harv'");
                                    $elm = mysql_num_rows($et);
                                        if ($elm !== 0) {

                                            $c = mysql_fetch_assoc($et);
                                            $mm = $c['email'];
                                            $bio = $c['about'];
                                            $fnm = $c['first_name'];
                                            $lnm = $c['last_name'];
                                            $lc4 = $c['location'];

                                            echo "<center><b>Profile Settings</b></center><br/><br/>";

                                                    if (isset($_POST['go']) === true) {
                                                        $value=$_REQUEST['fn'];
                                                        $value2=$_REQUEST['ln'];
                                                        $value3=$_REQUEST['email'];
                                                        $value4=$_REQUEST['about'];
                                                        $value5=$_REQUEST['locate'];
                                                    }
                                                    else {
                                                        $value=$fnm;
                                                        $value2=$lnm;
                                                        $value3=$mm;
                                                        $value4=$bio;
                                                        $value5=$lc4;
                                                    }

                                            ?>

                                            <form action='./profile_settings.php' method='POST' name='lp' /><center>

                                            <table>
                                            <tr>
                                                <td>First Name:</td>
                                                <td><input type='text' name='fn' value="<?php echo $value; ?>" /><br/></td>
                                            </tr>
                                            <tr>
                                                <td>Last Name:</td>
                                                <td><input type='text' name='ln' value="<?php echo $value2; ?>" /><br/></td>
                                            </tr>
                                            <tr>
                                                <td>Email:</td>
                                                <td><input type='text' name='email' value="<?php echo $value3; ?>" /><br/></td>
                                            </tr>
                                            <tr>
                                                <td>About:</td>
                                                <td><input type='text' name='about' value="<?php echo $value4; ?>" /><br/></td>
                                            </tr>
                                            <tr>
                                                <td>Location:</td>
                                                <td><input type='text' name='locate' value="<?php echo $value5; ?>" /><br/></td>
                                            </tr>
                                            </table>
                                                <center><input type='submit' name='go' value='Update' /> <?php echo "<a href='./profile.php?user=$username'>Cancel</a>"; ?></td></center>

                                            </center></form>

                                            <?php
                                            $go = $_POST['go'];
                                            $fn = $_POST['fn'];
                                            $ln = $_POST['ln'];
                                            $em = trim(strtolower($_POST['email']));
                                            $ab = $_POST['about'];
                                            $lc = $_POST['locate'];

                                            if (isset($go)==='Update') {

                                                if ((!empty($fn)) && (!empty($ln)) && (!empty($em)) && (!empty($ab)) && (!empty($lc)) && (strlen($em) > 6) && (strstr($em, "@")) == false && (strstr($em, ".")) == false) {

                                                    require("./connect.php");
                                                    $update = mysql_query("UPDATE `profiles` SET first_name='$fn' WHERE users_id='$userid' ");
                                                    $update2 = mysql_query("UPDATE `profiles` SET last_name='$ln' WHERE users_id='$userid' ");
                                                    $update3 = mysql_query("UPDATE `profiles` SET email='$em' WHERE users_id='$userid' ");
                                                    $update4 = mysql_query("UPDATE `profiles` SET about='$ab' WHERE users_id='$userid' ");
                                                    $update5 = mysql_query("UPDATE `profiles` SET location='$lc' WHERE users_id='$userid' ");

                                                    echo '<br/>Profile updated successfully';

                                                }
                                                elseif (!isset($_POST)) {
                                                echo '<br/><center>Please fill out this form.</center>';
                                                }
                                                elseif (isset($fn)==='') {
                                                echo '<br/><center>Enter your first name.</center>';
                                                }
                                                elseif (isset($ln)==='') {
                                                echo '<br/><center>Enter your last name.</center>';
                                                }
                                                elseif (isset($em)==='') {
                                                echo '<br/><center>Enter your email.</center>';
                                                }
                                                elseif ((strlen($em) < 7) || (strstr($em, "@")) === false || (strstr($em, ".")) === false) {
                                                echo '<br/><center>Invalid email</center>';
                                                }
                                                elseif (isset($ab)==='') {
                                                echo '<br/><center>Write something about yourself.</center>';
                                                }
                                                elseif (isset($lc)==='') {
                                                echo '<br/><center>Enter your location.</center>';
                                                }
                                                else {
                                                echo '<center>An error has occured.</center>';
                                                }

                                            }

                                        }
                                        else {
                                        header("Location: ./profile.php?user=$username");
                                        }

                            }
                            else {
                            echo '<center>An error has occured.</center>';
                            }

}
else {
        echo "<center>Please <a href='./login.php'log in</a> for access to this page.</center>";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:46:20.957

```
if (isset($go)==='Update') { 
```

`isset()`返回`true`or `false`，而不是字符串。

# git - 将 localhost web 目录传输到 github 存储库

> ID：12255145
> 
> 赞同：0
> 
> 时间：2012-09-03T23:43:09.913
> 
> 标签：git, repository, push, pull

我在 github.com 创建了一个帐户，我对 git 很陌生。我有 ubuntu，并且在 htdocs 中有一个 web 文件夹。我希望能够提交任何更改并显示在我创建的 github 存储库中。当我尝试

```
 git commit {github url} 
```

它没有出现在 github 网站上。我知道我首先需要将文件夹推送到 git 但是当我尝试推送时没有任何反应。

我按照一些教程在我的计算机上设置了 git，我认为它可以工作，因为它创建了 .git 文件夹。

任何帮助或指向良好 git/github 配置教程的链接将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:45:11.847

假设您已经在 github 上创建了一个空存储库，您需要在将 github添加为*之后*`git push origin`使用将您的提交推送到 github ：*`origin`*

 *```
git add origin https://github.com/user/repo.git 
```

您还可以通过以下方式检查`remote`您拥有的 s：

```
git remote -v 
```

更多供您参考：[添加遥控器](https://help.github.com/articles/adding-a-remote)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:50:14.357

提交时没有 URL 的概念，它是本地操作。您提交更改，然后将它们推送到您的 Github 存储库。

开始使用新的 Github 存储库所需的所有信息都在这里：[https](https://help.github.com/articles/create-a-repo) ://help.github.com/articles/create-a-repo 。*

# c++ - Borland C++ 在没有消息的情况下崩溃

> ID：12255150
> 
> 赞同：1
> 
> 时间：2012-09-03T23:43:25.863
> 
> 标签：c++, crash, borland-c++

我不确定是否有人使用 Borland c++ 3.1，但我必须这样做。

我有一个程序，它实现简单的线程并通过定时器中断更改这些线程的上下文。

我有一个无限循环和 2 个线程来完成它们的工作并在彼此和主线程之间进行更改。他们的工作是产生一些输出，在控制台上写一些东西。问题是每次我运行程序时，都会发生不同的事情。

有时它会工作半分钟，然后就停止写它应该写的东西。写只是停止并且没有错误并且borland不会崩溃。有时它会停止并且 borland 在没有消息的情况下崩溃。有时它会停止并且 borland 崩溃并显示消息“非法指令”有时在它停止之前写入的最后一行是一些不应该在输出中的奇怪字符。

是控制台“满了”，而 borland 的行为很奇怪吗？有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:47:01.067

如果我没记错的话，从中断调用时在 DOS 下写入控制台（或使用文件 I/O）是不安全的。要正确执行此操作，您必须检查称为“DOS 重新进入标志”的内容，并且仅在为零时才写入控制台（请参阅[http://cs.smith.edu/~thiebaut/ArtOfAssembly/CH18/CH18-3\. html](http://cs.smith.edu/~thiebaut/ArtOfAssembly/CH18/CH18-3.html)或搜索网络以获取更多信息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:33:22.113

在真实和虚拟 8086 模式下，程序不受彼此保护。所以，如果你的程序搞砸了，例如：

1.  覆盖不属于它的内存（或不属于它本身的适当线程），包括由于程序或其 ISR 中的堆栈溢出导致的内存损坏
2.  未能在其任何 ISR 中保留（=保存，然后恢复）CPU 寄存器
3.  将硬件状态更改为系统其余部分无法预料的状态
4.  以明显的方式改变其他系统方式的定时器频率

如果它这样做了，那么某些东西崩溃、挂起或以其他方式行为不端也就不足为奇了。

我猜您遇到了上述问题 1 和/或 2。你也可以在那里有一个竞争条件。

不幸的是，如果没有看到您的任何代码，我们将无法提供更多帮助。想想看，这就像通过电话治疗一个新病人。

# backbone.js - amplify.js 和主干.js

> ID：12255152
> 
> 赞同：2
> 
> 时间：2012-09-03T23:43:30.117
> 
> 标签：backbone.js, amplifyjs

最近我有机会观看了 john papa 关于构建单页应用程序的精彩课程。我会喜欢的。它涉及服务器端和客户端应用程序的各个方面。

我更喜欢客户端。在执行期间，mr.papa 在客户端具有类似的结构。例如数据服务、模拟、数据缓存和离线功能，令人印象深刻。经常提到的库之一是 amplify.js

因为在他的工作中，mr.papa 提到了淘汰赛，因为他已经开始在骨干网中挖掘和工作。想知道类似的结构是否适用于主干。或者更准确地说，主干是否也可以从 amplify.js 中受益，或者它已经内置在主干.async 方法的底层？

参考：jonhpapa.net

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:01:31.827

> 骨干是否也受益于 amplify.js

是的，但是您必须覆盖[Backbone.Sync](http://backbonejs.org/#Sync)才能使用[Amplify.js Store API](http://amplifyjs.com/api/store/)提供的客户端持久性。

[Backbone.amplify](https://github.com/dev360/Backbone.amplify)看起来很有希望，但我还没有测试过。

# android - 使用Gallery模拟GridView的水平滚动但滚动表格而不是图像android

> ID：12255153
> 
> 赞同：0
> 
> 时间：2012-09-03T23:43:37.627
> 
> 标签：android

我得出的结论是gridView没有水平滚动。在线解决方案是以多行格式使用图库。

但是，据我了解，图库需要图像文件。（如果我错了，请纠正我。）

我想要一个可以滚动表格（又名网格视图）的解决方法。我基本上是在制作一个我想水平滚动的日历。在垂直滚动显示进入视野的每个额外周时，它不必那么流畅。水平滚动可以简单地逐月滚动。

不过，我想知道 Gallery 是否有某种解决方法？还是画廊绝对需要图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:01:04.927

啊，我是菜鸟。我自己想出来的。这是想要学习如何使用 Gallery 进行操作的人[的链接，但我刚刚遇到 ViewPager，它的功能相同，我相信我的答案会在那里找到。](http://www.programmingmobile.com/2011/08/android-tutorial-gallery-view-without.html)谢谢！

# ios4 - HTML Iphone 应用程序上的谷歌分析

> ID：12255155
> 
> 赞同：2
> 
> 时间：2012-09-03T23:44:14.547
> 
> 标签：ios4, google-analytics, phonegap-plugins

嗨，我刚刚尝试点击此链接：

[逐步让 Google Analytics 在 iOS 上的 PhoneGap 1.2.0 中工作（phonegapalytics）](https://stackoverflow.com/questions/8097015/step-by-set-to-get-google-analytics-working-in-phonegap-1-2-0-on-ios-phonegapal/12255106#12255106)

但在 B 部分第三段最后一行“将 Xcode 中文件夹中的文件拖到 Plugins 文件夹中”。，我无法从哪里得到哪些文件需要拖到哪里？因为当我添加它时，它会自动在 xcode 中获取谷歌分析并显示在项目名称下。

还有一点，`function onDeviceReady()`我的www下的index.html中没有这个功能。它只包含 HTML。

我可以创建一个吗？

# django - django dateTime 的正确格式是什么？

> ID：12255157
> 
> 赞同：16
> 
> 时间：2012-09-03T23:44:33.920
> 
> 标签：django, datetime

我正在编写一个应用程序，并且我使用日期时间选择器来允许用户选择日期和时间。在 javascript 中进行一些格式化后，我留下了这样的 dateTime：

```
2012-09-04 06:00 PM 
```

和 django 抛出和错误说：

```
[u"'2012-09-04 06:00 PM' value has an invalid format. It must be in YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ] format."] 
```

我也试过

```
2012-09-04 06:00PM
2012-09-04 06:00 P.M.
2012-09-04 06:00P.M. 
```

但没有运气。谁能看到我在这里做什么？或者知道 django 正在寻找什么（英文）？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-04T02:52:28.583

正如错误消息所说，它期望`YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ]`，因此以下是有效值：

```
2012-09-04 06:00
2012-09-04 06:00:00
2012-09-04 06:00:00.000000

# w/ optional TZ as timezone. 
2012-09-04 06:00Z # utc
2012-09-04 06:00:00+0800
2012-09-04 06:00:00.000000-08:00 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T20:50:45.780

聊了一圈，我发现没有 AM/PM 输入。我只需要检查我的 dateTimePicker 是否返回 AM 或 PM 后缀，然后调用 time.split(":"); 要拆分小时和分钟，请将小时数从字符串转换为 int，然后添加 12 以将时间转换为 24 小时时间而不是 12 小时时间。他们可能是一种更简单的方法，但这对我有用。

例如：

2012-09-04 下午 06:00

需要是

2012-09-04 18:00

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-14T07:54:50.647

我用了这个`'2012-09-04 06:00:00.000000-08:00'`，效果很好

# javascript - Dart 和第三方 CSS 和 JS 框架

> ID：12255158
> 
> 赞同：2
> 
> 时间：2012-09-03T23:44:36.887
> 
> 标签：javascript, css, web-applications, dart

我正在准备创建我的第一个 Web 应用程序，并且我已经阅读了很多关于[Google Dart](http://www.dartlang.org/)的内容。它看起来是一种非常有趣、令人兴奋的 Web 开发新方法，我强烈考虑在我的应用程序中使用它。

然而，有一个问题我一直无法找到可靠的答案：是否可以在 Dart 中使用 CSS/JS 框架？在这种情况下，我对使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)很感兴趣。我想利用它提供的出色的布局工具、按钮和 javascript 模块。

可以同时使用 Dart 和 Bootstrap 吗？我什至需要使用 Bootstrap 吗？Dart 是否已经提供或可以轻松创建 Bootstrap 提供的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T02:52:26.217

谢谢你的问题。是的，您可以将 Bootstrap 与 Dart 应用程序一起使用。Bootstrap 主要是一组 CSS 预设、模式和样式。有一些 JavaScript 驱动的 Bootstrap 插件可以实现更多交互行为。根据你想要做什么，这些 JavaScript 插件可以独立于你的 Dart 应用程序运行。

Dart 没有捆绑任何类似 Bootstrap 的东西。您可以使用 Dart 来复制 Bootstrap 插件，但没有太多需要这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T06:34:09.680

我创建了小样本。使用引导程序进入 Dart。 [https://github.com/ehr174/dartstrap](https://github.com/ehr174/dartstrap)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-16T10:16:11.240

你可能会考虑[Bootjack](http://blog.rikulo.org/posts/2013/May/General/bootjack-and-dquery/) ——Dart 中的一个 Bootstrap 端口。

# javascript - Rails：尝试在开发模式下“非法”将 adv ruby （每个 + 迭代器）操作嵌入到 javascript（Google Charts API）中

> ID：12255160
> 
> 赞同：0
> 
> 时间：2012-09-03T23:44:37.363
> 
> 标签：javascript, ruby-on-rails, ruby, view, google-visualization

我的应用程序，现在处于生产模式，必须成长并面对这样一个现实，即我的一些视图的开发模式代码，其中我将数据（迭代地）嵌入到 Google Charts API javascript 代码中以获得一些与我的数据重叠的甜蜜地图，将需要认真检修。

代码是这样的：

```
<h1>US Map of Startup Density</h1>

<% i = 0 %>

 <script type='text/javascript'>
   google.load('visualization', '1', {'packages': ['geochart']});
   google.setOnLoadCallback(drawMarkersMap);

   function drawMarkersMap() {
   var data = google.visualization.arrayToDataTable([
    ['Location', 'Startups'],
    <% @locations.count.times do %>
                [<%= "'#{@locations[i].name}', #{@locations[i].d_s}" %>],
         <% i += 1 ;end %>

 ]);

  var options = {
   region: 'US',
   resolution: 'provinces',
   displayMode: 'markers',
   magnifyingGlass: {enable: true, zoomFactor: 9.0},
   colorAxis: {colors: ['green', 'blue']}
 };

  var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
  chart.draw(data, options);
};
</script>
</head>
<body>
<h4>All cities with less than 10 startups have been exempted from this graph.</h4>
 <div id="chart_div" style="width: 900px; height: 500px;"></div> 
```

而且，正如您可能立即注意到的那样，我通过将 ruby​​ 直接嵌入到 javascript 中来犯了几个“禁忌”。当时，我对此一无所知，并且对它甚至起作用感到相当惊讶。但确实如此。现在我想知道如何才能在生产模式下将这张地图提供给大众。因为 javascript 编译（我什至试图在 production.rb 中将其关闭）过程似乎会混淆 javascript 并使 Google 无法读取它。

谢谢参观

*   我考虑过使用 gon gem，但想知道如何考虑到这种复杂程度 --- 我不想只是手动将每条数据作为单独的实例变量放入控制器中......
*   我考虑过尝试用 javascript 处理这个东西，但我真的不知道 javascript。然后是那个 ActiveRecord 调用来处理..
*   我考虑过禁用 javascript 资产编译，但到目前为止它没有工作。不过我可能做错了。我只尝试禁用在 production.rb 中编译的资产。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:20:00.673

我认为最明显的事情是将您的 Locations 资源公开为 API，然后进行 AJAX 调用以将其作为 JSON 加载。然后，您可以遍历该 JSON 对象并从中提取您从 ActiveRecord 获取的所有数据。

因此，在您的 LocationsController 中：

```
class LocationsController < ApplicationController
   respond_to :html, :json

   def index
      respond_with Location.all
   end

   ...
end 
```

这将使您的**Locations**资源响应以 JSON 或 HTML 格式请求数据的调用。我将 HTML 留在了那里，因为我假设您可以从浏览器访问位置列表，如果不能，您可以从**respond_to中删除****:html**。

 **现在您可以使用 jQuery 轻松地从 JavaScript 中提取此位置数据：

```
<script type='text/javascript'>
  google.load('visualization', '1', {'packages': ['geochart']});
  google.setOnLoadCallback(drawMarkersMap);

  function drawMarkersMap() {
    $.ajax({ url: '/locations', dataType: 'json' })
        .done(function(data) {
            // Now you have the same data as before in a JSON object, so you will still need to format it
        }
    );

     var options = {
      region: 'US',
      resolution: 'provinces',
      displayMode: 'markers',
      magnifyingGlass: {enable: true, zoomFactor: 9.0},
      colorAxis: {colors: ['green', 'blue']}
    };

     var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
     chart.draw(data, options);
};
</script> 
```

**ajax**调用以 JavaScript 可以轻松解释的 JSON 格式请求您的 Location 资源。这里还有最后一步，您需要将 JSON 格式的数据转换为 Google Charts 接受的相同格式，但这应该是一个好的开始。

我希望我没有遗漏一些复杂性，但这看起来是一件非常简单的事情。毕竟，这种场景是 Rails 最擅长的事情之一。**

# openerp - 为机会创建序列

> ID：12255163
> 
> 赞同：1
> 
> 时间：2012-09-03T23:46:00.317
> 
> 标签：openerp

我正在使用 Openerp 6.1.1。

我想仅为成为机会的潜在客户创建一个序列，而不是为所有潜在客户创建一个序列。

由于潜在客户和机会都是使用同一张表建模的，因此不清楚如何实现这一点。请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:33:24.290

您可以在对象中添加序列字段。当点击按钮“转换为机会”

您可以将序列分配给此潜在客户。

或者，当您想从机会菜单创建机会时，您覆盖创建方法并在创建方法中检查记录类型，如果类型为“机会”，然后分配记录中的序列。

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T14:59:28.150

我终于得到了这个工作。

覆盖**convert_opportunity()**是不可能的，因为它可能包含一个我无法弄清楚如何将序列传递给的 id 列表。所以我不得不覆盖**_convert_opportunity_data()**方法（虽然不是一个好的选择！）。

```
def create(self, cr, uid, vals, context={}):
    if vals['type']=='opportunity':
        next_seq = self.pool.get('ir.sequence').get(cr, uid, 'crm.lead')
        vals['seq'] = next_seq
    res = super(crm_sequence, self).create(cr, uid, vals, context)
    return res

def _convert_opportunity_data(self, cr, uid, lead, customer, section_id=False, context=None):
    vals = super(crm_sequence, self)._convert_opportunity_data(cr, uid, lead, customer, section_id, context)
    next_eq = self.pool.get('ir.sequence').get(cr, uid, 'crm.lead')
    vals['seq'] = next_seq
    return vals 
```

# ios - 除了“tock”之外，还有其他可用的 iOS 系统声音吗？

> ID：12255164
> 
> 赞同：16
> 
> 时间：2012-09-03T23:46:17.307
> 
> 标签：ios, audio, avaudioplayer

我在我的第一个 iPhone 应用程序上实现了一个替代键盘。我想在按下按钮时播放声音。按下标准键盘时的默认点击声音会很好，但我不知道如何获得那种声音。

在这个答案中，我找到了如何播放“tock”声音：

[在不导入自己的情况下播放系统声音](https://stackoverflow.com/questions/7831671/playing-system-sound-without-importing-your-own)

我让它很容易工作，但它是一个非常响亮的声音。我在 Stack Overflow 和 Xcode 帮助中搜索了“tock”以外的可用 iOS 系统声音，但我找不到它们。

是否有其他内置声音，甚至可能是默认键盘声音，我可以使用？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-15T04:40:27.437

在大约 2 周前发布这个问题之前和之后，我一直在寻找一种方法，让键盘点击声音在我的应用程序中正常工作。我试图实现和理解[Apple 关于自定义输入视图的文档。](http://developer.apple.com/library/IOs/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/InputViews/InputViews.html#//apple_ref/doc/uid/TP40009542-CH12-SW4 "Apple 关于自定义输入视图的文档")我以多种方式扼杀了我的应用程序，试图让它工作并创建了几个测试项目。我试图从网络上的各种其他来源解释如何做到这一点。一切都无济于事。除了最后一个功能，我已经完成了我的应用程序。

[我终于在这个 iPhone Dev SDK 表单问题/帖子](https://web.archive.org/web/20140823194156/http://www.iphonedevsdk.com/forum/iphone-sdk-development/103267-uiinputviewaudiofeedback-not-working.html)的结尾找到了一个简单的答案。最终答案很简单，可以通过这些简单的步骤在几秒钟内完成。

1.  **将“AudioToolbox.framework”链接到您的项目**（单击项目的 Target，选择“Build Phases”并在“Link Binary with Libraries”项下单击 + 按钮并添加框架。

2.  将以下内容添加到要实现点击的类的头文件中：

    ```
     #import <AudioToolbox/AudioToolbox.h> 
    ```

3.  在类的实现文件中添加以下代码行，只要您希望键盘单击声音出现：

    ```
     AudioServicesPlaySystemSound(0x450); 
    ```

而已！它成功了！哈利路亚！

根据 Paul 在另一个论坛中的说法，这有以下缺点：

“键盘按键不会受到 iOS 用户对键盘声音开/关的偏好的影响。”

但是，当我在 iPhone 上调高或调低音量时，或者如果我将 iPhone 静音，键盘咔嗒声确实会上下波动或按预期静音。鉴于我发现不可能按照记录实现键盘点击“UIInputViewAudioFeedback”，我很高兴有任何工作。

PS 如果有人有一个我可以下载、构建和运行在我的 iPhone 上的实际项目的链接，以确切了解如何正确实施：“UIInputViewAudioFeedback”我很乐意看看。但到目前为止，我还没有找到任何关于如何使其工作的分步新手风格说明。

**[2012 年 9 月 30 日更新：]**我很高兴地说，我的应用已使用此方法被应用商店接受。这是：[https ://itunes.apple.com/app/fine-tip-tip-calculator/id563429225](https://itunes.apple.com/app/fine-tip-tip-calculator/id563429225)

...戴尔

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T00:12:24.903

试试看：`UIDevice`_[`playInputClick`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/occ/instm/UIDevice/playInputClick)

```
[[UIDevice currentDevice] playInputClick]; 
```

从文档中：

> 使用此方法播放标准系统键盘点击以响应用户在自定义输入或键盘附件视图中的点击。只有当用户在“设置”>“声音”中启用了键盘点击，并且只有当输入视图本身启用并可见时，才会播放点击。

根据文档，确保`UIInputViewAudioFeedback`在输入视图类中采用协议，并实现`enableInputClicksWhenVisible`return 的委托方法。`YES`

**编辑**- 对于委托方法的实现，请查看[Apple 关于自定义输入视图的文档](https://developer.apple.com/library/archive/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/InputViews/InputViews.html#//apple_ref/doc/uid/TP40009542-CH12-SW1)。

# c# - C#和excel删除行

> ID：12255166
> 
> 赞同：14
> 
> 时间：2012-09-03T23:46:39.787
> 
> 标签：c#, excel

我想从我的表单（在 C# 中）写入一个 excel 电子表格，如果空白则删除某些行。

我可以很好地写入电子表格并保存它，但是假设用户将数据输入到行 a1、a2、a3 和 a4，我现在想删除 a4 和 a29 之间的所有行。

我所需要的只是找出如何删除特定范围的单元格。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-11-07T06:14:20.390

```
// Here is the answers to 
// 1\. Delete entire row - Below rows will shift up
// 2\. Delete few cells - Below cells will shift up
// 3\. Clear few cells - No shifting

using Excel = Microsoft.Office.Interop.Excel;

Excel.Application ExcelApp = new Excel.Application();
                  Excel.Workbook ExcelWorkbook = ExcelApp.Workbooks.Open(ResultFilePath);
                  ExcelApp.Visible = true;
                  Excel.Worksheet ExcelWorksheet = ExcelWorkbook.Sheets[1];

Excel.Range TempRange = ExcelWorksheet.get_Range("H11", "J15");

// 1\. To Delete Entire Row - below rows will shift up
TempRange.EntireRow.Delete(Type.Missing);

// 2\. To Delete Cells - Below cells will shift up
TempRange.Cells.Delete(Type.Missing);

// 3\. To clear Cells - No shifting
TempRange.Cells.Clear(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-04T00:03:49.450

您可以使用范围对象来做到这一点。我在这里假设您使用的是 Excel 互操作。

假设你打开了你的书，然后设置范围然后删除它应该看起来像这样

```
ApplicationClass excel = new ApplicationClass();
//Abrir libro y seleccionar la hoja adecuada aqui
//...

Microsoft.Office.Interop.Excel.Range cel = (Range)excel.Cells[rowIndex, columnIndex];
cel.Delete(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-01T08:08:39.003

你可以使用这个。它的工作...

```
 _Application docExcel = new Microsoft.Office.Interop.Excel.Application { Visible = false };
   dynamic workbooksExcel = docExcel.Workbooks.Open(@"C:\Users\mahmut.efe\Desktop\Book4.xlsx");
   var worksheetExcel = (_Worksheet)workbooksExcel.ActiveSheet;

   ((Range)worksheetExcel.Rows[2, Missing.Value]).Delete(XlDeleteShiftDirection.xlShiftUp);

   workbooksExcel.Save();
   workbooksExcel.Close(false);
   docExcel.Application.Quit(); 
```

有关更多信息，您可以访问[此](http://labs.winshuttle.com/devnet/?p=120)网站

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-06T05:57:03.050

您可以指定一个单元格（例如 A1）并找到包含该单元格的整行作为范围，然后可以删除该行。

```
excel.Worksheet sheet = (excel.Worksheet)excelWorkBook.Sheets["sheet1"];    
excel.Range cells = (excel.Range)sheet.Range["A1", Type.Missing];    
excel.Range del = cells.EntireRow;    
del.Delete(); 
```

上面给出的代码将从 sheet1 中删除第一行

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-13T08:15:36.683

要删除一行，您只需要一行简单的代码，如下所示

```
xlWorkSheet.Rows[NUMBER_ROW].Delete(); 
```

# vbscript - 拆分文本字段搜索特定的文本字符串并保存在多个目录中

> ID：12255167
> 
> 赞同：0
> 
> 时间：2012-09-03T23:47:10.660
> 
> 标签：vbscript

我有一个文本文件，需要根据第 4 列信息中的值进行拆分。该脚本需要根据该列上文本的第一个字符的值拆分文本行，然后拆分文件并将其保存到原始文件名下的指定文件夹（不同）。例如，以数字 1 或 2 开头的任何内容都将保存为文件，以数字 4、5 或 6 开头的任何内容都将保存为另一个文件，依此类推。以下文件示例：

```
0118844 10722     HAWKESBURY VALLEY MOTOR     624G05B    55567191             ROLLER TENSION
0118844 10722     HAWKESBURY VALLEY MOTOR     624G03A    92190654             LOCKING NUT   
0118844 10722     HAWKESBURY VALLEY MOTOR     517A03A    92056367             RADIATOR CAP V6
0118844 10722     HAWKESBURY VALLEY MOTOR     416H04B    92044669             BONNET LOCK
0118844           HAWKESBURY VALLEY MOTOR     213F04D    8972138700           BOLT
0118844           HAWKESBURY VALLEY MOTOR     101B15A    8973628940           THERMOSTAT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:38:22.423

我建议用`Select`声明来区分，因为我认为这更容易理解。我用来管理输出文件的字典。

```
Const ForReading     = 1
Const ForWriting     = 2
Const keyPos         = 47
Const inputFileName  = "input.txt"
Const outputFileName = "input.txt"

outputFolders = Array("foo", "bar")

Sub WriteOutput(data, fldr)
  If Not fso.FolderExists(fldr) Then fso.CreateFolder(fldr)
  If Not outputFiles.Exists(fldr) Then outputFiles.Add fldr, fso.OpenTextFile(fso.BuildPath(fldr, outputFileName), ForWriting, True)
  outputFiles(fldr).WriteLine data
End Sub

Set fso = CreateObject("Scripting.FileSystemObject")
Set outputFiles = CreateObject("Scripting.Dictionary")

Set inputFile = fso.OpenTextFile(inputFileName, ForReading, True)
Do Until inputFile.AtEndOfStream
  line = inputFile.ReadLine
  Select Case Mid(line, keyPos, 1)
  Case 1, 2:
    WriteOutput line, outputFolders(0)
  Case 4, 5, 6:
    WriteOutput line, outputFolders(1)
  End Select
Loop
inputFile.Close

For Each f In outputFiles.Items
  f.Close
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:31:15.510

使用字典来存储区分数字（键）和相应的（打开的）文件（值）。循环输入文件的行；对于每一行：剪切数字，将行写入“数字文件”。不要忘记关闭所有文件。

在代码中：

```
 Const csDir = "..\data\splits"
  Const csInN = "splits.txt"
  Const csInF = "..\data\splits.txt" ' should be: Const csInF = goFS.BuildPath(csDir, csInN)
  Const cnPos = 47
  Dim aSplits   : aSplits       = Array("12", "456")
  Dim dicSplits : Set dicSplits = CreateObject("Scripting.Dictionary")

  If goFS.FolderExists(csDir) Then goFS.DeleteFolder csDir
  goFS.CreateFolder csDir
  Dim nSplit
  For nSplit = 0 To UBound(aSplits)
      Dim sDir : sDir = aSplits(nSplit)
      Dim nPos
      For nPos = 1 To Len(sDir)
          dicSplits(Mid(sDir, nPos, 1)) = nSplit
      Next
      sDir = goFS.BuildPath(csDir, sDir)
      goFS.CreateFolder sDir
      Set aSplits(nSplit) = goFS.CreateTextFile(goFS.BuildPath(sDir, csInN))
  Next

  Dim tsIn : Set tsIn = goFS.OpenTextFile(csInF)
  Do Until tsIn.AtEndOfStream
      Dim sLine : sLine = tsIn.ReadLine()
      Dim sKey  : sKey  = Mid(sLine, cnPos, 1)
      If dicSplits.Exists(sKey) Then
         aSplits(dicSplits(sKey)).WriteLine sLine
      End If
  Loop
  tsIn.Close

  For nSplit = 0 To UBound(aSplits)
      aSplits(nSplit).Close
  Next 
```

# android - Android HttpGet 一半时间抛出 NoHttpResponseException？

> ID：12255168
> 
> 赞同：2
> 
> 时间：2012-09-03T23:47:13.517
> 
> 标签：android, http-get

我一直在测试一个小型嵌入式 Web 服务器[Web server](http://www.parallax.com/Store/Microcontrollers/BASICStampModules/tabid/134/ProductID/710/List/1/Default.aspx?SortField=UnitCost,ProductName)（它正在运行 mike G. 的[multisocket server](http://forums.parallax.com/showthread.php?133268-Contest-Entry-Multi-Socket-Server)）。我正在尝试使用 Eclipse 中的 android 虚拟设备从服务器获取响应，但由于某种原因，服务器有一半时间无法响应。

这是错误的logcat。“on”是服务器成功时响应的字符串。

```
09-03 23:12:54.672: I/System.out(996): on
09-03 23:12:55.989: I/System.out(996): on
09-03 23:12:57.113: D/dalvikvm(996): GC_FOR_MALLOC freed 882K, 53% free 3142K/6663K,           external 1625K/2137K, paused 37ms
09-03 23:12:57.113: W/System.err(996): org.apache.http.NoHttpResponseException: The target server failed to respond
09-03 23:12:57.122: W/System.err(996):  at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:85)
09-03 23:12:57.122: W/System.err(996):  at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)
09-03 23:12:57.122: W/System.err(996):  at   org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:179)
09-03 23:12:57.122: W/System.err(996):  at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
09-03 23:12:57.122: W/System.err(996):  at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
09-03 23:12:57.132: W/System.err(996):  at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279)
09-03 23:12:57.132: W/System.err(996):  at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)
09-03 23:12:57.132: W/System.err(996):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:421)
09-03 23:12:57.132: W/System.err(996):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
09-03 23:12:57.132: W/System.err(996):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
09-03 23:12:57.132: W/System.err(996):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
09-03 23:12:57.132: W/System.err(996):  at com.SS.Main.TestHttpGet.executeHttpGet(TestHttpGet.java:40)
09-03 23:12:57.132: W/System.err(996):  at com.SS.Main.SmartHomeSystemActivity$1.onClick(SmartHomeSystemActivity.java:32)
09-03 23:12:57.132: W/System.err(996):  at android.view.View.performClick(View.java:2485)
09-03 23:12:57.132: W/System.err(996):  at android.view.View$PerformClick.run(View.java:9080)
09-03 23:12:57.142: W/System.err(996):  at android.os.Handler.handleCallback(Handler.java:587)
09-03 23:12:57.142: W/System.err(996):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-03 23:12:57.142: W/System.err(996):  at android.os.Looper.loop(Looper.java:123)
09-03 23:12:57.142: W/System.err(996):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-03 23:12:57.142: W/System.err(996):  at java.lang.reflect.Method.invokeNative(Native Method)
09-03 23:12:57.142: W/System.err(996):  at java.lang.reflect.Method.invoke(Method.java:507)
09-03 23:12:57.142: W/System.err(996):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-03 23:12:57.142: W/System.err(996):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-03 23:12:57.152: W/System.err(996):  at dalvik.system.NativeStart.main(Native Method) 
```

我试图从这个线程做一个重试处理程序

[重试处理程序](https://stackoverflow.com/questions/2052299/httpclient-on-android-nohttpresponseexception-through-umts-3g)

但这似乎并没有解决它（或者我使用不正确）所以我决定尝试继续重新发送请求。这是正在运行的代码，但我觉得这不是一个好方法。当来自PC的浏览器发送请求时，服务器没有问题，但有时会无法响应android浏览器和应用程序仿真。有任何想法吗？

```
 package com.SS.Main;

 import java.io.BufferedReader;
 import java.io.IOException;
 import java.io.InputStreamReader;
 import java.net.URI;

 import org.apache.http.HttpEntityEnclosingRequest;
 import org.apache.http.HttpRequest;
 import org.apache.http.HttpResponse;
 import org.apache.http.NoHttpResponseException;
 import org.apache.http.client.ClientProtocolException;
 import org.apache.http.client.HttpClient;
 import org.apache.http.client.HttpRequestRetryHandler;
 import org.apache.http.client.methods.HttpGet;
 import org.apache.http.impl.client.AbstractHttpClient;
 import org.apache.http.impl.client.DefaultHttpClient;
 import org.apache.http.impl.client.DefaultHttpRequestRetryHandler;
 import org.apache.http.params.HttpProtocolParams;
 import org.apache.http.protocol.ExecutionContext;
 import org.apache.http.protocol.HttpContext;

 public class TestHttpGet {

 public void executeHttpGet() throws Exception {

    BufferedReader in = null;

    try {
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();

        HttpProtocolParams.setUseExpectContinue(client.getParams(), false);

        request.setURI(new URI("http://142.197.135.16:5000/aled.htm?led=on"));

        //HttpResponse response = client.execute(request);

        HttpResponse response = null;

        boolean RetryConnection = true;
        int retrycount = 0;

        //retry request 5 times
        while(RetryConnection == true && retrycount < 5)
        {
            try{
                 response = client.execute(request);
                 RetryConnection = false;
            }catch(IOException e)
            {
                System.out.println("caught");
                retrycount += 1;
            }
        }

        in = new BufferedReader
        (new InputStreamReader(response.getEntity().getContent()));

        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");

        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }
        in.close();

        String page = sb.toString();

        System.out.println(page);
        } finally {
        if (in != null) {
            try {
                in.close();
                } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:39:58.047

原来问题出在服务器上。服务器的设置方式没有足够的时间来处理传入的请求。可以在此链接中找到问题的解决方案。

[Spinneret Web 服务器修复](http://forums.parallax.com/showthread.php?142214-web-server-fails-to-respond-sometimes)

# rpm - RPM - 安装文件

> ID：12255170
> 
> 赞同：1
> 
> 时间：2012-09-03T23:47:20.677
> 
> 标签：rpm, yum, rpmbuild

这是我第一次尝试构建 RPM，所以请原谅这个菜鸟式的问题。:)

我能够构建一个 rpm 并使用 yum OK 部署它，但我无法将文件部署到目标服务器上的正确目录。我只想将数据文件放入目标服务器上的 /tmp 目录中。

```
%install
mkdir -p tmp
cp %_builddir/myfile.dat %_builddir/tmp/myfile.dat

%files
%_builddir/tmp/myfile.dat 
```

当我在目标服务器上 yum 安装 rpm 时，它会将 myfile.dat 放入`%_builddir/tmp/myfile.dat`主目录下。我想把它放在 /tmp

我尝试删除 %files 部分中的 %_builddir，但 rpm 无法构建。

```
%files
/tmp/myfile.dat 
```

我错过了什么？

编辑 - - - -

这是现在有效的代码：

```
BuildRoot:  %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)

%install
mkdir -p $RPM_BUILD_ROOT/tmp
cp $RPM_BUILD_DIR/myfile.dat $RPM_BUILD_ROOT/tmp/myfile.dat

%files
/tmp/myfile.dat 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:59:01.543

涉及三个独立的树，您似乎相互混淆：

*   由表示的构建目录`$RPM_BUILD_DIR`（使用它而不是 可能是最佳实践`%_builddir`）
*   构建根表示为`$RPM_BUILD_ROOT`
*   安装 rpm 的系统上的最终目标文件系统

`%install`应该将文件从第一个复制到第二个，但你的不是 - 这是你的第一个错误，再加上你在错误的目录中`mkdir`创建的事实`tmp`- 它需要在构建根目录中。

`%files`指示第二个中的哪些文件应该打包到 rpm 中，然后在安装 rpm 时最终安装在目标系统上。但至关重要的是，列出的文件`%files`应该*相对于 build root*列出，因此您的第二次尝试`%files`是正确的。如果仍然出现错误，建议您仔细阅读。我还强烈建议您阅读一个很好的 rpm 构建指南，例如：[http ://www.rpm.org/max-rpm/s1-rpm-inside-scripts.html](http://www.rpm.org/max-rpm/s1-rpm-inside-scripts.html)

# php - PHP如何在我的结果的每10行回显一个不同的图像

> ID：12255171
> 
> 赞同：2
> 
> 时间：2012-09-03T23:47:22.290
> 
> 标签：php, mysql, sql, echo, counter

我有一个简单的搜索引擎，它在一个带有 CSS 格式的表格中回显结果，这工作正常，但是，我现在想在每 10 个结果后回显一个不同的图像。

感谢任何可以帮助我的人，因为我已经坚持了几个小时！

这是我的回声输出代码：

```
echo "<table width='50%' style='border-bottom:1px solid #000000;'";
echo "<tr>";
echo "<td>";
echo "<div id='page-wrap'>";
echo "<div class='discounted-item freeshipping'>";

echo "<a href='./img/users/" . $row['category'] . "/" . $row['username'] . "/" . $row['filename'] . "' rel='lightbox'><img src=\"./img/users/" . $row['category'] . "/" . $row['username'] . "/" . $row['filename'] . "\" alt=\"\" width='20%' height='98%' /></a>";

echo "<div class='reasonbar'><div class='prod-title' style='width: 70%;'>" .$row['fname'] . "</div><div class='reason' style='width: 29%;'><b>". $row['firstname'] . " " . $row['surname'] ."</b></div></div>";

echo "<div class='reasonbar'><div class='prod-title1' style='width: 70%;'>" . $row['lname'] . "</div><div class='reason1' style='width: 29%;'>Category: ". $row['category'] . "</div></div>";

echo "<div class='reasonbar'><div class='prod-title2' style='width: 70%;'>Contact:" . $row['contact'] . "</div><div class='reason2' style='width: 29%;'>Price: &pound;". $row['price'] . "</div></div>";

echo "</td>";
echo "</tr>";
echo "</td>";
echo "</tr>";
echo "</table>";
}

}

else
    echo "No results found for \"<b>$search</b>\""; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:49:25.670

您可以使用模数运算符来确定...

```
if ( ! ($i % 10)) {
    // Alternate.
} 
```

如果您没有可用的计数器变量，只需在循环之外声明一个变量并将其设置为`0`并为每次迭代递增。

# jquery - jQuery相当于隐藏连续元素

> ID：12255177
> 
> 赞同：4
> 
> 时间：2012-09-03T23:48:43.903
> 
> 标签：jquery, css, hide, rows, css-tables

我正在构建一个需要隐藏连续行的应用程序。目前我正在使用这个：

```
#mytable tr.collpaserow + tr,
#mytable tr.collpaserow + tr + tr,
#mytable tr.collpaserow + tr + tr + tr {
display: none;
} 
```

这使我可以隐藏多达 3 个连续的行。我想要的是隐藏所有可能的连续行，无论 Jquery 的深度如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:51:24.640

你能试试这个吗？

```
$(".collpaserow").nextAll().hide(); 
```

[http://api.jquery.com/nextAll/](http://api.jquery.com/nextAll/)

# python - numpy/pandas：如何将一系列零和一的字符串转换为矩阵

> ID：12255179
> 
> 赞同：1
> 
> 时间：2012-09-03T23:49:01.890
> 
> 标签：python, numpy, pandas, scikit-learn

我有一个以这种格式到达的数据：

```
[
  (1, "000010101001010101011101010101110101", "aaa", ... ),
  (0, "111101010100101010101110101010111010", "bb", ... ),
  (0, "100010110100010101001010101011101010", "ccc", ... ),
  (1, "000010101001010101011101010101110101", "ddd", ... ),
  (1, "110100010101001010101011101010111101", "eeee", ... ),
  ...
] 
```

在元组格式中，它看起来像这样：

```
(Y, X, other_info, ... ) 
```

归根结底，我需要使用 Y 和 X 训练一个分类器（例如 sklearn.linear_model.logistic.LogisticRegression）。

将一串零和一串变成类似 np.array 的最直接的方法是什么，以便我可以通过分类器运行它？似乎这里应该有一个简单的答案，但我一直无法想到/谷歌一个。

几点注意事项：

*   我已经在使用 numpy/pandas/sklearn，所以这些库中的任何东西都是公平的游戏。
*   对于我正在做的很多事情，将 other_info 列放在 DataFrame 中很方便
*   字符串很长（约 20,000 列），但总数据框不是很高（约 500 行）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T10:55:12.960

由于您主要要求将一串 1 和 0 转换为 numpy 数组的方法，因此我将提供如下解决方案：

```
d = '0101010000' * 2000 # create a 20,000 long string of 1s and 0s
d_array = np.fromstring(d, 'int8') - 48 # 48 is ascii 0\. ascii 1 is 49 
```

就速度而言，这与[@DSM 的](https://stackoverflow.com/a/12255235/709852)解决方案相比是有利的：

```
In [21]: timeit numpy.fromstring(d, dtype='int8') - 48
10000 loops, best of 3: 35.8 us per loop

In [22]: timeit numpy.fromiter(d, dtype='int', count=20000)
100 loops, best of 3: 8.57 ms per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T23:59:57.200

像这样的东西怎么样：

制作数据框：

```
In [82]: v = [
   ....:     (1, "000010101001010101011101010101110101", "aaa"),
   ....:     (0, "111101010100101010101110101010111010", "bb"),
   ....:     (0, "100010110100010101001010101011101010", "ccc"),
   ....:     (1, "000010101001010101011101010101110101", "ddd"),
   ....:     (1, "110100010101001010101011101010111101", "eeee"),
   ....:     ]

In [83]: 

In [83]: df = pandas.DataFrame(v) 
```

我们可以使用`fromiter`or`array`来获得`ndarray`：

```
In [84]: d ="000010101001010101011101010101110101"

In [85]: np.fromiter(d, int) # better: np.fromiter(d, int, count=len(d))
Out[85]: 
array([0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0,
       1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1])

In [86]: np.array(list(d), int)
Out[86]: 
array([0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0,
       1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1]) 
```

可能有一种巧妙的矢量化方式来做到这一点，但我只需将明显的 per-entry 函数应用于值并继续我的一天：

```
In [87]: df[1]
Out[87]: 
0    000010101001010101011101010101110101
1    111101010100101010101110101010111010
2    100010110100010101001010101011101010
3    000010101001010101011101010101110101
4    110100010101001010101011101010111101
Name: 1

In [88]: df[1] = df[1].apply(lambda x: np.fromiter(x, int)) # better with count=len(x)

In [89]: df
Out[89]: 
   0                                                  1     2
0  1  [0 0 0 0 1 0 1 0 1 0 0 1 0 1 0 1 0 1 0 1 1 1 0 1    aaa
1  0  [1 1 1 1 0 1 0 1 0 1 0 0 1 0 1 0 1 0 1 0 1 1 1 0     bb
2  0  [1 0 0 0 1 0 1 1 0 1 0 0 0 1 0 1 0 1 0 0 1 0 1 0    ccc
3  1  [0 0 0 0 1 0 1 0 1 0 0 1 0 1 0 1 0 1 0 1 1 1 0 1    ddd
4  1  [1 1 0 1 0 0 0 1 0 1 0 1 0 0 1 0 1 0 1 0 1 0 1 1   eeee

In [90]: df[1][0]
Out[90]: 
array([0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0,
       1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1]) 
```

# javascript - 如何删除“反转字符顺序”功能？

> ID：12255181
> 
> 赞同：-2
> 
> 时间：2012-09-03T23:49:11.240
> 
> 标签：javascript

如何删除此代码中的功能以反转字符顺序？我想要这个函数做的就是替换所有用“er”估算的元音。

这是 pastebin：[http://pastebin.com/R9e0JRce](http://pastebin.com/R9e0JRce)

```
// JavaScript Document
function flip() {
    var result = flipString(document.f.original.value);
    document.f.flipped.value = result;
}

function flipString(aString) {
    aString = aString.toLowerCase();
    var last = aString.length - 1;
    var result = "";
    for (var i = last; i >= 0; --i) {
        result += derpChar(aString.charAt(i))
    }
    return result;
}

function derpChar(c) {
    if (c == 'a') {
        return 'er'
    }
    else if (c == 'e') {
        return 'er'
    }
    else if (c == 'i') {
        return 'er' 
    }
    else if (c == 'o') {
        return 'er'
    }
    else if (c == 'u') {
        return 'er'
    }
    return c;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:55:20.783

如果您只想替换一组字符，则可以使用正则表达式轻松完成：

```
var str = 'abcdef';
var output = str.replace( /[aeiou]/g, 'er' ); 
```

结果：`erbcderf`

更多信息[在这里](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

# php - 变量中的PHP代码？

> ID：12255184
> 
> 赞同：-2
> 
> 时间：2012-09-03T23:49:26.263
> 
> 标签：php, variables, include

我想将一些 php 应用于变量并想知道如何做到这一点。我正在调整一段编写[PHP 开放关闭时间](http://coryetzkorn.com/blog/php-store-hours-plugin/)的代码，并希望对其进行更改。基本上我希望下面的代码工作......

```
$open_output = '

<span class="label"><?php echo $text_qty; ?></span>

      <input type="text" name="quantity" size="2" value="<?php echo $minimum; ?>" id="qty"/>
      <input type="hidden" name="product_id" size="2" value="<?php echo $product_id; ?>" />
      <a id="button-cart" class="button" title="<?php echo $button_cart; ?>"><span><?php echo $button_cart; ?></span></a> '; 
```

关于如何做到这一点的任何想法？

完整的代码可以在资源中找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:51:35.340

您需要将字符串和变量连接在一起

```
$open_output = '<span class="label">'.$text_qty.'</span>
<input type="text" name="quantity" size="2" value="'.$minimum.'" id="qty"/>
<input type="hidden" name="product_id" size="2" value="'.$product_id.'" />
<a id="button-cart" class="button" title="'.$button_cart.'"><span>'.$button_cart.'</span></a> '; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:33:39.220

这是不对的，但是您可以使用`eval('?>'. $open_output)`. `get_file_contents()`您可以使用函数从变量上的文件加载模板并使用`eval()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:16:51.593

```
$open_output = <<< EOF
<span class="label"><?php echo $text_qty; ?></span>
<input type="text" name="quantity" size="2" value="<?php echo $minimum; ?>" id="qty"/>
<input type="hidden" name="product_id" size="2" value="<?php echo $product_id; ?>" />
<a id="button-cart" class="button" title="<?php echo $button_cart; ?>"><span><?php echo $button_cart; ?></span></a>
EOF;
echo $open_output; 
```

删除 < 和 EOF 之间的空格。

# android - 如何正确实现 Android 的 SharedPreferences？

> ID：12255185
> 
> 赞同：0
> 
> 时间：2012-09-03T23:49:54.403
> 
> 标签：android, sharedpreferences

我想保存输入值，以便在应用程序重新启动时可以调用它们。使用[本教程](http://android-er.blogspot.com/2011/01/example-of-using-sharedpreferencesedito.html)作为指南。我编写了以下代码，但没有成功获取要调用的值。非常感谢您的任何帮助。

保存首选项方法

```
public void SavePreferences(String key, String value){
    SharedPreferences portfoliopreferences = getPreferences(MODE_PRIVATE);
    SharedPreferences.Editor editor = portfoliopreferences.edit();
    editor.putString(key, value);
    editor.commit();
} 
```

保存首选项输入

```
if(users.contains(usernull)){
    pn1 = enterportfolioname.getText().toString();
    denomination1 = denomination;  
    portfoliocurrency1 = portfoliocurrency;
    user1 = new PortfolioRecord(pn1, denomination1+df.format(portfoliovalue1));
    users.remove(usernull);
    users.add(user1);
    portfoliosdelete.add(pn1); 
    adapterdeletetype.notifyDataSetChanged();
    portfoliolist.invalidateViews();
    SavePreferences("U1C", "ýes");
    SavePreferences("PN1", enterportfolioname.getText().toString());
    SavePreferences("DN1", denomination);
    SavePreferences("PC1", "usd");
} 
```

加载首选项

```
public void LoadPreferences(){
    SharedPreferences portfoliopreferences = getPreferences(MODE_PRIVATE);
    String isuser1created = portfoliopreferences.getString("U1C", "");
    if(isuser1created.equals("yes")){           
        String savedportfolioname = portfoliopreferences.getString("PN1", "");
        String saveddenomination = portfoliopreferences.getString("DN1", "");
        String savedporfoliocurrency = portfoliopreferences.getString("PC1", ""); 
        pn1 = savedportfolioname;
        denomination1 = saveddenomination;
        portfoliocurrency1 = currencyUSD;
        user1 = new PortfolioRecord(pn1, denomination1+portfoliovalue1);        
        users.add(user1);
        portfoliosdelete.add(pn1); 
        calculateportfoliovalue1();
        adapterdeletetype.notifyDataSetChanged();
        portfoliolist.invalidateViews();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T23:56:26.490

问题只是“ýes”不等于“yes”：

```
SavePreferences("U1C", "ýes");
...
if(isuser1created.equals("yes")) 
```

所以你永远不会执行这个块内的代码......（改变一个或另一个。）

* * *

您还可以创建一个新的`editor`并在`commit()`每次要保存一个值时运行。在执行时，这比必要的要慢。

你应该保持一个类范围的引用`portfoliopreferences`并且只调用`commit()`一次：

```
SharedPreferences.Editor editor = portfoliopreferences.edit();
editor.putString("U1C", "ýes");
editor.putString("PN1", enterportfolioname.getText().toString());
editor.putString("DN1", denomination);
editor.putString("PC1", "usd");
editor.commit(); 
```

并且您创建一个不使用的字符串：

```
String savedportfolioname = portfoliopreferences.getString("PN1", "");
String saveddenomination = portfoliopreferences.getString("DN1", "");
...
pn1 = savedportfolioname;
denomination1 = saveddenomination; 
```

你可以跳过这些：

```
pn1 = portfoliopreferences.getString("PN1", "");
denomination1 = portfoliopreferences.getString("DN1", ""); 
```

# java - 计算梯子上可能的路径数

> ID：12255193
> 
> 赞同：17
> 
> 时间：2012-09-03T23:51:49.907
> 
> 标签：java, algorithm, fibonacci

我似乎无法想出一个算法来解决以下问题，我尝试使用一系列 for 循环，但它变得太复杂了：

> 梯子有梯子`n`，一个梯子可以用1步或2梯的任意组合爬上梯子。爬梯子有多少种可能的方式？

例如，如果梯子有**3 个步骤**，则可能的路径如下：

*   1-1-1
*   2-1
*   1-2

4个**步骤**

*   1-1-1-1
*   2-1-1
*   1-2-1
*   1-1-2
*   2-2

任何有关如何做到这一点的见解将不胜感激。另外，我正在使用Java。

编辑：我确实会使用小的`n`值，但知道如何使用更大的值肯定会很好。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-03T23:53:46.177

有趣的是，这个问题有一个简单的解决方案。您可以使用递归：

```
public static int countPossibilities(int n) {
    if (n == 1 || n == 2) return n;
    return countPossibilities(n - 1) + countPossibilities(n - 2);
} 
```

每当您遇到此类“棘手”问题时，请记住，解决方案通常非常优雅，并始终检查是否可以通过递归完成某些事情。

**编辑**：我假设您会`n`在这个问题中处理相对较小的值，但如果您处理较大的值，那么上述方法可能需要很长时间才能完成。一种解决方案是使用`Map`将映射`n`到的 a `countPossibilities(n)`- 这样，就不会浪费时间进行您已经完成的计算。像这样的东西：

```
private static Map<Integer, Integer> map = new HashMap<Integer, Integer>();
static {
    map.put(1, 1);
    map.put(2, 2);
}

public static int countPossibilities(int n) {
    if (map.containsKey(n))
        return map.get(n);

    int a, b;

    if (map.containsKey(n - 1))
        a = map.get(n - 1);
    else {
        a = countPossibilities(n - 1);
        map.put(n - 1, a);
    }

    if (map.containsKey(n - 2))
        b = map.get(n - 2);
    else {
        b = countPossibilities(n - 2);
        map.put(n - 2, b);
    }

    return a + b;
} 
```

试试这个`n = 1000`。第二种方法实际上比第一种方法快几个数量级。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-08T13:59:33.533

这实际上与[斐波那契数](http://en.wikipedia.org/wiki/Fibonacci_number)列密切相关，正如迄今为止在其中一条评论中仅简要提到的那样：每一步`n`都可以从下面的两个步骤（`n-2`）或下面的一个步骤（`n-1`）到达，因此达到的可能性数量该步骤是达到其他两个步骤的可能性的总和。最后，只有一种可能到达第一步（也是第零步，即留在地面上）。

此外，由于 step 的可能性`n`数量仅取决于 step`n-1`和的结果`n-2`，因此没有必要将所有这些中间值存储在映射或数组中——最后两个就足够了！

```
public static long possForStep(int n) {
    // current and last value, initially for n = 0 and n = 1
    long cur = 1, last = 1;
    for (int i = 1; i < n; i++) {
        // for each step, add the last two values and update cur and last
        long tmp = cur;
        cur = cur + last;
        last = tmp;
    }
    return cur;
} 
```

这不仅大大减少了代码量，而且在时间和空间上的复杂度为*O(n)*，空间上的复杂度为 O(1)，而*存储*所有中间值时的时间*和空间上的复杂度为 O(n* *)* .

 *然而，由于即使类型会在接近 100`long`时快速溢出，所以*O(n)*的空间复杂度并不是真正的问题，所以你也可以使用这个更容易阅读的解决方案。`n`

 *```
public static long possForStep(int n) {
    long[] values = new long[n+1];
    for (int i = 0; i <= n; i++) {
        // 1 for n==0 and n==1, else values[i-1] + values[i-2];
        values[i] = (i <= 1) ?  1 : values[i-1] + values[i-2];
    }
    return values[n];
} 
```

*更新：*请注意，这与斐波那契数列很接近，但并不完全相同，斐波那契数列从 开始`0, 1, 1, 2, 3,...`，`1, 1, 2, 3, 5, ...`即`possForStep(n) == fibonacci(n+1)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T23:55:33.760

我会使用动态编程，每次都解决梯子短 1 级或 2 级的问题。

```
def solveLadder(numOfRungs):
  if numOfRungs<=2:
    return numOfRungs
  return solveLadder(numOfRungs-1)+solveLadder(numOfRungs-2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-19T14:10:53.390

这是斐波那契数列。您可以使用尾递归递归优雅地解决它：

```
 let ladder n =
        let rec aux n1 n2 n =
            if n=0 then (n1 + n2)
            else aux n2 (n1+n2) (n-1)
        aux 1 1 (n-2) 
```

更容易理解的非尾递归代码是：

```
 let rec ladder n =
        if n<=2 then n
        else ladder (n-1) + ladder (n-2) 
```

您可以轻松地将其转换为 Java。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-09-08T14:01:58.343

1.  项目清单

这是一个简单的斐波那契数列，如果我们可以采取的步数是 1 或 2

*   楼梯数量

    1------------------1

    2-----------------2

    3-----------------3

    4-----------------5

    5-----------------8

    6-----------------13

等等**

# html - 将贝宝下拉列表更改为可点击的图像

> ID：12255195
> 
> 赞同：0
> 
> 时间：2012-09-03T23:52:34.267
> 
> 标签：html, css, forms, paypal

下拉菜单用于我的贝宝按钮：

```
<input type="hidden" name="on0" value="Type">Type of sauce <br />
<select name="os0">
<option value="Select a type">-- Select a type --</option>
<option value="Red">Red sauce</option>
<option value="Green">Green sauce</option>
</select> <br /> 
```

我可以将此下拉列表更改为图像吗？所以用户选择图像而不是从下拉列表中选择一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:42:40.997

您将需要在 JQuery 中执行此操作；

[http://www.marghoobsuleman.com/jquery-image-dropdown](http://www.marghoobsuleman.com/jquery-image-dropdown)

**但**我不确定它会如何影响 PayPal，所以首先在 PayPals 沙盒模式下试运行。

您可以尝试在 CSS 中添加背景图像，但我认为这在跨浏览器的可接受性方面相当有限。

有关其他信息，请参见此处： [将带有选项的图像放入下拉列表中](https://stackoverflow.com/questions/4941004/putting-images-with-options-in-a-dropdown-list)

# html - 在 HTML 表单或输入中隐藏边框

> ID：12255198
> 
> 赞同：8
> 
> 时间：2012-09-03T23:53:11.580
> 
> 标签：html, forms, input

有人知道如何使用 Form 或 Input 标签在 HTML 中隐藏边框吗？

我的代码如下：

```
<form name="timerform">
    Your session will expired in
    <input type="text" name="clock" size="7" value="5:00">
</form> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-04T00:03:00.870

你也可以使用

```
input[type="text"] { border: none } 
```

这在您有其他输入类型时很有用，即`type="submit"`IE < 8 不支持类型。

用 type检查[**this**](http://jsfiddle.net/fRTPu/)和[**this without type**](http://jsfiddle.net/fRTPu/1/)。

**更新：**您也可以使用如下

```
<input style="border:none" type="text" name="clock" size="7" value="5:00"> 
```

[**更新了演示**](http://jsfiddle.net/fRTPu/5/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T23:55:39.720

在 CSS 中设置样式。CSS 可以在网页的 HEAD 部分内联应用...

```
<head>
    <style type="text/css">
      input { border: none }
      /* other style definitions go here */

    </style>
</head>
<body>
  <!-- your HTML code below... --> 
```

或者在你的情况下可能是最简单的：

```
<form name="timerform">
    Your session will expired in
    <input type="text" name="clock" size="7" value="5:00" style="border:none" />
</form> 
```

取决于你想用这个页面做多少。进一步阅读：[http ://www.w3schools.com/css/css_howto.asp](http://www.w3schools.com/css/css_howto.asp)

# c++ - 游戏演员的剧本

> ID：12255199
> 
> 赞同：2
> 
> 时间：2012-09-03T23:53:36.353
> 
> 标签：c++, scripting, lua, game-engine, actor

我想为我的模型/演员添加一些脚本。当加载新模型或更改脚本时，参与者会做出反应。

现在，我有一个基本 Lua 类，例如，它有一个 Update() 函数，每个模型/演员都应该重载这个函数。但是如何实施呢？主要问题是每个模型都需要一个唯一的类名称，...

1.  我正在考虑一个表，其键值为 actorID(unique) 并且值将是从基类继承的类，但是当脚本重新加载时有点困难。

    `Objects[ActorID] = Model(paramater)`

    `Objects[ActorID].Update = function() print("Update: actor 1") end`

2.  也许也可以为每个参与者创建一个新的 lua 状态。

我从 Leadwerks 引擎获得了灵感：[http ://www.youtube.com/watch?v=z-EuS1EYk8o](http://www.youtube.com/watch?v=z-EuS1EYk8o)

如果有人知道一本关于游戏引擎脚本的好书，请告诉我

## 我想我明白了：

这是一些伪代码：

OnNewActorCreated:

```
//Add actor
Objects[param.ID] = createClass(baseclass)

//Check if this actor has a script to run.
if param.hasScript then

   //Add the new ID to the script
   Scripts[param.filename][param.ID]

   Entity = Objects[param.ID]

   doFile(param.filename)

   Entity = nil

end 
```

OnFileChanged：

```
foreach id in Scripts[changedfile] do

    Entity = Objects[id]

    dofile(changedfile)

    Entity = nil

end 
```

示例脚本：

```
//check if Entity is valid
if not Entity then
   print("[Error] Entity is invalid")
else   
    function Entity:Update() 
        print(self.name)
     end
end 
```

可以工作;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:51:25.243

youtube 视频中引擎的工作方式不依赖于重载的更新函数。它们具有基类的原因是为它们的对象提供默认行为和公共接口，但与实际更新任何内容无关。

他们正在使用操作系统提供的功能来侦听文件更新（有关更多信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/1083372/listening-to-file-changes-in-c-c-on-windows)），然后只需在游戏的 lua_State 中执行脚本。由于脚本仅修改类型定义（表和元表），因此当您重新加载脚本（通过简单的 luaL_dofile 或我认为的等效文件）时，新定义会覆盖旧定义，并且 lua 会愉快地使用更新的行为。如果您真的眯着眼睛看视频在编辑器中显示的代码，您会注意到它们只是定义函数，而不是运行 Update 方法。

最后一点 - 如果您为每个参与者创建新的 lua_States，那么您将失去在 Lua 中在它们之间自由传递事物的能力，并且必须编写 C++ 代码来手动在两个（或更多）lua_States 之间传递数据。

编辑：关于从公共基础对象继承：修改其元表将改变所有对象的行为，因此我们需要防止这种情况发生。一种方法是在实体脚本周围加上防止修改实际通用元表的措施。在加载脚本之前，我们保存对基本元表的引用并将其替换为脚本可以使用的副本。

通过这种方式，脚本不需要创建自己的元表，也不需要知道引擎的其余部分将如何引用它。相反，它只使用实体之一。一旦脚本完成定义它的派生行为，我们可以给它的实体副本一个新名称（一个基于脚本文件的名称、世界对象的名称等）并将实体恢复到原始引用。

除了上述之外，我们还获得了不通过不同更新持久化更改的额外好处。每次我们想在运行时更改脚本时，我们都会重复该过程，并且可以确信，如果在之前的更新中添加了某些内容，那么在我们执行删除它的更新后它不会保留。如果我们只是让脚本覆盖元表，那么如果不将它们显式设置为 ，我们就无法删除函数和成员`nil`。

# php - 我正在尝试让结果页面根据表单字段中的内容显示数据库信息

> ID：12255201
> 
> 赞同：0
> 
> 时间：2012-09-03T23:53:49.503
> 
> 标签：php, mysql, database

我需要使用表单来查询数据库来解决错误。我遵循了一个教程，它看起来有一些错误

[http://bite-hard.com/pitmatch/pm.html](http://bite-hard.com/pitmatch/pm.html)

我似乎无法显示结果

形式：

```
<form name="form1" method="get" action="results.php">
<table width="300" border="0">
<tr>
<td width="130">Age</td>
<td width="170"><input name="name" type="text" id="name" value= "<?php echo $_GET['name'] ?>"></td>
</tr>
<tr>
<td>State</td>
<td><select name="location" id="location">
<option>Select</option>
<option value="Co">Co</option>
<option value="Fl">Fl</option>
<option value="Il">Il</option>

</select></td>
</tr>
<tr>
<td>City</td>
<td><input name="city" type="text" id="city"></td>
</tr>
</table>
</form> 
```

结果页面：

```
<?
$hostname = "localhost"; // Our DB server.
$username = "bitehard_gdub"; // The username you created for this database.
$password = "reakwon"; // The password you created for the username.
$usertable = "dogs"; // The name of the table you made.
$dbName = "bitehard_pitmatch"; // This is the name of the database you made.
 //if there is a search term
if(isset($_GET['name']) && !empty($_GET['name']))
{

//REMEMBER TO CONNECT TO DATABASE!

mysql_connect($hostname, $username, $password) or die(mysql_error());
mysql_select_db("$dbName") or die(mysql_error());

//**EDIT TO YOUR TABLE NAME, ECT.

$t = mysql_query("SELECT city, state, age FROM dogs WHERE name LIKE '%" .       $_GET['name'] . "%'");
if(!$t) die(mysql_error());

$a = mysql_fetch_object($t);
$total_items = mysql_num_rows($t);
$limit = $_GET['limit'];
$type = $_GET['type'];
$page = $_GET['page'];
$name = urlencode($_GET['name']);

//set default if: $limit is empty, non numerical, less than 10, greater than 50
if((!$limit) || (is_numeric($limit) == false) || ($limit < 10) || ($limit > 50)) {
$limit = 10; //default
}
//set default if: $page is empty, non numerical, less than zero, greater than total    available
if((!$page) || (is_numeric($page) == false) || ($page < 0) || ($page > $total_items)) {
$page = 1; //default
}

//calcuate total pages
$total_pages = ceil($total_items / $limit);
$set_limit = $page * $limit - ($limit);
echo $limit;
//query: **EDIT TO YOUR TABLE NAME, ECT.

$q = mysql_query("SELECT city, state, age FROM dogs WHERE name LIKE '%" .  $_GET['name'] . "%' LIMIT $set_limit, $limit");
if(!$q) die(mysql_error());
 $err = mysql_num_rows($q);
 if($err == 0) die("No matches met your criteria.");

 //Results per page: **EDIT LINK PATH**
 echo("
 <a href=search10.php?cat=$cat&amp;limit=10&amp;page=1&amp;name=".$name.">10</a> |
 <a href=search10.php?cat=$cat&amp;limit=25&amp;page=1&amp;name=".$name.">25</a> |
 <a href=search10.php?cat=$cat&amp;limit=50&amp;page=1&amp;name=".$name.">50</a>");

 //show data matching query:
 while($code = mysql_fetch_object($q)) {
 echo("<BR>");
 echo("<BR>");
 echo("name: ".$code->Age."<BR>");
 echo("city: ".$code->city."<BR>");
 echo("state: ".$code->state."<BR>");
 }

 $cat = urlencode($cat); //makes browser friendly

 //prev. page: **EDIT LINK PATH**

 $prev_page = $page - 1;

 if($prev_page >= 1) {
 echo("<b>&lt;&lt;</b> <a href=search10.php?cat=$cat&amp;limit=$limit& amp;page=$prev_page&amp;name=".$name."><b>Prev.</b></a>");
 }

 //Display middle pages: **EDIT LINK PATH**

 for($a = 1; $a <= $total_pages; $a++)
 {
 if($a == $page) {
  echo("<b> $a</b> | "); //no link
 } else {
 echo(" <a href=search10.php?cat=$cat&amp;limit=$limit&amp;page=$a&amp;name=".$name.">  $a </a> | ");
 }
 }

 //next page: **EDIT THIS LINK PATH**

  $next_page = $page + 1;
  if($next_page <= $total_pages) {
  echo("<a href=search10.php?cat=$cat&amp;limit=$limit&amp;page=$next_page&        amp;name=".$name."><b>Next</b></a> &gt; &gt;");
  }

  }//end of the if statement

  //all done ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:51:24.147

首先，您不能在 HTML 表单中使用 $_GET['']。

```
<td width="170"><input name="name" type="text" id="name" value= "<?php echo $_GET['name'] ?>"></td> 
```

$_GET 仅在选择“提交”按钮并运行 results.php 后才相关。这就是您的字段值显示的原因： "?php echo $_GET['name'] ?"

要连接到数据库，请尝试以下语法：

```
$con = mysql_connect($hostname, $username, $password);

if (!$con){die('Could not connect:' . mysql_error());}

mysql_select_db($dbName, $con); 
```

看看那里的基本语法 - 很多示例代码都缺少大括号 { & } - 特别是在 IF 语句周围。[检查这些的 PHP 手册。](http://php.net/manual/en/control-structures.if.php)

您还可能希望将下一部分包含在“else”语句中：

```
if(!$t){die(mysql_error());}
else { $a....etc } 
```

我也看不到任何名称为“限制”、“类型”或“页面”的字段 - 所以我不确定您希望从哪里获得这些结果。

还有很多事情要做，所以我暂时先讲到这里——阅读与 mysql_query() 相关的其他问题，看看你是否能找到一些答案。

最后一点让我感到困惑：您在 IF 语句中使用以下方法测试数字是否为数字：

```
...is_numeric($limit) == false || ($page < 0)... 
```

您正在测试一个不是数字的变量，然后测试它是否小于零 - 您肯定想要 is_numeric($limit) == true 吗？

让我知道我的建议是如何发挥作用的，以及您是否在其他地方找到了您需要的答案。

# php - 在 Windows x64 上为 PHP 安装 WSO2 Web 服务框架

> ID：12255202
> 
> 赞同：0
> 
> 时间：2012-09-03T23:54:11.843
> 
> 标签：php, web-services, wamp, 64-bit, wso2

我在 Windows 7 上使用 WampServer ( PHP 5.3.8, Apache 2.2.21, 64-Bit ) 并尝试安装“WSO2 Framework for PHP 2.1.0” (wso2-wsf-php-bin-2.1.0-win32 ) 完全按照文档中的说明。但不幸的是我没能成功。我不断收到这个错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library
    'c:/_wamp/bin/php/php5.3.8/ext/wsf.dll' -
     %1 is not a valid Win32 application 
```

PHP 工作正常，但在 wsf 上没有成功。

有什么建议么？

PS。我认为 php 无法加载 dll，因为它是 32 位的，但我找不到任何 64 位二进制文​​件。

# touch - Windows 8 触摸切换

> ID：12255203
> 
> 赞同：3
> 
> 时间：2012-09-03T23:54:34.993
> 
> 标签：touch, windows-8

使用数字化笔时通常需要禁用触摸输入，以避免例如手放在屏幕上的“噪音”。在 Windows 7 中存在一种编程解决方案来禁用触摸（但保持笔）输入，这会更改 TouchGate 注册表值并广播系统消息；似乎后者在 Windows 8 中失败了。

有谁知道如何更新代码/Windows 8 的替代解决方案（请注意，我的系统不允许我通过控制面板 GUI 禁用触摸输入）。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace Touch_Toggle
{
    class Program
    {
        static void Main(string[] args)
        {
           Microsoft.Win32.RegistryKey regKey = Microsoft.Win32.Registry.CurrentUser;
           regKey = regKey.OpenSubKey(@"Software\Microsoft\Wisp\Touch", true);
           string currKey = regKey.GetValue("TouchGate").ToString();
           if (currKey == "1")
              regKey.SetValue("TouchGate", 0x00000000);
           else
              regKey.SetValue("TouchGate", 0x00000001);
           regKey.Close();
           User32Utils.Notify_SettingChange();
        }

        internal class User32Utils
        {
            #region USER32 Options
            static IntPtr HWND_BROADCAST = new IntPtr(0xffffL);
            static IntPtr WM_SETTINGCHANGE = new IntPtr(0x1a);
            #endregion

            #region STRUCT
            enum SendMessageTimeoutFlags : uint
            {
                SMTO_NORMAL = 0x0000,
                SMTO_BLOCK = 0x0001,
                SMTO_ABORTIFHUNG = 0x2,
                SMTO_NOTIMEOUTIFNOTHUNG = 0x0008
            }
            #endregion

            #region Interop

            [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
            static extern IntPtr SendMessageTimeout(
                IntPtr hWnd,
                uint Msg,
                UIntPtr wParam,
                UIntPtr lParam,
                SendMessageTimeoutFlags fuFlags,
                uint uTimeout,
                out UIntPtr lpdwResult
            );
            #endregion

            internal static void Notify_SettingChange()
            {
                UIntPtr result;
                SendMessageTimeout(
                    HWND_BROADCAST, 
                    (uint)WM_SETTINGCHANGE,
                    UIntPtr.Zero, 
                    UIntPtr.Zero,
                    SendMessageTimeoutFlags.SMTO_NORMAL, 
                    1, 
                    out result
               );
            }
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:30:17.537

在其他地方找不到答案后，另一种方法是使用 PowerShell 脚本切换适当的设备（如果它与笔不同）。请注意，我没有测试过这个解决方案，因为我不再希望使用 Windows 8。

您可能需要通过组策略（管理模板 < Windows 组件 < Windows PowerShell）在本地计算机上启用 PowerShell 脚本执行。

首先，为您的机器下载一份“devcon.exe”（来自 Microsoft）。假设“devcon.exe”在同一个目录中，下面的脚本然后使用这个命令来达到预期的效果。

```
$devid = "HID\WACOMVTHID&Col03"

$status = .\devcon status $devid | Select-String "running"

if($status -eq $null) {
  write-host "Enabling touch"
  .\devcon enable $devid
} else {
  write-host "Disabling touch"
  .\devcon disable $devid
} 
```

“devid”参数可以作为设备属性中的“硬件 ID”之一找到。

# c# - ViewState MAC 解密

> ID：12255205
> 
> 赞同：0
> 
> 时间：2012-09-03T23:55:11.333
> 
> 标签：c#, asp.net

我似乎经常遇到这个问题。我每天都会收到一堆由 ELAMH 记录的错误，其中包含以下内容：

```
System.Web.HttpException (0x80004005): Validation of viewstate MAC failed. If this application is hosted by a Web Farm or cluster, ensure that <machineKey> configuration specifies the same validationKey and validation algorithm. AutoGenerate cannot be used in a cluster. ---> System.Web.UI.ViewStateException: Invalid viewstate. 
```

据我所知，MAC 用于防止用户将 HTML 或 Javascript 注入到诸如标签（不编码 HTML）之类的控件中。

它始终在同一页面上，并且每次使用不同的 IP。起初我认为这是一次黑客攻击，但现在我认为这是一个编码问题。我设置了**machineKey**和**decryptionKey**。

还有其他建议吗？

# c# - ASP.NET 获取 twitter RSS 网名

> ID：12255207
> 
> 赞同：0
> 
> 时间：2012-09-03T23:55:18.983
> 
> 标签：c#, asp.net

我想知道是否可以从 twitter RSS 中删除屏幕名称当前格式是这样的

```
<item>
    <title>USERNAME: blahblahblah </title>
    <description>USERNAME: blahblahbla x5 blahblahbla x10 blahblahbla x15</description>
    <pubDate>Mon, 20 Jan 2012 12:00:00 +0000</pubDate>
    <guid>http://twitter.com/USERNAME/blahblahbla </guid>
    <link>http://twitter.com/USERNAME/blahblahbla </link>
    <twitter:source>please ignore here :-) </twitter:source>
    <twitter:place/>
 </item> 
```

有什么方法可以获取用户名，例如从“描述”标签中获取冒号前的文本（用户名）？

我对 ASP.NET 很陌生，感谢您提供一些详细信息

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:07:56.867

这个 XPath 表达式应该得到你想要的：

```
<%#XPath("substring-before(description, \":\")")%> 
```

在这里，我假设 XMLDatasource 看起来像：

```
<asp:XmlDataSource
     runat="server"
     ID="XmlDataSource1"
     XPath="item" 
     DataFile="myfile.xml" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T00:28:03.903

您可以使用正则表达式：

```
string InnerText = "USERNAME: blahblahblah";

Match match = Regex.Match(InnerText, "^(.*):");
string username;
if (match.Success)
{
    username = match.Groups[1].Value;
} 
```

# c - C 语法 /AVR 头文件

> ID：12255218
> 
> 赞同：1
> 
> 时间：2012-09-03T23:56:38.130
> 
> 标签：c, bit-manipulation, microcontroller, avr

我试图理解[这段](https://sites.google.com/site/hackskunk/home/attiny85-hacks/motion-detector)代码

但是我无法理解这部分代码。

```
#define cbi(sfr, bit) (_SFR_BYTE(sfr) &= -_BV(bit))
#define sbi(sfr, bit) (_SFR_BYTE(sfr) |= _BV(bit)) 
```

`sbi`并且`cbi`稍后在代码中用作

```
void system_sleep()
{
  sbi(MCUCR,PUD);                                  //Disables All Internal Pullup Resistors
  sbi(GIMSK,PCIE);                                   //Enable Pin Change Interrupts Interrups
  sbi(PCMSK,PCINT0);                              //Changes Interrupt to PIN1 (PCINT1) 
  cbi(ADCSRA,ADEN);                              //switch Analog to Digital Converter OFF
  cbi(MCUCR,SM0);                                  //Power Down Mode
  sbi(MCUCR,SM1);                                  //Power Down Mode
  sbi(MCUCR,SE);   //sleep Mode Power down enable (Sleep_enable(); should set this-- not tested yet)
  sleep_enable();                      //Sets the Sleep Enable bit in the MCUCR Register (SE BIT)
  sleep_mode();                                       //sleep begins here
  sleep_disable();                                     //Coming out of sleep
  sbi(ADCSRA,ADEN);                             //switch Analog to Digital Converter ON
  cbi(MCUCR,PUD); //Enables Pullup Resistors Again 
 } 
```

代码是用于`ATtiny85`，我阅读了数据表，我知道所有这些类似`MCCUR`等`ADCSRA`都是寄存器。它还指出有两种指令`SBI`和`CBI`.

我还阅读了一些关于使用 C 进行微控制器编程的教程，并了解每个寄存器都有`8`位。这些位中的每一个都可以使用针对不同功能的编程来设置。此外`PUD`，`PCIE`这些寄存器的不同位是在`system_sleep`函数中设置的。所以我明白`system_sleep`函数在做什么，它正在设置寄存器中的位。

我唯一无法理解的部分是

```
#define cbi(sfr, bit) (_SFR_BYTE(sfr) &= -_BV(bit))
#define sbi(sfr, bit) (_SFR_BYTE(sfr) |= _BV(bit)) 
```

数据表中没有类似`_SFR_BYTE`或的内容`_BV`。我查看了 AVR/libc 头文件，在那里我发现`_BV`但不确定它在做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:31:48.533

宏的名称应该会给您一些提示。`cbi`代表`Clear Bit`和`sbi`代表`Set Bit`。`cbi(sfr, bit)`清除寄存器中指示的`bit`位数`sfr`。类似的解释`sbi`。

如果你有整个项目，你可以搜索 和 的`_SFR_BYTE`定义`_BV`。但从本质上讲，它们大致转化为

```
#define  cbi(sfr, bit)   ((sfr) &= ~(1 << (bit)))

#define  sbi(sfr, bit)   ((sfr) |= (1 << (bit))) 
```

阅读有关[位掩码的](http://kineticsandelectronics.com/node/104)更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T11:34:12.440

```
#define _BV(bit)       (1 << (bit))
#define _SFR_BYTE(sfr) _MMIO_BYTE(_SFR_ADDR(sfr)) 
```

以第一个`_BV`为例，`1<<0` 您可以只编写`_BV(0)`. 第二个`_SFR_BYTE`使用`_MMIO_BYTE`宏从寄存器 sfr 获取数据，该寄存器可以是 MCUCR 或 ADCSRA 或任何 8 位 IO 寄存器。

有关详细信息，请参阅[avr/sfr_defs.h](http://www.nongnu.org/avr-libc/user-manual/sfr__defs_8h_source.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-10T22:13:26.993

可以使用 in 和 out 指令读取/写入从 0x00 到 0x1F 的 AVR ATMega 寄存器，此外还有适用于这些寄存器的特定指令。这些寄存器也可以使用内存指令读取。在这种情况下，这些寄存器地址必须取从 0x20 到 0x3F 的值。

宏 __SFR_xxxx 考虑了这种行为。

这些是 ATMega 2560 的“注册摘要”段落注释的引用：

> -2。使用 SBI 和 CBI 指令可直接对地址范围 $00 - $1F 内的 I/O 寄存器进行位访问。在这些寄存器中，可以使用 SBIS 和 SBIC 指令检查单个位的值。
> 
> -4。使用 I/O 特定命令 IN 和 OUT 时，必须使用 I/O 地址 $00 - $3F。当使用 LD 和 ST 指令将 I/O 寄存器寻址为数据空间时，必须向这些地址添加 $20。ATmega640/1280/1281/2560/2561 是一个复杂的微控制器，其外围单元比操作码中为 IN 和 OUT 指令保留的 64 个位置所能支持的要多。对于 SRAM 中 $60 - $1FF 的扩展 I/O 空间，只能使用 ST/STS/STD 和 LD/LDS/LDD 指令。

# jquery - 如何选择所有不是特定元素后代的输入？

> ID：12255227
> 
> 赞同：2
> 
> 时间：2012-09-03T23:58:10.180
> 
> 标签：jquery

观察：

![在此处输入图像描述](../Images/bde67c9cf81fbaeb24a6047ebb15898d.png)

我的页面上有 275 个元素，其中 30 个是输入。12 个输入是`tr.items`元素的后代，因此有 18 个输入，但不是。我该如何选择后者？

如您所见`$(:not(tr.items) input)`，选择所有输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T00:05:20.473

```
$('input:not(tr.items input)') 
```

[**小提琴**](http://jsfiddle.net/ult_combo/NhXYf/)

我的选择器匹配所有不匹配的输入`tr.items input`。简而言之，它选择所有不是`tr.items`.

[`:not(selector)`参考](http://api.jquery.com/not-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T00:01:52.600

尝试这个。

```
$('input').filter(function(){
   return $(this).closest('tr.items').length === 0
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T00:03:05.440

尝试：

```
var notwanted = $('tr.items').find('input');

var wanted =  $('input').not(notwanted); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T00:05:00.417

```
var textinputs=$('input:text').map(function(){
   if($(this).parents('tr.items').length == 0){
    return $(this);
   } else {
    return null;
   }
 }) 
```

这将返回这些元素的类似数组的对象。你也可以使用 $.each;

# c# - 资源管理器上下文菜单

> ID：12255229
> 
> 赞同：0
> 
> 时间：2012-09-03T23:58:57.000
> 
> 标签：c#, registry, installation, contextmenu

我刚刚使用 Visual Basic 2010 在 C# 中编写了一个应用程序，我花了很长时间，因为我对 C# 的经验很少，但是经过大量学习后，我似乎已经到目前为止，我目前正在编写一个允许用户的应用程序只需右键单击任何图像类型，这将打开资源管理器上下文菜单，并会出现一个新项目“上传到网站”。有了这个，我希望它与我的应用程序通信（通过传递命令？）然后运行我用 WebClient UploadClass 编写的函数。

我遇到的唯一问题是如何实际做到这一点，我想沿着注册表项路线走，我对此进行了一些广泛的研究，并将其与壳牌和第三方进行了权衡，我相信它是最合适的我正在尝试做的事情的选项。我知道如何在 C# 中设置注册表项，但令我感到困惑的一件事是我在哪里设置注册表项以及如何使它们与我的应用程序通信。

我真的在寻找正确的方向，我也有几个问题要问。

当我开始实际设置密钥时，我的应用程序存储在哪里？我不希望菜单损坏或缺少命令，我查看了主驱动器中的 Program Files 文件夹，但该应用程序实际上并不存在，它使用 Visual Studio 2010 提供的 OneClick 安装程序进行安装。

最后，我怎样才能让我的应用程序理解评论，例如，如果我通过了：

```
C:\MyDir\MyProgram.exe /u "%1 
```

/u 是上传命令，%1 是文件位置，我如何编码我的应用程序以了解它需要在命令时运行上传功能？

任何帮助或想法将不胜感激，谢谢！

**编辑：**我一直在研究完成注册表项方面的工作，并且我已经深入研究了注册表，我决定使用第三方应用程序安装程序，因为它只是让我有更多空间来提供我想做的事情，例如随着我的项目进一步扩展。我正在使用[Inno](http://www.jrsoftware.org/isinfo.php)设置编译器来执行此操作，它附带了强大的工具来轻松设置一些注册表值，我可以将其用于我的上下文菜单。

然而，我目前发现很难理解注册表。首先，我需要设置哪些键才能将我的程序与 .png、.gif 等文件类型相关联？在他们的资源管理器上下文菜单中，一个简单的条目“使用 SoftwareName 上传”就是我所追求的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T00:12:54.567

首先，您需要为资源管理器创建一个新的上下文菜单项。这可以通过在 HKEY_CLASSES_ROOT 中添加注册表项来实现，具体取决于您希望应用程序在文件/文件夹右键单击时出现的文件。看看[这个](http://www.codeproject.com/Articles/10104/Add-a-context-menu-to-the-Windows-Explorer)例子。

至于与您的程序通信，您将在注册表中设置的密钥将采用您在问题中显示的格式。这基本上将使用 /u 文件名参数打开您的程序。为了在应用程序打开时读取参数，您需要遍历[Environment.GetCommandLineArgs()](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx)，其中包含所有打开的命令行。然后根据这些是什么，您可以执行您想要的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T00:12:32.610

无论您使用什么安装程序，它都会知道应用程序的安装位置，并应相应地创建注册表值。至于命令行参数：您必须评估参数并调用相应的函数。请参阅[此处](http://msdn.microsoft.com/en-us/library/acy3edy3%28v=vs.80%29.aspx)了解介绍。

# mysql - 带有条件列的Mysql视图

> ID：12255233
> 
> 赞同：0
> 
> 时间：2012-09-03T23:59:11.303
> 
> 标签：mysql, join, view, multiple-tables

这一定比我做的要容易，但我在这里要疯了。我想要做的是从三个表中创建一个视图，如下所示：

```
SELECT tableA.name, tableB.id, tableB.categoryID, tableC.categoryParentID
FROM tableB, tableA where tableA.id=tableB.id JOIN tableC on
tableC.categoryID = tableB.categoryID; 
```

很简单。但是，我想要完成的是，在 tableB.categoryID 为 NULL 的情况下，我希望 tableC.categoryParentID 显示为 NULL 值而不是 categoryParentID 值。

到目前为止，我的结果可以让表格显示 tableB.categoryID 不为 NULL 的所有行，并完全排除 categoryID 具有空值的行 - 我不想这样做 - 或者我得到一些奇怪的变化包括 tableC 中 categoryParentID 的每一行和 tableB 中的每一行 - 这给了我超过 3,000,000 行，也是不正确的。

如果不清楚，我可以解释更多。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:02:27.167

如果我对您的理解正确，那么您想要的是：

```
SELECT tableA.name,
       tableB.id,
       tableB.categoryID,
       tableC.categoryParentID
  FROM tableA
  JOIN tableB
    ON tableB.id = tableA.id
  LEFT
 OUTER
  JOIN tableC
    ON tableC.categoryID = tableB.categoryID
; 
```

（参见[关于 SQL 连接的维基百科文章的“左外连接”部分](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)。）

# java - KeyListener 帮助 Java

> ID：12255234
> 
> 赞同：1
> 
> 时间：2012-09-03T23:59:41.410
> 
> 标签：java, swing, keylistener

我开始学习Java。目前，我正试图让一个关键的听众工作，但我很挣扎。我的代码如下。匿名内部类开头的第一个大括号有错误。我可能缺少一些简单的东西，所以任何帮助都会很有用。

```
public class Klistener extends JFrame {

    void Klistener()
    {
        JPanel c = new JPanel();
        c.setFocusTraversalKeysEnabled(true);
        this.add(c);
        c.addKeyListener(new KeyListener()
        {

            @Override
          public void keyTyped(KeyEvent e)
          {
              if(e.getKeyCode()==KeyEvent.VK_DOWN)
              {
                  System.out.print("hi");
              }
          }

        });
    }

    public static void main(String[] args)
    {
        Klistener a = new Klistener();
        JFrame b = new JFrame("hi");
        b.setVisible(true);
        b.setSize(500, 500);

        b.setLocation(500, 200);
        b.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T00:02:51.677

你忘了提供[其他两种方法](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyListener.html)的实现`KeyListener`。如果您不想这样做，请扩展[`KeyAdapter`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyAdapter.html)而不是`KeyListener`. `KeyAdapter`提供所有`KeyListener`方法的空实现，因此您可以选择要实现的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T00:03:22.330

因为`KeyListener`是一个`interface`，你的内部类需要重写接口中声明的所有方法。该接口指定以下方法：

```
public interface KeyListener extends EventListener {

    /**
     * Invoked when a key has been typed.
     * See the class description for {@link KeyEvent} for a definition of 
     * a key typed event.
     */
    public void keyTyped(KeyEvent e);

    /**
     * Invoked when a key has been pressed. 
     * See the class description for {@link KeyEvent} for a definition of 
     * a key pressed event.
     */
    public void keyPressed(KeyEvent e);

    /**
     * Invoked when a key has been released.
     * See the class description for {@link KeyEvent} for a definition of 
     * a key released event.
     */
    public void keyReleased(KeyEvent e);
} 
```

更好的方法是使用适配器类来接收键盘事件。在这里，您可以覆盖任何您想要的特定内容，而不是全部。[`KeyAdapter`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyAdapter.html) `abstract``method`

此外，由于您是新手`Java` `Swing`，以下链接可能会派上用场：

*   [编写事件监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)
*   [使用 Swing 组件](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)

哦，我注意到你`void Klistener`在类中有一个名为`Klistener`. 我假设您正在尝试制作一个`constructor`而不是一个方法本身。如果是这种情况，那就意识到`constructors`没有任何返回类型！这是[另一个](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)可能有帮助的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T00:15:06.513

你有很多错误，所以我什至不知道要开始：

1)`KeyListener`是一个接口，因此您必须实现所有方法。

2）不要添加`KeyListener`到面板，将其添加到您的`JFrame`. 您可以通过创建匿名类或这种方式来做到这一点

```
public class Klistener extends JFrame implements KeyListener{} 
```

3）不要调用`setSize()`method，call `pack()`and `setPreferredSize()`method's and after that `setVisible(true)`，并在代码末尾调用它们。

这是您的主要方法的外观：

```
 public static void main(String[] args){
    Klistener k = new Klistener();
    k.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    k.setLocationByPlatform(true);
    k.setPreferredSize(new Dimension(400,300));
    k.pack();
    k.setVisible(true);

  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T00:22:02.703

你那里有一些错误。这是一个工作代码（**最小更改**）：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
public class Klistener extends JFrame {
public Klistener()
{
    JPanel c = new JPanel();
    c.setFocusTraversalKeysEnabled(true);       
    addKeyListener(new KeyListener()
    {

        @Override
        public void keyTyped(KeyEvent e){}

        @Override
        public void keyPressed(KeyEvent e) {
            if(e.getKeyCode()==KeyEvent.VK_DOWN)                
                        System.out.println("hi");
        }

        @Override
        public void keyReleased(KeyEvent e){}

    });

}
public static void main(String[] args)
{
    Klistener a = new Klistener();
    a.setSize(500, 500);
    a.setLocation(500, 200);
    a.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    a.setVisible(true);

}
} 
```

# api - 新的 basecamp api 告诉我此地址没有 basecamp 帐户

> ID：12255236
> 
> 赞同：4
> 
> 时间：2012-09-03T23:59:59.260
> 
> 标签：api, basecamp

我是 basecamp api 的新手，在尝试最简单的示例时：

```
curl -u user:pass -H 'User-Agent: MyApp (yourname@example.com)' https://basecamp.com/999999999/api/v1/projects.json 
```

我得到错误说：

```
There's no Basecamp account at this address. Sign in to Launchpad to see your accounts. 
```

我用我的大本营电子邮件地址替换了用户，并将密码作为密码。我做错了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:10:13.387

您必须指定**用户代理**您的**电子邮件地址**或应用程序名称，我认为输入您的电子邮件地址并提及您的 basecamp 帐户 ID（登录 basecamp 帐户后，ID以数字形式显示在**url上）**

```
example :
curl -u xyz@example.com:xxxxxx -H 'User-Agent: xyz@example.com' https://basecamp.com/1213136/api/v1/projects.json 
```

最后你得到你的json！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-03T05:16:39.297

我有同样的问题并且能够得到解决方案。发现我一直在使用错误的 Basecamp 帐户 ID。

我已经在 Basecamp 3 ( [https://basecamp.com](https://basecamp.com) ) 中创建了一个帐户，并在我的请求中使用了生成的帐户 ID，但我不断收到上述错误消息。

您只需要在 Basecamp 2 ( [https://billing.37signals.com/bcx/trial/signup](https://billing.37signals.com/bcx/trial/signup) ) 中创建一个帐户，然后使用生成的帐户 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-08T13:01:51.407

我有同样的问题并且能够得到解决方案。发现我一直在使用错误的 Basecamp 帐户 ID。

我已经在 Basecamp 3 ( [https://basecamp.com](https://basecamp.com) ) 中创建了一个帐户，并在我的请求中使用了生成的帐户 ID，但我不断收到上述错误消息。

您只需要在 Basecamp 2 ( [https://billing.37signals.com/bcx/trial/signup](https://billing.37signals.com/bcx/trial/signup) ) 中创建一个帐户，然后使用生成的帐户 ID。

# android - 一个显示facebook照片库的应用程序

> ID：12255243
> 
> 赞同：1
> 
> 时间：2012-09-04T00:02:08.057
> 
> 标签：android, facebook

我想知道有没有办法让我拉出 facebook 相册并将其显示在我的应用程序中？

有什么方法可以链接 Android 图片库以从 FB 中提取照片，以便当他们的 FB 相册更新时，我的应用程序将动态获取最新的照片更新？

谢谢

# jquery - 强制 iContact 注册表单不重定向到其他页面

> ID：12255245
> 
> 赞同：1
> 
> 时间：2012-09-04T00:02:24.610
> 
> 标签：jquery, html, ajax, forms

我正在尝试使这个简单的 iContact 表单不重定向到成功页面或错误页面。我只希望我的访问者提交表单而不会被重定向离开页面或重新加载页面。

我一直在环顾四周，但我无法解决这个问题。这是我的 iContact 表单代码（我替换了我的帐户信息）：

```
<style>
.link,
.link a,
.signupframe
{
    color: #000000;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
    }
    .link,
    .link a {
        text-decoration: none;
        }
    .signupframe {
        border: 1px solid #000000;
        background: #ffffff;
        }
.signupframe .required {
    font-size: 10px;
    }
</style>
<form method="post" action="https://app.icontact.com/icp/signup.php" name="icpsignup" id="icpsignupAAAA" accept-charset="UTF-8" onsubmit="return verifyRequiredAAAA();" >
<input type="hidden" name="redirect" value="http://www.icontact.com/www/signup/thanks.html">
<input type="hidden" name="errorredirect" value="http://www.icontact.com/www/signup/error.html">

<div id="SignUp">
<table width="260" class="signupframe" border="0" cellspacing="0" cellpadding="5">
    <tr>
      <td valign="top" align="right">
        <span class="required">*</span> Email
      </td>
      <td align="left">
        <input type="text" name="fields_email">
      </td>
    </tr>
    <input type="hidden" name="listid" value="42379">
    <input type="hidden" name="specialid:42379" value="O6IC">

    <input type="hidden" name="clientid" value="954091">
    <input type="hidden" name="formid" value="4616">
    <input type="hidden" name="reallistid" value="1">
    <input type="hidden" name="doubleopt" value="0">
    <tr>
      <td> </td>
      <td><span class="required">*</span> = Required Field</td>
    </tr>
    <tr>
      <td> </td>
      <td><input type="submit" name="Submit" value="Submit"></td>
    </tr>
    </table>
</div>
</form>
<script type="text/javascript">

var icpForm4616 = document.getElementById('icpsignupAAAA');

if (document.location.protocol === "https:")

    icpForm4616.action = "https://app.icontact.com/icp/signup.php";
function verifyRequired4616() {
  if (icpForm4616["fields_email"].value == "") {
    icpForm4616["fields_email"].focus();
    alert("The Email field is required.");
    return false;
  }

return true;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:07:33.917

在提交时使用 AJAX 发布表单。使用与上面相同的 onSubmit 调用，只需通过 AJAX 发布，然后返回 false（表单永远不会发布到 action 属性值）。在下面的示例中，我将 jQuery 库用于 ajax 函数，因此如果您没有它，则必须下载并安装它...

删除底部的 javascript，然后添加它。确保您已在 FTP 中下载并安装了 jQuery 文件。还正确添加带有 html、head 和 body 标签的 HTML 结构：http: [//www.w3.org/TR/html401/struct/global.html#h-7.1](http://www.w3.org/TR/html401/struct/global.html#h-7.1)

```
<script type="text/javascript" src="/js/jquery.1.7.2.min.js"></script>
<script type="text/javascript">
 function verifyRequiredAAAA()
 { 

   var eReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/; // regex to check valid email
   var email = $('input[name="fields_email"]').val();
   if (email == "") {
      $('input[name="fields_email"]').focus();
      alert("The Email field is required.");
      return false;
   } else if (!eReg.test(email)) {
      $('input[name="fields_email"]').focus();
      alert("The Email address is incorrect.");
      return false;
   } else {
      $.post("https://app.icontact.com/icp/signup.php",
            $("#icpsignupAAAA").serialize(), function(data){
                  $('#successcontainer').html(data);
            });
            return false;
   }
 } 

</script> 
```

然后在您的 HTML 中放置一个容器，用于显示潜在的成功消息：

```
<div id="successcontainer"></div> 
```

（这里的消息来自你的 PHP 脚本（PHP 应该返回一些东西......））

将您的 FORM 标签更改为：

```
 <form id="icpsignup4616" onsubmit="return verifyRequired4616()" accept-charset="UTF-8" name="icpsignup" action="" method="post"> 
```

例如，您还可以删除完整的表单，如果您在成功函数中（在带有成功容器的行之后）添加

```
$("#icpsignupAAAA").hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:32:31.347

将这些行中的值更改为您希望它在成功或错误时重定向到的 url。

```
<input type="hidden" name="redirect" value="http://www.icontact.com/www/signup/thanks.html">
<input type="hidden" name="errorredirect" value="http://www.icontact.com/www/signup/error.html"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-05T12:42:18.480

由于跨域（CORS）限制，似乎不可能做你想做的事。如果您尝试按照建议使用 jQuery 解决方案，您会得到以下内容：

`XMLHttpRequest cannot load https://app.icontact.com/icp/signup.php. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://localhost:8000' is therefore not allowed access.`

**更新**

Thr 请求似乎确实到达了 iContact 服务器。但是，除了控制台中的错误之外，AJAX 请求被认为是失败的。

# java - 创建联系人列表程序

> ID：12255250
> 
> 赞同：5
> 
> 时间：2012-09-04T00:02:50.333
> 
> 标签：java, swing, contact, layout-manager, grid-layout

我正在使用 Java Swing 在 Eclipse 中编写联系人列表应用程序。如何获得仅包含列和行的简单表格布局？我不想要行或列标签。

像这样的东西：

```
first name: john
middle name: franklin
last name: doe 
```

名称将是可编辑的文本框等。

最好使用什么组件？

我还将在文本字段下方有按钮。目前我有一个`JFrame`运行正常。它会弹出一个窗口，其中包含正确的菜单选项。但是当我尝试这样做时：

```
myFrame.setLayout(new GridLayout(6, 2)); 
```

我得到一个错误。我想要一个两列和 5 行（可能是 6 行）的网格布局。我想在左列有一个标签，在右列有一个文本框。然后是底部的两个按钮，居中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T00:11:38.233

您最好将字段和控件（按钮）分成单独的面板，这样您就可以为每个面板提供不同的布局管理器。

我将从`JPanel`使用`BorderLayout`.

在此之上，我将在该位置添加“字段”面板，`CENTER`并在该位置添加控件（按钮）`SOUTH`。

对于字段，我会使用 a `GridBagLayout`，但我很挑剔，对于控制面板，我可能会使用 a `FlowLayout`（除非您可以访问一个好的`ButtonLayout`经理；））

这意味着你最终可能会得到类似的东西

![在此处输入图像描述](../Images/9ec2f9a1f09583eaf274923258d15341.png)

**更新了代码示例**

```
public class FormPanel extends JPanel {

    private JTextField fldFirstName;
    private JTextField fldMiddleName;
    private JTextField fldLastName;
    private JTextField fldDateOfBirth;
    private JTextField fldEMail;
    private JButton okButton;
    private JButton cancelButton;

    public FormPanel() {

        setLayout(new BorderLayout());
        add(createFieldsPane());
        add(createButtonsPane(), BorderLayout.SOUTH);

    }

    public JPanel createButtonsPane() {

        JPanel panel = new JPanel(new FlowLayout());
        panel.add((okButton = createButton("Ok")));
        panel.add((cancelButton = createButton("Cancel")));

        return panel;

    }

    protected JButton createButton(String text) {

        return new JButton(text);

    }

    public JPanel createFieldsPane() {

        JPanel panel = new JPanel(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.insets = new Insets(2, 2, 2, 2);
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.anchor = GridBagConstraints.WEST;

        panel.add(createLabel("First Name:"), gbc);
        gbc.gridy++;
        panel.add(createLabel("Middle Name:"), gbc);
        gbc.gridy++;
        panel.add(createLabel("Last Name:"), gbc);
        gbc.gridy++;
        panel.add(createLabel("Date of Birth:"), gbc);
        gbc.gridy++;
        panel.add(createLabel("EMail:"), gbc);

        gbc.gridy = 0;
        gbc.gridx++;
        gbc.weightx = 1;
        panel.add((fldFirstName = createField()), gbc);
        gbc.gridy++;
        panel.add((fldLastName = createField()), gbc);
        gbc.gridy++;
        panel.add((fldMiddleName = createField()), gbc);
        gbc.gridy++;
        panel.add((fldDateOfBirth = createField()), gbc);
        gbc.gridy++;
        panel.add((fldEMail = createField()), gbc);

        JPanel filler = new JPanel();
        filler.setOpaque(false);

        gbc.gridy++;
        gbc.weightx = 1;
        gbc.weighty = 1;
        panel.add(filler, gbc);

        return panel;

    }

    protected JLabel createLabel(String text) {

        return new JLabel(text);

    }

    protected JTextField createField() {

        JTextField field = new JTextField(12);
        return field;

    }

} 
```

# objective-c - 应用程序电子邮件中的 Xcode 添加来自文本字段

> ID：12255254
> 
> 赞同：1
> 
> 时间：2012-09-04T00:03:12.210
> 
> 标签：objective-c, xcode, mfmailcomposer

好的，所以我已经成功地使用 MFMAilComposer 制作了我的第一个应用内电子邮件应用程序。我添加了 toRecipients 文本字段，以及主题和正文等。所以我知道如果我使用模拟器，电子邮件将不会发送，而是会使用 iPhone 发送。但是，当一个人收到电子邮件时，该人应该如何知道他是从谁那里收到的呢？考虑到这一点，“发件人”字段应该是有序的。我感谢所有答案，并在此先感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:17:51.233

您不必处理这些，邮件编写器会为您完成。当显示作曲家时，它默认为用户的默认电子邮件帐户，但如果他们想选择从哪个电子邮件地址发送，他们只需点击他们的电子邮件，列表就会展开，允许他们选择从哪个电子邮件中发送消息.

# forms - on Button press If(No record exist) Then create Else Update

> ID：12255258
> 
> 赞同：1
> 
> 时间：2012-09-04T00:03:46.267
> 
> 标签：forms, vba, ms-access-2010

我有一个未绑定的表格。在表格上我有一个保存按钮。截至目前，当您按下保存按钮时，它会将表单上的信息保存到记录中，但每次按下保存时，它都会添加一条新记录而不是更新它。我需要它来更新当前记录而不是添加新记录。任何想法表示赞赏。

这是我的代码：

```
Dim dblocal As DAO.Database
Dim rst As DAO.Recordset

Set dblocal = CurrentDb()
Set rst = dblocal.OpenRecordset("SUBJECT_DATABASE", dbOpenDynaset)

'Prim. ID var.
Dim EvtIDkey As Long

With rst
.AddNew
.Fields("LAST NAME") = Me.LNameTxtB
.Fields("FIRST NAME") = Me.FNameTxtB
.Fields("GENDER") = Me.GenderCboB
.Fields("DOB") = Me.DOBTxtB

'inserts primary id into textB
Me.EvtIDKeyTxtB = .Fields("ID")

.Update
End With

End If 
```

我正在考虑添加具有以下条件的 if 语句：如果 EvtIDKeyTxTB 不是空的，则更新存在记录。但是，如何更新现有记录？

如果我有主键，我能以这种方式获取和更新记录吗？

# javascript - 如何阻止图像移动并根据击键触发动作？

> ID：12255263
> 
> 赞同：3
> 
> 时间：2012-09-04T00:04:29.153
> 
> 标签：javascript

我正在自学网络编程。我也在研究 C++。我在使用 Javascript 时遇到问题。

我需要知道如何根据图像的位置创建“if 语句”。

我正在制作一个简单的游戏，它有一个来回移动的大炮。我希望用户按下一个按钮，该按钮将导致大炮停止并向目标发射另一个图像。

我已经创建了图像和图像的 gif，该图像将从大炮以弧线向目标移动。

如果用户在大炮处于正确位置时开火，图像将击中目标。

有人可以告诉我如何根据位置创建 if 语句吗？或者有人能告诉我如何让大炮停下来让gif出现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T00:09:21.550

要移动大炮，请阅读`onkeyup()`事件 - 它会等待释放键并执行某些操作。

它会做什么？可能会`left`以某种方式改变大炮的位置。我建议在您的大炮上设置 CSS 样式，然后使用 Javascript`position:absolute`更改属性。`.left`

例如，这里有一些 Javascript 可以帮助您入门（未经测试）：

```
var cannon = document.getElementById("cannonPic");
var leftlim = 200;

document.body.onkeyup = function() {
    // Remove 'px' from left position style
    leftPosition = cannon.style.left.substring(0, cannon.style.left - 2);

    // Stop the cannon?
    if (leftPosition >= leftLim) {
        return;
    }

    // Move cannon to new position
    cannon.style.left = cannon.style.left.substr(0, cannon + 10);
} 
```

它的配套 HTML 看起来像......

```
...
<img id='cannonPic' src='cannon.jpg' />
...
<script type='text/javascript' src='cannon.js' /> 
```

HTML 的样式可以是这样的：

```
#cannonPic {
    left:0;
    position:absolute;
} 
```

* * *

要回答您的“出现/重新出现”子问题，您可以使用`.display`通过 Javascript 访问的属性：

```
var cannon = document.getElementById("cannonPic");

function appear() {
    cannon.style.display = '';
}

function hide() {
    cannon.style.display = 'none';
} 
```

* * *

一个小小的警告，以弧线传播的东西将需要一些数学来将它们翻译成二维，这取决于你想要它的准确度。如果你喜欢数学，这是一个有趣的练习:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:08:57.383

例如，要在屏幕上的页面 x 和 y 位置获取第一张图片，请尝试：

```
var xpos = document.getElementsByTagName('img')[0].x;

var ypos = document.getElementsByTagName('img')[0].y; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T00:15:18.017

只是添加一点背景，通常这样做的方式是：

1.  您有一个将“运行”游戏的主循环。
2.  循环的每次迭代，您 a) 更新游戏内对象（在您的情况下为大炮、射弹和目标）的位置，并且 b) 将生成的对象渲染到屏幕上。
3.  当您检测到“开火”按键时，您只需将移动大炮的“速度”设置为 0，使其“停止”。

您可以使用 Steve 或 sajawikio 的方法检索对象的位置，但您的游戏逻辑始终确定（并且应该知道）所有对象的位置。这是你的游戏逻辑说“在位置（x，y）绘制射弹”。你的游戏逻辑不应该说“我有一个弹丸，不确定它到底在哪里，HMM，所以让我们使用 Javascript 查询它的位置”。至少在这种情况下，你有简单的、可预测的运动。

# c++ - 使用 OpenMP 在 x86 上的原子最小值

> ID：12255266
> 
> 赞同：8
> 
> 时间：2012-09-04T00:05:14.373
> 
> 标签：c++, x86, openmp, atomic, minimum

OpenMP 是否支持 C++11 的原子最小值？如果 OpenMP 没有可移植的方法：有没有使用 x86 或 amd64 功能的方法？

在 OpenMP 规范中，我没有发现 C++，但 Fortran 版本似乎支持它。详见 v3.1 的 2.8.5。对于 C++，它声明

> binop 是 +、*、-、/、&、^、|、<< 或 >> 之一。

但对于 Fortran 它指出

> intrinsic_procedure_name 是 MAX、MIN、IAND、IOR 或 IEOR 之一。

如果您对更多上下文感兴趣：我正在寻找一种无互斥锁的方法来执行以下操作：

```
vector<omp_lock_t>lock;
vector<int>val;

#pragma omp parallel
{
  // ...
  int x = ...;
  int y = ...;
  if(y < val[x]){
    omp_set_lock(&lock[x]);
    if(y < val[x])
      val[x] = y;
    omp_unset_lock(&lock[x]);
  }
} 
```

我知道您可以使用 reduce 算法计算最小值。我知道在某些情况下，这在很大程度上优于任何原子最小方法。但是，我也知道我的情况并非如此。

编辑：在我的情况下，一个稍微快一点的选项是

```
 int x = ...;
  int y = ...;
  while(y < val[x])
    val[x] = y; 
```

但这不是原子操作。

所有较新的 GPU 都具有此功能，而我在 CPU 上缺少它。（有关 OpenCL，请参见 atom_min。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:19:38.203

C++ 的 OpenMP 规范不支持原子最小值。C++11 也没有。

我假设在您的算法中`x`，无论线程如何，都可以计算到任何有效索引。我建议更改您的算法，以便每个线程使用自己的`val`数组，然后在最后进行最终协调，这也可以通过索引并行化。这将完全避免锁和原子操作，并为您提供为每个线程分离数据的好处，即不会出现错误的缓存共享。换句话说，它应该更快。

# c# - 关于通用 try catch 的建议

> ID：12255270
> 
> 赞同：5
> 
> 时间：2012-09-04T00:06:05.503
> 
> 标签：c#, exception, generics

这不是什么大问题，而是更多的反馈和想法。我一直在考虑通过我们的内部团队彻底测试过的方法的实现。我想编写一个通用的异常捕获方法和报告服务。

我认为这不像“try-catch”块那么容易，但允许使用统一的方法来捕获异常。理想情况下，我想执行一个方法，提供一个失败回调并记录调用方法的所有参数。

通用尝试执行。

```
public class ExceptionHelper
{
     public static T TryExecute<T, TArgs>(Func<TArgs, T> Method, Func<TArgs, T> FailureCallBack, TArgs Args)
     {
            try
            {
                return Method(Args);
            }
            catch (Exception ex)
            {
                StackTrace stackTrace = new StackTrace();
                string method = "Unknown Method";
                if (stackTrace != null && stackTrace.FrameCount > 0)
                {
                    var methodInfo = stackTrace.GetFrame(1).GetMethod();
                    if (methodInfo != null)
                        method = string.Join(".", methodInfo.ReflectedType.Namespace, methodInfo.ReflectedType.Name, methodInfo.Name);
                }
                List<string> aStr = new List<string>();
                foreach (var prop in typeof(TArgs).GetProperties().Where(x => x.CanRead && x.CanWrite))
                {
                    object propVal = null;
                    try
                    {
                        propVal = prop.GetValue(Args, null);
                    }
                    catch
                    {
                        propVal = string.Empty;
                    }
                    aStr.Add(string.Format("{0}:{1}", prop.Name, propVal.ToString()));
                }
                string failureString = string.Format("The method '{0}' failed. {1}", method, string.Join(", ", aStr));
                //TODO: Log To Internal error system
                try
                {
                    return FailureCallBack(Args);
                }
                catch
                {
                    return default(T);
                }
            }
      }
} 
```

我所知道的退路。

*   使用反射的性能损失
*   MethodBase（methodInfo）可能无法通过优化获得
*   错误处理程序周围的 try-catch。基本上，我可以使用 TryExecute 包装器来围绕错误回调进行 try-catch，但这可能会导致堆栈溢出情况。

这是一个示例实现

```
var model = new { ModelA = "A", ModelB = "B" };
return ExceptionHelper.TryExecute((Model) =>
{
     throw new Exception("Testing exception handler");
},
(Model) =>
{
    return false;
}, 
model); 
```

想法和评论表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T00:18:53.390

放入 a 中有很多代码，*包括*`catch`两个*/* `try`块`catch`。如果您问我，这似乎有点矫枉过正，有很大的风险是进一步的异常可能会掩盖实际的异常并且错误信息会丢失。

还有，为什么`return default(T)`？返回默认值或空值作为问题的指示通常很草率。如果没有别的，它需要在每次调用该方法时都包含相同的条件，以检查返回并响应......一些现在已经到其他地方的错误。

老实说，这个用法示例看起来也很混乱。看起来您最终会用错误捕获代码掩盖实际的业务逻辑。整个代码库看起来像一系列错误陷阱，实际的业务逻辑隐藏在其中的某个地方。这将宝贵的注意力从应用程序的实际意图上移开，并将后台基础设施重要性（日志记录）放在首位。

简化。

如果方法中发生异常，您通常有两个明智的选择：

1.  在方法中捕获（*并*有意义地*处理*）异常。
2.  让异常在堆栈中冒泡，以便在其他地方捕获。

逃避它发生的方法范围的异常绝对*没有错。*事实上，异常就是为了做到这一点而设计的，它携带有用的堆栈信息，说明发生了什么以及发生在哪里。（而且，如果您向异常添加有意义的运行时上下文，它还可以携带有关*原因*的信息。）

事实上，编译器甚至巧妙地暗示了这一点。以这两种方法为例：

```
public int Sum(int first, int second)
{
    // TODO: Implement this method
}

public int Product(int first, int second)
{
    throw new NotImplementedException();
} 
```

其中一种方法将编译，其中一种不会。编译器错误将指出并非所有代码路径都返回前一种方法的值。但为什么不是后者？因为抛出异常对于方法来说是完全可以接受的退出策略。这就是方法如何放弃它正在做的事情（它应该尝试做的*一件事，仅此**而已*），让调用代码处理这个问题。

代码应该以清楚地表达被建模的业务概念的方式阅读。错误处理是一个重要的基础架构概念，但它只是……基础架构。代码实际上应该清晰而简洁地表明正在建模的业务概念*。*基础设施问题不应该妨碍这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T00:29:35.730

这很少有用。

它仅涵盖以下情况：

1.  该方法具有明确定义的方法，可以在失败时获得适当的返回值。
2.  你真的很想记录它发生了。

现在，2 很常见，除了各种例外，但 1 也不是真的。

1 当然很少见，因为在大多数情况下，如果您可以通过手段 X 为给定参数生成合理的返回值，您就不会首先尝试手段 Y。

`default(T)`如果回退不起作用，它还具有返回的默认行为- 因此为 null 或全为零。

这仅适用于您上面的案例 1 有“结果只是返回 null 的东西，因为我们不太关心这个东西做了什么”，或者被调用的方法从不返回 null，在这种情况下，您然后测试 null ，这意味着你真正的错误处理代码发生在那里。

总而言之，您在这里所得到的是一种方式，在这种方式中，可以通过实际代码捕获的异常必须通过测试（有时是测试+猜测）来捕获，而那些会使程序在一个清晰的地方崩溃的方式具有良好的调试信息的情况下，它会将其置于您不知道任何地方发生了什么的状态，但至少在某些东西设法将其完全关闭之前记录的几十个错误中，其中一个可能是实际问题

当您因特定原因捕获某些异常时，请务必记录该异常。请注意，这并不能帮助找到错误（如果引发的异常存在错误，您不应该在那里捕获它），而是要取消存在捕获可能隐藏错误的事实 - 即取消通过在所有地方放置捕获物来刻意鼓励您的效果。（例如，您希望定期命中的 Web 服务有时会无法连接，并且您可以使用缓存的数据持续几个小时 - 所以您捕获故障并从缓存中继续 - 在这里您记录，因为如果有错误意味着您从来没有试图正确地点击网络服务，你只是隐藏了它）。

让一些非交互式（服务或服务器）应用程序记录所有到达堆栈顶部的异常也是合理的，因为没有人注意到异常。

但例外不是敌人，它们是使者。不要射击信使。

# php - 这段代码中的 eval() 怎么会不安全？

> ID：12255271
> 
> 赞同：3
> 
> 时间：2012-09-04T00:06:29.217
> 
> 标签：php, wordpress, security, eval

我正在使用下面的代码来自动加载和声明类，因此我只需要将类文件放在名为 classes 的文件夹中。spl_autoload_regsister() 中的部分对您来说似乎是不必要的，但它需要作为 WordPress 插件工作而不会出错。

它使用`eval()`，我已经看到很多网页谈论使用`eval()`​​是不好的，并且会造成安全漏洞。那么这怎么可能是危险的呢？

```
$strDirPath = dirname(__FILE__) . '\\classes\\';
$arrClassFiles = array_map(create_function( '$a', 'return basename($a, ".php");' ), glob($strDirPath . '*.php'));
spl_autoload_register(
    create_function('$class_name', '
        global $arrClassFiles, $strDirPath;
        if (in_array($class_name, $arrClassFiles)) 
            include($strDirPath . $class_name . ".php");' )
);

foreach ($arrClassFiles as $strClassName) {
    $strClassName_alpha = $strClassName . "_Alpha";
    eval("class $strClassName_alpha extends $strClassName {};");    
}

print_r(get_declared_classes()); 
```

也许，有人可以在文件夹中放一个php代码的文件名？但我认为它不会危及系统。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T00:21:49.423

如果他们可以将类文件命名为`randomclass {}; echo $db_password;//.php`，那么您可能会受到代码执行攻击。

我很确定这不是一个有效的文件名，但在制作有效的恶意输入方面，有些人比我聪明得多。

它通常不是您需要打开自己的攻击面，因为它实际上总是可以通过更好的代码结构来避免。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T00:18:47.907

如果处理了错误条件，我在这里看不到问题。

只要确保如果有人试图调用一个确实存在的不同类（即在此处有效的代码，但您不希望您的黑客直接运行，因为它会绕过对您的系统的限制），它赢了这不是一个安全问题——或者根本不可能从这个上下文中运行那个类。

以防万一，拒绝任何使用“类”或其他关键字，或任何内置类名，或内置函数名，其他内置函数等运行代码的尝试，你应该没问题，但即使这样也可能是在您的特定情况下没有必要，因为可能会导致错误。

# javascript - 如何根据另一个日期的输入更新日期？

> ID：12255273
> 
> 赞同：1
> 
> 时间：2012-09-04T00:06:50.740
> 
> 标签：javascript, jquery

我在页面中有一个表单，其中有两个接受日期的输入。如何使用基于 Input#1 日期的日期使用 jQuery 自动填充 Input#2？基本上，我希望 Input#2 从输入到 Input#1 的日期开始为 1 年。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:17:55.933

试试这个：

```
 $("#input1").datepicker({
        dateFormat: 'dd/mm/yy',
        onSelect: function(dateStr) {
            var d = $.datepicker.parseDate('dd/mm/yy', dateStr);
            var years = 1;

            d.setFullYear(d.getFullYear() + years);

            $('#input2').datepicker('setDate', d);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T00:18:31.283

```
${'#input1').change(function(){
  date = new Date($('#input1').val()); // You may have to parse this, depending on the format of the input
  $('#input2').val(date + (365 * 24 * 60 * 60 * 1000)); // JS Date object counts in milliseconds.  You may have to format this with a few lines of code, depending on what formatting you want
}); 
```

# javascript - 为什么一些 jQuery 程序员使用 $.get、$.getJSON 和 $.when 等 jQuery 函数而不是 $.ajax

> ID：12255287
> 
> 赞同：3
> 
> 时间：2012-09-04T00:09:21.187
> 
> 标签：javascript, jquery, ajax, get, getjson

我的问题是，如果您的 jQuery`$.ajax`函数中包含所有内容，为什么要使用`$.get()`,和我见过的其他函数，仅使用 ajax 并不是更好，因为我可以告诉您，您几乎使用与传统函数相同数量的字符来编写这些`$.getJSON()`函数.`$.when()``$.ajax`

除了简化这些函数名称之外，还有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T00:13:10.340

它是常用行为的简写。我使用这些方法有两个原因：

1.  它减少了打字，因此较小的“脑放屁”错误的空间更小。
2.  参数要少得多，因此您不必记住需要传递的所有内容`$.ajax`或花时间返回文档。

功能方面没有区别，这些方法只是为您提供了一些默认值。

# iphone - 使用 NSJSONSerialization 解析 JSON

> ID：12255290
> 
> 赞同：7
> 
> 时间：2012-09-04T00:09:50.847
> 
> 标签：iphone, ios, json

对此进行了太多讨论，但我无法弄清楚如何解决我的问题。

这是我从 WorldWeatherOnline 获得的 JSON 数据。JSON 是有效的。但我不知道如何解析它。这是我的代码，后跟 JSON。请帮忙！

```
NSError* errorInfo;
NSDictionary *parsedJSON = [NSJSONSerialization JSONObjectWithData:self.wwoWeatherData options:kNilOptions error:&errorInfo];

NSArray* temp = [parsedJSON objectForKey:@"temp_C"];
NSLog(@"%@", temp); 
```

```
   {
   “数据”：{
      “现在的状况”：[
         {
            “云罩”：“0”，
            “湿度”：“82”，
            "observation_time":"11:07 PM",
            "precipMM":"0.0",
            “压力”：“1024”，
            "temp_C":"16",
            "temp_F":"61",
            “能见度”：“10”，
            "天气代码":"113",
            “天气描述”：[
               {
                  “值”：“清除”
               }
            ],
            “天气图标网址”：[
               {
                  “价值”：“http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0008_clear_sky_night.png”
               }
            ],
            "winddir16Point":"NNE",
            "winddirDegree":"30",
            "windspeedKmph":"11",
            “风速里程”：“7”
         }
      ],
      “要求”：[
         {
            "query":"Lat 48.85 和 Lon 2.35",
            “类型”：“纬度”
         }
      ],
      “天气”：[
         {
            "日期":"2012-09-04",
            "precipMM":"0.0",
            "tempMaxC":"25",
            "tempMaxF":"77",
            "tempMinC":"14",
            "tempMinF":"57",
            "天气代码":"113",
            “天气描述”：[
               {
                  “价值”：“晴天”
               }
            ],
            “天气图标网址”：[
               {
                  “价值”：“http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png”
               }
            ],
            "winddir16Point":"N",
            "winddirDegree":"5",
            “风向”：“N”，
            "windspeedKmph":"13",
            “风速里程”：“8”
         },
         {
            "日期":"2012-09-05",
            "precipMM":"0.0",
            "tempMaxC":"22",
            "tempMaxF":"72",
            "tempMinC":"10",
            "tempMinF":"50",
            "天气代码":"113",
            “天气描述”：[
               {
                  “价值”：“晴天”
               }
            ],
            “天气图标网址”：[
               {
                  “价值”：“http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png”
               }
            ],
            "winddir16Point":"NNE",
            "winddirDegree":"25",
            "风向":"NNE",
            "windspeedKmph":"20",
            “风速英里”：“13”
         },
         {
            "日期":"2012-09-06",
            "precipMM":"0.0",
            "tempMaxC":"22",
            "tempMaxF":"71",
            "tempMinC":"11",
            "tempMinF":"51",
            "天气代码":"113",
            “天气描述”：[
               {
                  “价值”：“晴天”
               }
            ],
            “天气图标网址”：[
               {
                  “价值”：“http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png”
               }
            ],
            "winddir16Point":"NE",
            "winddirDegree":"42",
            "风向":"NE",
            "windspeedKmph":"15",
            “风速里程”：“10”
         },
         {
            "日期":"2012-09-07",
            "precipMM":"0.0",
            "tempMaxC":"24",
            "tempMaxF":"75",
            "tempMinC":"13",
            "tempMinF":"55",
            "天气代码":"116",
            “天气描述”：[
               {
                  “值”：“部分多云”
               }
            ],
            “天气图标网址”：[
               {
                  “价值”：“http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0002_sunny_intervals.png”
               }
            ],
            "winddir16Point":"ENE",
            "winddirDegree":"56",
            "风向":"ENE",
            "windspeedKmph":"13",
            “风速里程”：“8”
         },
         {
            "日期":"2012-09-08",
            "precipMM":"0.0",
            "tempMaxC":"26",
            "tempMaxF":"78",
            "tempMinC":"16",
            "tempMinF":"61",
            "天气代码":"113",
            “天气描述”：[
               {
                  “价值”：“晴天”
               }
            ],
            “天气图标网址”：[
               {
                  “价值”：“http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png”
               }
            ],
            "winddir16Point":"ENE",
            "winddirDegree":"76",
            "风向":"ENE",
            "windspeedKmph":"9",
            “风速里程”：“6”
         }
      ]
   }
}

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T00:12:21.173

您解析的 json 包含一个名为`data`. 在该字典中是一个数组`current_condition`。继续深入研究数据结构以找到您正在寻找的属性：

```
NSDictionary *data = [parsedJSON objectForKey:@"data"];
NSArray *currentConditions = [data objectForKey:@"current_condition"];
NSDictionary *condition = [currentConditions objectAtIndex:0];
NSString *tempC = [condition objectForKey:@"temp_C"]; 
```

# testing - TinyOS 和 Contiki 中的 6lowPAN 堆栈是否兼容？

> ID：12255291
> 
> 赞同：1
> 
> 时间：2012-09-04T00:09:53.680
> 
> 标签：testing, networking, continuous-integration, tinyos, contiki

就 Google 的建议而言，Contiki 和 TinyOS 中的 6loWPAN 堆栈应该是兼容的，尽管我可以很清楚地看到任何关于两者都以某种方式持续测试的报告。有人有这方面的更多信息吗？我一直主要使用 Contiki，并考虑在我的下一个项目中使用 TOS...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:50:12.883

The SICS group has published two papers on interoperability:.

1.  [Beyond Interoperability – Pushing the Performance of Sensor Network IP Stacks](http://dunkels.com/adam/ko11beyond.pdf)
2.  [ContikiRPL and TinyRPL: Happy Together](https://www.sics.se/~adam/ko11contikirpl.pdf)

# php - Magento 一页结帐问题未加载发货地址后

> ID：12255295
> 
> 赞同：2
> 
> 时间：2012-09-04T00:10:33.517
> 
> 标签：php, mysql, magento

我们的 Magento 网站已移至新的托管服务器，因为在查看“收货地址”之后它没有显示下一个内容。它通过 AJAX 调用了 2 个请求，之后没有响应。

发布[https://www.mysite.com/store/checkout/onepage/saveBilling/](https://www.mysite.com/store/checkout/onepage/saveBilling/)

200 OK 2.14s
prototype.js（第 1532 行）发布[https://www.mysite.com/store/checkout/onepage/getAdditional/](https://www.mysite.com/store/checkout/onepage/getAdditional/)

200 OK 965ms

谁能指导我可能是什么问题。我已经尝试了一些在 SO 和 google 上找到的东西，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:38:39.580

更改运输方式后问题得到解决。问题在于 Drop Shipping 方法。

# c++ - 使用 auto 关键字时不遵守对齐 16？

> ID：12255297
> 
> 赞同：14
> 
> 时间：2012-09-04T00:10:36.037
> 
> 标签：c++, visual-c++, visual-studio-2012, memory-alignment, directxmath

使用 VS2012 编译并使用 DirectXMath 库时，我遇到了一个问题，编译器似乎没有对齐我的 XMMATRIX。我将问题简化为以下内容。

```
#include <DirectXMath.h>
using namespace DirectX;

int _tmain(int argc, _TCHAR* argv[])
{
  auto m1 = XMMatrixIdentity();
  auto m2 = XMMatrixIdentity();

  auto t1 = XMMatrixTranspose( m1 ); // sometimes access violation occurs here
  auto t2 = XMMatrixTranspose( m2 ); // or sometimes here

  return 0;
} 
```

一遍又一遍地重新运行代码有时会在第一次转置时导致“访问冲突读取位置 0xFFFFFFFF”，有时在第二次。

我发现这是因为 m1 和 m2 没有正确对齐。用“XMMATRIX”替换“auto”似乎可以解决问题，所以我怀疑是编译器错误，但也有可能我做错了什么，或者没有启用某些选项。

我的代码有问题还是编译器错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T16:07:15.157

的定义`XMMATRIX`在头文件 ( `xnamath.h`) 中有以下内容，尽管这在您的版本中可能有所不同。

```
// Matrix type: Sixteen 32 bit floating point components aligned on a
// 16 byte boundary and mapped to four hardware vector registers
#if (defined(_XM_X86_) || defined(_XM_X64_)) && defined(_XM_NO_INTRINSICS_)
typedef struct _XMMATRIX
#else
typedef _DECLSPEC_ALIGN_16_ struct _XMMATRIX
#endif 
```

所以`XMMATRIX`定义为`__declspec(align(16))`（如果你查看头文件，它确实会简化为这个），它是 Microsoft 特定的扩展。这不是宏。这意味着它是一个编译器错误，编译器无法将这些专有属性传播到使用`auto`关键字定义的变量。

在这种情况下最好避免使用关键字，它可能比显式添加自己`auto`更整洁。`declspec`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T20:22:41.670

这绝对是一个编译器错误。我也可以用我自己的数学课重现它。我在[这里](http://connect.microsoft.com/VisualStudio/feedback/details/775238/visual-c-2012-auto-keyword-ignores-structure-memory-alignment)开了一张票，所以投票给它。如前所述，您可以避免使用 auto 关键字。或者您可以编译到不存在错误的 x64（或者至少我无法重现它；我的不那么简单的程序可以完美运行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T06:11:00.790

对于 Visual Studio 2012，我能够通过将语句分成两行来实现“解决方法”：

```
XMMATRIX mtxMyWorldTrnspd = mtxMyWorld;
mtxMyWorldTrnspd = XMMatrixTranspose(mtxMyWorldTrnspd); 
```

# linux - cron 作业的服务器使用情况是什么？

> ID：12255298
> 
> 赞同：4
> 
> 时间：2012-09-04T00:10:41.070
> 
> 标签：linux, cron, debian, crontab

好吧，我正在考虑创建一个依赖于 cronjob 的 webscript。
我想知道，它是否会对 crontabs 的数量造成任何服务器损坏？

假设我每天要完成 50 个 crontab，它会伤害服务器吗？如果不是，在 512MB 内存的 linux 服务器中添加的最大 crontab 数量是多少

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:24:36.227

当您创建新作业时，`cron`守护进程调用函数`job_add`( `job.c`)，该函数将内存分配给作业并将其添加到作业列表的尾部。该作业是在堆上分配的，所以理论上你只受到机器上安装的 RAM 的限制。

CRON 代码中的一些注释：

职位结构：

```
typedef struct _job {
    struct _job     *next;
    entry           *e;
    user            *u;
} job; 
```

每个用户 crontab 条目由以下内容定义：

```
typedef struct _entry {
        struct _entry   *next;
        uid_t           uid;
        gid_t           gid;
        char            **envp;
        char            *cmd;
        bitstr_t        bit_decl(minute, MINUTE_COUNT);
        bitstr_t        bit_decl(hour,   HOUR_COUNT);
        bitstr_t        bit_decl(dom,    DOM_COUNT);
        bitstr_t        bit_decl(month,  MONTH_COUNT);
        bitstr_t        bit_decl(dow,    DOW_COUNT);
        int             flags;
#define DOM_STAR        0x01
#define DOW_STAR        0x02
#define WHEN_REBOOT     0x04
} entry; 
```

和用户结构：

```
typedef struct _user {
        struct _user    *next, *prev;   /* links */
        char            *name;
        time_t          mtime;          /* last modtime of crontab */
        entry           *crontab;       /* this person's crontab */
} user; 
```

您可以看到此结构不会占用大量内存。如果您对如何实现工作感到好奇`cron`，您可以在此处查看代码：[cron ubuntu source](https://launchpad.net/ubuntu/+archive/primary/+files/cron_3.0pl1.orig.tar.gz)。

# javascript - 创建一个带有可变字段的 json 对象

> ID：12255300
> 
> 赞同：0
> 
> 时间：2012-09-04T00:11:03.057
> 
> 标签：javascript, json, morris.js

我目前正在尝试使用 morris.js 创建图表。我得到了一个 JSON 对象，需要让它看起来像另一个。Morris.js 需要一个看起来像这样的数组

```
var day_data = [
        {"period": "2012-10-01", "licensed": 3407, "sorned": 660},
        {"period": "2012-09-17", "licensed": 3171, "sorned": 660},
        {"period": "2012-09-16", "licensed": 3171, "sorned": 676},
        {"period": "2012-09-15", "licensed": 3201, "sorned": 656},
        {"period": "2012-09-10", "licensed": 3215, "sorned": 622}
        ]; 
```

如果对象看起来令人困惑，这里是链接。它应该是他们网站[http://oesmith.github.com/morris.js/](http://oesmith.github.com/morris.js/)上第一个图表数据的缩短版本 。它非常简单，句点是 x 坐标，许可和排序是它们相应行的 y 坐标。

这是给我的数据

```
var trendline = {"command":[
    {"keyValuePairs":["2012-08-10 22:00:00|1884978","2012-08-10 21:00:00|3135378","2012-08-10 18:00:00|2541438","2012-08-09 20:00:00|647082","2012-08-10 19:00:00|3194772","2012-08-09 16:00:00|2782140","2012-08-10 20:00:00|3669924"],
    "keyword":"Obama"},
    {"keyValuePairs":["2012-08-10 22:00:00|1884978","2012-08-10 21:00:00|3135378","2012-08-10 18:00:00|2541438","2012-08-09 20:00:00|647082","2012-08-10 19:00:00|3194772","2012-08-09 16:00:00|2782140","2012-08-10 20:00:00|3669924"],
    "keyword":"Romney"}]} 
```

我需要从 keyValuePairs 中提取所有数据并将其与其关键字相关联，因此看起来像第一个数组

```
{"period": "2012-10-01", "Obama": 1884978, "Romney": 1884978},
 ...
 ... 
```

我知道从趋势线 JSON 对象中获取数据，但我不知道如何构造 morris.js 插件可以使用的新 JSON 对象。更具体地说，我不知道如何使用变量创建 JSON 对象。

```
trendline.dog = [cat]; 
```

将创建一个 json 对象，其字段 dog 设置为值 cat。但是，我需要获取每个关键字（奥巴马、罗姆尼...等）并有一个与之关联的字段并为其设置一个值。由于我不知道字段的数量或它们的名称，因此我不知道如何创建此对象。

假设我不能改变我获得数据的方式，因为我不写那部分。此外，我可以只给我两个关键字（奥巴马/罗姆尼），就像在我的例子中一样，或者我可以给 y 值的任意数量的关键字。

抱歉，篇幅较长。任何帮助，将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:12:15.737

这是你的圣诞礼物。

```
<script type="text/javascript">
var trendline =
    {
        "command": [
        {
            "keyValuePairs":
                [
                "2012-08-10 22:00:00|1884978",
                "2012-08-10 21:00:00|3135378",
                "2012-08-10 18:00:00|2541438",
                "2012-08-09 20:00:00|647082",
                "2012-08-10 19:00:00|3194772",
                "2012-08-09 16:00:00|2782140",
                "2012-08-10 20:00:00|3669924"
                ],
            "keyword": "Obama"
        },
        {
            "keyValuePairs":
                [
                    "2012-08-10 22:00:00|1884978",
                    "2012-08-10 21:00:00|3135378",
                    "2012-08-10 18:00:00|2541438",
                    "2012-08-09 20:00:00|647082",
                    "2012-08-10 19:00:00|3194772",
                    "2012-08-09 16:00:00|2782140",
                    "2012-08-10 20:00:00|3669924"
                ],
            "keyword": "Romney"
        }]
    }
var cmd = trendline.command,
    day_data = [],
    split,
    date,
    num,
    obj;
//
for (var i = 0; i < cmd.length; i++) {
    //
    if (i == 1) { break; };
    //
    for (var ii = 0; ii < cmd[i].keyValuePairs.length; ii++) {
        //debugger
        split = cmd[i].keyValuePairs[ii].split('|');
        date = split[0].substring(0, split[0].indexOf(' '));
        num = split[1];

        obj = {};
        obj['period'] = date;
        //Can 1
        obj[cmd[i].keyword] = num;
        //
        split = cmd[i + 1].keyValuePairs[ii].split('|');
        num = split[1];
        //Can 2
        obj[cmd[i + 1].keyword] = num;
        //
        day_data.push(obj);
    };
}; 
```

# ruby-on-rails - 如何在 Ruby 中获取方法的完全限定名称？

> ID：12255303
> 
> 赞同：0
> 
> 时间：2012-09-04T00:11:55.563
> 
> 标签：ruby-on-rails, ruby, cucumber

假设我在 Ruby 的工作区中有一个可用的方法。有没有我可以使用的命令来恢复方法的完全限定名称？

我正在寻找类似于 Matlab 中的[which](http://www.mathworks.com/help/techdoc/ref/which.html)函数的东西，它为给定的任何参数返回一个明确的名称。

我问是因为我正在 Cucumber 中编写一个需要发送特定 GET 和 POST 请求的测试。我的工作区中同时拥有`get`和`post`方法，但我没有自己导入它们，所以我不知道它们来自哪里。我想查看这些方法的文档。为了找到文档，我需要知道它们是在哪个模块中定义的。我正在尝试获取完全限定的名称以找出它们来自哪个模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:07:03.273

我想到了。Andrew Marshall 留下了一条评论，为我指明了正确的方向。

首先我安装了[pry](http://pryrepl.org/)，将它包含在我的 gemfile 中并运行`bundle install`。

然后我插入`binding.pry`我的测试代码。当我运行测试时，这让我陷入了一个撬动会话。

在 pry 会话中，我输入了[`ls`command](https://github.com/pry/pry/wiki/State-navigation#wiki-Ls)，其中列出了我的上下文中的所有变量。我发现`get`并`post`在`Rack::Test::Methods#methods`.

```
Rack::Test::Methods#methods: _current_session_names  authorize  basic_authorize  build_rack_mock_session  build_rack_test_session  clear_cookies  current_session  delete  digest_authorize  follow_redirect!  get  head  header  last_request  last_response  options  post  put  rack_mock_session  rack_test_session  request  set_cookie  with_session 
```

因此，找出工作区中方法的 FQN 的一种方法是运行 Pry 的`ls`命令，然后检查输出。

# c# - 有没有办法跟踪数据上下文何时命中数据库？

> ID：12255304
> 
> 赞同：2
> 
> 时间：2012-09-04T00:12:11.043
> 
> 标签：c#, linq, linq-to-sql

我在 wpf 应用程序中为一组表单使用数据上下文对象，并将一些控件绑定到表的某些子表。我想跟踪数据上下文何时访问数据库。实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T00:22:27.790

使用[`DataContext.Log`](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.log.aspx)属性：

```
db.Log = Console.Out; 
```

你`db`的`DataContext`. 如果您构造 的多个实例，请在构造函数内部`DataContext`设置，以便它们都被正确记录。`Log``DataContext`

您可以使用此技术将日志记录到文件、内存或调试窗口，如[本教程](http://damieng.com/blog/2008/07/30/linq-to-sql-log-to-debug-window-file-memory-or-multiple-writers)中所示。如果您定义了一个自定义[`TextWriter`](http://msdn.microsoft.com/en-us/library/system.io.textwriter.aspx)派生，您可以在访问数据库时输出当前`DateTime.Now`以及相关的 SQL 语句。

您的扩展`TextWriter`可能看起来像这样：

```
class LoggingTextWriter : TextWriter 
{
    private const string LogFilePath = @"C:\your_log_file.txt";

    public override void Write(char[] buffer, int index, int count) 
    {
        Write(new String(buffer, index, count));
    }

    public override void Write(string value) 
    {
        File.AppendAllText(LogFilePath, DateTime.Now + value);
    }

    public override Encoding Encoding
    {
        get { return Encoding.Default; }
    }
} 
```

和

```
db.Log = new LoggingTextWriter(); 
```

# php - 这是建立 MVC 框架的正确方法吗？

> ID：12255307
> 
> 赞同：0
> 
> 时间：2012-09-04T00:12:30.770
> 
> 标签：php, model-view-controller, frameworks

因此，我一直在研究并致力于构建自己的 MVC 框架，但不断遇到 6 种不同的实现方式，我想知道到目前为止我是否走在正确的轨道上。是的，我知道我可以使用 Zend 或其他类似的工具，但我真的想了解框架是如何工作的，而不仅仅是使用其他人的。

**这是我的索引文件的简单版本：**

```
if(isset($_GET['url']))
{
    $url = strtolower($_GET['url']);
}
else
{
    $url = 'home';
}

switch($url)  // Select the controller based on the GET var in the url
{
    case 'home': include(ROOT_DIR . 'app/controllers/homeCon.php'); // This page has the link to the DB test page on it
        break;
    case 'dbtest': include(ROOT_DIR . 'app/controllers/dbTestCon.php');
        break;
    default: include(ROOT_DIR . 'app/views/error404View.php');
} 
```

**这是我的 dbTestCon.php 控制器的简单版本：**

```
if(isset($_POST['dbSubBtn']))
{
    $model = new DbTestModel();

    if($_POST['firstName'] != '' && $_POST['lastName'] != '')
    {
        $model->submitToDb($_POST['firstName'], $_POST['lastName'])
        $model->displayPage('goodToGo');
    }  
    else
    {
        $model->displayPage('noInput');
    }
}
else
{
    $model->displayPage('normal');
} 
```

**这是我的 DbTestModel.php：**

```
class DbTestModel
{
    public function displayPage($version)
    {
        $title = "DB Test Page";
        $themeStylesheetPath = 'public/css/cssStyles.css';

        include(ROOT_DIR . 'app/views/headerView.php');
        include(ROOT_DIR . 'app/views/dbTestView.php');

        switch($version)
        {
            case 'goodToGo':
                include(ROOT_DIR . 'app/views/dbTestSuccessView.php');
                break;
            case 'noInput':
                include(ROOT_DIR . 'app/views/noInputView.php');
                break;
        }
        include(ROOT_DIR . 'app/views/footerView.php');
    }

    public function submitToDb($firstName, $lastName)
    {
        try 
        {
            $db = new PDO("mysql:host=" . DB_HOST . ";dbname=" . DB_NAME, DB_USER, DB_PASS); 
            $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 

            $sql = $db->prepare('insert into dbtest(firstName, lastName) values(:firstName, :lastName)');
            $sql->bindParam(':firstName', $firstName);
            $sql->bindParam(':lastName', $lastName);
            $sql->execute();
            $db = null;
        }
        catch(PDOException $e)
        {
            echo "It seems there was an error.  Please refresh your browser and try again. " . $e->getMessage();
        }
    }
} 
```

**这是我的 dbTestView.php：**

```
<form name="dbTestForm" id="dbTestForm" method="POST" action="dbtest">
    <label for="firstName">First Name</label>
    <input type="text" name="firstName" id="firstName" />
    <label for="lastName">Last Name</label>
    <input type="text" name="lastName" id="lastName" />
    <input type="submit" name="dbSubBtn" id="dbSubBtn" value="Submit to DB" />
</form> 
```

这个简单的示例适用于我的测试环境，但我担心我会在下一个项目中开始使用它，并在进行到一半时意识到我的框架存在根本性的问题，必须重新开始。感谢您提供任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T13:29:58.660

## 不，这不是正确的方法！

*   完全不完善的路由机制：

    在您当前的代码库中，您必须手动*注册*每个控制器，这显然会使引导阶段（*index.php*文件）变得混乱且容易出错。

*   你有“模型”渲染模板

    即使在对 MVC 设计模式最原始的解释中，这也是错误的。视图应该是包含表示逻辑的实例，而不是由您称为“模型”的东西呈现的模板。

*   模型是一个层，而不是任何单个类

    MVC 设计模式由两层组成：表示层和模型层。模型层包含所有领域业务逻辑，并通过某种抽象形式与存储交互。

*   不要每次都重新初始化数据库连接。

    每次您需要使用数据库时，您的“模型”都会初始化新的 PDO 实例。相反，您应该只创建一次连接实例并通过构造函数将其传递给每个对象。

*   停止编写带有隐藏警告和错误消息的代码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:27:52.253

在同一个地方进行数据存储（例如模型逻辑）和输出（例如视图逻辑）通常被认为是不好的形式，这发生在 DbTestModel 中。

您可以进行绝对大量的重构，但我不会为您详细说明，因为我最终会写段落。

我强烈建议您阅读 Fabien Potiencer 的博客系列[Create your own framework... on the top of the Symfony2 Components](http://fabien.potencier.org/article/50/create-your-own-framework-on-top-of-the-symfony2-components-part-1)。

即使你不想使用他的组件来帮助构建任何东西，它也应该给你*很多*好主意。

# java - 如何将 24 位 PNG 保存/转换为 8 位 PNG？

> ID：12255313
> 
> 赞同：5
> 
> 时间：2012-09-04T00:13:06.363
> 
> 标签：java, railo, jai, cfimage, cfml

我在[Railo中使用](http://getrailo.org)[ImageNew](http://cfdocs.org/imagenew)（及相关）创建图像，它在幕后使用[JAI](http://java.sun.com/javase/technologies/desktop/media/jai/)。

当我保存图像时，我得到一个 24 位的 PNG，但我只需要 8 位。（只需使用图形编辑器将文件重新保存为 8 位，就会产生四分之一到一半的字节数。）

ImageWrite 不提供有关 PNG 位深度的任何功能，我也找不到使用 JAI 本身执行此操作的任何详细信息（获取[http://jai-core.dev.java.net/](http://jai-core.dev.java.net/)的 DNS 错误）

**更新：**

使用[Quantize](http://www.jhlabs.com/ip/filters/QuantizeFilter.html) [ImageFilter](http://wiki.getrailo.org/wiki/FUNCTION%3aIMAGEFILTER)，我可以将颜色数量减少到 256 - 这会显着减少文件大小（但仍不如手动处理），但仍会生成 24 位/未调色的 PNG 文件。不幸的是，它也消除了我需要保留（或至少重新应用）的透明度。

如果我获取这个生成的文件并通过[OptiPNG](http://optipng.sourceforge.net/)（一种无损 PNG 优化器）运行它，它确实会生成索引的 8 位文件，并且会减少相当多的字节并提供可接受的文件大小。

因此，难题的剩余步骤：**如何**在 ImageFilter 移除透明度后重新应用透明度（或者更好的是，防止它被移除）。

我想我需要一些方法来`Image.replace('white','transparent')`作为基于 Railo/Java 的解决方案或跨平台命令行工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:14:30.487

好的，所以我有一个可以产生可接受结果的工作解决方案 - 最终文件比我原来的手动过程略小，但在视觉上无法区分。

该解决方案不像我想要的那样跨平台（需要为 OptiPNG 查找/构建 Linux 二进制文件），但它仍然是一个足够好的解决方案。

正如 Leigh 在问题评论中所建议的那样，我使用的是量化器来减少颜色，然后使用 MapColorsFilter 来修复量化器破坏透明度的事实，最后使用 OptiPNG 将生成的文件压缩到合理的大小。

以下是相关代码：

```
<cfscript>
    var Filename = './filename.png'
    var MyImage = NewImage(Filename)

    ImageFilter(MyImage,'quantize',{numColors:256,dither:false})

    // ImageFilter(MyImage,'MapColors',{oldColor:'white',newColor:'ffffff00'})
    var TransImage = ImageMapColors(MyImage,'white','ffffff00')

    ImageWrite( TransImage , Filename )
</cfscript>

<cfexecute
    name      = "#Variables.OptiPngExecutable#"
    arguments = "-o9 #Filename#"
    timeout   = 30
/> 
```

Railo 的 MapColors 过滤器的 ImageFilter 目前存在一个错误，因此我必须直接访问过滤器，这是我用来解决此问题的代码：

```
<cffunction name="ImageMapColors" output=false >
    <cfargument name="Image" rtype="Image" required />
    <cfargument name="Old"   type="String" required />
    <cfargument name="New"   type="String" required />

    <cfset var ObjKey = 'ColorReplacer_#Arguments.Old#_#Arguments.New#' />

    <cfif NOT StructKeyExists(Variables,ObjKey)>
        <cfset var Old = createObject('java','railo.commons.color.ColorCaster').toColor(Arguments.Old) />
        <cfset var New = createObject('java','railo.commons.color.ColorCaster').toColor(Arguments.New) />
        <cfset Variables[ObjKey] = createObject("java","railo.runtime.img.filter.MapColorsFilter")
            .init(Old.getRGB(),New.getRGB()) />
    </cfif>

    <cfreturn ImageNew( Variables[ObjKey].filter(ImageGetBufferedImage(Arguments.Image),{}) ) />
</cffunction> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:14:55.140

[pngquant](http://pngquant.org/) with`cfexecute`应该可以满足您的需求。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T00:46:24.420

您是否尝试过使用中间步骤首先使用 的“质量”属性`ImageWrite()`保存为 JPEG，然后保存为 PNG？只是一个想法。猜测使用`.3`或`.4`作为价值可能有效？

# haskell - Haskell：将非无限列表变成无限列表 + 惰性 (euler 391)

> ID：12255315
> 
> 赞同：3
> 
> 时间：2012-09-04T00:13:15.600
> 
> 标签：haskell

我编写了以下 Haskell 代码来生成一个列表，其中第 n 个元素是 1 的个数，将 1..n 写为二进制数（顺便说一下，它与 euler 391 有关）：

```
buildList :: a -> (a -> a) -> [a]
buildList start f = start : buildList (f start) f

differences :: [[Int]]
differences = buildList [0] (\x -> x ++ map (+1) x)

sequenceK' :: Int -> [Int]
sequenceK' n = tail $ scanl (+) 0 (last $ take n differences) 
```

这导致`sequenceK' n`给出 2^(n-1) 个元素的列表。

这个问题有两个部分：

a) 为什么计算所需的时间`head $ sequenceK' n`会随着 n 的增加而增加？- 由于 ghc 的懒惰，我希望时间或多或少保持不变。

b）是否可以定义此列表的无限版本，以便我可以做类似的事情`take`而`takeWhile`不必担心传递给的参数的值`sequenceK'`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T01:32:53.453

a) 因为你在打电话`last $ take n differences`，它必须做更多的工作，越大越好`n`。

b) 是的，这是可能的。最少思考的解决方案是只取我们在每个特定深度看到的最早元素：

```
*Main> take 20 . map head . transpose $ differences
[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4,1,2,2,3] 
```

更好的解决方案是只生成有意义的位。我们可以通过观察以下等式来做到这一点：

```
differences' = 1 : (differences' >>= \x -> [x, x+1]) 
```

实际上，这有点偏离，您可能会猜到：

```
*Main> take 20 differences'
[1,1,2,1,2,2,3,1,2,2,3,2,3,3,4,1,2,2,3,2,3] 
```

但是只要`0`在前面加上一个就可以很容易地修复它。

# ruby-on-rails - Ruby on Rails - 在 URL 中隐藏 user_id

> ID：12255316
> 
> 赞同：2
> 
> 时间：2012-09-04T00:13:34.007
> 
> 标签：ruby-on-rails, ruby, url

如果可以的话，我想在 URL 中隐藏 user_id。

[http://domain.com:3000/users/1](http://domain.com:3000/users/1)

这是页面信息。

* * *

动作：显示控制器：用户 ID：'1'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T00:25:46.133

URL 中的 id 是必需的，以便控制器/操作知道它应该在页面上显示哪个用户。在这种情况下，它显示 id 为 1 的用户，但在其他情况下，您可能希望显示另一个用户的详细信息。

可以`id`将 URL 中的 替换为其他标识信息，例如`username`.

为此，请参阅[http://railscasts.com/episodes/63-model-name-in-url](http://railscasts.com/episodes/63-model-name-in-url)。您只需覆盖`to_param`模型中的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:32:26.753

有一个新的 Railscast 使用了friendly_id，这是一个提供 URL 重命名的很棒的 gem： [http ://railscasts.com/episodes/314-pretty-urls-with-friendlyid](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:38:20.277

去做这个。在您的用户模型中，确保您拥有：

```
is_sluggable :whatever-attribute-you-want-to-mask-users/1 
```

在您的用户控制器中使用：

```
@user = User.find_using_slug(params[:user]) 
```

# textures - 在 D3D11 中创建纹理后更新纹理的 miplevel

> ID：12255324
> 
> 赞同：1
> 
> 时间：2012-09-04T00:15:53.533
> 
> 标签：textures, direct3d, texture2d, mipmaps, direct3d11

[在 Direct 3D 11 中，可以使用ID3D11DeviceContext::CreateTexture2D](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476521%28v=vs.85%29.aspx)创建一个空纹理并使用[ID3D11DeviceContext::UpdateSubresource](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476486%28v=vs.85%29.aspx)方法更新纹理数据，指定所需的 mip 级别以在 D3D11_BOX 结构中进行更改。虽然这是可能的，但是否可以在 Direct 3D 中创建 2D 纹理后更改其 mip 级别的数量？

我知道这个问题引出了一个“你为什么要那样做？！” 响应，但由于一些移植/测试要求，我不得不这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:57:47.047

不，您不能在创建纹理后更改 mipmap 的数量。您只能创建另一个纹理并使用[ID3D11DeviceContext::CopySubresourceRegion](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476394%28v=vs.85%29.aspx)来复制所需的 mipmap（尽管最好直接在具有正确 mipmap 级别的纹理上工作......）。

# javascript - 仅在页面加载时调试 Jquery

> ID：12255325
> 
> 赞同：0
> 
> 时间：2012-09-04T00:16:11.373
> 
> 标签：javascript, jquery, debugging, google-chrome, firebug

好的，所以我熟悉一些用于调试附加到元素的事件的技术。事件，如单击、鼠标按下、焦点等。

这些很简单，但我想做的是在文档加载时记录由 jquery 插件（如滑块、表单插件等）触发的事件序列。当页面加载和引入新元素以及更改或删除一些旧元素时，有一些原生标记会发生变化。

现在我尝试了 chrome 工具和 firefox 并设置断点以中断对某些元素的子树修改，我确定正在更改，但这仅在页面加载完成后才有效。

你们会建议什么方法来调试这种情况？

没有涉及代码，它只是一个抽象的一般情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T00:22:48.137

页面加载完成后，单击 Chrome 开发者工具中的“暂停”按钮，刷新页面，它会立即暂停——您可以单步执行，直到加载之前您想要的点。确保 JQuery 文件、插件等在开发中，未缩小版本才能正常工作。

# ruby - 无法从 Sinatra 连接到 Redis

> ID：12255327
> 
> 赞同：3
> 
> 时间：2012-09-04T00:16:55.833
> 
> 标签：ruby, heroku, sinatra, redis, redistogo

我正在尝试将 redis 连接到我正在构建的 Sinatra 应用程序：

```
require 'rubygems'
require 'sinatra'
#require 'sinatra/synchrony'
require 'redis'
require 'mongo_mapper'

require './startup'

def stats_connect
 uri = URI.parse('redis://redistogo:xxxxxxxxxxxxxxxxxx@barb.redistogo.com:1337/')
 puts 'connecting to... ' + uri.to_s
 redis = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password)
 puts "Statistics connected >> OK" if redis
 return redis
end

stats = stats_connect

post('/') do
 #...
end 
```

如果我使用工头运行以下应用程序，则会收到此错误：

*   18:09:02 web.1 | 从 pid 825 开始

*   **18:09:08 web.1 | /Users/vladdypwnz/.rvm/gems/ruby-1.9.2-p180/gems/redis-3.0.1/lib/redis/connection/ruby.rb:113:in `connect_nonblock'：无法分配请求的地址 -连接(2) (Errno::EADDRNOTAVAIL)**

*   18:09:08 web.1 | 来自 /Users/vladdypwnz/.rvm/gems/ruby-1.9.2-p180/gems/redis-3.0.1/lib/redis/connection/ruby.rb:113:in `connect'

当我推送到 heroku 时，错误变为：

**/app/vendor/bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis/client.rb:260:in `rescue inestablish_connection'：连接到 barb.redistogo.com 上的 Redis 时超时： 0 (Redis::CannotConnectError)**

如果我进入 IRB，需要 redis 并使用我创建的完全相同的 stats_connect() 方法，redis 工作得很好，我可以访问所有内容并创建密钥。

这是怎么回事？我完全被难住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T00:32:07.337

你确定你的 redis 正在 barb.redistogo.com:1337 上运行吗？几周前，我将一个使用 redis 的应用程序部署到 heroku 并使用了以下配置：

```
uri = URI.parse(ENV["REDISTOGO_URL"])
redis = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password) 
```

在本地运行它我做了：

```
redis = Redis.new(:host => "localhost", :port => 6379) 
```

# java - 以字符串形式获取 Java 类型的签名

> ID：12255335
> 
> 赞同：1
> 
> 时间：2012-09-04T00:18:10.213
> 
> 标签：java, reflection, bytecode, javassist

我需要获取（作为字符串）某些 Java 类型的*类型签名*。

例如，这是某些[ParameterizedType](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/ParameterizedType.html)的类型签名：

```
Lorg/mapackage/MyClass<Ljava/lang/String;>; 
```

在使用 Javassist 开发的应用程序的上下文中，我需要它。

为了更好地解释我在寻找什么，我展示了一个`createGetter`使用 Javassist 为私有字段生成 getter 方法的方法的摘录。该字段的类型是参数化类型（即，它使用泛型）。

该`createGetter`方法的第一个参数是字段的类型，第二个参数是字段的名称，第三个参数是应该添加该方法的类：

```
public CtMethod createGetter(Type propertyType, String propertyName, CtClass ctDeclaringClass) {
    CtMethod ctGetterMethod = ...

    if(propertyType instanceof ParameterizedType //parameterized "single" type
      || propertyType instanceof GenericArrayType) { //parameterized array
        String signature = asGenericSignature(propertyType); //MISSING PIECE OF THE PUZZLE !
        ctGetterMethod.setGenericSignature(signature);
    }   
    return ctGetterMethod;
} 
```

例如，如果我有一堂课

```
public class TestClass{
  private MyClass<String> myField;
} 
```

然后在调用`createGetter`field 的方法后`myField`，类变为：

```
public class TestClass{
  private MyClass<String> myField;

  public MyClass<String> getMyField() {
    return MyClass<String> myField;
  }
} 
```

生成的 getter 方法的返回类型应该与字段具有相同的通用签名（代码可以在没有具有相同字段通用签名的方法的情况下编译，因为只有相同的类对编译器来说很好。我需要它的原因具有相同类型的通用签名此处不解释）。

该`createGetter`方法的代码说明，使用Javassist，为了设置一个方法的泛型类型签名，我需要首先获得一个String这样的类型签名（如果有其他方法请告诉我）。我知道 getter 方法应该具有的确切参数化类型，因为它与字段完全相同。但我有这样的类型作为[ParameterizedType](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/ParameterizedType.html)的实例。

我的问题是：在给定任意 Java [Type](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Type.html)的情况下，如何将这些类型签名作为字符串（包括类型参数数据）获得？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:38:51.147

Eclipse 在内部使用 Java 源代码的描述符/签名。这些还包括可能对您有用的通用信息。Interface IMethod 可能是一个很好的调查起点。

# architecture - 云代工多进程

> ID：12255342
> 
> 赞同：1
> 
> 时间：2012-09-04T00:19:00.877
> 
> 标签：architecture, cloud-foundry

我正在为云代工设计一个应用程序。

将应用程序在其服务“接缝”处拆分到不同的进程，即每个服务在（可能多个）不同的进程上运行是最佳实践吗？

如果是这样，在这些进程之间进行通信的最佳方式是什么？通过 MQ 服务删除？这对特定服务的升级有何影响（这可能会破坏 Java API）？

如果不是，这是否意味着我应该在每个 DEA 中运行所有服务？开销不会是灾难性的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:13:35.790

您可能会发现 Cloud Foundry 开发人员倡导者之一的这套牌很有用 - [http://www.slideshare.net/chris.e.richardson/decomposing-applications-for-deployability-and-scalability-cf-india-julyaugust-2012](http://www.slideshare.net/chris.e.richardson/decomposing-applications-for-deployability-and-scalability-cf-india-julyaugust-2012)

正如 Dan 提到的，RabbitMQ 是一个明显的解决方案，可以解决实例和应用程序部分之间的通信需求，并且作为 Cloud Foundry 服务堆栈的一部分“免费”提供。这并不意味着其他协议永远都不合适，但像消息传递层这样的东西肯定可以通过更简单地实现水平横向扩展来提高可伸缩性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T14:15:12.817

我不是 Java 方面的权威，但是是的，某种消息队列非常适合在应用程序的不同实例之间进行通信，例如 RabbitMQ 或 Resque。

我不确定您的最后一句话是什么意思，DEA 负责运行应用程序的实例，它们对服务的运行方式没有任何影响。

# php - header.php 不包括在自定义页面 wordpress 中

> ID：12255343
> 
> 赞同：0
> 
> 时间：2012-09-04T00:19:02.133
> 
> 标签：php, wordpress, wordpress-theming

请让我纠正问题出在哪里，我该怎么办，

我正在尝试在 wordpress 中制作我的自定义页面模板。默认登录页面，
我所做的是，刚刚创建了一个文件`jp_home.php`并设置了`Template Name: name here`.

然后创建一个名为 home 的页面并选择主页的主题，然后我继续`settings>reading>`选择静态页面并选择我的主页作为登录页面。

`themes/twentyeleven/`我在模板中所做的所有这些更改。

**现在的问题：**在`jp_home.php`

```
<?php
/**
 * Template Name: WebTech Eleven
 */

//get_header('new');
?>

<!-- Wrapper Start -->
<div id="wrapper">
    Here is my Page
</div>
<!-- End Wrapper -->
<?php
    get_footer();   
//require("footer_old.php");
?> 
```

评论后`get_header()`我还在看我的`header.php`我不知道为什么？其余部分不可见。谁能解释我做错了什么？?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:02:43.137

好吧，如果您仍然看到标题中的内容并且您的`jp_home.php`WordPress 中没有任何更改/添加没有提取该模板文件。

听起来你正在做你需要做的一切，但让我们回顾一下如何完成你正在寻找的东西。

确保您`jp_home.php`在`twentyeleven`主题目录中有。有了这些，继续创建您的`Home`页面。在模板选项下选择`WebTech Eleven`并保存页面。之后，转到您的设置>阅读并确保您的首页设置为显示静态页面，并将其设置为`Home`。

确保您实际上导航到正确的主页，并且您将看到新模板正在运行（这样做的一个好方法是导航到编辑您的主页并单击“查看页面”）。我只是在本地测试了所有这些，它对我有用。

这里也非常清晰简洁的教程：[http ://wsmithdesign.wordpress.com/2011/01/19/creating-a-custom-wordpress-home-page-template/](http://wsmithdesign.wordpress.com/2011/01/19/creating-a-custom-wordpress-home-page-template/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T02:47:38.337

转到页面 - >所有页面并打开您要在其上使用模板的页面（在您的情况下为静态页面）。在编辑页面，你选择了模板下的“WebTech 十一”吗？

![](../Images/d36c975fe0e482048e1aef78a65d83e6.png)

另外，我必须问。如果您在那里使用任何缓存，您是否尝试过清除客户端和服务器端的缓存？

# rest - Azure Rest Service 创建 OS 磁盘

> ID：12255346
> 
> 赞同：2
> 
> 时间：2012-09-04T00:20:58.567
> 
> 标签：rest, azure

我正在尝试使用添加磁盘 REST 服务（[http://msdn.microsoft.com/en-us/library/windowsazure/jj157178.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj157178.aspx)）将磁盘添加到订阅

我尝试了几乎所有解释的组合，但无论我做什么，磁盘都被列为数据磁盘。尝试使用提琴手检查 Azure PowerShell (https://www.windowsazure.com/en-us/manage/downloads/) 是如何导致错误的。根据 MS，您应该指定`HasOperatingSystem`但在使用 Microsoft 的`PScmdlet`. 如果你做一个列表磁盘（[http://msdn.microsoft.com/en-us/library/windowsazure/jj157176](http://msdn.microsoft.com/en-us/library/windowsazure/jj157176)）它也应该发送这个，但是从操作系统磁盘区分数据磁盘的唯一方法是天气“操作系统”是null 或包含“windows”/“Linux”。鉴于这些信息，我尝试使用/不使用操作系统和/或`HasOperatingSystem`所有组合创建磁盘，无论我最终总是成为数据磁盘。使用 Microsoft PowerShell`CDMLets`允许在 URI 中同时使用 HTTP 和 HTTPS，所以也尝试了这两种方法。

有没有人有要发送的 xml 的**工作**示例来创建 OS 磁盘？

```
<Disk xmlns="http://schemas.microsoft.com/windowsazure">
  <HasOperatingSystem>true</HasOperatingSystem>
  <Label>d2luZ3VuYXY3MDEtbmF2NzAxLTAtMjAxMjA4MjcxNTA5NTU=</Label>
  <MediaLink>http://winguvhd.blob.core.windows.net/nav701/nav701-0-20120827150955_osdisk.vhd</MediaLink>
  <Name>wingunav701-nav701-0-20120827150955</Name>
  <OS>Windows</OS>
</Disk> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T13:28:40.267

正如我在评论中提到的，文档确实存在问题。

试试这个作为你的请求负载。这是由编写 Windows Azure PowerShell Cmdlet 的 Microsoft 人员提供给我的：

```
<Disk xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/windowsazure">
  <OS>Windows</OS>
  <Label>mydisk.vhd</Label>
  <MediaLink>https://vmdemostorage.blob.core.windows.net/uploads/mydisk.vhd</MediaLink>
  <Name>mydisk.vhd</Name>
</Disk> 
```

我刚刚尝试使用上面的 XML，我可以在我的订阅中看到一个 OS 磁盘。

# php - 简单的 Dom Parser 获取表中的跨度值

> ID：12255347
> 
> 赞同：0
> 
> 时间：2012-09-04T00:21:00.197
> 
> 标签：php, simpledom

我正在使用[Simple DOM Parser](http://simplehtmldom.sourceforge.net/)，我正在尝试从动态表中获取一些信息，如下所示：

```
<table />
<tr>
   <td class="histogram-msg top-row">5 star</td>
   <td class="top-row bar-cell"><span class="bar bar5" style="width:150px">&nbsp;</span>&nbsp;<span>55</span></td>
</tr>
<tr>
   <td class="middle-row histogram-msg">4 star</td>
   <td class="middle-row bar-cell"><span class="bar bar4" style="width:65px">&nbsp;</span>&nbsp;<span>24</span></td>
</tr>
<tr>
   <td class="middle-row histogram-msg">3 star</td>
   <td class="middle-row bar-cell"><span class="bar bar3" style="width:38px">&nbsp;</span>&nbsp;<span>14</span></td>
</tr>
<tr>
   <td class="middle-row histogram-msg">2 star</td>
   <td class="middle-row bar-cell"><span class="bar bar2" style="width:19px">&nbsp;</span>&nbsp;<span>7</span></td>
</tr>
<tr>
   <td class="bottom-row histogram-msg">1 star</td>
   <td class="bottom-row bar-cell"><span class="bar bar1" style="width:35px">&nbsp;</span>&nbsp;<span>13</span></td>
</tr>
</table> 
```

我正在尝试获取表中的值，即：5 星 | 55, 4 星 | 24 等

我得到这个信息`$ret = $html->find('.user-ratings');`，当我尝试打印跨度标签时，它只会给我一堆空白。

如何从上表中获取评级类型和值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:06:19.453

这将做你想做的事情：

```
<?php

include('simple_html_dom.php');

$f = file_get_html('s.html');

foreach($f->find('td[class=histogram-msg]') as $n) {

foreach($n->parent()->find('td[class=bar-cell]') as $p) {
    $ratings[] = array('stars' => $n->innertext, 
   'rating' => strip_tags(str_replace("&nbsp;", "", $p)));
    }
}

print_r($ratings);

Array
(
[0] => Array
    (
        [stars] => 5 star
        [rating] => 55
    )

[1] => Array
    (
        [stars] => 4 star
        [rating] => 24
    )

[2] => Array
    (
        [stars] => 3 star
        [rating] => 14
    )

[3] => Array
    (
        [stars] => 2 star
        [rating] => 7
    )

[4] => Array
    (
        [stars] => 1 star
        [rating] => 13
    )

) 
```

# c++ - C++ 模板编译器错误

> ID：12255353
> 
> 赞同：0
> 
> 时间：2012-09-04T00:22:02.153
> 
> 标签：c++, templates

我正在更新一些较旧的 Visual Studio C++ 代码，但无法确定此代码有什么问题。

```
TLineApproximator<T>::PointContainer::iterator TDPHull<typename T>::DP(typename PointContainer::iterator it, typename PointContainer::iterator jt)
{
    static double ld, rd, len_sq;
    static SHomog l;
    register SPoint *le;
    register SPoint *re;

    SPoint* i=&(*it);
    SPoint* j=&(*jt);   

    SPoint::CrossProduct(*i, *j, l);
    len_sq = l.x * l.x + l.y * l.y;

    if (j - i < 8)
    {       /* chain small */
        rd  = 0.0;
        for (le = i + 1; le < j; le++)
        {
            ld = SPoint::DotProduct(*le, l);
            if (ld < 0) ld = - ld;
            if (ld > rd) 
            {
                rd = ld;
                re = le;
            }
        }
        if (rd * rd > GetTol() * len_sq)
        {
            OutputVertex(DP(i, re)); 
            return(DP(re, j));
        }
        else
            return(j);
    }
    else
    {               /* chain large */
        int sbase, sbrk, mid, lo, m1, brk, m2, hi;
        double d1, d2;
        if ((m_phLeft.GetTop() - m_phLeft.GetBot()) > 8) 
        {
            /* left hull large */
            lo = m_phLeft.GetBot(); 
            hi = m_phLeft.GetTop() - 1;
            sbase = m_phLeft.SlopeSign(hi, lo, l);
            do
            {
                brk = (lo + hi) / 2;
                if (sbase == (sbrk = m_phLeft.SlopeSign(brk, brk+1, l)))
                    if (sbase == (m_phLeft.SlopeSign(lo, brk+1, l)))
                        lo = brk + 1;
                    else
                        hi = brk;
            }
            while (sbase == sbrk && lo < hi);

            m1 = brk;
            while (lo < m1)
            {
                mid = (lo + m1) / 2;
                if (sbase == (m_phLeft.SlopeSign(mid, mid+1, l)))
                    lo = mid + 1;
                else
                    m1 = mid;
            }

            m2 = brk;
            while (m2 < hi) 
            {
                mid = (m2 + hi) / 2;
                if (sbase == (m_phLeft.SlopeSign(mid, mid+1, l)))
                    hi = mid;
                else
                    m2 = mid + 1;
            };

            if ((d1 = SPoint::DotProduct(*m_phLeft.GetpElt(lo), l)) < 0) d1 = - d1;
            if ((d2 = SPoint::DotProduct(*m_phLeft.GetpElt(m2), l)) < 0) d2 = - d2;
            ld = (d1 > d2 ? (le = m_phLeft.GetpElt(lo), d1) : (le = m_phLeft.GetpElt(m2), d2));
        }
        else
        {           /* Few SPoints in left hull */
            ld = 0.0;
            for (mid = m_phLeft.GetBot(); mid < m_phLeft.GetTop(); mid++)
            {
                if ((d1 = SPoint::DotProduct(*m_phLeft.GetpElt(mid), l)) < 0) d1 = - d1;
                if (d1 > ld)
                {
                    ld = d1;
                    le = m_phLeft.GetpElt(mid);
                }
            }
        }

        if ((m_phRight.GetTop() - m_phRight.GetBot()) > 8)
        {           /* right hull large */
            lo = m_phRight.GetBot(); hi = m_phRight.GetTop() - 1;
            sbase = m_phRight.SlopeSign(hi, lo, l);
            do
            {
                brk = (lo + hi) / 2;
                if (sbase == (sbrk = m_phRight.SlopeSign(brk, brk+1, l)))
                    if (sbase == (m_phRight.SlopeSign(lo, brk+1, l)))
                        lo = brk + 1;
                    else
                        hi = brk;
            }
            while (sbase == sbrk && lo < hi);

            m1 = brk;
            while (lo < m1)
            {
                mid = (lo + m1) / 2;
                if (sbase == (m_phRight.SlopeSign(mid, mid+1, l)))
                    lo = mid + 1;
                else
                    m1 = mid;
            }

            m2 = brk;
            while (m2 < hi) 
            {
                mid = (m2 + hi) / 2;
                if (sbase == (m_phRight.SlopeSign(mid, mid+1, l)))
                    hi = mid;
                else
                    m2 = mid + 1;
            };

            if ((d1 = SPoint::DotProduct(*m_phRight.GetpElt(lo), l)) < 0) d1 = - d1;
            if ((d2 = SPoint::DotProduct(*m_phRight.GetpElt(m2), l)) < 0) d2 = - d2;
            rd = (d1 > d2 ? (re = m_phRight.GetpElt(lo), d1) : (re = m_phRight.GetpElt(m2), d2));
        }
        else
        {           /* Few SPoints in righthull */
            rd = 0.0;
            for (mid = m_phRight.GetBot(); mid < m_phRight.GetTop(); mid++)
            {
                if ((d1 = SPoint::DotProduct(*m_phRight.GetpElt(mid), l)) < 0) d1 = - d1;
                if (d1 > rd)
                {
                    rd = d1;
                    re = m_phRight.GetpElt(mid);
                }
            }
        }
    }

    if (ld > rd)
        if (ld * ld > GetTol() * len_sq)
        {               /* split left */
            register int tmpo; 

            while ((m_phLeft.GetHp() >= 0) 
                && ( (tmpo = m_phLeft.GetpOp()[m_phLeft.GetHp()] ), 
                ((re = m_phLeft.GetpHelt(m_phLeft.GetHp())) != le) || (tmpo != TPathHull<T>::StackPushOp)))
            {
                m_phLeft.DownHp();
                switch (tmpo)
                {
                case TPathHull<T>::StackPushOp:
                    m_phLeft.DownTop();
                    m_phLeft.UpBot();
                    break;
                case TPathHull<T>::StackTopOp:
                    m_phLeft.UpTop();
                    m_phLeft.SetTopElt(re);
                    break;
                case TPathHull<T>::StackBotOp:
                    m_phLeft.DownBot();
                    m_phLeft.SetBotElt(re);
                    break;
                }
            }

            Build(i, le);
            OutputVertex(DP(i, le));
            Build(le, j);
            return DP(le, j);
        }
        else
            return(j);
        else                /* extreme on right */
            if (rd * rd > GetTol() * len_sq)
            {               /* split right or both */
                if (m_pPHtag == re)
                    Build(i, re);
                else
                {           /* split right */
                    register int tmpo;

                    while ((m_phRight.GetHp() >= 0) 
                        && ((tmpo = m_phRight.GetpOp()[m_phRight.GetHp()]), 
                        ((le = m_phRight.GetpHelt(m_phRight.GetHp())) != re) || (tmpo != TPathHull<T>::StackPushOp)))
                    {
                        m_phRight.DownHp();
                        switch (tmpo)
                        {
                        case TPathHull<T>::StackPushOp:
                            m_phRight.DownTop();
                            m_phRight.UpBot();
                            break;
                        case TPathHull<T>::StackTopOp:
                            m_phRight.UpTop();
                            m_phRight.SetTopElt(le);
                            break;
                        case TPathHull<T>::StackBotOp:
                            m_phRight.DownBot();
                            m_phRight.SetBotElt(le);
                            break;
                        }
                    }
                }
                OutputVertex(DP(i, re));
                Build(re, j);
                return(DP(re, j));
            }
            else
                return(j);  
} 
```

错误是：

```
 dphull.h(155) : error C2664: 'hull::TDPHull<T>::DP' : cannot convert
 parameter 1 from 'hull::TLineApproximator<T>::SPoint *' to
 'std::_Vector_iterator<_Ty,_Alloc>'
         with
         [
             T=double
         ]
         and
         [
             T=double
         ]
         and
         [
             _Ty=hull::TLineApproximator<double>::SPoint,
             _Alloc=std::allocator<hull::TLineApproximator<double>::SPoint>
         ]
         No constructor could take the source type, or constructor overload resolution was ambiguous dphull.h(128) : while compiling
 class template member function 'std::_Vector_iterator<_Ty,_Alloc>
 hull::TDPHull<T>::DP(std::_Vector_iterator<_Ty,_Alloc>,std::_Vector_iterator<_Ty,_Alloc>)'
         with
         [
             _Ty=hull::TLineApproximator<double>::SPoint,
             _Alloc=std::allocator<hull::TLineApproximator<double>::SPoint>,
             T=double
         ]
         d:\src\inc`lude\`pglline2dlod.h(127) : see reference to class template instantiation 'hull::TDPHull<T>' being compiled
         with
         [
             T=double
         ]

SPoint* i=&(*it); 
```

DP函数定义

```
template <class T>
typename TLineApproximator<T>::PointContainer::iterator TDPHull<typename T>::DP(typename PointContainer::iterator it, typename PointContainer::iterator jt) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:31:52.017

您正在将两个传递`SPoint*`给一个需要两个的函数`PointerContainer::iterator`。这是错误的，除非`PointerContainer::iterator`是一个`typedef`to `SPoint*`（它可能是合理的，但我不认为它是你的情况）。

您的代码很可能需要这样：

```
OutputVertex(DP(it, [an iterator, maybe jt ?])); 
```

# c# - 运行项目时的 Visual Studio 安全问题 - 信任级别

> ID：12255357
> 
> 赞同：1
> 
> 时间：2012-09-04T00:22:07.763
> 
> 标签：c#, visual-studio-2010, full-trust

我在以前的机器上运行良好，但我买了一台新机器并在那里安装了我需要的一切（Win 7 x64 Enterprise，VS 2010 Proffesional SP1），我从我的 CVSNT 存储库下载了几个项目。

现在，在新 PC 中，我在运行应用程序时遇到了很多安全问题。最后一个说类似

> 尝试通过安全透明方法“Namespace.class.method()”访问安全关键方法“Namespace.class.method()”失败。
> 
> 程序集“Assembly”使用 AllowPartiallyTrustedCallersAttribute 进行标记，并使用 2 级安全透明模型。2 级透明度会导致 AllowPartiallyTrustedCallers 程序集中的所有方法默认变为安全透明，这可能是此异常的原因。

在此之前从未发生过，现在几个信任问题一直困扰着。

我以管理员身份运行 VS 并且没有启用 UAC。

关于如何解决这个问题以及为什么我的所有项目都存在信任问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T01:35:25.170

这是该项目第一次与 .Net 4.0 一起编译或使用吗？如果是这样，那么 .Net 4.0 中的安全模型已经发生了变化。微软试图简化代码访问安全 (CAS) 模型。桌面应用程序和其他非框架代码现在默认有一些限制，这些限制是在运行时而不是编译时或程序集加载时强制执行的。

要修复它，您可能需要添加`[assembly:SecurityRules(SecurityRuleSet.Level1)]`到您的`AssemblyInfo.cs`文件中。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/dd233103(v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/dd233103(v=VS.100).aspx)中的详细说明。

# r - 如何使用 R 和 {XML} 包创建 sitemap.xml 文件？

> ID：12255359
> 
> 赞同：2
> 
> 时间：2012-09-04T00:22:26.900
> 
> 标签：r, xml, xml-sitemap

我有一个链接向量，我想从中创建一个 sitemap.xml 文件（文件协议可从此处获得： [http](http://www.sitemaps.org/protocol.html) ://www.sitemaps.org/protocol.html ）

我了解 sitemap.xml 协议（它相当简单），但我不确定使用 {XML} 包的最聪明的方法是什么。

一个简单的例子：

```
 links <- c("http://r-statistics.com",
             "http://www.r-statistics.com/on/r/",
             "http://www.r-statistics.com/on/ubuntu/") 
```

如何使用“链接”来构建 sitemap.xml 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T14:09:09.723

是这样的东西你在找什么。（它使用`httr`包来获取最后修改的位，并使用非常有用的包直接写入 XML `whisker`。）

```
require(whisker)
require(httr)
tpl <- '
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
 {{#links}}
   <url>
      <loc>{{{loc}}}</loc>
      <lastmod>{{{lastmod}}}</lastmod>
      <changefreq>{{{changefreq}}}</changefreq>
      <priority>{{{priority}}}</priority>
   </url>
 {{/links}}
</urlset>
'

links <- c("http://r-statistics.com", "http://www.r-statistics.com/on/r/", "http://www.r-statistics.com/on/ubuntu/")

map_links <- function(l) {
  tmp <- GET(l)
  d <- tmp$headers[['last-modified']]

  list(loc=l,
       lastmod=format(as.Date(d,format="%a, %d %b %Y %H:%M:%S")),
       changefreq="monthly",
       priority="0.8")
}

links <- lapply(links, map_links)

cat(whisker.render(tpl)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-30T16:59:08.017

我无法使用`@jverzani`的解决方案，因为我无法从 cat 输出创建有效的 xml 文件。因此，我创建了一个替代方案。

```
## Input a data.frame with 4 columns: loc, lastmod, changefreq, and priority
## This data.frame is named sm in the code below

library(XML)
doc <- newXMLDoc()
root <- newXMLNode("urlset", doc = doc)
temp <- newXMLNamespace(root, "http://www.sitemaps.org/schemas/sitemap/0.9")
temp <- newXMLNamespace(root, "http://www.google.com/schemas/sitemap-image/1.1", "image")

for (i in 1:nrow(sm))
{
  urlNode <- newXMLNode("url", parent = root)
  newXMLNode("loc", sm$loc[i], parent = urlNode)
  newXMLNode("lastmod", sm$lastmod[i], parent = urlNode)
  newXMLNode("changefreq", sm$changefreq[i], parent = urlNode)
  newXMLNode("priority", sm$priority[i], parent = urlNode)
  rm(i, urlNode)
}

saveXML(doc, file="sitemap.xml")
rm(doc, root, temp)
browseURL("sitemap.xml") 
```

# php - Mysql join 用于以下 ER

> ID：12255361
> 
> 赞同：0
> 
> 时间：2012-09-04T00:22:41.003
> 
> 标签：php, mysql, join

我的数据库有以下表结构：

*   tbl_project

*   tbl_employee

*   tbl_deliverable
*   user_to_deliverable

其中**tbl_prjct**和**tbl_deliverable**具有*一对多*关系， 而**tbl_employee**和**tbl_deliverable**具有*多对多*关系，因此它们被拆分为**user_to_deliverable**表。

我想要一个查询来显示 project_name（来自 tbl_project）、项目的可交付成果（来自 tbl_deliverable）以及该特定交付成果分配给的员工姓名。

我可以获得编写此查询的帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:31:46.853

您想要的查询很像这样的 89.67%：D

```
SELECT      a.ProjectName,
            b.deliverables,
            d.employeename
FROM        tbl_project a
                INNER JOIN tbl_deliverable b
                    ON a.projectID = b.projectID
                INNER JOIN user_to_deliverable c
                    ON b.recordID = c.RecordID      
                        -- or could be the primary key
                INNER JOIN tbl_employee d
                    ON c.userID = d.userID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:44:18.613

不知道您的架构的近似解决方案。如果您希望将每个项目的可交付成果/员工连接起来，最好通过检索结果并以非 SQL 语言（PHP、Python 或您正在使用的任何语言）进行解析来完成。如果您希望这完全在 SQL 中完成，您将需要使用`GROUP_CONCAT()`.

```
select tbl_project.name as project,
       tbl_deliverable.name as deliverable,
       tbl_employee.name as employee
from tbl_project
join tbl_deliverable
    on (tbl_project.id = tbl_deliverable.project_id)
join user_to_deliverable
    on (tbl_deliverable.id = user_to_deliverable.deliverable_id)
join tbl_employee
    on (user_to_deliverable.employee_id = tbl_employee.id) 
```

# ruby-on-rails - 撤消记录更新的最佳方法是什么？

> ID：12255363
> 
> 赞同：1
> 
> 时间：2012-09-04T00:23:16.103
> 
> 标签：ruby-on-rails, activerecord

我觉得我在这里遗漏了一些明显的东西，但它就在这里。
我有存储对象属性的本地数据库。当我更新对象的实例时，我还会调用远程 API 并在那里更新记录。如果该 API 调用不成功，我想将我的本地记录回滚到以前保存的任何内容。到目前为止，我唯一能想到的就是在更新之前复制当前记录，并在我的 API 调用失败时使用该副本重新更新记录。是否有这样做的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:27:08.133

你可以这样做。不管你想怎么做都会奏效，没什么特别的。

另外，如果远程更新失败，也许您的远程副本仍然包含您仍然想要的旧值？在这种情况下，您也可以只使用远程副本来更新本地副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T01:58:18.733

在这种情况下，可以使用数据库事务来撤消更改。

```
YourModel.transaction do
  # update model here
  # api call here
  if api_was_successful
    # yay!
  else
    # probably do something here, like notify user
    raise ActiveRecord::Rollback
  end
end 
```

事务块中的任何异常都会导致数据库更改回滚。异常也会重新引发，除非它是 ActiveRecord::Rollback，所以如果你的 api 调用可以引发异常，你仍然需要处理它们（但至少你的模型更改将被回滚。只有当达到块将提交事务。

请参阅：[http ://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)

# actionscript-3 - UI 组件表单 Flex to Air

> ID：12255367
> 
> 赞同：2
> 
> 时间：2012-09-04T00:23:56.193
> 
> 标签：actionscript-3, apache-flex, air

在 Flex 应用程序中，我找到了一种将目标对象保存到“字符串”的方法；

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">

<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.controls.Alert;
        import mx.events.FlexEvent;
        import mx.rpc.xml.SimpleXMLEncoder;
        import mx.utils.ObjectUtil;
        import mx.utils.XMLUtil;

        protected function button1_clickHandler(event:MouseEvent):void
        {

            var fr:FileReference = new FileReference();
            var ba:ByteArray = new ByteArray();
            ba.writeObject(container);
            fr.save(ba);
        }

    ]]>
</fx:Script>
<s:BorderContainer id="container" x="68" y="64" width="341" height="257">
    <s:Label x="69" y="83" width="257" height="124" text="Label"/>
</s:BorderContainer>
<s:Button x="68" y="329" label="SAVE" click="button1_clickHandler(event)"/> 
```

有没有办法读取该文件并将其显示为 AIR 中的 UIComponent？
这是我的尝试：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Script>
        <![CDATA[
            import flash.events.Event;
            import flash.events.IOErrorEvent;
            import flash.net.FileFilter;
            import flash.net.FileReference;
            import flash.utils.ByteArray;

            import spark.components.BorderContainer;
            private var fr:FileReference;

            private function onLoadFileClick():void
            {
                fr = new FileReference();
                fr.addEventListener(Event.SELECT, onFileSelect);
                fr.addEventListener(Event.CANCEL,onCancel);
                fr.browse();
            }

            private function onFileSelect(e:Event):void
            {
                fr.addEventListener(Event.COMPLETE, onLoadComplete);
                fr.addEventListener(IOErrorEvent.IO_ERROR, onLoadError);
                fr.load();
            }

            private function onCancel(e:Event):void
            {
                trace("File Browse Canceled");
                fr = null;
            }

            private function onLoadComplete(e:Event):void
            {

                var data:ByteArray = fr.data;

                //read the bytes of the file as a string and put it in the
                //textarea

                //outputField.text = data.readUTFBytes(data.bytesAvailable);

                //var obj:BorderContainer = data.;
                cc = data.readObject();

                //clean up the FileReference instance

                fr = null;
            }

            //called if an error occurs while loading the file contents
            private function onLoadError(e:IOErrorEvent):void
            {
                trace("Error loading file : " + e.text);
            }
        ]]>
    </fx:Script>
    <mx:Button label="Load Text File" right="10" bottom="10" click="onLoadFileClick()"/>
    <mx:TextArea right="10" left="10" top="370" bottom="40" id="outputField"/>
    <s:BorderContainer id="cc" x="130" y="99" width="200" height="200">
    </s:BorderContainer>
</s:WindowedApplication> 
```

我收到了这个错误：

> TypeError：错误 #1034：类型强制失败：无法转换`Object@6f2bc41`为[C:\Users\user\Adobe Flash Builder 4.5\primi\src\primi.mxml:51]`spark.components.BorderContainer``primi/onLoadComplete()`

任何解决方案都会很好......只要它有效:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-04T00:38:15.767

`BorderContainer`在写入 ByteArray 之前，您需要注册一个类别名。否则无法保留对象的类型，并且将容器作为普通对象写入 ByteArray。

查看[registerClassAlias() 的文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#registerClassAlias%28%29)以获取有关如何在 ActionScript 中读/写（或使用更常见的术语：序列化/反序列化）强类型对象的详细信息。

如果我是对的，您需要在基于 Web 的应用程序和 AIR 应用程序中注册类别名。

# c - 按位或两个无符号整数（程序崩溃）

> ID：12255368
> 
> 赞同：0
> 
> 时间：2012-09-04T00:24:11.420
> 
> 标签：c, crash, bitwise-or

对不起，如果我的问题不是很清楚。我有这样的结构：

```
typedef struct
{
    uint32_t typeSet;
}DataTypeTagInfo; 
```

以下函数用于统一两个 typeSet：

```
DataTypeTagInfo* unifyTagInfo(DataTypeTagInfo* tag1, DataTypeTagInfo* tag2){
    if(tag1 == NULL) return tag2;
    else if(tag2 == NULL) return tag1;
    tag1->typeSet |= tag2->typeSet;
    return tag1;
} 
```

程序在执行以下行时退出：

```
 tag1->typeSet |= tag2->typeSet; 
```

在示例运行中，我具有以下值：

```
tag1->typeSet = 3917954189
tag2->typeSet = 2536589 
```

没有错误信息。干脆放弃。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T00:47:43.250

您显示的代码非常合理。`tag1`因此，在中止时，或者`tag2`是一个无效的指针很可能是一个无效的指针。这与您发布的代码无关。可以通过多种方式将指针设置为无效。

为了弄清楚发生了什么，我会从仔细检查代码设置`tag1`和`tag2`调用站点开始，然后 - 如果没有出现答案 - 继续使用`valgrind`来检查内存覆盖错误。

NB 这就是让 C(++) 如此具有挑战性的原因。

# jquery - jQuery .ajax 请求失败

> ID：12255370
> 
> 赞同：1
> 
> 时间：2012-09-04T00:24:59.247
> 
> 标签：jquery

我目前有一个像这样设置的 jQuery ajax 请求

```
$(document).ready(
    function() { $.ajax({ 
        url : "http://www.my-computer.com:51000/getJson",
        cache : false,
        dataType: "json",
        success : renderPage,
        error: handleError
    })
}); 
```

如果我手动导航到[http://www.my-computer.com:51000/getJson](http://www.my-computer.com:51000/getJson)，我会看到它正确返回了一个 json 字符串，但是对于上述请求，我总是陷入“handleError”方法，文本状态为“错误”并没有太多有用的信息。任何人都可以帮忙吗？谢谢！

编辑：对不起我的电脑域。这个stackoverflow提交不会让我输入localhost，所以我输入了一个任意域。我试过萤火虫，但没能把 json 找回来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:23:00.060

Have you tried adding clientaccesspolicy.xml file to the root with the following in it?

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="*">
        <domain uri="*"/>
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

I am also using a div to display any error messages in, for debugging purposes, as that might help you to see what error message in in the JSON String:

```
function GetShoppingCartData() {
    jQuery.ajax({
        type: "POST",
        url: "DesktopModules/EcomDnnProducts/AjaxProductDisplay.aspx/GetShoppingCartData",
        data: "{'CartId': '" + jQuery(".shoppingcartid").attr("value") + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: true,
        cache: false,
        success: function (msg) {
            buildShoppingCart(msg.d);
        },
        fail: function (msg) {
            jQuery('#productattributesdata').text(msg.d);
        }
    });
} 
```

In my .net code, I had to add the following to the web.config file:

```
 <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
      </customHeaders>
    </httpProtocol>
  </system.webServer>
  <system.web> 
```

hth

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-04T00:28:25.057

你的代码坏了。请注意，您只有一个以上`{`，`}`您编码的方式都是错误的。另外，您要从哪个域发送此请求？如果您从 my-computer.com 以外的域发送它，那么您的请求将失败。如果没有，试试这个：

```
$(文档).ready(函数(){
$.ajax({

        网址：“http://www.my-computer.com:51000/getJson”，
        缓存：假，
        数据：“json”，
        成功：渲染页面，
        错误：句柄错误
    })
});
```

# php - “注册”一个变量到底是什么意思

> ID：12255371
> 
> 赞同：1
> 
> 时间：2012-09-04T00:25:27.210
> 
> 标签：php, global-variables, superglobals, register-globals

这是关于 PHP 全局变量的。这是否意味着全局变量通过 HTTP 请求简单地赋值（即：预先存在但没有值的变量），或者变量被“实例化”并赋值（即：脚本中不预先存在的变量） ? 我还没有看到任何解释的文字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:36:50.527

`register`使用 globals 仅仅意味着将各种请求变量注册为全局可用的过程。然而，在这种情况下，“注册”与“分配”或“设置”根本不同，因为全局变量固有地链接到它们的超全局键对应物（或“注册”作为别名），也许最好用这段代码总结：

```
// register_globals is on
$_POST["username"] === $username; // true

$username = "foo";
$_POST["username"] === $username; // *still* true

$_POST["username"] = "bar";
$_POST["username"] === $username; // *still* true 
```

也就是改变一个会改变对应的超全局键。当然，不应该依赖这种行为——如果你一开始就在使用`register_globals`，那你就做错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:34:27.017

PHP`register_globals`将创建适当的全局变量并为其赋值。请注意，使用 可能是一个非常糟糕的主意`register_globals`，因为它会带来安全风险。最好使用超全局数组`$_POST`,`$_GET`和`$_COOKIE`.

# javascript - 使用 Jquery 创建具有单击和悬停功能的菜单

> ID：12255380
> 
> 赞同：0
> 
> 时间：2012-09-04T00:27:24.357
> 
> 标签：javascript, jquery, css

我正在尝试将单击和悬停功能添加到菜单中。我现有的在点击时激活下拉菜单的 Javascript 是：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#nav > li > a').click(function(){
            if ($(this).attr('class') != 'active'){
                $('#nav li ul').slideUp();
                $(this).next().slideToggle();
                $('#nav li a').removeClass('active');
                $(this).addClass('active');
            }
        });
    });
</script> 
```

我尝试使用 jquery 通过放入页面头部来添加同时悬停触发：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>$("#nav").bind("click hover", fn);</script> 
```

除其他外，可以预见的是，它们都不起作用。我显然不知道我在做什么！没有添加 jquery 的工作页面在[这里](http://www.davidkneale.com/wcusa/expeditions.html)，菜单位于页面的左侧。如果有人能给我建议，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:53:20.350

尝试更新到最新的 Jquery，然后[阅读](http://api.jquery.com/on/)：

```
.on( events [, selector] [, data], handler(eventObject) ) 
```

> **events**：一种或多种以空格分隔的事件类型和可选的命名空间，例如“click”或“keydown.myPlugin”。

所以基本上我认为你可以交换`.click`和`.on`使用事件`click mouseover`。

### 编辑

在您的源页面中，Jquery 版本是`1.4.2`，只是为了注意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:30:58.860

您可以使用预构建的解决方案，而不是从头开始创建自己的解决方案。

参见 Superfish - [http://users.tpg.com.au/j_birch/plugins/superfish/](http://users.tpg.com.au/j_birch/plugins/superfish/)。

Superfish 是一个处理点击/悬停下拉菜单的 jQuery 插件。

对于仅 css 的下拉菜单，搜索“Suckerfish”。Superfish 可以在 Suckerfish 之上使用，以在用户没有启用 javascript 的情况下进行优雅的降级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T07:41:58.883

我发现这最适合我的需求：

```
`<script type="text/javascript">
$(function(){
$('#nav > li > ul')
.hide()
.click(function(e){
e.stopPropagation();
});

$('#nav > li').toggle(function(){
$(this)
.removeClass('waiting')
.find('ul').slideDown();
}, function(){
$(this)
.removeClass('waiting')
.find('ul').slideUp();
});

$('#nav > li').hover(function(){
$(this).addClass('waiting');
 setTimeout(function(){
$('#nav .waiting')
.click()
.removeClass('waiting');
},600);
}, function(){
$('#nav .waiting').removeClass('waiting');
});
});
</script>` 
```

@Niloct 帮助我找到了一种方法来关闭先前触发的菜单项的子菜单，但这导致菜单有点不切实际。谢谢！

# c# - C# 中的 MS Access 查询代码

> ID：12255381
> 
> 赞同：0
> 
> 时间：2012-09-04T00:27:28.940
> 
> 标签：c#, sql, ms-access

我正在尝试在 Access DB 上运行查询，我习惯于 SQL 查询，但这似乎并没有以同样的方式工作。这是我的查询：

```
OleDbCommand command = new OleDbCommand();
command.Connection = connect;
command.CommandText = "SELECT RecordID, TimeStamp, EmployeeName, AreaDescription       FROM LoginRecords r, Employees e, Areas a WHERE((e.EmployeeID = r.EmployeeID) && (a.AreaID =r.AreaID) && (TimeStamp > startDate AND < endDate)) ORDER BY TimeStamp;" 
```

我似乎无法让它运行，但从技术上讲，从 SQL 的角度来看，这应该是一个很好的查询。这些表是 LoginRecords、Employees、Areas。如果有帮助，我可以加载表格。我感谢任何关于为什么这在 Access 中不起作用的反馈。startDate 和 endDate 是来自用户输入框的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:35:39.030

试试这个，

这是`SQL-92`

```
SELECT      RecordID, 
            TimeStamp, 
            EmployeeName, 
            AreaDescription       
FROM        LoginRecords r
                INNER JOIN Employees e
                    ON e.EmployeeID = r.EmployeeID
                INNER JOIN Areas a 
                    ON a.AreaID = r.AreaID
WHERE   TimeStamp > startDate AND
        TimeStamp < endDate
ORDER BY TimeStamp; 
```

使用`SQL-92`格式而不是`SQL-89`格式，因为`SQL-89`（*除了旧样式*`CROSS JOIN`）如果处理不当很容易发生。

这是`SQL-89`

```
SELECT      RecordID, 
            TimeStamp, 
            EmployeeName, 
            AreaDescription       
FROM        LoginRecords r, Employees e, Areas a
WHERE   (e.EmployeeID = r.EmployeeID) AND
        (a.AreaID = r.AreaID) AND
        (TimeStamp > @startDate AND
         TimeStamp < @endDate)
ORDER BY TimeStamp; 
```

MSACCESS：**[内连接](http://msdn.microsoft.com/en-us/library/office/bb208854%28v=office.12%29.aspx)**，外**[连接（左和右）](http://msdn.microsoft.com/en-us/library/office/bb208894%28v=office.12%29.aspx)**

# c - GTK 中的刷新表

> ID：12255383
> 
> 赞同：0
> 
> 时间：2012-09-04T00:27:33.217
> 
> 标签：c, gtk

我用 GTK 用 C 语言做了一个小程序，里面有一个窗口、一个盒子和一个桌子。桌子上涂有一些文件。我想用其他数据刷新表格，但我不知道怎么做。

此代码启动一个带有`GtkTable`. 该表填充了定时器句柄函数。第一次按 1,2,3 的顺序画三条线，最后一次按 3,2,1 的顺序画三条线。但表永远不会刷新。

```
#include <stdlib.h>
#include <gtk/gtk.h>

static gboolean time_handler(GtkWidget *table);
gboolean launched;

int main( int argc, char *argv[])
{
    GtkWidget *window;
    GtkWidget *vboxgeneral;
    gchar *title;
    GtkWidget *table;

    gtk_init(&argc, &argv);

    /* WINDOW */
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    title = "Test GtkTable";

    gtk_window_set_title(GTK_WINDOW(window), title);
    gtk_window_set_default_size(GTK_WINDOW(window), 200, 100);
    gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);

    /* ADDING GTKHBOX TO MAIN WINDOW */
    vboxgeneral = gtk_vbox_new(FALSE, 0);

    /* ADDING GTKTABLE TO VBOX */
    table = gtk_table_new(1,1,FALSE);
    gtk_box_pack_start(GTK_BOX(vboxgeneral), table, FALSE, FALSE, 0);

    /* SHOW ALL */
    gtk_widget_show_all(window);

    /* ACTIONS */
    g_signal_connect_swapped(G_OBJECT(window), "destroy", G_CALLBACK(gtk_main_quit), NULL);

    /* START TIMER */
    g_timeout_add(10000, (GSourceFunc) time_handler, (gpointer) window);
    time_handler(table);

    gtk_main();

    return 0;
}

static gboolean time_handler(GtkWidget *table)
{
    GtkWidget *widget;
    gboolean result = FALSE;

    /* ADDING TABLE DEFINITION */

    if(!launched)
    {
        table = gtk_table_new(3,1,FALSE);

        widget = gtk_label_new("File 1");
        gtk_label_set_justify(GTK_LABEL(widget), GTK_JUSTIFY_CENTER);
        gtk_table_attach_defaults (GTK_TABLE (table), widget, 0, 1, 0, 1);
        widget = gtk_label_new("File 2");
        gtk_label_set_justify(GTK_LABEL(widget), GTK_JUSTIFY_CENTER);
        gtk_table_attach_defaults (GTK_TABLE (table), widget, 0, 1, 1, 2);
        widget = gtk_label_new("File 3");
        gtk_label_set_justify(GTK_LABEL(widget), GTK_JUSTIFY_CENTER);
        gtk_table_attach_defaults (GTK_TABLE (table), widget, 0, 1, 2, 3);

        launched = TRUE;
        result = TRUE;

        g_print("Timer executed fisrt time!\n");
    }
    else
    {
        table = gtk_table_new(3,1,FALSE);

        widget = gtk_label_new("File 3");
        gtk_label_set_justify(GTK_LABEL(widget), GTK_JUSTIFY_CENTER);
        gtk_table_attach_defaults (GTK_TABLE (table), widget, 0, 1, 0, 1);
        widget = gtk_label_new("File 2");
        gtk_label_set_justify(GTK_LABEL(widget), GTK_JUSTIFY_CENTER);
        gtk_table_attach_defaults (GTK_TABLE (table), widget, 0, 1, 1, 2);
        widget = gtk_label_new("File 1");
        gtk_label_set_justify(GTK_LABEL(widget), GTK_JUSTIFY_CENTER);
        gtk_table_attach_defaults (GTK_TABLE (table), widget, 0, 1, 2, 3);

        result = FALSE;
        g_print("Timer executed last time!\n");
    }

     gtk_widget_draw(table, NULL);

    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T02:45:48.350

您的代码有几个问题：

*   您没有将 vbox 添加到窗口中。这可以通过以下代码完成： `gtk_container_add (GTK_CONTAINER (window), vboxgeneral);`

*   您将错误的参数（表格小部件）传递给您的 time_handler 函数。在该函数中，您创建了一个新表，丢失了您打包到 vbox 中的前一个表。您可以做的是销毁以前的表并使用新标签创建一个新表并将其打包到 vbox 中。

*   在您的 main 函数中调用 time_handler(table) 是完全没有必要的。计时器已经为您做到了。

我制作的修改后的代码（按照您的要求执行的工作代码）如下：

```
#include <stdlib.h>
#include <gtk/gtk.h>

static gboolean time_handler(GtkWidget *table);
gboolean launched;

int main( int argc, char *argv[])
{
    GtkWidget *window;
    GtkWidget *vboxgeneral;
    gchar *title;

    gtk_init(&argc, &argv);

    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    title = "Test GtkTable";

    gtk_window_set_title(GTK_WINDOW(window), title);
    gtk_window_set_default_size(GTK_WINDOW(window), 200, 100);
    gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);

    /* ADDING GTKHBOX TO MAIN WINDOW */
    vboxgeneral = gtk_vbox_new(FALSE, 0);

    /* This step was missing! */
    gtk_container_add (GTK_CONTAINER (window), vboxgeneral);

    gtk_widget_show_all(window);

    g_signal_connect_swapped(G_OBJECT(window), "destroy", G_CALLBACK(gtk_main_quit), NULL);

    /* START TIMER */
    /* refresh in 1 second, change to the desired amount */
    g_timeout_add(1000, (GSourceFunc) time_handler, (gpointer) vboxgeneral);

    gtk_main();

    return 0;
}

static gboolean time_handler(GtkWidget *vbox)
{
    GtkWidget *widget;
    static GtkWidget *table = NULL;
    gboolean result = FALSE;

    /* if you want only the new labels to appear and not the previous ones you can: */
    /* 1\. destroy the table and create a new one. This will be done */
    /* 2\. hide all previous labels in the table and create and show the new ones */

    if (table != NULL) {
        /* destroy previous table packed into vbox */
        gtk_widget_destroy(table);
    }

    table = gtk_table_new(3,1,FALSE); /* create new table for the new labels */

    if(!launched) {

        widget = gtk_label_new("File 1");
        gtk_label_set_justify(GTK_LABEL(widget), GTK_JUSTIFY_CENTER);
        gtk_table_attach_defaults (GTK_TABLE (table), widget, 0, 1, 0, 1);
        widget = gtk_label_new("File 2");
        gtk_label_set_justify(GTK_LABEL(widget), GTK_JUSTIFY_CENTER);
        gtk_table_attach_defaults (GTK_TABLE (table), widget, 0, 1, 1, 2);
        widget = gtk_label_new("File 3");
        gtk_label_set_justify(GTK_LABEL(widget), GTK_JUSTIFY_CENTER);
        gtk_table_attach_defaults (GTK_TABLE (table), widget, 0, 1, 2, 3);

        launched = TRUE;
        result = TRUE;

        g_print("Timer executed first time!\n");
    } else {
        /* table = gtk_table_new(3,1,FALSE); */

        widget = gtk_label_new("File 3");
        gtk_label_set_justify(GTK_LABEL(widget), GTK_JUSTIFY_CENTER);
        gtk_table_attach_defaults (GTK_TABLE (table), widget, 0, 1, 0, 1);
        widget = gtk_label_new("File 2");
        gtk_label_set_justify(GTK_LABEL(widget), GTK_JUSTIFY_CENTER);
        gtk_table_attach_defaults (GTK_TABLE (table), widget, 0, 1, 1, 2);
        widget = gtk_label_new("File 1");
        gtk_label_set_justify(GTK_LABEL(widget), GTK_JUSTIFY_CENTER);
        gtk_table_attach_defaults (GTK_TABLE (table), widget, 0, 1, 2, 3);

        launched = FALSE;
        result = FALSE;
        g_print("Timer executed last time!\n");
    }

    /* ADD THE NEWLY CREATED TABLE TO THE VBOX */
    gtk_box_pack_start(GTK_BOX(vbox), table, FALSE, FALSE, 0);
    /* VERY IMPORTANT: SHOW ALL THE NEW LABELS PACKED INTO THE TABLE */
    gtk_widget_show_all(table);

    return result;
} 
```

# c - 如何使用 write() 函数编写非字符 *？

> ID：12255386
> 
> 赞同：0
> 
> 时间：2012-09-04T00:27:59.257
> 
> 标签：c, linux, posix, system-calls

[`write()`](http://linux.die.net/man/2/write)可以使用函数编写非字符*吗？我需要打印一个`unsigned long`，但我不知道该怎么做。换句话说，传递一个`unsigned long`in`buf`参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:52:05.343

通常最好使用*可用*的标准 C 函数，因为它们更便于移植。如果可以，并且想将其输出为*文本，*则应该查看`fprintf`而不是`fwrite`. 前者将为您格式化，后者用于写入原始内存块。

例如：

```
int val = 42;
fprintf (fh, "%d", val); // should check return value. 
```

将输出文本“42”。

如果您*确实*想写出二进制表示，`fwrite`那么方法是：

```
int val = 42;
fwrite (&val, sizeof (val), 1, fh); // should check return value. 
```

这将写出二进制表示，以便将 bytes 、`0`和写入文件（当然取决于变量的内存布局 - 它可能因实现而异）。`0``0``42``int`

* * *

那是如果你能够使用文件句柄而不是描述符，否则这些`f*`函数对你没有好处。您想要使用较低级别的工作可能有正当理由。

因此，如果您拥有的只是 的描述符`write`，则需要首先将变量格式化为字符串，例如：

```
char buff[100];
sprintf (buff, "%d", val);
write (fd, buff, strlen (buff)); // should check return value. 
```

那是假设你想要它作为文本。如果您希望它作为二进制值，它类似于我们在上面使用的方式`fwrite`：

```
write (fd, &val, sizeof (val)); // should check return value. 
```

# linux - 检查指定名称的画面是否存在

> ID：12255388
> 
> 赞同：38
> 
> 时间：2012-09-04T00:28:04.497
> 
> 标签：linux, bash, gnu-screen

我制作了一个 bash 文件，它在分离的屏幕中启动另一个具有唯一名称的 bash 文件，我需要确保该内部 bash 文件的一个实例在任何一个时间点都在运行。为此，我想让父 bash 文件检查该名称的屏幕是否存在，然后再尝试创建它。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-04T00:35:18.240

您可以 grep 的输出来`screen -list`查找您正在检查的会话的名称：

```
if ! screen -list | grep -q "myscreen"; then
    # run bash script
fi 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-02-19T01:11:21.870

您可以查询特定会话的屏幕“选择”命令；如果会话存在，shell 结果为“0”，如果未找到命名的屏幕会话，则为“1”：

```
$屏幕-S Tomcat
$ 屏幕 -S Tomcat -Q 选择 . ; 回声$？
0

```

相对：

```
$ 屏幕 -S 码头 -Q 选择。; 回声$？
未找到屏幕会话。
1

```

请注意，`'.'`后面`select`是可选的，但可能更健壮。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-02-25T16:30:23.537

鉴于我无法发表评论，我将其发布为新答案。troyfolger 的回答是一个好主意，基本上相当于尝试向会话发送一个几乎没有什么作用的命令。一个问题是某些（旧）版本的 screen -Q 不受支持，因此对于这些版本，正确的命令是

```
screen -S Jetty -X select . ; echo $? 
```

其中发送命令“选择”。到名为“Jetty”的屏幕会话。

选择更改哪个窗口处于活动状态和 。表示当前活动窗口，因此这意味着尝试将活动窗口更改为当前活动窗口。如果没有会话可以连接到我们想要的会话，这只会失败。

如果您阅读信息文档，那么它确实建议您只使用 select 。与 -X 作为测试或确保选择了某些东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-12-27T01:09:12.557

一个更简单的方法是：

```
screen -xR -S SessionName 
```

[从这里的](https://unix.stackexchange.com/questions/240444/cant-resume-screen-says-i-am-already-attached)**Stéphane Chazelas**评论中复制：

> 如果没有要附加的内容，我通常使用 -xR 附加或创建。

因此，您不必搜索会话名称是否已经存在，如果会话存在，此方法将附加到会话，如果不存在，则创建它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-17T23:33:36.963

所有提出的解决方案都不处理没有唯一模式的屏幕名称，例如“TEST”和“TEST123”。当您`screen -S "TEST"`或`screen -list "TEST"`时，您可能会发现自己正在选择屏幕“TEST123”！GNU 屏幕如何实现屏幕名称匹配存在一些错误（非确定性）。

下面是一个 bash 函数，它尝试进行完全匹配，并返回`PID.SCREEN NAME`退出代码：

```
function find_screen {
    if screen -ls "$1" | grep -o "^\s*[0-9]*\.$1[ "$'\t'"](" --color=NEVER -m 1 | grep -oh "[0-9]*\.$1" --color=NEVER -m 1 -q >/dev/null; then
        screen -ls "$1" | grep -o "^\s*[0-9]*\.$1[ "$'\t'"](" --color=NEVER -m 1 | grep -oh "[0-9]*\.$1" --color=NEVER -m 1 2>/dev/null
        return 0
    else
        echo "$1"
        return 1
    fi
} 
```

用法 - 选择一个屏幕：

```
target_screen=$(find_screen "SCREEN NAME")
screen -S "$target_screen" ...etc... 
```

用法 - 测试屏幕是否存在：

```
if find_screen "SCREEN NAME" >/dev/null; then
    echo "Found!"
fi 
```

无论如何，这将涵盖 99.9% 的情况。99,99% 确定，在屏幕名称中转义 grep 特殊字符。完美匹配需要 grep 匹配整行直到 $，包括括号中的日期，可能会随着版本的变化而变化。另一种完美匹配方法是：

```
ls -A -1 /var/run/screen/S-${USER} | grep "^[0-9]*\.SCREEN NAME$" 
```

但这很麻烦，我们需要确保屏幕实现使用这个文件夹。我不推荐最后一种方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-28T21:10:10.733

%100 工作。

```
screen -list | grep "SESSİON NAME" && echo "Active Program" || echo "Passive Program" 
```

# posix - SCM_RIGHTS 有什么可移植的意义吗？

> ID：12255392
> 
> 赞同：6
> 
> 时间：2012-09-04T00:28:29.313
> 
> 标签：posix, unix-socket

我了解如何使用 SCM_RIGHTS 类型的辅助数据在 Linux 上的进程之间发送文件描述符。但所有 IEEE Std 1003.1-2008 不得不[说](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_socket.h.html)的是：

> SCM_RIGHTS
> 
> ```
> Indicates that the data array contains the access rights to be sent or received. 
> ```

这意味着什么？SCM_RIGHTS 类型的辅助数据有任何可移植意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T10:51:18.097

这是因为，UNIX 文件描述符可以被视为权威的标记。它指的是一个引用对象以及相关访问权限集的值。

> 请阅读有关[能力](http://en.wikipedia.org/wiki/Capability-based_security)

# objective-c - 为什么不能推送我的新 ViewController？

> ID：12255395
> 
> 赞同：0
> 
> 时间：2012-09-04T00:29:27.633
> 
> 标签：objective-c, uiviewcontroller, uinavigationcontroller, pushviewcontroller, xcode4.4

所以，我有一个主菜单，当我从主菜单单击一个按钮时，我想显示另一个 ViewController，所以我创建了一个 NavigationController，我将 ViewController 添加到这个 NavigationController 并尝试显示，但没有任何反应。我推送我的新 ViewController 的代码：

```
SubMenuViewController *subVC = [[SubMenuViewController alloc]initWithNibName:@"SubMenuViewController" bundle:nil];
UINavigationController *nav = [[UINavigationController alloc] init];
[nav pushViewController:subVC animated:YES];
nav = nil; 
```

此代码在 MainViewController 中调用，当按下一个按钮时......

我的SubMenuViewController 创建了一个SplitViewController，还有两个NavigationController，一个用于左边的表格，另一个用于右边的表格，但这些都不是问题，对吧？

如果您需要更多信息来帮助我，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:47:02.360

您正在创建的`UINavigationController`需要成为您的视图控制器层次结构的一部分。正如你所拥有的那样，你只是创建了它，但没有将它添加到任何东西中。最好在层次结构的顶部创建它并将子视图推送到它上面，而不是尝试动态创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:22:41.677

我已经有点解决了，甚至认为现在不能回去，但可以推送一个新的 ViewController。在 AppDelegate 中，我忘了写这个：

```
self.window.rootViewController = nab; 
```

现在它推送另一个 ViewController。感谢高咖啡因的帮助

# android - 当我的 ListView 被填充时，如何获得通知？

> ID：12255398
> 
> 赞同：0
> 
> 时间：2012-09-04T00:30:28.867
> 
> 标签：android, listview

我正在使用 ListActivity 并使用适配器填充列表视图，如下所示：

```
// SimpleAdapter adapter = ...
setListAdapter( adapter );
setContentView( R.layout.main );

ListView lv = getListView(); 
```

lv 似乎有零个孩子，即使我用布局中的孩子填充它并且适配器中有很多项目。我注意到，如果我等待一段时间——当列表视图完全呈现时——它确实有孩子。当列表视图完全可以使用时，我如何获得通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:39:28.037

您可以使用 AsyncTask 在后台填充列表，然后在加载完成后通知自己。

```
class MyTask extends AsyncTask<Context, Integer, String> {

    m_loaded = false;

    @Override
    protected String doInBackground(Context... params) {
        Log.d("doinBackground", "here");

        // do your loading

        return "";

    }

    // -- gets called just before thread begins
    @Override
    protected void onPreExecute() {
        super.onPreExecute();

    }

    // -- called as soon as doInBackground method completes
    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);

        m_loaded = true;  //your list is done loading
    }
} 
```

# php - 通过php指定页面名称

> ID：12255399
> 
> 赞同：0
> 
> 时间：2012-09-04T00:30:32.713
> 
> 标签：php

如果有人可以在这里帮助我，那就太好了。我查看了一个客户的站点文件，该文件通过使用 php 获取页面的文件名来命名每个页面，然后在文件顶部指定页面名称。

例如，如果文件的文件名是“index.php”，则文件顶部会自动收到一个大致如下所示的代码片段：

```
<?php
  page_name == 'index';
?> 
```

我知道那不是代码，但不幸的是我记得它。如果有人能为我澄清一下，将不胜感激。

此外，该站点使用此功能将页面名称作为类应用到正文标记（这是头部包含的一部分），并定义标题（也在头部中）。如果您知道这是如何完成的，那就是我要去的地方，因此您的专业知识将不胜感激。

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:41:13.797

像这样的东西？rawr.php：

```
<body class="<?php echo pathinfo(__FILE__, PATHINFO_FILENAME); ?>">

</body> 
```

给

```
<body class="rawr">

</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T01:20:57.537

要获取文件名，请使用以下 PHP 代码：

```
<?php $pageName = basename($_SERVER['PHP_SELF'], '.php'); ?> 
```

`$_SERVER['PHP_SELF']`是当前执行脚本的文件名，相对于文档根目录，因此它可能包含除了文件名之外的路径信息。`basename()`使用参数运行它将`.php`为您提供路径的尾随名称组件，减去`.php`后缀。

要将其用作 body 标记的类，请包含以下内容：

```
<body class="<?php echo $pageName ?>"> 
```

将其放入`<title>`非常相似：

```
<title><?php echo $pageName ?></title> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T02:40:39.247

我认为你想要的是肯尼的回答的组合：

```
<?php $pageName = basename($_SERVER['PHP_SELF'], '.php'); ?> 
```

将 HTML 设置`title`为页面名称，如下所示：

```
<html>
<head>
<title><?php print $pageName;?></title>
</head>
<body>
... 
```

# c - Eclipse CDT 中是否有预定义的配置类型宏？

> ID：12255404
> 
> 赞同：1
> 
> 时间：2012-09-04T00:30:55.213
> 
> 标签：c, eclipse, gcc, eclipse-cdt, predefined-macro

我正在使用 CDT 构建一个由许多项目组成的系统。一些系统元素取决于配置类型 - 调试或发布。

我知道这些名称并没有什么特别之处，而且我可以定义自己的配置。但是，由于这两个是内置的，是否有预定义的宏来判断活动配置是一个还是另一个？

因为系统中有很多项目，给每个项目添加一个`_DEBUG_`,`_RELEASE_`符号有些繁琐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:41:11.410

这样的宏必须传递给编译器。生成的 makefile 中没有这样的宏。

# ios - Xcode (IOS) 按钮按下和释放检测

> ID：12255406
> 
> 赞同：1
> 
> 时间：2012-09-04T00:31:03.607
> 
> 标签：ios, c, xcode

我有一个从一开始就隐藏的 UIView 对象，然后当按下圆形矩形按钮时，会出现 UIView 对象。这样一切正常。

我想要的是，每当释放圆形矩形按钮时， UIView 对象就会再次隐藏自己。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T00:45:36.443

UIButton 是[UIControl](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/cl/UIControl)的子类，可以响应多个 Touch 事件。

您可以通过在情节提要中创建 IBAction 或通过代码来指定按钮实例响应哪些触摸事件。最简单的方法是使用情节提要。

![在此处输入图像描述](../Images/f390d1df67d41612efd128de3d448a2f.png)

因此，要实现您所描述的，您将拥有（至少）两个 IBAction - 一个用于“touch down”事件，一个用于“touch up”事件。您还应该处理其他事件情况，例如“触摸取消”等。

**控制对象可能的事件种类。**

```
enum {
   UIControlEventTouchDown           = 1 <<  0,
   UIControlEventTouchDownRepeat     = 1 <<  1,
   UIControlEventTouchDragInside     = 1 <<  2,
   UIControlEventTouchDragOutside    = 1 <<  3,
   UIControlEventTouchDragEnter      = 1 <<  4,
   UIControlEventTouchDragExit       = 1 <<  5,
   UIControlEventTouchUpInside       = 1 <<  6,
   UIControlEventTouchUpOutside      = 1 <<  7,
   UIControlEventTouchCancel         = 1 <<  8,

   UIControlEventValueChanged        = 1 << 12,

   UIControlEventEditingDidBegin     = 1 << 16,
   UIControlEventEditingChanged      = 1 << 17,
   UIControlEventEditingDidEnd       = 1 << 18,
   UIControlEventEditingDidEndOnExit = 1 << 19,

   UIControlEventAllTouchEvents      = 0x00000FFF,
   UIControlEventAllEditingEvents    = 0x000F0000,
   UIControlEventApplicationReserved = 0x0F000000,
   UIControlEventSystemReserved      = 0xF0000000,
   UIControlEventAllEvents           = 0xFFFFFFFF
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:45:31.430

在按钮的操作中添加代码

```
[view setHidden:!view.isHidden]; 
```

# android - 似乎无法解决联系人选择器中的语法错误

> ID：12255412
> 
> 赞同：2
> 
> 时间：2012-09-04T00:32:27.750
> 
> 标签：android, syntax-error, android-contacts

好的，伙计们，我在一行代码中遇到语法错误，我似乎无法弄清楚原因。我只是在很短的时间内修补了 android，但我很确定我已经很好地遵循了给定的示例，但是我一生都无法摆脱这个错误。该代码用于联系人选择器，因此我可以使用人员号码填充编辑文本，然后使用 mms 意图向该号码发送图片。我已经标记了出现错误的位置，并且在解决之前无法完全完成我正在尝试的操作。（只显示有问题的部分）

```
break;

case R.id.contact:
  Intent k = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
    startActivityForResult(k, 1);

  @Overide
  public void onActivityResult (int reqCode, int resultCode, Intent data) {  //<Getting the syntax errors here
  super.onActivityResult(reqCode, resultCode, data);

   {
    if (resultCode == Activity.RESULT_OK) {
      Uri contactData = data.getData();
      Cursor cur = managedQuery(contactData, null, null, null, null);
      ContentResolver contect_resolver = getContentResolver();

      if (cur.moveToFirst()) {
        String id = cur.getString(cur.getColumnIndexOrThrow(ContactsContract.Contacts._ID));
        String name = "";
        String no = "";

        Cursor phoneCur = contect_resolver.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, 
            ContactsContract.CommonDataKinds.Phone.CONTACT_ID = " = ?", new String [] { id }, null);

        if (phoneCur.moveToFirst()) { name = phoneCur.getString(phoneCur.getColumnIndex (ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
        no = phoneCur.getString(phoneCur.getColumnIndex (ContactsContract.CommonDataKinds.Phone.NUMBER));

        }
      }
    }
  }
}

break;  

Now the errors it is throwing are:
- Syntax error on token "(", ; expected
- Syntax error on token(s), misplaced construct(s)
- Syntax error on token ")", ; expected
- Syntax error on token ",", ; expected
- Syntax error on token ")", ; expected
- Syntax error on token "(", ; expected 
```

都在那一行。我完全一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T00:51:02.483

都在哪一行？

在任何情况下，如果要相信上下文的前几行，您都试图`onActivityResult`在 switch 语句的中间定义一个方法 ( )。你不能在那里定义一个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:21:38.023

看到这条线。。

```
ContactsContract.CommonDataKinds.Phone.CONTACT_ID = " = ?" 
```

改成...

```
ContactsContract.CommonDataKinds.Phone.CONTACT_ID + "=?" 
```

先试试这个...^^

# mysql - mysql 中的数据库上传 - 丢失 UTF 字符

> ID：12255413
> 
> 赞同：0
> 
> 时间：2012-09-04T00:32:32.297
> 
> 标签：mysql, sql, database, mysqldump, remote-access

我经常更新服务器上的数据库，并从命令行运行以下行：

```
mysqldump -u root --password=mypass mydb|mysql -h mysite.cc -u remotusr --password=remotpsw remotdb 
```

问题是它会一路丢失 UTF 字符。

如何将 utf 字符保存在 cmd 中，或者这样做有什么更好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:30:08.957

*（升级到答案）*

如[*`mysqldump`*— 数据库备份程序中所述](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)：

> *   [`--default-character-set=***charset_name***`](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_default-character-set)
>     
>     
>     
>     用作***`charset_name`***默认字符集。请参阅[第 10.5 节，“字符集配置”</a>。如果未指定字符集，则](http://dev.mysql.com/doc/refman/5.1/en/charset-configuration.html)[*`mysqldump`*](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)使用`utf8`，早期版本使用`latin1`.
>     
>     
> 
> `[ deletia ]`
> 
> *   [`--set-charset`](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_set-charset)
>     
>     
>     
>     添加到输出。默认情况下启用此选项。要禁止声明，请使用.`**SET NAMES *default_character_set***`**`SET NAMES`**[`--skip-set-charset`](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_set-charset)

因此，除非您在选项文件中有覆盖这些默认值的设置（您可以指定[`--no-defaults`](http://dev.mysql.com/doc/refman/5.1/en/option-file-options.html#option_general_no-defaults)以确保它们不是），否则输出*`mysqldump`*应该能够被重定向到另一个*`mysql`*会话而不会丢失 Unicode 字符。

相反，在从新数据库中检索和显示您的数据时，似乎发生了向较小字符集的转换。由于您为此目的使用 PHP 的原始 MySQL API，尽管在[其手册章节的介绍中](http://www.php.net/manual/en/intro.mysql.php)（如下）有警告，您应该使用[`mysql_set_charset()`](http://www.php.net/manual/en/function.mysql-set-charset.php)来设置连接字符集。

> 不建议将此扩展用于编写新代码。相反，应该使用[mysqli](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL](http://www.php.net/manual/en/ref.pdo-mysql.php)扩展。在选择 MySQL API 时，另请参阅[MySQL API 概述](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)以获得更多帮助。

# php - 设置电子邮件推送服务器 (Ubuntu)

> ID：12255417
> 
> 赞同：0
> 
> 时间：2012-09-04T00:33:33.967
> 
> 标签：php, email, ubuntu, push, apple-push-notifications

我正在为我正在开发的 iOS 应用程序创建电子邮件到推送服务。我已经使用发送 APNS 消息的 PHP 服务器获得了该服务的推送部分。现在我需要一种方法来检查电子邮件地址是否有新消息，并通过这个 PHP 脚本发送每条新消息的内容。

我正在使用 Ubuntu 服务器。

关于我可以用来完成此任务的软件或更多 PHP 代码的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:44:13.983

如果您使用 postfix 作为您的 MTA，您可以轻松地安排调用 PHP 脚本以进行电子邮件传递。在这个 PHP 脚本中，您可以做任何您需要的事情：将邮件写入数据库，安排将其推送到设备，等等。

将此添加到后缀 master.cf

```
phpmail    unix  -       n       n       -       10      pipe
  flags= user=www-data argv=/usr/bin/php /path/to/script.php ${recipient} 
```

这到你的 main.cf （如果你想通过 php 传递所有本地邮件）

```
mailbox_transport = phpmail: 
```

这将导致您的脚本以收件人作为第一个参数运行。

当然，这只有在将电子邮件地址设置为发送（至少是副本）到您的 postfix 服务器时才有效。

# android - as3 Air 浏览 sd 卡上的文件？

> ID：12255418
> 
> 赞同：0
> 
> 时间：2012-09-04T00:33:33.853
> 
> 标签：android, actionscript-3, air

希望能够使用 as3 air 从用户手机中浏览和选择文件。

此代码仅弹出一个上传框并显示“未找到文件”。但我知道我的手机上有一个 zip，所以它一定不能选择正确的文件夹路径。如何更改它以使其访问整个手机？

```
function unzip_init():void{

    fileFilter = new FileFilter("selected your zip file.", "*.zip; *.gz2; *.bz2;");
    file = new File();
    //file.browseForDirectory("Choose a directory"); // Only got me the directory path
    file.browseForOpen("Open", [fileFilter]);
    file.addEventListener(Event.SELECT, onSelectedFile);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:24:35.763

从 SD 卡中获取所有 mp3 文件

```
var ROOT:File = File.documentsDirectory.resolvePath("/sdcard/");
var FILES:Array = ROOT.getDirectoryListing();
var TrackN:int;
var SUBFOLDER:String;

for (var i:int = 0; i < FILES.length; i++)
{
    var File_Ext:String;
    File_Ext = "" + FILES[i].extension;

    if (File_Ext.toLowerCase() == "mp3")
    {
      TrackN++;
      list.addItem( { label:FILES[i].name, data:TrackN, Song:FILES[i].url} );
    }

    if (FILES[i].isDirectory == true)
    {
      SUBFOLDER = "" + FILES[i].nativePath;
      getSubfolders();
    }

    function getSubfolders()
    {
        var SUBF:File = File.documentsDirectory.resolvePath(SUBFOLDER);
        var FLIST:Array = SUBF.getDirectoryListing();

        for (var s:int = 0; s < FLIST.length; s++)
        {
            File_Ext = "" + FLIST[s].extension;

            if (File_Ext.toLowerCase() == "mp3")
            {
                TrackN++;
                list.addItem( { label:FLIST[s].name, data:TrackN, Song:FLIST[s].url} );
            }

            if (FLIST[s].isDirectory == true)
            {
                SUBFOLDER = "" + FLIST[s].nativePath;
                getSubfolders();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:01:18.810

我在这里给了你一个答案：[as3 get zip file on phone from app - file path then unzip](https://stackoverflow.com/questions/12257626/as3-get-zip-file-on-phone-from-app-file-path-then-unzip)

基本上你必须编写自己的文件浏览器，帮助文档建议这样做（但是他们可以内置它）。例如

```
var rootDirs:Array = File.getRootFirectories();//all available root dirs 
```

然后你可以选择一个并列出它的内容

```
if(rootDirs && rootDirs.length > 0)
{
    var dir:File = rootDirs[0]
    if(dir.isDirectory)
    {
        //try to enumerate it's content

        var files:Array = dir.getDirectoryListing();

    }
} 
```

此致

# ssrs-2008 - SSRS 2008 R2 - 组切换聚合

> ID：12255421
> 
> 赞同：0
> 
> 时间：2012-09-04T00:33:54.450
> 
> 标签：ssrs-2008, toggle, aggregate-functions, ssrs-tablix, ssrs-grouping

我正在使用一个数据集，其中员工利用率计算为（按 X/标准计费小时计费的时间）。因此，要获得员工的总可计费百分比，我可以总结每个客户的计费百分比。但是，我还希望能够查看按部门计费的时间百分比。

我目前在一个矩阵中获取了我的数据，其中行组部门->员工->客户具有 1 列组“时间表结束日期”。当我根据员工行组切换客户行组的可见性时，我在客户和员工级别获得了正确的总数。但是，当我根据部门行组切换员工行组的可见性时，部门行组的总数错误。例如，如果部门 A 的员工 B 的利用率为 90%，员工 C 的利用率为 95%，则部门级别的切换总数为 185%....但是，我希望看到 92.5%....任何想法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:10:31.393

您可能只需要调整用于获取部门总数的表达式。我不确定您到底使用了什么表达式，但它应该是以下形式：

SUM(epmployeePercentageColumn)/COUNT(employeePercentageColumn)

显然，将“employeePercentageColumn”替换为代表特定部门下每个员工百分比的任何字段或变量或表达式。

如果您当前的表达式不是那种形式，请尝试调整它。

希望能帮助到你。

# javascript - (html/css/javascript) 试图使导航栏中的当前页面链接具有不同的颜色

> ID：12255427
> 
> 赞同：0
> 
> 时间：2012-09-04T00:34:56.733
> 
> 标签：javascript, jquery

我一直在阅读，人们只推荐 CSS 来更改当前页面导航栏链接背景颜色，但我不明白这是怎么可能的，因为 CSS 是静态的，我将无法`.currentlink`在链接上添加/删除类？所以现在我正在使用 JS / jquery 尝试添加/删除基于点击的类，但是当我点击时网站刷新并且没有保存任何内容，所以我添加/删除的类没有做任何事情。有人可以指导我正确的方向吗？示例：我单击了给您的 HTML 的最后一个链接，但它只会转到该站点，并且由于所有内容都会刷新到新站点，因此背景不会改变。

HTML

```
 <nav class="clearfix">

        <a href="#">home</a> 
        <a href="#">about us</a> 
        <a href="#">tour</a>
        <a href="index.html">flickr search</a>

    <div class="rightnav">
        <a href="#">Sign Up</a>
        <a href="#">Log In</a>
    </div>

    </nav> 
```

CSS

```
.greybackground {
background: #E6E6E6;
} 
```

JS

```
$('nav a').on('click', function(){
    $('nav a').removeClass('greybackground');
    $(this).addClass('greybackground');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-29T08:38:24.947

如果您正在创建多页面网站并希望更改每个页面上的链接颜色，只需创建一个具有特定 css 属性的类并将该类添加到每个页面上的相应导航栏链接。确保在任何页面上，类必须仅添加到相应的页面链接。

如果您正在寻找单页网站的解决方案，则任何以下代码都可以正常工作

这是简单导航栏的html css代码

```
<h1>navbar</h1>
   <li><a href="#" class="link">Home</a></li>
   <li><a href="#" class="link">Products</a></li>
   <li><a href="#" class="link">About us</a></li>
   <li><a href="#" class="link">Contact</a></li>
   <button>Log in</button>
 </ul>

a{
 background-color:black;
 padding:10px;
 text-decoration:none;
 color:white;
}

li{
 margin:30px;
 display:inline;
 }

ul{
 list-style-type: none;
 }

.transform{
 background-color:red;
 }

 button{
  background-color:green;
  padding:10px;
  color:white;
} 
```

这是更改活动链接的背景颜色的 javascript

```
 $("a.link").click(function(){
  $("a.link").css("background-color", "black");
  $(this).css("background-color", "red");
 }); 
```

只需为每个导航栏链接添加类“.link”，当用户单击应用于该链接的任何导航栏链接 css 属性广告时，所有其他链接都会将其 bg 颜色更改为无。我希望它有帮助

[https://codepen.io/pranjalkoshti/pen/GMarvj](https://codepen.io/pranjalkoshti/pen/GMarvj)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-29T08:58:27.613

实现这一目标的最简单方法是确定一个元素

1.  出现在每一页上
2.  您可以将标记添加到

例如，您的整体内容的 div。

如果将以下内容添加到 div ：

```
<div id="content" data-currentpage="about"> 
```

这将唯一标识页面。

并为每个菜单项添加一个匹配的类：

```
<li><a href="#" class="link" class="home">Home</a></li>
<li><a href="#" class="link" class="products">Products</a></li>
<li><a href="#" class="link" class="about">About us</a></li>
<li><a href="#" class="link" class="contact">Contact</a></li> 
```

因此，在页面准备就绪（ jQuery(document).ready(function(){...) 上运行以下代码：

```
// -- Find the pages 'data' tag --
var currentPage = jQuery('#content').data('currentPage');
// -- Add a dot to turn it into a class identifier --
currentPage = '.' + currentPage;
// -- Add a background class to to the menu item with that class --
jQuery(currentPage).addClass('greybackground'); 
```

这会将每个页面（通过 data-currentpage 标签）“匹配”到相应的菜单项，并将您的背景类添加到该菜单项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-02T11:52:43.960

vanilla JS（HTML，CSS）中的解决方案。

导航栏项目需要在类 .navlinks

在类 current-link 下添加样式。

```
<html>
    <nav>
        <ul>
            <li class="navlinks"></li>
            <li class="navlinks"></li>
        </ul>
    </nav>
</html> 
```

```
<style>
.current-link {
      background-color: red;
}
</style> 
```

```
<script>
  let links = document.getElementsByClassName("navlinks");
  for(let i = 0;i < links.length;i++){
    if (links[i].href.replace(/\/$/, '') == ocument.URL.replace(/\/$/, '')){
      links[i].classList.add("current-link");
    }
  }
</script> 
```

# ruby-on-rails - Ruby on Rails，测试时出现Rspec错误

> ID：12255432
> 
> 赞同：2
> 
> 时间：2012-09-04T00:35:27.180
> 
> 标签：ruby-on-rails, testing, rspec

我正在关注 Michael Hartl 的教程。我尝试使用 Rspec 测试应用程序的第一个测试示例，当我执行此命令**“bundle exec rspec spec\requests\static_pages_spec.rb”**时，我收到此错误。

```
F

Failures:

  1) Home page should have the content 'Sample App'
     Failure/Error: visit '/static_pages/home'
     NoMethodError:
       undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_1:0x39e1510 @example=nil>
     # ./spec/requests/static_pages_spec.rb:4:in `block (2 levels) in <top (required)>'

Finished in 0.001 seconds
1 example, 1 failure

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:3 # Home page should have the content 'Sample App' 
```

**static_pages_spec.rb**

```
describe "Home page" do
  it "should have the content 'Sample App'" do
    visit '/static_pages/home'
    page.should have_content('Sample App')
 end
end 
```

**宝石文件.rb**

```
source 'https://rubygems.org'

gem 'rails', '3.2.1'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.10.0'
end

group :assets do
  gem 'sass-rails', '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails'

group :test do
  gem 'capybara', '1.1.2'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T00:44:43.170

你需要`require 'spec_helper'`在你的规范源中。

你`spec_helper`应该包括`rspec/rails`两者`capybara/rails`。

但是，如果您想访问响应，您将需要使用`get`而不是。`visit`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T17:28:29.913

如果**static_pages_spec.rb**有字符串`require 'spec_helper'`并且你得到

> 失败/错误：访问“/static_pages/home”

*   添加到**spec_helper.rb**字符串`config.include Capybara::DSL`

它帮助了我

# queue - 使用 TextWrangler 编辑测试多线程和队列模块的 Python 2.7 脚本时出现的奇怪问题

> ID：12255433
> 
> 赞同：1
> 
> 时间：2012-09-04T00:35:29.107
> 
> 标签：queue, python-multithreading, textwrangler

我正在用 Python 2.7 编写一个脚本，探索多线程和队列模块的使用。该脚本只定义了两个函数，其中一个将在线程实例中启动以填充队列，第二个将在第二个线程实例中启动以从队列中提取某些内容。但是，我什至无法执行此脚本，因为它甚至在执行之前就阻塞了其中一个函数定义。有问题的代码片段是：

```
def listenThread(counter):
    while queue.empty() != True:
        try:
            outcome = queue.get()
            print outcome
            counter -=1
            print counter 
        except: 
            return 'queue.get() command loop failing.' 
```

我收到的错误消息是：

```
$ python threading-and-queue-test.py
  File "threading-and-queue-test.py", line 34
    except: 
           ^
IndentationError: unindent does not match any outer indentation level
$ 
```

我已经搜索了 SO 并检查了文档以了解`try-except`构造的正确形式，看起来还可以。我有早期版本的代码（没有`try-except`）工作，所以我对文本编辑器 TextWrangler v4.0.1 产生怀疑。

任何人都可以建议调试方法或代码更正吗？谢谢！红色的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:49:18.007

正如您已经怀疑的那样，这很可能是缩进错误。您的文本编辑器可能混合使用制表符和空格。用空格替换所有制表符（反之亦然，尽管 python 中的标准是 4 个空格），您应该会看到错误消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:28:32.787

对于那些后来像我一样发现这个问题的人来说，修复 TextWrangler 的设置并完全停止这个问题很容易；转到“首选项”->“编辑器默认值”->“自动扩展选项卡”，然后将选项卡设置为 4 个空格。重新启动 TextWrangler 以使更改生效。对于继续给您带来问题的现有文档，请[阅读此](https://stackoverflow.com/a/6475636/938865)。

# javascript - 点击时的 qtip2 仅显示一次

> ID：12255435
> 
> 赞同：0
> 
> 时间：2012-09-04T00:35:33.227
> 
> 标签：javascript, jquery, qtip2

我正在尝试将 qTip2 配置为在单击 div 时显示。

它仅在第一次单击时起作用...

我在这里有一个样本：http: [//jsfiddle.net/8qLXF/1/](http://jsfiddle.net/8qLXF/1/)

疯狂的是：我在项目的其他部分使用相同的配置，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:10:31.260

每次单击 element( `a`) 时，您都将插件应用于元素。你应该`$('...').qtip({..})`只对一个元素做一次。

您可以使用`.one()`绑定只会发生一次的点击事件。[样本](http://jsfiddle.net/8qLXF/3/)

# xml - LISP 下载和解析 XML

> ID：12255437
> 
> 赞同：1
> 
> 时间：2012-09-04T00:35:55.620
> 
> 标签：xml, dom, lisp

我目前正在学习 LISP，我有一个快速的问题。使用 CXML 我可以很容易地解析本地文件，但我试图从网上提取一个 XML 文件并在内存中解析它。我知道我的代码有问题，但我无法弄清楚。

```
(cxml:parse-file (map 'string #'code-char
                   (drakma:http-request "http://api.eve-online.com/server/ServerStatus.xml.aspx"))
   (cxml-dom:make-dom-builder)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:25:21.660

```
(cxml:parse (map 'string #'code-char (drakma:http-request "http://api.eve-online.com/server/ServerStatus.xml.aspx")) 
                                     (cxml-dom:make-dom-builder)) 
```

结果：

```
#<RUNE-DOM::DOCUMENT {1005BECB53}> 
```

`cxml:parse`如果我根据您的示例正确理解，是您要查找的命令。`cxml:pars-stream`需要一个流，并且`cxml:parse-file`需要一个文件......你没有给它们，你传递给它们的参数是一个字符串。

`cxml:parse-rod`更具体，只解析字符串，而`cxml:parse`通用，将解析文件、流、八位字节和字符串。

顺便说一句，你也可以这样做

```
(cxml:parse-octets (drakma:http-request "http://api.eve-online.com/server/ServerStatus.xml.aspx") (cxml-dom:make-dom-builder)) 
```

无需将二进制数组从 drakma 转换为字符串。

# php - 带有子查询的慢mysql查询

> ID：12255439
> 
> 赞同：0
> 
> 时间：2012-09-04T00:36:13.757
> 
> 标签：php, mysql, performance

我在 PHP 中遇到了这个查询的问题。它太慢了，执行后几分钟我无法连接到服务器。我一直在从主查询中删除单独的子查询，并发现在我删除最后一个内部查询后它工作得非常顺利。

表“u”有 30.000 行，表“u_r”大约有 17.000 行，表“u_s”大约有 13.000 行，表“s”大约有 100 行。尽管表“u_r”和“u_s”有很多行，但只有 2-3 行有与条件匹配的相同“id_u”。

我希望，我提供了足够的信息。如果您还需要了解其他信息，请随时在评论中提问。

```
SELECT DISTINCT id_p
FROM u
WHERE
    '$x' IN(
        SELECT id_p
        FROM u_p
        WHERE id_u=u.id_u
    )
    AND
    (
        '$y' IN (
            SELECT id_r
            FROM u_r
            WHERE id_u=u.id_u
        )
        OR
        '$y' IN (
            SELECT DISTINCT id_r
            FROM s
            WHERE id_s IN (
                SELECT id_s //without this query, everything works fine
                FROM u_s
                WHERE id_u=u.id_u
            )
        )
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:13:05.663

我认为你可以改变：

```
SELECT DISTINCT id_r 
        FROM s 
        WHERE id_s IN ( 
            SELECT id_s //without this query, everything works fine 
                FROM u_s 
                WHERE id_u=u.id_u 
```

到

```
SELECT s.id_s
        FROM u_s 
             INNER JOIN s ON u_s=id_u=u.id_u
        WHERE u_s.id_u = u.id_u
        GROUP BY s.id_r 
```

没有经过测试，因为我正试图将头绕在结构上。

还记得检查索引。作为一个粗略的指南，你应该在“WHERE”和“ON”索引中的任何内容：

```
u_p.id_u
u_r.id_u
u_s.id_u
s.id_s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T02:14:25.257

测试这会产生相同的结果 - 应该更快。

1.  用内部连接替换 IN 语句。查询优化器有更多机会以这种方式进行优化
2.  消除您的 OR 语句 - 我使用 UNION 执行此操作。我认为如果您愿意，您可能可以使用 LEFT JOIN 来消除 OR。
3.  您需要对此进行测试 - 我没有任何示例数据。

> ```
> select distinct id_p
> from u
> inner join u_p
> on u.id_u = u_p.id_u
> and u_p.id_u = '$x'
> inner join
> (
>   select id_r.id_u
>   from u_r
>   where id_r = '$y'   
>   union
>   select id_r
>   from s
>   inner join u_s
>   on s.id_u = u_s.id_u
>   where id_r = '$y'
> ) as subq
> on u.id_u = subq.id_u 
> ```

# c++ - 字符返回函数指针 C++

> ID：12255440
> 
> 赞同：1
> 
> 时间：2012-09-04T00:36:25.950
> 
> 标签：c++, function, pointers, character

感谢阅读，我的问题是这是否正确编码：

测试1.cpp：

```
void Load(OBJECTSTRUCT* gObj)
{
    char * VipType = VipTypeCheck(gObj->m_Index);
    MsgOutput(gObj->m_Index,"[%s] Welcome",VipType);
} 
```

测试2.cpp：

```
char* VipTypeCheck(int aIndex)
{
    switch (VipSystem[aIndex].VIP_Type)
    {
    case 0:
        return "Regular";
        break;
    case 1:
        return "Bronze";
        break;
    case 2:
        return "Gold";
        break;
    case 3:
        return "Diamond";
        break;
    default:
        return "[Error]";
        break;
    }
    return "[Error]";
} 
```

它有效，但我的问题是，这会导致分段错误/堆栈溢出或任何其他类型的错误吗？我知道我没有分配动态内存，但我怀疑变量 char *VipType 是否可以。谢谢，对菜鸟问题感到抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T00:38:40.287

你很好 - 你正在返回一个指向为程序生命周期分配的 const 静态字符串的指针。

您可能想要更改返回类型，`const char *`因为从技术上讲，字符串是不可修改的。

指针对程序的生命周期有好处，因为编译器将它们放入一个保证程序生命周期存在的区域。

它们不可修改的原因是因为编译器可能变得聪明并意识到在两个地方你返回`[Error]`并注意到它们是相同的并且对两者使用相同的指针 - 所以修改它可能会导致逻辑错误，因为一个 func 期望它是相同，另一个不

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T00:42:18.663

*   您需要`VipTypeCheck`在`test1.cpp`
*   该`VipTypeCheck`函数应该返回`const char *`而不是`char *`
*   变量`VipType`也应该是类型`const char *`

除此之外，您应该没问题：将字符指针返回到字符串文字是可以的，因为它们不是返回它们的函数的本地。

还可以考虑使用数组简化函数，如下所示：

```
const char *VipTypes[] = {
    "Regular", "Bronze", "Gold", "Diamond"
};
const char * VipTypeCheck(unsigned int i) {
    return i < 4 ? VipTypes[i] : "[Error]";
} 
```

# java - Windows下模拟打印屏幕

> ID：12255441
> 
> 赞同：4
> 
> 时间：2012-09-04T00:36:42.853
> 
> 标签：java, netbeans, bufferedimage, awtrobot, printscreen

我知道我们可以使用以下代码模拟打印屏幕：

```
 robot.keyPress(KeyEvent.VK_PRINTSCREEN); 
```

..但是如何返回一些`BufferedImage`？

我在 Google 上找到了一些方法，`getClipboard()`但 Netbeans 在这个方法上返回了一些错误（找不到符号）。

我很抱歉问这个问题，但是有人可以向我展示一个关于如何从这个按键返回的工作代码，`BufferedImage`然后我可以保存吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T01:04:05.243

这不一定会给你一个`BufferedImage`，但它会是一个`Image`. 这利用[`Toolkit.getSystemClipboard`](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#getSystemClipboard%28%29).

```
final Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
if (clipboard.isDataFlavorAvailable(DataFlavor.imageFlavor)) {
  final Image screenshot = (Image) clipboard.getData(DataFlavor.imageFlavor);
  ...
} 
```

如果您*确实*需要 a `BufferedImage`，请尝试以下操作...

```
final GraphicsConfiguration config
    = GraphicsEnvironment.getLocalGraphicsEnvironment()
          .getDefaultScreenDevice().getDefaultConfiguration();
final BufferedImage copy = config.createCompatibleImage(
    screenshot.getWidth(null), screenshot.getHeight(null));
final Object monitor = new Object();
final ImageObserver observer = new ImageObserver() {

  public void imageUpdate(final Image img, final int flags,
      final int x, final int y, final int width, final int height) {
    if ((flags & ALLBITS) == ALLBITS) {
      synchronized (monitor) {
        monitor.notifyAll();
      }
    }
  }
};
if (!copy.getGraphics().drawImage(screenshot, 0, 0, observer)) {
  synchronized (monitor) {
    try {
      monitor.wait();
    } catch (final InterruptedException ex) { }
  }
} 
```

不过，我真的不得不问你为什么不只使用[`Robot.createScreenCapture`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html#createScreenCapture%28java.awt.Rectangle%29).

```
final Robot robot = new Robot();
final GraphicsConfiguration config
    = GraphicsEnvironment.getLocalGraphicsEnvironment()
          .getDefaultScreenDevice().getDefaultConfiguration();
final BufferedImage screenshot = robot.createScreenCapture(config.getBounds()); 
```

# google-chrome - 将 SVG 图像从浏览器复制到剪贴板

> ID：12255444
> 
> 赞同：25
> 
> 时间：2012-09-04T00:37:05.187
> 
> 标签：google-chrome, svg, clipboard

我正在开发一个 Web 应用程序，它接受用户输入，进行工程计算，然后显示格式化的报告或图形。这些图形是工程图，并不总是像饼图这样的标准图形。该应用程序的主要功能是使用户能够将这些图表从浏览器复制到 Word 或 Excel 文档中。

我必须选择使用在客户端生成的 SVG 或在服务器端生成的位图。我更喜欢 SVG 方法，并且原型设计看起来不错，但是，跨浏览器似乎对复制 SVG 图形的支持不一致，尤其是当图形显示在 div 中时（即整个页面不是 .svg）。例如，IE 在下拉列表中显示“复制”，但仅将 SVG 图形的一部分复制到剪贴板。如果我右键单击 SVG 图形，Chrome 不会提供任何复制选项。

如果我用 Google 搜索一下，我会惊讶地发现关于从 Web 应用程序获取 SVG 图像到剪贴板的问题的信息很少。

我对**解决此问题的读者的问题**：

1.  是否有一致的方法将作为较大 DOM 一部分的 SVG 元素放到剪贴板上，最好使用 JavaScript；

2.  鉴于我需要从浏览器获取图形到剪贴板的任何其他建议？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T05:16:55.577

与其`svg`将 svg 元素显示为 svg 元素，不如将其与`img`标签一起显示。这有一些限制（您不能显示自定义字体或嵌入脚本，但似乎这不是您的用例）。好处是它的行为与您对图像的期望完全一样（您可以拖放、右键单击和复制等）。

为此，您需要使用 base64 对其进行编码。你可以用js做服务器端或客户端。您的图像标签最终看起来像......

```
<img src="data:image/svg;base64,R0lGODlhEAAQAMQAAORHHOVSKudfOulrSOp3WOyDZu6QdvCchPGolf" width="..." height="..." alt="diagram" /> 
```

`R0lGODlhEAAQAMQ...`你的base64编码的svg在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T01:04:09.857

Javascript 和剪贴板是 a** 中的一个痛点。

我知道有一种针对您的情况的解决方法：

如果是真正的 SVG 文件，在 Chrome 中，右键单击图像，然后选择“检查元素”。浏览器控制台将打开，并且应该打开一个 SVG 元素，您可以在检查器中选择该元素。右键单击检查器中的 svg 标签，然后选择“复制”或“复制为 HTML”（我不记得确切的选择）

将该文本粘贴到文本文件中，然后使用 SVG 扩展名保存该文件。然后可以在任何浏览器或 SVG 编辑程序中打开它。 [Inkscape](http://inkscape.org)是编辑和调试的好选择，因为您可以在 XML 样式编辑器中查看和编辑整个 SVG 文件。

*** *抱歉 - 我错过了您请求的第一部分。那会很棘手。恐怕我对那部分无能为力。不过，复制和粘贴可能不是您的最佳选择。有 PHP 类可以操作 SVG 和 Excel 文件，这很可能是要走的路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-08T08:33:41.200

我设法将 SVG 内容作为纯 XML 文本复制到剪贴板，但它对我来说似乎没用，因为 Inkscape（我用来处理 SVG）[不能将剪贴板中的文本识别为 SVG](https://answers.launchpad.net/inkscape/+question/268528)。看来复制 SVG 的文本是不够的，浏览器还应该将**mime-type**设置为`image/svg+xml`.

我用 HTML5 Clipboard API 尝试了几个技巧，但最终以 Chrome 无法将 mime-type 导出到系统剪贴板的问题结束。相关的错误报告和 jsfiddle 链接在这里[https://code.google.com/p/chromium/issues/detail?id=504700](https://code.google.com/p/chromium/issues/detail?id=504700)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-27T20:26:24.497

我在一个项目中遇到了同样的问题。客户想要一个相当复杂的图表。我们决定使用 svg 来开发它。工作完美，但客户希望能够将图形下载为图片。在互联网上搜索后，我们找到了 saveSvgAsPng ( [https://www.npmjs.com/package/save-svg-as-png](https://www.npmjs.com/package/save-svg-as-png) )。这对我们有用。

该图在页面中是这样的：

```
<svg id="graph1" style="width: 700px; height: 700px">
....
.....
...
</svg> 
```

该图已显示，但无法下载或复制。所以，这是我采取的步骤：

1.  我安装了上面提到的包。

```
<script src="/path/to/lib/save-svg-as-png/lib/saveSvgAsPng.js"></script> 
```

2.  在 svg 代码中添加了“display: none:”，否则我们将有两个相同图像的实例：

```
<svg id="graph1" style="width: 700px; height: 700px; display: none">

 <!-- // code goes here  -->

</svg> 
```

3.  在 svg 图的声明之后，我直接添加了一个新图像。此图像是 svg 图像的新 png 图像表示的占位符。我先隐藏它，以防止图像在加载时闪烁。最初未指定源：

```
<img id="graph1_as_png" src="" width="700" height="700" style="display: none"> 
```

4.  在新添加的图像之后，我添加了一些代码行，即转换技巧：

```
<script>

    svgAsPngUri(document.getElementById("graph1")).then(uri => {
      $("#graph1_as_png").attr('src', uri).show();
    });

</script> 
```

第二张图片的来源是 svg 的 BASE64 编码版本。转换后，显示图像。现在我们有了与 svg 图像完全相同的图像，但可以下载或复制图像。

我希望这对你也有帮助..

# ios - 在另一个故事板选项卡中使用变量

> ID：12255445
> 
> 赞同：0
> 
> 时间：2012-09-04T00:37:09.140
> 
> 标签：ios, xcode, storyboard

我想要做的是在我的 SecondViewController.m 文件的文本字段中显示我的 FirstViewController.m 文件中的计算变量。我发现最简单的方法（虽然可能不是最好的）是使用 NSUserDefaults。我遇到的问题是，在使用应用程序时，如果我返回第一个选项卡并更改变量的值，第二个选项卡中的文本字段在我返回时不会刷新以反映这一点。我希望它自动更改而无需用户按下按钮。有没有办法做到这一点？从第二类访问变量的更好方法也将非常有用。

```
//FirstViewController.m

//Calculation of epleyInt using other text fields and pressing a button.

[epleyField setText:[NSString stringWithFormat:@"%i", epleyInt]];

NSUserDefaults *settings = [NSUserDefaults standardUserDefaults];
[settings setInteger:epleyInt forKey:@"epley"];
[settings synchronize]; 
```

和

```
//SecondViewController.m

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

NSUserDefaults *settings = [NSUserDefaults standardUserDefaults];
int epleyInt = [settings integerForKey:@"epley"];

[epley10Field setText:[NSString stringWithFormat:@"%i", epleyInt]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:48:59.193

设法使用单例变量并移动代码以将文本字段更新为 viewDidAppear 方法。

我发现这很有帮助：[Simple Passing of variables between classes in Xcode](https://stackoverflow.com/questions/10649370/simple-passing-of-variables-between-classes-in-xcode)

# php - 无法将mysql结果获取到php变量

> ID：12255446
> 
> 赞同：0
> 
> 时间：2012-09-04T00:38:09.903
> 
> 标签：php, mysql

我有这个 PHP 代码：

```
$count = "select 
              count(fruit) as total,
              sum(fruit like '%apple%') as apple,
              sum(fruit like '%orange%') as orange
          FROM my_wonderful_table_of_fruits";

$count = mysql_query($count);
$count = mysql_fetch_row($count); 
```

我试图将这些存储在一个变量中，但似乎无法捕捉到它们：/

我的代码是：

```
while ($row = mysql_fetch_array($count)) {
    $count_total = $row['total'];
    $count_apple = $row['apple'];
    $count_orange = $row['orange'];
} 
```

我期待能够像这样回应它们：

`echo "$count_total[0] is the total of $count_apple apples and $count_orange oranges`

当我在 MySQL Admin 中运行此查询时，我得到一个不错的行，如下所示：

```
total    apple    orange
  5        3         2 
```

有谁知道我做错了什么？（除了我使用的是 mysql_fetch_row 的“邪恶”版本）

非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:41:58.887

由于您的查询只产生一行，您可以将其简化为以下内容：

```
list($total,$apple,$orange) = mysql_fetch_row(mysql_query("
    SELECT COUNT(`fruit`) AS `total`,
      SUM(`fruit` LIKE '%apple%') AS `apple`,
      SUM(`fruit` LIKE '%orange%') AS `orange`,
    FROM `my_wonderful_table_of_fruits`"));
echo "$total is the total of $apple apples and $orange oranges."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:47:58.190

你需要重新分析你在做什么。您的 SQL 只会返回包含一些聚合结果的一行，但您似乎希望能够迭代多行结果（由于您的`while()`.

您的 sql 做什么以及您如何尝试使用它是两件不同的事情。

# css - 是否可以在lesscss forloop 中放置多个CSS 规则？

> ID：12255449
> 
> 赞同：0
> 
> 时间：2012-09-04T00:38:30.713
> 
> 标签：css, for-loop, less

是否可以将以下内容放在 lessCSS forloop 中，以便每个循环中每个部分变量的数量都会从 section1 更新到 section4？

// 循环开始

```
.section1 {
    .color {
         color: @section1;
    }
    .colorBG-medium{
         background-color: @section1;
    }
    .colorBG, .tab.active a {
         background-color: @section1;
         &:hover{
             background-color: @section1;
         }
    }
} 
```

// 循环结束

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:35:45.947

根据[冷冻豌豆的罗迪](https://stackoverflow.com/users/419705/roddy-of-the-frozen-peas)指出的[链接](http://blog.thehippo.de/2012/04/programming/do-a-loop-with-less-css/)，是的，可以进行循环，但仅将其用于数值才有意义​​​。对于您的情况，我建议使用[mixins](http://lesscss.org/#-mixins)，包括提高代码的可读性：

```
#foo {
    .bar (@color) {
        .color { color: @color; }
        .colorBG-medium {
            background-color: @color;
        }
        .colorBG, .tab.active a {
            background-color: @color;
            &:hover{
                background-color: @color;
            }
        }
    }
}

.section1 {
  #foo > .bar(red);
}

.section2 {
  #foo > .bar(blue);
} 
```

结果：

```
.section1 .color {
  color: #ff0000;
}
.section1 .colorBG-medium {
  background-color: #ff0000;
}
.section1 .colorBG,
.section1 .tab.active a {
  background-color: #ff0000;
}
.section1 .colorBG:hover,
.section1 .tab.active a:hover {
  background-color: #ff0000;
}
.section2 .color {
  color: #0000ff;
}
.section2 .colorBG-medium {
  background-color: #0000ff;
}
.section2 .colorBG,
.section2 .tab.active a {
  background-color: #0000ff;
}
.section2 .colorBG:hover,
.section2 .tab.active a:hover {
  background-color: #0000ff;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T02:34:17.620

实现该结果的一种可能更好的方法是使用[mixin](http://lesscss.org/#-mixins)。就像是：

```
.section-color (@color) {
    .color {
         color: @color;
    }
    .colorBG-medium{
         background-color: @color;
    }
    .colorBG, .tab.active a {
         background-color: @color;
         &:hover{
             background-color: @color;
         }
    }
}

.section1 {
    .section-color(red);
}
.section2 {
    .section-color(#123456);
}
/* ... */ 
```

# haskell - 如何在我的计算机上使用 Haskell？

> ID：12255451
> 
> 赞同：5
> 
> 时间：2012-09-04T00:38:33.937
> 
> 标签：haskell, functional-programming

我正在学习我的第一个函数式编程语言，但在最初的后勤方面遇到了一些麻烦（教授基本上说，“以某种方式设置它”并且没有提供太多细节。）

无论如何，我有 Mac OS X 版本 10.6.8。首先，我在我的主目录中安装了 GHC，发现我可以在终端中使用命令“ghci”打开它。从那里（请原谅我完全缺乏知识），我按照教学大纲中模糊的说明打开了另一个窗口，其中包含我要修改的 a1.hs 文件以进行作业。当我完成定义一个函数时，我输入了命令“ghc a1-skeleton.hs”来打开解释器并加载它（这就是我要做的，对吧？）但得到了这个错误：

```
a1.hs:5:8:
    Could not find module `System'
    It is a member of the hidden package `haskell98-2.0.0.1'.
    Use -v to see a list of the files searched for. 
```

我猜这就像在 C++ 之类的语言中缺少“#include”或类似的东西。我只需要在特定目录中查找/添加一些东西吗？

另外，由于我没有马上理解这些东西，解释器到底是做什么的？它是在程序语言意义上跳过“编译”并只是尝试立即遵循 .hs 文件中的命令的程序吗？

谢谢！

更新:: 似乎是问题的代码：

```
 2 module Main where
  3 
  4 import Test.HUnit
  5 import System 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T01:00:26.943

问题可能是`System`模块是旧的、非分层的名称。我认为您现在需要使用类似的模块`System.Environment`（取决于您要导入的确切功能）。

由于您没有使用这些模块中的任何功能，因此我无法确切告诉您要导入什么。在 GHCi 中，您可以像这样查看模块定义了哪些函数：

```
Prelude> :browse System.Environment
getArgs :: IO [String]
getEnv :: String -> IO String
getEnvironment :: IO [(String, String)]
getProgName :: IO String
withArgs :: [String] -> IO a -> IO a
withProgName :: String -> IO a -> IO a 
```

您可以尝试摆脱该`import System`语句并加载文件。然后，您应该获得一些不在范围内的标识符。现在您可以将这些输入到[Hoogle](http://www.haskell.org/hoogle/)（巧合的是，这将是您最好的朋友）以查看它们的定义位置。

我的理解是旧`System`模块中的功能现在位于[`System.Environment`](http://www.haskell.org/ghc/docs/7.4-latest/html/libraries/base-4.5.1.0/System-Environment.html),[`System.Process`](http://www.haskell.org/ghc/docs/7.4-latest/html/libraries/process-1.1.0.1/System-Process.html)和[`System.Exit`](http://www.haskell.org/ghc/docs/7.4-latest/html/libraries/base-4.5.1.0/System-Exit.html). 如果您不想深入思考它，则可以导入所有三个：P。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T01:40:52.210

您刚刚安装了 GHC——您可能想要安装[Haskell 平台](http://hackage.haskell.org/platform/)——这是 GHC 的“包含电池”版本。它带有很多你需要的包，它还提供`cabal`了一个 Haskell 的包管理器。这样，您将避免很多“找不到模式”错误，否则会遇到这些错误。

一键安装也没有什么坏处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T00:57:39.857

尝试`ghci -package haskell98 a1-skeleton.hs`在终端中打开它。如果它不起作用，`a1-skeleton.hs`请在您的问题中包含完整的内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T02:28:04.813

关于你的小问题：

ghci 也进行编译，但与非交互式 ghc 不同，它不会创建高效的机器代码，而是编译为更简单的内部字节码，然后直接解释。基本上 ghci 已针对进行快速编译进行了优化（就像您希望快速开发一样），而不是使结果快速运行。

此外，它还包含其他用于交互使用的有用内容，例如 read-eval-print 循环和调试器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T10:15:06.057

1）最好安装haskell平台，而不是单独安装GHC。在没有 cabal-install 可用的情况下工作很痛苦，而且构建它并不总是那么容易，尤其是在最近的 ghc 版本上。

2) ghc 使用复杂的包装系统——cabal。`System`模块由 Haskell98 包导出，默认情况下被屏蔽，应显式启用。对于 ghc 和 ghci，它是使用`-package`switch 完成的（参见 ghc 的在线文档）

3）最好使用`base`package 而`Haskell98`不是`Haskell2010`.

===

ghci 将源代码编译为字节码，默认情况下不保存在磁盘上。如果需要，它还会链接任何外部库/包，在某些特定情况下可能会失败。

# javascript - PHP & CSS：如何为表格的每一行获得悬停效果？

> ID：12255455
> 
> 赞同：1
> 
> 时间：2012-09-04T00:39:19.943
> 
> 标签：javascript, php, css, html-table, hover

我正在使用此代码来显示事件。每个事件都是可点击的，但我真的需要一个背景色悬停效果。也许没有 JavaScript 也有可能？

```
<table class="tableLine">
<tr>
<th>Wann?</th>
<th>Was?</th>
<th>Wer?</th>
<th>Wo?</th>
</tr>

<?php
$all_events = array();
$ten_events = array();

for($i = 0; $events = mysql_fetch_object($events_resource); $i++){

if($i < 9){

    $ten_events[] = $events;

}

$all_events[] = $events;

}  

$i = 0;

foreach($ten_events as $event){ 

$row = $i % 2;

echo "<tr onclick=\"window.location.href = '?page=single_event&amp;id=$event->id'\" style=\"cursor: pointer;\">
        <td class='row_{$row}'>{$event->de_date}</td></a>
        <td class='row_{$row}'>{$event->category}</td>
        <td class='row_{$row}'>{$event->who}</td>
        <td class='row_{$row}'>{$event->location}</td>
      </tr>";

$i++;

} 
?> 
```

**CSS**

这是我的行的 CSS 代码。

```
.tableLine {
font-family: Verdana,Arial,sans-serif;
font-weight: normal;
font-size: 10px;
width: 614px;
border: 0;
padding: 0;
border-spacing: 0;
text-align: left;
}

.tableLine th {
background-color: #990000;
color: #f3f2ea;
font-weight: bold;
}

.row_0 {
background-color: #424140;
padding: 3px 5px 3px 5px;
color: #f3f2ea;
}

.row_1 {
background-color: #555352;
padding: 3px 5px 3px 5px;
color: #f3f2ea;
}

.tableLine tr:hover {
background: #990000;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T00:42:36.433

使用 CSS：

```
 tr:hover { background: #CCC; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T01:29:01.750

尝试这个：

1.  删除`class='row_{$row}'`from`td`并将其放入`tr`标签
2.  然后替换你的css的这一部分：

/**/

```
.row_0 {
background-color: #424140;
padding: 3px 5px 3px 5px;
color: #f3f2ea;
}

.row_1 {
background-color: #555352;
padding: 3px 5px 3px 5px;
color: #f3f2ea;
} 
```

有了这个：

```
.row_0 {
   background-color: #424140;
}

.row_1 {
   background-color: #555352;
}

.row_0:hover, .row_1:hover {
   background-color: #EEE; /* highlight row */
}

.tableLine tr td {
   padding: 3px 5px 3px 5px;
   color: #f3f2ea;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T00:42:58.163

尝试使用`CSS`

```
table tr:hover{background:#eee;}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T00:49:50.443

如果您还想突出显示每一列，您可以为每一列 td 赋予一个独特的类并使用如下内容。(jQuery)

```
$("td").hover(
    // Mouse Over Function
    function () {
        $('.'+$(this).attr('class')).each(function() {
            $(this).css("background","#FAFAFA");
        });
        $(this).parent().children("td").each(function() {$(this).css("background","#FAFAFA")});
        $(this).css("background","#FAEEFA");
    },
    // Mouse Out Function
    function () {
        $('.'+$(this).attr('class')).each(function() {
            $('.'+$(this).attr('class')).css("background","#FFFFFF");
        });
        $(this).parent().children("td").each(function() {$(this).css("background","#FFFFFF")});
    }); 
```

# php - 如何将产品评论导入 Magento？

> ID：12255463
> 
> 赞同：1
> 
> 时间：2012-09-04T00:42:23.237
> 
> 标签：php, magento

我在下面找到了脚本，据说它可以工作，但我只是不确定他们在哪里或如何让文件/脚本工作，并希望有人可以帮助我阐明一些问题。

有多种方法可以将东西导入 Magento - 通过自定义 xml 数据文件或仅通过 php 脚本，这就是它所说的，但我很好奇它从哪里提取数据从它所谓的导入？

```
 <?php
ini_set('memory_limit', '128M');

require_once 'path-to-Mage.php';
Mage::app();

Mage::app()->setCurrentStore(4); //desired store id
$review = Mage::getModel('review/review');
$review->setEntityPkValue(147);//product id
$review->setStatusId(1);
$review->setTitle("title"); 
$review->setDetail("detail");
$review->setEntityId(1);                                      
$review->setStoreId(Mage::app()->getStore()->getId());                     
$review->setStatusId(1); //approved
$review->setCustomerId(273);//null is for administrator
$review->setNickname("Me");
$review->setReviewId($review->getId());
$review->setStores(array(Mage::app()->getStore()->getId()));                    
$review->save();
$review->aggregate();
?> 
```

因此，如果这是我的 php 脚本，我将它放在哪里？有人可以帮我制定用于导入的 xml 脚本吗？

提前感谢您的任何帮助

梅根

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:14:30.127

您希望导入的评论目前采用什么格式？

看来您需要扩展此脚本，例如：打开一个包含您的评论的文件，循环浏览它们并在此循环中使用上述代码，将“标题”和“详细信息”等替换为实际的评论信息。

**根据您在下面的评论进行编辑***** ********

 **我假设您有 PHP 和 Magento 编码经验 - 如果没有，也许您应该寻求开发人员的帮助。

```
<?php 
ini_set('memory_limit', '128M'); 

require_once 'path-to-Mage.php'; 
Mage::app(); 
$fp = fopen($fileLocation, 'r');
Mage::app()->setCurrentStore(4); //desired store id 
while($line = fgetcsv($fp)) {
     $review = Mage::getModel('review/review'); 
 $review->setEntityPkValue($line[0]);//product id 
 $review->setStatusId($line[1]); 
 $review->setTitle($line[2]);  
 $review->setDetail($line[3]); 
 $review->setEntityId($line[4]);                                       
 $review->setStoreId(Mage::app()->getStore()->getId());                      
 $review->setStatusId($line[5]); //approved 
 $review->setCustomerId($line[6]);//null is for administrator 
 $review->setNickname($line[7]); 
 $review->setReviewId($review->getId()); 
 $review->setStores(array(Mage::app()->getStore()->getId()));                     
 $review->save(); 
 $review->aggregate(); 
}

?> 
```

您显然需要将 $fileLocation 替换为 CSV 文件的目录位置和文件名。CSV 的每一行都将被读入一个数组 $line。这些列将映射到数组中的元素编号。例如 $line[0] 是该行的第一列。您需要更改元素引用，以便数据与您的 CSV 列匹配。

这足以让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-04T05:19:08.523

如果您想通过纯 SQL 导入，则可以使用以下查询集：

```
-- Edit values
SET @PRODUCT_ID         = 123;
SET @STORE_ID           = 1;
SET @CUSTOMER_ID        = NULL;
SET @REVIEW_TITLE       = 'Lorem Ipsum';
SET @REVIEW_DETAIL      = 'Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit...';
SET @REVIEW_RATING      = 5; -- Between 1 to 5
SET @REVIEW_NICKNAME    = 'John Doe';
SET @REVIEW_CREATED_AT  = '2019-07-15'; -- OR date in YY-mm-dd HH:ii:ss format

-- No need to Edit
SET @REVIEW_ENTITY_ID   = (SELECT entity_id FROM rating_entity WHERE entity_code = 'product'); -- 1: product, ...
SET @REVIEW_STATUS_ID   = (SELECT status_id FROM review_status WHERE status_code = 'Pending'); -- 1: Approved, 2: Pending, 3: Not Approved

INSERT INTO review SET created_at = @REVIEW_CREATED_AT, entity_id = @REVIEW_ENTITY_ID, entity_pk_value = @PRODUCT_ID, status_id = @REVIEW_STATUS_ID;
SET @REVIEW_ID = (SELECT LAST_INSERT_ID());
INSERT INTO review_detail SET review_id = @REVIEW_ID, store_id = @STORE_ID, title = @REVIEW_TITLE, detail = @REVIEW_DETAIL, nickname = @REVIEW_NICKNAME, customer_id = @CUSTOMER_ID;
INSERT INTO review_store SET review_id = @REVIEW_ID, store_id = 0;
INSERT INTO review_store SET review_id = @REVIEW_ID, store_id = @STORE_ID;
INSERT INTO rating_option_vote SET option_id = 5, remote_ip = '', remote_ip_long = 0, customer_id = @CUSTOMER_ID, entity_pk_value = @PRODUCT_ID, rating_id = @REVIEW_ENTITY_ID,
review_id = @REVIEW_ID, percent = 100, value = @REVIEW_RATING; 
```

您可以在此处获取详细步骤：
[https ://blog.magepsycho.com/import-product-reviews-in-magento-via-sql/](https://blog.magepsycho.com/import-product-reviews-in-magento-via-sql/)**

# c++ - 我的指针违反了访问限制错误，我想解释一下我应该在 Book 非默认构造函数中做什么

> ID：12255466
> 
> 赞同：0
> 
> 时间：2012-09-04T00:42:36.793
> 
> 标签：c++, oop, pointers

我正在做作业，并且正在尝试遵循类图。在 Book.cpp 文件中，无论是**注释文本**，它都会导致错误提示：`Unhandled exception at 0x00CE3F1B in Lab 1.exe: 0xC0000005: Access violation reading location 0xCCCCCD1C`.

在下面的代码中，我不知道我应该用指针做什么，我不知道我应该如何将这个对象变量传递给这个构造函数或者我应该用它做什么。我对c++很困惑。我在这篇文章的末尾附上了类图。

```
Book::Book(string title, Author *pAuthor, Publisher *pPublisher, double price)
{
    setTitle(title);
    setPrice(price);
} 
```

Book.cpp 文件：

```
#include <iostream>
#include <sstream>
using namespace std;

#include "Book.h"

Book::Book()
{
}

Book::Book(string title, Author *pAuthor, Publisher *pPublisher, double price)
{
    setTitle(title);
    setPrice(price);
}

void Book::setTitle(string  title)
{
    this->title = title;
}

void Book::setAuthorName(string first, string last)
{
    //pAuthor->setFirstName(first);
    //pAuthor->setLastName(last);
}

void Book::setPublisher(string name, string address, string city)
{
    //pPublisher->setName(name);
    //pPublisher->setAddress(address);
    //pPublisher->setCity(city);
}

void Book::setPrice(double price)
{
    this->price = price;
}

string Book::convertDoubleToString(double number)
{
    return static_cast<ostringstream*>( &(ostringstream() << number) ) -> str();
}

string Book::getBookInfo()
{
    return "0"; //title + "\n" + pAuthor->getFullName() + "\n" + pPublisher->getPublisherInfo() + "\n" + "$" + convertDoubleToString(price);
} 
```

Book.h 文件

```
#include "Publisher.h"
#include "Author.h"

class Book
{
    public:
        Book();
        Book(string title, Author *pAuthor, Publisher *pPublisher, double price);
        ~Book();
        void setTitle(string title);
        void setAuthorName(string first, string last);
        void setPublisher(string name, string address, string city);
        void setPrice(double price);
        string convertDoubleToString(double number);
        string getBookInfo();

    private:
        string title;
        double price;
        Author *pAuthor;
        Publisher *pPublisher;
}; 
```

这就是我在 main.cpp 中的内容

```
#include <iostream>
#include <string>
using namespace std;

#include "Book.h"

int main()
{
    system("cls");

    cout << "Book 1" << endl;

    Author *pAuthor = new Author("John", "Doe");
    Publisher *pPublisher = new Publisher("Wrox", "10475 Crosspoint Blvd.", "Indianapolis");
    Book *pBook = new Book("Memory Management", pAuthor, pPublisher, 39.99);

    cout << pBook->getBookInfo() << endl;

    cout << endl << "Book 2" << endl;

    Book book;

    book.setTitle("Advanced C++ Programming");
    book.setAuthorName("Linda", "Smith");
    book.setPublisher("Microsoft Press", "One Microsoft Way", "Redmond");
    book.setPrice(49.99);

    cout << book.getBookInfo() << endl << endl;

    system("pause");

    return 0;
}; 
```

作者.cpp

```
#include <iostream>
#include <string>
using namespace std;

#include "Author.h"

Author::Author()
{
}

Author::Author(string first, string last)
{
    setFirstName(first);
    setLastName(last);
}

string Author::getFullName()
{
    return firstName + " " + lastName;
}

void Author::setFirstName(string first)
{
    this->firstName = first;
}

void Author::setLastName(string last)
{
    this->lastName = last;
} 
```

发布者.cpp

```
#include <iostream>
#include <sstream>
#include <string>
using namespace std;

#include "Publisher.h"

Publisher::Publisher()
{
}

Publisher::Publisher(string name, string address, string city)
{
    setName(name);
    setAddress(address);
    setCity(city);
}

string Publisher::getPublisherInfo()
{
    return string(name + "\n" + address + "\n" + city);
}

void Publisher::setName(string name)
{
    this->name = name;
}

void Publisher::setAddress(string address)
{
    this->address =  address;
}

void Publisher::setCity(string city)
{
    this->city = city;
} 
```

类图，因为我很迷茫。我相信我的结构是正确的，并且一些传递变量很好。但我只是不知道如何用指针来做。

![在此处输入图像描述](../Images/f04b05b4deae50a92a1dbf2715400d6d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:48:17.820

看起来您的类对象有两个指针，一个指向发布者，另一个指向作者，它们从未被初始化。当您尝试在这些对象上调用成员函数时，您会导致未定义的行为，特别是您的应用程序崩溃。

# jquery - iScroll - Uncaught ReferenceError: myScroll is not defined in index and Stale touch event ACTION_DOWN 从 webcore 接收

> ID：12255470
> 
> 赞同：0
> 
> 时间：2012-09-04T00:43:11.533
> 
> 标签：jquery, jquery-mobile, iscroll4, iscroll, referenceerror

我在我的关卡页面中使用了 iScroll，但不知何故我的编辑在我没有使用 iScroll 的索引页面（另一个页面）中抱怨 ReferenceError。我在我的索引中搜索“myScroll”，但我的索引中没有这样的词。由于该错误，我在浏览器中工作的 iScroll 在 Android 模拟器中不起作用。

```
09-04 08:31:06.249: E/Web Console(942): Uncaught ReferenceError: myScroll is not defined at file:///android_asset/www/index.html:1 
```

如果我在模拟器中滑动，它会产生

```
09-04 15:58:57.318: W/webview(3045): Stale touch event ACTION_DOWN received from webcore; ignoring 
```

index.html（我没有使用 iScroll）

```
<!DOCTYPE html>
<html>
<head>

<title>App Name</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<link rel="stylesheet" href="css/jquery.mobile-1.0rc1.min.css" />
<link rel="stylesheet" href="css/style.css" />
</head>
<body>        
<div id="mainContainer" data-role="page" >
<div data-role="content">
    <div id="homeLinks">
    <img id="icon" src="css/images/icon.png">
    <p><a href="#level" data-role="button" data-theme="a">level</a></p>

    </div>   
  </div>        
</div>
<script src="js/jquery.js"></script>
<script src="js/jquery.mobile-1.0rc1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/cordova-1.7.0.js"></script>
</body>
</html> 
```

级别页面（我使用 iScroll 的页面）

```
<div data-role="page" data-add-back-btn="true" >
<header data-role="header">  
    <a href="settings.html" data-icon="gear" data-theme="b" class="ui-btn-right">Settings</a>  
    <h1>Study Levels</h1>  
</header>
<div id="level1" data-role="content">
    <div id="wrapper">
        <div id="scroller">
             <ul id="thelist">
                  <li><img src="css/images/level1.png"/></li>
                  <li><img src="css/images/level2.png"/></li>
                  <li>zz</li>
            </ul>
        </div>
    </div>

</div>      

<footer data-role="footer" data-position="fixed" data-tap-toggle="false">
    <div id="nav">
      <div id="prev" onclick="myScroll.scrollToPage('prev', 0);return false">&larr; prev</div>
      <ul id="indicator">
        <li class="active">1</li>
        <li>2</li>
        <li>3</li>
      </ul>
      <div id="next" onclick="myScroll.scrollToPage('next', 0);return false">next &rarr;</div>
    </div>
</footer> 
```

```
<script src="js/jquery.js"></script>
<script src="js/jquery.mobile-1.0rc1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/cordova-1.7.0.js"></script>
<script src="js/ender.js"></script>
<script type="text/javascript" src="iscroll-lite.js"></script>
<script type="text/javascript" charset="utf-8">
         $(document).ready(function () {

        this.myScroll = $('#wrapper').iScroll({
        snap: true,
        momentum: false,
       hScrollbar: false,
        onScrollEnd: function () {
          document.querySelector('#indicator > li.active').className = '';
          document.querySelector('#indicator > li:nth-child(' + (this.currPageX+1) + ')').className = 'active';
        }
        })
    })
 </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:25:56.293

- - 更新 - - -

再看一眼， $('#wrapper').iScroll... 中的 $ 来自 ender 而不是 jQuery，我相信这会导致冲突。

所以你可能想创建一个闭包，像这样：

```
 (function($){
      $(document).ready(function() {
           this.myScroll = $('#wrapper').iScroll({
           //custom options here 
           });
      });
  })(ender); 
```

并且因为 enders document.ready 函数中的 'this' 指向 window 对象，

您可以像这样简单地传递内联事件处理程序：

```
 <div id="prev" onclick="myScroll.scrollToPage('prev', 0);return false"> stuff </div> 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:49:46.040

`myScroll`您已将变量绑定到文档。因此，要么你必须通过调用我们它`document.myScroll`，或者你可以`window`通过替换将它绑定`this`到`window`（或者只是删除它）所以它变成：

```
window.myScroll = $('#wrapper') ... 
```

然后您可以将其称为常规变量。

# ubuntu - omap_udc.c g_hid.c 使用 Ubuntu 在 beaglebone 上隐藏小工具

> ID：12255471
> 
> 赞同：0
> 
> 时间：2012-09-04T00:43:15.573
> 
> 标签：ubuntu, embedded, kernel-module, hid, beagleboard

我想将 beagleboneas 用作 HID 外围设备。我计划执行以下操作：

1.  了解如何使用 Ubuntu 构建事物。
2.  获取内核源代码（3.2.28 ？）。
3.  编译 omap_udc 和 g_hid
4.  将这些模块插入内核
5.  从 gadget_hid.txt 编译示例
6.  使用 hid_gadget_test /dev/hidg0 键盘发送键盘命令

*有人问过这个问题，但在下面的链接上有埃*：

*   [omap_udc.c g_hid.c 使用 angstrom linux 在 beagleboard 上隐藏小工具](https://stackoverflow.com/questions/9847391/omap-udc-c-g-hid-c-hid-gadget-on-beagleboard-with-angstrom-linux)

我按照链接中提供的答案进行操作，但使用 Ubuntu 构建它。然而，这是我得到的回应：

```
$ sudo insmod g_hid
insmod: error inserting './g_hid.ko': -1 Invalid module format 
```

有人可以告诉我原因吗？我错了什么？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:55:48.180

看起来好像您已经使用与内核不同的编译器（或者可能是体系结构？）来构建模块。

您应该首先弄清楚如何构建和部署交叉编译的内核。我假设您已经安装了 ARM 交叉编译器和 binutils？Ubuntu 有它们的软件包，或者你可以使用[CodeSourcery G++ Lite](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/)

可以在[此处找到一组相当合理的说明](http://tuxthink.blogspot.co.uk/2010/05/cross-compiling-linux-for-arm.html)

本质上是：

```
export ARCH=arm
export CROSS_COMPILE=arm-none-linux-eabi
make menuconfig
make uImage modules
make install_modules INSTALL_MOD_PATH-<target root filing system> 
```

# php - 针对空值测试日期值

> ID：12255473
> 
> 赞同：1
> 
> 时间：2012-09-04T00:43:32.720
> 
> 标签：php, mysql, date

我喜欢比较日期（从数据库中提取空值（0000-00-00）。我尝试这样做：

```
$dateValue = $row_recordset3['ttDateEnvoiDEP'];

if ($dateValue === '0000-00-00') {                  
    $dateEnvoiDEP = "CURRENT_DATE()";                   
}
else {
    $returnOK .= $dateValue;
    $dateEnvoiDEP = $row_recordset3['ttDateEnvoiDEP'];
} 
```

但它不起作用，你知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:19:21.800

你为什么不直接在你的`SQL`查询中这样做，像这样，

```
SELECT   IF(ttDateEnvoiDEP = '0000-00-00', CURDATE(), ttDateEnvoiDEP) 
             as `ttDateEnvoiDEP`,
FROM     ...
WHERE    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T00:45:32.817

CURRENT_DATE() 是一个 MySQL 函数，而不是 PHP。

读一读： http: [//php.net/date](http://php.net/date)

此外，如果您想以该格式使用当前日期，您可以执行`date('Y-m-d')`这将返回 2012-09-03 或任何日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T01:06:37.893

如果你想用 PHP 处理日期，你可以使用 unix 时间戳。阅读 php[时间](http://php.net/manual/en/function.time.php)和[日期](http://www.php.net/manual/en/function.date.php)以获取更多信息

问题是您的代码是您正在比较 0000-00-00 到 $dateValue.0000-00-00 不为空。不清楚你在这里做什么。但我想你想知道该值是否已设置。所以你可以试试

```
isset($dateValue) 
```

希望这可以帮助你！

编辑：

```
if(!isset($dateValue)){
    $dateEnvoiDEP = time();
}else{
//do other stuff
} 
```

# scala - Scala模式匹配将int与列表进行比较

> ID：12255475
> 
> 赞同：2
> 
> 时间：2012-09-04T00:43:44.157
> 
> 标签：scala, pattern-matching

我正在尝试编写一个递归程序，用于将 int 与列表中的每个值进行比较。问题是我不断收到无法访问的错误，我真的不知道为什么。我的代码是

```
def isIn(x : Int, l : List[Int]) : Boolean = l match {
  case Nil => false
  case x => true
  case h :: t => isIn(x, t)
} 
```

我真的不明白为什么这不起作用。或者我想，我想知道如何将 x 与 head 用例进行比较。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T00:49:56.437

问题是当您使用以小写字符开头的变量时，模式匹配器认为您正在尝试分配给新变量。当然，只是一个可赋值变量的模式将匹配*任何东西*，因此任何后续`case`都将无法访问。

要解决这个问题，您需要使用“稳定标识符”。这可以通过将小写变量放在反引号中来完成：

```
def isIn(x: Int, l: List[Int]): Boolean =
  l match {
    case Nil => false
    case `x` :: t => true
    case h :: t => isIn(x, t)
  } 
```

或重命名变量，使其以大写字符开头：

```
def isIn(X: Int, l: List[Int]): Boolean =
  l match {
    case Nil => false
    case X :: t => true
    case h :: t => isIn(X, t)
  } 
```

请注意，由于 each`case`必须是`List`，因此您需要使用`:: t`after`x`来显示`x`应该匹配`List`.

# git - 为 github 项目做贡献时的代码缩进

> ID：12255477
> 
> 赞同：2
> 
> 时间：2012-09-04T00:43:56.197
> 
> 标签：git, github, vim

我对“为 github 项目做出贡献”还很陌生，但很高兴这样做，我想知道如何在为 github 项目做出贡献时获得类似于现有缩进的缩进。例如，我使用 VIM，并且我有自己的 .vimrc 文件，但是当我 fork 然后克隆一个 ruby​​ 项目来贡献时，我如何使用相同的缩进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:17:52.243

有几个插件可以检查打开文件的缩进并（如有必要）调整缓冲区的缩进设置。我自己的插件叫做[IndentConsistencyCop](http://www.vim.org/scripts/script.php?script_id=1690)；插件页面还包含指向替代品的链接。这在向许多不同项目提交补丁时特别有用，这些项目本身甚至可能没有一致的指导方针。

如果您深入参与一些项目，我推荐一些允许目录本地配置的插件。您只需将您的`:setlocal expandtab tabstop=...`放入`.lvimrc`项目根目录的文件中。我为此推荐[localrc.vim](http://www.vim.org/scripts/script.php?script_id=3393)，因为它还允许特定于文件类型的本地配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T00:54:17.440

许多项目`:help modeline`在文件底部的注释中都有选项。例如，

```
# vim: noet 
```

这些选项将覆盖你的 ~/.vimrc 中的选项。项目维护人员经常将这些放在代码中以保持代码的一致性。有些项目没有这些，但仍然符合一组规则。例如，他们可能使用制表符而不是硬空格。如果您使用硬空间并且正在为使用选项卡的项目做出贡献，那么最好保持一致。您可以通过多种方式完成此操作。一个例子是在你的 vimrc 中为该项目设置一个自动命令，如下所示

```
au BufRead,BufNewFile /path/to/project/** set noet 
```

这样您就不会忘记遵守该项目的意愿。另一种方法是手动设置。您还可以将项目选项卡更改为硬空间，然后将它们更改回来。例如你可以做

```
:retab! 
```

将选项卡更改为您的偏好。然后，当您完成编辑后，您可以将设置更改回他们的偏好并执行另一个操作：

```
:set noet
:retab! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T04:32:45.317

您可以使用涂抹和清洁过滤器（请参阅[Pro-Git 手册的这一部分](http://git-scm.com/book/en/Customizing-Git-Git-Attributes#Keyword-Expansion)），并让过滤器执行任何必要的操作来更改用于缩进的制表符或空格。这样你就可以使用任何你喜欢的东西，然后在提交时将其转换为上游版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T00:46:39.470

我在我的 .vimrc 文件中使用它：

```
set softtabstop=2
set shiftwidth=2 
```

这会更改缩进设置。

如果您不想更改全局 vim 设置，则可能需要使用扩展名，例如。[http://www.vim.org/scripts/script.php?script_id=1408](http://www.vim.org/scripts/script.php?script_id=1408)

# objective-c - 隐藏的导航栏导致操作表出现问题

> ID：12255482
> 
> 赞同：0
> 
> 时间：2012-09-04T00:44:25.517
> 
> 标签：objective-c, ios, uinavigationcontroller, uinavigationbar, uiactionsheet

![在此处输入图像描述](../Images/0d531d3780e970dd24135bfd798e2973.png)

我的 uinavigationbarcontroller 中的导航栏是隐藏的，但我的操作表认为它仍然存在，因此在操作页面的顶部给了我一个突出显示（见上图）。我怎样才能删除这个/欺骗我的操作表认为它是一个正常的 uiimageview？

在 didLoad 中隐藏的导航栏：

```
[self.navigationController setNavigationBarHidden:YES animated:NO]; 
```

和：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if (![self.navigationController isNavigationBarHidden])
    {
        [self.navigationController setNavigationBarHidden:YES animated:animated];
    }
} 
```

在 didLoad 中的 actionsheet 如下所示：

```
actionSheet = [[UIActionSheet alloc] initWithTitle:@"" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 200,320,16)];
[pickerToolbar sizeToFit];
    pickerToolbar.barStyle = UIBarStyleBlackTranslucent;

NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonSystemItemCancel target:self action:@selector(cancel_clicked:)];
    [barItems addObject:cancelBtn];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    [barItems addObject:flexSpace];

UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(done_clicked:)];

    [barItems addObject:doneBtn];
    [pickerToolbar setItems:barItems animated:YES];
    [actionSheet addSubview:pickerToolbar];

UIPickerView *locationPicker = [[UIPickerView alloc] init];
locationPicker.frame = CGRectMake(0, 244, 320, 216);
locationPicker.delegate  = self;
locationPicker.dataSource = self;
locationPicker.showsSelectionIndicator = YES;
locationPicker.tag = 1;
[actionSheet addSubview:locationPicker]; 
```

然后它在文本字段触摸上动画。

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    if (textField == locationTextField.self)
    {
        [actionSheet showInView:self.view];
        [actionSheet setFrame:CGRectMake(0, 0, 320, 480)];
        [nameField resignFirstResponder];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:49:34.800

我相信问题在于您选择显示操作表的视图。尝试在您的应用程序的主窗口中显示它。

# c# - C#中合并两个List，将相同id的对象合并为一个列表项

> ID：12255487
> 
> 赞同：7
> 
> 时间：2012-09-04T00:45:27.467
> 
> 标签：c#, .net, linq, list

我已经考虑过如何通过推出自己的解决方案来解决这个问题，但我想知道 .NET 是否已经具备我想要实现的功能 - 如果是这样，我宁愿使用内置的东西.

假设我有一个`Widget`对象的两个实例，我们称它们为`PartA`and `PartB`。每个人的信息都是从两个不同的 Web 服务中获取的，但两者都有匹配的 ID。

```
PartA
{
    ID: 19,
    name: "Percy",
    taste: "",
    colour: "Blue",
    shape: "",
    same_same: "but different"
}

PartB
{
    ID: 19,
    name: "",
    taste: "Sweet",
    colour: "",
    shape: "Hexagon",
    same_same: "but not the same"
} 
```

我想合并这些以创建以下内容：

```
Result
{
    ID: 19,
    name: "Percy",
    taste: "Sweet",
    colour: "Blue",
    shape: "Hexagon",
    same_same: "but different"
} 
```

注意`same_same`每个之间的值是如何不同的，但我们认为 PartA 为主，所以结果保留了 value `but different`。

现在让事情复杂化：

假设我们有两个列表：

```
List<Widget> PartA = getPartA();
List<Widget> PartB = getPartB(); 
```

现在这里有一些伪代码描述我想要做什么：

```
List<Widget> Result = PartA.MergeWith(PartB).MergeObjectsOn(Widget.ID).toList(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T01:02:33.743

您可以编写自己的扩展方法，如下所示：

```
static class Extensions
{
    public static IEnumerable<T> MergeWith<T>(this IEnumerable<T> source, IEnumerable<T> other) where T : ICanMerge
    {
        var otherItems = other.ToDictionary(x => x.Key);
        foreach (var item in source)
        {
            yield return (T)item.MergeWith(otherItems[item.Key]);
        }
    }
    public static string AsNullIfEmpty(this string s)
    {
        if (string.IsNullOrEmpty(s))
            return null;
        else
            return s;
    }
} 
```

哪里`ICanMerge`像：

```
public interface ICanMerge
{
    object Key { get; }
    ICanMerge MergeWith(ICanMerge other);
} 
```

实施例如：

```
public class Widget : ICanMerge
{
    object ICanMerge.Key { get { return this.ID; } }
    int ID {get;set;}
    string taste {get;set;}
    public ICanMerge MergeWith(ICanMerge other)
    {
        var merged = new Widget();
        var otherWidget = (Widget)other;
        merged.taste = this.taste.AsNullIfEmpty() ?? otherWidget.taste;
        //...
        return merged;
    }
} 
```

然后就很简单了`PartA.MergeWith(PartB).ToList()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T02:00:42.760

如果您的列表是一对一的（即相同数量的项目，并且 PartA 列表中的每个项目在 PartB 列表中都有匹配项），那么我会考虑使用[Zip](http://msdn.microsoft.com/en-us/library/dd267698.aspx)扩展方法。请注意，Zip 实际上并不要求每个列表具有相同数量的项目。但是，如果您不能依赖“配对”具有匹配 ID 的项目，那么我的简单方法将行不通。

你可以这样做：

```
var alist = GetPartAWidgets().OrderBy(w => w.ID);
var blist = GetPartBWidgets().OrderBy(w => w.ID);
var merged = alist.Zip(blist, (a,b) => new Widget()
             {
               ID = a.ID,
               Name = string.IsNullOrEmpty(a.Name) ? b.Name : a.Name,
               //etc. 
             }); 
```

如果您希望您的 linq 看起来更干净，您可以将单个 Widget 合并逻辑封装在一个函数或扩展方法中，并使用它而不是内联委托。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T23:32:07.230

```
 public interface IMerge<out T>
{
    IEnumerable<IMergeMatched<T>> Matched();

    IEnumerable<IMergeMatched<T>> Matched(Func<T, T, bool> predicate);

    IEnumerable<T> NotMatchedBySource();

    IEnumerable<T> NotMatchedBySource(Func<T, bool> predicate);

    IEnumerable<T> NotMatchedByTarget();

    IEnumerable<T> NotMatchedByTarget(Func<T, bool> predicate);
}

public interface IMergeMatched<out T>
{
    T Source { get; }

    T Target { get; }
}

public static class Enumerable
{
    public static IMerge<TSource> Merge<TSource>(this IEnumerable<TSource> source, IEnumerable<TSource> target,
                                             Func<TSource, TSource, bool> predicate)
    {
        return new Merge<TSource>(source, target, predicate);
    }
}

public class Merge<T> : IMerge<T>
{
    private readonly Func<T, T, bool> _predicate;
    private readonly IEnumerable<T> _source;
    private readonly IEnumerable<T> _target;
    private IEnumerable<IMergeMatched<T>> _matcheds;
    private IEnumerable<T> _notMatchedBySource;
    private IEnumerable<T> _notMatchedByTarget;

    public Merge(IEnumerable<T> source, IEnumerable<T> taget, Func<T, T, bool> predicate)
    {
        _source = source;
        _target = taget;
        _predicate = predicate;
    }

    public IEnumerable<IMergeMatched<T>> Matched()
    {
        if (_matcheds == null)
        {
            Analize();
        }
        return _matcheds;
    }

    public IEnumerable<IMergeMatched<T>> Matched(Func<T, T, bool> predicate)
    {
        return Matched()
            .Where(t => predicate.Invoke(t.Source, t.Target))
            .ToArray();
    }

    public IEnumerable<T> NotMatchedBySource()
    {
        if (_notMatchedBySource == null)
        {
            Analize();
        }
        return _notMatchedBySource;
    }

    public IEnumerable<T> NotMatchedBySource(Func<T, bool> predicate)
    {
        return NotMatchedBySource()
            .Where(predicate)
            .ToArray();
    }

    public IEnumerable<T> NotMatchedByTarget()
    {
        if (_notMatchedByTarget == null)
        {
            Analize();
        }
        return _notMatchedByTarget;
    }

    public IEnumerable<T> NotMatchedByTarget(Func<T, bool> predicate)
    {
        return NotMatchedByTarget()
            .Where(predicate)
            .ToArray();
    }

    private void Analize()
    {
        var macheds = new List<MergeMached<T>>();
        var notMachedBySource = new List<T>(_source);
        var notMachedByTarget = new List<T>(_target);

        foreach (var source in _source)
        {
            foreach (var target in _target)
            {
                var macth = _predicate.Invoke(source, target);
                if (!macth) continue;

                macheds.Add(new MergeMached<T>(source, target));
                notMachedBySource.Remove(source);
                notMachedByTarget.Remove(target);
            }
        }

        _matcheds = macheds.ToArray();
        _notMatchedBySource = notMachedBySource.ToArray();
        _notMatchedByTarget = notMachedByTarget.ToArray();
    }
}

public class MergeMached<T> : IMergeMatched<T>
{
    public MergeMached(T source, T target)
    {
        Source = source;
        Target = target;
    }

    public T Source { get; private set; }

    public T Target { get; private set; }
} 
```

如何使用？

```
var source = new List<MediaFolder>
            {
                new MediaFolder
                    {
                        Id = "Id1",
                        Name = "Name1",
                        Path = "Path1"
                    },
                new MediaFolder
                    {
                        Id = "Id2",
                        Name = "Name2",
                        Path = "Path2"
                    },
                new MediaFolder
                    {
                        Id = "Id3",
                        Name = "Name3",
                        Path = "Path3"
                    },
                new MediaFolder
                    {
                        Id = "Id4",
                        Name = "Name4",
                        Path = "Path4"
                    },
                new MediaFolder
                    {
                        Id = "Id5",
                        Name = "Name5",
                        Path = "Path5"
                    },
                new MediaFolder
                    {
                        Id = "Id6",
                        Name = "Name6",
                        Path = "Path6"
                    }
            };

        var target = new List<MediaFolder>
            {
                new MediaFolder
                    {
                        Id = "Id1",
                        Name = "Actualizado en el objeto",
                        Path = "Path1"
                    },
                    //Id2 eliminado
                new MediaFolder
                    {
                        Id = "Id3",
                        Name = "Name3",
                        Path = "Actualizado tambien"
                    },
                new MediaFolder
                    {
                        Id = "Id4",
                        Name = "Name4",
                        Path = "Path4"
                    },
                new MediaFolder
                    {
                        Id = "Id5",
                        Name = "Name5",
                        Path = "Path5"
                    },
                new MediaFolder
                    {
                        Id = "Id6",
                        Name = "Name6",
                        Path = "Path6"
                    },
                     new MediaFolder
                    {
                        Id = "Id7",
                        Name = "Nuevo Item 7",
                        Path = "Nuevo Item 7"
                    }
            };

        var merge = source.Merge(target, (x, y) => x.Id == y.Id);

        var toUpdate = merge.Matched((x, y) => x.Name != y.Name | x.Path != y.Path)
            .ToArray();

        var toDelete = merge.NotMatchedBySource();
        var toInsert = merge.NotMatchedByTarget();

        Assert.AreEqual(2, toUpdate.Count());
        Assert.IsTrue(toUpdate.Count(x => x.Source.Id == "Id1" & x.Target.Id == "Id1") > 0);
        Assert.IsTrue(toUpdate.Count(x => x.Source.Id == "Id3" & x.Target.Id == "Id3") > 0);

        Assert.AreEqual("Id7", toInsert.First().Id);
        Assert.AreEqual("Id2", toDelete.First().Id); 
```

# c# - 从 ipv6 地址获取主机名

> ID：12255492
> 
> 赞同：1
> 
> 时间：2012-09-04T00:45:40.507
> 
> 标签：c#, ipv6, net.tcp

我需要在我的 wcf 程序中确定调用计算机的主机名。以下代码仅在我提供 ipv4 地址时才有效：

```
 System.Net.IPAddress[] addresses = System.Net.Dns.GetHostAddresses("fe80::5423:9721:ff08:a07e");

  System.Net.IPHostEntry entry = System.Net.Dns.GetHostEntry(addresses[0]); //"192.168.0.107"); //fe80::5423:9721:ff08:a07e");
  string hostName = entry.HostName; 
```

调用计算机是 Win8 RTM 机器，仅提供 ipv6 地址，因此我的 wcf 程序中的以下代码因未知主机错误而失败：

```
OperationContext context = OperationContext.Current;
MessageProperties prop = context.IncomingMessageProperties;
RemoteEndpointMessageProperty endpoint =
    prop[RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty;
ipAddress = endpoint.Address;

System.Net.IPHostEntry entry = System.Net.Dns.GetHostByAddress(ipAddress);
hostName = entry.HostName;
aliases = entry.Aliases.ToList<string>(); 
```

上面的代码包括一些尝试的解决方法:-)

我到处搜索都没有运气 - 有什么想法吗？

# linker - C++ 中的符号——它们是在非调试版本中导出的吗？

> ID：12255493
> 
> 赞同：1
> 
> 时间：2012-09-04T00:45:50.960
> 
> 标签：linker, export, name-mangling

C++ 会破坏符号名称。然后可以在调试时使用这些名称——但前提是没有剥离二进制文件。其他使用场景是共享库——符号名称可以导出并在库中可见。

但在两者中：

一种。剥离构建，

湾。和正常的非共享库构建

二进制文件中应该没有可用的符号？例如，字符串工具不会输出任何符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:49:44.980

该命令从映像`strip`中删除*调试符号。*在共享对象中导出的符号不是调试符号，不会被`strip`. 这些符号可用于定位函数/数据，但它们不会将代码与源相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:09:34.543

> 一种。剥离构建
> 
> 湾。非共享库构建

目前尚不清楚您是在询问满足 A) 和 B) 的构建，还是分别满足 A) 和 B) 场景的构建。

对于两者 - 非共享，剥离构建 - 是的，符号应该全部消失。

仅适用于 A)，否：如果您使用的是共享库，则符号将（默认情况下）从中导出，并且`strip`不会删除它们。如果您正在使用`ELF`，则可以使用 eg`__attribute__((visibility("hidden")))`或等效机制限制符号可见性。

对于 B)——非剥离、非共享构建，符号通常会出现在符号表中，因此`strings`会显示它们。要摆脱它们，请使用`strip`（将其变为 A）和 B）组合）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T03:15:34.697

在不是共享库的剥离构建 (a) 中，没有可用的符号。

在“正常”构建（既不调试也不剥离）（b）中，函数名称的符号被保留，但所有其他调试符号都没有。在调试器中，您将能够使用函数名称捕获堆栈跟踪，但不能检查它们的参数或打印堆栈变量的值。

# c# - 如何使用 iTextSharp 从 PDF 中提取“标记为编辑”的文本？

> ID：12255508
> 
> 赞同：0
> 
> 时间：2012-09-04T00:48:33.253
> 
> 标签：c#, .net, itextsharp, itext, redaction

这是[这个问题的后续](https://stackoverflow.com/questions/12107565/extracting-text-marked-for-redaction-in-a-pdf-document-using-net)

我们想出了如何使用下面的代码提取标记为编辑的文本。

但是，除了标记为编辑的文本之外，还会捕获其他前导和尾随字符。

例如，如果在源 PDF 文档中将句子标记为编辑，则下面的代码还会捕获前一个句子的最后几个字符和下一个句子的前几个字符。

有人能在下面的代码中看到问题吗？

```
 for (int i = 1; i <= rdr.NumberOfPages; i++)
                {
                    // Get pages and corresponding annotations

                    PdfDictionary dict = rdr.GetPageN(i);
                    PdfArray annots = dict.GetAsArray(PdfName.ANNOTS);

                    foreach (var annItem in annots.ArrayList)
                    {
                        PdfDictionary d = PdfReader.GetPdfObject(annItem) as PdfDictionary;
                        PdfName typ = d.GetAsName(PdfName.SUBTYPE);
                        if (typ.ToString().StartsWith("/Redact"))
                        {
                            sb = new StringBuilder();
                            PdfObject o1 = d.Get(PdfName.QUADPOINTS);
                            PdfArray arr2 = o1 as PdfArray;
                            int numLines = arr2.ArrayList.Count / 8;
                            for (int k = 0; k < numLines; k++)
                            {
                                llx = float.Parse(arr2[(0 + k * 8)].ToString());
                                lly = float.Parse(arr2[(1 + k * 8)].ToString());
                                urx = float.Parse(arr2[(6 + k * 8)].ToString());
                                ury = float.Parse(arr2[(7 + k * 8)].ToString());

                                Rectangle rect = new Rectangle(llx, lly, urx, ury, 1);

                                List<RenderFilter> filters = new List<RenderFilter>();
                                filters.Add(new RegionTextRenderFilter(rect));
                                strategy = new FilteredTextRenderListener(new LocationTextExtractionStrategy(),
                                    filters.ToArray<RenderFilter>());
                                // We get the text but get extra leading/trailing chars that are not in redaction.
                                sb.Append(PdfTextExtractor.GetTextFromPage(rdr, i, strategy));
                            }
                            Console.WriteLine("Page: " + i.ToString());
                            Console.WriteLine(sb.ToString() + Environment.NewLine);
                            sb.Clear();

                       }
                    }
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:36:09.143

为了完整起见，这个问题在 iText 邮件列表中得到了回答：http: [//thread.gmane.org/gmane.comp.java.lib.itext.general/62918](http://thread.gmane.org/gmane.comp.java.lib.itext.general/62918)

# android - 如何让 Android 按钮图形更改立即显示？

> ID：12255512
> 
> 赞同：0
> 
> 时间：2012-09-04T00:49:12.940
> 
> 标签：android, button, graphics, background

我试图让一个按钮在发生特定事件时淡出，但是对按钮的更改不是即时的，而是等待对按钮执行的所有操作完成。是否有任何（希望是简单的）显示方式发生时对用户的更改？

代码：

```
featuredimage.setBackgroundDrawable(getResources().getDrawable(R.drawable.featuredimage_cc_movement1));
            for (int alpha = 0; alpha < 255; alpha+=10) {
                //Thread.sleep(1);
                featuredimage.setAlpha(alpha);
                featuredinfo.setAlpha(alpha);
            }

            featuredinfo.setText(Html.fromHtml("<center><big><b>FEATURED " + catagory + "</b></big></center><br>" 
                    + getFeatured().getMediumString()));
            featuredimage.setBackgroundDrawable(getResources().getDrawable(R.drawable.featuredimage_gradient));

            for (int alpha = 255; alpha > 0; alpha--) {
                //Thread.sleep(1);
                featuredimage.setAlpha(alpha);
                featuredinfo.setAlpha(alpha);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:01:54.620

为什么不使用选择器和按钮状态？如果事件发生只需简单地将特定状态分配给按钮。处于此特定状态的按钮将具有不同的图像背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:11:59.917

最好的解决方案是使用此处找到的 AsyncTask [。](http://developer.android.com/reference/android/os/AsyncTask.html)

# java - 打印以下部分有哪些更好的方法？

> ID：12255515
> 
> 赞同：0
> 
> 时间：2012-09-04T00:49:18.420
> 
> 标签：java

打印以下部分有哪些更好的方法？我认为它以某种带有标题的表格格式看起来会更好。我想我想将它们调整为固定长度。这是我想格式化以使其看起来更好的代码片段。打印元素是 sql 数据库中的元素。

```
 System.out.println("\nAll records in your table:");
 System.out.println("ID#     Name           GPA  Status Mentor Level Thesis Advisor  Company"); //table heading...
 while (rs.next()) {
     String output = " ";
     output += rs.getString("studentID") + "    "
         + rs.getString("firstName") + " "
         + rs.getString("lastName") + " "
         + rs.getString("gpa") + "    "
         + rs.getString("status") + "   "
         + rs.getString("mentor") + " "
         + rs.getString("level") + " "
         + rs.getString("thesisTitle") + " "
         + rs.getString("thesisAdvisor") + " "
         + rs.getString("company") + "\n";
     System.out.printf("%s", output);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T01:37:23.540

|可以| |做点什么| |像这样|

|学生姓名| |名字| |中间名| |.......|

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T02:32:23.703

“我想将它们调整为固定长度”：
这就是为什么你连接不同长度的空格？
您可以尝试连接“\t\t”。
如果它是 HTML，使用**[HTML Table](http://www.w3.org/TR/html4/struct/tables.html)**将为您处理它。

# jquery - jQuery奇怪的行为

> ID：12255517
> 
> 赞同：0
> 
> 时间：2012-09-04T00:49:37.360
> 
> 标签：jquery, radio-button, closures

这是我要完成的工作：在以下`mappings2`对象中，键是一些分组单选按钮的名称属性，值是一个列表，其中第一个字符串是一个附加到收音机的类（可能不止一个）在该组中，我们将此单选按钮称为特殊单选，第二个字符串是一个类，其元素必须在单击特殊单选时启用，下面的代码应该在一组单选的更改事件之间切换，让单击特殊无线电时执行一些代码，单击该组中的其他非特殊无线电时执行不同的代码。

```
var mappings2 = {
        // Group's name            special-radio's class      other radios       
        'DependientesEconomicos': ['hijos-dependientes', 'cuantos-hijos'],
        'Preparatoria': ['otra-prepa', 'nombre-prepa'],
        'ReproboAlgunaMateria': ['reprobo', 'causas-reprobo']
        //'CausasReprobo': ['otra-causa-reprobo', 'otra-causa-reprobo-text']
    };

(function (maps) {
        for (grupo in maps) {
            $('input[name="' + grupo + '"]').change(function (e) {
                if ($(this).attr('class') === maps[grupo][0]) {
                    console.log(grupo + ' ' + $(this).attr('class') + ' true');
                    $('.' + maps[grupo][1]).attr('disabled', false);
                } else {
                    $('.' + maps[grupo][1]).attr('disabled', true);
                    console.log(grupo + ' ' + $(this).attr('class'));
                    $('.' + maps[grupo][1]).val('');
                }
            });
        }
    })(mappings2); 
```

该代码适用于一个条目，`mappings2`但是当您添加更多时，只有最后一个条目有效，如果您单击以前组中的一个收音机，日志会显示正确的类，但`grupo`不是它所属的组，它会显示最后一个条目的组，所以这是所有错误的来源，我的问题是为什么。

jQuery 1.5.1

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T02:43:45.983

### 有什么问题？

问题是由闭包的工作方式引起的。您所有的“更改”函数都引用同一个`grupo`变量，因此无论其最终值是什么，都将是**所有**回调引用的值。

这是此处描述的相同问题/问题（并且具有相同的解决方案）：
[JavaScript 闭包内循环 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

### 详细解释：

这是一个显示相同问题的简化示例：http:
[//jsfiddle.net/Sly_cardinal/PM2Gf/6/](http://jsfiddle.net/Sly_cardinal/PM2Gf/6/)

HTML：

```
<div class="wrong" style="border: 1px solid red">
    <p>Incorrect: Clicking any item will show the last value of 'i'. i.e. class='11'</p>
    <div class="1">a</div>
    <div class="2">b</div>
    <div class="3">c</div>
    <div class="4">d</div>
    <div class="5">e</div>
    <!-- snip 5 other elements. -->
    <p class="result"></p>
</div> 
```

Javascript：

```
// Setup click handlers for the 'incorrect' divs.
for (var i = 1; i <= 10; i++){
    $(".wrong ."+i).click(function(){
        var t = $(this).text();

        // This doesn't work because all of the handlers reference the same 'i' variable.
        // When the loop finishes 'i == 11' so when you click on any of the divs they output the current value of 'i' which is eleven.
        $(".wrong .result").text("You clicked div: class='"+i+"' content='"+t+"'");
    });
} 
```

当您单击其中一个 div 时，我们希望它打印出它在列表中的位置。因此，如果您单击“e”，我们希望它说我们单击了带有 的元素`class='5'`。

但这不会发生 - 您错误地单击的每一个项目都说它是`class='11'`。

发生这种情况的原因是因为所有更改函数都引用了相同的`i`变量（就像您的“组”变量一样）。因此，当循环最终完成时`i`，值为 11。因此，所有 div 打印出的值为`i`11。

* * *

### 如何修复它：

这显示了如何更改创建事件处理程序以修复错误的方式：http:
[//jsfiddle.net/Sly_cardinal/mr6ju/2/](http://jsfiddle.net/Sly_cardinal/mr6ju/2/)

更新的javascript：

```
// Setup click handlers for the 'correct' divs.
for (var i = 1; i <= 10; i++){

    // 1\. Create an anonymous self-invoking function that
    // returns a function.
    var callback = (function(){

        // 2\. Copy the current value of 'i' to a new variable so
        // that changes to 'i' cannot affect us.
        var currentI = i;

        // 3\. Return the function definition that
        // will be bound to the event listener.
        return function(e){
            var t = $(this).text();

            // 4\. NOTE that we reference 'currentI' and not 'i' here.
            $(".result").text("You clicked div: class='"+currentI+"' content='"+t+"'");
        };
    }());

    $("."+i).click(callback);
}​ 
```

为了解决这个问题，我们必须创建一个额外的内部函数来设置一个具有当前值的新闭包`i`。这个内部函数将 的值复制`i`到一个名为的新变量中，并返回一个引用而不是 的`currentI`新函数。`currentI``i`

通过将值复制到一个新变量（仅存在于内部函数内部），我们可以防止更改`i`影响任何其他变量。

从这些示例中，您应该能够调整您的代码以创建一个新的嵌套函数，该函数将 的值复制`grupo`到一个新变量并返回一个您指定为事件侦听器的新函数。

# android - Google 的智能更新技术是如何工作的？

> ID：12255528
> 
> 赞同：5
> 
> 时间：2012-09-04T00:51:38.350
> 
> 标签：android, diff, updates, delta

我知道基础知识：他们计算两个版本之间的差异并将其发送到部署它的用户设备。确切地说，我对2个问题感兴趣：

1.  对服务器软件进行了哪些更改，对 Android Google Play Store 应用程序进行了哪些更改？
2.  使用什么算法来计算两个应用程序版本之间的差异？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T02:30:19.627

好的，他们似乎使用 GDIFF 算法来计算流之间的差异。有关 GDIFF 算法和 GDIFF 格式的更多信息，请访问：http: [//www.w3.org/TR/NOTE-gdiff-19970901，http](http://www.w3.org/TR/NOTE-gdiff-19970901) : [//gdiff.codeplex.com/](http://gdiff.codeplex.com/)。

# java - java - 如何在不使用java中的标签名称的情况下提取xml标签值？

> ID：12255529
> 
> 赞同：0
> 
> 时间：2012-09-04T00:51:46.967
> 
> 标签：java, xml, tags, extract

我正在使用 java。我有一个如下所示的 xml 文件：

```
<?xml version="1.0"?>
      <personaldetails>
          <phno>1553294232</phno>
          <email>
                <official>xya@gmail.com</official>
                <personal>bk@yahoo.com</personal>
          </email>
      </personaldetails> 
```

现在，我需要使用特定条件检查每个标签值的类型，并将它们放在单独的文件中。

例如，在上面的文件中，我写了 10 位等于电话号码的条件，xxx@yy.com 格式的东西是电子邮件..

所以，我需要做的是我需要提取每个标签中的标签值，如果它匹配某个条件，则将其放入第一个文本文件中，如果不在第二个文本文件中。在这种情况下，第一个文本文件将包含：

```
1553294232
xya@gmail.com
bk@yahoo.com 
```

以及第二个文件中的其余值。

我只是不知道如何在不使用标签名称的情况下提取标签值。（或不使用 GetElementsByTagName）。我的意思是这段代码应该提取电子邮件 bk@yahoo.com 即使我给出 <`mailing>`而不是`<personal>`标签。它不应该依赖于标签名称。

希望我不会感到困惑。我是使用 xml 的 Java 新手。所以，如果我的问题很愚蠢，请原谅我。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T00:55:47.117

似乎是[XPath的典型用例](http://en.wikipedia.org/wiki/XPath)

XPath 允许您以非常灵活的方式查询 XML。

本教程可以帮助：

[http://www.javabeat.net/2009/03/how-to-query-xml-using-xpath/](http://www.javabeat.net/2009/03/how-to-query-xml-using-xpath/)

如果您使用的是 Java*脚本*，可能是这种情况，因为您提到 getElementsByTagName()，您可以只使用 JQuery 选择器，它将为您提供跨浏览器的一致行为，并且 JQuery 库对许多其他事情很有用，如果您还没有使用它... [http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

例如，以下是有关此的信息：

[http://www.switchonthecode.com/tutorials/xml-parsing-with-jquery](http://www.switchonthecode.com/tutorials/xml-parsing-with-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T01:39:47.610

由于您不知道自己的`element`名字，我建议您创建一`DOM`棵树并遍历它。当您获得 a 时`element`，您会尝试将其与您的`ruleset`（*我建议`regex`用于此目的*）匹配，然后将其写入您的 a 文件。

这将是一个帮助您入门的示例结构，但您需要根据您的要求对其进行修改：

```
public void parseXML(){
    try{
        DocumentBuilder documentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        Document doc; 

        doc = documentBuilder.parse(new File("test.xml"));
        getData(null, doc.getDocumentElement());
    }catch(Exception exe){
        exe.printStackTrace();
    }
}

private void getData(Node parentNode, Node node){

    switch(node.getNodeType()){
        case Node.ELEMENT_NODE:{

            if(node.hasChildNodes()){
                NodeList list = node.getChildNodes();
                int size = list.getLength();

                for(int index = 0; index < size; index++){
                    getData(node, list.item(index));
                }
            }

            break;
        }

        case Node.TEXT_NODE:{
            String data = node.getNodeValue();

            if(data.trim().length() > 0){
                /*
                 * Here you need to check the data against your ruleset and perform your operation
                 */
                System.out.println(parentNode.getNodeName()+" :: "+node.getNodeValue());
            }
            break;
        }

    }
} 
```

您可能想查看[`Chain of Responsibility`](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)设计模式来设计您的规则集。

# python - 给定主键名称变量和 pk 值，如何获取对象？

> ID：12255532
> 
> 赞同：0
> 
> 时间：2012-09-04T00:52:13.857
> 
> 标签：python, django, django-models

如果我有一个主键名称的变量，我如何获得一个给定该变量和主键值的对象？

例如

```
pk_name = 'username'
pk = 'bob'

class_name.objects.get(pk_name=pk)  # this obviously doesn't work because it looks for a field called pk_name 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T00:58:03.917

您可以使用[主键快捷方式](https://docs.djangoproject.com/en/dev/topics/db/queries/#the-pk-lookup-shortcut)通过其主键获取对象：

```
class_name.objects.get(pk=pk) 
```

一般来说，如果字段名称是变量，您可以使用字典来提供关键字参数。

```
class_name.objects.get(**{field_name: 'field_value'}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T01:03:22.590

```
d = {"username":"bob"}
class_name.objects.get(**d) 
```

也许？

# ruby-on-rails - Ruby on Rails SaaS 应用程序从哪里开始，使用什么工具

> ID：12255536
> 
> 赞同：2
> 
> 时间：2012-09-04T00:53:12.827
> 
> 标签：ruby-on-rails, ruby, saas

我在我的应用程序中，我想使用 ruby​​ on rails 将 saas 解决方案集成到我的应用程序中。到目前为止，一切都很好，除了我不确定从哪里开始。

**我的点子：**

我会创建一个**subscription.rb**和**plan.rb**模型。一个用户属于**订阅**，订阅将有很多用户。下一个订阅将有许多**计划**，并且计划将属于订阅。然后，我会为每个计划添加**角色**，以限制应用程序某些部分的用户可能使用 cancan。设置完所有内容后，我会将 Stripe 集成到我的应用程序中以处理付款方面的事情。

以上是我正在考虑的设置方式。这可能确实是一个错误的概念，但这就是我写它的原因，这样你就可以理解我在想什么。我知道我可以使用第三方服务，如 recurly、chargify 等，但我正在睁开眼睛看看是否可以使用类似的方法来完成。

1.  在创建 SaaS 应用程序时，您使用或更喜欢使用哪些技术？

2.  我的方法错了吗？如果是这样，有什么更好的方法来解决这个问题？

3.  有关创建 saas 应用程序的任何提示或建议，例如技术、ruby on rails 工具等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T23:40:04.337

[查看RailsApps](http://railsapps.github.com/)项目中**[Rails Membership/Subscription/SaaS Site](http://railsapps.github.com/rails-stripe-membership-saas/)**的开源示例应用程序。它附带一个教程，详细解释了实现。这是它使用的库：

*   认证设计
*   CanCan 授权
*   用于定期计费的条带
*   用于前端 CSS 的 Twitter Bootstrap

使用 Stripe 进行计费使实施变得容易并降低了安全风险，因为 Stripe 会处理所有自动重复计费。

RailsApps 示例将 CanCan 与 Rolify 放在一起，并使用与订阅计划对应的角色来管理用户访问。它展示了如何简化架构，因此不需要复杂的 subscription.rb 或 plan.rb 模型（尽管您可以根据需要对其进行重构）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T01:10:32.667

1) 我使用 MongoDB 作为数据库后端以获得灵活性，使用 RSpec 作为 TDD、HAML/SASS 和 RailsAdmin 作为快速管理仪表板。

2) 这不一定是错误的，但取决于您计划允许用户执行的操作。

3) 等等，您是否已经开发了您的工具，或者您是否要求我们规划您的工具。另外，您打算构建什么样的 Saas 应用程序？

# python - 更正扩展模块中的循环垃圾收集

> ID：12255537
> 
> 赞同：6
> 
> 时间：2012-09-04T00:53:14.250
> 
> 标签：python, c, garbage-collection, python-c-api, python-extensions

Python 2.7 文档的两个部分提到为扩展模块中定义的容器对象添加*循环垃圾收集*(CGC) 支持。

Python/C API参考[手册](http://docs.python.org/c-api/gcsupport.html?highlight=pyobject_gc_newvar)给出了两条规则，即，

> 1.  必须使用`PyObject_GC_New()`或分配对象的内存`PyObject_GC_NewVar()`。
> 2.  一旦所有可能包含对其他容器的引用的字段都被初始化，它必须调用`PyObject_GC_Track()`.

而在[Extending and Embedding the Python Interpreter](http://docs.python.org/extending/newtypes.html?highlight=noddy_traverse#supporting-cyclic-garbage-collection)中，`Noddy`例如，添加`Py_TPFLAGS_HAVE_GC`标志和填充`tp_traverse`和`tp_clear`插槽似乎足以启用 CGC 支持。上面的两条规则根本没有被实践过。

当我修改`Noddy`示例以实际遵循`PyObject_GC_New()`/`PyObject_GC_Del()`和`PyObject_Track()`/的规则时`PyObject_GC_UnTrack()`，它出人意料地提出了断言错误说，

> Modules/gcmodule.c:348: visit_decref: 断言“gc->gc.gc_refs != 0”失败。引用计数太小

这导致我对实施 CGC 的正确/安全方式感到困惑。任何人都可以提供建议，或者最好是一个具有 CGC 支持的容器对象的*简洁示例吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:41:27.910

我本人在 C API 方面经验不足，无法给您任何建议，但 Python 容器实现本身有很多*示例*。

就个人而言，我会先从元组实现开始，因为它是不可变的：[Objects/tupleobject.c](http://hg.python.org/cpython/file/tip/Objects/tupleobject.c)。然后转到`dict`,`list`和`set`implementations 以获取有关可变容器的进一步说明：

*   [对象/dictobject.c](http://hg.python.org/cpython/file/tip/Objects/dictobject.c)
*   [对象/listobject.c](http://hg.python.org/cpython/file/tip/Objects/listobject.c)
*   [对象/setobject.c](http://hg.python.org/cpython/file/tip/Objects/setobject.c)

我不禁注意到有对`PyObject_GC_New()`,`PyObject_GC_NewVar()`和`PyObject_GC_Track()`自始至终的调用，以及`Py_TPFLAGS_HAVE_GC`设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-11T08:19:19.313

在大多数正常情况下，您不需要自己进行跟踪/取消跟踪。这在文档中有所描述，但并未明确说明。在[`Noddy`示例](https://docs.python.org/3/extending/newtypes.html)的情况下，您绝对不会。

简短的版本是 TypeObject 包含两个函数指针：`tp_alloc`和`tp_free`. 默认情况下`tp_alloc`，在创建类时调用所有正确的函数（如果`Py_TPFLAGS_HAVE_GC`已设置）并`tp_free`在销毁时取消跟踪类。

[Noddy 文档说](https://docs.python.org/3/extending/newtypes.html#supporting-cyclic-garbage-collection)（在本节末尾）：

> 差不多就是这样。如果我们编写了自定义`tp_alloc`或`tp_free`插槽，我们需要修改它们以进行循环垃圾收集。大多数扩展将使用自动提供的版本。

不幸的是，没有明确表明您不需要自己执行此操作的地方是[支持循环垃圾收集文档](https://docs.python.org/3/c-api/gcsupport.html)。

* * *

**细节：**

`Noddy_new`Noddy 是使用名为put的函数分配`tp_new`的`TypeObject`。根据[文档](https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_new)，“新”功能应该做的主要事情是调用[`tp_alloc`slot](https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_alloc)。你通常不`tp_alloc`自己写，它只是默认为`PyType_GenericAlloc()`.

查看[`PyType_GenericAlloc()`Python 源代码](https://github.com/python/cpython/blob/a4f15bc3d0bdba6474d73ee0dbd2ccd2c34d6bd5/Objects/typeobject.c#L929)显示了它基于`PyType_IS_GC(type)`. 首先它调用`_PyObject_GC_Malloc`而不是`PyObject_Malloc`，其次它调用`_PyObject_GC_TRACK(obj)`。[请注意，`PyObject_New`真正做的只是调用`PyObject_Malloc`然后`tp_init`。]

同样，在解除分配时，您调用[`tp_free`slot](https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_free)[`PyObject_GC_Del`](https://github.com/python/cpython/blob/c30098c8c6014f3340a369a31df9c74bdbacc269/Modules/gcmodule.c#L1787) ，对于带有 的类，它会自动设置为`Py_TPFLAGS_HAVE_GC`。包括与 untrack 调用`PyObject_GC_Del`相同的代码。`PyObject_GC_UnTrack`

# haskell - GADT 模式匹配的封装

> ID：12255540
> 
> 赞同：2
> 
> 时间：2012-09-04T00:53:50.853
> 
> 标签：haskell, refactoring, pattern-matching, gadt

在这段[代码](https://codereview.stackexchange.com/q/15017/16287)中有重复的片段：

```
insert x (AATree t) = case insert' x t of
    Same t -> AATree t
    Inc t  -> AATree t

insertBlack :: (Ord a) => a -> AANode Black (Succ n) a -> AnyColor (Succ n) a
insertBlack x (Black l y r)
    | x < y     = case insert' x l of
          Same l' -> AnyColor $ Black l' y r
          Inc  l' -> AnyColor $ skew l' y r
    | otherwise = case insert' x r of
          Same r' -> AnyColor $ Black l y r'
          Inc r'  -> AnyColor $ Red   l y r' 
```

所以很想写一个函数：

```
insert2 same inc x l = case insert' x l of
          Same aa -> same aa
          Inc aa  -> inc aa 
```

并在任何地方使用它，例如：

```
insert x (AATree t) = insert2 AATree AATree x t 
```

有没有办法写`insert2`？天真的方法不进行类型检查。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T02:13:17.937

由于您在 GADT 上进行案例分支，因此在案例表达式的外部可能不知道整个 aa 类型。这意味着您需要更高级别的类型作为 insert2 的函数参数，以便它们可以用于任何类型的 aa。

这需要 {-# LANGUAGE Rank2Types #-} 以及 insert2 的显式类型注释。所需的确切注释取决​​于您的 GADT 和插入的类型。查看您的链接代码，我认为您想要类似的东西

```
insert2 :: (Ord a) =>
    (AANode Black (Succ n) a -> b)
    -> (forall c. AANode c n a -> b)
    -> a -> AANode c n a -> b 
```

# jquery - IE 7/8 不附加在 .each 循环中生成的元素

> ID：12255541
> 
> 赞同：0
> 
> 时间：2012-09-04T00:54:16.303
> 
> 标签：jquery, internet-explorer, append, each

在我的标记中，我有这个空`<ul>`来保存我的缩略图：...

```
<ul class="slideSelectors">
</ul><!--   END ul="slideSelectors" --> 
```

...我正在使用 jQuery 循环遍历一堆 .slide div 并生成缩略图：...

```
// GENERATE THE SLIDE SELECTORS [THUMBNAILS]
$('.slides .slide').each(function() {
    var ID = $(this).attr('id');
    var imgTag  = $(this).find('img').parent().html().split('meta"  -->')[1];
    var listItem = '<li><a href="#" title="'+ ID +'">'+imgTag+'</li>';
    //$('.slideSelectors').html(listItem); // loads only last list item, since .html() replaces all previous LIs
    //$('.slideSelectors').add(listItem); // NG in IE7, IE8
    $('.slideSelectors').append(listItem); // NG in IE7, IE8
}); 
```

...这是触发业务：

```
$('.slideSelectors').on('click', 'li a', function(){
    var selectorIx = parseInt($(this).closest('li').index(), 10);
    newSlide(selectorIx);
}); 
```

...所有这些都在 FF、Safari 中发挥了作用。

然而，IE7/8 似乎无法与 .append() 一起使用：缩略图图像被渲染（不可点击），但没有`<li>`标签和锚标签，这使得缩略图无法用作选择器。我已经提醒了 imgTag 和 listItem 变量，它们看起来是正确的（尽管图像标签未正确关闭，尽管在我的 .slide div 中是正确的）。使用 .prepend() 的结果相同，而 .html() 并不好（正如我在相关问题中所建议的那样），因为我处于 .each() 循环中，它只呈现最后一个缩略图。（我也在其他地方读到过，这可能与错误的 HTML 有关，但我的代码是有效的）

这似乎是一个已知的错误，但我还没有看到修复。除了添加另一个触发器选择器之外，我没有想法。谁能指出我的解决方案的方向？

提前谢谢了，

谢基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:51:20.783

在您的代码中

```
var listItem = '<li><a href="#" title="'+ ID +'">'+imgTag+'</li>'; 
```

应该

```
var listItem = '<li><a href="#" title="'+ ID +'">'+imgTag+'</a></li>'; 
```

您错过了结束`</a>`标签，其他浏览器比它更聪明，`IE`所以它可以工作，但`IE`不是那么聪明，所以您的缩略图在`IE`.

# windows - 在 Win32 GUI 应用程序中使用标准输出：如果我没有重定向到参数中的文件，则会崩溃

> ID：12255543
> 
> 赞同：3
> 
> 时间：2012-09-04T00:54:34.093
> 
> 标签：windows, user-interface, dll, stream, stdout

我正在构建一个 Win32 GUI 应用程序。在该应用程序中，我使用了一个打算在命令行应用程序中使用的 DLL。

假设 Foo.exe 是我的 GUI 应用程序，bar() 是 DLL 中的一个函数，它将“hello”打印到标准输出。Foo.exe 调用 bar()。

*如果我使用*重定向（>）（即）从命令行运行 Foo.exe，`Foo.exe > out.txt`它会将“hello”写入 out.txt 并正常退出（如预期的那样）。

*但是，如果我在没有*重定向的情况下运行 Foo.exe （从 cmd.exe 或通过在 Windows 资源管理器中双击），它会在调用 bar() 时崩溃。

*如果我在调试器中使用*命令行中的重定向运行 Foo.exe （通过 VS 的项目属性设置）并调用“GetStdHandle(STD_OUTPUT_HANDLE)”，我会得到一个合理的句柄地址。如果我在命令行中*没有重定向就调用它，我得到 0。*

我需要一些东西来“初始化”标准吗？有没有办法可以在应用程序启动中设置此重定向？（重定向到一个文件将是理想的。但只需丢弃 DLL 打印的数据也可以。）

最后，我怀疑 DLL 是通过 CRT POSIX-like API 写入标准输出的，因为它是一个跨平台的 DLL。我不知道这是否重要。

我尝试使用 CreateFile 创建文件并调用 SetStdHandle，但这似乎不起作用。但是，我可能错误地创建了文件。请参阅下面的代码。

```
HANDLE hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);
// hStdOut is zero  

HANDLE hFile;
hFile = CreateFile(TEXT("something.txt"),        // name of the write
                   GENERIC_WRITE,               // open for writing
                   0,                           // do not share
                   NULL,                        // default security
                   CREATE_NEW,             // create new file only
                   FILE_ATTRIBUTE_NORMAL,  // normal file
                   NULL);                  // no attr. template
BOOL r = SetStdHandle(STD_OUTPUT_HANDLE, hFile) ;   
hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);
// hStdOut is now equal to hFile, and r is 1

bar();
// crashes if there isn't a redirect in the program arguments 
```

**更新：**我刚刚找到这篇文章： http: [//support.microsoft.com/kb/105305](http://support.microsoft.com/kb/105305)。它指出“请注意，此代码无法纠正句柄 0、1 和 2 的问题。事实上，由于其他复杂性，无法纠正此问题，因此有必要使用流 I/O 而不是低- 级 I/O。”

我的 DLL 肯定使用文件句柄 0,1 和 2。所以，这个问题可能没有好的解决方案。

我正在研究一种检查这种情况的解决方案，并使用 CreateProcess 适当地重新启动 exe。完成后我会在这里发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:12:38.580

我找到的解决方案如下：

*   以某种方式获取有效的文件句柄以引导标准输出。让我们将文件句柄称为“fh”。（请注意，在 Windows 上，文件句柄与文件描述符不同）
*   使用 _open_osfhandle 将文件描述符与文件句柄相关联（有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/kdfaxaay.aspx](http://msdn.microsoft.com/en-us/library/kdfaxaay.aspx)）让我们将新文件描述符称为“fd”，一个 int 值。
*   调用 dup2 将 STDOUT_FILENO 关联到给定的文件描述符： dup2(fd, STDOUT_FILENO)
*   创建与标准输出文件描述符关联的文件流 FILE* f = _fdopen(STDOUT_FILENO, "w");
*   memset stdout 到 f 的内容：*stdout = *f
*   在给定的文件句柄上调用 SetStdHandle： SetStdHandle(STD_OUTPUT_HANDLE, ofh);

请注意，我没有完全测试过这个序列，但有些不同。

我不知道某些步骤是否多余。

无论如何，下面的文章很好地解释了文件句柄、描述符和字段流的概念：

[http://dslweb.nwnexus.com/~ast/dload/guicon.htm](http://dslweb.nwnexus.com/~ast/dload/guicon.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T06:21:43.853

你能告诉我你使用哪个库吗？这个问题有很好的解决方案。编写带有您的图标和所有快捷方式启动的小型存根启动程序 EXE（在 GUI 模式下但没有窗口！）。使这个存根 EXE“CreateProcess”成为真正的 EXE，并将输出重定向到“NUL”或“CON”，或者，它挂起的 CreateProcess()，取它的 STDOUT，什么都不做。这样，您的原始 EXE 应该在没有可见控制台的情况下工作，但实际上会有写入位置 - 在父不可见存根 EXE 所采用的句柄 0,1 和 2 中。请注意，杀死父 EXE 可能会使子进程丢失其句柄 - 并且 - 崩溃。

您最终可能会在任务管理器中使用两个进程。所以你可以试着让这两个过程像谷歌浏览器一样工作。

关于您的问题*，我需要一些东西来“初始化”标准吗？*- 只有您的父母/启动器可以“正确”地为句柄 0,1 和 2 预初始化您的 STDOUT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T04:21:08.177

您必须将 foo.exe 构建为带有[`/SUBSYSTEM`](http://msdn.microsoft.com/en-us/library/fcc1zstk.aspx)开关的控制台应用程序。Windows 将自动为您的应用程序分配一个控制台（标准输出），它可以是：

*   当前控制台
*   重定向到文件
*   到另一个程序的 STDIN 的管道

如果您将 foo.exe 构建为 GUI 应用程序，默认情况下不会分配控制台，这解释了崩溃

如果必须使用 GUI 子系统，仍然可以使用 AllocConsole 完成。这篇旧的[WDJ 文章有示例代码](http://dslweb.nwnexus.com/~ast/dload/guicon.htm)可以帮助您。

# ios - 使用外部开发人员时 Adob e Air iOS 应用程序的配置问题

> ID：12255544
> 
> 赞同：0
> 
> 时间：2012-09-04T00:54:37.357
> 
> 标签：ios, air, provisioning, certificate

我的外部开发人员坚持认为，我最好从我的计算机上获取证书并进行测试。这似乎与苹果推荐的不同。她的原因之一是使用 Adob​​e Air，否则她不需要 Xcode。她是对的吗？

更复杂的是，我没有 Mac。我可以随意借用一台，这样我就可以使用 Mac。但是，我强烈不希望在其上安装 Xcode。我的开发人员认为有一种方法可以在没有 Xcode 的情况下使用钥匙串。这可能吗？我该怎么做？

如果该应用程序成功，我将分解并获得 Mac。到那时，将钥匙串转移到新的 Mac 上会不会很容易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:19:16.100

在 Spotlight 中搜索“钥匙串访问”。那是你的钥匙扣。是的，您可以通过导出 p12 文件将内容从系统传输到系统。你到底在问什么？您还没有真正提供有关您的情况的任何详细信息。您需要一个带有有效证书的配置文件，其中添加了相关设备，以便将任何内容添加到一般设备上（尽管我听说 Adob​​e 以某种方式绕过了这个......）。

# c - 无法检索编辑控件中文本的长度

> ID：12255545
> 
> 赞同：0
> 
> 时间：2012-09-04T00:54:48.700
> 
> 标签：c, string, winapi, edit-control

```
INT_PTR CALLBACK ConnectDlg(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    HDC hdc = GetDC(hDlg);
    int wmId, wmEvent;
    static HWND hIpControl;
    static HWND hPort;
    static LPWSTR lpIPAddress = (LPWSTR)malloc(sizeof(LPWSTR));
    static LPWSTR lpPort       = (LPWSTR)malloc(sizeof(LPWSTR));
    static char* IPArgtoFn;
    static size_t IPAddressLength; 
    static size_t PortLength;
    static POINT pt;
    hIpControl = GetDlgItem(hDlg, IDC_IPADDRESS1);
    hPort      = GetDlgItem(hPort, IDC_EDIT2);
    switch (message)
    {
    case WM_INITDIALOG:
        {

        return (INT_PTR)TRUE;
        break;
        }
    case WM_COMMAND:
        {

        wmId    = LOWORD(wParam);
        wmEvent = HIWORD(wParam);
        switch (wmId)
            {
            case IDCANCEL:
                EndDialog(hDlg, wmId);
                break;
            case IDCONNECT:
                IPAddressLength = GetWindowTextLength(hIpControl) + 1;
                PortLength = SendMessage(hPort, WM_GETTEXTLENGTH, 0, 0);
                GetWindowText(hIpControl, lpIPAddress, IPAddressLength);

                pt.x = 10; pt.y = 10;
                wcstombs(IPArgtoFn, lpIPAddress, IPAddressLength);
                //TextOut(hdc, 10, 10, lpIPAddress , IPAddressLength);
                mySocket.ConnectToServer(IPArgtoFn, (int)lpPort, hdc, pt); 

                return (INT_PTR)FALSE;
                break;

            default:
                return DefWindowProc(hDlg, message, wParam, lParam);
                break;
            }
        }
    }
    return (INT_PTR)FALSE;
    } 
```

我知道我选择了正确的控件。它的标识符是 IDC_EDIT2，我知道这是对的。但是每当我尝试检索编辑控件的长度并将其保存到变量 PortLength 时，当我调试它时该值始终为 0。我已经尝试将 GetWindowTextLength 与 IP 控件一起使用，但当我将它与编辑控件一起使用时，无论我在框中输入多长的字符串，长度始终为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:10:57.017

直接错误在这一行：

```
hPort = GetDlgItem(hPort, IDC_EDIT2); 
```

这应该是：

```
hPort = GetDlgItem(hDlg, IDC_EDIT2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T01:13:00.400

1.  GetDlgItem(hPort, ...) 应该是 GetDlgItem(hDlg,...) 用于检索任何子控件句柄。

2.  正确分配内存。

3.  仅当您在使用对话过程时不处理消息时才返回 FALSE。这告诉调用者转发到 DefDlgProc() 所以你不必这样做。在这方面，对话框回调与窗口回调不同。

4.  几乎/所有的本地变量都不需要是静态的。真的没有在那里保存任何东西。具有讽刺意味的是，子控件手柄实际上是静态的不错候选者，具有讽刺意味的是，它们在某种程度上是问题的核心。

# c++ - C++：深度复制基类指针

> ID：12255546
> 
> 赞同：27
> 
> 时间：2012-09-04T00:55:00.473
> 
> 标签：c++, inheritance, copy-constructor, deep-copy

我四处搜索，似乎为了执行此操作，我需要更改我的 Base 类并想知道这是否是最好的方法。例如，我有一个基类：

```
class Base {} 
```

然后是一长串派生类：

```
class Derived_1:: public Base {}
class Derived_2:: public Derived_1{}
...
...
class Derived_n:: public Derived_M{} 
```

然后我有另一堂课：

```
class DeepCopy 
{ 
  Base * basePtr;

  public:
   DeepCopy(DeepCopy & dc) {}
} 
```

假设 Base 类和 Derived_x 类的复制构造函数编码正确，那么为 DeepCopy 编写复制构造函数的最佳方法是什么。我们如何知道要复制的对象的 basePtr 中的类？

我能想到的唯一方法是使用 RTTI，但使用一长串 dynamic_casts 似乎不正确。此外，它需要 DeepCopy 了解 Base 类的继承层次结构。

我看到的另一种方法是[here](https://stackoverflow.com/questions/5027456/copying-derived-entities-using-only-base-class-pointers-without-exhaustive-tes)。但它需要 Base 和 Derived 类实现克隆方法。

那么有没有更简单、更标准的方法呢？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-04T01:00:18.557

您需要使用*虚拟复制*模式：在执行复制的接口中提供一个虚拟函数，然后在整个层次结构中实现它：

```
struct base {
   virtual ~base() {}                // Remember to provide a virtual destructor
   virtual base* clone() const = 0;
};
struct derived : base {
   virtual derived* clone() const {
      return new derived(*this);
   }
}; 
```

然后`DeepCopy`对象只需要调用该函数：

```
class DeepCopy 
{ 
  Base * basePtr;    
public:
   DeepCopy(DeepCopy const & dc)           // This should be `const`
      : basePtr( dc.basePtr->clone() )
   {}
}; 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-04T01:11:58.327

使用采用`clone()`函数的方法是一个很好的解决方案。注意使用**[CRTP（奇怪的重复模板模式）](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)可以为您节省一些工作**。你这样做的方法是引入一个中间级别（`BaseCRTP`下面称为），它是一个模板并实现了该`clone()`功能。当您派生实际类时，将它们用作派生它们的基类的模板参数。他们将`clone()`自动获得为他们实现的功能。确保派生类实现复制构造函数（或确保默认值是您需要的）。

```
/* Base class includes pure virtual clone function */
class Base {
public:
  virtual ~Base() {}
  virtual Base *clone() const = 0;
};

/* Intermediate class that implements CRTP. Use this
 * as a base class for any derived class that you want
 * to have a clone function.
 */
template <typename Derived>
class BaseCRTP : public Base {
public:
  virtual Base *clone() const {
      return new Derived(static_cast<Derived const&>(*this));
  }
};

/* Derive further classes. Each of them must
 * implement a correct copy constructor, because
 * that is used by the clone() function automatically.
 */
class Derived1 : public BaseCRTP<Derived1> {
  /*... should have an ordinary copy constructor... */
};

class Derived2 : public BaseCRTP<Derived2> {
  /*... should have an ordinary copy constructor... */
}; 
```

然后，您显然可以`DeepCopy`以通常的方式实现该类：

```
class DeepCopy 
{ 
  Base *basePtr;    
public:
  DeepCopy(const DeepCopy &dc)
    : basePtr(dc.basePtr->clone())
  {}
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T01:00:45.367

我认为模板是在这种情况下最好的方法：

```
template<typename Sub>
class DeepCopy
{
    Base *base;

    DeepCopy(Sub *sub)
    {
        base = new Sub(*sub); // use copy constructor
    }
} 
```

这确实意味着`DeepCopy`' 不能相互分配，但这就是您使用 C++ 所付出的代价。

# php - 用php回显数据库查询的多行

> ID：12255551
> 
> 赞同：0
> 
> 时间：2012-09-04T00:55:49.077
> 
> 标签：php, mysql, twitter-bootstrap

我正在尝试制作一个显示某人所有朋友的手风琴（twitter bootstrap），我最终只是创建了一个无限循环，基本上我要做的就是为结果中的每一行回显一个 php 字符串。

谁能发现我在做什么愚蠢（除了不使用mysqli）？

```
 while ( $rowresult = mysql_fetch_assoc(mysql_query("SELECT * FROM friends WHERE id='".$user["ID"]."' ")) ) {
        $auto = "0px";
        echo '<div class="accordion-group"><div class="accordion-heading"><div class="accordion-heading">';
        echo '<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse'. $counter . '">';       
        echo $rowresult['firstname'];
        echo ' ';
        echo $rowresult['lastname'];
        echo ', ';
        echo $rowresult['headline'];
        echo '</a></div> <div id="collapse'. $counter .'" class="accordion-body ';
        if ($counter == 0){
        echo 'in ';
        $auto = "auto";
        }
        echo 'collapse" style="height: '. $auto .'; "><div class="accordion-inner">';
        echo '<img src="'.$rowresult["pictureUrl"].'">';        
        echo '</div></div></div></div>';    
        $counter++;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T01:01:15.443

它不起作用，因为您一次又一次地执行相同的查询。
改为这样做：

```
$res = mysql_query("SELECT * FROM friends WHERE id='".$user["ID"]."'");
while ( $rowresult = mysql_fetch_assoc($res) ) {
....
} 
```

另外，我建议您使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/ref.pdo-mysql.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T00:58:32.087

您在每次迭代中重复您的查询。将 mysql_query() 移出循环到变量中。

```
$q = mysql_query("SELECT * FROM friends WHERE id='".$user["ID"]."' ");
while ($rowresult = mysql_fetch_assoc($q)) {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T00:59:39.657

将查询放在 while 循环之前。IE

```
 $q=mysql_query("SELECT * FROM friends WHERE id='".$user["ID"]."' ");
 while ( $rowresult = mysql_fetch_array($q)) { 
```

...

但是当然要使用 PDO ... :)

# python - 在 Python 中对版本进行排序

> ID：12255554
> 
> 赞同：18
> 
> 时间：2012-09-04T00:56:35.120
> 
> 标签：python, sorting, distutils

我试图让 1.7.0 在 1.7.0.rc0 之后但在 1.8.0 之前得到它，如果你正在对版本进行排序，它应该是这样。我认为 LooseVersion 的全部意义在于它正确地处理了这类事情的排序和比较。

```
>>> from distutils.version import LooseVersion
>>> versions = ["1.7.0", "1.7.0.rc0", "1.8.0"]
>>> lv = [LooseVersion(v) for v in versions]
>>> sorted(lv, reverse=True)
[LooseVersion ('1.8.0'), LooseVersion ('1.7.0.rc0'), LooseVersion ('1.7.0')] 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-04T01:04:36.370

```
>>> from distutils.version import LooseVersion
>>> versions = ["1.7.0", "1.7.0rc0", "1.11.0"]
>>> sorted(versions, key=LooseVersion)
['1.7.0', '1.7.0rc0', '1.11.0'] 
```

从文档

> 无政府主义者和软件现实主义者的版本编号。实现上述版本号类的标准接口。版本号由一系列数字组成，由句点或字母字符串分隔。比较版本号时，数字组件将按数字进行比较，字母组件将按词汇进行比较。
> ……
> 其实这个方案下不存在版本号无效的问题；比较规则简单且可预测，但可能并不总是给出您想要的结果（对于“想要”的某些定义）。

所以你会看到特别对待“rc”没有什么聪明之处

你可以看到版本号是如何分解成这样的

```
>>> LooseVersion('1.7.0rc0').version
[1, 7, 0, 'rc', 0] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-04T01:00:58.957

**主要编辑：**旧答案太不合情理了。这里有两个更漂亮的解决方案。

所以，我目前看到了三种实现预期排序的方法，在实际发布之前发布候选“rc”。

1.  我以前的命令式排序
2.  使用“b”而不是“rc”，以便使用`StrictVersion`来自同一个包的 ,
3.  扩展`Version`类以添加对任意标签和标签排序的支持

## 1\. 旧的命令式排序

```
from distutils.version import LooseVersion
versions = ["1.7.0", "1.7.0.rc0", "1.8.0"]
lv = [LooseVersion(v) for v in versions]
lv.sort()

sorted_rc = [v.vstring for v in lv]

import re
p = re.compile('rc\\d+$')

i = 0

# skip the first RCs
while i + 1 < len(sorted_rc):
    m = p.search(sorted_rc[i])
    if m:
        i += 1
    else:
        break

while i + 1 < len(sorted_rc):
    tmp = sorted_rc[i]
    m = p.search(sorted_rc[i+1])
    if m and sorted_rc[i+1].startswith(tmp):
        sorted_rc[i] = sorted_rc[i+1]
        sorted_rc[i+1] = tmp
    i += 1 
```

有了这个我得到：

```
['1.7.0rc0', '1.7.0', '1.11.0'] 
```

## 2\. 用“b”代替“rc”

如果您被允许编写为或注明 alpha 或 beta 版本，则该包`distutils.version`还有另一个类`StrictVersion`可以完成这项工作。`1.7.0.rc0``1.7.0a0``1.7.0b0`

那是：

```
from distutils.version import StrictVersion
versions = ["1.7.0", "1.7.0b0", "1.11.0"]
sorted(versions, key=StrictVersion) 
```

这给出了：

```
['1.7.0b0', '1.7.0', '1.11.0'] 
```

可以使用[re](http://docs.python.org/2/library/re.html#module-re)模块完成从一种形式到另一种形式的翻译。

## 3.扩展Version类

上一个解决方案的明显问题是缺乏灵活性`StrictVersion`。更改`version_re`类属性以使用`rc`而不是`a`or `b`，即使它接受`1.7.1rc0`，仍将其打印为`1.7.1r0`（从 python 2.7.3 开始）。

我们可以通过实现我们自己的自定义版本类来做到这一点。这可以像这样完成，至少在某些情况下通过一些单元测试来确保正确性：

```
#!/usr/bin/python
# file: version2.py

from distutils import version
import re
import functools

@functools.total_ordering
class NumberedVersion(version.Version):
    """
    A more flexible implementation of distutils.version.StrictVersion

    This implementation allows to specify:
    - an arbitrary number of version numbers:
        not only '1.2.3' , but also '1.2.3.4.5'
    - the separator between version numbers:
        '1-2-3' is allowed when '-' is specified as separator
    - an arbitrary ordering of pre-release tags:
        1.1alpha3 < 1.1beta2 < 1.1rc1 < 1.1
        when ["alpha", "beta", "rc"] is specified as pre-release tag list
    """

    def __init__(self, vstring=None, sep='.', prerel_tags=('a', 'b')):
        version.Version.__init__(self) 
            # super() is better here, but Version is an old-style class

        self.sep = sep
        self.prerel_tags = dict(zip(prerel_tags, xrange(len(prerel_tags))))
        self.version_re = self._compile_pattern(sep, self.prerel_tags.keys())
        self.sep_re = re.compile(re.escape(sep))

        if vstring:
            self.parse(vstring)

    _re_prerel_tag = 'rel_tag'
    _re_prerel_num = 'tag_num'

    def _compile_pattern(self, sep, prerel_tags):
        sep = re.escape(sep)
        tags = '|'.join(re.escape(tag) for tag in prerel_tags)

        if tags:
            release_re = '(?:(?P<{tn}>{tags})(?P<{nn}>\d+))?'\
                .format(tags=tags, tn=self._re_prerel_tag, nn=self._re_prerel_num)
        else:
            release_re = ''

        return re.compile(r'^(\d+)(?:{sep}(\d+))*{rel}$'\
            .format(sep=sep, rel=release_re))

    def parse(self, vstring):
        m = self.version_re.match(vstring)
        if not m:
            raise ValueError("invalid version number '{}'".format(vstring))

        tag = m.group(self._re_prerel_tag)
        tag_num = m.group(self._re_prerel_num)

        if tag is not None and tag_num is not None:
            self.prerelease = (tag, int(tag_num))
            vnum_string = vstring[:-(len(tag) + len(tag_num))]
        else:
            self.prerelease = None
            vnum_string = vstring

        self.version = tuple(map(int, self.sep_re.split(vnum_string)))

    def __repr__(self):
        return "{cls} ('{vstring}', '{sep}', {prerel_tags})"\
            .format(cls=self.__class__.__name__, vstring=str(self),
                sep=self.sep, prerel_tags = list(self.prerel_tags.keys()))

    def __str__(self):
        s = self.sep.join(map(str,self.version))
        if self.prerelease:
            return s + "{}{}".format(*self.prerelease)
        else:
            return s

    def __lt__(self, other):
        """
        Fails when  the separator is not the same or when the pre-release tags
        are not the same or do not respect the same order.
        """
        # TODO deal with trailing zeroes: e.g. "1.2.0" == "1.2"
        if self.prerel_tags != other.prerel_tags or self.sep != other.sep:
            raise ValueError("Unable to compare: instances have different"
                " structures")

        if self.version == other.version and self.prerelease is not None and\
                other.prerelease is not None:

            tag_index = self.prerel_tags[self.prerelease[0]]
            other_index = self.prerel_tags[other.prerelease[0]]
            if tag_index == other_index:
                return self.prerelease[1] < other.prerelease[1]

            return tag_index < other_index

        elif self.version == other.version:
            return self.prerelease is not None and other.prerelease is None

        return self.version < other.version

    def __eq__(self, other):
        tag_index = self.prerel_tags[self.prerelease[0]]
        other_index = other.prerel_tags[other.prerelease[0]]
        return self.prerel_tags == other.prerel_tags and self.sep == other.sep\
            and self.version == other.version and tag_index == other_index and\
                self.prerelease[1] == other.prerelease[1]

import unittest

class TestNumberedVersion(unittest.TestCase):

    def setUp(self):
        self.v = NumberedVersion()

    def test_compile_pattern(self):
        p = self.v._compile_pattern('.', ['a', 'b'])
        tests = {'1.2.3': True, '1a0': True, '1': True, '1.2.3.4a5': True,
            'b': False, '1c0': False, ' 1': False, '': False}
        for test, result in tests.iteritems():
            self.assertEqual(result, p.match(test) is not None, \
                "test: {} result: {}".format(test, result))

    def test_parse(self):
        tests = {"1.2.3.4a5": ((1, 2, 3, 4), ('a', 5))}
        for test, result in tests.iteritems():
            self.v.parse(test)
            self.assertEqual(result, (self.v.version, self.v.prerelease))

    def test_str(self):
        tests = (('1.2.3',), ('10-2-42rc12', '-', ['rc']))
        for t in tests:
            self.assertEqual(t[0], str(NumberedVersion(*t)))

    def test_repr(self):
        v = NumberedVersion('1,2,3rc4', ',', ['lol', 'rc'])
        expected = "NumberedVersion ('1,2,3rc4', ',', ['lol', 'rc'])"
        self.assertEqual(expected, repr(v))

    def test_order(self):
        test = ["1.7.0", "1.7.0rc0", "1.11.0"]
        expected = ['1.7.0rc0', '1.7.0', '1.11.0']
        versions = [NumberedVersion(v, '.', ['rc']) for v in test]
        self.assertEqual(expected, list(map(str,sorted(versions))))

if __name__ == '__main__':
    unittest.main() 
```

所以，它可以像这样使用：

```
import version2
versions = ["1.7.0", "1.7.0rc2", "1.7.0rc1", "1.7.1", "1.11.0"]
sorted(versions, key=lambda v: version2.NumberedVersion(v, '.', ['rc'])) 
```

输出：

```
['1.7.0rc1', '1.7.0rc2', '1.7.0', '1.7.1', '1.11.0'] 
```

所以，总而言之，使用 python 随附的电池或推出自己的电池。

关于这个实现：可以通过处理版本中的尾随零来改进它，并记住正则表达式的编译。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-04-14T09:33:47.160

我像这样使用[pkg_resources](https://www.python.org/dev/peps/pep-0365/)模块：

```
from pkg_resources import parse_version

def test_version_sorting():
    expected = ['1.0.0dev0',
                '1.0.0dev1',
                '1.0.0dev2',
                '1.0.0dev10',
                '1.0.0rc0',
                '1.0.0rc2',
                '1.0.0rc5',
                '1.0.0rc21',
                '1.0.0',
                '1.1.0',
                '1.1.1',
                '1.1.11',
                '1.2.0',
                '1.3.0',
                '1.23.0',
                '2.0.0', ]
    alphabetical = sorted(expected)
    shuffled = sorted(expected, key=lambda x: random())
    assert expected == sorted(alphabetical, key=parse_version)
    assert expected == sorted(shuffled, key=parse_version) 
```

请注意，从预期版本列表中创建随机排序会使这成为潜在的不稳定单元测试，因为两次运行不会有相同的数据。不过，在这种情况下，这应该没关系……希望如此。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-09-20T23:03:14.700

我发现这很有帮助，而且更简单：

```
from packaging import version

vers = ["1.7.0", "1.7.0rc2", "1.7.0rc1", "1.7.1", "1.11.0"]

sorted(vers, key=lambda x: version.Version(x)) 
```

结果是：

```
['1.7.0rc1', '1.7.0rc2', '1.7.0', '1.7.1', '1.11.0'] 
```

添加`reverse=True`使它们按“降序”顺序排列，我觉得这很有帮助。

```
['1.11.0', '1.7.1', '1.7.0', '1.7.0rc2', '1.7.0rc1'] 
```

它可以对各种版本风格的数字进行排序（我的测试平台是 Linux 版本 v4.11.16 等）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-04T08:15:20.503

我用这个：

```
#!/usr/bin/python
import re

def sort_software_versions(versions = [], reverse = False):
  def split_version(version):
    def toint(x):
      try:
        return int(x)
      except:
        return x
    return map(toint, re.sub(r'([a-z])([0-9])', r'\1.\2', re.sub(r'([0-9])([a-z])', r'\1.\2', version.lower().replace('-', '.'))).split('.'))
  def compare_version_list(l1, l2):
    def compare_version(v1, v2):
      if isinstance(v1, int):
        if isinstance(v2, int):
          return v1 - v2
        else:
          return 1
      else:
        if isinstance(v2, int):
          return -1
        else:
          return cmp(v1, v2)
    ret = 0
    n1 = len(l1)
    n2 = len(l2)
    if n1 < n2:
      l1.extend([0]*(n2 - n1))
    if n2 < n1:
      l2.extend([0]*(n1 - n2))
    n = max(n1, n2)
    i = 0
    while not ret and i < n:
      ret = compare_version(l1[i], l2[i])
      i += 1
    return ret
  return sorted(versions, cmp = compare_version_list, key = split_version, reverse = reverse) 
```

* * *

```
print(sort_software_versions(['1.7.0', '1.7.0.rc0', '1.8.0']))
['1.7.0.rc0', '1.7.0', '1.8.0'] 
```

这样它就可以正确处理 alpha、beta、rc。它可以处理包含连字符的版本，或者当人们将“rc”粘贴到版本时。re.sub 可以使用已编译的正则表达式，但这已经足够了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-01T12:25:37.090

在我的情况下，我想使用“.devX”作为“预发布”标识符，所以这是另一个实现，主要基于`distutils.version.StrictVersion`

```
class ArtefactVersion(Version):
    """
    Based on distutils/version.py:StrictVersion
    """
    version_re = re.compile(r'^(\d+) \. (\d+) \. (\d+) (\.dev\d+)?$', re.VERBOSE | re.ASCII)

    def parse(self, vstring):
        match = self.version_re.match(vstring)
        if not match:
            raise ValueError("invalid version number '%s'" % vstring)

        (major, minor, patch, prerelease) = match.group(1, 2, 3, 4)

        self.version = tuple(map(int, [major, minor, patch]))
        if prerelease:
            self.prerelease = prerelease[4:]
        else:
            self.prerelease = None

    def __str__(self):
        vstring = '.'.join(map(str, self.version))

        if self.prerelease:
            vstring = vstring + f".dev{str(self.prerelease)}"

        return vstring

    def _cmp(self, other):
        if isinstance(other, str):
            other = ArtefactVersion(other)

        if self.version != other.version:
            # numeric versions don't match
            # prerelease stuff doesn't matter
            if self.version < other.version:
                return -1
            else:
                return 1

        # have to compare prerelease
        # case 1: neither has prerelease; they're equal
        # case 2: self has prerelease, other doesn't; other is greater
        # case 3: self doesn't have prerelease, other does: self is greater
        # case 4: both have prerelease: must compare them!

        if (not self.prerelease and not other.prerelease):
            return 0
        elif (self.prerelease and not other.prerelease):
            return -1
        elif (not self.prerelease and other.prerelease):
            return 1
        elif (self.prerelease and other.prerelease):
            if self.prerelease == other.prerelease:
                return 0
            elif self.prerelease < other.prerelease:
                return -1
            else:
                return 1
        else:
            assert False, "never get here" 
```

# c - 在 C 中访问 ELF 符号表

> ID：12255555
> 
> 赞同：7
> 
> 时间：2012-09-04T00:57:04.037
> 
> 标签：c, elf, symbol-tables

我正在编写一个程序来模仿`elfdump -ecps`

它目前正确打印出精灵头、程序头和节头，但我被困在符号表的最后几个部分。

所需的输出格式为：

```
Symbol Table Section:  .dynsym
 index    value      size      type bind oth ver shndx          name
   [0]  0x00000000 0x00000000  NOTY LOCL  D    0 UNDEF          
   [1]  0x00025c0c 0x00000000  FUNC GLOB  D    2 UNDEF          .udiv
   [2]  0x00025e00 0x00000140  OBJT WEAK  D    1 .bss           _iob
   [3]  0x00025b24 0x00000000  OBJT GLOB  P    1 .got           _GLOBAL_OFFSET_TABLE_
   [4]  0x00013a44 0x0000001c  FUNC GLOB  D    1 .init          _init
... 
```

你能告诉我 oth、ver、shndx 和 name 是在哪里找到的吗？

到目前为止，我正在使用以下内容打印出来：

```
//for each entry in the symbol table
for(i=0; i<num_sym; i++)
{
    //read the current symbol
    fread(&mysym,sizeof(Elf32_Sym),1,fp);
idx=mysym.st_name;

    //multiple lines to get formatting correct
    //prints index in brackets right aligned
    char buf[12];
    sprintf(buf, "[%d]", i);
    printf("%10s", buf);

    //value
    printf("  0x%.8x", mysym.st_value);
    //size
    printf(" 0x%.8x", mysym.st_size);

    //type
    switch (ELF32_ST_TYPE(mysym.st_info)) {
        case 0:
            printf("  NOTY");
            break;
        case 1:
            printf("  OBJT");
            break;
        case 2:
            printf("  FUNC");
            break;
        case 3:
            printf("  SECT");
            break;
        case 4:
            printf("  FILE");
            break;

        default:
            break;
    }

    //bind
    switch(ELF32_ST_BIND(mysym.st_info))
    {
        case 0: printf(" LOCL");
            break;
        case 1: printf(" GLOB");
            break;
        case 2: printf(" WEAK");
            break;
        case 3: printf("  NUM");
            break;

        default:
            break;
    }
    //TODO: oth
    //TODO: ver
    //TODO: shndx
    //TODO: name

} 
```

我一直在阅读[http://docs.oracle.com/cd/E19457-01/801-6737/801-6737.pdf](http://docs.oracle.com/cd/E19457-01/801-6737/801-6737.pdf)（第 5 章），但找不到任何有用的东西

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T01:08:42.637

这主要在`Symbol Table`您链接到的文档的第 119 页开始介绍。

它实际上*具有*您需要的结构：

```
typedef struct {
    Elf32_Word    st_name;
    Elf32_Addr    st_value;
    Elf32_Word    st_size;
    unsigned char st_info;
    unsigned char st_other;
    Elf32_Half    st_shndx;
} Elf32_Sym; 
```

以及有关如何查找链接条目信息的详细信息（特别是从`st_name`结构字段中查找名称的方法）。

不幸的是，该文档似乎没有涵盖某些内容的来源（例如版本），因此，当我尝试模拟另一个具有可用源的程序时，我会*转到*[源](http://sourceforge.net/apps/trac/elftoolchain/browser/trunk/elfdump/elfdump.c)- 真的没有任何东西比这更确定:-)

从该文件的第 1665 行开始，您会找到`elf_print_symtab()`负责输出您感兴趣的信息的函数。它调用`get_versym()`以获取该信息，并且从第 1632 行的代码中，您可以看到它使用不同的部分那（[版本符号部分](http://docs.oracle.com/cd/E19082-01/819-0690/chapter6-54676/index.html)）。

而且，正如可以在[此处](http://fxr.watson.org/fxr/source/sys/elf_common.h?im=10#L293)看到的那样，该部分类型被认为是特定于操作系统的部分类型之一，这就是为什么您不会在基本标准中找到它的原因，它只涉及常见的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T01:07:09.250

对于名称，还有一个包含所有字符串的部分。您应该使用“Section Header Table”中的第一个字段作为节头中的索引，以从该字符串节中获取真正的字符串。您可以通过 google 找到很多关于此的文章。

# html - 在表格中显示大文本的最佳方法？

> ID：12255556
> 
> 赞同：1
> 
> 时间：2012-09-04T00:57:20.813
> 
> 标签：html

![在此处输入图像描述](../Images/26e8462d2a4ff86962464a9d5d70fbca.png)

* * *

我有一个表格来显示/编辑我网站的用户详细信息。每个用户一行。我为每个用户提供了 300 个字母的评论。但是正确显示注释在表格中占用了太多空间。我可能需要使用 javascript 来显示/隐藏评论。显示评论的最佳方式是什么？它需要是可编辑的，所以可能必须是一个 teaxtarea 标签。

请注意，这是一个设计原则问题，而不是技术问题。我需要以专业的方式显示大型评论部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T01:01:34.150

首先，将表格设置为您认真考虑的任何宽度：`table-layout:fixed`在表格元素上设置。

然后，为“comment”列设置一个确定的宽度。最简单的方法是使用设置（按优先顺序`<colgroup><col /><col />...</colgroup>`将其放在您的`<thead>`或`<tbody>`first之前）。`<tr>`

除了在“comment”列上设置宽度外，还可以添加以下样式：

```
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis; 
```

这将自动将文本截断为适合您的大小。

接下来你需要能够展示整个事情。您可以做的是让一个`onclick`事件将文本替换为包含文本的文本区域。这很简单，只需基本的 DOM 操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T00:37:16.840

![在此处输入图像描述](../Images/117224b790f7460c4713871c1ae10e83.png)

我决定使用具有 3 行和 300px 宽度的 textarea 并带有溢出：自动，以便在文本较大时可以滚动，但可以很好地适应表格。

# python - how to use pygame set_alpha() on a picture

> ID：12255558
> 
> 赞同：6
> 
> 时间：2012-09-04T00:57:34.343
> 
> 标签：python, pygame, splash-screen

I am using pygame and python for a project I am building, and I am building a splashscreen for when the game first opens. I have a .png that I want to show for the splashscreen, and decided to fade it in and out from black. the best way I found to do this was by blitting the image with a set alpha. I made this code, but it runs really slowly (the program hangs for 30 seconds) and doesn't give an alpha. Only displays the picture onscreen. What am i doing wrong?

```
screen = pygame.display.set_mode([1066,600])

#Drawable surface
background = pygame.Surface(screen.get_size())

#Used for converting color maps
background = background.convert()

#Splashscreen

#image fades in
for i in range (225):
    background.fill((0,0,0))
    image = pygame.image.load("logo.png")
    image.set_alpha(i)
    logoimage = screen.blit(image,(0,0))
    pygame.display.flip()

pygame.time.delay(2000)

#image fades out

#goes on to display main menu 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T20:54:26.147

Another problem that you might be having (besides what monkey said) is that you might need to use `surface.convert()` which converts the image into a form where the alpha can be changed. You can do either of the following.

```
image = pygame.image.load("logo.png")
image = image.convert() 
```

or

```
image = pygame.image.load("logo.png").convert() 
```

I have found that, although `surface.convert_alpha()` should do pretty much the same thing, it doesn't usually work. Try this test code to check.

```
import pygame, sys
pygame.init()
window=pygame.display.set_mode((1500, 800))
background=pygame.Surface((window.get_rect().width, window.get_rect().height))
background.fill((0, 0, 0))
image=pygame.image.load('InsertImageHere.png')
image=image.convert()
image2=pygame.image.load('InsertImage2Here.png')
image2=image2.convert_alpha()
rect=image.get_rect()
rect2=image2.get_rect()
rect2.left=rect.width+1
i=1
while True:
    for event in pygame.event.get():
        if event.type==12:
            pygame.quit()
            sys.exit()
    image.set_alpha(i)
    image2.set_alpha(i)
    window.fill((255, 255, 255))
    window.blit(background, background.get_rect())
    window.blit(image, rect)
    window.blit(image2, rect2)
    pygame.time.delay(20)
    i+=1
    if i==255:
        i=1
    pygame.display.update() 
```

In my testings, image 1 faded in properly, but image 2 stayed dark the whole time. You should try it for yourself; your computer might work differently.

If `surface.convert_alpha()` does work for you, you should use it, otherwise, do what I said before. This should solve your problem.

You should also note that I used `pygame.time.delay(20)` rather than 2000 like you had before. 2000 would be a bit too long if you are increasing the alpha in incraments of one.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T02:12:32.917

[1] You don't want to load the image every iteration. Because creating a new surface is a slow operation. [2] Your loop draws 225 times, then afterward the final iteration, waits 2000ms.

You want:

```
image = pygame.image.load("logo.png")

for i in range (225):
    background.fill((0,0,0))    
    image.set_alpha(i)
    screen.blit(image,(0,0))
    pygame.display.flip()
    pygame.time.delay(20) 
```

To fade in and out, you need to keep looping until the player clicks/hits a button. Like this:

```
import pygame
from pygame.locals import *

# ...

def title_loop():
    # title screen main loop    
    image = pygame.image.load("logo.png")
    done = False
    alpha = 0
    alpha_vel = 1

    # fade alpha in-out while waiting    
    while not done:        
        # get key input
        for event in pygame.event.get():
            if event.type == QUIT:
                done = true
            if event.type == KEYDOWN:
                if event.key = K_ESCAPE:
                    done = true

        # draw
        if alpha >= 255 or alpha <= 0:
            alpha_vel *= -1
        alpha += alpha_vel

        background.fill((0,0,0))
        image.set_alpha(i)
        screen.blit(image,(0,0))
        pygame.display.flip()

        pygame.time.delay(20) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T15:09:16.483

PygameNerd your example is close, but it doesn't really work.

The image.convert() will fade properly, but it doesn't support alpha channel. Try it on a non black background & it shows. The image.convert_alpha() will not fade, but the alpha channel does work properly.

I'm surprised that pygame doesn't support this out of the box, but anyway. Here is an answer: [http://www.nerdparadise.com/tech/python/pygame/blitopacity/](http://www.nerdparadise.com/tech/python/pygame/blitopacity/)

Its a bit complex, but works fine. Transparent background & fading all in one package.

# javascript - 左浮动和右浮动之间的空间

> ID：12255561
> 
> 赞同：0
> 
> 时间：2012-09-04T00:58:02.703
> 
> 标签：javascript, jquery, html, css

[**这是我正在玩弄的小提琴**](http://jsfiddle.net/f6ba7/)

有没有办法增加我向右浮动的东西和向左浮动的东西之间的空间？我只想将它增加 10px 或类似的任意值，所以我不想使用 width:20% 这是一张供参考的图片： ![在此处输入图像描述](../Images/57955ac8a2fd4e3fd3f9caad153293be.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T01:00:58.103

是的，您所要做的就是`margin`为元素指定 a ：

```
fieldset {
    float: left;
}
select {
    float: right;
    margin: 0 0 0 2em;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/f6ba7/1/)。

或者：

```
fieldset {
    float: left;
}
fieldset label {
    margin: 0 1em 0 0;
}
select {
    float: right;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/f6ba7/5/)。

或者，只需将 a 分配`width`给`fieldset`元素：

```
fieldset {
    float: left;
    width: 15em;
}
select {
    float: right;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/f6ba7/6/)。

# deployment - Symfony2 Capifony 部署 - 同一服务器上的冲突

> ID：12255566
> 
> 赞同：1
> 
> 时间：2012-09-04T00:58:25.367
> 
> 标签：deployment, symfony, apc, capifony

我想在同一台服务器上部署 Git 存储库的不同分支。

我已经更新了 app/config/deploy.rb

```
set :stage_dir, "app/config/deploy"
require "capistrano/ext/multistage"
set :stages, %w(prod stag stag2 stag3)
set :application, "MyApp" 
```

我在 app/config/deploy/ 中创建了新文件

在 app/config/deploy/stag.rb ：

```
set :symfony_env_prod, "stag"
set :domain,           "stag.example.com"
set :deploy_to,        "/var/www/#{domain}"

# Other config
role :web,             domain
role :app,             domain
role :db,              domain, :primary => true 
```

在 app/config/deploy/stag2.rb

```
set :symfony_env_prod, "stag"
set :domain,           "stag2.example.com"
set :deploy_to,        "/var/www/#{domain}"

# Other config
role :web,             domain
role :app,             domain
role :db,              domain, :primary => true 
```

我也推出了`cap stag2 deploy:setup`。

当我使用`cap stag deploy`stag.example.com 部署时，它很好

然后，当我部署时`cap stag2 deploy`，stag2.example.com 是文件，但 stag.example.com 从 stag2 获得了一些更改。stag.example.com 的源文件是正确的。我想有一个缓存冲突。

Capifony 是否能够在同一台服务器上正确部署相同的应用程序？

编辑：听起来很像[Capistrano Multistage 部署到错误的目录](https://stackoverflow.com/questions/8213376/capistrano-multistage-deploying-to-wrong-directory)

我也试过`set :deploy_to, "/var/www/stag2/#{domain}"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:23:34.173

您必须使用`server`参数而不是`:domain`.

`stag.rb`：

```
server "stag.example.com", :app, :web, :primary => true 
```

`stag2.rb`：

```
server "stag2.example.com", :app, :web, :primary => true 
```

不要`:domain`用于这种东西。

[请参阅文档](http://capifony.org/cookbook/using-the-multistage-extension.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:31:27.450

我尝试了您的解决方案 @Elnur ，将*server*替换为*domain*，部署工作正常，但问题仍然存在......经过更多调查和测试，我想出了一个似乎可行的解决方案。

我注意到在 app/autoload.php 我们使用 APC

```
$loader = new ApcUniversalClassLoader('xx.'); 
```

**二十。**是在 APC [http://symfony.com/doc/2.0/components/class_loader.html](http://symfony.com/doc/2.0/components/class_loader.html)**中创建命名空间的 A 前缀**

我替换为

```
$loader = new ApcUniversalClassLoader('xx.stagX'); 
```

然后*重启 Apache*和*rm -Rf app/cache/**

这似乎可以解决问题。如果同一台服务器上的 2 个不同网站可以使用相同的 APC 名称空间，我会感到惊讶。

这是我们之前得到的异常堆栈跟踪，看看我们如何
从 /var/www/ **stag5** .XXXX.com/
到 /var/www/ **stag6** .XXXX.com/

```
#10 /var/www/stag6.XXXX.com/shared/vendor/cg-library/src/CG/Proxy/MethodInvocation.php(58): JMS\SecurityExtraBundle\Security\Authorization\Interception\MethodSecurityInterceptor->intercept(Object(CG\Proxy\MethodInvocation))
#11 /var/www/stag5.XXXX.com/releases/20121210053804/app/cache/stag/jms_aop/proxies/St-XxBundle-Manager-XxxManager.php(85): CG\Proxy\MethodInvocation->proceed()
#12 /var/www/stag6.XXXX.com/releases/20121210060841/src/Xx/XxxBundle/Controller/XxxController.php(85): EnhancedProxy_16c750f17d8113ffbee7fc3acdc4b1625ca7410b\__CG__\St\CoreBundle\Manager\TagsManager->findXxxxx(Object(Xx\XxBundle\Entity\Project))
#13 [internal function]: Xx\XxxxxBundle\Controller\XxxxController->getXxxAction(Object(Symfony\Component\HttpFoundation\Request))
#14 /var/www/stag5.XXXX.com/releases/20121210053804/app/cache/stag/classes.php(4591): call_user_func_array(Array, Array)
#15 /var/www/stag5.XXXX.com/releases/20121210053804/app/cache/stag/classes.php(4555): Symfony\Component\HttpKernel\HttpKernel->handleRaw(Object(Symfony\Component\HttpFoundation\Request), 1)
#16 /var/www/stag5.XXXX.com/releases/20121210053804/app/cache/stag/classes.php(5537): Symfony\Component\HttpKernel\HttpKernel->handle(Object(Symfony\Component\HttpFoundation\Request), 1, true)
#17 /var/www/stag5.XXXX.com/releases/20121210053804/app/bootstrap.php.cache(564): Symfony\Bundle\FrameworkBundle\HttpKernel->handle(Object(Symfony\Component\HttpFoundation\Request), 1, true)
#18 /var/www/stag5.XXXX.com/releases/20121210053804/web/app_stag.php(13): Symfony\Component\HttpKernel\Kernel->handle(Object(Symfony\Component\HttpFoundation\Request))
#19 {main} 
```

# iphone - 如何在 Cocoa Touch 中保存网站并将其存储在数组中？

> ID：12255570
> 
> 赞同：1
> 
> 时间：2012-09-04T00:59:14.113
> 
> 标签：iphone, ios, uiwebview

我只是第一次构建一个应用程序。我创建了它，以便打开它并打开 Web 视图，并且我有一个名为“保存”的按钮（因此它只是应用程序内的一个 Web 视图，其下方有一个小按钮）。我希望能够在访问网站时保存它。它不需要标记保存或任何东西，我只想保存它，我可以单击另一个名为“站点”的按钮，它将显示我保存的网站列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:08:53.303

您将不得不决定某种存储方法。一个简单的方法是创建站点的 NSMutableArray。根据应用程序的需要，您可以将其更改为不同的内容。然后，保存站点就像插入一个代表页面的对象（可能是一个 NSURL 或带有 URL 的 NSString）一样简单。[获取 UIWebView](https://stackoverflow.com/questions/2491410/get-current-url-of-uiwebview)的当前 URL 问题讨论了从 webview 获取 URL 的几种方法。然后，您可以决定显示已保存站点列表的方式。选择站点后，您只需将其传递回 webview。

# ios - 在核心数据中实现促销对象

> ID：12255573
> 
> 赞同：0
> 
> 时间：2012-09-04T01:00:07.090
> 
> 标签：ios, core-data

在 ios 5 中，我必须在核心数据中实现的场景是一个产品可以连接到多个促销，例如简单、多买等。促销的类型决定了持久化的字段值，例如。简单的促销需要存储数量、促销价格，而多购买需要存储说明以 6 美元购买 2 但以 4 美元获得 1 的描述，例如。我需要将这些保留在核心数据中。对这些进行建模的最佳设计模式是什么？

提前感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:31:11.293

1.  找出描述促销活动所需的数据。例如，您可能需要：1) 描述、2) 折扣、3) 开始日期、4) 结束日期。创建一个存储所有这些东西的 Promotion 实体。

2.  在您的 Promotion 实体和 Product 实体之间建立关系。您可能在这里需要多对多关系，因为给定的促销可以应用于多个产品，并且给定的产品可以有多个促销。

没有第 3 步。

# asp.net-mvc-3 - MVC 3 从数据库中排除字段

> ID：12255580
> 
> 赞同：0
> 
> 时间：2012-09-04T01:01:09.293
> 
> 标签：asp.net-mvc-3, linq-to-sql

如何创建模型并从数据库中排除一些字段。我有一个**用户模型**，新用户可以在其中输入信息，但是我想在**用户模型**中添加更多的字符串，这样我也可以在那里拥有电子邮件字段，但当然我不想将这些电子邮件字段保存到数据库中。像这样 ##`public class user { public string user {} public string email {} -- 将电子邮件部分排除在数据库中。

}`.## 我尝试做 2 个单独的模型并将它们放入 parentview 类，但我一直收到 ID 错误，因为父类没有 ID，我不想将电子邮件字段保存在数据库中......任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:08:52.900

您需要使用自定义字段添加部分类用户

```
public partial class User
{
    public string Email
    {
        set; get;
    }
} 
```

您可以查看本教程以获取更多信息： [NerdDinner 第 3 步：构建模型](http://nerddinnerbook.s3.amazonaws.com/Part3.htm)

# resources - ModX Revo：在另一个资源中显示一个资源

> ID：12255582
> 
> 赞同：0
> 
> 时间：2012-09-04T01:01:24.417
> 
> 标签：resources, modx, modx-revolution, getresource

我想在另一个资源中显示一个资源的内容。我认为 getResources 可以做到这一点，但我无法让它为我工作。我有：

```
[[getResources &parents=`-1` $resources =`16`]] 
```

但没有显示。我已确保所有资源都已发布并且 getResources 已正确安装。

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T01:35:53.817

是的 - 这正是 getResources 的用途，您没有得到任何东西，因为您有一些语法错误。

[[getResources &parents= `-1`$resources = `16`]]

应该：

[[获取资源？&父母= `-1`&资源= `16`&tpl= `myTpl`]]

这 '？' 告诉 Modx 会有参数，$resources 将被忽略 & 如果你没有指定 &tpl 参数，getResources 只会将原始数组转储到你的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-13T17:17:26.923

实际上没有必要使用模板。此代码工作正常：

`[[getResources? &resources=1 &tpl=@INLINE [[+content]] &includeContent=1 ]]`

# jquery - Jquery添加空格btw大写的不间断词

> ID：12255589
> 
> 赞同：0
> 
> 时间：2012-09-04T01:02:24.600
> 
> 标签：jquery

```
<script type="text/javascript">
var CountryVal;
var StateVal;
$(document).ready(function(){
    $('#ItemCountry').change(function(){
        CountryVal = this.value; // value of the select element
        $("#StateFeeder").html('<img src="/images/mapCountry/AU/ajax-loader.gif" class="IMG-Loading" />');
        $('#StateFeeder').load('/StateFeeder/StateFeeder-Buy.html #StateFeeder-'+CountryVal, function(){
            $('#ItemState').change(function(){
                StateVal = this.value; // value of the select element
                $("#CityFeeder").html('<img src="/images/mapCountry/AU/ajax-loader.gif" class="IMG-Loading" />');
                $('#CityFeeder').load('/Country/'+CountryVal+'/_'+CountryVal+'_suburbs.html #Suburbs-'+StateVal, function(){
                    $('#CityFeeder select').attr('size', '5');
                    $('#CityFeeder select').change(function(){  
                        this.form['CAT_Custom_221342'].value=$(this).val();
                    }); 
                });        
            })
        });
    });
});           
</script> 
```

上面的 Jquery 将从其他页面加载下拉菜单到当前页面，并在用户进行选择时将值传递到另一个输入字段。问题是，从远程页面中的#StateFeeder 获取的选项值包含以下格式：

```
<option value="Kabardino-BalkarRepublic">Kabardino-Balkar Republic</option>
<option value="Karachay-CherkessRepublic">Karachay-Cherkess Republic</option>
<option value="KareliaRepublic">Karelia Republic</option>
<option value="KomiRepublic">Komi Republic</option>
<option value="MariElRepublic">Mari El Republic</option>
<option value="MordoviaRepublic">Mordovia Republic</option> 
```

**上面的值是不间断的大写单词，我希望它们在加载到当前页面时在大写单词之间使用空格（请保留“-”btw 单词），当它们加载到当前页面时，没有空格的值用作用户的 id 以进行 onchange 操作，然后稍后对其进行格式化。非常感谢你：**

```
<option value="Kabardino-Balkar Republic">Kabardino-Balkar Republic</option>
<option value="Karachay-Cherkess Republic">Karachay-Cherkess Republic</option>
<option value="Karelia Republic">Karelia Republic</option>
<option value="Komi Republic">Komi Republic</option>
<option value="Mari El Republic">Mari El Republic</option>
<option value="Mordovia Republic">Mordovia Republic</option> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T01:17:16.983

我建议：

```
$('option').attr('value', function(i, h) {
    return h.replace(/([a-z])([A-Z])/g, '$1 $2');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/d46ww/)。

这有效地查找一个小写字母 ( `[a-z]`) 后跟一个大写字母 ( `[A-Z]`)（匹配两个字母中的每一个，括号包裹每个字母），使用 中的正则表达式`replace()`，然后替换小写字母 ( with self) 插入一个空格，然后插入大写字母。

在链接的演示中，`div`以下`select`元素显示了更改后的`option`s 的 HTML。

# html - Pre 元素不考虑右填充

> ID：12255597
> 
> 赞同：1
> 
> 时间：2012-09-04T01:03:25.883
> 
> 标签：html, css, pre

我有一个具有以下样式的 pre 元素：

```
pre {
    background: #555;
    background-image: -webkit-linear-gradient(#555 50%, #505050 50%);
    background-image:    -moz-linear-gradient(#555 50%, #505050 50%);
    background-image:     -ms-linear-gradient(#555 50%, #505050 50%);
    background-image:      -o-linear-gradient(#555 50%, #505050 50%);
    background-image:         linear-gradient(#555 50%, #505050 50%);
    background-position: 0 0;
    background-repeat: repeat;
    background-size: 4.5em 4.5em;
    color: #fff;
    font-size: .8em;
    line-height: 2.25;
    margin: 0 -2.25em 2.25em;
    overflow: auto;
    padding: 2.25em;
} 
```

为什么在滚动`pre`元素时会忽略右填充？我不想换行，我想要这种行为（这不是基于规范的预期行为，但似乎在 webkit 中工作）：http: [//jsfiddle.net/joshnh/Ly5kz/](http://jsfiddle.net/joshnh/Ly5kz/)

这是一个现场示例的链接：http: [//joshnh.com/2012/08/14/making-a-pure-css-featured-image-slider/#step1](http://joshnh.com/2012/08/14/making-a-pure-css-featured-image-slider/#step1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T02:44:02.340

这不是填充的工作原理。如果您的内容被强制超出框的边缘，它将继续播放而不会被背景覆盖。填充物是盒子内部周围的空间。*适合*框的所有文本与框边缘之间将有 x 量的空间。

为了拥有类似填充的遮罩/框/边框，您需要有一个具有边框和填充的包装 div，并将您的其他样式添加到 pre。

[http://jsfiddle.net/ktJ3g/](http://jsfiddle.net/ktJ3g/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T01:09:45.260

pre 元素是 white-space:nowrap 默认情况下，你需要设置某种 wrap 属性。以下是您的选择：[http ://www.w3schools.com/cssref/pr_text_white-space.asp](http://www.w3schools.com/cssref/pr_text_white-space.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T01:26:42.563

试试 white-space: pre-wrap; - 另外，我认为您通过使用 lang 属性将内容识别为包含 html 或 css 来滥用它。我相信应该用它来表示内容的语言编码，即en_US、fr_FR等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-30T04:49:21.957

基于 prism.js 的`<pre>`元素的注释：

您可以使用`normalize-whitespace`插件：

```
import 'prismjs/plugins/normalize-whitespace/prism-normalize-whitespace'; 
```

*   [https://prismjs.com/plugins/normalize-whitespace/](https://prismjs.com/plugins/normalize-whitespace/)

*   [https://github.com/PrismJS/prism/tree/master/plugins](https://github.com/PrismJS/prism/tree/master/plugins)

# java - JRuby中的双括号初始化

> ID：12255599
> 
> 赞同：1
> 
> 时间：2012-09-04T01:03:46.967
> 
> 标签：java, jruby, double-brace-initialize

我正在尝试 JRuby，并试图弄清楚如何使用 Java 的[双括号初始化](https://stackoverflow.com/questions/1372113/meaning-of-new-class-initialization-idiom/1372124#1372124)。但是，语法如何并不那么明显。

为了简单起见，下面的 Java 代码将创建一个包含元素的列表：

```
List<String> foo = new ArrayList<String>() {{
  add("bar");
}}; 
```

**这在 JRuby 中是否可行，如果可以，*如何实现*？**

`ArrayList.new {{}}`没有意义并导致错误：`odd number list for Hash.puts ArrayList.new({{}})`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:16:10.793

我认为没有办法在 JRuby 中进行双花括号初始化。但是对于像 ArrayList Initialization 这样的事情，JRuby 提供了快捷方式，如下例所示。

详情请查看[https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby](https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby)。

```
>> a = ArrayList.new [:a, :b, "c", "d"]
#<Java::JavaUtil::ArrayList:0x65a953>
>> a[0]
:a
>> a[1]
:b
>> a[2]
"c"
>> a[3]
"d"
>> a[4]
nil 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:05:49.510

虽然不是对这个问题的直接回答，但我是否添加了这个，因为这是一种让一些逻辑确定每个元素将是什么的便捷方式。这是通过将 Ruby 数组传递给 ArrayList 的构造函数来完成的。

```
ArrayList.new Array(10) {|i| i*i} 
```

感谢[Mark Thomas](https://stackoverflow.com/users/182590/mark-thomas)帮助我思考。:)

# c++ - 使用 C++ 释放内存

> ID：12255600
> 
> 赞同：1
> 
> 时间：2012-09-04T01:03:58.870
> 
> 标签：c++, memory

我写了以下方法：

```
void ShowInfo::show_time(){
  time_t rawtime;
  struct tm *ti;

  time ( &rawtime );
  ti = localtime ( &rawtime );

  std::cout << std::setw(2) << ti->tm_hour << ":"
            << std::setw(2) << ti->tm_min << ":"
            << std::setw(2) << ti->tm_sec;
} 
```

是否需要删除 struct ti 以释放内存，或者方法结束时将其删除？

如果有必要删除它，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T01:09:35.587

您应该使用文档检查这一点。谷歌粗略搜索表明：

[http://en.cppreference.com/w/cpp/chrono/c/localtime]：

> **返回**：成功时指向静态内部 std::tm 对象的指针

[http://msdn.microsoft.com/en-us/library/aa246456(v=vs.60).aspx]

> **备注**：gmtime、mktime 和 localtime 都使用单个静态分配的 tm 结构进行转换。

所以似乎没有动态分配，因此不需要将内存释放回系统。

除了实际答案之外，您还应该了解内存管理**是**函数接口的一部分，并且必须记录在案。文档是查找此信息的最简单的地方。特别是如果您必须释放内存，文档肯定会指出这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T01:09:12.823

不，没有必要。该结构`struct tm`是静态分配的，因此不应该`free`调用。

# android - 让 admob 高于 actionbarsherlock

> ID：12255602
> 
> 赞同：4
> 
> 时间：2012-09-04T01:04:06.967
> 
> 标签：android, admob, actionbarsherlock

我想在同一个 android 应用程序中使用 AdMob 和 ActionBarSherlock，但我没有设法将 AdMob 放在我的屏幕顶部（Sherlock ActionBar 上方）。

有人遇到过类似的问题吗？有谁知道一些解决方法？

谢谢。

我的总体布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" > 
<include layout="@layout/admob"/> 
<TabHost
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@android:id/tabhost"
 android:layout_width="match_parent"
 android:layout_height="match_parent">
 <LinearLayout..... 
```

我的 admob 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.ads.AdView xmlns:android="http://schemas.android.com/apk/res/android"
                    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
                    android:id="@+id/adView"
                    android:layout_height="wrap_content"
                    ads:adUnitId="123456"
                    ads:adSize="BANNER" 
                    android:layout_width="match_parent"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:13:53.237

我使用 ActionBarSherlock 作为包装器，以下将广告放在操作栏上方：

```
private ActionBarSherlock sherlock = ActionBarSherlock.wrap(this);

@Override
public void onCreate(Bundle savedInstanceState)
{
    /* ... set up layout here ... */

    adView = new AdView(this, AdSize.BANNER, "deadbeefmeat");

    ViewParent parentView = appView.getParent();
    do
    {
        parentView = parentView.getParent();
    } while(!(parentView instanceof LinearLayout));

    ((LinearLayout)parentView).addView(adView, 0);

    AdRequest adRequest = new AdRequest();
    adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
    adView.loadAd(adRequest);
}

// All setContentView methods are overridden because ActionBarSherlock has to modify the view
@Override
public void setContentView(int layoutResID)
{
    // Don't call super!
    sherlock.setContentView(layoutResID);
}

@Override
public void setContentView(View view)
{
    // Don't call super!
    sherlock.setContentView(view);
}

@Override
public void setContentView(View view, LayoutParams params)
{
    // Don't call super!
    sherlock.setContentView(view, params);
} 
```

# c++ - 在非常大的算术系列中添加数字的最快方法？

> ID：12255603
> 
> 赞同：1
> 
> 时间：2012-09-04T01:04:06.820
> 
> 标签：c++

在算术级数中添加数字时，我试图尽可能减少开销。我说的是一个非常大的集合，例如从 1 到 2^128。有什么快速的方法吗？如果是这样，如果不实际使用等差数列和公式，那会是什么？作为参考，从 1 到 2^128 的总和是：

57896044618658097711785492504343953926464851149359812787997104700240680714240

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:08:59.093

唯一快速的方法是使用公式：

```
n * (n+1) / 2 
```

任何其他方法（天真地添加）都将花费太长时间！（即使你在超级计算机上有一百万年，你也不会完成计算）。

但是，对于这么大的整数，您不能使用普通整数。您将需要使用一个大整数对象。所以得到一个大整数库，例如。[谷歌搜索](https://www.google.com/#q=c%2B%2B+bigint)，[https://mattmccutchen.net/bigint/](https://mattmccutchen.net/bigint/)。

注意：256 位整数可能能够将结果保持在该比例附近，但对于 256 位整数是否容易获得以及如何使用它们，这完全取决于平台和编译器。

# qt - 如何在qt中维护一个tcp套接字？

> ID：12255605
> 
> 赞同：0
> 
> 时间：2012-09-04T01:04:28.017
> 
> 标签：qt, sockets, networking

我用以下代码在服务器端重载了​​ QTcpServer 的incomingConnection 函数

```
void CtiServer::incomingConnection(int socketDescriptor)
{
    qDebug() << QString("CtiServer thread id = %1, thread = %2").arg(QString::number((uint)QThread::currentThreadId(), 16)).arg(QString::number((qlonglong)QThread::currentThread(), 16));
    ServerThread *thread = new ServerThread(socketDescriptor, this);
    connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));
    thread->start();
} 
```

然后在每个线程中，我创建了一个名为 ServerSocket 的新 QTcpSocket 子类对象，

```
void ServerThread::run()
{
    qDebug() << QString("ServerThread thread id = %1, thread = %2").arg(QString::number((uint)QThread::currentThreadId(), 16)).arg(QString::number((qlonglong)QThread::currentThread(), 16));
    serverSocket = new ServerSocket();
    serverSocket->setSocketDescriptor(socketDescriptor);
    connect(serverSocket, SIGNAL(readyRead()), serverSocket, SLOT(handleRequest()));
    serverSocket->waitForDisconnected(-1);
} 
```

问题是`serverSocket->waitForDisconnected(-1)`对还是错。

我正在尝试使用此语句维护套接字，util client 发送一些消息以通知服务器套接字应该关闭连接，以便我可以在服务器和客户端之间保持长连接。

结果，我可以连接断开的信号并知道客户端何时关闭，而无需费心设置一些心跳协议来检测客户端是还活着还是死了。

或者我应该设置一个心跳协议并使用如下代码：

```
sock.disconnectFromHost();
sock.waitForDisconnected(); 
```

而不是`sock.waitForDisconnected(-1)`.

# jquery - Why is call to jQuery UI button breaking my pages scripts?

> ID：12255612
> 
> 赞同：1
> 
> 时间：2012-09-04T01:06:10.577
> 
> 标签：jquery, jquery-ui, button

# What I'm doing:

I'm using a three jQuery UI widgets plus a separate jQuery based navigation menu.

You can see the three UI widgets working together here:

[http://www.dominornovus.com/jquery-test-environment/](http://www.dominornovus.com/jquery-test-environment/)

(link features datepicker, selectmenu and button jQuery UI widgets)

# The problem:

When I copy my working code to another website, the call to the jQuery UI button randomly breaks all jQuery on my page (including the separate jQuery based navigation menu):

[http://www.dominornovus.com/killyliss-country-house/test/](http://www.dominornovus.com/killyliss-country-house/test/)

The only difference between the pages found at the two links I've provided is the jQuery based navigation menu.

**Please note that even when I delete all code relating to the navigation menu, the call to the button UI widget still breaks jQuery on my page.**

# My question

Can anyone deduce from the two pages what difference exists and why one page fails on the button UI call but the other page doesn't?

**I can't find any discernible difference between the two pages and yet they behave differently. One breaks; the other doesn't.**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:54:51.853

After further research, this turned out to be a WordPress issue so I posted the issue to WordPress Answers instead.

Simply put, I was enqueueing jQuery twice.

Here's my final working code (added to theme's function.php file):

```
 //https://wordpress.stackexchange.com/questions/64062/cannot-enqueue-jquery-correctly-using-google-cdn
    //http://codex.wordpress.org/Function_Reference/wp_enqueue_script#Load_a_default_WordPress_script_from_a_non-default_location

    function my_scripts_method() {
        wp_deregister_script( 'jquery' );
        wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.12/jquery.min.js');
        wp_enqueue_script( 'jquery' );
        wp_enqueue_style( 'uicss', '(path_ to_script_location)/my-custom-style.css' );    
        wp_enqueue_script( 'uisel', 'http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/ui.selectmenu.js' );
        wp_enqueue_style( 'uicss2', 'http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/ui.selectmenu.css' );
    }    

    //add_action('wp_enqueue_scripts', 'my_scripts_method'); // selectmenu would not work targeting wp_enqueue_scripts
    add_action('wp_head', 'my_scripts_method'); //use wp_head instead 
```

The WordPress Answers thread can be read here: [https://wordpress.stackexchange.com/questions/64062/cannot-enqueue-jquery-correctly-using-google-cdn](https://wordpress.stackexchange.com/questions/64062/cannot-enqueue-jquery-correctly-using-google-cdn)

After some time, I've figured out how to successfully apply the selectmenu widget to WordPress.

WordPress installations come complete with a bundle of jQuery scripts.

The fnagel selectmenu will not work the default bundle of jquery and jquery-ui scripts and instead has to be referenced externally using Google CDN.

I had to deregister the default local jQuery library for WordPress, enqueue the Google CDN and then enqueue the selectmenu script and CSS.

# ios - 如何在 Storyboard 中关闭 NavigationController？

> ID：12255618
> 
> 赞同：2
> 
> 时间：2012-09-04T01:07:01.340
> 
> 标签：ios, storyboard, navigationcontroller

我到处寻找这个，所以作为最后的手段，我想我应该问这个问题。

我在 XCode 中使用 Storyboard，并将导航控制器作为我的初始视图。这个导航控制器的根视图是一个表格视图。在这个表格视图中，我在导航栏中有一个按钮，它通过模式 segue 将视图水平翻转到导航控制器。这个控制器的根视图是我的地图视图。现在，当我想关闭这个地图视图时，`[self dismissViewControllerAnimated:YES completion:nil]`它不起作用。如果我取出导航控制器，它会这样做。所以，我猜dismissViewController 被传递给导航控制器，而不做任何事情。我知道我可以为导航控制器实现一个类来处理调用并将其传递，但​​除非绝对必要，否则我不想这样做。

所以要解决这个问题：

1.  我需要一种使用水平翻转动画在表格视图和地图视图之间切换的方法，反之亦然。

2.  我需要在两个视图中都有一个导航控制器，我可以是相同的，也可以是不同的。我似乎找不到使用相同方法的方法，因为任何转换都是不进行水平翻转转换的推动。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:50:10.470

`self`你打电话的时候是谁`[self dismissViewControllerAnimated:YES completion:nil]`？

此消息的接收者需要是呈现您要关闭的模态视图控制器的视图控制器。如果你在呈现的视图控制器上调用它，或者（在容器视图控制器的情况下，`UINavigationController`它管理的视图控制器之一），UIKit 将尝试做正确的事情，但不会总是成功。

假设`self`您引用的是包含地图视图的视图控制器，您可以获得`presentingViewController`属性以获取您应该调用的对象`dismissViewControllerAnimated:completion:`。（如果您需要获取介于两者之间的导航控制器，请使用该`navigationController`属性。）

# android - Modifying init.rc to add my own android native service

> ID：12255621
> 
> 赞同：3
> 
> 时间：2012-09-04T01:07:54.383
> 
> 标签：android, init

I'm working on a Freescale i.mx53 board with Android 2.3.3, and I'm trying to add my own android native service into init.rc so that it runs on boot. I've tried following the guide at [http://www.androidenea.com/2009/08/init-process-and-initrc.html](http://www.androidenea.com/2009/08/init-process-and-initrc.html), including their example service code. However, I'm building the example service code into an ARM binary with android ndk instead.

The example service works if I run it manually in an adb shell. However, when I put it at the end of src/system/core/rootdir/init.rc nothing seems to happen.

I look at the init.rc in the device root directory after booting up and it isn't the same as the init.rc in the source. Notably, the lines that I've added in aren't there.

What could be wrong?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T03:01:20.097

This cannot be done from shell. `init.rc` is part of `ramdisk` and not `system` partition. So at bootup, the `init.rc` picked up will be from ramdisk. So whatever changes you do to `init.rc` will not get reflected.

~~AFAIK Only way is to build the ROM and reflash~~

Check this [post](https://stackoverflow.com/questions/9768103/make-persistent-changes-to-init-rc), it is related, might help

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:24:13.713

when you are using emulator, add option "-ramdisk out/target/.../ramdisk.img" and the init.rc on the emulator will use the customized version. And in my case, you also need to add "class " in the option.

# c++ - 为什么浮点数在 64 位系统上不是双精度数？

> ID：12255625
> 
> 赞同：11
> 
> 时间：2012-09-04T01:08:21.277
> 
> 标签：c++, types

考虑到`int`在 32 位系统上是 4 个字节，在 64 位系统上是 8 个字节，为什么`float`不一样对待？为什么在 64 位系统上 a 的大小是`double`!= a的大小？`float`考虑到当我声明一个时选择了最好的本机整数类型`int`（这会导致[更高的性能](https://stackoverflow.com/q/1941826/368599)），不应该发生同样的情况`float`（这也会导致性能提高）吗？

相关问题：在 32 位系统和64 位系统上声明一个类型`my_float`（请原谅这个名字！）是一个坏主意吗？`float``double`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-04T01:11:19.077

你的问题是基于一个错误的前提。在大多数现代 64 位系统上，`int`仍然是 4 个字节。当很少需要这么大的整数时，为什么要消耗两倍的内存和两倍的内存带宽？在典型的现代 64 位系统上，64 位整数的数学运算并不比 32 位整数的数学运算快，因此没有任何好处。

# ios - iOS App SQLite 数据库结构变更

> ID：12255626
> 
> 赞同：1
> 
> 时间：2012-09-04T01:08:34.450
> 
> 标签：ios, ipad, sqlite

我正在更新一个使用 sqlite 数据库的旧 iOS 应用程序。我更改了数据库结构，将列添加到现有表中。现在，我正在我的设备上对其进行测试。如果我从 iPad 上清除我的旧应用程序，然后在其上运行这个新的更新版本，它工作正常。但是如果我已经在 ipad 上安装了旧版本并测试了这个更新版本，它会以某种方式使用旧数据库而不是更新的数据库。有人可以帮我为什么这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:16:37.683

我的猜测并尝试为您做一个简单的答案是这样的。您可能更新了项目文件中的数据库 - 这意味着当您运行它时，您的新数据库将存在于包中。捆绑包中的文件无法更新，因此通常的做法是将数据库从捆绑包中复制出来并将其存储在 ios 沙箱中的某个位置。我通常使用文档目录来保持简单。

最有可能发生的情况是，当您在以前的安装中运行它时，它会看到该文件已经复制到设备上，因此它不会触及它，但是在新安装时，它可能会看到数据库丢失，因此它会复制它在那里，这就是为什么在新安装上它工作正常但现有安装却不行的原因。

在应用程序委托或您的根视图控制器中查找检查现有数据库并在启动时根据需要复制数据库的代码。

如果您需要更新现有安装的数据库，则需要强制进行复制。

但请注意，如果您在现有数据库中有数据，如果它很重要，请不要覆盖它。如果重要数据存储在那里，您必须做一个小游戏来获取数据并导入新数据库，或者更简单的方法是在现有数据库上运行数据库模式修改命令，所以它是相同的.

同样，请注意并在运行这些命令之前复制本地数据库文件，以防万一。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T02:36:05.807

在 iOS 中，SQLLite 数据库实际上只是一个文件。当您使用旧应用程序时，它会在数据库文件中创建架构。当您加载新应用程序时，数据保持不变。如果要使用新模式，则必须检测旧模式并更新现有数据。我相信有记录的方法来处理这个问题。Bryanmac 的问题参考似乎是一个很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T04:48:31.363

当您安装应用程序的新版本时，iOS 实际上会将其安装在一个新目录中，然后将文档文件夹的内容从旧版本复制到新版本中的文件夹。如果您只想使用您的新数据库，最好的方法是重命名此数据库或将其存储在应用程序文档存储中的不同目录中。

这是有关在 iOS 上更新 An sqlite CoreData 后备存储的相关文章：http: [//www.musicalgeometry.com/? p=1736](http://www.musicalgeometry.com/?p=1736)

# android - Android 的 ListAdapter.getView() 视图重用行为问题

> ID：12255633
> 
> 赞同：0
> 
> 时间：2012-09-04T01:09:13.217
> 
> 标签：android, android-widget, android-listview

我有一个 ListView，它显示一个项目列表，每个项目都有一个图标和一些文本。

我正在使用 ListAdapter.getView() 方法的“convertView”参数，在参数为非空时更改现有视图而不是创建新视图。

我曾期望 ListView 仅在它们滚动出可见视口后才能回收旧视图，但情况似乎并非如此。似乎 ListView 在每次调用 ListAdapter.getView() 时的“convertView”参数中提供了相同的对象。单个视图被渲染到屏幕上，然后在下一次调用 getView() 时再次发送。

这对我来说是一个重大问题，因为我希望修改以前渲染的视图。我有一个后台线程来检索项目的图标，这需要“相当长”的时间，并且在 ListAdapter.getView() 视图呈现代码中放置的用户界面负担是不可接受的。

有没有办法让 ListView 不重用当前显示在屏幕上的视图？我想实现视图重用的性能/效率增益，并能够在后台线程中加载图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:32:57.380

我认为您有一段时间遇到过类似的问题：[回收时在列表视图或网格视图中可见一段时间的旧项目](https://stackoverflow.com/questions/11961278/old-items-visible-a-while-in-listview-or-gridview-when-recycling)

您必须在 getView() 的开头“重置”列表的回收项。将它们设置回进度条或不可见，无论初始状态是什么。直到他们获取正确的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:08:58.213

我发现问题在于 Android 正在创建一个额外的、从未渲染过的临时视图，用于在某些条件下进行布局/测量。我认为这个视图被渲染到屏幕上的假设是不正确的。

# jquery - 关注第一个类名元素

> ID：12255634
> 
> 赞同：3
> 
> 时间：2012-09-04T01:09:18.427
> 
> 标签：jquery

我有一个验证表格。当 php 发现错误时，发送带有“错误”类的输入......例如：

```
<input type='text' name='login' class='error'/>
<input type='password' name='pass'/>
<input type='text' name='email' class='error'/> 
```

我的问题是，如何使用 jquery 将焦点设置在第一个“错误”类元素上？如果我试试这个：

```
<script type='text/javascript'>
    if($(".error").length != 0){$(".error").focus();}
</script> 
```

始终将焦点放在最后一个元素上。感谢帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T01:10:43.217

您可以使用`:first`选择器。

```
$("input.error:first").focus() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T01:12:31.140

有多种方法可以做到这一点。

```
$('.error:first').focus()

$('.error').first().focus()

$('.error').eq(0).focus() 
```

您可以参考以下文件：

*   [http://api.jquery.com/first-selector/](http://api.jquery.com/first-selector/)
*   [http://api.jquery.com/first/](http://api.jquery.com/first/)
*   [http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

# javascript - 带有 IIFE 的 Javascript MVC 和潜在的依赖问题

> ID：12255636
> 
> 赞同：0
> 
> 时间：2012-09-04T01:09:29.220
> 
> 标签：javascript, oop, model-view-controller, observer-pattern, iife

我正在尝试创建自己的简单且小型（观察者）MVC 示例，并尝试使用 IIFE 为我的模型和控制器创建隐私。由于控制器在调用时需要模型对象，因此我不相信这种方法。

我创建了一个工作小提琴，展示了我正在尝试做的事情，但是在这种情况下首先调用的模型依赖于模型。我想将控制器和模型放在不同的文件中以便于管理，但由于这种依赖性，我不知道我是否可以这样做。

有没有办法解决这个问题或对这类事情有更好的解决方案？

[工作示例](http://jsfiddle.net/CSuBA/)

（代码摘录）

```
var CalcController = (function (model) {
    console.log('CalcController created');
    var controller = {};
    _model = model;

    controller.changeModel = function(){
        console.log('CalcController changeModel()'); 
        _model.updateModel();        
    };

    controller.init = function(){
        console.log('CalcController.init');
   }
    return controller;

})(CalcModel); 
```

# c++ - RapidXML 空指针

> ID：12255643
> 
> 赞同：0
> 
> 时间：2012-09-04T01:10:47.740
> 
> 标签：c++, xml, memory, memory-leaks, rapidxml

我以一种非常糟糕的方式使用 rapidXML 获取配置文件的值。

```
xml_document<> doc;
doc.parse<parse_full>(buffer);
int a = atoi(doc.first_node("master")->first_node("profile")->first_node("width")->value()); 
```

如果节点不存在“first_node”返回0，那么“->value()”会崩溃。返回一个新的 xml_node 将修复崩溃，但是内存泄漏呢？

这是 rapidXML 与新旧返回的功能：

```
 xml_node<Ch> *first_node(const Ch *name = 0, std::size_t name_size = 0, bool case_sensitive = true) const
    {
        if (name)
        {
            if (name_size == 0)
                name_size = internal::measure(name);
            for (xml_node<Ch> *child = m_first_node; child; child = child->next_sibling())
                if (internal::compare(child->name(), child->name_size(), name, name_size, case_sensitive))
                    return child;
            return new xml_node<Ch>(node_document);
            //return 0;
        }
        else
            return m_first_node;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:13:19.740

您应该使用异常，例如：

```
int a;
try
{
    xml_document<> doc;
    doc.parse<parse_full>(buffer);
    a = atoi(doc.first_node("master")->first_node("profile")->first_node("width")->value());
}
catch(NodeNotExists &ex)
{
    // process error condition
} 
```

此外，如果不想更改 rapidxml 代码，请使用如下包装函数：

```
template<typename T>
T* notnull(T* arg)
{
    if (arg == 0)
        throw NodeNotExists();
    return arg;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T15:48:41.870

扩展仇恨引擎的答案，我创建了一类静态辅助函数来通过包装节点值访问来处理这种情况。[在这里](https://stackoverflow.com/a/19570357/1329160)查看我的答案。您可以在此基础上进行扩展或追求更多类似 xpath 样式的节点访问（我不相信目前是 RapidXML 内置的，但[其他人则这样做](https://stackoverflow.com/a/9387612/1329160)）。

编辑：您可以创建一个包装器函数，它采用简单的类似 xpath 的路径，并将其与我的一个包装器结合起来，得到类似...

```
int a = GetNodeInt(GetFirstNodePath(doc, "master/profile/width"), 0); 
```

GetNodeInt 和 GetFirstNodePath 的定义如下...

```
 int GetNodeInt(rapidxml::xml_base<>* node, int DefaultValue)
    {
        int temp;
        try
        {
            if (node == 0) return DefaultValue;
            if (sscanf(node->value(), "%d", &temp) != 1) return DefaultValue;
            return temp;
        }
        catch (...) { return DefaultValue; }
    }

    // Find node with simple path from current node such as "first/second/third"
    rapidxml::xml_node<>* GetFirstNodePath(rapidxml::xml_node<>* root, const char *path)
    {
        xml_node<>* node = root;
        char* last = (char*)path; // only using this pointer to read
        char* cur = last;
        if (cur == 0 || root == 0) return 0;
        while (node)
        {
            if (*cur == '/' || *cur == 0)
            {
                if (cur != last) node = node->first_node(last,cur-last);
                if (*cur == 0) break;
                last = cur + 1;
            }
            ++cur;
        }
        return node;
    } 
```

现在这段代码还没有经过彻底的测试，但给了你大致的想法。

# sql-server - sql server 选择性能指南与字符串

> ID：12255646
> 
> 赞同：0
> 
> 时间：2012-09-04T01:11:21.527
> 
> 标签：sql-server

**这与PK无关！**

我想知道选择时哪个会更快：

```
select * from stuff where someguidcol = '83ce47d2-ac4c-488a-863c-c5f31e8f87aa' 
```

或者这个

```
select * from stuff where somestrcol = 'DS3DvDVIPEG1X8Ui7U84DA' 
```

*somestrcol 数据类型将是 char(22)*

*将应用非聚集索引，可能......*

# java - android OnSensorChanged() 响应慢

> ID：12255647
> 
> 赞同：3
> 
> 时间：2012-09-04T01:11:34.463
> 
> 标签：java, android, android-sensors

我有这样的代码实现：

```
 //register sensor in OnResume
    mSensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_UI);
    mSensorManager.registerListener(this, magnetometer, SensorManager.SENSOR_DELAY_UI);

    public void onSensorChanged(SensorEvent event) {

    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
        mGravity = event.values;
    if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
        mGeomagnetic = event.values;

    if (mGravity != null && mGeomagnetic != null) {
        float R[] = new float[9];
        float I[] = new float[9];
        boolean success = SensorManager.getRotationMatrix(R, I, mGravity, mGeomagnetic);

        if (success) {
            float orientation[] = new float[3];
            SensorManager.getOrientation(R, orientation);

            azimuth = (int)( Math.toDegrees( orientation[0] ) + 0.5 );    // orientation contains: azimuth, pitch and roll
            pitch = (int)( Math.toDegrees( orientation[1] ) + 0.5 );
            roll = (int)( Math.toDegrees( orientation[2] ) + 0.5 );

            // output azimuth, pitch and roll
        }
    }
} 
```

上述代码在 Galaxy Nexus 单元中运行良好，但在 nexus 平板电脑中出现问题（方位角、俯仰和滚动的更新响应不佳，有时需要 5 到 8 秒）。

我已经检查过 OnSensorChanged() 的调用运行良好，但是“if(success)”测试并不总是成功，这会导致这个问题。

我通过输出布尔变量“成功”来测试它：

*   在 Galaxy Nexus 中，真假比例约为 1:1。
*   在 Nexus 平板中，真假率差异很大，可高达 >20 : 1。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-25T04:08:11.440

问题在于以下代码：

```
if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) mGravity = event.values; if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD) mGeomagnetic = event.values; 
```

它应该是：

```
if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) mGravity = event.values.clone(); 
if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD) mGeomagnetic = event.values.clone(); 
```

否则“getRotationMatrix”方法将频繁返回“false”。但我不确定为什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:04:42.347

这可能是因为有一个固定的 SensorEvent 池，如果您直接使用其中的数据，它可能会从您下面更改，但通过克隆它，您可以随时使用该数据。

# php - 通过 Zend_Http_Client_Adapter_Curl 发布大数据

> ID：12255649
> 
> 赞同：1
> 
> 时间：2012-09-04T01:11:48.987
> 
> 标签：php, zend-framework, post, zend-http-client

我使用 `$site->setParameterPost`and`$site->request('POST')->getBody()`来将数据发布到动作中，其中一个参数`setParameterPost`是非常大的数据，并且它不通过 post 方法发送数据。我能做些什么？

```
 $config = array('adapter'   => 'Zend_Http_Client_Adapter_Curl' );

 $site = new Zend_Http_Client('http://somewhere.tld/api/news', $config);
 $site->setParameterPost(array(
        'news' => $news, //very big data, without it data send properly
        'modelName' => 'somemodel',
        'method' => 'somemethod',
        'key' => 'something',
        'siteName' => $sitename,
            ));

$sitedata = $site->request('POST')->getBody(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:16:33.430

我应该使用流请求，只有 PUT 方法才允许。

```
$http_client = new Zend_Http_Client ('http://something.some/thing');
$http_client->setConfig (array (
    'adapter' => 'Zend_Http_Client_Adapter_Curl',
    'timeout' => 180
));

$file = fopen ('news.dat', 'r'); // put all your news to the file beforehand
$http_client->setRawData ($file);
$http_client->setParameterPost (array (
    'modelName' => 'somemodel',
    'method' => 'somemethod',
    'key' => 'something',
    'siteName' => $sitename
));
$response = $http_client->request ('PUT'); 
```

在服务器端，您可以通过以下方式访问您的大数据

```
fopen ("php://input", "r"); 
```

# visual-studio-2010 - 如何有选择地将一个项目的一部分添加到另一个项目中？

> ID：12255651
> 
> 赞同：0
> 
> 时间：2012-09-04T01:11:56.413
> 
> 标签：visual-studio-2010, import

我希望将此解决方案中的以下项目添加到另一个解决方案中：

![尝试导出](../Images/2ade1626a44f5e3ddce7467213711ab7.png)

（所选项目是我要导入的）

我选择了这些项目，然后右键单击 > 复制，但是当我粘贴这些项目时，我无法粘贴任何内容：

![无法粘贴](../Images/494a57a2885c7ab54a0619eb7da41aa8.png)

是否可以仅将 allowed.cs、theme.cs、theme2.cs、themebase.cs 导入到 EmailSpitter？我还想复制 Allowed.cs 中的所有内容（即里面的设计和代码）

我尝试一次移动一个项目，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:24:25.233

通常，将它们拉入类库并从两个项目中添加对它的引用是一个更好的主意。

这将允许您共享相同的代码，而不会重复。随着时间的推移，这更好地维护，因为您只有一个地方的代码，所以您可以在一个地方解决您的问题。

# php - 使用 PDO 在 Mysql 中更新多个值的最有效方法

> ID：12255654
> 
> 赞同：1
> 
> 时间：2012-09-04T01:12:12.510
> 
> 标签：php, mysql, pdo

鉴于这种类型的用户表结构，您在表中存储了许多用户值（例如电话号码、首选项、联系信息）：

```
Table: User ID | Key | Value

$values = [
    1 => 'A value for key 1',
    2 => 'Hello',
    8 => 'Meow',
]

// Update values
$stmt = $pdo_db->prepare('
    INSERT INTO table (UID, KEY, VALUE)
    VALUES            (:UID, :KEY, :VALUE)
    ON DUPLICATE KEY UPDATE VALUE = :VALUE');

foreach ($values as $key => $value) {
    $stmt->bindParam(':KEY', $key);
    $stmt->bindParam(':VALUE', $value);
    $stmt->execute();
} 
```

如果您有 150 个不同的对，则每次更新有 150 个查询。我将如何优化这段代码？制作一个巨大的 SQL 会让 mysql 方面的工作更容易吗？我应该考虑改变结构本身吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T01:14:48.123

以此查询为指导-

```
INSERT INTO example
  (example_id, name, value, other_value)
VALUES
  (100, 'Name 1', 'Value 1', 'Other 1'),
  (101, 'Name 2', 'Value 2', 'Other 2'),
  (102, 'Name 3', 'Value 3', 'Other 3'),
  (103, 'Name 4', 'Value 4', 'Other 4'); 
```

允许您一次插入多条记录。

如果您知道哪些记录是新的，则可以加快将这些记录分开的速度`INSERT`——mysql 必须花费额外的时间来协调`ON DUPLICATE... UPDATE`其他记录。

还要考虑使用`UPDATE`，或者`REPLACE`如果您只是更新。

# xml - Notepad++ 使用 XML 标记自动关闭按折叠缩进

> ID：12255656
> 
> 赞同：1
> 
> 时间：2012-09-04T01:12:16.003
> 
> 标签：xml, plugins, autocomplete, notepad++, auto-indent

我正在寻找一种在 Notepad++ 中编码 XML（特别是 mxml）的方法，以便它遵循“Indent by Fold”插件的行为 - 在开始标记后按“enter”后缩进 - 但也包括自动标记关闭类似到“XML 工具”插件提供的内容。

同时启用两者的问题是我从以下内容开始：

```
<hello>|</hello> 
```

（注意：“|”字符代表光标）

但在按下“Enter”后，我得到如下所示的内容：

```
<hello>
   |</hello> 
```

我正在寻找的是看起来像这样的东西：

```
<hello>
   |
</hello> 
```

任何帮助将非常感激。

**编辑：**这个问题现在存在于[超级用户上](https://superuser.com/questions/471596/notepad-indent-by-fold-with-xml-tag-auto-close)

# asp.net-mvc-3 - 有没有办法在 ASP.NET MVC3 应用程序中设置可能与服务器时间不同的本地时间？

> ID：12255670
> 
> 赞同：1
> 
> 时间：2012-09-04T01:15:19.247
> 
> 标签：asp.net-mvc-3, web-config, app-config

我有一个 MVC3 应用程序，它在本地显示当前时间，但在上传到主机时显示服务器时间。app.config 或 web.config 中是否有任何方法可以将我的本地时间设置为在我的应用程序上传到服务器后显示？

更新：我正在寻找一种在全球范围内执行此操作的方法，而无需在每次引用 DateTime 时返回并更改代码。无法在全局范围内为应用程序设置时间似乎有点不切实际。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:43:30.483

在 web.config 中设置时区信息，并根据 web.config 的时区转换您的时间。

```
 DateTime timeUtc = DateTime.UtcNow;

            TimeZoneInfo cstZone = TimeZoneInfo.FindSystemTimeZoneById(timezoneid); // timezoneid from web.config
            DateTime cstTime = TimeZoneInfo.ConvertTimeFromUtc(timeUtc, cstZone); 
```

cstTime 是你想要的。

# programming-languages - 从许多不同网站上筛选数据的最佳方法

> ID：12255671
> 
> 赞同：0
> 
> 时间：2012-09-04T01:15:47.760
> 
> 标签：programming-languages, html-parsing, screen-scraping

我希望从许多不同的地方政府网站上抓取公共数据。此数据未以任何标准格式（XML、RSS 等）提供，必须从 HTML 中提取。我需要抓取这些数据并将其存储在数据库中以供将来参考。理想情况下，抓取例程将循环运行，并且仅将新记录存储在数据库中。我应该有一种方法可以在每个网站上轻松地从旧记录中检测到新记录。

我的大问题是：实现这一目标的最佳方法是什么？我听说有人使用 YQL。我也知道一些编程语言也使解析 HTML 数据更容易。我是一名了解几种不同语言的开发人员，并希望确保我选择正确的语言和方法来开发它，以便于维护。随着网站在未来发生变化，抓取例程/代码/逻辑将需要更新，因此这很重要，这将相当容易。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:09:42.263

好吧，我会使用我自己的抓取库或相应的[命令行工具](http://videlibri.sourceforge.net/xidel.html)。

它可以使用无需任何实际编程即可抓取大多数网页的模板，将来自不同站点的相似数据标准化为规范格式，并验证没有任何页面更改其布局......

命令行工具不支持数据库，你需要编写一些东西......

（另一方面， [Webharvest](https://sourceforge.net/projects/web-harvest/)说它支持数据库，但它没有模板）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T02:48:16.437

我同意 David 关于 perl 和 python 的观点。Ruby 还具有机械化功能，非常适合刮擦。我唯一会远离的是 php，因为它缺乏抓取库和笨拙的正则表达式函数。就 YQL 而言，它对某些东西有好处，但对于抓取它实际上只是增加了一层可能出错的东西（在我看来）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T16:53:29.607

我会将 Perl 与模块`WWW::Mechanize`（Web 自动化）和`HTML::TokeParser`（HTML 解析）一起使用。

否则，我会将 Python 与 Mechanize 模块（网络自动化）和 BeautifulSoup 模块（HTML 解析）一起使用。

# javascript - 如何使用 jquery.css() 通过 hsla 设置背景颜色？

> ID：12255672
> 
> 赞同：4
> 
> 时间：2012-09-04T01:16:12.397
> 
> 标签：javascript, jquery, css

我似乎无法让 jQuery.css() 接受 hsla() 值。传递颜色值不是可接受的格式吗？这是我尝试过的：

```
// the below variable outputs a variable value with the following format
// hsla(131, 10%, 100%, 1.0)
var finalcolor = "hsla(" +colx +", " +coly +"%, " +"100%, " +"1.0)";

$('#target-div').css('background', finalcolor); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T01:24:37.397

它确实有效，但你的颜色只是白色！

在 firebug / chrome 调试器中检查生成的样式，并检查 HSL 2 RGB 转换器。 [http://serennu.com/colour/hsltorgb.php](http://serennu.com/colour/hsltorgb.php)

# php - 从 PHP 调用 MySQL 过程

> ID：12255676
> 
> 赞同：2
> 
> 时间：2012-09-04T01:17:05.527
> 
> 标签：php, mysql

例如，假设我要执行以下查询：

```
SELECT * FROM posts; 
```

因此，我写了以下内容：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `get_posts`(IN `zip` INT)
  LANGUAGE SQL
  NOT DETERMINISTIC
  CONTAINS SQL
  SQL SECURITY DEFINER
COMMENT ''
BEGIN
  SELECT * FROM posts WHERE posts.zip = zip;
END 
```

以下更改是我唯一要做的更改：

```
mysql_query("SELECT * FROM posts");
// to
mysql_query("CALL get_posts"); 
```

...然后我可以获取行等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T01:21:59.770

您还需要提供参数

```
mysql_query("CALL get_posts(11)"); 
```

另一个建议是对此使用**[`PDO`扩展](http://www.php.net/manual/en/book.pdo.php)**。

使用 PDO 的示例，

```
<?php
    $zipCode = 123;
    $stmt = $dbh->prepare("CALL get_posts(?)");
    $stmt->bindParam(1, $zipCode);
    if ($stmt->execute(array($_GET['columnName']))) 
    {
        while ($row = $stmt->fetch()) 
        {
            print_r($row);
        }
    }
?> 
```

这将保护您免受**[SQL 注入](http://bobby-tables.com/)**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T01:21:49.257

你的过程需要一个输入参数，所以用一个来调用它：

```
$result = mysql_query("CALL get_posts(12345)"); 
```

这将在成功调用时提供结果资源，然后您可以像普通查询一样运行 fetch 循环。

```
if ($result) {
  // fetch in a while loop like you would any normal SELECT query...
} 
```

# mule - 在 Mule ESB 3.3 中使用 cfx:proxy-client 使用 wsdl 服务 - 找不到服务的定义

> ID：12255681
> 
> 赞同：1
> 
> 时间：2012-09-04T01:18:33.737
> 
> 标签：mule

我正在尝试在 Mule ESB 3.3 中使用 cfx:proxy-client 使用 wsdl 服务，但不断收到此错误

```
org.apache.cxf.service.factory.ServiceConstructionException：找不到服务 {http://support.cxf.module.mule.org/}ProxyService 的定义。
    在 org.apache.cxf.wsdl11.WSDLServiceFactory.create(WSDLServiceFactory.java:139)
    在 org.apache.cxf.service.factory.ReflectionServiceFactoryBean.buildServiceFromWSDL(ReflectionServiceFactoryBean.java:383)
    在 org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:506)

```

下面是我的简单流程：

```
<flow name="spider-middleware" doc:name="spider-middleware">
    <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" path="salesforce" doc:name="HTTP"/>
    <cxf:proxy-client operation="getCustomerByID"
                      有效载荷=“正文”
                      wsdlLocation="http://localhost:4546/eplus-ws-fake/services/EplusCustomer/v1?wsdl"
                      enableMuleSoapHeaders="true"
                      doc:name="SOAP"/>
</流>

```

该服务被硬编码为返回一个客户 getCustomerByID(1)。请阐明我如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:21:24.473

我让它工作，但只是通过提供一个完整的 SOAP 信封而不仅仅是身体，即。使用`payload="envelope"`.

我还删除了`operation`and`wsdlLocation`属性，这对`proxy-client`. 我还必须添加`SOAPAction`和`Content-Type`属性，否则我在请求中使用的测试 Web 服务会阻塞。

这给出（使用来自 WebServiceX.net 的测试服务）：

```
<flow name="pureCxfProxyClient">
    <vm:inbound-endpoint path="test.in"
        exchange-pattern="request-response" />
    <set-property propertyName="SOAPAction"
        value="http://www.webservicex.net/getACHByZipCode" />
    <set-property propertyName="Content-Type" value="text/xml" />
    <http:outbound-endpoint address="http://www.webservicex.net/FedACH.asmx"
        exchange-pattern="request-response" >
        <cxf:proxy-client payload="envelope" />
    </http:outbound-endpoint>
</flow> 
```

`XMLStreamReader`注意我使用了一个 VM端点，它允许我处理`cxf:proxy-client`.

特别是，我需要执行以下操作：

```
 final XMLStreamReader xsr = (XMLStreamReader) result.getPayload();
    xsr.nextTag(); 
```

避免在`org.mule.module.xml.stax.ReversibleXMLStreamReader`.

总而言之，这非常激烈......`cxf:proxy-client`而且在单独使用时并没有带来太多价值。你实际上可以选择：

```
<flow name="pureCxfProxyClient">
    <vm:inbound-endpoint path="test.in"
        exchange-pattern="request-response" />
    <set-property propertyName="SOAPAction"
        value="http://www.webservicex.net/getACHByZipCode" />
    <set-property propertyName="Content-Type" value="text/xml" />
    <http:outbound-endpoint address="http://www.webservicex.net/FedACH.asmx"
        exchange-pattern="request-response" />
</flow> 
```

...并从零件中解放出来`XMLStreamReader`。

# perl - 将命令行参数传递给使用 Padre 运行的 Perl 程序

> ID：12255683
> 
> 赞同：3
> 
> 时间：2012-09-04T01:19:01.053
> 
> 标签：perl, padre

有没有办法将命令行参数传递给您从 Padre 菜单（“运行->运行脚本”）运行的 Perl 程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T02:07:53.853

在 Tools->Preferences->“Language - Perl5”下，设置“Script arguments”并保存。

或者在工具->首选项->高级下，查看“run_script_args_default”。设置一个值，然后保存。

无论哪种方式，他们都做同样的事情。您还可以使用“解释器参数”字段为 Perl 解释器设置标志。

# c - 通过示例了解限制限定符

> ID：12255686
> 
> 赞同：17
> 
> 时间：2012-09-04T01:19:37.730
> 
> 标签：c, c99, strict-aliasing, restrict-qualifier

关键字的`restrict`行为在 C99 中由 6.7.3.1 定义：

> 令 D 是一个普通标识符的声明，它提供了一种将对象 P 指定为指向类型 T 的限制限定指针的方法。
> 
> 如果 D 出现在一个块内并且没有存储类 extern，则让 B 表示该块。如果 D 出现在函数定义的参数声明列表中，则让 B 表示关联的块。否则，让 B 表示 main 块（或在独立环境中程序启动时调用的任何函数块）。
> 
> 在下文中，如果（在对 E 求值之前执行 B 的某个序列点）修改 P 以指向它以前指向的数组对象的副本，则称指针表达式 E 基于对象 P将改变 E.119 的值）请注意，“基于”仅针对具有指针类型的表达式定义。
> 
> 在每次执行 B 期间，令 L 为基于 P 具有 &L 的任何左值。如果 L 用于访问它指定的对象 X 的值，并且 X 也被修改（通过任何方式），则适用以下要求: T 不应是 const 限定的。用于访问 X 值的每个其他左值也应具有基于 P 的地址。就本子条款而言，修改 X 的每个访问也应视为修改 P。如果为 P 分配了一个指针表达式 E 的值，该指针表达式 E 基于与块 B2 关联的另一个受限指针对象 P2，则 B2 的执行应在 B 的执行之前开始，或者 B2 的执行应在任务。如果不满足这些要求，则行为未定义。

和其他人一样，我很难理解这个定义的所有复杂性。作为对这个问题的回答，对于第 4 段中的每个要求，我希望看到一组很好的示例，说明会违反要求的用法。本文：

[http://web.archive.org/web/20120225055041/http://developers.sun.com/solaris/articles/cc_restrict.html](http://web.archive.org/web/20120225055041/http://developers.sun.com/solaris/articles/cc_restrict.html)

用“编译器可能假设......”的方式很好地呈现规则；扩展该模式并结合编译器可以做出的假设，以及它们如何无法保持，每个示例都会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T03:05:50.347

下面，我将参考问题中链接到的 Sun 论文中的用例。

（相对）明显的案例是 mem_copy() 案例，它属于 Sun 论文（`f1()`函数）中的第二个用例类别。假设我们有以下两个实现：

```
void mem_copy_1(void * restrict s1, const void * restrict s2, size_t n);
void mem_copy_2(void *          s1, const void *          s2, size_t n); 
```

因为我们知道 s1 和 s2 指向的两个数组之间没有重叠，所以第一个函数的代码很简单：

```
void mem_copy_1(void * restrict s1, const void * restrict s2, size_t n)
{
     // naively copy array s2 to array s1.
     for (int i=0; i<n; i++)
         s1[i] = s2[i];
     return;
} 
```

`s2 = '....................1234567890abcde' <- s2 before the naive copy`
`s1 = '1234567890abcde....................' <- s1 after the naive copy`
`s2 = '....................1234567890abcde' <- s2 after the naive copy`

OTOH，在第二个功能中，可能有重叠。在这种情况下，我们需要检查源数组是否位于目标数组之前，反之亦然，并相应地选择循环索引边界。

例如，说`s1 = 100`和`s2 = 105`。然后，如果`n=15`，在复制后新复制的`s1`数组将超出源`s2`数组的前 10 个字节。我们需要确保我们首先复制了较低的字节。

`s2 = '.....1234567890abcde' <- s2 before the naive copy`
`s1 = '1234567890abcde.....' <- s1 after the naive copy`
`s2 = '.....67890abcdeabcde' <- s2 after the naive copy`

但是，如果`s1 = 105`和`s2 = 100`，那么首先写入低字节将超出源的最后 10 个字节`s2`，我们最终会得到一个错误的副本。

`s2 = '1234567890abcde.....' <- s2 before the naive copy`
`s1 = '.....123451234512345' <- s1 after the naive copy - not what we wanted`
`s2 = '123451234512345.....' <- s2 after the naive copy`

在这种情况下，我们需要先复制数组的最后一个字节，可能会倒退。代码将类似于：

```
void mem_copy_2(void *s1, const void *s2, size_t n)
{
    if (((unsigned) s1) < ((unsigned) s2))
        for (int i=0; i<n; i++)
             s1[i] = s2[i];
    else
        for (int i=(n-1); i>=0; i--)
             s1[i] = s2[i];
    return;
} 
```

很容易看出`restrict`修饰符如何为更好的速度优化、消除额外代码和 if-else 决策提供机会。

同时，这种情况对粗心的程序员来说是危险的，他们将重叠的数组传递给`restrict`-ed 函数。在这种情况下，没有任何保护措施可以确保正确复制数组。根据编译器选择的优化路径，结果是未定义的。

* * *

第一个用例（`init()`函数）可以看作是第二个用例的变体，如上所述。在这里，使用单个动态内存分配调用创建了两个数组。

将两个指针指定为`restrict`-ed 可以进行优化，否则指令顺序会很重要。例如，如果我们有代码：

```
a1[5] = 4;
a2[3] = 8; 
```

然后优化器可以重新排序这些语句，如果它发现它有用的话。

OTOH，如果指针*不是* `restrict`-ed，那么重要的是第一个分配将在第二个分配之前执行。这是因为有可能`a1[5]`和`a2[3]`实际上是相同的内存位置！很容易看出，在这种情况下，最终值应该是 8。如果我们重新排序指令，那么最终值将是 4！

同样，如果不相交的指针被赋予这个`restrict`-ed 假定代码，则结果是未定义的。

# android - 如何以编程方式关闭Android中的按钮点击

> ID：12255687
> 
> 赞同：0
> 
> 时间：2012-09-04T01:20:25.743
> 
> 标签：android, android-keypad

我正在编写一个在用户打字时录制音频的程序。

我发现音频播放包括键盘的敲击声。

有没有办法（a）确定是否设置了键盘点击反馈声音，（b）如果是，请将其关闭，以及（c）在人员退出时再次打开（如果它开始时）该程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T01:51:23.847

可以使用 AudioManager 控制键盘声音和其他声音效果。请参考安卓文档：“键盘和方向键点击声音” [http://developer.android.com/reference/android/media/AudioManager.html#FX_KEY_CLICK](http://developer.android.com/reference/android/media/AudioManager.html#FX_KEY_CLICK)

# c# - 如何在 C# 中从 MySQL 中检索 LONGBLOB 没有数据类型大小但只有数据类型 longblob

> ID：12255689
> 
> 赞同：1
> 
> 时间：2012-09-04T01:21:01.257
> 
> 标签：c#, mysql, visual-studio-2010

大家好，我想用 C# 从 MySQL 中检索 LONGBLOB，没有数据类型大小，但只有数据类型 longblob。我可以保存在 mysql 中使用 longblob，但我可以再次检索它。

我在其中创建了一个名为“dataalis”的表，

```
CREATE TABLE  `Wajah`.`dataalis` (
`No` int(10) unsigned NOT NULL auto_increment,
`Nama` varchar(45) default NULL,
`Keterangan` varchar(600) default NULL,
`Gambar` longblob,
PRIMARY KEY  (`No`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8; 
```

和

```
nama = namatxt.Text;
            keterangan = keterangantxt.Text;
            db = new DBConnect();
            FileStream fs = new FileStream(location, FileMode.Open, FileAccess.Read);
            int fileLength = (int)fs.Length;
            byte[] rawdata = new byte[fileLength];
            fs.Read(rawdata, 0, (int)fileLength);
            MySqlCommand cmd = new MySqlCommand();
            String sql = "insert into dataalis (Nama,Keterangan,Gambar) values(@Nama,@Keterangan,@Gambar)";
            cmd.Connection = db.getConnection();
            cmd.CommandText = sql;
            cmd.Parameters.AddWithValue("@Nama", nama);
            cmd.Parameters.AddWithValue("@Keterangan", keterangan);
            cmd.Parameters.AddWithValue("@Gambar", rawdata);
            int result = cmd.ExecuteNonQuery();
            fs.Close();
            MessageBox.Show("Data Tersimpan","Peringatan"); 
```

将图像保存到 mysql

我尝试使用此代码检索 longblob 图像

```
MySqlCommand cmd = new MySqlCommand();
            cmd.Connection = db.getConnection();
            cmd.CommandText = "select * from datamulut";
            data = cmd.ExecuteReader();
            while (data.Read())
            {
                int fileSize = data.GetInt32(data.GetOrdinal("size"));
                string name = data.GetString(data.GetOrdinal("Keterangan"));
                byte[] rawData = new byte[fileSize];
                data.GetBytes(data.GetOrdinal("Gambar"), 0, rawData, 0, fileSize);
                MemoryStream ms = new MemoryStream(rawData);
                images.Add(Image.FromStream(ms));
                gambar1.Image = images[0];
                hasil1txt.Text = (name);
            }
            data.Close(); 
```

在该代码中，我不使用文件大小数据仅 longblob。如何在没有 filezie 的情况下仅检索 longblob 数据的图像？

# c# - 如何获得打开网页的按钮？

> ID：12255697
> 
> 赞同：11
> 
> 时间：2012-09-04T01:23:08.350
> 
> 标签：c#, visual-studio-2010

我到处寻找，包括 MSDN 论坛，但没有人提到过这个或方法。基本思想是，一旦从工具包中拖出一个按钮，您如何将该按钮链接到一个网页，即我有一个“Facebook”按钮，然后我如何制作它以便在单击该按钮时，Facebook在新的浏览器窗口中打开？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-04T01:27:02.313

将按钮拖到设计器上后，您可以双击它以打开按钮的`Click`事件处理程序。这是用户单击时将运行的代码。然后您可以添加所需的逻辑，即：

```
private void button1_Click(object sender, EventArgs e)
{
    // Launch browser to facebook...
    System.Diagnostics.Process.Start("http://www.facebook.com");
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-17T09:18:13.163

您可以使用 Process.Start 和所需的 URL 打开默认浏览器并导航到页面：

```
using system.Diagnostics;

private void button1_Click(object sender, EventArgs e)
{
    Process.Start("http://www.YouTube.com");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T01:41:43.107

由于您说在**新**的浏览器窗口中打开，我认为上下文是您正在开发的 Web 应用程序，所以这将适用于这种情况：

`window.open`使用JavaScript 方法添加一个 HTML 按钮。您不需要或不希望在此处使用代码隐藏，因为这一切都发生在客户端上。这是一个片段，您可以传递一些其他选项`window.open`来控制行为。

```
 <input id="Button2" type="button" value="Facebook" onclick="window.open('http://facebook.com')"/></p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-12T08:22:13.197

您必须使用默认添加到解决方案中的哪个`Process class`。`System.dll`但是您应该以这种方式引用类顶部的命名空间：

```
using System;

namespace MyApplication
{
    public class MyProgram
    {
        private void button1_Click(object sender, EventArgs e)
        {
            System.Diagnostics.Process.Start("http://www.facebook.com");
        }
    }
} 
```

# java - 圆形按钮

> ID：12255701
> 
> 赞同：7
> 
> 时间：2012-09-04T01:24:05.617
> 
> 标签：java, android, button, views

我想要这样的五个按钮，一个按钮被其他四个按钮包围。像这样：

![在此处输入图像描述](../Images/a4a78703ee5ae3c4800f04e4be3a89ab.png)

我知道对于 Android，我们只能有方形视图，那么怎么可能做到这一点？OpenGL还是什么？任何人有任何相关的东西的链接？基本上我想要靠近在一起的弯曲按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T01:31:24.413

我的猜测是，最终在自定义视图中执行此操作会更容易。

但是，如果您想使用股票视图，我建议您使用以下方法。首先，使用RelativeLayout 容器将四个外部按钮排列在一个2x2 网格中。然后定位中心按钮，使其与中心的网格重叠。将中心按钮放置在比周围四个按钮更高的 Z 位置（更靠近用户）。然后使用透明度作为按钮图像的一部分，让它们看起来像你想要的。然后（希望）尝试一下。如果 Z 顺序正确，则中心按钮将捕获原本会转到其他四个按钮之一的点击。

这实际上不会按原样工作，因为中心按钮方块会侵入周围的方块。我不知道它是否会起作用，但是您可以尝试用另一个按钮“碎片”网格替换中心按钮。除了中心按钮图像与网格单元重叠的位置之外，网格将具有空位置。你必须把它做得足够好，以避免侵入外部按钮图像。

**编辑**：

我突然想到，也许你可以用一组[TouchDelegate](http://developer.android.com/reference/android/view/TouchDelegate.html)对象来做到这一点。您将按照我最初描述的那样排列按钮，但只使*父*容器可点击。它将使用 5 个`TouchDelegate`s 来找出哪个按钮（如果有）在点击坐标下。不幸的是，`TouchDelegate`只适用于`Rect`命中区域，这让我们从我们开始的地方开始。但是，您可以蚕食[TouchDelegate 的源代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/view/TouchDelegate.java)并定义您自己的版本，该版本接受某种通用形状类，而不仅仅是一个`Rect`. （形状类必须具有等价物`Rect.contains()`才能测试命中。Android 中没有内置任何内容，但您可以轻松地为您拥有的特定形状编写自己的类。）

您可以通过将命中和委托逻辑直接放在父容器视图中来稍微简化代码，但我认为，拥有一个可重用的委托类将事件处理与容器本身分开会更简洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:43:30.557

您可以使用遮罩颜色，例如：一个完全红色的按钮，就像您发布的图像一样，只需对红色按钮进行像素颜色检查，例如：

```
bool insideMyAwsomeShapeButton(int mouse_x,int mouse_y) {
      if get_image_pixel_color_at_pos(mouse_x,mouse_y) == rgbcolor(1,0,0)
    {
             return true;
    }

            return false; } 
```

再说一次，这只是一个想法，你必须在 android 上找到特定的 api 才能完成任务，比如检查像素颜色。

# php - 错误 - 试图获取非对象的属性

> ID：12255702
> 
> 赞同：1
> 
> 时间：2012-09-04T01:24:11.517
> 
> 标签：php

我目前在我的一个文件上收到此错误：

```
 /var/www/vhosts/httpdocs/generator/index.php on line 6 
```

第 6 行将导致：

```
 echo $results->GetBookCodesResult->BookCodes->BookInfo->ServiceCode; 
```

我的代码：

```
 <?php
  $config['soap_url'] = "http://myservice.com?WSDL";
  if(isset($_REQUEST['codes'])) {
    $results = request_Data(explode("\n",$_REQUEST['codes']));
    echo $results->GetBookCodesResult->BookCodes->BookInfo->ServiceCode;
  }
  .... 
```

解决此问题的最佳方法是什么？一些建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T01:25:15.930

正如您在 var_dump-output 中看到的那样，您的“->BookCodes”子属性为空...

这个属性“BookInfo”只是不存在..也许没有找到书？;)

# c - 混淆调整代码以使用限制限定符

> ID：12255710
> 
> 赞同：2
> 
> 时间：2012-09-04T01:26:26.433
> 
> 标签：c, c99, strict-aliasing, restrict-qualifier

我正在尝试调整以下版本的`stpcpy`函数以使用`restrict`-qualified 指针作为其参数和内部，但我不确定简单地添加限定符是否会导致引入未定义的行为。

```
#define ALIGN (sizeof(size_t)-1)
#define ONES ((size_t)-1/UCHAR_MAX)
#define HIGHS (ONES * (UCHAR_MAX/2+1))
#define HASZERO(x) ((x)-ONES & ~(x) & HIGHS)

char *__stpcpy(char *d, const char *s)
{
        size_t *wd;
        const size_t *ws;

        if (((uintptr_t)s & ALIGN) == ((uintptr_t)d & ALIGN)) {
                for (; (*d=*s) && ((uintptr_t)s & ALIGN); s++, d++);
                if (!*s) return d;
                wd=(void *)d; ws=(const void *)s;
                for (; !HASZERO(*ws); *wd++ = *ws++);
                d=(void *)wd; s=(const void *)ws;
        }
        for (; (*d=*s); s++, d++);

        return d;
} 
```

假设 C99 6.7.3.1 中关于访问对象的规则仅适用于访问的单个对象而不是整个数组，我认为这可能没问题，因为写入的元素只能访问一次，并且只能用于写入。但我`restrict`在这一点上使用起来很不舒服，不想仅仅依靠我自己的判断。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T07:58:50.837

为了符合标准，唯一的限制是所有操纵函数通过指针接收到的任何对象的指针表达式都`restrict`应该*基于*该指针。它不需要指针表达式的类型相同。因此，从这个意义上说，通过这些访问对象`size_t*`并不是违反约束或 UB。

我不确定*读取*`*wd`您修改过的对象的一部分的值`*d`是否不会别名，因为指针类型不同。但正如你所说，你不这样做，所以这应该是安全的。

顺便说一句，代码做了一个不一定可移植的重要假设，即 an 的低位`uintptr_t`反映了您转​​换为它的指针的对齐属性。这在我们日常使用中遇到的所有架构上可能都是正确的，但标准并不能保证。甚至 C11 也只说了一些关于“字节地址的倍数”的内容，其中没有任何内容可以说明那将是什么。

# ios - 应用程序 didFinishLaunchingWithOptions 忽略 if 语句

> ID：12255713
> 
> 赞同：0
> 
> 时间：2012-09-04T01:27:00.203
> 
> 标签：ios, if-statement, appdelegate

我在 App Delegate 的`application DidFinishLaunchingWithOptions`. 即使 if 语句不正确，if 语句中的代码也会运行。难道我做错了什么？它似乎只是忽略了 if 语句。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{ 
NSInteger i = [[NSUserDefaults standardUserDefaults] integerForKey:@"numOfLCalls"];
[[NSUserDefaults standardUserDefaults] setInteger:i+1 forKey:@"numOfLCalls"];

if (i >= 3) {
    UIAlertView *alert_View = [[UIAlertView alloc] initWithTitle:@"Hey! You are still coming back!" message:@"It would mean a whole lot to me if you rated this app!" delegate:self cancelButtonTitle:@"Maybe later" otherButtonTitles: @"Rate", nil];
    [alert_View show];
}

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T01:38:15.437

您存储的这个值`NSUserDefaults`在您重建应用程序时不会被清除。为了重置这个数字，您必须从模拟器或设备上卸载应用程序并重新构建。

关键`NSUserDefaults`是它是真正持久的。即使您的应用程序是从应用商店更新的，它仍会保留，并且清除其数据的唯一两种方法是专门和故意删除您正在引用的密钥，或删除应用程序。

此外，正如您在下面看到的，我为您做了一些细微的调整：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if (![[NSUserDefaults standardUserDefaults] integerForKey:@"numOfLCalls"]) {
        [[NSUserDefaults standardUserDefaults] setInteger:1 forKey:@"numOfLCalls"];
    }else{
        NSInteger i = [[NSUserDefaults standardUserDefaults] integerForKey:@"numOfLCalls"];
        [[NSUserDefaults standardUserDefaults] setInteger:i++ forKey:@"numOfLCalls"];
    }

    if (i >= 3) {
        UIAlertView *alert_View = [[UIAlertView alloc] initWithTitle:@"Hey! You are still coming back!" message:@"It would mean a whole lot to me if you rated this app!" delegate:self cancelButtonTitle:@"Maybe later" otherButtonTitles: @"Rate", nil];
        [alert_View show];
    }

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

# jquery - 表单数量未知的页面的解决方案。如何处理？

> ID：12255716
> 
> 赞同：1
> 
> 时间：2012-09-04T01:27:19.583
> 
> 标签：jquery, ajax, forms, jsp, form-submit

我的网站有问题。我想创建一个具有多种形式的页面（类似于未知数量帖子的评论表单）。我想要的另一件事是提交评论表单而不刷新我的页面。使用已知数量的表单，我可以用 ajax 解决我的问题。但是编号未知，我不知道如何命名这些表格，如何编写jquery代码来解决！PS：我的网页是用JSP写的。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:22:33.347

您不需要命名所有表单，您可以使用 jquery**[最接近](http://api.jquery.com/closest/)**的函数来获取表单的值。像这样的东西

​</p>

```
<form>
<input type="text" name="comment">
<input type="hidden" name="usrid" value="1">
<input type="button" class="submitbut" value="Submit">
</form><br/>

<form>
<input type="text" name="comment">
<input type="hidden" name="usrid" value="2">
    <input type="button" class="submitbut" value="Submit">
</form><br/>

<form>
<input type="text" name="comment">
<input type="hidden" name="usrid" value="3">
    <input type="button" class="submitbut" value="Submit">
</form> 
```

​还有Jquery

```
$(".submitbut").click(function() {
    alert($(this).closest("form").serialize());
});​ 
```

这是帮助你的jsfiddle。**[点击这里](http://jsfiddle.net/BYZg2/)**

*更新由于OP需要使用Jquery validate*

[**更新的演示**](http://jsfiddle.net/BYZg2/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T03:29:11.900

我编写了一个小脚本，旨在处理需要一个控制器来处理多个脚本的情况。

该脚本有一个 switch 语句，可让您处理某些脚本以进行特定的回调。所有其他脚本将在 switch 语句的“默认”情况下运行回调。这些回调是让您放置任何需要在表单的 ajax 提交成功时运行的代码。

这是链接 [https://github.com/andresgallo/FORM-POSTER-using-AJAX-and-JQUERY/blob/master/ajaxFormPoster.js](https://github.com/andresgallo/FORM-POSTER-using-AJAX-and-JQUERY/blob/master/ajaxFormPoster.js)

希望能帮助到你

# c++ - 不推荐在代码中从字符串常量转换为 'char*'

> ID：12255718
> 
> 赞同：2
> 
> 时间：2012-09-04T01:27:30.920
> 
> 标签：c++, string, gcc

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T01:30:55.340

您需要`const`在变量和函数的声明中添加限定符来解决此问题：

```
const char* decodeCode(const char* encodedString) {
    ....
    const char* a = encodedString;
    ....
} 
```

* * *

注意：您的函数的底部丢失了，但请确保您不会在`store`没有复制它的情况下返回。

# c# - MemoryCache 神奇地进入 Disposed 状态

> ID：12255719
> 
> 赞同：1
> 
> 时间：2012-09-04T01:27:50.233
> 
> 标签：c#, asp.net, .net, base-class-library, memorycache

我做了很多测试，我的 MemoryCache 实例在一段时间后被释放，当我调用 Get 方法时总是返回 null。我认为那是在 PollingInterval 之后。

为了模拟，您可以启动一个新的 webapp 并编写以下代码：

```
 private static MemoryCache mem = new MemoryCache("MyCache");
    protected void Page_Load(object sender, EventArgs e)
    {
        string key = "MyKey";
        mem.Set(key, "MyValue", new CacheItemPolicy() {AbsoluteExpiration = DateTimeOffset.Now.AddDays(1), Priority = CacheItemPriority.NotRemovable});
        LtrValue.Text = mem.Get(key) as string;
    } 
```

我将 PollingInterval 配置为 30 小时，似乎可行。

我认为可能是 AppDomain Unload，但经过一番调查，我认为不是这样：

1-) MSDN 说要为 ASP.NET 使用 MemoryCache：http: [//msdn.microsoft.com/en-us/library/ff477235](http://msdn.microsoft.com/en-us/library/ff477235(v=vs.100).aspx) (v=vs.100).aspx 并说 ASP.NET 4 缓存是用对象缓存：

在 ASP.NET 4 中，缓存是通过使用 ObjectCache 类实现的。

2-) AppDomain 卸载将重置静态变量，创建新的 MemoryCache 实例。

3-) 我像 MemoryCache 一样在 AppDomain Unload 上附加了一个事件（我看到了反编译的源代码），在我的测试中它没有被调用并且 memorycache 被处理掉了。

参考：

MSDN 论坛上的相同帖子：http: [//social.msdn.microsoft.com/Forums/en/netfxbcl/thread/1233ffb3-6480-431b-94ca-1190f96cf5f6](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/1233ffb3-6480-431b-94ca-1190f96cf5f6)

[http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/0a666d5e-9bda-47bd-8dd3-98d32eb5fe60](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/0a666d5e-9bda-47bd-8dd3-98d32eb5fe60)

[MemoryCache Empty ：设置后返回 null](https://stackoverflow.com/questions/7422859/memorycache-disposed-in-web-application)

[System.Runtime.Caching.MemoryCache 奇怪的行为？](https://stackoverflow.com/questions/6767604/system-runtime-caching-memorycache-strange-behavior)

[添加对象后，MemoryCache 为空](https://stackoverflow.com/questions/7849000/memorycache-empty-just-after-adding-an-object)

[MemoryCache 不遵守配置中的内存限制](https://stackoverflow.com/questions/6895956/memorycache-strangeness)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T12:05:42.737

它确实是一个错误，它已在 .NET 4.5 中修复，他们正在努力向后移植到 .NET 4

[http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/1233ffb3-6480-431b-94ca-1190f96cf5f6/](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/1233ffb3-6480-431b-94ca-1190f96cf5f6/)

# linux - 如何在 *nix 上查找/grep 目录名称匹配“x”但不匹配“y”的所有路径？

> ID：12255722
> 
> 赞同：7
> 
> 时间：2012-09-04T01:28:01.650
> 
> 标签：linux, shell, unix, find, grep

我有一个这样的文件夹结构（这是一个小片段）：

```
└── test
    └── cases
        └── model
            ├── client
            │   ├── socketsTest.coffee
            ├── server
            │   └── socketsTest.coffee
            └── shared
                └── findersTest.coffee 
```

问题是，如何列出所有以文件夹结尾`.coffee`且不存在于`client`文件夹中的路径？

以下命令返回文件夹`.coffee`中存在的所有匹配`server`文件：

```
find test -name "*Test.coffee" | egrep '/*server*/' 
```

但我真正需要的是一个匹配**除**客户端文件夹中的所有内容之外的所有内容的正则表达式。

在 *nix 上执行此操作的最干净的方法是什么？最终目标是返回不在文件夹内的`client`文件，因此对于上面的树，这将是：

```
$ <find files except those a client folder>
test/cases/model/server/socketsTest.coffee
test/cases/model/shared/findersTest.coffee 
```

我尝试做这样的事情但没有运气：

```
find test -name "*Test.coffee" | egrep '*model/[^client]*' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T01:30:47.497

您可以使用该`-prune`操作忽略目录。`-o`意思是“或”，所以读作“如果它被命名为客户端修剪它，否则打​​印名为`*.coffee`”的文件。

```
find test -name client -prune -o -name '*.coffee' -print 
```

或者你可以使用双重测试，它更容易阅读但效率略低，因为它会递归到`client/`目录中，而第一个则完全避免它们。

```
find test -name '*.coffee' ! -wholename '*/client/*' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T01:44:13.807

我`-prune`赞成约翰·库格曼给出的答案。

解决此问题的另一种方法`grep`是使用以下`-v`选项：

```
find test -name "*Test.coffee" | grep -v client 
```

`-v`反转模式匹配，因此所有包含“客户端”的匹配都被丢弃

# php - 我使用什么 PHP 数组函数来转换多维关联数组

> ID：12255723
> 
> 赞同：1
> 
> 时间：2012-09-04T01:28:19.997
> 
> 标签：php, arrays, multidimensional-array

我想转换这个。

```
$data1 = array(
    array('value' => '100.00', 'total' => '32'),
    array('value' => '10.00', 'total' => '13'),
    array('value' => '200.00', 'total' => '39'),
    array('value' => '190.00', 'total' => '11'),
); 
```

进入这个

```
$data2 = array(
    'value' => array(0 => '100.00', 1 => '10.00', 2 => '200.00', 3 => '190.00'),
    'total' => array(0 => '32', 1 => '13', 2 => '39', 3 => '11')
); 
```

我显然可以通过遍历顶部数组以一种迂回的方式做到这一点，同时附加到一系列数组，但我认为必须有一个我不知道的 php 数组函数可以更简洁地做到这一点。

[http://www.php.net/manual/en/ref.array.php](http://www.php.net/manual/en/ref.array.php)

值是浮点数和整数（如果有任何区别），我刚刚将它们作为字符串添加到示例代码中，因为它更容易阅读 IMO。最终数组顺序应与初始顺序匹配。我将正确答案授予最低 LOC 提供的性能并不比“长”版本差很多。PHP 5.4。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T01:51:49.623

如果 PHP 有一个`array_pluck`函数，那就很简单了。

```
function array_pluck(array $array, $field)
{
  return array_map(function($row) use ($field) { return $row[$field]; }, $array);
}

$data2 = array(
  'value' => array_pluck($data1, 'value'),
  'total' => array_pluck($data1, 'total')
); 
```

我认为这与阅读一样容易，但是您将在每个字段上循环整个数组一次，因此这几乎不是最佳解决方案。

就个人而言，在这种情况下，我可能会坚持使用该`foreach`解决方案，但尝试将其包装在一些可重用的函数中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T01:48:59.110

```
<?php // php 5.4 array syntax

$new = array_reduce($data1, function (&$result, $item)
    {
        $result['value'][] = $item['value'];
        $result['total'][] = $item['total']; 
        return $result;
    },
    ['value' => [], 'total' => []]); 
```

'value' 和 'total' 是任意名称，因此您不会使用单行 php 库函数来执行此操作。

如果您愿意，可以将此代码重构为一个函数...

```
function array_rotate($data) {
    $k = array_keys($data[0]);
    return array_reduce($data, function (&$r, $i) use ($k) {
        $r[$k[0]][] = $i[$k[0]];
        $r[$k[1]][] = $i[$k[1]]; 
        return $r;
    }, [$k[0] => [], $k[1] => []]);
} 
```

我概括了@matthew的代码，这允许任意数量的键（而不是2个）：

```
function array_rotate2($data) {
    return array_combine(array_keys($data[0]), 
        array_map(function ($field) use ($data) {
              return array_map(function($row) use ($field) { return $row[$field]; }, $data);
            }, array_keys($data[0])));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T01:36:10.317

您可以使用简单的 foreach() 来完成此操作，而无需使用函数：

```
<?php
$data = array(
    array('value' => '100.00', 'total' => '32'),
    array('value' => '10.00', 'total' => '13'),
    array('value' => '200.00', 'total' => '39'),
    array('value' => '190.00', 'total' => '11'),
);

$newArray = array();
$i=0;
foreach($data as $value){
    $newArray["value"][] = $data[$i]["value"]; 
    $newArray["total"][] = $data[$i]["total"]; 
    $i++;
}

echo "<pre>";
print_r($newArray);
echo "</pre>";
?> 
```

打印这个：

```
Array
(
    [value] => Array
        (
            [0] => 100.00
            [1] => 10.00
            [2] => 200.00
            [3] => 190.00
        )

    [total] => Array
        (
            [0] => 32
            [1] => 13
            [2] => 39
            [3] => 11
        )
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T01:39:06.800

```
$final = array();
foreach($data1 as $array) {
  foreach($array as $key => $value) {
    $final[$key] = isset($final[$key]) ? $final : array();
    $final[$key][] = $value;
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T01:56:33.533

就像其他人说的那样，我认为没有单线。这是一个可以重复使用的 foreach 函数

```
function array_multi_key_combine($a, $keys = array()) {
    $b = array();
    foreach($a as $v) {
        foreach($keys as $k) {
            if(isset($v[$k])) $b[$k][] = $v[$k];
        }
    }
    return $b;
}
$data2 = array_multi_key_combine($data1, array('value', 'total')); 
```

# javascript - 如何让 click 方法停止工作不止一次？

> ID：12255724
> 
> 赞同：2
> 
> 时间：2012-09-04T01:28:27.250
> 
> 标签：javascript, jquery

我在按钮 + 链接上有一个点击方法，该方法通过点击来为内容设置动画。但是，我希望它只工作一次。单击后我设法禁用了该按钮，这很好。但是我尝试`.disabled = true`了链接，但没有成功。有什么方法可以防止它被多次点击吗？

JS

```
$('#frontbutton, #loginlink').on('click', function(){
    $('.popup').hide();
    usernameInput.val('');
    emailInput.val('');
    passwordInput.val('');
    confirmInput.val('');
    $('.intro').animate({opacity: '0.5'}, 1000).delay(800).animate({
        left: "+=300px"
    });
    setTimeout(function(){
        $('.formholder').show()}, 2000);
    $('.toppic').animate({opacity: '0.5'}, 1000).delay(800).animate({
        top: "+=300px"
    });
    document.getElementById('frontbutton').disabled = true;
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T01:30:30.200

只需使用[`.one()`](http://api.jquery.com/one/)而不是[`.on()`](http://api.jquery.com/on/)：

```
$('#frontbutton, #loginlink').one('click', function(){ 
```

`.one()`行为类似于`.on()`，但处理程序一旦被调用就会解除绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T01:30:41.927

尝试`one('click',function(){...`代替`on('click',function(){...`. 该事件每个元素只会运行一次。
[这是文档](http://api.jquery.com/one/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T01:34:28.110

使用 jquery，您可以通过这种方式关闭事件

```
 $('#frontbutton, #loginlink').on('click.myEventNamespace',function(){
       //Run my code
       $('#frontbutton, #loginlink').off('click.myEventNamespace');
 }); 
```

您也可以在活动中执行此操作。认为当您不使用 jQuery 时可能值得了解

```
 this.removeEventListener('click',arguments.callee,false); 
```

# java - for each 循环无法初始化数组中的对象

> ID：12255728
> 
> 赞同：8
> 
> 时间：2012-09-04T01:30:09.930
> 
> 标签：java, syntax, for-loop

我会快速解决这个问题。我有一个简单的课程

```
class Vector{
    float x, y;
} 
```

另一个类将这些对象的数组作为其成员

```
Vector[] buffer; 
```

我这样初始化它：

```
buffer = new Vector[8];
for(Vector v: buffer)
    v = new Vector(); 
```

但是当我尝试访问这个数组中的这个对象的成员时，我会直接得到一个 NullPointerException 到我的堆栈跟踪。也就是说，数组的对象还没有被构造。另一方面，这个更传统的代码非常完美：

```
buffer = new Vector[8];
for(int i = 0; i<8; i++)
    buffer[i] = new Vector; 
```

正如[这个](https://stackoverflow.com/questions/85190/how-does-the-java-for-each-loop-work)讨论所指出的，编译后两者应该是相同的。

我的问题是，为什么对于每个循环都无法从项目数组初始化/构造对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T01:32:50.463

在您的 for-each 示例中，您正在覆盖不会保存回数组的循环的局部变量。它类似于您的第二个循环：

```
for(int i = 0; i < buffer.length; i++){
    Vector v = buffer[i];
    v = new Vector();
} 
```

查看[对 Java 中每个循环的理解，了解](https://stackoverflow.com/questions/589433/understanding-for-each-loop-in-java)基本相同的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T01:34:21.847

两个循环都用于*访问*数组中的元素，但不用于初始化它们。当您在这种情况下使用 for-each 循环时，就像在做

```
for(int x = 0; x < array.length; x++) {
    Vector v = array[x];
    v = new Vector();
} 
```

您没有将 new 分配给`Vector`数组，而是将其分配给局部变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T01:49:35.627

在您的第一个示例中，`v`仅在 for 循环内可用。当你`v = new Vector();`更新 v 时，而不是缓冲区 [i]。v 之前指向 buffer[i]，现在它指向一个新向量，`buffer[i]`仍然为`null`.

# database - 超类型-子类型数据库设计

> ID：12255731
> 
> 赞同：5
> 
> 时间：2012-09-04T01:30:32.620
> 
> 标签：database, database-design

我有一个关于关系数据库中超类型子类型设计的问题。如果我有一个带有两个子类型表的超类型，我会将与两个子类型表的 PK 相关的超类型的 PK 作为 FK。假设我有这样的事情：

## 类型

类型 ID PK

## 超类型

ID PK 类型ID FK

## 亚型A

ID PK,FK

## 亚型B

ID PK,FK

在数据库方面，我如何确保给定类型的超类型 ID 仅放入适当的子类型表中？例如，我不希望将类型 A 的超类型 ID 放入 SubtypeB 表中。有没有办法轻松地防止这种情况发生在数据库端？我知道这可以在代码中处理，但是如果代码有错误怎么办？或者如果有人在其中一个子类型表中手动输入了错误的 ID 怎么办？我想我正在寻找某种方法来使这在数据库方面成为不可能。

有任何想法吗？也许 Supertype 表上的 PK 应该是 ID 和 TypeID 组合，在 ID 列上具有唯一约束，以防止两种类型都在 SuperType 表中的记录......然后 Subtype 表将具有组合 ID 和 TypeID PK对 TypeID 的约束只能是相应子类型表的类型？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T10:37:42.167

> 在数据库方面，我如何确保给定类型的超类型 ID 仅放入适当的子类型表中？

在支持延迟约束的 DBMS 上，您可以执行以下操作：

![在此处输入图像描述](../Images/412bcaf8cbd79d516cb24362ebe31953.png)

具有以下约束`SuperType`：

```
CHECK (
    (
        (SubtypeAId IS NOT NULL AND SubtypeAId = SuperTypeId)
        AND SubtypeBId IS NULL
    )
    OR
    (
        SubtypeAId IS NULL
        AND (SubtypeBId IS NOT NULL AND SubtypeBId = SuperTypeId)
    )
) 
```

这些特殊的圆形 FK ¹与 CHECK 相结合确保了子元素的**排他性**和**存在**性（CHECK 确保了以下各项之一：`SuprerType.SubtypeAId`、`SuprerType.SubtypeBId`非 NULL 并匹配`SuperTypeId`）。延迟子 FK（或 CHECK，如果您的 DBMS 支持它）以在插入新数据时打破先有鸡还是先有蛋的问题。

*¹ `SubtypeA.SubtypeAId` references`SuperType.SuperTypeId`和`SuperType.SubtypeAId`references `SubtypeA.SubtypeAId`，其他子类型同上。*

如果您的 DBMS 不支持延迟约束，您可以允许（在 CHECK 中）两个字段都为 NULL 并放弃强制执行孩子的存在（您仍然保持排他性）。

* * *

或者，也可以像这样强制执行排他性（但不存在）：

![在此处输入图像描述](../Images/ecfac4b40c299775913a6450a7813b40.png)

*`SuperType {SuperTypeId, TypeId}`注意：如果 DBMS 不支持“out-of-key”FK，您可能需要添加一个冗余的 UNIQUE 。*

具有以下约束`SubtypeA`：

```
CHECK(TypeId = 1) 
```

以及以下约束`SubtypeB`：

```
CHECK(TypeId = 2) 
```

我用 1 和 2 来表示特定的子类型——你可以使用任何你喜欢的东西，只要你是一致的。

`TypeId`此外，您可以考虑通过为子类型（例如 Oracle 11[虚拟列](http://www.oracle-developer.net/display.php?id=510)）使用计算列来节省存储空间。

* * *

顺便说一句，通过应用程序逻辑强制存在和排他性并不是一个糟糕的整体策略。大多数时候，您应该努力在数据库中尽可能多地执行完整性，但在这种特殊情况下，在应用程序级别执行此操作通常被认为是合理的，以避免上述复杂性。

* * *

最后，“单独表中的所有类”并不是实现继承的唯一策略。如果您使用“一个表中的所有内容”或“单独表中的*具体*类”来实现继承，那么强制子类型的存在性和排他性会变得容易得多。

看看[这篇文章](https://stackoverflow.com/a/12037398/533120)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:02:59.940

使用触发器将超类型表中的新条目传播到适当的子类型表。

# actionscript - Adobe AIR 3.4 SDK 有免费的 ide

> ID：12255733
> 
> 赞同：3
> 
> 时间：2012-09-04T01:30:46.123
> 
> 标签：actionscript, flex4, adobe

有没有办法在不使用 adobe 的付费软件的情况下使用 adobe air 3 SDK？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T08:40:04.547

在 Windows 上，我强烈推荐[FlashDevelop](http://flashdevelop.org/)（快速、轻量级、免费、开源）。

还有像[FDT 5 Free](http://fdt.powerflasher.com/buy-download/)和[IntelliJ Idea Community Edition](http://www.jetbrains.com/idea/download/index.html)这样的跨平台解决方案。

# jquery-mobile - 在 1.7.1 版本中正确使用 jQuery Mobile 事件处理

> ID：12255735
> 
> 赞同：2
> 
> 时间：2012-09-04T01:30:48.423
> 
> 标签：jquery-mobile

我对 jQuery Mobile 事件束手无策。尽管遵循了 T 的文档，但我不理解它们。我正在使用以下代码来初始化我的页面。问题是有些似乎触发了多次，有时当我返回一个页面时什么都不会出现，就好像 .live pageinit 根本不会触发一样。我很困惑。pageinit 是要走的路吗？.live 是最佳实践吗？我是否需要自己清理并使用 pagehide 之类的东西从 DOM 中删除内容？请帮我理解。谢谢！

```
// page number 1
<header>
   includes and stuff
<header>
<body>
    <div data-role="page" data-theme="a" id="dashboardPage">
        $('#dashboardPage').live('pageinit',function() {

        });

        // somewhere in here a page transition to anotherPage.html (not necessarily the id of the new page in the <div data-role-"page data-theme...> declaration

        $.mobile.changePage("anotherPage.html",{transition : "slide"});

    </div>
</body>

// page number 2
<header>
   includes and stuff
<header>
<body>
    <div data-role="page" data-theme="a" id="specialsPage">
        $('#specialsPage').live('pageinit',function() {

        });
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:22:01.647

使用 JQuery mobile 时，您应该考虑拥有一个动态更新内容的页面。您不会像往常那样从一页导航到另一页。因此，您使用 JQM 导航到的页面中存在的任何代码都将被忽略（如果更改第 2 页的标题，并使用 changepage 从第 1 页导航到此页面，您将看不到任何区别）。因此，您的所有 js 代码都应该在您的用户将到达的页面中直接可用。

如果在第 1 页的脚本中添加以下代码，您将正确检测到第 2 页在加载 changepage 时的初始化。

```
$("#specialsPage").live('pageinit',function(event){
                alert( '"initializing" page 2: specialsPage');
}); 
```

要记住的重要一点是，您的用户也可能直接访问您的 page2，这意味着所有代码也应该可用于第 2 页。因此，我强烈建议您将所有代码包含在所有页面的标题，而不是直接在页面内的脚本标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:40:46.483

你可以尝试这样的事情：

```
<html>
    <header>
        <!--  BASIC INCLUDES -->
        <link rel="stylesheet" href="./css/jquery.structure-1.1.0.min.css" />
        <link rel="stylesheet" href="./css/jquery.mobile-1.1.0.min.css" />
        <link rel="stylesheet" href="./css/jquery.mobile.theme-1.1.0.min.css" />

        <script type="text/javascript" src="./js/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="./js/jquery.mobile-1.1.0.min.js"></script>
        <!--  END - BASIC INCLUDES -->

    </header>
    <body>
        <!--  PAGE 1 -->
        <div data-role="page" data-theme="a" id="dashboardPage">
            <script>
                // INITIALIGE PAGE 1 -  dashboardPage
                $("#dashboardPage").live('pageinit',function(event){
                    alert( '"initializing" page 1: dashboardPage');
                });
            </script>

            HERE YOU ARE AT PAGE 1 (dashboardPage)!!!<br><br>
            <a href="#specialsPage" data-transition="pop">CLICK HERE TO GO TO PAGE 2 (specialsPage)</a>
        </div>

        <!--  PAGE 2 -->
        <div data-role="page" data-theme="a" id="specialsPage">
            <script>
                // INITIALIGE PAGE 2 -  specialsPage
                $("#specialsPage").live('pageinit',function(event){
                    alert( '"initializing" page 2: specialsPage');
                });
            </script>

            HERE YOU ARE AT PAGE 2 (specialsPage)!!!<br><br>
            <a href="#dashboardPage" data-transition="slide">CLICK HERE TO GO TO PAGE 1 (dashboardPage)</a>
        </div>
    </body>
</html> 
```

希望能帮助到你。

# opencl - clEnqueueMapBuffer 是如何工作的

> ID：12255738
> 
> 赞同：10
> 
> 时间：2012-09-04T01:31:21.147
> 
> 标签：opencl

谁能谈谈函数的`clEnqueueMapBuffer`工作机制。其实我主要关心我能从这个功能中获得什么速度上的好处`clEnqueueRead/WriteBuffer`。

**PS**：是否`clEnqueueMapBuffer/clEnqueueMapImage`也会自动从 CPU 分配缓冲区？如是。
我想管理我的 CPU 缓冲区。我的意思是我首先 malloc 一个大缓冲区。然后，如果我需要缓冲区。我可以从我首先分配的大缓冲区中分配它。如何`clEnqueueMapBuffer/clEnqueueMapImage`从大缓冲区中分配缓冲区。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T03:01:12.053

`clEnqueueMapBuffer`/`clEnqueueMapImage`

用于访问内存对象而不是使用`clEnqueueRead`/的 OpenCL 机制`Write`。我们可以将设备上的内存对象映射到主机上的内存区域。一旦我们映射了对象，我们就可以按照我们喜欢的方式读/写或修改。

`Read`/ `Write`buffer 和之间的另一个区别`clEnqueueMapBuffer`是`map_flags`参数。如果`map_flags`设置为`CL_MAP_READ`，映射内存将是只读的，如果它设置为`CL_MAP_WRITE`映射内存将是只写的，如果你想要同时读取 + 写入，则制作标志`CL_MAP_READ | CL_MAP_WRITE`。

相比读/写fns，内存映射需要三步流程>

1.  使用 映射内存`clEnqueueMapBuffer`。
2.  通过 将内存从设备传输到主机/从主机传输`memcpy`。
3.  使用 取消映射`clEnqueueUnmapObject`。

人们普遍认为，与常规读/写相比，内存映射显着提高了性能，请参见此处：[什么更快 - AMD devgurus 论坛链接](https://community.amd.com/message/1249219)

如果要复制图像或图像的矩形区域，则也可以使用`clEnqueueMapImage`call 。

参考：

*   [OpenCL 在行动](http://www.manning.com/scarpino2/)
*   [使用 OpenCL 进行异构计算](https://rads.stackoverflow.com/amzn/click/com/0123877660)
*   [开发大师论坛](http://devgurus.amd.com)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-26T09:56:07.597

不，地图函数不分配内存。您可以在调用 clCreateBuffer 时这样做。如果您在 CPU 上分配内存然后尝试使用它，则需要将其复制到 GPU 可访问内存。要让两者都可以访问内存，最好使用 CL_MEM_ALLOC_HOST_PTR

```
clCreateBuffer(context, flags, size, host_ptr, &error); 
```

context - 您正在使用的设备的上下文。

标志 - CL_MEM_ALLOC_HOST_PTR | CL_MEM_READ_WRITE

size - 缓冲区大小（以字节为单位），通常为 N * sizeof(data type)

host_ptr - Can be NULL or 0 meaning we have no existing data. You could add CL_MEM_COPY_HOST_PTR to flags and pass in a pointer to the values you want copied to the buffer. This would save you having to copy via the mapped pointer. Beneficial if the values won't change.

# php - 试图从类外部调用受保护的函数

> ID：12255740
> 
> 赞同：0
> 
> 时间：2012-09-04T01:31:31.857
> 
> 标签：php, class, function, protected

好的。我是 PHP 中的类的新手，并试图将变量传递给类中的受保护函数。我该怎么做呢？

类.PHP

```
<?php
    include($_SERVER['DOCUMENT_ROOT']."/includes/con.php");

    class gindex {
        protected function rdev($a,$b,$c,$d){
            $d = base64_encode($d);
            mysql_query("INSERT INTO mem(first_name,last_name,email,password,type) VALUES(".$a.",".$b.",".$c.",".$d.",'developer')", $db);
    }
?> 
```

索引.PHP

```
<?php
    include($_SERVER['DOCUMENT_ROOT']."/includes/con.php");
    if(isset($_POST['developerbtn'])){
        $fname = $_REQUEST['fname'];
        $lname = $_REQUEST['lname'];
        $email = $_REQUEST['email'];
        $password = $_REQUEST['password'];
        $Cgindex = new gindex();
        $Cgindex->rdev($fname,$lname,$email,$password);
    }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T01:36:37.940

您不能这样做，因为方法设置为`protected`您必须将其设置为`public`才能[访问它](http://php.net/manual/en/language.oop5.visibility.php)。否则，您只能从同一个班级或该班级的孩子中调用它。

我还可以建议以大写开头你的类名：`class Gindex`。您可能还想改进类的名称，因为`gindex`没有说明它的作用。你的`method`名字也一样。而且您的参数名称也很糟糕。正确命名事物，以便人们（包括）您自己在（重新）查看您的代码时确切地知道变量包含/类或方法的作用。

您还使用了一个未[在 class 范围内的](http://php.net/manual/en/language.variables.scope.php)`$db`任何地方定义的变量。

另外请不要将`mysql_*`函数用于新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[**红框**](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个很好的 PDO 教程](http://goo.gl/vFWnC)。

**这也将修复代码中存在的讨厌的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。**有关如何使用 PDO 或 mysqli 解决此问题的更多信息，请参阅[此问题](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)。

将数据插入数据库时​​，您似乎也使用网站作为密码。如果您真的要存储数据库，我还建议您阅读[散列密码](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)以确保安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T01:33:35.073

我建议您再次阅读有关[可见性的文档。](http://www.php.net/manual/en/language.oop5.visibility.php)

> 声明为受保护的成员只能在类本身内以及被继承类和父类访问。

`$Cgindex->rdev(...`是从全局上下文调用，而不是在允许的类上下文中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T01:33:55.683

你不能，受保护函数的目的是只能从类内部或继承的类中调用

因此，如果您想像以前那样调用它，请公开您的功能：

```
public function rdev($a,$b,$c,$d){ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T01:34:13.933

一般来说，您需要阅读有关 OOP 的信息。
受保护的函数是......保护类外部使用。意味着：只有类或子类的方法内部的代码才能调用受保护的方法。此外，持有受保护方法的类的所有子类都将继承该方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T01:41:15.143

这应该有助于：

`Public`— 类的任何用户都可以直接访问公共变量或方法。

`Protected`— 受保护的变量或方法不能被该类的用户访问，但可以在从该类继承的子类中访问。

`Private`— 私有变量或方法只能从定义它的类内部访问。这意味着不能从扩展该类的子类调用私有变量或方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T01:36:15.103

受保护的元素只能从已定义的同一类及其子类不能从外部访问。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-26T13:40:25.840

```
function __construct(){
		$this->rdev();
	}
```

在构造中初始化..

# javascript - JavaScript无法提取引号css属性

> ID：12255742
> 
> 赞同：0
> 
> 时间：2012-09-04T01:32:11.483
> 
> 标签：javascript, jquery, html, css, dom

在我的样式表中，我定义了一些自定义引号 [https://developer.mozilla.org/en-US/docs/CSS/quotes]，但是当我尝试使用 JavaScript 访问它们时，它给了我默认值，尽管它存在在实际的 CSS 中；任何想法将不胜感激：

```
>> document.getElementById('-my-widget-style')
 <style id="-my-widget-style" type="text/css" media="all">...</style>

>> document.getElementById('-my-widget-style').innerHTML
 " .-my-widget-wrapper #content {
   quotes: "<<" ">>";
 }
 "

>> document.getElementById('content').style.quotes
 ""

>> $('#content').css('quotes')
 "" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:37:51.720

该`style`属性直接获取样式属性中元素上设置的样式。如果在此处设置了自定义引用属性，您将只能取回它，而不是从样式表中取回。

```
 <div id="content" style="quotes:...">...</div> 
```

编辑：请参阅评论以进行进一步讨论。似乎这可能是webkit的问题。

# c - 编写并使用一个以掩码为参数并返回结构体的函数

> ID：12255743
> 
> 赞同：0
> 
> 时间：2012-09-04T01:32:48.763
> 
> 标签：c, struct, bitmask

我是编码新手，我正在尝试完成这项任务，但我无法让它工作：

> 编写并使用一个将掩码作为参数并返回结构的函数。

这是我到目前为止所做的。有人可以帮我理解我做错了什么吗？

```
typedef enum {
    fast = 1,
    slow = 2,
    strong = 4,
    smart = 8,
    agile = 16,
}Skills;

typedef struct _Team {
int ranking;
char name;
} Team;

Team Alabama;

Team USC;

Team _function (Skills skills);
Team _function (Skills skills) {
    if (skills == (fast | smart)) {
        return Alabama; }
    if (skills == (fast | agile))
        return USC;
    else
        return nil;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T01:48:33.130

当您有基于掩码的枚举时，您可以使用按位 AND 运算符检查该枚举是否满足`&`。

因此，如果您想检查技能是否又快又聪明，请这样做：

```
if ((skills & fast) && (skills & smart)) {
    // this team has the brains and speed.. possible other stuff
} 
```

或者，在这种情况下，XOR 运算符也是一个不错的选择：

```
if (skills ^ (fast | smart) == 0) {
    // this team has ONLY the brains and speed.
} 
```

最后注：

像这样定义枚举，容易得多：

```
typedef enum {
    fast   = 1 << 0,
    slow   = 1 << 1,
    strong = 1 << 2,
    smart  = 1 << 3,
    agile  = 1 << 4,
} Skills; 
```

* * *

**编辑：**

好的，因为这是一个作业，让我来解释一下它是如何工作的：

我相信你知道，你的枚举看起来像这样（二进制）：

```
(00001)
(00010)
...
(10000) 
```

现在，使用按位 OR 运算符`|`，您可以将两种技能合并在一起：

```
 00001
OR 01000
   _____
   01001 
```

然后，我们可以使用以下命令检查新的多技能枚举是否具有某些特定技能`&`：

```
 01001
AND 01000
    _____
    01000 != 0 (aka true) 
```

为了更高级，我们使用 XOR，根据定义，`0`如果两个位相等，则将结果位设置为：

```
 01001
XOR 01000
    _____
    00001 != 0 (aka true)

    01001
XOR 01001
    _____
    00000 == 0 (aka false) 
```

# .net - .NET Framework 4.5 是否与 IIS7 兼容？

> ID：12255748
> 
> 赞同：1
> 
> 时间：2012-09-04T01:33:03.627
> 
> 标签：.net, iis, iis-7.5

.NET Framework 4.5 及其附带的所有优点（例如 MVC4）是否与 IIS7 兼容？还是必须在 IIS 7.5 上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T02:12:19.070

.NET Framework 4.5 是 4.0 Framework 的超集。是的，它适用于 IIS 7.5，如果您将应用程序池配置为使用 4。

# hibernate - 休眠如何保存多对一

> ID：12255752
> 
> 赞同：0
> 
> 时间：2012-09-04T01:34:02.023
> 
> 标签：hibernate, transactions

我有两个实体`Equipement`，`Company`像这样：

```
public class Equipement{
  String type ;
  Company company ;

  @ManyToOne(cascade = CascadeType.ALL)
  public Company getCompany(){
    return this.company ;
  }
}

public class Company{
  // fields getters setters ..
} 
```

每个`Equipement`都是从 a 购买的`Company`，我需要创建`Company`然后将其注入`Equipement`

```
Session session = SessionFactory.openSession() ;
Transaction tx = session.beginTransaction() ;

Equipement equipement = new Equipement() ;
Company company = new company() ;
equipement.setCompany(company) ;
session.save(equipement) ;

tx.commit() ;
session.close() ; 
```

这给了我一个例外

```
TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: org.marsamaroc.mmapp.domain.Company 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:49:43.707

尝试

```
public class Company 
{
    @OneToMany(cascade = CascadeType.ALL)
    public Set<Equipement> getEquipements() { ... }
} 
```

和

```
...
Session session = SessionFactory.openSession() ;
Transaction tx = session.beginTransaction() ;

Equipement equipement = new Equipement() ;
Company company = new company() ;
equipement.setCompany(company) ;

// Save should cascade (i.e. "equipment" should be saved too).
session.save(company) ;

tx.commit() ;
session.close() ;
... 
```

顺便说一句，在英语中，它是“设备”，没有额外的“e”（以防万一！）。

# c - __in __out 在 C 中

> ID：12255753
> 
> 赞同：4
> 
> 时间：2012-09-04T01:34:10.250
> 
> 标签：c, windows

> **可能重复：**
> [__in __out __in_opt __allowed() 的目的是什么，它们是如何工作的？我应该在自己的代码中使用类似的结构吗？](https://stackoverflow.com/questions/4239809/what-is-the-purpose-of-in-out-in-opt-allowed-how-do-they-work-should)

我在下面看到了一个 C 代码：

```
DWORD  GetFileVer(__in LPTSTR FileName, __out LPTSTR lpVersion, __in DWORD nSize)
{
...
} 
```

我试图编译它但失败了。谁能告诉我是什么`__in`意思`__out`？我咨询了 MSDN，但找不到任何有用的信息。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T01:46:53.633

`__in`并且`__out`是[Microsoft*源代码注释语言*(SAL](http://msdn.microsoft.com/en-us/library/ms235402.aspx) ) 的一部分。

> 通过使用源代码注释，您可以明确代码背后的意图。这些注释还使自动化静态分析工具能够更准确地分析您的代码，显着减少误报和漏报。

Microsoft 工具使用它们来分析代码中的简单错误。您可以在[此处查看](http://msdn.microsoft.com/en-us/library/aa383701.aspx)标题中使用的大多数简单原始注释：

> *   `_in`
>     
>     
>     
>     该函数从缓冲区中读取。调用者提供缓冲区并对其进行初始化。
>     
>     
> 
> ...
> 
> *   `_out`
>     
>     
>     
>     该函数写入缓冲区。如果用于返回值或 with `_deref`，则该函数提供缓冲区并对其进行初始化。否则，调用者提供缓冲区并且函数对其进行初始化。

可以在[此处](http://msdn.microsoft.com/en-us/library/ms182032(v=vs.110).aspx)阅读更复杂的注释，这是建议 Windows 8 开发人员坚持的内容。

正如[詹姆斯](https://stackoverflow.com/users/439751/james)指出的那样，您可以只使用预处理器定义来忽略它们：

```
#define _in 
#define _out 
```

... 等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T01:36:54.337

他们在那里告诉程序员如何使用参数。`__in`表示参数是只读的，即调用者不会看到对它的任何更改，`__out`表示参数由函数填充，数据由调用者使用。你可以做

`#define __in`

`#define __out`

让你的程序编译。

也阅读文档。

# c# - 每当 C# 中的 WindowState 更改时，如何触发某些内容？

> ID：12255756
> 
> 赞同：15
> 
> 时间：2012-09-04T01:34:13.510
> 
> 标签：c#, windowstate

所以我想立即，因为这部分程序依赖于速度，当我的主窗体中的窗口状态发生变化时触发一个函数。我需要它是这样的：

```
private void goButton_Click(object sender, EventArgs e)
{
   //Code
} 
```

我检查了表单的事件选项卡，我没有 WindowStateChanged 等。我该怎么做？

表单将调整很多大小，因此无法检查大小何时更改。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-04T01:39:51.467

[Resize](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resize)事件（或[SizeChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.sizechanged) ）将在 WindowState 更改时触发。

* * *

附带说明一下，WPF 确实为此直接包含一个[StateChanged事件。](http://msdn.microsoft.com/en-us/library/system.windows.window.statechanged.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-23T07:34:45.240

我希望我参加聚会不会太晚。

我选择实现它的方式非常简单，不需要分配全局变量，只需在调用`WindowState`之前和之后检查表单的值`base.WndProc`：

```
 protected override void WndProc(ref Message m)
    {
        FormWindowState org = this.WindowState;
        base.WndProc(ref m);
        if (this.WindowState != org)
            this.OnFormWindowStateChanged(EventArgs.Empty);
    }

    protected virtual void OnFormWindowStateChanged(EventArgs e)
    {
        // Do your stuff
    } 
```

底线 - 它有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T01:45:18.347

[您可以尝试按照此链接](http://blogs.msdn.com/b/jfoscoding/archive/2006/06/23/644336.aspx)的建议覆盖该`WndProc`功能。

从帖子：

```
protected override void WndProc(ref Message m) 
{
    if (m.Msg == /*WM_SIZE*/ 0x0005)
    {
        if(this.WindowState == FormWindowState.Minimized) 
        {
            // do something here
        }
    }

    base.WndProc(ref m);
} 
```

`Resize`此代码仅在触发事件时检查表单状态。

或者，您可能只是抓住表单的`Resize`事件并从那里检查窗口状态。但是我听说当控件（或表单？）最大化时它不会触发。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T01:41:58.490

您可以使用它从另一个线程更改窗体的窗口状态。这适用于 .Net Framework 3.5

```
Invoke(new Action(() => { this.WindowState = FormWindowState.Normal; })); 
```

我希望这可以帮助你。

```
public partial class Form1 : Form {
private FormWindowState mLastState;
public Form1() {
  InitializeComponent();
  mLastState = this.WindowState;
}
protected override void OnClientSizeChanged(EventArgs e) {
  if (this.WindowState != mLastState) {
    mLastState = this.WindowState;
    OnWindowStateChanged(e);
  }
  base.OnClientSizeChanged(e);
}
protected void OnWindowStateChanged(EventArgs e) {
  // Do your stuff
}
} 
```

# dynamics-nav - 运行 RTC 页面包含加载项控件时发生错误

> ID：12255773
> 
> 赞同：1
> 
> 时间：2012-09-04T01:36:51.987
> 
> 标签：dynamics-nav

我正在关注 Microsoft 的“创建和使用 RoleTailored 客户端控件加载项”。所有步骤都已完成，但是当我运行表单（客户卡）时，出现错误：“该页面包含不允许的控件加载项。请联系您的系统管理员”。

你有什么主意吗？

谢谢你，马卡拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:58:22.873

确保您已使用 NAV 正确注册 DLL。以下来自 MSDN 的指南描述了如何注册 DLL；

*   [http://msdn.microsoft.com/en-us/library/dd983803.aspx](http://msdn.microsoft.com/en-us/library/dd983803.aspx)
*   [http://msdn.microsoft.com/en-us/library/dd983818.aspx](http://msdn.microsoft.com/en-us/library/dd983818.aspx)

# sql-server - 使用企业库5的动态连接字符串

> ID：12255778
> 
> 赞同：1
> 
> 时间：2012-09-04T01:37:49.337
> 
> 标签：sql-server

请问您是否有我可以开始使用 Enterprise Library 5 应用程序块的示例代码片段？我的要求是在运行时动态更改连接字符串。连接字符串不会来自配置文件，而是来自 sql server 数据库。然后，sql server 数据库将有一个表，其中包含将由一组管理员维护的不同数据库的连接字符串列表。最初，这个连接字符串表将包含到 DB2 和 SQL Server 数据库的连接。

我检查了这个链接：[在运行时更改 conn 字符串](https://stackoverflow.com/questions/326365/changing-connection-string-at-runtime-in-enterprise-library)

但是我不能让它工作。在企业库中执行此操作有简单的方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T01:47:27.453

连接到您的第一个数据库，提取连接字符串列表，然后连接到另一个数据库，如下所示：

database mydb = new Microsoft.Practices.EnterpriseLibrary.Data.Sql.SqlDatabase("这里的连接字符串");

# python - 缩短python“if”语句

> ID：12255783
> 
> 赞同：1
> 
> 时间：2012-09-04T01:38:45.967
> 
> 标签：python, if-statement

我一直在使用这种低效的风格在 Python 中进行编码

```
 checkbox = self.request.get(u'checkbox') # get data from a web form
    if checkbox == u'yes':
        someclass.enabled = True
    else:
        someclass.enabled = False 
```

我该如何缩短这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T01:40:12.510

```
someclass.enabled = self.request.get(u'checkbox') == u'yes' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T01:40:56.597

您可以在没有`if`声明的情况下执行此操作：

`someclass.enabled = (checkbox == u'yes')`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T01:41:02.010

您可以将值设置为语句的结果：

```
checkbox = self.request.get(u'checkbox') # get data from a web form
someclass.enabled = checkbox == u'yes' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T01:42:22.550

作为`checkbox == u'yes'`返回一个布尔值，您可以简单地将此结果直接分配给变量。

```
someclass.enabled = (checkbox == u'yes') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T01:40:43.560

也许您可以将其拆分为不同的功能：

```
def getCheckboxValue(name):
    return (self.request.get(name) == u'yes') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-04T02:57:19.583

Python 评估语句并将输出返回给语句。因此，您可以使用右侧的分配变量。

像

`variable = eval_statment`

所以你的例子将是

```
someclass.enabled = self.request.get(u'checkbox') == u'yes' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-04T05:21:05.730

有点不清楚您是否在示例中使用了布尔值，因为它们是您的问题所固有的，还是因为它们是一个方便的示例。如果您想为变量分配比布尔值更复杂的类型，您可能还需要查看 Python 的三元运算符（如果您使用的是 2.5 或更高版本）：

```
someclass.int_val = 1 if checkbox == u'yes' else 2 
```

这转化为

```
if checkbox == u'yes':
    someclass.int_val = 1
else
    someclass.int_val = 2 
```

对于布尔变量，我建议使用 Yuushi 的解决方案，但为了完整起见，它是这样的：

```
someclass.enabled = True if checkbox == u'yes' else False 
```

它的打字量大致相同，但节省了一些垂直空间，这可能很有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-04T03:25:54.543

如果您需要的不仅仅是一个布尔值，您应该考虑使用调度模式：

```
targets = {
  'yes': do_yes,
  'no': do_no,
  'maybe': do_maybe,
}

targets[self.request.get(u'tricheckbox')]()

# where do_yes, do_no, and do_maybe are the functions to call for each state. 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-09-04T08:26:21.590

As pointed-out in another answer you could use dispatch table to do different things based on a value. However using a dictionary's `get()` method rather than \performing a direct lookup would allow you to also easily handle cases where nothing matches. Since the mapping won't be used again it can be temporary and anonymous.

This approach is very generic and can expanded as necessary, but usually requires extra functions to be written. Because of the latter, for very simple cases like your example, one of the other answers would probably require the least effort.

```
def do_yes(): print 'do_yes'
def do_no(): print 'do_no'
def do_maybe(): print 'do_maybe'
def no_match(): print 'no_match'

{
  u'yes': do_yes,
  u'no': do_no,
  u'maybe': do_maybe,
}.get(self.request.get(u'checkbox'), no_match) () 
```

# javascript - Json编码js中的数据循环

> ID：12255785
> 
> 赞同：0
> 
> 时间：2012-09-04T01:39:10.657
> 
> 标签：javascript

我有 php 返回给 JS 的数据，但我不知道如何循环它来访问信息......我有这个：

```
 result = call_data('get_chat.php');
            console.log(result);
    for(var data in result){

        alert(result[data]["id"]); //says undefined

    } 
```

控制台日志显示：

```
 [{"eventtime":"0000-00-00 00:00:00","message":"test2","bywho":"dave","id":"2"},
    {"eventtime":"0000-00-00 00:00:00","message":"testttt","bywho":"dave","id":"1"}] 
```

所以我想从中循环每个数据，但我该怎么做我真的很困惑！它只是每次都说未定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T01:48:43.880

如果`typeof result === "string"`，那么您仍然需要先解析响应，然后才能对其进行迭代：

```
result = JSON.parse(call_data('get_chat.php')); 
```

然后，正如其他人指出的那样，您应该使用`for`带有 s 的简单循环`Array`：

```
for (var i = 0, l = result.length; i < l; i++) {
    console.log(result[i]["id"]);
} 
```

`for..in`循环将迭代所有可枚举的键，而不仅仅是索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T01:45:41.527

看起来您的 php 代码返回一个对象数组，因此您需要先遍历数组，然后`id`像这样访问键：

```
for (var i = 0; i < result.length; i++){
  var obj = result[i];
  console.log(obj.id); // this will be the id that you want
  console.log(obj["id"]); // this will also be the id  
} 
```

# algorithm - 放大大图

> ID：12255786
> 
> 赞同：4
> 
> 时间：2012-09-04T01:39:26.377
> 
> 标签：algorithm, zooming, image

有一张非常大的图片一次无法加载到内存中。因为它可能会导致内存不足异常。我需要把这张照片放大到小尺寸。所以我该怎么做？

简单的想法是打开一个输入流，一次处理一个缓冲区大小。但是缩放算法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:27:34.623

如果您可以逐行访问图片（例如它是[位图](http://en.wikipedia.org/wiki/Netpbm_format)），您可以做的最简单的事情就是对其进行[下采样](http://en.wikipedia.org/wiki/Downsampling)，例如仅读取每第 n 行的每第 n 个像素。

```
// n is an integer that is the downsampling factor
// width, height are the width and height of the original image, in pixels
// down is a new image that is (height/n * width/n) pixels in size
for (y = 0; y < height; y += n) {
  row = ... // read row y from original image into a buffer      
  for (x = 0; x < width; x += n) {
    down[y/n, x/n] = row[x]; // image[row,col] -- shorthand for accessing a pixel
  }
} 
```

这是一种快速而肮脏的方式，可以快速且廉价地调整原始图像的大小，而无需将整个图像加载到内存中。不幸的是，它还在输出图像中引入了锯齿（下）。处理[混叠](http://en.wikipedia.org/wiki/Aliasing)需要执行插值——仍然可以使用上述逐行方法，但涉及更多。

如果您不能轻松地逐行访问图像，例如它是 JPEG，它将数据编码为 8x8 块，您仍然可以执行类似于我上面描述的方法的操作。您只需读取一行块而不是一行像素 - 算法的其余部分将相同。此外，如果您要进行 8 倍的下采样，那么使用 JPEG 非常容易——您只需[获取每个块的 DC 系数](https://stackoverflow.com/questions/4470107/extracting-dct-coefficients-from-encoded-images-and-video)。使用这种方法也可以按 8 的倍数进行下采样。

我已经忽略了许多其他细节（例如颜色通道、像素步幅等），但这应该足以让您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T01:48:29.407

有许多不同的大小调整算法，它们提供不同级别的质量，权衡的是 CPU 时间。

我相信使用其中任何一种方法，您都应该能够相对轻松地以块的形式处理大量文件，但是，您可能应该尝试现有工具，看看它们是否已经可以处理大量文件。

我相信 Gd 图形库允许您定义它可以使用多少工作内存，因此它显然已经具有用于处理块文件的逻辑。

# python - 无法让 zinnia 在我的 django 应用程序中工作

> ID：12255788
> 
> 赞同：2
> 
> 时间：2012-09-04T01:39:36.443
> 
> 标签：python, django, zinnia

在“最新一切稳定”（python 2.7、django 1.4.1、apache 2.2.22）的环境中访问`test server/weblog/`url 时`localhost`，我得到：

```
NoReverseMatch at /weblog/

Reverse for 'zinnia_entry_add' with arguments '()' and keyword arguments '{}' not found.

Request Method:     GET
Request URL:    http://127.0.0.1/weblog/
Django Version:     1.4.1
Exception Type:     NoReverseMatch
Exception Value:    

Reverse for 'zinnia_entry_add' with arguments '()' and keyword arguments '{}' not found.

Exception Location:     /usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py in render, line 424
Python Executable:  /usr/bin/python
Python Version:     2.7.3 
```

摘自`settings.py`：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.admin',
    'django.contrib.staticfiles',
    'django.contrib.admindocs',
    'django.contrib.messages',
    'django.contrib.comments',
    'image_labeler',
    'tagging',
    'mptt',
    'zinnia',
)

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.i18n',
    'django.core.context_processors.request',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'zinnia.context_processors.version',
    ) 
```

并从`urls.py`：

```
urlpatterns = patterns('',
    # Example:
    # (r'^lastpixel/', include('lastpixel.foo.urls')),

    # Uncomment the admin/doc line below and add 'django.contrib.admindocs' 
    # to INSTALLED_APPS to enable admin documentation:
    # (r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    (r'^weblog/', include('zinnia.urls')),
    (r'^comments/', include('django.contrib.comments.urls')),
    (r'^admin/', include(admin.site.urls)),
    (r'^$', views.Index),
    (r'^login/?$', views.Login),
    (r'^logout/?$', views.Logout),
    (r'^register/?$', views.Register),
    (r'^i$', include('image_labeler.urls')),
    (r'^i/', include('image_labeler.urls')),
    (r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': '/home/lastpixel/web/media', 'show_indexes': True}),
    (r'^.*$', views.Index),
) 
```

该应用程序以其他方式工作（没有百日草博客）。知道我可能做错了什么吗？非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:16:46.397

更新百日草后我遇到了类似的问题。这帮助了我，虽然我没想到mysql中有一个解决方案：

首先，编辑`/etc/my.conf`

```
[client]
default-character-set=utf8

[mysqld]
default-character-set = utf8
skip-character-set-client-handshake
character-set-server = utf8
collation-server = utf8_general_ci
init-connect = SET NAMES utf8 
```

二、重启mysql

取自： [github上的zinnia](https://github.com/Fantomas42/django-blog-zinnia/issues/144)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-24T20:41:28.427

这很可能是一个命名空间问题。在您的错误页面中，您是否看到内联错误突出显示了类似的内容`{% block 'zinnia:zinnia_entry_add' %}`？这是`zinnia`名称空间的`zinnia:`一部分，由该定义的部分指示。如果您看到类似这样的内容，您可能只需要将正确的命名空间添加到您的 URL：

```
urlpatterns = patterns('',
    #.....
    (r'^weblog/', include('zinnia.urls', namespace="zinnia")),
    #.....
) 
```

# python - 在控制台窗口中以横向树格式漂亮打印输出

> ID：12255793
> 
> 赞同：5
> 
> 时间：2012-09-04T01:40:24.303
> 
> 标签：python, console, pretty-print

我有一本使用 Python 创建的字典。

```
d = {'a': ['Adam', 'Book', 4], 'b': ['Bill', 'TV', 6, 'Jill', 'Sports', 1, 'Bill', 'Computer', 5], 'c': ['Bill', 'Sports', 3], 'd': ['Quin', 'Computer', 3, 'Adam', 'Computer', 3], 'e': ['Quin', 'TV', 2, 'Quin', 'Book', 5], 'f': ['Adam', 'Computer', 7]} 
```

我想以横向树格式而不是在控制台上打印出来。我尝试过漂亮的打印，但是当字典变长时，它变得难以阅读。

例如，使用这个字典，它会返回：

```
a -> Book -> Adam -> 4
b -> TV -> Bill -> 6
  -> Sports -> Jill -> 1
  -> Computer -> Bill -> 5
c -> Sports -> Bill -> 3
d -> Computer -> Quin -> 3
              -> Adam -> 3
e -> TV -> Quin -> 2
    Book -> Quin -> 5
f -> Computer -> Adam -> 7 
```

本质上，漂亮的打印是按活动组织的，或者是列表中第二个位置的项目，然后是名称，然后是数字。

上面的示例输出只是一个示例。我尝试使用[Pretty print 一棵树](https://stackoverflow.com/questions/1733311/pretty-print-a-tree)，但无法弄清楚如何将其转换为横向格式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-23T11:23:47.293

您可以查看[ETE 工具包](http://ete.cgenomics.org)的代码。[_asciiArt](https://github.com/jhcepas/ete/blob/master/ete_dev/coretype/tree.py#L1363)函数可以生成很好的树表示，即使[有内部节点标签](https://stackoverflow.com/a/11757919)

```
from ete2 import Tree
t = Tree("(((A,B), C), D);")
print t

#               /-A
#          /---|
#     /---|     \-B
#    |    |
#----|     \-C
#    |
#     \-D 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T09:39:12.573

这就是我将如何做到的。由于树只有两层深——不管你想要的输出格式似乎暗示了什么——没有必要使用递归来遍历它的内容，因为迭代工作得很好。可能这与您引用的#​​f 代码完全不同，因为我不懂该语言，但它更短且更具可读性——至少对我而言。

```
from itertools import izip

def print_tree(tree):
    for key in sorted(tree.iterkeys()):
        data = tree[key]
        previous = data[0], data[1], data[2]
        first = True
        for name, activity, value in izip(*[iter(data)]*3):  # groups of three
            activity = activity if first or activity != previous[1] else ' '*len(activity)
            print '{} ->'.format(key) if first else '    ',
            print '{} -> {} -> {}'.format(activity, name, value)
            previous = name, activity, value
            first = False

d = {'a': ['Adam', 'Book', 4],
     'b': ['Bill', 'TV', 6, 'Jill', 'Sports', 1, 'Bill', 'Computer', 5],
     'c': ['Bill', 'Sports', 3],
     'd': ['Quin', 'Computer', 3, 'Adam', 'Computer', 3],
     'e': ['Quin', 'TV', 2, 'Quin', 'Book', 5],
     'f': ['Adam', 'Computer', 7]}

print_tree(d) 
```

输出：

```
a -> Book -> Adam -> 4
b -> TV -> Bill -> 6
     Sports -> Jill -> 1
     Computer -> Bill -> 5
c -> Sports -> Bill -> 3
d -> Computer -> Quin -> 3
              -> Adam -> 3
e -> TV -> Quin -> 2
     Book -> Quin -> 5
f -> Computer -> Adam -> 7 
```

**更新**

要按名称而不是活动组织输出，您需要更改三行，如下所示：

```
from itertools import izip

def print_tree(tree):
    for key in sorted(tree.iterkeys()):
        data = tree[key]
        previous = data[0], data[1], data[2]
        first = True
        for name, activity, value in sorted(izip(*[iter(data)]*3)):  # changed
            name = name if first or name != previous[0] else ' '*len(name) # changed
            print '{} ->'.format(key) if first else '    ',
            print '{} -> {} -> {}'.format(name, activity, value) # changed
            previous = name, activity, value
            first = False 
```

修改后的输出：

```
a -> Adam -> Book -> 4
b -> Bill -> Computer -> 5
          -> TV -> 6
     Jill -> Sports -> 1
c -> Bill -> Sports -> 3
d -> Adam -> Computer -> 3
     Quin -> Computer -> 3
e -> Quin -> Book -> 5
          -> TV -> 2
f -> Adam -> Computer -> 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T01:56:23.860

```
def treePrint(tree):
    for key in tree:
        print key, # comma prevents a newline character
        treeElem = tree[key] # multiple lookups is expensive, even amortized O(1)!
        for subElem in treeElem:
            print " -> ", subElem,
            if type(subElem) != str: # OP wants indenting after digits
                print "\n " # newline and a space to match indenting
        print "" # forces a newline 
```

# python - 难以捕获执行就地状态更新的子流程的输出

> ID：12255802
> 
> 赞同：3
> 
> 时间：2012-09-04T01:42:03.790
> 
> 标签：python, subprocess

所以我试图将 HandBrakeCLI 的输出捕获为 Python 子进程。这不是 stderr 的问题，因为每次更新都会在类似文件的管道中创建一个新行。但是，使用标准输出，HandBrakeCLI 会进行就地更新，我很难捕获它们。我什至不知道就地更新被称为什么，这使得查找相关提示有点棘手。

到目前为止，我提出的唯一解决方案是将标准输出写入实际文件并从中读取，但我宁愿以理智的方式（在内存中）这样做。

```
COMMAND = ['HandBrakeCLI', '-v', '-i', 'in.m4v', '-o', 'out.m4v', '-Z', 'Normal']

outfile = open('output.txt', 'w')

proc = subprocess.Popen(COMMAND, stdout=outfile, stderr=subprocess.PIPE)

infile = open('output.txt', 'r')

while proc.poll() is None:
    print infile.read()
    infile.seek(0) 
```

这行得通，但必须有更好的方法。当尝试使用communicate() 或只是简单的proc.stdout.read() 时，我什么也得不到。

我究竟做错了什么？谢谢！

# 更新

根据@wim 的建议，我检查了 HandBrakeCLI 提供的原始输出，它看起来像这样：

```
\rEncoding: task 1 of 1, 0.15 % 
```

处理前缀为 \r 的标准输出的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T03:19:25.280

我认为我上面关于使用universal_newlines=True 的评论会起作用。

这是一个示例就地编写器，称为“inplace_output.py”

```
import sys
import time

def main():
    for k in range(5):
        print "{0:03d}\r".format(k),
        sys.stdout.flush()
        time.sleep(1)

if __name__ == "__main__":
    main() 
```

您可以运行它，并观察它写入 000，然后是 001，依此类推，每次都覆盖之前的输出。

这是一个将上述内容作为子进程运行的脚本，并逐行读取其输出：

```
import subprocess

cmd = ['python', 'inplace_output.py']

proc = subprocess.Popen(cmd, stdout=subprocess.PIPE, universal_newlines=True)

while True:
    out = proc.stdout.readline()
    print repr(out)
    if len(out) == 0:
        break 
```

如果想在子进程程序终止时一次收集所有输出，可以将 while 循环替换为，例如，

```
out, err = proc.communicate()
lines = out.splitlines() 
```

这些对你有用吗？

# javascript - 将组合框值传递给另一个组合框

> ID：12255806
> 
> 赞同：0
> 
> 时间：2012-09-04T01:43:01.547
> 
> 标签：javascript

我有两个组合框：

```
<select ID="combobox1"></select>
<select ID="combobox2" onChange="get_function(this, #combobox1)"></select> 
```

我想要做的是，将 combobox1 上选择的值传递给 combobox2 并调用 Javascript 函数：

```
function get_function(combobox1, combobox2)
{
var code1 = combobox1.value;
var code2 = combobox2.value;
if (!code1) return;
if (!code2) return;
alert(code1 + '-' + code2);
} 
```

我已经尝试过该代码，但它不起作用。我怎样才能做到这一点？

* * *

**更新**

问题通过以下方式解决：

```
<select ID="combobox1"></select>
<select ID="combobox2" onChange="get_function(this, "combobox1")"></select>

function get_function(combobox1, combobox2)
{
var code1 = combobox1.value;
var code2 = document.getElementById(combobox2);
if (!code1) return;
if (!code2) return;
alert(code1 + '-' + code2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:51:46.923

我建议（如果您必须使用内联 JavaScript）：

```
function get_function(combobox1, combobox2) {

    var code1 = document.getElementById(combobox1).value,
        code2 = combobox2.value;

    if (!code1 || !code2) {
        return false;
    }

    else {
        alert(code1 + '-' + code2);
    }

} 
```

并像这样调用该函数：

```
<select id="combobox1"></select>
<select id="combobox2" onchange="get_function('combobox1', this)"></select> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/cRYmN/)。

在您的原始 HTML 中，您使用错误顺序的参数调用函数，并且第二个参数（这是`id`第一个元素的）使用未加引号的字符串。另外，据我所知，您并没有尝试使用 that 获取对相关 DOM 节点（元素*本身*）的引用`id`，您只是在使用`id`(一个未加引号的字符串，因此被解释为不存在全局变量）直接。这永远行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T01:52:17.157

***[演示：](http://jsfiddle.net/fxcdb/)***

```
function get_function(el, to_el_id) {
  var to_el = document.getElementById(to_el_id);
    if (to_el) {
        to_el.value = el.value;
    }
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T06:33:14.347

```
<select ID="combobox1"></select>
<select ID="combobox2" onChange="get_function(this, "combobox1")"></select>

function get_function(combobox1, combobox2)
{
  var code1 = combobox1.value;
  var code2 = document.getElementById(combobox2);
  if (!code1) return;
  if (!code2) return;
  alert(code1 + '-' + code2);
} 
```

# java - 哪个是更好的单例实现？

> ID：12255810
> 
> 赞同：2
> 
> 时间：2012-09-04T01:44:09.840
> 
> 标签：java, design-patterns, singleton

我正在研究单例模式的这两种实现：

```
 Class Customer {

int x;
static int count = 0;

private Customer()
{
    x = 1;
}

public static Customer GetCustomer()
{
    if(count==0)
    {
        count++;
        return new Customer();
    }
    else
    {
        return null;
    }
}
} 
```

实现 1，如果类已经实例化一次，则不调用构造函数。或者

```
 Class Customer{

int x;
static int count = 0;
public Customer()
{
    if(count == 0)
    {
        x = 1;
        count++;
    }
    else
    {
        return;
    }
} 
```

实现 2，其中无论天气如何都调用构造函数，该类是否已实例化一次。我在网上观看了一个视频讲座，它说实现 2 不是首选，因为它为构造函数分配内存，尽管对象没有第二次实例化。我知道 Java 有自动垃圾收集，但只是想知道我在视频讲座中观看的内容是否相关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T01:50:11.367

有人会说*没有*一个单例的实现是正确的，但我并不完全属于那个阵营。

人们经常倾向于不好地使用它们（例如，作为上帝的对象），但它们仍然有自己的位置（在我*看来，*这与这个答案无关）。

出于此答案的目的，我假设您在需要单身人士方面做出了正确的决定，但我确实敦促您阅读其潜在问题 - 很可能有更好的方法来实现您的目标。

* * *

话虽如此，我不确定您的代码示例是否正确。单例应该返回一个且只有一个实例，如果需要，创建一个，如果没有，则为您提供先前创建的一个。

我看不到您的第一个代码示例如何履行该合同。它会在第一次被调用时给你一个新的，然后它不会给你*任何东西*。

而且您的第二个代码示例似乎根本无法阻止多个对象*。*

因此，如果这是他们提供的教育质量，我会*非常*仔细地考虑您是否要继续观看该视频。

* * *

无论如何，我更喜欢只构造一次的那个，因为你应该只拥有该类的一个对象。换句话说，一个静态`getMe()`调用被*正确*同步以防止竞争条件允许创建多个`Me`对象，并且第一次创建一个新对象，在后续调用中返回*相同的对象。*

在伪代码中，这将是这样的：

```
class Me {
    private Me() {};

    private static Me *loner = NULL;

    public static synchronised Me *getMe() {
        if loner == NULL
            loner = new Me();
        return loner;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:57:23.090

写一个正确的单例并不容易。您需要注意竞争条件并防御反射攻击。例如，可以通过反射调用私有构造函数来创建对象的另一个实例。java中最简单和最安全的单例实现是通过枚举完成的：

```
enum Singleton {
    INSTANCE;
} 
```

这是因为枚举常量被 JLS 指定为单例（JLS 的第 8.9 节）：

> 枚举类型除了由其枚举常量定义的实例外，没有其他实例。

# design-patterns - 我怎样才能拥有一个遵守开闭原则的行为丰富的域实体？

> ID：12255812
> 
> 赞同：7
> 
> 时间：2012-09-04T01:44:18.060
> 
> 标签：design-patterns, domain-driven-design, open-closed-principle

开[闭原则](http://en.wikipedia.org/wiki/Open/closed_principle)指出：

> 软件实体（类、模块、函数等）应该对扩展开放，对修改关闭

我现在正在设计一个域，并在我的域实体中包含相当多的行为。我正在使用域事件并将依赖项注入方法中，因此请确保我的实体不与外部影响耦合。但是，我突然想到，如果客户以后想要更多功能，我将不得不违反 OCP 并破解打开这些域实体以添加功能。行为丰富的领域实体如何与开闭原则和谐相处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T03:12:41.280

在设计类时牢记开闭原则 (OCP) 很有用，但立即使类“关闭以供修改”并不总是可行或可取的。我认为单一职责原则（SRP）在实践中更有用——只要一个类只做一件事，如果对那一件事的要求发生变化，就可以修改它。

此外，随着时间的推移，SRP 会导致 OCP；如果您发现自己经常更改一个类，您最终会对其进行重构，以便将更改部分隔离在一个单独的类中，从而使原始类更加封闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:12:18.560

答案很简单：工厂方法和接口 + 组合。

Open for extension 意味着您使用新的子类添加新功能。

要启用它，您必须使用工厂来创建域对象。我通常将我的存储库用作工厂。

如果您针对接口而不是具体代码进行编码，您将可以轻松添加新功能：

*   用户
*   IManager : IUser （添加一些管理器功能）
*   ISupervisor : IUser （添加主管功能）

功能本身可以是您使用组合包含的小类：

```
public class ManagerSupervisor : User, IManager, ISupervior
(
    public ManagerSupervisor()
    {
        // used to work with the supervisor features.
        // without breaking Law Of Demeter
        _supervisor = new SuperVisorFeatures(this);

    }
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T00:38:02.387

如果没有一些具体的例子，这是一个很难解释的问题。我建议您阅读 Robert Martin 的书《敏捷软件开发、原则、模式和实践》。这本书也是开闭原则的来源。

具有丰富行为的领域对象与开闭原则不冲突。如果他们没有行为，您将无法创建合理的扩展。应用开闭原则的关键是预测未来的变化并创建新的接口来履行角色并使他们保持单一职责。

我将讲述一个在实际代码中应用开闭原则的故事。希望它有所帮助。

我有一个在开始时发送消息的 Sender 类：

```
package com.thinkinginobjects;

public class MessageSender {

private Transport transport;

public void send(Message message) {
    byte[] bytes = message.toBytes();
    transport.sendBytes(bytes);
}
} 
```

有一天，我被要求分批发送 10 条消息。一个简单的解决方案是：

包 com.thinkinginobjects；

公共类 MessageSenderWithBatch {

```
private static final int BATCH_SIZE = 10;

private Transport transport;

private List<Message> buffer = new ArrayList<Message>();

public void send(Message message) {
    buffer.add(message);
    if (buffer.size() == BATCH_SIZE) {
        for (Message each : buffer) {
            byte[] bytes = each.toBytes();
            transport.sendBytes(bytes);
        }
                    buffer.clear();
    }
}
} 
```

然而，我的经验告诉我，这可能不是故事的结局。我预计人们将需要不同的方式来批处理消息。因此，我创建了一个批处理策略并让我的 Sender 使用它。**请注意，我在这里应用了开闭原则。**如果将来我有新的批处理策略，我的代码可以扩展（通过添加新的 BatchStrategy），但接近修改（通过不修改任何现有代码）。然而，正如 Robert Martin 在他的书中所说，当代码对某些类型的更改开放时，它也接近于其他类型的更改。如果将来有人想在发送后通知组件，我的代码不会针对这种类型的更改开放。

```
package com.thinkinginobjects;

public class MessageSenderWithStrategy {

private Transport transport;

private BatchStrategy strategy;

public void send(Message message) {
    strategy.newMessage(message);
    List<Message> messages = strategy.getMessagesToSend();

    for (Message each : messages) {
        byte[] bytes = each.toBytes();
        transport.sendBytes(bytes);
    }
    strategy.sent();
}
}

package com.thinkinginobjects;

public class FixSizeBatchStrategy implements BatchStrategy {

private static final int BATCH_SIZE = 0;
private List<Message> buffer = new ArrayList<Message>();

@Override
public void newMessage(Message message) {
    buffer.add(message);    
}

@Override
public List<Message> getMessagesToSend() {
    if (buffer.size() == BATCH_SIZE) {
        return buffer;
    } else {
        return Collections.emptyList();
    }
}

@Override
public void sent() {
    buffer.clear(); 
}

} 
```

为了完成这个故事，几天后我收到了一个要求，要求每 5 秒发送一次批量消息。我的猜测是正确的，我可以通过添加扩展而不是修改我的代码来满足要求：

```
package com.thinkinginobjects;

public class FixIntervalBatchStrategy implements BatchStrategy {

private static final long INTERVAL = 5000;

private List<Message> buffer = new ArrayList<Message>();

private volatile boolean readyToSend;

public FixIntervalBatchStrategy() {
    ScheduledExecutorService executorService = Executors.newScheduledThreadPool(1);
    executorService.scheduleAtFixedRate(new Runnable() {

        @Override
        public void run() {
            readyToSend = true;

        }
    }, 0, INTERVAL, TimeUnit.MILLISECONDS);
}

@Override
public void newMessage(Message message) {
    buffer.add(message);
}

@Override
public List<Message> getMessagesToSend() {
    if (readyToSend) {
        return buffer;
    } else {
        return Collections.emptyList();
    }
}

@Override
public void sent() {
    readyToSend = false;
    buffer.clear();
}
} 
```

*   免责声明：代码示例属于 www.thinkingInObjects.com

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T00:50:29.350

## 您在域事件模式的正确轨道上。

你不必打开你的课程。您只需要附加额外的条件事件处理程序。

域事件-事件处理程序关系可以是一对多的，并且处理程序可以根据域事件参数的具体类型触发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T01:07:03.927

简单的答案是确保：

1.  它可以很好地完成任务，因此如果您发现它有问题，则不需要您稍后对其进行修改。虽然开放/封闭原则不涵盖错误，但仅更改。
2.  它鼓励替换，即它实现了一个合理的接口。该组件应该换成另一个而不是修改。
3.  使其可配置，任何可以更改的硬编码参数都应该是可配置的。
4.  将可能更改的代码外部化，使用控制反转来导出可能需要更改的任何功能。

在繁重的组件中实现打开/关闭原则通常要容易得多，但在应用程序流控制和业务逻辑通常需要最大更改的应用程序部分应用相同的原则要困难得多。通过配置运行工作流是理想的。

领域驱动设计很难与良好的编程设计原则相协调，DDD 的关键部分是语言和基本原理，以使低级概念远离业务领域，并使业务模型保持高层次的语言。用户和业务使用，即“通用语言”，以防止对业务模型的软件/技术污染。

# mysql - 使用sql语句组合两行

> ID：12255822
> 
> 赞同：1
> 
> 时间：2012-09-04T01:46:09.297
> 
> 标签：mysql

我有一个关于使用 sql 语句组合表中的两行的 MySQL 语句的查询。最初，我已经实现了在数据网格视图中显示员工班次的代码。

```
LocationName | StationName | 12:00 - 13:00 | 13:00 - 14:00 | 14:00 - 15:00
T2           | Counter     | Michael Joyce | Michael Joyce | Michael Joyce 
```

如您所见，在同一个 Location 和 Station 下有两名员工。下一步，我将使用 SQL 语句输入格式并最终将 SQL 语句用于 reportviewer。

这是我试图以与上图相同的格式显示的 SQL 语句。

```
select
  z.LocationName,
  z.StationName,
  a.12001300,
  b.13001400,
  c.14001500
from (SELECT DISTINCT
        LocationName,
        StationName
      FROM satsschema.employeeslot
      where AllocationDate = '10-Aug'
          and LocationName = 'T2 PML'
          and StationName is not null) z
  left outer join (SELECT
                     LocationName,
                     StationName,
                     EmpName         AS '12001300'
                   FROM satsschema.employeeslot
                   WHERE Assigned = true
                       and AllocationDate = '10-Aug'
                       and (EmpTime = '12:00:00' && EmpTime < '13:00:00')) a
    on z.LocationName = a.LocationName
      and z.StationName = a.StationName
  left outer join (SELECT
                     LocationName,
                     StationName,
                     EmpName         AS '13001400'
                   FROM satsschema.employeeslot
                   WHERE Assigned = true
                       and AllocationDate = '10-Aug'
                       and (EmpTime = '13:00:00' && EmpTime < '14:00:00')) b
    on a.LocationName = b.LocationName
      and a.StationName = b.StationName
  left outer join (SELECT
                     LocationName,
                     StationName,
                     EmpName         AS '14001500'
                   FROM satsschema.employeeslot
                   WHERE Assigned = true
                       and AllocationDate = '10-Aug'
                       and (EmpTime = '14:00:00' && EmpTime < '15:00:00')) c
    on b.LocationName = c.LocationName
      and b.StationName = c.StationName 
```

上面显示的这条 SQL 语句显示了以下与我想要的不匹配的结果。它显示如下：

```
LocationName | StationName | 12:00 - 13:00 | 13:00 - 14:00 | 14:00 - 15:00
T2           | Counter     | Michael       | Michael       | Michael 
```

如您所见，它仅在 Location 和 Station 中显示一名员工。如果 Location and Station 内有多个员工，我还可以看到其他员工的 SQL 语句怎么办。有什么意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:43:00.293

使用 GROUP_CONCAT。请参阅[我可以将多个 MySQL 行连接到一个字段中吗？](https://stackoverflow.com/questions/276927/can-i-concatenate-multiple-mysql-rows-into-one-field)

类似于以下内容：

```
SELECT z.LocationName, z.StationName, Block12.EmpList, Block13.EmpList, Block14.EmpList
FROM satsschema.employeeslot z
LEFT OUTER JOIN
(
    SELECT LocationName, StationName, GROUP_CONCAT(EmpName) AS EmpList
    FROM satsschema.employeeslot
    WHERE Assigned = true
        AND AllocationDate = '10-Aug'
        AND (EmpTime = '12:00:00' && EmpTime < '13:00:00')
    GROUP BY LocationName, StationName
) Block12
ON z.LocationName = Block12.LocationName
    AND z.StationName = Block12.StationName
LEFT OUTER JOIN
(
    SELECT LocationName, StationName, GROUP_CONCAT(EmpName) AS EmpList
    FROM satsschema.employeeslot
    WHERE Assigned = true
        AND AllocationDate = '10-Aug'
        AND (EmpTime = '13:00:00' && EmpTime < '14:00:00')
    GROUP BY LocationName, StationName
) Block13
ON z.LocationName = Block13.LocationName
    AND z.StationName = Block13.StationName
LEFT OUTER JOIN
(
    SELECT LocationName, StationName, GROUP_CONCAT(EmpName) AS EmpList
    FROM satsschema.employeeslot
    WHERE Assigned = true
        AND AllocationDate = '10-Aug'
        AND (EmpTime = '14:00:00' && EmpTime < '15:00:00')
    GROUP BY LocationName, StationName
) Block14
ON z.LocationName = Block14.LocationName
    AND z.StationName = Block14.StationName
WHERE AllocationDate = '10-Aug'
GROUP BY z.LocationName, z.StationName 
```

# facebook - 在没有任何规则的情况下允许发布到 Facebook 提要？

> ID：12255823
> 
> 赞同：-1
> 
> 时间：2012-09-04T01:46:28.780
> 
> 标签：facebook, feed, rules

当玩家完成任务时，我会自动在他的订阅源上发布如下内容：

```
$url = "https://graph.facebook.com/42343242343/feed";

'name'          => "Title3",
'link'          => "www.google.com",
'description'   => 'description here', 
```

从技术上讲，现在一切正常，但 Facebook 的规则/政策对我来说并不是很清楚。我每次都必须征求玩家的许可吗？（不是技术许可，因为他们在第一次登录时就已经给了它）

我只想在玩家执行某些操作时自动发布。这是一款不在 Facebook 上但使用 Facebook 登录的游戏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T20:36:44.440

是的，Facebook 政策 ( [http://developers.facebook.com/policy/](http://developers.facebook.com/policy/) ) 在这里并不是很清楚，因为它指出：

> 如果用户授予您发布权限，则您代表用户执行的操作必须符合用户的预期并且与用户在您的应用中的操作一致。

但不幸的是，您很可能每次都必须征求玩家的许可。请参阅[https://developers.facebook.com/docs/guides/policy/policy_checklist/english/](https://developers.facebook.com/docs/guides/policy/policy_checklist/english/)上的说明：

> 应用程序不会代表用户自动发布 Stream 故事，而是通过为用户提供单击按钮或选中明确说明其内容将被共享的框的选项来获得同意。

这当然与第一次登录时给予的许可无关。

# php - Apache 首选 DocumentRoot 路径

> ID：12255824
> 
> 赞同：0
> 
> 时间：2012-09-04T01:46:43.163
> 
> 标签：php, apache, apache2, directory, document-root

我想知道将我的网站放在`/var/www`or中是否有区别`/home/myuser/public/sites`。刚刚看到一些教程指向前者，然后其他教程指向后者，但没有提到将其放置在那里的一些关键好处。如果您知道一些最能解释这一点的文章，请与我分享。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:08:03.223

我能想到的从一个目录到另一个目录的主要区别是它是否位于单独的分区上并且您设置了不同的标志，例如`noexec`or `nosuid`。除此之外，您使用的实际目录并不重要。

然而，话虽如此，默认情况下，用户的主目录是在 中创建的`/home`，因此特别是在共享托管服务器之类的东西中，将 作为用户主目录的子目录是有意义`DocumentRoot`的，这样他们就可以轻松地修改文件，而不必担心他们需要授予他们离开主目录的权限，因此可以很容易地通过 FTP 或 SFTP 等使用 chroot 的方式“锁定”它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T01:51:43.727

先生，没有优点或缺点。你可以自由地使用你想要的东西。

# oracle - oracle日期格式错误

> ID：12255825
> 
> 赞同：1
> 
> 时间：2012-09-04T01:46:47.560
> 
> 标签：oracle, date

我正在使用 oracle 表来提取数据。在其中一个查询中，我使用“where”在日期之间进行过滤。

```
To_Date(VDATU,'DD-MON-YYYY') >= '03-Jun-2012'
AND To_Date(VDATU,'dd-mon-yy') <= '04-Sep-2012' 
```

我收到错误，

```
ORA-01861: literal does not match format string 
```

我尝试使用 ('dd-mm-yy') 但仍然给出相同的错误。可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:17:37.197

您正在将 a`DATE`与 a进行比较`String`，请尝试：

```
To_Date(VDATU,'DD-MON-YYYY') >= To_Date('03-JUN-2012','DD-MON-YYYY')
AND To_Date(VDATU,'dd-mon-yy') <= To_Date('04-SEP-2012','DD-MON-YYYY') 
```

如果`VDATU`已经是一个日期，你不应该转换它`to_date`，你所要做的就是：

```
VDATU >= To_Date('03-JUN-2012','DD-MON-YYYY')
AND VDATU <= To_Date('04-SEP-2012','DD-MON-YYYY') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T02:23:26.140

您正在尝试将`VDATU`（大概是 a `VARCHAR2`）转换为日期。

在一个地方你有`DD-MON-YYYY`，在另一个地方你有`dd-mon-yy`。

哪一个？ `VDATU`不能对两者都有效。

# database - 如何标准化用户输入的数据？

> ID：12255830
> 
> 赞同：1
> 
> 时间：2012-09-04T01:47:36.893
> 
> 标签：database, user-input

我有一个我正在尝试“标准化”的数据表。输入到表格中的数据不是静态的或标准化的（就像答案的下拉列表一样），给我留下了多种答案，我想要一个静态的、通用的答案。

例如，假设数据库中有一个名为“宠物类型”的列。由于用户输入没有标准化，人们可以输入特定类型宠物的变体，而不是宠物的一般形式。因此，不仅仅是输入“Dog”，还有不同版本的狗，如“Collie”、“Mutt”、“Labrador”等。

我该如何将这些答案转录成它们的通用形式——用“狗”（或“猫”或“鸟”等）替换表中的柯利/穆特/拉布拉多/等答案？

我意识到需要某种形式的手动输入“翻译”功能。我的直觉反应是，一个长跨度的堆叠 if 语句列表效率低下，并且难以控制和扩展。

是否有某种流程或系统可以做这样的事情？像某种类型的查找表系统/矩阵？

我假设一个 foreach 循环遍历记录数组是最合适的。然后在 foreach 循环的每次迭代中，你会让它对 pet 变量与某种类型的列表（我会手动创建）进行测试/比较——但是你会使用这个查找表/列表? 还是流程的这一步？您会将它作为某种类型的 SQL 数据库/表、数组、CSV 文件等吗？

然后，一旦这个比较完成并确定了宠物类型的“翻译”等价物，foreach 循环将更新记录的特定行，或者覆盖旧的非标准化值，或者只是添加新的标准化值等效于一个新列（供以后验证）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:52:14.390

> 我的直觉反应是，一个长跨度的堆叠 if 语句列表效率低下，并且难以控制和扩展。

100% 正确，因此您实际上只有一个选择：手动检查数据库并清理它。完成后，您将需要使用停止列表而不是原始文本输入来限制用户输入。

根据您的用户，您可能想查看 Stackoverflow 如何处理标签 - 本质上是允许任何人为您进行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-28T18:16:17.863

但是，如果您有 150000 条记录或执行 SQL 查找替换查询可能有助于清理数据以开始。

这对我来说听起来像是一个数据规范化项目，虽然我在实践中没有很多经验，但理论上你从如何输入数据开始。例如，自由文本字段允许用户输入他们想要的任何内容。您希望在清理数据后更改它。并且首先要知道数据是如何进入的。是自由文本、项目符号还是下拉菜单？等等

您还需要创建一个包含所有标准化术语的数据字典，以替换大量变体。
然后，您可以创建一个更新查询，该查询将遍历旧数据并使用更新查询和通配符将其更新为新数据。

[https://support.office.com/en-us/article/Use-the-Find-and-Replace-dialog-box-to-change-data-2eee8d02-5a40-4328-ba56-ec0406865680](https://support.office.com/en-us/article/Use-the-Find-and-Replace-dialog-box-to-change-data-2eee8d02-5a40-4328-ba56-ec0406865680)

这可能是一种更自动化的数据清理方式，而不是查找和替换。

-铝

# javascript-events - 如何知道您在右键单击 google-chrome-extension 的内容

> ID：12255834
> 
> 赞同：1
> 
> 时间：2012-09-04T01:48:22.350
> 
> 标签：javascript-events, google-chrome-extension

我正在尝试为基本喜欢的图片编写 Google Chrome 扩展程序。因此，您在页面上看到了您想要记住但又不想手动保存或保存图像 url 的图片。您将能够右键单击图像并将其添加到使用此扩展程序的图像收藏夹中。

除了当用户右键单击图片时，我已经弄清楚了一切，我无法弄清楚如何从该操作中获取图像 url。该解决方案需要在 Internet 上的任何正常页面上运行。我不确定我是否需要一个普通的听众或什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:17:37.750

您的上下文菜单项的`onclick`处理程序应该期望一个[`onClickData`](http://developer.chrome.com/extensions/contextMenus.html#type-OnClickData)对象作为其第一个参数。该对象将包含一个`srcUrl`属性，该`src`属性是被右键单击的图像的属性。

你会像这样设置你的菜单项：

```
chrome.contextMenus.create({
    title: "Remember image as favorite",
    contexts: ["image"],
    onclick: function(data) {
        console.log("we're about to save " + data.srcUrl);
        // do whatever you need with data.srcUrl to save it
    }
}); 
```

# java - 使用从 TextView 中提取的查询搜索 google

> ID：12255838
> 
> 赞同：0
> 
> 时间：2012-09-04T01:48:51.357
> 
> 标签：java, android, search, textview

我想在我的应用程序中添加一个按钮，该按钮将使用特定查询搜索谷歌。查询将从 TextView 中显示的单词中提取。

这是我的文本视图

```
<TextView
    android:id="@+id/text_random_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:padding="@dimen/padding_medium"
    android:text=""
    android:textColor="#FF8800"
    android:textSize="30dp"
    tools:context=".ImHungry" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:02:03.100

根据您给出的评论，这将起到作用。

```
String search = text_random_text.getText().toString(); 
Uri uri = Uri.parse("http://www.google.com/#q=" + search); 
Intent intent = new Intent(Intent.ACTION_VIEW, uri); 
startActivity(intent); 
```

# ios - 另一个（！）活动指标问题

> ID：12255844
> 
> 赞同：0
> 
> 时间：2012-09-04T01:49:10.133
> 
> 标签：ios, uiwebview, uiactivityindicatorview

好吧，在阅读了一堆关于这个问题的 SO 帖子之后，我仍然无法解决我的活动指示器的问题。该指示器位于其自己的视图控制器控制下的选项卡中的视图中。它有一个视图，`UIWebView`可以很好地加载本地 html 页面。视图被加载，`initWithNibName`然后`awakeFromNib`. 这是我认为相关的部分：

```
@implementation HelpViewController
@synthesize webView = _webView;
@synthesize back = _back;
@synthesize forward = _forward;
@synthesize aI = _aI;

- (void) viewDidLoad {
_aI = [[UIActivityIndicatorView alloc]
           initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
[_aI stopAnimating];

// Now add the web view

NSString *filePath = [[NSBundle mainBundle]
                      pathForResource:@"Help"
                      ofType:@"html"];

[self.view addSubview:_webView];
_webView.delegate = self;
NSURL* fileURL = [NSURL fileURLWithPath:filePath];
NSURLRequest *request = [NSURLRequest requestWithURL:fileURL];
[_webView loadRequest:request];
[super viewDidLoad];
}

-(void) webViewDidStartLoad:(UIWebView *)webView {   
[_aI startAnimating];
_back.enabled = NO;
_forward.enabled = NO;   
}

-(void) webViewDidFinishLoad:(UIWebView *)webView {  
[_aI stopAnimating];

if (webView.canGoBack) {
    _back.enabled = YES;
    _back.highlighted = YES;
}

if (webView.canGoForward) {
    _forward.enabled = YES;
    _forward.highlighted = YES;
}
} 
```

导航按钮工作正常。活动指示器放置在笔尖中，但在主视图中，而不是在`webView`. 在属性中，我已经`Hides When Stopped`检查过了。如果我检查`Animating`指示器始终可见且动画，无论我如何浏览`UIWebView`.. 如果我取消选中`Animating`，`Hidden`则会自动为我检查。在这种情况下，指标永远不会出现。所以它要么总是打开，要么总是关闭。

我已经阅读了很多关于您需要在不同线程上使用指示器的情况。我不确定，但我认为这不适用于这里（我加载了一个本地 html 页面，但允许用户导航然后返回到本地页面）。但是，我似乎有些脱节；也许是指标在主视图中但页面在`webView`？或者我没有以正确的方法调用事物。或者谁知道...感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T01:52:40.523

您覆盖并永远不会将其放置`_aI`在`viewDidLoad`您的视图层次结构中，因此您向其发送消息的对象永远不可见，并且放置在界面构建中的活动指示器永远不会改变其状态，这就是为什么它总是动画或隐藏的原因。

# dns - 域的 DNS 设置错误

> ID：12255851
> 
> 赞同：1
> 
> 时间：2012-09-04T01:50:24.050
> 
> 标签：dns

我从我在冰岛的域名注册处收到以下信息：

`zone gsap.is`其设置`nameservers`似乎不符合`ISNIC's`代表团`.IS`的要求。

要求您的托管服务提供商为名称服务器添加 PTR 记录：

```
4.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.0.1.0.0.1.8.8.c.f.7.0.6.2.ip6.arpa. IN PTR A.NS.ZERIGO.NET. 
```

你能告诉我你是否可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:23:15.047

They want your DNS server to have reverse mappings in the DNS pointing from its IP addresses back to its name. That is an unusual requirement, yet that's what they want to see.

Your name server has two IP addresses: 64.27.57.11 and 2607:fc88:1001:1::4.

The reverse mapping for 64.27.57.11 exists and points back to the correct name:

```
dig -x 64.27.57.11 
```

(...)

```
;; ANSWER SECTION:
11.57.27.64.in-addr.arpa. 740   IN      PTR     a.ns.zerigo.net. 
```

But the reverse mapping for 2607:fc88:1001:1::4 does not exist:

```
dig -x 2607:fc88:1001:1::4

; <<>> DiG 9.4.3-P3 <<>> -x 2607:fc88:1001:1::4
;; global options:  printcmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 19793
;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;4.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.0.1.0.0.1.8.8.c.f.7.0.6.2.ip6.arpa. IN PTR 
```

(note `NXDOMAIN`.)

I see that the reverse zone for the 2607:fc88::/32 prefix is hosted on nameservers ns1.wehostwebsites.com and ns2.wehostwebsites.com. You need to either:

*   Insert the reverse mapping into the zone file for this IP address block on the above nameservers. You would probably do this if 2607:fc88::/32 is your IP address block.
*   Get a smaller block like 2607:fc88:1001::/48 delegated to your nameservers, set them up to serve the reverse zone (1.0.0.1.8.8.c.f.7.0.6.2.ip6.arpa), and insert the reverse mapping for your nameserver into that zone. You would probably choose this option if you aren't responsible for the whole 2607:fc88::/32 block.

Either way, the reverse entry should be this one:

```
4.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.0.1.0.0.1.8.8.c.f.7.0.6.2.ip6.arpa.   IN   PTR a.ns.zerigo.net. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-14T08:52:13.493

一些 cTLD 注册机构正在推动对区域结构法规的限制。我非常喜欢这一点，但在许多情况下，当地登记处只是试图在一个大城市里清理他们自己的街道，而所有其他邻居都在同一条街道上自由地倒垃圾。

然而，本地注册机构也在 ipv6 上强制执行 RFC 是非常不寻常的。如果您不需要 ipv6 分辨率，您可能只需删除您的 AAAA 记录即可解决此问题。

显然，如果您需要 ipv6，您不应该听从我的建议，而应服从您当地的注册要求。

# java - 我怎么能把这个文件发布到谷歌？

> ID：12255852
> 
> 赞同：0
> 
> 时间：2012-09-04T01:50:29.710
> 
> 标签：java, httpwebrequest, http-post

我已经为此工作了好几天，并让它在 5 种不同的语言中工作，但 Java 拒绝合作！

我正在尝试将 Flac 文件发布到 Google 语音识别服务器，但我总是收到一条错误消息，告诉我我的 Flac 文件不正确。

这是我的代码，我疯了，有人可以指出我的错误吗？

```
File file = new File("./test.flac");
BufferedReader reader = new BufferedReader( new FileReader(file) );
String         line = null;
StringBuilder  stringBuilder = new StringBuilder();
while( ( line = reader.readLine() ) != null ) {
    stringBuilder.append( line );
}

String bob = stringBuilder.toString();
bob = URLEncoder.encode(bob, "UTF-8");  
URL google = new java.net.URL("https://www.google.com/speech-api/v1/recognize?xjerr=1&client=chromium&lang=en-US");
WebRequest test = new WebRequest( google, HttpMethod.POST);
test.setAdditionalHeader("Content-type", "audio/x-flac; rate=16000");
test.setRequestBody( bob );
WebClient webClient = new WebClient();
System.out.println( webClient.getPage( test ).getWebResponse().getContentAsString() ); 
```

# ios - 如何在 IOS 中从 UITableView 中搜索多个 NSArray

> ID：12255855
> 
> 赞同：1
> 
> 时间：2012-09-04T01:51:10.710
> 
> 标签：ios, uitableview, nsarray, uisearchbar

我想要的是能够搜索 a `UITableView`，并将其他数组缩小到单元格的 textlabel 数组的结果。这可能对任何人都没有任何意义。这是一个例子。

一个称为`titleArray`填充单元格的 textLabel 的数组：

```
“丰田雅力士”
“福特逃脱”
“福特 F-150”

```

另一个称为`detailArray`填充单元格中 textLabel 下方的详细文本标签的数组：

```
“车”
“越野车”
“卡车”

```

当我搜索“福特”时，我希望 UITableView 显示这样的单元格：

```
单元 1：福特 Escape
        越野车

单元 2：福特 F-150
        卡车

```

但它显示如下：

```
单元 1：福特 Escape
        车

单元 2：福特 F-150
        越野车

```

本质上它缩小了范围`titleArray`但不是缩小范围，`detailArray`所以它显示对象 1 & 2 from`titleArray`但 0 & 1 from `detailArray`。如果这让您感到困惑，请提出任何问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:29:08.153

为此，您最好只拥有一个阵列。有两种方法可以做到这一点：

`NSObject`1)为数组的元素创建一个自定义类（派生自），可能命名为`Vehicle`。您的车辆类将具有“名称”属性和“类型”属性。

```
NSMutableArray *vehicleArray = [[NSMutableArray alloc] init];

Vehicle *myVehicle = [[Vehicle alloc] init];
myVehicle.name = @"Ford Escape";
myVehicle.type = @"SUV";

[vehicleArray addObject:myVehicle]; 
```

2）让你的数组中的元素是 type `NSDictionary`。每个字典都有一个名称和类型的键值对。

```
NSMutableArray *vehicleArray = [[NSMutableArray alloc] init];

NSDictionary *myVehicle = [[NSDictionary alloc] initWithObjectsAndKeys:@"Ford Escape", @"name", @"SUV", @"type", nil];

[vehicleArray addObject:myVehicle]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T02:29:39.247

在您的代码中，您可能会在名为 tableView:cellForRowAtIndexPath: 的消息中创建 UITableViewCell 对象。我会针对您的问题查看此代码。当您创建/检索 UITableViewCell 时，您将填写标题和详细信息（在调试器中检查）。我注意到您所遵循的示例是创建一个精简的项目数组以响应您的搜索参数。您似乎很可能需要在减少标题数组的同时减少细节数组。您可能还需要在您的详细信息数组中进行搜索（取决于您希望应用程序如何运行）。这可能会使您的搜索逻辑复杂一些。

```
//Possible search logic
for (int iii = 0; iii < titleArray.count; iii++) {
    if (<titleArray matches search string>) {
        [titlesToDisplay addObject:[titleArray objectAtIndex:iii]];
        [detailsToDisplay addObject:[detailArray objectAtIndex:iii]];
        //Assuming that you have titles and details in corresponding slots.
    }
} 
```

现在，当您为 UITableViewCell 设置标题和详细信息设置时，您应该计算titlesToDisplay 中的条目并从titlesToDisplay 和detailsToDisplay 检索条目。

# mysql - 迁移 MySQL 服务器会中断程序

> ID：12255857
> 
> 赞同：0
> 
> 时间：2012-09-04T01:51:34.927
> 
> 标签：mysql, stored-procedures, hosting

我正在从使用 mysql 5.5 的本地客户端移动到网络服务器，网络服务器具有 mySQL 5.0.91，我无法移动在我的本地主机上运行良好的存储过程。

例如。

```
CREATE PROCEDURE `add_student`(IN section_id VARCHAR(20), IN student_id  VARCHAR(20))
BEGIN

 DECLARE EXIT HANDLER FOR 1062
    INSERT INTO error_log(status_id,Student_ID, Section_ID, status_message,time_now)
    VALUES('1062',student_id, section_id,' You are already enrolled for this Course, buddy! ', NOW());

 DECLARE EXIT HANDLER FOR 1364
    INSERT INTO error_log(status_id,Student_ID, Section_ID, status_message,time_now)
    VALUES('1364',student_id, section_id,' ???? ', NOW());

SET @section_id=section_id;
SET @student_id=student_id; 

PREPARE STMT FROM 
"INSERT INTO course(SECTION_ID,STUDENT_ID ) VALUES(?,?)";

PREPARE STMT2 FROM 
"INSERT INTO transcript(SECTION_ID,STUDENT_ID) VALUES(?,?)";

EXECUTE STMT USING @section_id,@student_id;
EXECUTE STMT2 USING @section_id,@student_id;

END 
```

在 mysql 5.5 中运行良好，但现在它给了我以下错误：#1064 - 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的 '' 附近使用正确的语法。无论如何，我是否需要寻找使用与我的本地主机相同版本的 MYSQL 的主机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:36:36.653

您如何尝试加载此程序？如果您在 .sql 文件中有这个确切的文本并且正在执行类似的操作`mysql < procedure.sql` ，它肯定会返回这样的错误。

您需要更改语句分隔符，因此 mysql 不会感到困惑——现在我打赌它认为第一个 ; 结束声明。

在程序执行之前： `DELIMITER \\`

最后一行应该是：

`END\\`

# android - 用于动画和更复杂应用程序的 android 模拟器

> ID：12255859
> 
> 赞同：0
> 
> 时间：2012-09-04T01:51:46.050
> 
> 标签：android, emulation

我已经安装了 android 开发的所有要求。

**问题：**

是否有最适合动画和动态数据的模拟器？

我知道 sdk 包的模拟器仍然适用于此，但动画太慢了..

我已经四处搜索，但仍在谈论同一个模拟器。

# jquery - 通过 Jquery Ajax 工具返回“不友好”的经典 ASP 错误消息

> ID：12255869
> 
> 赞同：1
> 
> 时间：2012-09-04T01:53:24.613
> 
> 标签：jquery, ajax, asp-classic

已经熟悉 Jquery 大约 6 个月了。为它找到了很多用途，尤其是 Jquery 的 Ajax 工具。

当我使用 .ajax() 方法向服务器端脚本发送信息时，无论出于何种原因，请求都失败了，.ajaxerror() 和 .fail 处理程序都会可靠地返回错误消息，但这两种方法似乎都需要隐藏我以前熟悉的、不友好但特定的 ASP 生成的错误消息。

取而代之的是，我收到了一条通用的“内部服务器错误”消息。任何其他经典的 ASP 恐龙知道我在说什么吗？

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:29:38.823

使用 $.ajax 错误回调函数中提供的 xhr.ResponseText。这里是一个例子。

笔记！xhr.response 文本返回代表错误页面的所有丑陋的 html 字符串。如果您想更具体，还有另一种选择。

在您的服务器端应用程序中使用 try 和 catch 子句。发现错误后，将其作为文本发送到 response.write，然后使用 response.end(); 这不是最好的方法，但它会起作用。

您的另一个选择是使用 json 来构造您捕获的错误消息和 response.write，这样 XHR 对象将以结构化的 oop 方式保存信息。

```
$.ajax({
            type: "POST",
            url: "/Administration/Create",
            data: {
                EntityParentID: data.rslt.parent.attr("id"),
                EntityName: data.rslt.name
            },
            success: function (response)
            {
                var node = data.rslt.obj;
                node.attr("id", response.EntityID);
            },
            error: function (xhr, ajaxOptions, thrownError)
            {
                alert("Error Occured During Creation of Entity.");
                alert(xhr.responseText); //This will alert an ugly html string...
                $.jstree.rollback(data.rlbk);
            },
            dataType: "json"
        }); 
```

# android - 服务器要求

> ID：12255871
> 
> 赞同：0
> 
> 时间：2012-09-04T01:53:34.147
> 
> 标签：android, database, webserver

我们有兴趣购买用于存储 Android 应用程序使用的 MySQL 数据库的服务器。只是为了理解，服务器只需要支持MySQL，还是移动使用服务器的其他要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:03:36.727

您的 Android 应用程序可能无法直接与远程 MySQL 数据库一起使用。

通常，您会使用编写一个 Web 服务 API 来充当中间件，与您的 Android 应用程序和数据库进行通信。您的 Android 应用程序会向 Web 服务发出 HTTP 请求，而后者又会在您的数据库上执行 CRUD。在这种情况下，您的服务器将需要一个 Web 服务器（支持 Java 或 PHP 或您选择用于 Web 服务的任何语言）和一个数据库服务器。请参阅[如何让 Android 应用程序与 MySQL 在线数据库一起使用？](https://stackoverflow.com/questions/6116456/how-to-have-android-app-work-with-mysql-online-database)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T02:04:27.803

要“直接”访问数据库（就像它是本地的），这可能会有所帮助：[Android 中的 MySql 远程数据库操作](https://stackoverflow.com/questions/5672548/mysql-remote-database-manipulation-in-android)

但是您可能需要一些额外的服务器功能，至少在将来是这样。然后你可以使用一个也提供 PHP 的服务器。PHP + MySQL 通常是一起提供的，它很常见/很流行，而且很便宜。由于您似乎对服务器功能没有任何特殊要求，因此 PHP 可能是合适的。

# ios - 使用 Interface Builder 组织标签

> ID：12255872
> 
> 赞同：0
> 
> 时间：2012-09-04T01:53:59.467
> 
> 标签：ios, xcode, interface-builder, rubymotion

我对 Interface Builder 相当陌生（我正在使用 RubyMotion，顺便说一句），并且想看看其他人如何组织他们的视图标签。我有很多真正应该组合在一起的视图组件，比如 UIView 之上的 UILabel。

我最初的想法是拥有一个函数来处理视图标签到视图对象的所有映射。像这样的东西：

```
def mapTags
  @awesomeButton = AwesomeButton.new(
    :view => view.viewWithTag 1,
    :label => view.viewWithTag 2
  )
end

def viewDidLoad
  self.mapTags
end 
```

这仍然不是很令人满意，这就是为什么我希望更有经验/更聪明的人可以提供更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:52:22.800

好吧，如果您需要标记所有视图并且您有很多 em，我建议您在初始化视图时这样做，而不是将其分隔在一个函数中，这是最安全的方法。在objective-c中，我通常为每个标签创建特定的宏，然后每当我初始化视图时，我都会为该标签分配宏，例如：

```
#define kMyFirstViewTag 2
#define kMyLabelTag     3

...

[myFirstView setTag:kMyFirstViewTag]; 
```

这样，您可以按名称 ( `kMyGroup1LabelTag`) 对某些视图进行分组，并且可以通过标签名称轻松访问它们。

我对红宝石了解不多，但我很确定应该有一种方法可以达到相同的结果。

希望这个答案是有帮助的。

# user-interface - 什么是基于任务的 UI 的示例？

> ID：12255874
> 
> 赞同：29
> 
> 时间：2012-09-04T01:54:15.550
> 
> 标签：user-interface, domain-driven-design, cqrs

我的团队已经“受命”创建一个遵循[基于任务的 UI](http://cqrs.wordpress.com/documents/task-based-ui/)（不一定使用 CQRS）的应用程序。我真的很喜欢一个可以帮助用户轻松完成常见任务的 UI，但是这个应用程序的许多部分真的“感觉”（对我来说）像典型[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)界面的工作（例如：目录中产品的所有细节）。

此时，我们需要基于任务的良好 UI 示例来帮助我们了解可能的情况。你在互联网上看到了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-05T14:25:26.880

生成基于任务的 UI 的最简单方法是保护模型的所有属性/属性。即删除所有设置器。

从这里（伪代码）：

```
public class TodoTask
{
    public Date getDateAssigned();
    public void setDateAssigned(Date);
    public string getAssignedTo();
    public void setAssignedTo(string);
} 
```

对此：

```
public class TodoTask
{
    public Date getDateAssigned();
    public string getAssignedTo();

    public void AssignTo(string userId);
} 
```

你不能再创建一个基本的 CRUD 应用程序了。您必须执行任务 ( `Assign()`) 来更新模型。

首先删除所有设置器，然后分析您应该能够在每个模型上执行什么样的操作（任务）。

然后你就准备好了。

我在博客上写过：http: [//blog.gauffin.org/2012/06/protect-your-data/](http://blog.gauffin.org/2012/06/protect-your-data/)（滚动到底部查看 CRUD 与基于任务的模型）

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-04T12:47:56.207

我认为这将有资格作为基于任务的 UI。![Windows 控制面板](../Images/4ade24558f84c415c8bc764feee8d0ba.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-01-07T23:49:12.720

# CRUD 接口

CRUD 界面在编辑时有一个“保存”按钮，您会错过某些更改的“原因”。

例如，将客户的地址从“Fountain St. 55”更改为“Birds St.444”与将其从“Fountain St. 55”更改为“Fountain St. 555”具有相同的语义。刚刚“更新”了这条街。

# 基于任务的接口

基于任务的界面具有“操作按钮”，它们“意味着”某些业务。

例如，您可以有一个“正确地址”按钮来表示您正在更改地址，因为它包含一个拼写错误，并且地址实际上“概念上”是相同的，只是现在它可以正确读取。在这种情况下，客户并没有实际移动。

然后您可以执行另一个不同的操作，例如“将客户移动到新地址”，这意味着客户实际上已经搬到了一个新地方，并且地址更改具有所有这些含义。

# 所以……简而言之

在 CRUD UI 中 => 您“编辑数据”。

在基于任务的 UI 中 => 您“表明业务发生了”。

# 结论

第二个总是更强大，虽然更难提前思考，系统必须灵活地添加、承载和传达在业务运营过程中发现的新“意义”。

但是你会得到一个巨大的好处：知道“为什么”事情会发生变异。换句话说……捕捉**用户的意图。**

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-04T20:06:21.857

Microsoft Money 2000 是 Microsoft 的一个示例（尽管他们称其为*Inductive User Interface*。以下是基本指南和沿途的一些屏幕截图：[Microsoft Inductive User Interface Guidelines](http://msdn.microsoft.com/en-us/library/ms997506.aspx#iuiguidelines_topic7)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T19:41:10.553

我想我并不真正认为 UI 具有基于任务或基于 CRUD 的外观（尽管 Dmitry 的示例确实展示了基于任务的示例——很多命令）。我更多地看到基于任务的 UI 与底层域和数据模型的交互方式。如果您的交互只不过是一个典型的开箱即用 MVC 应用程序，带有 Get/List/Insert/Update/Delete 的操作方法，那么您正在构建一个基本的 CRUD 应用程序。但是，如果您放弃那些默认的操作方法并创建对应用程序有意义的操作/命令（例如，将商品添加到购物车、停用类等），那么这将更多地进入基于任务的 UI 世界。

我确实认为这是两者之间的一条灰色线。

举个例子，我知道我工作的一个网站 (braincredits.com) 是我对基于任务的 UI 的尝试。这绝对是一项正在进行的工作，我正在对其进行更改以不断改进它，但实现是基于命令的（例如发布到成绩单、添加课程、查看成绩单等），并且它的一部分确实使用了 CQRS 模式.

我希望这有帮助！祝你好运！

# ios - 控制 iPad 电源状态的应用程序

> ID：12255880
> 
> 赞同：3
> 
> 时间：2012-09-04T01:55:47.417
> 
> 标签：ios, power-management

我想弄清楚是否有可能创建一个应用程序，该应用程序在启动后将切换到后台，并且基本上是一个“计时器”来控制打开或关闭设备（或者可能只是重新获得控制权并“在用户的脸”）30 分钟后。

我*确实知道*像这样的应用程序永远不会被批准。而且我*不想越狱*我的 iPad。提供更多背景信息——我只是想限制孩子们使用 iPad 的时间。我确实有一个 iOS 开发帐户，所以我可以签署应用程序，在我的目标设备上使用配置文件，然后在那里安装它。

有可能吗，我应该在哪里调查？显然它不是 iOS SDK 的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:04:39.220

如果你愿意，你可以用推送通知做一些事情（例如，在 iPad 上 30 分钟后你会看到“是时候离开 iPad 吃早餐了”）。您无法制作会在一段时间后“打开”的应用程序。后台的一切都受到 iOS*的*限制——有推送通知，它们应该用于每个事件。如果你想这样做，你必须越狱你的 iPad。

编辑：

我有一个很好的解决方案给你。制作一个连接 iCloud 并远程锁定 iPad 的 Web 应用程序。我已经对其进行了测试，并且效果很好——当你做某事时它正在关闭应用程序，你必须输入密码。您的 Web 应用程序应该每分钟都打开并检查时间是否已过。

# php - 为什么我使用 LIKE & LIMIT 的 PDO 查询不起作用？

> ID：12255887
> 
> 赞同：0
> 
> 时间：2012-09-04T01:56:50.237
> 
> 标签：php, mysql

我正在制作具有此查询的搜索框功能：

```
$query="SELECT * FROM article WHERE title LIKE ? OR description LIKE ?"; 
```

然后在 foreach 循环中，我创建了这个数组：

```
$params[]= "%".$keyword."%";
$params[]= "%".$keyword."%"; 
```

然后我执行：

```
$stmt=$cxn->prepare($query);
$stmt->execute($params); 
```

这可行，但是...

如果在 foreach 循环之后，我想添加“LIMIT ?,?”，我这样做：

```
$query.=" LIMIT ?, ?";
$params[]=$row_number;
$params[]=$items_per_page; 
```

然后我执行脚本，它会抛出这个致命错误：

```
PHP Fatal error:  Uncaught exception 'PDOException' with message 
'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; 
 check the manual that corresponds to your MySQL server version for the right syntax
 to use near ''0', '2'' at line 1' in ..../index.php:247
  Stack trace:
  #0 .../index.php(247): PDOStatement->execute(Array)
 #1 {main}
 thrown in ..../index.php on line 247 
```

我尝试在关键字周围添加撇号：`$params= "'%".$keyword."%'";` 但这不起作用。

此外，我在 PHPMyAdmin 中尝试了完全相同的查询，并且成功了。

有谁知道为什么这会引发错误？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T02:00:42.870

***更新：***

```
$query="SELECT * FROM article WHERE title LIKE ? OR description LIKE ?";
$query.=" LIMIT ?, ?";
$stmt=$cxn->prepare($query);
$stmt->bindValue(1, "%".$keyword."%");
$stmt->bindValue(2, "%".$keyword."%");
$stmt->bindValue(3, $row_number, PDO::PARAM_INT);
$stmt->bindValue(4, $items_per_page, PDO::PARAM_INT);

$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T02:04:13.323

LIKE 不起作用的原因是，当您将绑定参数与 LIKE 一起使用时，它会将 '%value%' 视为字符串。

你将不得不使用：

```
$query="SELECT * FROM article WHERE title LIKE CONCAT('%',?,'%') OR description LIKE CONCAT('%',?,'%')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T02:08:21.537

我认为您需要转换您在限制子句中传递的变量。看到这个子句`...to use near ''0', '2''`中的值有单引号`LIMIT`

尝试

```
$query.=" LIMIT ?, ?";
$params[] = intval($row_number);
$params[] = intval($items_per_page); 
```

# php - 如何结合zend框架和Codeigniter？

> ID：12255888
> 
> 赞同：3
> 
> 时间：2012-09-04T01:57:17.587
> 
> 标签：php, codeigniter, zend-framework

如何结合 zend 框架和 Codeigniter ？

我有两个应用程序，一个是zend，另一个是codeigniter，是否可以将两个框架合并到一个项目中？如果是这样，如何结合这两个框架以及文件结构是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T04:19:01.517

当然这是可能的。

我参与过一个项目，我们同时拥有 Zend + CodeIgniter。

这是您需要做的：

**1.**将您的 Zend 文件夹（库）复制粘贴到 CodeIgniter 的库中，反之亦然，将 CodeIgniter 库复制到 zend 库文件夹中。

**2.**如果在codeigniter中，调用它使用`$this->load->library('Zend', '{anything here}')` 或在Zend使用[自动加载器](http://framework.zend.com/manual/en/zend.loader.autoloader.html)

您将面临的问题（我面临的）：

1.  **验证**

Zend 使用 Zend Auth 命名空间，它使用 $_SESSION。而 CI 不使用 $_SESSION 而是有它自己的内置系统。使用 Zend 并（假设您的整个应用程序仅在同一个域上）查看它存储的身份信息，直接通过 CI 检查 $_SESSION 并分配 CI cookie。这是[我发生的事情并检查解决方案](https://stackoverflow.com/questions/11839812/cross-framework-authentication-zend-codeigniter)。

2.  **安全和表格**

CI 和 Zend 都有不同的 Forms 库，不要在加载 Zend Library 的类（在 CI 下）中使用 CI 的 Form，只需记住这一点即可。因此，您需要制定策略来实现它，Zend on CI 或 CI on Zend。不要在 CI 表单中使用 Zend 的验证器（我知道没有人会这样做，但是一旦我这样做了，任何人都可以这样做！不要这样做）。使用您将用于表单的相同安全库

就个人而言，我的项目做得很好（经过大量研究之后），它是：Zend 上的 CI，我不得不使用 Zend Auth。

问题？:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T04:25:33.183

就组合框架而言，通常最好坚持一个框架的意识形态。否则，为什么要使用该框架？保存特定的功能。

就 CI 和 Zend 框架而言，Zend 实际上被构建为更加模块化（无论如何它本质上是一个库的集合），并且比其他方式更容易合并到 CI 中。

这是使用许多已经解决的 PHP 框架的人中的一个常见“问题”。

一个**快速的谷歌**出现了以下内容：

[http://viraksun.com/tutorials/integrate-zend-library-in-code-igniter/](http://viraksun.com/tutorials/integrate-zend-library-in-code-igniter/)

[http://www.beyondcoding.com/2008/02/21/using-zend-framework-with-codeigniter/](http://www.beyondcoding.com/2008/02/21/using-zend-framework-with-codeigniter/)

[http://www.gotphp.com/codeigniter-with-zend-framework-libraries/54312/](http://www.gotphp.com/codeigniter-with-zend-framework-libraries/54312/)

* * *

**要更直接地回答您的问题：**

您可以简单地将“Zend”文件夹（来自 Zend_Download_Folder/library）放在主“libraries”文件夹或您的个人应用程序/libraries 文件夹中。

然后，在任何控制器中使用加载器类来加载您想要使用的任何 Zend 类。

例如，要使用 Zend_Pdf，请在控制器中执行以下操作：

```
//load it
$this->load->library('Zend/Pdf');

//use it
$zendPdf = new Zend_Pdf();
$zendPdf->someMethod(); 
```

资源：

[http://codeigniter.com/user_guide/general/creating_libraries.html](http://codeigniter.com/user_guide/general/creating_libraries.html)

[http://codeigniter.com/user_guide/libraries/loader.html](http://codeigniter.com/user_guide/libraries/loader.html)

# javascript - 显示/隐藏不起作用

> ID：12255889
> 
> 赞同：2
> 
> 时间：2012-09-04T01:57:47.843
> 
> 标签：javascript, jquery

```
<table class='generic'>
<script>
$('#select_bh').click(
    function(){
        if($('#select_bh')[0].checked){
        $('#hide_box_bh_s').show();
        }
        else{
        $('#hide_box_bh_s').hide();
        }
    }
);
</script>
<tr>
    <td>
        <b><input type="checkbox" id="select_bh" name="pj_boilerhouse" value="Boiler_House"/>Boiler House</b>
    </td>
</tr>
<tr>
    <td>
        <span id='hide_box_bh_s' style='display:none'>
            &nbsp;&nbsp;<b><input type="checkbox" class="case_bh_s" name="pj_bh_s" value="Structural"/> Structural</b>
        </span>
    </td>
</tr>
</table> 
```

JavaScript中的显示显示/隐藏不起作用..请提供一些建议，谢谢..当我选中复选框时，它会在现有行下有一个新行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:14:11.653

它在这里工作你可以看到代码[http://jsfiddle.net/damian_silvera/9ym5Y/](http://jsfiddle.net/damian_silvera/9ym5Y/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T02:00:51.640

您应该将代码放在文档就绪处理程序中，您的代码不起作用，因为您已将事件处理程序绑定到尚未添加到 DOM 的元素。就绪处理程序中的代码在 DOM 完全加载后执行。另请注意，*Java*不是*JavaScript*。

```
$(document).ready(function(){
   $('#select_bh').click(function(){
        $('#hide_box_bh_s').css('display', this.checked ? 'block' : 'none');
   });
}) 
```

我使用了*条件运算符*，它是`if`语句的快捷方式，如果选中该复选框，则将`display`属性的值设置为，`block`否则将其设置为`none`.

*   [准备好（）](http://api.jquery.com/ready/)
*   [css()](http://api.jquery.com/css/)
*   [条件运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)

# php - 将阿拉伯值插入mysql

> ID：12255891
> 
> 赞同：1
> 
> 时间：2012-09-04T01:57:59.100
> 
> 标签：php, mysql

我无法使用以下代码将阿拉伯语插入 Mysql 数据库。当我使用 phpMyAdmin 检查值时，该字段将为空。为什么呢？

```
$query = "INSERT INTO table (name) VALUES ('عماد')";
mysql_query($query); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:00:27.727

`name`字段应该是 utf8 在连接到 mysql 后直接使用此查询，然后执行任何其他查询，如示例中的插入语句

`set names 'utf8'`

然后检查 phpmyadmin 输出，应该是正确的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T06:02:27.233

```
 /** 
   * ALTER TABLE `myTable` CHARACTER SET utf8 COLLATE utf8_general_ci; 
   *  
   * There’s a generic way of doing by simply executing the MySQL query: 
   * SET NAMES utf8; 
   *  
   * ...and depending on which client/driver you’re using 
   * there are helper functions to do this more easily instead: 
   */ 

  // With the built in mysql functions 
  mysql_set_charset('utf8');  

  // With MySQLi 
  $mysqli->set_charset("utf8") 

  // With PDO_MySQL (as you connect) 
  $pdo = new PDO( 
      'mysql:host=localhost;dbname=test', 
      'username', 
      'password', 
      array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8") 
  ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T03:02:03.357

使用这条线....你可以插入特殊字符。

```
 mysql_real_escape_string($query); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-18T18:57:14.253

确保该字段`name` `collation`设置为：`'utf8_unicode_ci'`在 PHPMyAdmin

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-09T21:02:26.510

转到您的数据库并将您的字段`Collation`值 更改为。`utf8_unicode_ci`稍后谢谢我

对于 Java tuts，请访问：[Java 简介](http://onlineprogramminghub.com/java/)

# javascript - 如何在谷歌搜索中制作一个小窗口

> ID：12255892
> 
> 赞同：0
> 
> 时间：2012-09-04T01:58:04.927
> 
> 标签：javascript

你能告诉我我们如何制作一个像谷歌搜索主页（chrome广告）中显示的小窗口。当网站加载时会加载它，它应该是可移动的，可以关闭它，也可以将它放置在网页的特定位置

![在此处输入图像描述](../Images/de695a9bc7fdd98309409f25317991e6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:13:47.570

使用`jQuery`你可以轻松做到这一点

**HTML**

```
<div id="dialog" style="display: none; ">
    <p>A basic dialog window</p>
</div>​ 
```

**JS**

```
$(function() {
    $("#dialog").dialog({
        width:'300',
        height:'100',
        resizable:false,
        position:[140,300] // x and y   
    });
});​ 
```

[**演示**](http://jsfiddle.net/m9CzF/)和[**自定义样式**](http://jsfiddle.net/m9CzF/1/)。

**参考：** [**jQuery UI**](http://jqueryui.com/demos/dialog/)。

# xml - HTML5 FileReader 读取和修改 XML 的问题

> ID：12255895
> 
> 赞同：0
> 
> 时间：2012-09-04T01:58:20.427
> 
> 标签：xml, html, filereader

我正在使用带有 Chorome 21 的 HTML5 FileAPI 来创建、读取和修改“users.xml”文件，第一次代码读取和修改 xml 时一切正常，但在第一次之后，阅读器不读取xml 正确，似乎 freader （我的 FileReader var 对象）保留了以前的结果并弄乱了新的读取操作。原始xml：

```
<?xml version='1.0' encoding='utf-8'?><users></users> 
```

我的代码读取并添加了一个新的子节点：

```
 fs.root.getFile('users.xml', {}, function(fileEntry) {      
    fileEntry.file(function(file) { 
        var freader = new FileReader();             
        freader.onloadend = function(theFile) {                     
            console.log("before: " + this.result);

            var strcontent = this.result;
            fileEntry.createWriter(function(fileWriter) {                       

                var parsed = new DOMParser().parseFromString(strcontent, "text/xml");   

                var users= parsed.getElementsByTagName("users")[0];                                             

                var user = parsed.createElement("user");
                user.setAttribute('id',txt_rfc.value);
                var name = parsed.createElement("name");
                var textname = parsed.createTextNode(txt_name.value);
                name .appendChild(textname);
                user.appendChild(name);
                users.appendChild(user);                                                                                                                                                                    

                var serializer = new XMLSerializer();
                var str = serializer.serializeToString(parsed);
                                    console.log("after: " + str);
                var bb = new Blob([str],{type:'charset=utf-8'});    
                fileWriter.write(bb);                           

            }, errorHandler);
        };
        freader.readAsText(file);

    }, errorHandler);       
}, errorHandler); 
```

}

第一次执行正确地读取和写入 xml，如下所示：

```
<?xml version="1.0" encoding="utf-8"?><users><user id="1"><name>John</name></user></users> 
```

但是下一次执行 FileReader 显示的是这样的读取结果（这是不正确的并且是错误的）：

```
<?xml version='1.0' encoding='utf-8'?><users/>ser id="1"><name>John</name></user></users> 
```

之后我的代码无法继续写入，因为 xml 读取结果“已损坏”。看起来 FileReader 需要“清除”或其他东西....有什么想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:45:46.277

像这样尝试 createTextNode() ，然后尝试解析 XML

```
 var tNode = document.createTextNode(this.result)    
   var parsed = new DOMParser().parseFromString(tNode.nodeValue, "text/xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:28:34.113

好的，我发现问题是 HTML5 FileSystem API 工作的异步方式，有时有点棘手。

我的代码片段是我真实代码的简化版本；我的真实代码对多个文件进行了多次修改，有时我连续多次调用原始函数，但由于 FileSystem API 行为是异步的，同一函数的不同实例试图同时修改同一个文件，这是“搞砸”文件。所以贴出来的代码片段工作正常，我只是添加了代码来检查之前的修改是否完成，然后再次调用该函数。

# dom - 像简单的 HTML DOM 一样工作的 CURL 类？

> ID：12255896
> 
> 赞同：0
> 
> 时间：2012-09-04T01:58:30.767
> 
> 标签：dom, curl, screen-scraping

因此，对于不熟悉简单 HTML DOM 的任何人，我已经使用 CURL 和 simple_html_dom 有一段时间了 - 它允许您轻松浏览元素，而无需使用 regex/exploding 的东西等等。

例如

```
$html = file_get_html($obj->loc);
$item['title'] = $html->find('#Prod-Name h1',0)->plaintext; 
```

但是，据我所知，这不支持 cookie - 就像 CURL 一样，有什么可以做的吗？

有兴趣听听人们在此屏幕抓取/机器人创建方面的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:39:54.540

您可以使用 curl 下载并使用您选择的解析库对其进行解析。我有时会使用这种方法，但我对它不是很满意，如果 php 有一些像样的抓取库会很好，如果它们是内置的就更好了。

# scala - 如何在 Scala 中制作“n 到 m”受限的 int 变体？

> ID：12255897
> 
> 赞同：5
> 
> 时间：2012-09-04T01:58:36.400
> 
> 标签：scala

我想要 sa`Int_1to3`或`Uint`Scala 类型。最好有一个通用的工厂方法可以提供任何这样的方法。

它主要用于自我记录目的，但也会在到达时检查值（即通过“断言”）。

在我最初的（谷歌）搜索期间没有找到解决方案，我感到有些惊讶。我最接近的是[Unsigned.scala](http://code.google.com/p/funicular/source/browse/trunk/funicular/src/funicular/runtime/Unsigned.scala?r=60)，但这对我的需求来说太过分了。

这一定很*简单*？

只是为了给出一个用法的想法，像这样的东西会很棒！:)

```
type Int_1to3= Int_limited( 1 to 3 )
type Uint= Int_limited( _ >= 0 ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:54:05.113

我看到了两个潜在的解决方案：

首先你可以看看[Unboxed Type Tags](http://etorreborre.blogspot.ch/2011/11/practical-uses-for-unboxed-tagged-types.html)。它们允许在编译时附加一个类型，而不必将整数装箱。编译器将强制在需要时使用它们，但在运行时检查值。

从引用的文章中，您可以编写如下内容：

```
type Tagged[U] = { type Tag = U }
type @@[T, U] = T with Tagged[U]

trait Positive
trait One2Three

type PositiveInt = Int @@ Positive
type SmallInt = Int @@ One2Three

//Builds a small int
def small(i: Int): SmallInt = {
  require( i > 0 && i < 4, "should be between 1 and 3" )
  i.asInstanceOf[SmallInt]
}

//Builds a positive int
def positive( i: Int): PositiveInt = {
  require( i >= 0, "should be positive" )
  i.asInstanceOf[PositiveInt]
} 

//Example usage in methods
def mul( i: SmallInt, j: PositiveInt ): PositiveInt = positive(i*j) 
```

然后在 REPL 中：

```
scala> mul( small(2), positive(4) )
res1: PositiveInt = 8

scala> mul( small(4), positive(2) ) //RUNTIME ERROR
java.lang.IllegalArgumentException: should be between 1 and 3

scala> mul( 2, positive(2) )       //COMPILE TIME ERROR
<console>:16: error: type mismatch;
 found   : Int(2)
 required: SmallInt
              mul( 2, positive(2) )
                   ^ 
```

第二种解决方案可能是为 Scala 2.10 提出的值类。您可以阅读[SIP-15](http://docs.scala-lang.org/sips/pending/value-classes.html)以了解如何使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T04:59:02.593

您可以在此处使用的“模式”是使用私有构造函数声明密封类型作为底层值的包装器，该值仅限于可以验证和实例化的单个点。例如

```
sealed abstract class Int_1to3(val i:Int)
object Int_1to3 {
  def apply(i:Int):Option[Int_1to3] =
    if (1.to(3).contains(i)) Some(new Int_1to3(i){}) else None
} 
```

这样，无论何时你最终得到一个`x`type的实例`Int_1to3`，你都有一个编译时保证`x.i`将是`1`,`2`或`3`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:42:51.747

因为你有这样的“低标准”，这样做就足够了：

```
def safeInt(i: Int, f: Int => Boolean): Int =
  if (f(i)) i else throw new IllegalArgumentException("wrong int")

def int1to3(i: Int) =
  safeInt(i, 1 to 3 contains _)

def uInt(i: Int) =
  safeInt(i, _ >= 0) 
```

当您不想强制编译器保持代码安全时，拥有这种 aa 类型没有多大意义。这是可能的，但正如你所说，不是为了你的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-10T10:01:02.543

昨天看了 Scalatest/Scalatric 3.0的[视频](https://skillsmatter.com/skillscasts/6021-scalatest-and-scalactic-3-0)，@Bill-Venners 在其中讨论了与我在 2012 年所要求的非常接近的类型`PosInt`。`PozInt`

他还为我们提供了一个`OddInt`样本，让我们自己创建这样的价值类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T03:16:07.147

不，语言中没有类似的东西。可用的解决方案——通过库——就是你所说的“overkillL”。

# php - 使用 PHP 将 Excel 日期数字转换为 Unix 时间戳时不匹配

> ID：12255900
> 
> 赞同：3
> 
> 时间：2012-09-04T01:59:10.797
> 
> 标签：php, date, timezone, phpexcel

嗨~ 我正在使用**PHPExcel 1.7.7**读取 XLSX 文件并在网页中显示结果。

我正在尝试获取存储日期和时间字符串的单元格的值，并使用以下代码在 PHP 中处理它。

```
<?php

date_default_timezone_set('Australia/Canberra'); 

$value = $objPHPExcel->getActiveSheet()->getCell('A1')->getValue();

define('MIN_DATES_DIFF', 25569);
define('SEC_IN_DAY', 86400);

function excel2Timestamp($excelDate)
{
  if($excelDate <= MIN_DATES_DIFF)  
  {
     return 0;
  }

  return ($excelDate - MIN_DATES_DIFF) * SEC_IN_DAY;
}

echo $result = date('H:i:s d/m/Y', excel2Timestamp($value)); 

?> 
```

虽然单元格中的原始值为“00:00:00 01/07/2012”，但上述 PHP 代码的输出并未显示正确的结果，而是显示“10:00:00 01/07/2012”。

貌似是时区差异造成的，但是我在代码开头已经定义了时区。不知道有什么问题。

任何人都可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:15:24.210

忘记转换为时间戳的函数（我也在做同样的事情）...... PHPExcel 会自动进行转换，所以尝试这样做：

```
//get the excel date value (if it's stored in the A1 cell)
$excelDate = $objPHPExcel->getActiveSheet()->getCell('A1')->getValue();
//converts from excel format to a datetime object
$date = PHPExcel_Shared_Date::ExcelToPHPObject($excelDate);
//format the date as you want.
$formatedDate = $date->format('m/d/Y'); 
```

它应该工作。

# c++ - 多线程在 TinyXMl 中写入数据

> ID：12255906
> 
> 赞同：0
> 
> 时间：2012-09-04T02:00:21.747
> 
> 标签：c++, boost-thread, streamwriter

因为 TinyXML 是一个很好的 XMl 库，我用它来保存网络传输中的数据包数据，例如客户端以 UDP 多播模式从服务器接收一些数据包。客户端加入多个组播组，因此必须创建多线程来接收和写入不同文件中的数据（当然，文件的数量等于组播组的数量）。我设计了一个具有 DoWrite(char*,size_t) 函数的 writeXML 类。

如 ：

```
void DoWrite(char*,size_t)
{
boost::unique_lock<boost::mutex> lLock(m_lock);
lLock.lock();
} 
```

但问题是每当调用 DoWrite 函数时，都会出现 boost:lock_error 。谁能帮我？非常感谢！*强调文本*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:05:21.763

`lLock.lock();`从您的代码中删除，为您`boost::unique_lock`调用`lock`传入的互斥锁，因此您无需手动调用它（您在互斥锁上调用了两次 lock）。从参考：

> unique_lock(可锁定 & m)
> 
> 效果：
> 
> 存储对 m 的引用。**调用 m.lock()。**

此外，`boost::lock_guard`除非您想推迟获取锁，否则请改用。有关更多详细信息，请参阅[文档](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/synchronization.html#thread.synchronization.locks.unique_lock)。

# xpages - 如何链接到电子邮件中的 xpage？

> ID：12255912
> 
> 赞同：1
> 
> 时间：2012-09-04T02:00:53.577
> 
> 标签：xpages, lotusscript, xpinc

在 lotusscript 中，我通常执行以下操作来创建一个简单的电子邮件，其中包含指向笔记数据库/视图的链接。有什么办法可以修改链接（appenddoclink）以打开一个xpage？假设我的 xpage 名称是“Staff_Page”。

```
Dim maildoc As NotesDocument, rtitem As NotesRichTextItem
Set maildoc=New NotesDocument(db)
maildoc.subject="Email Address(s) For Your Approval"
Set rtitem=New NotesRichTextItem(maildoc, "Body")
Call rtitem.Appendtext("Dear John,")
Call rtitem.Addnewline(2)
Call rtitem.Appenddoclink(db, "", "Click to open the XPage.")           
Call maildoc.Send(False, "john@mail.com") 
```

我查看了 XPages URL 备忘单，但那些不是 lotusscript。我正在用一些 lotusscript 代理做 XPiNC。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T03:25:11.923

最简单的方法是在您的表单属性中指定“改为打开 xpage”第二个选项是使用 href=notes://server/.. 指定指向它的 URL 链接。您最好使用 mime 邮件（用于在 OpenNTF 上），因为您有更简单的格式化选项

# java - 在java中获取等效的MainWindowTitle

> ID：12255921
> 
> 赞同：-1
> 
> 时间：2012-09-04T02:02:37.117
> 
> 标签：java

我有这个关于如何使用 c#.net 获取当前正在运行的进程的代码，它使用 System.Diagnostics 和 Process 我想知道我怎样才能得到这个相当于 java 的代码。我发现了很多研究，但它没有给我正确的答案。

```
System.Diagnostics.Process[] process = new System.Diagnostics.Process.GetProcess();

foreach(Process p in process)
{
    if(p.MainWindowTitle > 0)
    {
      console.writeline(p.MainwindowTitle);
    }
} 
```

类似的东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:50:39.570

JNA 是您想要使用的。在 Java 中更难的原因是 Java 被构建为与操作系统无关，每当您尝试做一些过于接近操作系统内部工作的事情时，您必须离开核心 Java 并使用平台相关的解决方案一种或另一种。

例如，这是获取当前使用 JNA 运行的窗口名称的一种方法，但我还没有弄清楚如何将其限制为仅顶级窗口：

```
import java.util.ArrayList;
import java.util.List;

import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.win32.StdCallLibrary;

public class EnumAllWindowNames {
   static interface User32 extends StdCallLibrary {
      User32 INSTANCE = (User32) Native.loadLibrary("user32", User32.class);

      interface WNDENUMPROC extends StdCallCallback {
         boolean callback(Pointer hWnd, Pointer arg);
      }

      boolean EnumWindows(WNDENUMPROC lpEnumFunc, Pointer userData);

      int GetWindowTextA(Pointer hWnd, byte[] lpString, int nMaxCount);

      Pointer GetWindow(Pointer hWnd, int uCmd);

      Pointer GetParent(Pointer hWnd);

      Pointer GetAncestor(Pointer hWnd, int gaFlags);
   }

   public static String[] ignoreArray = { "Default", "MSCTFIME", "???????", "Msg",
         "SysFader" };

   public static boolean ignore(String text) {
      for (String ignoreText : ignoreArray) {
         if (ignoreText.contains(text)) {
            return true;
         }
      }
      return false;
   }

   public static List<String> getAllWindowNames() {
      final List<String> windowNames = new ArrayList<String>();
      final User32 user32 = User32.INSTANCE;
      user32.EnumWindows(new User32.WNDENUMPROC() {

         @Override
         public boolean callback(Pointer hWnd, Pointer arg) {
            byte[] windowText = new byte[512];
            user32.GetWindowTextA(hWnd, windowText, 512);
            String wText = Native.toString(windowText).trim();
            if (!ignore(wText)) {
               if (user32.GetParent(hWnd) == null) {
                  windowNames.add(wText);
               }
            }
            return true;
         }
      }, null);

      return windowNames;
   }

   public static void main(String[] args) {
      List<String> winNameList = getAllWindowNames();
      for (String winName : winNameList) {
         System.out.println(winName);
      }
   }

} 
```

这需要使用两个 jna jar 文件：platform.jar 和 jna.jar。

# ssis - 如何使用 SSIS 2K8 通过 Web 服务连接到 Shopify API？

> ID：12255922
> 
> 赞同：1
> 
> 时间：2012-09-04T02:02:36.740
> 
> 标签：ssis, shopify

我们正在与 Shopify 合作实施 Web 解决方案。我正在研究如何使用您的 Web 服务 API 从 Shopify 获取数据。我们将使用 SQL Server Integration Services (SSIS) 2K8R2 来执行此操作。您是否碰巧有一个示例显示如何将 SSIS 连接到 Shopify API 以供我们使用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:12:09.107

据我所知，没有具体的例子。这是一个非常标准的休息 API，所以应该足够直截了当。如果您可以使用 c#，那么您可以使用一个库。否则，您真正需要做的就是发出 http 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:11:24.427

我不知道有人使用 SSIS 连接到 Shopify，所以我不知道这意味着什么。但是，Shopify 的 API 是一个标准的 RESTful 接口，所以我建议研究如何从 SSIS 与此类服务通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:56:57.803

通过 SSIS 进行 Web 服务调用绝非易事。我不确定这是否在 2K8R2 中发生了变化。您最好的选择可能是创建一个 web/windows/console 应用程序并连接到它。我已经成功使用了以下 .NET shopify 包装器：

[https://github.com/robconery/ShopifyApi](https://github.com/robconery/ShopifyApi)

# iphone - UIWebView 使用回调加载图像

> ID：12255923
> 
> 赞同：0
> 
> 时间：2012-09-04T02:02:38.817
> 
> 标签：iphone, ios, uiwebview, uiimage

我想知道如何在从我的服务器为我的 UIWebView 请求 html 页面时使用某种类型的回调功能来请求图像。目前我不知道如何`UIWebView`下载网页上的图像，是否使用回调？它可以接收嵌入的图像数据等，我希望有人可以解释对我开放的选项。

我已经浏览了苹果文档 URLConnection、NSURLConnection、UIWebView 等，没有解释 UIWebView 加载图像的不同方式，所以我希望有人可以帮助向我解释 UIWebView 可以请求显示图像的不同方式以及我应该注意我的服务器端以使事情变得更容易。

所以这个问题的原因是我需要决定如何最好地将图像存储在我的服务器上或其他事情，例如将图像嵌入到 html 响应中更好，是否支持回调等等等等。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:18:52.997

它只是加载图像。没有回调、委托、通知或其他东西。如果您的图像可以通过浏览器访问，它将由 UIWebView 下载和呈现。

# strptime - strptime 中的“p”代表什么？

> ID：12255932
> 
> 赞同：44
> 
> 时间：2012-09-04T02:04:13.853
> 
> 标签：strptime

`strptime`许多语言库（C、Python、Ruby、PHP、PERL 等）中都有一个函数。

它似乎基于[Open Group 的`time.h`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strptime.html).

我知道'str'代表字符串，'time'显然代表时间，但是'p'代表什么？解析？指针？打印？

*每次我到达 strptime() 函数时，我都会有一个空白，并且必须在手册中查找名称。我想如果我最终弄清楚它代表什么，也许我会有机会记住它。*

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-09T01:11:33.223

我猜它代表“解析”，因为它的反向函数`strftime`在 Python 的[`time`](http://docs.python.org/3/library/time.html)模块中被调用，其中我可以合理猜测的“f”代表“格式”。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-04T02:11:19.780

p = 指针。[它返回](http://linux.die.net/man/3/strptime)一个指向 char 的指针。

顺便说一句，根据我的 K&R 有一个

```
char *strpbrk(cs,ct); 
```

这个“p”也指返回的指针。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-02-21T16:43:43.523

我有同样的问题，我将使用 put：

```
strftime -> 'string from time'
strptime -> 'string, put time' 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-06-09T10:02:09.087

大多数地方，我发现

> strftime() -> 字符串格式化时间 &
> strptime() -> 字符串解析时间

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-06-21T12:17:52.867

它帮助我记住：

*   **p**代表**生产**，str p 时间 -> 字符串**生产**时间
*   **f** for **format** , str f time -> string **format** time

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-01T12:23:23.163

我认为`strftime()`时间是字符串。该函数`strptime()`可能是从字符串解析时间派生的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-02T11:24:22.670

这是我发现有用的肺炎：

`strftime`-> 字符串（向前）**时间：此****函数**从**时间**对象转换

 ****`strptime`-> **string** ( **p** revious) time : 此函数从**字符串**对象转换****

# java - 如何知道我的应用程序是否在 JBoss 服务器上运行？

> ID：12255937
> 
> 赞同：1
> 
> 时间：2012-09-04T02:05:00.353
> 
> 标签：java, gwt, jboss, jetty

我正在开发一个 GWT 应用程序。

我想知道我是在 Jboss 实例上还是在 Jetty 实例上运行。

这是因为如果我在 Jetty 上运行，这意味着我正在运行开发模式，我需要重定向到 MyModule.html?codeserver... 但如果我在 Jboss 上运行，我需要重定向到 MyModule.html

但我不知道我怎么知道我是在 Jetty 上还是在 Jboss 上跑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:14:32.653

您不应该尝试在应用程序代码中找出运行应用程序的网络服务器。相反，您可以在应用程序的上下文中为不同的服务器设置不同的参数集。

例如

对于 JBoss，server.xml 可以在上下文定义中包含一个参数，如下所示：

```
<Context ...>
    ...
    <Parameter name="applicationStage" value="prod" />
    ...
</Context> 
```

对于 Jetty，相同的上下文参数将进入其 jetty.xml，但值为“devo”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:32:46.907

如果您只想知道您是在运行生产模式还是开发模式，请尝试

```
GWT.isProdMode(); 
```

当然只能在客户端工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T02:18:52.290

没有任何简单的方法可以确定您正在运行的应用程序服务器（据我所知）。您可以检查一些系统属性来确定这一点。

老板：

```
jboss.server.name 
```

码头：

```
jetty.home 
```

尽管我不鼓励像 Vikdor 在他的回答中提到的那样，让逻辑由您的环境决定。他的建议将是一个更好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T02:20:19.433

在 JSP 中，

```
Server is <%= application.getServerInfo()%> 
```

或使用

```
Server is ${pageContext.servletContext.serverInfo} 
```

在一个 Servlet 中，

```
String server = getServletContext().getServerInfo(); 
```

# wordpress - 是否可以使用 rewrite 将主域的子页面屏蔽为子域？

> ID：12255940
> 
> 赞同：0
> 
> 时间：2012-09-04T02:05:55.003
> 
> 标签：wordpress, redirect, rewrite, subdomain

我们正在运行一个 WordPress 网站，为了方便我们的供应商使用，我们希望登录页面显示在：

[http://my.website.com/](http://my.website.com/)

原始网址是[http://website.com/login](http://website.com/login)

这可能吗，还是我必须创建一个新页面来托管在[http://my.website.com](http://my.website.com)上，然后想办法从那里登录到[http://website.com](http://website.com)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:19:45.840

您可以使用 mod_rewrite 执行此操作。将这些规则（在您已经拥有的任何 wordpress 规则之上）放在文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www [NC]
RewriteCond %{HTTP_HOST} ^([^.]+)\.website.com$ [NC]
RewriteRule ^$ /login [L] 
```

# c# - vsto + 区分附件

> ID：12255948
> 
> 赞同：8
> 
> 时间：2012-09-04T02:07:15.503
> 
> 标签：c#, outlook, vsto, outlook-addin

我需要从邮件项目中获取并保存附件，但使用下面的代码会返回所有附件 - 这意味着它还会返回嵌入的图像，例如带有徽标的发件人签名，这是一个图像。如何区分**真正的附件和嵌入的图像**？我从论坛上看到了很多，但我仍然不清楚。

```
public static void SaveData(MailItem currentMailItem)
{
    if (currentMailItem != null)
    {       
        if (currentMailItem.Attachments.Count > 0)
        {
            for (int i = 1; i <= currentMailItem.Attachments.Count; i++)
            {
                currentMailItem.Attachments[i].SaveAsFile(@"C:\TestFileSave\" + currentMailItem.Attachments[i].FileName);
            }
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T15:27:42.760

[您可以使用MS Technet 论坛中的以下伪代码](http://social.technet.microsoft.com/Forums/en-US/exchange2010/thread/542f0c0c-4de3-4752-9390-db33b8e45bca/)检查附件是否内联。

```
if body format is plain text then
   no attachment is inline
else if body format is RTF then
   if PR_ATTACH_METHOD value is 6 (ATTACH_OLE) then
     attachment is inline
   else
     attachment is normal
else if body format is HTML then
   if PR_ATTACH_FLAGS value has the 4 bit set (ATT_MHTML_REF) then
     attachment is inline
   else
     attachment is normal 
```

您可以使用 访问邮件**正文格式**[`MailItem.BodyFormat`](http://msdn.microsoft.com/en-us/library/office/bb207134%28v=office.12%29.aspx)，并使用访问**MIME 附件属性**[`Attachment.PropertyAccessor`](http://msdn.microsoft.com/en-us/library/office/bb175206%28v=office.12%29)。

```
string PR_ATTACH_METHOD = 'http://schemas.microsoft.com/mapi/proptag/0x37050003';
var attachMethod = attachment.PropertyAccessor.Get(PR_ATTACH_METHOD);

string PR_ATTACH_FLAGS = 'http://schemas.microsoft.com/mapi/proptag/0x37140003';
var attachFlags = attachment.PropertyAccessor.Get(PR_ATTACH_FLAGS); 
```

# robot - 绘制机器人路径

> ID：12255949
> 
> 赞同：2
> 
> 时间：2012-09-04T02:07:29.987
> 
> 标签：robot

我正在为 rrt（快速探索随机树）编写代码，这是一种基于采样的运动规划算法。我在 MATLAB 中编写了代码，但现在我正在用 C++ 编写它。我想知道我们如何在所有障碍物的情况下实时绘制机器人路径。我想要的是：我想看到我的机器人穿越空间。所以基本上是关于图形。我正在尝试使用 sfml，但我遇到了问题。有些人建议使用 opencv 或 opengl，但我认为他们不是易于使用。我正在寻找一个易于使用的库。如果 opencv 或 opengl 是答案，那么请告诉我我需要在这些库中具体使用什么。我正在使用 linux（ubuntu 11.10）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-01T00:45:50.120

像[http://www.ros.org/news/2011/01/open-motion-planning-library-ompl-released.html](http://www.ros.org/news/2011/01/open-motion-planning-library-ompl-released.html)这样的东西 可能就是您要找的东西。

我曾在 OpenCV 中用于一些图像识别项目，在 OpenGL 中用于渲染显示，无论您是使用上面的库还是自己渲染它，都取决于显示的复杂程度。问自己一些问题，关于您正在查看多少种不同的障碍场景。障碍物和机器人是否有大量可能的形状？问题是确定性的（就机器人的运动和环境而言）？

就 OpenGL 和 OpenCV 对于新手来说不容易使用而言，这种情况非常普遍，但是选择使用 C++ 工作会使初学者的问题变得更加困难。正如另一位用户所提到的，包装您的 Matlab 代码而不是丢弃它可能是一个可行的选择。如果速度不是关键因素，即使在后台运行 matlab 引擎以通过 C++ 运行脚本也可能是可行的。有关详细信息，请参阅[http://au.mathworks.com/help/matlab/matlab_external/introducing-matlab-engine.html](http://au.mathworks.com/help/matlab/matlab_external/introducing-matlab-engine.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T03:20:51.157

您可能还想考虑使用内部 matlab 编译器直接从您的 M 代码生成独立应用程序。这样您就不必从头开始重写所有内容。

我已经使用以下链接几次只是为了刷新我的记忆 [http://technologyinterface.nmsu.edu/5_1/5_1f/5_1f.html](http://technologyinterface.nmsu.edu/5_1/5_1f/5_1f.html)

例如，如果您制作了具有以下内容的 M 函数（来自链接的示例）：

```
function y=PolyValue(poly,x)
poly=[1 2 -1 4 -5];
x=[5, 6];
y=polyval(poly, x) 
```

你可以使用命令

```
mcc -m PolyValue 
```

编译程序。

然后，此命令将为您提供在更大的 c++ 程序中实现所需的文件。

它甚至应该支持 Gui 元素和图形。

# erlang - 为什么 erlang:get_stacktrace/0 在 shell 中得到不同的输出？

> ID：12255951
> 
> 赞同：1
> 
> 时间：2012-09-04T02:07:50.590
> 
> 标签：erlang

考虑下面的代码：

```
 -module(except).
 -compile(export_all).

 divone(X)->    erlang:error({badnews,erlang:get_stacktrace()}),1/X-1.
 tryreturn(X)->

      try divone(X) of
     Val->{result,2/Val}
    catch
    exit:Reason->{exit,Reason};
    throw:Throw->{throw,Throw};
    error:Error->{error,Error}
 end. 
```

在shell中测试代码：

```
 Eshell V5.9.1  (abort with ^G)

 1> c(except).
 {ok,except}
 2> except:tryreturn(10). **%why cant't get stack trace info here?**
 {error,{badnews,[]}}          
 3> except:tryreturn(10). **%why can get here?**
 {error,{badnews,[{except,divone,1,
                     [{file,"except.erl"},{line,4}]},
             {except,tryreturn,1,[{file,"except.erl"},{line,7}]},
             {erl_eval,do_apply,6,[{file,"erl_eval.erl"},{line,576}]},
             {shell,exprs,7,[{file,"shell.erl"},{line,668}]},
             {shell,eval_exprs,7,[{file,"shell.erl"},{line,623}]},
             {shell,eval_loop,3,[{file,"shell.erl"},{line,608}]}]}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:34:23.297

如果没有任何异常，则返回的堆栈跟踪`erlang:backtrace()`为空。

比对您更有帮助`erlang:backtrace()`的是包含指令指针和进程的调用堆栈的东西，无论您是否捕获了异常。

这应该是票：

```
io:format("~s~n", [element(2, process_info(self(), backtrace))]). 
```

（当然，自己可以与他人自由交换`Pid`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-14T17:03:10.663

根据[文件](http://erlang.org/doc/man/erlang.html#get_stacktrace-0)：

> 以元组列表的形式获取调用进程中**最后一个异常**的调用堆栈回溯 ( **stacktrace** ) 。第一个元组中的字段 Arity 可以是该函数调用的参数列表，而不是一个 arity 整数，具体取决于异常。**`{Module,Function,Arity,Location}`**

 **请注意上述文本中的*最后一个例外*。在您第一次调用期间，还没有任何异常，因此没有任何堆栈跟踪要返回。然后你使用所以下一个调用返回上一个调用的堆栈跟踪来制作`error`class[1] 异常！`erlang:error/1`

有成语如何获取当前代码的堆栈跟踪：

```
try throw(foo) catch foo -> erlang:get_stacktrace() end. 
```

或使用较旧（*过时*）的方式：

```
catch throw(foo), erlang:get_stacktrace(). 
```

[1]：异常分为三类：`throw`, `error`, `exit`.**

# java - java中的字符串连接

> ID：12255956
> 
> 赞同：0
> 
> 时间：2012-09-04T02:08:27.473
> 
> 标签：java

我正在尝试在字符串中连接字符串数组值，下面的代码不起作用

```
private void newString() {

    String str = "Split me"; 
    String[] tokens = str.split("[ ]+");

    String newStr = new String();

    for(int i=0; i<tokens.length; i++){
        newStr.concat(tokens[i]);
    }

    System.out.println("NEW STRING IS : " + newStr);
}

public static void main(String[] args){
    Main m = new Main();
    m.newString();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T02:09:54.190

当您调用`newStr.concat(tokens[i]);`this *doesn't* modify`newStr`时，它会返回一个`String`作为连接结果的 new 。你没有对结果做任何事情。

您需要执行以下操作：`newStr = newStr.concat(tokens[i]);`

`String`是java中的不可变类型，所以它的方法是这样工作的，返回一个新`String`对象。考虑使用 (mutable)[`StringBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)代替。`StringBuilder`维护一个可以增长的内部缓冲区，因此避免了`String`使用 concatenation 和 immutable 带来的不必要的副本`Strings`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T02:09:54.240

`String`是不可变的。自然地，[`String.concat`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#concat%28java.lang.String%29)返回一个全新的`String`.

> ...创建一个新`String`对象，表示一个字符序列，该字符序列是由该`String`对象表示的字符序列和由参数字符串表示的字符序列的串联。

您尝试这样做的方式，代码应该看起来像......

```
String glued = "";

for (final String token : tokens) {
  glued = glued.concat(token);
} 
```

现在，我用这种方法遇到的问题是你正在做*大量*的`String`数据副本。每个都`concat`复制 中的所有数据`glued`以及 中的数据`token`。现在，想想它的含义......我不喜欢过早优化，但我相信实现这一点的合乎逻辑的方法是使用 a[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)如下......

```
final StringBuffer buf = new StringBuffer();
for (final String token : tokens) {
  buf.append(token);
}
final String glued = buf.toString(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T02:29:01.070

我尝试用 StringBuilder 修复它，这是新代码。

```
private void newString() {
    String str = "Split me"; 
    String[] tokens = str.split("[ ]+");
    StringBuilder newStr = new StringBuilder();

    for(int i=0; i<tokens.length; i++){
        newStr.append(tokens[i]);
    }
    System.out.println("NEW STRING IS : " + newStr);
} 
```

# javascript - 如何告诉 Closure javascript 编译器不要混淆 webkitAudioContext 的方法名称？

> ID：12255959
> 
> 赞同：2
> 
> 时间：2012-09-04T02:09:27.000
> 
> 标签：javascript, google-closure-compiler, google-closure-library

我`webkitAudioContext`在使用 Google Closure javascript 编写的应用程序中使用了 webkit 浏览器原生的构造函数。

在我使用 Plovr 在 ADVANCED 模式下编译我的 javascript 后，我​​发现`decodeAudioData`我的`webkitAudioContext`对象的方法被重命名为 obfuscated term `c`。说句公道话，

编译前：

```
var myAudioContext = new webkitAudioContext();
myAudioContext.decodeAudioData(fileData, myCallBackFunction); 
```

编译后：

```
(new webkitAudioContext).c(a,b); 
```

如何告诉 Closure javascript 编译器不要混淆 webkitAudioContext 的方法名称？我试过打电话

```
goog.exportSymbol('webkitAudioContext.prototype.decodeAudioData', webkitAudioContext.prototype.decodeAudioData); 
```

无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T02:52:37.213

正如[Felix Kling](https://stackoverflow.com/users/218196/felix-kling)在他的评论中提到的，[externs 文件](https://developers.google.com/closure/compiler/docs/api-tutorial3)用于防止重命名外部定义的符号。Closure Compiler 源代码在以下目录下有 externs 文件：

> **主干
>  |--[外部](http://code.google.com/p/closure-compiler/source/browse/#svn%2Ftrunk%2Fexterns)
>  | -- 贡献
>       |--[外部](http://code.google.com/p/closure-compiler/source/browse/#svn%2Ftrunk%2Fcontrib%2Fexterns%253Fstate%253Dclosed)**

externs 文件**contrib/externs/ [w3c_audio.js](http://code.google.com/p/closure-compiler/source/browse/trunk/contrib/externs/w3c_audio.js)**包括`webkitAudioContext`.

请参阅 plovr **[externs](http://plovr.com/options.html#externs)**配置选项。

# actionscript-3 - 如何提高 Papervision 3D 文本渲染质量？

> ID：12255967
> 
> 赞同：0
> 
> 时间：2012-09-04T02:10:14.903
> 
> 标签：actionscript-3, flash, papervision3d

我在 papervision 3d 上对飞机进行纹理处理，我尝试了几种设置但无济于事，文字看起来很糟糕。这是一个例子： ![文本捕获](../Images/7d7b5dcbdadce8d9c89a11c2b313e585.png)

这就是我制作材料的方式：

```
var mc:MovieClip = new MovieClip();
        var txt:TextField = new TextField();

        txt.width = 650;
        txt.height = 450;
        txt.multiline = true;
        txt.wordWrap = true;
        txt.selectable = true;
        txt.text = "<center><h1><b>May i have your attention?</b></h1></center>";
        txt.antiAliasType = AntiAliasType.ADVANCED;
        mc.graphics.beginFill(0x000000);
        mc.graphics.drawRoundRect(0, 0, 700, 500,15);
        mc.graphics.endFill();
        mc.graphics.beginFill(0xFFFFFF);
        mc.graphics.drawRoundRect(25, 25, 650, 450, 15);
        mc.graphics.endFill();
        txt.x = 25;
        txt.y = 25;
        mc.addChild(txt);
        var mate:MovieMaterial = new MovieMaterial(mc, true, true, true);
        mate.doubleSided = false;
        mate.smooth = false;
        mate.tiled = false;
        mate.interactive = true; 
```

这似乎是调整大小的问题。纹理大小如何在 pv3d 上起作用？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:45:55.530

查看[Andy Zupko 在 Papervision 中的 Text 上的帖子](http://blog.zupko.info/?p=117)。 ![Papervision 文本](../Images/1c38d4116041c3fd8fdb29a16f8a5562.png)

还可以查看[VectorVision](http://barcinskijeanjean.wordpress.com/category/vectorvision/)，因为它集成在 Papervision 中。 ![矢量视觉文本](../Images/547470c037e701d7921215445f17b945.png)

根据您的设置，您可以选择最适合您的解决方案。

还要记住 Papervision 已经很长时间没有更新了，可能不会很快更新，因此值得探索其他 3D API，例如[Away3D](http://away3d.com)。

# python - 创建主机时zabbix python api错误

> ID：12255969
> 
> 赞同：0
> 
> 时间：2012-09-04T02:10:33.313
> 
> 标签：python, api, zabbix

使用 Zabbix Python API 创建主机时出现以下错误，

```
Traceback (most recent call last):
File "test.py", line 57, in <module>
zapi.host.create({ 'name':'testname', 'host' : '192.168.1.1','ip' :
 '192.178.1.2','port' : 10050,'useip' : 0,'groups' : [{
 "groupid":gid}],'templates' : [{ "templateid":tid}]})
 File "/home/zhiguo/zabbix/zabbix_api.py", line 346, in method
 return self.universal("%s.%s" % (self.data["prefix"], name), opts[0])
 File "/home/zhiguo/zabbix/zabbix_api.py", line 80, in wrapper
 return self.do_request(self.json_obj(method, opts))['result']
 File "/home/zhiguo/zabbix/zabbix_api.py", line 353, in do_request
 return self.parent.do_request(req)
 File "/home/zhiguo/zabbix/zabbix_api.py", line 307, in do_request
 raise ZabbixAPIException(msg, jobj['error']['code'])
 zabbix_api.ZabbixAPIException: (u'Error -32602: Invalid params., No 
 interfaces for host "192.168.1.1". while sending {"params": {"templates": {"templateid": "10085"}], "name": "testname", "ip": "192.178.1.2", "useip": 0, 
 "host": "192.168.1.1", "groups": [{"groupid": "6"}], "port": 10050},
 "jsonrpc": "2.0", "method": "host.create", "auth": 
 "7894f7d64a3f30e1754dd9d2eeb5a493", "id": 4}', -32602) 
```

我的python代码是：

```
zapi.host.create({ 'name':'testname', 'host' : '192.168.1.1','ip' :   
'192.178.1.2',  'port'   : 10050,'useip' : 0,'groups' : [{ "groupid":gid}],  
'templates' : [{ "templateid":tid}]}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:06:16.180

我还没有尝试过 Zabbix 2.0 API，但这就是我在 1.8.x 中的做法

我很确定*dns*字段是强制性的，

```
hostid = zapi.host.create({ 'host': host_name, 'dns' : host_name,'ip' : host_ip, 
'groups': [{"groupid":hostgroup_id}]})['hostids'][0] 
```

另外，从[文档](http://www.zabbix.com/documentation/2.0/manual/appendix/api/host/create)中，

```
 "interfaces":[
      {
          "type":1,
          "main":1,
          "useip":1,
          "ip":"192.168.3.1",
          "dns":"",
          "port":10050
      } 
```

似乎“无效的参数。主机没有接口”抱怨缺少“接口”参数，

# c#-4.0 - TeeChart C# .Net 图表透明度

> ID：12255970
> 
> 赞同：1
> 
> 时间：2012-09-04T02:10:45.173
> 
> 标签：c#-4.0, transparency, teechart

我已经下载了 .Net 2012 评估版的 TeeChart。

我已经工作了 2 天，试图在饼图、圆形仪表和折线图上获得透明度。我尝试的一切都不会改变黑色。

这是我在尝试使其透明时使用的一些示例代码。

```
 pieChart.Series.Clear();

        pieChart.Header.Visible = true;
        pieChart.Header.Text = "Pie Chart";         //At top on the chart

        pieChart.Aspect.View3D = false;
        pieChart.Walls.Back.Transparent = true;
        pieChart.Walls.Back.Gradient.Visible = false;

        pieChart.Panel.Transparent = true;
        pieChart.Panel.Gradient.Visible = true;
        pieChart.Panel.Brush.Transparency = 50;

        pie.Add(10,Color.Red);
        pie.Add(15, Color.Green);
        pie.Add(10, Color.PowderBlue);
        pie.Add(15, Color.DarkGoldenrod);
        pie.Add(10, Color.Bisque);
        pie.Marks.Style = Steema.TeeChart.Styles.MarksStyles.Percent;

        pieChart.Series.Add(pie); 
```

切片中的颜色按预期工作。我尝试更改调色板、背景颜色、画布和墙壁的颜色，但似乎没有任何效果。我找不到任何文档来解释这些对象是什么，以了解我是否正确使用每个对象。请注意，每次尝试仅使用 1 作为时间。

如果这会产生影响，我会将图像导出到 PNG - 无论是流还是文件。透明度是完整版的一个功能还是可以在试用版中完成的功能？请确认透明图表是我们决定购买此版本的要求。

谢谢

PS - 也可以访问.Net文档会很好（Java版本，通过文档，似乎不是直接比较[http://www.steema.com/files/public/teechart/java/ v1/docs/JavaDoc/overview-summary.html](http://www.steema.com/files/public/teechart/java/v1/docs/JavaDoc/overview-summary.html) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:45:27.260

我使用您在 WinForms 应用程序中发布的代码获得了一个透明图表。他们的关键是*Panel.Transparent*属性。您可以检查以非常明显的颜色绘制表格，例如：

```
 this.BackColor = Color.Red; 
```

将此图表导出为 PNG 也会为我创建一个透明图像。在运行时，您需要在导出之前将 BufferStyle 设置为 BufferStyles.None，例如：

```
 Steema.TeeChart.Drawing.BufferStyle buffer = chart1.Graphics3D.BufferStyle;
  chart1.Graphics3D.BufferStyle = Steema.TeeChart.Drawing.BufferStyle.None;
  chart1.Export.Image.PNG.Save(@"C:\temp\TransparentWebChart.png");
  chart1.Graphics3D.BufferStyle = buffer; 
```

这对你有用吗？您正在开发哪种应用程序（WinForms、WebForms、WFP、Silverlight、WP7 等）？

关于文档，评估和注册安装程序都包括程序组 TeeChart 条目以及安装程序创建的*Docs文件夹中的帮助文件和教程快捷方式。*

# android - 从 Google Play 自动更新后自动重启服务

> ID：12255973
> 
> 赞同：0
> 
> 时间：2012-09-04T02:11:13.980
> 
> 标签：android

> **可能重复：**
> [如何知道我的 Android 应用程序已升级以重置警报？](https://stackoverflow.com/questions/2133986/how-to-know-my-android-application-has-been-upgraded-in-order-to-reset-an-alarm)

我有一个应用程序作为服务运行并在 google play 中发布。我面临一个问题，当我发布新版本并发布到 google play 时，所有设备都会自动更新，但服务不会重新启动，直到打开应用程序或重新启动。

我想知道如何解决这个问题，比如 facebook、whatsapp....

请帮忙！

# android - 使用 Android Beam 进行双向通信

> ID：12255974
> 
> 赞同：0
> 
> 时间：2012-09-04T02:11:15.133
> 
> 标签：android, nfc, nfc-p2p

在 p2p 模式下.. 我想从 Android 手机向 NFC 阅读器发送一条消息，然后轻轻一按，从 NFC 阅读器向智能手机发回响应（如“成功接收”）。

现在在手机发出第一道光束之后，如果我从阅读器中取出手机并将其放回阅读器上，我可以发送回响应..这里我正在点击两次。但我想通过单击进行双向通信。那可能吗..？？

我正在使用三星 Galaxy S3 （冰淇淋三明治 4.0.4）和 ACR 122 NFC 阅读器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:08:26.213

不知道你用什么软件来控制ACR122。原则上，您可以只从阅读器返回一条 NDEF 消息，告知传输成功。无需移除手机并再次将其轻触到阅读器。只需调用适当的函数让读者去做。

# vb.net - svn 钩子文件在哪里？

> ID：12255979
> 
> 赞同：0
> 
> 时间：2012-09-04T02:12:36.983
> 
> 标签：vb.net, svn

我是一家软件公司的新实习生，老板让我修改svn tortoise中的hook code或者post-commit操作。但我现在不知道 Visual Basic 源代码文件在哪里。它位于哪里？谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T02:23:08.133

这些钩子通常位于 ROOT_OF_SVN_REPO/hooks 目录中。存储库上的许多 pre、post 操作都会有 *.tmpl。

```
C:\MyRepo\hooks:
 |- post-commit.tmpl
 |- post-lock.tmpl
 |- post-revprop-change.t
 |- post-unlock.tmpl
 |- pre-commit.tmpl
 |- pre-lock.tmpl
 |- pre-revprop-change.tm
 |- pre-unlock.tmpl
 |- start-commit.tmpl 
```

您需要创建一个不带扩展名的 .tmpl 文件的副本

```
C:\Temp\hooks>copy post-commit.tmpl post-commit
        1 file(s) copied. 
```

然后编辑它以调用包含验证逻辑的脚本，即在 post-commit 末尾替换以下行

```
mailer.py commit "$REPOS" "$REV" /path/to/mailer.conf 
```

和

```
cscript my-post-commit.vbs "$REPOS" "$REV" <other args> 
```

希望这可以帮助。

# excel - 每次打开 Excel 2010 时都会删除团队选项卡

> ID：12255981
> 
> 赞同：19
> 
> 时间：2012-09-04T02:13:08.280
> 
> 标签：excel, add-in

使用**Excel 2010**和**TFS 2010**。我在 Excel 中使用“团队”选项卡已经有一段时间了（非常有用！）。今天，“刷新”花了很长时间，我无法使用 Excel，所以我在任务管理器中终止了该进程。我重新打开 Excel，但缺少“团队”选项卡。我在**文件**>**选项**>**加载**项>**管理 COM 加载**项> 转到 > 中添加了它，选择了**Team Foundation 加载项** ，**团队**选项卡又回来了。我可以创建/查看列表等。但是，当我关闭并重新打开 Excel 时，**团队**选项卡再次丢失。

即使关闭和重新打开 Excel，如何使“**团队”选项卡留在功能区栏上？**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-01T13:26:29.133

对于**Excel 2013 x64**和**Visual Studio 2012**，我必须更改`HKEY_CURRENT_USER\Software\Microsoft\Office\Excel\Addins\TFCOfficeShim.Connect.4\LoadBehavior`为**3**（[启动时加载](http://msdn.microsoft.com/en-us/library/vstudio/bb386106.aspx#LoadBehavior)）。

我之前通过 Excel COM 加载项对话框禁用了加载项。这将加载项加载行为更改为“不自动加载”。尝试通过对话框重新启用加载项现在只会将其更改为“按需加载”，这仅适用于 Excel 的一个会话。[在 Connect 中记录了](https://connect.microsoft.com/VisualStudio/feedback/details/780972/excel-team-foundation-add-in-does-not-load-automatically-when-re-enabled)一个问题。手动更改注册表可以解决该错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T03:12:01.267

偶然地，我重新启用了它（在不得不再次手动重新添加选项卡之后）。

Excel > 文件 > 选项 > 加载项 > 管理 > 禁用项目 > 选择项目 > 单击启用。

就这么简单。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-04T14:24:42.233

我在使用 TFS 2010 Office 插件和 Excel 时遇到了同样的问题。原因是因为有两个 TFS Office 插件，第一个版本是针对 64 位机器的，而另一个是针对 32 位机器的。所以我删除了这两个版本，重新启动了 excel，并重新添加了 32 位版本的 TFS 插件。从那以后我没有任何问题。

编辑：我的本地机器正在运行 Windows 7 64 位和 Excel 2010。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-20T17:43:59.513

我自己也遇到了这个。注册表设置看起来不错，并且禁用项目下没有列出任何加载项。

我以管理员身份启动 Excel，删除了 Team Foundation 插件的所有实例（我有 3 个），然后重新添加了插件。然后它正确显示为“启动时加载”。我关闭了 Excel 并从我常用的快捷方式重新打开，一切看起来都很好。

由于我一直在猜测和检查，因此在该过程中多次重新启动 Excel，但我相信重新添加插件的行为最终为我解决了这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-30T13:34:04.813

我必须从 COM 加载项列表中删除扩展名（列为“未加载”），然后再次添加。

按照以下说明手动将其添加到 Excel：

**导航到 Com 加载项管理器：** 文件 > 选项 > 加载项 > 将“管理：”设置为“COM 加载项”> 转到...

**再次添加：** 添加... > "C:\Program Files\Common Files\Microsoft Shared\Team Foundation Server\11.0\x86\TFSOfficeAdd-in.dll" > OK

**重新启动 Excel：**确认启动时出现“团队”选项卡

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-12T14:59:28.747

这是一个可以帮助几个人的解决方法。这不是一个修复，但仍然有价值。

以管理员身份启动 Excel。为此，您可以右键单击 Excel 图标，然后右键单击 Excel 小图标，然后单击“以管理员身份运行”。

这不是一个修复程序，可能会很麻烦，但对于许多有这个问题的人来说，它会提供你想要的功能。希望微软将来会提出一个永久的解决方案。

[![以管理员身份运行 Excel](../Images/fc4b361db712e6e786b8300a4a2f5d40.png)](https://i.stack.imgur.com/1lIt2.jpg)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-21T11:15:14.037

使用最新版本可以通过安装**Azure DevOps Office® Integration 2019**来解决这个问题

[https://visualstudio.microsoft.com/downloads/#other-family](https://visualstudio.microsoft.com/downloads/#other-family)

[![在此处输入图像描述](../Images/a0d2b967b7c6010fb82cd4f3fb70a352.png)](https://i.stack.imgur.com/WMnmL.png)

如果您没有看到**Team Foundation Add in，**您可以使用此方法，这为我节省了很多时间

它会像这样，**文件-->选项-->插件**

[![在此处输入图像描述](../Images/a6d5ec9808e1d62e98c78bb999a729a5.png)](https://i.stack.imgur.com/2C2YR.png)

# yui - YUI 3 将前往 yui.yahooapis.com 获取代码。我是 HTTPS 并且内容被阻止

> ID：12255984
> 
> 赞同：6
> 
> 时间：2012-09-04T02:13:24.947
> 
> 标签：yui

我在这个假期工作，发现我的代码无法在 HTTPS 上运行。我的 LOCALDEV 是 HTTP，我们的生产服务器是 HTTPS。

出于某种原因，当我在本地拥有 JS 时，YUI 会出去获取 JS。

![在此处输入图像描述](../Images/b05e42c33d279958b64c679888669206.png)

我在服务器上…………

![在此处输入图像描述](../Images/c4966018185c23d5f7d5939862560eb8.png)

最后是我的代码：

```
 YUI().use('autocomplete', 'autocomplete-filters', 'autocomplete-highlighters', function (Y) {

    var notes = [
        "Dr Follow Up Complete Notes",
        "Fax Document Notes",
        "Event Notes",
        "Email Information Notes",
        "Corresponding Document Notes",
        "Return Call Notes",
        "Admit Notes",
        "Discharge Notes",
        "Other Notes",
        "Excellent Resource Notes",
        "Good Resource Notes",
        "Neutral Resource Notes",
        "Poor Resource Notes",
        "Unacceptable Resource Notes",
    ];

    var inputNode = Y.one('#name');

    inputNode.plug(Y.Plugin.AutoComplete, {
        resultFilters    : 'phraseMatch',
        resultHighlighter: 'phraseMatch',
        source           : notes,
        minQueryLength   : 0
    });
    inputNode.ac.get('boundingBox').setStyle('zIndex', 50);
    inputNode.on('focus', function () {
        inputNode.ac.sendRequest('');
    }) 
```

==================================================== =================================

# 这是在我添加之后：base: 'include/javascript/yui3/build'

![在此处输入图像描述](../Images/0e1258489c2d1090aca03826de4eb41a.png)

我的构建中没有那个目录。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-12-12T15:58:13.200

我想我会分享我的经验，希望可以帮助其他人。可能不适用于他人。我正在请求以下网址： `http://yui.yahooapis.com/combo?2.6.0/build/yahoo-dom-event/yahoo-dom-event.js&2.6.0/build/animation/animation-min.js`

但是需要 https，所以我只是将其从 http 更改为 https 并收到一个安全警告，即证书对该域无效。我查看了有效域并注意到“yui-s”并认为“嗯嗯安全版本？”

然后我尝试了这个： `https://yui-s.yahooapis.com/combo?2.6.0/build/yahoo-dom-event/yahoo-dom-event.js&2.6.0/build/animation/animation-min.js`

效果很好。因此，其他人尝试更改为 https，如果您的子域是“yui”，请将其更改为“yui-s”

希望这可以帮助某人

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-04T02:51:56.877

**TLDR**：尝试[`base`](http://yuilibrary.com/yui/docs/api/classes/config.html#property_base)在对 YUI 的调用中设置配置属性。

我没有使用过 YUI，但一般来说，来自 HTTPS 站点的请求应该总是命中其他 HTTPS 站点（否则你会看到不安全的内容警告，或者你发现的请求被阻止）。所以这就是问题所在。

你有两个我能想到的选项来解决这个问题：

1.  将 YUI 配置为从 HTTPS 站点请求。[Google 的 AjaxAPI](http://googleajaxsearchapi.blogspot.com.au/2008/11/welcome-yui-scriptaculous-gets-fresh.html)确实托管了它[并支持 SSL](http://www.yuiblog.com/blog/2008/11/19/yui-google/)，但它似乎已从[Google 的托管库列表中](https://developers.google.com/speed/libraries/devguide)删除。[YUI 开发人员在 2011 年在 YUI 论坛上的](http://yuilibrary.com/forum/viewtopic.php?p=29097)一篇帖子表明，由于 Google 的 CDN 不支持组合处理，Google 停止托管新版本的 YUI。所以这不是一个真正的选择，有些人认为[通过 HTTPS 加载的外部脚本](http://wonko.com/post/javascript-ssl-cdn)无论如何都是不好的。

2.  配置 YUI 以从本地服务器加载内容。这要求您的 javascript 不仅在本地存在，而且还将由您的服务器在特定 URL 处提供。除了使您的初始`script`标记指向您本地托管的 YUI 脚本之外，[看起来](http://yuilibrary.com/forum/viewtopic.php?p=9049)配置客户端加载是通过[`base`](http://yuilibrary.com/yui/docs/api/classes/config.html#property_base)在您对 YUI 的调用中设置 config 属性来完成的（或者[`comboBase`](http://yuilibrary.com/yui/docs/api/classes/config.html#property_comboBase)如果您使用的是组合加载器 - 但这意味着您d 必须[设置自己的 YUI 组合加载器](http://yuilibrary.com/projects/phploader)）。

例如，如果您的 YUI 库位于`https://mydomain.com/static/js/yui_3.6.0/yui/build/`（并且您的页面位于，比如说`https://mydomain.com/sample/page`），那么您可以执行以下操作：

```
<script src="https://mydomain.com/static/js/3.6.0/yui/build/yui-min.js"></script> 
```

然后在您的 javascript 文件中：

```
YUI({ 
    base: 'static/js/yui_3.6.0/yui/build/'
}).use('node', 'event', function(Y) { 
    ...
}) 
```

（或者可能`base: '/static/js/yui_3.6.0/yui/build/'`；我没有方便测试的服务器 - 请报告哪个有效，如果有的话！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T02:48:43.123

看起来您正在从 CDN 提供初始 yui-min.js 文件。找到这个：

```
<script type="text/javascript" src="http://yui.yahooapis.com/..."></script> 
```

将其替换为指向 YUI 的本地副本：

```
<script type="text/javascript" src="/where/you/put/yui/build/yui/yui-min.js"></script> 
```

这应该可以工作并在您的本地服务器上提供必要的 JS。

但是，这不会有任何组合加载，这将导致页面加载（有时会慢*很多。您可以在*[http://blog.endpoint.com/2011/02/locally](http://blog.endpoint.com/2011/02/locally-served-yui3.html)阅读有关本地组合加载 YUI 的好文章[-served-yui3.html](http://blog.endpoint.com/2011/02/locally-served-yui3.html)

# java - java - 列表和数组列表有什么区别

> ID：12255987
> 
> 赞同：0
> 
> 时间：2012-09-04T02:14:18.673
> 
> 标签：java, arrays

> **可能重复：**
> [什么是列表与 ArrayList？](https://stackoverflow.com/questions/6867484/what-is-a-list-vs-an-arraylist)

两个都用过，就是想知道它们的优缺点是什么？主要区别是什么？哪个更好用？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T02:16:10.393

`List`是*类*实现的*接口*。另一个著名的实现是.`ArrayList` *`List``LinkedList`*

 *`ArrayList`提供恒定时间随机访问，同时`LinkedList`为非顺序访问提供恒定时间。当您声明一个将包含 的变量时`ArrayList`，请考虑通过接口访问它，如下所示：

```
List<ElementType> myList = new ArrayList<ElementType>(); 
```

这将使您可以在不干扰其余代码的情况下交换不同的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T02:24:09.930

[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)仅仅描述了作为一个列表意味着什么的契约。因此，它不是一个具体的实现，而仅仅是一个*接口*。可以通过多种方式实现列表。

特别是，您拥有[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)，它在内部保留了一个动态数组，用于按顺序存储所有元素。您还有[`LinkedList`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)，它将元素存储为*双向链表*，即一系列节点，这些节点保留对前一个节点和下一个节点的引用。

[`Vector`](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html)是另一个`List`，很像一个`ArrayList`，因为它的实现是基于一个动态数组；然而，它是旧版本 Java 的遗物，并且通过完全同步来保证线程安全。在实践中， `new Vector<T>()`或多或少等同于[`Collections.synchronizedList(new ArrayList<T>())`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedList%28java.util.List%29)。

拥有 a 的原因`List`是列表可以通过多种方式实现。话虽如此，您通常希望拥有某种适用于所有`List`s 的通用行为……参见[polymorphism](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T02:16:53.980

**List**是一个接口[，](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)而**ArrayList**是该接口的实现。ArrayList 是一个 List，LinkedLists、Stacks、Vector 等也是。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T02:25:08.957

其他海报已经回答了您问题的“什么”部分。在它们之间进行选择时需要考虑的一些因素。

ArrayList 在幕后使用数组。所以通过索引访问可以在恒定时间内完成。如果已为数组分配了足够的空间，则添加也可以在恒定时间内完成。但是，当空间用完时，ArrayList 会分配一个更大的数组并将旧数组值复制到新数组中。

LinkedList 使用链接在一起的节点。通过索引访问可能需要遍历整个列表（线性时间）。插入只需要创建一个新节点并在末尾添加它（如果维护尾指针，这可能是常数时间）。

因此，“哪个更好”可能取决于您如何使用它。老实说，我从未测量过两者之间的性能差异，但这只是需要考虑的问题。*

# python - 在 Python 编写的数据收集应用程序中正确使用多线程和队列模块

> ID：12255990
> 
> 赞同：2
> 
> 时间：2012-09-04T02:14:33.530
> 
> 标签：python, queue, python-multithreading

我正在从多个设备收集数据，并且由于测试持续时间很长，我想使用 Python`threading`和`Queue`模块。我写了一个简短的脚本来弄清楚如何使用这些，很明显我不明白让它工作的细微差别。

这是我的脚本：

```
import ue9
import LJ_Util
import DAQ_Util
import threading
import Queue

from datetime import datetime
from time import sleep

queue = Queue.Queue()
now = datetime.now().isoformat()

def DAQThread(ue9ipAddr):
    print '\nExecuting in DAQThread at IP Address: %s' % ue9ipAddr
    a = ue9.UE9(ethernet=True, ipAddress=ue9ipAddr)
    SN = (a.commConfig()).get('SerialNumber')
    count = 5
    while count > 0: 
        reading = a.feedback()
        dataReturn = (SN, now, reading)
        queue.put(dataReturn)
        count -= 1
        print count
        sleep(5)

def listenThread(counter): 
    while queue.empty() != True:
        try: 
            outcome = queue.get() 
            print outcome 
            counter -=1 
            print counter 
        except: 
            return 'queue.get() command loop failing.' 

print "\nOpening device..."
ipAdd = '192.168.1.127'
feedbackThread = threading.Thread(target=DAQThread, args=(ipAdd,))
feedbackThread.start()

print "\nListening for data..."
queryThread = threading.Thread(target=listenThread, args = (10,))
queryThread.start()

print queue.get()
print(threading.activeCount())
print "\nDone" 
```

这是执行此脚本的输出结果：

```
$ python threading-and-queue-test.py

Opening device...

Executing in DAQThread at IP Address: 192.168.1.127
Listening for data...

4
 (278956853, '2012-09-03T20:02:47.656024', {'AIN4': -0.012, 'AIN5': -0.012, 'CIODir': 0, 'AIN7': -0.012, 'EIODir': 0, 'AIN1': -0.012, 'AIN2': -0.012, 'AIN3': -0.012, 'MIOState': 7, 'AIN8': -0.012, 'AIN6': -0.012, 'AIN9': -0.012, 'CIOState': 15, 'AIN0': -0.012, 'Counter0': 0, 'Counter1': 0, 'EIOState': 255, 'TimerC': 0, 'TimerB': 0, 'TimerA': 0, 'MIODir': 0, 'FIODir': 32, 'AIN14': -0.012, 'AIN15': -0.012, 'AIN12': -0.012, 'AIN13': -0.012, 'AIN10': -0.012, 'AIN11': -0.012, 'FIOState': 255})
2

Done
3
2
1
0
$ 
```

很明显线程活动的时间是“关闭”的，但我不确定如何修复它，因为我以前从未使用这些模块进行编程，也没有使用过一般的线程。欢迎任何意见或建议。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:29:37.127

正如评论中提到的，一个问题是在你的听力线程中。一旦你从队列中“抓取”一个条目，队列中就不再有任何条目，并且由于你每 5 秒才添加一个条目，因此你的监听线程将清空队列

`while queue.empty() != True`将评估 False，退出循环

例如：

```
>>> import Queue
>>> q=Queue.Queue()
>>> q.put(1)
>>> q.empty()
False
>>> q.get()
1
>>> q.empty()
True
>>> q.empty()!=True
False 
```

解决此问题的一种方法是使用另一个队列作为停止或取消队列，因此修改您的侦听线程可以执行以下操作：

```
stopQue=Queue.Queue()

def listenThread(counter): 
    while True:
        if queue.empty()!=True: 
            outcome = queue.get() 
            print outcome 
            counter -=1 
            print counter 
        if stopQue.empty()!=True:
            break
    print 'Exiting Listening Thread' 
```

这样，如果您在 stopQue 中放入任何内容，即`stopQue.put(1)`，它应该退出。

基于您的初始代码的完整示例。我删除了与队列和线程无关的代码：

```
import threading
import Queue
from time import sleep

dataQue = Queue.Queue()
stopQue = Queue.Queue()

def DAQThread(ue9ipAddr):
    print 'Executing in DAQThread\n'
    count = 5
    while count > 0: 
        dataQue.put('data: %s' % count)
        count -= 1
        sleep(5)
    stopQue.put(1)
    print 'Exiting DAQThread\n'

def listenThread(counter): 
    while True:
        if dataQue.empty() != True:
            outcome = dataQue.get() 
            print outcome 
            counter -=1 
        if stopQue.empty() != True:
            break
    print 'Exiting Listening Thread'

print "Opening device..."
ipAdd = '192.168.1.127'
feedbackThread = threading.Thread(target=DAQThread, args=(ipAdd,))
feedbackThread.setDaemon(True)
feedbackThread.start()

print "Listening for data..."
queryThread = threading.Thread(target=listenThread, args = (10,))
queryThread.setDaemon(True)
queryThread.start()

print "Done" 
```

产生输出：

```
>>> 
Opening device...
Executing in DAQThread
Listening for data...

Donedata: 5        #Notice how the script is done however the threads are still running

>>> data: 4
data: 3
data: 2
data: 1
Exiting DAQThread
Exiting Listening Thread 
```

# jquery - Jquery ScrollTo - 以 Div 为中心

> ID：12255992
> 
> 赞同：0
> 
> 时间：2012-09-04T02:14:42.683
> 
> 标签：jquery, scrollto

我的网站上有一个中间部分 div 和一个动画，单击时将背景图像向下移动。

我想做的是滚动该图像，或指定页面垂直居中在该 div 上。

我试过下面的，但没有骰子。

```
$.scrollTo( '.midsection', 800, {easing:'elasout'} ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:44:36.900

我想到了。它工作正常，只是不在 HTML`<body>`部分中。

```
$.scrollTo( { top:1000, left:0}, 800 ); 
```

# facebook - Facebook 社交标志数据库捕获

> ID：12255993
> 
> 赞同：0
> 
> 时间：2012-09-04T02:15:03.763
> 
> 标签：facebook, actionscript-3, facebook-graph-api

一个菜鸟问题，因为它是我第一个处理 Facebook 社交登录的应用程序。我正在开发一个应用程序（Flash），它能够允许用户

1.  创建普通用户帐户

或者

1.  社交登录

信息都存储在同一个表中，但是在关闭社交登录的情况下，当然没有用户密码存储，所以我创建了一个 account_type ，它将天气与普通用户帐户创建或社交登录从 Facebook 区分开来。

**我的方法正确吗？**

只是想知道如果用户来自 Facebook 社交登录，您需要在数据库中存储什么来对用户进行身份验证。因为身份验证发生在 Flash 应用程序本身中，而不是转到服务器并返回结果。

所以我的终极问题是**我需要在数据库中为社交登录用户存储哪些信息，以便与他们的帐户匹配并验证他们是合法用户。相反，人们可以窃取电子邮件地址并访问所有用户的信息。**

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:51:52.960

唯一能唯一识别他们的是他们的 Facebook ID。您需要通过要求他们进行身份验证来确认这一点，然后通过[ActionScript API](http://code.google.com/p/facebook-actionscript-api/)调用图表以获取当前用户的详细信息。

Facebook ID 不受任何保护（您可以通过简单的图形调用来查找它们），这就是为什么您需要让用户通过 FB 进行身份验证的原因——它不像[ACS](https://www.windowsazure.com/en-us/home/features/identity/)，例如，您在其中设置了一个依赖聚会并接收一个对您的应用程序唯一的令牌字符串。

让用户进行身份验证后，您的代码将如下所示：

```
var auth:FacebookAuthResponse = Facebook.getAuthResponse(); // Gets current authenticated user, or null if no user is authenticated.
var token:String = auth.accessToken; // Access token - only valid for this session, so you can't use this.
var user:String = auth.uid; // Unique identifier of the current authenticated FB user. 
```

# javascript - jQuery 基于用户选择启用/禁用 asp.net 控件

> ID：12255995
> 
> 赞同：1
> 
> 时间：2012-09-04T02:16:04.503
> 
> 标签：javascript, jquery, html, markup, client-side

我正在从 asp.net 生成以下重复标记-

```
 <tr id="trRow0" class="trClass">
            <td id="cell0" class="tdClass">
                <input id="MainContent_rptColleges_rbCollege_0" type="radio" name="ctl00$MainContent$rptColleges$ctl01$rbCollege" value="mit" />
                mit
            </td>
            <td>
                <ul>
                    <li>
                        <input id="MainContent_rptColleges_rptCourses_0_rbCourse_0" type="radio" name="ctl00$MainContent$rptColleges$ctl01$rptCourses$ctl01$rbCourse" value="computer science" />
                        &nbsp; computer science
                    </li>
                    <li>
                        <input id="MainContent_rptColleges_rptCourses_0_rbCourse_1" type="radio" name="ctl00$MainContent$rptColleges$ctl01$rptCourses$ctl02$rbCourse" value="mechanical engg." />
                        &nbsp; mechanical engg.
                    </li>
                </ul>
            </td>
        </tr>
        <tr id="trRow1" class="trClass">
            <td id="cell1" class="tdClass">
        **...
        ...** 
```

一旦用户单击任何行大学单选按钮，必须启用包含子单选按钮。选择其他行后，应重置/禁用先前选择的子单选按钮。

通过使用以下代码获取选定的行 TR ID，我使用 jQuery 取得了一半的成功，

```
 $(document).ready(function myfunction() {            
        $('[id*=rbCollege]').click(function (e) {
            var selectedCollegeRow = jQuery(this).parent().parent().attr("id");
            $(selectedCollegeRow).find('input[name$=rbCourse]'). //code to enable disable radio
        });
    }); 
```

我还缺少什么其他信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:57:50.870

设置`disabled`属性：

```
$(document).ready(function myfunction() {            
    $('[id*=rbCollege]').click(function (e) {
        var selectedCollegeRow = jQuery(this).parent().parent().attr("id");
        $(selectedCollegeRow).find('input[name$=rbCourse]').attr('disabled', 'true');
    });
}); 
```

# java - 在片段中拥有上下文相关菜单的最佳方法

> ID：12255998
> 
> 赞同：0
> 
> 时间：2012-09-04T02:16:27.193
> 
> 标签：java, android, menu

我有一个处理预览和拍照的片段，在那个片段上我想在操作栏中有一个选项有一个项目。

在其他一些片段上，我希望有共同的项目，但前提是不在大型设备（平板电脑）上，因为平板电脑将有一个片段来处理控制活动。

因此，由于我的应用程序中只有一个 Activity，因此在片段中的操作栏中拥有上下文相关菜单的最佳方式是什么。

以及如何仅在小型设备上最好地显示项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:16:17.600

似乎最好的方法是让片段将项目添加到操作栏，如下所述：

[http://developer.android.com/guide/components/fragments.html#ActionBar](http://developer.android.com/guide/components/fragments.html#ActionBar)

但是，也有必要寻找一个非大布局唯一的 id 来决定是否应该包含某些菜单项。

# asp.net - 如何在我的 asp.net 应用程序中获取 Youtube 嵌入视频的描述？

> ID：12255999
> 
> 赞同：2
> 
> 时间：2012-09-04T02:16:51.860
> 
> 标签：asp.net, vb.net, youtube, youtube-api, youtube.net-api

我正在使用下面的代码来获取嵌入在我的 asp.net 应用程序中的 youtube 视频的标题和描述。我可以看到标题，但看不到描述。

我使用 Atomfeed 来做到这一点......

问题是我的所有视频的描述都是**“Google.GData.Client.AtomTextConstruct”**。

```
Private Function GetTitle(ByVal myFeed As AtomFeed) As String
    Dim strTitle As String = ""
    For Each entry As AtomEntry In myFeed.Entries
        strTitle = entry.Title.Text
    Next
    Return strTitle
End Function

Private Function GetDesc(ByVal myFeed As AtomFeed) As String
    Dim strDesc As String = ""
    For Each entry As AtomEntry In myFeed.Entries
        strDesc = entry.Summary.ToString()
    Next
    Return strDesc
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:27:49.450

我相信，当解析来自 atom 提要的 XML 时，不会处理描述。看看这个：[http ://code.google.com/p/google-gdata/wiki/UnderstandingTheUnknown](http://code.google.com/p/google-gdata/wiki/UnderstandingTheUnknown)

> 但是不理解的事情会发生什么？它们最终成为 ExtensionElements 集合的一个元素，它是从 AtomBase 继承的所有类的成员，如 AtomFeed、AtomEntry、EventEntry 等......

所以，我们可以做的是从扩展元素中提取描述，如下所示：

```
Dim query As New FeedQuery()
Dim service As New Service()
query.Uri = New Uri("https://gdata.youtube.com/feeds/api/standardfeeds/top_rated")
Dim myFeed As AtomFeed = service.Query(query)
For Each entry In myFeed.Entries
    For Each obj As Object In entry.ExtensionElements
        If TypeOf obj Is XmlExtension Then
            Dim xel As XElement = XElement.Parse(TryCast(obj, XmlExtension).Node.OuterXml)
            If xel.Name = "{http://search.yahoo.com/mrss/}group" Then
                Dim descNode = xel.Descendants("{http://search.yahoo.com/mrss/}description").FirstOrDefault()
                If descNode IsNot Nothing Then
                    Console.WriteLine(descNode.Value)
                End If
                Exit For
            End If
        End If
    Next
Next 
```

此外，您获得“Google.GData.Client.AtomTextConstruct”的原因是因为 Summary 是 Google.GData.Client.AtomTextConstruct 类型的对象，所以执行 entry.Summary.ToString() 只是为您提供默认 ToString( ） 行为。您通常会使用 Summary.Text，但这当然是空白的，因为正如我上面所说，库没有正确处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:24:42.780

对于 youtube，我使用 Google.GData.YouTube 获取每个视频的信息。

像这样的东西会从视频中返回很多信息。

```
Dim yv As Google.YouTube.Video

url = New Uri("http://gdata.youtube.com/feeds/api/videos/" & video.Custom)

r = New YouTubeRequest(New YouTubeRequestSettings("??", "??"))
yv = r.Retrieve(Of Video)(url) 
```

然后可以通过以下方式获取描述：yv.Description