# StackOverflow 问答 11383000-11383999

# mysql - MySQL：在数据库中制作paypal支付积分系统需要哪些字段？

> ID：11383003
> 
> 赞同：0
> 
> 时间：2012-07-08T12:02:14.703
> 
> 标签：mysql, sql

现在我有3张桌子：

```
CREATE TABLE `tbl_payment_info` (
  `payment_info_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `payment_type` tinyint(2) NOT NULL, (for users to choose paypal or credit card)
  `num_credits` int(11) NOT NULL,
  `price_per_credits` float NOT NULL,
`payment_time_stamp` datetime NOT NULL,
  PRIMARY KEY (`payment_info_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8

CREATE TABLE `tbl_paypal_info` (
  `paypal_info_id` int(11) NOT NULL AUTO_INCREMENT,
  `paypal_email` varchar(100) DEFAULT NULL,
  `payment_info_id` int(11) NOT NULL,
  PRIMARY KEY (`paypal_info_id`),
  KEY `tbl_paypal_info_ibfk_1` (`payment_info_id`),
  CONSTRAINT `tbl_paypal_info_ibfk_1` FOREIGN KEY (`payment_info_id`) REFERENCES `tbl_payment_info` (`payment_info_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8

CREATE TABLE `tbl_credit_card_info` (
  `credit_card_info_id` int(11) NOT NULL,
  `payment_info_id` int(11) NOT NULL,
  `card_fullname` varchar(128) NOT NULL,
  `credit_number` varchar(20) NOT NULL,
  `credit_card_type` tinyint(2) NOT NULL,
  `billing_address_Line_1` varchar(100) NOT NULL,
  `billing_address_line_2` varchar(100) DEFAULT NULL,
  `billing_city` varchar(50) NOT NULL,
  `billing_country` varchar(50) NOT NULL,
  `billing_phone` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`credit_card_info_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

我错过了什么吗？有没有更好的方法来更有效地编写它？任何建议都会有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:17:19.323

不知道这些是否可能是所有字段都丢失了，但信用卡表上突出的字段是：

*   计费状态
*   计费_zip
*   credit_exp_date

在 PayPal 表上，您可能还想保存 transactionId。我不知道这是否是您在该表中的**payment_info**列的意图，但如果是，您可能希望将字段类型从**int**更改为**varchar**，因为 paypal 在他们的交易中返回字母和数字的混合身份证

还有一条评论，信用卡号码最多为 16 位数字。你有一个 20 字符的字段。

我对效率的最后评论是，我不会在第一张桌子上使用 UTF-8 浪费空间。它看起来并不像要存储国际字符。

# jquery - Jquery 一种更简洁的前置方式

> ID：11383006
> 
> 赞同：4
> 
> 时间：2012-07-08T12:02:39.257
> 
> 标签：jquery, ajax

我最近做了一堵类似于 Facebook 的墙。

我只需要一些建议或更好的方法。

所以当用户提交他的帖子时，我将结果添加到一个 div 中，我是这样制作的

```
$('.get_posts').prepend('<div id="'+stream.sid+'"class="row stream-posts"><div class="span1 stream-thumb"><ul class="thumbnails"><li><a href="#" class="thumbnail"><img src="http://placehold.it/60x60" alt=""></a></li></ul></div><div class="span5 stream-content"><a href="#" class="author">'+stream.author+'</a><p>'+stream.text+'</p></div></div>'); 
```

我知道它不是最好的，并且想询问更有经验的开发人员是否有更清洁的方法来预先添加数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T12:17:11.620

一个选项可以是创建一个 html 文档并使用[`load()`](http://api.jquery.com/load/)方法：

> 从服务器加载数据并将返回的 HTML 放入匹配的元素中。

标记.html：

```
 <div class="span1 stream-thumb">
      <ul class="thumbnails">
         <li>
           <a href="#" class="thumbnail"><img src="http://placehold.it/60x60" alt=""></a>
         </li>
      </ul>
     </div>
     <div class="span5 stream-content">
        <a href="#" class="author"></a>
        <p></p>
     </div> 
```

```
$('.get_posts').prepend('<div id="'+stream.sid+'" class="row stream-posts"></div>');
$("#" + stream.sid).load('markup.html', function(){
   $(this).find('a:last').text(stream.author);
   $(this).find('p:last').text(stream.text)
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T12:08:14.230

一种更简洁的方法是创建一个生成帖子所需 HTML 的函数 -

```
function createPost(postDetails){
  var html = '';
    html += '<div id="'+postDetails.sid+'"class="row stream-posts">';
    html += '  <div class="span1 stream-thumb">';
    html += '   <ul class="thumbnails">';
    html += '    <li>';
    html += '      <a href="#" class="thumbnail">';
    ...
  return html;
} 
```

这样您就可以简单地执行 -`$('.get_posts').prepend(createPost(postData));`并通过`postData`参数将所有相关数据传递给函数。更清洁，更易于维护。

* * *

根据您实施墙更新的方式 - 您还可以在服务器上构建此 HTML 块并按原样发送。这样，您的 JavaScript 就不必担心构建标记 - 您只需预先添加从 AJAX 调用返回的数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-08T12:26:42.547

我也建议使用函数，我的方法与其他基于函数的方法大致相同，但涉及创建具有各种属性的元素，而不是将 HTML 视为字符串（两种方式都有效，而 HTML- as-string 方法当然更简洁）。

但是，根据我的经验，这种方法可以更轻松地修改输出，而无需记住您的 HTML 字符串是否正确关闭和转义：

```
function prependNewPost(elem, stream) {
    var outerDiv = $('<div />', {
        'id': stream.sid,
        'class': 'row stream-posts'
    }),
        innerDiv = $('<div />', {
            'class': 'span1 stream-thumb'
        }).appendTo(outerDiv),
        ul = $('<ul />', {
            'class': 'thumnails'
        }).appendTo(innerDiv),
        li = $('<li />').appendTo(ul),
        a = $('<a />', {
            'href': '#'
        }).appendTo(li),
        image = $('<img />', {
            'src': 'http://placehold.it/60x60',
            'alt': ''
        }).appendTo(a),
        secondInnerDiv = $('<div />', {'class' : 'span5 stream-content'}).appendTo(outerDiv);
    var p = $('<p />').text(stream.text).appendTo(secondInnerDiv);
    outerDiv.prependTo(elem);
}

$('#add').click(
    function() {
        var stream = {};
        stream.sid = 'two';
        stream.author = 'Geoff';
        stream.text = 'Some text, a pseudo-Lorem ipsum, if you will...';
        prependNewPost($('#stream'),stream);
        });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/eUYrP/1/)。

参考：

*   [`appendTo()`](http://api.jquery.com/appendTo/).
*   [使用 jQuery 创建元素](http://api.jquery.com/jQuery/#jQuery2)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T12:06:01.043

调用ajax函数怎么样？然后，您可以保存输入的数据，也许解析表情符号/链接并返回带有解析文本的整个 div 并将其附加到墙上。

# php - PDO 事务是否涵盖 PDO::query()？

> ID：11383010
> 
> 赞同：3
> 
> 时间：2012-07-08T12:03:37.040
> 
> 标签：php, mysql, transactions, pdo

[PHP.net](http://www.php.net/manual/en/book.pdo.php)上的 PDO 事务示例显示`PDO::exec()`已进行事务处理，但没有使用`PDO::query()`.

交易是否涵盖`PDO::query()`？

另外，据我了解，`PDO::query()`返回一个结果集。如果事务处理，怎么会有结果集，因为语句在提交之前不应该执行？（这是否意味着`PDO::query()`确实*没有*交易？）我似乎无法找到官方参考资料说明它是否存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T12:57:42.337

你误解了交易。事务只是保证操作是原子的：要么所有操作都成功，要么都不成功。一旦你开始一个事务，每个查询都将被执行，并将记录在事务日志中。如果操作失败并且您回滚，则每个操作都将被还原。

也就是说：查询是否可交易并不取决于您是否正在使用`exec`，`query`而是取决于查询类型。`INSERT`，`UPDATE`并且`DELETE`是可交易的，其他操作（例如`ALTER TABLE`）可能是可交易的，也可能不是可交易的，具体取决于您的 DBMS。

# mysql - 连接到数据库 Perl

> ID：11383015
> 
> 赞同：5
> 
> 时间：2012-07-08T12:04:06.573
> 
> 标签：mysql, database, performance, perl

我正在使用以下代码连接到 mysql 数据库：

```
my $dbh = DBI->connect("DBI:mysql:test:localhost", $user, $pass)
    or die $DBI::errstr;
my $sqlQuery  = $dbh->prepare($query) 
    or die "Can't prepare $query: $dbh->errstr\n"; 
my $rv = $sqlQuery->execute 
    or die "can't execute the query: $sqlQuery->errstr";

while (my @row= $sqlQuery->fetchrow_array()) {
    # do something;
} 
```

我的疑问是：直到我的应用程序与小型数据库交互之前都很好。但是，当我将此应用程序移动到数据库大小可能为 100 GB 的实时环境时，此代码会导致哪些性能问题。实际上我要问的是，在线 -

```
@row= $sqlQuery->fetchrow_array(); 
```

Perl 会复制整个表格内容并将其转储到变量中。如果是，它不会对我的应用程序和数据库服务器造成严重的性能问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T12:07:34.667

在行中：

```
@row= $sqlQuery->fetchrow_array(); 
```

数据库将一次将一行返回给 perl，如果与大型数据库交互，您不会将查询的整个结果集转储到变量中。

```
$arrRef = $sqlQuery->fetchall_arrayref(); 
```

另一方面..

# linux - 在 linux 中使用 sysenter 指令发生了什么？

> ID：11383019
> 
> 赞同：0
> 
> 时间：2012-07-08T12:04:30.757
> 
> 标签：linux, operating-system

我正在研究Linux中CPU如何从用户模式变为内核模式。我遇到了两种不同的方法：中断和使用`sysenter`.

我无法理解它是如何`sysenter`工作的。`sysenter`有人可以解释一下指令运行时cpu到底发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T12:24:18.020

程序想要进入内核（也称为“系统调用”）时面临的问题是用户程序无法访问任何与内核相关的内容，但程序必须以某种方式将 CPU 切换到“内核模式”。

在中断时，这是由硬件完成的。

它也会在发生（CPU 而非 C++）异常时自动发生，例如访问不存在的内存、被零除或在用户代码中调用特权指令。或尝试执行未实现的指令。最后这件事实际上是实现“调用内核”接口的一种不错的方式：CPU 在一条 CPU 不知道的指令上运行，因此它引发了一个异常，使 CPU 进入内核模式并进入内核。然后内核代码可以检查是否使用了“正确的”未实现的指令，如果是，则执行系统调用，或者如果它是任何其他未实现的指令，则直接终止进程。

当然，做这样的事情并不“干净”。它更像是一个肮脏的黑客，滥用应该是错误的东西来实现一个完全有效的控制流更改。因此，CPU 确实倾向于有实际的指令来做本质上相同的事情，只是以更“定义”的方式。类似“sysenter”指令的主要目的仍然相同：它将 CPU 更改为“内核模式”，保存调用“sysenter”的位置，并在内核中的某个位置继续执行。

至于“软件中断”和“sysenter”的区别：“sysenter”专门针对这种用例进行了优化。例如，它不像（软件）中断那样从内存中获取内核地址来调用，而是使用一个特殊的寄存器来获取地址，这样可以节省内存地址查找。它还可能在内部进行额外的优化，基于这样一个事实，即软件中断可能更像中断处理，而 sysenter 指令实际上并不需要它。我不知道在 CPU 上执行这些指令的确切细节，您可能必须阅读英特尔手册才能真正了解这些细节。

# javascript - 使用 Onclick 方法的 JSP 和 JSTL

> ID：11383020
> 
> 赞同：1
> 
> 时间：2012-07-08T12:04:41.533
> 
> 标签：javascript, spring, jsp, jstl

我有 2 个链接。在会话中，我存储了一些数据。如果用户单击特定链接以查看会话，并且如果包含适当的值，我希望继续。否则将出现一个 AJAX 弹出块。

JAVASCRRIPT 弹出块

```
 function displaymessage(title,message,close)
 {

        resultReturn= $.confirm({
        'title'     : title, 
        'message'   : message
        'buttons'   : {
        close/*'Yes'*/  : {
                'class' : 'blue',
                                    'caption': close,
                'action': function(){}
                        }           
                        }
                          });
   } 
```

带有 JSTL 标签的 JSP：

```
 <div class="header">
        <a href="<c:url value='/home'/>">
        <a href="<c:url value='/further'/>">
    </div>

     <c:if test="${not fn:containsIgnoreCase(data, 'mykey')}"> 
            <a id="get" class="right keepScrollPosition" 
               onclick="return displaymessage('<spring:message code="access.denied.title"/>'
                   ,'<spring:message code="access.denied.message"/>','<spring:message code="access.denied.close"/>');" 
               href="#"  /></a> 
        </c:if> 
```

例如，如果会话中包含值'mykey'，则可以进入链接主页，否则会出现一个弹出窗口。如果会话中包含值“mypassword”并选择进一步的链接可以继续，但如果选择主页链接，则会出现一个弹出块。 *我被卡住了，我需要一些帮助来解决这个问题。请帮帮我*

更新

我正在尝试以下脚本，但它不起作用：

```
 <li><a href="<c:url value='/home/'/>"<spring:message code="home_page"/>
        onclick="if(<c:if test="${not fn:containsIgnoreCase(data, 'mykey')}">){
                    return displaymessage('<spring:message code="access.denied.title"/>' 
               ,'<spring:message code="access.denied.message"/>','<spring:message code="access.denied.close"/>')" href="#" ;
       }
       </a>
   </li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:33:48.217

您不能使用客户端 JS 来检查会话中保存的服务器端值。相反，您需要使用 JS 对请求映射进行 GET 调用，该请求映射运行服务器端代码以检查会话。流程可能如下：

1.  用户点击页面上的按钮/图像/某物
2.  JS 从点击触发，使 AJAX 调用（例如`$.get`）请求映射`/check_session.do`
3.  请求映射检查会话的值，以 JSON 形式返回 true 或 false
4.  客户端 JS 进程返回 JSON，根据返回值阻塞或继续

或者，使用 JSTL 访问会话并将会话字段的值写入页面上的隐藏表单字段，然后客户端 JS 读取该字段。示例： http: [//www.steve-farmer.com/examples/el/ui/ses-attr-name.jsp](http://www.steve-farmer.com/examples/el/ui/ses-attr-name.jsp)

# java - 在向后兼容的应用程序中使用 ?android:attr/

> ID：11383033
> 
> 赞同：14
> 
> 时间：2012-07-08T12:06:08.913
> 
> 标签：java, android, android-theme, android-compatibility

我正在尝试使我的 ICS（API 级别 15）应用程序与 Gingerbread（API 级别 10）兼容，并且我正在获取`InflateException Error inflating class <Unknown>`任何具有`?android:attr/`属性的布局 XML。如果我注释掉这些属性，我可以编译并运行应用程序，但它当然看起来很棒。

我宁愿不复制`android.R.attr`我正在使用的所有项目，但目前我迷失了另一种方法。

我正在使用 ActionBarSherlock 来让 ActionBar 工作，而且我似乎没有使用任何其他需要支持库的东西（尽管我在尝试解决这个问题的过程中已经包含了它），只是这些主题 -基于我坚持的资源。

我正在使用的一些主题资源是：

`?android:attr/textColorSecondaryInverse ?android:attr/textAppearanceLarge ?android:attr/dividerVertical ?android:attr/selectableItemBackground ?android:attr/textAppearanceMedium ?android:attr/dividerVertical ?android:attr/dividerHorizontal`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T18:09:49.133

使用 API 11 中的样式特别是 android:attr/textAppearanceMedium ?android:attr/dividerVertical ?android:attr/dividerHorizo​​ntal

最简单的方法是在您需要的地方使用以下代码

```
<!-- For Horizontal Line-->
<View
android:layout_width="match_parent"
android:layout_height="1dip"
android:layout_marginLeft="4dip"
android:layout_marginRight="4dip"
android:background="#aaa"
android:layout_alignParentTop="true"/>

<!-- For Vertical Line-->

<View
android:id="@+id/VerticalLine"
android:layout_width="1dip"
android:layout_height="wrap_content"
android:layout_marginBottom="4dip"
android:layout_marginTop="4dip"
android:background="#aaa"/> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-08T12:34:26.900

与[文档](http://developer.android.com/reference/android/R.attr.html#dividerVertical)中一样，某些样式位于更高的 API 中。例如：

*   `dividerVertical`自 API 11 起
*   `dividerHorizontal`自 API 11 起

`?`标记用于引用当前主题中的样式。

要解决您的问题，您可以：

*   使用 API 11 中的样式，但将它们放入`values-v11`文件夹并支持旧版本的样式，以`values`使用自定义值或旧 API 的不同属性。
*   从 ICS 复制必要的样式
*   不要使用这些样式
*   使用自定义样式

* * *

这取决于你的目标是什么。当应用程序的原生风格对您很重要时，第一个建议是有意义的。
如果你想在任何地方都有 Holo 风格，那么没有办法复制它并将其用作所有平台的一种风格。
看看这个项目：[https ://github.com/Prototik/HoloEverywhere](https://github.com/Prototik/HoloEverywhere)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-20T15:30:26.853

请检查 android support v7 - appcompat 项目。它有许多向后兼容的主题和属性（attr/dividerHorizo​​ntal 也是）

[http://developer.android.com/tools/support-library/features.html#v7-appcompat](http://developer.android.com/tools/support-library/features.html#v7-appcompat)

要使用 v7 支持，您必须将其作为 Android lib 项目导入并从您的项目中引用它。它还包含 v4 支持，因此您可能希望在 libs 文件夹中删除 v4 支持 :) 祝你好运！

# drupal-7 - 从 Drupal 7 内容类型的其他列自动生成标题字段

> ID：11383035
> 
> 赞同：0
> 
> 时间：2012-07-08T12:06:49.690
> 
> 标签：drupal-7

我正在努力调整 Drupal 7 中“汽车”内容类型的标题字段。如何通过组合例如制造商、汽车型号、年份列来自动生成标题字段文本？另外，如果您可以评论标题字段的良好使用和避免/删除它的策略。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T01:17:20.010

您可以使用[自动节点标题模块](http://drupal.org/project/auto_nodetitle/)。

> “auto_nodetitle”是一个小而高效的模块，它允许隐藏表单中的内容标题字段。为了防止空的内容标题字段，可以将其配置为按给定模式生成标题。
> 
> 安装令牌模块后，可以为自动生成的标题使用各种节点数据 - 例如使用 CCK 字段的文本（从 5.x 开始）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-11T08:30:04.570

[自动实体标签](https://www.drupal.org/project/auto_entitylabel)是一种通用方法。适用于任何实体类型。使用[令牌](https://www.drupal.org/documentation/modules/token)模块。

> “自动实体标签”是一个小而高效的模块，它允许隐藏实体标签字段。为了防止空标签，可以将其配置为按给定模式自动生成标签。
> 
> 这可以用于任何实体类型，包括例如节点标题、评论主题、分类术语名称和 profile2 标签。

# facebook - 如何在heroku应用程序中删除“我的第一个应用程序”

> ID：11383042
> 
> 赞同：-5
> 
> 时间：2012-07-08T12:08:03.537
> 
> 标签：facebook, heroku

我刚刚在 heroku 上制作了一个 facebook 应用程序，但遇到了一些问题。每当我调用消息或提要对话框时，我的应用程序的描述都会显示为“**我的第一个应用程序**”。我已经彻底查看了我的代码，但在任何地方都没有找到这个字符串。我已将 og_description 更改为我自己的，但仍然得到它。即使我尝试发布链接，描述也会如此显示。哪里会有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T12:23:50.437

# java - 为图像添加噪点

> ID：11383045
> 
> 赞同：0
> 
> 时间：2012-07-08T12:08:31.913
> 
> 标签：java, image, bufferedimage, noise, gaussian

我正在尝试在 Java 中向 BufferedImage 添加噪声，但我对用于向图像添加噪声的算法而不是 Java 或任何其他特定于语言的实现更感兴趣。

我在网上搜索并发现了高斯噪声，但教程/文章要么只显示对我不是很有用的代码示例，要么显示复杂的数学解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:51:41.103

目前尚不清楚您的问题是什么，但这里有一些随机观察以防万一：

*   如果图像相对未经处理（未按大小缩放），则每个像素中的噪声大致是独立的。所以你可以通过依次循环每个像素、计算一个新的噪声值并添加它来模拟它。

*   即使图像已被处理，上述方法通常也是一个合理的近似值。

*   图像中的噪声量取决于很多因素。对于由数字传感器生成的典型图像，一个常见的近似是每个像素中的噪声大致相同。换句话说，您选择一些标准偏差 (SD)，然后在上面的循环中，从具有该 SD 的高斯分布中选择一个值。

*   对于天文图像（和其他低噪声电子图像），存在一个噪声分量，其中 SD 与像素亮度的平方根成正比。

你想要做的很可能是：

*   选择一个 SD（您希望图像有多嘈杂）

*   在一个循环中，对于每个像素：

    *   从具有给定 SD（平均值为零）的高斯生成一个随机数，并将其添加到像素（假设为灰度图像）。对于彩色图像，生成三个值并将它们分别添加到红色、绿色和蓝色。

**更新**我想夜视将类似于天文成像。在这种情况下，您可以尝试改变每个像素的 SD，使其包含一个常数加上取决于亮度平方根的值。因此，比如说，如果一个像素具有亮度，`b`那么您可以将`100 + 10 * sqrt(b)`其用作 SD。您需要使用这些值，但这可能看起来更现实。

# java - HttpURLConnection 和获取 ASPX 页面

> ID：11383047
> 
> 赞同：1
> 
> 时间：2012-07-08T12:08:51.880
> 
> 标签：java, android, http

所以这是我目前遇到的问题...我有一个在服务器上运行的 ASPX 脚本（比如说[http://www.myserver.com/script.aspx](http://www.myserver.com/script.aspx)...when) ）...当我通过我的网络浏览器我得到一个纯文本页面，其中包含一些格式如下（仅一行）的数据：

```
Data1|Data2|Data3|... 
```

现在我需要在我的 Android 应用程序中获取这些数据，我这样做了：

```
URL url = new URL("http://www.myserver.com/script.aspx");
HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

BufferedReader in = new BufferedReader(new InputStreamReader((InputStream) urlConnection.getInputStream()));

String data = in.readLine();
System.out.println(data); // Just to print the result in LogCat for debug

urlConnection.disconnect(); 
```

问题是生成的字符串只包含字母“@”。没有我的数据的迹象。我尝试使用其他网页地址（如 google.com）来测试它是否是我的代码中的问题......但它有效......我总是得到页面的第一行（通常是第一个 html 标记，因为它是HTML 网页）。

我现在猜测这是我调用 ASPX 脚本的方式的某种问题......我如何通过 Java 调用它，所以我得到与浏览器相同的结果（例如，我的数据的一行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:09:46.157

想通了...我需要将用户代理设置为浏览器。这样做

```
urlConnection.setRequestProperty("User-Agent", "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.4; en-US; rv:1.9.2.2) Gecko/20100316 Firefox/3.6.2"); 
```

成功了。我现在唯一想知道的是什么用户代理最适合说“我是浏览器”......这似乎有点长？

# ruby-on-rails - 严重卡住：没有为带有 fields_for 的嵌套资源触发验证

> ID：11383048
> 
> 赞同：8
> 
> 时间：2012-07-08T12:09:03.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, activerecord, nested-attributes

**我严重卡在我有用户和个人资料模型的问题上。无论我尝试什么，似乎都不会为任何 Profile 属性触发验证**

*   配置文件模型属于用户。用户 has_one 个人资料
*   在注册表单上使用 fields_for 显示一些个人资料字段（性别、城市和国家）
*   无论我尝试了什么，我都无法让*性别和城市*的验证工作（ fields_for 个人资料字段）

**我的表格：**

```
- title t(:title, :scope => :register)
%h1= yield(:title)

  = simple_form_for(resource, :as => resource_name, :html => { :class => 'form-horizontal' } , :validate => true , :url => registration_path(resource_name)) do |f|

    = f.input :username,                  :label  => t(:username)
    = f.input :email,                     :label  => t(:email),
                                          :hint   => t(:hint_email_visible)
    = f.input :password,                  :label  => t(:password), :require => true
    = f.input :password_confirmation,     :label  => t(:password_confirm)

    - resource.build_profile
    = f.fields_for :profile do |f|

      #div

        = f.hidden_field :form, :value => "signup"

        .clear

        = f.input :gender,                :collection => [['Male', 'male'], ['Female', 'female']],
                                          :as => :radio

    = f.input :city,
              :readonly => "readonly",
              :label => t(:city)

    .ruler

    = f.input :country,
              :label => "Your country",
              :collection => [DataCountry.where(:code => 155).first],
              :value => @city,
              :id => "country",
              :name => "country"

    .clear

    = f.button :submit, t(:submit, :scope => :register) + " »" 
```

**我的用户模型有这个：**

```
 accepts_nested_attributes_for :profile 
```

**我的带有验证的 Profile 模型如下：**

```
 validates_presence_of :gender
  validates_presence_of :city
  validates_presence_of :country 
```

**我的参数：**

```
-- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
utf8: ✓
authenticity_token: <mytokenhere>
user: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  invite_code: ''
  username: username
  email: ''
  password: ''
  password_confirmation: ''
  profile_attributes: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
    form: signup
    gender: male
    dob(3i): '9'
    dob(2i): '7'
    dob(1i): '1942'
    city: 'somevalue'
    country: 'somevalue'
commit: Register »
action: create
controller: registrations 
```

Rails 控制台可以：

```
User.new

 => #<User id: nil, email: "", encrypted_password: "", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, password_salt: nil, confirmation_token: nil, confirmed_at: nil, confirmation_sent_at: nil, unconfirmed_email: nil, failed_attempts: 0, unlock_token: nil, locked_at: nil, authentication_token: nil, username: nil, is_blocked: nil, is_deleted: nil, role: nil, slug: nil, created_at: nil, updated_at: nil, last_seen: nil, credits: nil, invite_code: nil, is_moderated: nil, locale: nil, status: nil, login_token: nil> 
```

Profile.new

```
 => #<Profile id: nil, user_id: nil, gender: nil, country: nil, state: nil, city: nil, status: nil, counter_cache: nil> 
```

-- **2012 年 7 月 19 日更新**

我添加了

```
 - @user.errors.full_messages.each do |message|
  = message
  .clear 
```

到表单查看到底发生了什么，这会引发以下错误列表：

```
Email can't be blank
Email can't be blank
Password can't be blank
Password can't be blank
Profile city can't be blank
Profile gender can't be blank
Profile is invalid
Username can't be blank
Password confirmation can't be blank 
```

因此，似乎检查了验证....但是没有应用错误样式！个人资料也无效？？？我不确定，但这是否指

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:49:05.210

首先，您粘贴的参数包括配置文件的城市、国家和性别的值。如果这是准确的，那么验证*应该*通过，因为`Profile`模型验证了这 3 个字段的存在——并且它们存在。

我还注意到您正在`resource.build_profile`视图中进行操作，这应该建立一个属于用户的默认配置文件。如果在实例化期间在配置文件中分配了任何值，这将导致它们进入表单，并最终进入 params 哈希。

所以我的猜测是你正在沿着这条线的某个地方填充字段，也许在`User`or`Profile`模型中。您应该再次检查这些，特别是在新配置文件的初始化期间。

从你提供的数据中，我只能猜到这些。如果您仍然找不到问题，您可以尝试将它（或重现问题的单独应用程序，如果您不愿意分享您的真实应用程序）提交到 GitHub，以便我们可以更直接地分析问题。

编辑：刚刚注意到，在您的赏金中，您写道：

> 任何人都可以提供嵌套资源和验证的工作示例

因此，请参阅[https://github.com/sinisterchipmunk/rubytastic](https://github.com/sinisterchipmunk/rubytastic)以获取使用配置文件的嵌套属性进行用户验证的简单示例，以您的问题为模型。它验证`User#email`、`Profile#city`和。`Profile#country``Profile#gender`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T09:09:39.370

检查数据库集中是否有任何默认值。似乎在表单参数中，您已粘贴问题，性别已`male`传递值。即使您没有检查任何性别，此表单参数是否也通过了？在这种情况下，这必须是数据库中的性别字段必须具有性别的默认值的情况`male`。在这种情况下，即使是一个新的`Profile`模型对象，其性别属性也会为`male`，因此它将通过验证并将性别保存`male`在数据库中。例如，我`is_admin`在 users 表中有一个布尔字段，并将其默认值设置为`false`or `0`。然后，如果我这样做：

```
User.new
=>  #<User id: nil, name: nil, email: nil, is_admin: false> 
```

您可以看到该`is_admin`属性设置为`false`而不是`nil`. 现在，如果我们不为 传递任何值`is_admin`，这里它将被保存为`false`数据库中，并且也不会触发`is_admin`字段验证，因为它存在于对象的属性中（带有值`false`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T16:33:10.310

现在花了很多时间试图解决这个问题，根据这个主题中的建议，解决方案*非常*简单，我发现不是

**错误的：**

```
- resource.build_profile 
```

**正确的：**

```
- resource.build_profile unless resource.profile 
```

这样做不是清理配置文件，而是使用旧的配置文件（如果可用）......所以不清除所有错误！希望这对将来的某人有所帮助！

# html - 是否可以使用对象/嵌入代码来显示图像+链接？

> ID：11383051
> 
> 赞同：2
> 
> 时间：2012-07-08T12:10:00.997
> 
> 标签：html

我有这样的代码，我无法修改（它托管在其他地方）。但是，我可以控制它，`player.swf`因为它托管在我的域上。

```
<object width="480" height="388">
    <param name="movie" value="http://mysite.com/player.swf"></param>
    <param name="allowFullScreen" value="true"></param>
    <param name="wmode" value="transparent"></param>
    <param name="allowScriptAccess" value="always"></param>
    <embed src="http://mysite.com/player.swf" wmode="transparent" type="application/x-shockwave-flash" width="480" height="388" allowFullScreen="true" allowScriptAccess="always">
    </embed>
</object> 
```

我有兴趣用`player.swf`其他地方的链接替换普通的 GIF 或 JPG 图像。我一直在尝试这样做，我可以链接到图像，但无法添加链接。有没有什么方法可以在不修改原始对象/嵌入代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:39:17.350

我可能完全误读了这个问题，但我会以防万一。

这将是显示图像的代码，单击时会带您进入 .swf 文件。

```
<a href="http://www.LinkToObjectElsewhere.com" target="_blank"><img src="link/to/hosted/image.jpg" alt="" /></a> 
```

# mysql - mysql从具有一对多外键引用的多个表中获取数据

> ID：11383053
> 
> 赞同：-1
> 
> 时间：2012-07-08T12:10:13.500
> 
> 标签：mysql

嗨，我必须编写一个 mysql 查询，我将解释该查询我想如何工作。

我有两张桌子

一种

```
CREATE TABLE IF NOT EXISTS `A` (
  `field1` int(10) NOT NULL AUTO_INCREMENT,
  `field2` int(10) NOT NULL,
  `field3` int(10) NOT NULL,
  `field4` varchar(255) DEFAULT NULL,
  `fields5` int(10) NOT NULL,
  `field6` varchar(255) NOT NULL,
  `field7` varchar(255) NOT NULL,
  `field8` int(10) NOT NULL,
  `field9` tinyint(1) NOT NULL COMMENT '1=for enabled resource 0= for
disabled resource',
  PRIMARY KEY (`field1`); 
```

表 B

```
CREATE TABLE IF NOT EXISTS `estimate_resource_mth` (
  `field1` int(10) NOT NULL AUTO_INCREMENT,
  `field2` int(10) NOT NULL,
  `field3` int(10) NOT NULL,
  `field4` int(10) NOT NULL,
  PRIMARY KEY (`field1`) ; 
```

`tableA`从to有一对多的引用，`tableB`即对 的`A.field1`多重引用`B.table2`。现在我将解释我需要得到什么，我有一个 id，它`A`使用 where 条件从表`filed4`中提取数据到许多关系）。我怎么能在一个查询中得到这个数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:19:52.823

您的描述很差，您的通用列名也不是很有帮助，但如果我理解，请`tableB.field2`参考`tableA.field1`. 在这种情况下，`LEFT JOIN`带有聚合`SUM()`的a`tableB.field4`将完成这项工作。

```
SELECT
  tableA.field1,
  SUM(tableB.field4) AS the_sum
FROM
  tableA 
  LEFT JOIN tableB ON tableA.field1 = tableB.field2
WHERE
  /* IN() for multiple possible vals. Use = if only 1 val needed
     and then the GROUP BY is unnecessary */
  tableA.field1 IN ('val1','val2',val3')
GROUP BY tableA.field1 
```

# javascript - 处理通过自动完成返回的（str.replace）数组数据

> ID：11383055
> 
> 赞同：0
> 
> 时间：2012-07-08T12:10:41.760
> 
> 标签：javascript, replace

```
$('#groupnamesearch').blur(function () {
    str = $('#groupnamesearch').val()
    $.get("injectgroup.php", {
        name: str
    }, function (data) {
        //here i guess str.replace data
        $('#aspecforgroup').val(data);
    });
}); 
```

这给了我这样的结果： ["45054","55905","42306"]

我想去掉它们的所有 []"，所以我只有数字和 , 字符。

如何在将通过 ajax 请求的数据填充到输入字段之前对其进行操作？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:12:58.163

您可以使用数组[连接来做到这一点](http://www.w3schools.com/jsref/jsref_join.asp)

如果您的数据是字符串，则必须首先解析字符串以转换数组，然后像这样进行连接 -

```
var newData = JSON.parse(data).join(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T12:23:42.913

如果您返回的结果`data`是一个实际的字符串 - 我假设方括号必须显示在“aspecforgroup”字段中 - 那么您可以删除这些字符，如下所示：

```
data = data.replace(/[\[\]"]/g, ""); 
```

或者您可以告诉 jQuery（即您*正在*使用的 jQuery 吗？）将响应视为 JSON，在这种情况下，它应该在它最终出现在`data`参数中时自动解析为数组，然后您可以使用数组[`.join()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)把它变成一个字符串：

```
$.get("injectgroup.php", {
    name: str
}, function (data) {
    $('#aspecforgroup').val(data.join(","));
}, "json"); 
```

参数 to`.join()`是连接各个元素的字符串。如果您将其省略，默认情况下它将是逗号，但您可能希望使用逗号加空格：`.join(", ")`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T12:27:31.693

如果`data`是一个字符串：

```
data = '["45054","55905","42306"]';
var output​ = JSON.parse(data).join(', ');
​alert(output)​; 
```

if`data`已经是一个数组：

```
data = ["45054","55905","42306"];
var output = data.join(', ');
alert(output); 
```

两者都输出：

```
45054, 55905, 42306 
```

# grails - 如何从 taglib 或 g:inculude 升级 Grails 错误以在错误页面上结束？

> ID：11383059
> 
> 赞同：4
> 
> 时间：2012-07-08T12:12:37.463
> 
> 标签：grails, exception-handling

我的 UrlMapings 中有一个“500”错误的映射，它呈现一个自定义错误页面并且它工作正常，除非异常发生在自定义 taglib 实现中或部分通过 g:include 包含。

如果发生这种情况，错误页面将作为环绕布局的一部分呈现在有问题的标签或 g:include 所在的位置。

我知道这是一种预期的行为，但是有没有办法强制此类错误导致重定向或在父布局之外呈现错误页面，而不是以包含部分呈现内容和多个错误页面部分的页面结束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:51:28.430

我通常在应用程序之外解决这个问题：在生产中，我通常在我的 tomcat 前面有一个 nginx。这将拦截所有在标头中有 500 http 代码的页面，并显示一个静态错误页面：

```
server {
    [..]

    location / {
            proxy_pass        http://localhost:8080/grailsAppName;
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header Host $host;
    }

    error_page 500 502 503 504  /500.html;

    location = /500.html {
            root  /var/www/errors-grailsAppName;
    }
 } 
```

这样，子视图是否损坏或操作代码本身都没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:34:33.087

我认为您无法实现您想要做的事情，但至少您可以使用 try /catch 将您的代码片段包围在 taglib 中，并使用空字符串或特定消息进行渲染。

# ruby-on-rails - Rails attr_readonly 不起作用

> ID：11383061
> 
> 赞同：6
> 
> 时间：2012-07-08T12:12:59.530
> 
> 标签：ruby-on-rails, activerecord

根据[这个问题](https://stackoverflow.com/questions/7376659/make-attributes-mass-assignable-only-during-creation/7376686)和以下[文件](http://apidock.com/rails/ActiveRecord/ReadonlyAttributes/ClassMethods/attr_readonly)`attr_readonly`应该是可能的：

```
class MyModel < ActiveRecord::Base
  attr_accessible :foo
  attr_readonly :bar
end

m = MyModel.create(foo: '123', bar: 'bar') # Should work
m.update_attributes(bar: 'baz')            # Should not work 
```

但是第一个失败了，说我不能 mass-assign `bar`。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T12:25:47.113

从[文档](http://guides.rubyonrails.org/security.html#mass-assignment)

> `attr_accessible`获取可访问的属性列表。 **所有其他属性都将受到保护**。

因此`attr_accessible`，使`bar`属性免受大规模分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-08T06:57:45.523

您可以将属性 , 假设 , 键设置为：-

```
attr_accessible :key 
```

然后再添加一个验证

```
validate :check_if_key_changed, :on=> :update

private
def check_if_key_changed
  if self.key_changed?
    errors.add(:key,"cant change key")
  end
end 
```

通过这种方式，您将能够在创建时对其进行批量分配，并且还可以确保它不会被更新。

# php - 在网站上捕获用户电子邮件地址的最佳方法

> ID：11383063
> 
> 赞同：-1
> 
> 时间：2012-07-08T12:13:39.897
> 
> 标签：php

我目前在我的网络服务器上即将推出的页面上有一个表单，我需要捕获输入的电子邮件地址并将其发送到我的电子邮件地址，例如*example@hotmail.com*。

使用 PHP 完成此任务的最佳方法是什么？

```
<form method="post">

<input class="emailsubscribe mobile clearfix" type="text" name="mail" 
placeholder="Enter your email" onFocus="if(!this._haschanged)
{this.value=''};this._haschanged=true;"/>

<input class="emailsubscribe desktop clearfix" type="text" name="mail" 
placeholder="Enter your email to stay up to date" onFocus="if(!this._haschanged)
{this.value=''};this._haschanged=true;"/>

<input class="emailsubmit clearfix" type="submit" name="submit"/>

</form> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T12:18:12.977

**HTML**：

```
<form method="post" action="send.php">
    Enter your e-mail: <input type="text" name="email" />
    <input type="submit" name="submit" value="Submit" />
</form> 
```

**PHP**（发送.php）：

```
if(!isset($_POST['submit']) || !isset($_POST['email'])) die();
$email = $_POST['email'];
mail('youremail@gmail.com', 'Subject', 'Entered e-mail: '.$email); 
```

* * *

您应该添加某种保护，例如验证码，以防止垃圾邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T12:16:37.927

使用[PHPMailer](http://phpmailer.worxware.com/)类发送电子邮件或只是一个[php 邮件功能](http://php.net/manual/ru/function.mail.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T12:26:01.320

您的表单中有 2 个具有相同名称的输入。

```
if (isset($_POST['submit'])) {
    $email = $_POST['email']; // Check first if is a valid email address with either filter_var or a regex. 
    $recipient = "therecipient@email.com"; 
    $mail_body = "Any message you wan to include here"; 
    $subject = "From online Form"; 
    $header = "From: Online Form: <" . $email . ">\r\n"; 

    mail($recipient, $subject, $mail_body, $header);
} 
```

# c# - 制作一个与其他 2 个项目共享文件（图像和数据库）的项目？

> ID：11383066
> 
> 赞同：0
> 
> 时间：2012-07-08T12:14:27.160
> 
> 标签：c#, visual-studio, project

我目前正在开发一个 PC 应用程序 (C# WPF)，该应用程序需要图像，但有时会有新图像，所以我将它们添加到项目中。我的一个朋友正在开发 Web 应用程序（C# ASP.net MVC3），他也使用相同的“资源”。现在，当有新图像时，我们必须将它们都添加到我们的项目中的文件夹（图像）中。

现在的问题：

是否有可能制作某种我们都可以使用的项目，因此我们只需将图像添加到该项目中？（我们可以将项目与 Git 同步）。因为我们都必须将图像添加到我们的项目（解决方案）中，这有点烦人。

PS: pc 应用程序和 webapp 将是相同的，所以它总是需要相同的图像/数据库文件（sqlite）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:31:44.110

如果您有一个双方都可以共享的文件夹结构，那么您可以将图像添加到两个项目都可以访问的公共文件夹中。如果没有，您可以创建一个称为附属程序集的仅资源 DLL，该程序集可以托管图像并可供两个应用程序使用。

# ios - 如何在 UIWebView 中使用 Apple（应用内购买）？

> ID：11383068
> 
> 赞同：2
> 
> 时间：2012-07-08T12:14:50.173
> 
> 标签：ios

有什么方法可以从应用程序内的 UIWebView 使用 Apple In App 购买？

因为我想使用 Web 视图加载外部网站并在应用程序购买中用作应用程序内的付款方式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T12:49:56.630

您可以从 UIWebView 调用 Objective-C 方法。您可以通过在`shouldStartLoadWithRequest:`方法中捕获自定义 url 来做到这一点。同样，您可以从 Objective-C 代码 ( `stringByEvaluatingJavaScriptFromString:`) 中调用 HTML 中的 JS 方法。详情在[这里](http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/)。

我认为可以从 UIWebView 内部使用 Apple 的 InApp 购买，但这取决于您的确切要求。只要您使用 Apple 的支付网关（以便他们获得 30% 的折扣 :)）就可以了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-08T12:19:31.260

我不认为它是这样工作的。它是一个 Cocoa 触摸 API，必须从 Cocoa 对象/控制器中调用。

它还使用委托与您的应用程序进行通信。

听起来您正在尝试做的是将应用内购买用作网络应用的支付系统。可能超出 AppStore 的服务条款。

试用 Google 应用内付款？

# jsf-2 - 如何使用动态（动态）生成的密钥从资源包中访问值

> ID：11383069
> 
> 赞同：2
> 
> 时间：2012-07-08T12:15:03.843
> 
> 标签：jsf-2

我声明了一个名为**item的变量**

并创建一个**bundle**。它包含一些数据如下

```
StudentAdd=student/Create.xhtml
StudentEdit=student/Edit.xhtml
StudentList=student/List.xhtml
DepartmentAdd=department/Create.xhtml 
```

我想通过改变变量数据来包含不同的 xhtml 页面

这是我的 xhtml 代码

```
<c:forEach items="#{ajaxBean.chcekItem}" var="item" varStatus="loop">
                    <p:tab id="#{item}" title="#{item}" closable="true">                            
                        <ui:include src="#{bundle.#{item}}"/>   

                    </p:tab>
                </c:forEach> 
```

我可以尝试上述方式，但显示以下错误消息...

```
/index.xhtml @57,66 src="#{bundle.#{item}}" The identifier [#] is not a valid Java identifier as required by section 1.19 of the EL specification (Identifier ::= Java language identifier). This check can be disabled by setting the system property org.apache.el.parser.SKIP_IDENTIFIER_CHECK to true. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:04:37.317

代替`<ui:include src="#{bundle.#{item}}"/>`

利用`<ui:include src="#{bundle[item]}"/>`

# java - Java中漂亮的打印二维数组

> ID：11383070
> 
> 赞同：14
> 
> 时间：2012-07-08T12:15:24.667
> 
> 标签：java

我正在寻找一个实用程序，它将一个矩形 String[][] 打印到一个具有正确列长度的人类可读表中。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-08T15:41:10.963

如果你想要类似于 MySQL 命令行客户端输出的东西，你可以使用类似的东西：

```
import java.io.PrintStream;

import static java.lang.String.format;
import static java.lang.System.out;

public final class PrettyPrinter {

    private static final char BORDER_KNOT = '+';
    private static final char HORIZONTAL_BORDER = '-';
    private static final char VERTICAL_BORDER = '|';

    private static final String DEFAULT_AS_NULL = "(NULL)";

    private final PrintStream out;
    private final String asNull;

    public PrettyPrinter(PrintStream out) {
        this(out, DEFAULT_AS_NULL);
    }

    public PrettyPrinter(PrintStream out, String asNull) {
        if ( out == null ) {
            throw new IllegalArgumentException("No print stream provided");
        }
        if ( asNull == null ) {
            throw new IllegalArgumentException("No NULL-value placeholder provided");
        }
        this.out = out;
        this.asNull = asNull;
    }

    public void print(String[][] table) {
        if ( table == null ) {
            throw new IllegalArgumentException("No tabular data provided");
        }
        if ( table.length == 0 ) {
            return;
        }
        final int[] widths = new int[getMaxColumns(table)];
        adjustColumnWidths(table, widths);
        printPreparedTable(table, widths, getHorizontalBorder(widths));
    }

    private void printPreparedTable(String[][] table, int widths[], String horizontalBorder) {
        final int lineLength = horizontalBorder.length();
        out.println(horizontalBorder);
        for ( final String[] row : table ) {
            if ( row != null ) {
                out.println(getRow(row, widths, lineLength));
                out.println(horizontalBorder);
            }
        }
    }

    private String getRow(String[] row, int[] widths, int lineLength) {
        final StringBuilder builder = new StringBuilder(lineLength).append(VERTICAL_BORDER);
        final int maxWidths = widths.length;
        for ( int i = 0; i < maxWidths; i++ ) {
            builder.append(padRight(getCellValue(safeGet(row, i, null)), widths[i])).append(VERTICAL_BORDER);
        }
        return builder.toString();
    }

    private String getHorizontalBorder(int[] widths) {
        final StringBuilder builder = new StringBuilder(256);
        builder.append(BORDER_KNOT);
        for ( final int w : widths ) {
            for ( int i = 0; i < w; i++ ) {
                builder.append(HORIZONTAL_BORDER);
            }
            builder.append(BORDER_KNOT);
        }
        return builder.toString();
    }

    private int getMaxColumns(String[][] rows) {
        int max = 0;
        for ( final String[] row : rows ) {
            if ( row != null && row.length > max ) {
                max = row.length;
            }
        }
        return max;
    }

    private void adjustColumnWidths(String[][] rows, int[] widths) {
        for ( final String[] row : rows ) {
            if ( row != null ) {
                for ( int c = 0; c < widths.length; c++ ) {
                    final String cv = getCellValue(safeGet(row, c, asNull));
                    final int l = cv.length();
                    if ( widths[c] < l ) {
                        widths[c] = l;
                    }
                }
            }
        }
    }

    private static String padRight(String s, int n) {
        return format("%1$-" + n + "s", s);
    }

    private static String safeGet(String[] array, int index, String defaultValue) {
        return index < array.length ? array[index] : defaultValue;
    }

    private String getCellValue(Object value) {
        return value == null ? asNull : value.toString();
    }

} 
```

并像这样使用它：

```
final PrettyPrinter printer = new PrettyPrinter(out);
printer.print(new String[][] {
        new String[] {"FIRST NAME", "LAST NAME", "DATE OF BIRTH", "NOTES"},
        new String[] {"Joe", "Smith", "November 2, 1972"},
        null,
        new String[] {"John", "Doe", "April 29, 1970", "Big Brother"},
        new String[] {"Jack", null, null, "(yes, no last name)"},
}); 
```

上面的代码将产生以下输出：

```
+----------+---------+----------------+-------------------+
|FIRST NAME|LAST NAME|DATE OF BIRTH   |NOTES              |
+----------+---------+----------------+-------------------+
|Joe       |Smith    |November 2, 1972|(NULL)             |
+----------+---------+----------------+-------------------+
|John      |Doe      |April 29, 1970  |Big Brother        |
+----------+---------+----------------+-------------------+
|Jack      |(NULL)   |(NULL)          |(yes, no last name)|
+----------+---------+----------------+-------------------+ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-08T12:57:22.463

我不知道会执行此操作的 util 库，但您可以使用 String.format 函数来格式化您想要显示的字符串。这是我很快写的一个例子：

```
String[][] table = {{"Joe", "Bloggs", "18"},
        {"Steve", "Jobs", "20"},
        {"George", "Cloggs", "21"}};

    for(int i=0; i<3; i++){
        for(int j=0; j<3; j++){
            System.out.print(String.format("%20s", table[i][j]));
        }
        System.out.println("");
    } 
```

这给出以下输出：

```
 Joe               Bloggs                  18
          Steve               Jobs                    20
         George               Cloggs                  21 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-08T12:21:59.597

你可以试试

```
System.out.println(Arrays.deepToString(someRectangularStringArray)); 
```

这和没有特定代码的情况一样漂亮。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T19:47:02.627

由于我偶然发现了这种寻找即用型打印机（但不仅适用于字符串），因此我稍微更改了[Lyubomyr Shaydariv为](https://stackoverflow.com/users/166589/lyubomyr-shaydariv)[接受的答案](https://stackoverflow.com/a/11384393/1350983)编写的代码。由于这可能会增加问题的价值，因此我将分享它：

```
import static java.lang.String.format;

public final class PrettyPrinter {

    private static final char BORDER_KNOT = '+';
    private static final char HORIZONTAL_BORDER = '-';
    private static final char VERTICAL_BORDER = '|';

    private static final Printer<Object> DEFAULT = new Printer<Object>() {
        @Override
        public String print(Object obj) {
            return obj.toString();
        }
    };

    private static final String DEFAULT_AS_NULL = "(NULL)";

    public static String print(Object[][] table) {
        return print(table, DEFAULT);
    }

    public static <T> String print(T[][] table, Printer<T> printer) {
        if ( table == null ) {
            throw new IllegalArgumentException("No tabular data provided");
        }
        if ( table.length == 0 ) {
            return "";
        }
        if( printer == null ) {
        throw new IllegalArgumentException("No instance of Printer provided");
        }
        final int[] widths = new int[getMaxColumns(table)];
        adjustColumnWidths(table, widths, printer);
        return printPreparedTable(table, widths, getHorizontalBorder(widths), printer);
    }

    private static <T> String printPreparedTable(T[][] table, int widths[], String horizontalBorder, Printer<T> printer) {
        final int lineLength = horizontalBorder.length();
        StringBuilder sb = new StringBuilder();
        sb.append(horizontalBorder);
        sb.append('\n');
        for ( final T[] row : table ) {
            if ( row != null ) {
                sb.append(getRow(row, widths, lineLength, printer));
                sb.append('\n');
                sb.append(horizontalBorder);
                sb.append('\n');
            }
        }
        return sb.toString();
    }

    private static <T> String getRow(T[] row, int[] widths, int lineLength, Printer<T> printer) {
        final StringBuilder builder = new StringBuilder(lineLength).append(VERTICAL_BORDER);
        final int maxWidths = widths.length;
        for ( int i = 0; i < maxWidths; i++ ) {
            builder.append(padRight(getCellValue(safeGet(row, i, printer), printer), widths[i])).append(VERTICAL_BORDER);
        }
        return builder.toString();
    }

    private static String getHorizontalBorder(int[] widths) {
        final StringBuilder builder = new StringBuilder(256);
        builder.append(BORDER_KNOT);
        for ( final int w : widths ) {
            for ( int i = 0; i < w; i++ ) {
                builder.append(HORIZONTAL_BORDER);
            }
            builder.append(BORDER_KNOT);
        }
        return builder.toString();
    }

    private static int getMaxColumns(Object[][] rows) {
        int max = 0;
        for ( final Object[] row : rows ) {
            if ( row != null && row.length > max ) {
                max = row.length;
            }
        }
        return max;
    }

    private static <T> void adjustColumnWidths(T[][] rows, int[] widths, Printer<T> printer) {
        for ( final T[] row : rows ) {
            if ( row != null ) {
                for ( int c = 0; c < widths.length; c++ ) {
                    final String cv = getCellValue(safeGet(row, c, printer), printer);
                    final int l = cv.length();
                    if ( widths[c] < l ) {
                        widths[c] = l;
                    }
                }
            }
        }
    }

    private static <T> String padRight(String s, int n) {
        return format("%1$-" + n + "s", s);
    }

    private static <T> T safeGet(T[] array, int index, Printer<T> printer) {
        return index < array.length ? array[index] : null;
    }

    private static <T> String getCellValue(T value, Printer<T> printer) {
        return value == null ? DEFAULT_AS_NULL : printer.print(value);
    }

} 
```

和Printer.java：

```
public interface Printer<T> {
    String print(T obj);
} 
```

用法：

```
 System.out.println(PrettyPrinter.print(some2dArray, new Printer<Integer>() {
        @Override
        public String print(Integer obj) {
            return obj.toString();
        }
    })); 
```

为什么改成`T`? 好吧`String`还不够，但我并不总是希望`obj.toString()`提供相同的输出，所以我使用界面能够随意更改它。

第二个变化是没有为类提供一个`outstream`，如果你想使用像 (Log4j // Logback) 这样的 Logger 类，你肯定会在使用流时遇到问题。

为什么更改为仅支持静态调用？我想将它用于记录器，并且只打一个电话似乎是显而易见的选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-14T17:09:08.603

JakWharton 有一个很好的解决方案[https://github.com/JakeWharton/flip-tables](https://github.com/JakeWharton/flip-tables)和格式 String[]，具有属性名称和结果集反射的对象列表。例如

```
List<Person> people = Arrays.asList(new Person("Foo", "Bar"), new Person("Kit", "Kat"));
System.out.println(FlipTableConverters.fromIterable(people, Person.class)); 
```

# java - Mac OSX 上的 im4j 无法运行命令

> ID：11383073
> 
> 赞同：0
> 
> 时间：2012-07-08T12:16:20.030
> 
> 标签：java, imagemagick

我们有使用 im4j 包装器编写的照片客户端程序来调用 ImageMajick 来处理照片。该设置在 Windows OS 上运行良好，但是当我们在 Mac OSX 上运行它时，我们不断收到以下异常

```
org.im4java.core.InfoException: org.im4java.core.CommandException: java.io.IOException: Cannot run program "identify": error=2, No such file or directory
    at org.im4java.core.Info.getBaseInfo(Info.java:201)
    at org.im4java.core.Info.<init>(Info.java:96)
    at tenw.photos.ImageTransformer.getImageInfo(ImageTransformer.java:474)
    at tenw.photos.ImageTransformer.getCenterCoordinates(ImageTransformer.java:517)
    at tenw.photos.ImageTransformer.cropCenter(ImageTransformer.java:157)
    at tenw.photos.ImageTransformerTest.testCropCenter(ImageTransformerTest.java:32)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at junit.framework.TestCase.runTest(TestCase.java:154)
    at junit.framework.TestCase.runBare(TestCase.java:127)
    at junit.framework.TestResult$1.protect(TestResult.java:106)
    at junit.framework.TestResult.runProtected(TestResult.java:124)
    at junit.framework.TestResult.run(TestResult.java:109)
    at junit.framework.TestCase.run(TestCase.java:118)
    at junit.framework.TestSuite.runTest(TestSuite.java:208)
    at junit.framework.TestSuite.run(TestSuite.java:203)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.junit.JUnitTestSet.execute(JUnitTestSet.java:96)
    at org.apache.maven.surefire.junit.JUnit3Provider.executeTestSet(JUnit3Provider.java:117)
    at org.apache.maven.surefire.junit.JUnit3Provider.invoke(JUnit3Provider.java:94)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: org.im4java.core.CommandException: java.io.IOException: Cannot run program "identify": error=2, No such file or directory
    at org.im4java.core.ImageCommand.run(ImageCommand.java:215)
    at org.im4java.core.Info.getBaseInfo(Info.java:189)
    ... 33 more
Caused by: java.io.IOException: Cannot run program "identify": error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at org.im4java.process.ProcessStarter.startProcess(ProcessStarter.java:407)
    at org.im4java.process.ProcessStarter.run(ProcessStarter.java:312)
    at org.im4java.core.ImageCommand.run(ImageCommand.java:211)
    ... 34 more
Caused by: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:53)
    at java.lang.ProcessImpl.start(ProcessImpl.java:91)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453) 
```

在 PATH 变量中可以找到命令 identify。当在 shell 上执行相同的命令时，它工作正常。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:33:12.647

在 eclipse 的环境变量设置中让我的设置路径变量起作用。有人可以增强关于为什么 JVM 在执行命令之前无法获取路径变量的答案

# java - 使用谷歌应用引擎的聊天机器人没有回复

> ID：11383078
> 
> 赞同：2
> 
> 时间：2012-07-08T12:16:50.300
> 
> 标签：java, eclipse, google-app-engine

继承人的代码
它基本上需要一条消息并将其回显。问题是它根本没有回复:(在谷歌应用程序引擎，我的应用程序页面中，我收到错误-“在此服务器上找不到请求的 URL /guestbook。”

```
package guestbook;

import java.io.IOException;
import java.util.logging.Logger;

import javax.servlet.http.*;
import com.google.appengine.api.xmpp.JID;
import com.google.appengine.api.xmpp.Message;
import com.google.appengine.api.xmpp.MessageBuilder;
import com.google.appengine.api.xmpp.XMPPService;
import com.google.appengine.api.xmpp.XMPPServiceFactory;

@SuppressWarnings("serial")
public class GuestbookServlet extends HttpServlet {

private static final Logger LOG = 
          Logger.getLogger(GuestbookServlet.class.getName());

public void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {

       // Parse incoming message
    XMPPService xmpp = XMPPServiceFactory.getXMPPService();
    Message msg = xmpp.parseMessage(req);
    JID jid = msg.getFromJid();
    String body = msg.getBody();
    LOG.info(jid.getId() + " --> JEliza: " + body);

    // Get a response from Eliza
    String response = "echo: " + body;
    LOG.info(jid.getId() + " <-- JEliza: " + response);

    // Send out response
    msg = new MessageBuilder()
        .withRecipientJids(jid)
        .withBody(response)
        .build();
    xmpp.sendMessage(msg);

    /*Message message = xmpp.parseMessage(req);
    JID fromJid = message.getFromJid();
    String body = message.getBody();

    String respMsg = null;

    if (body.equals("/list")) {
        respMsg = "Hi";
      } else if (body.equals("/help")) {
        respMsg = "Welcome to the Guestbook Chatbot!\nThe following commands are supported: \n /list \n /help";
      } else {
        respMsg = "Command '" + body + "' not supported! \nEnter '/help' for list of commands.";
      }

    JID tojid = new JID(fromJid.getId());

    Message msg = new MessageBuilder().withRecipientJids(tojid).withBody(respMsg).build();

    boolean messageSent = false;
    xmpp = XMPPServiceFactory.getXMPPService();
    if (xmpp.getPresence(tojid).isAvailable()) {
      SendResponse status = xmpp.sendMessage(msg);
      messageSent = (status.getStatusMap().get(tojid) == SendResponse.Status.SUCCESS);
    }*/

  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:21:54.483

根据您提供的详细信息，我认为问题应该出在 web.xml 文件上

```
<servlet><servlet-name>GuestbookServlet</servlet-name><servlet-class>your.package.structure.GuestbookServlet</servlet-class></servlet><servlet-mapping><servlet-name>GuestbookServlet</servlet-name><url-pattern>/_ah/xmpp/message/chat/</url-pattern></servlet-mapping> 
```

尝试将其添加到 web.xml 中相应地更改 your.package.structure.GuestbookServlet 例如我的将是 com.appengine.capp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:38:48.070

JDK 设置必须从 1.7 更改为 1.6。在窗口-> 首选项-> java -> 编译器下

# php - 如何使用 PHP DomDocument 获取规范值？

> ID：11383079
> 
> 赞同：-2
> 
> 时间：2012-07-08T12:16:55.680
> 
> 标签：php, dom

```
<link rel='canonical' href='http://test.com/asdfsdf/sdf/' /> 
```

我需要使用 Dom 获取规范的 href 值。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T12:27:09.190

有多种方法可以做到这一点。

使用 XML：

```
<?php

$html = "<link rel='canonical' href='http://test.com/asdfsdf/sdf/' />";

$xml  = simplexml_load_string($html);
$attr = $xml->attributes();
print_r($attr);

?> 
```

输出：

```
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [rel] => canonical
            [href] => http://test.com/asdfsdf/sdf/
        )

) 
```

或者，使用 Dom：

```
<?php

$html = "<link rel='canonical' href='http://test.com/asdfsdf/sdf/' />";

$dom = new DOMDocument;
$dom->loadHTML($html);
$nodes = $dom->getElementsByTagName('link');
foreach ($nodes as $node)
{
    if ($node->getAttribute('rel') === 'canonical')
    {
        echo($node->getAttribute('href'));
    }
}

?> 
```

输出：

```
http://test.com/asdfsdf/sdf/ 
```

在这两个示例中，如果您要解析整个 HTML 文件，则需要更多代码，但它们演示了您需要的大部分结构。

[从此答案](https://stackoverflow.com/a/4587441/869912)和[Dom 上的文档](http://php.net/manual/en/book.dom.php)修改的代码。

# c++ - 我想制作一个没有任何可视对话框的程序

> ID：11383081
> 
> 赞同：0
> 
> 时间：2012-07-08T12:17:07.130
> 
> 标签：c++

我编写了一个程序，它从文件中读取一些信息，并在处理后将其写入另一个文件。

但是，当我打开我的程序时，我不想看到任何窗口出现在我的显示器上，即使是片刻。有什么办法让它不可见吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T12:27:56.553

如果您在谈论 Windows，那么您到底看到了什么？弹出控制台窗口？如果您通过桌面 GUI 运行控制台程序，这会自动发生，因为控制台程序应该有一个控制台。

只需使您的应用程序成为 GUI 应用程序......并且不要创建任何窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T12:30:09.580

您可以简单地创建一个 Win32 应用程序。

```
#include <windows.h>

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
    // do whatever you want
    return 0;
} 
```

# eclipse - 无法在 Eclipse Juno 中停靠左侧的透视栏

> ID：11383083
> 
> 赞同：8
> 
> 时间：2012-07-08T12:17:23.590
> 
> 标签：eclipse, eclipse-juno

这个[页面](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Freference%2Fref-3.htm)说我应该能够将我的透视栏停靠在左侧的 Eclipse Juno 中，就像我在 Indigo、Helios 和以前的版本中所做的那样。

除了我在透视栏中右键单击透视按钮时得到的菜单外，仅包含以下选项：

*   关闭
*   显示文字

有没有其他人遇到过这个问题——我的配置或工作区有问题吗？还是我该提交错误了？

（我正在使用这个版本： 20120614-1722 ）

似乎*此功能将*在 M20120809-1200/4.2.1/Juno SR1 中实现。请参阅 [有关 eclipse bug 383599 的评论](https://bugs.eclipse.org/bugs/show_bug.cgi?id=383599#c8)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:09:04.077

**Dock 功能在 Eclipse 4.2 中不可用 - 仅在 Eclipse 3.8 中可用**

[请参阅https://bugs.eclipse.org/bugs/show_bug.cgi?id=383599#c3](https://bugs.eclipse.org/bugs/show_bug.cgi?id=383599#c3)上的评论 #3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:50:33.120

我目前正在增强修剪元素的 DnD 以包括透视切换器（以及工具栏和大部分修剪的其余部分）。希望这将在 9 月发布到 SR1 版本中。

请注意，我们不会将“Dock on Left”上下文菜单放回去，因为我们试图通过只有一种方法来降低复杂性......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T11:55:54.120

我不会依赖在线文档来获取特定信息，我认为其中的大部分只是从以前的版本复制到一个新文件夹中并留在那里。

我也被这个事实迷惑了几次（在我的例子中，它也与 UI 配置有关）。

您在链接中提供的页面确实标记为 Juno (4.2)，但正如 eugener 提到的，此功能适用于 3.x (Indigo)。

# asp.net - 解析器错误消息：无法识别的属性“targetFramework”。请注意，属性名称区分大小写

> ID：11383085
> 
> 赞同：8
> 
> 时间：2012-07-08T12:18:02.513
> 
> 标签：asp.net, visual-studio-2010, web, hosting

我刚刚在托管网站上上传了我的网站。

我在尝试访问我的网站时收到以下错误。

“/”应用程序中的服务器错误。

配置错误

说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：无法识别的属性“targetFramework”。请注意，属性名称区分大小写。

```
Line 7:<system.web>
Line 8:<customErrors mode="Off"/>
Line 9:<compilation debug="true" targetFramework="4.0"> 
```

请帮忙，谢谢帕特。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-08T12:20:44.757

这通常发生在 IIS 中的应用程序池设置为 2.0 而不是 4.0 时

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-17T04:12:24.767

为了方便其他人，请转到控制面板 -> 管理工具 -> IIS 管理器 -> 查看应用程序池 -> 将 .NET 版本从 2.0 更改为 4.0

# git - Git post在另一台计算机上接收挂钩

> ID：11383087
> 
> 赞同：1
> 
> 时间：2012-07-08T12:18:13.700
> 
> 标签：git, git-post-receive

我已经建立了我的网站，这样当我在本地完成工作和测试等时，我可以像这样实时推送更改：

`git push khwp`

这很好用。我的本地文件位于 Dropbox 文件夹中，因此我也可以在笔记本电脑上处理它们。然而，在后者上，上述命令不起作用。我可以很好地添加和提交文件，但由于某种原因 push 命令不起作用。

我怎样才能解决这个问题？

我可能应该补充一点，我是 git 的新手，但我想你已经明白了......

**编辑：**这是我得到的错误：

```
/bin/bash: line 0: exec: socat: not found
ssh_exchange_identification: Connection closed by remote host
fatal: The remote end hung up unexpectedly 
```

没有企业防火墙，没有“推送 url”。密钥配置没有问题（我可以在没有密码的情况下通过 ssh 进入服务器）并且用户名和电子邮件也已设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:38:34.070

When I look around at Google searching for `socat git`, I [find](http://www.emilsit.net/blog/archives/how-to-use-the-git-protocol-through-a-http-connect-proxy/) that `socat` is used in order to tunnel the `git://` protocol through `https`. The referenced post recommends to create a `gitproxy` script and use this script as global proxy script:

```
$ git config --global core.gitproxy gitproxy 
```

I assume you *somehow* configured Git to use `socat` and it's simply not installed on your laptop computer.

# jquery - jQuery 代码在 Firefox 中有效，但在 Chrome 中无效

> ID：11383088
> 
> 赞同：3
> 
> 时间：2012-07-08T12:18:23.450
> 
> 标签：jquery, google-chrome

我有以下在 Firefox 和 Internet Explorer 中运行良好的 jQuery 代码。它在 Chrome 中不起作用，我不知道为什么。

我正在尝试`background-image`使用以下代码更改元素的：

```
$(".category-nav").find("a").each(function(index){
    if($(this).css("background-color") === "transparent" && !$(this).parent().hasClass("level1"))
    {
        $(this).css("background-image", "url(/images/gallery/images/arrow-cat-list-grey.png)");
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T13:15:03.237

Chrome 将背景颜色返回`rgba(0, 0, 0, 0)`为透明（[演示](http://jsfiddle.net/Mottie/yfjNQ/)）

试试这个代码（[演示](http://jsfiddle.net/Mottie/yfjNQ/1/)）：

```
$(".category-nav").find("a").each(function(index){
    if ( /transparent|rgba\(0, 0, 0, 0\)/.test($(this).css("background-color") ) &&
          !$(this).parent().hasClass("level1") )
    {
        $(this).css("background-image", "url(/images/gallery/images/arrow-cat-list-grey.png)");
    }

}); 
```

# android - Android：安装后检测应用程序

> ID：11383089
> 
> 赞同：0
> 
> 时间：2012-07-08T12:18:30.783
> 
> 标签：android, installation, detect

我正在从服务器下载 Android 应用程序并安装它。我想检测安装何时完成。我试过这个[链接](https://stackoverflow.com/questions/6717067/how-to-catch-or-receive-android-os-broadcasts-of-installed-applications)，但没有用。还有其他例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T12:42:25.377

把它放在你的清单中：

```
<manifest>
    ....
    <application>
        ....
        <receiver android:name=".YourReceiver">
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_ADDED">
            </intent-filter>
        </receiver>
    </application>
</manifest> 
```

然后，创建一个`YourReceiver`类并输入以下内容：

```
public class YourReceiver extends BroadcastReceiver{

final static String TAG = "YourReceiver";

@Override
public void onReceive(Context context, Intent intent) {

    Log.i(TAG, "Intent received!");

    Uri data = intent.getData();
    String pkgName = data.getEncodedSchemeSpecificPart();

    if (pkgName.equals("some.app.name")) {

        Log.i(TAG, "Package installed");
    }

} 
```

}

# sharepoint - 具有 WebApplication 范围的功能 - 仅部署到一个 Web 应用程序

> ID：11383090
> 
> 赞同：2
> 
> 时间：2012-07-08T12:18:44.537
> 
> 标签：sharepoint

在部署我的新 Sharepoint 解决方案（包含 WebApplication 范围的功能）后，我注意到该功能已添加到场中的所有 Web 应用程序中。

该解决方案已部署到一个特定的 Web 应用程序，所以我想知道这种行为是否正确。有什么方法可以使功能仅出现在 WebApplication 中，解决方案部署到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T18:42:29.437

您是如何从 powershell 或中央管理员部署的？如果您是从中央管理员部署的，您也应该获得一个要部署的 Web 应用程序列表，但如果您使用了 powershell 并没有使用 WebApplication 标志（ h​​ttp: [//technet.microsoft.com/en-us/library/ff607534。 aspx](http://technet.microsoft.com/en-us/library/ff607534.aspx)），它会部署到所有的网络应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-02T12:45:06.500

不幸的是，这是设计使然。该解决方案部署到单个 Web 应用程序，例如 [![在此处输入图像描述](../Images/032ee34c1ddecc6db28baecd1375fb01.png)](https://i.stack.imgur.com/ZYbk3.png)

但这些功能在所有 Web 应用程序上都是可见的，即： [![在此处输入图像描述](../Images/a42e9e7f95c86add22c5574bb20a701e.png)](https://i.stack.imgur.com/3F4iq.png)

特征/=解决方案。这意味着解决方案中的某些元素（不是功能）将仅出现在指定的 Web 应用程序中。

一种解决方法是隐藏该功能，以便用户无法激活它。

另请查看这些帖子：
[是否可以将解决方案部署到 Web 应用程序，以便其功能仅在此 Web 应用程序中可见？](https://stackoverflow.com/questions/4679468/is-it-possible-to-deploy-a-solution-to-a-web-application-so-that-its-features-ar)
[创建部署到选定 WebApplications 但将程序集复制到 GAC 的解决方案](https://stackoverflow.com/questions/4086460/creating-a-solution-that-deploys-to-selected-webapplications-but-copies-the-asse?noredirect=1&lq=1)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-02T13:22:55.040

如果解决方案部署到 ABC webApp，因此它不会部署到另一个 WebApp，如果它发生最好从所有 WebApp 中删除并通过 PowerShell 命令部署到 ABC webApp。

- 普拉文

# javascript - 如何在 Javascript 中使用 Joomlas 模板？>？

> ID：11383092
> 
> 赞同：0
> 
> 时间：2012-07-08T12:18:52.420
> 
> 标签：javascript, templates, url, joomla

我如何使用`<?php echo $this->baseurl ?>`或`<?php echo $this->template ?>`在 Javascript 脚本中使用？像这样：

```
!window.jQuery && document.write(unescape('<script src="/xxx/<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/jquery-1.7.2.min.js" data-mce-type="text/javascript" data-mce-type="text/javascript" data-mce-type="text/javascript" data-mce-type="text/javascript"> 
```

或不在 index.php 中的脚本标记中

```
<script type="text/javascript" src="/xxx/templates/<?php echo $this->template ?>/js/plugins.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:23:08.127

JavaScript 根本无法执行任何 PHP 代码。请记住，PHP 在服务器上运行，生成 HTML 文档，然后将其发送回浏览器。然后 JavaScript 开始运行。这意味着在 Joomla 完成运行时，您想在 JavaScript 中使用的任何数据都必须已经在页面上。

如果您确实需要从 Joomla 获取其他内容，请考虑使用 AJAX 请求。例如，您可以构建一个输出 的页面，`$this->template`然后在后台从 JavaScript 请求该页面。

# jquery - jQuery：按下鼠标时获取scrollTop

> ID：11383093
> 
> 赞同：1
> 
> 时间：2012-07-08T12:18:53.107
> 
> 标签：jquery, scroll, mousemove, scrolltop

我有一个问题：按下鼠标按钮时如何获取 scrollTop() 值？

我设计了一个选项，让用户可以绘制一个矩形，但可以绘制的区域有滚动条。我想在鼠标位于窗口边缘时增加矩形的高度（然后该区域正在滚动），但是在释放鼠标按钮之前 jQuery 没有正确获取 scrollTop 值。

方案：按下鼠标按钮 -> 在指针坐标处创建 div 并且：

> var sc1=$('#contentWrap').scrollTop();

移动鼠标 -> 改变 div 大小并且：

> var sc2=$(#contentWrap').scrollTop(); if (sc2>sc1) //它返回假

问题是，除非释放鼠标按钮，否则 var sc2 将具有与 sc1 相同的值，即使 #contentWrap 滚动也是如此。

PS 请原谅我的任何错误 - 我还在学习英语

# git - git reset --hard 后留下的未分级更改

> ID：11383094
> 
> 赞同：358
> 
> 时间：2012-07-08T12:19:15.057
> 
> 标签：git, git-reset

之后`git reset --hard`，`git status`给我`Changes not staged for commit:`部分内的文件。

我也试过`git reset .`，`git checkout -- .`和`git checkout-index -f -a`，无济于事。

那么，我怎样才能摆脱那些未分阶段的变化呢？

这似乎只针对 Visual Studio 项目文件。诡异的。请参阅此粘贴： http: [//pastebin.com/eFZwPn9Z](http://pastebin.com/eFZwPn9Z)。这些文件的特别之处在于 .gitattributes 我有：

```
*.sln        eol=crlf
*.vcproj     eol=crlf
*.vcxproj*   eol=crlf 
```

此外，`autocrlf`在我的 global 中设置为 false `.gitconfig`。这可能有点相关吗？

* * *

## 回答 #1

> 赞同：409
> 
> 时间：2013-10-25T11:43:35.300

我有同样的问题，它与`.gitattributes`文件有关。但是，导致问题的文件类型未在`.gitattributes`.

我能够通过简单地运行来解决这个问题

```
git rm .gitattributes
git add -A
git reset --hard 
```

* * *

## 回答 #2

> 赞同：224
> 
> 时间：2016-12-08T14:30:01.113

**我已经使用以下步骤解决了这个问题**

1.  从 Git 的索引中删除所有文件。

    ```
    git rm --cached -r . 
    ```

2.  重写 Git 索引以获取所有新的行尾。

    ```
    git reset --hard 
    ```

[解决方案是配置 Git 以处理行尾](https://help.github.com/articles/dealing-with-line-endings/)中描述的步骤的一部分

* * *

## 回答 #3

> 赞同：119
> 
> 时间：2012-07-08T12:26:09.047

Git 不会重置不在存储库中的文件。这样你就可以：

```
$ git add .
$ git reset --hard 
```

这将暂存所有更改，这将导致 Git 知道这些文件，然后重置它们。

如果这不起作用，您可以尝试存储并删除您的更改：

```
$ git stash
$ git stash drop 
```

* * *

## 回答 #4

> 赞同：104
> 
> 时间：2015-09-01T23:05:39.023

# 如果您使用 Git for Windows，这可能是您的问题

我遇到了同样的问题，并且存储、硬重置、清理甚至所有这些问题都仍然留下了更改。原来的问题是 git 没有正确设置 x 文件模式。这是 git for windows 的“已知问题”。本地更改在 gitk 和 git status 中显示为旧模式 100755 新模式 100644，没有任何实际文件差异。

解决方法是忽略文件模式：

```
git config core.filemode false 
```

[更多信息在这里](https://stackoverflow.com/questions/1257592/how-do-i-remove-files-saying-old-mode-100755-new-mode-100644-from-unstaged-cha)

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2012-07-08T13:25:41.963

好的，我已经解决了这个问题。

该`.gitattributes`文件似乎包含：

```
*.sln        eol=crlf
*.vcproj     eol=crlf
*.vcxproj*   eol=crlf 
```

使项目文件显示为未暂存。我不知道为什么会这样，我真的希望知道 git 方式的人能给我们一个很好的解释。

我的解决方法是删除这些文件，并`autocrlf = false`在`[core]`.`.git/config`

这与之前的配置并不完全相同，因为它要求每个开发人员都拥有`autocrlf = false`. 我想找到更好的解决方法。

编辑：

我评论了有罪的行，取消了评论，它起作用了。什么……我什至没有……！

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2016-12-05T22:14:32.500

# 可能的原因 #1 - 行尾归一化

可能发生这种情况的一种情况是，当有问题的文件在没有正确配置行尾 (1) 的情况下签入存储库时，导致存储库中的文件具有不正确的行尾或混合行尾。要确认，请确认`git diff`仅显示行尾的更改（默认情况下这些可能不可见，请尝试`git diff | cat -v`将回车视为文字`^M`字符）。

随后，有人可能添加`.gitattributes`或修改了`core.autocrlf`设置以规范行尾 (2)。基于`.gitattributes`或全局配置，Git 已将本地更改应用于您的工作副本，这些更改应用了请求的行尾规范化。不幸的是，由于某种原因`git reset --hard`并没有撤消这些行规范化更改。

## 解决方案

重置本地行结尾的解决方法不能解决问题。每次git“看到”文件时，它都会尝试重新应用规范化，导致同样的问题。

最好的选择是让 git 应用它想要的规范化，方法是规范化 repo 中的所有行结尾以匹配`.gitattributes`，并提交这些更改——请参阅[Trying to fix line-endings with git filter-branch，但没有运气](https://stackoverflow.com/questions/1510798/trying-to-fix-line-endings-with-git-filter-branch-but-having-no-luck/1511273#1511273)。

如果您真的想尝试手动还原对文件的更改，那么最简单的解决方案似乎是删除修改后的文件，然后告诉 git 恢复它们，尽管我注意到这个解决方案似乎并不能始终 100%时间（**警告：**如果您修改的文件有除行尾以外的更改！！）：

```
 git status --porcelain | grep "^ M" | cut -c4- | xargs rm
    git checkout -- . 
```

请注意，除非您在某个时候对存储库中的行尾进行规范化，否则您将继续遇到此问题。

# 可能的原因 #2 - 不区分大小写

第二个可能的原因是 Windows 或 Mac OS/X 上不区分大小写。例如，假设存储库中存在如下路径：

`/foo/bar`

现在 Linux 上的某个人将文件提交到`/foo/Bar`（可能是由于构建工具或创建该目录的东西）并推送。在 Linux 上，这实际上是两个单独的目录：

```
/foo/bar/fileA
/foo/Bar/fileA 
```

在 Windows 或 Mac 上签出此 repo 可能会导致修改后`fileA`无法重置，因为每次重置时，Windows 上的 git 都会签出`/foo/bar/fileA`，然后由于 Windows 不区分大小写，会覆盖`fileA`with的内容`/foo/Bar/fileA`，导致它们被“修改”。

另一种情况可能是存储库中存在的单个文件，当在不区分大小写的文件系统上签出时，这些文件会重叠。例如：

```
/foo/bar/fileA
/foo/bar/filea 
```

可能还有其他类似情况可能导致此类问题。

不区分大小写的文件系统上的 git 应该真正检测到这种情况并显示有用的警告消息，但它目前没有（这可能会在未来发生变化——请参阅git.git 邮件列表上的[讨论和相关建议补丁）。](https://public-inbox.org/git/24A09B73-B4D4-4C22-BC1B-41B22CB59FE6@gmail.com/)

## 解决方案

解决方案是将 git 索引中的文件大小写和 Windows 文件系统上的大小写对齐。这可以在 Linux 上完成，这将显示事物的真实状态，或者在 Windows 上使用非常有用的开源实用程序[Git-Unite](https://github.com/tawman/git-unite)完成。Git-Unite 将对 git 索引应用必要的案例更改，然后可以将其提交到 repo。

(1) 这很可能是使用 Windows 的人，没有对相关文件进行任何定义，并且使用的是`.gitattributes`默认全局设置（参见 (2)）。`core.autocrlf``false`

(2) [http://adaptivepatchwork.com/2012/03/01/mind-the-end-of-your-line/](http://adaptivepatchwork.com/2012/03/01/mind-the-end-of-your-line/)

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2018-09-10T21:27:46.210

# 如果其他答案不起作用，请尝试添加文件，然后重置

```
$ git add -A
$ git reset --hard 
```

就我而言，当 git 正在跟踪一堆空文件时，这会有所帮助。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-05-03T09:52:55.397

造成这种情况的另一个原因可能是**不区分大小写的文件系统**。如果您在同一级别的存储库中有多个文件夹，其名称仅因大小写而异，您将受到打击。使用其 Web 界面（例如 GitHub 或 VSTS）浏览源存储库以确保。

欲了解更多信息：[https ://stackoverflow.com/a/2016426/67824](https://stackoverflow.com/a/2016426/67824)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2012-07-08T12:23:35.830

您可以[`stash`](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html)取消更改，然后删除存储：

```
git stash
git stash drop 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2016-12-14T13:09:56.860

运行*清理*命令：

```
# Remove all untracked files and directories. (`-f` is `force`, `-d` is `remove directories`)

git clean -fd 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-10-17T14:57:48.427

这些方法都不适合我，唯一的解决方案是核对整个 repo 并重新克隆它。这包括存储，重置，添加然后重置，clrf设置，区分大小写等。叹息..

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-01-19T10:20:40.510

检查您的`.gitattributes`.

在我的情况下，我有`*.js text eol=lf`它并且 git 选项`core.autocrlf`是`true`.

当 git 自动转换我的文件行结尾并阻止我修复它甚至`git reset --hard HEAD`没有做任何事情时，它让我陷入了这种情况。

`*.js text eol=lf`我通过在我的评论中修复它并在`.gitattributes`它之后取消评论它。

看起来它只是 git 魔法。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-04-19T15:54:18.340

我相信 git for Windows 存在一个问题，其中 git 在结帐时随机写入错误的行尾，唯一的解决方法是结帐其他一些分支并强制 git 忽略更改。然后检查你真正想要工作的分支。

```
git checkout master -f
git checkout <your branch> 
```

请注意，这将丢弃您可能有意进行的任何更改，因此仅当您在结帐后立即遇到此问题时才执行此操作。

编辑：我第一次可能真的很幸运。事实证明，我在切换分支后又被咬了。事实证明，在更改分支更改后，git 报告的文件已修改。（显然是因为 git 并没有始终如一地将 CRLF 行正确地应用于文件。）

我更新到最新的 Windows git 并希望问题消失。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-11-17T20:31:07.337

我也遇到了一个类似的问题`.gitattributes`，但我的案例涉及 GitHub 的 LFS。虽然这不完全是 OP 的场景，但我认为它提供了一个机会来说明`.gitattributes`文件的作用以及为什么它会导致以“幻象”差异形式出现的未分级更改。

就我而言，一个文件已经在我的存储库中，就像从一开始一样。在最近的一次提交中，我添加了一个新`git-lfs track`规则，使用一种事后看来有点过于宽泛的模式，并最终匹配了这个古老的文件。我知道我不想更改此文件；我知道我没有更改文件，但现在它在我的未分阶段更改中，并且对该文件的任何签出或硬重置都无法修复它。为什么？

GitHub LFS 扩展主要通过利用`git`提供通过`.gitattributes`文件访问的挂钩来工作。通常，条目中的条目`.gitattributes`指定应如何处理匹配文件。在 OP 的情况下，它与规范化行尾有关；在我看来，是是否让 LFS 处理文件存储。在任何一种情况下，`git`计算 a 时看到的实际文件`git diff`都与检查文件时看到的文件不匹配。因此，如果您通过匹配文件的模式更改文件的处理`.gitattributes`方式，它将在状态报告中显示为未暂存的更改，即使文件中确实没有更改。

话虽如此，我对这个问题的“回答”是，如果`.gitattributes`文件更改是您想要做的事情，那么您应该只添加更改并继续前进。如果不是，则修改`.gitattributes`以更好地代表您想要做的事情。

## 参考

1.  [GitHub LFS 规范](https://github.com/git-lfs/git-lfs/blob/master/docs/spec.md)- 很好地描述了它们如何挂钩`clean`和`smudge`函数调用，以`git`使用带有哈希的简单文本文件替换对象中的文件。

2.  [gitattributes 文档](https://git-scm.com/docs/gitattributes)- 有关可用于自定义`git`文档处理方式的所有详细信息。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-09-27T15:32:18.273

我有同样的问题。我做了`git reset --hard HEAD`，但每次`git status`我都看到一些文件被修改。

我的解决方案相对简单。我刚刚关闭了我的 IDE（这里是 Xcode）并关闭了我的命令行（这里是我的 Mac OS 上的终端）并再次尝试它并且它工作了。

然而，我始终无法找到问题的根源。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-09-19T00:54:40.940

尝试简单地 git restore 。

这就是 git 所说的并且它正在工作

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-10-05T08:00:03.087

在类似的情况下。由于许多程序员多年的折磨，他们能够将行尾的不同编码（*.asp*、.js、.css ...不是本质）填充到一个文件中。前段时间拒绝了.gitattributes。repo left`autorclf = true`和`safecrlf = warn`.

最后一个问题是从具有不同行尾的存档同步时出现的。从存档复制后，在 git status 中，许多文件都随注释更改

`The line will have its original line endings in your working directory. warning: LF will be replaced by CRLF in ...`

如何在 Git 中规范化工作树行结尾的提示[？](https://stackoverflow.com/questions/15641259/how-to-normalize-working-tree-line-endings-in-git)帮助

`git add -u`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-12T11:11:39.627

我遇到的另一种可能性是存储库中的一个包最终带有一个分离的 HEAD。如果这里的答案都没有帮助，并且您遇到这样的 git status 消息，您可能会遇到同样的问题：

```
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        modified:   path/to/package (new commits) 
```

进入`path/to/package`文件夹 a`git status`应该会产生以下结果：

```
HEAD detached at 7515f05 
```

然后下面的命令应该解决这个问题，`master`应该用你的本地分支替换：

```
git checkout master 
```

您会收到一条消息，表明您的本地分支将在远程分支后面进行一些提交。`git pull`你应该走出困境！

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-05-18T09:51:08.987

类似的问题，虽然我确定只是表面上。无论如何，它可能对某人有所帮助：我做了什么（FWIW，在 SourceTree 中）：隐藏了未提交的文件，然后进行了硬重置。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-07-20T02:23:20.587

正如其他答案所指出的那样，问题是由于线端自动更正。我在 *.svg 文件中遇到了这个问题。我在项目中使用 svg 文件作为图标。

为了解决这个问题，我让 git 知道 svg 文件应该被视为二进制而不是文本，方法是将下面的行添加到 .gitattributes

*.svg 二进制

* * *

## 回答 #21

> 赞同：-3
> 
> 时间：2020-05-25T13:39:44.400

由于某些原因

`git add .`

**没用**，但是

`$ git add -A`

**解决了！**

# java - java中图形操作的实用程序

> ID：11383100
> 
> 赞同：2
> 
> 时间：2012-07-08T12:19:39.827
> 
> 标签：java, collections, graph, map, treemap

我需要一个`key ==>> value`如下图的图形结构：

![在此处输入图像描述](../Images/ad0661bd4cf0deca4cc655172e37c534.png)

圆圈中的数字是其节点的键。

我想访问 key 中的存储值，`2-7-6-5`并且我想通过`2-7`key 检索一个子图，其中包含`2`, `6-5`, `6-11`keys-values 的集合，所以我通过嵌套映射编写了我的实现，它工作得很好，但我的问题是：

是否有任何自定义`Map`实现或第三方库可以解决我的情况，以便从手动操作（例如`String.split`循环和条件语句）中清理我的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:03:54.180

如果您真的只是在寻找一个 3rd-Party Java 库来处理图表，请查看[JUNG](http://jung.sourceforge.net/)，它有很多用于图表操作的功能。但是，对于您想要实现的目标来说，这可能是矫枉过正。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T13:07:33.347

拿这个 - 非常适合图形操作，也适合在摇摆中显示图形结构

```
<dependency>
    <groupId>jgraph</groupId>
    <artifactId>jgraph</artifactId>
    <version>5.13.0.0</version>
</dependency> 
```

[http://www.jgraph.com](http://www.jgraph.com)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T12:53:53.263

这是一个相当简单的图构造和遍历问题。您不需要任何库。你可以在一个简单的java类中做到这一点。例如

[http://it-essence.xs4all.nl/roller/technology/entry/three_tree_traversals_in_java](http://it-essence.xs4all.nl/roller/technology/entry/three_tree_traversals_in_java)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T03:11:18.157

听起来您希望将节点实现为类实例并将链接实现为引用。使用地图来实现图形边缘将非常复杂且效率低下。难怪你想清理你的代码。我不确定我是否完全理解您的问题，但这应该很接近：

```
// Null nodes are the simplest type. They represent missing children.
class NullNode {

    // Get the values of all leaves descended from this node as a set.
    Set<Integer> getValues() { return new HashSet(0); }

    // Get the values descended from the node at the end of the given
    // key path as a set.  For a null node, this should not be called.
    Set<Integer> getValues(int [] path, int i) { raise new IllegalOperationException(); }

    // Initiate the search for values.  The only way that's okay
    // for null nodes is when the path is empty.
    Set<Integer> getValues(int [] path) {
        if (path.length == 0)
            return new HashSet(0);
        else
            raise new IllegalOperationException();
    }
}

// A regular node is a null node with a key. It should
// never be instantiated. Use Interior or Leaf nodes for that.
abstract class Node extends NullNode {

    int key;

    // Initiate the search for values.  Only descend if the key matches.
    Set<Integer> getValues(int [] path) {
        return (path.length > 0 && path[0] == key) ? getValues(path, 1) : new HashSet(0);
    }
}

// Interior nodes have two children, which may be Null, Interior, or Leaf.
class InteriorNode extends Node {

    Node left, right;

    Set<Integer> getValues() {
        Set<Integer> v = left.getValues();
        v.addAll(right.getValues());
        return v;
    }

    Set<Integer> getValues(int [] path, int i) {
        if (i + 1 < path.length) {
            // Again we only descend if the key matches.
            if (path[i + 1] == left.key)  return getValues(left, i + 1);
            if (path[i + 1] == right.key) return getValues(right, i + 1);
            return new HashSet(0);
        }
        return getValues(); // Get values from both children.
    }
}

// A leaf node has no children and a value.
class LeafNode extends Node {

    int value;

    Set<Integer> getValues() {
        HashSet<Integer> v = new HashSet(1);
        v.add(value);
        return v;
    }

    Set<Integer> getValues(int [] path, int i) {
        return (i + 1 >= path.length) ? getValues() : new HashSet(0);
    } 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T10:47:09.743

我发现的最好的图形库不是用 Java 编写的，而是用 Scala 编写的，它利用了 Java 中没有的一些强大的 scala 特性，例如抽象类型。

它被称为 Scala 的 Graph，它非常全面，但我必须警告您，虽然 Scala 和 Java 是相互兼容的（您可以在同一个项目中构建它们并从 Scala 类调用 Java 类，反之亦然），当涉及到 Java 中不可用的某些功能时，从 Java 调用 Scala 时可能会出现一些问题。

[http://www.assembla.com/spaces/scala-graph/wiki](http://www.assembla.com/spaces/scala-graph/wiki)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T17:55:19.033

> 是否有任何自定义`Map`实现或第三方库可以解决我的情况，以便从手动操作（例如`String.split`循环和条件语句）中清理我的代码？

如果您想消除编写操作代码的自由，那么您可以创建自己的库。您可以通过将类导出到 Jar 文件中轻松地在 Eclipse 中创建库，我认为这在 NetBeans 中是一项微不足道的任务。

如果您想防止在构建后对图形进行更改，那么您需要创建一个不可变的数据结构。使用不可变的图结构，您必须将 Graph 视为一个 Universe，并且每个操作都是一个 GraphOperation。您永远不能修改 Graph，只能创建一个新的 Graph，它是通过 Graph 与您的 GraphOperations 列表交叉产生的。假设您的 Graph 结构包含唯一的节点值，这不会造成太大问题，因为您可以愉快地使用值来描述关系。您的代码将如下所示：

```
Graph graph2 = graph1.process(graph1.GetTopNode().RemoveLeft());
graph2 = graph2.process(graph2.GetNode(7).AddRight(8)); 
```

`GetTopNode()`返回一个仅提供节点视图的对象。`RemoveLeft()`返回一个`GraphOperation`对象，该对象`Graph.process()`用于从操作中创建一个新图。如果您愿意，它可以只返回一个`Graph`内部存储链接的实现`graph1`，以及已传递给它的实例列表`GraphOperation`，从而避免过于频繁地复制图形结构（很像字符串缓冲区）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-30T09:54:53.410

如果您正在寻找 Java 中的图形数据库和操作，[Neo4j](http://neo4j.org/resources/)可能会帮助您。如果您正在寻找一个完美的 Graph DB 和操作 API，这可能超出您的讨价还价。

它为您提供了非常高级的选项来遍历图形节点、关系、审计。Neo4j 被跨组织用于存储非常复杂的分层数据，Neo4j 的性能远远优于基于 oracle 的 R-DB 用于复杂的分层数据库。

# memory-management - iOS - 通过代码或实用程序面板加载图像的内存效率

> ID：11383103
> 
> 赞同：0
> 
> 时间：2012-07-08T12:20:10.870
> 
> 标签：memory-management, uiimageview

对于只加载一张图片，第一步是将 a 拖到`UIImageView`屏幕上。现在我可以为其分配一个`IBOutlet`并在代码中加载图像。它为我增加`setImage=nil`了内容。`viewDidUnload`或者我可以使用实用程序面板将该图像分配给该图像`UIImage`并且不编写任何代码。但这和那样有效吗？更好的？更差？如何将图像分配给按钮？是在代码中分配它们还是只从实用程序面板中选择按钮的图像更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T12:37:41.593

在我看来，您正在将界面生成器中的某些操作与以编程方式进行比较，对吗？考虑到您使用相同类型的内存管理（消除 ivar 等），它们都是相同的。基本上，xib 做的事情与将其编码出来的事情完全相同，这只是一个偏好问题。

# java - 方法只调用一次

> ID：11383109
> 
> 赞同：1
> 
> 时间：2012-07-08T12:20:49.957
> 
> 标签：java

我有这个方法：

```
public void start()
{

if(!isAclone())
{
...
this.thread.start()
}
else
{
...
this.thread.start()
} 
```

我只会在里面执行一个我的方法。无论`if-block`我把我的方法放在哪里`start()`，它都会执行两次。我怎样才能解决这个问题？

编辑

```
private final AtomicBoolean hasRun = new AtomicBoolean();

...
initializeLogger();
if(!hasRun.getAndSet(true))
{
   activateMonitoring();
}

.... 
```

# ruby-on-rails-3 - 如何在同一个轨道应用程序中同时使用火箭裤和门卫？

> ID：11383111
> 
> 赞同：2
> 
> 时间：2012-07-08T12:21:35.113
> 
> 标签：ruby-on-rails-3, api, rest, oauth-2.0

我正在为我的应用程序创建一个 JSON API。我想为 JSON API 和门卫使用 Rocket_pants 来提供 OAuth2 支持。

我的问题是，一旦我将控制器更改为扩展火箭裤控制器，门卫方法似乎不再可用。

因此，一旦我将控制器的声明更改为`class Api::V1::ApiController < RocketPants::Base`，我就会收到此错误：

```
in `<class:ApiController>': undefined method `doorkeeper_for' for Api::V1::ApiController:Class (NoMethodError) 
```

这可能是有道理的，因为火箭裤无法了解门卫，但我想知道我应该怎么做才能让它识别门卫。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T17:27:42.560

如果您使用 doorkeeper 0.4.1 或更高版本，您可以将 doorkeeper 过滤器添加到您的控制器：

```
class MetalController < ActionController::Metal
  include AbstractController::Callbacks # you might want to skip this for rocket_pants based controller
  include ActionController::Head
  include Doorkeeper::Helpers::Filter

  doorkeeper_for :all

  def index
    self.response_body = { :ok => true }.to_json
  end
end 
```

由于 Rocket_pants 已经包含`AbstractController::Callbacks`你可以跳过它，所以你的控制器看起来像：

```
class MetalController < RocketPants::Base
  include ActionController::Head
  include Doorkeeper::Helpers::Filter

  version 1

  doorkeeper_for :all
end 
```

wiki 上的这个页面也可能有用：[https ://github.com/applicake/doorkeeper/wiki/ActionController::Metal-with-doorkeeper](https://github.com/applicake/doorkeeper/wiki/ActionController::Metal-with-doorkeeper)

# asp.net-mvc-3 - 实体框架告诉上下文实体已更新

> ID：11383112
> 
> 赞同：0
> 
> 时间：2012-07-08T12:21:46.103
> 
> 标签：asp.net-mvc-3, entity-framework

我有一个场景，我有一个图像属性，它是产品实体的一部分。

当允许用户通过 MVC3 屏幕编辑此产品时，图像属性显示如下：

```
<div class="editor-label">Image</div>
    <div class="editor-field">
        @if (Model.ProductItem.ImageData == null)
        {
        @:None
        }
        else
        {
            <img alt="Product Image" width="125" height="125" 
            src="@Url.Action("GetImage", "Product", new { Model.ProductItem.ProductId     })" />
        }
    </div>

    <div>Upload new image: <input type="file" name="Image" /></div> 
```

要编辑当前图像，用户实际上是通过上传选择一个新图像。这意味着当前 ImageData 属性为 null，模型状态无效。新图像在帖子中已过去，因此我将其设置为 ImageData 属性并清除模型验证错误。

然后我通过 context.savechanges() 方法保存“更改”，但是上下文认为此特定实体没有任何更改。为了解决这个问题，我在编辑时做了以下操作：

```
 if (context.Products.Local.Count() == 0)
            {
                Product procurr = context.Products
                    .Where(p => p.ProductId == product.ProductId)
                    .FirstOrDefault();

                context.Entry(procurr).CurrentValues.SetValues(product);    
            } 
```

本质上，我强制更新我想要更新的产品列表中的项目（procurr 是列表中的项目，产品是我要保存的新编辑值）

我的问题是（A）这是使用上下文的最佳方法吗，以及（B）在 UI 中是否有更好的方法来做到这一点，即以某种方式将新旧图像捆绑在一起，以便模型自动获取更改？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:52:06.090

你所做的看起来是正确的。

基本思想是，当您从服务器获取数据并将其返回给浏览器时，您正在使用的 EF 上下文将关闭。

当回复从浏览器返回时，您需要将数据与您尝试更新的行连接起来。

根据 id 读取行，更新相关字段，然后运行保存更改，是一个好方法。

# android - 创建具有交替位置的短信气泡

> ID：11383114
> 
> 赞同：-1
> 
> 时间：2012-07-08T12:22:07.127
> 
> 标签：android, android-layout

每次按下按钮时，我都会尝试添加一个 TextView。但问题是我希望它像在短信应用程序中一样添加。第一次单击按钮时，TextView 将位于屏幕左侧。下次单击按钮时，新创建的 TextView 应该在右侧。

我尝试使用以下代码，但没有成功。

```
public void sendMessage(View view){

    EditText editText=(EditText)findViewById(R.id.edit_message);
    String message=editText.getText().toString();

    LinearLayout layout=(LinearLayout)findViewById(R.id.layout01);

    TextView text=new TextView(this);
    text.setText(message);
    text.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
    layout.setOrientation(LinearLayout.VERTICAL);
    if(flag){
        text.setGravity(Gravity.LEFT);          
    }
    else
        text.setGravity(Gravity.RIGHT);
    flag=!flag;
    layout.addView(text);
} 
```

'flag' 是布尔类型，在类的开头声明。

编辑 -

我是否有可能再创建两个布局（一个用于在左侧显示 TextView，另一个用于在右侧显示）。但我不知道如何在同一个屏幕上使用不同的布局。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T12:35:23.983

```
public void sendMessage(View view){

    EditText editText=(EditText)findViewById(R.id.edit_message);
    String message=editText.getText().toString();

    LinearLayout layout=(LinearLayout)findViewById(R.id.layout01);

    TextView text=new TextView(this);
    text.setText(message);
    text.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
    layout.setOrientation(LinearLayout.VERTICAL);
    if(flag){
        text.setGravity(Gravity.LEFT);
        flag=!flag;          
    }
    else
      {
        text.setGravity(Gravity.RIGHT);
    flag=!flag;
      }
    layout.addView(text);
} 
```

# c# - 在未安装 .NET4.0 的计算机上执行 .NET4.0 应用程序时会发生什么？

> ID：11383115
> 
> 赞同：0
> 
> 时间：2012-07-08T12:22:10.780
> 
> 标签：c#, .net, c#-4.0, .net-4.0

非常简单的问题，如果你用 .NET 4.0 编译一个程序（一个显式使用 .NET 4.0 的特性的程序，这在以前的框架版本中不可用），比如说一个命令行程序，然后你将它部署到没有没有 .NET 4.0（假设它只有 .NET2.0 框架）。

从命令行运行 .exe 会发生什么？是否抛出异常？哪个例外？

我可以测试自己，但我现在手头没有缺少这个框架版本的 Windows 盒子。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T12:30:15.567

您将收到以下错误：

![要运行此应用程序，您首先必须安装以下 .NET Framework 版本之一：v4.0.30319。 请联系您的应用程序发布者以获取有关获取适当版本的 .NET Framework 的说明。](../Images/42197cb6c786f7b7b7fc8fea90aad174.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T12:28:32.500

您将无法作为一个整体启动可执行文件。您将收到一个异常（以 Windows 遇到错误的形式......等），或者您会收到一个通知，指出您没有正确的 .NET 版本（虽然不确定最后一部分......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T12:33:58.087

当您尝试在具有先前版本 .网络安装。

希望这可以帮助...

# node.js - 带有javascript的mongodb查询，游标方法

> ID：11383116
> 
> 赞同：1
> 
> 时间：2012-07-08T12:22:16.473
> 
> 标签：node.js, mongodb, mongodb-query

我只是为使用 MongoDB、Backbone 和 Node with Express 创建一个简单的用户登录。

我一直在查询数据库以获取用户凭据并可靠地识别它们是否存在。

我在这里尝试两件事：

```
// When user posts to the url
app.post('/save/user', function (req, res) {

  // create user object and store email from form
  var user = {
    email : req.body.email
  };

  // in my collection users
  db.collection('users', function (err, collection) {

    // create a variable existence with the value, in lamens terms 'yes it does' or 'no it doesnt'
    var existence = findOne(collection, {
      $query : {email : user.email}
    });

  });
};

// findOne function passing the collection and the query object
function findOne(coll, query) {
  var cursor = coll.find(query).limit(1);
  return cursor.hasNext() ? cursor.next() : null;
} 
```

所以这是我一直在尝试的第一种方式。问题是，我不明白为什么光标没有'next()、hasNext()、findOne()、forEach()' 和其他用于 javascript 环境的方法，但仅适用于 mongo shell。

我的问题是，如何从我的 Node.js 应用程序中访问这些方法？

我尝试的第二种方法：

// 当用户发帖到 url app.post('/save/user', function (req, res) {

```
 // create user object and store email from form
  var user = {
    email : req.body.email
  };

  // in my collection users
  db.collection('users', function (err, collection) {

    // Have a look for the email entered
    var query = collection.find({
      $query : {email : user.email}
    }).limit(1);

    // If it's true, then send response
    query.each( function (err, item) {

      // If the item does exists, then send back message and don't insert. Otherwise, insert.
      if(item !== null) {
        console.log('Item does not equal null : ', item);
        res.send('The email : ' + item.email + ' already exists');
      } else {
        console.log('Item does equal null : ', item);
        collection.insert(user);
        res.send('New user with email : ' + user.email + ' was saved');
      }

    });

  });
}; 
```

这样做的问题是，它总是会在某个时候返回 null，所以我要警告用户“它已经存在”，然后下一次将是 null，所以它将保存电子邮件。

我认为我错过了这一点，所以在正确方向上的一点会很棒。

提前谢谢了！

* * *

好吧，我已经研究了一个解决方案，但仍然必须错过重点。

我正在做一个插入，用 safe : true 传入我的用户对象，但是虽然可以输入多个用户对象，但它仍然只寻找相同的 ID；s。我尝试使用 new ObjectID() 创建一个 ID，但我仍然不明白如果用户输入他们的电子邮件地址，然后尝试使用相同的电子邮件创建一个新用户，它将为该条目创建一个新 ID。

通过 findOne，我可以轻松查看它是否存在，我不知道如何使用 insert。

```
app.post('/register/user', function (req, res) {

// Store user details in object
var user = {
  username : req.body.user,
  email : req.body.email,
  password : req.body.password
};

db.collection('users', function (err, collection) {

  collection.insert(user, {safe : true}, function (err, doc) {

    console.log('what is doc : ', doc);
    if(!err) {
      res.writeHead(200, {
        "Content-Type" : "text/plain",
        "Message" : "New user added",
        "Access-Control-Allow-Origin" : "*"
      });
    } else {
      console.log('Error is : ', err);
      res.writeHead(200, {
        "Content-Type" : "text/plain",
        "Message" : "User already exists",
        "Access-Control-Allow-Origin" : "*"
      });
    }

    res.end();

  });

}); 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:50:31.973

如果您使用的是[Native Node.JS MongoDB 驱动程序](http://mongodb.github.com/node-mongodb-native/)，则有一个[collection.findOne()](http://mongodb.github.com/node-mongodb-native/markdown-docs/queries.html#find-first-occurence-with-findone)方法，并且[游标](http://mongodb.github.com/node-mongodb-native/markdown-docs/queries.html#cursors)确实具有`nextObject()`与`each()`shell 方法`hasNext()`和`forEach()`. mongo shell 等效项的实现/命名在驱动程序之间可能略有不同，但您应该能够将 mongo shell 示例转换为 Node.JS。

至于保存新用户 .. 而不是在插入之前查询用户，您最好在字段上添加唯一[索引](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#insert)`email`并使用. 如果由于重复电子邮件而导致插入失败，您可以处理结果。如果您在插入之前进行查询，则存在潜在的竞争条件，即在您检查电子邮件时电子邮件可能不存在，但在您执行插入时确实存在。`safe:true``err`

# javascript - 如何加载外部 HTML 内容以供此 JS 代码操作？

> ID：11383117
> 
> 赞同：0
> 
> 时间：2012-07-08T12:22:25.433
> 
> 标签：javascript, jquery

在另一个用户的帮助下，我有了以下 JSFiddle，它查看表格并删除我不需要的列。

[http://jsfiddle.net/9qme9/](http://jsfiddle.net/9qme9/)

我想做的是从外部文件加载 HTML（实际上是一个 aspx 文件），而不是在同一页面上操作 HTML - 就像上面的链接一样。

我正在离线/客户端执行此操作，因此 PHP 是不可能的，并且 aspx 文件与*我的*页面不在同一位置。

我是初学者，因此非常感谢 JSFiddle 示例。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:26:26.417

您可以使用

```
 $("#elem").load("url.aspx"); 
```

其中 #elem 是要放置外部 url 内容的 HTML 元素的 id

检查这个例如：http: [//jsfiddle.net/9qme9/5/](http://jsfiddle.net/9qme9/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T13:15:26.970

在将过滤后的表附加到页面之前，我建议以下内容，其中包含先前用于过滤掉您不想要的列的答案：

```
$(document).ready(function() {

    //define which column headers to keep
    $("#gvRealtime")
        .load("http://fiddle.jshell.net/UqZjt/show/", function(response, status, xhr){
            var html = $(response),
                table = html.find('#gvRealtime'),
                headersToKeep = ['---', 'C6', 'C7', 'C13', 'C14'],
                colsToKeep = [],
                ths = table.find('th');

            $.each(headersToKeep, function(i, v) {
                //finds each header and adds its index to the colsToKeep
                colsToKeep.push(ths.filter(function() {
                    return $(this).text() == v;
                }).index());
            });

            //makes a new jQuery object containing only the headers/cells not present in the colsToKeep
            $('th, td', '#gvRealtime, #gvTotal').filter(function() {
                return $.inArray($(this).index(), colsToKeep) == -1;
            }).hide(); //and hides them
        });

}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9qme9/6/)。

# c# - 从用户控件 WPF 中删除 RadContextMenu

> ID：11383119
> 
> 赞同：0
> 
> 时间：2012-07-08T12:23:04.893
> 
> 标签：c#, wpf, contextmenu

我有 RadPaneGroup，并且从后面的代码中我正在向它添加用户控件。

```
 <telerik:RadContextMenu.ContextMenu>
                        <telerik:RadContextMenu Name="ctxMenu">
                            <telerik:RadMenuItem Click="MenuItem_Click" Header="Close Current Form" />
                            <telerik:RadMenuItem Click="MenuItem_Click" Header="Close All"/>
                        </telerik:RadContextMenu>
                    </telerik:RadContextMenu.ContextMenu>

                </telerikDocking:RadPaneGroup> 
```

问题是当我单击用户控件时菜单打开，我不希望得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:21:50.810

请尝试将上下文菜单的可见性设置为折叠。

# android - Android 布局，将宽度缩放到屏幕分辨率

> ID：11383121
> 
> 赞同：0
> 
> 时间：2012-07-08T12:23:20.543
> 
> 标签：android, layout

我想调整图像的大小以适应它填充整个宽度的屏幕。高度应设置为纵横比。例如，图像尺寸为宽x高 10x5，手机为 400 宽。图像应以 200x400 显示。

我玩了一些设置 android:scaleType="center" 根据文档应该是正确的设置，但似乎没有效果， android:scaleType="centerCrop" 适合高度并使宽度大于屏幕。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageViewFrage"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:padding="1dp"
        android:scaleType="centerCrop"
        android:src="@drawable/bg_striped_img" />
</LinearLayout>

</LinearLayout> 
```

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:36:50.563

你应该试试`android:scaleType="centerInside"`。

根据文档（[http://developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)）：

> 均匀缩放图像（保持图像的纵横比），使图像的两个尺寸（宽度和高度）都等于或小于视图的相应尺寸（减去填充）。然后图像在视图中居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:30:52.067

好的不会工作。太糟糕了。找到了这个sol

[http://argillander.wordpress.com/2011/11/24/scale-image-into-imageview-then-resize-imageview-to-match-the-image/](http://argillander.wordpress.com/2011/11/24/scale-image-into-imageview-then-resize-imageview-to-match-the-image/)

# assembly - ARM 指令 ldrex/strex 是否必须对缓存对齐的数据进行操作？

> ID：11383125
> 
> 赞同：3
> 
> 时间：2012-07-08T12:23:50.560
> 
> 标签：assembly, arm, lock-free

在 Intel 上，CMPXCHG 的参数必须与高速缓存行对齐（因为 Intel 使用 MESI 来实现 CAS）。

在 ARM 上，ldrex 和 strex 在独占保留粒度上运行。

需要明确的是，这是否意味着在 ARM 上，正在操作的数据不必与高速缓存行对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:32:03.790

独占访问限制

以下限制适用于独占访问：

• 具有给定ID 的独占写入的大小和长度必须与先前具有相同ID 的独占读取的大小和长度相同。

• 独占访问的地址必须与事务中的总字节数对齐。

• 独占读取和独占写入的地址必须相同。

• 独占访问的读取部分的ARID 字段必须与写入部分的AWID 匹配。

• 独占访问的读取和写入部分的控制信号必须相同。

• 在独占访问突发中传输的字节数必须是 2 的幂，即 1、2、4、8、16、32、64 或 128 字节。

• 独占突发中可以传输的最大字节数为 128。

• ARCACHE[3:0] 或AWCACHE[3:0] 信号的值必须保证监控独占访问的从机看到事务。例如，被从属设备监视的独占访问不能具有指示事务可缓存的 ARCACHE[3:0] 或 AWCACHE[3:0] 值。

不遵守这些限制会导致不可预测的行为。

以上来自 AMBA/AXI 规范。您会发现某些供应商忽略了 AWLOCK/ARLOCK（这意味着 ldrex/strex 无法在内核之外工作）。我有一些代码可以证明这一点，或者至少如果你发现一个不支持独占访问的系统会。

[https://github.com/dwelch67/raspberrypi/tree/master/extest](https://github.com/dwelch67/raspberrypi/tree/master/extest)

根据任务和您想要的可移植性，您可能需要提供被 ifdefs 包围的 swp 和 ldrex/strex 解决方案和/或使用过多的可用寄存器（运行时）来告诉您内核支持或不支持哪些指令你正在运行。（在至少一种情况下，您可能会发现 swp 和 ldrex/strex 均不受支持）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:04:56.110

它在 ARM 架构参考手册 A.3.2.1 “未对齐的数据访问”中说得对。`LDREX`并`STREX`要求字对齐。这是有道理的，因为未对齐的数据访问可以跨越排他的预留粒度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-18T00:37:23.807

在 Intel 上，CMPXCHG 的参数不需要缓存对齐。试试看，你会发现它有效。

但是，您是对的：在可缓存内存中，英特尔确实使用缓存协议来实现 CMPXCHG。因此，最好不要将两个独立的高使用率同步变量放在同一个缓存行中——因为如果两个处理器使用这些不同的变量进行同步，缓存行可能会来回颠簸。但这与任何数据的问题完全相同：您不会让不同的处理器同时写入同一个高速缓存行。虚假分享。

但是你当然可以不缓存行对齐锁：

```
struct Foo {
  int data;
  Lock lock;
  int data_after;
}; 
```

您可以将不同的锁放在同一个缓存行中：

```
struct Foo {
  int data;
  Lock read_lock;
  int data_between;
  Lock write_lock;
  int data_after;
}; 
```

由于阅读和写作往往是互斥的，因此可能没有损失；

您可以将不同的锁放在同一个缓存行中：

```
struct Foo {
  int data;
  Lock read_lock;
  int data_between;
  Lock write_lock;
  int data_after;
}; 
```

顺便说一句，在非缓存内存中，英特尔不会将缓存侦听协议用于 CMPXCHG 等原子操作。因此缓存行对齐同步变量的理由较少。但是您仍然可能希望：许多内存子系统按缓存线大小交错，即使在未缓存时也是如此。

至于 ARM：几乎是一样的。

在 snoopy 总线或未缓存的总线上，您可能不需要过多担心缓存行对齐。

但是在集群缓存层次结构中，您会遇到与 x86 完全相同的问题。更重要的是，事实上，众所周知如何“导出”CMPXCHG 之类的操作，而不是 ARM ldrexd/strexd。

# php - 激活链接未连接

> ID：11383126
> 
> 赞同：-1
> 
> 时间：2012-07-08T12:23:51.930
> 
> 标签：php

请我的注册和激活链接到现在为止都可以正常工作，当单击激活帐户的链接时，它会显示“连接问题”。

这是注册文件的相关代码

```
{
       //generate random code
       $code = rand(11111111,99999999);

       //send activation email
       $to = $email;
       $subject = "Activate your account";
       $headers = "From: donotreply@reacheasy.co.uk";
       $body = " Hello $fullname,\n\nUsername $username,\n\n Password $password ,\n\nYou registered and need to activate your account, n\nPlease keep this email safe as it contains your password . Click the link below or paste it into the URL bar of your browser\n\nhttp://reacheasy.co.uk/activate.php?code=$code\n\nThanks!"; 
```

这是激活文件

```
<?php
 include 'include/global.php';

    $code = $_GET['code'];

    if (!$code)
        echo "No code supplied";
    else
    {
        $check = mysql_query("SELECT * FROM reusers WHERE code='$code' AND active='1'");
        //echo "SELECT * FROM users WHERE code='$code' AND active='1'";
        if (mysql_num_rows($check)==1)
            echo "You have already activated your account";
        else
        {
            $activate = mysql_query("UPDATE reusers SET active='1' WHERE code='$code'");
            echo "Your account has been activated!<a href='index.php'>Return to login page</a>";
        }

    }
    ?> 
```

请帮忙看看谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T12:38:18.613

检查 global.php 并确保您可以连接。`or mysql_error()` 在结束时调用`mysql_connect()`

# python - urlopen 总是检索相同的网页

> ID：11383130
> 
> 赞同：0
> 
> 时间：2012-07-08T12:24:32.273
> 
> 标签：python, python-2.7, beautifulsoup, urllib2, urlopen

我正在尝试使用 urllib2、BeautifulSoup 和 Python 2.7 解析网页。

问题出在上游：每次我尝试检索一个新网页时，我都会得到我已经检索到的那个。但是，我的网络浏览器中的页面有所不同：请参见[page 1](http://www.senscritique.com/clement/collection/#page=1)和[page 2](http://www.senscritique.com/clement/collection/#page=2)。循环页码有问题吗？

这是一个代码示例：

```
def main(page_number_max):
    import urllib2 as ul
    from BeautifulSoup import BeautifulSoup as bs

    base_url = 'http://www.senscritique.com/clement/collection/#page='

    for page_number in range(1, 1+page_number_max):
        url = base_url + str(page_number) + '/'
        html = ul.urlopen(url)
        bt = bs(html)

        for item in bt.findAll('div', 'c_listing-products-content xl'):
            item_name = item.findAll('h2', 'c_heading c_heading-5 c_bold')
            print str(item_name[0].contents[1]).split('\t')[11]

        print('End of page ' + str(page_number) + '\n')

if __name__ == '__main__':
    page_number_max = 2
    main(page_number_max) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T13:17:18.547

当您向服务器发送 http 请求时，“#”字符之后的所有内容都将被忽略。“#”后面的部分只对浏览器可用。

如果您在 Chrome 浏览器中打开开发人员工具（或在 Firefox 中打开 firebug），您将看到每次更改 senscritique.com 上的页面时都会向服务器发送请求。这就是您要查找的数据的来源。

I'm not going into details about what exacly to send in order to retrieve data from this page, because I think it's not consistent with their TOS.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:43:17.673

"#" is the anchor tag used to identify and jump to specific parts of the document.The browser does it so when you send the request the whole web page is loaded while the rest is ignored.

# php - 如何在 webroot 之外保存会话；

> ID：11383132
> 
> 赞同：0
> 
> 时间：2012-07-08T12:24:51.260
> 
> 标签：php

我正在尝试将会话保存在 Web 根目录之外。我的网站根文件夹是

```
public_html -> example.com 
```

我创建的会话文件夹是 public_html 文件夹的兄弟。我不知道如何达到它。我在下面尝试过，但出现错误。

```
session.save_path = /sessions; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:30:17.767

您提供的路径需要用引号引起来；这可能就是这里的全部错误：

```
session.save_path = "/sessions" 
```

您提到“会话文件夹是 public_html 的兄弟”，所以我假设它`public_html`实际上位于文件系统的顶层。不过，这将是不寻常的。你确定没有更多的路径吗？`pwd -P`（如果您使用的是类 UNIX 系统，您可以通过在目录中运行来仔细检查。您将获得该目录的完整路径。）

您也不需要分号。不过，那个分号让我有点警惕：您是否将该配置添加到您的`php.ini`文件中？这不是你要添加到任何一段 PHP 代码中的东西。

如果您无权访问`php.ini`并且仍需要更改保存路径，请参阅手册中的[session_save_path](http://php.net/manual/en/function.session-save-path.php)。

# objective-c - Mac 应用程序 - 将文件拖放到菜单栏应用程序中

> ID：11383143
> 
> 赞同：5
> 
> 时间：2012-07-08T12:27:08.653
> 
> 标签：objective-c, xcode, cocoa, drag-and-drop, nsstatusitem

我对这个项目的灵感来自 Droplr 和 CloudApp mac 菜单栏应用程序。我一直在尝试实现[这里](https://stackoverflow.com/questions/9748459/machow-to-reproduce-drag-and-drop-from-cloudapp-in-the-system-bar-menu)解释的代码。

但是，当我实现代码时，菜单栏图像消失了。这是我创建状态项的代码：

```
- (id)init {
self = [super init];
if (self != nil) {
  // Install status item into the menu bar
  NSStatusItem *statusItem = [[NSStatusBar systemStatusBar] statusItemWithLength:STATUS_ITEM_VIEW_WIDTH];
  _statusItemView = [[StatusItemView alloc] initWithStatusItem:statusItem];
  _statusItemView.image = [NSImage imageNamed:@"Status"];
  _statusItemView.alternateImage = [NSImage imageNamed:@"StatusHighlighted"];
  _statusItemView.action = @selector(togglePanel:);
  StatusItemView* dragView = [[StatusItemView alloc] initWithFrame:NSMakeRect(0, 0, 24, 24)];
  [statusItem setView:dragView];
  [dragView release];
}
return self;
} 
```

这是我的视图文件：

```
#import "StatusItemView.h"
@implementation StatusItemView
@synthesize statusItem = _statusItem;
@synthesize image = _image;
@synthesize alternateImage = _alternateImage;
@synthesize isHighlighted = _isHighlighted;
@synthesize action = _action;
@synthesize target = _target;
#pragma mark -
- (id)initWithStatusItem:(NSStatusItem *)statusItem {
  CGFloat itemWidth = [statusItem length];
  CGFloat itemHeight = [[NSStatusBar systemStatusBar] thickness];
  NSRect itemRect = NSMakeRect(0.0, 0.0, itemWidth, itemHeight);
  self = [super initWithFrame:itemRect];
  if (self != nil) {
    _statusItem = statusItem;
    _statusItem.view = self;
  }
return self;
}

#pragma mark -
- (id)initWithFrame:(NSRect)frame {
  self = [super initWithFrame:frame];
  if (self) {
    //register for drags
    [self registerForDraggedTypes:[NSArray arrayWithObjects: NSFilenamesPboardType, nil]];
  }
  return self;
}
//we want to copy the files
- (NSDragOperation)draggingEntered:(id<NSDraggingInfo>)sender {
  return NSDragOperationCopy;
}

perform the drag and log the files that are dropped
- (BOOL)performDragOperation:(id <NSDraggingInfo>)sender {
  NSPasteboard *pboard;
  NSDragOperation sourceDragMask;
  sourceDragMask = [sender draggingSourceOperationMask];
  pboard = [sender draggingPasteboard];
  if( [[pboard types] containsObject:NSFilenamesPboardType] ) {
    NSArray *files = [pboard propertyListForType:NSFilenamesPboardType];
    NSLog(@"Files: %@",files);
  }
  return YES;
}

#pragma mark -

- (void)drawRect:(NSRect)dirtyRect {
  [self.statusItem drawStatusBarBackgroundInRect:dirtyRect withHighlight:self.isHighlighted];
  NSImage *icon = self.isHighlighted ? self.alternateImage : self.image;
  NSSize iconSize = [icon size];
  NSRect bounds = self.bounds;
  CGFloat iconX = roundf((NSWidth(bounds) - iconSize.width) / 2);
  CGFloat iconY = roundf((NSHeight(bounds) - iconSize.height) / 2);
  NSPoint iconPoint = NSMakePoint(iconX, iconY);
  [icon compositeToPoint:iconPoint operation:NSCompositeSourceOver];
}

#pragma mark -
#pragma mark Mouse tracking

- (void)mouseDown:(NSEvent *)theEvent {
  [NSApp sendAction:self.action to:self.target from:self];
}

#pragma mark -
#pragma mark Accessors
- (void)setHighlighted:(BOOL)newFlag {
  if (_isHighlighted == newFlag) return;
  _isHighlighted = newFlag;
  [self setNeedsDisplay:YES];
}

#pragma mark -
- (void)setImage:(NSImage *)newImage {
  if (_image != newImage) {
    _image = newImage;
    [self setNeedsDisplay:YES];
  }
}

- (void)setAlternateImage:(NSImage *)newImage {
  if (_alternateImage != newImage) {
    _alternateImage = newImage;
    if (self.isHighlighted) {
      [self setNeedsDisplay:YES];
    }
  }
}

#pragma mark -
- (NSRect)globalRect {
  NSRect frame = [self frame];
  frame.origin = [self.window convertBaseToScreen:frame.origin];
  return frame;
}

@end 
```

感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T15:35:12.013

我知道这是一个老问题，但也许这可能会有所帮助：

尝试将 设置`NSStatusItem *statusItem`为`@propery`类的。如果您有 ARC，则菜单栏可能会在 init 函数完成后立即被破坏。

# sql-server-2008-r2 - SQL Server 2008 Service Broker教程——收不到消息（transmission_status异常）

> ID：11383145
> 
> 赞同：26
> 
> 时间：2012-07-08T12:27:25.750
> 
> 标签：sql-server-2008-r2, service-broker

我正在学习如何使用 SQL Server 2008 R2 的 Service Broker。按照教程[在单个数据库中完成对话时](http://msdn.microsoft.com/en-us/library/bb839495%28v=sql.105%29)。按照[第 1 课](http://msdn.microsoft.com/en-us/library/bb839488%28v=sql.105%29)，我成功地创建了消息类型、合同、队列和服务。在[第 2 课](http://msdn.microsoft.com/en-us/library/bb839499%28v=sql.105%29)之后，我可能已经发送了消息。但是，当尝试接收消息时，我得到的是 NULL`ReceivedRequestMsg`而不是发送的内容。

在查看 时`sys.transmission_queue`，`transmission_status`消息中显示：

> 在目标队列中排队消息时发生异常。错误：15517，状态：1。无法作为数据库主体执行，因为主体“dbo”不存在，无法模拟此类主体，或者您没有权限。

我已经使用 Windows 登录安装了 SQL Server，例如`Mycomp\Petr`. 我也在使用该登录名来上课。

你能猜出是什么问题吗？我应该检查和/或设置什么以使其正常工作？

**2012/07/16 编辑：**为了帮助重现问题，这就是我所做的。如果您按照以下步骤操作，您能否重现该错误？

首先，我使用的是 Windows 7 Enterprise SP1 和 Microsoft SQL Server 2008 R2，开发人员版，64 位（版本 10.50.2500.0，根目录位于 C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQL_PRIKRYL05\MSSQL） .

1.  按照教程的建议，我下载了 AdventureWorks2008R2_Data.mdf 示例数据库，并将其复制到 C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQL_PRIKRYL05\MSSQL\DATA\AdventureWorks2008R2_Data.mdf

2.  SQL Server Management Studio 必须以“以管理员身份”启动才能稍后附加数据。然后我连接了 SQL Server。

3.  右键单击数据库，上下文菜单附加...，按钮添加...，指向 AdventureWorks2008R2_Data.mdf + OK。然后从下面的网格中选择 AdventureWorks2008R2_Log.ldf（报告为 Not found）并按下 Remove... 按钮。按 OK 后，附加数据库并自动创建 AdventureWorks2008R2_log.LDF。

4.  以下查询用于查看“Service Broker 启用/禁用”和启用（已为数据库成功启用 Service Broker）：

* * *

```
USE master;
GO

SELECT name, is_broker_enabled FROM sys.databases;
GO

ALTER DATABASE AdventureWorks2008R2
      SET ENABLE_BROKER
      WITH ROLLBACK IMMEDIATE;
GO

SELECT name, is_broker_enabled FROM sys.databases;
GO 
```

*   然后，按照教程，执行以下查询以创建消息类型、合同、队列和服务：

* * *

```
USE AdventureWorks2008R2;
GO

CREATE MESSAGE TYPE
       [//AWDB/1DBSample/RequestMessage]
       VALIDATION = WELL_FORMED_XML;
CREATE MESSAGE TYPE
       [//AWDB/1DBSample/ReplyMessage]
       VALIDATION = WELL_FORMED_XML;
GO

CREATE CONTRACT [//AWDB/1DBSample/SampleContract]
      ([//AWDB/1DBSample/RequestMessage]
       SENT BY INITIATOR,
       [//AWDB/1DBSample/ReplyMessage]
       SENT BY TARGET
      );
GO

CREATE QUEUE TargetQueue1DB;

CREATE SERVICE
       [//AWDB/1DBSample/TargetService]
       ON QUEUE TargetQueue1DB
       ([//AWDB/1DBSample/SampleContract]);
GO

CREATE QUEUE InitiatorQueue1DB;

CREATE SERVICE
       [//AWDB/1DBSample/InitiatorService]
       ON QUEUE InitiatorQueue1DB;
GO 
```

到现在为止还挺好。

*   然后使用以下查询来查看队列（现在使用时为空）：

* * *

```
USE AdventureWorks2008R2;
GO

SELECT * FROM InitiatorQueue1DB WITH (NOLOCK);
SELECT * FROM TargetQueue1DB WITH (NOLOCK);
SELECT * FROM sys.transmission_queue;
GO 
```

*   发送消息时会出现问题：

* * *

```
BEGIN TRANSACTION;

BEGIN DIALOG @InitDlgHandle
     FROM SERVICE
      [//AWDB/1DBSample/InitiatorService]
     TO SERVICE
      N'//AWDB/1DBSample/TargetService'
     ON CONTRACT
      [//AWDB/1DBSample/SampleContract]
     WITH
         ENCRYPTION = OFF;

SELECT @RequestMsg =
       N'<RequestMsg>Message for Target service.</RequestMsg>';

SEND ON CONVERSATION @InitDlgHandle
     MESSAGE TYPE 
     [//AWDB/1DBSample/RequestMessage]
     (@RequestMsg);

SELECT @RequestMsg AS SentRequestMsg;

COMMIT TRANSACTION;
GO 
```

在查看队列时，`Initiator...`和`Target...`队列是空的，并且可以在发送的消息中找到`sys.transmission_queue`上面提到的通过`transmission_status`.

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-19T13:12:49.903

```
alter authorization on database::[<your_SSB_DB>] to [sa]; 
```

EXECUTE AS 基础设施需要`dbo`映射到一个有效的登录。Service Broker 使用 EXECUTE AS 基础架构来传递消息。遇到此问题的典型场景是在家工作时使用公司笔记本电脑。您使用缓存凭据登录笔记本电脑，并使用相同的 Windows 缓存凭据登录 SQL。您发出 a`CREATE DATABASE`并将其`dbo`映射到您的公司域帐户。但是，EXECUTE AS 基础设施*不能*使用 Windows 缓存帐户，它需要直接连接到 Active Directory。令人抓狂的部分是第二天在办公室一切正常（您的笔记本电脑再次在公司网络中并且可以访问 AD ......）。你晚上回家，继续第 3 课……突然间，它不再起作用了。让整个事情显得脆弱和不可靠。只是需要AD连接的事实......

导致相同问题的另一种情况是由于数据库`CREATE DATABASE`在恢复或附加时重新保留其创建者的 SID（发出 的 Windows 登录名）。如果您`PC1\Fred`在创建数据库时使用了本地帐户，然后将数据库复制/附加到 PC2，则该帐户在 PC2 上无效（当然，它的范围是 PC1）。同样，影响不大，但 EXECUTE AS 是，这会导致 Service Broker 给出您看到的错误。

最后一个示例是当数据库由后来离开公司的用户创建并且 AD 帐户被删除时。似乎是对他的报复，但他是无辜的。生产数据库停止工作，仅仅是因为映射的也是*他的*SID 。`dbo`乐趣...

通过简单地更改`dbo`登录`sa`，您可以修复整个 EXECUTE AS 事情，并且所有依赖它的移动部件（SSB 可能是最大的依赖项）开始工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T19:24:52.503

您需要将目标队列上的接收授予您的登录。它应该工作！

```
USE [YourDatabase]
GRANT RECEIVE ON [dbo].[YourTargetQueue]
TO [Mycomp\Petr];
GO 
```

而且您还需要为您的用户授予发送权限，目标服务的权限应该足够了，但是让我们在未来启用这两个服务。

```
USE AdventureWorks2008R2 ;
GO

GRANT SEND ON SERVICE::[//AWDB/1DBSample/InitiatorService]
TO [Mycomp\Petr] ;
GO

GRANT SEND ON SERVICE::[//AWDB/1DBSample/TargetService]
TO [Mycomp\Petr] ;
GO 
```

# wpf - 使用 MVVM 在 WPF 中打印 TreeView

> ID：11383147
> 
> 赞同：2
> 
> 时间：2012-07-08T12:27:51.443
> 
> 标签：wpf, mvvm, printing, treeview

我有一个 treeView 从文本文件返回我的文本搜索结果。

```
<TreeView ItemsSource="{Binding FirstGeneration}"
             ...>
  <TreeView.ItemContainerStyle.../>
  <TreeView.ItemTemplate>
    <HierarchicalDataTemplate ItemsSource="{Binding Children}">
      <StackPanel Orientation="Horizontal" FlowDirection="LeftToRight">
        <TextBlock Text="{Binding PreExp}" />
        <TextBlock Text="{Binding Exp}"
          FontStyle="{Binding FontStyle}"
          Foreground="{Binding Color}"  />
        <TextBlock Text="{Binding PostExp}" />
      </StackPanel>
    </HierarchicalDataTemplate>
  </TreeView.ItemTemplate>
</TreeView> 
```

为了将结果作为树获得（因为我们从 C++ 项目中以列表的形式获得结果），我们创建了一个逻辑树并将 exp 显示为红色。我将它们分成三个文本框。

treeView 位于不同的 UserControl 中 - 我将其放入 SearchView (UC) 中。

现在我想在这棵树上打印**所有结果。**我更喜欢在打印文档时强调搜索结果为红色。

看起来像[这样](http://i.stack.imgur.com/XNUCP.png)。

我尝试了**PrintDialog.PrintVisual**。问题是我无法到达树或搜索表达式，因为 ViewModel 不知道视图等。

虽然我在下面这段代码后面的代码中尝试了它，但它只打印他看到的内容，而不是整个树的结果。

```
PrintDialog dialog = new PrintDialog();
if (dialog.ShowDialog() != true)
  return;
dialog.PrintVisual(SearchResultTree, "The Search Result Tree"); 
```

我也尝试了**FlowDocument**的选项：

```
FlowDocument doc = new FlowDocument();
foreach (SearchObjectViewModel item in tv.Items)
  doc.Blocks.Add(new Paragraph(new Run(item.PreExp+item.Exp+item.PostExp)));
pd.PrintDocument(((IDocumentPaginatorSource)doc).DocumentPaginator,exp); 
```

10x 4 帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:16:14.577

> 问题是我无法到达树或搜索表达式，因为 ViewModel 不知道视图等。

使用 MVVM 时，View 和 ViewModel 之间的交互应该通过[INotifyPropertyChanged Interface](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)发生。您可以将一个属性映射/绑定到一个 UI 元素；它会在 Set 上得到回调。

这是我关于[mvvm-binding-treeview-item-changed 的](http://jacobaloysious.wordpress.com/2012/02/19/mvvm-binding-treeview-item-changed-to-icommand/)​​示例之一。希望有点用处。

# javascript - JQuery val() 设置表单值时抛出运行时错误

> ID：11383149
> 
> 赞同：0
> 
> 时间：2012-07-08T12:27:57.303
> 
> 标签：javascript, jquery, asp.net-mvc-3, forms

我是 Javascript/JQuery 的新手，如果我遗漏了一些简单的东西，我深表歉意。我正在尝试制作一个按钮来根据数量和单价计算总计，并用结果填充总计字段。这是在 ASP.NET MVC3 中使用 VS2010 完成的。

我的代码似乎可以提取 SpoilageQuantity 和 SpoilageUnitPrice 的值，但无法设置 SpoilageTotalPrice 的值。该错误表明我正在尝试为函数结果赋值，但我的理解是 val() 可用于获取和设置表单字段值。更正或建议？

VS2010视图：

```
<div class="editor-label">
    @Html.LabelFor(model => model.SpoilageQuantity)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.SpoilageQuantity)
    @Html.ValidationMessageFor(model => model.SpoilageQuantity)
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.SpoilageUnitPrice)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.SpoilageUnitPrice)
    @Html.ValidationMessageFor(model => model.SpoilageUnitPrice)
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.SpoilageTotalPrice)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.SpoilageTotalPrice)
    @Html.ValidationMessageFor(model => model.SpoilageTotalPrice)
    <input type="button" value="Calculate" onclick="calculateTotal()" />
</div> 
```

JS文件：

```
function calculateTotal() {
// calculate total spoilage price from unit price and quantity
var totalprice = $('#SpoilageQuantity').val() * $('#SpoilageUnitPrice').val();
totalprice = totalprice.toFixed(2);

$('#SpoilageTotalPrice').val(totalprice);
} 
```

呈现的 HTML：

```
<div class="editor-label">
        <label for="SpoilageQuantity">Item Quantity</label>
    </div>
    <div class="editor-field">
        <input class="text-box single-line" data-val="true" data-val-number="The field Item Quantity must be a number." data-val-required="Quantity of item lost is required." id="SpoilageQuantity" name="SpoilageQuantity" type="text" value="0.00" />
        <span class="field-validation-valid" data-valmsg-for="SpoilageQuantity" data-valmsg-replace="true"></span>
    </div>

    <div class="editor-label">
        <label for="SpoilageUnitPrice">Unit Price</label>
    </div>
    <div class="editor-field">
        <input class="text-box single-line" data-val="true" data-val-number="The field Unit Price must be a number." data-val-required="Unit price is required." id="SpoilageUnitPrice" name="SpoilageUnitPrice" type="text" value="0.00" />
        <span class="field-validation-valid" data-valmsg-for="SpoilageUnitPrice" data-valmsg-replace="true"></span>
    </div>

    <div class="editor-label">
        <label for="SpoilageTotalPrice">Total Price</label>
    </div>
    <div class="editor-field">
        <input class="text-box single-line" data-val="true" data-val-number="The field Total Price must be a number." data-val-required="The Total Price field is required." id="SpoilageTotalPrice" name="SpoilageTotalPrice" type="text" value="0.00" />
        <span class="field-validation-valid" data-valmsg-for="SpoilageTotalPrice" data-valmsg-replace="true"></span>
        <input type="button" value="Calculate" onclick="calculateTotal()" />
    </div> 
```

错误信息：

```
Microsoft JScript runtime error: Cannot assign to a function result 
```

编辑：整个js文件：

```
/*  Copyright 2012 Tom Barrett

This file is part of PFC Logs.

PFC Logs is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

PFC Logs is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with PFC Logs.  If not, see <http://www.gnu.org/licenses/>.
*/

function autoFocus() {
    // Auto-focus on the first text field upon page load.
    $("input[type=text]").first().focus();
}

function calculateTotal() {
    // calculate total from quantity & unit price
    var totalprice = $('#SpoilageQuantity').val() * $('#SpoilageUnitPrice').val();
    totalprice = totalprice.toFixed(2);
    $("#SpoilageTotalPrice").val(totalprice);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T14:01:53.647

我不知道技术细节......但我也遇到过这个。如果我的函数在一个单独的 js 文件中，我在我的标签中链接到该文件 jquery（或 Jscript 就此而言）找不到元素。如果我在标签中包含脚本一切正常。

# c++ - 如何计算具有相同 SHA-160 和的另一个位模式？

> ID：11383153
> 
> 赞同：0
> 
> 时间：2012-07-08T12:28:51.533
> 
> 标签：c++, sha, false-positive, botan

我想测试我的应用程序，当它被错误传递的 SHA-160 总和欺骗时，我想计算对要求和的数据的更改，这会再次导致原始 SHA-160 总和，因此会被遗漏。我正在使用 C++ 中的 Botan 库来计算总和。

如何计算对大约 1500 位的位流的更改，使其 SHA-160 与原始位相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T12:46:57.443

简短的回答是：你不能。

长答案是：你可以，但必须有**大量**的计算能力。哈希算法的全部目的是使发现冲突变得困难。如果很容易找到冲突，那么使用哈希算法就没有什么意义了。

为了解决您的测试问题，我建议将应用程序的文件读取/哈希计算部分抽象到一个单独的类中，然后使用假[*哈希*](http://en.wikipedia.org/wiki/Mock_object)实现对其进行模拟以测试应用程序的其余部分。

# asp.net - ASP.NET Web Api 每晚构建不在服务器上运行

> ID：11383156
> 
> 赞同：2
> 
> 时间：2012-07-08T12:29:19.557
> 
> 标签：asp.net, asp.net-web-api

我在我的服务器上收到此错误消息：

> 来自程序集 'System.Web.Http.WebHost，Version=4.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35' 的类型 'System.Web.Http.WebHost.Routing.HostedHttpRoute' 中的方法 'GetVirtualPath' 没有实现。
> 
> > RouteTable.Routes.MapHttpRoute(...)

我使用 Nuget 下载 Microsoft ASP.NET Web Api 的最新夜间版本。
这似乎是一个 bin/gac 问题，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:01:50.867

GAC 中安装了 旧版本的*System.Web.Http 。*

```
gacutil /uf system.web.http 
```

那解决了它。

# php - 解析错误：语法错误，第 3 行 C:\xampp\htdocs\yo\index.php 中的意外 T_STRING

> ID：11383158
> 
> 赞同：0
> 
> 时间：2012-07-08T12:29:55.430
> 
> 标签：php, html

我是 php 新手，我正在尝试添加此代码

我发现这个错误请任何可以为我解决这个问题的人

```
<?php
$myName = ‘Guest’;
$myVar = “Welcome back $myName”;
echo $myVar;
?> 
```

这是我的html

```
<p><?php echo $myVar; ?></p> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T12:31:02.737

看起来您使用的是有趣的引号，而不是直接的 ' 和 " 类型。

```
<?php
$myName = 'Guest';
$myVar = "Welcome back $myName";
echo $myVar;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T12:33:25.247

你需要写

```
$myVar = "Welcome Back $myName"; 
```

问题是您为引号字符使用了错误的字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-01T20:40:54.787

```
<?php
    $myName = "Guest";
    $myVar = "Welcome back ".$myName;
    echo $myVar;
?> 
```

或者

```
<?php
    $myName = "Guest";
    $myVar = "Welcome back $myName";
    echo $myVar;
?> 
```

这就是代码在连接字符串时的工作方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-16T03:13:11.637

改写`$myVar = “Welcome back" . $myName;`_`$myVar = “Welcome back $myName";`

```
<?php
$myName = ‘Guest’;
$myVar = “Welcome back" . $myName;
echo $myVar;
?> 
```

# c# - 在 asp.net 网页表单页面中将服务器端功能与超链接控件绑定

> ID：11383164
> 
> 赞同：0
> 
> 时间：2012-07-08T12:30:30.650
> 
> 标签：c#, asp.net

我在 asp.net 网页表单页面上几乎没有控件，我想将代码隐藏函数链接到超链接以解析 URL

示例背后的 HTML 和代码

```
<asp:HyperLink ID="hyplnkVideo" runat="server" NavigateUrl='<%# this.getVideoPageURL()%>'>
     <div id="dAlbumCategory" class="AlbumCategoryIcon">
         <asp:Image ID="Image1" ImageUrl='~/Images/gallery/Videos.png' runat="server" />
     </div>
</asp:HyperLink>

protected String getVideoPageURL()
{
    string url;
    int PageID = Helper.GetPageIDbyName("Videos.aspx", Request["Language"]);
    url = "~/en/Videos.aspx?PageID=" + PageID + "&Language=" + Request["Language"];
    return url;
} 
```

此超链接控件不在任何网格视图或中继器控件内。我尝试了几种方法，但由于某种原因它没有调用该函数。

我将不胜感激这方面的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:14:53.710

以这种方式尝试...

```
<% getVideoPageURL(); %>
<asp:HyperLink ID="hyplnkVideo" runat="server">
 <div id="dAlbumCategory" class="AlbumCategoryIcon">
     <asp:Image ID="Image1" ImageUrl='~/Images/gallery/Videos.png' runat="server" />
 </div> 
```

```
protected void getVideoPageURL()
{
string url;
int PageID = Helper.GetPageIDbyName("Videos.aspx", Request["Language"]);
url = "~/en/Videos.aspx?PageID=" + PageID + "&Language=" + Request["Language"];
hyplnkVideo.Attributes.Add("href", url);
} 
```

这是运行代码..所以你可以试试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T13:15:36.083

试试这个：

```
NavigateUrl="<%= getVideoPageURL() %>" 
```

适当的标记应该是 <%=，而不是 <%#，因为 <%# 和 %> 标记表明您要运行数据绑定代码（例如，您从数据库返回的内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T15:44:58.313

自从提出此问题并将其标记为已解决以来已经有一段时间了。

但是，为了提供更合适的分辨率，请在页面加载或渲染时在页面代码隐藏中调用 DataBind。这将注入必要的 href 字符串。

# jquery - jQuery 遇到问题

> ID：11383165
> 
> 赞同：0
> 
> 时间：2012-07-08T12:30:49.850
> 
> 标签：jquery, html, css

我在这个网站上工作：http: [//www.millersmartialarts.no/](http://www.millersmartialarts.no/)

目前，我在导航上使用了 LavaLamp。LavaLamp 脚本来自： jquery 爱好者的 lavalamp

问题1：它没有出现。

小提琴：http: [//jsfiddle.net/ripsraps/uGC2V/](http://jsfiddle.net/ripsraps/uGC2V/)

这个网站的jQuery有很多问题。尤其是让灯箱功能这样简单的东西正常运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:42:38.567

1.  您缺少一个文件：

    [http://ripsraps.com/millers/script/images/bg-light.png](http://ripsraps.com/millers/script/images/bg-light.png)

2.  您有这些 JavaScript 错误：

> 不安全的 JavaScript 尝试 从 URL 为[https://maps.google.com/maps?f=q&source=s_q&hl=no&geocode=&q=Waldemar+Thranes+gate+的框架访问具有 URL](https://maps.google.com/maps?f=q&source=s_q&hl=no&geocode=&q=Waldemar+Thranes+gate+86a,+Oslo,+NO.&aq=t&sll=37.0625,-95.677068&sspn=41.767874,117.158203&ie=UTF8&hq=&hnear=Waldemar+Thranes+gate+86,+Gr%C3%BCnerl%C3%B8kka,+0175+Oslo,+Norge&t=m&z=14&ll=59.928304,10.753733&output=embed) [http://ripsraps.com/millers/](http://ripsraps.com/millers/)的框架 [86a,+Oslo,+NO.&aq=t&sll=37.0625,-95.677068&sspn=41.767874,117.158203&ie=UTF8&hq=&hnear=Waldemar+Thranes+gate+86,+Gr%C3%BCnerl%C3%B8kka,+0175+Oslo ,+Norge&t=m&z=14&ll=59.928304,10.753733&output=embed](https://maps.google.com/maps?f=q&source=s_q&hl=no&geocode=&q=Waldemar+Thranes+gate+86a,+Oslo,+NO.&aq=t&sll=37.0625,-95.677068&sspn=41.767874,117.158203&ie=UTF8&hq=&hnear=Waldemar+Thranes+gate+86,+Gr%C3%BCnerl%C3%B8kka,+0175+Oslo,+Norge&t=m&z=14&ll=59.928304,10.753733&output=embed)。域、协议和端口必须匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T13:00:36.863

该脚本运行正常，但您尚未设置 CSS 来设置背景熔岩图形的样式。

您需要使用将一个名为 backLava 的类添加到您的 css 文件中。

在此处搜索一些示例：

*   [http://nixbox.com/projects/jquery-lavalamp/demos/original.css](http://nixbox.com/projects/jquery-lavalamp/demos/original.css)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T15:24:11.420

您的菜单和地图加载。

[jsfiddle 示例](http://jsfiddle.net/RcFrS/13/)

我删除了几乎所有内容并将`.navlinkplacer`类浮动属性更改为左侧元素的宽度，它大于默认 jsfiddle 结果页面的宽度。

地图也会加载，但我再次在类中添加了一个`style="float:left;"`以`lokalet`在 jsfiddle 中正确显示它。

如果你的所有代码都遇到问题，

> 分而治之。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T12:39:51.567

您在主页中嵌入了一个完整的页面，

你可以在同一个文件中检查这个[Multiple <html><body> </html></body>](https://stackoverflow.com/questions/2035462/multiple-htmlbody-html-body-in-same-file)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T12:40:49.797

这是一个非常广泛的答案，因为我没有大量的 jQuery 经验，但是在使用带有框架的 jQuery 时存在一些问题，这些问题*可能*适用于您的案例并且您可能想继续阅读。我不知道它与任何事情有关，但它肯定会解释“很多问题”。

[http://iainhoult.blogspot.co.uk/2011/01/using-jquery-with-frames.html](http://iainhoult.blogspot.co.uk/2011/01/using-jquery-with-frames.html)

# php - TinyMCE 导致删除内联

> ID：11383167
> 
> 赞同：1
> 
> 时间：2012-07-08T12:30:55.403
> 
> 标签：php, css, twitter-bootstrap, tinymce

我在使用 TinyMCE 和 twitter bootstrap 时遇到问题：这是我的问题，侧边栏和内容已经脱离了内联。这是截图： http: [//puu.sh/GOhR](http://puu.sh/GOhR)

该页面的代码：

```
<?php
//create_cat.php
include 'connect.php';
include 'header.php';

$sql = "SELECT
        topic_id,
        topic_subject
    FROM
        topics
    WHERE
        topics.topic_id = " . mysql_real_escape_string($_GET['id']);

$result = mysql_query($sql);

if(!$result)
{
echo 'The topic could not be displayed, please try again later.';
}
else
{
if(mysql_num_rows($result) == 0)
{
    echo 'This topic doesn&prime;t exist.';
}
else
{
    while($row = mysql_fetch_assoc($result))
    {
        //display post data
        echo '<table border="1" class="table table-bordered table-striped" 
style="float: right; width: 990px;">
                <tr>
                    <th colspan="2">' . $row
['topic_subject'] . '</th>
                </tr>';

        //fetch the posts from the database
        $posts_sql = "SELECT
                    posts.post_topic,
                    posts.post_content,
                    posts.post_date,
                    posts.post_by,
                    users.user_id,
                    users.user_name
                FROM
                    posts
                LEFT JOIN
                    users
                ON
                    posts.post_by = users.user_id
                WHERE
                    posts.post_topic = " . 
mysql_real_escape_string($_GET['id']);

        $posts_result = mysql_query($posts_sql);

        if(!$posts_result)
        {
            echo '<tr><td>The posts could not be displayed, please try 
again later.</tr></td></table>';
        }
        else
        {

            while($posts_row = mysql_fetch_assoc($posts_result))
            {
                echo '<tr class="topic-post">
                        <td class="user-post">' .     
$posts_row['user_name'] . '<br/>' . date('d-m-Y H:i', strtotime($posts_row
['post_date'])) . '</td>
                        <td class="post-content">' . 
$posts_row['post_content'] . '</td>
                      </tr>';
            }
        }

        if(!$_SESSION['signed_in'])
        {
            echo '<tr><td colspan=2>You must be <a 
href="signin.php">signed in</a> to reply. You can also <a href="signup.php">sign up</
a> 
for an account.';
        }
        else
        {
            //show reply box
            echo '<tr width="640px;" style="width: 10px;"><td 
colspan="2"><h2>Reply:</h2><br />
                <form method="post" action="reply.php?id=' . $row
['topic_id'] . '" style="width: 100%; margin-left: 100px;">
                    <textarea name="reply-content" name="elm1" 
rows="15" cols="80" style="width: 80%; margin-left: 100px; float: right;"></
textarea><br /><br />
                    <input type="submit" value="Submit 
reply" /  >
                </form></td></tr>';
        }

        //finish the table
        echo '</table>';
    }
}
}

?> 
```

header.php 中的 TinyMCE：

```
<script type="text/javascript" src="js/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
    // General options
    mode : "textareas",
    theme : "advanced",
    plugins : 
"autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespel
l,in
linepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,direction
alit
y,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,
auto
save,visualblocks",

    // Theme options
    theme_advanced_buttons1 : 
"save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,jus
tifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
    theme_advanced_buttons2 : 
"cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,inden
t,blo
ckquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttim
e,pr
eview,|,forecolor,backcolor",
    theme_advanced_buttons3 : 
"tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,a
dvhr
,|,print,|,ltr,rtl,|,fullscreen",
    theme_advanced_buttons4 : 
"insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins
,attribs,|,visualchars,nonbreaking,template,pagebreak,restoredraft,visualblocks",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true,

    // Example content CSS (should be your site CSS)
    content_css : "css/content.css",

    // Drop lists for link/image/media/template dialogs
    template_external_list_url : "lists/template_list.js",
    external_link_list_url : "lists/link_list.js",
    external_image_list_url : "lists/image_list.js",
    media_external_list_url : "lists/media_list.js",

    // Style formats
    style_formats : [
        {title : 'Bold text', inline : 'b'},
        {title : 'Red text', inline : 'span', styles : {color : 
'#ff0000'}},
        {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
        {title : 'Example 1', inline : 'span', classes : 'example1'},
        {title : 'Example 2', inline : 'span', classes : 'example2'},
        {title : 'Table styles'},
        {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
    ],

    // Replace values for the template plugin
    template_replace_values : {
        username : "Some User",
        staffid : "991234"
    }
});
</script> 
```

有人可以告诉我如何修复它或向我提供要输入的代码或类似的东西

# objective-c - 当视图滚动出屏幕时，UITextField 内容会丢失

> ID：11383171
> 
> 赞同：0
> 
> 时间：2012-07-08T12:32:17.013
> 
> 标签：objective-c, xcode, uitableview, cocoa-touch, uitextfield

我有一个包含 UITextField 的自定义 UITableViewCell 原型。在最后一部分填充 UITextField 时，我会自动添加新单元格。如果有更多的部分不适合一个屏幕，我添加了另一个，它会被第一部分的值填充，并且第一部分的输入被清空！

截图：

![第一步](../Images/14bb64a5c7870774d25c1845901ee9c2.png)

![添加了第四行 - 它包含一个！](../Images/97efdc2ec70bfa5363013617d36c600d.png)

![第一行是空的！](../Images/194f2477e1bbc20450f057e2fb06788c.png)

相关代码：

```
@implementation TMNewTripPeopleViewController

@synthesize sectionsCount = _sectionsCount;
@synthesize firstCellShowed = _firstCellShowed;

- (int) sectionsCount
{
    if (_sectionsCount == 0) {
        _sectionsCount = 1;
    }
    return _sectionsCount;
}

- (IBAction)inputChanged:(id)sender {
    UITextField* input = (UITextField*) sender;
    NSIndexPath* indexPathName = [NSIndexPath indexPathForRow:0 inSection:input.tag - 1];
    UITableViewCell* cellName = [self.tableView cellForRowAtIndexPath:indexPathName];

    if (input == [cellName viewWithTag:input.tag]) {
        // last name input - add next section?
        if (input.tag == self.sectionsCount) {
            if (input.text.length > 0) {
                self.sectionsCount++;
                [self.tableView insertSections:[NSIndexSet indexSetWithIndex:self.sectionsCount - 1] withRowAnimation:UITableViewRowAnimationTop];
            }
        }
    }

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return self.sectionsCount;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return 2;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = @"PersonName";
    if (indexPath.row % 2 == 1) {
        CellIdentifier = @"PersonEmail";
    }
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UITextField* input = (UITextField*) [cell viewWithTag:indexPath.section + 1];
    if (indexPath.row == 0 && indexPath.section == 0 && !self.firstCellShowed) {
        [input becomeFirstResponder];
        self.firstCellShowed = YES;
    }

    [cell viewWithTag:1].tag = indexPath.section + 1;

    return cell;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:56:43.367

我没有`tableView:willDisplayCell:forRowAtIndexPath:`在您的实施中看到。您通常在此方法中设置单元格的显示值。

当您使用`dequeueReusableCellWithIdentifier`（并且您几乎总是应该）使用时，您的单元格将在表格视图滚动时被重用。如果您不更新它们的值，`willDisplayCell`那么它们将显示它们在重用之前具有的任何值（如果有的话）。

# javascript - AngularJS - 理解范围

> ID：11383172
> 
> 赞同：3
> 
> 时间：2012-07-08T12:32:18.807
> 
> 标签：javascript, model-view-controller, scope, angularjs

我很困惑，我有这个模块可以路由到不同的控制器：

```
var mainModule = angular.module('lpConnect', []).
    config(['$routeProvider', function ($routeProvider) {
    $routeProvider.
        when('/home', {template:'views/home.html', controller:HomeCtrl}).
        when('/admin', {template:'views/admin.html', controller:AdminCtrl}).
        when('/connect', {template:'views/fb_connect.html', controller:MainAppCtrl}).
        otherwise({redirectTo:'/connect'});
}]); 
```

和这样的公共服务：

```
mainModule.factory('Common', ['$rootScope', '$http', function (scope, http) {
        var methods = {
            changeLanguage:function (langID) {
                http.get('JSON/langs/' + langID + '/captions.json').success(function (data) {
                    scope.lang = data;
                });
            },
            initChat:function () {
                console.log(scope); // full object
                console.log(scope.settings); // undefined
            }
        };

        //initiate
        http.get('JSON/settings/settings.json').success(function (data) {
            scope.settings = data;
            methods.changeLanguage(scope.settings.lang);
        });

        return methods;
    }]); 
```

该应用程序加载并（通过 XHR）获取设置对象，我可以看到设置反映在我的 DOM 中。（例如字幕）

现在，当我从 HomeCtrl 调用 initChat 方法时，我在尝试访问 scope.settings 属性时得到一个未定义的值……奇怪的是，当我记录范围时，我可以看到设置对象……我错过了什么？

![在此处输入图像描述](../Images/41c9dabaf4fc4b3ffb24542dc8b99905.png)

**更新：**我发现我做错的是直接从控制器主体调用我的方法：

```
function HomeCtrl($scope, $location, Common) {
...
Common.initChat()
...
} 
```

如果我将调用更改为由单击触发，一切正常，但我确实需要在页面加载时运行此代码，正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T15:18:05.500

我认为这是一个简单的问题：在 $http 调用检索 scope.settings 之前，您正在范围内调用 initChat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:59:25.747

几件事。

1.  http 是异步的，这是您的主要问题（正如安迪敏锐地指出的那样）
2.  不推荐 ng-init 用于生产代码，在控制器中初始化更好
3.  初始化您的 scope.settings = {} 或一个不错的默认值可能会对您有所帮助，一旦 xhr 完成，您的设置将可用。

希望这可以帮助

- 担

# wpf - 不能使用属于与其父 Freezable 不同的线程的 DependencyObject

> ID：11383174
> 
> 赞同：6
> 
> 时间：2012-07-08T12:33:17.073
> 
> 标签：wpf, multithreading, backgroundworker, dispatcher

WPF - 我正在使用 BackgroundWorker 创建一个 Model3D 对象，但是当我想将它添加到 XAML 中定义的 Model3DGroup 时，我得到了异常：

> 不能使用属于与其父 Freezable 不同的线程的 DependencyObject。

这是背后的全部代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        BackgroundWorker bw = new BackgroundWorker();
        bw.DoWork += bw_DoWork;
        bw.RunWorkerCompleted += bw_RunWorkerCompleted;
        bw.RunWorkerAsync();
    }

    private void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        GeometryModel3D geometryModel3D = (GeometryModel3D)e.Result;
        model3DGroup.Children.Add(geometryModel3D);
    }

    private void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        GeometryModel3D geometryModel3D = new GeometryModel3D();
        e.Result = geometryModel3D;
    }
} 
```

这是整个 XAML：

```
 <Grid>
    <Viewport3D Margin="4,4,4,4" Grid.Row="0" Grid.Column="0">
        <ModelVisual3D>
            <ModelVisual3D.Content>
                <Model3DGroup x:Name="model3DGroup">
                </Model3DGroup>
            </ModelVisual3D.Content>
        </ModelVisual3D>
    </Viewport3D>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:24:23.693

在您的 RunWorkerCompleted 处理程序中，您将 GeometryModel3D 实例添加到 Model3DGroup，这显然是在 UI 线程以外的线程中创建的，因为 BackgroundWorker.DoWork 处理程序是在单独的线程中执行的。

简而言之，WPF 不允许这样做，您可能已经从异常消息中注意到了这一点。所有 UI 元素，或者更准确地说，应用程序中的所有[DispatcherObject](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherobject.aspx)派生对象都必须在同一个线程中创建。

[获取 WPF线程模型](http://msdn.microsoft.com/en-us/library/ms741870.aspx)的概述，另请参阅[BackgroundWorker](http://msdn.microsoft.com/en-us/library/4852et58)文档中的*备注*部分。

编辑：但是，您可以通过同步调用 MainWindow 类的[Dispatcher](http://msdn.microsoft.com/en-us/library/ms615907)来创建新的 GeometryModel3D 实例（未经测试）：

```
private void bw_DoWork(object sender, DoWorkEventArgs e)   
{   
    e.Result = Dispatcher.Invoke(
       (Func<GeometryModel3D>)(() => new GeometryModel3D()));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-03T17:49:22.797

在我的情况下，我正在一个新的调度程序线程上创建一个新的 WPF 窗口。

一切都与最小的 WPF 项目完美配合，但是如果我将相同的代码移植到我们的大型生产 WPF 代码库中，它就会失败。

问题是有一些继承的对象绑定到不正确的线程上的某些东西。

我能够在受影响的 UserControl 中使用它来避免此错误：

```
public MyUserControl()
{
    // Discard all inherited styles.
    this.InheritanceBehavior = InheritanceBehavior.SkipAllNow;

    this.InitializeComponent();
} 
```

现在我让它工作了，我可以找出哪个样式或附加属性对另一个线程有隐藏的绑定，这导致了这个问题。

## 更新

问题是一些资源没有被冻结。这里引用了有问题的资源：

```
ResourceDictionary resources = Application.Current.Resources;
foreach (var resource in resources)
{
   // The offending resource (a scrollbar) is listed here.                
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T23:32:34.057

您可以在单独的线程中创建 Model3D 几何。但在创建后将其冻结。然后 RunWorkerCompleted 方法可以简单地克隆冻结的几何体（尽管如果 Model3D 包含纹理，我无法让它工作）。

# python - 托管多个 django 站点的问题（设置交叉）

> ID：11383176
> 
> 赞同：2
> 
> 时间：2012-07-08T12:33:30.813
> 
> 标签：python, django, apache

我最近设置了一个 Web 服务器，它目前托管了几个静态页面网站和两个 django 项目。

这两个 django 项目是“abc”和“xyz”，分别位于主文件夹中的不同目录中。每个都有自己的 wsgi 脚本，指向各自的 settings.py 文件。

不过最近，我注意到“xyz”上有几个 500 个错误。通常刷新会纠正问题，但这是不可接受的，所以我检查了 apache error.log，并注意到有时当我点击“xyz”时，会出现一个异常，即在 xyz 项目中找不到 abc.settings。不知何故，这两个项目正在交叉并相互干扰。我在 abc 上的工作还不够多，还不知道问题是否与其他方式相同。下面是我的例外。

```
[Sun Jul 08 13:30:34 2012] [error] Traceback (most recent call last):
[Sun Jul 08 13:30:34 2012] [error] File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 219, in __call__
[Sun Jul 08 13:30:34 2012] [error]    self.load_middleware()
[Sun Jul 08 13:30:34 2012] [error]    File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 39, in load_middleware
[Sun Jul 08 13:30:34 2012] [error]      for middleware_path in settings.MIDDLEWARE_CLASSES:
[Sun Jul 08 13:30:34 2012] [error]    File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 184, in inner
[Sun Jul 08 13:30:34 2012] [error]      self._setup()
[Sun Jul 08 13:30:34 2012] [error]    File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 42, in _setup
[Sun Jul 08 13:30:34 2012] [error]      self._wrapped = Settings(settings_module)
[Sun Jul 08 13:30:34 2012] [error]    File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 95, in __init__
[Sun Jul 08 13:30:34 2012] [error]      raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
[Sun Jul 08 13:30:34 2012] [error]  ImportError: Could not import settings 'abc.settings' (Is it on sys.path?): No module named scalamoosh.settings 
```

任何帮助/建议将不胜感激。干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T14:09:01.327

您遇到的问题是，虽然 mod_wsgi 为每个 Django 应用程序提供了自己的 python 解释器，但它们仍然共享相同的操作系统环境，这是 Django 存储设置模块名称的地方。我发现的解决方法是在创建 WSGI 应用程序对象之前更改 Django 在其中查找设置模块的环境变量的名称。

我稍作修改的 wsgi.py 看起来像这样：

```
import os

# change the env variable where django looks for the settings module
import django.conf
django.conf.ENVIRONMENT_VARIABLE = "DJANGO_SECOND_SETTINGS_MODULE"

os.environ.setdefault("DJANGO_SECOND_SETTINGS_MODULE", "second.settings")

# This application object is used by any WSGI server configured to use this
# file. This includes Django's development server, if the WSGI_APPLICATION
# setting points here.
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T00:15:11.577

mod_wsgi 的默认配置有两个 Django 站点在同一进程的不同子解释器中运行。不幸的是，Django 在 1.4 中更改了他们生成的 wsgi.py，并且新文件因 mod_wsgi 的这种默认行为而中断。要在使用 Django 1.4 时解决此问题，请进入 wsgi.py 文件并更改：

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings") 
```

至：

```
os.environ["DJANGO_SETTINGS_MODULE"] = "mysite.settings" 
```

也就是说，不要使用 os.environ.setdefault() ，因为由于环境变量在子解释器之间泄漏的方式，当其他 Django 站点已经在另一个子解释器中设置了变量时，它不会做任何事情。

更好的是，使用 mod_wsgi 守护进程模式并为每个站点创建不同的守护进程组，并委托它们在不同的进程集中运行。这可以解决旧 Django 版本的类似问题，其中使用了不太正确的 VirtualHosts Apache 配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T10:07:29.730

您目前似乎没有为您的两个项目使用单独的虚拟环境，如果没有，我强烈建议您这样做，然后看看问题是否仍然存在。您仍然可以使用相同的 Apache 实例，但运行两个单独的 Django 实例（以及项目的所有其他要求，可能会或可能不会不同）。这通常是任何 Django 项目的推荐方法。

如果你不了解虚拟环境，这里有一个关于使用 virtualenv 和 Django 的[快速入门教程](http://tumblr.intranation.com/post/766290325/python-virtualenv-quickstart-django)，我还建议使用 Doug Hellman 的非常好的[Virtualenv Wrapper](http://www.doughellmann.com/docs/virtualenvwrapper/)。希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T13:07:37.217

您是使用`memcached`缓存，还是两个实例可以写入同一个缓存文件的任何其他缓存方法？这可以解释为什么这两种环境会混淆。在这种情况下，只需在您的设置字典中添加一个`KEY_PREFIX`变量。`CACHES`

```
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
        'LOCATION': '127.0.0.1:11211',
        'KEY_PREFIX': 'scalamoosh'
    }
} 
```

# javascript - removechild 给出 NS_ERROR_INVALID_POINTER 错误

> ID：11383177
> 
> 赞同：1
> 
> 时间：2012-07-08T12:33:37.263
> 
> 标签：javascript, dom

我正在使用这个 Javascript 命令将一个空的 div 替换为页面上另一个 div 的值。所以我在我的html中有这个：

```
<a href = "... some links that call the javascript ...">text link</a>
<div id="highlight">
</div>

<div id="1">
...some text
</div>

<div id="2">
... some text
</div> 
```

脚本是

```
settext(newdiv) {
  // set top of page highlight to appropriate text
  var desc = document.getElementById('highlight');
  if (desc.hasChildNodes()) desc.removeChild(desc.lastChild);
  document.getElementById('highlight').appendChild(
    document.getElementById(newdiv));
  } 
```

当我第一次用另一个 div 1、2、3 等替换“突出显示”div 时，该脚本可以正常工作）。因此，当我单击相应的超链接文本时，空白 div (id="highlight") 将填充下面相关 div 的内容（例如 div id="1"）。

然后当我单击一个新链接时， div id="highlight" 的内容消失并被新的 div 文本替换。但是我第二次点击在“hightlight” div 为空白之前已被删除的 div。只有当我使用以前未点击的 div 时，它才会被替换。

当我查看 Firefox Web 控制台以查看 Javascript 错误时，它显示：

> “组件返回失败代码：0X80004003 (NS_ERROR_INVALID_POINTER) [nsIDOMHTMLDivElement.removeChild]”

由于某种原因，它似乎超出了界限。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:02:59.140

我建议不要在节点级别修改 DOM，而是使用“innerHTML”来移动 div 内容。

# php - 有没有办法在没有 ffmpeg 的情况下通过 PHP 创建视频缩略图？

> ID：11383179
> 
> 赞同：2
> 
> 时间：2012-07-08T12:33:51.503
> 
> 标签：php, video, thumbnails

有没有办法在**没有**ffmpeg 的情况下通过 PHP 创建视频缩略图？

我的托管服务器不提供 ffmpeg，所以我需要另一种方式（开源和免费）。

我到处搜索，但到目前为止没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T13:18:49.857

当然，您可以在 PHP 中自己实现相关视频的解码算法。您可能不想这样做。因此，您将不得不使用已经实现这些算法的库。[ffmpeg](http://ffmpeg.org/)是其中一个库，[libav](http://libav.org/)将是另一个。您可以编写一个 PECL 来连接任一库以从您的 PHP 进程中运行某些功能（如提取帧）。

但老实说，我不明白你为什么要经历其中任何一个。所以问题归结为**»您为什么要求没有 ffmpeg 的解决方案？«**

*它在您的服务器上不可用吗？*询问您的 IT 支持人员是否可以为您提供。如果他们不能，请考虑更换提供商。

# c# - 如何在另一个项目中调用一个项目中的类？

> ID：11383181
> 
> 赞同：7
> 
> 时间：2012-07-08T12:34:02.490
> 
> 标签：c#, .net, visual-studio, console-application, project-reference

请原谅这个非常愚蠢的问题，但我是 C# 新手。我只是不知道如何在另一个项目中使用来自一个项目的类。

假设我想将一个字符串从 Project1 带到 Project2 并让 Project2 打印所述字符串。

我使用“添加引用”菜单从 Project1 中引用 Project2，然后添加“使用 Project2”，然后我将其写入尝试并从“Project2”中的“ClassA”调用“print”。

```
 Project2.ClassA Classa = new Project2.ClassA();
        Console.WriteLine(Classa.print); 
```

但我得到的只是错误消息。

那么任何人都可以逐步解释我为什么需要这样做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-06T19:31:13.633

请遵循以下说明：

1.  在解决方案资源管理器中，右键单击您需要引用的项目。

2.  选择**“添加参考”**。（后来的版本，即 2015 年以后的版本；虽然不完全确定；它应该是**"Add->Reference"**。右键单击**References**并选择**Add Reference**也可以。）

3.  **参考管理器 - 项目名称**对话框将出现。

4.  在左窗格中，展开**Projects**菜单。这将在对话框中间填充现有项目的列表。

5.  勾选您需要参考的每个项目之前的复选框。

6.  按**确定**。

完成后，您可以在您引用的项目中使用所有公共和受保护的（假设您从现有的继承）。**确保添加`using NameSpace.Class`到导入列表中。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-08T12:37:40.787

当您从 Project2 中引用该类时，它可能位于不同的命名空间中。

在要使用的类的顶部添加命名空间是（using 语句），或者将光标移到 Project2.Class 上，让 Visual Studio 为您完成 :-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-08T12:37:59.220

将 Classa 公开，并将 Project1 的程序集引用/项目引用添加到 Project2。

[如何添加程序集引用](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-29T12:54:11.713

转到项目说 P2，展开它转到引用右键单击添加引用。转到项目选项卡，然后浏览项目 P1 并单击添加。之后，您将需要该项目的 using 语句来获取文件。单击重建解决方案，它将为您提供输出。

# java - ISafeRunnable 在哪里？

> ID：11383183
> 
> 赞同：6
> 
> 时间：2012-07-08T12:34:18.383
> 
> 标签：java, eclipse, jar, include

我已经下载了一个在 Eclipse 平台上编写的代码，我想编译它，但是`jar`我包含的一个文件使用了一个名为 的类`ISafeRunnable`，该类的规范名称是： `org.eclipse.core.runtime.ISafeRunnable`. 但是无论有多少 jar 文件以`org.eclipse.core.runtime`我添加到我的构建路径开始，它们都不包含`ISafeRunnable`!!! 请帮忙！！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T12:37:33.497

如果你也导入会有帮助`org.eclipse.equinox.common`吗？检查[这个线程](http://www.eclipsezone.com/eclipse/forums/t59401.html?start=15)，例如：

> ISafeRunnable 接口位于 equinox 插件 (org.eclipse.equinox.common) 中。如果将 SWT 库添加到项目中，它应该会自动添加到构建路径中。您可以通过右键单击您的项目，选择 Build Path/Add Libraries... 然后选择 SWT Library 来完成此操作。之后，您的项目应该包含一个新文件夹，具有与 JRE 文件夹相同的图标，并包含几个 jar，包括 org.eclipse.swt... 和 org.eclipse.equinox.common。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T12:41:35.327

它在`org.eclipse.core.runtime`jar 库中。有关库中包含的接口列表，请参阅此[链接](http://www.jarfinder.com/index.php/jars/jarClasses/540)。确保您使用的是正确的[平台 (3.7)](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/ISafeRunnable.html)版本

# visual-studio-2010 - 如何使用 VisualSvn “重新开始”

> ID：11383189
> 
> 赞同：1
> 
> 时间：2012-07-08T12:35:33.407
> 
> 标签：visual-studio-2010, svn, visualsvn, visualsvn-server

我刚开始使用 VisualSVN 并把事情搞砸了。我收到有关工作副本太旧（1.6）的投诉。我有 1.7 TortoiseSVN 和 VisualSVN 2.5.5 并且尝试了很多东西但没有任何帮助。

所以，我只想重新开始，但在 Visual Studio 2010 中禁用了“将解决方案添加到 Subversion”选项。我尝试在 VisualSVN 服务器管理器中删除存储库，并卸载/重新安装 VisualSVN。但该选项仍处于禁用状态。

我该怎么做才能重新开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:56:48.540

你有这个问题真的很奇怪。您可以通过**Visual Studio |升级您的工作副本。视觉SVN | 升级工作副本**（如果您使用*VisualSVN*）或通过*TortoiseSVN*。

请注意，该问题与服务器端完全无关，仅与升级工作副本格式有关。

顺便说一句，您总是可以签出新的工作副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T12:41:06.393

在 1.6 和 1.7 之间，元数据的组织方式发生了重大变化，仅在客户端。因此 1.6 和 1.7 可以与相同的存储库通信，但不能使用相同的工作副本。

通过它的声音，您的错误消息问题将通过使用您的 1.7 工具再次拉出工作副本来解决。但是，我不确定与 VS 的互操作是否会，因此您也可以返回到 1.6 客户端安装。您肯定要确保系统上的所有客户端都是 1.6 或 1.7，而不是混合版本。

# c# - JavaScriptSerializer 的格式化输出

> ID：11383192
> 
> 赞同：0
> 
> 时间：2012-07-08T12:35:45.993
> 
> 标签：c#, .net, windows

我正在使用 JavaScriptSerializer 作为列表 - 它有效：

```
string codeString = (new JavaScriptSerializer()).Serialize(ramGraphList); 
```

虽然输出格式如下：

```
[["Time","Value"],["08/07/2012 12:43:28","5270"],["08/07/2012 12:44:32","5277"]]; 
```

问题是值“5270”和“5277”不是字符串，它们应该被视为int，因此它们必须不加引号。

有没有一种有效的方法来实现这一目标？

预期输出：

```
[["Time","Value"],["08/07/2012 12:43:28",5270],["08/07/2012 12:44:32",5277]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:12:54.267

我相信如果不对 JavaScriptSerializer 类进行包装或修改类，就不可能做到这一点。但是，您是否考虑过使用[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer%28v=vs.95%29.aspx)或[JSON.Net](http://json.codeplex.com/)？

# c# - Windows Phone 认证问题：第 5.2.3 节性能和资源管理

> ID：11383197
> 
> 赞同：-1
> 
> 时间：2012-07-08T12:36:22.237
> 
> 标签：c#, silverlight, windows-phone-7

我有一个未通过认证的 Windows Phone 应用程序（silverlight）。我不知道如何通过此认证，因为我无法重现故障报告中描述的问题。我正在`MessageBox`向用户显示一个，并且报告指出如果应用程序被挂起并保持 MessageBox 未被关闭，则该应用程序不会恢复。但是当我在设备或模拟器中测试应用程序时，这不会发生。可能是什么问题，我是否需要修改应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T13:28:31.683

问题一定是应用程序在被“墓碑”后没有恢复，而不仅仅是正常的停用。转到 Visual Studio 中的项目选项，然后在“调试”部分检查“调试时停用时的墓碑”。现在开始在设备或模拟器上进行调试，您现在应该能够看到有关恢复的问题。

# c# - 尝试获取当前位置时得到 NAN - 经度和纬度

> ID：11383199
> 
> 赞同：3
> 
> 时间：2012-07-08T12:36:34.387
> 
> 标签：c#, .net, visual-studio-2010, windows-phone-7, latitude-longitude

我编写了一个非常简单的应用程序，它只获取手机的当前位置——经度和纬度并打印出来。问题是我得到`NAN`了经度和纬度。这是我的代码：

```
private void button1_Click(object sender, RoutedEventArgs e) {
  GeoCoordinateWatcher watcher = new GeoCoordinateWatcher();
  GeoPosition<GeoCoordinate> GC = new GeoPosition<GeoCoordinate>();
  GC = watcher.Position;
  double latitude = GC.Location.Latitude;
  double longitude = GC.Location.Longitude;
  textBlock1.Text = "longitude: " + longitude;
  textBlock2.Text = "latitude: " + latitude;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T12:40:32.253

不记得细节了。但是您的 GPS 并不总是打开，因此并不总是知道您的位置。

您需要启用 GPS，并等待它获得锁定（如前所述，我不记得具体如何操作）。只有这样它才有坐标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T13:57:07.827

1）必须在手机上启用 GPS 2）您必须启动观察者：

```
watcher.PositionChanged += YourPositionChangedHandler;
watcher.Start(); 
```

当观察者应该触发事件时，您可以设置偏移量。我记得还有一个像“TryGetPosition”这样的功能，你不必启动观察者，只需获得一次位置。

# asp.net-mvc-3 - ASP.NET MVC3 / 用户注册、成员资格、角色和权限

> ID：11383201
> 
> 赞同：1
> 
> 时间：2012-07-08T12:36:41.613
> 
> 标签：asp.net-mvc-3, ef-code-first

在我的应用程序中，我需要注册用户。用户可以是以下三种中的任何一种：admin、client 和 general。他们有不同的属性（管理员可能只有名字，客户可能有公司地址等等）。默认的`MVC`会员计划是可以的，但如何扩展它以在注册期间注册更多信息？或者我应该使用自定义会员资格？

我需要使用`clientID`或记录客户和一般用户`generalID`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:21:45.970

> 默认的 MVC 成员资格方案是可以的，但如何扩展它以在注册期间注册更多信息？或者我应该使用自定义会员资格？

我认为太多人，包括你自己，都期望从默认的 ASP.NET Membership Provider 中获得太多。它从未被设计用于处理特定于应用程序的事情，例如您的客户所在的公司、您的管理员姓名等。它的主要目的是存储用于身份验证的密码。

当然，密码需要与用户名相关联，这样才能有一个 2 密钥身份验证对。有时您还需要用户的电子邮件地址，当它与用户名不同时，以便就密码与用户联系。***但是不要在会员商店中存储有关您的用户的任何其他信息。***将其存储在您的应用程序数据库中。

为了在您的应用程序和成员资格提供者之间连接数据，请使用成员资格提供者的 UserName 或 ProviderKey 作为您的一个数据库表中的列。您最终得到 2 个没有明确相关的实体。您甚至可以在与应用程序数据库不同的数据库中实现 SqlMembershipProvider。即使它们在同一个数据库中，也要避免在任何提供程序表和您的应用程序表之间使用外键。这混淆了您拥有的东西和您“外包”给会员提供商的东西。

您最终会得到 2 个物理隔离的用户表示。一个是 MembershipProvider，它包含您的用户的密码。另一个是您的应用程序，其中包含其他特定于业务的详细信息。两者仅在您的应用程序中逻辑关联。在您使用会员 API 对用户进行身份验证后，他们的 UserName 和/pr ProviderKey 对您的应用程序可用。然后，您可以使用该数据来查询您的应用程序数据库并获取其他详细信息。这是您可以放置​​类似`clientID`或`generalID`您提到的内容的地方。

如果您查看 System.Web.Security.Member* API，这应该会让事情变得更清楚。它确实做得很好——将您的用户与密码和其他与密码重置相关的信息（如电子邮件地址、问题和答案等）相关联。因此，只需外包密码提供程序，并依靠您的应用程序来完成重要的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T12:43:06.713

您可以自定义默认配置文件提供程序或创建自己的...按照此参考 [http://msdn.microsoft.com/en-us/library/8zs47k7y](http://msdn.microsoft.com/en-us/library/8zs47k7y)

您也可以为 web.config 中的任何内容添加新属性到配置文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T15:46:32.117

我强烈建议创建自己的会员角色。它非常简单，没有什么能比拥有自己的实现更灵活。

这是我不久前制作的一个视频，逐步向您展示如何实现这一目标：

[http://www.youtube.com/watch?v=BsxUsyMSGeA](http://www.youtube.com/watch?v=BsxUsyMSGeA)

它的要点是，您创建自己的 AuthorizeAttribute 并创建自己的角色；在此过程中保护每个控制器甚至单个 Action 方法。

这种方法的一个缺点是您可以确定用户在您的系统中具有什么角色，但不能确定角色在您的系统中可以做什么。那有意义吗？

如果您需要编辑角色在运行时可以执行的操作，还有其他选择。

# javascript - 过滤具有多个参数的主干集合

> ID：11383202
> 
> 赞同：1
> 
> 时间：2012-07-08T12:36:42.560
> 
> 标签：javascript, backbone.js, backbone.js-collections

我编写了一小段代码来熟悉backbone.js。我正在从 Twitter API 过滤 100 个结果。一旦进入，我使用时间选择器和哈希标签选择器来过滤我的结果。我希望过滤器以下列方式工作：

1.  选择一个时间范围，在选择器标签中获取一个过滤的集合和一组过滤的哈希标签。选择一个哈希标签，在该时间范围内过滤相同的结果。

2.  选择一个哈希标签，得到一个过滤的集合。选择一个日期并过滤使用最初选择的主题标签获得的相同结果。

3.  不要丢失原始收藏。

这是我的代码：

```
 "use strict";
    // Define the model
    var Tweet = Backbone.Model.extend({});

    // Define the collection
    var Tweets = Backbone.Collection.extend({
        initialize : function(options) {
            if (options !== undefined) {
                if (options.location !== undefined) {
                    this.location = options.location;
                    // console.log(location);
                }
            }
        },

        model : Tweet,
        parse : function(response) {
            var data = response.results;
            $(data).each(
                    function() {
                        var timezoneOffset = new Date().getTimezoneOffset() / -60;
                        // var offset = Date.getTimezoneOffset(today.getTimezone(),
                        // today.hasDaylightSavingTime());
                        // console.log(timezoneOffset);
                        var dateTime = Date.parse(this.created_at).addHours(
                                timezoneOffset).toString(
                                "dddd, MMMM dd, yyyy, h:mm:ss tt");
                        this.created_at = dateTime;
                        this.text = twttr.txt.autoLink(this.text);
                        this.from_user = twttr.txt.autoLink("@" + this.from_user);
                        // console.log("user: ", this.from_user);
                    });
            // console.log('\nformatted data: ', data);
            return data;
        },

        // Overwrite the sync method to pass over the Same Origin Policy
        sync : function(method, model, options) {
            // console.log(options);
            var self = this;

            var params = {
                url : 'http://search.twitter.com/search.json?q=' + self.location
                        + '&rpp=100&lang=all&include_entities=true',
                type : 'GET',
                dataType : 'jsonp',
                processData : false
            };

            options = _.extend(options, params);

            return $.ajax(options);
        },

        showhide : function(toDate, fromDate) {
            // console.log(toDate,"\n", fromDate,"\n", this.models);
            var results;

            //if(toDate !== undefined && fromDate !== undefined){
                results = this.filter(function(tweet) {

                    var tweetDate = Date.parse(tweet.attributes.created_at);
                    if (tweetDate.between(fromDate, toDate)) {
                        //console.log("valid ", tweet);
                        return true;
                    }
                });
            //}
            return results;
            console.log("Date Filtered Results: ", results);
        },

        selectShowHide : function(selectedHashTag){
            var results;
            if(selectedHashTag !== 'all'){
                results = this.filter(function(tweet){
                    var hashtag = tweet.attributes.entities.hashtags;
                    //console.log("hashtag array: ", hashtag);
                    var matchingHashTag = "";
                    $(hashtag).each(function(){
                        if(this.text == selectedHashTag){
                            return matchingHashTag = true;
                        }
                    });
                    return matchingHashTag;
                });
            }
            else{
                results = this.filter(function(tweet){
                    return true;
                });
            }
            return results;
            console.log("Date Filtered Results: ", results);
        }
    });

    // Define the Master View
    var MasterView = Backbone.View.extend({
        initialize : function() {
            // console.log("Master View Initialized");
        },
        events : {
            "click #buttonSubmit" : "doSearch",
        },
        doSearch : function() {
            // console.log(this);
            var $self = this.$el;
            // THIS IS VERY IMPORTANT!!! DEFINE A TOP VIEW LEVEL COLLECTION FOR YOUR
            // VIEWS TO WORK ON
            // IF YOU WISH TO DO FRONT END FILTERING ON YOUR RESULTS!!!
            var TweetResults = new Tweets({
                location : $self.find('#textLocation').val()
            });

            TweetResults.fetch({
                success : function(collection, resp) {
                    var dateView = new DateView({
                        el : $('#date'),
                        collection : collection
                    });

                    var selectView = new SelectView({
                        el: $('#hashTag'),
                        collection: collection
                    });

                    var resultsView = new ResultsView({
                        el : $('#display'),
                        collection : collection
                    });

                    var resetView = new ResetView({
                        el: $("#reset"),
                        collection : collection
                    });
                }
            });

        }
    });

    // Define the reset View
    var ResetView = Backbone.View.extend({
        initialize: function(options){
            this.collection = options.collection;
            this.render();
        },
        render: function(){
            this.$el.html("");
            var self = this;
            $.ajax({
                url : '../templates/ResetTemplate.html',
                cache : false,
                success : function(data) {
                    templateLoader(data, self);
                }
            });
        },
        events:{
            "click #buttonReset": "collectionReset"
        },
        collectionReset: function(){
            var dateView = new DateView({
                el : $('#date'),
                collection : this.collection
            });

            var resultsView = new ResultsView({
                el : $('#display'),
                collection : this.collection
            });

            var selectView = new SelectView({
                el: $('#hashTag'),
                collection: this.collection
            });
        }
    });

    // Define the date View
    var DateView = Backbone.View
            .extend({
                initialize : function(options) {
                    // console.log('Date View Initialized');
                    this.collection = options.collection;
                    this.render();
                },
                render : function() {
                    this.$el.html("");
                    var self = this;
                    $.ajax({
                        url : '../templates/DateTemplate.html',
                        cache : false,
                        success : function(data) {
                            templateLoader(data, self);
                            datePicker(self, "#textFrom");
                            datePicker(self, "#textTo");
                        }
                    });
                },
                events : {
                    "click #buttonFilter" : "showHide"
                },
                // filter the results
                showHide : function() {
                    var fromDate = "";
                    var toDate = "";

                    if ($('#textFrom').val() === "") {
                        alert("Please Enter a 'From' Date");
                    } else {
                        fromDate = Date.parse($('#textFrom').val());
                    }

                    if ($('#textTo').val() === "") {
                        alert("Please Enter a 'To' Date");
                    } else {
                        toDate = Date.parse($('#textTo').val());
                    }
                    if (toDate && fromDate && fromDate.isBefore(toDate)) {

                        var filteredCollection = new Tweets(this.collection
                                .showhide(toDate, fromDate));

                        //console.log("filtered results: ", filteredCollection);

                        var filteredResultsView = new ResultsView({
                            el : $('#display'),
                            collection : filteredCollection
                        });

                        /*var filteredSelectView = new SelectView({
                            el : $('#hashTag'),
                            collection : filteredCollection
                        });*/
                    } else {
                        alert("Please check if your 'From' date comes before your 'To' date!");
                    }
                }
            });

    //Define the select View
    var SelectView = Backbone.View.extend({
        initialize : function(options) {
            // create a collection
            this.collection = options.collection;
            //console.log('select collection: ', this.collection);
            this.render();
        },
        render : function() {
            this.$el.html("");
            var self = this;
            $.ajax({
                url : '../templates/HashTagSelectionTemplate.html',
                cache : true,
                success : function(data) {
                    templateLoader(data, self);
                }
            });
        },
        events:{
            "change #selectHashTag" : "selectShowHide" 
        },
        selectShowHide: function()
        {
            var selected = $("#selectHashTag").find("option:selected").val();
            console.log("selected option: ", selected);

            var filteredCollection = new Tweets(this.collection
                    .selectShowHide(selected));

            var filteredResultsView = new ResultsView({
                el : $('#display'),
                collection : filteredCollection
            });

            /*var filteredDateView = new DateView({
                el : $('#date'),
                collection : filteredCollection
            });*/
        }
    });

    // Define the results View
    var ResultsView = Backbone.View.extend({
        initialize : function(options) {
            // console.log(options);
            // create a collection
            this.collection = options.collection;

            this.render();
        },
        render : function() {
            this.$el.html("");
            var self = this;
            $.ajax({
                url : '../templates/TweetsTemplate.html',
                cache : false,
                success : function(data) {
                    templateLoader(data, self);
                }
            });
        }
    });

    // function to handle template loading
    function templateLoader(data, self) {
        var source = data;
        var template = Handlebars.compile(source);
        var html = template(self.collection);
        self.$el.html(html);
    }

    // function to attach the datepicker to the supplied element
    function datePicker(self, elementId) {
        self.$el.find(elementId).datetimepicker({
            dateFormat : "DD, dd MM yy",
            ampm : true
        });
    }

    var app = new MasterView({
        el : $('#fieldsetForm')
    }); 
```

我在正确的轨道上吗？我应该使用其他方式吗？我有内存泄漏的危险吗？

# ios - UIScrollView 中的 UILabel 中的像素化文本，均具有透明背景

> ID：11383205
> 
> 赞同：0
> 
> 时间：2012-07-08T12:37:30.640
> 
> 标签：ios, ios5, uiscrollview, uilabel

我有一个奇怪的问题：

我有一个 UIScrollView，其背景是透明的。在其中有一些 UILabel 也具有透明背景和自定义字体。

当滚动视图第一次显示时，一切看起来都很清晰，但是一旦我开始平移滚动视图，标签的文本就会变得非常像素化。

如果我为标签设置不透明背景，则不会发生这种情况。

你知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T12:50:20.000

`UILabel`这听起来像是您可能在滚动的其他层之上添加了几层相同的层。在将其添加到您的内容的代码上放置一个调试断点，并确保它只被调用一次。

“像素化”可能是由抗锯齿像素的重叠引起的。

# ruby-on-rails - 具有嵌套模型和表单的未知属性 _id

> ID：11383208
> 
> 赞同：0
> 
> 时间：2012-07-08T12:37:34.587
> 
> 标签：ruby-on-rails

**我想要**的：一个我可以上传文件并将其分配给对象（例如人）的站点。对于上传，我使用的是[carrierwave](https://github.com/jnicklas/carrierwave)。我想要两个独立的模型：“人”和“附件”。每个人只有一个执着。在我看来，我想将上传设置为嵌套表单，使用“field_for”。

**我的代码**：

```
#app/models/person.rb
has_one :attachment
accepts_nested_attributes_for :attachment
attr_accessible :name, :attachment_attributes

#app/models/attachment.rb
attr_accessible :description, :file
belongs_to :person
mount_uploader :file, AttachmentUploader

#app/controllers/person_controller.rb
def new
  @person = Person.new
  @person.build_attachment
end

#app/views/person/new.html.haml
= form_for @person, :html => {:multipart => true} do |f|
  = f.fields_for :attachment do |attachment_form|
    attachment_form.file_field :file
  = f.submit 
```

**我的问题**：当我尝试打开 new.html 时出现此错误： **未知属性：person_id**

我不知道为什么会发生此错误。有人出主意吗？

（我正在使用带有 ruby​​ 1.8.7 的 rails 3.2.6）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:53:18.023

在两个模型之间创建关联时，总是有两个步骤。

1.) 创建所需的 cholumns / 表。

当您有 1..n 或 1..1 关系时，其中一个表中需要有一个关联列。此列不是自动创建的。您需要创建它们。首先创建一个迁移：

```
rails g migration addColumnToTable 
```

这将创建一个`db/migrate/`您需要编辑的迁移文件。在`up`方法`add_colun`中添加添加列的命令

```
add_column :tablename, :column_name, :column_type 
```

您将在此处找到整个文档：http: [//api.rubyonrails.org/classes/ActiveRecord/Migration.html](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)

然后你需要通过执行来运行迁移`rake db:migrate`

2.）将关联添加到模型（这是您已经完成的！）

那应该为你做，...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:57:45.557

只需将 person_id 列添加到您的附件表中。那就是rails正在寻找的外键。

# python - ndb.gql 与 ndb.query - Google App Engine

> ID：11383216
> 
> 赞同：3
> 
> 时间：2012-07-08T12:38:39.400
> 
> 标签：python, sql, google-app-engine, gql

[https://developers.google.com/appengine/docs/python/ndb/](https://developers.google.com/appengine/docs/python/ndb/)

[https://developers.google.com/appengine/docs/python/ndb/queries](https://developers.google.com/appengine/docs/python/ndb/queries)

ndb.gql 和 ndb.query 之间有区别吗？（除了语法）

例如

```
cursor = ndb.gql("select * from Account") 
```

对比

```
cursor = Account.query() 
```

因为我喜欢 ndb.query 因为我认为它更具可读性

例子： `acc=Account.query(Account.username==form.username.data,Account.password==form.password.data)`

如果这两种方法在后台不同/相等，我找不到任何信息。

=> 也许有一个性能权衡？

> 如果您习惯使用 SQL，请在使用 GQL 时注意错误假设。GQL 被翻译成 NDB 的原生查询 API。这不同于典型的对象关系映射器（如 SQLAlchemy 或 Django 的数据库支持），其中 API 调用在传输到数据库服务器之前被转换为 SQL。GQL 不支持 Datastore 修改（插入、删除或更新）；它只支持查询。

我猜 ndb.query 应该“更快”，因为它不需要翻译对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T06:43:31.577

这些只是做同一件事的两种不同方法。在特定情况下选择对您更容易的那个。没错， gql() 理论上较慢，因为它在解析后构建了一个 Query 对象，但我认为您不会注意到速度上的任何差异（假设您实际运行查询:-)。

请注意，两者都返回相同类型的对象：

```
>>> q1 = Employee.query()
>>> q1
Query(kind='Employee')
>>> q2 = gql('SELECT * FROM Employee')
>>> q2
Query(kind='Employee', default_options=QueryOptions(offset=0))
>>> 
```

（仅当您在 GQL 中使用 OFFSET 或 LIMIT 语法时，default_options 字段才相关。）

所以你可以用结果做什么是完全一样的。您甚至可以使用 .filter() 和 .order() 方法将其他过滤器和订单应用于 q2。

# java - https URL 在 curl 上运行良好，但在 Java 上却不行

> ID：11383217
> 
> 赞同：2
> 
> 时间：2012-07-08T12:38:39.640
> 
> 标签：java, curl

我正在尝试使用 java 将数据发布到服务器到此 url：

```
https:www.stackoverflow.com 
```

它没有更新数据。

但是，当我尝试使用 curl 进行相同操作时，它会使用此 url 更新数据：

```
E:\curl ssl>curl -k -X POST -u"user:pass" "www.stackoverflow.com" 
```

**编辑：**

```
public void authenticatePostUrl() {

        HostnameVerifier hv = new HostnameVerifier() {

            @Override
            public boolean verify(String urlHostName, SSLSession session) {
                System.out.println("Warning: URL Host: " + urlHostName
                        + " vs. " + session.getPeerHost());
                return true;
            }
        };
        // Now you are telling the JRE to trust any https server.
        // If you know the URL that you are connecting to then this should
        // not be a problem
        try {
            trustAllHttpsCertificates();
        } catch (Exception e) {
            System.out.println("Trustall" + e.getStackTrace());
        }
        HttpsURLConnection.setDefaultHostnameVerifier(hv);
        StringWriter sw = new StringWriter();
        PrintWriter pw = new PrintWriter(sw);
        try {
            URL url = new URL("www.stackoverflow.com");

            String credentials = "user" + ":" + "password";
            String encoding = Base64Converter.encode(credentials.getBytes("UTF-8"));
            HttpsURLConnection  uc = (HttpsURLConnection) url.openConnection();
            uc.setDoInput(true); 
            uc.setDoOutput(true);
            uc.setRequestProperty("Authorization", String.format("Basic %s", encoding));
            uc.setRequestMethod("POST");
            uc.setRequestProperty("Content-Type", "application/x-www-form-urlencoded; charset=utf-8");
            uc.setRequestProperty("Accept", "application/x-www-form-urlencoded; charset=utf-8");
            uc.getInputStream();
            System.out.println(uc.getContentType());
            InputStream content = (InputStream) uc.getInputStream();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    content));
            String line;
            while ((line = in.readLine()) != null) {
                pw.println(line);
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
            pw.println("Invalid URL");
        } catch (IOException e) {
            e.printStackTrace();
            pw.println("Error reading URL");
        } catch (Exception e) {
            e.printStackTrace();
        }
        System.out.println(sw.toString());
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        CurlAuthentication au = new CurlAuthentication();
        au.authenticatePostUrl();
        au.authenticateUrl();
    }

    // Just add these two functions in your program

    public static class TempTrustedManager implements
            javax.net.ssl.TrustManager, javax.net.ssl.X509TrustManager {
        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
            return null;
        }

        public boolean isServerTrusted(
                java.security.cert.X509Certificate[] certs) {
            return true;
        }

        public boolean isClientTrusted(
                java.security.cert.X509Certificate[] certs) {
            return true;
        }

        public void checkServerTrusted(
                java.security.cert.X509Certificate[] certs, String authType)
                throws java.security.cert.CertificateException {
            return;
        }

        public void checkClientTrusted(
                java.security.cert.X509Certificate[] certs, String authType)
                throws java.security.cert.CertificateException {
            return;
        }
    }

    private static void trustAllHttpsCertificates() throws Exception {

        // Create a trust manager that does not validate certificate chains:

        javax.net.ssl.TrustManager[] trustAllCerts =

        new javax.net.ssl.TrustManager[1];

        javax.net.ssl.TrustManager tm = new TempTrustedManager();

        trustAllCerts[0] = tm;

        javax.net.ssl.SSLContext sc =

        javax.net.ssl.SSLContext.getInstance("SSL");

        sc.init(null, trustAllCerts, null);

        javax.net.ssl.HttpsURLConnection.setDefaultSSLSocketFactory(

        sc.getSocketFactory());

    } 
```

为什么它在 Java 中不起作用？

（出于安全原因，我更改了上面的 URL。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T13:15:52.763

所以你正在尝试发布到`do_not_disturb=no`服务器？[这就是为什么我在对上一个问题](https://stackoverflow.com/questions/11374777/unable-to-post-the-data-to-server-getting-error-java-io-ioexception-server-re)的评论中问你......

通过附加`?do_not_disturb=No`到 URL，这些参数会自动作为 GET 请求发送到服务器，要将它们作为 POST 发送，您必须将它们放在请求正文中，如下所示：

```
String postData = "do_not_disturb=No";

OutputStreamWriter outputWriter = new OutputStreamWriter(uc.getOutputStream());
outputWriter.write(postData);
outputWriter.flush();
outputWriter.close(); 
```

那么您的`Accept`-Header 可能是错误的，因为这会告诉服务器您期望以哪种格式获得一些响应数据（`content`）。如果您希望从服务器获取一些 XML，这应该是`uc.setRequestProperty("Accept", "application/xml");`.

**更新**

通过将详细标志（`-v`）添加到您的`curl`命令中，我得到了它发送的标头：

```
POST /api/domains/amj.nms.mixnetworks.net/subscribers/9001/ HTTP/1.1
Authorization: Basic {URL_ENCODED_AUTHENTICATION_STRING}
User-Agent: curl/7.22.0 (i686-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
Host: 8.7.177.4
Accept: */*
Content-Length: 17
Content-Type: application/x-www-form-urlencoded 
```

所以请尝试像这样更改您的代码：

```
uc.setRequestProperty("Authorization", String.format("Basic %s", encoding));
uc.setRequestMethod("POST");
uc.setRequestProperty("Content-Type", "application/x-www-form-urlencoded; charset=utf-8");
uc.setRequestProperty("Accept", "*/*");
uc.setRequestProperty("Content-Length", Integer.toString(postData.getBytes().length)); 
```

用户代理字符串应该不感兴趣，除非您的服务器正在做一些非常奇怪的事情。

如果它仍然不起作用，请查看您的变量是否与详细 curl 运行`encoding`之后的部分具有相同的值。`Basic`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-30T19:08:33.270

就我而言，curl 适用于 POST 调用，java 中的 HttpUrlConnection 不起作用，返回 403 Forbidden 说我正在使用匿名登录，但是这个 POST 调用应该完成的实际工作已经完成。一开始非常混乱。然后发现我需要禁用 url 重定向（这是 xtend 代码，但你明白了）：

```
val conn = url.openConnection() as HttpURLConnection
conn.setInstanceFollowRedirects(false) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-11T22:25:57.027

这里有几个选项。一种是您可以添加一个 Java 类来使用 Runtime().exec 运行 bash 脚本。

但是，我调试了我的 Java 连接，发现我没有使用 TLSv1.2

```
 System.setProperty("deployment.security.TLSv1.2", "true");
        System.setProperty("https.protocols", "TLSv1.2");
        System.setProperty("javax.net.debug", "ssl"); // "" or "ssl" 
```

在我从 Java 7 迁移到 Java 8 之后，Java 命令起作用了。

通常 curl 有效但 Java 无效，或者 Java 有效而 curl 无效。我通常检查 SSL 配置（使用 -v 和 -k 进行 curl），尝试更改 http 与 https 或查看 SSL 证书安装程序：[https](https://confluence.atlassian.com/download/attachments/180292346/InstallCert.java) ://confluence.atlassian.com/download/attachments/180292346/InstallCert.java （我对此进行了修改以在运行时安装证书）

# ios - GLKTextureLoader -textureWithCGImage:options:queue:completionHandler: malloc 错误

> ID：11383220
> 
> 赞同：2
> 
> 时间：2012-07-08T12:38:48.673
> 
> 标签：ios, memory-management, opengl-es, glkit, glktextureloader

我正在使用一个`GLKTextureLoader`实例来异步加载纹理：

```
NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] 
                                                    forKey:GLKTextureLoaderOriginBottomLeft];
GLKTextureLoader *asyncLoader = [[GLKTextureLoader alloc] initWithSharegroup:sharegroup];
[asyncLoader textureWithCGImage:image
                        options:options
                          queue:NULL
              completionHandler:^(GLKTextureInfo *textureInfo, NSError *outError) {
                  if (outError) [ISDebugger logError:outError inMethod:_cmd];
                  GLuint textureName = [textureInfo name];
                  if (completionHandler) completionHandler(textureName);
              }]; 
```

第一次运行此代码时，它运行良好。但是第二次，我在控制台中收到`malloc: *** error for object 0xa0cb3c0: pointer being freed was not allocated`警告。回溯似乎表明错误发生在`GLKTextureLoader`自己的工作线程中：

```
* thread #16: tid = 0x3003, 0x91a32c91 libsystem_c.dylib`malloc_error_break, stop reason = breakpoint 1.1
    frame #0: 0x91a32c91 libsystem_c.dylib`malloc_error_break
    frame #1: 0x91a32e07 libsystem_c.dylib`free + 358
    frame #2: 0x011f5003 CoreGraphics`image_provider_finalize + 29
    frame #3: 0x01b144b3 CoreFoundation`CFRelease + 291
    frame #4: 0x0118d96c CoreGraphics`CGImageBlockSetRelease + 76
    frame #5: 0x0154646c GLKit`-[GLKTexture dealloc] + 65
    frame #6: 0x02184e3d libobjc.A.dylib`_objc_rootRelease + 47
    frame #7: 0x01549da0 GLKit`+[GLKTextureLoader commonTextureWithCGImage:options:error:lock:eaglContext:] + 277
    frame #8: 0x0154b77e GLKit`__71-[GLKTextureLoader textureWithCGImage:options:queue:completionHandler:]_block_invoke_0 + 140
    frame #9: 0x0232b330 libdispatch.dylib`_dispatch_call_block_and_release + 15
    frame #10: 0x0232c439 libdispatch.dylib`_dispatch_worker_thread2 + 302
    frame #11: 0x919dfb24 libsystem_c.dylib`_pthread_wqthread + 346 
```

显然，纹理加载器似乎过度释放了一些东西。我在这里做错了什么？

* * *

***更新：***

传递给该方法的图像是这样获得的：

```
NSString *bundlePath = [[NSBundle mainBundle] bundlePath];
NSString *imagePath = [bundlePath stringByAppendingPathComponent:imageFilename];
UIImage *uiImage = [UIImage imageWithContentsOfFile:imagePath];
CGImageRef image = [uiImage CGImage]; 
```

将图像生成更改为此阻止了错误的发生：

```
UIImage *uiImage = [UIImage imageNamed:imageFilename];
CGImageRef image = [uiImage CGImage]; 
```

所以现在我想问题是为什么？我知道这`+imageNamed:`包括一些缓存行为，但是为什么会影响这段代码呢？

* * *

***更新 2：***

使用创建图像时也是如此`[UIImage imageWithData:imageData]`（发生崩溃）。似乎唯一`[UIImage imageNamed:imageName]`的工作。任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T21:59:09.117

您正在使用异步方法来处理此项目。执行发布的可能不是 asyncLoader，而是其他东西。

如果您在本地将 image 声明为 UIImage，调用此 asyncLoader 以运行，然后立即退出当前的 stackFrame（即进行此调用的当前方法），则您传递的 UIImage 可能在您对其进行操作之前已被释放异步加载器。（如果 UIImage 被传入，但在调用堆栈帧中释放......或者如果它很弱并且持有它的引用的东西在 asyncLoader 运行之前将其删除，则会发生同样的事情）。

我建议从图像中创建一个强大的@property（并在您的viewController 的viewDidUnload 中将其设置为nil），然后这个问题就会消失。

# java - 多次向Java中的执行程序服务提交相同的（可运行的）命令

> ID：11383221
> 
> 赞同：5
> 
> 时间：2012-07-08T12:38:58.510
> 
> 标签：java

我想使用 Java 中的执行程序服务以并行方式安排相同的命令。我在线程池执行器上编写了一个包装器，它采用并行计数将命令作为参数调度，并在 for 循环中调度命令（即多次相同的实例）。

这种方法正确吗？有什么建议的方法吗？我正在使用 spring 来创建这些 bean。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:23:11.573

您可以使用[`ScheduledExecuterService`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)如下：

```
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

public class ScheduledExecutorTest {

    private final static ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);

    public static void main(final String[] args) throws InterruptedException {
        scheduler.scheduleAtFixedRate(new Runnable() {
            public void run() {
                System.out.println("executed");
            }
        }, 0, 1, TimeUnit.SECONDS);

        Thread.sleep(10000);
        scheduler.shutdownNow();
    }

} 
```

这将`run`立即开始每秒执行该方法。

使用这种方法，您可以将其多次添加到`scheduledExecuterService`：

```
Runnable command = new Runnable() {
    public void run() {
        System.out.println("executed");
    }
};
scheduler.scheduleAtFixedRate(command, 0, 1, TimeUnit.SECONDS);
scheduler.scheduleAtFixedRate(command, 0, 1, TimeUnit.SECONDS); 
```

# c# - 紧凑的字典键查找

> ID：11383222
> 
> 赞同：2
> 
> 时间：2012-07-08T12:39:15.637
> 
> 标签：c#

有没有办法写得更紧凑？

```
return _searchRedirectionMap.ContainsKey(query) ? _searchRedirectionMap[query] : ""; 
```

Givent`_searchRedirectionMap`被定义为`IDictionary<string,string>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T12:46:56.443

您可以编写一个`IDictionary`利用该方法的扩展[`TryGetValue`](http://msdn.microsoft.com/en-us/library/bb347013.aspx)方法：

```
public static TValue GetValueOrDefault<TKey, TValue>(this IDictionary<TKey, TValue> source, TKey key, TValue defaultValue)
{
    TValue outValue;
    if (source.TryGetValue(key, outValue))
    {
        return outValue;
    }

    return defaultValue;
} 
```

然后你可以像这样使用它：

```
return _searchRedirectionMap.GetValueOrDefault(query, string.Empty); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T12:49:04.897

您可以使用方法，但它会为类型`TryGetValue`返回 null ：`string`

```
_searchRedirectionMap.TryGetValue(key, out value); 
```

文档：[MSDN](http://msdn.microsoft.com/en-us/library/bb347013.aspx)

# ruby-on-rails - 将设计编辑用户注册拆分为 2 个单独的表单以更改电子邮件和更改密码？

> ID：11383223
> 
> 赞同：0
> 
> 时间：2012-07-08T12:39:33.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, devise, simple-form

我搜索了主题，但没有出现这个确切的问题。是否可以将 Devise 用户表单分开以使其成为 2 个单独的表单？

*   更改电子邮件
*   更改密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:21:30.923

您只需创建一个简单的 CRUD，就像在任何其他情况下一样。也可以生成设计使用和/或覆盖控制器的视图。

[https://github.com/plataformatec/devise/wiki/How-To:-Manage-users-through-a-CRUD-interface](https://github.com/plataformatec/devise/wiki/How-To:-Manage-users-through-a-CRUD-interface)

管理您的用户与设计无关，设计仅真正处理身份验证。

# python - 将整数时间/日期转换为字符串的更简洁的方法

> ID：11383225
> 
> 赞同：0
> 
> 时间：2012-07-08T12:39:41.153
> 
> 标签：python, date, time

我对python相当陌生，想编写一个程序，该程序需要在日期和时间的字符串和整数表示之间进行转换。

格式是固定的，必须看起来像“02.03.2010 13:32:20”

有没有比以下更简洁的方法？

```
class TimeStamp:
    def __init__(self, day, month, year, hour, minute, second):
        self.day = day
        self.month = month
        self.year = year
        self.hour = hour
        self.minute = minute
        self.second = second

    def __repr__(self):
        string = ""
        if self.day < 10:
            string += "0" + str(self.day)
        else:
            string += str(self.day)
        string += "."
        if self.month < 10:
            string += "0" + str(self.month)
        else:
            string += str(self.month)
        string += "."
        if self.year < 10:
            string += "0" + str(self.year)
        else:
            string += str(self.year)
        string += " "
        if self.hour < 10:
            string += "0" + str(self.hour)
        else:
            string += str(self.hour)
        string += ":"
        if self.hour < 10:
            string += "0" + str(self.hour)
        else:
            string += str(self.hour)
        string += ":"
        if self.hour < 10:
            string += "0" + str(self.hour)
        else:
            string += str(self.hour)
        return string 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T12:42:29.190

改用`datetime`模块；它[`.strftime`](http://docs.python.org/library/datetime.html#datetime.date.strftime)可以轻松满足您的需求等等。

```
>>> from datetime import datetime
>>> datetime.now().strftime('%d.%m.%Y %H:%M:%S')
'08.07.2012 14:43:58'
>>> datetime(2010, 3, 2, 13, 32, 20).strftime('%d.%m.%Y %H:%M:%S')
'02.03.2010 13:32:20' 
```

# php - 多次调用一个方法，有没有更有效的方法呢？

> ID：11383228
> 
> 赞同：2
> 
> 时间：2012-07-08T12:40:27.350
> 
> 标签：php, class, methods, return

我有一个用户注册脚本。在一个阶段，我将一个方法调用了 3 次。一次检查该方法是否返回 true，否则如果没有，它是否返回一个字符串（包含错误消息），如果它确实获取返回的字符串并将其放入变量中。

这样做是一种更有效的方法，以便我只需要调用一次该方法吗？但仍然得到我需要的所有答案？

继承人的代码：

```
//check thumbnail is present and good
            if($register->checkThumb()){
                //send image to permanent image directory
                $register->moveUploadedImage();

                //if the thumbnail failed validation put the error message in variable
            }else if(is_string($register->checkThumb())){
                $message = $register->checkThumb();

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:44:47.117

您可以在 if 语句中分配变量，

```
if($checked = $register->checkThumb()){
    //send image to permanent image directory
    $register->moveUploadedImage();

    //if the thumbnail failed validation put the error message in variable
}else if(is_string($checked)){
    $message = $checked;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T12:54:33.053

您可以将结果分配给变量，然后检查该变量。此外，当您检查变量是否为真时，您应该使用运算符 === 进行检查。否则，如果函数返回非空字符串，它也将被限定为 true。运算符 === 检查类型，因此只有值为 true 的布尔变量才会通过。

```
$result = $register->checkThumb();
if($result === true) {
    $register->moveUploadedImage();
} else if (is_string($result)){
    $message = $result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T12:45:37.787

```
 $thumb = $register->checkThumb(); //call method once and save in variable
   /* using just if($thumb) would return always true, because 
      the function may returns an errormessage on failure 
      which is ja string, which is not empty, not 0, not false == true */
    if($thumb === true){
      //send image to permanent image directory
      $register->moveUploadedImage();
    }else{ //so then it's enough to ask for error this way
      $message = $thumb;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T12:45:40.813

您可以执行以下操作：

```
if(!($check_thumb_retvalue = $register->checkThumb())) {
  //send image to permanent image directory
  $register->moveUploadedImage();

//if the thumbnail failed validation put the error message in variable
}
else if(is_string($check_thumb_retvalue)) {
  $message = $register->checkThumb();
} 
```

或者，更具可读性：

```
$check_thumb_retvalue = $register->checkThumb();
if(!$check_thumb_retvalue){
  //send image to permanent image directory
  $register->moveUploadedImage();
}
//if the thumbnail failed validation put the error message in variable
else if(is_string($check_thumb_retvalue)) {
  $message = $check_thumb_retvalue;
} 
```

LG、CK

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-08T12:46:04.470

你可以这样做：

```
 $result = $register->checkThumb();
        if($result){
            //send image to permanent image directory
            $register->moveUploadedImage();

            //if the thumbnail failed validation put the error message in variable
        }else if(is_string($result)){
            $message = $result;

        } 
```

但是您的代码很好，除非该方法非常昂贵，否则根本不会有任何明显的区别。

# php - 如何使用 .htaccess 在 codeigniter 中缩短 url？

> ID：11383230
> 
> 赞同：0
> 
> 时间：2012-07-08T12:40:46.320
> 
> 标签：php, .htaccess, codeigniter

我想知道是否有任何方法可以使用 .htaccess 缩短 codeigniter 中的 url。例如，我有 example.com/user/account/settings，我想将 url 缩短为 example.com/settings。与我们从地址栏中删除 index.php 的方式相同，有没有办法从同一地址栏中删除更多项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T12:44:39.020

它是通过`routes.php`CodeIgniter 应用程序文件夹中的文件完成的。[文档](http://codeigniter.com/user_guide/general/routing.html)。

对于您的示例，这真的很简单，只需在文件中添加一行：

```
$route['settings'] = 'user/account/settings'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T12:46:52.520

默认情况下，index.php 文件将包含在您的 URL 中：例如

```
example.com/index.php/news/article/my_article 
```

您可以使用带有一些简单规则的 .htaccess 文件轻松删除此文件。以下是此类文件的示例，使用“否定”方法重定向除指定项目之外的所有内容：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

在上面的示例中，除 index.php、images 和 robots.txt 之外的任何 HTTP 请求都被视为对 index.php 文件的请求。

# java - 将内容存储在缓冲区中

> ID：11383233
> 
> 赞同：-4
> 
> 时间：2012-07-08T12:41:07.403
> 
> 标签：java, xml

允许我存储内容的功能是什么

```
current.getChild("C").getContent(0) 
```

在一张桌子上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:33:38.017

我猜你正在寻找[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)。

例如 ：

```
 ArrayList<String> listNodeContent= new ArrayList<String>();

 //your code

 listNodeContent.add(current.getChild("C").getContent(0)); 
```

然后您可以使用不同的方法检索内容：[ArrayList#get(int index)](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#get%28int%29)，使用迭代器（[ArrayList#iterator()](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#iterator%28%29)）或使用 foreach 循环：

```
 for(String tmp : listNodeContent){
      System.out.println(tmp);
 } 
```

# eclipse - 查看扩展 CommonNavigator

> ID：11383234
> 
> 赞同：0
> 
> 时间：2012-07-08T12:41:07.913
> 
> 标签：eclipse, eclipse-plugin, jface

我有一个扩展 CommonNavigator 的视图。

我正在通过 CustomProjectCreation 向导创建自定义项目。

仅刷新如下所示，但每次创建新项目时都会刷新所有项目，这应该避免，

```
CommonNavigator resNav;
try {
resNav = (CommonNavigator)activePage.findView("view id");
resNav.getCommonViewer().refresh();
//resNav.getCommonViewer().refresh(newProject); //doesn't work
} catch (PartInitException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}

ContentProvider looks as below
if(parentElement instanceof IWorkspaceRoot){
List customProjects = getCustomProjects();
return customProjects.toArray(new CustomProject[customProjects.size()]);
} 
```

在调试时，getCommonViewer().refresh() 调用内容提供程序中的 getChildren() 方法。getCommonViewer().refresh(newProject) 不调用 ContentProvider

expandtolevel 和 setExpandedState 不起作用...

特别是新创建的项目如何实现刷新？如何扩展创建的项目？

问候， 阿拉文德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:23:18.230

您确定问题出在通用导航器上吗？如果您使用非 Eclipse 资源访问方法（即普通的 Java 文件 IO 而不是 IResource、IFile 和相关代码）在新项目中创建了工件，那么模型只是不知道新内容。如果是这种情况，您将[`yourProjectResource.refreshLocal()`](http://wiki.eclipse.org/FAQ_When_should_I_use_refreshLocal%3F)首先需要。

# asp.net - 使用url路由将参数id传递给sql查询

> ID：11383235
> 
> 赞同：1
> 
> 时间：2012-07-08T12:41:09.617
> 
> 标签：asp.net, sql, c#-4.0

我是初学者 asp.net 开发人员

尝试创建我的第一个简单的新闻门户页面。

这是我所拥有的：

*   数据库
*   Admin_News.aspx 将新闻添加到数据库中
*   Default.aspx 显示所有标题为可链接的新闻
*   NewsDetails.aspx 在点击 Default.aspx 中的标题时按 ID 显示详细信息

我是怎么做到的：

在 Default.aspx 我使用了这段代码：

```
<div>
    <asp:Repeater ID="Repeater1" runat="server" DataSourceID="SqlDataSource1">
        <HeaderTemplate>
            <table border="1">
                <tr>
                    <td>
                        <b>title</b>
                    </td>
                    <td>
                        <b>news</b>
                    </td>
                    <td>
                        <b>imges</b>
                    </td>

                </tr>
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
                <td>
                    <asp:HyperLink runat="server" ID="hl" NavigateUrl='<%#"~/NewsDetails.aspx?id=" + Eval("id")%>' Text='<%# Eval("title") %>'></asp:HyperLink>
                </td>
                <td>
                    <%# DataBinder.Eval(Container.DataItem, "news")%>
                </td>
                <td>
                    <img alt="" src='<%# DataBinder.Eval(Container.DataItem, "imageurl")%>' />
                </td>

            </tr>

        </ItemTemplate>
        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:Repeater>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:MoneyHolderConnectionString %>"
        SelectCommand="SELECT [id], [title], [news], [imageurl], [detail] FROM [News]"></asp:SqlDataSource>
</div> 
```

NewsDetails.aspx 代码：

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
        ConnectionString="<%$ ConnectionStrings:MoneyHolderConnectionString %>" 
        SelectCommand="SELECT [title], [news], [imageurl], [detail] FROM [News] WHERE ([id] = @id)">
        <SelectParameters>
            <asp:QueryStringParameter Name="id" QueryStringField="id" Type="Int64" />
        </SelectParameters>
    </asp:SqlDataSource>

    <asp:Repeater ID="Repeater1" runat="server" DataSourceID="SqlDataSource2">
            <HeaderTemplate>

            </HeaderTemplate>
            <ItemTemplate>
               <h1 align="right"><br />
                 <strong><p style="color:#000">
                     <%# DataBinder.Eval(Container.DataItem, "title")%>
                 </strong></h1><p/><br />
                 <br />

                 <p align="center"><img src='<%# DataBinder.Eval(Container.DataItem, "imageurl")%>'/>
                 <p/>
                 <br />
                 <br />

                 <p id="detail" align="right" style="font-size:25px"><%# DataBinder.Eval(Container.DataItem, "detail")%><p/>
                 <br />

            </ItemTemplate>
            <FooterTemplate>

            </FooterTemplate>
  </asp:Repeater> 
```

所以我正在做的是根据 .aspx?id= 中的 ID 在 url 中显示文章。一切正常.. 直到我使用 url 路由。

我更改/添加了一些代码来更改 url 的结构我不希望它看起来像 ~/NewsDetails.aspx?id=1 我想像 ~/News/1 而不是相同的结果。

所以我已经将此代码添加到 Global.asax：

```
void Application_Start(object sender, EventArgs e) 
{
    // Code that runs on application startup
    RegisterRoutes(RouteTable.Routes);
}
public static void RegisterRoutes(RouteCollection routeCollection)
{
    routeCollection.MapPageRoute("RouteForNews", "News/{id}", "~/NewsDetails.aspx");
} 
```

我将此代码添加到后面的 NewsDetails.aspx.cs 代码中：

```
string id = Page.RouteData.Values["id"].ToString(); 
```

我将 NewsDetails.aspx 中的 NavigateUrl 更改为：

```
NavigateUrl='<%#"~/News/" + Eval("id")%>' 
```

现在，当我打开 Default.aspx 时，新闻出现的标题可链接到 ~/News/“id number”，当我单击标题时，NewsDetails.aspx 打开时带有 /News/idnumber 的链接，但里面没有数据..its空我只能看到母版页的设计。

我会很感激你的任何帮助我应该怎么做才能显示新闻，url中的id值它转到字符串id变量但我不知道如何将它传递给sql查询（我不确定这是否是问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:48:09.853

您不应在 NewsDetails 页面中使用`asp:QueryStringParameter`，`asp:SqlDataSource`因为您的参数不再位于 QueryString 中。QueryString 是 URL 中问号之后的部分。

使用此链接了解如何将参数传递给 select 语句：

[如何将变量传递给 SqlDataSource 的 SelectCommand？](https://stackoverflow.com/questions/485821/how-to-pass-variable-to-selectcommand-of-sqldatasource)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T06:31:20.063

> connectionstring="<%$ ConnectionStrings:MyConnection %>"
> selectcommand="SELECT Name, Age FROM ContactInfo where State=@StateCode">

# javascript - 如何使用 Javascript 将 HTML 表单数据输出到 XML 文件？

> ID：11383236
> 
> 赞同：2
> 
> 时间：2012-07-08T12:41:25.633
> 
> 标签：javascript, html, xml, forms

我目前正在尝试弄清楚如何将我的 HTML 表单数据输出到 XML 文件。这是我过去几天一直在玩的一个想法，目的是创建一个用于 Windows 7 安装的 autounattended.xml 文件。

目前我的HTML如下：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Windows 7 Answer File Generator</title>
    </head>
    <body>
        <form>
            <h1>Windows 7 Answer File Generator</h1>
            <h2>General Settings</h2>
            <table>
                <tr>
                    <td width="200px">Skip product key:</td>
                    <td>
                        <select name="SkipProductKey">
                            <option value="Yes" selected="selected">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td width="200px">Skip automatic activation:</td>
                    <td>
                        <select name="SkipAutoActivation">
                            <option value="Yes" selected="selected">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </td>
                </tr>
            </table>
        </body>
    </html> 
```

这只是我一直在努力的一个片段。所以，我想知道是否可以使用 javascript 基于选择值创建 XML 文件并询问用户将 xml 文件保存在哪里。任何有关这方面的信息都会有很大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T14:13:21.440

[演示在这里](http://jsbin.com/ufufez/edit#preview)

```
$(function () {
  $('#DownloadButton').click(update);
});

var template = [
  '<?xml version="1.0"?>',
  '<unattend xmlns="urn:schemas-microsoft-com:unattend">',
  '...',
  '<SkipProductKey><?SkipProductKey?></SkipProductKey>',
  '...',
  '<SkipAutoActivation><?SkipAutoActivation?></SkipAutoActivation>',
  '...',
  '</unattend>'
].join('\r\n');

function update() {
  var variables = {
    'SkipProductKey': $('#SkipProductKey').val(),
    'SkipAutoActivation': $('#SkipAutoActivation').val()
  };

  var newXml = template.replace(/<\?(\w+)\?>/g,
    function(match, name) {
      return variables[name];
    });

  $('#ResultXml').val(newXml);
  $('#DownloadLink')
    .attr('href', 'data:text/xml;base64,' + btoa(newXml))
    .attr('download', 'autounattended.xml');
  $('#generated').show();
}

if (!window.btoa) {
  // Source: http://www.koders.com/javascript/fid78168FE1380F7420FB7B7CD8BAEAE58929523C17.aspx
  btoa = function (input) {
    var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';

    var result = '';
    var chr1, chr2, chr3;
    var enc1, enc2, enc3, enc4;
    var i = 0;

    do {
      chr1 = input.charCodeAt(i++);
      chr2 = input.charCodeAt(i++);
      chr3 = input.charCodeAt(i++);

      enc1 = chr1 >> 2;
      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
      enc4 = chr3 & 63;

      if (isNaN(chr2)) {
        enc3 = enc4 = 64;
      } else if (isNaN(chr3)) {
        enc4 = 64;
      }

      result += chars.charAt(enc1) + chars.charAt(enc2) + chars.charAt(enc3) + chars.charAt(enc4);
    } while (i < input.length);

    return result;
  };
} 
```

**编辑：**

*   根据 OP 的要求添加了下载按钮。
*   将 - 属性添加`download`到链接以在单击时显示“*另存为*”对话框。（感谢索拉布）
*   演示已更新。

# javascript - JavaScript 和 HTML 有什么关系？

> ID：11383237
> 
> 赞同：-2
> 
> 时间：2012-07-08T12:41:30.923
> 
> 标签：javascript, html

我知道 JavaScript 是一种脚本语言，而 HTML 是一种标记语言。HTML 允许用户为 Web 应用程序创建内容以在其浏览器中查看，但这与 JavaScript 有什么关系？

我只是对它们如何协同工作感到困惑。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:42:57.833

Javascript 以不同的方式处理 HTML 内容。使用 Javascript，您可以更改所有 HTML 元素并控制此行为。

# d - 用于高效四边形实现的自定义对齐选项

> ID：11383240
> 
> 赞同：1
> 
> 时间：2012-07-08T12:41:51.230
> 
> 标签：d

我对 D2 编程语言相当陌生。我需要实现一个四边形数据结构。这是一种用于有效图嵌入及其对偶的邻接数据结构。根据之前的 C 经验，我从以下实现开始：

```
struct edge(T) {
    edge* next;
    T* data;
    uint position;
}
alias edge[4] qedge;
edge* new_edge() {
    qedge* q = new qedge; // does not compile, just analogous
    // initialize the four edges (q[i].position = i)
    return cast (edge*) q;
} 
```

这很好用，但是这个位置字段让我很烦——它只是在浪费空间。有没有办法在为 qedge 数组分配内存时对齐 (8 * ${machine word size}) 边界（然后我不需要额外的位置字段，因为边缘在 qedge 中的哪个位置的信息数组将被编码到边缘地址）？

我的目标是一个高效而可爱的实现（这就是我选择 D 的原因），所以欢迎任何其他建议。

编辑：这是一段让事情更清楚的代码[http://dpaste.dzfl.pl/e26baaad](http://dpaste.dzfl.pl/e26baaad)：

```
module qedge;

class edge(T) {
    edge next;
    T* data;
}

alias edge!int iedge;
alias iedge[4] qedge;

import std.stdio;
import std.c.stdlib;

void main() {
    writeln(iedge.sizeof); // 8
    writeln(qedge.sizeof); // 32
    // need something for the next line, 
    // which always returns an address, divisible by 32
    qedge* q = cast (qedge*) malloc(qedge.sizeof);
    writeln(q); // ex. 0x10429A0 = 17050016, which is, does not start at 32-byte boundary
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:48:41.017

要直接回答问题 - 使用`align(N)`指定您想要的对齐方式。但是，请记住这一点（引自 dlang.org）：`Do not align references or pointers that were allocated using NewExpression on boundaries that are not a multiple of size_t`

[http://dlang.org](http://dlang.org)上的参考手册有一个关于对齐的部分 - [http://dlang.org/attribute.html#align](http://dlang.org/attribute.html#align)。

比如说，T 是 int - edge!int 在 64 位架构上已经是 24 字节大。D在对齐上与C没有太大区别。检查以下（可运行/可编辑代码：[http](http://dpaste.dzfl.pl/de0121e1) ://dpaste.dzfl.pl/de0121e1 ）：

```
module so_0001;
// http://stackoverflow.com/questions/11383240/custom-alignment-options-for-an-efficient-quad-edge-implementation

struct edge(T) {
    edge* next;
    T* data;
    uint position;
}
alias edge!int iedge;
alias edge!int[4] qedge;

/* not a good idea for struct... it is a value type...
edge!int new_edge() {
    // in the original example it used new... D is not C++ to mix value and reference types! :)
}
*/

import std.stdio;

int main() {
    writeln(iedge.sizeof);

    //                                   64bit
    //                                ----------
    writeln(iedge.next.offsetof);     // 0
    writeln(iedge.data.offsetof);     // 8
    writeln(iedge.position.offsetof); // 16
    writeln(qedge.sizeof);
    return 0;
} 
```

# javascript - 如何在Javascript中生成倾斜的随机数？

> ID：11383242
> 
> 赞同：4
> 
> 时间：2012-07-08T12:42:01.010
> 
> 标签：javascript, math, random

使用 Javascript，我如何生成偏向分布的一端或另一端的随机数？或者理想情况下是范围内的一个点？

对于上下文：我正在创建一个使用随机灰色正方形网格的 UI。我正在使用生成灰色的 RGB 值，`Math.random()`但希望能够使灰色平均变暗或变亮，同时仍能代表从黑色到白色的全范围。

（我认为这是一个类似于将[java random number generation 向某个数字倾斜](https://stackoverflow.com/questions/5853187/skewing-java-random-number-generation-toward-a-certain-number)的问题，但我正在使用 Javascript ......）

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-08T12:57:33.943

提高`Math.random()`幂以获得[伽马曲线](http://en.wikipedia.org/wiki/Gamma_correction)- 这会改变 0 和 1 之间的分布，但 0 和 1 保持不变的端点。

```
var r= Math.pow(Math.random(), 2);
var colour= 'rgb('+r*255+', '+r*255+', '+r*255+')'; 
```

对于 gamma>1，您将获得更暗的输出；对于 0<gamma<1，你会变得更轻。（这里，“2”为您提供 x 平方曲线；对于平方根曲线，等距亮度为“0.5”。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T13:17:54.997

这似乎比@bobince 的回答有点粗糙，也不那么优雅，但到底是什么。

```
//setup
var colours = [], num_colours = 10, skew_to = 255, skew_chance = 20;

//get as many RGB vals as required
for (var i=0; i<num_colours; i++) {

    //generate random grey
    var this_grey = Math.floor(Math.random() * 256);

    //skew it towards the @skew_to endpoint, or leave as-is?
    if (Math.floor(Math.random() * 100) >= skew_chance && this_grey != skew_to) {

            //skew by random amount (0 - difference between curr val and endpoint)
        var skew_amount = Math.floor(Math.random() * Math.abs(this_grey - skew_to));
        this_grey += ' (skewed to '+(skew_to < this_grey ? this_grey - skew_amount : this_grey + skew_amount)+')';
    }
    colours.push(this_grey);
}
console.log(colours); 
```

本质上，它会生成随机灰色，然后根据在 中可能指定的（作为百分比）`skew_chance`决定是否倾斜它。（如果你想让这个偶尔，而不是恒定的）。如果它决定倾斜，则从灰度值中添加或减去一个随机数（取决于倾斜端点是低于还是高于当前值）。

该随机数是介于 0 和当前值与端点之间的绝对差之间的数字，例如，如果当前值为 40，而端点为 100，则添加的数字将介于 0 和 60 之间。

就像我说的，@bobince 的回答有点，呃，更优雅！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T13:44:19.630

[这可能是一个有点不同的方法。]

这种方法处理以下列方式获取数字：

```
random = numberToSkewTo + random(-1,1)*stdDeviation 
```

在哪里：

*   `numberToSkewTo`是您想要倾斜的数字。
*   `stdDeviation`是偏离`numberToSkewTo`
*   `numberToSkewTo + abs(stdDeviation) <= MAX_NUMBER`和
*   `numberToSkewTo - abs(stdDeviation) >= MIN_NUMBER`

* * *

以下代码的作用是，它在给定数字周围选择一个随机数，标准偏差不断增加。它返回结果的平均值。

```
function skew(skewTo,stdDev){
    var rand = (Math.random()*2 - 1) + (Math.random()*2 - 1) + (Math.random()*2 - 1);
    return skewTo + rand*stdDev;
}

function getRandom(skewTo){
    var difference = Math.min(skewTo-MIN_NUMBER, MAX_NUMBER-skewTo);
    var steps = 5;
    var total = 0.0;
    for(var i=1; i<=steps; i++)
        total += skew(skewTo, 1.0*i*difference/steps);
    return total/steps

} 
```

# asp.net - Daypilot 在 asp.net MVC 3 中的调度程序控制抛出异常“请求必须以 JSON 开头”

> ID：11383249
> 
> 赞同：1
> 
> 时间：2012-07-08T12:43:06.850
> 
> 标签：asp.net, asp.net-mvc, razor, scheduler

我想要一个在带有 Razor 视图引擎的 ASP.NET MVC 3 中工作的调度程序控件。我遇到了 DayPilot 开源精简版。我只是按照他们网站上的示例示例进行操作，但我无法使我的示例正常工作。它抛出异常“请求必须以 JSON 开头”。该示例在我的机器上完美运行。

有人可以帮我解决这个问题吗？

我也愿意使用其他调度程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:23:29.733

如果您正在寻找类似的调度解决方案，请查看[DHTMLX Scheduler .NET for ASP.NET](http://scheduler-net.com/) 有一个关于如何使用 MVC3 Razor 实现它的详细[教程。](http://blog.scheduler-net.com/post/2012/03/15/asp-net-event-calendar-mvc3-razor.aspx)

# php - 将 PHP 会话存储在 JS 变量中？

> ID：11383250
> 
> 赞同：1
> 
> 时间：2012-07-08T12:43:08.927
> 
> 标签：php, security, zend-framework

我必须通过发布请求（使用 Flash Uploader）提交用户会话 ID。项目基于 Zend 框架。

现在我不确定我的实现是否“安全”：

**看法**

```
var session = "<?= Anon_SimpleCrypt::encrypt(Zend_Session::getId(), 'SOME_KEY'?>"; 
```

**控制器：**

```
 $sessionId = $_POST['SESSION_ID'];
   $sessionId = Anon_SimpleCrypt::decrypt($sessionId, 'SOME_KEY'); 
   Zend_Session::setId($sessionId); 
```

**加密/解密：**

```
 public static function encrypt($value, $encryptionKey) 
    {
        $result = '';
        $encryptionKey = $encryptionKey . self::getSalt($value);

        for ($count = 0; $count < strlen($value); $count++) {
            $char = substr($value, $count, 1);
            $keychar = substr($encryptionKey, ($count % strlen($encryptionKey)) - 1, 1);
            $char = chr(ord($char) + ord($keychar));
            $result.=$char;
        }

        return base64_encode($result);
    }

    public static function decrypt($value, $encryptionKey) 
    {
        $result = '';
        $value = base64_decode($value);

        $encryptionKey = $encryptionKey . self::getSalt($value);

        for ($i = 0; $i < strlen($value); $i++) {
            $char = substr($value, $i, 1);
            $keychar = substr($encryptionKey, ($i % strlen($encryptionKey)) - 1, 1);
            $char = chr(ord($char) - ord($keychar));
            $result.=$char;
        }

        return $result;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T12:55:51.480

您不需要加密会话 ID。只需以纯文本形式发送即可。会话 id 通常以未加密的方式存储在客户端的 cookie 中，这也不例外。此外，如果有人获得了加密的会话 ID，他们仍然可以使用该会话，因为无论如何您都在服务器上对其进行了解密。

# perl - Perl Net::Google::Calendar 事件发生

> ID：11383252
> 
> 赞同：1
> 
> 时间：2012-07-08T12:43:18.787
> 
> 标签：perl, google-calendar-api

我有以下代码（ perl ），但我不确定如何提取发生事件？

```
use Net::Google::Calendar;

my @cals = $parent->get_calendars;

for my $cal_selected (@cals) {

        printf "CALENDAR: %s\n", $cal_selected->title;

        $parent->set_calendar( $cal_selected );

                for ( $parent->get_events() ) {
                        my $title = $_->title || "";
                        my ($start, $end) = $_->when();

                        print "title: $title, start: $start, end: $end \n";
                }
} 
```

所以，其中一个事件有一个“开始”变量，但它每 4 天跳跃一次 - 我在当前输出中看不到它。

输出如下所示：

```
title: "Event 1", start: 2012-08-06T00:00:00, end: 2012-08-13T00:00:00 
title: "Event 2", start: 2012-07-05T00:00:00, end: 2012-07-05T00:00:00 
```

“Event1”有一个非常明确的开始和结束日期，6 天..

看到“事件 2”是在同一天，但发生在 2012-07-05、2012-07-09、2012-07-13 但我在输出本身中看不到...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:33:07.577

您可能需要尝试该`recurrence`方法。问题是如果你使用这个并且你没有`Data::ICal`安装模块，你会得到一个`undef`而不是一个错误。`undef`不幸的是，如果您已安装，您也会得到一个`Data::ICal`，并且不会再次发生。那只是糟糕的模块编程。

递归方法返回一个[Data::Ical::Entry::Event](http://search.cpan.org/~tsibley/Data-ICal/lib/Data/ICal/Entry/Event.pm)对象。

从那里开始，我不完全确定该怎么做。`Data::ICal::Entry::Event`文档真的很少。我必须通读[iCalendar RFC](http://www.ietf.org/rfc/rfc2445.txt)，其中提到该字段存储在名为`rdate`. 模块中提到了多个`rdate`属性`Data::ICal::Entry::Event`，但没有说明如何访问它或它的格式。

我认为您应该使用[Data::ICal::DateTime](http://search.cpan.org/~simonw/Data-ICal-DateTime-0.7/lib/Data/ICal/DateTime.pm)来帮助解析这些信息。这个模块有一个 reoccurrence 方法，可以让你拉出所有 rddate 的*并*集。不幸的是，它使用了一个`Data::ICal`对象，而你有一个`Data::ICal::Entry::Event`对象。也许那是 的子类`Data::ICal`，所以也许它仍然可以工作。

不幸的是，我没有谷歌日历设置，所以我真的没有办法玩这个。很抱歉没有更明确地说明这一点。但是，我希望这会引导你正确的方式。

* * *

另一项建议：使用[Data::Dumper](http://perldoc.perl.org/Data/Dumper.html)转储您获得的各种对象。这将帮助您了解正在发生的事情以及信息如何存储在这些对象中。运气好的话，您将能够准确地确定获取所需信息所需的方法和模块。

偷看是不礼貌的，但是当你不理解问题时，在书后查找答案有时会有所帮助。

# android - 在android中切换复合按钮

> ID：11383255
> 
> 赞同：0
> 
> 时间：2012-07-08T12:44:02.380
> 
> 标签：android, overlay, android-mapview, switch-statement

我正在尝试在我的地图活动应用程序中使用切换按钮

我在项目的 onCreate 方法中添加了以下代码片段，但是当我单击切换按钮时没有任何反应

```
 tourSwitch= (Switch) findViewById(R.id.tourswitch);

       tourSwitch.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {  
                 if(tourSwitch.getText().toString().equals("ON"))
                 {
                     mapOverlays.remove(3);
                 }

                 else if(tourSwitch.getText().toString().equals("OFF"))
                 {

                     mapOverlays = mapView.getOverlays();
                        projection = mapView.getProjection();
                        mapOverlays.add(3, new TourGuide());

                 }
            }
        }); 
```

如果有人可以请帮助我...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T12:57:31.340

我认为您使用了错误的侦听器。您应该使用[setOnCheckedChangeListener](http://developer.android.com/reference/android/widget/CompoundButton.html#setOnCheckedChangeListener%28android.widget.CompoundButton.OnCheckedChangeListener%29)（`Switch`是 的子类`CompoundButton`）：

```
tourSwitch.setOnCheckedChangeListener(new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        // Do Something
    }
}); 
```

# javascript - Java 脚本错误 - 无法将未定义转换为对象

> ID：11383258
> 
> 赞同：0
> 
> 时间：2012-07-08T12:44:17.957
> 
> 标签：javascript, undefined

尝试运行这段代码时出现“无法将未定义转换为对象”错误。我不是程序员，几乎不会编码，因此我的问题可能非常愚蠢/无法回答，我深感抱歉。

代码：

```
if (path == F[0])
    {
        //go N
        if (pointAy > 0) 
        {
            if (!(PS.BeadData(pointAx, pointAy - 1) === "blocked")) 
            {
                // Set bead to Previous State
                PS.BeadColor(pointAx, pointAy, previous_bead_NPC[NPCid][2]);
                PS.BeadData(pointAx, pointAy, 0);
                PS.BeadGlyph(pointAx, pointAy, " ");                 
                // Increment
                pointAy -= 1;
                // Place NPC
                MakeNPC(pointAx, pointAy, NPC[NPCid][2], NPC[NPCid][3], NPC[NPCid][4], NPC[NPCid][5], 1);
            }
        }
    } 
```

无法确定这是否足以为您找到答案 - 如果有帮助，我可以发布更多代码。

也许对于普通程序员会知道的这种错误有一些通用的答案，但是像我这样的菜鸟会忘记吗？

更新好的，通过逐步执行，我发现错误会在不同的函数中弹出，即使禁用上面的代码会使错误不会弹出。这是使错误弹出的函数：

```
PS.Tick = function ()
{
"use strict";
for (var NPCid = 0; NPCid < 10; NPCid++)
    {
        NPCAI(NPCid);
    };
}; 
```

该函数每秒调用一次，它调用 AI 逻辑函数，通过向 AI 函数提供 NPCid 在网格上移动 10 个 NPC。脚本在这里失败，但并非总是如此 - 通常一两个 NPC 迈出一步，然后函数才会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:27:37.203

如果您使用的是 Chrome 或 Firebug，您可以单步执行 JavaScript 代码。在 Chrome 上，打开工具图标（右上角的扳手），然后通过从下拉菜单中选择“工具”和“开发者工具”来启用开发者工具。在底部，您应该会在屏幕下方看到一个用于脚本的按钮。单击它并导航到您的页面。当你看到你的 JavaScript 文件打开它并在“if”语句处放置一个断点。重新加载您的页面，然后在调试器停止您的代码时查看 PS 和 NPC 的值。

# php - 购物车 - 更改销售税后更新总金额 - 无需使用 AJAX 重新加载页面

> ID：11383260
> 
> 赞同：2
> 
> 时间：2012-07-08T12:44:44.653
> 
> 标签：php, ajax, shopping-cart, authorize.net

据我了解，为了在不重新加载的情况下更新页面或计算价格，我必须使用 ajax。正确的？

我有一个购物车，它提供小计、税收和总计。用户必须选择他们的州才能知道我们是否收取税款。然后，他们单击“结帐”，这实际上是与 Authorize.net 相关联的按钮。我的客户不希望页面重新加载或刷新，因此我必须在他们选择状态后使用 Ajax 更新页面。

Authorize.net 有一组变量，例如`$amount_var`, `$loginID`,`$transactionKey`等。他们使用这些变量并将它们放入它们的“隐藏”值中以进行处理。我正在尝试将`$amount_var`变量更改为等于我的总计算量，这是在 ajax 访问的 php 页面中处理的。

状态下拉菜单有`onchange="doStateTax()"`. Where`GRANDtotalprice`是一个隐藏字段，其中包含购物车中所有项目的总和，并且`ddl`是他们选择的任何状态。

```
<script type="text/javascript">
    function doStateTax(){
        var grandtotalX = $('#GRANDtotalprice').val();
        var statetaxX = $('#ddl').val();

        $.post('statetax_query.php',
        {statetaxX:statetaxX, grandtotalX:grandtotalX}, 
        function(data) {
            data = $.parseJSON(data);
            $('.products-placeholder').html(data.products);     
            $('.statetax-placeholder').html(data.statetax);     
            $('.total-placeholder').html(data.total);
            // ...
        });
        return false;
    };
</script> 
```

这将发布到一个 PHP 页面，在该页面中检查 state = "michigan"。如果是这样，他们将被征收 6% 的税。这是我进行计算的 PHP 页面：

```
 <?php
    if (($_POST['statetaxX'] == 'MI'))
    {
        $taxselect = .06;
        $taxselect1 = 1.06;
    }
    else
    {
        $taxselect = 0;
        $taxselect1 = 1;
    }

    $products = number_format(($_POST['grandtotalX']), 2, '.', '');
    $tax = number_format((($_POST['grandtotalX'])*($taxselect)), 2, '.', '');
    $total = number_format((($_POST['grandtotalX'])*($taxselect1)), 2, '.', '');

    $results = array(
       'products' => $products,
       'statetax' => $tax,
       'total' => $total
    );
    $json = json_encode($results);
    echo $json;
?> 
```

这就是我对流程如何工作的想法......我认为结果会回到所谓的“成功回调”，对吗？我确实看到小计、税收和总计会立即发生变化，因此确实有效。由于此代码，它在 a 中显示数字：

```
$('.total-placeholder').html(data.total); 
```

但这只会显示结果。在我的代码中如何或在哪里导致 Authorize.net 将他们的`$amount_var`变量更改为我的总数？同样，他们的代码部分位于页面底部附近的我的 php 购物车中：

```
$amount_var = "youramount;
$loginID        = "loginid";
$transactionKey = "transkey"; 
```

如果我可以将我的成功回调注入到他们称为的隐藏字段`x_amount`中，那将非常容易，但这并不容易。他们`$amount_var`出于其他原因使用 ，例如设置指纹，因此我必须将它们设置`$amount_var`为等于我自己的计算。我在php页面中设置吗？还是javascript？别处？

**编辑：响应代码 99 错误**

几乎可以正常工作。添加代码后，我收到响应代码 99 错误。当我选择一个不需要税收的州时，它会起作用。当我选择 MI (michigan) 时，它会给出响应代码 99。根据我的发现，这是因为这部分之间存在不匹配：

```
<input type='hidden' name='x_amount' value='<?php echo $amount; ?>' /> 
```

和这个：

```
// The following lines generate the SIM fingerprint.  PHP versions 5.1.2 and
// newer have the necessary hmac function built in.  For older versions, it
// will try to use the mhash library.
if( phpversion() >= '5.1.2' )
    { $fingerprint = hash_hmac("md5", $loginID . "^" . $sequence . "^" . $timeStamp .     "^" . $amount . "^", $transactionKey); }
else 
    { $fingerprint = bin2hex(mhash(MHASH_MD5, $loginID . "^" . $sequence . "^" .         $timeStamp . "^" . $amount . "^", $transactionKey)); }
?> 
```

因为隐藏字段中的“$amount”部分已被您的脚本替换，但上面 $fingerprint 的“$amount”部分并未被脚本更改。我认为 Authorize.net 需要指纹部分和隐藏字段匹配。这让我回到了如何将这个 $amount 变量设置为我们的新组合总数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T13:12:18.020

# 删除了一堆东西 B/C 它是用于 AIM 方法的

如果需要，请检查我的答案的历史记录

# 编辑

有一个名为`x_tax`

在这条线之后

```
$('.statetax-placeholder').html(data.statetax); 
```

添加这个

```
$('input[name=x_tax]').val("Tax1<|>state tax<|>"+data.statetax); 
```

来自 SIM 指南第 28 页的底部：[http ://www.authorize.net/support/SIM_guide.pdf](http://www.authorize.net/support/SIM_guide.pdf)

> ADDITIONAL SHIPPING INFORMATION (Level 2 Data) Tax (x_tax) 值：有效的税额或分隔的税务信息 格式：提交分隔的税务信息时，值必须用括号分隔 <|> 注释：收取的税额或提交时此信息通过 HTML 表单 POST 形式提供，也允许包含销售税名称、描述和金额的分隔税信息。„ 税项名称<|> „ 税项说明<|> „ 税额 格式：提交分隔信息时不允许使用美元符号（$）。注意：x_amount 中交易的总金额必须包含这个金额。示例：州税<|>0.0625">

# 另一个编辑

在 php 端在 ajax 调用中生成指纹（PHP 端）：

```
if( phpversion() >= '5.1.2' )
{
    $fingerprint = hash_hmac("md5", $loginID . "^" . $sequence . "^" . $timeStamp .     "^" . $amount . "^", $transactionKey);
}
else 
{
    $fingerprint = bin2hex(mhash(MHASH_MD5, $loginID . "^" . $sequence . "^" .         $timeStamp . "^" . $amount . "^", $transactionKey));
}

$results = array(
   'products' => $products,
   'statetax' => $tax,
   'total' => $total,
   'fingerprint' => $fingerprint // Pass the fingerprint
);
$json = json_encode($results);
echo $json; 
```

在成功的 Ajax 上：

```
// Tax amount
$('input[name=x_tax]').val("Tax1<|>state tax<|>"+data.statetax);
// Total amount
$('input[name=x_amount]').val(data.total);
// use the new Fingerprint
$('input[name=x_fp_hash]').val(data.fingerprint); 
```

# r - 索引加入列表

> ID：11383262
> 
> 赞同：1
> 
> 时间：2012-07-08T12:44:53.120
> 
> 标签：r

一旦列表开始变得有点嵌套，我就会更加努力地与它们斗争（我认为其他人也可能会为嵌套列表而斗争）。我有一个列表，我想以某种格式放在一起。这是列表的示例：

```
ms2 <- list(list(" question", c(" thin", " thick"), " one", c(" simple", 
" big")), list(" infer", " theme", c(" strategy", " guess", " inform"
), c(" big", " idea", " feel", " one")), list(
    "synthesi", c(" predict", " thin", " thick", " parts", " visual", 
    " determin", " schema", " connect", " background", " knowledge", 
    " strategy", " infer", " question", " importance"), NA_character_, 
    c(" things", " picture")), list(" visual", " strategy", " picture", 
    NA_character_), list(" question", " wonder", c(" them", " one"
), NA_character_), list(" predict", NA_character_, c(" think", 
" guess", " wonder"), NA_character_)) 
```

我想将前三个和后三个列表组合在一起，得到 2 个包含 4 个向量的列表，如下所示（这仅适用于第一个列表）。

```
list(c("question", "infer", "synthesi", "visual"), 
    c("thin", "thick", "theme", "predict", "parts", 
        "visual", "determin", "schema", "connect", "backgraound",
        "knowledge", "strategy", "infer", "question", "importance", 
        "strategy"), 
    c("one", "strategy", "guess", "inform", "picture"), 
    c("simple", "big", "idea", "feel", "one", "things", "picture")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:25:12.570

像这样的东西怎么样：

```
slice.it <- function(i,x) {
   slice <- lapply(x, `[[`, i)
   words <- unlist(slice)
   words <- words[!is.na(words)]
}

lapply(1:4, slice.it, ms2[1:3])
# [[1]]
# [1] " question" " infer"    "synthesi" 

# [[2]]
#  [1] " thin"       " thick"      " theme"      " predict"    " thin"      
#  [6] " thick"      " parts"      " visual"     " determin"   " schema"    
# [11] " connect"    " background" " knowledge"  " strategy"   " infer"     
# [16] " question"   " importance"

# [[3]]
# [1] " one"      " strategy" " guess"    " inform"  

# [[4]]
# [1] " simple"  " big"     " big"     " idea"    " feel"    " one"     " things" 
# [8] " picture" 
```

请注意，它与您给出的预期输出不完全匹配。也许您可以帮助澄清这些差异？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T13:33:22.353

这与您给出的输出非常接近。不同之处在于我没有删除输入中所有单词的前导空格。如果删除前导空格，则结果的第二个元素中将不会同时包含“策略”和“策略”

```
lapply(1:4, function(i) {
    unique(na.omit(unlist(lapply(ms2, "[", i)[1:4])))
})
#[[1]]
#[1] " question" " infer"    "synthesi"  " visual"  
#
#[[2]]
#[1] " thin"       " thick"      " theme"      " predict"    " parts"     
#[6] " visual"     " determin"   " schema"     " connect"    " background"
#[11] " knowledge"  " strategy"   " infer"      " question"   " importance"
#
#[[3]]
#[1] " one"      " strategy" " guess"    " inform"   " picture" 
#
#[[4]]
#[1] " simple"  " big"     " idea"    " feel"    " one"     " things"  " picture" 
```

# javascript - 为什么 Math.floor 返回零？

> ID：11383266
> 
> 赞同：0
> 
> 时间：2012-07-08T12:45:39.510
> 
> 标签：javascript, math

我想问为什么该`Math.floor`方法返回零。这是我的代码：

```
var duration = 217;

var sec = Math.floor((duration / 1000) % 60);
var min = Math.floor((duration / (60 * 1000)) % 60); 
```

那里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T12:50:30.390

```
var sec = Math.floor((duration / 1000) % 60); 
```

(217 / 1000) % 60 = 0.217

0.217 的底值为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T12:50:49.030

is的结果是`(217/ 1000) % 60`向下舍入为.`0.217``Math.floor()``0`

同样，`(217/ (60 * 1000)) % 60`is`0.0036166666666666665`也向下舍入为`0`。

因此，您会看到 的正确行为[`Math.floor()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/floor)，即“返回小于或等于数字的最大整数”。

# android - 如何加密android sqlite数据库？

> ID：11383270
> 
> 赞同：6
> 
> 时间：2012-07-08T12:46:10.723
> 
> 标签：android, encryption

我正在为 Android 创建一个 2d 游戏，我正在使用 sqlite 数据库来存储游戏数据。有根用户可以轻松更改数据库。所以我必须加密数据，当有人更改它时，我必须了解这一点。我该怎么做这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-08T12:52:06.633

看看[SQLCipher](http://sqlcipher.net/about/)项目。它是一个开源库，为 SQLite 数据库文件提供透明、安全的 256 位 AES 加密。

该网站提供了Android[教程](http://sqlcipher.net/sqlcipher-for-android/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-25T03:51:49.787

SQLCipher + 用户密码可能是正确的实现。我们需要用户密码来加密数据库，而不是使用硬编码的字符串。

# facebook - 如何修复 Open Graph 标签中的“Parser Mismatched Metadata”错误？

> ID：11383271
> 
> 赞同：1
> 
> 时间：2012-07-08T12:46:14.273
> 
> 标签：facebook, metadata, facebook-opengraph, meta

我正在我的网站（[示例页面](http://www.zujava.com/how-to-make-a-book-cover)）上调试 Open Graph 标记。

我正在努力修复[从 Facebook Debug Tool 得到的错误](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.zujava.com%2Fhow-to-make-a-book-cover)。错误是：

> 解析器不匹配元数据：
> 此元数据的解析器结果与输入元数据不匹配。这可能是由于数据以一种意外的方式排序、为一个属性提供了多个值而只期望一个值、或者给定属性的属性值不匹配造成的。以下是解析结果中未看到的输入属性 => 内容对：'article:published_time => 2012-07-07'

我相信我正在[根据文档](https://developers.facebook.com/docs/opengraph/objects/builtin/#article)正确格式化文章：published_time 标签，月份和日期前导零，四位数年份，并按年-月-日排序。它也以与示例相同的顺序出现。

以下是原始的 Open Graph 标签：

```
Meta Tag:   <meta property="fb:app_id" content="407390309287595" />
Meta Tag:   <meta property="og:type" content="article" />
Meta Tag:   <meta property="og:url" content="http://www.zujava.com/how-to-make-a-book-cover" />
Meta Tag:   <meta property="og:site_name" content="Zujava.com" />
Meta Tag:   <meta property="og:image" content="http://assets1.zujava.com/sites/default/files/3781/how-to-make-a-book-cover/book-cover.jpg" />
Meta Tag:   <meta property="og:title" content="How to Make a Book Cover" />
Meta Tag:   
<meta property="og:description" content="Preparing to go back to school can be expensive. Buying book covers should not be one of your expenses because it is so easy to make your own book covers for no cost at all. It takes less than 5 minutes to make a book cover and it doesn&amp;#039;t require any tools or extra supplies. You can make your own book covers out of paper bags, construction paper, bubble wrap, wrapping paper and other recyclable materials that you probably already have in your home. Once you cover your book you can decorate it by doodling on the front or adding stickers." />
Meta Tag:   <meta property="article:published_time" content="2012-07-07" />
Meta Tag:   <meta property="article:author" content="http://www.zujava.com/users/varietywriter" />
Meta Tag:   <meta property="article:tag" content="crafts" />
Meta Tag:   <meta property="article:tag" content="education" />
Meta Tag:   <meta property="article:tag" content="school" />
Meta Tag:   <meta property="article:tag" content="back to school" />
Meta Tag:   <meta property="article:tag" content="easy crafts" />
Meta Tag:   <meta property="article:tag" content="art" />
Meta Tag:   <meta property="article:tag" content="arts and craft projects" />
Meta Tag:   <meta property="article:tag" content="books" />
Meta Tag:   <meta property="article:tag" content="book covers" />
Meta Tag:   <meta property="article:tag" content="how to" />
Meta Tag:   <meta property="article:tag" content="make your own" />
Meta Tag:   <meta property="article:tag" content="arts and crafts" /> 
```

某些内容是否格式不正确或丢失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T15:46:06.123

不用担心，这只是一个警告（不是错误，错误在 Debug 工具输出中显示为红色），它不会阻止 OpenGraph 中的数据更新。

只是为了确保您可以将更新的数据与您发布的数据进行比较，目前似乎没问题。

```
article:published_time:1341644400 -> 2012-07-07T10:00:00+03:00 
```

如果您不想抑制警告消息，只需将`DateTime`OpenGraph 元标记中的字段内容替换为 UNIX 时间戳，警告就会消失。我在我对[OpenGraph 的回答中对此进行了描述：自定义属性未在帖子中显示，](http://facebook.stackoverflow.com/a/11177270/155033)提供指向该问题的现有错误的链接（请参阅答案底部的顺便说一句）。

# asp.net-mvc - 如何使用 ActionLink 传递查询字符串？

> ID：11383272
> 
> 赞同：0
> 
> 时间：2012-07-08T12:46:22.630
> 
> 标签：asp.net-mvc, query-string, actionlink

**你好，**

我正在使用 ASP.NET MVC 3，我需要生成这样的 URL：`MyURL.se/?CS.C2=113`

我试过这个：

```
<%= Html.ActionLink(subItem.Name, "List", "Ad", new { CS.C2=subItem.Id}, null) %> 
```

但这会抛出一个：**CS0746: Invalid anonymous type member declarator。必须使用成员分配、简单名称或成员访问来声明匿名类型成员。**

CS.C2 是操作所需的 viewClass 的一部分。

那么如何为这个链接生成一个正确的 URL 呢？

**编辑 ：**

```
public ActionResult List(AdList data)
{
    //Fill data
    return View(data);
} 
```

我试过这个：[https://stackoverflow.com/a/10011614/1490727](https://stackoverflow.com/a/10011614/1490727)但它抛出：

*没有为此对象定义无参数构造函数。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.MissingMethodException：没有为此对象定义无参数构造函数。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:33:57.597

我可以做这样的事情..

**一个。创建一个自定义的 html 助手**

```
public static MvcHtmlString MyActionLink(this HtmlHelper htmlHelper, string linkText,
string action, string controller, IDictionary<string, object> routeValues, 
object htmlAttributes)
{
         return htmlHelper.ActionLink
         (
            linkText, 
            action, 
            controller, 
            new RouteValueDictionary(routeValues), 
            HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes)
         );
} 
```

**湾。像这样使用它**

```
@Html.MyActionLink(subItem.Name, "List", "Ad", 
new Dictionary<string, object> { { "CS.C2", subItem.Id } }, null) 
```

**更新**

您不需要自定义操作助手。你可以直接通过`RouteValueDictionary`如下，

```
@Html.ActionLink(subItem.Name, "List", "Ad", 
new RouteValueDictionary{ { "CS.C2", subItem.Id } }, null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T13:16:57.487

我最终像这样手动构建它：

```
<a href="?CS.C2=<%=item.Id%>" title="<%=item.Name%>"><%=item.Name%></a> 
```

如果可以使用 Action.Link 生成此链接，我将很高兴听到它。

# mysql - 大量的 AND 会成为 mySQL 中的性能问题吗？

> ID：11383276
> 
> 赞同：2
> 
> 时间：2012-07-08T12:46:54.737
> 
> 标签：mysql, performance

我是 mySQL 的新手。我有一个书桌，我希望用户能够搜索书籍并找到特定的书。

书籍表列：
=======================
出版商
作者
姓名
价格
出版日期
等。

我应该如何查询此表以找到具有良好性能的特定书籍？我现在正在做的是：

```
SELECT name,writer,publisher,price 
FROM books
WHERE publisher='publisher' 
AND writer='wirter' 
AND name='name' 
AND price<='price' 
AND publishingdate>='publishingdate' 
etc. 
```

但是 AND 太多了，我认为这会杀死服务器。有没有更好的方法来搜索表格？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T12:49:11.570

您应该向表中添加索引以提高性能。

如果您想支持对不同列进行广泛的用户指定搜索，您可以尝试单独为每一列建立索引。

如果在添加这些索引之后您仍然发现某个特定查询运行缓慢，您可能需要添加一个多列索引，MySQL 可以使用该索引来提高该查询的性能。您可以使用`EXPLAIN`来查看特定查询使用哪些索引。

您还应该知道，添加索引可以提高读取性能，但也会降低写入表的性能。如果写入速度也很重要，则应注意不要添加许多未使用的索引。

**有关的**

*   [`CREATE INDEX`句法](http://dev.mysql.com/doc/refman/5.6/en/create-index.html)
*   [了解查询执行计划](http://dev.mysql.com/doc/refman/5.6/en/execution-plan-information.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T12:50:17.927

对于您需要的条件，有多个这样的是完全可以的。我不会认为少于一打是多余的。我见过`and`没有性能问题的 30 秒查询。

它根本不会“杀死服务器”。然而，这是一个尝试查询的好机会，看看它们运行了多长时间，然后尝试使用索引、其他表等来改进它们。

如果由于大量记录而导致性能问题，您可以将索引添加到各个字段。如果您的记录少于 10,000 条，我不会打扰。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T12:50:56.550

这很好，它不会杀死任何东西。尽量不要过早优化；确保它首先工作。

一旦您拥有大量~~书籍~~行并实际*看到性能问题*，那么是时候重新审视您的架构了。在大多数情况下，您只需要一些索引来加快查找速度。查询之类的工具[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.0/en/explain.html)有助于诊断执行查询时数据库在做什么。

所以简而言之，不要担心。

# c++ - 锁定 std::map C++

> ID：11383277
> 
> 赞同：1
> 
> 时间：2012-07-08T12:46:56.463
> 
> 标签：c++, multithreading, synchronization

`std:map`我在多线程应用程序中使用时遇到问题。当线程写入该对象时，我需要锁定地图对象。并行读取此对象的另一个线程应该购物，直到写入过程完成。

示例代码：

```
std::map<int, int> ClientTable;

int write_function() //<-- only one thread uses this function
{
  while(true)
  {
    //lock ClientTable
    ClientTable.insert(std::pair<int, int>(1, 2)); // random values
    //unlock ClientTable

    //thread sleeps for 2 secs
  }
}

int read_function()  //<--- many thread uses this function
{
  while(true)
  {
     int test = ClientTable[2]; // just for test
  }
} 
```

如何锁定这个 std::map 对象并正确同步这个线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T12:59:21.697

看起来你需要的是一个典型的读写锁，允许任意数量的读者，但只有一个作者。你可以看看 boost 的[shared_mutex](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_types.shared_mutex)。

可以在此处找到其他使用示例：[boost shared_mutex (multiple reads/one write) 的示例？](https://stackoverflow.com/questions/989795/example-for-boost-shared-mutex-multiple-reads-one-write)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T12:54:25.943

好吧，由于 std::map 没有内置锁，因此您必须使用单独的锁来保护地图。如果映射是由该锁保护的所有内容，您可以将映射子类化以在其中添加锁以及“锁定”和“解锁”调用，但如果锁也将用于其他项目，那么它可能不是最好的主意去做。

至于“如何正确同步”——这对手头的应用程序非常具体。但是，对于给出的示例，您还必须在读取操作周围插入锁定/解锁调用。

如果您有读/写锁，这也可能是其中之一的好应用程序。

# facebook - 使用 jQuery mobile 的外观和感觉创建“Facebook 赞按钮”

> ID：11383284
> 
> 赞同：0
> 
> 时间：2012-07-08T12:48:49.293
> 
> 标签：facebook, jquery-mobile, facebook-like

如何让 Facebook“点赞按钮”看起来像 jQuery 移动按钮？我有一个带有按钮列表的 jQuery 移动页面，我希望其中一个成为“喜欢按钮”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T12:55:06.863

您不能根据 Facebook 更改点赞按钮 -

[https://www.facebook.com/brandpermissions/logos.php](https://www.facebook.com/brandpermissions/logos.php)

> 虽然您可以缩放大小以满足您的需要，但您不能以任何其他方式修改“赞”按钮（例如通过更改设计）。

* * *

如果您决定继续您的计划，请注意如果 Facebook“抓住”您 - 他们**将对**您的 URL/应用程序/页面/用户采取行动。

## 当心-我是根据自己的经验说话...

# php - 来自两个表的数据并加入 codeigniter

> ID：11383285
> 
> 赞同：0
> 
> 时间：2012-07-08T12:48:50.807
> 
> 标签：php, mysql, codeigniter, codeigniter-2

我有两个具有以下构造的表：

错误类型：

```
| id | errortype_text | 
```

错误原因：

```
| id | errorreason_text | errortype_id | 
```

我想从`errorreason`表中选择所有数据并将`errortype_id`数据替换为对应的`errortype_text`.

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T12:58:48.823

如果表有外键，您可以在模型中执行此操作：

```
$this->db->select('erroreason_text');
$this->db->join('errorreason', 'errortype.id = errorreason.id');
$query = $this->db->get('errortype');
return $query->result(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T12:56:56.490

如果你在谈论 SQL/MySQL，它应该是：

```
SELECT `errortype_text`, `errorreason_text`, `errortype_id` FROM `errorreason` JOIN `errortype` ON `errortype`.`id`=`errorreason`.`id` 
```

这会根据具有相同 id 的条目连接您的表，这正是 Yan 建议的方法。

如果您明确引用 PHP/Codeigniter，则必须将其作为参数传递给 mysql_query 以便随后进行评估：

```
$query=mysql_query("SELECT `errortype_text`, `errorreason_text`, `errortype_id` FROM `errorreason` JOIN `errortype` ON `errortype`.`id`=`errorreason`.`id`"); 
```

# javascript - bone.js - 每个列表项包含 3 个项目的列表

> ID：11383300
> 
> 赞同：0
> 
> 时间：2012-07-08T12:51:18.347
> 
> 标签：javascript, backbone.js

我的页面上有一个列表 ( `<ul></ul>`)，我想将其建模为一个主干.js 集合。让我们调用模型 Animal，然后我有一个 Animals 集合和一个 AnimalView。现在对于我拥有的每个列表项，而不是一只动物，三只动物。所以像：

*   动物1，动物2，动物3
*   动物4，动物5，动物6

现在我的问题是在backbone.js 中这样做的正确方法是什么？我可以在每个模型中拥有三只动物，但感觉不对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:12:26.590

您可以将集合嵌套在其他集合中而不会出现任何问题

```
var Animal = Backbone.Model.extend();
var Cage = Backbone.Collection.extend({model: Animal});
var Zoo = Backbone.Collection.extend({collection: Cage});

new Zoo([ 
    new Cage([
        new Animal(), 
        new Animal()
    ]), 
    new Cage([
        new Animal(), 
        new Animal()
    ])
]); 
```

# html - 检查哪个 没有

> ID：11383305
> 
> 赞同：1
> 
> 时间：2012-07-08T12:52:15.927
> 
> 标签：html, css

我最近收到了一个旧模板来进行更改。它是一个非常长的可怕缩进。在添加新设计的过程中，我似乎删除`</div>`了几个地方的标签，整个东西现在似乎有了一个全新的形状。是否可以轻松识别哪些`<div>`没有`</div>`. Dreamweaver 在这方面做得很好，但我们不再使用它了。

您能否推荐一些工具、浏览器插件或其他任何可以帮助做到这一点的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T12:54:45.663

您正在寻找的程序是[HTML Tidy](http://tidy.sourceforge.net/)

从[文档](http://www.w3.org/People/Raggett/tidy/)中：

> 编辑 HTML 时很容易出错。如果有一种简单的方法可以自动修复这些错误并将草率的编辑整理成布局良好的标记，那不是很好吗？那么现在有！Dave Raggett 的 HTML TIDY 是一个免费的实用工具。它还可以很好地处理由专门的 HTML 编辑器和转换工具生成的极其难以阅读的标记，并且可以帮助您确定需要进一步注意的地方，以使您的页面更容易被残障人士访问。

# java - Android Afreechart - 改变线条的形状、粗细和颜色

> ID：11383306
> 
> 赞同：2
> 
> 时间：2012-07-08T12:52:21.783
> 
> 标签：java, android, graph, jfreechart, linechart

我正在尝试在我的应用程序中更改折线图点的形状。我正在使用`afreechart's TimeSeriesChart`. 我想让这条线在粗细、颜色和点的形状方面花哨。在哪里更改代码？将使用哪种方法？

我现在拥有的：

[![当前的](../Images/4c2c911420a7a5db26968ff3af3ad731.png)](https://i.stack.imgur.com/UUxuF.png)
[（来源：[googlecode.com](http://afreechart.googlecode.com/svn/doc/screenshot/images/YieldCurveDemo01.png)）]

我想要的是：

![所需](http://afreechart.googlecode.c![在此处输入图像描述](../Images/18ecccf80540c8e05dc4f8c8695b2bc2.png)om/svn/doc/screenshot/images/XYDrawableAnnotationDemo01.png)

如您所见，在第一个图表中，折线图的点是不透明的和矩形（正方形？），而在第二个图表中，它们是花哨的。那么，需要改变什么？我似乎无法弄清楚用于存储此形状值的变量，也无法弄清楚如何更改它。任何帮助表示赞赏。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:33:21.603

假设`XYLineAndShapeRenderer`，您需要调整渲染器以使用所需的形状并使轮廓可见，如本[例](https://stackoverflow.com/a/9875534/230513)所示。

```
renderer.setSeriesShape(0, circle);
renderer.setSeriesPaint(0, line);
renderer.setUseFillPaint(true);
renderer.setSeriesShapesFilled(0, true);
renderer.setSeriesShapesVisible(0, true);
renderer.setUseOutlinePaint(true);
renderer.setSeriesOutlinePaint(0, line); 
```

![图片](../Images/024703d456f6666ee41b64db038ad470.png)

# sql - 如何配置 CMake 目标或命令来预处理 C 文件？

> ID：11383314
> 
> 赞同：8
> 
> 时间：2012-07-08T12:54:33.867
> 
> 标签：sql, cmake, c-preprocessor

[我最初在CMake](http://cmake.org)邮件列表上问了这个问题：[如何配置目标或命令来预处理 C 文件？](http://www.cmake.org/pipermail/cmake/2012-July/051164.html)

我正在将基于[GNU Autotools](http://en.wikipedia.org/wiki/GNU_build_system)的构建配置移植到 CMake，我必须处理 C 预处理以生成文件。

预处理器的输入是使用了**C 预处理器**指令的**SQL**文件，例如等。**`#include "another.sql"`**

 **目前，`Makefile`使用以下规则生成纯`SQL`文件作为输出：

```
myfile.sql: myfile.sql.in.c
    cpp -I../common $< | grep -v '^#' > $@ 
```

因此，它`myfile.sql`是构建过程的产品之一，类似于共享库或可执行文件。

我应该使用什么 CMake 工具来达到相同的效果？

我不清楚我是否应该使用`add_custom_command`，`add_custom_target`或者两者结合。

显然，我正在寻找一种至少可以与*GNU GCC*和*Visual Studio*工具集一起使用的可移植解决方案。我想我必须定义特定于平台的自定义命令，一个用于`cpp`预处理器，一个用于`cl.exe /P`.

或者，CMake 是否为 C 预处理器提供任何类型的抽象？

我扫描了档案，但我只发现了基于*make*功能的 fortran 文件或解决方案的预处理：`make myfile.i` 所以，这不是我想要的。

更新：根据从 Petr Kmoch在 CMake 邮件列表[中收到的解决方案](http://www.cmake.org/pipermail/cmake/2012-July/051167.html)[添加了答案。](https://stackoverflow.com/a/11443046/151641)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T23:28:56.003

我通过复制[从 Petr Kmoch 收到](http://www.cmake.org/pipermail/cmake/2012-July/051167.html)的解决方案的重要部分来回答自己的问题，作为对我在邮件列表中的帖子的回复。

首先，使用（带有 OUTPUT 签名的版本）创建一个自定义命令`add_custom_command`来实际进行预处理。

例如：

```
add_custom_command(
  OUTPUT myfile.sql
  COMMAND "${CMAKE_C_COMPILER}" -E myfile.sql.in -I ../common
  MAIN_DEPENDENCY myfile.sql.in
  COMMENT "Preprocessing myfile.sql.in"
  VERBATIM) 
```

二、配置命令触发器：

*   如果命令输出文件 ( `myfile.sql`) 在另一个目标中使用，作为源文件添加到`add_library`or`add_executable`中，则在这些命令中指定它就足够了。CMake 会发现它是一个依赖项，并根据需要运行自定义命令。

*   如果命令输出文件是未在任何其他目标中用作依赖项的最终输出，则添加自定义目标以使用以下命令驱动命令`add_custom_target`

例如：

```
add_custom_target(
  ProcessSQL ALL
  DEPENDS myfile.sql
  COMMENT "Preprocessing SQL files"
  VERBATIM) 
```

致谢：Petr Kmoch

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T08:14:27.743

要利用 CMake 的`make myfile.i`功能，您可以这样做：

```
add_library(sql_cpp_target EXCLUDE_FROM_ALL myfile.sql.in.c) 
```

现在运行`make myfile.sql.in.c.i`将使用 defined 为您生成预处理源`CMAKE_C_FLAGS`。可能可以更改预处理文件的输出名称和目录。

无论如何，您需要将这些`make`调用包装起来`add_custom_target(ALL ...)`，以使 CMake 在构建期间运行它们。

在目标定义中使用`CMAKE_MAKE_PROGRAM`变量。

如果你想从构建工具中抽象出来，你可以调用 cmake 本身来为你构建一个目标。`${CMAKE_COMMAND} --build ${CMAKE_BINARY_DIR} --target targetname`定义自定义目标时使用。

* * *

或者，您可以只`add_custom_command()`运行指定的编译器来预处理文件并将它们放在适当的位置。但这似乎不太灵活，IMO。**

# c# - 在 C# 中相交两个 List<>

> ID：11383329
> 
> 赞同：2
> 
> 时间：2012-07-08T12:57:04.210
> 
> 标签：c#, c#-4.0

我有两个`List<T>`想要相交的对象，但在尝试时出现错误。

```
// Make the Keys in the Dictionary<Load, double> _loads to form a List<Load>
List<Load> l1 = _loads.Keys.ToList();

// Get a list from my element.
List<Load> l2 = element.ListLoads;

// Intersect
List<Load> loads = (List<Load>)l1.Intersect<Load>(l2); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T12:59:33.057

[`Intersect<T>`](http://msdn.microsoft.com/en-us/library/bb460136.aspx)返回 an [`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)，所以正确的方法是：

```
var loads = l1.Intersect(l2).ToList(); 
```

[`ToList<T>`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)`List<T>`从一个创建一个`IEnumerable<T>`。

请注意，您可以在调用时省略类型参数`Intersect<T>`，编译器足够聪明地推断它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T13:16:55.653

你可以这样做：

```
List<Load> loads=new List<Load>(l1.Intersect(l2)); 
```

这是因为 Intersect 将返回 IEnumerable，这是从 IEnumerable 创建新列表的正确方法。

# python - Django：“长”对象不可迭代

> ID：11383336
> 
> 赞同：2
> 
> 时间：2012-07-08T12:57:53.040
> 
> 标签：python, django

1.  我有一个模型

    ```
    class tournaments(models.Model):
        # ....
        total_rounds = models.IntegerField(max_length=11, blank=True, null=True)
        # ....

        def get_total_rounds_count(self):
            return self.total_rounds 
    ```

2.  视图.py：

    ```
    def tourney_view(request, offset):
        # .....
        if (offset):
            selected_tournament =  tournaments.objects.get(id=offset)
        return render_to_response('tournament.html', {'tournament': selected_tournament}) 
    ```

3.  在“tournament.html”模板中，我尝试遍历total_rounds：

    ```
    {% for q in tournament.get_total_rounds_count%}
    {% endfor %} 
    ```

并得到错误：'long' object is not iterable 为什么？我的字段是 IntegerField，我只是想循环整数值，但得到“不可迭代”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:02:22.010

您可以使用以下代码段：[http ://djangosnippets.org/snippets/1357/](http://djangosnippets.org/snippets/1357/)

或者定义`Tournament.get_total_rounds`哪些返回`range(get_total_rounds_count)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T13:11:52.910

是的，Otto 的方式是最好的，只需更新您的函数以返回范围。

```
 class tournaments(models.Model):
     # ....
     total_rounds = models.IntegerField(max_length=11, blank=True, null=True)
     # ....

     def get_total_rounds_count(self):
         return range(self.total_rounds) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T13:00:53.913

那是因为你不能用`for`数字构造

# java - 在 for 循环中添加时，String 的 ArrayList 变成了两倍

> ID：11383337
> 
> 赞同：1
> 
> 时间：2012-07-08T12:58:08.810
> 
> 标签：java, json

我正在循环一个 JSONArray。`names`并且`amount`是`ArrayList <String>`

```
JSONArray data = json.getJSONArray("data");
int i = 0;
for (i = 0; i < data.length(); ++i) {
  JSONObject rec = data.getJSONObject(i);
  String name = rec.getString("name");
  names.add(i, name);
  String amount_v = rec.getString("amount");
  amount.add(i, amount_v);
  Log.v(logtag, i + " - " + names.size());
}
Log.v(logtag, "final - " + names.size()); 
```

对于 i 的每个值，names.size() 是 i 的两倍，即使我在循环中只添加了一个元素。数据有 5 条记录，名称和数量为两列。但在循环之后，名称包含所有 10 个值（5 个名称和 5 个数量）。但实际上，应该只将 5 个名称添加到名称列表中。

我在日志中看到的..

```
0 - 2
1 - 4
2 - 6
3 - 8
4 - 10
final - 10 
```

为什么它将值添加`amount_v`到名称列表中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T12:59:59.090

因为这两个引用调用`amount`并`names`引用了同一个 ArrayList 实例。

# java - 如何使用 Akka 演员处理 Java 中的套接字？

> ID：11383343
> 
> 赞同：0
> 
> 时间：2012-07-08T12:59:34.833
> 
> 标签：java, sockets, akka

我发现了很多如何使用 Akka actor 在 Scala 中处理套接字的示例，但 Java API 中没有 IO。我应该如何在 Akka actor 中使用 Java 中的套接字？是否有任何围绕套接字的包装器可以使用消息与套接字进行通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:10:03.900

IO 模块只为 Scala 提供了一个 api。从 Java 中使用[IOManager](http://doc.akka.io/docs/akka/2.0.2/scala/io.html#IOManager)可能并不难，您只需要处理它为每种事件类型发送的案例类。在Java 代码中使用[IO.Iteratee](http://doc.akka.io/docs/akka/2.0.2/scala/io.html#IO_Iteratee)可能会比较棘手，因此您可能会避免使用它。

# java - 将函数作为字符串传递的正确方法

> ID：11383347
> 
> 赞同：4
> 
> 时间：2012-07-08T13:00:36.113
> 
> 标签：java

请允许我解释我正在尝试做的事情 - 我*认为*标题大致解释了它，但我不太确定我正在以正确的方式做事，所以如果我错了，请纠正我！

我使用`LayeredPane`. 基本上 a`jPanel`显示在 上`POPUP_LAYER`，因此出现在主要内容的顶部。此面板包含一个简单*的“label-textbox-okay-cancel”*控件组。我将其称为“对话面板”。

我要做什么：当在主窗口（包含在 中`LayeredPane`）上单击按钮时，将出现*对话框面板*并允许用户输入一些文本，然后单击确定或取消。这一切都很简单，但我希望这段代码可以重复使用，这意味着主窗口上的其他按钮将调用相同的*Dialog Panel*，但标签中的文本不同。

这当然需要我包含某种回调函数，以便*对话框面板*上的确定按钮将根据调用它的按钮运行正确的代码。

*我目前的尝试是存储一个字符串，该字符串将包含当用户单击Dialog Panel*上的 OK 按钮时应该运行的函数的名称。我正在尝试检索此字符串并将其转换为函数名称，到目前为止，我发现了许多对“反射”的引用，其中许多暗示这不是一个好主意。

在任何情况下，我都无法让任何示例代码工作，因为我不明白下面代码中的“obj”是什么，并且无法调用该方法：

```
method = obj.getClass().getMethod(myCallbackString); 
```

我的问题是：

首先，我是否以正确的方式进行此操作？我对建议持开放态度，但请尽量保持简单，因为我真的才刚刚开始！

其次，上面显示的代码中的“obj”是什么？我真的很想知道，即使这不是我应该做的事情！

我的其他想法包括：我的*Dialog Panel*是否应该在它自己的类中，如果是，那么如何传递回调函数？

任何帮助或建议将不胜感激。

顺便说一句：回答“为什么不使用普通对话框？”这个问题。我只能说我目前正在做实验，我只是想看看我能不能做到这一点！

MVK

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T13:10:10.753

Java 程序传入回调函数的常用方法是传递实现特定回调函数的接口实例。匿名实现接口是典型的，但不是必需的。

例如，这是一个接口：

```
interface MyCallback {
    void performCallback();
} 
```

这是您定义接受回调的对话框方法的方式：

```
void openWithCallback(MyCallback cb) {
    // Do something useful...
    ...
    // Perform the callback
    cb.performCallback();
} 
```

以下是调用该方法的方式：

```
public void OpenDialog() {
    myDialog.openWithCallback(new MyCallback() {
        public void performCallback() {
            System.out.println("Inside callback...");
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T13:09:59.327

`obj`命名您要调用其方法的对象，在您的情况下，您可以将其替换为`this`（或完全删除它，因为`this`暗示）：

```
private void callByName(String name) { 
  try { getClass().getMethod(name).invoke(this); }
  catch (RuntimeException e) { throw e; }
  catch (Exception e) { throw new RuntimeException(e); }
} 
```

为此，您需要声明一个具有适当名称的公共无参数方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T13:11:05.963

1.  我认为您的想法是有效的，尽管它有一个主要缺点：您将方法名称存储为代码中的简单字符串，因此编译器无法检查它们的有效性。因此，如果您更改方法的名称，您必须手动确保已更新所有引用它的字符串。这就是“反思是一个坏主意”的通常含义。
2.  `obj`在您的代码中是您要调用方法的对象。举个简单的例子，`someInteger.toString();`with 反射的等价物是`someInteger.getClass().getMethod("toString").invoke();`.

更一般地说，一旦您对 Java 感到满意，您还可以查看像 Scala 这样的函数式语言，其中函数是常规对象，并且您想要的场景可以通过完整的编译器检查来实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-08T13:17:39.170

我认为你让这种*方式*变得比它必须的更复杂。你说你想要这个：

```
This is all easy enough, but I would like this code to be re-usable, which means 
that other buttons on the main window will invoke the same Dialog Panel, but with
different text in the label. 
```

根据定义，对话框是可重用的。为什么不让按钮单击侦听器在单击时将适当的文本传递给对话框，以便显示正确的信息？

如果您需要根据调用者在对话框上单击按钮后执行特定操作，您可能需要考虑：

1.  创建了一个自定义 DialogBox 扩展，其中包含根据谁调用它知道要做什么的逻辑。然后当一个按钮调用自定义对话框时，它会向它传递一个参数，让它知道在对话框关闭后它想要做什么。

2.  研究使用抽象工厂模式之类的东西。

是的，你可以通过反射来做到这一点。是的，这将是一个非常糟糕的主意，因为其他人在其他答案中讨论了许多原因，特别是如果这是生产代码（尽管您似乎表示这是一个实验。）

如果您*真的*只是想了解如何使用反射来处理它，您可能需要阅读该主题。我发现[这](http://tutorials.jenkov.com/java-reflection/index.html)是最好的教程之一。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-08T13:09:23.453

我没有与 JPanel 合作过，但我从您的查询中了解到，答案似乎相当简单。为什么不传递方法名称，而不是在接口上工作并传递该接口的不同实现？

# asp.net - ValidatorEnable 未定义

> ID：11383354
> 
> 赞同：0
> 
> 时间：2012-07-08T13:01:36.847
> 
> 标签：asp.net

我正在尝试使用 javascript 启用和禁用必填字段验证器，但不断收到错误消息 ValidatorEnable is not defined。请在下面找到代码，任何帮助都会很棒。

*ASP.NET*

```
<asp:RequiredFieldValidator EnableClientScript="True"  Display="None" ID="rfvMostRecentEmployer" ControlToValidate="txtMostRecentEmployer" runat="server" ErrorMessage="Most recent employer title is a required field"></asp:RequiredFieldValidator> 
```

*Javascript*

```
var validatorMostRecentEmployer = document.getElementById('<%= rfvMostRecentEmployer.ClientID %>');

ValidatorEnable(validatorMostRecentEmployer, !hasCv); 
```

*代码背后*

```
protected void Page_Load(object sender, EventArgs e)
{
    rblCV.Attributes.Add("onClick", string.Format("ShowCvOptions();"));
    ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T13:27:22.837

确保`ValidatorEnable` 在从任何其他地方调用之前放置该函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T13:14:54.663

可能是您尝试在包含 asp.net 验证器代码之前运行 JavaScript 代码。

如果您使用的是 jQuery，请尝试将代码包装在：

```
$(document).ready(function () {
  var validatorMostRecentEmployer = document.getElementById('<% =rfvMostRecentEmployer.ClientID %>');

  ValidatorEnable(validatorMostRecentEmployer, !hasCv);
}); 
```

（我还结合了 Ashwin 的建议，这是从 JavaScript 引用 asp.net 控件的正确方法）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T13:11:01.813

ClientID 可能是问题所在。

```
var validatorMostRecentEmployer = document.getElementById('<% =rfvMostRecentEmployer.ClientID %>');

ValidatorEnable(validatorMostRecentEmployer, !hasCv); 
```

**更新**虽然不是一个优雅的解决方案，但它可以工作，如果没有的话。

```
function disableValidator() 
{ 
var myval = document.getElememtById('<% =rfvMostRecentEmployer.ClientID %>'); 
myval.style.cssText=""; 
myval.style.display='none'; 
myval.style.accelerator=true; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T18:17:45.517

在挖掘服务器端代码后，我发现以下代码禁用了客户端脚本，并且必须阻止它注册：

```
//Clear client side validators
foreach (BaseValidator bv in Page.Validators)
{
    bv.EnableClientScript = false;
} 
```

感谢所有为此提供帮助的人。

# java - 应用服务器设计

> ID：11383355
> 
> 赞同：2
> 
> 时间：2012-07-08T13:01:37.687
> 
> 标签：java

我想设计一个由应用程序服务器组成的应用程序。

会有一个具有不同职责的分层核心：

*   使用不同的协议（例如 SIP、DNS...）从网络接收消息（例如使用 Netty）
*   解析传入的消息
*   将特定于协议的消息转换为特定于应用程序的消息。特定应用程序可能有兴趣接收不同协议的消息（例如 SIP 和 DNS）。

我的问题涉及上述各层。由于核心之上会有不同的应用程序，我想找到一种有效的方法将传入的消息分发到相关的应用程序。高效，我的意思是使用好的设计（包括好的模式），好的性能......对于这种情况，你能给我什么建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:17:57.003

也许[企业集成模式](http://www.enterpriseintegrationpatterns.com/)可以帮助您在应用程序中设计消息流。

根据您的确切计划，还值得研究[Spring 集成](http://www.springsource.org/spring-integration/)或[Apache Camel](http://camel.apache.org/)。

# google-chrome-extension - 如何跟踪是否有人修改了我的 chrome 扩展程序？

> ID：11383362
> 
> 赞同：0
> 
> 时间：2012-07-08T13:03:01.180
> 
> 标签：google-chrome-extension

编辑：澄清一下-我刚刚发现修改现有扩展非常容易：[如何直接修改 Google Chrome 扩展文件？(.CRX)](https://stackoverflow.com/questions/2250163/how-do-directly-modify-a-google-chrome-extension-file-crx)

知道我想知道我是否可以跟踪是否有人使用我的扩展程序做到了这一点？

如果有人使用我的扩展的此类修改版本，自动更新是否仍然有效？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T01:21:13.910

没有可靠的方法可以做到这一点。实施任何跟踪方法本身都会暴露正在运行的跟踪器有完全瘫痪的风险；

您可以改为使用 NPAPI 来构建您的扩展并以二进制格式分发它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:02:14.870

您总是可以混淆/缩小代码（使用诸如[Closure Tools](https://developers.google.com/closure/)或[UglifyJS](https://github.com/mishoo/UglifyJS/)之类的东西）以防止篡改。它不会“跟踪”修改，只会使修改变得更加困难。

您的扩展程序的自动更新仍然有效。用户实际上不会就地修改您的扩展程序，他们实际上会将其复制到运行修改后的代码的本地解包扩展程序中。因此，只要您的扩展程序仍处于启用状态，它仍会更新。但是，如果用户将您的扩展程序解压缩到他们自己的本地副本中并禁用您的扩展程序，他们将不会获得对您的扩展程序的更新。

# java - 归并排序中的参数传递

> ID：11383365
> 
> 赞同：0
> 
> 时间：2012-07-08T13:03:57.483
> 
> 标签：java, merge, parameter-passing, mergesort

再会！该程序应该对文件中的前 n 个单词进行排序。请帮我在调用方法mergeSort_srt时传递参数。当我运行它时，控制台说

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    The method mergeSort_srt(int[], int, int) in the type SortingAnalysis is not applicable for the arguments (String[], int, int) 
```

我是 Java 语言编程的新手，我很困惑。请帮我。尽管我想自己找到错误，但我做不到，因为我对这些东西知之甚少，我需要真人的帮助，而不仅仅是在线阅读教程。非常感谢！

```
import java.io.*;
import java.util.*;

public class SortingAnalysis {

    public static void mergeSort_srt(int array[],int lo, int n){
        int low = lo;
        int high = n;
        if (low >= high) {
            return;
        }

        int middle = (low + high) / 2;
        mergeSort_srt(array, low, middle);
        mergeSort_srt(array, middle + 1, high);
        int end_low = middle;
        int start_high = middle + 1;
        while ((lo <= end_low) && (start_high <= high)) {
            if (array[low] < array[start_high]) {
                low++;
            } else {
                int Temp = array[start_high];
                for (int k = start_high- 1; k >= low; k--) {
                    array[k+1] = array[k];
                }
                array[low] = Temp;
                low++;
                end_low++;
                start_high++;
            }
        }
    }  

    public static void main(String[] args) {
        final int NO_OF_WORDS = 10000;
        try {
            Scanner file = new Scanner(new File(args[0]));
            String[] words = new String[NO_OF_WORDS];

            int i = 0;
            while(file.hasNext() && i < NO_OF_WORDS) {
                words[i] = file.next();
                i++;
            }
            long start = System.currentTimeMillis();

            mergeSort_srt(words, 0, words.length-1);
            long end = System.currentTimeMillis();
            System.out.println("Sorted Words: ");
            for(int j = 0; j < words.length; j++) {
                System.out.println(words[j]);
            }       
            System.out.print("Running time: " + (end - start) + "ms");

        }
        catch(SecurityException securityException) {
            System.err.println("You do not have proper privilege to access the files.");
            System.exit(1);
        }
        catch(FileNotFoundException fileNotFoundException) {
            System.err.println("Error accessing file");
            System.exit(1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T13:07:30.350

本质上，这个错误的意思是你有一个方法，在某个地方，叫做`quicksort`. 快速排序方法将一个字符串数组 (String[]) 和两个整数作为参数。但是在您的代码中，您尝试使用 type 的对象来调用它`SortingAnalysis`。由于编译器找不到采用这种对象的名为 quicksort 的方法，因此会引发此错误。

尽管由于我找不到对`quicksort`您发布的代码中调用的方法的任何调用，但我不得不假设代码或错误消息已过时。

**编辑由于 OP 代码编辑**：

既然您的代码是准确的，那么问题出在哪里就很明显了。您的方法`mergeSort_srt`声明如下：`mergeSort_srt(int array[],int lo, int n)`. 它期望第一个参数中有一个整数数组。在您的 main 方法中，您可以这样称呼它：`mergeSort_srt(words, 0, words.length-1);`，其中是*Strings*`words`数组，而不是整数。

 *要解决此问题，您需要将 mergeSort_srt 方法更新为：

1.  将字符串数组 (String[]) 作为输入
2.  更新排序逻辑以适用于字符串，因为它现在都是为整数或其他数字编写的。*

# ruby-on-rails - 安装 rails_admin 一切都停止工作

> ID：11383367
> 
> 赞同：3
> 
> 时间：2012-07-08T13:04:35.483
> 
> 标签：ruby-on-rails, rails-admin

所以我想创建一个应用程序，人们可以在其中查看艺术。问题是，只有管理员才能创建、编辑和删除数据。所以我想添加一个管理界面。我选择了 rails_admin gem。

我已经按照 git 文档中的说明安装了所有东西，但是当我安装它时一切都停止了。我无法生成脚手架、模型或控制器，也无法启动我的服务器。每当我尝试某事时，它都会给我这个信息。

```
/Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:229:in `block in constantize': uninitialized constant Admin (NameError)
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in `each'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in `constantize'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise.rb:256:in `get'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise/mapping.rb:77:in `to'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise/mapping.rb:72:in `modules'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise/mapping.rb:89:in `routes'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise/mapping.rb:156:in `default_used_route'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise/mapping.rb:66:in `initialize'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise.rb:290:in `new'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise.rb:290:in `add_mapping'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise/rails/routes.rb:208:in `block in devise_for'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise/rails/routes.rb:207:in `each'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise/rails/routes.rb:207:in `devise_for'
from /Users/Max/Desktop/walls/config/routes.rb:18:in `block in <top (required)>'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:260:in `draw'
from /Users/Max/Desktop/walls/config/routes.rb:1:in `<top (required)>'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:40:in `each'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:40:in `load_paths'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:16:in `reload!'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:26:in `block in updater'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/file_update_checker.rb:78:in `call'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/file_update_checker.rb:78:in `execute'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:27:in `updater'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /Users/Max/Desktop/walls/config/environment.rb:5:in `<top (required)>'
from /Users/Max/Desktop/walls/config.ru:4:in `block in <main>'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
from /Users/Max/Desktop/walls/config.ru:1:in `new'
from /Users/Max/Desktop/walls/config.ru:1:in `<main>'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands/server.rb:46:in `app'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
from /Users/Max/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

在安装 rails_admin 之前，我已经设置了所有数据，所以如果我不得不重新开始，那就太糟糕了。

如果有人需要更多信息，我很乐意提供，但我现在不知道该发布什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:11:57.760

看看你的routes.rb，我必须有一些像这样的代码 devise_for :admin_users, ActiveAdmin::Devise.config

删除它或删除它。您已经删除了管理员，但可能尚未修改路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:54:43.760

要再次回到工作项目状态，请从 Gemfile 中删除 gem 'rails_admin' 声明，从 config/initializers 目录中删除 rails_admin.rb 文件，然后从 config/routes.rb 中删除 rails_admin 生成的路由：

```
devise_for :admins
mount RailsAdmin::Engine => '/rails_admin', :as => 'rails_admin' 
```

这就是导致 Devise 寻找 Admin 模型的原因。删除它，连同删除 gem 和初始化文件应该从你的项目中删除整个东西。

# apache - 可能在我的 htaccess 中匹配了两个重写

> ID：11383370
> 
> 赞同：0
> 
> 时间：2012-07-08T13:04:49.983
> 
> 标签：apache, .htaccess, mod-rewrite

我想将以下 2 个 URL 重写为 2 个不同的页面

```
/potato/prakash.raman ----> /potato/user.php?handle=prakash.raman
/potato/prakash.raman/watchlist ----> /potato/watchlist.php?handle=prakash.raman 
```

这些是我的重写

```
ReWriteRule ^(.*)/watchlist watchlist.php?handle=$1
ReWriteRule ^(.*)$ user.php?handle=$1 
```

两者似乎都被重写为 user.php?handle

我可能做错了什么。我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:07:46.200

添加`RewriteCond`以防止重写现有文件，并添加`[L]`标志以确保在第一次匹配后不再匹配其他规则：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
ReWriteRule ^(.*)/watchlist watchlist.php?handle=$1 [L]
ReWriteRule ^(.*)$ user.php?handle=$1 [L] 
```

# macos - 在 Mac 上使用不同的子目录设置虚拟主机

> ID：11383372
> 
> 赞同：3
> 
> 时间：2012-07-08T13:06:13.767
> 
> 标签：macos, apache, mamp, virtual-hosts

我在 Mac 上设置本地开发环境时遇到问题。

我有什么（添加）：

/私人/等/主机：

```
127.0.0.1       dev.local
127.0.0.1       page1.dev.local 
```

/Applications/MAMP/conf/apache/httpd.conf：

```
NameVirtualHost *

<VirtualHost dev.local:8888>
    ServerName dev.local
    DocumentRoot /Users/user1/Sites/
    <Directory /Users/user1/Sites/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>
</VirtualHost>

<VirtualHost page1.dev.local:8888>
    ServerName page1.dev.local
    DocumentRoot /Users/user1/Sites/page1/
    <Directory /Users/user1/Sites/page1/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>
</VirtualHost> 
```

基本上我想通过[http://dev.local](http://dev.local)和 /Users/user1/Sites 物理访问“root”

第一个项目（page1）可通过[http://page1.dev.local](http://page1.dev.local)访问，位于 /Users/user1/Sites/page1

下一个项目遵循相同的逻辑。

当我打开[http://dev.local 时](http://dev.local)，我看到了正确的页面，但是使用[http://page1.dev.local](http://page1.dev.local)我得到了相同的页面。

我当然总是重启 Apache！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:52:55.067

我找到了一个可行的解决方案：我必须在之后插入一个`ServerAlias`并添加一个星号`VirtualHost`

```
NameVirtualHost *

<VirtualHost *:8888>
    ServerName dev.local
    ServerAlias dev.local
    DocumentRoot /Users/user1/Sites/
    <Directory /Users/user1/Sites/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:8888>
    ServerName page1.dev.local
    ServerAlias page1.dev.local
    DocumentRoot /Users/user1/Sites/page1/
    <Directory /Users/user1/Sites/page1/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>
</VirtualHost> 
```

# jquery - jquery 选项卡的 min-height 会影响页面自动滚动

> ID：11383378
> 
> 赞同：0
> 
> 时间：2012-07-08T13:07:23.440
> 
> 标签：jquery, tabs, css

这是我的代码

[http://jsfiddle.net/aSCDp/5/](http://jsfiddle.net/aSCDp/5/)

如果您将页面向下滚动到底部，然后单击任何链接。页面将自动滚动到顶部。

当我们点击链接时，是否可以保持页面静止？

我认为问题来自#container 的“最小高度”。如果我将“最小高度”设置为高于#tab3，则完全没有问题。

此外，如果我替换“ $('#tab' + k).fadeIn(500);” 用“$('#tab' + k).show();” . 页面不会滚动到顶部。

你能帮我解决这个问题并保持淡入淡出效果吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:55:24.557

另一种方法是修复窗口滚动偏移。在您的代码中：

```
var scrollTop = $(window).scrollTop();
$('.tabs').hide();
$('#tab' + k).fadeIn(500); //$('#tab' + k).show();
$(window).scrollTop(scrollTop); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T13:42:28.060

您可以在 DOM 的底部设置一个锚点，使颜色名称*链接*并将它们中的每一个指向底部锚点。[JSFiddle](http://jsfiddle.net/aSCDp/7/)

# api - REST http 方案

> ID：11383380
> 
> 赞同：0
> 
> 时间：2012-07-08T13:07:26.483
> 
> 标签：api, rest, server-side

我正在寻找构建我的第一个 API，并且我对从 SOAP 到 RESTful API 的各种类型的 API 进行了大量研究。我决定使用带有 http 标头的 RESTful 方法，因为我认为它是最能满足我需求的方法。

在阅读了很多关于 RESTful API 方案的工作方式之后，我有一个问题希望有人能帮助我，这对我来说似乎是缺失的一块拼图。

我知道我通常会通过`POST`, `GET`,`PUT`或`DELETE`特定的 URL 发送数据 -`app/user/{userid}/{property}`但我不明白它是如何在服务器端解释的。显然，对于各种用户来说，没有无穷无尽的目录，所以这是 htaccess 文件中的某种操作来捕获这些请求吗？有人可以解释一下这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T13:15:28.677

当然，没有什么可以阻止您维护庞大的目录结构，在 POST/PUT 上创建新文件和目录。但这会很麻烦且容易出错。

您需要一些服务器端技术。理想地构建时考虑了 REST。该技术/框架了解 URL 模式，能够将它们映射到控制器/处理程序/一些代码，并提取路径变量，如您的示例中的`userid`和。`property`

例如，在[java](/questions/tagged/java "显示标记为“java”的问题")中，您有[jaxrs](/questions/tagged/jaxrs "显示标记为“jaxrs”的问题")标准，允许您编写：

```
@Path("app/user/{userid}/{property}")
public class UserResource {

    @GET
    public String getUserProperty(
        @PathParam("userid") int userId, 
        @PathParam("property") String property
    ) {
            //...
    }
} 
```

看看这个框架处理低级的东西有多好？每次您访问时`GET app/user/42/salary`，它都会为您提取`42`和`salary`调用，并`getUserProperty`使用适当的参数进行调用。

像这样的框架的另一个优点是基于期望的自动编组/解组`Content-type`：该库将解组 JSON/XML，将对象传递给您的控制器方法并将返回的对象编组回某种表示形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T13:16:58.907

您可以使用框架轻松定义路由。

例如，您可以在 php 中使用 silex，您可以使用它定义如下路由：

```
// index.php
require_once __DIR__.'/../vendor/autoload.php'; 

$app = new Silex\Application(); 

// If we stored users in an array ...
$users = array(
    1 => 'Adrien',
    2 => 'John',
);

$app->get('/users/{id}', function($id) use($app, $users) { 
    return $users[$id]; 
}); 

$app->run(); 
```

然后你就可以`curl -X GET -i http://localhost/index.php/users/1`

您可以在此处查看 silex 的文档[http://silex.sensiolabs.org/](http://silex.sensiolabs.org/)

# django - 在 list_editable 的 admin 中向 Django 的 auth_user 添加自定义验证

> ID：11383382
> 
> 赞同：1
> 
> 时间：2012-07-08T13:07:31.653
> 
> 标签：django, django-models, django-admin

Django 有`list_editable`. 我需要编辑`is_active`标志。

```
from django.contrib.auth.models import User
from django.contrib.auth.admin import UserAdmin
from django.contrib import admin
from django.db.models import Q
from django import forms

class MyUserAdminForm(forms.ModelForm):
    class Meta:
        model = User

    #def clean_is_active(self):
        # do something that validates your data
    #    print ' I am here... '
    #    print self.cleaned_data
    #    print self
    def clean(self):
        k = 1

class MyUserAdmin(UserAdmin):
    list_display = ["id", "username", "email", "is_staff", "is_superuser", "is_active", "date_joined"]
    search_fields = ["username", "email"]
    list_display_links = ["id", "username"]
    list_editable = ("is_active",)
    list_per_page = 50

    form = MyUserAdminForm

# Had to unregister the User so it could be registered with MyUserAdmin
admin.site.unregister(User)
admin.site.register(User, MyUserAdmin) 
```

我把它放进去`admin.py`，我已经注册了我的`admin.ModelAdmin`代码。显示器很好。所以`MyUserAdmin`工作正常。

由于 clean 方法，此代码应该会失败。但它没有。它`MyUserAdminForm`显然没有使用。我需要清理 is_active。

谢谢。

* * *

注意我继承自`admin.ModelAdmin`而不是`UsreAdmin`. 我已经使用了我可以拥有的所有组合......

* * *

更新

我认为这段代码只对编辑页面有用，对`list_editable`选项没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:47:20.810

也许问题是你应该从 django 的管理模型中继承你的自`MyUserAdmin`定义`UserAdmin`......

在这里你可以找到一个如何做到这一点的例子：[Customizing an Admin form in Django while also using autodiscover](https://stackoverflow.com/questions/471550/customizing-an-admin-form-in-django-while-also-using-autodiscover)

当您添加这样的更改时，您应该重新启动服务器（重新启动 manage.py 或 apache 或您正在使用的任何内容）

# c# - 转换查找 进入其他数据结构c#

> ID：11383384
> 
> 赞同：13
> 
> 时间：2012-07-08T13:07:41.253
> 
> 标签：c#, c#-4.0, lookup

我有一个

```
Lookup<TKey, TElement> 
```

其中 TElement 指的是一串单词。我想将 Lookup 转换为：

```
Dictionary<int ,string []> or List<List<string>> ? 
```

我已经阅读了一些关于使用

```
Lookup<TKey, TElement> 
```

但这还不足以让我理解。提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-08T13:10:27.683

您可以使用以下方法做到这一点：

*   [`Enumerable.ToDictionary<TSource, TKey>`](http://msdn.microsoft.com/en-us/library/bb549277.aspx)
*   [`Enumerable.ToList<TSource>`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)

假设您有一个包含多个单词的字符串的`Lookup<int, string>`调用`mylookup`，然后您可以将`IGrouping`值放入 a`string[]`并将整个内容打包到字典中：

```
var mydict = mylookup.ToDictionary(x => x.Key, x => x.ToArray()); 
```

**更新**

阅读了您的评论后，我知道您实际上想对查找进行什么操作（请参阅 ops[上一个问题](https://stackoverflow.com/questions/11378338/spliting-string-into-words-length-based-lists-c-sharp)）。您不必将其转换为字典或列表。只需直接使用查找：

```
var wordlist = " aa bb cc ccc ddd ddd aa ";
var lookup = wordlist.Trim().Split().Distinct().ToLookup(word => word.Length);

foreach (var grouping in lookup.OrderBy(x => x.Key))
{
    // grouping.Key contains the word length of the group
    Console.WriteLine("Words with length {0}:", grouping.Key);

    foreach (var word in grouping.OrderBy(x => x))
    {
        // do something with every word in the group
        Console.WriteLine(word);
    }
} 
```

此外，如果顺序很重要，您始终可以通过or扩展方法对`IEnumerable`s 进行排序。`OrderBy``OrderByDescending`

**编辑：**

看上面编辑过的代码示例：如果你想订购按键，只需使用`OrderBy`方法。同样的方式，您可以使用 . 按字母顺序排列单词`grouping.OrderBy(x => x)`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-08T13:16:05.663

查找是从键到值集合的映射集合。给定一个键，您可以获得相关值的集合：

```
TKey key;
Lookup<TKey, TValue> lookup;
IEnumerable<TValue> values = lookup[key]; 
```

在它实现[`IEnumerable<IGrouping<TKey, TValue>>`](http://msdn.microsoft.com/en-us/library/bb344977.aspx) 时，您可以使用可枚举的扩展方法将其转换为您想要的结构：

```
Lookup<int, string> lookup = //whatever
Dictionary<int,string[]> dict = lookup.ToDictionary(grp => grp.Key, grp => grp.ToArray());
List<List<string>> lists = lookup.Select(grp => grp.ToList()).ToList(); 
```

# c# - 带有 HTTPListener 的 Win7 服务在一个请求后停止响应

> ID：11383387
> 
> 赞同：2
> 
> 时间：2012-07-08T13:08:00.837
> 
> 标签：c#, http, windows-7, service, listener

我是一个新手 c# 开发人员 - 试图编写一个简单的 win7 服务。

该服务应启动 HTTPListener 并侦听传入的浏览器请求，当收到请求时，它会返回响应并继续侦听其他请求。我不需要处理并行性，因为一次不会超过一个请求（而且非常短）。

我使用了以下代码，但在第一次响应后服务停止响应。我可能在某个地方需要一个循环，但我不熟悉 API，所以我也可能对我正在做的事情有误。

感谢您的帮助。

```
 protected override void OnStart(string[] args)
    {
        HttpListener listener = new HttpListener();
        listener.Prefixes.Add("http://localhost:9999/");
        listener.Start();

        listener.BeginGetContext(new AsyncCallback(OnRequestReceive), listener);
     }

    private void OnRequestReceive(IAsyncResult result)
    {
        HttpListener listener = (HttpListener)result.AsyncState;
        HttpListenerContext context = listener.EndGetContext(result);
        HttpListenerResponse response = context.Response;
        byte[] buff = {1,2,3};

        response.Close(buff, true);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T18:13:39.637

您快到了！收到一个请求后，您需要开始监听另一个请求。

```
private void OnRequestReceive(IAsyncResult result) 
{ 
    HttpListener listener = (HttpListener)result.AsyncState; 

    HttpListenerContext context = listener.EndGetContext(result); 
    HttpListenerResponse response = context.Response; 
    byte[] buff = {1,2,3}; 

    response.Close(buff, true); 

    // ---> start listening for another request
    listener.BeginGetContext(new AsyncCallback(OnRequestReceive), listener); 
} 
```

# java - 由于签名和令牌，Twitter Oauth 失败

> ID：11383389
> 
> 赞同：0
> 
> 时间：2012-07-08T13:08:11.083
> 
> 标签：java, oauth, twitter, twitter-oauth

我正在尝试创建一个应用程序以从 twitter 进行身份验证，但出现以下错误：

```
Failed to validate oauth signature and token 
```

这是我的应用程序代码：

```
public class TwitCons {

    String sign_method ="HMAC-SHA1";

    public static String consumer_key ="^^^^^^^^^^^^^^^^^^^^";
    public static String consumer_secret="^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^";
    String request_uri = "https://api.twitter.com/oauth/request_token";
    String oauth_callback="http://127.0.0.1:8080/twitter/getToken";

    String getNonce(){
        Random ran = new Random(); 
        long nonce1 = ran.nextLong(); 

        Long nonce = Math.abs(new Long(nonce1)); 

        return nonce.toString();
    }

    String getTimestamp(){
        long time = System.currentTimeMillis();

        return String.valueOf(time/1000);
    }

    String getSignature(String request_uri ,String request_token,String nonce) throws UnsupportedEncodingException
    {
        String base="oauth_callback=http://127.0.0.1:8080/twitter/getToken&oauth_consumer_key="+consumer_key+"&oauth_nonce="+nonce+"&oauth_signature_method="+sign_method+"&oauth_timestamp="+getTimestamp()+"&oauth_token=&oauth_version=1.0";

        String baseString="POST&"+URLEncoder.encode(request_uri , "UTF-8")+"&"+URLEncoder.encode(base , "UTF-8");

        String signKey = consumer_secret +"&"+ request_token ;
        System.out.println(signKey +"\n"+baseString);

        try {
            SecretKeySpec signingKey = new SecretKeySpec(signKey.getBytes(),"HmacSHA1");
            Mac mac = Mac.getInstance(signingKey.getAlgorithm());
            mac.init(signingKey);
            byte[] rawHmac = mac.doFinal(baseString.getBytes());
            String result = new String(Base64.encodeBase64(rawHmac));
            System.out.println(URLEncoder.encode(result , "UTF-8"));
            return URLEncoder.encode(result , "UTF-8");
            //return result;

        } catch (GeneralSecurityException e) {
            return "";
        }

    }

} 
```

和

```
public class Twitter extends TwitCons{

    public void getRequest() throws IllegalArgumentException, HttpException, IOException
    {

        HttpClient client = new HttpClient();
        PostMethod post = new PostMethod("https://api.twitter.com/oauth/request_token");
        String nonce=getNonce();
        String header = "oauth_callback=\""+URLEncoder.encode(oauth_callback ,"UTF-8")+"\","+
            "oauth_consumer_key=\""+consumer_key +"\","+
            "oauth_nonce=\""+nonce + "\","+
            "oauth_signature=\""+getSignature(request_uri,"",nonce) + "\","+ 
            "oauth_signature_method=\""+sign_method + "\","+
            "oauth_timestamp=\""+getTimestamp() + "\","+
            "oauth_version=\"1.0\""  ;

        post.addRequestHeader("Authorization", "OAuth "+header);
        client.executeMethod(post);

        System.out.println(post.getResponseBodyAsString()+"\n"+post.getRequestHeader("Authorization"));

    } 
```

类有方法 getRequest 用于发出 twitter 请求以获取 request_token 和 token_secret

和第二类 TwitCons 有不同的方法和常量来获取请求令牌

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:42:56.733

在`Twitter.getRequest()`中，您的标题似乎错误。每个参数的值必须用双引号 ( `"`) 括起来：

```
StringBuilder headerBuilder = new StringBuilder("OAuth ");

headerBuilder.append("oauth_callback=\"").append(oauth_callback).append("\", ");
headerBuilder.append("oauth_consumer_key=\"").append(consumer_key).append("\", ");
headerBuilder.append("oauth_nonce=\"").append(nonce).append("\", ");
headerBuilder.append("oauth_signature=\"").append(getSignature(request_uri,"",nonce)).append("\", ");
headerBuilder.append("oauth_signature_method=\"").append(sign_method).append("\", ");
headerBuilder.append("oauth_timestamp=\"").append(getTimestamp()).append("\", ");
headerBuilder.append("oauth_version=\"1.0\"");

String header = headerBuilder.toString(); 
```

有关更多详细信息，请参阅 Twitter API 中的相应页面：[https ://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request)

**编辑**：代码已修复，因为逗号前没有任何空格。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-08T14:56:25.617

~~你`oauth_token`在你的`String base`. 请参阅[https://dev.twitter.com/docs/auth/3-legged-authorization](https://dev.twitter.com/docs/auth/3-legged-authorization)了解如何获得一个（如果您还不知道这一点并且没有忘记将它放在您的基本字符串中；））。~~

可能是您的签名计算错误，因为您包含`&oauth_token=`在您的`base`字符串中，但该密钥不是您请求的一部分。[OAuth 1.0 规范](http://oauth.net/core/1.0/#anchor14)只是说：

> 签名基本字符串是请求元素的一致可重现串联成单个字符串。

只删除字符串的那部分可能值得一试。

**更新：**

您可能必须在 Authorization 标头中对回调 URL 进行 urlencode，按字母顺序排列并将参数放在引号中，如 @air-dex 推荐的那样。尝试这个：

```
String oauth_callback = "http://127.0.0.1:8080/twitter/getToken";
String oauth_callback_encoded = URLEncoder.encode(oauth_callback, "UTF-8"); 
```

然后

```
String header = "oauth_callback=\"" + oauth_callback_encoded + "\", " +
            "oauth_consumer_key=\"" + consumer_key + "\", " +
            "oauth_nonce=\"" + nonce + "\", " +
            "oauth_signature=\"" + getSignature(request_uri, "", nonce) + "\", " +
            "oauth_signature_method=\"" + sign_method + "\", " +
            "oauth_timestamp=\"" + getTimestamp() + "\", " +
            "oauth_version=\"1.0\""; 
```

和

```
String base = "oauth_consumer_key=" + consumer_key + 
            "&oauth_nonce=" + nonce + 
            "&oauth_signature_method=" + sign_method + 
            "&oauth_timestamp=" + getTimestamp() +
            "&oauth_version=1.0"; 
```

# php - 无法使用 JQuery 循环 XML 解析

> ID：11383391
> 
> 赞同：0
> 
> 时间：2012-07-08T13:08:39.850
> 
> 标签：php, jquery, xml, parsing, post

我正在尝试以这种方式从 XML 中提取文本：
[文本] [文本中的选择] [文本继续] [另一个文本] [另一个选择] [另一个文本继续]

我已经设法部分地做到了这一点，所以它提取了第一段和第一段的选择，但它没有提取第二段的选择，不知道为什么。（在示例中，第一段和第二段的选择相同）。

此外，我正在使用 AJAX 将所选选项的索引发布到 php 和 mysql，但我不知道如何将选项分开。（如：第一选择-->1；第二选择-->3；等等）

我的代码是：

```
function parseXml(xml)
{
var myArray = [];
var i = 0;

//Megkeressük az összes paragrafust
$(xml).find("Paragraph").each(function()
{   
    $(this).find("text").each(function(){
    {

        $("#wrapper").append('<div id="text">' + $(this).text()) + '</div><br />';
    $("#text").append('<div id="choice"></div>');   

    }       
});         
});

//Each paragraph
$(xml).find("Paragraph").each(function()
{  //Megkeressük az összes választékot  
$(this).find("choice").each(function()
{
    myArray.push($(this).text());

 });
});

 $("#choice").append('&nbsp;' + myArray[i] + '&nbsp;');
    sendValue(i); 

$("#choice").click(function() {

    if(i + 1 >=  myArray.length)
    {
            i=0;
            $("#choice").html('&nbsp;' + myArray[i] + '&nbsp;');
            sendValue(i);   
    }       

    else
    {       i++;
            $("#choice").html('&nbsp;' + myArray[i] + '&nbsp;');        
            sendValue(i); 
    }

});

function sendValue(str){

// post(file, data, callback, type); (only "file" is required)
$.post(

"ajax.php", //Ajax file

{ sendValue: str },  // create an object will all values

//function that is called when server returns a value.
function(data){
    $('#i').text(data.returnValue);
}, 

//How you want the data formated when it is returned from the server.
"json"
);

}

} 
```

PHP：

```
<?php 

//Get Post Variables. The name is the same as 
//what was in the object that was sent in the jQuery
if (isset($_POST['sendValue'])){
$value = $_POST['sendValue'];   
}else{
$value = "";
}

//Because we want to use json, we have to place things in an array and encode it for json.
//This will give us a nice javascript object on the front side.
 echo json_encode(array("returnValue"=>"This is returned from PHP : ".$value));  

?> 
```

XML：

```
<?xml version="1.0" encoding="utf-8" ?>
<Page1>
<Paragraph>
<text>This is the first text in the</text><choice>paragraph</choice><choice>book</choice><choice>mádörfákör</choice><choice>asd</choice><text>after which the text continues.</text>
</Paragraph>
<Paragraph>
<text>This is the SECOND text in the</text><choice>paragraph</choice><choice>book</choice><choice>mádörfákör</choice><choice>asd</choice><text>after which the second text continues.</text>
</Paragraph>
</Page1> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:23:15.667

这样的事情怎么样？

```
$(xml).find("Paragraph").each(function() {
    var paragraph = $('<div class="paragraph"></div>');
    paragraph.appendTo('#wrapper');

    var choiceCount = 0;
    $(this).find("text,choice").each(function() {
        if ($(this).get(0).tagName == 'TEXT') {
            $('<span class="paragraph-text"></span>').appendTo(paragraph).text($(this).text());
        } else {
            var choice = $('<span class="paragraph-choice"></span>').appendTo(paragraph).text($(this).text());
            (function(choiceCount) {
                choice.click(function() {
                    sendValue(choiceCount);
                });
            })(choiceCount);
            choiceCount++;
        }
    });
}); 
```

保存（和工作）在这里：http: [//jsfiddle.net/XSuBU/1/](http://jsfiddle.net/XSuBU/1/)

# c# - 在 wpf 中创建退格键行为的问题

> ID：11383392
> 
> 赞同：0
> 
> 时间：2012-07-08T13:08:49.617
> 
> 标签：c#, wpf

```
public partial class Backspace : Window
{
    Control TextBoxDetails;
    TextBox BehaveTextbox;
    public Backspace()
    {
        this.InitializeComponent();

        // Insert code required on object creation below this point.
    }

    private void btn_t_Click(object sender, RoutedEventArgs e)
    {
        BehaveTextbox = TextBoxDetails as TextBox;
        if (TextBoxDetails != null)
        {
            var _CareIndex = BehaveTextbox.CaretIndex;
            BehaveTextbox.Text = BehaveTextbox.Text.Insert(_CareIndex, "      ");
            BehaveTextbox.Focus();
            BehaveTextbox.CaretIndex = _CareIndex + 6;
        }
    }

    private void btn_s_Click(object sender, RoutedEventArgs e)
    {
        BehaveTextbox = TextBoxDetails as TextBox;
        if (TextBoxDetails != null)
        {
            var _CareIndex = BehaveTextbox.CaretIndex;
            BehaveTextbox.Text = BehaveTextbox.Text.Insert(_CareIndex, " ");
            BehaveTextbox.Focus();
            BehaveTextbox.CaretIndex = _CareIndex + 1;
        }
    }

    private void btn_bs_Click(object sender, RoutedEventArgs e)
    {
        BehaveTextbox = TextBoxDetails as TextBox;

        if (TextBoxDetails != null)
        {

            string _CurrentValue = BehaveTextbox.Text;
            var _CareIndex = BehaveTextbox.CaretIndex;

            if (_CareIndex > 0)
            {
                string _Backspace = _CurrentValue.Remove(_CareIndex - 1, 1);
                BehaveTextbox.Text = _Backspace;
                BehaveTextbox.Focus();
                BehaveTextbox.CaretIndex = _CareIndex - 1;
            }
        }
    }

    private void txt_result_GotFocus(object sender, RoutedEventArgs e)
    {
        TextBoxDetails = (Control)sender;
    }
} 
```

![设计](../Images/1a562ce61b684c1e5b71b6dd0f2284e6.png)

在上图中的文本框中有一些文本值。我通过单击 SPACE 按钮 (btn_s) 3 次在**111**和**222**之间放置 3 个空格，然后通过单击 TAB 按钮 (btn_t) 2 次在**222**和**333之间放置 2 个选项卡。**

当我单击退格按钮（btn_bs）时，每次只会清除一个空格或字母。但是我想要做的是，当单击退格按钮（btn_bs）时，如果文本框中有标签，那应该删除。如果文本框中有空格，那将删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:30:45.677

试试这个：

```
public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        Control TextBoxDetails;
        TextBox BehaveTextbox;

        private void btn_t_Click(object sender, RoutedEventArgs e)
        {
            BehaveTextbox = TextBoxDetails as TextBox;
            if (TextBoxDetails != null)
            {
                var _CareIndex = BehaveTextbox.CaretIndex;
                BehaveTextbox.Text = BehaveTextbox.Text.Insert(_CareIndex, "\t");
                BehaveTextbox.Focus();
                BehaveTextbox.CaretIndex = _CareIndex + 1;
            }
        }

        private void btn_s_Click(object sender, RoutedEventArgs e)
        {
            BehaveTextbox = TextBoxDetails as TextBox;
            if (TextBoxDetails != null)
            {
                var _CareIndex = BehaveTextbox.CaretIndex;
                BehaveTextbox.Text = BehaveTextbox.Text.Insert(_CareIndex, " ");
                BehaveTextbox.Focus();
                BehaveTextbox.CaretIndex = _CareIndex + 1;
            }
        }

        private void btn_bs_Click(object sender, RoutedEventArgs e)
        {
            BehaveTextbox = TextBoxDetails as TextBox;

            if (TextBoxDetails != null)
            {

                string _CurrentValue = BehaveTextbox.Text;
                var _CareIndex = BehaveTextbox.CaretIndex;

                if (_CareIndex > 0)
                {
                    string _Backspace = _CurrentValue.Remove(_CareIndex - 1, 1);
                    BehaveTextbox.Text = _Backspace;
                    BehaveTextbox.Focus();
                    BehaveTextbox.CaretIndex = _CareIndex - 1;
                }
            }
        }

        private void txt_result_GotFocus(object sender, RoutedEventArgs e)
        {
            TextBoxDetails = (Control)sender;
        }
    } 
```

# ruby-on-rails - twitter-bootstrap-rails gem：字体真棒支持

> ID：11383396
> 
> 赞同：1
> 
> 时间：2012-07-08T13:09:28.657
> 
> 标签：ruby-on-rails, twitter-bootstrap, twitter-bootstrap-rails, font-awesome

根据[更新日志](https://github.com/seyhunak/twitter-bootstrap-rails/#changelog) `twitter-bootstrap-rails`gem 支持自 v.2.0.9 以来的[字体真棒。](http://fortawesome.github.com/Font-Awesome/)那么如何在项目中开启这个支持呢？默认情况下，我无法使用字体真棒图标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:04:08.663

现在`twitter-bootstrap-rails`默认支持它。

只需将图标添加到您的 html 代码中，如下所示：

```
<i class="icon-refresh"></i> 
```

更多图标和示例在这里： http: [//fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T11:43:28.473

*twitter-bootstrap-rails* gem 具有更多依赖项，因为 twitter bootstrap css 使用 LESS 。为了在您的项目中打开 font-awesome，您需要添加

`gem 'less-rails'`

`gem 'therubyracer'`

在`:assets`您的*Gemfile*组中。之后，您就可以在您的项目中使用它了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T15:05:28.303

请参阅他们 GitHub 项目中的[Using Font Awesome wiki 页面](https://github.com/seyhunak/twitter-bootstrap-rails/wiki/Using-Font-Awesome)。它比 v2.0.9 版本更新，所以我认为这是当前推荐的做法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T18:46:24.207

您可以在 HTML 代码中添加图标，如下所示：

```
<i class="icon-search"></i> 
```

然而，如果你想在 Rails link_to helper 中放置图标，请使用 ilink_to helper 方法。请按照以下步骤操作：

1) 将 gem 添加到 Gemfile 中的资产组： gem 'less-rails-fontawesome'

2）运行*捆绑安装*：

3) 确保*@import 'fontawesome';* 在 app/assets/stylesheetes/bootstrap_and_overrides.css.less 中未注释。

4) 使用 *ilink_to* 助手而不是 *link_to* 助手。

```
<%= ilink_to "upload-alt", "Edit", edit_post_path(post), class: 'btn btn-mini' %> 
```

Obs：在链接文本之前删除图标名称图标前缀

这些说明在这里：[https ://github.com/wbzyl/less-rails-fontawesome](https://github.com/wbzyl/less-rails-fontawesome)

# c++ - 使用 operator new/malloc 分配的内存块能否在程序执行结束后持续存在？

> ID：11383401
> 
> 赞同：14
> 
> 时间：2012-07-08T13:09:59.760
> 
> 标签：c++, c, dynamic-memory-allocation

> **可能重复：**
> [当您退出 C 应用程序时，malloc-ed 内存是否会自动释放？](https://stackoverflow.com/questions/2213627/when-you-exit-a-c-application-is-the-malloc-ed-memory-automatically-freed)

当我在阅读有关在 C/C++ 中的动态内存分配方面分别使用 delete/free 的强制性时，我想到了这个问题。我想如果内存分配在我的程序执行终止之后仍然存在，那么是的，它是强制性的；否则，我为什么要担心释放分配的空间？操作系统不会在进程终止时自动释放它吗？我有多正确？我的问题是可以

```
int *ip = new int(8); 
```

在我的程序终止之后仍然存在？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-08T13:17:12.953

简短的回答：没有。

长答案：不。C++ 永远不会持久化内存，除非你努力让它这样做。释放内存的原因是这样的：

如果你不释放内存，而是继续分配它，你会在某个时候用完。一旦你用完了，几乎任何事情都可能发生。在 Linux 上，也许 OOM 杀手被激活并且您的进程被杀死。也许操作系统将您完全分页到磁盘。如果您使用足够的内存，也许您会给 Windows 盒子一个蓝屏。它几乎可以被认为是未定义的行为。此外，如果您泄漏内存，它只是坐在那里，未使用，未释放，并且在您的进程终止之前没有人可以使用它。

还有一个原因。当您向分配器释放内存时，分配器可能会保留它，但只需将其标记为可用。这意味着下次你需要记忆时，它已经在那里等着你了。这意味着更少调用内核来请求内存，从而提高性能，因为上下文切换非常低效。

编辑：C 和 C++ 标准甚至不保证内存将在终止后由操作系统清理。许多操作系统和编译器可能，但不能保证。尽管如此，所有主要的桌面和移动操作系统（可能 DOS 和一些非常古老的嵌入式系统除外）都会在它之后清理进程内存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-08T13:17:44.413

您不需要在程序退出之前将内存释放回操作系统，因为操作系统将在进程终止时回收已分配给您的进程的所有内存。如果您分配一个直到您的过程完成所需的对象，您不必释放它。

话虽如此，释放内存仍然是一个好主意：如果您的程序大量使用动态内存，您几乎肯定需要运行内存分析器来检查内存泄漏。分析器会告诉你最后没有释放的块，你需要记住忽略它们。将泄漏次数保持为零会好得多，原因与消除 100% 编译器警告的好处相同。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-08T13:18:54.427

1）当您请求时释放您的内存（如果不在堆中）。内存泄漏从来都不是一件好事。如果它现在不伤害你，它可能会在路上。

2) C 或 C++ 不保证您的操作系统会为您清理内存。有一天，您可能会在一个实际上没有的系统上进行编程。或者更糟糕的是，您可能正在将不关心内存泄漏的代码移植到这个新平台。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-08T14:50:37.087

历史记录：旧 Amiga 计算机（“AmigaOS”）使用的操作系统并没有像现在假设的那样具有完整的内存管理（可能在 Amiga 不再流行时发布的一些更高版本除外）。

CPU 没有 MMU（内存管理单元），因此每个进程都可以访问所有物理内存。因为当两个进程想要共享一些信息时，他们可以交换指针。操作系统甚至鼓励这种做法，它在其消息传递方案中使用了这种技术。

但是，这使得无法跟踪哪个进程拥有哪一部分内存。因此，操作系统没有释放已完成进程的内存（或任何其他资源，事实上）。因此，释放所有分配的内存至关重要。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-08T13:16:51.667

任何好的操作系统都应该在进程退出时清理所有资源；“总是释放你分配的东西”的原则有两个好处：

1.  如果您的程序泄漏内存但从未退出（守护程序、服务器等），持续泄漏内存将严重浪费 RAM。

2.  您不应该推迟释放所有内存，直到您的程序终止（就像 Firefox 有时那样 - 注意到它需要多长时间才能退出？） - 关键是最小化您分配内存的时间；即使您的程序继续运行，您也应该在完成后立即释放分配的 RAM。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-08T13:20:58.647

如果您非常确定在程序的生命周期内***永远***不需要释放内存，从技术上讲，跳过释放/删除可能是可以的。Linux、Windows 等操作系统将在进程结束时释放分配的内存。但在实践中，您几乎永远不能假设您分配的内存不需要在进程的生命周期内释放。牢记代码的可重用性、可维护性和可扩展性，最好始终在适当的位置释放分配的所有内容。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-08T13:15:17.553

这是个有趣的问题。我最初对您的问题的看法是您是否可以在程序完成后访问内存，但是在第二次阅读之后，我看到您想知道为什么应该释放内存。

您释放动态分配的内存，因为如果您不这样做，操作系统和其他进程将耗尽，您将不得不重新启动。

我认为您可能想在程序完成后访问该内存，所以我的猜测是，即使您将动态分配的内存块的起始地址和长度写到控制台或文件中，该地址也可能无效程序完成后。

那是因为当你的程序运行时，你有一个虚拟页面地址，在程序完成后，如果没有内核权限，你可能无法访问该地址。或者，还有其他原因。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-08T13:17:14.280

它肯定不会在程序终止之后继续存在。这个想法是在不再需要时释放内存，这样您的程序就不会浪费内存（它不会消耗超过它真正需要的内存），或者更糟糕的是，不会耗尽内存（取决于您的分配模式）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-08T13:14:47.503

你必须担心它，因为想象你在很多地方分配了大量内存而不是释放它。一旦分配了内存，它就会占用一部分无法再分配的内存。这将导致可用内存量每次都变得越来越小，因为您无法释放它。在某些时候，内存将被耗尽。即使内存在程序终止时被释放，想象你的程序一次运行几个星期，不断地分配内存但从不释放它。内存是一种有限资源，使用动态分配时您需要负责。

# android - 调用 notifyDataSetChanged() 后，Android Gallery 不会清除不必要的视图

> ID：11383410
> 
> 赞同：-2
> 
> 时间：2012-07-08T13:11:55.193
> 
> 标签：android, android-layout, android-view, android-adapter

我有一个我扩展的自定义 AdapterView，它承载了 RelativeLayouts，它又包含显示数据的 Gallery 视图。需要为父适配器视图中的每个项目替换该数据。
在父AdapterView的适配器类的实现中，
我需要在getView()方法中更改嵌套Gallery的适配器，当我得到一个回收的convertView参数时（父适配器视图中的每一项对应不同的数据集显示在嵌套的画廊视图中）。

此代码尝试在内部更改适配器本身的数据集。假设之前的数据集有 3 个项目，而新的数据集有 1 个，它将更新数据集中的第一个视图，但会将额外的视图（它应该删除）留在原处。无法滚动到多余的不必要的视图（画廊的行为就好像它只有一个视图，而实际上它没有）。

截屏：
![在此处输入图像描述](../Images/af5f18fd4b11c5ed4cb46c12d42b5d8b.png)

代码：

获取视图：

```
 @Override
    protected View getView(int position, View convertView) {
        CollectionGalleryAdapter sla;

        IMediaItem item = mCollection.get(position);

        ViewHolder holder = null;

        if (convertView == null) {
            convertView = View.inflate(mContext, layout.stream_item, null);

            holder = new ViewHolder();
            convertView.setTag(holder);

            holder.mGallery = (Gallery) convertView
                    .findViewById(android.R.id.list);
            holder.mTime = (TextView) convertView.findViewById(id.txt_time);
            holder.mTitle = (TextView) convertView.findViewById(id.title);
            holder.mBg = (ImageView) convertView.findViewById(id.thumb);

            sla = new CollectionGalleryAdapter(mContext,
                    (MediaCollection) item.getExtra(), App.instance()
                            .getImageLoader(), holder.mGallery);
            final View fv = convertView;
            sla.setBitmapLoadedListener(new OnBitmapLoadedListener() {

                @Override
                public void onBitmapLoaded(View v, int position, Bitmap b) {
                    mStreamView.invalidateChild(fv);
                }
            });
            holder.mGallery.setAdapter(sla);
        } else {
            holder = (ViewHolder) convertView.getTag();

            sla = (CollectionGalleryAdapter) holder.mGallery.getAdapter();
            sla.setCollection((MediaCollection) item.getExtra());
        }
    } 
```

CollectionGalleryAdapter.setCollection（注意对 notifyDataSetChanged 的​​调用）

```
public void setCollection(MediaCollection collection) {
    mCollection = collection;
    mAdapterView.setSelection(0);
    notifyDataSetChanged(); // *****
    clearLoaderQueue();
    postLoad(); // load bitmaps for gallery images
} 
```

自定义适配器视图：

```
public class StreamView extends AdapterView<Adapter> implements
        OnScrollListener {

    /** Represents an invalid child index */
    private static final int INVALID_INDEX = -1;

    /** Distance to drag before we intercept touch events */
    private static final int TOUCH_SCROLL_THRESHOLD = 10;

    /** Children added with this layout mode will be added below the last child */
    private static final int LAYOUT_MODE_BELOW = 0;

    /** Children added with this layout mode will be added above the first child */
    private static final int LAYOUT_MODE_ABOVE = 1;

    /** User is not touching the list */
    private static final int TOUCH_STATE_RESTING = 0;

    /** User is touching the list and right now it's still a "click" */
    private static final int TOUCH_STATE_CLICK = 1;

    /** User is scrolling the list */
    private static final int TOUCH_STATE_SCROLL = 2;

    private static final int BASE_ALPHA = 0x22;

    private static final float HEIGHT_FACTOR = 1.7f;

    /** The adapter with all the data */
    private Adapter mAdapter;

    /** Current touch state */
    private int mTouchState = TOUCH_STATE_RESTING;

    /** X-coordinate of the down event */
    private int mTouchStartX;

    /** Y-coordinate of the down event */
    private int mTouchStartY;

    /**
     * The top of the first item when the touch down event was received
     */
    private int mListTopStart;

    /** The current top of the first item */
    private int mListTop;

    /**
     * The offset from the top of the currently first visible item to the top of
     * the first item
     */
    private int mListTopOffset;

    /** The adaptor position of the first visible item */
    private int mFirstItemPosition;

    /** The adaptor position of the last visible item */
    private int mLastItemPosition;

    /** A list of cached (re-usable) item views */
    private final LinkedList<View> mCachedItemViews = new LinkedList<View>();

    /** Used to check for long press actions */
    private Runnable mLongPressRunnable;

    /** Reusable rect */
    private Rect mRect = new Rect();

    private Canvas mCanvas = new Canvas();

    private Paint mPaint;

    private ElasticScroller mScroller;

    private int mChildHeight;
    private int mLayoutHeight;

    private DisplayMetrics mDisplayMetrics;

    // private WeakHashMap<View, Bitmap> mDrawingCache;
    // private WeakHashMap<View, Boolean> mInvalidateMap;

    /**
     * Constructor
     * 
     * @param context
     *            The context
     * @param attrs
     *            Attributes
     */
    public StreamView(final Context context, final AttributeSet attrs) {
        super(context, attrs);
        mScroller = new ElasticScroller(new Handler(), this,
                ElasticScroller.AXIS_VERTICAL, 0, getHeight() / 3);
    }

    View mMotionTarget;

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        final int action = ev.getAction();
        final float xf = ev.getX();
        final float yf = ev.getY();
        final Rect frame = mRect;

        if (action == MotionEvent.ACTION_DOWN) {
            if (mMotionTarget != null) {
                // this is weird, we got a pen down, but we thought it was
                // already down!
                // XXX: We should probably send an ACTION_UP to the current
                // target.
                mMotionTarget = null;
            }
            // If we're disallowing intercept or if we're allowing and we didn't
            // intercept
            if (!onInterceptTouchEvent(ev)) {
                // reset this event's action (just to protect ourselves)
                ev.setAction(MotionEvent.ACTION_DOWN);
                // We know we want to dispatch the event down, find a child
                // who can handle it, start with the front-most child.
                final int scrolledXInt = (int) xf;
                final int scrolledYInt = (int) yf;
                final int count = getChildCount();
                for (int i = count - 1; i >= 0; i--) {
                    final View child = getChildAt(i);
                    final int actualtop = getActualChildTop(child);
                    frame.set(0, 0, getWidth(), mChildHeight);
                    frame.offset(0, actualtop);
                    if (frame.contains(scrolledXInt, scrolledYInt)) {
                        // offset the event to the view's coordinate system
                        ev.setLocation(xf, yf - actualtop);
                        if (child.dispatchTouchEvent(ev)) {
                            // Event handled, we have a target now.
                            child.setTag(string.tag_invalidate, true);
                            // mInvalidateMap.put(child, true);
                            invalidate();
                            mMotionTarget = child;
                            return true;
                        }
                        // The event didn't get handled, try the next view.
                        // Don't reset the event's location, it's not
                        // necessary here.
                    }
                }
            }
        }

        boolean isUpOrCancel = (action == MotionEvent.ACTION_UP)
                || (action == MotionEvent.ACTION_CANCEL);

        // The event wasn't an ACTION_DOWN, dispatch it to our target if
        // we have one.
        final View target = mMotionTarget;
        if (target == null) {
            // We don't have a target, this means we're handling the
            // event as a regular view.
            ev.setLocation(xf, yf);
            return onTouchEvent(ev);
        }

        // if have a target, see if we're allowed to and want to intercept its
        // events
        if (onInterceptTouchEvent(ev)) {
            ev.setAction(MotionEvent.ACTION_CANCEL);
            ev.setLocation(xf, yf - getActualChildTop(mMotionTarget));
            if (!target.dispatchTouchEvent(ev)) {
                // target didn't handle ACTION_CANCEL. not much we can do
                // but they should have.
            } else {
                target.setTag(string.tag_invalidate, true);
            }
            // clear the target
            mMotionTarget = null;
            // Don't dispatch this event to our own view, because we already
            // saw it when intercepting; we just want to give the following
            // event to the normal onTouchEvent().
            return true;
        }

        if (isUpOrCancel) {
            mMotionTarget = null;
        }

        // finally offset the event to the target's coordinate system and
        // dispatch the event.
        ev.setLocation(xf, yf - getActualChildTop(target));

        if (target.dispatchTouchEvent(ev)) {
            target.setTag(string.tag_invalidate, true);
            invalidate();
            return true;
        } else {
            return false;
        }
    }

    MotionEvent mDownEvent;

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        int index = getContainingChildIndex((int) ev.getX(), (int) ev.getY());
        switch (ev.getAction()) {
        case MotionEvent.ACTION_DOWN:
            mTouchStartX = (int) ev.getX();
            mTouchStartY = (int) ev.getY();
            mTouchState = TOUCH_STATE_CLICK;
            mDownEvent = MotionEvent.obtain(ev);
            return false;
        case MotionEvent.ACTION_MOVE:
            int ydistance = (int) Math.abs(ev.getY() - mTouchStartY);
            int xdistance = (int) Math.abs(ev.getX() - mTouchStartX);
            if ((index == getChildCount() - 1 && ydistance <= xdistance)
                    || ydistance <= ViewConfiguration.getTouchSlop()) {
                return false;
            } else {
                mScroller.onTouch(this, mDownEvent);
                mTouchState = TOUCH_STATE_SCROLL;
                return true;
            }
        case MotionEvent.ACTION_UP:
            if (index != getChildCount() - 1
                    && mTouchState == TOUCH_STATE_CLICK) {
                mScroller
                        .scrollByDistance(
                                (Integer) getChildAt(index).getTag(
                                        string.tag_top), 400);
                return false;
            }
            // mTouchState = TOUCH_STATE_RESTING;
            return false;
        default:

            break;
        }
        return super.onInterceptTouchEvent(ev);
    }

    @Override
    public void setAdapter(final Adapter adapter) {
        mAdapter = adapter;
        removeAllViewsInLayout();
        requestLayout();
    }

    @Override
    public Adapter getAdapter() {
        return mAdapter;
    }

    @Override
    public void setSelection(final int position) {
        throw new UnsupportedOperationException("Not supported");
    }

    @Override
    public View getSelectedView() {
        throw new UnsupportedOperationException("Not supported");
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        mScroller.onTouch(this, event);
        return true;
    }

    /*
     * @Override public boolean onInterceptTouchEvent(final MotionEvent event) {
     * switch (event.getAction()) { case MotionEvent.ACTION_DOWN:
     * startTouch(event); return false;
     * 
     * case MotionEvent.ACTION_MOVE: return startScrollIfNeeded(event);
     * 
     * default: endTouch(); return false; } return true; }
     * 
     * @Override public boolean onTouchEvent(final MotionEvent event) { /* if
     * (getChildCount() == 0) { return false; } switch (event.getAction()) {
     * case MotionEvent.ACTION_DOWN: startTouch(event); break;
     * 
     * case MotionEvent.ACTION_MOVE: if (mTouchState == TOUCH_STATE_CLICK) {
     * startScrollIfNeeded(event); } if (mTouchState == TOUCH_STATE_SCROLL) {
     * scrollList((int) event.getY() - mTouchStartY); } break;
     * 
     * case MotionEvent.ACTION_UP: if (mTouchState == TOUCH_STATE_CLICK) {
     * clickChildAt((int) event.getX(), (int) event.getY()); } endTouch();
     * break;
     * 
     * default: endTouch(); break; } return true; }
     */
    @Override
    protected void onLayout(final boolean changed, final int left,
            final int top, final int right, final int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        // if we don't have an adapter, we don't need to do anything
        if (mAdapter == null) {
            return;
        }

        mLayoutHeight = bottom - top;

        if (getChildCount() == 0) {
            mLastItemPosition = -1;
            fillListDown(mListTop, 0);
        } else {
            final int offset = mListTop
                    + mListTopOffset
                    - ((Integer) getChildAt(getChildCount() - 1).getTag(
                            string.tag_top));
            removeNonVisibleViews(offset);
            fillList(offset);
        }

        positionItems(changed);
        invalidate();
    }

    @Override
    protected boolean drawChild(Canvas canvas, View child, long drawingTime) {
        if (mTouchState != TOUCH_STATE_SCROLL) {
            if ((Integer) child.getTag(string.tag_top) == 0) {
                invalidate();
                child.draw(canvas);
                return true;
            }
        }

        Bitmap b = (Bitmap) child.getTag(string.tag_drawing_cache);// child.getDrawingCache();
        Boolean invalidated = (Boolean) child.getTag(string.tag_invalidate);
        if (b == null || (invalidated != null && invalidated == true)) {
            if (b == null) {
                do {
                    try {
                        b = Bitmap.createBitmap(getWidth(), mChildHeight,
                                Config.ARGB_8888);
                        break;
                    } catch (OutOfMemoryError e) {
                        System.gc();
                    }
                } while (App.instance(getContext()).freeCacheMemory());
                if (b == null) {
                    return false;
                }
            } else {
                b.eraseColor(Color.TRANSPARENT);
            }
            mCanvas.setBitmap(b);
            child.draw(mCanvas);
            child.setTag(string.tag_drawing_cache, b);
            child.setTag(string.tag_invalidate, false);
        }

        if (mPaint == null) {
            mPaint = new Paint();
        }

        if (mDisplayMetrics == null) {
            mDisplayMetrics = getResources().getDisplayMetrics();
        }

        final int top = (Integer) child.getTag(string.tag_top);
        final int cheight = mChildHeight;

        final int height = getHeight();
        final int bottom = height - cheight;

        final float x = Math.min(1f, (float) top / (height * HEIGHT_FACTOR));
        final float y = (float) top / cheight;

        final int newtop;

        final float t = (float) (1 - (Math
                .pow((1 - (Math.min(1f, x * 1.2))), 2)));

        if (x >= 0) {
            if (x <= 1f) {
                newtop = (int) (bottom * t);
            } else {
                newtop = bottom;
            }
        } else {
            newtop = (int) ((cheight - mDisplayMetrics.density * 65) * y);
        }

        final int alpha = BASE_ALPHA
                + (int) ((255 - BASE_ALPHA) * (x < 0 ? 1f : (1f - t)));
        mPaint.setColorFilter(new LightingColorFilter(alpha | (alpha << 8)
                | (alpha << 16), 0));
        mPaint.setAlpha((int) (255 * (x >= 0.8 ? (float) Math.pow(
                1 - (x - 0.8) / 0.2, 1 / 2f) : (x >= 0 ? 1f : 1f - Math.pow(y,
                4)))));
        canvas.drawBitmap(b, 0, newtop, mPaint);

        return false;
    }

    private int getActualChildTop(View child) {
        final int top = (Integer) child.getTag(string.tag_top);
        final int cheight = mChildHeight;

        final int height = getHeight();
        final int bottom = height - cheight;

        final float x = Math.min(1f, (float) top / (height * HEIGHT_FACTOR));
        final float y = (float) top / cheight;

        final float t = (float) (1 - (Math
                .pow((1 - (Math.min(1f, x * 1.2))), 2)));

        if (x >= 0) {
            if (x <= 1f) {
                return (int) (bottom * t);
            } else {
                return bottom;
            }
        } else {
            return (int) ((cheight - mDisplayMetrics.density * 65) * y);
        }
    }

    /**
     * Returns the index of the child that contains the coordinates given.
     * 
     * @param x
     *            X-coordinate
     * @param y
     *            Y-coordinate
     * @return The index of the child that contains the coordinates. If no child
     *         is found then it returns INVALID_INDEX
     */
    private int getContainingChildIndex(final int x, final int y) {
        if (mRect == null) {
            mRect = new Rect();
        }
        for (int index = getChildCount() - 1; index >= 0; index--) {
            View child = getChildAt(index);
            mRect.set(0, 0, getWidth(), mChildHeight);
            mRect.offset(0, getActualChildTop(child));
            if (mRect.contains(x, y)) {
                return index;
            }
        }
        return INVALID_INDEX;
    }

    /**
     * Removes view that are outside of the visible part of the list. Will not
     * remove all views.
     * 
     * @param offset
     *            Offset of the visible area
     */
    private void removeNonVisibleViews(final int offset) {
        // We need to keep close track of the child count in this function. We
        // should never remove all the views, because if we do, we loose track
        // of were we are.
        int childCount = getChildCount();

        // if we are not at the bottom of the list and have more than one child
        if (mLastItemPosition != mAdapter.getCount() - 1 && childCount > 1) {
            // check if we should remove any views in the top
            View firstChild = getChildAt(childCount - 1);
            while (firstChild != null
                    && ((Integer) firstChild.getTag(string.tag_top))
                            + mChildHeight + offset <= 0) {
                // remove the top view
                removeViewInLayout(firstChild);
                childCount--;
                mCachedItemViews.addLast(firstChild);
                firstChild.setTag(string.tag_invalidate, true);
                mFirstItemPosition++;

                // update the list offset (since we've removed the top child)
                mListTopOffset += firstChild.getMeasuredHeight();

                // Continue to check the next child only if we have more than
                // one child left
                if (childCount > 1) {
                    firstChild = getChildAt(childCount - 1);
                } else {
                    firstChild = null;
                }
            }
        }

        // if we are not at the top of the list and have more than one child
        if (mFirstItemPosition != 0 && childCount > 1) {
            // check if we should remove any views in the bottom
            View lastChild = getChildAt(0);
            while (lastChild != null
                    && ((Integer) lastChild.getTag(string.tag_top)) + offset > getHeight()
                            * HEIGHT_FACTOR) {
                // remove the bottom view
                removeViewInLayout(lastChild);
                childCount--;
                mCachedItemViews.addLast(lastChild);
                lastChild.setTag(string.tag_invalidate, true);
                mLastItemPosition--;

                // Continue to check the next child only if we have more than
                // one child left
                if (childCount > 1) {
                    lastChild = getChildAt(0);
                } else {
                    lastChild = null;
                }
            }
        }
    }

    /**
     * Fills the list with child-views
     * 
     * @param offset
     *            Offset of the visible area
     */
    private void fillList(final int offset) {
        if (mChildHeight == 0) {
            mChildHeight = getChildAt(0).getMeasuredHeight();
        }
        final int bottomEdge = ((Integer) getChildAt(0).getTag(string.tag_top))
                + mChildHeight;
        fillListDown(bottomEdge, offset);

        final int topEdge = (Integer) getChildAt(getChildCount() - 1).getTag(
                string.tag_top);
        fillListUp(topEdge, offset);
    }

    /**
     * Starts at the bottom and adds children until we've passed the list bottom
     * 
     * @param bottomEdge
     *            The bottom edge of the currently last child
     * @param offset
     *            Offset of the visible area
     */
    private void fillListDown(int bottomEdge, final int offset) {
        while (bottomEdge + offset < getHeight() * HEIGHT_FACTOR
                && mLastItemPosition < mAdapter.getCount() - 1) {
            mLastItemPosition++;
            final View newBottomchild = mAdapter.getView(mLastItemPosition,
                    getCachedView(), this);
            addAndMeasureChild(newBottomchild, LAYOUT_MODE_ABOVE);
            bottomEdge += newBottomchild.getMeasuredHeight();
        }
    }

    /**
     * Starts at the top and adds children until we've passed the list top
     * 
     * @param topEdge
     *            The top edge of the currently first child
     * @param offset
     *            Offset of the visible area
     */
    private void fillListUp(int topEdge, final int offset) {
        while (topEdge + offset > 0 && mFirstItemPosition > 0) {
            mFirstItemPosition--;
            final View newTopCild = mAdapter.getView(mFirstItemPosition,
                    getCachedView(), this);
            addAndMeasureChild(newTopCild, LAYOUT_MODE_BELOW);
            final int childHeight = newTopCild.getMeasuredHeight();
            topEdge -= childHeight;

            // update the list offset (since we added a view at the top)
            mListTopOffset -= childHeight;
        }
    }

    @Override
    public int getFirstVisiblePosition() {
        return mFirstItemPosition;
    }

    @Override
    public int getLastVisiblePosition() {
        return mLastItemPosition;
    }

    @Override
    protected int getChildDrawingOrder(int childCount, int i) {
        return childCount - 1 - i;
    }

    /**
     * Adds a view as a child view and takes care of measuring it
     * 
     * @param child
     *            The view to add
     * @param layoutMode
     *            Either LAYOUT_MODE_ABOVE or LAYOUT_MODE_BELOW
     */
    private void addAndMeasureChild(final View child, final int layoutMode) {
        LayoutParams params = child.getLayoutParams();
        if (params == null) {
            params = new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT);
        }
        final int index = layoutMode == LAYOUT_MODE_BELOW ? -1 : 0;
        // child.setDrawingCacheEnabled(true);
        addViewInLayout(child, index, params, true);

        final int itemWidth = getWidth();
        child.measure(MeasureSpec.EXACTLY | itemWidth, MeasureSpec.UNSPECIFIED
                | mChildHeight);

        if (mChildHeight == 0) {
            mChildHeight = child.getMeasuredHeight();
            mScroller.setRange(mAdapter.getCount() * mChildHeight
                    + (int) (mLayoutHeight * HEIGHT_FACTOR));
            mScroller.setBounceRange(getHeight() / 2);
            mScroller.setMaxFlingVelocity(2500);
        }

        invalidateChild(child);
    }

    /**
     * Positions the children at the "correct" positions
     */
    private void positionItems(boolean newLayout) {
        int top = mListTop + mListTopOffset;

        final int width = getWidth();
        final int height = mChildHeight;
        for (int index = getChildCount() - 1; index >= 0; index--) {
            final View child = getChildAt(index);

            if (newLayout || child.getHeight() == 0) {
                child.layout(0, top, width, top + height);
            }
            child.setTag(string.tag_top, top);
            top += height;
        }

    }

    /**
     * Checks if there is a cached view that can be used
     * 
     * @return A cached view or, if none was found, null
     */
    private View getCachedView() {
        if (mCachedItemViews.size() != 0) {
            return mCachedItemViews.removeFirst();
        }
        return null;
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        mListTop = -firstVisibleItem;
        requestLayout();
    }

    private boolean mSnap = false;

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
        if (scrollState == SCROLL_STATE_IDLE && mSnap) {
            final View c1 = getChildAt(getChildCount() - 1);
            final View c2 = getChildAt(getChildCount() - 2);
            final int dist1 = (Integer) c1.getTag(string.tag_top);
            final int dist2 = (Integer) c2.getTag(string.tag_top);
            if (Math.abs(dist1) < Math.abs(dist2)) {
                mScroller.scrollByDistance(dist1, 400);
                OnItemSelectedListener listener = getOnItemSelectedListener();
                if (listener != null) {
                    listener.onItemSelected(this, c1, c1.getId(), 0);
                }
            } else {
                mScroller.scrollByDistance(dist2, 400);
                OnItemSelectedListener listener = getOnItemSelectedListener();
                if (listener != null) {
                    listener.onItemSelected(this, c2, c2.getId(), 0);
                }
            }
            mSnap = false;
        } else if (scrollState == SCROLL_STATE_TOUCH_SCROLL) {
            mSnap = true;
        }
    }

    public int getChildHeight() {
        return mChildHeight;
    }

    public void invalidateChild(View child) {
        child.setTag(string.tag_invalidate, true);
        invalidate();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:39:23.467

由于调用`notifyDataSetInvalidated()`并`notifyDataSetChanged()`没有解决问题，问题似乎出在您的`StreamView`自定义适配器视图类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:45:18.610

**首先**，使用[视图持有者](http://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder)。这将使您避免这段奇怪的代码部分：

```
for (int i = layout.getChildCount() - 1; i >= 0; i--) {
     View child = layout.getChildAt(i);
     if (child instanceof Gallery) {
          hlv = (Gallery) child;
          break;
     }
} 
```

顺便说一句，你为什么用这种奇怪的方法来找到一个`View`？

`hlv = (Gallery)layout.findViewById(android.R.id.list)`就足够了。

**其次**，您不应该创建新的 Gallery `hlv = new Gallery(mContext)`，然后对其进行初始化并将其添加到您的布局中。这是低效且容易出错的。

您需要重用已经存在的画廊，您可以再次使用`hlv = (Gallery)layout.findViewById(android.R.id.list)`或（更好地）通过简单地访问视图持有者对象的字段来获得它。

# javascript - 来自 HTML 元素的 underscore.js 模板

> ID：11383411
> 
> 赞同：2
> 
> 时间：2012-07-08T13:12:02.607
> 
> 标签：javascript, templates, underscore.js

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<head>
<style type="text/css">
#template {
    display: none;
}
</style>
<script
    src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script
    src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
</head>
<body>

    <div id="template">
        <div id="event">
            <button><%= title %></button>
        </div>
    </div>

    <button id="cmd_create_event" name="cmd_create_event" type="button">Create
        a new `EventModel`</button>

    <div id="div_event_list"></div>

    <script type="text/javascript">
        $(document).ready(function() {
            $("#cmd_create_event").click(function() {
                var template = $("div#template div#event").children().html();
                var compiled = _.template(template);
                $("#div_event_list").html(compiled({
                    title : "New Event Title"
                }));
            });
        });
    </script>

</body>
</html> 
```

`html()`如果调用不返回此内容，则上述内容将完美运行：`&lt;%= title %&gt;`

我希望它**准确** `<button><%= title %></button>`地返回，因为我在 HTML 中编写了它，所以我可以将它用于带有下划线的模板。

如何？

或者，有没有更好的方法？没有额外的依赖（仅限 jquery/underscore）。没有（太多）额外的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T13:23:50.140

不要将模板源存储在 a 中`<div>`，而是将其放在未评估的`<script>`块中：

```
<script type='text/template' id='template'>
  <button><%= title %></button>
</script> 
```

当您使用 获取该内容时`.html()`，您将获得与它们外观完全相同的内容。该“类型”值是（由我）组成的；*除了*真正的 JavaScript 类型，你可以使用任何东西，浏览器会完全忽略它。然而，它会将其包含在 DOM 中并允许您获取其内容。由于内容不应该是 HTML，它不会关心 HTML 元字符。

模板标记到`&lt;`和“>”的转换是由浏览器完成的，因为这确实是您输入的内容：未转义的 HTML 元字符确实是不允许的，但是浏览器认识到这就是`<%`和`%>`所以它解释它们方法。

# charts - 工具提示在 highcharts 中无法正确显示

> ID：11383414
> 
> 赞同：0
> 
> 时间：2012-07-08T13:12:35.963
> 
> 标签：charts, tooltip, highcharts, diagram

我想在highcharts中绘制这样的图表： ![在此处输入图像描述](../Images/329dc051a45eea52ae07eef0133adc97.png)

图表本身没有任何问题。但是，每当我尝试将鼠标悬停在图表中的任何点上时，它都无法正确呈现。您可以在此处查看实时示例：http: [//jsfiddle.net/xS8xb/](http://jsfiddle.net/xS8xb/)

我知道它不是一个常规图表，在数学上是一个函数。但是有什么破解方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:32:00.003

小心，前面的极端骇客：您可以在图表上创建多个系列，这样您就可以做这样的[事情](http://jsfiddle.net/CQxdt/)。使用2系列。当然，曲线没有正确匹配，但它为您提供了一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T13:20:15.427

*图表本身没有任何问题*

实际上确实如此，因为您已将值 x=10 设置了两次。因此，它在数学上不是一个函数，这可能会阻止它正确呈现工具提示。我改变了它，工具提示似乎工作正常（显示以下信息：'Tokio'，粗体的 y 值和顶部的 x 值）。[例子](http://jsfiddle.net/xS8xb/1/)

# java - 为什么Java中的String是不可变的？

> ID：11383415
> 
> 赞同：0
> 
> 时间：2012-07-08T13:12:42.783
> 
> 标签：java, string

> **可能重复：**
> [为什么字符串在许多编程语言中是不可变的？](https://stackoverflow.com/questions/9544182/why-are-strings-immutable-in-many-programming-languages)

为什么java中的String类是不可变的？
这背后是否有任何具体原因，或者这只是作者的决定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:15:20.610

不可变字符串是许多语言编写者使用的决定。即 C# 和其他。由于字符串不可变，它使字符串对象本质上是线程安全的。这允许在多线程应用程序中使用字符串而不考虑锁。

它还允许对字符串的更改以更改列表的方法从原始字符串中分支出来。这通常是字符串在最初构造后的逻辑思维方式。

# ruby-on-rails - rails表单中的隐藏/条件字段

> ID：11383416
> 
> 赞同：0
> 
> 时间：2012-07-08T13:13:35.303
> 
> 标签：ruby-on-rails, formtastic, hidden-field

是否可以仅在满足特定条件时才显示表单域？

我想做类似的东西：

```
<%= f.input :pregnancies, :as => :radio, :label => "Pregnancies", :collection => [["no", false], ["yes", true]]%>

if :pregnancies = true    

then show this input
<%= f.input :preg_nr, :label => "Number of pregnancies" %> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:30:20.257

也许[这](http://railscasts.com/episodes/88-dynamic-select-menus)可以让你开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:44:40.863

你是说你希望这个页面是动态的吗？如果用户为怀孕选择“是”，那么他们可以在哪里选择怀孕次数？如果是这种情况，我认为您会想要使用某种类型的客户端代码……比如 Javascript 或 JQuery。不幸的是，我的技能在这里有限。希望有人会为您提供代码示例。

# linux - Linux 中的持久库搜索路径

> ID：11383417
> 
> 赞同：3
> 
> 时间：2012-07-08T13:13:44.963
> 
> 标签：linux, shared-libraries

我想全局更改 LD_LIBRARY_PATH 变量，以使用一些奇怪的第三方 SDK，它将其共享库放置到自定义目录中。所以，我在 /etc/profile.d 中添加了这样的脚本：

```
LD_LIBRARY_PATH=/usr/local/ebus_sdk/lib/genicam/bin/Linux64_x64:/usr/local/ebus_sdk/lib/qt/lib:/usr/local/ebus_sdk/lib:$LD_LIBRARY_PATH
导出 LD_LIBRARY_PATH

```

重新启动后，我在命令行中输入：

```
alex@alex-64:~$ echo $LD_LIBRARY_PATH
.

```

所以，这种方式行不通。有没有其他方法可以将这些目录添加到库搜索路径中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:16:33.523

尝试将两条线放在一条上：

```
export LD_LIBRARY_PATH=/usr/local/ebus_sdk/lib/genicam/bin/Linux64_x64:/usr/local/ebus_sdk/lib/qt/lib:/usr/local/ebus_sdk/lib:$LD_LIBRARY_PATH 
```

*编辑*：
检查某些配置文件是否不被覆盖`LD_LIBRARY_PATH`。典型的候选人是`~/.profile`或`~/.bashrc`（或适合您的外壳）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T01:26:58.527

大多数 linux 发行版都会让您将文件添加到`/etc/ld.so.conf.d`包含搜索库的路径的目录中。`rpm`对于喜欢安装和`dpkg`卸载软件包系统更改的安装程序来说，这是一种方便的方式。

# geometry - 分离轴 3d

> ID：11383419
> 
> 赞同：1
> 
> 时间：2012-07-08T13:14:08.533
> 
> 标签：geometry, collision-detection

我试图为 2 Tetrahedron 进行 SAT 3d 测试。我做了一个小算法，它在下面几乎没有效果。但它并没有真正起作用。

经过几个小时的搜索，我找到了这句话：

> 脸部法线方向是不够的
> 
> 您还需要检查通过边缘的叉积产生的方向，一个来自每个多面体

这是什么意思？

如果我计算每个四面体两侧的叉积，我已经有了边的叉积。

我不知道这句话是什么意思，谁能解释一下？

这里有一个小总结：

我为每个四面体做了这个。

我用两条边的叉积制作了面部法线，如下所示： getcross((PointB-PointA)),(PointC-PointA)); 对于每张脸，要获得正常。然后我搜索了最大和最小的投影值。然后我对它们进行了重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:17:15.413

注释意味着您应该从 Tetrahedron1 中获取每条边，并从 Tetrahedron2 中获取每条边的叉积（36 种组合）。

当您计算面法线时，您从同一个四面体中获取两条边。

# javascript - 使用 jQuery 移动嵌套列表 + knockout.js 的简单层次结构

> ID：11383426
> 
> 赞同：0
> 
> 时间：2012-07-08T13:14:55.027
> 
> 标签：javascript, jquery, jquery-mobile, knockout.js, knockout-2.0

我正在尝试用 knockout.js 填充一个简单的嵌套列表（jQuery Mobile）。数据是一个简单的 JSON 层次结构。

请检查[http://jsfiddle.net/RYLve/](http://jsfiddle.net/RYLve/)

父项已显示，但不可导航。怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:59:59.410

我认为您面临两个主要问题：

1）确保你使用`<span data-bind="text: Name"></span>`而不是`<span data-bind="text: Name" />`

2) 列表视图的自动处理存在时间问题。您可以通过使用自定义绑定来添加数据角色并处理元素来解决此问题。

我不确定它是否完美，我仍然看到有趣的绑定错误，但这个小提琴似乎更接近你正在寻找的东西：http: [//jsfiddle.net/RYLve/1/](http://jsfiddle.net/RYLve/1/)

希望这会对您有所帮助。

编辑：我增强了我的小提琴，我认为现在一切正常。我改用模板，这样你就可以获得完整的层次结构。另请注意，我使用 setTimeout 允许在尝试调用 listview 之前填充 DOM 时间。

[http://jsfiddle.net/RYLve/2/](http://jsfiddle.net/RYLve/2/)

# php - CakePHP 等价于 html 代码

> ID：11383427
> 
> 赞同：1
> 
> 时间：2012-07-08T13:14:55.710
> 
> 标签：php, html, cakephp, twitter-bootstrap

我正在开发一个 cakePHP 项目，我需要使用 PHP 创建一个按钮，该按钮将删除数据库中的一个条目，但我想在所述按钮上显示 twitter 引导垃圾桶图标。

包含来自 twitter bootstrap 的图标的代码是；

```
<i class="icon-trash"></i> 
```

我需要它工作的 PHP 代码是；

```
<?php echo $this->Form->postLink(__('Delete'), 
    array(
        'action' => 'delete', 
        $skill['Skill']['SkillID']),
        array(
              'class'=>'btn'),
              null, 
              __('Are you sure you want to delete # %s?', 
              $skill['Skill']['SkillID']
));?> 
```

有谁知道如何在这个 PHP 代码中实现 html，以便我可以用图标替换文本“删除”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:20:13.073

```
echo $this->Form->postLink(
    '<i class="icon-trash"></i> '.__('Delete'), 
    array(
        'action' => 'delete', 
        $skill['Skill']['SkillID']
    ),
    array(
        'class'=>'btn',
        'escape' => false
    ),
    null, 
    __('Are you sure you want to delete # %s?', 
        $skill['Skill']['SkillID'] )
); 
```

`'escape' => false`使 CakePHP 显示未转义的 HTML。

`icon-trash`如果您只是将类添加到链接中，它可能（取决于 CSS）也可以工作。

```
echo $this->Form->postLink(__('Delete'), 
    array(
        'action' => 'delete', 
        $skill['Skill']['SkillID']),
        array(
              'class'=>'btn icon-trash'),
              null, 
              __('Are you sure you want to delete # %s?', 
              $skill['Skill']['SkillID']
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T13:25:44.957

首先，如果你使用的是 CakePHP 和 Twitter Bootstrap，有一个很棒的帮助插件可以让你的生活更轻松[https://github.com/loadsys/twitter-bootstrap-helper](https://github.com/loadsys/twitter-bootstrap-helper)

然后看按钮方法。我很确定你可以在参数数组中传递一个 'icon' => 'iconname'

# c - typedef 具有前向声明的副作用？

> ID：11383429
> 
> 赞同：8
> 
> 时间：2012-07-08T13:15:07.350
> 
> 标签：c, typedef, forward-declaration

我在头文件中有以下声明：

```
struct my_struct;
int func(struct my_struct* s);        // Passing struct my_struct* 
```

如果没有前向声明，编译器显然会给出[这个错误](http://ideone.com/foyNM)：

> `error: 'struct my_struct' declared inside parameter list`

但是，如果我用`my_struct`typedef 替换前向声明，并相应地更新函数声明，它[编译得很好](http://ideone.com/loENi)：

```
typedef struct my_struct my_struct_t;
int func(mystruct_t* s);              // Passing my_struct_t* 
```

奇怪的是，如果我保留 typedef，但使用原始声明`my_struct`，它[也会编译](http://ideone.com/UoTLb)：

```
typedef struct my_struct my_struct_t;
int func(struct my_struct* s);        // Passing struct my_struct* 
```

其他人注意到了吗？这种行为是副作用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T13:34:10.090

在第 6.2.1 节第 7 段中：

> 结构、联合和枚举标记的作用域在标记出现在声明标记的类型说明符之后开始。每个枚举常量的作用域都在其定义的枚举数出现在枚举数列表中之后开始。任何其他标识符的范围都在其声明符完成后开始。

在 6.7.2.3 第 8 段中：

> 如果 struct-or-union 标识符形式的类型说明符不是作为上述形式之一的一部分出现，并且没有其他标识符作为标记的声明是可见的，则它声明一个不完整的结构或联合类型，并声明标识符作为该类型的标记。

因此`typedef`声明了一个不完整的结构类型。

# jquery - 选择 一个 from a Chrome extension content script I'm hopelessly trying to activate a change() event from a Chrome content script. I've gone past through of the web site and Google posts, but still nothing works. Here's a description of what I'm

> ID：11383437
> 
> 赞同：5
> 
> 时间：2012-07-08T13:15:39.533
> 
> 标签：jquery, google-chrome, google-chrome-extension, jquery-events, content-script

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T11:23:54.213

我真的不知道 JQuery，但这里是如何在没有 JQuery 并且不向页面中注入任何东西的情况下做到这一点......

```
var selections = document.querySelector('#woot');

selections.value = 17;

var evt = document.createEvent("HTMLEvents");
evt.initEvent("change", true, true);
selections.dispatchEvent(evt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T01:16:19.293

您可以附加脚本。这将需要大量脚本附加，但您始终可以放置一个自定义通信事件，并且只注入一个好的脚本来监听该自定义事件并`eval()`获取事件数据。如果没有 CSP，它将起作用。

```
var RunInThisContext = function(c){ try{
    var code = document.createTextNode(c);
    var script = document.createElement('script');
    script.type='text/javascript';
    script.language='javascript';
    script.appendChild(code);
    try{document.body.appendChild(script);}catch(e){document.head.appendChild(script);}

}catch(e){ console.error('ERROR: '+e); }}; 
```

像这样使用：

```
RunInThisContext('('+(function(){ 
     $('select').change();
}).toString()+'()); '); 
```

但请记住，您是直接将其运行到页面中。如果页面没有 jQuery，则必须先包含它。

# visual-studio-2010 - 为什么以下会导致 Visual Studio 遇到异常

> ID：11383440
> 
> 赞同：0
> 
> 时间：2012-07-08T13:15:58.750
> 
> 标签：visual-studio-2010

我安装了三个插件的 Visual Studio 2010 Professional：

*   视觉SVN
*   CodeRush Xpress 11
*   专业电动工具

当我启动 Visual Studio 时，选择`New Project => Console Application (C#)`然后键入以下内容：

```
for(){} 
```

它每次都在我身上崩溃。有其他人遇到这种情况还是只有我？这是一个已知的问题？

每次创建 for 循环时，我都对 Visual Studio 崩溃感到有点厌烦。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:25:58.227

这可能是附加组件的问题。禁用所有3个附加组件，然后将它们一一启用，以找出导致问题的原因。

# cocoa - 在 Cocoa 中操作 NSImage 的像素

> ID：11383442
> 
> 赞同：1
> 
> 时间：2012-07-08T13:16:24.273
> 
> 标签：cocoa, bitmapdata, nsimage, nsimageview

我想根据一些变量修改 NSImage 像素的颜色，而不使用太多依赖于工具包的库（例如：CIImage）。这样以后我就可以专注于像素操作算法并保持它们独立于平台。

我的方法是继承 NSImage 并添加一个属性

```
NSBitmapImageRep *originalImage; 
```

在启动期间，我会：

```
-(id) initWithContentsOfFile:(NSString *)fileName
{
    if([super initWithContentsOfFile:fileName]){
        NSRect rect = NSMakeRect(0.0, 0.0, self.size.width, self.size.height);
        [self lockFocus];
        originalImage = [[NSBitmapImageRep alloc] initWithFocusedViewRect:rect];
        [self unlockFocus];
    }
    return self;
} 
```

现在，当我尝试更新图像时，我会这样做：

```
-(void) updateWithVariables:...
{
    NSInteger width = [originalImage pixelsWide];
    NSInteger height = [originalImage pixelsHigh];
    NSInteger count = width * height * 4;

    unsigned char *bytes = (unsigned char *)calloc(count, sizeof(unsigned char));

    // bytes manipulation

    NSBitmapImageRep* newImg = [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:&bytes
                                                                       pixelsWide:width
                                                                       pixelsHigh:height
                                                                    bitsPerSample:[originalImage bitsPerSample]
                                                                  samplesPerPixel:[originalImage samplesPerPixel]
                                                                         hasAlpha:TRUE
                                                                         isPlanar:[originalImage isPlanar]
                                                                   colorSpaceName:[originalImage colorSpaceName]
                                                                     bitmapFormat:[originalImage bitmapFormat]
                                                                      bytesPerRow:[originalImage bytesPerRow]
                                                                     bitsPerPixel:[originalImage bitsPerPixel]];
    while([[self representations] count] > 0){
        NSBitmapImageRep *rep = [[self representations] objectAtIndex: 0];
        [self removeRepresentation:rep];
    }

    [self addRepresentation:newImg];
    [newImg release];
} 
```

但是图像没有改变。我不确定是否必须使用表示或将包含的 NSImageView 更改为上下文来绘制新图像。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:27:11.743

在[此页面上](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Images/Images.html)，Apple 说：

> 将 NSImage 及其图像表示视为不可变对象。NSImage 的目标是提供一种在目标画布上显示图像的有效方式。避免直接操作图像表示的数据，特别是如果有其他操作数据的替代方法，例如将图像和其他一些内容合成到新的图像对象中。

因此，当您希望像素发生变化时，您可能应该创建一个新图像。

# c# - gridview 没有通过 BLL 显示值？

> ID：11383443
> 
> 赞同：-1
> 
> 时间：2012-07-08T13:16:28.957
> 
> 标签：c#, asp.net, gridview, business-logic-layer

我的控件不返回我的网格视图中的值。

表适配器可以正常运行查询并显示数据。

这是我的控制代码：

```
 categoriesBLL categoriesLogic = new categoriesBLL();
 GridView1.DataSource = categoriesLogic.GetCategories();
 GridView1.DataBind(); 
```

这是我的 BLL：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NopSolutions.NopCommerce.Nop.DataAccess.MegaProductMenuTableAdapters;

namespace NopSolutions.NopCommerce.BusinessLogic.MegaProductsMenu
{
    [System.ComponentModel.DataObject]
    public class categoriesBLL
    {

        private Nop_CategoryTableAdapter _categoriesAdapter = null;
        protected Nop_CategoryTableAdapter Adapter
        {
            get
            {
                if (_categoriesAdapter == null)
                    _categoriesAdapter = new Nop_CategoryTableAdapter();

                return _categoriesAdapter;
            }
        }

        [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Select, true)]
        public Nop_CategoryTableAdapter GetCategories()
        {
            return _categoriesAdapter;
        }

    }

} 
```

我的 DAL 看起来像这样：

![在此处输入图像描述](../Images/eb2e08563fa145f3f26d9511380cceb3.png)

如果直接连接到 DAL，我可以获得要显示的值。所以我认为我的 BLL 有问题，但会是什么？我没有收到任何错误消息。

**我的gridview来源：**

```
 <asp:GridView ID="GridView1" runat="server" CssClass="DataWebControlStyle" AutoGenerateColumns="True">
       <HeaderStyle CssClass="HeaderStyle" />
       <AlternatingRowStyle CssClass="AlternatingRowStyle" />
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:23:15.637

您是否定义了任何列？或者是 AutoGenerateColumns == true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T13:34:00.790

1.  categoriesBLL categoriesLogic = new categoriesBLL();

2.  GridView1.DataSource = categoriesLogic.GetCategories();

3.  GridView1.DataBind();

将第 2 行更改为以下内容

```
GridView1.DataSource = categoriesLogic.Adapter.GetCategories(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T14:25:18.373

我通过分配数据表解决了这个问题：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NopSolutions.NopCommerce.Nop.DataAccess.MegaProductMenuTableAdapters;

namespace NopSolutions.NopCommerce.BusinessLogic.MegaProductsMenu
{
    [System.ComponentModel.DataObject]
    public class categoriesBLL
    {

        private Nop_CategoryTableAdapter _categoriesAdapter = null;
        protected Nop_CategoryTableAdapter Adapter
        {
            get
            {
                if (_categoriesAdapter == null)
                    _categoriesAdapter = new Nop_CategoryTableAdapter();

                return _categoriesAdapter;
            }
        }

        [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Select, true)]
        public NopCommerce.Nop.DataAccess.MegaProductMenu.Nop_CategoryDataTable GetCategories()
        {
            return Adapter.GetCategories();
        }

    }

} 
```

# ruby-on-rails - 在Passenger fork上重新启动Rails Redis Cache Store连接

> ID：11383450
> 
> 赞同：6
> 
> 时间：2012-07-08T13:17:12.570
> 
> 标签：ruby-on-rails, caching, redis, passenger

我想使用 redis 缓存存储（使用[redis-store](https://github.com/jodosha/redis-store) gem）。

它在本地工作得很好，但是当进行生产时，Passenger 派生多个 Rails 工作人员实例时，我们会收到 Redis 错误，这表明不同实例之间存在关于 Redis 访问的同步问题。

这种错误的一个例子是

```
 Got '7' as initial reply byte. If you're running in a multi-threaded environment, make sure you pass the :thread_safe option when initializing the connection. If you're in a forking environment, such as Unicorn, you need to connect to Redis after forking.
  redis (2.2.2) lib/redis/connection/ruby.rb:78:in `format_reply' 
```

我做了一些阅读并了解到每个乘客工作实例必须创建自己的 Redis 连接。这可以使用以下代码实现

```
#config/initializers/redis_fork_init.rb
if defined?(PhusionPassenger)
  PhusionPassenger.on_event(:starting_worker_process) do |forked|
    if forked
      $redis = Redis.new
    end
  end
end 
```

假设 Redis 访问是通过代码中的 $redis 完成的——这个解决方案很棒。

我的问题是 - 如何创建一个新的 Redis 连接，当我执行`Rails.cache`诸如读取、写入等操作时将使用它......？

我的 config/environments/production.rb 包括以下内容：

```
config.cache_store = :redis_store, { :host => 'localhost', :port => 6379, :thread_safe => true } 
```

使用 Rails 3.2.3、Redis 2.2.2、redis-store 1.1.1、Passenger 3.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T06:19:24.907

看看redis store的reconnect方法： [https ://github.com/jodosha/redis-store/blob/master/redis-activesupport/lib/active_support/cache/redis_store.rb](https://github.com/jodosha/redis-store/blob/master/redis-activesupport/lib/active_support/cache/redis_store.rb)

所以基本上你的叉块应该是这样的：

```
if defined?(PhusionPassenger)
  PhusionPassenger.on_event(:starting_worker_process) do |forked|
    if forked
      Rails.cache.reconnect
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T18:54:35.690

添加到@Tor 的响应中，更改`$redis = Redis.new`为`Rails.cache.reconnect`.

在这个 github 问题中找到的信息，[https://github.com/jodosha/redis-store/issues/21#issuecomment-948569](https://github.com/jodosha/redis-store/issues/21#issuecomment-948569)

# vb.net - 无法传递对 Class 的私有 DataGridView 的引用

> ID：11383460
> 
> 赞同：1
> 
> 时间：2012-07-08T13:18:43.383
> 
> 标签：vb.net, winforms

**问题：为什么在函数Check()下的holdDate，调试时显示“Nothing”，我是通过引用传递的。我想念什么家伙？**

**问题描述：**

我有一个名为 Wallet 的类，我通过传递三个参数在我的主代码中创建了该类的实例（我的表单上已经存在的对象将在以后填充来自用户的数据，而不是立即填充）：

```
Dim myWallet As New Wallet(DataGridView1, DateTimePicker1, "StatementsLog.dat") 
```

**在运行时我得到这个：** ![在此处输入图像描述](../Images/65cf138e735bb37f3b7d9154e42d6f40.png)

如您所见，假设从表单中引用原始对象的对象是空的？我认为如果我通过引用传递（如下所示），该对象将始终显示数据，这将允许我读取它，如上面的屏幕截图所示：

```
Public Sub New(ByRef Data As DataGridView, ByRef _Date As DateTimePicker, Optional ByVal StatementsFileName As String = "defaultLog.txt")
  'This constructor takes in references to use in class as private
  holdPath = StatementsFileName
  holdData = Data
  holdDate = _Date
End Sub 
```

**这是迄今为止我为 Class Wallet 获得的信息：**

```
Option Strict On
Imports System
Imports System.IO

Public Class Wallet

  Private lcheckNumber As Integer = Nothing
  Private lcheckAmount As Decimal = Nothing
  Private ldepositAmount As Decimal = Nothing
  Private lfee As Decimal = Nothing
  Private lDescription As String = Nothing

  Private holdDate As New DateTimePicker
  Private holdData As New DataGridView
  Private holdPath As String = vbNullString

  'Default Constructor
  Public Sub New()
    holdPath = "defaultLog.txt"
  End Sub

  Public Sub New(ByRef _Data As DataGridView, ByRef _Date As DateTimePicker, Optional ByVal StatementsFileName As String = "defaultLog.txt")
    'This constructor takes in references to use in class as private
    holdPath = StatementsFileName
    holdData = _Data
    holdDate = _Date
  End Sub

  'Function Check - Deduct the amount from account and returns current balance.
  Public Function Check(ByVal CheckNumber As Integer, ByVal CheckAmount As Decimal, ByVal Description As String) As Decimal
    Try
      lcheckNumber = CheckNumber
      lcheckAmount = CheckAmount
      lDescription = Description
      lfee = 0D

      Dim _file As New FileStream(holdPath, FileMode.Append, FileAccess.Write)
      Using file As New StreamWriter(_file)
         file.WriteLine(holdDate.Value.ToString & "," & lDescription.ToString & "," & lcheckNumber.ToString & "," & lfee.ToString & "," & lcheckAmount.ToString)
      End Using
    Catch e As IOException
      MessageBox.Show(e.ToString)
    End Try

    Return 0D
  End Function 
```

**Form1 代码**

```
Option Strict On
Imports WalletProgram.Wallet

Public Class Form1
    Dim myWallet As New Wallet(DataGridView1, DateTimePicker1, "StatementsLog.dat")

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        optCheck.Checked = True

        'Just test data for DataGridView1
        DataGridView1.Rows.Add(New String() {"12/21/1986", "Test", "44554", "44.22", "45.12"})
    End Sub

    Private Sub cmdAddTransaction_Click(sender As System.Object, e As System.EventArgs) Handles cmdAddTransaction.Click
        If optCheck.Checked Then
            lblAvailableFunds.Text = FormatCurrency(myWallet.Check(CInt(Trim(txtCheck.Text)), CDec(Trim(txtMoney.Text)), txtDescription.Text))
        End If
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:23:03.837

问题很可能在这里：

```
Public Class Form1
  Dim myWallet As New Wallet(DataGridView1, DateTimePicker1, "StatementsLog.dat") 
```

这将编译，但这些对象尚未创建，因为它发生*在*表单的`InitializeComponent`例程被调用之前。

尝试将声明更改为：

```
Public Class Form1
  Dim myWallet As Wallet

  Protected Overrides Sub OnLoad(e As System.EventArgs)
    _Wallet = New Wallet(DataGridView1, DateTimePicker1)
    MyBase.OnLoad(e)
  End Sub

End Class 
```

在创建控件后创建 Wallet 类的位置。

# maven - 如何将maven依赖项下载到特定文件夹

> ID：11383464
> 
> 赞同：1
> 
> 时间：2012-07-08T13:19:11.917
> 
> 标签：maven, maven-2, maven-3

我在 pom.xml 文件中有以下依赖项，

```
 <dependencies>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-jaxws</artifactId>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-http</artifactId>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <scope>test</scope>
        </dependency>
    </dependencies> 
```

我想将那些下载的 jar 文件保存到我指定的目录中。确切的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:52:38.897

在构建 POM 部分试试这个：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.1</version>
    <executions>
        <execution>
            <id>copy</id>
            <phase>process-resources</phase>
            <goals>
                <goal>copy</goal>
            </goals>
            <configuration>
                <artifactItems>
                    <artifactItem>
                        <groupId>[your.dep.group.id]</groupId>
                        <artifactId>[your.dep.artifact.id]</artifactId>
                        <version>[your.dep.version]</version>
                        <type>jar</type>
                        <overWrite>true</overWrite>
                        <outputDirectory>[your.output.dir]</outputDirectory>
                    </artifactItem>
                </artifactItems>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

# python - Python中的文本到ASCII艺术生成器

> ID：11383466
> 
> 赞同：8
> 
> 时间：2012-07-08T13:19:31.483
> 
> 标签：python, ascii-art

我想在我们开发人员的命令行工具中添加一个复活节彩蛋，如果某个日期匹配，它将向用户致意。基本上，我正在寻找：

```
>>> print big_text("Happy\nBirthday")                                                                                   

   .                   _________   _...._    _________   _...._                    
 .'|                   \        |.'      '-. \        |.'      '-. .-.          .- 
<  |                    \        .'```'.    '.\        .'```'.    '.\ \        / / 
 | |             __      \      |       \     \\      |       \     \\ \      / /  
 | | .'''-.   .:--.'.     |     |        |    | |     |        |    | \ \    / /   
 | |/.'''. \ / |   \ |    |      \      /    .  |      \      /    .   \ \  / /    
 |  /    | | `" __ | |    |     |\`'-.-'   .'   |     |\`'-.-'   .'     \ `  /     
 | |     | |  .'.''| |    |     | '-....-'`     |     | '-....-'`        \  /      
 | |     | | / /   | |_  .'     '.             .'     '.                 / /       
 | '.    | '.\ \._,\ '/'-----------'         '-----------'           |`-' /        
 '---'   '---'`--'  `"                    _______                     '..'         
/|        .--.                   .        \  ___ `'.                               
||        |__|                 .'|         ' |--.\  \          .-.          .-     
||        .--..-,.--.      .| <  |         | |    \  '          \ \        / /     
||  __    |  ||  .-. |   .' |_ | |         | |     |  '    __    \ \      / /      
||/'__ '. |  || |  | | .'     || | .'''-.  | |     |  | .:--.'.   \ \    / /       
|:/`  '. '|  || |  | |'--.  .-'| |/.'''. \ | |     ' .'/ |   \ |   \ \  / /        
||     | ||  || |  '-    |  |  |  /    | | | |___.' /' `" __ | |    \ `  /         
||\    / '|__|| |        |  |  | |     | |/_______.'/   .'.''| |     \  /          
|/\'..' /     | |        |  '.'| |     | |\_______|/   / /   | |_    / /           
'  `'-'`      |_|        |   / | '.    | '.            \ \._,\ '/|`-' /            
                         `'-'  '---'   '---'            `--'  `"  '..' 
```

有包吗？

[信用到期](http://patorjk.com/software/taag/#p=display&f=Crazy&t=happy%0ABirthday)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T16:10:23.283

您在此处链接的 TAAG 应用程序的作者。TAAG 中的大多数字体都是 FIGlet 字体 (figlet.org)。FIGlet 是一个命令行 linux 应用程序，但 FIGlet 驱动程序已用多种语言编写。我在这里发布了我用 JavaScript 编写的驱动程序：

[https://github.com/patorjk/figlet.js](https://github.com/patorjk/figlet.js)

虽然这需要移植到 Python 才能工作。我搜索了 FIGlet Python 库并找到了这个：

[https://github.com/pwaller/pyfiglet](https://github.com/pwaller/pyfiglet)

我不确定它的效果如何，或者它实现了多少规范，但它看起来很完整。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T14:35:26.467

我认为这个问题对于 Stack Overflow 来说有点离题，但你可以尝试用谷歌搜索“ASCII art Python”并获得以下信息：[http ://www.youtube.com/watch?v=NEWuZfTNoJE](http://www.youtube.com/watch?v=NEWuZfTNoJE)

*或者*你可以尝试自己做，这里有一个大纲：

```
rows = 13 # Maximum height of character

# 0 is a , 1 is b and so on...
alphabeth = [[
r'''           ''',
r'''           ''',
r'''           ''',
r'''           ''',
r'''           ''',
r'''    __     ''',
r''' .:--.'.   ''',
r'''/ |   \ |  ''',
r'''`" __ | |  ''',
r''' .'.''| |  ''',
r'''/ /   | |_ ''',
r'''\ \._,\ '/ ''',
r''' `--'  `"  ''']]

text = raw_input('Enter text:\n')
c = map(lambda x: ord(x)-ord('a'),text)
for i in range(rows):
    for j in c:
        print alphabeth[j][i],
    print "" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T00:53:02.147

这是来自 Python Banner 示例的 ActiveState 的代码片段。 [http://code.activestate.com/recipes/577537-banner/](http://code.activestate.com/recipes/577537-banner/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-09T17:19:52.630

如前所述，您可以使用 pyFiglet 在 python 中创建 ascii 文本。

例如：

```
import pyfiglet

result = pyfiglet.figlet_format("happy birthDay", font = "crazy")
print(result) 
```

# python - Python：遍历子列表

> ID：11383468
> 
> 赞同：19
> 
> 时间：2012-07-08T13:19:40.730
> 
> 标签：python, python-3.x, generator, slice

通常，当您想在 Python 中迭代列表的一部分时，最简单的做法就是对列表进行切片。

```
# Iterate over everything except the first item in a list
#
items = [1,2,3,4]
iterrange = (x for x in items[1:]) 
```

但是切片操作符会创建一个新列表，这在很多情况下甚至是不必要的。理想情况下，我想要某种创建生成器的切片函数，而不是新的列表对象。可以通过创建使用 a`range`仅返回列表的某些部分的生成器表达式来完成类似的操作：

```
# Create a generator expression that returns everything except 
# the first item in the list
#
iterrange = (x for x, idx in zip(items, range(0, len(items))) if idx != 0) 
```

但这有点麻烦。我想知道是否有更好，更优雅的方式来做到这一点。那么，对列表进行切片以便创建生成器表达式而不是新的列表对象的最简单方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-08T13:31:13.950

使用[itertools.islice](http://docs.python.org/library/itertools.html#itertools.islice)：

```
import itertools

l = range(20)

for i in itertools.islice(l,10,15):
    print i

10
11
12
13
14 
```

从文档：

> 创建一个从可迭代对象中返回选定元素的迭代器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-07T18:13:59.957

在我开始之前，需要明确的是，在切片方法之间选择的正确顺序通常是：

1.  **使用常规切片**（复制除了最长输入之外的所有输入的成本通常没有意义，而且代码要简单得多）。**如果输入可能不是可切片的序列类型，请将其转换为 1，然后切片，例如`allbutone = list(someiterable)[1:]`. 这比任何其他方法都更简单，并且在大多数情况下通常更快。**
2.  **如果常规切片不可行**（不保证输入是序列并且在切片之前转换为序列可能会导致内存问题，或者它很大并且切片覆盖了大部分，例如跳过前 1000 个和最后 1000 个元素一个 10M 的元素`list`，所以内存可能是一个问题），**`itertools.islice`通常是正确的解决方案**，因为它很简单，而且性能成本通常不重要。
3.  **当且仅当`islice`的性能慢得令人无法接受（它为生成每个项目增加了一些开销，尽管诚然这是一个很小的数量）*并且*要跳过的数据量很小，而要包含的数据量很大（例如，OP 跳过单个元素并保留其余元素的场景），继续阅读**

如果您发现自己处于第 3 种情况，那么您处于这样一种情况，即`islice`' 快速绕过初始元素的能力（相对）不足以弥补生成其余元素的增量成本。在这种情况下，您可以通过将问题从*选择*所有元素*after* `n`转变为*丢弃*所有元素*before* `n`来提高性能。

对于这种方法，您手动将输入转换为迭代器，然后显式提取并丢弃`n`值，然后迭代迭代器中剩余的内容（但没有每个元素的开销`islice`）。例如，对于 的输入`myinput = list(range(1, 10000))`，您选择元素 1 到末尾的选项是：

```
# Approach 1, OP's approach, simple slice:
for x in myinput[1:]:

# Approach 2, Sebastian's approach, using itertools.islice:
for x in islice(myinput, 1, None):

# Approach 3 (my approach)
myiter = iter(myinput)  # Explicitly create iterator from input (looping does this already)
next(myiter, None) # Throw away one element, providing None default to avoid StopIteration error
for x in myiter:  # Iterate unwrapped iterator 
```

如果要丢弃的元素数量较大，最好从[文档](https://docs.python.org/3/library/itertools.html#itertools-recipes)[中借用`consume`配方`itertools`](https://docs.python.org/3/library/itertools.html#itertools-recipes)：

```
def consume(iterator, n=None):
    "Advance the iterator n-steps ahead. If n is None, consume entirely."
    # Use functions that consume iterators at C speed.
    if n is None:
        # feed the entire iterator into a zero-length deque
        collections.deque(iterator, maxlen=0)
    else:
        # advance to the empty slice starting at position n
        next(islice(iterator, n, n), None) 
```

这使得这些方法可以概括为跳过`n`元素：

```
# Approach 1, OP's approach, simple slice:
for x in myinput[n:]:

# Approach 2, Sebastian's approach, using itertools.islice:
for x in islice(myinput, n, None):

# Approach 3 (my approach)
myiter = iter(myinput)  # Explicitly create iterator from input (looping does this already)
consume(myiter, n)      # Throw away n elements
# Or inlined consume as next(islice(myiter, n, n), None)
for x in myiter:        # Iterate unwrapped iterator 
```

在性能方面，对于大多数大型输入来说，这会以有意义的数量获胜（例外： Python 3 上的自身已经针对普通切片进行了优化；在实际对象`range`上无法击败普通切片）。微基准测试（在 CPython 3.6，64 位 Linux 构建上）说明了这一点（设置中的定义只是一种以最低开销方法运行迭代的方法，因此我们将我们不感兴趣的东西的影响降到最低） ：`range``ipython3``slurp`

```
>>> from itertools import islice
>>> from collections import deque
>>> %%timeit -r5 slurp = deque(maxlen=0).extend; r = list(range(10000))
... slurp(r[1:])
...
65.8 μs ± 109 ns per loop (mean ± std. dev. of 5 runs, 10000 loops each)

>>> %%timeit -r5 slurp = deque(maxlen=0).extend; r = list(range(10000))
... slurp(islice(r, 1, None))
...
70.7 μs ± 104 ns per loop (mean ± std. dev. of 5 runs, 10000 loops each)

>>> %%timeit -r5 slurp = deque(maxlen=0).extend; r = list(range(10000))
... ir = iter(r)
... next(islice(ir, 1, 1), None)  # Inlined consume for simplicity, but with islice wrapping to show generalized usage
... slurp(ir)
...
30.3 μs ± 64.1 ns per loop (mean ± std. dev. of 5 runs, 10000 loops each) 
```

显然，我的解决方案的额外复杂性通常不值得，但对于中等大小的输入（在本例中为 10K 元素），性能优势是显而易见的；`islice`是表现最差的（少量），普通切片稍微好一点（这强化了我的观点，即当你有一个实际序列时，普通切片几乎总是最好的解决方案），以及“转换为迭代器，丢弃初始，使用休息" 相对而言，方法赢得了巨大的胜利（远低于任何一种解决方案的一半时间）。

这种好处不会出现在微小的输入上，因为加载/调用`iter`/的固定开销`next`，尤其是`islice`，将超过节省的成本：

```
>>> %%timeit -r5 slurp = deque(maxlen=0).extend; r = list(range(10))
... slurp(r[1:])
...
207 ns ± 1.86 ns per loop (mean ± std. dev. of 5 runs, 1000000 loops each)

>>> %%timeit -r5 slurp = deque(maxlen=0).extend; r = list(range(10))
... slurp(islice(r, 1, None))
...
307 ns ± 1.71 ns per loop (mean ± std. dev. of 5 runs, 1000000 loops each)

>>> %%timeit -r5 slurp = deque(maxlen=0).extend; r = list(range(10))
... ir = iter(r)
... next(islice(ir, 1, 1), None)  # Inlined consume for simplicity, but with islice wrapping to show generalized usage
... slurp(ir)
...
518 ns ± 4.5 ns per loop (mean ± std. dev. of 5 runs, 1000000 loops each)

>>> %%timeit -r5 slurp = deque(maxlen=0).extend; r = list(range(10))
... ir = iter(r)
... next(ir, None)  # To show fixed overhead of islice, use next without it
... slurp(ir)
...
341 ns ± 0.947 ns per loop (mean ± std. dev. of 5 runs, 1000000 loops each) 
```

但正如您所见，即使是 10 个元素，`islice`-free 方法也不会差*多少*；通过 100 个元素，`islice`-free 方法比所有竞争对手都快，并且通过 200 个元素，广义`next`+`islice`击败了所有竞争对手（显然它没有击败`islice`-free，因为 180 ns 的开销`islice`，但这可以通过推广到跳过来弥补`n`元素作为一个步骤，而不是需要`next`重复调​​用以跳过多个元素）。清楚的`islice`由于包装器所要求的每个元素的开销，很少在“跳过一些，保留很多”的情况下获胜（直到大约 100K 元素，它才明显击败微基准中的急切切片；它的内存效率很高，但 CPU 效率低下），并且在“跳过很多，保留一些”的情况下，它会做得更糟（相对于急切的切片）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T13:33:35.017

试试 itertools.islice：

[http://docs.python.org/library/itertools.html#itertools.islice](http://docs.python.org/library/itertools.html#itertools.islice)

```
iterrange = itertools.islice(items, 1, None) 
```

# .net - 通用列表的铸造问题

> ID：11383470
> 
> 赞同：0
> 
> 时间：2012-07-08T13:20:14.107
> 
> 标签：.net, list, casting

在以下代码中发生编译错误，但我不明白为什么。

```
class RealMock<TEntity> : DataContext
{
    public RealMock():base("")
    {

    }

    public List<TEntity> inMemoryDataStore = new List<TEntity>();
    public List<TEntity> GetTable<TEntity>() where TEntity : class
    {
        return inMemoryDataStore;  //Compilation error       
    }
} 
```

无法将类型“System.Collections.Generic.List [c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\mscorlib.dll]”隐式转换为“System.Collections.Generic.List [ c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\mscorlib.dll]'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T13:33:21.073

我相信这是因为您的 GetTable 方法已参数化，请尝试将其定义为

```
public List<TEntity> GetTable () {...} 
```

# ruby - weka 和 Ruby on Rails

> ID：11383471
> 
> 赞同：-2
> 
> 时间：2012-07-08T13:20:14.777
> 
> 标签：ruby, ruby-on-rails-3, data-mining, weka

我想在我的程序中连接数据挖掘工具 Weka。以下代码应该存储在哪里？在控制器或模型或其他地方？

```
require "java"
require "weka"

java_import "java.io.FileReader"
java_import "weka.clusterers.SimpleKMeans"
java_import "weka.core.Instances"

kmeans = SimpleKMeans.new
filereader = FileReader.new ("./labor.arff")
labor_data = Instances.new filereader

#build the cluster and output the k-means data
kmeans.build_clusterer labor_data
puts kmeans.to_string

#examine the particular datapoints
points = labor_data.numInstances
points.times {|instance|
    cluster = kmeans.clusterInstance(labor_data.instance(instance))
    point = labor_data.instance(instance).to_string
    puts "#{point} \t #{cluster}"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:17:36.543

从技术上讲，您可以将其存储在任何部分。这取决于您认为什么是模型、控制器和视图。

由于您正在调用“to_string”并打印到控制台，因此您的代码中甚至还有一个“视图”部分。所以你把事情搞砸了！

也许您需要重新阅读[Wikipedia 上的 Model-View-Controller](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)或您最喜欢的设计模式书籍。

# ajax - AjaxControlToolKit Htmleditorextender，图像未上传且未在编辑器预览中显示

> ID：11383474
> 
> 赞同：1
> 
> 时间：2012-07-08T13:20:58.523
> 
> 标签：ajax, ajaxcontroltoolkit, html-editor

我将 Htmleditorextender 添加到我的 Web 应用程序中，但我无法在服务器上设置图像上传位置的路径我不知道如何设置该路径和配置图像上传器，现在当我尝试上传图像并将图像添加到 IE 中的编辑器时-10 它停止工作并冻结，显示上传没有进度，在 Firefox 中，它完成上传到 100%，但图像没有上传到调试服务器，也没有在编辑器中显示我如何配置这个图像工具。请帮助我的项目正在等待中。

这是我的代码。

```
protected void ajaxFileUpload_OnUploadComplete(object sender,  AjaxControlToolkit.AjaxFileUploadEventArgs e)
    {
        hee.AjaxFileUpload.SaveAs(@"~\Container\temp\" + e.FileName);
        e.PostedUrl = Page.ResolveUrl(@"~\Container\temp\" + e.FileName);
    } 
```

asp代码：

```
<asp:TextBox
    ID="txtComments"
    TextMode="MultiLine"
    Columns="100"
    Rows="40"
    Runat="server" />
<ajaxToolkit:HtmlEditorExtender ID="hee" OnImageUploadComplete="ajaxFileUpload_OnUploadComplete" TargetControlID="txtComments" DisplaySourceTab="true" EnableSanitization="true" Runat="server" >
    <Toolbar> 
            <ajaxToolkit:Undo />
            <ajaxToolkit:Redo />
            <ajaxToolkit:Bold />
            <ajaxToolkit:Italic />
            <ajaxToolkit:Underline />
            <ajaxToolkit:StrikeThrough />
            <ajaxToolkit:Subscript />
            <ajaxToolkit:Superscript />
            <ajaxToolkit:JustifyLeft />
            <ajaxToolkit:JustifyCenter />
            <ajaxToolkit:JustifyRight />
            <ajaxToolkit:JustifyFull />
            <ajaxToolkit:InsertOrderedList />
            <ajaxToolkit:InsertUnorderedList />
            <ajaxToolkit:CreateLink />
            <ajaxToolkit:UnLink />
            <ajaxToolkit:RemoveFormat />
            <ajaxToolkit:SelectAll />
            <ajaxToolkit:UnSelect />
            <ajaxToolkit:Delete />
            <ajaxToolkit:Cut />
            <ajaxToolkit:Copy />
            <ajaxToolkit:Paste />
            <ajaxToolkit:BackgroundColorSelector />
            <ajaxToolkit:ForeColorSelector />
            <ajaxToolkit:FontNameSelector />
            <ajaxToolkit:FontSizeSelector />
            <ajaxToolkit:Indent />
            <ajaxToolkit:Outdent />
            <ajaxToolkit:InsertHorizontalRule />
            <ajaxToolkit:HorizontalSeparator />
            <ajaxToolkit:InsertImage />
        </Toolbar>
    </ajaxToolkit:HtmlEditorExtender> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:33:35.160

您似乎没有使用双反斜杠作为路径：

```
protected void ajaxFileUpload_OnUploadComplete(object sender,  AjaxControlToolkit.AjaxFileUploadEventArgs e)
{
    hee.AjaxFileUpload.SaveAs(@"~\\Container\\temp\\" + e.FileName);
    e.PostedUrl = Page.ResolveUrl(@"~\\Container\\temp\\" + e.FileName);
} 
```

我希望这有帮助

# android - 首次应用程序安装时间

> ID：11383478
> 
> 赞同：2
> 
> 时间：2012-07-08T13:21:35.700
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我一直在尝试获取某个包在android系统中的首次安装时间！（第三方应用程序）我使用包信息来获取详细信息，然后使用 FirstInstallTime() 方法获取日期和时间。但它返回一个我不知道转换的日志值！谁能帮我将此值转换为日期时间值！

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T15:26:03.513

经典永远不会过时:)

```
private String getDateTime() {
    // get date time in custom format
    SimpleDateFormat sdf = new SimpleDateFormat("[yyyy/MM/dd - HH:mm:ss]");
    return sdf.format(new Date(appInfo.firstInstallTime));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-19T11:14:30.203

[PackageInfo.firstInstallTime以](http://developer.android.com/reference/android/content/pm/PackageInfo.html#firstInstallTime)*“Unix 时间”*为您提供安装时间（自*“纪元”*以来的毫秒数，即*1970 年 1 月 1 日 00:00:00 UTC*）。您可以使用[java.util.Date](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)或[java.text.DateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html)来格式化这个时间。

```
private static final String TAG = "MyActivity";

...
packageName = ...
...

try {
    PackageInfo packageInfo = pm.getPackageInfo(packageName, PackageManager.GET_PERMISSIONS);

    Date installTime = new Date( packageInfo.firstInstallTime );
    Log.d(TAG, "Installed: " + installTime.toString());

    Date updateTime = new Date( packageInfo.lastUpdateTime );
    Log.d(TAG, "Updated: " + updateTime.toString());
}
catch ( PackageManager.NameNotFoundException e ) {
    e.printStackTrace();
} 
```

您还可以使用[java.text.SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)更改日期格式。

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

String installTime = dateFormat.format( new Date( packageInfo.firstInstallTime ) );
Log.d(TAG, "Installed: " + installTime);

String updateTime = dateFormat.format( new Date( packageInfo.lastUpdateTime ) );
Log.d(TAG, "Updated: " + updateTime); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T13:30:38.653

这只是一个存储为 long 的日期，没有魔法只是从中创建一个日期。

```
Date firstInstallTime = new Date(pInfo.firstInstallTime); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T14:13:53.320

如果你得到的**是长类型的时间**......然后尝试以下......

```
public class Chk {
public static void main(String[] args){

    Long l = System.currentTimeMillis();
    System.out.println("Time in long: "+l);

    System.out.println(new Date(l));

    }

} 
```

# c - c socket发送的文件包含其他消息

> ID：11383480
> 
> 赞同：0
> 
> 时间：2012-07-08T13:21:46.237
> 
> 标签：c, sockets, sendfile

这是 RETR cmd 的**简单**实现，**服务器**首先接收文件名，然后发送文件。

```
/************************* RECEIVE FILE NAME AND SEND FILE *************************/
if(recv(newsockd, buffer, sizeof(buffer), 0) < 0){
  perror("error receiving file name");
  onexit(newsockd, sockd, 0, 2);
}
other = strtok(buffer, " ");
filename = strtok(NULL, "\n");
if(strcmp(other, "RETR") == 0){
  printf("received RETR request\n");
} else onexit(newsockd, sockd, 0, 2);

fd = open(filename, O_RDONLY);
    if (fd < 0) {
    fprintf(stderr, "cannot open '%s': %s\n", filename, strerror(errno));
    onexit(newsockd, sockd, 0, 2);
}

if(fstat(fd, &fileStat) < 0){
    perror("Error fstat");
    onexit(newsockd, sockd, fd, 3);
}
fsize = fileStat.st_size;
if(send(newsockd, &fsize, sizeof(fsize), 0) < 0){
    perror("Error on sending file size\n");
    onexit(newsockd, sockd, fd, 3);
}

rc = sendfile(newsockd, fd, &offset, fileStat.st_size);
if(rc == -1) {
        fprintf(stderr, "error sending file: '%s'\n", strerror(errno));
        onexit(newsockd, sockd, fd, 3);
}
if((uint32_t)rc != fsize) {
    fprintf(stderr, "transfer incomplete: %d di %d bytes sent\n", rc, (int)fileStat.st_size);
    onexit(newsockd, sockd, fd, 3);
}
memset(buffer, 0, sizeof(buffer));
strcpy(buffer, "226 File trasferito con successo\n\0");
if(send(newsockd, buffer, strlen(buffer)+1, 0) < 0){
  perror("Errore durante l'invio 226");
  onexit(newsockd, sockd, 0, 2);
}
memset(buffer, 0, sizeof(buffer));
strcpy(buffer, "221 Goodbye\n\0");
if(send(newsockd, buffer, strlen(buffer)+1, 0) < 0){
  perror("Errore durante l'invio 221");
  onexit(newsockd, sockd, 0, 2);
}
/************************* END PART *************************/ 
```

这是客户端程序的片段：

```
/************************* SEND FILE NAME AND RECEIVE FILE *************************/
printf("Inserire il nome del file da scaricare: ");
if(fgets(dirpath, BUFFGETS, stdin) == NULL){
    perror("fgets name file");
    close(sockd);
}
filename = strtok(dirpath, "\n");
sprintf(buffer, "RETR %s", dirpath);
if(send(sockd, buffer, strlen(buffer), 0) < 0){
    perror("error sending file name");
    close(sockd);
    exit(1);
}
if(read(sockd, &fsize, sizeof(fsize)) < 0){
    perror("error on receiving file size\n");
    close(sockd);
    exit(1);
}
fd = open(filename, O_CREAT | O_WRONLY, 0644);
if (fd  < 0) {
    perror("open");
    exit(1);
}

while(((uint32_t)total_bytes_read != fsize) && ((nread = read(sockd, filebuffer, fsize)) > 0)){
    if(write(fd, filebuffer, nread) < 0){
        perror("write");
        close(sockd);
        exit(1);
    }
    total_bytes_read += nread;
}
memset(buffer, 0, sizeof(buffer));
if(recv(sockd, buffer, 34, 0) < 0){
    perror("Error receiving 226");
    close(sockd);
    exit(1);
}
printf("%s", buffer);
memset(buffer, 0, sizeof(buffer));
if(recv(sockd, buffer, 13, 0) < 0){
    perror("Error receiving 221");
    close(sockd);
    exit(1);
}
printf("%s", buffer);
memset(buffer, 0, sizeof(buffer));
close(fd);
/************************* END PART *************************/ 
```

问题是什么？
问题是已发送的文件还包含服务器发送的 2 条消息（226 和 221），我不知道为什么会出现这种行为 Oo
示例：
`RETR tryfile.txt`
`File tryfile.txt received`
`cat tryfile.txt`
*“这是 tryfile.txt，你好客户端
226 文件 trasferito con successo
221 再见”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:11:58.507

strlen() 不**计算**\0，因此 strlen() 将返回 12：

```
strcpy(buffer, "221 Goodbye\n\0");
if(send(newsockd, buffer, strlen(buffer), 0) < 0){ ...} 
```

客户端使用硬编码值 13。（发送 33 和预期 34 的其他状态消息相同。）顺便说一句：您*确实*需要一些缓冲机制，至少在客户端中。

更新：要显示带有“嵌入空值”的字符串的 strlen：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
fprintf(stderr, "strlen is %u\n", (unsigned) strlen("221 Goodbye\n\0") );

return 0;
} 
```

解释：strlen() 只计算字符，**直到遇到 '\0' 字符**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:40:04.690

我发现并（最终）解决了这个问题。
这是解决方案：

```
uint32_t fsize_tmp = fsize;
while(((uint32_t)total_bytes_read != fsize) && ((nread = read(sockd, filebuffer, fsize_tmp)) > 0)){
     if(write(fd, filebuffer, nread) < 0){
    perror("write");
    close(sockd);
    exit(1);
      }
      total_bytes_read += nread;
      fsize_tmp -= nread;
} 
```

问题是由于我没有检查“动态”文件大小（如果文件以 75% 的速度发送，我的 while 循环再次预期 fsize，这是不可能的）所以使用这段代码，我每次都会减小文件大小需要:)

# html - 在占位符中使用 html

> ID：11383482
> 
> 赞同：0
> 
> 时间：2012-07-08T13:22:04.537
> 
> 标签：html, ruby-on-rails, icons, twitter-bootstrap, placeholder

是否可以在`placeholder`属性中使用html？例如，我想使用`<i class="icon-search"></i>`而不是 `Search`文本。

```
=form_tag search_editions_path, method: :get, class: 'navbar-search pull-left' do
  =text_field_tag :q, nil, class: 'search-query', placeholder: 'Search' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:31:17.853

不，占位符属性只接受纯文本，对于搜索文本输入，您可以在它们上使用绝对定位元素，并且对于用户来说，它看起来像是在文本输入中。

# java - 为什么 jvisualvm 看不到我的 Play Framework 应用程序？

> ID：11383484
> 
> 赞同：2
> 
> 时间：2012-07-08T13:22:30.627
> 
> 标签：java, playframework, jmx, jvisualvm

我正在尝试使用 jvisualvm 来查看 Play Framework 应用程序。

**环境**：Windows 7 位，Java 7 64 位。

**步骤**：

1) 添加`-Dcom.sun.management.jmxremote`到`_JAVA_OPTIONS`环境变量。

[播放输出](https://gist.github.com/3070945)

> 拿起_JAVA_OPTIONS：-Xms800m -Xmx1500m -XX:PermSize=64m -XX:MaxPermSize=256m -Dcom.sun.manageme nt.jmxremote

2) 运行 jvisual vm（来自`C:\Program Files\java\jdk1.7.0_03\bin`）。

3) 我在本地进程列表中没有看到 Play 进程。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T13:00:19.073

我的环境

*   开发者 PC：Windows 8，JDK1.6 中的 VisualVM
*   服务器：Ubuntu，JDK1.6，玩1.2.2

要连接到本地 Play 应用程序，唯一的选项**“-Dcom.sun.management.jmxremote”**就可以了。

但是要连接到远程 Play 应用程序，JVM 需要更多选项。

由于设置**_JAVA_OPTIONS**环境会影响所有Java程序，所以我更改了播放启动脚本：**framework/pym/play/application.py**

```
def java_cmd(self, java_args, cp_args=None, className='play.server.Server', args = None):
  ...
  java_args.append('-Dcom.sun.management.jmxremote')
  java_args.append('-Dcom.sun.management.jmxremote.port=5678')
  java_args.append('-Dcom.sun.management.jmxremote.ssl=false')
  java_args.append('-Dcom.sun.management.jmxremote.authenticate=false')
  java_args.append('-Dcom.sun.management.jmxremote.local.only=false')
  java_args.append('-Djava.rmi.server.hostname=192.168.0.10')

  java_cmd = [self.java_path(), '-javaagent:%s' % self.agent_path()] + java_args + ['-classpath', cp_args, '-Dapplication.path=%s' % self.path, '-Dplay.id=%s' % self.play_env["id"], className] + args
  return java_cmd 
```

然后重新启动 Play 应用程序，并从 VisualVM 重新连接它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T18:13:35.157

如果进程指定了 java.io.tmpdir，则存在阻止进程在 jvisualvm（或 jps）中显示的错误。请参阅[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7009828](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7009828)。

此外，从 Java 6 开始就不需要设置 com.sun.management.jmxremote（至少不需要连接到同一台机器上的进程）。请参阅[http://docs.oracle.com/javase/6/docs/technotes/guides/management/agent.html](http://docs.oracle.com/javase/6/docs/technotes/guides/management/agent.html)。

# mysql - 我在这个 sql 请求中缺少什么？

> ID：11383490
> 
> 赞同：1
> 
> 时间：2012-07-08T13:23:40.987
> 
> 标签：mysql, jquery-autocomplete

当然加载的数据库。get 术语是一个自动完成字符串，可以在数据库中的 groupname 下找到，但如您所见，如果它不匹配，我不想运行 if，如果找到，是的第一部分。问题是，如果我替换实际字符串的 get term 部分，它可以工作，如果我添加数据库中不存在的字符串，它仍然像魅力一样工作。但是当 get term 完成后，不管字符串是否可以找到，numrows 无论如何都会大于 0。为什么？= 和 LIKE 也试过了 ofc

```
$query = "select * from `gamegroups` where `groupname` = '%{$_GET['term']}%'";

$resultset = mysql_query($query);

if (mysql_num_rows($resultset) > 0 ){

$lolz = array();

while( $row = mysql_fetch_assoc($resultset) ) {
    $lolz[] = $row['gameid'];
}
echo json_encode($lolz);
            }else{print "no match debug";}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:33:33.053

```
$query =  "select * from gamegroups where groupname LIKE '%" . mysql_real_escape_string($_GET['term']) . "%' LIMIT 1"; 
```

由于通配符，我假设您想要类似的结果？

**你真正想要的是做一个相关性分数，并返回按相关性排序的结果，但这超出了这个问题的范围。**

# mysql - 检查列的唯一值

> ID：11383493
> 
> 赞同：7
> 
> 时间：2012-07-08T13:24:12.273
> 
> 标签：mysql, sql

我的桌子：

```
id attribute
1  2
1  2
2  3
2  4
5  1
5  1
6  3
6  3
6  5 
```

现在我只想输出那些`id`，`attribute`如果每个属性都相同`id`。

在此示例表中，输出将是

```
id attribute
1  2
5  1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T13:54:17.643

```
SELECT id, MIN(attribute) AS attribute 
FROM test  
GROUP BY id
HAVING COUNT(DISTINCT attribute) = 1 ; 
```

或者：

```
SELECT id, MIN(attribute) AS attribute
FROM test 
GROUP BY id
HAVING MIN(attribute) = MAX(attribute) ; 
```

我希望最后一个版本在索引上非常有效`(id, attribute)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-08T13:32:29.790

您可以使用这种方法：

```
SELECT DISTINCT id, attribute 
FROM test t1 
WHERE (SELECT count(DISTINCT attribute) 
       FROM test t2 
       WHERE t2.id = t1.id) = 1 
```

更好的方法可能是：

```
SELECT
   DISTINCT t1.id, t1.attribute
FROM
   test t1,
   (
      SELECT
         id,
         count(DISTINCT attribute) COUNT
      FROM
         test
      GROUP BY
         id
      HAVING
         COUNT = 1
   ) t2
WHERE
   t1.id = t2.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T13:49:39.347

好吧，我会改用以下方法：

```
 SELECT DISTINCT ta.id, ta.attribute
       FROM test ta
  LEFT JOIN test tb
         ON ta.id = tb.id AND ta.attribute <> tb.attribute
      WHERE tb.id IS NULL; 
```

...因为我通常倾向于至少尝试用连接表替换嵌套查询。当然，如果你的桌子很小，那也没关系。

# java - Spring WS 和 JAXB - 配置 SOAPMessageDispatcher、DefaultMethodEndpointAdapter 和 MarshallingPayloadMethodProcessor

> ID：11383494
> 
> 赞同：9
> 
> 时间：2012-07-08T13:24:20.027
> 
> 标签：java, spring, jakarta-ee, soap, spring-ws

使用 Spring-WS 时，配置非常少，因为我一直在使用注解。最近我一直在尝试测试如何在 SOAP 响应中包含附件并让它工作，我最终得到了以下配置。

```
<bean id="messageReceiver"
    class="org.springframework.ws.soap.server.SoapMessageDispatcher">
    <property name="endpointAdapters">
        <list>
            <ref bean="defaultMethodEndpointAdapter" />
        </list>
    </property>
</bean> 

<bean id="defaultMethodEndpointAdapter"
    class="org.springframework.ws.server.endpoint.adapter.DefaultMethodEndpointAdapter">
    <property name="methodArgumentResolvers">
        <list>
            <!-- Be careful here! You might need to add more processors if you do 
                more than webservices! -->
            <ref bean="marshallingPayloadMethodProcessor" />
        </list>
    </property>
    <property name="methodReturnValueHandlers">
        <list>
            <ref bean="marshallingPayloadMethodProcessor" />
        </list>
    </property>
</bean>     

<bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="contextPath" value="com.mypackage.ws" />
    <property name="mtomEnabled" value="true" />
</bean>

<bean id="marshallingPayloadMethodProcessor"
    class="org.springframework.ws.server.endpoint.adapter.method.MarshallingPayloadMethodProcessor">
    <constructor-arg ref="marshaller" />
    <constructor-arg ref="marshaller" />
</bean> 
```

有了以上内容，我可以生成带有附件的 SOAP 响应。问题是我真的不明白发生了什么。（即，启用 MTOM 附件的上述配置是做什么的。

要启用附件：

*   为什么需要配置 JAXB 编组器？如果没有此配置，所有不使用附件的 Web 服务都可以正常工作。我所要做的就是使用@EndPoint 注释。非附件 web 服务的请求/响应对象也是基于 JAXB 的，因此这表明我可能没有正确执行此操作（即使它有效）。

*   上述配置中显示的 messageReceiver 和 defaultmethodEndpointAdapter bean 的用途是什么？没有这些，非附件端点可以正常工作。

*   最后可以注释上述任何配置而不是 XML 吗？我注意到 JAX-WS 有一个 @MTOM 注释，但找不到 Spring-WS 的等价物

尽管服务按我预期的那样工作，但我有点担心配置可能不正确。我想了解为什么需要这些，因此也许我可以更好地决定我所做的是对还是错。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-30T03:05:24.667

如果你不自己做，Spring 会自动为你创建这些 bean。这就是为什么你以前不必这样做。

要启用 mtom，请在编组器上设置 mtomEnabled = true。由于您自己创建了编组器，因此您必须专门创建依赖于它的 bean，否则 Spring 不会知道它。

我不是 100% 确定 MarshallingPayloadMethodProcessor 是否是默认创建的，但没有自己定义，但我 100% 确定 DefaultMethodEndpointAdapter 是。

DefaultMethodEndpointAdapter 的工作只是映射您的端点，它能够执行任务，例如在调用您的端点之前委托参数处理程序，并从中获取返回值并将其转换为 mtom 消息。这就是 MarshallingPayloadMethodProcessor 所做的。

上面也可以注释。查看位于此处的 Spring WS mtom 示例：[https ://github.com/spring-projects/spring-ws-samples/tree/master/mtom](https://github.com/spring-projects/spring-ws-samples/tree/master/mtom)

总而言之，您必须创建所有额外 bean 的原因是您自定义了编组器。既然你这样做了，你还必须创建任何依赖它的 bean，传入依赖项（除非它使用 Spring 将按约定查找的 bean 名称（如 messageSource）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-29T06:47:03.620

Spring 变得如此庞大，以至于很难为我们所有的问题获取正确的信息。我主要遇到了我们为 SoapMessageDispatcher 创建 bean 的 messageReceiver 的问题。这个例子

[https://github.com/spring-projects/spring-ws-samples/tree/master/mtom](https://github.com/spring-projects/spring-ws-samples/tree/master/mtom)

我看到该配置适用，但是当我们为端点添加 @SoapHeader 注释时，它会因“端点错误没有适配器”而失败。

我看到的唯一修复是从配置中删除 messageReceiver bean。

因此，您的配置足以调用 Web 服务。

```
@Bean
public ServletRegistrationBean messageDispatcherServlet(ApplicationContext context) {
    MessageDispatcherServlet servlet = new MessageDispatcherServlet();
    servlet.setApplicationContext(context);
    servlet.setTransformWsdlLocations(true);
    return new ServletRegistrationBean(servlet, "/ws/*");
}

@Bean(name = "studentDetails")
public Wsdl11Definition studentDefinition() {
  SimpleWsdl11Definition wsdl11Definition = new SimpleWsdl11Definition();
  wsdl11Definition.setWsdl(new ClassPathResource("schema/studentDetails.wsdl"));
  return wsdl11Definition;
}

@Bean
public SaajSoapMessageFactory messageFactory() {
    SaajSoapMessageFactory s = new SaajSoapMessageFactory();
    s.setSoapVersion(SoapVersion.SOAP_12);
    return s;
} 
```

# unix - libpcap，有效负载偏移 66 但 sizeof(headers) + doff = 62

> ID：11383497
> 
> 赞同：0
> 
> 时间：2012-07-08T13:25:00.613
> 
> 标签：unix, tcp, network-programming, libpcap, packet-sniffers

我在星期天用 libpcap 来了解数据包嗅探，我已经到了可以读取数据包和元数据的地步。当我通过嗅探一些数据包来检查我的代码时，我发现我一定有一个错误。

当我从我父亲那里嗅探网页时：[http://www.telpho.de](http://www.telpho.de)，我得到了整个服务器的响应。从 200 OK 开始直到 ... 但是在每个数据包上，开头有 4 个字节不是 ASCII。在下面的代码中，当我将 for 循环更改为 (i = 0) 时，也会打印 4 个字节。当我将其保留在 (i = 4) 时，有效负载将从收到的第一个 ASCII 字符完美显示。

我现在的问题是，我计算 data_offset 错误吗？有没有我没有设置的标志？我忘记计算 tcp 选项了吗？

我还认为这可能与填充有关。TCP 标准说 TCP 标头长度应该是 32 的倍数。但是 32 - 20 = 12 .. 所以这是 3 个字节的差异。

例如，计算是这样的吗？

```
TCP_HDR_SIZE = 32
sizeof(struct tcphdr) = 20
tcp->doff = 8    

sizeof(struct tcphdr) + tcp->doff = 28
TCP_HDR_SIZE - 28 = 4    <--- the 4 bytes i am looking for??? Maybe options? 
```

这是代码：

```
void handle_packet_ip(const struct pcap_pkthdr *header, const u_char* data) {
  struct ip *ip;
  struct tcphdr *tcp;
  int ip_len;
  int data_offset;
  int payload_len;
  int i;
  unsigned char* payload;

  ip = (struct ip*)(data + sizeof(struct ether_header));
  ip_len = (ip->ip_hl & 0x0f) * 4;

  tcp = (struct tcphdr*)(data + sizeof(struct ether_header) + ip_len);
  printf("sizeof(ip): %d\n", sizeof(struct ip));
  printf("ip_len: %d\n", ip_len);
  printf("sizeof(ether_header): %d\n", sizeof(struct ether_header));
  printf("sizeof(tcp): %d\n", sizeof(struct tcphdr));

  data_offset = sizeof(struct ether_header) + ip_len + sizeof(struct tcphdr) + tcp->doff;
  payload_len = header->len - data_offset;

  payload = (unsigned char*)(data + data_offset);

  printf("IP PACKET\n");
  printf("\tlen: %u\n", ntohs(ip->ip_len));
  printf("\tsrc: %s\n", inet_ntoa(ip->ip_src));
  printf("\tdst: %s\n", inet_ntoa(ip->ip_dst));
  printf("\thl: %d\n", (ip->ip_hl & 0x0f));

  printf("READ TCP\n");
  printf("\tsrc port: %u\n", ntohs(tcp->source));
  printf("\tdst port: %u\n", ntohs(tcp->dest));
  printf("\tdata_offset: %d\n", data_offset); 
  printf("\tdoff: %d-%d\n", tcp->doff, ntohs(tcp->doff));
  printf("\tpayload len: %d\n", payload_len);
  printf("\tFLAGS\n");
  printf("\t\tFIN: %i\n", tcp->fin);
  printf("\t\tSYN: %i\n", tcp->syn);
  printf("\t\tACK: %i\n", tcp->ack);
  printf("PAYLOAD: \n");
  **for (i = 4; i < payload_len; ++i) {**
    printf("%c", payload[i]);
  }
  printf("\n");

  printf("\n");
  printf("END OF PAYLOAD\n");
} 
```

输出：

```
Grabbed Packet:
Length: 74
    Capture Length: 74
sizeof(ip): 20
ip_len: 20
sizeof(ether_header): 14
sizeof(tcp): 20
IP PACKET
len: 60
src: 80.237.132.106
dst: 192.168.0.17
hl: 5
READ TCP
src port: 80
dst port: 57662
data_offset: 62     **this should be 64 ??**
doff: 8
payload len: 10
FLAGS
    FIN: 0
    SYN: 1
    ACK: 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:39:29.150

这个好像不太对

```
data_offset = sizeof(struct ether_header) + ip_len + sizeof(struct tcphdr) + tcp->doff 
```

tcp->doff 已经包含了 tcp 头，它是 4 字节的倍数。所以你想要

```
 data_offset = sizeof(struct ether_header) + ip_len + tcp->doff * 4; 
```

仅使用 sizeof(struct tcphdr) 不考虑可能出现的任何 TCP 选项。

请注意，您的代码假设了很多：

*   假设没有以太网 vlan
*   假设 IP 数据包在以太网之上（而不是例如 arp 或 stp）
*   假设 TCP 高于 IP
*   假设您实际上已经捕获了所有需要的数据。（即您应该验证长度不超过 header->cap_len）

# jquery - 尝试使用 Google 地图预加载图标时出错 - INVALID_STATE_ERR: DOM Exception 11

> ID：11383505
> 
> 赞同：3
> 
> 时间：2012-07-08T13:26:20.613
> 
> 标签：jquery, google-maps, preloading, uncaught-exception

提前感谢您的帮助，我已经把头发拉了几天了。我正在尝试创建一个 jQuery Google 地图插件，除了许多其他功能之外，它还允许用户指定自定义图标和图标阴影的路径。然后，这应该能够计算出图像的尺寸并将它们放置在地图上。除了在 IE9 和 Chrome 中某些页面刷新时，一切都运行良好，只显示一个图标，我收到一个未捕获的错误：INVALID_STATE_ERR: DOM Exception 11。仅供参考，它似乎在 Firefox 中一直有效。

这是插件（例如精简版）：

```
;
(function ($, undefined) {
$.fn.irvMap = function (options) {
    var directionsDisplay, directionsService = new google.maps.DirectionsService(),
        map, cloud, counter = 0,
        i, markers = [],
        infowindow = null,
        request = null,
        settings = $.extend({
            locations: [{
                "name": "Midland",
                "lat": "43.620916",
                "lng": "-84.248028"
            }, {
                "name": "Texas",
                "lat": "32.737328",
                "lng": "-97.107525"
            }]
        }, options);
    var lat = 0;
    var lng = 0;
    var halfzies = function (i) {
            return i / 2
        }
    return this.each(function () {
        var thisElement = this;
        var mapIcon = new Image();
        var mapIconShadow = new Image();
        var icons = mapIcon,mapIconShadow;
        mapIcon.src = "/Images/mapIcon.png";
        mapIconShadow.src = "/Images/mapIconShadow.png";
        icons.onload = function () {
            var image = new google.maps.MarkerImage(mapIcon.src, new google.maps.Size(mapIcon.width, mapIcon.height), new google.maps.Point(0, 0), new google.maps.Point(halfzies(mapIcon.width), halfzies(mapIcon.height)));
            var shadow = new google.maps.MarkerImage(mapIconShadow.src, new google.maps.Size(mapIconShadow.width, mapIconShadow.height), new google.maps.Point(0, 0), new google.maps.Point(halfzies(mapIconShadow.width), halfzies(mapIconShadow.height)));
            var makeMarker = function (location, id) {
                    var point = new google.maps.LatLng(location.lat, location.lng);
                    var markerOptions = {
                        map: map,
                        shadow: shadow,
                        icon: image,
                        position: point
                    };
                    var marker = new google.maps.Marker(markerOptions);
                    //markers.push(marker);
                    marker.setMap(map);
                    var content = '<input type=\"hidden\" id=\"end\" value=\"' + location.lat + ',' + location.lng + '\"/>';
                    content = content.replace(/undefined/g, '');
                    google.maps.event.addListener(marker, 'click', function (e) {
                        if (infowindow) {
                            infowindow.close();
                        }
                        infowindow = new google.maps.InfoWindow({
                            position: marker.getPosition(),
                            map: map,
                            content: content
                        });
                        if (request != null) {
                            request.destination = marker.getPosition()
                            getDirections(request);
                            $('html,body').animate({
                                scrollTop: offset
                            }, 500);
                        }
                    });
                }
            $.each(settings.locations, function (i, val) {
                lat += parseFloat(this.lat) || 0
                lng += parseFloat(this.lng) || 0
            });
            lat = lat / settings.locations.length;
            lng = lng / settings.locations.length;
            var options = {
                center: new google.maps.LatLng(lat, lng),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }
            map = new google.maps.Map(thisElement, options);
            var bounds = new google.maps.LatLngBounds();
            $.each(settings.locations, function (i, val) {
                makeMarker(settings.locations[i], i);
                var ll = new google.maps.LatLng(settings.locations[i].lat, settings.locations[i].lng);
                bounds.extend(ll);
            });
            map.fitBounds(bounds);
        }
    })
};
})(jQuery); 
```

我很确定它与此有关：

```
 var mapIcon = new Image();
  var mapIconShadow = new Image();
  var icons = mapIcon,mapIconShadow;
  mapIcon.src = "/Images/mapIcon.png";
  mapIconShadow.src = "/Images/mapIconShadow.png";
  icons.onload = function () { 
```

但我在过去 3 天里一直在玩这个代码，但似乎无法弄清楚。这是我的测试页面，非常感谢任何帮助：http: [//lab.interactrv.com/preloadTest.aspx](http://lab.interactrv.com/preloadTest.aspx)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:01:10.123

问题似乎源于这一行：

```
var icons = mapIcon,mapIconShadow; 
```

我看到它的方式，`icons`只分配给图标，而不是阴影，例如，运行

```
var x = 1;
var y = 2;
var n = x, y;

alert(n);  // gives 1, but 2 is in no way associated to n 
```

所以`icons.onload`实际上只检查图标是否已加载，而不是阴影。如果阴影首先加载，一切都很好。如果图标恰好在阴影之前加载，您将获得未定义的属性。

只有在加载图标和阴影时，您必须找到一种方法来触发大部分功能。

我尝试了 jQuery 选择器`$("img").load()`，甚至为新创建的图标和阴影分配 ID，以捕获图标和阴影的预加载，但没有成功。最终，我将这对布尔条件放在一起，虽然我无法证明它是防弹的，但它在十次 Chrome 重新加载后幸存下来。

我把它留给你写更复杂的代码:)

```
 return this.each(function () {
        var thisElement = this;
        var mapIcon = new Image();
        var mapIconShadow = new Image();
        //var icons = mapIcon,mapIconShadow;

        mapIcon.src = "http://lab.interactrv.com/Images/mapIcon.png";
        mapIconShadow.src = "http://lab.interactrv.com/Images/mapIconShadow.png";

    var iconLoaded = false;
    var iconShadowLoaded = false;

        mapIcon.onload = function() { iconLoaded = true; if(iconShadowLoaded) { makeMarkerImages(); } };
        mapIconShadow.onload = function() { iconShadowLoaded = true; if(iconLoaded) { makeMarkerImages(); } };

        var makeMarkerImages = function () {

            var image = new google.maps.MarkerImage(mapIcon.src, new google.maps.Size(mapIcon.width, mapIcon.height), new google.maps.Point(0, 0), new google.maps.Point(halfzies(mapIcon.width), halfzies(mapIcon.height)));
        // CONTINUED AS BEFORE 
```

# javascript - JavaScript使用innerHTML和动态值传递给innerHTML

> ID：11383506
> 
> 赞同：0
> 
> 时间：2012-07-08T13:26:24.600
> 
> 标签：javascript, dom

```
var greentext='shopping';
var colors=new Array('green','blue','red','violet','brown');
for(i=0;i<colors.length;i++)
{
 //suppose consider colors[i] is green
} 
```

当使用 连接`colors[i]+'text'`并传递给某个 div时`innerHTML`，传递的是字符串   `"greentext"`  而不是连接字符串的值`"shopping"`。如何像上面那样传递动态创建的字符串的值？

希望我的问题很清楚.....请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:35:15.890

我会完全不同：

```
 var text = {
    green: 'shopping',
    blue: 'contemplating infinity',
    red: 'cooking beans',
    violet: 'writing poetry'
  };

  var colors = ['green', 'blue', 'red', 'violet' ];
  for (var i = 0; i < colors.length; ++i) {
    alert( text[ colors[i] ] );
  } 
```

结构化数据最好用您使用的任何编程语言的实际结构来表示。JavaScript 足够灵活，您*可以*“构造”变量名，但它不是惯用的。在这里，我制作了一个简单的对象，其属性与您的颜色相对应。

# wpf - WPF/C#：从情节提要触发点击事件

> ID：11383507
> 
> 赞同：0
> 
> 时间：2012-07-08T13:26:29.413
> 
> 标签：wpf, triggers, storyboard, expression-blend

是否可以从`Storyboard`使用 Expression Blend 4 触发点击事件？

我试图根据我在情节提要中设置的持续时间触发点击事件。

```
<Storyboard x:Key="TriggerButtonClick">
 ... something here
</Storyboard> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:08:19.307

您只能在 Storyboard、Blend 或 Visual Studio 中启动动画。

# android - 如何在Android中迭代drawbles？

> ID：11383508
> 
> 赞同：0
> 
> 时间：2012-07-08T13:26:38.260
> 
> 标签：android, resources, iteration

在我的应用程序中，我在 hdpi-drawables 文件夹中有相当多的图形文件，它们需要成为列表活动中的图标。所以在我的**ArrayAdapter**中，我将值设置为*setImageDrawable*

所以，我需要迭代所有文件的方法，这些文件在我的资源中以从中获取名称和其他一些属性。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:38:55.843

你可以用这个方法通过它的名字找到drawable id

```
int id = getResources().getIdentifier("name_of_resource", "drawable", getPackageName()); 
```

# c++ - 在 Mac OS X 上使用 CGL 设置 OpenGL 上下文

> ID：11383510
> 
> 赞同：1
> 
> 时间：2012-07-08T13:27:00.783
> 
> 标签：c++, c, macos, opengl, glut

我正在尝试在 Mac OS X 上设置 OpenGL 上下文，而不使用 GLUT 或任何类似的东西。这就是我到目前为止所拥有的。

```
CGLPixelFormatAttribute pixelFormatAttributes[] = {
    kCGLPFAOpenGLProfile, (CGLPixelFormatAttribute) kCGLOGLPVersion_3_2_Core,
    kCGLPFAColorSize, (CGLPixelFormatAttribute) 24,
    kCGLPFAAlphaSize, (CGLPixelFormatAttribute) 8,
    kCGLPFAAccelerated,
    kCGLPFAFullScreen,
    kCGLPFADoubleBuffer,
    kCGLPFASampleBuffers, (CGLPixelFormatAttribute) 1,
    kCGLPFASamples, (CGLPixelFormatAttribute) 4,
    (CGLPixelFormatAttribute) 0,
};

CGLPixelFormatObj pixelFormat;
GLint numberOfPixels;
CGLChoosePixelFormat(pixelFormatAttributes, &pixelFormat, &numberOfPixels);

CGLContextObj contextObject;
CGLCreateContext(pixelFormat, 0, &contextObject);
CGLDestroyPixelFormat(pixelFormat);
CGLSetCurrentContext(contextObject);

// OpenGL stuff here
glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(0.0f, 1.0f, 0.0f, 1.0f, -1.0f, 1.0f);

glClear(GL_COLOR_BUFFER_BIT);
glColor3f(1.0f, 1.0f, 1.0f);
glBegin(GL_POLYGON);
    glVertex3f(0.25f, 0.25f, 0.0f);
    glVertex3f(0.75f, 0.25f, 0.0f);
    glVertex3f(0.75f, 0.75f, 0.0f);
    glVertex3f(0.25f, 0.75f, 0.0f);
glEnd();
glFlush();

CGLSetCurrentContext(NULL);
CGLDestroyContext(contextObject); 
```

但这不起作用，我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:30:38.303

你正在做你所描述的——你创建了一个 OpenGL 上下文。您可能对什么是 OpenGL 上下文有错误的理解。它只是一个包含 OpenGL 实例的抽象实体。它不是用户直接可见的任何东西，例如包含 OpenGL 表面的窗口。

使用 OpenGL 创建用户界面元素是不可能的，因为 OpenGL 不是用户界面库。当您说“不使用 GLUT 或任何类似的东西”时，您是在说您不想创建 OpenGL 上下文可以渲染到的可见表面。

要实际创建一个窗口（无论是普通窗口还是全屏窗口），您需要使用 GLUT 或 GLFW 之类的用户界面库。由于您似乎正在构建一个仅 OSX 的应用程序，因此您可能想要使用 AppKit/Cocoa，除非您对 ObjC 不满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T09:51:09.920

看来您必须使用`CGLSetFullScreenOnDisplay()`“打开窗口”。

# tsql - EF4 到数据集？和其他数据透视表的疯狂

> ID：11383513
> 
> 赞同：2
> 
> 时间：2012-07-08T13:27:25.940
> 
> 标签：tsql, entity-framework-4, pivot

简短的问题是：如何在 EF4 中处理数据透视表？除了“pivot client-side”之外的任何建议都将被认为是有帮助的。

一种想法是直接查询数据库并将结果放入数据集中。这不是一个非常绅士的解决方案。我唯一的另一个想法是使用某种反射魔法来为临时对象动态创建属性。我不知道如何在视图中处理它。

这是更长的解释等等：

我的应用程序有一些设备。它允许用户“认领”一件设备，然后为该设备设置一个状态。

相关的表结构如下所示：

```
 EquipmentId, EquipmentName, etc
    ClaimId, StatusChangeId, EquipmentId, UserId
    StatusChangeId, StatusId, etc
    StatusId, StatusName, etc 
```

我的查询查找用户的所有相关声明（未删除或存档或新声明，只有设置了状态的声明），获取每个声明的最新状态，对其进行统计，然后将它们与各自的设备相关联。

这个大屁股动态查询旋转数据以创建一个结果集，例如：

```
equipment name    Total    Status1  Status2  Status 3
Computer            4         0        3        1
Monitor             6         1        5        0 
```

问题是......我如何在 EF4 中处理它？显然，没有干净的解决方案，因为状态是动态的并且作为列返回。这意味着对象必须在运行中神奇地创建属性。在接下来的几周内，状态不太可能发生变化，因此作为临时解决方案，我已经强制向它提供了一个带有硬编码状态的对象。但这非常丑陋，有点违背了我的动态列的目的，以及整个状态表的目的。

我唯一的另一个想法是将我漂亮的新查询拆分为一个很小的查询，该查询只需不到一秒的时间就可以针对 1000 多条记录运行，该查询一次获取单个设备的状态和计数，并将它们放在一起在代码中。

对于拥有几百种不同类型设备的用户来说，这意味着要访问数据库几百次。我还有两个基于这个查询的其他查询，它们会获取与基本用户相关联的用户的设备信息......所以如果有一个用户拥有几百种设备，并且他与两个相关联每个拥有 70 种设备类型的其他用户，并且他们有关联的用户......你明白了。

**编辑**

我突然想到，这可以通过将列放入一个简单对象列表中来解决，其中 StatusName 和 Count 作为 EquipmentStatus 对象的一部分。可悲的是，我仍然不知道如何进行映射。 [尽管微软承认处理枢轴是一个问题，但他们的官方说法是“我们不知道它什么时候会发生”。](http://connect.microsoft.com/VisualStudio/feedback/details/632688/make-entity-framework-can-accommodate-dynamic-return-columns-from-store-procedure)

**编辑 2**

只要我有时间，我会发布我的最终解决方案。我们这周终于要生产了，所以可能要几天。对不起任何来这里寻找答案的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:58:13.237

EF 无法处理此类动态查询 - EF 是强类型的，因此您至少需要一个类型（类），其属性与结果集中的列同名。此类型可用于从结果集中具体化记录。

那么如何将这种方法与动态结果集一起使用呢？它需要首先查询数据库以获取实际查询中使用的列的名称，用于`Reflection.Emit`创建具有动态类型的动态程序集（每个查询具有不同结果集的新程序集）并以某种动态方式使用它（可能通过反射）。

> 一种想法是直接查询数据库并将结果放入数据集中。这不是一个非常绅士的解决方案。

`DataSet`，`DataAdapter`并且`DbCommand`是具有动态结果集的查询的类。这些类比在运行时创建程序集的解决方案差多少？DataSet 将允许您在几分钟内实现这一点！

# c - mmap 的指针算法

> ID：11383518
> 
> 赞同：7
> 
> 时间：2012-07-08T13:27:58.617
> 
> 标签：c, pointers, casting, mmap

最近我试图调整某人的 mmap 代码并遇到以下错误。（实际上我现在对他们的代码有点怀疑，因为看起来他们在做一些不必要的事情 - 尝试将 MAP_FIXED 与他们自己的页面对齐内存一起使用。手册页建议使用 NULL 调用 mmap 作为 addr 参数应该在 Linux 上执行此操作。）所以我想我至少会测试使用 NULL 地址调用 mmap。但是，当我更改它时，我不太明白 gcc 向我抛出的错误。他们的代码工作正常，而我将**lvalue required 作为 assignment 的左操作数**。

本质上，他们在做以下事情：

```
 uint8_t * ptr = (uint8_t *)mem;
    if ((uint32_t)ptr % PAGE_SIZE)
    {
        ptr += PAGE_SIZE - ((uint32_t)ptr % PAGE_SIZE);
    } 
```

其中 mem 是一些 malloc 内存的 void *。

我正在尝试或多或少地使用类型转换：

```
 if ((uint32_t)mem % PAGE_SIZE)
    {   
        (uint8_t *)mem += PAGE_SIZE - ((uint32_t)mem % PAGE_SIZE); /* ERROR */
    } 
```

所以我认为我很聪明，并删除了一个我认为不需要的变量。有人可以告诉我为什么我的类型转换关闭了吗？干杯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T13:32:30.773

**你犯的错误是：**

```
(uint8_t *)mem += /* Anything.  */ 
```

您根本无法分配给强制转换的结果。强制转换的结果与原始表达式*的值不同。*

想想这样做会有多奇怪：

```
(int) some_char_variable = 9999; 
```

我曾经[因为同样的原因遇到过麻烦](https://stackoverflow.com/q/11122491/274261)。

使用临时，并写回结果，或者，正如**R..**在他们的评论中所说：

```
mem = (void *) ( ( (uint8_t *) mem) + SOME_EXPRESSION ); 
```

# php - FuelPHP 中 REST 控制器的默认格式

> ID：11383520
> 
> 赞同：0
> 
> 时间：2012-07-08T13:28:32.260
> 
> 标签：php, rest, fuelphp

我已将 rest.php 从 core/config 复制到 app/config 并将 default_format 修改为 json，但如果我不将“.json”附加到 URL，我仍然会得到 XML 格式的响应。

如何在没有格式的 URL 上获得 JSON 响应？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T22:34:05.023

为了确定返回结果的格式，REST 控制器使用以下算法并选择找到的第一个：

1.  如果受保护的属性 $format 包含受支持的格式，则使用它
2.  如果它是受支持的格式，则使用 URL 扩展名
3.  如果路由中包含受支持的格式，则使用 :format 变量指定的格式
4.  使用 HTTP_ACCEPT 标头中定义的格式
5.  使用类的 $rest_format 属性定义的默认值

如果您正在执行 AJAX 请求，您将希望随请求一起发送一些接受标头。对响应类型服务器端进行硬编码被认为是不好的做法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T05:18:20.187

在您的控制器中，

受保护的 $format = 'json';

# solr - .net 的 3.6 或 4 alpha 版本上的 Solr Cloud

> ID：11383523
> 
> 赞同：1
> 
> 时间：2012-07-08T13:29:16.680
> 
> 标签：solr, solrnet

Solr 3.6 是否支持云、多个分片和负载平衡？我指的是这个.. [http://wiki.apache.org/solr/SolrCloud/](http://wiki.apache.org/solr/SolrCloud/)

并且建议将 Solr 4 用于生产用途？我应该在哪里查看 Solr 4 alpha 版本报告的错误？

solrnet 是否适用于 Solr 4 alpha 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:00:01.510

Solr 3.6 不支持 SolrCloud。它确实具有[分布式搜索](http://wiki.apache.org/solr/DistributedSearch)，可用于支持多个分片、负载平衡等，并在应用程序端具有一些逻辑。

Alpha 版本永远不会被“推荐”用于生产用途。与 Solr 3.6 相比，Solr 4 确实具有一些巨大的优势，如果您想冒险，最终由您决定。有关更多信息，请参阅[此](http://www.lucidimagination.com/blog/2012/07/03/4-0-alpha-whats-in-a-name/)。

我认为 Solr 4 Alpha 中没有单独的页面来跟踪错误，但这[列出](https://issues.apache.org/jira/browse/SOLR/fixforversion/12314992)了 Solr 4 final 计划的所有问题。

不确定 SolrNet，但我想它应该可以工作（除了 Solr 4 中引入的新功能）。

# ubuntu - 将 VM 从 KVM 迁移到 Openstack

> ID：11383526
> 
> 赞同：2
> 
> 时间：2012-07-08T13:30:03.340
> 
> 标签：ubuntu, migration, openstack, kvm

我在同一个系统上安装了 KVM 和 Openstack。

我已经在 KVM 中克隆了一个 VM，并且实例正在运行，现在我希望将正在运行的 VM 移动到 Openstack。这里有人对我如何做到这一点有任何建议吗？

如何将虚拟机从 KVM 移动到 Openstack？你能帮我完成步骤吗？我希望我的每个 VM 实例都变为 ACTIVE，并具有可用的 nova 命令。（例如，新星列表、新星删除、新星重启）

这可能吗？如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T15:03:23.353

OpenStack 并非旨在添加在 OpenStack 之外启动的正在运行的 KVM 实例，因为 OpenStack 会做出以下假设：

*   VM 如何连接到网络
*   libvirt 域的名称
*   包含磁盘的文件的位置

最好的做法是拍摄 KVM 实例的快照，将其导出到映像文件，然后将映像文件上传到 OpenStack。

# django - “未找到带有参数 '()' 和关键字参数 '{}' 的 '' 的反向操作。”

> ID：11383534
> 
> 赞同：6
> 
> 时间：2012-07-08T13:31:15.550
> 
> 标签：django, django-templates, django-urls

[我在stackoverflow链接](https://stackoverflow.com/questions/1842389/reverse-for-with-arguments-and-keyword-arguments-not-found)中应用了修复：

```
<a href="{% url shop_index %}"><span>{% trans "Shop List" %}</span></a> 
```

在`urls.py`：

```
url(r'^shop/$', 'index',  name="shop_index"), 
```

但仍然是同样的错误。我哪里错了？

*更新：*

* * *

`Django` **`1.5`**

`Python` **`2.7.2`**

`{% url shop_index %}`给出错误。如果我用`{% url 'shop_index' %}`，没关系。

* * *

`Django` **`1.5.dev17865`**

`Python` **`2.7.3`**

`{% url 'shop_index' %}`给出错误。如果我用`{% url shop_index %}`，没关系。

* * *

这很奇怪。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-08T13:51:43.633

尝试加上`shop_index`引号：

```
<a href="{% url 'shop_index' %}"> 
```

没有引号，`shop_index`将被视为模板变量而不是字符串。

# linux - 如何检查 DISPLAY 是否可以用 PyQt4 打开？

> ID：11383538
> 
> 赞同：1
> 
> 时间：2012-07-08T13:32:07.283
> 
> 标签：linux, pyqt4, x11

我想测试运行可选使用 PyQt4 的程序时图形界面是否可用。如果我做

```
$ DISPLAY= python
>>> import PyQt4.QtGui
>>> PyQt4.QtGui.QApplication()
: cannot connect to X server 
```

python崩溃（`$?`= `1`）。

检查环境变量是不够的`DISPLAY`（值可能无效，XAuth 可能失败等）

使用 PyQt4 检测功能失调显示的正确方法是什么？

* * *

我目前的方法有点hack（我想避免使用[python-xlib](http://python-xlib.sf.net)，因为它似乎没有得到维护）：

```
import XLib.display:
   XLib.display._BaseDisplay()
   # display was opened fine, PyQt4 won't crash
except:
   # don't use PyQt4 since display had some error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:51:48.920

由于 Qt 坚持要使进程崩溃，您可以在另一个进程中进行测试：

```
import subprocess, time, sys
p = subprocess.Popen(sys.executable, stdin=subprocess.PIPE)
p.stdin.write('from PyQt4 import QtGui\napp = QtGui.QApplication([])\n')
p.stdin.close()
time.sleep(0.1)
if p.poll() != 0:
    try:
        p.terminate()
    except OSError:
        pass
    print "No X server"
else:
    print "X ok" 
```

如果是联网的 X 连接，超时可能太短了。

# string - 使用字符串访问字段？

> ID：11383545
> 
> 赞同：0
> 
> 时间：2012-07-08T13:33:02.560
> 
> 标签：string, actionscript-3, dynamic, field

我有`ArrayCollection`带有字段名称的字符串。

我想动态访问对象属性。

```
var myObject:MyObjectType = new MyObjectType();
var fields:ArrayCollection = new ArrayCollection(["f1", "f2", "f3"] );
for (var index:int = 0; index < (event.result as ArrayCollection).length; index++ ) {
    myObject.[fields[index].toString()] = event.result[index];
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:55:19.547

您应该将 for 循环内的行替换为以下内容：

```
myObject[fields[index].toString()] = event.result[index];
//      ^
// Remove the dot 
```

另外，请注意`fields`包含字符串，因此您可以删除该`.toString()`部分：

```
myObject[fields[index]] = event.result[index]; 
```

# wif - WIF：可以在没有活动目录的情况下使用吗？

> ID：11383555
> 
> 赞同：2
> 
> 时间：2012-07-08T13:35:03.393
> 
> 标签：wif

是否可以在没有 Active Directory 的情况下使用 Windows Identity Foundation？

我以为我可以，但我发现的绝大多数东西都在某个时候使用它。我只是使用蹩脚的搜索词吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T16:28:40.940

是的你可以。事实上，WIF 从未直接用于 AD，而是通过 ADFS（Windows 中的另一个组件）。

您可以将 WIF 与任何实现 WS-Federation 协议并颁发 SAML 令牌的身份提供程序一起使用。

在此处查看示例[http://msdn.microsoft.com/en-us/library/ff423674.aspx](http://msdn.microsoft.com/en-us/library/ff423674.aspx)或身份培训工具包（或事件 WIF SDK 示例）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T12:33:20.430

我使用 thinktecture 作为我的 STS，并使用 WIF 作为与 STS 对话的框架。

WIF 只是一个为声明身份验证提供支持的框架，与 ADFS 无关。ADFS 只是 Active Directory 上的 STS 包装器，它提供 MMC 配置以设置依赖方并提供声明转换。根据我的经验，它缺乏现代云类型应用程序的一些要求，并且通常需要额外的服务 (ACS) 来提供现代令牌格式。

ADFS 仅支持 SAML。

有关其工作原理的更多信息可以在我的博客上找到：

[http://garymcallisteronline.blogspot.co.uk/2013/01/aspnet-mvc-4-adfs-20-and-3rd-party-sts.html](http://garymcallisteronline.blogspot.co.uk/2013/01/aspnet-mvc-4-adfs-20-and-3rd-party-sts.html)

# javascript - Ext.getElementById 不适用于 Ext.Controller init 或 onLaunch 事件

> ID：11383558
> 
> 赞同：0
> 
> 时间：2012-07-08T13:35:13.940
> 
> 标签：javascript, extjs, extjs4, extjs-mvc, extjs4.1

我`Ext.getElementById`从应用程序代码的特定部分进行了以下调用，在此上下文中调用时确实有效：

```
init: function() {
    // template method called when app boots; before Viewport is created

    this.control({
        'launcherlist': {
            itemclick: function (dataView, record) {
            Ext.getElementById('element-id');
         },
    }
    ...
} 
```

*但是，在发生任何用户触发的事件之前，*我需要`getElementById`在更早的阶段调用。

 *当应用程序启动时`getElementById`直接在其中调用时[`init`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-init)不起作用；`init`在创建视口之前。

所以我决定重写控制器的[`onLaunch`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-onLaunch)事件，因为`onLaunch`它是一个模板方法`init`，但是在创建 Viewport 之后调用：

```
onLaunch: function() {
    Ext.getElementById('element-id');
}, 
```

然而，这也不起作用。

**TL/DR**

在发生任何用户触发的操作之前，我可以在哪里进行*工作调用？* `Ext.getElementById`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T14:00:39.227

您可能想解释一下您要做什么。getElementById 是一种“私有”方法，您不应该真正调用它。如果要通过 id 获取元素，请使用 Ext.get。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:37:14.553

**解决方案：**

由于呈现我正在寻找的 DOM 元素的小部件 extends `Ext.view.View`，正确的事件*之后* `Ext.get`可以实际找到呈现的元素是`viewready`事件。

PS One 应该`Ext.get`在任何地方使用，而不是`Ext.getElementById`因为后者是一种*私有*方法。*

# xcode - 在可可中保存/打开“滑出菜单/视图”的名称

> ID：11383559
> 
> 赞同：1
> 
> 时间：2012-07-08T13:35:14.407
> 
> 标签：xcode, cocoa, user-interface

从工具栏向下滑动的这些窗口/视图的名称是什么？就像 Xcode 中的新文件或文本编辑中的另存为对话框一样。

（我不能发图片）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:39:49.103

它们被称为表格

[https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/sheets/sheets.html](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/sheets/sheets.html)

# android - 在android上一直检查互联网连接

> ID：11383561
> 
> 赞同：0
> 
> 时间：2012-07-08T13:35:29.197
> 
> 标签：android

我想开发一个项目，在这个项目中我将一直使用互联网，当互联网连接消失时，用户会收到警告并暂停屏幕。当互联网可用时，用户将能够从应用程序的先前状态继续。我是 android 编程新手。我正在考虑使用 THREADS ，但我不确定。我应该使用线程还是您有什么建议？我会感谢你的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:43:50.210

例如，您需要检查是否`Connection`在某些自定义*间隔*中可用。所以你可以使用这段代码：

```
private boolean isConnectionAvailable() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    } 
```

检查连接是否可用。如果它会返回`false`，那么你可以表现出意思`AlertDialog`或其他东西。

然后你需要添加*权限*：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

并且为了在某些间隔内检查它，您可以将其用于您的目标[`AlarmManager`](http://android-er.blogspot.cz/2010/10/simple-example-of-alarm-service-using.html)，这意味着[`Threads`](http://www.vogella.com/articles/AndroidPerformance/article.html)，[`TimerTask`](http://developer.android.com/reference/java/util/TimerTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T13:52:18.330

更好的解决方案是为`ConnectivityManager.CONNECTIVITY_ACTION`. `onReceive()`每次连接发生任何变化时都会调用。有一个`ConnectivityManager.EXTRA_NO_CONNECTIVITY`字段告诉您该连接目前不可用。您可以检查其值并按照您的逻辑要求继续。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T13:45:34.610

这是您通常检查 Internet 连接的方式`Android`

```
private boolean checkInternetConnection() 
{
ConnectivityManager manager = (ConnectivityManager) getSystemService (Context.CONNECTIVITY_SERVICE);

boolean is3g = manager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnectedOrConnecting();

boolean isWifi = manager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnectedOrConnecting();

boolean gprs=manager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnectedOrConnecting();

if (is3g || isWifi) 
{
    Log.v(TAG,"3G/WIFI connection is present");
    return true;
}
else if(gprs)
 { 
     Log.v(TAG,"gprs connection is present");
     return true;
 }

 return false;

} 
```

您需要在您的`AndroidManifest.xml`

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

我认为你不需要`Threads`为此使用。

有关更多信息，请参阅[适用于 Android 的 ConnectivityManager](http://developer.android.com/reference/android/net/ConnectivityManager.html)。

# ruby-on-rails - 在 Ruby on Rails 中覆盖 titleize 方法

> ID：11383562
> 
> 赞同：0
> 
> 时间：2012-07-08T13:35:29.453
> 
> 标签：ruby-on-rails

有没有办法覆盖`.titleize`RoR 中的方法？

例如，`titleize`不适用于 TJ Watson 之类的名称。它将“tj watson”转换为 Tj Watson。我想在其中添加这样的规则。

另外，我不想定义一个新方法，因为我的代码已经`.titleize`通过它使用了。如何在`titleize`无需更改整个代码中的方法调用的情况下添加功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T13:59:52.847

将一些 *.rb 文件放入您的`initializers`文件夹中，其中包含以下内容：

```
# encoding: utf-8

module ActiveSupport
  module Inflector
    def titleize(word)
      # old code for referencing:
      # humanize(underscore(word)).gsub(/\b(?<!['’`])[a-z]/) { $&.capitalize }
      < your code goes here >
    end
  end
end 
```

还要检查这种方法：[https](https://stackoverflow.com/a/10471857/1322562) ://stackoverflow.com/a/10471857/1322562 。

# android - 在android中使用phonegap播放wav

> ID：11383563
> 
> 赞同：2
> 
> 时间：2012-07-08T13:36:13.533
> 
> 标签：android, audio, cordova

我正在尝试从我的 PG 应用程序播放一个 wav 文件，它在 iPhone 上可以正常工作。

我已阅读以下所有内容： [audio not working with phoneGap](https://stackoverflow.com/questions/10556437/audio-not-working-with-phonegap) [如何在 Android 中播放歌曲 - phonegap](https://stackoverflow.com/questions/4159117/how-to-play-song-in-android-phonegap) [在 phonegap 中播放本地声音](https://stackoverflow.com/questions/4438822/playing-local-sound-in-phonegap)

我正在使用 PGB 编译我的应用程序及其使用 PG 1.7.0。

我只是想知道如何让它发挥作用:(

我尝试使用

```
function getPhoneGapPath() {
    var path = window.location.pathname;
    path = path.substr( path, path.length - 10 );
    return 'file://' + path;
};

var pathToCheerFile=getPhoneGapPath()+ 'sounds/cheer.wav';
console.log('pathToCheerFile=',pathToCheerFile);

return new Media(pathToCheerFile,
        // success callback
        function() {
            console.log("cheer Audio loaded Success");
        },
        // error callback
        function(err) {
            console.log("cheer Audio load Error: " , err);
        },
); 
```

控制台正在显示`pathToCheerFile=file:///android_asset/www/sounds/cheer.wav` ，稍后它显示`cheer Audio load Error:`err 是一个具有单个属性的对象`code:1`。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T21:05:20.140

从路径中删除“file://”，它应该可以正常播放。

# javascript - “data-”属性作为超链接的一部分。HTML 到 JavaScript

> ID：11383565
> 
> 赞同：0
> 
> 时间：2012-07-08T13:36:23.770
> 
> 标签：javascript, html, cordova, window.location, custom-data-attribute

我目前正在开发一个 Phonegap 应用程序，但我的页面转换遇到了一些麻烦。

为了使我的页面转换工作，我正在使用[FASW.js](http://www.fasw.ws/faswwp/non-jquery-page-transitions-lightweight/)库。我还使用本机导航栏（[NavigationBar 插件](https://github.com/AndiDog/phonegap-plugins/tree/master/iOS/NavigationBar)）为我提供本机后退按钮。我都在努力响应用户输入等。

要从您使用的 HTML 启动页面转换：

```
<a href="some_url.html" data-ftrans="slide">Some Link</a> 
```

我有完美的工作。

但是，为了使本机后退按钮起作用，它必须仅通过 JavaScript 调用 - 如下所示：

```
function backButton() {

plugins.navigationBar.setupLeftButton("Back", null, function() {
                        //Some function to be called here to change the page 
                        //and to invoke the page transition.
                                      });

[...]

} 
```

我知道要更改页面，您可以使用：

```
window.location = "some_url.html"; 
```

但我不知道如何也包括

```
[...] data-ftrans="slide" [...] 
```

属性，就像 HTML 超链接一样。

有人可以帮忙吗？这将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:28:33.323

首先给一个ID`<a id="goToMyUrl" href="some_url.html" data-ftrans="slide">Link</a>`

然后使用 jQuery

```
$("#goToMyUrl").attr("data-ftrans","slide"); 
```

# firefox - 比例图像比例适用于 Firefox 和 Chrome，但不适用于 Safari

> ID：11383566
> 
> 赞同：0
> 
> 时间：2012-07-08T13:37:09.933
> 
> 标签：firefox, css, safari

任何 CSS 专家都知道为什么这在 Firefox 和最新的 Chrome 中可以正常工作，但在 Safari 中却不行？在 Safari 中，当我减小浏览器的宽度时，图像会水平缩放，而不是垂直缩放，并变得“压扁”。

```
width: 100%;
max-width: 560px;
height: 100%;
max-height: 490px; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:35:19.977

我认为你想要的是`height: auto;`而不是`height: 100%;`. 这样，即使宽度发生变化，图像的高度也会根据其自然尺寸自动与宽度成比例。

在 Safari、Firefox 和 Chrome 中测试。这是我的小提琴：http: [//jsfiddle.net/qLqr9/1/](http://jsfiddle.net/qLqr9/1/)

# android - 显示时间选择器对话框

> ID：11383569
> 
> 赞同：0
> 
> 时间：2012-07-08T13:37:30.447
> 
> 标签：android, android-edittext

I have editbox I want when click on it to show TimePickerDialog instead of the keyboard , and when select the time the picker disappear and the time be shown in the edittext

这个 EditText 是这样的适配器类

```
public class TminuseistAdaptar  extends ArrayAdapter<Tr> {

    private final Context context;
    ArrayList<Tr> TrBasics ; 

    static final int TIME_DIALOG_ID = 0;

    CheckBox Confirm ; 
    ImageButton DialUp;

     EditText data ; 

    public TminuseistAdaptar(Context context, int  ResourceId,
            ArrayList<Tr> items)
    {

        super(context, ResourceId, items);
         this.context = context;
         this.TrBasics = items ; 

    }

    public View getView(int position, View convertView, ViewGroup parent) {

}
} 
```

我为editText做了类似的事情

```
textViewEncounterType = (EditText) rowView.findViewById(R.id.TminuseTime);
        textViewEncounterType.setText(TreatementMinuseObject.TBasic.TreatementTime);
        textViewEncounterType.setTag(position);

        textViewEncounterType.setClickable(true);
        textViewEncounterType.setInputType(InputType.TYPE_NULL);

        textViewEncounterType.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                new TimePickerDialog(context, mTimeSetListener, hour, minute, false);

            }
        }); 
```

但什么也没有出现，我在另一个类中调用这个适配器类扩展片段

```
public class TminusList   extends Fragment { 
```

此致

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T14:18:01.770

您可以执行以下操作（对于片段实现）：

```
startTxt = (EditText) v.findViewById(R.id.joindate);
startTxt.setClickable(true);
startTxt.setInputType(InputType.TYPE_NULL);

startTxt.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        DialogFragment newFragment = new TimeDialog();
        newFragment.show(getFragmentManager(), "dialog");
    }
}); 
```

和时间对话：

```
public class TimeDialog extends DialogFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        // Set your view
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new TimePickerDialog(getActivity(), this, hour, minute, false);      }
} 
```

此代码将导致 EditText 框弹出时间选择器对话框而不是键盘（一旦您输入时间选择器对话框代码）。

请注意，您需要在 XML 中设置 EditText（在上面的示例中，它将是带有`joindate`id 的 EditText），`android:focusableInTouchMode="false"`否则需要单击两次才能打开对话框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T14:21:48.397

尝试

```
startTxt.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View arg0, MotionEvent arg1) {
                // TODO Auto-generated method stub
                //show DateTimepicker
                return true; //very important in your case if you return false keayboard will open
            }
        }); 
```

# apache - 使用 .htaccess 文件使子目录独立

> ID：11383573
> 
> 赞同：0
> 
> 时间：2012-07-08T13:38:30.650
> 
> 标签：apache, .htaccess, web, subdirectory

假设我的`www`文件夹中有一个名为`subdirectory`. 是否可以修改`.htaccess`文件，以便子目录中包含的所有文件都可以在其他文件中引用，如下所示：`/somefile.extension`？因此，我希望子目录充当其中所有文件的根目录，并且我不想使用子域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:02:29.067

试试这个：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} ^http://site.com/subdirectory/
RewriteCond %{REQUEST_URI} !^/subdirectory/
RewriteRule (.*) /subdirectory/$1 [L,QSA] 
```

# html - HTML player.swf 通过弹出 div/window 播放 x.flv 文件

> ID：11383574
> 
> 赞同：0
> 
> 时间：2012-07-08T13:38:39.417
> 
> 标签：html, flash

我有代码：

```
< a class='vid' href='player.swf?url=folder/anotherfolder/file.flv&amp;volume=50' title=''><img src='wheremyimage.gif' width='200' height='150' alt='' /></a > 
```

问题是，播放器没有播放我的 .flv 文件。

我想我这样做不正确，有人可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:33:48.930

我想到了。

```
< a class='vid' href='player.swf?file=folder/anotherfolder/file.flv&amp;volume=50' title=''><img src='wheremyimage.gif' width='200' height='150' alt='' /></a > 
```

将“url”替换为“file”，walla！作品！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T13:45:57.090

尝试使用嵌入标签。就像是：

```
<embed src = 'player.swf?url=folder/anotherfolder/file.flv&amp;volume=50' width="800" height="600" allowfullscreen="true" /> 
```

# java - 显示 JOptionPane.showMessageDialog 后重新启用 Java 中的工具提示

> ID：11383575
> 
> 赞同：3
> 
> 时间：2012-07-08T13:38:43.830
> 
> 标签：java, swing, joptionpane, tooltip

在 JOptionPane.showMessageDialog("Some Text"); 已显示，工具提示已禁用，我不知道如何重新启用它们。这是一些演示问题的代码：

```
import java.awt.*; 
import java.awt.event.*;
import javax.swing.*;

public class ToolTipError extends JPanel{ 
  JButton button;

  public ToolTipError() {
    button = new JButton("ToolTipHere"); 
    button.setToolTipText("This is Java! There is no help");

    button.addActionListener(new java.awt.event.ActionListener() {
      public void actionPerformed(java.awt.event.ActionEvent evt) {
        buttonActionPerformed(evt);
      }
    });

    add(button); 
  } 

  void buttonActionPerformed(ActionEvent env) {

    System.out.println("Button pushed."); //TEST

    JOptionPane.showMessageDialog(null, "This disables ToolTips!");

    // This does not re-enable the tool tip:
    button.setToolTipText("This is Java! There is no help");

    // Nor does this:
    ToolTipManager.sharedInstance().setEnabled(true);
 }

  void start() {
    //Create and set up the window.
   JFrame frame = new JFrame("ToolTipError");
   frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Create and set up the content pane.
    ToolTipError newContentPane = new ToolTipError();
    newContentPane.setOpaque(true);
    frame.setContentPane(newContentPane);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
  }

  public static void main(String[] args) {
    ToolTipError tte = new ToolTipError();
    tte.start();
  }
} 
```

请注意，在显示对话框后设置 ToolTipText 不会重新启用 ToolTips，也不会在 ToolTipManager 中重新启用它们。

请注意，如果您在屏幕上移动窗口，工具提示会神奇地再次开始工作！？！

如果您想尝试一下，上面的代码应该为您编译“开箱即用”。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T13:43:15.907

您的错误是代码行中的简单拼写错误

```
Frame frame = new JFrame("ToolTipError"); 
```

如果您使用，可以正常工作

```
JFrame frame = new JFrame("ToolTipError"); 
```

如上所述的编辑适用于我 JDK6/7、WinXP/7

```
import java.awt.event.*;
import javax.swing.*;

public class ToolTipError extends JPanel {

    private static final long serialVersionUID = 1L;
    private JButton button;

    public ToolTipError() {
        button = new JButton("ToolTipHere");
        button.setToolTipText("Press the button !");
        button.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent evt) {
                System.out.println("Button pushed.");
                JOptionPane.showMessageDialog(button.getParent(), "This disables ToolTips!");
                button.setToolTipText("This is Java! There is no help");
            }
        });
        add(button);
    }

    void start() {
        ToolTipManager ttm = ToolTipManager.sharedInstance();
        ttm.setInitialDelay(0);
        ttm.setDismissDelay(10000);

        ToolTipError newContentPane = new ToolTipError();
        newContentPane.setOpaque(true);

        JFrame frame = new JFrame("ToolTipError");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(newContentPane);
        frame.pack();
        frame.setLocation(150, 150);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ToolTipError tte = new ToolTipError();
                tte.start();
            }
        });
    }
} 
```

# iis - 如何使用 msdeploy 和 powershell/psake 在远程网站中的文件上设置权限/acl

> ID：11383576
> 
> 赞同：1
> 
> 时间：2012-07-08T13:38:51.197
> 
> 标签：iis, powershell, msdeploy, psake

在 psake/powershell 中有一个构建脚本，它使用 msdeploy 编译和部署网站到远程服务器。部署后，我需要在根目录中的一个文件上设置 acl。有人做过吗？我知道我可以使用 msdeploy 但无法正确使用语法。有没有更好的办法？我只需要将文件的**修改**权限授予该站点的应用程序池。

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:25:59.150

```
$SERVER_APPROOT = "W:\webroot\site1\"
$deployServer = "WEB01"

$webDeployArgs = '-verb:sync -source:setacl -dest:setacl="' + $SERVER_APPROOT  + 'mypath\subpath\subsubpath\",computerName=' + $deployServer + ',setaclaccess=Modify'
Start-Process "$Env:SystemDrive\Program Files\IIS\Microsoft Web Deploy V3\msdeploy.exe" -ArgumentList $webDeployArgs -NoNewWindow -Wait 
```

# php - PHP如何添加比授权更多的文件安全性？

> ID：11383579
> 
> 赞同：0
> 
> 时间：2012-07-08T13:39:11.630
> 
> 标签：php, mysql, sql, security

我在 PHP 中有一个授权系统，具有一定安全权限的帐户可以上传和下载文件。在文件目录中，有一个 .htaccess 拒绝所有，并禁用 PHP。

安全许可只是 MySQL 中的一个条目。这有多安全？以及如何增加安全性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:49:57.940

只要您正确实施它，它就会像您需要的那样安全。

如果您想让密码更安全，您可以设置两个密码，每个密码 255 个字符。用蛮力破解几乎是不可能的。

您可以做的另一件事是记录有关某人何时尝试超过 30 个密码但没有正确设置的信息，并阻止他们的 ip 并存储一个 cookie，告诉您他们正在尝试破解以及他们试图访问哪个帐户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:02:23.593

您可以将文件移到根目录之外，然后创建一个脚本，将请求的文件复制到临时目录中，并在下载完成后将其删除。这样，即使 htaccess 无法工作或以某种方式被禁用（无法想象如何），如果有人获得链接，您的文件也将无法访问。祝你好运！

# objective-c - 秒表循环

> ID：11383586
> 
> 赞同：-1
> 
> 时间：2012-07-08T13:40:25.030
> 
> 标签：objective-c, stopwatch

我正在使用 Xcode 4 作为单视图应用程序进行秒表。不过我有一个问题。当毫秒计数时，它们会无限循环。我希望它们达到 9，然后从 0 重新开始。我还希望秒数达到 59，然后回到 0。这是我的 viewcontroller.m 文件中的代码：

```
- (IBAction)start{

    myTicker = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(showActivity) userInfo:nil repeats:YES];  

    myTicker2 = [NSTimer scheduledTimerWithTimeInterval:.1 target:self selector:@selector(showActivity1) userInfo:nil repeats:YES];

    myTicker3 = [NSTimer scheduledTimerWithTimeInterval:60 target:self selector:@selector(showActivity2) userInfo:nil repeats:YES];

}
- (IBAction)stop{

    [myTicker invalidate];
    [myTicker2 invalidate];
    [myTicker3 invalidate];
}
- (IBAction)reset{

    time.text = @"00";
    time1.text = @"00";
    time2.text = @"00";
}

- (void)showActivity{

    int currentTime = [time.text intValue];
    int newTime = currentTime + 1;
    time.text = [NSString stringWithFormat:@"%d", newTime];

    }

- (void)showActivity1{

    int currentTime1 = [time1.text intValue];
    int newTime1 = currentTime1 + 1;
    time1.text = [NSString stringWithFormat:@"%d", newTime1];

}

- (void)showActivity2{

    int currentTime2 = [time2.text intValue];
    int newTime2 = currentTime2 = 1;
    time2.text = [NSString stringWithFormat:@"%d", newTime2];

} 
```

这是我在 .h 文件中的代码。

```
 IBOutlet UILabel *time;
    IBOutlet UILabel *time1;
    IBOutlet UILabel *time2;

    NSTimer *myTicker;
    NSTimer *myTicker2;
    NSTimer *myTicker3;
}

- (IBAction)start;
- (IBAction)stop;
- (IBAction)reset;

- (void)showActivity;
- (void)showActivity1;
- (void)showActivity2;

@end 
```

任何有关如何做到这一点的答案将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:07:58.167

在您的情况下，我将只使用 1 个计时器（一个计数毫秒）和 4 个 int vars（小时、分钟、秒和毫秒）。然后在计时器滴答声中，您只需测试

```
if (milliseconds > 999)
{
    seconds++;
    milliseconds = 0;
}
if (seconds > 59)
{
    minutes++;
    seconds = 0;
}
if (minutes > 59)
{
    hours++;
    minutes = 0;
} 
```

因此，通过这样做，您将拥有一个管理所有变量的计时器。我写了这段代码，所以它可能有拼写错误。

# facebook - 更改脸书评论提交按钮文本

> ID：11383588
> 
> 赞同：0
> 
> 时间：2012-07-08T13:40:52.803
> 
> 标签：facebook, plugins, comments, social

是否可以更改评论提交框的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:55:34.150

如果您指的是[评论框插件](https://developers.facebook.com/docs/reference/plugins/comments/)，那么不，这是不可能的。

通过添加 Facebook JS，他们在您的站点中嵌入了带有评论框的 IFrame。由于现代浏览器正在为 IFrame 实施[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，因此您无法访问该 IFrame 的内容。

# bash - 如何将存储在文件中的行拆分为字符串（bash）

> ID：11383589
> 
> 赞同：0
> 
> 时间：2012-07-08T13:41:17.120
> 
> 标签：bash, mutt

我有一个格式的文件

```
email1 "subject of email1" "body of email1"
email2 "subject of email2" "body of email2" 
```

我想向所有电子邮件 ID 发送电子邮件，并从该文件中选择主题和正文。

我尝试了类似以下的方法，但没有按预期工作

```
cat ~/file.txt \
| while read -a CONTACT
    do 
       echo ${CONTACT[2]} | mutt -s ${CONTACT[1]} ${CONTACT[0]}
    done 
```

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:51:04.643

尝试这个

```
while read line;do
  eval "set -- $line"
  echo "$3"|mutt -s "$2" "$1"
done <~/file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:16:17.757

如果没有其他双引号：

```
input="file.txt"

IFS='"'
while read -a CONTACT ; do
  echo -e "<${CONTACT[0]}> <${CONTACT[1]}> <${CONTACT[3]}>"
done < "$input" 
```

输出

```
<email1 > <subject of email1> <body of email1>
<email2 > <subject of email2> <body of email2> 
```

# javascript - 当图像宽度与视口宽度不成比例时响应图像？

> ID：11383590
> 
> 赞同：3
> 
> 时间：2012-07-08T13:41:24.457
> 
> 标签：javascript, css, image, twitter-bootstrap, responsive-design

我正在使用 Twitter Bootstrap 的[响应式网格](http://twitter.github.com/bootstrap/scaffolding.html)，我想在我的页面中包含一些图像，如下所示：

```
<div class="row">
<div class="span3"><img src="img1.png" /></div>
<div class="span3"><img src="img2.png" /></div>
<div class="span3"><img src="img3.png" /></div>
<div class="span3"><img src="img4.png" /></div>
</div> 
```

但是，很难使图像具有响应性，因为使用 Bootstrap 图像宽度与视口宽度没有直接关系，这排除了例如[Filament](https://github.com/filamentgroup/Responsive-Images)方法。

在上面的示例中，在 1080 像素宽的屏幕上，图像堆叠，因此每个 div 占用的视口宽度不到 25%，并且每个图像只需要大约 250 像素宽。然而，在 750 像素宽的屏幕上，div 垂直堆叠以占据 100% 的视口宽度，因此每个图像需要大约 750 像素宽。

我在想我可以做类似的事情：

*   默认情况下，加载一个 spacer.gif：`<img src="spacer.gif" />`
*   在页面加载时，检查图像的宽度，并加载适当的大小

但后来我意识到这不适用于非 JavaScript 用户。我可以默认加载一个小图像，但是非 JS 用户在大屏幕上的体验很差，一些用户还必须同时加载小图像和大图像。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:54:56.203

如果您主要关心的不是在移动设备上加载不必要的大图像，并且您正在寻找非 JS 选项，那么您可能会发现像[Sencha.io Src](http://docs.sencha.io/0.3.3/index.html#!/guide/src)这样的东西很有用。基本上，您通过 Sencha 路由所有图像：

```
<div class="row">
  <div class="span3"><img src="http://src.sencho.io/http://yourimageserver.com/img1.png" /></div>
  <div class="span3"><img src="http://src.sencho.io/http://yourimageserver.com/img2.png" /></div>
  <div class="span3"><img src="http://src.sencho.io/http://yourimageserver.com/img3.png" /></div>
  <div class="span3"><img src="http://src.sencho.io/http://yourimageserver.com/img4.png" /></div>
</div> 
```

Sencha 服务器然后检查 HTTP 请求标头中的用户代理，然后根据他们对浏览器的规范提供预定的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T04:03:40.340

如果你想解决这个客户端，你可以使用[PictureFill](https://github.com/scottjehl/picturefill)

基本上，它实现了与 W3C 中提议的[元素](http://www.w3.org/TR/html-picture-element/)类似的解决方案。您可以将以下内容插入到您的标记中（来自 PictureFill 网站上的示例）：

```
<div data-picture data-alt="A giant stone face at The Bayon temple in Angkor Thom, Cambodia">
    <div data-src="small.jpg"></div>
    <div data-src="medium.jpg"     data-media="(min-width: 400px)"></div>
    <div data-src="large.jpg"      data-media="(min-width: 800px)"></div>
    <div data-src="extralarge.jpg" data-media="(min-width: 1000px)"></div>

    <!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. -->
    <noscript>
        <img src="external/imgs/small.jpg" alt="A giant stone face at The Bayon temple in Angkor Thom, Cambodia">
    </noscript>
</div> 
```

这`<noscript>`避免了浏览器必须下载 spacer.gif 并且还可以在没有可用 JS 的情况下作为后备；用户只需获得适合禁用 javascript 的旧手机的 small.jpg。

媒体查询允许您根据`(min-width: ...)`设备大小选择断点，您也可以将`(min-device-pixel-ratio: 2.0)`其用于 Retina 显示器等高清设备。

出于您的目的，您可以设置如下内容：

```
 <div data-src="image_250x250.jpg"     data-media="(min-width: 1080px)"></div>
 <div data-src="image_750x750.jpg"     data-media="(min-width: 750px)"></div> 
```

并在您的 css 中使用媒体查询来确保 250x250 图像堆栈。

希望有帮助！

# android - Android：Android 4.1 模拟器从 DatePicker 对话框调用 onDateSet 两次

> ID：11383592
> 
> 赞同：19
> 
> 时间：2012-07-08T13:41:41.447
> 
> 标签：android, datepicker, emulation, android-4.2-jelly-bean

我的应用程序在我的 Android 2.2 模拟器上运行良好。然后我决定在 Android 4.1 模拟器上进行测试。`DatePickerDialog`看起来有点不同，由于某种原因，当我按下“完成”时，侦听`onDateSet()`器被调用两次并导致我的应用程序出现问题。

我知道这一点，因为每当我点击“完成”时，代码中显示的日志就会打印两次

```
mDateSetListener = new DatePickerDialog.OnDateSetListener() {
    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            Log.v("onDateSet", "ENTERED");
            //rest of code...
    }}; 
```

Android 2.2 日期选择器

![工作Android 2.2 DatePicker](../Images/f819a0050f8a03f5f3d7bcf8d99a91e5.png)

安卓 4.1 日期选择器

![不工作的 Android 4.1 日期选择器](../Images/f3df9fb999c90c1100e2bb505decd858.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-31T20:12:13.603

尝试设置一个布尔值以检查同一对话框中的双重触发。类似于：

```
Calendar c = Calendar.getInstance();
c.add(Calendar.DAY_OF_YEAR, 1);
final DatePickerDialog dateDialog = new DatePickerDialog(this, new DatePickerDialog.OnDateSetListener() {
    boolean fired = false;
    public void onDateSet(final DatePicker view, final int year, final int monthOfYear, final int dayOfMonth) {
        Log.i("PEW PEW", "Double fire check");
        if (fired) {
            Log.i("PEW PEW", "Double fire occured. Silently-ish returning");
            return;
        } else {
            //first time fired
            fired = true;
        }
        //Normal date picking logic goes here
    }
}, c.get(Calendar.YEAR), c.get(Calendar.MONTH), c.get(Calendar.DAY_OF_MONTH));
dateDialog.show(); 
```

TimePickerDialog 的 onTimeSet 也会发生这种双重触发问题，并且此检查也适用于这些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-16T17:35:02.897

根据 Ankur Chaudhary对类似问题的精彩[回答](https://stackoverflow.com/a/26034036/905801)`TimePickerDialog`，如果我们检查内部`onDateSet`是否给定视图`isShown()`，它将以最小的努力解决整个问题，无需扩展选择器或检查代码周围的一些可怕标志甚至检查操作系统版本，只需执行以下操作：

```
public void onDateSet(DatePicker view, int year, int month, int day) {
    if (view.isShown()) {
        // read the date here :)
    }
} 
```

`onTimeSet`当然，根据 Ankur 的回答也可以这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:43:47.267

我认为这是相关的，我今天开始在 4.1 上进行测试，发现一些 javascript 事件似乎触发了两次。目前主要是点击。奇怪的是，如果我添加警报，它“有时”会触发一次。这种行为奇怪地不一致。

javascript 事件仅在 android 4.1 上以这种方式响应。iPhone 似乎和我迄今为止尝试过的所有以前版本的 android 一样（包括 4.0.x）。

对我来说，这似乎是浏览器的错误或其处理 javascript 的方式，但这只是一个猜测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-29T13:29:00.163

重申：这是 Android 中已确认的错误。已经提出了两种解决方法，将状态保存在（实例）变量中或询问 Dialog if it `isShown()`。但`isShown()`似乎不可靠（例如根据[这个答案的评论](https://stackoverflow.com/a/26034036/3968618)），如果你想重新显示对话框，保存状态会变得混乱。
更好的解决方案是将状态保存在 Dialog 本身内：

```
public void onDateSet(DatePicker picker, int year, int monthOfYear, int dayOfMonth) {
    if (picker.getTag() == null) {
        picker.setTag("TAGGED");
        // Only gets called once per Dialog
    }
} 
```

它干净有效。

# java - PHP整数部分填充

> ID：11383597
> 
> 赞同：4
> 
> 时间：2012-07-08T13:43:11.860
> 
> 标签：java, php, floating-point, numbers, pad

我需要用 0 填充整数部分，整数部分必须至少为 2 个字符

```
str_pad( 2    ,2,"0",STR_PAD_LEFT);// 02 -> works
str_pad( 22   ,2,"0",STR_PAD_LEFT);// 22 -> works
str_pad( 222  ,2,"0",STR_PAD_LEFT);// 222-> works
str_pad( 2\.   ,2,"0",STR_PAD_LEFT);// 2\. -> fails -> 02\. or 02
str_pad( 2.11 ,2,"0",STR_PAD_LEFT);// 2.11-> fails -> 02.11 
```

有简单的代码吗？

如果可能的话，请在 Java 中相同

```
double x=2.11;
String.format("%02d%s", (int) x, String.valueOf(x-(int) x).substring(1)) 
```

不仅丑而且打印 02.10999999999999988

*编辑*Java：[Java 整数部分填充](https://stackoverflow.com/questions/11383859/java-integer-part-padding)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:51:08.710

不，没有简单的方法。

```
function padIntegerPart($n, $len) {
    $intPart = (int)$n;

    return str_repeat('0', max(0, $len - 1 - floor(log($intPart, 10)))) . $n;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T14:00:53.847

您还可以使用`printf()`函数来填充整数：

类似（[键盘](http://codepad.org/FiNeA2mf)）：

```
<?php

function pad($n) {
    $n = explode('.', (string)$n);

    if (2 === count($n)) {
        return sprintf("%02d.%d\n", $n[0], $n[1]);    
    }

    return sprintf("%02d\n", $n[0]);    
}

foreach (array(2, 22, 222, 2., 2.11) as $num) {
    echo pad($num);
}

// returns 02, 22, 222, 02, 02.11 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T13:49:00.283

快速解决方案：[http ://codepad.org/EXcbqGos](http://codepad.org/EXcbqGos)

```
$num = 2.11;
echo str_pad( floor($num) ,2,"0",STR_PAD_LEFT).substr($num-floor($num), 1); 
```

它仅适用于非负数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T14:03:05.737

如果您要查找的输出是`02.11`，请尝试`sprintf()`：

```
sprintf("%05.2f", 02.11); // Output: 02.11
           ^ ^--- float precision
           |--- total string length

sprintf("%07.2f", 02.11); // Output: 0002.11 
```

可能有帮助的链接是：

[http://us2.php.net/sprintf](http://us2.php.net/sprintf)

[使用printf打印浮点数时有额外的前导零？](https://stackoverflow.com/questions/2486410/extra-leading-zeros-when-printing-float-using-printf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T14:08:46.123

另一个 ：

```
function my_str_pad ($input ,$pad_length, $pad_string) {
    $pad_length += strlen($input) - strlen(intval($input));

    return str_pad($input, $pad_length, $pad_string, STR_PAD_LEFT);
} 
```

以下测试：

```
str_pad(2., 2, "0", STR_PAD_LEFT);// 2\. -> fails -> 02\. or 02 
```

失败，因为 str_pad 正在处理字符串，但是您输入了一个带小数但没有小数部分的数字，因此它被视为整数。如果你想保留'.' 改用以下内容：

```
str_pad("2.", 2, "0" , STR_PAD_LEFT);// 2\. -> works 
```

# visual-studio - MSVC：编译指示强制重建文件？

> ID：11383599
> 
> 赞同：3
> 
> 时间：2012-07-08T13:43:17.293
> 
> 标签：visual-studio, visual-c++, pragma, rebuild

是否有 MSVC 的编译指示语句会导致编译器始终重建文件 - 如果它认为它是刚刚构建的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T07:28:50.910

这是我用来实现此目的的技巧：

1）添加类似的构建后步骤命令

```
echo #define __FORCE_REBUILD__ "Include this file in a cpp to invalidate it at each compilation" > $(ProjectDir)ForceRebuild.h 
```

2) 在要强制重建的每个 cpp 中添加一个 '#include "ForceRebuild.h"'。

它仅在实际发生构建后才起作用（因为如果 Visual Studio 决定跳过构建项目，则会跳过后期构建）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T13:51:45.117

我怀疑有，而且我很确定不可能（除非对工具链进行重大更改）。

原因很简单：当`make`（或等价物）决定构建什么时，它根本不会查看所涉及文件的*内容*——它只是将目标文件上的时间戳与目标文件上的时间戳进行比较源文件。如果目标文件比其源文件新，则永远不会为该文件调用编译器，因此编译器将永远无法看到该文件的内容（包括理论化的`#pragma`）。

# java - java类中的INNERCLASS字段是如何使用的？

> ID：11383600
> 
> 赞同：0
> 
> 时间：2012-07-08T13:43:34.937
> 
> 标签：java, compiler-construction, bytecode, inner-classes

我查看了一些使用 ASM 的 java 字节码，当我看到这些行时非常惊讶

```
public class C1 {

  // compiled from: C1.java
  // access flags 0x9
  public static INNERCLASS C2$C3 C2 C3

  //..
} 
```

`C1`有一个`INNERCLASS`包含在 中的类的声明`C2`。这是应该的吗？如果是这样，为什么需要它，而且它不会导致很多冗余吗？

我使用 Eclipse Indigo SR1 编译了一个最小示例，该示例在外部类型的主要方法中具有内部类型的局部变量，这是值得的。我应该报告错误吗？

* * *

```
public class C1 {
    public static void main(String[] args) throws Exception {
        C2.C3 c3 = new C2.C3();

        ClassReader cr = new ClassReader(C1.class.getName());
        cr.accept(new TraceClassVisitor(new PrintWriter(System.out)), 0);
    }
} 
```

* * *

```
public class C2 {
    public static class C3 {}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-22T10:21:51.463

来自[Java 虚拟机规范](http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.7.6)：

> 如果类或接口 C 的常量池包含至少一个 CONSTANT_Class_info 条目（第 4.4.1 节），它表示不是包成员的类或接口，则在属性表中必须恰好有一个 InnerClasses 属性C 的 ClassFile 结构。

也就是说，该属性*引用*`InnerClasses`了类文件中引用的所有内部类（“类或接口不是包的成员”），即使它们不是类文件中包含的类的成员。另一种情况（由于缺少特定术语可能被称为*外部类）在注释中明确指出：*

 **> 此外，每个嵌套类和嵌套接口的常量池表都必须引用其封闭类，因此总的来说，每个嵌套类和嵌套接口都将具有每个封闭类及其每个嵌套类和接口的 InnerClasses 信息。

至于为什么需要这些外部引用，我并不完全确定，只是需要注意的是，Java 1.1 中添加了内部类，是在类文件格式大部分被冻结之后，因此有关内部类的信息不直接存储在`ClassFile`结构中（类文件的顶层结构），如超类、接口、字段和方法。另请注意，该`InnerClasses`属性是 8 个字节加上每个引用的内部类的 8 个字节——这几乎不是一个令人望而却步的冗余量。**

# python - 在 Python 中的其他函数中添加函数调用

> ID：11383602
> 
> 赞同：4
> 
> 时间：2012-07-08T13:44:09.807
> 
> 标签：python, metaprogramming

这有点棘手，但我想要的，以一种简单的方式，是这样的：

我有一个函数`foo`和一个装饰器`process`

```
@process
def foo(x, y):
    print x + y 
```

装饰器正在创建一个`Process`对象，该对象被传递给`foo`函数及其参数

```
# The process decorator
def process(func=None, **options):
    if func != None:
        def _call(*args, **kwargs):
            if len(options) > 0 and 'fail' in options:
                return Process(func, fail=options['fail'], *args, **kwargs)
            else:
                return Process(func, fail=None, *args, **kwargs)
        return _call
    else:
        def _func(func):
            return process(func, **options)
        return _func 
```

我想`foo`在运行时更改给进程装饰器的函数，以包括对另一个函数的调用，例如一个`get_locals()`函数，它可能会覆盖局部变量，在开头`foo`：

```
def foo(x, y):
    get_locals()
    print x + y 
```

我试图用 做一些事情`inspect`，获取函数的源代码，然后将其编译为代码对象，但是这导致了`'code' object is not callable`异常或类似的事情。

这甚至可能吗？有没有更简单/更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:18:51.847

您想要做的事情有几种不同的方法，在“清洁度”（而不是临时的hackish）、易于做（以及稍后理解和维护）、对Python实现的依赖等方面有所不同。

我看到使用哪种方法的限制因素取决于您可以/想要如何干扰装饰函数本身的声明。

**1.**因此，如果您能够更改将使用您的装饰器的所有代码（或将其记录给将使用它的其他人），那么我认为我会推荐最简单、最简单的方法go，是在运行时重新分配函数的默认参数元组（foo.func_defaults）。

这种方法要求将要在运行代码中覆盖的变量声明为具有默认值的函数参数：

（出于记录目的，我将使用比您的更简单的装饰器）

```
new_args = (10,20)

def process(func):
    def new_func(*args, **kw):
        func_defaults = func.func_defaults
        func.func_defaults = new_args
        result = func(*args, **kw)
        func.func_defaults = func_defaults
        return result
    return new_func

@process
def foo(x=1, y =2):
    print x + y 
```

并且“有效”（tm）

```
>>> foo()
30 
```

**2.**另一种方法，仍然要求修饰函数遵循特定模式，是将所有要覆盖的变量声明为全局变量，并在调用时创建一个新的函数对象，一切都与原始函数相同，但是改变它的全局字典。由于您为每个调用创建一个新的函数对象，这将是线程安全的 -0 但是，您不能更改声明为函数参数的变量（因为 Python 将它们标记为“本地”，并且它们不能随后被标记作为“全球”）

```
from types import FunctionType

new_args = {"x":10, "y":20} 

def process(func):
    def new_func(*args, **kw):
        temp_func = FunctionType(func.func_code,
                                 new_args,
                                 func.func_name, 
                                 func.func_defaults,
                                 func.func_closure)
        return temp_func(*args, **kw)
    return new_func

@process
def foo():
    global x, y
    print x + y 
```

**3.**按照相同的方法，对于您想要覆盖的每个局部变量，您会将其列在函数顶部作为接收默认值 - 就像在

```
def foo(x=1,y=2):
   z= 3
   w = 4 
```

在运行时，您将在每次调用时重新构建动态，不仅是函数对象，还有它的代码对象 - Yu 可以调用 types.CodeType 与原始 func.func_code 对象相同的参数，但对于“常量" 参数 - 将替换原始的 co_consts 属性。

我不会举例说明这种做事的方式，因为它属于“很好的实验性hack，但对于实际生产代码来说是可怕的”——因为它太依赖于实现了。

**4.**您可以在您的装饰器上设置代码跟踪-这通常由调试器实用程序完成，以便您可以回调您为要在目标代码上计算的每个表达式指定的函数-您可以启用“settrace”，并在您的回调函数中摆弄目标函数上的局部变量。
这非常简单，一旦你看到 sys.gettrace 的文档 - [http://docs.python.org/library/sys.html#sys.settrace](http://docs.python.org/library/sys.html#sys.settrace) - 但是它确实有一点不方便，**根本不工作** :-) 发生这种情况是因为尽管您确实有权在框架本地字典上进行读写，但语言优化在使用它们时并不总是从该字典中获取值（如果有的话）。所以这个直截了当的例子表明它不起作用：

```
>>> import sys
>>> def a():
...    b = 1
...    f = sys._getframe()
...    print f.f_locals
...    f.f_locals["b"] = 2
...    print b
... 
>>> a()
{'b': 1, 'f': <frame object at 0x1038cd0>}
1 
```

**5.**最后，您可以完全按照您说的做，并使用 Python 的“dis”模块和编译器函数在您的函数代码中注入变量属性 - 直接在字节码上。您必须：反编译函数的代码对象，成功处理字节码以使用所需值正确加载所需的变量，重新编译字节码，重新创建代码对象（使用前面提到的 types.CodeType 调用），传递一个适当的“常量”值以正确加载您的变量，从中重新创建函数对象并进行函数调用。

我不会列举我发现这种方法不如其他方法有用的原因，也不会尝试参考实现。但是，如果做得好，它会起作用，至少对于 cpython 2.x。

# fortran - 带有过程参数的通用类型绑定过程

> ID：11383605
> 
> 赞同：5
> 
> 时间：2012-07-08T13:45:19.683
> 
> 标签：fortran, fortran2003

我正在尝试编写一个通用类型绑定过程，该过程将不同的回调函数作为参数。编译以下代码（使用 ifort 12.1.3）时，我收到以下警告：

```
module test

type :: a_type
  contains
  procedure :: t_s => at_s
  procedure :: t_d => at_d
  generic :: t => t_s,t_d
end type a_type

abstract interface
  integer function cb_s(arg)
  real(4) :: arg
  end function cb_s

  integer function cb_d(arg)
  real(8) :: arg
  end function cb_d
end interface

contains

subroutine at_s(this,cb)
  class(a_type) :: this
  procedure(cb_s) :: cb 
end subroutine

subroutine at_d(this,cb)
  class(a_type) :: this
  procedure(cb_d) :: cb 
end subroutine

end module test 
```

警告：

```
compileme.f(27): warning #8449: The type/rank/keyword signature for this specific
procedure matches another specific procedure that shares the same generic
binding name.   [AT_D] 
```

当用作过程参数时，编译器似乎没有区分不同的函数接口......

我的问题是：为什么不检查这些类型，以及用过程或过程指针作为参数编写泛型类型绑定过程的正确、干净的方法是什么？

**可能的解决方案**

正如 Vladimir F 所指出的，只有回调函数的返回参数是类型检查的。就我而言，只需稍微更改函数的接口即可：

```
abstract interface
  real(4) function cb_s(arg)
  real(4) :: arg
  end function cb_s

  real(8) function cb_d(arg)
  real(8) :: arg
  end function cb_d
end interface 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T18:48:57.570

编译器是对的，因为 Fortran 2008 的**12.4.3.4.5 对泛型声明**的限制有

> 两个虚拟参数是可区分的，如果 - 一个是过程，另一个是数据对象， - 它们都是数据对象或**已知是函数，并且 TKR 与另一个不兼容**， - 一个具有 ALLOCATABLE 属性，另一个具有POINTER 属性，或者 - 一个是具有非零秩的函数，另一个是未知函数。

这意味着您的两个函数都是整数函数，因此它们无法区分。

# hql - 什么是可以替换的 HQL 查询而不是“SQL 的 >=all()”..？

> ID：11383607
> 
> 赞同：0
> 
> 时间：2012-07-08T13:45:56.807
> 
> 标签：hql

我需要得到正确的 HQL 查询而不是下面的 SQL 查询。

```
select * from question where qid >=all (select qid from Question where uid = 1); 
```

我想我们不能在 HQL 中使用 >=all() 。如果我错了，请纠正我。并为上述 SQL 查询提供正确的 HQL 查询。

等待回复...帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:47:08.483

Hibernate 以您概述的方式支持所有运算符/表达式.. [http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-expressions](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-expressions)

# php - Facebook Open Graph Watch 操作

> ID：11383609
> 
> 赞同：1
> 
> 时间：2012-07-08T13:46:21.423
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我正在尝试制作一个 Facebook 视频应用程序，以便用户可以使用 Facebook Open Graph 将存储在我网站上的视频显示在他们的墙上。

我正在使用以下代码进行用户登录。

```
<script>
    window.fbAsyncInit = function() {
        FB.init({
            appId      : 'MYAPPID', // App ID
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
        });
    };

    // Load the SDK asynchronously
    (function(d){
        var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        d.getElementsByTagName('head')[0].appendChild(js);
    }(document));
</script> 
```

现在如何实现 Watch 操作？

```
curl -F 'access_token=myaccesstoken' \
 -F 'movie=http://samples.ogp.me/453907197960619' \
    'https://graph.facebook.com/me/video.watches' 
```

还有这个

```
curl 'https://graph.facebook.com/me/video.watches?access_token=myaccesstoken' 
```

在 PHP 中？以及如何获取用户的访问令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:31:26.060

要在 PHP SDK 3.1.1 中获取用户访问令牌：

```
// Get the current access token
$access_token = $facebook->getAccessToken(); 
```

参考：[https ://developers.facebook.com/docs/reference/php/facebook-getAccessToken/](https://developers.facebook.com/docs/reference/php/facebook-getAccessToken/)

* * *

**发布操作。**

参考：[https ://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)

本教程将指导您完成构建、测试和发布您的第一个 Open Graph 应用程序的关键步骤。我们将构建一个示例食谱应用程序，允许用户发布有关烹饪食谱的故事。在开始之前，请查看 Open Graph Checklist，它不仅有助于您的应用程序设计和规划，还有助于加快应用程序审查过程。

第 1 步：创建一个 Facebook 应用程序。[https://developers.facebook.com/docs/opengraph/tutorial/#create-app](https://developers.facebook.com/docs/opengraph/tutorial/#create-app)

第 2 步：使用登录按钮插件对用户进行身份验证。[https://developers.facebook.com/docs/opengraph/tutorial/#authenticate](https://developers.facebook.com/docs/opengraph/tutorial/#authenticate)

第 3 步：通过 App Dashboard 定义对象、操作和聚合。[https://developers.facebook.com/docs/opengraph/tutorial/#define](https://developers.facebook.com/docs/opengraph/tutorial/#define)

第 4 步：为您的用户发布操作。[https://developers.facebook.com/docs/opengraph/tutorial/#publish](https://developers.facebook.com/docs/opengraph/tutorial/#publish)

第 5 步：将社交插件添加到您的应用程序。[https://developers.facebook.com/docs/opengraph/tutorial/#plugins](https://developers.facebook.com/docs/opengraph/tutorial/#plugins)

第 6 步：提交您的操作以供批准。[https://developers.facebook.com/docs/opengraph/tutorial/#submit](https://developers.facebook.com/docs/opengraph/tutorial/#submit)

## 例子：

```
if ($user){
    $queries = array(
        // The URL build is me/ namespace : action ? object = URL
        array('method' => 'POST', 'relative_url' => '/me/anotherfeed:view?feed=http://anotherfeed.com/')
        // Any other API calls needed, this is a batch request for performance.
    );

    try {
        $postResponseA = $facebook->api('?batch='.json_encode($queries), 'POST');
    }
    catch (FacebookApiException $e) {
        //echo 'AF error: '.$e.'';
    }
    // Returns the id of posted actions if true.
    $actions = json_decode($postResponseA[0][body], true); 
```

# html - HTML 多文件下载

> ID：11383611
> 
> 赞同：0
> 
> 时间：2012-07-08T13:46:26.767
> 
> 标签：html, flash, http, applet, download

好吧，首先我知道这个问题已经被问过好几次了。但我还没有找到最好的解决方案。

1.  IFrame .. 它工作得很好，但实际上像 FF 这样的浏览器只是一次显示多个文件保存对话框。如果你想下载很多小文件，这会很烦人。
2.  Java Applet .. 也应该可以工作，但我不是真正的 Java 专家，但我只是听说文件操作需要授权的小程序或类似的东西。所以这不是最好的解决方案。
3.  Flash .. 不确定通过 Flash 执行的文件操作 - 但请阅读使用 Flash 执行此类操作有问题。

所以我真正想要的是：用户可以选择多个文件（无论它如何工作），然后他可以按下下载按钮，然后他可以选择一个文件夹来保存文件。当然，这应该适用于大多数浏览器，至少是最常用的浏览器，如 Chrome、FF、Iexplorer。

您会推荐哪种解决方案。我确信这是可能的，我已经在一些网站上看到了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:52:55.647

从用户体验的角度来看，弹出几个带有下载优惠的不同下载窗口通常是一个坏主意。特别是如果选择了很多文件。通常情况下，如果选择了多个文件，站点所做的就是将这些文件打包成一个存档（zip 或 gz），然后提供下载。您可以使用一些不同的免费归档库。

# if-statement - 八度：同一行 if + more

> ID：11383614
> 
> 赞同：4
> 
> 时间：2012-07-08T13:47:31.230
> 
> 标签：if-statement, octave

我在 octave 3.6.2 中收到以下行的语法错误：

```
if(exist('OCTAVE_VERSION')~=0) more off; end 
```

尽管：

```
if(exist('OCTAVE_VERSION')~=0)
 more off;
end 
```

似乎还可以。然而：

```
if(exist('OCTAVE_VERSION')~=0) fflush(stdout); end 
```

效果很好。

这是一个与非括号内的参数相关的错误（？）吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T17:02:32.820

**我在 Octave 3.4.3 中也得到了相同的结果：**

似乎是 octave 中的无害编译器错误，当您在 1 行 if 语句中使用命令 'more off' 或 'more on' 时，会引发语法错误。

如果在条件之后添加换行符，或者如果在 eval(...) 中包含“more off”，则它可以正常工作。

```
%works correctly, turns off paging screen output
if(1)
  more off;
end

%works correctly, prints 3.4.3
if(1) disp(OCTAVE_VERSION);  end

%works correctly, prints '1'
if(1) disp([1]); more off;  end

%syntax error when parsing "off" in 'more off'.
if(1) more off; endif

%syntax error on parsing 'off' in 'more off;'
if 1 more off;  endif

%works correctly, turns off paging screen output
if (1) eval("more off"); endif 
```

抛出的语法错误是：“错误：读取脚本文件时解析错误”。

# ios - iOS - 字符编码；NSLog 在模拟器中的打印与在设备上的打印方式不同

> ID：11383616
> 
> 赞同：1
> 
> 时间：2012-07-08T13:48:34.500
> 
> 标签：ios, character-encoding

我的小应用程序在设备（iPhone 4、5.1）上打印的 NSLog 输出与在 5.1 模拟器上不同。

字符串来自外部 Web 服务（在本例中为：Salesforce），其中一些包含德语变音符号 (ÄÖUäöü)。字符串在模拟器（Xcode 4.3.3，德语 Mac）上正确 NSLogged，但在 iPhone 4（德语模式）上运行时包含通常奇怪的不匹配字符。截图：[https ://skitch.com/tschloss/efp6u/l-sim.txt-and-l-iph.txt-have-23-differences](https://skitch.com/tschloss/efp6u/l-sim.txt-and-l-iph.txt-have-23-differences)

我不知道在哪里可以寻找差异来消除这种不当行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:10:51.433

尝试切换调试器，它可能会解决您的编码问题。要选择使用哪一个，请从 Product 菜单中选择 Edit Active Scheme，然后选择左栏中的 Run 项。在“信息”窗格中，从“调试器”弹出菜单中选择要使用的调试器。查看 Apple[文档](http://developer.apple.com/library/mac/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/Debugging/Debugging.html)。

# android - 带有 SSL 的 Android 和 HTTPS

> ID：11383619
> 
> 赞同：4
> 
> 时间：2012-07-08T13:49:07.443
> 
> 标签：android, ssl, https

> **可能重复：**
> [Android HttpClient 和 HTTPS](https://stackoverflow.com/questions/2603691/android-httpclient-and-https)

我想在 Android 上编写将与 HTTP 服务器交换 XML 文件的应用程序。我想使用 HTTPS 和 SSL 来保护这个连接，但我真的是保护事物的新手。我在互联网上寻找一些教程，但我发现一切都很混乱。谁能解释我如何使用 HTTPS 和 SSL 与 HTTP 服务器交换文件。也许你知道一些描述这个的教程或书籍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:20:21.020

互联网上有很多链接。寻找 Apache HttpClient 和 HTTPS 以及文件传输。

例如：

[Android HttpClient 和 HTTPS](https://stackoverflow.com/questions/2603691/android-httpclient-and-https)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:23:33.153

如果您的网络服务器已经正确配置为以 HTTPS 或 SSL 提供服务，那么在 Android 端没有什么可做的，您基本上需要使用平台提供的 API。查看以下文档：http: [//developer.android.com/reference/javax/net/ssl/HttpsURLConnection.html](http://developer.android.com/reference/javax/net/ssl/HttpsURLConnection.html)

# qt - 在图像上绘制一个矩形，如何旋转这个矩形并获取它的参数？

> ID：11383620
> 
> 赞同：1
> 
> 时间：2012-07-08T13:49:32.850
> 
> 标签：qt, qt4, computer-vision

我想开发一个小型应用程序，允许用户使用矩形来注释图像的不同部分。例如，用户可以在标有“头部”的图像上绘制一个矩形，这个应用程序可以获得这个矩形的参数（高度、宽度、中心坐标......）。有时我还需要旋转这个矩形来选择一个特定的区域。

我想使用 Qt 来实现我的想法，但我不知道如何：

1.  获取用户绘制的矩形的参数。（高度，宽度，中心坐标...）
2.  如何旋转矩形并获得旋转角度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:59:25.427

要让用户绘制矩形，您需要获取绘图小部件中发生的鼠标事件。您可以重新实现小部件的[mousePressEvent](http://qt-project.org/doc/qt-4.8/qwidget.html#mousePressEvent) ,`mouseMoveEvent`或`mouseReleaseEvent`将[事件过滤器](http://doc.qt.nokia.com/4.7-snapshot/eventsandfilters.html#event-filters)安装到此小部件。当用户按下左键时，您应该记住事件`pos()`是矩形的左上角。`pos()`当用户在此之后移动鼠标时，您应该设置移动事件的矩形 ro 的右下角。释放按钮必须提交创建一个矩形。

有几种方法可以绘制矩形。您可以实现[paintEvent](http://qt-project.org/doc/qt-4.8/qwidget.html#paintEvent)并在其中使用[QPainter](http://qt-project.org/doc/qt-4.8/qpainter.html)。但我认为最好的方法是使用[QGraphicsScene](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html)。您可以创建可见的矩形，移动和旋转它们。

# android - 我将一堆edittxt动态添加到线性布局，但希望它们出现在布局的中心而不是布局的左侧

> ID：11383626
> 
> 赞同：-1
> 
> 时间：2012-07-08T13:50:10.220
> 
> 标签：android

我对 android 很陌生，我试图根据用户在另一个活动的 edittext 中输入的字符串长度，将许多 edittexts 动态添加到布局中。我将字符串从第一个活动传递到下一个活动，并为字符串中的每个字符垂直跨线性布局添加一个editText到布局。但不幸的是，这些编辑文本从屏幕的最左侧开始，并在添加时从左向右移动。无论单词中的字母数量如何，我都希望这些编辑文本处于中心位置。有谁知道我该怎么做？到目前为止，这是我基于否添加多个编辑文本的活动的代码。字符串中的字符数。

```
import java.util.ArrayList;
import java.util.List;

import eoin.hangman.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.EditText;
import android.widget.Toast;

public class GameScreen extends Activity {

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gscreen);

        Intent intent = getIntent();
        String word = intent.getExtras().getString("ans");
        int noofletters = word.length();
        View linearLayout =  findViewById(R.id.info);
       // char[] cArray = word.toCharArray();

          for(int i=0;i<noofletters;i++)
          {
                EditText editText = new EditText(this);
            LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT);
            editText.setLayoutParams(params);
            ((ViewGroup) linearLayout).addView(editText);
            // editText.setText(cArray[i]);
          }
       }
} 
```

我还尝试将字符串中的单个字符添加到每个编辑文本中，但这似乎对我也不起作用。任何帮助是极大的赞赏！

所以我编辑了我的代码。这就是我所做的。为编辑文本框创建单独的 edttxt.xml，然后我将其膨胀。在 gscreen.xml 中的 tablelayout 内已设置行的 tablelayout 中创建。它摆脱了以编程方式添加视图，这很好。我仍然想将字符串中的一个字符添加到每个edittext，但不能这样做。希望我能弄清楚。最主要的是我在学习。不过，我希望进展得更快一些。几乎忘记了我刚刚在 gscreen.xml 中的 tablerow 中使用 android:gravity="center_horizo​​ntal" 将编辑文本框居中。希望这将有助于将来的某人。

```
public class GameScreen extends Activity {

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.gscreen);

            Intent intent = getIntent();
            String word = intent.getExtras().getString("ans");   //get string from intent sent to this activity
            int noofletters = word.length();                     //no of letters in string which creates an edittext box for each character.

            LayoutInflater  edit_inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View insertpoint = findViewById(R.id.tablerow);

              for(int i=0;i<noofletters;i++)
              {
                  EditText edtview = (EditText)edit_inflater.inflate(R.layout.edtxt,null);  
                  ((ViewGroup) insertpoint).addView(edtview);

              } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:00:12.410

`android:layout_gravity="center_horizontal"`参数就是你需要的。

虽然您可以从代码中设置它，但我建议您制作一个包含 EditText 的 XML 布局文件，然后使用`.inflate()`它而不是从代码中创建一个新的 EditText。这会将表示与逻辑分开，并且更容易通过 XML 更改外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:04:56.087

试试这个解决重力问题

```
 LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT,Gravity.CENTER_HORIZONDAL); 
```

对于编辑文本

```
editText.setText(word[i], TextView.BufferType.EDITABLE); 
```

在 for 循环内

# objective-c - 如何从另一个类的结构中访问数据？

> ID：11383627
> 
> 赞同：1
> 
> 时间：2012-07-08T13:50:32.027
> 
> 标签：objective-c, properties, struct

我已经创建了结构并希望在另一个类中访问它的数据。因此，我创建了属性，但出现错误“在文件类型的对象上找不到属性 dfi”。我做错了什么？

```
//File.h
typedef struct 
{
    double *data;
    int a;    
} DataFileInfo;

@interface File : NSObject {

    DataFileInfo dfi;
}

@property DataFileInfo dfi;

//File.m
@implementation File

@synthesize dfi; 
```

在`File2`课堂上，我正在尝试访问该属性

```
//File2.m
@implementation File2

File *file = [[File alloc]init];

double *b = file.dfi.data; // error "Property dfi not found on object of type File". 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:17:12.843

更改`@property DataFileInfo dfi;`为：

`@property (nonatomic, readonly) DataFileInfo* dfi;`.

然后删除`@synthesize`and，在其位置代码：

```
(DataFileInfo*) dfi {
    return &dfi;
} 
```

# iphone - iOS 棋盘游戏架 构

> ID：11383628
> 
> 赞同：2
> 
> 时间：2012-07-08T13:50:35.990
> 
> 标签：iphone, objective-c, ios, ipad, cocoa-touch

我即将将我的 5-in-a-row 客户端移植到 iOS 平台。最初我是用Java设计的。有 15*15 个字段需要显示。在 PC 上，我用单独的对象表示字段，这些对象只对自己负责（事件处理等）。我不确定在移动平台上做同样的事情是否是个好主意（我的意思是使用 225 个手势识别器听起来不太有希望）。还有另一种方法将所有这些字段合并到一个大视图中，该视图通过对屏幕坐标进行一些数学运算来负责绘图和事件处理。我个人更喜欢第一种方法，因为它更基于 OO。你认为，如果性能是主要的，我应该在 iOS 上更喜欢哪一个？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T14:20:07.103

如果性能是主要的，你可以有一个自定义的绘制视图，使用[UIGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)来获取 CGPoint 并且只重绘使用[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)影响的区域（正方形） ：

```
- (void)drawRect:(CGRect)rect 
```

做这个数学很简单。

但是，根据控件和每个单元的复杂性，该代码可能难以维护。创建一个带有子视图的分层控件，其中每个子视图负责它如何绘制、处理手势等……更易于维护，代码最终会更干净。会不会有更多的开销？是的。这会是个问题吗？可能不会。因此，您需要尝试并测量。使用子视图创建聚合视图是很常见的，每个子视图都知道如何绘制和处理手势——这就是可可触摸的全部内容。

# python - 关于类和 __str__

> ID：11383629
> 
> 赞同：0
> 
> 时间：2012-07-08T13:51:04.867
> 
> 标签：python, string, class

当我打印我的类的实例时，我尝试返回一个字符串值。看来这不应该像我希望的那样工作。

```
class oObject (object):
    def __init__(self, value):
        self.value = value
    def __str__(self):
        return str(self.value)
    def __repr__(self):
        return str(self.value)

new = oObject(50)
# if I use print it's Okay
print new
# But if i try to do something like that ...
print new + '.kine' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:53:51.463

尝试显式转换为字符串：

```
print str(new) + '.kine' 
```

或者，您可以使用格式字符串：

```
print '{}.kine'.format(new) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T13:54:01.337

Python 在打印之前将整个表达式的结果转换为字符串，而不是单个项目。在连接之前将您的对象实例转换为字符串：

```
print str(new) + '.kine' 
```

Python 是一种强类型语言，在使用“+”号等运算符时不会自动将项目转换为字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T13:54:48.407

覆盖`__add__`它：

```
class oObject (object):
    def __init__(self, value):
        self.value = value
    def __str__(self):
        return str(self.value)
    def __repr__(self):
        return str(self.value)
    def __add__(self,val):
        return str(self.value)+val

new = oObject(50)
'''if I use print it's Okay'''
print new
'''But if i try to do something like that ...'''
print new + '.kine'   #prints 50.kine 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T16:02:58.890

试着`print new`看看你的`.__str__()`定义是否有效。内部`print`调用它。但是，`+`运算符不使用隐式转换为字符串。

# php - PHP - 数组多维提交

> ID：11383631
> 
> 赞同：-3
> 
> 时间：2012-07-08T13:51:38.970
> 
> 标签：php, arrays, forms, input, multidimensional-array

我是新来的。我有问题并且非常着急:(场景：我想制作一个动态输入表单。用户输入他们想要的许多列和行。然后，它将表格生成为以前表单中输入的数字。之后，用户输入一个随机数到表中，点击提交按钮，系统会记录数据并进行处理，最后系统会显示平均值（只是示例）。

表生成成功。问题是如何保存/读取输入表单中输入的数据。

这是 input.php

```
<tr> 
<td width="30%" align="left" valign="top">Input the number of columns     :<td      height="37" align="left" valign="top"><input type="text" name="colums" value="" /></td> 
</tr> 
<tr> 
<td align="left" valign="top">Input the number of rows :</td> 
<td width="70%" align="left" valign="top"><input type="text" name="rows" value="" /></td> 
</tr> 
<tr> 
<td align="left" valign="top">&nbsp;</td> 
<td align="left" valign="top"><input type="submit" name="button" id="button" value="Submit" /></td> 
</tr> 
</table> 
</form> 
```

和这样的结果php..

```
<?php 
$columns = $_POST['columns']; 
$rows = $_POST['rows']; 

echo "<form method='post' action='process.php'>"; 
echo "<table>"; 

//made the rows 
for ($i= 0; $i <= $rows-1; $i++){ 

//and the colums 
echo "<tr>"; 
for ($j = 0; $j <= $colums-1; $j++) { 

//here is the input form, and each of data inputed here that i want to save it. 
$sum = array('[$i][$j]'); 
echo "<td> </td> 
    <td><input size='5' type='text' name='data".$sum."' /></td> 
"; 

}
echo "</tr>";  
} 

echo "<tr><td></td><td><input type='submit' name='submit' values='Submit' /></td></tr>"; 
//im not sure here in value='$sum' 
echo "<tr><td></td><td><input type='hidden' name='banyak' value='$sum' /></td></tr>"; 
echo "</table>"; 
echo "</form>"; 

// here,which one should i $_GET[''] ? 

?> 
```

并且 process.php 显示数据的平均值。我在 process.php 中完全错了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T14:06:31.490

检查这个：

```
<?php 
$columns = 3; //test value
$rows    = 2; //test value

echo "<form method='post' action='process.php'>"; 
echo "<table>"; 

//made the columns 
for ($row_idx= 0; $row_idx <=$rows-1; $row_idx++){ 

    //and the rows 
    echo "<tr>"; 
    for ($col_idx = 0; $col_idx <= $columns-1; $col_idx++) { 

    //here is the input form, and each of data inputed here that i want to save it. 
    $sum = array('[$row_idx][$col_idx]'); //??? What's for that?
    echo "<td></td> 
        <td><input size='5' type='text' name='data[{$row_idx}][{$col_idx}]' /></td> 
    "; 

    } 
}

echo "</tr>"; 
echo "<tr><td></td><td><input type='submit' name='submit' values='Submit' /></td></tr>"; 
//im not sure here in value='$sum' 
echo "<tr><td></td><td><input type='hidden' name='banyak' value='$sum' /></td></tr>"; 
echo "</table>"; 
echo "</form>"; 

// here,which one should i $_GET[''] ? 

echo "<PRE>";
print_r($_REUQEST['data']);
echo "</PRE>";

?> 
```

1.  您应该将变量命名为可以理解的。
2.  你应该把你的输入文件命名为一个数组，它会被 php 解析，所以`<input name='data[1][2]' value="foo">`会像这样“到达”`$data = array('1' => array('2' => "foo"));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:11:12.330

正如@Braiba 所说，替换

```
$sum = array('[$i][$j]'); 
```

和

```
$sum = "[$i][$j]"; 
```

然后你使用

```
$my_data = $_GET['data']; 
```

这将是一个二维数组。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-08T14:01:32.043

代替

```
$sum = array('[$i][$j]'); 
```

和

```
$sum = "[$i][$j]"; 
```

（注意双引号）

还将关闭 tr 标记向上移动一行，使其实际上位于循环内并删除包含隐藏输入的行。即使你需要那个值，你也不应该为它创建一行；它只会看起来令人困惑。

*编辑：*我可能应该尝试阅读问题实际上是什么，而不是仅仅看到损坏的代码并尝试修复它。正如其他人现在所说，一旦您完成所有操作，它将以 $_GET['data'] 的形式提交

# groovy - Groovy：为什么我需要双转义方括号？

> ID：11383643
> 
> 赞同：9
> 
> 时间：2012-07-08T13:53:29.020
> 
> 标签：groovy

为什么这不起作用？

```
"hello[world".split("\[") 
```

这确实：

```
"hello[world".split("\\[") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T14:12:20.600

这实际上是不同上下文中的两次转义，因为参数是表示为字符串的正则表达式。

必须转义，`[`否则它将在正则表达式中具有特殊含义。正则表达式的转义将使它成为`\[`. 但是`\`必须转义，因为它在字符串中具有特殊含义（用于转义和用数值表示字符）。

情况可能会更糟，因为`\`角色在两种情况下都用于转义。如果要按`\`字符拆分，则必须将其转义 ( `\\`) 以使用正则表达式，但是您有两个`\`字符，它们都必须在字符串上下文中进行转义。如果将要拆分的原始字符串中的用法写为常量，则也需要转义，因此类似的拆分如下所示：

```
"hello\\world".split("\\\\") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:04:55.773

不同版本的 Groovy 给出不同的结果。

对于 Groovy 1.1-BETA-1 及更高版本，

```
assert "hello[world".split("\\[") == ["hello", "world"] 
```

断言 OK，但 Groovy 1.0 及之前的版本给出了断言错误。

```
assert "hello[world".split(/\[/) == ["hello", "world"] 
```

从 1.1-BETA-1 开始的所有版本都断言 OK，Groovy 1.0-jsr-01 到 1.0 给出一个断言错误，而 Groovy 1.0-beta-10 及之前的版本给出一个词法错误。

```
"hello[world".split("\\[").each{println it} 
```

对于从 1.0-beta-5 和 beta-3 开始的所有 Groovy 版本，打印

```
hello
world 
```

但是 1.0-beta-4 打印

```
[.]
[.]
hello
world 
```

# fortran90 - fortran 90中的离散高斯模型

> ID：11383644
> 
> 赞同：-1
> 
> 时间：2012-07-08T13:53:30.560
> 
> 标签：fortran90

我想生成具有均值为零和方差为 2.25 的高斯分布的离散随机数（用于 1000 个集合）。我[在 Fortran 90 中的 NUMERICAL RECIPES](http://apps.nrbook.com/fortran/index.html)书第 7 章第 7.2 节中看到了`gasdev`用于此的函数，但我不知道如何使用此函数。

如何使用集合的数量以及均值和方差？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:43:07.413

IMO，如何使用 NR 中的函数最好用 NR 本身编写。

如果您需要生成正态分布的实数，请在谷歌上搜索“Box-Muller 变换”，或直接访问[Wiki 页面](http://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform)和/或 SO 上的数十个问题和答案。

如果您的要求是生成*整数*（您的意思是通过询问*离散随机数*吗？），我想说最简单的方法[是计算 cdf](https://stackoverflow.com/questions/11373192/generating-discrete-random-variables-with-various-weights-using-scipy-or-numpy/11374850#11374850)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T19:45:19.050

`gasdev``0.0`返回具有均值和方差的正态分布随机变量`1.0`，通常写为`N(0, 1)`. 您应该使用方差缩放结果以匹配所需的分布。请注意，如果`x`是`N(0, 1)`（由 返回`gasdev`），则`y = a + b*x`是`N(a, b^2)`，即正态分布随机变量，均值为`a`，方差为`b^2`。

（顺便说一句，如果这是一个家庭作业，它应该被正确标记）

# jetty - 如何将码头配置为带有过期标头的 css/js 文件服务器？

> ID：11383645
> 
> 赞同：2
> 
> 时间：2012-07-08T13:53:32.603
> 
> 标签：jetty, expires-header

```
<Configure class="org.eclipse.jetty.server.handler.ContextHandler">
  <Set name="contextPath">/</Set>
  <Set name="resourceBase"><SystemProperty name="jetty.home" default="."/>/webapps/foo</Set>
  <Set name="handler">
    <New class="org.eclipse.jetty.server.handler.ResourceHandler">
      <Set name="cacheControl">max-age=3600,public</Set>
    </New>
  </Set>
<Set name="virtualHosts">
    <Array type="java.lang.String">
          <Item>foo.bar</Item>
    </Array>
</Set>
</Configure> 
```

这是我的配置，但**不能将过期**标头添加到 http 响应中。

> 因为 ResourceHandler 中没有与 expires 头相关的属性。

我发现 MovedContexHandler 有这个属性，我应该使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T01:39:26.807

我做了一个愚蠢的黑客来完成这项工作！如果您有更好的解决方案，请告诉我。

```
package org.eclipse.jetty.server.handler;

import javax.servlet.http.HttpServletResponse;

import org.eclipse.jetty.http.HttpHeaders;
import org.eclipse.jetty.util.resource.Resource;
/**
 * @author jilen.zhang@gmail.com
 * @date 12-7-6
 */
public class StaticResourceHandler extends ResourceHandler{
    private String expires = "xxx";

    @Override
    protected void doResponseHeaders(HttpServletResponse response, Resource resource, String mimeType) {
        super.doResponseHeaders(response, resource, mimeType);
        response.setHeader(HttpHeaders.EXPIRES, expires);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T05:34:33.427

我给你一个更好的。有关将任意标头注入响应的过滤器，请参阅[https://stackoverflow.com/a/23307057/14731 。](https://stackoverflow.com/a/23307057/14731)

# xcode - 我无法理解使用 Appliciation Loader 上传的文件

> ID：11383646
> 
> 赞同：0
> 
> 时间：2012-07-08T13:53:39.187
> 
> 标签：xcode, app-store-connect

我正要在 iTunes Connect 中提交我的应用程序，但我不知道如何使用 Application Loader 上传我的应用程序。它告诉我选择文件，但我不能选择 .zip 文件和我的应用程序文件夹。

请帮我弄清楚如何以正确的扩展名包装我的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:59:56.850

以下是有关如何上传您的应用以供审核的教程：[教程](http://www.touch-code-magazine.com/how-to-upload-an-app-to-the-app-store-with-xcode-4/)

其中大部分是在 xCode 中完成的。您没有上传 zip 文件。您在 xCode 中编译应用程序并上传结果。

希望这可以帮助！

# java - Map 中的密钥存在检查实用程序

> ID：11383649
> 
> 赞同：39
> 
> 时间：2012-07-08T13:54:08.030
> 
> 标签：java, dictionary, hashmap

`Map`我正在使用以下代码检查实例中是否存在密钥：

```
if (!map_instance.containsKey(key))
    throw new RuntimeException("Specified key doesn't exist in map");
else
   return map_instance.get(key); 
```

我的问题是：

是否有实用程序或`Map`实现来简化上述代码，例如：

```
custom_map.get(key,"Specified key doesn't exist in map"); 
```

我的目标是：如果`key`地图中不存在，则地图实现会使用传递的字符串引发异常。

我不知道我的愿望是否合理？

（对不起，如果我使用了错误的术语或语法，我还在学习英语。）

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2019-05-29T11:53:36.650

我使用可选的 Java util 类，例如

```
Optional.ofNullable(elementMap.get("not valid key"))
            .orElseThrow(() -> new ElementNotFoundException("Element not found")); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-06-22T12:13:09.883

在 Java 8 中，您可以使用[`computeIfAbsent`](https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#computeIfAbsent-K-java.util.function.Function-)from `Map`，如下所示：

```
map.computeIfAbsent("invalid", key -> { throw new RuntimeException(key + " not found"); }); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2020-05-09T19:17:07.760

还有一种更好的方法可以实现这一点：

```
return Objects.requireNonNull(map_instance.get(key), "Specified key doesn't exist in map"); 
```

优点：

*   纯 Java - 没有库
*   没有多余的可选 - 更少的垃圾

缺点：

*   only `NullPointerException`- 有时`NoSuchElementException`或自定义例外更可取

需要 Java 8

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-08T14:07:28.917

您可以查看来自 Apache commons 的配置图。它没有实现`Map`，但具有类似的接口，带有一些 Helper 方法，例如`getString`,`getStringArray`等`getShort`。

使用此实现，您可以使用该方法`setThrowExceptionOnMissing(boolean throwExceptionOnMissing)`并可以根据需要捕获和处理它。

不完全是可配置的消息，但从我的角度来看，仅使用自定义消息引发固定异常是没有意义的，因为异常类型本身取决于`get`调用方法的上下文。例如，如果您执行获取用户的异常将是与此相关的东西，也许`UserNotFoundException`，而不仅仅是`RuntimeException`带有消息：用户未在地图中找到！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-08T14:00:20.077

Java 中的 Map 不存在这样的方法。当然，您可以通过扩展 Map 类或创建包含地图和`tryGet`方法的包装类来创建它。

然而，C# 确实有一个这样的方法：`Directory.TryGetValue()`

```
public class MyMap {
    public Map<Object, Object> map = new HashMap<Object, Object>();

    public Object tryGet(Object key, String msg) {
        if(!map.containsKey(key))
           throw new IllegalArgumentException(msg);
        return map.get(key); 
   } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-08T13:58:10.673

你这样做的方式就是要走的路。

作为旁注，您的代码没有多大意义，因为您将始终返回 true，也许您的意思是：

```
return map_instance.get(key); 
```

# c++ - OpenGL 3.3 GLX_ARB_create_context_profile 在带有 bumblebee 的 Linux 上不可用

> ID：11383651
> 
> 赞同：1
> 
> 时间：2012-07-08T13:54:16.570
> 
> 标签：c++, linux, opengl, glew, glfw

我在使用 glfw 设置 OpenGL 3.3 应用程序时遇到问题。我明白了

```
OpenGL profile requested but GLX_ARB_create_context_profile is unavailable 
```

当我尝试通过 optirun 运行我的应用程序时出错（我有 Nvidia Optimus 卡，所以没有其他方法）。其他 OpenGL > 3.3 应用程序适用于 optirun（unigine Heaven）...[这是我尝试运行的代码](http://pastebin.com/h5Y7vHQN)，这是["optirun glxinfo" 的结果](http://pastebin.com/1BXLE8P5)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T17:23:52.197

你确定你需要这条线吗？

```
glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE); 
```

删除它应该可以解决问题。

如果它出现段错误，请查看[这个问题](https://stackoverflow.com/questions/8302625/segmentation-fault-at-glgenvertexarrays-1-vao)。

# magento - magento 网站错误

> ID：11383654
> 
> 赞同：-1
> 
> 时间：2012-07-08T13:54:24.960
> 
> 标签：magento

我刚刚将我的 magento 站点移动到另一台服务器，并且在页脚区域出现此错误

*致命错误：/home/bzd088/public_html/app/code/core/ 中的消息“通知：未定义的偏移量：/home/bzd088/public_html/lib/Varien/Autoload.php 第 160 行中的 1”未捕获异常“异常” Mage/Core/functions.php:245 堆栈跟踪：#0 /home/bzd088/public_html/lib/Varien/Autoload.php(160): mageCoreErrorHandler(8, 'Undefined offse...', '/home/bzd088/ pu...', 160, Array) #1 /home/bzd088/public_html/lib/Varien/Autoload.php(127): Varien_Autoload->_saveCollectedStat() #2 [内部函数]: Varien_Autoload->__destruct() # 3 {main} 在第 245 行的 /home/bzd088/public_html/app/code/core/Mage/Core/functions.php 中抛出*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T02:41:04.947

文件权限问题

请重新检查root上所有目录的文件权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:54:42.760

编译模式有问题。您可能需要重新运行此过程。

禁用编译模式： http: [//kb.magenting.com/content/24/81/en/disable-magento-compiler.html](http://kb.magenting.com/content/24/81/en/disable-magento-compiler.html)

# c - 如何在 Visual Studio 2008 中打开 c++ 或 C？

> ID：11383655
> 
> 赞同：-1
> 
> 时间：2012-07-08T13:54:43.677
> 
> 标签：c, visual-studio-2008

我想在 Visual Studio 2008 中使用 C 编写程序。但我不知道如何开始，我应该选择什么才能创建 C 程序

文件->新建项目->“其他语言 C++”。

或者

文件->新建->新文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:58:06.343

根据您的措辞，我认为您可能正在寻找开发本机 CLI（命令行界面）应用程序，在这种情况下，您需要“Win32 控制台应用程序”

请注意，名称中带有 CLR 的任何项目类型都不是真正的 C/C++，而是 C++ 的 .NET 托管实现。同样，名称中带有 ATL 或 MFC 的任何内容都是“如果您不知道它是什么，则不需要它”的情况。

希望这会帮助您缩小范围，但您可能还是想要我建议的那个。

# jquery - 带有.next（）和.prev（）的jquery图像滑块不起作用

> ID：11383658
> 
> 赞同：1
> 
> 时间：2012-07-08T13:55:19.700
> 
> 标签：jquery, image, slider

我正在尝试使用下一个和上一个按钮编写一个简单的图像滑块。但是我在遍历列表时遇到了问题，尤其是当它是第一张图像并且我单击上一个按钮时。然后滑块应显示最后一个图像。也许有人可以给我一个提示...

我的 HTML：

```
<div id="slideshow"> 
<img src="img/slide11.jpeg"  alt="" class="active">
<img src="img/slide31.png" alt="">
<img src="img/slide21.png"  alt="">
</div> 
```

单击处理程序：

```
$(document).ready(function () {
 $('#next').bind('click', function() {
    slideSwitchP('next');
});

 $('#prev').bind('click', function() {
    slideSwitchP('prev');
});
});
} 
```

到目前为止的jQuery代码（不工作）

```
function slideSwitchP($control) {
var $active = $('#slideshow IMG.active');

var $next = $active.next().length ? $active.next() : $('#slideshow IMG:first');
var $prev = $next.prev().length ? $active.prev() : $('#slideshow IMG:last');

console.log('next', $next);
console.log('prev', $prev);

$active.addClass('last-active');

if($control === 'next'){ 
console.log($control);
$next.css({opacity: 0.0})
    .addClass('active')
    .animate({opacity: 1.0}, 1000, function() {
        $active.removeClass('active last-active');
    });
}
if($control === 'prev'){ 
console.log($control);
//prev not working!
}
} 
```

任何想法将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:01:19.047

我想，你需要这个：

```
var $prev = $active.prev().....
           //  ^---------instead of `$next` 
```

[现场演示](http://jsfiddle.net/NBWsM/)

# bash - 在终端上重建 node.js sha1

> ID：11383659
> 
> 赞同：0
> 
> 时间：2012-07-08T13:55:22.117
> 
> 标签：bash, node.js, sha1

我在 node.js 中有一个 REST API。它可以 CRUD 客户端并保存如下加密密钥：

```
// Let's sha the value.
var crypto = require('crypto')
  , shasum = crypto.createHash('sha1');

shasum.update(clientId + apiKey);

 // My hashed value:
shasum.digest('hex'); 
```

我想要一个 shell 脚本，它可以在不接触 API 的情况下执行相同的操作。

我试过这个：

```
echo '1000apikey' | openssl sha1 -hex 
```

但它会导致不同的散列值（如果 clientId 是 1000 并且 apiKey 是“apikey”）。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T14:36:28.333

`echo '1000apikey'`在字符串的末尾添加一个换行符，它也会被散列。试试`echo -n '1000apikey' | openssl sha1 -hex`。

# jquery - 带有变量的 Jquery 动态选择器

> ID：11383666
> 
> 赞同：0
> 
> 时间：2012-07-08T13:56:28.593
> 
> 标签：jquery, variables, dynamic

我目前正在学习javascript（jquery）。我正在构建一个插件来创建简单的手风琴菜单，但在创建动态变量时遇到了问题。

```
(function($){

    jQuery.accordify = function(settings){

        $defaults = {
            section : null,
            content : null,
            animation: 'slide',
            speed: 500
        }

        var defaults = $defaults;
        var settings = $.extend(defaults, settings);

        $animation = {
            slide : {in : 'slideDown('+settings.speed+')', out: 'slideUp('+settings.speed+')'},
            fade : {in: 'fadeIn('+settings.speed+')', out: 'fadeOut('+settings.speed+')'}
        }

        var animation = $animation.+settings.animation; // equvilent to 'animation.slide'

        alert(animation.in); // should return 'slideUp(500)'

    }

})(jQuery); 
```

变量**动画**试图引用在*设置/默认*数组中定义的**animation.slide**的等价物，我将如何让它工作，以便我能够调用**animation.in**而不是**animation.slide.in**？

 ****** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:36:54.020

我设法解决了我面临的问题，我将文字对象更改为变量并像这样调用子对象......`animation[settings.animation]`这很有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:00:45.833

语法错误，注意 . 再加上**.+**

```
 $animation.+settings 
```

另请注意：“in”是保留字，最好尽快更改 [https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words](https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words)*****

# qr-code - 二维码实现

> ID：11383670
> 
> 赞同：-3
> 
> 时间：2012-07-08T13:57:20.323
> 
> 标签：qr-code

我有与 QR 码相关的要求，我的朋友拥有一家食品店（又名商人），我需要为他的客户实施 QR 码，因为我是这个 QR 码的新手，我需要一些帮助，我应该从哪里开始研究这个, 所以场景是 1) 客户在他的 (客户) 家中看到一个带有食品清单的小册子 2) 客户使用他的手机扫描他喜欢的食品, 现在商家应该收到客户的详细信息 (地址/手机）扫描后自动。

所以现在我需要从哪里开始研究这个问题

基本上据我所知，首先客户数据必须在商家那里（这必须由客户完成），所以当他扫描时，必须将订购的商品连同他的详细信息一起发送给商家。

那么我在哪里可以开始研究这个来实现这个，我需要知道什么技术？

有这方面的书/教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-03T12:01:47.640

ShieldUI 开源库提供了一种 JavaScript 实现，可在此处获得： [https](https://github.com/shieldui/shieldui-lite) ://github.com/shieldui/shieldui-lite 此处 提供 jquery 插件实现的一个示例：http: [//demos.shieldui.com/web /qrcode/api](http://demos.shieldui.com/web/qrcode/api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:38:49.093

不要实施任何东西。使用zxing库进行编码和解码：[http ://code.Google.com/p/zxing](http://code.Google.com/p/zxing)

您还没有真正说出您的技术需求是什么。而且您似乎需要在考虑实施之前确定产品需求。

# javascript - 在 Chrome 中更改选项卡时 setTimeout 无法正确响应

> ID：11383676
> 
> 赞同：0
> 
> 时间：2012-07-08T13:58:13.477
> 
> 标签：javascript

> **可能重复：**
> [Chrome：后台选项卡中暂停的超时/间隔？](https://stackoverflow.com/questions/6032429/chrome-timeouts-interval-suspended-in-background-tabs)

当我们保持在同一个选项卡上时，它可以正常工作，但是当我们更改选项卡时，它`setTimeout`在 Chrome 中的响应很奇怪。估计跟`window.blur`事件有关系。

以下是代码：

```
function animate(_travel, elementID)
{
    OB = document.getElementById(elementID);

    getNumber = OB.style.marginLeft.replace("px", "") * 1;

    ease = Math.ceil(_travel / 8);

    OB.style.marginLeft = (getNumber - ease) + "px";

    _travel -= ease;    

    if(_travel > 0) {
        setTimeout("animate(" + _travel + ", '" + elementID + "')", 15);
    }
}

animate(300, 'myDiv'); 
```

# ruby-on-rails - 已审核，查找属于用户的审核

> ID：11383677
> 
> 赞同：6
> 
> 时间：2012-07-08T13:58:25.330
> 
> 标签：ruby-on-rails, ruby, rubygems, acts-as-audited

我[`audited`](https://github.com/collectiveidea/audited)用来跟踪一个名为`Page`. 我希望能够找到与某个用户相关的所有审计（通过`user_id`在审计表中）。

我怎样才能做到这一点？到目前为止，我发现访问`Audit`模型的唯一方法是这样的：

```
@audits = Audited::Adapters::ActiveRecord::Audit.all 
```

这似乎不是做事的正确方法。

尝试`@audits = Audit.all`给出`Uninitialized constant`错误。

有没有更优雅的方式与 gems 提供的模型进行交互？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T15:08:49.020

也许像

`include Audited::Adapters::ActiveRecord::Audit`

然后你可以做

`@audits = Audit.all`

?

我认为这应该有效......或者更好：

`include Audited`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-07T05:50:26.927

您可以访问所有审计记录

```
Audited::Audit.all 
```

我输入的时候得到了结果

```
Audited.audit_class 
```

> 弃用警告：audit_class 已弃用，将从 Rails 5.0 中删除（Audited.audit_class 现在始终为 Audited::Audit。此方法将被删除。）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-03T14:17:52.653

我知道这不是一种有效的方法，但我就是这样做的。

在 Rails 控制台中，我检索了一条我知道已审核的记录。

`@page = Page.first`

然后我检索该记录的第一次审计。

`@audit = @page.audits.first`

然后你可以`#class`调用`@audit`

`@audit.class`

结果：

```
Audited::Adapters::ActiveRecord::Audit(id: integer, created_at: 
datetime, updated_at: datetime, auditable_id: integer, auditable_type: 
string, user_id: integer, user_type: string, username: string, action: 
string, audited_changes: text, version: integer, comment: string, 
full_model: text, remote_address: string, associated_id: integer, 
associated_type: string, request_uuid: string) 
```

`Audited::Adapters::ActiveRecord::Audit`是类名，然后您可以在搜索中使用它。

`audits = Audited::Adapters::ActiveRecord::Audit.where(:user_id => 8675309)`

# ruby-on-rails - rails - 干燥控制器动作

> ID：11383678
> 
> 赞同：1
> 
> 时间：2012-07-08T13:58:28.360
> 
> 标签：ruby-on-rails, controller, metaprogramming, dry

我有一个有很多代码重复的控制器，例如：

```
class PostController < ApplicationController
  def action1
  end

  ...

  def actionN
  end
end 
```

基本上每个动作都做这样的事情：

```
def action
  @post = Post.find(params[:id])
  if @post.action(current_user)
    flash[:notice] = "#{custom string for this action}"
  else
    flash[:notice] = "Problem with your request"
  end
  redirect_to root_url
end 
```

我想到了 ApplicationController 中的一个方法，它接受一个符号数组并生成其他方法，例如：

```
def self.action_for(*args)
   args.each do |method, string|
     define_method method.to_sym do
        @post = Post.find(params[:id])
        if @post.send method.to_sym
          flash[:notice] = string
        else
          flash[:notice] = "Problem with your request"
        end
        redirect_to root_url
     end
   end
end 
```

并调用 PostController：

```
action_for [:action1, "Congratulations!"], [:action2, "Cool action!"] .. 
```

我认为这个解决方案很难看，它使 ApplicationController 变脏并允许其他控制器调用我的操作。

有解决代码重复问题的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:11:51.590

你为什么不做一个单独的动作来接收一些额外的参数，比如`msg`？然后您可以利用内置的 I18n 支持：

```
def some_action
  @post = Post.find(params[:id])
  if @post.action(current_user)
    flash[:notice] = I18n.t("messages.#{params[:msg]}", default: "Wrong message type")
  else
    flash[:notice] = I18n.t("messages.problem")
  end
  redirect_to root_url
end 
```

`@post.action`或者也许允许您返回一些消息以通知您是有意义的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:09:45.833

我认为这个解决方案没有什么太丑陋的地方。

要将逻辑限制在一个控制器中，您可以`self.action_for`在 PostController 中定义，而不是在 ApplicationController 中定义，并在其定义下方调用它。

请注意，您已经将第一个元素成对作为符号传递，因此不需要`to_sym`调用。`action_for`

# javascript - tinyMCE 的 iframe 或表格高度未正确调整大小

> ID：11383684
> 
> 赞同：3
> 
> 时间：2012-07-08T13:59:51.950
> 
> 标签：javascript, jquery, jquery-ui, tinymce

我已经成功地将 tinyMCE 编辑器添加到我的网络应用程序中，以便用户可以做笔记。我有它在 div 内替换的 textarea，以便 div 可以随页面调整大小，并且 textarea 始终可以设置为宽度：100% 和高度：100%

我的 tinyMCE.init 如下所示：

```
tinyMCE.init({
  mode: "specific_textareas",
  editor_selector: "notes-editor",
  theme: "advanced",
  plugins: "",
  theme_advanced_buttons1: "bold,italic,underline,strikethrough,|,bullist,numlist,|,undo,redo,|,forecolor,backcolor",
  theme_advanced_toolbar_location: "top",
  theme_advanced_toolbar_align: "left",
  theme_advanced_statusbar_location: "none",
  theme_advanced_resizing: false,
  height: "100%",
  width: "100%"
}); 
```

不幸的是，这会返回一个如下所示的编辑器： ![在此处输入图像描述](../Images/555629d7b71c0309f06a67b1b1c41246.png)

无论我如何改变高度，无论是从 CSS 还是 JS，我可以编辑的那个“条”永远不会改变。奇怪的是，这只适用于高度。

我已经完成了从尝试将表格（即`note_contents_tbl`）更改为 iframe（即`note_contents_ifr`）的所有工作，但什么也没做。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:28:31.260

通过将高度和宽度设置为 100% 不起作用。TinyMCE 在 iframe 中创建编辑器，而 iframe 又嵌套在表格中。将高度设置为 100% 不会继承 div 的大小。

我认为这可能是您的问题，如果确实是问题所在，那么您应该将`width`and`height`值从您的包装器 div 的and或您想要的任何值更改`%`为数值，并这样做从刚刚使用中删除，即`width``height``%``init`

```
height: "300",
width: "500" 
```

要以编程方式更改大小，您可以使用

```
var ed = tinymce.activeEditor;
var width = '500';
var height = '300';
ed.theme.resizeTo(width, height); 
```

[**tinyMCE 配置和**](http://www.tinymce.com/wiki.php/Configuration)[**SO**](https://stackoverflow.com/questions/4143581/how-to-set-the-width-of-textarea-using-tinymce)上的另一个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T13:44:42.557

以下 CSS 使 TinyMCE 处理`height: 100%`为剩余空间：

```
td.mceIframeContainer, td.mceIframeContainer iframe { position: fixed; } 
```

# java - 使用 JSP 和 POJO 的被动视图设计模式示例

> ID：11383688
> 
> 赞同：4
> 
> 时间：2012-07-08T14:00:04.883
> 
> 标签：java, jsp, mvp, passive-view

我试图了解被动视图设计模式如何适用于简单的 Web 应用程序。

有人可以使用以下要求提供此模式的简单示例：

1.  View 是一个打印 HELLO WORLD 的 JSP！
2.  数据以“hello world”的形式保存在数据存储中，检索数据的调用可以是存根
3.  为片段（演示者、视图等）提供示例文件，并指出每个文件代表的模式片段。
4.  除了 jstl/el（可选）之外，不应使用任何框架/DSL

谢谢

更新1：增加我对如何构建的理解。

// 主持人; 负责特定视图的多个“再现”（显示、索引、编辑、摘要等）

```
public class HelloWorldPresenter {
     private HttpServletRequest request;
     private DataStore dateStore;

     public HelloWorldPresenter(HttpServletRequest request) { 
        this.request = request;
        this.dataStore = DataStoreUtil.getDataStore(request); 
        // Do a bunch of other inits that all getXXXModels() will use
     } 

     public getShowModel() {
        HelloWorldShowModel model = new HelloWorldShowModel();         
        String tmp = makeLoud(this.dataStore.getMyData()); // Stub method          

        model.setText(tmp);
        return model;
     }

     private String makeLoud(String str) {
        return str.toUpperCase() + "!";
     } 
} 
```

// 视图使用的模型

```
public class HelloWorldShowModel { 
   private String text;
   public getText() { return this.text };
   public setText(String text) { this.text = text; }
} 
```

// 查看 show.jsp

```
<c:set var="model" value="new HelloWorldPresenter.getShowModel()"/>
${model.text} -> HELLO WORLD! 
```

或者

```
<% HelloWorldShowModel model = new HelloWorldPresenter(request).getShowModel() %>
<%= model.getText() %> 
```

我不确定的事情是：

1.  由于 View 不应该知道 Presenter，Presenter 将如何暴露给 View (JSP)。不过，我可能正在混合语义，而 HelloWorldShowModel（充当某种“ViewModel”，是关于 Presenter 的不应该知道的）。

    1.  我什至应该有 HelloViewShowModel 抽象，还是应该`getText()`在我的 Presenter 上有一个方法，在 JSP 中调用它来获取请求的文本。

    2.  如果我对一个资源有多个“视图”（例如 Show、Index、Edit、Summary 等），我应该有多个 Presenter 吗？应该如何打破这个逻辑？从共享演示者继承的多个演示者？每个 Presenter 应该只负责返回一个 ViewModel 吗？

我已经阅读了 Fowlers 的文章以及其他一些文章——问题（对我来说）是它们是在 .NET 应用程序的上下文中编写的，我不明白它们的所有对象是如何连接起来的。

我希望这会减轻我对“懒惰”并寻找“分发”答案的担忧:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:38:03.077

根据您所说的要求，我会说该模式无法实现。如果您将视图视为 JSP，则控制器无法主动设置 UI 组件的任何值。（对我来说，这是该模式的核心：控制器实际上通过设置输入/输出 UI 组件的值来主动更新视图，而不是反过来（视图从模型对象获取字段）。这不能用上述技术作为 JSP 无法以这种方式访问​​。

不过，它可以在基于 Javascript 的 Web 环境中实现。考虑您的视图是 DOM，而您的控制器是 Javascript 组件。JS 控制器具有对 DOM 的直接写入访问权限，因此可以像模式建议的那样主动更新单个字段。为了更新/获取模型，JS 控制器可以与服务器端系统对话，例如基于 REST API 通过 Ajax。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:56:59.053

A plain templating solution like JSP cannot be used to offload all logic to controller, at least in real world cases. I think this kind of thing can be achieved with JSF.

If you want to learn about how things are done I recommend you to take a look at Spring MVC. It's source code can teach you a lot.

# java - 运行基本 Hadoop 代码时出错

> ID：11383693
> 
> 赞同：0
> 
> 时间：2012-07-08T14:00:31.613
> 
> 标签：java, hadoop, mapreduce, hdfs

我正在运行一个在作业中有一个分区器类的 hadoop 代码。但是，当我运行命令时

```
hadoop jar Sort.jar SecondarySort inputdir outputdir 
```

我收到一个运行时错误，上面写着

```
class KeyPartitioner not org.apache.hadoop.mapred.Partitioner. 
```

我已确保 KeyPartitioner 类扩展了 Partitioner 类，但为什么会出现此错误？

下面是驱动代码：

```
JobConf conf = new JobConf(getConf(), SecondarySort.class);
    conf.setJobName(SecondarySort.class.getName());

    conf.setJarByClass(SecondarySort.class);

    conf.setInputFormat(TextInputFormat.class);
    conf.setOutputFormat(TextOutputFormat.class);

    conf.setMapOutputKeyClass(StockKey.class);
    conf.setMapOutputValueClass(Text.class);

    conf.setPartitionerClass((Class<? extends Partitioner<StockKey, DoubleWritable>>) KeyPartitioner.class);

    conf.setMapperClass((Class<? extends Mapper<LongWritable, Text, StockKey, DoubleWritable>>) StockMapper.class);
    conf.setReducerClass((Class<? extends Reducer<StockKey, DoubleWritable, Text, Text>>) StockReducer.class); 
```

这是分区器类的代码：

```
public class KeyPartitioner extends Partitioner<StockKey, Text> {

@Override
public int getPartition(StockKey arg0, Text arg1, int arg2) {

    int partition = arg0.name.hashCode() % arg2;

    return partition;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:19:46.170

请注意，hadoop 中有两个分区器：

```
org.apache.hadoop.mapreduce.Partitioner
org.apache.hadoop.mapred.Partitioner 
```

确保您的`KeyPartitioner`类实现了第二个接口，而不是第一个抽象类。

**编辑**：您必须设置输入和输出文件夹：

```
FileInputFormat.addInputPath(conf, new Path(args[0]));
FileOutputFormat.setOutputPath(conf, new Path(args[1])); 
```

# android - EditText inputtype "time" 不支持冒号？

> ID：11383697
> 
> 赞同：6
> 
> 时间：2012-07-08T14:00:48.430
> 
> 标签：android, validation, android-edittext

设计我的布局，我选择了一个格式为“时间”的 EditText，它把

```
android:inputType="time" 
```

在我的 XML 文件中。但是现在当我运行该应用程序时，Android 会打开软键盘，它只提供数字和数字符号，如“-”、“。” 等等，但正确的时间格式不需要冒号（“##:##”）......

除了使用巨大的图形控件之外，是否有人已经找到了一种简单的方法来输入时间（00:00-24:00）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:11:43.393

@richey 在模拟器中更改您的键盘位置，您就可以输入：以及上午或下午谢谢

# c# - 从字节数组中删除范围

> ID：11383702
> 
> 赞同：0
> 
> 时间：2012-07-08T14:01:33.007
> 
> 标签：c#, bytearray, byte

我在 a 中有一个文件`byte[]`，我需要删除`0x1000`每个偏移量的字节`x`（我有一个偏移量列表）。我有一些代码可以做到这一点，但我想知道是否有更好的方法来做到这一点；

```
private byte[] RemoveHashBlocks(byte[] fileArray, STFSExplorer stfs)
{
    long startOffset = StartingOffset;
    long endOffset = StartingOffset + Size;

    List<long> hashBlockOffsets = new List<long>();
    foreach (xBlockEntry block in stfs._stfsBlockEntry) 
        if (block.IsHashBlock && (block.BlockOffset >= startOffset && block.BlockOffset <= endOffset))
            hashBlockOffsets.Add(block.BlockOffset - (hashBlockOffsets.Count * 0x1000));

    byte[] newFileAray = new byte[fileArray.Length - (hashBlockOffsets.Count * 0x1000)];

    for (int offset = 0; offset < fileArray.Length; offset++)
        if (hashBlockOffsets[0] == offset)
        {
            offset += 0x1000;
            hashBlockOffsets.RemoveAt(0);
        }
        else
            newFileAray[offset] = fileArray[offset];

    return newFileAray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:46:07.897

```
private byte[] RemoveHashBlocks(byte[] fileArray, STFSExplorer stfs)
{
    long startOffset = StartingOffset;
    long size = Size;

    MemoryStream ms = new MemoryStream();
    long lastBlockEnd = 0;

    foreach (xBlockEntry block in stfs._stfsBlockEntry)
    {
        if (block.IsHashBlock)
        {
            long offset = block.BlockOffset - startOffset;
            if (offset + 0x1000 > 0 && offset < size)
            {
                if (offset > lastBlockEnd)
                {
                    ms.Write(fileArray, (int) lastBlockEnd,
                            (int) (offset - lastBlockEnd));
                }
                lastBlockEnd = offset + 0x1000;
            }
        }
    }

    if (lastBlockEnd < size)
    {
        ms.Write(fileArray, (int) lastBlockEnd, (int) (size - lastBlockEnd));
    }

    return ms.ToArray();
} 
```

这假设`stfs._stfsBlockEntry`按 排序`BlockOffset`。

# android - 无法启动活动，setOnClickListener

> ID：11383706
> 
> 赞同：4
> 
> 时间：2012-07-08T14:02:30.217
> 
> 标签：android, onclicklistener, start-activity

无法开始新的活动。onClickListener 出现问题。

我发布了一个错误代码。不知道为什么我在这一行出错。

我认为它可以不初始化变量Button b，但它已初始化！

帮助，请。

代码：

```
public class newItem extends Activity {
    private EditText Quantity;
    private EditText Weight;
    private EditText Price;
    private EditText Title;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.new_list);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        Button b = (Button) findViewById(R.id.ok_but);
        Quantity = (EditText) findViewById(R.id.Quantity);
        Weight = (EditText) findViewById(R.id.Weight);
        Price = (EditText) findViewById(R.id.Price);
        Title = (EditText) findViewById(R.id.Title);

        b.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent i = new Intent();
                i.putExtra("Quantity", Quantity.getText().toString());
                i.putExtra("Weight", Weight.getText().toString());
                i.putExtra("Price", Price.getText().toString());
                i.putExtra("Title", Title.getText().toString());
                setResult(RESULT_OK, i);
                Log.i("palval", "setResult(RESULT_OK, i); newItem");
                finish();
            }
        });
    }
} 
```

错误：

```
07-08 17:26:42.402: E/AndroidRuntime(31626): FATAL EXCEPTION: main
07-08 17:26:42.402: E/AndroidRuntime(31626): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ashopping_list/com.example.ashopping_list.newItem}: java.lang.NullPointerException
07-08 17:26:42.402: E/AndroidRuntime(31626):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2194)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at android.os.Looper.loop(Looper.java:154)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at android.app.ActivityThread.main(ActivityThread.java:4945)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at java.lang.reflect.Method.invokeNative(Native Method)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at java.lang.reflect.Method.invoke(Method.java:511)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at dalvik.system.NativeStart.main(Native Method)
07-08 17:26:42.402: E/AndroidRuntime(31626): Caused by: java.lang.NullPointerException
07-08 17:26:42.402: E/AndroidRuntime(31626):    at com.example.ashopping_list.newItem.onCreate(newItem.java:32)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at android.app.Activity.performCreate(Activity.java:4531)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
07-08 17:26:42.402: E/AndroidRuntime(31626):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2150) 
```

显现：

```
 <activity
        android:name=".newItem"
        android:label="@string/title_activity_main"
        android:windowSoftInputMode="stateAlwaysVisible" >
    </activity> 
```

这里出错：

```
b.setOnClickListener(new OnClickListener() { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T14:04:17.180

尝试使用

```
implements View.OnClickListener 
```

或尝试将 Listener 用作匿名类，然后告诉我它是否有效。

**注意：** *类名*应该以*大写*开头，你应该尊重它。

**更新：**

所以问题出在其他地方，请确保您`ID`的正确！并且属于`Button`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T14:08:49.527

你可以这样尝试：

```
 Button b= (Button) findViewById(R.id.but_Ok);
     b.setOnClickListener(new OnClickListener() {
        public void onClick(View v)
             {
                     Intent i = new Intent(FromYourActivity.this,NextActivity.class);
                     startActivity(i);
                     finish();
                    ...
             }
       }); 
```

还要确保您`Button`的 XML 文件中有正确的定义

```
 <Button 
     android:layout_height="wrap_content"
     android:id="@+id/but_Ok" 
     android:text="Your Button Text"
     android:layout_width="fill_parent"
     /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-08T14:12:14.327

您需要在 onCreate(Bundle) 上方设置按钮变量我还更改了设置 onclick 活动的方式试试这个

```
public class newItem extends Activity {

private EditText Quantity;
Button b;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.new_list);
    Button b = (Button) findViewById(R.id.but_Ok);
    b.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent i = new Intent();
    ...
    setResult(RESULT_OK, i);
    finish();
    }
});

    }
} 
```

# actionscript-3 - AS3将对象从补间中的当前位置移回第一帧

> ID：11383709
> 
> 赞同：0
> 
> 时间：2012-07-08T14:03:05.597
> 
> 标签：actionscript-3, flash, if-statement

我有一个实例名称为箭头的对象，当按下按钮时，该对象会在动作推文上在页面上移动。释放按钮后，我希望箭头逐帧移回补间的开头。

当释放按钮并且其当前帧大于 1 以返回 1 帧时，我设置了一个 if 语句。

到目前为止，箭头忽略了 if 并由于 else 语句而停止。

```
btn.addEventListener(MouseEvent.MOUSE_OUT, out);

function out(e:MouseEvent){

if(arrow.currentFrame > 1){
arrow.gotoAndStop(arrow.currentFrame - 1);
}else{
    stop();
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:28:56.157

你可能会更好地在时间线上制作另一个补间，然后再播放它。另一种选择是使用第三方补间库，例如 tweenlite，因为在那里您可以轻松设置动画以向前或向后运行。

您确定箭头是要在其上向后运行帧的影片剪辑的名称，还是在其他影片剪辑时间轴上更改的元素实例？

# sql - SQL如何对浮点时间和字符串时间进行计算？

> ID：11383716
> 
> 赞同：2
> 
> 时间：2012-07-08T14:04:01.867
> 
> 标签：sql, db2, subtraction

嗨，我在 DB2 中有表：

```
ID       TIME1        TIME2       
1000     480.5        30:30:00 
```

我想得到 TIME1-TIME2

```
ID       TIME1-TIME2 
1000       450.0 
```

TIME1 是以 HOURS 为单位的十进制值 - 所以 480.5 小时。TIME2 是字符串值：30:30:00（30 小时 30 分 00 秒）

如何得到这个减法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:11:29.650

您之前必须将两个字段（字符串和十进制字段）转换为 INTERVAL 数据类型，然后执行减法运算。看看[这篇](https://www.ibm.com/developerworks/mydeveloperworks/blogs/SQLTips4DB2LUW/entry/adding_an_interval_data_type44?lang=en)解释如何在 DB2 中处理间隔的文章。

使用您将在该文章中找到的功能，您可以通过这种方式安排解决方案，例如：

```
SELECT ID, 
NUMTODSINTERVAL(TIME1, 'SECOND') - TO_DSINTERVAL('0 ' || TIME2) AS TIME1-TIME2 
FROM table 
```

# jquery - 如何使用 jQuery 获取每行的 td 内的输入元素的值

> ID：11383719
> 
> 赞同：2
> 
> 时间：2012-07-08T14:04:30.687
> 
> 标签：jquery

我使用此代码获取每个 tr 行中第一个 td 元素内的**文本：**

```
 $('tr').each(function () {
        var tds = $(this).find('td'),
        text = tds.filter('[id^="refKey_"]').text(), 
```

HTML 是：

```
<tr id="row_1">
  <td id="tempRowKey_1" >1.0.0</td> 
```

但是我现在已经更改了我的代码并且我有这个 HTML：

```
<tr id="row_1">
  <td id="tempRowKey_1" >
    <input type="text" size="10" value="1.0.0" class="updatable" id="TempRowKey_1">
  </td> 
```

有人可以告诉我如何获得诸如“1.0.0”之类的值，因为它们在**input**中。这次我可以使用 "TempRowKey_xxxx" 的 id 吗？

**更新：我尝试了以下方法，也尝试了给出的答案，但都不起作用：**

```
 var tds = $(this).find('input'),
    text = tds.filter('[id^="TempRowKey_"]').val(), 
```

有人能看出什么不对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T14:05:54.317

你应该使用`val()`输入元素，试试这个：

```
$('tr').each(function() {
    var val = $(this).find('input').val();
}) 
```

# c++ - ADL在特定情况下不起作用

> ID：11383722
> 
> 赞同：3
> 
> 时间：2012-07-08T14:04:47.133
> 
> 标签：c++, templates, template-meta-programming, argument-dependent-lookup

我制作了如下 is_iterable 模板——它检查自由函数开始/结束是否可用（在 ADL 的上下文中）并返回正确的迭代器对象。（这是 ranged-for 循环中可迭代对象的要求）

```
#include <utility>
#include <iterator>
#include <type_traits>
#include <vector>

template <typename T>
typename std::add_rvalue_reference<T>::type declval(); // vs2010 does not support std::declval - workaround

template <bool b>
struct error_if_false;

template <>
struct error_if_false<true>
{
};

template<typename U>
struct is_input_iterator
{
    enum {
        value = std::is_base_of<
            std::input_iterator_tag,
            typename std::iterator_traits<U>::iterator_category
        >::value
    };
};

template<typename T>
struct is_iterable
{
    typedef char yes;
    typedef char (&no)[2];

    template<typename U>
    static auto check(U*) -> decltype(
        error_if_false<
            is_input_iterator<decltype(begin(declval<U>()))>::value
        >(),
        error_if_false<
            is_input_iterator<decltype(end(declval<U>()))>::value
        >(),
        error_if_false<
            std::is_same<
                decltype(begin(declval<U>())),
                decltype(end(declval<U>()))
            >::value
        >(),
        yes()
    );

    template<typename>
    static no check(...);

public:
    static const bool value = (sizeof(check<typename std::decay<T>::type>(nullptr)) == sizeof(yes));
};

#include <cstdio>
void write(int a)
{
    printf("%d\n", a);
}

template<typename T>
typename std::enable_if<is_iterable<T>::value>::type write(const T& a)
{
    for (auto i = begin(a), e = end(a); i != e; ++i) {
        write(*i);
    }
}

int main()
{
    write(10);

    std::vector<int> a;
    a.push_back(1);
    a.push_back(2);
    a.push_back(3);
    a.push_back(4);

    write(a);
} 
```

上面的代码在 vs2010 中完全按照预期工作，但在 gcc 中却没有。此外，当我如下放置一些名为'begin'的随机免费函数时，即使在vs2010中它也会被破坏。

```
int begin(int)
{
} 
```

我怎样才能使代码工作？此外，任何改进“is_iterable”概念检查器的建议都将不胜感激。

补充：“写”功能只是一个概念演示示例 - 请不要将您的宝贵时间投入到它上面。（我知道这不是最好的代码：（）需要注意的部分是 ADL 行为和“is_iterable”模板：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:34:50.770

添加`std::`到 `begin`/之后`end`- 您的代码在 gcc-4.6 下编译并运行

改进建议：替换`error_if_false`为 of`enable_if`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-08T15:16:38.157

`write(a);`应该通过 Jerry 所说的操作符来定义。也许让它更简洁，这样你的代码就更干净了。

# python - 同一模型中的 Django 标记 2 标记字段

> ID：11383726
> 
> 赞同：0
> 
> 时间：2012-07-08T14:05:02.553
> 
> 标签：python, django, tags, django-tagging

我正在使用 django 标记。当我想要模型的 1 个标签集合时，它工作正常。但现在我需要使用 2 个不同的集合，就像这样：

```
class Compare(models.Model):
    title = models.CharField(max_length=255)

    left_tags  = TagField()
    right_tags = TagField() 
```

可以用标签吗？我希望有人有一个例子并会分享它！谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:14:07.010

TagField`related_name`是否采用您可以使用的可选属性？

[https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name)

我自己从来没有使用过这个应用程序，但那是解决这个问题的 django-ish 方式。

# ruby-on-rails - 如何将 html id 添加到 rails 中的 form_for 标签？

> ID：11383727
> 
> 赞同：28
> 
> 时间：2012-07-08T14:05:16.930
> 
> 标签：ruby-on-rails

我正在尝试将 id 标签添加到我在 rails 中创建的表单中。表单的开头有以下代码：

```
<%= form_for(@user) do |f| %> 
```

我可以为 form_for 嵌入式 ruby​​ 添加一个 id，还是我必须创建一个 form_tag 字段并在那里添加 id？如果我必须创建一个 form_tag 字段，如何添加 id 并正确创建 form_tag 字段？非常感谢你！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-08T14:25:29.767

试试这个`<%= form_for @user, :url => "controller action url", :html => {:id => "Blabla"} do |f| %>`

**编辑：** 如果您不想要自定义操作 URL，那么您也可以使用它 `<%= form_for @user, html: {id: "BlaBla"} do |f| %>`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-02T10:49:11.667

另一种方法： `<%= form_for @user, html: {id: :form_id } do |f| %>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-05T15:42:50.423

这是新语法

`<%= form_for @user, html: {id: "my_form"} do |f| %> <% end %>`

# objective-c - 为什么我的保留变得不安全？

> ID：11383728
> 
> 赞同：0
> 
> 时间：2012-07-08T14:05:23.300
> 
> 标签：objective-c

我刚开始使用 obj-c 并创建了 2 个文件，一个 .h 和一个 .m 文件。.h 文件是..

```
#import <Foundation/Foundation.h>

@interface CardUnit : NSObject
{
@private 
    NSString *_name;
    NSString *_gold;
}
@property (nonatomic, assign) NSString *name;
@property (nonatomic, assign) NSString *gold;
@end 
```

.m 文件是

```
#import "CardUnit.h"

@implementation CardUnit

@synthesize gold  = _gold;
@synthesize name = _name;

@end 
```

但它在@synthesize 行上给了我2个错误，它们是......

“具有分配属性的属性黄金的现有 ivar "_gold" 必须是 __unsafe 保留的”并且名称相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:32:41.447

从错误中我看到您正在使用 ARC, Automatic Reference Counting 。

基本上你可以去掉所有的@synthesize 语句，甚至没有必要对 ivar 的名字和黄金进行私有声明。

您只需要 CardUnit.h 就可以了：

```
@interface CardUnit : NSObject

  @property (assign) NSString *name;
  @property (assign) NSString *gold;

@end 
```

Xcode 编译器将负责其余的工作。

另请参阅[关于 SO 的回复](https://stackoverflow.com/questions/8368157/existing-ivar-title-for-unsafe-unretained-property-title-must-be-unsafe-un?lq=1)

# web-applications - 从 Localhost 在线获取项目

> ID：11383729
> 
> 赞同：-1
> 
> 时间：2012-07-08T14:05:27.170
> 
> 标签：web-applications, jsf-2, localhost

我已经使用 JSF 2.0、MySQL 和 Netbeans创建了**Web 应用程序。**

此应用程序在 localhost 上完美运行。现在我想把这个项目放到网上。

我需要遵循的步骤将不胜感激。

我相信我需要使用像[www.hostgator.com](http://www.hostgator.com)或其他网站托管网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:27:29.607

嗯...我认为步骤应该是这样的：

1.  从 Oxxus 等托管公司获取 VPS、私人服务器或其他东西。
2.  要求服务提供商在您从第 1 步获得的“机器”上安装 GlassFish 和 MySQL。您也可以通过[在此处](http://glassfish.java.net/downloads/3.1.2-final.html)下载 GlassFish并简单地解压缩 zip 文件 [1] 自行安装。
3.  像在本地设置应用程序服务器一样设置应用程序服务器（在适当的情况下更改值）。
4.  构建您的项目。
5.  [在http://yoursite.com:4848](http://yoursite.com:4848)启动 GlassFish 管理面板。
6.  单击左侧树上的“应用程序”并选择“部署...”。
7.  上传`.ear`项目`dist`文件夹中的文件。
8.  如果一切正常，请接受此答案:))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T19:20:07.867

对于初学者来说，最简单的方法是将应用程序迁移到云端。

试试 Amazon Elastic Beanstalk，[链接](http://aws.amazon.com/elasticbeanstalk/)。

如果您是第一次使用，您可以获得免费套餐的资格，您可以免费使用微型实例长达一年。

您也可以尝试 Red Hat 的 OpenShift。这是一篇关于如何在 5 分钟内将应用程序部署到 rhcloud 的好文章。

*   [如何在 5 分钟内将 Java EE 6 应用程序推送到云端](http://www.adam-bien.com/roller/abien/entry/how_to_push_java_ee)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T14:10:26.287

嗯，是的，第一步是找到一个提供您使用的技术（JSF 等）的主机，但之后发生的事情在很大程度上取决于各个主机以及它们提供的管理方式（CPanel、FTP、 phpMyAdmin 等）所以这可能是主机支持的问题，或者一旦你有一个帐户就在这里。

# jquery - Chrome 上的 view.js 问题

> ID：11383731
> 
> 赞同：-1
> 
> 时间：2012-07-08T14:05:31.373
> 
> 标签：jquery, css

我正在使用这个插件[http://finegoodsmarket.com/view/](http://finegoodsmarket.com/view/)它很棒，但只有在 Chrome 上我第一次点击图像时遇到隐藏背景颜色的问题。这是链接[http://layot.prestatrend.com/?p=26#comments](http://layot.prestatrend.com/?p=26#comments)似乎是因为我正在使用 webkit 转换。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:14:19.993

在我的浏览器中看起来不错。检查 js 控制台中的任何错误。可能会得到一些想法。

# java - 覆盖 AWT 和存储图形

> ID：11383736
> 
> 赞同：1
> 
> 时间：2012-07-08T14:06:33.927
> 
> 标签：java, awt, graphics2d

-大家好！我正在制作一个模拟波干扰的 Java 小程序，我几乎已经完成了（将在 GPL 下获得许可）。但是，我有两个关于 AWT 绘制周期的问题，我很难找到答案。

1.  我想制作一个“关于”的叠加层，当我按下按钮时会出现。我想这样做的方法是用我的静态消息和图例对象在整个小程序窗口上绘制。问题是阻止 AWT 组件在不使用 remove() 的情况下将自己绘制在前台。有没有办法让 AWT 暂时停止绘制自己？

2.  对于我的驻波模式，我希望每次驻波达到最大振幅时计算节点和波腹标记并将其绘制到辅助图形（所有这些我都可以自己完成），但绘制到主图形（因此显示）每个油漆周期。有人可以解释这样做的步骤吗？我想这将涉及创建第二个图形对象，绘制一次，然后在每个周期将其绘制到主图形。

如果您能回答我的任何一个问题，我将不胜感激！

干杯，杰克艾利森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:27:45.903

回答你的第一个问题：

如果您已将`paint()`/方法包含在代码中，则无法禁用它。`paintComponent()`如果它在那里，它就会运行。但是，您可以创建一个标志，以便只有当标志为真时，才会绘制内容。让我告诉你我的意思：

```
boolean flag;

...

public void paintComponent(Graphics comp) {
    if (flag) {
        Graphics2D comp2D = (Graphics2D) comp;
        //drawing statements
    }
}

public void actionPerformed(ActionEvent event) {
    flag = true;
    repaint();
} 
```

# android - 更改“使用完成操作”对话框

> ID：11383737
> 
> 赞同：0
> 
> 时间：2012-07-08T14:06:39.317
> 
> 标签：android, android-intent, sms, intentfilter

我正在编写一个应用程序来发送带有图像文件的彩信。我写了以下代码

```
Intent i = new Intent(Intent.ACTION_SEND);
        String sendfilepath = "file://" + sendfile.toString() + ".jpg";
        i.putExtra(Intent.EXTRA_STREAM,Uri.parse(sendfilepath)) ;
        i.setType("image/jpeg");
        startActivityForResult(i, 1) ; 
```

但是，该应用程序显示“使用完成操作”对话框，可从蓝牙、电子邮件、facebook、Gmail、Handcent SMS、消息传递、在设备上播放等许多内容中进行选择。

我想只显示与发送 SMS 或 MMS（如消息和 Handcent SMS）相关的内容的对话框。我不想显示所有其他应用程序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:20:56.760

如果您尝试让用户向其发送消息的特定电话号码，请使用`ACTION_SENDTO`a`smsto:` `Uri`作为您要向其发送消息的电话号码。这绝对适用于短信；我认为它适用于 MMS，但我没有尝试过。

否则，你想要的不是一个好主意。您的用户可能希望通过多种机制共享他们的数据，其中一些不会是彩信应用程序。[请让*用户*选择如何共享*他们的*数据](http://commonsware.com/blog/2011/06/28/share-where-the-user-wants.html)。

# c# - C# WinForm 内存泄漏

> ID：11383739
> 
> 赞同：1
> 
> 时间：2012-07-08T14:07:11.630
> 
> 标签：c#, memory, memory-leaks

我有一个很大的 winform 类，它从一个像这样的小人那里调用：

```
 void login()
    {           
        mainForm f1 = new mainForm();                
        f1.ShowDialog();
    } 
```

登录后主窗体会占用大量内存（我在任务管理器中检查）。关闭主窗体后，程序返回登录窗体。在这一步我再次检查任务管理器，发现我的程序没有释放 mainForm 使用的内存。登录后，我的程序崩溃并显示“内存不足”错误。

我不得不说我测试了 f1.Dispose()、f1=null、GC.Collect() 和我发现的所有其他方法。

它只会在我关闭登录表单时释放内存（它是 Application.Run 中使用的起始类）

我想销毁 mainForm 实例（f1）和这个表单的所有资源，就像我关闭程序时一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T14:58:02.967

不太确定OOM与登录表单有什么关系。正如Taskmgr.exe 所报告的那样，关闭或处理表单会减少内存使用量肯定不是这种情况。

但你肯定做错了。对话框在 Winforms 中的处理方式不同，它不会像使用 Show() 显示的表单那样自动处理。因此，您必须在对话框关闭后检索用户在对话框中输入的任何内容，这在对话框被释放时将是危险的。所以你必须自己做。正确的模式是：

```
 using (mainForm f1 = new mainForm()) {
        if (f1.ShowDialog() == DialogResult.Ok) {
            // Retrieve data entered by user and do something with it
            //...
        }
    } 
```

使用*using*语句可确保*在*您检索对话结果后释放对话实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T14:15:22.203

几个想法：

*   将您的代码包装在一个`using`语句中
*   静态事件处理程序/变量通常会导致这些问题
*   您是否使用任何第三方控件？检查他们的论坛，他们可能知道内存泄漏问题
*   您是否使用任何 UI 组合框架，例如 PRISM
*   你试过windbg还是sos？[http://blogs.msdn.com/b/delay/archive/2009/03/11/where-s-your-leak-at-using-windbg-sos-and-gcroot-to-diagnose-a-net-内存泄漏.aspx](http://blogs.msdn.com/b/delay/archive/2009/03/11/where-s-your-leak-at-using-windbg-sos-and-gcroot-to-diagnose-a-net-memory-leak.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T14:34:32.880

也许主窗体在显示时会创建对自身的引用，检查它分配的任何引用/委托/事件并确保它们在主窗体完成时未注册，或者将事件处理程序（即应用程序事件）移动到单独的类。

到目前为止，100% 的时间我都“发现了 .NET 内存泄漏”，但事实并非如此！处理所有一次性用品，注意你对保存引用的静态数据所做的事情，不要进行重复的事件订阅，并在可能的情况下整理它们。

使用 SOS，正如 mouters 所说，在运行 dispose 并调用 GC.Collect(3) 几次后检查 mainform 类上的 gcroots，一旦你跟踪引用的位置，你应该找到错误。

# ruby-on-rails - Rails 3.1 mailer pdf附件损坏

> ID：11383740
> 
> 赞同：2
> 
> 时间：2012-07-08T14:07:21.573
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

这是我的邮件：

```
class MailIt < ActionMailer::Base

    def funny(sender)
        @sender = sender
        attachments['funny.pdf'] = File.read("#{Rails.root}/app/assets/funny.pdf")
        mail(:to => "amail@example.com",
             :from => "amail@example.com",
             :subject => "TESST")
    end

end 
```

我收到了附有 pdf 的电子邮件，但它已损坏，文件大小仅为原始文件的 1/4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T12:19:37.837

如果您的 pdf 中有图像，则必须将其作为二进制文件发送。

```
attachments['funny.pdf'] = File.read("#{Rails.root}/app/assets/funny.pdf", :mode => 'rb') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:47:36.217

我确实找到了解决方案。

File.read 似乎有问题

我试过了，它奏效了：

```
attachments['funny.pdf'] = File.open("#{Rails.root}/app/assets/funny.pdf").read 
```

# c# - 如何取消任务的计划？

> ID：11383745
> 
> 赞同：2
> 
> 时间：2012-07-08T14:08:14.830
> 
> 标签：c#, .net, scheduled-tasks

我需要创建一个计划任务。为此，我正在尝试学习如何做到这一点，并且目前正在考虑使用`TaskSchedulerClass`TaskScheduler 类库。我在[这里有一个代码示例（我可以](https://stackoverflow.com/a/3362800/939213)[在这里](http://bartdesmet.net/blogs/bart/archive/2008/02/23/calling-the-task-scheduler-in-windows-vista-and-windows-server-2008-from-managed-code.aspx)尝试另一个）。但是 - 我不想在没有确定我知道如何在需要时取消它的情况下实际运行它。

所以我的问题是：如何在代码中取消这样的任务注册？

（在这种情况下，仅仅“试试看！”是不够的。因为关键是我不想陷入无法停止的事情。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:51:23.563

[TryDequeue 方法](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.trydequeue.aspx)呢？

它试图使先前排队到此调度程序的任务出列。

您需要使用发送到[QueueTask](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.queuetask)函数的相同任务。

如果您没有此任务的实例，您可以尝试使用[GetScheduledTasks](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.getscheduledtasks)检索它，但它声明它正在使用中`For debugger support only`

# mysql - 带有重复键的mysql

> ID：11383747
> 
> 赞同：0
> 
> 时间：2012-07-08T14:08:23.713
> 
> 标签：mysql

我试着在网上搜索这个......我有一行插入到数据库中。我删除了它。该表在特定列上有一个唯一键。当我尝试为唯一键插入具有相同值的新行时，它会说重复条目失败。但是，没有重复条目，因为该行不存在！有没有办法重置这个？

我希望该表接受当前唯一的值。我试图从表中删除唯一键约束以查看是否可行，但是，当我将其添加回来时，它遇到了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:20:54.547

也许你执行脏读？并且删除没有提交？尝试使用读取提交选项，我认为它被称为隔离级别。

# php - 使用 preg_replace删除链接但将图像保留在内部

> ID：11383749
> 
> 赞同：0
> 
> 时间：2012-07-08T14:08:26.897
> 
> 标签：php, preg-replace, href

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T14:12:55.093

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T11:27:06.960

我这样做了：

```
$this->tresc[$i][description]=preg_replace("/<a href=\"(.*)\">/i", "",$this->tresc[$i][description]);
$this->tresc[$i][description]=preg_replace("/<\/a\>/i", "",$this->tresc[$i][description]); 
```

但这会留下链接上的文字。

# android - 空 EditText 的问题

> ID：11383755
> 
> 赞同：2
> 
> 时间：2012-07-08T14:09:23.077
> 
> 标签：android, android-edittext

我有一个带有 EditText、Button 和 TextView 的 Activity。如果我写一些数字并单击按钮，TextView 会显示计算结果。

如果 EditText 为空（即没有输入数字）并且我单击按钮我有一个对话框说：“应用程序已意外停止。请再试一次”。

请帮我。如果用户不写任何数字，我想显示一个带有一些注释的窗口（例如“插入数字”）。我应该如何对 EditText 字段进行编程？如何解决这个问题？非常感谢

这是我的 onClick 方法：

```
public void onClick(View v) {
    EditText numA  = (EditText)findViewById(R.id.editText1);
    TextView wynik1 = (TextView)findViewById(R.id.wynik);

    float num1 = Float.parseFloat(numA.getText().toString());

    float eq1 = 0;

    if(num1>0){ 
        switch (v.getId()) {
                case R.id.oblicz:
                    eq1 = 2*num1;
                break;
        }

        wynik1.setText(String.format("%f", eq1));   
    }
    else {
        Intent o = new Intent(this, Obliczokno.class);
        startActivity(o);
    }
} 
```

我改变了 onClick 方法：

```
public void onClick(View v) {
    EditText numA  = (EditText)findViewById(R.id.editText1);

    float num2 = Float.parseFloat(numA.getText().toString());
    float eq1 = 0;
    float eq2 = 0;  

    try{  float num1 = Float.parseFloat(numA.getText().toString());

            if(num1>0 || num2>0){   

                switch (v.getId()) {
                case R.id.pole:
                    eq1 = 2*num1 ;

                break;  

                case R.id.obwod:
                    eq2 = 3*num1 ;

                break;  

                }}

                else {Intent o = new Intent(this, Obliczokno.class);
                startActivity(o);}
        }
         catch (NumberFormatException e) {
           Toast.makeText(this, "Sorry you did't type anything", Toast.LENGTH_SHORT).show();

           return;
        } 
```

我有错误。我的 LogCat 错误：

```
E/AndroidRuntime(321): Uncaught handler: thread main exiting due to uncaught exception
E/AndroidRuntime(321): java.lang.NumberFormatException:
E/AndroidRuntime(321):  at org.apache.harmony.luni.util.FloatingPointParser.parseFloat(FloatingPointParser.java:296)
E/AndroidRuntime(321):  at java.lang.Float.parseFloat(Float.java:327)

E/AndroidRuntime(321):  at arek.geometria.Oblicz.onClick(Oblicz.java:35)

E/AndroidRuntime(321):  at android.view.View.performClick(View.java:2344)

E/AndroidRuntime(321):  at android.view.View.onTouchEvent(View.java:4133)

E/AndroidRuntime(321):  at android.widget.TextView.onTouchEvent(TextView.java:6510)

E/AndroidRuntime(321):  at android.view.View.dispatchTouchEvent(View.java:3672)

E/AndroidRuntime(321):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)

E/AndroidRuntime(321):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)

E/AndroidRuntime(321):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)

E/AndroidRuntime(321):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)

E/AndroidRuntime(321):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1712)

E/AndroidRuntime(321):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1202)

E/AndroidRuntime(321):  at android.app.Activity.dispatchTouchEvent(Activity.java:1987)

E/AndroidRuntime(321):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1696)

E/AndroidRuntime(321):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1658)

E/AndroidRuntime(321):  at android.os.Handler.dispatchMessage(Handler.java:99)

E/AndroidRuntime(321):  at android.os.Looper.loop(Looper.java:123)

E/AndroidRuntime(321):  at android.app.ActivityThread.main(ActivityThread.java:4203)

E/AndroidRuntime(321):  at java.lang.reflect.Method.invokeNative(Native Method)

E/AndroidRuntime(321):  at java.lang.reflect.Method.invoke(Method.java:521)

E/AndroidRuntime(321):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)

E/AndroidRuntime(321):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)

E/AndroidRuntime(321):  at dalvik.system.NativeStart.main(Native Method) 
```

if ... else 工作正常。你有什么想法吗？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:13:03.250

您只需要检查用户输入的内容：

```
String input = editText.getText().toString();

if(input == null || input.trim().equals("")){
      Toast.makeText(context, "Sorry you did't type anything"), Toast.LENGTH_SHORT).show();
} 
```

*编辑*

如果您有浮点数，则必须在解析浮点数之前进行检查：

```
String input = editText.getText().toString();

if(input == null || input.trim().equals("")){
      // Toast message
      return;
}
float num1 = Float.parseFloat(input); 
```

或者

```
try{

   float num1 = Float.parseFloat(numA.getText().toString());

} catch (NumberFormatException e) {
   // Toast message - you cannot get a float from that input
   return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:12:33.833

您需要确保 EditText 不为空。尝试使用类似的东西：

```
EditText editText = (EditText) findViewById(R.id.edittext);
String text = editText.getText().toString();
if (text == null || text.equals("")) {
    Toast.makeText(this, "You did not enter a number", Toast.LENGTH_SHORT).show();
    return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T14:15:00.713

很简单。在开始计算之前，您应该调用以下代码：

```
if (editText.getText().length() > 0) {
    // do the calculations
} 
```

这样你就知道你里面有没有东西`EditText`。如果它是空的，你可以显示一个`AlertDialog`或一个`Toast`来帮助你的用户。希望这可以帮助。

# java - 当单元格类型不是字符串时，JTable 中的单元格不可编辑？

> ID：11383756
> 
> 赞同：2
> 
> 时间：2012-07-08T14:09:43.747
> 
> 标签：java, swing, jtable, tablecellrenderer, tablecelleditor

我有自己的`TableModel`实现，旨在显示数据库中的`SQL`数据。我已经覆盖了所有必要的方法，对列名使用字符串数组，对可以从数据库中检索的所有不同类型`arraylist<Object[]>`使用数据和数组。`Class<?>[]`我还有一个布尔数组，它指示哪些列是可编辑的，哪些是不可编辑的。在我将表中的所有内容都存储为一个对象并且还没有实现类型部分并且它运行良好之前。现在我已将类型添加到模型中，我无法编辑任何 int 类型的列，即使该列在我的布尔数组中是可编辑的。我已经覆盖了`isEditable()`方法简单地从该布尔数组返回值，并在相关的 into 列上返回 true - 但它仍然不可编辑。这是定义行为还是有问题？恐怕我目前无法发布代码，因为我正在使用手机，我的笔记本电脑目前没有互联网连接，并且要到本周末才能发布。我已经搜索过，但谷歌只显示了很多关于使单元格可编辑或不可编辑的问题，而不是为什么你不能编辑 int 列。编辑：这是一个显示我的问题的 pastebin：http: [//pastebin.com/cYJnyyqy](http://pastebin.com/cYJnyyqy)

使用`jdk7`并且只有字符串列是可编辑的，即使`isEditable()`所有列都返回 true。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:28:49.037

回答后续问题

> *   为什么 char 仍然不可编辑

Reason 是默认的通用编辑器：它只能处理具有以 String 作为参数的构造函数的类，而 Character 不能。出路是 Character 类的特定自定义编辑器。

这是 JTable.GenericEditor 抛出的地方：

```
public Component getTableCellEditorComponent(JTable table, Object value,
                                         boolean isSelected,
                                         int row, int column) {
    this.value = null;
    ((JComponent)getComponent()).setBorder(new LineBorder(Color.black));
    try {
        Class<?> type = table.getColumnClass(column);
        // Since our obligation is to produce a value which is
        // assignable for the required type it is OK to use the
        // String constructor for columns which are declared
        // to contain Objects. A String is an Object.
        if (type == Object.class) {
            type = String.class;
        }

        // JW: following line fails  
        constructor = type.getConstructor(argTypes);
    }
    catch (Exception e) {
        // JW: so the editor returns a null
        return null;
    }
    return super.getTableCellEditorComponent(table, value, isSelected, row, column);
} 
```

这里是 JTable 处理 null 的地方：

```
// JTable.editCellAt(...)
TableCellEditor editor = getCellEditor(row, column);
if (editor != null && editor.isCellEditable(e)) {
    editorComp = prepareEditor(editor, row, column);
    if (editorComp == null) {
        // JW: back out if the comp is null
        removeEditor();
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T15:48:48.770

唔。我从未将原始类型（例如`int.class`）用于 getColumnClass()。我一直使用“包装”类型，例如`Integer.class`.

尝试更改您 `Class<?>[] types`以使用包装类而不是原语。例如

```
 Class<?>[] types = {
            String.class,
            Character.class,
            Integer.class,
            ... 
```

这可能需要 Swing 找到正确的 Renderer/TableCellEditor。但我不确定...

# spotify - Spotify vs Last FM，显示最后播放的曲目

> ID：11383758
> 
> 赞同：0
> 
> 时间：2012-07-08T14:09:56.877
> 
> 标签：spotify, last.fm

我正在寻找一种方法来在我的网站上显示我最后播放的 Spotify 曲目。我成功使用了 Last.FM API。Spotify 没有开放的 API，Facebook 的音乐部分似乎也被锁定了。所以我现在将所有内容都整理到 last.fm 并使用他们的 API 来获取最后播放的歌曲。这很好用，但我认为显示“立即播放”按钮以在 Spotify 上播放曲目会很有趣。

为此，我需要特定歌曲的 Spotify ID，last.fm api 似乎没有返回。

所以......两个问题：1）有没有办法从Spotify本身获取相同的信息？2）如果没有，是否有使用 Last.FM 详细信息获取匹配的 Spotify 歌曲的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:26:08.940

1) 不。Spotify 没有播放历史 API。`listens`但是，如果用户正在发布收听 Facebook ，您可以使用 Facebook 的端点。

2）据我所知，不是直接的。然而，一个快速的谷歌出现了[这个](https://github.com/mikaelbr/lastfm-spotify-urilist/)项目。如果做不到这一点，您可以使用[Spotify Web Search API](https://developer.spotify.com/technologies/web-api/search/)来搜索与元数据匹配的曲目。[高级搜索语法](http://www.spotify.com/us/about/features/advanced-search-syntax/)在这里可能会派上用场。

# java - 在 Spring 中动态创建 Bean

> ID：11383760
> 
> 赞同：2
> 
> 时间：2012-07-08T14:10:04.817
> 
> 标签：java, spring, session, asynchronous

我正在使用 Spring3.1

我的应用程序将有一种 bean-manager。

该管理器将能够检索请求，并且在每个请求上我需要动态创建新的 bean 实例，该实例将使用它自己的唯一参数启动。

参数将通过 request 方法检索。

这个 bean 必须是活动的并且异步工作。（例如它会监听 jms 调用，按需执行方法等等..）

此外，我还希望可以选择销毁 bean。

这些 bean 可能类似于会话，因此当用户注销时，我将销毁这些 bean。

我知道我必须创建某种 bean 列表或 bean 池并使用某种管理器对其进行管理。

如何动态创建这些 bean 并让它们保持活跃，直到我销毁它们？

知道我怎么能实现这样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T14:40:31.257

从这个意义上说，最简单的方法是创建一个`StaticApplicationContext`将其父上下文设置为公共上下文（持有您想要共享的 bean 的那个）。您可以通过执行以下操作来达到此目的：

```
StaticApplicationContext innerContext = new StaticApplicationContext(parentContext); 
```

在此之后，您可能想要声明要在 Spring 上实例化的 bean，以便附加所有 AOP 内容、自动装配和其他功能，因此您需要执行以下操作：

```
innerContext.registerSingleton("beanName", beanClass); 
```

注册后，您可以像这样实例化 bean：

```
innerContext.getBean(beanClass); 
```

当然有`Session`spring 范围的实现，因此我建议您检查`WebApplicationContext`文档，[`loadParentContext`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/context/ContextLoader.html#loadParentContext%28javax.servlet.ServletContext%29)您基本上将 ServletContext 作为参数传递的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T08:27:15.807

我还发现在运行时动态创建 bean 并在应用程序的任何地方使用它时遇到了很多麻烦。

这是完整的代码

```
static ApplicationContext appContext = new ClassPathXmlApplicationContext(
            new String[] { "Spring-Question.xml" });
    static StaticApplicationContext innerContext = new StaticApplicationContext(appContext); 
```

创建 bean 并设置值，例如

```
innerContext.registerSingleton("beanName", Test.class);
        Test test = innerContext.getBean(Test.class);
        test.setA(3);
        test.setB(4); 
```

然后在应用程序的任何地方重新使用 bean....

```
Test test = innerContext.getBean(Test.class);
        System.out.println(test.setB(4)); 
```

# c# - listview c#：如何将项目添加到第一个以外的列

> ID：11383761
> 
> 赞同：0
> 
> 时间：2012-07-08T14:10:06.243
> 
> 标签：c#, winforms, listview

[我的问题与此](https://stackoverflow.com/questions/473148/c-sharp-listview-how-do-i-add-items-to-columns-2-3-and-4-etc)完全相同：“要将项目添加到我的 listView 控件（Winform）中的第 1 列，我正在使用 listView1.Items.Add，这工作正常，但是如何将项目添加到第 2 列和第 3 列等？”

其他地方有很多类似的问答，但没有一个人谈论如何使用 WinForms 交互式 listView 构建器添加项目，而不是直接对其进行编码。我知道如何对其进行编码，但是由于您可以使用构建器将项目添加到第一列，因此我认为必须有一种方法可以为其他列执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:18:24.687

我认为（不确定）最简单的方法是添加字符串数组，列表视图根据数组索引知道列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:19:10.320

右键单击 ListView 并选择“Edit Items...”以获取 ListViewItem 集合编辑器。

选择一个 ListViewItem（或单击添加添加一个然后选择它）。在属性窗格中找到数据类别中的子项。单击“...”按钮打开 ListViewSubItem 集合编辑器，您可以添加子项，这些子项出现在第一个之后的列中。

如果您想查看任何内容，您需要设置 ListViewItems 和 ListViewSubItems 的 Text 属性。

# c++ - std::tr1::shared_ptr 和 dynamic_cast

> ID：11383764
> 
> 赞同：0
> 
> 时间：2012-07-08T14:10:30.903
> 
> 标签：c++, casting, smart-pointers

我使用`shared_ptr`with 构造这样的对象：

```
std::tr1::shared_ptr<RawClusterBase> rawCluster(new RawClusterBase());
// ...
rawCluster->addLabel(p->userFriendlyTerms());
// ...
const TokenizedDocument * tokenizedDoc
   = (TokenizedDocument *)documents.at(i);
const RawDocument * rawDoc
   = dynamic_cast<const RawDocument *>(tokenizedDoc->getProperty(
      TokenizedDocument::_PROPERTY_RAW_DOCUMENT));
rawCluster->addDocument(rawDoc); 
```

我在以下行遇到分段错误`dynamic_cast`：

```
Program received signal SIGSEGV, Segmentation fault.
0x00007ffff7b92429 in __dynamic_cast () from /usr/lib/libstdc++.so.6
(gdb) backtrace
#0  0x00007ffff7b92429 in __dynamic_cast () from /usr/lib/libstdc++.so.6
#1  0x0000000000444aa5 in main (argc=1, argv=0x7fffffffe258) at clustering/document_test.cpp:271 
```

谁能给我一个指示如何解决这个问题？我的项目中有另一个部分`dynamic_cast`用于分析子类。我也打算在`shared_ptr`那里使用，但我担心我会遇到同样的麻烦。是`dynamic_cast`不是一起工作`shared_ptr`？

非常感谢任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:24:28.617

从提供的代码中问题并不明显，但很可能是：

*   `documents.at(i)`不返回有效的`TokenizedDocument`指针
*   `tokenizedDoc->getProperty(TokenizedDocument::_PROPERTY_RAW_DOCUMENT)`正在返回一个无效的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:11:40.700

很难说可能出了什么问题。这可能是由于缓冲区溢出或对已释放指针的访问，因为此类事情可能会覆盖 vtable 指针（发生在对象的开头）。尝试在 Valgrind 中运行程序。

通常`dynamic_cast`不应该崩溃。如果转换无效，则返回`nullptr`（或`std::bad_cast`在使用引用时抛出），或者如果转换完全不可能，则编译失败。但它不会调用 UB，所以我会在别处寻找罪魁祸首。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T20:50:00.573

Don't use such old-C cast in your C++ code:

```
const TokenizedDocument * tokenizedDoc
    = (TokenizedDocument *)documents.at(i); 
```

Looks like your `document.at(i)` returns pointer to something else. Try to remove `(TokenizedDocument *)` completely.

# sql - PowerBuilder 12.5 教程

> ID：11383766
> 
> 赞同：0
> 
> 时间：2012-07-08T14:10:46.260
> 
> 标签：sql, ado.net, powerbuilder

我是 PowerBuilder Classic 12.5 的新手。我创建了 ado.net 数据库配置文件。我现在如何连接到它并创建一个登录窗口来读取用户名和密码，验证并让用户访问程序。请帮助提供示例代码，我在哪里放置代码？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:37:02.417

建立数据库连接是我学习时间最长的事情之一，不是因为它很难，而是因为你只做了一次，不必再看一遍。

在您的代码中，您需要设置 SQLCA 全局事务对象的属性。如果您在数据库绘制器中定义了连接，则可以右键单击它，选择“属性”，然后从“预览”选项卡中查看需要的语法。

此语法将（可能）包括您的连接安全凭据。您需要构建自己的用户名/密码提示并将结果解析为连接字符串。我没有安装 ADO.NET，但这里有一个 ODBC 连接示例……直接复制和粘贴：

```
// Profile CINEMA3
SQLCA.DBMS = "ODBC"
SQLCA.AutoCommit = False
SQLCA.DBParm = "ConnectString='DSN=cinema;UID=UserName;PWD=SuperSecurePassword'" 
```

# twitter-bootstrap - Bootstrap 中流体行的偏移边距-左百分比

> ID：11383774
> 
> 赞同：-2
> 
> 时间：2012-07-08T14:11:55.813
> 
> 标签：twitter-bootstrap

在 Twitter Bootstrap v2.0.4 之前（包括在内），在行流体场景中使用偏移类时，没有 CSS 左边距百分比。我已经在 SO 和其他网站上寻找答案，但找不到答案。

有没有人可以将这些信息添加到我的 bootstrap-responsive.css 文件中？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T19:17:57.730

您可能还需要原始偏移量。最好在左侧添加另一个偏移代码。

我添加了一个名为 offsetright 的新类，并将此代码添加到 bootstrap.css：

```
.row-fluid .offsetright12 {
  margin-right: 104.25531914893617%;
  *margin-right: 104.14893617021275%;
}

.row-fluid .offsetright12:last-child {
  margin-right: 102.12765957446808%;
  *margin-right: 102.02127659574467%;
}

.row-fluid .offsetright11 {
  margin-right: 95.74468085106382%;
  *margin-right: 95.6382978723404%;
}

.row-fluid .offsetright11:last-child {
  margin-right: 93.61702127659574%;
  *margin-right: 93.51063829787232%;
}

.row-fluid .offsetright10 {
  margin-right: 87.23404255319149%;
  *margin-right: 87.12765957446807%;
}

.row-fluid .offsetright10:last-child {
  margin-right: 85.1063829787234%;
  *margin-right: 84.99999999999999%;
}

.row-fluid .offsetright9 {
  margin-right: 78.72340425531914%;
  *margin-right: 78.61702127659572%;
}

.row-fluid .offsetright9:last-child {
  margin-right: 76.59574468085106%;
  *margin-right: 76.48936170212764%;
}

.row-fluid .offsetright8 {
  margin-right: 70.2127659574468%;
  *margin-right: 70.10638297872339%;
}

.row-fluid .offsetright8:last-child {
  margin-right: 68.08510638297872%;
  *margin-right: 67.9787234042553%;
}

.row-fluid .offsetright7 {
  margin-right: 61.70212765957446%;
  *margin-right: 61.59574468085106%;
}

.row-fluid .offset7right:last-child {
  margin-right: 59.574468085106375%;
  *margin-right: 59.46808510638297%;
}

.row-fluid .offsetright6 {
  margin-right: 53.191489361702125%;
  *margin-right: 53.085106382978715%;
}

.row-fluid .offsetright6:last-child {
  margin-right: 51.063829787234035%;
  *margin-right: 50.95744680851063%;
}

.row-fluid .offsetright5 {
  margin-right: 44.68085106382979%;
  *margin-right: 44.57446808510638%;
}

.row-fluid .offsetright5:last-child {
  margin-right: 42.5531914893617%;
  *margin-right: 42.4468085106383%;
}

.row-fluid .offsetright4 {
  margin-right: 36.170212765957444%;
  *margin-right: 36.06382978723405%;
}

.row-fluid .offsetright4:last-child {
  margin-right: 34.04255319148936%;
  *margin-right: 33.93617021276596%;
}

.row-fluid .offsetright3 {
  margin-right: 27.659574468085104%;
  *margin-right: 27.5531914893617%;
}

.row-fluid .offsetright3:last-child {
  margin-right: 25.53191489361702%;
  *margin-right: 25.425531914893618%;
}

.row-fluid .offsetright2 {
  margin-right: 19.148936170212764%;
  *margin-right: 19.04255319148936%;
}

.row-fluid .offsetright2:last-child {
  margin-right: 17.02127659574468%;
  *margin-right: 16.914893617021278%;
}

.row-fluid .offsetright1 {
  margin-right: 10.638297872340425%;
  *margin-right: 10.53191489361702%;
}

.row-fluid .offsetright1:last-child {
  margin-right: 8.51063829787234%;
  *margin-right: 8.404255319148938%;
} 
```

对 bootstrap-responsive.css 执行相同的操作：

```
.row-fluid .offsetright12 {
    margin-right: 105.12820512820512%;
    *margin-lerightft: 105.02182214948171%;
  }
  .row-fluid .offsetright12:last-child {
    margin-right: 102.56410256410257%;
    *margin-right: 102.45771958537915%;
  }
  .row-fluid .offsetright11 {
    margin-right: 96.58119658119658%;
    *margin-right: 96.47481360247316%;
  }
  .row-fluid .offsetright11:last-child {
    margin-right: 94.01709401709402%;
    *margin-right: 93.91071103837061%;
  }
  .row-fluid .offsetright10 {
    margin-right: 88.03418803418803%;
    *margin-right: 87.92780505546462%;
  }
  .row-fluid .offsetright10:last-child {
    margin-right: 85.47008547008548%;
    *margin-right: 85.36370249136206%;
  }
  .row-fluid .offsetright9 {
    margin-right: 79.48717948717949%;
    *margin-right: 79.38079650845607%;
  }
  .row-fluid .offsetright9:last-child {
    margin-right: 76.92307692307693%;
    *margin-right: 76.81669394435352%;
  }
  .row-fluid .offsetright8 {
    margin-right: 70.94017094017094%;
    *margin-right: 70.83378796144753%;
  }
  .row-fluid .offsetright8:last-child {
    margin-right: 68.37606837606839%;
    *margin-right: 68.26968539734497%;
  }
  .row-fluid .offsetright7 {
    margin-right: 62.393162393162385%;
    *margin-right: 62.28677941443899%;
  }
  .row-fluid .offsetright7:last-child {
    margin-right: 59.82905982905982%;
    *margin-right: 59.72267685033642%;
  }
  .row-fluid .offsetright6 {
    margin-right: 53.84615384615384%;
    *margin-right: 53.739770867430444%;
  }
  .row-fluid .offsetright6:last-child {
    margin-right: 51.28205128205128%;
    *margin-right: 51.175668303327875%;
  }
  .row-fluid .offsetright5 {
    margin-right: 45.299145299145295%;
    *margin-right: 45.1927623204219%;
  }
  .row-fluid .offsetright5:last-child {
    margin-right: 42.73504273504273%;
    *margin-right: 42.62865975631933%;
  }
  .row-fluid .offsetright4 {
    margin-right: 36.75213675213675%;
    *margin-right: 36.645753773413354%;
  }
  .row-fluid .offsetright4:last-child {
    margin-right: 34.18803418803419%;
    *margin-right: 34.081651209310785%;
  }
  .row-fluid .offsetright3 {
    margin-right: 28.205128205128204%;
    *margin-right: 28.0987452264048%;
  }
  .row-fluid .offsetright3:last-child {
    margin-right: 25.641025641025642%;
    *margin-right: 25.53464266230224%;
  }
  .row-fluid .offsetright2 {
    margin-right: 19.65811965811966%;
    *margin-right: 19.551736679396257%;
  }
  .row-fluid .offsetright2:last-child {
    margin-right: 17.094017094017094%;
    *margin-right: 16.98763411529369%;
  }
  .row-fluid .offsetright1 {
    margin-right: 11.11111111111111%;
    *margin-right: 11.004728132387708%;
  }
  .row-fluid .offsetright1:last-child {
    margin-right: 8.547008547008547%;
    *margin-right: 8.440625568285142%;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:03:29.210

我在 Excel 上度过了一晚，并想出了以下 CSS：

```
/* ---------- Start of bootstrap-responsive.css offset left-margin ---------- */
.row-fluid .offset12 {
margin-left: 105.524861871% !important;
*margin-left: 104.195074636958% !important;
}

.row-fluid .offset11 {
margin-left: 96.96132596% !important;
*margin-left: 95.7379217046809% !important;
}

.row-fluid .offset10 {
margin-left: 88.397790049% !important;
*margin-left: 87.2807687724043% !important;
}

.row-fluid .offset9 {
margin-left: 79.834254138% !important;
*margin-left: 78.8236158401277% !important;
}

.row-fluid .offset8 {
margin-left: 71.270718227% !important;
*margin-left: 70.3664629078511% !important;
}

.row-fluid .offset7 {
margin-left: 62.707182316% !important;
*margin-left: 61.9093099755745% !important;
}

.row-fluid .offset6 {
margin-left: 54.143646405% !important;
*margin-left: 53.4521570432979% !important;
}

.row-fluid .offset5 {
margin-left: 45.580110494% !important;
*margin-left: 44.9950041110213% !important;
}

.row-fluid .offset4 {
margin-left: 37.016574583% !important;
*margin-left: 36.5378511787447% !important;
}

.row-fluid .offset3 {
margin-left: 28.453038672% !important;
*margin-left: 28.0806982464681% !important;
}

.row-fluid .offset2 {
margin-left: 19.889502761% !important;
*margin-left: 19.6235453141915% !important;
}

.row-fluid .offset1 {
margin-left: 11.32596685% !important;
*margin-left: 11.1663923819149% !important;
}

/* ---------- End of bootstrap-responsive.css offset left-margin ---------- */ 
```

我将它插入到 bootstrap-responsive.css 中，从第 370 行开始（在 .row-fluid .span1 的样式块关闭之后

它解决了我的网站问题。它只在FF13中测试过。它可能会导致其他浏览器出现问题。

我对 SO 很陌生，所以如果这不是发布此类信息的推荐方法，我深表歉意。这一切都在进行中。

# c# - 内存流作为数据库

> ID：11383775
> 
> 赞同：21
> 
> 时间：2012-07-08T14:11:56.767
> 
> 标签：c#, sqlite, memory

我目前正在考虑`SQLite`为我的 C# 项目使用数据库引擎，但我遇到了以下问题：我找不到任何用于内存存储的 API。我想要实现的是：

程序启动后，我想将 db 文件（从 HDD）加载到内存中。在程序执行期间，我想将此内存流用作真正的数据库（读取、写入、插入、选择等）。关闭后将流保存到文件中。

谁能以正确的方式指出我或建议另一个更适合此目的的数据库引擎。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-08T17:47:23.040

您可以使用能够将 db 文件复制到内存、内存到文件的[SQLite Online Backup API 。](https://www.sqlite.org/backup.html)从版本 1.0.80.0（带有 SQLite 3.7.11）开始，System.Data.SQLite提供了对[SQLite 在线备份 API](https://www.sqlite.org/backup.html)的本机支持。

这是如何在 C# 中使用 API 的简单示例：

```
SQLiteConnection source = new SQLiteConnection("Data Source=c:\\test.db");
source.Open();

using (SQLiteConnection destination = new SQLiteConnection(
  "Data Source=:memory:"))
{
  destination.Open();               

  // copy db file to memory
  source.BackupDatabase(destination, "main", "main",-1, null, 0);
  source.Close();

  // insert, select ,...        
  using (SQLiteCommand command = new SQLiteCommand())
  {
    command.CommandText =
      "INSERT INTO t1 (x) VALUES('some new value');";

    command.Connection = destination;
    command.ExecuteNonQuery();
  }             

  source = new SQLiteConnection("Data Source=c:\\test.db");
  source.Open();

  // save memory db to file
  destination.BackupDatabase(source, "main", "main",-1, null, 0);
  source.Close();               
} 
```

# cakephp - 表单中缺少“必填”字段表明我没有正确关联模型

> ID：11383776
> 
> 赞同：1
> 
> 时间：2012-07-08T14:12:00.987
> 
> 标签：cakephp, cakephp-2.2

我在验证输入表单和保存该表单中的数据时遇到问题。我怀疑也许这些都是由关联问题引起的，尽管我不确定。

我正在使用 CakePHP 2.2.0 RC2。

我有三个模型：用户、成员和地址。每个用户的帐户中可以有多个成员，每个用户可以有多个地址（它也记住过去的地址）。

我的模型协会是：

用户型号：

```
class User extends AppModel {

public $name = 'User';

public $hasMany = array(
    'Member' => array(
        'className' => 'Member',
        'foreignKey' => 'user_id',
        'order' => 'Member.member ASC',
        'dependent' => true
    ),
    'Address' => array(
        'className' => 'Address',
        'foreignKey' => 'user_id',
        'order' => 'Address.address ASC',
        'dependent' => true
    )
);
... 
```

会员型号：

```
class Member extends AppModel {

public $name = 'Member';

public $displayField = 'member';

public $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id'
    )
);
... 
```

地址型号：

```
class Address extends AppModel {

public $name = 'Address';

public $displayField = 'address';

public $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id'
    )
);
... 
```

对于我的表单创建语句，我有：

```
$this->Form->create( 'Member', array( 'url' => array( 'action' => 'add' ) ) ); 
```

我正在使用 Member 模型和控制器来处理表单，因为它仅提交 Member 字段或 Member 和 Address 字段，具体取决于用户是否已经有地址条目（如果用户没有，它会添加地址输入表单中的字段，否则不会）。

我没有在表单中提交任何用户字段。

现在，我希望，如果我的关联设置正确，任何模型中的任何“必填”字段旁边都会有一个星号。成员和地址模型中都设置了一些必填字段，虽然成员字段在表单上显示为必填项（带有星号），但地址字段却没有。

地址模型中所需的地址字段代码示例：

```
public $validate = array(
    'street1' => array(
        'required' => array(
            'rule' => array( 'notEmpty' ),
            'required' => true, 'allowEmpty' => false,
            'message' => 'Please enter a street address'
        ),
.... 
```

这是我的一些视图/表单代码：

```
echo $this->Form->input( 'Member.firstname', array( 'label' => 'First name', 'type' => 'text' ) );
echo $this->Form->input( 'Member.middlename', array( 'label' => 'Middle name', 'type' => 'text' ) );
echo $this->Form->input( 'Member.lastname', array( 'label' => 'Last name', 'type' => 'text' ) );
echo '<p class="bold">Please enter current address details:</p>';
echo $this->Form->input( 'Address.street1', array( 'label' => 'Street address (line 1)', 'type' => 'text' ) );
echo $this->Form->input( 'Address.street2', array( 'label' => 'Street address (line 2)', 'type' => 'text' ) );
echo $this->Form->input( 'Address.suburb', array( 'label' => 'Suburb', 'type' => 'text' ) );
... 
```

当我在表单页面上输出 $validationErrors 时（在表单提交之前），我得到了这个：

```
Array
(
    [Member] => Array
        (
        )

    [User] => Array
        (
        )
) 
```

我假设那里也应该有一个 [Address] 部分。

我看不出任何明显的东西，但我是 CakePHP 的新手（虽然我确实有 PHP 经验），所以任何想法都会受到赞赏。

谢谢！彼得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:38:21.237

首先，您说您使用的是 Cake 2.2 的候选版本 (RC2)。现在有一个稳定的版本，我强烈建议您升级到那个版本。

您使用模型创建表单，`Member`但它**与 Address 没有直接关系（关联）**。地址与用户相关联。如果您通过 User 模型创建表单，它应该可以正常工作。

如果这种情况（使用用户模型创建表单）对您和您的应用程序逻辑不起作用，而不是您的数据库模型和模型关联是错误的，并且它们不符合您的业务需求。如果是这种情况，您应该考虑更改应用程序的体系结构。

并注意`$uses`：您不必`Address`为了能够验证输入而将模型包含在控制器的 $uses 中。Controller::$uses 用于直接在 Controller 本身中使用模型（除了控制器自己的模型）。例如：

```
public $uses = array('Article', 'News'); 
```

在任何控制器中都会使所有文章和新闻模型的方法在该控制器中可用：

```
$this->Article->methodName(); 
```

或者

```
$this->News->methodName(); 
```

# php - PHP - 使用 php 执行 exe 中的任务与 php 中的相同任务时的性能

> ID：11383780
> 
> 赞同：-1
> 
> 时间：2012-07-08T14:12:39.700
> 
> 标签：php, performance, exe

这种性能是否有效（在 Windows 服务器上）以执行由 php 脚本启动的 .exe 中的任务？

我是一名 C# .Net 编码员，发现直接在 C# 中编码我的后端 SQL 和需要安全性的第 3 方 API 函数更快/更容易，我想知道从长远来看，它是好是坏为了我的网站性能这样做。

启动可执行文件会在脚本中造成延迟，还是性能（php vs exe）取决于要完成的任务的长度？

[编辑]

对不起这个毫无价值的问题。我将在 SO 上搜索类似的线程并粘贴一些链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:29:02.510

显然，函数调用`exec`（或类似）会产生开销，但实际执行自然会以相同的速度进行（前提是您没有对输出做任何花哨的事情，例如将逐行数组存储作为执行之一功能确实）。与从 shell 运行程序相比，我无法想象调用延迟是显着的，所以我认为在效率方面没有太多可讨论的。

至于这是否是个好主意，不，可能不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:18:33.707

用 PHP 编写前端代码并用更高效的语言（在您的情况下可能是 C#）编写业务逻辑是“性能有效的”。这通常在 SOA（面向服务的架构）中完成，它比您`exec`在同一台机器上执行的想法更具可扩展性，因为它允许工作负载的物理分布，但这显然对您不可行。

你的问题不是很清楚你想要什么`exec`，尤其是你是否需要以同步方式获得结果，但是在类 Unix 机器上，你可以通过用 a 终止命令在后台启动执行`&`，无论如何你也会需要重定向`stdin`和`stderr`（有关更多信息，请参阅[手册](http://php.net/manual/en/function.exec.php)）。

我知道没有安全风险，只要你完全清理你的输入，并正确地转义你的 exec 参数。

Web 服务器的超时机制和在父进程被杀死时杀死子进程的机制将防止挂起进程造成损坏，除非它们被发送到后台。`exec`如果并发ed 进程被发送到后台，您可能需要一个限制机制。

# spring - 弹簧组件扫描不起作用？映射的 URL 返回 404

> ID：11383781
> 
> 赞同：1
> 
> 时间：2012-07-08T14:12:40.413
> 
> 标签：spring, components

我正在创建一个 Spring MVC webapp，我喜欢使用控制器等组件的自动发现。

在我的应用程序上下文文件中，我放置了以下标签

```
<context:component-scan base-package="com.example" /> 
```

com.example.springmvc.controller 中有一个控制器

```
@Controller
public class AccountController  {

    @RequestMapping("/account.html")
    public ModelMap showAccount() throws Exception {

        ModelMap modelMap = new ModelMap();
        modelMap.addAttribute("someText", "This is an account");

        return modelMap;
    }

    @RequestMapping("/account.html")
    public ModelMap showAccount(@RequestParam("accountId") int accountId) throws Exception     {

        ModelMap modelMap = new ModelMap();
        modelMap.addAttribute("someText", String.format("This is an account with id %d", accountId));

        return modelMap;
    }

} 
```

当我通过访问 localhost:8080/account.html 进行测试时，我得到一个 404，所以我一定是忘记了什么。

当我在我的 MVC 配置文件中创建自定义映射时，如下所示，它可以工作。至少，然后我得到一个关于控制器中模棱两可的方法的错误，但这是另一个问题。至少它会找到控制器。

```
<bean name="/account.html" class="com.example.springmvc.controller.AccountController"/> 
```

我不想在 XML 中创建我的映射，我想使用带注释的 URL 映射。你能告诉我我在这里忘记了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T14:24:10.283

要启用基于注释的配置扫描，请将以下内容添加到您的 Spring 配置中：

```
<mvc:annotation-driven /> 
```

# javascript - 浏览器大小 Ctrl +/- :: 如何操作设置？

> ID：11383787
> 
> 赞同：-3
> 
> 时间：2012-07-08T14:13:14.173
> 
> 标签：javascript, jquery, css

`Ctrl`说明：在所有浏览器中，我们都可以使用+`+`或`Ctrl`+重新调整内容的大小`-`（在 Windows 中）不了解 mac。

我的网站是在流畅的布局上使用 CSS 构建的，但是我发现对于我的设计，内容看起来最好是 2 (times) `Ctrl`+`+`

**问题：如何强制浏览器以 2 * Ctrl + 显示我的页面作为默认缩放视图？如果可用，我更喜欢仅使用 CSS 的方法，如果没有，我猜下一个选择是 JavaScript。**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T14:15:34.560

你不应该干涉用户的显示偏好。如果您的网站“在某个缩放级别下观看效果最佳”，那么您真的应该重新评估您将网站放在一起的方式。

例如，只需将所有测量值、长度、尺寸等乘以 1.2

# e-commerce - 为通过 Facebook 或 Twitter 签名的网站用户发送通知。如何？

> ID：11383788
> 
> 赞同：0
> 
> 时间：2012-07-08T14:13:17.010
> 
> 标签：e-commerce, registration

假设我们有一个电子商务网站，它建议 3 种用户注册方式：

*   常规电子邮件
*   通过脸书
*   通过推特

现在让我们假设我们有用户通过 facebook/twitter 帐户签名，我们需要向他发送有关他的订单的通知（订单完成或类似的 s/t）。我们应该怎么做？对于普通的电子邮件用户来说，这是绝对清楚的——我们应该只是通过电子邮件通知他们，但是 Facebook/Twitter 用户呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:28:22.620

当他们使用 Facebook 对您的应用程序进行身份验证时，您可以请求电子邮件权限，以便能够访问他们指定用于其 Facebook 帐户的电子邮件地址。在注册时，您可以将此地址存储在您的数据库中，所有订单流都可以遵循现有的电子邮件路径。

你也可以在 twitter 上重新使用这种方法。

我可以理解区分注册流程的必要性，但是我认为您希望尽可能简化发布订单通知，以确保用户之间的一致性。

# jsp - 使用 scriptlet 代码调用 onClick 函数

> ID：11383792
> 
> 赞同：1
> 
> 时间：2012-07-08T14:13:43.863
> 
> 标签：jsp, servlets

我想添加一个按钮，当我单击它时应该显示日期，但按钮不起作用。

我的小服务程序：

```
package test.servlets; 

  import java.io.*;
  import javax.servlet.*;

      public class FunctionalTestServlet extends HttpServlet
        {

public void doGet(HttpServletRequest request,HttpServletResponse response)throws    

        ServletException, IOException {

     response.setContentType("text/html");
      PrintWriter out = response.getWriter();  
      String text = request.getParameter("montext");
      String fileName = request.getParameter("testclass");

      out.println("<b><font color='blue'>The text is :</font></b>" 
      + "<b>"+ text +"</b>" + "<br>");

      out.println("<b><font color='blue'>The File name is :</font></b>" 
              + "<b>"+ fileName+"</b>" + "<br>");

      out.println("<% public void executeTest() {" +

 " java.util.Date d = new java.util.Date();out.println(d.toString()); } %>");
 **out.println("<input type='submit' value='Execute Test'onclick='executeTest()'>");**

    }

} 
```

jsp页面：

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"   

"http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
   </head>
      <body>

    <html:file properties="tonFichier" name="tonForm"/>

    <form action="FunctionalTestServlet" enctype="multipart/form-data" method="get">
    <p>
  Type some text (if you like):<br>
  <input type="text" name="montext" size="30">
   </p>
    <p>
    Please specify a Test , or a set of tests:<br>
   <input type="file" name="testclass" size="40" >
    </p>
   <div>
  <input type="submit" value="Execute Test">

     </div>
   </form>
   </body>
  </html> 
```

任何想法请干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:40:38.257

这肯定是错误的：

```
out.println("<% public void executeTest() {" + 
```

您不能在 servlet 中生成 scriptlet 代码。Scriptlet 代码属于 JSP。从 JSP 返回的任何文本（发送到`out`）都直接发送到客户端。因此，传递给浏览器的 HTML 将包含 scriptlet 代码——应该在服务器端进行评估！

Scriptlet 只能出现在 JSP 中。

为了让它更有趣，您尝试将 Java`executeTest()`方法附加为 JavaScript`onclick`处理程序 - 永远不会工作：

```
out.println("<input type='submit' value='Execute Test'onclick='executeTest()'>") 
```

事实上，你的代码被破坏的方式太多了，需要完全重新思考/重写。从了解 servlet、JSP 和 JavaScript 的工作方式、时间和地点开始。

我有点明白你的想法，你猜怎么着，它既不需要 JSP 也不需要 servlet。只需`onlick`在 JavaScript 中编写处理程序并以某种方式修改 DOM 以打印当前日期。

# javascript - 使用 python 获取 javascript 表单内容

> ID：11383796
> 
> 赞同：2
> 
> 时间：2012-07-08T14:14:10.803
> 
> 标签：javascript, python, xml, forms

我是一个新手 python 程序员，我很难找到一个工具来帮助我从 javascript 中获取表单。我在 python 中编写了一个小脚本，并且在 javascript 中完成了一个简单的界面。用户需要在浏览器中选择一些项目，然后 javascript 返回一个 sendForm()。然后我想用我的 python 脚本恢复表单。我知道我可以使用 javascript 生成一个 xml 文件并告诉我的 python 脚本等到它创建然后捕获它（使用 os.path.exist(..)）但我想避免这种情况。我已经看到诸如 cgi、mechanize、pyjs、(selenium?) 之类的库可用于接口 python 和 html、javascript，但我找不到使用哪个库，或者是否有另一种工具可以轻松处理恢复表单。

更多信息：python 脚本生成一个由 javascript 读取的 xml。用户在 javascript 中选择项目（带有复选框），然后由 javascript 在 xml 中进行标记。然后javascript在隐藏字段中输出修改后的xml，我希望在创建后用我的python脚本检索这个修改后的xml。

非常感谢大家的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:13:07.987

感谢评论中的澄清。由于您正在构建一个网站，因此您需要使用 AJAX 来调用 python Web 应用程序并返回一些内容（在您的情况下可能是 XML，尽管我建议您阅读有关 JSON 的内容）。在我看来，您还没有解决问题的最佳方法，但这是另一个问题。我不明白你为什么要麻烦地用 python 生成 xml，用 JavaScript 读取它，用 JavaScript 更新它，然后在提交表单时用 Python 再次读取它。首先，想想如果您的用户禁用 JavaScript 会发生什么。

无论如何，我建议阅读有关[Flask](http://flask.pocoo.org/)和[jQuery](http://jquery.com/)的内容来开始。然后，您的应用程序在 python 中可能看起来像这样：

```
from flask import Flask
app = Flask(__name__)

@app.route('/', methods=['POST', 'GET'])
def foo():
    if request.method == 'GET':
        # Generate the XML
        return myXML
    if request.method == 'POST':
        # Read that hidden field
        xml = request.form['the_hidden_xml']
        # Do what you will
        return render_template('homepage.html')

if __name__ == "__main__":
    app.run() 
```

JavaScipt 可能会这样做：

```
function buildTheForm() {
    $.get('/', function(data) {
        // handle the xml in data
        alert('Load was performed.');
    });
} 
```

The form probably does this:

```
<form action="/" method="post"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:28:59.800

您的系统是 Web 应用程序吗？如果是，您的 javascript 可以使用 ajax 发布到 python 后端。然后您可以将表单加密为 json 字符串并发送到后端，在后面您可以将该字符串解析为 python 变量... Javascript 它本身无法访问您的本地文件，除非您在本地运行它（但它确实是有限）

我建议你应该尝试像 Django 这样的网络框架工作。一天之内就能轻松学会。

# objective-c - 块内的 AFNetworking 和异步数据

> ID：11383797
> 
> 赞同：0
> 
> 时间：2012-07-08T14:14:13.553
> 
> 标签：objective-c, ios, afnetworking

我的代码：

```
-(void)addressLocation:(NSArray *)inputData {
NSString *plusAddress = [[inputData objectAtIndex:0] stringByReplacingOccurrencesOfString:@" " withString:@"+"];
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/geocode/json?address=%@,%@&sensor=false&region=pl", plusAddress, [inputData objectAtIndex:1]]];

__block CLLocationCoordinate2D newRecord;
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSArray *results = [JSON valueForKey:@"results"];
    NSNumber *latNumber = [[results objectAtIndex:0] valueForKeyPath:@"geometry.location.lat"];
    NSNumber *lngNumber = [[results objectAtIndex:0] valueForKeyPath:@"geometry.location.lng"];
    CGFloat lat = [latNumber floatValue];
    CGFloat lng = [lngNumber floatValue];
    newRecord = CLLocationCoordinate2DMake(lat, lng);
}  failure:nil];
[operation start];
[operation waitUntilFinished];

KantorPoint *newPoint = [[KantorPoint alloc] init];
newPoint.coordinate = newRecord;
newPoint.name = [inputData objectAtIndex:1];
newPoint.address = [inputData objectAtIndex:0];
[self.pointersArray addObject:newPoint];
} 
```

我正在尝试`newRecord`从操作块传输，如[本](https://stackoverflow.com/a/7970037/1005787)答案所示。但是我不能做类似内部块`newPoint.coordinate`的事情（得到一个错误）。有没有办法解决这个问题？`null``return newRecord`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:34:27.060

我不确定您的目标，但我会以这种方式重写代码。

```
- (void)addressLocation:(NSArray *)inputData {

    NSString *plusAddress = [[inputData objectAtIndex:0] stringByReplacingOccurrencesOfString:@" " withString:@"+"];
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/geocode/json?address=%@,%@&sensor=false&region=pl", plusAddress, [inputData objectAtIndex:1]]];

    __block YourClass *selfBlock = self; // __weak YourClass *selfBlock = self; if you use ARC

    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

        NSArray *results = [JSON valueForKey:@"results"];
        NSNumber *latNumber = [[results objectAtIndex:0] valueForKeyPath:@"geometry.location.lat"];
        NSNumber *lngNumber = [[results objectAtIndex:0] valueForKeyPath:@"geometry.location.lng"];
        CGFloat lat = [latNumber floatValue];
        CGFloat lng = [lngNumber floatValue];
        CLLocationCoordinate2D newRecord = CLLocationCoordinate2DMake(lat, lng);

        KantorPoint *newPoint = [[KantorPoint alloc] init];
        newPoint.coordinate = newRecord;
        newPoint.name = [inputData objectAtIndex:1];
        newPoint.address = [inputData objectAtIndex:0];
        [selfBlock.pointersArray addObject:newPoint];

    }  failure:nil];

    // the queue needs to be allocated somewhere...
    [[self operationQueue] addOperation:operation];
} 
```

如果您使用 ARC:`__block`不会阻止对象被保留，请注意。改为使用`__weak`。

**编辑**

基于**phix23**，您需要在某处保留您的操作。因此，一种简单的方法是创建一个类型的属性`NSOperationQueue`并将操作添加到该队列。当您将其添加到队列中时，您无需执行`start`该操作。

希望有帮助。

# reporting-services - ReportViewer 9.0 和 Visual Studio 2010

> ID：11383800
> 
> 赞同：0
> 
> 时间：2012-07-08T14:14:57.700
> 
> 标签：reporting-services, reportviewer

我正在制作一个使用 Visual Studio 2010 制作报告的应用程序。由于网站中已经使用了旧的 ajax，我们不能使用 ReportViewer 10.0。所以我使用 Report Viewer 9.0 来生成报告。

当我运行应用程序时，我收到以下错误：

> 本地报告处理过程中发生错误。
> 报告“主报告”的定义无效。
> 报告定义无效。详细信息：报表定义具有无法升级的无效目标命名空间“http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition”。

我已将 10.0 ReportViewer 引用更改为 9.0 的引用。我的 web.config 如下：

```
<?xml version="1.0"?>
<configuration>
     <system.web>

    <httpHandlers>
          <!--<add path="Reserved.ReportViewerWebControl.axd" verb="*" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" validate="false" />-->
          <add verb="*" path="Reserved.ReportViewerWebControl.axd" type = "Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </httpHandlers>
    <compilation debug="true" targetFramework="4.0">
      <buildProviders>
         <!--<add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />-->
       <add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.Common, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
      </buildProviders>
    </compilation>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <!--<add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />-->
      <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
    </handlers>
  </system.webServer>
</configuration> 
```

我的页面代码如下：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>
<%@ Register assembly="Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" namespace="Microsoft.Reporting.WebForms" tagprefix="rsweb" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<%--<%@ Register assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" namespace="Microsoft.Reporting.WebForms" tagprefix="rsweb" %>--%>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <rsweb:ReportViewer ID="rs" runat="server" Font-Names="Verdana" Font-Size="8pt" 
            InteractiveDeviceInfos="(Collection)" WaitMessageFont-Names="Verdana" 
            WaitMessageFont-Size="14pt">
        <LocalReport ReportPath="Report.rdlc">
            <DataSources>
                <rsweb:ReportDataSource DataSourceId="ObjectDataSource1" Name="DataSet1" />
            </DataSources>
        </LocalReport>
        </rsweb:ReportViewer>
        <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
            SelectMethod="GetData" TypeName="dtAuditTableAdapters.ADT_AuditTableAdapter">
        </asp:ObjectDataSource>
    </div>
    </form>
</body>
</html> 
```

需要解决以下错误：

> 本地报告处理过程中发生错误。
> 报告“主报告”的定义无效。
> 报告定义无效。详细信息：报表定义具有无法升级的无效目标命名空间“http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:08:27.887

只需替换您的数据源

```
<rsweb:ReportDataSource DataSourceId="ObjectDataSource1" Name="DataSet1" /> 
```

和

```
<rsweb:ReportDataSource DataSourceId="ObjectDataSource1" Name="dtAuditTableAdapters" /> 
```

我希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T04:04:54.667

嗯，看看您发布的代码，您似乎仍在`Version=10.0.0.0,`使用

```
 <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
        <handlers>
         ........Microsoft.ReportViewer.WebForms, Version=10.0.0.0, ...
        </handlers>
   </system.webServer> 
```

更改 `Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>`

为

```
Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" /> 
```

然后它应该工作

高温高压

# c - C语言中取2个不同的随机数

> ID：11383802
> 
> 赞同：1
> 
> 时间：2012-07-08T14:15:13.767
> 
> 标签：c

> **可能重复：**
> [调用 rand() 返回非随机结果](https://stackoverflow.com/questions/9686271/calling-rand-returning-non-random-results)

在我的工作室中，我需要获取 2 个不同的随机数，但我得到了 2 个相同的随机数。

```
#include<stdio.h>
#include<stdlib.h>
#include<time.h>
int random1_6(){
 int k;
 srand(time(0));
 k=((rand()%6)+1);
 return k;
}
int main(void){
 int a,b;
    a=random1_6();
    printf("%d.\n",a);
    b=random1_6();
    printf("%d.\n",b);
return 0;
} 
```

如何获得2个不同的随机数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T14:18:54.543

非加密随机数生成器 (RNG) 不是真正随机的，而是基于种子生成类似随机的数字。

你所做的是用相同的种子初始化 RNG 两次，所以你会得到相同的结果。只给 RNG 播种一次，例如在程序启动时，您将获得类似随机的不同结果。

编辑：如下代码应该可以工作：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int random1_6(){
  return ((rand() % 6) + 1);
}

int main(void){
  int a,b;
  srand(time(NULL));

  a = random1_6();
  printf("%d.\n",a);

  b=random1_6();
  printf("%d.\n",b);

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T14:18:14.733

不要`srand(time(0));`在每次通话时都这样做。**只调用一次。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T14:18:18.167

`srand()`您必须仅使用**一次**初始化随机数生成器种子：每次调用时，您都使用相同的种子重新初始化 RNG，因为很可能两个后续调用`time(0)`将返回相同的时间戳（秒级精度），因此rand() 将返回相同的数字两次。

如果您`srand()`在程序开始时（在`main()`入口点）只调用一次，那么每次调用 rand() 都会返回一个不同的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T14:20:37.650

你总是用相同的种子初始化随机数生成器，所以你会得到相同的随机序列，反正它是伪随机的。通常，您只想在开始时调用 srand 一次来初始化生成器。

Also, you only have 6 different possible outcomes, so it is perfectly legitimate to get same number twice, there is 1/6 chance for that.

# asp.net - 更新在更新网格视图事件中不起作用

> ID：11383806
> 
> 赞同：0
> 
> 时间：2012-07-08T14:15:54.690
> 
> 标签：asp.net, sql-server-2008-r2

我在 sql server 中测试我的查询，它可以 100% 工作，但在我的页面中不起作用！这是我的查询

```
UPDATE Employee SET 
       Name='jojo',
       Age=19,
       GenderID=2,
       CountryID=5,
       Mobile=0917021092 
WHERE EmployeeID=10 
```

这是我的代码

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {            
            string s = GridView1.DataKeys[e.RowIndex].Value.ToString();

            Label id = (Label)GridView1.Rows[e.RowIndex].FindControl("lblEditID");   
            Label EmployeeID = (Label)GridView1.Rows[e.RowIndex].FindControl("lblEmployeeID");
            TextBox name = (TextBox)GridView1.Rows[e.RowIndex].FindControl("txtEditName");
            TextBox age = (TextBox)GridView1.Rows[e.RowIndex].FindControl("txtEditAge");
            DropDownList gender = (DropDownList)GridView1.Rows[e.RowIndex].FindControl("DropGender");
            DropDownList country = (DropDownList)GridView1.Rows[e.RowIndex].FindControl("DropCountry");
            TextBox mobile = (TextBox)GridView1.Rows[e.RowIndex].FindControl("txtEditMobile");

            string stringconnectiong = ConfigurationManager.ConnectionStrings["Employee_TestConnectionString"].ConnectionString;
            string sql = "update Employee set Name=@Name, Age=@Age,GenderID=@GenderID , CountryID=@CountryID , Mobile=@Mobile where EmployeeID=@EmployeeID  AND ID=@ID";

            SqlConnection con = new SqlConnection(stringconnectiong);

          try
          {
            con.Open();
            SqlCommand cmd = new SqlCommand();
            cmd.Parameters.AddWithValue("@EmployeeID", EmployeeID.Text);
            cmd.Parameters.AddWithValue("@ID", id.Text);
            cmd.Parameters.AddWithValue("@Name", name.Text);
            cmd.Parameters.AddWithValue("@Age", age.Text);
            cmd.Parameters.AddWithValue("@GenderID", gender.SelectedValue);
            cmd.Parameters.AddWithValue("@CountryID", country.SelectedValue);
            cmd.Parameters.AddWithValue("@Mobile", mobile.Text);
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = sql;
            cmd.Connection = con;
            cmd.ExecuteNonQuery();
            SqlDataAdapter dr = new SqlDataAdapter(cmd);
            DataSet ds = new DataSet();
            dr.Fill(ds);
            GridView1.DataSource = ds;
            GridView1.EditIndex = -1;
            BindGridview();

        }

        catch (System.Data.SqlClient.SqlException ex)
        {
            string msg = "Error Updating ";
            msg += ex.Message;
            throw new Exception(msg);
        }

        finally
        {
            con.Close();
            con.Dispose();
            BindGridview();
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:25:21.077

由于您的数据源是数据集，因此您需要通过 DataMember 属性指定要使用的数据集中的哪个数据表。或者只是使用数据表作为您的数据源。

将数据集行替换为以下内容：

```
DataTable dt = new DataTable();
dr.Fill(dt);
GridView1.DataSource = dt; 
```

此外，使用`GridView1_RowUpdated`事件。该事件在表格更新**之前**`GridView1_RowUpdating`触发，因此您的参数值尚未更新。

# css - 浏览器缩放时网站对齐中断

> ID：11383809
> 
> 赞同：0
> 
> 时间：2012-07-08T14:16:09.803
> 
> 标签：css, cross-browser

我的网站经过 css 和 html 验证，但浏览器缩放对齐中断。我不是 CSS 专业人士。请告诉我需要更改哪些css代码。网站在[这里](http://www.redzone.co.in/bluezone/webnew1/)

**这是标题栏上使用的图像的样式。**

```
 #title {
    height : 90px;
    background : #f3f4f5;
    text-decoration : none;
    }
    #title > img.tp {
    float : right;
    }
    #title > img.redzone {
    padding-top : 1%;
    margin-left:15%;
    }
    #title > img.ctoc {
    float : left;
    }
    #title > img.fp {
    position:absolute;
    float:left;
    margin-left:6%;
    margin-top:10px;
    } 
```

****这是左右列的样式。****

```
#contact_container {
position:absolute;
width : 15%;
margin-left:4.5%;
margin-top:30px;
float:left;
height : auto;
padding-top:2%;
background-image : url(img/transparent.jpg);
}
#contact_container > img
{
    padding-left:26%;
}
#content_container {
position:absolute;
padding-top : 2%;
margin-top:30px;
width : 15%;
float:right;
margin-left : 80%;
background-image : url(img/transparent.png);
text-align : center;
}
#content_container > hr
{
    width:80%;
    border-style:groove;
}
#contact_container > hr
{
    width:80%;
    border-style:groove;
}
#content_container > ul
{
    text-align:center;
}
#contact_container > ul
{
    text-align:center;
} 
```

**这些是菜单和滑块的一般样式**

```
#gallery {
border : #ccc solid 1px;
background : #ffffff url(img/panel.jpg) repeat-x bottom center;
width : 920px;
overflow : hidden;
}
#menu2 {
list-style : none;
width : auto;
height : 43px;
background : #014464;
border : #002232 solid 1px;
margin-top : 30px;
margin-right : auto;
margin-bottom : 5px;
margin-left : auto;
padding-left : 30px;
} 
```

任何形式的帮助表示赞赏。
即使是一些好的参考资料也会有所帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:32:18.613

这不仅仅是在变焦上。当浏览器宽度改变时，它也会中断。在此处查看屏幕截图：http: [//imgur.com/OHiyQ](http://imgur.com/OHiyQ)

你有一个有趣的混合相对/绝对定位元素以及一些浮动。你最好的办法是去掉那些不同的风格，在你的标记中以正确的顺序（从左到右）获取你的内容，然后从那里获取它。

这是一个非常有用的流体宽度、三列 CSS 布局示例，看看它是如何在其中完成的（并阅读随附的文章），这将真正帮助您使布局正常工作。

[http://www.maxdesign.com.au/articles/css-layouts/three-liquid/](http://www.maxdesign.com.au/articles/css-layouts/three-liquid/)

祝你好运！

# ios - 在视图初始化期间执行数据密集型计算

> ID：11383811
> 
> 赞同：0
> 
> 时间：2012-07-08T14:16:28.387
> 
> 标签：ios

伙计们，

我想听听您对以下情况的看法。我的应用程序上的大多数屏幕都是表格视图，其中表格视图的行数和内容是通过首先从本地核心数据表中读取数据然后对其执行一些复杂的计算来确定的。我想以一种在用户从一个屏幕转换到另一个屏幕时应用程序不会冻结的方式来执行此操作。这是我的做法。在视图中确实出现了函数，我开始为活动指示器设置动画，然后生成一个线程以从核心数据表中读取数据并对其执行所有相关计算。在这个线程中，计算完成后，我停止为活动指示器设置动画，标记初始化完成的标志，然后重新加载表格视图。在初始化完成之前加载表格视图单元格将返回空单元格。（我注意到表视图数据源函数在 viewWillAppear 之后和 ViewdidAppear() 之前被立即调用）。下面粘贴的是我的代码：

```
-(void)viewWillAppear:(BOOL)animated {

   [super viewWillAppear:animated];
   NSLog(@"%s",__FUNCTION__);

}

-(void)viewDidAppear:(BOOL)animated {

   [super viewDidAppear:animated];
   NSLog(@"%s",__FUNCTION__);

   [activityOutlet startAnimating];

   dispatch_async(myQueue, ^{ [self getFromCoreData];

   });

}   

- (void) getFromCoreData {

   // Get from coredata and start calculations here

   [activityOutlet stopAnimating];
   activityOutlet.hidden = YES;

   [tableOutlet reloadData];

} 
```

我想知道是否有更好的方法来完成上述操作。

提前感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:22:35.900

UI 更新必须在主线程上完成：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self getFromCoreData];

        dispatch_async(dispatch_get_main_queue(), ^{
            activityOutlet stopAnimating];
            activityOutlet.hidden = YES;
            [tableOutlet reloadData];
        });
    });
}

- (void) getFromCoreData {
   // Get from coredata and start calculations here
} 
```

# android - 在 Linux ARM 上运行适用于 Android 的 ARM 二进制文件

> ID：11383813
> 
> 赞同：8
> 
> 时间：2012-07-08T14:16:59.837
> 
> 标签：android, linux, kernel, arm

是否可以在其他具有 Linux 的 ARM 设备（例如 Raspberry Pi）上运行为 Android 构建的 ARM 二进制文件（不是 .apk）？我正在尝试将我的一个项目移植到 ARM 上，但我需要使用仅适用于 x86（Windows 和 Linux）和（最近）Android 设备的闭源二进制文件 (SopCast)。

运行`file sopclient`显示*ELF 32 位 LSB 可执行文件，ARM，版本 1 (SYSV)，动态链接（使用共享库），已剥离，*但`sh sopclient`表示*无法执行二进制文件*（是的，我之前 chmoded +x 它）。

“经典” ARM Linux 内核和 Android-Linux 内核之间有什么明显的区别吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-08T15:00:28.973

请注意，Android 的`bionic`lib 可能存在依赖项，而其他 Linux ARM 上可能不存在这些依赖项？

您可以通过运行 a`readelf -Ss binary_name`查看符号（如果有）来检查，

例如，使用`readelf -Ss logwrapper`

```
Symbol table '.dynsym' contains 47 entries:
   Num:    Value  Size Type    Bind   Vis      Ndx Name
     0: 00000000     0 NOTYPE  LOCAL  DEFAULT  UND 
     1: 00000000     0 FUNC    GLOBAL DEFAULT  UND __aeabi_unwind_cpp_pr0
     2: 00000000     0 FUNC    GLOBAL DEFAULT  UND strlen
     3: 00000000     0 FUNC    GLOBAL DEFAULT  UND __errno
     4: 00000000     0 FUNC    GLOBAL DEFAULT  UND open
     5: 00000000     0 FUNC    GLOBAL DEFAULT  UND close
     6: 00000000     0 FUNC    GLOBAL DEFAULT  UND __stack_chk_fail
     7: 00000000     0 OBJECT  GLOBAL DEFAULT  UND __stack_chk_guard
     8: 00000000     0 FUNC    GLOBAL DEFAULT  UND pthread_mutex_unlock
     9: 00000000     0 FUNC    GLOBAL DEFAULT  UND pthread_mutex_lock
    10: 00000000     0 FUNC    GLOBAL DEFAULT  UND read
    11: 00000000     0 FUNC    GLOBAL DEFAULT  UND abort
    12: 00000000     0 OBJECT  GLOBAL DEFAULT  UND __sF
    13: 00000000     0 FUNC    GLOBAL DEFAULT  UND memcpy
    14: 00000000     0 FUNC    GLOBAL DEFAULT  UND __libc_init
    15: 00000000     0 FUNC    GLOBAL DEFAULT  UND exit
    16: 0000a170     0 NOTYPE  GLOBAL DEFAULT   19 __dso_handle
    17: 0000a008     0 NOTYPE  GLOBAL DEFAULT   13 __INIT_ARRAY__
    18: 0000a010     0 NOTYPE  GLOBAL DEFAULT   14 __FINI_ARRAY__
    19: 00000000     0 FUNC    GLOBAL DEFAULT  UND setgid
    20: 00000000     0 FUNC    GLOBAL DEFAULT  UND writev
    21: 00000000     0 FUNC    GLOBAL DEFAULT  UND dup2
    22: 00000000     0 FUNC    GLOBAL DEFAULT  UND access
    23: 00000000     0 FUNC    GLOBAL DEFAULT  UND __aeabi_unwind_cpp_pr1
    24: 00000000     0 FUNC    GLOBAL DEFAULT  UND memmove
    25: 00000000     0 FUNC    GLOBAL DEFAULT  UND fork
    26: 00000000     0 FUNC    GLOBAL DEFAULT  UND execvp
    27: 00000000     0 FUNC    GLOBAL DEFAULT  UND strncmp
    28: 00000000     0 FUNC    GLOBAL DEFAULT  UND strcmp
    29: 00000000     0 FUNC    GLOBAL DEFAULT  UND ptsname
    30: 00000000     0 FUNC    GLOBAL DEFAULT  UND setuid
    31: 00000000     0 FUNC    GLOBAL DEFAULT  UND strerror
    32: 00000000     0 FUNC    GLOBAL DEFAULT  UND vsnprintf
    33: 00000000     0 FUNC    GLOBAL DEFAULT  UND unlockpt
    34: 00000000     0 FUNC    GLOBAL DEFAULT  UND wait
    35: 00000000     0 FUNC    GLOBAL DEFAULT  UND fputs
    36: 00009318     0 NOTYPE  GLOBAL DEFAULT  ABS __exidx_start
    37: 00009368     0 NOTYPE  GLOBAL DEFAULT  ABS __exidx_end
    38: 0000a15c     0 NOTYPE  GLOBAL DEFAULT   18 __data_start
    39: 0000a170     0 NOTYPE  GLOBAL DEFAULT  ABS _edata
    40: 0000a170     0 NOTYPE  GLOBAL DEFAULT  ABS __bss_start
    41: 0000a170     0 NOTYPE  GLOBAL DEFAULT  ABS __bss_start__
    42: 0000a188     0 NOTYPE  GLOBAL DEFAULT  ABS _bss_end__
    43: 0000a188     0 NOTYPE  GLOBAL DEFAULT  ABS __bss_end__
    44: 0000a188     0 NOTYPE  GLOBAL DEFAULT  ABS __end__
    45: 0000a188     0 NOTYPE  GLOBAL DEFAULT  ABS _end
    46: 00080000     0 NOTYPE  GLOBAL DEFAULT  ABS _stack 
```

注意使用的符号，这是你检查符号的提示，最后发出这个，`readelf -d logwrapper`

```
Dynamic section at offset 0x2020 contains 24 entries:
  Tag        Type                         Name/Value
 0x00000003 (PLTGOT)                     0xa0e8
 0x00000002 (PLTRELSZ)                   208 (bytes)
 0x00000017 (JMPREL)                     0x875c
 0x00000014 (PLTREL)                     REL
 0x00000011 (REL)                        0x882c
 0x00000012 (RELSZ)                      16 (bytes)
 0x00000013 (RELENT)                     8 (bytes)
 0x00000015 (DEBUG)                      0x0
 0x00000006 (SYMTAB)                     0x8280
 0x0000000b (SYMENT)                     16 (bytes)
 0x00000005 (STRTAB)                     0x8570
 0x0000000a (STRSZ)                      490 (bytes)
 0x00000004 (HASH)                       0x8128
 0x00000001 (NEEDED)                     Shared library: [libc.so]
 0x00000001 (NEEDED)                     Shared library: [libstdc++.so]
 0x00000001 (NEEDED)                     Shared library: [libm.so]
 0x00000020 (PREINIT_ARRAY)              0xa000
 0x00000021 (PREINIT_ARRAYSZ)            0x8
 0x00000019 (INIT_ARRAY)                 0xa008
 0x0000001b (INIT_ARRAYSZ)               8 (bytes)
 0x0000001a (FINI_ARRAY)                 0xa010
 0x0000001c (FINI_ARRAYSZ)               8 (bytes)
 0x0000001e (FLAGS)                      
 0x00000000 (NULL)                       0x0 
```

在运行时动态链接了三个库，事情是，`bionic`库是`libc.so`从原生 C 和 Android 的角度来看的，所以首先仔细检查一下！

还有其他 ARM将以[ucLibC](http://www.uclibc.org/)`libc.so`为幌子，因此里程可能会有所不同。唯一的观察方法是在 Linux ARM 下运行它，看看会发生什么，如果它因分段错误或总线错误而崩溃，你就会知道。

# c# - 计算量大导致堆栈溢出错误

> ID：11383816
> 
> 赞同：4
> 
> 时间：2012-07-08T14:17:33.317
> 
> 标签：c#, image-processing, stack-overflow

我只是在为以下代码寻找一种有效的方法，因为我收到堆栈溢出错误，我提供了尽可能多的信息，但也许你不需要所有这些解释，但代码本身就足够了，任何帮助都是感谢让我摆脱这个错误；

我正在尝试将运算符（Hueckel 边缘检测运算符）一次应用于 9x9 区域并为整个图像重复它。所以它是一个常规的边缘检测基础。您可以在第二张图片中看到我的意思。

![在此处输入图像描述](../Images/e4d33aa8718143de7b51f93b31386c5e.png) ![在此处输入图像描述](../Images/6c1e9e9373645fb6b3d80e1631b7475e.png)

函数 a() 在另一个名为 Hueckel_operator() 的函数中被调用 8 次，hueckel_operator 是一个递归函数，每次都为 x 和 y 参数调用 +5。这意味着 a() 几乎被称为大图像和真正的问题 MyImage[] 这是一个 emgucv Image<> 对象。因为 MyImage[] 应该检查 9x9 矩阵中的每个像素并带上它的值，所以它被调用的次数是函数 a() 的 69 * j 倍。

函数 input_i_y() 带来 y 坐标，还有另一个名为 input_i_x() 的函数带来 9x9 矩阵的 x 坐标。我知道，为了将它们用作另一个函数的参数，创建两个单独的函数是极端的，但我找不到更好的解决方案。HueckelDisk 类根据 x,y 坐标计算 9 个不同的 Hueckel 圆盘的公式。根据拟合精度，我们可以确定是否有边缘。

![在此处输入图像描述](../Images/748bf07e79839cc8d416a9b77a75cfbe.png)

这是hueckel_operator()的终止条件

```
if (mod_width + counter4 + 10 >= MyImage.Width && mod_height + counter5 + 10 >= MyImage.Height)
            {
                goto EXIT2;
            } 
```

这是hueckel_operator()的开始和结束

```
public void hueckel_operator(int counter2, int counter3)
        {      
            counter2 = counter4;
            counter3 = counter5;

               int mod_width = MyImage.Width % 5;
            int mod_height = MyImage.Height % 5;

            if (mod_width + counter4 + 10 >= MyImage.Width && mod_height + counter5 + 10 >= MyImage.Height)
            {
                goto EXIT2;
            }
            else
            {
                if (mod_width + counter4 + 10 >= MyImage.Width)
                {
                    if (counter5 == 1)
                    {
                        counter5 += 4;
                    }
                    else
                    {
                        counter5 += 5;
                    }
                    counter4 = 1;
                }
                if (counter4 == 1)
                {
                    counter4 += 4;
                }

                else if(counter4 != 0)

                {
                    counter4 += 5;
                }

                if (counter5 == 0 && counter4 == 0)
                {
                    counter4 = 1;
                    counter5 = 1;
                }
            } 
```

这是hueckel_operator()的结尾；

出口：

```
 hueckel_operator(counter5, counter4);

        EXIT2:

            MessageBox.Show("done");
        } 
```

这是函数 a()

```
 public double a(int j,  int counter6,  int counter7)
                {

                    double result = 0;

                    HueckelDisks hueckel_formula = new HueckelDisks();

                    counter6 = counter4;
                    counter7 = counter5;

                    for (int II = 0; II <= j ; II++)
                    {
                        for (KK = 1; KK < 69; KK++)
                        {

                            result += hueckel_formula.HueckelDisk(input_i_x(KK),input_i_y(KK),j) * MyImage[point_a, point_b].Intensity;

                        }
                    }

                    return result;
                }

         public int input_i_y(int y)
                {        
                    Tuple<int, int>[] myArray =
                    {
                        Tuple.Create(3,1),Tuple.Create(4,1),Tuple.Create(5,1),Tuple.Create(6,1),Tuple.Create(7,1),Tuple.Create(2,2),
                        Tuple.Create(3,2),Tuple.Create(4,2),Tuple.Create(5,2),Tuple.Create(6,2),Tuple.Create(7,2),Tuple.Create(8,2),
                        Tuple.Create(1,3),Tuple.Create(2,3),Tuple.Create(3,3),Tuple.Create(4,3),Tuple.Create(5,3),Tuple.Create(6,3),
                        Tuple.Create(7,3),Tuple.Create(8,3),Tuple.Create(9,3),Tuple.Create(1,4),Tuple.Create(2,4),Tuple.Create(3,4),
                        Tuple.Create(4,4),Tuple.Create(5,4),Tuple.Create(6,4),Tuple.Create(7,4),Tuple.Create(8,4),Tuple.Create(9,4),
                        Tuple.Create(1,5),Tuple.Create(1,5),Tuple.Create(2,5),Tuple.Create(3,5),Tuple.Create(4,5),Tuple.Create(5,5),
                        Tuple.Create(6,5),Tuple.Create(7,5),Tuple.Create(8,5),Tuple.Create(9,5),Tuple.Create(1,6),Tuple.Create(2,6),
                        Tuple.Create(3,6),Tuple.Create(4,6),Tuple.Create(5,6),Tuple.Create(6,6),Tuple.Create(7,6),Tuple.Create(8,6),
                        Tuple.Create(8,6),Tuple.Create(1,7),Tuple.Create(2,7),Tuple.Create(3,7),Tuple.Create(4,7),Tuple.Create(5,7),
                        Tuple.Create(6,7),Tuple.Create(7,7),Tuple.Create(8,7),Tuple.Create(9,7),Tuple.Create(2,8),Tuple.Create(3,8),
                        Tuple.Create(4,8),Tuple.Create(5,8),Tuple.Create(6,8),Tuple.Create(7,8),Tuple.Create(8,8),Tuple.Create(3,9),
                        Tuple.Create(4,9),Tuple.Create(5,9),Tuple.Create(6,9),Tuple.Create(7,9),

                    };

                    return myArray[y].Item2;

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T16:22:53.730

请查看`myArray`创建`input_i_y`.

它甚至可以是静态的，因为它在调用之间不会改变。

```
// ...somewhereinside you Hueckel class

public Tuple<int, int>[] myArray { get; set; }

// Initialize it
public void InitializeHueckel()
{
    CreateMyArray();
}

// and build it 
public void  CreateMyArray()
{
   myArray = new Tuple<int, int>[] {
             Tuple.Create(3, 1), Tuple.Create(4, 1), Tuple.Create(5, 1), 
             Tuple.Create(6, 1), Tuple.Create(7, 1), Tuple.Create(2, 2), 
             Tuple.Create(3, 2), Tuple.Create(4, 2), Tuple.Create(5, 2), 
             Tuple.Create(6, 2), Tuple.Create(7, 2), Tuple.Create(8, 2), 
             Tuple.Create(1, 3), Tuple.Create(2, 3), Tuple.Create(3, 3), 
             Tuple.Create(4, 3), Tuple.Create(5, 3), Tuple.Create(6, 3), 
             Tuple.Create(7, 3), Tuple.Create(8, 3), Tuple.Create(9, 3), 
             Tuple.Create(1, 4), Tuple.Create(2, 4), Tuple.Create(3, 4), 
             Tuple.Create(4, 4), Tuple.Create(5, 4), Tuple.Create(6, 4), 
             Tuple.Create(7, 4), Tuple.Create(8, 4), Tuple.Create(9, 4), 
             Tuple.Create(1, 5), Tuple.Create(1, 5), Tuple.Create(2, 5), 
             Tuple.Create(3, 5), Tuple.Create(4, 5), Tuple.Create(5, 5), 
             Tuple.Create(6, 5), Tuple.Create(7, 5), Tuple.Create(8, 5), 
             Tuple.Create(9, 5), Tuple.Create(1, 6), Tuple.Create(2, 6), 
             Tuple.Create(3, 6), Tuple.Create(4, 6), Tuple.Create(5, 6), 
             Tuple.Create(6, 6), Tuple.Create(7, 6), Tuple.Create(8, 6), 
             Tuple.Create(8, 6), Tuple.Create(1, 7), Tuple.Create(2, 7), 
             Tuple.Create(3, 7), Tuple.Create(4, 7), Tuple.Create(5, 7), 
             Tuple.Create(6, 7), Tuple.Create(7, 7), Tuple.Create(8, 7), 
             Tuple.Create(9, 7), Tuple.Create(2, 8), Tuple.Create(3, 8), 
             Tuple.Create(4, 8), Tuple.Create(5, 8), Tuple.Create(6, 8), 
             Tuple.Create(7, 8), Tuple.Create(8, 8), Tuple.Create(3, 9), 
             Tuple.Create(4, 9), Tuple.Create(5, 9), Tuple.Create(6, 9), 
             Tuple.Create(7, 9), 
             }; 
```

在您的 input_i_y 中，您可以像以前一样使用它：

```
return myArray[y].Item2; 
```

应该移除一些堆栈的负载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T16:00:42.520

您的方法的最开始`hueckel_operator`包含您无限递归的可能来源的提示。

```
public void hueckel_operator(int counter2, int counter3)
        {      
            counter2 = counter4;
            counter3 = counter5; 
```

您不是*使用*两个参数的值，而是立即为它们*分配*必须来自我们在您发布的代码中看不到的字段的值。

其余可见代码甚至没有引用这些参数。

不可能确定错误是在哪里给出了您发布的代码位，但很可能这些真正驱动逻辑的字段值没有改变，或者没有以让递归结束的方式改变。

我预计根本问题是您无法理解自己的代码。您应该使用有意义的变量名而不是`counter2`,`counter3`等，尝试以与参数不同的方式命名字段，避免重新分配参数，并仅定义实际使用的参数。

我也会尝试摆脱它`goto`。

# android - setVisibility 与睡眠

> ID：11383823
> 
> 赞同：0
> 
> 时间：2012-07-08T14:18:15.967
> 
> 标签：android, visibility

我有这个代码：

```
result.setVisibility(0); 
//a lot of code

//OnClick......
result.setVisibility(8);
SystemClock.sleep(500);
result.setVisibility(0); 
```

因此，当我单击按钮时，textView 消失并重新出现以显示结果已更改。但相反，textView“结果”不会消失，并且始终可见。为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:38:17.210

我不确定`setVisibility`这里的功能是否有问题。您似乎正试图在 UI 代码中睡觉，这恰好是一个非常常见的错误。

我不确定，但这[会](https://stackoverflow.com/questions/9058179/uncheck-togglebutton-after-some-period-of-time)帮助你。

另外我建议使用预定义的常量`VISIBLE`，`INVISIBLE`而`GONE`不是整数。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:22:04.763

因为你告诉需要更新 ui 的线程去睡觉......你应该为这些东西使用动画。

# ajax - Ajax xmlHTTPRequest

> ID：11383832
> 
> 赞同：0
> 
> 时间：2012-07-08T14:19:59.600
> 
> 标签：ajax, xmlhttprequest

我正在尝试使用 AJAX 获取页面的内容，但没有得到任何结果..

这是代码：

```
<script type="text/javascript">
function onSumResponse() {
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","http://www.arihav.com/",true);
xmlhttp.send();
}

</script> 
```

这是正文中的 div：

```
<div id="myDiv"><h2>Let AJAX change this text</h2></div>
<button type="button" onclick="onSumResponse()">Change Content</button> 
```

点击后我得到的是空白 div。

**编辑：**此代码取自[w3schools](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first)

**编辑 2：**这是 vbscript 中有效的代码：

```
GotothisURL = "http://www.arihav.com"
Set GetConnection = CreateObject("Microsoft.XMLHTTP")
GetConnection.Open "get", GotothisURL, False
GetConnection.Send
ResponsePage = GetConnection.responseText 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:52:17.710

如果你想请求另一个主机更好地使用 curl 或 JSON ，AJAX 不允许访问不同的服务器由于[源策略](https://stackoverflow.com/a/2851186/1473523)

# extjs - 填充标签的值

> ID：11383835
> 
> 赞同：1
> 
> 时间：2012-07-08T14:20:20.803
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.1

我正在使用 MVC 架构（我已经阅读了 MVC 上的文档，但我仍然在这里迷路）并且我需要知道如何将记录填充到我的标签上。我知道我必须由商店完成这项工作。

我已经从商店加载了值，但由于某种原因无法在我的面板上显示它。这是我的代码；

大多数示例/书籍都演示了如何在网格中显示，而不是在标签中显示（我知道它必须是相同的逻辑，但我迷路了）。它显示了如何写入 DB/JSON 文件而不显示值。

我需要在标签文本中显示 COUNTRYNAME。这是我正在做的一个示例代码来理解这一点，有人可以帮助我吗？

```
Ext.define ('ProjectDisplayExample.model.Country',{
    extend: 'Ext.data.Model',
    //
    fields:['countryid','countryname']
    //
}); 
```

店铺

```
Ext.define('ProjectDisplayExample.store.Country',{
    extend:'Ext.data.Store',
    model:'ProjectDisplayExample.model.Country',
    remoteGroup:true,
    proxy: {
        actionMethods : {
            read   : 'POST',
        },
        type: 'ajax',
        url : '/server/country.php'
    }   
}); 
```

看法

```
Ext.define('ProjectDisplayExample.view.CountryWindow', {
    extend: 'Ext.window.Window',
    alias: 'widget.countrywindow',
    ...........

    initComponent: function() {
        var st = Ext.getStore('Country');
        st.load();
        this.items = [
        {
            items: [
            {
                xtype: 'panel',
                region: 'north',
                items: [{
                    xtype: 'label',
                    // NEED TO DISPLAY COUNTRT NAME FROM THE STORE HERE
                }]
            }]
} 
```

**更新**

```
var store = ... // Your store
store.on('load', function() {
    // here store is loaded and you can do anything you want with it
    console.log('store is loaded. number of records = ', store.getCount());
}, this, { single: true });

store.load; // I ADDED THIS LINE.................... <--------- 
```

**更新 2**

```
this.items = [
            {
                items: [
                {
                    xtype: 'panel',
                    region: 'north',
                    items: [{
                        xtype: 'label',
                        name : f
                    }]
                }] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:59:09.793

我不会发布代码示例来完全解决您的问题，但我会给您几点：

*   存储包含数组或记录。所以你不能只`give me country name`从商店说。您需要先获取一条记录，例如： `var r = store.getAt(0)`，然后才能获取countyname 字段`var f = r.get('countryname')`。

*   `Load()`方法是异步的，因此您可以在代码中的某处执行它，并假设您的商店已准备好下一行。您需要订阅该`load`事件，例如：

    > ```
    > var store = ... // Your store
    > store.on('load', function() {
    >     // here store is loaded and you can do anything you want with it
    >     console.log('store is loaded. number of records = ', store.getCount());
    > }, this, { single: true });
    > store.load(); 
    > ```

*   像 in 这样的标签`xtype: label`实际上很少在 ExtJs 中使用。您到底想在该面板中显示什么？但无论如何......从商店中获取数据后，您可以使用类似`update()`或`setValue()`任何其他方法来更新组件。

希望这可以帮助...

# cookies - 记住首选语言

> ID：11383839
> 
> 赞同：3
> 
> 时间：2012-07-08T14:20:56.757
> 
> 标签：cookies

我为我女儿做了一个简单的网站。它是荷兰语的，每一页都有一个英文版本。

荷兰语网址：nl/index.html

英文网址：eng/index.html

我想做的是让访问者可以选择将一种语言设置为偏好。因此，如果他们下次访问此站点，他们将自动链接到首选页面。我知道这可以用 cookie 完成，并在这个论坛上看到了解释（[如何记住当前点击的 url？javascript？PHP？](https://stackoverflow.com/questions/9960936/how-to-remember-the-currently-clicked-url-javascriptphp)）。

我试图完成这项工作，但显然我做错了什么？有人可以逐步指导我吗？那很好啊！

亲切的问候，尤尔根

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:37:19.880

如果您熟悉 jQuery，您可以使用[cookies 插件](https://github.com/carhartl/jquery-cookie/)来保存用户的语言选择，并在他每次返回您的站点时将他重定向到适当的页面。Bellow 是一个示例代码，它使用两个按钮来设置语言：

首先声明 jQuery 脚本（我使用将它们存储在*Script*文件夹中，因此如下）：

```
<script type="text/javascript" src="../Script/jquery-1.7.2.js"></script>
<script type="text/javascript" src="../Script/jquery.cookie.js"></script> 
```

然后像这样定义页面[就绪事件](http://api.jquery.com/ready/)：

```
$(function () {

    var url = 'your_url';
    var english_page = 'eng/index.html';
    var dutch_page = 'nl/index.html';

    if ($.cookie('default_page') != null) {
        if (window.location.href != url + '/' + $.cookie('default_page')) {
            window.location.href = url + '/' + $.cookie('default_page');
        }
    }

    $('#set_english_butt').click(function () {
        $.cookie('default_page', english_page, { expires: 999 });
        alert('English was set as the default language');
    });

    $('#set_dutch_butt').click(function () {
        $.cookie('default_page', dutch_page, { expires: 999 });
        alert('Dutch was set as the default language');
    });

}); 
```

这与您页面中的一些 html 按钮挂钩：

```
<div>
    <span>Select your language:</span>
    <button id="set_english_butt">English</button>
    <button id="set_dutch_butt">Dutch</button>
</div> 
```

# c - 无法在 xml 中获取 Soap 响应的根节点

> ID：11383841
> 
> 赞同：0
> 
> 时间：2012-07-08T14:20:58.567
> 
> 标签：c, xml, linux, soap, libxml2

今天第一次开始学习libxml。并且一直在努力寻找soap响应的根节点。该死的挣扎。

这是 xml 缓冲区

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:sti_xsd="http://www.openmobilealliance.org/schema/sti/v1_0" xsi:type="soapenv:Envelope">
    <soapenv:Body>
        <sti_xsd:TranscodingResponse>
            <sti_xsd:originatorID>test</sti_xsd:originatorID>
            <sti_xsd:operationID>1.0</sti_xsd:operationID>
            <sti_xsd:mainReturnResult>
                <sti_xsd:returnCode>2000</sti_xsd:returnCode>
                <sti_xsd:returnString>All 1 transcoding job(s) succeeded</sti_xsd:returnString>
            </sti_xsd:mainReturnResult>
            <sti_xsd:totalDuration>121</sti_xsd:totalDuration>
            <sti_xsd:jobResult>
                <sti_xsd:jobID>JOB26</sti_xsd:jobID>
                <sti_xsd:extensionData>
                    <sti_xsd:property>
                        <sti_xsd:name>van.sti.trx.MemoryUsage</sti_xsd:name>
                        <sti_xsd:value>3568808</sti_xsd:value>
                    </sti_xsd:property>
                </sti_xsd:extensionData>
                <sti_xsd:mainReturnResult>
                    <sti_xsd:returnCode>2000</sti_xsd:returnCode>
                    <sti_xsd:returnString>Successful TranscodingJob (200): Success</sti_xsd:returnString>
                </sti_xsd:mainReturnResult>
                <sti_xsd:duration>119</sti_xsd:duration>
                <sti_xsd:output>
                    <sti_xsd:contentType>application/vnd.wap.mms-message</sti_xsd:contentType>
                    <sti_xsd:contentTypeParams>
                        <sti_xsd:property>
                            <sti_xsd:name>type</sti_xsd:name>
                            <sti_xsd:value>application/smil</sti_xsd:value>
                        </sti_xsd:property>
                        <sti_xsd:property>
                            <sti_xsd:name>start</sti_xsd:name>
                            <sti_xsd:value>&lt;mms.smil&gt;</sti_xsd:value>
                        </sti_xsd:property>
                    </sti_xsd:contentTypeParams>
                    <sti_xsd:location>cid:133699816987026.JOB26</sti_xsd:location>
                    <sti_xsd:mediaSize>40693</sti_xsd:mediaSize>
                </sti_xsd:output>
            </sti_xsd:jobResult>
            <sti_xsd:extensionData>
                <sti_xsd:property>
                    <sti_xsd:name>van.sti.trx.session.id</sti_xsd:name>
                    <sti_xsd:value>STI/gesti05/120514_14h/STI17_23m12s214_00</sti_xsd:value>
                </sti_xsd:property>
                <sti_xsd:property>
                    <sti_xsd:name>van.sti.server.hostname</sti_xsd:name>
                    <sti_xsd:value>getrx01</sti_xsd:value>
                </sti_xsd:property>
            </sti_xsd:extensionData>
        </sti_xsd:TranscodingResponse>
    </soapenv:Body>
</soapenv:Envelope> 
```

以下是我的代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <libxml/xmlmemory.h>
#include <libxml/parser.h>

void parseStory ( xmlDocPtr doc, xmlNodePtr cur )
{

        xmlChar *key;
        cur = cur -> xmlChildrenNode;
        printf ( "Here\n" );
        while ( cur != NULL )
        {   
                if ( ( !xmlStrcmp ( cur -> name, ( const xmlChar * ) "returnCode" ) ) ) 
                {   
                        key = xmlNodeListGetString ( doc, cur -> xmlChildrenNode,1);
                        printf ( "keyword: %s\n", key );
                        xmlFree ( key );
                }   
                cur = cur -> next;
        }   
        return ;
}

static void parseDoc ( char *docname )
{
        xmlDocPtr doc;
        xmlNodePtr cur;
        doc = xmlParseFile ( docname );

        if ( doc == NULL )
        {   
                fprintf ( stderr, "Document not parsed successfully. \n" );
                return;
        }   
        printf ( "Parsing Successful\n" );
        cur = xmlDocGetRootElement ( doc );

        if ( cur == NULL )
        {   
                fprintf ( stderr, "empty document \n" );
                xmlFreeDoc ( doc );
                    printf ( "Got the root Node\n" );
        if ( xmlStrcmp ( cur->name, ( const xmlChar * ) "soapenv:Envelope" ) )
        {
                fprintf ( stderr, "Document of the wrong type root node != ");
                xmlFreeDoc(doc);
                return;

        }

        printf ( "Got the root \n" );
        cur = cur -> xmlChildrenNode;
        while ( cur != NULL )
        {
                if (cur->type == XML_ELEMENT_NODE) {

                                printf ( "Inside if  \n" );
                        if ( !(xmlStrcmp ( cur->name, ( const xmlChar * ) "mainReturnResult" ) ) )
                        {
                                printf ( "Inside \n" );
                                parseStory ( doc, cur );
                        }
                        cur = cur -> xmlChildrenNode;
                        continue;
                }
                cur = cur -> next;
        }

        xmlFreeDoc ( doc );
        return;
}

int main ( int argc, char **argv )
{
        char *docname;

        if ( argc <= 1 )
        {
                printf ( "Usage: %s docname\n", argv[0] );
                return ( 0 );
        }
        docname = argv [1];
        parseDoc ( docname );

        return ( 1 );
}
   return; 
```

}

如前所述，我正在努力找出根节点。它说“错误类型根节点的文档！=”谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:29:57.300

您遇到的问题是“soapenv:Envelope”不是节点的名称。该名称只是“soapenv”别名所指的命名空间中的“Envelope”。

命名空间在这里让您感到困惑。

附加物：

你已经有了根节点。你在一开始就拥有它：

```
cur = xmlDocGetRootElement ( doc ); 
```

`cur`IS 根节点。

如果您立即执行以下操作：

```
printf("Name = %s\n", cur->name); 
```

你会看到你得到“信封”，这是正确的。

这是一个转储文档元素的简单示例。如果您在分配后立即调用它，您`cur`会发现它基本上会丢弃您的树。

```
static void dumpNode (int indent, xmlNodePtr node) {
    while(node != NULL) {
        if (node->type == 1) {
            int i;
            for(i = 0; i < indent; i++) {
                printf("  ");
            }
            printf("%s : %s\n", node->ns->prefix, node->name);
        }
        dumpNode(indent + 1, node->children);
        node = node->next;
    }
} 
```

请注意，libxml 中有几种“节点类型”，最值得注意的是类型 1，它是元素，类型 3，它是元素之间的文本。此代码检查类型 1 以打印出名称和前缀。但还要注意它盲目地在子节点上调用 dumpNode，而不管节点类型如何。

因此，最终，您的根节点将是一个类型 1 元素，名称为`Envelope`(cur->name)，名称空间的 href 为`http://schemas.xmlsoap.org/soap/envelope/`(cur->ns->href)，前缀为`soapenv`(cur- >ns->前缀）。命名空间前缀不是命名空间。您不能比较节点的前缀并期望比较命名空间。在这种情况下，命名空间由 href 标识。前缀是一种简写，可以在节点之间更改，即使对于相同的名称空间也是如此（通常不会，但可以，尤其是在导入其他 XML 文档时）。

# .net - VB.NET - 多态性和接口

> ID：11383842
> 
> 赞同：1
> 
> 时间：2012-07-08T14:21:11.707
> 
> 标签：.net, vb.net, oop

我试图理解接口中的多重继承。我从以下网站借用了代码并将其转换为[VB.NET：http://www.oodesign.com/interface-segregation-principle.html](http://www.oodesign.com/interface-segregation-principle.html)

```
Public Interface IWorker
    Inherits IFeedable, IWorkable
End Interface

Public Interface IWorkable
    Sub work()
End Interface

Public Interface IFeedable
    Sub eat()
End Interface

Public Class Worker
    Implements IWorkable, IFeedable
    Public Sub eat() Implements IFeedable.eat

    End Sub

    Public Sub work() Implements IWorkable.work

    End Sub
End Class

Public Class Robot
    Implements IWorkable

    Public Sub work() Implements IWorkable.work

    End Sub
End Class

Class Manager
    Dim worker As IWorkable

    Public Sub setWorker(ByVal w As IWorkable)
        worker = w
    End Sub

    Public Sub manage()
        worker.work()
    End Sub
End Class

Public Class Form1
       Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
            Try
                Dim Test As New Manager
                Dim IWorkerRobot As IWorkable = New Robot
                Test.setWorker(IWorkerRobot)

            Catch ex As Exception
                'I won't absorb the exception.  
            End Try
        End Sub
    End Class 
```

我不明白 IWorker 接口的意义现在有一个 IWorkable 和 IFeedable 接口（IWorker 扩展了 IFeedable 和 IWorkable）。我意识到这与多态性有关，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:28:50.153

这完全取决于使用该对象的代码。这就是它实际上被“变形”的地方。

*   如果该对象在只需要 an 的代码块中使用，`IWorkable`那么它将用作`IWorkable`.
*   如果该对象在只需要 an 的代码块中使用，`IFeedable`那么它将用作`IFeedable`.
*   *如果对象在需要两者*的代码块中使用，那么它将用作`IWorker`. （为此，您的`Worker`类可能应该实现所有三个接口，以便可以将其用作`IWorker`.）

要点是，这些代码块*都不*需要知道或关心它们是在 a`Worker`还是 a`Robot`或 a上运行`Manager`。

在通用代码中（参见[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)作为一个常见示例），多态性通过将对象解释为另一种类型来发挥作用。如果该对象可以变形为该类型（通过接口、继承、任何形式的对象抽象），那么它就可以这样使用。内存中的同一对象可以解释为它实现的任何时间。

# java - 用于分区数据集的子列表

> ID：11383846
> 
> 赞同：0
> 
> 时间：2012-07-08T14:22:03.500
> 
> 标签：java, partitioning, bigdata

我有一个列表列表，其索引达到数百万。可以说列表中的每个 od 列表都是文本的一个句子。我想对这些数据进行分区，以便在不同的线程中进行处理。我曾经`subList`将数据拆分并在不同的线程中发送以进行处理。这是对数据进行分区的标准方法吗？如果没有，你能建议我一些标准的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:59:19.473

只要您不[“从结构上修改”](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList%28int,%20int%29)列表或任何这些子列表，这将起作用。只读处理很好。

还有许多其他“大数据”方法可以处理数以亿计的记录，因为您可能会遇到其他问题：

*   如果您的程序失败（例如 OutOfMemoryError），您可能不想从头开始。
*   您可能想在问题上抛出> 1台机器，此时您无法在单个JVM的内存中共享数据。
*   处理完每个句子后，您是否构建了一些中间结果，然后将其作为步骤 2 进行处理？您可能需要将一系列步骤放在一起，在每个步骤之前重新分区数据。
*   您可能会发现句子太多，无法一次将它们全部放入记忆中。

这种工作的一个真正常见的工具是[Hadoop](http://en.wikipedia.org/wiki/Apache_Hadoop)。您可以将数据复制到[HDFS](http://hadoop.apache.org/hdfs/)中，对数据运行 map-reduce 作业（或多个作业），然后在完成后将数据从 HDFS 中复制出来。

一种更简单的实现方法是使用数据库并将整数`sentence_id`列的不同范围分配给不同的线程，然后在另一个表中构建输出。

# .net - 无法解析符号 GetSHA256String

> ID：11383850
> 
> 赞同：0
> 
> 时间：2012-07-08T14:22:37.353
> 
> 标签：.net, asp.net-mvc-3, encryption, 3des, tripledes

我正在通过.Net开发一个mvc应用程序，以保护我在web.config中的敏感信息我的模型中有两个函数可以使用Triple DES加密和解密信息，但是我是新手并成功达到在朋友的帮助下到这里，并在这里寻求一些在线帮助。

但是现在当我尝试在我的 PC 中执行代码时，我收到了这个错误：

`Cannot resolve symbol GetSHA256String`

在使用此方法的加密和解密函数中。

我在这里缺少目录吗？请帮我解决这个问题。

```
public static string Encrypt(string Message, string Passphrase, out byte[] iv)
    {
        byte[] Results;
        System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();
        MD5CryptoServiceProvider HashProvider = new MD5CryptoServiceProvider();
        byte[] TDESKey = HashProvider.ComputeHash(UTF8.GetBytes(GetSHA256String(Passphrase)));
        TripleDESCryptoServiceProvider TDESAlgorithm = new TripleDESCryptoServiceProvider();
        TDESAlgorithm.Key = TDESKey;
        TDESAlgorithm.Mode = CipherMode.ECB;
        TDESAlgorithm.Padding = PaddingMode.PKCS7;
        // Capture the randomly generated IV
        iv = TDESAlgorithm.IV;
        byte[] DataToEncrypt = UTF8.GetBytes(Message);
        try
        {
            ICryptoTransform Encryptor = TDESAlgorithm.CreateEncryptor();
            Results = Encryptor.TransformFinalBlock(DataToEncrypt, 0, DataToEncrypt.Length);
        }
        finally
        {
            TDESAlgorithm.Clear();
            HashProvider.Clear();
        }
        return Convert.ToBase64String(Results);
        //return Encoding.UTF8.GetString(Results);
    }

    public static string Decrypt(string Message, string Passphrase, byte[] iv)
    {
        byte[] Results;
        System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();
        MD5CryptoServiceProvider HashProvider = new MD5CryptoServiceProvider();
        byte[] TDESKey = HashProvider.ComputeHash(UTF8.GetBytes(GetSHA256String(Passphrase)));
        TripleDESCryptoServiceProvider TDESAlgorithm = new TripleDESCryptoServiceProvider();
        TDESAlgorithm.Key = TDESKey;
        // Apply the same IV used during encryption
        TDESAlgorithm.IV = iv;
        TDESAlgorithm.Mode = CipherMode.ECB;
        TDESAlgorithm.Padding = PaddingMode.PKCS7;
        try
        {
            byte[] DataToDecrypt = Convert.FromBase64String(Message);
            //byte[] DataToDecrypt = UTF8.GetBytes(Message);
            //byte[] DataToDecrypt = Encoding.UTF8.GetBytes(Message);
            ICryptoTransform Decryptor = TDESAlgorithm.CreateDecryptor();
            Results = Decryptor.TransformFinalBlock(DataToDecrypt, 0, DataToDecrypt.Length); // << ERROR is here.
        }
        finally
        {
            TDESAlgorithm.Clear();
            HashProvider.Clear();
        }
        return UTF8.GetString(Results);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T00:48:42.697

我相信您需要将类似于此方法的内容添加到您的课程中：

```
private string GetSHA256String(string text)
{
    var UE = new UnicodeEncoding();
    var message = UE.GetBytes(text);

    var hashString = new SHA256Managed();
    var hex = string.Empty;

    var hashValue = hashString.ComputeHash(message);
    foreach (byte b in hashValue)
    {
        hex += String.Format("{0:x2}", b);
    }
    return hex;
} 
```

让我知道这是否有用。

# mysql - 日志表的查询优化

> ID：11383851
> 
> 赞同：0
> 
> 时间：2012-07-08T14:22:46.853
> 
> 标签：mysql, sql, query-optimization

无论如何，我都不是 DBA，但我认为我可以拥有简单的数据库。但是，这个查询让我难住了。

我有两张桌子。一个持有我网站上每个页面的名称。另一个为每次访问页面时保存一个记录。我想加入这两个表来找出我每个页面的平均执行时间和总所需时间，这样我就可以确定需要优化的地方。这是我的查询：

```
 SELECT reqtemp.template_path, reqtemp.template_name,
        round(AVG(req.request_execution_time)) AS week_avg_exec_time, COUNT(DISTINCT req.skey) AS week_count, SUM(req.request_execution_time) AS week_total_time,
        round(AVG(req2.request_execution_time)) AS month_avg_exec_time, COUNT(DISTINCT req2.skey) AS month_count, SUM(req2.request_execution_time) AS month_total_time,
        round(AVG(req3.request_execution_time)) AS old_avg_exec_time, COUNT(DISTINCT req3.skey) AS old_count, SUM(req3.request_execution_time) AS old_total_time
 FROM   log_exectime_request_tmp reqtemp
        LEFT JOIN log_exectime_request req ON reqtemp.skey = req.log_exectime_req_tmp_skey
                                          AND req.request_date >= DATE_SUB(Now(), INTERVAL 7 DAY)
        LEFT JOIN log_exectime_request req2 ON reqtemp.skey = req2.log_exectime_req_tmp_skey
                                          AND req2.request_date >= DATE_SUB(Now(), INTERVAL 30 DAY)
        LEFT JOIN log_exectime_request req3 ON reqtemp.skey = req3.log_exectime_req_tmp_skey
                                          AND req3.request_date >= DATE_SUB(Now(), INTERVAL 365 DAY)
                                          AND req3.request_date <= DATE_SUB(Now(), INTERVAL 335 DAY)
 GROUP by reqtemp.template_path, reqtemp.template_name
 ORDER BY week_total_time DESC 
```

据我了解，这应该在几毫秒内运行，较大的表中只有 2000 条记录。至少我希望，因为这最终需要在生产中运行数十万或数百万条记录。相反，我上次尝试它花了 53 分钟。“解释”显示它在 log_exectime_request_tmp 上进行表扫描，这很好，因为该表只有 83 条记录，并且它的两个列都在使用中。其他三个连接使用 skey 和 request_date 上的索引，这似乎也是正确的。

谁能提供一些优化建议？为什么这么小的桌子会导致这样的问题？我的查询构造不佳吗？

表格的 DDL 如下，虽然我找不到任何方法来附加文件来填写数据（我错过了吗？）：

```
 CREATE TABLE `log_exectime_request` 
 (
    `skey` integer (11) NOT NULL AUTO_INCREMENT , 
    `log_exectime_req_tmp_skey` integer (11), 
    `request_date` datetime, 
    `request_execution_time` integer (11), 
    `query_execution_time` integer (11), 
    `template_execution_time` integer (11), 
    `logging_execution_time` integer (11),
    PRIMARY KEY (`skey`)
 ) TYPE=InnoDB CHARACTER SET latin1 COLLATE latin1_swedish_ci;

 ALTER TABLE `elegantgalleries`.`log_exectime_request` ADD INDEX `date_tempSkey` (`log_exectime_req_tmp_skey`,`request_date` );

 CREATE TABLE `log_exectime_request_tmp` 
 (
    `skey` integer (11) NOT NULL AUTO_INCREMENT , 
    `template_path` varchar (500), 
    `template_name` varchar (250),
    PRIMARY KEY (`skey`)
 ) TYPE=InnoDB CHARACTER SET latin1 COLLATE latin1_swedish_ci; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:08:24.100

当问这样的问题时，你应该总是提到你正在使用什么数据库。不同的数据库具有非常不同的性能特征。

如果我正确理解了查询，则需要很长时间，因为您不需要进行如此多的连接。您似乎正在尝试将三个不同组中的请求相加。. . 前一周、上个月和一年前（尽管奇怪的是您使用的是 335 到 365 天而不是 365 天到 395 天）。

我认为您想要的查询看起来更像：

```
SELECT reqtemp.template_path, reqtemp.template_name,
       round(avg(case when req.request_date >= DATE_SUB(Now(), INTERVAL 7 DAY)
                      then req.request_execution_time
                 end)
            ) as week_avg_exec_time,
       COUNT(DISTINCT case when req.request_date >= DATE_SUB(Now(), INTERVAL 7 DAY)
                           then req.skey
             end) AS week_count,
       SUM(case when req.request_date >= DATE_SUB(Now(), INTERVAL 7 DAY)
                then req.request_execution_time
          ) AS month_total_time,
       round(avg(case when req.request_date >= DATE_SUB(Now(), INTERVAL 30 DAY)
                      then req.request_execution_time
                 end)
            ) as month_avg_exec_time,
       COUNT(DISTINCT case when req.request_date >= DATE_SUB(Now(), INTERVAL 30 DAY)
                           then req.skey
             end) AS week_count,
       SUM(case when req.request_date >= DATE_SUB(Now(), INTERVAL 30 DAY)
                then req.request_execution_time
          ) AS month_total_time,
       round(avg(case when req.request_date >= DATE_SUB(Now(), INTERVAL 365 DAY) AND
                           req.request_date <= DATE_SUB(Now(), INTERVAL 335 DAY)
                      then req.request_execution_time
                 end)
            ) as old_avg_exec_time,
       COUNT(DISTINCT case when req.request_date >= DATE_SUB(Now(), INTERVAL 365 DAY) AND
                                req.request_date <= DATE_SUB(Now(), INTERVAL 335 DAY)
                           then req.skey
             end) AS old_count,
       SUM(case when req.request_date >= DATE_SUB(Now(), INTERVAL 365 DAY) AND
                     req.request_date <= DATE_SUB(Now(), INTERVAL 335 DAY)
                then req.request_execution_time
          ) AS old_total_time
FROM log_exectime_request_tmp reqtemp LEFT JOIN
     log_exectime_request req
     ON reqtemp.skey = req.log_exectime_req_tmp_skey
GROUP by reqtemp.template_path, reqtemp.template_name
ORDER BY week_total_time DESC 
```

您只需加入 req 表一次即可获取请求日期。然后，您可以使用 case 语句将时间分成不同的时期。

您的原始查询在每个时间段的所有记录之间进行交叉连接。尽管在给定的时间段内可能只有几百或几千个，但当你交叉加入它们时，你会得到数百万或数十亿行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:45:07.413

由于您在 request_date 上进行过滤，因此请尝试仅使用该列添加索引。

# java - 如何比较我输入的字符串并使用矢量 Java 比较文本文件中的字符串？

> ID：11383852
> 
> 赞同：1
> 
> 时间：2012-07-08T14:23:18.790
> 
> 标签：java, string, vector

假设文本文件包含：

> 他是个男孩 。
> 她生病了 。
> 阿里在玩。
> 我们正在吃 。
> 狗乱叫 。
> 他和他的兄弟正在奔跑。
> 他在玩。

我想通过单独比较字符串如下：

> 他是
> 一个
> 男孩
> 男孩。
> 她
> 病
> 了。

等等。

我已经把上面所有的词都放到了一个向量中。如何与我输入的字符串进行比较？

假设方式是这样的： 输入字符串：`He is a boy .`

`He is`从输入字符串中，并希望通过找出它在向量中出现的次数来与向量进行比较。

这是我尝试过的：

```
try{
    // Open the file that is the first 
    // command line parameter
    FileInputStream fstream = new FileInputStream("textfile.txt");

    // Get the object of DataInputStream
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String strLine;
    int lineNum = 0;

    Vector text= new Vector();
    Enumeration vtext = text.elements();

    //Read File Line By Line
    while ((strLine = br.readLine()) != null)   {
        // Print the content on the console
        //System.out.println (strLine);
        lineNum++;

        String[] words = strLine.split("\\s+");

        //System.out.println(words[0]);
        for (int i = 0, l = words.length; i + 1 < l; i++){
            text.addElement(words[i] + " " + words[i + 1]);
        }       
    }
    String str23 = "She is"; 
    while(vtext.hasMoreElements()){
        String yy = "He is";
        if(text.contains(yy)){
            System.out.println("Vector contains 3."); 
        }
        System.out.print(vtext.nextElement() + " "); 
        System.out.println(); 
    }       
    System.out.println(text);
    System.out.println(lineNum);

    //Close the input stream
    in.close();
}catch (Exception e){  //Catch exception if any
    System.err.println("Error: " + e.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:49:32.550

这可能是浪费时间来回答 - 但这里是：

我将您的循环更改为：

```
String str23 = "She is"; 
int countOfHeIs = 0;
String yy = "He is";
while(vtext.hasMoreElements()){

    if (vtext.nextElement().equals(yy))
    {
        countOfHeIs++;
    }
    if(text.contains(yy)){
        System.out.println("Vector contains 3."); 
    }
    System.out.print(vtext.nextElement() + " "); 
    System.out.println(); 
}       
System.out.println(text);
System.out.println(lineNum);
System.out.printf("'%s' appears %d times\n", yy, countOfHeIs); 
```

该方法`contains`不计算出场次数——它只会给你一个是/否的指示——你应该自己计算出场次数。

这不是您问题的最佳解决方案 - 因为 a`Vector`不是这里的最佳选择。我建议使用 a`Map<String,Integer>`来跟踪每个字符串的出现次数。

# c# - 在服务的 OnStart 代码块中启动进程失败

> ID：11383854
> 
> 赞同：0
> 
> 时间：2012-07-08T14:23:39.507
> 
> 标签：c#

我只想打电话

```
Process.Start("notepad.exe"); 
```

服务何时启动；但它根本不起作用。在我选择在 Windows 服务管理器中启动服务后，没有立即调用记事本。

十分感谢。

[**更新**]

在登录选项卡中勾选以允许交互式桌面后，我使其工作。但我不知道这到底是什么意思？如果它总是要求我接受在交互式桌面检测面板中查看消息，我如何安排在任何计算机上运行任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T14:54:33.937

Windows 服务与标准进程不同，默认情况下它不能与用户桌面交互（这是 Windows 操作系统的规则），因此要启动一个进程并允许它与用户桌面交互，您必须标记与桌面交互选项...

请记住，从 Windows Vista 开始，服务在会话 0 下运行，每次服务尝试启动进程时，都会向用户显示一个面板，让用户选择是否要运行该进程；要克服这个限制（要求确认的面板），唯一的方法是直接使用Windows API的[CreateProcessAsUser函数从服务启动进程......](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx)

看看我之前开发的这个函数，它使用了[CreateProcessAsUser](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx) API，即使在 Vista/7 中也无需询问任何内容即可从服务启动进程：

```
 /// <summary>
    /// LaunchProcess As User Overloaded for Window Mode 
    /// </summary>
    /// <param name="cmdLine"></param>
    /// <param name="token"></param>
    /// <param name="envBlock"></param>
    /// <param name="WindowMode"></param>
    /// <returns></returns>
    private static bool LaunchProcessAsUser(string cmdLine, IntPtr token, IntPtr envBlock,uint WindowMode)
    {
        bool result = false;

        PROCESS_INFORMATION pi = new PROCESS_INFORMATION();
        SECURITY_ATTRIBUTES saProcess = new SECURITY_ATTRIBUTES();
        SECURITY_ATTRIBUTES saThread = new SECURITY_ATTRIBUTES();
        saProcess.nLength = (uint)Marshal.SizeOf(saProcess);
        saThread.nLength = (uint)Marshal.SizeOf(saThread);

        STARTUPINFO si = new STARTUPINFO();
        si.cb = (uint)Marshal.SizeOf(si);

        //if this member is NULL, the new process inherits the desktop
        //and window station of its parent process. If this member is
        //an empty string, the process does not inherit the desktop and
        //window station of its parent process; instead, the system
        //determines if a new desktop and window station need to be created.
        //If the impersonated user already has a desktop, the system uses the
        //existing desktop.

        si.lpDesktop = @"WinSta0\Default"; //Default Vista/7 Desktop Session
        si.dwFlags = STARTF_USESHOWWINDOW | STARTF_FORCEONFEEDBACK;

        //Check the Startup Mode of the Process 
        if (WindowMode == 1)
            si.wShowWindow = SW_SHOW;
        else if (WindowMode == 2)
        { //Do Nothing
        }
        else if (WindowMode == 3)
            si.wShowWindow = 0; //Hide Window 
        else if (WindowMode == 4)
            si.wShowWindow = 3; //Maximize Window
        else if (WindowMode == 5)
            si.wShowWindow = 6; //Minimize Window
        else
            si.wShowWindow = SW_SHOW;

        //Set other si properties as required.
        result = CreateProcessAsUser(
        token,
        null,
        cmdLine,
        ref saProcess,
        ref saThread,
        false,
        CREATE_UNICODE_ENVIRONMENT,
        envBlock,
        null,
        ref si,
        out pi);

        if (result == false)
        {
            int error = Marshal.GetLastWin32Error();
            string message = String.Format("CreateProcessAsUser Error: {0}", error);
            Debug.WriteLine(message);

        }

        return result;
    } 
```

# maven - Maven - 从特定工件中排除资源

> ID：11383857
> 
> 赞同：0
> 
> 时间：2012-07-08T14:24:00.360
> 
> 标签：maven, resourcebundle

我是 maven 的新手，发现自己陷入了一些真正困扰我的事情。

我有一个多模块项目，我的父 pom.xml 包含以下插件：

```
 <plugin>
            <artifactId>maven-remote-resources-plugin</artifactId>
            <executions>
                <execution>
                    <id>process-remote-resources</id>
                    <goals>
                        <goal>process</goal>
                    </goals>
                    <configuration>
                        <resourceBundles>
                            <resourceBundle>
                                ${shared.resources.version}
                            </resourceBundle>
                        </resourceBundles>
                        <includes>
                            <include>version.info</include>
                        </includes>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

此代码生成一个 version.info 文件并将它们放在我的每个模块 jar 文件中。我想知道是否可以让这段代码为 3 个模块中的 2 个模块创建 version.info 文件。

例如，如果我有模块：A、B 和 C。我希望 version.info 文件位于 A 和 B 中，但不在 C 中。我希望我能很好地解释自己，以防万一，请告诉我。

提前致谢， 梅尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:24:34.640

最好的解决方案是将此插件配置移动到父 pom 的 project/build/pluginManagement 元素：

```
<pluginManagement>
    <plugins>
        <plugin>
            <artifactId>maven-remote-resources-plugin</artifactId>
            <executions>
                <execution>
                    <id>process-remote-resources</id>
                    <goals>
                        <goal>process</goal>
                    </goals>
                    <configuration>
                        <resourceBundles>
                           <resourceBundle>
                            ${shared.resources.version}
                           </resourceBundle>
                        </resourceBundles>
                        <includes>
                           <include>version.info</include>
                        </includes>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</pluginManagement> 
```

并在模块 poms 中的 project/build/plugins 中调用它：

```
<plugins>
    <plugin>
        <artifactId>maven-remote-resources-plugin</artifactId>
    </plugin>
</plugins> 
```

如果不允许对父 pom 进行这种重构，则使用 skip 设置为 true 覆盖插件配置或使用 none 阶段禁用不需要的插件调用： [http ://thomaswabner.wordpress.com/2010/02/16/howto-disable-inherited -maven插件/](http://thomaswabner.wordpress.com/2010/02/16/howto-disable-inherited-maven-plugin/)

# java - Java整数部分填充

> ID：11383859
> 
> 赞同：0
> 
> 时间：2012-07-08T14:24:13.417
> 
> 标签：java, numbers, format, pad

抱歉，我最初想在 php [PHP 整数部分填充](https://stackoverflow.com/questions/11383597/php-java-integer-part-padding)中执行此操作，但意识到我将在 Java 的另一部分代码中执行此操作

所以我需要用至少 2 个字符的整数部分来格式化数字

2.11 -> 02.11
22.11 -> 22.11
222.11 -> 222.11
2.1111121 -> 02.1111121

```
double x=2.11; 
System.out.println(String.format("%08.5f", x)); 
```

可以做到，但是右边的尾随零很烦人，我想要一个任意大的浮动部分

```
String.format("%02d%s", (int) x, String.valueOf(x-(int) x).substring(1)) 
```

完全丑陋且不精确（给出02.1099 ...）

```
new DecimalFormat("00.#############").format(x) 
```

将截断浮动部分

感谢任何更好的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:42:18.583

the best I could come with is

```
public static String pad(String s){
    String[] p = s.split("\\.");
    if (2 == p.length){
        return String.format("%02d.%s", Integer.parseInt(p[0]), p[1]);
    }
    return String.format("%02d", Integer.parseInt(p[0]));
} 
```

pad(String.valueOf(1.11111118)) -> 01.11111118

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-08T15:24:50.417

这是使用 DecimalFormat 的单行代码：

```
new DecimalFormat("00." + (x + "").replaceAll(".", "#")).format(x) 
```

它将您的小数格式化为 00.#############...，其中 "#############..." 的长度来自长度你的小数点（“#”s 超出什么都不做）。

You can use `String.valueOf(x)` in place of `(x + "")` if you wish.

# objective-c - AFNetworking HTTPRequestOperation 需要从完成块设置数组，但这不起作用？

> ID：11383863
> 
> 赞同：1
> 
> 时间：2012-07-08T14:25:03.590
> 
> 标签：objective-c, ios, afnetworking

我正在使用 AFNetworking 和 AFHTTPRequestOperation 从 Web 服务中提取 XML 数据。这工作正常，我得到了我需要的数据，但我需要将这些数据拆分为对象并用这些数据初始化一个 NSMutableArray。这在完成块中工作，但就在我在我的方法中返回数组之前，数据消失了吗？我该怎么做呢？

这是我的一些代码：

```
NSMutableArray *result = [[NSMutableArray alloc] init];    
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[httpClient registerHTTPOperationClass:[AFHTTPRequestOperation class]];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSString* response = [operation responseString];
    NSData* xmlData = [response dataUsingEncoding:NSUTF8StringEncoding];
    NSError *xmlError;
    GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:xmlData options:0 error:&xmlError];
    NSArray *allElements = [doc.rootElement elementsForName:@"Misc"];
    for (GDataXMLElement *current in allElements)
    {
        NSString *titel;
        NSString *tekst;

        NSArray *titels = [current elementsForName:@"Titel"];
        if(titels.count > 0)
        {
            GDataXMLElement *firstTitel = (GDataXMLElement *) [titels objectAtIndex:0];
            titel = firstTitel.stringValue;
        } else continue;

        NSArray *teksts = [current elementsForName:@"Tekst"];
        if(teksts.count > 0)
        {
            GDataXMLElement *firstTekst = (GDataXMLElement *) [teksts objectAtIndex:0];
            tekst = firstTekst.stringValue;
        } else continue;

        HVMGUniversalItem *item = [[HVMGUniversalItem alloc] initWithTitel:titel AndTekst:tekst];
        [result addObject:item];
    }
    NSLog(@"%i", result.count);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error: %@", [operation error]);
}];

[operation start];
NSLog(@"%i", result.count);
return result; 
```

我究竟做错了什么？为什么返回时数组中没有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:28:43.317

> 为什么返回时数组中没有数据？

因为**AFNetworking**使用异步模式。所以在操作完成之前会执行返回码。

您需要使用不同的方法或遵循[AFNetworking 可以同步返回数据（在块内）吗？](https://stackoverflow.com/questions/7969865/can-afnetworking-return-data-synchronously-inside-a-block/7970037#7970037). 后者是不鼓励的。

一个解决方案可能是：

-> 在您的课程中创建一个`NSOperationQueue`包含您的操作的课程。将其创建为您的类的属性，例如。

```
@property (nonatomic, strong, readonly) NSOperationQueue* downloadQueue;

- (NSOperationQueue*)downloadQueue
{
    if(downloadQueue) return downloadQueue;

    downloadQueue = // alloc init here
} 
```

-> 为你的数组创建一个属性（也合成它）

```
@property (nonatomic, strong) NSMutableArray* result; 
```

-> 将您的代码包装在特定方法中，例如`doOperation`.

```
self.result = [[NSMutableArray alloc] init];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[httpClient registerHTTPOperationClass:[AFHTTPRequestOperation class]];

__weak YourClass* selfBlock = self; 

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSString* response = [operation responseString];
    NSData* xmlData = [response dataUsingEncoding:NSUTF8StringEncoding];
    NSError *xmlError;
    GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:xmlData options:0 error:&xmlError];
    NSArray *allElements = [doc.rootElement elementsForName:@"Misc"];
    for (GDataXMLElement *current in allElements)
    {
        NSString *titel;
        NSString *tekst;

        NSArray *titels = [current elementsForName:@"Titel"];
        if(titels.count > 0)
        {
            GDataXMLElement *firstTitel = (GDataXMLElement *) [titels objectAtIndex:0];
            titel = firstTitel.stringValue;
        } else continue;

        NSArray *teksts = [current elementsForName:@"Tekst"];
        if(teksts.count > 0)
        {
            GDataXMLElement *firstTekst = (GDataXMLElement *) [teksts objectAtIndex:0];
            tekst = firstTekst.stringValue;
        } else continue;

        HVMGUniversalItem *item = [[HVMGUniversalItem alloc] initWithTitel:titel AndTekst:tekst];
        [selfBlock.result addObject:item];
    }
    NSLog(@"%i", result.count);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error: %@", [operation error]);
}];

[downloadQueue addOperation:operation]; 
```

-> 如果您需要通知`result`有对象发送通知，请使用委托模式等...

希望有帮助。

# php - 在 Yii 中生成 gii 代码后，如何将字段添加到模型中？

> ID：11383869
> 
> 赞同：3
> 
> 时间：2012-07-08T14:25:41.997
> 
> 标签：php, mysql, yii

**情况：**
昨天我使用gii为我的数据库表（mysql）生成代码。我意识到我的表需要一个新字段。

**问题：**
在数据库表中添加新字段的约定是什么？在mysql中手动添加新表后我需要做的事情清单吗？或者是否有通过 gii 的一键式解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-08T14:50:32.580

只需使用您喜欢的方法将该字段添加到数据库中。

就您生成的代码而言，如果您没有修改 gii 生成的文件，您可以简单地重新生成它们，但如果您已修改，只需将该字段的新逻辑添加到相关部分，您可以使用 rules()、search()、标签等...

您也可以在 Gii 中重新生成内容，您可以从 Gii 预览中复制粘贴相关部分（单击文件名）。

Gii 设置为不覆盖您的文件，您可以开始新的一代并自己查看差异。gii中还有一个diff方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-15T19:10:33.833

为每个生成的代码制作一个差异是一件痛苦的事情。我更喜欢使用 Giix，因为它已经将生成的基础与您的自定义代码分开（引用：*分离的模型和基础模型。可以重新生成基础模型而不覆盖模型中的代码。*，请参阅[http://www.yiiframework.com/extension/ giix/#hh8](http://www.yiiframework.com/extension/giix/#hh8) )

# php - 如何捕获事件 ajax 发送到服务器，而不是等待服务器响应

> ID：11383873
> 
> 赞同：-4
> 
> 时间：2012-07-08T14:26:40.047
> 
> 标签：php, jquery, ajax, events

我的问题是，当用户点击网站上的链接时，我使用 jquery 来捕捉事件点击和 ajax 来更新数据库，如果我这样做，由于等待响应表单服务器，这将需要一些时间

```
$.ajax({
success: function() {
...
window.href = link;
}
}); 
```

我想要类似的东西

```
$.ajax({
alreadysend: function() {
...
}
}); 
```

我阅读了文档 ajax，但我找不到任何解决我的问题的方法。

**编辑：我解决了我的问题，我需要在 jQuery 上努力工作，谢谢大家**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T14:30:23.553

默认情况下它会这样做，因为 Ajax 是异步的！如果您希望无论服务器是否到达并响应都执行代码，只需将执行代码放在 Ajax 块之后。

另一方面，如果您想知道用户是否已经进行了提交操作，您可以使用应用程序范围变量来切换调用和完成事件。（即当用户发起 Ajax 调用时设置为 true。完成时设置为 false。禁止调用我已经为 true）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:29:36.440

`$.ajax`为什么不直接在行后调用你想调用的函数呢？像这样：

```
$.ajax({ ... });
do_things(); 
```

**编辑**如果你想做一个*重定向*，你必须等待 AJAX 调用回来以确保它成功与否。如果您不关心它是否成功，而只关心它进行调用，您可以将它放在 $.ajax 调用之后的行中，因为调用是异步发生的。无论如何，我们需要更多关于您想要达到的目标的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T14:30:40.453

只需在调用 $.ajax 之后调用您的代码：

```
$.ajax({success: function(){
    // done after server response
}});

// do something immediately after 
```

Ajax 调用是异步的，因此您的脚本不会被阻塞。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T14:38:20.147

我不是 100% 确定你想要做什么，但是如果你想在你的代码继续之前等待 ajax 调用返回，你可以通过设置`async`为 false 来设置它，尽管值得注意的是有点适得其反，在 jQuery 1.8 中已被弃用。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

> 默认情况下，所有请求都是异步发送的（即默认设置为true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。从 jQuery 1.8 开始，不推荐使用 async: false 。

# ios - 在 iOS 上更改 Admob BannerView 的位置

> ID：11383875
> 
> 赞同：0
> 
> 时间：2012-07-08T14:27:40.747
> 
> 标签：ios, admob

我的 AdMob 横幅已全部设置并正常工作，但我在定位它们时遇到了一些问题。

这是目前加载横幅视图的代码，但我无法确定如何移动它（假设位置为 100、100）

任何人都可以帮忙吗？

问候大卫

```
 bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeFullBanner];
bannerView_.adUnitID = @"a14ff98b8ab890d";
bannerView_.rootViewController = self;
[self.view addSubview:bannerView_];
  [bannerView_ loadRequest:[GADRequest request]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T14:29:52.510

```
[bannerView_ setFrame:CGRectMake(100,
                                 100,
                                 bannerView_.bounds.size.width,            
                                 bannerView_.bounds.size.height)]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-23T08:27:11.653

您可以添加`origin`到您的`bannerView_`

```
CGPoint origin = CGPointMake(0.0, 0.0); //Update the X and Y origin to what you need, ex: (0.0, 204.0)
bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner origin:origin]; 
```

# c++ - c ++类继承与函数

> ID：11383877
> 
> 赞同：2
> 
> 时间：2012-07-08T14:28:05.257
> 
> 标签：c++, inheritance, pointers, virtual-functions

我一直在为考试学习 C++，我以为我已经理解了大部分 C++ 常见的误解，但我在过去的考试中遇到了一个让我发疯的练习，它以某种方式结合了虚拟方法和继承我似乎不明白这里是代码：

```
 #include <iostream>

    class B;

class A {
    public:
    virtual A* set(A* a) = 0;
};

class B : public A {
    public:
    virtual A* set(B* b) {
            std::cout << "set1 has been called" << std::endl;
            b = this;
            return b;
    }

    virtual B* set(A* a) {
            std::cout << "set2 has been called" << std::endl;
            a = this;
            return this;
    }
};

int main(int argc, char *argv[]) {
    B *b = new B();
    A *a = b->set(b);
    a = b->set(a);
    a = a->set(b);
    a = a->set(a);
    return 0;
} 
```

输出是

```
set1 has been called
set2 has been called
set2 has been called
set2 has been called 
```

从我收集到的第一个调用 (b->set(b) ) 调用 B 类的第一个方法并返回 b 本身，然后这个 objectref 被强制转换为 A 意味着现在对象 b 现在是 A 类型？所以我有 A *a = A *b; 现在对我来说应该调用 A 集是有意义的，因为我脑子里有这种情况， `objectoftypeA->set(objectoftypeA)`所以我不应该研究虚拟方法，因为这两个对象是基类？

无论如何，正如您所看到的，我有很多困惑，所以如果我犯了愚蠢的错误，请多多包涵.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T14:38:18.600

该程序演示了如何查找成员函数。对象的静态类型决定了将被调用的函数重载：它执行名称查找。然后动态类型确定被调用的虚拟覆盖。

也许关键是同名的不同overlods实际上是不同的功能。

由于`A`只有一个成员，因此无论参数是什么，`set`当您调用 时，只会发生一件事。`a->set()`但是当您调用 时`b->set()`，有几个潜在的功能，并且选择了最好的一个。

由于`B::set`永远不会被覆盖，因此无论是否覆盖都没有区别`virtual`。`virtual`同一班级的成员根本不互相交谈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T16:00:39.757

Potatoswatter 是对的，但我想我有一点“更清楚”的解释。我认为 OP 对动态类型查找与编译时在运行时发生的情况以及向上转换自动发生时发生的情况以及不发生时发生的情况感到困惑。

首先，返回类型不会影响调用哪个重载。你可能知道这一点，但它需要重复。返回类型不匹配会在编译时导致错误，但不会在运行时导致错误，并且不会影响调用哪个重载。另外值得注意的是，只要它是兼容的指针类型（在一个层次结构中），返回一个指针就不会“改变”它。它仍然是同一个指针，与将浮点数转换为整数不同，后者有实际变化。

现在来一一处理电话。这是我对过程的理解，不一定是什么标准，或者“真正”发生了什么。

当您调用`b->set(b)`编译器（不是运行时）时，会“寻找一个名为*set*的方法，其参数为*指向 B*的参数”，它会找到输出 set1 的方法。它是虚拟的，所以有代码检查类是否指向更低的对象，但没有，所以它只是调用它，并将`this`指针返回到`a`.

现在你打电话`b->set(a)`。再次是编译器“是否*b*有一个*指向 A*的重载？” 是的，它确实如此，所以它调用了“set2”方法。是编译器看到 an `A*`，因此此时调用是“确定的”。即使指针指向 B 类型的对象，编译器也不知道，也不关心。因此，决定采用哪个重载方法的是*参数的编译时类型。*从那时起，在层次结构中，虚拟被采用的位置是`this`指针的底层类型，但只是向下。

这是一个不同的情况。试试这个：`b->set(dynamic_cast<B*>(a))` 这应该调用“set1”方法，因为编译器肯定会有一个指向 B 的指针（即使它是`nullptr`）。

现在是第三种情况：`a->set(b)`. 这里发生的是编译器说“只有一种`set`方法，所以参数可以向上转换或构造为该类型吗？” 答案是肯定的，`B`就像`A`. 所以这种转换是透明地发生的，编译器为 A 类型的 set 方法调用 ABSTRACT 调度程序。这发生在编译时，在指针的“真实”类型**之前。**`a`然后在运行时，程序“遍历虚拟”并找到最低的一个，`B->set(A*)`即发出“set2”的方法。不使用参数所指向的实际类型，仅使用箭头运算符左侧的类型，并且仅确定层次结构的向下程度。

第四种情况又是第三种。参数的类型（指针，而不是指向的 whta）是兼容的，所以它和以前一样。如果您想对此进行戏剧性的演示，请尝试以下操作：

```
a->set((A*)nullptr) // prints "set2 has been called"
b->set((A*)nullptr) // prints "set2 has been called"
b->set((B*)nullptr) // prints "set1 has been called" 
```

参数指向的基础类型不影响动态调度。只有它们的“表面”类型会影响调用的重载。

# android - 在异步任务中解析 JSON 时强制关闭

> ID：11383880
> 
> 赞同：-2
> 
> 时间：2012-07-08T14:28:32.463
> 
> 标签：android, json, listview

应用程序在几秒钟后关闭。我可以在 logcat 中看到 JSON 值，但结果在 listview 中没有更新。

我的主要活动类代码如下：

```
public class MainActivity extends ListActivity {
    private ProgressDialog dialog;
    private static String url="url here";

    private static final String BASE_TAG="base";
    private static final String RATES_TAG="rates";

    JSONParser jParser=new JSONParser();

    ArrayList<HashMap<String,String>> currentRates;

    JSONArray rates=null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        currentRates=new ArrayList<HashMap<String,String>>();

        new getRates().execute();

        ListView lv=getListView();

    }

    public class getRates extends AsyncTask<String,String,String>{

    @Override
    protected void onPreExecute(){
        super.onPreExecute();
        dialog=new ProgressDialog(MainActivity.this);
        dialog.setMessage("Please wait");
        dialog.setIndeterminate(false);
        dialog.setCancelable(false);
        dialog.show();
    }

        @Override
        protected String doInBackground(String... args) {

List<NameValuePair> params=new ArrayList<NameValuePair>();

JSONObject json=jParser.makeHttpRequest(url,"GET",params);

Log.d("Current Rates:",json.toString());

try {
    rates=json.getJSONArray(RATES_TAG);

    for(int i=0;i<rates.length();i++){
        JSONObject c=rates.getJSONObject(i);

        String rates=c.getString(RATES_TAG);

        HashMap<String,String>map=new HashMap<String,String>();

        map.put(RATES_TAG, rates);

        currentRates.add(map);
    }
} catch (JSONException e){
    e.printStackTrace();
}

            return null;
        }

        protected void onPostExecute(String url){
            dialog.dismiss();

            runOnUiThread(new Runnable(){
                public void run(){
                    ListAdapter adapter=new SimpleAdapter(MainActivity.this, currentRates ,R.layout.rates_item,new String[]{RATES_TAG},new int[]{R.id.rates});

                    setListAdapter(adapter);
                }
            });
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是我的 logcat 报告：

```
> 07-08 19:46:13.103: E/AndroidRuntime(331): FATAL EXCEPTION: AsyncTask
> #1 07-08 19:46:13.103: E/AndroidRuntime(331): java.lang.RuntimeException: An error occured while executing
> doInBackground() 07-08 19:46:13.103: E/AndroidRuntime(331):   at
> android.os.AsyncTask$3.done(AsyncTask.java:200) 07-08 19:46:13.103:
> E/AndroidRuntime(331):    at
> java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
> 07-08 19:46:13.103: E/AndroidRuntime(331):    at
> java.util.concurrent.FutureTask.setException(FutureTask.java:125)
> 07-08 19:46:13.103: E/AndroidRuntime(331):    at
> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
> 07-08 19:46:13.103: E/AndroidRuntime(331):    at
> java.util.concurrent.FutureTask.run(FutureTask.java:138) 07-08
> 19:46:13.103: E/AndroidRuntime(331):  at
> java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
> 07-08 19:46:13.103: E/AndroidRuntime(331):    at
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
> 07-08 19:46:13.103: E/AndroidRuntime(331):    at
> java.lang.Thread.run(Thread.java:1019) 07-08 19:46:13.103:
> E/AndroidRuntime(331): Caused by: java.lang.NullPointerException 07-08
> 19:46:13.103: E/AndroidRuntime(331):  at
> com.razzil.currency.MainActivity$getRates.doInBackground(MainActivity.java:69)
> 07-08 19:46:13.103: E/AndroidRuntime(331):    at
> com.razzil.currency.MainActivity$getRates.doInBackground(MainActivity.java:1)
> 07-08 19:46:13.103: E/AndroidRuntime(331):    at
> android.os.AsyncTask$2.call(AsyncTask.java:185) 07-08 19:46:13.103:
> E/AndroidRuntime(331):    at
> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
> 07-08 19:46:13.103: E/AndroidRuntime(331):    ... 4 more 07-08
> 19:46:15.372: E/WindowManager(331): Activity
> com.razzil.currency.MainActivity has leaked window
> com.android.internal.policy.impl.PhoneWindow$DecorView@40520830 that
> was originally added here 07-08 19:46:15.372: E/WindowManager(331):
> android.view.WindowLeaked: Activity com.razzil.currency.MainActivity
> has leaked window
> com.android.internal.policy.impl.PhoneWindow$DecorView@40520830 that
> was originally added here 07-08 19:46:15.372: E/WindowManager(331):
>   at android.view.ViewRoot.<init>(ViewRoot.java:258) 07-08
> 19:46:15.372: E/WindowManager(331):   at
> android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
> 07-08 19:46:15.372: E/WindowManager(331):     at
> android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
> 07-08 19:46:15.372: E/WindowManager(331):     at
> android.view.Window$LocalWindowManager.addView(Window.java:424) 07-08
> 19:46:15.372: E/WindowManager(331):   at
> android.app.Dialog.show(Dialog.java:241) 07-08 19:46:15.372:
> E/WindowManager(331):     at
> com.razzil.currency.MainActivity$getRates.onPreExecute(MainActivity.java:59)
> 07-08 19:46:15.372: E/WindowManager(331):     at
> android.os.AsyncTask.execute(AsyncTask.java:391) 07-08 19:46:15.372:
> E/WindowManager(331):     at
> com.razzil.currency.MainActivity.onCreate(MainActivity.java:43) 07-08
> 19:46:15.372: E/WindowManager(331):   at
> android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
> 07-08 19:46:15.372: E/WindowManager(331):     at
> android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
> 07-08 19:46:15.372: E/WindowManager(331):     at
> android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
> 07-08 19:46:15.372: E/WindowManager(331):     at
> android.app.ActivityThread.access$1500(ActivityThread.java:117) 07-08
> 19:46:15.372: E/WindowManager(331):   at
> android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
> 07-08 19:46:15.372: E/WindowManager(331):     at
> android.os.Handler.dispatchMessage(Handler.java:99) 07-08
> 19:46:15.372: E/WindowManager(331):   at
> android.os.Looper.loop(Looper.java:123) 07-08 19:46:15.372:
> E/WindowManager(331):     at
> android.app.ActivityThread.main(ActivityThread.java:3683) 07-08
> 19:46:15.372: E/WindowManager(331):   at
> java.lang.reflect.Method.invokeNative(Native Method) 07-08
> 19:46:15.372: E/WindowManager(331):   at
> java.lang.reflect.Method.invoke(Method.java:507) 07-08 19:46:15.372:
> E/WindowManager(331):     at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
> 07-08 19:46:15.372: E/WindowManager(331):     at
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 07-08
> 19:46:15.372: E/WindowManager(331):   at
> dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:44:49.517

您在 MainActivity**第 69 行中点击****NULLPOINTEREXCEPTION**。它在 doInBackground 方法中。调试它并查看什么值为 null 并导致问题。

 **```
> java.lang.Thread.run(Thread.java:1019) 07-08 19:46:13.103:
> E/AndroidRuntime(331): Caused by: java.lang.**NullPointerException** 07-08
> 19:46:13.103: E/AndroidRuntime(331):  at
> com.razzil.currency.MainActivity$getRates.doInBackground(MainActivity.java:69)
> 07-08 19:46:13.103: E/AndroidRuntime(331):    at
> com.razzil.currency.MainActivity$getRates.doInBackground(MainActivity.java:1)
> 07-08 19:46:13.103: E/AndroidRuntime(331): 
```**

# php - 哪种 paypal 帐户类型适用于 istockphoto 等积分购买？

> ID：11383884
> 
> 赞同：0
> 
> 时间：2012-07-08T14:28:57.690
> 
> 标签：php, paypal, e-commerce

我正在尝试使用贝宝构建贝宝支付和信用卡支付系统。我正在尝试建立的网站使用像 istockphoto 这样的信用系统，它是在 php 中。我从[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/library_documentation#wps](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/library_documentation#wps)看到有几种付款方式，但不知道是哪一种使用。Express Checkout、PayPal Payments Standard 或 Digital Goods Integration 哪个更好？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:53:57.497

我认为最好询问贝宝员工，因为他们知道得更好，但根据我的经验，使用贝宝结账的标准方式是许多国家和货币支持的支付标准，但不要等待信用卡结账（虚拟终端），因为在在有限的国家/地区，您应该向国际支付网关提供商索取此类功能。

希望它有所帮助

# c# - Sanitizer.GetSafeHtmlFragment 是否应该删除 元素？

> ID：11383891
> 
> 赞同：6
> 
> 时间：2012-07-08T14:29:53.633
> 
> 标签：c#, antixsslibrary

MS 的 AntiXSS (v4.2.1)`Sanitizer.GetSafeHtmlFragment(string)`方法正在从我的输入中删除`<br>`和标记。`<br />`这应该发生吗？有办法解决吗？

它似乎也在删除`\n`和字符，所以在消毒剂完成工作后`\r`我无法打电话。`Replace()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T15:57:06.020

4.2.x 版本的动机是在 HTML sanitizer 中精确检测到一个安全漏洞。关于这个事实的更多信息：

*   [Microsoft 安全公告 MS12-007 - 重要](http://technet.microsoft.com/en-us/security/bulletin/ms12-007)
*   [Microsoft Anti-XSS 库绕过 (MS12-007)](http://blog.watchfire.com/wfblog/2012/01/microsoft-anti-xss-library-bypass.html)

然而，似乎除了修复漏洞之外，消毒剂被更改为更具侵略性，几乎无法使用。[在 WPL CodePlex 站点（ GetSafeHtmlFragment 替换所有 html 标记](http://wpl.codeplex.com/workitem/17246)）中有一个关于此事实的报告问题。

如果您的问题仅与`<br>`标签有关，并且您想坚持使用 AntiXSS sanitizer，那么您可以实施一个丑陋的解决方法，即预处理您的输入，然后对 sanitizer 的结果进行后处理。

像这样的东西（代码仅用于说明目的）：

```
static void Main(string[] args)
{
    string input = "<br>Hello<br/>World!";

    input = EscapeHtmlBr(input);
    var result = Sanitizer.GetSafeHtmlFragment(input);
    result = UnescapeHtmlBr(result);

    Console.WriteLine(result);
}

const string BrMarker = @"|br|";

private static string UnescapeHtmlBr(string result)
{
    result = result.Replace(BrMarker, "<br />");

    return result;
}

private static string EscapeHtmlBr(string input)
{
    input = input.Replace("<br>", BrMarker);
    input = input.Replace("<br />", BrMarker);
    input = input.Replace("<br/>", BrMarker);

    return input;
} 
```

# c# - 名为“链接”的列已属于此数据表：无法将嵌套表名称设置为相同名称

> ID：11383893
> 
> 赞同：1
> 
> 时间：2012-07-08T14:30:07.080
> 
> 标签：c#, asp.net

```
<%@ Page Language="C#" MasterPageFile="~/MasterPage.master" Title="Industry News" %>

<%@ Import Namespace="System.Xml" %>

<%@ Import Namespace="System.Data" %>

<script runat="server">

protected void Page_Load(object sender, EventArgs e)

{

    XmlTextReader reader = new XmlTextReader("http://www.trucknews.com/rssfeeds       /TN_dailynews.xml");

    DataSet ds = new DataSet();

    ds.ReadXml(reader);

    GridView1.DataSource = ds.Tables[2];

    GridView1.DataBind();       

}

</script>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

<img src="Images/newsweb.gif" /><br />

<br />

<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" GridLines="None" Width="100%">

    <Columns>

        <asp:TemplateField>

            <ItemTemplate>

                <table style="width: 100%">

                    <tr style="text-align: left; vertical-align: text-top">

                        <td colspan="2"><hr style="width: 100%" /></td>

                    </tr>

                    <tr style="text-align: left; vertical-align: text-top">

                        <td style="text-align: left"><a onclick="window.open(this.href,'_blank');return false;" href="<%# Eval("link") %>"><%# Eval("title") %></a></td>

                        <td style="text-align: right"><%# Eval("author") %></td>

                    </tr>

                </table>

            </ItemTemplate>             

        </asp:TemplateField>

    </Columns>

    <RowStyle HorizontalAlign="Left" VerticalAlign="Top" />

    <AlternatingRowStyle HorizontalAlign="Left" VerticalAlign="Top" />

</asp:GridView>

var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-2040116-3']);

_gaq.push(['_trackPageview']);

(function() {

var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;

ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +   '.google-analytics.com/ga.js';

var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);

})();

</script>

</asp:Content> 
```

任何人都知道问题可能是什么，我需要更多的眼睛=）

我以为这可能是我最近所做的更新，但可惜不是。我认为它与我指向的 XML 有关。

[http://www.trucknews.com/rssfeeds/TN_dailynews.xml](http://www.trucknews.com/rssfeeds/TN_dailynews.xml)

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:10:52.140

我猜这个问题是由线路引起的

`<atom:link href="http://www.trucknews.com/rssfeeds/TN_dailynews.xml" rel="self" type="application/rss+xml"/>`

的来源。我猜 ReadXml 函数没有考虑命名空间，所以它有两个链接列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:40:30.063

我注意到这个 href="<%# Eval("link") %>" 并且可以说您没有正确使用 DataBinder Eval

请这样使用**href='<%# Eval("link") %>'**使用单引号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T23:41:03.117

问题仍然存在——正如 HatSoft 所说，使用单引号

```
href="<%# Eval('link') %>" 
```

是错误的，因为 in`Eval('Link')`不是有效的 C#。你要这个：

```
href='<%# Eval("link") %>' 
```

# java - 如何使用 Java 创建 X509 证书？

> ID：11383898
> 
> 赞同：16
> 
> 时间：2012-07-08T14:30:50.827
> 
> 标签：java, certificate, x509certificate, public-key

我想使用 Java 语言创建一个 X509 证书，然后从中提取公钥。

我在互联网上搜索并找到了许多代码示例，但它们都有错误（未知变量或未知类型）或有许多警告说：“方法......来自类型......已被弃用”等。

例如，为什么以下代码不起作用：

```
PublicKey pk;
CertificateFactory cf = CertificateFactory.getInstance("X.509");
String PKstr = pk.toString();
InputStream PKstream = new ByteArrayInputStream(PKstr.getBytes());
X509Certificate pkcert = (X509Certificate)cf.generateCertificate(PKstream); 
```

谁能告诉我如何使用纯 Java 或 Bouncy Castle 创建证书，然后从中获取公钥？

谢谢大家。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-10-08T08:30:34.133

您还可以仅使用 JDK 类生成证书。缺点是您必须使用 sun.security.x509 包中的两个类。代码将是：

```
KeyStore keyStore = ... // your keystore

// generate the certificate
// first parameter  = Algorithm
// second parameter = signrature algorithm
// third parameter  = the provider to use to generate the keys (may be null or
//                    use the constructor without provider)
CertAndKeyGen certGen = new CertAndKeyGen("RSA", "SHA256WithRSA", null);
// generate it with 2048 bits
certGen.generate(2048);

// prepare the validity of the certificate
long validSecs = (long) 365 * 24 * 60 * 60; // valid for one year
// add the certificate information, currently only valid for one year.
X509Certificate cert = certGen.getSelfCertificate(
   // enter your details according to your application
   new X500Name("CN=My Application,O=My Organisation,L=My City,C=DE"), validSecs);

// set the certificate and the key in the keystore
keyStore.setKeyEntry(certAlias, certGen.getPrivateKey(), null, 
                        new X509Certificate[] { cert }); 
```

从密钥库中检索私钥以加密或解密数据。基于的代码来自[http://www.pixelstech.net/article/1408524957-Generate-cetrificate-in-Java----3](http://www.pixelstech.net/article/1408524957-Generate-cetrificate-in-Java----3)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-08T14:40:38.023

是的，使用 BouncyCastle，从 2 个公钥（证书的密钥和 CA 的密钥）创建 X509 证书在[此处](https://github.com/pcarrier/identify/blob/master/src/main/java/identify/X509CertificateFactoryImpl.java)完成。

[我在这里](https://github.com/pcarrier/identify/blob/master/src/main/java/identify/X509Certificate.java)将生成的证书转换为 PEM 。

# c# - 正则表达式完全剥离 Span 标签

> ID：11383902
> 
> 赞同：0
> 
> 时间：2012-07-08T14:31:28.690
> 
> 标签：c#, regex

我想去除 Span 标签的 html 字符串。

我有一个 html 字符串：

```
<a href=\"http://www.dr.dk/roskilde\"><span>Roskilde</span><span>Festival</span></a> 
```

我需要将其简化为：罗斯基勒音乐节。

Atm，我有一个正则表达式字符串，它应该能够找到所有跨度标签，但它失败了

```
 System.Collections.Specialized.StringCollection sc = new System.Collections.Specialized.StringCollection();

    sc.Add(@"/<\s*\/?\s*span\s*.*?>/g");

    foreach (string s in sc)
    {
        k = System.Text.RegularExpressions.Regex.Replace(pContent, s, "", System.Text.RegularExpressions.RegexOptions.IgnoreCase);
    }
    k = System.Text.RegularExpressions.Regex.Replace(pContent, @"&nbsp;", @"&#160;"); 
```

有任何想法吗？

PS 我不想使用 Html Agility Pack

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T14:41:51.937

正则表达式不是处理 HTML 的最佳方式。使用理解嵌套的 HTML 解析器，因为 Regexp 不理解 HTML 嵌套。

考虑查看反字符集，即`<whatever[^>]*>`

我猜你从某个地方复制了这个，但你的正则表达式可能不是正确的 C# 语法（额外`/`和`/g`）。重读 C# 教程中的正则表达式！试试这个字符串：

```
Example /<span>/g does this tag get removed? 
```

您可能打算使用的是：

```
sc.Add(@"</?span( [^>]*|/)?>"); 
```

# sql - 使用 SQL 从 Excel 中选择不同的记录

> ID：11383905
> 
> 赞同：0
> 
> 时间：2012-07-08T14:32:35.007
> 
> 标签：sql, excel-2007

Excel 列中的表格：

```
UID ID      StartDate     Time                              Name        
1    1       1/1/2012    5:51:12                            testA       
2    2       2/2/2012    5:51:12                            testB       
3    1       1/1/2012   10:51:12                            testA       
4    2       2/2/2012   10:51:12                            testB 
```

结果表目标：

```
UID ID      StartDate   StartTme    EndDate     EndTime     Name
1    1       1/1/2012    5:51:12    1/1/2012    10:51:12    testA
3    2       2/2/2012    5:51:12    2/2/2012    10:51:12    testB 
```

使用 SQL 查询并从 Excel 列读取如何通过匹配第二次出现的 ID 来获取记录（StartDate、Time），并将这些作为新列按日期按升序插入“结束日期”、“结束时间”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:49:42.530

试试这个，看看它是否会起作用：

```
SELECT
    UID = A.UID,
    ID = A.ID,
    StartDate = A.StartDate,
    StartTime = A.[Time],
    EndDate = B.StartDate,
    EndTime = B.[Time],
    Name = A.[Name]
FROM
    ExcelTable A
    JOIN ExcelTable B ON A.Id = B.ID 
ORDER BY
    A.StartDate,
    A,[Time] 
```

# android - 访问 LG Optimus X2 闪光灯

> ID：11383907
> 
> 赞同：1
> 
> 时间：2012-07-08T14:32:42.413
> 
> 标签：android, lg, optimus

我正在学习安卓应用程序编程和相机闪光灯。我的应用程序中有以下代码，是从另一篇文章中复制的。它适用于 Galaxy 设备，但不适用于我的 LG Optimus X2。我确实设置了清单权限，我对这个问题没有任何线索，非常感谢任何帮助。

```
Camera mycam = Camera.open();
Parameters p = mycam.getParameters();// = mycam.getParameters();
p.setFlashMode(Parameters.FLASH_MODE_TORCH); 
mycam.setParameters(p); //time passes 
try {
    Thread.sleep(500);
} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
p.setFlashMode(Parameters.FLASH_MODE_OFF);
mycam.release(); 
```

顺便说一句，任何代码都可以适用于所有带有闪存的 android 设备？或者它必须是特定于设备的？我在哪里可以获得这些信息，我找不到太多相关信息。

# c# - 尝试在未送达报告中匹配电子邮件地址和错误消息

> ID：11383908
> 
> 赞同：0
> 
> 时间：2012-07-08T14:32:53.833
> 
> 标签：c#, regex

我正在尝试编写一个 csharp 应用程序来解析当电子邮件无法送达时发送的 NDR（未送达报告）。目标是从我们的邮件列表中取消订阅不再有效的电子邮件地址。

我已经设法编写了使用交换 Web 服务 API (EWS) 连接到我们的交换服务器的代码。抓取邮件正文，我想做的是匹配电子邮件地址和错误代码，以便我们可以生成电子邮件地址和错误报告以供人工审查。

消息正文的内容如下所示：

```
 <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    </head>
    <body>
    <p><b><font color="#000066" size="3" face="Arial">Delivery has failed to these recipients or groups:</font></b></p>
    <font color="#000000" size="2" face="Tahoma">
    <p><a href="mailto:email@domain.com">email@domain.com</a><br>
    A communication failure occurred during the delivery of this message. Please try resending the message later. If the problem continues, contact your helpdesk.<br>
    </p>
    </font><br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <font color="#808080" size="2" face="Tahoma">
    <p><b>Diagnostic information for administrators:</b></p>
    <p>Generating server: WEB16.domain.net</p>
    <p>email@domain.com<br>
    #&lt; #5.5.0 smtp;554 Sending address not accepted due to spam filter&gt; #SMTP#</p>
    <p>Original message headers:</p>
    <pre>Received: from WEB12 ([192.168.33.64]) by WEB16.domain.net with Microsoft
     SMTPSVC(7.5.7601.17514);    Sun, 8 Jul 2012 09:27:42 -0400
    Thread-Topic: domain.com order 178014 has been received and is pending
    thread-index: Ac1dDXyHxyN&#43;loq8SeaIzTsVoLE/3g==
    From: &lt;sender@domain.com&gt;
    To: &lt;recipient@domain.com&gt;
    CC:
    BCC:
    Subject: domain.com order 178014 has been received and is pending
    Date: Sun, 8 Jul 2012 09:27:56 -0400
    Message-ID: &lt;22C1C2F24E1744D4B51C1A5EF9DE3E50@domain.net&gt;
    MIME-Version: 1.0
    Content-Type: text/plain
    Content-Transfer-Encoding: 7bit
    X-Mailer: Microsoft CDO for Windows 2000
    Content-Class: urn:content-classes:message
    Importance: normal
    Priority: normal
    X-MimeOLE: Produced By Microsoft MimeOLE V6.1.7601.17609
    Return-Path: sender@domain.com
    X-OriginalArrivalTime: 08 Jul 2012 13:27:42.0955 (UTC) FILETIME=[743A53B0:01CD5D0D]
    </pre>
    </font>
    </body>
    </html> 
```

我正在尝试提出一个正则表达式，该表达式将匹配发送到的电子邮件地址以及随附的错误消息。

```
 // First we set the input string.
            string body = message.Body.Text;

            // Regex string
            Regex emailregex = new Regex("^<p>(.+?)</a><br>$");

            var match = emailregex.Match(body);

            if (match.Success)
                 Console.WriteLine(match.Groups[1].Value);

            // Regex string
            Regex errorregex = new Regex("</a><br>\n(.+?)<br>$");

            match = errorregex.Match(body);

            if (match.Success)
                Console.WriteLine(match.Groups[1].Value); 
```

我设置的两个正则表达式似乎都不起作用。我不是一个正则表达式大师。谁能指出我做错的方向？

谢谢布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:01:36.627

这是一项相当复杂的任务，因为各种电子邮件中继软件会生成非常不同的电子邮件格式，最终需要您开发一组复杂的错误电子邮件模板和简单（但可能在代码方面不同）的匹配算法。更糟糕的是，新模板会不断出现，您将不得不不断更新解析器。不要指望一个简单的正则表达式匹配来处理所有这些。

你的最后一个正则表达式

```
"To: &lt;(.+?)&gt;") 
```

看起来很适合这项任务，但仅限于这个特定的返回电子邮件模板。在其他情况下，它可能与检测其他电子邮件地址（从已回复的消息中）一样糟糕。

我建议您切换到可以自动处理取消订阅的邮件列表管理器，而不是自己编写此部分。

如果这不是您的选择，您将不得不添加代码块来检查以合理确定性识别的特定已知模板，而不是仅仅从模板中提取失败的地址。

# c# - 维护按值排序的键值对列表的最简单方法是什么？

> ID：11383911
> 
> 赞同：0
> 
> 时间：2012-07-08T14:33:20.317
> 
> 标签：c#, dictionary, key

每个键在列表中都是唯一的。当一个新的键值对到达时，该对按值的升序插入到列表中（如果键已经存在，则更新值）。

请避免为每次插入对列表进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:05:35.987

您不会获得具有这种行为的内置组件，它太不标准了。我会研究为什么以及何时需要这些竞争行为。实际上，您正在查看备用键。除了写一些 for 的链表之外，在我的脑海中，我会查看 SortedList 的按值部分，以及字典的键。例如

CustomerID 和 SortKey 的 Dictionary 以及 SortKey 和 value 的 SortedList。

如果可以的话，我会尽量避免它，因为维护两者的成本比在需要时简单地按所需顺序返回值列表的成本更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:39:01.063

我会建议 SortedDictionary 或 SortedList

根据 MSDN：

> SortedList 使用的内存比 SortedDictionary 少。
> 
> SortedDictionary 对未排序的数据具有更快的插入和删除操作：O(log n) 相对于 SortedList 的 O(n)。

更新：评论后

您将不得不自己订购价值，例如使用字典

```
 var dictionary = new Dictionary<int, string>{ {1, "Z"}, {2, "A"}};
    IOrderedEnumerable<KeyValuePair<int, string>> orderedEnumerable = dictionary.OrderBy(d => d.Value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T14:44:18.507

如果可以接受对每个枚举的项目进行排序，则可以使用[Dictionary<TKey, TValue>](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)并在枚举时按值对键值对进行排序：

```
var dict = new Dictionary<MyKey, MyValue>();

// insertion (updates value when key already exists)
dict[key] = value;

// enumeration (ordered by value)
foreach (var keyValuePair in dict.OrderBy(kvp => kvp.Value))
{
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T16:12:38.610

我会写一个像下面这样的临时类（未完全测试）：

```
public class DictionarySortedByValue<TKey, TValue> : IDictionary<TKey, TValue>
{
    class ValueWrapper : IComparable, IComparable<ValueWrapper>
    {
        public TKey Key { get; private set; }
        public TValue Value { get; private set; }

        public ValueWrapper(TKey k, TValue v)
        {
            this.Key = k;
            this.Value = v;
        }
        public int CompareTo(object obj)
        {
            if (!(obj is ValueWrapper))
                throw new ArgumentException("obj is not a ValueWrapper type object");
            return this.CompareTo(obj as ValueWrapper);
        }
        public int CompareTo(ValueWrapper other)
        {
            int c = Comparer<TValue>.Default.Compare(this.Value, other.Value);
            if (c == 0)
                c = Comparer<TKey>.Default.Compare(this.Key, other.Key);
            return c;
        }
    }

    private SortedSet<ValueWrapper> orderedElements;
    private SortedDictionary<TKey, TValue> innerDict;

    public DictionarySortedByValue()
    {
        this.orderedElements = new SortedSet<ValueWrapper>();
        this.innerDict = new SortedDictionary<TKey, TValue>();
    }

    public void Add(TKey key, TValue value)
    {
        var wrap = new ValueWrapper(key, value);
        this.innerDict.Add(key, value);
        this.orderedElements.Add(wrap);
    }

    public bool ContainsKey(TKey key)
    {
        return this.innerDict.ContainsKey(key);
    }

    public ICollection<TKey> Keys
    {
        get { return this.innerDict.Keys; }
    }

    public bool Remove(TKey key)
    {
        TValue val;
        if (this.TryGetValue(key, out val))
        {
            var wrap = new ValueWrapper(key, val);
            this.orderedElements.Remove(wrap);
            this.innerDict.Remove(key);
            return true;
        }
        return false;
    }

    public bool TryGetValue(TKey key, out TValue value)
    {
        return this.innerDict.TryGetValue(key, out value);
    }

    public ICollection<TValue> Values
    {
        get { return this.innerDict.Values; }
    }

    public TValue this[TKey key]
    {
        get
        {
            return this.innerDict[key];
        }
        set
        {
            bool removed = this.Remove(key);
            this.Add(key, value);
        }
    }

    public void Add(KeyValuePair<TKey, TValue> item)
    {
        this.Add(item.Key, item.Value);
    }

    public void Clear()
    {
        this.innerDict.Clear();
        this.orderedElements.Clear();
    }

    public bool Contains(KeyValuePair<TKey, TValue> item)
    {
        var wrap = new ValueWrapper(item.Key,item.Value);
        return this.orderedElements.Contains(wrap);
    }

    public void CopyTo(KeyValuePair<TKey, TValue>[] array, int arrayIndex)
    {
        this.innerDict.CopyTo(array, arrayIndex);
    }

    public int Count
    {
        get { return this.innerDict.Count; }
    }

    public bool IsReadOnly
    {
        get { return false; }
    }

    public bool Remove(KeyValuePair<TKey, TValue> item)
    {
        if (this.Contains(item))
            return this.Remove(item.Key);
        return false;
    }

    public IEnumerator<KeyValuePair<TKey, TValue>> GetEnumerator()
    {
        foreach (var el in this.orderedElements)
            yield return new KeyValuePair<TKey, TValue>(el.Key, el.Value);
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();
    }
} 
```

**备注：**

*   它还要求该`TKey`类型实现 IComparable。
*   发布的代码仅使用 TKey 和 TValue 的默认比较器，但您可以通过另一个构造函数传递自定义比较器。

# x-ua-compatible - Browserstack.com 在测试 IE6-8 时忽略 X-UA 兼容？

> ID：11383913
> 
> 赞同：1
> 
> 时间：2012-07-08T14:33:30.267
> 
> 标签：x-ua-compatible, browser-testing, browserstack

在使用 Utilu IE Collection (IE6-8 - [http://utilu.com/IECollection](http://utilu.com/IECollection) ) 测试我的网站 (www.luchtspin.nl) 时，结果很好。但是，一旦我通过 Browserstack.com 仔细检查了我的网站，“X-UA-Compatible”似乎就被忽略了。

这是正确的，Browserstack 会忽略 X-UA-Compatible-setting 吗？（注意：`X-UA-Compatible" value="IE=Edge,chrome=1"`通过 web.config 正确提供。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:00:53.283

经过更多测试，我发现 Browserstack 忽略了`chrome=1`X-UA-Compatible 的部分，因此 Chrome Frame 没有被激活。当然有道理。另一方面，在我的 VM 中 Utilu IE Collection 的浏览器中，Chrome Frame*被*激活，因此我很困惑。

# jquery - CSS可以用来遮盖背景图片吗？

> ID：11383922
> 
> 赞同：14
> 
> 时间：2012-07-08T14:34:44.017
> 
> 标签：jquery, css

这是我目前拥有的：

![当前代码的图像](../Images/9d3311a589d0ad0d6d05f8fd90a63aa1.png)

到目前为止，这是我的代码：

```
<style type="text/css">
    .main
    {
        background:url(bg.jpg);
        height:250px;
        }
    .ban
    {
        background-color:#333;
        height:150px;
    }
    .mask
    {
        width:75px;
        height:75px;
        float:left; 
        border:#fff solid 1px;

        margin:20px;
    }
</style>

<div class="main">
    <div class="ban">
         <div class="mask"></div> 
         <div class="mask"></div>
         <div class="mask"></div>
         <div class="mask"></div>
         <div class="mask"></div>    
    </div>
</div> 
```

这是我的目标：

![在此处输入图像描述](../Images/6d295c225b143530d8ef64c4d1f0fb47.png)

我正在寻找使用 CSS 创建一个蒙版 - 我需要什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-08T14:56:55.230

如果您在上面的评论中没有找到解决方案，那么我为您准备了一个。

您可以使用边框（如果您使用易于使用的纯色）来复制它，而不是尝试创建要定位的 svg 或 png 图像。

[你可以在这里看到一个工作的 jsFiddle](http://jsfiddle.net/7qckgaq7/)

**编辑**

旧的 jsFiddle 消失了，为了重新创建，需要附带代码。下面提供的是使这一切正常工作的“掩码”元素。

```
.mask
{
    width:50px; //non-essential
    height:50px; //non-essential
    float:left; //non-essential
    background:transparent;
    border:1px solid #333;
    border-top:20px solid #333;
    border-left:10px solid #333;
    border-right:10px solid #333;
    border-bottom:50px solid #333;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T15:07:25.630

使用类似于您自己的标记的解决方案：

[http://jsfiddle.net/VtCvx/](http://jsfiddle.net/VtCvx/)

```
<div class="main">

         <div class="mask"></div> 
         <div class="mask"></div>
         <div class="mask"></div>
         <div class="mask"></div>
         <div class="mask"></div>    
        <div class="ban"></div>
</div>​

.main
{
    background:url(http://lorempixel.com/800/800/);
    height:250px;
    }
.ban
{
    height:150px;
    position: absolute;
    right: 0;
    left: 550px;
    background: #333;
}

.mask
{
    width:75px;
    height:75px;
    float:left; 
    border: #333 solid 25px;
    border-right-width: 10px;
    border-bottom-width: 50px;
    box-shadow: inset 0 0 1px 1px #fff;    
}​ 
```

# windows - 如何使这个 WSH 脚本工作？（详情见留言）

> ID：11383930
> 
> 赞同：1
> 
> 时间：2012-07-08T14:36:20.717
> 
> 标签：windows, vbscript, network-programming, windows-shell, wsh

该脚本应该打开第一个找到的启用或连接的网络连接的 Windows shell 状态和属性对话框。但是，仅打开“属性”对话框。状态对话框的动词已经正确，即“Stat&us”。该脚本已经过测试，将在 Windows XP Pro SP3 32-Bit 下使用。它通过连接的 3G 拨号和 LAN Loopback 进行了测试。两者都有同样的问题。

```
dim a,b,c
set a=createobject("shell.application")
set b=a.namespace(0).parsename("::{7007ACC7-3202-11D1-AAD2-00805FC1270E}").getfolder
for i=0 to (b.items.count-1)
  set c=b.items.item(i)
  for j=0 to (c.verbs.count-1)
    'only process connected/enabled
    if (lcase(c.verbs.item(j)) = "disc&onnect") or (lcase(c.verbs.item(j)) = "disa&ble") then
      'open status and properties dialogs
      c.invokeverb("Stat&us")     'this doesn't work
      c.invokeverb("P&roperties") 'this one works
      msgbox "Press OK to close all and exit"
      wscript.quit
    end if
  next
next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:56:35.347

在 Windows XP 中存在一个错误，其影响需要从资源管理器进程中调用 Status 动词。由于 WScript/CScript 不是 Explorer 进程的子进程，因此任何调用状态谓词的尝试都证明是徒劳的，尽管没有任何明显的错误。此错误似乎已在以后的版本中得到修复，因为下面的脚本已经过测试并在 Vista x64 中运行。

```
Set objShell = CreateObject("Shell.Application")
Set objShellFolder = objShell.Namespace(0).ParseName("::{7007ACC7-3202-11D1-AAD2-00805FC1270E}").GetFolder 

For Each objShellFolderItem in objShellFolder.Items
    Set colShellFolderItemVerbs = objShellFolderItem.Verbs

    For Each objShellFolderItemVerb in colShellFolderItemVerbs
        strVerb = objShellFolderItemVerb.Name
        If (strVerb = "C&onnect / Disconnect") Then
            objShellFolderItem.InvokeVerb("Properties")
            objShellFolderItem.InvokeVerb("Status")

            MsgBox "Press OK to close and exit"
            WScript.Quit(0)
        End If
    Next
Next 
```

**选项1**

这是否意味着你运气不好？不是完全。我有两个不同的建议给你。第一个使用了一些技巧。状态是任何网络连接处于连接状态时的默认操作。打开您的网络连接，右键单击您希望监控的连接，然后选择创建快捷方式。您可以将快捷方式放置在您喜欢的任何位置。默认情况下，它将在您的桌面上命名为“无线网络连接 - Shortcut.lnk”。在命令行上或通过脚本中的 Run 或 Exec 方法键入该命令将完全满足您的需要。我尝试通过脚本来完成这一切，但在尝试自动化创建快捷方式动词时遇到了问题。

**选项 2**

第二个选项也是一种解决方法，但如果您的 3G 连接使用拨号网络，则可能会起作用。命令行将`rundll32.exe rnaui.dll,RnaDial {name of connection to establish}`打开连接对话框，但是，如果已经连接，它会打开连接的状态对话框。然后，您可以尝试这样的脚本：

```
Set objShell = CreateObject("Shell.Application")
Set objShellFolder = objShell.Namespace(0).ParseName("::{7007ACC7-3202-11D1-AAD2-00805FC1270E}").GetFolder

For Each objShellFolderItem in objShellFolder.Items
    strConnection = objShellFolderItem.Name
    strCommandLine = "rundll32.exe rnaui.dll,RnaDial " & Chr(34) & strConnection & Chr(34)

    Set colShellFolderItemVerbs = objShellFolderItem.Verbs

    For Each objShellFolderItemVerb in colShellFolderItemVerbs
        strVerb = objShellFolderItemVerb.Name
        If (strVerb = "C&onnect / Disconnect") Then
            objShellFolderItem.InvokeVerb("Properties")
            CreateObject("WScript.Shell").Run strCommandLine

            MsgBox "Press OK to close and exit"
            WScript.Quit(0)
        End If
    Next
Next 
```

**选项 3**

最后一个选项是使用 WMI 显示有关您的网络连接的信息。这是一种更传统的脚本方法。

无论如何，我希望这会有所帮助。不要忘记根据需要更改动词。它们确实会从一个版本的 Windows 更改为下一个版本。

# c# - 如何将数据库添加到 C# 项目？

> ID：11383931
> 
> 赞同：0
> 
> 时间：2012-07-08T14:36:26.750
> 
> 标签：c#

我正在尝试在这个项目上使用 Linq。因此，我需要将数据库显示在数据库资源管理器中，以便我可以使用对象关系设计器。

我以前做过（我认为），但这次它不起作用，我不知道为什么。

1.  右键添加连接
2.  将数据源更改为 Microsoft SQL Server 数据库文件
3.  如何选择数据库？

更正 - 我只是让它创建数据库，但现在我不知道如何在 sql server 中打开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:10:52.570

看起来服务“SQL Server (MSSQLSERVER)”已停止，因此请转到服务并启动。一旦它开始，然后重试连接它

# java - Java 事件处理

> ID：11383933
> 
> 赞同：1
> 
> 时间：2012-07-08T14:36:33.063
> 
> 标签：java, swing, user-interface

当我编译它在第 33 行显示错误：找不到符号。我正在打电话 `jbtNew.addActionListener(listener)`，为什么它无法在其中找到 jbtNew

```
(e.getSource() == jbtNew) in line 33. 
```

从代码

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class AnonymousListenerDemo extends JFrame {

    public AnonymousListenerDemo() {
        // Create four buttons
        JButton jbtNew = new JButton("New");
        JButton jbtOpen = new JButton("Open");
        JButton jbtSave = new JButton("Save");
        JButton jbtPrint = new JButton("Print");
        // Create a panel to hold buttons
        JPanel panel = new JPanel();
        panel.add(jbtNew);
        panel.add(jbtOpen);
        panel.add(jbtSave);
        panel.add(jbtPrint);

        add(panel);
        // Create and register anonymous inner-class listener
        AnonymousListenerDemo.ButtonListener listener = new AnonymousListenerDemo.ButtonListener();
        jbtNew.addActionListener(listener);

    }

    class ButtonListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            if (e.getSource() == jbtNew) //Here it show the problem
            {
                System.out.println("Process New");
            }
        }
    }

    /** Main method */
    public static void main(String[] args) {
        JFrame frame = new AnonymousListenerDemo();
        frame.setTitle("AnonymousListenerDemo");
        frame.setLocationRelativeTo(null); // Center the frame
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T14:38:34.810

那是一个**局部**变量。
它不存在于构造函数之外。

您需要在课堂上创建一个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:43:45.517

这可能可行（以您在此处发布的形式）并且@SLaks 提到了+1，并进行了一些重大更改

在所有方法将被放置到单独的类中以使用 put/getClientProperty() 的情况下

```
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class AnonymousListenerDemo {

    private static final long serialVersionUID = 1L;
    private JFrame frame = new JFrame("AnonymousListenerDemo");
    // Create four buttons
    private JButton jbtNew = new JButton("New");
    private JButton jbtOpen = new JButton("Open");
    private JButton jbtSave = new JButton("Save");
    private JButton jbtPrint = new JButton("Print");

    public AnonymousListenerDemo() {
        JPanel panel = new JPanel();// Create a panel to hold buttons
        panel.add(jbtNew);
        panel.add(jbtOpen);
        panel.add(jbtSave);
        panel.add(jbtPrint);
        // Create and register anonymous inner-class listener
        jbtNew.addActionListener(new ButtonListener());
        frame.add(panel);
        //frame.setTitle("AnonymousListenerDemo");
        frame.setLocationRelativeTo(null); // Center the frame
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    class ButtonListener implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            if (e.getSource() == jbtNew) {
                System.out.println("Process New");
            }
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                new AnonymousListenerDemo();
            }
        });
    }
} 
```

# php - 如何保护场地，让施工期间只有客户才能看到？

> ID：11383935
> 
> 赞同：0
> 
> 时间：2012-07-08T14:36:37.917
> 
> 标签：php, security

我正在为一些不知道如何编码的朋友写一个网站。我不想写在我的本地主机上，因为我希望他们能够看到网站的进度。我想写在网站本身。我将如何设置一个简单的密码系统，以便只有他们能够看到该站点？虽然这根本不安全，但这是我能想到的最好的：

site.com/index.php：

```
<body>
    <form type="POST" action="/redirect.php">
       <input type="text" name="textbox">
       <input type="submit" value="submit">
   </form>
</body> 
```

site.com/redirect.php：

```
<?php
   if ($_POST['textbox'] == 'password123'){
      //redirect to site.com/actualSite/index.php
     }
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T14:42:45.747

我有两个快速而肮脏的建议给你。

### 受 IP 限制 -

```
$ipWhiteList = array(
    'XX.XXX.XXX.XXX', // teammate1,
    'YY.YYY.YYY.YYY', // teammate2
);
if(!in_array($_SERVER['REMOTE_ADDR'],$ipWhiteList)){
    die('Access Denied!');
} 
```

### 由参数中的密码限制`$_GET`-

```
$predefined_password = "4815162342";
if ($_GET['pass'] != $predefined_password){
  die('Access Denied!');
} 
```

现在您的队友所要做的就是将密码附加到他们的 URL 中，如下所示 -

`https://myCoolNewSite.com?pass=4815162342`

请注意，这些不是保护 URL 的极其复杂的方法，而是满足您的需要。在开发过程中暂时限制访问 - 它们可能就足够了。又快又脏；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T14:38:54.467

我曾经使用过的一个简单方法是使用一个复杂的 URL 来设置 cookie。然后当有人访问“秘密”站点时，您检查该 cookie，如果它在那里，则显示它，如果不是，则返回 404。

您还可以检查 IP（尽管这有点麻烦）。

您还可以使用[.htpasswd](http://www.javascriptkit.com/howto/htaccess3.shtml)使用密码保护整个目录。这将是最常见和最简单的方法。

# ios - 在 iOS 中使用模板缓冲区

> ID：11383940
> 
> 赞同：5
> 
> 时间：2012-07-08T14:37:15.763
> 
> 标签：ios, opengl-es, stencil-buffer

我尝试使用“模板缓冲区”从纹理显示我的渲染的一部分，但我的渲染显示时没有任何遮罩效果。

它适用于 2D iOS 项目，使用 OpenGL ES 2.0 这是我代码的相关部分：

```
glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT );
glEnable( GL_STENCIL_TEST );

// mask rendering
glColorMask( GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE );
glStencilFunc( GL_ALWAYS, 1, 1 );
glStencilOp( GL_KEEP, GL_KEEP, GL_REPLACE );

glBindTexture(GL_TEXTURE_2D, _maskTexture);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);  

// scene rendering
glColorMask( GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE ); 
glStencilFunc( GL_EQUAL, 1, 1 ); 
glStencilOp( GL_KEEP, GL_KEEP, GL_KEEP );  

glBindTexture(GL_TEXTURE_2D, _viewTexture);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

任何帮助将不胜感激 ！

（像往常一样，法国开发者，对不起我的英语！）

精度：“_maskTexture”是一张黑白图片。

# 解决方案 ：

* * *

**我最终用rotoglub**和**tim**的指示解决了我的问题。谢谢你俩。

1/ 模板缓冲区未正确创建。它应该像这样初始化：

```
glBindRenderbufferOES(GL_RENDERBUFFER_OES, depthStencilRenderbuffer);
glRenderbufferStorageOES(GL_RENDERBUFFER_OES, 
                             GL_DEPTH24_STENCIL8_OES, 
                             backingWidth, 
                             backingHeight); 
```

这是我的渲染不受蒙版影响的主要原因。

2/ 为了能够使用纹理作为遮罩，我用 Alpha 通道替换了黑色，并在我的渲染中启用了混合。

我的最终渲染代码如下所示：

```
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

glVertexPointer(2, GL_FLOAT, 0, vertices);
glTexCoordPointer(2, GL_FLOAT, 0, texcoords);

glClearStencil(0); 
glClearColor (0.0,0.0,0.0,1);
glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT); 

// mask rendering
glColorMask( GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE );
glEnable(GL_STENCIL_TEST);
glEnable(GL_ALPHA_TEST);
glBlendFunc( GL_ONE, GL_ONE );
glAlphaFunc( GL_NOTEQUAL, 0.0 );
glStencilFunc(GL_ALWAYS, 1, 1);
glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE);

glBindTexture(GL_TEXTURE_2D, _mask);
glDrawArrays(GL_TRIANGLE_STRIP, 4, 4);  

// scene rendering
glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE); 
glStencilFunc(GL_EQUAL, 1, 1);
glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);

glDisable(GL_STENCIL_TEST);
glDisable(GL_ALPHA_TEST);
glBindTexture(GL_TEXTURE_2D, _texture);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:09:29.553

简单地说，问题在于您只是在场景中绘制纹理，而没有对纹理中的内容进行任何测试。模板缓冲区不关心纹理中的颜色，它只检查：

`Did you draw a fragment ? (Update stencil buffer) : (Don't update stencil buffer);`

您正在为纹理的每个像素绘制一个片段，因此纹理中的任何蒙版效果都是无用的。

如果要使用纹理进行遮罩，则需要**丢弃**模板缓冲区中不想更新的任何片段。

这可以通过`discard`着色器中的关键字或`glAlphaTest/glAlphaFunc`在 OpenGLES 1.1 中完成

# windows - 如何在 Visual Studio 中使用 OpenSSL

> ID：11383942
> 
> 赞同：36
> 
> 时间：2012-07-08T14:37:17.917
> 
> 标签：windows, visual-studio-2010, linker, openssl

我正在尝试将我编写的控制台应用程序移植`C`到 Visual Studio 2010。在 Linux/Mac 上，该应用程序可以完美运行，包括`OpenSSL`支持。

任何人都可以提供使用/链接`OpenSSL`Visual Studio 项目中的库的帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-07-09T15:39:07.997

我知道它老了！我自己也遇到了这个问题，这就是解决方案。

首先，你应该安装（正常普通安装）openssl。（它来自[这里](https://www.openssl.org/community/binaries.html)）。

现在，在您创建项目后，我引用：

> 确保在项目属性页面中设置了以下设置：
> 
> [C/C++ -> General -> Additional Include Directories] 值：OpenSSL 在你机器上的包含目录（例如 C:\openssl\include）
> 
> [Linker -> General -> Additional Library Directories] 值：你机器中 OpenSSL 的 lib 目录（例如 C:\openssl\lib）
> 
> [链接器 -> 输入 -> 附加依赖项] 值：libeay32.lib

[来源](http://www.askyb.com/cpp/using-openssl-cryptography-blowfish-des-rc2-rc4/)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-10-25T09:08:05.700

添加 OpenSSL 相关的头文件，以及下面的头文件：

```
#include <winsock2.h>
#include <windows.h> 
```

打开下方链接并下载预编译文件。

[http://www.npcglib.org/~statthis/blog/precompiled-openssl/](http://www.npcglib.org/~stathis/blog/precompiled-openssl/)

提取并保留 C 盘中的文件夹，使用 readme_precompile.txt 获取说明。

打开下面给出的 Visual C++ 项目和后续过程以包含和链接器选项。

确保在项目属性页面中设置了以下设置：

*   [C/C++ -> 常规 -> 附加包含目录]
    *   您机器中的 OpenSSL 包含目录（例如 C:\openssl\include）或（例如 C:\openssl\include64）
*   [链接器 -> 常规 -> 附加库目录]
    *   您机器中 OpenSSL 的 lib 目录（例如 C:\openssl\lib）或（例如 C:\openssl\lib64）
*   [链接器 -> 输入 -> 附加依赖项]
    *   `ws2_32.lib`
    *   `libsslMT.lib`
    *   `Crypt32.lib`
    *   `libcryptoMT.lib`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-15T19:12:26.393

好吧，这已经一年多了，但我找不到答案，所以我勉强通过了。我让 openssl-1.0.1e 使用 VS 11 进行编译，如下所示：

我试过用git自带的PERL，不行，必须安装[ActivePerl](http://www.activestate.com/ActivePerl)

取自Nitesh 提供的[链接：](http://www.askyb.com/windows/compiling-and-installing-openssl-for-32-bit-windows/)

```
perl Configure VC-WIN64A no-asm 
```

其次是：

```
ms\do_win64a 
```

根据[这篇文章](https://stackoverflow.com/questions/2548138/how-to-compile-x64-code-with-visual-studio-in-command-line)，我编辑了 ms\ntdll.mak 并将 CC 更改为：

```
CC="c:\Program Files (x86)\Microsoft visual Studio 11.0\VC\bin\amd64\cl.exe" 
```

然后最后：

```
nmake -f ms\ntdll.mak 
```

我没有费心安装，只是将目录 openssl-1.0.1e\out32dll 添加到 Configuration Properties -> Linker -> Additional Library Directories 和 openssl-1.0.1e\inc32 到 Configuration Properties -> C/C++ -> C/C++ -> 常规 -> 附加包含目录，将 libeay32.dll 复制到我的路径中的某个位置，并称之为好。似乎正在工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-31T19:16:00.807

以下是一些资源：[编译和安装 OpenSSL for Windows](http://www.askyb.com/windows/compiling-and-installing-openssl-for-32-bit-windows/)以及[Using OpenSSL for Cryptography (Blowfish, DES, RC2, RC4)](http://www.askyb.com/cpp/using-openssl-cryptography-blowfish-des-rc2-rc4/)

我自己试过了，但我仍然遇到错误。OpenSSL 和 Visual Studio 不是我的强项，但也许你可以弄清楚。

# silverlight - 如何制作背景音乐？

> ID：11383946
> 
> 赞同：0
> 
> 时间：2012-07-08T14:37:32.207
> 
> 标签：silverlight, windows-phone-7, mediaelement, background-music

我需要在 WP7 Silverlight 应用程序中运行背景音乐。在页面之间导航时，我需要它继续播放。

我也不希望它在播放另一个音效时停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:06:13.937

您可以使用 MediaElement 来做到这一点或使用 XNA SoundEffects 但我有更好的解决方案。为您的应用程序创建一个 SilverXNA 项目。你真的不需要使用 XNA，但是这个项目会自动创建一些让生活更轻松的东西。您可以使用它毫无问题地构建 Silverlight 应用程序。

创建项目后，在项目中包含您的声音文件说“7am.mp3”并将其构建操作设置为“内容”。

在 GamePage.xaml.cs 中创建歌曲：

```
Song music; 
```

现在在 OnNavigatedTo() 中添加：

```
music = contentManager.Load<Song>("7am"); 
```

在此之后，您可以将这首歌播放为：

```
MediaPlayer.Play(music); 
```

您可以设置音量等。

那么，为什么要采用这种方法呢？好吧，因为根据技术认证指南，如果用户已经在听歌曲，你不能打断他，而且 SoundEffects 类不能用于背景音乐，因此这种方法是获得这种灵活性的唯一方法。

您可以使用`MediaPlayer.GameHasControl`查看用户是否正在播放音乐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:37:57.230

解决方案是在引用`Microsoft.Xna.Framework`然后使用以下函数：

```
public static void PlaySound(string soundFile)
{
    var stream = Application.GetResourceStream(new Uri(soundFile, UriKind.Relative)).Stream;

    if (stream != null)
    {
        var effect = Microsoft.Xna.Framework.Audio.SoundEffect.FromStream(stream);
        Microsoft.Xna.Framework.FrameworkDispatcher.Update();
        effect.Play();
    }
} 
```

[http://spacemigas.wordpress.com/2011/04/07/overcoming-windows-phone-7-mediaelement-limitations/](http://spacemigas.wordpress.com/2011/04/07/overcoming-windows-phone-7-mediaelement-limitations/)

# python - Python Regex - 识别列表中的第一项和最后一项

> ID：11383949
> 
> 赞同：8
> 
> 时间：2012-07-08T14:37:42.337
> 
> 标签：python, regex

我需要将一些文本文件转换为 HTML 代码。我坚持将列表转换为 HTML 无序列表。示例来源：

> 文档中的一些文本
> * 项目 1
> * 项目 2
> * 项目 3
> 一些其他文本

输出应该是：

```
some text in the document
<ul>
    <li>item 1</li>
    <li>item 2</li>
    <li>item 3</li>
</ul>
some other text 
```

目前，我有这个：

```
r = re.compile(r'\*(.*)\n')
r.sub('<li>\1</li>', the_text_document) 
```

它创建一个没有`< ul >`标签的 HTML 列表。
如何识别第一个和最后一个项目并用`< ul >`标签包围它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:44:58.930

您可以逐行处理您的数据.. 下面这个快速而肮脏的解决方案可能会被整理，但对于您的数据来说，它可以解决问题。

```
with open('data.txt') as inf:
    star_count = 0
    for line in inf:
        line = line.strip()

        if not line.startswith('*'):
            if star_count == 1:
                print'</ul>'
            print line
        else:
            if star_count == 0:
                print '<ul>'
                star_count = 1
            print '  <li>%s</li>'  %line.split('*')[1].strip() 
```

产量：

```
some text in the document
<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>
some other text 
```

根据您的数据的复杂程度，或者如果您有重复的未编号列表等，这将需要修改，您可能想要寻找更通用的解决方案，或者修改此入门代码以满足您的需求，只有您可以决定。

**更新**：

编辑`<li> .. </li>`打印线以摆脱`*`以前留下的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:48:45.713

或使用 BeautifulSoup

[http://www.crummy.com/software/BeautifulSoup/bs4/doc/](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

**编辑**

我显然必须给你一些关于如何阅读文档的提示。

*   打开链接
*   左边有一个大菜单（蓝绿色）
*   如果您仔细看，您会发现文档分为多个部分
    *   东西
    *   在树中导航
    *   搜索树
    *   修改树（明白了）
    *   输出（明白了！）

还有更多的东西

> Beautiful Soup 是一个 Python 库，用于从 HTML 和 XML 文件中提取数据。它与您最喜欢的解析器一起使用，提供导航、搜索和**修改**解析树的惯用方式。**它通常可以节省程序员数小时或数天的工作时间**。

不要在第一句话之后停止阅读......最后一个非常重要，中间是什么。

换句话说，您可以创建一个空文档......让我们说：

```
soup = BeautifulSoup("<div></div>")
document = soup.div 
```

然后你阅读你的每一行文字..然后只要你有文字就这样做。

```
document.append(line) 
```

如果该行以 `*` 开头

```
ul = document.new_tag('ul')
document.append(ul)
document = ul 
```

然后推送`li`文档上的所有内容...一旦您最终阅读`*`，只需弹出父级，以便文档返回到 div。并继续这样做......你甚至可以递归地插入`ul`到`ul`s.

一旦你解析了一切......你可以做

```
str(document) 
```

或者

```
document.prettify() 
```

* * *

**编辑**

刚刚意识到您不是在编辑html，而是在编辑未格式化的文本。然后您可以尝试使用markdown。

[http://daringfireball.net/projects/markdown/](http://daringfireball.net/projects/markdown/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T17:16:52.997

在尝试了一些想法之后，我决定使用第二个正则表达式。所以基本上，在运行第一个正则表达式（来自我的原始帖子，创建`<li>`标签）之后，我运行：

```
r = re.compile(r'(<li>.*?</li>\n(?!\s*<li>))', re.DOTALL)
r.sub('<ul>\\1</ul>', string_with_li_tags) 
```

这将找到`<li>`标签的第一个匹配项和组合的最后一个匹配项`</li>\n`，而不是一个`<li>`标签（本质上意味着整个列表）并添加`<ul>`标签。

编辑：我稍微修改了正则表达式，所以它不会贪婪。这样它就可以处理同一个文档中的多个列表。唯一的要求是列表项之间没有空格，正如下面提到的@Aprillion

编辑 2：修改了负前瞻以处理列表项之间的空格，因此涵盖了所有情况

# database - 非规范化一个或多个表

> ID：11383951
> 
> 赞同：0
> 
> 时间：2012-07-08T14:38:02.300
> 
> 标签：database, denormalization

我目前正在为即将举行的数据库管理考试进行复习。

有一个关于非规范化示例员工数据库的问题。问题如下，schema也如下图所示：

问题：使用“员工”数据库对任意两个（或更多）表进行反规范化以生成 2NF 中的表。您必须准确解释为什么该表是 2NF 而不是 3NF。

架构：

![在此处输入图像描述](../Images/331c0b5452f1753b1363bd1f29c2aa35.png)

**我的答案：**

我会将“工资”表非规范化为“员工”表。为了规范化，我会将 {salary, from_date, to_date} 移动到员工表中并删除“薪水”表。注意：from_date 不再是 'employees' 中主键的一部分。

'employees' 表不再是 3NF，现在是 2NF。这是因为表中引入了“传递依赖”。

传递依赖如下：'salary' 依赖于'from_date'。它是可传递的而不是部分的，因为 'from_date' 不是主键的组成部分。在部分依赖中，行列式必须是主键的一部分。

* * *

基本上对于这个问题，我需要创建一个传递依赖。这个模式似乎有点稀疏，而且日期是主键的一部分这一事实也让我有点失望。

如果上述依赖是错误的，有人可以为我指出一个吗？

另一种可能的解决方案是将“部门”非规范化为“部门”。我可以将“dept_name”添加到“dept_emp”中。但从查看该表的 SQL 可以看出，“dept_no”是主键的一部分。

对此的任何指导将不胜感激。

# java - JQuery 元素选择器不适用于 GWT 生成的 HTML

> ID：11383956
> 
> 赞同：1
> 
> 时间：2012-07-08T14:38:46.937
> 
> 标签：java, jquery, gwt, jquery-masonry

我正在尝试将[jQuery Masonry](http://masonry.desandro.com/index.html)库与我的 GWT 项目集成。但是，我无法使库与 GWT 生成的容器和元素一起使用。但如果我直接在我的 HTML 页面中重写生成的 GWT HTML，它确实有效。

这就是我的 GWT 入口点的样子

```
public class Sample implements EntryPoint {

    //In here the text has random lengths to achieve different div blocks to work with Masonry
    private HTML label1 = new HTML("Text..");
    private HTML label2 = new HTML("Text..");
    private HTML label3 = new HTML("Text..");
    private HTML label4 = new HTML("Text..");
    private Image image1 = new Image("images/samsung.jpg");
    private AbsolutePanel hPanel = new AbsolutePanel();

    public void onModuleLoad() {

        DOM.setElementAttribute(hPanel.getElement(), "id", "content");
        image1.setSize("230px", "400px");
        HTML html = new HTML(image1.toString());
        html.setStyleName("item");
        hPanel.add(html);

        label1.setStyleName("item");
        hPanel.add(label1);

        label2.setStyleName("item");
        hPanel.add(label2);

        label3.setStyleName("item");
        hPanel.add(label3);

        label4.setStyleName("item");
        hPanel.add(label4);

        RootPanel.get("wrapper").add(hPanel);

    }
} 
```

我也有一个这样声明的css文件：

```
#wrapper{
    margin: 0 auto;
    width: 1000px;
}

.item{
    padding: 10px 10px;
    width:230px;
    float: left;
} 
```

这会生成以下 HTML 代码：

```
<div id="wrapper">
            <div id="header">
                <h1>JQuery, Masonry, GWT, GQuery Test</h1>
            </div>

        <div style="position: relative; overflow: hidden;" id="content">
            <div class="item">
                <img src="images/samsung.jpg" class="gwt-Image"
                    style="width: 230px; height: 400px;">
            </div>
            <div class="item" style="">
                Text
            </div>
            <div class="item">text</div>
            <div class="item" style="">text</div>
            <div class="item"><img src="images/samsung.jpg" class="gwt-Image"
                    style="width: 230px; height: 400px;">
            </div>
            <div class="item">text</div>
        </div>
    </div> 
```

最后在我的 HTML 页面中，我有如下所示的 jQuery 调用：

```
 <script type="text/javascript" charset="UTF-8" language="javascript"
src="scripts/jquery-1.7.2.min.js"></script>

        <script type="text/javascript" charset="UTF-8" language="javascript"
src="scripts/jquery.masonry.js"></script>

    <script type="text/javascript" charset="UTF-8">

    $(document).ready(function(){       

        $('#content').masonry();
    });
</script> 
```

当我执行这个 GWT 应用程序时，Masonry 库将无法工作并且不会呈现预期的输出。但是，当我复制 GWT 生成的 HTML 并将其直接粘贴到 HTML 页面中时，该库将正常工作并呈现预期的输出。

[我在 Masonry 网站http://masonry.desandro.com/docs/intro.html](http://masonry.desandro.com/docs/intro.html)中遵循了本教程。有人可以指出这不适用于 GWT 生成的 HTML 的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T18:29:45.333

在您准备好文档时，入口点尚未执行。所以 DOM 还不存在。

为避免此问题，您可以改用 GWTQuery 或从 gwt 调用 javascript 来通知您的 DOM 更新。这看起来像这样：

JavaScript：

```
function domUpdated(){
    //do you jquery stuff here...
} 
```

总重量：

```
private native void tellJavascriptWeAreDone()/*-{
    $wnd.domUpdated();
}-*/; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:26:45.627

看起来 #content-tag 在 document.ready 上尚不存在。只需尝试在那里停止程序（调试器？）并检查生成的 HTML 内容。

可能是ready-event也是生成的javascript GWT的起点，然后id可以稍后设置:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T21:16:30.813

有时这有效。

```
$(window).load(function() {
        // executes when complete page is fully loaded
        //including all frames, objects and images
        var class1 = $('textarea[name="class1_members"]');
        var class0 = $('textarea[name="class0_members"]');
} 
```

# php - 如何在从public_html上上一个文件目录后使用include返回public_html根文件

> ID：11383960
> 
> 赞同：1
> 
> 时间：2012-07-08T14:39:37.810
> 
> 标签：php, security, include, root

基于一些非常有用的提示，我正在使用以下代码来包含`PHP`我的根目录之外的文件，这些文件看起来与此类似：

```
define('WEB_ROOT', __DIR__);
define('APP_ROOT', dirname(__DIR__));
define('PHP_ROOT', APP_ROOT . DIRECTORY_SEPARATOR . 'application');

include(PHP_ROOT . DIRECTORY_SEPARATOR . 'bootstrap.php'); 
```

我的问题是这个，例如，您可以根据`bootstrap.php`上面的内容包含代码。

如果该`PHP`文件引导程序有自己的代码行，在 public_html 根文件夹中包含一个文件 BACK 怎么办......如何编写代码？我在执行此操作时遇到了一些困难，我的目标是我不想将实际的文字目录完整地放入代码中，并且我想避免文件遍历攻击

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T15:01:01.173

考虑这个项目结构：

```
/path/to/projectroot/index.php
                     头文件.php
                     包括/inc.php

```

如果 index.php 有

```
include('include/inc.php'); 
```

和inc.php有

```
include('header.php'); 
```

你会得到那个错误，因为 inc.php 中的行会寻找

```
/path/to/projectroot/include/header.php（不存在）

```

不是

```
/path/to/projectroot/header.php（确实存在）

```

人们有几种方法可以解决这个问题。

**1：绝对路径**

第一个也是最直接的方法是使用绝对路径。

如果 index.php 有

```
include('include/inc.php'); 
```

和inc.php有

```
include('/path/to/projectroot/header.php'); 
```

这会奏效。

**2：带定义的绝对路径**

类似于#1，如果 index.php 有

```
define('PROJECT_ROOT', '/path/to/projectroot/');
include(PROJECT_ROOT.'include/inc.php'); 
```

和inc.php有

```
include(PROJECT_ROOT.'header.php'); 
```

这会奏效。

**更新：**如[pichan](https://stackoverflow.com/users/365488/pichan)评论中所述，您可以在 index.php 中使用[“神奇”常量](http://php.net/manual/en/language.constants.predefined.php)之一，因此：

索引.php

```
define('PROJECT_ROOT', __DIR__.'/');
include(PROJECT_ROOT.'include/inc.php'); 
```

和inc.php

```
include(PROJECT_ROOT.'header.php'); 
```

请注意，我们在此处添加了一个斜杠，`__DIR__`因为：

> 此目录名称没有尾部斜杠，除非它是根目录。

**3：同时包含并隐藏错误**

如果 inc.php 有

```
@include('header.php');    # Try this directory
@include('../header.php'); # Try parent directory 
```

这会奏效。 [1]

**4：除非另有说明，否则假定当前目录**

如果 index.php 有

```
$rel_prefix_to_root = '../';
include('include/inc.php'); 
```

和inc.php有

```
if(!isset($rel_path_to_root)){ $rel_path_to_root = ''; }
include($rel_path_to_root . 'header.php'); 
```

这会奏效。

**我对这些方法的看法**

1 和 2 基本相同，但是 2 对于大型项目来说更容易和更常见，因为它允许您进行一个常量定义并在站点范围内使用它。它还允许您将项目部署在多个服务器上（放置在多个路径中），并且只需要在项目范围内更改一行，而不是选项 1 的每个文件中的一行。

3 太可怕了，别这样。有时您会看到它，您甚至可能会在在线教程中看到它。不要这样做。

可能应该避免使用 4 来支持 1 或 2。但是如果您有一些复杂的包含集，则这种方法可能是必要的。

一些注意事项：

[1] 这是一个糟糕的主意。它有效，但不要这样做。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-08T15:11:27.990

要获取 public_html 上方的目录，我使用以下
$aboveRoot = explode('/public_html', $_SERVER['DOCUMENT_ROOT']);
定义('ABOVE_THE_ROOT', $aboveRoot[0]);

# ios - UImagePicker 从图库中选择图像，如何将图库滚动到底部？

> ID：11383962
> 
> 赞同：1
> 
> 时间：2012-07-08T14:39:52.947
> 
> 标签：ios

我有 UIimagePicker 从图库中获取图像，
但我注意到当应用程序打开图库时，
图库打开并开始显示图库顶部的图像，这是 iphone 中最旧的图像。

我的问题是如何将画廊滚动到底部以首先显示最新的图片，就像我在从画廊上传图片时在**Facebook 应用程序中看到的那样。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T14:45:10.500

我使用以下代码来做到这一点，它对我有用：

```
 UIImagePickerController *picker; 
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) {
        picker = [[UIImagePickerController alloc] init];
        picker.delegate = self;
        picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    } 
```

# objective-c - 哪个 iOS 类/代码返回磁北？

> ID：11383968
> 
> 赞同：8
> 
> 时间：2012-07-08T14:40:36.307
> 
> 标签：objective-c, ios, magnetometer, heading

我想以度数获取设备与磁北的偏差，并在我正在编写的一些代码中使用该值。

我不想使用设备的定位服务，因此我对获得真北不感兴趣，而是对磁北感兴趣（仅使用设备的磁力计）。

哪个类（或编码过程..）可以为我提供该值（仅依靠磁力计）？

CLLocationManager 类及其属性依赖于启用/可用的定位服务

其中，带有 CMMagnetometerData 类的 Core Motion 框架为我们提供了以下属性：

```
@property(readonly, nonatomic) CMMagneticField magneticField

A structure containing 3-axis magnetometer data

typedef struct {
   double x;
   double y;
   double z;
} CMMagneticField; 
```

我如何从中获得学位？还是有其他方法（类/属性/方法）可以单独从磁力计中获取度数？

提前感谢您提供有关此问题的一些有用信息的任何人！:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T20:31:40.967

[iOS 文档](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMagnetometerData_Class/Reference/Reference.html)指出 CMMagneticField 数据是原始数据，这意味着它包括从设备本身及其周围环境引入的偏差。[CMDeviceMotion](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMDeviceMotion_Class/Reference/Reference.html)提供相同的过滤磁场值。

要确定磁北，您应该使用过滤后的值，并且设备应该与地球表面保持水平。

知道磁场的 x 和 y 值，可以使用以下[公式](http://www51.honeywell.com/aero/common/documents/myaerospacecatalog-documents/Defense_Brochures-documents/Magnetic__Literature_Application_notes-documents/AN203_Compass_Heading_Using_Magnetometers.pdf)计算角度（以度为单位的磁北偏角） ：

```
if (y>0): heading = 90.0 - [arcTan(x/y)]*180/π
if (y<0): heading = 270.0 - [arcTAN(x/y)]*180/π
if (y=0, x<0): heading = 180.0
if (y=0, x>0): heading = 0.0 
```

在 Obj-C 中，假设你有一个`CMMagnetometerData`名为 的对象`magnetometerData`，它看起来像：

```
 double heading = 0.0;
 double x = magnetometerData.magneticField.x;
 double y = magnetometerData.magneticField.y;
 double z = magnetometerData.magneticField.z;

 if (y > 0) heading = 90.0 - atan(x/y)*180.0/M_PI;
 if (y < 0) heading = 270.0 - atan(x/y)*180.0/M_PI;
 if (y == 0 && x < 0) heading = 180.0;
 if (y == 0 && x > 0) heading = 0.0; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-08T21:37:25.840

您需要融合传感器来模仿苹果应用程序。他们使用陀螺加速度计和磁力计，以及您可能学过或未学过的高级数学来产生如此清晰的结果。祝你好运。你可能无法模仿它们。

# .net - TPL 数据流和 Rx 组合示例

> ID：11383971
> 
> 赞同：13
> 
> 时间：2012-07-08T14:41:18.240
> 
> 标签：.net, task-parallel-library, system.reactive, c#-5.0, tpl-dataflow

我只想学习两者以及如何一起使用它们。我知道它们可以相互补充，我只是找不到有人实际这样做的例子。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-10T12:56:23.000

让我从一些背景开始。

.NET 框架有许多特殊类型——适当的类或接口—— 、、、、、等等`Task<T>`——它们为基础类型提供了特殊的能力。`IObservable<T>``Nullable<T>``IEnumerable<T>``Lazy<T>``T`

TPL 用于`Task<T>`表示 的单个值的异步计算`T`。

Rx 用于`IObservable<T>`表示 的零个或多个值的异步计算`T`。

正是这两者的“异步计算”方面将 TPL 和 Rx 结合在一起。

现在，TPL 也使用该类型`Task`来表示`Action`lambda 的异步执行，但这可以被认为是`Task<T>`where `T`is的一种特殊情况`void`。非常像 c# 中的标准方法，返回`void`如下：

```
public void MyMethod() { } 
```

Rx 还允许使用称为 的特殊类型来处理相同的特殊情况`Unit`。

TPL 和 Rx 之间的区别在于返回值的数量。TPL 是一且只有一，而 Rx 是零或更多。

因此，如果您通过仅使用返回单个值的可观察序列以特殊方式处理 Rx，您可以以与 TPL 类似的方式进行一些计算。

例如，在 TPL 中我可以写：

```
Task.Factory
    .StartNew(() => "Hello")
    .ContinueWith(t => Console.WriteLine(t.Result)); 
```

在 Rx 中，等价于：

```
Observable
    .Start(() => "Hello")
    .Subscribe(x => Console.WriteLine(x)); 
```

通过指定应该使用 TPL 执行计算，我可以在 Rx 中更进一步，如下所示：

```
Observable
    .Start(() => "Hello", Scheduler.TaskPool)
    .Subscribe(x => Console.WriteLine(x)); 
```

（默认情况下使用线程池。）

现在我可以做一些“混合和匹配”。如果我添加对`System.Reactive.Threading.Tasks`命名空间的引用，我可以很容易地在任务和可观察对象之间移动。

```
Task.Factory
    .StartNew(() => "Hello")
    .ToObservable()
    .Subscribe(x => Console.WriteLine(x));

Observable
    .Start(() => "Hello")
    .ToTask()
    .ContinueWith(t => Console.WriteLine(t.Result)); 
```

注意`ToObservable()`&`.ToTask()`调用以及从一个库到另一个库的翻转。

如果我有一个返回多个值的 observable，我可以使用 observable`.ToArray()`扩展方法将多个序列值转换为可以转换为任务的单个数组值。像这样：

```
Observable
    .Interval(TimeSpan.FromSeconds(1.0))
    .Take(5) // is IObservable<long>
    .ToArray()
    .ToTask() // is Task<long[]>
    .ContinueWith(t => Console.WriteLine(t.Result.Length)); 
```

我认为这是对您问题的一个相当基本的答案。这是你所期待的吗？

# android - 二维码可以被某些扫描仪解码，但不能被其他扫描仪解码？

> ID：11383973
> 
> 赞同：1
> 
> 时间：2012-07-08T14:41:28.210
> 
> 标签：android, qr-code, zxing, encode, save-image

我在Android中通过**zxing**将文本编码为二维码，我得到了位图，然后将其保存为jpg/png。

结果二维码无法被大多数扫描仪解码，只能由 zxing 自己解码（[http://zxing.org/w/decode.jspx](http://zxing.org/w/decode.jspx)）。我知道有很多不同的方法可以进行编码，但我猜生成的二维码应该被大多数扫描仪识别以方便使用？

另外，我希望知道压缩程序是否改变了原来的信息一点？

代码 ：

```
 FileOutputStream stream = new FileOutputStream(path);    
      bitmap.compress(CompressFormat.PNG, 100, stream); 
```

波纹管是两张图片——第一张是程序生成的二维码——我在里面放了纯文本“你好”；第二个是“你好”的二维码之一，大多数扫描仪都可以识别。

谢谢！

![程序生成的二维码——我放的是纯文本](../Images/aacc26d22a8c7e896e1d193b750e1e98.png)

![大多数扫描仪都可以解码二维码](../Images/437c2c74a205c45c2ea8a17678186a27.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:49:42.607

这两个条形码对我来说都是有效的，并用 zxing 解码。

这些绝对是不同的条形码。也就是说，它肯定不是图像格式或压缩的产物。

第一个条形码包含一个指定 UTF-8 编码的 ECI 段。正确有效，zxing读取。如果不是所有读者都支持 ECI，我不会感到惊讶。

对于字符串“hello”，您不需要 ECI 段，因为默认编码可以正常工作。只是不要这样做，生成的 QR 码将在任何地方工作。但是，两者都是有效的。

# objective-c - 第二次点击后搜索方法不起作用

> ID：11383986
> 
> 赞同：1
> 
> 时间：2012-07-08T14:43:51.960
> 
> 标签：objective-c, ios, nsmutablearray, uisearchdisplaycontroller

我的 有问题`UISearchDisplayController`，搜索无法正常工作。

这是我的代码：

```
 - (void)filterContentForSearchText:(NSString*)searchText 
                             scope:(NSString*)scope
{
    [self.searchResults removeAllObjects];

    for (int i = 0; i < [temp_category count]; i++) {
        BOOL foundResult = FALSE;

        if ([[temp_category objectAtIndex:i] rangeOfString:searchText].location != NSNotFound) {
            foundResult = TRUE;
        }
        if ([[price_producttitle objectAtIndex:i] rangeOfString:searchText].location != NSNotFound) {
            foundResult = TRUE;
        }
        if ([[price_type objectAtIndex:i] rangeOfString:searchText].location != NSNotFound) {
            foundResult = TRUE;
        }
        if ([[price_description objectAtIndex:i] rangeOfString:searchText].location != NSNotFound) {
            foundResult = TRUE;
        }
        if (foundResult) {

            NSNumber *result = [NSNumber numberWithInt:i];
            if ([self searchResults] == nil) {
                NSMutableArray *array = [[NSMutableArray alloc] init];
                [self setSearchResults:array];
                [array release];
            }

                [searchResults addObject:result];

        }
    }

    NSLog (@"array = %i", [searchResults count]);
    NSLog(@"%@",searchResults);
}

    -(BOOL)searchDisplayController:(UISearchDisplayController *)controller 
shouldReloadTableForSearchString:(NSString *)searchString
{

    [self filterContentForSearchText:searchString 
                               scope:[[self.searchDisplayController.searchBar scopeButtonTitles]
                                      objectAtIndex:[self.searchDisplayController.searchBar
                                                     selectedScopeButtonIndex]]]; 

    return YES;

}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller 
shouldReloadTableForSearchScope:(NSInteger)searchOption
{
    [self filterContentForSearchText:[self.searchDisplayController.searchBar text] 
                               scope:[[self.searchDisplayController.searchBar scopeButtonTitles]
                                      objectAtIndex:searchOption]]; 

    return YES;
} 
```

但我仍然感到困惑，因为当我从第一个字母开始搜索时，它会给出正确的命中。但是当我输入第二个字母时，它只显示一个结果（据我从数据样本中了解到的还有更多）。我做错了什么。我认为这与用户输入文本时有关，但我很困惑我应该使用哪种方法。

我现在拥有的代码是： [本](http://ygamretuta.me/2011/08/10/ios-implementing-a-basic-search-uisearchdisplaycontroller-and-interface-builder/)教程和 [这个](https://stackoverflow.com/questions/8169889/searchdisplaycontroller-search-multiple-arrays)SO 问题的组合。

有人可以给我一个好的方向提示吗？显示结果很好，只有这方面困扰我。我认为这与触发方法和`[self.searchResults removeAllObjects];`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:43:57.617

我想添加我的代码，但问题是我仍然使用上面的代码，但我手动实现 UISearchBar（我在教程的其他地方找到）而不是使用 SearchDisplayController。我在使用 SearchDisplayController 时导航栏消失时也遇到了困难，这给了我足够的理由自己实现它而不是使用 SearchDisplayController。它给你更多的自由。

起初看起来工作量很大，所以我选择使用 SearchDisplayController，但我真的建议任何需要修改或想要更多自由的人，请使用 UISearchBar 和 UITableView 手动进行 :)

# python - rabbitmq python - 为成千上万的用户扩展的通知设计模式

> ID：11383990
> 
> 赞同：1
> 
> 时间：2012-07-08T14:44:15.627
> 
> 标签：python, rabbitmq, celery, tornado

我们的网站有大约 50,000 名用户，每日活跃流量相当不错。我们正在为我们的用户群设计一个新的通知功能。

我们的要求如下：

1.  用户属于不同的组。
2.  一个用户可以是多个组的一部分。
3.  当用户在组中上传图像时，该特定组的所有成员都应该收到“新图像上传”的通知，无论是在线还是离线。

我们考虑为每个用户创建每个组和队列的rabbitmq交换。但是在设计正确的方式前感到困惑！

比如说，即使用户在通知生成后几天登录站点，他也应该收到通知。我们最终将消息存储在数据库中，这对离线用户来说根本不是一件好事。

有人可以建议适当的设计模式并解释这个用例吗？我们正在使用 celery + rabbitmq + tornado。龙卷风应该直接与芹菜消费者对话吗？用户离线时消息存储在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:18:55.083

我有类似的项目。那么它是如何工作的：

*   将消息从您的事件源（django、celery、无处不在）发送到您的兔子队列
*   您可以使用 pika+tornado IOLoop（所以当消息到达 tornado 时，您将通过 pika loop 收到通知，当请求来自 http 或通过 Tornado 连接 websocket 时）
*   使用 TornaodApplication websockets 中打开的集合为用户发送消息

您可以通过我的 github 上的 torando+rabbitmq 记录非常接近的项目：[https ://github.com/rmuslimov/RapidLog](https://github.com/rmuslimov/RapidLog)

# java - Signing Properties: Fx Build Configuration

> ID：11383992
> 
> 赞同：0
> 
> 时间：2012-07-08T14:44:27.443
> 
> 标签：java, javafx-2, keystore, jar-signing

In `Eclipse EE 3.7`, I've installed the `JavaFX SDK` and created a `JavaFX Project`. When I open the `build.fxbuild` file and select the `Build Properties` tab, there's a section titled `Signing Properties`. And it asks for the following information,

*   Keystore
*   Store-Password
*   Alias
*   Key-Password

For the `Keystore` field, it provides options for browsing the filesystem and workspace, but I don't know where to locate the keystore. Can anybody help me figure out how to do information signing via an Fx Build Configuration file?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:45:08.773

For many applications (for example a standalone application), code signing is simply not required - it can introduce complications and can degrade performance and user experience. Code signing is only required for WebStart and Browser Embedded applications which require resources [outside of the Java sandbox](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html). If you are certain you actually need to sign your application, then continue reading.

Here are the steps to [create your own keystore for signing](http://docs.oracle.com/javase/tutorial/security/toolsign/step3.html) using the java [keytool](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/keytool.html). For test purposes you can generate your own self signed certificates. For a real application deployed to the general public which minimizes security warnings, it is best to [purchase a code signing certificate](https://www.thawte.com/code-signing/content-signing-certificates/sun-java/index.html).

An example commmand line for creating a keystore to be used for code signing is:

```
keytool -genkey -alias signFiles -keystore examplestore 
```

You will be prompted to enter passwords for the key and keystore.

The [JavaFX deployment packaging documentation](http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABJGFBH) has information on how to sign applications via the standard JavaFX SDK. You could just follow that description and sign your jars using, for instance, the JavaFX ant tasks.

However, it would seem that Eclipse has some inbuilt functionality for doing the signing. If you want to take advantage of that, follow the instructions above to create your keystore. After you have an appropriate keystore, enter the values used in creating the keystore into the appropriate fields for the Eclipse IDE to perform the signing.

Matching the fields up with the example command line for keystore generation I provided earlier.

```
Keystore - file location of the keystore containing your signing key: examplestore
Store-Password - password you assigned to access the keystore
Alias - friendly name to refer to the key: signFiles
Key-Password - password you assigned to access the key in the keystore 
```

* * *

Although there is a default keystore provided in the Java JDK installation directory, this is not usually the same keystore which would be associated with your own signing keys and certificate. The keystore provided with the JDK is primarily used to store certificates for certificate authorities used in validating SSL connections. As the java keystores produced by a given jdk vendor follow one generic format, you could also use it for storing signing keys and certificates. However, I would not advise this and would instead advise creating and using your own keystore. Generally you want to keep the keystore containing your code signing keys separate from other information, backed up and very secure.

# html - 在 silverlight 应用程序顶部显示 HTML 内容

> ID：11383998
> 
> 赞同：0
> 
> 时间：2012-07-08T14:45:05.523
> 
> 标签：html, silverlight

是否可以在 Silverlight 应用程序之上显示 HTML 内容（例如在 DIV 中）？如果它需要无窗口没问题，但我希望程序是全屏的。事实上我有一个全屏silvleright应用程序（VS2010，C#），我需要在我的程序中间显示一个小的html内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:14:03.657

是的，你可以喜欢这个

```
<div id="silverlightcontrol"></div>
<div id="content"></div> 
```

CSS：

```
#content{position:absolute; top:50%; left:50%; width:300px; height:300px; margin:-150px 0 0 -150px;}
#silverlightcontrol{position:absolute; width:100%; height:100%; left:0px; top:0px;} 
```