# StackOverflow 问答 10870000-10870999

# jquery - jQuery插件，用于绘制简单形状的场景，支持拖放

> ID：10870000
> 
> 赞同：0
> 
> 时间：2012-06-03T11:39:44.837
> 
> 标签：jquery, drag-and-drop, draw

我正在寻找一些可以帮助我实现以下目标的 jQuery 插件：

1.  向用户展示一些固定大小的画布，用于安排“场景”
2.  允许将基本形状、自定义对象放到场景中
3.  支持场景中元素的拖放
4.  支持“截图到网格”

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:43:19.080

您应该尝试[jqueryui](http://jqueryui.com/)，它提供了许多具有强大功能的 ui 元素，如拖放等，并免费提供浏览器兼容性。

要获得类似网格捕捉的功能，请使用以下设置：

```
$(function() {
    $( "#draggable" ).draggable({
        containment: "parent",
        grid: [10, 20],
        drag: function() {
            // custom code
        }
    }); 
```

});

还有更多不错的设置，例如捕捉到其他元素等。请参阅[此处的完整文档](http://jqueryui.com/demos/draggable/#event-drag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:38:57.840

jquery UI 不是我要找的库，因为它只提供对 Drag'n'Drop 的支持，仅此而已。我发现的一个特别有趣的库是[http://raphaeljs.com/](http://raphaeljs.com/)。您可以轻松地构建一个用户可以在其上绘制自定义形状的画布，它具有许多可以减少样板代码的内置工具，并且还支持 D'n 'D。我认为 Snap to Grid 可以手动执行，但我发现这个库非常好用且功能强大。

我会等待其他答复，也许有人知道更好的事情。

**编辑** raphaeljs 似乎无法处理开箱即用的拖放图像（需要一些自定义代码）。我再次使用 jQuery UI，并认为它要好得多。

# html - 使用 CSS3 样式化导航菜单

> ID：10870009
> 
> 赞同：0
> 
> 时间：2012-06-03T11:40:45.587
> 
> 标签：html, css, user-interface, navigation

请看一下[这个导航菜单](http://jsfiddle.net/tt13/DBzSD/1/)

目前它看起来像下面

![在此处输入图像描述](../Images/7aee662f70e88a8434580ba9fec00bed.png)

我想要实现的结果如下所示（我在 Photoshop 上制作的）

![在此处输入图像描述](../Images/abdde5d4ea05266b2b6a776477539f9d.png)

用 CSS3 可以得到这个结果吗？如果是，请帮助我。想不通，怎么得到这个结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:45:03.437

开始了

[http://jsfiddle.net/DBzSD/11/](http://jsfiddle.net/DBzSD/11/)

我已经使用 CSS 伪元素来显示它们，如果你愿意，你可以用普通元素替换它们，但这不是一个非常明智的选择。

其次，我使用数据属性来显示数字的值，您可以使用非常少量的 javascript 动态更改数字，这将自动更改框中显示的数字 :-)

希望有帮助..

抱歉，我没发现你的悬停效果:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:55:31.827

我找不到您在悬停事件上指定边框的位置，但我会将绿线作为 div 的一部分，然后将三角形用作 div 内的图像。

看看这个小提琴[http://jsfiddle.net/Neograph734/DBzSD/8/](http://jsfiddle.net/Neograph734/DBzSD/8/)

# vb.net - 使用叠加或填充多边形在图片中着色

> ID：10870010
> 
> 赞同：1
> 
> 时间：2012-06-03T11:40:48.037
> 
> 标签：vb.net

我正在尝试创建一个 VB.net 表单应用程序，以根据预订状态直观地填写具有不同颜色的平面图。

基本的平面图是白色的，想法是根据一些变量为各种公寓涂上不同的颜色。

我曾尝试将 .png 图片叠加在一起，但这不起作用，因为只要您叠加超过 2 个 PNG，Visual Studio 中的透明度就具有非真实性质。

绘制多边形也不太成功

这是我想要实现的目标，如果您提供一些帮助或建议，我将不胜感激：

![在此处输入图像描述](../Images/ab39b898ddc431970d4e2925a63d17ea.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T12:07:21.090

尝试使用具有 alpha 值的画笔在图像上绘制：

```
Protected Overrides Sub OnPaint(e As PaintEventArgs)
  e.Graphics.DrawImage(backImage, New Point(0, 0))

  Dim room As New List(Of Point)
  room.Add(New Point(45, 48))
  room.Add(New Point(165, 48))
  room.Add(New Point(190, 75))
  room.Add(New Point(190, 234))
  room.Add(New Point(150, 234))
  room.Add(New Point(150, 245))
  room.Add(New Point(45, 245))

  Using br As New SolidBrush(Color.FromArgb(100, Color.Blue))
    e.Graphics.FillPolygon(br, room.ToArray())
  End Using
  Using p As New Pen(Color.Blue, 3)
    e.Graphics.DrawPolygon(p, room.ToArray())
  End Using

  MyBase.OnPaint(e)
End Sub 
```

结果：

![在此处输入图像描述](../Images/ff58020c61017b4f4d9164d02b40f242.png)

# r - 向 quantmod/xts 添加一个因子列

> ID：10870011
> 
> 赞同：3
> 
> 时间：2012-06-03T11:40:47.933
> 
> 标签：r, xts, quantmod, r-factor

我在这里做错了什么？

```
library(quantmod)
getSymbols('^GSPC')
b <- tail(GSPC, 20) #for brevity
is.factor(factor(Cl(b), labels=c('A')))
> TRUE
b$f <- factor(Cl(b), labels=c('A'))
is.factor(b$f)
[1] FALSE 
```

我希望我的 xts/quantmod 对象中的一列成为一个因素。我不知道为什么它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T11:54:42.430

它不起作用，因为 xts/zoo 对象是具有索引属性的矩阵，您不能在矩阵中混合类型。 `GSPC`包含数字数据，因此您只能添加数字列。

# c - 正确的 C 类型转换

> ID：10870013
> 
> 赞同：1
> 
> 时间：2012-06-03T11:41:26.723
> 
> 标签：c, casting

我不太确定正确的转换，尤其是从 unsigned int 和 #defines （无论是什么类型）到加倍。

在这个例子中

```
#define SPEEDSENSOR_EDGES_NUM 10

int speed_counter_left;

double result = speed_counter_left / SPEEDSENSOR_EDGES_NUM; 
```

当 speed_counter_left < 10 时，结果始终为 0。

所以我加入了一些演员表：

```
double result = (double) ((double) speed_counter_left / (double) SPEEDSENSOR_EDGES_NUM); 
```

这是正确的，但我认为演员太多了。我怎样才能用最少的演员找出正确的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T11:42:40.447

有一个`double`操作数就足够了：

```
double result = (double)speed_counter_left / SPEEDSENSOR_EDGES_NUM; 
```

演员“*坚持*”最接近`speed_counter_left`。所以它本质上相当于：

```
double result = ((double)speed_counter_left) / SPEEDSENSOR_EDGES_NUM; 
```

* * *

> 和#defines（无论是什么类型）加倍。

标准说：

> *6.4.4.1 - 5*
> 
> 整数常量的类型是可以表示其值的对应列表中的第一个。

并且（对于没有后缀的十进制常量）列表如下：`int`, `long int`, `long long int`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:49:12.057

无需强制转换，`SPEEDSENSOR_EDGES_NUM`通过`double`使用`10.0`而不是`10`.

```
#define SPEEDSENSOR_EDGES_NUM 10.0

int speed_counter_left;

double result = speed_counter_left / SPEEDSENSOR_EDGES_NUM; 
```

# spring-security - Spring security core 和 spring security crypto maven artifacts（重复类）

> ID：10870015
> 
> 赞同：0
> 
> 时间：2012-06-03T11:41:40.040
> 
> 标签：spring-security

我正在使用 maven shade 插件（一个 uberjar）构建一个独立的 jar，并且我收到所有 spring-security-crypto 类的警告：

```
[WARNING] We have a duplicate org/springframework/security/crypto/bcrypt/BCrypt.class in ***\.m2\repository\org\springframework\security\spring-security-crypto\3.1.0.RELEASE\spring-security-crypto-3.1.0.RELEASE.jar
[WARNING] We have a duplicate org/springframework/security/crypto/bcrypt/BCryptPasswordEncoder.class in ***\.m2\repository\org\springframework\security\spring-security-crypto\3.1.0.RELEASE\spring-security-crypto-3.1.0.RELEASE.jar
[WARNING] We have a duplicate org/springframework/security/crypto/codec/Base64.class in ***\.m2\repository\org\springframework\security\spring-security-crypto\3.1.0.RELEASE\spring-security-crypto-3.1.0.RELEASE.jar
[WARNING] We have a duplicate org/springframework/security/crypto/codec/Hex.class in ***\.m2\repository\org\springframework\security\spring-security-crypto\3.1.0.RELEASE\spring-security-crypto-3.1.0.RELEASE.jar
[WARNING] We have a duplicate org/springframework/security/crypto/codec/InvalidBase64CharacterException.class in ***\.m2\repository\org\springframework\security\spring-security-crypto\3.1.0.RELEASE\spring-security-crypto-3.1.0.RELEASE.jar
[WARNING] We have a duplicate org/springframework/security/crypto/codec/package-info.class in ***\.m2\repository\org\springframework\security\spring-security-crypto\3.1.0.RELEASE\spring-security-crypto-3.1.0.RELEASE.jar
[WARNING] We have a duplicate org/springframework/security/crypto/codec/Utf8.class in ***\.m2\repository\org\springframework\security\spring-security-crypto\3.1.0.RELEASE\spring-security-crypto-3.1.0.RELEASE.jar
[WARNING] We have a duplicate org/springframework/security/crypto/encrypt/AesBytesEncryptor$1.class in ***\.m2\repository\org\springframework\security\spring-security-crypto\3.1.0.RELEASE\spring-security-crypto-3.1.0.RELEASE.jar
[WARNING] We have a duplicate org/springframework/security/crypto/encrypt/AesBytesEncryptor.class in ***\.m2\repository\org\springframework\security\spring-security-crypto\3.1.0.RELEASE\spring-security-crypto-3.1.0.RELEASE.jar
... 
```

我查看了 spring-security-core jar，发现它包含 spring-security-crypto 包含的所有类。此外，在比较来源时，您会看到它们是相同的。

我知道我可以忽略它，因为类是相同的，但是：

1.  如果 spring-security-core 中的类没有更新，这可能会改变。
2.  更重要的是我不明白为什么会这样？重要的是要注意 spring-security-core 本身对 spring-security-crypto 有编译依赖，这完全让我感到困惑。

希望有任何解释和解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T01:23:21.973

这是[3.1.0 中的错误](https://jira.springsource.org/browse/SEC-1907)。从核心到加密不应该存在依赖关系。单独的加密 jar 仅用于其他一些不使用 Spring Security 的 Spring 项目。这是构建配置方式的副作用，它最终出现在核心 pom.xml 中。

只需将[Maven 排除](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)项添加到您的 pom 依赖项中，`spring-security-core`以阻止它将 crpyto jar 作为传递依赖项拉入。

# c# - 为什么 .NET 线程的性能不如分离 .NET 进程？

> ID：10870016
> 
> 赞同：2
> 
> 时间：2012-06-03T11:41:46.890
> 
> 标签：c#, multithreading, performance

最近我一直在观察一个有趣的现象，在我基于它重新设计我的整个软件架构之前，我想知道为什么会发生这种情况，以及是否有可能使线程性能与进程性能相提并论。

通常，任务是下载某些数据。如果我们用 6 个线程创建一个进程，基于 Parallel 库，下载大约需要 10 秒。

但是，如果我们创建 6 个进程，每个进程都是单线程的，并下载相同的数据，那么整个过程只需要大约 6 秒。

这些数字经过彻底验证且具有统计意义，因此请务必将其视为理所当然。

观察结果涵盖了一个大型（100 次试验）数据集，我观察到没有偏离这种行为。

基本上，问题是，为什么非同步多线程进程比具有完全相同工作代码的几个单独进程慢，以及如何修复它？

提前致谢！

注意：我读过类似的问题，但答案并不令人满意和实用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:57:42.667

我的猜测与 svick 的猜测相同：运行时可能会插入某种瓶颈。

一般来说，您可以使用 Fiddler 或 Wireshark 之类的工具来查看 10 次下载是如何交错的。在您的情况下，我希望任何时候只有两个活动，一旦一个完成，另一个将立即开始。

在你去改变设置之前，你应该明白它为什么在那里。它被写入 HTTP 规范作为建议的客户端行为，以免使服务器不堪重负。如果您的代码要分发到成百上千/百万台机器上，您应该考虑每个客户端同时下载 10 次的影响。

# java - 使用给定的 IP 地址查找 DNS 名称

> ID：10870022
> 
> 赞同：-1
> 
> 时间：2012-06-03T11:42:26.857
> 
> 标签：java, url, dns, certificate

我的系统中安装了一台服务器。它采用其中一个 IP 地址并充当自己的系统。

在我的 java 程序中，我使用以下代码连接到该服务器。

```
ServiceInstance si = new ServiceInstance(new URL("https://10.100.13.36/sdk"), "user", "password", true); 
```

true 表示忽略证书为真。

当我尝试使用 false 参数执行时，它会显示以下错误。

```
CertificateException: No subject alternative names matching IP address 10.100.13.36 found 
```

我到了这里，在服务器证书模式的情况下，我必须使用 dns 名称而不是 ip 地址。

所以我在服务器配置设置中发现服务器将 DNS 名称作为 localhost.localdomain

所以我尝试使用 url 作为[https://localhost.localdomain/sdk](https://localhost.localdomain/sdk)

它显示了 localhost.locadomain 未找到的错误。

我猜它与 localhost 作为我的系统和`localhost.localdomain`我的服务器 dns 名称的 DNS 名称解析存在一些问题。

我们可以通过java程序找到带有ip地址的dns名称吗？这样它就可以自己找到DNS名称并在url中传递值。

任何人都可以对此提出一些建议。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:13:52.810

DNS 名称由您的本地 DNS 服务器分配。该名称`localhost.localdomain`通常在主机文件中分配，因此各种本地操作功能（例如，系统日志记录，从定期任务向根用户发送电子邮件）。我猜您的服务器未在本地 DNS 服务器中注册。很少有本地运行的虚拟机实际上在 DNS 中进行有效注册 - 对于在 Windows 环境中运行的 Linux 系统尤其如此。

如果它已在 DNS 中注册，并且您的服务器和客户端都使用相同的 DNS 层次结构，那么您需要做的就是`java.net.InetAddress`使用机器的 IP 地址创建一个并调用`getCanonicalHostName()`以检索其 DNS 名称。如果它没有在本地 DNS 服务器中注册的名称，那么您将简单地获取 IP 地址。

# perl - perl 中的 Munin 插件无法获取正确的数据

> ID：10870024
> 
> 赞同：0
> 
> 时间：2012-06-03T11:42:35.647
> 
> 标签：perl, munin

我正在尝试使用 Munin 插件进行软件突袭。这是插件的代码：[https ://github.com/munin-monitoring/contrib/blob/master/plugins/disk/raid](https://github.com/munin-monitoring/contrib/blob/master/plugins/disk/raid)

目前我的团队正在重建，这是当前的输出：

```
# cat /proc/mdstat 
Personalities : [raid0] [raid1] [raid6] [raid5] [raid4] [raid10] 
md2 : active raid1 sda3[0] sdb3[1]
      2925544767 blocks super 1.2 [2/2] [UU]
      [==>..................]  resync = 14.4% (422554560/2925544767) finish=5246.6min speed=7950K/sec

md1 : active raid1 sda2[0] sdb2[1]
      524276 blocks super 1.2 [2/2] [UU]
        resync=DELAYED

md0 : active raid1 sda1[0] sdb1[1]
      4193268 blocks super 1.2 [2/2] [UU]
        resync=DELAYED

unused devices: <none> 
```

但是当我运行插件时，我得到以下输出（说明所有磁盘都已同步）：

```
# munin-run raid
md2.value 100
md2_rebuild.value 100
md1.value 100
md1_rebuild.value 100
md0.value 100
md0_rebuild.value 100 
```

在以下几行中，我了解（我不是程序员）在代码运行期间，`$pct`>= 100，因此`$rpct`设置为 100（这是我对所有 raid 数组的输出）。那么哪些值在我的输出中起作用`$nact`并代表？这将帮助我找出为什么 $pct >= 100。`$nmem``cat /proc/mdstat`

```
my $pct = 100 * $nact / $nmem;
        my $rpct = 100;
        if ( $pct < 100 ) {
        my @output = `/sbin/mdadm -D /dev/$dev | grep Rebuild`;
        if( $output[0] =~ /([0-9]+)% complete/ ) {
            $rpct = $1;
        } else {
            $rpct = 0;
        } 
```

我认为这个正则表达式拥有答案，但正如我所说，我不是程序员：P

```
while ($text =~ /(md\d+)\s+:\s+active\s+(\(auto-read-only\)\s+|)(\w+)\s+(.*)\n.*\[(\d+)\/(\d+)]\s+\[(\w+)]/ ) {
    my($dev,$dummy,$type,$members,$nmem,$nact,$status) = ($1,$2,$3,$4,$5,$6,$7); 
```

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:20:04.880

改变这个：

```
if ( $pct < 100 ) { 
```

对此：

```
if ( $pct <= 100 ) { 
```

并确保您以 root 身份运行插件

# c# - XML反序列化给出空值

> ID：10870030
> 
> 赞同：1
> 
> 时间：2012-06-03T11:43:17.973
> 
> 标签：c#, asp.net, xml, xml-serialization

我有一个 XML 字符串，例如

```
<?xml version="1.0"?>
<FullServiceAddressCorrectionDelivery xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <AuthenticationInfo xmlns="http://www.usps.com/postalone/services/UserAuthenticationSchema">
    <UserId xmlns="">FAPushService</UserId>
    <UserPassword xmlns="">Password4Now</UserPassword>
  </AuthenticationInfo>
</FullServiceAddressCorrectionDelivery> 
```

为了用类映射节点，我有像这样的类结构

```
 [Serializable]
public class FullServiceAddressCorrectionDelivery
{
    [XmlElement("AuthenticationInfo")]
    public AuthenticationInfo AuthenticationInfo
    {
        get;
        set;
    }

}

[Serializable]
public class AuthenticationInfo 
{
    [XmlElement("UserId")]
    public string UserId
    {
        get;
        set;

    }
    [XmlElement("UserPassword")]
    public string UserPassword
    {
        get;
        set;

    }

} 
```

对于反序列化，我使用 xmlserializer 反序列化对象

```
 byte[] byteArray = System.Text.Encoding.ASCII.GetBytes(xmlString);
        MemoryStream stream = new MemoryStream(byteArray);
        XmlSerializer xs = new XmlSerializer(typeof(FullServiceAddressCorrectionDelivery));
        var result = (FullServiceAddressCorrectionDelivery)xs.Deserialize(stream); 
```

但值 FullServiceAddressCorrectionDelivery 对象始终为空..请帮助我在这里做错了什么....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:10:50.327

[如此处](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlelementattribute.namespace.aspx)所述，在 XmlElement 属性上添加命名空间

```
 [Serializable]
    public class FullServiceAddressCorrectionDelivery
    {
        [XmlElement("AuthenticationInfo", 
              Namespace = 
              "http://www.usps.com/postalone/services/UserAuthenticationSchema")]
        public AuthenticationInfo AuthenticationInfo
        {
            get;
            set;
        }
    }

    [Serializable]
    public class AuthenticationInfo
    {
        [XmlElement("UserId", Namespace="")]
        public string UserId
        {
            get;
            set;
        }
        [XmlElement("UserPassword", Namespace = "")]
        public string UserPassword
        {
            get;
            set;
        }
    } 
```

# c# - how to add certain number of whitespaces to StringBuilder?

> ID：10870037
> 
> 赞同：8
> 
> 时间：2012-06-03T11:44:37.363
> 
> 标签：c#

How can I add certain number (between 1 and 100) of whitespaces to StringBuilder?

```
StringBuilder nextLine = new StringBuilder();
string time = Util.CurrentTime;
nextLine.Append(time);
nextLine.Append(/* add (100 - time.Length) whitespaces */); 
```

What would be "ideal" solution? `for` loop is ugly. I can also create array where `whitespaces[i]` contains string which contains exactly `i` whitespaces, but that would be pretty long hardcoded array.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-03T11:47:40.610

You can use the [`StringBuilder.Append(char,int)`](http://msdn.microsoft.com/en-us/library/yxyxbz2e.aspx) method, which repeats the specified Unicode character a specified number of times:

```
nextLine.Append(time);
nextLine.Append(' ', 100 - time.Length); 
```

Better yet, combine both appends into a single operation:

```
nextLine.Append(time.PadRight(100)); 
```

This would append your `time` string, followed by `100 - time.Length` spaces.

**Edit**: If you’re only using the `StringBuilder` to construct the padded time, then you can do away with it altogether:

```
string nextLine = time.PadRight(100); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T11:52:36.307

You can use the [StringBuilder.Append overload](http://msdn.microsoft.com/en-us/library/yxyxbz2e.aspx) that takes a `char` and an `int`:

```
nextLine.Append(' ', 100 - time.Length); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T11:48:09.060

Use PadLeft -

```
nextLine.Append(String.Empty.PadLeft(' ', 100 - time.Length)); 
```

# ios - iOS 中的自适应 PayPal 支付

> ID：10870038
> 
> 赞同：5
> 
> 时间：2012-06-03T11:45:11.233
> 
> 标签：ios, paypal

是否有任何文档可用于使用 iOS 进行 paypal 的自适应付款？

我有一个文档，但我找不到任何用于使用 iOS 实现 PayPal 并行支付的源代码。任何人都可以帮助我了解 iOS 的自适应支付。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:53:12.187

您可以使用移动支付下的适用于 ios[的paypal sdk。](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)zip 文件包含库、示例代码和文档。基本上，要使用并行支付，您只需设置多个付款接收方。还有一个例子，介绍了如何实现简单支付、链式支付和前置审批。

# sql - 如何使用 MS Access 数据库在 SSIS 中使用事务范围？

> ID：10870039
> 
> 赞同：-1
> 
> 时间：2012-06-03T11:45:15.490
> 
> 标签：sql, ms-access, ssis

使用 MS Access DB 几乎总是一件痛苦的事。真正痛苦的是，在使用 OLE-DB 连接访问 MS Access 文件时，您甚至不能在 SSIS 中使用分布式事务。即使您只是想阅读它！怎么回事？那是什么样的交易支持？那么有人可以告诉我在这种情况下如何使 SSIS 包具有事务性吗？使用正常的事务模式会导致`The Acquire Connection manager failed with error code 0xC0202009`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T22:19:09.570

我遇到过这样的场景（古老的 MySQL 实例和他们拒绝我们创建事务权限的 DB2），我发现一个有效的解决方案是在[原始文件](http://consultingblogs.emc.com/jamiethomson/archive/2006/12/12/SSIS_3A00_-Dropping-data-into-a-raw-file.aspx)中缓存不支持事务的源，缓存连接经理或记录集目标。为了简单起见，原始文件将是我的“首选”，但根据组件要求可能需要其他文件。

包的一般外观如下： 事务设置为必需的包（或封闭容器）。这将创建一个包含可以登记的任务的事务。然后我创建一个明确选择退出事务的“启动器”容器（事务选项：不支持）。这就是我们想要访问不支持事务的资源的地方。默认事务选项 Supported 意味着如果有可用的事务，它将加入一个打开的事务。我将所有需要事务的任务放在支持的容器中。

![包非事务布局](../Images/09f8dc68c29181c7b7f9427920881613.png)

在事务之外的数据流中，我转储到一个 RAW 文件。我使用在“正常”事务支持的源中使用的相同查询。

![本地缓存](../Images/a815af2305442dffba146fafb5fa2578.png)

在使用缓存输出的数据流中，我使用了第一步中生成的文件，瞧，事务按预期在目的地工作，并且在不支持它的源上没有尝试任何事务。

![缓存源](../Images/220b1fa24e32f69da08c727b62167931.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:47:42.600

您可以将`RetainSameConnection`OLE DB 连接管理器上的属性设置为`True`，例如在写入 SQL Server 时，如此[处所示](http://consultingblogs.emc.com/jamiethomson/archive/2005/08/20/SSIS-Nugget_3A00_-RetainSameConnection-property-of-the-OLE-DB-Connection-Manager.aspx)。这反过来使您能够`BEGIN TRANSACTION`在一个**执行 SQL 任务**中编写一个，然后选择另一个`COMMIT`或`ROLLBACK`另一个。

但请注意：避免松散的结局，因为这会在并行运行任务时创建多个连接。你必须创建一个从 BEGIN TRAN 到 COMMIT 的链，否则它会失败。

请参阅[http://www.morrenth.com/transaction-and-retainsameconnection-in-ssis-ole-db-connection-manager.aspx](http://www.morrenth.com/transaction-and-retainsameconnection-in-ssis-ole-db-connection-manager.aspx)

# mysql - 所有项目的 5 天移动平均线

> ID：10870040
> 
> 赞同：1
> 
> 时间：2012-06-03T11:45:21.633
> 
> 标签：mysql, average

下面是我的MYSQL表结构

```
ticker
_date
open
high
low
close
volume 
```

以下是样本数据

```
ALMOND-I,2012-03-27,373.5000,395.0000,373.5000,380.2500,10
ALMOND-I,2012-03-31,391.0000,391.0000,386.0000,387.0000,5
ALMOND-I,2012-04-03,378.5000,386.0000,364.5000,378.5000,14
ALMOND-I,2012-04-11,380.0000,389.5000,370.7500,380.0000,3
ALMOND-I,2012-04-12,391.0000,391.0000,370.2500,380.7500,2
ALMOND-I,2012-04-16,392.0000,392.0000,392.0000,392.0000,1
ALMOND-I,2012-04-18,380.2500,380.2500,380.2500,380.2500,1
ALMOND-I,2012-05-02,371.0000,393.5000,371.0000,381.5000,6
ALMOND-I,2012-05-15,393.0000,393.0000,393.0000,393.0000,1
ALMOND-I,2012-05-21,416.7500,417.0000,393.0000,398.5000,10
ALMOND-I,2012-05-22,410.5000,410.5000,410.5000,410.5000,1
ALMOND-I,2012-05-30,435.2500,435.2500,435.2500,435.2500,1
ALUMINIUM-I,2012-05-22,110.8000,110.9500,110.2500,110.7000,4939
ALUMINIUM-I,2012-05-23,110.9000,111.4500,110.7500,111.2500,6996
ALUMINIUM-I,2012-05-24,111.0000,111.4500,109.9000,110.4500,7111
ALUMINIUM-I,2012-05-25,110.4500,110.6000,109.4000,109.7000,5020
ALUMINIUM-I,2012-05-26,109.6000,109.8500,109.6000,109.8000,116
ALUMINIUM-I,2012-05-28,109.4000,110.3000,109.3500,110.1500,2614
ALUMINIUM-I,2012-05-29,110.4500,111.0500,110.3000,110.8500,3956
ALUMINIUM-I,2012-05-30,110.9000,111.0500,110.1000,110.9500,5208
ALUMINIUM-I,2012-05-31,110.9500,111.7500,110.7500,111.3500,3553
ALUMINIUM-I,2012-06-01,111.1500,111.3000,108.7000,108.8500,7532
ALUMINIUM-I,2012-06-02,108.8000,108.8000,108.1000,108.2500,555
GOLD-I,2012-05-21,29018.0000,29174.0000,28956.0000,29035.0000,33330
GOLD-I,2012-05-22,29068.0000,29190.0000,28827.0000,29087.0000,45281
GOLD-I,2012-05-23,29026.0000,29084.0000,28831.0000,28969.0000,50523
GOLD-I,2012-05-24,29020.0000,29102.0000,28854.0000,28880.0000,45170
GOLD-I,2012-05-25,28841.0000,28937.0000,28748.0000,28902.0000,32176
GOLD-I,2012-05-26,28964.0000,28964.0000,28918.0000,28925.0000,1427
GOLD-I,2012-05-28,28901.0000,29055.0000,28882.0000,28965.0000,17158
GOLD-I,2012-05-29,28994.0000,29135.0000,28819.0000,28859.0000,39300
GOLD-I,2012-05-30,28845.0000,29154.0000,28755.0000,29117.0000,38733
GOLD-I,2012-05-31,29120.0000,29198.0000,29005.0000,29148.0000,22810
GOLD-I,2012-06-01,29130.0000,29871.0000,28765.0000,29724.0000,4753
GOLD-I,2012-06-02,29745.0000,29929.0000,29740.0000,29866.0000,337
SILVER-I,2012-05-21,54525.0000,54805.0000,53865.0000,54130.0000,66128
SILVER-I,2012-05-22,54187.0000,55119.0000,53873.0000,54392.0000,78147
SILVER-I,2012-05-23,54250.0000,54250.0000,53320.0000,53818.0000,87066
SILVER-I,2012-05-24,53999.0000,54785.0000,53980.0000,54317.0000,74940
SILVER-I,2012-05-25,54250.0000,54500.0000,53882.0000,54426.0000,61457
SILVER-I,2012-05-26,54481.0000,54535.0000,54465.0000,54479.0000,1535
SILVER-I,2012-05-28,54533.0000,54867.0000,54302.0000,54351.0000,33566
SILVER-I,2012-05-29,54448.0000,54885.0000,53790.0000,53964.0000,82448
SILVER-I,2012-05-30,53900.0000,54578.0000,53560.0000,54483.0000,87322
SILVER-I,2012-05-31,54377.0000,54465.0000,53820.0000,54110.0000,72225
SILVER-I,2012-06-01,54002.0000,54682.0000,52813.0000,54445.0000,107052
SILVER-I,2012-06-02,54530.0000,54610.0000,54451.0000,54487.0000,2371
WHEAT-I,2010-07-22,1276.9000,1276.9000,1228.2000,1247.9000,3
WHEAT-I,2010-07-23,1258.0000,1258.0000,1258.0000,1258.0000,2
WHEAT-I,2010-07-29,1245.0000,1245.0000,1245.0000,1245.0000,1
WHEAT-I,2010-07-30,1235.0000,1235.0000,1235.0000,1235.0000,1
WHEAT-I,2010-08-02,1245.0000,1245.0000,1240.0000,1242.5000,2
WHEAT-I,2010-08-04,1220.0000,1220.0000,1220.0000,1220.0000,1
WHEAT-I,2010-08-05,1240.0000,1240.0000,1232.0000,1237.3000,3
WHEAT-I,2011-03-19,1218.9000,1218.9000,1218.9000,1218.9000,1
WHEAT-I,2011-03-21,1182.3000,1182.3000,1182.3000,1182.3000,1
WHEAT-I,2011-03-25,1151.5000,1151.5000,1151.5000,1151.5000,2
WHEAT-I,2011-04-19,1160.0000,1160.0000,1149.5000,1152.3000,4
WHEAT-I,2011-04-28,1170.0000,1195.0000,1170.0000,1182.5000,4
ZINC-I,2012-05-21,103.8000,104.7500,103.8000,104.7000,13197
ZINC-I,2012-05-22,104.7000,105.6000,104.3000,105.5000,14996
ZINC-I,2012-05-23,105.3500,105.4500,104.5000,105.0000,16656
ZINC-I,2012-05-24,104.8000,105.3000,104.2000,104.6500,12688
ZINC-I,2012-05-25,104.6000,105.3000,104.1500,104.9500,12523
ZINC-I,2012-05-26,104.9000,105.0000,104.8000,104.9500,215
ZINC-I,2012-05-28,105.0000,105.5500,104.9000,105.2500,7387
ZINC-I,2012-05-29,105.6000,106.7000,105.4000,106.6000,14092
ZINC-I,2012-05-30,106.3000,106.5000,105.4500,106.3000,11983
ZINC-I,2012-05-31,106.0500,107.4000,105.7500,107.1500,5936
ZINC-I,2012-06-01,105.6500,105.7500,103.7000,104.6500,15231
ZINC-I,2012-06-02,104.5500,104.6500,104.2500,104.4000,551 
```

我想计算最近 5 个日期每个项目的移动平均收盘价，例如 2012-06-02 的锌平均收盘价为 (104.4000+104.6500+107.1500+106.3000+106.6000)/5=105.82

我写了一个查询

```
SELECT x.ticker , AVG( x.close), x._date
FROM 
(
    SELECT t.ticker , t.close,t._date
    FROM mcx_eod_data t
    ORDER BY t._date DESC
) x
GROUP BY x.ticker 
```

它给了我平均值，因为我认为从特定代码的开始到结束的整个收盘

所以我做了一些研究并添加了限制语句并修改了我的查询

```
SELECT x.ticker , AVG( x.close), x._date
FROM 
(
    SELECT t.ticker , t.close,t._date
    FROM mcx_eod_data t
    ORDER BY t._date DESC limit 5
) x
GROUP BY x.ticker 
```

但现在它只获取 5 个代码的数据

我想要实现的是所有**代码****最近 5 个日期**的**平均收盘价**

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:52:51.453

用 where 子句替换 order 和 limit：

```
WHERE t._date >= DATE_SUB(NOW(), INTERVAL 5 DAY) 
```****

# c# - UML中类图的代码实现

> ID：10870041
> 
> 赞同：2
> 
> 时间：2012-06-03T11:45:23.397
> 
> 标签：c#, architecture, domain-driven-design, uml

*更新 3*

下面的图表（来自 Eric 的 ddd 书 p195）中的符号（单线、带星形的菱形和箭头）是什么意思：

![在此处输入图像描述](../Images/ab3e8ffd9171947cf342f4b0444df838.png)

任何用于说明的代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T11:58:22.827

钻石是组合（也称为聚合）或`has-a`关系。箭头是继承或`is-a`关系。该行是一个协会。这就引出了一个问题：组合和关联之间有什么区别。答案是组合更强大，通常拥有另一个对象。如果主对象被销毁，它也会销毁它的组合对象，但不会销毁它的关联对象。

在您的示例中，Facility 包含 (has-a) LoanInvestment 和 LoanInvestment 从 (is-a) Investment 继承

[这是使用 UML](http://en.wikipedia.org/wiki/Class_diagram)的类图的极好描述。

这是 c++ 中的代码示例，我不太了解 c#，我可能把它搞砸了 :)

```
class Facility
{
public:
    Facility() : loan_(NULL) {}

    // Association, weaker than Composition, wont be destroyed with this class
    void setLoan(Loan *loan) { loan_ = loan; } 

private:
    // Composition, owned by this class and will be destroyed with this class
    // Defined like this, its a 1 to 1 relationship
    LoanInvestment loanInvestment_;
    // OR
    // One of the following 2 definitions for a multiplicity relation
    // The list is simpler, whereas the map would allow faster searches
    //std::list<LoanInvestment> loanInvList_;
    //std::map<LoanInvestment> loanInvMap_;

    Loan *loan_:
    // define attributes here: limit
};

class Loan
{
public:
    // define attributes here: amount
    // define methods here: increase(), decrease()
private:
    // 1 to 1 relationship, could consider multiplicity with a list or map
    LoanInvestment loanInvestment_;
};

class Investment
{
    // define attributes here: investor, percentage
};

class LoanInvestment : public LoanInvestment
{
    // define attributes here
}; 
```

# ruby - WEBrick CGI 处理程序指向错误的 gem 位置

> ID：10870042
> 
> 赞同：0
> 
> 时间：2012-06-03T11:45:26.390
> 
> 标签：ruby, gem, rvm, webrick

我正在尝试从 WEBrick CGIhandler 执行我的 CGI 程序，但由于 gem 库的“加载错误”而一直失败。以前有人看到过以下行为吗？如何让我的 CGI 脚本搜索有效的 gem 位置？

**[情况]**

当我通过 Webrick 服务器运行需要“mysql2”库的 CGI 脚本时，出现以下错误：

> 错误 CGIHandler：/home/charles/code/svr/lib/cgitest.rb：/home/charles/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require。 rb:36:in `require': 无法加载此类文件 -- mysql2/version (LoadError)

从 cgitest.rb 中注释掉这个特殊的 'require' 会使这个脚本工作，所以看起来只是无法加载这个库。在脚本中添加“puts Gem.path”表示 CGIHandler 正在寻找以下目录以查找 gem；

> ["/home/charles/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1", "/.gem/ruby/1.9.1"]

而实际的 GEM:HOME 和 GEM:PATH 如下；

> ["/home/charles/.rvm/gems/ruby-1.9.3-p194", "/home/charles/.rvm/gems/ruby-1.9.3-p194@global"]

我想我错过了一些非常简单但无法弄清楚的东西。如果有人引导我走向正确的方向，我真的很感激。任何意见都将受到高度欢迎。

**[环境]**

使用 RVM 将 Ruby 1.9.3 安装到 Ubuntu Server 12.4，其中包含“mysql2”库等一系列 gem。当我从本地运行时，脚本可以加载“mysql2”。

> $哪个红宝石
> 
> /home/charles/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
> 
> $irb
> 
> 1.9.3-p194:001 > Gem.path
> 
> => ["/home/charles/.rvm/gems/ruby-1.9.3-p194", "/home/charles/.rvm/gems/ruby-1.9.3-p194@global"]
> 
> 1.9.3-p194:002 > 需要'mysql2'
> 
> => 真

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:39:46.487

您需要使用包装器而不是 bin/ruby：

```
/home/charles/.rvm/wrappers/ruby-1.9.3-p194/ruby 
```

这将确保您在启动 ruby​​ 时加载正确的环境。

# java - 我的动画按钮出现的时间不够长

> ID：10870045
> 
> 赞同：2
> 
> 时间：2012-06-03T11:45:51.523
> 
> 标签：java, android, xml, button

在我的 android 应用程序中，我有 4 个使用 xml 进行动画处理的图像按钮：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/home1"
        android:state_focused="true"
        android:state_pressed="true" />
    <item android:drawable="@drawable/home1"
        android:state_focused="false"
        android:state_pressed="true" />
    <item android:drawable="@drawable/home" android:state_focused="true" />
    <item android:drawable="@drawable/home2"
        android:state_focused="false"
        android:state_pressed="false" />
</selector> 
```

当我单击该按钮时，动画会运行，但由于新活动打开速度太快而无法正确显示。我希望看到完整的动画，我想我已经做了一个睡眠方法，但我不知道这到底是我的动作按钮：

```
 btn_photos.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            // Launching News Feed Screen
            Intent i = new Intent(getApplicationContext(), PhotosActivity.class);
            startActivity(i);
        }
    }); 
```

请帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:24:56.783

创建一个 Runnable 并在您的 onClickListener 中启动它。给runnable一个睡眠时间。

```
Runnable viewPhotos = new Runnable() {
    public void run() {
        Thread.sleep(3000);
        Intent i = new Intent(getApplicationContext(), PhotosActivity.class);
        startActivity(i);
    }
};

btn_photos.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        // Launching News Feed Screen
        Thread thread =  new Thread(null, viewPhotos, "ViewPhotos");
        thread.start();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:14:12.097

添加此代码

```
btn_photos.setOnClickListener(new View.OnClickListener() {

    public void onClick(View view) {
        // Launching News Feed Screen
        try{
            Thread.sleep(2000);
        }
        catch( InterruptedException e) {}
        Intent i = new Intent(getApplicationContext(), PhotosActivity.class);
        startActivity(i);
    }
}); 
```

根据您的意愿调整延迟。=]

# javascript - 在快速服务器中生成子进程

> ID：10870048
> 
> 赞同：6
> 
> 时间：2012-06-03T11:45:54.893
> 
> 标签：javascript, web-services, node.js, asynchronous, process

在我的快速服务器中，我需要将一些功能作为子进程运行，否则它们会占用服务器并且其他人将无法访问它。他们已经在使用异步模块，但除非它们作为子进程运行，否则它们仍然会占用服务器。

一个问题是将 req 和 res 参数传递给它们。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-03T13:15:03.950

使用[child_process.fork](http://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options)，您可以向子进程发送消息。

**编辑：**我错误地建议将`req`和`res`作为消息参数传递给子进程。这是不可能的，因为所有进出子进程的消息都转换为 JSON。相反，您可以在服务器中保留某种队列。以下仅作为示例，您可能需要更强大的东西：

child.js：

```
process.on('message', function(message) {
    // Process data

    process.send({id: message.id, data: 'some result'});
}); 
```

server.js：

```
var child_process = require('child_process');
var child = child_process.fork(__dirname + '/child.js');
var taskId = 0;
var tasks = {};

function addTask(data, callback) {
    var id = taskId++;

    child.send({id: id, data: data});

    tasks[id] = callback;
};

child.on('message', function(message) {
    // Look up the callback bound to this id and invoke it with the result
    tasks[message.id](message.data);
});

app.post('/foo', function(req, res) {
    addTask('some data', function(result) {
        res.send(result);
    });
}); 
```

它涉及更多，但它应该工作。您可能会很快脱离这样的系统，并且可以通过适当的队列更好地服务。

# html - 具有绝对子代的浮动相对 div

> ID：10870049
> 
> 赞同：0
> 
> 时间：2012-06-03T11:45:55.523
> 
> 标签：html, css

我正在尝试在图像顶部添加图像标题。这些图像应该漂浮在一个类似网格的系统中（没有固定的高度！），就像我在这里制作的小提琴[http://jsfiddle.net/thomasjonas/GzjuM/3/](http://jsfiddle.net/thomasjonas/GzjuM/3/)

已经可以看出问题了...由于title和image在relative item div里面的绝对定位，relative item div没有得到合适的高度，只是边框的高度...解决这个问题？我到处寻找答案，但大多数时候其他人的问题都是用不同的方法解决的。对于我的问题，我知道的唯一其他方法是使用图像作为 div 的背景，但是我需要知道图像的宽度和高度......这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:57:04.970

不要绝对定位图像。`<div class="image">`而是将元素呈现为块（`display:block`如果您在某处更改了`div`样式，则使用）并设置边距而不是摆弄绝对定位：

```
.item .image{
    display:block;
    margin-top: 1em;
    margin-left: 1em;
} 
```

[**JSFiddle**](http://jsfiddle.net/GzjuM/4/)

# ios - 从restful WCF检索大型JSON数据集时的NSURLErrorDomain

> ID：10870066
> 
> 赞同：1
> 
> 时间：2012-06-03T11:48:29.417
> 
> 标签：ios, wcf, rest, nsurlrequest

我有一个非常奇怪的问题。我使用 WCF 公开了一个 Restfull 网络服务。我使用我制作的 Android 应用程序成功使用它。我没有制作一个模拟的 IOS 应用程序，它应该使用相同的 REST 方法。

我已经尝试过 AFNetworking 和 MKNetworkKit，以检查我遇到的错误与 API 有关。

问题：webservice 提供了一个 POST 方法，该方法有时会返回大量数据，有时会返回少量数据。将具有相当少量数据的 JSON 数据集发布到服务就像一个魅力。将具有大量数据的 JSON 集发布到服务将立即引发此错误：

> Domain=NSURLErrorDomain Code=-1005 "网络连接丢失。"

IOS 设备和服务器端的方法调用完全相同。这只是 JSON 中有多少数据的问题。

我可以调试服务器端并看到它返回了数据集，而就在返回数据的那一刻，IOS设备抛出了异常。

我只在模拟器中测试过，一直都有WIFI。

它在我的 android 应用程序上运行良好。使用 Fiddler 2 发布呼叫可以正常工作。只有IOS失败。

我认为问题出在 IOS 方面，但我无法确定在哪里。

我希望有人有一些鼓舞人心的意见。

问候 PS：IOS 5

# tridion - Tridion UGC 评论显示作者为空

> ID：10870068
> 
> 赞同：2
> 
> 时间：2012-06-03T11:48:32.350
> 
> 标签：tridion, ugc

我已经为用户生成的内容配置了 Tridion，并使用默认/演示模板创建了一个网页，该模板使用文本输入字段来提供评论作者的姓名。评论被接受，但在显示时将用户名显示为“null”。我相信问题在于存储名称，而不是检索它。如果我从 Content Manager UI 中创建评论，然后返回到我的测试网页，则会显示评论以及主持人的姓名。

面向公众的 UGC Web 服务配置了 AllowAnonymousClaimProcessor。（没有这个，评论根本不会保存。）日志显示这显然成功地将丢失的 taf:claim:contentdelivery:webservice:user 转换为基于跟踪 id 的。

当然，想法是不要用这个作为评论的作者。在日志记录中，您还可以看到来自网页文本输入的字符串“Test User”，这似乎映射到 author=com.tridion.storage.ugc.UGCUser@2598a35d，但不久之后存储层搜索 ID 为 null 的用户并找到一个。

我怀疑这是一个配置问题，但正如您所看到的，它很复杂，我不确定在哪里进一步寻找。对它应该如何工作的解释与更具体的实验建议一样受欢迎。

日志输出如下。我已经修剪了很多，但它仍然很长，因为我不知道哪些位可能被证明是相关的：

```
2012-06-03 13:00:10,662 WARN  AmbientDataContext - There is no current ambient data context - the ambient data framework is not properly initialised
2012-06-03 13:00:10,668 DEBUG AmbientDataContext - Setting current ambient data context: com.tridion.ambientdata.web.WebContext
2012-06-03 13:00:10,903 DEBUG ClaimStore - put: uri=taf:response:cookie:generation, value=true
2012-06-03 13:00:10,906 DEBUG WebContext - setCurrentClaimStore: com.tridion.ambientdata.dotnet.DotNetClaimStore@483a0ab1, thread: Thread-1
2012-06-03 13:00:10,922 DEBUG ClaimStore - put: uri=taf:request:uri, value=/odata.svc/ItemStats(PublicationId=19,Id=320,Type=16)
2012-06-03 13:00:10,923 DEBUG ClaimStore - put: uri=taf:request:full_url, value=http://cdweb.visitorsweb.local/odata.svc/ItemStats(PublicationId=19,Id=320,Type=16)
2012-06-03 13:00:10,936 DEBUG ClaimStore - put: uri=taf:request:headers, value={content-type=[Ljava.lang.String;@5a940f82, connection=[Ljava.lang.String;@2e864e43, host=[Ljava.lang.String;@737c2891, accept=[Ljava.lang.String;@5c4b82d2}
2012-06-03 13:00:10,937 DEBUG ClaimStore - put: uri=taf:request:cookies, value={}
2012-06-03 13:00:10,937 DEBUG ClaimStore - put: uri=taf:request:parameters, value={CONTENT_TYPE=[Ljava.lang.String;@6179d854, QUERY_STRING=[Ljava.lang.String;@669a4cb}
2012-06-03 13:00:10,938 DEBUG ClaimStore - put: uri=taf:server:variables, value={REMOTE_USER=, PATH_TRANSLATED=C:\inetpub\LiveCDService\odata.svc, SERVER_PORT=80, SCRIPT_NAME=/odata.svc, REMOTE_ADDR=127.0.0.1, AUTH_TYPE=, SERVER_PROTOCOL=HTTP/1.1, REQUEST_METHOD=GET, DOCUMENT_ROOT=C:\inetpub\LiveCDService, REMOTE_HOST=127.0.0.1, SERVER_NAME=cdweb.visitorsweb.local, SECURE=false}
2012-06-03 13:00:10,943 DEBUG ClaimStore - put: uri=taf:session:id, value=tridion_1d6b8066-4b45-4047-bf63-521eaeadb439
2012-06-03 13:00:10,944 DEBUG ClaimStore - put: uri=taf:tracking:id, value=tridion_52d4956c-ae40-4c97-8eea-62d8ef7daa4c
2012-06-03 13:00:10,953 DEBUG ClaimStore - put: uri=taf:session:attributes, value={Tridion.ContentDelivery.AmbientData.ClaimStore=Tridion.ContentDelivery.AmbientData.ClaimStore}
2012-06-03 13:00:10,954 DEBUG AllowAnonymousPostClaimProcessor - No external user specified, using tracking id.
2012-06-03 13:00:10,954 DEBUG ClaimStore - put: uri=taf:claim:contentdelivery:webservice:user, value=tridion_52d4956c-ae40-4c97-8eea-62d8ef7daa4c
2012-06-03 13:00:10,964 DEBUG ClaimStore - put: uri=taf:claim:contentdelivery:webservice:post:allowed, value=false
2012-06-03 13:00:11,275 DEBUG ODataService - ODATA.NET: Resource retrieval: ItemStats(PublicationId=19,Id=320,Type=16)
2012-06-03 13:00:11,276 DEBUG WebContext - setCurrentClaimStore: com.tridion.ambientdata.dotnet.DotNetClaimStore@483a0ab1, thread: Thread-2
2012-06-03 13:00:11,289 DEBUG ODataWebserviceHandler - Requested a OData feed/entry: ItemStats(PublicationId=19,Id=320,Type=16) with type: application/json
2012-06-03 13:00:11,289 DEBUG ODataWebserviceHandler - Setting $top to 25
2012-06-03 13:00:11,291 DEBUG ResolverBase - Requested specific OData Entry
2012-06-03 13:00:13,774 DEBUG PooledDataSourceBeanConfigurer - Initializing Pooled data source
... snip
2012-06-03 13:00:13,774 DEBUG EntityManagerFactoryBeanConfigurer - Registering EntityManagerFactory to Spring Context
2012-06-03 13:00:13,778 INFO  SpringConfigurationLoader - Finished loading spring application context
2012-06-03 13:00:13,778 INFO  ConfigurationStepLoader - Executing configuration step: BundleLoader
2012-06-03 13:00:13,787 INFO  BundleConfigurationLoader - Custom storage bindings defined, loading ugc_dao_bundle.xml
2012-06-03 13:00:13,971 INFO  BundleConfigurationLoader - Added 'Comment' for storage 'persistence' with 'com.tridion.storage.ugc.dao.persistence.JPACommentDAO'.
2012-06-03 13:00:13,978 INFO  BundleConfigurationLoader - Added 'Rating' for storage 'persistence' with 'com.tridion.storage.ugc.dao.persistence.JPARatingDAO'.
2012-06-03 13:00:13,989 INFO  BundleConfigurationLoader - Added 'UGCUser' for storage 'persistence' with 'com.tridion.storage.ugc.dao.persistence.JPAUserDAO'.
2012-06-03 13:00:13,995 INFO  BundleConfigurationLoader - Added 'UGCItemStats' for storage 'persistence' with 'com.tridion.storage.ugc.dao.persistence.JPAItemStatsDAO'.
2012-06-03 13:00:14,002 INFO  ConfigurationStepLoader - Executing configuration step: FactoryLoader
2012-06-03 13:00:25,550 DEBUG ClaimStore - put: uri=taf:response:cookie:generation, value=true
2012-06-03 13:00:25,550 DEBUG WebContext - setCurrentClaimStore: com.tridion.ambientdata.dotnet.DotNetClaimStore@5e7b4ed7, thread: Thread-1
2012-06-03 13:00:25,550 DEBUG ClaimStore - put: uri=taf:request:uri, value=/odata.svc/Comments
2012-06-03 13:00:25,551 DEBUG ClaimStore - put: uri=taf:request:full_url, value=http://cdweb.visitorsweb.local/odata.svc/Comments
2012-06-03 13:00:25,551 DEBUG ClaimStore - put: uri=taf:request:headers, value={expect=[Ljava.lang.String;@717535b6, content-type=[Ljava.lang.String;@461979eb, connection=[Ljava.lang.String;@32935741, host=[Ljava.lang.String;@67458657, accept=[Ljava.lang.String;@576eeb9, content-length=[Ljava.lang.String;@4332b67c}
2012-06-03 13:00:25,551 DEBUG ClaimStore - put: uri=taf:request:cookies, value={}
2012-06-03 13:00:25,552 DEBUG ClaimStore - put: uri=taf:request:parameters, value={CONTENT_TYPE=[Ljava.lang.String;@366aa95b, QUERY_STRING=[Ljava.lang.String;@1494b146}
2012-06-03 13:00:25,552 DEBUG ClaimStore - put: uri=taf:server:variables, value={REMOTE_USER=, PATH_TRANSLATED=C:\inetpub\LiveCDService\odata.svc, SERVER_PORT=80, SCRIPT_NAME=/odata.svc, REMOTE_ADDR=127.0.0.1, AUTH_TYPE=, SERVER_PROTOCOL=HTTP/1.1, REQUEST_METHOD=POST, DOCUMENT_ROOT=C:\inetpub\LiveCDService, REMOTE_HOST=127.0.0.1, SERVER_NAME=cdweb.visitorsweb.local, SECURE=false}
2012-06-03 13:00:25,553 DEBUG ClaimStore - put: uri=taf:session:id, value=tridion_d56681a1-15aa-4eed-acdf-e6c82e6a9488
2012-06-03 13:00:25,553 DEBUG ClaimStore - put: uri=taf:tracking:id, value=tridion_79775c4b-54fe-4d5c-875d-bc0354ea77c3
2012-06-03 13:00:25,553 DEBUG ClaimStore - put: uri=taf:session:attributes, value={Tridion.ContentDelivery.AmbientData.ClaimStore=Tridion.ContentDelivery.AmbientData.ClaimStore}
2012-06-03 13:00:25,553 DEBUG AllowAnonymousPostClaimProcessor - No external user specified, using tracking id.
2012-06-03 13:00:25,553 DEBUG ClaimStore - put: uri=taf:claim:contentdelivery:webservice:user, value=tridion_79775c4b-54fe-4d5c-875d-bc0354ea77c3
2012-06-03 13:00:25,555 DEBUG ClaimStore - put: uri=taf:claim:contentdelivery:webservice:post:allowed, value=true
2012-06-03 13:00:25,563 DEBUG ODataService - ODATA.NET: Inserting entity on path: Comments
2012-06-03 13:00:25,563 DEBUG WebContext - setCurrentClaimStore: com.tridion.ambientdata.dotnet.DotNetClaimStore@5e7b4ed7, thread: Thread-6
2012-06-03 13:00:25,568 DEBUG WritableCommentEntryService - Parsing comment: {d:{"Id":0,"ItemPublicationId":19,"ItemId":320,"ItemType":16,"CreationDate":"\/Date(1338728425535+120)\/","LastModifiedDate":"\/Date(1338728425535+120)\/","User":{"Id":null,"Name":"Test Name","EmailAddress":"test@email.com","ExternalId":null},"Content":"This is a test comment, which will probably appear to be anonymous","Moderator":null,"ModeratedDate":null,"Score":0,"Status":0}}.
2012-06-03 13:00:25,582 DEBUG UGCConfigurationLoader - Attempt loading default storage configuration file
2012-06-03 13:00:25,671 DEBUG WritableCommentEntryService - Storing comment: Comment [commentId=0, content=This is a test comment, which will probably appear to be anonymous, itemPublicationId=19, itemId=320, itemType=16, author=com.tridion.storage.ugc.UGCUser@2598a35d, creationDate=Sun Jun 03 15:00:25 CEST 2012, lastModifiedDate=Sun Jun 03 15:00:25 CEST 2012, moderatedDate=null, moderator=null, score=0, status=0].
2012-06-03 13:00:31,952 DEBUG JPADAOFactory - Loaded BinaryDAO for storageId: defaultdb
2012-06-03 13:00:31,971 DEBUG JPADAOFactory - Loaded BinaryMetaDAO for storageId: defaultdb
2012-06-03 13:00:34,260 DEBUG JPADAOFactory - Loaded TrackedPageDAO for storageId: ugcdb
...snip
2012-06-03 13:00:34,260 DEBUG JPADAOFactory - Loaded XSLTDAO for storageId: ugcdb
2012-06-03 13:00:34,260 DEBUG JPADAOFactory - Loaded CommentDAO for storageId: ugcdb
2012-06-03 13:00:34,261 DEBUG JPADAOFactory - Loaded RatingDAO for storageId: ugcdb
2012-06-03 13:00:34,261 DEBUG JPADAOFactory - Loaded UGCUserDAO for storageId: ugcdb
2012-06-03 13:00:34,261 DEBUG JPADAOFactory - Loaded UGCItemStatsDAO for storageId: ugcdb
2012-06-03 13:00:34,261 INFO  ConfigurationStepLoader - Executing configuration step: TypeMappingCheckLoader
2012-06-03 13:00:34,266 INFO  ConfigurationStepLoader - Executing configuration step: ConfigurationItemTypeLoader
2012-06-03 13:00:34,270 INFO  ConfigurationItemTypeLoader - Loaded default storage: brokerdb
2012-06-03 13:00:34,270 DEBUG ConfigurationItemTypeLoader - Loading default global typeMappings
2012-06-03 13:00:34,270 DEBUG ConfigurationItemTypeLoader - Loaded mapping: page to storage: brokerdb
2012-06-03 13:00:34,270 DEBUG ConfigurationItemTypeLoader - Loaded mapping: comment to storage: ugcdb
2012-06-03 13:00:34,270 DEBUG ConfigurationItemTypeLoader - Loaded mapping: rating to storage: ugcdb
2012-06-03 13:00:34,271 DEBUG ConfigurationItemTypeLoader - Loaded mapping: ugcuser to storage: ugcdb
2012-06-03 13:00:34,271 DEBUG ConfigurationItemTypeLoader - Loaded mapping: ugcitemstats to storage: ugcdb
2012-06-03 13:00:34,271 DEBUG ConfigurationItemTypeLoader - Loading publication storage mappings
2012-06-03 13:00:34,271 INFO  ConfigurationStepLoader - Executing configuration step: CacheLoader
2012-06-03 13:00:34,272 INFO  ConfigurationStepLoader - Executing configuration step: StorageWrapperLoader
2012-06-03 13:00:34,283 DEBUG StorageManagerFactory - Default storage provider has caching set to: false
2012-06-03 13:00:34,283 DEBUG StorageManagerFactory - Loaded following dao Properties[publication=0, typeMapping=UGCItemStats, storageId=ugcdb, cached=false] for publication/typeMapping/itemExtension: 0 / UGCItemStats / null
2012-06-03 13:00:34,283 DEBUG StorageManagerFactory - Loading a non cached DAO for publicationId/typeMapping/itemExtension: 0 / UGCItemStats / null
2012-06-03 13:00:34,284 DEBUG StorageManagerFactory - Wrapping DAO's, currently 0 wrappers installed
2012-06-03 13:00:34,290 DEBUG StorageManagerFactory - Default storage provider has caching set to: false
2012-06-03 13:00:34,290 DEBUG StorageManagerFactory - Loaded following dao Properties[publication=0, typeMapping=Comment, storageId=ugcdb, cached=false] for publication/typeMapping/itemExtension: 0 / Comment / null
2012-06-03 13:00:34,290 DEBUG StorageManagerFactory - Loading a non cached DAO for publicationId/typeMapping/itemExtension: 0 / Comment / null
2012-06-03 13:00:34,290 DEBUG StorageManagerFactory - Wrapping DAO's, currently 0 wrappers installed
2012-06-03 13:00:34,291 DEBUG JPACommentDAO - Add comment to storage: Comment [commentId=0, content=This is a test comment, which will probably appear to be anonymous, itemPublicationId=19, itemId=320, itemType=16, author=com.tridion.storage.ugc.UGCUser@2598a35d, creationDate=Sun Jun 03 15:00:25 CEST 2012, lastModifiedDate=Sun Jun 03 15:00:25 CEST 2012, moderatedDate=null, moderator=null, score=0, status=0].
2012-06-03 13:00:34,295 INFO  StorageManagerTransactionMonitor - Starting storage transaction monitoring
2012-06-03 13:00:34,296 DEBUG StorageManagerFactory - Default storage provider has caching set to: false
2012-06-03 13:00:34,296 DEBUG StorageManagerFactory - Loaded following dao Properties[publication=0, typeMapping=UGCUser, storageId=ugcdb, cached=false] for publication/typeMapping/itemExtension: 0 / UGCUser / null
2012-06-03 13:00:34,296 DEBUG StorageManagerFactory - Loading a non cached DAO for publicationId/typeMapping/itemExtension: 0 / UGCUser / null
2012-06-03 13:00:34,297 DEBUG StorageManagerFactory - Wrapping DAO's, currently 0 wrappers installed
2012-06-03 13:00:34,297 DEBUG JPAUserDAO - Searching for user with id null in storage.
2012-06-03 13:00:34,847 DEBUG ResolverBase - Entry: com.tridion.webservices.odata.input.ODataInputElementType@6bd8c046 was selected, checking if expanding is needed
2012-06-03 13:00:34,858 DEBUG JPAUserDAO - User already in storage. No need to create new one.
2012-06-03 13:00:34,894 DEBUG WebContext - setCurrentClaimStore: null, thread: Thread-2
2012-06-03 13:00:34,912 DEBUG WebContext - setCurrentClaimStore: null, thread: Thread-1
2012-06-03 13:00:34,967 DEBUG WebContext - setCurrentClaimStore: null, thread: Thread-6
2012-06-03 13:00:34,968 DEBUG WebContext - setCurrentClaimStore: null, thread: Thread-8
2012-06-03 13:00:34,991 DEBUG ClaimStore - put: uri=taf:response:cookie:generation, value=true
2012-06-03 13:00:34,991 DEBUG WebContext - setCurrentClaimStore: com.tridion.ambientdata.dotnet.DotNetClaimStore@46798249, thread: Thread-1
2012-06-03 13:00:34,991 DEBUG ClaimStore - put: uri=taf:request:uri, value=/odata.svc/Comments
2012-06-03 13:00:34,993 DEBUG ClaimStore - put: uri=taf:request:full_url, value=http://cdweb.visitorsweb.local/odata.svc/Comments
2012-06-03 13:00:34,993 DEBUG ClaimStore - put: uri=taf:request:headers, value={content-type=[Ljava.lang.String;@5358aac4, host=[Ljava.lang.String;@6233549b, accept=[Ljava.lang.String;@17f7be7b}
2012-06-03 13:00:34,993 DEBUG ClaimStore - put: uri=taf:request:cookies, value={ASP.NET_SessionId=e3kzwdajhvc3ickvtjavm0co}
2012-06-03 13:00:34,994 DEBUG ClaimStore - put: uri=taf:request:parameters, value={CONTENT_TYPE=[Ljava.lang.String;@9fa8988, $orderby=[Ljava.lang.String;@1f5b44d6, QUERY_STRING=[Ljava.lang.String;@21044daf, $filter=[Ljava.lang.String;@21882d18, $expand=[Ljava.lang.String;@734893da, $top=[Ljava.lang.String;@21e30857, $skip=[Ljava.lang.String;@40389922}
2012-06-03 13:00:34,994 DEBUG ClaimStore - put: uri=taf:server:variables, value={REMOTE_USER=, PATH_TRANSLATED=C:\inetpub\LiveCDService\odata.svc, SERVER_PORT=80, SCRIPT_NAME=/odata.svc, REMOTE_ADDR=127.0.0.1, AUTH_TYPE=, SERVER_PROTOCOL=HTTP/1.1, REQUEST_METHOD=GET, DOCUMENT_ROOT=C:\inetpub\LiveCDService, REMOTE_HOST=127.0.0.1, SERVER_NAME=cdweb.visitorsweb.local, SECURE=false}
2012-06-03 13:00:34,994 DEBUG ClaimStore - put: uri=taf:session:id, value=tridion_ee26e9d0-c82e-4731-8c62-2f6c324d256a
2012-06-03 13:00:34,995 DEBUG ClaimStore - put: uri=taf:tracking:id, value=tridion_435315be-7eca-4bda-94c8-acefdd03b594
2012-06-03 13:00:34,995 DEBUG ClaimStore - put: uri=taf:session:attributes, value={Tridion.ContentDelivery.AmbientData.ClaimStore=Tridion.ContentDelivery.AmbientData.ClaimStore}
2012-06-03 13:00:34,996 DEBUG AllowAnonymousPostClaimProcessor - No external user specified, using tracking id.
2012-06-03 13:00:34,996 DEBUG ClaimStore - put: uri=taf:claim:contentdelivery:webservice:user, value=tridion_435315be-7eca-4bda-94c8-acefdd03b594
2012-06-03 13:00:34,996 DEBUG ClaimStore - put: uri=taf:claim:contentdelivery:webservice:post:allowed, value=false
2012-06-03 13:00:34,997 DEBUG ODataService - ODATA.NET: Resource retrieval: Comments
2012-06-03 13:00:34,997 DEBUG WebContext - setCurrentClaimStore: com.tridion.ambientdata.dotnet.DotNetClaimStore@46798249, thread: Thread-6
2012-06-03 13:00:34,999 DEBUG ODataWebserviceHandler - Requested a OData feed/entry: Comments with type: application/json
2012-06-03 13:00:35,000 DEBUG ResolverBase - Requested OData collection
2012-06-03 13:00:35,003 DEBUG FilterValue - check if value: -1 is of Integer type
2012-06-03 13:00:35,003 DEBUG FilterValue - value: -1 is Integer 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T00:35:41.790

在处理这个问题几天后，我才意识到这个问题的解决方案是“ `ugc_ambient_cartridge.xml`”必须在`cd_ambient_conf`网站和访问者Web服务中配置。

那是因为他们需要知道用户声明“ `taf:claim:contentdelivery:webservice:user`”的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:59:31.607

坦率地说，我不知道你做错了什么......在我的系统上它按预期工作，我没有得到任何空用户 - 相反，我看到类似

```
2012-06-01 13:30:53,811 DEBUG UserManager - UserManager.checkUser: found user: USER: Id=125; PresentationId=1; Login= 
```

并且加载的评论显示了我创建评论时输入的正确文本。

我也在使用`AllowAnonymousPostClaimProcessor`，只是注意到我在网站和 Odata 上都有它（不确定是否需要，但不会更改有效的东西）。

让我知道是否可以通过电子邮件向您发送任何日志和/或配置文件。

# iphone - UIStoryboardSegue 和 WebView

> ID：10870070
> 
> 赞同：0
> 
> 时间：2012-06-03T11:48:47.520
> 
> 标签：iphone, ios, xcode, uiwebview, uistoryboardsegue

我有一个带有一个 ViewController 和四个 UIStoryboardSegue 的故事板。导航效果很好，但如果我想在我的 UIStoryboardSegue 中包含一个 webview，我该怎么办？我不能包含 viewdidload，因为它不是 ViewController。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:53:30.580

您不直接转到 Web 视图，而是转到包含 Web 视图的视图控制器

所以，创建一个视图控制器并向它添加一个 uiwebview

# cakephp - cakephp auth 登录问题，只出现白屏

> ID：10870073
> 
> 赞同：0
> 
> 时间：2012-06-03T11:49:28.650
> 
> 标签：cakephp

我创建了一个小的 cakePHP 应用程序，它使用 auth 组件来管理管理部分以进行更改。

我“仅在生产环境中”遇到的问题是，登录后我只能看到一个空白屏幕。我应该被重定向到“仪表板”视图。这个空白屏幕也是我在所有其他需要登录用户的“管理员”前缀视图中得到的，因此是身份验证组件。

奇怪的是有两件事，（1）这在本地主机上运行良好，（2）这个应用程序是在本地主机和生产环境中运行良好的应用程序的副本。

我为尝试解决此问题所做的工作是：

*   检查了以前的申请副本；没有发现任何不同

*   检查密码是否经过哈希处理

*   检查 .htaccess 文件是否以 ASCII 格式上传（主机建议）

对此的任何帮助表示赞赏。

理想情况下，我想了解如何解决此类问题。

谢谢，普拉萨德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:35:19.007

可能要做的事情/检查...

*   在您的 app/config/bootstrap.php 文件中打开调试。
*   清除 app/tmp/cache 中每个目录中的缓存。
*   确保您已正确创建 ACL 内容。
*   检查 app/tmp/logs/error.log 和 app/tmp/logs/debug.log 的内容。
*   检查 /var/log/httpd/error_log （或您的 Web 服务器为错误和 php 错误生成自己的日志的任何位置）。

# bash - 将数字与列表变量中的数字匹配

> ID：10870076
> 
> 赞同：0
> 
> 时间：2012-06-03T11:49:52.773
> 
> 标签：bash, if-statement, for-loop

我在这个 for 循环中做错了什么？我有`$gGID`包含一些数字的变量。我有另一个使用列表的顶部数字，它是`$ONEGID`变量。我想使用`$ONEGID`被匹配到列表中`$gGID`，如果匹配则继续执行其他操作。

```
echo $ONEGID

116899029375914044550 
```

我收集里面的`$gGID`东西

```
gGID=$(curl -A 'Mozilla/4.0' --silent "https://www.google.com/search?q=$Daniel%20Sandman%20plus.google.com" | grep -P -o '(?<=plus.google.com/)[^az/u]+(?=/)') 
```

这就是`$gGID`给我的..

```
echo $gGID

116899029375914044550
116899029375914044550
116899029375914044550
108176814619778619437
108176814619778619437
108176814619778619437
105237212888595777019
105237212888595777019
105237212888595777019 
```

这是我用来匹配它的 for 循环。

```
for USERS in $gGID; do
    if [ "$USERS" = "$ONEGID" ]; then
        echo "More than one match"
    else
        echo "Just one match"
    fi
done 
```

我尝试了多种方式，但没有弄清楚。我看不出我做错了什么。难道是我存储的变量`$gGID`算作一个数字，这就是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:00:48.343

不确定你的意思，为什么当它不匹配时你会回显“只有一个匹配”？无论如何，这是你的意思吗？

```
#!/bin/bash

ONEGID=116899029375914044550  

gGID=\
"116899029375914044550 
116899029375914044550 
116899029375914044550 
108176814619778619437 
108176814619778619437 
108176814619778619437 
105237212888595777019 
105237212888595777019 
105237212888595777019"

matches=0

for USERS in $gGID; do 
    if [[ $USERS == $ONEGID ]]
    then 
        (( matches++ ))
    fi 
done 

if (( matches == 0 ))
then
    echo "no matches"
elif ((matches == 1 ))
then
    echo "Just one match"
else
    echo "$matches matches"
    echo "more than one match"
fi 
```

（在问题更改为包括 curl 之前进行了测试 - 也适用于 curl）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T14:11:14.417

如果您只想获取匹配数，请使用`grep`. 特别是，您应该查看`-c`(count)、`-F`(plain text) 和`-x`(full line) 开关：

```
$ grep -cFx "$ONEGID" <<<"$gGID"
3 
```

实际上，您可以`$gGID`完全跳过变量并`curl`直接使用：

```
curl -A 'Mozilla/4.0' --silent "https://www.google.com/search?q=$Daniel%20Sandman%20plus.google.com" | grep -P -o '(?<=plus.google.com/)[^az/u]+(?=/)' \
    | grep -cFx "$ONEGID" 
```

（为了可读性而拆分）

# javascript - 删除动态元素并重新排序这些元素的值和 ID

> ID：10870079
> 
> 赞同：0
> 
> 时间：2012-06-03T11:51:05.357
> 
> 标签：javascript

我有一个创建 DOM 元素 onClick 的函数。该元素包含带有**数组名称**的输入。

一开始我**已经有一个**元素（与我创建的 onClick 相同）。

```
<tbody id="elementsBody">

<tr id="element1"> // 1 becomes 2 and so on when new element is added
  <td>
    <input type="hidden" name="numbers[]" value="1" /> // 1 becomes 2 and so on when new element is added
  </td>
  <td>
    <input type="text" name="titles[]" />
  </td>
</tr>

// Newly created Elements goes in here!!!

</tbody> 
```

这是我的函数，它创建了更多类似上面的元素。

并且还为这个新创建的元素**创建了一个删除按钮 DIV 。**

```
function addElement() {
  var elementsBody = document.getElementById('elementsBody');

  var numbers = document.forms[1].elements['numbers[]'];
  var number = numbers.length+1;

  if (isNaN(number)) {
    var number = 2;
  }

  var numberInput = '<td><input type="hidden" name="numbers[]" value="'+ number + '" /></td>';
  var titleTd = '<td><input type="text" name="titles[]" /></td>';

  // This is the Delete Button DIV
  // I want to create a function (deleteElement) which Removes This Element
  var deleteButton = '<td><div onClick="deleteElement('+ number + ')">Delete Element</div></td>';

  elementsBody.insertAdjacentHTML('beforeend', '<tr id="element' + number + '">' + numberInput + titleTd + deleteButton + '</tr>');
} 
```

**我想创建一个函数 (deleteElement) 来删除这个添加的元素**onClick。

删除元素后，我希望该函数对**所有元素值和 ID 重新排序**。例如，如果我删除元素编号 2，则第三个元素的值和 ID 必须变为 2。

不是 jQuery。

请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:05:46.760

您将构建一个包含所有相关元素的数组。删除从目标到结束。从数组中删除目标在数组中重新编号然后添加剩下的内容。如果是我，我会考虑拥有另一个 ElementID（DisplayElmentID ？），那么您就不必做所有这些事情了。即，不要管DOM使用的ID属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:01:42.647

感谢@Esailija 的帮助！解决方案（[小提琴](http://jsfiddle.net/qDPbZ/1/)）：

```
function addElement() {
  var elementsBody = document.getElementById('elementsBody');

  var numberInput = '<td><input type="hidden" name="numbers[]" value="" /></td>';
  var titleTd = '<td><input type="text" name="titles[]" /></td>';
  var deleteButton = '<td><div onClick="this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode); update();">Delete Element</div></td>';

  elementsBody.insertAdjacentHTML('beforeend', '<tr>' + numberInput + titleTd + deleteButton + '</tr>');
  update();

}

function update() {
  var inputs = document.getElementById('elementsBody').querySelectorAll("input[type='text']");
  [].forEach.call(inputs, function(input, index) {

    input.value = index + 1;
  });
}
```

```
<table>
  <tbody id="elementsBody">

    <tr>
      <td>
        <input type="hidden" name="numbers[]" value="1" />
      </td>
      <td>
        <input type="text" name="titles[]" />
      </td>
    </tr>

  </tbody>
</table><button onclick="addElement();">add</button>
```

# python - Jinja2 过滤器将自定义标记转换为 html

> ID：10870081
> 
> 赞同：3
> 
> 时间：2012-06-03T11:52:02.020
> 
> 标签：python, filter, escaping, flask, jinja2

**启用 autoescape**属性（我想保持这种状态），我希望用户能够输入一些自定义标记，以便有机会格式化文本。例如，`[s][/s]`将被翻译成`<strong></strong>`. 我相信正确的方法是编写自定义 Jinja2 过滤器。但以下不起作用：

```
@app.template_filter()
@evalcontextfilter
def mark2html(eval_ctx, value):
    result = escape(value).replace('[s]','<strong>')
    if eval_ctx.autoescape:
        result = Markup(result)
    return result 
```

当应用于文本时

```
<div>{{ custom_markup_text|mark2html }}</div> 
```

当`[s]`在字符串中遇到时，存储在**custom_markup_text**中，它应该被转换为`<strong>`标签。AFAIK，*Markup()*函数确保我们信任这个特定的字符串，因此 HTML 不会在那里转义。过滤器已成功应用，`[s]`被 替换`<strong>`，但仍被转义。

显然，自动转义是**在**这个自定义过滤器之后完成的。另一方面，来自 Jinja2 文档的示例过滤器完美地工作：

```
@app.template_filter()
@evalcontextfilter
def nl2br(eval_ctx, value):
    result = u'\n\n'.join(u'<p>%s</p>' % p.replace('\n', '<br>\n') \
        for p in _paragraph_re.split(escape(value)))
    if eval_ctx.autoescape:
        result = Markup(result)
    return result 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:06:15.420

发现问题。这是双重转义字符串 - 相当愚蠢。这段代码完美无缺：

```
@app.template_filter()
@evalcontextfilter
def mark2html(eval_ctx, value):
    result = value.replace('[s]',u'<strong>')
    result = result.replace('[/s]',u'</strong>')
    if eval_ctx.autoescape:
        result = Markup(result)
    return result 
```

请注意，**值**不应被转义，因为 autoescape 属性已打开。

# c# - wpf中自定义控件的默认样式

> ID：10870084
> 
> 赞同：0
> 
> 时间：2012-06-03T11:52:28.410
> 
> 标签：c#, wpf

我想在 wpf 中设计一个灵活的图像按钮。
首先，我在名称空间“ImageButton”中创建了一个 WPF 自定义控件库，如下所示：

```
namespace ImageButton
{

     public class ImageButton : Button
     {

         static ImageButton()
         {
              DefaultStyleKeyProperty.OverrideMetadata(typeof(ImageButton), new FrameworkPropertyMetadata(typeof(ImageButton)));
         }

          #region DisplayMode
          [System.ComponentModel.Category("ImageButton")]

          public ImageDisplayMode DisplayMode
          {
              get { return (ImageDisplayMode)GetValue(DisplayModeProperty); }
              set { SetValue(DisplayModeProperty, value); }
          }

           public static readonly DependencyProperty DisplayModeProperty =
        DependencyProperty.Register("DisplayMode", typeof(ImageDisplayMode), typeof(ImageButton), new FrameworkPropertyMetadata(ImageDisplayMode.ImageAboveText), displaymodevalidate);

          public static bool displaymodevalidate(object value)
          {
                 return value is ImageDisplayMode;
          }

           #endregion

      }
} 
```

在命名空间“ImageButton”中，我定义了一个名为“ImageDisplayMode”的枚举，如下所示：

```
public enum ImageDisplayMode
{
    ImageAboveText = 1,
    TextAboveImage = 2,
    ImageBeforeText = 3,
    TextBeforeImage = 4
} 
```

Generic.xaml 文件修改如下：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:ImageButton">
    <Style x:Name="style1" TargetType="{x:Type local:ImageButton}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:ImageButton}">
                    <Button Background="Transparent">
                        <Grid>
                             <Grid.ColumnDefinitions>
                                  <ColumnDefinition/>
                                  <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                  <RowDefinition/>
                                  <RowDefinition/>
                            </Grid.RowDefinitions>
                            <Image Grid.ColumnSpan="2" Name="img1" Width="{TemplateBinding ImageWidth}" Stretch="{TemplateBinding ImageStretch}" Height="{TemplateBinding ImageHeight}"  Source="{TemplateBinding Image}"/>
                            <TextBlock Grid.ColumnSpan="2" Grid.Row="1" Name="lbl1" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Text="{TemplateBinding Text}"/>

                        </Grid>
                    </Button>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

上面代码的结果如下图：

[图片]
文字

我想要：当我更改 imagebutton 的“DisplayMode”属性的值时，对于每个可能的值，控件更改为以下形式：

1-------------------------------------------------
[图片]
文字

2-------------------------------------
文字
[图片]

3------------------------------------------------
[图片]文字

4----------------------------------------------------
文字[图片]

我想，我必须在 Generic.xaml 代码的网格中定义触发器，如下所示：

```
<Grid.Triggers>
    <Trigger Property="DisplayMode" Value="2">
        <Setter Property="Grid.Row" TargetName="lbl1" Value="0"/>
        <Setter Property="Grid.Row" TargetName="img1" Value="1"/>
    </Trigger>
</Grid.Triggers> 
```

请告诉我：
我该怎么做？

非常感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:02:15.897

将触发器添加到您的样式中（即`<Style.Triggers>...</Style.Triggers>`）。

即是这样的：

```
<Style.Triggers> 
    <Trigger Property="DisplayMode" Value="2"> 
        <Setter Property="Grid.Row" TargetName="lbl1" Value="0"/> 
        <Setter Property="Grid.Row" TargetName="img1" Value="1"/> 
    </Trigger> 
</Style.Triggers> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:46:26.247

谢谢 fmunkert ...
我将触发器移动到 ControlTemplate.Triggers 并将 Trigger.Value 从“2”更改为“ImageAboveText”（我的自定义枚举项之一），如下所示：

编辑前：

```
 <Trigger Property="DisplayMode" Value="2"> 
     <Setter Property="Grid.Row" TargetName="lbl1" Value="0"/> 
     <Setter Property="Grid.Row" TargetName="img1" Value="1"/> 
 </Trigger> 
```

编辑后：

```
 <Trigger Property="DisplayMode" Value="ImageAboveText">
     <Setter Property="Grid.Row" TargetName="lbl1" Value="0"/> 
     <Setter Property="Grid.Row" TargetName="img1" Value="1"/>
 </Trigger> 
```

我的问题成功解决了......
谢谢。

# android - android中滚动视图的进度条

> ID：10870085
> 
> 赞同：1
> 
> 时间：2012-06-03T11:52:32.297
> 
> 标签：android, android-viewpager

我正在从服务器下载一些数据并将我的任务排队。当我滚动到下一页时，我将其添加到队列中并显示进度条。我希望我的页面仍然滚动，或者显示进度条。当进度条在队列中并且数据尚未开始下载时，我还想更改其样式。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:59:09.557

Show the indefinite progress spinner in each page. As soon as the page load completes, show the content and hide the progress spinner. Do the downloading in an `AsyncTask`.

# linux - 让 portaudio 和 speex 一起工作

> ID：10870090
> 
> 赞同：1
> 
> 时间：2012-06-03T11:53:06.060
> 
> 标签：linux, audio, alsa, speex, portaudio

我正在尝试构建一个最小的循环音频

```
Microphone -> Portaudio -> buffer -> Speex encoder -> Speex decoder -> buffer -> Portaudio -> Headphones 
```

如果没有 Speex，我可以使用 Portaudio 获取音频并在耳机中播放。插入 Speex 编码器/解码器会中断循环音频。[根据 Speex 的要求，](http://www.speex.org/docs/manual/speex-manual/node7.html#SECTION00710000000000000000)我将 Portaudio 设置为将音频缓冲区保存为一种`short int*`类型。下面是主循环列表：

```
#define SAMPLE_RATE  (44100)
#define PA_SAMPLE_TYPE  paInt16
[...]
// initializes Speex
// sets speex_nb_mode for narrow band coding
speex_bits_init(&bits);
enc_state = speex_encoder_init(&speex_nb_mode);
dec_state = speex_decoder_init(&speex_nb_mode);

// gets frame size in samples
int samplesPerFrameEncoder = 0, samplesPerFrameDecoder = 0;
speex_encoder_ctl(enc_state, SPEEX_GET_FRAME_SIZE,
    &samplesPerFrameEncoder);
speex_decoder_ctl(dec_state, SPEEX_GET_FRAME_SIZE,
    &samplesPerFrameDecoder);
if (samplesPerFrameDecoder != samplesPerFrameEncoder)
  throw "Samples per frame between decoder and encoder differ";

// sets quality [0-10]
int quality = 10;
speex_encoder_ctl(enc_state, SPEEX_SET_QUALITY, &quality);

// open a Portaudio stream
error = Pa_OpenStream(&pStream, // reference to pointer to stream variable
    &inputParameters, // reference to input stream properties
    &outputParameters, // reference to output stream properties
    SAMPLE_RATE, // chosen sample rate
    FRAMES_PER_BUFFER, // block granularity for audio sample
    // flags for streaming process. In this case we stream
    // audio sample that never go out of range so we do not
    // clip them
    paClipOff,
    // no callback, use blocking API, input is passed directly
    // to output
    NULL,
    // no callback, so no callback userData
    NULL);
endOnError(pStream, error, pAudioSample);

// starts audio processing
error = Pa_StartStream(pStream);
endOnError(pStream, error, pAudioSample);

char* pSpeexEncodedSample = NULL;
int nbBytes = 0;

while (1)
{
  // TODO decodes audio sample from speex array
  if (nbBytes != 0)
  {
    CLEAR(pAudioSample);
    speex_bits_read_from(&bits, pSpeexEncodedSample, nbBytes);
    speex_decode_int(dec_state, &bits, (short*) pAudioSample);
    // writes audio sample to output stream
    error = Pa_WriteStream(pStream, // pointer to stream variable
        pAudioSample, // pointer to audio sample
        FRAMES_PER_BUFFER // block granularity for audio sample
        );
  }
  // reads audio sample from input stream
  error = Pa_ReadStream(pStream, // pointer to stream variable
      pAudioSample, // pointer to audio sample
      FRAMES_PER_BUFFER // block granularity for audio sample
      );
  // TODO codes audio sample to speex array
  speex_bits_reset(&bits);
  speex_encode_int(enc_state, (short*) pAudioSample, &bits);
  int bytesRequired = speex_bits_nbytes(&bits);
  if (pSpeexEncodedSample != NULL)
  {
    free(pSpeexEncodedSample);
    pSpeexEncodedSample = NULL;
  }
  pSpeexEncodedSample = (char*) malloc(
      bytesRequired * sizeof(char));
  nbBytes = speex_bits_write(&bits, pSpeexEncodedSample,
      bytesRequired);
}
[...] 
```

谢谢

# image - 在 Canvas 中绘制图像无法正常工作

> ID：10870091
> 
> 赞同：0
> 
> 时间：2012-06-03T11:53:07.743
> 
> 标签：image, canvas

由于我试图解决大约一天的一个问题，我需要画布方面的帮助。这是我正在测试的部分代码。

```
var imgpos = 0;

function drawshape(context, shape, fill, bb) {
context.beginPath();
context.save();
context.translate( 0, 130);
context.scale(1, 0.65);
context.shadowOffsetX = 0;
context.shadowOffsetY = 10;
context.shadowBlur = 9;
context.shadowColor = "black";
context.arc(shape.x, shape.y, shape.r, shape.sa, shape.ea, shape.cc);
context.lineWidth = shape.lw;
// line color
context.strokeStyle = fill;
context.stroke();
context.restore();

    // not working :( ---------------
context.save();
for(var lg = 0; lg < shape.ic; lg++) {              //
    var imagesel = new Image();
    imagesel.src = '/images/themes/default/capsules/'+imgpos+'.png';
    imagesel.onload = function(){
      if(imgpos==0){xx=70;yy=320;}
      if(imgpos==1){xx=120;yy=260;}
      if(imgpos==2){xx=140;yy=320;}
      if(imgpos==3){xx=160;yy=320;}
      if(imgpos==4){xx=180;yy=320;}
      if(imgpos==5){xx=200;yy=320;}
      if(imgpos==6){xx=220;yy=320;}
      if(imgpos==7){xx=240;yy=320;}
      if(imgpos==8){xx=260;yy=320;}
      context.drawImage(imagesel, xx, yy);
    }

    if(imgpos != 8){imgpos++;} else {imgpos=0;} 
}                           
context.restore();
    // till here :( ---------------

if(shape.link != 'Limited'){
    context.save();
    context.scale(1, 0.65);
    context.translate(500,660);
    context.font = "bold 15pt Arial";
    context.fillStyle = "WHITE";
    if(bb <= 2){
        context.textAlign="right";
        context.rotate((((shape.sa+shape.ea)-0.1)/2)-Math.PI);
        context.fillText(shape.link, -170, 0);
    }
    if(bb > 2){
        context.textAlign="left";
        context.rotate((((shape.sa+shape.ea)+0.1)/2)-2*Math.PI);
        context.fillText(shape.link, +170, 0);
    }
    context.restore();
}else{
    context.save();
    context.scale(1, 0.65);
    context.translate( 0, 130);
    context.textAlign="center";
    context.font = "bold 15pt Arial";
    context.fillStyle = "WHITE";
    context.fillText(shape.link, shape.x, shape.y-10);
    context.restore();
}
} 
```

所以这段代码（除了不工作的部分）以半圆的形式绘制弧线，但它们中的每一个都是分开的和阴影的等等......我的问题是我想把图片放在所有的图片中，但图片的数量不一样（这就是循环的原因<-必须是正确的，经过测试并使用警报！...）。第一张应该是一张照片，第二张应该是两张，第三张应该是……最后是第九张。但是如果我尝试这个代码，图片都在一个地方，如果这个函数运行，它们都在改变位置......我不知道该怎么做......

首先，我想将它们添加到路径中（每个路径都有链接，但那是另一个功能，也可以正常工作），然后我尝试将其与该功能分开，但对我没有任何效果。代码的重要部分只是不工作的部分，其他一切都很好。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:50:00.107

看起来你被臭名昭著的循环变量问题愚弄了。JavaScript 变量存在于每个函数中，而不是每个块中。因此，您的`imagesel`/`imgpos`变量实际上只存在一次，这意味着您在一个位置只有一张图像。每次循环迭代都会覆盖该变量。

您应该将适当的循环代码包装在一个函数中以实际创建单独的变量。此外，您还没有在任何地方声明`xx`/ 。`yy``var`

```
for(var lg = 0; lg < shape.ic; lg++) {
    (function(imgpos) {
        var imagesel = new Image();
        imagesel.src = '/images/themes/default/capsules/'+imgpos+'.png';
        imagesel.onload = function(){
          if(imgpos==0){xx=70;yy=320;}
          if(imgpos==1){xx=120;yy=260;}
          if(imgpos==2){xx=140;yy=320;}
          if(imgpos==3){xx=160;yy=320;}
          if(imgpos==4){xx=180;yy=320;}
          if(imgpos==5){xx=200;yy=320;}
          if(imgpos==6){xx=220;yy=320;}
          if(imgpos==7){xx=240;yy=320;}
          if(imgpos==8){xx=260;yy=320;}
          context.drawImage(imagesel, xx, yy);
        }
    })(imgpos);

    if(imgpos != 8){imgpos++;} else {imgpos=0;} 
} 
```

# python - Python：在国际号码上发送短信的脚本？

> ID：10870094
> 
> 赞同：1
> 
> 时间：2012-06-03T11:53:31.383
> 
> 标签：python, sms, sms-gateway

我正在使用以下脚本发送短信，但我总是收到错误消息“检查您的互联网连接”。是否有任何适用于 waytosms 或任何其他服务的工作 python 脚本，我可以用它来发送国际号码上的 SMS。

```
#!/usr/bin/python

import cookielib
import urllib2
from getpass import getpass
import sys
from urllib import urlencode
from getopt import getopt

ask_username = True
ask_password = True
ask_message = True
ask_number = True

def Usage():
    print '\t-h, --help:  View help'
    print '\t-u, --username: Username'
    print '\t-p, --password: Password'
    print '\t-n, --number: numbber to send the sms'
    print '\t-m, --message: Message to send'
    sys.exit(1)

opts, args = getopt(sys.argv[1:], 'u:p:m:n:h',["username=","password=","message=","number=","help"])

for o,v in opts:
    if o in ("-h", "--help"):
        Usage()
    elif o in ("-u", "--username"):
        username = v
        ask_username = False
    elif o in ("-p", "--password"):
        passwd = v
        ask_password = False
    elif o in ("-m", "--message"):
        message = v
        ask_message = False
    elif o in ("-n", "--number"):
        number = v
        ask_number = False

#Credentials taken here
if ask_username: username = raw_input("Enter USERNAME: ")
if ask_password: passwd = getpass()
if ask_message: message = raw_input("Enter Message: ")
if ask_number: number = raw_input("Enter Mobile number: ")

#Logging into the SMS Site
url = 'http://wwwg.way2sms.com//auth.cl'
data = 'username='+username+'&password='+passwd+'&Submit=Sign+in'

#Remember, Cookies are to be handled
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))

# To fool way2sms as if a Web browser is visiting the site
opener.addheaders = [('User-Agent','Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.3) Gecko/20091020 Ubuntu/9.10 (karmic) Firefox/3.5.3 GTB7.0')]
try:
    usock = opener.open(url, data)
except IOError:
    print "Check your internet connection"
    sys.exit(1)

#urlencode performed.. Because it was done by the site as i checked through HTTP headers

message = urlencode({'message':message})
message = message[message.find("=")+1:]

#SMS sending
send_sms_url = 'http://wwwg.way2sms.com//FirstServletsms?custid='
#Check this line with HTTP Headers, if script is not working
send_sms_data = 'custid=undefined&HiddenAction=instantsms&Action=custfrom950000&login=&pass=&MobNo='+number+'&textArea='+message
opener.addheaders = [('Referer','http://wwwg.way2sms.com//jsp/InstantSMS.jsp?val=0')]

try:
    sms_sent_page = opener.open(send_sms_url,send_sms_data)
    inp = open("log.html","w")
    inp.write(sms_sent_page.read())
    inp.close()

except IOError:
    print "Check your internet connection( while sending sms)"
    sys.exit(1)
print "SMS sent!!!" 
```

请向我建议我也可以获得 python 脚本的 SMS 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:22:43.307

你可以试试 twilio，下面的链接也提供了官方的 python 代码。但这不是免费服务，因此您可以查看[定价](http://www.twilio.com/pricing)。

[https://github.com/twilio/twilio-python#readme](https://github.com/twilio/twilio-python#readme)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:59:46.880

每日短信不见了。该脚本已更新为使用 Solinked：[http ://pastebin.com/21yft50r](http://pastebin.com/21yft50r)

但请不要过度使用它，否则它们也会关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T12:44:24.777

强烈[推荐](http://jbdeaton.com/2012/send-yourself-an-sms-via-python/)[Twilio](http://www.twilio.com/)。

此代码使用 Twilio 发送短信：

```
from twilio.rest import TwilioRestClient

account = "getFromYourTwilioDashboard"
token   = "getFromYourTwilioDashboard"
client  = TwilioRestClient(account, token)

message = client.sms.messages.create(to="+yourCellNumber", from_="+yourTwilioNumber", body="Message here") 
```

这不是免费的，但易于使用且可靠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T15:54:34.783

[我的免费解决方案](http://pastebin.com/VtKnKs91)使用 DailySMS 表单，适用于大多数国家/地区：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
# Free worldwide SMS sending script using DailySMS API.
# By Multiversum

import sys
import requests

forge_user_agent = 'Mozilla/5.0 (X11; Linux i686) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5'
script_url = 'http://www.uthsms.net/api/index.php'
forge_headers = {
    'Origin' : 'http://www.uthsms.net',
    'Connection' : 'keep-alive',
    'User-Agent' : forge_user_agent,
    'Content-Type' : 'application/x-www-form-urlencoded',
    'Referer' : script_url,
}

def sendsms(destphone, smsbody):
    resp = requests.post(script_url, {'phone': destphone, 'hyderabad': smsbody}, headers=forge_headers)

if __name__ == "__main__":
    if len(sys.argv) < 3:
        print "Usage: dailysms [num in international format without +] [message]"
    else:
        sendsms(sys.argv[1], sys.argv[2])
        print "Message sent" 
```

# java - JSF Ajax Call with JQuery Mobile

> ID：10870105
> 
> 赞同：0
> 
> 时间：2012-06-03T11:55:55.067
> 
> 标签：java, jquery, ajax, jsf, mobile

This issue has been troubling me to no end!!

I have seen the forum post [JSF f:ajax listener not called](https://stackoverflow.com/questions/9848203/jsf-fajax-listener-not-called) which describes my exact issue.

I am using JSF 2.0 and am using the Jquery mobile as an extension library.

I have actually copied the code exactly from the post, into my project (shown below).

I have the same managed bean set in session scope, printing out a line. I can see the bean successfully executing on the first input text *the one assigned with an ajax listener*

It doesn't however work for the button. In my use case, I want the button only to act as a bridge for calling the managed bean, so don't want the form to submit.

I am at a complete loss as to why the bean isn't executed?

I have no overriding JS classes either, and am using Jquery mobile only.

Is this a restriction on the Jquery framework? or more than likely an issue with my code?

S

```
<h:form id="f1">
<h:panelGroup id="switchSearchTexts">
    <h:inputText accesskey="s" alt="Search" id="searchBoxPeople" title="Search Plebeians" valueChangeListener="#{peopleBean.simplePersonQuery}" size="25" rendered="#{peopleBean.easySearch}">
        <f:ajax render="peopleDataTable" event="keyup" listener="#{contactsBean.morePressed}"
                immediate="true"/>
    </h:inputText>

    <h:inputText accesskey="s" alt="Search First Name" id="searchBoxFN" title="Search First Name" size="25" rendered="#{!peopleBean.easySearch}">
        <f:ajax render="moreButtonAsText" event="keyup" />
    </h:inputText>
</h:panelGroup>

<div id="expandBox">
    <h:inputText id="searchBoxLN" alt="Search Last Name" styleClass="hideToggle" title="Search Last Name" size="25" />
    <h:inputText id="searchBoxAddress" alt="Search Address" styleClass="hideToggle" title="Search Address" size="25" />
</div>

<h:commandButton type="button" styleClass="moreButtonAsText" id="moreButtonAsText" value="More">
    <f:ajax listener="#{contactsBeanFaces.morePressed}"/>
</h:commandButton>
</h:form> 
```

*** CORRECTION ****

* * *

my apologies, I was seriously trying everything! and posted the wrong iteration of code!
I have found a great note: [http://java.dzone.com/articles/ajax-jsf-joined](http://java.dzone.com/articles/ajax-jsf-joined) which has been a huge help, however still no success. I am feeling jquery mobile is messing with the event?

I believe that there may also be a requirement for the button to be in a form?

Sorry abou the basic questions, however i am a Jdeveloper guy, who is kind of learning backwards.... the DOM and client java / html side of things is almost unfairly hidden with this application. I am loving client side libraries and learning whole lot through this process.... but a strong requirement is that I can call server side logic!

Any ideas would be very much appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:31:06.107

好的解决了。

问题是需要使用正确的签名事件作为输入参数来设置托管 bean。通过大量测试，我尝试使用同一个类来处理 AjaxBehaviorEvent。与上一个论坛上的相同示例一样。

当我声明一个 ActionListener 事件（符合按钮 jsf 动作）时，bean 被执行！

兴奋，并展示了新鲜的眼睛可以带来什么！

谢谢丹尼尔！

小号

# list - 在 Erlang 的 {key, value} 列表中查找一个值

> ID：10870107
> 
> 赞同：8
> 
> 时间：2012-06-03T11:56:15.627
> 
> 标签：list, erlang, tuples

我是 Erlang 的新手，也许我只是错过了教程中的这个问题，尽管它很简单。假设，我有一个从 erlang:fun_info/1 获得的 {Key, Value} 对列表。我想知道函数的数量，列表的其余部分对我不感兴趣。所以我写了类似的东西：

```
find_value( _, [] ) ->
    nothing;
find_value( Key, [{Key, Value} | _] ) ->
    Value;
find_value( Key, [_ | T] ) ->
    find_value( Key, T). 
```

然后做：

```
find_value( arity, erlang:fun_info( F )). 
```

我工作得很好，但是像 find_value 这样的东西应该是一个太常见的例程来编写它吗？我没能在 BIF 中找到它的类似物。所以问题是：有一种很好的优雅方法可以从 {key, value} 元组列表中获取键的值吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-03T12:15:48.013

该模块[`proplists`](http://www.erlang.org/doc/man/proplists.html)包含[`get_value/2`](http://www.erlang.org/doc/man/proplists.html#get_value-2)，这应该是您想要的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-03T12:27:16.260

[`lists:keyfind/3`](http://www.erlang.org/doc/man/lists.html#keyfind-3)做这个。在这里，我已将其映射到您的`find_value/2`界面中：

```
find_value(Key, List) ->
    case lists:keyfind(Key, 1, List) of
        {Key, Result} -> Result;
        false -> nothing
    end. 
```

[不过， proplists](http://www.erlang.org/doc/man/proplists.html)可能是一条更好的路线。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-03T14:13:03.433

由于 lists:keyfind/3 已经发布，我将提到另一个有用的选项，使用列表推导：

```
hd([ Value || {arity, Value} <- List ]). 
```

这意味着获取所有值，使得每个元素都是“Value”，并且来自与 List 中的 {arity, Value} 匹配的元组。由于列表推导返回一个列表，我们得到该列表的头部。

并有趣地使用它：

```
1> List=[{a,1},{b,2},{c,3}].
[{a,1},{b,2},{c,3}]
2> F=fun(What, List) -> hd([ Value || {Key, Value} <- List, Key =:= What]) end.
#Fun<erl_eval.12.82930912>
3> F(c, List).
3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-12T21:15:20.863

[proplists:get_value](http://www.erlang.org/doc/man/proplists.html#get_value-2)如果您不关心速度，则可以这样做

[lists:keyfind](http://erlang.org/doc/man/lists.html#keyfind-3)它是性能的最佳选择，因为它是 BIF。你可以像这样用[element/2包装它](http://www.erlang.org/documentation/doc-5.7.4/erts-5.7.4/doc/html/erlang.html#element-2)

```
element(2, lists:keyfind(K, 1, L)) 
```

你会得到与 proplists:get_value 相同的结果，但速度更快。

**资料来源：** [http ://www.ostinelli.net/erlang-listskeyfind-or-proplistsget_value/](http://www.ostinelli.net/erlang-listskeyfind-or-proplistsget_value/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-06T18:29:08.287

```
find(K, [H|T]) ->
    case H of
        {K, V} -> V;
        _ -> find(K, T)
    end;
find(_, []) -> none. 
```

# javascript - difference between var someVariable in Global scope and window["someVariable"] in JavaScript

> ID：10870109
> 
> 赞同：-2
> 
> 时间：2012-06-03T11:56:42.907
> 
> 标签：javascript, namespaces, global

> **Possible Duplicate:**
> [Javascript global variables](https://stackoverflow.com/questions/4862193/javascript-global-variables)
> [Should I use window.variable or var?](https://stackoverflow.com/questions/6904166/should-i-use-window-variable-or-var)

Problem: Two ways to define global variables :

1.  `var someVariable` in global scope ;
2.  `window["someVariable"] = “some value”；` What's the difference ?

In my tests, the two ways a different in IE( from IE6 to IE8). (IE9 is OK) You may view it in my blog: [ie-naming3.html](http://maochengjie.name/fe/ie-bug/ie-naming/ie-naming3.html), or run the following code:

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Test naming in IE6</title>
    <style type="text/css">

    </style>
    <script type="text/javascript">

            window.foo = window.foo || {};
            foo.eat = function(){
                alert("ie6");
            };

    </script>
</head>
<body>
    <div id="container">

    </div>
    <script type="text/javascript">
        alert(typeof window.foo.eat);
    </script>
    <!--   <script type="text/javascript" src="./ie6-naming.js"></script> -->
    <script>
//        alert(typeof window.foo.eat);
var foo = foo || {};      
        alert(typeof foo.eat);
    </script>
</body>
</html> 
```

Any ideas are appreciated!

EDIT:

The problem is: run the code, you get two alerts: first show you "function", but the second show you "undefined", why?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:03:23.023

在全局范围内没有区别，在闭包或函数中会有所不同：

```
(function() {
    var a = 1;
})();
alert(a); //doesn't work

(function() {
    window.a = 1; // or a = 1; (w/o the var) but not recommended (see comments)
})();
alert(a); //works!! 
```

# wcf - WCF communicating over the internet

> ID：10870110
> 
> 赞同：1
> 
> 时间：2012-06-03T11:56:44.130
> 
> 标签：wcf

I'm a WCF newbie, and I need some help to begin with a project:

I will have a managed application (server) that needs to communicate (messaging system) with several clients over the internet and vice versa.

What is the best approach to achieve this? using wsDualBinding?

**UPDATE**

I decided to use the NetTcpBinding mode instead.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T12:42:25.973

这取决于您的服务需要公开哪些功能，以及您需要支持什么类型的客户端。任何基于 HTTP 的绑定都可以在 Internet 上运行，这只是数据编码方式的问题。

可以在此处找到内置绑定及其支持的摘要：http: [//msdn.microsoft.com/en-us/library/ms731092.aspx](http://msdn.microsoft.com/en-us/library/ms731092.aspx)

但最常见的是：

*   BasicHttpBinding - 这是一种基本的 Web 服务样式绑定，可供任何 SOAP 客户端使用。
*   WebHttpBinding - 这允许非 SOAP HTTP 客户端使用您的服务
*   WsHttpBinding - 这允许您的服务使用扩展的服务功能，如事务和会话。
*   WsDualHttpBinding - 如果您的服务需要双工通道，则这是必需的，这意味着您的服务需要对客户端进行回调。

由于您特别询问了双重绑定：

如果您正在编写一个需要能够从服务器回调到客户端的应用程序，那么双重绑定确实是您唯一的选择。但是，由于您特别提到了聊天，我认为双通道服务不会很好地工作。

回调在 WCF 中的工作方式是您的客户端使用双通道调用服务，并且必须提供回调接口的实现。*在服务方法调用期间，*服务器可以使用它来调用客户端；回调上下文是每个服务调用的，所以一旦调用返回，它就不再有效。换句话说，您的服务器不能只是异步“调用”您的客户端，它必须等待客户端“轮询”服务器。如果你要这样做，你就不再需要回调了。

老实说，我认为我不会将 WCF 用于交互式双向聊天应用程序，但我可以想到两种可能的选择：

1.  执行轮询客户端选项，在服务器上使用简单的 BasicHttpBinding 并不断请求新消息。
2.  将您的客户端应用程序设置为自托管本地 WCF 服务，并在您登录时向服务器提供端点信息。这需要您的客户端接受传入的连接，这会变得混乱（但如果您可以将其关闭，我d 在这里进行 NetTcpBinding。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:29:51.253

`WSDualHttpBinding`不是上网的好选择。回调仅在没有防火墙和 NAS 限制的本地网络（内联网）中有效。

有关更多详细信息，请参阅此帖子：

[使用 wsDualHttpBinding 通过 Internet 连接到 WCF 服务超时](https://stackoverflow.com/questions/4526284/connecting-over-internet-to-wcf-service-using-wsdualhttpbinding-times-out)

如果`WsHttpBinding`您想设置服务器到服务器的通信（应该适用于 WPF），请使用。

`WebHttpBinding`如果您打算使用来自 Javascript 的数据，请使用。

# android - Edit Text without Autocorrect

> ID：10870111
> 
> 赞同：5
> 
> 时间：2012-06-03T11:57:02.093
> 
> 标签：android, android-layout, android-edittext

I want an EditText without the autocorrection. I have set the textNoSuggestions inputType, as shown:

```
 <EditText
    android:id="@+id/txtTarga"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="Targa"
    android:inputType="textNoSuggestions|textCapCharacters" > 
```

The capitalize flag works, but it is still autocorrecting.

How can I disable it?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-03T12:05:52.690

inputType textVisiblePassword 可以解决问题（大多数时候，因为正如 Commonsware 指出的那样，它仍然是一个请求，您可能会发现自己找到了可以工作的设备，以及不工作的设备）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-03T12:18:20.127

```
android:inputType="textNoSuggestions" 
```

据此[，](http://comments.gmane.org/gmane.comp.handhelds.android.devel/143278)某些设备可能支持也可能不支持 inputType 属性。

但是，这似乎更频繁地工作

```
android:inputType="textNoSuggestions|textVisiblePassword" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T12:00:03.317

您可以通过代码尝试，如下所示：

```
EditText edittext = (EditText)findViewById(R.id.txtTarga);
edittext.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-20T10:06:29.787

在 XML 中

```
<EditText
        android:id="@+id/password"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:hint="password"
        android:imeOptions="actionDone"
        android:inputType="textPassword"
        android:singleLine="true"
        /> 
```

在java源代码中

```
 // casting done from EditText to TextView

    TextView mPassword = (TextView) findViewById(R.id.password); 
```

> 不知道为什么会这样。但工作正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-13T13:55:56.537

`textNoSuggestions`不适用于每个键盘。接受的答案`inputType="textVisiblePassword"`有效，但它从大多数键盘中删除了表情符号。

我发现设置`inputType="textUri"`有效并保持添加表情符号的能力。

# unit-testing - 如何在 pyCharm 中进行单元测试

> ID：10870116
> 
> 赞同：11
> 
> 时间：2012-06-03T11:57:52.577
> 
> 标签：unit-testing, python-2.7, pycharm

我想做一些单元测试，所以我设置了一个列表，其中的值都应该被断言为真，就像[这个问题](https://stackoverflow.com/questions/32899/how-to-generate-dynamic-unit-tests-in-python)一样。但我希望它运行[`PyCharm`](http://www.jetbrains.com/pycharm/)（按`Alt`+ `Shift`+ `F10`）

如果我只使用答案中的代码，我就会得到`No tests were found`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-03T04:33:12.097

您需要仔细检查测试运行配置的设置：

![设置](../Images/5ad071757440176ecc0ed483af3287f1.png)

默认情况下，PyCharm 将检查以 开头`test`并且是 的子类的文件`unittest.TestCase`，但是您可以控制**Pattern**和 subclasses 选项。

根据您的测试文件名更改**模式，它接受 Python 正则表达式。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T22:59:38.683

请注意，PyCharm 将仅检查从 unittest.TestCase 继承的类，因此您应该在从 unittest.TestCase 继承的类中编写测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-16T20:28:29.010

### PyCharm 2019.1+ 和 pytest

首先，创建一个名为 pytest.ini 的文件以设置自定义配置。例如，默认情况下会将任何与和glob`pytest`匹配的文件视为测试模块，因此我鼓励使用此文件来定义您的自定义文件名模式。`test_*.py``*_test.py`

**pytest.ini**

```
[pytest]
python_files = test_*.py tests.py *_test.py 
```

现在，打开**运行/配置**窗口：

[![在此处输入图像描述](../Images/8e2fb13c1bb368838ffb8c442d914a7f.png)](https://i.stack.imgur.com/4COUz.png)

添加新配置，选择 Python 测试和 pytest：

[![在此处输入图像描述](../Images/6fa9fbd05cd70eb1faa6ad78a96757ec.png)](https://i.stack.imgur.com/X8127.jpg)

在以下窗口中，您可以为配置选择一个名称，也可以选择目标，但如果您希望 pytest 使用该`pytest.ini`文件，请不要选择脚本路径、应用和确定。

[![在此处输入图像描述](../Images/6a691fb218bc6aed197212d3d19f2710.png)](https://i.stack.imgur.com/FJovg.png)

最后，通过单击“播放”按钮运行测试。

[![在此处输入图像描述](../Images/e9b175aa873824edbbb1167bcf4c079e.png)](https://i.stack.imgur.com/XXRd4.png)

# sql - 选择没有字段 SQL 的自定义字符串和值

> ID：10870121
> 
> 赞同：1
> 
> 时间：2012-06-03T11:58:14.753
> 
> 标签：sql, phpmyadmin

我想知道如何在 SQL 中选择自定义值。我知道这对于 MS SQL 来说很容易，但是对于 PHPMyAdmin 是否可行？

```
SELECT field1, 0 as answers FROM table

// "answers" should contain 0 
```

问题是 0 被解释为一个字段，它不是；这只是我想存储在“答案”中的一个值。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T12:00:36.617

如果你想要一个常数，这应该工作：

```
SELECT field1, '0' as answers FROM table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T10:54:09.317

在 MsSql 中

```
SELECT 'my value' AS COL1 
```

或例如在 Oracle 中

```
SELECT 'my value'FROM DUAL 
```

# assembly - is there a single assembler in single processor computer?

> ID：10870123
> 
> 赞同：-5
> 
> 时间：2012-06-03T11:58:29.630
> 
> 标签：assembly

Since all the high level language program are translated into assembly language by the compiler and then the assembler convert it to the machine language code.
and since there is a single specific assembly language for specific processor, so all the different types of high level language code ultimately convert into that specific assembly language code.

so is there a single assembler in single processor computer?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T12:00:24.980

> 由于所有高级语言程序都由编译器翻译成汇编语言，然后汇编器将其转换为机器语言代码。

这不一定是正确的。直接从高级语言到机器代码（即二进制表示）是完全可能和实际的。无需调用单独的应用程序。

> 因为特定处理器有一个特定的汇编语言

这是不正确的。特定处理器有一个**指令集**，但可能有多个汇编程序应用程序，每个程序都有自己的语法（参见例如[http://en.wikipedia.org/wiki/X86_assembly_language#Syntax](http://en.wikipedia.org/wiki/X86_assembly_language#Syntax)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T12:01:23.223

[具有相同指令集架构](http://en.wikipedia.org/en/instruction_set_architecture)的所有处理器都使用相同的语言，并且它们都可以理解来自相同汇编程序的代码。

因此，单处理器计算机、多核计算机或地球上所有 x86 计算机都有一个组装程序。（当然，可能有很多汇编程序可供选择，但它们都转换为相同的二进制程序格式。）

汇编器只是编译器的最后阶段之一。

> 那么单处理器计算机中有一个汇编程序吗？

汇编器只是一个可以安装或删除的软件。除了软件开发导致本地二进制文件被分发之外，这不是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:14:52.400

通常编译器编译为汇编器，但并非总是如此，有些直接编译为机器代码（tcc），有些编译为字节码（python、java），这需要虚拟机完成最后一英里。

有时您只会找到一个汇编程序，但通常您会找到多对多的汇编程序。每个汇编器都有一个创建它的原因，而不是仅仅使用现有的。有时汇编语言会发生变化（gnu 喜欢在为目标实现 gas 时弄乱汇编语言），有时差异是指令，不一定是机器代码的东西，或者输出格式，对象 vs 就绪运行二进制文件等

通常，处理器发明者/供应商会发明一种汇编语言，并且为了兜售他们的产品，通常会创建一个汇编器，有时还会创建一个编译器，或者至少对现有的可重定向编译器进行修改。有时收费很多/太多，有时免费赠送。免费或付费的编译器供应商和开源世界可能仍然选择做自己的事情。

共同点虽然是机器代码，而不是汇编语言，但处理器理解的机器代码定义明确，与程序用什么原始语言编写无关。

# regex - A lookup on a hash where keys are regular expressions

> ID：10870124
> 
> 赞同：1
> 
> 时间：2012-06-03T11:58:58.190
> 
> 标签：regex, perl

I am trying to create a hash where the keys are regular expressions and the values are substitutions. I have done this in a MySQL database creating a similar structure and using a query such as "select * from table where $lookup RLIKE `key`" and it works fine. I am wanting to try the same in a perl script to see if I can make it run more efficiently. I realize I could make this a loop and check each key but don;t want that which is why I built the regex string. The only part I cannot figure out is how to get perl to give me back the part of the regex (the alteration) that matched...

```
%s = (
  '^mynumbers-(\d+)$' => 'thenumber-$1' ,
  '^myletters-([a-zA-Z])$' => 'theletter-$1'
);

#build a string of the hash keys into a regex
while (keys %s) {
  $regex_string.="($_)|";
}

#this is the input that will be looked up
$lookup = 'mynumbers-123';

if ($lookup=~/$regex_string/) {

  print "found->$lookup in the regex\n";

  $matched_regex = $i_dont_know; 
  ### How do I know which subgroup it matched???

  ### I need to know so I can do this
  $lookup=~s/\Q$i_dont_know\E/\Q$s{$matched_regex}\E/;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T12:54:38.290

正如 daxim 指出的那样，有几个 CPAN 模块可以满足您的需求。[`Tie::RegexpHash`](https://metacpan.org/module/Tie%3a%3aRegexpHash)是其中之一：

> **概要**
> 
> ```
> use Tie::RegexpHash;
> 
> my %hash;
> 
> tie %hash, 'Tie::RegexpHash';
> 
> $hash{ qr/^5(\s+|-)?gal(\.|lons?)?/i } = '5-GAL';
> 
> $hash{'5 gal'};     # returns "5-GAL"
> $hash{'5GAL'};      # returns "5-GAL"
> $hash{'5  gallon'}; # also returns "5-GAL"
> 
> my $rehash = Tie::RegexpHash->new();
> 
> $rehash->add( qr/\d+(\.\d+)?/, "contains a number" );
> $rehash->add( qr/s$/,          "ends with an \`s\'" );
> 
> $rehash->match( "foo 123" );  # returns "contains a number"
> $rehash->match( "examples" ); # returns "ends with an `s'" 
> ```

# php - PHP正则表达式不起作用

> ID：10870128
> 
> 赞同：0
> 
> 时间：2012-06-03T11:59:52.903
> 
> 标签：php, regex

我正在尝试从 html 文件中获取这些匹配项。它有几个关于它们的声明，如下所示：

```
links(6)  = "chicas-con-juguetes.asp" 
```

我正在尝试使用此功能提取它们：

```
 public static function extract_all_vid_links($html){
    $pattern="links([0-9])  = \"(.*).asp\"";
    preg_match_all( "/$pattern/i", $html ,$out, PREG_SET_ORDER);

    print_r($out);
    //    foreach($out as $values){
    //       echo $values[0]."<br/>";
    //   }
} 
```

但它不起作用！？！？为什么？

**修改的：**

```
 $pattern="links\([0-9]\)  = \"(.*).asp\"";
    preg_match_all( "/$pattern/i", $html ,$out, PREG_SET_ORDER); 
```

还是不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:03:59.140

如果您不想创建新的匹配组，则需要转义`(`and字符，请看这里： .`)``links\(\d\)`

这确实解决了您描述的问题（因此您的描述可能是错误的）：

```
<?php
header('Content-Type: text/plain;');

$html = 'links(6)  = "chicas-con-juguetes.asp"';

$pattern="links\(\d\)  = \"(.*).asp\"";
$r = preg_match_all( "/$pattern/i", $html ,$matches);

var_dump($r, $matches); 
```

[演示](http://codepad.viper-7.com/916fdb)，输出：

```
int(1)
array(2) {
  [0]=>
  array(1) {
    [0]=>
    string(37) "links(6)  = "chicas-con-juguetes.asp""
  }
  [1]=>
  array(1) {
    [0]=>
    string(19) "chicas-con-juguetes"
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T12:04:57.967

```
preg_match_all('/links\([0-9]+\)  = \"([^\.]*?).asp\"/i', $html, $out, PREG_SET_ORDER); 
```

您需要转义`()`字符。另外，我在后面添加了一个`+`，`[0-9]`这样 9 以上的数字也可以工作。

# php - 使用 PHP 在服务器上压缩 jpeg

> ID：10870129
> 
> 赞同：13
> 
> 时间：2012-06-03T11:59:58.173
> 
> 标签：php, compression, jpeg

我有一个包含大约 1500 张 JPEG 图像的网站，我想将它们全部压缩。浏览目录不是问题，但我似乎找不到压缩服务器上已经存在的 JPEG 的功能（我不想上传新的），并替换旧的。

PHP是否有内置函数？如果没有，我如何将文件夹中的 JPEG 读入脚本？

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-03T12:06:42.557

我更喜欢使用[IMagick](http://php.net/IMagick)扩展来处理图像。GD 使用太多内存，尤其是对于较大的文件。这是 PHP 手册中[Charles Hall](http://php.net/manual/en/imagick.setcompressionquality.php#99209)的代码片段：

```
$img = new Imagick();
$img->readImage($src);
$img->setImageCompression(Imagick::COMPRESSION_JPEG);
$img->setImageCompressionQuality(90);
$img->stripImage();
$img->writeImage($dest); 
$img->clean(); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-03T12:20:27.843

你没有告诉你是否使用GD，所以我假设这一点。

```
$img = imagecreatefromjpeg("myimage.jpg");   // load the image-to-be-saved

// 50 is quality; change from 0 (worst quality,smaller file) - 100 (best quality)
imagejpeg($img,"myimage_new.jpg",50);

unlink("myimage.jpg");   // remove the old image 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T12:02:36.817

您将需要为此使用 php gd 库...大多数服务器默认安装了它。如果您搜索“resize image php gd”，会有很多示例。

例如看看这个页面[http://911-need-code-help.blogspot.nl/2008/10/resize-images-using-phpgd-library.html](http://911-need-code-help.blogspot.nl/2008/10/resize-images-using-phpgd-library.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T04:32:01.690

vlzvl 提供的解决方案效果很好。但是，使用此解决方案，您还可以通过更改代码的顺序来覆盖图像。

```
 $image = imagecreatefromjpeg("image.jpg");  
    unlink("image.jpg");
   imagejpeg($image,"image.jpg",50); 
```

这允许您压缩预先存在的图像并将其以相同的文件名存储在相同的位置。

# c# - 如何从用户定义类列表中删除元素？

> ID：10870131
> 
> 赞同：6
> 
> 时间：2012-06-03T12:00:09.723
> 
> 标签：c#, arrays, list

我对c#很陌生，请对我温柔，我已经在网上搜索了几个小时没有成功，我想从我的用户定义的类中删除一个元素。我该怎么做？

下面是代码片段。

```
public class Level2
{
    public double price { get; set; }
    public long volume { get; set; }

    public Level2(double price, long volume)
    {
        this.price = price;
        this.volume = volume;
    }
}

static void Main()
{

    List<Level2> bid = new List<Level2>();

    ask.Add(new Level2(200, 500));
    ask.Add(new Level2(300, 400));
    ask.Add(new Level2(300, 600));

    // how to remove this element ???
    ask.Remove(300, 400);       //doesn't work

 } 
```

我想我需要实现某种类型的 IEnumerable，但是语法看起来如何？有人可以给我一个工作片段吗？多谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T12:21:56.737

这将从列表中删除所有`Level2`对象**`Price = 300 and Volume = 400`**

```
ask.RemoveAll(a => a.price == 300 && a.volume == 400); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T12:19:22.007

这是我的做法： override`Equals`和`GetHashCode`on `Level2`，这样您就可以`List<T>.Remove`在不需要对对象的原始引用的情况下使用。

```
public class Level2
{
    public double price { get; set; }
    public long volume { get; set; }

    public Level2(double price, long volume)
    {
        this.price = price;
        this.volume = volume;
    }

    public override bool Equals(object obj)
    {
        var other = obj as Level2;
        if (other == null)
            return false;
        return other.price == this.price && other.volume == this.volume;
    }

    public override int GetHashCode()
    {
        return price.GetHashCode() ^ volume.GetHashCode();
    }
}

static void Main(string[] args)
{
    List<Level2> ask = new List<Level2>();

    ask.Add(new Level2(200, 500));
    ask.Add(new Level2(300, 400));
    ask.Add(new Level2(300, 600));

    ask.Remove(new Level2(300, 400));
} 
```

这是另一种方法，它使用对象的身份而不是对象内部的值：

```
static void Main(string[] args)
{
    List<Level2> ask = new List<Level2>();

    ask.Add(new Level2(200, 500));
    var level = new Level2(300, 400);
    ask.Add(level);
    ask.Add(new Level2(300, 600));

    ask.Remove(level);
} 
```

根据您的情况，其中一个或其他答案之一可能是最好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T12:06:26.793

请记住，您正在将实例化添加`objects`到键入的 List **bid**中，因此您需要在列表中搜索对象以删除与特定条件匹配的对象。请注意，您`Level2`的列表中可以有多个（不同）实例`price==300`和`volume==400`。

一个小的代码示例应该可以澄清事情。

```
public class Level2
{
    public double price { get; set; }
    public long volume { get; set; }
    public Level2(double price, long volume)
    {
        this.price = price;
        this.volume = volume;
    }
    public override string ToString()
    {
        return String.Format("Level 2 object with price: {0} and volume: {1}", 
            this.price, this.volume);
    }
}

public static void Main()
{
    List<Level2> bid = new List<Level2>();
    bid.Add(new Level2(200, 500));
    bid.Add(new Level2(300, 400));
    bid.Add(new Level2(300, 600));
    bid.Add(new Level2(300, 400)); // second item with these quantities

    List<Level2> toRemove = 
        bid.Where(x => x.price == 300 && x.volume == 400).ToList<Level2>();

    foreach (Level2 item in toRemove)
    {
        bid.Remove(item);
        Console.WriteLine("removing " + item.ToString());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T12:02:50.693

您需要首先检索要删除的元素：

```
Level2 element = ask.FirstOrDefault(l => l.price == 300 && l.volume == 400);
if (element != null)
    ask.Remove(element); 
```

# java - 如何重置 BufferedReader 的位置？

> ID：10870132
> 
> 赞同：0
> 
> 时间：2012-06-03T12:00:17.660
> 
> 标签：java, android, bufferedreader

我正在使用 BufferedReader 从文件中读取行。当我从文件中读取所有行时，我想从头开始重新读取文件，我该怎么做？`BufferedReader.mark()`和`BufferedReader.reset()` 不能正常工作。这是我的代码

```
FileReader fR = new FileReader(this.sTargetPath);
            final BufferedReader vcfBuffer = new BufferedReader(fR);
        //  vcfBuffer.mark(0);
                Boolean nextLine = true;
                while (nextLine) {
                    try {
                        String line = vcfBuffer.readLine();
                        }
                    } catch (IOException e) {
                        nextLine = false;
                    }
                }
            }

            vcfBuffer.reset(); 
```

如何重置 BufferedREader 位置？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:12:20.207

[mark()](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#mark%28int%29)的javadoc说：（强调我的）：

> 参数：
> 
> readAheadLimit -**限制可以读取的字符数，同时仍保留标记。在读取达到此限制或超过此限制的字符后尝试重置流可能会失败。**大于输入缓冲区大小的限制值将导致分配一个大小不小于限制的新缓冲区。因此，应谨慎使用较大的值。

如果您使用 0 作为参数调用它，只要您从阅读器读取一个字节，就可能无法重置。

解决方案是以文件长度为参数调用mark方法。但当然，这将导致读取内存缓冲区中的整个文件。如果您不想这样，请关闭您的阅读器并重新打开一个新的 BufferedReader。

# ios - 如何处理自定义 UITableViewCell XIB 中的两个视图？

> ID：10870135
> 
> 赞同：0
> 
> 时间：2012-06-03T12:00:35.370
> 
> 标签：ios, uitableview, xib

我在 XIB 的 UITableViewCell 中布置了一个 UIView。

按下按钮后，此视图应转换为另一个视图（不重要如何）。

关键是，我必须以某种方式使用第二个视图进行转换（使用相同的数据源）并在转换后交换这些视图。

我应该在同一个 XIB 内创建 - UIView， - 在同一个 XIB 内创建第二个 UITableViewCell， - 在另一个 XIB 内创建 UIView - 在另一个 XIB 内创建 UITableViewCell 吗？

或者也许是别的什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:51:36.573

谢谢大家的帮助。这比我想象的要容易

我通过放入 XIB 解决了这个问题：

*   UITableViewCell（顶部）
*   界面视图

然后将所有内容连接到我的自定义 UITableViewCell 类。

我的主要问题是将两个视图与相同的数据同步，我只是通过在 UITableViewController 中复制我需要的任何内容来实现。

您只需要记住，所有连接都应该在插座和 UITableViewCell 和 >>NOT<< 文件所有者之间 - 这会在 XIB 加载期间以某种方式使应用程序崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:39:54.957

您可以使用此方法进行转换：

```
[UIView transitionWithView:containerView
       duration:0.2
       options:UIViewAnimationOptionTransitionFlipFromLeft
       animations:^{ [fromView removeFromSuperview]; [containerView addSubview:toView]; }
       completion:NULL]; 
```

在此示例中（直接来自苹果文档），containerView 将是您的 UITableViewCell，而 fromView 将是它的子视图。toView 将是替换它的视图。

关于视图 insibe de xib 的排列，我会将它们全部填充到同一个 xib 中，fromView 作为 tableview 单元格的子视图，toView 没有超级视图，但通过一个连接到 tableview 单元格（或文件所有者）出口。

# javascript - Safari (Mac OS X Lion) 向 position.timestamp 调用返回错误的纪元时间值

> ID：10870138
> 
> 赞同：8
> 
> 时间：2012-06-03T12:00:50.000
> 
> 标签：javascript, safari, timestamp

我正在创建一个使用 W3C Geolocation API 和 position.timestamp 作为时间戳的网站。我已经在 Safari 5.1.6 (Mac OS X Lion) 和 iPhone (5.x) 上对其进行了测试。iPhone 默认浏览器会返回正确的时间戳值，而 Safari 则不会。有没有人遇到过类似的问题？Safari中是否存在错误？

在这里测试它：http: [//jsfiddle.net/vRRdE/2/](http://jsfiddle.net/vRRdE/2/)

运行上面的测试（感谢 Tyilo）我得到`360419807893`（错误的使用`position.timestamp`）和`1338727007910`（正确的使用`Date().getTime()`）在 Mac OS X 上使用 Safari。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T12:53:36.297

似乎桌面 Safari 使用 2001 年 1 月 1 日作为默认纪元，所以这里最好的方法可能只是使用 Date().getTime();

# android - 需要按列表视图中的字母而不是行本身

> ID：10870140
> 
> 赞同：-1
> 
> 时间：2012-06-03T12:00:54.733
> 
> 标签：android, listview

我有一个列表视图，我的问题是只有当我按下文本时才会注册“点击”，而不是在线本身。我该如何改变呢？

```
public class Listwithbaseadapter extends ListActivity {

static final String[] MOBILE_OS = 
        new String[] { "Android", "iOS", "royi", "Blackberry"};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setListAdapter(new MobileArrayAdapter(this, MOBILE_OS));
    ListView listView = getListView();
    listView.setCacheColorHint(0);

}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    //get selected items
    String selectedValue = (String) getListAdapter().getItem(position);
    Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();
}} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:06:19.587

在 xml 中将 android:layout_width="wrap_content" 更改为 android:layout_width="fill_parent"。不管怎么说，还是要谢谢你。

# c++ - QT Creator - 在我自己的库中使用外部库

> ID：10870145
> 
> 赞同：4
> 
> 时间：2012-06-03T12:02:08.290
> 
> 标签：c++, linux, qt

我正在 Linux 上的 C++ 中的 QT Creator 中开发一个应用程序

我创建了自己的库，以便可以在一组应用程序中使用一些通用类。

在我创建的库中，我使用了另一个外部静态库 (libSDL.a)。我已将我的库配置为静态库 (*.a)，它可以毫无问题地编译。

然后我将我的库添加到另一个应用程序并使用了一些类。在尝试编译我的应用程序时，我从我的库中获取未定义的引用来调用另一个库的函数。

据我了解，静态库应该在编译期间被复制。为什么我会得到对应该复制到我的库中的库的未定义引用？

以下是在 *.pro 文件中配置库项目的方式：

```
QT -= gui
TARGET = FoobarTools
TEMPLATE = lib
CONFIG += staticlib
CONFIG -= shared
DEFINES += FOOBARTOOLS_LIBRARY
INCLUDEPATH += ./include/SDL_Headers/
LIBS += -L./bin/ -lSDL
SOURCES += ...
HEADERS += ... 
```

以下是我的应用程序 *.pro 文件如何使用我的库：

```
QT -= gui
TARGET = FoobarApp
CONFIG += console
CONFIG -= app_bundle
TEMPLATE = app
INCLUDEPATH += ./include/
LIBS += -L./bin/ -lFoobarTools
SOURCES += ...
HEADERS += ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:09:56.223

在应用程序的 .pro 中，您需要：

`INCLUDEPATH += LibraryPath`（这指向头文件的目录。）

`DEPENDPATH += LibraryPath`（这也指向头文件的目录。）

`LIBS += -LDebugOrReleasePath -lLibraryName`（这是 lib 文件名减去开头的“lib”和结尾的“.a”。）

完成后，检查自定义库的#includes 是否仍在工作。

在静态库的 .pro 文件中，您不需要触摸任何内容，可以添加“CONFIG += release”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-06T17:31:02.403

您的库和它使用的库都应该在应用程序中链接。

```
INCLUDEPATH += ./include/SDL_Headers/
INCLUDEPATH += ./include/
LIBS += -L./bin/ -lFoobarTools
LIBS += -L./bin/ -lSDL
//And dont forget the Target dependencies.
PRE_TARGETDEPS += ./libFoobarTools.a
PRE_TARGETDEPS ./libSDL.a 
```

如果您想了解有关库编译而不是应用程序编译原因的更多信息，请查看[此问题](https://stackoverflow.com/questions/2157629/linking-static-libraries-to-other-static-libraries)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-03T22:04:51.423

我想你可以在这里找到答案：

[http://gcc.gnu.org/ml/gcc-help/2004-04/msg00104.html](http://gcc.gnu.org/ml/gcc-help/2004-04/msg00104.html)

而且，更准确地说，在这个后续行动中：

[http://gcc.gnu.org/ml/gcc-help/2004-04/msg00106.html](http://gcc.gnu.org/ml/gcc-help/2004-04/msg00106.html)

我现在无法对其进行测试，但我认为可能的原因可能会通过以下方式恢复：

“如果链接器遇到它，它将“丢弃”一个库，但不需要它定义的任何符号”

作为急救帮助，将 -lSDL 添加到您的第二个 .pro 文件中。

编辑：你确定你的静态库（第一个 .pro 文件）真的使用了 libSDL 中的一些符号吗？如果不是，那么编译器将简单地忽略 libSDL.a 文件，并且不会将其包含在您的静态库中。即使您使用 libSDL.a 中的某些符号，也只有那些函数会被复制到可执行文件中，而其他符号则不会（至少，我是这么认为的）。“静态库在链接方面有特殊的规则。静态库中的对象只有在对象提供未解析的符号时才会添加到二进制文件中。” （见：[https ://stackoverflow.com/a/2649792/1284631](https://stackoverflow.com/a/2649792/1284631)）。然后，如果您的可执行文件（第二个 .pro 文件）使用了一些来自 libSDL 的未复制符号，则会出现错误。引用同一来源：“在 Linux 上，您可以使用 --whole-archive 链接器选项更改该行为：g++ -Wl,--whole-archive some_static_lib.a -Wl,--no-whole-archive”。这样，您可以确保在您的文件中携带整个静态 libSDL.a 存档。

# java - 业务规则验证的框架/设计模式

> ID：10870154
> 
> 赞同：12
> 
> 时间：2012-06-03T12:02:49.390
> 
> 标签：java, design-patterns, frameworks

对于可能有 1000 多个 biz 规则验证的应用程序，我应该使用哪种框架/设计模式？

我正在研究的系统类型包括许多允许用户输入的输入表单。每个输入表单都有不同的部分。

即表格 A 有 A/B/C/D 部分。表格 B 有 B/C/D 部分

其中一些 biz 规则验证对两种形式都是通用的，我也在寻找一种重用规则的方法。

如何构建强大的业务规则验证框架？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-03T12:09:45.500

*   [drools](/questions/tagged/drools "显示标记为“流口水”的问题")框架专门用于评估业务规则

*   [spring](/questions/tagged/spring "显示标记为“春天”的问题")框架允许使用[groovy](/questions/tagged/groovy "显示标记为“groovy”的问题")和[jruby](/questions/tagged/jruby "显示标记为“jruby”的问题")等动态语言编写 bean 。您可以轻松插入[JavaScript](http://nurkiewicz.blogspot.no/2010/09/javascript-dynamic-language-support-in.html)

*   [策略设计模式](http://en.wikipedia.org/wiki/Strategy_pattern)似乎很合适：将每个规则实现为一个单独的策略并一个接一个地运行它们。

*   可以使用类似[的责任链](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)模式：每个规则要么失败要么成功，并将控制权传递给下一个规则

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T21:45:10.330

实现业务规则的一个很好的模式是[规范模式](http://en.wikipedia.org/wiki/Specification_pattern)。它是*Strategy*、*Composite*和*Interpreter*的组合，可以生成参数化且易于组合的规则。一定要看看 Fowler 和 Evans 的[原始论文 (pdf)](http://www.martinfowler.com/apsupp/spec.pdf) ，如果可以的话，看看这本书**Domain Driven Design 。**

# iframe - 输入 DIV 会自动打开 iframe 的链接

> ID：10870156
> 
> 赞同：0
> 
> 时间：2012-06-03T12:03:17.713
> 
> 标签：iframe, html, href

我在页面顶部有一个“位置：固定”iframe，在其上方，一个水平菜单（也已修复）。每个菜单按钮将整个页面滚动到选定的 div。

有没有办法在到达该 div 后自动打开链接？我需要自动加载输入“div #1”的“iframe content 1”，输入“div #2”的“iframe content 2”等。

页面有 jQuery。

提前致谢。

![在此处输入图像描述](../Images/b6229c72854723b9185247519d620d69.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:38:20.140

让我们看看这是否适合您：

```
$('#btn1').click(function() {
  var targetOffset = $('#div1').offset().top; 
  $('html,body').animate({scrollTop: targetOffset}, 5000, function() {
    // Animation complete, lets load content
     $('#div1').html($('#iframe1').contents());
  });
});

/**
For the contents() to work the iframe must be getting the content from the same domain
*/ 
```

# php - 以致命错误退出 php 函数

> ID：10870159
> 
> 赞同：3
> 
> 时间：2012-06-03T12:03:27.977
> 
> 标签：php

我有一个基本的 if-then-else 语句来捕获“异常”，但万一发生异常，我无能为力，所以我想此时退出我的脚本并出现致命错误。我怎样才能做到这一点？代码是：

```
if(ksort($hFileList)) $fileList = array_values($hFileList);
else ??? 
```

那就是：我正在尽我所能确保我的 $hFileList 在那里并且看起来应该如此，但是如果发生意外情况，我想产生一个标准的 php 致命错误。我应该简单地摆脱 if 并让它“崩溃”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T12:11:31.440

只需调用 phps trigger_error 方法：

```
if( true === $errorCase ) {
    trigger_error( $yourErrorMessage, E_ERROR );
} 
```

这会以致命错误停止您的脚本。另请参阅 php 文档：

[http://php.net/manual/de/function.trigger-error.php](http://de3.php.net/manual/de/function.trigger-error.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T12:24:45.207

您也可以使用[die()](http://php.net/manual/en/function.die.php)函数，例如：

```
if(ksort($hFileList)) 
{
    $fileList = array_values($hFileList);
}
else
{ 
    die("Error Occurred");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T12:09:55.907

如果您不想要任何异常捕获机制，您实际上可以使用[trigger_error(..) 。](http://de3.php.net/manual/de/function.trigger-error.php)

你可能喜欢一个更易读的结构：

```
ksort($hFileList) or trigger_error("IT FAILED!",E_ERROR);
$fileList = array_values($hFileList); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T12:10:51.040

也许使用好的旧[exit()函数？](http://php.net/manual/en/function.exit.php)

# javascript - Executing a prompt Javascript from Python

> ID：10870160
> 
> 赞同：2
> 
> 时间：2012-06-03T12:03:33.727
> 
> 标签：javascript, python, prompt

I'm using PyV8 to execute Javascript programs from Python. I had a problem executing "document.write", but found the solution here (using Mock Document): [Executing Javascript from Python](https://stackoverflow.com/questions/10136319/executing-javascript-from-python)

Now,I'm facing an other problem. I want to execute a prompt command javascript from python. The effect of the result should be like a simple python raw_input. I give an example:

```
var a, b, c, d;
prompt(a);
c = a
prompt(b);
c = c + b
d = a * b
document.write(c)
document.write(d) 
```

using PyV8, the evaluation of this script should evaluate the first line, stop at prompt(a) asking me to introduce the value of a (DOS line command), then resume the evaluation till next prompt, and so on. Thks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:34:14.187

将 Python 函数注入 JavaScript 上下文实际上非常简单——通过`JSContext.locals`对象将该函数分配给局部变量：

```
ctx = PyV8.JSContext()
ctx.enter()
ctx.locals.prompt = raw_input

ctx.eval('var a = prompt("js> ");') 
```

突然之间，您可以像在 Python 中那样使用 JavaScript 中的 Python 函数。

我通常会链接到文档，但[PyV8 文档](http://pyv8.googlecode.com/svn/trunk/doc/build/html/api/context.html)似乎在任何地方都没有正确的 MIME 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T19:16:15.953

如果 PyV8 中没有函数，那么您可以像在[您引用的示例](https://stackoverflow.com/questions/10136319/executing-javascript-from-python)中添加对象`prompt()`一样添加它。`document`

# facebook - FB.ui apprequest 在页面选项卡中不起作用

> ID：10870164
> 
> 赞同：0
> 
> 时间：2012-06-03T12:04:46.100
> 
> 标签：facebook, facebook-iframe, facebook-javascript-sdk

我有一个带有邀请按钮的页面选项卡应用程序（又名 FB.ui -> apprequests），当它运行时`example.com/pagetab`工作正常（即，它会弹出一个 FB.ui 朋友选择器窗口等）但是当我指向我的应用程序的页面选项卡时到那里并将其作为 iframe 从 Facebook 中加载，没有任何反应。起初我认为这是按钮没有链接的问题，因为 jquery 不知道哪个文档已准备好，但我切换到使用`onclick`甚至从 Chrome 控制台输入命令（当然在 iframe 的范围内）但没有任何反应...这是一个错误还是我错过了什么？

最小代码：

```
window.fbAsyncInit = function() {
  FB.init({
    appId      : '123456789', // App ID
    channelUrl : '//fbjscache.php', // Channel File
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
  });  };
 (function(d){
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = "//connect.facebook.net/en_US/all.js";
   ref.parentNode.insertBefore(js, ref);
}(document));
function sendInvite() {
  console.log("Inviting...");
  FB.ui({method: 'apprequests',
   title: 'Check out this great app!',
   message: 'Join the fun!',
  }, inviteCallback);
} 
```

然后在页面上

```
<a href="javascript:void(null)" class="invite" onclick="sendInvite()"><div class="facebookButton">Invite</div></a> 
```

当页面直接加载时，此代码完全按预期工作（弹出可爱的朋友选择器对话框），从 iframe 加载时不执行任何操作。这是一个错误还是有一些我没有注意到的隐藏设置/JS 怪癖？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T18:01:37.073

发现一个相关问题后，（[发送对话框在页面选项卡中不起作用](https://stackoverflow.com/questions/7280713/send-dialog-doesnt-work-in-page-tab)）我意识到问题是您需要`display : 'popup'`在选项中手动包含参数，因此工作代码需要：

```
function sendInvite() {
    FB.ui({method: 'apprequests',
        title: 'Check out this great app!',
        message: 'Join the fun!',
        display: 'popup'
    }, inviteCallback);
} 
```

这种行为明显违反[了文档](https://developers.facebook.com/docs/reference/dialogs/) 所说的应该发生的情况：

> 平台对话框都是为了在 web 和移动 web 上的各种显示上下文中无缝运行而构建的。如果您使用 JS、iOS 或 Android SDK 调用 Dialog，将根据平台和用户使用的设备自动为您选择显示模式。

除非对于“页面选项卡”和“桌面浏览器”的神秘组合，自动选择是“不显示，没有警告或错误消息”。

作为记录，适当的画布应用程序没有此限制。我在完整的应用程序中逐行使用相同的代码，一切正常。

# haskell - 柯里化会产生部分应用的功能吗？

> ID：10870165
> 
> 赞同：3
> 
> 时间：2012-06-03T12:04:52.523
> 
> 标签：haskell, f#, functional-programming

柯里化函数的结果是部分应用函数吗？我了解柯里化的工作原理，虽然我了解部分函数应用程序的工作原理，但我不清楚这些概念是否存在一些交叉。

我的困惑源于以下引自[Learn you a Haskell for great good](http://learnyouahaskell.com/higher-order-functions#curried-functions)的引言，这与我之前基于[John Skeet 的博客文章对这个](http://msmvps.com/blogs/jon_skeet/archive/2012/01/30/currying-vs-partial-function-application.aspx)概念的理解相冲突。

> 简单地说，如果我们调用一个参数太少的函数，我们会得到一个部分应用的函数，这意味着一个函数接受的参数与我们遗漏的参数一样多。

举个例子（在 F# 中，虽然问题一般是关于函数式编程）

```
> let add a b = a + b;;

val add : int -> int -> int

> let inc = add 1;;

val inc : (int -> int) 
```

在这个例子中是`inc`一个部分应用的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T12:24:00.527

一般来说，*柯里*化是指将一个双参数函数转换为一个接受一个参数并返回另一个单参数函数的函数，这样第一个参数调用柯里化函数的结果与第二个参数调用 this 的结果是等价的使用两个参数调用原始（未咖喱）函数。在具有闭包和动态类型（或类型推断）的伪 C 语言中，这看起来像这样：

```
// The original, uncurried function:
function f(a, b) { return 2 * a - b; }

// The curried function:
function g(a) {
    return function(b) {
        return f(a, b);
    }
}

// Now we can either call f directly:
printf("%i\n", f(23, 42));

// Or we can call the curried function g with one parameter, and then call the result
// with another:
printf("%i\n", (g(23))(42)); 
```

通过多次柯里化，我们可以将任何多参数函数简化为一组嵌套的单参数函数。

在 Haskell 中，所有函数都是单参数的；like 的构造`f a b c`实际上等价`((f(a))(b))(c)`于我们虚构的 C-with-closures。将多个参数真正传递给函数的唯一方法是通过元组，例如`f (a, b, c)`- 但由于柯里化函数的语法更简单，语义更灵活，因此很少使用此选项。

Haskell Prelude 定义了两个函数，`curry`并`uncurry`在这两个表示之间进行转换：`curry`is of type `((a,b) -> c) -> a -> b -> c`，即它接受一个接受元组`(a, b)`并返回 a的单参数函数，`c`并将其转换为 type 的函数`a -> b -> c`，即函数接受a 并返回一个接受 a并返回`a`a 的函数。做相反的事情。`b``c``uncurry`

部分应用并不是真正的事情。它只是给你有一个柯里化函数（例如`f a b`）的情况命名，而不是完全展开整个链（例如，`f 23 42`），你在途中的某个地方停下来，并进一步传递结果函数，例如`let g = f 23`。为了部分应用一个函数，它必须是柯里化的（你不能部分地应用`f (a, b)`as `let g = f (a)`），但是由于在 Haskell 中以柯里化的方式编写函数是默认的，部分应用是简单且常见的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:19:03.027

简短的回答：`inc`是通过部分应用获得的功能。

curried 函数的结果是目标语言（Haskell、F# 或其他）中某种类型的值，因此它可能是一个函数（但它也可能是一个整数、一个布尔值，...，具体取决于您的声明）。

关于部分应用程序......它只是给返回其他函数的函数应用程序的名称，但从技术上讲，它是一个和其他函数应用程序一样的函数应用程序。您返回的函数基于先前的参数甚至不是强制性的。举个`\x -> id` 例子：你总是得到恒等函数，独立于输入`x`。

# .net - 如何在更短的时间内从 Dll 加载表单，

> ID：10870169
> 
> 赞同：0
> 
> 时间：2012-06-03T12:05:38.757
> 
> 标签：.net, vb.net, .net-assembly

嗨，我在不同的项目中有表单，但在同一个解决方案中，这是一个 dll 项目，，，我想在另一个项目中的按钮单击事件上打开（显示）表单，我这样做没有任何问题，，但这需要很少是时候打开了

我正在使用这段代码：

```
Imports Transactions 'Transaction is my projects name from which I want to call forms 
```

在按钮点击事件中

```
Dim FrmDrVouchers As Transaction.FrmDebitVouchers = New Transactions.FrmDebitVouchers()

FrmDrVouchers.Show() 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:21:36.207

您可以将按钮单击事件的第一行放在 Click 事件之外的某个位置（例如，在构造函数中）并使 FrmDrVoucers 成为您的类的成员，这样只需显示表单以响应单击事件而不是构造第一的。

# liferay-6 - liferay-ui:journal-article 仅在 portlet 部署后第一次工作，然后为空白

> ID：10870171
> 
> 赞同：0
> 
> 时间：2012-06-03T12:05:48.457
> 
> 标签：liferay-6

（注意 Liferay 6.1）使用 Liferay-ui 来显示带有以下标签的期刊文章：

```
<liferay-ui:journal-article articleResourcePrimKey="10656" /> 
```

正如你所看到的，我已经为示例硬编码了articleResourcePrimKey，并且该文章存在于cms 中。它的 WCM 结构化内容和模板也与之相关联。

在服务器上部署 portlet 之后，第一次刷新一切正常，但下一次刷新同样没有返回任何内容（一个空白页面，好像 liferay-ui 根本不存在）

我已将 temaplte 更改为 Cacheable，然后它可以正常工作，直到我对模板或与之关联的内容进行修改，但是一旦我从 WCM 修改模板或内容，它就会开始表现相同。

当它在重新部署后和第一次刷新放置 portlet 的页面时起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:12:38.347

我一直使用 groupId 和 articleId 而不是 articleResourcePrimKey，而且效果很好。这两个值很容易在 Web 内容的管理屏幕中发现。

使用 Liferay 6.0，但即将升级到 6.1 并完全期待它能够工作。

# java - 必应 API 的 Java 应用程序

> ID：10870181
> 
> 赞同：3
> 
> 时间：2012-06-03T12:06:51.910
> 
> 标签：java, nullpointerexception, soap-client, bing-api

我必须制作一个能够将 Bing 搜索 API（SOAP 服务）与 java 一起使用的应用程序。它必须对单词进行特定搜索。这是我的代码：

```
 import com.google.code.bing.search.client.BingSearchClient;
    import com.google.code.bing.search.client.BingSearchServiceClientFactory;
    import com.google.code.bing.search.client.BingSearchClient.SearchRequestBuilder;
    import com.google.code.bing.search.schema.AdultOption;
    import com.google.code.bing.search.schema.SearchOption;
    import com.google.code.bing.search.schema.SearchRequest;
    import com.google.code.bing.search.schema.SearchResponse;
    import com.google.code.bing.search.schema.SourceType;
    import com.google.code.bing.search.schema.web.WebResult;
    import com.google.code.bing.search.schema.web.WebSearchOption;
public class MyApp {    
   String apikey = "****************";
   String searchword="google";
     public static void main(String[] args){
BingSearchServiceClientFactory factory = BingSearchServiceClientFactory.newInstance();
    BingSearchClient client = factory.createBingSearchClient();
    SearchRequestBuilder builder = client.newSearchRequestBuilder();
    builder.withAppId(apikey);
    builder.withQuery(searchword);
    builder.withSourceType(SourceType.WEB);
    builder.withVersion("2.0");
    builder.withMarket("en-us");
    builder.withAdultOption(AdultOption.MODERATE);
    builder.withSearchOption(SearchOption.ENABLE_HIGHLIGHTING);
    builder.withWebRequestCount(10L);
    builder.withWebRequestOffset(0L);
    builder.withWebRequestSearchOption(WebSearchOption.DISABLE_HOST_COLLAPSING);        
    builder.withWebRequestSearchOption(WebSearchOption.DISABLE_QUERY_ALTERATIONS);
    SearchResponse response = client.search(builder.getResult());

    for (WebResult result : response.getWeb().getResults()) {
            System.out.println(result.getTitle());
            System.out.println(result.getDescription());
            System.out.println(result.getUrl());
            System.out.println(result.getDateTime());
    }
}
    } 
```

我找到了这个[http://code.google.com/p/bing-search-java-sdk/](http://code.google.com/p/bing-search-java-sdk/)网站。我从 Azure MarketPlace 获得我的 appkey。我收到一个错误：java.lang.NullPointerException 在将显示响应的 for 循环行。这意味着响应为空。我不明白我错过了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:34:44.370

bing 目前正在更改他们的许可证系统。此 API 是使用“旧”版本 2 许可证创建的。MS 在迁移到 Azzure 市场时做了一些更改： [https](https://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44) ://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44 迁移指南：http: [//go.microsoft.com/fwlink/ ?LinkID =248077](http://go.microsoft.com/fwlink/?LinkID=248077)

我不认为您已经使用的这个 Java-API 包装器涵盖了这一点。

# prolog - 转换一个句子会创建一个无限循环 - 但是如何？

> ID：10870187
> 
> 赞同：3
> 
> 时间：2012-06-03T12:07:46.777
> 
> 标签：prolog, text-manipulation, failure-slice, non-termination

我不知道这是哪里出了问题。请注意，我对 Prolog 很陌生，我确信我错过了一些东西——只是不知道那可能是什么。有人可以帮我吗？

谢谢，这是我的代码：

```
printSentence([]).   
printSentence([W|[]]) :-
    write(W),
    write('.'),
    nl.  
printSentence([W|R]) :-
    write(W),
    write(' '),
    printSentence(R).

transform([], Result).  
transform([Word|Rest], Result) :-
    replace(Word, Replacement),
    append(Result, Replacement, NewResult),
    transform(Rest, NewResult).

replace(my, your).
replace(i, you).
replace(you, me).
replace(am, are).
replace(Word, Word).

test :-
    X = [you, are, my, only, hope],
    transform(X, Result),
    printSentence(Result). 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T21:00:09.233

@Junuxx 的回答是解决问题的一步；您的程序中还有另一个问题。但第一步退后一步：@Junuxx 发现了问题并修复了它。好的。*但是你*怎么能发现这样的问题呢？实际上，您问的**是“无限循环——但如何？”**

Prolog 中很酷的地方在于，您通常可以将循环程序本地化为程序的一个非常小的片段。这样的片段称为[故障片](/questions/tagged/failure-slice "显示标记为“故障切片”的问题")。那就是：阅读冗长的节目不再令人眼花！

让我们回到你的程序。如果加载它，您将收到如下消息：

```
警告：/usager/SO/paranoid.pl:13：
    单例变量：[结果]

```

这已经为您提供了一些很可能是错误的提示。唉，这**不是**你目前最关心的问题。您最大的问题是目标`test`循环！

# 本地化不终止

那么，你如何能够不费吹灰之力地意识到什么是真正的循环呢？

**一种方法**是启动跟踪器，它将逐步向您展示 Prolog 如何执行该程序。但是，跟踪器会显示很多不相关的细节。细节，在 Prolog 中编程时不需要了解。细节，填满你的脑海，以至于你很可能会完全错过实际的问题。因此，除非您想花时间在充满闪烁线条的屏幕上，否则请远离示踪剂。

**另一种方法**是将目标添加`false`到您的程序中。请记住，您的程序已经循环，因此这些额外的目标不会对您造成太大伤害。`false`为什么要用这些你一开始就不想写的目标来破坏你的程序呢？这是因为这些`false`目标将通过隐藏“不相关”部分来帮助您检测程序中未终止的罪魁祸首。之所以如此，要归功于以下观察：

**如果**失败切片（=您被破坏的程序）没有终止**，那么**原始程序也不会终止。

从某种意义上说，故障片是程序不终止的一个原因。或者更强烈地说：只要您不更改 failure-slice 中的可见部分；也就是说，只要你只是通过修改故障切片中不可见的部分来碰碰运气，问题就会持续存在！保证！这不是最好的保证，但总比盲目好。

这是我得到的失败片段。我删除`printSentence/1`了，因为它不再在片段中使用。我添加了`append/3`. 一些 Prologs 提供`append/3`了一个你不能修改的内置谓词。在这种情况下，请使用其他名称，例如`local_append/3`- 只是不要忘记替换所有出现的地方！

```
附加（[]，Zs，Zs）：-**假**。
附加（[X|Xs]，Ys，[X|Zs]）：-
   追加（Xs，Ys，Zs），假。

变换（[]，结果）：-**假**。
变换（[字|休息]，结果）： -
    替换（字，替换），
    追加（结果，替换，新结果），假，
    变换（休息，新结果）。

替换（我的，你的）：-**假**的。
替换（我，你）：-**假**。
替换（你，我）。
替换（我，是）：-**假**。
替换（字，字）： -**假**。

测试 ：-
    X = [你，是，我的，唯一的，希望]，
    变换（X，结果），假，
     printSentence（结果）。

```

当我加载这个故障片时，我得到：

```
？- 测试。
错误：超出本地堆栈

```

这很好地表明程序不会终止。在我有限的硬件上，它反而耗尽了所有资源。（（学究起来，这个程序可能仍然会终止，它可能只需要太多资源。但请记住：**如果**失败切片循环，则我们有这个，**然后**整个程序循环。无论如何，证明失败的非终止-切片通常会更容易，因为片段更短））。

一些观察：最初，`transform/2`曾经是递归的。现在，它不再是了。剩下的唯一递归是在`append/3`. 因此，我首先查看目标`append(Result, Replacement, NewResult)`，然后尝试找出变量可能是什么。最简单的是第三个参数：`NewResult`是我们片段中唯一出现的，因此我们可以将其替换为`_`. 第二个参数的变量`Replacement`总是`me`. 第一个参数（这里我现在要看看`test/0`）将是一个未实例化的变量。所以我们要考虑目标`append(_, me, _)`。

简单运行`append(_, me, _), false`看看这个目标不会终止！您也可以通过检查故障切片来看到这一点。再说一遍：

```
附加（[]，Zs，Zs）：-**假**。
附加（[X|Xs]，Ys，[X|Zs]）：-
   追加（Xs，Ys，Zs），假。

```

看`Ys`：没人管，就是“交”了。只有第一个和第三个参数可以保证终止！

有关更多信息，请参阅标签[failure-slice](/questions/tagged/failure-slice "显示标记为“故障切片”的问题")。

* * *

# 印刷精美

[某些限制适用！禁止的地方无效！您只能使用纯粹的单调 Prolog 程序进行上述推理。实际上，程序中的一些良性副作用也是可以的。只要它们不影响控制流。]

* * *

# 另一个问题

您的程序还有另一个问题。跑`printSentence([you]), false`过去看看！回溯和副作用不会轻易聚集在一起。对于初学者来说，最好的办法是一起避免副作用。有关如何消除编程问题中无用的副作用的示例，请参见[这个问题](https://stackoverflow.com/q/9744641/772868)和[那个答案。](https://stackoverflow.com/a/9791028/772868)为什么不打电话`transform([you, are, my, only hope], Xs)`或`maplist(replace,[you, are, my only, hope], Xs)`直接打电话？它让您再次专注于相关部分！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T12:17:18.543

这应该有效。请注意，您在`transform([],Result)`. 此外， append 在您尝试使用它的方式中不起作用，但您通常走在正确的轨道上。

```
transform([], []).

transform([Word|Rest], [Replacement|RestOfResult]) :-
    replace(Word, Replacement),
    transform(Rest, RestOfResult). 
```

# c# - 找到记录时更改右侧面板背景

> ID：10870189
> 
> 赞同：0
> 
> 时间：2012-06-03T12:07:50.303
> 
> 标签：c#

我可以在以下问题上使用一些帮助：

我每个月的每一天都有 31 个面板。每当那天（在数据集中）找到记录时，我想更改面板的背景。

如果您查看代码，您可以看到我要去哪里，所有面板都需要单独指出。如果你问我，这看起来很长。我认为您需要为所有面板建立索引？

有另一种/更好的方法吗？如果是这样，怎么办？

```
 int MaxRows;
        MaxRows = ds.Tables["Dataset"].Rows.Count;

        for (int i = 0; i != (MaxRows); i++)
        {
            DataRow dRow = ds.Tables["Dataset"].Rows[i];

            if (dRow.ItemArray.GetValue(1).ToString() == "1")
            {
                panDay1.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "2")
            {
                panDay2.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "3")
            {
                panDay3.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "4")
            {
                panDay4.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "5")
            {
                panDay5.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "6")
            {
                panDay6.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "7")
            {
                panDay7.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "8")
            {
                panDay8.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "9")
            {
                panDay9.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "10")
            {
                panDay10.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "11")
            {
                panDay11.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "12")
            {
                panDay12.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "13")
            {
                panDay13.BackColor = Color.LightSteelBlue;
            }
            else if (dRow.ItemArray.GetValue(1).ToString() == "14")
            {
                panDay14.BackColor = Color.LightSteelBlue;
            }
            etc. 
            etc.
            etc. 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:15:06.790

您应该制作一个包含所有 31 个面板的数组。

然后你可以写

```
panelArray[(int)dRow.ItemArray[i]].BackColor = Color.LightSteelBlue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T12:22:27.937

动态创建面板并将面板添加到一个父面板。为每个面板提供唯一的 ID，例如。面板日_1、面板日_2、面板日_31。现在使用访问相应的面板

```
//Create panels dynamically
for(int i=0;i<dataTable.Rows.Count.i++)
{
     Panel p=new Panel();
     p.Name="panelDay_" + i;

     //Write code to set panels location and size

     //Add panel to the panels parent
     parentPanel.Controls.Add(p);
}

//Now access panel with the name
parentPanel.Controls["panelDay_" + i].Color=Color.Blue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T12:32:38.080

哦！实际上我认为我们也可以在不创建数组的情况下访问。如果我们观察到他以顺序的方式给出了面板名称。像这样

```
panDay1
panDay2
panDay3
  .
  .
panDay31. 
```

如果是这种情况，并且我们假设 Control c 是所有面板的父级，那么我们可以使用这样的名称访问它

```
 //Assuming form itself is the parent then
 c=this;
 c.Cotrols["panDay" + i].BackColor=Color.Blue; 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T12:34:55.037

您可以使用字符串索引控件集合。这允许这种语法：

```
 for (int i = 0; i != (MaxRows); i++)
    {
        DataRow dRow = ds.Tables["Dataset"].Rows[i];
        this.Controls["panDay" + dRow.ItemArray.GetValue(1)].BackColor = Color.LightSteelBlue;
    } 
```

# android - 无意识地发送电子邮件

> ID：10870191
> 
> 赞同：0
> 
> 时间：2012-06-03T12:08:14.470
> 
> 标签：android, email

我正在尝试从我的应用程序发送一封电子邮件[NO INTENT]，但它没有发送。也许有人可以告诉我LOGCAT中没有错误有什么问题。

```
final Button send = (Button) this.findViewById(R.id.btnSend); 
        send.setOnClickListener(new View.OnClickListener() { 

            public void onClick(View v) {         
           try 
         {    
            javamail sender = new javamail("MY EMAIL", "My Password" ); 
            sender.sendMail("HI",    
                    "I'm trying Androin Email :)",    
                    "Person I sent to",    
                    "djkgotsod@gmail.com");    
            Log.d("send", "Owk");
        } catch (Exception e) {    
            Log.e("SendMail", e.getMessage(), e);    
        }  

    } 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:11:35.930

我所做的是使用 HTTP POST 将电子邮件发送到 php 脚本。然后我的服务器使用 php 的 mail() 发送实际的电子邮件。这样，您就绕过了问题的雷区，例如一些运营商封锁了 25 端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:29:46.077

You would need to integrate your own email client library (e.g., JavaMail), as there is no way to send email in Android natively without user intervention.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T12:14:59.987

查看[这篇](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-android-ap/2033124#2033124)文章，它使用带有 Gmail 身份验证器的 JavaMail API。注意，您必须输入有效的 gmail 用户名和密码希望这会有所帮助。

# http - 加载页面，保存 cookie 并使用 cookie 加载另一个页面

> ID：10870192
> 
> 赞同：0
> 
> 时间：2012-06-03T12:08:24.610
> 
> 标签：http, cookies, emacs, elisp, emacs23

如何在 emacs lisp 中加载带有 POST 参数的页面、保存响应 cookie、保存 cookie 以及加载另一个带有已保存 cookie 的页面？

换句话说，我需要模拟这个 bash 代码：

```
#!/bin/sh

LOGIN=SOMELOGIN
PASSWORD=SOMEPASSWORD

# Save cookie
curl -d "login=$LOGIN&password=$PASSWORD" -c /tmp/some.cookie http://stat.somesite.ru/

# Load page
curl -s -b /tmp/some.cookie http://stat.somesite.ru/ > /tmp/some.page

# Manipulations with saved page.... 
```

如果存在任何手册、代码源等——请告诉我 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:24:49.623

应该可以使用`shell-command`函数和/或其衍生物（qv，[从 Emacs 运行 Shell 命令](http://www.gnu.org/software/emacs/manual/html_node/emacs/Shell.html)）执行这些命令。

# java - 设置/返回数组的首选方式

> ID：10870194
> 
> 赞同：5
> 
> 时间：2012-06-03T12:09:25.043
> 
> 标签：java, arrays, performance, jvm, performance-testing

请比较两种设置/返回数组的方式：

```
static public float[] test_arr_speeds_1( int a ) {
  return new float[]{ a, a + 1, a + 2, a + 3, a + 4, a + 5,
                      a + 6, a + 7, a + 8, a + 9 };
} // or e.g. field = new float... in method

static public float[] test_arr_speeds_2( int a ) {
  float[] ret = new float[10];
  ret[0] = a;
  ret[1] = a + 1;
  ret[2] = a + 2;
  ret[3] = a + 3;
  ret[4] = a + 4;
  ret[5] = a + 5;
  ret[6] = a + 6;
  ret[7] = a + 7;
  ret[8] = a + 8;
  ret[9] = a + 9;
  return ret;
} // or e.g. field[0] = ... in method 
```

两者都生成不同的字节码，并且都可以反编译到它们以前的状态。通过分析器检查执行时间（100M 迭代，无偏，不同环境）后，_1 方法的时间约为。_2 的 4/3 时间，尽管两者都创建了一个新数组并将每个字段都设置为给定值。大多数时候时间可以忽略不计，但这仍然困扰着我 - 为什么 _1 明显变慢？任何人都可以以合理的、JVM 支持的方式检查/确认/向我解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T12:27:41.247

这是字节码之间的区别（仅针对前两项）。第一种方法：

```
bipush  10
newarray float      //creating an array with reference on operand stack

dup
iconst_0
iload_0
i2f
fastore             //setting first element

dup
iconst_1
iload_0
iconst_1
iadd
i2f
fastore             //setting second element

//...
areturn             //returning the top of the operand stack 
```

第二种方法：

```
bipush  10
newarray float
astore_1            //creating an array and storing it in local variable

aload_1
iconst_0
iload_0
i2f
fastore             //setting first element

aload_1
iconst_1
iload_0
iconst_1
iadd
i2f
fastore             //setting second element

//...
aload_1
areturn 
```

正如您所看到的，唯一的区别是数组引用在第一种情况下保留在操作数堆栈中（这就是为什么`dup`出现这么多次 - 以避免在之后丢失对数组的引用`fastore`），而在第二种情况下，数组引用保持在*普通*堆栈（保存方法参数和局部变量的地方）。在这种情况下，必须始终读取引用 ( `aload_1`)，因为`fastore`要求 arrayref 在操作数堆栈上。

我们不应该基于这个字节码做出假设——毕竟它是由[jit](/questions/tagged/jit "显示标记为“jit”的问题")转换为 CPU 指令的，而且在这两种情况下，数组引用很可能都存储在一个 CPU 寄存器中。否则性能差异将是巨大的。

如果您可以测量差异并且您正在进行低级优化 - 选择更快的版本。但我怀疑差异是“可移植的”（取决于架构和 JVM 版本/实现，您将观察到不同的时序行为）。话虽如此 - 我会选择更具可读性的版本，而不是在您的计算机上碰巧更快的版本。

# jquery - 如何最小化jquery UI的脚本

> ID：10870199
> 
> 赞同：1
> 
> 时间：2012-06-03T12:09:56.073
> 
> 标签：jquery, jquery-ui

我使用了下面的标签内容脚本。其中使用了 jquery 代码和 jquery ui 代码。jquery ui 的大小为 385kb，所以我使用了 188kb 的最小版本。这也是一个大文件。在网页上加载需要一些时间。我有任何方法可以在没有 jquery ui 的情况下使用代码...

[http://fiddle.jshell.net/joycse06/T7czp/49/show/light/#tabs-2](http://fiddle.jshell.net/joycse06/T7czp/49/show/light/#tabs-2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:16:01.053

您可以[下载](http://jqueryui.com/download)仅包含您需要的组件的 jQuery ui。这可以帮助大大减少库的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:29:52.960

您可以从此处的 jQuery UI 下载页面[http://jqueryui.com/download使用自定义功能/组件制作自定义包](http://jqueryui.com/download)

但是，如果您在执行此操作时遇到问题，这里是演示

[演示](http://joynag.net/demos/tabs)

并在上面的演示中[下载](http://joynag.net/demos/tabs/tabs.zip)整个包的链接，其中包含最小的 jQuery UI 和缩小的 JS 文件。总共 246Kb（解压缩）。

# javascript - 为什么 JavaScript 中不允许顶级匿名函数？

> ID：10870200
> 
> 赞同：0
> 
> 时间：2012-06-03T12:10:16.077
> 
> 标签：javascript, function, lambda

例如，`test.js`这是允许的（并且非常没有意义）：

```
1 + 2;
(function () {}); 
```

使用节点执行时：

```
$ node test.js
$ 
```

在其他上下文中允许使用该形式`function () {}`（不带括号），例如作为另一个函数的参数。

为什么 JavaScript 文件的顶层不允许以下内容？

```
function () {}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T12:12:17.510

以 开头的语句`function`是函数*语句*。
函数语句必须命名。（因为他们在该范围内创建了一个声明）

# android - Android 模拟器上的 Phonegap 不运行 index.html

> ID：10870215
> 
> 赞同：-1
> 
> 时间：2012-06-03T12:12:09.630
> 
> 标签：android, cordova, emulation

我正在尝试在 Android 模拟器（Motodev Studio 3.0.1）中使用 Phonegap 运行示例（或任何）应用程序。我按照 Phonegap 手册中的所有说明进行操作，但不是 index.html 的内容，而是启动了一个普通的 android 活动。我正在使用 Phonegap 1.7.0 版和带有目标 api 8、10、14 的 Android 模拟器。在所有情况下，问题都是一样的。没有错误，但没有加载 index.html。有什么问题？

来自控制台的信息：

```
[2012-06-03 13:43:59 - HelloCordova] Android Launch!
[2012-06-03 13:43:59 - HelloCordova] adb is running normally.
[2012-06-03 13:43:59 - HelloCordova] Performing phonegap.cordova.hello.HelloCordovaActivity activity launch
[2012-06-03 13:44:08 - HelloCordova] Launching a new emulator with Virtual Device 'AVD_api_8' 
```

问候

阿迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:17:38.730

在您的 java 代码中，您需要将您的类扩展到 DroidGap，而不是 Activity。您需要将 URL 加载为 super.loadUrl()。找到下面的代码......

代码：

```
 public class DemoActivity extends DroidGap {
     /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      super.loadUrl("file:///android_asset/www/index11.html");

        }
     } 
```

# c++ - 对向量进行排序时运算符重载的编译错误

> ID：10870229
> 
> 赞同：3
> 
> 时间：2012-06-03T12:15:32.977
> 
> 标签：c++, compiler-errors, g++, operator-overloading, mingw

我有一个大致定义如下的类。其中，它有一个`<`比较运算符。

```
class DictionarySearchItem {

public:

    DictionarySearchItem(); 
    double relevance() const;
    bool operator<(const DictionarySearchItem& item) { return relevance() > item.relevance(); }

};

typedef std::vector<DictionarySearchItem> DictionarySearchItemVector; 
```

然后我以这种方式使用该类：

```
DictionarySearchItemVector searchItems;

for (unsigned i = 0; i < entries.size(); i++) {
    // ...
    // ...
    DictionarySearchItem item;
    searchItems.push_back(item);
} 
```

但是，当我尝试对向量进行排序时：

```
std::sort(searchItems.begin(), searchItems.end()); 
```

我收到以下 MinGW 编译错误。

```
/usr/include/c++/4.2.1/bits/stl_algo.h:91: erreur : passing 'const hanzi::DictionarySearchItem' as 'this' argument of 'bool hanzi::DictionarySearchItem::operator<(const hanzi::DictionarySearchItem&)' discards qualifiers 
```

我不太明白我的代码有什么问题，而且我也不清楚错误消息。相同的代码在 MSVC2008 上编译得很好。知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T12:17:58.720

您需要制作小于运算符`const`：

```
bool operator<(const DictionarySearchItem& item) const { ... }
                                                   ^ 
```

原因可能是`sort`因为被比较的元素不能因为比较而改变。这可以通过让比较的两边`<`都是 const 来强制执行，这意味着运算符必须是 const，以及它的参数。

# android - 读取来自特定发件人的所有短信

> ID：10870230
> 
> 赞同：32
> 
> 时间：2012-06-03T12:15:44.807
> 
> 标签：android, sms

如何阅读特定发件人发给我的所有短信？例如，我想扫描 a) 身体和 b) 从“TM-MYAMEX”发送到手机的所有 SMS 的日期/时间。

一些网站似乎表明这可以从“content://sms/inbox”中读取。我无法弄清楚到底是怎么回事。也不确定大多数手机是否支持它。我正在使用 Galaxy S2。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-03T12:31:35.793

试试这种方式：

```
StringBuilder smsBuilder = new StringBuilder();
       final String SMS_URI_INBOX = "content://sms/inbox"; 
        final String SMS_URI_ALL = "content://sms/";  
        try {  
            Uri uri = Uri.parse(SMS_URI_INBOX);  
            String[] projection = new String[] { "_id", "address", "person", "body", "date", "type" };  
            Cursor cur = getContentResolver().query(uri, projection, "address='123456789'", null, "date desc");
             if (cur.moveToFirst()) {  
                int index_Address = cur.getColumnIndex("address");  
                int index_Person = cur.getColumnIndex("person");  
                int index_Body = cur.getColumnIndex("body");  
                int index_Date = cur.getColumnIndex("date");  
                int index_Type = cur.getColumnIndex("type");         
                do {  
                    String strAddress = cur.getString(index_Address);  
                    int intPerson = cur.getInt(index_Person);  
                    String strbody = cur.getString(index_Body);  
                    long longDate = cur.getLong(index_Date);  
                    int int_Type = cur.getInt(index_Type);  

                    smsBuilder.append("[ ");  
                    smsBuilder.append(strAddress + ", ");  
                    smsBuilder.append(intPerson + ", ");  
                    smsBuilder.append(strbody + ", ");  
                    smsBuilder.append(longDate + ", ");  
                    smsBuilder.append(int_Type);  
                    smsBuilder.append(" ]\n\n");  
                } while (cur.moveToNext());  

                if (!cur.isClosed()) {  
                    cur.close();  
                    cur = null;  
                }  
            } else {  
                smsBuilder.append("no result!");  
            } // end if  
            }
        } catch (SQLiteException ex) {  
            Log.d("SQLiteException", ex.getMessage());  
        } 
```

AndroidManifest.xml：

```
<uses-permission android:name="android.permission.READ_SMS" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-06T12:49:11.060

试试这个，它是一种从收件箱中读取消息的简单方法。

```
public class ReadMsg extends AppCompatActivity {

ListView listView;
private static final int PERMISSION_REQUEST_READ_CONTACTS = 100;
ArrayList smsList;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_read_msg);
    listView = (ListView)findViewById(R.id.idList);

    int permissionCheck = ContextCompat.checkSelfPermission(this, Manifest.permission.READ_SMS);

    if (permissionCheck == PackageManager.PERMISSION_GRANTED){
        showContacts();
    }else{
        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_SMS},PERMISSION_REQUEST_READ_CONTACTS);
    }
}

private void showContacts() {
    Uri inboxURI = Uri.parse("content://sms/inbox");
    smsList = new ArrayList();
    ContentResolver cr = getContentResolver();

    Cursor c = cr.query(inboxURI,null,null,null,null);
    while (c.moveToNext()){
        String Number = c.getString(c.getColumnIndexOrThrow("address")).toString();
        String Body= c.getString(c.getColumnIndexOrThrow("body")).toString();
        smsList.add("Number: "+ Number + "\n" + "Body: "+ Body );
    }
        c.close();
    ArrayAdapter adapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, smsList);
    listView.setAdapter(adapter);
} 
```

}

将此权限添加到清单中。

```
<uses-permission android:name="android.permission.READ_SMS"></uses-permission> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-04T12:22:49.057

```
 protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        inbox = (Button) findViewById(R.id.inbox);
        list = (ListView) findViewById(R.id.list);
        arlist = new ArrayList<String>();
        inbox.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Uri inboxUri = Uri.parse("content://sms/inbox");
                String[] reqCols = {"_id", "body", "address"};
                ContentResolver cr = getContentResolver();
                Cursor cursor = cr.query(inboxUri, reqCols, "address='+919456'", null, null);
                adapter = new SimpleCursorAdapter(getApplicationContext(), R.layout.msg_content_layout, cursor,
                        new String[]{"body", "address"}, new int[]{R.id.txt1, R.id.txt2});
                list.setAdapter(adapter);
            }
        });

    } 
```

在这里，我添加了数字 +919456 作为地址字段的值。

除此之外，您需要将 READ_SMS 权限添加到清单：

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-11T19:12:03.720

你可以在几行代码中做到这一点

```
String[] phoneNumber = new String[] { "+923329593103" }; 
Cursor cursor1 = getContentResolver().query(Uri.parse("content://sms/inbox"), new String[] { "_id", "thread_id", "address", "person", "date","body", "type" }, "address=?", phoneNumber, null);
                 StringBuffer msgData = new StringBuffer();
                if (cursor1.moveToFirst()) { 
                    do {

                       for(int idx=0;idx<cursor1.getColumnCount();idx++)
                       {
                           msgData.append(" " + cursor1.getColumnName(idx) + ":" + cursor1.getString(idx));
                       }

                    } while (cursor1.moveToNext());
                } else {

                     edtmessagebody.setText("no message from this contact"+phoneNumber);
                } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-03T12:34:40.093

```
public class SmsController extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
SmsMessage msgs[] = null;
Bundle bundle = intent.getExtras();
try {
    Object pdus[] = (Object[]) bundle.get("pdus");
    msgs = new SmsMessage[pdus.length];
    for (int n = 0; n < pdus.length; n++) {
        byte[] byteData = (byte[]) pdus[n];
        msgs[n] = SmsMessage.createFromPdu(byteData);
    }
} catch (Exception e) {

}
for (int i = 0; i < msgs.length; i++) {
    String message = msgs[i].getDisplayMessageBody();
    if (message != null && message.length() > 0) {
        String from = msgs[i].getOriginatingAddress();
        if(FROM.contains("TM-MYAMEX")){
            String  body = message ;
            Date datetime = new Date() ;
            } 
        }
    }
  }
 }
} 
```

我不确定“TM-MYAMEX”是什么意思，但这里是获取 all 的代码`SMS`。

`Date = new Date()`因为它在一个`BroadcastReceiver`然后你得到消息的时间是当前时间。

希望这有帮助。

# c# - Visual Studio 2010 中的 NUnit 工具选项

> ID：10870232
> 
> 赞同：1
> 
> 时间：2012-06-03T12:15:50.757
> 
> 标签：c#, asp.net, unit-testing, nunit

我已经安装了 Nunit，但它没有显示在 VS 2010 的工具菜单中。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:22:15.433

用于在 VS 2010 中集成 NUnit。[单击此处](http://www.marthijnvandenheuvel.com/2010/06/09/using-nunit-in-visual-studio-2010/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:06:40.267

您可以通过@Bili 找到的内容将 NUnit 集成到 VS 2010 中。我更喜欢使用 Resharper 的测试运行器（但这要花很多钱）。NCrunch 是一个免费插件（目前），它增强了 NUnit 的测试。除了运行单元测试之外，它还提供代码覆盖率。我相信这是一个 NuGet 包。

[http://www.ncrunch.net/](http://www.ncrunch.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T13:37:08.200

我写了一些运行 NUnit 测试的宏。它应该是私有的，所以我有一些假设并且它不是那么“干净”（我没有长时间工作）......但是如果你想关注它们，你可以获得一种非常舒适的“整合”方式VS 中的测试

假设：

*   您必须在 PATH 环境变量中有 NUnit bin 文件夹
*   测试项目“someName”将在“someName.Test”项目中（用于集成测试 - “someName.integration”）

如果您认为它可能会使您的工作变得轻松，那么代码就在这里：

```
 Imports System
    Imports EnvDTE
    Imports EnvDTE80
    Imports EnvDTE90
    Imports EnvDTE90a
    Imports EnvDTE100
    Imports System.Diagnostics
    Imports System.Collections.Generic
    Imports System.IO

    Public Module NUnitExtensions
        Sub AttachToNUnit()
            Dim attached As Boolean = False
            Dim proc As EnvDTE.Process

            For Each proc In DTE.Debugger.LocalProcesses
                If (Right(proc.Name.ToLower(), 9) = "nunit.exe") Then
                    proc.Attach()
                    attached = True
                    Exit For
                End If
            Next

        End Sub

        Private Sub RunNunitFile(ByRef dll)
            Dim args = """" & dll & """" & " /run"
            System.Diagnostics.Process.Start("nunit.exe", args)
        End Sub

        Private Function GetSolutionFiles(ByRef filePattern) As String()
            Dim solutionDir = System.IO.Path.GetDirectoryName(DTE.Solution.FullName)
            Dim nunitFiles = System.IO.Directory.GetFiles(solutionDir, filePattern, IO.SearchOption.AllDirectories)
            Return nunitFiles
        End Function

        Private Function GetDllCompilationAttributes(ByRef dllFullPath) As Boolean()
            Dim ActiveDoc As Document = DTE.ActiveDocument
            Dim Proj As Project = ActiveDoc.ProjectItem.ContainingProject
            Dim config As Configuration = Proj.ConfigurationManager.ActiveConfiguration
            Dim result(2) As Boolean
            result(0) = False
            result(1) = False
            Dim parts = Split(dllFullPath, "\")
            For Each part As String In parts
                If part.ToLower() = "obj" Then
                    result(1) = True
                End If
                If part.ToLower() = config.ConfigurationName.ToLower() Then
                    result(0) = True
                End If
            Next
            Return result
        End Function

        Sub RunNUnit()

            Dim nunitUnitTestFiles = GetSolutionFiles("*test.dll")
            Dim nunitIntegrationTestFiles = GetSolutionFiles("*integration.dll")

            Dim unitTestsAndIntegrationTestFiles As New List(Of String)

            unitTestsAndIntegrationTestFiles.AddRange(nunitUnitTestFiles)
            unitTestsAndIntegrationTestFiles.AddRange(nunitIntegrationTestFiles)

            For Each dll As String In unitTestsAndIntegrationTestFiles
                Dim dllAttributes = GetDllCompilationAttributes(dll)
                Dim debug = dllAttributes(0)
                Dim obj = dllAttributes(1)

                If debug AndAlso Not obj Then
                    RunNunitFile(dll)
                End If

            Next

        End Sub

        Sub RunCurrentProjectNUnit()

            Dim ActiveDoc As Document = DTE.ActiveDocument
            Dim Proj As Project = ActiveDoc.ProjectItem.ContainingProject
            Dim config As Configuration = Proj.ConfigurationManager.ActiveConfiguration

            Dim projectFileName = Proj.FullName
            Dim projectPath = Path.GetDirectoryName(projectFileName)
            Dim dllName = Proj.Name

            If (Not projectPath.ToLower().EndsWith(".test")) Then
                projectPath += ".Test"
                dllName += ".Test"
            End If

            Dim testDllPath = String.Format("{0}\bin\{1}\{2}.dll", projectPath, config.ConfigurationName, dllName)

            RunNunitFile(testDllPath)
        End Sub
    End Module 
```

确保如果将其添加到宏窗口 (Alt+F8)，则必须将代码文件命名为“NUnitExtensions”，然后您可以将这些宏添加为工具栏按钮，例如

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T14:28:04.017

[Visual NUnit](http://www.bubblecloud.org/visualnunit)扩展非常有用；它添加了一个用于运行 NUnit 测试的工具箱。

# ruby-on-rails - Mongoid / Rails：查找 User.id 未出现在引用的答案集合中的问题

> ID：10870234
> 
> 赞同：0
> 
> 时间：2012-06-03T12:16:25.970
> 
> 标签：ruby-on-rails, mongodb, mongoid

简而言之，标题就是问题。以下是我正在使用的简化模型：

```
class Test
  include Mongoid::Document

  field :name, :type => String
  embeds_many :questions
  attr_accessible :name, :questions      
end

class Question
  include Mongoid::Document

  field :text, :type => String

  embedded_in :test
  has_many :answers
  attr_accessible :text, :test, answers    
end

class Answer
  include Mongoid::Document

  field :value, :type => Integer

  belongs_to :question
  belongs_to :user
  attr_accessible :value, :question, :user      
end

class User
  include Mongoid::Document

  has_many :answers
  attr_accessible :answers    
end 
```

我希望能够以最少的数据库查询为用户检索测试中所有未回答的问题。

这是迄今为止我想到的最好的解决方案

```
answered = []
user.answers.each {|a| answered << a.question_id}
test.questions.where(:_id.nin => answered).length 
```

对此的任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:03:37.433

**更新**：您需要查询不存在约束选择：

```
test.questions.find_by_sql("WHERE NOT EXISTS (SELECT id FROM answers WHERE answers.question_id = questions.id AND answers.user_id = #{user.id}") 
```

或条件连接的计数为 0

```
test.questions.joins("INNER JOIN answers ON answers.question_id = questions.id AND answers.user_id = #{user.id} AS user_answers").where('COUNT(user_answers.id) = 0') 
```

让我知道这些是否有效。对他们的表现有任何见解吗？

**原始答案，**不正确，因为它假设我们需要用户提出的完全未回答的问题：

在答案上使用计数器缓存。这假设 questions db 表上有一个 answers_count 整数列。

```
class Answer
  include Mongoid::Document

  field :value, :type => Integer

  belongs_to :question, :counter_cache => true
  belongs_to :user
  attr_accessible :value, :question, :user      
end 
```

鉴于此，您的查询可以是：

```
test.questions.where(answers_count: 0, user_id: user) 
```

# c - C：将文本读入链表

> ID：10870235
> 
> 赞同：0
> 
> 时间：2012-06-03T12:16:28.760
> 
> 标签：c, linked-list, fgets

我试图从文本文件中读取链接列表。文本文件的书名、作者和年份用“：”分隔。每本书都在一个单独的行上。文本文件条目如下所示：

```
Absalom, Absalom!:William Faulkner:1936
After Many a Summer Dies the Swan:Aldous Huxley:1939    
Ah, Wilderness!:Eugene O'Neill:1933 
```

我正在从头开始重写它。评论将不胜感激。

```
#include <stdlib.h>
#include <stdio.h>

struct BookNode
{
    char linebuffer[128];
    char delim[]=":";
    char * Title[50];
    char * Author[50];
    char * Year[5];
    struct BookNode *next;
//    char *token = NULL;
};

int main(void)
{
    static const char booklist[]= "booklist.txt";
FILE *fr=fopen("booklist.txt", "r");
if ( fr != NULL)

{
char Title[50];
char Author[50];
char Year[5]
struct BookNode Booknode;
while (fgets(linebuffer,128, fr) != NULL &&
    sscanf(line, "%49s %49s %4s", 
        &BookNode.Title, BookNode.Author, BookNode.Year)==3)
    {
         printf("%50s %50s %5s", 
                BookNode.Title, BookNode.Author, BookNode.Year);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T13:53:43.340

您的代码现在存在多个问题。

第一个（我不骗你）是代码格式和缩进。您粘贴的示例没有常规格式或缩进可言。即使在这样的简短示例中，也更难以遵循代码流。始终缩进您的代码，并选择一种编码风格（有几种）并坚持下去。

关于代码流，第一个问题是错误检查。即，您检查`fopen`返回状态，但在打开文件失败时未采取足够的措施。

第二个问题是概念问题。您似乎没有意识到 N 个字符的数组只能容纳长度为 N-1 的字符串。因此，`char[4]`几乎不是将年份存储为字符串的合适格式。

现在已经处理了这些问题，以下是在任何情况下都会阻止您的代码工作的实际缺陷：

1) 该`fgets`函数将向上读取，直到它填满您的缓冲区或到达行尾或文件结尾字符。然而，您仍然调用`fgets`三次以尝试读取文件中的单行条目。你想做的事情不太可能。您必须重新考虑循环的内容。

2）您的“主”循环条件可能存在缺陷。`feof`这是对& co的使用非常普遍的误解。假设您的数据文件最后包含一个换行符（并且这样做只是常规的），您的循环将执行一次太多。

最好像这样构造你的行阅读循环：

```
while (fgets(buffer, BUF_SIZE, stdin)) { /* parse buffer */ } 
```

3）您的代码中的内存管理存在基本问题：即该函数`addEntry`无法分配内存来存储您的记录。相反，您的链表中的所有条目最终都将指向您在`main`函数中分配的同一个共享缓冲区。

有几种方法可以解决这个问题。`malloc`一种是对结构的每个成员`BookNode`（`title`、、`author`和）使用多次调用`year`。另一种可能更可取的方法是使用可变大小的结构，如下所示：

```
struct BookNode {
    char *title;
    char *author;
    char *year;
    struct BookNode *next;
    char buffer[]; // this shorthand requires C99
}; 
```

对于每个`struct BookNode`，您在它们之后分配足够的存储空间，以便您可以在那里复制共享缓冲区的内容。`title`, `author`,`year`然后指向这个附加的存储。这样您就不会在循环的下一次迭代中覆盖其他 BookNode 的内容。而且您只需要一个`free`即可释放整个节点。

我可能没有在这里列出您的代码中的所有问题。也许您应该首先尝试解决一个较小的子问题，例如从那里读取单个条目`stdin`并从那里构建，而不是再次重写？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:50:42.467

`addEntry`应该为标题、作者和年份分配内存。
此外，执行`fgets`3 次将读取 3 行。您需要`fgets`每个循环一个，并将结果拆分为不同的部分（例如使用`strtok_r`）。

您所做的是保存指向静态缓冲区的指针。读取下一行时，此缓冲区将被新数据覆盖。

请注意，如果您分配了数据，您最终必须释放它。条目的析构函数需要释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T16:21:33.097

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct BookNode {
    char * Title;
    char * Author;
    char * Year;
    struct BookNode * next;
} * head;

void addEntry(char * T, char * A, char * Y);
void display();
int numEntries();
//void writeBookData(struct BookNode * selection);
void free_book(struct BookNode *bnp){
    if(bnp == NULL) return;
    free(bnp->Title);
    free(bnp->Author);
    free(bnp->Year);
    free_book(bnp->next);
    free(bnp);
}

int main() {
    FILE * fpointer;
    fpointer=fopen("booklist.txt","r");
    if(fpointer == NULL){
        printf("Booklist could not be opened.\n");
        exit(EXIT_FAILURE);
    }

    char Title[50+1];
    char Author[50+1];
    char Year[4+1];

    head = NULL;
    while (EOF!=fscanf(fpointer, "%50[^:]%*c%50[^:]%*c%4[^\n]%*c", Title, Author, Year)){
        //note:The input number of characters is limited (Eg50), it (because minutes in excess of the limit  is used in the following items) there must be large enough.

        addEntry(Title, Author, Year);
    }
    fclose(fpointer);

    int entryCount = numEntries();
    printf("There are %d entries in this Book list\n", entryCount);

    display();

    free_book(head);
    return 0;
}

void addEntry(char * T, char * A, char * Y){
    struct BookNode * tempNode, * iterator;
    tempNode = (struct BookNode *)malloc(sizeof(struct BookNode));
    tempNode->Title = (char *)malloc(strlen(T)+1);
    strcpy(tempNode->Title, T);

    tempNode->Author = (char *)malloc(strlen(A)+1);
    strcpy(tempNode->Author, A);

    tempNode->Year = (char *)malloc(strlen(Y)+1);
    strcpy(tempNode->Year, Y);

    tempNode->next = NULL;

    iterator = head;

    if (head == NULL){
        head = tempNode;
    } else {
        while(iterator->next != NULL){
            iterator = iterator->next;
        }
        iterator->next = tempNode;
    }
}

int numEntries(){
    if(head == NULL)
        return 0;
    else{
        int count;
        struct BookNode *iterator;
        for(count=0, iterator=head; iterator!=NULL; iterator = iterator->next, ++count)
            ;
        return count;
    }
}

void display(){
    if(head == NULL)
        return ;
    else{
        struct BookNode *iterator;
        for(iterator=head; iterator!=NULL; iterator = iterator->next)
            fprintf(stdout, "%s:%s:%s\n", iterator->Title, iterator->Author, iterator->Year);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T16:54:51.147

strtok 的例子

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(){
    char line[] = "Absalom, Absalom!:William Faulkner:1936\n";
    char *p;
    char * Title;
    char * Author;
    char * Year;

    p = strtok(line, ":");
    Title = strdup(p);
    Author = strdup(strtok(NULL, ":"));
    Year = strdup(strtok(NULL, ": \n"));
    printf("\"%s\",\"%s\",\"%s\"\n", Title, Author, Year);
    free(Title);
    free(Author);
    free(Year);
}
//result:"Absalom, Absalom!","William Faulkner","1936" 
```

# java - 存储哈希图值的概率

> ID：10870236
> 
> 赞同：0
> 
> 时间：2012-06-03T12:16:33.137
> 
> 标签：java, hashmap, probability

我有一个哈希图，我正在读取一个文本文件并将唯一单词存储到键中，并将该特定单词的频率数存储在值字段中的另一个文本文件中。

现在，我必须跟踪单词出现在另一个文本文件中的概率。我不需要知道如何计算概率，但是，我需要弄清楚的是，当值字段已经被取（词的频率）时，我如何存储与每个键（词）相关的概率。

您是否建议我使用相同的键制作另一个哈希图，但用概率替换值？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T12:17:33.293

您应该创建一个包含两条信息的类，并将该类存储在单个哈希图中。

# javascript - Chrome 扩展商店

> ID：10870238
> 
> 赞同：3
> 
> 时间：2012-06-03T12:16:48.870
> 
> 标签：javascript, google-chrome-extension, local-storage

在构建我的 Google Chrome 扩展程序时，我遇到了存储其设置的问题。我创建了一个设置页面，在用户单击 browserAction 图标后在选项卡中打开该页面。此页面具有用于设置我的扩展程序的 UI，例如，它可以将设置存储到 localStore。但是我的扩展程序的后台页面（应该读取这些设置）没有任何 localStore。

我应该将扩展设置存储在哪里，以便可以从浏览器中的任何位置访问并“永久”存储？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:55:33.703

如果您想使用您的后台页面临时存储数据：

```
// in your backgroundpage
// Set a value
window['yourvalue']=123;
// Get a value
alert(window['yourvalue']);

// in any other page (options/popup/message/whatever)
var bg=chrome.extension.getBackgroundPage();
// Set a value
bg['yourvalue']=123;
// Get a value
alert(bg['yourvalue']); 
```

我总是在我的扩展中使用这些函数：

```
var bg=chrome.extension.getBackgroundPage();
// Save data
function save(key, val) {
    bg[key]=val;
    var data={};
    var tmp=localStorage.getItem("MyPlugin");

    if(tmp!=null&&tmp.indexOf("{")>-1&&tmp.indexOf("}")>-1)
    {
        data=JSON.parse(tmp);
    }
    data[key]=val;
    localStorage.setItem("MyPlugin", JSON.stringify(data));
}

// Restore the data
var data={};
var tmp=localStorage.getItem("MyPlugin");

if(tmp!=null&&tmp.indexOf("{")>-1&&tmp.indexOf("}")>-1)
{
    data=JSON.parse(tmp);
    for (var key in data) {
        if (data.hasOwnProperty(key)) {
            bg[key]=data[key];
        }
    }
} 
```

# jsf - JSF：Bean 属性不断恢复到最后一个选项卡值

> ID：10870246
> 
> 赞同：1
> 
> 时间：2012-06-03T12:18:10.713
> 
> 标签：jsf, primefaces

我添加了包含输入字段的新选项卡。但是，由于某种原因，我的 managedbean 只能存储添加的最新选项卡（示例选项卡 3）的值。如果我要切换到较早的选项卡（示例选项卡 2）并尝试保存值，则存储的值始终会恢复为最后一个选项卡的输入字段值。在论坛中搜索绝对没有明确的解决方案，包括 stackoverflow 和 primefaces 论坛。重申一下，这是一个详细的演练：

1.  TabView -> 添加新选项卡（选项卡 1）
2.  将 t1、f1、c1 保存在选项卡 1 下（成功）
3.  添加新标签（标签 2）
4.  添加新标签（标签 3）
5.  在选项卡 3 下保存 t3、f3、c3（成功）
6.  选择选项卡 2
7.  在选项卡 2 下保存 t2、f2、c2（失败）-> 结果：选项卡 2 值保存为选项卡 3 值（t3、f3、c3）

    ```
    <ui:composition template="/template/StakeholderTemplate.xhtml">

        <ui:define name="top">
            <h2>Customer Information Data Entry</h2>
        </ui:define>

        <ui:define name="contentInsert">
            <p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/>  
            <p:dialog modal="true" widgetVar="statusDialog" header="Status"   
                      draggable="false" closable="false" resizable="false">  
                <p:graphicImage value="/adminItem/images/ajaxloading.gif" /> 
            </p:dialog> 

            <h:form id="form">

                <p:growl showDetail="true" /> 

                <h:panelGrid columns="1">

                    <p:commandButton value="Add tab" process="@this" update="tw" actionListener="#{backMicroPortalMB.addTab}">
                    </p:commandButton>
                    <p:growl id="tabsave" showDetail="true" />
                    <p:tabView id="tw" style="width:100%" activeIndex="#{backMicroPortalMB.activeIndex}" value="#{backMicroPortalMB.unstructuredTabs}"  var="tab"  dynamic="true" cache="false">
                        <p:ajax event="tabChange" process=":form" listener="#{backMicroPortalMB.onTabChange}"/>

                        <p:tab title="#{tab.tabTitle}" closable="true">

                            <h:outputLabel for="tabTitle" value="Please key in tab title:" />
                            <h:inputText id="tabTitle" value="#{backMicroPortalMB.tab.tabTitle}"/>
                            <br/>

                            <h:outputLabel for="fieldTitle" value="Please key in field title:" />
                            <h:inputText id="fieldTitle" value="#{backMicroPortalMB.opt.fieldTitle}" /><br/>

                            <h:outputLabel for="contentTitle" value="Please key in content:" />
                            <p:editor id="contentTitle" value="#{backMicroPortalMB.opt.content}" width="600"/><br/>

                            <p:commandButton value="Save" update="@form" action="#{backMicroPortalMB.saveTab}" />

                        </p:tab>  
                    </p:tabView>
                    <p:commandButton id="panel" value="Add" action="#{backMicroPortalMB.createMicroPortal}"/>  
                </h:panelGrid>
            </h:form>

        </ui:define>

    </ui:composition> 
    ```

豆子代码：

```
@ManagedBean
@ViewScoped
public class BackMicroPortalMB {

public void addTab(ActionEvent action) {

        FacesContext ctx = FacesContext.getCurrentInstance();
        ExternalContext ectx = ctx.getExternalContext();

        String url = "A tab";

        TabView tw = (TabView) ctx.getViewRoot().findComponent("form2:tw");
        TempTab tab = new TempTab();
        tab.setTabIndex(unstructuredTabs.size());
        tab.setTabTitle("new Tab");    
        unstructuredTabs.add(tab);

    }//add new Tab

public void onTabChange(TabChangeEvent event) {

        FacesContext ctx = FacesContext.getCurrentInstance();
        ExternalContext ectx = ctx.getExternalContext();

        TempTab tab = this.unstructuredTabs.get(activeIndex);

        this.tab.setTabTitle(tab.getTabTitle());
        this.opt.setFieldTitle(tab.getOptField().iterator().next().getFieldTitle());
        this.opt.setContent(tab.getOptField().iterator().next().getContent());

        // FacesMessage msg = new FacesMessage("Tab Changed", "Active Tab: " + event.getTab() + this.selectedIndex);  

        // FacesContext.getCurrentInstance().addMessage(null, msg);  
    }

public void saveTab() {

        FacesContext ctx = FacesContext.getCurrentInstance();
        Long stakeholderId = (Long) ctx.getExternalContext().getSessionMap().get("stakeholderId");        
        TempTab currentTab = this.unstructuredTabs.get(activeIndex);
        currentTab.setTabTitle(this.tab.getTabTitle());
        Collection<OptionalField> optFieldList = new ArrayList<OptionalField>();        
        optFieldList.add(this.opt);
        currentTab.setOptField(optFieldList);

        FacesMessage msg = new FacesMessage(tab.getTabTitle() + " Saved!");

        ctx.addMessage(null, msg);
    }//add new Tab   
} 
```

我在 PrimeFaces 表单上进行了搜索，我得到的唯一有用的回复是谷歌 viewscoped 和 tabview。但是，这里的问题到底是什么？我对 PrimeFaces 和 JSF 非常陌生，非常感谢您的建议。

PrimeFaces 3.3 JSF 2.1 Glassfish 3.1.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T12:51:20.147

您正在使用带有一组选项卡作为值的动态选项卡视图，并将每个选项卡的所有输入值绑定到**一个相同**的bean 属性。在处理来自所有选项卡的输入期间，每个选项卡的输入值将按顺序相互覆盖，直到到达最后一个选项卡，因此 bean 仅以最后一个选项卡的值结束。

您需要将特定于选项卡的属性绑定到特定于选项卡本身的模型对象，而不是绑定到在所有选项卡之间共享的托管 bean 属性。在你的情况下，它是`#{tab}`对象。所以你的`<p:tab>`内容最终应该是

```
<h:outputLabel for="tabTitle" value="Please key in tab title:" />
<h:inputText id="tabTitle" value="#{tab.tabTitle}"/>

<h:outputLabel for="fieldTitle" value="Please key in field title:" />
<h:inputText id="fieldTitle" value="#{tab.fieldTitle}" /><br/>

<h:outputLabel for="contentTitle" value="Please key in content:" />
<p:editor id="contentTitle" value="#{tab.content}" width="600"/><br/> 
```

# svn - Trac 在首次安装两者时不会重新同步存储库

> ID：10870249
> 
> 赞同：1
> 
> 时间：2012-06-03T12:18:38.900
> 
> 标签：svn, nginx, trac

我终于让 Trac 在 Nginx 上运行 FastCGI (http://trac.edgewall.org/wiki/TracFastCgi#SimpleNginxConfiguration)。此外，Subversion 与来自源下载的依赖包一起安装，我调用 svnserve 作为守护进程并创建了我的存储库。一切似乎都很好。

我想在 Trac 中浏览我的存储库。在我从 Trac Web 界面将存储库添加到 Trac 之后，它需要一个名称和我的 repo 目录。一条消息说：

> 您现在应该运行 trac-admin $ENV repository resync "My Repo" 以将 Trac 与存储库同步。

所以我做了。我是由用户“trac”完成的，该用户与我创建 Trac 环境的用户相同。

然后我得到了这个：

**警告：无法与存储库“（默认）”同步（不支持的版本控制系统“svn”：/usr/local/lib/libsvn_ra_neon-1.so.0：未定义符号：xmlFreeParserCtxt）。查看 Trac 日志以获取更多信息。**

这是日志中的内容：

```
2012-06-03 18:28:51,060 Trac[svn_fs] INFO: Failed to load Subversion bindings
Traceback (most recent call last):
  File "build/bdist.linux-x86_64/egg/trac/versioncontrol/svn_fs.py", line 267, in __init__
  File "build/bdist.linux-x86_64/egg/trac/versioncontrol/svn_fs.py", line 68, in _import_svn
  File "/usr/local/lib/svn-python/svn/fs.py", line 19, in ?
    from libsvn.fs import *
  File "/usr/local/lib/svn-python/libsvn/fs.py", line 7, in ?
    import _fs
ImportError: /usr/local/lib/libsvn_ra_neon-1.so.0: undefined symbol: xmlFreeParserCtxt 
```

有人说 webserver 和 Trac 由不同的用户运行是权限问题。但我不知道如何解决。有人说这是我应该重新安装的绑定。我试着去 python 控制台并输入'import svn'。没啥事儿。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:30:36.003

您正在运行什么操作系统/版本？

你能澄清一下你是如何安装 Subversion 的吗？您是下载源代码并从头开始编译，还是通过系统的包管理器安装它？

同样，您是手动安装 Trac 还是通过包管理器安装？

错误输出中的最后一行是令人不安的行。库（Subversion的`libsvn_ra_neon`一部分）试图引用一个不存在的符号。可能导致这种情况的一件事是试图相互合作的某些东西的不兼容版本。如果您从头开始编译任何系统组件，请尝试卸载它们并重新安装系统包管理器提供的版本。这应该通过确保安装任何必要辅助库的兼容版本来解决这些类型的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:58:02.420

快速的网络搜索显示*xmlFreeParserCtxt*是*python-libxml2*的一部分。

这可能会帮助您追踪变化无常。但我同意“bta”，您应该使用 Linux 发行版存储库中的打包版本的*python-subversion*来快速摆脱这种情况。

# iphone - 释放 managedObjectContext 对象 c

> ID：10870250
> 
> 赞同：0
> 
> 时间：2012-06-03T12:18:48.903
> 
> 标签：iphone, ios, memory-leaks, dealloc

我曾尝试使用分析工具来查看内存泄漏，而 Xcode 在这一点上给了我一个内存泄漏：

。H

```
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext; 
```

.m

```
@synthesize managedObjectContext = __managedObjectContext; 
```

然后在代码中我这样做：

```
AppDelegate *appController = [[UIApplication sharedApplication] delegate];

self.managedObjectContext = [[NSManagedObjectContext alloc] init];
[self.managedObjectContext setUndoManager:nil];
[self.managedObjectContext setPersistentStoreCoordinator: [appController persistentStoreCoordinator]]; 
```

在`dealloc`这个：

```
- (void)dealloc
{    
    [__managedObjectContext release];
    [super dealloc];
} 
```

它给了我这一行的内存泄漏：

```
[self.managedObjectContext setUndoManager:nil]; 
```

对于这个对象：

```
self.managedObjectContext = [[NSManagedObjectContext alloc] init]; 
```

我已经在 中发布了`dealloc`，为什么会出现内存泄漏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:35:24.917

您的`_managedObjectContext`泄漏是因为它的保留计数增加了两次，但您只释放了一次。您已经创建了您的财产`strong`，这意味着当它被分配给它时它将保留该对象。`managedObjectContext`但是您也可以在不自动释放（或手动释放）的情况下进行分配。因此错误在这一行：

```
self.managedObjectContext = [[NSManagedObjectContext alloc] init]; 
```

您分配的对象的保留计数为 1，但合成属性将再保留一次，因此保留计数为 2。当您在 dealloc 中释放它时，它将保留，因为它仍然具有保留计数1。

您需要做的是*自动*释放您分配的对象：

```
self.managedObjectContext = [[[NSManagedObjectContext alloc] init] autorelease]; 
```

或者不调用综合设置器，而是直接分配给`_managedObjectContext`：

```
_managedObjectContext = [[NSManagedObjectContext alloc] init]; 
```

我会推荐前者，因为后者如果`_managedObjectContext`不是 nil 就会泄漏。但是，如果您确定`_managedObjectContext`在分配之前为零，您可以选择您想要的任何一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T12:24:11.393

这条线...

```
self.managedObjectContext = [[NSManagedObjectContext alloc] init]; 
```

...将保留计数增加两个，一个用于分配，一个用于属性的“强”。

尝试：

```
__managedObjectContext = [[NSManagedObjectContext alloc] init]; 
```

# java - Applet 中的颜色参数

> ID：10870254
> 
> 赞同：1
> 
> 时间：2012-06-03T12:19:12.347
> 
> 标签：java, parameters, applet

我想从参数中传递一种颜色来更改文本的颜色，但是当我将`param`元素放入 HTML 中时，根本没有显示颜色。我正在使用 Netbeans 7.1。

为什么不显示颜色？

## HTML

```
<HTML>
<HEAD>
   <TITLE>Applet HTML Page</TITLE>
</HEAD>
<BODY>
 <H3><HR WIDTH="100%">Applet HTML Page<HR WIDTH="100%"></H3>
<P>
  <APPLET codebase="classes" code="ex1/ex11.class" width=350 height=200>
   <PARAM name="color" value="black"/>
    </APPLET>
 </P>
<HR WIDTH="100%"><FONT SIZE=-1><I>Generated by NetBeans IDE</I></FONT>
</BODY>
</HTML> 
```

## 代码

```
package ex1;

import java.awt.*;
import javax.swing.JApplet;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.Timer;

public class ex11 extends JApplet implements ActionListener{
    int i ;
    String color;

    @Override
    public void init() 
    {
        Timer timer = new Timer(600, this);
        timer.start();
        i=0;
        this.setSize(900,900);   
    }

    @Override
    public void paint(Graphics g) 
    {
        g.clearRect(0, 0, this.getWidth(), this.getHeight());
        g.setFont(new Font(Font.MONOSPACED, Font.BOLD, 40));
        g.setColor(Color.getColor(getParameter("color")));
        g.drawString(""+i, 250, 150);
    }

    public void actionPerformed(ActionEvent e)
    {
        if (i <5)
        {
            i= i+1;
            repaint();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:24:41.287

正如@Emmanuel Bourg 所讨论的，`Color.getColor(String)`不能按照您想要的方式使用它。[`Color.decode(String)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html#decode%28java.lang.String%29)改为查看。

```
g.setColor(Color.decode("#ff0000"));  // Very RED 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:11:08.133

`Color.getColor()`从系统属性中获取颜色，而不是从小程序参数中获取颜色。此外，此方法不适用于诸如 之类的颜色名称`black`，您必须使用数值。

如果你想从小程序参数中读取颜色，你可以像这样使用[Apache Commons Configuration](http://commons.apache.org/configuration/)：

```
DataConfiguration config = new DataConfiguration(new AppletConfiguration(applet));
Color color = config.getColor("color"); 
```

如果您不想引入依赖项，您可以像这样解析颜色（仅适用于十六进制数值）：

```
public Color getColor(String key) {
    int i = Integer.parseInt(getParameter(key));
    return new Color((i >> 16) & 0xFF, (i >> 8) & 0xFF, i & 0xFF);
} 
```

# c++ - C++ 生成线程

> ID：10870260
> 
> 赞同：2
> 
> 时间：2012-06-03T12:20:01.623
> 
> 标签：c++, multithreading, posix

您好，我需要帮助正确生成线程，我似乎无法正确获取语法。这是我的代码...

```
// Spawn a thread--------------------------------------------------#    
    pthread_t thread1;  // thread object
    int rc1;

    if( (rc1=pthread_create( &thread1, NULL, spellCheck, NULL)) )
    {
        cout << "Thread creation failed: " << rc1 << endl;
    }

    pthread_join( thread1, NULL); 
```

函数定义

```
void spellCheck(vector<string> * fileRead, list<string> * incorrectWord, vector<string> * correctWord)
{ 
```

头文件

```
void spellCheck(vector<string> *fileRead, list<string> *incorrectWord, vector<string> *correctWord); 
```

任何帮助将非常感激 ：）

我的错误：

```
server.cpp:142: error: invalid conversion from 'void ()(std::vector<std:................. initializing argument 3 of 'int pthread_create(pthread_t, const pthread_attr_t*, void* ()(void), void*)' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T12:26:06.170

我在这里可能错了，但我认为您实现并传递给 pthread_create() 的线程函数只能有一个 (void*) 输入参数

# sql-server - 关于可变主键的插入和删除触发器（SQL Server）

> ID：10870261
> 
> 赞同：2
> 
> 时间：2012-06-03T12:20:07.020
> 
> 标签：sql-server, triggers

假设我有一个包含一列（主键）的表，并且我在该表上有触发器来记录任何更改。现在，当在 Deleted 中更新一行（主键）时，我有旧的主值，而在 Inserted 中，我有新的主值。在多行更新中，如何将旧值（在已删除中）绑定到新值（在插入中）？

例如：

myTable 一列（也是主键）：

```
PK
---
1
2 
```

现在我更新 1 到 4 和 2 到 3

```
Deleted
-------
1
2

Inserted
--------
3
4 
```

如何在具有三列的审计表中记录这些更改：PK、old_value、new_value

```
Audit Table
-----------
PK | old_value | new_value
1  | 1         | 4
2  | 2         | 3 
```

在 oracle 中，我们有旧值和新值，但在 sql server 中没有。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T09:08:29.437

在触发器中使用光标记录更改：

```
Declare @AuditTable Table (PK Int, OldID int, [NewID] Int)
Declare @OldID Int,
        @NewID Int

Declare C1 Cursor For
Select ID
From Inserted

Declare C2 Cursor For
Select ID
From Deleted

Open C1
Open C2
Fetch Next From C1 Into @NewID
Fetch Next From C2 Into @OldID
While @@FETCH_STATUS=0 Begin
    Insert Into @AuditTable(PK, OldID, [NewID]) 
    Values (@OldID, @OldID, @NewID)

    Fetch Next From C1 Into @NewID
    Fetch Next From C2 Into @OldID
End
Close C1
Close C2
Deallocate C1
Deallocate C2

Select * FRom @AuditTable 
```

# php - 我可以只准备一次 PDO 声明以供申请吗？

> ID：10870265
> 
> 赞同：1
> 
> 时间：2012-06-03T12:20:56.003
> 
> 标签：php, pdo, prepared-statement

是否可以在启动 PDO 时只准备一次我的所有语句，然后只使用它们的处理程序？如果是，是否对服务器有一些性能影响？

让它们在 DB 中准备好并将值推送到占位符中。含义为应用程序范围。

例子： `$select_user_handler_by_name->execute($user_name);`

原因：我觉得每次想用的时候最好不要准备语句。在初始化时只执行一次可能会在以后节省资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:25:16.517

> 原因：我觉得每次想用的时候最好不要准备语句。在初始化时只执行一次可能会在以后节省资源。

PDO 语句仅由引擎运行一次，无论如何都会为您提供最佳速度。

# c# - 在 Windows phone 7 中，列表框滚动到结尾

> ID：10870266
> 
> 赞同：1
> 
> 时间：2012-06-03T12:21:07.847
> 
> 标签：c#, silverlight, windows-phone-7, xaml, expression-blend

我的 wp7 应用程序中有列表框。当一个项目被添加到其中时，我希望我的滚动结束。

我试过这个东西

```
var Selecteditem = listmy.Items[listmy.Items.Count - 1];
listmy.ScrollIntoView(Selecteditem);
listmy.UpdateLayout(); 
```

但什么也没发生。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T12:36:27.463

可能在添加新项目后 UI 尚未更新。将所有这些代码放入一个`Dispatcher`块中

```
Dispatcher.BeginInvoke(() =>
{
    var Selecteditem = listmy.Items[listmy.Items.Count - 1];
    listmy.ScrollIntoView(Selecteditem);
    listmy.UpdateLayout(); 
}); 
```

# php - MySQL优化 - 删除一定数量

> ID：10870275
> 
> 赞同：1
> 
> 时间：2012-06-03T12:23:05.350
> 
> 标签：php, mysql, performance

我正在为回合制游戏（使用 PHP 和 MySQL）构建聊天，我只想将 30 条最新消息保存在 MySQL 数据库中。

目前，当计数超过 30 时，我正在执行 3 个查询以删除最旧的消息：

1.  将新的聊天消息作为新行插入：

    > 插入聊天消息（userId，matchId，message，timestamp）值（“.$params[“userId”].”，”.$params[“matchId”]。“，'”。$params[“message”]。” '，现在（））

2.  检查数据库中是否有太多消息，并获取最旧的 Id。

    > SELECT COUNT(id) AS count, id AS oldId FROM chatMessages WHERE matchId = ".$params["matchId"]." ORDER BY id ASC 限制 1

3.  删除最旧的消息

    > DELETE FROM chatMessages WHERE id = ".$oldestId

有什么方法可以在 2 个甚至 1 个单个查询中执行此操作吗？我们的服务器上有很多流量，所以性能是关键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:25:40.257

您可以将第二个和第三个查询减少到一个：

```
delete from chatMessages 
where id not in (select id from chatMessages 
                 order by id desc 
                 limit 30) 
```

你可以把它放在一个插入触发器中。这样最旧的记录将在插入后自动删除。

# javascript - 停止图像加载过程的javascript按钮

> ID：10870280
> 
> 赞同：2
> 
> 时间：2012-06-03T12:23:44.610
> 
> 标签：javascript, jquery

我想为我的 HP 制作一个 javascript（或 jQuery，如果可能的话）按钮，它会停止在页面上加载图像（例如，当用户必须按 MB 付费并且只对文本感兴趣时）。

我搜索并搜索并找到了诸如“删除src”或“使用window.stop()”之类的答案，但问题是它们不起作用，取消整个加载过程，或者根本不做我所拥有的记住（就像完全删除图像）。

有谁知道我怎么能做到这一点？非常感谢 ：）

PS.：找到了一个声称可以停止下载网站特定部分的方法，但它并没有真正解释如何指定该部分。我不知道如何在这里链接东西所以这里是网址：[http ://www.ehow.com/how_6104889_kill-browser-downloads-javascript.html](http://www.ehow.com/how_6104889_kill-browser-downloads-javascript.html)

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:28:12.223

简短的回答：不要打扰。如果用户的带宽如此有限以至于加载图像成为问题，他们无论如何都会禁用图像，或者他们将使用某种机制按需加载图像。您不希望使用仅适用于您的主页的非标准解决方案给用户带来负担。简单地说，这不是你的问题。

长答案：您可以在初始页面加载时使用占位符而不是实际图像，然后使用 Javascript`src`逐个设置属性，让每个成功加载触发下一个图像。但是，您将失去并行加载，这意味着您正在以更长的加载时间来惩罚高带宽用户（现在是绝大多数用户），并且您将花费大量精力在一个功能上（参见简短版本) 大多没用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T12:27:19.543

我不会费心复制带有页内按钮的浏览器配置选项，但我建议显示一个占位符图像，然后为移动用户延迟加载图像。

此外，正如您喜欢 JQuery 一样，那里有 jQuery Lazy-Loading 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T12:26:04.940

您可以尝试将 src 更改为指向空图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T12:28:03.203

您将无法从网页内以编程方式取消图像加载过程。

您可以尝试使用 JavaScript 破坏所有 image `src`，但这是一种肮脏的方法，您的结果可能会有所不同 - 可能是浏览器继续加载资源。

最好的方法可能是*按需*加载图像（可以在页面内完成），或者提供从服务器端提供不包含图像的页面的选项。

但是，正如@tdammers 在他的回答中正确指出的那样，最好不要打扰。流量配额上的人会采取自己的预防措施来防止加载过多的内容。

# windows - 从 Windows 计划任务运行 perl 脚本

> ID：10870282
> 
> 赞同：0
> 
> 时间：2012-06-03T12:23:58.883
> 
> 标签：windows, perl

我在 Windows 2008 服务器上安装了 awstats。我安排 Updatestats.bat 文件每天运行，任务运行良好且没有错误，但脚本未执行或抛出我看不到的错误。

-- 如果我直接从命令行运行 bat 文件，那么它工作正常。--

我尝试了 Windows 调度程序的各种替代方案，例如“ `nncron`”和“ `Freebyte Task Scheduler`”，nncron 有同样的问题，但是 freebyte 应用程序可以工作，但遗憾的是它没有作为服务运行，所以没有用。这是bat文件的内容，所有的行都是这样的。

```
c:\strawberry\perl\bin\perl.exe D:\AWStats\wwwroot\cgi-bin\awstats.pl config=earlsmere.co.uk -update 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:03:05.403

您的无人值守环境显然与您的命令行不同。检查是否设置了以下内容：

1.  脚本的工作目录，如果它从中读取任何内容或使用相对路径。
2.  如果您的脚本使用任何模块，则为 PERL*_LIB 环境变量。
3.  PATH 环境变量，如果您的脚本调用任何外部脚本/二进制文件。
4.  运行计划任务的用户对您想要执行的所有操作具有足够的权限。

作为一种快速解决方法，您可以使用[`chdir`函数](http://p3rl.org/chdir)、[`lib`模块](http://p3rl.org/lib)和[`$ENV{PATH}`条目](http://p3rl.org/perlvar)直接在脚本中设置它们。

在开始执行其他任何操作之前，您还可以尝试使用以下重定向捕获标准输出和错误：

```
open(STDOUT, '>>', '/full/path/to/out.log') || die "Error stdout: $!";
open(STDERR, '>>', '/full/path/to/err.log') || die "Error stderr: $!"; 
```

请注意，您确实应该在那里使用完整路径，以防您确实设置了错误的工作目录。并确保目标目录/文件对任何人都是可写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:51:58.317

看起来输出在太空中丢失了......

我建议将命令的输出重定向到一个文件，如下所示：

```
c:\strawberry\perl\bin\perl.exe D:\AWStats\wwwroot\cgi-bin\awstats.pl config=earlsmere.co.uk -update > c:\my_log.txt 2>&1 
```

（由 Anders Lindahl 提供：[将 stdout 和 stderr 重定向到 DOS 中的单个文件](https://stackoverflow.com/a/1420981/1390251)）

# c# - MEF 遇到问题

> ID：10870285
> 
> 赞同：0
> 
> 时间：2012-06-03T12:24:21.260
> 
> 标签：c#, .net-4.0, mef

我正在尝试在 .NET 4 中创建一个可扩展的“实用程序”控制台应用程序，并且我认为使用 MEF 来执行此操作会在灵活性和可扩展性方面给我最好的。

于是我开始设置MEF**接口：**

```
public interface IUtility
{
    string Title { get; }
    string Version { get; }

    void Execute(UtilContext context);
} 
```

然后我创建了两个几乎相同的测试插件——只是为了看看这些东西是如何工作的：

**MEF 插件：**

```
[Export(typeof(IUtility))]
public class Utility1 : IUtility
{
    public string Title
    {
        get { return "Utility 1"; }
    }

    public string Version
    {
        get { return "1.0.0.0"; }
    }

    public void Execute(UtilContext context)
    {
    }
} 
```

充当 MEF 插件“主机”的控制台应用程序如下所示：

```
[ImportMany]
public IEnumerable<IUtility> _utilities { get; set; }

public void SetupMEF()
{ 
   string directory = ConfigurationManager.AppSettings["Path"];

   AggregateCatalog catalog = new AggregateCatalog();
   catalog.Catalogs.Add(new DirectoryCatalog(directory));

   CompositionContainer container = new CompositionContainer(catalog);
   container.ComposeParts(this);
} 
```

我检查了 - 正在正确读取目录`app.config`，并且在构建解决方案后插件模块（* .dll 文件）存在于那里。一切似乎都很好......直到我得到这个例外：

> System.Reflection.ReflectionTypeLoadException 未处理
> 消息 = 无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。
> 
> *LoaderException：*
> 来自程序集 'Utility1，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null' 的类型 'Utility.Utility1' 中的方法 'get_Version' 没有实现

嗯.... MEF 到底想在这里告诉我什么？我该如何解决这个问题？任何想法，想法，指针？

我是否通过拥有一个名为`Version`我自己的属性而打破了某些约定？这是MEF保留的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:39:55.060

对不起，伙计们-我的错。在“插件”目录中有一个非常旧的 *.dll 徘徊，确实没有该属性`Get`方法的任何实现。

清除那个 pre-alpha ;-) *.dll 解决了我的问题。我现在确实*可以加载我的插件，并且它们**可以有*一个`Version`没有任何问题的属性。

# hibernate - HQL 在无效路径上选择异常

> ID：10870289
> 
> 赞同：0
> 
> 时间：2012-06-03T12:24:50.247
> 
> 标签：hibernate, hql

我正在尝试使用 HQL 从数据库中发出选择

这是代码：

```
public Collection<Link> getAllLinksForDevice(Device device) {
    Session session = sessionFactory.getCurrentSession();
    String hql = "SELECT Link as l WHERE l.device1 = :deviceId OR l.device2 = :deviceId";
    Query query = session.createQuery(hql); <-- Fails here!!
    query.setParameter("deviceId",device.getId());
    Collection<Link> linkList  = query.list();
    return linkList;
} 
```

和链接实体：

```
@Id
@Column(name = "id")
@GeneratedValue
private int id;

@ManyToOne
@JoinColumn(name="device1_id")
private Device device1;

@ManyToOne
@JoinColumn(name="device2_id")
private Device device2; 
```

设备实体：

```
@Entity
@Table(name = "device")
public class Device {

    @Id
    @Column(name = "id")
    @GeneratedValue
    private int id;

    @Column(name = "dns_Name")
    private String dnsName;

    @Column(name = "ip_address_v4")
    private String ipV4;

    @Column(name = "device_type")
    private int deviceType;

    @ManyToOne
    @JoinColumn(name="area_id")
    private Area area; 
```

但我得到一个例外：

> 15：10：55,570 DEBUG ErrorCounter：51 - ：0：0：子树的意外结束：0：0：org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElementList（HqlSqlBaseWalker.java：3117）的子树意外结束。 hibernate.hql.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:720) 在 org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:571) 在 org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker. java:288) 在 org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:254) 在 org.hibernate.hql.ast 的 org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:231) .QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:185)

和：

> 15:10:55,622 错误解析器：56 - 无效路径：'l.device1' 15:10:55,628 调试错误计数器：51 - 无效路径：'l.device1' 无效路径：org.hibernate.hql 中的'l.device1' .ast.util.LiteralProcessor.lookupConstant(LiteralProcessor.java:135) 在 org.hibernate.hql.ast.tree.DotNode.resolve(DotNode.java:216) 在 org.hibernate.hql.ast.tree.FromReferenceNode.resolve (FromReferenceNode.java:117) 在 org.hibernate.hql.ast.tree.FromReferenceNode.resolve(FromReferenceNode.java:113) 在 org.hibernate.hql.ast.HqlSqlWalker.resolve(HqlSqlWalker.java:854) 在 org. hibernate.hql.antlr.HqlSqlBaseWalker.expr(HqlSqlBaseWalker.java:1293) 在 org.hibernate.hql.antlr.HqlSqlBaseWalker.exprOrSubquery(HqlSqlBaseWalker.java:4243) 在 org.hibernate.hql.antlr.HqlSqlBaseWalker.comparisonExpr(HqlSqlBaseWalker.爪哇：3722)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:46:46.647

您的 HQL 查询中有两个语法错误：

1.  没有 from 子句。`select Link as l where...`是无效的。正确的语法是`select l from Link as l where ...`或简单地`select l from Link l where...`.
2.  Link 实体的`device1`（和`device2`字段）字段的类型为`Device`。你不能将它与身份证进行比较。要么将其与`Device`实例进行比较，要么将 的 ID`device1`与 ID:`where l.device1 = :someDeviceInstanceContainingTheIdYouSearchFor`或进行比较`where l.device1.id = :someDeviceId`。

# javascript - 同时有两个 Bootstrap 导航菜单

> ID：10870291
> 
> 赞同：6
> 
> 时间：2012-06-03T12:25:08.037
> 
> 标签：javascript, css, twitter-bootstrap, less, collapse

我想知道是否可以同时拥有两个导航。

[这是一个带有引导测试的 JSFiddle](http://jsfiddle.net/F2tYu/)，只有导航栏的折叠 JavaScript。两个菜单同时展开，有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-03T12:44:08.870

您可以，您所要做的就是将`data-target`属性与下拉菜单的唯一类或 ID 区分开来，如下所示：

对于您的第一个下拉菜单

```
<a class="btn btn-navbar" data-toggle="collapse" data-target="#first"> 
```

对于您的第二个下拉列表：

```
<a class="btn btn-navbar" data-toggle="collapse" data-target="#second"> 
```

然后您可以将该唯一 ID 添加到您的导航折叠容器中：

第一的

```
<div id="first" class="nav-collapse"> ... </div> 
```

第二

```
<div id="second" class="nav-collapse"> ... </div> 
```

演示：http: [//jsfiddle.net/F2tYu/3/](http://jsfiddle.net/F2tYu/3/)

# c# - 如果 WPF 图像源链接不存在，则不会出错

> ID：10870296
> 
> 赞同：0
> 
> 时间：2012-06-03T12:25:42.380
> 
> 标签：c#, wpf, image, hyperlink

我使用此代码将链接设置为 WPF 图像源：

```
bi3.BeginInit();
bi3.UriSource = new Uri("[here is a link]" + textBox2.Text + ".png", UriKind.RelativeOrAbsolute);
bi3.CacheOption = BitmapCacheOption.OnLoad;
bi3.EndInit(); 
```

我怎么知道图片链接是否存在？先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T12:59:29.333

```
private static bool UriExit(Uri uri)
{
    try
    {
        var request = WebRequest.Create(uri) as HttpWebRequest;
        request.Method = "HEAD";
        var response = request.GetResponse() as HttpWebResponse;
        return (response.StatusCode == HttpStatusCode.OK);
    }
    catch
    {
        return false;
    }
} 
```

如下调用它

```
bool val = UriExit(bi3.UriSource); 
```

# c# - 自动在屏幕上单击鼠标

> ID：10870303
> 
> 赞同：2
> 
> 时间：2012-06-03T12:26:32.070
> 
> 标签：c#, .net, windows, automation

我正在寻找一种创建程序的方法，该程序将在屏幕上找到某种颜色时执行鼠标单击。

例如，如果屏幕上有一个红色框，我希望程序点击它中间的红色框。

我怎么能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T12:56:33.420

由于您只想要一种通用方式，因此我并没有真正做到完美，但这是一个想法：

有一种截屏方法：

```
public Bitmap ScreenShot()
{
    var screenShot = new Bitmap(Screen.PrimaryScreen.Bounds.Width,
                                Screen.PrimaryScreen.Bounds.Height,
                                PixelFormat.Format32bppArgb);

    using (var g = Graphics.FromImage(screenShot))
    {
        g.CopyFromScreen(0, 0, 0, 0, Screen.PrimaryScreen.Bounds.Size);
    }

    return screenShot;
} 
```

还有一种在位图中查找某种颜色的方法：请注意，可以使用不安全代码和 LockBits 大幅改进此实现（阅读[此处](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.bitmap.lockbits)和[此处](https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx)）。

```
public Point? GetFirstPixel(Bitmap bitmap, Color color)
{
    for (var y = 0; y < bitmap.Height; y++)
    {
        for (var x = 0; x < bitmap.Width; x++)
        {
            if (bitmap.GetPixel(x, y).Equals(color))
            {
                return new Point(x, y);
            }
        }
    }

    return null;
} 
```

您需要的另一种方法是单击某个点：

```
[DllImport("user32.dll",
           CharSet=CharSet.Auto,
           CallingConvention=CallingConvention.StdCall)]
private static extern void mouse_event(long dwFlags,
                                      long dx,
                                      long dy,
                                      long cButtons,
                                      long dwExtraInfo);

private const int MOUSEEVENTF_LEFTDOWN = 0x02;
private const int MOUSEEVENTF_LEFTUP = 0x04;

public void Click(Point pt)
{
    Cursor.Position = pt;
    mouse_event(MOUSEEVENTF_LEFTDOWN | MOUSEEVENTF_LEFTUP, pt.X, pt.Y, 0, 0);
} 
```

最后，总结一下：

```
public bool ClickOnFirstPixel(Color color)
{
    var pt = GetFirstPixel(ScreenShot(), color);

    if (pt.HasValue)
    {
        Click(pt.Value);
    }

    // return whether found pixel and clicked it
    return pt.HasValue;
} 
```

然后，用法将是：

```
if (ClickOnFirstPixel(Color.Red))
{
    Console.WriteLine("Found a red pixel and clicked it!");
}
else
{
    Console.WriteLine("Didn't find a red pixel, didn't click.");
} 
```

# ruby-on-rails - 我应该如何在我的 ApplicationController 中使用 Draper？

> ID：10870306
> 
> 赞同：4
> 
> 时间：2012-06-03T12:27:05.410
> 
> 标签：ruby-on-rails, decorator, hierarchy

我的问题是指以下开发堆栈：

*   导轨 3.2.1
*   德雷珀 0.14
*   祖先 1.2.5

我想要做的是，将导航传递给我的布局。所以我在我的`ApplicationController`.

```
class ApplicationController < ActionController::Base
  [..]
  before_filter :current_navigation
  [..]
  def current_navigation
    @n = PublicationDecorator.find(1)
  end
end 
```

正如您在上面的代码清单中看到的，我使用的是`draper`. My`PublicationDecorator`在`ApplicationController`. **那么**我如何得到我所有的`Publications`装饰呢？

```
uninitialized constant ApplicationController::PublicationDecorator 
```

我正在使用`ancestry`gem 来实现层次结构。另一个**问题**是，如果我正在使用，所有对象都会被装饰`ancestry`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T05:19:41.477

让您`PublicationDecorator`在您的`ApplicationController`.

```
require 'publication_decorator.rb' # <--
class ApplicationController < ActionController::Base
  [..]
  before_filter :current_navigation
  [..]
  def current_navigation
    @n = PublicationDecorator.find(1)
  end
end 
```

要让孩子甚至父母装饰，请将关联添加到您的装饰器：

```
class PublicationDecorator < Draper::Base
  decorates :publication
  decorates_association :children
  [..]

end 
```

# c# - 如何捕获此代码中找不到文件导致的错误？

> ID：10870308
> 
> 赞同：0
> 
> 时间：2012-06-03T12:27:15.380
> 
> 标签：c#, visual-studio-2010

我正在使用此代码在应用程序目录中查找 excel 文件的名称。但是，如果找不到该文件，我想给出一条错误消息。我怎么能用c#做到这一点？下面是我用来搜索文件的代码。

```
string linksfile;
string [] excelfile = Directory.GetFiles(Application.StartupPath + @"\", "*.xlsx");
linksfile = excelfile[0];

MessageBox.Show(linksfile); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:28:53.843

你应该检查一下`if (excelFile.Length > 0)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T12:28:49.607

```
 string linksfile;
    string [] excelfile = Directory.GetFiles(Application.StartupPath + @"\", "*.xlsx");

    if(excelfile.Length > 0)
    {
        linksfile = excelfile[0];

        MessageBox.Show(linksfile);
    }
    else
    {
         MessageBox.Show("File not found");
    } 
```

# php - JSON 数据解析器不允许单引号

> ID：10870311
> 
> 赞同：2
> 
> 时间：2012-06-03T12:27:38.400
> 
> 标签：php, javascript, ajax, json

我正在使用 PHP 在我的数据库中从我的网站上写“评论” `mysql_real_escape_string()`。这将转义内容，以及单引号 (') 和双引号 (")。当我将这些评论加载回我的网站时，我使用 AJAX 加载它们，由 DIV 的滚动条触发在到达 DIV 底部的每个滚动条上再加载 5 个。

一切正常，直到条目包含转义的 \' （单引号）

```
var ajax_entry_items = JSON.parse(http.responseText); 
```

该`JSON.parse`函数给出错误

> Uncaught SyntaxError: Unexpected token ' in Google Chrome。

我如何仍然在我的数据库中的评论中输入单引号和双引号并将它们带回以显示在网站上？双引号和单引号转义后返回，但由于某种原因，转义的单引号会生成

> 意外的令牌”错误。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T12:29:38.477

在 JSON 中，不允许将字符串括在单引号中，也不允许转义单引号。您必须转义双引号，不得转义单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:29:37.673

您应该使用[json_encode()](http://php.net/manual/en/function.json-encode.php)对从数据库输出的数据进行编码：

```
echo json_encode($data); 
```

# php - PHP/HTML：如何访问循环中动态生成的复选框

> ID：10870318
> 
> 赞同：-2
> 
> 时间：2012-06-03T12:28:58.613
> 
> 标签：php, html

我有在 while 循环中生成的复选框。这些复选框总是第一次被选中，并且存储在数据库中的值是“开”。但是当用户取消选中它时，我想将“关闭”存储在数据库中。但我的问题是我无法访问复选框名称来检查按钮单击时是否未选中哪些复选框。我写了这段代码

```
while($row = mysql_fetch_assoc($result)) {
   if($pck_id_renew == 'On')
   {
     echo '<td class=c><input type="checkbox" id="renew_chk" name="renew_chk"  
       checked="checked" style="width:50px" value="On"/></td>'; 
   }
   if($pck_id_renew == 'Off') {
     echo '<td class=c><input type="checkbox" id="renew_chk" name="renew_chk"   
       style="width:50px" value="Off"/></td>';  
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:55:42.633

您只会收到选中复选框的输入值。使用一个数组并将所有可用的复选框名称存储在其中。循环遍历此数组以检测选中/未选中的复选框。

代码可能如下所示：

```
// Define available checkboxes
$inputs = array('renew_chk', ...);

// Check input values
$values = array();
foreach ($inputs as $input) {
  if (isset($_POST[$input])) {
    $values[$input] = 'On';
  }
  else {
    $values[$input] = 'Off';
  }
}

// Loop through $values and store value in database
foreach ($values as $input => $value) {
  // UPDATE database SET $input = $value WHERE id = [n];
} 
```

# java - LinkedHashMap 如何在后台工作？

> ID：10870319
> 
> 赞同：8
> 
> 时间：2012-06-03T12:29:01.313
> 
> 标签：java, oop, dictionary, collections, hashmap

我读到了[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)和描述（虽然很有趣），但我无法理解它实际上是如何在幕后工作的。作为旁注，我知道 a`HashMap`在 Java 中是如何工作的。
所以我查看了源代码，但仍然无法弄清楚它是如何工作的。在这种情况下，也许我没有掌握 OOP 中的一些基本知识，所以请耐心等待。
总结一下让我感到困惑的部分如下：
将`LinkedHashMap`所有调用委托给它的 parent `HashMap`。
在内部，它覆盖了实现似乎实现逻辑的`HashMap.Entry`各种方法`recordAccess`， 但实际在基类的表中，即`recordRemoval``LinkedHashMap`
`Entries``HashMap`它实例化了一个表`HashMap.Entry`而不是`LinkedHashMap.Entry`.
所以我无法弄清楚各种`recordAccess`等等`recordRemove`实际上是如何被调用的。
那么任何人都可以帮助我了解这里发生了什么吗？
我是否正确地认为这`LinkedHashedMap.Entry`是由创建的表的类型`HashMap`？但是怎么做？

**更新：**
我的问题是如何`recordAccess`被调用。`HashMap`由于Shengyuan Lu（+1）的原因， 我使用派生版本进行的实验失败 - 我的错在那里

**更新：**
我尝试的以下内容与正在做的事情相同（我认为）`LinkedHashMap`：

```
package delete;  

public class Base<T> {  

    Entry<T>[] table;  
    int idx = 0;  
    @SuppressWarnings("unchecked")  
    public Base(){  
        System.out.println("In base");  
        table = new Entry[10];  
    }

    public void add(T x){  
        table[idx] = new Entry(x);  
        table[idx].doSomething();  
    }  

    static class Entry<T>{  
        T value;  

        Entry(T x){  
            this.value = x;  
            System.out.println("Entry::Base");  
        }

        void doSomething(){  
            System.out.println("In Entry base, doing something");  
        }  
    }  

}  

public class Derived<T> extends Base<T> {  

    static class Entry<T> extends Base.Entry<T>{  

        Entry(T x) {  
            super(x);  
            System.out.println("In Entry derived");  
        }  

        int val;  

        @Override  
        void doSomething() {  
            System.out.println("In Entry derived doing something really smart!");  
        }       
    }  

    /**
     * @param args
     */
    public static void main(String[] args) {  

        Base<String> b = new Derived<String>();  
        b.add("Test string");  

    }  

} 
```

但它打印：

```
In base  
Entry::Base     
In Entry base, doing something 
```

所以派生`Entry`的永远不会被调用。
我的例子有什么不同吗？我不明白这是如何工作的`LinkedHashMap`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T12:41:39.690

如果您`MyLinkedHashMap`在 package 下定义`java.util`，它将编译；）

因为`HashMap.HashEntry`是包的可见性。

加：

我认为让您感到困惑的主要事情是*LinkedHashMap.Entry*与*HashMap.Entry*。重点是LinkedHashMap.Entry **is-a** HashMap.Entry。实际上**HashMap.table 将 LinkedHashMap.Entry 存储**在 LinkedHashMap 中。

关于`recordAccess`和`recordRemoval`，它们都覆盖了 HashMap.Entry 版本。您可以在 LinkedHashMap 和 HashMap 中找到参考。

在此处合并评论：**您的示例代码与`LinkedHashMap`实现不同。`LinkedHashMap.addEntry()`改为查看。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T13:08:41.997

Ctrl+F 在这里是您的朋友，尤其是当它允许您一次搜索多个文件时。由地图的和方法`recordAccess`在访问/创建的条目上调用。（调用在,和中。）仅当您使用 LinkedHashMap 的构造函数时才相关，该构造函数接受一个布尔参数并传递给该参数。这样做的效果是，每当你触摸地图时，被触摸的条目都会被移动到内部链表的前面。`put``get``HashMap.put``HashMap.putForNullKey``LinkedHashMap.get``true`

引用文档：

> 提供了一个特殊的构造函数来创建链接哈希映射，其迭代顺序是其条目最后一次访问的顺序，从最近最少访问到最近访问（访问顺序）。这种映射非常适合构建 LRU 缓存。调用 put 或 get 方法会导致访问相应的条目（假设它在调用完成后存在）。putAll 方法为指定映射中的每个映射生成一个条目访问，按照指定映射的条目集迭代器提供键值映射的顺序。没有其他方法生成条目访问。特别是，collection-views 上的操作不会影响 backing map 的迭代顺序。
> 
> The removeEldestEntry(Map.Entry) method may be overridden to impose a policy for removing stale mappings automatically when new mappings are added to the map.

Similarly `recordRemoval` is called from `HashMap.removeEntryForKey` and `HashMap.removeMapping`.

# php - 我不明白这段代码在 PHP 中的作用

> ID：10870321
> 
> 赞同：-5
> 
> 时间：2012-06-03T12:29:31.753
> 
> 标签：php

我有这个代码，

```
// TEMP VAR
$temp = &$files;
// BUILD ARRAY STRUCTURE
while(count($file['path'])) {
    // GET DIRECTORY
    $directory = array_shift($file['path']);
    // DIRECTORY NOT SET
    if(!isset($temp[$directory])) {
        // SET DIRECTORY
        $temp[$directory] = array();
    }
    // GO INTO ARRAYS NEXT DIRECTORY
    $temp = &$temp[$directory];
} 
```

我从这个问题的答案中得到了它，

[具有数组结构的字符串到数组](https://stackoverflow.com/questions/8537148/string-with-array-structure-to-array)

我知道它的作用，但不知道它是怎么做的，有人可以逐行向我解释发生了什么吗？

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:49:02.477

在此使用中的 & 符号是一个参考。看[这篇文章](http://www.webmaster-source.com/2010/02/25/why-do-some-php-variables-have-an-ampersand-before-them/)

```
$variable = 'Lorem ipsum';
$new = &$variable;
$variable = 'Some new data';
echo $new; //Prints "Some new data" 
```

# javascript - 使用 jquery 访问标签的属性

> ID：10870325
> 
> 赞同：1
> 
> 时间：2012-06-03T12:29:46.593
> 
> 标签：javascript, jquery, html, dom, attr

我有一些来自服务器的数据，我在 Html 页面中填充了一个 Div。我写div的方式如下：

```
 <div class="BigDiv"><label class = "AttList" Std_Id="' + Std_Id + '">' + Std_Name +'</label></div> 
```

现在，我想要这个 div 中的数据。div 内还有其他一些标签，所以我使用 this.children 来访问这个标签。

```
 var labels = $(this).children('div');
        var StdName = this.children[0].childNodes[0].nodeValue; 
```

我想访问**Std_Id**属性中的 Std_Id，但我不知道该怎么做......你有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T12:34:20.700

假设这`$(this)`是对`.BigDiv`元素的引用：

```
var StdName = $(this).find('label').attr('Std_Id'); 
```

或者，类似地，假设`this`是`.BigDiv`元素：

```
var children = this.childNodes;
for (var i=0,len=children.length; i<len; i++){
    if (children[i].nodeType == 1 && children[i].tagName.toLowerCase() == 'label'){
        var StdName = this.getAttribute('Std_Id');
    }
} 
```

参考：

*   jQuery：
    *   [`attr()`](http://api.jquery.com/attr/).
    *   [`find()`](http://api.jquery.com/find/).
*   JavaScript
    *   [`element.getAttribute()`](https://developer.mozilla.org/en/DOM/element.getAttribute).
    *   [`node.nodeType`](https://developer.mozilla.org/en/nodeType).
    *   [`tagName`](https://developer.mozilla.org/en/DOM/element.tagName).
    *   [`toLowerCase()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/toLowerCase).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T12:40:43.720

使用`getAttribute`：

```
var labels = $(this).children('div');
var StdId = this.children[0].getAttribute("Std_Id"); 
```

请注意，根据 HTML5 规范，自定义属性应该以 开头`data-`，尽管大多数浏览器都可以容忍它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T12:34:40.687

您可以使用这种`attr`方法，

```
var value = $('.AttList').attr('Std_Id'); 
```

**编辑**

好的，所以你为了*你的*实现，你需要这样做......

```
var value = $(this).find('.AttList').attr('Std_Id'); 
```

假设那`this`是它`div`的父级或父级`div`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T12:36:43.313

要保存使用 jQuery-Selector 选择的元素，请执行以下操作：

```
$labels = $('.BigDiv').find('label'); 
```

现在您可以使用 jQuery 的 foreach 循环遍历每个标签：

```
$.each($labels, function() {
    var std_id = $(this).attr('Std_Id');
    // do something with std_id
}); 
```

# python - Python：如何迭代文本文件中行中的特定列

> ID：10870328
> 
> 赞同：1
> 
> 时间：2012-06-03T12:30:08.750
> 
> 标签：python, loops

我想沿文本文件中的列迭代脚本，但忽略前 5 列。

目前，我的脚本逐行运行一个文本文件，评估第 6 列中的值。我希望它运行评估第 6 列、第 7 列、第 8 列等的所有行，我不想评估每一列脚本读取文件时的每一行，但要遍历整个文件评估列 n，然后对列 n + 1 重复

目前我有简单的：

```
for line in Input:
    line = line.rstrip() 
    fields = line.split("\t")
    for col in row: 
```

但我想指定它忽略前 5 列，因为它们不是目标（但仍需要作为文件中的信息）。

我想像 for col in row for range 6:20 这样的东西可能会起作用，但我是一个 python 初学者，不知道在 python 中表达这个的正确方法。如果问题太混乱，请告诉我如何澄清这个问题。

预先感谢您的帮助。

最好的，

鲁巴尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T12:36:18.313

如果您有一个列表`row`，那么`row[a:b]`是从元素编号`a`开始到但不包括元素编号的元素范围`b`。

例如：

```
row = ['alpha', 'beta', 'gamma', 'delta', 'epsilon']

print row[2:4] 
```

这个的输出将是

```
['gamma', 'delta'] 
```

所以在一个循环中你可以写：

```
for col in row[6:20]:
    foo() 
```

或者，循环到列表的末尾

```
for col in row[6:]:
    foo() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T12:33:17.923

```
for line in Input:
    line = line.rstrip() 
    fields = line.split("\t")
    for col in fields[5:]:
        # process 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T12:32:42.160

无需复制

```
for line in Input:
    line = line.rstrip() 
    fields = line.split("\t")
    for index in range(5, len(fields)):
        #do_smth with fields[index] 
```

# jquery - 在 jQuery 中过滤具有多个记录 ID 的 JSON 数据

> ID：10870334
> 
> 赞同：1
> 
> 时间：2012-06-03T12:31:35.867
> 
> 标签：jquery, regex, json, filter, match

[基于名为“filterScore”的Subhaze函数](https://stackoverflow.com/posts/4391119/revisions)......如果需要将单个值传递给`KEY`......但我的问题是如果需要解析**多个值怎么办？**

例如，有一个名为`brand_id`整数的键。我想解析那些`brand_id = 1 OR 3 OR 5 OR 7`在 JQuery 中具有（多个）的`RegExp`数据`Filter`，`Match`...请帮我解决这个问题！

我怎样才能做到这一点？？

如果有人能帮我解决这个问题，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:55:52.027

由于brands id 是一个列表而不是一个模式，您可以修改过滤器函数以接受`brand_id`一个数组而不是一个`regex`. 新的过滤功能将是

```
function filterStore(dataStore, filter) {
    return $(dataStore).filter(function(index, item) {
        for( var i in filter ) {
            if(filter[i] instanceof Array){   
              if($.inArray(parseInt(item[i],10),filter[i]) == -1)
                 return null;
              else
                 continue;                  
            }
           if( ! item[i].toString().match( filter[i] ) ) return null;
        }
        return item;
    });
} 
```

然后你可以把你所有的品牌ID放在这样的数组中

```
var filter = {
    "brand_id": [1,2,3],
    "productname": new RegExp('(.*?)', 'gi'),
    "price": new RegExp('.*?', 'gi')
}; 
```

[工作示例](http://jsfiddle.net/joycse06/bsaJm/4/)

# c# - 如何在ascii-string c#中转换位序列

> ID：10870337
> 
> 赞同：2
> 
> 时间：2012-06-03T12:32:25.490
> 
> 标签：c#, string, bit-manipulation

如何转换一串位，例如

> 0100100001100101011011000110110001101111001000000101011101101111011100100110110001100100

转换成一串 ASCII 字符，例如：“Hello World”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T12:36:18.470

您需要将它们分成 8 个字符的字符串（字节），调用`Convert.ToByte(str, 2)`，将它们放入 a 中`byte[]`，然后调用`Encoding.ASCII.GetString()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T12:47:30.363

这个代码示例应该很清楚：

```
String bits = "01001001000......0001100100"; // shortened here for demo purposes

byte[] bArr = new byte[bits.Length / 8];
for (int i = 0; i < bits.Length / 8; i++)
{
    String part = bits.Substring(i * 8, 8);
    bArr[i] += Convert.ToByte(part, 2);
}
System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
Console.WriteLine(encoding.GetString(bArr)); 
```

基本上将字符串分成偶数部分，将结果字节存储在字节数组中，然后以特定的编码对其进行解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T13:07:18.973

```
public string GetBytesFromBinaryString(String binary)
{
    var list = new List<Byte>();

    for (int i = 0; i < binary.Length; i += 8)
    {
        String t = binary.Substring(i, 8);

        list.Add(Convert.ToByte(t, 2));
    }

    return Encoding.ASCII.GetString(list.ToArray());
} 
```

测试：

```
var data = GetBytesFromBinaryString("0100100001100101011011000110110001101111001000000101011101101111011100100110110001100100"); 
```

输出：

> “你好世界”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T13:07:21.570

使用此方法

```
private byte[] GetAsByteArray(string BinaryString)
{
        return Enumerable.Range(0, BinaryString.Length / 8)
            .Select(i => Convert.ToByte(BinaryString.Substring(i * 8, 8), 2)).ToArray();
} 
```

然后像这样称呼它

```
string binaryString = "0100100001100101011011000110110001101111001000000101011101101111011100100110110001100100";
string convertedText = System.Text.Encoding.ASCII.GetString(GetAsByteArray(binaryString)); 
```

# c# - 添加自定义 SoapClient 标头

> ID：10870340
> 
> 赞同：4
> 
> 时间：2012-06-03T12:32:53.680
> 
> 标签：c#, soap, soap-client, soapheader

我是一个完整的 C# 新手，现在已经尝试破解这个几个小时但没有成功......

我需要构建一个 SoapClient 以在 C# 上使用...我一直在尝试将现有的 php 客户端移植到 c#。

基本上：我需要使用包含用户和密码的 Soap 标头发出请求，这是我应该发送的 xml 示例。

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://webservices.paymentmanager.mycheck.com">
    <soapenv:Header xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
        <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
            <wsse:UsernameToken>
                <wsse:Username>test</wsse:Username>
                <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">pass</wsse:Password>
            </wsse:UsernameToken>
        </wsse:Security>
    </soapenv:Header>
    <SOAP-ENV:Body>
        <ns1:testws>
            <ns1:x>1</ns1:x>
        </ns1:testws>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

当我完成时，我使用了 Visual Studio 'Add Service Reference...'

该服务运行良好，因为使用 php 它运行良好。

我设想的 C#：

```
namespace ConsoleApplication1
{
    class Program
    {
        const String VENDOR_ID = "8723";
        const String VENDOR_PASS = "test";
        const String VENDOR_USER = "pass";
        static void Main(string[] args)
        {
            try
            {
                PaymentManager.PaymentManagerPortTypeClient test = new PaymentManager.PaymentManagerPortTypeClient();
                int num = test.testws(5);
                Console.WriteLine(num);
            }
            catch( Exception e)
            {
                Console.WriteLine(e.ToString());
            }
        }
    }

} 
```

显然，我不知道如何实现 Soap 标头，因此它会引发“缺少 SOAP 标头”异常（从 WebService 接收）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T13:26:41.063

我有同样的问题。我没有找到解决办法。最终，我不得不创建整个 SOAP 消息并通过 HTTPWebRequest 发送它。

看看[这里](https://stackoverflow.com/questions/11263640/net-client-authentication-towards-apache-cxf-web-service)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:38:30.117

这是一个关于如何将身份验证标头发送到肥皂网络服务的示例：[Web 服务的身份验证（使用 SOAP 标头）](http://www.codeproject.com/Articles/4398/Authentication-for-Web-Services-using-SOAP-headers)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-10T03:05:46.133

```
 XmlDocument ReqDoc = new XmlDocument();
        XmlDocument doc = new XmlDocument();
            // request message
        ReqDoc.Load(@"D:\104Resqurst.xml");
           //adding soap headder 
        XmlElement root = (XmlElement)doc.AppendChild(doc.CreateElement("soapenv", "Envelope", "http://www.w3.org/2001/XMLSchema-instance"));
        root.SetAttribute("xmlns", "http://mark.com/services/contracts");
        XmlElement header = (XmlElement)root.AppendChild(doc.CreateElement("soapenv", "Header", "http://www.w3.org/2001/XMLSchema-instance"));
        XmlElement body = (XmlElement)root.AppendChild(doc.CreateElement("soapenv", "Body", "http://www.w3.org/2001/XMLSchema-instance"));
       //assigning the request document to soap header doc
        doc.GetElementsByTagName("soapenv:Body")[0].InnerXml = ReqDoc.OuterXml; 
```

# c# - C# Winforms 应用程序安全连接到 Access DB

> ID：10870349
> 
> 赞同：1
> 
> 时间：2012-06-03T12:34:32.473
> 
> 标签：c#, winforms, desktop-application, .net, eazfuscator

我有一个 C# 2010 **Winforms**应用程序，它使用 OleDb 连接到受密码保护的 Access 2010 数据库。**这不是在线申请！**

我目前将密码以纯文本形式存储在连接字符串中[我知道这非常不安全]，它使用[Eazfuscator.NET](http://www.gapotchenko.com/eazfuscator.net)进行了混淆。我对一种以无法通过反编译或任何其他实用方法获取密码的方式安全存储密码的方法感兴趣。

我知道有一些方法可以通过加密 app/web.config 中的连接字符串来为 ASP.NET 应用程序执行此操作，但它对我不起作用，因为我的应用程序是桌面应用程序。

到目前为止，我还没有找到任何方法来实现这一点。

这是我想做的事情：

向用户请求密码，因为只有一个用户可以访问数据库。获取输入密码的哈希（SHA1 / SHA512），从哈希中选择一定数量的字符，对其进行加盐，将其添加到连接字符串并尝试连接。

显然，如果用户忘记了密码，除了使用暴力破解之外，绝对没有其他方法可以访问数据库。

**有没有办法将连接字符串中使用的密码存储在程序中，从而无法通过任何实际手段获得？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:37:59.123

您应该为数据库生成一个长的随机安全密码，然后使用`ProtectedData`该类对其进行加密。
这将使用用户的 Windows 登录密码对其进行加密，因此除非用户登录，否则阅读它是不切实际的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:05:44.580

您可以使用 DSN 并将用户名和密码存储在那里，而不是在应用程序中，但是任何知道 DSN 的应用程序都可以使用数据库，并且凭据以纯文本形式在注册表中可用。

你想防御什么，应用程序进入野外？数据库？未经授权的用户坐在机器旁？密码必须在某个地方...

# mongodb - 查询返回 mongodb 嵌入式集合中的项目数

> ID：10870354
> 
> 赞同：0
> 
> 时间：2012-06-03T12:35:14.290
> 
> 标签：mongodb

我想在 mongodb 的查询中返回嵌入集合的计数。

假设我有一个名为配置文件的集合

```
var ProfileSchema = new Schema({
  uname: {
    type: String,
    required: true,
    index: true,
    unique: true
  },
  fname: String,
  lname: String,
  posts: [ObjectId]
}); 
```

如何查询它以便选择 uname, frame, lame, posts.length ？我不想通过网络返回帖子集合，因为用户可以拥有数百个帖子。我什至应该将帖子 ID 嵌入到配置文件架构中吗？也许我应该摆脱它，因为已经为帖子定义了另一个集合，所以我基本上使用 Profile.posts 作为外键的嵌入式集合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T21:14:28.487

[在此处](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-$size)查看 $size 运算符的 Mongo 文档讨论。

简而言之，您可以使用 $size 运算符根据确切的数组大小进行查询，但是您无法取回数组大小，也无法根据数组大小范围进行查询。

建议对您有用 - 保留另一个字段，即帖子数 - 可以在查询中用作过滤器/范围，当您需要知道数组有多大时可以返回它。无论帖子是存储在其他地方还是嵌入到数组中，如果您根据帖子数量进行查询或过滤，此字段将非常有用。

有一个非常[相似的问题](https://stackoverflow.com/questions/6722850/querying-internal-array-size-in-mongodb)和类似的建议。

# c++ - Visual C++ 2010：unordered_map 和移动构造函数

> ID：10870359
> 
> 赞同：0
> 
> 时间：2012-06-03T12:36:15.147
> 
> 标签：c++, visual-studio-2010, constructor, move, unordered-map

我有一个名为的结构`Foo`，其中包含一个`unique_ptr`

```
struct Foo {
    std::unique_ptr<Bar> pointer;
}; 
```

现在我正在尝试将实例存储`Foo`在`unordered_map`

```
std::unordered_map<int,Foo> myMap; 
```

从技术上讲，这应该是可能的，因为地图不需要复制构造函数，只需要移动构造函数。

但是，我无法在我的地图中插入元素：

```
myMap.insert(std::make_pair(3, Foo())); 
```

此行将在 Visual C++ 2010 中生成以下错误（由我粗略翻译，因为我的编译器不是英文的）：

```
error C2248: 'std::unique_ptr<_Ty>::unique_ptr' : unable to access private member declared in 'std::unique_ptr<_Ty>'  
with
[
             _Ty=Foo
]
c:\Softwares\Visual Studio 10.0\VC\include\memory(2347) : see declaration of 'std::unique_ptr<_Ty>::unique_ptr'
with
[
             _Ty=Foo
]
This diagnostic happened in the compiler-generated function 'Foo::Foo(const Foo&)' 
```

因此，由于未知原因，编译器尝试生成复制构造函数`Foo`而不是移动构造函数，但失败了。

我试图用 替换`std::make_pair`，`std::pair<int,something>`但找不到任何*`something`*有效的方法。

* * *

编辑：这有效

```
struct Foo {
    Foo() {}
    Foo(Foo&& other) : pointer(std::move(other.pointer)) {}
    std::unique_ptr<Bar> pointer;
}; 
```

但是我的真实结构包含**很多**成员，我不想把它们都写在move构造函数中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:36:22.703

MSVC10（在 Visual Studio 2010 中）尚未实现隐式移动构造函数（这并不奇怪，因为隐式移动构造函数很晚才进入标准 - 对此进行了很多讨论）。它们也不会出现在 MSVC11 中（在尚未发布的 Visual Studio 2012 中）。

我建议使用`=default`，但这也不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:46:38.770

我不认为 Visual C++ 2010 支持移动构造函数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-03T15:19:45.267

C++11 移动构造函数最大的好处是它可以与复制构造函数共存。如果您没有并且不想要复制构造函数并且您的 C++ 标准库实现缺乏 emplace 支持，您可以简单地在复制构造函数中实现移动，或者通过显式执行移动或重新实现逻辑。

唯一的缺点是，当您尝试复制而不是移动您的结构时，您不会遇到任何编译时错误，这将导致可能（再次可能）需要一段时间才能找到的微妙问题。

# php - 用于获取三个不同表比较的复杂 mySQL 查询

> ID：10870364
> 
> 赞同：2
> 
> 时间：2012-06-03T12:36:37.347
> 
> 标签：php, mysql, sql

**我需要创建非常困难的 SQL 查询，但我自己无法处理。也许有人可以帮助我或提出一些不同的方法。**

我有三张桌子： ![表结构](../Images/98fae88f4e6acdfd64b570fd4761ca0c.png)

我需要在页面上显示需要下一点的表格：

*   将每个用户积分与管理员积分进行比较 (points.user_id=1)
*   如果积分相等，则用户根据积分保存日期与比赛举办日期之间的差值获得积分。如果分数不同，则不添加分数。
*   我可以设置当上面提到的两个日期之间的差异例如 2 天、3 天等时，用户可以获得多少积分（如果（games.date - points.date = 2days{points=points*2} 或类似）
*   比较发生在 (games.date > now())

**更新：**

```
$points = array();

$all_ifo = mysql_query("SELECT p.id, p.user_id, p.game_id, p.points, 
ABS(p.points - a.points) rating_diff, a.points, g.home, g.datetime, u.username
FROM points AS p 
JOIN points AS a ON p.game_id = a.game_id AND a.user_id = 1
JOIN games  AS g ON p.game_id = g.id
JOIN users  AS u ON p.user_id = u.id
WHERE p.user_id != 1 AND g.datetime < NOW();") or die(mysql_error());

while ($info = mysql_fetch_assoc($all_ifo)){
    $points['' . $info['username'] . ''] += $info['rating_diff'];
    echo $info['p.id'];
}
asort($points);

echo "<table class='tabelid'><th>Test</th>";
foreach ($points as $key => $value) {
    $i++;
    echo "<tr><td>".$i.".</td><td style='width:250px;'>" . 
    ucfirst($key) . "</td><td>" . $value . "</td></tr>";
}
echo "</table>"; 
```

**更新 2：**

所以有人建议，为了计分，我需要一个单独的表格。但这很复杂：

```
Game saved in 25-45 min after game start - 1 point
Game saved in 0 - 24 min after game start - 2 points
Game saved in on the same day but before the game - 4 points 
Game saved in 1 day before - 6 points
Game saved in 2 days before - 8 points
..
Game saved in 15 days before - 34 points 
```

那么有什么建议应该如何完成表格以便之后轻松地将其实施到系统中？以及这个 rating_diff 如何获得正确的点数？

**更新 3：**

```
$points = array();

$all_ifo = mysql_query("SELECT x.*, d.*
  FROM Extra AS x
  JOIN (SELECT p.id, p.user_id, p.game_id, p.points, p.date, a.points adminpoints, g.home,
               g.datetime, u.username, TIMESTAMPDIFF(MINUTE, g.datetime, p.date) AS Offset
          FROM points AS p
          JOIN points AS a ON p.game_id = a.game_id AND a.user_id = 1
          JOIN games  AS g ON p.game_id = g.id
          JOIN users  AS u ON p.user_id = u.id
         WHERE p.user_id != 1
           AND g.datetime < NOW()
       ) AS d
    ON d.Offset >= x.LoOffsetFromGameTime
   AND d.Offset <  x.HiOffsetFromGameTime;") or die(mysql_error());

while ($info = mysql_fetch_assoc($all_ifo)){
    $points['' . $info['username'] . ''] += $info['Offset'];
    echo $info['p.id'];
    }

arsort($points);

echo "<table class='tabelid'><th>Test</th>";
foreach ($points as $key => $value) {
    $i++;
    echo "<tr><td>".$i.".</td><td style='width:250px;'>" . ucfirst($key) . "</td><td>" . $value . "</td></tr>";

}
echo "</table>"; 
```

对于输出，我得到保存时间和实际游戏时间之间的时间差：

```
Test
1\.  User1   1851
2\.  User2   -502 
```

但我不知道如何将它与 Extra table 进行比较，从而获得正确的分数。当然，只有当相同 game_id 的积分（0、1 或 2）与管理员的积分（0、1 或 2）相同时，才应添加积分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T14:50:37.960

## 对 SQL 的细微调整

您当前的 SQL，稍微重新格式化，是：

```
SELECT p.id, g.home, p.user_id, u.username, p.points, p1.points, 
       ABS(p.points - p1.points) rating_diff
FROM points p 
JOIN games g ON p.game_id = p.id
JOIN users u ON p.user_id = u.id
JOIN points p1 ON p.game_id = p1.game_id AND p1.user_id = 1
WHERE u.id != 1 
ORDER BY g.id, ABS(p.points - p1.points) 
```

这应该接近你所追求的。您没有包括游戏日期标准。你说：

> 比较发生在 之后`(games.date > now())`。

这意味着当游戏仍然安排在未来时进行比较（因为游戏的时间戳在当前时间戳之后，这通常被称为“在游戏发生之前”而不是“之后”。我认为你应该`<`改为的`>`。

```
SELECT p.id, g.home, p.user_id, u.username, p.points, a.points, 
       ABS(p.points - a.points) rating_diff
  FROM points AS p 
  JOIN games  AS g ON p.game_id = p.id
  JOIN users  AS u ON p.user_id = u.id
  JOIN points AS a ON p.game_id = a.game_id AND a.user_id = 1
 WHERE u.id != 1
   AND g.`datetime` < NOW()
 ORDER BY g.id, ABS(p.points - a.points) 
```

我给“admin”记录赋予别名“a”而不是“p1”，保持单字母别名。`datetime`鉴于它也是一种类型，我不情愿地使用反引号将其视为分隔标识符。我不确定这是否必要，但可能是。

您还没有根据日期差异计算加分；最好将这些信息记录在一个额外的表格中并对其进行适当的调整。但是，由于您的大纲方案仅建议“两天差，双倍积分”，因此很难知道设计应该是什么。特别是，如果天数差为 0 或 1，会发生什么？乘数会是分数吗？结果是否四舍五入？有附加项吗？等等。

* * *

## TDQD — 测试驱动的查询设计

如果这没有产生您想要的数据，请进入 TDQD（测试驱动查询设计）模式。从一个简单的查询开始，并证明它获得了正确的信息。然后扩展它，证明每个查询也有效。

### 非管理员积分记录：

```
SELECT p.id, p.user_id, p.game_id, p.points
  FROM points AS p 
 WHERE p.user_id != 1; 
```

请注意，与您所拥有的相比，有一个直接的区别；由于我还没有从 Users 表中进行选择，因此该条件必须从 转换`u.id != 1`为`p.user_id != 1`. 这将发扬光大。它应该不会影响 SQL 的准确性，但是 TDQD 已经给出了稍微不同的查询设计。

### 具有相应管理员记录的非管理员积分记录：

```
SELECT p.id, p.user_id, p.game_id, p.points, a.user_id, a.points
  FROM points AS p
  JOIN points AS a ON p.game_id = a.game_id AND a.user_id = 1
 WHERE p.user_id != 1; 
```

### 也选择游戏信息：

（我很懒惰，没有`datetime`用反引号括起来。）

```
SELECT p.id, p.user_id, p.game_id, p.points, a.points, g.home, g.datetime
  FROM points AS p
  JOIN points AS a ON p.game_id = a.game_id AND a.user_id = 1
  JOIN games  AS g ON p.game_id = g.id
 WHERE p.user_id != 1; 
```

### 仅选择历史游戏信息：

```
SELECT p.id, p.user_id, p.game_id, p.points, a.points, g.home, g.datetime
  FROM points AS p
  JOIN points AS a ON p.game_id = a.game_id AND a.user_id = 1
  JOIN games  AS g ON p.game_id = g.id
 WHERE p.user_id != 1
   AND g.datetime < NOW(); 
```

### 添加用户信息：

```
SELECT p.id, p.user_id, p.game_id, p.points, a.points, g.home, g.datetime, u.username
  FROM points AS p
  JOIN points AS a ON p.game_id = a.game_id AND a.user_id = 1
  JOIN games  AS g ON p.game_id = g.id
  JOIN users  AS u ON p.user_id = u.id
 WHERE p.user_id != 1
   AND g.datetime < NOW(); 
```

我可以将 WHERE 条件切换回`u.id != 1`现在，但这样做没有任何好处。

* * *

## 点数

标准 SQL 支持 INTERVAL 类型，例如 INTERVAL DAY TO MINUTE。这表示经过的时间量，并且会使点表的编码相对简单。请注意，这对于 MySQL 来说是假设的——我们稍后会处理现实情况。

```
CREATE TABLE Extra
(
    LoOffsetFromGameTime    INTERVAL DAY TO MINUTE NOT NULL,
    HiOffsetFromGameTime    INTERVAL DAY TO MINUTE NOT NULL,
    Points                  INTEGER NOT NULL,
    CHECK(LoOffsetFromGameTime < HiOffSetFromGameTime)
);

INSERT INTO Extra VALUES ('-99 23:59', '-0 00:45',  0);
INSERT INTO Extra VALUES ('-0 00:45',  '-0 00:24',  1);
INSERT INTO Extra VALUES ('-0 00:24',  '0 00:00',   2);
INSERT INTO Extra VALUES ('0 00:00',   '1 00:00',   4);
INSERT INTO Extra VALUES ('1 00:00',   '2 00:00',   6);
INSERT INTO Extra VALUES ('2 00:00',   '3 00:00',   8);
...
INSERT INTO Extra VALUES ('15 00:00',  '99 23:59', 34); 
```

范围是“开闭”；包含低值，排除高值。这意味着不能使用 BETWEEN AND 运算符；它实现了“开放-开放”范围，包括两个端点。

如果需要，可以增加“-99 天”和“+99 天”的值；INTERVAL DAY TO MINUTE 的日期部分的默认位数为 2，但如果需要更多，可以指定更多。下面的查询假设游戏时间和进入时间之间的差异总是在表中的一行中。

### 也选择加分

假设我们可以使用这个表，那么加分的查询就变成了：

```
SELECT p.id, p.user_id, p.game_id, p.points, a.points, g.home, g.datetime, u.username
  FROM points AS p
  JOIN points AS a ON p.game_id = a.game_id AND a.user_id = 1
  JOIN games  AS g ON p.game_id = g.id
  JOIN users  AS u ON p.user_id = u.id
  JOIN extra  AS x
    ON CAST(g.datetime - p.date AS INTERVAL DAY TO MINUTE) >= x.LoOffsetFromGameTime
   AND CAST(g.datetime - p.date AS INTERVAL DAY TO MINUTE) <  x.HiOffsetFromGameTime
 WHERE p.user_id != 1
   AND g.datetime < NOW(); 
```

那重复的表达相当笨拙；我们应该将之前的主查询变成一个子查询，它选择值并为其命名，然后在与 Extra 表的连接中使用它：

```
SELECT x.*, d.*
  FROM extra  AS x
  JOIN (SELECT p.id, p.user_id, p.game_id, p.usr_points, a.adm_points, g.home,
               g.datetime, u.username,
               CAST(g.datetime - NOW() AS INTERVAL DAY TO MINUTE) AS Offset
          FROM points AS p
          JOIN points AS a ON p.game_id = a.game_id AND a.user_id = 1
          JOIN games  AS g ON p.game_id = g.id
          JOIN users  AS u ON p.user_id = u.id
         WHERE p.user_id != 1
           AND g.datetime < NOW()
       ) AS d
    ON d.Offset >= x.LoOffsetFromGameTime
   AND d.Offset <  x.HiOffsetFromGameTime; 
```

如果我正确解释了条件并且没有反转任何内容，那么这应该可以为您提供所需的信息。

### 但是 MySQL 不支持 INTERVAL 类型

我将假设“切换到支持 INTERVAL 类型的 DBMS”不是一个选项。

从逻辑上讲，运行时最简单的机制是将两个日期值之间的差异视为适当的整数分钟数。然后，您可以将 INTERVAL DAY TO MINUTE 编码为适当的分钟数，但表的数据条目更混乱：

```
CREATE TABLE Extra
(
    LoOffsetFromGameTime    INTEGER NOT NULL,
    HiOffsetFromGameTime    INTEGER NOT NULL,
    Points                  INTEGER NOT NULL,
    CHECK(LoOffsetFromGameTime < HiOffSetFromGameTime)
);

INSERT INTO Extra VALUES (-2000000,      -45,  0);
INSERT INTO Extra VALUES (     -45,      -24,  1);
INSERT INTO Extra VALUES (     -24,        0,  2);
INSERT INTO Extra VALUES (       0,    +1440,  4);
INSERT INTO Extra VALUES (   +1440,    +2880,  6);
INSERT INTO Extra VALUES (   +2880,    +4320,  8);
...
INSERT INTO Extra VALUES (  +21600, +2000000, 34); 
```

我使用 2,000,000 作为方便的“大”数字；您可以指定 ±2,147,483,647 或任何其他合适的范围。

请注意，您应该验证 Extra 表的连续覆盖范围并且数据中没有重叠。我没有指定主键，因为没有特别好的选项可供选择。您确实希望将两个偏移列的开闭范围作为主键（对连续性和非重叠有约束），但这在 SQL 中无法表达（或者，不容易，也不是作为主键约束） .

然后，您只需将游戏时间和 NOW() 之间的差异写为适当的分钟数。实际上，使用秒数可能更容易，尽管它会使表的数据输入更加复杂。OTOH，您不会经常对表格进行编码，并且您始终可以安排使用一个采用方便表示并将其转换为秒的过程。

但是，[TIMESTAMPDIFF](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_timestampdiff)可能完全符合我们的需要。我还没有研究过它的返回类型的含义。还有许多其他函数可供选择，在其中的某个地方，您将能够获得一个方便的表达式，该表达式返回游戏时间和用户进入时间之间的差异，作为可以干净地连接的适当值额外表，产生所需的答案。

* * *

## 添加额外积分（更新 3）

要添加的点数是`x.points`if `d.usr_points = d.adm_points`，所以我们可以简单地将其写在选择列表中：

```
SELECT CASE WHEN d.usr_points = d.adm_points THEN x.points ELSE 0 END AS added_points,
       x.*, d.*
  FROM ... 
```

# java - 休眠java中的lazy =“extra”获取不起作用

> ID：10870368
> 
> 赞同：1
> 
> 时间：2012-06-03T12:37:04.187
> 
> 标签：java, hibernate

我`lazy="extra"`在java中的hibernate中获取问题。

我创建了两个类，父类和子类。在父类中，我定义了以下字段：

```
public class Parent{ 

...

@OneToMany( cascade = CascadeType.ALL, fetch=FetchType.LAZY, mappedBy="parent")

@IndexColumn(name="index", base=1)

**@LazyCollection(LazyCollectionOption.EXTRA)**

   private List<Child> children = new ArrayList<Child>();

   public List<Child> getChildren() {
    return children;
   }

   public void setChildren(List<Child> children) {
    this.children = children;
   } 

...

} 
```

分别在子类中我有这个父字段定义

```
public class Child{
...

@ManyToOne( fetch = FetchType.LAZY,  optional = true)

 @JoinColumn(name = "parent_ID", nullable = true)

private Parent parent;

 public Parent getParent() {
    return parent;
   }

public void setParent(Parent parent) {
    this.parent = parent;
   }

...

} 
```

但是当我调用我的实用程序类来获取 parent.getChildren().size() 我有一个错误

*未能延迟初始化角色集合：com.realcommerce.formsGenerator.entity.Parent.children，没有会话或会话已关闭*

有人可以帮助我理解我做错了什么，以及为什么我的代码不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:01:20.567

如果您执行以下操作，通常会发生此错误：

1.  公开课
2.  选择父数据
3.  关闭会话
4.  使用延迟加载访问数据（例如 parent.getChildren()）

在第 4 步中，您会收到此错误，因为 Hibernate 尝试使用延迟加载来加载数据，这是不可能的，因为您已经关闭了会话。

检查您的代码：您何时关闭会话。

解决此问题的解决方案要么不关闭会话，要么在关闭会话之前访问惰性数据，即使当时不需要。

# javascript - GWT - 睡眠\等待信号？

> ID：10870371
> 
> 赞同：2
> 
> 时间：2012-06-03T12:37:51.217
> 
> 标签：javascript, gwt

我正在寻找一种在 GWT\Javascript 中执行 sleep() 或 waitForEvent() 的好方法。我正在执行一个 http 请求，我不想在请求结束之前继续执行代码。

我正在使用现有代码，因此重新分解它以等待事件是非常有问题的。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:39:35.260

使用像[Frame.js](https://github.com/bishopZ/Frame.js)这样的流控制库。

```
 Frame(function(next){
        $.ajax({
            url:'authenticate.api',
            data: id,
            success: next
        });
    });
    Frame(function(next, ajaxResponse){
        userRole = ajaxResponse.responseText.userRole;
    }); 
```

# regex - 如果字符串包含所有单词或条件，则正则表达式匹配

> ID：10870372
> 
> 赞同：4
> 
> 时间：2012-06-03T12:37:58.080
> 
> 标签：regex

我用 php 和 regex 做一个简单的文字游戏，如果一个字符串必须需要两个或多个单词，我们如何搜索？

让我们说

```
"cat"
"dog"
"play" x 2 
```

如果

“猫狗玩玩”**通行证**

“你好猫狗玩戏”**不及格**，只有1个“戏”

“猫”**不通过**，没有狗和2x播放

“我想要一只猫和一只狗和我一起玩，和爷爷一起玩”**通过**

我们如何将它与正则表达式匹配？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T13:16:17.047

您正在寻找的正则表达式是：

```
/(?=.*?\bcat\b)(?=.*?\bdog\b)(?=(.*?\bplay\b){2})^.*$/ 
```

**解释：**我相信单词`cat`,`dog`和`play`(两次) 可以以任何顺序出现在文本中，但它们必须全部出现在句子中才能限定。上面的正则表达式使用正向前瞻来确保上述条件的存在。

[这是上述 RegEx 的在线工作演示](http://www.rubular.com/r/itRFAYpQVq)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T12:48:48.637

尝试`preg_match_all(/cat.+dog(.+play){2}/i,$str,$out);`

# java - 多对多映射后如何使用 Hibernate 读取数据

> ID：10870375
> 
> 赞同：1
> 
> 时间：2012-06-03T12:38:01.880
> 
> 标签：java, sql, hibernate, hql

![在此处输入图像描述](../Images/752d7152e2aeec00bd6aea33c4c36447.png)

我有两个表 Role 和 Right，由于多对多映射，休眠创建了 1 个表 role_right。

现在我想分别获取与**RoleName**对应的所有**RightName**

 **```
admin--> create user, data entry, login, logout

data entry operator--> data entry, logout, login

data analyst--> data analysis, logout, login 
```

帮我解决这个问题。这是我的代码

**用户角色类**

```
@Entity
@Table(name="UserRole")
public class UserRole implements Serializable {

    @Id @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name="RoleID", unique=true, nullable=false)
    private int roleId;
    @Column(name="RoleName", nullable=false)
    private String roleName;
    @Column(name="RoleRight")
    private String roleRight;

    @ManyToMany
    @JoinTable(name="Role_Right",joinColumns=@JoinColumn(name="Role_Id"),
            inverseJoinColumns=@JoinColumn(name="Right_Id"))
    private Collection<UserRights> userRoleMapping = new ArrayList<UserRights>();

    public Collection<UserRights> getUserRoleMapping() {
        return userRoleMapping;
    }

    public void setUserRoleMapping(Collection<UserRights> userRoleMapping) {
        this.userRoleMapping = userRoleMapping;
    }

    public String getRoleRight() {
        return roleRight;
    }

    public void setRoleRight(String roleRight) {
        this.roleRight = roleRight;
    }

    public int getRoleId() {
        return roleId;
    }

    public void setRoleId(int roleId) {
        this.roleId = roleId;
    }

    public String getRoleName() {
        return roleName;
    }

    public void setRoleName(String roleName) {
        this.roleName = roleName;
    } 
} 
```

**用户角色类**

```
@Entity
@Table(name="UserRights")
public class UserRights implements Serializable {

    @Id @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name="RightID", unique=true, nullable=false)
    private int rightId;
    @Column(name="RightName", nullable=false)
    private String rightName;

    @ManyToMany(mappedBy="userRoleMapping")
    private Collection<UserRole> userRightsMapping = new ArrayList<UserRole>();

    public Collection<UserRole> getUserRightsMapping() {
        return userRightsMapping;
    }

    public void setUserRightsMapping(Collection<UserRole> userRightsMapping) {
        this.userRightsMapping = userRightsMapping;
    }

    public int getRightId() {
        return rightId;
    }

    public void setRightId(int rightId) {
        this.rightId = rightId;
    }

    public String getRightName() {
        return rightName;
    }

    public void setRightName(String rightName) {
        this.rightName = rightName;
    } 
} 
```

我试过这样的事情

```
session.getUserRightsMapping() 
```

这个查询非常接近我想要的

String query = "select Role_Id, RightName FROM userrights join role_right on " + "userrights.RightID = role_right.Right_Id";

但不知道下一步该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:43:54.320

首先，为了让事情更清楚，我将从重命名您的实体和字段开始：

*   `UserRole`，具有名为...的权利集合`rights`
*   `UserRight`（不带 s），带有一组名为...的角色`roles`

现在，最简单的做法是获取所有角色，并在单个查询中获取每个角色的权限：

```
String hql = "select role from UserRole role left join fetch role.rights";
List<UserRole> roles = session.createQuery(hql).list()
// now you can iteratr through the roles, and for each role, iterate through its rights 
```

如果您真的只想拥有所有 role_name/right_name 关联，请使用以下代码：

```
String hql = "select role.name, right.name from UserRole role"
             + " inner join role.rights right";
List<Object[]> rows = session.createQuery(hql).list(); 
```

并且返回列表的每个 Object[] 元素都包含两个元素：角色名称和权限名称。请注意，此查询不会返回没有任何权限的角色。

[所有这些都在Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)中得到了很好的解释。阅读。**

# python - mako 中是否有等效于 Django 模板过滤器的功能？

> ID：10870379
> 
> 赞同：1
> 
> 时间：2012-06-03T12:38:51.010
> 
> 标签：python, mako

我知道 Mako 中有一些过滤功能（甚至允许使用多个过滤器），但我在文档中找到的所有内容都是关于基本文本转义等的非常基本的功能。

有没有类似的东西（我更喜欢 Mako 而不是 django 能够在模板中使用原始 python

# python - python装饰器是对象

> ID：10870385
> 
> 赞同：0
> 
> 时间：2012-06-03T12:39:55.653
> 
> 标签：python, wrapper, decorator

```
dict_proxy({.....'showMe4': 'function wrapper1 at 0x0C1BD150', 
            'showMe3': 'classmethod object at 0x0C1BF630'..... 
```

如果我在某些类（例如`wrapper1`）中为我的函数（例如）使用包装器（例如）定义我自己的装饰器，为什么它被列为一个函数，但 Python 装饰器（例如和）（我假设所有 Python 定义的装饰器？ ）如果应用于我的功能（例如应用于）被列为对象？`showMe4``myClass``myClass.__dict__``@classmethod``@staticmethod``@classmethod``showMe3`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:44:13.410

装饰器可以是函数或类（实现`__call__`）。在后一种情况下，装饰函数实际上是用于装饰函数的类的实例。

# .net - 2-Way SSL 身份验证和请求授权

> ID：10870386
> 
> 赞同：0
> 
> 时间：2012-06-03T12:40:05.877
> 
> 标签：.net, wcf, ssl

我开始开发一个 RESTful API（使用 WCF），它将用于 2Way SSL 身份验证 - 客户端认证和服务器端认证。

据我了解，不需要密码/用户名，因为客户端已经通过客户端证书的身份验证。

我的问题是一些公开的方法应该仅限于特定的客户。

所以，我还需要某种形式的授权。我考虑过使用一个密钥，该密钥将提供给被授权具有特定功能的客户端，但后来我意识到这个客户端已经拥有可能用于授权的客户端证书。

有没有办法以编程方式获取当前使用的客户端证书的名称，然后通过证书名称进行授权？

像这样的东西：

```
string clientCertificate = CertificateAuthority.GetCurrentCertificate;
if (Authorize(clientCertificate))
     doSomething() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:56:16.567

是的，有这样的方法，最引人注目的是[X509Certificate2.GetNameInfo Method](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.getnameinfo)。
（顺便说一句，[Dominick Baier](http://leastprivilege.com/2012/05/13/fluent-api-for-the-x-509-certificate-store/)有一个出色的[流畅 API 扩展](https://github.com/thinktecture/Thinktecture.IdentityModel)）

但是，我认为您应该看一下[基于声明的身份](http://claimsid.codeplex.com/wikipage?title=An%20Introduction%20to%20Claims%20%28English%29&referringTitle=Home)，它将为您提供一个非常简化的代码架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T23:21:26.213

证书持有者的身份在证书的 SubjectDN 中。

其余部分，即授权部分，取决于应用程序，并且也随您的体系结构而变化。例如，如果您使用 LDAP，您将查找该用户的角色。

# java - 选择下拉菜单时服务端口抛出异常

> ID：10870387
> 
> 赞同：0
> 
> 时间：2012-06-03T12:40:17.830
> 
> 标签：java, web-services, jsf, jakarta-ee, managed-bean

我有一个级联下拉菜单，它在一个系统上运行良好，但在另一个系统上无法运行。请参考以下代码： xhtml:

```
<p:selectOneMenu style="width: 150px" value="#{reportBean.exchange}">
                <f:selectItem itemLabel="NSE" itemValue="nse"/>
                <f:selectItem itemLabel="BSE" itemValue="bse"/> 
                <p:ajax update="sym" listener="#{reportBean.wow()}"/>
            </p:selectOneMenu>             
        <h:outputText value="Scrip Symbol :"/>
        <p:selectOneMenu value="#{reportBean.scripID}" id="sym" style="width: 100px">
            <f:selectItem itemLabel="All" itemValue="0"/>
            <f:selectItems var="scrip" value="#{reportBean.sl}" itemLabel="#{scrip.scripSymbol}" itemValue="#{scrip.scripID}"/>
        </p:selectOneMenu> 
```

wow() 方法没有被调用，下面是 bean 代码：

```
 @javax.faces.bean.ManagedBean
@javax.faces.bean.ViewScoped
 public class reportBean implements Serializable {
    @WebServiceRef(wsdlLocation = "WEB-INF/wsdl/localhost_8080/StatelessWebService/StatelessWebService.wsdl")
     transient  private StatelessWebService_Service  service ;
    private java.util.List<service.MasterScrip> getAllScripByExchange(java.lang.String exchange) {
        service.StatelessWebService port = service.getStatelessWebServicePort();
        return port.getAllScripByExchange(exchange);
    }
        public void wow()
    {    
            sl=getAllScripByExchange(exchange);
    } 
```

我调试了一下，发现调试点来了就行了

```
service.StatelessWebService port = service.getStatelessWebServicePort(); 
```

并进入 InvocationTargetException.java 并进入以下方法：

```
public InvocationTargetException(Throwable target) {
super((Throwable)null);  // Disallow initCause
    this.target = target;
} 
```

最后在 glassfish 中返回的错误是：

```
 WARNING: /ClientTemplate/tradeReport.xhtml @17,74 listener="#{reportBean.wow()}": java.lang.NullPointerException
javax.el.ELException: /ClientTemplate/tradeReport.xhtml @17,74 listener="#{reportBean.wow()}": java.lang.NullPointerException 
```

在 managd bean 中，如果我没有实现可序列化或者我没有将服务设为瞬态，那么我会得到 NotSerializable 异常。这个错误的原因是什么？我该如何解决？ **编辑：**

服务豆：

```
 @ManagedBean
@javax.faces.bean.RequestScoped
public class serviceBean{
    @WebServiceRef(wsdlLocation = "WEB-INF/wsdl/localhost_8080/StatelessWebService/StatelessWebService.wsdl")
    private StatelessWebService_Service service;
@ManagedProperty("#{reportBean}")
    private reportBean reportBean;

    public beans.reportBean getReportBean() {
        return reportBean;
    }

    public void setReportBean(beans.reportBean reportBean) {
        this.reportBean = reportBean;
    } //other props
    public String getExchange() {
        return exchange;
    }

    public void setExchange(String exchange) {
        this.exchange = exchange;
    }
     public void wow()
{    
        reportBean.setSl(getAllScripByExchange(reportBean.getExchange()));
} 
```

报告豆：

```
 @javax.faces.bean.ManagedBean
@javax.faces.bean.ViewScoped
 public class reportBean implements Serializable {
     private Integer scripID;
     private String exchange;
     private List<service.TradeStock> tradeList;
     private List<MasterScrip> sl; //get set 
```

现在我收到以下错误：

```
 SEVERE: Error Rendering View[/ClientTemplate/tradeReport.xhtml]
javax.faces.FacesException: java.io.NotSerializableException: service.MasterScrip 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:10:39.357

将服务调用和操作方法拆分为不同的请求范围 bean 类。将剩余部分保留在视图范围的 bean 中。最后将范围为一的视图注入到范围为一的请求中`@ManagedProperty`。

```
@ManagedBean
@RequestScoped
public class ReportActionBean {

    @WebServiceRef(wsdlLocation = "WEB-INF/wsdl/localhost_8080/StatelessWebService/StatelessWebService.wsdl")
    private StatelessWebService_Service service;

    @ManagedProperty("#{reportDataBean}")
    private ReportDataBean reportDataBean;

    // ...
} 
```

# php - PHP is_readable 失败但 opendir 工作

> ID：10870388
> 
> 赞同：5
> 
> 时间：2012-06-03T12:40:20.967
> 
> 标签：php

基本上它在锡上写的是：

```
if(is_dir($dir))
    echo $dir . " is a directory\n";

if(is_readable($dir))
    echo $dir . " is readable\n";

if($this->handle = opendir($dir))
    echo $dir . " opened\n"; 
```

回报：

\\HTPC\MOVIES 是一个目录

\\HTPC\MOVIES 打开

哪个奇怪？我可以遍历目录中的文件，但显然它不可读。就像我说的那样我仍然可以读取文件并不重要，但是我觉得有点奇怪。

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:17:21.463

似乎是权限错误。分配给该特定文件夹的是一个家庭组。家庭组实际上并未在网络上使用。删除家庭组并重新添加用户组后 is_readable 返回 true。仍然奇怪 opendir 如何返回 true 但 is_readable 不是。你肯定会期望一些不可读的东西在打开时会失败。

谢谢你们的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:00:04.230

如果您想阻止进入目录，请检查您的安全策略，寻找绕过遍历检查或类似的东西。

如果绕过该检查，则可以进入 acl 禁止的目录，但无法读取内容。

如果您的 ACL 已为整个树仔细正确地设置和选择，那么您通常不需要触摸它。

# ios - 将远程 IO 音频单元的输出离线写入文件

> ID：10870390
> 
> 赞同：7
> 
> 时间：2012-06-03T12:40:25.460
> 
> 标签：ios, core-audio, audiounit

我有一个使用连接到远程 IO 音频单元的 AUSampler 生成声音的程序。AUSampler 由在定时循环中触发的预先录制的事件控制。我想将生成的声音写入文件。

在 IO 单元的渲染回调中写入文件还有一些其他问题：

*   [从 RemoteIO 录制到 AAC：正在写入数据但文件无法播放](https://stackoverflow.com/questions/10113977/recording-to-aac-from-remoteio-data-is-getting-written-but-file-unplayable)
*   [如何将 AUGraph 的输出写入文件？](https://stackoverflow.com/questions/8951458/how-to-write-output-of-augraph-to-a-file)
*   [从 RemoteIO 录制：生成的 .caf 音调变慢 + 失真](https://stackoverflow.com/questions/10067117/recording-from-remoteio-resulting-caf-is-pitch-shifted-slower-distorted)
*   [从 IO 单元将音频写入磁盘](https://stackoverflow.com/questions/6930609/write-audio-to-disk-from-io-unit)

但这些都涉及实时写入数据。有没有一种方法可以在比播放文件更短的时间内离线渲染文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:43:53.963

如果您正在渲染预先录制的序列，那么为什么不将原始 PCM 数据写入磁盘呢？ExtAudioFileWriteAsync函数应该在这种情况下工作[。](https://developer.apple.com/library/ios/#documentation/MusicAudio/Reference/ExtendedAudioFileServicesReference/Reference/reference.html)

# r - R迭代多维数组的索引

> ID：10870392
> 
> 赞同：4
> 
> 时间：2012-06-03T12:41:02.477
> 
> 标签：r

我有一个多维数组，直到运行时它的维数是未知的，例如：

```
dims <- rep(3, dim_count)
arr <- array(0, dims) 
```

现在，有了`dims`向量，我想通过数组的所有索引进行迭代，例如，有

```
dims <- c(2,3) 
```

我希望能够得到一系列向量：

```
c(1,1)
c(1,2)
c(1,3)
c(2,1)
c(2,2)
c(2,3) 
```

或者只是一个从前一个生成下一个的函数。

我能想到的唯一三种方法是：

1.  迭代`1:length(arr)`并将这些数字转换为索引向量-在上面的示例中，我将寻找一个（最好是内置的）函数来执行`indexesOf(arr, 4) -> c(2,1)`.

2.  获取最后生成的索引向量，在其最后一个位置增加元素，并确保它在 给定的范围内`dims`。

3.  生成一个矩阵，其中的列将包含我需要的所有索引。

但是，遗憾的是，前两种方法都不是快速或优雅的。第三个看起来不错的主意，我可以在纸上做，但我不能在 R 中使用`rbind`，等等。

有没有这样做的好方法，最好没有嵌套循环？

只是为了比较，我丑陋的#3循环实现：

```
getAllIndexes = function(dims) {
  dimCount <- length(dims)
  ret <- array(1:dims[1], c(1,dims[1]))
  for(i in 2:length(dims)){
    curdims <- dims[i]

    a <- array(rep(ret, curdims), c(nrow(ret), curdims * ncol(ret) ))
    b <- rep(1:curdims, each=ncol(ret))
    ret <- rbind(a, b, deparse.level=0)
  }
  ret
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:01:15.877

如果我正确解释了您的请求，那么

```
as.matrix(do.call(expand.grid,lapply(dim(arr),seq))) 
```

似乎做#3 ...

# blackberry - 使用java的黑莓背景或壁纸

> ID：10870393
> 
> 赞同：0
> 
> 时间：2012-06-03T12:41:06.750
> 
> 标签：blackberry, java-me, background, wallpaper

如何在您的应用程序中将 img 设置为黑莓背景“壁纸”？img 在我读到的 res 文件夹中，您可以使用 HomeScreen.setBackgroundImag(uri)

但是img应该在黑莓设备中，它自己有什么想法吗？我用了这段代码

```
Background bc = BackgroundFactory.createBitmapBackground(backGround);
       this.getMainManager().setBackground(bc); 
```

但它作为应用程序的背景而不是它自己的黑莓设备

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:08:06.140

我举了一些例子试试这个方法，在主管理器中调用这个方法

public void paint(Graphics graphics) { //绘制背景图片然后调用paint.

```
graphics.drawBitmap(0, 0, w,120, Bitmap.getBitmapResource("Player_bg.png"), 0, 0);
    super.paint(graphics); 
```

# c#-4.0 - 为什么一个界面很难进化？

> ID：10870397
> 
> 赞同：0
> 
> 时间：2012-06-03T12:42:02.630
> 
> 标签：c#-4.0, interface

我想知道为什么这是真的：

**向接口添加方法将破坏它的所有实现... ??? ...一旦接口交付，您就没有机会在不破坏使用该接口的代码的情况下更改它。...**

在许多论坛讨论中遇到过这些东西，但没有人解释如何..

如果我将任何方法添加到接口（例如 IMyInterface），并且只是将方法的功能添加到实现此接口的类/类，那么它是如何破坏我的代码的？..它很简单！……不是吗？..（向接口添加方法签名并在类中实现它们），.....就像我向某个类添加一个方法以扩展其功能并且我的代码将得到更新。当然，设计问题时类和接口的目的是不同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:03:44.377

如果您同时提供接口和实现，并且代码完全在您的应用程序内部，那么问题主要是理论上的。当您在 dll 中提供接口并且其他人在他们的 dll 中提供实现时，问题就变得真实了。可能发生这种情况的一个例子是使用插件系统或设备驱动程序。

这两个 dll 在程序启动时在运行时链接。如果您在新版本的 dll 中更新了接口，则编译成旧版本实现 dll 的类对该接口不再有效，程序将无法启动。然后人们被锁定在您的旧版本中，直到他们的实现 dll（可能来自不同的供应商）被更新以反映新版本。

# javascript - 带有 .live() 函数的 jquery 附加插件

> ID：10870399
> 
> 赞同：-1
> 
> 时间：2012-06-03T12:42:13.363
> 
> 标签：javascript, jquery

我想附加一个`cycle plugin`带有`.live()`on `div element`, menas 的 jquery ：

目前我正在做：

```
$("div").cycle(); 
```

但我想做：

```
$("div").live("which event ?", function() { $(this).cycle(); }); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:45:49.770

您想自动触发事件吗？如果是，这是解决方案：

将自定义处理程序应用于您的元素：

```
$("div").live("yourEvent", function() { $(this).cycle(); }); 
```

然后您可以使用 trigger() 函数触发此事件：

```
$("div").trigger("yourEvent"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T12:58:05.993

可惜没有很好的绑定物品的方法就*出乎意料了，I'm here* event。相反，`.live`（或`.on`，因为前者已被弃用）之类的方法对鼠标和键盘事件（一般来说）更有用。

将插件自动应用到所有`div.cycleMe`元素的最佳方法是将该逻辑放在将这些新元素加载到页面中的函数的 callbak 方法中。例如，如果您有一个`$.ajax`提取新数据的实例：

```
$.ajax({
    url: "/getSlider",
    success: function( data ) {
        $("#sliders")
            .append(data).find("div.cycleMe:not(.active)")
                .addClass("active").cycle();
    }
}); 
```

在我们的滑块被加载到 之后`#sliders`，我们的回调函数被执行。它找到所有`.cycleMe`没有`.active`该类的元素，添加该类，然后`.cycle()`针对它们调用该方法。这里的`.active`类是为了确保我们不会在*之前加载的*滑块上再次调用循环方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T12:45:26.710

首先，`.live()`已弃用。建议您使用`.delegate()`较旧的 jQuery 和`.on()`1.7+ 版本

如果您将插件加载到动态元素，为什么不在元素加载时附加它们？

例子：

```
$.get(url,data,function(html){
    $(html)                  //wrap with jQuery
        .appendTo(somewhere) //add somewhere
        .cycle(html);        //add cycle
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T12:48:12.787

你试图做的事情是不可能的。在对象上调用 jQuery 方法不像是一个事件，所以你不能以“实时”的方式来做。

# python - 如何以全自动方式在 Linux 上安装 Python 解释器

> ID：10870401
> 
> 赞同：4
> 
> 时间：2012-06-03T12:42:33.187
> 
> 标签：python, linux, installation, build-automation, silent-installer

我想有一种可靠的方法在 linux 用户帐户上安装 Python 解释器 2.4 到 Python 3.3。我可以假设有一个 C 编译器，但我想避免依赖特定的发行版或发行版。是否已经有类似简单的 python 脚本的东西？

更新：我正在寻找一种脚本/方式来自动完成所有下载和安装，并以简明的摘要报告任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:08:26.590

有一个叫pythonbrew的东西：[https](https://github.com/utahta/pythonbrew) ://github.com/utahta/pythonbrew看看，也许这就是你需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T13:05:48.433

看看[python buildout](https://github.com/collective/buildout.python)，一个[`zc.buildout`](http://www.buildout.org/)用于构建 python 版本 2.4-2.7、3.2 和 3.3 的设置。

最初是为在 Mac 上构建多个 python 版本而构思的，我相信它也应该在 Linux 上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T12:58:35.667

你可以很容易地为自己编译 Python。下载并解压 Python 源代码压缩包，然后使用以下命令序列而不是通常的命令：

```
$ ./configure --prefix=$HOME/local
$ 制作
$ 进行安装

```

您可能想要添加`$HOME/local/bin`到您的`PATH`. Python 的不同次要/主要版本不会相互干扰，因此您可以同时安装 2.4、2.5、2.6、2.7、3.1、3.2 和 3.3。（针对 3.0 测试您的代码毫无意义。）

该程序`python`将是特定 Python 版本之一的别名，例如`python2.6`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T14:18:37.827

```
#!/bin/bash

cd ~/Downloads
wget http://www.python.org/ftp/python/2.4.3/Python-2.4.3.tar.bz2
tar xvjf Python-2.4.3.tar.bz2
cd Python-2.4.3
./configure
make
sudo make install
make clean 
```

# sql-server - 在 SQL Server 中实现最大性能的最佳实践

> ID：10870403
> 
> 赞同：1
> 
> 时间：2012-06-03T12:42:46.143
> 
> 标签：sql-server, indexing

什么更有效（更快）：将相同的推文存储在`Tweet`表中两次，一次`user1`又一次用于`user2`或使用之间的连接`Tweet`并`Friend`获得结果？

```
Tweet => Id
         UserId
         SenderId
         JSONdata

User =>  Id

Friend => UserId 
          FriendId 
```

加入：

```
SELECT TOP 20 a.* FROM Tweet a INNER JOIN Friend b ON a.SenderId = b.UserId WHERE b.UserId = {0} 
```

或者我可以为发送者和接收者保存两次推文并使用一个简单的查询：

```
SELECT TOP 20 * FROM TWEET WHERE UserId = {0} 
```

哪个更快，如果加入，那么我应该使用什么类型的索引，我很乐意听到任何建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:01:38.643

仅将数据存储一次（推文），您将不会遇到任何一致性问题。除非您将其开发为重型 OLAP 系统（即数据仓库），否则您应该进行规范化。

# java - 数组索引越界异常Java游戏

> ID：10870404
> 
> 赞同：0
> 
> 时间：2012-06-03T12:42:51.097
> 
> 标签：java, exception, arraylist, linked-list, indexoutofboundsexception

我正在用java创建一个游戏，我正在尝试为它创建一个多人游戏，当游戏第一次开始时，关卡被加载并将客户端添加到客户端的玩家列表中，客户端将遍历列表和如果服务器告诉它添加更多，但问题是我在游戏第一次开始时收到“ArrayIndexOutOfBoundsException”，我已经指示我的游戏忽略它，我似乎无法解决这个问题。

我假设它与创建新播放器以及线程完成工作所需的时间有关，但希望有人能提供帮助！

消息 var 是从服务器收到的字符串，格式如下：

名称；地址；posX；posY；fakeRotation；旋转；旋转速度；速度；sheildEnabled；sheildHealth；健康

这是服务器发送的示例：

```
Luke;/127.0.0.1:53701;50.0;50.0;0.0;0.0;0.0;0.0;true;100;100 
```

这是变量：

```
String[] decrypted = message.split(",");
String[] commands = decrypted[x].split(";"); 
```

这是困扰我的一段代码：

```
 boolean newPlayer = true;
        if(Main.level.playerList != null)
        {
            try
            {
                for(int p = 0; p < Main.level.playerList.size(); p++)
                {
                    if(Main.level.playerList.get(p).address.toString().equals(commands[1]))
                    {
                        newPlayer = false;
                        break;
                    }
                }

                if(newPlayer)
                {
                    Player player = new Player(50, 50, 100, 150, commands[1], Main.level.shipImage1, Main.level.thrusterFlamesSprite1, Main.level.shieldSprite1);
                    Main.level.playerList.add(player);
                }

                for(int p = 0; p < Main.level.playerList.size(); p++)
                {
                    Player player = Main.level.playerList.get(p);

                    if(player.address.equals(commands[1]))
                    {
                        // name:address:posX:posY:fakeRotation:rotation:rotationSpeed:speed:sheildEnabled:sheildHealth:health
                        player.name = commands[0];
                        player.address = commands[1];
                        player.pos[0] = Double.parseDouble(commands[2]);
                        player.pos[1] = Double.parseDouble(commands[3]);
                        player.fakeRotation = Float.parseFloat(commands[4]);
                        player.rotation = Float.parseFloat(commands[5]);
                        player.rotationSpeed = Double.parseDouble(commands[6]);
                        player.speed = Double.parseDouble(commands[7]);
                        player.sheildEnabled = Boolean.parseBoolean(commands[8]);
                        player.sheildStrength = Integer.parseInt(commands[9]);
                        //player.health = Integer.parseInt(commands[10]);
                    }
                }
            }
            catch(ArrayIndexOutOfBoundsException e)
            {
                System.out.println("Array index out of bounds, continuing.");

                e.printStackTrace();
            }
        } 
```

希望有人可以提供帮助，就像我说的那样，我认为这与添加“新”项目有关，但我找不到任何方法让它发挥作用！

我收到的堆栈跟踪是：

```
java.lang.ArrayIndexOutOfBoundsException: 1
at multiplayer.Translator.interperate(Translator.java:28)
at multiplayer.GameClient.run(GameClient.java:81) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:56:18.500

根据堆栈跟踪，错误是否发生`health`在线上？如果是这样，decrypted[x] 中可能没有足够的分号。

编辑 -

```
 String[] commands = decrypted[x].split(";"); 
```

那么，什么是`x`？当您查看所有内容时`decrypted[x]`，您是否看到了您的期望？该值是您之前发布的“卢克”数据吗？

编辑 - 另外，我建议您用常量替换 0 和 1 `pos[0]`：`pos[1]``static final`

```
 private static final int X_COORD = 0;
  private static final int Y_COORD = 1;
  /* ... snip ... */
  player.pos[X_COORD] = Double.parseDouble(commands[2]);
  player.pos[Y_COORD] = Double.parseDouble(commands[3]); 
```

这样做的目的是让您的代码通过描述性常量而不是数字来引用 X 和 Y 坐标。虽然现在你知道 0 和 1 的含义，但几个月后你不会，当你回顾他的代码时，你会感到困惑或困惑。添加常量意味着您不必记住。它还可以帮助您发现错误。

# iphone - Core Plot Touch - 只读属性

> ID：10870405
> 
> 赞同：0
> 
> 时间：2012-06-03T12:42:53.997
> 
> 标签：iphone, properties, graph, core-plot, readonly

我想将 Core Plot Touch 添加到我的项目中。我找到了这个教程：[http ://www.switchonthecode.com/tutorials/using-core-plot-in-an-iphone-application](http://www.switchonthecode.com/tutorials/using-core-plot-in-an-iphone-application)

但是，我已经下载了最新版本的 CorePlotTouch，似乎有些事情发生了变化，因为我无法设置所有属性。我收到很多错误，说该属性是只读的。

例如：

```
CPTScatterPlot *xSquaredPlot = [[CPTScatterPlot alloc] 
                                    initWithFrame:graph.bounds];

    xSquaredPlot.dataLineStyle.lineColor = [CPTColor redColor];
    xSquaredPlot.dataLineStyle.lineWidth = 1.0f; 
```

lineColor 和 lineWidth 都是只读属性，我找不到改变它们的不同方法。那么如何更改线条的颜色或宽度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T12:57:45.837

您需要创建一个 CPTMutableLineStyle 对象并设置其属性。

```
CPTScatterPlot *xSquredPlot = [[CPTScatterPlot alloc] init];
CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
lineStyle.lineWidth = 1.0f;
lineStyle.lineColor = [CPTColor redColor];
xSquredPlot.dataLineStyle = lineStyle; 
```

# c# - 动态而不是 C# 中的泛型

> ID：10870408
> 
> 赞同：-1
> 
> 时间：2012-06-03T12:43:03.507
> 
> 标签：c#, generics, dynamic

你们会实施一个完整的项目，使用***动态***thourout 并完全放弃泛型吗？
弗兰克利，我越来越讨厌创建类通用层次结构，原因有很多。我知道泛型的好处，但我认为，通过良好的编码实践和使用约定，人们可以实现与泛型几乎相同的目标，代码更令人愉悦、清晰和可读，而无需像 C++ 这样的古老语言的遗产。毕竟，Ruby 做得很好，其他流行的语言也是如此。
你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:47:15.980

我个人认为这是一个坏主意。他们为什么不在 DLR 上使用动态语言？

类型安全？泛型对此有好处。

# java - 读取数据的数组映射

> ID：10870413
> 
> 赞同：1
> 
> 时间：2012-06-03T12:43:45.837
> 
> 标签：java, android, variadic-functions, array-map

在我的 Android 项目中，我试图将提交的表单数据映射从我的主 Activity 类发送到扩展 asyncTask 的第二个类。

在我的主要活动中，我有以下代码片段：

```
Map<String, String> formData = new HashMap<String, String>();
formData.put("name", formName.getText().toString());
formData.put("test", "TESTING");

//formData.get("name"); - this test works

Connection connection = new Connection();
connection.execute(formData); 
```

这设置了我的数据映射，成功测试了第一个元素并将表单数据发送到我的班级，负责在单独的线程上处理该数据。

但是，在我的异步类中，使用以下代码段：

```
public class Connection extends AsyncTask<Map, Void, Void> {
    @Override
    protected Void doInBackground(Map... data) {
        // TODO Auto-generated method stub
        Log.i("TEST", "NEW THREAD FIRING !!!");
        Log.d("DATA", data.get("name"));

        return null;
    }

} 
```

我的第二个日志调用试图提取数组映射的名称元素，但我的“数据”对象未被识别为我传入的映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:50:17.683

该`doInBackground()`方法采用[可变](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)参数。这意味着可以一次传入多个类型。

在这种情况下，可能传入了多个映射，在这种情况下，实际上只传入了一个 IS。（您知道这一点是因为您是通过[`AsyncTask`的 execute](http://developer.android.com/reference/android/os/AsyncTask.html#execute%28Params...%29)方法发起调用）。注意`...`方法签名中的？这意味着您可以传入多个`Map`对象。

```
Connection connection = new Connection();
connection.execute(formData1, formData2, formData3); 
```

您可以像访问任何`array`对象一样访问其中的值，即使用索引器。

我相信如果您将代码更改为如下所示，它应该可以工作：

```
@Override
protected Void doInBackground(Map... data) {
    // TODO Auto-generated method stub
    Log.i("TEST", "NEW THREAD FIRING !!!");
    Map myMap = data[0];
    Log.d("DATA", myMap.get("name"));

    return null;
} 
```

# jquery - 通过 Ajax 加载 Google 图表

> ID：10870419
> 
> 赞同：2
> 
> 时间：2012-06-03T12:44:59.940
> 
> 标签：jquery

我想使用 Google Charts API 在我的网站上绘制几个饼图。只要所有内容都放在同一个文档中，它就可以正常工作。但现在我想通过 Ajax 加载图表代码，例如响应某些用户操作。但这不起作用（使用简单的 jQuery 调用）。我怎样才能做到这一点？

```
 <script type="text/javascript">
         google.load("visualization", "1", {packages:["corechart"]});
         google.setOnLoadCallback(drawChart);

         function first(){
         var my_chart = new google.visualization.DataTable();
         //chart code

       var chart_pie= new google.visualization.PieChart(document.getElementById('meins'));
       chart_pie.draw(my_chart, options);
     }

     function drawChart() {
         first();
         second();
         //more
     }

   </script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T13:08:10.053

例如，单击事件的处理程序到“目标”的元素 id。

首先

```
google.load("visualization", "1", {packages:["corechart"]}); 
```

下一个

```
$('#target').on('click',function(){               

    $.ajax({
        url: url,
        data: "",
        success: function(resultData){
            google.setOnLoadCallback(drawChart(resultData));                                                   
        }
    });     
}); 
```

# forms - MS access 2010 VBA 连接表与组合框和标签

> ID：10870425
> 
> 赞同：0
> 
> 时间：2012-06-03T12:45:29.880
> 
> 标签：forms, ms-access, combobox, vba, ms-access-2010

我有一个包含 SUPP_CODE 和 SUPP_NAME 列的表。我在表单中放置了一个组合框并将属性记录集设置为 SUPP_NAME。

现在，我在表单中有一个标签，我想做以下事情：

```
- When user selects a SUPP_NAME in the combo box, the label will view the corresponding SUPP_CODE. 
```

我没有将 ID（自动编号）放入该表，但如果需要，我可以将其放入。

我需要如何做这些事情的提示、技巧和代码。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:46:44.430

可能最简单的方法是像这样设置组合框：

```
Row Source : Select Supp_Code, Supp_Name FROM table
Column Count : 2
Column Widths : 0cm;2cm
Bound Column : 1 ''Counting from 1 
```

通过此设置，您可以将文本框设置为：

```
=MyCombo.Column(0) ''Supp_Code, counting from 0 
```

但是，由于 Bound Column 为 1 (Supp_Code)，combo 的值也是第 1 列，所以您可以简单地说：

```
=MyCombo 
```

之后，您可以使用 DLookUp、DCount 和 DSum 等域函数从表单中未包含的表中获取数据。

# facebook - Facebook 分享按钮 - Scraper 不获取元标签

> ID：10870426
> 
> 赞同：1
> 
> 时间：2012-06-03T12:45:41.047
> 
> 标签：facebook, share, doctype, meta-tags, scraper

我一直在这个页面上工作 [http://www.btselem.org/hebrew/131606](http://www.btselem.org/hebrew/131606)

我决定添加 Facebook 分享按钮，但出于某种原因，每当我尝试分享时，Facebook 抓取工具都无法获取源中的任何元标记——它只显示网站的 URL。在 facebook 开发者调试工具中检查 URL 后，我得到了**206 响应代码**和以下错误：

**无法下载 - 无法检索数据表单 URL**。

我还检查了“查看我们的抓取工具从您的 URL 中看到的确切内容”选项，似乎抓取工具只能读出以下行：

`<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">`

奇怪的是，这甚至不是我在页面源中获得的 DOCTYPE。我已经尝试将 DOCTYPE 更改为：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"> 
```

在我阅读了一些较早的帖子后说这应该可以解决问题，但这也不起作用——我不断地从刮板那里得到同样的结果。如果你们有任何提示或想法，我将不胜感激……</p>

我发布了源代码的第一部分，至少包含元标记的部分。如有必要，我将添加整个代码。提前致谢，

大卫。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-Transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:og="http://opengraphprotocol.org/schema/" xml:lang="he" lang="he" dir="rtl">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>לקסיקון הכיבוש: 67 שניות על... מאחז |בצלם</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta property="fb:app_id" content="142675212478057"/>

<link rel="shortcut icon" href="/sites/all/themes/btselem/images/favicon.ico" type="image/x-icon" />
<meta property="og:site_name" content="בצלם" />
<meta property="og:title" content="מאחז | בצלם" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://www.btselem.org/hebrew/131606" />
  <link type="text/css" rel="stylesheet" media="all" href="/sites/default/files2/css/css_1458508373fb743060ffb80b43b3d59c.css" />
<link type="text/css" rel="stylesheet" media="print" href="/sites/default/files2/css/css_ff9c22380c0853814b0563da89e16090.css" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:10:51.040

我刚才在尝试让 Facebook Scraper ( [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug) ) 读取我创建的对象图文件时遇到了这个确切的问题。当我的“<meta property=...”之前有空白（空格）时，刮板显示它正在将我的元视为 body 标签的一部分，而不是 head 标签的一部分。当我删除元标记之前的空白时，刮板可以正确地看到头部的元标记并且效果很好。出于好奇，我用制表符替换了我之前的 4 个空格宽度的空白，并且刮板能够正确看到内容。很奇怪。希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:41:31.257

`<!DOCTYPE>`当我查看您文档的生成源时，您的标签前出现了一个空行。

206 响应代码通常表示请求者已取消传输。可能是空白行使 Facebook 解析器感到困惑，它只是放弃了。

我没有过多地使用 Drupal，但是在其他基于 PHP 的 CMS 系统中，这通常会发生，因为在标题呈现之前调用的 php 文件中的结束`?>`标记和标记之间存在空格。[似乎一致](https://stackoverflow.com/questions/236493/what-are-the-arguments-in-favor-of-php-closing-tags-for-php-only-files)认为，尽可能省略这些关闭 php 标记是最佳实践。`EOF`

在完成编辑所有 PHP 文件的过程之前，您可以通过复制此页面的源代码并将其保存为服务器上的静态 html 文件（不带空格）来测试这一点。看看这是否会被 Facebook 调试器解析。如果没有，那么你还有另一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T23:49:19.083

看起来您正在尝试将元标记放入您的`<body>`标记中。

[http://developers.facebook.com/tools/debug/og/echo?q=http%3A%2F%2Fwww.btselem.org%2Fhebrew%2F131606](http://developers.facebook.com/tools/debug/og/echo?q=http%3A%2F%2Fwww.btselem.org%2Fhebrew%2F131606)

```
<!DOCTYPE html>
<html>
<body>
<p>UBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</p>
<meta http-equiv="content-type" content="text/html; charset=utf-8"> 
```

这不是格式良好的 HTML。修复 HTML 问题，然后 Facebook 应该能够正确地对您的页面进行 lint。

# java - 我可以缩短演员表吗？

> ID：10870428
> 
> 赞同：3
> 
> 时间：2012-06-03T12:45:56.227
> 
> 标签：java, android, android-fragments

是否可以创建一个函数来缩短演员表，例如（伪代码）：

```
MyFragment fragment = (MyFragment) getFragmentManager().findFragmentByTag("mytag");
//shorten:
findByTag(MyFragment.class, "mytag");

private Fragment findByTag(Class<?> cast, String tag) {
    return (cast) getFragmentManager().findFragmentByTag(tag);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:49:06.170

修复您的代码如下：

```
private <F extends Fragment> F findByTag(Class<F> cast, String tag) {
    return (F) getFragmentManager().findFragmentByTag(tag);
} 
```

现在您可以在不强制转换的情况下调用它：

```
MyFragment f1 = findByTag(MyFragment.class, "aaaaa");
YourFragment f2 = findByTag(YourFragment.class, "bbbbb"); 
```

# android - 从后台启动活动后返回锁定屏幕

> ID：10870429
> 
> 赞同：0
> 
> 时间：2012-06-03T12:46:13.747
> 
> 标签：android

我有一个在后台运行的服务，它启动一个活动。如果键盘保护和锁定屏幕已打开，我在已启动活动的 onCreate 中使用以下标志将其显示在键盘保护和锁定屏幕上方

```
 getWindow().addFlags(
                   WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED |      
                   WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD | 
                   WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON
                ); 
```

但是，当活动被解除时，我希望它返回到锁定屏幕，而是返回到键盘保护。有人知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:11:25.823

你试过没有`FLAG_DISMISS_KEYGUARD`参数吗？

# android - osmdroid 离线 - ZIP 大小限制？

> ID：10870436
> 
> 赞同：0
> 
> 时间：2012-06-03T12:47:13.450
> 
> 标签：android, zip, osmdroid

你知道任何 ZIP 文件，供离线 osmdroid 使用，限制吗？我有带有地图的 23MB Zip 文件，但我无法找到，为什么我的地图没有显示？在这个 ZIP 文件中，我有 23000 个文件（ZIP 的限制是 65535），所以我在这里看不到任何问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:45:05.030

尝试对静态地图数据使用 GEMF 格式而不是 ZIP。该格式设计用于在 Android 等资源受限平台上进行高效解码。如果您使用的是 Mobile Atlas Creator，只需选择 GEMF 格式并像复制 zip 文件一样复制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:47:49.310

理论上，没有特定的限制，但文件系统的限制。但是打开一个大的 zip 文件来搜索磁贴既费时又费资源，并且在资源有限的小型设备中可能会导致 OutOfMemoryException。

当我解压缩文件并将所有图块重命名为 z/x/y.tile 时，速度至少提高了 10 倍！

我强烈建议不要使用 zip 文件。

# css - 在使用modernizr 时，混合技术是一种不好的做法，即支持或反对特定功能？

> ID：10870437
> 
> 赞同：1
> 
> 时间：2012-06-03T12:47:15.197
> 
> 标签：css, readability, modernizr, code-readability

我正在尝试modernizr。在同一个样式表中混合“针对/反对各种功能”是否可以，如果可以，是否有关于如何混合它们的一般规则？

例如，这是好的还是不好的做法。我只是想知道混合约定是否会造成混淆，以及通常坚持一种约定是否会更好，仅在必要时使用例外；或者以避免所有异常的方式进行编程是否重要。

```
 .no-borderradius .some-element {
    ...
    }

    .boxshadow .some-other-element {        
    ...
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:42:32.373

这实际上取决于具体情况，即您是否有样式依赖项。

例如，`#box`如果应用了边框半径，您需要一些填充，如果浏览器不支持它，您不需要任何填充。在这种情况下，您可以这样做：

```
.border-radius #box {
  border-radius: 5px;
  padding: 5px;
} 
```

*（忽略缺少供应商前缀。）*

但是，例如，如果你有一个微妙的渐变，它只是增强了外观并且没有任何依赖它，你可以这样做：

```
#box {
  background: white linear-gradient(...);
} 
```

支持它的浏览器会显示它，不支持它的浏览器只会显示退化的白色外观。

另一个例子，你想要一个不同的边框颜色，这取决于 box-shadow 是否成功应用。如果支持 box-shadow，您可以设置 box-shadowless 样式并覆盖它：

```
#box {
  border-color: gray;
}
.box-shadow #box {
  box-shadow: black 0 0 5px;
  border-color: white;
} 
```

你可以反过来做，但在我看来，先给出退化的风格，然后增强它更有意义。您会看到，在此示例中无需使用`.no-box-shadow`，因为无论如何我都覆盖了边框颜色。此外，如果您发现带有灰色边框的 box-shadow 在视觉上可以接受，您可以将 box-shadow 样式放在`#box`(而不是`.box-shadow #box`) 下。

总而言之，没有必要为了“一致”而将代码与类混杂在一起，您只需要考虑样式的语义即可。此外，如果您的样式过于依赖 JavaScript 生成的类，想象一下关闭 JavaScript 后您的页面会是什么样子。

# python - Google App Engine 重定向错误

> ID：10870440
> 
> 赞同：0
> 
> 时间：2012-06-03T12:47:29.330
> 
> 标签：python, google-app-engine

建立一种维基。在下面的函数中，我正在检查页面是否已经存在。如果不是，它应该重定向到编辑页面。但它会无限重定向，直到浏览器停止它。'_edit'handler 什么都不做...

```
def get(self, pageName):
        p = db.GqlQuery("SELECT * FROM Pages")
        pages = p.run(batch_size = 1000)
        pageExist = False
        for page in pages:
            if pageName ==  page.pagename:
                pageExist = True
                break
        if pageExist:
            self.render_wiki(pageName, page.content)
        else:
            self.redirect('/_edit' + pageName)

PAGE_RE = r'(/(?:[a-zA-Z0-9_-]+/?)*)'
app = webapp2.WSGIApplication([('/', MainPage), ('/signup', Signup) , ('/login', Login),('/logout', Logout), (PAGE_RE, WikiPage), ('/_edit' + PAGE_RE, EditWiki)],  debug = True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:22:35.593

尝试将您的 EditWiki 路线移动到 WikiPage 路线之前。PAGE_RE 匹配 _editMyPageName 所以在 EditWiki 开始之前抓住它。我会说对于每个重定向，您的页面名称只会在前面加上一个额外的“_edit”。

# c# - 如何使用路径列表创建层次结构？

> ID：10870443
> 
> 赞同：4
> 
> 时间：2012-06-03T12:48:01.757
> 
> 标签：c#, dropbox, dropbox-api

我正在使用 Dropbox 的 Delta API，当我调用 delta 方法时，我得到了自上次调用以来更改的路径列表。

```
/photos 
/public 
/photos/sample album 
/photos/sample album/boston city flow.jpg 
/photos/sample album/pensive parakeet.jpg 
/photos/sample album/costa rican frog.jpg 
/getting started.pdf 
/photos/how to use the photos folder.txt 
/public/how to use the public folder.txt 
/ies eai.pptx 
/documents 
/documents/windows phone toolkit in depth 2nd edition.pdf 
/prashant 
/prashant/iphone indexed list.bmml 
/photos/flower.jpg 
/photos/trs 
/photo.jpg 
/hello1 
/hello1/new 
```

我很难通过操纵字符串来创建分层（在下面提到的类中）结构，任何人都可以提出我可以实现它的方法/想法。

```
public class DeltaItem
{

    private List<DeltaItem> _items;
    public string Path { get; set; }
    public bool IsDir { get; set; }

    public List<DeltaItem> Items
    {
        get
        {
            return _items ?? (_items = new List<DeltaItem>());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T02:51:36.260

这是一个非常简单的解析操作。首先，我会这样定义类：

```
public class Node
{
    private readonly IDictionary<string, Node> _nodes = 
        new Dictionary<string, Node>();

    public string Path { get; set; }
} 
```

从那里开始，这是一个问题：

1.  解析路径（`\`用作分隔符）。
2.  遍历树，必要时添加新节点。

您可以将上述内容包装在一个方法中`Add`：

```
public void AddPath(string path)
{
   char[] charSeparators = new char[] {'\\'};

   // Parse into a sequence of parts.
   string[] parts = path.Split(charSeparators, 
       StringSplitOptions.RemoveEmptyEntries);

   // The current node.  Start with this.
   Node current = this;

   // Iterate through the parts.
   foreach (string part in parts)
   {
       // The child node.
       Node child;

       // Does the part exist in the current node?  If
       // not, then add.
       if (!current._nodes.TryGetValue(part, out child))
       {
           // Add the child.
           child = new Node {
               Path = part
           };

           // Add to the dictionary.
           current._nodes[part] = child;
       }

       // Set the current to the child.
       current = child;
   }
} 
```

这将为您提供所需的层次结构。您可以公开对字典起作用的操作，这将允许您遍历它，但这是您填充您将使用的一般结构的方式。

请注意，您将从一个没有的奇异节点开始`Path`，然后遍历上面的列表并调用上面`AddPath`列表中的每个项目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-11T08:01:54.520

@casperOne 解决方案很好，但只有在您使用时才能与问题中的列表一起使用

```
char[] charSeparators = new char[] {'/'}; 
```

而不是

```
char[] charSeparators = new char[] {'\\'}; 
```

# android - 如何在 Logcat 中增加行数（日志级别）

> ID：10870446
> 
> 赞同：5
> 
> 时间：2012-06-03T12:48:03.787
> 
> 标签：android, eclipse, debugging, logcat, android-logcat

> **可能重复：**
> [Java / Android - 如何打印出完整的堆栈跟踪？](https://stackoverflow.com/questions/7841232/java-android-how-to-print-out-a-full-stack-trace)

我正在开发一个安卓应用程序。有时它会停止工作并显示强制关闭错误。

当我查看 logcat 时，它显示 4 到 5 行，然后说 15 more/ 11 more。我无法到达发生该异常的行。有什么方法可以增加查看完整堆栈跟踪。

请帮助我被卡住了。谢谢。

如果我没有正确解释，请有人编辑问题。

编辑：问题的答案是

[Java / Android - 如何打印出完整的堆栈跟踪？](https://stackoverflow.com/questions/7841232/java-android-how-to-print-out-a-full-stack-trace)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T13:02:51.327

假设您使用的是 Windows/Eclipse ...

窗口 -> 首选项 -> Android -> LogCat -> 要缓冲的最大 logcat 消息数

将其设置为使其对您更有用的值。

# c# - OO 中的单元测试和访问修饰符

> ID：10870449
> 
> 赞同：3
> 
> 时间：2012-06-03T12:48:42.063
> 
> 标签：c#, c++, .net, unit-testing, nunit

我注意到，为了对我的 OO 代码中的每个单元进行单元测试，我需要将访问修饰符设置为 public，即使在应该受到保护的方法上，或者可能是私有的。这是好的做法吗？

```
public class EnforceBusinessRules
{
    BusinessState m_state;

    public EnforceBusinessRules()
    {
        m_state = START;
    }

    public bool isInputcurrentlyFormatted(string input)
    {
        //code goes here to ensure the input passes formatting test
        //modify m_state appropriately
    }

    public bool InputContainsValidStartAndEndTokens(string input)
    {
        //code goes here to ensure that the start and end tokens of the input are of the type available in the system
        //modify m_state appropriately
    }

    public bool StartEndCommandisValidAccordingtoCurrentSystemSettings(string input)
    {
        //code goes here to check the start and End codes match the current start and end codes for the day
        //modify m_state appropriately
    }

    // and so on 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T12:52:32.580

单元测试是“黑盒”测试。您应该只测试外部可见的元素。如果您测试所有内部工作，那么您将无法在不修改所有单元测试的情况下正确重构代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:00:19.707

如果您发现需要更改访问修饰符，因为您需要测试私有成员中的大量代码，这可能表明您的类太大。考虑将您想要测试的行为分解为具有您可以测试的公共接口的较小类。您的代码可能受到[上帝目标](http://en.wikipedia.org/wiki/God_object)代码气味的影响。

请记住，受保护成员与公共成员非常相似，只是可能的客户端空间要小得多（仅限派生类）。您可以考虑通过创建仅您的测试使用的派生对象来对这些方法进行单元测试。这样，您将以与客户使用它们相同的方式测试这些方法。

这是您可以修改代码的一种方法：

```
public class EnforceBusinessRules
{
    BusinessState m_state;

    public EnforceBusinessRules(IEnumerable<Rule> rules)
    {
        m_state = START;
    }

    public void Enforce(string input)
    {
        foreach (var rule in rules)
        {
            m_state = rule.EnforceRule(input);
        }
    }
}

public interface Rule
{
    public BusinessState EnforceRule(string input);
}

public class IsInputcurrentlyFormatted : Rule
{
    public BusinessState EnforceRule(string input)
    {
        //code goes here to ensure the input passes formatting test
    }
}

public class InputContainsValidStartAndEndTokens : Rule
{
    public BusinessState EnforceRule(string input)
    {
        //code goes here to ensure the input passes formatting test
    }
}

public class StartEndCommandisValidAccordingtoCurrentSystemSettings : Rule
{
    public BusinessState EnforceRule(string input)
    {
        //code goes here to ensure the input passes formatting test
    }
}

// and so on 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T07:49:38.147

如果您需要测试私有或受保护的属性或方法，那么您应该将功能提取到单独的类中。每个班级应该只做一件事（单一职责原则）。奇怪的是，您的私有方法在您的课程的主要目的上执行次要功能。

提取后，会发生两件好事：首先，您希望测试的代码现在可以通过单元测试完全访问。其次，您不必在 EnforceBusinessRules 类中担心它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T13:02:44.577

通常，向外界公开您不想公开的方法/类/属性/任何东西都是不好的做法。我们在我工作的地方遇到了类似的问题。我们编写了针对公共方法和属性的测试，因为这些公共方法在某些时候应该调用所有私有方法。如果您有内部类/属性/方法，您可以使用`InternalsVisableTo`单元测试库可访问的属性。

```
[assembly: InternalsVisibleTo("AssemblyB")] 
```

[http://msdn.microsoft.com/en-us/library/0tke9fxk.aspx](http://msdn.microsoft.com/en-us/library/0tke9fxk.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T13:04:54.497

听起来您未能创建 getter 和 setter 方法以便正确[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)您的私有数据。

单元测试应该通过 getter 和 setter 访问数据。

避免在类代码中实例化协作对象，而是[注入这些依赖项。](http://en.wikipedia.org/wiki/Dependency_injection)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-03T12:54:58.360

不。在我看来，你想错了。你可以在不公开事情的情况下推断事情。例如，可以通过函数返回来实现属性的值。

在受保护成员的情况下。问问你自己这意味着什么。这意味着派生类可以访问该成员。所以在测试中创建一个派生类型。

# python - 在 python 的列表中查找多个字符串的最佳方法是什么？

> ID：10870451
> 
> 赞同：1
> 
> 时间：2012-06-03T12:48:46.983
> 
> 标签：python

可以说我有以下列表：

> ['ab=2','bc=5','ab=1','cd=6','ab=7']

在此列表中查找单词“ab”的所有外观的最佳（有效）方法是什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T12:50:35.937

```
>>> mylist = ['ab=2','bc=5','ab=1','cd=6','ab=7']
>>> [i for i in mylist if 'ab' in i]
['ab=2', 'ab=1', 'ab=7'] 
```

用 对所有提出的解决方案进行计时`timeit`，表明这是最快的解决方案，大约是次优的 2 倍。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T12:51:18.590

好吧，如果`'ab'`总是在前面，这将是最有效的，除非数据总是像这样简单，在这种情况下，@fraxel 的解决方案将是最快的。

```
>>> data = ['ab=2','bc=5','ab=1','cd=6','ab=7']
>>> [x for x in data if x.startswith("ab")]
['ab=2', 'ab=1', 'ab=7'] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-03T12:52:27.930

你也可以使用过滤器：

```
mylist = ['ab=2','bc=5','ab=1','cd=6','ab=7']
filter(lambda s: 'ab' in s, mylist) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-03T13:34:36.600

如果只判断：有没有`ab`。你只能通过这个

```
>>>data = ['ab=2','bc=5','ab=1','cd=6','ab=7' ,'abc=1']
>>>[x for x in data if 'ab' in x]
>>>['ab=2', 'ab=1', 'ab=7', 'abc=1'] 
```

如果需要判断： 前面的字符串是否`char =` 相等`ab`。可以使用`partition method`

```
>>>[x for x in data if x.startswith('ab=')]
>>>['ab=2', 'ab=1', 'ab=7'] 
```

这是[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

# xml - 从 XML 文件中获取不带标签的行的内容

> ID：10870467
> 
> 赞同：0
> 
> 时间：2012-06-03T12:51:08.080
> 
> 标签：xml, f#

我的程序有一个xml文件作为输入，我只想取某一行的内容，没有xml标签。例如：

```
<string> xxx </string> 
```

我怎样才能只得到“xxx”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T13:03:00.593

正如评论中提到的，您不应该使用正则表达式来解析 XML，因为 .NET 有更好的库可以做到这一点。下面是一个使用`XDocument`LINQ to XML 类型的示例：

```
// Reference assemblies for LINQ to XML
#r "System.Xml.dll"
#r "System.Xml.Linq.dll"

open System.Xml.Linq

// Create document with your XML data
let doc = XDocument.Parse("<string> xxx </string>")
let el name = XName.Get(name)
// Get element named 'string' and pick its value
doc.Element(el "string").Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T14:34:05.910

```
#r "System.Xml.Linq.dll"

open System
open System.Linq
open System.Xml.Linq

let toXName s = XName.Get s

let xml = XDocument.Load @"data.xml"
let getElements elName = xml.Root.Descendants(toXName elName)

let main() = 
  (getElements "string").First().Value
  |> printfn "%s"
//  getElements "string" |> Seq.iter (fun x -> printfn "%s" x.Value)

do main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T13:01:30.353

如果您不使用嵌套标签，则可以使用以下内容（只需要获取第一组）：

```
<.*?>([^<]*)<.*?> 
```

但是如果你真的在你的 xml 中使用嵌套标签，你不能只通过正则表达式来获取值，它需要一个堆栈或某种列表来这样做。

# bash - bash中'bind'的用法是什么

> ID：10870468
> 
> 赞同：1
> 
> 时间：2012-06-03T12:51:08.957
> 
> 标签：bash, .bash-profile

我在一个`.bashrc`文件中发现了一些东西，比如：

```
bind '"\C-j": menu-complete'
bind 'set completion-ignore-case on' 
```

如果我删除'bind'，结果似乎没有什么不同，那么'bind'在这里的用途是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:56:55.780

`bind`用于[`readline`](http://www.gnu.org/software/readline/)图书馆。

如果您删除第一个，`Ctrl-j`将不会为您自动完成。
如果删除第二个，文件名的自动完成是区分大小写的。

* * *

您可以使用`help`命令查看`builtin`命令手册。

```
$ type bind
bind is a shell builtin

$ help bind
bind: bind [-lpvsPVS] [-m keymap] [-f filename] [-q name] [-u name] [-r keyseq] [-x keyseq:shell-command] [keyseq:readline-function or readline-command]
    Set Readline key bindings and variables.
    ...SKIPPED... 
```

# html - 使用 CSS 隐藏评论表单

> ID：10870471
> 
> 赞同：0
> 
> 时间：2012-06-03T12:51:27.647
> 
> 标签：html, css

我一直在尝试用 CSS 隐藏评论表单（一个 div），`display: none;`但它似乎没有隐藏。有问题的 div 使用 JavaScript 加载数据。有人可以帮助我并指出我实际上做错了什么吗？

它位于页面的最底部，即 HyperComments 表单。我试图将其应用于`display:none;`# `hc_root`div，但没有成功。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:01:51.723

表单位于 iframe 中。但是您可以通过以下`div`方式使用`id`“hypercomments_widge”隐藏：

```
#hypercomments_widget {
    display: none;
} 
```

（或者您可以使用 javascript 隐藏它。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T13:00:36.673

表单被加载到 iframe 中。

你必须要么

*   将您的 CSS 放入加载到该 iframe 的文档中
*   隐藏整个 iframe：`#hypercomments_widget { display: none; }`

# r - 在 facet_grid 中调整 One Line 的线型

> ID：10870475
> 
> 赞同：3
> 
> 时间：2012-06-03T12:51:45.360
> 
> 标签：r, ggplot2, facet

我有一个类似于这个的情节：

```
b <- data.frame(x=c(1,2,3,1,2,3,1,2,3,1,2,3),y=c(1,2,3,1.5,1.9,2.5,3,2,1,2.9,1.8,1.5),c=c("1","1","1","2","2","2","1","1","1","2","2","2"),f=c("b","b","b","b","b","b","a","a","a","a","a","a"))
ggplot(b,aes(x=x,y=y,color=c,group=c))+geom_line()+facet_grid(f ~ .) 
```

现在我只希望上面刻面“a”中的线“1”更粗更虚线。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T14:29:07.887

**关于ggplot2** ，您首先要了解的也是最重要的事情之一是，当您希望某些内容出现在您的绘图上时，您通常会在数据框中创建一个变量，该变量代表您希望显示的视觉信息.

在您的情况下，您需要一个仅从面板 a 第 1 行中挑选出那些观察结果的变量：

```
b$grp <- with(b,(f == "a") & (c == 1)) 
```

然后您可以同时映射`size`和`linetype`到这个变量，并手动调整比例：

```
library(scales)
ggplot(b,aes(x=x,y=y)) + 
    geom_line(aes(color=c,group=c,size = grp,linetype = grp)) + 
    facet_grid(f ~ .) + 
    scale_size_manual(values = c(0.5,1.2),guide = "none") + 
    scale_linetype_manual(values = c('solid','dashed'),guide = "none") 
```

# java - 在另一个 Web 应用程序中重用 DAO

> ID：10870476
> 
> 赞同：1
> 
> 时间：2012-06-03T12:51:57.037
> 
> 标签：java, spring, jpa, spring-mvc, persistence

我使用 Spring MVC 编写了一个网站，现在我想编写它的后端（即仪表板或 CMS），以便管理员对其进行管理。

由于我为前端编写了所有 DAO，因此我想在后端重用它们（因为 DB 表显然是相同的，所以前端和后端共享相同的持久性上下文）。

我的想法是将后端编码为一个新的 Web 应用程序，其中 DAO 和域对象从前端作为 jar 文件导出并导入到后端项目中。持久性由 JPA 和 Hibernate 管理，每个 DAO 类看起来像这样：

```
@Repository
public class UserDao {
    private EntityManager em;

    // ... Methods...

    @PersistenceContext
    void setEntityManager(EntityManager entityManager) {
        this.em = entityManager;
    }
} 
```

后端网站的持久化配置（即JPA + Hibernate + MySQL）与前端的持久化配置完全相同。我期待这个配置被注入到 JAR 文件中导入的 DAO 中，但这显然没有发生。每次我尝试使用任何 DAO 中的任何方法时，我都会收到类似于以下内容的异常：

> org.hibernate.hql.ast.QuerySyntaxException：UserJpa 未映射 [SELECT u FROM UserJpa u WHERE u.alias = :alias AND u.closed = false]

有没有办法解决这个问题？或者是否有更好的方法来实现我想要实现的目标（即使用相同的前端 DAO 对后端进行编码）？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:32:52.170

我想知道为什么不能将两个 UI 部署为单个应用程序，并为用户和管理员提供基于角色的访问权限。由于您已经在使用 Spring，因此 Spring Security 将是此处按角色限制对管理页面的访问的自然选择。为什么要重写后端？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:40:19.750

> UserJpa 未映射 [SELECT u FROM UserJpa u WHERE u.alias = :alias AND u.closed = false]

听起来您只是忘记将第一个应用程序的映射配置包含在第二个应用程序中。确保第二个应用程序中的 JPA 运行时具有关于`UserJpa`类的所有相同配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T16:32:10.643

你也需要导出实体类，因为休眠需要加载所有实体以使用数据库或排除新配置文件中的实体

关于 Spring Security 我推荐使用唯一的登录页面，但是不同的主页，我认为你可以通过 rol 设置不同的主页

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T16:43:40.077

您是使用 Hibernate 注释还是 XML 配置进行 OR 映射？在前一种情况下，Hibernate SessionFactory 上的 packagesToScan 属性看不到 UserJpa 类，可能是因为您没有加载您认为正在加载的 JAR。在后一种情况下，您缺少 hibernate.cfg.xml 或其等效项的导入。

# php - Android：通过php从网络服务器下载图像

> ID：10870480
> 
> 赞同：1
> 
> 时间：2012-06-03T12:52:29.253
> 
> 标签：php, android, image, download

我想从 android 应用程序下载图像。但是，在应用程序中，我不知道图像的名称。

在一个 php 脚本中，我选择了应用程序应该随机下载的图像文件，现在我有两个选项：

1.  我可以回显图像文件名，然后应用程序可以直接下载文件
2.  我可以回显整个图像数据

更好的方法是什么？如果是第一个，您能否链接到有关如何下载图像的好页面？我可以轻松上传图片，但互联网上有很多不同的图片下载方法，所以我不知道哪种方法最好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:03:55.030

它返回位图

```
public static Bitmap getImage(String url){
        Bitmap img = null ;
        try {
            URL feedImage = new URL(url);
            HttpURLConnection conn= (HttpURLConnection)feedImage.openConnection();
            InputStream is = conn.getInputStream();
            img = BitmapFactory.decodeStream(is);

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return img ;    
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:00:01.413

我这样做的方式是第一种方式，图像 URL 存储在数据库中，并通过 json 与其他数据一起检索，我使用下面的代码从 URL 获取图像。

```
public class ImageDownloader {

public static Bitmap downloadImage(String url) throws MalformedURLException{
    return downloadImage(new URL(url));
}

public static Bitmap downloadImage(URL url){
    Bitmap bmImg = null;
    try {
    HttpURLConnection conn= (HttpURLConnection)url.openConnection();
    conn.setDoInput(true);
    conn.connect();
    InputStream is = conn.getInputStream();

    bmImg = BitmapFactory.decodeStream(is);
    } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    return null;
    }

    return bmImg;
 }  
} 
```

# objective-c - if 语句出现损坏

> ID：10870487
> 
> 赞同：1
> 
> 时间：2012-06-03T12:53:39.143
> 
> 标签：objective-c, logic

有问题，这段代码

```
if ([g count] >= 1) {
     NSLog(@"%@", [g objectAtIndex:1]);
} 
```

不断产生这个错误

```
reason: '*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]' 
```

除非我快疯了，否则这不应该发生，对吧？

此时代码不是多线程的，我正在处理一个简单的数组。如果我对 g.count 进行 NSLog 记录，我得到的值为 1。

编辑：我也试过

```
if ([g count] > 0) {
     NSLog(@"%@", [g objectAtIndex:1]);
} 
```

并得到同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T12:56:37.173

当`count`为 1 时，表示可以使用索引零。的索引`1`无效。

通常，只有从 0 到 （含）的索引`count-1`是有效的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T12:56:53.507

如果数组的计数 == 1 那么它只有索引 0 对吗？

正确的代码是

```
if ([g count] >= 2) {
     NSLog(@"%@", [g objectAtIndex:1]);
} 
```

或者

```
if ([g count] >= 1) {
     NSLog(@"%@", [g objectAtIndex:0]);
} 
```

取决于你需要什么索引。

# iphone - SQLite iPhone SQL Select 使应用程序崩溃

> ID：10870488
> 
> 赞同：1
> 
> 时间：2012-06-03T12:54:03.203
> 
> 标签：iphone, sqlite, select

出于某种原因，我的应用程序在 "NSAssert1(0, @"Error while looping search view.'%s'", sqlite3_errmsg(database));"处失败 SQL 语句是可以的，因为我在打开数据库时使用了相同的语句。我没有得到任何有用的错误:-(

我对此很陌生，但不是一个完全陌生的人我做错了什么？

请注意，我已取出“strSearch”以确保这不是错误。

```
- (void)searchComponents:(NSString *)strSearch {

    NSString *qry;

    qry = [NSString stringWithFormat:@"SELECT ID, ON_SAP, SAP_PART, SAP_DESC, MOQ FROM HONEYWELL WHERE SAP_PART LIKE '%ZX%' ORDER BY SAP_PART", strSearch];
    NSLog(@"query : %@", qry);

    if(searchStmt == nil) {
        if(sqlite3_prepare_v2(database, [qry UTF8String] , -1, &searchStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating search view statement. '%s'", sqlite3_errmsg(database));
    }

    // Loop through the results

    if(sqlite3_step(searchStmt) == SQLITE_ROW) {
        // Read the data from the result row
        NSLog(@"New row selected");
    }
    else {
        NSAssert1(0, @"Error while looping search view. '%s'", sqlite3_errmsg(database));
    }

    // Release the compiled statement from memory
    sqlite3_finalize(searchStmt);

    // Set isDetailViewHydrated as YES, so we do not get it again from the database.
    isDetailViewHydrated = YES;
} 
```

该方法在它自己的类（名为 Coffee）中，从 MasterViewController 调用

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {
    NSLog(@"Text changed %@",searchText); 
    Coffee *coffeObj = [[Coffee alloc] init];
    [coffeObj searchComponents:@"%ZX%"];
} 
```

这个想法是在从搜索字段搜索时更改选择语句。有没有人知道这样做的好例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:47:32.577

问题已解决，我错过了重置

```
sqlite3_reset(searchStmt); 
```

# php - 数组有什么不好？

> ID：10870493
> 
> 赞同：-1
> 
> 时间：2012-06-03T12:54:37.580
> 
> 标签：php, arrays, function

**为什么这段代码不起作用？** `echo get('option_1')`返回空值。

```
$settings= array(
    'option_1' => 'text'
);

function get($name)
{
    if ($name)
        return $settings[$name];
}

echo get('option_1'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T12:58:01.223

简单的解决方案是在`$options`里面做一个全局变量`get()`：

```
function get($name)
{
    global $options;
    if ($name)
        return $options[$name];
} 
```

如果您不喜欢全局状态，请将其`$options`作为参数`get()`（但它只是语法糖......）：

```
function get($name, $options)
{
    if ($name)
        return $options[$name];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T12:59:02.273

因为 $options 超出了 get 函数的范围。您要么必须：

1.  将 $options 与 $name 作为函数参数一起传递
2.  将 $options 声明为全局变量（非常糟糕的主意）
3.  使用 $options 作为内部类变量并使用 $this->options 访问它（仅适用于类内部）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T12:57:54.343

`$options`不在您的功能范围内`get`。

面向对象的解决方案：

```
class Options
{
  private static $options = array(
    'option_1' => 'text',
  );

  public static function get($name)
  {
    return isset(self::$options[$name]) ? self::$options[$name] : null;
  }
}

echo Options::get('option_1'); 
```

# objective-c - 为什么在 Objective-C 中，不会像在其他语言中那样看到浮点错误？

> ID：10870501
> 
> 赞同：0
> 
> 时间：2012-06-03T12:56:08.593
> 
> 标签：objective-c

在 Ruby 或 Python 中，在某些情况下`2.0`会打印为`1.99999999999`（或类似的东西）。据说是浮点数不准确。

在 Objective-C 中，到目前为止我还没有看到它发生...... Objective-C 处理浮点错误是否更好？

原因是，如果我们有这样的电话：

```
CGContextRef context = CGBitmapContextCreate(NULL, 
                           size.width * scaleFactor, size.height * scaleFactor, 
                           8, size.width * scaleFactor * 4, colorSpace, 
                           kCGImageAlphaPremultipliedFirst); 
```

and`scaleFactor`是浮点数或双精度数（通常具有`1.0`or的值），那么如果在转换为整数后`2.0`出现任何浮点错误，则可能是一个问题。如果它是 bitmapContext 的大小，则问题不大，因为少 1 个像素宽不是什么大问题，但如果它是数据缓冲区的大小，提供给，那么 的大小，如果转换为，则这可能是一个问题，因为它可能导致错误的内存访问（分段错误或数据污染）。`1536.0``1535``malloc``123456.0``123455`

# java - 为什么这段代码会死锁？

> ID：10870503
> 
> 赞同：-2
> 
> 时间：2012-06-03T12:56:17.120
> 
> 标签：java, multithreading, locking

我需要一些关于死锁的帮助。我只是不明白为什么我的代码在这里死锁。

我尝试了不同的场景。

但是我仍然找不到问题的原因和位置。通常它应该可以工作，我找不到死锁在`debuter`和之间的位置`termine`。

```
 public class Interblocking {
           protected object obj = object();
           private boolean condition = true;

           public synchronized void debuter() {
               synchronized(obj) {
                   while (!condition) {
                       try {
                           obj.wait();
                       } catch (InterruptedExeption ie) {}
                   }
                   condition = false;
               }
           }

           public synchronized void terminer() {
               synchronized(obj) {
                   condition = true;
                   obj.notifyAll();
               }
           }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:52:24.027

## 编辑（新答案）

方法`wait()`不会释放当前线程的所有锁。

所以当一个线程调用`debuter`它时，它只释放`obj`锁但持有`this`锁，所以其他线程不能调用`terminer`方法。

这是示例：

```
class WaitReleaseTest implements Runnable {
    Object lockA, lockB;
    public WaitReleaseTest(Object lockA, Object lockB) {
        this.lockA = lockA;
        this.lockB = lockB;
    }

    public void run() {
        System.out.println(Thread.currentThread().getName()
                + " attempting to acquire lockA");
        synchronized (lockA) {
            System.out.println(Thread.currentThread().getName()
                    + " attempting to acquire lockB");
            synchronized (lockB) {
                System.out.println(Thread.currentThread().getName()
                        + " holds lockA = " + Thread.holdsLock(lockA));
                System.out.println(Thread.currentThread().getName()
                        + " holds lockB = " + Thread.holdsLock(lockB));
                try {
                    lockB.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    public static void main(String[] args) throws InterruptedException {
        Object o1=new Object();
        Object o2=new Object();
        new Thread(new WaitReleaseTest(o1,o2)).start();
        TimeUnit.MILLISECONDS.sleep(500);
        new Thread(new WaitReleaseTest(o1,o2)).start();
    }
} 
```

输出

```
Thread-0 attempting to acquire lockA
Thread-0 attempting to acquire lockB
Thread-0 holds lockA = true
Thread-0 holds lockB = true
Thread-1 attempting to acquire lockA
... now it waits 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:47:29.380

我猜您的代码与您的代码能够执行的操作完全不同。

您可能希望进入**debuter**的线程等到**条件**为真；

基本问题是方法上的**同步**关键字。他们确保只有线程在您的**Interblocking实例的任何方法中**

删除方法上的**同步**。

下一个问题是**条件**。未定义在调用终止程序后线程如何释放

**你在第二次调用中遇到**了死锁，因为在第一次调用之后**条件**为**false**。并且没有办法**执行终止程序，因为在****debuter**阻塞中有一个线程

使用多个级别的阻塞对象（在本例中为 object 和 this）总是会导致死锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T15:09:35.310

该代码不包含死锁条件。当资源图中存在循环时，就会发生死锁。您只有一个资源 (obj)，因此资源图由单个节点组成，不能包含循环。

虽然`debuter`可以等待`condition`，`terminer`但从不等待很长时间。

# sql-server - 双重选择语句问题，返回多行，子查询返回超过 1 个值

> ID：10870513
> 
> 赞同：3
> 
> 时间：2012-06-03T12:57:20.567
> 
> 标签：sql-server, select, subquery

好的，到这里，我有 3 张桌子：

```
accounts             ( account_id,      employee_id, account_name )
projects             ( project_id,      project_name )
project_distribution ( distribution_id, employee_id, project_id ) 
```

如果我有 project_distribution 表中的项目 ID，我想要做的是从项目表中返回项目名称。所以，假设我有 employee_id，我将进入 project_distribution 并进行选择，我得到 2 个值对于 project_id ，id 1 和 2，我如何在不执行 2 个查询或语句或如何正确调用它们的情况下返回这两个 ID 的 project_names，这是我的错误选择语句。

```
SELECT project_name
FROM   projects
WHERE  project_id = ( SELECT project_id
                      FROM   project_distribution
                      WHERE  employee_id = ( SELECT employee_id
                                             FROM accounts
                                             WHERE account_name = 'tbogdan'
                                            )
                    ); 
```

oufcorse 我将从 project_distribution 中获得 2 个值，并且出现“子查询返回超过 1 个值”错误我该如何解决这个问题并让它工作？如果需要更多信息，请询问...抱歉描述模糊...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:04:34.300

尝试这样的事情......

```
SELECT projects.project_name 
FROM projects
INNER JOIN project_distribution ON (projects.project_id = project_distribution.project_id)
INNER JOIN accounts ON (project_distribution.employee_id = accounts.employee_id)
WHERE accounts.employee_id = 'tbogdan' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:10:36.637

在 project_distribution 子查询中使用 IN 关键字而不是 equals。

```
SELECT project_name
FROM   projects
WHERE  project_id = ( SELECT project_id
                      FROM   project_distribution
                      WHERE  employee_id IN ( SELECT employee_id
                                             FROM accounts
                                             WHERE account_name = 'tbogdan'
                                            )
                    ); 
```

您可以通过手动输入您希望从子查询返回的值来测试没有子查询的查询：

```
SELECT project_name
FROM   projects
WHERE  project_id IN (1,2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T13:04:36.387

```
SELECT projects.project_name
FROM   projects
INNER JOIN project_distribution distrib
    ON projects.project_id = distrib.project_id
INNER JOIN accounts
    ON distrib.employee_id = accounts.employee_id
WHERE accounts.account_name = 'tbogdan'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T13:51:29.140

EXISTS 也是一种可能性：

```
SELECT pr.project_name
FROM   projects pr
WHERE  EXISTS (
    SELECT * 
    FROM project_distribution pd
    JOIN accounts ac ON ac.employee_id = pd.employee_id
    WHERE ac.account_name = 'tbogdan'
    ); 
```

存在的好处是*内部*相关名称 (pd,ac) 不会暴露给主查询。

# objective-c - 当 Apple 文档提到包含 ARC 属性的正确位置时，它是什么意思？

> ID：10870524
> 
> 赞同：2
> 
> 时间：2012-06-03T12:58:24.677
> 
> 标签：objective-c, c, automatic-ref-counting, declaration, cdecl

在转换（没有双关语）以澄清何时在变量声明中使用时，我在[Transitioning to ARC Release Notes](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)`__strong`中遇到了这些行：

> 你应该正确地装饰变量。在对象变量声明中使用限定符时，正确的格式是：
> 
> ```
>  ClassName * qualifier variableName; 
> ```
> 
> 例如：
> 
> ```
>  MyClass * __weak myWeakReference;    
>   MyClass * __unsafe_unretained myUnsafeReference; 
> ```
> 
> 其他变体在技术上是不正确的，但被编译器“原谅”了。要了解该问题，请参阅[http://cdecl.org/](http://cdecl.org/)。

我怀疑这是苹果公司的某种玩笑，但我想我不明白。这显然没关系，但我想把它做好。正确“装饰”变量声明的重要性是什么，cdecl.org 试图说明什么？

编辑：澄清一下，我想准确理解为什么写作

```
qualifier ClassName * variableName; 
```

是“技术上不正确的”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:42:21.957

所以我想我有一个答案，但我不能确定我是否正确。随意提供一个更好的，或者如果你认为我已经完成了评论/赞成。

CDecl 是一个 C 程序，您可以从同一网站下载。它的存在是为了解决诸如[this question](https://stackoverflow.com/questions/4123006/how-to-understand-this-define)之类的问题。

C 中的变量声明可能非常臭名昭著，尤其是在考虑到 typedef 时。[在 Unixwiz.net 上](http://www.unixwiz.net/techtips/reading-cdecl.html)有一个很好的介绍。你会发现有一个有用的介绍，甚至可以让你阅读像`char *(*(**foo [][8])())[];`( `foo is array of array of 8 pointer to pointer to function returning pointer to array of pointer to char`) 这样的怪物。

这些规则实际上是接近。考虑一个简单的例子

```
const int * foo 
```

这将 foo 声明为指向常量 int 的指针。然而，

```
int * const foo 
```

将 foo 声明为指向 int 的常量指针。[在这个问题中](https://stackoverflow.com/questions/1143262/what-is-the-difference-between-const-int-const-int-const-int-const)彻底讨论了细微的差异。（本质上，在第一个示例中，您可以使 foo 指向另一个常量 int，但不能通过 foo 修改常量 int；在第二个示例中，您可以修改 foo 指向的 int，但您不能使 foo 指向任何内存中的其他位置）。

有了这些 ARC 属性，使用的语法

```
__strong NSString * myString 
```

将 myView 声明为指向“强”UIView 的指针。这是荒谬的。在 ARC 下，只有指向对象的指针才能具有强（或弱或其他）的属性。所以写是个好习惯

```
NSString * __strong myString 
```

因为这与其他 C 关键字一致。

我确实问过自己：如果你声明一个强对象指针指向一个弱对象指针，比如一个 NSString，在 ARC 下会发生什么，就像这样

```
NSString * __weak * __strong myContrivedPointer; 
```

但同样适用。只有一个对象指针才能有这些关键字。因此，声明指向“strong”指针的指针是没有意义的。

# vim - Vim：替换所有点，但一行中的最后一个

> ID：10870527
> 
> 赞同：7
> 
> 时间：2012-06-03T12:58:48.163
> 
> 标签：vim

我正在寻找一种方法来替换除最后一个以外的所有点。

例子：

`Blah - whatever - foo.bar.baz.avi`应该成为
`Blah - whatever - foo bar bar.avi`

由于我将在文件中有不止一行，并且每一行中的点数各不相同，我正在寻找一个通用的解决方案，而不是像“替换第一个 X 匹配项”这样的东西，其中 X 是一个常数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T13:05:48.357

这似乎可以解决问题：

```
%s/\.\(.*\.\)\@=/ /g 
```

`\@=`是[前瞻](http://www.regular-expressions.info/lookaround.html)。如果有任何后续句号，它仅匹配句号。

见`:help zero-width`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T15:59:27.563

作为第一个答案的变体，您可能更喜欢这种语法：

```
%s/\.\ze.*\./ /g 
```

它让您断言在搜索运算符之后有一个句号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T08:16:37.260

另一种可能对学习有用的方法（替换内部视觉选择）是：使用,输入 where 。
`:g/^/normal $F.hv0:s/\%V\./ /g`**`^M`**
`^M``CTRL-V``Enter`

这意味着：对于每一行 ( `g/^/`) 类型`$F.`（转到最后一个点），从字符向左视觉选择直到行首 (`hv0`​​ )，然后`:s/\./ /g^M`仅在视觉选择 ( ) 内替换点 ( `\%V`)。

# magento - magento - 将产品默认图片更新为图片库中的第一张图片

> ID：10870530
> 
> 赞同：2
> 
> 时间：2012-06-03T12:59:17.360
> 
> 标签：magento, php, mage

我有一个导入脚本，可以导入超过 2000 多种产品，包括它们的图像。我通过 CLI 运行此脚本，因为我觉得这是提高速度的最佳方式，即使我在 magento 管理员中拥有相同的导入脚本可用和可执行作为扩展。脚本运行得很好。几乎完美！但是，有时会出现`addToImageGallery`某种故障并导致某些图像具有`No Image`默认产品图像，而唯一的其他图像根本没有被选为默认值。如何批量更新所有产品以将产品媒体库中的第一张图片设置为默认的“基本”、“图片”和“缩略图”图片？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T12:59:17.500

我在这个链接上发现了一些关于这样做（以及更多）的技巧：

[http://www.magentocommerce.com/boards/viewthread/59440/](http://www.magentocommerce.com/boards/viewthread/59440/)（感谢transio！）

虽然，对于 Magento 1.6.2.0（我使用），那里的第一个 SQL 技巧（*技巧 1 - 自动设置默认基础、拇指、小图像到第一个图像。*）需要一些修改。

在倒数第二行有一个`AND ev.attribute_id IN (70, 71, 72)`部分。这应该指向在 Magento 1.6.2.0 中可能不再相关的属性 ID。为了解决这个问题，我使用任何 MySQL 查询工具（PHPMyAdmin 或 MySQL 查询浏览器）查看了该`catalog_product_entity_varchar`表。应该有类似的条目：

```
value_id, entity_type_id, attribute_id, store_id, entity_id, value
..
146649, 4, 116, 0, 1, '2'
146650, 4, 76, 0, 1, ''
146651, 4, 78, 0, 1, ''
146652, 4, 79, 0, 1, '/B/0/B05-01.jpg'
146653, 4, 80, 0, 1, '/B/0/B05-01.jpg'
146654, 4, 81, 0, 1, '/B/0/B05-01.jpg'
146655, 4, 96, 0, 1, ''
146656, 4, 100, 0, 1, ''
146657, 4, 102, 0, 1, 'container2'
.. 
```

我的钱花在了三个图像路径的组上，作为可能的替代品。所以现在生成的 SQL 应该是：

```
UPDATE catalog_product_entity_media_gallery AS mg,
    catalog_product_entity_media_gallery_value AS mgv,
    catalog_product_entity_varchar AS ev
SET ev.value = mg.value
WHERE  mg.value_id = mgv.value_id
    AND mg.entity_id = ev.entity_id
    AND ev.attribute_id IN (79, 80, 81) # <-- attribute IDs updated here
    AND mgv.position = 1; 
```

所以我致力于它，运行它，然后.. presto！都修好了！如果需要，您可能还希望将其封装在事务中。但这超出了这个问题的范围。

好吧，这是迄今为止对我有用的修复程序！如果还有更多的，请分享！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:52:00.733

有：

> 146652, 4, 79, 0, 1, '/B/0/B05-01.jpg'
> 146653, 4, 80, 0, 1, '/B/0/B05-01.jpg'
> 146654, 4, 81, 0, 1, '/B/0/B05-01.jpg'

所以应该是：

> AND ev.attribute_id IN (79, 80, 81) # <-- 此处更新的属性 ID

代替：

> AND ev.attribute_id IN (78, 80, 81) # <-- 此处更新的属性 ID

正在寻找类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-03T12:00:12.503

```
UPDATE catalog_product_entity_media_gallery AS mg,
    catalog_product_entity_media_gallery_value AS mgv,
    catalog_product_entity_varchar AS ev
SET ev.value = mg.value
WHERE  mg.value_id = mgv.value_id
    AND mg.entity_id = ev.entity_id
    AND ev.attribute_id IN (79, 80, 81) # <-- attribute IDs updated here
    AND mgv.position = 1; 
```

# c# - 如何在 C# 控制台应用程序中输出 Windows Alt 键码

> ID：10870533
> 
> 赞同：2
> 
> 时间：2012-06-03T12:59:24.653
> 
> 标签：c#, key, alt, console.writeline

如何使用 Console.WriteLine() 将 Windows Alt 键代码输出到 C# 控制台应用程序中的控制台？

我想输出用于创建框的字符。我可以在命令提示符下手动执行此操作，方法是按住 alt 并输入适当的数字，例如 Alt+205、Alt+187 等。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:08:10.197

我想最简单的方法是将它们直接包含在源代码中的字符串文字中：

```
Console.WriteLine("═╗"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T13:10:39.003

编辑：对不起-我的回答不正确。ASCII.GetChars 不适用于扩展的 ASCII 字符。感谢道格拉斯纠正我。

* * *

我认为道格拉斯的回答是最直接的，但您也可以直接使用以下方法根据值获取角色：

> char[] 字符 = System.Text.Encoding.ASCII.GetChars(new byte[] {65});

对于您想要的任何 ASCII 代码。

# mysql - 将两列连接到同一第三列

> ID：10870536
> 
> 赞同：1
> 
> 时间：2012-06-03T12:59:41.363
> 
> 标签：mysql, join

对不起，如果这篇文章的标题有点混乱。我的问题很简单，我知道解决方案与加入有关，但我无法准确找出相关的帖子。

我在 MySQL 中整理了一个课程表，这些课程有先决条件。为了做到这一点，我有 1 个表，其中包含所有可用的类 (ClassName)，当然还有一个主 ID (Class_ID)。然后我有另一个本学期提供的课程表，使用“可用课程”表中的信息构建。该表以一个唯一的 id (ClassSemester_ID)、Class_ID 和一个 Prerec_ID 开始，用于类的先决条件。Prerec_ID 实际上是不同类的 Class_ID。

这意味着在实际计划中，我需要将 ClassName 列与 Class_ID 和 Prerec_ID 匹配。更直观：

表 1：AllClasses Col1：Class_ID Col2：ClassName

表 2：SemesterClasses Col1：ClassSemester_ID Col2：Class_ID Col3：Prerec_ID

如何构造一个查询，该查询将同时输出 Class_ID 和 Prerec_ID 并显示其关联的 ClassName？

提前谢谢各位！

-CB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:18:42.447

我相信它会更有效率

```
select SemesterClasses.Class_ID, AllClasses.ClassName, PreRequisite.ClassName as PreRequisiteName
from SemesterClasses
left join AllClasses on AllClasses.Class_ID = SemesterClasses.Class_ID
left join AllClasses as PreRequisite on PreRequisite.Class_ID = SemesterClasses.Prerec_ID 
```

应返回所有 SemesterClasses 行以及类 id、名称和先决条件名称。还可以在当年的学期课程中添加列，并在哪里应用过滤器。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:25:05.013

通常你会使用带有别名的同一张表——像这样；

```
select a.className, b.className
from Classes a, Classes b, mytable
where prereq_id = a.class_id
and sem.class_id = b.class_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T13:06:15.973

您想要类及其必备类的类名吗？

```
select Classes.Class_ID, Classes.ClassName, Sem.Prerec_ID, Prereq.ClassName from
AllClasses as Classes inner join
SemesterClasses as Sem on Classes.Class_ID = Sem.Class_ID inner join
AllClasses as Prereq on Prereq.Class_ID = Sem.Prerec_ID 
```

# sql-server-2008 - 在哪里下载 AdventureWorks2008.msi？

> ID：10870537
> 
> 赞同：7
> 
> 时间：2012-06-03T12:59:56.533
> 
> 标签：sql-server-2008, adventureworks

我想安装**AdventureWorks2008**（我只安装 SQL Server 2008 R2 Express）。

每次我从 CodePlex 下载推荐的版本时，我得到的只是一个`AdventureWorks2008.mdf`文件。我不仅无法从 SQL Server Management Studio 附加文件，而且无法将文件直接复制/粘贴到数据库中。

我已经阅读了几个我需要使用的地方`AdventureWorks2008.msi`，但我找不到在哪里下载它。

我只是不知道如何安装 AdventureWorks2008

感谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T13:11:37.417

Adventureworks 没有 .msi 文件，尽管您会在过时的文档和书籍中找到它。发现这种困惑的不止您一个人——似乎每次我需要安装这些数据库时，Microsoft 为安装这些数据库提供的网站、文件和步骤都会发生变化。

您需要创建数据库并附加 .mdf 文件，即说明中提到的“数据文件”。*（.mdf = 主要数据文件，.ldf = 日志文件，.ndf = 辅助数据文件）*

为了附加文件，您需要确保仔细按照以下步骤操作：http: [//social.technet.microsoft.com/wiki/contents/articles/3735.sql-server-samples-readme-en-us .aspx#Readme_for_Adventure_Works_Sample_Databases](http://social.technet.microsoft.com/wiki/contents/articles/3735.sql-server-samples-readme-en-us.aspx#Readme_for_Adventure_Works_Sample_Databases)

2008R2 的说明：

> 安装 AdventureWorks2008R2 OLTP 数据库
> 
> 1.  下载 AdventureWorks2008R2 数据文件。
>     
>     
> 2.  从文件下载中，单击保存并浏览到本地服务器上的某个位置。
>     
>     
> 3.  在 SQL Server Management Studio 中，执行以下代码：
>     
>     
> 
> 不区分大小写的数据库

```
CREATE DATABASE AdventureWorks2008R2 
ON (FILENAME = '{drive}:\{file path}\AdventureWorks2008R2_Data.mdf') 
FOR ATTACH_REBUILD_LOG; 
```

> 作为步骤 3 的替代方法，您可以使用 SQL Server Management Studio 用户界面附加数据库。有关更多详细信息，请参阅[附加数据库 (SQL Server Management Studio)](http://msdn.microsoft.com/en-us/library/ms190209.aspx)。
> 
> 注意：您必须从要附加的文件列表中删除日志文件。这将导致操作重建日志。

**来自 Aaron Bertrand 的头痛节省提示：**

> 您应该将 mdf 文件放在您的普通数据文件夹中 - SQL Server 已经拥有适当的权限。您可以使用获取此路径

`SELECT TOP (1) physical_name FROM master.sys.database_files;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T03:20:57.550

您可以直接将该文件粘贴到您的数据库目录中。有关更多信息，您可以参考[http://tryingmicrosoft.com/error-while-attaching-a-database-to-sql-server-2008-r2/](http://tryingmicrosoft.com/error-while-attaching-a-database-to-sql-server-2008-r2/)。

# apache - Apache 接受所有指向服务器的网站

> ID：10870538
> 
> 赞同：1
> 
> 时间：2012-06-03T12:59:59.237
> 
> 标签：apache, virtualhost, httpd.conf

我只有两个网站指向我的服务器 IP，`Asite.com`并且`Bsite.com`. 我尝试添加一个网站，所以我指向`Csite.com`了我的服务器 IP（但我还没有为 site3.com 注册虚拟主机）。即使我没有注册虚拟主机，当我访问`Csite.com`apache时怎么会识别它？`Asite.com``Csite.com`

**httpd.conf**

```
Listen 8080
NameVirtualHost *:8080 
```

**网站**

```
<VirtualHost *:8080>
        ServerAdmin webmaster@localhost
        ServerName asite.com
        ServerAlias asite.com *.asite.com
        DocumentRoot /var/www/asite.com/public
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/asite.com/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>
        ErrorLog /var/log/httpd/error_log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn
</VirtualHost> 
```

^同样适用于**Bsite.com**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:19:41.010

当它没有 ServerName 匹配时，它使用第一个列出的。您会发现您还可以使用原始 IP 地址访问 Asite.com。

如果您对此感到不舒服，您可以创建一个不同的虚拟主机作为列出的第一个虚拟主机`<VirtualHost *:8080>`，并配置它只是重定向到其他地方。或者给出 404 消息等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:21:47.573

第一个虚拟主机也是默认的：

“星号匹配所有地址，因此主服务器不提供任何请求。由于 www.example1.com 在配置文件中位于第一位，因此它具有最高优先级，可以视为默认或主服务器。这意味着如果收到的请求与指定的 ServerName 指令之一不匹配，它将由第一个 VirtualHost 提供服务。”

请参阅“在单个 IP 地址上运行多个基于名称的网站”。[http://httpd.apache.org/docs/2.0/vhosts/examples.html](http://httpd.apache.org/docs/2.0/vhosts/examples.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T00:35:55.753

发生这种情况是因为您将 csite.com 指向您的本地主机，并且第一个虚拟主机被识别为本地主机，因此如果您切换 siteA 和 siteB，那么它肯定是虚拟主机 b 首先并在浏览器中键入“localhost”或 sitec.com 它将显示 siteb.com

不用担心; 这不是问题。它应该发生。

您实际上并未将 sitec.com 指向 localhost，但如果您在主机文件中创建它，我们将其指向您的域，它将带您到第一个指定的文件！

# android - 按钮不能居中

> ID：10870540
> 
> 赞同：0
> 
> 时间：2012-06-03T13:00:01.910
> 
> 标签：android, android-layout

我有登录屏幕，我想将按钮居中，所以我使用了 `android:layout_centerHorizontal="true"`

布局xml是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerHorizontal="true"
    android:background="#DDDDDD"
    android:gravity="center_vertical|center_horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:background="@drawable/loginlayoutborders"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            gra=""
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/tv_url"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="URL:             "
                android:textColor="#444444"
                android:textSize="10pt" />

            <EditText
                android:id="@+id/et_url"
                android:layout_width="400dip"
                android:layout_height="50dip"
                android:layout_toRightOf="@id/tv_url"
                android:background="@android:drawable/editbox_background" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            gra=""
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/tv_un"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="User Name:"
                android:textColor="#444444"
                android:textSize="10pt" />

            <EditText
                android:id="@+id/et_un"
                android:layout_width="400dip"
                android:layout_height="50dip"
                android:layout_alignTop="@id/tv_un"
                android:layout_toRightOf="@id/tv_un"
                android:background="@android:drawable/editbox_background" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/tv_pw"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/tv_un"
                android:text="Password:"
                android:textColor="#444444"
                android:textSize="10pt" />

            <EditText
                android:id="@+id/et_pw"
                android:layout_width="400dip"
                android:layout_height="50dip"
                android:layout_alignTop="@id/tv_pw"
                android:layout_below="@id/et_un"
                android:layout_marginLeft="17dip"
                android:layout_toRightOf="@id/tv_pw"
                android:background="@android:drawable/editbox_background"
                android:password="true" />
        </LinearLayout>

        <Button
            android:id="@+id/btn_login"
            android:layout_width="100dip"
            android:layout_height="wrap_content"
            android:layout_below="@id/et_pw"
            android:layout_centerHorizontal="true"
            android:text="Login" />

        <TextView
            android:id="@+id/tv_error"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_below="@id/btn_login"
            android:layout_marginLeft="15dip"
            android:layout_marginRight="9dip"
            android:layout_marginTop="15dip"
            android:text=""
            android:textColor="#AA0000"
            android:textSize="7pt" />
    </LinearLayout>

</RelativeLayout> 
```

样式文件是

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item>

    <shape>

        <gradient
            android:angle="90"
            android:startColor="#FFFFFF"
            android:endColor="#FFFFFF"
            android:type="linear" />

        <padding android:left="50dp" android:top="50dp" 
            android:right="50dp" android:bottom="50dp" /> 

        <corners android:radius="4dp" /> 

    </shape>

</item>

</selector> 
```

但按钮总是在屏幕的左边，知道如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:02:06.530

添加`android:layout_gravity`到按钮的中心

```
 <Button
            android:layout_gravity="center"
            android:id="@+id/btn_login"
            android:layout_width="100dip"
            android:layout_height="wrap_content"
            android:layout_below="@id/et_pw"
            android:layout_centerHorizontal="true"
            android:text="Login" />
 </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:02:59.120

那是因为您的按钮位于 LinearLayout 内。无论如何，在 RelativeLayout 中有一个 LinearLayout，因为唯一的孩子并没有真正的意义。

如果会建议在没有 LinearLayouts 的情况下构建完整的布局。

# database - 实体关系 - 数据库设计

> ID：10870542
> 
> 赞同：1
> 
> 时间：2012-06-03T13:00:05.613
> 
> 标签：database, entity, specialization

我正在尝试为培训师和客户数据库考虑最佳设计。

我最初的想法是这样的：

1.  `person`具有客户和培训师共同属性（姓名、出生日期等）的实体。一个客户只能有一名培训师。一位培训师可以有许多客户。

2.  我想知道是否创建一个实体来控制客户和培训师的`user`权限，或者只是添加一个属性`Role``person`

我考虑过的另一件事是将所有内容都放在具有递归关系的单个实体中？

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:05:00.440

从实体的角度来看，培训师和客户可能有不同的数据，您需要跟踪每个数据。您仍然可以拥有一个全局用户表，但培训师和客户应该与用户实体具有 1:1 的关系。然后，您可以在客户和培训师之间建立一个连接表。我建议在这里建立多对多的关系，以防万一有人真的想塑形并想要拥有 2 位教练。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:09:50.030

培训师可以有培训师吗？例如，专门从事铁人三项运动的教练可能是游泳弱者，并且有游泳教练。

我自己喜欢这个`Role`设计。

# android - getY() 行为不正确？

> ID：10870553
> 
> 赞同：1
> 
> 时间：2012-06-03T13:01:39.697
> 
> 标签：android

我怀疑来自`Event`s 的坐标是否正确。

我的应用程序在其布局中有一个`Activity`带有根元素的实例。`FrameLayout`我正在开发 Galaxy Nexus，Android 4.0.2，但正在为 Android 1.6 API 编写应用程序。

现在来制作这个：

让我们覆盖实例`onTouch()`上的回调并添加这个记录器（代表）：`FrameLayout``e``event`

```
Log.i("a",String.valueOf(e.getY()-e.getRawY())
        +" "+String.valueOf(e.getY())
        +" "+String.valueOf(e.getRawY()));
     ); 
```

然后我们检查输出是什么：

```
06-03 16:31:50.560: I/a(15480): 0.0 676.4715 676.4715
06-03 16:31:51.326: I/a(15480): 0.0 675.4723 675.4723
06-03 16:31:51.380: I/a(15480): 0.0 680.4684 684.4653
06-03 16:31:51.388: I/a(15480): -100.0 584.4653 684.4653
06-03 16:31:51.412: I/a(15480): 0.0 686.4637 686.4637
06-03 16:31:51.412: I/a(15480): 0.0 686.4637 686.4637 
```

看到第四招的奇怪波动了吗？有趣的是，“100.0”正是上层 Android OS 菜单图形元素的高度（在我的例子中）。这些“100.0”可以通过以下方式从应用程序中获取：

```
float padding = act.instance.getWindowManager().getDefaultDisplay().getHeight()
                -fl.getBottom(); 
```

, 其中`act`是`Activity`' 的实例并且`fl`是`FrameLayout`' 之一。

我可以补充一点，如果我们`e.getY()`从第四个笔画开始在布局上用第二个值 ( ) 绘制一些东西，它就会在手指的正下方。使用第三个值，它将远低于手指。所以我得出结论，系统在大多数情况下为我提供了错误的触摸 y 坐标值，有时会突然告诉我正确的值。

我目前的解决方法是只听`e.getRaw()`并减去上面计算的 Android 上屏元素高度。

所以问题是：

1.  有没有人遇到过这个？也许运行这个记录器并检查它在您的配置上打印的内容？
2.  如果您的配置受到影响，您知道是什么原因造成的吗？也许您可以说出更优雅的解决方法？

感谢您的关注！

# php - 对象错误：对非对象的函数查询

> ID：10870555
> 
> 赞同：0
> 
> 时间：2012-06-03T13:01:57.530
> 
> 标签：php, mysql, pdo

我的代码中有错误： **致命错误：在第 23 行的 /var/www/crud_php/core/class_ManageDatabase.php 中的非对象上调用成员函数 query()**

错误行：`$query = $this->link->query("SELECT * FROM $table_name ORDER BY id ASC");`

```
<?php

class ManageDb{
    public $link;

    function __construct() {
        include_once 'class_database.php';
        $conn = new database;
        $this->link = $conn->connect();

        return $this->link;
    }

    function getData($table_name, $id=null){
        if(isset($id)){
            $query = $this->link->query("SELECT * FROM $table_name WHERE id = '$id' ORDER BY id ASC");
        }else{
         **$query = $this->link->query("SELECT * FROM $table_name ORDER BY id ASC");**   
        }

        $rowCount = $query->rowCount();
        if ($rowCount >=1){
            $result = $query->fetchAll();
        }else{
            $result = 0;
        }

        return $result;
    }

}

?> 
```

数据库连接：

```
<?php
include_once '../config.php';

class database {

    protected $db_conn;
    public $db_name = DB_NAME;
    public $db_host = DB_HOST;
    public $db_pass = DB_PASS;
    public $db_user = DB_USER;

    function connect() {
        try {
            $this->db_conn = new PDO("mysql:host = $this->db_host;dbname=$this->db_name", $this->db_user, $this->db_pass);
        } catch (PDOException $e) {
            return $e->getMessage();
        }
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:04:43.620

这意味着`$this->link`不是一个对象。`connect()`您忘记在您的方法中返回连接。添加`return $this->db_conn;`该方法。

附带说明一下，在出错的情况下返回一个字符串是一个**非常糟糕的主意**。让异常传播或终止脚本 - 但不要完全返回会在您的代码中导致奇怪错误的其他内容。您也不能从构造函数返回任何内容。

# php - 如何获取用户 ID 并将其放入表中

> ID：10870562
> 
> 赞同：0
> 
> 时间：2012-06-03T13:02:47.827
> 
> 标签：php, sql, wordpress, navicat

我正在尝试制作一个基于**WordPress** CMS 的足球投注系统。如果这是一个多余的问题，我深表歉意，但我整天都在搜索谷歌和一些 Wiki，但我无法找到任何关于如何回答这个问题的线索。

**背景资料：**

我用：

*   MySQL
*   PHP
*   Navicat

每次用户在 php 脚本网站上输入两个整数，对应于足球比赛中的进球数，这两个整数就会通过**insert.php**文件发送到数据库表“bets” 。

**insert.php 看起来像这样：**

```
<?php $con = mysql_connect("host","username","password"); if (!$con)   {   die('Could not connect: ' . mysql_error());   }

mysql_select_db("database", $con);

$sql="INSERT INTO bets (homebet, awaybet) VALUES ('$_POST[homebet]','$_POST[awaybet]')";

if (!mysql_query($sql,$con))   {   die('Error: ' . mysql_error());   } echo "Thanks for betting!";

mysql_close($con); ?> 
```

**php 表单如下所示：**

![](../Images/7f6f8321527a0fee3afcb6751669239a.png)

我有以下自制表格：**bets**、**teams**、**matches**，我有 WordPress 表格**wp-users**，其中列出了每个成员。

**投注表如下所示：** ![每一行对应一个新的赌注](../Images/16d991aa91384ac51fb253739e93bcdc.png)

如您所见，用户 ID 是空的——它不应该是空的。它应该包含输入赌注的用户的 ID。

**然后我的两部分问题是..**

我应该如何获取用户的 ID 并将其显示在数据库表*bets*中？也许 WordPress 有一个代码片段。

最后，我应该如何为每场比赛附加一个**游戏ID**？我应该为每场新比赛创建一个新*表格吗？*

*提前*非常感谢- 我希望我能够使这个线程可读且易于理解。

弗雷德里克·安徒生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:31:56.037

你在这里错过了很多东西。我无法建议您如何管理不同的游戏，因为我不知道您的应用程序的其余部分是什么样的。

这里有一些提示可以帮助您：

**不要创建自己的数据库连接**

消除：

```
$con = mysql_connect("host","username","password"); if (!$con)   {   die('Could not connect: ' . mysql_error());   }

mysql_select_db("database", $con); 
```

改为添加：

```
require_once($_SERVER['DOCUMENT_ROOT'].'/wp-load.php'); 
```

**WordPress 当前用户 ID**

将此添加到顶部脚本：

```
global $wpdb, $current_user;
get_currentuserinfo(); 
```

将 $sql 代码更改为：

```
$sql= $wpdb->prepare("INSERT INTO `bets` (`userid`, `homebet`, `awaybet`) VALUES (%d, %d, %d)", $current_user->ID, $_POST['homebet'], $_POST['awaybet']); 
```

我还使用了 wpdb prepare 功能，因此您的帖子数据将在被查询之前被转义。

也将其更改为使用 WP 本机查询。

消除：

```
if (!mysql_query($sql,$con))   {   die('Error: ' . mysql_error());   } echo "Thanks for betting!";

mysql_close($con); 
```

改为添加：

```
$wpdb->query($sql) 
```

# css - 如何在样式定义中排除所有子级的类

> ID：10870564
> 
> 赞同：7
> 
> 时间：2012-06-03T13:02:53.287
> 
> 标签：css, css-selectors

我有一个像

```
<div>
 <div class="abc">
  <div>
   <!--some more divs inside-->
  </div>
 </div>
</div> 
```

我想要做的是将样式仅应用于第一个 div。我尝试使用`div:not(.abc, .abc *)`, `div:not(.abc):not(.abc *)`，`div:not(.abc), div:not(.abc) *`但这些都不起作用。很难编辑 html，因为要编辑的文件很多。上面显示的代码也出现在不同的地方，所以使用`>`选择器不是解决方案......有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T13:21:57.137

您不能可靠地使用`:not()`CSS 中的选择器来排除元素和/或其后代。[这个答案](https://stackoverflow.com/a/10711731/106224)（以及它链接到的其他一些）解释了它的原因：

> 你不能使用组合器。这适用于 jQuery，但不适用于 CSS：
> 
> ```
> /* 
>  * Grab everything that is neither #foo itself nor within #foo.
>  * Notice the descendant combinator (the space) between #foo and *.
>  */
> :not(#foo, #foo *) 
> ```
> 
> 这个特别讨厌，主要是因为它没有适当的解决方法。有一些松散的解决方法（[1](https://stackoverflow.com/q/7084112/106224)和[2](https://stackoverflow.com/a/8540726/106224)），但它们通常取决于 HTML 结构，因此实用性非常有限。

而且由于您的标记是不可预测的，以至于您无法编辑它或使用`>`选择器，恐怕除了找到一种方法将一个类应用到您的顶部`div`并使用该类之外，您没有太多的出路，因为[由 Fluidbyte 演示](https://stackoverflow.com/a/10870614/106224)，和/或使用 jQuery，如上所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:09:14.193

我通常发现通过类包含您需要的内容然后尝试排除后代元素更容易。在这里查看小提琴：http: [//jsfiddle.net/cLtHg/](http://jsfiddle.net/cLtHg/)

这解决了继承问题，并且对跨浏览器更加友好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T13:05:20.383

`:first-child`与其父元素的 ID 或类一起使用。如果您无法使用 CSS 捕捉元素，建议使用**Javascript**或**jQuery**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T13:14:20.003

您是否尝试过`:first-child` 或`:nth-child()`选择过？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T13:23:39.643

如果您真的没有接触 HTML，那么一个简单但肮脏的方法是将样式应用于第一个 div，然后从后续 div 中删除它们，如下所示：

```
div {margin-bottom: 20px; border: 1px solid #ccc;}
div div {margin-bottom: 0; border: none;} 
```

这里的主要缺点是子 div 中的某些样式可能会被无意中删除。首先取决于它们的样式。

# jquery - Firefox 在页面刷新时不刷新选择标签

> ID：10870567
> 
> 赞同：6
> 
> 时间：2012-06-03T13:03:27.840
> 
> 标签：jquery, html, firefox, html-select

我遇到了一个问题，我有一个选择标签，用户可以使用它来选择手机品牌，然后使用 jquery 的页面将只显示这些手机。

感谢堆栈溢出人员的帮助，现在它在除 Firefox 之外的所有浏览器上都运行良好。出于某种原因，当我刷新页面时，选择标签显示了最后选择的选项，但页面显示了所有可用的手机。有没有人有任何关于让 Firefox 刷新选择标签的建议或建议？我无法在 js.fiddle 上显示它，因为它不会在那里发生。

这是代码：

```
<select class="manufacturers">
    <option class="selected" value="all">All</option>
    <option value="motorola">Motorola</option>
    <option value="htc">HTC</option>
    <option value="lg">LG</option>
    <option value="samsung">Samsung</option>
    <option value="kyocera">Kyocera</option>
</select>

<div class="scroll-content">
    <ul class="manulist motorola">
        <li><a href="#">Motorola Triumph</a></li>
    </ul>
    <ul class="manulist htc">
        <li><a href="#">HTC WILDFIRE S</a></li>
    </ul>
    <ul class="manulist lg">
        <li><a href="#">LG Optimus Slider</a></li>
        <li><a href="#">LG Optimus V</a></li>
        <li><a href="#">LG Rumor Touch</a></li>
        <li><a href="#">LG Rumor 2</a></li>
        <li><a href="#">LG 101</a></li>
    </ul>
    <ul class="manulist samsung">
        <li><a href="#">Samsung Intercept</a></li>
        <li><a href="#">Samsung Restore</a></li>
        <li><a href="#">Samsung M575</a></li>
    </ul>
</div> 
```

jQuery：

```
$(document).ready(function() {

    $('.manufacturers').change(function() {
        var selected = $(this).find(':selected');
        $('ul.manulist').hide();
        if ($(this).val() == 'all') {
            $('.scroll-content ul').show();
        } else {
            $('.' + selected.val()).show();
            $('.optionvalue').html(selected.html()).attr(
                    'class', 'optionvalue ' + selected.val());
        }
    });
}); 
```

提前感谢您的任何建议或帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-03T13:48:05.013

`select`当刷新机制正常激活时，FireFox 将缓存表单值（包括框的选定值）（ `F5`）。但是，如果用户选择执行硬刷新 ( `Ctrl+F5`)，则不会从缓存中获取这些值，并且您的代码将按预期工作。

由于用户将按照自己的意愿行事，因此您必须提供涵盖这两种情况的解决方案。这可以通过采取几种方法来完成：

*   处理每次页面刷新：添加一些重置代码以在`window.onbeforeunload`事件侦听器中设置默认选中状态。
*   `ready`在 DOM处理程序的开头添加该代码。
*   使用 cookie，如[Ted Pavlic 博客中的这篇文章](http://www.tedpavlic.com/post_detect_refresh_with_javascript.php)中所述，检测页面刷新并对其采取行动（在那里放置相同的代码）。
*   在服务器端设置 no-cache 标头，从而强制获取相关资源。

### 参考

*   [`window.onbeforeunload`在 Mozilla 开发者网络上](https://developer.mozilla.org/en/DOM/window.onbeforeunload)
*   [关于 FireFox 的表单值缓存的 stackoverflow 上的帖子](https://stackoverflow.com/questions/1479233/why-doesnt-firefox-show-the-correct-default-select-option)
*   [2009 年关于该功能的博客文章](http://www.mccran.co.uk/index.cfm/2009/12/14/Firefox-helpfully-caching-forms-and-their-values)
*   [另一个关于 2008 年功能的博客文章](http://jennyandlih.com/firefox-caches-form-values)

***注意：****已在[链接的 SO 帖子](https://stackoverflow.com/questions/1479233/why-doesnt-firefox-show-the-correct-default-select-option)以及评论中建议`autocomplete`关闭。然而，这并不是最好的解决方案——有两个原因**：兼容性：** `autocomplete`是一个[HTML5 属性](https://developer.mozilla.org/en/HTML/Element/form)，因此我们限制了我们的选择实现，并且**b. 语义：**目的是处理页面刷新的情况。`autocomplete`旨在控制会话历史缓存和管理表单控件的提示。如果这个实现在未来发生变化，这个解决方案就会失效。*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-01T11:24:19.853

我想我有更简单的解决方案。当文档准备好时，为什么不将选择设置回索引 0？它可能看起来像这样：

```
$('.manufacturers').prop('selectedIndex',0); 
```

因此，您的脚本可能如下所示：

```
$(document).ready(function() {

    $('.manufacturers').prop('selectedIndex',0);

    $('.manufacturers').change(function() {
        var selected = $(this).find(':selected');
        $('ul.manulist').hide();
        if ($(this).val() == 'all') {
            $('.scroll-content ul').show();
        } else {
            $('.' + selected.val()).show();
            $('.optionvalue').html(selected.html()).attr(
                    'class', 'optionvalue ' + selected.val());
        }
    });
}); 
```

重新加载后，选择将回到第一个位置。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-09-28T20:12:45.183

如果您的选择标签在表单内，您只需将属性添加`autocomplete="off"`到它，它就会按预期运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-02T19:35:20.540

每次给 select 标签取一个不同的名字怎么样，像这样：

```
$random_id = mt_rand(1, 999);
$select_name = "myselect" . $random_id;
… 
\<select name="< ?php echo $select_name; ?>">
… 
```

这对我有用。

# c - 什么是 main(ac, av) int ac；字符 **av; {...}？

> ID：10870574
> 
> 赞同：3
> 
> 时间：2012-06-03T13:04:28.200
> 
> 标签：c

> **可能重复：**
> [C 中有多少种编写函数的风格？](https://stackoverflow.com/questions/9655042/how-many-styles-of-writing-functions-are-there-in-c)

我看到了一个用 C 编写的程序，其定义如下`main`：

```
main(ac, av) int ac; char **av;
{
    ...
} 
```

代替

```
int main(int argc, char **argc)
{
    ...
} 
```

我从未见过像第一个代码那样的 C 语法。它是什么，我在哪里可以读到它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T13:05:30.883

第一个是在函数原型成为编写代码的通用/标准方式之前的旧式、ANSI 之前的 C 函数头。

经常这样格式化：

```
main(ac, av) 
int ac; 
char **av;
{
    ...
} 
```

您在最初的括号集之后看到的是 中参数的类型声明`main`。另请注意，没有`int`声明返回类型。

没有人真正写出那样的代码，坚持第二种形式。

如果您可以挖掘[Kernighan 和 Ritchie 的原始白皮书](https://rads.stackoverflow.com/amzn/click/com/0131101633)（第 1 版，ANSI 之前），您会看到这种形式（正如 @dirkgently 正确提到的，这有时被称为 K&R 风格 C），就像在其他旧的C书。

[如果您对函数声明和定义的过时形式](http://msdn.microsoft.com/en-us/library/efx873ys.aspx)感到好奇，也请查看此链接 。在 google 中搜索“旧式 C 函数声明”会找到很多结果。

# jquery - 如何刷新jquery轮播自动播放

> ID：10870578
> 
> 赞同：0
> 
> 时间：2012-06-03T13:04:47.883
> 
> 标签：jquery, carousel

`div`从左侧列表中的多个实例中选择轮播后，我需要刷新或 jQuery 函数，当页面加载时它会向左滚动，但是当执行函数时，下一个滚动器会停止。

**代码是：**

```
<script type="text/javascript">
  $(function() {
    $('#carousel_1').carouFredSel({
      width: '100%',
      auto: {
        items: 1
      },
      prev: '#prev1',
      next: '#next1'
    });

    $('#carousel_2').carouFredSel({
      width: '100%',
      auto: {
        items: 1
      },
      prev: '#prev2',
      next: '#next2'
    });

    $('#carousel_3').carouFredSel({
      width: '100%',
      auto: {
        items: 1
      },
      prev: '#prev3',
      next: '#next3'
    });

    var items = $('.list_switch>li>a').each(function () {
      $(this).click(function () {
        //remove previous class and add it to clicked tab
        items.removeClass('current');
        $(this).addClass('current');

        //hide all content divs and show current one
        $('.carousel').hide().eq(items.index($(this))).show('fast');
      });
    });

    // select the first tab on page load       
    items[0].click();
  });
</script> 
```

**演示页面：** [http ://blogillucent.alwaysdata.net/aaa/coolcarousel.html](http://blogillucent.alwaysdata.net/aaa/coolcarousel.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:32:29.660

您可以使用该`play`事件来恢复所选滑块上的滑动：

**例如，**

```
$("#foo").trigger("play"); 
```

[请参阅此处](http://caroufredsel.frebsite.nl/custom-events.php)的文档！

**特别是您的代码：**

```
var items = $('.list_switch>li>a').each(function () {
  $(this).click(function () {
    //remove previous class and add it to clicked tab
    items.removeClass('current');
    $(this).addClass('current');

    //hide all content divs and show current one
    $('.carousel').hide().eq(items.index($(this))).show('fast');

    // resume the slide on the selected slider
    $('.carousel').eq(items.index($(this))).trigger("play");
  });
}); 
```

通过阅读文档，应该暂停滑块以使用`play`事件，因此您应该在每次滑块初始化后暂停不可见的滑块：

**例如，**

```
$("#foo").trigger("pause"); 
```

* * *

您可以查看插件自定义事件的[代码示例！](http://caroufredsel.frebsite.nl/code-examples/custom-events.php)`carouFredSel`

# perl - 查找 Perl 类的所有超类的最佳实践是什么？

> ID：10870581
> 
> 赞同：9
> 
> 时间：2012-06-03T13:04:56.943
> 
> 标签：perl, oop, superclass

是否有一种标准的 CPAN 方法可以找出 Perl 类的所有超类（或者更好的是整个超类树，直到 UNIVERSAL）？

或者最好的做法是简单地检查`@{"${$class}::ISA"}`每个班级、班级的父母等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T17:07:46.383

没有“标准方式”，因为这不是您想做的标准事情。对于除可视化之外的任何事情，想要检查您的继承树是一个面向对象的危险信号。

除了 Class::ISA，还有[mro::get_linear_isa()](http://search.cpan.org/perldoc?mro#mro::get_linear_isa%28$classname%5B,_$type%5D%29)。两者都处于核心地位已经有一段时间了，因此它们可以被认为是某些定义的“标准”。两者都将继承显示为平面列表，而不是树，这主要用于深度魔法。

perl5i[元对象](http://search.cpan.org/perldoc/perl5i::Meta)同时提供了[linear_isa()](http://search.cpan.org/perldoc/perl5i::Meta#linear_isa)，如 mro （它只是调用 mro）和返回 class' 的[ISA()](http://search.cpan.org/perldoc/perl5i::Meta#ISA)`@ISA`。它可用于使用简单的递归构造一棵树，而无需进入符号表。

```
use perl5i::2;

func print_isa_tree($class, $depth) {
    $depth ||= 0;

    my $indent = "    " x $depth;
    say $indent, $class;

    for my $super_class ($class->mc->ISA) {
        print_isa_tree($super_class, $depth+1);
    }

    return;
}

my $Class = shift;
$Class->require;

print_isa_tree($Class);

__END__
DBIx::Class
    DBIx::Class::Componentised
        Class::C3::Componentised
    DBIx::Class::AccessorGroup
        Class::Accessor::Grouped 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T15:36:47.160

我认为[Class::ISA](https://metacpan.org/module/Class%3a%3aISA)是你正在寻找的东西

```
use Class::ISA;
use Mojolicious;
print join "\n", Class::ISA::super_path("Mojolicious"); 
```

印刷：

```
Mojo
Mojo::Base 
```

然而，这不是某种“最佳实践”，因为整个任务并不是 Perl 程序员每天都在做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:38:50.140

这些天您很可能想使用其中的一个功能`mro`，例如[`mro::get_linear_isa`](http://search.cpan.org/~rjbs/perl-5.16.0/ext/mro/mro.pm#mro%3a%3aget_linear_isa%28%24classname%5b,_%24type%5d%29).

```
use mro;
my @superclasses = mro::get_linear_isa($class); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T13:09:50.853

我不相信有像“标准 CPAN 方式”这样的东西。检查`@ISA`是常见的做法 - 也是合理的，因为类似的技术`use base qw(...)`也适用`use parent -norequire, ...`于`@ISA`......

# java - WADL 的问题/使用 Jersey 以合同优先的方法生成的 XSD

> ID：10870583
> 
> 赞同：55
> 
> 时间：2012-06-03T13:05:02.800
> 
> 标签：java, xsd, jersey, wadl, contract-first

几天来，我一直在使用 Jersey 开发 REST Web 服务，并设法使所有 CRUD 操作正常工作，并使用多种交换格式：XML、JSON、Google Protobuf。

但是我面临一些与自动生成的 WADL 和 XSD 相关的问题。

* * *

# 语境

为了定义以这三种格式交换的对象，我遵循了**“合同优先”的方法**：

*   从我编写的 XSD 中，我使用 JAXB 生成了我的模型类；
*   从我编写的等效 proto 文件中，我生成了 Google Protobuf 类（并且在内部有一种方法可以将它们转换为 JAXB 生成的对象，以便拥有一个独特的模型）。

但是，由于我希望我的用户也能够**生成他们的类**，我想共享这些模式文件（.xsd 和 .proto），并让它们**与自动生成的 WADL 很好地集成**。

为此，感谢[这个](https://wikis.oracle.com/display/Jersey/HowToConfigureExtendedWADL)wiki 页面：

*   我已经暴露了下面的两个文件
    *   `/schema/schema.xsd`
    *   `/schema/schema.proto`
*   我添加了一个应用程序语法文件：

    ```
    <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <grammars xmlns="http://wadl.dev.java.net/2009/02" 
              xmlns:xsd="http://www.w3.org/2001/XMLSchema"
              xmlns:xi="http://www.w3.org/1999/XML/xinclude">
        <include href="../schema/schema.xsd" />
    </grammars> 
    ```

*   我添加了一个自定义的 WADL 生成器：

    ```
     public class RichWadlGeneratorConfig extends WadlGeneratorConfig {
        @Override
        public List<WadlGeneratorDescription> configure() {
            return generator(WadlGeneratorApplicationDoc.class)
                .prop("applicationDocsStream", "application-doc.xml")
                .generator(WadlGeneratorGrammarsSupport.class)
                .prop("grammarsStream", "application-grammars.xml")
                .descriptions();
        }
     } 
    ```

这样，当我点击时，以下内容会出现在 WADL 中`/rest/application.wadl`：

```
<grammars>
     <include href="../schema/schema.xsd"/>
     <include href="application.wadl/xsd0.xsd">
          <doc title="Generated" xml:lang="en"/>
     </include>
</grammars> 
```

* * *

# 问题

`/rest/application.wadl/xsd0.xsd`是从我的课程中自动生成的，但**与**我最初在`schema.xsd`. 除此之外，`wadl2java`在这个 WADL 上调用这样的工具会惨遭失败，大概是因为

*   `/schema/schema.xsd`， 和
*   `/rest/application.wadl/xsd0.xsd`

现在是冲突的（相同对象的两个定义）。

* * *

# 问题

1.  有没有办法禁用这个自动生成的 XSD 的生成和传播？（因为我遵循这种“合同优先”的方法，所以我不需要它）

2.  `/rest/application.wadl/xsd0.xsd`如果没有，有没有办法在被击中时用我手动编写的 XSD 来“覆盖”它的内容？（我用谷歌搜索并找到了关于 WadlResource 的信息，用于生成自定义的 WADL，但没有找到关于 XSD 生成本身的信息）

* * *

在此先感谢您的帮助！

M。

* * *

# 编辑

1）我向泽西队提出了这个问题并得到了答复：http: [//java.net/projects/jersey/lists/users/archive/2012-06/message/8](http://java.net/projects/jersey/lists/users/archive/2012-06/message/8)

2) 根据 Pavel 的指示，我提出了一张罚单 (JERSEY-1230)。我目前正在跟进自己提交修复或从泽西队获得修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-18T00:21:45.907

[1.14-SNAPSHOT](https://java.net/jira/browse/JERSEY-1230)应该允许你这样做：

```
public class SampleWadlGeneratorConfig extends WadlGeneratorConfig {

    @Override
    public List<WadlGeneratorDescription> configure() {
        return generator( WadlGeneratorApplicationDoc.class )
                .prop( "applicationDocsStream", "application-doc.xml" )
                .generator( WadlGeneratorGrammarsSupport.class )
                .prop( "grammarsStream", "application-grammars.xml" )
                .prop("overrideGrammars", true)                               // !!!
                .generator( WadlGeneratorResourceDocSupport.class )
                .prop( "resourceDocStream", "resourcedoc.xml" )
                .descriptions();
    }

} 
```

当 overrideGrammars 设置为 true 时，Jersey 生成的语法不会包含在返回的 WADL 中。

# perl - perl - 使用反引号而不是 system()

> ID：10870591
> 
> 赞同：4
> 
> 时间：2012-06-03T13:05:53.003
> 
> 标签：perl, system, return-value, backticks

我有一个 perl 脚本，它使用 system() 调用另一个 perl 脚本

就像是：

```
my $returnval= system("perl", $path,$val1, $val2,@myarray); 
```

因为 system() 只返回退出状态，但我想要脚本的输出我想使用反引号。

我尝试过这样的事情：

```
my $returnval = `$path`; 
```

如何添加脚本应该接收的参数？

其他 perl 脚本的返回码应该是怎样的？此刻就像

```
exit ($myreturnedvalue); 
```

（如何）是否可以返回多个值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T13:45:05.523

通过 shell 将数据从一个 perl 脚本移动到另一个不是最好的解决方案。您应该知道反引号或`qx()`捕获打印到 STDOUT 的任何内容。从其他脚本使用`exit ($var)`不太可能被正确捕获。你会需要`print $var`. 但不要那样做。

相反，将其他脚本制作成模块并直接使用子例程。这是一个简单的例子：

在 bar.pm 中：

```
use strict;
use warnings;

package bar;  # declare our package

sub fooz {             # <--- Our target subroutine
    my $in = shift;    # passing the input
    return $in * 5;    # return value
}
1; # return value must be true 
```

在 main.pl 中：

```
use strict;
use warnings;
use bar;   # bar.pm must be in one path in @INC

my $foo = bar::fooz(12);  # calling fooz from our other perl script
print "Foo is $foo\n"; 
```

还有很多东西要学，我建议你阅读[文档。](http://perldoc.perl.org/perlootut.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T20:27:48.743

你想要[IPC::System::Simple](http://search.cpan.org/perldoc?IPC%3a%3aSystem%3a%3aSimple)的`capturex`.

```
use IPC::System::Simple qw( capturex );
my $output = capturex("perl", $path, $val1, $val2, @myarray); 
```

它甚至为您处理错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T13:13:45.267

反引号就像在 shell 中进行的直接调用一样工作：

```
you@somewhere:~$ ./script.pl --key=value 
```

基本上是一样的

```
my $returnval = `./script.pl --key=value`; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-03T14:20:56.890

为了同时调用其他程序传递参数和捕获输出，我非常喜欢[`IPC::Run`](https://metacpan.org/module/IPC%3a%3aRun)：

```
use IPC::Run 'run';

my $exitcode = run [ $command, @args ], ">", \my $output;

# $exitcode contains the exit status and
# $output contains the command's STDOUT data 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-03T13:11:57.177

这不是你想要的吗？

```
my $returnval = `$path $val1 $val2 @myarray`; 
```

但是@Quentin 添加了这个有用的建议：如果您要传递的值`foo "bar`在 shell 中，则您必须执行类似`"foo \"bar"`. 对 system 使用额外的参数将为您解决问题。使用反引号不会；您需要手动构建所需的 shell 命令。

# windows - 如何在 linux 下用错误的字符集签出 git repo？

> ID：10870595
> 
> 赞同：2
> 
> 时间：2012-06-03T13:06:22.690
> 
> 标签：windows, linux, git, character-encoding

我有一个简单（但希望可以快速解决）的问题。我使用 msys/tortoiseGit 工具在 windows 下创建了一个 git 存档。好的。现在我将 repo 复制到 U 盘上，然后将它带到一台 linux 机器上。

不幸的是，repo 中有包含德语变音符号等（`äöüß`）的文件。在纯windows下没有问题，我知道在纯linux下也没有问题。

当我现在在本地克隆 repo 时，变音符号被我的机器上无法显示的其他字符替换（导致 a `?`）。目前我无法访问 Windows 机器来修改任何内容。它也应该很快工作，因为我很快就无法再访问 Windows 机器了。

所以：

*   我可以（以某种方式）修改存档以确保正确的字符集吗？
*   我可以在创建新档案时避免这种情况吗？
*   我可以（仅使用 linux）克隆它以透明方式工作的 repo 吗？
*   [编辑] 如何重新定义 repo 以便（至少）文件名进入正确的字符集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:50:30.333

*   除了重写档案，我不知道。

*   ~~确保您的 Windows 编辑器使用 UTF-8 而不是本地代码页。~~
    见下文。

*   您的 Linux 可能附带非 UTF-8 语言环境。在某种程度上，

    ```
    LANG=de_DE.iso88591@euro 
    ```

    将要求您的程序以相同的编码进行读写。但是，这不是一个完整的修复；例如，Gtk+ 假定文件名是 UTF-8 格式，无论内容编码如何。

*   重写 Git 存储库的常用方法是使用`git-filter-branch`. 这是我刚刚制作的一个示例，它应该将文件名、文件内容和提交消息从 ISO-8859-1 重新编码为 UTF-8。

    ```
    CONVERT='iconv -fiso8859-1 -tutf-8'
    git filter-branch \
        --index-filter '
            git ls-files -z --stage |
            while read -d "" mode ref stage name; do
                [[ "$stage" = 0 || "$stage" = 1 ]] &&
                printf "0 0000000000000000000000000000000000000000\t%s\0" "$name"
                newname="$(echo "$name" | '"$CONVERT'")"
                newref="$(
                    git cat-file blob "$ref" |
                    '"$CONVERT"' |
                    git hash-object -w --stdin)"
                printf "%s %s %s\t%s\0" "$mode" "$newref" "$stage" "$newname"
            done |
            git update-index -z --index-info' \
        --msg-filter "$CONVERT" \
        $(git for-each-ref --format='%(refname)' refs/heads refs/tags) 
    ```

    注意：我没有在存在合并或二进制文件的情况下对此进行测试，并且很容易使用`git-filter-branch`. 如果出现问题，`git`请在命名空间中保留所有正引用（重写或未重写）的备份`refs/original`。

* * *

刚刚找到了[VonC](https://stackoverflow.com/users/6309)的惊人[答案](https://stackoverflow.com/a/5855213)：在 Windows 上，使用≥1.7.10，并修复现有存储库，有二进制文件（仅文件名，与上述不同）。`msysgit`[`recodetree`](https://github.com/msysgit/msysgit/blob/devel/bin/recodetree)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:12:09.233

Git 将文件存储为二进制 blob，因此您无法在不重写整个历史记录的情况下修复它。这不是修改 repo，而是修改文件。

# android - 在自己的网络任务中拥有长期运行的服务

> ID：10870596
> 
> 赞同：0
> 
> 时间：2012-06-03T13:06:32.550
> 
> 标签：android, multithreading

所以我的意图如下：我需要一个后台服务，主要从主 UI 接收发送请求 (UDP) 并等待其响应，然后将其发送回主 UI。这是一个相当同步的过程。但此外，我希望服务等待可以通过网络随时接收的异步消息，例如网络客户端想要通知我或报告错误。实现这一点的最佳方法是什么？对于 IPC，Messenger 类可能对处理数据很有用。是否可以像[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)中的“Remote Messenger Service Sample”那样实现？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:54:03.220

在我的项目中，我有一个永久运行的服务。

我还在这个服务中创建了 3 个线程，所以都在后台。他们每个人都做了一些工作，也请求 http 数据：我已经用 Handler 完成了，管理消息队列。

它很容易并且发展良好，增加了项目的维度和复杂性。

所以，是的，我应该这样做。

PS：如果你必须在后台工作，记得用PowerManager获取wake_locks，确保你在手机待机时CPU会保持开启（我花了几天时间才明​​白为什么手机待机时线程停止工作）。

在主线程中，我声明了4个处理程序（2个用于与recordingThread的两侧通信，2个用于与sendThread的两侧通信）：然后简单地创建其他2个线程；看看 Looper 调用：当代码执行时不要让你的线程死掉，并等待传入​​的消息来自在它自己的执行内部创建的处理程序（在这种情况下是在 run() 方法中）。我还为与线程关联的每个处理程序声明了一个私有类：这样每个线程都有自己的通道来与不同的“动作”进行通信（切换案例）。还有另一个处理程序，recordingThread 处理程序，这里没有显示；但想法是一样的：

```
private Handler m_recordingThreadHandler, m_sendingThreadHandler,
            m_thisRecordingThreadhandler, m_thisSendingThreadHandler;

public void run() {
        Looper.prepare();

        m_thisRecordingThreadhandler = new UpdRecHandler();
        m_recordingThread = new RecordingThread(m_mainThreadContext,
                m_thisRecordingThreadhandler, m_configuration, m_picturesDir);
        m_recordingThread.setName("recordingThread");
        m_recordingThread.start();

        m_thisSendingThreadHandler = new UpdSenHandler();
        m_sendingThread = new SendingThread(m_mainThreadContext,
                m_thisSendingThreadHandler, m_configuration);
        m_sendingThread.setName("sendingThread");
        m_sendingThread.start();

        Looper.loop();

    }

private class UpdRecHandler extends Handler {

        @Override
        public void handleMessage(Message msg) {
            Message m;

            switch (msg.what) {

            case Utils.SEND_THIS_THREAD_HANDLER:
                Log.i(TAG, "Ricevuto Handler di recordingThread.");

                m_recordingThreadHandler = (Handler) msg.obj;
                m_recordingThreadReady = true;
                checkForAllThreadsReady();

                break;

            case Utils.FORCE_RESET:
                Log.i(TAG,
                        "RecordingThread ha compeltato la procedura per il reset.");
                m_recordingThreadResetted = true;
                checkForThreadsResetted();
                break;
...more cases...
} 
```

这段代码来自recordingThread 类。一旦创建，run 方法就会被执行，在这个方法中我将这个线程的处理程序传递给主线程（之前看到的代码），这个线程的处理程序是在这个 run() 方法中创建的：通过这种方式我启用了双向通信。同样，在recordingThread 中，我为处理程序创建了一个私有类。再次，一旦执行 run 方法，我已经将 Looper 调用让线程处于活动状态。

```
public void run() {
        Looper.prepare();

        Log.i(TAG, "In esecuzione, mando il mio handler a updateThread");

        m_thisThreadHandler = new RecUpdHandler();
        m_mainThreadHandler.obtainMessage(Utils.SEND_THIS_THREAD_HANDLER,
                m_thisThreadHandler).sendToTarget();

        Looper.loop();
    }

private class RecUpdHandler extends Handler {

        public void handleMessage(Message msg) {
            Message m;

            switch (msg.what) {

            case Utils.TAKE_PHOTO:
                ...do work....
                break;
               case Utils.UPDATE_CONFIGURATION:
                ... do other work...
                break;

} 
```

如果你想让你的线程终止，你只需杀死与该线程关联的 Looper，如下所示：

```
Looper.myLooper().quit(); 
```

请记住，处理程序自动与创建它的线程关联：如果在线程 T1 中创建处理程序 A，那么您可以将 A 的引用传递给 T2 和 T3。然后这些线程能够向 T1 发送消息，但反之则不行。那是因为我创建了 4 个处理程序，用于启用 2 方通信。

# c++ - pthread_join 失败会导致子进程成为僵尸吗？

> ID：10870599
> 
> 赞同：2
> 
> 时间：2012-06-03T13:06:44.440
> 
> 标签：c++, pthreads, zombie-process

我有一个使用 Popen 调用 shell 脚本的 C++ pthread 线程。

在一种情况下观察到的是 pthread_join 失败被捕获（即 pthread_join ！= 0）并且子进程保持为僵尸（根据 ps 输出）。

这也会导致主程序挂起。

现在，我不知道为什么 pthread_join 会失败，因为它在其他情况下从未发生过。

但是我想知道收集Popen产生的子进程的等待状态是否是thread_join的一部分。如果是这样，至少我可以确定加入失败是僵尸和程序挂起的根本原因..

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:31:16.457

调用之后`popen`，需要有对应的调用`pclose`，否则调用产生的子进程`popen`会一直处于僵尸状态。可能发生的情况是线程遇到了导致`pclose`无法调用的未处理异常，从而导致僵尸和`pthread_join`.

一种解决方案是确保您的代码正确处理所有可能的异常。

另一种解决方案是实现类似于`popen()`但不需要`pclose()`收割僵尸的东西。这可以通过使用*双叉*来完成。你打电话`fork()`，然后再打电话之前再打电话`exec()`。父进程允许中间子进程退出并使用`wait4()`. 孙子进程现在可以退出而不会留下僵尸，因为它将被该`init`进程收割。要在孙子和父母之间创建沟通渠道，请`pipe()`按原样使用`popen()`，或者`socketpair()`如果您需要双向沟通。在孙进程中使用`dup2()`以允许您在调用之前通过管道或套接字重定向您对`stdin`、`stdout`和的选择`stderr``exec()`.

# objective-c - NSDate 是 1-1-2001

> ID：10870601
> 
> 赞同：0
> 
> 时间：2012-06-03T13:07:03.090
> 
> 标签：objective-c, ios, nsdate

我有一个名为“时间戳”的课程。此类包含一个变量，该变量在第一次使用应用程序打开`static NSDate`时进行初始化。`NSUserDefaults`该日期将转换为稍后使用的字符串。这是我第一次配置日期的方式：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *string = [defaults objectForKey:@"timestampCheck"];

if (!string) { 

    Timestamp *tstamp = [[Timestamp alloc] init];
    [tstamp setSingleTimeStamp : [NSDate date]];
    [tstamp release];

    [defaults setObject:@"notFirst" forKey:@"timestampCheck"];
    [defaults synchronize];

} else {

    Timestamp *ti = [[Timestamp alloc] init];
    [ti initializeTimestamp];
    [ti release];

}

initializeTimestamp 
```

方法只是从默认值中检索时间戳。这是在一个名为的方法中设置的：`synchronizeTimestamp`

当应用程序进入后台状态时调用该方法。

Timestamp 类如下所示：

```
 - (void)setSingleTimeStamp:(NSDate *)dateProvided {

    date = dateProvided;
    [date retain];
}

- (void)synchronizeTimestamp {

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [defaults setObject:date forKey:@"timestampDate"];

    [defaults synchronize];

}

- (void)initializeTimestamp {

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    date = [defaults objectForKey:@"timestampDate"];

}

- (NSString *)dateStringContainer {

    NSDate *tempDate = date; 

    unsigned units = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;
    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *components = [calendar components:units fromDate:tempDate];

    NSInteger year = [components year];
    NSInteger month = [components month];
    NSInteger day = [components day];

    return [NSString stringWithFormat:@"%i - %i - %i", day, month, year]; 

} 
```

单独视图控制器中的标签文本设置为`dateStringContainer`. 当然，当我删除并构建我的应用程序时，它会显示正确的日期。但是当我退出应用程序并从多任务栏中删除时，标签文本是：

> ```
> 1 - 1 - 2001 
> ```

并且`date`是零，经过一些`NSLog's`

更新：

好的，基本上，日期在应用程序第一次打开时有效（我必须每次都删除应用程序才能执行此操作），当我的应用程序被插入时。但是当我从多任务栏中删除它后返回它时，日期不正确。这意味着我的`NSUserDefaults`代码有问题吗？只是猜测...

编辑：

我注意到我的 synchronizeTimestamp 方法没有被调用。但这可能是因为我在 Xcode 上停止了该应用程序，在 Xcode 上停止该应用程序是否会将其变为后台模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:17:46.157

您将必须保留以下内容

```
date = [defaults objectForKey:@"timestampDate"]; 
```

应该是

```
date = [[defaults objectForKey:@"timestampDate"] retain]; 
```

由于默认值会返回一个自动释放的对象，我不知道这是否能解决你所有的问题，但这肯定是一个错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:40:38.070

好的，所以问题不在于我的代码！`applicationDidEnterBackground:`是我在 Xcode 中停止了应用程序，结果它不会调用`date`保存到`NSUserDefault's`. 我认为这不是很好，因为这样就很难测试以保存数据，对吧？所以我找到的最简单的解决方案是同步到`NSUserDefaults`方法中：`viewWillDisappear`......我知道用户可能会使用我以前的代码在 iPhone 上看到日期，但最好不要冒险。

# nuget - Nuget：安装特定于目标的内容文件

> ID：10870608
> 
> 赞同：1
> 
> 时间：2012-06-03T13:08:13.487
> 
> 标签：nuget

在 Nuget 中，我们可以为 DLL 指定不同的目标（例如 net35、net40、winrt45 等）。有没有办法对内容文件做同样的事情？

我正在尝试为 net35 提供与 winrt45 不同的内容文件。

谢谢，劳伦特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:28:43.457

NuGet 团队计划在 NuGet 2.0 中添加对此的支持。[NuGet 论坛上](http://nuget.codeplex.com/discussions/354463)有关于此支持如何工作的讨论。

使用当前版本的 NuGet 执行此操作的唯一方法是创建 PowerShell install.ps1 脚本来复制相应的内容文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T03:29:05.310

这是在 NuGet 2.0 中实现的：“从 NuGet 2.0 开始，除了程序集引用之外，内容文件以及 PowerShell 脚本也可以按目标框架进行分组。” 请参阅[http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)。

# php - 无法在 GET 或 POST 中使用字符串“execute(”

> ID：10870613
> 
> 赞同：6
> 
> 时间：2012-06-03T13:08:53.403
> 
> 标签：php, security

如果我使用 URL www.mysite.com/?test=execute($_GET 数组将始终为空。我在尝试提交带有字符串“execute(”的表单时注意到这一点，它不会提交。

这包括 POST 和 GET，它不接受字符串“execute(”。服务器上的此安全功能是否可以在我的本地计算机上正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:39:56.550

您可能在 Apache 中安装了 mod_security。

# json - PagedList 的 Newtonsoft.Json 序列化 不包括某些属性

> ID：10870618
> 
> 赞同：3
> 
> 时间：2012-06-03T13:09:25.470
> 
> 标签：json, json.net, pagedlist

我正在尝试将 PagedList 对象（[https://github.com/martijnboland/MvcPaging/blob/master/src/MvcPaging/PagedList.cs](https://github.com/martijnboland/MvcPaging/blob/master/src/MvcPaging/PagedList.cs)）序列化为 Json，如下所示：

```
PagedList<Product> pagedList = new PagedList<Product>(products, (page - 1), pageSize);
string json = Newtonsoft.Json.JsonConvert.SerializeObject(pagedList); 
```

如果我使用上面的代码，结果我会得到一个正确序列化的 Product 对象数组。但是（PagedList 的）以下属性未包含在 Json 结果中：

```
 public bool HasNextPage { get; }
    public bool HasPreviousPage { get; }
    public bool IsFirstPage { get; }
    public bool IsLastPage { get; }
    public int ItemEnd { get; }
    public int ItemStart { get; }
    public int PageCount { get; }
    public int PageIndex { get; }
    public int PageNumber { get; }
    public int PageSize { get; }
    public int TotalItemCount { get; } 
```

它们没有被序列化，但它们是 PagedList 的一部分。

有谁知道为什么？我怎么能在序列化中包含这些属性？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T04:06:30.913

序列化程序看到 PagedList 是可枚举的，因此将其序列化为 JavaScript 数组。为了使这更容易处理，我`GetMetaData()`在 PagedList 对象上公开了一个函数，该函数将返回一个 MetaData 对象，其中包含您上面提到的字段。这意味着您可以像这样序列化您的页面列表：

```
string json = Newtonsoft.Json.JsonConvert.SerializeObject(new{
  items = pagedList,
  metaData = pagedList.GetMetaData()
}); 
```

这应该会产生一个 JSON 对象，如下所示：

```
{
    "Items": [
        { ... },
        { ... },
        { ... }
    ],
    "MetaData": {
        "PageSize": 1,
        "PageCount": 2,
        "HasNextPage": true,
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T12:57:21.517

有一个 jquery 插件用于兴奋地做到这一点：

[https://github.com/turhancoskun/pagify.mvc](https://github.com/turhancoskun/pagify.mvc)

```
<script type="text/javascript">
$(function() {
    $('#users').pagify({
        dataUrl: '/User/UserLis',
        callBack: function(){
           // Ajax remove preloader and some other callbacks  
        },
        beforeSend: function(){
           // Ajax show preloader and some other function before start
        }
    });
}
</script> 
```

readme.md 文件包含一个示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-12T02:24:39.193

要序列化，只需使用 Troy 的实现。但是要反序列化创建 2 个新类：

```
public class PaginationEntity<TEntity> where TEntity : class 
{
    public PaginationEntity()
    {
        Items = new List<TEntity>();
    }
    public IEnumerable<TEntity> Items { get; set; }
    public PaginationMetaData MetaData { get; set; }
}

public class PaginationMetaData
{
    public int Count { get; set; }
    public int FirstItemOnPage { get; set; }
    public bool HasNextPage { get; set; }
    public bool HasPreviousPage { get; set; }
    public bool IsFirstPage { get; set; }
    public bool IsLastPage { get; set; }
    public int LastItemOnPage { get; set; }
    public int PageCount { get; set; }
    public int PageNumber { get; set; }
    public int PageSize { get; set; }
    public int TotalItemCount { get; set; }
} 
```

并以这种方式反序列化：

```
PaginationEntity<TEntity> listPaginated = JsonConvert.DeserializeObject<PaginationEntity<TEntity>>(json) 
```

你很高兴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-23T12:00:54.863

默认情况下，asp.core 使用 DataContractSerializer，因此任何人都可以设置Product 类`[DataContract]`和`[DataMember]`成员，并通过以下操作获取所需的数据：

```
 public IActionResult Products(int page=1,int countPerPage=10)
    {
        var result = _dbContext.Products.AsNoTracking().ToPagedList(page, countPerPage);

        return Ok( new{result, total=result.TotalItemCount });
    } 
```

无需使用 Newtonsoft.Json

# ruby-on-rails-3 - 处理由蜘蛛生成的 Rails 应用程序中的错误

> ID：10870619
> 
> 赞同：0
> 
> 时间：2012-06-03T13:09:46.170
> 
> 标签：ruby-on-rails-3, web-crawler, googlebot

我在一个应用程序中看到了很多例外情况——它是从一个现成的电子商务网站转换而来的——一年前，当蜘蛛点击不再存在的路线时。这些数量不多，但有时一天会多次被各种蜘蛛击中。我已经阻止了最严重的违规者（主要是垃圾蜘蛛），但我显然无法阻止 google 和 bing。要手动删除的 URL 太多。

我不确定为什么应用程序不返回 404 代码，我猜其中一条路由是捕获 URL 并尝试生成视图，但是由于缺少资源，它返回 nil，这就是抛出错误。像这样：

```
undefined method `status' for nil:NilClass
app/controllers/products_controller.rb:28:in `show' 
```

同样，这个特定的产品已经消失了，所以我不确定为什么应用程序没有返回 404 页面，而是即使资源不存在，它也会尝试生成视图，它正在检查以确保`nil`资源具有公共状态，并抛出错误。

如果我为 Active:Record not found 进行救援，会这样做吗？这有点难以测试，因为我必须等待各种机器人通过。

我也遇到了一些依赖设置为跟踪的 cookie 的链接的问题，如果未设置 cookie，应用程序会在处理请求之前设置它。这似乎不适用于蜘蛛，我已将这些链接设置为 nofollow 链接，但这似乎并不被所有蜘蛛所尊重。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:15:56.010

对于您关于 404 页面的第一个问题。

看看[这篇文章](https://stackoverflow.com/questions/2385799/how-to-redirect-to-a-404-in-rails)，我相信它会对你有所帮助。

# cython - 无法在声明文件中声明 libcpp.map

> ID：10870622
> 
> 赞同：0
> 
> 时间：2012-06-03T13:09:58.343
> 
> 标签：cython

我想将 C++ 对象存储在 libcpp.map 中，但我无法让它工作。如果我在声明文件中声明地图，它甚至不适用于简单的整数。

```
.pxd file:

from libcpp.map cimport map
cdef class MyClass:
    cdef map[int,int] store

.pyx file:

cdef class MyClass:
    def __cinit__(self):
        self.store = map[int,int]() 
```

以下错误：

```
cdef map[int,int] store
          ^
C++ classes not allowed as members of an extension type,
use a pointer or reference instead 
```

为什么这不起作用？如果我在函数中声明它，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:23:17.473

从错误开始，您似乎需要存储一个指向它的指针并在堆上调用一个新版本，所以

```
cdef map[int,int] *store

self.store = new map[int,int]() 
```

# java - 如何在线程结束时执行函数？

> ID：10870623
> 
> 赞同：0
> 
> 时间：2012-06-03T13:10:08.540
> 
> 标签：java, android, multithreading, task

Android中的`AsyncTask`Method，存在`onPostExecute()`任务结束后执行代码的事件。线程方法的等价物是什么？我搜索了，但我没有找到任何解决方案。

编辑：我不能在 run 方法的末尾调用，因为我需要在 UI 线程中执行操作，并且我不能在不同的线程中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:12:25.730

将调用放在 run 方法的末尾...

```
run(){
    ...
    handler.post(...);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:30:29.920

如果您在 Activity 中运行线程，则可以在线程中使用以下代码：

`runOnUiThread(new Runnable() { public void run(){ //your ui altering code here }})`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T15:03:06.547

您可以使用 Activity.runOnUiThread(Runnable) 方法从非 UI 线程在 UI 上执行代码。

如果您需要对线程事件进行更多控制或想要发回进度更新，则应使用[Handler](https://developer.android.com/reference/android/os/Handler.html)和 [HandlerThread]。将 UI 处理程序传递给后台线程，然后使用从后台线程向 UI 线程处理程序发布消息。实现[handleMessage(message)](https://developer.android.com/reference/android/os/Handler.html#handleMessage(android.os.Message))以对这些事件采取行动。

# ios - 使用 [exporter exportAsynchronouslyWithCompletionHandler] 导出音频文件需要很长时间才能从 AVAset 导出

> ID：10870627
> 
> 赞同：0
> 
> 时间：2012-06-03T13:11:06.563
> 
> 标签：ios

我正在使用下面的代码从库中获取音频以进行修剪

在这里我的问题是我能够获得音频但是需要很长时间才能获得音频

AAVURLAsset *songAsset = [AVURLAsset URLAssetWithURL:appDelegate.librarySongURL options:nil];

```
NSLog (@"Core Audio %@ directly open library URL %@",
       coreAudioCanOpenURL (appDelegate.librarySongURL) ? @"can" : @"cannot",
       appDelegate.librarySongURL);

NSLog (@"compatible presets for songAsset: %@",
       [AVAssetExportSession exportPresetsCompatibleWithAsset:songAsset]);

AVAssetExportSession *exporter = [[AVAssetExportSession alloc]
                                  initWithAsset: songAsset
                                  presetName: AVAssetExportPresetAppleM4A];
NSLog (@"created exporter. supportedFileTypes: %@", exporter.supportedFileTypes);
[self handlePlayPauseDefault:0];
exporter.outputFileType = @"com.apple.m4a-audio";
NSString *exportFile = [myDocumentsDirectory() stringByAppendingPathComponent: @"exported.m4a"];
myDeleteFile(exportFile);

appDelegate.libraryUrl = [NSURL fileURLWithPath:exportFile];
exporter.outputURL = appDelegate.libraryUrl;    

    [exporter exportAsynchronouslyWithCompletionHandler:^{
    int exportStatus = exporter.status;
    switch (exportStatus) {
        case AVAssetExportSessionStatusFailed: {

            NSError *exportError = exporter.error;
            NSLog (@"AVAssetExportSessionStatusFailed: %@", exportError);

            break;
        }
        case AVAssetExportSessionStatusCompleted: {
            NSLog (@"AVAssetExportSessionStatusCompleted");

            self.navigationController.navigationBar.userInteractionEnabled = YES;

            break;
        }
        case AVAssetExportSessionStatusUnknown: { NSLog (@"AVAssetExportSessionStatusUnknown"); break;}
        case AVAssetExportSessionStatusExporting: { NSLog (@"AVAssetExportSessionStatusExporting"); break;}
        case AVAssetExportSessionStatusCancelled: { NSLog (@"AVAssetExportSessionStatusCancelled"); break;}
        case AVAssetExportSessionStatusWaiting: { NSLog (@"AVAssetExportSessionStatusWaiting"); break;}
        default: { NSLog (@"didn't get export status"); break;}
    }
}]; 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:21:16.483

您可能会导致某种转换 - 这会很慢（不会比实时快多少）。确保您使用的是直通预设 AVAssetExportPresetPassthrough。

# objective-c - UIPickerView 和 UITextFields 问题

> ID：10870631
> 
> 赞同：-1
> 
> 时间：2012-06-03T13:11:30.893
> 
> 标签：objective-c, uitextfield, uipickerview

我有多个文本字段。在其中一个中，我想显示一个 UIPickerView。我是这样做的：

```
-(void)showPicker{
    [subject becomeFirstResponder];
    actionSheet = [[UIActionSheet alloc] initWithTitle:nil 
                                                             delegate:nil
                                                    cancelButtonTitle:nil
                                               destructiveButtonTitle:nil
                                                    otherButtonTitles:nil];

    [actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

    CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

    picker = [[UIPickerView alloc] initWithFrame:pickerFrame];
    picker.showsSelectionIndicator = YES;
    picker.dataSource = self;
    picker.delegate = self;

    [actionSheet addSubview:picker];
    [picker release];

    UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems: [NSArray arrayWithObject:@"Close"]];
    closeButton.momentary = YES; 
    closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);
    closeButton.segmentedControlStyle = UISegmentedControlStyleBar;
    closeButton.tintColor = [UIColor blackColor];
    [closeButton addTarget:self action:@selector(dismissActionSheet) forControlEvents:UIControlEventValueChanged];
    [actionSheet addSubview:closeButton];
    [closeButton release];

    [actionSheet showInView:[[UIApplication sharedApplication] keyWindow]];

    [actionSheet setBounds:CGRectMake(0, 0, 320, 485)];

}

-(void)dismissActionSheet{
    [actionSheet dismissWithClickedButtonIndex:0 animated:YES];
} 
```

当我关闭它时，工作表被关闭，但`subject`textField 上的键盘出现。

现在：

我该怎么做才能不在该文本字段上显示键盘`subject`？

这是我放弃键盘的地方：

```
- (void) resignKeyboard:(id)sender{

        if ([name isFirstResponder])
            [name resignFirstResponder];
        else if ([email isFirstResponder])
            [email resignFirstResponder];
        else if ([message isFirstResponder])
            [message resignFirstResponder];
        else if ([subject isFirstResponder]) {
            [subject resignFirstResponder];
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:48:48.907

可以防止键盘弹出。

首先将您的班级设置为 UIExfield 的代表

```
 textField.delegate = self 
```

在您的接口声明中添加：

```
<UITextFieldDelegate> 
```

现在实现 textFieldShouldBeginEditing::

```
 - (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    // Show UIPickerView

    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:52:12.180

使用 UItextField 代表：为此你需要添加 @interface YourViewController :UIViewController

如果 UItextField 通过右键单击从 xib 中获取，则将其委托添加到文件所有者

现在在代码中使用这个方法：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
   if(textField == subject)
   {
     return NO;
   }
   return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:56:00.440

通过使用处理显示选择器的操作的透明按钮来解决。“主题”文本字段被禁用。

# spring - p:pickList 在按下 p:commandButton 后未获取数据

> ID：10870632
> 
> 赞同：0
> 
> 时间：2012-06-03T13:11:35.907
> 
> 标签：spring, jsf-2, primefaces

我有一个用户列表页面，该页面将用户保存在 a`p:dataTable`中，并且在每一行中我都有一个显示弹出窗口的*更新按钮。*`p:dialog`页面和对话框在视图范围内进行管理（在 Spring 中实现）。

当我`editUserButton`在主页中按 时，弹出窗口会显示所有数据，然后我在*email*和*username*字段中输入无效字符串。将出现验证消息，但选项列表未填充任何值。

可能是什么问题呢？

这是主页（用户列表）代码段：

```
<ui:composition>
<f:view id="bodyView">
    <div id="content_body">
        <ui:include src="editUserDialog.xhtml"/>
        <h:form id="usersListForm">
        <table width="85%" align="center">
            <tr>
                <td>
                    <p:dataTable id="usersList" var="user" 
                             value="#{usersController.usersList}"
                             selectionMode="single"
                             rowKey="#{user.userId}">
                        <p:columnGroup type="header">
                            <p:row>
                                ...
                                <p:column rowspan="2" headerText="Users"/>
                                ...
                            </p:row>
                        </p:columnGroup>
                            ...
                        <p:column id="users" >
                            <p:commandLink id="editUserButton" oncomplete="addEditUserConfirmation.show()" actionListener="#{addEditUserController.selectionListener}"
                                    update=":addEditCustomerDialogForm:dialogContent">
                                    <f:attribute value="#{user}" name="selectedUser" />
                            </p:commandLink>
                        </p:column>
                    </p:dataTable>
                </td>
            </tr>
        </table>
        <br/>
        </h:form>
    </div>
</f:view> 
```

这是 p: 对话框代码：

```
<ui:composition>
<h:form id="addEditUserDialogForm">
        <p:dialog id="addEditUserDialog" severity="alert" widgetVar="addEditUserConfirmation" draggable="true" modal="true"
              resizable="false" >
        <p:outputPanel id="dialogContent">
        <div>
            <table cellpadding="5">
                <tr>
                    <td>
                        <p:inputText value="#{addEditUserController.addEditCustomerBean.userName}"
                                maxlength="250" size="50" label="user name" id="userName">
                            <f:validator validatorId="UsernameValidator"/>
                        </p:inputText>
                        <p:message for="userName"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p:inputText value="#{addEditUserController.addEditCustomerBean.email}"
                                maxlength="50" size="50" label="E-mail" id="email">
                            <f:validator validatorId="EmailValidator"/>
                        </p:inputText>
                        <p:message for="email"/>
                    </td>
                </tr>
            </table>
            <table cellpadding="5">
                <tr>
                    <td>
                        <p:pickList id="customersList" iconOnly="true"
                                    value="#{addEditUserController.customersList}" var="customer"
                                    itemValue="#{customer.value}" itemLabel="#{customer.label}"/>
                    </td>
                </tr>
            </table>
        </div>
        <div align="right">
            <p:commandButton value="#{isNewUser ? 'add' : 'update'}" id="updateUserButton"
                                         actionListener="#{addEditUserController.persistUser}"
                                         update="dialogContent"
                                         styleClass="fiftyone-default-button"
                                oncomplete="handleRequest(xhr, status, args)"/>
        </div>
        </p:outputPanel>
</p:dialog>
</h:form>
<script type="text/javascript">
    function handleRequest(xhr, status, args) {
        if(!(args.validationFailed &amp;&amp; args.validationFailed == true)) {
            addEditUserConfirmation.hide();
        }
    }
</script> 
```

这是支持 bean 代码：

```
import org.primefaces.model.DualListModel; 
import javax.annotation.PostConstruct;
import javax.faces.event.ActionEvent;
import java.util.List;

public class AddEditUserController {
   private AddEditCustomerBean addEditCustomerBean;
   private DualListModel<LabelValueBean> customersList;

   // ... constructor getters and setters

   public void selectionListener(ActionEvent event) throws Exception {
        selectedUser = event.getComponent().getAttributes().get("selectedUser");
        // some code
        AddEditCustomerBean = new AddEditCustomerBean();
        // some code
        customersList = getSomeCustomersDualListModel()
    }

    public void persistUser() throws Exception {
       // save user to DB
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T03:36:05.673

这是一个老问题，但我最近也遇到了这个问题，现在很无奈。让我们看看 p:pickList：

```
 <td>
                    <p:pickList id="customersList" iconOnly="true"
                                value="#{addEditUserController.customersList}" var="customer"
                                itemValue="#{customer.value}" itemLabel="#{customer.label}"/>
                </td> 
```

我们知道 [var="customer"] 是一个迭代器，但是当发生验证错误时，这个 var 被分配给 String 类型，这很奇怪。当您关闭此弹出窗口然后再次重新填充它时，您将收到一条错误消息，如下所示：字符串类型上没有属性标签（值）...客户变量现在是字符串，因此它没有值也没有标签财产。

现在，我使用一个棘手的方法，它不会总是奏效，这取决于你的代码：假设值和标签是唯一的，设置customersList类型为List String，customersList绑定标签，找到标签的值在后端提交时；为什么这种方式可以避免重新填充异常，那是因为迭代器始终是String类型，无论是否发生验证错误。

希望这可以帮助需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T21:15:18.677

我要做的第一件事是确保`selectionListener`正在调用该方法（要么在其上放置一个断点，要么打印一些东西并稍后在控制台中检查）。

如果是，则必须检查变量`customersList`是否正确更新，如果不是，则可能是 bean 作用域存在问题。

在您的示例代码中，不清楚您如何设置支持 bean 的范围，所以我假设您是在 Spring 的 XML 配置文件中进行的。

通过检查视图映射的内容，确保您确实在视图范围内拥有支持 bean `FacesContext.getCurrentInstance().getViewRoot().getViewMap()`：。

希望能帮助到你！

# weblogic-10.x - SOAPElementImpl 没有 setTextContent 方法

> ID：10870634
> 
> 赞同：0
> 
> 时间：2012-06-03T13:11:45.690
> 
> 标签：weblogic-10.x

weblogic 10.3.3 中的奇怪错误：

我在 weblogic 10.3.3 上运行 SpringIntegration 系统。我的问题是我的节点在运行时获取类型 weblogic.xml.saaj.SOAPElementImpl，并且当我从 SOAPUi 运行我的服务时，方法 setTextContent 失败并显示“UNIMPLEMENTED”。我将此添加到 startWeblogic.cmd 文件中，以使其与 apache 实现而不是 weblogic 一起运行，但似乎没有帮助： set JAVA_OPTIONS=-Djavax.xml.soap.SOAPConnectionFactory=org.apache.axis.soap.SOAPConnectionImpl - Djavax.xml.soap.MessageFactory=org.apache.axis.soap.MessageFactoryImpl -Djavax.xml.soap.SOAPFactory=org.apache.axis.soap.SOAPFactoryImpl

有人经历过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:11:55.910

我将实现从 更改`SOAPElement.setTextContent()`为`SOAPElement.setValue()`. 这似乎成功了。

# plugins - Joomla 安装上的自定义 CKeditor 插件

> ID：10870635
> 
> 赞同：0
> 
> 时间：2012-06-03T13:11:53.880
> 
> 标签：plugins, ckeditor, joomla1.5

我根据本教程为 CKeditor 编写了一个插件：[插件教程](http://docs.cksource.com/CKEditor_3.x/Tutorials)，但我无法在我的 Joomla 1.5 安装的 ckeditor 工具栏上显示它。我已将其复制到 plugins 文件夹中，在 config.js 中将其注册为额外插件，甚至通过设置以下内容尝试了后端设置中的高级配置：**CKEDITOR.config.extraPlugins = 'myplugin';** 或者这个**config.extraPlugins = 'myplugin'**但什么也没发生，没有任何按钮。有人可以列出 joomla 1.5 系统上插件的“安装过程”吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:38:38.597

您还必须在 jos_plugins 表中有一个条目。除非我正在为其构建安装包，否则我只需复制类似的记录并进行更改以匹配我的插件 - 确保“文件夹”中的值正确。

# c++ - 如何将 char/* 转换为 wchar_t/* ---但是

> ID：10870640
> 
> 赞同：0
> 
> 时间：2012-06-03T13:12:26.193
> 
> 标签：c++

我正在将（相当）旧的 C 代码转换为 VS2010。当我使用多字节选项编译程序时一切正常，但我必须将其转换为 UNICODE。

我收到很多与字符串对话相关的错误消息（但这并不奇怪）。我的问题与我必须使用 wchar 字符串（因为 UNICODE）但我还必须保留标准 char 值（程序需要使用标准 ascii 代码将数据写入文件）这一事实有关。

更清楚地说，使用 Windows 需要 UNICODE，但文件必须保存为 ascii 格式。我在很多地方都收到了错误，这就是我决定把这个问题放在这里的原因。

somoene 可以建议解决此类问题的最佳实践吗？

先感谢您！

编辑：

好吧，我不是 C/C++ 专家，这是我的第一个大型项目。我已经从第一个答案中尝试了您的建议，如下所示：}

```
 { 
TCHAR* strz1=_T("%u blocks converted.");
      if (n>0) 
      {
      sprintf(str,strz1,n)
      }
      else
      TCHAR* strz2=_T("No blocks found!"); 
      sprintf(str,strz2);
      TCHAR* strz3=_T("Status");
      MessageBoxW(hwnd,str,strz3,MB_OK|MB_ICONINFORMATION);
      return(fe);
    } 
```

我遇到了著名的错误：

错误 C2664：“sprintf”：无法将参数 2 从“TCHAR *”转换为“const char *”

错误 C2664：“MessageBoxW”：无法将参数 2 从“char [32]”转换为“LPCWSTR”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:16:17.827

如果您使用的是 MFC，请检查以下 CString 转换宏：[ATL 和 MFC 字符串转换宏。](http://msdn.microsoft.com/en-us/library/87zae4a3%28v=vs.80%29.aspx)

这样，您可以使用 UTF-8 导出文件并将它们从 UTF-8 读取回 UTF-16，这是存储 wchar_s 的自然方式。这样，您的应用程序可以使用 UNICODE 并仍以 ASCII 格式导出（UTF-8 向后兼容 ASCII）。

# haskell - 函数“show”的实现

> ID：10870642
> 
> 赞同：8
> 
> 时间：2012-06-03T13:13:21.420
> 
> 标签：haskell

我想实现`show`（二进制）函数的方法并使其能够区分 endofunctions `(a -> a)`。

类似于伪haskell代码的东西：

```
instance Show (a->b) where
    show fun = "<<Endofunction>>" if a==b
    show fun = "<<Function>>" if a\=b 
```

如何区分这两种情况？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-03T13:29:01.093

您需要启用一些扩展：

```
{-# LANGUAGE OverlappingInstances, FlexibleInstances #-}
module FunShow where

instance Show ((->) a a) where
    show _ = "<<Endofunction>>"

instance Show ((->) a b) where
    show _ = "<<Function>>" 
```

您需要`OverlappingInstances`，因为实例`a -> b`也匹配 endofunctions，因此存在重叠，并且您需要`FlexibleInstances`因为语言标准要求实例声明中的类型变量是不同的。

```
*FunShow> show not
"<<Endofunction>>"
*FunShow> show fst
"<<Function>>"
*FunShow> show id
"<<Endofunction>>" 
```

# silverlight - 如何在全景项目中动态创建按钮？

> ID：10870647
> 
> 赞同：1
> 
> 时间：2012-06-03T13:14:07.517
> 
> 标签：silverlight, xaml, windows-phone, panorama-control

我有字符串数组。它看起来像：

![在此处输入图像描述](../Images/556421a917911c2432709675680987db.png)

我有一个空的全景图：

```
<controls:Panorama x:Name="MainPanorama">

</controls:Panorama> 
```

我想动态地，使用我的数组，创建带有全景项目的全景页面，它应该是这样的：

```
<controls:Panorama x:Name="MainPanorama">
    <controls:PanoramaItem Header="first">
        <ScrollViewer>
            <StackPanel>
                <Button Name="button1" content="create"/>
                <Button Name="button2" content="save"/>  
                <Button Name="button3" content="open"/>
            </StackPanel>
        </ScrollViewer>  
    </controls:PanoramaItem>
    <controls:PanoramaItem Header="second">
        <ScrollViewer>
            <StackPanel>
                <Button Name="button4" content="save as"/>
                <Button Name="button5" content="import"/>
            </StackPanel>
        </ScrollViewer>  
    </controls:PanoramaItem>
</controls:Panorama> 
```

那么，问题来了：**如何在全景项目中动态创建按钮？**按钮必须有不同的名称。

ps：我在这里展示的数组不是实际的。在我的工作中我还有一个更大的，但我认为这足以理解这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:25:21.460

您可以为此目标使用项目控件（ListBox 等）：将字符串数组绑定为项目源并将按钮设置为项目模板。请阅读有关 Silverlight 中的控件和绑定的更多信息。

# jquery - jQuery ajax 问题 - 无法让我的功能正常工作

> ID：10870650
> 
> 赞同：1
> 
> 时间：2012-06-03T13:14:19.827
> 
> 标签：jquery, ajax

我正在尝试为 jquery 自定义一个自动完成插件。这应该非常简单。

它应该从 autocomplete.php 中提取名称列表，然后发送到“查找”。当我手动输入它时它可以工作，但是当我尝试使用函数 getnames() 获取名称时它不起作用。我是否正确返回数据？php 文件也可以。

```
var options, a;

function getnames() {
    $.ajax({
        type:'POST',
        dataType:'json',
        data:{ },
        url:'autocomplete.php',
        timeout:1000,
        success:function (data) {
            return data;
        }
    });
}

// Doesn't work:

// DOC READY
$("#members").one("click", function () {
    options = { 
        lookup:getnames() 
    };
    a = $('#members').autocomplete(options);
});

// Works:

// DOC READY
$("#members").one("click", function () {
    options = { 
        lookup:["name1","name2"]
    };
    a = $('#members').autocomplete(options);
}); 
```

自动完成.php

```
<?
header("Content-Type: application/json", true);
$info = array("name1","name2");
echo json_encode($info);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:24:49.297

您首先获得了名称并等待 ajax 响应。当它到达时，您必须启动自动完成。

例如（未经测试）：

```
function getnames() {
    $.ajax({
        type:'POST',
        dataType:'json',
        data:{ },
        url:'autocomplete.php',
        timeout:1000,
        success:function (data) {
            options = { 
                lookup:data
            };
            a = $('#members').autocomplete(options);
        }
    });
}

$("#members").one("click", function () {
    getnames();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-03T13:16:41.937

试试这个：

```
 function getnames() {
        var myData;
        $.ajax({
            type:'POST',
            dataType:'json',
            data:{ },
            url:'autocomplete.php',
            timeout:1000,
            success:function (data) {
              myData = data;
            }
        });
        return myData;
    } 
```

# r - 在 r 中映射（对齐）较小到较大的序列

> ID：10870655
> 
> 赞同：2
> 
> 时间：2012-06-03T13:15:36.650
> 
> 标签：r, sorting, dataset, alignment

我有以下框架数据集：

```
master <- data.frame (namest = c("A","B", "C","D", "E", "F"), 
 position =c( 0, 10, 20, 25, 30, 35))
master
      namest position
    1      A        0
    2      B       10
    3      C       20
    4      D       25
    5      E       30
    6      F       35 
```

这是更大的地图（比如路线图），其中有地点和位置的名称。现在在第二次调查中，我们有更小的子集（很多，这里只有 3 个）。

```
subset1 <- data.frame (namest = c("I", "A", "ii", "iii", "B"), 
 position = c(0, 10, 12, 14, 20))  
subset1
  namest position
1      I        0
2      A       10
3     ii       12
4    iii       14
5      B       20

subset2 <- data.frame (namest = c("E", "vii", "F"), position = c(0, 3,5))
 subset2
  namest position
1      E        0
2    vii        3
3      F        5

subset3 <- data.frame (namest = c("D", "vi", "v", "C", "iv"), 
   position = c(0, 2, 3, 5, 8))
subset3
  namest position
1      D        0
2     vi        2
3      v        3
4      C        5
5     iv        8 
```

您可以看到每个子集都有两个对 master 通用的名称，例如 subset3 中的 D 和 C。

现在我想把这些子集结合起来做更详细的掌握。意味着新的名字将被定位在新的地图中。看到一些子集（参见subset3）与master相比具有相反的顺序。

因此预期的输出是：

```
subsetalign <- data.frame(subsett = c(rep ("A-B", nrow(subset1)),
rep("C-D", nrow(subset3)), 
rep("E-F", nrow(subset2))), namest =  c(c("I", "A", "ii", "iii", "B"), 
rev (c("D", "vi", "v", "C", "iv")),c("E", "vii", "F")), 
position = c(subset1$position, rev (subset3$position), subset2$position))

 subsetalign
   subsett namest position
1      A-B      I        0
2      A-B      A       10
3      A-B     ii       12
4      A-B    iii       14
5      A-B      B       20
6      C-D     iv        8
7      C-D      C        5
8      C-D      v        3
9      C-D     vi        2
10     C-D      D        0
11     E-F      E        0
12     E-F    vii        3
13     E-F      F        5 
```

输出过程可以可视化为（我不是要创建这样的图，在这一点上，只是为了更好地解释）：

![在此处输入图像描述](../Images/22f725717ed2a59d68258d356dc38093.png)

编辑：由于两件事，它不是简单的 rbind：

(a) 子集根据它们的命令名称在主文件中的排列方式进行排序。例如子集1（AB）+子集3（CD）+子集2（EF），因为master中的顺序是ABCDEF

(b) 此外，如果子集的顺序与主节点相反，则应将它们颠倒。在子集 3 中，namest 的顺序是“D”-“vi”-“v”-“C”-“iv”，但在 master D 中，在 C 之后，所以这个 sustet 3 应该在绑定之前反转。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:42:33.310

假设子集在列表中

```
subsets <- list(subset1, subset2, subset3) 
```

主节点中锚点的位置是

```
idx <- lapply(subsets, function(x, y) match(x$namest, y$namest), master) 
```

每个子集的方向是

```
orientation <- sapply(idx, function(elt) unique(diff(elt[!is.na(elt)]))) 
```

而在master中的位置是

```
position <- sapply(idx, function(elt) min(elt, na.rm=TRUE)) 
```

子集可以排序`subsets[order(position)]`，必要时可以颠倒

```
updt <- Map(function(elt, dir) {
    if (dir == -1)
        elt[rev(seq_len(nrow(elt))),] 
   else elt
}, subsets[order(position)], orientation[order(position)]) 
```

和`rbind`编辑在一起，`do.call(rbind, updt)`。这是假设所有区间都只`master`表示一次。

# javascript - 如何显示使用 jQuery load() 将多个项目 ajax 到多个元素中？

> ID：10870657
> 
> 赞同：2
> 
> 时间：2012-06-03T13:15:59.140
> 
> 标签：javascript, ajax, jquery, jquery-load

我需要将大页面中的某些项目加载到页面的不同元素中。我编写的代码可以正常工作，但是项目会一个接一个地加载，并且在停顿很多之后。我想我可能做错了，因为我不是一个完整的开发人员，而只是一个设计师。

我的代码看起来像：

```
$("#lot-rental").load("/est.html #est-rental");
$("#lot-deposit").load("/est.html #est-deposit");
$("#lot-date").load("/est.html #est-date");
$("#lot-build").load("/est.html #est-build"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T13:19:16.577

用于`$.get()`加载数据，然后手动设置各个元素的内容。

```
$.get('/est.html', function(data) {
    $.each(['rental', 'deposit', 'data', 'build'], function(i, key) {
        $('#lot-' + key).html($(data).find('#est-' + key));
    });
}, 'html'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:19:24.833

为什么不使用`$.get`解析响应（查找元素）并将它们加载到主页：

```
$.get('/est.html',function(html){
    //wrap in jQuery so we can use it as context
    html = $(html);

    //find the item in html, and append to the container in the current page
    $('#est-rental',html).appendTo('#lot-rental');
    //     ^          ^                  ^-- target
    //     |          '-- context
    //     '-- the element to find in HTML
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T13:22:01.850

试试这个

```
$("#lot-rental").load("est.html#est-rental");
$("#lot-deposit").load("est.html#est-deposit");
$("#lot-date").load("est.html#est-date");
$("#lot-build").load("est.html#est-build"); 
```

# jquery - 带有 jQ uery UI 选项卡的数据表 - 优化

> ID：10870659
> 
> 赞同：1
> 
> 时间：2012-06-03T13:16:04.100
> 
> 标签：jquery, jquery-ui, datatables, resize

我已经使用以下链接为每个 jQuery UI 选项卡成功创建了各种数据表：

[http://www.datatables.net/examples/api/tabs_and_scrolling.html](http://www.datatables.net/examples/api/tabs_and_scrolling.html)

效果很好！在序言部分第二段的末尾，作者指出：

“可以添加优化以仅对表格的第一次显示重新调整大小。”

我想这样做，因为我的每个选项卡都显示一个数据表，并且不断调整大小会干扰用户体验。如果在第一次单击选项卡时有初始延迟是可以的，但是如果在用户切换回之前选择的选项卡时不需要调整数据表的大小，那就太好了。

任何建议将不胜感激。

谢谢。

巴拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T20:42:17.750

只需添加一个标志，指示您是否已经进行了调整大小。

# android - 从 Android 上的 URL 播放 mp4 文件

> ID：10870660
> 
> 赞同：1
> 
> 时间：2012-06-03T13:16:09.777
> 
> 标签：android, mp4

我已经研究了一段时间，我能找到的所有问题都指向 mp4 的“提示”，但我无法控制视频。

当我发现安卓市场上的 MX 视频播放器可以以某种方式播放我拥有的这些 mp4 网址时，我正要放弃。因此，目前我使用意图在 mx 播放器中启动网址，但我更愿意在我的应用程序中显示视频。

任何关于 mx player 如何做到这一点的想法都会很棒，

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T08:15:53.153

检查这个。它会帮助你。

```
String LINK = "http://www.boisestatefootball.com/sites/default/files/videos/original/01%20-%20coach%20pete%20bio_4.mp4";
setContentView(R.layout.video);
VideoView videoView =(VideoView)findViewById(R.id.webView);
MediaController mc = new MediaController(this);
mc.setAnchorView(videoView);
mc.setMediaPlayer(videoView);
Uri video = Uri.parse(LINK);
videoView.setMediaController(mc);
videoView.setVideoURI(video);
videoView.requestFocus();
videoView.start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T15:15:13.680

请参阅此[链接](http://asmncl.blogspot.in/2012/04/android-live-streaming-using-video-view.html)，我已通过创建视频视图粘贴了在您的应用中播放 mp4 视频的整个代码，您可能会出现小错误，您可以手动删除该错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-30T06:50:02.180

你可以使用`FullscreenVideoView`类来做到这一点。它是一个小型图书馆项目。它的等级是：

`compile 'com.github.rtoshiro.fullscreenvideoview:fullscreenvideoview:1.1.0'`

它的步骤在这里：

你的`VideoView`xml是这样的

```
<com.github.rtoshiro.view.video.FullscreenVideoLayout
        android:id="@+id/videoview"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /> 
```

在您的活动中，使用以下方式对其进行初始化：

```
 FullscreenVideoLayout videoLayout;
videoLayout = (FullscreenVideoLayout) findViewById(R.id.videoview);
        videoLayout.setActivity(this);

        Uri videoUri = Uri.parse("YOUR_VIDEO_URL");
        try {
            videoLayout.setVideoURI(videoUri);

        } catch (IOException e) {
            e.printStackTrace();
        } 
```

就是这样。快乐编码:)

如果想了解更多，请访问[这里](https://android-arsenal.com/details/1/1906)

# asp.net - Azure 诊断和 WadLogsTable

> ID：10870665
> 
> 赞同：0
> 
> 时间：2012-06-03T13:17:07.273
> 
> 标签：asp.net, azure, azure-storage, azure-blob-storage, azure-table-storage

我在 Windows Azure 上部署了一个应用程序，我激活了诊断监视器，如下所示：

```
public override bool OnStart()
    {

        CloudStorageAccount account = CloudStorageAccount.Parse("DefaultEndpointsProtocol=https;AccountName=[xxxxxx];AccountKey=[xxxxxxx]");

       var config = DiagnosticMonitor.GetDefaultInitialConfiguration();

        config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Information;
        config.Logs.ScheduledTransferPeriod = TimeSpan.FromMinutes(1D);    

        DiagnosticMonitor.Start(account, config);

        return base.OnStart();
    } 
```

我的问题是为什么在我为 Cerebrata 使用“Azure 诊断管理器 2”并使用“按需传输”之前，日志不会自动存储在“WADLogsTable”中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:04:59.907

我认为您的问题是您没有使用 SetCurrentConfiguration() 和 GetDefaultInitialConfiguration() 来最终节省传输时间和日志级别。您必须使用这些 API 的集合，如下所示：

```
GetDefaultInitialConfiguration() 
SetCurrentConfiguration() 
```

或者

```
GetCurrentConfiguration()
SetCurrentConfiguration() 
```

了解这两者之间的区别也很好。

# linux - Cygwin：“\rm -fr”和“rm -fr”命令之间的区别？

> ID：10870666
> 
> 赞同：5
> 
> 时间：2012-06-03T13:17:10.853
> 
> 标签：linux, shell, cygwin

我在 cygwin 环境的 windows 环境中运行了一个 shell 脚本。该脚本有一个清除功能，可以根据特定条件删除系统上的特定文件夹。

我准备了要删除的所有文件夹的列表，然后使用以下命令：

```
rm -rfv $purge (where purge is the list of directories I want to delete) 
```

现在，当我测试这个脚本时，目录根本没有被删除。首先我认为清除列表存在一些问题，但是在调试时我才知道清除列表很好。

经过大量调试和试验后，我只是对命令进行了一些小改动：

```
\rm -rfv $purge 
```

它只是一种命中和试验，脚本开始正常工作。现在据我所知 \rm 和 rm -f 都意味着强制删除。

现在我怎么能证明为什么'rm -f'现在更早工作但'\rm -f'做了。我想知道这两个命令之间的基本区别。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T17:58:55.173

可以是（理论上）以下`rm`之一：

*   shell 内置命令（但是我不知道任何带有这种内置命令的 shell）
*   外部命令（很可能是 /bin/rm）
*   外壳函数
*   别名

如果你把它放在`\`它之前（或引用它的任何部分，例如`"rm"`或什至`'r'm`）shell 将忽略所有别名（但不是函数）。

正如 jlliagre 所提到的，您可以询问 shell 什么`rm`是内置的以及正在`\rm`使用什么。`type`

**实验：**

```
$ type rm
rm is /bin/rm
$ rm() { echo "FUNC"; command rm "$@"; }
$ type rm
rm is a function
$ alias rm='echo ALIAS; rm -i'
$ type rm
rm is aliased to `echo ALIAS; rm -i' 
```

现在，我们有了 alias `rm`、 function`rm`和原始外部`rm`命令：让我们看看如何相互调用：

```
$ rm   # this will call alias, calling function calling real rm
$ rm
ALIAS
FUNC
rm: missing operand
$ \rm  # this will ignore alias, and call function calling real rm
FUNC
rm: missing operand
$ command rm  # this will ignore any builtin, alias or function and call rm according to PATH
rm: missing operand 
```

要深入了解它，请参阅`help builtin`、 `help command`和。`help alias``man sh`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T13:23:28.030

这意味着您的 rm 命令是别名~~或函数~~。反斜杠告诉 shell 使用真正的 rm 命令。

编辑：您可以通过命令判断`rm`指的是什么`type`，例如：

```
$ type rm
rm is /bin/rm 
```

.

```
$ type rm
rm is aliased to `rm -i' 
```

.

```
$ type rm
rm is a function
... 
```

# php - 使用 jQuery 从数据库中填充选择框

> ID：10870667
> 
> 赞同：1
> 
> 时间：2012-06-03T13:17:20.197
> 
> 标签：php, jquery, mysql, populate

我正在尝试使用 jQuery 从 mysql 数据库中的值填充一个选择框。

数据库调用：

```
<?php 
include 'db.php';
$con = mysql_connect($host,$user,$pass);
$dbs = mysql_select_db($databaseName, $con);

$tableName = "tbl_title";
$result = mysql_query("SELECT * FROM $tableName");

$data = array();
while ( $row = mysql_fetch_row($result) )
{
    $data[] = $row;
}
//echo json_encode( $data );    
?> 
```

HTML：

```
<select id="a1_title">
  <option>Default</option>
</select> 
```

我找到了很多例子，但没有任何与我正在寻找的东西特别相关的例子，除非我今天没有力量。

有没有人可以指向我的链接？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T13:25:46.973

下面的脚本将从 PHP 页面接收到的 JSON 加载下拉列表。

```
$(function(){

  var items="";
  $.getJSON("yourPHPPage.php",function(data){

    $.each(data,function(index,item) 
    {
      items+="<option value='"+item.ID+"'>"+item.Name+"</option>";
    });
    $("#a1_title").html(items); 
  });

}); 
```

假设收到`JSON`的是这种格式

```
[ { "ID" :"1", "Name":"Scott"},{ "ID":"2", "Name":"Jon"} ] 
```

我注意到的另一件事是您正在执行 SELECT * FROM 表名来获取项目。我认为你不应该那样做。你应该只做两列（ID & NAME，如果你的表中有这些列。）。

这是一个[JSFiddle 示例](http://jsfiddle.net/fhbMw/5/)，用于展示如何从 JSON 中获取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:25:27.013

```
 // retrieve value and text from ajax
 var html = "<option value=\""+value+"\">"+text+"</option>";
 $("#a1_title").append(html); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T07:23:07.117

我有同样的问题，你的建议是工作

HTML & JS

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script src="js/jquery-1.7.1.min.js" type="text/javascript"></script>
<title>Insert title here</title>
</head>
<body>
<script type="text/javascript">
$(function(){
      var items="";
      $.getJSON("get-data.php",function(data){
        $.each(data,function(index,item) 
        {
          items+="<option value='"+item.id+"'>"+item.name+"</option>";
        });
        $("#a1_title").html(items); 
      });
    });
</script>

<select id="a1_title">
  <option>Default</option>
</select>
</body>
</html> 
```

php

```
include 'configurations/db-connections.php';

$q = "select id, name from college";
$sql = mysql_query($q);
$data = array();
while($row = mysql_fetch_array($sql, true)){
    $data[] = $row; 
};
echo json_encode($data); 
```

# php - 使用重定向在页面之间传递 php 变量

> ID：10870669
> 
> 赞同：1
> 
> 时间：2012-06-03T13:17:29.577
> 
> 标签：php

所以，我浏览了不同的帖子和其他资源，但我仍然无法让它发挥作用。似乎基本和常见，但我迷路了。这是我的代码。页面“test_start.php”：

```
<html>
<head>
<title>Test</title>
</head>
<body>
    <p>Click <a href="test_script.php">here</a></p>
</body>
</html> 
```

页面“test_script.php”：

```
<?php
    session_start();
    $_SESSION['passed']="My text!";
    header("Location: test_ultima.php");
?> 
```

页面“test_ultima.php”：

```
<?php session_start(); ?>
<html>
<head>
    <title>Something</title>
</head>
<body>
    <p>This text shows, so redirect worked!</p>
    <?php
        echo "<p>Result isset: ".isset($_SESSION['passed'])."</p>";
        echo "<p>I passed:".$_SESSION['passed']."</p>";
    ?>
</body>
</html> 
```

当我单击链接时，我看到以下内容：

此文本显示，因此重定向有效！
结果 isset：
我通过了：

我究竟做错了什么？请，如果可以的话，还请解释它为什么以及如何工作......

**补充说明**：第一个文件是 .php 因为最后它还会包含一些 php 代码......这显然是一个首先让它工作并了解它是如何工作的例子......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:48:04.993

来自 OP 的评论：

> session_start() [function.session-start]: open(C:\PHP\sessions\sess_87ruc3n1gb0e5ivlsfurgr0nr0, O_RDWR) 失败：C:\Inetpub\wwwroot\missione-berna.ch\test_ultima 中没有这样的文件或目录 (2)。第 3 行的 php

这意味着 PHP 尝试写入会话的目录不存在，或者它只是没有在该目录中读/写的权限。

所以你首先需要检查目录是否真的存在。如果存在，您应该检查 apache（或其他 web 服务）用户对该目录的权限。

# javascript - Javascript平均拆分数组

> ID：10870670
> 
> 赞同：1
> 
> 时间：2012-06-03T13:17:39.880
> 
> 标签：javascript, arrays, split

我有以下json：

[http://pastebin.com/uxpWk2CY](http://pastebin.com/uxpWk2CY)

而且我需要根据浏览器的宽度将其拆分为多个数组。

这是我的javascript：

```
 var imageArray = jQuery.parseJSON(data);

    var splitArrayInto = jQuery(document).width() / 300;
    splitArrayInto = Math.floor(splitArrayInto);

    var seperateImageArrays = array_fill(0, splitArrayInto);

    for(var i = 0; i < splitArrayInto; i++){
        seperateImageArrays[i % splitArrayInto][i] = imageArray[i];
    } 
```

当我运行它时，我得到

无法将未定义转换为对象

单独的ImageArrays[i % splitArrayInto][i] = imageArray[i];

任何帮助表示赞赏。

编辑：忘记添加 array_fill 函数。

```
//PHP array_fill
function array_fill (start_index, num, mixed_val) {
    var key, tmp_arr = {};

    if (!isNaN(start_index) && !isNaN(num)) {
        for (key = 0; key < num; key++) {
            tmp_arr[(key + start_index)] = mixed_val;
        }
    }

    return tmp_arr;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:48:43.320

当您调用时，`array_fill`您没有传递第三个参数，因此您的所有数组元素都设置为`undefined`... 并且`undefined`不能使用`[i]`.

`[]`考虑改为作为第三个参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:54:18.153

由于您使用`array_fill`的是 PHPJS，您是否考虑过使用[`array_chunk`](http://phpjs.org/functions/array_chunk:306)？这会将您的大数组分成大小相等的较小数组（最后一个除外，如果数字不均分，它可能会更少）。

# extjs - 嵌套的可扩展网格 - 内部网格不会正确折叠和展开

> ID：10870671
> 
> 赞同：3
> 
> 时间：2012-06-03T13:17:40.277
> 
> 标签：extjs, extjs3

我正在尝试修改可以在[此处找到的第一个 ExtJS 示例](http://dev.sencha.com/deploy/ext-3.3.0/examples/grid/grid-plugins.html)

我的需要。我想要一个可扩展的网格，在其中单击特定项目会打开另一个可扩展的网格。

我曾尝试将这些更改引入现有代码并遇到以下问题：

1.  在每个内部网格中，加载网格时，行旁边会显示一个减号
2.  单击内部网格中的一行时，它会打开，但再次单击时，它不会折叠。
3.  我注意到每个内部网格的行和外部网格的行之间存在“神秘”的联系——例如，双击内部网格的第二行会在第二个网格中引起折叠/展开反应外网格中的行（但扩展后对内网格没有影响）。

我在哪里弄错或滥用了代码？

这是我的代码：

```
var urlObject = Ext.urlDecode(document.location.search);
var request_url = 'my_url';
var request_state = 'my_state';

// row expander
var expander = new Ext.ux.grid.RowExpander({
    tpl : new Ext.Template(
        '<p>{layer_name} --- under construction!!!</p>'
    )
});

expander.on('expand', function(rowExp, rec, body, rowIndex) {

    var inner_expander = new Ext.ux.grid.RowExpander({
        tpl : new Ext.Template(
            '<p>under construction!!!</p>'
        )
    });

    var sub_layer_store = new Ext.data.JsonStore ({
        url: request_url,
        fields: ['sub_layer_name'],
        root: 'sub_layer_names',
        baseParams: {
            _state: request_state,
            _action: 'get_sub_layer_names',
            layer_name: rec.data.layer_name
        }
    });

    var sub_layer_grid = new Ext.grid.GridPanel({
        store: sub_layer_store,
        cm: new Ext.grid.ColumnModel({
            defaults: {
                width: 20,
                sortable: true
            },
            columns: [
                inner_expander,
                {header: "Sub-Layer", width: 40, dataIndex: 'sub_layer_name'}
            ]
        }),
        viewConfig: {
            forceFit:true
        },        
        width: 1100,
        height: 200,
        plugins: inner_expander,
        collapsible: true,
        animCollapse: false,
        title: 'Sub-Layers information',
        iconCls: 'icon-grid',
        renderTo: body
    });

    //load the sub grid
    sub_layer_grid.store.load();

});

var layers_store = new Ext.data.JsonStore ({
    url: request_url,
    fields: ['layer_name'],
    root: 'layer_names',
    baseParams: {
        _state: request_state,
        _action: 'get_layer_names'
    }
});

var layers_grid = new Ext.grid.GridPanel({
    store: layers_store,
    cm: new Ext.grid.ColumnModel({
        defaults: {
            width: 20,
            sortable: true
        },
        columns: [
            expander,
            {header: "Layer", width: 40, dataIndex: 'layer_name'}
        ]
    }),
    viewConfig: {
        forceFit:true
    },        
    width: 1200,
    height: 500,
    plugins: expander,
    collapsible: true,
    animCollapse: false,
    title: 'Layers information',
    iconCls: 'icon-grid'
});

Ext.onReady(function(){

    var el = document.getElementById('my_container');

    layers_grid.store.load();
    layers_grid.render(el);

}); 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:40:41.560

你的第三个问题的唯一原因是你没有提到 id 到网格并遵循它.. 默认情况下，extjs 使用行和列索引来折叠和展开。所以内部网格的第二行的行索引将与外部网格的第二行的行索引相同。可能与其他两个问题的原因相同。如果有人需要源代码，请告诉我将附上示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:55:43.873

拥有另一个可扩展的网格很复杂（对于用户而言）。您可以尝试在左侧区域设置一个带有树的边框面板，在右侧区域设置详细信息（如果适用于您的设计）。

# wcf - 在没有客户端证书的情况下通过 Tcp 使用 Wcf Ssl 证书（仅限服务器端）

> ID：10870677
> 
> 赞同：5
> 
> 时间：2012-06-03T13:18:35.900
> 
> 标签：wcf, ssl, https, certificate

有什么方法可以将 WCF SSL 与 NetTcpBinding 一起使用，不需要在客户端计算机上安装客户端证书？（如果我没记错的话，SSL V2）。

我们希望服务器证书将在客户端的受信任存储中，以通过服务器的公钥对其消息进行身份验证和加密，这意味着只有服务器机器将持有私钥证书。

我们在双方都使用 NetTcpBinding 而不是 customBinding。如果它可以完成，它的正确配置是什么？（在客户端和服务器配置上）

提前致谢。

* * *

这是我的 wcf 配置。

****服务器配置：****

```
 `<configuration>
      <system.serviceModel>
        <bindings>
         <netTcpBinding>
            <binding name="TcpSecureBinding">
            <security mode="Transport">
              <transport clientCredentialType="Certificate"/>            
            </security>
       </binding>
         </netTcpBinding>
       </bindings>
       <behaviors>
         <serviceBehaviors>
           <behavior name="ServiceCredentialsBehavior">          
             <serviceDebug includeExceptionDetailInFaults="True" />
             <serviceMetadata httpGetEnabled="true" />
             <serviceAuthorization 
                 principalPermissionMode="UseWindowsGroups">
             </serviceAuthorization>
          <serviceCredentials>
               <windowsAuthentication includeWindowsGruops="true"            
                                      allowAnonymousLogons="false"/>
               <clientCertificate>
                     <authentication certificateValidationMode="none"/>
               </clientCertificate>
               <serverCertificate
                   findValue="thumbprint"
                   storelocation="LocalMachine"
                   x509FindType="FindMyThumbprint"
                   storeName="My"/>
           </serviceCredentials>
        </behavior>
       </serviceBehaviors>
      </behaviors>
    <services>
        <service behaviorConfiguration="ServiceCredentialsBehavior"
               name="ServiceModel.Calculator">
          <endpoint address="net.tcp://localhost:8040/Calculator"
                  binding="netTcpBinding"
                  bindingConfiguration="TcpSecureBinding"
                  contract="ServiceModel.ICalculator" >
           <identity>
               <dns value="localhost"/>
           </identity>
         </endpoint>
        </service>
     </services>
    </system.serviceModel>
    </configuration>` 
```

 ******客户端配置：****

```
 `<configuration>
      <system.serviceModel>
        <client>
         <endpoint address="net.tcp://localhost:8040/Calculator"
                behaviorConfiguration="endpointCredentialBehavior"
                binding="netTcpBinding" 
                bindingConfiguration="Binding1" 
                contract="ServiceModel.ICalculator">
          <identity>
               <dns value="localhost"/>
          </identity>
          </endpoint>
        </client>
      <behaviors>
        <endpointBehaviors>
          <behavior name="endpointCredentialBehavior">
          </behavior>
         </endpointBehaviors>
       </behaviors>
       <bindings>
         <netTcpBinding>
          <binding name="Binding1">
            <security mode="Transport">
              <transport clientCredentialType="Windows" />
             </security>
          </binding>
          </netTcpBinding>
        </bindings>
     </system.serviceModel>
    </configuration>` 
```

 *** * *

我正在添加我当前的服务器和客户端配置。另一个问题：

1.  在身份验证级别，我们希望客户端对服务器的证书进行身份验证（我认为服务器的公钥应该在trustedPeople 存储中），这可能吗？

2.  你推荐我们使用传输安全或消息吗？

3.  如果我们想通过 NTLM (clientCredentialType=Windows) 对客户端和服务器进行身份验证，是否可以在服务器的证书身份验证之外完成，或者只应用其中之一？到目前为止，我们已经使用了 NTLM 身份验证。

4.  现在我得到异常：“'net.tcp://servername:8040/ ****** '不支持请求的升级。这可能是由于绑定不匹配（例如在客户端而不是在服务器上启用了安全性） 。” 我了解发生此错误是因为客户端在 om 证书中使用 Windows 安全性和服务器，但是当我将客户端安全性也更改为证书时，我收到错误：“未提供客户端证书”。但我不想设置客户的证书，这是我主要问题的一部分。

5.  我们读到我们可以将这个标签用于服务器的证书身份验证：

    ```
     <identity>
          <certificate encodedValue="encoded certificate"/>
        </identity> 
    ```

但是，我认为这种身份验证是通过编码证书完成的，当我们希望通过在客户端存储（trustedPeople）中搜索服务器的公钥来执行证书的识别时。这些信息真的是真的吗？这种身份标签可以替代在客户的受信任商店中搜索公钥吗？

希望您能以这种方式提供帮助，再次感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-05T14:49:34.267

如果您正在使用 netTcpBiding 并且需要使用传输安全性，那么您有 3 个选项，第一个选项需要服务证书，第二个不需要证书，第三个需要服务证书和客户端证书。对于您的场景，您应该使用 option1 通过它的证书对服务进行身份验证，并为消息提供机密性和完整性。

C >> 机密性
I >> 完整性
A >> 身份验证（这将发生在客户端）

1-选项一提供（C + I）客户端不会进行身份验证，在这种情况下，将使用TCP SSL（不是HTPS SSL）来提供C和I，并且服务将是

```
<!--//Below are the configuration for both the service and the client-->
<netTcpBinding>
    <binding name="TcpSecureBinding">
      <security mode="Transport">
        <transport clientCredentialType="None"></transport>
      </security>
    </binding>
  </netTcpBinding> 
```

也因为要使用TCP SSL，所以服务必须为客户端提供证书，所以需要在服务器上安装证书，并配置服务使用这个证书来证明自己的身份，还需要安装根证书客户端机器上服务证书的授权证书（通常在 LocalMachine/Trusted Root Certification Authorities 中），并且服务需要具有以下行为来指定服务的证书

```
<serviceBehaviors>
    <behavior>
      <serviceCredentials>
        <serviceCertificate findValue="localhost"
                            x509FindType="FindByIssuerName" />
      </serviceCredentials>
    </behavior>
  </serviceBehaviors> 
```

2- 选项二提供 (A+ [C + I])，当您通过 protectionLevel 元素配置时，C 和 I 是可选的。客户端身份验证将是 windows 身份验证（通常会使用 Windows Stream Security 来实现 A、C 和 I）

```
<!--//Below are the configuration for both the service and the client-->
<netTcpBinding>
    <binding name="TcpSecureBinding">
      <security mode="Transport">
        <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign"></transport>
      </security>
    </binding>
  </netTcpBinding> 
```

3-选项3提供（A + C + I），C和I不是可选的，客户端身份验证将通过客户端证书（每个客户端必须有自己的证书），在这种情况下TCP SSL（不是HTPS SSL ) 将用于提供 A、C 和 I。

```
<!--//Below are the configuration for both the service and the client-->
<binding name="TcpSecureBinding">
      <security mode="Transport">
        <transport clientCredentialType="Certificate"></transport>
      </security>
    </binding> 
```

也因为要使用TCP SSL，所以服务必须为客户端提供证书，所以需要在服务器上安装证书，并配置服务使用这个证书来证明自己的身份，还需要安装根证书客户端机器上服务证书的授权证书（通常在 LocalMachine/Trusted Root Certification Authorities 中），并且服务需要具有以下行为来指定服务的证书

```
<serviceBehaviors>
    <behavior>
      <serviceCredentials>
        <serviceCertificate findValue="localhost"
                            x509FindType="FindByIssuerName" />
      </serviceCredentials>
    </behavior>
  </serviceBehaviors> 
```****

# iphone - 从 AppDelegate applicationWillEnterForeground 控制 AVAudioPlayer

> ID：10870680
> 
> 赞同：0
> 
> 时间：2012-06-03T13:18:51.133
> 
> 标签：iphone, ios, ios5

如果用户在 iDevice 的音乐播放器播放时返回游戏，我想停止我的游戏音乐。

AppDelegate.m applicationWillEnterForeground 正在成功检查音乐播放器，**但我不知道如何从这里告诉我的 AVAudioPlayer 停止。**

真的很感激有人能告诉我怎么做吗？这让我非常头疼！

**AppDelegate.m:**

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    UInt32 propertySize, audioIsAlreadyPlaying=0;
    propertySize = sizeof(UInt32);
    AudioSessionGetProperty(kAudioSessionProperty_OtherAudioIsPlaying, &propertySize, &audioIsAlreadyPlaying);

    if(audioIsAlreadyPlaying){¨
        NSLog(@"iDevice Music is playing!");
        [myAudioPlayer stop];//<<< *** the problemo bit *** :(
    }
} 
```

**Page1ViewController.m 代码，以防万一：**

```
- (void)viewDidLoad
{
    NSError *myAudioSessionError = nil;
    myAudioSession = [AVAudioSession sharedInstance];
    if ([myAudioSession setCategory:AVAudioSessionCategoryAmbient error:&myAudioSessionError]){
        NSLog(@"AVAudioSession created.");
    }else {
        NSLog(@"AVAudioSession not created.");
    }

    …
    (if/else statements call the createAudioPlayer method.)
}

-(void)createAudioPlayer{
    dispatch_queue_t dispatchQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(dispatchQueue, ^(void){
        NSBundle *mainBundle = [NSBundle mainBundle];
        NSString *musicFilePath = [mainBundle pathForResource:@"main_music" ofType:@"aiff"];
        NSData *musicFileData = [NSData dataWithContentsOfFile:musicFilePath];
        NSError *myAudioPlayerError = nil;
        //Start the audio player
        self.myAudioPlayer = [[AVAudioPlayer alloc] initWithData:musicFileData error:&myAudioPlayerError];
        if (self.myAudioPlayer != nil){//Check AVAudioPlayer successfully initiated
            self.myAudioPlayer = self;
            self.myAudioPlayer = -1;//loop continuously
            if ([self.myAudioPlayer prepareToPlay]){
                //(successfully created AudioPlayer)
            }else {
                //(failed to play)
            }
        }else {
            //(failed to initiate an AudioPlayer)
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:48:29.847

或者，如果您不想创建 Page1ViewController 的属性，您可以在 Page1ViewController 中创建一个方法，该方法返回 myAudioPlayer 以便在另一个类（如 AppDelegate）中使用。下面的例子..

```
//Page1ViewController.h
@interface Page1ViewController : UIViewController...
....
-(AVAduioPlayer*)currentPlayer;
@end

//Page1ViewController.m
-(AVAudioPlayer*)currentPlayer {
  return self.myAudioPlayer;
}

//AppDelegate.m

- (void)applicationWillEnterForeground:(UIApplication *)application {

  [[page1ViewController currentPlayer] stop];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:25:24.990

首先，myAudioPlayer 是 Page1ViewController 的一个属性，但在您的 AppDelegate 中，您引用它就像在委托中声明它一样。

您应该获得对 Page1ViewControllers 音频播放器的引用以停止。

除非我对您的代码有误解，否则您可能应该这样做。

```
- (void)applicationWillEnterForeground:(UIApplication *)application {

......

[self.page1ViewController.myAudioPlayer stop];

......

} 
```

# haskell - F# 等效于 Haskell scanl/scanr

> ID：10870683
> 
> 赞同：3
> 
> 时间：2012-06-03T13:19:30.557
> 
> 标签：haskell, f#, fold

是否有与 Haskell `scanl`/等效的 F# `scanr`？这些函数执行折叠，但它们以列表的形式报告所有中间累加器状态。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T13:21:48.997

是的，它们是[`List.scan`](http://msdn.microsoft.com/en-us/library/ee370366.aspx)和[`List.scanBack`](http://msdn.microsoft.com/en-us/library/ee340287)。

# asp.net - 使用 NuGet 安装 Facebook C# SDK v6.0 时应创建哪些新设置？

> ID：10870685
> 
> 赞同：3
> 
> 时间：2012-06-03T13:19:54.800
> 
> 标签：asp.net, facebook, facebook-c#-sdk

从[Facebook C# SDK 入门指南](http://csharpsdk.org/docs/web/getting-started)：

> 安装软件包后，您必须配置应用程序。我们需要更改的唯一设置是“网站”设置下的“网站 URL”。

我使用 NuGet 安装了 SDK（我第一次使用 NuGet），但我看不到我应该按照说明在哪里配置“站点 URL”。使用 NuGet 安装包时，是否应该在 Web.Config 中自动创建新条目？它当然不在我的项目中——在 Web.Config 中没有创建新条目，我不确定我应该在哪里查看。

v6.0 的文档似乎非常缺乏——我什至在任何地方都找不到示例“Hello World”类型的项目。

Facebook SDK 版本 6.0.10.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:29:29.617

您是否已经在[https://developers.facebook.com/](https://developers.facebook.com/)上创建了 Facebook 应用程序？创建应用程序时，您可以通过顶部的“应用程序”导航按钮查看它们。您为应用程序设置的设置之一是“siteurl”设置。您必须将其设置为：“http://localhost:57843/”。该数字是您的 ASP .NET 应用程序的端口号。运行应用程序时，您可以在 url 栏中看到它。

好吧，有一些文档。参见 Facebook C# SDK 的官方网站：http: [//csharpsdk.org/](http://csharpsdk.org/)。这个例子会在你完成后给你一个工作的 web 应用程序：[http://csharpsdk.org/docs/web/getting-started](http://csharpsdk.org/docs/web/getting-started) 这个例子会询问你的应用程序 ID。那就是您在上面创建的 facebook 的应用程序 ID。

# c++ - 主教给出错误的答案（spoj）

> ID：10870687
> 
> 赞同：-3
> 
> 时间：2012-06-03T13:20:16.477
> 
> 标签：c++, c

我试图解决这个问题，但我无法接受它，它的输入很大，所以我想用字符串来处理它，但我仍然得到错误的答案。问题陈述在这里[BISHOPS](http://www.spoj.pl/problems/BISHOPS/)

这是我的代码：

```
#include<iostream>
#include<string.h>
#include<cstdio>
#include<vector>

using namespace std;

int main()
{
    string s;
    int z;
    cin>>s;
    z = s.length();
    int i;
    vector<int>v;
    int arr[z];
    for(i=0;i<z;i++)
    {
        arr[i] = (s[i]-'0');
    }

    if ((arr[0] == 0 || arr[0] ==  1) && z == 1)
    {
        printf("%d",arr[0]);
    }
    else
    { 
        int carry = 0;
        for(i=z-1;i>=0;i--)
        {
            int x = (carry + 2*arr[i])%10;
            v.push_back(x);
            carry = ( 2*arr[i] )/10;
        }
        if(carry > 0)
        {
            v.push_back(carry);
        }

        int t = v.size();
        int g=0;
        if(v[g] >=2)
        {
            v[g] = v[g]-2;
        }
        else
        {
            v[g] = 8;
            g++;
            while(v[g] == 0)
            {
                v[g] = 9;
                g++;
            }
            v[g] = v[g] -1;
        } 

        if(v[t-1] == 0)
        {
            for(i=t-2;i>=0;i--)
                {
                    printf("%d",v[i]);
                }
        }
        else
        {
            for(i=t-1;i>=0;i--)
            {
                printf("%d",v[i]);
            }
        }
    }

        return 0;
} 
```

问题是在 nxn 棋盘的问题中找到最大不可攻击的主教，我认为我做对了，因为除了每个其他棋盘的 1x1 之外，最大不可攻击的主教将是 2*n-2。但仍然 spoj 给出了错误的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T14:21:01.693

所有大于 的输入都有整数溢出`INT_MAX`：

```
int y=0,i,z;
z = s.length();
for(i=0;i<z;i++)
{
    y = y*10 + (s[i]-'0');
} 
```

您正在尝试将输入转换为`int`，它通常是带符号的 32 位类型，`INT_MAX`等于 2147483647 = 2 ^(31) -1。每当输入大于该值时，在第十位您就会溢出（顺便说一句，这是未定义的行为）。

您需要一种方法来表示/处理大于 10 ^(100)的数字。C 或 C++ 中没有标准整数类型足以处理这个问题。您必须滚动自己的大整数类型（因为 SPOJ 可能不会将代码与 GMP 链接）。对于这个问题，一些非常简单的事情就足够了。

# objective-c - 在Objective C中的特定字符处拆分字符串

> ID：10870692
> 
> 赞同：0
> 
> 时间：2012-06-03T13:20:51.210
> 
> 标签：objective-c

我们想用特定字符分割字符串而不删除字符。例如，如果输入是：`if (x>4) then {x = 1}` 输出需要是：`if, (, x, >, 4, ), then, {, x, =, 1, }`

*   我们尝试使用`characterSetWithCharactersInString`，但它从字符串中删除了字符..

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:23:08.430

看看[NSScanner](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)。

然后做类似的事情

```
 NSScanner *scanner = [NSScanner scannerWithString:myString];
 BOOL foundIf = [scanner scanString:@"if" intoString:nil];
 // etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T17:38:54.287

如果您还没有弄清楚，以下将起作用：

```
NSString *input = @"if (x>4) then {x = 1}";
NSMutableArray *splitArray = [NSMutableArray array];    
NSCharacterSet *specialChars = [NSCharacterSet characterSetWithCharactersInString:@"(){}[]<>{}="];    
NSScanner *scanner = [NSScanner scannerWithString:input];    
while (![scanner isAtEnd])
{
    NSString *buffer;
    if ([scanner scanCharactersFromSet:[NSCharacterSet alphanumericCharacterSet] intoString:&buffer])
    {
        [splitArray addObject:buffer];            
    }
    else if ([scanner scanCharactersFromSet:specialChars intoString:&buffer])
    {
        [splitArray addObject:buffer];            
    }
    else 
    {
        [scanner setScanLocation:[scanner scanLocation] + 1];
    }
}    
NSLog(@"%@", splitArray); 
```

您可以将任何您想要的字符添加到 specialChars。

PS：我今天第一次读到 NSScanner，这是一个很好的练习，可以真正使用它！我建议你通过这个[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/Scanners.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/Scanners.html)

# c# - 如何使用循环调用具有不同数量参数的函数？

> ID：10870693
> 
> 赞同：0
> 
> 时间：2012-06-03T13:20:56.203
> 
> 标签：c#, function, loops, arguments

可以使用 1、2 或 3 个字符串作为参数调用函数 WriteStartAttribute。我想调用它的数量取决于 writeInfo 中的参数数量。为了澄清，我想使用循环执行以下操作：

```
if (writeInfo.Count == 2)
{
    writer.WriteStartAttribute(writeInfo[1]);
}
else if (writeInfo.Count == 3)
{
    writer.WriteStartAttribute(writeInfo[1], writeInfo[2]);
}
else if (writeInfo.Count == 4)
{
    writer.WriteStartAttribute(writeInfo[1], writeInfo[2], writeInfo[4]);
} 
```

我尝试使用这样的数组（和列表）：

```
for (int i = 0; writeInfo.Count() - 1 < i; i += 1)
{
     argumentList[i] = writeInfo[i + 1];
}
writer.WriteStartAttribute(argumentList); 
```

但是，因为没有重载接受数组（或列表），所以这不起作用。
如何使用循环调用具有不同数量参数的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:28:28.697

假设这是[XmlTextWriter.WriteStartAttribute](http://msdn.microsoft.com/en-us/library/aa336051%28v=vs.71%29)，它不接受`params`，因此您必须手动处理它。

创建您自己的`params`方法，然后将您的`if`语句放在那里：

```
void WriteStartAttribute(params string[] values) 
{
     if (values.Length > 4 || values.Length < 2) throw new ArgumentException();
     if (values.Count == 2)
     {
        writer.WriteStartAttribute(values[1]);
     }
     else if (values.Count == 3)
     {
        writer.WriteStartAttribute(values[1], values[2]);
     }
     else if (writeInfo.Count == 4)
     {
        writer.WriteStartAttribute(values[1], values[2], values[4]);
     }
  } 
```

然后在你的循环中调用它：

```
WriteStartAttributes(writeInfo); 
```

使其成为扩展方法的奖励积分：

```
public static void WriteStartAttribute(this XmlTextWriter writer, params string[] values) 
...

writer.WriteStartAttributes(writeInfo); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T13:23:25.377

您可能正在寻找[`params keyword`](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx).

> params 关键字允许您指定一个方法参数，该参数采用可变数量的参数。
> 
> 您可以发送以逗号分隔的参数声明中指定类型的参数列表，或指定类型的参数数组。您也可以不发送任何参数。

```
public void WriteStartAttribute(params string[] list)
{
    for (int i = 0; i < list.Length; i++)
    {
        Console.Write(list[i] + " ");
    }
    Console.WriteLine();
}

// this works:
writer.WriteStartAttribute(writeInfo[1], writeInfo[2], writeInfo[4]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T13:31:05.603

嗯，使用反射：

```
MethodInfo mi = writer.GetType().GetMethod(WriteStartAttribute);
mi.Invoke(instance, argumentList); 
```

调用函数接受要传递给函数的参数数组。这似乎是您所期望的。

我不喜欢在可能的手动（更长）方式的情况下使用反射。

# ruby-on-rails - 如何使用 rspec 在控制器的新操作中测试实例变量的分配？

> ID：10870694
> 
> 赞同：6
> 
> 时间：2012-06-03T13:21:00.703
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, testing, rspec

我对测试相当陌生，并且有一个要测试的 UsersController。我从新动作开始，到目前为止有以下内容；

```
require 'spec_helper'

describe UsersController do

  describe "GET 'new'" do
    it "assigns a new User to @user" do
      user = User.new
      get :new
      assigns(:user).should eq(user)
    end
    it "renders the :new template"
  end

end 
```

到目前为止，我的 UsersController 看起来像这样

```
class UsersController < ApplicationController
  def new
    @user = User.new
  end
end 
```

我希望我的第一个测试能够工作，但是当我运行它时，我得到以下结果；

```
Failures:

  1) UsersController GET 'new' assigns a new User to @user
     Failure/Error: assigns(:user).should eq(user)

       expected: #<User id: nil, email: nil, username: nil, password_digest: nil, created_at: nil, updated_at: nil>
            got: #<User id: nil, email: nil, username: nil, password_digest: nil, created_at: nil, updated_at: nil>

       (compared using ==)

       Diff:#<User:0x007fe4bbfceed0>.==(#<User:0x007fe4bce5c290>) returned false even though the diff between #<User:0x007fe4bbfceed0> and #<User:0x007fe4bce5c290> is empty. Check the implementation of #<User:0x007fe4bbfceed0>.==.
     # ./spec/controllers/users_controller_spec.rb:9:in `block (3 levels) in <top (required)>' 
```

在控制台中玩耍会发现以下内容；

```
irb(main):001:0> a = User.new
=> #<User id: nil, email: nil, username: nil, password_digest: nil, created_at: nil, updated_at: nil>
irb(main):002:0> b = User.new
=> #<User id: nil, email: nil, username: nil, password_digest: nil, created_at: nil, updated_at: nil>
irb(main):003:0> a == b
=> false 
```

所以现在我很好奇为什么 2 个空的 ActiveRecord 对象不相等（毕竟`Array.new == Array.new`返回 true），以及我必须做些什么才能使我的测试通过。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T13:31:53.227

您可能应该将测试更改为以下内容：

```
describe UsersController do

  describe "GET 'new'" do
    it "assigns a new User to @user" do
      get :new
      assigns(:user).should be_new_record
      assigns(:user).kind_of?(User).should be_true
    end
    it "renders the :new template"   end

end 
```

你也会有同样的效果。如果两个对象没有被保存，它们就没有主键，Rails 将使用 object_id 相等性来比较它们，这就是它们不是**==**的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:37:38.800

Activerecord 相等主要是关于两个对象是否对应于同一数据库行（例如，对应于同一行的两个实例相等，即使您开始更改其中一个的属性）。

如果您调用`User.new`两次并保存每个对象，您最终会在数据库中得到 2 个不同的行。因此，对我来说，他们不应该平等是有道理的。

就您的测试而言，您可以做两件事。一种是检查分配的用户是否为用户并且未保存。

另一种方式是类似的东西

```
User.should_receive(:new).and_return(@user)
get :new
assigns(:user).should == @user 
```

# php - Apache 2.4 和 PHP 5.4：没有可用的 mysql

> ID：10870704
> 
> 赞同：3
> 
> 时间：2012-06-03T13:22:07.793
> 
> 标签：php, mysql, apache, installation

我已经在我的 Windows 7 x64 机器上设置了一个带有 PHP 5.4 和 MySQL 5.5 的 Apache 2.4 HTTP 服务器。

一切正常，除了在 PHP 中只加载“mysqlnd”。mysql 和 mysqli 丢失。php.ini 中的条目可用且处于活动状态。PATH 变量附加到 mysql 二进制文件 (libmysql.dll) 的目录中。

Apache 2.4 的 error.log 中没有关于警告或错误的条目

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T10:01:39.527

在我的 Windows 7 64 位机器上安装 Apache 2.2 和 PHP 5.4.6 后，我昨天遇到了同样的麻烦。我通过 php.ini 中的以下更改解决了这个问题：

1.  将 extension_dir 设置为 (your-php-path)\ext。

    ```
    extension_dir = "c:\progra~2\php546\ext" 
    ```

    当您使用 8.3 版本的文件夹名称时，您可以避免文件夹名称 Program Files (x86) 中的空格。您可以使用以下命令获取它：

    ```
    dir \prog* /x 
    ```

2.  启用所需的 MySQL 模块。

    ```
    extension=php_mysql.dll
    extension=php_mysqli.dll
    ...
    extension=php_pdo_mysql.dll 
    ```

3.  重新启动 Apache Web 服务器。

    ```
    for %s in (stop start) do net %s apache2.2 
    ```

    您还可以使用 Apache Monitor 或服务重新启动它。

# objective-c - 将 CCMenu 与 UIView 集成

> ID：10870707
> 
> 赞同：0
> 
> 时间：2012-06-03T13:22:46.537
> 
> 标签：objective-c, cocos2d-iphone

在我的 CCScene 中，我添加了一些`UILable`，`UIPickerView`它们效果很好，但是当我尝试添加 CCMenu (cocos2d) 时，我看不到它，或者，我可以看到一些覆盖我的标签但看不到按钮本身的东西。

按钮代码：

```
CCMenuItemImage *back = [CCMenuItemImage itemFromNormalImage:@"openBack.png" selectedImage:@"openBack.png" target:self selector:@selector(setMenu:)];
    back.position=ccp(300,300);
    back.tag=30;
    CCMenu *menu = [CCMenu menuWithItems:back,nil];  
    [self addChild:menu  z:100]; 
```

以及我添加的 UIKit 的其他视图：

[[[[CCDirector sharedDirector] openGLView] 窗口] addSubview:activationCode];

我无法弄清楚 openGL 和 cocos CCScene 之间的联系。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:47:59.320

Cocos2d 是 xCode 的包装器，特别适用于游戏开发。因此 CCScene 是 cocos2d 的一个元素，但 UIView 属于 xCode。您将所有内容放在视图上。

为了使您的菜单可见，您可以将菜单放在视图之外。因为您可以指定视图的大小。使视图的矩形更小，以便您可以获得足够的空间来放置菜单。

或者，如果您继续使用全屏尺寸的 UIView，那么您有更好的选项，例如可以轻松添加到 uiview 的 UIButton。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:24:05.553

你在 Cocos2D 中所做的一切都放在一个 UIView 中，假设你像我一样使用它。这意味着如果你稍后添加一个 UIKit 元素，它会出现在你在 Cocos2D 中所做的*一切之上或之下。*我们不能以复杂的方式交错 UIKit 和 Cocos2D 元素。

# php - isset 和 empty 有什么区别？

> ID：10870708
> 
> 赞同：21
> 
> 时间：2012-06-03T13:23:05.670
> 
> 标签：php

`!isset`和 和`empty`和`isset`有什么区别`!empty`？？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-03T13:27:22.713

类型比较表应回答有关这些运算符的所有问题：http: [//php.net/manual/en/types.comparisons.php](http://php.net/manual/en/types.comparisons.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T13:40:44.757

基本答案是可以设置一个变量（不是 NULL），但可以为空（可以同化为 0）。例如，考虑一个空数组。

从@mjhennig 提供的链接中，您可以看到 0 被认为是空的。False 和空字符串也是如此（显然）:)

# php - 如何在 php 中运行 mssql 函数？

> ID：10870710
> 
> 赞同：1
> 
> 时间：2012-06-03T13:23:12.380
> 
> 标签：php, sql-server, sql-server-2008, apache, sql-server-2005

我收到这条烦人的消息：

> 致命错误：调用未定义函数 mssql_connect()

我读过很多帖子，他们说只是取消注释`php_mssql.dll`，但我的扩展文件夹中没有这样的文件，也没有在`php.ini`.

我似乎无法在任何地方找到它。论坛上发布的所有链接都已损坏，我对此完全崩溃了。

我还尝试从 Microsoft 下载最近的文件，我解压缩了这个：`php_pdo_sqlsrv_54_ts.dll`，并将其添加到扩展列表中，但我仍然得到同样的错误。

有没有什么有意义的方法可以做到这一点？或者也许我需要重新安装 PHP？

**编辑**

`php.ini`我在扩展中添加了以下文件：

```
extension=php_pdo_sqlsrv_53_nts.dll
extension=php_pdo_sqlsrv_53_ts.dll
extension=php_sqlsrv_53_nts.dll
extension=php_sqlsrv_53_ts.dll
extension=php_pdo_mssql.dll
extension=php_pdo_odbc.dll 
```

但仍然没有运气...... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:21:20.533

这是我在 Windows 平台上将 php 5.3 与 sql-server 2008 链接在一起的方式（使用 PDO 而不是 mssql_* 函数）：

首先，您需要安装[microsoft mssql native client](http://www.microsoft.com/en-us/download/details.aspx?id=16978)（向下滚动页面至“Microsoft® SQL Server® 2008 R2 Native Client”）；之后，只在 php.ini 中保留扩展名：

`extension=php_pdo_sqlsrv_53_ts.dll`

`php -m`现在，通过从 cmd调用来检查扩展列表：您应该`pdo_mssql`在 [PHP Modules] 部分看到；

现在，重新启动 apache。您可以通过调用 new PDO() 连接到服务器：

`$connection = new PDO("sqlsrv:Server=localhost,1521;Database=testdb", "UserName", "Password");`

更多信息可以在[这里找到](http://www.php.net/manual/en/ref.pdo-sqlsrv.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:28:01.580

好吧，这就是我解决它的方法：

我只是安装了 php 5.2，然后添加了本机 mssql 扩展，我认为它看起来像：

```
extension=php_mssql.dll 
```

与 5.3 不同，5.2 版本具有适用于 Windows 的 mssql 的本机二进制文件。

（对于很多人来说，安装 PDO 不是一个选项，因为它需要太多的工作并且还需要学习一些新的语法，即使它应该更“可靠”）。

最后，我从

```
http://www.dll-files.com/dllindex/dll-files.shtml?msvcr71 
```

如果没有此文件，与服务器的连接将被切断并且不稳定。

就是这样。

# java - 使用对象访问类变量和方法

> ID：10870718
> 
> 赞同：0
> 
> 时间：2012-06-03T13:24:06.577
> 
> 标签：java, swing

在我发布的问题中，我想知道为了访问该`setused()`方法，我`obj1`为类创建了一个名为数组类型的对象`alpha`。但是如果我想从类 beta 访问相同的方法，那么我将不得不创建另一个对象。但是有什么方法可以让我使用相同的对象，即。`obj1`访问`setused()`方法的数组类型

```
import javax.swing.JOptionPane;
public class first()
{
      public void main(String args[])
     {
         alpha[] obj1=new alpha[5];
         for(int i-0;i<5;i++)
         obj1[i].setused(int 1);
     }
}

class alpha
{
   private int un_used=5;
   private int used=0

   public int getun_used()
   {
          return un_used;
   }

   public int getused()
   {
          return used; 
   }

   public void setused(int use)
   {
          used= use;
   }
}

class beta
{
    private String name;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:31:42.683

首先，您的代码将抛出`NullPointerException`，因为创建给定大小的对象数组并不意味着您正在创建那么多对象。该数组仅包含`null`s。

其次，你`alpha`和`beta`类不共享任何方法，`setused()`在`beta`. 从现在开始我假设有：

```
class beta
{
    private String name;

    public void setused(int use) { //...
    }

} 
```

如果您想使用相同的引用来访问两个类的该方法，最简洁的方法是使用[polymorphism](/questions/tagged/polymorphism "显示标记为“多态性”的问题")：

```
interface Used {

    void setused(int use);

} 
```

`abstract`基类也可以。然后实现该接口：

```
class alpha implements Used { //...
class beta implements Used { //... 
```

现在创建一个类型数组`Used`：

```
 Used[] obj1=new Used[5];
 obj1[0] = new alpha();
 obj1[1] = new beta();
 //...
 for(int i-0;i<5;i++)
 obj1[i].setused(1); 
```

最后阅读[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T13:53:05.050

您可能希望在要访问的方法上使用 static 修饰符。这意味着在其他类中，您可以使用 ClassName.methodname(parameters) 访问该方法。因此，例如，如果您想将 setused 设置为静态方法，那么您将首先通过 alpha.setUsed 访问它：

```
public static void setUsed(int use) {
    used=use;
}

public class first {

    public void main(String args[]) {
        alpha.setUsed();
    }
} 
```

如果您想了解更多关于静态和其他主题的信息，请前往 Java 教程 ( [http://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/) )，他们非常擅长解释这一切。

您还初始化了 5 个对象，而不是 1 个。要让 alpha 类表现得像一个数组，您需要让 alpha extend Array。

```
public alpha extends Array {} 
```

这将允许类通过继承使用 Array 的所有方法。请注意，继承的另一个词是多态性，上面已经提到过。

此外，既然您已经初始化了数组中的对象，就必须实例化它们。

```
public void main(String args[]) {

    alpha[] obj1=new alpha[5];
    for(int i-0;i<5;i++) {
        obj[i] = new alpha();
        obj1[i].setused(1);
    }
 } 
```

必须初始化对象（给定内存空间）然后实例化（用实际对象填充内存空间）。

请注意通常如何调用对象：

```
alpha a = new alpha(); 
```

那是一行的初始化和实例化，这里是两行：

```
alpha a;
a = new alpha(); 
```

第一行为 a 分配内存，第二行实际创建 a 并将其放入该内存中，以供使用。

您只初始化了对象数组，因此当您尝试使用它们时会出现 NullPointerException。

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T13:31:53.017

```
You have to pass the reference of obj1 to the class beta like:
class beta
{
   alpha a;
   beta(alpha a)
   {
     this.a = a;
   }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T13:33:14.350

```
 class beta{
private String name;
private alpha[] alphaArray ;

public void setAlpha(alpha[] alphaArray){
  this.aplhoaArray = alphaArray.clone();
}

public void someMethod(){
  // access alpha[index].setUsed() method here 
} 
```

}

不确定我是否正确理解了您的问题，但也许这段代码会有所帮助。

# restructuredtext - reStructuredText 中的内联代码突出显示

> ID：10870719
> 
> 赞同：156
> 
> 时间：2012-06-03T13:24:31.527
> 
> 标签：restructuredtext

我知道 reStructuredText 有这个指令：

```
.. code:: bash

    gedit pohl.m 
```

它呈现一个代码块。有没有办法让这样的内联代码段的语法突出显示：

```
Do edit the file, type ``gedit pohl.m`` into a terminal. 
```

反引号将其标记为代码，但我想用像块这样的 pygments 突出显示它。这可能吗？

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2012-09-11T07:58:53.473

对此进行了更多研究后，我偶然发现了文档[reStructuredText Interpreted Text Roles](http://docutils.sourceforge.net/docs/ref/rst/roles.html)。从这个文件：

> 解释的文本在文本周围使用反引号 (`)。一个明确的角色标记可以可选地出现在文本之前或之后，用冒号分隔。例如：
> 
> ```
> This is `interpreted text` using the default role.
> 
> This is :title:`interpreted text` using an explicit role. 
> ```

好像有一个[`code`角色](http://docutils.sourceforge.net/docs/ref/rst/roles.html#code)，所以你可以简单地输入

```
:code:`a = b + c` 
```

呈现内联代码块。要获得语法突出显示，您可以定义自定义角色。例如

```
.. role:: bash(code)
   :language: bash 
```

然后您可以像这样使用它：

```
Here is some awesome bash code :bash:`a = b + c`. 
```

请注意，角色定义必须放在对角色的引用之前。

请注意，我链接到的文档没有提及它所引用的 docutils 版本。代码角色在 docutils 0.8.1 中*不可*用（这是我必须测试的唯一版本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-26T02:47:19.723

对我来说，我必须[`docutils.conf`](http://docutils.sourceforge.net/docs/user/config.html#syntax-highlight)在 Sphinx 的[配置目录](https://www.sphinx-doc.org/en/master/glossary.html#term-configuration-directory)（`conf.py`所在的位置）中创建一个文件。它有以下内容：

```
[restructuredtext parser]
syntax_highlight = short 
```

有关上述内容的更多信息，请参阅[此](https://stackoverflow.com/a/48655335/11392196)答案

为了全局设置角色`conf.py`，我在文件中创建了一个[`rst_prolog`](https://www.sphinx-doc.org/en/master/usage/configuration.html#confval-rst_prolog)变量。其中的字符串将包含在每个读取的源文件的开头。

```
rst_prolog = """
.. role:: python(code)
    :language: python
    :class: highlight
""" 
```

在这个`highlight`类中正确的 Python 突出显示是必要的。

有关上述内容的更多信息，请参阅[此](https://stackoverflow.com/a/9707879/11392196)答案

# iphone - 在屏幕外捕获 MKMapView 屏幕截图

> ID：10870721
> 
> 赞同：1
> 
> 时间：2012-06-03T13:24:41.903
> 
> 标签：iphone, ios, mkmapview

我想获取对用户隐藏的地图视图的屏幕截图。所以，我正在创建地图视图并将其设置为隐藏，但是我没有得到委托回调：`mapViewWillStartLoadingMap`和`mapViewDidFinishLoadingMap`.

如何判断地图何时完全加载以截取屏幕截图？有没有比我正在尝试做的更好的解决方案？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T14:14:15.400

好吧，谢谢谷歌！我没有绘制地图视图并尝试将其隐藏，然后等待回调并捕获屏幕，而是使用 Google 地图 API。 [http://maps.googleapis.com/maps/api/staticmap?center=32.084684,34.888237&zoom=12&size=190x90&sensor=true](http://maps.googleapis.com/maps/api/staticmap?center=32.084684,34.888237&zoom=12&size=190x90&sensor=true)。

惊人的 ：）

# javascript - GWT GoogleAnalytics _trackEvent 没有做任何事情

> ID：10870723
> 
> 赞同：0
> 
> 时间：2012-06-03T13:24:48.580
> 
> 标签：javascript, gwt, google-analytics, dom-events

我按照这里的说明[http://code.google.com/p/gwt-platform/wiki/GoogleAnalytics](http://code.google.com/p/gwt-platform/wiki/GoogleAnalytics)，并且能够注入 GoogleAnalytics 但我有一些问题：

他们说你不必打电话`init(userAccount)`，因为杜松子酒会帮你打电话，我发现这不是真的，我必须自己打电话`init()`，我担心这不是最好的做法。

我试着`trackEvent`用必要的参数打电话，但什么也没发生。我正在使用 Chrome；我可以看到脚本已加载到页面并尝试跟踪网络是否有任何传出呼叫，但我的浏览器没有发送任何内容。

我尝试使用 JSNI 调用，自己在 GWT 中编写 Javascript，但结果完全没有不同。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:21:08.220

我依靠 JSNI 和 Google Analytics，它对我有用，因为我可以在我的 Analytics 控制面板中看到事件。你确定你已经在你的 html 文件中放置了正确的初始化吗？我不熟悉您使用的那个 gwt-platform 库，也许它已经过时了？

以下是我的跟踪方法：

```
 private static native void trackEvent(String category, String action, String label) /*-{
        $wnd._gaq.push(['_trackEvent', category, action, label]);
    }-*/;

    private static native void trackEvent(String category, String action, String label, int intArg) /*-{
        $wnd._gaq.push(['_trackEvent', category, action, label, intArg]);
    }-*/;

    private static native void trackPageview(String url) /*-{
        $wnd._gaq.push(['_trackPageview', url]);
    }-*/; 
```

并且不要忘记模块 html 文件中的这个初始化：

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-29066117-1']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

# ravendb - 二级索引已损坏。必须对数据库进行碎片整理

> ID：10870728
> 
> 赞同：24
> 
> 时间：2012-06-03T13:25:27.190
> 
> 标签：ravendb

数据库还原后出现问题。我如何修复数据库？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-03T17:06:01.727

Gengzu，您可能在机器之间移动了数据库。为了解决问题，您需要运行：

```
 esentutl /d Data 
```

从 RavenDB 数据目录

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T18:21:13.973

您应该从 Raven 的 Data 文件夹中运行该 util。当我在 Raven 服务器的根目录中运行它时 ->“操作因错误 -1032 终止...”也出现了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T09:23:18.373

1.  以管理员身份打开命令提示符

2.  将目录更改为 RavenDB 的*\Database\System*文件夹

3.  运行以下命令。

    esentutl /d 数据

# delphi - 为什么我在连接到 whatismyip.com 时收到“403 Forbidden”？

> ID：10870730
> 
> 赞同：5
> 
> 时间：2012-06-03T13:25:37.813
> 
> 标签：delphi

使用以下代码，我得到带有消息“HTTP/1.1 403 Forbidden”的异常类 EIdHTTPProtocolException。进程 svhostip.exe (11172)

```
function GetInternetIP:string;
var
  IdHTTPMainUrl : TIdHTTP;
begin
  try
    IdHTTPMainUrl := TIdHTTP.Create(nil);
    IdHTTPMainUrl.Request.Host := 'http://www.whatismyip.com/automation/n09230945.asp';
    Result := idHTTPMainUrl.Get('http://automation.whatismyip.com/n09230945.asp');
  except
    IdHTTPMainUrl.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-03T14:08:19.953

您需要设置您的用户代理，这记录在 WhatIsMyIP[常见问题](http://www.whatismyip.com/faq/automation.asp)解答中：

> •请将您程序的用户代理设置为 Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0 ，这将防止您的程序被 CloudFlare 阻止

释放`TIdHTTP`实例也应该是无条件的，只有在引发异常时才释放它。使用异常处理，好吧，处理异常。

```
function GetInternetIP:string;
var
  IdHTTPMainUrl : TIdHTTP;
begin
  IdHTTPMainUrl := TIdHTTP.Create(nil);
  try
    IdHTTPMainUrl.Request.UserAgent :=
      'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0';
    Result := idHTTPMainUrl.Get('http://automation.whatismyip.com/n09230945.asp');
  finally
    IdHTTPMainUrl.Free;
  end;
end; 
```

# mysql - MySQL 自然语言搜索的问题未返回预期结果

> ID：10870731
> 
> 赞同：1
> 
> 时间：2012-06-03T13:25:46.037
> 
> 标签：mysql, search

我目前的查询：

```
SELECT SCHOOL_NAME, TOWN, POSTCODE, COUNTRY, COUNTY, id FROM schools
WHERE MATCH(LA_NAME, SCHOOL_NAME, STREET, LOCALITY, ADDRESS3, TOWN, COUNTY)
AGAINST ("southwark") AND COUNTRY = 'gb' limit 0,5; 
```

正在返回（删除了一些数据以保持理智）：

```
Southwark Park School       
The Cathedral School of St Saviour and St Mary Ove...   
Harris Academy Bermondsey   
Southwark Inclusive Learning Service KS3, KS4 & Si...   
St George's Cathedral Catholic Primary School 
```

请注意，这些结果中不包括 Southwark Primary School

如果我做这个查询

```
SELECT SCHOOL_NAME FROM  schools WHERE `SCHOOL_NAME` LIKE  '%southwark%' LIMIT 0 , 3 
```

我返回的响应是

```
City of London Academy (Southwark)
Southwark Primary School
Southwark Park School 
```

关键点：Southwark Primary School 可在此处的结果中找到。这是自然语言搜索结果中缺少的内容。

解释显示：

```
id  select_type table   type     possible_keys  key key_len ref rows    Extra
1   SIMPLE          schools fulltext LA_NAME    LA_NAME 0       1   Using where 
```

因此，由于某种原因，自然语言搜索的性能不如预期，我尝试过使用布尔模式，但这不起作用。谁能阐明我可能做错了什么？

**注意：**如果我将第一个查询的限制更改为 0,50，我仍然看不到 Southwark 小学。

**编辑：**如果我将自然语言搜索更改为限制 0,240，我会得到结果 #238。

**编辑#2**

```
myisam_ftdump mydatabase/schools 1 -c | grep southwark 
```

回报：

```
108         7.7915840 southwark 
```

**更新：所以看起来 LA_NAME 的值是 Southwark，所以很多值都包含它。我使用 myisam_ftdump 来隔离这个问题。我现在可以考虑修复。**

**已修复：**因此，为了解决此问题，我必须修改全文以不包含 LA_NAME，我还删除了一些其他数据，这些数据实际上并不需要 IE 邮政编码。我还修改了我的 MySQL 查询以不再使用我删除的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:49:01.210

自然语言搜索遇到了类似的挑战。您关于它包含在 LA_NAME 中的评论可能会在 12.9.1 得到答复[。自然语言全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)：

> 搜索结果为空，因为“MySQL”一词出现在至少 50% 的行中。因此，它被有效地视为停用词。

# javascript - jQuery Cloud Zoom 获取无效的对象初始化器

> ID：10870733
> 
> 赞同：1
> 
> 时间：2012-06-03T13:25:54.273
> 
> 标签：javascript, jquery, magento, eval

我结合了一个网站的所有 javascripts

它有一些 jQuery 插件，例如 facebox，云缩放面部框工作正常，

但是云缩放有错误，**错误是 on fire bug invalid object initializer**

```
var a = {undefined} 
```

**一个变量带有一些 eval 函数，如下所示**

```
eval('var   a = {' + $(this).attr('rel') + '}');
relOpts = a; 
```

**在这里我附上了一些返回错误的代码，任何人都可以帮助我，我尝试了很多但没有结果**

```
$.fn.CloudZoom = function (options) {
        // IE6 background image flicker fix
        try {
            document.execCommand("BackgroundImageCache", false, true);
        } catch (e) {}
        this.each(function () {
            var relOpts, opts;
            // 
            eval('var   a = {' + $(this).attr('rel') + '}');
                    //error throw in below line
            relOpts = a;
            if ($(this).is('.cloud-zoom')) {
                $(this).css({ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:03:43.793

您需要检查您的 HTML 代码属性“rel”。

# python - Python：跟踪文本文件中的当前列

> ID：10870736
> 
> 赞同：2
> 
> 时间：2012-06-03T13:26:10.653
> 
> 标签：python, file, loops

Python初学者在这里。我正在逐列遍历文本文件。

```
for line in Input:
    line = line.rstrip() 
    fields = line.split("\t")   
    for col in fields[5:]: 
```

当我遍历列时，我将如何跟踪我所在的列？我想在输出中打印当前相关的列，所以当我得到结果时，我知道结果指的是哪一列。似乎有一个明显的答案，但我不知道！

在此先感谢您的帮助。我发现这里的人们的乐于助人势不可挡。

一些输入/输出示例：

输入文件中的行：

```
 chr20   1032    .       A     1/1 1/1 1/1 0/1 0/0
 chr20   1326    .       T     1/1 1/1 1/1 0/1 0/0
 chr20   1388    .       C     0/0 1/1 ./. 0/1 0/0 
```

然后我通过这些行查看第 5 列，例如 1/1、1/1、0/0 并计算一些输出统计信息。我的输出文件包含使用第 5 列计算的每 x 行的统计信息。我希望我的输出文件还包括第 6、7 列等的结果，并且输出文件中的行告诉我哪一列数据计算自。本质上是为了节省我为每列单独重新运行脚本。

输出示例：

```
5   chr1    230344070   231345012   1000942 200720  66560   119841  7160    5.63775088385   94.3622491161
5   chr1    231345012   232345029   1000017 167920  55040   106160  3360    3.06793279766   96.9320672023
5   chr1    232345029   233345195   1000166 179280  64841   96079   9180    8.72134449311   91.2786555069 
```

这里的第一列指的是它是根据第 5 列中的值计算的事实

对于索引，枚举中的列（字段 [5:]）：

最好的，

鲁巴尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T13:27:31.870

你可以试试这样的

```
for i,col in enumerate(fields[5:], 5):
    .... 
```

[enumerate()](http://docs.python.org/library/functions.html#enumerate)将为您生成一个索引值，*默认情况下它从 0 开始，*除非将起始值指定为 enumerate() 的第二个参数，如上图所示 5。

变量`i`将从值 5 开始，并允许您跟踪您正在处理的当前列以及`col`（与以前一样）该列中字段的值。

或者，为了方便和更容易修改，您可以使用变量：

```
start_col = 5
for i,col in enumerate(fields[start_col:], start_col):
    .... 
```

--- 更新回复*以下评论*：

我仍然不太确定我是否理解您的评论，但如果您发布的循环位于更大的循环内，您可以像这样跟踪您当前的列：

```
cur_column = 5
for line in Input:
    line = line.rstrip() 
    fields = line.split("\t")   
    for col in fields[cur_colum:]:
       ...
       ...

cur_column += 1 # done processing current column, increment value to next column 
```

如果您的代码太大而无法发布，发布一些简单的输入/输出示例会有所帮助。如果没有更多信息，很难真正知道如何提供帮助。我希望这是有帮助的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:38:01.060

您可以使用内置函数[枚举](http://docs.python.org/library/functions.html#enumerate)

```
for index, col in enumerate(fields[5:]): 
```

# c# - 如何在富文本框中添加拼写检查？

> ID：10870737
> 
> 赞同：1
> 
> 时间：2012-06-03T13:26:25.960
> 
> 标签：c#, winforms, .net-4.0, spell-checking

我想在我的应用程序中为我的富文本框添加拼写检查。我如何使用 Visual Studio Express 2010 中的内置类来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:34:16.580

你看过这个吗？ `System.Windows.Controls.SpellCheck`

[http://msdn.microsoft.com/en-us/library/system.windows.controls.spellcheck.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.spellcheck.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:55:47.287

如果您正在使用 WPF，则可以使用 System.Windows.Controls.SpellCheck。

但如果您使用 WinForms，您仍然可以使用 WPF 拼写检查进行一些工作。

检查[此](https://stackoverflow.com/questions/4024798/trying-to-use-the-c-sharp-spellcheck-class)SO 问题以获取更多信息。

否则你需要使用第三方[库](https://stackoverflow.com/questions/453611/what-is-the-best-spell-checking-library-for-c)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:27:30.823

您可以使用第三方控制 (Infragistics) **UltraSpellChecker**。使用它真的很容易。

```
this.ultraSpellChecker1.SetSpellCheckerSettings(this.txt_comment, new Infragistics.Win.UltraWinSpellChecker.SpellCheckerSettings(true)); 
```

`txt_comment`您希望在其中检查拼写的富文本框在哪里。

# delphi - 使用基础身份验证的 IIS 上的 ISAPI 扩展在 GetUserName 中返回错误的用户

> ID：10870739
> 
> 赞同：1
> 
> 时间：2012-06-03T13:27:07.667
> 
> 标签：delphi, iis, isapi

我有一个在 IIS 下作为 ISAPI 扩展运行的 SOAP 服务器。对于身份验证，我决定使用 IIS 内置的基本身份验证。在 SOAP 服务器中，我只需要知道连接到 ISAPI 的用户的用户名。至于[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms525338%28v=vs.90%29.aspx)：

> 在 IIS 处理请求之前，会执行客户端身份验证，以便设置执行请求的进程的安全上下文（或身份）。

我希望通过函数获取调用者的用户名`GetUserName`。

这是 SOAP 服务器的实现代码：

```
TTestSOAP = class(TSOAPDataModule, ITestSOAP)
public
  function WhoAmI: String; stdcall;
end;

function TTestSOAP.WhoAmI: String;
var
  WinName: String;
  BufSize: DWord;
  Buffer: PWideChar;
begin
 BufSize:= 1024;
 Buffer:= AllocMem(BufSize);
 try
    if GetUserName(Buffer, BufSize) then
      SetString(WinName, Buffer, BufSize)
    else
      RaiseLastOSError;
  finally
    FreeMem(Buffer);
  end;
  Result:= Format('You are: %s', [WinName]);
end; 
```

ISAPI dll 使用 Delphi 2009 构建并使用 ISAPIThreadPool 单元。

通常一切正常，我得到正确的用户名。但是在重负载下，我得到了不匹配的结果。即：在客户端，我创建了连接到 SOAP 服务器的测试线程，循环调用 WhoAmI 函数 5 次并断开连接。运行三个或更多线程，每个线程都有不同的用户，WhoAmI 函数返回的用户名会随机交换。例如：作为“user1”连接的线程在 5 次调用中的一些（不是全部）中得到“你是：user2”。

有人知道这里发生了什么吗？您是否知道在客户端已通过 IIS 身份验证的 SOAPDataModule 中获取用户名的安全且正确的方法？

**编辑：** 做了更多的测试和调试：在 WhoAmI 函数实现中，我添加了这段代码`LogonName:= GetSOAPWebModule.Request.GetFieldByName('AUTH_USER');`。它报告与 GetUserName 相同的用户名。似乎问题发生在客户端。所以关于客户端的一些细节： 提到的线程创建 HTTPRio 组件（每个线程都有自己的 HTTPRio）。对于授权，我设置了 Rio.HTTPWebNode.UserName 和 Rio.HTTPWebNode.Password。在 HTTPRio.HTTPWebNode.Connect(True) 之后，我确实在循环中调用了 ITestSOAP(HTTPRio).WhoAmI。

HTTPRio 背后的 Winet 是否可能与多个 HTTPRio 组件的用户名不匹配，每个组件都在不同的线程中运行，但是是同一个进程（应用程序）？

# php - 使用 CUploadedFile 上传文件的正确方法是什么

> ID：10870740
> 
> 赞同：6
> 
> 时间：2012-06-03T13:27:08.223
> 
> 标签：php, yii

我正在按照教程[http://www.yiiframework.com/wiki/2/how-to-upload-a-file-using-a-model/](http://www.yiiframework.com/wiki/2/how-to-upload-a-file-using-a-model/)上传文件。我写了以下代码：

```
$menuitem->attributes = $_POST['MenuItems'];
$menuitem->clientId = Yii::app()->user->clientId;
$menuitem->image = CUploadedFile::getInstance($menuitem, 'image');
if($menuitem->save()){
   $menuitem->image->saveAs(
       Yii::app()->getBasePath()."/../../".$menuitem->image->getName()
   );
} 
```

但问题是，如果同名文件存在于同一目录中，则这些文件既不会被覆盖，也不会以不同的名称保存。我想要的是新图像说 image.jpg，如果存在同名文件，则重命名为：`image_1.jpg`

可能吗 ？请回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:14:22.507

我写了一个在 yii 中简单上传文件的行为

[您可以在github](https://github.com/na3r/NUploadFile)上查看指南和下载文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:00:38.787

我总是用 md5() 函数重写原始名称。试试这个代码。所有图像都有一个唯一的名称。这将保存您的模型，然后生成一个唯一的名称。并再次保存模型。不是很干净，但工作！

```
$menuitem->attributes = $_POST['MenuItems'];
$menuitem->clientId = Yii::app()->user->clientId;
if ($menuitem->save()) {
    $imageName = @$_FILES["MenuItems"]["name"]["image"];
    $uniqueName = (md5($imageName . mktime() . $menuitem->id)) . '.' . (end(explode('.', $imageName)));
    $original = Yii::app()->getBasePath() . "/../../" . $uniqueName;
    $menuitem->image = CUploadedFile::getInstance($menuitem, 'immagine');
    $menuitem->image->saveAs($original);
    $menuitem->image = $uniqueName;
    $menuitem->save();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T10:37:44.107

我已经编写了这些代码来上传文件并使用绑定参数将路径保存在数据库中

```
$model->attributes=$_POST['Form'];
$uploadedFile=CUploadedFile::getInstance($model,'resume');
$path = '/protected/upload/'.time().$uploadedFile;
if($model->validate()){
    $connection=Yii::app()->db;
    $filePath=Yii::app()->basePath .DIRECTORY_SEPARATOR.'..'.$path; // file upload location

    $result = $uploadedFile->saveAs($filePath); //upload file

// an SQL with placeholders 
$hobbies=implode(",",$model->hobbies); // comma deliminated string of hobbies
$dob =date('Y-m-d',strtotime($model->dob)); // convert date 
$status=1; // status of record
$sql='INSERT INTO student (name, dob, email, gender, hobbies, city, resume, message,status, created_date,modified_date) VALUES(:name,:dob,:email,:gender,:hobbies,:city,:resume,:msg,:status,now(),now())'; 

$command=$connection->createCommand($sql);

// replace the placeholder with the actual username value
$command->bindParam(":name",$model->name,PDO::PARAM_STR);
$command->bindParam(":dob",$dob,PDO::PARAM_STR);
$command->bindParam(":email",$model->email,PDO::PARAM_STR);
$command->bindParam(":gender",$model->gender,PDO::PARAM_INT);
$command->bindParam(":hobbies",$hobbies,PDO::PARAM_STR);
$command->bindParam(":city",$model->city,PDO::PARAM_INT);
$command->bindParam(":resume",$path,PDO::PARAM_STR);
$command->bindParam(":msg",$model->msg,PDO::PARAM_STR);
$command->bindParam(":status",$status,PDO::PARAM_INT);
$result=$command->execute(); 

} 
```

我希望这些对你有用。

# php - PHP：错误处理 - 为真/假语句数量构建代码的最佳方法？

> ID：10870741
> 
> 赞同：0
> 
> 时间：2012-06-03T13:27:10.513
> 
> 标签：php, if-statement, error-handling, structure

在文件顶部，我想检查用户权限，例如，如果已登录，用户是否有权访问该页面，他们可以看到哪些内容，内容是否由用户自己发布，是否所有必要的参数都已通过（例如`POST`-vars）等

所以，问题是，你会建议什么是最好的方法（代码保持可读性和可理解性，对于特殊页面不太具体，以便可以在每个页面上实现它，性能因为许多检查需要数据库查询等.)

我问的原因是，因为现在我正在做这样的事情：

```
if($logged_in!=1) {$error="err1";}

else {
    if(...) {...}
    else {...}
} 
```

所以，基本上，如果一个检查返回访问被拒绝，代码将不会通过所有其他`if`的，而是立即中断。我不使用`exit`或者`die`因为我确实想显示页面（没有内容但有一个错误框），所以如果我使用`exit`或者`die`它不会在下面显示任何其他代码......

你会建议做什么？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:37:27.100

好吧，`if`/`else`构造往往很大并且不是真正可读的。您可以考虑使用`Exceptions`失败案例，基本上：

```
<?php
try {

   if($logged_in!=1) {
      throw new Exception("You must be logged in");
   }

   if(!another_condition()) {
      throw new Exception("Another condition failed");
   }

   do_something();
}
catch (Exception $error) {
   display_error_page($error->getMessage());
} 
```

一般来说，即使这样也不是最漂亮的方式：这些情况本身就是需要面向对象的完美示例。

也可以看看：

[http://php.net/manual/en/language.oop5.php](http://php.net/manual/en/language.oop5.php)

[http://php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

# android - 动态添加TextView和Button实例的合适方式

> ID：10870742
> 
> 赞同：0
> 
> 时间：2012-06-03T13:27:15.203
> 
> 标签：android, android-layout, instance, android-tablelayout

我正在为一个大学项目构建一个应用程序 - 这是一个随机词/头脑风暴生成器。我有一个`Activity`从 my 中检索一个随机单词`SQLiteDatabase`并将其放入`TextView`. 旁边`TextView`是 a `Button`，它充当“保持器” `Button`（如水果机）。像这样的东西：

![在此处输入图像描述](../Images/c26e68ad63bc330023e4b5ec394a2833.png)

目前我正在动态添加/删除一个新`TextView`/`Button`并将其添加到*TableLayout*中的一行，我真的想使用**相同****/的****新实例**（对不起，来自 AS3 背景）（所以他们做同样的事情事物）。这就是我到目前为止所得到的：**`TextView``Button`**

![在此处输入图像描述](../Images/540ac257ece2ad7555d642411771279c.png)

我的问题是真的，这可能吗？或者对于这种性质的事情，最好的方法是什么。甚至是`TableLayout`正确的使用方法吗？

如果它有助于您提供建议：

*   我希望能够在某个时候保存/共享用户的“会话”。
*   可能让用户可以选择调整他们可以添加的文本字段的数量（目前我将它们限制为 5 个）

**编辑：** 另外我认为我弄糊涂的是，如果我添加一个新的文本/按钮 - 设置它的最佳方法是什么，所以他们都做同样的事情。使用 XML，我可以使用他们的 ID，这仍然可以“以编程方式”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:13:32.327

部分答案，稍后将编辑以更完整地回答。

您可以使用类似这样的简单方法来保存您的状态（要记住的是，您无法保存与 GUI 相关的任何内容，因此如果您想将文本保存在 TextView 中，您必须先将其提取为字符串，然后再保存字符串，而不是视图）。编辑：使用这个[http://developer.android.com/reference/android/app/Activity.html#SavingPersistentState](http://developer.android.com/reference/android/app/Activity.html#SavingPersistentState)

```
 private SharedPreferences mPrefs;
 private int mCurViewMode;

 protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

     SharedPreferences mPrefs = getSharedPreferences();
     mCurViewMode = mPrefs.getInt("view_mode", DAY_VIEW_MODE);
 }

 protected void onPause() {
     super.onPause();

     SharedPreferences.Editor ed = mPrefs.edit();
     ed.putInt("view_mode", mCurViewMode);
     ed.commit();
 } 
```

# php - 处理字符编码的 Twitter 响应

> ID：10870743
> 
> 赞同：2
> 
> 时间：2012-06-03T13:27:17.570
> 
> 标签：php, magento, twitter, character-encoding

我正在构建一个与 Twitter API 交互的应用程序。

到目前为止，我的代码正确处理了响应，并且我对与搜索 API 交互的方式感到满意。然而，当谈到来自 Twitter API 响应的实际内容时，我被困住了。

现在，我使用 atom 提要搜索带有特定标签的推文，即

```
$url = 'http://search.twitter.com/search.atom?q='.urlencode($hash_tag) ;
$ch = curl_init($url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, TRUE);
$xml = curl_exec ($ch);
curl_close ($ch);

$twelement = new SimpleXMLElement($xml);

echo "<pre>";
foreach ($twelement->entry as $entry) {

echo($entry->author->name);
echo '<br />';
echo mb_detect_encoding($entry->author->name);
echo '<br />'; 
```

我一直在尝试不同的 php 函数来解码/转换为正确的字符编码，但无论我做什么，我总是得到错误的输出。

我从这段代码的输出是：（为隐私划掉）

```
xxxxxx (xxxxx xxxxxxx)
ASCII

xxxx_xxxxx (Chinny â™¥_â™¥)
UTF-8

kunlemyk ((Ë˜Ì¯Ë˜ ) hardekhunleyâ„¢)
UTF-8

xxxx_xxxxx (â™¥ify okwuosaâ™¥)
UTF-8

xxx_xxxx (Call me DRO)
ASCII 
```

为什么有些 ASCII 和一些 UTF-8？我怎样才能确保它们是一致的。我可以将它们转换为ascii吗？我很迷失在这里。我多年来一直坚持这一点，非常感谢这里的一些帮助。

问候，

安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:18:18.207

utf8 是专门设计的，因此 ascii 是它的适当子集。这样做是为了向后兼容。

检测编码的函数，通常通过在检查字节值后进行有根据的*猜测来实现。*如果所讨论的字符串只包含 ascii 字符，则可以将其称为 ascii 或 utf8。同样，这是因为 ascii 字符串在设计上是有效的 utf8 字符串。

将纯 ascii 字符串称为“ascii”更有意义，因为它更具体，而且在猜测时，只有当你遇到的只是 ascii 字符时，你才真正确定它是 ascii。如果字符串中至少有一个 utf8 字符，其余为 ascii，则 func 应将其检测为 utf8。但是如果没有看到至少一个 utf8 字符，则调用字符串 utf8 是错误的。

编辑-至于该怎么办？同样，ascii 字符串是有效的 utf8 字符串，因此您应该只使用 utf8，因为它适用于两种类型。确保通过真正的 http 标头而不是`<meta`标签来声明它。

```
header('content-type:text/html;charset=utf-8'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:20:01.767

抢在[这个职位](https://stackoverflow.com/questions/910793/detect-encoding-and-make-everything-utf-8)。

您可能想要搜索检测编码的方法。

# ruby-on-rails - 我应该升级 - jaunty 9.0.4 服务器 - 因为它不是 LTS？

> ID：10870747
> 
> 赞同：0
> 
> 时间：2012-06-03T13:27:40.393
> 
> 标签：ruby-on-rails, linux, ubuntu, upgrade

在我的生产服务器上，这是`lsb_release -a`

```
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 9.04
Release:    9.04
Codename:   jaunty 
```

我现在应该更新并迁移到 Ubuntu 的 LTS 版本吗？我正在运行一个 Ruby On Rails 应用程序，我现在使用图像魔术等东西还可以，我没有注意到任何大问题。

例如。如果我在不更新操作系统和相关软件包的情况下继续更新我的 rails / ruby​​ 和相关 gems，是否有任何理由在 Ubuntu Jaunty 9.04 上使用 Mysql 运行 Rails 3x 可能会导致当前最新版本的 Rails + Ruby + 和 Linux Stuff 出现问题？

我可能会在一年内迁移服务器，届时我将有机会（要求）安装我想要的任何版本的 Ubuntu。再说一次，如果你们都说“不要打扰......”，我可以在可预见的未来继续使用这个操作系统。

注意：我实际上是 Slicehost 客户，没有“简单”的升级方法，我必须再买一个切片，支付一个月的费用，复制我的数据等等。如果我真的决定离开 Slicehost，那么我将重新经历这个过程。在这种情况下，现场生产现场可能会停机，是否值得？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:32:07.640

是的你应该。让所有服务保持最新总是更好，特别是如果它是服务器。但是，您应该先在开发服务器上尝试迁移，然后再将其应用到生产服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:37:09.407

如果您落后一两个版本，那可能没问题，但考虑到安全性的重要性，您必须始终至少更新软件包，并且 Jaunty 不再支持软件包（大约一个月前 10.10 失去了它）。您**需要**升级您的服务器。Ubuntu 目前是 12.04 版本，比您领先 5 个版本。准备花大量时间升级和一些重大停机时间，但最好是旧软件和安全漏洞可能造成的停机时间。Linux 只有在你更新它时才能安全——著名的安全性来自快速补丁，所以你最好带上补丁。

如果我是你，我会说支付一次并转到 Ubuntu 12.04 Server LTS。它会被支持一段时间。但是，如果您的基础架构不允许升级，我建议您更改主机。您无法升级或他们不为您升级的主机是糟糕的主机。

# delphi - 为什么导入的类型库函数与原始源不同？

> ID：10870750
> 
> 赞同：6
> 
> 时间：2012-06-03T13:28:13.393
> 
> 标签：delphi, delphi-xe2

我正在尝试使用带有 COM 接口的第三方库。提供了一个 C++ 示例应用程序，它使用声明为的函数：

```
HRESULT __stdcall IMyInterface::DoSomething (BSTR id, long State) 
```

导入类型库后，得到的 Delphi 代码为：

```
procedure DoSomething (const id: WideString; State: Integer); safecall; 
```

在 C++ 示例应用程序中，结果 (HRESULT) 用于确定函数是否正确执行。
为什么 Delphi 将这个声明转换为一个过程，这样我就无法得到结果？
我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T16:01:09.340

`safecall`调用约定只是`HResult`返回类型的转换。如果函数返回不成功（通常不是`S_OK`or `S_False`），则将其包装到异常中并抛出（`reSafeCallError`如果未在任何地方使用 SysUtils，则将其转换为运行时错误）。查看`System._CheckAutoResult`详情。

同样，如果您正在实现一个安全调用函数，任何异常都会被捕获并转换为一个`HResult`值（`E_Unexpected`除非`TObject.SafeCallException`被覆盖以返回其他内容）。看看`System._HandleAutoException`它是如何工作的。

如果需要，欢迎您将过程转回返回的函数`HResult`。这种情况下的调用约定应该是`stdcall`. 使用您的示例：

```
function DoSomething(const id: WideString; State: Integer): HResult; stdcall; 
```

# css - Rails 中的 CSS 和 Bootstrap

> ID：10870751
> 
> 赞同：0
> 
> 时间：2012-06-03T13:28:16.253
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap

我目前正在开发一个项目，并且正在使用 Twitter Bootstrap 作为我的 CSS 框架，但是我不想将它用于我的所有 CSS。我有一些其他样式表，例如calculator.css，但是 CSS 的某些元素被 Bootstrap 覆盖。

我将如何将 Bootstrap 保留为 css 框架，然后在我不想使用 Bootstrap 的某些页面上只调用我的样式表？

例如，我在家庭控制器中有一个名为calculator 的页面，其中包含用于样式的calculator.css 文件。我想做的就是为该页面调用我的calculator.css 文件。

有没有人处理过这个问题，任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:32:20.870

您只需要确保在您的其他 css*之前加载引导 css。*例如，之后您的应用程序 css 文件可能与此类似：

```
*= require_self  
*= require bootstrap
*= require myfile 
```

# iphone - 在许多不同的数组中查找特定对象

> ID：10870753
> 
> 赞同：0
> 
> 时间：2012-06-03T13:28:33.070
> 
> 标签：iphone, objective-c, ios, xcode

如果我有 10 个孩子（对象），每个孩子去不同的学校（数组），并且有不同的衬衫（对象中的值）。根据衬衫颜色找到特定孩子的最佳方法是什么？

现在，我这样做，这似乎有点长：

```
 Match *match; 
      match.match_id = @"The match id i want to find": 

      //Check array 1 for the object
      for (Match *tempMatch in matchesGrouped)
         {
             if (tempMatch.match_id == match.match_id)
             {
                 match = tempMatch; 
                 matchFound = YES; 
                 break; 
             }
         }

      //Check array 2 for the object
      for (Match *tempMatch in matchesSingle)
         {
             if (tempMatch.match_id == match.match_id)
             {
                 match = tempMatch; 
                 matchFound = YES; 
                 break; 
             }
         }

       etc for the rest of the arrays... 
```

match_id 是每个匹配项的唯一整数。

提前致谢

编辑：

比赛看起来像这样：

```
@interface Match : UIViewController <NSCoding> 
{

}

//Match
@property (nonatomic) int match_id; 
@property (nonatomic) int matchStatus; 
@property (nonatomic) int numberOfPlayers; 
etc... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:35:19.410

使用 nspredicate，这些对象是 NSDictionarys 吗？尝试这个：

```
NSArray *filtered = [matchesGrouped filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(match_id == %@)", match_id]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:00:41.383

像这样的例子怎么样：

```
- (IBAction)buttonArrayInArrayPressed:(id)sender 
{
    NSString *item = @"a2item2";
    NSArray *a1 = [NSArray arrayWithObjects:@"a1item1",@"a1item2",@"a1item3", nil];
    NSArray *a2 = [NSArray arrayWithObjects:@"a2item1",@"a2item2",@"a2item3", nil];
    NSArray *ax = [NSArray arrayWithObjects:a1, a2, nil];
    for (NSArray *outsideArray in ax)
    {
        for (NSString *myItem in outsideArray)
        {
            if ([myItem isEqualToString:item])
            {
                NSLog(@"Found item: %@", myItem);
                return;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T13:40:47.940

您可以基于数组 #1 中的对象创建一个 NSMutableArray，然后将其他数组中的对象添加到其中（`arrayWithArray:`, `addObjectsFromArray:`）。完成后，将有一个容器可供搜索。

（您发布的一个问题是，如果在第一个数组中找到了孩子，您会继续搜索其余的。）

# java - Java 代码覆盖率：方法级单元测试

> ID：10870755
> 
> 赞同：2
> 
> 时间：2012-06-03T13:28:53.980
> 
> 标签：java, unit-testing, code-coverage

是否有一些工具或 Eclipse 插件可以检测到方法未经过单元测试（JUnit/TestNg）？

提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T13:32:28.693

[EclEmma](http://www.eclemma.org/)是一个 Eclipse 插件，它就是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:31:21.360

IntelliJ 为您提供代码覆盖 - 无需插件。它报告测试覆盖的行的百分比，并突出显示哪些已执行，哪些未执行。

是时候升级你的IDE了。

# c++ - 无法在二叉树中实现递归搜索

> ID：10870758
> 
> 赞同：0
> 
> 时间：2012-06-03T13:29:09.843
> 
> 标签：c++, recursion, binary-tree

这是我的代码：

```
 template <typename DataType> bool SearchValue(TreeNode<DataType> *root, DataType search_value)
{
    if(search_value != root->data)
    {
        if(root->right != NULL)
        {
            return SearchValue(root->right, search_value);
        }
        if (root->left != NULL)
        {
            return SearchValue(root->left, search_value);
        }
        return false;
    }
    else
    {
        return true;
    }
} 
```

我无法使`SearchValue`功能正常工作。条件是不改变`SearchValue`函数的签名。问题如下：例如，我们尝试查找数据字段等于“90”的元素并且它存在于树中。有时这段代码会找到这个元素，有时却找不到——这取决于它在树中的位置。问题是如何让它每次都能正常工作。

我以这种方式构建树：

```
template <typename DataType> TreeNode<DataType> *BuildTree()
{
    TreeNode<DataType> *root = new TreeNode<DataType>(10, new TreeNode<DataType>(20), new TreeNode<DataType>(30));

    TreeNode<DataType> *curRoot = root;
    curRoot = curRoot->left;
    curRoot->left = new TreeNode<DataType>(40);
    curRoot->left->left = new TreeNode<DataType>(70);
    curRoot->right = new TreeNode<DataType>(50);
    curRoot = curRoot->right;
    curRoot->left = new TreeNode<DataType>(80, new TreeNode<DataType>(100), new TreeNode<DataType>(110));
    curRoot = root->right;
    curRoot->left = new TreeNode<DataType>(60);
    curRoot = curRoot->left;
    curRoot->right = new TreeNode<DataType>(90, new TreeNode<DataType>(120), new TreeNode<DataType>(130));

    return root;
} 
```

我以这种方式测试搜索：

```
TreeNode<int> *treeRoot = BuildTree<int>();
    int valueToFind = treeRoot->data;
    cout << "Enter the value you'd like to find in the tree: ";
    cin >> valueToFind;
    cin.get();
    if(SearchValue(treeRoot, valueToFind) == true)
    {
        cout << "Value " << valueToFind << " was found!";
    } 
```

我实现树的方式：

```
template <typename DataType> struct TreeNode
{
    TreeNode(DataType val, TreeNode<DataType> *leftPtr = NULL, TreeNode<DataType> *rightPtr = NULL)
    {
        left = leftPtr;
        right = rightPtr;
        data = val;
    }
    TreeNode<DataType> *left, *right;
    DataType data;
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T13:32:40.940

如果存在，当前搜索将始终跟随右分支（然后永远不会跟随左分支）。如果数据在树中是有序的（这是典型的），代码应该检查根节点以决定是向左还是向右遍历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T14:09:10.427

改变

```
if(root->right != NULL)
{
    return SearchValue(root->right, search_value);
}
if (root->left != NULL)
{
    return SearchValue(root->left, search_value);
}
return false; 
```

到

```
if(root->right != NULL)
{
    if (SearchValue(root->right, search_value))
        return true;
}
if (root->left != NULL)
{
    if (SearchValue(root->left, search_value))
        return true;
}
return false; 
```

你现在拥有它的方式，它总是会沿着右分支走，如果在那里找到它就返回，从不检查左分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:07:16.217

您可以清楚地看出代码是错误的，因为*您从不进行比较*。因此，默认情况下，代码不可能是正确的。

您需要比较以决定要关闭哪个分支，而不是简单地测试是否存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T14:21:24.820

正如彼得亚历山大所说，你不能在右分支上返回，**唯一的返回条件**是相等并返回真，否则条件，需要继续左分支。

# boolean-logic - 从描述布尔函数的输出 d 的表中派生布尔函数

> ID：10870759
> 
> 赞同：2
> 
> 时间：2012-06-03T13:29:24.260
> 
> 标签：boolean-logic, truthtable

我收到了以下问题：

> 下表描述了具有三个输入值 a、b 和 c 的布尔函数的输出 d。
> 
> ```
>  a  b  c  |  d 
> ----------+----
>  0  0  0  |  1 
>  0  0  1  |  1 
>  0  1  0  |  1 
>  0  1  1  |  0 
>  1  0  0  |  0 
>  1  0  1  |  0 
>  1  1  0  |  0 
>  1  1  1  |  0 
> ```
> 
> 使用 AND、OR、XOR、NOT、NAND、NOR 或 XNOR 的适当组合给出此布尔函数。

为什么是正确答案：

```
d := (((NOT a) AND (NOT b)) AND (NOT c)) OR
(((NOT a) AND (NOT b)) AND c) OR
(((NOT a) AND b) AND (NOT c)) 
```

我的答案。(((非 a) 与 (非 b)) 与 (非 c))

```
a   b   c     d
===============
0   0   0     1      
.
. 
. 
```

这是如何得出的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:37:33.207

您给出的答案称为*产品总和*(SOP) 公式。看看 OR 加入的三个大术语：

*   `((NOT a) AND (NOT b)) AND (NOT c))`
*   `((NOT a) AND (NOT b)) AND c)`
*   `((NOT a) AND b) AND (NOT c)`

现在看真值表，其中恰好三行在*d*列中有 1。这三行中的每一行都对应于三个术语之一。

可以组成更简短的答案，例如`d := (NOT a) AND (NOT(b AND c))`，但它们不是您给出的乘积总和公式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:37:02.053

*   检查表的上半部分。`a`必须为假`fun`才能为真。
*   此外，两者`b`和`c`不能`true`同时。所以，它必须是`!(b && c)`。
*   这应该`fun`归结为`!a && !(b && c)`
*   您可以将德摩根定理应用于第二部分并使用`!b || !c`，但`a`即使那样也必须是错误的，所以：`!a && (!b || !c)`这就是您最终得到的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T13:38:24.960

对于 3 个变量，8 个条目 (2^3) 提供了 3 个变量、、之间所有可能变量的**详尽**组合。变量是（可以看出）某个函数 say 的输出。`a``b``c``d``f(x)`

现在，由于 8 个条目包括所有可能的变化，我们可以推断出只有在特定组合发生时输出`d`才是布尔值。`1`结果是`0`在所有其他情况下。

因此，我们只需将所有输出为 的行组合起来`1`。你得到的结果如下。

程序很简单：

*   取所有输出为 的行`1`。
*   对于每一行，输出一个表达式，该表达式将导致`1`变量的值。
    *   `AND`每个变量。如果任何变量有值`0`，`NOT`它在它之前`AND`。
*   `OR`在上述步骤中找到的所有 8 个表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T13:55:15.237

从（完整）真值表中导出函数的最简单方法是仅读取结果为 1（或 0）的行并写下[析取](https://en.wikipedia.org/wiki/Disjunctive_normal_form)（或合[取](https://en.wikipedia.org/wiki/Conjunctive_normal_form)）范式。

在您的表中，结果 1 比 0 少，因此析取范式会更短。从表中可以看出，`d`恰好 3 种情况下为 1：

*   a=0, b=0, c=0
*   a=0, b=0, c=1
*   a=0, b=1, c=0

只需将它们放在一起，您就会得到： (! = not, & = and, v = or)

```
d = (!a & !b & !c) v (!a & !b & c) v (!a & b & !c) 
```

此表格自动排除所有其他情况。你仍然可以简化这个公式。仔细查看真值表会告诉您，如果和都为 0，则 的值`c`无关紧要。因此可以折叠前两部分以获得以下析取形式：（不再是*标准*形式）`a``b`

 *```
d = (!a & !b) v (!a & b & !c) 
```

如果应用分布性，它会变得更短：

```
d = !a & (!b v (b & !c)) 
```

差不多完成了：

```
d = !a & (!b v b) & (!b v !c)   | applying (x v !x) == 1 and (1 & y) == y
  = !a & (!b v !c)              | applying De Morgan (!a v !b) == !(a & b)
  = !a & !(b & c) 
```

完毕。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T10:56:27.277

正如有人提到的，你应该看看卡诺图。[在维基百科](http://en.wikipedia.org/wiki/Karnaugh_map)上检查它 乍一看可能看起来有点复杂，但一旦你得到它，为任何真值表推导出最佳表达式是非常简单的。

下图显示了给定真值表的卡诺图。

```
\ AB
C\  00  01  11  10
  \----------------
0 | 1 | 1 | 0 | 0 |
  |----------------
1 | 1 | 0 | 0 | 0 |
   ---------------- 
```

使用 Karnaugh 时要做的第一件事就是将真值表复制到地图上。我会让你想办法做到这一点。

下一步是将这些分组，维基百科文章描述了如何做到这一点。

终于想出了解决办法

从卡诺图可以看出，无论 C 的值如何，当 (!A & !B) 时输出为真，当 (!A & B & !C) 时输出也为真。

因此函数可以写成： D = (!A & !B) OR (!A & B & !C)

另一种解决方案是：D = (!A & !C) OR (!A & !B & C)*

# android - 在 GUI 中监视 MediaPlayer 的状态

> ID：10870764
> 
> 赞同：1
> 
> 时间：2012-06-03T13:31:04.250
> 
> 标签：android

Android 的[文档](http://developer.android.com/reference/android/media/MediaPlayer.html)描述了如何`MediaPlayer`更改状态，如下图所示：

![媒体播放器状态](../Images/7b67771cd2a00bec3fe3eac8048512e5.png)

我想更新我的 GUI 以向用户提供播放反馈。界面中应该有一个标签，根据播放器的状态显示“正在播放”、“正在缓冲”或“已停止”。我该如何实施？我一直在寻找类似的东西`OnStateChangedListener`，但显然不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T08:08:23.803

对于缓冲，你可以听`setOnBufferingUpdateListener`。
对于调用 () 之后的“正在播放”和“停止” `onPrepared`，您可以监控 getCurrentPosition。

# iphone - 在 Facebook 中注销

> ID：10870766
> 
> 赞同：1
> 
> 时间：2012-06-03T13:31:15.850
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，我正在使用 Facebook。我将 FB 与我的应用程序集成在一起。登录也正确发生。但是，当我尝试注销时，它在**fbDidLogout**中显示注销成功，但是当我们再次尝试登录时，这意味着它只是显示登录页面并使用先前输入的用户名和密码进行登录。

我们如何才能正确注销。

任何人都可以提供帮助或建议

这是我的代码

**这是登录注销按钮操作**

```
- (IBAction)LoginOrLogout 
{
// If the user is not connected (logged in) then connect.  Otherwise logout.
if (!isConnected)
{

    // Set the permissions.
    // Without specifying permissions the access to Facebook is imposibble.
    permissions = [[NSArray arrayWithObjects:@"read_stream", @"publish_stream", nil] retain];

    // Set the Facebook object we declared. We’ll use the declared object from the application
    // delegate.
    facebook = [[Facebook alloc] initWithAppId:@"329082513817407" andDelegate:self];

    [btnPublish setHidden:NO];
    [messageTextField setHidden:NO];

    [facebook authorize:permissions];

    // Change the lblUser label's message.
    [lblUser setText:@"Please wait..."];

    isConnected = YES;
     [self setLoginButtonImage];
}
else 
{
    [facebook logout:self];
    [messageTextField setHidden:YES];

    [lblUser setText:@"Tap on the Login to connect to Facebook"];
    isConnected = NO;
    [self setLoginButtonImage];
}
} 
```

**这些是其他方法**

```
-(void)fbDidLogin
{
// Save the access token key info.
[self saveAccessTokenKeyInfo];

// Get the user's info.
[facebook requestWithGraphPath:@"me" andDelegate:self];
}

 -(void)fbDidNotLogin:(BOOL)cancelled
{
UIAlertView *al = [[UIAlertView alloc] initWithTitle:@"Tonify" message:@"Login cancelled." delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
[al show];
[self LoginOrLogout];
}

-(void)fbDidLogout
{
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSLog(@"defaults fbDidLogout  ........%@",defaults);
if ([defaults objectForKey:@"FBAccessTokenKey"]) 
{
    [defaults removeObjectForKey:@"FBAccessTokenKey"];
    [defaults removeObjectForKey:@"FBExpirationDateKey"];
    [defaults synchronize];
}
NSLog(@"defaults fbDidLogout ........%@",defaults);
NSLog(@"logout success!");

// Keep this for testing purposes.
NSLog(@"Logged out Succes");

// Hide the publish button.
[btnPublish setHidden:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:42:00.520

使用此方法：

```
-(void)fbDidLogout
{
  NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
  NSLog(@"defaults fbDidLogout  ........%@",defaults);
  if ([defaults objectForKey:@"FBAccessTokenKey"]) 
  {
      [defaults removeObjectForKey:@"FBAccessTokenKey"];
      [defaults removeObjectForKey:@"FBExpirationDateKey"];
      [defaults synchronize];
  }

  // Hide the publish button.
  [btnPublish setHidden:YES];

   NSHTTPCookie *cookie;
   NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
   for (cookie in [storage cookies])
   {
     NSString* domainName = [cookie domain];
     NSRange domainRange = [domainName rangeOfString:@"facebook"];
     if(domainRange.length > 0)
     {
       [storage deleteCookie:cookie];
     }
   }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T07:26:25.317

保险箱的答案是正确的，那么您也可以在他的方法中添加这一行代码。

```
[facebook invalidateSession]; 
```

如果您要使用它，这仅适用于 FB 的 gragh api。

# actionscript-3 - AS3 获取与当前日期相比的日期偏移量

> ID：10870769
> 
> 赞同：0
> 
> 时间：2012-06-03T13:31:35.637
> 
> 标签：actionscript-3, date

我需要一个将传入参数（日、月、年）与当前日期进行比较的函数。这个函数应该返回 0 代表昨天，1 代表当天，2 代表明天，3 代表后天......

我已经有了这个功能：

```
private function getNumberOfDay(day:int, month:int, year:int):int
        {
            var date: Date = new Date();

            if(date.month+1 == month && date.fullYear == year)
            {
                if(date.date == day)
                    return 1;
                else if(date.date + 1 == day)
                    return 2;
                else if(date.date + 2 == day)
                    return 3;
                else if(date.date + 3 == day)
                    return 4;
                else if(date.date + 4 == day)
                    return 5;
                else if(date.date + 5 == day)
                    return 6;
                else if(date.date - 1 == day)
                    return 0;
            }
            return -1;
        } 
```

到目前为止它工作得非常好，但现在想象我们当前的日期是 31.12.2012，我称之为：

var numberOfDay:int = getNumberOfDay(1, 1, 2013);

它应该返回 2，但月份与我们当前的月份不同（与年份相同）。所以函数返回-1。我能做些什么？提前谢谢了！！

[http://livedocs.adobe.com/flash/9.0_de/ActionScriptLangRefV3/Date.html](http://livedocs.adobe.com/flash/9.0_de/ActionScriptLangRefV3/Date.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T16:54:07.467

你永远不会用你创建的函数得到你想要的。
您必须基本上将要比较的日期转换为时间戳值。
时间戳是从纪元日期算起的毫秒数。1970 年 1 月 1 日。
如果您采用时间戳的差异，那么计算天差的数量只是一个简单的过程。

```
function getNumberOfDay(day:int, month:int, year:int):int{
    // remember month is base 0 so january is 0 and dec is 11
    var millisecondsPerDay:int = 24*60*60*1000; //86400000
    var testDate:Date = new Date(year,month,day)
    var currentDate:Date = new Date()
    var days:int = Math.ceil((testDate.getTime() - currentDate.getTime())/millisecondsPerDay);
    // return the value plus 1 since you are offseting the from yesterday and not today
    return ++days;
}

trace('tomorrow --------------- ' + getNumberOfDay( 4, 5, 2012 )) //2
trace('yesterday -------------- ' + getNumberOfDay( 2, 5, 2012 )) // 0
trace('sometime in the future - ' + getNumberOfDay( 1, 1, 2013 )) // 244
trace('sometime in the past --- ' + getNumberOfDay( 1, 1, 2012 )) // -122
trace('3 days from yesteday --- ' + getNumberOfDay( 5, 5, 2012 )) // 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T13:50:01.773

只是一点点谷歌给我这个代码

```
public static function getDaysBetweenDates(date1:Date,date2:Date):int

{

       var one_day:Number = 1000 * 60 * 60 * 24;
       var date1_ms:Number = date1.getTime();
       var date2_ms:Number = date2.getTime();
       var difference_ms:Number = Math.abs(date1_ms - date2_ms);
       return Math.round(difference_ms/one_day);
} 
```

以上应该可行，我的建议是使用它。如果您想改正算法，请继续添加`else`after `if (date.fullYear == year)`。

因此，如果`else`执行它意味着年份不匹配，则添加算法以查找不同年份的两个日期之间的天数（这又可能很长）

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-24T14:21:44.473

您可以尝试以下代码：

众所周知，2013-11-24 23:59 之后的日期是 2013-11-25。

```
public static function getDateOffset2(year:int,month:int,date:int):int
{
    var oneDay:Number = 1000 * 60 * 60 * 24;
    var now:Date = new Date();
    var firstDate:Date = new Date(year,month-1,date);

    var secondDate:Date = new Date(now.fullYear,now.month,now.date);
    var offset:Number = Math.abs(firstDate.time - secondDate.time);
    return offset/oneDay;
} 
```

# php - osx-lion 上的 Apache 和两个版本的 php

> ID：10870774
> 
> 赞同：3
> 
> 时间：2012-06-03T13:32:04.870
> 
> 标签：php, apache, osx-lion, port

我必须在我的 Lion osx 上安装 PHP 版本

```
/opt/local/bin/php (5.3.12)
/usr/bin/php (5.3.10) 
```

当我尝试使用安装 php 模块`port`时，它指的是`/opt/local/bin/php (5.3.12)`

但是当我启动 apache 正在使用的 web 服务器时，`/usr/bin/php`因为如果我查看`phpinfo`apache webserver 它会告诉我`PHP Version 5.3.10`。

我该如何解决这个问题？
我的目标是安装`port`影响`php`apache 使用的 php-modules。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:42:51.677

事实上，Apache 并没有使用这些位置——如果您没有更改配置，它使用的是 .php 中的 PHP 模块`/usr/libexec/apache2/libphp5.so`。如果 Macports 安装在`/opt`某处创建了类似的模块，您需要编辑`/etc/apache2/httpd.conf`以指向新位置；如果没有，你需要得到它才能使你成为一个。

# sql-server - SQL Server 6.5 jdbc (jdts) 不兼容

> ID：10870775
> 
> 赞同：2
> 
> 时间：2012-06-03T13:32:05.550
> 
> 标签：sql-server, jdbc, jdbc-odbc

我尝试使用 jdts 1.2.2 和 1.2.5（在 DBVisualizer 或 IReport 4.5 中）连接到 SQL Server 6.0。

网址是

```
jdbc:jtds:sqlserver://localhost/mydbname;instance=;TDS=4.2 
```

但是两个版本（1.2.2 和 1.2.5）都给我错误。

```
Please use TDS protocol version 7.0 or higher 
```

如果我将 URL 更改为

```
jdbc:jtds:sqlserver://localhost/mydbname; 
```

它给了我这个错误。

```
Stream 0 attempting to read when no request has been sent 
```

我实际上只是想将 SQL Server 6.0 中的数据提取为 Excel 格式。

你能告诉我我能做什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:48:30.350

SQL Server 6.0 现在已经很老了，所以我怀疑这可能是您的问题的一部分。

Microsoft 为 Sql Server 提供了一个[jdbc 驱动程序](http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx)，您可以尝试使用它来代替**jtds**驱动程序。

最旧的可下载 Microsoft jdbc 驱动程序是[2.0 版](https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=2505)，但即便如此 Sql Server 2000 也是他们支持的最旧版本。

# mysql - 如何在 MySQL 中选择转换后的字段？

> ID：10870777
> 
> 赞同：1
> 
> 时间：2012-06-03T13:32:10.733
> 
> 标签：mysql, sql, date-formatting

我必须得到那些生日不等于给定日期的用户记录。由于 的日期格式`birthday`在`"Y-d-m"`我的数据库中，首先我需要将其转换为`"d-m"`格式。之后选择此字段。我使用类似的查询：

```
SELECT *, DATE_FORMAT(birthday, '%d-%m') AS birthday_date
FROM users
WHERE birthday_date = '03-06' 
```

但它返回未知列错误：

```
Unknown column 'birthday_date' in 'where clause' 
```

那么我该如何解决这个问题呢？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:34:46.537

你需要使用有:)

```
SELECT *, DATE_FORMAT(birthday, '%d-%m') AS birthday_date
FROM users
HAVING DATE_FORMAT(birthday, '%d-%m') = '03-06' 
```

或者

```
SELECT * FROM(
    SELECT *, DATE_FORMAT(birthday, '%d-%m') AS birthday_date
    FROM users
) a
WHERE a.birthday_date = '03-06' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:36:27.450

尝试以下操作：

```
SELECT * FROM
(
  SELECT *, DATE_FORMAT(birthday, '%d-%m') AS birthday_date
  FROM users
)
WHERE birthday_date = '03-06' 
```

您不能在 where 子句中使用别名

# android - 连接切换到 EDGE 时应用程序崩溃

> ID：10870785
> 
> 赞同：0
> 
> 时间：2012-06-03T13:32:50.483
> 
> 标签：android, cellular-network

我正在开发一个使用套接字连接与服务器通信的 Android 应用程序。服务器和 Android 设备之间传输的数据采用 JSON 格式。

该应用程序在 WiFi 和 HSPA 移动数据连接上运行良好。但是当连接类型切换到 EDGE 时，应用程序会崩溃。

每当手机突然切换到 EDGE 时，就会捕获到以下异常...

```
[2012/06/03 18:47:26] ERROR - JSONManager.getJsonObjectFromStream : Unterminated string at character 202 of {"Messages":[{"RequestID":"c69421a4-34b1-4a55-828d-f0ab2aee80a6","OperationType":"GET","CategoryName":"Agent","RequestKey":"Revision","Params":null,"Channel":null,"EventID":null,"EventSource":null,"Even 
```

以上是我为调试应用程序而创建的日志文件报告的异常。如您所见，异常被捕获并处理，但应用程序仍然崩溃。上面的错误是 JSON 不完整。但是，连接到 HSPA 或 WiFi 时不会弹出此问题。

关于可以通过 EDGE 连接传输的最大数据长度是否存在某种限制？

我能做些什么来解决这个问题？

如果没有，我是否至少有一种方法可以检测手机何时更改其与 EDGE 网络的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:42:45.710

这应该对您有所帮助：http: [//www.devdaily.com/java/jwarehouse/android/core/java/android/net/MobileDataStateTracker.java.shtml](http://www.devdaily.com/java/jwarehouse/android/core/java/android/net/MobileDataStateTracker.java.shtml)

这段代码有很多内容，所以搜索“case TelephonyManager.NETWORK_TYPE_EDGE:”并从那里开始。

# oracle - oracle pl/sql DBMS_LOCK 错误

> ID：10870787
> 
> 赞同：18
> 
> 时间：2012-06-03T13:32:57.330
> 
> 标签：oracle, plsql

在 Oracle PL/SQL 中，我想测试睡眠功能。我正在使用 hr 模式。但它给了我错误：

```
PLS-00201: identifier 'DBMS_LOCK' must be declared 
```

代码：

```
begin
 DBMS_LOCK.Sleep( 60 );
end;
/ 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-03T14:07:46.133

您应该将该包上的[执行权限授予您的架构](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9013.htm)

```
grant execute on <object> to <user>; 
```

例如

```
connect as sys
grant execute on SYS.DBMS_LOCK to someuser; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-16T21:41:00.120

如果您无权访问 sys 或者您的 dba 不愿意这样做

```
 GRANT EXECUTE on SYS.DBMS_LOCK to you; 
```

您可以在数据库中创建 Java 过程：

```
 CREATE OR REPLACE PROCEDURE SLEEPIMPL (P_MILLI_SECONDS IN NUMBER) 
   AS LANGUAGE JAVA NAME 'java.lang.Thread.sleep(long)'; 
```

并创建一个函数，调用java存储过程

```
 CREATE OR REPLACE FUNCTION sleep (
    seconds IN NUMBER
   ) RETURN NUMBER
   AS
   BEGIN
     SLEEPIMPL( seconds );
     RETURN seconds;
   END; 
```

之后

```
GRANT EXECUTE ON sleep TO public; 
```

您可以从选择中调用

```
select sleep(6000) from dual 
```

# iphone - SVG XML NSString 到后台线程上的 UIImage

> ID：10870788
> 
> 赞同：0
> 
> 时间：2012-06-03T13:32:59.393
> 
> 标签：iphone, ios, svg, uiimage, cgcontext

我想显示一个充满 SVG 图像的 UITableView。我从服务器获取 svg 标记的 xml 字符串，并希望能够在后台线程上的 UITableViewCell 内绘制图像。我的方法是将 svg 转换为 UIImage 并将其缓存，然后将其加载到单元格中的 UIImageView 中。

我看过 SVGKit，但似乎没有办法从字符串（目前仅从文件）创建 SVGView，而且当我进行文件存储然后检索 SVGView 时，速度非常慢。

那么有没有人知道在后台线程（在drawRect函数之外）将SVG字符串转换为UIImage的快速方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:01:28.137

您是否已经尝试获取带有 SVG 字符串内容的 NSData 对象，然后使用 - (id)initWithData:(NSData *)data 来获取图像？

# ruby - 在 Prawn 中创建 300 DPI Din A6 pdf

> ID：10870790
> 
> 赞同：3
> 
> 时间：2012-06-03T13:33:17.757
> 
> 标签：ruby, pdf, prawn

我正在尝试使用具有 300 DPI 的 Prawn 生成 PDF。pdf 将打印在 DIN A6 页面上，并且需要 300 DPI 看起来不错。

如何才能做到这一点？

# dart - 这个源是由 my_file.dart 通过 #source 指令包含的，所以它本身不能包含指令

> ID：10870792
> 
> 赞同：0
> 
> 时间：2012-06-03T13:33:41.150
> 
> 标签：dart

我认为我不理解此错误消息。这是否意味着 my_file.dart 已经来自另一个文件，例如 my_main.dart 包含：

```
#source('my_file.dart'); 
```

所以 my_file.dart 不能获取其他文件？例如在 my_file.dart 中。

```
#source('my_other_file.dart'); // this can't be here?

class MyClass {
  Collection<MyOtherClass> myVariables;
} 
```

问题是，我必须在 my_file.dart 中获取 my_other_file.dart，因为如果我不这样做，它会为 my_other_file.dart 中的类提供有关“没有这种类型”的错误。但是当我这样做时，我得到了标题错误，“这个源代码是通过 #source 指令包含在 my_file.dart 中的，所以它本身不能包含指令”。

我是否完全误解了这条信息？如何使这些错误停止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T07:18:54.457

你的理解是对的，一个`#source`-d文件不能是`#source`其他文件。

但让我们更深入一点：Dart 支持库。例如，如果您在服务器上使用 Dart，您很可能会使用该`dart:io`库（通过编写`#import('dart:io')`代码）。如果您在浏览器中使用 Dart，您很可能会使用该`dart:html`库。该`dart:core`库在每个程序中都隐式导入。

您当然可以编写自己的库。在几乎所有情况下，一个库将跨越多个文件。在这种情况下，*其中一个*文件会有点*main*：它将声明库（使用`#library`），指定所有依赖项（使用`#import`）和所有其他源文件（使用`#source`）。所有其他文件（那些`#source`-d 文件）将只包含 Dart 代码，并且它们都不能包含这些`#library`,`#import`和`#source`指令。它看起来像这样：

my_lib.dart：

```
#library('My Library');

#source('my_lib_impl.dart');

interface MyInterface default _MyClass {
  foo();
} 
```

my_lib_impl.dart：

```
class _MyClass implements MyInterface {
  foo() {
    print("foo!");
  }
} 
```

然后，如果你想在你的程序中使用这个库，你*必须* `#import`使用这个`my_lib.dart`文件。你*不* `#source`知道。

my_program.dart：

```
#import('my_lib.dart');

main() {
  new MyInterface().foo();
} 
```

请注意，即使`my_program.dart`不包含`#library`指令，它也可以像一个指令一样工作——它可以`#import`和`#source`文件。您可以在“入口点”脚本中执行此操作。

我试图解释如何在 Dart 中使用库，这不是您问题的直接答案，但它应该有所帮助。如果没有，请告诉我，我会尝试更深入地挖掘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T04:18:11.967

Ladicek 有完整的解释。关于您的具体问题：

> 我必须在 my_file.dart 中获取 my_other_file.dart ，因为如果我不这样做，它会为 my_other_file.dart 中的类提供有关“没有此类类型”的错误。但是当我这样做时，我得到了标题错误，“这个源代码是通过 #source 指令包含在 my_file.dart 中的，所以它本身不能包含指令”。

解决方法是：不要放入`#source('my_other_file.dart')`，而是`my_file.dart`放入`my_main.dart`.

我们 Dart 团队意识到这是语言中真正令人困惑的角落之一，我们正在努力尝试想出更好的东西，但这需要时间。

# android - 在只有内部存储器的设备上使用 environment.getexternalstoragedirectory 的 android 访问文件夹会返回吗？

> ID：10870793
> 
> 赞同：0
> 
> 时间：2012-06-03T13:33:48.953
> 
> 标签：android, path, filesystems, directory, sd-card

我使用此代码访问文件夹：

```
String path = Environment.getExternalStorageDirectory().getAbsolutePath()+ "/somefolder"; 
```

在带有 sdcard 的设备上这没问题，我没有只有内部存储器的设备来测试会发生什么，如果在没有 sdcard 的设备上执行会发生什么？它会自动设置为内部存储器路径吗？该应用程序的用户会将这个文件夹放在可用内存的根目录中。

有没有办法获得内部路径？

有没有办法检查两个根以查看此文件夹是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:47:09.090

有几种不同类型的“内部”存储。

在最初的几个 android 设备上，它们具有内部存储，即存储操作系统和已安装应用程序的分区。现代设备继续拥有这种类型的内部存储（现在你会在高端设备上看到 1-2gb 的这种类型的存储）。用户无法访问此存储区域（除非他们是 root 用户）。

另一种类型的“内部”存储空间通常要大得多，并且可供用户访问。这种类型的存储通常出现在未配备 SD 卡的设备上。截至目前（2012 年 6 月），我认为 8 或 16GB 是此类存储最常见的大小。

因此，在没有 SD 卡的设备上，您的方法将返回给您通向第二种“内部”存储的路径。事实上，基本上这里发生的事情是他们已经将闪存放入设备中，并且基本上欺骗了操作系统以与 SD 卡相同的方式看待它，但没有卸载/删除的选项。

# javascript - 像在这个特定网站上一样下拉文本

> ID：10870797
> 
> 赞同：0
> 
> 时间：2012-06-03T13:34:28.473
> 
> 标签：javascript, jquery, css, drop-down-menu

我知道这是一个非常广泛的问题，但是当我尝试用谷歌搜索时，我得到的只是下拉菜单的答案。

我正在寻找下拉文本的代码，就像您单击问题时[所做的那样。](http://www.peacecorps.gov/index.cfm?shell=learn.howvol.faq)或者至少是一个名字，这样我就可以更具体地用谷歌搜索了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T13:41:41.963

这是一个小提琴的代码来做到这一点：http: [//jsfiddle.net/Zy4gW/](http://jsfiddle.net/Zy4gW/)

HTML：

```
<ul id="q-and-a">
    <li><a>Question One</a>
      <div>Answer to Question One...</div>
    </li>
    <li><a>Question Two</a>
      <div>Answer to Question Two...</div>
    </li>
</ul> 
```

CSS：

```
ul { margin: 0; padding: 0; }
ul li { margin: 0; padding: 0; list-style: none; }
ul li a { color: blue; }
ul li div { display: none; } 
```

查询：

```
$(function(){

  $('#q-and-a li a').each(function(){
      $(this).click(function(){
          $(this).siblings('div').slideToggle(300);            
      });        
  });                

});​​ 
```

对于这么简单的事情，您可能不需要插件。只需设置正确的结构，然后显示/隐藏“显示”内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T13:36:26.820

这就是你所说的*手风琴*，而[jQueryUI 有一个](http://jqueryui.com/demos/accordion/)。默认情况下，它的行为与网站中的不同，但可以配置为以相同的方式运行。

# git - 代码整洁与源代码控制（单调或 Git）

> ID：10870799
> 
> 赞同：2
> 
> 时间：2012-06-03T13:34:42.630
> 
> 标签：git, code-formatting, monotone

我在一个相当大的项目（超过 100K 行代码）上工作，每个开发人员使用他们当时喜欢的任何风格都非常混乱（从大括号到变量名到文件名的所有内容都各不相同）。

通向代码同质化道路上明显的第一步是通过一个（或几个）代码整理工具运行代码，并确保所有代码在签入时都通过这些相同的工具运行（例如通过 jenkins）。

有没有任何明智的方法可以做到这一点，而不会完全破坏我们所有的版本控制历史？现在我可以查找一行代码并找出是谁编写的，然后在我们的票务系统中查找他们编写它的原因——我们是否需要放弃它？

我们目前使用单调，但在不久的将来很可能会转向 git，所以我对任何一个的答案都很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:54:11.863

不幸的是，我无法在 Monotone 中为您提供帮助，但就 Git 而言，您可以尝试使用`.gitattributes`文件的“涂抹”功能来自动运行您的整洁工具。Pro Git 有一个很好的部分介绍[了如何使用 smudge/clean](http://git-scm.com/book/ch7-2.html#Keyword-Expansion)。

要在不破坏历史记录的情况下清理过去的提交，请查看[filter-branch](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)。您可以完成每个提交并清理内容，并且仍然具有相同的提交消息/更改（在合理范围内 - 这可能会变得棘手）。

# spotify - Spotify - 未保存 Cookie

> ID：10870802
> 
> 赞同：2
> 
> 时间：2012-06-03T13:34:50.547
> 
> 标签：spotify

在 Spotify 应用程序的 JS 中，我保存了一个 cookie，它可以在同一应用程序的其他页面中正常检索。

但是，在退出并再次启动 Spotify 后，cookie 不再存在。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:42:08.687

请改用 localstarage。Cookie 不存储在磁盘上。

```
 localStorage.setItem("name", "Hello World!"); 

 localStorage.getItem("name"); // Hello World! 
```

# linux - Ubuntu set -g 无法更改 tmux 中的滚动行为 - 获取 postgres 集

> ID：10870808
> 
> 赞同：0
> 
> 时间：2012-06-03T13:35:37.750
> 
> 标签：linux, bash, ubuntu, scroll, tmux

试图让滚动在 Ubuntu 和 tmux 中工作。例如滚轮滚动页面。

大多数建议似乎是：

`set -g mode-mouse on`

但是我`set`没有`-g`选择：

```
-bash: set: -g: invalid option
set: usage: set [-abefhkmnptuvxBCHP] [-o option-name] [--] [arg ...] 
```

但是我注意到 set 的第一个手册页的顶部显示：

```
PostgreSQL 9.1.3 Documentation 
```

postgres 'set' 是否“掩盖”了`set`我想要使用的常规命令？

如果是这样，我该如何解决这个问题并做`set -g`我想要的实际操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:52:40.207

该选项用于`~/.tmux.conf`文件，或被调用以配置已执行`tmux`的文件：

```
tmux set -g mode-mouse on 
```

# javascript - 在 HTML5 中，我可以制作一个不规则形状的文本框吗？

> ID：10870809
> 
> 赞同：5
> 
> 时间：2012-06-03T13:35:51.253
> 
> 标签：javascript, html, text

为了清楚起见，我不是从一个矩形文本框开始，而是围绕一个不规则的图像浮动。我正在创建一个任意形状，然后输入文本以最适合该形状。是否有 jquery 插件或在 html5 画布中？这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:53:20.647

HTML5的[工作标准](http://www.whatwg.org/specs/web-apps/current-work/multipage/)概述了当前的功能。工作标准中未提及您想要的功能，因此您需要一个脚本。

[创意文本框](http://creativetextboxes.com/)看起来可以提供您需要的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T17:30:31.360

如果您能够提供描述形状的框，则可以使用[CSS3 Regions](http://dev.w3.org/csswg/css3-regions/)。不过，目标浏览器中的可用性可能很差。这可能是 Šime 提到的规范。

SVG 还在[SVG 1.2 工作草案](http://www.w3.org/TR/2004/WD-SVG12-20041027/flow.html)中声明对此的支持。我不清楚这是否已成为 W3 推荐标准，或者浏览器是否实际支持它。

更新：[这个问题的答案](https://stackoverflow.com/questions/4991171/auto-line-wrapping-in-svg-text)表明 SVG 方法现在不起作用。

# java - 导入“javax.jnlp”无法解析

> ID：10870810
> 
> 赞同：9
> 
> 时间：2012-06-03T13:35:54.137
> 
> 标签：java, import, jnlp, java-web-start

我正在学习 Java 并尝试使用 Java web start 运行一些示例。

但是，我似乎找不到那个包`javax.jnlp`。

同样的错误在 windows 和 linux 上都困扰着我。我在 windows 上安装了 oracle jdk 7。OpenJDK 1.6 是安装在 linux 上的版本。

在互联网上搜索包没有运气。它不再在 oracle 的网站上可用，因为他们坚持认为该包是 jdk 的一部分。

我已经在安装目录中搜索了它。有些人声称它在`jnlp.jar`文件中，有些人声称它在`javaws.jar`文件中……这两个文件都不是我安装的一部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-16T17:38:31.510

可以`jre/lib/javaws.jar`在 1.7 和 1.8 中找到，根据：[https ://stackoverflow.com/a/13555413/829305](https://stackoverflow.com/a/13555413/829305)

如果您只安装了 JDK，则`jre/`可以在该目录中找到该目录。`jdk/`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T14:01:48.127

从 Oracle 页面：

> jardiff 工具、jnlp-servlet.jar 文件和 jnlp.jar 文件可以在 JDK 的示例目录中找到。

在我的比赛中，它位于：

`... /jdk1.6.0_23/sample/jnlp/servlet/jnlp.jar`

* * *

对于 Java 7，您必须单独下载[Demos 和 Samples](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)：

Windows x86（32 位）15.62 MB [jdk-7u4-windows-i586-demos.zip](http://download.oracle.com/otn-pub/java/jdk/7u4-b20-demos/jdk-7u4-windows-i586-demos.zip)

Windows x64（64 位）15.69 MB [jdk-7u4-windows-x64-demos.zip](http://download.oracle.com/otn-pub/java/jdk/7u4-b20-demos/jdk-7u4-windows-x64-demos.zip)

你会在里面找到 jnlp.jar： `jdk1.7.0_04\sample\jnlp\servlet\jnlp.jar`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T17:23:30.197

您应该在类路径中添加 javaws.jar 文件的路径。例如：“javac -classpath .:/path/to/javaws.jar webstart/*.java”

# css - 字体在 Firefox 或 IE 中不起作用

> ID：10870830
> 
> 赞同：1
> 
> 时间：2012-06-03T13:37:33.730
> 
> 标签：css, html, font-face

我真的不明白发生了什么。

**我正在使用 Font Squirrel 的 @Font Face Packs，它在Firefox**和**IE**中不起作用，但它在**Chrome**和**Android 的浏览器**中完美运行，我还没有尝试过 Safari。这些包应该可以无缝工作，这就是它们的全部意义，但事实并非如此。

所以这是我的代码

```
<link rel="stylesheet" href="https://dl.dropbox.com/u/70582811/Fonts/Orotund-fontfacekit/Orotund.css" type="text/css"/> 
```

和

```
p{
font-family: OrotundHeavy,Georgia,Serif;
} 
```

这仅影响 Chrome 中的字体，您可以在此处查看

提前致谢。

```
@font-face {
    font-family: 'OrotundHeavy';
    src: url('Orotund-webfont.eot');
    src: url('Orotund-webfont.eot?#iefix') format('embedded-opentype'),
         url('Orotund-webfont.woff') format('woff'),
         url('Orotund-webfont.ttf') format('truetype'),
         url('Orotund-webfont.svg#OrotundHeavy') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'OrotundCapitalsHeavy';
    src: url('OrotundCaps-webfont.eot');
    src: url('OrotundCaps-webfont.eot?#iefix') format('embedded-opentype'),
         url('OrotundCaps-webfont.woff') format('woff'),
         url('OrotundCaps-webfont.ttf') format('truetype'),
         url('OrotundCaps-webfont.svg#OrotundCapitalsHeavy') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:45:54.367

同样在这里（404）通过直接访问。

您是否注意到您在 Firefox 中遇到的错误？

时间戳：12/06/03 14:42:19 错误：可下载字体：下载失败（字体系列：“Open Sans”样式：正常重量：正常拉伸：正常 src 索引：2）：**错误 URI 或跨站点访问不允许** 来源：[https](https://www.dropbox.com/static/fonts/opensans/OpenSans-Regular-webfont.ttf) ://www.dropbox.com/static/fonts/opensans/OpenSans-Regular-webfont.ttf 源文件：[https ://www.dropbox.com/static/css/main.css](https://www.dropbox.com/static/css/main.css) 行：0 源代码：@font-face { font-family: "Open Sans"; 字体样式：正常；字体粗细：400；src: url("/static/fonts/opensans/OpenSans-Regular-webfont.eot?#iefix") 格式("embedded-opentype"), url("/static/fonts/opensans/OpenSans-Regular-webfont.woff ") 格式("woff"), url("/static/fonts/opensans/OpenSans-Regular-webfont.ttf") 格式("truetype"), url("/static/fonts/opensans/OpenSans-Regular-webfont .svg#OpenSansRegular") 格式("svg"); }

# android - 如何在扩展 ArrayAdapter 的类中获取共享首选项

> ID：10870832
> 
> 赞同：3
> 
> 时间：2012-06-03T13:37:40.173
> 
> 标签：android, sharedpreferences, android-arrayadapter

我有一个 ArrayAdapter，我需要获取应用程序的共享首选项才能对其进行处理。我的问题是我无法获得共享偏好。那是我的代码：

```
public class MobileArrayAdapter extends ArrayAdapter<String> {
private final Context context;
private final String[] values;
private static SharedPreferences prefs;
private String firstBtName = "";
private String secondBtName = "";
private String thirdBtName = "";

public MobileArrayAdapter(Context context, String[] values) {
    super(context, R.layout.list, values);
    this.context = context;
    this.values = values;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    prefs = getSharedPreferences("MYPREFS", 0); // ERROR **************

    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.list, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.label);
    textView.setText(values[position]); 
```

eclips 说我没有那种方法……我该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-03T13:40:52.447

您的错误是因为 ArrayAdapter 没有`getSharedPreferences()`方法，请将出现错误的行更改为：

```
prefs = context.getSharedPreferences("MYPREFS", 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-06T21:25:39.017

您应该在构造函数中获得共享首选项。您的构造函数应如下所示

```
public MobileArrayAdapter(Context aplicationContext, String[] values) {
    super(context, R.layout.list, values);
    this.context = context;
    this.values = values;
    prefs= aplicationContext.getSharedPreferences("MYPREFS", 0);
} 
```

# python - eric5 自动完成

> ID：10870835
> 
> 赞同：0
> 
> 时间：2012-06-03T13:38:01.280
> 
> 标签：python

我已经为 python 开发者安装了 Eric5。用我在gentoo上的portage。我无法在其中获得任何自动完成功能！

```
#!/usr/bin/python3
import os
os. #<-I've pressed ctrl+space many times but don't get a menu :( 
```

还安装了助手和绳索插件，但没有帮助。将 eric 配置为在 API 文件中搜索完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:14:04.943

在 Eric5 中，进入下方`Preferences->Editor->APIs`，然后选中该框`Compile APIs Automatically`。

`Language`在下拉菜单中选择 Python2 或 Python3 ，单击`Add from installed APIs`按钮，然后搜索所需的`Python-X.X.api`。

单击`Apply`然后`OK`，您就完成了。还要确保您已签入所有自动完成选项`Preferences->Editor->Autocompletion`。

希望能帮助到你

# python - 如何在 lisp 中定义这样的常量？

> ID：10870836
> 
> 赞同：3
> 
> 时间：2012-06-03T13:38:12.317
> 
> 标签：python, common-lisp

在python中可以做到这一点

```
EMPTY, PAWN, KNIGHT, BISHOP, ROOK, QUEEN, KING, BPAWN = range(8) 
```

你会如何在 lisp 中做等价？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T18:36:18.110

在 Lisp 中只使用符号会更惯用。通常作为自我评估的关键字符号：

```
(defparameter *chess-pieces*
  '(:EMPTY :PAWN :KNIGHT :BISHOP :ROOK :QUEEN :KING :BPAWN)) 
```

定义数值是有原因的——有时。尤其是当您需要与外国功能交谈时。在 Lisp 中，你会默认使用符号。

Common Lisp 没有真正的枚举类型。在动态类型语言中使用符号比使用数字变量有一些优势。例如，在调试期间，变量内容更具描述性：

相比：

```
> (setf c4 queen)

> c4
6 
```

对比

```
> (setf c4 :queen)

> c4
:queen 
```

在后一个示例中，符号值是自描述的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T16:34:00.970

假设您已经在`range`某处 ( `(defun range (n) (loop :for i :from 0 :below n :collect i))`) 定义了便捷函数，您可以设置一些局部值，如下所示：

```
(destructuring-bind (EMPTY PAWN KNIGHT BISHOP ROOK QUEEN KING BPAWN)
    (range 8)
  #| do stuff |#) 
```

然而，像这样的枚举很少在 Lisp 代码中使用，因为关键字（或其他符号）提供了类似的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T16:23:29.877

写一个宏来做到这一点怎么样？一个例子：

```
(defmacro defenum (&rest args)
  (let ((counter 0))
    `(progn
       ,@(mapcar (lambda (arg)
                   (cond ((symbolp arg)
                          (prog1
                              `(defparameter ,arg ,counter)
                            (incf counter)))
                         ((listp arg)
                          (prog1
                              `(defparameter ,(first arg) ,(second arg))
                            (setf counter (1+ (second arg)))))
                         (t (error "broken defenum"))))
                 args)))) 
```

使用示例：

```
(defenum x (y 2) z)

(defenum EMPTY PAWN KNIGHT BISHOP ROOK QUEEN KING BPAWN) 
```

（在这个例子上改进可能很容易:-) - 我更喜欢`defparameter`这样`defconstant`你可能想要改变的东西）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T23:51:37.790

这是一种方法：

```
(let ((c 0))
  (dolist (piece '(EMPTY PAWN KNIGHT BISHOP ROOK QUEEN KING BPAWN))
    (eval `(defconstant ,piece ,c)) 
    (incf c))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T13:42:38.757

使用默认常量：

```
 (defconstant name initial-value-form [ documentation-string ]) 
```

例如：

```
(defconstant myvar 5) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-13T12:41:30.193

我曾经这样做的简单宏：

```
(defmacro enum-constants (&rest constants)
 `(progn ,@(mapcar #'(lambda (key value) `(defconstant ,key ,value))
                   constants (loop for i from 0 below (length constants) collecting i)))) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-05T15:03:51.100

可以`macrolet`用来计算设置一堆常量的形式：

```
(macrolet ((defenumvalues (&rest names)
             `(progn
                ,@(loop for n in names and i from 0
                        collect `(defconstant ,n ,i))
                (values))))
  (defenumvalues empty pawn knight bishop rook queen king bpawn)) 
```

替代方案：使用 . 编写全局宏`defmacro`。

使用宏（局部或全局）定义一堆常量的一般优势：编译器扩展表达式，然后看到一堆`cl:defconstant`形式。

# mysql - Slackware 13.37 KDE 错误上的 mysql-workbench

> ID：10870838
> 
> 赞同：1
> 
> 时间：2012-06-03T13:38:31.663
> 
> 标签：mysql, kde, slackware

在我的 Slackware 13.37 上安装各种库数小时后，我设法启动了 mysql-workbench（但我错了）。从命令行启动时，我收到此警告：

```
bash-4.2# mysql-workbench
** Message: Gnome keyring daemon seems to not be available. Stored passwords will be lost once quit
Traceback (most recent call last):
  File "/usr/local/lib/mysql-workbench/modules/wb_admin_ssh.py", line 43, in <module>
    import paramiko
ImportError: No module named paramiko
Warning! Can't use connect with timeout in paramiko None
Traceback (most recent call last):
  File "/usr/local/lib/mysql-workbench/modules/wb_admin_grt.py", line 27, in <module>
    import wb_admin_main
  File "/usr/local/lib/mysql-workbench/modules/wb_admin_main.py", line 29, in <module>
    import wb_admin_monitor
  File "/usr/local/lib/mysql-workbench/modules/wb_admin_monitor.py", line 21, in <module>
    import wba_monitor_be
  File "/usr/local/lib/mysql-workbench/modules/wba_monitor_be.py", line 26, in <module>
    import wb_admin_ssh
  File "/usr/local/lib/mysql-workbench/modules/wb_admin_ssh.py", line 119, in <module>
    log_warning(_this_file, 'Cannot use connect with timeout in paramiko version %s\n' % paramiko.__version__)
AttributeError: 'NoneType' object has no attribute '__version__'
** Message: Failed loading module '/usr/local/lib/mysql-workbench/modules/wb_admin_grt.py' (python)
Ready. 
```

出现主程序窗口，当我尝试建立新连接时出现此错误：

```
Traceback (most recent call last):
  File "/usr/local/share/mysql-workbench/sshtunnel.py", line 14, in <module>
    import paramiko
ImportError: No module named paramiko

** (mysql-workbench-bin:2919): WARNING **: Tunnel manager could not be executed 
```

并出现一个弹出窗口：

> 使用 root 用户无法在 127.0.0.1:3306 连接到 MySQL 无法启动 SSH 隧道管理器

mysql 和 ssh 已正确安装和配置：

```
bash-4.2# mysql
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1
Server version: 5.5.24 MySQL Community Server (GPL)

bash-4.2# ssh -v
OpenSSH_6.0p1, OpenSSL 0.9.8x 10 May 2012 
```

有人能帮助我吗 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:53:06.840

它告诉您缺少[python-paramiko](http://www.lag.net/paramiko/)模块。它是一个用于 SSH 连接的 python 模块；显然，这是由 MySQL Workbench 功能之一使用的。[在此处](http://sotirov-bg.net/slackpack/pack.cgi?id=850)获取 slackware 软件包并执行安装

```
sudo installpkg paramiko-1.7.6-noarch-1gds.txz 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T06:28:56.833

楼上的好答案。在 64 位系统上，您必须安装特定的 32 位库才能使工作台工作。例如，我必须在 64 位 python 旁边安装 32 位 python。常见错误还包括特定于分发的错误。“/etc/mysql/my.cnf”未找到，我从/etc/my.cnf 创建了一个软链接。还必须在 /root/.mysql/workbench/log 创建一个文件夹以启动工作台

# java - 查询服务器

> ID：10870839
> 
> 赞同：0
> 
> 时间：2012-06-03T13:38:37.980
> 
> 标签：java, php, c++

我想查询几个游戏服务器。

我在 Java 中做了一个服务器复习，它在一个循环中逐个查询每个服务器。

更改为 C++/C 或 PHP 会使查询更快还是我应该坚持使用 Java ？

发送/接收 UDP 数据包以查询服务器。

此外，除了一个一个循环之外，还有什么更快的方法可以做到这一点。

最坏情况时间（所有服务器离线时）是 200 毫秒 X 服务器数量。（每个 2 秒超时）。当服务器列表很大时，它会变大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:43:19.080

切换语言不会有任何收获。由于网络 I/O 是您的主要瓶颈，您应该考虑同时进行查询。使用线程或线程池一次查询多个服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:44:27.337

有几种方法可以加快速度：

1.  改用**C ，****如果**您知道如何编写好的 C 代码，它会稍微快一些。
2.  通过同时查询多个服务器来添加**多线程**。
3.  使用来自不同大陆的**多个服务器**（例如 VPS），并使用这些服务器查询离它们最近的游戏服务器。这将显着降低延迟。

# ruby-on-rails - 使 CarrierWave 不复制版本的原始文件

> ID：10870846
> 
> 赞同：1
> 
> 时间：2012-06-03T13:40:31.473
> 
> 标签：ruby-on-rails, carrierwave

据我了解，对于`version`上传器中定义的每个 CarrierWave 都会将原始文件从缓存复制到 tmp 路径，并将此 tmp 文件移交给为此版本定义的任何处理。然后它可以存储所有文件。有时（例如，当为视频文件生成缩略图时）这种复制可能非常昂贵。我可以让 CarrierWave 不复制并让我在原始文件处于缓存时从原始文件生成版本吗？

**编辑**我有`move_to_cache`并`move_to_store`返回~~假~~真（哎呀，我很快忘记了自己的头）。我写了一个测试处理模块`CarrierWave::RMagick`：

```
module CarrierWave
  module Thumbnailer
    def generate_thumbnails
      debugger
      x = 1
    end
  end
end 
```

我在上传器中有以下几行

```
version :thumb do
  process :generate_thumbnails
end 
```

但是，当在`debugger`（我可以开始处理的）CarrierWave 上停止执行时，CarrierWave 已经复制并重命名了上传的文件。我可以在缓存目录中看到它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:03:58.277

[从自述文件中查看大文件](https://github.com/jnicklas/carrierwave)下的自述文件：

```
class MyUploader < CarrierWave::Uploader::Base
  def move_to_cache
    true
  end
  def move_to_store
    true
  end
end 
```

> 当 move_to_cache 和/或 move_to_store 方法返回 true 时，文件将分别移动（而不是复制）到缓存和存储。

# extjs - ExtJS4：如何在文本框、组合框等旁边显示验证错误消息

> ID：10870851
> 
> 赞同：16
> 
> 时间：2012-06-03T13:41:29.577
> 
> 标签：extjs, extjs4

我需要实现出现在无效字段旁边的验证消息。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-05T12:31:50.580

`msgTarget: 'side'` 将在字段右侧添加一个错误图标，仅在悬停时在弹出窗口中显示消息。

如果您仔细阅读文档，msgTarget 还有一个选项[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-cfg-msgTarget](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-cfg-msgTarget)

**[元素id] 将错误信息直接添加到指定元素的innerHTML。** 您必须使用 id 在控件的右侧动态添加一个“td”。然后，如果您指定`msgTarget: 'element id'` 它将起作用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-23T18:41:11.603

可以工作，`msgTarget: 'elementId'`但似乎非常有限，特别是当您想要一个可重用的 ExtJs 组件的多个实例（以及因此同一个 msgTarget 元素的多个实例）时。例如，我有一个 MDI 样式编辑器，您可以在其中在选项卡界面中打开一种类型的多个编辑器。它似乎也不适用于`itemId`或识别 DOM/容器层次结构。

`msgTarget: none`因此，如果我不希望通过设置和执行我自己的消息显示来执行我自己的消息显示，那么我宁愿关闭默认处理，该`fielderrorchange`事件正是为这种情况而设计的。在这种情况下，即使有同一个编辑器表单的多个实例，我现在也可以尊重表单的层次结构，因为我可以选择相对于编辑器的错误显示元素。

这是我的做法：

```
{
    xtype: 'fieldcontainer',
    fieldLabel: 'My Field Label',
    layout: 'hbox',   // this will be container with 2 elements: the editor & the error
    items: [{
        xtype: 'numberfield',
        itemId: 'myDataFieldName',
        name: 'myDataFieldName',
        width: 150,
        msgTarget: 'none',  // don't use the default built in error message display
        validator: function (value) {
            return 'This is my custom validation message. All real validation logic removed for example clarity.';
        }
    }, {
        xtype: 'label',
        itemId: 'errorBox', // This ID lets me find the display element relative to the editor above
        cls: 'errorBox'     // This class lets me customize the appearance of the error element in CSS
    }],
    listeners: {
        'fielderrorchange': function (container, field, error, eOpts) {
            var errUI = container.down('#errorBox');
            if (error) {
                // show error element, don't esape any HTML formatting provided
                errUI.setText(error, false);
                errUI.show();
            } else {
                // hide error element
                errUI.hide();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-03T14:27:34.463

查看控件的[msgTarget](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-cfg-msgTarget)配置。 `msgTarget: 'side'`会将验证消息放在控件的右侧。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-12T04:41:50.963

在右侧使用 msgTarget 'side' 进行验证，在底部使用 msgTarget 'under'

```
 items: [{
                xtype: 'textfield',
                fieldLabel: 'Name',
                allowBlank: false,
                name: 'name',
                msgTarget: 'side',
                blankText: 'This should not be blank!'
            }] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-28T03:25:53.553

您可以使用“msgTarget：[元素 ID]”。您必须编写 html 才能使用元素 id 而不是 itemId。验证函数在您设置为“msgTarget”的元素下添加一个列表元素。如果您想显示验证所需的元素，您可以传递 html 而不仅仅是文本。

```
{
    xtype: 'container',
    items: [
        {
            xtype: 'textfield',
            allowBlank: false,
            msgTarget: 'hoge'
            blankText: '<div style="color:red;">validation message</div>', // optional
        },
        {
            xtype: 'box',
            html: '<div id="hoge"></div>' // this id has to be same as msgTarget
        }
    ]
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-24T18:17:48.207

要在输入文本框**下方/侧面**显示错误消息， **msgTarget**属性仅在您使用表单布局的情况下才有效。

要在表单布局之外解决这个问题，我们需要将元素包装在“x-form-field-wrap”类中。

您可以在线程上找到更多信息： [https ://www.sencha.com/forum/showthread.php?86900-msgTarget-under-problem](https://www.sencha.com/forum/showthread.php?86900-msgTarget-under-problem)

# android - 为什么只尝试从表中查询一列时出现 _id 不存在错误？

> ID：10870852
> 
> 赞同：0
> 
> 时间：2012-06-03T13:41:29.710
> 
> 标签：android, sqliteopenhelper

我试图用一些代码解决昨天为什么会出现此错误的问题：

```
java.lang.IllegalArgumentException: column '_id' does not exist 
```

我有更多的代码，尤其是我不需要的，所以我去掉了很多代码，以便更容易理解我哪里出错了。但本质上这是我的架构：

```
database.execSQL("CREATE TABLE events (" +
                "_id INTEGER PRIMARY KEY, event_name TEXT" +
                ")"); 
```

可以说，看起来不错。除非我忘记阅读，否则它显然就在那里。但后来我弄清楚了我的错误来自哪里，或者至少我确定这就是原因。检索游标的这段代码：

```
public Cursor getEventsName() {
    return database.rawQuery( "SELECT event_name FROM events", null);
} 
```

根据android，这是错误。当我将其更改为：

```
public Cursor getEventsName() {
    return database.rawQuery( "SELECT * FROM events", null);
} 
```

一切都是桃色的。当前者时，它会崩溃。关于为什么会这样的任何原因。我认为在 rawQuery() 中我可以做到这一点。只要我不包括 where 子句，我就没有。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:40:31.730

让我们称之为`event`游标：

```
public Cursor getEventsName() {
    return database.rawQuery( "SELECT event_name FROM events", null);
} 
```

...和`*`光标：

```
public Cursor getEventsName() {
    return database.rawQuery( "SELECT * FROM events", null);
} 
```

您收到的大多数答案（甚至是这里的答案：[在 Android 中，是否 _id 必须出现在任何创建的表中？](https://stackoverflow.com/q/10867724/1267661)）都在猜测您的错误的可能原因。我想我也会回答你的问题：

> 任何原因（前者崩溃，后者是桃色？）

`*`和`event`游标之间的区别在于隐式`*`选择*每一*列并且`event`只选择`event_name`。在您的`events`表中，`*`光标相当于：

```
SELECT _id, event_name FROM events; 
```

这就是为什么这个光标工作得很好。换句话说，您没有收到此错误：

```
java.lang.IllegalArgumentException: column '_id' does not exist 
```

因为您正在隐式选择`_id`带有`*`.

当然，出现此错误的最可能原因是当您将数据与 ListView、Spinner 等绑定时；他们都倾向于使用某种形式的 CursorAdapter。这是来自[CursorAdapter 文档](http://developer.android.com/reference/android/widget/CursorAdapter.html)：

> 将数据从游标公开到 ListView 小部件的适配器。游标必须包含名为“_id”的列，否则此类将不起作用。

所以**解决方案**很简单：您**必须**选择`_id`查询中的列以及您想要的其他列。（编译器没有骗你。）

话虽如此，如果这对您的应用程序似乎仍然无效或没有意义，请在您使用光标的位置发布代码并引发错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T13:46:32.937

我怀疑处理游标的任何东西都试图获取 _ID 列，但未在您的 select 语句中指定。做类似的事情，

```
public Cursor getEventsName() {
    return database.rawQuery( "SELECT _id, event_name FROM events", null);
} 
```

一些 Android 组件，例如`SimpleCursorAdapter`要求`_ID`在 select 语句中可用，因为它在`getItemId()`调用时在内部使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T13:56:59.693

> java.lang.IllegalArgumentException：列“_id”不存在

我有同样的问题，抛出这个异常是因为`SimpleCursorAdapter`需要`SELECT`命名列`_id`，所以你可以解决它，例如，如果你创建了一些列`KEY_ID`作为 PK 的表，那么你可以像这样尝试：

```
SELECT KEY_ID AS _id, column1, column2 FROM SomeTable. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T14:41:25.477

```
public Cursor getEventsName() {
return database.rawQuery( "SELECT * FROM events", null); 
```

将其更改为

```
 public Cursor getEventsName(){

    final String[] columns = new String[]{"_id", "event_name "};
    return database.query(events, columns, ""   , null, null, null, null);
} 
```

# python - 使用 tkinter 的网格内的可滚动列表框

> ID：10870855
> 
> 赞同：9
> 
> 时间：2012-06-03T13:41:48.680
> 
> 标签：python, grid, scrollbar, tkinter

我是这个地方和 tkinter 的新手。我坚持制作可滚动的列表框或画布。我已经尝试过这两个小部件。在这个列表框或画布中，我有几个条目和标签小部件。原点为 R0,C0。我使用 row/columnconfigure 来拉伸列表框或画布。

在主窗口中，我在第四行到第四列 (0,4->4,4) 上有 4 个按钮。我将滚动条放在第 5 列。我尝试使用网格方法。我遇到的问题是使滚动条起作用。

注意：将大型机变成类只是我尝试过的方法之一。将滚动条打包在右侧，列表框/画布打包在左侧。但是，滚动条被命令到的列表框/画布小部件不会滚动列表框/画布。此外，添加许多输入框不会导致列表框/画布滚动。请帮忙。

```
from tkinter import *
from tkinter.ttk import *

Style().configure("B.TFrame", relief="flat",
background="blue")
Style().configure("R.TFrame", relief="flat",
background="red")
Style().configure("R.TLabel", background="red")

class Application(Frame): 
    def __init__(self, master=None):
        Frame.__init__(self, master, style="B.TFrame") 
        self.grid(sticky=N+S+E+W) 
        self.mainframe()

    def mainframe(self):
        top=self.winfo_toplevel()
        self.menuBar = Menu(top)
        top["menu"] = self.menuBar
        self.subMenu = Menu(self.menuBar, tearoff=0)
        self.subMenu2 = Menu(self.menuBar, tearoff=0)
        self.menuBar.add_cascade(label="File", menu=self.subMenu)
        self.menuBar.add_cascade(label="About", menu=self.subMenu2)
        self.subMenu.add_command(label="Open")
        self.subMenu.add_command(label="Save")
        self.subMenu.add_command(label="Exit")
        self.subMenu2.add_command(label="About")
        self.subMenu2.add_command(label="Help")

        self.data = Listbox (self, bg='red')
        scrollbar = Scrollbar(self.data, orient=VERTICAL)

        self.add = Button(self, text="")
        self.remove = Button(self, text="")
        self.run = Button(self, text="")
        self.stop = Button(self, text="")

        self.data.grid (row=0, column=0, rowspan=4, columnspan=4, sticky=N+E+S+W)
        self.data.columnconfigure(1, weight=1)
        self.data.columnconfigure(3, weight=1)

        self.add.grid(row=4,column=0,sticky=EW)       
        self.remove.grid(row=4,column=1,sticky=EW)
        self.run.grid(row=4,column=2,sticky=EW)
        self.stop.grid(row=4,column=3,sticky=EW)
        scrollbar.grid(column=5, sticky=N+S) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T14:17:51.260

列表框中没有任何内容，就没有可滚动的内容...

不过，这似乎可行（稍微缩短了示例）。另请参阅[滚动条文档](http://effbot.org/tkinterbook/scrollbar.htm)中的示例。

```
class Application(Frame):   
    def __init__(self,  master=None):
        Frame.__init__(self, master)    
        self.grid(sticky=N+S+E+W)   
        self.mainframe()

    def mainframe(self):                
        self.data = Listbox(self, bg='red')
        self.scrollbar = Scrollbar(self.data, orient=VERTICAL)
        self.data.config(yscrollcommand=self.scrollbar.set)
        self.scrollbar.config(command=self.data.yview)

        for i in range(1000):
            self.data.insert(END, str(i))

        self.run = Button(self, text="run")
        self.stop = Button(self, text="stop")

        self.data.grid(row=0, column=0, rowspan=4,
                   columnspan=2, sticky=N+E+S+W)
        self.data.columnconfigure(0, weight=1)

        self.run.grid(row=4,column=0,sticky=EW)
        self.stop.grid(row=4,column=1,sticky=EW)

        self.scrollbar.grid(column=2, sticky=N+S)

a = Application()
a.mainframe()
a.mainloop() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T14:37:43.653

您必须为滚动条定义`command`属性，并且必须将`yscrollcommand`属性提供给列表框。这两个属性一起工作以使某些东西可滚动。

该`yscrollcommand`选项告诉列表框“当您在 Y 方向滚动时，调用此命令。这通常`set`是滚动条的方法，因此当用户通过箭头键滚动时，滚动条得到更新。

`command`scorllbar的属性是“当用户移动你时，调用这个命令”。这通常是小部件的`yview`or`xview`方法，它会导致小部件在 Y 或 X 方向上更改其视图参数。

在您的情况下，创建小部件后，您将执行以下操作：

```
self.data.config(yscrollcommand=self.scrollbar.set)
scrollbar.config(command=self.data.yview) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-26T05:46:36.980

这个线程很旧，但如果其他人像我一样遇到它，它需要一些精度。

Junuxx 的答案不能按原样工作，不仅因为这里难以获取代码（来自作为“大型机”功能的一部分的“self.run”）而存在缩进问题，而且因为似乎有必要放置列表框和滚动条在自己的框架中。

这是 Python 2 和 3 的工作代码：

```
#!/usr/bin/env python2

try:
   # for Python2
   from Tkinter import *
except ImportError:
   # for Python3
   from tkinter import *

class   Application(Frame):
    def __init__(self,  master=None):
        Frame.__init__(self, master)
        self.grid(sticky=N+S+E+W)
        self.mainframe()

    def mainframe(self):
       frame = Frame(self)
       scrollbar = Scrollbar(frame, orient=VERTICAL)
       data = Listbox(frame, yscrollcommand=scrollbar.set,
              bg='red')
       scrollbar.config(command=data.yview)
       scrollbar.pack(side=RIGHT, fill=Y)
       data.pack(side=LEFT, fill=BOTH, expand=1)

       for i in range(1000):
          data.insert(END, str(i))

       self.run = Button(self, text="run")
       self.stop = Button(self, text="stop")

       frame.grid(row=0, column=0, rowspan=4,
                   columnspan=2, sticky=N+E+S+W)
       frame.columnconfigure(0, weight=1)

       self.run.grid(row=4,column=0,sticky=EW)
       self.stop.grid(row=4,column=1,sticky=EW)

a = Application()
a.mainframe()
a.mainloop() 
```

您可以在此处找到更多信息：[https](https://www.effbot.org/tkinterbook/listbox.htm) ://www.effbot.org/tkinterbook/listbox.htm 。希望这可以帮助。

# jquery - .load() 页面并预加载所有内容

> ID：10870858
> 
> 赞同：4
> 
> 时间：2012-06-03T13:42:23.090
> 
> 标签：jquery

我正在尝试复制 jQuery Mobile 的页面导航系统，您可以在其中调用加载到容器中的 dom 的页面，该容器浮动到右侧，然后进行动画处理，并且到目前为止具有以下内容：http: [//s46264.gridserver.com /dev/dave/pageslider/](http://s46264.gridserver.com/dev/dave/pageslider/)

我的问题是我想在调用 animate 语句之前预加载所有页面内容（请参阅加载第 2 页） 我该怎么做？

到目前为止的代码：

```
var currPage = "one";

        function loadPage(newPage) {
            $("<div id='" + newPage + "' class='page'></div>").insertAfter('#'+currPage);
            $('#'+newPage).load('pages/' + newPage + '.php', function() {       
                $('#page_wrapper').animate({
                    left: '-400px'
                }, 200, function() {
                    $('#'+currPage).remove();
                    $('#page_wrapper').css('left',0);
                    currPage = newPage;
                });
            });
        }

        $(document).ready(function() {
            $("#page_wrapper").append("<div id='" + currPage + "' class='page'></div>");
            $('#'+currPage).load('pages/' + currPage + '.php');
        }) 
```

此外，我很新，所以我的方法中的任何错误提示都受到好评。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:54:11.540

看下面的解决方案：

[http://chipsandtv.com/articles/jquery-image-preload](http://chipsandtv.com/articles/jquery-image-preload)

您是否尝试过检查 DOM 中已预加载的所有图像标签，并使用以下内容在内存中创建图像元素：

```
// images is an array with the image filenames, so you'd 
// have to extract these from the preloaded source.
$(images).each(function() {
    var image = $('<img />').attr('src', this);
}); 
```

这当然是假设`.load()`尚未显示此特定行为。

# c++ - 在 Windows 7 中记录错误的密码

> ID：10870861
> 
> 赞同：0
> 
> 时间：2012-06-03T13:42:59.537
> 
> 标签：c++, winapi, windows-7

是否可以记录在更改用户登录表单中输入的错误密码？
（所以实际上一个或多个用户已登录，更改用户表单通过按`Win`+`L`或使用“开始”菜单显示。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T13:47:31.183

不，这是不可能的，因为密码尝试既不会散列也不会以纯文本形式存储。

# ruby-on-rails - 存在用于 TDD 命令行应用程序的沙盒测试环境

> ID：10870862
> 
> 赞同：0
> 
> 时间：2012-06-03T13:43:02.283
> 
> 标签：ruby-on-rails, ruby, command-line, rspec, tdd

我正在编写一个命令行命令，但想对其进行 TDD。我将创建和删除文件，并想知道是否有沙盒测试 gem 或类似的东西。我正在使用 ruby​​ 和 rspec。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:06:05.420

取决于您要做什么，但我通过模拟文件系统和 STDIN/STDOUT 来测试我的大部分命令行 Ruby。使用依赖注入，我经常会得到以下结果：

```
describe Add do
  it 'writes the result to standard out' do
    console = mock('STDOUT')
    console.should_receive(:puts).with('5')

    Add.new(console).execute(3,2)
  end
end

class Add
  def initialize(out = STDOUT)
    @out = out
  end

  def execute(command_line_args)
    @out.puts(command_line_args.inject(:+))
  end
end

Add.new.execute(ARGS) 
```

通过使用默认值，我可以在测试中注入，但将其排除在生产代码之外。

希望有帮助！

布兰登

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T21:46:26.533

生成器生成的模板`newgem` `install_cucumber`使用了我非常喜欢的模式。查看它创建的 support/env.rb 和 support/common.rb 文件：

*   [https://github.com/drnic/newgem/blob/master/rubygems_generators/install_cucumber/templates/features/support/env.rb.erb](https://github.com/drnic/newgem/blob/master/rubygems_generators/install_cucumber/templates/features/support/env.rb.erb)
*   [https://github.com/drnic/newgem/blob/master/rubygems_generators/install_cucumber/templates/features/support/common.rb](https://github.com/drnic/newgem/blob/master/rubygems_generators/install_cucumber/templates/features/support/common.rb)

在测试中使用它看起来像这样：

```
in_tmp_folder do
  # The current directory is now a generated tmp folder.
  # If you stick to relative paths, everything you do in here should be safe
end 
```

上面链接的文件用于在黄瓜测试中使用它，但它可以很容易地适应您正在使用的任何框架。上面的 env.rb 会在每次测试开始前删除 tmp 文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T21:47:35.393

您可能还想看看`sandbox`宝石。

```
gem install sandbox 
```

示例用法在这里：[https ://github.com/bdimcheff/sandbox](https://github.com/bdimcheff/sandbox)

# php - 如何遍历多维数组以将其写入分隔文件。(PHP)

> ID：10870870
> 
> 赞同：0
> 
> 时间：2012-06-03T13:44:06.933
> 
> 标签：php, arrays, csv, multidimensional-array, xls

我有一个数组“$results”，其中包含使用正则表达式从网页中抓取的结果集。我在遍历数组以将数组的整个数据写入 .csv 文件时有点困惑。

这是按以下方式打印后的数组输出。

```
print_r ($results);    //printing the array 
```

输出

```
 Array
    (
        [fullName] => Ogdensburg Walmart Store #2092
        [street1] => 3000 Ford Street Ext
        [city] => Ogdensburg
        [state] => NY
        [zipcode] => 13669
        [phone] => (315) 394-8990
        [latitude] => 44.7083
        [longitude] => -75.4564
    )
    Array
    (
        [fullName] => Evans Mills Walmart Supercenter Store #5497
        [street1] => 25737 Us Route #11
        [city] => Evans Mills
        [state] => NY
        [zipcode] => 13637
        [phone] => (315) 629-2124
        [latitude] => 44.0369
        [longitude] => -75.8455
    )
    Array
    (
        [fullName] => Watertown Walmart Supercenter Store #1871
        [street1] => 20823 State Route 3
        [city] => Watertown
        [state] => NY
        [zipcode] => 13601
        [phone] => (315) 786-0145
        [latitude] => 43.9773
        [longitude] => -75.9579
    ) 
```

我只使用过简单的数组，谁能给我提示如何遍历`$results`数组以将其写入 .csv 文件或 .xls 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:38:24.780

```
$fp = fopen($filename, 'w');
foreach ($results as $row) {
   fputcsv($fp, $row);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T14:03:47.883

嗨，

尝试使用 parseCSV 类，[http://www.coursesweb.net/php-mysql/parsecsv_pc](http://www.coursesweb.net/php-mysql/parsecsv_pc)

可以轻松读取 CSV 数据，也可以将二维数组转换为 CSV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T14:04:23.973

你可以使用这个：

```
$fp = fopen("file.csv","w");
foreach((array)$results as $val) {
   fwrite($fp,implode(";",$val)."\r\n");
}
fclose($fp); 
```

有几件事要说：

*   需要`"\r\n"`正确更改线路

*   虽然最**常见**的分隔符是逗号`(,)`，但我发现一些应用程序（如 microsoft excel 2010）不喜欢它，而是`put the whole line in a cell`；而不是`semicolon`在这种情况下工作。

*   我总是遇到[fputcsv](http://php.net/manual/en/function.fputcsv.php)问题，所以我选择了这个。

**编辑：**

```
 $fp = fopen("file.csv","w");
    $contents = file_get_contents('http://www.walmart.com/storeLocator/ca_storefinder_results.do?serviceName=&rx_title=com.wm.www.apps.storelocator.page.serviceLink.title.default&rx_dest=%2Findex.gsp&sfsearch_single_line_address=K6T');
    preg_match_all('/stores\[(\d+)\] \= \{/s', $contents, $matches);        
    foreach ($matches[1] as $index) {       
        preg_match('/stores\[' . $index . '\] \= \{(.*?)\}\;/s', $contents, $matches);
        preg_match_all('/\'([a-zA-Z0-9]+)\' \: ([^\,]*?)\,/s', $matches [1], $matches);
        $c = count ($matches [1]);
        $results = array();
        for ($i=0; $i<$c; $i++)  {
            $results [$matches [1] [$i]] = trim($matches [2] [$i], "\'");
        }
        fwrite($fp,implode(";",array_values($results))."\r\n");
    }
    fclose($fp); 
```

**编辑2：**

要写入`only specific columns`.csv 文件，您需要**避免**将它们添加到结果数组（）中**或**在之后取消设置它们，如下所示：

```
...
for ($i=0; $i<$c; $i++)  {
    $results [$matches [1] [$i]] = trim($matches [2] [$i], "\'");
}
unset( $results["weekEndSaturday"] );
unset( $results["recentlyOpen"] );
.. go on, renove the non-desired values ..
fwrite($fp,implode(";",array_values($results))."\r\n"); 
```

# mysql - 这个 SQL 查询有什么问题？发生了一个无意义的错误。

> ID：10870872
> 
> 赞同：0
> 
> 时间：2012-06-03T13:44:30.003
> 
> 标签：mysql, sql

我正在使用以下 SQL 查询：

```
SELECT * FROM Articles WHERE Name = 'Name' AND Column = 'Column' 
```

我收到以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'Column = 'Column' LIMIT 0, 30' 附近使用正确的语法

我没有看到任何语法错误。问题是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T13:48:25.240

`Column`是[保留字](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，因此您需要将其封装在 ` 字符之间：

```
AND `Column` = 'Column' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T13:50:47.070

拥有一个名为 column 的列是一个坏主意，它是一个保留字。你能在你的桌子上改变它吗？不必在引用它的每个查询中解决该设计，如果可以的话，您最好修复它。

# php - mysql_query 结果可在第二篇文章中找到？

> ID：10870874
> 
> 赞同：1
> 
> 时间：2012-06-03T13:44:44.327
> 
> 标签：php, javascript, html

我正在使用动态生成的查询字符串来显示来自某些报告的搜索表单的结果 - 有 5 个搜索字段，并且 $query2 可以不包含任何内容或 5 个额外的搜索值。

```
$query="SELECT * from employee_work where company_id='$company_id' $query2"; 
```

当我发布表单时，我会在屏幕上显示数据，这很棒。然后，我还使用 TCPDF 提供数据的 PDF 下载。我目前还通过 POST 为 TCPDF 上课：

```
if($_POST['PDF']) {
    do the TCPDF stuff......
}

<div id="export-buttons">
<form name="export" method="post" action="">
<input type="submit" name="PDF" value="PDF" class="button pdf">
</div> 
```

问题是，当用户单击 PDF 按钮时，POST 数组现在只包含提交按钮的值，而不是之前的 $query2 数据，所以当我使用 TCPDF 时，它会输出所有数据并忽略 $query2 的部分搜索字符串。

我该如何解决这个问题，以便原始 $query2 数据保持可用，或者有另一种方法来检查是否已单击表单按钮而不覆盖 POST 的内容？我可以使用 javascript 来执行此操作吗？

谢谢杰森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:53:44.427

为什么不添加具有搜索条件值的隐藏输入？这样，当用户发布对 PDF 的请求时，您也会获得这些字段并可以在查询中使用它们（确保值是安全的之后）。

其他更安全的方法是在会话中存储一个对象或数组，其中包含创建列表的参数，然后将该搜索的标识符作为隐藏输入传递给 PDF 表单，例如：

```
$_SESSION['sc0000001'] = array('field1'=>'value1', 'field2'=>'value2', 'field3'=123);
...
<form>
<input type="hidden" name="sc" value="0000001" />
...
</form> 
```

当您发布表单时，您将获得搜索的标识符并使​​用分配给会话的条件创建查询...

已编辑：发布列表标准之前的 html：

```
<form>
<input type="text" name="filter1" value="" />
<input type="text" name="filter2" value="" />
<input type="text" name="filter3" value="" />
<input type="text" name="filter4" value="" />
<input type="text" name="filter5" value="" />
...
<input type="submit" value="go go go" />
</form> 
```

获取过滤器、构建查询、获取结果并在会话中存储的 PHP。

```
$sql = " select * from table_name where 1 ";

$arrFilters = array();
for($i=1;isset($_POST['filter'.$i]) && trim($_POST['filter'.$i])!="";$i++) { 
$arrFilters['filter'.$i] = mysql_real_escape_string($_POST['filter'.$i]);
$sql.=" AND filter".$i."=".$arrFilters['filter'.$i];
}
// here you should have the complete $sql with the filters supplied

// lets save this search, we are going to keep only the last search from this user in his session.
$_SESSION['listingFilters'] = $arrFilters; 
```

带有搜索结果的 HTML 和获取 pdf 的表单后：

```
<form>

<input type="submit" value="get pdf" />
</form> 
```

PHP：在获取 pdf 后我们去检查是否有过滤器

```
$sql = " select * from table_name where 1 "; // basic query
// get the filters array from session
$arrFilters = isset($_SESSION['listingFilters']) ? $_SESSION['listingFilters'] : array();
foreach($arrFilters as $filter => $value) { // for each filter add it to the query
$sql.=" AND filter".$i."=".$arrFilters['filter'.$i];
}
// here you should have the complete $sql with the filters in session
// and can do your pdf magic 
```

随意添加胡椒和盐（您需要修改代码以适合您，如果您使用的文本有过滤器，可能还需要修改查询）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:49:33.897

在没有看到更多代码的情况下，这可能是因为您在 HTML 页面上有两个“表单”，一个表单中的一个提交按钮，另一个表单中的另一个。

```
<form>
   <input name="1" />
   <input type="submit" name="go"/>
</form> 
<form>
   <input type="submit" name="createPDF" />
</form> 
```

确保您在一个表单中拥有所有字段/按钮。

```
<form>
   <input name="1" />
   <input type="submit" name="go"/>
   <input type="submit" name="createPDF" />
</form> 
```

# jquery - 带有悬停下拉菜单的导航栏

> ID：10870879
> 
> 赞同：1
> 
> 时间：2012-06-03T13:45:22.390
> 
> 标签：jquery, html, css, codeigniter, navigation

我很难在我的网站顶部创建此导航栏。

我的 html atm 上有以下内容。请注意，此导航栏是我在该页面上的第二个导航栏，因此是 li 和 a 的类。（我是否还需要为子列表制作类/ID？）

```
<div id="navbar2">
      <ul>
          <li class="list"><a class="link" href="<?php echo base_url() ?>index.php/A">A</a></li>
          <li class="list"><a class="link" href="">B</a></li>
          <li class="list"><a class="link" href="">C</a></li>
          <li class="list"><a class="link" href="">D</a></li>
          <li class="list"><a class="link" href="">Browse</a>
              <ul>
                  <li><a href="">By Category</a>
                      <ul>
                          <li><a href="">k</a></li>
                          <li><a href="">l</a></li>
                          <li><a href="">m</a></li>
                          <li><a href="">n</a></li>
                          <li><a href="">o</a></li>
                          <li><a href="">p</a></li>
                          <li><a href="">q</a></li>
                          <li><a href="">r</a></li>
                      </ul>
                  </li>
                  <li><a href="">By Uploader</a></li>
              </ul>
          </li>
          <li class="list"><a class="link" href="">E</a></li>
      </ul>
 </div> 
```

知道如何实现css吗？当我将鼠标悬停在“浏览”上时，我希望它显示 2 个下拉列表“按类别”和“按上传者”，然后当鼠标悬停在“按类别”顶部时，我想要要显示的子列表。当鼠标没有悬停时，我希望下拉/子列表消失。

另外，当我在此页面上时，我希望列表“A”的背景比其他列表更暗（当前链接）。

很抱歉问了一个新手问题，因为我对建立网站很陌生:)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:44:40.980

如前所述（`position:relative`和`position: absolute`），我在[jsFiddle上创建了一个 css 示例](http://jsfiddle.net/QhjbZ/)

```
a { color: gray; }
#navbar2 li:first-child a { color: black } /* make the letter A black */
#navbar2 li li:first-child a { color: gray } /* all others gray */

#navbar2 {}

/* Level 1 */
#navbar2 ul { padding: 5px;}
#navbar2 li {
    display: inline;
    position: relative; /* set the li-elements to relative, so the child-elements will be positioned on the parent element */
    white-space: nowrap;
}

/* Level 2 */
#navbar2 ul ul {
    display: none;
    position: absolute;
    top: 15px;
    left: 0
}
#navbar2 li:hover ul { display: inline } /* show the second-level nav.. */
#navbar2 li:hover ul ul { display: none } /* but hide the 3rd */
#navbar2 li li {
    /* show the list, line after line */
    float:left;
    clear: left;
}

/* Level 3 */
#navbar2 ul ul ul {
    display: none; /* hide by default */
    width: 100px;
    background: #eee;
}
#navbar2 li li:hover ul {
    display: inline;
    left: 25px;
    z-index: 50;
} 
```

jQuery 是一个不错的选择，可以让它在 IE6 中工作，其中 :hover 不适用于除 a-tag 之外的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:02:10.457

我不会使用 CSS 执行此操作，而是使用 jquery 悬停选项。您需要将导航栏设置为 position: relative 并且下拉菜单需要是绝对的。所以在你的 sub ul 上，我会为他们添加一个类。您将需要设置按类别 ul 的样式，以确保它在主导航下正确排列。

接下来，我将使用 jQuery hover 在您悬停时显示/隐藏按类别 ul。因此，这将需要“浏览”或包装该链接的 li 上的唯一 id 或类。

```
#navbar2 { position: relative; }
#by-category { position: absolute; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T00:31:20.390

这是我做的-

```
<style>
#navbar2 li{ border-radius:5px;list-style-type:none; list-style-position:inside; border:1px solid #bbb; padding:5; background:#383838; width:50}

#navbar2 .list:first-child{background:#fc7;} 

#navbar2 .list:first-child a{color:#383838}

#navbar2 a,#navbar2 a:visited{ text-decoration:none; color:#fc7}

#navbar2 .list{ float:left; }

#navbar2 a:hover{ color:blue }

#navbar2 li ul{ height:0; width:0; }

#navbar2 ul li ul li{ position:relative; top:5; width:100; left:-46; }

#navbar2 ul li ul{ display:none }

#navbar2 ul li ul li:first-child ul li{ left:65; top:-24; width:50; display:none}
</style>
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
<script>
$(document).ready(function(){ 
  $("#navbar2 ul li:eq(4)").mouseenter(function(){ 
    $("#navbar2 ul li ul").fadeIn(600);
  });
  $("#navbar2 ul li:eq(4)").mouseleave(function(){ 
    $("#navbar2 ul li ul").fadeOut(600); 
  }); 
  $("#navbar2 ul li ul li:first").mouseenter(function(){
    $("#navbar2 ul li ul li:first-child ul li").fadeIn(600); 
  });
  $("#navbar2 ul li ul li:first").mouseleave(function(){
    $("#navbar2 ul li ul li:first-child ul li").fadeOut(600);
  });
}); 
</script> 
```

现在把它放在你的网页上。您可以根据您的要求编辑一些 css。

# haskell - 一元动作的延迟输出

> ID：10870881
> 
> 赞同：5
> 
> 时间：2012-06-03T13:46:21.563
> 
> 标签：haskell, lazy-io

我有下一个单子变压器：

```
newtype Pdf' m a = Pdf' {
  unPdf' :: StateT St (Iteratee ByteString m) a
  }
type Pdf m = ErrorT String (Pdf' m) 
```

基本上，它使用 `Iteratee`读取和处理pdf文档的底层（需要随机访问源，这样它就不会一直将文档保存在内存中）。

我需要实现一个保存pdf文档的功能，我希望它是懒惰的，应该可以将文档保存在常量内存中。

我可以产生懒惰`ByteString`：

```
import Data.ByteString.Lazy (ByteString)
import qualified Data.ByteString.Lazy as BS
save :: Monad m => Pdf m ByteString
save = do
  -- actually it is a loop
  str1 <- serializeTheFirstObject
  storeOffsetForTheFirstObject (BS.length str1)
  str2 <- serializeTheSecondObject
  storeOffsetForTheSecondObject (BS.length str2)
  ...
  strn <- serializeTheNthObject
  storeOffsetForTheNthObject (BS.length strn)
  table <- dumpRefTable
  return mconcat [str1, str2, ..., strn] `mappend` table 
```

但实际输出可能取决于先前的输出。（详细信息：pdf 文档包含所谓的“参考表”，其中包含文档内每个对象的绝对偏移量（以字节为单位）。这绝对取决于`ByteString`pdf 对象序列化到的长度。）

如何确保该函数在将其返回给调用者之前`save`不会强制执行？`ByteString`

将回调作为参数并在每次我有输出时调用它会更好吗？

```
import Data.ByteString (ByteString)
save :: Monad m => (ByteString -> Pdf m ()) -> Pdf m () 
```

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T22:39:47.970

要一次性构建它，您需要存储（可能在状态中）已写入间接对象的位置。所以保存需要在工作时跟踪绝对字节位置——我没有考虑你的 Pdf monad 是否适合这个任务。当您完成时，您可以使用存储在状态中的地址来创建外部参照部分。

我认为两遍算法不会有帮助。

6 月 6 日编辑：也许我现在更了解你的愿望了。对于非常快速的文档生成，例如 HTML，有几个关于[hackage](http://hackage.haskell.org/packages/archive/pkg-list.html)的库，名称中带有“blaze”。该技术是避免在 ByteString 上使用“mconcat”并在中间“builder”类型上使用。核心库似乎是['blaze-builder'](http://hackage.haskell.org/package/blaze-builder)，用于 'blaze-html' 和 'blaze-textual'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:44:08.587

到目前为止我找到的解决方案是[协程](http://hackage.haskell.org/package/monad-coroutine) 示例：

```
proc :: Int -> Coroutine (Yield String) IO ()
proc 0 = return ()
proc i = do
  suspend $ Yield "Hello World\n" (proc $ i - 1)

main :: IO ()
main = do
  go (proc 10)
  where
  go cr = do
    r <- resume cr
    case r of
      Right () -> return ()
      Left (Yield str cont) -> do
        putStr str
        go cont 
```

它与回调的工作相同，但调用者可以完全控制输出生成。

# c++ - 后台智能传输服务保存文件名

> ID：10870885
> 
> 赞同：0
> 
> 时间：2012-06-03T13:46:56.347
> 
> 标签：c++, windows, com, microsoft-bits

我正在学习 BITS，我使用谷歌找到了这个来源：[http ://www.rohitab.com/discuss/topic/28249-using-bits-to-downloadupload-files/](http://www.rohitab.com/discuss/topic/28249-using-bits-to-downloadupload-files/)

它工作正常，但下载的文件不是以指定的名称保存，而是使用一些随机文件名，例如：“BITxxxx.tmp” 蹩脚的是它保存在指定的位置但不使用指定的名称。

有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T17:20:10.643

这个问题很不清楚，但是您忘记调用 IBackgroundCopyJob::Complete() 的可能性很高。在 BITS 知道您获得了传输结果之前，文件传输不会完成。如果您在 90 天内未调用 Complete() 或 Cancel()，则会删除临时文件。

您可以通过调用 IBackgroundCopyJob::GetState() 来轮询传输状态，但这不是很实用。您可以调用 IBackgroundCopyJob::SetNotifyInterface 来请求回调，告诉您传输已完成或失败。但这也不是很实用，传输完成之前可能需要一段时间，尤其是当服务器离线或以其他方式被占用时。一个好方法是让 BITS 在完成后运行程序，使用 IBackgroundCopyJob2::SetNotifyCmdLine()。您将希望使用命令行参数至少传递 jobID，以便您可以再次获得指向该作业的接口指针。这样，传输将在重启或地震等严重事件中幸存下来。

# css - 如何将父 div 内的元素与底部 100% 对齐

> ID：10870886
> 
> 赞同：0
> 
> 时间：2012-06-03T13:47:03.523
> 
> 标签：css

我有一个小问题正在努力解决。

我需要将一个元素与底部百分比 div 的顶部对齐：100% 但我无法让它在父 div 中对齐。

所以我需要的是底部：0% 与 div 的底部对齐，底部：100% 与顶部对齐。

有任何想法吗？

编辑：

[http://jsfiddle.net/GmAEx/](http://jsfiddle.net/GmAEx/)

我希望该示例中的灰色条与顶部对齐：使用 'bottom' 100%

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T14:19:42.407

它真的不明白你的意思`bottom: 100%`，也许你的意思`bottom: 0;`？

另请参阅[您更新的示例](http://jsfiddle.net/GmAEx/10/)。

=== 更新 ===

谢谢你的评论，我想现在我知道你想要什么了。问题是，`bottom: 100%`“滑块手柄”意味着它完全在父 div 之外。

在父级周围添加一个包装器，`div`其完整高度减去滑块句柄的高度，并添加一个具有滑块句柄高度的填充。用 替换父高度`100%`。将`with`,`background-color`和也移动`margin-top`到包装器中。

另请参阅`bottom: 0%`：[更新示例。](http://jsfiddle.net/zB6RA/1/)

另请参阅`bottom: 100%`：[更新示例。](http://jsfiddle.net/zB6RA/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:05:09.443

大概这是动态生成的，否则您只需使用它`top: 0`。

如果是这种情况，那么您可能有类似的情况：

```
child.style.bottom = y+"%"; 
```

在这种情况下，添加以下内容很简单：

```
child.style.marginTop = (child.offsetHeight/100*y)+"px"; 
```

# javascript - Javascript - 如何替换不在 HTML 标签中的空格？

> ID：10870888
> 
> 赞同：2
> 
> 时间：2012-06-03T13:47:12.140
> 
> 标签：javascript, replace, tags, space

以下代码不起作用，结果被破坏，因为 HTML 标记中有空格。

HTML：

```
<div>Lorem ipsum <a id="demo" href="demo" rel="demo">dolor sit amet</a>, consectetur adipiscing elit.</div> 
```

Javascript：

```
var div = document.getElementsByTagName('div')[0];
div.innerHTML = div.innerHTML.replace(/\s/g, '<span class="space"> </span>'); 
```

如何替换不在 HTML 标签中的空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:56:07.083

实际使用 DOM 函数而不是使用正则表达式进行一些不可靠的字符串操作会是一个更好的主意。[`splitText`](https://developer.mozilla.org/en/DOM/Text.splitText)是文本节点的功能，允许您拆分文本节点。它在这里派上用场，因为它允许您在空格处拆分并`<span>`在它们之间插入一个元素。这是一个演示：http: [//jsfiddle.net/m5Qe8/2/](http://jsfiddle.net/m5Qe8/2/)。

```
var div = document.querySelector("div");

// generates a space span element
function space() {
    var elem = document.createElement("span");
    elem.className = "space";
    elem.textContent = " ";
    return elem;
}

// this function iterates over all nodes, replacing spaces
// with space span elements
function replace(elem) {
    for(var i = 0; i < elem.childNodes.length; i++) {
        var node = elem.childNodes[i];
        if(node.nodeType === 1) {
            // it's an element node, so call recursively
            // (e.g. the <a> element)
            replace(node);
        } else {
            var current = node;
            var pos;
            while(~(pos = current.nodeValue.indexOf(" "))) {
                var next = current.splitText(pos + 1);
                current.nodeValue = current.nodeValue.slice(0, -1);
                current.parentNode.insertBefore(space(), next);
                current = next;
                i += 2;  // childNodes is a live array-like object
                         // so it's necessary to advance the loop
                         // cursor as well
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:10:23.053

首先在每次出现`>`or时拆分字符串`<`。然后通过仅在偶数部分替换空格再次将所有部分组合成一个字符串：

```
var div = document.getElementsByTagName('div')[0];
var parts = div.innerHTML.split(/[<>]/g);
var newHtml = '';
for (var i = 0; i < parts.length; i++) {
    newHtml += (i % 2 == 0 ? parts[i].replace(/\s/g, '<span class="space"> </span>') : '<' + parts[i] + '>');
}
div.innerHTML = newHtml; 
```

另请参阅[此示例](http://jsfiddle.net/kWKpX/1/)。

=== 更新 ===

好的，IE 拆分的结果可能与所有其他浏览器的拆分结果不同。通过以下解决方法，它应该可以工作：

```
var div = document.getElementsByTagName('div')[0];
var sHtml = ' ' + div.innerHTML;
var sHtml = sHtml.replace(/\>\</g, '> <');
var parts = sHtml.split(/[<>]/g);
var newHtml = '';
for (var i = 0; i < parts.length; i++) {
    if (i == 0) {
        parts[i] = parts[i].substr(1);
    }
    newHtml += (
        i % 2 == 0 ? 
        parts[i].replace(/\s/g, '<span class="space"> </span>') : 
        '<' + parts[i] + '>'
    );
}
div.innerHTML = newHtml; 
```

另请参阅[此更新示例](http://jsfiddle.net/SCeXJ/1/)。

=== 更新 ===

好的，我已经完全改变了我的脚本。它已经过 IE8 和当前的 firefox 测试。

```
function parseNodes(oElement) {
    for (var i = oElement.childNodes.length - 1; i >= 0; i--) {
        var oCurrent = oElement.childNodes[i];
        if (oCurrent.nodeType != 3) {
            parseNodes(oElement.childNodes[i]);
        } else {
            var sText = (typeof oCurrent.nodeValue != 'undefined' ? oCurrent.nodeValue : oCurrent.textContent);
            var aParts = sText.split(/\s+/g);
            for (var j = 0; j < aParts.length; j++) {
                var oNew = document.createTextNode(aParts[j]);
                oElement.insertBefore(oNew, oCurrent);
                if (j < aParts.length - 1) {
                    var oSpan = document.createElement('span');
                    oSpan.className = 'space';
                    oElement.insertBefore(oSpan, oCurrent);
                    var oNew = document.createTextNode(' ');
                    oSpan.appendChild(oNew);
                }
            }
            oElement.removeChild(oCurrent);
        }
    }
}

var div = document.getElementsByTagName('div')[0];
parseNodes(div); 
```

另请参阅[新示例](http://jsfiddle.net/QjZsZ/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:23:41.967

您可以处理容器的文本内容，而忽略标记。

```
var div = document.getElementsByTagName('div')[0];
if(div.textContent){
    div.textContent=div.textContent.replace(/(\s+)/g,'<span class="space"> </span>';
}
else if(div.innerText){
    div.innerText=div.innerText.replace(/(\s+)/g,'<span class="space"> </span>';
} 
```

# c - 在函数中初始化数组

> ID：10870891
> 
> 赞同：3
> 
> 时间：2012-06-03T13:47:48.430
> 
> 标签：c, arrays, pointers

当我想通过函数初始化指向数组的指针时，我正在执行以下操作：

通过函数初始化和销毁​​数组：

```
int initArr(int **b)
{
    int *arr = (int *) malloc(sizeof(int)*2);

    if(arr == NULL)
        return 0;

    *b = arr;
    arr = NULL;
    return 1;
}

void destroyArr(int *b)
{
    free(b); 
    b = NULL;
} 
```

初始化指向数组的指针：

```
int *pArr;
int initStatus = initArr(&pArr);

if(initStatus == 0)
{
    printf("%s", "error");
    return 0;
} 
```

使用指向数组的指针：

```
*pArr = 1;
*(pArr + 1) = 2;

printf("0 = %i\n", *pArr);
printf("1 = %i\n", *(pArr + 1)); 
```

销毁指向数组的指针：

```
destroyArr(pArr);
pArr = NULL; 
```

这是正确和安全的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T13:57:31.847

我没有测试它，但它似乎是正确的。不过，一个小评论：您不需要设置`arr`或`b`to `NULL`，它们处于其范围的最后，无论如何都不能（安全地）访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T14:22:12.123

initArr 函数可以简化为：

```
int initArr(int **b)
{
    *b = malloc(2 * sizeof **b);

    return *b ? 1 : 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T14:13:13.153

事实上，initArr 和 destroyArr 根本没有增加任何值。它们包装标准 C 函数以返回并执行完全相同的操作。

此外，您可以使用数组索引器 [] 来访问已分配数组的各个成员。

这是一个等效的工作：

```
int* pArr = (int*) malloc(2 * sizeof(int));
if (pArr) {
    pArr[0] = 1;
    pArr[1] = 2;
    printf("0 = %d\n", pArr[0]);
    printf("1 = %d\n", pArr[1]);
    free(pArr);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-03T13:51:18.017

看起来不错，但`free`in`destroyArr()`并没有给你任何东西，因为你没有将双指针传递给它。

# java - 在 Java 服务器中重用客户端 java 套接字

> ID：10870892
> 
> 赞同：0
> 
> 时间：2012-06-03T13:48:02.143
> 
> 标签：java, android, sockets, multiplayer

我正在开发一个 Java 服务器，两个控制一个 android 在线游戏。

可以将 myserversocket.accept() 的客户端套接字保存在 Client 类的变量中吗？

这非常有用，因为这样，服务器可以在服务器需要时与客户端通信，而在客户端联系服务器时则不能。

我的实际代码是：

```
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.ArrayList;
import java.util.UUID;

import sal.app.shared.Packet;

public class Server {

    private ArrayList<GameSession> games = new ArrayList<GameSession>();
    private ArrayList<Client> pendent_clients = new ArrayList<Client>();
    private Packet read_packet= new Packet();
    private Packet sent_packet = new Packet();
    private Socket clientSocket = null;

    public static void main(String[] args) throws ClassNotFoundException{
        ServerSocket serverSocket = null;

        //DataInputStream dataInputStream = null;
        //DataOutputStream dataOutputStream = null;
        ObjectOutputStream oos=null;
        ObjectInputStream ois=null;
        Server myServer = new Server();

        try {
            serverSocket = new ServerSocket(7777);
            System.out.println("Listening :7777");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        while(true){
            try {
                myServer.clientSocket = new Socket();
                myServer.clientSocket = serverSocket.accept();
                myServer.read_packet = new Packet();
                myServer.sent_packet = new Packet();

                oos = new ObjectOutputStream(myServer.clientSocket.getOutputStream());

                ois = new ObjectInputStream(myServer.clientSocket.getInputStream());

                //dataInputStream = new DataInputStream(clientSocket.getInputStream());
                //dataOutputStream = new DataOutputStream(clientSocket.getOutputStream());
                //System.out.println("ip: " + clientSocket.getInetAddress());
                //System.out.println("message: " + ois.read());
                //dataOutputStream.writeUTF("Hello!");

                /*while ((myServer.read_packet = (Packet) ois.readObject()) != null) {

                    myServer.handlePacket(myServer.read_packet);
                    break;
                }*/

                myServer.read_packet=(Packet) ois.readObject();
                myServer.handlePacket(myServer.read_packet);
                //oos.close();

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            finally{
                if( myServer.clientSocket!= null){
                    /*try {
                        //myServer.clientSocket.close();

                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }*/
                }

                /*if( ois!= null){
                    try {
                        ois.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

                if( oos!= null){
                    try {
                        oos.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }*/
            }
        }
    }

    public void handlePacket(Packet hp) throws IOException
    {
        if(hp.getOpCode() == 1)
        {
            registPlayer(hp);
        }
    }

    public void registPlayer(Packet p) throws IOException
    {
        Client registClient = new Client(this.clientSocket);
        this.pendent_clients.add(registClient);

        if(pendent_clients.size() == 2)
        {
            initAGame();
        }
        else
        {
            ObjectOutputStream out=null;
            Packet to_send = new Packet();
            to_send.setOpCode(4);
            out = new ObjectOutputStream(registClient.getClientSocket().getOutputStream());
            out.writeObject(to_send);

        }
    }

    public void initAGame() throws IOException
    {
        Client c1 = pendent_clients.get(0);
        Client c2 = pendent_clients.get(1);
        Packet to_send = new Packet();
        ObjectOutputStream out=null;

        GameSession incomingGame = new GameSession(c1,c2);
        games.add(incomingGame);

        to_send.setGameId(incomingGame.getGameId());
        to_send.setOpCode(5);
        out = new ObjectOutputStream(c1.getClientSocket().getOutputStream());
        out.writeObject(to_send);

        out = new ObjectOutputStream(c2.getClientSocket().getOutputStream());
        out.writeObject(to_send);

        pendent_clients.clear();

    }

    public Client getClientById(UUID given_id)
    {
        for(GameSession gs: games)
        {
            if(gs.getClient1().getClientId().equals(given_id))
            {
                return gs.getClient1();
            }
            else if(gs.getClient2().getClientId().equals(given_id))
            {
                return gs.getClient2();
            }
        }

        return null;
    }
} 
```

使用此代码，我得到了这个错误：

```
java.net.SocketException: Broken pipe
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
    at java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1847)
    at java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1756)
    at java.io.ObjectOutputStream.writeNonProxyDesc(ObjectOutputStream.java:1257)
    at java.io.ObjectOutputStream.writeClassDesc(ObjectOutputStream.java:1211)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1395)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1547)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:333)
    at Server.initAGame(Server.java:146)
    at Server.registPlayer(Server.java:120)
    at Server.handlePacket(Server.java:106)
    at Server.main(Server.java:63) 
```

当第二个客户端连接并且服务器尝试在此代码中的函数 initGame() 中向前一个客户端 1 发送数据包时，会发生此错误：

```
out = new ObjectOutputStream(c1.getClientSocket().getOutputStream());
out.writeObject(to_send); 
```

我的安卓代码是这样的：

```
package sal.app;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.Socket;
import java.net.UnknownHostException;

import sal.app.logic.DataBaseManager;
import sal.app.shared.Packet;
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

public class MultiPlayerWaitActivity extends Activity{

    private DataBaseManager db;

    public void onCreate(Bundle savedInstanceState) {

        super.requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.multiwaitlayout);

        db=DataBaseManager.getSalDatabase(this);
        db.teste();
        try {
            db.createDataBase();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        Socket socket = null;
        ObjectOutputStream outputStream = null;
        ObjectInputStream inputStream = null;
        //System.out.println("dadadad");
        try {
            socket = new Socket("192.168.1.4", 7777);
            //Game = new MultiPlayerGame(new ServerManager("192.168.1.66"),new Session(), new Player(""));
            outputStream = new ObjectOutputStream(socket.getOutputStream());
            inputStream = new ObjectInputStream(socket.getInputStream());
            //dataOutputStream.writeUTF(textOut.getText().toString());
            //textIn.setText(dataInputStream.readUTF());
            Packet p = new Packet();
            Packet r = new Packet();
            p.setOpCode(1);
            outputStream.writeObject(p);

            /*try {
                r=(Packet)inputStream.readObject();
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }*/
            //while(true){

                //dataInputStream = new DataInputStream(clientSocket.getInputStream());
                //dataOutputStream = new DataOutputStream(clientSocket.getOutputStream());
                //System.out.println("ip: " + clientSocket.getInetAddress());
                //System.out.println("message: " + ois.read());
                //dataOutputStream.writeUTF("Hello!");

                /*while ((r= (Packet) inputStream.readObject()) != null) {

                        handPacket(r);
                        break;
                    }*/

                r=(Packet) inputStream.readObject();
                handPacket(r);
                //oos.close();

            //}

            /*System.out.println(r.getOpCode());

            if(r.getOpCode() == 5)
            {
                this.finish();
            }*/

        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        /*finally{
            if (socket != null){
                try {
                    socket.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            if (outputStream != null){
                try {
                    outputStream.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            if (inputStream != null){
                try {
                    inputStream.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }*/ //catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        //e.printStackTrace();
        //}
        catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void handPacket(Packet hp)
    {
        if(hp.getOpCode() == 5)
        {
            this.finish();
        }

        this.finish();
    }

} 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:49:43.630

如果您希望服务器能够在需要时联系客户端，那么每当服务器使用 accept() 方法获取客户端 Socket 对象时，根据您的需要将其存储在 HashMap 或 ArrayList 中。因此，现在您已将客户端套接字对象与服务器一起保存。

# java - 如何创建 Web 服务代理？我们可以生成@Endpoints 吗？

> ID：10870900
> 
> 赞同：1
> 
> 时间：2012-06-03T13:49:13.180
> 
> 标签：java, web-services, spring, proxy, jaxb

我正在开发一个带有审计的 Web 服务代理（稍后使用缓存 = 创建自己的响应），我需要生成 @Endpoints（这样只会转发，即调用远程 Web 服务或至少虚拟）。对于代理来说，编组/解组似乎是必要的，它将为请求添加“一些东西”......

我们将使用 spring-ws 和 JAXB。获取代理 Web 服务的所有 XSD 和静态 WSDL。

周围有什么提示吗？有人在做类似的事情吗？你怎么样？

有没有一种简单的方法可以使用弹簧或弹簧集成来实现这一点？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:39:40.610

这应该可以同时使用 Spring WS 和 Spring Integration：

使用 Spring WS，您可以为远程 WS 创建一个代理类，包装一个[org.springframework.ws.client.core.WebServiceTemplate](http://static.springsource.org/spring-ws/sites/2.0/apidocs/org/springframework/ws/client/core/WebServiceTemplate.html)来与 WS 对话——它有 API 负责将请求编组到 xml 并解组回复。

使用 Spring Integration，您可以使用[出站 Web 服务网关](http://static.springsource.org/spring-integration/reference/htmlsingle/#webservices-namespace)，但您需要在其前面使用消息网关，该网关将充当您的代理，如下所示：

```
<int:gateway id="wsproxy"  service-interface="..ProxyInterface" default-request-channel="requestChannel" default-reply-channel="replyChannel"/>

<int-ws:outbound-gateway id="wsGateway" request-channel="requestChannel" uri="http://serviceURL" marshaller="someMarshaller" unmarshaller="someUnmarshaller"/> 
```

但是，我会推荐使用 WebserviceTemplate 的第一种方法，因为您在这里没有非常复杂的集成需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T01:36:17.307

今天我可以告诉我们在没有弹簧集成的情况下我们是如何进行的。我们发现了两种不同的方式来生成@Endpoint 类。

**1)**使用**XSLT**和**Freemarker ，我们在*****预编译***阶段生成了端点类源。XSLT 转换遍历所有 WSDL 文件以创建一个摘要文件，然后将其用于生成源代码。

**2)**我们使用**Javassist**复制模板类，然后生成有关**JAXB2Marshaller实例内容的方法，最后使用****FactoryBean**实例化对象，所有这些都在服务器***启动时进行***。

我们在这里遇到的问题是一组以格式编写的 XSD 文件，导致根对象在没有 @XmlRootAnnotation 的情况下生成。我们内部的 Javassist 版本与 Java 1.4（无泛型）一起使用，因此我们对 XJC 使用全局自定义文件并在根对象上强制使用 @XmlRootAnnotation。

这两种解决方案各有利弊，但都比使用 ESB 更简单。

# c# - C# 中的“StackOverflowException 未处理”错误

> ID：10870902
> 
> 赞同：-5
> 
> 时间：2012-06-03T13:49:47.283
> 
> 标签：c#, xna, stack-overflow, unhandled

我的代码有问题。我终于明白了，所以没有错误，但现在我必须处理 stackoverflow ......

有人可以告诉我我的代码有什么问题吗？

```
 public Matrix Projection
    {
        get { return Projection; }
        protected set 
        {
            Projection = value;
            generateFrustum();
        }
    } 
```

如果你能帮忙就好了！

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-03T13:51:35.637

您的 set 方法调用自身：`Projection = value`.

```
private Matrix _projection = null;
public Matrix Projection
{
    get { return _projection; }
    protected set 
    {
        _projection = value;
        generateFrustum();
    }
} 
```

当您使用以下表格时：

```
public Matrix Projection { get; set } 
```

您不需要指定变量来存储实际值，但是当您显式实现 get 或 set 时，您应该声明附加变量并在 get、set 实现中使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T13:53:08.900

`get`您正在定义您的和`set`函数的无限递归。

```
get { return Projection; } 
```

相当于：

```
get { return get();}. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-13T14:57:53.893

属性的 setter 和 getter 被实现为方法（get_X 和 set_X）。

在 Projection 的 setter 中写入`Projection = value`会导致对`set_Projection()`from within的递归调用`set_Projection()`。（同样适用于`get_Projection()`。）

由于调用周围没有条件，因此递归是无限的。

至于`public T PropA { get; set; }`，它是以下的糖语法：

```
private T _PropA;

public T PropA
{
    get
    {
        return _PropA;
    }
    set
    {
        _PropA = value;
    }
} 
```

你应该做的是：

```
private Matrix _projection;

public Matrix Projection
{
    get
    {
        return _projection;
    }
    protected set 
    {
        // Make sure that Matrix is a structure and not a class
        // override == and != operators in Matrix (and Equals and GetHashCode)
        // If Matrix has to be a class, use !_project.Equals(value) instead

        // Consider using an inaccurate compare here instead of == or Equals
        // so that calculation inaccuracies won't require recalculation

        if (_projection != value)
        {
            _projection = value;
            generateFrustum();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T14:24:08.870

```
public T PropA { get; set; } 
```

实际上是

```
T _PropA; public T PropA { get { return _PropA; } set { _PropA = value; } } 
```

所以答案将是

```
private Matrix _projection = null;
public Matrix Projection
{
    get { return _projection; }
    protected set 
    {
      _projection = value;
      generateFrustum();
    }
} 
```

您可以阅读以下示例以获取更多信息
[http://msdn.microsoft.com/en-us/library/ms228503.aspx](http://msdn.microsoft.com/en-us/library/ms228503.aspx)
[http://msdn.microsoft.com/en-us/library/w86s7x04(v=vs. 80).aspx](http://msdn.microsoft.com/en-us/library/w86s7x04(v=vs.80).aspx)

# php - PHP：要求不能正常工作

> ID：10870905
> 
> 赞同：3
> 
> 时间：2012-06-03T13:50:15.033
> 
> 标签：php

我有一个目录根：

```
index.php
includes/
    template.php
    testfile.php
    phpFiles/
        processInput.php
        testfile.php 
```

索引.php：

```
require_once("includes/template.php"); 
```

模板.php：

```
require_once("includes/phpFiles/processInput.php") 
```

进程输入.php：

```
require_once("testfile.php")
require_once("../testfile.php") 
```

这段代码在你运行 index.php 时会起作用，当然在你运行 template.php 时它不会起作用。

如您所见，index.php 像平常一样包含 template.php。但是在 template.php 中，您必须像在 index.php 所在的目录中一样包含。但是，在 processInput.php 中，您必须像在 processInput.php 所在的目录中一样包含。

为什么会发生这种情况，我该如何解决它，以便包含路径始终是完成要求的文件的目录？第二个包含的文件与请求的文件具有相同的包含路径，但下一个没有。

谢谢你的帮助！

编辑：奇怪的是我在类文件夹中包含了类。它包括其他文件，即使路径是相对的。为什么会发生这种情况，我该如何解决？

非常重要的编辑：我刚刚意识到这一切都是因为在我的示例中，includes/phpFiles/processInput.php 中的包含包括同一目录中的一个文件： require_once("file in same dir.php"); 这就是原因。如果您包含一个文件而没有指定文件名以外的任何内容，则 include_path 实际上是写入要求的文件所在的目录。任何人都可以确认这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T13:52:18.390

使用绝对路径。

```
require_once($_SERVER['DOCUMENT_ROOT']."/includes/phpFiles/processInput.php"); 
```

对所有 d 文件使用类似的表格，`require`无论您身在何处，它们都可以使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T13:57:32.113

您可以通过以下几种方式执行此操作，其中包括：

1.  用于[`set_include_path`](http://www.php.net/set_include_path)控制执行`require()`调用的目录。

2.  在您定义的常量中定义一个公共绝对基本路径，`index.php`并在每个`require()`语句中使用它（例如`require(BASEPATH . '/includes/template.php')`）。

3.  在任何地方使用相对路径并利用`dirname(__FILE__)`或`__DIR__`将它们转换为绝对路径。例如：`require(__DIR__ . '/phpFiles/processInput.php');`

默认情况下，在包含路径中使用当前工作目录；您可以通过检查`get_include_path()`. 但是，这与制造地*无关*`include()`；它与主执行脚本有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T13:53:15.363

您正在使用相对路径。您需要使用绝对路径：`$_SERVER['DOCUMENT_ROOT']`.

当您包含/要求时，您基本上是暂时将所有代码从一个文件移动到另一个文件。

所以如果**file1.php**（位于`root`）包含：

```
require("folder/file.php"); 
```

并且您在 file2.php 中**包含 file1.php** **（**位于不同的位置（例如目录）：**`folder`**

 ****文件2.php：**

```
require("../file1.php"); 
```

现在所有**file1.php**代码都在**file2.php**中。所以**file2.php**看起来像这样：

```
require("../file1.php");
require("folder/file.php");//but because file2.php is already in the `folder` directory, this path does not exist... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T13:59:42.460

索引.php：

```
require_once("includes/template.php"); 
```

模板.php：

```
require_once("includes/phpFiles/processInput.php") 
```

您的目录结构已关闭。从您使用它的文件中可以看到文件包含。*因此，“template.php”正在其*当前文件夹 (/includes/)中寻找“includes/”文件夹。

正如其他人所说，使用绝对路径，这将确保您始终从文件系统根目录开始，或者使用：

```
require_once("phpFiles/processInput.php") 
```

在您的 template.php 文件中（如果您移动东西，它更有可能破坏，这就是为什么其他人都建议使用来自文件系统根目录的绝对路径）。

顺便说一句，如果您使用“index.php”作为某种框架系统，您可以考虑定义一个变量来存储常见文件的地址，例如：

```
define('APPLICATION_PATH', realpath(dirname(__FILE__));
define('PHPFILES_PATH', APPLICAITON_PATH . '/includes/phpFiles/'); 
```**

# php - 通过 IP 地址检测位置（我得到一个空白页。为什么？）

> ID：10870906
> 
> 赞同：0
> 
> 时间：2012-06-03T13:50:37.343
> 
> 标签：php, ip

这是一个有用的代码片段，用于检测特定 IP 地址的位置。下面的函数以一个 IP 地址为参数，返回 IP 地址的位置。如果没有找到位置，则返回 UNKNOWN。

但我得到一个空白页。为什么？

```
function detect_city($ip) {
    $default = 'UNKNOWN';

    if (!is_string($ip) ||
        strlen($ip) < 1 ||
        $ip == '127.0.0.1' ||
        $ip == 'localhost')

        $ip = '8.8.8.8';

    $curlopt_useragent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2)      Gecko/20100115 Firefox/3.6 (.NET CLR 3.5.30729)';

    $url = 'http://ipinfodb.com/ip_locator.php?ip=' . urlencode($ip);
    $ch = curl_init();

    $curl_opt = array(
        CURLOPT_FOLLOWLOCATION  => 1,
        CURLOPT_HEADER      => 0,
        CURLOPT_RETURNTRANSFER  => 1,
        CURLOPT_USERAGENT   => $curlopt_useragent,
        CURLOPT_URL       => $url,
        CURLOPT_TIMEOUT         => 1,
        CURLOPT_REFERER         => 'http://' . $_SERVER['HTTP_HOST'],
    );

    curl_setopt_array($ch, $curl_opt);

    $content = curl_exec($ch);

    if (!is_null($curl_info)) {
        $curl_info = curl_getinfo($ch);
    }

    curl_close($ch);

    if ( preg_match('{<li>City : ([^<]*)</li>}i', $content, $regs) )  {
        $city = $regs[1];
    }
    if ( preg_match('{<li>State/Province : ([^<]*)</li>}i', $content, $regs) )  {
        $state = $regs[1];
    }

    if ( $city!='' && $state!='' ) {
        $location = $city . ', ' . $state;
        return $location;
    }
    else {
        return $default;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T14:47:16.667

您可能会得到一个空白页面，因为您的脚本中存在错误并且 PHP 未配置为显示错误，大多数在线网络空间都是这种情况。尝试通过将其添加到`.htaccess`同一目录中的文件来启用错误显示：

```
php_flag display_errors on
php_value error_reporting 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T17:58:42.030

希望这可以帮助 ：）

```
function detect_city($ip) {

    $default = 'UNKNOWN';

    if (!is_string($ip) || strlen($ip) < 1 || $ip == '127.0.0.1' || $ip == 'localhost')
        $ip = '8.8.8.8';

    $curlopt_useragent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2) Gecko/20100115 Firefox/3.6 (.NET CLR 3.5.30729)';

    $url = 'http://ipinfodb.com/ip_locator.php?ip=' . urlencode($ip);
    $ch = curl_init();

    $curl_opt = array(
        CURLOPT_FOLLOWLOCATION  => 1,
        CURLOPT_HEADER      => 0,
        CURLOPT_RETURNTRANSFER  => 1,
        CURLOPT_USERAGENT   => $curlopt_useragent,
        CURLOPT_URL       => $url,
        CURLOPT_TIMEOUT         => 1,
        CURLOPT_REFERER         => 'http://' . $_SERVER['HTTP_HOST'],
    );

    curl_setopt_array($ch, $curl_opt);

    $content = curl_exec($ch);

    if (!is_null($curl_info)) {
        $curl_info = curl_getinfo($ch);
    }

    curl_close($ch);

    if ( preg_match('{<li>City : ([^<]*)</li>}i', $content, $regs) )  {
        $city = $regs[1];
    }
    if ( preg_match('{<li>State/Province : ([^<]*)</li>}i', $content, $regs) )  {
        $state = $regs[1];
    }

    if( $city!='' && $state!='' ){
      $location = $city . ', ' . $state;
      return $location;
    }else{
      return $default; 
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:14:57.157

这一行：

```
if (!is_null($curl_info)) {
    $curl_info = curl_getinfo($ch);
} 
```

**$curl_info**不存在，`cannot be`通过查看您的参数和上面的其余代码。相反，注释掉`if`，你应该没问题（在我的 IP 地址上测试）：

```
// if (!is_null($curl_info)) {
   $curl_info = curl_getinfo($ch);
// } 
```

# iphone - iPhone 上的 OpenGL ES 2.0 - 我可以使用多少个纹理单元？

> ID：10870913
> 
> 赞同：5
> 
> 时间：2012-06-03T13:52:08.907
> 
> 标签：iphone, ios, opengl-es

在苹果的文档中：（ [http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/OpenGLESPlatforms/OpenGLESPlatforms.html](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/OpenGLESPlatforms/OpenGLESPlatforms.html)）

它说对于“PowerVR SGX 上的 OpenGL ES 1.1”“有 8 个纹理单元可用。”

它没有说明 OpenGL ES 2.0 上有多少个单元可用，这是否意味着没有限制？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T14:40:14.907

与其询问并获得将来可能正确或不正确的答案，您的应用程序应该在运行时使用以下方式以编程方式进行检查：

```
glGetIntegerv(GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS, &MaxTextureUnits); 
```

请注意，顶点着色器和片段着色器中允许的纹理单元数量也有单独的数字。他们会使用常量`GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS`和`GL_MAX_TEXTURE_IMAGE_UNITS`。该`COMBINED`号码是同时可供双方使用的号码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-18T13:20:00.303

[Apple 的iOS 设备兼容性参考](https://developer.apple.com/library/ios/documentation/DeviceInformation/Reference/iOSDeviceCompatibility/OpenGLESPlatforms/OpenGLESPlatforms.html#//apple_ref/doc/uid/TP40013599-CH106-SW1)中详细列出了 iPhone 和 iPad 上的所有硬件

基于此，您可以安全地在*任何*iOS 设备上使用多达**8** **个纹理单元。**

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T18:55:06.017

实际上答案在您链接的同一页面中：

> PowerVR SGX 上的 OpenGL ES 2.0
> 
> 限制
> 
> ...
> 
> **您可以在片段着色器中使用多达 8 个纹理。您不能在顶点着色器中使用纹理查找。**
> 
> ……*

# javascript - 无法从 JSON 创建 Ember 对象

> ID：10870915
> 
> 赞同：1
> 
> 时间：2012-06-03T13:52:16.580
> 
> 标签：javascript, json, ember.js

从 JSON ajax 数据源创建 Ember 对象时遇到问题。如果我以手动方式创建对象，它会完美运行，并且视图会更新。但是，如果数据本身来自 JSON ajax 数据调用，则它不起作用。如果我检查生成的对象，Ember 模型对象不会获得正确的 getter 和 setter 属性。有谁知道为什么会这样？

```
App.AlbumView = Ember.View.extend({
    templateName:'album',
    albums:[],
    getAll:function() {
        var self = this;

        //This works!
        self.albums.push(App.Album.create({title: 'test', artist: 'test'}));

        $.post('/Rest/list/album',null,function(data) {
            $.each(data, function (index, item) {

                //This does not work?!?
                self.albums.push(App.Album.create(item));
            });
        }, 'json');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T14:47:25.670

在访问视图的实例变量时，您应该始终使用 embers`get('variableName')`和方法。`set('variableName', newValue)`如果你不这样做，奇怪的事情往往会发生。

# .net - 开源 .Net POS 解决方案

> ID：10870920
> 
> 赞同：3
> 
> 时间：2012-06-03T13:52:48.187
> 
> 标签：.net, open-source, point-of-sale

是否有基于 .Net 的开源 POS（销售点）解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T14:17:31.363

最近开源的 .NET POS 解决方案是 Oceanside POS 来自一家名为 Oceanside Software Corporation 的公司。请点击链接[http://www.oceansidesw.com/open-source.html](http://www.oceansidesw.com/open-source.html)了解有关该产品的更多信息。

# windows-phone-7 - 我是否需要告诉用户该应用程序使用位置服务来投放广告？

> ID：10870921
> 
> 赞同：0
> 
> 时间：2012-06-03T13:52:58.270
> 
> 标签：windows-phone-7, location, admob, app-hub

**微软**的政策说：

> 以下要求适用于接收用户移动设备位置的应用程序： 2.7.3 您的应用程序必须提供应用程序内设置，允许用户启用和禁用您的应用程序从位置服务 API 访问和使用位置。

我包含在我的**AdMob**`ID_CAP_LOCATION`清单中**（谷歌移动广告）控件 - 我是否需要添加应用内设置以禁用位置并告诉用户该应用程序在首次启动时使用位置服务以成功通过认证？**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:57:20.047

在[谷歌自己的文档](https://developers.google.com/mobile-ads-sdk/docs/wp7/intermediate)中，他们说：

> Google 要求您仅在您的应用已使用该信息的情况下指定位置数据

对 Microsoft 认证指南的建议解释是，如果您要使用用户的位置（即使只是传递给广告控制），您应该提前了解并允许您在商店中接受客户禁用该选项。

因此，总而言之，我建议不要使用该位置，除非您的应用有其他理由这样做（让 Google 满意），如果您选择使用位置，我建议您提前启用（一次性）消息首次启动，以及您的客户禁用它的能力（让 Microsoft 满意）。**

# jquery - 如何在堆叠的 div 上反转 z-index

> ID：10870926
> 
> 赞同：5
> 
> 时间：2012-06-03T13:53:12.543
> 
> 标签：jquery, css, z-index

我在以这种方式包装在 div 中的页面上有多个列：

```
<div class="first column" style="width:33%; float: left;"></div>
<div class="column" style="width:33%; float: left;"></div>
<div class="last column" style="width:33%; float: left;"></div> 
```

我基本上是在使用一个插件来对文本进行分栏并将它们从左到右定位。在我的 css 中，我重新定位它们，使它们相互堆叠，然后我使用一些 jquery 将每一列移开。问题是，它们以错误的顺序堆叠。最后一列是第一列，第一列在底部。

这是CSS

```
#reader .column {
    position:absolute;
    top:0;
    left:0;
    background:#fff;
} 
```

如何更改堆叠顺序？使用 jQuery 为每个 div 添加 z-index 的最佳解决方案是什么？我不完全是怎么做到的，JS不是我的强项。这对我来说似乎也有点脆弱。有没有办法简单地颠倒堆叠顺序？这是我非常简单的 jQuery：

```
$(function(){
    $('#reader-inner').columnize();
    $('.column').click(function() {
      $(this).clearQueue().animate({left:'-550'},500, 'swing');
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:54:12.753

这就是我最终得到的结果：

```
$('.column').each(function(i, c) {
        $(c).css('z-index', num - i);
    }); 
```

其中 num 实际上是页面上的列数，加上基于其他元素中最高 z-index 的任意数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T18:47:27.360

1.  获取元素的长度/数量
2.  从那个数字中扣除。
3.  乘以一个像 10 这样的数字，这样你就不会达到 1 或 0 的 z-index。

.

```
var rows = $(".somecontainer").children('div').get();
$.each(rows, function(index, ele) {
    $(ele).css({"z-index": (rows.length - i) * 10 });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-03T14:42:15.017

在 .column div 中使用 z-index

检查这个，[http://jsfiddle.net/9EKK2/](http://jsfiddle.net/9EKK2/)

只需在您的工作代码中使用该 css ...

# php - PHP致命错误：登录Facebook时调用成员函数错误

> ID：10870929
> 
> 赞同：0
> 
> 时间：2012-06-03T13:53:25.407
> 
> 标签：php, facebook, wordpress, fatal-error

我已经为此工作了 5 个小时，查找我知道的每一个 stackoverflow 和谷歌搜索项，但我无法解决这个问题。我想知道是否可以向你们寻求帮助。

我正在创建这个 Wordpress 小部件，它允许用户登录 facebook 收听我学校的校园广播。

我已经完成了通常的（我认为是正确的）步骤，如下所示：

```
 require_once('facebook.php');

    $facebook = new Facebook(array(
      'appId'  => 'my id',
      'secret' => 'my secret',
    ));

    // Get User ID
    $user = $facebook->getUser();

    if ($user) {
      $logoutUrl = $facebook->getLogoutUrl();
    } else {
      $loginUrl = $facebook->getLoginUrl();
    } 
```

...以及后来的几行不重要的代码...

```
 window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>',
          cookie: true,
          xfbml: true,
          oauth: true
        });
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
        FB.Event.subscribe('auth.logout', function(response) {
          window.location.reload();
        });
      }; 
```

但是，我收到一条错误消息，提示“PHP 致命错误：在...中的非对象上调用成员函数 getAppID()”：

```
appId: '<?php echo $facebook->getAppID() ?>', 
```

我尝试过其他行，例如

```
appId: '<?php echo $this->facebook->getAppID() ?>', 
```

和

```
appId: '<?php echo $facebook::getAppID() ?>', 
```

和

```
appId: '<?php echo $facebook->getAppID(); ?>', 
```

所有这些都不起作用。另外，我不知道这是否是另一个错误，但我的

```
$loginUrl 
```

和

```
$logoutUrl 
```

都是空的...：\

我是一个 php 自学的初学者，这实际上是我正在从事的第一个 php 项目。如果这个问题在这个网站上不存在，我很确定它一定是我做错了，但问题是我不知道它是什么。

所以，是的，我决定把它发给你们。非常感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:56:47.623

该行所在的 javascript 代码可能超出[了](http://php.net/manual/en/language.variables.scope.php)对象的范围`$facebook`。尝试在 javascript 上方添加这一行：

```
global $facebook; 
```

# iphone - iOS 5 - presentModalViewController 后不出现导航和标签栏

> ID：10870936
> 
> 赞同：-1
> 
> 时间：2012-06-03T13:54:35.503
> 
> 标签：iphone, ios, ios5, uinavigationcontroller, storyboard

我正在开发一个 ios 应用程序并通常使用故事板。在我的名为 blackView 的视图控制器中（它没有 xib 文件）有一个播放视频的按钮。该按钮转到另一个名为 videoViewController 的视图控制器（videoViewController 不在情节提要中，它有 xib 文件）。用户在 videoViewController 上单击完成后，用户应该返回到 blackView，现在一切正常，但是从 videoViewController 返回到 blackView 后，blackView 的导航栏和标签栏控制器不会出现

我该如何处理？我怎样才能在 blackView 上出现那些导航和标签栏？

这是我在 videoViewController.m 文件中的代码

```
- (void) moviePlayBackDidFinish:(NSNotification*)notification
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

    UIViewController * myview=[storyboard instantiateViewControllerWithIdentifier:@"blackView"];
    [self presentModalViewController:myview animated:YES]; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T07:22:17.720

从你的代码中我知道你做错了什么。

我需要问你一个问题，即movieplayer 是作为子视图添加的。

如果您正在展示它，那么您需要在您的应用程序中执行类似的操作。

```
- (void) moviePlayBackDidFinish:(NSNotification*)notification
{
[self dismissModalViewControllerAnimated:YES]; 
```

}

# silverlight - WP7.5 不尊重 SetNetworkRequirement？

> ID：10870937
> 
> 赞同：0
> 
> 时间：2012-06-03T13:54:48.433
> 
> 标签：silverlight, windows-phone-7, networking

我正在尝试使用套接字和 WP7.5。目前，我正在研究套接字的 SetNetworkRequirement 属性。我正在遵循此[操作指南](http://msdn.microsoft.com/en-us/library/hh487165%28v=vs.92%29.aspx)，但是，操作系统似乎忽略了网络要求。

当我将要求设置为蜂窝网络时，即使我只连接到 3G，在执行 ConnectAsync 时也不会发生任何事情。但是，如果我连接到 Wifi 并使用 NonCellular，我可以在我的 tcpdump 中看到已建立连接。

奇怪的是 SDK 的行为没有记录在案。当我将要求设置为蜂窝时，我仍然得到 SocketError.Success，即使我可以看到没有建立连接。我也可以使用这个套接字发送数据，并且 SendAsync 也接收到 SocketError.Success。

我的问题是，有没有人看到过类似的行为或运气好将网络要求设置为蜂窝网络？另一个奇怪的现象是，如果我要求手机连接到不存在的 IP/端口，我会在两个接口上看到连接尝试。基于此，我怀疑正在进行一些 undocumentet 缓存。

编辑：我对此进行了更多调试。所描述的行为似乎与端口相关联。如果我使用 80 以外的任何其他端口，电话会同时连接 Cellular 和 NonCellular。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:54:55.957

如果有人遇到相同的行为，那么一切都表明这是一个操作系统错误。似乎存在与在端口 80 上运行的服务器相关的问题，因为 setNetworkRequirement 对于所有其他端口（我已经尝试过）都受到尊重。

# jquery - jQuery 灯箱仅在使用箭头导航时跳过图像

> ID：10870938
> 
> 赞同：1
> 
> 时间：2012-06-03T13:55:01.020
> 
> 标签：jquery, gallery, lightbox

[我和lightbox-0.5 jquery 兼容性问题](https://stackoverflow.com/questions/8233177/lightbox-0-5-jquery-compatibility-issue/10870806#10870806)有同样的问题

基本上我使用的是 jQuery Lightbox，并且我有一个画廊。如果我第一次单击图片并按 -> 箭头键，它将转到下一张。但是如果我关闭它并重新打开，当我按下 -> 箭头键时它会跳过一个。如果我关闭它并重新打开它，它会跳过两个。等等。如果你们想看这里的代码：http: [//pastebin.com/pAigYDCj](http://pastebin.com/pAigYDCj)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-24T16:59:41.403

我这样解决了这个问题：在方法中`_set_image_to_view()`添加行`_disable_keyboard_navigation();`之间的行 `_resize_container_image_box(objImagePreloader.width,objImagePreloader.height);`

和

`objImagePreloader.onload=function(){};`

因此整个方法如下：

```
function _set_image_to_view() { // show the loading
        // Show the loading
        $('#lightbox-loading').show();
        if ( settings.fixedNavigation ) {
            $('#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber').hide();
        } else {
            // Hide some elements
            $('#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber').hide();
        }
        // Image preload process
        var objImagePreloader = new Image();
        objImagePreloader.onload = function() {
            $('#lightbox-image').attr('src',settings.imageArray[settings.activeImage][0]);
            // Perfomance an effect in the image container resizing it
            _resize_container_image_box(objImagePreloader.width,objImagePreloader.height);
            // for reducing problem with navigation using keyboard (switching some pic at one time)
            _disable_keyboard_navigation();
            // clear onLoad, IE behaves irratically with animated gifs otherwise
            objImagePreloader.onload=function(){};
        };
        objImagePreloader.src = settings.imageArray[settings.activeImage][0];
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:33:29.803

我刚才一直在处理类似的问题。只有跳过的图像数量是随机的。但是我找到了一个对我有用的解决方案。

尝试像这样修改`_keybord_action`函数`lightbox.js`：

```
function _keyboard_action(objEvent) {
        // To ie
        if ( objEvent == null ) {
            keycode = event.keyCode;
            escapeKey = 27;
        // To Mozilla
        } else {
            keycode = objEvent.keyCode;
            escapeKey = objEvent.DOM_VK_ESCAPE;
        }
        // Get the key in lower case form
        key = String.fromCharCode(keycode).toLowerCase();
        // Verify the keys to close the ligthBox
        if ( ( key == settings.keyToClose ) || ( key == 'x' ) || ( keycode == escapeKey ) ) {
            _finish();
        }
        // Verify the key to show the previous image
        if ( ( key == settings.keyToPrev ) || ( keycode == 37 ) ) {
            // If we´re not showing the first image, call the previous
            if ( settings.activeImage != 0 ) {
                _disable_keyboard_navigation();
                settings.activeImage = settings.activeImage - 1;
                _set_image_to_view();
            }
        }
        // Verify the key to show the next image
        if ( ( key == settings.keyToNext ) || ( keycode == 39 ) ) {
            // If we´re not showing the last image, call the next
            if ( settings.activeImage != ( settings.imageArray.length - 1 ) ) {
                _disable_keyboard_navigation();
                settings.activeImage = settings.activeImage + 1;
                _set_image_to_view();
            }
        }
    } 
```

# oop - 依赖注入 - 这两个代码有什么区别？

> ID：10870939
> 
> 赞同：3
> 
> 时间：2012-06-03T13:55:04.493
> 
> 标签：oop, dependency-injection

我一直在尝试了解依赖注入，并且一直在取得进展，但是

我想知道这些代码的好处/区别/重要性。它们看起来相同但方法不同

```
//dependency injection - (as was claimed)
Customer customer = new Customer(10);

IOrderDAO orderDAO = new OrderDAO();
customer.setOrderDAO(orderDAO);
customer.getOrdersByDate(); 
```

或者

```
//Unknown Pattern - Please what pattern is this?
Customer customer = new Customer(10);
IOrderDAO orderDAO = new OrderDAO();
orderDAO.getOrderByDate(customer.id); 
```

第二种方法有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T13:57:34.457

对我来说，两者都不像依赖注入；不应该调用`new`.

依赖注入是由一个与所有依赖相关联的 bean 工厂完成的。它实例化 bean 并为它们提供依赖项。

我看这里根本没有豆子厂。依赖注入还有很长的路要走。

在第一个示例中，客户使用 setter 获取 OrderDAO。第一个说客户必须在其 API 中公开持久性方法。它负责保存其订单。我会说这是一个糟糕的关注点分离，因为现在客户必须了解订单。

第二个将 Customer 与 OrderDAO 分开。您将客户 ID 传递给 OrderDAO 并让它代表该客户保存订单。我认为这是一个更好的关注点分离。

但两者都不是依赖注入的好例子。

DI 的第一个也是最好的描述来自 Martin Fowler。我建议您仔细阅读以下内容：

[http://martinfowler.com/articles/injection.html](http://martinfowler.com/articles/injection.html)

它已经八岁了，但仍然存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T15:04:43.390

它们都不是正确的依赖注入示例。这些都是数据访问模式的例子。

第一个是[主动记录模式](http://martinfowler.com/eaaCatalog/activeRecord.html)的一个例子。将 orderDAO 设置为客户实体的依赖项，我们可以调用属性或 setter 注入。

第二个示例可能是[存储库模式。](http://martinfowler.com/eaaCatalog/repository.html)这里的依赖模式是方法注入，它转化为带有一些参数的通用调用方法（这里的参数是方法的依赖关系）。

开始学习 DI 模式的好方法是阅读[这本书](http://www.manning.com/seemann/)。还有很多在线资源，例如这些视频：

*   [http://www.youtube.com/watch?v=RlfLCWKxHJ0](http://www.youtube.com/watch?v=RlfLCWKxHJ0)
*   [http://www.youtube.com/watch?v=-FRm3VPhseI&feature=relmfu](http://www.youtube.com/watch?v=-FRm3VPhseI&feature=relmfu)
*   [http://www.youtube.com/watch?feature=player_embedded&v=hBVJbzAagfs](http://www.youtube.com/watch?feature=player_embedded&v=hBVJbzAagfs)

我还建议在谷歌中寻找依赖倒置原则（[它与依赖注入不同](http://lostechies.com/derickbailey/2011/09/22/dependency-injection-is-not-the-same-as-the-dependency-inversion-principle/)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T19:29:24.557

这是一个奇怪的例子，但第一个演示*了依赖注入容器会做什么*，第二个演示了*一个对象将参数传递给另一个对象*。第一个将其依赖项嵌入为调用类的实例变量；第二个是程序性质的。就其本身而言，两者都没有*错。*这取决于您的依赖项有多复杂以及您希望如何管理代码。

仅查看您提供的注入器代码，您并不清楚为什么要使用依赖注入。但是暂时考虑一个更复杂（也更典型）的例子。

客户服务：

```
public class CustomerService implements ICustomerService {
    private IOrderDAO orderDao;

    public void setOrderDAO(IOrderDAO orderDao) {
        this.orderDao = orderDao;
    }

    public Order getOrderByDate(Integer customerId, Date date) {
        return this.orderDao.findOrderByDate(customerId, date);
    }
} 
```

OrderDAO（默认实现）：

```
public OrderDAO implements IOrderDAO {
    private javax.sql.DataSource dataSource;

    public void setDataSource(javax.sql.DataSource dataSource) {
        this.dataSource = dataSource;
    }

    public Order findOrderByDate(Integer customerId, Date date) {
    ...
    }
} 
```

StubOrderDAO（存根实现）：

```
public StubOrderDAO implements IOrderDAO {

    public Order findOrderByDate(Integer customerId, Date date) {
      return new HardCodedOrder(); // this class would extend or implement Order
    }
} 
```

在运行时，实例`CustomerService`不会知道正在使用哪个 IOrderDAO 实现。这意味着您可以非常轻松地，例如，通过初始化 CustomerService 来引导一个单元测试`StubOrderDAO`（它总是返回一个硬编码的客户）。同样，您的 DataSource 实现可能会有所不同（模拟数据源或在不同运行时环境中不同的数据源）。

因此，用于生产用途的注射器可能如下所示：

```
// instantiate
CustomerService service = new CustomerService();
OrderDAO dao = new OrderDAO();
javax.sql.dataSource dataSource = jndiContext.lookup("java:comp/env/MyDataSource");

// initialize
dao.setDataSource(dataSource);
service.setOrderDAO(dao);
return service; 
```

而使用本地（测试）数据源的注入器可能如下所示：

```
// instantiate
CustomerService service = new CustomerService();
OrderDAO dao = new OrderDAO();
javax.sql.dataSource dataSource = new DriverManagerDataSource("jdbc:sqlserver:yadayada...", "myUsername", "myPassword");

// initialize
dao.setDataSource(dataSource);
service.setOrderDAO(dao);
return service; 
```

集成测试的注入器可能如下所示：

```
// instantiate
CustomerService service = new CustomerService();
OrderDAO dao = new StubOrderDAO();

// initialize
service.setOrderDAO(dao);
return service; 
```

所以它本质上是一种实现良好分层和关注点分离的方法，即您访问数据库的方式独立于您访问数据以创建域模型的方式，并且两者都独立于您所做的任何聚合或业务逻辑处理in `CustomerService`（为简洁起见，此处未显示）。

这更有意义吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T12:18:45.600

不要将控制反转与依赖注入混淆（正如另一个答案所做的那样）。我在这里描述依赖注入和 IoC：http: [//www.codeproject.com/Articles/386164/Get-injected-into-the-world-of-inverted-dependenci](http://www.codeproject.com/Articles/386164/Get-injected-into-the-world-of-inverted-dependenci)

```
//dependency injection - (as was claimed)
Customer customer = new Customer(10);

IOrderDAO orderDAO = new OrderDAO();
customer.setOrderDAO(orderDAO);
customer.getOrdersByDate(); 
```

不，我不会称之为 DI。我什至会称它为写得很糟糕的代码。客户不应该意识到`setOrderDAO(orderDAO)`强制它存在的持久层。它打破了单一责任原则，因为客户也必须照顾订单。

```
//Unknown Pattern - Please what pattern is this?
Customer customer = new Customer(10);
IOrderDAO orderDAO = new OrderDAO();
orderDAO.getOrderByDate(customer.id); 
```

`customer`这不是特定的模式，而是更好的代码，因为和之间没有耦合`orderDao`。

# internet-explorer - internetexplorer.application 对象 - 按类获取项目

> ID：10870940
> 
> 赞同：2
> 
> 时间：2012-06-03T13:55:11.380
> 
> 标签：internet-explorer, dom, vba

我正在使用 VBA 打开一个网页，需要收集一些具有特定类的元素的值。

```
With CreateObject("internetexplorer.application")
    .Visible = True
    .Navigate "http://www.google.com"
    While .ReadyState <> 4 Or .Busy
        DoEvents
    Wend
    Set r = .document.getelementsbyclassname("gssb_f")
    ' REST OF CODE
End With 
```

以上不起作用。

我也在努力为该`InternetExplorer.Application`对象找到一个包含所有可用属性和方法的库。它存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-25T18:30:09.017

您现在可以使用`.querySelectorAll`方法`document`来应用 CSS 选择器

```
.gssb_f 
```

这 ”。” 表示类名。此方法返回 a`nodeList`您可以通过遍历`.Length`返回的 来循环`nodeList`。

句法：

```
.document.querySelectorAll(".gssb_f") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T23:15:46.587

在 VBA 编辑器中，您应该尝试添加对“Microsoft Internet Controls”的引用。单击“工具”>“参考”>选中“Microsoft Internet 控件”>单击“确定”。

我的猜测是这应该有效。

-宁

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-16T21:33:43.937

我只是在寻找解决方法，只能找到这个。我发布了@davidbeyonchen 的想法示例，以防其他人遇到此问题。我只搜索一个项目，但可以对其进行修改以包含多个项目。

```
For Each elem In .Document.all
    If elem.className = "gssb_f" Then
        Set r = elem
        Exit For
    End If
Next 
```

# php - javascript奇怪的故障

> ID：10870942
> 
> 赞同：2
> 
> 时间：2012-06-03T13:55:28.823
> 
> 标签：php, javascript, include

我有一个由 index.php 和 otherpage.php 组成的网站。这两个页面都使用

`include_once("header.inc")`

header.inc 实现了一个这样的 jscript 文件

```
<script type="text/javascript" src="script.js"></script> 
```

jscript 文件让我可以使用一个漂亮的下拉菜单。

问题是菜单只能在 index.php 上正常工作，而不是 otherpage.php

真正让我感动的是，在 otherpage.php 上，菜单根本不起作用，只是部分不起作用。菜单将突出显示但不是下拉菜单。

你可以自己看看

[索引.php](http://hiddenexpo.nfshost.com/index.php)

[其他页面.php](http://hiddenexpo.nfshost.com/submitBuildOrStrategy.php?q=zvzbuild)

有什么关于在我应该知道的 PHP 页面之间共享 jscript 文件的事情吗？

以下是菜单的相关 jscript 内容：

```
var menu = function() {
var t = 15, z = 50, s = 6, a;
function dd(n) {
    this.n = n;
    this.h = [];
    this.c = []
}

dd.prototype.init = function(p, c) {
    a = c;
    var w = document.getElementById(p), s = w.getElementsByTagName('ul'), l = s.length, i = 0;
    for(i; i < l; i++) {
        var h = s[i].parentNode;
        this.h[i] = h;
        this.c[i] = s[i];
        h.onmouseover = new Function(this.n + '.st(' + i + ',true)');
        h.onmouseout = new Function(this.n + '.st(' + i + ')');
    }
}
dd.prototype.st = function(x, f) {
    var c = this.c[x], h = this.h[x], p = h.getElementsByTagName('a')[0];
    clearInterval(c.t);
    c.style.overflow = 'hidden';
    if(f) {
        p.className += ' ' + a;
        if(!c.mh) {
            c.style.display = 'block';
            c.style.height = '';
            c.mh = c.offsetHeight;
            c.style.height = 0
        }
        if(c.mh == c.offsetHeight) {
            c.style.overflow = 'visible'
        } else {
            c.style.zIndex = z;
            z++;
            c.t = setInterval(function() {
                sl(c, 1)
            }, t)
        }
    } else {
        p.className = p.className.replace(a, '');
        c.t = setInterval(function() {
            sl(c, -1)
        }, t)
    }
}
function sl(c, f) {
    var h = c.offsetHeight;
    if((h <= 0 && f != 1) || (h >= c.mh && f == 1)) {
        if(f == 1) {
            c.style.filter = '';
            c.style.opacity = 1;
            c.style.overflow = 'visible'
        }
        clearInterval(c.t);
        return
    }
    var d = (f == 1) ? Math.ceil((c.mh - h) / s) : Math.ceil(h / s), o = h / c.mh;
    c.style.opacity = o;
    c.style.filter = 'alpha(opacity=' + (o * 100) + ')';
    c.style.height = h + (d * f) + 'px'
}

return {
    dd : dd
}
}(); 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T14:00:06.193

在 index.php 页面上你忘记了

```
<script type="text/javascript">
    var menu = new menu.dd("menu");
    menu.init("menu", "menuhover");
</script> 
```

将其放在 otherpage.php 的底部或将其放在要包含在页面底部的 footer.php 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T14:01:26.577

似乎第二页（不是 index.php）没有

```
 <script type="text/javascript">
        var menu = new menu.dd("menu");
        menu.init("menu", "menuhover");
    </script> 
```

所以没有创建菜单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T14:05:06.450

`index.php`在初始化菜单的页面末尾包含此代码：

```
 <script type="text/javascript">
        var menu = new menu.dd("menu");
        menu.init("menu", "menuhover");
    </script> 
```

`otherpage.php`不包含该代码，因此代码永远不会初始化并连接到您的 HTML。

`.init()`顺便说一句，您可以通过在代码中的方法中放置断点来自己调试此类问题。在`index.php`你看到断点被击中，如果你查看调用堆栈，你可以看到它是从哪里调用的。如果您在 中放置相同的断点`otherpage.php`，您可以看到它没有被命中，因此从未调用过。

# c# - 从 IronPython 实例化自定义 C# 类

> ID：10870943
> 
> 赞同：6
> 
> 时间：2012-06-03T13:55:43.333
> 
> 标签：c#, class, ironpython, embedding

有没有办法让 IronPython 脚本可以使用一个类，以便我可以在代码中创建对象？

例如，如果我有一个类，我希望能够从 C# 代码中定义的名为 MyClass 的脚本中实例化，如下所示：

```
public class MyClass
{
    string text;

    public MyClass(string text)
    {
        this.text = text;
    }

    public void Write()
    {
        Console.WriteLine(text);
    }
} 
```

如何在 Python 脚本中执行此操作？

```
obj = MyClass("Hello, World!")
obj.Write() 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T14:10:12.837

假设 MyClass 在 MyAssembly.dll 中：

```
import clr
clr.AddReference('MyAssembly.dll')
import MyClass
obj = MyClass("Hello, World!")
obj.Write() 
```

# haskell - 存在类型包装器的必要性

> ID：10870945
> 
> 赞同：5
> 
> 时间：2012-06-03T13:56:10.170
> 
> 标签：haskell, polymorphism, existential-type, higher-rank-types

事实证明，尽管它们背后的想法非常简单，但要正确使用存在/秩-n 类型是非常困难的。

为什么将存在类型包装成`data`类型是必要的？

我有以下简单的例子：

```
{-# LANGUAGE RankNTypes, ImpredicativeTypes, ExistentialQuantification #-}
module Main where

c :: Double
c = 3

-- Moving `forall` clause from here to the front of the type tuple does not help,
-- error is the same
lists :: [(Int, forall a. Show a => Int -> a)]
lists = [ (1, \x -> x)
        , (2, \x -> show x)
        , (3, \x -> c^x)
        ]

data HRF = forall a. Show a => HRF (Int -> a)

lists' :: [(Int, HRF)]
lists' = [ (1, HRF $ \x -> x)
         , (2, HRF $ \x -> show x)
         , (3, HRF $ \x -> c^x)
         ] 
```

如果我注释掉 的定义`lists`，则代码编译成功。如果我不将其注释掉，我会收到以下错误：

```
test.hs:8:21:
    Could not deduce (a ~ Int)
    from the context (Show a)
      bound by a type expected by the context: Show a => Int -> a
      at test.hs:8:11-22
      `a' is a rigid type variable bound by
          a type expected by the context: Show a => Int -> a at test.hs:8:11
    In the expression: x
    In the expression: \ x -> x
    In the expression: (1, \ x -> x)

test.hs:9:21:
    Could not deduce (a ~ [Char])
    from the context (Show a)
      bound by a type expected by the context: Show a => Int -> a
      at test.hs:9:11-27
      `a' is a rigid type variable bound by
          a type expected by the context: Show a => Int -> a at test.hs:9:11
    In the return type of a call of `show'
    In the expression: show x
    In the expression: \ x -> show x

test.hs:10:21:
    Could not deduce (a ~ Double)
    from the context (Show a)
      bound by a type expected by the context: Show a => Int -> a
      at test.hs:10:11-24
      `a' is a rigid type variable bound by
          a type expected by the context: Show a => Int -> a at test.hs:10:11
    In the first argument of `(^)', namely `c'
    In the expression: c ^ x
    In the expression: \ x -> c ^ x
Failed, modules loaded: none. 
```

为什么会这样？第二个例子不应该等同于第一个吗？这些 n 秩类型的用法有什么区别？当我想要这种多态性时，是否可以省略额外的 ADT 定义并仅使用简单类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T14:12:13.007

您的第一次尝试是*不*使用存在类型。而是你的

```
lists :: [(Int, forall a. Show a => Int -> a)] 
```

要求第二个组件可以提供我选择的*任何*可显示类型的元素，而不仅仅是您选择的*某些*可显示类型。您正在寻找

```
lists :: [(Int, exists a. Show a * (Int -> a))]  -- not real Haskell 
```

但这不是你所说的。`exists`数据类型打包方法允许您通过`forall`柯里化来恢复。你有

```
HRF :: forall a. Show a => (Int -> a) -> HRF 
```

这意味着要构建一个`HRF`值，您必须提供一个三元组，其中包含一个 type `a`、一个`Show`字典 for`a`和一个 in 函数`Int -> a`。也就是说，`HRF`构造函数的类型有效地将这个非类型

```
HRF :: (exists a. Show a * (Int -> a)) -> HRF   -- not real Haskell 
```

您可以通过使用 rank-n 类型对存在性进行 Church-encode 来避免使用数据类型方法

```
type HRF = forall x. (forall a. Show a => (Int -> a) -> x) -> x 
```

但这可能是矫枉过正。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T14:06:31.960

示例不等价。首先，

```
lists :: [(Int, forall a. Show a => Int -> a)] 
```

表示每个第二个组件都可以产生*任何所需的 type*，只要它是`Show`from an的一个实例`Int`。

第二个例子是模数类型包装器等价于

```
lists :: [(Int, exists a. Show a => Int -> a)] 
```

即，每个第二个组件都可以生成属于from 的*某种*类型，但是您不知道该函数返回*哪种类型。*`Show``Int`

 *此外，您放入元组的函数不满足第一个合同：

```
lists = [ (1, \x -> x)
        , (2, \x -> show x)
        , (3, \x -> c^x)
        ] 
```

`\x -> x`产生与作为输入给出的结果相同的类型，所以在这里，就是`Int`. `show`总是产生 a `String`，所以它是一种固定类型。最后，`\x -> c^x`产生与 has 相同的类型`c`，即`Double`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T14:06:41.130

关于存在类型的处理，您必须考虑两个问题：

*   如果你存储“任何可以是`show`n 的东西”，你必须存储可以显示的东西以及**如何显示它**。
*   一个实际变量只能有一种类型。

第一点是为什么你必须有存在类型包装器，因为当你写这个时：

```
data Showable = Show a => Showable a 
```

实际发生的是这样的事情被宣布：

```
data Showable a = Showable (instance of Show a) a 
```

即对类实例的引用`Show a`与值一起存储`a`。如果不发生这种情况，您将无法拥有解包 a 的函数`Showable`，因为该函数不知道如何显示`a`.

第二点是为什么有时你会遇到一些类型的怪癖，以及为什么你不能在绑定中绑定存在类型`let`，例如。

* * *

您的代码中的推理也存在问题。如果你有一个函数，`forall a . Show a => (Int -> a)`你得到一个函数，给定任何整数，将能够产生**调用者选择**的任何类型的可显示值。您可能的意思是`exists a . Show a => (Int -> a)`，这意味着如果函数获取整数，它将返回存在`Show`实例的某种类型。*

# jquery - 如何让这条主干路由正常工作？

> ID：10870948
> 
> 赞同：1
> 
> 时间：2012-06-03T13:56:33.380
> 
> 标签：jquery, jquery-mobile, backbone.js, backbone-routing

CI 在制作一条路线时遇到问题。我有项目列表视图，单个项目 html 如下所示：

```
<li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-li-has-count ui-btn-up-c"><div class="ui-btn-inner ui-li"><div class="ui-btn-text">
<a href="#my_clients/1486" class="ui-link-inherit">    
  <h4 class="ui-li-heading">number/h4>
  <span class="ui-li-count ui-btn-up-c ui-btn-corner-all">A</span>
</a>
</div>
<span class="ui-icon ui-icon-arrow-r ui-icon-shadow"></span>
</div>
</li> 
```

我的路由器代码：

```
var AppRouter = Backbone.Router.extend({

    routes:{
        "": "login",
        "login": "login",
        "my_clients": "myClients",
        "my_clients/:id": "myClientDetails" 

    },

    initialize:function () {
        // Handle back button throughout the application
        $('.back').live('click', function(event) {
            window.history.back();
            return false;
        }); 
        this.firstPage = true;
    },

    login: function () {            
        this.changePage(new LoginView({ model: new User() }));
    },

    myClients: function() {     
        this.changePage(new MyClientsView({ model: new MyClientsCollection() }));
    },

    myClientDetails: function(id) {
        var client = new Client({ id: id });
        self = this;
        client.fetch({
            success: function(data) {
                self.changePage(new MyClientDetailsView({ model: data }));
            }
        });
    },

    changePage:function (page) {
        $(page.el).attr('data-role', 'page');
        page.render();
        $('body').append($(page.el));
        var transition = $.mobile.defaultPageTransition;
        // We don't want to slide the first page
        if (this.firstPage) {
            transition = 'none';
            this.firstPage = false;
        }
        $.mobile.changePage($(page.el), {changeHash:false, transition: transition});
    }

}); 
```

登录和 MyClients 页面工作正常，但是当我单击列表视图项中的链接以显示单个客户端详细信息时，我看到在我的 firebug 控制台中收到呼叫并且路由不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:29:00.583

更改`<a href="#my_clients/1486"...>`为 `<a href="#/my_clients/1486"...>`（换句话说，在`/`之后添加`#`）。请参阅示例：http: [//jsfiddle.net/theotheo/sz6y8/](http://jsfiddle.net/theotheo/sz6y8/)

# sql-server - 在这种情况下，两个 SQL Server 之间的异步通信要使用什么机制？

> ID：10870950
> 
> 赞同：3
> 
> 时间：2012-06-03T13:56:37.543
> 
> 标签：sql-server, sql-server-2008

我们使用一个**中央**SQL Server（2008 标准版）和几个较小的**专用**SQL Server（Express 版）。我们需要实现一些机制，用于从专用的分散式 SQL Server（更大的容量，见下文）和从中央 SQL Server（很少的记录，基本上是机器的一些通知，可能还有一些优化提示）**异步传输数据* 。**

专用的 SQL Server 物理上位于技术机器附近，它们`datetime, temperature`定期收集行（考虑几秒钟的间隔）。一项工作大约有 500 条记录，但下一项工作立即进行（机器不知道这是一项新工作——从某种意义上说是相当愚蠢的——并且只是不停地收集温度）。

技术机器必须能够在没有中央 SQL Server 的情况下工作，并且中央 SQL Server 在机器不可访问时也必须工作（即无法访问其专用 SQL 引擎，与机器一起关闭）。换句话说，解决方案不需要超快，但必须是稳健的，即不会丢失收集到的数据。

基本思想是将收集到的数据**从专用**SQL Server（预处理为带有机器 ID 的规范化格式）移动到中央 SQL Server 上的众所周知的表中。只应发送较新的数据以最小化数据量。如果连接正常，则应由专用 SQL Server 定期（例如一小时）启动该传输。如果连接不正常，数据将在下一小时后发送，以此类推。

中央 SQL Server 上的另一个众所周知的表将用于为专用 SQL Server 引擎发送通知。这样，专用引擎可以被告知（例如）哪些数据已经在中央 SQL Server 上处理/存档（即提示可能已经从专用机器上的本地数据库中删除了哪些记录），或者任何信息从中央提示（只是提示或其他非实时要求）。提示将由专用的 SQL Server 收集（也就是机器的责任）。换句话说，中央 SQL Server 只处理众所周知的本地表。它不会尝试连接专用的 SQL Server 机器。

该解决方案应仅使用标准机制——SQL 命令（通过存储过程），不使用外部软件。我应该关注什么样的解决方案？

谢谢，彼得

**[稍后编辑]** SQL 服务器位于同一个局域网中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T16:34:37.923

如果您愿意进行思维转换，不再考虑表和行，而是考虑数据和消息，那么 Service Broker 可以处理所有通信、传递和消息处理。而不是在本地（在 Express 机器上）`INSERT INTO LocalTable(datetime, temperature) VALUES (...)`你认为：

```
BEGIN CONVERSATION WITH CentralServer ...; 
SEND ON conversation MESSAGE TYPE [Measurement] (<datetime...><temperature ...>) 
```

请参阅[使用 Service Broker 而不是复制](http://itknowledgeexchange.techtarget.com/sql-server/using-service-broker-instead-of-replication/)或[大容量连续实时 ETL](http://rusanu.com/2010/06/11/high-volume-contiguos-real-time-audit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:46:00.853

听起来像是[合并复制](http://msdn.microsoft.com/en-us/library/ms152746%28v=sql.100%29.aspx "合并复制")的工作。

# workflow-foundation-4 - 工作流工具箱未使用新活动更新

> ID：10870952
> 
> 赞同：1
> 
> 时间：2012-06-03T13:56:50.717
> 
> 标签：workflow-foundation-4, toolbox

我在活动包中添加了以下活动：

```
namespace TeamFoundation.Build.ActivityPack
{
    using System;
    using System.Activities;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using Microsoft.TeamFoundation.Build.Client;

    [BuildActivity(HostEnvironmentOption.Agent)]
    public sealed class CheckSlothInitialized : CodeActivity
    {
        [RequiredArgument]
        public InArgument<string> DbUser { get; set; }

        [RequiredArgument]
        public InArgument<string> DbPassword { get; set; }

        [RequiredArgument]
        public InArgument<string> DbServer { get; set; }

        [RequiredArgument]
        public InArgument<string> DbName { get; set; }

        protected override void Execute(CodeActivityContext context)
        {
            string connString =  String.Format(
                            "data source={0};Integrated Security=false;Initial Catalog={1};User ID={2};Password={3}",
                            DbServer, DbName, DbUser, DbPassword);

        }
    }
} 
```

之后我编译它我在工具箱中找不到它。我将选择工具箱中的项目并选择我的活动的 dll，但即便如此我也无法在 System.Activities 组件列表中找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:10:44.467

请遵循这些检查点。

1.  清理并重建您的解决方案。
2.  如果您的活动在独立项目（活动库）中，并且您在包含 xaml 或 xamlx 文件的项目中引用此活动，请确保应将所有引用的 dll 添加到引用中。
3.  尝试将此活动作为代码添加到工作流中并执行它，是否引发任何异常？

# php - 将变量从 SQL 过程传递给 PHP

> ID：10870956
> 
> 赞同：0
> 
> 时间：2012-06-03T13:57:01.490
> 
> 标签：php, sql, variables, procedure

我正在尝试创建一个将结果返回到 php 页面的 sql 程序。

我希望能够从 php 中调用如下程序

```
call procedure_name($var1) 
```

它将运行此脚本：

```
-- ---------------------------------------------------------------------------------
-- pUIGetCliStmtGenFlag
--
-- This procedure returns the status of the Trading Period:
--
-- ---------------------------------------------------------------------------------

drop procedure if exists pUIGetCliStmtGenFlag;
delimiter //

create procedure pUIGetCliStmtGenFlag(
IN pTradingPeriodMonth      DATE
)
MODIFIES SQL DATA
COMMENT 'Checks if the TP has been closed'
begin

  SELECT trading_period_month, 
         dt_end, 
         amt_traded_system_ccy
  FROM   ca_trading_period
  WHERE  trading_period_month=$var1

-- If amt_traded_system_ccy is NULL give the TP an open status otherwise mark as closed

  IF amt_traded_system_ccy is NULL

    $tpstatus='open'

  ELSE

    $tpstatus='closed'

end;
//

delimiter ; 
```

然后我希望能够`$tpstatus`在 php 脚本的其余部分中使用。

我知道这很简单，但这对我来说是全新的，我找不到正确的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:44:18.150

您必须从 php 调用存储过程，然后使用过程的 OUT 参数取回值。

请遵循以下说明：

[https://stackoverflow.com/a/48161/1291428](https://stackoverflow.com/a/48161/1291428)

# php - 使用 phpSmug 上传文件

> ID：10870963
> 
> 赞同：0
> 
> 时间：2012-06-03T13:57:54.817
> 
> 标签：php, file-upload, upload

我正在开发一个将图像上传到我的自鸣得意帐户的应用程序。我正在使用 phpSmug 3.4 和以下代码：

```
require_once( "phpSmug.php" );

    try {
        //assign Variable to smugmug
        $f = new phpSmug("APIKey=*****************", "AppName=Test/1.0");
        // Login Anonymously
        $f->login();    

            $f->images_upload("AlbumID=2282300", "File=TestPic.jpg");

    }
    catch ( Exception $e ) {
        echo "{$e->getMessage()} (Error Code: {$e->getCode()})";
    } 
```

?>

但我回来了：方法 image_upload 的 SmugMug API 错误：缺少必需的参数（错误代码：22）

我必须使用 Oauth 上传吗？还是可以匿名完成？还是我的语法错误？

任何帮助表示赞赏...谢谢

我还问了关于 smugmug stack exchange 的问题，所以如果这里不合适，我很抱歉..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:21:39.813

作为phpSmug的作者，我可以告诉你你的问题，解决方法很简单：你不能匿名上传图片到Smugmug。您需要使用 SmugMug 支持并在 phpSmug 中实现的一种识别身份验证方法登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:46:58.887

我的错...不能从我的本地主机工作，在服务器上工作正常

# javascript - how to get random json data and append to div element

> ID：10870965
> 
> 赞同：3
> 
> 时间：2012-06-03T13:59:01.597
> 
> 标签：javascript, jquery, json

Say this is my json

```
[
{
    "imageSmall": ["images/employee_jpgs/employees_abhishek_80x80.jpg"],
    "imageBig": ["images/employee_jpgs/employees_abhishek_150x150.jpg"],
    "name": ["Abhishek Shet"],
    "quotes": ["Just perfect to start your career after school. Makes me feel        others in the industry are way slower then us. Awesome team and and a brilliant product to work on!!!!. And most importantly I enjoy what I do :)."],
    "type": "employee"
},
{
    "imageSmall": ["images/employee_jpgs/employees_barbra_80x80.jpg"],
    "imageBig": ["images/employee_jpgs/employees_barbra_150x150.jpg"],
    "name": ["Barbra Gago"],
    "quotes": ["The best part about working at tibbr is how dynamic the environment is, there's a lot of flexibility and freedom to execute on new ideas. Because everyone is so talented, there is a ton of trust and support coming from managers and team members-we all count on each other to do the best possible job!"],
    "type": "employee"
}, 
```

the same continues but there are 3 types 1-employee 2-twitter 3-social

Now my problem is I want get these json data randomly and append to my div element I used following code

```
function(args){
 var me=this;
 $.getJSON(args.json,function(data) { 
 me.set(args);
 $.each(data, function(i){
    var id="randomizr_item_" + i;
    var temp= $('<div id='+ id +' class="randomizr-grid-items"><img src="'+ this.imageSmall[0]  +'" /></div>');
    me.config.container.append(temp);
    this.target=$(temp);
}); 
```

I know how to generate single random entry using following code

```
entry = data[Math.floor(Math.random()*data.length)]; 
```

which generates single random entry.

Plz help me how to get json data randomly from above json file and append to div.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:57:30.223

You need to make an array of random unique numbers like following:

```
function generateRandom(min, max) {
    var arr = [];
    while(arr.length < 5){
      var randNum = Math.floor(Math.random() * (max - min + 1)) + min,
          found=false;
      for(var i=0;i < arr.length; i++){
        if(arr[i] == randNum){found=true;break}
      }
      if(!found)arr[arr.length] = randNum;
    }
    return arr;
} 
```

Then you need to loop over data like following:

Here I am looping over unique array, not on `data` and using value of array as index to `data`.

```
var orders = generateRandom(0, data.length-1);

$.each(orders, function(index, value){
    var id="randomizr_item_" + i;
    var temp= $('<div id='+ id +' class="randomizr-grid-items"><img src="'+ data[value].imageSmall[0]  +'" /></div>');
    me.config.container.append(temp);
    this.target=$(temp);
}); 
```

**[A simple demo](http://jsfiddle.net/thecodeparadox/QStkd/121/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:16:44.510

You should create a 'Deck' and fill it with the json data.

Once the Deck is filled, loop through it while it has elements, like this:

```
while(deck.length > 0) {
 var random_index = Math.floor(Math.random()*data.length);
 var item = deck[random_index];
 // do stuff with item
 deck = jQuery.removeFromArray(random_index, deck);
} 
```

Add this code to the top of your js file:

```
jQuery.removeFromArray = function(value, arr) {
    return jQuery.grep(arr, function(elem, index) {
        return elem !== value;
    });
}; 
```

# python - 如何使用适用于 python 的 GAE 开发服务器测试平台模拟文件上传到 blobstore

> ID：10870968
> 
> 赞同：3
> 
> 时间：2012-06-03T13:59:17.363
> 
> 标签：python, unit-testing, google-app-engine, blobstore

我想写一些单元测试，其中包括需要[读取 blobstore 文件](https://developers.google.com/appengine/docs/python/blobstore/blobreaderclass?hl=pl)

如何编写一个单元测试`setUp`，将一些文件放在[testbed](https://developers.google.com/appengine/docs/python/tools/localunittesting) blobstore 中，以便以这种方式读取：

```
blob_info = BlobInfo(blob_key)
reader = BlobReader(blob_info)
reader.readline() 
```

**编辑：**

我没有寻找测试[文件 API](https://developers.google.com/appengine/docs/python/blobstore/overview?hl=pl#Writing_Files_to_the_Blobstore)的方法，我想在测试用例设置阶段将一些任意数据放入测试平台 blobstore 存储中，这样我就可以针对这些数据运行测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T21:56:19.700

您可以将以下内容添加到您的 setUp 方法中，并可能将其存储起来`blob_key`以`self.blob_key`备后用。init_files_stub 很重要，因为它使用内存 blobstore 初始化文件服务。

```
self.testbed.init_blobstore_stub()
self.testbed.init_files_stub()
from google.appengine.api import files
file_name = files.blobstore.create(mime_type='application/octet-stream')
with files.open(file_name, 'a') as f:
    f.write('blobdata')
files.finalize(file_name)
blob_key = files.blobstore.get_blob_key(file_name) 
```

请注意，testbed 是指`from google.appengine.ext import testbed`并且`self.testbed`是 testbed 实例。

[使用 init_files_stub，这与文档](https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore)中的描述完全相同：

# excel - Excel唯一值查询

> ID：10870971
> 
> 赞同：0
> 
> 时间：2012-06-03T13:59:54.233
> 
> 标签：excel, vba

我对 excel 的经验不是很丰富——我更像是 ac# 的人——希望一些 excel 大师可以在这里帮助我！

基本上我有一个电子表格，它只有一列文本数据（a 列）。我需要查询这个数据列表。

我将需要基本上将更多文本数据复制到另一列（假设是 b 列），然后过滤掉 b 列中已经存在于 a 列某处的记录，只留下其中的唯一记录b列，但不是a列。

我试过使用高级过滤器，但似乎无法让它工作。关于我如何做到这一点的任何提示或建议都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T15:19:48.733

您可以动态过滤您的数据，例如使用如下公式进入 C 列

```
=IF(ISNA(VLOOKUP(B1,A:A,1,FALSE)),B1,"") 
```

然后过滤C列中的非空单元格

否则这个简单的宏将清除重复的地方

```
Sub FilterDuplicates()
  Dim r As Range
  For Each r In ActiveSheet.Columns("B").Cells
    If r.Value <> "" Then
      On Error Resume Next
      WorksheetFunction.VLookup r, ActiveSheet.Columns("A"), 1, False
      If Err.Number = 0 Then r.ClearContents
      On Error GoTo 0
    End If
  Next r
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:53:20.853

这应该做你需要的。它在 A 列的 B 列中查找每个值，如果找到匹配项，则删除该单元格。将数据粘贴到 B 列后运行代码。请注意，它不会从 B 列中删除重复项，它只会从 B 列中删除 A 列中的所有值。要从 B 列中删除重复项，请选择该列并`Remove Duplicates`从`Data`选项卡中选择。

您需要将一个模块添加到工作簿并在模块中插入以下代码：

**代码：**

```
Option Explicit

Sub RemoveMatchesFromColumn()
    On Error Resume Next

    Dim LastRow As Long
    Dim SearchText As String
    Dim MatchFound As String

    LastRow = Range("b" & ActiveSheet.Rows.Count).End(xlUp).Row
    SearchText = Range("b" & LastRow).Value

    Do Until LastRow = 0

    MatchFound = Find_Range(SearchText, Columns("A")).Value
        If SearchText = MatchFound Then
            Range("b" & LastRow).Delete Shift:=xlUp
        End If
        LastRow = LastRow - 1
        SearchText = Range("b" & LastRow).Value
    Loop

End Sub

Function Find_Range(Find_Item As Variant, _
    Search_Range As Range, _
    Optional LookIn As Variant, _
    Optional LookAt As Variant, _
    Optional MatchCase As Boolean) As Range

     ' Function written by Aaron Blood
     ' http://www.ozgrid.com/forum/showthread.php?t=27240

    Dim c As Range
    Dim firstAddress As Variant
    If IsMissing(LookIn) Then LookIn = xlValues 'xlFormulas
    If IsMissing(LookAt) Then LookAt = xlPart 'xlWhole
    If IsMissing(MatchCase) Then MatchCase = False

    With Search_Range
        Set c = .Find( _
        What:=Find_Item, _
        LookIn:=LookIn, _
        LookAt:=LookAt, _
        SearchOrder:=xlByRows, _
        SearchDirection:=xlNext, _
        MatchCase:=MatchCase, _
        SearchFormat:=False)
        If Not c Is Nothing Then
            Set Find_Range = c
            firstAddress = c.Address
            Do
                Set Find_Range = Union(Find_Range, c)
                Set c = .FindNext(c)
            Loop While Not c Is Nothing And c.Address <> firstAddress
        End If
    End With

End Function 
```

运行子`RemoveMatchesFromColumn`。您可以进入它以查看它在做什么`F8`或使用`F5`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T15:16:11.083

**非 VBA 方法**

将此公式放入单元格 C1

```
=IF(VLOOKUP(B1,A:A,1,0)=B1,"DELETE ME","") 
```

拖到最后。然后过滤 Col C 上的数据，`DELETE ME`然后删除重复的数据。

**VBA方法**

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long, i As Long
    Dim delRange As Range, aCell As Range

    Set ws = Sheets("Sheet1")
    With ws
        lRow = .Range("B" & Rows.Count).End(xlUp).Row
        For i = 1 To lRow
            Set aCell = .Columns(1).Find(What:=.Range("B" & i).Value, _
                        LookIn:=xlValues, LookAt:=xlWhole, _
                        SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                        MatchCase:=False, SearchFormat:=False)

            If Not aCell Is Nothing Then
                If delRange Is Nothing Then
                    Set delRange = .Range("B" & i)
                Else
                    Set delRange = Union(delRange, .Range("B" & i))
                End If
            End If
        Next i
        If Not delRange Is Nothing Then delRange.Delete shift:=xlUp
    End With
End Sub 
```

# java - 用图标填充 jButtons

> ID：10870973
> 
> 赞同：2
> 
> 时间：2012-06-03T14:00:37.273
> 
> 标签：java, swing

所以我想用图标填充 50 个按钮，我尝试这样做的方式是：

```
String table1[][] = new String [5][10];
for(int i = 0; i<5; i++){
    for(int j = 0; j<10; j++){
        table1[i][j] = "W";
    }
}
String table2[][] = new String [5][10];
for(int i = 0; i<5; i++){
    for(int j = 0; j<10; j++){
        if(i<1){
            table2[i][j] = "jButton"+j;
        }else{
            table2[i][j] = "jButton"+i+""+j;
        }
    }
}
for(int i = 0; i<5; i++){
    for(int j = 0; j<10; j++){
        if(table2[i][j].equals("B")) table2[i][j].setIcon.. /* code 2 set icon 2 long
    }
} 
```

所以我用 jButton 名称填写了第二个表，然后尝试调用它：table2[i][j].setIcon，正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T15:11:44.293

您正在使用 String 数组，然后在 String 上调用 setIcon ...

用 JButton 数组替换您的 String 数组。

# jquery - jquery在html选择中获取选定的选项

> ID：10870977
> 
> 赞同：-1
> 
> 时间：2012-06-03T14:01:15.227
> 
> 标签：jquery, json

```
 if ($('#inputRoom option:selected').text() == null || $('#inputRoom option:selected').text() == "")          
       {
         $('#inputRoom option').eq(0).attr('selected', 'selected');
       } 
```

我试图通过 jquery 知道用户是否已经在我的 html 选择元素中选择了一个选项。如果仍然没有，我会自动将所选值设置为第一个选项。但是，这不起作用。

我这样做的方式是否正确？

NOTE: i am populating my select element with the data i obtain from a database when the select element is loaded through `$('#inputRoom').ready(....)`:

更新：它现在工作正常......joy 和 felix 都是正确的......此外，我发现我的淘汰赛代码的定位也会导致一些问题......修复它......谢谢......

```
var trueData = JSON.stringify(data).substring(10, (JSON.stringify(data).length - 2));
var rooms = trueData.split(',');
$('#inputRoom').empty();
$.each(rooms, function (index, value) { 
  $('#inputRoom')
    .append('<option value="' + value.substring(1, value.length - 1) + '">' + 
       value.substring(1, value.length - 1) + '</option>'); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:02:56.937

您可以改用$ [.val](http://api.jquery.com/val/)

```
 if (!$('#inputRoom').val())          
   {
     $('#inputRoom option:first').attr('selected', 'selected');
   } 
```

**笔记**

正如@Felix Kling 在评论中所说，如果您没有任何空选项，那么您不需要这样做，默认情况下将选择第一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:08:18.160

```
$(function(){    

   if (($("#inputRoom").val()=="") ||($("#inputRoom").val()=="0") )
   {
       $('#inputRoom option').eq(1).attr('selected', 'selected');
   }       
}); 
```

假设你的`SELECT`元素是这样的

```
<select id="inputRoom">
    <option value="0" selected></option>
    <option value="1">1</option>
    <option value="2" >3</option>   
</select> 
```

工作样本[http://jsfiddle.net/fDJW3/7/](http://jsfiddle.net/fDJW3/7/)

# mysql - MySQL按优先级列表排序

> ID：10870986
> 
> 赞同：0
> 
> 时间：2012-06-03T14:02:44.763
> 
> 标签：mysql

我需要订购一张桌子，但我不知道用户将如何选择列。

例子：

```
select * 
from table 
order by field1, field2, field3 
```

但用户可以更改字段顺序：field3、field1、field2

我在想这样的事情：

```
select * 
from table
order by 
some_fuction (
field1, priority
field2, priority
field3, priority
) 
```

我可以在每个字段中设置优先级。可能吗？

谢谢， 安德森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:48:24.863

使用`if`，`case`您可以获得解决方案。
您可以查看 SO 上发布的各种解决方案：

1.  [MYSQL ORDER BY 中的“IF”语句？](https://stackoverflow.com/questions/3550942/can-you-add-if-statement-in-php-mysql-order-by)
2.  [MySQL按多个case语句排序](https://stackoverflow.com/questions/9469226/mysql-order-by-multiple-case-statements)
3.  [复杂的sql排序](https://stackoverflow.com/questions/1250070/complex-sql-order-by)
4.  [MySQL：有条件的 ORDER BY 仅对一列](https://dba.stackexchange.com/questions/5422/mysql-conditional-order-by-to-only-one-column)

并且可能更多...

# php - php弹窗更新表单-关闭窗口并刷新父页面

> ID：10870988
> 
> 赞同：0
> 
> 时间：2012-06-03T14:02:54.587
> 
> 标签：php, forms

我有一个更新数据库中记录的 PHP 弹出表单。我添加了我在论坛中找到的代码，以在单击更新按钮时关闭窗口。在 FireFox 和 IE 中运行良好，但在使用 Chrome 时无法运行。关于如何解决这个问题的任何想法？

我还希望在弹出窗口关闭时更新/刷新父页面以播下弹出表单所做的更改。我不知道该怎么做。

编码：

```
<script type="text/javascript">     
function closeSelf(){
   document.forms['form1'].submit();
   window.close();
}
</script> 

<form action="<?php echo $editFormAction; ?>" method="post" name="form1" id="form1">
  <table align="center" class="BulletList">
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">Weight:</td>
      <td align="center"><input type="text" name="icmWeight" value="<?php echo $row_SKUUpdateDIMs['icmWeight']; ?>" size="5" /></td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">Length:</td>
      <td align="center"><input type="text" name="icmLength" value="<?php echo $row_SKUUpdateDIMs['icmLength']; ?>" size="5" /></td>
    </tr>

    <tr valign="baseline">
       <td nowrap="nowrap" align="right">&nbsp;</td>
       <td><input type="button" value="Update record" onclick="closeSelf();" /></td>
    </tr>
  </table>
       <p>
       <input type="hidden" name="MM_update" value="form1" />
       <input type="hidden" name="icmKEY" value="<?php echo $row_SKUUpdateDIMs['icmKEY']; ?>" />
        </p>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:19:28.647

您应该：

1.  等待表单提交。服务器端可以生成一小段 JavaScript，然后可以关闭窗口。

2.  使用jQuery（或其他）将表单数据序列化并传递给父级提交；这将允许您在处理表单时立即关闭窗口。

要让父窗口在弹出窗口中执行任何操作（假设它们在同一个域中），您可以使用`opener`.

**例子**

假设父窗口定义了一个函数`helloWorld()`；从弹出窗口中，您可以将其称为`opener.helloWorld()`.

# python - 为可从外部访问的 Django 应用程序设置服务器

> ID：10870990
> 
> 赞同：0
> 
> 时间：2012-06-03T14:03:19.717
> 
> 标签：python, django, nginx, gunicorn

我编写了一个使用 webhook 的 Django (1.4) 应用程序：在某个时间向我的应用程序发出 POST 请求。出于测试目的，我必须在我的本地机器上尝试它，但我需要从外部访问应用程序（仅现在，在开发期间）。

现在，问题是 Django 开发服务器在本地主机 (127.0.0.1) 上运行，只能从我的机器访问。所以我想到了一个 Gunicorn + nginx 服务器：我怎样才能设置它来满足这些要求？

谢谢你，
魔方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T14:15:09.087

开发服务器也可以从外部看到：

```
manage.py runserver 0.0.0.0:8000 
```

否则，设置 nginx 和 gunicorn 很容易并且有据可查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T04:41:26.613

查看本地隧道 [http://progrium.com/localtunnel/](http://progrium.com/localtunnel/)

它将为您提供一个可从外部访问的唯一 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T15:20:37.480

> 老实说，我不知道。可以肯定的是，我根本没有配置任何防火墙。我在一台运行 ArchLinux 的机器上，所以我认为不涉及防火墙。

要从防火墙外部快速启动并运行它，请考虑使用像[heroku](http://www.heroku.com/)这样的 PaaS 提供商。

# java - 什么是导入的类文件，它们从哪里导入？

> ID：10870992
> 
> 赞同：-1
> 
> 时间：2012-06-03T14:03:39.830
> 
> 标签：java, class, import

导入类是什么意思，它们是从哪里导入的？

例子

```
package game;

import game.sprites.PlayerSprite;
import java.applet.Applet;
import java.awt.*;
import java.io.*;
import java.net.URL;
import java.util.Vector;
import litecom.Trace;
import litecom.gfxe.LoaderTarget2;
import litecom.gfxe.Timer;
import litecom.scoreclient2.ScoreClient2; 
```

现在我知道 LoaderTarget2.class ScoreClient2.class 和 Timer.class 是从哪里导入的。它们是从它自己“游戏”的类中导入的，路径是/litecom/gfxe/Timer.class。但是 Vector.class 是从哪里来的呢？还是 URL.class 或 Applet.class？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T14:08:32.423

Vector.class 、 URL.class 和 Applet.class 是从 "rt.jar" 中的 java 类库导入的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:08:53.623

导入的类（通常）来自类路径中的 JAR 文件。 `import`一种告诉编译器您的代码需要外部代码以及哪些代码的方法。

考虑：

```
Bug b = new Bug(); 
```

是有效的，但 Bug() 是在哪里定义的？编译器将查看您的导入，直到它在定义 Bug 的类路径中找到一个类。

另外，请记住，类路径中的文件路径和 java 类的位置/包没有关系。在 Bug 示例中，假设`Bug`类在 bug.jar 中，而`Bug`' 包是`this.that.Bug`. 如果权限允许， bug.jar 可以位于文件系统上的*任何位置。*类路径只需要包含它的位置。在 java 中，我们指的是类的包，而不是它们的物理位置。因此，无论 bug.jar 位于文件系统的哪个位置，`this.that.Bug`如有必要，我始终可以显式导入或引用该类：

```
 this.that.Bug b = new this.that.Bug(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:09:20.023

启动 JRE 时，默认情况下有一个引导类加载器。引导类加载器包含该语言定义的所有类。它们通常存在于 Java 安装中的文件名“classes.jar”或“rt.jar”中，但不能保证。这些类像任何其他类一样是可导入的。

# css - 反应灵敏。改变 在媒体查询、浮动问题和字体大小中使用 CSS 显示顺序

> ID：10870996
> 
> 赞同：1
> 
> 时间：2012-06-03T14:04:24.450
> 
> 标签：css, css-float, font-size, fluid-layout

我正在处理这个页面：

[http://www.analog.la/test/ret/index2.html](http://www.analog.la/test/ret/index2.html)

基本上有一个包含分区，其中包含 5。它们向左浮动以垂直排列，但我在如何调整媒体查询中的 CSS 时遇到了一些问题（一个用于 768，一个用于 480）。

如您所见，主要顺序是 logo、hex1、middle、hex2、hex3。

**浮动问题**

对于 768，我非常希望有 logo 和 hex1（居中），然后是中间下方（居中）和 hex2 和 3（居中）。但是当我把浮动从中间移开时，它就被“从浮动方程中取出”了，一切都变得尴尬了！所以我设置它没有浮动，但这将中间 div 推得太低，我不喜欢。任何提示将不胜感激！

**显示顺序**

对于 480 及更低版本，我真的很想改变分区的顺序，这样我就可以拥有徽标，然后是“中间”部分，然后是十六进制链接，但我不知道如何通过 CSS 更改顺序。我在这里看到了一个类似的线程 - 但是这个人使用了提供的网格，我自己把它放在一起，所以它似乎不适用。

**字体大小**

只是想知道是否有字体大小（用于标题）响应页面宽度？这不是真正的高优先级，但很高兴知道！

谢谢一堆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:56:53.807

对于浮动：尝试使您的 .links1 和 .links2 div 的宽度为 100%，并为它们添加一个 css clearfix 以清除浮动。这可能会解决 .preorder div 的格式问题。要使六边形居中，您也可以尝试将 text-align:center 规则添加到 .links1 和 .links2 div。

这是 chris coyner 网站上关于 clearfix 的文章：http: [//css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

对于字体大小：如果您想在窗口调整大小时逐渐更改它，请查看 fitText：[http](http://fittextjs.com/) ://fittextjs.com/ - 它需要一些调整才能使其正常工作，但看起来这是您的效果'正在寻找。

此外，看起来您可能需要对 .container div 进行 clearfix

# java - 在以下情况下是否可能发生短路评估

> ID：10870998
> 
> 赞同：2
> 
> 时间：2012-06-03T14:04:49.420
> 
> 标签：java

```
public class JavaApplication11 {

    static boolean fun() {
        System.out.println("fun");
        return true;
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        boolean status = false;
        status = status & fun();
        status = fun() & status;
    }
} 
```

Java会不会想，既然`status`已经是假的，就不会执行`fun`方法了吗？我测试过，在这两种情况下，`fun`都会被执行。但是，它是否保证跨越 Java 规范？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T14:06:31.060

此处不会发生短路评估，因为您使用的是*按位*与运算 ( `&`) 而不是*逻辑*与运算 ( `&&`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T14:06:30.050

double`&`用于短路操作。采用

```
status = status && fun(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T14:06:41.277

`&&`保证操作员短路。运营商保证不会
。`&`